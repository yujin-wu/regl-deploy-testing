var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return"jscomp_symbol_"+a+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();if(a[$jscomp.global.Symbol.iterator])return a[$jscomp.global.Symbol.iterator]();var h=0;return{next:function(){return h==a.length?{done:!0}:{done:!1,value:a[h++]}}}};
$jscomp.arrayFromIterator=function(a){for(var h,u=[];!(h=a.next()).done;)u.push(h.value);return u};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.inherits=function(a,h){function u(){}u.prototype=h.prototype;a.prototype=new u;a.prototype.constructor=a;for(var t in h)if($jscomp.global.Object.defineProperties){var k=$jscomp.global.Object.getOwnPropertyDescriptor(h,t);k&&$jscomp.global.Object.defineProperty(a,t,k)}else a[t]=h[t]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(a,h){a instanceof String&&(a=String(a));var u=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={},k=(t.next=function(){if(u<a.length){var g=u++;return{value:h(g,a[g]),done:!1}}k.next=$jscomp.array.done_;return $jscomp.array.done_()},t[Symbol.iterator]=function(){return k},t);return k};
$jscomp.array.findInternal_=function(a,h,u){a instanceof String&&(a=String(a));for(var t=a.length,k=0;k<t;k++){var g=a[k];if(h.call(u,g,k,a))return{i:k,v:g}}return{i:-1,v:void 0}};
$jscomp.array.from=function(a,h,u){h=void 0===h?function(g){return g}:h;var t=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(a[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=a[Symbol.iterator]();for(var k;!(k=a.next()).done;)t.push(h.call(u,k.value))}else{k=a.length;for(var g=0;g<k;g++)t.push(h.call(u,a[g]))}return t};$jscomp.array.of=function(a){for(var h=[],u=0;u<arguments.length;++u)h[u-0]=arguments[u];return $jscomp.array.from(h)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(a,h){return[a,h]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(a){return a})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(a,h){return h})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(a,h,u){var t=this.length;a=Number(a);h=Number(h);u=Number(null!=u?u:t);if(a<h)for(u=Math.min(u,t);h<u;)h in this?this[a++]=this[h++]:(delete this[a++],h++);else for(u=Math.min(u,t+h-a),a+=u-h;u>h;)--u in this?this[--a]=this[u]:delete this[a];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(a,h,u){null!=u&&a.length||(u=this.length||0);u=Number(u);for(h=Number((void 0===h?0:h)||0);h<u;h++)this[h]=a;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(a,h){return $jscomp.array.findInternal_(this,a,h).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(a,h){return $jscomp.array.findInternal_(this,a,h).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(a){a=void 0===a?[]:a;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())h=h.value,this.set(h[0],h[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var a=$jscomp.global.Map;if(!a||!a.prototype.entries||!Object.seal)return!1;try{var h=Object.seal({x:4}),u=new a($jscomp.makeIterator([[h,"s"]]));if("s"!=u.get(h)||1!=u.size||u.get({x:4})||u.set({x:4},"t")!=u||2!=u.size)return!1;var t=u.entries(),k=t.next();if(k.done||k.value[0]!=h||"s"!=k.value[1])return!1;k=t.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!t.next().done?!1:!0}catch(g){return!1}};
$jscomp.Map.createHead_=function(){var a={};return a.previous=a.next=a.head=a};$jscomp.Map.getId_=function(a){if(!(a instanceof Object))return String(a);$jscomp.Map.key_ in a||a instanceof Object&&Object.isExtensible&&Object.isExtensible(a)&&$jscomp.Map.defineProperty_(a,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in a?a[$jscomp.Map.key_]:" "+a};
$jscomp.Map.prototype.set=function(a,h){var u=this.maybeGetEntry_(a),t=u.id,k=u.list,u=u.entry;k||(k=this.data_[t]=[]);u?u.value=h:(u={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:h},k.push(u),this.head_.previous.next=u,this.head_.previous=u,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(a){var h=this.maybeGetEntry_(a);a=h.id;var u=h.list,t=h.index;return(h=h.entry)&&u?(u.splice(t,1),u.length||delete this.data_[a],h.previous.next=h.next,h.next.previous=h.previous,h.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(a){return!!this.maybeGetEntry_(a).entry};
$jscomp.Map.prototype.get=function(a){return(a=this.maybeGetEntry_(a).entry)&&a.value};$jscomp.Map.prototype.maybeGetEntry_=function(a){var h=$jscomp.Map.getId_(a),u=this.data_[h];if(u)for(var t=0;t<u.length;t++){var k=u[t];if(a!==a&&k.key!==k.key||a===k.key)return{id:h,list:u,index:t,entry:k}}return{id:h,list:u,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(a){return[a.key,a.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(a){return a.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(a){return a.value})};$jscomp.Map.prototype.forEach=function(a,h){for(var u=$jscomp.makeIterator(this.entries()),t=u.next();!t.done;t=u.next())t=t.value,a.call(h,t[1],t[0],this)};
$jscomp.Map.prototype.iter_=function(a){var h=this,u=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var t={};return t.next=function(){if(u){for(;u.head!=h.head_;)u=u.previous;for(;u.next!=u.head;)return u=u.next,{done:!1,value:a(u)};u=null}return{done:!0,value:void 0}},t[Symbol.iterator]=function(){return this},t};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(a,h,u){Object.defineProperty(a,h,{value:String(u)})}:function(a,h,u){a[h]=String(u)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(a){a=Number(a)>>>0;if(0===a)return 32;var h=0;0===(a&4294901760)&&(a<<=16,h+=16);0===(a&4278190080)&&(a<<=8,h+=8);0===(a&4026531840)&&(a<<=4,h+=4);0===(a&3221225472)&&(a<<=2,h+=2);0===(a&2147483648)&&h++;return h};$jscomp.math.imul=function(a,h){a=Number(a);h=Number(h);var u=a&65535,t=h&65535;return u*t+((a>>>16&65535)*t+u*(h>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1};
$jscomp.math.log10=function(a){return Math.log(a)/Math.LN10};$jscomp.math.log2=function(a){return Math.log(a)/Math.LN2};$jscomp.math.log1p=function(a){a=Number(a);if(.25>a&&-.25<a){for(var h=a,u=1,t=a,k=0,g=1;k!=t;)h*=a,g*=-1,t=(k=t)+g*h/++u;return t}return Math.log(1+a)};$jscomp.math.expm1=function(a){a=Number(a);if(.25>a&&-.25<a){for(var h=a,u=1,t=a,k=0;k!=t;)h*=a/++u,t=(k=t)+h;return t}return Math.exp(a)-1};$jscomp.math.cosh=function(a){a=Number(a);return(Math.exp(a)+Math.exp(-a))/2};
$jscomp.math.sinh=function(a){a=Number(a);return 0===a?a:(Math.exp(a)-Math.exp(-a))/2};$jscomp.math.tanh=function(a){a=Number(a);if(0===a)return a;var h=Math.exp(2*-Math.abs(a)),h=(1-h)/(1+h);return 0>a?-h:h};$jscomp.math.acosh=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};$jscomp.math.asinh=function(a){a=Number(a);if(0===a)return a;var h=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-h:h};
$jscomp.math.atanh=function(a){a=Number(a);return($jscomp.math.log1p(a)-$jscomp.math.log1p(-a))/2};
$jscomp.math.hypot=function(a,h,u){for(var t=[],k=2;k<arguments.length;++k)t[k-2]=arguments[k];a=Number(a);h=Number(h);for(var g=Math.max(Math.abs(a),Math.abs(h)),q=$jscomp.makeIterator(t),k=q.next();!k.done;k=q.next())g=Math.max(g,Math.abs(k.value));if(1E100<g||1E-100>g){a/=g;h/=g;q=a*a+h*h;t=$jscomp.makeIterator(t);for(k=t.next();!k.done;k=t.next())k=k.value,k=Number(k)/g,q+=k*k;return Math.sqrt(q)*g}g=a*a+h*h;t=$jscomp.makeIterator(t);for(k=t.next();!k.done;k=t.next())k=k.value,k=Number(k),g+=
k*k;return Math.sqrt(g)};$jscomp.math.trunc=function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var h=Math.floor(Math.abs(a));return 0>a?-h:h};$jscomp.math.cbrt=function(a){if(0===a)return a;a=Number(a);var h=Math.pow(Math.abs(a),1/3);return 0>a?-h:h};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a};
$jscomp.number.isInteger=function(a){return $jscomp.number.isFinite(a)?a===Math.floor(a):!1};$jscomp.number.isNaN=function(a){return"number"===typeof a&&isNaN(a)};$jscomp.number.isSafeInteger=function(a){return $jscomp.number.isInteger(a)&&Math.abs(a)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(a,h){for(var u=[],t=1;t<arguments.length;++t)u[t-1]=arguments[t];u=$jscomp.makeIterator(u);for(t=u.next();!t.done;t=u.next())if(t=t.value)for(var k in t)Object.prototype.hasOwnProperty.call(t,k)&&(a[k]=t[k]);return a};$jscomp.object.is=function(a,h){return a===h?0!==a||1/a===1/h:a!==a&&h!==h};$jscomp.Set=function(a){a=void 0===a?[]:a;this.map_=new $jscomp.Map;if(a){a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())this.add(h.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var a=$jscomp.global.Set;if(!a||!a.prototype.entries||!Object.seal)return!1;var h=Object.seal({x:4}),a=new a($jscomp.makeIterator([h]));if(a.has(h)||1!=a.size||a.add(h)!=a||1!=a.size||a.add({x:4})!=a||2!=a.size)return!1;var a=a.entries(),u=a.next();if(u.done||u.value[0]!=h||u.value[1]!=h)return!1;u=a.next();return u.done||u.value[0]==h||4!=u.value[0].x||u.value[1]!=u.value[0]?!1:a.next().done};
$jscomp.Set.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(a){return this.map_.has(a)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(a,h){var u=this;this.map_.forEach(function(t){return a.call(h,t,t,u)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(a,h){if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(a){for(var h=[],u=0;u<arguments.length;++u)h[u-0]=arguments[u];for(var u="",h=$jscomp.makeIterator(h),t=h.next();!t.done;t=h.next()){t=t.value;t=+t;if(0>t||1114111<t||t!==Math.floor(t))throw new RangeError("invalid_code_point "+t);65535>=t?u+=String.fromCharCode(t):(t-=65536,u+=String.fromCharCode(t>>>10&1023|55296),u+=String.fromCharCode(t&1023|56320))}return u};
$jscomp.string.repeat=function(a){var h=this.toString();if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var u="";a;)if(a&1&&(u+=h),a>>>=1)h+=h;return u};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(a){var h=this.toString(),u=h.length;a=Number(a)||0;if(0<=a&&a<u){a|=0;var t=h.charCodeAt(a);if(55296>t||56319<t||a+1===u)return t;a=h.charCodeAt(a+1);return 56320>a||57343<a?t:1024*(t-55296)+a+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(a,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(a,"includes");return-1!==this.toString().indexOf(a,h)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(a,h){h=void 0===h?0:h;$jscomp.string.noRegExp_(a,"startsWith");var u=this.toString();a+="";for(var t=u.length,k=a.length,g=Math.max(0,Math.min(h|0,u.length)),q=0;q<k&&g<t;)if(u[g++]!=a[q++])return!1;return q>=k};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(a,h){$jscomp.string.noRegExp_(a,"endsWith");var u=this.toString();a+="";void 0===h&&(h=u.length);for(var t=Math.max(0,Math.min(h|0,u.length)),k=a.length;0<k&&0<t;)if(u[--t]!=a[--k])return!1;return 0>=k};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function a(h,u,t){function k(f,d){if(!u[f]){if(!h[f]){var q="function"==typeof require&&require;if(!d&&q)return q(f,!0);if(g)return g(f,!0);q=Error("Cannot find module '"+f+"'");throw q.code="MODULE_NOT_FOUND",q;}q=u[f]={exports:{}};h[f][0].call(q.exports,function(d){return k(h[f][1][d]||d)},q,q.exports,a,h,u,t)}return u[f].exports}for(var g="function"==typeof require&&require,q=0;q<t.length;q++)k(t[q]);return k}return a})()({1:[function(a,h,u){h=a("../regl")();u=a("vectorize-text");var t=
a("gl-mat4/perspective"),k=a("gl-mat4/lookAt");a=u("hello regl!",{textAlign:"center",textBaseline:"middle"});var g=h.texture({copy:!0,min:"linear",mag:"linear"}),q=h({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:g,t:function(d){return.001*d.tick}},depth:{enable:!1},count:3}),f=h({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:a.positions},
elements:a.edges,uniforms:{t:function(d){return.01*d.tick},view:function(d){d=.01*d.tick;return k([],[5*Math.sin(d),0,-5*Math.cos(d)],[0,0,0],[0,-1,0])},projection:function(d){return t([],Math.PI/4,d.viewportWidth/d.viewportHeight,.01,1E3)}},depth:{enable:!1}});h.frame(function(){q();f();g({copy:!0,min:"linear",mag:"linear"})})},{"../regl":133,"gl-mat4/lookAt":85,"gl-mat4/perspective":86,"vectorize-text":129}],2:[function(a,h,u){function t(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var k=a("./util/sorted-object-keys"),g=a("./util/check"),q=a("./util/values"),f=a("./constants/dtypes.json"),d=a("./util/is-typed-array"),D=a("./util/is-ndarray"),n=a("./constants/primitives.json"),v="attributes elements offset count primitive instances".split(" ");h.exports=function(a,w,p,e,c,m,x){function y(b){if(b!==L.currentVAO){var l=w.oes_vertex_array_object;b?l.bindVertexArrayOES(b.vao):l.bindVertexArrayOES(null);
L.currentVAO=b}}function H(l){if(l!==L.currentVAO){if(l)l.bindAttrs();else{for(var c=w.angle_instanced_arrays,d=0;d<b.length;++d){var g=b[d];g.buffer?(a.enableVertexAttribArray(d),g.buffer.bind(),a.vertexAttribPointer(d,g.size,g.type,g.normalized,g.stride,g.offfset),c&&g.divisor&&c.vertexAttribDivisorANGLE(d,g.divisor)):(a.disableVertexAttribArray(d),a.vertexAttrib4f(d,g.x,g.y,g.z,g.w))}x.elements?a.bindBuffer(34963,x.elements.buffer.buffer):a.bindBuffer(34963,null)}L.currentVAO=l}}function na(){q(B).forEach(function(b){b.destroy()})}
function A(){this.id=++l;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=w.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;B[this.id]=this;this.buffers=[]}function h(){w.oes_vertex_array_object&&q(B).forEach(function(b){b.refresh()})}var C=p.maxAttributes,b=Array(C);for(p=0;p<C;++p)b[p]=new t;var l=0,B={},L={Record:t,scope:{},state:b,currentVAO:null,targetVAO:null,restore:w.oes_vertex_array_object?h:function(){},
createVAO:function(b){function l(b){var e;if(Array.isArray(b))e=b,p.elements&&p.ownsElements&&p.elements.destroy(),p.elements=null,p.ownsElements=!1,p.offset=0,p.count=0,p.instances=-1,p.primitive=4;else{g("object"===typeof b,"invalid arguments for create vao");g("attributes"in b,"must specify attributes for vao");if(b.elements){var q=b.elements;p.ownsElements?("function"===typeof q&&"elements"===q._reglType?p.elements.destroy():p.elements(q),p.ownsElements=!1):m.getElements(b.elements)?(p.elements=
b.elements,p.ownsElements=!1):(p.elements=m.create(b.elements),p.ownsElements=!0)}else p.elements=null,p.ownsElements=!1;e=b.attributes;p.offset=0;p.count=-1;p.instances=-1;p.primitive=4;p.elements&&(p.count=p.elements._elements.vertCount,p.primitive=p.elements._elements.primType);"offset"in b&&(p.offset=b.offset|0);"count"in b&&(p.count=b.count|0);"instances"in b&&(p.instances=b.instances|0);"primitive"in b&&(g(b.primitive in n,"bad primitive type: "+b.primitive),p.primitive=n[b.primitive]);g.optional(function(){for(var l=
k(b),c=0;c<l.length;++c)g(0<=v.indexOf(l[c]),'invalid option for vao: "'+l[c]+'" valid options are '+v)});g(Array.isArray(e),"attributes must be an array")}g(e.length<C,"too many attributes");g(0<e.length,"must specify at least one attribute");var q={},r=p.attributes;r.length=e.length;for(var J=0;J<e.length;++J){var x=e[J],B=r[J]=new t,L=x.data||x;if(Array.isArray(L)||d(L)||D(L)){var y;p.buffers[J]&&(y=p.buffers[J],d(L)&&y._buffer.byteLength>=L.byteLength?y.subdata(L):(y.destroy(),p.buffers[J]=null));
p.buffers[J]||(y=p.buffers[J]=c.create(x,34962,!1,!0));B.buffer=c.getBuffer(y);B.size=B.buffer.dimension|0;B.normalized=!1;B.type=B.buffer.dtype;B.offset=0;B.stride=0;B.divisor=0;B.state=1;q[J]=1}else c.getBuffer(x)?(B.buffer=c.getBuffer(x),B.size=B.buffer.dimension|0,B.normalized=!1,B.type=B.buffer.dtype,B.offset=0,B.stride=0,B.divisor=0,B.state=1):c.getBuffer(x.buffer)?(B.buffer=c.getBuffer(x.buffer),B.size=(+x.size||B.buffer.dimension)|0,B.normalized=!!x.normalized||!1,"type"in x?(g.parameter(x.type,
f,"invalid buffer type"),B.type=f[x.type]):B.type=B.buffer.dtype,B.offset=(x.offset||0)|0,B.stride=(x.stride||0)|0,B.divisor=(x.divisor||0)|0,B.state=1,g(1<=B.size&&4>=B.size,"size must be between 1 and 4"),g(0<=B.offset,"invalid offset"),g(0<=B.stride&&255>=B.stride,"stride must be between 0 and 255"),g(0<=B.divisor,"divisor must be positive"),g(!B.divisor||!!w.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in x?(g(0<J,"first attribute must not be a constant"),
B.x=+x.x||0,B.y=+x.y||0,B.z=+x.z||0,B.w=+x.w||0,B.state=2):g(!1,"invalid attribute spec for location "+J)}for(y=0;y<p.buffers.length;++y)!q[y]&&p.buffers[y]&&(p.buffers[y].destroy(),p.buffers[y]=null);p.refresh();return l}var p=new A;e.vaoCount+=1;l.destroy=function(){for(var b=0;b<p.buffers.length;++b)p.buffers[b]&&p.buffers[b].destroy();p.buffers.length=0;p.ownsElements&&(p.elements.destroy(),p.elements=null,p.ownsElements=!1);p.destroy()};l._vao=p;l._reglType="vao";return l(b)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(l){for(var c=0;c<b.length;++c){var d=b[c];d.buffer===l&&(a.disableVertexAttribArray(c),d.buffer=null)}},setVAO:w.oes_vertex_array_object?y:H,clear:w.oes_vertex_array_object?na:function(){}};A.prototype.bindAttrs=function(){for(var b=w.angle_instanced_arrays,l=this.attributes,c=0;c<l.length;++c){var d=l[c];d.buffer?(a.enableVertexAttribArray(c),a.bindBuffer(34962,d.buffer.buffer),a.vertexAttribPointer(c,d.size,d.type,d.normalized,d.stride,d.offset),
b&&d.divisor&&b.vertexAttribDivisorANGLE(c,d.divisor)):(a.disableVertexAttribArray(c),a.vertexAttrib4f(c,d.x,d.y,d.z,d.w))}for(b=l.length;b<C;++b)a.disableVertexAttribArray(b);(b=m.getElements(this.elements))?a.bindBuffer(34963,b.buffer.buffer):a.bindBuffer(34963,null)};A.prototype.refresh=function(){var b=w.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),L.currentVAO=null,b.bindVertexArrayOES(null))};A.prototype.destroy=function(){if(this.vao){var b=w.oes_vertex_array_object;
this===L.currentVAO&&(L.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);B[this.id]&&(delete B[this.id],--e.vaoCount)};return L}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(a,h,u){function t(c){return p[Object.prototype.toString.call(c)]|
0}function k(c,d){for(var g=0;g<d.length;++g)c[g]=d[g]}function g(c,d,g,e,f,m,p){for(var b=0,l=0;l<g;++l)for(var n=0;n<e;++n)c[b++]=d[f*l+m*n+p]}var q=a("./util/sorted-object-keys"),f=a("./util/check"),d=a("./util/is-typed-array"),D=a("./util/is-ndarray"),n=a("./util/values"),v=a("./util/pool");u=a("./util/flatten");var z=u.flatten,w=u.shape,p=a("./constants/arraytypes.json"),e=a("./constants/dtypes.json"),c=a("./constants/usage.json"),m=[];m[5120]=1;m[5122]=2;m[5124]=4;m[5121]=1;m[5123]=2;m[5125]=
4;m[5126]=4;h.exports=function(p,y,a,na){function A(b){this.id=l++;this.buffer=p.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;a.profile&&(this.stats={size:0})}function h(b,l,c){b.byteLength=l.byteLength;p.bufferData(b.type,l,c)}function C(b,l,c,e,p,m){b.usage=c;if(Array.isArray(l)){if(b.dtype=e||5126,0<l.length)if(Array.isArray(l[0])){p=w(l);for(var r=e=1;r<p.length;++r)e*=p[r];b.dimension=e;l=z(l,p,b.dtype);h(b,l,c);m?b.persistentData=
l:v.freeType(l)}else"number"===typeof l[0]?(b.dimension=p,p=v.allocType(b.dtype,l.length),k(p,l),h(b,p,c),m?b.persistentData=p:v.freeType(p)):d(l[0])?(b.dimension=l[0].length,b.dtype=e||t(l[0])||5126,l=z(l,[l.length,l[0].length],b.dtype),h(b,l,c),m?b.persistentData=l:v.freeType(l)):f.raise("invalid buffer data")}else if(d(l))b.dtype=e||t(l),b.dimension=p,h(b,l,c),m&&(b.persistentData=new Uint8Array(new Uint8Array(l.buffer)));else if(D(l)){p=l.shape;var n=l.stride,r=l.offset,q=0,B=0,x=0,L=0;1===p.length?
(q=p[0],B=1,x=n[0],L=0):2===p.length?(q=p[0],B=p[1],x=n[0],L=n[1]):f.raise("invalid shape");b.dtype=e||t(l.data)||5126;b.dimension=B;p=v.allocType(b.dtype,q*B);g(p,l.data,q,B,x,L,r);h(b,p,c);m?b.persistentData=p:v.freeType(p)}else l instanceof ArrayBuffer?(b.dtype=5121,b.dimension=p,h(b,l,c),m&&(b.persistentData=new Uint8Array(new Uint8Array(l)))):f.raise("invalid buffer data")}function b(b){y.bufferCount--;na(b);var l=b.buffer;f(l,"buffer must not be deleted already");p.deleteBuffer(l);b.buffer=
null;delete B[b.id]}var l=0,B={};A.prototype.bind=function(){p.bindBuffer(this.type,this.buffer)};A.prototype.destroy=function(){b(this)};var L=[];a.profile&&(y.getTotalBufferSize=function(){var b=0;q(B).forEach(function(l){b+=B[l].stats.size});return b});return{create:function(l,n,q,L){function na(b){var l=35044,g=null,n=0,q=0,B=1;Array.isArray(b)||d(b)||D(b)||b instanceof ArrayBuffer?g=b:"number"===typeof b?n=b|0:b&&(f.type(b,"object","buffer arguments must be an object, a number or an array"),
"data"in b&&(f(null===g||Array.isArray(g)||d(g)||D(g),"invalid data for buffer"),g=b.data),"usage"in b&&(f.parameter(b.usage,c,"invalid buffer usage"),l=c[b.usage]),"type"in b&&(f.parameter(b.type,e,"invalid buffer type"),q=e[b.type]),"dimension"in b&&(f.type(b.dimension,"number","invalid dimension"),B=b.dimension|0),"length"in b&&(f.nni(n,"buffer length must be a nonnegative integer"),n=b.length|0));r.bind();g?C(r,g,l,q,B,L):(n&&p.bufferData(r.type,n,l),r.dtype=q||5121,r.usage=l,r.dimension=B,r.byteLength=
n);a.profile&&(r.stats.size=r.byteLength*m[r.dtype]);return na}function I(b,l){f(l+b.byteLength<=r.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+l+" to a buffer of size "+r.byteLength);p.bufferSubData(r.type,l,b)}y.bufferCount++;var r=new A(n);B[r.id]=r;q||na(l);na._reglType="buffer";na._buffer=r;na.subdata=function(b,l){var c=(l||0)|0,e;r.bind();if(d(b)||b instanceof ArrayBuffer)I(b,c);else if(Array.isArray(b)){if(0<
b.length)if("number"===typeof b[0]){var p=v.allocType(r.dtype,b.length);k(p,b);I(p,c);v.freeType(p)}else Array.isArray(b[0])||d(b[0])?(e=w(b),p=z(b,e,r.dtype),I(p,c),v.freeType(p)):f.raise("invalid buffer data")}else if(D(b)){e=b.shape;var m=b.stride,n=p=0,q=0,B=0;1===e.length?(p=e[0],n=1,q=m[0],B=0):2===e.length?(p=e[0],n=e[1],q=m[0],B=m[1]):f.raise("invalid shape");e=Array.isArray(b.data)?r.dtype:t(b.data);e=v.allocType(e,p*n);g(e,b.data,p,n,q,B,b.offset);I(e,c);v.freeType(e)}else f.raise("invalid data for buffer subdata");
return na};a.profile&&(na.stats=r.stats);na.destroy=function(){b(r)};return na},createStream:function(b,l){var c=L.pop();c||(c=new A(b));c.bind();C(c,l,35040,0,1,!1);return c},destroyStream:function(b){L.push(b)},clear:function(){n(B).forEach(b);L.forEach(b)},getBuffer:function(b){return b&&b._buffer instanceof A?b._buffer:null},restore:function(){n(B).forEach(function(b){b.buffer=p.createBuffer();p.bindBuffer(b.type,b.buffer);p.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:C}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(a,h,u){h.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(a,h,u){h.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(a,h,u){h.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(a,h,u){h.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(a,h,u){function t(b){return Array.isArray(b)||p(b)||e(b)}function k(b){return b.sort(function(b,
l){return"viewport"===b?-1:"viewport"===l?1:b<l?-1:1})}function g(b,l,c,d){this.thisDep=b;this.contextDep=l;this.propDep=c;this.append=d}function q(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function f(b){return new g(!1,!1,!1,b)}function d(b,l){var c=b.type;if(0===c)return c=b.data.length,new g(!0,1<=c,2<=c,l);if(4===c)return c=b.data,new g(c.thisDep,c.contextDep,c.propDep,l);if(5===c)return new g(!1,!1,!1,l);if(6===c){for(var d=c=!1,e=!1,f=0;f<b.data.length;++f){var r=b.data[f];1===r.type?
e=!0:2===r.type?d=!0:3===r.type?c=!0:0===r.type?(c=!0,r=r.data,1<=r&&(d=!0),2<=r&&(e=!0)):4===r.type&&(c=c||r.data.thisDep,d=d||r.data.contextDep,e=e||r.data.propDep)}return new g(c,d,e,l)}return new g(3===c,2===c,1===c,l)}var D=a("./util/sorted-object-keys"),n=a("./util/check"),v=a("./util/extend"),z=a("./util/codegen"),w=a("./util/loop"),p=a("./util/is-typed-array"),e=a("./util/is-ndarray"),c=a("./util/is-array-like"),m=a("./dynamic"),x=a("./constants/primitives.json"),y=a("./constants/dtypes.json"),
H=["x","y","z","w"],na="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),A={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},aa="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
C={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},b={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},l={frag:35632,vert:35633},B={cw:2304,ccw:2305},L=new g(!1,!1,!1,function(){});h.exports=function(e,p,a,N,h,I,r,J,la,ia,ua,u,ma,za,da){function ga(b){return b.replace(".","_")}function O(b,l,c){var r=ga(b);
ja.push(b);M[r]=Q[r]=!!c;Ja[r]=l}function T(b,l,c){var r=ga(b);ja.push(b);Array.isArray(c)?(Q[r]=c.slice(),M[r]=c.slice()):Q[r]=M[r]=c;Ea[r]=l}function ra(){var b=z(),l=b.link,c=b.global;b.id=sc++;b.batchId="0";var r=l(La),d=b.shared={props:"a0"};D(La).forEach(function(b){d[b]=c.def(r,".",b)});n.optional(function(){b.CHECK=l(n);b.commandStr=n.guessCommand();b.command=l(b.commandStr);b.assert=function(b,c,r){b("if(!(",c,"))",this.CHECK,".commandRaise(",l(r),",",this.command,");")};K.invalidBlendCombinations=
aa});var e=b.next={},g=b.current={};D(Ea).forEach(function(b){Array.isArray(Q[b])&&(e[b]=c.def(d.next,".",b),g[b]=c.def(d.current,".",b))});var f=b.constants={};D(K).forEach(function(b){f[b]=c.def(JSON.stringify(K[b]))});b.invoke=function(c,r){switch(r.type){case 0:var e=["this",d.context,d.props,b.batchId];return c.def(l(r.data),".call(",e.slice(0,Math.max(r.data.length+1,4)),")");case 1:return c.def(d.props,r.data);case 2:return c.def(d.context,r.data);case 3:return c.def("this",r.data);case 4:return r.data.append(b,
c),r.data.ref;case 5:return r.data.toString();case 6:return r.data.map(function(l){return b.invoke(c,l)})}};b.attribCache={};var m={};b.scopeAttrib=function(b){b=p.id(b);if(b in m)return m[b];var c=ia.scope[b];c||(c=ia.scope[b]=new oa);return m[b]=l(c)};return b}function S(b){var l=b["static"];b=b.dynamic;var c;if("profile"in l){var r=!!l.profile;c=f(function(b,l){return r});c.enable=r}else if("profile"in b){var e=b.profile;c=d(e,function(b,l){return b.invoke(l,e)})}return c}function Gb(b,l){var c=
b["static"],r=b.dynamic;if("framebuffer"in c){var e=c.framebuffer;return e?(e=J.getFramebuffer(e),n.command(e,"invalid framebuffer object"),f(function(b,l){var c=b.link(e),r=b.shared;l.set(r.framebuffer,".next",c);r=r.context;l.set(r,".framebufferWidth",c+".width");l.set(r,".framebufferHeight",c+".height");return c})):f(function(b,l){var c=b.shared;l.set(c.framebuffer,".next","null");c=c.context;l.set(c,".framebufferWidth",c+".drawingBufferWidth");l.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in r){var g=r.framebuffer;return d(g,function(b,l){var c=b.invoke(l,g),r=b.shared,d=r.framebuffer,e=l.def(d,".getFramebuffer(",c,")");n.optional(function(){b.assert(l,"!"+c+"||"+e,"invalid framebuffer object")});l.set(d,".next",e);r=r.context;l.set(r,".framebufferWidth",e+"?"+e+".width:"+r+".drawingBufferWidth");l.set(r,".framebufferHeight",e+"?"+e+".height:"+r+".drawingBufferHeight");return e})}return null}function Ta(b,l,c){function r(b){if(b in e){var p=e[b];n.commandType(p,
"object","invalid "+b,c.commandStr);var m=!0,q=p.x|0,B=p.y|0,x,k;"width"in p?(x=p.width|0,n.command(0<=x,"invalid "+b,c.commandStr)):m=!1;"height"in p?(k=p.height|0,n.command(0<=k,"invalid "+b,c.commandStr)):m=!1;return new g(!m&&l&&l.thisDep,!m&&l&&l.contextDep,!m&&l&&l.propDep,function(b,l){var c=b.shared.context,r=x;"width"in p||(r=l.def(c,".","framebufferWidth","-",q));var d=k;"height"in p||(d=l.def(c,".","framebufferHeight","-",B));return[q,B,r,d]})}if(b in f){var J=f[b],m=d(J,function(l,c){var r=
l.invoke(c,J);n.optional(function(){l.assert(c,r+"&&typeof "+r+'==="object"',"invalid "+b)});var d=l.shared.context,e=c.def(r,".x|0"),g=c.def(r,".y|0"),p=c.def('"width" in ',r,"?",r,".width|0:","(",d,".","framebufferWidth","-",e,")"),f=c.def('"height" in ',r,"?",r,".height|0:","(",d,".","framebufferHeight","-",g,")");n.optional(function(){l.assert(c,p+">=0&&"+f+">=0","invalid "+b)});return[e,g,p,f]});l&&(m.thisDep=m.thisDep||l.thisDep,m.contextDep=m.contextDep||l.contextDep,m.propDep=m.propDep||l.propDep);
return m}return l?new g(l.thisDep,l.contextDep,l.propDep,function(b,l){var c=b.shared.context;return[0,0,l.def(c,".","framebufferWidth"),l.def(c,".","framebufferHeight")]}):null}var e=b["static"],f=b.dynamic;if(b=r("viewport")){var p=b;b=new g(b.thisDep,b.contextDep,b.propDep,function(b,l){var c=p.append(b,l),r=b.shared.context;l.set(r,".viewportWidth",c[2]);l.set(r,".viewportHeight",c[3]);return c})}return{viewport:b,scissor_box:r("scissor.box")}}function X(b,l){var c=b["static"];if("string"===typeof c.frag&&
"string"===typeof c.vert){if(0<D(l.dynamic).length)return null;var c=l["static"],r=D(c);if(0<r.length&&"number"===typeof c[r[0]]){for(var d=[],e=0;e<r.length;++e)n("number"===typeof c[r[e]],"must specify all vertex attribute locations when using vaos"),d.push([c[r[e]]|0,r[e]]);return d}}return null}function E(b,c,r){function e(b){if(b in m){var c=p.id(m[b]);n.optional(function(){ua.shader(l[b],c,n.guessCommand())});var r=f(function(){return c});r.id=c;return r}if(b in B){var g=B[b];return d(g,function(c,
r){var d=c.invoke(r,g),e=r.def(c.shared.strings,".id(",d,")");n.optional(function(){r(c.shared.shader,".shader(",l[b],",",e,",",c.command,");")});return e})}return null}var m=b["static"],B=b.dynamic,x=e("frag"),k=e("vert"),J=null;q(x)&&q(k)?(J=ua.program(k.id,x.id,null,r),b=f(function(b,l){return b.link(J)})):b=new g(x&&x.thisDep||k&&k.thisDep,x&&x.contextDep||k&&k.contextDep,x&&x.propDep||k&&k.propDep,function(b,l){var c=b.shared.shader,r;r=x?x.append(b,l):l.def(c,".","frag");var d;d=k?k.append(b,
l):l.def(c,".","vert");var e=c+".program("+d+","+r;n.optional(function(){e+=","+b.command});return l.def(e+")")});return{frag:x,vert:k,progVar:b,program:J}}function ka(b,l){function c(b,q){if(b in r){var x=r[b]|0;q?p.offset=x:p.instances=x;n.command(!q||0<=x,"invalid "+b,l.commandStr);return f(function(b,l){q&&(b.OFFSET=x);return x})}if(b in e){var J=e[b];return d(J,function(l,c){var r=l.invoke(c,J);q&&(l.OFFSET=r,n.optional(function(){l.assert(c,r+">=0","invalid "+b)}));return r})}if(q){if(k)return f(function(b,
l){return b.OFFSET=0});if(m)return new g(B.thisDep,B.contextDep,B.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(m)return new g(B.thisDep,B.contextDep,B.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var r=b["static"],e=b.dynamic,p={},m=!1,B=function(){if("vao"in r){var b=r.vao;null!==b&&null===ia.getVAO(b)&&(b=ia.createVAO(b));m=!0;p.vao=b;return f(function(l){var c=
ia.getVAO(b);return c?l.link(c):"null"})}if("vao"in e){m=!0;var l=e.vao;return d(l,function(b,c){var r=b.invoke(c,l);return c.def(b.shared.vao+".getVAO("+r+")")})}return null}(),k=!1,J=function(){if("elements"in r){var b=r.elements;p.elements=b;if(t(b)){var c=p.elements=I.create(b,!0),b=I.getElements(c);k=!0}else b&&(b=I.getElements(b),k=!0,n.command(b,"invalid elements",l.commandStr));c=f(function(l,c){if(b){var r=l.link(b);return l.ELEMENTS=r}return l.ELEMENTS=null});c.value=b;return c}if("elements"in
e){k=!0;var q=e.elements;return d(q,function(b,l){var c=b.shared,r=c.isBufferArgs,c=c.elements,e=b.invoke(l,q),d=l.def("null"),r=l.def(r,"(",e,")"),g=b.cond(r).then(d,"=",c,".createStream(",e,");")["else"](d,"=",c,".getElements(",e,");");n.optional(function(){b.assert(g["else"],"!"+e+"||"+d,"invalid elements")});l.entry(g);l.exit(b.cond(r).then(c,".destroyStream(",d,");"));return b.ELEMENTS=d})}return m?new g(B.thisDep,B.contextDep,B.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+
b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),L=c("offset",!0),y=function(){if("primitive"in r){var b=r.primitive;p.primitive=b;n.commandParameter(b,x,"invalid primitve",l.commandStr);return f(function(l,c){return x[b]})}if("primitive"in e){var c=e.primitive;return d(c,function(b,l){var r=b.constants.primTypes,e=b.invoke(l,c);n.optional(function(){b.assert(l,e+" in "+r,"invalid primitive, must be one of "+D(x))});return l.def(r,"[",e,"]")})}return k?q(J)?J.value?
f(function(b,l){return l.def(b.ELEMENTS,".primType")}):f(function(){return 4}):new g(J.thisDep,J.contextDep,J.propDep,function(b,l){var c=b.ELEMENTS;return l.def(c,"?",c,".primType:",4)}):m?new g(B.thisDep,B.contextDep,B.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),v=function(){if("count"in r){var b=r.count|0;p.count=b;n.command("number"===typeof b&&0<=b,"invalid vertex count",l.commandStr);return f(function(){return b})}if("count"in
e){var c=e.count;return d(c,function(b,l){var r=b.invoke(l,c);n.optional(function(){b.assert(l,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")});return r})}if(k){if(q(J)){if(J)return L?new g(L.thisDep,L.contextDep,L.propDep,function(b,l){var c=l.def(b.ELEMENTS,".vertCount-",b.OFFSET);n.optional(function(){b.assert(l,c+">=0","invalid vertex offset/element buffer too small")});return c}):f(function(b,l){return l.def(b.ELEMENTS,".vertCount")});var x=f(function(){return-1});
n.optional(function(){x.MISSING=!0});return x}var y=new g(J.thisDep||L.thisDep,J.contextDep||L.contextDep,J.propDep||L.propDep,function(b,l){var c=b.ELEMENTS;return b.OFFSET?l.def(c,"?",c,".vertCount-",b.OFFSET,":-1"):l.def(c,"?",c,".vertCount:-1")});n.optional(function(){y.DYNAMIC=!0});return y}return m?new g(B.thisDep,B.contextDep,B.propDep,function(b,l){return l.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),a=c("instances",!1);return{elements:J,primitive:y,count:v,
instances:a,offset:L,vao:B,vaoActive:m,elementsActive:k,"static":p}}function Z(l,r){var e=l["static"],g=l.dynamic,p={};ja.forEach(function(l){function m(b,c){if(l in e){var r=b(e[l]);p[q]=f(function(){return r})}else if(l in g){var n=g[l];p[q]=d(n,function(b,l){return c(b,l,b.invoke(l,n))})}}var q=ga(l);switch(l){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return m(function(b){n.commandType(b,
"boolean",l,r.commandStr);return b},function(b,c,r){n.optional(function(){b.assert(c,"typeof "+r+'==="boolean"',"invalid flag "+l,b.commandStr)});return r});case "depth.func":return m(function(b){n.commandParameter(b,C,"invalid "+l,r.commandStr);return C[b]},function(b,c,r){var e=b.constants.compareFuncs;n.optional(function(){b.assert(c,r+" in "+e,"invalid "+l+", must be one of "+D(C))});return c.def(e,"[",r,"]")});case "depth.range":return m(function(b){n.command(c(b)&&2===b.length&&"number"===typeof b[0]&&
"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",r.commandStr);return b},function(b,l,c){n.optional(function(){b.assert(l,b.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var r=l.def("+",c,"[0]"),e=l.def("+",c,"[1]");return[r,e]});case "blend.func":return m(function(b){n.commandType(b,"object","blend.func",r.commandStr);var l="srcRGB"in b?b.srcRGB:b.src,c="srcAlpha"in b?b.srcAlpha:
b.src,e="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;n.commandParameter(l,A,q+".srcRGB",r.commandStr);n.commandParameter(c,A,q+".srcAlpha",r.commandStr);n.commandParameter(e,A,q+".dstRGB",r.commandStr);n.commandParameter(b,A,q+".dstAlpha",r.commandStr);n.command(-1===aa.indexOf(l+", "+e),"unallowed blending combination (srcRGB, dstRGB) = ("+l+", "+e+")",r.commandStr);return[A[l],A[e],A[c],A[b]]},function(b,c,r){function e(g,p){var f=c.def('"',g,p,'" in ',r,"?",r,".",g,p,":",r,".",
g);n.optional(function(){b.assert(c,f+" in "+d,"invalid "+l+"."+g+p+", must be one of "+D(A))});return f}var d=b.constants.blendFuncs;n.optional(function(){b.assert(c,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var g=e("src","RGB"),p=e("dst","RGB");n.optional(function(){b.assert(c,b.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+p+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=c.def(d,"[",g,"]"),m=c.def(d,"[",e("src","Alpha"),"]"),
q=c.def(d,"[",p,"]"),B=c.def(d,"[",e("dst","Alpha"),"]");return[f,q,m,B]});case "blend.equation":return m(function(b){if("string"===typeof b)return n.commandParameter(b,Ha,"invalid "+l,r.commandStr),[Ha[b],Ha[b]];if("object"===typeof b)return n.commandParameter(b.rgb,Ha,l+".rgb",r.commandStr),n.commandParameter(b.alpha,Ha,l+".alpha",r.commandStr),[Ha[b.rgb],Ha[b.alpha]];n.commandRaise("invalid blend.equation",r.commandStr)},function(b,c,r){var e=b.constants.blendEquations,d=c.def(),g=c.def(),p=b.cond("typeof ",
r,'==="string"');n.optional(function(){function c(l,r,d){b.assert(l,d+" in "+e,"invalid "+r+", must be one of "+D(Ha))}c(p.then,l,r);b.assert(p["else"],r+"&&typeof "+r+'==="object"',"invalid "+l);c(p["else"],l+".rgb",r+".rgb");c(p["else"],l+".alpha",r+".alpha")});p.then(d,"=",g,"=",e,"[",r,"];");p["else"](d,"=",e,"[",r,".rgb];",g,"=",e,"[",r,".alpha];");c(p);return[d,g]});case "blend.color":return m(function(b){n.command(c(b)&&4===b.length,"blend.color must be a 4d array",r.commandStr);return w(4,
function(l){return+b[l]})},function(b,l,c){n.optional(function(){b.assert(l,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return w(4,function(b){return l.def("+",c,"[",b,"]")})});case "stencil.mask":return m(function(b){n.commandType(b,"number",q,r.commandStr);return b|0},function(b,l,c){n.optional(function(){b.assert(l,"typeof "+c+'==="number"',"invalid stencil.mask")});return l.def(c,"|0")});case "stencil.func":return m(function(b){n.commandType(b,"object",
q,r.commandStr);var c=b.cmp||"keep",e=b.ref||0;b="mask"in b?b.mask:-1;n.commandParameter(c,C,l+".cmp",r.commandStr);n.commandType(e,"number",l+".ref",r.commandStr);n.commandType(b,"number",l+".mask",r.commandStr);return[C[c],e,b]},function(b,l,c){var r=b.constants.compareFuncs;n.optional(function(){function e(){b.assert(l,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(c+"&&typeof ",c,'==="object"');e('!("cmp" in ',c,")||(",c,".cmp in ",r,")")});var e=l.def('"cmp" in ',c,"?",r,"[",
c,".cmp]",":",7680),d=l.def(c,".ref|0"),g=l.def('"mask" in ',c,"?",c,".mask|0:-1");return[e,d,g]});case "stencil.opFront":case "stencil.opBack":return m(function(c){n.commandType(c,"object",q,r.commandStr);var e=c.fail||"keep",d=c.zfail||"keep";c=c.zpass||"keep";n.commandParameter(e,b,l+".fail",r.commandStr);n.commandParameter(d,b,l+".zfail",r.commandStr);n.commandParameter(c,b,l+".zpass",r.commandStr);return["stencil.opBack"===l?1029:1028,b[e],b[d],b[c]]},function(c,r,e){function d(p){n.optional(function(){c.assert(r,
'!("'+p+'" in '+e+")||("+e+"."+p+" in "+g+")","invalid "+l+"."+p+", must be one of "+D(b))});return r.def('"',p,'" in ',e,"?",g,"[",e,".",p,"]:",7680)}var g=c.constants.stencilOps;n.optional(function(){c.assert(r,e+"&&typeof "+e+'==="object"',"invalid "+l)});return["stencil.opBack"===l?1029:1028,d("fail"),d("zfail"),d("zpass")]});case "polygonOffset.offset":return m(function(b){n.commandType(b,"object",q,r.commandStr);var l=b.factor|0;b=b.units|0;n.commandType(l,"number",q+".factor",r.commandStr);
n.commandType(b,"number",q+".units",r.commandStr);return[l,b]},function(b,c,r){n.optional(function(){b.assert(c,r+"&&typeof "+r+'==="object"',"invalid "+l)});var e=c.def(r,".factor|0"),d=c.def(r,".units|0");return[e,d]});case "cull.face":return m(function(b){var l=0;"front"===b?l=1028:"back"===b&&(l=1029);n.command(!!l,q,r.commandStr);return l},function(b,l,c){n.optional(function(){b.assert(l,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return l.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return m(function(b){n.command("number"===
typeof b&&b>=N.lineWidthDims[0]&&b<=N.lineWidthDims[1],"invalid line width, must be a positive number between "+N.lineWidthDims[0]+" and "+N.lineWidthDims[1],r.commandStr);return b},function(b,l,c){n.optional(function(){b.assert(l,"typeof "+c+'==="number"&&'+c+">="+N.lineWidthDims[0]+"&&"+c+"<="+N.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return m(function(b){n.commandParameter(b,B,q,r.commandStr);return B[b]},function(b,l,c){n.optional(function(){b.assert(l,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return l.def(c+'==="cw"?2304:2305')});case "colorMask":return m(function(b){n.command(c(b)&&4===b.length,"color.mask must be length 4 array",r.commandStr);return b.map(function(b){return!!b})},function(b,l,c){n.optional(function(){b.assert(l,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return w(4,function(b){return"!!"+c+"["+b+"]"})});case "sample.coverage":return m(function(b){n.command("object"===typeof b&&b,
q,r.commandStr);var l="value"in b?b.value:1;b=!!b.invert;n.command("number"===typeof l&&0<=l&&1>=l,"sample.coverage.value must be a number between 0 and 1",r.commandStr);return[l,b]},function(b,l,c){n.optional(function(){b.assert(l,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var r=l.def('"value" in ',c,"?+",c,".value:1"),e=l.def("!!",c,".invert");return[r,e]})}});return p}function sa(b,l){var r=b["static"],e=b.dynamic,g={};D(r).forEach(function(b){var e=r[b],d;if("number"===typeof e||
"boolean"===typeof e)d=f(function(){return e});else if("function"===typeof e){var p=e._reglType;"texture2d"===p||"textureCube"===p?d=f(function(b){return b.link(e)}):"framebuffer"===p||"framebufferCube"===p?(n.command(0<e.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',l.commandStr),d=f(function(b){return b.link(e.color[0])})):n.commandRaise('invalid data for uniform "'+b+'"',l.commandStr)}else c(e)?d=f(function(l){return l.global.def("[",w(e.length,function(c){n.command("number"===
typeof e[c]||"boolean"===typeof e[c],"invalid uniform "+b,l.commandStr);return e[c]}),"]")}):n.commandRaise('invalid or missing data for uniform "'+b+'"',l.commandStr);d.value=e;g[b]=d});D(e).forEach(function(b){var l=e[b];g[b]=d(l,function(b,c){return b.invoke(c,l)})});return g}function wa(b,l){var r=b["static"],e=b.dynamic,g={};D(r).forEach(function(b){var e=r[b],d=p.id(b),m=new oa;if(t(e))m.state=1,m.buffer=h.getBuffer(h.create(e,34962,!1,!0)),m.type=0;else{var q=h.getBuffer(e);if(q)m.state=1,
m.buffer=q,m.type=0;else if(n.command("object"===typeof e&&e,"invalid data for attribute "+b,l.commandStr),"constant"in e){var B=e.constant;m.buffer="null";m.state=2;"number"===typeof B?m.x=B:(n.command(c(B)&&0<B.length&&4>=B.length,"invalid constant for attribute "+b,l.commandStr),H.forEach(function(b,l){l<B.length&&(m[b]=B[l])}))}else{q=t(e.buffer)?h.getBuffer(h.create(e.buffer,34962,!1,!0)):h.getBuffer(e.buffer);n.command(!!q,'missing buffer for attribute "'+b+'"',l.commandStr);var x=e.offset|
0;n.command(0<=x,'invalid offset for attribute "'+b+'"',l.commandStr);var k=e.stride|0;n.command(0<=k&&256>k,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',l.commandStr);var J=e.size|0;n.command(!("size"in e)||0<J&&4>=J,'invalid size for attribute "'+b+'", must be 1,2,3,4',l.commandStr);var L=!!e.normalized,v=0;"type"in e&&(n.commandParameter(e.type,y,"invalid type for attribute "+b,l.commandStr),v=y[e.type]);var a=e.divisor|0;n.optional(function(){"divisor"in e&&(n.command(0===
a||Y,'cannot specify divisor for attribute "'+b+'", instancing not supported',l.commandStr),n.command(0<=a,'invalid divisor for attribute "'+b+'"',l.commandStr));var c=l.commandStr,r="buffer offset divisor normalized type size stride".split(" ");D(e).forEach(function(l){n.command(0<=r.indexOf(l),'unknown parameter "'+l+'" for attribute pointer "'+b+'" (valid parameters are '+r+")",c)})});m.buffer=q;m.state=1;m.size=J;m.normalized=L;m.type=v||q.dtype;m.offset=x;m.stride=k;m.divisor=a}}g[b]=f(function(b,
l){var c=b.attribCache;if(d in c)return c[d];var r={isStream:!1};D(m).forEach(function(b){r[b]=m[b]});m.buffer&&(r.buffer=b.link(m.buffer),r.type=r.type||r.buffer+".dtype");return c[d]=r})});D(e).forEach(function(b){var l=e[b];g[b]=d(l,function(c,r){function e(b){r(q[b],"=",d,".",b,"|0;")}var d=c.invoke(r,l),g=c.shared,p=c.constants,m=g.isBufferArgs,f=g.buffer;n.optional(function(){c.assert(r,d+"&&(typeof "+d+'==="object"||typeof '+d+'==="function")&&('+m+"("+d+")||"+f+".getBuffer("+d+")||"+f+".getBuffer("+
d+".buffer)||"+m+"("+d+'.buffer)||("constant" in '+d+"&&(typeof "+d+'.constant==="number"||'+g.isArrayLike+"("+d+".constant))))",'invalid dynamic attribute "'+b+'"')});var q={isStream:r.def(!1)},B=new oa;B.state=1;D(B).forEach(function(b){q[b]=r.def(""+B[b])});var x=q.buffer,k=q.type;r("if(",m,"(",d,")){",q.isStream,"=true;",x,"=",f,".createStream(",34962,",",d,");",k,"=",x,".dtype;","}else{",x,"=",f,".getBuffer(",d,");","if(",x,"){",k,"=",x,".dtype;",'}else if("constant" in ',d,"){",q.state,"=",
2,";","if(typeof "+d+'.constant === "number"){',q[H[0]],"=",d,".constant;",H.slice(1).map(function(b){return q[b]}).join("="),"=0;","}else{",H.map(function(b,l){return q[b]+"="+d+".constant.length>"+l+"?"+d+".constant["+l+"]:0;"}).join(""),"}}else{","if(",m,"(",d,".buffer)){",x,"=",f,".createStream(",34962,",",d,".buffer);","}else{",x,"=",f,".getBuffer(",d,".buffer);","}",k,'="type" in ',d,"?",p.glTypes,"[",d,".type]:",x,".dtype;",q.normalized,"=!!",d,".normalized;");e("size");e("offset");e("stride");
e("divisor");r("}}");r.exit("if(",q.isStream,"){",f,".destroyStream(",x,");","}");return q})});return g}function Qa(b){var l=b["static"],c=b.dynamic,r={};D(l).forEach(function(b){var c=l[b];r[b]=f(function(b,l){return"number"===typeof c||"boolean"===typeof c?""+c:b.link(c)})});D(c).forEach(function(b){var l=c[b];r[b]=d(l,function(b,c){return b.invoke(c,l)})});return r}function Ka(b,l,c,r,e){function d(b){var l=B[b];l&&(k[b]=l)}var p=b["static"],m=b.dynamic;n.optional(function(){function b(c){D(c).forEach(function(b){n.command(0<=
l.indexOf(b),'unknown parameter "'+b+'"',e.commandStr)})}var l="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ja);b(p);b(m)});var f=X(b,l),q=Gb(b,e),B=Ta(b,q,e),x=ka(b,e),k=Z(b,e),J=E(b,e,f);d("viewport");d(ga("scissor.box"));var L=0<D(k).length,q={framebuffer:q,draw:x,shader:J,state:k,dirty:L,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};q.profile=S(b,e);q.uniforms=sa(c,e);q.drawVAO=q.scopeVAO=x.vao;if(!q.drawVAO&&J.program&&!f&&a.angle_instanced_arrays&&
x["static"].elements){var y=!0;b=J.program.attributes.map(function(b){b=l["static"][b];y=y&&!!b;return b});if(y&&0<b.length){var v=ia.getVAO(ia.createVAO({attributes:b,elements:x["static"].elements}));q.drawVAO=new g(null,null,null,function(b,l){return b.link(v)});q.useVAO=!0}}f?q.useVAO=!0:q.attributes=wa(l,e);q.context=Qa(r,e);return q}function U(b,l,c){var r=b.shared.context,e=b.scope();D(c).forEach(function(d){l.save(r,"."+d);var g=c[d].append(b,l);Array.isArray(g)?e(r,".",d,"=[",g.join(),"];"):
e(r,".",d,"=",g,";")});l(e)}function Na(b,l,c,r){var e=b.shared,d=e.gl,g=e.framebuffer,p;ca&&(p=l.def(e.extensions,".webgl_draw_buffers"));var m=b.constants,e=m.drawBuffer,m=m.backBuffer;b=c?c.append(b,l):l.def(g,".next");r||l("if(",b,"!==",g,".cur){");l("if(",b,"){",d,".bindFramebuffer(",36160,",",b,".framebuffer);");ca&&l(p,".drawBuffersWEBGL(",e,"[",b,".colorAttachments.length]);");l("}else{",d,".bindFramebuffer(",36160,",null);");ca&&l(p,".drawBuffersWEBGL(",m,");");l("}",g,".cur=",b,";");r||
l("}")}function ea(b,l,c){var r=b.shared,e=r.gl,d=b.current,g=b.next,p=r.current,m=r.next,f=b.cond(p,".dirty");ja.forEach(function(l){l=ga(l);if(!(l in c.state)){var r,q;if(l in g){r=g[l];q=d[l];var n=w(Q[l].length,function(b){return f.def(r,"[",b,"]")});f(b.cond(n.map(function(b,l){return b+"!=="+q+"["+l+"]"}).join("||")).then(e,".",Ea[l],"(",n,");",n.map(function(b,l){return q+"["+l+"]="+b}).join(";"),";"))}else r=f.def(m,".",l),n=b.cond(r,"!==",p,".",l),f(n),l in Ja?n(b.cond(r).then(e,".enable(",
Ja[l],");")["else"](e,".disable(",Ja[l],");"),p,".",l,"=",r,";"):n(e,".",Ea[l],"(",r,");",p,".",l,"=",r,";")}});0===D(c.state).length&&f(p,".dirty=false;");l(f)}function pa(b,l,r,e){var d=b.shared,g=b.current,p=d.current,m=d.gl;k(D(r)).forEach(function(d){var f=r[d];if(!e||e(f)){var n=f.append(b,l);if(Ja[d]){var B=Ja[d];q(f)?n?l(m,".enable(",B,");"):l(m,".disable(",B,");"):l(b.cond(n).then(m,".enable(",B,");")["else"](m,".disable(",B,");"));l(p,".",d,"=",n,";")}else if(c(n)){var x=g[d];l(m,".",Ea[d],
"(",n,");",n.map(function(b,l){return x+"["+l+"]="+b}).join(";"),";")}else l(m,".",Ea[d],"(",n,");",p,".",d,"=",n,";")}})}function Xa(b,l){Y&&(b.instancing=l.def(b.shared.extensions,".angle_instanced_arrays"))}function Cb(b,l,c,r,e){function d(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(b){k=l.def();b(k,"=",d(),";");"string"===typeof e?b(n,".count+=",e,";"):b(n,".count++;");za&&(r?(J=l.def(),b(J,"=",x,".getNumPendingQueries();")):b(x,".beginQuery(",n,");"))}
function p(b){b(n,".cpuTime+=",d(),"-",k,";");za&&(r?b(x,".pushScopeStats(",J,",",x,".getNumPendingQueries(),",n,");"):b(x,".endQuery();"))}function m(b){var c=l.def(B,".profile");l(B,".profile=",b,";");l.exit(B,".profile=",c,";")}var f=b.shared,n=b.stats,B=f.current,x=f.timer;c=c.profile;var k,J;if(c){if(q(c)){c.enable?(g(l),p(l.exit),m("true")):m("false");return}c=c.append(b,l);m(c)}else c=l.def(B,".profile");f=b.block();g(f);l("if(",c,"){",f,"}");b=b.block();p(b);l.exit("if(",c,"){",b,"}")}function yb(b,
l,c,r,e){function d(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(c,r,e){function d(){l("if(!",q,".buffer){",f,".enableVertexAttribArray(",n,");}");var c=e.type,g;g=e.size?l.def(e.size,"||",r):r;l("if(",q,".type!==",c,"||",q,".size!==",g,"||",k.map(function(b){return q+"."+b+"!=="+e[b]}).join("||"),"){",f,".bindBuffer(",34962,",",B,".buffer);",f,".vertexAttribPointer(",[n,g,c,
e.normalized,e.stride,e.offset],");",q,".type=",c,";",q,".size=",g,";",k.map(function(b){return q+"."+b+"="+e[b]+";"}).join(""),"}");Y&&(c=e.divisor,l("if(",q,".divisor!==",c,"){",b.instancing,".vertexAttribDivisorANGLE(",[n,c],");",q,".divisor=",c,";}"))}function m(){l("if(",q,".buffer){",f,".disableVertexAttribArray(",n,");",q,".buffer=null;","}if(",H.map(function(b,l){return q+"."+b+"!=="+x[l]}).join("||"),"){",f,".vertexAttrib4f(",n,",",x,");",H.map(function(b,l){return q+"."+b+"="+x[l]+";"}).join(""),
"}")}var f=p.gl,n=l.def(c,".location"),q=l.def(p.attributes,"[",n,"]");c=e.state;var B=e.buffer,x=[e.x,e.y,e.z,e.w],k=["buffer","normalized","offset","stride"];1===c?d():2===c?m():(l("if(",c,"===",1,"){"),d(),l("}else{"),m(),l("}"))}var p=b.shared;r.forEach(function(r){var p=r.name,m=c.attributes[p],f;if(m){if(!e(m))return;f=m.append(b,l)}else{if(!e(L))return;var q=b.scopeAttrib(p);n.optional(function(){b.assert(l,q+".state","missing attribute "+p)});f={};D(new oa).forEach(function(b){f[b]=l.def(q,
".",b)})}g(b.link(r),d(r.info.type),f)})}function Jc(b,l,r,e,d,g){for(var m=b.shared,f=m.gl,B,x=0;x<e.length;++x){var k=e[x],J=k.name,y=k.info.type,v=r.uniforms[J],k=b.link(k)+".location",a;if(v){if(!d(v))continue;if(q(v)){var D=v.value;n.command(null!==D&&"undefined"!==typeof D,'missing uniform "'+J+'"',b.commandStr);if(35678===y||35680===y)n.command("function"===typeof D&&(35678===y&&("texture2d"===D._reglType||"framebuffer"===D._reglType)||35680===y&&("textureCube"===D._reglType||"framebufferCube"===
D._reglType)),"invalid texture for uniform "+J,b.commandStr),v=b.link(D._texture||D.color[0]._texture),l(f,".uniform1i(",k,",",v+".bind());"),l.exit(v,".unbind();");else if(35674===y||35675===y||35676===y){n.optional(function(){n.command(c(D),"invalid matrix for uniform "+J,b.commandStr);n.command(35674===y&&4===D.length||35675===y&&9===D.length||35676===y&&16===D.length,"invalid length for matrix uniform "+J,b.commandStr)});var v=b.global.def("new Float32Array(["+Array.prototype.slice.call(D)+"])"),
t=2;35675===y?t=3:35676===y&&(t=4);l(f,".uniformMatrix",t,"fv(",k,",false,",v,");")}else{switch(y){case 5126:n.commandType(D,"number","uniform "+J,b.commandStr);B="1f";break;case 35664:n.command(c(D)&&2===D.length,"uniform "+J,b.commandStr);B="2f";break;case 35665:n.command(c(D)&&3===D.length,"uniform "+J,b.commandStr);B="3f";break;case 35666:n.command(c(D)&&4===D.length,"uniform "+J,b.commandStr);B="4f";break;case 35670:n.commandType(D,"boolean","uniform "+J,b.commandStr);B="1i";break;case 5124:n.commandType(D,
"number","uniform "+J,b.commandStr);B="1i";break;case 35671:n.command(c(D)&&2===D.length,"uniform "+J,b.commandStr);B="2i";break;case 35667:n.command(c(D)&&2===D.length,"uniform "+J,b.commandStr);B="2i";break;case 35672:n.command(c(D)&&3===D.length,"uniform "+J,b.commandStr);B="3i";break;case 35668:n.command(c(D)&&3===D.length,"uniform "+J,b.commandStr);B="3i";break;case 35673:n.command(c(D)&&4===D.length,"uniform "+J,b.commandStr);B="4i";break;case 35669:n.command(c(D)&&4===D.length,"uniform "+J,
b.commandStr),B="4i"}l(f,".uniform",B,"(",k,",",c(D)?Array.prototype.slice.call(D):D,");")}continue}else a=v.append(b,l)}else{if(!d(L))continue;a=l.def(m.uniforms,"[",p.id(J),"]")}35678===y?(n(!Array.isArray(a),"must specify a scalar prop for textures"),l("if(",a,"&&",a,'._reglType==="framebuffer"){',a,"=",a,".color[0];","}")):35680===y&&(n(!Array.isArray(a),"must specify a scalar prop for cube maps"),l("if(",a,"&&",a,'._reglType==="framebufferCube"){',a,"=",a,".color[0];","}"));n.optional(function(){function c(r,
e){b.assert(l,r,'bad data or missing for uniform "'+J+'".  '+e)}function r(b){n(!Array.isArray(a),"must not specify an array type for uniform");c("typeof "+a+'==="'+b+'"',"invalid type, expected "+b)}function e(l,r){Array.isArray(a)?n(a.length===l,"must have length "+l):c(m.isArrayLike+"("+a+")&&"+a+".length==="+l,"invalid vector, should have length "+l,b.commandStr)}function d(l){n(!Array.isArray(a),"must not specify a value type");c("typeof "+a+'==="function"&&'+a+'._reglType==="texture'+(3553===
l?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(y){case 5124:r("number");break;case 35667:e(2,"number");break;case 35668:e(3,"number");break;case 35669:e(4,"number");break;case 5126:r("number");break;case 35664:e(2,"number");break;case 35665:e(3,"number");break;case 35666:e(4,"number");break;case 35670:r("boolean");break;case 35671:e(2,"boolean");break;case 35672:e(3,"boolean");break;case 35673:e(4,"boolean");break;case 35674:e(4,"number");break;case 35675:e(9,"number");break;case 35676:e(16,
"number");break;case 35678:d(3553);break;case 35680:d(34067)}});v=1;switch(y){case 35678:case 35680:v=l.def(a,"._texture");l(f,".uniform1i(",k,",",v,".bind());");l.exit(v,".unbind();");continue;case 5124:case 35670:B="1i";break;case 35667:case 35671:B="2i";v=2;break;case 35668:case 35672:B="3i";v=3;break;case 35669:case 35673:B="4i";v=4;break;case 5126:B="1f";break;case 35664:B="2f";v=2;break;case 35665:B="3f";v=3;break;case 35666:B="4f";v=4;break;case 35674:B="Matrix2fv";break;case 35675:B="Matrix3fv";
break;case 35676:B="Matrix4fv"}if("M"===B.charAt(0)){l(f,".uniform",B,"(",k,",");var k=Math.pow(y-35674+2,2),z=b.global.def("new Float32Array(",k,")");Array.isArray(a)?l("false,(",w(k,function(b){return z+"["+b+"]="+a[b]}),",",z,")"):l("false,(Array.isArray(",a,")||",a," instanceof Float32Array)?",a,":(",w(k,function(b){return z+"["+b+"]="+a+"["+b+"]"}),",",z,")");l(");")}else{if(1<v){for(var t=[],I=[],W=0;W<v;++W)Array.isArray(a)?I.push(a[W]):I.push(l.def(a+"["+W+"]")),g&&t.push(l.def());g&&l("if(!",
b.batchId,"||",t.map(function(b,l){return b+"!=="+I[l]}).join("||"),"){",t.map(function(b,l){return b+"="+I[l]+";"}).join(""));l(f,".uniform",B,"(",k,",",I.join(","),");")}else n(!Array.isArray(a),"uniform value must not be an array"),g&&(v=l.def(),l("if(!",b.batchId,"||",v,"!==",a,"){",v,"=",a,";")),l(f,".uniform",B,"(",k,",",a,");");g&&l("}")}}}function Eb(b,l,c,r){function e(d){var g=B[d];return g?g.contextDep&&r.contextDynamic||g.propDep?g.append(b,c):g.append(b,l):l.def(f,".",d)}function d(){function b(){c(v,
".drawElementsInstancedANGLE(",[k,L,y,J+"<<(("+y+"-5121)>>1)",a],");")}function l(){c(v,".drawArraysInstancedANGLE(",[k,J,L,a],");")}x&&"null"!==x?D?b():(c("if(",x,"){"),b(),c("}else{"),l(),c("}")):l()}function g(){function b(){c(m+".drawElements("+[k,L,y,J+"<<(("+y+"-5121)>>1)"]+");")}function l(){c(m+".drawArrays("+[k,J,L]+");")}x&&"null"!==x?D?b():(c("if(",x,"){"),b(),c("}else{"),l(),c("}")):l()}var p=b.shared,m=p.gl,f=p.draw,B=r.draw,x=function(){var e=B.elements,d=l;if(e){if(e.contextDep&&r.contextDynamic||
e.propDep)d=c;e=e.append(b,d);B.elementsActive&&d("if("+e+")"+m+".bindBuffer(34963,"+e+".buffer.buffer);")}else e=d.def(),d(e,"=",f,".","elements",";","if(",e,"){",m,".bindBuffer(",34963,",",e,".buffer.buffer);}","else if(",p.vao,".currentVAO){",e,"=",b.shared.elements+".getElements("+p.vao,".currentVAO.elements);",ta?"":"if("+e+")"+m+".bindBuffer(34963,"+e+".buffer.buffer);","}");return e}(),k=e("primitive"),J=e("offset"),L=function(){var e=B.count,d,g=l;if(e){if(e.contextDep&&r.contextDynamic||
e.propDep)g=c;d=e.append(b,g);n.optional(function(){e.MISSING&&b.assert(l,"false","missing vertex count");e.DYNAMIC&&b.assert(g,d+">=0","missing vertex count")})}else d=g.def(f,".","count"),n.optional(function(){b.assert(g,d+">=0","missing vertex count")});return d}();if("number"===typeof L){if(0===L)return}else c("if(",L,"){"),c.exit("}");var a,v;Y&&(a=e("instances"),v=b.instancing);var y=x+".type",D=B.elements&&q(B.elements)&&!B.vaoActive;Y&&("number"!==typeof a||0<=a)?"string"===typeof a?(c("if(",
a,">0){"),d(),c("}else if(",a,"<0){"),g(),c("}")):d():g()}function V(b,l,c,r,e){var d=ra();e=d.proc("body",e);n.optional(function(){d.commandStr=l.commandStr;d.command=d.link(l.commandStr)});Y&&(d.instancing=e.def(d.shared.extensions,".angle_instanced_arrays"));b(d,e,c,r);return d.compile().body}function R(b,l,c,r){Xa(b,l);c.useVAO?c.drawVAO?l(b.shared.vao,".setVAO(",c.drawVAO.append(b,l),");"):l(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(l(b.shared.vao,".setVAO(null);"),yb(b,l,c,r.attributes,
function(){return!0}));Jc(b,l,c,r.uniforms,function(){return!0},!1);Eb(b,l,l,c)}function ha(b,l){var c=b.proc("draw",1);Xa(b,c);U(b,c,l.context);Na(b,c,l.framebuffer);ea(b,c,l);pa(b,c,l.state);Cb(b,c,l,!1,!0);var r=l.shader.progVar.append(b,c);c(b.shared.gl,".useProgram(",r,".program);");if(l.shader.program)R(b,c,l,l.shader.program);else{c(b.shared.vao,".setVAO(null);");var e=b.global.def("{}"),d=c.def(r,".id"),g=c.def(e,"[",d,"]");c(b.cond(g).then(g,".call(this,a0);")["else"](g,"=",e,"[",d,"]=",
b.link(function(c){return V(R,b,l,c,1)}),"(",r,");",g,".call(this,a0);"))}0<D(l.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function Aa(b,l,c,r){function e(){return!0}b.batchId="a1";Xa(b,l);yb(b,l,c,r.attributes,e);Jc(b,l,c,r.uniforms,e,!1);Eb(b,l,l,c)}function zb(b,l,c,r){function e(b){return b.contextDep&&g||b.propDep}function d(b){return!e(b)}Xa(b,l);var g=c.contextDep,p=l.def(),m=l.def();b.shared.props=m;b.batchId=p;var f=b.scope(),q=b.scope();
l(f.entry,"for(",p,"=0;",p,"<","a1",";++",p,"){",m,"=","a0","[",p,"];",q,"}",f.exit);c.needsContext&&U(b,q,c.context);c.needsFramebuffer&&Na(b,q,c.framebuffer);pa(b,q,c.state,e);c.profile&&e(c.profile)&&Cb(b,q,c,!1,!0);r?(c.useVAO?c.drawVAO?e(c.drawVAO)?q(b.shared.vao,".setVAO(",c.drawVAO.append(b,q),");"):f(b.shared.vao,".setVAO(",c.drawVAO.append(b,f),");"):f(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(f(b.shared.vao,".setVAO(null);"),yb(b,f,c,r.attributes,d),yb(b,q,c,r.attributes,e)),
Jc(b,f,c,r.uniforms,d,!1),Jc(b,q,c,r.uniforms,e,!0),Eb(b,f,q,c)):(l=b.global.def("{}"),r=c.shader.progVar.append(b,q),m=q.def(r,".id"),f=q.def(l,"[",m,"]"),q(b.shared.gl,".useProgram(",r,".program);","if(!",f,"){",f,"=",l,"[",m,"]=",b.link(function(l){return V(Aa,b,c,l,2)}),"(",r,");}",f,".call(this,a0[",p,"],",p,");"))}function Ac(b,l){function c(b){return b.contextDep&&e||b.propDep}var r=b.proc("batch",2);b.batchId="0";Xa(b,r);var e=!1,d=!0;D(l.context).forEach(function(b){e=e||l.context[b].propDep});
e||(U(b,r,l.context),d=!1);var g=l.framebuffer,p=!1;g?(g.propDep?e=p=!0:g.contextDep&&e&&(p=!0),p||Na(b,r,g)):Na(b,r,null);l.state.viewport&&l.state.viewport.propDep&&(e=!0);ea(b,r,l);pa(b,r,l.state,function(b){return!c(b)});l.profile&&c(l.profile)||Cb(b,r,l,!1,"a1");l.contextDep=e;l.needsContext=d;l.needsFramebuffer=p;d=l.shader.progVar;if(d.contextDep&&e||d.propDep)zb(b,r,l,null);else if(d=d.append(b,r),r(b.shared.gl,".useProgram(",d,".program);"),l.shader.program)zb(b,r,l,l.shader.program);else{r(b.shared.vao,
".setVAO(null);");var g=b.global.def("{}"),p=r.def(d,".id"),f=r.def(g,"[",p,"]");r(b.cond(f).then(f,".call(this,a0,a1);")["else"](f,"=",g,"[",p,"]=",b.link(function(c){return V(zb,b,l,c,2)}),"(",d,");",f,".call(this,a0,a1);"))}0<D(l.state).length&&r(b.shared.current,".dirty=true;");b.shared.vao&&r(b.shared.vao,".setVAO(null);")}function Kc(b,l){function r(c){var g=l.shader[c];g&&e.set(d.shader,"."+c,g.append(b,e))}var e=b.proc("scope",3);b.batchId="a2";var d=b.shared,g=d.current;U(b,e,l.context);
l.framebuffer&&l.framebuffer.append(b,e);k(D(l.state)).forEach(function(r){var g=l.state[r].append(b,e);c(g)?g.forEach(function(l,c){e.set(b.next[r],"["+c+"]",l)}):e.set(d.next,"."+r,g)});Cb(b,e,l,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var r=l.draw[c];r&&e.set(d.draw,"."+c,""+r.append(b,e))});D(l.uniforms).forEach(function(c){var r=l.uniforms[c].append(b,e);Array.isArray(r)&&(r="["+r.join()+"]");e.set(d.uniforms,"["+p.id(c)+"]",r)});D(l.attributes).forEach(function(c){var r=
l.attributes[c].append(b,e),d=b.scopeAttrib(c);D(new oa).forEach(function(b){e.set(d,"."+b,r[b])})});l.scopeVAO&&e.set(d.vao,".targetVAO",l.scopeVAO.append(b,e));r("vert");r("frag");0<D(l.state).length&&(e(g,".dirty=true;"),e.exit(g,".dirty=true;"));e("a1(",b.shared.context,",a0,",b.batchId,");")}function P(b){if("object"===typeof b&&!c(b)){for(var l=D(b),r=0;r<l.length;++r)if(m.isDynamic(b[l[r]]))return!0;return!1}}function G(b,l,c){function r(b,l){p.forEach(function(c){var r=e[c];m.isDynamic(r)&&
(r=b.invoke(l,r),l(B,".",c,"=",r,";"))})}var e=l["static"][c];if(e&&P(e)){var g=b.global,p=D(e),f=!1,q=!1,n=!1,B=b.global.def("{}");p.forEach(function(l){var c=e[l];if(m.isDynamic(c))"function"===typeof c&&(c=e[l]=m.unbox(c)),l=d(c,null),f=f||l.thisDep,n=n||l.propDep,q=q||l.contextDep;else{g(B,".",l,"=");switch(typeof c){case "number":g(c);break;case "string":g('"',c,'"');break;case "object":Array.isArray(c)&&g("[",c.join(),"]");break;default:g(b.link(c))}g(";")}});l.dynamic[c]=new m.DynamicVariable(4,
{thisDep:f,contextDep:q,propDep:n,ref:B,append:r});delete l["static"][c]}}var oa=ia.Record,Ha={add:32774,subtract:32778,"reverse subtract":32779};a.ext_blend_minmax&&(Ha.min=32775,Ha.max=32776);var Y=a.angle_instanced_arrays,ca=a.webgl_draw_buffers,ta=a.oes_vertex_array_object,Q={dirty:!0,profile:da.profile},M={},ja=[],Ja={},Ea={};O("dither",3024);O("blend.enable",3042);T("blend.color","blendColor",[0,0,0,0]);T("blend.equation","blendEquationSeparate",[32774,32774]);T("blend.func","blendFuncSeparate",
[1,0,1,0]);O("depth.enable",2929,!0);T("depth.func","depthFunc",513);T("depth.range","depthRange",[0,1]);T("depth.mask","depthMask",!0);T("colorMask","colorMask",[!0,!0,!0,!0]);O("cull.enable",2884);T("cull.face","cullFace",1029);T("frontFace","frontFace",2305);T("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);T("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);T("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);T("stencil.mask",
"stencilMask",-1);T("stencil.func","stencilFunc",[519,0,-1]);T("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);T("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);O("scissor.enable",3089);T("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);T("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var La={gl:e,context:ma,strings:p,next:M,current:Q,draw:u,elements:I,buffer:h,shader:ua,attributes:ia.state,vao:ia,uniforms:la,framebuffer:J,
extensions:a,timer:za,isBufferArgs:t},K={primTypes:x,compareFuncs:C,blendFuncs:A,blendEquations:Ha,stencilOps:b,glTypes:y,orientationType:B};n.optional(function(){La.isArrayLike=c});ca&&(K.backBuffer=[1029],K.drawBuffer=w(N.maxDrawbuffers,function(b){return 0===b?[0]:w(b,function(b){return 36064+b})}));var sc=0;return{next:M,current:Q,procs:function(){var b=ra(),l=b.proc("poll"),r=b.proc("refresh"),e=b.block();l(e);r(e);var d=b.shared,g=d.gl,p=d.next,f=d.current;e(f,".dirty=false;");Na(b,l);Na(b,
r,null,!0);var m;Y&&(m=b.link(Y));a.oes_vertex_array_object&&r(b.link(a.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var q=0;q<N.maxAttributes;++q){var n=r.def(d.attributes,"[",q,"]"),B=b.cond(n,".buffer");B.then(g,".enableVertexAttribArray(",q,");",g,".bindBuffer(",34962,",",n,".buffer.buffer);",g,".vertexAttribPointer(",q,",",n,".size,",n,".type,",n,".normalized,",n,".stride,",n,".offset);")["else"](g,".disableVertexAttribArray(",q,");",g,".vertexAttrib4f(",q,",",n,".x,",n,".y,",n,
".z,",n,".w);",n,".buffer=null;");r(B);Y&&r(m,".vertexAttribDivisorANGLE(",q,",",n,".divisor);")}r(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");D(Ja).forEach(function(c){var d=Ja[c],m=e.def(p,".",c),q=b.block();q("if(",m,"){",g,".enable(",d,")}else{",g,".disable(",d,")}",f,".",c,"=",m,";");r(q);l("if(",m,"!==",f,".",c,"){",q,"}")});D(Ea).forEach(function(d){var m=Ea[d],q=Q[d],n,B,x=b.block();x(g,".",m,"(");c(q)?(m=q.length,n=b.global.def(p,".",d),B=b.global.def(f,
".",d),x(w(m,function(b){return n+"["+b+"]"}),");",w(m,function(b){return B+"["+b+"]="+n+"["+b+"];"}).join("")),l("if(",w(m,function(b){return n+"["+b+"]!=="+B+"["+b+"]"}).join("||"),"){",x,"}")):(n=e.def(p,".",d),B=e.def(f,".",d),x(n,");",f,".",d,"=",n,";"),l("if(",n,"!==",B,"){",x,"}"));r(x)});return b.compile()}(),compile:function(b,l,c,r,e){var d=ra();d.stats=d.link(e);D(l["static"]).forEach(function(b){G(d,l,b)});na.forEach(function(l){G(d,b,l)});var g=Ka(b,l,c,r,d);ha(d,g);Kc(d,g);Ac(d,g);return v(d.compile(),
{destroy:function(){g.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(a,h,u){function t(g,f){this.id=d++;this.type=g;this.data=f}function k(d){if(0===d.length)return[];var g=d.charAt(0),f=d.charAt(d.length-1);if(1<d.length&&g===f&&('"'===g||"'"===
g))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(g=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return k(d.substr(0,g.index)).concat(k(g[1])).concat(k(d.substr(g.index+g[0].length)));g=d.split(".");if(1===g.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(f=0;f<g.length;++f)d=d.concat(k(g[f]));return d}function g(d){return"["+k(d).join("][")+"]"}function q(d,g){if("function"===typeof d)return new t(0,d);if("number"===typeof d||
"boolean"===typeof d)return new t(5,d);if(Array.isArray(d))return new t(6,d.map(function(d,f){return q(d,g+"["+f+"]")}));if(d instanceof t)return d;f(!1,"invalid option type in uniform "+g)}var f=a("./util/check"),d=0;h.exports={DynamicVariable:t,define:function(d,f){return new t(d,g(f+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof t},unbox:q,accessor:g}},{"./util/check":21}],10:[function(a,h,u){var t=a("./util/check"),k=a("./util/is-typed-array"),g=a("./util/is-ndarray"),
q=a("./util/values"),f=a("./constants/primitives.json"),d=a("./constants/usage.json");h.exports=function(a,n,v,z){function w(e){this.id=m++;c[this.id]=this;this.buffer=e;this.primType=4;this.type=this.vertCount=0}function p(c,e,d,f,p,b,l){c.buffer.bind();var m;e?((m=l)||k(e)&&(!g(e)||k(e.data))||(m=n.oes_element_index_uint?5125:5123),v._initBuffer(c.buffer,e,d,m,3)):(a.bufferData(34963,b,d),c.buffer.dtype=m||5121,c.buffer.usage=d,c.buffer.dimension=3,c.buffer.byteLength=b);m=l;if(!l){switch(c.buffer.dtype){case 5121:case 5120:m=
5121;break;case 5123:case 5122:m=5123;break;case 5125:case 5124:m=5125;break;default:t.raise("unsupported type for element array")}c.buffer.dtype=m}c.type=m;t(5125!==m||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=p;0>e&&(e=c.buffer.byteLength,5123===m?e>>=1:5125===m&&(e>>=2));c.vertCount=e;e=f;0>f&&(e=4,f=c.buffer.dimension,1===f&&(e=0),2===f&&(e=1),3===f&&(e=4));c.primType=e}function e(e){z.elementsCount--;t(null!==e.buffer,"must not double destroy elements");
delete c[e.id];e.buffer.destroy();e.buffer=null}var c={},m=0,x={uint8:5121,uint16:5123};n.oes_element_index_uint&&(x.uint32=5125);w.prototype.bind=function(){this.buffer.bind()};var y=[];return{create:function(c,m){function q(b){if(b)if("number"===typeof b)n(b),a.primType=4,a.vertCount=b|0,a.type=5121;else{var l=null,c=35044,e=-1,m=-1,y=0,v=0;if(Array.isArray(b)||k(b)||g(b))l=b;else if(t.type(b,"object","invalid arguments for elements"),"data"in b&&(l=b.data,t(Array.isArray(l)||k(l)||g(l),"invalid data for element buffer")),
"usage"in b&&(t.parameter(b.usage,d,"invalid element buffer usage"),c=d[b.usage]),"primitive"in b&&(t.parameter(b.primitive,f,"invalid element buffer primitive"),e=f[b.primitive]),"count"in b&&(t("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),m=b.count|0),"type"in b&&(t.parameter(b.type,x,"invalid buffer type"),v=x[b.type]),"length"in b)y=b.length|0;else if(y=m,5123===v||5122===v)y*=2;else if(5125===v||5124===v)y*=4;p(a,l,c,e,m,y,v)}else n(),a.primType=4,a.vertCount=0,
a.type=5121;return q}var n=v.create(null,34963,!0),a=new w(n._buffer);z.elementsCount++;q(c);q._reglType="elements";q._elements=a;q.subdata=function(b,l){n.subdata(b,l);return q};q.destroy=function(){e(a)};return q},createStream:function(c){var e=y.pop();e||(e=new w(v.create(null,34963,!0,!1)._buffer));p(e,c,35040,-1,-1,0,0);return e},destroyStream:function(c){y.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof w?c._elements:null},clear:function(){q(c).forEach(e)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(a,h,u){var t=a("./util/sorted-object-keys"),k=a("./util/check");h.exports=function(g,q){function f(f){k.type(f,"string","extension name must be string");f=f.toLowerCase();var q;try{q=d[f]=g.getExtension(f)}catch(n){}return!!q}for(var d={},a=0;a<q.extensions.length;++a){var n=q.extensions[a];if(!f(n))return q.onDestroy(),q.onDone('"'+n+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}q.optionalExtensions.forEach(f);return{extensions:d,restore:function(){t(d).forEach(function(g){if(d[g]&&!f(g))throw Error("(regl): error restoring extension "+g);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(a,h,u){var t=a("./util/check"),k=a("./util/values"),g=a("./util/extend"),q=[6407,6408],f=[];f[6408]=4;f[6407]=3;var d=[];d[5121]=1;d[5126]=4;d[36193]=2;var D=[32854,32855,36194,35907,34842,34843,34836],n={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};h.exports=function(a,z,w,p,e,c){function m(b,l,c){this.target=b;this.texture=l;this.renderbuffer=c;var r=b=0;l?(b=l.width,r=l.height):c&&(b=c.width,r=c.height);this.width=b;this.height=r}function x(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function y(b,l,c){if(b){if(b.texture){b=b.texture._texture;var r=Math.max(1,b.height);t(Math.max(1,b.width)===l&&r===c,"inconsistent width/height for supplied texture")}else b=
b.renderbuffer._renderbuffer,t(b.width===l&&b.height===c,"inconsistent width/height for renderbuffer");b.refCount+=1}}function H(b,l){l&&(l.texture?a.framebufferTexture2D(36160,b,l.target,l.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,l.renderbuffer._renderbuffer.renderbuffer))}function na(b){var l=3553,c=null,r=null,e=b;"object"===typeof b&&(e=b.data,"target"in b&&(l=b.target|0));t.type(e,"function","invalid attachment data");b=e._reglType;"texture2d"===b?(c=e,t(3553===l)):
"textureCube"===b?(c=e,t(34069<=l&&34075>l,"invalid cube map target")):"renderbuffer"===b?(r=e,l=36161):t.raise("invalid regl object for attachment");return new m(l,c,r)}function A(b,l,c,r,d){if(c)return b=p.create2D({width:b,height:l,format:r,type:d}),b._texture.refCount=0,new m(3553,b,null);b=e.create({width:b,height:l,format:r});b._renderbuffer.refCount=0;return new m(36161,null,b)}function h(b){return b&&(b.texture||b.renderbuffer)}function C(b,l,c){b&&(b.texture?b.texture.resize(l,c):b.renderbuffer&&
b.renderbuffer.resize(l,c),b.width=l,b.height=c)}function b(){this.id=I++;r[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function l(b){b.colorAttachments.forEach(x);x(b.depthAttachment);x(b.stencilAttachment);x(b.depthStencilAttachment)}function B(b){var l=b.framebuffer;t(l,"must not double destroy framebuffer");a.deleteFramebuffer(l);b.framebuffer=null;c.framebufferCount--;
delete r[b.id]}function L(b){var l;a.bindFramebuffer(36160,b.framebuffer);var c=b.colorAttachments;for(l=0;l<c.length;++l)H(36064+l,c[l]);for(l=c.length;l<w.maxColorAttachments;++l)a.framebufferTexture2D(36160,36064+l,3553,null,0);a.framebufferTexture2D(36160,33306,3553,null,0);a.framebufferTexture2D(36160,36096,3553,null,0);a.framebufferTexture2D(36160,36128,3553,null,0);H(36096,b.depthAttachment);H(36128,b.stencilAttachment);H(33306,b.depthStencilAttachment);b=a.checkFramebufferStatus(36160);a.isContextLost()||
36053===b||t.raise("framebuffer configuration not supported, status = "+n[b]);a.bindFramebuffer(36160,F.next?F.next.framebuffer:null);F.cur=F.next;a.getError()}function W(r,e){function m(b,c){var r;t(F.next!==p,"can not update framebuffer which is currently in use");var e=0,g=0,n=!0,B=!0;r=null;var x=!0,k="rgba",a="uint8",J=1,v=null,I=null,W=null,H=!1;if("number"===typeof b)e=b|0,g=c|0||e;else if(b){t.type(b,"object","invalid arguments for framebuffer");"shape"in b?(g=b.shape,t(Array.isArray(g)&&
2<=g.length,"invalid shape for framebuffer"),e=g[0],g=g[1]):("radius"in b&&(e=g=b.radius),"width"in b&&(e=b.width),"height"in b&&(g=b.height));if("color"in b||"colors"in b)r=b.color||b.colors,Array.isArray(r)&&t(1===r.length||z.webgl_draw_buffers,"multiple render targets not supported");if(!r){"colorCount"in b&&(J=b.colorCount|0,t(0<J,"invalid color buffer count"));"colorTexture"in b&&(x=!!b.colorTexture,k="rgba4");if("colorType"in b){a=b.colorType;if(x)t(z.oes_texture_float||!("float"===a||"float32"===
a),"you must enable OES_texture_float in order to use floating point framebuffer objects"),t(z.oes_texture_half_float||!("half float"===a||"float16"===a),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===a||"float16"===a)t(z.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),k="rgba16f";else if("float"===a||"float32"===a)t(z.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
k="rgba32f";t.oneOf(a,u,"invalid color type")}"colorFormat"in b&&(k=b.colorFormat,0<=fa.indexOf(k)?x=!0:0<=N.indexOf(k)?x=!1:t.optional(function(){if(x)t.oneOf(b.colorFormat,fa,"invalid color format for texture");else t.oneOf(b.colorFormat,N,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)H=!(!b.depthTexture&&!b.depthStencilTexture),t(!H||z.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?n=b.depth:
(v=b.depth,B=!1));"stencil"in b&&("boolean"===typeof b.stencil?B=b.stencil:(I=b.stencil,n=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?n=B=b.depthStencil:(W=b.depthStencil,B=n=!1))}else e=g=1;var la=null,C=null,Qa=null,Ka=null;if(Array.isArray(r))la=r.map(na);else if(r)la=[na(r)];else for(la=Array(J),r=0;r<J;++r)la[r]=A(e,g,x,k,a);t(z.webgl_draw_buffers||1>=la.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");t(la.length<=w.maxColorAttachments,
"too many color attachments, not supported");e=e||la[0].width;g=g||la[0].height;v?C=na(v):n&&!B&&(C=A(e,g,H,"depth","uint32"));I?Qa=na(I):B&&!n&&(Qa=A(e,g,!1,"stencil","uint8"));W?Ka=na(W):!v&&!I&&B&&n&&(Ka=A(e,g,H,"depth stencil","depth stencil"));t(1>=!!v+!!I+!!W,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");n=null;for(r=0;r<la.length;++r)y(la[r],e,g),t(!la[r]||la[r].texture&&0<=q.indexOf(la[r].texture._texture.format)||la[r].renderbuffer&&0<=D.indexOf(la[r].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+r+" is invalid"),la[r]&&la[r].texture&&(B=f[la[r].texture._texture.format]*d[la[r].texture._texture.type],null===n?n=B:t(n===B,"all color attachments much have the same number of bits per pixel."));y(C,e,g);t(!C||C.texture&&6402===C.texture._texture.format||C.renderbuffer&&33189===C.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");y(Qa,e,g);t(!Qa||Qa.renderbuffer&&36168===Qa.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
y(Ka,e,g);t(!Ka||Ka.texture&&34041===Ka.texture._texture.format||Ka.renderbuffer&&34041===Ka.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");l(p);p.width=e;p.height=g;p.colorAttachments=la;p.depthAttachment=C;p.stencilAttachment=Qa;p.depthStencilAttachment=Ka;m.color=la.map(h);m.depth=h(C);m.stencil=h(Qa);m.depthStencil=h(Ka);m.width=p.width;m.height=p.height;L(p);return m}var p=new b;c.framebufferCount++;m(r,e);return g(m,{resize:function(b,l){t(F.next!==
p,"can not resize a framebuffer which is currently in use");var c=Math.max(b|0,1),r=Math.max(l|0||c,1);if(c===p.width&&r===p.height)return m;for(var e=p.colorAttachments,d=0;d<e.length;++d)C(e[d],c,r);C(p.depthAttachment,c,r);C(p.stencilAttachment,c,r);C(p.depthStencilAttachment,c,r);p.width=m.width=c;p.height=m.height=r;L(p);return m},_reglType:"framebuffer",_framebuffer:p,destroy:function(){B(p);l(p)},use:function(b){F.setFBO({framebuffer:m},b)}})}var F={cur:null,next:null,dirty:!1,setFBO:null},
fa=["rgba"],N=["rgba4","rgb565","rgb5 a1"];z.ext_srgb&&N.push("srgba");z.ext_color_buffer_half_float&&N.push("rgba16f","rgb16f");z.webgl_color_buffer_float&&N.push("rgba32f");var u=["uint8"];z.oes_texture_half_float&&u.push("half float","float16");z.oes_texture_float&&u.push("float","float32");var I=0,r={};return g(F,{getFramebuffer:function(l){return"function"===typeof l&&"framebuffer"===l._reglType&&(l=l._framebuffer,l instanceof b)?l:null},create:W,createCube:function(b){function l(b){var r;t(0>
c.indexOf(F.next),"can not update framebuffer which is currently in use");var e={color:null},d=0,m=null;r="rgba";var f="uint8",q=1;if("number"===typeof b)d=b|0;else if(b){t.type(b,"object","invalid arguments for framebuffer");"shape"in b?(d=b.shape,t(Array.isArray(d)&&2<=d.length,"invalid shape for framebuffer"),t(d[0]===d[1],"cube framebuffer must be square"),d=d[0]):("radius"in b&&(d=b.radius|0),"width"in b?(d=b.width|0,"height"in b&&t(b.height===d,"must be square")):"height"in b&&(d=b.height|0));
if("color"in b||"colors"in b)m=b.color||b.colors,Array.isArray(m)&&t(1===m.length||z.webgl_draw_buffers,"multiple render targets not supported");m||("colorCount"in b&&(q=b.colorCount|0,t(0<q,"invalid color buffer count")),"colorType"in b&&(t.oneOf(b.colorType,u,"invalid color type"),f=b.colorType),"colorFormat"in b&&(r=b.colorFormat,t.oneOf(b.colorFormat,fa,"invalid color format for texture")));"depth"in b&&(e.depth=b.depth);"stencil"in b&&(e.stencil=b.stencil);"depthStencil"in b&&(e.depthStencil=
b.depthStencil)}else d=1;if(m)if(Array.isArray(m))for(b=[],r=0;r<m.length;++r)b[r]=m[r];else b=[m];else for(b=Array(q),m={radius:d,format:r,type:f},r=0;r<q;++r)b[r]=p.createCube(m);e.color=Array(b.length);for(r=0;r<b.length;++r)q=b[r],t("function"===typeof q&&"textureCube"===q._reglType,"invalid cube map"),d=d||q.width,t(q.width===d&&q.height===d,"invalid cube map shape"),e.color[r]={target:34069,data:b[r]};for(r=0;6>r;++r){for(q=0;q<b.length;++q)e.color[q].target=34069+r;0<r&&(e.depth=c[0].depth,
e.stencil=c[0].stencil,e.depthStencil=c[0].depthStencil);if(c[r])c[r](e);else c[r]=W(e)}return g(l,{width:d,height:d,color:b})}var c=Array(6);l(b);return g(l,{faces:c,resize:function(b){var r=b|0;t(0<r&&r<=w.maxCubeMapSize,"invalid radius for cube fbo");if(r===l.width)return l;var e=l.color;for(b=0;b<e.length;++b)e[b].resize(r);for(b=0;6>b;++b)c[b].resize(r);l.width=l.height=r;return l},_reglType:"framebufferCube",destroy:function(){c.forEach(function(b){b.destroy()})}})},clear:function(){k(r).forEach(B)},
restore:function(){F.cur=null;F.next=null;F.dirty=!0;k(r).forEach(function(b){b.framebuffer=a.createFramebuffer();L(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(a,h,u){var t=a("./util/sorted-object-keys"),k=a("./util/pool");h.exports=function(g,q){var f=1;q.ext_texture_filter_anisotropic&&(f=g.getParameter(34047));var d=1,a=1;q.webgl_draw_buffers&&(d=g.getParameter(34852),a=g.getParameter(36063));var n=!!q.oes_texture_float;if(n){n=g.createTexture();g.bindTexture(3553,
n);g.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var v=g.createFramebuffer();g.bindFramebuffer(36160,v);g.framebufferTexture2D(36160,36064,3553,n,0);g.bindTexture(3553,null);if(36053!==g.checkFramebufferStatus(36160))n=!1;else{g.viewport(0,0,1,1);g.clearColor(1,0,0,1);g.clear(16384);var z=k.allocType(5126,4);g.readPixels(0,0,1,1,6408,5126,z);g.getError()?n=!1:(g.deleteFramebuffer(v),g.deleteTexture(n),n=1===z[0]);k.freeType(z)}}z=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(z=g.createTexture(),v=k.allocType(5121,36),g.activeTexture(33984),g.bindTexture(34067,z),g.texImage2D(34069,0,6408,3,3,0,6408,5121,v),k.freeType(v),g.bindTexture(34067,null),g.deleteTexture(z),z=!g.getError());return{colorBits:[g.getParameter(3410),g.getParameter(3411),g.getParameter(3412),g.getParameter(3413)],depthBits:g.getParameter(3414),stencilBits:g.getParameter(3415),subpixelBits:g.getParameter(3408),extensions:t(q).filter(function(d){return!!q[d]}),
maxAnisotropic:f,maxDrawbuffers:d,maxColorAttachments:a,pointSizeDims:g.getParameter(33901),lineWidthDims:g.getParameter(33902),maxViewportDims:g.getParameter(3386),maxCombinedTextureUnits:g.getParameter(35661),maxCubeMapSize:g.getParameter(34076),maxRenderbufferSize:g.getParameter(34024),maxTextureUnits:g.getParameter(34930),maxTextureSize:g.getParameter(3379),maxAttributes:g.getParameter(34921),maxVertexUniforms:g.getParameter(36347),maxVertexTextureUnits:g.getParameter(35660),maxVaryingVectors:g.getParameter(36348),
maxFragmentUniforms:g.getParameter(36349),glsl:g.getParameter(35724),renderer:g.getParameter(7937),vendor:g.getParameter(7936),version:g.getParameter(7938),readFloat:n,npotTextureCube:z}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(a,h,u){var t=a("./util/check"),k=a("./util/is-typed-array");h.exports=function(g,q,f,d,a,n,v){function z(p){var e;null===q.next?(t(a.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(t(null!==q.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=q.next.colorAttachments[0].texture._texture.type,t.optional(function(){n.oes_texture_float?(t(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&t(v.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):t(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var c=0,m=0,x=d.framebufferWidth,y=d.framebufferHeight,w=null;k(p)?w=p:p&&(t.type(p,"object","invalid arguments to regl.read()"),c=p.x|0,m=p.y|0,t(0<=c&&c<d.framebufferWidth,"invalid x offset for regl.read"),t(0<=m&&m<d.framebufferHeight,"invalid y offset for regl.read"),x=(p.width||d.framebufferWidth-c)|0,y=(p.height||d.framebufferHeight-m)|0,w=p.data||null);w&&(5121===e?t(w instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&t(w instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));t(0<x&&x+c<=d.framebufferWidth,"invalid width for read pixels");t(0<y&&y+m<=d.framebufferHeight,"invalid height for read pixels");f();p=x*y*4;w||(5121===e?w=new Uint8Array(p):5126===e&&(w=w||new Float32Array(p)));t.isTypedArray(w,"data buffer for regl.read() must be a typedarray");t(w.byteLength>=p,"data buffer for regl.read() too small");g.pixelStorei(3333,4);g.readPixels(c,m,x,y,6408,e,w);return w}function w(d){var e;
q.setFBO({framebuffer:d.framebuffer},function(){e=z(d)});return e}return function(d){return d&&"framebuffer"in d?w(d):z(d)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(a,h,u){var t=a("./util/sorted-object-keys"),k=a("./util/check"),g=a("./util/values"),q=[];q[32854]=2;q[32855]=2;q[36194]=2;q[33189]=2;q[36168]=1;q[34041]=4;q[35907]=4;q[34836]=16;q[34842]=8;q[34843]=6;h.exports=function(f,d,a,n,v){function z(e){this.id=c++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;v.profile&&(this.stats={size:0})}function w(c){var e=c.renderbuffer;k(e,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(e);c.renderbuffer=null;c.refCount=0;delete m[c.id];n.renderbufferCount--}var p={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(p.srgba=35907);d.ext_color_buffer_half_float&&(p.rgba16f=34842,p.rgb16f=34843);d.webgl_color_buffer_float&&(p.rgba32f=34836);var e=[];t(p).forEach(function(c){e[p[c]]=
c});var c=0,m={};z.prototype.decRef=function(){0>=--this.refCount&&w(this)};v.profile&&(n.getTotalRenderbufferSize=function(){var c=0;t(m).forEach(function(e){c+=m[e].stats.size});return c});return{create:function(c,d){function g(c,d){var m=0,b=0,l=32854;"object"===typeof c&&c?("shape"in c?(b=c.shape,k(Array.isArray(b)&&2<=b.length,"invalid renderbuffer shape"),m=b[0]|0,b=b[1]|0):("radius"in c&&(m=b=c.radius|0),"width"in c&&(m=c.width|0),"height"in c&&(b=c.height|0)),"format"in c&&(k.parameter(c.format,
p,"invalid renderbuffer format"),l=p[c.format])):"number"===typeof c?(m=c|0,b="number"===typeof d?d|0:m):c?k.raise("invalid arguments to renderbuffer constructor"):m=b=1;k(0<m&&0<b&&m<=a.maxRenderbufferSize&&b<=a.maxRenderbufferSize,"invalid renderbuffer size");if(m!==w.width||b!==w.height||l!==w.format)return g.width=w.width=m,g.height=w.height=b,w.format=l,f.bindRenderbuffer(36161,w.renderbuffer),f.renderbufferStorage(36161,l,m,b),k(0===f.getError(),"invalid render buffer format"),v.profile&&(w.stats.size=
q[w.format]*w.width*w.height),g.format=e[w.format],g}var w=new z(f.createRenderbuffer());m[w.id]=w;n.renderbufferCount++;g(c,d);g.resize=function(c,e){var d=c|0,b=e|0||d;if(d===w.width&&b===w.height)return g;k(0<d&&0<b&&d<=a.maxRenderbufferSize&&b<=a.maxRenderbufferSize,"invalid renderbuffer size");g.width=w.width=d;g.height=w.height=b;f.bindRenderbuffer(36161,w.renderbuffer);f.renderbufferStorage(36161,w.format,d,b);k(0===f.getError(),"invalid render buffer format");v.profile&&(w.stats.size=q[w.format]*
w.width*w.height);return g};g._reglType="renderbuffer";g._renderbuffer=w;v.profile&&(g.stats=w.stats);g.destroy=function(){w.decRef()};return g},clear:function(){g(m).forEach(w)},restore:function(){g(m).forEach(function(c){c.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,c.renderbuffer);f.renderbufferStorage(36161,c.format,c.width,c.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(a,h,u){var t=a("./util/sorted-object-keys"),
k=a("./util/check"),g=a("./util/extend"),q=a("./util/values");h.exports=function(f,d,a,n){function v(c,e,d,g){this.name=c;this.id=e;this.location=d;this.info=g}function z(c,e){for(var d=0;d<c.length;++d)if(c[d].id===e.id){c[d].location=e.location;return}c.push(e)}function w(e,g,p){var q=35632===e?c:m,b=q[g];if(!b){var l=d.str(g),b=f.createShader(e);f.shaderSource(b,l);f.compileShader(b);k.shaderError(f,b,l,e,p);q[g]=b}return b}function p(c,e){this.id=H++;this.fragId=c;this.vertId=e;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(c,e,g){var m;m=w(35632,c.fragId);var b=w(35633,c.vertId),l=c.program=f.createProgram();f.attachShader(l,m);f.attachShader(l,b);if(g)for(m=0;m<g.length;++m)b=g[m],f.bindAttribLocation(l,b[0],b[1]);f.linkProgram(l);k.linkError(f,l,d.str(c.fragId),d.str(c.vertId),e);g=f.getProgramParameter(l,35718);n.profile&&(c.stats.uniformsCount=g);b=c.uniforms;for(m=0;m<g;++m)if(e=f.getActiveUniform(l,
m))if(1<e.size)for(var p=0;p<e.size;++p){var q=e.name.replace("[0]","["+p+"]");z(b,new v(q,d.id(q),f.getUniformLocation(l,q),e))}else z(b,new v(e.name,d.id(e.name),f.getUniformLocation(l,e.name),e));g=f.getProgramParameter(l,35721);n.profile&&(c.stats.attributesCount=g);c=c.attributes;for(m=0;m<g;++m)(e=f.getActiveAttrib(l,m))&&z(c,new v(e.name,d.id(e.name),f.getAttribLocation(l,e.name),e))}var c={},m={},x={},y=[],H=0;n.profile&&(a.getMaxUniformsCount=function(){var c=0;y.forEach(function(e){e.stats.uniformsCount>
c&&(c=e.stats.uniformsCount)});return c},a.getMaxAttributesCount=function(){var c=0;y.forEach(function(e){e.stats.attributesCount>c&&(c=e.stats.attributesCount)});return c});return{clear:function(){var e=f.deleteShader.bind(f);q(c).forEach(e);c={};q(m).forEach(e);m={};y.forEach(function(c){f.deleteProgram(c.program)});y.length=0;x={};a.shaderCount=0},program:function(d,q,n,v){k.command(0<=d,"missing vertex shader",n);k.command(0<=q,"missing fragment shader",n);var b=x[q];b||(b=x[q]={});var l=b[d];
if(l&&(l.refCount++,!v))return l;var B=new p(q,d);a.shaderCount++;e(B,n,v);l||(b[d]=B);y.push(B);return g(B,{destroy:function(){B.refCount--;if(0>=B.refCount){f.deleteProgram(B.program);var l=y.indexOf(B);y.splice(l,1);a.shaderCount--}0>=b[B.vertId].refCount&&(f.deleteShader(m[B.vertId]),delete m[B.vertId],delete x[B.fragId][B.vertId]);t(x[B.fragId]).length||(f.deleteShader(c[B.fragId]),delete c[B.fragId],delete x[B.fragId])}})},restore:function(){c={};m={};for(var d=0;d<y.length;++d)e(y[d],null,
y[d].attributes.map(function(c){return[c.location,c.name]}))},shader:w,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(a,h,u){h.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(a,h,u){h.exports=function(){var a={"":0},k=[""];return{id:function(g){var q=a[g];if(q)return q;q=a[g]=k.length;k.push(g);
return q},str:function(g){return k[g]}}}},{}],19:[function(a,h,u){function t(b){return"[object "+b+"]"}function k(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function g(b){return Array.isArray(b)&&0!==b.length&&x(b[0])?!0:!1}function q(b){return Object.prototype.toString.call(b)}function f(b){if(!b)return!1;var l=q(b);return 0<=fa.indexOf(l)?!0:k(b)||g(b)||e(b)}function d(b,l){36193===b.type?(b.data=m(l),c.freeType(l)):b.data=l}function D(b,l,c,e,d,g){b="undefined"!==typeof ba[b]?
ba[b]:C[b]*N[l];g&&(b*=6);if(d){for(e=0;1<=c;)e+=b*c*c,c/=2;return e}return b*c*e}var n=a("./util/sorted-object-keys"),v=a("./util/check"),z=a("./util/extend"),w=a("./util/values"),p=a("./util/is-typed-array"),e=a("./util/is-ndarray"),c=a("./util/pool"),m=a("./util/to-half-float"),x=a("./util/is-array-like"),y=a("./util/flatten"),H=a("./util/is-pow2");u=a("./constants/arraytypes.json");var na=a("./constants/arraytypes.json"),A=[9984,9986,9985,9987],aa=[0,6409,6410,6407,6408],C={};C[6409]=C[6406]=
C[6402]=1;C[34041]=C[6410]=2;C[6407]=C[35904]=3;C[6408]=C[35906]=4;var b=t("HTMLCanvasElement"),l=t("OffscreenCanvas"),B=t("CanvasRenderingContext2D"),L=t("ImageBitmap"),W=t("HTMLImageElement"),F=t("HTMLVideoElement"),fa=n(u).concat([b,l,B,L,W,F]),N=[];N[5121]=1;N[5126]=4;N[36193]=2;N[5123]=2;N[5125]=4;var ba=[];ba[32854]=2;ba[32855]=2;ba[36194]=2;ba[34041]=4;ba[33776]=.5;ba[33777]=.5;ba[33778]=1;ba[33779]=1;ba[35986]=.5;ba[35987]=1;ba[34798]=1;ba[35840]=.5;ba[35841]=.25;ba[35842]=.5;ba[35843]=.25;
ba[36196]=.5;h.exports=function(a,r,J,t,N,h,fa){function u(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ba(b,l){b.internalformat=l.internalformat;b.format=l.format;b.type=l.type;b.compressed=l.compressed;b.premultiplyAlpha=l.premultiplyAlpha;b.flipY=l.flipY;b.unpackAlignment=l.unpackAlignment;b.colorSpace=l.colorSpace;b.width=l.width;b.height=l.height;
b.channels=l.channels}function da(b,l){if("object"===typeof l&&l){"premultiplyAlpha"in l&&(v.type(l.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=l.premultiplyAlpha);"flipY"in l&&(v.type(l.flipY,"boolean","invalid texture flip"),b.flipY=l.flipY);"alignment"in l&&(v.oneOf(l.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=l.alignment);"colorSpace"in l&&(v.parameter(l.colorSpace,Eb,"invalid colorSpace"),b.colorSpace=Eb[l.colorSpace]);if("type"in l){var c=
l.type;v(r.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");v(r.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");v(r.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");v.parameter(c,
V,"invalid texture type");b.type=V[c]}var e=b.width,d=b.height,g=b.channels,c=!1;"shape"in l?(v(Array.isArray(l.shape)&&2<=l.shape.length,"shape must be an array"),e=l.shape[0],d=l.shape[1],3===l.shape.length&&(g=l.shape[2],v(0<g&&4>=g,"invalid number of channels"),c=!0),v(0<=e&&e<=J.maxTextureSize,"invalid width"),v(0<=d&&d<=J.maxTextureSize,"invalid height")):("radius"in l&&(e=d=l.radius,v(0<=e&&e<=J.maxTextureSize,"invalid radius")),"width"in l&&(e=l.width,v(0<=e&&e<=J.maxTextureSize,"invalid width")),
"height"in l&&(d=l.height,v(0<=d&&d<=J.maxTextureSize,"invalid height")),"channels"in l&&(g=l.channels,v(0<g&&4>=g,"invalid number of channels"),c=!0));b.width=e|0;b.height=d|0;b.channels=g|0;e=!1;"format"in l&&(e=l.format,v(r.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),v.parameter(e,R,"invalid texture format"),d=b.internalformat=R[e],b.format=Ha[d],e in V&&!("type"in l)&&(b.type=V[e]),e in ha&&
(b.compressed=!0),e=!0);!c&&e?b.channels=C[b.format]:c&&!e?b.channels!==aa[b.format]&&(b.format=b.internalformat=aa[b.channels]):e&&c&&v(b.channels===C[b.format],"number of channels inconsistent with specified format")}}function ga(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function O(){u.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function T(r,
n){var a=null;f(n)?a=n:n&&(v.type(n,"object","invalid pixel data type"),da(r,n),"x"in n&&(r.xOffset=n.x|0),"y"in n&&(r.yOffset=n.y|0),f(n.data)&&(a=n.data));v(!r.compressed||a instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(n.copy){v(!a,"can not specify copy and data field for the same texture");var w=N.viewportWidth,t=N.viewportHeight;r.width=r.width||w-r.xOffset;r.height=r.height||t-r.yOffset;r.needsCopy=!0;v(0<=r.xOffset&&r.xOffset<w&&0<=r.yOffset&&r.yOffset<
t&&0<r.width&&r.width<=w&&0<r.height&&r.height<=t,"copy texture read out of bounds")}else if(!a)r.width=r.width||1,r.height=r.height||1,r.channels=r.channels||4;else if(p(a))r.channels=r.channels||4,r.data=a,"type"in n||5121!==r.type||(r.type=na[Object.prototype.toString.call(a)]|0);else if(k(a)){r.channels=r.channels||4;w=a;t=w.length;switch(r.type){case 5121:case 5123:case 5125:case 5126:t=c.allocType(r.type,t);t.set(w);r.data=t;break;case 36193:r.data=m(w);break;default:v.raise("unsupported texture type, must specify a typed array")}r.alignment=
1;r.needsFree=!0}else if(e(a)){w=a.data;Array.isArray(w)||5121!==r.type||(r.type=na[Object.prototype.toString.call(w)]|0);var t=a.shape,D=a.stride,z,I,H,la;3===t.length?(H=t[2],la=D[2]):(v(2===t.length,"invalid ndarray pixel data, must be 2 or 3D"),la=H=1);z=t[0];I=t[1];t=D[0];D=D[1];r.alignment=1;r.width=z;r.height=I;r.channels=H;r.format=r.internalformat=aa[H];r.needsFree=!0;z=la;a=a.offset;H=r.width;la=r.height;I=r.channels;for(var h=c.allocType(36193===r.type?5126:r.type,H*la*I),A=0,C=0;C<la;++C)for(var fa=
0;fa<H;++fa)for(var u=0;u<I;++u)h[A++]=w[t*fa+D*C+z*u+a];d(r,h)}else if(q(a)===b||q(a)===l||q(a)===B)q(a)===b||q(a)===l?r.element=a:r.element=a.canvas,r.width=r.element.width,r.height=r.element.height,r.channels=4;else if(q(a)===L)r.element=a,r.width=a.width,r.height=a.height,r.channels=4;else if(q(a)===W)r.element=a,r.width=a.naturalWidth,r.height=a.naturalHeight,r.channels=4;else if(q(a)===F)r.element=a,r.width=a.videoWidth,r.height=a.videoHeight,r.channels=4;else if(g(a)){w=r.width||a[0].length;
t=r.height||a.length;D=r.channels;D=x(a[0][0])?D||a[0][0].length:D||1;z=y.shape(a);H=1;for(la=0;la<z.length;++la)H*=z[la];H=c.allocType(36193===r.type?5126:r.type,H);y.flatten(a,z,"",H);d(r,H);r.alignment=1;r.width=w;r.height=t;r.channels=D;r.format=r.internalformat=aa[D];r.needsFree=!0}5126===r.type?v(0<=J.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===r.type&&v(0<=J.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function ra(b,l,c,r,e){var d=b.element,g=b.data,m=b.internalformat,p=b.format,f=b.type,q=b.width,n=b.height;ga(b);d?a.texSubImage2D(l,e,c,r,p,f,d):b.compressed?a.compressedTexSubImage2D(l,e,c,r,m,q,n,g):b.needsCopy?(t(),a.copyTexSubImage2D(l,e,c,r,b.xOffset,b.yOffset,q,n)):a.texSubImage2D(l,e,c,r,q,n,p,f,g)}function S(){return Y.pop()||new O}function Gb(b){b.needsFree&&c.freeType(b.data);O.call(b);Y.push(b)}function Ta(){u.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function X(b,l,c){var r=b.images[0]=S();b.mipmask=1;r.width=b.width=l;r.height=b.height=c;r.channels=b.channels=4}function E(b,l){var c=null;if(f(l))c=b.images[0]=S(),ba(c,b),T(c,l),b.mipmask=1;else if(da(b,l),Array.isArray(l.mipmap))for(var r=l.mipmap,e=0;e<r.length;++e)c=b.images[e]=S(),ba(c,b),c.width>>=e,c.height>>=e,T(c,r[e]),b.mipmask|=1<<e;else c=b.images[0]=S(),ba(c,b),T(c,l),b.mipmask=1;ba(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==
b.internalformat&&33779!==b.internalformat||v(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ka(b,l){for(var c=b.images,r=0;r<c.length&&c[r];++r){var e=c[r],d=l,g=r,m=e.element,p=e.data,f=e.internalformat,q=e.format,n=e.type,B=e.width,x=e.height;ga(e);m?a.texImage2D(d,g,q,q,n,m):e.compressed?a.compressedTexImage2D(d,g,f,B,x,0,p):e.needsCopy?(t(),a.copyTexImage2D(d,g,q,e.xOffset,e.yOffset,B,x,0)):a.texImage2D(d,
g,q,B,x,0,q,n,p||null)}}function Z(){var b=ca.pop()||new Ta;u.call(b);for(var l=b.mipmask=0;16>l;++l)b.images[l]=null;return b}function sa(b){for(var l=b.images,c=0;c<l.length;++c)l[c]&&Gb(l[c]),l[c]=null;ca.push(b)}function wa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Qa(b,l){if("min"in l){var c=l.min;v.parameter(c,Jc);b.minFilter=Jc[c];0<=A.indexOf(b.minFilter)&&!("faces"in l)&&(b.genMipmaps=!0)}"mag"in l&&
(c=l.mag,v.parameter(c,yb),b.magFilter=yb[c]);var c=b.wrapS,r=b.wrapT;if("wrap"in l){var e=l.wrap;"string"===typeof e?(v.parameter(e,Cb),c=r=Cb[e]):Array.isArray(e)&&(v.parameter(e[0],Cb),v.parameter(e[1],Cb),c=Cb[e[0]],r=Cb[e[1]])}else"wrapS"in l&&(c=l.wrapS,v.parameter(c,Cb),c=Cb[c]),"wrapT"in l&&(r=l.wrapT,v.parameter(r,Cb),r=Cb[r]);b.wrapS=c;b.wrapT=r;"anisotropic"in l&&(c=l.anisotropic,v("number"===typeof c&&1<=c&&c<=J.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=l.anisotropic);
if("mipmap"in l){c=!1;switch(typeof l.mipmap){case "string":v.parameter(l.mipmap,Xa,"invalid mipmap hint");b.mipmapHint=Xa[l.mipmap];c=b.genMipmaps=!0;break;case "boolean":c=b.genMipmaps=l.mipmap;break;case "object":v(Array.isArray(l.mipmap),"invalid mipmap type");b.genMipmaps=!1;c=!0;break;default:v.raise("invalid mipmap type")}!c||"min"in l||(b.minFilter=9984)}}function Ka(b,l){a.texParameteri(l,10241,b.minFilter);a.texParameteri(l,10240,b.magFilter);a.texParameteri(l,10242,b.wrapS);a.texParameteri(l,
10243,b.wrapT);r.ext_texture_filter_anisotropic&&a.texParameteri(l,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(l))}function U(b){u.call(this);this.mipmask=0;this.internalformat=6408;this.id=ta++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new wa;fa.profile&&(this.stats={size:0})}function Na(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ea(){var b=ja[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function pa(b){var l=b.texture;v(l,"must not double destroy texture");var c=b.unit,r=b.target;0<=c&&(a.activeTexture(33984+c),a.bindTexture(r,null),ja[c]=null);a.deleteTexture(l);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete Q[b.id];h.textureCount--}var Xa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Cb={repeat:10497,clamp:33071,mirror:33648},yb={nearest:9728,linear:9729},Jc=z({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},yb),Eb={none:0,browser:37444},V={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},R={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ha={};r.ext_srgb&&(R.srgb=35904,R.srgba=35906);r.oes_texture_float&&(V.float32=V["float"]=5126);r.oes_texture_half_float&&(V.float16=V["half float"]=36193);r.webgl_depth_texture&&(z(R,{depth:6402,"depth stencil":34041}),z(V,{uint16:5123,uint32:5125,
"depth stencil":34042}));r.webgl_compressed_texture_s3tc&&z(ha,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});r.webgl_compressed_texture_atc&&z(ha,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});r.webgl_compressed_texture_pvrtc&&z(ha,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});r.webgl_compressed_texture_etc1&&(ha["rgb etc1"]=36196);var Aa=Array.prototype.slice.call(a.getParameter(34467));
n(ha).forEach(function(b){var l=ha[b];0<=Aa.indexOf(l)&&(R[b]=l)});var zb=n(R);J.textureFormats=zb;var Ac=[];n(R).forEach(function(b){Ac[R[b]]=b});var Kc=[];n(V).forEach(function(b){Kc[V[b]]=b});var P=[];n(yb).forEach(function(b){P[yb[b]]=b});var G=[];n(Jc).forEach(function(b){G[Jc[b]]=b});var oa=[];n(Cb).forEach(function(b){oa[Cb[b]]=b});var Ha=zb.reduce(function(b,l){var c=R[l];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||r.ext_srgb&&(35904===c||35906===c)?b[c]=c:32855===c||0<=l.indexOf("rgba")?
b[c]=6408:b[c]=6407;return b},{}),Y=[],ca=[],ta=0,Q={},M=J.maxTextureUnits,ja=Array(M).map(function(){return null});z(U.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var l=0;l<M;++l){var c=ja[l];if(c){if(0<c.bindCount)continue;c.unit=-1}ja[l]=this;b=l;break}b>=M&&v.raise("insufficient number of texture units");fa.profile&&h.maxTextureUnits<b+1&&(h.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});fa.profile&&(h.getTotalTextureSize=function(){var b=0;n(Q).forEach(function(l){b+=Q[l].stats.size});return b});return{create2D:function(b,l){function c(b,l){var e=r.texInfo;wa.call(e);var d=Z();"number"===typeof b?"number"===typeof l?X(d,b|0,l|0):X(d,b|0,b|0):b?(v.type(b,"object","invalid arguments to regl.texture"),Qa(e,b),E(d,b)):X(d,1,1);e.genMipmaps&&(d.mipmask=(d.width<<1)-1);r.mipmask=d.mipmask;ba(r,d);v.texture2D(e,d,J);r.internalformat=d.internalformat;
c.width=d.width;c.height=d.height;Na(r);ka(d,3553);Ka(e,3553);ea();sa(d);fa.profile&&(r.stats.size=D(r.internalformat,r.type,d.width,d.height,e.genMipmaps,!1));c.format=Ac[r.internalformat];c.type=Kc[r.type];c.mag=P[e.magFilter];c.min=G[e.minFilter];c.wrapS=oa[e.wrapS];c.wrapT=oa[e.wrapT];return c}var r=new U(3553);Q[r.id]=r;h.textureCount++;c(b,l);c.subimage=function(b,l,e,d){v(!!b,"must specify image data");l|=0;e|=0;d|=0;var g=S();ba(g,r);g.width=0;g.height=0;T(g,b);g.width=g.width||(r.width>>
d)-l;g.height=g.height||(r.height>>d)-e;v(r.type===g.type&&r.format===g.format&&r.internalformat===g.internalformat,"incompatible format for texture.subimage");v(0<=l&&0<=e&&l+g.width<=r.width&&e+g.height<=r.height,"texture.subimage write out of bounds");v(r.mipmask&1<<d,"missing mipmap data");v(g.data||g.element||g.needsCopy,"missing image data");Na(r);ra(g,3553,l,e,d);ea();Gb(g);return c};c.resize=function(b,l){var e=b|0,d=l|0||e;if(e===r.width&&d===r.height)return c;c.width=r.width=e;c.height=
r.height=d;Na(r);for(var g=0;r.mipmask>>g;++g){var m=e>>g,p=d>>g;if(!m||!p)break;a.texImage2D(3553,g,r.format,m,p,0,r.format,r.type,null)}ea();fa.profile&&(r.stats.size=D(r.internalformat,r.type,e,d,!1,!1));return c};c._reglType="texture2d";c._texture=r;fa.profile&&(c.stats=r.stats);c.destroy=function(){r.decRef()};return c},createCube:function(b,l,c,r,e,d){function g(b,l,c,r,e,d){var f,q=m.texInfo;wa.call(q);for(f=0;6>f;++f)p[f]=Z();if("number"!==typeof b&&b)if("object"===typeof b)if(l)E(p[0],b),
E(p[1],l),E(p[2],c),E(p[3],r),E(p[4],e),E(p[5],d);else if(Qa(q,b),da(m,b),"faces"in b)for(b=b.faces,v(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),f=0;6>f;++f)v("object"===typeof b[f]&&!!b[f],"invalid input for cube map face"),ba(p[f],m),E(p[f],b[f]);else for(f=0;6>f;++f)E(p[f],b);else v.raise("invalid arguments to cube map");else for(b=b|0||1,f=0;6>f;++f)X(p[f],b,b);ba(m,p[0]);v.optional(function(){J.npotTextureCube||v(H(m.width)&&H(m.height),"your browser does not support non power or two texture dimensions")});
m.mipmask=q.genMipmaps?(p[0].width<<1)-1:p[0].mipmask;v.textureCube(m,q,p,J);m.internalformat=p[0].internalformat;g.width=p[0].width;g.height=p[0].height;Na(m);for(f=0;6>f;++f)ka(p[f],34069+f);Ka(q,34067);ea();fa.profile&&(m.stats.size=D(m.internalformat,m.type,g.width,g.height,q.genMipmaps,!0));g.format=Ac[m.internalformat];g.type=Kc[m.type];g.mag=P[q.magFilter];g.min=G[q.minFilter];g.wrapS=oa[q.wrapS];g.wrapT=oa[q.wrapT];for(f=0;6>f;++f)sa(p[f]);return g}var m=new U(34067);Q[m.id]=m;h.cubeCount++;
var p=Array(6);g(b,l,c,r,e,d);g.subimage=function(b,l,c,r,e){v(!!l,"must specify image data");v("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");c|=0;r|=0;e|=0;var d=S();ba(d,m);d.width=0;d.height=0;T(d,l);d.width=d.width||(m.width>>e)-c;d.height=d.height||(m.height>>e)-r;v(m.type===d.type&&m.format===d.format&&m.internalformat===d.internalformat,"incompatible format for texture.subimage");v(0<=c&&0<=r&&c+d.width<=m.width&&r+d.height<=m.height,"texture.subimage write out of bounds");v(m.mipmask&
1<<e,"missing mipmap data");v(d.data||d.element||d.needsCopy,"missing image data");Na(m);ra(d,34069+b,c,r,e);ea();Gb(d);return g};g.resize=function(b){b|=0;if(b!==m.width){g.width=m.width=b;g.height=m.height=b;Na(m);for(var l=0;6>l;++l)for(var c=0;m.mipmask>>c;++c)a.texImage2D(34069+l,c,m.format,b>>c,b>>c,0,m.format,m.type,null);ea();fa.profile&&(m.stats.size=D(m.internalformat,m.type,g.width,g.height,!1,!0));return g}};g._reglType="textureCube";g._texture=m;fa.profile&&(g.stats=m.stats);g.destroy=
function(){m.decRef()};return g},clear:function(){for(var b=0;b<M;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ja[b]=null;w(Q).forEach(pa);h.cubeCount=0;h.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<M;++b){var l=ja[b];l&&(l.bindCount=0,l.unit=-1,ja[b]=null)}w(Q).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var l=0;32>l;++l)if(0!==(b.mipmask&1<<l))if(3553===b.target)a.texImage2D(3553,l,b.internalformat,b.width>>
l,b.height>>l,0,b.internalformat,b.type,null);else for(var c=0;6>c;++c)a.texImage2D(34069+c,l,b.internalformat,b.width>>l,b.height>>l,0,b.internalformat,b.type,null);Ka(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<M;++b){var l=ja[b];l&&(l.bindCount=0,l.unit=-1,ja[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(a,h,u){h.exports=function(a,k){function g(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function q(d,f,e){var c=D.pop()||new g;c.startQueryIndex=d;c.endQueryIndex=f;c.sum=0;c.stats=e;n.push(c)}if(!k.ext_disjoint_timer_query)return null;var f=[],d=[],D=[],n=[],v=[],z=[];return{beginQuery:function(g){var p=f.pop()||k.ext_disjoint_timer_query.createQueryEXT();
k.ext_disjoint_timer_query.beginQueryEXT(35007,p);d.push(p);q(d.length-1,d.length,g)},endQuery:function(){k.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:q,update:function(){var g,p;g=d.length;if(0!==g){z.length=Math.max(z.length,g+1);v.length=Math.max(v.length,g+1);v[0]=0;var e=z[0]=0;for(p=g=0;p<d.length;++p){var c=d[p];k.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(e+=k.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),f.push(c)):d[g++]=c;v[p+1]=e;z[p+1]=g}d.length=g;for(p=
g=0;p<n.length;++p){var e=n[p],m=e.startQueryIndex,c=e.endQueryIndex;e.sum+=v[c]-v[m];m=z[m];c=z[c];c===m?(e.stats.gpuTime+=e.sum/1E6,D.push(e)):(e.startQueryIndex=m,e.endQueryIndex=c,n[g++]=e)}n.length=g}},getNumPendingQueries:function(){return d.length},clear:function(){f.push.apply(f,d);for(var g=0;g<f.length;g++)k.ext_disjoint_timer_query.deleteQueryEXT(f[g]);d.length=0;f.length=0},restore:function(){d.length=0;f.length=0}}}},{}],21:[function(a,h,u){function t(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function k(b){b=Error("(regl) "+b);console.error(b);throw b;}function g(b,c){b||k(c)}function q(b){return b?": "+b:""}function f(b,c){switch(c){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function d(b,c,e){0>c.indexOf(b)&&k("invalid value"+
q(e)+". must be one of: "+c)}function D(b,c){for(b+="";b.length<c;)b=" "+b;return b}function n(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function v(b,c){this.number=b;this.line=c;this.errors=[]}function z(b,c,e){this.file=b;this.line=c;this.message=e}function w(){var b=Error(),b=(b.stack||b).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return c?c[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function p(){var b=Error(),b=(b.stack||b).toString(),
c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return c?c[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function e(b,c){var e=b.split("\n"),d=1,g=0,m={unknown:new n,0:new n};m.unknown.name=m[0].name=c||w();m.unknown.lines.push(new v(0,""));for(var f=0;f<e.length;++f){var p=e[f],q=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(p);if(q)switch(q[1]){case "line":if(q=/(\d+)(\s+\d+)?/.exec(q[2]))d=q[1]|0,q[2]&&(g=q[2]|0,g in m||(m[g]=new n));break;case "define":if(q=/SHADER_NAME(_B64)?\s+(.*)$/.exec(q[2]))m[g].name=
q[1]?t(q[2]):q[2]}m[g].lines.push(new v(d++,p))}A(m).forEach(function(b){var l=m[b];l.lines.forEach(function(b){l.index[b.number]=b})});return m}function c(b){var c=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var l=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);l?c.push(new z(l[1]|0,l[2]|0,l[3].trim())):0<b.length&&c.push(new z("unknown",0,b))}});return c}function m(b,c){c.forEach(function(c){var e=b[c.file];if(e){var d=e.index[c.line];if(d){d.errors.push(c);e.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(c)})}function x(b){b._commandRef=w()}function y(b,c){var e=p();k(b+" in command "+(c||w())+("unknown"===e?"":" called from "+e))}function H(b,c,e,d){f(b,c)||y("invalid parameter type"+q(e)+". expected "+c+", got "+typeof b,d||w())}function na(l,c){return 32820===l||32819===l||33635===l?2:34042===l?4:b[l]*c}var A=a("./sorted-object-keys"),aa=a("./is-typed-array");a=a("./extend");var C="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
b={};b[5120]=b[5121]=1;b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2;b[5124]=b[5125]=b[5126]=b[34042]=4;h.exports=a(g,{optional:function(b){b()},raise:k,commandRaise:y,command:function(b,c,e){b||y(c,e||w())},parameter:function(b,c,e){b in c||k("unknown parameter ("+b+")"+q(e)+". possible values: "+A(c).join())},commandParameter:function(b,c,e,d){b in c||y("unknown parameter ("+b+")"+q(e)+". possible values: "+A(c).join(),d||w())},constructor:function(b){A(b).forEach(function(b){0>C.indexOf(b)&&
k('invalid regl constructor argument "'+b+'". must be one of '+C)})},type:function(b,c,e){f(b,c)||k("invalid parameter type"+q(e)+". expected "+c+", got "+typeof b)},commandType:H,isTypedArray:function(b,c){aa(b)||k("invalid parameter type"+q(c)+". must be a typed array")},nni:function(b,c){0<=b&&(b|0)===b||k("invalid parameter type, ("+b+")"+q(c)+". must be a nonnegative integer")},oneOf:d,shaderError:function(b,d,f,p,q){if(!b.getShaderParameter(d,b.COMPILE_STATUS)){d=b.getShaderInfoLog(d);b=p===
b.FRAGMENT_SHADER?"fragment":"vertex";H(f,"string",b+" shader source must be a string",q);var n=e(f,q);f=c(d);m(n,f);A(n).forEach(function(b){function l(b,c){r.push(b);e.push(c||"")}var c=n[b];if(c.hasErrors){var r=[""],e=[""];l("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(b){if(0<b.errors.length){l(D(b.number,4)+"|  ","background-color:yellow; font-weight:bold");l(b.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;b.errors.forEach(function(r){r=r.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(r);if(e){var d=e[1];r=e[2];switch(d){case "assign":d="="}c=Math.max(b.line.indexOf(d,c),0)}else c=0;l(D("| ",6));l(D("^^^",c+3)+"\n","font-weight:bold");l(D("| ",6));l(r+"\n","font-weight:bold")});l(D("| ",6)+"\n")}else l(D(b.number,4)+"|  "),l(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(r.join("")):(e[0]=r.join("%c"),console.log.apply(console,e))}});g.raise("Error compiling "+
b+" shader, "+n[0].name)}},linkError:function(b,c,d,m,f){b.getProgramParameter(c,b.LINK_STATUS)||(b=b.getProgramInfoLog(c),d=e(d,f),m='Error linking program with vertex shader, "'+e(m,f)[0].name+'", and fragment shader "'+d[0].name+'"',"undefined"!==typeof document?console.log("%c"+m+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(m+"\n"+b),g.raise(m))},callSite:p,saveCommandRef:x,saveDrawInfo:function(b,c,e,d){function g(b){return b?d.id(b):0}function m(b,
l){A(l).forEach(function(l){b[d.id(l)]=!0})}x(b);b._fragId=g(b["static"].frag);b._vertId=g(b["static"].vert);var f=b._uniformSet={};m(f,c["static"]);m(f,c.dynamic);c=b._attributeSet={};m(c,e["static"]);m(c,e.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,c,e){b.texture?d(b.texture._texture.internalformat,c,"unsupported texture format for attachment"):d(b.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},
guessCommand:w,texture2D:function(b,c,e){var d=c.width,m=c.height,f=c.channels;g(0<d&&d<=e.maxTextureSize&&0<m&&m<=e.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||g(!(d&d-1)&&!!d&&!(m&m-1)&&!!m,"incompatible wrap mode for texture, both width and height must be power of 2");1===c.mipmask?1!==d&&1!==m&&g(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(g(!(d&d-1)&&!!d&&!(m&m-1)&&!!m,"texture must be a square power of 2 to support mipmapping"),
g(c.mipmask===(d<<1)-1,"missing or incomplete mipmap data"));5126===c.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&g(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),g(!b.genMipmaps,"mipmap generation not supported with float textures"));var p=c.images;for(e=0;16>e;++e)if(p[e]){var q=d>>e,n=m>>e;g(c.mipmask&1<<e,"missing mipmap data");var r=p[e];g(r.width===q&&r.height===n,"invalid shape for mip images");g(r.format===c.format&&r.internalformat===
c.internalformat&&r.type===c.type,"incompatible type for mip image");!r.compressed&&r.data&&(q=Math.ceil(na(r.type,f)*q/r.unpackAlignment)*r.unpackAlignment,g(r.data.byteLength===q*n,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||g(0===(c.mipmask&1<<e),"extra mipmap data");c.compressed&&g(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,c,e,d){var m=b.width,f=b.height,p=b.channels;g(0<m&&m<=d.maxTextureSize&&
0<f&&f<=d.maxTextureSize,"invalid texture shape");g(m===f,"cube map must be square");g(33071===c.wrapS&&33071===c.wrapT,"wrap mode not supported by cube map");for(d=0;d<e.length;++d){var q=e[d];g(q.width===m&&q.height===f,"inconsistent cube map face shape");c.genMipmaps&&(g(!q.compressed,"can not generate mipmap for compressed textures"),g(1===q.mipmask,"can not specify mipmaps and generate mipmaps"));for(var n=q.images,r=0;16>r;++r){var a=n[r];if(a){var x=m>>r,k=f>>r;g(q.mipmask&1<<r,"missing mipmap data");
g(a.width===x&&a.height===k,"invalid shape for mip images");g(a.format===b.format&&a.internalformat===b.internalformat&&a.type===b.type,"incompatible type for mip image");a.compressed||a.data&&g(a.data.byteLength===x*k*Math.max(na(a.type,p),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(a,h,u){h.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(a,h,u){function t(g){return Array.prototype.slice.call(g)}var k=a("./extend"),g=a("./compiled-fns");h.exports=function(){function q(){var d=[],g=[];return k(function(){d.push.apply(d,t(arguments))},{def:function(){var f="v"+a;a++;g.push(f);0<arguments.length&&(d.push(f,"="),d.push.apply(d,t(arguments)),d.push(";"));return f},toString:function(){return t([0<g.length?"var "+g.join(",")+";":"",t(d).join("")]).join("")}})}function f(){function d(c,e){f(c,
e,"=",g.def(c,e),";")}var g=q(),f=q(),e=g.toString,c=f.toString;return k(function(){g.apply(g,t(arguments))},{def:g.def,entry:g,exit:f,save:d,set:function(c,e,f){d(c,e);g(c,e,"=",f,";")},toString:function(){return e()+c()}})}var d=0,a=0,n={},v={};return{global:q(),link:function(g){var f="$"+d,p=!1;"object"===typeof g&&g.name&&(f=g.name.replace(/ /g,"_"),p=!0);if(f in n)return f;n[f]=g;p||d++;return f},block:q,proc:function(d,g){function p(){var c="a"+e.length;e.push(c);return c}var e=[];g=g||0;for(var c=
0;c<g;++c)p();var c=f(),m=c.toString;return v[d]=k(c,{arg:p,toString:function(){return t(["function(",e.join(),"){",m(),"}"]).join("")}})},scope:f,cond:function(){var d=t(arguments).join(""),g=f(),p=f(),e=g.toString,c=p.toString;return k(g,{then:function(){g.apply(g,t(arguments));return this},"else":function(){p.apply(p,t(arguments));return this},toString:function(){var g=c();g&&(g="else{"+g+"}");return t(["if(",d,"){",e(),"}",g]).join("")}})},compile:function(){var d=[],f=[];Object.keys(n).sort(function(c,
e){var d="$"===c.charAt(0),g="$"===e.charAt(0);return d||g?d&&g?+c.slice(1)<+e.slice(1)?-1:1:d&&!g?-1:1:c.localeCompare(e)}).forEach(function(c){var e=n[c];d.push(c);f.push(e)});for(var p=0,e=d.length-1;-1<e;e--)if("$"===d[e].charAt(0)){p=e;break}p=d.slice(p).join();e=g[p];if(!e)throw Error("missing precompiled function with key: "+p);return e.apply(null,f)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(a,h,u){h.exports={$0:function(a){var k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,H,h,A,u,C,b,l,B,L,
W,F,fa,N,ba;k=a.attributes;g=a.current;q=a.framebuffer;f=a.gl;d=a.next;D=a.vao;n=d.blend_color;v=g.blend_color;z=d.blend_equation;w=g.blend_equation;p=d.blend_func;e=g.blend_func;c=d.colorMask;m=g.colorMask;x=d.depth_range;y=g.depth_range;H=d.polygonOffset_offset;h=g.polygonOffset_offset;A=d.sample_coverage;u=g.sample_coverage;C=d.scissor_box;b=g.scissor_box;l=d.stencil_func;B=g.stencil_func;L=d.stencil_opBack;W=g.stencil_opBack;F=d.stencil_opFront;fa=g.stencil_opFront;N=d.viewport;ba=g.viewport;
return{poll:function(){var a,r,k,t,D,ua,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa;g.dirty=!1;r=d.blend_enable;k=d.cull_enable;t=d.depth_enable;D=d.dither;ua=d.polygonOffset_enable;ab=d.sample_alpha;ma=d.sample_enable;za=d.scissor_enable;da=d.stencil_enable;ga=d.cull_face;O=g.cull_face;T=d.depth_func;ra=g.depth_func;S=d.depth_mask;Gb=g.depth_mask;Ta=d.frontFace;X=g.frontFace;E=d.lineWidth;ka=g.lineWidth;Z=d.stencil_mask;sa=g.stencil_mask;a=q.next;a!==q.cur&&(a?f.bindFramebuffer(36160,a.framebuffer):
f.bindFramebuffer(36160,null),q.cur=a);r!==g.blend_enable&&(r?f.enable(3042):f.disable(3042),g.blend_enable=r);k!==g.cull_enable&&(k?f.enable(2884):f.disable(2884),g.cull_enable=k);t!==g.depth_enable&&(t?f.enable(2929):f.disable(2929),g.depth_enable=t);D!==g.dither&&(D?f.enable(3024):f.disable(3024),g.dither=D);ua!==g.polygonOffset_enable&&(ua?f.enable(32823):f.disable(32823),g.polygonOffset_enable=ua);ab!==g.sample_alpha&&(ab?f.enable(32926):f.disable(32926),g.sample_alpha=ab);ma!==g.sample_enable&&
(ma?f.enable(32928):f.disable(32928),g.sample_enable=ma);za!==g.scissor_enable&&(za?f.enable(3089):f.disable(3089),g.scissor_enable=za);da!==g.stencil_enable&&(da?f.enable(2960):f.disable(2960),g.stencil_enable=da);if(n[0]!==v[0]||n[1]!==v[1]||n[2]!==v[2]||n[3]!==v[3])f.blendColor(n[0],n[1],n[2],n[3]),v[0]=n[0],v[1]=n[1],v[2]=n[2],v[3]=n[3];if(z[0]!==w[0]||z[1]!==w[1])f.blendEquationSeparate(z[0],z[1]),w[0]=z[0],w[1]=z[1];if(p[0]!==e[0]||p[1]!==e[1]||p[2]!==e[2]||p[3]!==e[3])f.blendFuncSeparate(p[0],
p[1],p[2],p[3]),e[0]=p[0],e[1]=p[1],e[2]=p[2],e[3]=p[3];if(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3])f.colorMask(c[0],c[1],c[2],c[3]),m[0]=c[0],m[1]=c[1],m[2]=c[2],m[3]=c[3];ga!==O&&(f.cullFace(ga),g.cull_face=ga);T!==ra&&(f.depthFunc(T),g.depth_func=T);S!==Gb&&(f.depthMask(S),g.depth_mask=S);if(x[0]!==y[0]||x[1]!==y[1])f.depthRange(x[0],x[1]),y[0]=x[0],y[1]=x[1];Ta!==X&&(f.frontFace(Ta),g.frontFace=Ta);E!==ka&&(f.lineWidth(E),g.lineWidth=E);if(H[0]!==h[0]||H[1]!==h[1])f.polygonOffset(H[0],
H[1]),h[0]=H[0],h[1]=H[1];if(A[0]!==u[0]||A[1]!==u[1])f.sampleCoverage(A[0],A[1]),u[0]=A[0],u[1]=A[1];if(C[0]!==b[0]||C[1]!==b[1]||C[2]!==b[2]||C[3]!==b[3])f.scissor(C[0],C[1],C[2],C[3]),b[0]=C[0],b[1]=C[1],b[2]=C[2],b[3]=C[3];if(l[0]!==B[0]||l[1]!==B[1]||l[2]!==B[2])f.stencilFunc(l[0],l[1],l[2]),B[0]=l[0],B[1]=l[1],B[2]=l[2];Z!==sa&&(f.stencilMask(Z),g.stencil_mask=Z);if(L[0]!==W[0]||L[1]!==W[1]||L[2]!==W[2]||L[3]!==W[3])f.stencilOpSeparate(L[0],L[1],L[2],L[3]),W[0]=L[0],W[1]=L[1],W[2]=L[2],W[3]=
L[3];if(F[0]!==fa[0]||F[1]!==fa[1]||F[2]!==fa[2]||F[3]!==fa[3])f.stencilOpSeparate(F[0],F[1],F[2],F[3]),fa[0]=F[0],fa[1]=F[1],fa[2]=F[2],fa[3]=F[3];if(N[0]!==ba[0]||N[1]!==ba[1]||N[2]!==ba[2]||N[3]!==ba[3])f.viewport(N[0],N[1],N[2],N[3]),ba[0]=N[0],ba[1]=N[1],ba[2]=N[2],ba[3]=N[3]},refresh:function(){var a,r,J,t,ia,ua,ab,ma,za,da,ga,O,T,ra,S,Gb;g.dirty=!1;r=d.blend_enable;J=d.cull_enable;t=d.depth_enable;ia=d.dither;ua=d.polygonOffset_enable;ab=d.sample_alpha;ma=d.sample_enable;za=d.scissor_enable;
da=d.stencil_enable;ga=d.cull_face;O=d.depth_func;T=d.depth_mask;ra=d.frontFace;S=d.lineWidth;Gb=d.stencil_mask;(a=q.next)?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);q.cur=a;a=k[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=k[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),
f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=k[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=k[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,
a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=k[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=k[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):
(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=k[6];a.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=k[7];a.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),
f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=k[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=k[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=k[10];a.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=k[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=
k[12];a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=k[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=k[14];a.buffer?(f.enableVertexAttribArray(14),
f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=k[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);D.currentVAO=null;D.setVAO(D.targetVAO);r?f.enable(3042):f.disable(3042);
g.blend_enable=r;J?f.enable(2884):f.disable(2884);g.cull_enable=J;t?f.enable(2929):f.disable(2929);g.depth_enable=t;ia?f.enable(3024):f.disable(3024);g.dither=ia;ua?f.enable(32823):f.disable(32823);g.polygonOffset_enable=ua;ab?f.enable(32926):f.disable(32926);g.sample_alpha=ab;ma?f.enable(32928):f.disable(32928);g.sample_enable=ma;za?f.enable(3089):f.disable(3089);g.scissor_enable=za;da?f.enable(2960):f.disable(2960);g.stencil_enable=da;f.blendColor(n[0],n[1],n[2],n[3]);v[0]=n[0];v[1]=n[1];v[2]=n[2];
v[3]=n[3];f.blendEquationSeparate(z[0],z[1]);w[0]=z[0];w[1]=z[1];f.blendFuncSeparate(p[0],p[1],p[2],p[3]);e[0]=p[0];e[1]=p[1];e[2]=p[2];e[3]=p[3];f.colorMask(c[0],c[1],c[2],c[3]);m[0]=c[0];m[1]=c[1];m[2]=c[2];m[3]=c[3];f.cullFace(ga);g.cull_face=ga;f.depthFunc(O);g.depth_func=O;f.depthMask(T);g.depth_mask=T;f.depthRange(x[0],x[1]);y[0]=x[0];y[1]=x[1];f.frontFace(ra);g.frontFace=ra;f.lineWidth(S);g.lineWidth=S;f.polygonOffset(H[0],H[1]);h[0]=H[0];h[1]=H[1];f.sampleCoverage(A[0],A[1]);u[0]=A[0];u[1]=
A[1];f.scissor(C[0],C[1],C[2],C[3]);b[0]=C[0];b[1]=C[1];b[2]=C[2];b[3]=C[3];f.stencilFunc(l[0],l[1],l[2]);B[0]=l[0];B[1]=l[1];B[2]=l[2];f.stencilMask(Gb);g.stencil_mask=Gb;f.stencilOpSeparate(L[0],L[1],L[2],L[3]);W[0]=L[0];W[1]=L[1];W[2]=L[2];W[3]=L[3];f.stencilOpSeparate(F[0],F[1],F[2],F[3]);fa[0]=F[0];fa[1]=F[1];fa[2]=F[2];fa[3]=F[3];f.viewport(N[0],N[1],N[2],N[3]);ba[0]=N[0];ba[1]=N[1];ba[2]=N[2];ba[3]=N[3]}}},$3:function(a,k,g,q){var f,d,D,n,v,z,w,p,e,c,m,x,y,H,h,A,u,C,b,l,B,L,W,F,fa,N,ba,I,r,
J,la,ia,ua;f=a.context;d=a.current;D=a.framebuffer;n=a.gl;v=a.next;z=a.shader;w=a.vao;p=v.blend_color;e=d.blend_color;c=v.blend_equation;m=d.blend_equation;x=v.blend_func;y=d.blend_func;H=v.colorMask;h=d.colorMask;A=v.depth_range;u=d.depth_range;C=v.polygonOffset_offset;b=d.polygonOffset_offset;l=v.sample_coverage;B=d.sample_coverage;L=v.scissor_box;W=d.scissor_box;F=v.stencil_func;fa=d.stencil_func;N=v.stencil_opBack;ba=d.stencil_opBack;I=v.stencil_opFront;r=d.stencil_opFront;J=v.viewport;la=d.viewport;
ia={};ua={};return{batch:function(g,a){var f,t,ia,O,T;f=D.next;f!==D.cur&&(f?n.bindFramebuffer(36160,f.framebuffer):n.bindFramebuffer(36160,null),D.cur=f);if(d.dirty){f=v.dither;f!==d.dither&&(f?n.enable(3024):n.disable(3024),d.dither=f);f=v.blend_enable;f!==d.blend_enable&&(f?n.enable(3042):n.disable(3042),d.blend_enable=f);f=p[0];ia=p[1];O=p[2];T=p[3];if(f!==e[0]||ia!==e[1]||O!==e[2]||T!==e[3])n.blendColor(f,ia,O,T),e[0]=f,e[1]=ia,e[2]=O,e[3]=T;f=c[0];ia=c[1];if(f!==m[0]||ia!==m[1])n.blendEquationSeparate(f,
ia),m[0]=f,m[1]=ia;f=x[0];ia=x[1];O=x[2];T=x[3];if(f!==y[0]||ia!==y[1]||O!==y[2]||T!==y[3])n.blendFuncSeparate(f,ia,O,T),y[0]=f,y[1]=ia,y[2]=O,y[3]=T;f=v.depth_enable;f!==d.depth_enable&&(f?n.enable(2929):n.disable(2929),d.depth_enable=f);f=v.depth_func;f!==d.depth_func&&(n.depthFunc(f),d.depth_func=f);f=A[0];ia=A[1];if(f!==u[0]||ia!==u[1])n.depthRange(f,ia),u[0]=f,u[1]=ia;f=v.depth_mask;f!==d.depth_mask&&(n.depthMask(f),d.depth_mask=f);f=H[0];ia=H[1];O=H[2];T=H[3];if(f!==h[0]||ia!==h[1]||O!==h[2]||
T!==h[3])n.colorMask(f,ia,O,T),h[0]=f,h[1]=ia,h[2]=O,h[3]=T;f=v.cull_enable;f!==d.cull_enable&&(f?n.enable(2884):n.disable(2884),d.cull_enable=f);f=v.cull_face;f!==d.cull_face&&(n.cullFace(f),d.cull_face=f);f=v.frontFace;f!==d.frontFace&&(n.frontFace(f),d.frontFace=f);f=v.lineWidth;f!==d.lineWidth&&(n.lineWidth(f),d.lineWidth=f);f=v.polygonOffset_enable;f!==d.polygonOffset_enable&&(f?n.enable(32823):n.disable(32823),d.polygonOffset_enable=f);f=C[0];ia=C[1];if(f!==b[0]||ia!==b[1])n.polygonOffset(f,
ia),b[0]=f,b[1]=ia;f=v.sample_alpha;f!==d.sample_alpha&&(f?n.enable(32926):n.disable(32926),d.sample_alpha=f);f=v.sample_enable;f!==d.sample_enable&&(f?n.enable(32928):n.disable(32928),d.sample_enable=f);f=l[0];ia=l[1];if(f!==B[0]||ia!==B[1])n.sampleCoverage(f,ia),B[0]=f,B[1]=ia;f=v.stencil_enable;f!==d.stencil_enable&&(f?n.enable(2960):n.disable(2960),d.stencil_enable=f);f=v.stencil_mask;f!==d.stencil_mask&&(n.stencilMask(f),d.stencil_mask=f);f=F[0];ia=F[1];O=F[2];if(f!==fa[0]||ia!==fa[1]||O!==fa[2])n.stencilFunc(f,
ia,O),fa[0]=f,fa[1]=ia,fa[2]=O;f=I[0];ia=I[1];O=I[2];T=I[3];if(f!==r[0]||ia!==r[1]||O!==r[2]||T!==r[3])n.stencilOpSeparate(f,ia,O,T),r[0]=f,r[1]=ia,r[2]=O,r[3]=T;f=N[0];ia=N[1];O=N[2];T=N[3];if(f!==ba[0]||ia!==ba[1]||O!==ba[2]||T!==ba[3])n.stencilOpSeparate(f,ia,O,T),ba[0]=f,ba[1]=ia,ba[2]=O,ba[3]=T;f=v.scissor_enable;f!==d.scissor_enable&&(f?n.enable(3089):n.disable(3089),d.scissor_enable=f);f=L[0];ia=L[1];O=L[2];T=L[3];if(f!==W[0]||ia!==W[1]||O!==W[2]||T!==W[3])n.scissor(f,ia,O,T),W[0]=f,W[1]=ia,
W[2]=O,W[3]=T;f=J[0];ia=J[1];O=J[2];T=J[3];if(f!==la[0]||ia!==la[1]||O!==la[2]||T!==la[3])n.viewport(f,ia,O,T),la[0]=f,la[1]=ia,la[2]=O,la[3]=T;d.dirty=!1}if(f=d.profile)t=performance.now(),k.count+=a;ia=z.program(z.vert,z.frag);n.useProgram(ia.program);w.setVAO(null);O=ia.id;(T=ua[O])||(T=ua[O]=q(ia));T.call(this,g,a);w.setVAO(null);f&&(k.cpuTime+=performance.now()-t)},draw:function(f){var a,q,t,ua,O;a=D.next;a!==D.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),D.cur=
a);if(d.dirty){a=v.dither;a!==d.dither&&(a?n.enable(3024):n.disable(3024),d.dither=a);a=v.blend_enable;a!==d.blend_enable&&(a?n.enable(3042):n.disable(3042),d.blend_enable=a);a=p[0];t=p[1];ua=p[2];O=p[3];if(a!==e[0]||t!==e[1]||ua!==e[2]||O!==e[3])n.blendColor(a,t,ua,O),e[0]=a,e[1]=t,e[2]=ua,e[3]=O;a=c[0];t=c[1];if(a!==m[0]||t!==m[1])n.blendEquationSeparate(a,t),m[0]=a,m[1]=t;a=x[0];t=x[1];ua=x[2];O=x[3];if(a!==y[0]||t!==y[1]||ua!==y[2]||O!==y[3])n.blendFuncSeparate(a,t,ua,O),y[0]=a,y[1]=t,y[2]=ua,
y[3]=O;a=v.depth_enable;a!==d.depth_enable&&(a?n.enable(2929):n.disable(2929),d.depth_enable=a);a=v.depth_func;a!==d.depth_func&&(n.depthFunc(a),d.depth_func=a);a=A[0];t=A[1];if(a!==u[0]||t!==u[1])n.depthRange(a,t),u[0]=a,u[1]=t;a=v.depth_mask;a!==d.depth_mask&&(n.depthMask(a),d.depth_mask=a);a=H[0];t=H[1];ua=H[2];O=H[3];if(a!==h[0]||t!==h[1]||ua!==h[2]||O!==h[3])n.colorMask(a,t,ua,O),h[0]=a,h[1]=t,h[2]=ua,h[3]=O;a=v.cull_enable;a!==d.cull_enable&&(a?n.enable(2884):n.disable(2884),d.cull_enable=a);
a=v.cull_face;a!==d.cull_face&&(n.cullFace(a),d.cull_face=a);a=v.frontFace;a!==d.frontFace&&(n.frontFace(a),d.frontFace=a);a=v.lineWidth;a!==d.lineWidth&&(n.lineWidth(a),d.lineWidth=a);a=v.polygonOffset_enable;a!==d.polygonOffset_enable&&(a?n.enable(32823):n.disable(32823),d.polygonOffset_enable=a);a=C[0];t=C[1];if(a!==b[0]||t!==b[1])n.polygonOffset(a,t),b[0]=a,b[1]=t;a=v.sample_alpha;a!==d.sample_alpha&&(a?n.enable(32926):n.disable(32926),d.sample_alpha=a);a=v.sample_enable;a!==d.sample_enable&&
(a?n.enable(32928):n.disable(32928),d.sample_enable=a);a=l[0];t=l[1];if(a!==B[0]||t!==B[1])n.sampleCoverage(a,t),B[0]=a,B[1]=t;a=v.stencil_enable;a!==d.stencil_enable&&(a?n.enable(2960):n.disable(2960),d.stencil_enable=a);a=v.stencil_mask;a!==d.stencil_mask&&(n.stencilMask(a),d.stencil_mask=a);a=F[0];t=F[1];ua=F[2];if(a!==fa[0]||t!==fa[1]||ua!==fa[2])n.stencilFunc(a,t,ua),fa[0]=a,fa[1]=t,fa[2]=ua;a=I[0];t=I[1];ua=I[2];O=I[3];if(a!==r[0]||t!==r[1]||ua!==r[2]||O!==r[3])n.stencilOpSeparate(a,t,ua,O),
r[0]=a,r[1]=t,r[2]=ua,r[3]=O;a=N[0];t=N[1];ua=N[2];O=N[3];if(a!==ba[0]||t!==ba[1]||ua!==ba[2]||O!==ba[3])n.stencilOpSeparate(a,t,ua,O),ba[0]=a,ba[1]=t,ba[2]=ua,ba[3]=O;a=v.scissor_enable;a!==d.scissor_enable&&(a?n.enable(3089):n.disable(3089),d.scissor_enable=a);a=L[0];t=L[1];ua=L[2];O=L[3];if(a!==W[0]||t!==W[1]||ua!==W[2]||O!==W[3])n.scissor(a,t,ua,O),W[0]=a,W[1]=t,W[2]=ua,W[3]=O;a=J[0];t=J[1];ua=J[2];O=J[3];if(a!==la[0]||t!==la[1]||ua!==la[2]||O!==la[3])n.viewport(a,t,ua,O),la[0]=a,la[1]=t,la[2]=
ua,la[3]=O;d.dirty=!1}if(a=d.profile)q=performance.now(),k.count++;t=z.program(z.vert,z.frag);n.useProgram(t.program);w.setVAO(null);ua=t.id;(O=ia[ua])||(O=ia[ua]=g(t));O.call(this,f);w.setVAO(null);a&&(k.cpuTime+=performance.now()-q)},scope:function(b,l,c){var r,e;if(r=d.profile)e=performance.now(),k.count++;l(f,b,c);r&&(k.cpuTime+=performance.now()-e)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,H,h,A,u,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa,Xa,Cb,yb,Jc,Eb,V,R,ha,Aa,zb,Ac,Kc,P,G,oa,Ha,Y,ca,ta){var Q,M,ja,Ja,Ea,La,K,sc,Zb,qa,Jb,ub,Ae,be,ee,ke,we,ue,Fd,ie,ve,Od,Xd,Vd,Jd,Oe,Ye,Pe,Gd,ye,oe,pe,ce,Pd,wd,od,Cd,fd,zd,Wc,Id,ud,rd,Xc,eb,jd,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb;Q=a.attributes;M=a.context;ja=a.current;Ja=a.draw;Ea=a.elements;La=a.framebuffer;K=a.gl;sc=a.next;Zb=
a.shader;qa=a.uniforms;Jb=a.vao;ub=sc.blend_color;Ae=ja.blend_color;be=sc.blend_equation;ee=ja.blend_equation;ke=sc.blend_func;we=ja.blend_func;ue=sc.colorMask;Fd=ja.colorMask;ie=sc.depth_range;ve=ja.depth_range;Od=sc.polygonOffset_offset;Xd=ja.polygonOffset_offset;Vd=sc.sample_coverage;Jd=ja.sample_coverage;Oe=sc.scissor_box;Ye=ja.scissor_box;Pe=sc.stencil_func;Gd=ja.stencil_func;ye=sc.stencil_opBack;oe=ja.stencil_opBack;pe=sc.stencil_opFront;ce=ja.stencil_opFront;Pd=sc.viewport;wd=ja.viewport;od=
{};Cd={};fd=new Float32Array(16);zd=new Float32Array(16);Wc=new Float32Array(16);Id=new Float32Array(16);ud=new Float32Array(16);rd=new Float32Array(16);Xc=new Float32Array(16);eb=new Float32Array(16);jd=new Float32Array(16);Rb=new Float32Array(16);vc=new Float32Array(16);fb=new Float32Array(16);gd=new Float32Array(16);kc=new Float32Array(16);qc=new Float32Array(16);yd=new Float32Array(16);pd=new Float32Array(16);Lc=new Float32Array(16);jc=new Float32Array(16);Zc=new Float32Array(16);hd=new Float32Array(16);
ic=new Float32Array(16);Rc=new Float32Array(16);Xb=new Float32Array(16);Ra=new Float32Array(16);Ad=new Float32Array(16);lc=new Float32Array(16);rb=new Float32Array(16);Hb=new Float32Array(16);cb=new Float32Array(16);$b=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(b,l){var r,g,a,k;r=La.next;r!==La.cur&&(r?K.bindFramebuffer(36160,r.framebuffer):K.bindFramebuffer(36160,null),La.cur=r);if(ja.dirty){var B,t,J,L,W,N,la,F,C,A,ia,I,u,fa,ua,aa,ba,qa,eb,Zb,fb,ub,Rb,Ua,kc;B=ue[0];t=ue[1];
J=ue[2];L=ue[3];if(B!==Fd[0]||t!==Fd[1]||J!==Fd[2]||L!==Fd[3])K.colorMask(B,t,J,L),Fd[0]=B,Fd[1]=t,Fd[2]=J,Fd[3]=L;W=sc.frontFace;W!==ja.frontFace&&(K.frontFace(W),ja.frontFace=W);N=sc.polygonOffset_enable;N!==ja.polygonOffset_enable&&(N?K.enable(32823):K.disable(32823),ja.polygonOffset_enable=N);la=Od[0];F=Od[1];if(la!==Xd[0]||F!==Xd[1])K.polygonOffset(la,F),Xd[0]=la,Xd[1]=F;C=sc.sample_alpha;C!==ja.sample_alpha&&(C?K.enable(32926):K.disable(32926),ja.sample_alpha=C);A=sc.sample_enable;A!==ja.sample_enable&&
(A?K.enable(32928):K.disable(32928),ja.sample_enable=A);ia=Vd[0];I=Vd[1];if(ia!==Jd[0]||I!==Jd[1])K.sampleCoverage(ia,I),Jd[0]=ia,Jd[1]=I;u=sc.stencil_enable;u!==ja.stencil_enable&&(u?K.enable(2960):K.disable(2960),ja.stencil_enable=u);fa=sc.stencil_mask;fa!==ja.stencil_mask&&(K.stencilMask(fa),ja.stencil_mask=fa);ua=Pe[0];aa=Pe[1];ba=Pe[2];if(ua!==Gd[0]||aa!==Gd[1]||ba!==Gd[2])K.stencilFunc(ua,aa,ba),Gd[0]=ua,Gd[1]=aa,Gd[2]=ba;qa=pe[0];eb=pe[1];Zb=pe[2];fb=pe[3];if(qa!==ce[0]||eb!==ce[1]||Zb!==ce[2]||
fb!==ce[3])K.stencilOpSeparate(qa,eb,Zb,fb),ce[0]=qa,ce[1]=eb,ce[2]=Zb,ce[3]=fb;ub=ye[0];Rb=ye[1];Ua=ye[2];kc=ye[3];if(ub!==oe[0]||Rb!==oe[1]||Ua!==oe[2]||kc!==oe[3])K.stencilOpSeparate(ub,Rb,Ua,kc),oe[0]=ub,oe[1]=Rb,oe[2]=Ua,oe[3]=kc}K.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;K.disable(3042);ja.blend_enable=!1;K.blendEquationSeparate(32774,32774);ee[0]=32774;ee[1]=32774;K.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;K.enable(2884);ja.cull_enable=!0;K.cullFace(1029);
ja.cull_face=1029;K.enable(2929);ja.depth_enable=!0;K.depthFunc(513);ja.depth_func=513;K.depthMask(!0);ja.depth_mask=!0;K.depthRange(0,1);ve[0]=0;ve[1]=1;K.disable(3024);ja.dither=!1;K.lineWidth(2);ja.lineWidth=2;K.enable(3089);ja.scissor_enable=!0;g=ja.profile;ja.profile=!1;K.useProgram(ab.program);var rd,ud,Xc,Ca,Oe,Ma,Wc,hb,jb,xa,gd,Da,ob,pb,Za,$a,jd,qc,zd,Ya,Mb,vc,Fa,fd,Va,Ba,mb,sb,Ab,qb,Id,tb,ke;Jb.setVAO(null);rd=Xa.location;ud=Q[rd];ud.buffer||K.enableVertexAttribArray(rd);if(ud.type!==q.dtype||
4!==ud.size||ud.buffer!==q||!1!==ud.normalized||0!==ud.offset||0!==ud.stride)K.bindBuffer(34962,q.buffer),K.vertexAttribPointer(rd,4,q.dtype,!1,0,0),ud.type=q.dtype,ud.size=4,ud.buffer=q,ud.normalized=!1,ud.offset=0,ud.stride=0;Xc=Cb.location;Ca=Q[Xc];Ca.buffer||K.enableVertexAttribArray(Xc);if(Ca.type!==f.dtype||4!==Ca.size||Ca.buffer!==f||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)K.bindBuffer(34962,f.buffer),K.vertexAttribPointer(Xc,4,f.dtype,!1,0,0),Ca.type=f.dtype,Ca.size=4,Ca.buffer=f,
Ca.normalized=!1,Ca.offset=0,Ca.stride=0;Oe=yb.location;Ma=Q[Oe];Ma.buffer||K.enableVertexAttribArray(Oe);if(Ma.type!==d.dtype||4!==Ma.size||Ma.buffer!==d||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)K.bindBuffer(34962,d.buffer),K.vertexAttribPointer(Oe,4,d.dtype,!1,0,0),Ma.type=d.dtype,Ma.size=4,Ma.buffer=d,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;Wc=Jc.location;hb=Q[Wc];hb.buffer||K.enableVertexAttribArray(Wc);if(hb.type!==D.dtype||4!==hb.size||hb.buffer!==D||!1!==hb.normalized||0!==hb.offset||
0!==hb.stride)K.bindBuffer(34962,D.buffer),K.vertexAttribPointer(Wc,4,D.dtype,!1,0,0),hb.type=D.dtype,hb.size=4,hb.buffer=D,hb.normalized=!1,hb.offset=0,hb.stride=0;jb=Eb.location;xa=Q[jb];xa.buffer||K.enableVertexAttribArray(jb);if(xa.type!==n.dtype||4!==xa.size||xa.buffer!==n||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)K.bindBuffer(34962,n.buffer),K.vertexAttribPointer(jb,4,n.dtype,!1,0,0),xa.type=n.dtype,xa.size=4,xa.buffer=n,xa.normalized=!1,xa.offset=0,xa.stride=0;gd=V.location;Da=Q[gd];
Da.buffer||K.enableVertexAttribArray(gd);if(Da.type!==v.dtype||4!==Da.size||Da.buffer!==v||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)K.bindBuffer(34962,v.buffer),K.vertexAttribPointer(gd,4,v.dtype,!1,0,0),Da.type=v.dtype,Da.size=4,Da.buffer=v,Da.normalized=!1,Da.offset=0,Da.stride=0;ob=R.location;pb=Q[ob];pb.buffer||K.enableVertexAttribArray(ob);if(pb.type!==z.dtype||4!==pb.size||pb.buffer!==z||!1!==pb.normalized||0!==pb.offset||0!==pb.stride)K.bindBuffer(34962,z.buffer),K.vertexAttribPointer(ob,
4,z.dtype,!1,0,0),pb.type=z.dtype,pb.size=4,pb.buffer=z,pb.normalized=!1,pb.offset=0,pb.stride=0;Za=ha.location;$a=Q[Za];$a.buffer||K.enableVertexAttribArray(Za);if($a.type!==w.dtype||4!==$a.size||$a.buffer!==w||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)K.bindBuffer(34962,w.buffer),K.vertexAttribPointer(Za,4,w.dtype,!1,0,0),$a.type=w.dtype,$a.size=4,$a.buffer=w,$a.normalized=!1,$a.offset=0,$a.stride=0;jd=Aa.location;qc=Q[jd];qc.buffer||K.enableVertexAttribArray(jd);if(qc.type!==p.dtype||4!==
qc.size||qc.buffer!==p||!1!==qc.normalized||0!==qc.offset||0!==qc.stride)K.bindBuffer(34962,p.buffer),K.vertexAttribPointer(jd,4,p.dtype,!1,0,0),qc.type=p.dtype,qc.size=4,qc.buffer=p,qc.normalized=!1,qc.offset=0,qc.stride=0;zd=zb.location;Ya=Q[zd];Ya.buffer||K.enableVertexAttribArray(zd);if(Ya.type!==e.dtype||4!==Ya.size||Ya.buffer!==e||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)K.bindBuffer(34962,e.buffer),K.vertexAttribPointer(zd,4,e.dtype,!1,0,0),Ya.type=e.dtype,Ya.size=4,Ya.buffer=e,Ya.normalized=
!1,Ya.offset=0,Ya.stride=0;Mb=Ac.location;vc=Q[Mb];vc.buffer||K.enableVertexAttribArray(Mb);if(vc.type!==c.dtype||4!==vc.size||vc.buffer!==c||!1!==vc.normalized||0!==vc.offset||0!==vc.stride)K.bindBuffer(34962,c.buffer),K.vertexAttribPointer(Mb,4,c.dtype,!1,0,0),vc.type=c.dtype,vc.size=4,vc.buffer=c,vc.normalized=!1,vc.offset=0,vc.stride=0;Fa=Kc.location;fd=Q[Fa];fd.buffer||K.enableVertexAttribArray(Fa);if(fd.type!==m.dtype||4!==fd.size||fd.buffer!==m||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)K.bindBuffer(34962,
m.buffer),K.vertexAttribPointer(Fa,4,m.dtype,!1,0,0),fd.type=m.dtype,fd.size=4,fd.buffer=m,fd.normalized=!1,fd.offset=0,fd.stride=0;Va=P.location;Ba=Q[Va];Ba.buffer||K.enableVertexAttribArray(Va);if(Ba.type!==x.dtype||4!==Ba.size||Ba.buffer!==x||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)K.bindBuffer(34962,x.buffer),K.vertexAttribPointer(Va,4,x.dtype,!1,0,0),Ba.type=x.dtype,Ba.size=4,Ba.buffer=x,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;mb=G.location;sb=Q[mb];sb.buffer||K.enableVertexAttribArray(mb);
if(sb.type!==y.dtype||4!==sb.size||sb.buffer!==y||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)K.bindBuffer(34962,y.buffer),K.vertexAttribPointer(mb,4,y.dtype,!1,0,0),sb.type=y.dtype,sb.size=4,sb.buffer=y,sb.normalized=!1,sb.offset=0,sb.stride=0;Ab=oa.location;qb=Q[Ab];qb.buffer||K.enableVertexAttribArray(Ab);if(qb.type!==H.dtype||4!==qb.size||qb.buffer!==H||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)K.bindBuffer(34962,H.buffer),K.vertexAttribPointer(Ab,4,H.dtype,!1,0,0),qb.type=H.dtype,
qb.size=4,qb.buffer=H,qb.normalized=!1,qb.offset=0,qb.stride=0;Id=za.location;tb=Q[Id];tb.buffer||K.enableVertexAttribArray(Id);if(tb.type!==h.dtype||4!==tb.size||tb.buffer!==h||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)K.bindBuffer(34962,h.buffer),K.vertexAttribPointer(Id,4,h.dtype,!1,0,0),tb.type=h.dtype,tb.size=4,tb.buffer=h,tb.normalized=!1,tb.offset=0,tb.stride=0;K.uniform1i(Ha.location,ma.bind());(ke=Ja.elements)?K.bindBuffer(34963,ke.buffer.buffer):Jb.currentVAO&&(ke=Ea.getElements(Jb.currentVAO.elements))&&
K.bindBuffer(34963,ke.buffer.buffer);for(a=0;a<l;++a){k=b[a];var ie,Pd,yd,be,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,wf,Bd,Qe,Ke,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d;od.height=k.viewportHeight;od.width=k.viewportWidth;od.x=k.viewportX;od.y=k.viewportY;ie=od.x|0;Pd=od.y|0;yd="width"in od?od.width|0:M.framebufferWidth-ie;be="height"in od?od.height|0:M.framebufferHeight-Pd;dd=M.viewportWidth;M.viewportWidth=yd;Yb=M.viewportHeight;
M.viewportHeight=be;K.viewport(ie,Pd,yd,be);wd[0]=ie;wd[1]=Pd;wd[2]=yd;wd[3]=be;Cd.height=k.scissorHeight;Cd.width=k.scissorWidth;Cd.x=k.scissorX;Cd.y=k.scissorY;dc=Cd.x|0;Pb=Cd.y|0;Ga="width"in Cd?Cd.width|0:M.framebufferWidth-dc;bc="height"in Cd?Cd.height|0:M.framebufferHeight-Pb;K.scissor(dc,Pb,Ga,bc);Ye[0]=dc;Ye[1]=Pb;Ye[2]=Ga;Ye[3]=bc;wb=k.dim0A;K.uniformMatrix4fv(ga.location,!1,Array.isArray(wb)||wb instanceof Float32Array?wb:(pd[0]=wb[0],pd[1]=wb[1],pd[2]=wb[2],pd[3]=wb[3],pd[4]=wb[4],pd[5]=
wb[5],pd[6]=wb[6],pd[7]=wb[7],pd[8]=wb[8],pd[9]=wb[9],pd[10]=wb[10],pd[11]=wb[11],pd[12]=wb[12],pd[13]=wb[13],pd[14]=wb[14],pd[15]=wb[15],pd));Bb=k.dim1A;K.uniformMatrix4fv(S.location,!1,Array.isArray(Bb)||Bb instanceof Float32Array?Bb:(Lc[0]=Bb[0],Lc[1]=Bb[1],Lc[2]=Bb[2],Lc[3]=Bb[3],Lc[4]=Bb[4],Lc[5]=Bb[5],Lc[6]=Bb[6],Lc[7]=Bb[7],Lc[8]=Bb[8],Lc[9]=Bb[9],Lc[10]=Bb[10],Lc[11]=Bb[11],Lc[12]=Bb[12],Lc[13]=Bb[13],Lc[14]=Bb[14],Lc[15]=Bb[15],Lc));Nb=k.dim0B;K.uniformMatrix4fv(O.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(jc[0]=Nb[0],jc[1]=Nb[1],jc[2]=Nb[2],jc[3]=Nb[3],jc[4]=Nb[4],jc[5]=Nb[5],jc[6]=Nb[6],jc[7]=Nb[7],jc[8]=Nb[8],jc[9]=Nb[9],jc[10]=Nb[10],jc[11]=Nb[11],jc[12]=Nb[12],jc[13]=Nb[13],jc[14]=Nb[14],jc[15]=Nb[15],jc));Qb=k.dim1B;K.uniformMatrix4fv(Gb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Zc[0]=Qb[0],Zc[1]=Qb[1],Zc[2]=Qb[2],Zc[3]=Qb[3],Zc[4]=Qb[4],Zc[5]=Qb[5],Zc[6]=Qb[6],Zc[7]=Qb[7],Zc[8]=Qb[8],Zc[9]=Qb[9],Zc[10]=Qb[10],Zc[11]=Qb[11],Zc[12]=Qb[12],Zc[13]=
Qb[13],Zc[14]=Qb[14],Zc[15]=Qb[15],Zc));fc=k.dim0C;K.uniformMatrix4fv(T.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(hd[0]=fc[0],hd[1]=fc[1],hd[2]=fc[2],hd[3]=fc[3],hd[4]=fc[4],hd[5]=fc[5],hd[6]=fc[6],hd[7]=fc[7],hd[8]=fc[8],hd[9]=fc[9],hd[10]=fc[10],hd[11]=fc[11],hd[12]=fc[12],hd[13]=fc[13],hd[14]=fc[14],hd[15]=fc[15],hd));hc=k.dim1C;K.uniformMatrix4fv(Ta.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(ic[0]=hc[0],ic[1]=hc[1],ic[2]=hc[2],ic[3]=hc[3],ic[4]=hc[4],ic[5]=
hc[5],ic[6]=hc[6],ic[7]=hc[7],ic[8]=hc[8],ic[9]=hc[9],ic[10]=hc[10],ic[11]=hc[11],ic[12]=hc[12],ic[13]=hc[13],ic[14]=hc[14],ic[15]=hc[15],ic));Tc=k.dim0D;K.uniformMatrix4fv(ra.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?Tc:(Rc[0]=Tc[0],Rc[1]=Tc[1],Rc[2]=Tc[2],Rc[3]=Tc[3],Rc[4]=Tc[4],Rc[5]=Tc[5],Rc[6]=Tc[6],Rc[7]=Tc[7],Rc[8]=Tc[8],Rc[9]=Tc[9],Rc[10]=Tc[10],Rc[11]=Tc[11],Rc[12]=Tc[12],Rc[13]=Tc[13],Rc[14]=Tc[14],Rc[15]=Tc[15],Rc));Bc=k.dim1D;K.uniformMatrix4fv(X.location,!1,Array.isArray(Bc)||
Bc instanceof Float32Array?Bc:(Xb[0]=Bc[0],Xb[1]=Bc[1],Xb[2]=Bc[2],Xb[3]=Bc[3],Xb[4]=Bc[4],Xb[5]=Bc[5],Xb[6]=Bc[6],Xb[7]=Bc[7],Xb[8]=Bc[8],Xb[9]=Bc[9],Xb[10]=Bc[10],Xb[11]=Bc[11],Xb[12]=Bc[12],Xb[13]=Bc[13],Xb[14]=Bc[14],Xb[15]=Bc[15],Xb));Cc=k.loA;K.uniformMatrix4fv(Qa.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(Ra[0]=Cc[0],Ra[1]=Cc[1],Ra[2]=Cc[2],Ra[3]=Cc[3],Ra[4]=Cc[4],Ra[5]=Cc[5],Ra[6]=Cc[6],Ra[7]=Cc[7],Ra[8]=Cc[8],Ra[9]=Cc[9],Ra[10]=Cc[10],Ra[11]=Cc[11],Ra[12]=Cc[12],Ra[13]=
Cc[13],Ra[14]=Cc[14],Ra[15]=Cc[15],Ra));Fc=k.hiA;K.uniformMatrix4fv(ka.location,!1,Array.isArray(Fc)||Fc instanceof Float32Array?Fc:(Ad[0]=Fc[0],Ad[1]=Fc[1],Ad[2]=Fc[2],Ad[3]=Fc[3],Ad[4]=Fc[4],Ad[5]=Fc[5],Ad[6]=Fc[6],Ad[7]=Fc[7],Ad[8]=Fc[8],Ad[9]=Fc[9],Ad[10]=Fc[10],Ad[11]=Fc[11],Ad[12]=Fc[12],Ad[13]=Fc[13],Ad[14]=Fc[14],Ad[15]=Fc[15],Ad));Oc=k.loB;K.uniformMatrix4fv(Ka.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(lc[0]=Oc[0],lc[1]=Oc[1],lc[2]=Oc[2],lc[3]=Oc[3],lc[4]=Oc[4],lc[5]=
Oc[5],lc[6]=Oc[6],lc[7]=Oc[7],lc[8]=Oc[8],lc[9]=Oc[9],lc[10]=Oc[10],lc[11]=Oc[11],lc[12]=Oc[12],lc[13]=Oc[13],lc[14]=Oc[14],lc[15]=Oc[15],lc));ed=k.hiB;K.uniformMatrix4fv(Z.location,!1,Array.isArray(ed)||ed instanceof Float32Array?ed:(rb[0]=ed[0],rb[1]=ed[1],rb[2]=ed[2],rb[3]=ed[3],rb[4]=ed[4],rb[5]=ed[5],rb[6]=ed[6],rb[7]=ed[7],rb[8]=ed[8],rb[9]=ed[9],rb[10]=ed[10],rb[11]=ed[11],rb[12]=ed[12],rb[13]=ed[13],rb[14]=ed[14],rb[15]=ed[15],rb));Uc=k.loC;K.uniformMatrix4fv(U.location,!1,Array.isArray(Uc)||
Uc instanceof Float32Array?Uc:(Hb[0]=Uc[0],Hb[1]=Uc[1],Hb[2]=Uc[2],Hb[3]=Uc[3],Hb[4]=Uc[4],Hb[5]=Uc[5],Hb[6]=Uc[6],Hb[7]=Uc[7],Hb[8]=Uc[8],Hb[9]=Uc[9],Hb[10]=Uc[10],Hb[11]=Uc[11],Hb[12]=Uc[12],Hb[13]=Uc[13],Hb[14]=Uc[14],Hb[15]=Uc[15],Hb));Pc=k.hiC;K.uniformMatrix4fv(sa.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(cb[0]=Pc[0],cb[1]=Pc[1],cb[2]=Pc[2],cb[3]=Pc[3],cb[4]=Pc[4],cb[5]=Pc[5],cb[6]=Pc[6],cb[7]=Pc[7],cb[8]=Pc[8],cb[9]=Pc[9],cb[10]=Pc[10],cb[11]=Pc[11],cb[12]=Pc[12],cb[13]=
Pc[13],cb[14]=Pc[14],cb[15]=Pc[15],cb));Wb=k.loD;K.uniformMatrix4fv(Na.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:($b[0]=Wb[0],$b[1]=Wb[1],$b[2]=Wb[2],$b[3]=Wb[3],$b[4]=Wb[4],$b[5]=Wb[5],$b[6]=Wb[6],$b[7]=Wb[7],$b[8]=Wb[8],$b[9]=Wb[9],$b[10]=Wb[10],$b[11]=Wb[11],$b[12]=Wb[12],$b[13]=Wb[13],$b[14]=Wb[14],$b[15]=Wb[15],$b));Db=k.hiD;K.uniformMatrix4fv(wa.location,!1,Array.isArray(Db)||Db instanceof Float32Array?Db:(Sb[0]=Db[0],Sb[1]=Db[1],Sb[2]=Db[2],Sb[3]=Db[3],Sb[4]=Db[4],Sb[5]=
Db[5],Sb[6]=Db[6],Sb[7]=Db[7],Sb[8]=Db[8],Sb[9]=Db[9],Sb[10]=Db[10],Sb[11]=Db[11],Sb[12]=Db[12],Sb[13]=Db[13],Sb[14]=Db[14],Sb[15]=Db[15],Sb));Qc=k.resolution;Ic=Qc[0];gc=Qc[1];a&&Vc===Ic&&$c===gc||(Vc=Ic,$c=gc,K.uniform2f(Y.location,Ic,gc));id=k.viewBoxPos;qd=id[0];ad=id[1];a&&vd===qd&&wf===ad||(vd=qd,wf=ad,K.uniform2f(ca.location,qd,ad));Bd=k.viewBoxSize;Qe=Bd[0];le=Bd[1];a&&Ke===Qe&&Md===le||(Ke=Qe,Md=le,K.uniform2f(ta.location,Qe,le));Kd=k.maskHeight;a&&ld===Kd||(ld=Kd,K.uniform1f(ea.location,
Kd));Gc=k.drwLayer;a&&td===Gc||(td=Gc,K.uniform1f(E.location,Gc));md=k.contextColor;bd=md[0];Dd=md[1];te=md[2];Ze=md[3];a&&nd===bd&&Ed===Dd&&xe===te&&me===Ze||(nd=bd,Ed=Dd,xe=te,me=Ze,K.uniform4f(da.location,bd,Dd,te,Ze));(fe=k.maskTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);de=fe._texture;K.uniform1i(pa.location,de.bind());qe=k.offset;if($d=k.count)ke?K.drawElements(1,$d,ke.type,qe<<(ke.type-5121>>1)):K.drawArrays(1,qe,$d),M.viewportWidth=dd,M.viewportHeight=Yb,de.unbind()}ma.unbind();
ja.dirty=!0;Jb.setVAO(null);ja.profile=g},draw:function(b){var l,r,a,k,B,t;l=La.next;l!==La.cur&&(l?K.bindFramebuffer(36160,l.framebuffer):K.bindFramebuffer(36160,null),La.cur=l);if(ja.dirty){l=ue[0];t=ue[1];r=ue[2];a=ue[3];if(l!==Fd[0]||t!==Fd[1]||r!==Fd[2]||a!==Fd[3])K.colorMask(l,t,r,a),Fd[0]=l,Fd[1]=t,Fd[2]=r,Fd[3]=a;l=sc.frontFace;l!==ja.frontFace&&(K.frontFace(l),ja.frontFace=l);l=sc.polygonOffset_enable;l!==ja.polygonOffset_enable&&(l?K.enable(32823):K.disable(32823),ja.polygonOffset_enable=
l);l=Od[0];t=Od[1];if(l!==Xd[0]||t!==Xd[1])K.polygonOffset(l,t),Xd[0]=l,Xd[1]=t;l=sc.sample_alpha;l!==ja.sample_alpha&&(l?K.enable(32926):K.disable(32926),ja.sample_alpha=l);l=sc.sample_enable;l!==ja.sample_enable&&(l?K.enable(32928):K.disable(32928),ja.sample_enable=l);l=Vd[0];t=Vd[1];if(l!==Jd[0]||t!==Jd[1])K.sampleCoverage(l,t),Jd[0]=l,Jd[1]=t;l=sc.stencil_enable;l!==ja.stencil_enable&&(l?K.enable(2960):K.disable(2960),ja.stencil_enable=l);l=sc.stencil_mask;l!==ja.stencil_mask&&(K.stencilMask(l),
ja.stencil_mask=l);l=Pe[0];t=Pe[1];r=Pe[2];if(l!==Gd[0]||t!==Gd[1]||r!==Gd[2])K.stencilFunc(l,t,r),Gd[0]=l,Gd[1]=t,Gd[2]=r;l=pe[0];t=pe[1];r=pe[2];a=pe[3];if(l!==ce[0]||t!==ce[1]||r!==ce[2]||a!==ce[3])K.stencilOpSeparate(l,t,r,a),ce[0]=l,ce[1]=t,ce[2]=r,ce[3]=a;l=ye[0];t=ye[1];r=ye[2];a=ye[3];if(l!==oe[0]||t!==oe[1]||r!==oe[2]||a!==oe[3])K.stencilOpSeparate(l,t,r,a),oe[0]=l,oe[1]=t,oe[2]=r,oe[3]=a}od.height=b.viewportHeight;od.width=b.viewportWidth;od.x=b.viewportX;od.y=b.viewportY;r=od.x|0;a=od.y|
0;k="width"in od?od.width|0:M.framebufferWidth-r;B="height"in od?od.height|0:M.framebufferHeight-a;l=M.viewportWidth;M.viewportWidth=k;t=M.viewportHeight;M.viewportHeight=B;K.viewport(r,a,k,B);wd[0]=r;wd[1]=a;wd[2]=k;wd[3]=B;K.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;K.disable(3042);ja.blend_enable=!1;K.blendEquationSeparate(32774,32774);ee[0]=32774;ee[1]=32774;K.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;K.enable(2884);ja.cull_enable=!0;K.cullFace(1029);ja.cull_face=
1029;K.enable(2929);ja.depth_enable=!0;K.depthFunc(513);ja.depth_func=513;K.depthMask(!0);ja.depth_mask=!0;K.depthRange(0,1);ve[0]=0;ve[1]=1;K.disable(3024);ja.dither=!1;K.lineWidth(2);ja.lineWidth=2;Cd.height=b.scissorHeight;Cd.width=b.scissorWidth;Cd.x=b.scissorX;Cd.y=b.scissorY;r=Cd.x|0;a=Cd.y|0;k="width"in Cd?Cd.width|0:M.framebufferWidth-r;B="height"in Cd?Cd.height|0:M.framebufferHeight-a;K.scissor(r,a,k,B);Ye[0]=r;Ye[1]=a;Ye[2]=k;Ye[3]=B;K.enable(3089);ja.scissor_enable=!0;r=ja.profile;ja.profile=
!1;K.useProgram(g.program);Jb.setVAO(null);a=Xa.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==q.dtype||4!==k.size||k.buffer!==q||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,q.buffer),K.vertexAttribPointer(a,4,q.dtype,!1,0,0),k.type=q.dtype,k.size=4,k.buffer=q,k.normalized=!1,k.offset=0,k.stride=0;a=Cb.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==f.dtype||4!==k.size||k.buffer!==f||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,
f.buffer),K.vertexAttribPointer(a,4,f.dtype,!1,0,0),k.type=f.dtype,k.size=4,k.buffer=f,k.normalized=!1,k.offset=0,k.stride=0;a=yb.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==d.dtype||4!==k.size||k.buffer!==d||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,d.buffer),K.vertexAttribPointer(a,4,d.dtype,!1,0,0),k.type=d.dtype,k.size=4,k.buffer=d,k.normalized=!1,k.offset=0,k.stride=0;a=Jc.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==D.dtype||
4!==k.size||k.buffer!==D||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,D.buffer),K.vertexAttribPointer(a,4,D.dtype,!1,0,0),k.type=D.dtype,k.size=4,k.buffer=D,k.normalized=!1,k.offset=0,k.stride=0;a=Eb.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==n.dtype||4!==k.size||k.buffer!==n||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,n.buffer),K.vertexAttribPointer(a,4,n.dtype,!1,0,0),k.type=n.dtype,k.size=4,k.buffer=n,k.normalized=!1,k.offset=0,
k.stride=0;a=V.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==v.dtype||4!==k.size||k.buffer!==v||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,v.buffer),K.vertexAttribPointer(a,4,v.dtype,!1,0,0),k.type=v.dtype,k.size=4,k.buffer=v,k.normalized=!1,k.offset=0,k.stride=0;a=R.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==z.dtype||4!==k.size||k.buffer!==z||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,z.buffer),K.vertexAttribPointer(a,
4,z.dtype,!1,0,0),k.type=z.dtype,k.size=4,k.buffer=z,k.normalized=!1,k.offset=0,k.stride=0;a=ha.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==w.dtype||4!==k.size||k.buffer!==w||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,w.buffer),K.vertexAttribPointer(a,4,w.dtype,!1,0,0),k.type=w.dtype,k.size=4,k.buffer=w,k.normalized=!1,k.offset=0,k.stride=0;a=Aa.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==p.dtype||4!==k.size||k.buffer!==p||!1!==k.normalized||
0!==k.offset||0!==k.stride)K.bindBuffer(34962,p.buffer),K.vertexAttribPointer(a,4,p.dtype,!1,0,0),k.type=p.dtype,k.size=4,k.buffer=p,k.normalized=!1,k.offset=0,k.stride=0;a=zb.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,e.buffer),K.vertexAttribPointer(a,4,e.dtype,!1,0,0),k.type=e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;a=Ac.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);
if(k.type!==c.dtype||4!==k.size||k.buffer!==c||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,c.buffer),K.vertexAttribPointer(a,4,c.dtype,!1,0,0),k.type=c.dtype,k.size=4,k.buffer=c,k.normalized=!1,k.offset=0,k.stride=0;a=Kc.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==m.dtype||4!==k.size||k.buffer!==m||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,m.buffer),K.vertexAttribPointer(a,4,m.dtype,!1,0,0),k.type=m.dtype,k.size=4,k.buffer=m,k.normalized=
!1,k.offset=0,k.stride=0;a=P.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==x.dtype||4!==k.size||k.buffer!==x||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,x.buffer),K.vertexAttribPointer(a,4,x.dtype,!1,0,0),k.type=x.dtype,k.size=4,k.buffer=x,k.normalized=!1,k.offset=0,k.stride=0;a=G.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==y.dtype||4!==k.size||k.buffer!==y||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,y.buffer),
K.vertexAttribPointer(a,4,y.dtype,!1,0,0),k.type=y.dtype,k.size=4,k.buffer=y,k.normalized=!1,k.offset=0,k.stride=0;a=oa.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==H.dtype||4!==k.size||k.buffer!==H||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,H.buffer),K.vertexAttribPointer(a,4,H.dtype,!1,0,0),k.type=H.dtype,k.size=4,k.buffer=H,k.normalized=!1,k.offset=0,k.stride=0;a=za.location;k=Q[a];k.buffer||K.enableVertexAttribArray(a);if(k.type!==h.dtype||4!==k.size||
k.buffer!==h||!1!==k.normalized||0!==k.offset||0!==k.stride)K.bindBuffer(34962,h.buffer),K.vertexAttribPointer(a,4,h.dtype,!1,0,0),k.type=h.dtype,k.size=4,k.buffer=h,k.normalized=!1,k.offset=0,k.stride=0;a=b.dim0A;K.uniformMatrix4fv(ga.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(fd[0]=a[0],fd[1]=a[1],fd[2]=a[2],fd[3]=a[3],fd[4]=a[4],fd[5]=a[5],fd[6]=a[6],fd[7]=a[7],fd[8]=a[8],fd[9]=a[9],fd[10]=a[10],fd[11]=a[11],fd[12]=a[12],fd[13]=a[13],fd[14]=a[14],fd[15]=a[15],fd));a=b.dim1A;K.uniformMatrix4fv(S.location,
!1,Array.isArray(a)||a instanceof Float32Array?a:(zd[0]=a[0],zd[1]=a[1],zd[2]=a[2],zd[3]=a[3],zd[4]=a[4],zd[5]=a[5],zd[6]=a[6],zd[7]=a[7],zd[8]=a[8],zd[9]=a[9],zd[10]=a[10],zd[11]=a[11],zd[12]=a[12],zd[13]=a[13],zd[14]=a[14],zd[15]=a[15],zd));a=b.dim0B;K.uniformMatrix4fv(O.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Wc[0]=a[0],Wc[1]=a[1],Wc[2]=a[2],Wc[3]=a[3],Wc[4]=a[4],Wc[5]=a[5],Wc[6]=a[6],Wc[7]=a[7],Wc[8]=a[8],Wc[9]=a[9],Wc[10]=a[10],Wc[11]=a[11],Wc[12]=a[12],Wc[13]=a[13],Wc[14]=
a[14],Wc[15]=a[15],Wc));a=b.dim1B;K.uniformMatrix4fv(Gb.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Id[0]=a[0],Id[1]=a[1],Id[2]=a[2],Id[3]=a[3],Id[4]=a[4],Id[5]=a[5],Id[6]=a[6],Id[7]=a[7],Id[8]=a[8],Id[9]=a[9],Id[10]=a[10],Id[11]=a[11],Id[12]=a[12],Id[13]=a[13],Id[14]=a[14],Id[15]=a[15],Id));a=b.dim0C;K.uniformMatrix4fv(T.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(ud[0]=a[0],ud[1]=a[1],ud[2]=a[2],ud[3]=a[3],ud[4]=a[4],ud[5]=a[5],ud[6]=a[6],ud[7]=a[7],ud[8]=a[8],ud[9]=
a[9],ud[10]=a[10],ud[11]=a[11],ud[12]=a[12],ud[13]=a[13],ud[14]=a[14],ud[15]=a[15],ud));a=b.dim1C;K.uniformMatrix4fv(Ta.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(rd[0]=a[0],rd[1]=a[1],rd[2]=a[2],rd[3]=a[3],rd[4]=a[4],rd[5]=a[5],rd[6]=a[6],rd[7]=a[7],rd[8]=a[8],rd[9]=a[9],rd[10]=a[10],rd[11]=a[11],rd[12]=a[12],rd[13]=a[13],rd[14]=a[14],rd[15]=a[15],rd));a=b.dim0D;K.uniformMatrix4fv(ra.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Xc[0]=a[0],Xc[1]=a[1],Xc[2]=a[2],Xc[3]=
a[3],Xc[4]=a[4],Xc[5]=a[5],Xc[6]=a[6],Xc[7]=a[7],Xc[8]=a[8],Xc[9]=a[9],Xc[10]=a[10],Xc[11]=a[11],Xc[12]=a[12],Xc[13]=a[13],Xc[14]=a[14],Xc[15]=a[15],Xc));a=b.dim1D;K.uniformMatrix4fv(X.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(eb[0]=a[0],eb[1]=a[1],eb[2]=a[2],eb[3]=a[3],eb[4]=a[4],eb[5]=a[5],eb[6]=a[6],eb[7]=a[7],eb[8]=a[8],eb[9]=a[9],eb[10]=a[10],eb[11]=a[11],eb[12]=a[12],eb[13]=a[13],eb[14]=a[14],eb[15]=a[15],eb));a=b.loA;K.uniformMatrix4fv(Qa.location,!1,Array.isArray(a)||a instanceof
Float32Array?a:(jd[0]=a[0],jd[1]=a[1],jd[2]=a[2],jd[3]=a[3],jd[4]=a[4],jd[5]=a[5],jd[6]=a[6],jd[7]=a[7],jd[8]=a[8],jd[9]=a[9],jd[10]=a[10],jd[11]=a[11],jd[12]=a[12],jd[13]=a[13],jd[14]=a[14],jd[15]=a[15],jd));a=b.hiA;K.uniformMatrix4fv(ka.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Rb[0]=a[0],Rb[1]=a[1],Rb[2]=a[2],Rb[3]=a[3],Rb[4]=a[4],Rb[5]=a[5],Rb[6]=a[6],Rb[7]=a[7],Rb[8]=a[8],Rb[9]=a[9],Rb[10]=a[10],Rb[11]=a[11],Rb[12]=a[12],Rb[13]=a[13],Rb[14]=a[14],Rb[15]=a[15],Rb));a=b.loB;K.uniformMatrix4fv(Ka.location,
!1,Array.isArray(a)||a instanceof Float32Array?a:(vc[0]=a[0],vc[1]=a[1],vc[2]=a[2],vc[3]=a[3],vc[4]=a[4],vc[5]=a[5],vc[6]=a[6],vc[7]=a[7],vc[8]=a[8],vc[9]=a[9],vc[10]=a[10],vc[11]=a[11],vc[12]=a[12],vc[13]=a[13],vc[14]=a[14],vc[15]=a[15],vc));a=b.hiB;K.uniformMatrix4fv(Z.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(fb[0]=a[0],fb[1]=a[1],fb[2]=a[2],fb[3]=a[3],fb[4]=a[4],fb[5]=a[5],fb[6]=a[6],fb[7]=a[7],fb[8]=a[8],fb[9]=a[9],fb[10]=a[10],fb[11]=a[11],fb[12]=a[12],fb[13]=a[13],fb[14]=a[14],
fb[15]=a[15],fb));a=b.loC;K.uniformMatrix4fv(U.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(gd[0]=a[0],gd[1]=a[1],gd[2]=a[2],gd[3]=a[3],gd[4]=a[4],gd[5]=a[5],gd[6]=a[6],gd[7]=a[7],gd[8]=a[8],gd[9]=a[9],gd[10]=a[10],gd[11]=a[11],gd[12]=a[12],gd[13]=a[13],gd[14]=a[14],gd[15]=a[15],gd));a=b.hiC;K.uniformMatrix4fv(sa.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(kc[0]=a[0],kc[1]=a[1],kc[2]=a[2],kc[3]=a[3],kc[4]=a[4],kc[5]=a[5],kc[6]=a[6],kc[7]=a[7],kc[8]=a[8],kc[9]=a[9],kc[10]=
a[10],kc[11]=a[11],kc[12]=a[12],kc[13]=a[13],kc[14]=a[14],kc[15]=a[15],kc));a=b.loD;K.uniformMatrix4fv(Na.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(qc[0]=a[0],qc[1]=a[1],qc[2]=a[2],qc[3]=a[3],qc[4]=a[4],qc[5]=a[5],qc[6]=a[6],qc[7]=a[7],qc[8]=a[8],qc[9]=a[9],qc[10]=a[10],qc[11]=a[11],qc[12]=a[12],qc[13]=a[13],qc[14]=a[14],qc[15]=a[15],qc));a=b.hiD;K.uniformMatrix4fv(wa.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(yd[0]=a[0],yd[1]=a[1],yd[2]=a[2],yd[3]=a[3],yd[4]=a[4],
yd[5]=a[5],yd[6]=a[6],yd[7]=a[7],yd[8]=a[8],yd[9]=a[9],yd[10]=a[10],yd[11]=a[11],yd[12]=a[12],yd[13]=a[13],yd[14]=a[14],yd[15]=a[15],yd));a=b.resolution;K.uniform2f(Y.location,a[0],a[1]);a=b.viewBoxPos;K.uniform2f(ca.location,a[0],a[1]);a=b.viewBoxSize;K.uniform2f(ta.location,a[0],a[1]);K.uniform1f(ea.location,b.maskHeight);K.uniform1f(E.location,b.drwLayer);a=b.contextColor;K.uniform4f(da.location,a[0],a[1],a[2],a[3]);(a=b.maskTexture)&&"framebuffer"===a._reglType&&(a=a.color[0]);a=a._texture;K.uniform1i(pa.location,
a.bind());K.uniform1i(Ha.location,A.bind());(k=Ja.elements)?K.bindBuffer(34963,k.buffer.buffer):Jb.currentVAO&&(k=Ea.getElements(Jb.currentVAO.elements))&&K.bindBuffer(34963,k.buffer.buffer);B=b.offset;if(b=b.count)k?K.drawElements(1,b,k.type,B<<(k.type-5121>>1)):K.drawArrays(1,B,b),ja.dirty=!0,Jb.setVAO(null),M.viewportWidth=l,M.viewportHeight=t,ja.profile=r,a.unbind(),A.unbind()},scope:function(a,g,k){var t,A,K,E,R,G,O,P,Q,V,T,S,X,U,ha,da,ga,Y,ca,Z,ea,ka,oa,ma,ab,Cb,ra,Ha,Ea,za,Ra,eb,La,ta,Aa,fb,
Jc,xa,ic,Da,pa,Jd,Rb,ud,Ta,Jb,Xb,pe,kc,Zc,Fa,Eb,rd,Ba,sa,jc,rb,Rc,Xc,qc,hd,Xa,Gb,lc,cb,Wc,vc,Gd,yb,Ga,oe,fd,gd,jd,zb,Lc,Ac,Hb,wd,zd,wa,ce,Sb,Na,Id,Ad,Db,$b,Fd,pd,Ae,ee,Od,Ye,ye,yd,Pe,Ka,Qa,Vd,ue,Xd,we,Kc,Gc,ve,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf,Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Ne,Ce,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,vf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,
fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;od.height=a.viewportHeight;od.width=a.viewportWidth;od.x=a.viewportX;od.y=a.viewportY;t=od.x|0;A=od.y|0;K="width"in od?od.width|0:M.framebufferWidth-t;E="height"in od?od.height|0:M.framebufferHeight-A;R=M.viewportWidth;M.viewportWidth=K;G=M.viewportHeight;
M.viewportHeight=E;O=Pd[0];Pd[0]=t;P=Pd[1];Pd[1]=A;Q=Pd[2];Pd[2]=K;V=Pd[3];Pd[3]=E;T=ub[0];ub[0]=0;S=ub[1];ub[1]=0;X=ub[2];ub[2]=0;U=ub[3];ub[3]=0;ha=sc.blend_enable;sc.blend_enable=!1;da=be[0];be[0]=32774;ga=be[1];be[1]=32774;Y=ke[0];ke[0]=770;ca=ke[1];ke[1]=771;Z=ke[2];ke[2]=1;ea=ke[3];ke[3]=1;ka=sc.cull_enable;sc.cull_enable=!0;oa=sc.cull_face;sc.cull_face=1029;ma=sc.depth_enable;sc.depth_enable=!0;ab=sc.depth_func;sc.depth_func=513;Cb=sc.depth_mask;sc.depth_mask=!0;ra=ie[0];ie[0]=0;Ha=ie[1];ie[1]=
1;Ea=sc.dither;sc.dither=!1;za=sc.lineWidth;sc.lineWidth=2;Cd.height=a.scissorHeight;Cd.width=a.scissorWidth;Cd.x=a.scissorX;Cd.y=a.scissorY;Ra=Cd.x|0;eb=Cd.y|0;La="width"in Cd?Cd.width|0:M.framebufferWidth-Ra;ta="height"in Cd?Cd.height|0:M.framebufferHeight-eb;Aa=Oe[0];Oe[0]=Ra;fb=Oe[1];Oe[1]=eb;Jc=Oe[2];Oe[2]=La;xa=Oe[3];Oe[3]=ta;ic=sc.scissor_enable;sc.scissor_enable=!0;Da=ja.profile;ja.profile=!1;pa=a.offset;Jd=Ja.offset;Ja.offset=pa;Rb=a.count;ud=Ja.count;Ja.count=Rb;Ta=Ja.primitive;Ja.primitive=
1;Jb=a.contextColor;Xb=qa[24];qa[24]=Jb;pe=a.dim0A;kc=qa[3];qa[3]=pe;Zc=a.dim0B;Fa=qa[5];qa[5]=Zc;Eb=a.dim0C;rd=qa[7];qa[7]=Eb;Ba=a.dim0D;sa=qa[9];qa[9]=Ba;jc=a.dim1A;rb=qa[4];qa[4]=jc;Rc=a.dim1B;Xc=qa[6];qa[6]=Rc;qc=a.dim1C;hd=qa[8];qa[8]=qc;Xa=a.dim1D;Gb=qa[10];qa[10]=Xa;lc=a.drwLayer;cb=qa[23];qa[23]=lc;Wc=a.hiA;vc=qa[12];qa[12]=Wc;Gd=a.hiB;yb=qa[14];qa[14]=Gd;Ga=a.hiC;oe=qa[16];qa[16]=Ga;fd=a.hiD;gd=qa[18];qa[18]=fd;jd=a.loA;zb=qa[11];qa[11]=jd;Lc=a.loB;Ac=qa[13];qa[13]=Lc;Hb=a.loC;wd=qa[15];
qa[15]=Hb;zd=a.loD;wa=qa[17];qa[17]=zd;ce=a.maskHeight;Sb=qa[22];qa[22]=ce;Na=a.maskTexture;Id=qa[25];qa[25]=Na;Ad=qa[26];qa[26]=u;Db=a.resolution;$b=qa[19];qa[19]=Db;Fd=a.viewBoxPos;pd=qa[20];qa[20]=Fd;Ae=a.viewBoxSize;ee=qa[21];qa[21]=Ae;Od=C.buffer;C.buffer=h;Ye=C.divisor;C.divisor=0;ye=C.normalized;C.normalized=!1;yd=C.offset;C.offset=0;Pe=C.size;C.size=0;Ka=C.state;C.state=1;Qa=C.stride;C.stride=0;Vd=C.type;C.type=h.dtype;ue=C.w;C.w=0;Xd=C.x;C.x=0;we=C.y;C.y=0;Kc=C.z;C.z=0;Gc=b.buffer;b.buffer=
q;ve=b.divisor;b.divisor=0;md=b.normalized;b.normalized=!1;bd=b.offset;b.offset=0;nd=b.size;b.size=0;Dd=b.state;b.state=1;Ed=b.stride;b.stride=0;te=b.type;b.type=q.dtype;xe=b.w;b.w=0;Ze=b.x;b.x=0;me=b.y;b.y=0;fe=b.z;b.z=0;de=l.buffer;l.buffer=f;qe=l.divisor;l.divisor=0;$d=l.normalized;l.normalized=!1;ge=l.offset;l.offset=0;zc=l.size;l.size=0;Yc=l.state;l.state=1;re=l.stride;l.stride=0;je=l.type;l.type=f.dtype;Ld=l.w;l.w=0;Qd=l.x;l.x=0;Rd=l.y;l.y=0;Sd=l.z;l.z=0;he=B.buffer;B.buffer=d;Re=B.divisor;
B.divisor=0;ze=B.normalized;B.normalized=!1;ne=B.offset;B.offset=0;bf=B.size;B.size=0;Se=B.state;B.state=1;Le=B.stride;B.stride=0;se=B.type;B.type=d.dtype;De=B.w;B.w=0;Fe=B.x;B.x=0;Ge=B.y;B.y=0;He=B.z;B.z=0;Ee=L.buffer;L.buffer=D;Nd=L.divisor;L.divisor=0;Wd=L.normalized;L.normalized=!1;Zd=L.offset;L.offset=0;ae=L.size;L.size=0;Ie=L.state;L.state=1;Hd=L.stride;L.stride=0;Td=L.type;L.type=D.dtype;Be=L.w;L.w=0;Je=L.x;L.x=0;cf=L.y;L.y=0;af=L.z;L.z=0;Te=W.buffer;W.buffer=n;Me=W.divisor;W.divisor=0;$e=
W.normalized;W.normalized=!1;Xe=W.offset;W.offset=0;Ue=W.size;W.size=0;Ve=W.state;W.state=1;Ud=W.stride;W.stride=0;Yd=W.type;W.type=n.dtype;We=W.w;W.w=0;jf=W.x;W.x=0;nf=W.y;W.y=0;ff=W.z;W.z=0;kf=F.buffer;F.buffer=v;lf=F.divisor;F.divisor=0;mf=F.normalized;F.normalized=!1;rf=F.offset;F.offset=0;of=F.size;F.size=0;sf=F.state;F.state=1;Cf=F.stride;F.stride=0;Df=F.type;F.type=v.dtype;Ne=F.w;F.w=0;Ce=F.x;F.x=0;pf=F.y;F.y=0;qf=F.z;F.z=0;Ef=fa.buffer;fa.buffer=z;Hf=fa.divisor;fa.divisor=0;Bf=fa.normalized;
fa.normalized=!1;Ff=fa.offset;fa.offset=0;Gf=fa.size;fa.size=0;xf=fa.state;fa.state=1;yf=fa.stride;fa.stride=0;vf=fa.type;fa.type=z.dtype;zf=fa.w;fa.w=0;Af=fa.x;fa.x=0;Jf=fa.y;fa.y=0;Kf=fa.z;fa.z=0;Lf=N.buffer;N.buffer=w;Mf=N.divisor;N.divisor=0;tf=N.normalized;N.normalized=!1;Rf=N.offset;N.offset=0;If=N.size;N.size=0;uf=N.state;N.state=1;dg=N.stride;N.stride=0;Sf=N.type;N.type=w.dtype;Tf=N.w;N.w=0;qg=N.x;N.x=0;gf=N.y;N.y=0;df=N.z;N.z=0;Nf=ba.buffer;ba.buffer=p;Of=ba.divisor;ba.divisor=0;eg=ba.normalized;
ba.normalized=!1;fg=ba.offset;ba.offset=0;gg=ba.size;ba.size=0;hg=ba.state;ba.state=1;ig=ba.stride;ba.stride=0;Wf=ba.type;ba.type=p.dtype;Uf=ba.w;ba.w=0;Xf=ba.x;ba.x=0;Yf=ba.y;ba.y=0;Zf=ba.z;ba.z=0;jg=I.buffer;I.buffer=e;rg=I.divisor;I.divisor=0;sg=I.normalized;I.normalized=!1;tg=I.offset;I.offset=0;ug=I.size;I.size=0;vg=I.state;I.state=1;wg=I.stride;I.stride=0;xg=I.type;I.type=e.dtype;yg=I.w;I.w=0;zg=I.x;I.x=0;Ag=I.y;I.y=0;Bg=I.z;I.z=0;hf=r.buffer;r.buffer=c;ef=r.divisor;r.divisor=0;Pf=r.normalized;
r.normalized=!1;Qf=r.offset;r.offset=0;kg=r.size;r.size=0;lg=r.state;r.state=1;mg=r.stride;r.stride=0;ng=r.type;r.type=c.dtype;og=r.w;r.w=0;$f=r.x;r.x=0;Vf=r.y;r.y=0;ag=r.z;r.z=0;bg=J.buffer;J.buffer=m;cg=J.divisor;J.divisor=0;pg=J.normalized;J.normalized=!1;Cg=J.offset;J.offset=0;Dg=J.size;J.size=0;Eg=J.state;J.state=1;Fg=J.stride;J.stride=0;Gg=J.type;J.type=m.dtype;Hg=J.w;J.w=0;Ig=J.x;J.x=0;Jg=J.y;J.y=0;Kg=J.z;J.z=0;Lg=la.buffer;la.buffer=x;Mg=la.divisor;la.divisor=0;Ng=la.normalized;la.normalized=
!1;Og=la.offset;la.offset=0;Pg=la.size;la.size=0;Qg=la.state;la.state=1;Rg=la.stride;la.stride=0;Sg=la.type;la.type=x.dtype;Tg=la.w;la.w=0;Ug=la.x;la.x=0;Vg=la.y;la.y=0;Wg=la.z;la.z=0;Xg=ia.buffer;ia.buffer=y;Yg=ia.divisor;ia.divisor=0;Zg=ia.normalized;ia.normalized=!1;$g=ia.offset;ia.offset=0;ah=ia.size;ia.size=0;bh=ia.state;ia.state=1;ch=ia.stride;ia.stride=0;dh=ia.type;ia.type=y.dtype;eh=ia.w;ia.w=0;fh=ia.x;ia.x=0;gh=ia.y;ia.y=0;hh=ia.z;ia.z=0;ih=ua.buffer;ua.buffer=H;jh=ua.divisor;ua.divisor=
0;kh=ua.normalized;ua.normalized=!1;lh=ua.offset;ua.offset=0;mh=ua.size;ua.size=0;nh=ua.state;ua.state=1;oh=ua.stride;ua.stride=0;ph=ua.type;ua.type=H.dtype;qh=ua.w;ua.w=0;rh=ua.x;ua.x=0;sh=ua.y;ua.y=0;th=ua.z;ua.z=0;uh=Zb.vert;Zb.vert=2;vh=Zb.frag;Zb.frag=1;ja.dirty=!0;g(M,a,k);M.viewportWidth=R;M.viewportHeight=G;Pd[0]=O;Pd[1]=P;Pd[2]=Q;Pd[3]=V;ub[0]=T;ub[1]=S;ub[2]=X;ub[3]=U;sc.blend_enable=ha;be[0]=da;be[1]=ga;ke[0]=Y;ke[1]=ca;ke[2]=Z;ke[3]=ea;sc.cull_enable=ka;sc.cull_face=oa;sc.depth_enable=
ma;sc.depth_func=ab;sc.depth_mask=Cb;ie[0]=ra;ie[1]=Ha;sc.dither=Ea;sc.lineWidth=za;Oe[0]=Aa;Oe[1]=fb;Oe[2]=Jc;Oe[3]=xa;sc.scissor_enable=ic;ja.profile=Da;Ja.offset=Jd;Ja.count=ud;Ja.primitive=Ta;qa[24]=Xb;qa[3]=kc;qa[5]=Fa;qa[7]=rd;qa[9]=sa;qa[4]=rb;qa[6]=Xc;qa[8]=hd;qa[10]=Gb;qa[23]=cb;qa[12]=vc;qa[14]=yb;qa[16]=oe;qa[18]=gd;qa[11]=zb;qa[13]=Ac;qa[15]=wd;qa[17]=wa;qa[22]=Sb;qa[25]=Id;qa[26]=Ad;qa[19]=$b;qa[20]=pd;qa[21]=ee;C.buffer=Od;C.divisor=Ye;C.normalized=ye;C.offset=yd;C.size=Pe;C.state=Ka;
C.stride=Qa;C.type=Vd;C.w=ue;C.x=Xd;C.y=we;C.z=Kc;b.buffer=Gc;b.divisor=ve;b.normalized=md;b.offset=bd;b.size=nd;b.state=Dd;b.stride=Ed;b.type=te;b.w=xe;b.x=Ze;b.y=me;b.z=fe;l.buffer=de;l.divisor=qe;l.normalized=$d;l.offset=ge;l.size=zc;l.state=Yc;l.stride=re;l.type=je;l.w=Ld;l.x=Qd;l.y=Rd;l.z=Sd;B.buffer=he;B.divisor=Re;B.normalized=ze;B.offset=ne;B.size=bf;B.state=Se;B.stride=Le;B.type=se;B.w=De;B.x=Fe;B.y=Ge;B.z=He;L.buffer=Ee;L.divisor=Nd;L.normalized=Wd;L.offset=Zd;L.size=ae;L.state=Ie;L.stride=
Hd;L.type=Td;L.w=Be;L.x=Je;L.y=cf;L.z=af;W.buffer=Te;W.divisor=Me;W.normalized=$e;W.offset=Xe;W.size=Ue;W.state=Ve;W.stride=Ud;W.type=Yd;W.w=We;W.x=jf;W.y=nf;W.z=ff;F.buffer=kf;F.divisor=lf;F.normalized=mf;F.offset=rf;F.size=of;F.state=sf;F.stride=Cf;F.type=Df;F.w=Ne;F.x=Ce;F.y=pf;F.z=qf;fa.buffer=Ef;fa.divisor=Hf;fa.normalized=Bf;fa.offset=Ff;fa.size=Gf;fa.state=xf;fa.stride=yf;fa.type=vf;fa.w=zf;fa.x=Af;fa.y=Jf;fa.z=Kf;N.buffer=Lf;N.divisor=Mf;N.normalized=tf;N.offset=Rf;N.size=If;N.state=uf;N.stride=
dg;N.type=Sf;N.w=Tf;N.x=qg;N.y=gf;N.z=df;ba.buffer=Nf;ba.divisor=Of;ba.normalized=eg;ba.offset=fg;ba.size=gg;ba.state=hg;ba.stride=ig;ba.type=Wf;ba.w=Uf;ba.x=Xf;ba.y=Yf;ba.z=Zf;I.buffer=jg;I.divisor=rg;I.normalized=sg;I.offset=tg;I.size=ug;I.state=vg;I.stride=wg;I.type=xg;I.w=yg;I.x=zg;I.y=Ag;I.z=Bg;r.buffer=hf;r.divisor=ef;r.normalized=Pf;r.offset=Qf;r.size=kg;r.state=lg;r.stride=mg;r.type=ng;r.w=og;r.x=$f;r.y=Vf;r.z=ag;J.buffer=bg;J.divisor=cg;J.normalized=pg;J.offset=Cg;J.size=Dg;J.state=Eg;J.stride=
Fg;J.type=Gg;J.w=Hg;J.x=Ig;J.y=Jg;J.z=Kg;la.buffer=Lg;la.divisor=Mg;la.normalized=Ng;la.offset=Og;la.size=Pg;la.state=Qg;la.stride=Rg;la.type=Sg;la.w=Tg;la.x=Ug;la.y=Vg;la.z=Wg;ia.buffer=Xg;ia.divisor=Yg;ia.normalized=Zg;ia.offset=$g;ia.size=ah;ia.state=bh;ia.stride=ch;ia.type=dh;ia.w=eh;ia.x=fh;ia.y=gh;ia.z=hh;ua.buffer=ih;ua.divisor=jh;ua.normalized=kh;ua.offset=lh;ua.size=mh;ua.state=nh;ua.stride=oh;ua.type=ph;ua.w=qh;ua.x=rh;ua.y=sh;ua.z=th;Zb.vert=uh;Zb.frag=vh;ja.dirty=!0}}},$1:function(a,k){var g,
q,f,d,D,n,v,z,w,p,e,c,m,x,y,H,h,A,u,C,b,l,B,L,W,F,fa,N,ba,I;g=a.attributes;q=a.current;f=a.framebuffer;d=a.gl;D=a.next;n=a.vao;v=D.blend_color;z=q.blend_color;w=D.blend_equation;p=q.blend_equation;e=D.blend_func;c=q.blend_func;m=D.colorMask;x=q.colorMask;y=D.depth_range;H=q.depth_range;h=D.polygonOffset_offset;A=q.polygonOffset_offset;u=D.sample_coverage;C=q.sample_coverage;b=D.scissor_box;l=q.scissor_box;B=D.stencil_func;L=q.stencil_func;W=D.stencil_opBack;F=q.stencil_opBack;fa=D.stencil_opFront;
N=q.stencil_opFront;ba=D.viewport;I=q.viewport;return{poll:function(){var a,g,k,n,t,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa;q.dirty=!1;g=D.blend_enable;k=D.cull_enable;n=D.depth_enable;t=D.dither;ab=D.polygonOffset_enable;ma=D.sample_alpha;za=D.sample_enable;da=D.scissor_enable;ga=D.stencil_enable;O=D.cull_face;T=q.cull_face;ra=D.depth_func;S=q.depth_func;Gb=D.depth_mask;Ta=q.depth_mask;X=D.frontFace;E=q.frontFace;ka=D.lineWidth;Z=q.lineWidth;sa=D.stencil_mask;wa=q.stencil_mask;a=f.next;a!==
f.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null),f.cur=a);g!==q.blend_enable&&(g?d.enable(3042):d.disable(3042),q.blend_enable=g);k!==q.cull_enable&&(k?d.enable(2884):d.disable(2884),q.cull_enable=k);n!==q.depth_enable&&(n?d.enable(2929):d.disable(2929),q.depth_enable=n);t!==q.dither&&(t?d.enable(3024):d.disable(3024),q.dither=t);ab!==q.polygonOffset_enable&&(ab?d.enable(32823):d.disable(32823),q.polygonOffset_enable=ab);ma!==q.sample_alpha&&(ma?d.enable(32926):d.disable(32926),
q.sample_alpha=ma);za!==q.sample_enable&&(za?d.enable(32928):d.disable(32928),q.sample_enable=za);da!==q.scissor_enable&&(da?d.enable(3089):d.disable(3089),q.scissor_enable=da);ga!==q.stencil_enable&&(ga?d.enable(2960):d.disable(2960),q.stencil_enable=ga);if(v[0]!==z[0]||v[1]!==z[1]||v[2]!==z[2]||v[3]!==z[3])d.blendColor(v[0],v[1],v[2],v[3]),z[0]=v[0],z[1]=v[1],z[2]=v[2],z[3]=v[3];if(w[0]!==p[0]||w[1]!==p[1])d.blendEquationSeparate(w[0],w[1]),p[0]=w[0],p[1]=w[1];if(e[0]!==c[0]||e[1]!==c[1]||e[2]!==
c[2]||e[3]!==c[3])d.blendFuncSeparate(e[0],e[1],e[2],e[3]),c[0]=e[0],c[1]=e[1],c[2]=e[2],c[3]=e[3];if(m[0]!==x[0]||m[1]!==x[1]||m[2]!==x[2]||m[3]!==x[3])d.colorMask(m[0],m[1],m[2],m[3]),x[0]=m[0],x[1]=m[1],x[2]=m[2],x[3]=m[3];O!==T&&(d.cullFace(O),q.cull_face=O);ra!==S&&(d.depthFunc(ra),q.depth_func=ra);Gb!==Ta&&(d.depthMask(Gb),q.depth_mask=Gb);if(y[0]!==H[0]||y[1]!==H[1])d.depthRange(y[0],y[1]),H[0]=y[0],H[1]=y[1];X!==E&&(d.frontFace(X),q.frontFace=X);ka!==Z&&(d.lineWidth(ka),q.lineWidth=ka);if(h[0]!==
A[0]||h[1]!==A[1])d.polygonOffset(h[0],h[1]),A[0]=h[0],A[1]=h[1];if(u[0]!==C[0]||u[1]!==C[1])d.sampleCoverage(u[0],u[1]),C[0]=u[0],C[1]=u[1];if(b[0]!==l[0]||b[1]!==l[1]||b[2]!==l[2]||b[3]!==l[3])d.scissor(b[0],b[1],b[2],b[3]),l[0]=b[0],l[1]=b[1],l[2]=b[2],l[3]=b[3];if(B[0]!==L[0]||B[1]!==L[1]||B[2]!==L[2])d.stencilFunc(B[0],B[1],B[2]),L[0]=B[0],L[1]=B[1],L[2]=B[2];sa!==wa&&(d.stencilMask(sa),q.stencil_mask=sa);if(W[0]!==F[0]||W[1]!==F[1]||W[2]!==F[2]||W[3]!==F[3])d.stencilOpSeparate(W[0],W[1],W[2],
W[3]),F[0]=W[0],F[1]=W[1],F[2]=W[2],F[3]=W[3];if(fa[0]!==N[0]||fa[1]!==N[1]||fa[2]!==N[2]||fa[3]!==N[3])d.stencilOpSeparate(fa[0],fa[1],fa[2],fa[3]),N[0]=fa[0],N[1]=fa[1],N[2]=fa[2],N[3]=fa[3];if(ba[0]!==I[0]||ba[1]!==I[1]||ba[2]!==I[2]||ba[3]!==I[3])d.viewport(ba[0],ba[1],ba[2],ba[3]),I[0]=ba[0],I[1]=ba[1],I[2]=ba[2],I[3]=ba[3]},refresh:function(){var a,t,la,ia,ua,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta;q.dirty=!1;t=D.blend_enable;la=D.cull_enable;ia=D.depth_enable;ua=D.dither;ab=D.polygonOffset_enable;ma=
D.sample_alpha;za=D.sample_enable;da=D.scissor_enable;ga=D.stencil_enable;O=D.cull_face;T=D.depth_func;ra=D.depth_mask;S=D.frontFace;Gb=D.lineWidth;Ta=D.stencil_mask;(a=f.next)?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null);f.cur=a;a=g[0];a.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(0,
a.divisor);a=g[1];a.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(1,a.divisor);a=g[2];a.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,a.x,a.y,a.z,
a.w),a.buffer=null);k.vertexAttribDivisorANGLE(2,a.divisor);a=g[3];a.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(3,a.divisor);a=g[4];a.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(4),
d.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(4,a.divisor);a=g[5];a.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(5,a.divisor);a=g[6];a.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,
a.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(6,a.divisor);a=g[7];a.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(7,a.divisor);a=g[8];a.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(8,
a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(8,a.divisor);a=g[9];a.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(9,a.divisor);a=g[10];a.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,
a.buffer.buffer),d.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(10,a.divisor);a=g[11];a.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(11,a.divisor);a=g[12];
a.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(12,a.divisor);a=g[13];a.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=
null);k.vertexAttribDivisorANGLE(13,a.divisor);a=g[14];a.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(14,a.divisor);a=g[15];a.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(15),
d.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);k.vertexAttribDivisorANGLE(15,a.divisor);n.currentVAO=null;n.setVAO(n.targetVAO);t?d.enable(3042):d.disable(3042);q.blend_enable=t;la?d.enable(2884):d.disable(2884);q.cull_enable=la;ia?d.enable(2929):d.disable(2929);q.depth_enable=ia;ua?d.enable(3024):d.disable(3024);q.dither=ua;ab?d.enable(32823):d.disable(32823);q.polygonOffset_enable=ab;ma?d.enable(32926):d.disable(32926);q.sample_alpha=ma;za?d.enable(32928):d.disable(32928);q.sample_enable=za;
da?d.enable(3089):d.disable(3089);q.scissor_enable=da;ga?d.enable(2960):d.disable(2960);q.stencil_enable=ga;d.blendColor(v[0],v[1],v[2],v[3]);z[0]=v[0];z[1]=v[1];z[2]=v[2];z[3]=v[3];d.blendEquationSeparate(w[0],w[1]);p[0]=w[0];p[1]=w[1];d.blendFuncSeparate(e[0],e[1],e[2],e[3]);c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];d.colorMask(m[0],m[1],m[2],m[3]);x[0]=m[0];x[1]=m[1];x[2]=m[2];x[3]=m[3];d.cullFace(O);q.cull_face=O;d.depthFunc(T);q.depth_func=T;d.depthMask(ra);q.depth_mask=ra;d.depthRange(y[0],y[1]);
H[0]=y[0];H[1]=y[1];d.frontFace(S);q.frontFace=S;d.lineWidth(Gb);q.lineWidth=Gb;d.polygonOffset(h[0],h[1]);A[0]=h[0];A[1]=h[1];d.sampleCoverage(u[0],u[1]);C[0]=u[0];C[1]=u[1];d.scissor(b[0],b[1],b[2],b[3]);l[0]=b[0];l[1]=b[1];l[2]=b[2];l[3]=b[3];d.stencilFunc(B[0],B[1],B[2]);L[0]=B[0];L[1]=B[1];L[2]=B[2];d.stencilMask(Ta);q.stencil_mask=Ta;d.stencilOpSeparate(W[0],W[1],W[2],W[3]);F[0]=W[0];F[1]=W[1];F[2]=W[2];F[3]=W[3];d.stencilOpSeparate(fa[0],fa[1],fa[2],fa[3]);N[0]=fa[0];N[1]=fa[1];N[2]=fa[2];
N[3]=fa[3];d.viewport(ba[0],ba[1],ba[2],ba[3]);I[0]=ba[0];I[1]=ba[1];I[2]=ba[2];I[3]=ba[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,H,h,A,u,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta){var X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa,Xa,Cb,yb,Jc,Eb,V,R,ha,Aa,zb,Ac,Kc,P,G,oa,Ha,Y,ca,ta,Q,M,ja,Ja,Ea,La,K,sc,Zb,qa,Jb,ub;X=a.attributes;E=a.buffer;
ka=a.context;Z=a.current;sa=a.draw;wa=a.elements;Qa=a.extensions;Ka=a.framebuffer;U=a.gl;Na=a.isBufferArgs;ea=a.next;pa=a.shader;Xa=a.uniforms;Cb=a.vao;yb=ea.blend_color;Jc=Z.blend_color;Eb=ea.blend_equation;V=Z.blend_equation;R=ea.blend_func;ha=Z.blend_func;Aa=ea.colorMask;zb=Z.colorMask;Ac=ea.depth_range;Kc=Z.depth_range;P=ea.polygonOffset_offset;G=Z.polygonOffset_offset;oa=ea.sample_coverage;Ha=Z.sample_coverage;Y=ea.scissor_box;ca=Z.scissor_box;ta=ea.stencil_func;Q=Z.stencil_func;M=ea.stencil_opBack;
ja=Z.stencil_opBack;Ja=ea.stencil_opFront;Ea=Z.stencil_opFront;La=ea.viewport;K=Z.viewport;sc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Zb={};Zb.buffer=g;Zb.divisor=1;qa={};qa.buffer=q;qa.divisor=1;Jb={};Jb.buffer=f;Jb.divisor=1;ub={};ub.buffer=d;ub.divisor=1;return{batch:function(b,a){var l,d,g,f,m,q;l=Ka.next;l!==Ka.cur&&(l?U.bindFramebuffer(36160,l.framebuffer):U.bindFramebuffer(36160,null),Ka.cur=l);if(Z.dirty){var n,x,B,t,y,v,L,D,w,z,W,H,h,
A,C,u,na,R,aa,Y,La,pa,Eb,Xc,eb,Xa,Rb,vc,fb,yb,kc,qc,yd;n=ea.dither;n!==Z.dither&&(n?U.enable(3024):U.disable(3024),Z.dither=n);x=ea.depth_func;x!==Z.depth_func&&(U.depthFunc(x),Z.depth_func=x);B=Ac[0];t=Ac[1];if(B!==Kc[0]||t!==Kc[1])U.depthRange(B,t),Kc[0]=B,Kc[1]=t;y=ea.depth_mask;y!==Z.depth_mask&&(U.depthMask(y),Z.depth_mask=y);v=Aa[0];L=Aa[1];D=Aa[2];w=Aa[3];if(v!==zb[0]||L!==zb[1]||D!==zb[2]||w!==zb[3])U.colorMask(v,L,D,w),zb[0]=v,zb[1]=L,zb[2]=D,zb[3]=w;z=ea.cull_enable;z!==Z.cull_enable&&(z?
U.enable(2884):U.disable(2884),Z.cull_enable=z);W=ea.cull_face;W!==Z.cull_face&&(U.cullFace(W),Z.cull_face=W);H=ea.frontFace;H!==Z.frontFace&&(U.frontFace(H),Z.frontFace=H);h=ea.lineWidth;h!==Z.lineWidth&&(U.lineWidth(h),Z.lineWidth=h);A=ea.polygonOffset_enable;A!==Z.polygonOffset_enable&&(A?U.enable(32823):U.disable(32823),Z.polygonOffset_enable=A);C=P[0];u=P[1];if(C!==G[0]||u!==G[1])U.polygonOffset(C,u),G[0]=C,G[1]=u;na=ea.sample_alpha;na!==Z.sample_alpha&&(na?U.enable(32926):U.disable(32926),Z.sample_alpha=
na);R=ea.sample_enable;R!==Z.sample_enable&&(R?U.enable(32928):U.disable(32928),Z.sample_enable=R);aa=oa[0];Y=oa[1];if(aa!==Ha[0]||Y!==Ha[1])U.sampleCoverage(aa,Y),Ha[0]=aa,Ha[1]=Y;La=ea.stencil_enable;La!==Z.stencil_enable&&(La?U.enable(2960):U.disable(2960),Z.stencil_enable=La);pa=ea.stencil_mask;pa!==Z.stencil_mask&&(U.stencilMask(pa),Z.stencil_mask=pa);Eb=ta[0];Xc=ta[1];eb=ta[2];if(Eb!==Q[0]||Xc!==Q[1]||eb!==Q[2])U.stencilFunc(Eb,Xc,eb),Q[0]=Eb,Q[1]=Xc,Q[2]=eb;Xa=Ja[0];Rb=Ja[1];vc=Ja[2];fb=Ja[3];
if(Xa!==Ea[0]||Rb!==Ea[1]||vc!==Ea[2]||fb!==Ea[3])U.stencilOpSeparate(Xa,Rb,vc,fb),Ea[0]=Xa,Ea[1]=Rb,Ea[2]=vc,Ea[3]=fb;yb=M[0];kc=M[1];qc=M[2];yd=M[3];if(yb!==ja[0]||kc!==ja[1]||qc!==ja[2]||yd!==ja[3])U.stencilOpSeparate(yb,kc,qc,yd),ja[0]=yb,ja[1]=kc,ja[2]=qc,ja[3]=yd}U.blendColor(0,0,0,0);Jc[0]=0;Jc[1]=0;Jc[2]=0;Jc[3]=0;U.enable(3042);Z.blend_enable=!0;U.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;U.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;U.disable(2929);
Z.depth_enable=!1;U.enable(3089);Z.scissor_enable=!0;if(d=Z.profile)g=performance.now(),k.count+=a;U.useProgram(F.program);f=Qa.angle_instanced_arrays;var pd,Lc,jc,Zc,hd,ic,Rc,Xb;Cb.setVAO(null);pd=ua.location;Lc=X[pd];Lc.buffer||U.enableVertexAttribArray(pd);if(5126!==Lc.type||2!==Lc.size||Lc.buffer!==p||!1!==Lc.normalized||0!==Lc.offset||24!==Lc.stride)U.bindBuffer(34962,p.buffer),U.vertexAttribPointer(pd,2,5126,!1,24,0),Lc.type=5126,Lc.size=2,Lc.buffer=p,Lc.normalized=!1,Lc.offset=0,Lc.stride=
24;0!==Lc.divisor&&(f.vertexAttribDivisorANGLE(pd,0),Lc.divisor=0);jc=ma.location;Zc=X[jc];Zc.buffer||U.enableVertexAttribArray(jc);if(5126!==Zc.type||2!==Zc.size||Zc.buffer!==e||!1!==Zc.normalized||8!==Zc.offset||24!==Zc.stride)U.bindBuffer(34962,e.buffer),U.vertexAttribPointer(jc,2,5126,!1,24,8),Zc.type=5126,Zc.size=2,Zc.buffer=e,Zc.normalized=!1,Zc.offset=8,Zc.stride=24;0!==Zc.divisor&&(f.vertexAttribDivisorANGLE(jc,0),Zc.divisor=0);hd=J.location;ic=X[hd];ic.buffer||U.enableVertexAttribArray(hd);
if(5126!==ic.type||2!==ic.size||ic.buffer!==c||!1!==ic.normalized||16!==ic.offset||24!==ic.stride)U.bindBuffer(34962,c.buffer),U.vertexAttribPointer(hd,2,5126,!1,24,16),ic.type=5126,ic.size=2,ic.buffer=c,ic.normalized=!1,ic.offset=16,ic.stride=24;0!==ic.divisor&&(f.vertexAttribDivisorANGLE(hd,0),ic.divisor=0);(Rc=sa.elements)?U.bindBuffer(34963,Rc.buffer.buffer):Cb.currentVAO&&(Rc=wa.getElements(Cb.currentVAO.elements))&&U.bindBuffer(34963,Rc.buffer.buffer);Xb=sa.offset;for(m=0;m<a;++m){q=b[m];var Ra,
Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,wf,Bd,Qe,Ke,le,Md,Kd,ld,Gc;Ra=q.viewport;Ad=Ra.x|0;lc=Ra.y|0;rb="width"in Ra?Ra.width|0:ka.framebufferWidth-Ad;Hb="height"in Ra?Ra.height|0:ka.framebufferHeight-lc;cb=ka.viewportWidth;
ka.viewportWidth=rb;$b=ka.viewportHeight;ka.viewportHeight=Hb;U.viewport(Ad,lc,rb,Hb);K[0]=Ad;K[1]=lc;K[2]=rb;K[3]=Hb;Sb=q.viewport;kd=Sb.x|0;cc=Sb.y|0;Tb="width"in Sb?Sb.width|0:ka.framebufferWidth-kd;Mc="height"in Sb?Sb.height|0:ka.framebufferHeight-cc;U.scissor(kd,cc,Tb,Mc);ca[0]=kd;ca[1]=cc;ca[2]=Tb;ca[3]=Mc;Ub=fa.call(this,ka,q,m);Jb.offset=Ub;Pa=!1;Fb=null;Ib=0;ib=!1;pc=Sa=0;ac=1;Dc=0;db=5126;kb=oc=Hc=mc=0;Na(Jb)?(Pa=!0,Fb=E.createStream(34962,Jb),db=Fb.dtype):(Fb=E.getBuffer(Jb))?db=Fb.dtype:
"constant"in Jb?(ac=2,"number"===typeof Jb.constant?(Hc=Jb.constant,oc=kb=mc=0):(Hc=0<Jb.constant.length?Jb.constant[0]:0,oc=1<Jb.constant.length?Jb.constant[1]:0,kb=2<Jb.constant.length?Jb.constant[2]:0,mc=3<Jb.constant.length?Jb.constant[3]:0)):(Fb=Na(Jb.buffer)?E.createStream(34962,Jb.buffer):E.getBuffer(Jb.buffer),db="type"in Jb?sc[Jb.type]:Fb.dtype,ib=!!Jb.normalized,pc=Jb.size|0,Sa=Jb.offset|0,Dc=Jb.stride|0,Ib=Jb.divisor|0);lb=ga.location;va=X[lb];if(1===ac){va.buffer||U.enableVertexAttribArray(lb);
nb=pc||2;if(va.type!==db||va.size!==nb||va.buffer!==Fb||va.normalized!==ib||va.offset!==Sa||va.stride!==Dc)U.bindBuffer(34962,Fb.buffer),U.vertexAttribPointer(lb,nb,db,ib,Dc,Sa),va.type=db,va.size=nb,va.buffer=Fb,va.normalized=ib,va.offset=Sa,va.stride=Dc;va.divisor!==Ib&&(f.vertexAttribDivisorANGLE(lb,Ib),va.divisor=Ib)}else if(va.buffer&&(U.disableVertexAttribArray(lb),va.buffer=null),va.x!==Hc||va.y!==oc||va.z!==kb||va.w!==mc)U.vertexAttrib4f(lb,Hc,oc,kb,mc),va.x=Hc,va.y=oc,va.z=kb,va.w=mc;ya=
N.call(this,ka,q,m);ub.offset=ya;Wa=!1;bb=null;Ia=0;gb=!1;xb=Oa=0;vb=1;Ua=0;wc=5126;Ca=Vb=Lb=Kb=0;Na(ub)?(Wa=!0,bb=E.createStream(34962,ub),wc=bb.dtype):(bb=E.getBuffer(ub))?wc=bb.dtype:"constant"in ub?(vb=2,"number"===typeof ub.constant?(Lb=ub.constant,Vb=Ca=Kb=0):(Lb=0<ub.constant.length?ub.constant[0]:0,Vb=1<ub.constant.length?ub.constant[1]:0,Ca=2<ub.constant.length?ub.constant[2]:0,Kb=3<ub.constant.length?ub.constant[3]:0)):(bb=Na(ub.buffer)?E.createStream(34962,ub.buffer):E.getBuffer(ub.buffer),
wc="type"in ub?sc[ub.type]:bb.dtype,gb=!!ub.normalized,xb=ub.size|0,Oa=ub.offset|0,Ua=ub.stride|0,Ia=ub.divisor|0);xd=O.location;Ma=X[xd];if(1===vb){Ma.buffer||U.enableVertexAttribArray(xd);Ob=xb||2;if(Ma.type!==wc||Ma.size!==Ob||Ma.buffer!==bb||Ma.normalized!==gb||Ma.offset!==Oa||Ma.stride!==Ua)U.bindBuffer(34962,bb.buffer),U.vertexAttribPointer(xd,Ob,wc,gb,Ua,Oa),Ma.type=wc,Ma.size=Ob,Ma.buffer=bb,Ma.normalized=gb,Ma.offset=Oa,Ma.stride=Ua;Ma.divisor!==Ia&&(f.vertexAttribDivisorANGLE(xd,Ia),Ma.divisor=
Ia)}else if(Ma.buffer&&(U.disableVertexAttribArray(xd),Ma.buffer=null),Ma.x!==Lb||Ma.y!==Vb||Ma.z!==Ca||Ma.w!==Kb)U.vertexAttrib4f(xd,Lb,Vb,Ca,Kb),Ma.x=Lb,Ma.y=Vb,Ma.z=Ca,Ma.w=Kb;hb=ba.call(this,ka,q,m);qa.offset=hb;jb=!1;xa=null;ec=0;Da=!1;pb=ob=0;Za=1;$a=0;nc=5126;Mb=Ya=tc=xc=0;Na(qa)?(jb=!0,xa=E.createStream(34962,qa),nc=xa.dtype):(xa=E.getBuffer(qa))?nc=xa.dtype:"constant"in qa?(Za=2,"number"===typeof qa.constant?(tc=qa.constant,Ya=Mb=xc=0):(tc=0<qa.constant.length?qa.constant[0]:0,Ya=1<qa.constant.length?
qa.constant[1]:0,Mb=2<qa.constant.length?qa.constant[2]:0,xc=3<qa.constant.length?qa.constant[3]:0)):(xa=Na(qa.buffer)?E.createStream(34962,qa.buffer):E.getBuffer(qa.buffer),nc="type"in qa?sc[qa.type]:xa.dtype,Da=!!qa.normalized,pb=qa.size|0,ob=qa.offset|0,$a=qa.stride|0,ec=qa.divisor|0);Ec=ab.location;Fa=X[Ec];if(1===Za){Fa.buffer||U.enableVertexAttribArray(Ec);yc=pb||4;if(Fa.type!==nc||Fa.size!==yc||Fa.buffer!==xa||Fa.normalized!==Da||Fa.offset!==ob||Fa.stride!==$a)U.bindBuffer(34962,xa.buffer),
U.vertexAttribPointer(Ec,yc,nc,Da,$a,ob),Fa.type=nc,Fa.size=yc,Fa.buffer=xa,Fa.normalized=Da,Fa.offset=ob,Fa.stride=$a;Fa.divisor!==ec&&(f.vertexAttribDivisorANGLE(Ec,ec),Fa.divisor=ec)}else if(Fa.buffer&&(U.disableVertexAttribArray(Ec),Fa.buffer=null),Fa.x!==tc||Fa.y!==Ya||Fa.z!==Mb||Fa.w!==xc)U.vertexAttrib4f(Ec,tc,Ya,Mb,xc),Fa.x=tc,Fa.y=Ya,Fa.z=Mb,Fa.w=xc;Va=I.call(this,ka,q,m);Zb.offset=Va;Ba=!1;mb=null;sb=0;Ab=!1;uc=qb=0;tb=1;Sc=0;rc=5126;dd=cd=Nc=sd=0;Na(Zb)?(Ba=!0,mb=E.createStream(34962,Zb),
rc=mb.dtype):(mb=E.getBuffer(Zb))?rc=mb.dtype:"constant"in Zb?(tb=2,"number"===typeof Zb.constant?(Nc=Zb.constant,cd=dd=sd=0):(Nc=0<Zb.constant.length?Zb.constant[0]:0,cd=1<Zb.constant.length?Zb.constant[1]:0,dd=2<Zb.constant.length?Zb.constant[2]:0,sd=3<Zb.constant.length?Zb.constant[3]:0)):(mb=Na(Zb.buffer)?E.createStream(34962,Zb.buffer):E.getBuffer(Zb.buffer),rc="type"in Zb?sc[Zb.type]:mb.dtype,Ab=!!Zb.normalized,uc=Zb.size|0,qb=Zb.offset|0,Sc=Zb.stride|0,sb=Zb.divisor|0);Yb=ia.location;dc=X[Yb];
if(1===tb){dc.buffer||U.enableVertexAttribArray(Yb);Pb=uc||4;if(dc.type!==rc||dc.size!==Pb||dc.buffer!==mb||dc.normalized!==Ab||dc.offset!==qb||dc.stride!==Sc)U.bindBuffer(34962,mb.buffer),U.vertexAttribPointer(Yb,Pb,rc,Ab,Sc,qb),dc.type=rc,dc.size=Pb,dc.buffer=mb,dc.normalized=Ab,dc.offset=qb,dc.stride=Sc;dc.divisor!==sb&&(f.vertexAttribDivisorANGLE(Yb,sb),dc.divisor=sb)}else if(dc.buffer&&(U.disableVertexAttribArray(Yb),dc.buffer=null),dc.x!==Nc||dc.y!==cd||dc.z!==dd||dc.w!==sd)U.vertexAttrib4f(Yb,
Nc,cd,dd,sd),dc.x=Nc,dc.y=cd,dc.z=dd,dc.w=sd;Ga=r.call(this,ka,q,m);bc=Ga[0];Bb=Ga[1];Qb=Ga[2];hc=Ga[3];m&&wb===bc&&Nb===Bb&&fc===Qb&&Tc===hc||(wb=bc,Nb=Bb,fc=Qb,Tc=hc,U.uniform4f(Ta.location,bc,Bb,Qb,hc));Bc=q.lineWidth;m&&Cc===Bc||(Cc=Bc,U.uniform1f(za.location,Bc));Fc=q.capSize;m&&Oc===Fc||(Oc=Fc,U.uniform1f(la.location,Fc));ed=q.scale;Uc=ed[0];Wb=ed[1];m&&Pc===Uc&&Db===Wb||(Pc=Uc,Db=Wb,U.uniform2f(T.location,Uc,Wb));Qc=q.scaleFract;Ic=Qc[0];gc=Qc[1];m&&Vc===Ic&&$c===gc||(Vc=Ic,$c=gc,U.uniform2f(ra.location,
Ic,gc));id=q.translate;qd=id[0];ad=id[1];m&&vd===qd&&wf===ad||(vd=qd,wf=ad,U.uniform2f(S.location,qd,ad));Bd=q.translateFract;Qe=Bd[0];le=Bd[1];m&&Ke===Qe&&Md===le||(Ke=Qe,Md=le,U.uniform2f(Gb.location,Qe,le));Kd=q.opacity;m&&ld===Kd||(ld=Kd,U.uniform1f(da.location,Kd));Gc=q.count;0<Gc?Rc?f.drawElementsInstancedANGLE(4,36,Rc.type,Xb<<(Rc.type-5121>>1),Gc):f.drawArraysInstancedANGLE(4,Xb,36,Gc):0>Gc&&(Rc?U.drawElements(4,36,Rc.type,Xb<<(Rc.type-5121>>1)):U.drawArrays(4,Xb,36));ka.viewportWidth=cb;
ka.viewportHeight=$b;Pa&&E.destroyStream(Fb);Wa&&E.destroyStream(bb);jb&&E.destroyStream(xa);Ba&&E.destroyStream(mb)}Z.dirty=!0;Cb.setVAO(null);d&&(k.cpuTime+=performance.now()-g)},draw:function(b){var a,l,d,r,g,f,q,x,B,t,y,L,W,N,H,h,F,A,C,I,u,fa,na,R,aa,ba,Y,La,pa,Eb,Xa,eb,yb,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec;a=Ka.next;a!==Ka.cur&&(a?U.bindFramebuffer(36160,
a.framebuffer):U.bindFramebuffer(36160,null),Ka.cur=a);if(Z.dirty){var Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb;Da=ea.dither;Da!==Z.dither&&(Da?U.enable(3024):U.disable(3024),Z.dither=Da);ob=ea.depth_func;ob!==Z.depth_func&&(U.depthFunc(ob),Z.depth_func=ob);pb=Ac[0];Za=Ac[1];if(pb!==Kc[0]||Za!==Kc[1])U.depthRange(pb,Za),Kc[0]=pb,Kc[1]=Za;$a=ea.depth_mask;$a!==Z.depth_mask&&(U.depthMask($a),Z.depth_mask=$a);nc=Aa[0];xc=Aa[1];tc=Aa[2];Ya=Aa[3];
if(nc!==zb[0]||xc!==zb[1]||tc!==zb[2]||Ya!==zb[3])U.colorMask(nc,xc,tc,Ya),zb[0]=nc,zb[1]=xc,zb[2]=tc,zb[3]=Ya;Mb=ea.cull_enable;Mb!==Z.cull_enable&&(Mb?U.enable(2884):U.disable(2884),Z.cull_enable=Mb);Ec=ea.cull_face;Ec!==Z.cull_face&&(U.cullFace(Ec),Z.cull_face=Ec);Fa=ea.frontFace;Fa!==Z.frontFace&&(U.frontFace(Fa),Z.frontFace=Fa);yc=ea.lineWidth;yc!==Z.lineWidth&&(U.lineWidth(yc),Z.lineWidth=yc);Va=ea.polygonOffset_enable;Va!==Z.polygonOffset_enable&&(Va?U.enable(32823):U.disable(32823),Z.polygonOffset_enable=
Va);Ba=P[0];mb=P[1];if(Ba!==G[0]||mb!==G[1])U.polygonOffset(Ba,mb),G[0]=Ba,G[1]=mb;sb=ea.sample_alpha;sb!==Z.sample_alpha&&(sb?U.enable(32926):U.disable(32926),Z.sample_alpha=sb);Ab=ea.sample_enable;Ab!==Z.sample_enable&&(Ab?U.enable(32928):U.disable(32928),Z.sample_enable=Ab);qb=oa[0];uc=oa[1];if(qb!==Ha[0]||uc!==Ha[1])U.sampleCoverage(qb,uc),Ha[0]=qb,Ha[1]=uc;tb=ea.stencil_enable;tb!==Z.stencil_enable&&(tb?U.enable(2960):U.disable(2960),Z.stencil_enable=tb);Sc=ea.stencil_mask;Sc!==Z.stencil_mask&&
(U.stencilMask(Sc),Z.stencil_mask=Sc);rc=ta[0];sd=ta[1];Nc=ta[2];if(rc!==Q[0]||sd!==Q[1]||Nc!==Q[2])U.stencilFunc(rc,sd,Nc),Q[0]=rc,Q[1]=sd,Q[2]=Nc;cd=Ja[0];dd=Ja[1];Yb=Ja[2];dc=Ja[3];if(cd!==Ea[0]||dd!==Ea[1]||Yb!==Ea[2]||dc!==Ea[3])U.stencilOpSeparate(cd,dd,Yb,dc),Ea[0]=cd,Ea[1]=dd,Ea[2]=Yb,Ea[3]=dc;Pb=M[0];Ga=M[1];bc=M[2];wb=M[3];if(Pb!==ja[0]||Ga!==ja[1]||bc!==ja[2]||wb!==ja[3])U.stencilOpSeparate(Pb,Ga,bc,wb),ja[0]=Pb,ja[1]=Ga,ja[2]=bc,ja[3]=wb}l=b.viewport;d=l.x|0;r=l.y|0;g="width"in l?l.width|
0:ka.framebufferWidth-d;f="height"in l?l.height|0:ka.framebufferHeight-r;q=ka.viewportWidth;ka.viewportWidth=g;x=ka.viewportHeight;ka.viewportHeight=f;U.viewport(d,r,g,f);K[0]=d;K[1]=r;K[2]=g;K[3]=f;U.blendColor(0,0,0,0);Jc[0]=0;Jc[1]=0;Jc[2]=0;Jc[3]=0;U.enable(3042);Z.blend_enable=!0;U.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;U.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;U.disable(2929);Z.depth_enable=!1;B=b.viewport;t=B.x|0;y=B.y|0;L="width"in B?B.width|
0:ka.framebufferWidth-t;W="height"in B?B.height|0:ka.framebufferHeight-y;U.scissor(t,y,L,W);ca[0]=t;ca[1]=y;ca[2]=L;ca[3]=W;U.enable(3089);Z.scissor_enable=!0;if(N=Z.profile)H=performance.now(),k.count++;U.useProgram(D.program);h=Qa.angle_instanced_arrays;Cb.setVAO(null);F=n.call(this,ka,b,0);Jb.offset=F;A=!1;C=null;I=0;u=!1;na=fa=0;R=1;aa=0;ba=5126;Eb=pa=La=Y=0;Na(Jb)?(A=!0,C=E.createStream(34962,Jb),ba=C.dtype):(C=E.getBuffer(Jb))?ba=C.dtype:"constant"in Jb?(R=2,"number"===typeof Jb.constant?(La=
Jb.constant,pa=Eb=Y=0):(La=0<Jb.constant.length?Jb.constant[0]:0,pa=1<Jb.constant.length?Jb.constant[1]:0,Eb=2<Jb.constant.length?Jb.constant[2]:0,Y=3<Jb.constant.length?Jb.constant[3]:0)):(C=Na(Jb.buffer)?E.createStream(34962,Jb.buffer):E.getBuffer(Jb.buffer),ba="type"in Jb?sc[Jb.type]:C.dtype,u=!!Jb.normalized,na=Jb.size|0,fa=Jb.offset|0,aa=Jb.stride|0,I=Jb.divisor|0);Xa=ga.location;eb=X[Xa];if(1===R){eb.buffer||U.enableVertexAttribArray(Xa);yb=na||2;if(eb.type!==ba||eb.size!==yb||eb.buffer!==C||
eb.normalized!==u||eb.offset!==fa||eb.stride!==aa)U.bindBuffer(34962,C.buffer),U.vertexAttribPointer(Xa,yb,ba,u,aa,fa),eb.type=ba,eb.size=yb,eb.buffer=C,eb.normalized=u,eb.offset=fa,eb.stride=aa;eb.divisor!==I&&(h.vertexAttribDivisorANGLE(Xa,I),eb.divisor=I)}else if(eb.buffer&&(U.disableVertexAttribArray(Xa),eb.buffer=null),eb.x!==La||eb.y!==pa||eb.z!==Eb||eb.w!==Y)U.vertexAttrib4f(Xa,La,pa,Eb,Y),eb.x=La,eb.y=pa,eb.z=Eb,eb.w=Y;Rb=v.call(this,ka,b,0);ub.offset=Rb;vc=!1;fb=null;gd=0;kc=!1;yd=qc=0;pd=
1;Lc=0;jc=5126;Rc=ic=hd=Zc=0;Na(ub)?(vc=!0,fb=E.createStream(34962,ub),jc=fb.dtype):(fb=E.getBuffer(ub))?jc=fb.dtype:"constant"in ub?(pd=2,"number"===typeof ub.constant?(hd=ub.constant,ic=Rc=Zc=0):(hd=0<ub.constant.length?ub.constant[0]:0,ic=1<ub.constant.length?ub.constant[1]:0,Rc=2<ub.constant.length?ub.constant[2]:0,Zc=3<ub.constant.length?ub.constant[3]:0)):(fb=Na(ub.buffer)?E.createStream(34962,ub.buffer):E.getBuffer(ub.buffer),jc="type"in ub?sc[ub.type]:fb.dtype,kc=!!ub.normalized,yd=ub.size|
0,qc=ub.offset|0,Lc=ub.stride|0,gd=ub.divisor|0);Xb=O.location;Ra=X[Xb];if(1===pd){Ra.buffer||U.enableVertexAttribArray(Xb);Ad=yd||2;if(Ra.type!==jc||Ra.size!==Ad||Ra.buffer!==fb||Ra.normalized!==kc||Ra.offset!==qc||Ra.stride!==Lc)U.bindBuffer(34962,fb.buffer),U.vertexAttribPointer(Xb,Ad,jc,kc,Lc,qc),Ra.type=jc,Ra.size=Ad,Ra.buffer=fb,Ra.normalized=kc,Ra.offset=qc,Ra.stride=Lc;Ra.divisor!==gd&&(h.vertexAttribDivisorANGLE(Xb,gd),Ra.divisor=gd)}else if(Ra.buffer&&(U.disableVertexAttribArray(Xb),Ra.buffer=
null),Ra.x!==hd||Ra.y!==ic||Ra.z!==Rc||Ra.w!==Zc)U.vertexAttrib4f(Xb,hd,ic,Rc,Zc),Ra.x=hd,Ra.y=ic,Ra.z=Rc,Ra.w=Zc;lc=z.call(this,ka,b,0);qa.offset=lc;rb=!1;Hb=null;cb=0;$b=!1;kd=Sb=0;cc=1;Tb=0;Mc=5126;Ib=Fb=Pa=Ub=0;Na(qa)?(rb=!0,Hb=E.createStream(34962,qa),Mc=Hb.dtype):(Hb=E.getBuffer(qa))?Mc=Hb.dtype:"constant"in qa?(cc=2,"number"===typeof qa.constant?(Pa=qa.constant,Fb=Ib=Ub=0):(Pa=0<qa.constant.length?qa.constant[0]:0,Fb=1<qa.constant.length?qa.constant[1]:0,Ib=2<qa.constant.length?qa.constant[2]:
0,Ub=3<qa.constant.length?qa.constant[3]:0)):(Hb=Na(qa.buffer)?E.createStream(34962,qa.buffer):E.getBuffer(qa.buffer),Mc="type"in qa?sc[qa.type]:Hb.dtype,$b=!!qa.normalized,kd=qa.size|0,Sb=qa.offset|0,Tb=qa.stride|0,cb=qa.divisor|0);ib=ab.location;Sa=X[ib];if(1===cc){Sa.buffer||U.enableVertexAttribArray(ib);pc=kd||4;if(Sa.type!==Mc||Sa.size!==pc||Sa.buffer!==Hb||Sa.normalized!==$b||Sa.offset!==Sb||Sa.stride!==Tb)U.bindBuffer(34962,Hb.buffer),U.vertexAttribPointer(ib,pc,Mc,$b,Tb,Sb),Sa.type=Mc,Sa.size=
pc,Sa.buffer=Hb,Sa.normalized=$b,Sa.offset=Sb,Sa.stride=Tb;Sa.divisor!==cb&&(h.vertexAttribDivisorANGLE(ib,cb),Sa.divisor=cb)}else if(Sa.buffer&&(U.disableVertexAttribArray(ib),Sa.buffer=null),Sa.x!==Pa||Sa.y!==Fb||Sa.z!==Ib||Sa.w!==Ub)U.vertexAttrib4f(ib,Pa,Fb,Ib,Ub),Sa.x=Pa,Sa.y=Fb,Sa.z=Ib,Sa.w=Ub;ac=w.call(this,ka,b,0);Zb.offset=ac;Dc=!1;db=null;mc=0;Hc=!1;kb=oc=0;lb=1;va=0;nb=5126;Ia=bb=Wa=ya=0;Na(Zb)?(Dc=!0,db=E.createStream(34962,Zb),nb=db.dtype):(db=E.getBuffer(Zb))?nb=db.dtype:"constant"in
Zb?(lb=2,"number"===typeof Zb.constant?(Wa=Zb.constant,bb=Ia=ya=0):(Wa=0<Zb.constant.length?Zb.constant[0]:0,bb=1<Zb.constant.length?Zb.constant[1]:0,Ia=2<Zb.constant.length?Zb.constant[2]:0,ya=3<Zb.constant.length?Zb.constant[3]:0)):(db=Na(Zb.buffer)?E.createStream(34962,Zb.buffer):E.getBuffer(Zb.buffer),nb="type"in Zb?sc[Zb.type]:db.dtype,Hc=!!Zb.normalized,kb=Zb.size|0,oc=Zb.offset|0,va=Zb.stride|0,mc=Zb.divisor|0);gb=ia.location;Oa=X[gb];if(1===lb){Oa.buffer||U.enableVertexAttribArray(gb);xb=
kb||4;if(Oa.type!==nb||Oa.size!==xb||Oa.buffer!==db||Oa.normalized!==Hc||Oa.offset!==oc||Oa.stride!==va)U.bindBuffer(34962,db.buffer),U.vertexAttribPointer(gb,xb,nb,Hc,va,oc),Oa.type=nb,Oa.size=xb,Oa.buffer=db,Oa.normalized=Hc,Oa.offset=oc,Oa.stride=va;Oa.divisor!==mc&&(h.vertexAttribDivisorANGLE(gb,mc),Oa.divisor=mc)}else if(Oa.buffer&&(U.disableVertexAttribArray(gb),Oa.buffer=null),Oa.x!==Wa||Oa.y!==bb||Oa.z!==Ia||Oa.w!==ya)U.vertexAttrib4f(gb,Wa,bb,Ia,ya),Oa.x=Wa,Oa.y=bb,Oa.z=Ia,Oa.w=ya;vb=ua.location;
Ua=X[vb];Ua.buffer||U.enableVertexAttribArray(vb);if(5126!==Ua.type||2!==Ua.size||Ua.buffer!==p||!1!==Ua.normalized||0!==Ua.offset||24!==Ua.stride)U.bindBuffer(34962,p.buffer),U.vertexAttribPointer(vb,2,5126,!1,24,0),Ua.type=5126,Ua.size=2,Ua.buffer=p,Ua.normalized=!1,Ua.offset=0,Ua.stride=24;0!==Ua.divisor&&(h.vertexAttribDivisorANGLE(vb,0),Ua.divisor=0);wc=ma.location;Kb=X[wc];Kb.buffer||U.enableVertexAttribArray(wc);if(5126!==Kb.type||2!==Kb.size||Kb.buffer!==e||!1!==Kb.normalized||8!==Kb.offset||
24!==Kb.stride)U.bindBuffer(34962,e.buffer),U.vertexAttribPointer(wc,2,5126,!1,24,8),Kb.type=5126,Kb.size=2,Kb.buffer=e,Kb.normalized=!1,Kb.offset=8,Kb.stride=24;0!==Kb.divisor&&(h.vertexAttribDivisorANGLE(wc,0),Kb.divisor=0);Lb=J.location;Vb=X[Lb];Vb.buffer||U.enableVertexAttribArray(Lb);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==c||!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)U.bindBuffer(34962,c.buffer),U.vertexAttribPointer(Lb,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=c,Vb.normalized=
!1,Vb.offset=16,Vb.stride=24;0!==Vb.divisor&&(h.vertexAttribDivisorANGLE(Lb,0),Vb.divisor=0);Ca=m.call(this,ka,b,0);U.uniform4f(Ta.location,Ca[0],Ca[1],Ca[2],Ca[3]);U.uniform1f(za.location,b.lineWidth);U.uniform1f(la.location,b.capSize);xd=b.scale;U.uniform2f(T.location,xd[0],xd[1]);Ma=b.scaleFract;U.uniform2f(ra.location,Ma[0],Ma[1]);Ob=b.translate;U.uniform2f(S.location,Ob[0],Ob[1]);hb=b.translateFract;U.uniform2f(Gb.location,hb[0],hb[1]);U.uniform1f(da.location,b.opacity);(jb=sa.elements)?U.bindBuffer(34963,
jb.buffer.buffer):Cb.currentVAO&&(jb=wa.getElements(Cb.currentVAO.elements))&&U.bindBuffer(34963,jb.buffer.buffer);xa=sa.offset;ec=b.count;0<ec?jb?h.drawElementsInstancedANGLE(4,36,jb.type,xa<<(jb.type-5121>>1),ec):h.drawArraysInstancedANGLE(4,xa,36,ec):0>ec&&(jb?U.drawElements(4,36,jb.type,xa<<(jb.type-5121>>1)):U.drawArrays(4,xa,36));Z.dirty=!0;Cb.setVAO(null);ka.viewportWidth=q;ka.viewportHeight=x;N&&(k.cpuTime+=performance.now()-H);A&&E.destroyStream(C);vc&&E.destroyStream(fb);rb&&E.destroyStream(Hb);
Dc&&E.destroyStream(db)},scope:function(a,d,r){var g,f,m,q,n,t,v,J,D,w,z,N,la,F,ia,I,fa,K,M,G,ua,ba,O,P,Q,V,ja,T,S,X,U,ha,da,ga,ca,oa,ma,ab,Cb,ra,Ha,Ea,za,Ja,ta,Aa,Ra,Jc,Ta,rb,Gb,cb,zb,Ac,wa,cc,Tb,Ka,Ub,Pa,Fb,Ib,ib,Sa,Qa,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,Kc,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,wf,Bd,Qe,Ke,le,Md,
Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf,Se,Le,se,De,Fe,Ge,He,Ee,Nd;g=a.viewport;f=g.x|0;m=g.y|0;q="width"in g?g.width|0:ka.framebufferWidth-f;n="height"in g?g.height|0:ka.framebufferHeight-m;t=ka.viewportWidth;ka.viewportWidth=q;v=ka.viewportHeight;ka.viewportHeight=n;J=La[0];La[0]=f;D=La[1];La[1]=m;w=La[2];La[2]=q;z=La[3];La[3]=n;N=yb[0];yb[0]=0;la=yb[1];yb[1]=0;F=yb[2];yb[2]=0;ia=yb[3];yb[3]=0;I=ea.blend_enable;ea.blend_enable=!0;fa=Eb[0];Eb[0]=
32774;K=Eb[1];Eb[1]=32774;M=R[0];R[0]=770;G=R[1];R[1]=771;ua=R[2];R[2]=773;ba=R[3];R[3]=1;O=ea.depth_enable;ea.depth_enable=!1;P=a.viewport;Q=P.x|0;V=P.y|0;ja="width"in P?P.width|0:ka.framebufferWidth-Q;T="height"in P?P.height|0:ka.framebufferHeight-V;S=Y[0];Y[0]=Q;X=Y[1];Y[1]=V;U=Y[2];Y[2]=ja;ha=Y[3];Y[3]=T;da=ea.scissor_enable;ea.scissor_enable=!0;if(ga=Z.profile)ca=performance.now(),k.count++;oa=sa.count;sa.count=36;ma=a.count;ab=sa.instances;sa.instances=ma;Cb=sa.primitive;sa.primitive=4;ra=a.capSize;
Ha=Xa[5];Xa[5]=ra;Ea=a.lineWidth;za=Xa[4];Xa[4]=Ea;Ja=a.opacity;ta=Xa[10];Xa[10]=Ja;Aa=a.range;Ra=Xa[18];Xa[18]=Aa;Jc=a.scale;Ta=Xa[6];Xa[6]=Jc;rb=a.scaleFract;Gb=Xa[7];Xa[7]=rb;cb=a.translate;zb=Xa[8];Xa[8]=cb;Ac=a.translateFract;wa=Xa[9];Xa[9]=Ac;cc=x.call(this,ka,a,r);Tb=Xa[3];Xa[3]=cc;Ka=y.buffer;y.buffer=c;Ub=y.divisor;y.divisor=0;Pa=y.normalized;y.normalized=!1;Fb=y.offset;y.offset=16;Ib=y.size;y.size=0;ib=y.state;y.state=1;Sa=y.stride;y.stride=24;Qa=y.type;y.type=5126;ac=y.w;y.w=0;Dc=y.x;y.x=
0;db=y.y;y.y=0;mc=y.z;y.z=0;Hc=H.call(this,ka,a,r);Zb.offset=Hc;oc=!1;kb=null;lb=0;va=!1;ya=nb=0;Wa=1;bb=0;Ia=5126;vb=xb=Oa=gb=0;Na(Zb)?(oc=!0,kb=E.createStream(34962,Zb),Ia=kb.dtype):(kb=E.getBuffer(Zb))?Ia=kb.dtype:"constant"in Zb?(Wa=2,"number"===typeof Zb.constant?(Oa=Zb.constant,xb=vb=gb=0):(Oa=0<Zb.constant.length?Zb.constant[0]:0,xb=1<Zb.constant.length?Zb.constant[1]:0,vb=2<Zb.constant.length?Zb.constant[2]:0,gb=3<Zb.constant.length?Zb.constant[3]:0)):(kb=Na(Zb.buffer)?E.createStream(34962,
Zb.buffer):E.getBuffer(Zb.buffer),Ia="type"in Zb?sc[Zb.type]:kb.dtype,va=!!Zb.normalized,ya=Zb.size|0,nb=Zb.offset|0,bb=Zb.stride|0,lb=Zb.divisor|0);Ua=h.buffer;h.buffer=kb;wc=h.divisor;h.divisor=lb;Kb=h.normalized;h.normalized=va;Lb=h.offset;h.offset=nb;Vb=h.size;h.size=ya;Ca=h.state;h.state=Wa;Kc=h.stride;h.stride=bb;Ma=h.type;h.type=Ia;Ob=h.w;h.w=gb;hb=h.x;h.x=Oa;jb=h.y;h.y=xb;xa=h.z;h.z=vb;ec=A.buffer;A.buffer=p;Da=A.divisor;A.divisor=0;ob=A.normalized;A.normalized=!1;pb=A.offset;A.offset=0;Za=
A.size;A.size=0;$a=A.state;A.state=1;nc=A.stride;A.stride=24;xc=A.type;A.type=5126;tc=A.w;A.w=0;Ya=A.x;A.x=0;Mb=A.y;A.y=0;Ec=A.z;A.z=0;Fa=u.call(this,ka,a,r);qa.offset=Fa;yc=!1;Va=null;Ba=0;mb=!1;Ab=sb=0;qb=1;uc=0;tb=5126;Nc=sd=rc=Sc=0;Na(qa)?(yc=!0,Va=E.createStream(34962,qa),tb=Va.dtype):(Va=E.getBuffer(qa))?tb=Va.dtype:"constant"in qa?(qb=2,"number"===typeof qa.constant?(rc=qa.constant,sd=Nc=Sc=0):(rc=0<qa.constant.length?qa.constant[0]:0,sd=1<qa.constant.length?qa.constant[1]:0,Nc=2<qa.constant.length?
qa.constant[2]:0,Sc=3<qa.constant.length?qa.constant[3]:0)):(Va=Na(qa.buffer)?E.createStream(34962,qa.buffer):E.getBuffer(qa.buffer),tb="type"in qa?sc[qa.type]:Va.dtype,mb=!!qa.normalized,Ab=qa.size|0,sb=qa.offset|0,uc=qa.stride|0,Ba=qa.divisor|0);cd=C.buffer;C.buffer=Va;dd=C.divisor;C.divisor=Ba;Yb=C.normalized;C.normalized=mb;dc=C.offset;C.offset=sb;Pb=C.size;C.size=Ab;Ga=C.state;C.state=qb;bc=C.stride;C.stride=uc;wb=C.type;C.type=tb;Bb=C.w;C.w=Sc;Nb=C.x;C.x=rc;Qb=C.y;C.y=sd;fc=C.z;C.z=Nc;hc=b.buffer;
b.buffer=e;Tc=b.divisor;b.divisor=0;Bc=b.normalized;b.normalized=!1;Cc=b.offset;b.offset=8;Fc=b.size;b.size=0;Oc=b.state;b.state=1;ed=b.stride;b.stride=24;Uc=b.type;b.type=5126;Pc=b.w;b.w=0;Wb=b.x;b.x=0;Db=b.y;b.y=0;Qc=b.z;b.z=0;Ic=l.call(this,ka,a,r);Jb.offset=Ic;Vc=!1;gc=null;$c=0;id=!1;vd=qd=0;ad=1;wf=0;Bd=5126;Md=le=Ke=Qe=0;Na(Jb)?(Vc=!0,gc=E.createStream(34962,Jb),Bd=gc.dtype):(gc=E.getBuffer(Jb))?Bd=gc.dtype:"constant"in Jb?(ad=2,"number"===typeof Jb.constant?(Ke=Jb.constant,le=Md=Qe=0):(Ke=
0<Jb.constant.length?Jb.constant[0]:0,le=1<Jb.constant.length?Jb.constant[1]:0,Md=2<Jb.constant.length?Jb.constant[2]:0,Qe=3<Jb.constant.length?Jb.constant[3]:0)):(gc=Na(Jb.buffer)?E.createStream(34962,Jb.buffer):E.getBuffer(Jb.buffer),Bd="type"in Jb?sc[Jb.type]:gc.dtype,id=!!Jb.normalized,vd=Jb.size|0,qd=Jb.offset|0,wf=Jb.stride|0,$c=Jb.divisor|0);Kd=B.buffer;B.buffer=gc;ld=B.divisor;B.divisor=$c;Gc=B.normalized;B.normalized=id;td=B.offset;B.offset=qd;md=B.size;B.size=vd;bd=B.state;B.state=ad;nd=
B.stride;B.stride=wf;Dd=B.type;B.type=Bd;Ed=B.w;B.w=Qe;te=B.x;B.x=Ke;xe=B.y;B.y=le;Ze=B.z;B.z=Md;me=L.call(this,ka,a,r);ub.offset=me;fe=!1;de=null;qe=0;$d=!1;zc=ge=0;Yc=1;re=0;je=5126;Sd=Rd=Qd=Ld=0;Na(ub)?(fe=!0,de=E.createStream(34962,ub),je=de.dtype):(de=E.getBuffer(ub))?je=de.dtype:"constant"in ub?(Yc=2,"number"===typeof ub.constant?(Qd=ub.constant,Rd=Sd=Ld=0):(Qd=0<ub.constant.length?ub.constant[0]:0,Rd=1<ub.constant.length?ub.constant[1]:0,Sd=2<ub.constant.length?ub.constant[2]:0,Ld=3<ub.constant.length?
ub.constant[3]:0)):(de=Na(ub.buffer)?E.createStream(34962,ub.buffer):E.getBuffer(ub.buffer),je="type"in ub?sc[ub.type]:de.dtype,$d=!!ub.normalized,zc=ub.size|0,ge=ub.offset|0,re=ub.stride|0,qe=ub.divisor|0);he=W.buffer;W.buffer=de;Re=W.divisor;W.divisor=qe;ze=W.normalized;W.normalized=$d;ne=W.offset;W.offset=ge;bf=W.size;W.size=zc;Se=W.state;W.state=Yc;Le=W.stride;W.stride=re;se=W.type;W.type=je;De=W.w;W.w=Ld;Fe=W.x;W.x=Qd;Ge=W.y;W.y=Rd;He=W.z;W.z=Sd;Ee=pa.vert;pa.vert=2;Nd=pa.frag;pa.frag=1;Z.dirty=
!0;d(ka,a,r);ka.viewportWidth=t;ka.viewportHeight=v;La[0]=J;La[1]=D;La[2]=w;La[3]=z;yb[0]=N;yb[1]=la;yb[2]=F;yb[3]=ia;ea.blend_enable=I;Eb[0]=fa;Eb[1]=K;R[0]=M;R[1]=G;R[2]=ua;R[3]=ba;ea.depth_enable=O;Y[0]=S;Y[1]=X;Y[2]=U;Y[3]=ha;ea.scissor_enable=da;ga&&(k.cpuTime+=performance.now()-ca);sa.count=oa;sa.instances=ab;sa.primitive=Cb;Xa[5]=Ha;Xa[4]=za;Xa[10]=ta;Xa[18]=Ra;Xa[6]=Ta;Xa[7]=Gb;Xa[8]=zb;Xa[9]=wa;Xa[3]=Tb;y.buffer=Ka;y.divisor=Ub;y.normalized=Pa;y.offset=Fb;y.size=Ib;y.state=ib;y.stride=Sa;
y.type=Qa;y.w=ac;y.x=Dc;y.y=db;y.z=mc;oc&&E.destroyStream(kb);h.buffer=Ua;h.divisor=wc;h.normalized=Kb;h.offset=Lb;h.size=Vb;h.state=Ca;h.stride=Kc;h.type=Ma;h.w=Ob;h.x=hb;h.y=jb;h.z=xa;A.buffer=ec;A.divisor=Da;A.normalized=ob;A.offset=pb;A.size=Za;A.state=$a;A.stride=nc;A.type=xc;A.w=tc;A.x=Ya;A.y=Mb;A.z=Ec;yc&&E.destroyStream(Va);C.buffer=cd;C.divisor=dd;C.normalized=Yb;C.offset=dc;C.size=Pb;C.state=Ga;C.stride=bc;C.type=wb;C.w=Bb;C.x=Nb;C.y=Qb;C.z=fc;b.buffer=hc;b.divisor=Tc;b.normalized=Bc;b.offset=
Cc;b.size=Fc;b.state=Oc;b.stride=ed;b.type=Uc;b.w=Pc;b.x=Wb;b.y=Db;b.z=Qc;Vc&&E.destroyStream(gc);B.buffer=Kd;B.divisor=ld;B.normalized=Gc;B.offset=td;B.size=md;B.state=bd;B.stride=nd;B.type=Dd;B.w=Ed;B.x=te;B.y=xe;B.z=Ze;fe&&E.destroyStream(de);W.buffer=he;W.divisor=Re;W.normalized=ze;W.offset=ne;W.size=bf;W.state=Se;W.stride=Le;W.type=se;W.w=De;W.x=Fe;W.y=Ge;W.z=He;pa.vert=Ee;pa.frag=Nd;Z.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,H,h,A,u,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua){var ab,ma,za,da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa,Xa,Cb,yb,Jc,Eb,V,R,ha,Aa,zb,Ac,Kc,P,G,oa,Ha,Y,ca,ta,Q,M;ab=a.attributes;ma=a.buffer;za=a.context;da=a.current;ga=a.draw;O=a.elements;T=a.extensions;ra=a.framebuffer;S=a.gl;Gb=a.isBufferArgs;Ta=a.next;X=a.shader;E=a.uniforms;ka=a.vao;Z=Ta.blend_color;sa=da.blend_color;wa=Ta.blend_equation;Qa=da.blend_equation;Ka=Ta.blend_func;U=da.blend_func;Na=Ta.colorMask;
ea=da.colorMask;pa=Ta.depth_range;Xa=da.depth_range;Cb=Ta.polygonOffset_offset;yb=da.polygonOffset_offset;Jc=Ta.sample_coverage;Eb=da.sample_coverage;V=Ta.scissor_box;R=da.scissor_box;ha=Ta.stencil_func;Aa=da.stencil_func;zb=Ta.stencil_opBack;Ac=da.stencil_opBack;Kc=Ta.stencil_opFront;P=da.stencil_opFront;G=Ta.viewport;oa=da.viewport;Ha={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:8,stride:8};ca={divisor:1,offset:8,stride:8};ta=
{divisor:1,offset:16,stride:8};Q={divisor:1,offset:16,stride:8};M={divisor:1,offset:0,stride:4};return{batch:function(a,c){var e,g,m,p,q,n;e=ra.next;e!==ra.cur&&(e?S.bindFramebuffer(36160,e.framebuffer):S.bindFramebuffer(36160,null),ra.cur=e);if(da.dirty){var x,y,t,v,D,w,z,E,G,V,X,Z,wa,Ka,Jd,Oe,Ye,Pe,Gd,ye,oe,pe,ce,Pd,wd,od,Cd,fd,zd,Wc,Id,ud;x=Ta.dither;x!==da.dither&&(x?S.enable(3024):S.disable(3024),da.dither=x);y=Ta.depth_func;y!==da.depth_func&&(S.depthFunc(y),da.depth_func=y);t=pa[0];v=pa[1];
if(t!==Xa[0]||v!==Xa[1])S.depthRange(t,v),Xa[0]=t,Xa[1]=v;D=Ta.depth_mask;D!==da.depth_mask&&(S.depthMask(D),da.depth_mask=D);w=Na[0];z=Na[1];E=Na[2];G=Na[3];if(w!==ea[0]||z!==ea[1]||E!==ea[2]||G!==ea[3])S.colorMask(w,z,E,G),ea[0]=w,ea[1]=z,ea[2]=E,ea[3]=G;V=Ta.cull_enable;V!==da.cull_enable&&(V?S.enable(2884):S.disable(2884),da.cull_enable=V);X=Ta.cull_face;X!==da.cull_face&&(S.cullFace(X),da.cull_face=X);Z=Ta.frontFace;Z!==da.frontFace&&(S.frontFace(Z),da.frontFace=Z);wa=Ta.lineWidth;wa!==da.lineWidth&&
(S.lineWidth(wa),da.lineWidth=wa);Ka=Ta.polygonOffset_enable;Ka!==da.polygonOffset_enable&&(Ka?S.enable(32823):S.disable(32823),da.polygonOffset_enable=Ka);Jd=Cb[0];Oe=Cb[1];if(Jd!==yb[0]||Oe!==yb[1])S.polygonOffset(Jd,Oe),yb[0]=Jd,yb[1]=Oe;Ye=Ta.sample_alpha;Ye!==da.sample_alpha&&(Ye?S.enable(32926):S.disable(32926),da.sample_alpha=Ye);Pe=Ta.sample_enable;Pe!==da.sample_enable&&(Pe?S.enable(32928):S.disable(32928),da.sample_enable=Pe);Gd=Jc[0];ye=Jc[1];if(Gd!==Eb[0]||ye!==Eb[1])S.sampleCoverage(Gd,
ye),Eb[0]=Gd,Eb[1]=ye;oe=Ta.stencil_mask;oe!==da.stencil_mask&&(S.stencilMask(oe),da.stencil_mask=oe);pe=ha[0];ce=ha[1];Pd=ha[2];if(pe!==Aa[0]||ce!==Aa[1]||Pd!==Aa[2])S.stencilFunc(pe,ce,Pd),Aa[0]=pe,Aa[1]=ce,Aa[2]=Pd;wd=Kc[0];od=Kc[1];Cd=Kc[2];fd=Kc[3];if(wd!==P[0]||od!==P[1]||Cd!==P[2]||fd!==P[3])S.stencilOpSeparate(wd,od,Cd,fd),P[0]=wd,P[1]=od,P[2]=Cd,P[3]=fd;zd=zb[0];Wc=zb[1];Id=zb[2];ud=zb[3];if(zd!==Ac[0]||Wc!==Ac[1]||Id!==Ac[2]||ud!==Ac[3])S.stencilOpSeparate(zd,Wc,Id,ud),Ac[0]=zd,Ac[1]=Wc,
Ac[2]=Id,Ac[3]=ud}S.blendColor(0,0,0,0);sa[0]=0;sa[1]=0;sa[2]=0;sa[3]=0;S.enable(3042);da.blend_enable=!0;S.blendEquationSeparate(32774,32774);Qa[0]=32774;Qa[1]=32774;S.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;S.enable(3089);da.scissor_enable=!0;S.disable(2960);da.stencil_enable=!1;if(g=da.profile)m=performance.now(),k.count+=c;S.useProgram(H.program);p=T.angle_instanced_arrays;var rd,Xc,eb,jd,Rb;ka.setVAO(null);rd=fa.location;Xc=ab[rd];Xc.buffer||S.enableVertexAttribArray(rd);
if(5126!==Xc.type||1!==Xc.size||Xc.buffer!==f||!1!==Xc.normalized||0!==Xc.offset||8!==Xc.stride)S.bindBuffer(34962,f.buffer),S.vertexAttribPointer(rd,1,5126,!1,8,0),Xc.type=5126,Xc.size=1,Xc.buffer=f,Xc.normalized=!1,Xc.offset=0,Xc.stride=8;0!==Xc.divisor&&(p.vertexAttribDivisorANGLE(rd,0),Xc.divisor=0);eb=N.location;jd=ab[eb];jd.buffer||S.enableVertexAttribArray(eb);if(5126!==jd.type||1!==jd.size||jd.buffer!==d||!1!==jd.normalized||4!==jd.offset||8!==jd.stride)S.bindBuffer(34962,d.buffer),S.vertexAttribPointer(eb,
1,5126,!1,8,4),jd.type=5126,jd.size=1,jd.buffer=d,jd.normalized=!1,jd.offset=4,jd.stride=8;0!==jd.divisor&&(p.vertexAttribDivisorANGLE(eb,0),jd.divisor=0);(Rb=ga.elements)?S.bindBuffer(34963,Rb.buffer.buffer):ka.currentVAO&&(Rb=O.getElements(ka.currentVAO.elements))&&S.bindBuffer(34963,Rb.buffer.buffer);for(q=0;q<c;++q){n=a[q];var vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,
Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,wf,Bd,Qe,Ke,le,Md,Kd,ld,Gc,td,md,bd;vc=n.viewport;fb=vc.x|0;gd=vc.y|0;kc="width"in vc?vc.width|0:za.framebufferWidth-fb;qc="height"in vc?vc.height|0:za.framebufferHeight-gd;yd=za.viewportWidth;za.viewportWidth=kc;pd=za.viewportHeight;za.viewportHeight=qc;S.viewport(fb,gd,kc,qc);oa[0]=fb;oa[1]=gd;oa[2]=kc;
oa[3]=qc;(Lc=h.call(this,za,n,q))?S.enable(2929):S.disable(2929);da.depth_enable=Lc;jc=n.viewport;Zc=jc.x|0;hd=jc.y|0;ic="width"in jc?jc.width|0:za.framebufferWidth-Zc;Rc="height"in jc?jc.height|0:za.framebufferHeight-hd;S.scissor(Zc,hd,ic,Rc);R[0]=Zc;R[1]=hd;R[2]=ic;R[3]=Rc;Y.buffer=n.positionBuffer;Xb=!1;Ra=null;Ad=0;lc=!1;Hb=rb=0;cb=1;$b=0;Sb=5126;Mc=Tb=cc=kd=0;Gb(Y)?(Xb=!0,Ra=ma.createStream(34962,Y),Sb=Ra.dtype):(Ra=ma.getBuffer(Y))?Sb=Ra.dtype:"constant"in Y?(cb=2,"number"===typeof Y.constant?
(cc=Y.constant,Tb=Mc=kd=0):(cc=0<Y.constant.length?Y.constant[0]:0,Tb=1<Y.constant.length?Y.constant[1]:0,Mc=2<Y.constant.length?Y.constant[2]:0,kd=3<Y.constant.length?Y.constant[3]:0)):(Ra=Gb(Y.buffer)?ma.createStream(34962,Y.buffer):ma.getBuffer(Y.buffer),Sb="type"in Y?Ha[Y.type]:Ra.dtype,lc=!!Y.normalized,Hb=Y.size|0,rb=Y.offset|0,$b=Y.stride|0,Ad=Y.divisor|0);Ub=u.location;Pa=ab[Ub];if(1===cb){Pa.buffer||S.enableVertexAttribArray(Ub);Fb=Hb||2;if(Pa.type!==Sb||Pa.size!==Fb||Pa.buffer!==Ra||Pa.normalized!==
lc||Pa.offset!==rb||Pa.stride!==$b)S.bindBuffer(34962,Ra.buffer),S.vertexAttribPointer(Ub,Fb,Sb,lc,$b,rb),Pa.type=Sb,Pa.size=Fb,Pa.buffer=Ra,Pa.normalized=lc,Pa.offset=rb,Pa.stride=$b;Pa.divisor!==Ad&&(p.vertexAttribDivisorANGLE(Ub,Ad),Pa.divisor=Ad)}else if(Pa.buffer&&(S.disableVertexAttribArray(Ub),Pa.buffer=null),Pa.x!==cc||Pa.y!==Tb||Pa.z!==Mc||Pa.w!==kd)S.vertexAttrib4f(Ub,cc,Tb,Mc,kd),Pa.x=cc,Pa.y=Tb,Pa.z=Mc,Pa.w=kd;ta.buffer=n.positionBuffer;Ib=!1;ib=null;Sa=0;pc=!1;Dc=ac=0;db=1;mc=0;Hc=5126;
va=lb=kb=oc=0;Gb(ta)?(Ib=!0,ib=ma.createStream(34962,ta),Hc=ib.dtype):(ib=ma.getBuffer(ta))?Hc=ib.dtype:"constant"in ta?(db=2,"number"===typeof ta.constant?(kb=ta.constant,lb=va=oc=0):(kb=0<ta.constant.length?ta.constant[0]:0,lb=1<ta.constant.length?ta.constant[1]:0,va=2<ta.constant.length?ta.constant[2]:0,oc=3<ta.constant.length?ta.constant[3]:0)):(ib=Gb(ta.buffer)?ma.createStream(34962,ta.buffer):ma.getBuffer(ta.buffer),Hc="type"in ta?Ha[ta.type]:ib.dtype,pc=!!ta.normalized,Dc=ta.size|0,ac=ta.offset|
0,mc=ta.stride|0,Sa=ta.divisor|0);nb=b.location;ya=ab[nb];if(1===db){ya.buffer||S.enableVertexAttribArray(nb);Wa=Dc||2;if(ya.type!==Hc||ya.size!==Wa||ya.buffer!==ib||ya.normalized!==pc||ya.offset!==ac||ya.stride!==mc)S.bindBuffer(34962,ib.buffer),S.vertexAttribPointer(nb,Wa,Hc,pc,mc,ac),ya.type=Hc,ya.size=Wa,ya.buffer=ib,ya.normalized=pc,ya.offset=ac,ya.stride=mc;ya.divisor!==Sa&&(p.vertexAttribDivisorANGLE(nb,Sa),ya.divisor=Sa)}else if(ya.buffer&&(S.disableVertexAttribArray(nb),ya.buffer=null),ya.x!==
kb||ya.y!==lb||ya.z!==va||ya.w!==oc)S.vertexAttrib4f(nb,kb,lb,va,oc),ya.x=kb,ya.y=lb,ya.z=va,ya.w=oc;ca.buffer=n.positionFractBuffer;bb=!1;Ia=null;gb=0;Oa=!1;vb=xb=0;Ua=1;wc=0;Kb=5126;xd=Ca=Vb=Lb=0;Gb(ca)?(bb=!0,Ia=ma.createStream(34962,ca),Kb=Ia.dtype):(Ia=ma.getBuffer(ca))?Kb=Ia.dtype:"constant"in ca?(Ua=2,"number"===typeof ca.constant?(Vb=ca.constant,Ca=xd=Lb=0):(Vb=0<ca.constant.length?ca.constant[0]:0,Ca=1<ca.constant.length?ca.constant[1]:0,xd=2<ca.constant.length?ca.constant[2]:0,Lb=3<ca.constant.length?
ca.constant[3]:0)):(Ia=Gb(ca.buffer)?ma.createStream(34962,ca.buffer):ma.getBuffer(ca.buffer),Kb="type"in ca?Ha[ca.type]:Ia.dtype,Oa=!!ca.normalized,vb=ca.size|0,xb=ca.offset|0,wc=ca.stride|0,gb=ca.divisor|0);Ma=C.location;Ob=ab[Ma];if(1===Ua){Ob.buffer||S.enableVertexAttribArray(Ma);hb=vb||2;if(Ob.type!==Kb||Ob.size!==hb||Ob.buffer!==Ia||Ob.normalized!==Oa||Ob.offset!==xb||Ob.stride!==wc)S.bindBuffer(34962,Ia.buffer),S.vertexAttribPointer(Ma,hb,Kb,Oa,wc,xb),Ob.type=Kb,Ob.size=hb,Ob.buffer=Ia,Ob.normalized=
Oa,Ob.offset=xb,Ob.stride=wc;Ob.divisor!==gb&&(p.vertexAttribDivisorANGLE(Ma,gb),Ob.divisor=gb)}else if(Ob.buffer&&(S.disableVertexAttribArray(Ma),Ob.buffer=null),Ob.x!==Vb||Ob.y!==Ca||Ob.z!==xd||Ob.w!==Lb)S.vertexAttrib4f(Ma,Vb,Ca,xd,Lb),Ob.x=Vb,Ob.y=Ca,Ob.z=xd,Ob.w=Lb;Q.buffer=n.positionFractBuffer;jb=!1;xa=null;ec=0;Da=!1;pb=ob=0;Za=1;$a=0;nc=5126;Mb=Ya=tc=xc=0;Gb(Q)?(jb=!0,xa=ma.createStream(34962,Q),nc=xa.dtype):(xa=ma.getBuffer(Q))?nc=xa.dtype:"constant"in Q?(Za=2,"number"===typeof Q.constant?
(tc=Q.constant,Ya=Mb=xc=0):(tc=0<Q.constant.length?Q.constant[0]:0,Ya=1<Q.constant.length?Q.constant[1]:0,Mb=2<Q.constant.length?Q.constant[2]:0,xc=3<Q.constant.length?Q.constant[3]:0)):(xa=Gb(Q.buffer)?ma.createStream(34962,Q.buffer):ma.getBuffer(Q.buffer),nc="type"in Q?Ha[Q.type]:xa.dtype,Da=!!Q.normalized,pb=Q.size|0,ob=Q.offset|0,$a=Q.stride|0,ec=Q.divisor|0);Ec=l.location;Fa=ab[Ec];if(1===Za){Fa.buffer||S.enableVertexAttribArray(Ec);yc=pb||2;if(Fa.type!==nc||Fa.size!==yc||Fa.buffer!==xa||Fa.normalized!==
Da||Fa.offset!==ob||Fa.stride!==$a)S.bindBuffer(34962,xa.buffer),S.vertexAttribPointer(Ec,yc,nc,Da,$a,ob),Fa.type=nc,Fa.size=yc,Fa.buffer=xa,Fa.normalized=Da,Fa.offset=ob,Fa.stride=$a;Fa.divisor!==ec&&(p.vertexAttribDivisorANGLE(Ec,ec),Fa.divisor=ec)}else if(Fa.buffer&&(S.disableVertexAttribArray(Ec),Fa.buffer=null),Fa.x!==tc||Fa.y!==Ya||Fa.z!==Mb||Fa.w!==xc)S.vertexAttrib4f(Ec,tc,Ya,Mb,xc),Fa.x=tc,Fa.y=Ya,Fa.z=Mb,Fa.w=xc;M.buffer=n.colorBuffer;Va=!1;Ba=null;mb=0;sb=!1;qb=Ab=0;uc=1;tb=0;Sc=5126;cd=
Nc=sd=rc=0;Gb(M)?(Va=!0,Ba=ma.createStream(34962,M),Sc=Ba.dtype):(Ba=ma.getBuffer(M))?Sc=Ba.dtype:"constant"in M?(uc=2,"number"===typeof M.constant?(sd=M.constant,Nc=cd=rc=0):(sd=0<M.constant.length?M.constant[0]:0,Nc=1<M.constant.length?M.constant[1]:0,cd=2<M.constant.length?M.constant[2]:0,rc=3<M.constant.length?M.constant[3]:0)):(Ba=Gb(M.buffer)?ma.createStream(34962,M.buffer):ma.getBuffer(M.buffer),Sc="type"in M?Ha[M.type]:Ba.dtype,sb=!!M.normalized,qb=M.size|0,Ab=M.offset|0,tb=M.stride|0,mb=
M.divisor|0);dd=B.location;Yb=ab[dd];if(1===uc){Yb.buffer||S.enableVertexAttribArray(dd);dc=qb||4;if(Yb.type!==Sc||Yb.size!==dc||Yb.buffer!==Ba||Yb.normalized!==sb||Yb.offset!==Ab||Yb.stride!==tb)S.bindBuffer(34962,Ba.buffer),S.vertexAttribPointer(dd,dc,Sc,sb,tb,Ab),Yb.type=Sc,Yb.size=dc,Yb.buffer=Ba,Yb.normalized=sb,Yb.offset=Ab,Yb.stride=tb;Yb.divisor!==mb&&(p.vertexAttribDivisorANGLE(dd,mb),Yb.divisor=mb)}else if(Yb.buffer&&(S.disableVertexAttribArray(dd),Yb.buffer=null),Yb.x!==sd||Yb.y!==Nc||
Yb.z!==cd||Yb.w!==rc)S.vertexAttrib4f(dd,sd,Nc,cd,rc),Yb.x=sd,Yb.y=Nc,Yb.z=cd,Yb.w=rc;Pb=n.scale;Ga=Pb[0];wb=Pb[1];q&&bc===Ga&&Bb===wb||(bc=Ga,Bb=wb,S.uniform2f(I.location,Ga,wb));Nb=n.scaleFract;Qb=Nb[0];hc=Nb[1];q&&fc===Qb&&Tc===hc||(fc=Qb,Tc=hc,S.uniform2f(r.location,Qb,hc));Bc=n.translate;Cc=Bc[0];Oc=Bc[1];q&&Fc===Cc&&ed===Oc||(Fc=Cc,ed=Oc,S.uniform2f(la.location,Cc,Oc));Uc=n.translateFract;Pc=Uc[0];Db=Uc[1];q&&Wb===Pc&&Qc===Db||(Wb=Pc,Qc=Db,S.uniform2f(ia.location,Pc,Db));Ic=n.thickness;q&&Vc===
Ic||(Vc=Ic,S.uniform1f(J.location,Ic));gc=n.depth;q&&$c===gc||($c=gc,S.uniform1f(F.location,gc));id=A.call(this,za,n,q);qd=id[0];ad=id[1];Bd=id[2];Ke=id[3];q&&vd===qd&&wf===ad&&Qe===Bd&&le===Ke||(vd=qd,wf=ad,Qe=Bd,le=Ke,S.uniform4f(ua.location,qd,ad,Bd,Ke));Md=n.dashLength;q&&Kd===Md||(Kd=Md,S.uniform1f(L.location,Md));ld=n.opacity;q&&Gc===ld||(Gc=ld,S.uniform1f(ba.location,ld));(td=n.dashTexture)&&"framebuffer"===td._reglType&&(td=td.color[0]);md=td._texture;S.uniform1i(W.location,md.bind());bd=
n.count;0<bd?Rb?p.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),bd):p.drawArraysInstancedANGLE(5,0,4,bd):0>bd&&(Rb?S.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):S.drawArrays(5,0,4));za.viewportWidth=yd;za.viewportHeight=pd;Xb&&ma.destroyStream(Ra);Ib&&ma.destroyStream(ib);bb&&ma.destroyStream(Ia);jb&&ma.destroyStream(xa);Va&&ma.destroyStream(Ba);md.unbind()}da.dirty=!0;ka.setVAO(null);g&&(k.cpuTime+=performance.now()-m)},draw:function(a){var c,e,m,p,n,x,y,t,v,w,z,H,h,A,na,E,G,V,X,
Z,wa,Jd,Oe,Ka,Pe,Gd,ye,oe,pe,ce,Pd,wd,od,Cd,fd,zd,Wc,Id,ud,rd,Xc,eb,jd,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob;c=ra.next;c!==ra.cur&&(c?S.bindFramebuffer(36160,c.framebuffer):S.bindFramebuffer(36160,null),ra.cur=c);if(da.dirty){var pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb;pb=Ta.dither;
pb!==da.dither&&(pb?S.enable(3024):S.disable(3024),da.dither=pb);Za=Ta.depth_func;Za!==da.depth_func&&(S.depthFunc(Za),da.depth_func=Za);$a=pa[0];nc=pa[1];if($a!==Xa[0]||nc!==Xa[1])S.depthRange($a,nc),Xa[0]=$a,Xa[1]=nc;xc=Ta.depth_mask;xc!==da.depth_mask&&(S.depthMask(xc),da.depth_mask=xc);tc=Na[0];Ya=Na[1];Mb=Na[2];Ec=Na[3];if(tc!==ea[0]||Ya!==ea[1]||Mb!==ea[2]||Ec!==ea[3])S.colorMask(tc,Ya,Mb,Ec),ea[0]=tc,ea[1]=Ya,ea[2]=Mb,ea[3]=Ec;Fa=Ta.cull_enable;Fa!==da.cull_enable&&(Fa?S.enable(2884):S.disable(2884),
da.cull_enable=Fa);yc=Ta.cull_face;yc!==da.cull_face&&(S.cullFace(yc),da.cull_face=yc);Va=Ta.frontFace;Va!==da.frontFace&&(S.frontFace(Va),da.frontFace=Va);Ba=Ta.lineWidth;Ba!==da.lineWidth&&(S.lineWidth(Ba),da.lineWidth=Ba);mb=Ta.polygonOffset_enable;mb!==da.polygonOffset_enable&&(mb?S.enable(32823):S.disable(32823),da.polygonOffset_enable=mb);sb=Cb[0];Ab=Cb[1];if(sb!==yb[0]||Ab!==yb[1])S.polygonOffset(sb,Ab),yb[0]=sb,yb[1]=Ab;qb=Ta.sample_alpha;qb!==da.sample_alpha&&(qb?S.enable(32926):S.disable(32926),
da.sample_alpha=qb);uc=Ta.sample_enable;uc!==da.sample_enable&&(uc?S.enable(32928):S.disable(32928),da.sample_enable=uc);tb=Jc[0];Sc=Jc[1];if(tb!==Eb[0]||Sc!==Eb[1])S.sampleCoverage(tb,Sc),Eb[0]=tb,Eb[1]=Sc;rc=Ta.stencil_mask;rc!==da.stencil_mask&&(S.stencilMask(rc),da.stencil_mask=rc);sd=ha[0];Nc=ha[1];cd=ha[2];if(sd!==Aa[0]||Nc!==Aa[1]||cd!==Aa[2])S.stencilFunc(sd,Nc,cd),Aa[0]=sd,Aa[1]=Nc,Aa[2]=cd;dd=Kc[0];Yb=Kc[1];dc=Kc[2];Pb=Kc[3];if(dd!==P[0]||Yb!==P[1]||dc!==P[2]||Pb!==P[3])S.stencilOpSeparate(dd,
Yb,dc,Pb),P[0]=dd,P[1]=Yb,P[2]=dc,P[3]=Pb;Ga=zb[0];bc=zb[1];wb=zb[2];Bb=zb[3];if(Ga!==Ac[0]||bc!==Ac[1]||wb!==Ac[2]||Bb!==Ac[3])S.stencilOpSeparate(Ga,bc,wb,Bb),Ac[0]=Ga,Ac[1]=bc,Ac[2]=wb,Ac[3]=Bb}e=a.viewport;m=e.x|0;p=e.y|0;n="width"in e?e.width|0:za.framebufferWidth-m;x="height"in e?e.height|0:za.framebufferHeight-p;y=za.viewportWidth;za.viewportWidth=n;t=za.viewportHeight;za.viewportHeight=x;S.viewport(m,p,n,x);oa[0]=m;oa[1]=p;oa[2]=n;oa[3]=x;S.blendColor(0,0,0,0);sa[0]=0;sa[1]=0;sa[2]=0;sa[3]=
0;S.enable(3042);da.blend_enable=!0;S.blendEquationSeparate(32774,32774);Qa[0]=32774;Qa[1]=32774;S.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;(v=g.call(this,za,a,0))?S.enable(2929):S.disable(2929);da.depth_enable=v;w=a.viewport;z=w.x|0;H=w.y|0;h="width"in w?w.width|0:za.framebufferWidth-z;A="height"in w?w.height|0:za.framebufferHeight-H;S.scissor(z,H,h,A);R[0]=z;R[1]=H;R[2]=h;R[3]=A;S.enable(3089);da.scissor_enable=!0;S.disable(2960);da.stencil_enable=!1;if(na=da.profile)E=
performance.now(),k.count++;S.useProgram(q.program);G=T.angle_instanced_arrays;ka.setVAO(null);Y.buffer=a.positionBuffer;V=!1;X=null;Z=0;wa=!1;Oe=Jd=0;Ka=1;Pe=0;Gd=5126;ce=pe=oe=ye=0;Gb(Y)?(V=!0,X=ma.createStream(34962,Y),Gd=X.dtype):(X=ma.getBuffer(Y))?Gd=X.dtype:"constant"in Y?(Ka=2,"number"===typeof Y.constant?(oe=Y.constant,pe=ce=ye=0):(oe=0<Y.constant.length?Y.constant[0]:0,pe=1<Y.constant.length?Y.constant[1]:0,ce=2<Y.constant.length?Y.constant[2]:0,ye=3<Y.constant.length?Y.constant[3]:0)):
(X=Gb(Y.buffer)?ma.createStream(34962,Y.buffer):ma.getBuffer(Y.buffer),Gd="type"in Y?Ha[Y.type]:X.dtype,wa=!!Y.normalized,Oe=Y.size|0,Jd=Y.offset|0,Pe=Y.stride|0,Z=Y.divisor|0);Pd=u.location;wd=ab[Pd];if(1===Ka){wd.buffer||S.enableVertexAttribArray(Pd);od=Oe||2;if(wd.type!==Gd||wd.size!==od||wd.buffer!==X||wd.normalized!==wa||wd.offset!==Jd||wd.stride!==Pe)S.bindBuffer(34962,X.buffer),S.vertexAttribPointer(Pd,od,Gd,wa,Pe,Jd),wd.type=Gd,wd.size=od,wd.buffer=X,wd.normalized=wa,wd.offset=Jd,wd.stride=
Pe;wd.divisor!==Z&&(G.vertexAttribDivisorANGLE(Pd,Z),wd.divisor=Z)}else if(wd.buffer&&(S.disableVertexAttribArray(Pd),wd.buffer=null),wd.x!==oe||wd.y!==pe||wd.z!==ce||wd.w!==ye)S.vertexAttrib4f(Pd,oe,pe,ce,ye),wd.x=oe,wd.y=pe,wd.z=ce,wd.w=ye;ta.buffer=a.positionBuffer;Cd=!1;fd=null;zd=0;Wc=!1;ud=Id=0;rd=1;Xc=0;eb=5126;fb=vc=Rb=jd=0;Gb(ta)?(Cd=!0,fd=ma.createStream(34962,ta),eb=fd.dtype):(fd=ma.getBuffer(ta))?eb=fd.dtype:"constant"in ta?(rd=2,"number"===typeof ta.constant?(Rb=ta.constant,vc=fb=jd=
0):(Rb=0<ta.constant.length?ta.constant[0]:0,vc=1<ta.constant.length?ta.constant[1]:0,fb=2<ta.constant.length?ta.constant[2]:0,jd=3<ta.constant.length?ta.constant[3]:0)):(fd=Gb(ta.buffer)?ma.createStream(34962,ta.buffer):ma.getBuffer(ta.buffer),eb="type"in ta?Ha[ta.type]:fd.dtype,Wc=!!ta.normalized,ud=ta.size|0,Id=ta.offset|0,Xc=ta.stride|0,zd=ta.divisor|0);gd=b.location;kc=ab[gd];if(1===rd){kc.buffer||S.enableVertexAttribArray(gd);qc=ud||2;if(kc.type!==eb||kc.size!==qc||kc.buffer!==fd||kc.normalized!==
Wc||kc.offset!==Id||kc.stride!==Xc)S.bindBuffer(34962,fd.buffer),S.vertexAttribPointer(gd,qc,eb,Wc,Xc,Id),kc.type=eb,kc.size=qc,kc.buffer=fd,kc.normalized=Wc,kc.offset=Id,kc.stride=Xc;kc.divisor!==zd&&(G.vertexAttribDivisorANGLE(gd,zd),kc.divisor=zd)}else if(kc.buffer&&(S.disableVertexAttribArray(gd),kc.buffer=null),kc.x!==Rb||kc.y!==vc||kc.z!==fb||kc.w!==jd)S.vertexAttrib4f(gd,Rb,vc,fb,jd),kc.x=Rb,kc.y=vc,kc.z=fb,kc.w=jd;ca.buffer=a.positionFractBuffer;yd=!1;pd=null;Lc=0;jc=!1;hd=Zc=0;ic=1;Rc=0;
Xb=5126;rb=lc=Ad=Ra=0;Gb(ca)?(yd=!0,pd=ma.createStream(34962,ca),Xb=pd.dtype):(pd=ma.getBuffer(ca))?Xb=pd.dtype:"constant"in ca?(ic=2,"number"===typeof ca.constant?(Ad=ca.constant,lc=rb=Ra=0):(Ad=0<ca.constant.length?ca.constant[0]:0,lc=1<ca.constant.length?ca.constant[1]:0,rb=2<ca.constant.length?ca.constant[2]:0,Ra=3<ca.constant.length?ca.constant[3]:0)):(pd=Gb(ca.buffer)?ma.createStream(34962,ca.buffer):ma.getBuffer(ca.buffer),Xb="type"in ca?Ha[ca.type]:pd.dtype,jc=!!ca.normalized,hd=ca.size|0,
Zc=ca.offset|0,Rc=ca.stride|0,Lc=ca.divisor|0);Hb=C.location;cb=ab[Hb];if(1===ic){cb.buffer||S.enableVertexAttribArray(Hb);$b=hd||2;if(cb.type!==Xb||cb.size!==$b||cb.buffer!==pd||cb.normalized!==jc||cb.offset!==Zc||cb.stride!==Rc)S.bindBuffer(34962,pd.buffer),S.vertexAttribPointer(Hb,$b,Xb,jc,Rc,Zc),cb.type=Xb,cb.size=$b,cb.buffer=pd,cb.normalized=jc,cb.offset=Zc,cb.stride=Rc;cb.divisor!==Lc&&(G.vertexAttribDivisorANGLE(Hb,Lc),cb.divisor=Lc)}else if(cb.buffer&&(S.disableVertexAttribArray(Hb),cb.buffer=
null),cb.x!==Ad||cb.y!==lc||cb.z!==rb||cb.w!==Ra)S.vertexAttrib4f(Hb,Ad,lc,rb,Ra),cb.x=Ad,cb.y=lc,cb.z=rb,cb.w=Ra;Q.buffer=a.positionFractBuffer;Sb=!1;kd=null;cc=0;Tb=!1;Ub=Mc=0;Pa=1;Fb=0;Ib=5126;ac=pc=Sa=ib=0;Gb(Q)?(Sb=!0,kd=ma.createStream(34962,Q),Ib=kd.dtype):(kd=ma.getBuffer(Q))?Ib=kd.dtype:"constant"in Q?(Pa=2,"number"===typeof Q.constant?(Sa=Q.constant,pc=ac=ib=0):(Sa=0<Q.constant.length?Q.constant[0]:0,pc=1<Q.constant.length?Q.constant[1]:0,ac=2<Q.constant.length?Q.constant[2]:0,ib=3<Q.constant.length?
Q.constant[3]:0)):(kd=Gb(Q.buffer)?ma.createStream(34962,Q.buffer):ma.getBuffer(Q.buffer),Ib="type"in Q?Ha[Q.type]:kd.dtype,Tb=!!Q.normalized,Ub=Q.size|0,Mc=Q.offset|0,Fb=Q.stride|0,cc=Q.divisor|0);Dc=l.location;db=ab[Dc];if(1===Pa){db.buffer||S.enableVertexAttribArray(Dc);mc=Ub||2;if(db.type!==Ib||db.size!==mc||db.buffer!==kd||db.normalized!==Tb||db.offset!==Mc||db.stride!==Fb)S.bindBuffer(34962,kd.buffer),S.vertexAttribPointer(Dc,mc,Ib,Tb,Fb,Mc),db.type=Ib,db.size=mc,db.buffer=kd,db.normalized=
Tb,db.offset=Mc,db.stride=Fb;db.divisor!==cc&&(G.vertexAttribDivisorANGLE(Dc,cc),db.divisor=cc)}else if(db.buffer&&(S.disableVertexAttribArray(Dc),db.buffer=null),db.x!==Sa||db.y!==pc||db.z!==ac||db.w!==ib)S.vertexAttrib4f(Dc,Sa,pc,ac,ib),db.x=Sa,db.y=pc,db.z=ac,db.w=ib;M.buffer=a.colorBuffer;Hc=!1;oc=null;kb=0;lb=!1;nb=va=0;ya=1;Wa=0;bb=5126;xb=Oa=gb=Ia=0;Gb(M)?(Hc=!0,oc=ma.createStream(34962,M),bb=oc.dtype):(oc=ma.getBuffer(M))?bb=oc.dtype:"constant"in M?(ya=2,"number"===typeof M.constant?(gb=M.constant,
Oa=xb=Ia=0):(gb=0<M.constant.length?M.constant[0]:0,Oa=1<M.constant.length?M.constant[1]:0,xb=2<M.constant.length?M.constant[2]:0,Ia=3<M.constant.length?M.constant[3]:0)):(oc=Gb(M.buffer)?ma.createStream(34962,M.buffer):ma.getBuffer(M.buffer),bb="type"in M?Ha[M.type]:oc.dtype,lb=!!M.normalized,nb=M.size|0,va=M.offset|0,Wa=M.stride|0,kb=M.divisor|0);vb=B.location;Ua=ab[vb];if(1===ya){Ua.buffer||S.enableVertexAttribArray(vb);wc=nb||4;if(Ua.type!==bb||Ua.size!==wc||Ua.buffer!==oc||Ua.normalized!==lb||
Ua.offset!==va||Ua.stride!==Wa)S.bindBuffer(34962,oc.buffer),S.vertexAttribPointer(vb,wc,bb,lb,Wa,va),Ua.type=bb,Ua.size=wc,Ua.buffer=oc,Ua.normalized=lb,Ua.offset=va,Ua.stride=Wa;Ua.divisor!==kb&&(G.vertexAttribDivisorANGLE(vb,kb),Ua.divisor=kb)}else if(Ua.buffer&&(S.disableVertexAttribArray(vb),Ua.buffer=null),Ua.x!==gb||Ua.y!==Oa||Ua.z!==xb||Ua.w!==Ia)S.vertexAttrib4f(vb,gb,Oa,xb,Ia),Ua.x=gb,Ua.y=Oa,Ua.z=xb,Ua.w=Ia;Kb=fa.location;Lb=ab[Kb];Lb.buffer||S.enableVertexAttribArray(Kb);if(5126!==Lb.type||
1!==Lb.size||Lb.buffer!==f||!1!==Lb.normalized||0!==Lb.offset||8!==Lb.stride)S.bindBuffer(34962,f.buffer),S.vertexAttribPointer(Kb,1,5126,!1,8,0),Lb.type=5126,Lb.size=1,Lb.buffer=f,Lb.normalized=!1,Lb.offset=0,Lb.stride=8;0!==Lb.divisor&&(G.vertexAttribDivisorANGLE(Kb,0),Lb.divisor=0);Vb=N.location;Ca=ab[Vb];Ca.buffer||S.enableVertexAttribArray(Vb);if(5126!==Ca.type||1!==Ca.size||Ca.buffer!==d||!1!==Ca.normalized||4!==Ca.offset||8!==Ca.stride)S.bindBuffer(34962,d.buffer),S.vertexAttribPointer(Vb,
1,5126,!1,8,4),Ca.type=5126,Ca.size=1,Ca.buffer=d,Ca.normalized=!1,Ca.offset=4,Ca.stride=8;0!==Ca.divisor&&(G.vertexAttribDivisorANGLE(Vb,0),Ca.divisor=0);xd=a.scale;S.uniform2f(I.location,xd[0],xd[1]);Ma=a.scaleFract;S.uniform2f(r.location,Ma[0],Ma[1]);Ob=a.translate;S.uniform2f(la.location,Ob[0],Ob[1]);hb=a.translateFract;S.uniform2f(ia.location,hb[0],hb[1]);S.uniform1f(J.location,a.thickness);S.uniform1f(F.location,a.depth);jb=D.call(this,za,a,0);S.uniform4f(ua.location,jb[0],jb[1],jb[2],jb[3]);
S.uniform1f(L.location,a.dashLength);S.uniform1f(ba.location,a.opacity);(xa=a.dashTexture)&&"framebuffer"===xa._reglType&&(xa=xa.color[0]);ec=xa._texture;S.uniform1i(W.location,ec.bind());(Da=ga.elements)?S.bindBuffer(34963,Da.buffer.buffer):ka.currentVAO&&(Da=O.getElements(ka.currentVAO.elements))&&S.bindBuffer(34963,Da.buffer.buffer);ob=a.count;0<ob?Da?G.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),ob):G.drawArraysInstancedANGLE(5,0,4,ob):0>ob&&(Da?S.drawElements(5,4,Da.type,0<<(Da.type-
5121>>1)):S.drawArrays(5,0,4));da.dirty=!0;ka.setVAO(null);za.viewportWidth=y;za.viewportHeight=t;na&&(k.cpuTime+=performance.now()-E);V&&ma.destroyStream(X);Cd&&ma.destroyStream(fd);yd&&ma.destroyStream(pd);Sb&&ma.destroyStream(kd);Hc&&ma.destroyStream(oc);ec.unbind()},scope:function(b,a,l){var r,g,q,B,t,L,J,D,W,N,H,h,la,F,C,A,ia,I,u,fa,na,R,ua,ba,aa,O,P,T,S,U,ha,ea,oa,ka,ab,Cb,ra,Aa,pa,eb,Jc,Eb,Xa,fb,sa,yb,qc,zb,Ac,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Na,lc,rb,Hb,cb,$b,Sb,Qa,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,
Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,Kc,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,wf,Bd,Qe,Ke,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf,Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,Te,Me;r=b.viewport;g=r.x|0;q=r.y|0;B="width"in r?r.width|0:za.framebufferWidth-
g;t="height"in r?r.height|0:za.framebufferHeight-q;L=za.viewportWidth;za.viewportWidth=B;J=za.viewportHeight;za.viewportHeight=t;D=G[0];G[0]=g;W=G[1];G[1]=q;N=G[2];G[2]=B;H=G[3];G[3]=t;h=Z[0];Z[0]=0;la=Z[1];Z[1]=0;F=Z[2];Z[2]=0;C=Z[3];Z[3]=0;A=Ta.blend_enable;Ta.blend_enable=!0;ia=wa[0];wa[0]=32774;I=wa[1];wa[1]=32774;u=Ka[0];Ka[0]=770;fa=Ka[1];Ka[1]=771;na=Ka[2];Ka[2]=773;R=Ka[3];Ka[3]=1;ua=n.call(this,za,b,l);ba=Ta.depth_enable;Ta.depth_enable=ua;aa=b.viewport;O=aa.x|0;P=aa.y|0;T="width"in aa?aa.width|
0:za.framebufferWidth-O;S="height"in aa?aa.height|0:za.framebufferHeight-P;U=V[0];V[0]=O;ha=V[1];V[1]=P;ea=V[2];V[2]=T;oa=V[3];V[3]=S;ka=Ta.scissor_enable;Ta.scissor_enable=!0;ab=Ta.stencil_enable;Ta.stencil_enable=!1;if(Cb=da.profile)ra=performance.now(),k.count++;Aa=ga.offset;ga.offset=0;pa=ga.count;ga.count=4;eb=b.count;Jc=ga.instances;ga.instances=eb;Eb=ga.primitive;ga.primitive=5;Xa=b.dashLength;fb=E[23];E[23]=Xa;sa=b.dashTexture;yb=E[24];E[24]=sa;qc=b.depth;zb=E[22];E[22]=qc;Ac=b.id;Lc=E[31];
E[31]=Ac;jc=b.miterLimit;Zc=E[32];E[32]=jc;hd=v.call(this,za,b,l);ic=E[33];E[33]=hd;Rc=b.opacity;Xb=E[10];E[10]=Rc;Ra=za.pixelRatio;Na=E[34];E[34]=Ra;lc=b.scale;rb=E[6];E[6]=lc;Hb=b.scaleFract;cb=E[7];E[7]=Hb;$b=b.thickness;Sb=E[21];E[21]=$b;Qa=b.translate;cc=E[8];E[8]=Qa;Tb=b.translateFract;Mc=E[9];E[9]=Tb;Ub=z.call(this,za,b,l);Pa=E[3];E[3]=Ub;Y.buffer=b.positionBuffer;Fb=!1;Ib=null;ib=0;Sa=!1;ac=pc=0;Dc=1;db=0;mc=5126;lb=kb=oc=Hc=0;Gb(Y)?(Fb=!0,Ib=ma.createStream(34962,Y),mc=Ib.dtype):(Ib=ma.getBuffer(Y))?
mc=Ib.dtype:"constant"in Y?(Dc=2,"number"===typeof Y.constant?(oc=Y.constant,kb=lb=Hc=0):(oc=0<Y.constant.length?Y.constant[0]:0,kb=1<Y.constant.length?Y.constant[1]:0,lb=2<Y.constant.length?Y.constant[2]:0,Hc=3<Y.constant.length?Y.constant[3]:0)):(Ib=Gb(Y.buffer)?ma.createStream(34962,Y.buffer):ma.getBuffer(Y.buffer),mc="type"in Y?Ha[Y.type]:Ib.dtype,Sa=!!Y.normalized,ac=Y.size|0,pc=Y.offset|0,db=Y.stride|0,ib=Y.divisor|0);va=w.buffer;w.buffer=Ib;nb=w.divisor;w.divisor=ib;ya=w.normalized;w.normalized=
Sa;Wa=w.offset;w.offset=pc;bb=w.size;w.size=ac;Ia=w.state;w.state=Dc;gb=w.stride;w.stride=db;Oa=w.type;w.type=mc;xb=w.w;w.w=Hc;vb=w.x;w.x=oc;Ua=w.y;w.y=kb;wc=w.z;w.z=lb;ca.buffer=b.positionFractBuffer;Kb=!1;Lb=null;Vb=0;Ca=!1;Ma=Kc=0;Ob=1;hb=0;jb=5126;ob=Da=ec=xa=0;Gb(ca)?(Kb=!0,Lb=ma.createStream(34962,ca),jb=Lb.dtype):(Lb=ma.getBuffer(ca))?jb=Lb.dtype:"constant"in ca?(Ob=2,"number"===typeof ca.constant?(ec=ca.constant,Da=ob=xa=0):(ec=0<ca.constant.length?ca.constant[0]:0,Da=1<ca.constant.length?
ca.constant[1]:0,ob=2<ca.constant.length?ca.constant[2]:0,xa=3<ca.constant.length?ca.constant[3]:0)):(Lb=Gb(ca.buffer)?ma.createStream(34962,ca.buffer):ma.getBuffer(ca.buffer),jb="type"in ca?Ha[ca.type]:Lb.dtype,Ca=!!ca.normalized,Ma=ca.size|0,Kc=ca.offset|0,hb=ca.stride|0,Vb=ca.divisor|0);pb=p.buffer;p.buffer=Lb;Za=p.divisor;p.divisor=Vb;$a=p.normalized;p.normalized=Ca;nc=p.offset;p.offset=Kc;xc=p.size;p.size=Ma;tc=p.state;p.state=Ob;Ya=p.stride;p.stride=hb;Mb=p.type;p.type=jb;Ec=p.w;p.w=xa;Fa=p.x;
p.x=ec;yc=p.y;p.y=Da;Va=p.z;p.z=ob;ta.buffer=b.positionBuffer;Ba=!1;mb=null;sb=0;Ab=!1;uc=qb=0;tb=1;Sc=0;rc=5126;dd=cd=Nc=sd=0;Gb(ta)?(Ba=!0,mb=ma.createStream(34962,ta),rc=mb.dtype):(mb=ma.getBuffer(ta))?rc=mb.dtype:"constant"in ta?(tb=2,"number"===typeof ta.constant?(Nc=ta.constant,cd=dd=sd=0):(Nc=0<ta.constant.length?ta.constant[0]:0,cd=1<ta.constant.length?ta.constant[1]:0,dd=2<ta.constant.length?ta.constant[2]:0,sd=3<ta.constant.length?ta.constant[3]:0)):(mb=Gb(ta.buffer)?ma.createStream(34962,
ta.buffer):ma.getBuffer(ta.buffer),rc="type"in ta?Ha[ta.type]:mb.dtype,Ab=!!ta.normalized,uc=ta.size|0,qb=ta.offset|0,Sc=ta.stride|0,sb=ta.divisor|0);Yb=e.buffer;e.buffer=mb;dc=e.divisor;e.divisor=sb;Pb=e.normalized;e.normalized=Ab;Ga=e.offset;e.offset=qb;bc=e.size;e.size=uc;wb=e.state;e.state=tb;Bb=e.stride;e.stride=Sc;Nb=e.type;e.type=rc;Qb=e.w;e.w=sd;fc=e.x;e.x=Nc;hc=e.y;e.y=cd;Tc=e.z;e.z=dd;Q.buffer=b.positionFractBuffer;Bc=!1;Cc=null;Fc=0;Oc=!1;Uc=ed=0;Pc=1;Wb=0;Db=5126;gc=Vc=Ic=Qc=0;Gb(Q)?(Bc=
!0,Cc=ma.createStream(34962,Q),Db=Cc.dtype):(Cc=ma.getBuffer(Q))?Db=Cc.dtype:"constant"in Q?(Pc=2,"number"===typeof Q.constant?(Ic=Q.constant,Vc=gc=Qc=0):(Ic=0<Q.constant.length?Q.constant[0]:0,Vc=1<Q.constant.length?Q.constant[1]:0,gc=2<Q.constant.length?Q.constant[2]:0,Qc=3<Q.constant.length?Q.constant[3]:0)):(Cc=Gb(Q.buffer)?ma.createStream(34962,Q.buffer):ma.getBuffer(Q.buffer),Db="type"in Q?Ha[Q.type]:Cc.dtype,Oc=!!Q.normalized,Uc=Q.size|0,ed=Q.offset|0,Wb=Q.stride|0,Fc=Q.divisor|0);$c=c.buffer;
c.buffer=Cc;id=c.divisor;c.divisor=Fc;qd=c.normalized;c.normalized=Oc;vd=c.offset;c.offset=ed;ad=c.size;c.size=Uc;wf=c.state;c.state=Pc;Bd=c.stride;c.stride=Wb;Qe=c.type;c.type=Db;Ke=c.w;c.w=Qc;le=c.x;c.x=Ic;Md=c.y;c.y=Vc;Kd=c.z;c.z=gc;M.buffer=b.colorBuffer;ld=!1;Gc=null;td=0;md=!1;nd=bd=0;Dd=1;Ed=0;te=5126;fe=me=Ze=xe=0;Gb(M)?(ld=!0,Gc=ma.createStream(34962,M),te=Gc.dtype):(Gc=ma.getBuffer(M))?te=Gc.dtype:"constant"in M?(Dd=2,"number"===typeof M.constant?(Ze=M.constant,me=fe=xe=0):(Ze=0<M.constant.length?
M.constant[0]:0,me=1<M.constant.length?M.constant[1]:0,fe=2<M.constant.length?M.constant[2]:0,xe=3<M.constant.length?M.constant[3]:0)):(Gc=Gb(M.buffer)?ma.createStream(34962,M.buffer):ma.getBuffer(M.buffer),te="type"in M?Ha[M.type]:Gc.dtype,md=!!M.normalized,nd=M.size|0,bd=M.offset|0,Ed=M.stride|0,td=M.divisor|0);de=m.buffer;m.buffer=Gc;qe=m.divisor;m.divisor=td;$d=m.normalized;m.normalized=md;ge=m.offset;m.offset=bd;zc=m.size;m.size=nd;Yc=m.state;m.state=Dd;re=m.stride;m.stride=Ed;je=m.type;m.type=
te;Ld=m.w;m.w=xe;Qd=m.x;m.x=Ze;Rd=m.y;m.y=me;Sd=m.z;m.z=fe;he=x.buffer;x.buffer=f;Re=x.divisor;x.divisor=0;ze=x.normalized;x.normalized=!1;ne=x.offset;x.offset=0;bf=x.size;x.size=0;Se=x.state;x.state=1;Le=x.stride;x.stride=8;se=x.type;x.type=5126;De=x.w;x.w=0;Fe=x.x;x.x=0;Ge=x.y;x.y=0;He=x.z;x.z=0;Ee=y.buffer;y.buffer=d;Nd=y.divisor;y.divisor=0;Wd=y.normalized;y.normalized=!1;Zd=y.offset;y.offset=4;ae=y.size;y.size=0;Ie=y.state;y.state=1;Hd=y.stride;y.stride=8;Td=y.type;y.type=5126;Be=y.w;y.w=0;Je=
y.x;y.x=0;cf=y.y;y.y=0;af=y.z;y.z=0;Te=X.vert;X.vert=20;Me=X.frag;X.frag=19;da.dirty=!0;a(za,b,l);za.viewportWidth=L;za.viewportHeight=J;G[0]=D;G[1]=W;G[2]=N;G[3]=H;Z[0]=h;Z[1]=la;Z[2]=F;Z[3]=C;Ta.blend_enable=A;wa[0]=ia;wa[1]=I;Ka[0]=u;Ka[1]=fa;Ka[2]=na;Ka[3]=R;Ta.depth_enable=ba;V[0]=U;V[1]=ha;V[2]=ea;V[3]=oa;Ta.scissor_enable=ka;Ta.stencil_enable=ab;Cb&&(k.cpuTime+=performance.now()-ra);ga.offset=Aa;ga.count=pa;ga.instances=Jc;ga.primitive=Eb;E[23]=fb;E[24]=yb;E[22]=zb;E[31]=Lc;E[32]=Zc;E[33]=
ic;E[10]=Xb;E[34]=Na;E[6]=rb;E[7]=cb;E[21]=Sb;E[8]=cc;E[9]=Mc;E[3]=Pa;Fb&&ma.destroyStream(Ib);w.buffer=va;w.divisor=nb;w.normalized=ya;w.offset=Wa;w.size=bb;w.state=Ia;w.stride=gb;w.type=Oa;w.w=xb;w.x=vb;w.y=Ua;w.z=wc;Kb&&ma.destroyStream(Lb);p.buffer=pb;p.divisor=Za;p.normalized=$a;p.offset=nc;p.size=xc;p.state=tc;p.stride=Ya;p.type=Mb;p.w=Ec;p.x=Fa;p.y=yc;p.z=Va;Ba&&ma.destroyStream(mb);e.buffer=Yb;e.divisor=dc;e.normalized=Pb;e.offset=Ga;e.size=bc;e.state=wb;e.stride=Bb;e.type=Nb;e.w=Qb;e.x=fc;
e.y=hc;e.z=Tc;Bc&&ma.destroyStream(Cc);c.buffer=$c;c.divisor=id;c.normalized=qd;c.offset=vd;c.size=ad;c.state=wf;c.stride=Bd;c.type=Qe;c.w=Ke;c.x=le;c.y=Md;c.z=Kd;ld&&ma.destroyStream(Gc);m.buffer=de;m.divisor=qe;m.normalized=$d;m.offset=ge;m.size=zc;m.state=Yc;m.stride=re;m.type=je;m.w=Ld;m.x=Qd;m.y=Rd;m.z=Sd;x.buffer=he;x.divisor=Re;x.normalized=ze;x.offset=ne;x.size=bf;x.state=Se;x.stride=Le;x.type=se;x.w=De;x.x=Fe;x.y=Ge;x.z=He;y.buffer=Ee;y.divisor=Nd;y.normalized=Wd;y.offset=Zd;y.size=ae;y.state=
Ie;y.stride=Hd;y.type=Td;y.w=Be;y.x=Je;y.y=cf;y.z=af;X.vert=Te;X.frag=Me;da.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,H,h,A,u,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua,ab,ma,za,da){var ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa,Xa,Cb,yb,Jc,Eb,V,R,ha,Aa,zb,Ac,Kc,P,G,oa,Ha,Y,ca,ta,Q,M,ja,Ja,Ea,La,K;ga=a.attributes;O=a.buffer;
T=a.context;ra=a.current;S=a.draw;Gb=a.elements;Ta=a.extensions;X=a.framebuffer;E=a.gl;ka=a.isBufferArgs;Z=a.next;sa=a.shader;wa=a.uniforms;Qa=a.vao;Ka=Z.blend_color;U=ra.blend_color;Na=Z.blend_equation;ea=ra.blend_equation;pa=Z.blend_func;Xa=ra.blend_func;Cb=Z.colorMask;yb=ra.colorMask;Jc=Z.depth_range;Eb=ra.depth_range;V=Z.polygonOffset_offset;R=ra.polygonOffset_offset;ha=Z.sample_coverage;Aa=ra.sample_coverage;zb=Z.scissor_box;Ac=ra.scissor_box;Kc=Z.stencil_func;P=ra.stencil_func;G=Z.stencil_opBack;
oa=ra.stencil_opBack;Ha=Z.stencil_opFront;Y=ra.stencil_opFront;ca=Z.viewport;ta=ra.viewport;Q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};M={divisor:1,offset:0,stride:4};ja={divisor:1,offset:8,stride:8};Ja={divisor:1,offset:4,stride:4};Ea={divisor:1,offset:16,stride:8};La={divisor:1,offset:24,stride:8};K={divisor:1,offset:0,stride:8};return{batch:function(a,c){var e,g,m,p,q,n;e=X.next;e!==X.cur&&(e?E.bindFramebuffer(36160,e.framebuffer):E.bindFramebuffer(36160,
null),X.cur=e);if(ra.dirty){var x,y,v,t,w,D,z,h,H,na,ca,pa,sa,wa,zb,Na,Ka,ce,Pd,wd,od,Cd,fd,zd,Wc,Id,ud,rd,Xc,eb;x=Z.dither;x!==ra.dither&&(x?E.enable(3024):E.disable(3024),ra.dither=x);y=Z.depth_func;y!==ra.depth_func&&(E.depthFunc(y),ra.depth_func=y);v=Jc[0];t=Jc[1];if(v!==Eb[0]||t!==Eb[1])E.depthRange(v,t),Eb[0]=v,Eb[1]=t;w=Z.depth_mask;w!==ra.depth_mask&&(E.depthMask(w),ra.depth_mask=w);D=Cb[0];z=Cb[1];h=Cb[2];H=Cb[3];if(D!==yb[0]||z!==yb[1]||h!==yb[2]||H!==yb[3])E.colorMask(D,z,h,H),yb[0]=D,
yb[1]=z,yb[2]=h,yb[3]=H;na=Z.frontFace;na!==ra.frontFace&&(E.frontFace(na),ra.frontFace=na);ca=Z.lineWidth;ca!==ra.lineWidth&&(E.lineWidth(ca),ra.lineWidth=ca);pa=Z.polygonOffset_enable;pa!==ra.polygonOffset_enable&&(pa?E.enable(32823):E.disable(32823),ra.polygonOffset_enable=pa);sa=V[0];wa=V[1];if(sa!==R[0]||wa!==R[1])E.polygonOffset(sa,wa),R[0]=sa,R[1]=wa;zb=Z.sample_alpha;zb!==ra.sample_alpha&&(zb?E.enable(32926):E.disable(32926),ra.sample_alpha=zb);Na=Z.sample_enable;Na!==ra.sample_enable&&(Na?
E.enable(32928):E.disable(32928),ra.sample_enable=Na);Ka=ha[0];ce=ha[1];if(Ka!==Aa[0]||ce!==Aa[1])E.sampleCoverage(Ka,ce),Aa[0]=Ka,Aa[1]=ce;Pd=Z.stencil_mask;Pd!==ra.stencil_mask&&(E.stencilMask(Pd),ra.stencil_mask=Pd);wd=Kc[0];od=Kc[1];Cd=Kc[2];if(wd!==P[0]||od!==P[1]||Cd!==P[2])E.stencilFunc(wd,od,Cd),P[0]=wd,P[1]=od,P[2]=Cd;fd=Ha[0];zd=Ha[1];Wc=Ha[2];Id=Ha[3];if(fd!==Y[0]||zd!==Y[1]||Wc!==Y[2]||Id!==Y[3])E.stencilOpSeparate(fd,zd,Wc,Id),Y[0]=fd,Y[1]=zd,Y[2]=Wc,Y[3]=Id;ud=G[0];rd=G[1];Xc=G[2];eb=
G[3];if(ud!==oa[0]||rd!==oa[1]||Xc!==oa[2]||eb!==oa[3])E.stencilOpSeparate(ud,rd,Xc,eb),oa[0]=ud,oa[1]=rd,oa[2]=Xc,oa[3]=eb}E.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;E.enable(3042);ra.blend_enable=!0;E.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;E.blendFuncSeparate(770,771,773,1);Xa[0]=770;Xa[1]=771;Xa[2]=773;Xa[3]=1;E.enable(2884);ra.cull_enable=!0;E.cullFace(1029);ra.cull_face=1029;E.enable(3089);ra.scissor_enable=!0;E.disable(2960);ra.stencil_enable=!1;if(g=ra.profile)m=
performance.now(),k.count+=c;E.useProgram(A.program);p=Ta.angle_instanced_arrays;var jd,Rb,vc,fb,gd;Qa.setVAO(null);jd=ba.location;Rb=ga[jd];Rb.buffer||E.enableVertexAttribArray(jd);if(5126!==Rb.type||1!==Rb.size||Rb.buffer!==f||!1!==Rb.normalized||0!==Rb.offset||8!==Rb.stride)E.bindBuffer(34962,f.buffer),E.vertexAttribPointer(jd,1,5126,!1,8,0),Rb.type=5126,Rb.size=1,Rb.buffer=f,Rb.normalized=!1,Rb.offset=0,Rb.stride=8;0!==Rb.divisor&&(p.vertexAttribDivisorANGLE(jd,0),Rb.divisor=0);vc=I.location;
fb=ga[vc];fb.buffer||E.enableVertexAttribArray(vc);if(5126!==fb.type||1!==fb.size||fb.buffer!==d||!1!==fb.normalized||4!==fb.offset||8!==fb.stride)E.bindBuffer(34962,d.buffer),E.vertexAttribPointer(vc,1,5126,!1,8,4),fb.type=5126,fb.size=1,fb.buffer=d,fb.normalized=!1,fb.offset=4,fb.stride=8;0!==fb.divisor&&(p.vertexAttribDivisorANGLE(vc,0),fb.divisor=0);(gd=S.elements)?E.bindBuffer(34963,gd.buffer.buffer):Qa.currentVAO&&(gd=Gb.getElements(Qa.currentVAO.elements))&&E.bindBuffer(34963,gd.buffer.buffer);
for(q=0;q<c;++q){n=a[q];var kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,wf,Bd,Qe,Ke,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc;kc=n.viewport;qc=kc.x|0;yd=kc.y|0;pd="width"in
kc?kc.width|0:T.framebufferWidth-qc;Lc="height"in kc?kc.height|0:T.framebufferHeight-yd;jc=T.viewportWidth;T.viewportWidth=pd;Zc=T.viewportHeight;T.viewportHeight=Lc;E.viewport(qc,yd,pd,Lc);ta[0]=qc;ta[1]=yd;ta[2]=pd;ta[3]=Lc;(hd=u.call(this,T,n,q))?E.enable(2929):E.disable(2929);ra.depth_enable=hd;ic=n.viewport;Rc=ic.x|0;Xb=ic.y|0;Ra="width"in ic?ic.width|0:T.framebufferWidth-Rc;Ad="height"in ic?ic.height|0:T.framebufferHeight-Xb;E.scissor(Rc,Xb,Ra,Ad);Ac[0]=Rc;Ac[1]=Xb;Ac[2]=Ra;Ac[3]=Ad;ja.buffer=
n.positionBuffer;lc=!1;rb=null;Hb=0;cb=!1;Sb=$b=0;kd=1;cc=0;Tb=5126;Fb=Pa=Ub=Mc=0;ka(ja)?(lc=!0,rb=O.createStream(34962,ja),Tb=rb.dtype):(rb=O.getBuffer(ja))?Tb=rb.dtype:"constant"in ja?(kd=2,"number"===typeof ja.constant?(Ub=ja.constant,Pa=Fb=Mc=0):(Ub=0<ja.constant.length?ja.constant[0]:0,Pa=1<ja.constant.length?ja.constant[1]:0,Fb=2<ja.constant.length?ja.constant[2]:0,Mc=3<ja.constant.length?ja.constant[3]:0)):(rb=ka(ja.buffer)?O.createStream(34962,ja.buffer):O.getBuffer(ja.buffer),Tb="type"in
ja?Q[ja.type]:rb.dtype,cb=!!ja.normalized,Sb=ja.size|0,$b=ja.offset|0,cc=ja.stride|0,Hb=ja.divisor|0);Ib=B.location;ib=ga[Ib];if(1===kd){ib.buffer||E.enableVertexAttribArray(Ib);Sa=Sb||2;if(ib.type!==Tb||ib.size!==Sa||ib.buffer!==rb||ib.normalized!==cb||ib.offset!==$b||ib.stride!==cc)E.bindBuffer(34962,rb.buffer),E.vertexAttribPointer(Ib,Sa,Tb,cb,cc,$b),ib.type=Tb,ib.size=Sa,ib.buffer=rb,ib.normalized=cb,ib.offset=$b,ib.stride=cc;ib.divisor!==Hb&&(p.vertexAttribDivisorANGLE(Ib,Hb),ib.divisor=Hb)}else if(ib.buffer&&
(E.disableVertexAttribArray(Ib),ib.buffer=null),ib.x!==Ub||ib.y!==Pa||ib.z!==Fb||ib.w!==Mc)E.vertexAttrib4f(Ib,Ub,Pa,Fb,Mc),ib.x=Ub,ib.y=Pa,ib.z=Fb,ib.w=Mc;Ea.buffer=n.positionBuffer;pc=!1;ac=null;Dc=0;db=!1;Hc=mc=0;oc=1;kb=0;lb=5126;Wa=ya=nb=va=0;ka(Ea)?(pc=!0,ac=O.createStream(34962,Ea),lb=ac.dtype):(ac=O.getBuffer(Ea))?lb=ac.dtype:"constant"in Ea?(oc=2,"number"===typeof Ea.constant?(nb=Ea.constant,ya=Wa=va=0):(nb=0<Ea.constant.length?Ea.constant[0]:0,ya=1<Ea.constant.length?Ea.constant[1]:0,Wa=
2<Ea.constant.length?Ea.constant[2]:0,va=3<Ea.constant.length?Ea.constant[3]:0)):(ac=ka(Ea.buffer)?O.createStream(34962,Ea.buffer):O.getBuffer(Ea.buffer),lb="type"in Ea?Q[Ea.type]:ac.dtype,db=!!Ea.normalized,Hc=Ea.size|0,mc=Ea.offset|0,kb=Ea.stride|0,Dc=Ea.divisor|0);bb=W.location;Ia=ga[bb];if(1===oc){Ia.buffer||E.enableVertexAttribArray(bb);gb=Hc||2;if(Ia.type!==lb||Ia.size!==gb||Ia.buffer!==ac||Ia.normalized!==db||Ia.offset!==mc||Ia.stride!==kb)E.bindBuffer(34962,ac.buffer),E.vertexAttribPointer(bb,
gb,lb,db,kb,mc),Ia.type=lb,Ia.size=gb,Ia.buffer=ac,Ia.normalized=db,Ia.offset=mc,Ia.stride=kb;Ia.divisor!==Dc&&(p.vertexAttribDivisorANGLE(bb,Dc),Ia.divisor=Dc)}else if(Ia.buffer&&(E.disableVertexAttribArray(bb),Ia.buffer=null),Ia.x!==nb||Ia.y!==ya||Ia.z!==Wa||Ia.w!==va)E.vertexAttrib4f(bb,nb,ya,Wa,va),Ia.x=nb,Ia.y=ya,Ia.z=Wa,Ia.w=va;La.buffer=n.positionBuffer;Oa=!1;xb=null;vb=0;Ua=!1;Kb=wc=0;Lb=1;Vb=0;Ca=5126;hb=Ob=Ma=xd=0;ka(La)?(Oa=!0,xb=O.createStream(34962,La),Ca=xb.dtype):(xb=O.getBuffer(La))?
Ca=xb.dtype:"constant"in La?(Lb=2,"number"===typeof La.constant?(Ma=La.constant,Ob=hb=xd=0):(Ma=0<La.constant.length?La.constant[0]:0,Ob=1<La.constant.length?La.constant[1]:0,hb=2<La.constant.length?La.constant[2]:0,xd=3<La.constant.length?La.constant[3]:0)):(xb=ka(La.buffer)?O.createStream(34962,La.buffer):O.getBuffer(La.buffer),Ca="type"in La?Q[La.type]:xb.dtype,Ua=!!La.normalized,Kb=La.size|0,wc=La.offset|0,Vb=La.stride|0,vb=La.divisor|0);jb=la.location;xa=ga[jb];if(1===Lb){xa.buffer||E.enableVertexAttribArray(jb);
ec=Kb||2;if(xa.type!==Ca||xa.size!==ec||xa.buffer!==xb||xa.normalized!==Ua||xa.offset!==wc||xa.stride!==Vb)E.bindBuffer(34962,xb.buffer),E.vertexAttribPointer(jb,ec,Ca,Ua,Vb,wc),xa.type=Ca,xa.size=ec,xa.buffer=xb,xa.normalized=Ua,xa.offset=wc,xa.stride=Vb;xa.divisor!==vb&&(p.vertexAttribDivisorANGLE(jb,vb),xa.divisor=vb)}else if(xa.buffer&&(E.disableVertexAttribArray(jb),xa.buffer=null),xa.x!==Ma||xa.y!==Ob||xa.z!==hb||xa.w!==xd)E.vertexAttrib4f(jb,Ma,Ob,hb,xd),xa.x=Ma,xa.y=Ob,xa.z=hb,xa.w=xd;K.buffer=
n.positionBuffer;Da=!1;ob=null;pb=0;Za=!1;nc=$a=0;xc=1;tc=0;Ya=5126;yc=Fa=Ec=Mb=0;ka(K)?(Da=!0,ob=O.createStream(34962,K),Ya=ob.dtype):(ob=O.getBuffer(K))?Ya=ob.dtype:"constant"in K?(xc=2,"number"===typeof K.constant?(Ec=K.constant,Fa=yc=Mb=0):(Ec=0<K.constant.length?K.constant[0]:0,Fa=1<K.constant.length?K.constant[1]:0,yc=2<K.constant.length?K.constant[2]:0,Mb=3<K.constant.length?K.constant[3]:0)):(ob=ka(K.buffer)?O.createStream(34962,K.buffer):O.getBuffer(K.buffer),Ya="type"in K?Q[K.type]:ob.dtype,
Za=!!K.normalized,nc=K.size|0,$a=K.offset|0,tc=K.stride|0,pb=K.divisor|0);Va=ua.location;Ba=ga[Va];if(1===xc){Ba.buffer||E.enableVertexAttribArray(Va);mb=nc||2;if(Ba.type!==Ya||Ba.size!==mb||Ba.buffer!==ob||Ba.normalized!==Za||Ba.offset!==$a||Ba.stride!==tc)E.bindBuffer(34962,ob.buffer),E.vertexAttribPointer(Va,mb,Ya,Za,tc,$a),Ba.type=Ya,Ba.size=mb,Ba.buffer=ob,Ba.normalized=Za,Ba.offset=$a,Ba.stride=tc;Ba.divisor!==pb&&(p.vertexAttribDivisorANGLE(Va,pb),Ba.divisor=pb)}else if(Ba.buffer&&(E.disableVertexAttribArray(Va),
Ba.buffer=null),Ba.x!==Ec||Ba.y!==Fa||Ba.z!==yc||Ba.w!==Mb)E.vertexAttrib4f(Va,Ec,Fa,yc,Mb),Ba.x=Ec,Ba.y=Fa,Ba.z=yc,Ba.w=Mb;M.buffer=n.colorBuffer;sb=!1;Ab=null;qb=0;uc=!1;Sc=tb=0;rc=1;sd=0;Nc=5126;dc=Yb=dd=cd=0;ka(M)?(sb=!0,Ab=O.createStream(34962,M),Nc=Ab.dtype):(Ab=O.getBuffer(M))?Nc=Ab.dtype:"constant"in M?(rc=2,"number"===typeof M.constant?(dd=M.constant,Yb=dc=cd=0):(dd=0<M.constant.length?M.constant[0]:0,Yb=1<M.constant.length?M.constant[1]:0,dc=2<M.constant.length?M.constant[2]:0,cd=3<M.constant.length?
M.constant[3]:0)):(Ab=ka(M.buffer)?O.createStream(34962,M.buffer):O.getBuffer(M.buffer),Nc="type"in M?Q[M.type]:Ab.dtype,uc=!!M.normalized,Sc=M.size|0,tb=M.offset|0,sd=M.stride|0,qb=M.divisor|0);Pb=l.location;Ga=ga[Pb];if(1===rc){Ga.buffer||E.enableVertexAttribArray(Pb);bc=Sc||4;if(Ga.type!==Nc||Ga.size!==bc||Ga.buffer!==Ab||Ga.normalized!==uc||Ga.offset!==tb||Ga.stride!==sd)E.bindBuffer(34962,Ab.buffer),E.vertexAttribPointer(Pb,bc,Nc,uc,sd,tb),Ga.type=Nc,Ga.size=bc,Ga.buffer=Ab,Ga.normalized=uc,
Ga.offset=tb,Ga.stride=sd;Ga.divisor!==qb&&(p.vertexAttribDivisorANGLE(Pb,qb),Ga.divisor=qb)}else if(Ga.buffer&&(E.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==dd||Ga.y!==Yb||Ga.z!==dc||Ga.w!==cd)E.vertexAttrib4f(Pb,dd,Yb,dc,cd),Ga.x=dd,Ga.y=Yb,Ga.z=dc,Ga.w=cd;Ja.buffer=n.colorBuffer;wb=!1;Bb=null;Nb=0;Qb=!1;hc=fc=0;Tc=1;Bc=0;Cc=5126;Uc=ed=Oc=Fc=0;ka(Ja)?(wb=!0,Bb=O.createStream(34962,Ja),Cc=Bb.dtype):(Bb=O.getBuffer(Ja))?Cc=Bb.dtype:"constant"in Ja?(Tc=2,"number"===typeof Ja.constant?(Oc=
Ja.constant,ed=Uc=Fc=0):(Oc=0<Ja.constant.length?Ja.constant[0]:0,ed=1<Ja.constant.length?Ja.constant[1]:0,Uc=2<Ja.constant.length?Ja.constant[2]:0,Fc=3<Ja.constant.length?Ja.constant[3]:0)):(Bb=ka(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),Cc="type"in Ja?Q[Ja.type]:Bb.dtype,Qb=!!Ja.normalized,hc=Ja.size|0,fc=Ja.offset|0,Bc=Ja.stride|0,Nb=Ja.divisor|0);Pc=L.location;Wb=ga[Pc];if(1===Tc){Wb.buffer||E.enableVertexAttribArray(Pc);Db=hc||4;if(Wb.type!==Cc||Wb.size!==Db||Wb.buffer!==
Bb||Wb.normalized!==Qb||Wb.offset!==fc||Wb.stride!==Bc)E.bindBuffer(34962,Bb.buffer),E.vertexAttribPointer(Pc,Db,Cc,Qb,Bc,fc),Wb.type=Cc,Wb.size=Db,Wb.buffer=Bb,Wb.normalized=Qb,Wb.offset=fc,Wb.stride=Bc;Wb.divisor!==Nb&&(p.vertexAttribDivisorANGLE(Pc,Nb),Wb.divisor=Nb)}else if(Wb.buffer&&(E.disableVertexAttribArray(Pc),Wb.buffer=null),Wb.x!==Oc||Wb.y!==ed||Wb.z!==Uc||Wb.w!==Fc)E.vertexAttrib4f(Pc,Oc,ed,Uc,Fc),Wb.x=Oc,Wb.y=ed,Wb.z=Uc,Wb.w=Fc;Qc=n.scale;Ic=Qc[0];gc=Qc[1];q&&Vc===Ic&&$c===gc||(Vc=Ic,
$c=gc,E.uniform2f(ab.location,Ic,gc));id=n.translate;qd=id[0];ad=id[1];q&&vd===qd&&wf===ad||(vd=qd,wf=ad,E.uniform2f(za.location,qd,ad));Bd=n.thickness;q&&Qe===Bd||(Qe=Bd,E.uniform1f(ma.location,Bd));Ke=n.depth;q&&le===Ke||(le=Ke,E.uniform1f(N.location,Ke));Md=C.call(this,T,n,q);Kd=Md[0];Gc=Md[1];md=Md[2];nd=Md[3];q&&ld===Kd&&td===Gc&&bd===md&&Dd===nd||(ld=Kd,td=Gc,bd=md,Dd=nd,E.uniform4f(da.location,Kd,Gc,md,nd));Ed=n.miterLimit;q&&te===Ed||(te=Ed,E.uniform1f(r.location,Ed));xe=b.call(this,T,n,q);
q&&Ze===xe||(Ze=xe,E.uniform1f(J.location,xe));me=n.dashLength;q&&fe===me||(fe=me,E.uniform1f(F.location,me));de=n.opacity;q&&qe===de||(qe=de,E.uniform1f(ia.location,de));($d=n.dashTexture)&&"framebuffer"===$d._reglType&&($d=$d.color[0]);ge=$d._texture;E.uniform1i(fa.location,ge.bind());zc=n.count;0<zc?gd?p.drawElementsInstancedANGLE(5,4,gd.type,0<<(gd.type-5121>>1),zc):p.drawArraysInstancedANGLE(5,0,4,zc):0>zc&&(gd?E.drawElements(5,4,gd.type,0<<(gd.type-5121>>1)):E.drawArrays(5,0,4));T.viewportWidth=
jc;T.viewportHeight=Zc;lc&&O.destroyStream(rb);pc&&O.destroyStream(ac);Oa&&O.destroyStream(xb);Da&&O.destroyStream(ob);sb&&O.destroyStream(Ab);wb&&O.destroyStream(Bb);ge.unbind()}ra.dirty=!0;Qa.setVAO(null);g&&(k.cpuTime+=performance.now()-m)},draw:function(b){var a,c,e,m,p,x,y,v,t,w,z,h,H,C,A,u,na,aa,ca,pa,sa,wa,zb,Na,Ka,Pd,wd,od,Cd,fd,zd,Wc,Id,ud,rd,Xc,eb,jd,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,
bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc;a=X.next;a!==X.cur&&(a?E.bindFramebuffer(36160,a.framebuffer):E.bindFramebuffer(36160,null),X.cur=a);if(ra.dirty){var rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc;rc=Z.dither;rc!==ra.dither&&(rc?E.enable(3024):E.disable(3024),ra.dither=rc);sd=Z.depth_func;sd!==ra.depth_func&&(E.depthFunc(sd),ra.depth_func=sd);Nc=Jc[0];cd=Jc[1];if(Nc!==
Eb[0]||cd!==Eb[1])E.depthRange(Nc,cd),Eb[0]=Nc,Eb[1]=cd;dd=Z.depth_mask;dd!==ra.depth_mask&&(E.depthMask(dd),ra.depth_mask=dd);Yb=Cb[0];dc=Cb[1];Pb=Cb[2];Ga=Cb[3];if(Yb!==yb[0]||dc!==yb[1]||Pb!==yb[2]||Ga!==yb[3])E.colorMask(Yb,dc,Pb,Ga),yb[0]=Yb,yb[1]=dc,yb[2]=Pb,yb[3]=Ga;bc=Z.frontFace;bc!==ra.frontFace&&(E.frontFace(bc),ra.frontFace=bc);wb=Z.lineWidth;wb!==ra.lineWidth&&(E.lineWidth(wb),ra.lineWidth=wb);Bb=Z.polygonOffset_enable;Bb!==ra.polygonOffset_enable&&(Bb?E.enable(32823):E.disable(32823),
ra.polygonOffset_enable=Bb);Nb=V[0];Qb=V[1];if(Nb!==R[0]||Qb!==R[1])E.polygonOffset(Nb,Qb),R[0]=Nb,R[1]=Qb;fc=Z.sample_alpha;fc!==ra.sample_alpha&&(fc?E.enable(32926):E.disable(32926),ra.sample_alpha=fc);hc=Z.sample_enable;hc!==ra.sample_enable&&(hc?E.enable(32928):E.disable(32928),ra.sample_enable=hc);Tc=ha[0];Bc=ha[1];if(Tc!==Aa[0]||Bc!==Aa[1])E.sampleCoverage(Tc,Bc),Aa[0]=Tc,Aa[1]=Bc;Cc=Z.stencil_mask;Cc!==ra.stencil_mask&&(E.stencilMask(Cc),ra.stencil_mask=Cc);Fc=Kc[0];Oc=Kc[1];ed=Kc[2];if(Fc!==
P[0]||Oc!==P[1]||ed!==P[2])E.stencilFunc(Fc,Oc,ed),P[0]=Fc,P[1]=Oc,P[2]=ed;Uc=Ha[0];Pc=Ha[1];Wb=Ha[2];Db=Ha[3];if(Uc!==Y[0]||Pc!==Y[1]||Wb!==Y[2]||Db!==Y[3])E.stencilOpSeparate(Uc,Pc,Wb,Db),Y[0]=Uc,Y[1]=Pc,Y[2]=Wb,Y[3]=Db;Qc=G[0];Ic=G[1];Vc=G[2];gc=G[3];if(Qc!==oa[0]||Ic!==oa[1]||Vc!==oa[2]||gc!==oa[3])E.stencilOpSeparate(Qc,Ic,Vc,gc),oa[0]=Qc,oa[1]=Ic,oa[2]=Vc,oa[3]=gc}c=b.viewport;e=c.x|0;m=c.y|0;p="width"in c?c.width|0:T.framebufferWidth-e;x="height"in c?c.height|0:T.framebufferHeight-m;y=T.viewportWidth;
T.viewportWidth=p;v=T.viewportHeight;T.viewportHeight=x;E.viewport(e,m,p,x);ta[0]=e;ta[1]=m;ta[2]=p;ta[3]=x;E.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;E.enable(3042);ra.blend_enable=!0;E.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;E.blendFuncSeparate(770,771,773,1);Xa[0]=770;Xa[1]=771;Xa[2]=773;Xa[3]=1;E.enable(2884);ra.cull_enable=!0;E.cullFace(1029);ra.cull_face=1029;(t=g.call(this,T,b,0))?E.enable(2929):E.disable(2929);ra.depth_enable=t;w=b.viewport;z=w.x|0;h=w.y|0;H="width"in
w?w.width|0:T.framebufferWidth-z;C="height"in w?w.height|0:T.framebufferHeight-h;E.scissor(z,h,H,C);Ac[0]=z;Ac[1]=h;Ac[2]=H;Ac[3]=C;E.enable(3089);ra.scissor_enable=!0;E.disable(2960);ra.stencil_enable=!1;if(A=ra.profile)u=performance.now(),k.count++;E.useProgram(q.program);na=Ta.angle_instanced_arrays;Qa.setVAO(null);ja.buffer=b.positionBuffer;aa=!1;ca=null;pa=0;sa=!1;zb=wa=0;Na=1;Ka=0;Pd=5126;fd=Cd=od=wd=0;ka(ja)?(aa=!0,ca=O.createStream(34962,ja),Pd=ca.dtype):(ca=O.getBuffer(ja))?Pd=ca.dtype:"constant"in
ja?(Na=2,"number"===typeof ja.constant?(od=ja.constant,Cd=fd=wd=0):(od=0<ja.constant.length?ja.constant[0]:0,Cd=1<ja.constant.length?ja.constant[1]:0,fd=2<ja.constant.length?ja.constant[2]:0,wd=3<ja.constant.length?ja.constant[3]:0)):(ca=ka(ja.buffer)?O.createStream(34962,ja.buffer):O.getBuffer(ja.buffer),Pd="type"in ja?Q[ja.type]:ca.dtype,sa=!!ja.normalized,zb=ja.size|0,wa=ja.offset|0,Ka=ja.stride|0,pa=ja.divisor|0);zd=B.location;Wc=ga[zd];if(1===Na){Wc.buffer||E.enableVertexAttribArray(zd);Id=zb||
2;if(Wc.type!==Pd||Wc.size!==Id||Wc.buffer!==ca||Wc.normalized!==sa||Wc.offset!==wa||Wc.stride!==Ka)E.bindBuffer(34962,ca.buffer),E.vertexAttribPointer(zd,Id,Pd,sa,Ka,wa),Wc.type=Pd,Wc.size=Id,Wc.buffer=ca,Wc.normalized=sa,Wc.offset=wa,Wc.stride=Ka;Wc.divisor!==pa&&(na.vertexAttribDivisorANGLE(zd,pa),Wc.divisor=pa)}else if(Wc.buffer&&(E.disableVertexAttribArray(zd),Wc.buffer=null),Wc.x!==od||Wc.y!==Cd||Wc.z!==fd||Wc.w!==wd)E.vertexAttrib4f(zd,od,Cd,fd,wd),Wc.x=od,Wc.y=Cd,Wc.z=fd,Wc.w=wd;Ea.buffer=
b.positionBuffer;ud=!1;rd=null;Xc=0;eb=!1;Rb=jd=0;vc=1;fb=0;gd=5126;pd=yd=qc=kc=0;ka(Ea)?(ud=!0,rd=O.createStream(34962,Ea),gd=rd.dtype):(rd=O.getBuffer(Ea))?gd=rd.dtype:"constant"in Ea?(vc=2,"number"===typeof Ea.constant?(qc=Ea.constant,yd=pd=kc=0):(qc=0<Ea.constant.length?Ea.constant[0]:0,yd=1<Ea.constant.length?Ea.constant[1]:0,pd=2<Ea.constant.length?Ea.constant[2]:0,kc=3<Ea.constant.length?Ea.constant[3]:0)):(rd=ka(Ea.buffer)?O.createStream(34962,Ea.buffer):O.getBuffer(Ea.buffer),gd="type"in
Ea?Q[Ea.type]:rd.dtype,eb=!!Ea.normalized,Rb=Ea.size|0,jd=Ea.offset|0,fb=Ea.stride|0,Xc=Ea.divisor|0);Lc=W.location;jc=ga[Lc];if(1===vc){jc.buffer||E.enableVertexAttribArray(Lc);Zc=Rb||2;if(jc.type!==gd||jc.size!==Zc||jc.buffer!==rd||jc.normalized!==eb||jc.offset!==jd||jc.stride!==fb)E.bindBuffer(34962,rd.buffer),E.vertexAttribPointer(Lc,Zc,gd,eb,fb,jd),jc.type=gd,jc.size=Zc,jc.buffer=rd,jc.normalized=eb,jc.offset=jd,jc.stride=fb;jc.divisor!==Xc&&(na.vertexAttribDivisorANGLE(Lc,Xc),jc.divisor=Xc)}else if(jc.buffer&&
(E.disableVertexAttribArray(Lc),jc.buffer=null),jc.x!==qc||jc.y!==yd||jc.z!==pd||jc.w!==kc)E.vertexAttrib4f(Lc,qc,yd,pd,kc),jc.x=qc,jc.y=yd,jc.z=pd,jc.w=kc;La.buffer=b.positionBuffer;hd=!1;ic=null;Rc=0;Xb=!1;Ad=Ra=0;lc=1;rb=0;Hb=5126;kd=Sb=$b=cb=0;ka(La)?(hd=!0,ic=O.createStream(34962,La),Hb=ic.dtype):(ic=O.getBuffer(La))?Hb=ic.dtype:"constant"in La?(lc=2,"number"===typeof La.constant?($b=La.constant,Sb=kd=cb=0):($b=0<La.constant.length?La.constant[0]:0,Sb=1<La.constant.length?La.constant[1]:0,kd=
2<La.constant.length?La.constant[2]:0,cb=3<La.constant.length?La.constant[3]:0)):(ic=ka(La.buffer)?O.createStream(34962,La.buffer):O.getBuffer(La.buffer),Hb="type"in La?Q[La.type]:ic.dtype,Xb=!!La.normalized,Ad=La.size|0,Ra=La.offset|0,rb=La.stride|0,Rc=La.divisor|0);cc=la.location;Tb=ga[cc];if(1===lc){Tb.buffer||E.enableVertexAttribArray(cc);Mc=Ad||2;if(Tb.type!==Hb||Tb.size!==Mc||Tb.buffer!==ic||Tb.normalized!==Xb||Tb.offset!==Ra||Tb.stride!==rb)E.bindBuffer(34962,ic.buffer),E.vertexAttribPointer(cc,
Mc,Hb,Xb,rb,Ra),Tb.type=Hb,Tb.size=Mc,Tb.buffer=ic,Tb.normalized=Xb,Tb.offset=Ra,Tb.stride=rb;Tb.divisor!==Rc&&(na.vertexAttribDivisorANGLE(cc,Rc),Tb.divisor=Rc)}else if(Tb.buffer&&(E.disableVertexAttribArray(cc),Tb.buffer=null),Tb.x!==$b||Tb.y!==Sb||Tb.z!==kd||Tb.w!==cb)E.vertexAttrib4f(cc,$b,Sb,kd,cb),Tb.x=$b,Tb.y=Sb,Tb.z=kd,Tb.w=cb;K.buffer=b.positionBuffer;Ub=!1;Pa=null;Fb=0;Ib=!1;Sa=ib=0;pc=1;ac=0;Dc=5126;oc=Hc=mc=db=0;ka(K)?(Ub=!0,Pa=O.createStream(34962,K),Dc=Pa.dtype):(Pa=O.getBuffer(K))?
Dc=Pa.dtype:"constant"in K?(pc=2,"number"===typeof K.constant?(mc=K.constant,Hc=oc=db=0):(mc=0<K.constant.length?K.constant[0]:0,Hc=1<K.constant.length?K.constant[1]:0,oc=2<K.constant.length?K.constant[2]:0,db=3<K.constant.length?K.constant[3]:0)):(Pa=ka(K.buffer)?O.createStream(34962,K.buffer):O.getBuffer(K.buffer),Dc="type"in K?Q[K.type]:Pa.dtype,Ib=!!K.normalized,Sa=K.size|0,ib=K.offset|0,ac=K.stride|0,Fb=K.divisor|0);kb=ua.location;lb=ga[kb];if(1===pc){lb.buffer||E.enableVertexAttribArray(kb);
va=Sa||2;if(lb.type!==Dc||lb.size!==va||lb.buffer!==Pa||lb.normalized!==Ib||lb.offset!==ib||lb.stride!==ac)E.bindBuffer(34962,Pa.buffer),E.vertexAttribPointer(kb,va,Dc,Ib,ac,ib),lb.type=Dc,lb.size=va,lb.buffer=Pa,lb.normalized=Ib,lb.offset=ib,lb.stride=ac;lb.divisor!==Fb&&(na.vertexAttribDivisorANGLE(kb,Fb),lb.divisor=Fb)}else if(lb.buffer&&(E.disableVertexAttribArray(kb),lb.buffer=null),lb.x!==mc||lb.y!==Hc||lb.z!==oc||lb.w!==db)E.vertexAttrib4f(kb,mc,Hc,oc,db),lb.x=mc,lb.y=Hc,lb.z=oc,lb.w=db;M.buffer=
b.colorBuffer;nb=!1;ya=null;Wa=0;bb=!1;gb=Ia=0;Oa=1;xb=0;vb=5126;Lb=Kb=wc=Ua=0;ka(M)?(nb=!0,ya=O.createStream(34962,M),vb=ya.dtype):(ya=O.getBuffer(M))?vb=ya.dtype:"constant"in M?(Oa=2,"number"===typeof M.constant?(wc=M.constant,Kb=Lb=Ua=0):(wc=0<M.constant.length?M.constant[0]:0,Kb=1<M.constant.length?M.constant[1]:0,Lb=2<M.constant.length?M.constant[2]:0,Ua=3<M.constant.length?M.constant[3]:0)):(ya=ka(M.buffer)?O.createStream(34962,M.buffer):O.getBuffer(M.buffer),vb="type"in M?Q[M.type]:ya.dtype,
bb=!!M.normalized,gb=M.size|0,Ia=M.offset|0,xb=M.stride|0,Wa=M.divisor|0);Vb=l.location;Ca=ga[Vb];if(1===Oa){Ca.buffer||E.enableVertexAttribArray(Vb);xd=gb||4;if(Ca.type!==vb||Ca.size!==xd||Ca.buffer!==ya||Ca.normalized!==bb||Ca.offset!==Ia||Ca.stride!==xb)E.bindBuffer(34962,ya.buffer),E.vertexAttribPointer(Vb,xd,vb,bb,xb,Ia),Ca.type=vb,Ca.size=xd,Ca.buffer=ya,Ca.normalized=bb,Ca.offset=Ia,Ca.stride=xb;Ca.divisor!==Wa&&(na.vertexAttribDivisorANGLE(Vb,Wa),Ca.divisor=Wa)}else if(Ca.buffer&&(E.disableVertexAttribArray(Vb),
Ca.buffer=null),Ca.x!==wc||Ca.y!==Kb||Ca.z!==Lb||Ca.w!==Ua)E.vertexAttrib4f(Vb,wc,Kb,Lb,Ua),Ca.x=wc,Ca.y=Kb,Ca.z=Lb,Ca.w=Ua;Ja.buffer=b.colorBuffer;Ma=!1;Ob=null;hb=0;jb=!1;ec=xa=0;Da=1;ob=0;pb=5126;xc=nc=$a=Za=0;ka(Ja)?(Ma=!0,Ob=O.createStream(34962,Ja),pb=Ob.dtype):(Ob=O.getBuffer(Ja))?pb=Ob.dtype:"constant"in Ja?(Da=2,"number"===typeof Ja.constant?($a=Ja.constant,nc=xc=Za=0):($a=0<Ja.constant.length?Ja.constant[0]:0,nc=1<Ja.constant.length?Ja.constant[1]:0,xc=2<Ja.constant.length?Ja.constant[2]:
0,Za=3<Ja.constant.length?Ja.constant[3]:0)):(Ob=ka(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),pb="type"in Ja?Q[Ja.type]:Ob.dtype,jb=!!Ja.normalized,ec=Ja.size|0,xa=Ja.offset|0,ob=Ja.stride|0,hb=Ja.divisor|0);tc=L.location;Ya=ga[tc];if(1===Da){Ya.buffer||E.enableVertexAttribArray(tc);Mb=ec||4;if(Ya.type!==pb||Ya.size!==Mb||Ya.buffer!==Ob||Ya.normalized!==jb||Ya.offset!==xa||Ya.stride!==ob)E.bindBuffer(34962,Ob.buffer),E.vertexAttribPointer(tc,Mb,pb,jb,ob,xa),Ya.type=pb,Ya.size=
Mb,Ya.buffer=Ob,Ya.normalized=jb,Ya.offset=xa,Ya.stride=ob;Ya.divisor!==hb&&(na.vertexAttribDivisorANGLE(tc,hb),Ya.divisor=hb)}else if(Ya.buffer&&(E.disableVertexAttribArray(tc),Ya.buffer=null),Ya.x!==$a||Ya.y!==nc||Ya.z!==xc||Ya.w!==Za)E.vertexAttrib4f(tc,$a,nc,xc,Za),Ya.x=$a,Ya.y=nc,Ya.z=xc,Ya.w=Za;Ec=ba.location;Fa=ga[Ec];Fa.buffer||E.enableVertexAttribArray(Ec);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==f||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)E.bindBuffer(34962,f.buffer),E.vertexAttribPointer(Ec,
1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=f,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(na.vertexAttribDivisorANGLE(Ec,0),Fa.divisor=0);yc=I.location;Va=ga[yc];Va.buffer||E.enableVertexAttribArray(yc);if(5126!==Va.type||1!==Va.size||Va.buffer!==d||!1!==Va.normalized||4!==Va.offset||8!==Va.stride)E.bindBuffer(34962,d.buffer),E.vertexAttribPointer(yc,1,5126,!1,8,4),Va.type=5126,Va.size=1,Va.buffer=d,Va.normalized=!1,Va.offset=4,Va.stride=8;0!==Va.divisor&&(na.vertexAttribDivisorANGLE(yc,
0),Va.divisor=0);Ba=b.scale;E.uniform2f(ab.location,Ba[0],Ba[1]);mb=b.translate;E.uniform2f(za.location,mb[0],mb[1]);E.uniform1f(ma.location,b.thickness);E.uniform1f(N.location,b.depth);sb=D.call(this,T,b,0);E.uniform4f(da.location,sb[0],sb[1],sb[2],sb[3]);E.uniform1f(r.location,b.miterLimit);Ab=n.call(this,T,b,0);E.uniform1f(J.location,Ab);E.uniform1f(F.location,b.dashLength);E.uniform1f(ia.location,b.opacity);(qb=b.dashTexture)&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);uc=qb._texture;E.uniform1i(fa.location,
uc.bind());(tb=S.elements)?E.bindBuffer(34963,tb.buffer.buffer):Qa.currentVAO&&(tb=Gb.getElements(Qa.currentVAO.elements))&&E.bindBuffer(34963,tb.buffer.buffer);Sc=b.count;0<Sc?tb?na.drawElementsInstancedANGLE(5,4,tb.type,0<<(tb.type-5121>>1),Sc):na.drawArraysInstancedANGLE(5,0,4,Sc):0>Sc&&(tb?E.drawElements(5,4,tb.type,0<<(tb.type-5121>>1)):E.drawArrays(5,0,4));ra.dirty=!0;Qa.setVAO(null);T.viewportWidth=y;T.viewportHeight=v;A&&(k.cpuTime+=performance.now()-u);aa&&O.destroyStream(ca);ud&&O.destroyStream(rd);
hd&&O.destroyStream(ic);Ub&&O.destroyStream(Pa);nb&&O.destroyStream(ya);Ma&&O.destroyStream(Ob);uc.unbind()},scope:function(b,a,l){var r,g,q,n,B,t,L,J,D,W,N,la,F,C,A,ia,I,u,fa,E,G,R,ua,aa,ba,P,V,X,U,ha,Y,da,ga,ea,oa,ma,ab,Cb,Ha,za,Aa,ta,Jc,Eb,Ta,Xa,yb,Gb,ic,Rc,Xb,Ra,Ac,lc,rb,Hb,cb,$b,Sb,Qa,cc,Tb,Kc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,
Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,wf,Bd,Qe,Ke,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf,Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Ne,Ce,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,vf,zf,Af;r=b.viewport;g=r.x|0;q=r.y|0;n="width"in r?r.width|0:T.framebufferWidth-g;B="height"in r?r.height|0:T.framebufferHeight-q;t=T.viewportWidth;T.viewportWidth=
n;L=T.viewportHeight;T.viewportHeight=B;J=ca[0];ca[0]=g;D=ca[1];ca[1]=q;W=ca[2];ca[2]=n;N=ca[3];ca[3]=B;la=Ka[0];Ka[0]=0;F=Ka[1];Ka[1]=0;C=Ka[2];Ka[2]=0;A=Ka[3];Ka[3]=0;ia=Z.blend_enable;Z.blend_enable=!0;I=Na[0];Na[0]=32774;u=Na[1];Na[1]=32774;fa=pa[0];pa[0]=770;E=pa[1];pa[1]=771;G=pa[2];pa[2]=773;R=pa[3];pa[3]=1;ua=Z.cull_enable;Z.cull_enable=!0;aa=Z.cull_face;Z.cull_face=1029;ba=v.call(this,T,b,l);P=Z.depth_enable;Z.depth_enable=ba;V=b.viewport;X=V.x|0;U=V.y|0;ha="width"in V?V.width|0:T.framebufferWidth-
X;Y="height"in V?V.height|0:T.framebufferHeight-U;da=zb[0];zb[0]=X;ga=zb[1];zb[1]=U;ea=zb[2];zb[2]=ha;oa=zb[3];zb[3]=Y;ma=Z.scissor_enable;Z.scissor_enable=!0;ab=Z.stencil_enable;Z.stencil_enable=!1;if(Cb=ra.profile)Ha=performance.now(),k.count++;za=S.offset;S.offset=0;Aa=S.count;S.count=4;ta=b.count;Jc=S.instances;S.instances=ta;Eb=S.primitive;S.primitive=5;Ta=b.dashLength;Xa=wa[23];wa[23]=Ta;yb=b.dashTexture;Gb=wa[24];wa[24]=yb;ic=b.depth;Rc=wa[22];wa[22]=ic;Xb=b.id;Ra=wa[31];wa[31]=Xb;Ac=b.miterLimit;
lc=wa[32];wa[32]=Ac;rb=z.call(this,T,b,l);Hb=wa[33];wa[33]=rb;cb=b.opacity;$b=wa[10];wa[10]=cb;Sb=T.pixelRatio;Qa=wa[34];wa[34]=Sb;cc=b.scale;Tb=wa[6];wa[6]=cc;Kc=b.scaleFract;Ub=wa[7];wa[7]=Kc;Pa=b.thickness;Fb=wa[21];wa[21]=Pa;Ib=b.translate;ib=wa[8];wa[8]=Ib;Sa=b.translateFract;pc=wa[9];wa[9]=Sa;ac=w.call(this,T,b,l);Dc=wa[3];wa[3]=ac;M.buffer=b.colorBuffer;db=!1;mc=null;Hc=0;oc=!1;lb=kb=0;va=1;nb=0;ya=5126;gb=Ia=bb=Wa=0;ka(M)?(db=!0,mc=O.createStream(34962,M),ya=mc.dtype):(mc=O.getBuffer(M))?
ya=mc.dtype:"constant"in M?(va=2,"number"===typeof M.constant?(bb=M.constant,Ia=gb=Wa=0):(bb=0<M.constant.length?M.constant[0]:0,Ia=1<M.constant.length?M.constant[1]:0,gb=2<M.constant.length?M.constant[2]:0,Wa=3<M.constant.length?M.constant[3]:0)):(mc=ka(M.buffer)?O.createStream(34962,M.buffer):O.getBuffer(M.buffer),ya="type"in M?Q[M.type]:mc.dtype,oc=!!M.normalized,lb=M.size|0,kb=M.offset|0,nb=M.stride|0,Hc=M.divisor|0);Oa=p.buffer;p.buffer=mc;xb=p.divisor;p.divisor=Hc;vb=p.normalized;p.normalized=
oc;Ua=p.offset;p.offset=kb;wc=p.size;p.size=lb;Kb=p.state;p.state=va;Lb=p.stride;p.stride=nb;Vb=p.type;p.type=ya;Ca=p.w;p.w=Wa;xd=p.x;p.x=bb;Ma=p.y;p.y=Ia;Ob=p.z;p.z=gb;ja.buffer=b.positionBuffer;hb=!1;jb=null;xa=0;ec=!1;ob=Da=0;pb=1;Za=0;$a=5126;Ya=tc=xc=nc=0;ka(ja)?(hb=!0,jb=O.createStream(34962,ja),$a=jb.dtype):(jb=O.getBuffer(ja))?$a=jb.dtype:"constant"in ja?(pb=2,"number"===typeof ja.constant?(xc=ja.constant,tc=Ya=nc=0):(xc=0<ja.constant.length?ja.constant[0]:0,tc=1<ja.constant.length?ja.constant[1]:
0,Ya=2<ja.constant.length?ja.constant[2]:0,nc=3<ja.constant.length?ja.constant[3]:0)):(jb=ka(ja.buffer)?O.createStream(34962,ja.buffer):O.getBuffer(ja.buffer),$a="type"in ja?Q[ja.type]:jb.dtype,ec=!!ja.normalized,ob=ja.size|0,Da=ja.offset|0,Za=ja.stride|0,xa=ja.divisor|0);Mb=e.buffer;e.buffer=jb;Ec=e.divisor;e.divisor=xa;Fa=e.normalized;e.normalized=ec;yc=e.offset;e.offset=Da;Va=e.size;e.size=ob;Ba=e.state;e.state=pb;mb=e.stride;e.stride=Za;sb=e.type;e.type=$a;Ab=e.w;e.w=nc;qb=e.x;e.x=xc;uc=e.y;e.y=
tc;tb=e.z;e.z=Ya;Ja.buffer=b.colorBuffer;Sc=!1;rc=null;sd=0;Nc=!1;dd=cd=0;Yb=1;dc=0;Pb=5126;Bb=wb=bc=Ga=0;ka(Ja)?(Sc=!0,rc=O.createStream(34962,Ja),Pb=rc.dtype):(rc=O.getBuffer(Ja))?Pb=rc.dtype:"constant"in Ja?(Yb=2,"number"===typeof Ja.constant?(bc=Ja.constant,wb=Bb=Ga=0):(bc=0<Ja.constant.length?Ja.constant[0]:0,wb=1<Ja.constant.length?Ja.constant[1]:0,Bb=2<Ja.constant.length?Ja.constant[2]:0,Ga=3<Ja.constant.length?Ja.constant[3]:0)):(rc=ka(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),
Pb="type"in Ja?Q[Ja.type]:rc.dtype,Nc=!!Ja.normalized,dd=Ja.size|0,cd=Ja.offset|0,dc=Ja.stride|0,sd=Ja.divisor|0);Nb=c.buffer;c.buffer=rc;Qb=c.divisor;c.divisor=sd;fc=c.normalized;c.normalized=Nc;hc=c.offset;c.offset=cd;Tc=c.size;c.size=dd;Bc=c.state;c.state=Yb;Cc=c.stride;c.stride=dc;Fc=c.type;c.type=Pb;Oc=c.w;c.w=Ga;ed=c.x;c.x=bc;Uc=c.y;c.y=wb;Pc=c.z;c.z=Bb;Ea.buffer=b.positionBuffer;Wb=!1;Db=null;Qc=0;Ic=!1;gc=Vc=0;$c=1;id=0;qd=5126;Bd=wf=ad=vd=0;ka(Ea)?(Wb=!0,Db=O.createStream(34962,Ea),qd=Db.dtype):
(Db=O.getBuffer(Ea))?qd=Db.dtype:"constant"in Ea?($c=2,"number"===typeof Ea.constant?(ad=Ea.constant,wf=Bd=vd=0):(ad=0<Ea.constant.length?Ea.constant[0]:0,wf=1<Ea.constant.length?Ea.constant[1]:0,Bd=2<Ea.constant.length?Ea.constant[2]:0,vd=3<Ea.constant.length?Ea.constant[3]:0)):(Db=ka(Ea.buffer)?O.createStream(34962,Ea.buffer):O.getBuffer(Ea.buffer),qd="type"in Ea?Q[Ea.type]:Db.dtype,Ic=!!Ea.normalized,gc=Ea.size|0,Vc=Ea.offset|0,id=Ea.stride|0,Qc=Ea.divisor|0);Qe=m.buffer;m.buffer=Db;Ke=m.divisor;
m.divisor=Qc;le=m.normalized;m.normalized=Ic;Md=m.offset;m.offset=Vc;Kd=m.size;m.size=gc;ld=m.state;m.state=$c;Gc=m.stride;m.stride=id;td=m.type;m.type=qd;md=m.w;m.w=vd;bd=m.x;m.x=ad;nd=m.y;m.y=wf;Dd=m.z;m.z=Bd;Ed=x.buffer;x.buffer=f;te=x.divisor;x.divisor=0;xe=x.normalized;x.normalized=!1;Ze=x.offset;x.offset=0;me=x.size;x.size=0;fe=x.state;x.state=1;de=x.stride;x.stride=8;qe=x.type;x.type=5126;$d=x.w;x.w=0;ge=x.x;x.x=0;zc=x.y;x.y=0;Yc=x.z;x.z=0;re=y.buffer;y.buffer=d;je=y.divisor;y.divisor=0;Ld=
y.normalized;y.normalized=!1;Qd=y.offset;y.offset=4;Rd=y.size;y.size=0;Sd=y.state;y.state=1;he=y.stride;y.stride=8;Re=y.type;y.type=5126;ze=y.w;y.w=0;ne=y.x;y.x=0;bf=y.y;y.y=0;Se=y.z;y.z=0;La.buffer=b.positionBuffer;Le=!1;se=null;De=0;Fe=!1;He=Ge=0;Ee=1;Nd=0;Wd=5126;Hd=Ie=ae=Zd=0;ka(La)?(Le=!0,se=O.createStream(34962,La),Wd=se.dtype):(se=O.getBuffer(La))?Wd=se.dtype:"constant"in La?(Ee=2,"number"===typeof La.constant?(ae=La.constant,Ie=Hd=Zd=0):(ae=0<La.constant.length?La.constant[0]:0,Ie=1<La.constant.length?
La.constant[1]:0,Hd=2<La.constant.length?La.constant[2]:0,Zd=3<La.constant.length?La.constant[3]:0)):(se=ka(La.buffer)?O.createStream(34962,La.buffer):O.getBuffer(La.buffer),Wd="type"in La?Q[La.type]:se.dtype,Fe=!!La.normalized,He=La.size|0,Ge=La.offset|0,Nd=La.stride|0,De=La.divisor|0);Td=H.buffer;H.buffer=se;Be=H.divisor;H.divisor=De;Je=H.normalized;H.normalized=Fe;cf=H.offset;H.offset=Ge;af=H.size;H.size=He;Te=H.state;H.state=Ee;Me=H.stride;H.stride=Nd;$e=H.type;H.type=Wd;Xe=H.w;H.w=Zd;Ue=H.x;
H.x=ae;Ve=H.y;H.y=Ie;Ud=H.z;H.z=Hd;K.buffer=b.positionBuffer;Yd=!1;We=null;jf=0;nf=!1;kf=ff=0;lf=1;mf=0;rf=5126;Df=Cf=sf=of=0;ka(K)?(Yd=!0,We=O.createStream(34962,K),rf=We.dtype):(We=O.getBuffer(K))?rf=We.dtype:"constant"in K?(lf=2,"number"===typeof K.constant?(sf=K.constant,Cf=Df=of=0):(sf=0<K.constant.length?K.constant[0]:0,Cf=1<K.constant.length?K.constant[1]:0,Df=2<K.constant.length?K.constant[2]:0,of=3<K.constant.length?K.constant[3]:0)):(We=ka(K.buffer)?O.createStream(34962,K.buffer):O.getBuffer(K.buffer),
rf="type"in K?Q[K.type]:We.dtype,nf=!!K.normalized,kf=K.size|0,ff=K.offset|0,mf=K.stride|0,jf=K.divisor|0);Ne=h.buffer;h.buffer=We;Ce=h.divisor;h.divisor=jf;pf=h.normalized;h.normalized=nf;qf=h.offset;h.offset=ff;Ef=h.size;h.size=kf;Hf=h.state;h.state=lf;Bf=h.stride;h.stride=mf;Ff=h.type;h.type=rf;Gf=h.w;h.w=of;xf=h.x;h.x=sf;yf=h.y;h.y=Cf;vf=h.z;h.z=Df;zf=sa.vert;sa.vert=36;Af=sa.frag;sa.frag=35;ra.dirty=!0;a(T,b,l);T.viewportWidth=t;T.viewportHeight=L;ca[0]=J;ca[1]=D;ca[2]=W;ca[3]=N;Ka[0]=la;Ka[1]=
F;Ka[2]=C;Ka[3]=A;Z.blend_enable=ia;Na[0]=I;Na[1]=u;pa[0]=fa;pa[1]=E;pa[2]=G;pa[3]=R;Z.cull_enable=ua;Z.cull_face=aa;Z.depth_enable=P;zb[0]=da;zb[1]=ga;zb[2]=ea;zb[3]=oa;Z.scissor_enable=ma;Z.stencil_enable=ab;Cb&&(k.cpuTime+=performance.now()-Ha);S.offset=za;S.count=Aa;S.instances=Jc;S.primitive=Eb;wa[23]=Xa;wa[24]=Gb;wa[22]=Rc;wa[31]=Ra;wa[32]=lc;wa[33]=Hb;wa[10]=$b;wa[34]=Qa;wa[6]=Tb;wa[7]=Ub;wa[21]=Fb;wa[8]=ib;wa[9]=pc;wa[3]=Dc;db&&O.destroyStream(mc);p.buffer=Oa;p.divisor=xb;p.normalized=vb;
p.offset=Ua;p.size=wc;p.state=Kb;p.stride=Lb;p.type=Vb;p.w=Ca;p.x=xd;p.y=Ma;p.z=Ob;hb&&O.destroyStream(jb);e.buffer=Mb;e.divisor=Ec;e.normalized=Fa;e.offset=yc;e.size=Va;e.state=Ba;e.stride=mb;e.type=sb;e.w=Ab;e.x=qb;e.y=uc;e.z=tb;Sc&&O.destroyStream(rc);c.buffer=Nb;c.divisor=Qb;c.normalized=fc;c.offset=hc;c.size=Tc;c.state=Bc;c.stride=Cc;c.type=Fc;c.w=Oc;c.x=ed;c.y=Uc;c.z=Pc;Wb&&O.destroyStream(Db);m.buffer=Qe;m.divisor=Ke;m.normalized=le;m.offset=Md;m.size=Kd;m.state=ld;m.stride=Gc;m.type=td;m.w=
md;m.x=bd;m.y=nd;m.z=Dd;x.buffer=Ed;x.divisor=te;x.normalized=xe;x.offset=Ze;x.size=me;x.state=fe;x.stride=de;x.type=qe;x.w=$d;x.x=ge;x.y=zc;x.z=Yc;y.buffer=re;y.divisor=je;y.normalized=Ld;y.offset=Qd;y.size=Rd;y.state=Sd;y.stride=he;y.type=Re;y.w=ze;y.x=ne;y.y=bf;y.z=Se;Le&&O.destroyStream(se);H.buffer=Td;H.divisor=Be;H.normalized=Je;H.offset=cf;H.size=af;H.state=Te;H.stride=Me;H.type=$e;H.w=Xe;H.x=Ue;H.y=Ve;H.z=Ud;Yd&&O.destroyStream(We);h.buffer=Ne;h.divisor=Ce;h.normalized=pf;h.offset=qf;h.size=
Ef;h.state=Hf;h.stride=Bf;h.type=Ff;h.w=Gf;h.x=xf;h.y=yf;h.z=vf;sa.vert=zf;sa.frag=Af;ra.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,h,u){var A,aa,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa;A=a.attributes;aa=a.buffer;C=a.context;b=a.current;l=a.draw;B=a.elements;L=a.extensions;W=a.framebuffer;F=a.gl;fa=a.isBufferArgs;N=a.next;ba=a.shader;I=a.uniforms;
r=a.vao;J=N.blend_color;la=b.blend_color;ia=N.blend_equation;ua=b.blend_equation;ab=N.blend_func;ma=b.blend_func;za=N.colorMask;da=b.colorMask;ga=N.depth_range;O=b.depth_range;T=N.polygonOffset_offset;ra=b.polygonOffset_offset;S=N.sample_coverage;Gb=b.sample_coverage;Ta=N.scissor_box;X=b.scissor_box;E=N.stencil_func;ka=b.stencil_func;Z=N.stencil_opBack;sa=b.stencil_opBack;wa=N.stencil_opFront;Qa=b.stencil_opFront;Ka=N.viewport;U=b.viewport;Na={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,
uint32:5125,"float":5126,float32:5126};ea={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,d){var g,f,q,n,t,J;g=W.next;g!==W.cur&&(g?F.bindFramebuffer(36160,g.framebuffer):F.bindFramebuffer(36160,null),W.cur=g);if(b.dirty){var D,ia,I,ba,P,G,oa,ab,Y,ca,ta,Q,M,ja,Ja,Ea,La,K,Ta,Ka,qa,Jb,ub,Ae,be,ee,ke,we,ue,Fd,ie,ve;D=N.dither;D!==b.dither&&(D?F.enable(3024):F.disable(3024),b.dither=D);ia=N.depth_func;ia!==b.depth_func&&(F.depthFunc(ia),b.depth_func=ia);I=ga[0];ba=ga[1];if(I!==O[0]||
ba!==O[1])F.depthRange(I,ba),O[0]=I,O[1]=ba;P=N.depth_mask;P!==b.depth_mask&&(F.depthMask(P),b.depth_mask=P);G=za[0];oa=za[1];ab=za[2];Y=za[3];if(G!==da[0]||oa!==da[1]||ab!==da[2]||Y!==da[3])F.colorMask(G,oa,ab,Y),da[0]=G,da[1]=oa,da[2]=ab,da[3]=Y;ca=N.cull_enable;ca!==b.cull_enable&&(ca?F.enable(2884):F.disable(2884),b.cull_enable=ca);ta=N.cull_face;ta!==b.cull_face&&(F.cullFace(ta),b.cull_face=ta);Q=N.frontFace;Q!==b.frontFace&&(F.frontFace(Q),b.frontFace=Q);M=N.lineWidth;M!==b.lineWidth&&(F.lineWidth(M),
b.lineWidth=M);ja=N.polygonOffset_enable;ja!==b.polygonOffset_enable&&(ja?F.enable(32823):F.disable(32823),b.polygonOffset_enable=ja);Ja=T[0];Ea=T[1];if(Ja!==ra[0]||Ea!==ra[1])F.polygonOffset(Ja,Ea),ra[0]=Ja,ra[1]=Ea;La=N.sample_alpha;La!==b.sample_alpha&&(La?F.enable(32926):F.disable(32926),b.sample_alpha=La);K=N.sample_enable;K!==b.sample_enable&&(K?F.enable(32928):F.disable(32928),b.sample_enable=K);Ta=S[0];Ka=S[1];if(Ta!==Gb[0]||Ka!==Gb[1])F.sampleCoverage(Ta,Ka),Gb[0]=Ta,Gb[1]=Ka;qa=N.stencil_mask;
qa!==b.stencil_mask&&(F.stencilMask(qa),b.stencil_mask=qa);Jb=E[0];ub=E[1];Ae=E[2];if(Jb!==ka[0]||ub!==ka[1]||Ae!==ka[2])F.stencilFunc(Jb,ub,Ae),ka[0]=Jb,ka[1]=ub,ka[2]=Ae;be=wa[0];ee=wa[1];ke=wa[2];we=wa[3];if(be!==Qa[0]||ee!==Qa[1]||ke!==Qa[2]||we!==Qa[3])F.stencilOpSeparate(be,ee,ke,we),Qa[0]=be,Qa[1]=ee,Qa[2]=ke,Qa[3]=we;ue=Z[0];Fd=Z[1];ie=Z[2];ve=Z[3];if(ue!==sa[0]||Fd!==sa[1]||ie!==sa[2]||ve!==sa[3])F.stencilOpSeparate(ue,Fd,ie,ve),sa[0]=ue,sa[1]=Fd,sa[2]=ie,sa[3]=ve}F.blendColor(0,0,0,0);la[0]=
0;la[1]=0;la[2]=0;la[3]=0;F.enable(3042);b.blend_enable=!0;F.blendEquationSeparate(32774,32774);ua[0]=32774;ua[1]=32774;F.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;F.disable(2929);b.depth_enable=!1;F.enable(3089);b.scissor_enable=!0;F.disable(2960);b.stencil_enable=!1;if(f=b.profile)q=performance.now(),k.count+=d;F.useProgram(v.program);n=L.angle_instanced_arrays;var Od;r.setVAO(null);Od=l.instances;for(t=0;t<d;++t){J=a[t];var Xd,Vd,Jd,Oe,Ye,Pe,Gd,ye,oe,pe,ce,Pd,wd,od,
Cd,fd,zd,Wc,Id,ud,rd,Xc,eb,jd,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb;Xd=J.viewport;Vd=Xd.x|0;Jd=Xd.y|0;Oe="width"in Xd?Xd.width|0:C.framebufferWidth-Vd;Ye="height"in Xd?Xd.height|0:C.framebufferHeight-Jd;Pe=C.viewportWidth;C.viewportWidth=Oe;Gd=C.viewportHeight;C.viewportHeight=Ye;F.viewport(Vd,Jd,Oe,Ye);U[0]=Vd;U[1]=Jd;U[2]=Oe;U[3]=Ye;ye=J.viewport;oe=ye.x|0;pe=ye.y|
0;ce="width"in ye?ye.width|0:C.framebufferWidth-oe;Pd="height"in ye?ye.height|0:C.framebufferHeight-pe;F.scissor(oe,pe,ce,Pd);X[0]=oe;X[1]=pe;X[2]=ce;X[3]=Pd;ea.buffer=J.positionBuffer;wd=!1;od=null;Cd=0;fd=!1;Wc=zd=0;Id=1;ud=0;rd=5126;Rb=jd=eb=Xc=0;fa(ea)?(wd=!0,od=aa.createStream(34962,ea),rd=od.dtype):(od=aa.getBuffer(ea))?rd=od.dtype:"constant"in ea?(Id=2,"number"===typeof ea.constant?(eb=ea.constant,jd=Rb=Xc=0):(eb=0<ea.constant.length?ea.constant[0]:0,jd=1<ea.constant.length?ea.constant[1]:
0,Rb=2<ea.constant.length?ea.constant[2]:0,Xc=3<ea.constant.length?ea.constant[3]:0)):(od=fa(ea.buffer)?aa.createStream(34962,ea.buffer):aa.getBuffer(ea.buffer),rd="type"in ea?Na[ea.type]:od.dtype,fd=!!ea.normalized,Wc=ea.size|0,zd=ea.offset|0,ud=ea.stride|0,Cd=ea.divisor|0);vc=c.location;fb=A[vc];if(1===Id){fb.buffer||F.enableVertexAttribArray(vc);gd=Wc||2;if(fb.type!==rd||fb.size!==gd||fb.buffer!==od||fb.normalized!==fd||fb.offset!==zd||fb.stride!==ud)F.bindBuffer(34962,od.buffer),F.vertexAttribPointer(vc,
gd,rd,fd,ud,zd),fb.type=rd,fb.size=gd,fb.buffer=od,fb.normalized=fd,fb.offset=zd,fb.stride=ud;fb.divisor!==Cd&&(n.vertexAttribDivisorANGLE(vc,Cd),fb.divisor=Cd)}else if(fb.buffer&&(F.disableVertexAttribArray(vc),fb.buffer=null),fb.x!==eb||fb.y!==jd||fb.z!==Rb||fb.w!==Xc)F.vertexAttrib4f(vc,eb,jd,Rb,Xc),fb.x=eb,fb.y=jd,fb.z=Rb,fb.w=Xc;pa.buffer=J.positionFractBuffer;kc=!1;qc=null;yd=0;pd=!1;jc=Lc=0;Zc=1;hd=0;ic=5126;Ad=Ra=Xb=Rc=0;fa(pa)?(kc=!0,qc=aa.createStream(34962,pa),ic=qc.dtype):(qc=aa.getBuffer(pa))?
ic=qc.dtype:"constant"in pa?(Zc=2,"number"===typeof pa.constant?(Xb=pa.constant,Ra=Ad=Rc=0):(Xb=0<pa.constant.length?pa.constant[0]:0,Ra=1<pa.constant.length?pa.constant[1]:0,Ad=2<pa.constant.length?pa.constant[2]:0,Rc=3<pa.constant.length?pa.constant[3]:0)):(qc=fa(pa.buffer)?aa.createStream(34962,pa.buffer):aa.getBuffer(pa.buffer),ic="type"in pa?Na[pa.type]:qc.dtype,pd=!!pa.normalized,jc=pa.size|0,Lc=pa.offset|0,hd=pa.stride|0,yd=pa.divisor|0);lc=m.location;rb=A[lc];if(1===Zc){rb.buffer||F.enableVertexAttribArray(lc);
Hb=jc||2;if(rb.type!==ic||rb.size!==Hb||rb.buffer!==qc||rb.normalized!==pd||rb.offset!==Lc||rb.stride!==hd)F.bindBuffer(34962,qc.buffer),F.vertexAttribPointer(lc,Hb,ic,pd,hd,Lc),rb.type=ic,rb.size=Hb,rb.buffer=qc,rb.normalized=pd,rb.offset=Lc,rb.stride=hd;rb.divisor!==yd&&(n.vertexAttribDivisorANGLE(lc,yd),rb.divisor=yd)}else if(rb.buffer&&(F.disableVertexAttribArray(lc),rb.buffer=null),rb.x!==Xb||rb.y!==Ra||rb.z!==Ad||rb.w!==Rc)F.vertexAttrib4f(lc,Xb,Ra,Ad,Rc),rb.x=Xb,rb.y=Ra,rb.z=Ad,rb.w=Rc;cb=
J.fill;$b=cb[0];kd=cb[1];Tb=cb[2];Ub=cb[3];t&&Sb===$b&&cc===kd&&Mc===Tb&&Pa===Ub||(Sb=$b,cc=kd,Mc=Tb,Pa=Ub,F.uniform4f(w.location,$b,kd,Tb,Ub));Fb=J.scale;Ib=Fb[0];Sa=Fb[1];t&&ib===Ib&&pc===Sa||(ib=Ib,pc=Sa,F.uniform2f(x.location,Ib,Sa));ac=J.scaleFract;Dc=ac[0];mc=ac[1];t&&db===Dc&&Hc===mc||(db=Dc,Hc=mc,F.uniform2f(y.location,Dc,mc));oc=J.translate;kb=oc[0];va=oc[1];t&&lb===kb&&nb===va||(lb=kb,nb=va,F.uniform2f(h.location,kb,va));ya=J.translateFract;Wa=ya[0];Ia=ya[1];t&&bb===Wa&&gb===Ia||(bb=Wa,
gb=Ia,F.uniform2f(u.location,Wa,Ia));Oa=J.id;t&&xb===Oa||(xb=Oa,F.uniform1f(p.location,Oa));vb=J.opacity;t&&Ua===vb||(Ua=vb,F.uniform1f(e.location,vb));wc=z.call(this,C,J,t);Kb=null;(Kb=(Lb=fa(wc))?B.createStream(wc):B.getElements(wc))&&F.bindBuffer(34963,Kb.buffer.buffer);if(Vb=Kb?Kb.vertCount:-1)0<Od?Kb?n.drawElementsInstancedANGLE(4,Vb,Kb.type,0<<(Kb.type-5121>>1),Od):n.drawArraysInstancedANGLE(4,0,Vb,Od):0>Od&&(Kb?F.drawElements(4,Vb,Kb.type,0<<(Kb.type-5121>>1)):F.drawArrays(4,0,Vb)),C.viewportWidth=
Pe,C.viewportHeight=Gd,wd&&aa.destroyStream(od),kc&&aa.destroyStream(qc),Lb&&B.destroyStream(Kb)}b.dirty=!0;r.setVAO(null);f&&(k.cpuTime+=performance.now()-q)},draw:function(a){var d,f,n,v,t,J,D,z,ia,I,ba,P,G,oa,ab,Y,ca,ta,Q,M,ja,Ta;d=W.next;d!==W.cur&&(d?F.bindFramebuffer(36160,d.framebuffer):F.bindFramebuffer(36160,null),W.cur=d);if(b.dirty){d=N.dither;d!==b.dither&&(d?F.enable(3024):F.disable(3024),b.dither=d);d=N.depth_func;d!==b.depth_func&&(F.depthFunc(d),b.depth_func=d);d=ga[0];J=ga[1];if(d!==
O[0]||J!==O[1])F.depthRange(d,J),O[0]=d,O[1]=J;d=N.depth_mask;d!==b.depth_mask&&(F.depthMask(d),b.depth_mask=d);d=za[0];J=za[1];f=za[2];n=za[3];if(d!==da[0]||J!==da[1]||f!==da[2]||n!==da[3])F.colorMask(d,J,f,n),da[0]=d,da[1]=J,da[2]=f,da[3]=n;d=N.cull_enable;d!==b.cull_enable&&(d?F.enable(2884):F.disable(2884),b.cull_enable=d);d=N.cull_face;d!==b.cull_face&&(F.cullFace(d),b.cull_face=d);d=N.frontFace;d!==b.frontFace&&(F.frontFace(d),b.frontFace=d);d=N.lineWidth;d!==b.lineWidth&&(F.lineWidth(d),b.lineWidth=
d);d=N.polygonOffset_enable;d!==b.polygonOffset_enable&&(d?F.enable(32823):F.disable(32823),b.polygonOffset_enable=d);d=T[0];J=T[1];if(d!==ra[0]||J!==ra[1])F.polygonOffset(d,J),ra[0]=d,ra[1]=J;d=N.sample_alpha;d!==b.sample_alpha&&(d?F.enable(32926):F.disable(32926),b.sample_alpha=d);d=N.sample_enable;d!==b.sample_enable&&(d?F.enable(32928):F.disable(32928),b.sample_enable=d);d=S[0];J=S[1];if(d!==Gb[0]||J!==Gb[1])F.sampleCoverage(d,J),Gb[0]=d,Gb[1]=J;d=N.stencil_mask;d!==b.stencil_mask&&(F.stencilMask(d),
b.stencil_mask=d);d=E[0];J=E[1];f=E[2];if(d!==ka[0]||J!==ka[1]||f!==ka[2])F.stencilFunc(d,J,f),ka[0]=d,ka[1]=J,ka[2]=f;d=wa[0];J=wa[1];f=wa[2];n=wa[3];if(d!==Qa[0]||J!==Qa[1]||f!==Qa[2]||n!==Qa[3])F.stencilOpSeparate(d,J,f,n),Qa[0]=d,Qa[1]=J,Qa[2]=f,Qa[3]=n;d=Z[0];J=Z[1];f=Z[2];n=Z[3];if(d!==sa[0]||J!==sa[1]||f!==sa[2]||n!==sa[3])F.stencilOpSeparate(d,J,f,n),sa[0]=d,sa[1]=J,sa[2]=f,sa[3]=n}d=a.viewport;f=d.x|0;n=d.y|0;v="width"in d?d.width|0:C.framebufferWidth-f;t="height"in d?d.height|0:C.framebufferHeight-
n;d=C.viewportWidth;C.viewportWidth=v;J=C.viewportHeight;C.viewportHeight=t;F.viewport(f,n,v,t);U[0]=f;U[1]=n;U[2]=v;U[3]=t;F.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;F.enable(3042);b.blend_enable=!0;F.blendEquationSeparate(32774,32774);ua[0]=32774;ua[1]=32774;F.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;F.disable(2929);b.depth_enable=!1;t=a.viewport;f=t.x|0;n=t.y|0;v="width"in t?t.width|0:C.framebufferWidth-f;t="height"in t?t.height|0:C.framebufferHeight-n;
F.scissor(f,n,v,t);X[0]=f;X[1]=n;X[2]=v;X[3]=t;F.enable(3089);b.scissor_enable=!0;F.disable(2960);b.stencil_enable=!1;if(f=b.profile)D=performance.now(),k.count++;F.useProgram(g.program);n=L.angle_instanced_arrays;r.setVAO(null);ea.buffer=a.positionBuffer;v=!1;z=0;ia=!1;ba=I=0;P=1;G=0;oa=5126;ta=ca=Y=ab=0;fa(ea)?(v=!0,t=aa.createStream(34962,ea),oa=t.dtype):(t=aa.getBuffer(ea))?oa=t.dtype:"constant"in ea?(P=2,"number"===typeof ea.constant?(Y=ea.constant,ca=ta=ab=0):(Y=0<ea.constant.length?ea.constant[0]:
0,ca=1<ea.constant.length?ea.constant[1]:0,ta=2<ea.constant.length?ea.constant[2]:0,ab=3<ea.constant.length?ea.constant[3]:0)):(t=fa(ea.buffer)?aa.createStream(34962,ea.buffer):aa.getBuffer(ea.buffer),oa="type"in ea?Na[ea.type]:t.dtype,ia=!!ea.normalized,ba=ea.size|0,I=ea.offset|0,G=ea.stride|0,z=ea.divisor|0);Q=c.location;M=A[Q];if(1===P){M.buffer||F.enableVertexAttribArray(Q);ba=ba||2;if(M.type!==oa||M.size!==ba||M.buffer!==t||M.normalized!==ia||M.offset!==I||M.stride!==G)F.bindBuffer(34962,t.buffer),
F.vertexAttribPointer(Q,ba,oa,ia,G,I),M.type=oa,M.size=ba,M.buffer=t,M.normalized=ia,M.offset=I,M.stride=G;M.divisor!==z&&(n.vertexAttribDivisorANGLE(Q,z),M.divisor=z)}else if(M.buffer&&(F.disableVertexAttribArray(Q),M.buffer=null),M.x!==Y||M.y!==ca||M.z!==ta||M.w!==ab)F.vertexAttrib4f(Q,Y,ca,ta,ab),M.x=Y,M.y=ca,M.z=ta,M.w=ab;pa.buffer=a.positionFractBuffer;z=!1;I=0;G=!1;ab=oa=0;Y=1;Q=0;M=5126;Ta=ja=ta=ca=0;fa(pa)?(z=!0,ia=aa.createStream(34962,pa),M=ia.dtype):(ia=aa.getBuffer(pa))?M=ia.dtype:"constant"in
pa?(Y=2,"number"===typeof pa.constant?(ta=pa.constant,ja=Ta=ca=0):(ta=0<pa.constant.length?pa.constant[0]:0,ja=1<pa.constant.length?pa.constant[1]:0,Ta=2<pa.constant.length?pa.constant[2]:0,ca=3<pa.constant.length?pa.constant[3]:0)):(ia=fa(pa.buffer)?aa.createStream(34962,pa.buffer):aa.getBuffer(pa.buffer),M="type"in pa?Na[pa.type]:ia.dtype,G=!!pa.normalized,ab=pa.size|0,oa=pa.offset|0,Q=pa.stride|0,I=pa.divisor|0);ba=m.location;P=A[ba];if(1===Y){P.buffer||F.enableVertexAttribArray(ba);ab=ab||2;if(P.type!==
M||P.size!==ab||P.buffer!==ia||P.normalized!==G||P.offset!==oa||P.stride!==Q)F.bindBuffer(34962,ia.buffer),F.vertexAttribPointer(ba,ab,M,G,Q,oa),P.type=M,P.size=ab,P.buffer=ia,P.normalized=G,P.offset=oa,P.stride=Q;P.divisor!==I&&(n.vertexAttribDivisorANGLE(ba,I),P.divisor=I)}else if(P.buffer&&(F.disableVertexAttribArray(ba),P.buffer=null),P.x!==ta||P.y!==ja||P.z!==Ta||P.w!==ca)F.vertexAttrib4f(ba,ta,ja,Ta,ca),P.x=ta,P.y=ja,P.z=Ta,P.w=ca;I=a.fill;F.uniform4f(w.location,I[0],I[1],I[2],I[3]);I=a.scale;
F.uniform2f(x.location,I[0],I[1]);I=a.scaleFract;F.uniform2f(y.location,I[0],I[1]);I=a.translate;F.uniform2f(h.location,I[0],I[1]);I=a.translateFract;F.uniform2f(u.location,I[0],I[1]);F.uniform1f(p.location,a.id);F.uniform1f(e.location,a.opacity);I=q.call(this,C,a,0);(I=(a=fa(I))?B.createStream(I):B.getElements(I))&&F.bindBuffer(34963,I.buffer.buffer);if(G=I?I.vertCount:-1)oa=l.instances,0<oa?I?n.drawElementsInstancedANGLE(4,G,I.type,0<<(I.type-5121>>1),oa):n.drawArraysInstancedANGLE(4,0,G,oa):0>
oa&&(I?F.drawElements(4,G,I.type,0<<(I.type-5121>>1)):F.drawArrays(4,0,G)),b.dirty=!0,r.setVAO(null),C.viewportWidth=d,C.viewportHeight=J,f&&(k.cpuTime+=performance.now()-D),v&&aa.destroyStream(t),z&&aa.destroyStream(ia),a&&B.destroyStream(I)},scope:function(a,c,e){var r,g,m,p,q,x,t,y,v,L,w,z,W,h,H,la,F,A,u,E,na,ua,K,O,T,S,X,U,da,ga,Z,ka,ma,ra,za,sa,wa,Gb,Qa,Vd,Jd,Oe,Ye,Pe,Gd,ye,oe,pe,ce,Pd,wd,od,Cd,fd,zd,Wc,Id,ud,rd,Xc,eb,jd,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,
cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb;r=a.viewport;g=r.x|0;m=r.y|0;p="width"in r?r.width|0:C.framebufferWidth-g;q="height"in r?r.height|0:C.framebufferHeight-m;x=C.viewportWidth;C.viewportWidth=p;t=C.viewportHeight;C.viewportHeight=q;y=Ka[0];Ka[0]=g;v=Ka[1];Ka[1]=m;L=Ka[2];Ka[2]=p;w=Ka[3];Ka[3]=q;z=J[0];J[0]=0;W=J[1];J[1]=0;h=J[2];J[2]=0;H=J[3];J[3]=0;la=N.blend_enable;N.blend_enable=!0;F=ia[0];ia[0]=32774;A=ia[1];ia[1]=32774;u=ab[0];ab[0]=770;E=ab[1];
ab[1]=771;na=ab[2];ab[2]=773;ua=ab[3];ab[3]=1;K=N.depth_enable;N.depth_enable=!1;O=a.viewport;T=O.x|0;S=O.y|0;X="width"in O?O.width|0:C.framebufferWidth-T;U="height"in O?O.height|0:C.framebufferHeight-S;da=Ta[0];Ta[0]=T;ga=Ta[1];Ta[1]=S;Z=Ta[2];Ta[2]=X;ka=Ta[3];Ta[3]=U;ma=N.scissor_enable;N.scissor_enable=!0;ra=N.stencil_enable;N.stencil_enable=!1;if(za=b.profile)sa=performance.now(),k.count++;wa=f.call(this,C,a,e);Gb=null;Gb=(Qa=fa(wa))?B.createStream(wa):B.getElements(wa);Vd=l.elements;l.elements=
Gb;Jd=l.offset;l.offset=0;Oe=Gb?Gb.vertCount:-1;Ye=l.count;l.count=Oe;Pe=l.primitive;l.primitive=4;Gd=a.fill;ye=I[14];I[14]=Gd;oe=a.id;pe=I[31];I[31]=oe;ce=a.opacity;Pd=I[10];I[10]=ce;wd=C.pixelRatio;od=I[34];I[34]=wd;Cd=a.scale;fd=I[6];I[6]=Cd;zd=a.scaleFract;Wc=I[7];I[7]=zd;Id=a.translate;ud=I[8];I[8]=Id;rd=a.translateFract;Xc=I[9];I[9]=rd;eb=d.call(this,C,a,e);jd=I[3];I[3]=eb;ea.buffer=a.positionBuffer;Rb=!1;vc=null;fb=0;gd=!1;qc=kc=0;yd=1;pd=0;Lc=5126;ic=hd=Zc=jc=0;fa(ea)?(Rb=!0,vc=aa.createStream(34962,
ea),Lc=vc.dtype):(vc=aa.getBuffer(ea))?Lc=vc.dtype:"constant"in ea?(yd=2,"number"===typeof ea.constant?(Zc=ea.constant,hd=ic=jc=0):(Zc=0<ea.constant.length?ea.constant[0]:0,hd=1<ea.constant.length?ea.constant[1]:0,ic=2<ea.constant.length?ea.constant[2]:0,jc=3<ea.constant.length?ea.constant[3]:0)):(vc=fa(ea.buffer)?aa.createStream(34962,ea.buffer):aa.getBuffer(ea.buffer),Lc="type"in ea?Na[ea.type]:vc.dtype,gd=!!ea.normalized,qc=ea.size|0,kc=ea.offset|0,pd=ea.stride|0,fb=ea.divisor|0);Rc=D.buffer;D.buffer=
vc;Xb=D.divisor;D.divisor=fb;Ra=D.normalized;D.normalized=gd;Ad=D.offset;D.offset=kc;lc=D.size;D.size=qc;rb=D.state;D.state=yd;Hb=D.stride;D.stride=pd;cb=D.type;D.type=Lc;$b=D.w;D.w=jc;Sb=D.x;D.x=Zc;kd=D.y;D.y=hd;cc=D.z;D.z=ic;pa.buffer=a.positionFractBuffer;Tb=!1;Mc=null;Ub=0;Pa=!1;Ib=Fb=0;ib=1;Sa=0;pc=5126;mc=db=Dc=ac=0;fa(pa)?(Tb=!0,Mc=aa.createStream(34962,pa),pc=Mc.dtype):(Mc=aa.getBuffer(pa))?pc=Mc.dtype:"constant"in pa?(ib=2,"number"===typeof pa.constant?(Dc=pa.constant,db=mc=ac=0):(Dc=0<pa.constant.length?
pa.constant[0]:0,db=1<pa.constant.length?pa.constant[1]:0,mc=2<pa.constant.length?pa.constant[2]:0,ac=3<pa.constant.length?pa.constant[3]:0)):(Mc=fa(pa.buffer)?aa.createStream(34962,pa.buffer):aa.getBuffer(pa.buffer),pc="type"in pa?Na[pa.type]:Mc.dtype,Pa=!!pa.normalized,Ib=pa.size|0,Fb=pa.offset|0,Sa=pa.stride|0,Ub=pa.divisor|0);Hc=n.buffer;n.buffer=Mc;oc=n.divisor;n.divisor=Ub;kb=n.normalized;n.normalized=Pa;lb=n.offset;n.offset=Fb;va=n.size;n.size=Ib;nb=n.state;n.state=ib;ya=n.stride;n.stride=
Sa;Wa=n.type;n.type=pc;bb=n.w;n.w=ac;Ia=n.x;n.x=Dc;gb=n.y;n.y=db;Oa=n.z;n.z=mc;xb=ba.vert;ba.vert=42;vb=ba.frag;ba.frag=41;b.dirty=!0;c(C,a,e);C.viewportWidth=x;C.viewportHeight=t;Ka[0]=y;Ka[1]=v;Ka[2]=L;Ka[3]=w;J[0]=z;J[1]=W;J[2]=h;J[3]=H;N.blend_enable=la;ia[0]=F;ia[1]=A;ab[0]=u;ab[1]=E;ab[2]=na;ab[3]=ua;N.depth_enable=K;Ta[0]=da;Ta[1]=ga;Ta[2]=Z;Ta[3]=ka;N.scissor_enable=ma;N.stencil_enable=ra;za&&(k.cpuTime+=performance.now()-sa);Qa&&B.destroyStream(Gb);l.elements=Vd;l.offset=Jd;l.count=Ye;l.primitive=
Pe;I[14]=ye;I[31]=pe;I[10]=Pd;I[34]=od;I[6]=fd;I[7]=Wc;I[8]=ud;I[9]=Xc;I[3]=jd;Rb&&aa.destroyStream(vc);D.buffer=Rc;D.divisor=Xb;D.normalized=Ra;D.offset=Ad;D.size=lc;D.state=rb;D.stride=Hb;D.type=cb;D.w=$b;D.x=Sb;D.y=kd;D.z=cc;Tb&&aa.destroyStream(Mc);n.buffer=Hc;n.divisor=oc;n.normalized=kb;n.offset=lb;n.size=va;n.state=nb;n.stride=ya;n.type=Wa;n.w=bb;n.x=Ia;n.y=gb;n.z=Oa;ba.vert=xb;ba.frag=vb;b.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,h,u,A,aa,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa,Xa,Cb,yb,Jc,Eb){var V,R,ha,Aa,zb,Ac,Kc,P,G,oa,Ha,Y,ca,ta,Q,M,ja,Ja,Ea,La,K,sc,Zb,qa,Jb,ub,Ae,be,ee,ke,we,ue,Fd,ie,ve,Od,Xd,Vd,Jd;V=a.attributes;R=a.buffer;ha=a.context;Aa=a.current;zb=a.draw;Ac=a.elements;Kc=a.extensions;P=a.framebuffer;G=a.gl;oa=a.isBufferArgs;Ha=a.next;Y=a.shader;ca=a.uniforms;ta=a.vao;Q=Ha.blend_color;M=Aa.blend_color;ja=Ha.blend_equation;
Ja=Aa.blend_equation;Ea=Ha.blend_func;La=Aa.blend_func;K=Ha.colorMask;sc=Aa.colorMask;Zb=Ha.depth_range;qa=Aa.depth_range;Jb=Ha.polygonOffset_offset;ub=Aa.polygonOffset_offset;Ae=Ha.sample_coverage;be=Aa.sample_coverage;ee=Ha.scissor_box;ke=Aa.scissor_box;we=Ha.stencil_func;ue=Aa.stencil_func;Fd=Ha.stencil_opBack;ie=Aa.stencil_opBack;ve=Ha.stencil_opFront;Od=Aa.stencil_opFront;Xd=Ha.viewport;Vd=Aa.viewport;Jd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(b,a){var l,c,e,d,r,g;l=P.next;l!==P.cur&&(l?G.bindFramebuffer(36160,l.framebuffer):G.bindFramebuffer(36160,null),P.cur=l);if(Aa.dirty){var f,m,p,q,n,x,B,y,v,t,J,L,w,D,z,h,W,N,H,F,A,C,I,u,fa,na,ba,aa,Q,Y,ca,Ea,Hb,cb;f=Ha.dither;f!==Aa.dither&&(f?G.enable(3024):G.disable(3024),Aa.dither=f);m=ja[0];p=ja[1];if(m!==Ja[0]||p!==Ja[1])G.blendEquationSeparate(m,p),Ja[0]=m,Ja[1]=p;q=Ha.depth_func;q!==Aa.depth_func&&(G.depthFunc(q),Aa.depth_func=q);n=Zb[0];x=Zb[1];if(n!==qa[0]||x!==qa[1])G.depthRange(n,
x),qa[0]=n,qa[1]=x;B=Ha.depth_mask;B!==Aa.depth_mask&&(G.depthMask(B),Aa.depth_mask=B);y=K[0];v=K[1];t=K[2];J=K[3];if(y!==sc[0]||v!==sc[1]||t!==sc[2]||J!==sc[3])G.colorMask(y,v,t,J),sc[0]=y,sc[1]=v,sc[2]=t,sc[3]=J;L=Ha.cull_enable;L!==Aa.cull_enable&&(L?G.enable(2884):G.disable(2884),Aa.cull_enable=L);w=Ha.cull_face;w!==Aa.cull_face&&(G.cullFace(w),Aa.cull_face=w);D=Ha.frontFace;D!==Aa.frontFace&&(G.frontFace(D),Aa.frontFace=D);z=Ha.lineWidth;z!==Aa.lineWidth&&(G.lineWidth(z),Aa.lineWidth=z);h=Ha.polygonOffset_enable;
h!==Aa.polygonOffset_enable&&(h?G.enable(32823):G.disable(32823),Aa.polygonOffset_enable=h);W=Jb[0];N=Jb[1];if(W!==ub[0]||N!==ub[1])G.polygonOffset(W,N),ub[0]=W,ub[1]=N;H=Ha.sample_alpha;H!==Aa.sample_alpha&&(H?G.enable(32926):G.disable(32926),Aa.sample_alpha=H);F=Ha.sample_enable;F!==Aa.sample_enable&&(F?G.enable(32928):G.disable(32928),Aa.sample_enable=F);A=Ae[0];C=Ae[1];if(A!==be[0]||C!==be[1])G.sampleCoverage(A,C),be[0]=A,be[1]=C;I=Ha.stencil_mask;I!==Aa.stencil_mask&&(G.stencilMask(I),Aa.stencil_mask=
I);u=we[0];fa=we[1];na=we[2];if(u!==ue[0]||fa!==ue[1]||na!==ue[2])G.stencilFunc(u,fa,na),ue[0]=u,ue[1]=fa,ue[2]=na;ba=ve[0];aa=ve[1];Q=ve[2];Y=ve[3];if(ba!==Od[0]||aa!==Od[1]||Q!==Od[2]||Y!==Od[3])G.stencilOpSeparate(ba,aa,Q,Y),Od[0]=ba,Od[1]=aa,Od[2]=Q,Od[3]=Y;ca=Fd[0];Ea=Fd[1];Hb=Fd[2];cb=Fd[3];if(ca!==ie[0]||Ea!==ie[1]||Hb!==ie[2]||cb!==ie[3])G.stencilOpSeparate(ca,Ea,Hb,cb),ie[0]=ca,ie[1]=Ea,ie[2]=Hb,ie[3]=cb}G.blendColor(0,0,0,1);M[0]=0;M[1]=0;M[2]=0;M[3]=1;G.enable(3042);Aa.blend_enable=!0;
G.blendFuncSeparate(770,771,773,1);La[0]=770;La[1]=771;La[2]=773;La[3]=1;G.disable(2929);Aa.depth_enable=!1;G.enable(3089);Aa.scissor_enable=!0;G.disable(2960);Aa.stencil_enable=!1;if(c=Aa.profile)e=performance.now(),k.count+=a;G.useProgram(la.program);d=Kc.angle_instanced_arrays;var $b;ta.setVAO(null);G.uniform1i(E.location,!1);G.uniform1i(Qa.location,ra.bind());$b=zb.instances;for(r=0;r<a;++r){g=b[r];var Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,
wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,Xd,Bd,Qe,Ke,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,ee,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf,Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Ne,Ce,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,vf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,
dg,Sf,Tf;Sb=g.viewport;kd=Sb.x|0;cc=Sb.y|0;Tb="width"in Sb?Sb.width|0:ha.framebufferWidth-kd;Mc="height"in Sb?Sb.height|0:ha.framebufferHeight-cc;Ub=ha.viewportWidth;ha.viewportWidth=Tb;Pa=ha.viewportHeight;ha.viewportHeight=Mc;G.viewport(kd,cc,Tb,Mc);Vd[0]=kd;Vd[1]=cc;Vd[2]=Tb;Vd[3]=Mc;Fb=g.viewport;Ib=Fb.x|0;ib=Fb.y|0;Sa="width"in Fb?Fb.width|0:ha.framebufferWidth-Ib;pc="height"in Fb?Fb.height|0:ha.framebufferHeight-ib;G.scissor(Ib,ib,Sa,pc);ke[0]=Ib;ke[1]=ib;ke[2]=Sa;ke[3]=pc;ac=ia.call(this,ha,
g,r);Dc=!1;db=null;mc=0;Hc=!1;kb=oc=0;lb=1;va=0;nb=5126;Ia=bb=Wa=ya=0;oa(ac)?(Dc=!0,db=R.createStream(34962,ac),nb=db.dtype):(db=R.getBuffer(ac))?nb=db.dtype:"constant"in ac?(lb=2,"number"===typeof ac.constant?(Wa=ac.constant,bb=Ia=ya=0):(Wa=0<ac.constant.length?ac.constant[0]:0,bb=1<ac.constant.length?ac.constant[1]:0,Ia=2<ac.constant.length?ac.constant[2]:0,ya=3<ac.constant.length?ac.constant[3]:0)):(db=oa(ac.buffer)?R.createStream(34962,ac.buffer):R.getBuffer(ac.buffer),nb="type"in ac?Jd[ac.type]:
db.dtype,Hc=!!ac.normalized,kb=ac.size|0,oc=ac.offset|0,va=ac.stride|0,mc=ac.divisor|0);gb=Cb.location;Oa=V[gb];if(1===lb){Oa.buffer||G.enableVertexAttribArray(gb);xb=kb||1;if(Oa.type!==nb||Oa.size!==xb||Oa.buffer!==db||Oa.normalized!==Hc||Oa.offset!==oc||Oa.stride!==va)G.bindBuffer(34962,db.buffer),G.vertexAttribPointer(gb,xb,nb,Hc,va,oc),Oa.type=nb,Oa.size=xb,Oa.buffer=db,Oa.normalized=Hc,Oa.offset=oc,Oa.stride=va;Oa.divisor!==mc&&(d.vertexAttribDivisorANGLE(gb,mc),Oa.divisor=mc)}else if(Oa.buffer&&
(G.disableVertexAttribArray(gb),Oa.buffer=null),Oa.x!==Wa||Oa.y!==bb||Oa.z!==Ia||Oa.w!==ya)G.vertexAttrib4f(gb,Wa,bb,Ia,ya),Oa.x=Wa,Oa.y=bb,Oa.z=Ia,Oa.w=ya;vb=ua.call(this,ha,g,r);Ua=!1;wc=null;Kb=0;Lb=!1;Ca=Vb=0;xd=1;Ma=0;Ob=5126;ec=xa=jb=hb=0;oa(vb)?(Ua=!0,wc=R.createStream(34962,vb),Ob=wc.dtype):(wc=R.getBuffer(vb))?Ob=wc.dtype:"constant"in vb?(xd=2,"number"===typeof vb.constant?(jb=vb.constant,xa=ec=hb=0):(jb=0<vb.constant.length?vb.constant[0]:0,xa=1<vb.constant.length?vb.constant[1]:0,ec=2<
vb.constant.length?vb.constant[2]:0,hb=3<vb.constant.length?vb.constant[3]:0)):(wc=oa(vb.buffer)?R.createStream(34962,vb.buffer):R.getBuffer(vb.buffer),Ob="type"in vb?Jd[vb.type]:wc.dtype,Lb=!!vb.normalized,Ca=vb.size|0,Vb=vb.offset|0,Ma=vb.stride|0,Kb=vb.divisor|0);Da=Jc.location;ob=V[Da];if(1===xd){ob.buffer||G.enableVertexAttribArray(Da);pb=Ca||1;if(ob.type!==Ob||ob.size!==pb||ob.buffer!==wc||ob.normalized!==Lb||ob.offset!==Vb||ob.stride!==Ma)G.bindBuffer(34962,wc.buffer),G.vertexAttribPointer(Da,
pb,Ob,Lb,Ma,Vb),ob.type=Ob,ob.size=pb,ob.buffer=wc,ob.normalized=Lb,ob.offset=Vb,ob.stride=Ma;ob.divisor!==Kb&&(d.vertexAttribDivisorANGLE(Da,Kb),ob.divisor=Kb)}else if(ob.buffer&&(G.disableVertexAttribArray(Da),ob.buffer=null),ob.x!==jb||ob.y!==xa||ob.z!==ec||ob.w!==hb)G.vertexAttrib4f(Da,jb,xa,ec,hb),ob.x=jb,ob.y=xa,ob.z=ec,ob.w=hb;Za=ab.call(this,ha,g,r);$a=!1;nc=null;xc=0;tc=!1;Mb=Ya=0;Ec=1;Fa=0;yc=5126;sb=mb=Ba=Va=0;oa(Za)?($a=!0,nc=R.createStream(34962,Za),yc=nc.dtype):(nc=R.getBuffer(Za))?
yc=nc.dtype:"constant"in Za?(Ec=2,"number"===typeof Za.constant?(Ba=Za.constant,mb=sb=Va=0):(Ba=0<Za.constant.length?Za.constant[0]:0,mb=1<Za.constant.length?Za.constant[1]:0,sb=2<Za.constant.length?Za.constant[2]:0,Va=3<Za.constant.length?Za.constant[3]:0)):(nc=oa(Za.buffer)?R.createStream(34962,Za.buffer):R.getBuffer(Za.buffer),yc="type"in Za?Jd[Za.type]:nc.dtype,tc=!!Za.normalized,Mb=Za.size|0,Ya=Za.offset|0,Fa=Za.stride|0,xc=Za.divisor|0);Ab=yb.location;qb=V[Ab];if(1===Ec){qb.buffer||G.enableVertexAttribArray(Ab);
uc=Mb||1;if(qb.type!==yc||qb.size!==uc||qb.buffer!==nc||qb.normalized!==tc||qb.offset!==Ya||qb.stride!==Fa)G.bindBuffer(34962,nc.buffer),G.vertexAttribPointer(Ab,uc,yc,tc,Fa,Ya),qb.type=yc,qb.size=uc,qb.buffer=nc,qb.normalized=tc,qb.offset=Ya,qb.stride=Fa;qb.divisor!==xc&&(d.vertexAttribDivisorANGLE(Ab,xc),qb.divisor=xc)}else if(qb.buffer&&(G.disableVertexAttribArray(Ab),qb.buffer=null),qb.x!==Ba||qb.y!==mb||qb.z!==sb||qb.w!==Va)G.vertexAttrib4f(Ab,Ba,mb,sb,Va),qb.x=Ba,qb.y=mb,qb.z=sb,qb.w=Va;tb=
ma.call(this,ha,g,r);Sc=!1;rc=null;sd=0;Nc=!1;dd=cd=0;Yb=1;dc=0;Pb=5126;Bb=wb=bc=Ga=0;oa(tb)?(Sc=!0,rc=R.createStream(34962,tb),Pb=rc.dtype):(rc=R.getBuffer(tb))?Pb=rc.dtype:"constant"in tb?(Yb=2,"number"===typeof tb.constant?(bc=tb.constant,wb=Bb=Ga=0):(bc=0<tb.constant.length?tb.constant[0]:0,wb=1<tb.constant.length?tb.constant[1]:0,Bb=2<tb.constant.length?tb.constant[2]:0,Ga=3<tb.constant.length?tb.constant[3]:0)):(rc=oa(tb.buffer)?R.createStream(34962,tb.buffer):R.getBuffer(tb.buffer),Pb="type"in
tb?Jd[tb.type]:rc.dtype,Nc=!!tb.normalized,dd=tb.size|0,cd=tb.offset|0,dc=tb.stride|0,sd=tb.divisor|0);Nb=Eb.location;Qb=V[Nb];if(1===Yb){Qb.buffer||G.enableVertexAttribArray(Nb);fc=dd||1;if(Qb.type!==Pb||Qb.size!==fc||Qb.buffer!==rc||Qb.normalized!==Nc||Qb.offset!==cd||Qb.stride!==dc)G.bindBuffer(34962,rc.buffer),G.vertexAttribPointer(Nb,fc,Pb,Nc,dc,cd),Qb.type=Pb,Qb.size=fc,Qb.buffer=rc,Qb.normalized=Nc,Qb.offset=cd,Qb.stride=dc;Qb.divisor!==sd&&(d.vertexAttribDivisorANGLE(Nb,sd),Qb.divisor=sd)}else if(Qb.buffer&&
(G.disableVertexAttribArray(Nb),Qb.buffer=null),Qb.x!==bc||Qb.y!==wb||Qb.z!==Bb||Qb.w!==Ga)G.vertexAttrib4f(Nb,bc,wb,Bb,Ga),Qb.x=bc,Qb.y=wb,Qb.z=Bb,Qb.w=Ga;hc=za.call(this,ha,g,r);Tc=!1;Bc=null;Cc=0;Fc=!1;ed=Oc=0;Uc=1;Pc=0;Wb=5126;Vc=Ic=Qc=Db=0;oa(hc)?(Tc=!0,Bc=R.createStream(34962,hc),Wb=Bc.dtype):(Bc=R.getBuffer(hc))?Wb=Bc.dtype:"constant"in hc?(Uc=2,"number"===typeof hc.constant?(Qc=hc.constant,Ic=Vc=Db=0):(Qc=0<hc.constant.length?hc.constant[0]:0,Ic=1<hc.constant.length?hc.constant[1]:0,Vc=2<
hc.constant.length?hc.constant[2]:0,Db=3<hc.constant.length?hc.constant[3]:0)):(Bc=oa(hc.buffer)?R.createStream(34962,hc.buffer):R.getBuffer(hc.buffer),Wb="type"in hc?Jd[hc.type]:Bc.dtype,Fc=!!hc.normalized,ed=hc.size|0,Oc=hc.offset|0,Pc=hc.stride|0,Cc=hc.divisor|0);gc=ea.location;$c=V[gc];if(1===Uc){$c.buffer||G.enableVertexAttribArray(gc);id=ed||1;if($c.type!==Wb||$c.size!==id||$c.buffer!==Bc||$c.normalized!==Fc||$c.offset!==Oc||$c.stride!==Pc)G.bindBuffer(34962,Bc.buffer),G.vertexAttribPointer(gc,
id,Wb,Fc,Pc,Oc),$c.type=Wb,$c.size=id,$c.buffer=Bc,$c.normalized=Fc,$c.offset=Oc,$c.stride=Pc;$c.divisor!==Cc&&(d.vertexAttribDivisorANGLE(gc,Cc),$c.divisor=Cc)}else if($c.buffer&&(G.disableVertexAttribArray(gc),$c.buffer=null),$c.x!==Qc||$c.y!==Ic||$c.z!==Vc||$c.w!==Db)G.vertexAttrib4f(gc,Qc,Ic,Vc,Db),$c.x=Qc,$c.y=Ic,$c.z=Vc,$c.w=Db;qd=da.call(this,ha,g,r);vd=!1;ad=null;Xd=0;Bd=!1;Ke=Qe=0;le=1;Md=0;Kd=5126;md=td=Gc=ld=0;oa(qd)?(vd=!0,ad=R.createStream(34962,qd),Kd=ad.dtype):(ad=R.getBuffer(qd))?
Kd=ad.dtype:"constant"in qd?(le=2,"number"===typeof qd.constant?(Gc=qd.constant,td=md=ld=0):(Gc=0<qd.constant.length?qd.constant[0]:0,td=1<qd.constant.length?qd.constant[1]:0,md=2<qd.constant.length?qd.constant[2]:0,ld=3<qd.constant.length?qd.constant[3]:0)):(ad=oa(qd.buffer)?R.createStream(34962,qd.buffer):R.getBuffer(qd.buffer),Kd="type"in qd?Jd[qd.type]:ad.dtype,Bd=!!qd.normalized,Ke=qd.size|0,Qe=qd.offset|0,Md=qd.stride|0,Xd=qd.divisor|0);bd=Ta.location;nd=V[bd];if(1===le){nd.buffer||G.enableVertexAttribArray(bd);
Dd=Ke||1;if(nd.type!==Kd||nd.size!==Dd||nd.buffer!==ad||nd.normalized!==Bd||nd.offset!==Qe||nd.stride!==Md)G.bindBuffer(34962,ad.buffer),G.vertexAttribPointer(bd,Dd,Kd,Bd,Md,Qe),nd.type=Kd,nd.size=Dd,nd.buffer=ad,nd.normalized=Bd,nd.offset=Qe,nd.stride=Md;nd.divisor!==Xd&&(d.vertexAttribDivisorANGLE(bd,Xd),nd.divisor=Xd)}else if(nd.buffer&&(G.disableVertexAttribArray(bd),nd.buffer=null),nd.x!==Gc||nd.y!==td||nd.z!==md||nd.w!==ld)G.vertexAttrib4f(bd,Gc,td,md,ld),nd.x=Gc,nd.y=td,nd.z=md,nd.w=ld;Ed=
ga.call(this,ha,g,r);te=!1;xe=null;ee=0;me=!1;de=fe=0;qe=1;$d=0;ge=5126;je=re=Yc=zc=0;oa(Ed)?(te=!0,xe=R.createStream(34962,Ed),ge=xe.dtype):(xe=R.getBuffer(Ed))?ge=xe.dtype:"constant"in Ed?(qe=2,"number"===typeof Ed.constant?(Yc=Ed.constant,re=je=zc=0):(Yc=0<Ed.constant.length?Ed.constant[0]:0,re=1<Ed.constant.length?Ed.constant[1]:0,je=2<Ed.constant.length?Ed.constant[2]:0,zc=3<Ed.constant.length?Ed.constant[3]:0)):(xe=oa(Ed.buffer)?R.createStream(34962,Ed.buffer):R.getBuffer(Ed.buffer),ge="type"in
Ed?Jd[Ed.type]:xe.dtype,me=!!Ed.normalized,de=Ed.size|0,fe=Ed.offset|0,$d=Ed.stride|0,ee=Ed.divisor|0);Ld=X.location;Qd=V[Ld];if(1===qe){Qd.buffer||G.enableVertexAttribArray(Ld);Rd=de||4;if(Qd.type!==ge||Qd.size!==Rd||Qd.buffer!==xe||Qd.normalized!==me||Qd.offset!==fe||Qd.stride!==$d)G.bindBuffer(34962,xe.buffer),G.vertexAttribPointer(Ld,Rd,ge,me,$d,fe),Qd.type=ge,Qd.size=Rd,Qd.buffer=xe,Qd.normalized=me,Qd.offset=fe,Qd.stride=$d;Qd.divisor!==ee&&(d.vertexAttribDivisorANGLE(Ld,ee),Qd.divisor=ee)}else if(Qd.buffer&&
(G.disableVertexAttribArray(Ld),Qd.buffer=null),Qd.x!==Yc||Qd.y!==re||Qd.z!==je||Qd.w!==zc)G.vertexAttrib4f(Ld,Yc,re,je,zc),Qd.x=Yc,Qd.y=re,Qd.z=je,Qd.w=zc;Sd=O.call(this,ha,g,r);he=!1;Re=null;ze=0;ne=!1;Se=bf=0;Le=1;se=0;De=5126;Ee=He=Ge=Fe=0;oa(Sd)?(he=!0,Re=R.createStream(34962,Sd),De=Re.dtype):(Re=R.getBuffer(Sd))?De=Re.dtype:"constant"in Sd?(Le=2,"number"===typeof Sd.constant?(Ge=Sd.constant,He=Ee=Fe=0):(Ge=0<Sd.constant.length?Sd.constant[0]:0,He=1<Sd.constant.length?Sd.constant[1]:0,Ee=2<Sd.constant.length?
Sd.constant[2]:0,Fe=3<Sd.constant.length?Sd.constant[3]:0)):(Re=oa(Sd.buffer)?R.createStream(34962,Sd.buffer):R.getBuffer(Sd.buffer),De="type"in Sd?Jd[Sd.type]:Re.dtype,ne=!!Sd.normalized,Se=Sd.size|0,bf=Sd.offset|0,se=Sd.stride|0,ze=Sd.divisor|0);Nd=Gb.location;Wd=V[Nd];if(1===Le){Wd.buffer||G.enableVertexAttribArray(Nd);Zd=Se||4;if(Wd.type!==De||Wd.size!==Zd||Wd.buffer!==Re||Wd.normalized!==ne||Wd.offset!==bf||Wd.stride!==se)G.bindBuffer(34962,Re.buffer),G.vertexAttribPointer(Nd,Zd,De,ne,se,bf),
Wd.type=De,Wd.size=Zd,Wd.buffer=Re,Wd.normalized=ne,Wd.offset=bf,Wd.stride=se;Wd.divisor!==ze&&(d.vertexAttribDivisorANGLE(Nd,ze),Wd.divisor=ze)}else if(Wd.buffer&&(G.disableVertexAttribArray(Nd),Wd.buffer=null),Wd.x!==Ge||Wd.y!==He||Wd.z!==Ee||Wd.w!==Fe)G.vertexAttrib4f(Nd,Ge,He,Ee,Fe),Wd.x=Ge,Wd.y=He,Wd.z=Ee,Wd.w=Fe;ae=T.call(this,ha,g,r);Ie=!1;Hd=null;Td=0;Be=!1;cf=Je=0;af=1;Te=0;Me=5126;Ve=Ue=Xe=$e=0;oa(ae)?(Ie=!0,Hd=R.createStream(34962,ae),Me=Hd.dtype):(Hd=R.getBuffer(ae))?Me=Hd.dtype:"constant"in
ae?(af=2,"number"===typeof ae.constant?(Xe=ae.constant,Ue=Ve=$e=0):(Xe=0<ae.constant.length?ae.constant[0]:0,Ue=1<ae.constant.length?ae.constant[1]:0,Ve=2<ae.constant.length?ae.constant[2]:0,$e=3<ae.constant.length?ae.constant[3]:0)):(Hd=oa(ae.buffer)?R.createStream(34962,ae.buffer):R.getBuffer(ae.buffer),Me="type"in ae?Jd[ae.type]:Hd.dtype,Be=!!ae.normalized,cf=ae.size|0,Je=ae.offset|0,Te=ae.stride|0,Td=ae.divisor|0);Ud=ka.location;Yd=V[Ud];if(1===af){Yd.buffer||G.enableVertexAttribArray(Ud);We=
cf||1;if(Yd.type!==Me||Yd.size!==We||Yd.buffer!==Hd||Yd.normalized!==Be||Yd.offset!==Je||Yd.stride!==Te)G.bindBuffer(34962,Hd.buffer),G.vertexAttribPointer(Ud,We,Me,Be,Te,Je),Yd.type=Me,Yd.size=We,Yd.buffer=Hd,Yd.normalized=Be,Yd.offset=Je,Yd.stride=Te;Yd.divisor!==Td&&(d.vertexAttribDivisorANGLE(Ud,Td),Yd.divisor=Td)}else if(Yd.buffer&&(G.disableVertexAttribArray(Ud),Yd.buffer=null),Yd.x!==Xe||Yd.y!==Ue||Yd.z!==Ve||Yd.w!==$e)G.vertexAttrib4f(Ud,Xe,Ue,Ve,$e),Yd.x=Xe,Yd.y=Ue,Yd.z=Ve,Yd.w=$e;jf=ha.pixelRatio;
r&&nf===jf||(nf=jf,G.uniform1f(Ka.location,jf));ff=g.scale;kf=ff[0];mf=ff[1];r&&lf===kf&&rf===mf||(lf=kf,rf=mf,G.uniform2f(U.location,kf,mf));of=g.scaleFract;sf=of[0];Df=of[1];r&&Cf===sf&&Ne===Df||(Cf=sf,Ne=Df,G.uniform2f(Na.location,sf,Df));Ce=g.translate;pf=Ce[0];Ef=Ce[1];r&&qf===pf&&Hf===Ef||(qf=pf,Hf=Ef,G.uniform2f(pa.location,pf,Ef));Bf=g.translateFract;Ff=Bf[0];xf=Bf[1];r&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,G.uniform2f(Xa.location,Ff,xf));vf=S.call(this,ha,g,r);zf=vf[0];Jf=vf[1];r&&Af===zf&&Kf===
Jf||(Af=zf,Kf=Jf,G.uniform2f(wa.location,zf,Jf));Lf=g.opacity;r&&Mf===Lf||(Mf=Lf,G.uniform1f(sa.location,Lf));(tf=g.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;G.uniform1i(Z.location,Rf.bind());If=g.elements;uf=null;(uf=(dg=oa(If))?Ac.createStream(If):Ac.getElements(If))&&G.bindBuffer(34963,uf.buffer.buffer);Sf=g.offset;if(Tf=g.count)0<$b?uf?d.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),$b):d.drawArraysInstancedANGLE(0,Sf,Tf,$b):0>$b&&(uf?G.drawElements(0,
Tf,uf.type,Sf<<(uf.type-5121>>1)):G.drawArrays(0,Sf,Tf)),ha.viewportWidth=Ub,ha.viewportHeight=Pa,Dc&&R.destroyStream(db),Ua&&R.destroyStream(wc),$a&&R.destroyStream(nc),Sc&&R.destroyStream(rc),Tc&&R.destroyStream(Bc),vd&&R.destroyStream(ad),te&&R.destroyStream(xe),he&&R.destroyStream(Re),Ie&&R.destroyStream(Hd),Rf.unbind(),dg&&Ac.destroyStream(uf)}ra.unbind();Aa.dirty=!0;ta.setVAO(null);c&&(k.cpuTime+=performance.now()-e)},draw:function(b){var a,l,r,m,x,B,y,t,J,L,h,W,N,H,la,F,A,C,I,ia,u,fa,na,ba,
aa,ua,O,Q,T,S,Y,ca,da,ga,ab,ma,ra,za,Ea,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,Xd,Bd,Qe,ee,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf,Se,Le,se;a=P.next;a!==P.cur&&(a?G.bindFramebuffer(36160,
a.framebuffer):G.bindFramebuffer(36160,null),P.cur=a);if(Aa.dirty){var De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf,rf,of,sf;De=Ha.dither;De!==Aa.dither&&(De?G.enable(3024):G.disable(3024),Aa.dither=De);Fe=ja[0];Ge=ja[1];if(Fe!==Ja[0]||Ge!==Ja[1])G.blendEquationSeparate(Fe,Ge),Ja[0]=Fe,Ja[1]=Ge;He=Ha.depth_func;He!==Aa.depth_func&&(G.depthFunc(He),Aa.depth_func=He);Ee=Zb[0];Nd=Zb[1];if(Ee!==qa[0]||Nd!==qa[1])G.depthRange(Ee,Nd),qa[0]=Ee,qa[1]=Nd;Wd=
Ha.depth_mask;Wd!==Aa.depth_mask&&(G.depthMask(Wd),Aa.depth_mask=Wd);Zd=K[0];ae=K[1];Ie=K[2];Hd=K[3];if(Zd!==sc[0]||ae!==sc[1]||Ie!==sc[2]||Hd!==sc[3])G.colorMask(Zd,ae,Ie,Hd),sc[0]=Zd,sc[1]=ae,sc[2]=Ie,sc[3]=Hd;Td=Ha.cull_enable;Td!==Aa.cull_enable&&(Td?G.enable(2884):G.disable(2884),Aa.cull_enable=Td);Be=Ha.cull_face;Be!==Aa.cull_face&&(G.cullFace(Be),Aa.cull_face=Be);Je=Ha.frontFace;Je!==Aa.frontFace&&(G.frontFace(Je),Aa.frontFace=Je);cf=Ha.lineWidth;cf!==Aa.lineWidth&&(G.lineWidth(cf),Aa.lineWidth=
cf);af=Ha.polygonOffset_enable;af!==Aa.polygonOffset_enable&&(af?G.enable(32823):G.disable(32823),Aa.polygonOffset_enable=af);Te=Jb[0];Me=Jb[1];if(Te!==ub[0]||Me!==ub[1])G.polygonOffset(Te,Me),ub[0]=Te,ub[1]=Me;$e=Ha.sample_alpha;$e!==Aa.sample_alpha&&($e?G.enable(32926):G.disable(32926),Aa.sample_alpha=$e);Xe=Ha.sample_enable;Xe!==Aa.sample_enable&&(Xe?G.enable(32928):G.disable(32928),Aa.sample_enable=Xe);Ue=Ae[0];Ve=Ae[1];if(Ue!==be[0]||Ve!==be[1])G.sampleCoverage(Ue,Ve),be[0]=Ue,be[1]=Ve;Ud=Ha.stencil_mask;
Ud!==Aa.stencil_mask&&(G.stencilMask(Ud),Aa.stencil_mask=Ud);Yd=we[0];We=we[1];jf=we[2];if(Yd!==ue[0]||We!==ue[1]||jf!==ue[2])G.stencilFunc(Yd,We,jf),ue[0]=Yd,ue[1]=We,ue[2]=jf;nf=ve[0];ff=ve[1];kf=ve[2];lf=ve[3];if(nf!==Od[0]||ff!==Od[1]||kf!==Od[2]||lf!==Od[3])G.stencilOpSeparate(nf,ff,kf,lf),Od[0]=nf,Od[1]=ff,Od[2]=kf,Od[3]=lf;mf=Fd[0];rf=Fd[1];of=Fd[2];sf=Fd[3];if(mf!==ie[0]||rf!==ie[1]||of!==ie[2]||sf!==ie[3])G.stencilOpSeparate(mf,rf,of,sf),ie[0]=mf,ie[1]=rf,ie[2]=of,ie[3]=sf}l=b.viewport;r=
l.x|0;m=l.y|0;x="width"in l?l.width|0:ha.framebufferWidth-r;B="height"in l?l.height|0:ha.framebufferHeight-m;y=ha.viewportWidth;ha.viewportWidth=x;t=ha.viewportHeight;ha.viewportHeight=B;G.viewport(r,m,x,B);Vd[0]=r;Vd[1]=m;Vd[2]=x;Vd[3]=B;G.blendColor(0,0,0,1);M[0]=0;M[1]=0;M[2]=0;M[3]=1;G.enable(3042);Aa.blend_enable=!0;G.blendFuncSeparate(770,771,773,1);La[0]=770;La[1]=771;La[2]=773;La[3]=1;G.disable(2929);Aa.depth_enable=!1;J=b.viewport;L=J.x|0;h=J.y|0;W="width"in J?J.width|0:ha.framebufferWidth-
L;N="height"in J?J.height|0:ha.framebufferHeight-h;G.scissor(L,h,W,N);ke[0]=L;ke[1]=h;ke[2]=W;ke[3]=N;G.enable(3089);Aa.scissor_enable=!0;G.disable(2960);Aa.stencil_enable=!1;if(H=Aa.profile)la=performance.now(),k.count++;G.useProgram(g.program);F=Kc.angle_instanced_arrays;ta.setVAO(null);A=q.call(this,ha,b,0);C=!1;I=null;ia=0;u=!1;na=fa=0;ba=1;aa=0;ua=5126;S=T=Q=O=0;oa(A)?(C=!0,I=R.createStream(34962,A),ua=I.dtype):(I=R.getBuffer(A))?ua=I.dtype:"constant"in A?(ba=2,"number"===typeof A.constant?(Q=
A.constant,T=S=O=0):(Q=0<A.constant.length?A.constant[0]:0,T=1<A.constant.length?A.constant[1]:0,S=2<A.constant.length?A.constant[2]:0,O=3<A.constant.length?A.constant[3]:0)):(I=oa(A.buffer)?R.createStream(34962,A.buffer):R.getBuffer(A.buffer),ua="type"in A?Jd[A.type]:I.dtype,u=!!A.normalized,na=A.size|0,fa=A.offset|0,aa=A.stride|0,ia=A.divisor|0);Y=Cb.location;ca=V[Y];if(1===ba){ca.buffer||G.enableVertexAttribArray(Y);da=na||1;if(ca.type!==ua||ca.size!==da||ca.buffer!==I||ca.normalized!==u||ca.offset!==
fa||ca.stride!==aa)G.bindBuffer(34962,I.buffer),G.vertexAttribPointer(Y,da,ua,u,aa,fa),ca.type=ua,ca.size=da,ca.buffer=I,ca.normalized=u,ca.offset=fa,ca.stride=aa;ca.divisor!==ia&&(F.vertexAttribDivisorANGLE(Y,ia),ca.divisor=ia)}else if(ca.buffer&&(G.disableVertexAttribArray(Y),ca.buffer=null),ca.x!==Q||ca.y!==T||ca.z!==S||ca.w!==O)G.vertexAttrib4f(Y,Q,T,S,O),ca.x=Q,ca.y=T,ca.z=S,ca.w=O;ga=f.call(this,ha,b,0);ab=!1;ma=null;ra=0;za=!1;Hb=Ea=0;cb=1;$b=0;Sb=5126;Mc=Tb=cc=kd=0;oa(ga)?(ab=!0,ma=R.createStream(34962,
ga),Sb=ma.dtype):(ma=R.getBuffer(ga))?Sb=ma.dtype:"constant"in ga?(cb=2,"number"===typeof ga.constant?(cc=ga.constant,Tb=Mc=kd=0):(cc=0<ga.constant.length?ga.constant[0]:0,Tb=1<ga.constant.length?ga.constant[1]:0,Mc=2<ga.constant.length?ga.constant[2]:0,kd=3<ga.constant.length?ga.constant[3]:0)):(ma=oa(ga.buffer)?R.createStream(34962,ga.buffer):R.getBuffer(ga.buffer),Sb="type"in ga?Jd[ga.type]:ma.dtype,za=!!ga.normalized,Hb=ga.size|0,Ea=ga.offset|0,$b=ga.stride|0,ra=ga.divisor|0);Ub=Jc.location;Pa=
V[Ub];if(1===cb){Pa.buffer||G.enableVertexAttribArray(Ub);Fb=Hb||1;if(Pa.type!==Sb||Pa.size!==Fb||Pa.buffer!==ma||Pa.normalized!==za||Pa.offset!==Ea||Pa.stride!==$b)G.bindBuffer(34962,ma.buffer),G.vertexAttribPointer(Ub,Fb,Sb,za,$b,Ea),Pa.type=Sb,Pa.size=Fb,Pa.buffer=ma,Pa.normalized=za,Pa.offset=Ea,Pa.stride=$b;Pa.divisor!==ra&&(F.vertexAttribDivisorANGLE(Ub,ra),Pa.divisor=ra)}else if(Pa.buffer&&(G.disableVertexAttribArray(Ub),Pa.buffer=null),Pa.x!==cc||Pa.y!==Tb||Pa.z!==Mc||Pa.w!==kd)G.vertexAttrib4f(Ub,
cc,Tb,Mc,kd),Pa.x=cc,Pa.y=Tb,Pa.z=Mc,Pa.w=kd;Ib=d.call(this,ha,b,0);ib=!1;Sa=null;pc=0;ac=!1;db=Dc=0;mc=1;Hc=0;oc=5126;nb=va=lb=kb=0;oa(Ib)?(ib=!0,Sa=R.createStream(34962,Ib),oc=Sa.dtype):(Sa=R.getBuffer(Ib))?oc=Sa.dtype:"constant"in Ib?(mc=2,"number"===typeof Ib.constant?(lb=Ib.constant,va=nb=kb=0):(lb=0<Ib.constant.length?Ib.constant[0]:0,va=1<Ib.constant.length?Ib.constant[1]:0,nb=2<Ib.constant.length?Ib.constant[2]:0,kb=3<Ib.constant.length?Ib.constant[3]:0)):(Sa=oa(Ib.buffer)?R.createStream(34962,
Ib.buffer):R.getBuffer(Ib.buffer),oc="type"in Ib?Jd[Ib.type]:Sa.dtype,ac=!!Ib.normalized,db=Ib.size|0,Dc=Ib.offset|0,Hc=Ib.stride|0,pc=Ib.divisor|0);ya=yb.location;Wa=V[ya];if(1===mc){Wa.buffer||G.enableVertexAttribArray(ya);bb=db||1;if(Wa.type!==oc||Wa.size!==bb||Wa.buffer!==Sa||Wa.normalized!==ac||Wa.offset!==Dc||Wa.stride!==Hc)G.bindBuffer(34962,Sa.buffer),G.vertexAttribPointer(ya,bb,oc,ac,Hc,Dc),Wa.type=oc,Wa.size=bb,Wa.buffer=Sa,Wa.normalized=ac,Wa.offset=Dc,Wa.stride=Hc;Wa.divisor!==pc&&(F.vertexAttribDivisorANGLE(ya,
pc),Wa.divisor=pc)}else if(Wa.buffer&&(G.disableVertexAttribArray(ya),Wa.buffer=null),Wa.x!==lb||Wa.y!==va||Wa.z!==nb||Wa.w!==kb)G.vertexAttrib4f(ya,lb,va,nb,kb),Wa.x=lb,Wa.y=va,Wa.z=nb,Wa.w=kb;Ia=D.call(this,ha,b,0);gb=!1;Oa=null;xb=0;vb=!1;wc=Ua=0;Kb=1;Lb=0;Vb=5126;Ob=Ma=xd=Ca=0;oa(Ia)?(gb=!0,Oa=R.createStream(34962,Ia),Vb=Oa.dtype):(Oa=R.getBuffer(Ia))?Vb=Oa.dtype:"constant"in Ia?(Kb=2,"number"===typeof Ia.constant?(xd=Ia.constant,Ma=Ob=Ca=0):(xd=0<Ia.constant.length?Ia.constant[0]:0,Ma=1<Ia.constant.length?
Ia.constant[1]:0,Ob=2<Ia.constant.length?Ia.constant[2]:0,Ca=3<Ia.constant.length?Ia.constant[3]:0)):(Oa=oa(Ia.buffer)?R.createStream(34962,Ia.buffer):R.getBuffer(Ia.buffer),Vb="type"in Ia?Jd[Ia.type]:Oa.dtype,vb=!!Ia.normalized,wc=Ia.size|0,Ua=Ia.offset|0,Lb=Ia.stride|0,xb=Ia.divisor|0);hb=Eb.location;jb=V[hb];if(1===Kb){jb.buffer||G.enableVertexAttribArray(hb);xa=wc||1;if(jb.type!==Vb||jb.size!==xa||jb.buffer!==Oa||jb.normalized!==vb||jb.offset!==Ua||jb.stride!==Lb)G.bindBuffer(34962,Oa.buffer),
G.vertexAttribPointer(hb,xa,Vb,vb,Lb,Ua),jb.type=Vb,jb.size=xa,jb.buffer=Oa,jb.normalized=vb,jb.offset=Ua,jb.stride=Lb;jb.divisor!==xb&&(F.vertexAttribDivisorANGLE(hb,xb),jb.divisor=xb)}else if(jb.buffer&&(G.disableVertexAttribArray(hb),jb.buffer=null),jb.x!==xd||jb.y!==Ma||jb.z!==Ob||jb.w!==Ca)G.vertexAttrib4f(hb,xd,Ma,Ob,Ca),jb.x=xd,jb.y=Ma,jb.z=Ob,jb.w=Ca;ec=n.call(this,ha,b,0);Da=!1;ob=null;pb=0;Za=!1;nc=$a=0;xc=1;tc=0;Ya=5126;yc=Fa=Ec=Mb=0;oa(ec)?(Da=!0,ob=R.createStream(34962,ec),Ya=ob.dtype):
(ob=R.getBuffer(ec))?Ya=ob.dtype:"constant"in ec?(xc=2,"number"===typeof ec.constant?(Ec=ec.constant,Fa=yc=Mb=0):(Ec=0<ec.constant.length?ec.constant[0]:0,Fa=1<ec.constant.length?ec.constant[1]:0,yc=2<ec.constant.length?ec.constant[2]:0,Mb=3<ec.constant.length?ec.constant[3]:0)):(ob=oa(ec.buffer)?R.createStream(34962,ec.buffer):R.getBuffer(ec.buffer),Ya="type"in ec?Jd[ec.type]:ob.dtype,Za=!!ec.normalized,nc=ec.size|0,$a=ec.offset|0,tc=ec.stride|0,pb=ec.divisor|0);Va=ea.location;Ba=V[Va];if(1===xc){Ba.buffer||
G.enableVertexAttribArray(Va);mb=nc||1;if(Ba.type!==Ya||Ba.size!==mb||Ba.buffer!==ob||Ba.normalized!==Za||Ba.offset!==$a||Ba.stride!==tc)G.bindBuffer(34962,ob.buffer),G.vertexAttribPointer(Va,mb,Ya,Za,tc,$a),Ba.type=Ya,Ba.size=mb,Ba.buffer=ob,Ba.normalized=Za,Ba.offset=$a,Ba.stride=tc;Ba.divisor!==pb&&(F.vertexAttribDivisorANGLE(Va,pb),Ba.divisor=pb)}else if(Ba.buffer&&(G.disableVertexAttribArray(Va),Ba.buffer=null),Ba.x!==Ec||Ba.y!==Fa||Ba.z!==yc||Ba.w!==Mb)G.vertexAttrib4f(Va,Ec,Fa,yc,Mb),Ba.x=
Ec,Ba.y=Fa,Ba.z=yc,Ba.w=Mb;sb=v.call(this,ha,b,0);Ab=!1;qb=null;uc=0;tb=!1;rc=Sc=0;sd=1;Nc=0;cd=5126;Pb=dc=Yb=dd=0;oa(sb)?(Ab=!0,qb=R.createStream(34962,sb),cd=qb.dtype):(qb=R.getBuffer(sb))?cd=qb.dtype:"constant"in sb?(sd=2,"number"===typeof sb.constant?(Yb=sb.constant,dc=Pb=dd=0):(Yb=0<sb.constant.length?sb.constant[0]:0,dc=1<sb.constant.length?sb.constant[1]:0,Pb=2<sb.constant.length?sb.constant[2]:0,dd=3<sb.constant.length?sb.constant[3]:0)):(qb=oa(sb.buffer)?R.createStream(34962,sb.buffer):R.getBuffer(sb.buffer),
cd="type"in sb?Jd[sb.type]:qb.dtype,tb=!!sb.normalized,rc=sb.size|0,Sc=sb.offset|0,Nc=sb.stride|0,uc=sb.divisor|0);Ga=Ta.location;bc=V[Ga];if(1===sd){bc.buffer||G.enableVertexAttribArray(Ga);wb=rc||1;if(bc.type!==cd||bc.size!==wb||bc.buffer!==qb||bc.normalized!==tb||bc.offset!==Sc||bc.stride!==Nc)G.bindBuffer(34962,qb.buffer),G.vertexAttribPointer(Ga,wb,cd,tb,Nc,Sc),bc.type=cd,bc.size=wb,bc.buffer=qb,bc.normalized=tb,bc.offset=Sc,bc.stride=Nc;bc.divisor!==uc&&(F.vertexAttribDivisorANGLE(Ga,uc),bc.divisor=
uc)}else if(bc.buffer&&(G.disableVertexAttribArray(Ga),bc.buffer=null),bc.x!==Yb||bc.y!==dc||bc.z!==Pb||bc.w!==dd)G.vertexAttrib4f(Ga,Yb,dc,Pb,dd),bc.x=Yb,bc.y=dc,bc.z=Pb,bc.w=dd;Bb=z.call(this,ha,b,0);Nb=!1;Qb=null;fc=0;hc=!1;Bc=Tc=0;Cc=1;Fc=0;Oc=5126;Wb=Pc=Uc=ed=0;oa(Bb)?(Nb=!0,Qb=R.createStream(34962,Bb),Oc=Qb.dtype):(Qb=R.getBuffer(Bb))?Oc=Qb.dtype:"constant"in Bb?(Cc=2,"number"===typeof Bb.constant?(Uc=Bb.constant,Pc=Wb=ed=0):(Uc=0<Bb.constant.length?Bb.constant[0]:0,Pc=1<Bb.constant.length?
Bb.constant[1]:0,Wb=2<Bb.constant.length?Bb.constant[2]:0,ed=3<Bb.constant.length?Bb.constant[3]:0)):(Qb=oa(Bb.buffer)?R.createStream(34962,Bb.buffer):R.getBuffer(Bb.buffer),Oc="type"in Bb?Jd[Bb.type]:Qb.dtype,hc=!!Bb.normalized,Bc=Bb.size|0,Tc=Bb.offset|0,Fc=Bb.stride|0,fc=Bb.divisor|0);Db=X.location;Qc=V[Db];if(1===Cc){Qc.buffer||G.enableVertexAttribArray(Db);Ic=Bc||4;if(Qc.type!==Oc||Qc.size!==Ic||Qc.buffer!==Qb||Qc.normalized!==hc||Qc.offset!==Tc||Qc.stride!==Fc)G.bindBuffer(34962,Qb.buffer),
G.vertexAttribPointer(Db,Ic,Oc,hc,Fc,Tc),Qc.type=Oc,Qc.size=Ic,Qc.buffer=Qb,Qc.normalized=hc,Qc.offset=Tc,Qc.stride=Fc;Qc.divisor!==fc&&(F.vertexAttribDivisorANGLE(Db,fc),Qc.divisor=fc)}else if(Qc.buffer&&(G.disableVertexAttribArray(Db),Qc.buffer=null),Qc.x!==Uc||Qc.y!==Pc||Qc.z!==Wb||Qc.w!==ed)G.vertexAttrib4f(Db,Uc,Pc,Wb,ed),Qc.x=Uc,Qc.y=Pc,Qc.z=Wb,Qc.w=ed;Vc=w.call(this,ha,b,0);gc=!1;$c=null;id=0;qd=!1;ad=vd=0;Xd=1;Bd=0;Qe=5126;Kd=Md=le=ee=0;oa(Vc)?(gc=!0,$c=R.createStream(34962,Vc),Qe=$c.dtype):
($c=R.getBuffer(Vc))?Qe=$c.dtype:"constant"in Vc?(Xd=2,"number"===typeof Vc.constant?(le=Vc.constant,Md=Kd=ee=0):(le=0<Vc.constant.length?Vc.constant[0]:0,Md=1<Vc.constant.length?Vc.constant[1]:0,Kd=2<Vc.constant.length?Vc.constant[2]:0,ee=3<Vc.constant.length?Vc.constant[3]:0)):($c=oa(Vc.buffer)?R.createStream(34962,Vc.buffer):R.getBuffer(Vc.buffer),Qe="type"in Vc?Jd[Vc.type]:$c.dtype,qd=!!Vc.normalized,ad=Vc.size|0,vd=Vc.offset|0,Bd=Vc.stride|0,id=Vc.divisor|0);ld=Gb.location;Gc=V[ld];if(1===Xd){Gc.buffer||
G.enableVertexAttribArray(ld);td=ad||4;if(Gc.type!==Qe||Gc.size!==td||Gc.buffer!==$c||Gc.normalized!==qd||Gc.offset!==vd||Gc.stride!==Bd)G.bindBuffer(34962,$c.buffer),G.vertexAttribPointer(ld,td,Qe,qd,Bd,vd),Gc.type=Qe,Gc.size=td,Gc.buffer=$c,Gc.normalized=qd,Gc.offset=vd,Gc.stride=Bd;Gc.divisor!==id&&(F.vertexAttribDivisorANGLE(ld,id),Gc.divisor=id)}else if(Gc.buffer&&(G.disableVertexAttribArray(ld),Gc.buffer=null),Gc.x!==le||Gc.y!==Md||Gc.z!==Kd||Gc.w!==ee)G.vertexAttrib4f(ld,le,Md,Kd,ee),Gc.x=
le,Gc.y=Md,Gc.z=Kd,Gc.w=ee;md=p.call(this,ha,b,0);bd=!1;nd=null;Dd=0;Ed=!1;xe=te=0;Ze=1;me=0;fe=5126;ge=$d=qe=de=0;oa(md)?(bd=!0,nd=R.createStream(34962,md),fe=nd.dtype):(nd=R.getBuffer(md))?fe=nd.dtype:"constant"in md?(Ze=2,"number"===typeof md.constant?(qe=md.constant,$d=ge=de=0):(qe=0<md.constant.length?md.constant[0]:0,$d=1<md.constant.length?md.constant[1]:0,ge=2<md.constant.length?md.constant[2]:0,de=3<md.constant.length?md.constant[3]:0)):(nd=oa(md.buffer)?R.createStream(34962,md.buffer):R.getBuffer(md.buffer),
fe="type"in md?Jd[md.type]:nd.dtype,Ed=!!md.normalized,xe=md.size|0,te=md.offset|0,me=md.stride|0,Dd=md.divisor|0);zc=ka.location;Yc=V[zc];if(1===Ze){Yc.buffer||G.enableVertexAttribArray(zc);re=xe||1;if(Yc.type!==fe||Yc.size!==re||Yc.buffer!==nd||Yc.normalized!==Ed||Yc.offset!==te||Yc.stride!==me)G.bindBuffer(34962,nd.buffer),G.vertexAttribPointer(zc,re,fe,Ed,me,te),Yc.type=fe,Yc.size=re,Yc.buffer=nd,Yc.normalized=Ed,Yc.offset=te,Yc.stride=me;Yc.divisor!==Dd&&(F.vertexAttribDivisorANGLE(zc,Dd),Yc.divisor=
Dd)}else if(Yc.buffer&&(G.disableVertexAttribArray(zc),Yc.buffer=null),Yc.x!==qe||Yc.y!==$d||Yc.z!==ge||Yc.w!==de)G.vertexAttrib4f(zc,qe,$d,ge,de),Yc.x=qe,Yc.y=$d,Yc.z=ge,Yc.w=de;G.uniform1i(E.location,!1);G.uniform1f(Ka.location,ha.pixelRatio);je=b.scale;G.uniform2f(U.location,je[0],je[1]);Ld=b.scaleFract;G.uniform2f(Na.location,Ld[0],Ld[1]);Qd=b.translate;G.uniform2f(pa.location,Qd[0],Qd[1]);Rd=b.translateFract;G.uniform2f(Xa.location,Rd[0],Rd[1]);Sd=e.call(this,ha,b,0);G.uniform2f(wa.location,
Sd[0],Sd[1]);G.uniform1f(sa.location,b.opacity);G.uniform1i(Qa.location,c.bind());(he=b.markerTexture)&&"framebuffer"===he._reglType&&(he=he.color[0]);Re=he._texture;G.uniform1i(Z.location,Re.bind());ze=b.elements;ne=null;(ne=(bf=oa(ze))?Ac.createStream(ze):Ac.getElements(ze))&&G.bindBuffer(34963,ne.buffer.buffer);Se=b.offset;if(Le=b.count)se=zb.instances,0<se?ne?F.drawElementsInstancedANGLE(0,Le,ne.type,Se<<(ne.type-5121>>1),se):F.drawArraysInstancedANGLE(0,Se,Le,se):0>se&&(ne?G.drawElements(0,Le,
ne.type,Se<<(ne.type-5121>>1)):G.drawArrays(0,Se,Le)),Aa.dirty=!0,ta.setVAO(null),ha.viewportWidth=y,ha.viewportHeight=t,H&&(k.cpuTime+=performance.now()-la),C&&R.destroyStream(I),ab&&R.destroyStream(ma),ib&&R.destroyStream(Sa),gb&&R.destroyStream(Oa),Da&&R.destroyStream(ob),Ab&&R.destroyStream(qb),Nb&&R.destroyStream(Qb),gc&&R.destroyStream($c),bd&&R.destroyStream(nd),c.unbind(),Re.unbind(),bf&&Ac.destroyStream(ne)},scope:function(a,c,e){var d,g,f,p,q,n,v,t,w,D,z,la,ia,E,K,G,M,ua,O,P,T,S,X,V,U,ga,
ja,da,ab,Z,ma,ea,ka,ra,za,qa,pa,ta,Ta,La,sa,wa,Ja,Gb,Eb,Ka,Pa,Na,Jc,ib,Sa,ub,Xa,Qa,db,Zb,Jb,yb,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,Cb,Kb,Lb,Vb,Ca,sc,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,Kc,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,ke,ad,Vd,Bd,Fd,we,Od,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,ie,ue,be,ve,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,Ae,Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,
cf,af,Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Ne,Ce,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,vf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;d=a.viewport;g=d.x|0;f=d.y|0;p="width"in d?d.width|0:ha.framebufferWidth-g;q="height"in d?d.height|0:ha.framebufferHeight-f;n=ha.viewportWidth;ha.viewportWidth=p;v=ha.viewportHeight;ha.viewportHeight=
q;t=Xd[0];Xd[0]=g;w=Xd[1];Xd[1]=f;D=Xd[2];Xd[2]=p;z=Xd[3];Xd[3]=q;la=Q[0];Q[0]=0;ia=Q[1];Q[1]=0;E=Q[2];Q[2]=0;K=Q[3];Q[3]=1;G=Ha.blend_enable;Ha.blend_enable=!0;M=Ea[0];Ea[0]=770;ua=Ea[1];Ea[1]=771;O=Ea[2];Ea[2]=773;P=Ea[3];Ea[3]=1;T=Ha.depth_enable;Ha.depth_enable=!1;S=a.viewport;X=S.x|0;V=S.y|0;U="width"in S?S.width|0:ha.framebufferWidth-X;ga="height"in S?S.height|0:ha.framebufferHeight-V;ja=ee[0];ee[0]=X;da=ee[1];ee[1]=V;ab=ee[2];ee[2]=U;Z=ee[3];ee[3]=ga;ma=Ha.scissor_enable;Ha.scissor_enable=
!0;ea=Ha.stencil_enable;Ha.stencil_enable=!1;if(ka=Aa.profile)ra=performance.now(),k.count++;za=a.elements;qa=null;qa=(pa=oa(za))?Ac.createStream(za):Ac.getElements(za);ta=zb.elements;zb.elements=qa;Ta=a.offset;La=zb.offset;zb.offset=Ta;sa=a.count;wa=zb.count;zb.count=sa;Ja=zb.primitive;zb.primitive=0;Gb=ca[45];ca[45]=!1;Eb=a.markerTexture;Ka=ca[48];ca[48]=Eb;Pa=a.opacity;Na=ca[10];ca[10]=Pa;Jc=m.call(this,ha,a,e);ib=ca[46];ca[46]=Jc;Sa=ca[47];ca[47]=x;ub=ha.pixelRatio;Xa=ca[34];ca[34]=ub;Qa=a.scale;
db=ca[6];ca[6]=Qa;Zb=a.scaleFract;Jb=ca[7];ca[7]=Zb;yb=a.translate;kb=ca[8];ca[8]=yb;lb=a.translateFract;va=ca[9];ca[9]=lb;nb=y.call(this,ha,a,e);ya=!1;Wa=null;bb=0;Ia=!1;Oa=gb=0;xb=1;vb=0;Ua=5126;Vb=Lb=Kb=Cb=0;oa(nb)?(ya=!0,Wa=R.createStream(34962,nb),Ua=Wa.dtype):(Wa=R.getBuffer(nb))?Ua=Wa.dtype:"constant"in nb?(xb=2,"number"===typeof nb.constant?(Kb=nb.constant,Lb=Vb=Cb=0):(Kb=0<nb.constant.length?nb.constant[0]:0,Lb=1<nb.constant.length?nb.constant[1]:0,Vb=2<nb.constant.length?nb.constant[2]:
0,Cb=3<nb.constant.length?nb.constant[3]:0)):(Wa=oa(nb.buffer)?R.createStream(34962,nb.buffer):R.getBuffer(nb.buffer),Ua="type"in nb?Jd[nb.type]:Wa.dtype,Ia=!!nb.normalized,Oa=nb.size|0,gb=nb.offset|0,vb=nb.stride|0,bb=nb.divisor|0);Ca=h.buffer;h.buffer=Wa;sc=h.divisor;h.divisor=bb;Ma=h.normalized;h.normalized=Ia;Ob=h.offset;h.offset=gb;hb=h.size;h.size=Oa;jb=h.state;h.state=xb;xa=h.stride;h.stride=vb;ec=h.type;h.type=Ua;Da=h.w;h.w=Cb;ob=h.x;h.x=Kb;pb=h.y;h.y=Lb;Za=h.z;h.z=Vb;$a=u.call(this,ha,a,
e);nc=!1;xc=null;tc=0;Ya=!1;Ec=Mb=0;Fa=1;yc=0;Va=5126;Ab=sb=mb=Ba=0;oa($a)?(nc=!0,xc=R.createStream(34962,$a),Va=xc.dtype):(xc=R.getBuffer($a))?Va=xc.dtype:"constant"in $a?(Fa=2,"number"===typeof $a.constant?(mb=$a.constant,sb=Ab=Ba=0):(mb=0<$a.constant.length?$a.constant[0]:0,sb=1<$a.constant.length?$a.constant[1]:0,Ab=2<$a.constant.length?$a.constant[2]:0,Ba=3<$a.constant.length?$a.constant[3]:0)):(xc=oa($a.buffer)?R.createStream(34962,$a.buffer):R.getBuffer($a.buffer),Va="type"in $a?Jd[$a.type]:
xc.dtype,Ya=!!$a.normalized,Ec=$a.size|0,Mb=$a.offset|0,yc=$a.stride|0,tc=$a.divisor|0);qb=A.buffer;A.buffer=xc;uc=A.divisor;A.divisor=tc;tb=A.normalized;A.normalized=Ya;Sc=A.offset;A.offset=Mb;rc=A.size;A.size=Ec;Kc=A.state;A.state=Fa;Nc=A.stride;A.stride=yc;cd=A.type;A.type=Va;dd=A.w;A.w=Ba;Yb=A.x;A.x=mb;dc=A.y;A.y=sb;Pb=A.z;A.z=Ab;Ga=aa.call(this,ha,a,e);bc=!1;wb=null;Bb=0;Nb=!1;fc=Qb=0;hc=1;Tc=0;Bc=5126;ed=Oc=Fc=Cc=0;oa(Ga)?(bc=!0,wb=R.createStream(34962,Ga),Bc=wb.dtype):(wb=R.getBuffer(Ga))?
Bc=wb.dtype:"constant"in Ga?(hc=2,"number"===typeof Ga.constant?(Fc=Ga.constant,Oc=ed=Cc=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,Oc=1<Ga.constant.length?Ga.constant[1]:0,ed=2<Ga.constant.length?Ga.constant[2]:0,Cc=3<Ga.constant.length?Ga.constant[3]:0)):(wb=oa(Ga.buffer)?R.createStream(34962,Ga.buffer):R.getBuffer(Ga.buffer),Bc="type"in Ga?Jd[Ga.type]:wb.dtype,Nb=!!Ga.normalized,fc=Ga.size|0,Qb=Ga.offset|0,Tc=Ga.stride|0,Bb=Ga.divisor|0);Uc=C.buffer;C.buffer=wb;Pc=C.divisor;C.divisor=Bb;Wb=C.normalized;
C.normalized=Nb;Db=C.offset;C.offset=Qb;Qc=C.size;C.size=fc;Ic=C.state;C.state=hc;Vc=C.stride;C.stride=Tc;gc=C.type;C.type=Bc;$c=C.w;C.w=Cc;id=C.x;C.x=Fc;qd=C.y;C.y=Oc;ke=C.z;C.z=ed;ad=b.call(this,ha,a,e);Vd=!1;Bd=null;Fd=0;we=!1;Md=Od=0;Kd=1;ld=0;Gc=5126;nd=bd=md=td=0;oa(ad)?(Vd=!0,Bd=R.createStream(34962,ad),Gc=Bd.dtype):(Bd=R.getBuffer(ad))?Gc=Bd.dtype:"constant"in ad?(Kd=2,"number"===typeof ad.constant?(md=ad.constant,bd=nd=td=0):(md=0<ad.constant.length?ad.constant[0]:0,bd=1<ad.constant.length?
ad.constant[1]:0,nd=2<ad.constant.length?ad.constant[2]:0,td=3<ad.constant.length?ad.constant[3]:0)):(Bd=oa(ad.buffer)?R.createStream(34962,ad.buffer):R.getBuffer(ad.buffer),Gc="type"in ad?Jd[ad.type]:Bd.dtype,we=!!ad.normalized,Md=ad.size|0,Od=ad.offset|0,ld=ad.stride|0,Fd=ad.divisor|0);Dd=l.buffer;l.buffer=Bd;Ed=l.divisor;l.divisor=Fd;ie=l.normalized;l.normalized=we;ue=l.offset;l.offset=Od;be=l.size;l.size=Md;ve=l.state;l.state=Kd;fe=l.stride;l.stride=ld;de=l.type;l.type=Gc;qe=l.w;l.w=td;$d=l.x;
l.x=md;ge=l.y;l.y=bd;zc=l.z;l.z=nd;Yc=B.call(this,ha,a,e);re=!1;je=null;Ld=0;Qd=!1;Sd=Rd=0;he=1;Re=0;ze=5126;Le=Se=Ae=ne=0;oa(Yc)?(re=!0,je=R.createStream(34962,Yc),ze=je.dtype):(je=R.getBuffer(Yc))?ze=je.dtype:"constant"in Yc?(he=2,"number"===typeof Yc.constant?(Ae=Yc.constant,Se=Le=ne=0):(Ae=0<Yc.constant.length?Yc.constant[0]:0,Se=1<Yc.constant.length?Yc.constant[1]:0,Le=2<Yc.constant.length?Yc.constant[2]:0,ne=3<Yc.constant.length?Yc.constant[3]:0)):(je=oa(Yc.buffer)?R.createStream(34962,Yc.buffer):
R.getBuffer(Yc.buffer),ze="type"in Yc?Jd[Yc.type]:je.dtype,Qd=!!Yc.normalized,Sd=Yc.size|0,Rd=Yc.offset|0,Re=Yc.stride|0,Ld=Yc.divisor|0);se=L.buffer;L.buffer=je;De=L.divisor;L.divisor=Ld;Fe=L.normalized;L.normalized=Qd;Ge=L.offset;L.offset=Rd;He=L.size;L.size=Sd;Ee=L.state;L.state=he;Nd=L.stride;L.stride=Re;Wd=L.type;L.type=ze;Zd=L.w;L.w=ne;ae=L.x;L.x=Ae;Ie=L.y;L.y=Se;Hd=L.z;L.z=Le;Td=W.call(this,ha,a,e);Be=!1;Je=null;cf=0;af=!1;Me=Te=0;$e=1;Xe=0;Ue=5126;We=Yd=Ud=Ve=0;oa(Td)?(Be=!0,Je=R.createStream(34962,
Td),Ue=Je.dtype):(Je=R.getBuffer(Td))?Ue=Je.dtype:"constant"in Td?($e=2,"number"===typeof Td.constant?(Ud=Td.constant,Yd=We=Ve=0):(Ud=0<Td.constant.length?Td.constant[0]:0,Yd=1<Td.constant.length?Td.constant[1]:0,We=2<Td.constant.length?Td.constant[2]:0,Ve=3<Td.constant.length?Td.constant[3]:0)):(Je=oa(Td.buffer)?R.createStream(34962,Td.buffer):R.getBuffer(Td.buffer),Ue="type"in Td?Jd[Td.type]:Je.dtype,af=!!Td.normalized,Me=Td.size|0,Te=Td.offset|0,Xe=Td.stride|0,cf=Td.divisor|0);jf=F.buffer;F.buffer=
Je;nf=F.divisor;F.divisor=cf;ff=F.normalized;F.normalized=af;kf=F.offset;F.offset=Te;lf=F.size;F.size=Me;mf=F.state;F.state=$e;rf=F.stride;F.stride=Xe;of=F.type;F.type=Ue;sf=F.w;F.w=Ve;Cf=F.x;F.x=Ud;Df=F.y;F.y=Yd;Ne=F.z;F.z=We;Ce=fa.call(this,ha,a,e);pf=!1;qf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=vf=0;oa(Ce)?(pf=!0,qf=R.createStream(34962,Ce),yf=qf.dtype):(qf=R.getBuffer(Ce))?yf=qf.dtype:"constant"in Ce?(Gf=2,"number"===typeof Ce.constant?(zf=Ce.constant,Af=Jf=vf=0):(zf=0<Ce.constant.length?
Ce.constant[0]:0,Af=1<Ce.constant.length?Ce.constant[1]:0,Jf=2<Ce.constant.length?Ce.constant[2]:0,vf=3<Ce.constant.length?Ce.constant[3]:0)):(qf=oa(Ce.buffer)?R.createStream(34962,Ce.buffer):R.getBuffer(Ce.buffer),yf="type"in Ce?Jd[Ce.type]:qf.dtype,Hf=!!Ce.normalized,Ff=Ce.size|0,Bf=Ce.offset|0,xf=Ce.stride|0,Ef=Ce.divisor|0);Kf=N.buffer;N.buffer=qf;Lf=N.divisor;N.divisor=Ef;Mf=N.normalized;N.normalized=Hf;tf=N.offset;N.offset=Bf;Rf=N.size;N.size=Ff;If=N.state;N.state=Gf;uf=N.stride;N.stride=xf;
dg=N.type;N.type=yf;Sf=N.w;N.w=vf;Tf=N.x;N.x=zf;qg=N.y;N.y=Af;gf=N.z;N.z=Jf;df=ba.call(this,ha,a,e);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;oa(df)?(Nf=!0,Of=R.createStream(34962,df),Uf=Of.dtype):(Of=R.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=
oa(df.buffer)?R.createStream(34962,df.buffer):R.getBuffer(df.buffer),Uf="type"in df?Jd[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=I.buffer;I.buffer=Of;sg=I.divisor;I.divisor=eg;tg=I.normalized;I.normalized=fg;ug=I.offset;I.offset=gg;vg=I.size;I.size=hg;wg=I.state;I.state=ig;xg=I.stride;I.stride=Wf;yg=I.type;I.type=Uf;zg=I.w;I.w=Xf;Ag=I.x;I.x=Yf;Bg=I.y;I.y=Zf;hf=I.z;I.z=jg;ef=r.call(this,ha,a,e);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=
5126;pg=cg=bg=ag=0;oa(ef)?(Pf=!0,Qf=R.createStream(34962,ef),Vf=Qf.dtype):(Qf=R.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=oa(ef.buffer)?R.createStream(34962,ef.buffer):R.getBuffer(ef.buffer),Vf="type"in ef?Jd[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|
0,$f=ef.stride|0,kg=ef.divisor|0);Cg=J.buffer;J.buffer=Qf;Dg=J.divisor;J.divisor=kg;Eg=J.normalized;J.normalized=lg;Fg=J.offset;J.offset=mg;Gg=J.size;J.size=ng;Hg=J.state;J.state=og;Ig=J.stride;J.stride=$f;Jg=J.type;J.type=Vf;Kg=J.w;J.w=ag;Lg=J.x;J.x=bg;Mg=J.y;J.y=cg;Ng=J.z;J.z=pg;Og=Y.vert;Y.vert=44;Pg=Y.frag;Y.frag=43;Aa.dirty=!0;c(ha,a,e);ha.viewportWidth=n;ha.viewportHeight=v;Xd[0]=t;Xd[1]=w;Xd[2]=D;Xd[3]=z;Q[0]=la;Q[1]=ia;Q[2]=E;Q[3]=K;Ha.blend_enable=G;Ea[0]=M;Ea[1]=ua;Ea[2]=O;Ea[3]=P;Ha.depth_enable=
T;ee[0]=ja;ee[1]=da;ee[2]=ab;ee[3]=Z;Ha.scissor_enable=ma;Ha.stencil_enable=ea;ka&&(k.cpuTime+=performance.now()-ra);pa&&Ac.destroyStream(qa);zb.elements=ta;zb.offset=La;zb.count=wa;zb.primitive=Ja;ca[45]=Gb;ca[48]=Ka;ca[10]=Na;ca[46]=ib;ca[47]=Sa;ca[34]=Xa;ca[6]=db;ca[7]=Jb;ca[8]=kb;ca[9]=va;ya&&R.destroyStream(Wa);h.buffer=Ca;h.divisor=sc;h.normalized=Ma;h.offset=Ob;h.size=hb;h.state=jb;h.stride=xa;h.type=ec;h.w=Da;h.x=ob;h.y=pb;h.z=Za;nc&&R.destroyStream(xc);A.buffer=qb;A.divisor=uc;A.normalized=
tb;A.offset=Sc;A.size=rc;A.state=Kc;A.stride=Nc;A.type=cd;A.w=dd;A.x=Yb;A.y=dc;A.z=Pb;bc&&R.destroyStream(wb);C.buffer=Uc;C.divisor=Pc;C.normalized=Wb;C.offset=Db;C.size=Qc;C.state=Ic;C.stride=Vc;C.type=gc;C.w=$c;C.x=id;C.y=qd;C.z=ke;Vd&&R.destroyStream(Bd);l.buffer=Dd;l.divisor=Ed;l.normalized=ie;l.offset=ue;l.size=be;l.state=ve;l.stride=fe;l.type=de;l.w=qe;l.x=$d;l.y=ge;l.z=zc;re&&R.destroyStream(je);L.buffer=se;L.divisor=De;L.normalized=Fe;L.offset=Ge;L.size=He;L.state=Ee;L.stride=Nd;L.type=Wd;
L.w=Zd;L.x=ae;L.y=Ie;L.z=Hd;Be&&R.destroyStream(Je);F.buffer=jf;F.divisor=nf;F.normalized=ff;F.offset=kf;F.size=lf;F.state=mf;F.stride=rf;F.type=of;F.w=sf;F.x=Cf;F.y=Df;F.z=Ne;pf&&R.destroyStream(qf);N.buffer=Kf;N.divisor=Lf;N.normalized=Mf;N.offset=tf;N.size=Rf;N.state=If;N.stride=uf;N.type=dg;N.w=Sf;N.x=Tf;N.y=qg;N.z=gf;Nf&&R.destroyStream(Of);I.buffer=rg;I.divisor=sg;I.normalized=tg;I.offset=ug;I.size=vg;I.state=wg;I.stride=xg;I.type=yg;I.w=zg;I.x=Ag;I.y=Bg;I.z=hf;Pf&&R.destroyStream(Qf);J.buffer=
Cg;J.divisor=Dg;J.normalized=Eg;J.offset=Fg;J.size=Gg;J.state=Hg;J.stride=Ig;J.type=Jg;J.w=Kg;J.x=Lg;J.y=Mg;J.z=Ng;Y.vert=Og;Y.frag=Pg;Aa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,h,u,A,aa,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua,ab,ma,za,da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa,Xa,Cb,yb,Jc){var Eb,V,R,ha,
Aa,zb,Ac,Kc,P,G,oa,Ha,Y,ca,ta,Q,M,ja,Ja,Ea,La,K,sc,Zb,qa,Jb,ub,Ae,be,ee,ke,we,ue,Fd,ie,ve,Od,Xd,Vd;Eb=a.attributes;V=a.buffer;R=a.context;ha=a.current;Aa=a.draw;zb=a.elements;Ac=a.extensions;Kc=a.framebuffer;P=a.gl;G=a.isBufferArgs;oa=a.next;Ha=a.shader;Y=a.uniforms;ca=a.vao;ta=oa.blend_color;Q=ha.blend_color;M=oa.blend_equation;ja=ha.blend_equation;Ja=oa.blend_func;Ea=ha.blend_func;La=oa.colorMask;K=ha.colorMask;sc=oa.depth_range;Zb=ha.depth_range;qa=oa.polygonOffset_offset;Jb=ha.polygonOffset_offset;
ub=oa.sample_coverage;Ae=ha.sample_coverage;be=oa.scissor_box;ee=ha.scissor_box;ke=oa.stencil_func;we=ha.stencil_func;ue=oa.stencil_opBack;Fd=ha.stencil_opBack;ie=oa.stencil_opFront;ve=ha.stencil_opFront;Od=oa.viewport;Xd=ha.viewport;Vd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var l,c,e,d,r,g;l=Kc.next;l!==Kc.cur&&(l?P.bindFramebuffer(36160,l.framebuffer):P.bindFramebuffer(36160,null),Kc.cur=l);if(ha.dirty){var f,m,p,
q,n,x,B,y,v,J,t,L,w,D,z,h,W,N,F,H,A,C,I,u,fa,na,ba,aa,Y,ta,Ha,Ja,rb,Hb;f=oa.dither;f!==ha.dither&&(f?P.enable(3024):P.disable(3024),ha.dither=f);m=M[0];p=M[1];if(m!==ja[0]||p!==ja[1])P.blendEquationSeparate(m,p),ja[0]=m,ja[1]=p;q=oa.depth_func;q!==ha.depth_func&&(P.depthFunc(q),ha.depth_func=q);n=sc[0];x=sc[1];if(n!==Zb[0]||x!==Zb[1])P.depthRange(n,x),Zb[0]=n,Zb[1]=x;B=oa.depth_mask;B!==ha.depth_mask&&(P.depthMask(B),ha.depth_mask=B);y=La[0];v=La[1];J=La[2];t=La[3];if(y!==K[0]||v!==K[1]||J!==K[2]||
t!==K[3])P.colorMask(y,v,J,t),K[0]=y,K[1]=v,K[2]=J,K[3]=t;L=oa.cull_enable;L!==ha.cull_enable&&(L?P.enable(2884):P.disable(2884),ha.cull_enable=L);w=oa.cull_face;w!==ha.cull_face&&(P.cullFace(w),ha.cull_face=w);D=oa.frontFace;D!==ha.frontFace&&(P.frontFace(D),ha.frontFace=D);z=oa.lineWidth;z!==ha.lineWidth&&(P.lineWidth(z),ha.lineWidth=z);h=oa.polygonOffset_enable;h!==ha.polygonOffset_enable&&(h?P.enable(32823):P.disable(32823),ha.polygonOffset_enable=h);W=qa[0];N=qa[1];if(W!==Jb[0]||N!==Jb[1])P.polygonOffset(W,
N),Jb[0]=W,Jb[1]=N;F=oa.sample_alpha;F!==ha.sample_alpha&&(F?P.enable(32926):P.disable(32926),ha.sample_alpha=F);H=oa.sample_enable;H!==ha.sample_enable&&(H?P.enable(32928):P.disable(32928),ha.sample_enable=H);A=ub[0];C=ub[1];if(A!==Ae[0]||C!==Ae[1])P.sampleCoverage(A,C),Ae[0]=A,Ae[1]=C;I=oa.stencil_mask;I!==ha.stencil_mask&&(P.stencilMask(I),ha.stencil_mask=I);u=ke[0];fa=ke[1];na=ke[2];if(u!==we[0]||fa!==we[1]||na!==we[2])P.stencilFunc(u,fa,na),we[0]=u,we[1]=fa,we[2]=na;ba=ie[0];aa=ie[1];Y=ie[2];
ta=ie[3];if(ba!==ve[0]||aa!==ve[1]||Y!==ve[2]||ta!==ve[3])P.stencilOpSeparate(ba,aa,Y,ta),ve[0]=ba,ve[1]=aa,ve[2]=Y,ve[3]=ta;Ha=ue[0];Ja=ue[1];rb=ue[2];Hb=ue[3];if(Ha!==Fd[0]||Ja!==Fd[1]||rb!==Fd[2]||Hb!==Fd[3])P.stencilOpSeparate(Ha,Ja,rb,Hb),Fd[0]=Ha,Fd[1]=Ja,Fd[2]=rb,Fd[3]=Hb}P.blendColor(0,0,0,1);Q[0]=0;Q[1]=0;Q[2]=0;Q[3]=1;P.enable(3042);ha.blend_enable=!0;P.blendFuncSeparate(770,771,773,1);Ea[0]=770;Ea[1]=771;Ea[2]=773;Ea[3]=1;P.disable(2929);ha.depth_enable=!1;P.enable(3089);ha.scissor_enable=
!0;P.disable(2960);ha.stencil_enable=!1;if(c=ha.profile)e=performance.now(),k.count+=a;P.useProgram(la.program);d=Ac.angle_instanced_arrays;var cb;ca.setVAO(null);P.uniform1i(E.location,!1);P.uniform1i(wa.location,ra.bind());cb=Aa.instances;for(r=0;r<a;++r){g=b[r];var $b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,
Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,Od,Bd,be,Ke,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf,Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Ne,Ce,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,vf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf;$b=g.viewport;Sb=$b.x|0;kd=$b.y|0;cc="width"in $b?$b.width|0:R.framebufferWidth-Sb;Tb="height"in $b?$b.height|0:R.framebufferHeight-kd;Mc=
R.viewportWidth;R.viewportWidth=cc;Ub=R.viewportHeight;R.viewportHeight=Tb;P.viewport(Sb,kd,cc,Tb);Xd[0]=Sb;Xd[1]=kd;Xd[2]=cc;Xd[3]=Tb;Pa=g.viewport;Fb=Pa.x|0;Ib=Pa.y|0;ib="width"in Pa?Pa.width|0:R.framebufferWidth-Fb;Sa="height"in Pa?Pa.height|0:R.framebufferHeight-Ib;P.scissor(Fb,Ib,ib,Sa);ee[0]=Fb;ee[1]=Ib;ee[2]=ib;ee[3]=Sa;pc=ia.call(this,R,g,r);ac=!1;Dc=null;db=0;mc=!1;oc=Hc=0;kb=1;lb=0;va=5126;bb=Wa=ya=nb=0;G(pc)?(ac=!0,Dc=V.createStream(34962,pc),va=Dc.dtype):(Dc=V.getBuffer(pc))?va=Dc.dtype:
"constant"in pc?(kb=2,"number"===typeof pc.constant?(ya=pc.constant,Wa=bb=nb=0):(ya=0<pc.constant.length?pc.constant[0]:0,Wa=1<pc.constant.length?pc.constant[1]:0,bb=2<pc.constant.length?pc.constant[2]:0,nb=3<pc.constant.length?pc.constant[3]:0)):(Dc=G(pc.buffer)?V.createStream(34962,pc.buffer):V.getBuffer(pc.buffer),va="type"in pc?Vd[pc.type]:Dc.dtype,mc=!!pc.normalized,oc=pc.size|0,Hc=pc.offset|0,lb=pc.stride|0,db=pc.divisor|0);Ia=Xa.location;gb=Eb[Ia];if(1===kb){gb.buffer||P.enableVertexAttribArray(Ia);
Oa=oc||1;if(gb.type!==va||gb.size!==Oa||gb.buffer!==Dc||gb.normalized!==mc||gb.offset!==Hc||gb.stride!==lb)P.bindBuffer(34962,Dc.buffer),P.vertexAttribPointer(Ia,Oa,va,mc,lb,Hc),gb.type=va,gb.size=Oa,gb.buffer=Dc,gb.normalized=mc,gb.offset=Hc,gb.stride=lb;gb.divisor!==db&&(d.vertexAttribDivisorANGLE(Ia,db),gb.divisor=db)}else if(gb.buffer&&(P.disableVertexAttribArray(Ia),gb.buffer=null),gb.x!==ya||gb.y!==Wa||gb.z!==bb||gb.w!==nb)P.vertexAttrib4f(Ia,ya,Wa,bb,nb),gb.x=ya,gb.y=Wa,gb.z=bb,gb.w=nb;xb=
ua.call(this,R,g,r);vb=!1;Ua=null;wc=0;Kb=!1;Vb=Lb=0;Ca=1;xd=0;Ma=5126;xa=jb=hb=Ob=0;G(xb)?(vb=!0,Ua=V.createStream(34962,xb),Ma=Ua.dtype):(Ua=V.getBuffer(xb))?Ma=Ua.dtype:"constant"in xb?(Ca=2,"number"===typeof xb.constant?(hb=xb.constant,jb=xa=Ob=0):(hb=0<xb.constant.length?xb.constant[0]:0,jb=1<xb.constant.length?xb.constant[1]:0,xa=2<xb.constant.length?xb.constant[2]:0,Ob=3<xb.constant.length?xb.constant[3]:0)):(Ua=G(xb.buffer)?V.createStream(34962,xb.buffer):V.getBuffer(xb.buffer),Ma="type"in
xb?Vd[xb.type]:Ua.dtype,Kb=!!xb.normalized,Vb=xb.size|0,Lb=xb.offset|0,xd=xb.stride|0,wc=xb.divisor|0);ec=yb.location;Da=Eb[ec];if(1===Ca){Da.buffer||P.enableVertexAttribArray(ec);ob=Vb||1;if(Da.type!==Ma||Da.size!==ob||Da.buffer!==Ua||Da.normalized!==Kb||Da.offset!==Lb||Da.stride!==xd)P.bindBuffer(34962,Ua.buffer),P.vertexAttribPointer(ec,ob,Ma,Kb,xd,Lb),Da.type=Ma,Da.size=ob,Da.buffer=Ua,Da.normalized=Kb,Da.offset=Lb,Da.stride=xd;Da.divisor!==wc&&(d.vertexAttribDivisorANGLE(ec,wc),Da.divisor=wc)}else if(Da.buffer&&
(P.disableVertexAttribArray(ec),Da.buffer=null),Da.x!==hb||Da.y!==jb||Da.z!==xa||Da.w!==Ob)P.vertexAttrib4f(ec,hb,jb,xa,Ob),Da.x=hb,Da.y=jb,Da.z=xa,Da.w=Ob;pb=ab.call(this,R,g,r);Za=!1;$a=null;nc=0;xc=!1;Ya=tc=0;Mb=1;Ec=0;Fa=5126;mb=Ba=Va=yc=0;G(pb)?(Za=!0,$a=V.createStream(34962,pb),Fa=$a.dtype):($a=V.getBuffer(pb))?Fa=$a.dtype:"constant"in pb?(Mb=2,"number"===typeof pb.constant?(Va=pb.constant,Ba=mb=yc=0):(Va=0<pb.constant.length?pb.constant[0]:0,Ba=1<pb.constant.length?pb.constant[1]:0,mb=2<pb.constant.length?
pb.constant[2]:0,yc=3<pb.constant.length?pb.constant[3]:0)):($a=G(pb.buffer)?V.createStream(34962,pb.buffer):V.getBuffer(pb.buffer),Fa="type"in pb?Vd[pb.type]:$a.dtype,xc=!!pb.normalized,Ya=pb.size|0,tc=pb.offset|0,Ec=pb.stride|0,nc=pb.divisor|0);sb=Cb.location;Ab=Eb[sb];if(1===Mb){Ab.buffer||P.enableVertexAttribArray(sb);qb=Ya||1;if(Ab.type!==Fa||Ab.size!==qb||Ab.buffer!==$a||Ab.normalized!==xc||Ab.offset!==tc||Ab.stride!==Ec)P.bindBuffer(34962,$a.buffer),P.vertexAttribPointer(sb,qb,Fa,xc,Ec,tc),
Ab.type=Fa,Ab.size=qb,Ab.buffer=$a,Ab.normalized=xc,Ab.offset=tc,Ab.stride=Ec;Ab.divisor!==nc&&(d.vertexAttribDivisorANGLE(sb,nc),Ab.divisor=nc)}else if(Ab.buffer&&(P.disableVertexAttribArray(sb),Ab.buffer=null),Ab.x!==Va||Ab.y!==Ba||Ab.z!==mb||Ab.w!==yc)P.vertexAttrib4f(sb,Va,Ba,mb,yc),Ab.x=Va,Ab.y=Ba,Ab.z=mb,Ab.w=yc;uc=ma.call(this,R,g,r);tb=!1;Sc=null;rc=0;sd=!1;cd=Nc=0;dd=1;Yb=0;dc=5126;wb=bc=Ga=Pb=0;G(uc)?(tb=!0,Sc=V.createStream(34962,uc),dc=Sc.dtype):(Sc=V.getBuffer(uc))?dc=Sc.dtype:"constant"in
uc?(dd=2,"number"===typeof uc.constant?(Ga=uc.constant,bc=wb=Pb=0):(Ga=0<uc.constant.length?uc.constant[0]:0,bc=1<uc.constant.length?uc.constant[1]:0,wb=2<uc.constant.length?uc.constant[2]:0,Pb=3<uc.constant.length?uc.constant[3]:0)):(Sc=G(uc.buffer)?V.createStream(34962,uc.buffer):V.getBuffer(uc.buffer),dc="type"in uc?Vd[uc.type]:Sc.dtype,sd=!!uc.normalized,cd=uc.size|0,Nc=uc.offset|0,Yb=uc.stride|0,rc=uc.divisor|0);Bb=Jc.location;Nb=Eb[Bb];if(1===dd){Nb.buffer||P.enableVertexAttribArray(Bb);Qb=
cd||1;if(Nb.type!==dc||Nb.size!==Qb||Nb.buffer!==Sc||Nb.normalized!==sd||Nb.offset!==Nc||Nb.stride!==Yb)P.bindBuffer(34962,Sc.buffer),P.vertexAttribPointer(Bb,Qb,dc,sd,Yb,Nc),Nb.type=dc,Nb.size=Qb,Nb.buffer=Sc,Nb.normalized=sd,Nb.offset=Nc,Nb.stride=Yb;Nb.divisor!==rc&&(d.vertexAttribDivisorANGLE(Bb,rc),Nb.divisor=rc)}else if(Nb.buffer&&(P.disableVertexAttribArray(Bb),Nb.buffer=null),Nb.x!==Ga||Nb.y!==bc||Nb.z!==wb||Nb.w!==Pb)P.vertexAttrib4f(Bb,Ga,bc,wb,Pb),Nb.x=Ga,Nb.y=bc,Nb.z=wb,Nb.w=Pb;fc=za.call(this,
R,g,r);hc=!1;Tc=null;Bc=0;Cc=!1;Oc=Fc=0;ed=1;Uc=0;Pc=5126;Ic=Qc=Db=Wb=0;G(fc)?(hc=!0,Tc=V.createStream(34962,fc),Pc=Tc.dtype):(Tc=V.getBuffer(fc))?Pc=Tc.dtype:"constant"in fc?(ed=2,"number"===typeof fc.constant?(Db=fc.constant,Qc=Ic=Wb=0):(Db=0<fc.constant.length?fc.constant[0]:0,Qc=1<fc.constant.length?fc.constant[1]:0,Ic=2<fc.constant.length?fc.constant[2]:0,Wb=3<fc.constant.length?fc.constant[3]:0)):(Tc=G(fc.buffer)?V.createStream(34962,fc.buffer):V.getBuffer(fc.buffer),Pc="type"in fc?Vd[fc.type]:
Tc.dtype,Cc=!!fc.normalized,Oc=fc.size|0,Fc=fc.offset|0,Uc=fc.stride|0,Bc=fc.divisor|0);Vc=Na.location;gc=Eb[Vc];if(1===ed){gc.buffer||P.enableVertexAttribArray(Vc);$c=Oc||1;if(gc.type!==Pc||gc.size!==$c||gc.buffer!==Tc||gc.normalized!==Cc||gc.offset!==Fc||gc.stride!==Uc)P.bindBuffer(34962,Tc.buffer),P.vertexAttribPointer(Vc,$c,Pc,Cc,Uc,Fc),gc.type=Pc,gc.size=$c,gc.buffer=Tc,gc.normalized=Cc,gc.offset=Fc,gc.stride=Uc;gc.divisor!==Bc&&(d.vertexAttribDivisorANGLE(Vc,Bc),gc.divisor=Bc)}else if(gc.buffer&&
(P.disableVertexAttribArray(Vc),gc.buffer=null),gc.x!==Db||gc.y!==Qc||gc.z!==Ic||gc.w!==Wb)P.vertexAttrib4f(Vc,Db,Qc,Ic,Wb),gc.x=Db,gc.y=Qc,gc.z=Ic,gc.w=Wb;id=da.call(this,R,g,r);qd=!1;vd=null;ad=0;Od=!1;be=Bd=0;Ke=1;le=0;Md=5126;td=Gc=ld=Kd=0;G(id)?(qd=!0,vd=V.createStream(34962,id),Md=vd.dtype):(vd=V.getBuffer(id))?Md=vd.dtype:"constant"in id?(Ke=2,"number"===typeof id.constant?(ld=id.constant,Gc=td=Kd=0):(ld=0<id.constant.length?id.constant[0]:0,Gc=1<id.constant.length?id.constant[1]:0,td=2<id.constant.length?
id.constant[2]:0,Kd=3<id.constant.length?id.constant[3]:0)):(vd=G(id.buffer)?V.createStream(34962,id.buffer):V.getBuffer(id.buffer),Md="type"in id?Vd[id.type]:vd.dtype,Od=!!id.normalized,be=id.size|0,Bd=id.offset|0,le=id.stride|0,ad=id.divisor|0);md=Ta.location;bd=Eb[md];if(1===Ke){bd.buffer||P.enableVertexAttribArray(md);nd=be||1;if(bd.type!==Md||bd.size!==nd||bd.buffer!==vd||bd.normalized!==Od||bd.offset!==Bd||bd.stride!==le)P.bindBuffer(34962,vd.buffer),P.vertexAttribPointer(md,nd,Md,Od,le,Bd),
bd.type=Md,bd.size=nd,bd.buffer=vd,bd.normalized=Od,bd.offset=Bd,bd.stride=le;bd.divisor!==ad&&(d.vertexAttribDivisorANGLE(md,ad),bd.divisor=ad)}else if(bd.buffer&&(P.disableVertexAttribArray(md),bd.buffer=null),bd.x!==ld||bd.y!==Gc||bd.z!==td||bd.w!==Kd)P.vertexAttrib4f(md,ld,Gc,td,Kd),bd.x=ld,bd.y=Gc,bd.z=td,bd.w=Kd;Dd=ga.call(this,R,g,r);Ed=!1;te=null;xe=0;Ze=!1;fe=me=0;de=1;qe=0;$d=5126;re=Yc=zc=ge=0;G(Dd)?(Ed=!0,te=V.createStream(34962,Dd),$d=te.dtype):(te=V.getBuffer(Dd))?$d=te.dtype:"constant"in
Dd?(de=2,"number"===typeof Dd.constant?(zc=Dd.constant,Yc=re=ge=0):(zc=0<Dd.constant.length?Dd.constant[0]:0,Yc=1<Dd.constant.length?Dd.constant[1]:0,re=2<Dd.constant.length?Dd.constant[2]:0,ge=3<Dd.constant.length?Dd.constant[3]:0)):(te=G(Dd.buffer)?V.createStream(34962,Dd.buffer):V.getBuffer(Dd.buffer),$d="type"in Dd?Vd[Dd.type]:te.dtype,Ze=!!Dd.normalized,fe=Dd.size|0,me=Dd.offset|0,qe=Dd.stride|0,xe=Dd.divisor|0);je=X.location;Ld=Eb[je];if(1===de){Ld.buffer||P.enableVertexAttribArray(je);Qd=fe||
4;if(Ld.type!==$d||Ld.size!==Qd||Ld.buffer!==te||Ld.normalized!==Ze||Ld.offset!==me||Ld.stride!==qe)P.bindBuffer(34962,te.buffer),P.vertexAttribPointer(je,Qd,$d,Ze,qe,me),Ld.type=$d,Ld.size=Qd,Ld.buffer=te,Ld.normalized=Ze,Ld.offset=me,Ld.stride=qe;Ld.divisor!==xe&&(d.vertexAttribDivisorANGLE(je,xe),Ld.divisor=xe)}else if(Ld.buffer&&(P.disableVertexAttribArray(je),Ld.buffer=null),Ld.x!==zc||Ld.y!==Yc||Ld.z!==re||Ld.w!==ge)P.vertexAttrib4f(je,zc,Yc,re,ge),Ld.x=zc,Ld.y=Yc,Ld.z=re,Ld.w=ge;Rd=O.call(this,
R,g,r);Sd=!1;he=null;Re=0;ze=!1;bf=ne=0;Se=1;Le=0;se=5126;He=Ge=Fe=De=0;G(Rd)?(Sd=!0,he=V.createStream(34962,Rd),se=he.dtype):(he=V.getBuffer(Rd))?se=he.dtype:"constant"in Rd?(Se=2,"number"===typeof Rd.constant?(Fe=Rd.constant,Ge=He=De=0):(Fe=0<Rd.constant.length?Rd.constant[0]:0,Ge=1<Rd.constant.length?Rd.constant[1]:0,He=2<Rd.constant.length?Rd.constant[2]:0,De=3<Rd.constant.length?Rd.constant[3]:0)):(he=G(Rd.buffer)?V.createStream(34962,Rd.buffer):V.getBuffer(Rd.buffer),se="type"in Rd?Vd[Rd.type]:
he.dtype,ze=!!Rd.normalized,bf=Rd.size|0,ne=Rd.offset|0,Le=Rd.stride|0,Re=Rd.divisor|0);Ee=Gb.location;Nd=Eb[Ee];if(1===Se){Nd.buffer||P.enableVertexAttribArray(Ee);Wd=bf||4;if(Nd.type!==se||Nd.size!==Wd||Nd.buffer!==he||Nd.normalized!==ze||Nd.offset!==ne||Nd.stride!==Le)P.bindBuffer(34962,he.buffer),P.vertexAttribPointer(Ee,Wd,se,ze,Le,ne),Nd.type=se,Nd.size=Wd,Nd.buffer=he,Nd.normalized=ze,Nd.offset=ne,Nd.stride=Le;Nd.divisor!==Re&&(d.vertexAttribDivisorANGLE(Ee,Re),Nd.divisor=Re)}else if(Nd.buffer&&
(P.disableVertexAttribArray(Ee),Nd.buffer=null),Nd.x!==Fe||Nd.y!==Ge||Nd.z!==He||Nd.w!==De)P.vertexAttrib4f(Ee,Fe,Ge,He,De),Nd.x=Fe,Nd.y=Ge,Nd.z=He,Nd.w=De;Zd=T.call(this,R,g,r);ae=!1;Ie=null;Hd=0;Td=!1;Je=Be=0;cf=1;af=0;Te=5126;Ue=Xe=$e=Me=0;G(Zd)?(ae=!0,Ie=V.createStream(34962,Zd),Te=Ie.dtype):(Ie=V.getBuffer(Zd))?Te=Ie.dtype:"constant"in Zd?(cf=2,"number"===typeof Zd.constant?($e=Zd.constant,Xe=Ue=Me=0):($e=0<Zd.constant.length?Zd.constant[0]:0,Xe=1<Zd.constant.length?Zd.constant[1]:0,Ue=2<Zd.constant.length?
Zd.constant[2]:0,Me=3<Zd.constant.length?Zd.constant[3]:0)):(Ie=G(Zd.buffer)?V.createStream(34962,Zd.buffer):V.getBuffer(Zd.buffer),Te="type"in Zd?Vd[Zd.type]:Ie.dtype,Td=!!Zd.normalized,Je=Zd.size|0,Be=Zd.offset|0,af=Zd.stride|0,Hd=Zd.divisor|0);Ve=ka.location;Ud=Eb[Ve];if(1===cf){Ud.buffer||P.enableVertexAttribArray(Ve);Yd=Je||1;if(Ud.type!==Te||Ud.size!==Yd||Ud.buffer!==Ie||Ud.normalized!==Td||Ud.offset!==Be||Ud.stride!==af)P.bindBuffer(34962,Ie.buffer),P.vertexAttribPointer(Ve,Yd,Te,Td,af,Be),
Ud.type=Te,Ud.size=Yd,Ud.buffer=Ie,Ud.normalized=Td,Ud.offset=Be,Ud.stride=af;Ud.divisor!==Hd&&(d.vertexAttribDivisorANGLE(Ve,Hd),Ud.divisor=Hd)}else if(Ud.buffer&&(P.disableVertexAttribArray(Ve),Ud.buffer=null),Ud.x!==$e||Ud.y!==Xe||Ud.z!==Ue||Ud.w!==Me)P.vertexAttrib4f(Ve,$e,Xe,Ue,Me),Ud.x=$e,Ud.y=Xe,Ud.z=Ue,Ud.w=Me;We=R.pixelRatio;r&&jf===We||(jf=We,P.uniform1f(Qa.location,We));nf=S.call(this,R,g,r);ff=nf[0];lf=nf[1];r&&kf===ff&&mf===lf||(kf=ff,mf=lf,P.uniform2f(sa.location,ff,lf));rf=g.scale;
of=rf[0];Cf=rf[1];r&&sf===of&&Df===Cf||(sf=of,Df=Cf,P.uniform2f(Ka.location,of,Cf));Ne=g.scaleFract;Ce=Ne[0];qf=Ne[1];r&&pf===Ce&&Ef===qf||(pf=Ce,Ef=qf,P.uniform2f(U.location,Ce,qf));Hf=g.translate;Bf=Hf[0];Gf=Hf[1];r&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,P.uniform2f(ea.location,Bf,Gf));yf=g.translateFract;vf=yf[0];Af=yf[1];r&&zf===vf&&Jf===Af||(zf=vf,Jf=Af,P.uniform2f(pa.location,vf,Af));Kf=g.opacity;r&&Lf===Kf||(Lf=Kf,P.uniform1f(Z.location,Kf));Mf=g.elements;tf=null;(tf=(Rf=G(Mf))?zb.createStream(Mf):
zb.getElements(Mf))&&P.bindBuffer(34963,tf.buffer.buffer);If=g.offset;if(uf=g.count)0<cb?tf?d.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),cb):d.drawArraysInstancedANGLE(0,If,uf,cb):0>cb&&(tf?P.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):P.drawArrays(0,If,uf)),R.viewportWidth=Mc,R.viewportHeight=Ub,ac&&V.destroyStream(Dc),vb&&V.destroyStream(Ua),Za&&V.destroyStream($a),tb&&V.destroyStream(Sc),hc&&V.destroyStream(Tc),qd&&V.destroyStream(vd),Ed&&V.destroyStream(te),Sd&&V.destroyStream(he),
ae&&V.destroyStream(Ie),Rf&&zb.destroyStream(tf)}ra.unbind();ha.dirty=!0;ca.setVAO(null);c&&(k.cpuTime+=performance.now()-e)},draw:function(b){var a,l,r,m,x,B,y,J,t,L,h,W,N,F,la,H,A,C,I,ia,u,fa,na,ba,aa,ua,O,S,T,ga,Y,da,ab,ma,ra,za,ta,Ha,Ja,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,
Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,qd,vd,ad,Od,Bd,be,Ke,le,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,te,xe,Ze,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Re,ze,ne,bf;a=Kc.next;a!==Kc.cur&&(a?P.bindFramebuffer(36160,a.framebuffer):P.bindFramebuffer(36160,null),Kc.cur=a);if(ha.dirty){var Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf;Se=oa.dither;Se!==ha.dither&&(Se?P.enable(3024):P.disable(3024),ha.dither=Se);Le=M[0];se=M[1];if(Le!==ja[0]||se!==ja[1])P.blendEquationSeparate(Le,
se),ja[0]=Le,ja[1]=se;De=oa.depth_func;De!==ha.depth_func&&(P.depthFunc(De),ha.depth_func=De);Fe=sc[0];Ge=sc[1];if(Fe!==Zb[0]||Ge!==Zb[1])P.depthRange(Fe,Ge),Zb[0]=Fe,Zb[1]=Ge;He=oa.depth_mask;He!==ha.depth_mask&&(P.depthMask(He),ha.depth_mask=He);Ee=La[0];Nd=La[1];Wd=La[2];Zd=La[3];if(Ee!==K[0]||Nd!==K[1]||Wd!==K[2]||Zd!==K[3])P.colorMask(Ee,Nd,Wd,Zd),K[0]=Ee,K[1]=Nd,K[2]=Wd,K[3]=Zd;ae=oa.cull_enable;ae!==ha.cull_enable&&(ae?P.enable(2884):P.disable(2884),ha.cull_enable=ae);Ie=oa.cull_face;Ie!==
ha.cull_face&&(P.cullFace(Ie),ha.cull_face=Ie);Hd=oa.frontFace;Hd!==ha.frontFace&&(P.frontFace(Hd),ha.frontFace=Hd);Td=oa.lineWidth;Td!==ha.lineWidth&&(P.lineWidth(Td),ha.lineWidth=Td);Be=oa.polygonOffset_enable;Be!==ha.polygonOffset_enable&&(Be?P.enable(32823):P.disable(32823),ha.polygonOffset_enable=Be);Je=qa[0];cf=qa[1];if(Je!==Jb[0]||cf!==Jb[1])P.polygonOffset(Je,cf),Jb[0]=Je,Jb[1]=cf;af=oa.sample_alpha;af!==ha.sample_alpha&&(af?P.enable(32926):P.disable(32926),ha.sample_alpha=af);Te=oa.sample_enable;
Te!==ha.sample_enable&&(Te?P.enable(32928):P.disable(32928),ha.sample_enable=Te);Me=ub[0];$e=ub[1];if(Me!==Ae[0]||$e!==Ae[1])P.sampleCoverage(Me,$e),Ae[0]=Me,Ae[1]=$e;Xe=oa.stencil_mask;Xe!==ha.stencil_mask&&(P.stencilMask(Xe),ha.stencil_mask=Xe);Ue=ke[0];Ve=ke[1];Ud=ke[2];if(Ue!==we[0]||Ve!==we[1]||Ud!==we[2])P.stencilFunc(Ue,Ve,Ud),we[0]=Ue,we[1]=Ve,we[2]=Ud;Yd=ie[0];We=ie[1];jf=ie[2];nf=ie[3];if(Yd!==ve[0]||We!==ve[1]||jf!==ve[2]||nf!==ve[3])P.stencilOpSeparate(Yd,We,jf,nf),ve[0]=Yd,ve[1]=We,ve[2]=
jf,ve[3]=nf;ff=ue[0];kf=ue[1];lf=ue[2];mf=ue[3];if(ff!==Fd[0]||kf!==Fd[1]||lf!==Fd[2]||mf!==Fd[3])P.stencilOpSeparate(ff,kf,lf,mf),Fd[0]=ff,Fd[1]=kf,Fd[2]=lf,Fd[3]=mf}l=b.viewport;r=l.x|0;m=l.y|0;x="width"in l?l.width|0:R.framebufferWidth-r;B="height"in l?l.height|0:R.framebufferHeight-m;y=R.viewportWidth;R.viewportWidth=x;J=R.viewportHeight;R.viewportHeight=B;P.viewport(r,m,x,B);Xd[0]=r;Xd[1]=m;Xd[2]=x;Xd[3]=B;P.blendColor(0,0,0,1);Q[0]=0;Q[1]=0;Q[2]=0;Q[3]=1;P.enable(3042);ha.blend_enable=!0;P.blendFuncSeparate(770,
771,773,1);Ea[0]=770;Ea[1]=771;Ea[2]=773;Ea[3]=1;P.disable(2929);ha.depth_enable=!1;t=b.viewport;L=t.x|0;h=t.y|0;W="width"in t?t.width|0:R.framebufferWidth-L;N="height"in t?t.height|0:R.framebufferHeight-h;P.scissor(L,h,W,N);ee[0]=L;ee[1]=h;ee[2]=W;ee[3]=N;P.enable(3089);ha.scissor_enable=!0;P.disable(2960);ha.stencil_enable=!1;if(F=ha.profile)la=performance.now(),k.count++;P.useProgram(g.program);H=Ac.angle_instanced_arrays;ca.setVAO(null);A=q.call(this,R,b,0);C=!1;I=null;ia=0;u=!1;na=fa=0;ba=1;
aa=0;ua=5126;ga=T=S=O=0;G(A)?(C=!0,I=V.createStream(34962,A),ua=I.dtype):(I=V.getBuffer(A))?ua=I.dtype:"constant"in A?(ba=2,"number"===typeof A.constant?(S=A.constant,T=ga=O=0):(S=0<A.constant.length?A.constant[0]:0,T=1<A.constant.length?A.constant[1]:0,ga=2<A.constant.length?A.constant[2]:0,O=3<A.constant.length?A.constant[3]:0)):(I=G(A.buffer)?V.createStream(34962,A.buffer):V.getBuffer(A.buffer),ua="type"in A?Vd[A.type]:I.dtype,u=!!A.normalized,na=A.size|0,fa=A.offset|0,aa=A.stride|0,ia=A.divisor|
0);Y=Xa.location;da=Eb[Y];if(1===ba){da.buffer||P.enableVertexAttribArray(Y);ab=na||1;if(da.type!==ua||da.size!==ab||da.buffer!==I||da.normalized!==u||da.offset!==fa||da.stride!==aa)P.bindBuffer(34962,I.buffer),P.vertexAttribPointer(Y,ab,ua,u,aa,fa),da.type=ua,da.size=ab,da.buffer=I,da.normalized=u,da.offset=fa,da.stride=aa;da.divisor!==ia&&(H.vertexAttribDivisorANGLE(Y,ia),da.divisor=ia)}else if(da.buffer&&(P.disableVertexAttribArray(Y),da.buffer=null),da.x!==S||da.y!==T||da.z!==ga||da.w!==O)P.vertexAttrib4f(Y,
S,T,ga,O),da.x=S,da.y=T,da.z=ga,da.w=O;ma=f.call(this,R,b,0);ra=!1;za=null;ta=0;Ha=!1;rb=Ja=0;Hb=1;cb=0;$b=5126;Tb=cc=kd=Sb=0;G(ma)?(ra=!0,za=V.createStream(34962,ma),$b=za.dtype):(za=V.getBuffer(ma))?$b=za.dtype:"constant"in ma?(Hb=2,"number"===typeof ma.constant?(kd=ma.constant,cc=Tb=Sb=0):(kd=0<ma.constant.length?ma.constant[0]:0,cc=1<ma.constant.length?ma.constant[1]:0,Tb=2<ma.constant.length?ma.constant[2]:0,Sb=3<ma.constant.length?ma.constant[3]:0)):(za=G(ma.buffer)?V.createStream(34962,ma.buffer):
V.getBuffer(ma.buffer),$b="type"in ma?Vd[ma.type]:za.dtype,Ha=!!ma.normalized,rb=ma.size|0,Ja=ma.offset|0,cb=ma.stride|0,ta=ma.divisor|0);Mc=yb.location;Ub=Eb[Mc];if(1===Hb){Ub.buffer||P.enableVertexAttribArray(Mc);Pa=rb||1;if(Ub.type!==$b||Ub.size!==Pa||Ub.buffer!==za||Ub.normalized!==Ha||Ub.offset!==Ja||Ub.stride!==cb)P.bindBuffer(34962,za.buffer),P.vertexAttribPointer(Mc,Pa,$b,Ha,cb,Ja),Ub.type=$b,Ub.size=Pa,Ub.buffer=za,Ub.normalized=Ha,Ub.offset=Ja,Ub.stride=cb;Ub.divisor!==ta&&(H.vertexAttribDivisorANGLE(Mc,
ta),Ub.divisor=ta)}else if(Ub.buffer&&(P.disableVertexAttribArray(Mc),Ub.buffer=null),Ub.x!==kd||Ub.y!==cc||Ub.z!==Tb||Ub.w!==Sb)P.vertexAttrib4f(Mc,kd,cc,Tb,Sb),Ub.x=kd,Ub.y=cc,Ub.z=Tb,Ub.w=Sb;Fb=d.call(this,R,b,0);Ib=!1;ib=null;Sa=0;pc=!1;Dc=ac=0;db=1;mc=0;Hc=5126;va=lb=kb=oc=0;G(Fb)?(Ib=!0,ib=V.createStream(34962,Fb),Hc=ib.dtype):(ib=V.getBuffer(Fb))?Hc=ib.dtype:"constant"in Fb?(db=2,"number"===typeof Fb.constant?(kb=Fb.constant,lb=va=oc=0):(kb=0<Fb.constant.length?Fb.constant[0]:0,lb=1<Fb.constant.length?
Fb.constant[1]:0,va=2<Fb.constant.length?Fb.constant[2]:0,oc=3<Fb.constant.length?Fb.constant[3]:0)):(ib=G(Fb.buffer)?V.createStream(34962,Fb.buffer):V.getBuffer(Fb.buffer),Hc="type"in Fb?Vd[Fb.type]:ib.dtype,pc=!!Fb.normalized,Dc=Fb.size|0,ac=Fb.offset|0,mc=Fb.stride|0,Sa=Fb.divisor|0);nb=Cb.location;ya=Eb[nb];if(1===db){ya.buffer||P.enableVertexAttribArray(nb);Wa=Dc||1;if(ya.type!==Hc||ya.size!==Wa||ya.buffer!==ib||ya.normalized!==pc||ya.offset!==ac||ya.stride!==mc)P.bindBuffer(34962,ib.buffer),
P.vertexAttribPointer(nb,Wa,Hc,pc,mc,ac),ya.type=Hc,ya.size=Wa,ya.buffer=ib,ya.normalized=pc,ya.offset=ac,ya.stride=mc;ya.divisor!==Sa&&(H.vertexAttribDivisorANGLE(nb,Sa),ya.divisor=Sa)}else if(ya.buffer&&(P.disableVertexAttribArray(nb),ya.buffer=null),ya.x!==kb||ya.y!==lb||ya.z!==va||ya.w!==oc)P.vertexAttrib4f(nb,kb,lb,va,oc),ya.x=kb,ya.y=lb,ya.z=va,ya.w=oc;bb=D.call(this,R,b,0);Ia=!1;gb=null;Oa=0;xb=!1;Ua=vb=0;wc=1;Kb=0;Lb=5126;Ma=xd=Ca=Vb=0;G(bb)?(Ia=!0,gb=V.createStream(34962,bb),Lb=gb.dtype):
(gb=V.getBuffer(bb))?Lb=gb.dtype:"constant"in bb?(wc=2,"number"===typeof bb.constant?(Ca=bb.constant,xd=Ma=Vb=0):(Ca=0<bb.constant.length?bb.constant[0]:0,xd=1<bb.constant.length?bb.constant[1]:0,Ma=2<bb.constant.length?bb.constant[2]:0,Vb=3<bb.constant.length?bb.constant[3]:0)):(gb=G(bb.buffer)?V.createStream(34962,bb.buffer):V.getBuffer(bb.buffer),Lb="type"in bb?Vd[bb.type]:gb.dtype,xb=!!bb.normalized,Ua=bb.size|0,vb=bb.offset|0,Kb=bb.stride|0,Oa=bb.divisor|0);Ob=Jc.location;hb=Eb[Ob];if(1===wc){hb.buffer||
P.enableVertexAttribArray(Ob);jb=Ua||1;if(hb.type!==Lb||hb.size!==jb||hb.buffer!==gb||hb.normalized!==xb||hb.offset!==vb||hb.stride!==Kb)P.bindBuffer(34962,gb.buffer),P.vertexAttribPointer(Ob,jb,Lb,xb,Kb,vb),hb.type=Lb,hb.size=jb,hb.buffer=gb,hb.normalized=xb,hb.offset=vb,hb.stride=Kb;hb.divisor!==Oa&&(H.vertexAttribDivisorANGLE(Ob,Oa),hb.divisor=Oa)}else if(hb.buffer&&(P.disableVertexAttribArray(Ob),hb.buffer=null),hb.x!==Ca||hb.y!==xd||hb.z!==Ma||hb.w!==Vb)P.vertexAttrib4f(Ob,Ca,xd,Ma,Vb),hb.x=
Ca,hb.y=xd,hb.z=Ma,hb.w=Vb;xa=n.call(this,R,b,0);ec=!1;Da=null;ob=0;pb=!1;$a=Za=0;nc=1;xc=0;tc=5126;Fa=Ec=Mb=Ya=0;G(xa)?(ec=!0,Da=V.createStream(34962,xa),tc=Da.dtype):(Da=V.getBuffer(xa))?tc=Da.dtype:"constant"in xa?(nc=2,"number"===typeof xa.constant?(Mb=xa.constant,Ec=Fa=Ya=0):(Mb=0<xa.constant.length?xa.constant[0]:0,Ec=1<xa.constant.length?xa.constant[1]:0,Fa=2<xa.constant.length?xa.constant[2]:0,Ya=3<xa.constant.length?xa.constant[3]:0)):(Da=G(xa.buffer)?V.createStream(34962,xa.buffer):V.getBuffer(xa.buffer),
tc="type"in xa?Vd[xa.type]:Da.dtype,pb=!!xa.normalized,$a=xa.size|0,Za=xa.offset|0,xc=xa.stride|0,ob=xa.divisor|0);yc=Na.location;Va=Eb[yc];if(1===nc){Va.buffer||P.enableVertexAttribArray(yc);Ba=$a||1;if(Va.type!==tc||Va.size!==Ba||Va.buffer!==Da||Va.normalized!==pb||Va.offset!==Za||Va.stride!==xc)P.bindBuffer(34962,Da.buffer),P.vertexAttribPointer(yc,Ba,tc,pb,xc,Za),Va.type=tc,Va.size=Ba,Va.buffer=Da,Va.normalized=pb,Va.offset=Za,Va.stride=xc;Va.divisor!==ob&&(H.vertexAttribDivisorANGLE(yc,ob),Va.divisor=
ob)}else if(Va.buffer&&(P.disableVertexAttribArray(yc),Va.buffer=null),Va.x!==Mb||Va.y!==Ec||Va.z!==Fa||Va.w!==Ya)P.vertexAttrib4f(yc,Mb,Ec,Fa,Ya),Va.x=Mb,Va.y=Ec,Va.z=Fa,Va.w=Ya;mb=v.call(this,R,b,0);sb=!1;Ab=null;qb=0;uc=!1;Sc=tb=0;rc=1;sd=0;Nc=5126;dc=Yb=dd=cd=0;G(mb)?(sb=!0,Ab=V.createStream(34962,mb),Nc=Ab.dtype):(Ab=V.getBuffer(mb))?Nc=Ab.dtype:"constant"in mb?(rc=2,"number"===typeof mb.constant?(dd=mb.constant,Yb=dc=cd=0):(dd=0<mb.constant.length?mb.constant[0]:0,Yb=1<mb.constant.length?mb.constant[1]:
0,dc=2<mb.constant.length?mb.constant[2]:0,cd=3<mb.constant.length?mb.constant[3]:0)):(Ab=G(mb.buffer)?V.createStream(34962,mb.buffer):V.getBuffer(mb.buffer),Nc="type"in mb?Vd[mb.type]:Ab.dtype,uc=!!mb.normalized,Sc=mb.size|0,tb=mb.offset|0,sd=mb.stride|0,qb=mb.divisor|0);Pb=Ta.location;Ga=Eb[Pb];if(1===rc){Ga.buffer||P.enableVertexAttribArray(Pb);bc=Sc||1;if(Ga.type!==Nc||Ga.size!==bc||Ga.buffer!==Ab||Ga.normalized!==uc||Ga.offset!==tb||Ga.stride!==sd)P.bindBuffer(34962,Ab.buffer),P.vertexAttribPointer(Pb,
bc,Nc,uc,sd,tb),Ga.type=Nc,Ga.size=bc,Ga.buffer=Ab,Ga.normalized=uc,Ga.offset=tb,Ga.stride=sd;Ga.divisor!==qb&&(H.vertexAttribDivisorANGLE(Pb,qb),Ga.divisor=qb)}else if(Ga.buffer&&(P.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==dd||Ga.y!==Yb||Ga.z!==dc||Ga.w!==cd)P.vertexAttrib4f(Pb,dd,Yb,dc,cd),Ga.x=dd,Ga.y=Yb,Ga.z=dc,Ga.w=cd;wb=z.call(this,R,b,0);Bb=!1;Nb=null;Qb=0;fc=!1;Tc=hc=0;Bc=1;Cc=0;Fc=5126;Pc=Uc=ed=Oc=0;G(wb)?(Bb=!0,Nb=V.createStream(34962,wb),Fc=Nb.dtype):(Nb=V.getBuffer(wb))?Fc=
Nb.dtype:"constant"in wb?(Bc=2,"number"===typeof wb.constant?(ed=wb.constant,Uc=Pc=Oc=0):(ed=0<wb.constant.length?wb.constant[0]:0,Uc=1<wb.constant.length?wb.constant[1]:0,Pc=2<wb.constant.length?wb.constant[2]:0,Oc=3<wb.constant.length?wb.constant[3]:0)):(Nb=G(wb.buffer)?V.createStream(34962,wb.buffer):V.getBuffer(wb.buffer),Fc="type"in wb?Vd[wb.type]:Nb.dtype,fc=!!wb.normalized,Tc=wb.size|0,hc=wb.offset|0,Cc=wb.stride|0,Qb=wb.divisor|0);Wb=X.location;Db=Eb[Wb];if(1===Bc){Db.buffer||P.enableVertexAttribArray(Wb);
Qc=Tc||4;if(Db.type!==Fc||Db.size!==Qc||Db.buffer!==Nb||Db.normalized!==fc||Db.offset!==hc||Db.stride!==Cc)P.bindBuffer(34962,Nb.buffer),P.vertexAttribPointer(Wb,Qc,Fc,fc,Cc,hc),Db.type=Fc,Db.size=Qc,Db.buffer=Nb,Db.normalized=fc,Db.offset=hc,Db.stride=Cc;Db.divisor!==Qb&&(H.vertexAttribDivisorANGLE(Wb,Qb),Db.divisor=Qb)}else if(Db.buffer&&(P.disableVertexAttribArray(Wb),Db.buffer=null),Db.x!==ed||Db.y!==Uc||Db.z!==Pc||Db.w!==Oc)P.vertexAttrib4f(Wb,ed,Uc,Pc,Oc),Db.x=ed,Db.y=Uc,Db.z=Pc,Db.w=Oc;Ic=
w.call(this,R,b,0);Vc=!1;gc=null;$c=0;id=!1;vd=qd=0;ad=1;Od=0;Bd=5126;Md=le=Ke=be=0;G(Ic)?(Vc=!0,gc=V.createStream(34962,Ic),Bd=gc.dtype):(gc=V.getBuffer(Ic))?Bd=gc.dtype:"constant"in Ic?(ad=2,"number"===typeof Ic.constant?(Ke=Ic.constant,le=Md=be=0):(Ke=0<Ic.constant.length?Ic.constant[0]:0,le=1<Ic.constant.length?Ic.constant[1]:0,Md=2<Ic.constant.length?Ic.constant[2]:0,be=3<Ic.constant.length?Ic.constant[3]:0)):(gc=G(Ic.buffer)?V.createStream(34962,Ic.buffer):V.getBuffer(Ic.buffer),Bd="type"in
Ic?Vd[Ic.type]:gc.dtype,id=!!Ic.normalized,vd=Ic.size|0,qd=Ic.offset|0,Od=Ic.stride|0,$c=Ic.divisor|0);Kd=Gb.location;ld=Eb[Kd];if(1===ad){ld.buffer||P.enableVertexAttribArray(Kd);Gc=vd||4;if(ld.type!==Bd||ld.size!==Gc||ld.buffer!==gc||ld.normalized!==id||ld.offset!==qd||ld.stride!==Od)P.bindBuffer(34962,gc.buffer),P.vertexAttribPointer(Kd,Gc,Bd,id,Od,qd),ld.type=Bd,ld.size=Gc,ld.buffer=gc,ld.normalized=id,ld.offset=qd,ld.stride=Od;ld.divisor!==$c&&(H.vertexAttribDivisorANGLE(Kd,$c),ld.divisor=$c)}else if(ld.buffer&&
(P.disableVertexAttribArray(Kd),ld.buffer=null),ld.x!==Ke||ld.y!==le||ld.z!==Md||ld.w!==be)P.vertexAttrib4f(Kd,Ke,le,Md,be),ld.x=Ke,ld.y=le,ld.z=Md,ld.w=be;td=p.call(this,R,b,0);md=!1;bd=null;nd=0;Dd=!1;te=Ed=0;xe=1;Ze=0;me=5126;$d=qe=de=fe=0;G(td)?(md=!0,bd=V.createStream(34962,td),me=bd.dtype):(bd=V.getBuffer(td))?me=bd.dtype:"constant"in td?(xe=2,"number"===typeof td.constant?(de=td.constant,qe=$d=fe=0):(de=0<td.constant.length?td.constant[0]:0,qe=1<td.constant.length?td.constant[1]:0,$d=2<td.constant.length?
td.constant[2]:0,fe=3<td.constant.length?td.constant[3]:0)):(bd=G(td.buffer)?V.createStream(34962,td.buffer):V.getBuffer(td.buffer),me="type"in td?Vd[td.type]:bd.dtype,Dd=!!td.normalized,te=td.size|0,Ed=td.offset|0,Ze=td.stride|0,nd=td.divisor|0);ge=ka.location;zc=Eb[ge];if(1===xe){zc.buffer||P.enableVertexAttribArray(ge);Yc=te||1;if(zc.type!==me||zc.size!==Yc||zc.buffer!==bd||zc.normalized!==Dd||zc.offset!==Ed||zc.stride!==Ze)P.bindBuffer(34962,bd.buffer),P.vertexAttribPointer(ge,Yc,me,Dd,Ze,Ed),
zc.type=me,zc.size=Yc,zc.buffer=bd,zc.normalized=Dd,zc.offset=Ed,zc.stride=Ze;zc.divisor!==nd&&(H.vertexAttribDivisorANGLE(ge,nd),zc.divisor=nd)}else if(zc.buffer&&(P.disableVertexAttribArray(ge),zc.buffer=null),zc.x!==de||zc.y!==qe||zc.z!==$d||zc.w!==fe)P.vertexAttrib4f(ge,de,qe,$d,fe),zc.x=de,zc.y=qe,zc.z=$d,zc.w=fe;P.uniform1i(E.location,!1);P.uniform1f(Qa.location,R.pixelRatio);re=e.call(this,R,b,0);P.uniform2f(sa.location,re[0],re[1]);je=b.scale;P.uniform2f(Ka.location,je[0],je[1]);Ld=b.scaleFract;
P.uniform2f(U.location,Ld[0],Ld[1]);Qd=b.translate;P.uniform2f(ea.location,Qd[0],Qd[1]);Rd=b.translateFract;P.uniform2f(pa.location,Rd[0],Rd[1]);P.uniform1f(Z.location,b.opacity);P.uniform1i(wa.location,c.bind());Sd=b.elements;he=null;(he=(Re=G(Sd))?zb.createStream(Sd):zb.getElements(Sd))&&P.bindBuffer(34963,he.buffer.buffer);ze=b.offset;if(ne=b.count)bf=Aa.instances,0<bf?he?H.drawElementsInstancedANGLE(0,ne,he.type,ze<<(he.type-5121>>1),bf):H.drawArraysInstancedANGLE(0,ze,ne,bf):0>bf&&(he?P.drawElements(0,
ne,he.type,ze<<(he.type-5121>>1)):P.drawArrays(0,ze,ne)),ha.dirty=!0,ca.setVAO(null),R.viewportWidth=y,R.viewportHeight=J,F&&(k.cpuTime+=performance.now()-la),C&&V.destroyStream(I),ra&&V.destroyStream(za),Ib&&V.destroyStream(ib),Ia&&V.destroyStream(gb),ec&&V.destroyStream(Da),sb&&V.destroyStream(Ab),Bb&&V.destroyStream(Nb),Vc&&V.destroyStream(gc),md&&V.destroyStream(bd),c.unbind(),Re&&zb.destroyStream(he)},scope:function(a,c,e){var d,g,f,p,q,n,v,t,w,D,z,la,ia,E,K,M,ua,O,S,P,T,Q,X,da,ga,ca,U,ma,ja,
ab,Z,ea,ka,za,ra,qa,pa,Ea,Ta,La,sa,wa,Gb,Eb,Ka,Na,Jc,Pa,ub,Xa,ib,Sa,Qa,Zb,Jb,db,yb,Cb,sc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,Ac,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,Kc,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id,ke,vd,ad,Fd,Bd,Xd,we,ee,Md,Kd,ld,Gc,td,md,bd,nd,Dd,Ed,ie,ue,ve,me,fe,de,qe,$d,ge,zc,Yc,re,je,Ld,Qd,Rd,Sd,he,Ae,ze,ne,bf,Se,Le,se,De,Fe,Ge,He,Ee,Nd,Wd,Zd,ae,Ie,Hd,Td,Be,Je,cf,af,
Te,Me,$e,Xe,Ue,Ve,Ud,Yd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Ne,Ce,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,vf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;d=a.viewport;g=d.x|0;f=d.y|0;p="width"in d?d.width|0:R.framebufferWidth-g;q="height"in d?d.height|0:R.framebufferHeight-f;n=R.viewportWidth;R.viewportWidth=p;v=R.viewportHeight;R.viewportHeight=q;t=Od[0];
Od[0]=g;w=Od[1];Od[1]=f;D=Od[2];Od[2]=p;z=Od[3];Od[3]=q;la=ta[0];ta[0]=0;ia=ta[1];ta[1]=0;E=ta[2];ta[2]=0;K=ta[3];ta[3]=1;M=oa.blend_enable;oa.blend_enable=!0;ua=Ja[0];Ja[0]=770;O=Ja[1];Ja[1]=771;S=Ja[2];Ja[2]=773;P=Ja[3];Ja[3]=1;T=oa.depth_enable;oa.depth_enable=!1;Q=a.viewport;X=Q.x|0;da=Q.y|0;ga="width"in Q?Q.width|0:R.framebufferWidth-X;ca="height"in Q?Q.height|0:R.framebufferHeight-da;U=be[0];be[0]=X;ma=be[1];be[1]=da;ja=be[2];be[2]=ga;ab=be[3];be[3]=ca;Z=oa.scissor_enable;oa.scissor_enable=
!0;ea=oa.stencil_enable;oa.stencil_enable=!1;if(ka=ha.profile)za=performance.now(),k.count++;ra=a.elements;qa=null;qa=(pa=G(ra))?zb.createStream(ra):zb.getElements(ra);Ea=Aa.elements;Aa.elements=qa;Ta=a.offset;La=Aa.offset;Aa.offset=Ta;sa=a.count;wa=Aa.count;Aa.count=sa;Gb=Aa.primitive;Aa.primitive=0;Eb=Y[45];Y[45]=!1;Ka=a.markerTexture;Na=Y[48];Y[48]=Ka;Jc=a.opacity;Pa=Y[10];Y[10]=Jc;ub=m.call(this,R,a,e);Xa=Y[46];Y[46]=ub;ib=Y[47];Y[47]=x;Sa=R.pixelRatio;Qa=Y[34];Y[34]=Sa;Zb=a.scale;Jb=Y[6];Y[6]=
Zb;db=a.scaleFract;yb=Y[7];Y[7]=db;Cb=a.translate;sc=Y[8];Y[8]=Cb;kb=a.translateFract;lb=Y[9];Y[9]=kb;va=y.call(this,R,a,e);nb=!1;ya=null;Wa=0;bb=!1;gb=Ia=0;Oa=1;xb=0;vb=5126;Lb=Kb=wc=Ua=0;G(va)?(nb=!0,ya=V.createStream(34962,va),vb=ya.dtype):(ya=V.getBuffer(va))?vb=ya.dtype:"constant"in va?(Oa=2,"number"===typeof va.constant?(wc=va.constant,Kb=Lb=Ua=0):(wc=0<va.constant.length?va.constant[0]:0,Kb=1<va.constant.length?va.constant[1]:0,Lb=2<va.constant.length?va.constant[2]:0,Ua=3<va.constant.length?
va.constant[3]:0)):(ya=G(va.buffer)?V.createStream(34962,va.buffer):V.getBuffer(va.buffer),vb="type"in va?Vd[va.type]:ya.dtype,bb=!!va.normalized,gb=va.size|0,Ia=va.offset|0,xb=va.stride|0,Wa=va.divisor|0);Vb=h.buffer;h.buffer=ya;Ca=h.divisor;h.divisor=Wa;Ac=h.normalized;h.normalized=bb;Ma=h.offset;h.offset=Ia;Ob=h.size;h.size=gb;hb=h.state;h.state=Oa;jb=h.stride;h.stride=xb;xa=h.type;h.type=vb;ec=h.w;h.w=Ua;Da=h.x;h.x=wc;ob=h.y;h.y=Kb;pb=h.z;h.z=Lb;Za=u.call(this,R,a,e);$a=!1;nc=null;xc=0;tc=!1;
Mb=Ya=0;Ec=1;Fa=0;yc=5126;sb=mb=Ba=Va=0;G(Za)?($a=!0,nc=V.createStream(34962,Za),yc=nc.dtype):(nc=V.getBuffer(Za))?yc=nc.dtype:"constant"in Za?(Ec=2,"number"===typeof Za.constant?(Ba=Za.constant,mb=sb=Va=0):(Ba=0<Za.constant.length?Za.constant[0]:0,mb=1<Za.constant.length?Za.constant[1]:0,sb=2<Za.constant.length?Za.constant[2]:0,Va=3<Za.constant.length?Za.constant[3]:0)):(nc=G(Za.buffer)?V.createStream(34962,Za.buffer):V.getBuffer(Za.buffer),yc="type"in Za?Vd[Za.type]:nc.dtype,tc=!!Za.normalized,
Mb=Za.size|0,Ya=Za.offset|0,Fa=Za.stride|0,xc=Za.divisor|0);Ab=A.buffer;A.buffer=nc;qb=A.divisor;A.divisor=xc;uc=A.normalized;A.normalized=tc;tb=A.offset;A.offset=Ya;Sc=A.size;A.size=Mb;rc=A.state;A.state=Ec;Kc=A.stride;A.stride=Fa;Nc=A.type;A.type=yc;cd=A.w;A.w=Va;dd=A.x;A.x=Ba;Yb=A.y;A.y=mb;dc=A.z;A.z=sb;Pb=aa.call(this,R,a,e);Ga=!1;bc=null;wb=0;Bb=!1;Qb=Nb=0;fc=1;hc=0;Tc=5126;Oc=Fc=Cc=Bc=0;G(Pb)?(Ga=!0,bc=V.createStream(34962,Pb),Tc=bc.dtype):(bc=V.getBuffer(Pb))?Tc=bc.dtype:"constant"in Pb?(fc=
2,"number"===typeof Pb.constant?(Cc=Pb.constant,Fc=Oc=Bc=0):(Cc=0<Pb.constant.length?Pb.constant[0]:0,Fc=1<Pb.constant.length?Pb.constant[1]:0,Oc=2<Pb.constant.length?Pb.constant[2]:0,Bc=3<Pb.constant.length?Pb.constant[3]:0)):(bc=G(Pb.buffer)?V.createStream(34962,Pb.buffer):V.getBuffer(Pb.buffer),Tc="type"in Pb?Vd[Pb.type]:bc.dtype,Bb=!!Pb.normalized,Qb=Pb.size|0,Nb=Pb.offset|0,hc=Pb.stride|0,wb=Pb.divisor|0);ed=C.buffer;C.buffer=bc;Uc=C.divisor;C.divisor=wb;Pc=C.normalized;C.normalized=Bb;Wb=C.offset;
C.offset=Nb;Db=C.size;C.size=Qb;Qc=C.state;C.state=fc;Ic=C.stride;C.stride=hc;Vc=C.type;C.type=Tc;gc=C.w;C.w=Bc;$c=C.x;C.x=Cc;id=C.y;C.y=Fc;ke=C.z;C.z=Oc;vd=b.call(this,R,a,e);ad=!1;Fd=null;Bd=0;Xd=!1;ee=we=0;Md=1;Kd=0;ld=5126;bd=md=td=Gc=0;G(vd)?(ad=!0,Fd=V.createStream(34962,vd),ld=Fd.dtype):(Fd=V.getBuffer(vd))?ld=Fd.dtype:"constant"in vd?(Md=2,"number"===typeof vd.constant?(td=vd.constant,md=bd=Gc=0):(td=0<vd.constant.length?vd.constant[0]:0,md=1<vd.constant.length?vd.constant[1]:0,bd=2<vd.constant.length?
vd.constant[2]:0,Gc=3<vd.constant.length?vd.constant[3]:0)):(Fd=G(vd.buffer)?V.createStream(34962,vd.buffer):V.getBuffer(vd.buffer),ld="type"in vd?Vd[vd.type]:Fd.dtype,Xd=!!vd.normalized,ee=vd.size|0,we=vd.offset|0,Kd=vd.stride|0,Bd=vd.divisor|0);nd=l.buffer;l.buffer=Fd;Dd=l.divisor;l.divisor=Bd;Ed=l.normalized;l.normalized=Xd;ie=l.offset;l.offset=we;ue=l.size;l.size=ee;ve=l.state;l.state=Md;me=l.stride;l.stride=Kd;fe=l.type;l.type=ld;de=l.w;l.w=Gc;qe=l.x;l.x=td;$d=l.y;l.y=md;ge=l.z;l.z=bd;zc=B.call(this,
R,a,e);Yc=!1;re=null;je=0;Ld=!1;Rd=Qd=0;Sd=1;he=0;Ae=5126;Se=bf=ne=ze=0;G(zc)?(Yc=!0,re=V.createStream(34962,zc),Ae=re.dtype):(re=V.getBuffer(zc))?Ae=re.dtype:"constant"in zc?(Sd=2,"number"===typeof zc.constant?(ne=zc.constant,bf=Se=ze=0):(ne=0<zc.constant.length?zc.constant[0]:0,bf=1<zc.constant.length?zc.constant[1]:0,Se=2<zc.constant.length?zc.constant[2]:0,ze=3<zc.constant.length?zc.constant[3]:0)):(re=G(zc.buffer)?V.createStream(34962,zc.buffer):V.getBuffer(zc.buffer),Ae="type"in zc?Vd[zc.type]:
re.dtype,Ld=!!zc.normalized,Rd=zc.size|0,Qd=zc.offset|0,he=zc.stride|0,je=zc.divisor|0);Le=L.buffer;L.buffer=re;se=L.divisor;L.divisor=je;De=L.normalized;L.normalized=Ld;Fe=L.offset;L.offset=Qd;Ge=L.size;L.size=Rd;He=L.state;L.state=Sd;Ee=L.stride;L.stride=he;Nd=L.type;L.type=Ae;Wd=L.w;L.w=ze;Zd=L.x;L.x=ne;ae=L.y;L.y=bf;Ie=L.z;L.z=Se;Hd=W.call(this,R,a,e);Td=!1;Be=null;Je=0;cf=!1;Te=af=0;Me=1;$e=0;Xe=5126;Yd=Ud=Ve=Ue=0;G(Hd)?(Td=!0,Be=V.createStream(34962,Hd),Xe=Be.dtype):(Be=V.getBuffer(Hd))?Xe=
Be.dtype:"constant"in Hd?(Me=2,"number"===typeof Hd.constant?(Ve=Hd.constant,Ud=Yd=Ue=0):(Ve=0<Hd.constant.length?Hd.constant[0]:0,Ud=1<Hd.constant.length?Hd.constant[1]:0,Yd=2<Hd.constant.length?Hd.constant[2]:0,Ue=3<Hd.constant.length?Hd.constant[3]:0)):(Be=G(Hd.buffer)?V.createStream(34962,Hd.buffer):V.getBuffer(Hd.buffer),Xe="type"in Hd?Vd[Hd.type]:Be.dtype,cf=!!Hd.normalized,Te=Hd.size|0,af=Hd.offset|0,$e=Hd.stride|0,Je=Hd.divisor|0);We=F.buffer;F.buffer=Be;jf=F.divisor;F.divisor=Je;nf=F.normalized;
F.normalized=cf;ff=F.offset;F.offset=af;kf=F.size;F.size=Te;lf=F.state;F.state=Me;mf=F.stride;F.stride=$e;rf=F.type;F.type=Xe;of=F.w;F.w=Ue;sf=F.x;F.x=Ve;Cf=F.y;F.y=Ud;Df=F.z;F.z=Yd;Ne=fa.call(this,R,a,e);Ce=!1;pf=null;qf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=vf=yf=0;G(Ne)?(Ce=!0,pf=V.createStream(34962,Ne),xf=pf.dtype):(pf=V.getBuffer(Ne))?xf=pf.dtype:"constant"in Ne?(Ff=2,"number"===typeof Ne.constant?(vf=Ne.constant,zf=Af=yf=0):(vf=0<Ne.constant.length?Ne.constant[0]:0,zf=1<Ne.constant.length?
Ne.constant[1]:0,Af=2<Ne.constant.length?Ne.constant[2]:0,yf=3<Ne.constant.length?Ne.constant[3]:0)):(pf=G(Ne.buffer)?V.createStream(34962,Ne.buffer):V.getBuffer(Ne.buffer),xf="type"in Ne?Vd[Ne.type]:pf.dtype,Ef=!!Ne.normalized,Bf=Ne.size|0,Hf=Ne.offset|0,Gf=Ne.stride|0,qf=Ne.divisor|0);Jf=N.buffer;N.buffer=pf;Kf=N.divisor;N.divisor=qf;Lf=N.normalized;N.normalized=Ef;Mf=N.offset;N.offset=Hf;tf=N.size;N.size=Bf;Rf=N.state;N.state=Ff;If=N.stride;N.stride=Gf;uf=N.type;N.type=xf;dg=N.w;N.w=yf;Sf=N.x;
N.x=vf;Tf=N.y;N.y=zf;qg=N.z;N.z=Af;gf=ba.call(this,R,a,e);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;G(gf)?(df=!0,Nf=V.createStream(34962,gf),Wf=Nf.dtype):(Nf=V.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=G(gf.buffer)?V.createStream(34962,gf.buffer):
V.getBuffer(gf.buffer),Wf="type"in gf?Vd[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|0,ig=gf.stride|0,Of=gf.divisor|0);jg=I.buffer;I.buffer=Nf;rg=I.divisor;I.divisor=Of;sg=I.normalized;I.normalized=eg;tg=I.offset;I.offset=fg;ug=I.size;I.size=gg;vg=I.state;I.state=hg;wg=I.stride;I.stride=ig;xg=I.type;I.type=Wf;yg=I.w;I.w=Uf;zg=I.x;I.x=Xf;Ag=I.y;I.y=Yf;Bg=I.z;I.z=Zf;hf=r.call(this,R,a,e);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;G(hf)?(ef=!0,Pf=V.createStream(34962,
hf),$f=Pf.dtype):(Pf=V.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=G(hf.buffer)?V.createStream(34962,hf.buffer):V.getBuffer(hf.buffer),$f="type"in hf?Vd[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=J.buffer;J.buffer=
Pf;Cg=J.divisor;J.divisor=Qf;Dg=J.normalized;J.normalized=kg;Eg=J.offset;J.offset=lg;Fg=J.size;J.size=mg;Gg=J.state;J.state=ng;Hg=J.stride;J.stride=og;Ig=J.type;J.type=$f;Jg=J.w;J.w=Vf;Kg=J.x;J.x=ag;Lg=J.y;J.y=bg;Mg=J.z;J.z=cg;Ng=Ha.vert;Ha.vert=59;Og=Ha.frag;Ha.frag=58;ha.dirty=!0;c(R,a,e);R.viewportWidth=n;R.viewportHeight=v;Od[0]=t;Od[1]=w;Od[2]=D;Od[3]=z;ta[0]=la;ta[1]=ia;ta[2]=E;ta[3]=K;oa.blend_enable=M;Ja[0]=ua;Ja[1]=O;Ja[2]=S;Ja[3]=P;oa.depth_enable=T;be[0]=U;be[1]=ma;be[2]=ja;be[3]=ab;oa.scissor_enable=
Z;oa.stencil_enable=ea;ka&&(k.cpuTime+=performance.now()-za);pa&&zb.destroyStream(qa);Aa.elements=Ea;Aa.offset=La;Aa.count=wa;Aa.primitive=Gb;Y[45]=Eb;Y[48]=Na;Y[10]=Pa;Y[46]=Xa;Y[47]=ib;Y[34]=Qa;Y[6]=Jb;Y[7]=yb;Y[8]=sc;Y[9]=lb;nb&&V.destroyStream(ya);h.buffer=Vb;h.divisor=Ca;h.normalized=Ac;h.offset=Ma;h.size=Ob;h.state=hb;h.stride=jb;h.type=xa;h.w=ec;h.x=Da;h.y=ob;h.z=pb;$a&&V.destroyStream(nc);A.buffer=Ab;A.divisor=qb;A.normalized=uc;A.offset=tb;A.size=Sc;A.state=rc;A.stride=Kc;A.type=Nc;A.w=cd;
A.x=dd;A.y=Yb;A.z=dc;Ga&&V.destroyStream(bc);C.buffer=ed;C.divisor=Uc;C.normalized=Pc;C.offset=Wb;C.size=Db;C.state=Qc;C.stride=Ic;C.type=Vc;C.w=gc;C.x=$c;C.y=id;C.z=ke;ad&&V.destroyStream(Fd);l.buffer=nd;l.divisor=Dd;l.normalized=Ed;l.offset=ie;l.size=ue;l.state=ve;l.stride=me;l.type=fe;l.w=de;l.x=qe;l.y=$d;l.z=ge;Yc&&V.destroyStream(re);L.buffer=Le;L.divisor=se;L.normalized=De;L.offset=Fe;L.size=Ge;L.state=He;L.stride=Ee;L.type=Nd;L.w=Wd;L.x=Zd;L.y=ae;L.z=Ie;Td&&V.destroyStream(Be);F.buffer=We;
F.divisor=jf;F.normalized=nf;F.offset=ff;F.size=kf;F.state=lf;F.stride=mf;F.type=rf;F.w=of;F.x=sf;F.y=Cf;F.z=Df;Ce&&V.destroyStream(pf);N.buffer=Jf;N.divisor=Kf;N.normalized=Lf;N.offset=Mf;N.size=tf;N.state=Rf;N.stride=If;N.type=uf;N.w=dg;N.x=Sf;N.y=Tf;N.z=qg;df&&V.destroyStream(Nf);I.buffer=jg;I.divisor=rg;I.normalized=sg;I.offset=tg;I.size=ug;I.state=vg;I.stride=wg;I.type=xg;I.w=yg;I.x=zg;I.y=Ag;I.z=Bg;ef&&V.destroyStream(Pf);J.buffer=pg;J.divisor=Cg;J.normalized=Dg;J.offset=Eg;J.size=Fg;J.state=
Gg;J.stride=Hg;J.type=Ig;J.w=Jg;J.x=Kg;J.y=Lg;J.z=Mg;Ha.vert=Ng;Ha.frag=Og;ha.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,k,g,q,f,d,D,n,v,z,w,p,e,c,m,x,y,h,u,A,aa,C,b,l,B,L,W,F,fa,N,ba,I,r,J,la,ia,ua,ab,ma,za){var da,ga,O,T,ra,S,Gb,Ta,X,E,ka,Z,sa,wa,Qa,Ka,U,Na,ea,pa,Xa,Cb,yb,Jc,Eb,V,R,ha,Aa,zb,Ac,Kc,P,G,oa,Ha,Y,ca,ta,Q,M;da=a.attributes;ga=a.buffer;O=a.context;T=a.current;ra=a.draw;
S=a.elements;Gb=a.extensions;Ta=a.framebuffer;X=a.gl;E=a.isBufferArgs;ka=a.next;Z=a.shader;sa=a.uniforms;wa=a.vao;Qa=ka.blend_color;Ka=T.blend_color;U=ka.blend_equation;Na=T.blend_equation;ea=ka.blend_func;pa=T.blend_func;Xa=ka.colorMask;Cb=T.colorMask;yb=ka.depth_range;Jc=T.depth_range;Eb=ka.polygonOffset_offset;V=T.polygonOffset_offset;R=ka.sample_coverage;ha=T.sample_coverage;Aa=ka.scissor_box;zb=T.scissor_box;Ac=ka.stencil_func;Kc=T.stencil_func;P=ka.stencil_opBack;G=T.stencil_opBack;oa=ka.stencil_opFront;
Ha=T.stencil_opFront;Y=ka.viewport;ca=T.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Q={offset:4,stride:8};M={offset:0,stride:8};return{batch:function(a,c){var e,d,g,f,m,p,q,n,x,y,v,t,w;e=Ta.next;e!==Ta.cur&&(e?X.bindFramebuffer(36160,e.framebuffer):X.bindFramebuffer(36160,null),Ta.cur=e);if(T.dirty){var D,z,Y,Z,ea,sa,Qa,Jd,Oe,Ye,Pe,Gd,ye,oe,pe,ce,Pd,wd,od,Cd,fd,zd,Wc,Id,ud,rd,Xc,eb,jd,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc;D=ka.dither;D!==T.dither&&
(D?X.enable(3024):X.disable(3024),T.dither=D);z=U[0];Y=U[1];if(z!==Na[0]||Y!==Na[1])X.blendEquationSeparate(z,Y),Na[0]=z,Na[1]=Y;Z=ka.depth_func;Z!==T.depth_func&&(X.depthFunc(Z),T.depth_func=Z);ea=yb[0];sa=yb[1];if(ea!==Jc[0]||sa!==Jc[1])X.depthRange(ea,sa),Jc[0]=ea,Jc[1]=sa;Qa=ka.depth_mask;Qa!==T.depth_mask&&(X.depthMask(Qa),T.depth_mask=Qa);Jd=Xa[0];Oe=Xa[1];Ye=Xa[2];Pe=Xa[3];if(Jd!==Cb[0]||Oe!==Cb[1]||Ye!==Cb[2]||Pe!==Cb[3])X.colorMask(Jd,Oe,Ye,Pe),Cb[0]=Jd,Cb[1]=Oe,Cb[2]=Ye,Cb[3]=Pe;Gd=ka.cull_enable;
Gd!==T.cull_enable&&(Gd?X.enable(2884):X.disable(2884),T.cull_enable=Gd);ye=ka.cull_face;ye!==T.cull_face&&(X.cullFace(ye),T.cull_face=ye);oe=ka.frontFace;oe!==T.frontFace&&(X.frontFace(oe),T.frontFace=oe);pe=ka.lineWidth;pe!==T.lineWidth&&(X.lineWidth(pe),T.lineWidth=pe);ce=ka.polygonOffset_enable;ce!==T.polygonOffset_enable&&(ce?X.enable(32823):X.disable(32823),T.polygonOffset_enable=ce);Pd=Eb[0];wd=Eb[1];if(Pd!==V[0]||wd!==V[1])X.polygonOffset(Pd,wd),V[0]=Pd,V[1]=wd;od=ka.sample_alpha;od!==T.sample_alpha&&
(od?X.enable(32926):X.disable(32926),T.sample_alpha=od);Cd=ka.sample_enable;Cd!==T.sample_enable&&(Cd?X.enable(32928):X.disable(32928),T.sample_enable=Cd);fd=R[0];zd=R[1];if(fd!==ha[0]||zd!==ha[1])X.sampleCoverage(fd,zd),ha[0]=fd,ha[1]=zd;Wc=ka.stencil_mask;Wc!==T.stencil_mask&&(X.stencilMask(Wc),T.stencil_mask=Wc);Id=Ac[0];ud=Ac[1];rd=Ac[2];if(Id!==Kc[0]||ud!==Kc[1]||rd!==Kc[2])X.stencilFunc(Id,ud,rd),Kc[0]=Id,Kc[1]=ud,Kc[2]=rd;Xc=oa[0];eb=oa[1];jd=oa[2];Rb=oa[3];if(Xc!==Ha[0]||eb!==Ha[1]||jd!==
Ha[2]||Rb!==Ha[3])X.stencilOpSeparate(Xc,eb,jd,Rb),Ha[0]=Xc,Ha[1]=eb,Ha[2]=jd,Ha[3]=Rb;vc=P[0];fb=P[1];gd=P[2];kc=P[3];if(vc!==G[0]||fb!==G[1]||gd!==G[2]||kc!==G[3])X.stencilOpSeparate(vc,fb,gd,kc),G[0]=vc,G[1]=fb,G[2]=gd,G[3]=kc;qc=ka.scissor_enable;qc!==T.scissor_enable&&(qc?X.enable(3089):X.disable(3089),T.scissor_enable=qc);yd=Aa[0];pd=Aa[1];Lc=Aa[2];jc=Aa[3];if(yd!==zb[0]||pd!==zb[1]||Lc!==zb[2]||jc!==zb[3])X.scissor(yd,pd,Lc,jc),zb[0]=yd,zb[1]=pd,zb[2]=Lc,zb[3]=jc}d=this.viewport;g=d.x|0;f=
d.y|0;m="width"in d?d.width|0:O.framebufferWidth-g;p="height"in d?d.height|0:O.framebufferHeight-f;q=O.viewportWidth;O.viewportWidth=m;n=O.viewportHeight;O.viewportHeight=p;X.viewport(g,f,m,p);ca[0]=g;ca[1]=f;ca[2]=m;ca[3]=p;X.blendColor(0,0,0,1);Ka[0]=0;Ka[1]=0;Ka[2]=0;Ka[3]=1;X.enable(3042);T.blend_enable=!0;X.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;X.disable(2929);T.depth_enable=!1;X.disable(2960);T.stencil_enable=!1;if(x=T.profile)y=performance.now(),k.count+=c;
X.useProgram(h.program);v=Gb.angle_instanced_arrays;var Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb;wa.setVAO(null);M.buffer=this.sizeBuffer;Zc=!1;hd=null;ic=0;Rc=!1;Ra=Xb=0;Ad=1;lc=0;rb=5126;Sb=$b=cb=Hb=0;E(M)?(Zc=!0,hd=ga.createStream(34962,M),rb=hd.dtype):(hd=ga.getBuffer(M))?rb=hd.dtype:"constant"in M?(Ad=2,"number"===typeof M.constant?
(cb=M.constant,$b=Sb=Hb=0):(cb=0<M.constant.length?M.constant[0]:0,$b=1<M.constant.length?M.constant[1]:0,Sb=2<M.constant.length?M.constant[2]:0,Hb=3<M.constant.length?M.constant[3]:0)):(hd=E(M.buffer)?ga.createStream(34962,M.buffer):ga.getBuffer(M.buffer),rb="type"in M?ta[M.type]:hd.dtype,Rc=!!M.normalized,Ra=M.size|0,Xb=M.offset|0,lc=M.stride|0,ic=M.divisor|0);kd=za.location;cc=da[kd];if(1===Ad){cc.buffer||X.enableVertexAttribArray(kd);Tb=Ra||1;if(cc.type!==rb||cc.size!==Tb||cc.buffer!==hd||cc.normalized!==
Rc||cc.offset!==Xb||cc.stride!==lc)X.bindBuffer(34962,hd.buffer),X.vertexAttribPointer(kd,Tb,rb,Rc,lc,Xb),cc.type=rb,cc.size=Tb,cc.buffer=hd,cc.normalized=Rc,cc.offset=Xb,cc.stride=lc;cc.divisor!==ic&&(v.vertexAttribDivisorANGLE(kd,ic),cc.divisor=ic)}else if(cc.buffer&&(X.disableVertexAttribArray(kd),cc.buffer=null),cc.x!==cb||cc.y!==$b||cc.z!==Sb||cc.w!==Hb)X.vertexAttrib4f(kd,cb,$b,Sb,Hb),cc.x=cb,cc.y=$b,cc.z=Sb,cc.w=Hb;Q.buffer=this.sizeBuffer;Mc=!1;Ub=null;Pa=0;Fb=!1;ib=Ib=0;Sa=1;pc=0;ac=5126;
Hc=mc=db=Dc=0;E(Q)?(Mc=!0,Ub=ga.createStream(34962,Q),ac=Ub.dtype):(Ub=ga.getBuffer(Q))?ac=Ub.dtype:"constant"in Q?(Sa=2,"number"===typeof Q.constant?(db=Q.constant,mc=Hc=Dc=0):(db=0<Q.constant.length?Q.constant[0]:0,mc=1<Q.constant.length?Q.constant[1]:0,Hc=2<Q.constant.length?Q.constant[2]:0,Dc=3<Q.constant.length?Q.constant[3]:0)):(Ub=E(Q.buffer)?ga.createStream(34962,Q.buffer):ga.getBuffer(Q.buffer),ac="type"in Q?ta[Q.type]:Ub.dtype,Fb=!!Q.normalized,ib=Q.size|0,Ib=Q.offset|0,pc=Q.stride|0,Pa=
Q.divisor|0);oc=N.location;kb=da[oc];if(1===Sa){kb.buffer||X.enableVertexAttribArray(oc);lb=ib||1;if(kb.type!==ac||kb.size!==lb||kb.buffer!==Ub||kb.normalized!==Fb||kb.offset!==Ib||kb.stride!==pc)X.bindBuffer(34962,Ub.buffer),X.vertexAttribPointer(oc,lb,ac,Fb,pc,Ib),kb.type=ac,kb.size=lb,kb.buffer=Ub,kb.normalized=Fb,kb.offset=Ib,kb.stride=pc;kb.divisor!==Pa&&(v.vertexAttribDivisorANGLE(oc,Pa),kb.divisor=Pa)}else if(kb.buffer&&(X.disableVertexAttribArray(oc),kb.buffer=null),kb.x!==db||kb.y!==mc||
kb.z!==Hc||kb.w!==Dc)X.vertexAttrib4f(oc,db,mc,Hc,Dc),kb.x=db,kb.y=mc,kb.z=Hc,kb.w=Dc;va=this.charBuffer;nb=!1;ya=null;Wa=0;bb=!1;gb=Ia=0;Oa=1;xb=0;vb=5126;Lb=Kb=wc=Ua=0;E(va)?(nb=!0,ya=ga.createStream(34962,va),vb=ya.dtype):(ya=ga.getBuffer(va))?vb=ya.dtype:"constant"in va?(Oa=2,"number"===typeof va.constant?(wc=va.constant,Kb=Lb=Ua=0):(wc=0<va.constant.length?va.constant[0]:0,Kb=1<va.constant.length?va.constant[1]:0,Lb=2<va.constant.length?va.constant[2]:0,Ua=3<va.constant.length?va.constant[3]:
0)):(ya=E(va.buffer)?ga.createStream(34962,va.buffer):ga.getBuffer(va.buffer),vb="type"in va?ta[va.type]:ya.dtype,bb=!!va.normalized,gb=va.size|0,Ia=va.offset|0,xb=va.stride|0,Wa=va.divisor|0);Vb=fa.location;Ca=da[Vb];if(1===Oa){Ca.buffer||X.enableVertexAttribArray(Vb);xd=gb||1;if(Ca.type!==vb||Ca.size!==xd||Ca.buffer!==ya||Ca.normalized!==bb||Ca.offset!==Ia||Ca.stride!==xb)X.bindBuffer(34962,ya.buffer),X.vertexAttribPointer(Vb,xd,vb,bb,xb,Ia),Ca.type=vb,Ca.size=xd,Ca.buffer=ya,Ca.normalized=bb,Ca.offset=
Ia,Ca.stride=xb;Ca.divisor!==Wa&&(v.vertexAttribDivisorANGLE(Vb,Wa),Ca.divisor=Wa)}else if(Ca.buffer&&(X.disableVertexAttribArray(Vb),Ca.buffer=null),Ca.x!==wc||Ca.y!==Kb||Ca.z!==Lb||Ca.w!==Ua)X.vertexAttrib4f(Vb,wc,Kb,Lb,Ua),Ca.x=wc,Ca.y=Kb,Ca.z=Lb,Ca.w=Ua;Ma=this.position;Ob=!1;hb=null;jb=0;xa=!1;Da=ec=0;ob=1;pb=0;Za=5126;tc=xc=nc=$a=0;E(Ma)?(Ob=!0,hb=ga.createStream(34962,Ma),Za=hb.dtype):(hb=ga.getBuffer(Ma))?Za=hb.dtype:"constant"in Ma?(ob=2,"number"===typeof Ma.constant?(nc=Ma.constant,xc=tc=
$a=0):(nc=0<Ma.constant.length?Ma.constant[0]:0,xc=1<Ma.constant.length?Ma.constant[1]:0,tc=2<Ma.constant.length?Ma.constant[2]:0,$a=3<Ma.constant.length?Ma.constant[3]:0)):(hb=E(Ma.buffer)?ga.createStream(34962,Ma.buffer):ga.getBuffer(Ma.buffer),Za="type"in Ma?ta[Ma.type]:hb.dtype,xa=!!Ma.normalized,Da=Ma.size|0,ec=Ma.offset|0,pb=Ma.stride|0,jb=Ma.divisor|0);Ya=la.location;Mb=da[Ya];if(1===ob){Mb.buffer||X.enableVertexAttribArray(Ya);Ec=Da||2;if(Mb.type!==Za||Mb.size!==Ec||Mb.buffer!==hb||Mb.normalized!==
xa||Mb.offset!==ec||Mb.stride!==pb)X.bindBuffer(34962,hb.buffer),X.vertexAttribPointer(Ya,Ec,Za,xa,pb,ec),Mb.type=Za,Mb.size=Ec,Mb.buffer=hb,Mb.normalized=xa,Mb.offset=ec,Mb.stride=pb;Mb.divisor!==jb&&(v.vertexAttribDivisorANGLE(Ya,jb),Mb.divisor=jb)}else if(Mb.buffer&&(X.disableVertexAttribArray(Ya),Mb.buffer=null),Mb.x!==nc||Mb.y!==xc||Mb.z!==tc||Mb.w!==$a)X.vertexAttrib4f(Ya,nc,xc,tc,$a),Mb.x=nc,Mb.y=xc,Mb.z=tc,Mb.w=$a;Fa=this.viewportArray;X.uniform4f(ma.location,Fa[0],Fa[1],Fa[2],Fa[3]);yc=this.scale;
X.uniform2f(ua.location,yc[0],yc[1]);Va=this.translate;X.uniform2f(ab.location,Va[0],Va[1]);(Ba=ra.elements)?X.bindBuffer(34963,Ba.buffer.buffer):wa.currentVAO&&(Ba=S.getElements(wa.currentVAO.elements))&&X.bindBuffer(34963,Ba.buffer.buffer);mb=ra.instances;for(t=0;t<c;++t){w=a[t];var sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c,id;sb=u.call(this,O,w,t);t&&Ab===sb||(Ab=sb,X.uniform1f(ba.location,sb));qb=A.call(this,O,w,t);t&&uc===qb||
(uc=qb,X.uniform1f(r.location,qb));tb=w.align;t&&Sc===tb||(Sc=tb,X.uniform1f(l.location,tb));rc=w.baseline;t&&sd===rc||(sd=rc,X.uniform1f(F.location,rc));Nc=w.color;cd=Nc[0];Yb=Nc[1];Pb=Nc[2];bc=Nc[3];t&&dd===cd&&dc===Yb&&Ga===Pb&&wb===bc||(dd=cd,dc=Yb,Ga=Pb,wb=bc,X.uniform4f(I.location,cd,Yb,Pb,bc));Bb=aa.call(this,O,w,t);Nb=Bb[0];fc=Bb[1];t&&Qb===Nb&&hc===fc||(Qb=Nb,hc=fc,X.uniform2f(W.location,Nb,fc));Tc=C.call(this,O,w,t);Bc=Tc[0];Fc=Tc[1];t&&Cc===Bc&&Oc===Fc||(Cc=Bc,Oc=Fc,X.uniform2f(L.location,
Bc,Fc));ed=w.positionOffset;Uc=ed[0];Wb=ed[1];t&&Pc===Uc&&Db===Wb||(Pc=Uc,Db=Wb,X.uniform2f(ia.location,Uc,Wb));Qc=w.opacity;t&&Ic===Qc||(Ic=Qc,X.uniform1f(J.location,Qc));(Vc=b.call(this,O,w,t))&&"framebuffer"===Vc._reglType&&(Vc=Vc.color[0]);gc=Vc._texture;X.uniform1i(B.location,gc.bind());$c=w.offset;if(id=w.count)0<mb?Ba?v.drawElementsInstancedANGLE(0,id,Ba.type,$c<<(Ba.type-5121>>1),mb):v.drawArraysInstancedANGLE(0,$c,id,mb):0>mb&&(Ba?X.drawElements(0,id,Ba.type,$c<<(Ba.type-5121>>1)):X.drawArrays(0,
$c,id)),gc.unbind()}Zc&&ga.destroyStream(hd);Mc&&ga.destroyStream(Ub);nb&&ga.destroyStream(ya);Ob&&ga.destroyStream(hb);T.dirty=!0;wa.setVAO(null);O.viewportWidth=q;O.viewportHeight=n;x&&(k.cpuTime+=performance.now()-y)},draw:function(b){var a,c,e,m,p,x,v,y,t,w,z,h,H,A,C,u,na,aa,Y,Z,ea,sa,Qa,Ye,Pe,Gd,ye,oe,pe,ce,Pd,wd,od,Cd,fd,zd,Wc,Id,ud,rd,Xc,eb,jd,Rb,vc,fb,gd,kc,qc,yd,pd,Lc,jc,Zc,hd,ic,Rc,Xb,Ra,Ad,lc,rb,Hb,cb,$b,Sb,kd,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,lb,va,nb,ya,Wa,bb,Ia,gb;a=
Ta.next;a!==Ta.cur&&(a?X.bindFramebuffer(36160,a.framebuffer):X.bindFramebuffer(36160,null),Ta.cur=a);if(T.dirty){var Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc;Oa=ka.dither;Oa!==T.dither&&(Oa?X.enable(3024):X.disable(3024),T.dither=Oa);xb=U[0];vb=U[1];if(xb!==Na[0]||vb!==Na[1])X.blendEquationSeparate(xb,vb),Na[0]=xb,Na[1]=vb;Ua=ka.depth_func;Ua!==T.depth_func&&(X.depthFunc(Ua),T.depth_func=Ua);wc=yb[0];Kb=yb[1];if(wc!==Jc[0]||
Kb!==Jc[1])X.depthRange(wc,Kb),Jc[0]=wc,Jc[1]=Kb;Lb=ka.depth_mask;Lb!==T.depth_mask&&(X.depthMask(Lb),T.depth_mask=Lb);Vb=Xa[0];Ca=Xa[1];xd=Xa[2];Ma=Xa[3];if(Vb!==Cb[0]||Ca!==Cb[1]||xd!==Cb[2]||Ma!==Cb[3])X.colorMask(Vb,Ca,xd,Ma),Cb[0]=Vb,Cb[1]=Ca,Cb[2]=xd,Cb[3]=Ma;Ob=ka.cull_enable;Ob!==T.cull_enable&&(Ob?X.enable(2884):X.disable(2884),T.cull_enable=Ob);hb=ka.cull_face;hb!==T.cull_face&&(X.cullFace(hb),T.cull_face=hb);jb=ka.frontFace;jb!==T.frontFace&&(X.frontFace(jb),T.frontFace=jb);xa=ka.lineWidth;
xa!==T.lineWidth&&(X.lineWidth(xa),T.lineWidth=xa);ec=ka.polygonOffset_enable;ec!==T.polygonOffset_enable&&(ec?X.enable(32823):X.disable(32823),T.polygonOffset_enable=ec);Da=Eb[0];ob=Eb[1];if(Da!==V[0]||ob!==V[1])X.polygonOffset(Da,ob),V[0]=Da,V[1]=ob;pb=ka.sample_alpha;pb!==T.sample_alpha&&(pb?X.enable(32926):X.disable(32926),T.sample_alpha=pb);Za=ka.sample_enable;Za!==T.sample_enable&&(Za?X.enable(32928):X.disable(32928),T.sample_enable=Za);$a=R[0];nc=R[1];if($a!==ha[0]||nc!==ha[1])X.sampleCoverage($a,
nc),ha[0]=$a,ha[1]=nc;xc=ka.stencil_mask;xc!==T.stencil_mask&&(X.stencilMask(xc),T.stencil_mask=xc);tc=Ac[0];Ya=Ac[1];Mb=Ac[2];if(tc!==Kc[0]||Ya!==Kc[1]||Mb!==Kc[2])X.stencilFunc(tc,Ya,Mb),Kc[0]=tc,Kc[1]=Ya,Kc[2]=Mb;Ec=oa[0];Fa=oa[1];yc=oa[2];Va=oa[3];if(Ec!==Ha[0]||Fa!==Ha[1]||yc!==Ha[2]||Va!==Ha[3])X.stencilOpSeparate(Ec,Fa,yc,Va),Ha[0]=Ec,Ha[1]=Fa,Ha[2]=yc,Ha[3]=Va;Ba=P[0];mb=P[1];sb=P[2];Ab=P[3];if(Ba!==G[0]||mb!==G[1]||sb!==G[2]||Ab!==G[3])X.stencilOpSeparate(Ba,mb,sb,Ab),G[0]=Ba,G[1]=mb,G[2]=
sb,G[3]=Ab;qb=ka.scissor_enable;qb!==T.scissor_enable&&(qb?X.enable(3089):X.disable(3089),T.scissor_enable=qb);uc=Aa[0];tb=Aa[1];Sc=Aa[2];rc=Aa[3];if(uc!==zb[0]||tb!==zb[1]||Sc!==zb[2]||rc!==zb[3])X.scissor(uc,tb,Sc,rc),zb[0]=uc,zb[1]=tb,zb[2]=Sc,zb[3]=rc}c=this.viewport;e=c.x|0;m=c.y|0;p="width"in c?c.width|0:O.framebufferWidth-e;x="height"in c?c.height|0:O.framebufferHeight-m;v=O.viewportWidth;O.viewportWidth=p;y=O.viewportHeight;O.viewportHeight=x;X.viewport(e,m,p,x);ca[0]=e;ca[1]=m;ca[2]=p;ca[3]=
x;X.blendColor(0,0,0,1);Ka[0]=0;Ka[1]=0;Ka[2]=0;Ka[3]=1;X.enable(3042);T.blend_enable=!0;X.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;X.disable(2929);T.depth_enable=!1;X.disable(2960);T.stencil_enable=!1;if(t=T.profile)w=performance.now(),k.count++;X.useProgram(g.program);z=Gb.angle_instanced_arrays;wa.setVAO(null);M.buffer=this.sizeBuffer;h=!1;H=null;A=0;C=!1;na=u=0;aa=1;Y=0;Z=5126;Ye=Qa=sa=ea=0;E(M)?(h=!0,H=ga.createStream(34962,M),Z=H.dtype):(H=ga.getBuffer(M))?Z=H.dtype:
"constant"in M?(aa=2,"number"===typeof M.constant?(sa=M.constant,Qa=Ye=ea=0):(sa=0<M.constant.length?M.constant[0]:0,Qa=1<M.constant.length?M.constant[1]:0,Ye=2<M.constant.length?M.constant[2]:0,ea=3<M.constant.length?M.constant[3]:0)):(H=E(M.buffer)?ga.createStream(34962,M.buffer):ga.getBuffer(M.buffer),Z="type"in M?ta[M.type]:H.dtype,C=!!M.normalized,na=M.size|0,u=M.offset|0,Y=M.stride|0,A=M.divisor|0);Pe=za.location;Gd=da[Pe];if(1===aa){Gd.buffer||X.enableVertexAttribArray(Pe);ye=na||1;if(Gd.type!==
Z||Gd.size!==ye||Gd.buffer!==H||Gd.normalized!==C||Gd.offset!==u||Gd.stride!==Y)X.bindBuffer(34962,H.buffer),X.vertexAttribPointer(Pe,ye,Z,C,Y,u),Gd.type=Z,Gd.size=ye,Gd.buffer=H,Gd.normalized=C,Gd.offset=u,Gd.stride=Y;Gd.divisor!==A&&(z.vertexAttribDivisorANGLE(Pe,A),Gd.divisor=A)}else if(Gd.buffer&&(X.disableVertexAttribArray(Pe),Gd.buffer=null),Gd.x!==sa||Gd.y!==Qa||Gd.z!==Ye||Gd.w!==ea)X.vertexAttrib4f(Pe,sa,Qa,Ye,ea),Gd.x=sa,Gd.y=Qa,Gd.z=Ye,Gd.w=ea;Q.buffer=this.sizeBuffer;oe=!1;pe=null;ce=0;
Pd=!1;od=wd=0;Cd=1;fd=0;zd=5126;rd=ud=Id=Wc=0;E(Q)?(oe=!0,pe=ga.createStream(34962,Q),zd=pe.dtype):(pe=ga.getBuffer(Q))?zd=pe.dtype:"constant"in Q?(Cd=2,"number"===typeof Q.constant?(Id=Q.constant,ud=rd=Wc=0):(Id=0<Q.constant.length?Q.constant[0]:0,ud=1<Q.constant.length?Q.constant[1]:0,rd=2<Q.constant.length?Q.constant[2]:0,Wc=3<Q.constant.length?Q.constant[3]:0)):(pe=E(Q.buffer)?ga.createStream(34962,Q.buffer):ga.getBuffer(Q.buffer),zd="type"in Q?ta[Q.type]:pe.dtype,Pd=!!Q.normalized,od=Q.size|
0,wd=Q.offset|0,fd=Q.stride|0,ce=Q.divisor|0);Xc=N.location;eb=da[Xc];if(1===Cd){eb.buffer||X.enableVertexAttribArray(Xc);jd=od||1;if(eb.type!==zd||eb.size!==jd||eb.buffer!==pe||eb.normalized!==Pd||eb.offset!==wd||eb.stride!==fd)X.bindBuffer(34962,pe.buffer),X.vertexAttribPointer(Xc,jd,zd,Pd,fd,wd),eb.type=zd,eb.size=jd,eb.buffer=pe,eb.normalized=Pd,eb.offset=wd,eb.stride=fd;eb.divisor!==ce&&(z.vertexAttribDivisorANGLE(Xc,ce),eb.divisor=ce)}else if(eb.buffer&&(X.disableVertexAttribArray(Xc),eb.buffer=
null),eb.x!==Id||eb.y!==ud||eb.z!==rd||eb.w!==Wc)X.vertexAttrib4f(Xc,Id,ud,rd,Wc),eb.x=Id,eb.y=ud,eb.z=rd,eb.w=Wc;Rb=this.charBuffer;vc=!1;fb=null;gd=0;kc=!1;yd=qc=0;pd=1;Lc=0;jc=5126;Rc=ic=hd=Zc=0;E(Rb)?(vc=!0,fb=ga.createStream(34962,Rb),jc=fb.dtype):(fb=ga.getBuffer(Rb))?jc=fb.dtype:"constant"in Rb?(pd=2,"number"===typeof Rb.constant?(hd=Rb.constant,ic=Rc=Zc=0):(hd=0<Rb.constant.length?Rb.constant[0]:0,ic=1<Rb.constant.length?Rb.constant[1]:0,Rc=2<Rb.constant.length?Rb.constant[2]:0,Zc=3<Rb.constant.length?
Rb.constant[3]:0)):(fb=E(Rb.buffer)?ga.createStream(34962,Rb.buffer):ga.getBuffer(Rb.buffer),jc="type"in Rb?ta[Rb.type]:fb.dtype,kc=!!Rb.normalized,yd=Rb.size|0,qc=Rb.offset|0,Lc=Rb.stride|0,gd=Rb.divisor|0);Xb=fa.location;Ra=da[Xb];if(1===pd){Ra.buffer||X.enableVertexAttribArray(Xb);Ad=yd||1;if(Ra.type!==jc||Ra.size!==Ad||Ra.buffer!==fb||Ra.normalized!==kc||Ra.offset!==qc||Ra.stride!==Lc)X.bindBuffer(34962,fb.buffer),X.vertexAttribPointer(Xb,Ad,jc,kc,Lc,qc),Ra.type=jc,Ra.size=Ad,Ra.buffer=fb,Ra.normalized=
kc,Ra.offset=qc,Ra.stride=Lc;Ra.divisor!==gd&&(z.vertexAttribDivisorANGLE(Xb,gd),Ra.divisor=gd)}else if(Ra.buffer&&(X.disableVertexAttribArray(Xb),Ra.buffer=null),Ra.x!==hd||Ra.y!==ic||Ra.z!==Rc||Ra.w!==Zc)X.vertexAttrib4f(Xb,hd,ic,Rc,Zc),Ra.x=hd,Ra.y=ic,Ra.z=Rc,Ra.w=Zc;lc=this.position;rb=!1;Hb=null;cb=0;$b=!1;kd=Sb=0;cc=1;Tb=0;Mc=5126;Ib=Fb=Pa=Ub=0;E(lc)?(rb=!0,Hb=ga.createStream(34962,lc),Mc=Hb.dtype):(Hb=ga.getBuffer(lc))?Mc=Hb.dtype:"constant"in lc?(cc=2,"number"===typeof lc.constant?(Pa=lc.constant,
Fb=Ib=Ub=0):(Pa=0<lc.constant.length?lc.constant[0]:0,Fb=1<lc.constant.length?lc.constant[1]:0,Ib=2<lc.constant.length?lc.constant[2]:0,Ub=3<lc.constant.length?lc.constant[3]:0)):(Hb=E(lc.buffer)?ga.createStream(34962,lc.buffer):ga.getBuffer(lc.buffer),Mc="type"in lc?ta[lc.type]:Hb.dtype,$b=!!lc.normalized,kd=lc.size|0,Sb=lc.offset|0,Tb=lc.stride|0,cb=lc.divisor|0);ib=la.location;Sa=da[ib];if(1===cc){Sa.buffer||X.enableVertexAttribArray(ib);pc=kd||2;if(Sa.type!==Mc||Sa.size!==pc||Sa.buffer!==Hb||
Sa.normalized!==$b||Sa.offset!==Sb||Sa.stride!==Tb)X.bindBuffer(34962,Hb.buffer),X.vertexAttribPointer(ib,pc,Mc,$b,Tb,Sb),Sa.type=Mc,Sa.size=pc,Sa.buffer=Hb,Sa.normalized=$b,Sa.offset=Sb,Sa.stride=Tb;Sa.divisor!==cb&&(z.vertexAttribDivisorANGLE(ib,cb),Sa.divisor=cb)}else if(Sa.buffer&&(X.disableVertexAttribArray(ib),Sa.buffer=null),Sa.x!==Pa||Sa.y!==Fb||Sa.z!==Ib||Sa.w!==Ub)X.vertexAttrib4f(ib,Pa,Fb,Ib,Ub),Sa.x=Pa,Sa.y=Fb,Sa.z=Ib,Sa.w=Ub;ac=q.call(this,O,b,0);X.uniform1f(ba.location,ac);Dc=f.call(this,
O,b,0);X.uniform1f(r.location,Dc);X.uniform1f(l.location,b.align);X.uniform1f(F.location,b.baseline);db=this.viewportArray;X.uniform4f(ma.location,db[0],db[1],db[2],db[3]);mc=b.color;X.uniform4f(I.location,mc[0],mc[1],mc[2],mc[3]);Hc=d.call(this,O,b,0);X.uniform2f(W.location,Hc[0],Hc[1]);oc=D.call(this,O,b,0);X.uniform2f(L.location,oc[0],oc[1]);kb=this.scale;X.uniform2f(ua.location,kb[0],kb[1]);lb=this.translate;X.uniform2f(ab.location,lb[0],lb[1]);va=b.positionOffset;X.uniform2f(ia.location,va[0],
va[1]);X.uniform1f(J.location,b.opacity);(nb=n.call(this,O,b,0))&&"framebuffer"===nb._reglType&&(nb=nb.color[0]);ya=nb._texture;X.uniform1i(B.location,ya.bind());(Wa=ra.elements)?X.bindBuffer(34963,Wa.buffer.buffer):wa.currentVAO&&(Wa=S.getElements(wa.currentVAO.elements))&&X.bindBuffer(34963,Wa.buffer.buffer);bb=b.offset;if(Ia=b.count)gb=ra.instances,0<gb?Wa?z.drawElementsInstancedANGLE(0,Ia,Wa.type,bb<<(Wa.type-5121>>1),gb):z.drawArraysInstancedANGLE(0,bb,Ia,gb):0>gb&&(Wa?X.drawElements(0,Ia,Wa.type,
bb<<(Wa.type-5121>>1)):X.drawArrays(0,bb,Ia)),T.dirty=!0,wa.setVAO(null),O.viewportWidth=v,O.viewportHeight=y,t&&(k.cpuTime+=performance.now()-w),h&&ga.destroyStream(H),oe&&ga.destroyStream(pe),vc&&ga.destroyStream(fb),rb&&ga.destroyStream(Hb),ya.unbind()},scope:function(b,a,l){var d,r,g,f,q,n,B,t,J,L,D,h,W,N,F,H,la,A,C,I,ia,u,fa,na,G,ba,aa,ua,S,P,R,X,V,da,ca,U,ma,ab,ha,za,oa,pa,Ha,Ta,wa,Aa,Gb,Eb,Ka,Na,Jc,Xa,zb,yb,Cb,Xb,Ra,Ac,lc,rb,Hb,cb,$b,Sb,Kc,cc,Tb,Mc,Ub,Pa,Fb,Ib,ib,Sa,pc,ac,Dc,db,mc,Hc,oc,kb,
lb,va,nb,ya,Wa,bb,Ia,gb,Oa,xb,vb,Ua,wc,Kb,Lb,Vb,Ca,xd,Ma,Ob,hb,jb,xa,ec,Da,ob,pb,Za,$a,nc,xc,tc,Ya,Mb,Ec,Fa,yc,Va,Ba,mb,sb,Ab,qb,uc,tb,Sc,rc,sd,Nc,cd,dd,Yb,dc,Pb,Ga,bc,wb,Bb,Nb,Qb,fc,hc,Tc,Bc,Cc,Fc,Oc,ed,Uc,Pc,Wb,Db,Qc,Ic,Vc,gc,$c;d=this.viewport;r=d.x|0;g=d.y|0;f="width"in d?d.width|0:O.framebufferWidth-r;q="height"in d?d.height|0:O.framebufferHeight-g;n=O.viewportWidth;O.viewportWidth=f;B=O.viewportHeight;O.viewportHeight=q;t=Y[0];Y[0]=r;J=Y[1];Y[1]=g;L=Y[2];Y[2]=f;D=Y[3];Y[3]=q;h=Qa[0];Qa[0]=0;
W=Qa[1];Qa[1]=0;N=Qa[2];Qa[2]=0;F=Qa[3];Qa[3]=1;H=ka.blend_enable;ka.blend_enable=!0;la=ea[0];ea[0]=770;A=ea[1];ea[1]=771;C=ea[2];ea[2]=773;I=ea[3];ea[3]=1;ia=ka.depth_enable;ka.depth_enable=!1;u=ka.stencil_enable;ka.stencil_enable=!1;if(fa=T.profile)na=performance.now(),k.count++;G=b.offset;ba=ra.offset;ra.offset=G;aa=b.count;ua=ra.count;ra.count=aa;S=ra.primitive;ra.primitive=0;P=b.align;R=sa[64];sa[64]=P;X=v.call(this,O,b,l);V=sa[69];sa[69]=X;da=z.call(this,O,b,l);ca=sa[67];sa[67]=da;U=w.call(this,
O,b,l);ma=sa[66];sa[66]=U;ab=b.baseline;ha=sa[65];sa[65]=ab;za=p.call(this,O,b,l);oa=sa[62];sa[62]=za;pa=b.color;Ha=sa[14];sa[14]=pa;Ta=e.call(this,O,b,l);wa=sa[63];sa[63]=Ta;Aa=b.opacity;Gb=sa[10];sa[10]=Aa;Eb=b.positionOffset;Ka=sa[68];sa[68]=Eb;Na=this.scale;Jc=sa[6];sa[6]=Na;Xa=this.translate;zb=sa[8];sa[8]=Xa;yb=this.viewportArray;Cb=sa[3];sa[3]=yb;Xb=this.charBuffer;Ra=!1;Ac=null;lc=0;rb=!1;cb=Hb=0;$b=1;Sb=0;Kc=5126;Ub=Mc=Tb=cc=0;E(Xb)?(Ra=!0,Ac=ga.createStream(34962,Xb),Kc=Ac.dtype):(Ac=ga.getBuffer(Xb))?
Kc=Ac.dtype:"constant"in Xb?($b=2,"number"===typeof Xb.constant?(Tb=Xb.constant,Mc=Ub=cc=0):(Tb=0<Xb.constant.length?Xb.constant[0]:0,Mc=1<Xb.constant.length?Xb.constant[1]:0,Ub=2<Xb.constant.length?Xb.constant[2]:0,cc=3<Xb.constant.length?Xb.constant[3]:0)):(Ac=E(Xb.buffer)?ga.createStream(34962,Xb.buffer):ga.getBuffer(Xb.buffer),Kc="type"in Xb?ta[Xb.type]:Ac.dtype,rb=!!Xb.normalized,cb=Xb.size|0,Hb=Xb.offset|0,Sb=Xb.stride|0,lc=Xb.divisor|0);Pa=c.buffer;c.buffer=Ac;Fb=c.divisor;c.divisor=lc;Ib=
c.normalized;c.normalized=rb;ib=c.offset;c.offset=Hb;Sa=c.size;c.size=cb;pc=c.state;c.state=$b;ac=c.stride;c.stride=Sb;Dc=c.type;c.type=Kc;db=c.w;c.w=cc;mc=c.x;c.x=Tb;Hc=c.y;c.y=Mc;oc=c.z;c.z=Ub;Q.buffer=this.sizeBuffer;kb=!1;lb=null;va=0;nb=!1;Wa=ya=0;bb=1;Ia=0;gb=5126;Ua=vb=xb=Oa=0;E(Q)?(kb=!0,lb=ga.createStream(34962,Q),gb=lb.dtype):(lb=ga.getBuffer(Q))?gb=lb.dtype:"constant"in Q?(bb=2,"number"===typeof Q.constant?(xb=Q.constant,vb=Ua=Oa=0):(xb=0<Q.constant.length?Q.constant[0]:0,vb=1<Q.constant.length?
Q.constant[1]:0,Ua=2<Q.constant.length?Q.constant[2]:0,Oa=3<Q.constant.length?Q.constant[3]:0)):(lb=E(Q.buffer)?ga.createStream(34962,Q.buffer):ga.getBuffer(Q.buffer),gb="type"in Q?ta[Q.type]:lb.dtype,nb=!!Q.normalized,Wa=Q.size|0,ya=Q.offset|0,Ia=Q.stride|0,va=Q.divisor|0);wc=m.buffer;m.buffer=lb;Kb=m.divisor;m.divisor=va;Lb=m.normalized;m.normalized=nb;Vb=m.offset;m.offset=ya;Ca=m.size;m.size=Wa;xd=m.state;m.state=bb;Ma=m.stride;m.stride=Ia;Ob=m.type;m.type=gb;hb=m.w;m.w=Oa;jb=m.x;m.x=xb;xa=m.y;
m.y=vb;ec=m.z;m.z=Ua;Da=this.position;ob=!1;pb=null;Za=0;$a=!1;xc=nc=0;tc=1;Ya=0;Mb=5126;Va=yc=Fa=Ec=0;E(Da)?(ob=!0,pb=ga.createStream(34962,Da),Mb=pb.dtype):(pb=ga.getBuffer(Da))?Mb=pb.dtype:"constant"in Da?(tc=2,"number"===typeof Da.constant?(Fa=Da.constant,yc=Va=Ec=0):(Fa=0<Da.constant.length?Da.constant[0]:0,yc=1<Da.constant.length?Da.constant[1]:0,Va=2<Da.constant.length?Da.constant[2]:0,Ec=3<Da.constant.length?Da.constant[3]:0)):(pb=E(Da.buffer)?ga.createStream(34962,Da.buffer):ga.getBuffer(Da.buffer),
Mb="type"in Da?ta[Da.type]:pb.dtype,$a=!!Da.normalized,xc=Da.size|0,nc=Da.offset|0,Ya=Da.stride|0,Za=Da.divisor|0);Ba=x.buffer;x.buffer=pb;mb=x.divisor;x.divisor=Za;sb=x.normalized;x.normalized=$a;Ab=x.offset;x.offset=nc;qb=x.size;x.size=xc;uc=x.state;x.state=tc;tb=x.stride;x.stride=Ya;Sc=x.type;x.type=Mb;rc=x.w;x.w=Ec;sd=x.x;x.x=Fa;Nc=x.y;x.y=yc;cd=x.z;x.z=Va;M.buffer=this.sizeBuffer;dd=!1;Yb=null;dc=0;Pb=!1;bc=Ga=0;wb=1;Bb=0;Nb=5126;Tc=hc=fc=Qb=0;E(M)?(dd=!0,Yb=ga.createStream(34962,M),Nb=Yb.dtype):
(Yb=ga.getBuffer(M))?Nb=Yb.dtype:"constant"in M?(wb=2,"number"===typeof M.constant?(fc=M.constant,hc=Tc=Qb=0):(fc=0<M.constant.length?M.constant[0]:0,hc=1<M.constant.length?M.constant[1]:0,Tc=2<M.constant.length?M.constant[2]:0,Qb=3<M.constant.length?M.constant[3]:0)):(Yb=E(M.buffer)?ga.createStream(34962,M.buffer):ga.getBuffer(M.buffer),Nb="type"in M?ta[M.type]:Yb.dtype,Pb=!!M.normalized,bc=M.size|0,Ga=M.offset|0,Bb=M.stride|0,dc=M.divisor|0);Bc=y.buffer;y.buffer=Yb;Cc=y.divisor;y.divisor=dc;Fc=
y.normalized;y.normalized=Pb;Oc=y.offset;y.offset=Ga;ed=y.size;y.size=bc;Uc=y.state;y.state=wb;Pc=y.stride;y.stride=Bb;Wb=y.type;y.type=Nb;Db=y.w;y.w=Qb;Qc=y.x;y.x=fc;Ic=y.y;y.y=hc;Vc=y.z;y.z=Tc;gc=Z.vert;Z.vert=61;$c=Z.frag;Z.frag=60;T.dirty=!0;a(O,b,l);O.viewportWidth=n;O.viewportHeight=B;Y[0]=t;Y[1]=J;Y[2]=L;Y[3]=D;Qa[0]=h;Qa[1]=W;Qa[2]=N;Qa[3]=F;ka.blend_enable=H;ea[0]=la;ea[1]=A;ea[2]=C;ea[3]=I;ka.depth_enable=ia;ka.stencil_enable=u;fa&&(k.cpuTime+=performance.now()-na);ra.offset=ba;ra.count=
ua;ra.primitive=S;sa[64]=R;sa[69]=V;sa[67]=ca;sa[66]=ma;sa[65]=ha;sa[62]=oa;sa[14]=Ha;sa[63]=wa;sa[10]=Gb;sa[68]=Ka;sa[6]=Jc;sa[8]=zb;sa[3]=Cb;Ra&&ga.destroyStream(Ac);c.buffer=Pa;c.divisor=Fb;c.normalized=Ib;c.offset=ib;c.size=Sa;c.state=pc;c.stride=ac;c.type=Dc;c.w=db;c.x=mc;c.y=Hc;c.z=oc;kb&&ga.destroyStream(lb);m.buffer=wc;m.divisor=Kb;m.normalized=Lb;m.offset=Vb;m.size=Ca;m.state=xd;m.stride=Ma;m.type=Ob;m.w=hb;m.x=jb;m.y=xa;m.z=ec;ob&&ga.destroyStream(pb);x.buffer=Ba;x.divisor=mb;x.normalized=
sb;x.offset=Ab;x.size=qb;x.state=uc;x.stride=tb;x.type=Sc;x.w=rc;x.x=sd;x.y=Nc;x.z=cd;dd&&ga.destroyStream(Yb);y.buffer=Bc;y.divisor=Cc;y.normalized=Fc;y.offset=Oc;y.size=ed;y.state=Uc;y.stride=Pc;y.type=Wb;y.w=Db;y.x=Qc;y.y=Ic;y.z=Vc;Z.vert=gc;Z.frag=$c;T.dirty=!0}}}}},{}],25:[function(a,h,u){var t=a("./sorted-object-keys");h.exports=function(a,g){for(var q=t(g),f=0;f<q.length;++f)a[q[f]]=g[q[f]];return a}},{"./sorted-object-keys":34}],26:[function(a,h,u){function t(a,g,d,k,n,v){for(var t=0;t<g;++t)for(var w=
a[t],p=0;p<d;++p)for(var e=w[p],c=0;c<k;++c)n[v++]=e[c]}function k(a,g,d,D,n){for(var v=1,z=d+1;z<g.length;++z)v*=g[z];var w=g[d];if(4===g.length-d){var p=g[d+1],e=g[d+2];g=g[d+3];for(z=0;z<w;++z)t(a[z],p,e,g,D,n),n+=v}else for(z=0;z<w;++z)k(a[z],g,d+1,D,n),n+=v}var g=a("./pool");h.exports={shape:function(a){for(var g=[];a.length;a=a[0])g.push(a.length);return g},flatten:function(a,f,d,D){var n=1;if(f.length)for(var v=0;v<f.length;++v)n*=f[v];else n=0;d=D||g.allocType(d,n);switch(f.length){case 0:break;
case 1:D=f[0];for(f=0;f<D;++f)d[f]=a[f];break;case 2:D=f[0];f=f[1];for(v=n=0;v<D;++v)for(var z=a[v],w=0;w<f;++w)d[n++]=z[w];break;case 3:t(a,f[0],f[1],f[2],d,0);break;default:k(a,f,0,d,0)}return d}}},{"./pool":32}],27:[function(a,h,u){var t=a("./is-typed-array");h.exports=function(a){return Array.isArray(a)||t(a)}},{"./is-typed-array":30}],28:[function(a,h,u){var t=a("./is-typed-array");h.exports=function(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&"number"===
typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}},{"./is-typed-array":30}],29:[function(a,h,u){h.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(a,h,u){h.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(a,h,u){h.exports=
function(a,k){for(var g=Array(a),q=0;q<a;++q)g[q]=k(q);return g}},{}],32:[function(a,h,u){function t(a){var g,d;g=(65535<a)<<4;a>>>=g;d=(255<a)<<3;a>>>=d;g|=d;d=(15<a)<<2;a>>>=d;g|=d;d=(3<a)<<1;return g|d|a>>>d>>1}function k(){function a(g){a:{for(var f=16;268435456>=f;f*=16)if(g<=f){g=f;break a}g=0}f=d[t(g)>>2];return 0<f.length?f.pop():new ArrayBuffer(g)}function f(a){d[t(a.byteLength)>>2].push(a)}var d=g(8,function(){return[]});return{alloc:a,free:f,allocType:function(d,g){var f=null;switch(d){case 5120:f=
new Int8Array(a(g),0,g);break;case 5121:f=new Uint8Array(a(g),0,g);break;case 5122:f=new Int16Array(a(2*g),0,g);break;case 5123:f=new Uint16Array(a(2*g),0,g);break;case 5124:f=new Int32Array(a(4*g),0,g);break;case 5125:f=new Uint32Array(a(4*g),0,g);break;case 5126:f=new Float32Array(a(4*g),0,g);break;default:return null}return f.length!==g?f.subarray(0,g):f},freeType:function(a){f(a.buffer)}}}var g=a("./loop");a=k();a.zero=k();h.exports=a},{"./loop":31}],33:[function(a,h,u){h.exports={next:"function"===
typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(a,h,u){h.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(a,h,u){var t=a("./pool"),k=new Float32Array(1),g=new Uint32Array(k.buffer);h.exports=function(a){for(var f=t.allocType(5123,a.length),d=0;d<a.length;++d)if(isNaN(a[d]))f[d]=65535;else if(Infinity===
a[d])f[d]=31744;else if(-Infinity===a[d])f[d]=64512;else{k[0]=a[d];var D=g[0],n=D>>>31<<15,v=(D<<1>>>24)-127,D=D>>13&1023;f[d]=-24>v?n:-14>v?n+(D+1024>>-14-v):15<v?n+31744:n+(v+15<<10)+D}return f}},{"./pool":32}],36:[function(a,h,u){var t=a("./sorted-object-keys");h.exports=function(a){return t(a).map(function(g){return a[g]})}},{"./sorted-object-keys":34}],37:[function(a,h,u){function t(a,g,f){function k(){var e=window.innerWidth,c=window.innerHeight;a!==document.body&&(c=q.getBoundingClientRect(),
e=c.right-c.left,c=c.bottom-c.top);q.width=f*e;q.height=f*c}var q=document.createElement("canvas");d(q.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(q);a===document.body&&(q.style.position="absolute",d(a.style,{margin:0,padding:0}));var p;a!==document.body&&"function"===typeof ResizeObserver?(p=new ResizeObserver(function(){setTimeout(k)}),p.observe(a)):window.addEventListener("resize",k,!1);k();return{canvas:q,onDestroy:function(){p?p.disconnect():window.removeEventListener("resize",
k);a.removeChild(q)}}}function k(a,d){function g(f){try{return a.getContext(f,d)}catch(k){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}function g(a){if("string"===typeof a)return a.split();f(Array.isArray(a),"invalid extension array");return a}function q(a){return"string"===typeof a?(f("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var f=a("./util/check"),d=a("./util/extend");h.exports=function(a){var d=a||{},v,z,w,p;
a={};var e=[],c=[],m="undefined"===typeof window?1:window.devicePixelRatio,x=!1,y=function(a){a&&f.raise(a)},h=function(){};"string"===typeof d?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),v=document.querySelector(d),f(v,"invalid query string for element")):"object"===typeof d?"string"===typeof d.nodeName&&"function"===typeof d.appendChild&&"function"===typeof d.getBoundingClientRect?v=d:"function"===typeof d.drawArrays||"function"===typeof d.drawElements?
(p=d,w=p.canvas):(f.constructor(d),"gl"in d?p=d.gl:"canvas"in d?w=q(d.canvas):"container"in d&&(z=q(d.container)),"attributes"in d&&(a=d.attributes,f.type(a,"object","invalid context attributes")),"extensions"in d&&(e=g(d.extensions)),"optionalExtensions"in d&&(c=g(d.optionalExtensions)),"onDone"in d&&(f.type(d.onDone,"function","invalid or missing onDone callback"),y=d.onDone),"profile"in d&&(x=!!d.profile),"pixelRatio"in d&&(m=+d.pixelRatio,f(0<m,"invalid pixel ratio"))):f.raise("invalid arguments to regl");
v&&("canvas"===v.nodeName.toLowerCase()?w=v:z=v);if(!p){if(!w){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");v=t(z||document.body,y,m);if(!v)return null;w=v.canvas;h=v.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0);p=k(w,a)}return p?{gl:p,canvas:w,container:z,extensions:e,optionalExtensions:c,pixelRatio:m,profile:x,onDone:y,onDestroy:h}:(h(),y("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(a,h,u){function t(a){var g=a.length;if(0<g%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=g);return[a,a===g?0:4-a%4]}function k(a,f,k){for(var q=[],t=f;t<k;t+=3)f=(a[t]<<16&16711680)+(a[t+1]<<8&65280)+(a[t+2]&255),q.push(g[f>>18&63]+g[f>>12&63]+g[f>>6&63]+g[f&63]);return q.join("")}u.byteLength=function(a){a=t(a);var g=a[1];return 3*(a[0]+g)/4-g};u.toByteArray=function(a){var g,k=t(a);g=k[0];
var k=k[1],v=new f(3*(g+k)/4-k),z=0,w=0<k?g-4:g,p;for(p=0;p<w;p+=4)g=q[a.charCodeAt(p)]<<18|q[a.charCodeAt(p+1)]<<12|q[a.charCodeAt(p+2)]<<6|q[a.charCodeAt(p+3)],v[z++]=g>>16&255,v[z++]=g>>8&255,v[z++]=g&255;2===k&&(g=q[a.charCodeAt(p)]<<2|q[a.charCodeAt(p+1)]>>4,v[z++]=g&255);1===k&&(g=q[a.charCodeAt(p)]<<10|q[a.charCodeAt(p+1)]<<4|q[a.charCodeAt(p+2)]>>2,v[z++]=g>>8&255,v[z++]=g&255);return v};u.fromByteArray=function(a){for(var f=a.length,q=f%3,v=[],t=0,w=f-q;t<w;t+=16383)v.push(k(a,t,t+16383>
w?w:t+16383));1===q?(a=a[f-1],v.push(g[a>>2]+g[a<<4&63]+"==")):2===q&&(a=(a[f-2]<<8)+a[f-1],v.push(g[a>>10]+g[a>>4&63]+g[a<<2&63]+"="));return v.join("")};var g=[],q=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;for(a=0;64>a;++a)g[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],q["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;q[45]=62;q[95]=63},{}],39:[function(a,h,u){var t=a("./lib/rationalize");h.exports=function(a,g){return t(a[0].mul(g[1]).add(g[0].mul(a[1])),
a[1].mul(g[1]))}},{"./lib/rationalize":49}],40:[function(a,h,u){h.exports=function(a,k){return a[0].mul(k[1]).cmp(k[0].mul(a[1]))}},{}],41:[function(a,h,u){var t=a("./lib/rationalize");h.exports=function(a,g){return t(a[0].mul(g[1]),a[1].mul(g[0]))}},{"./lib/rationalize":49}],42:[function(a,h,u){function t(a,v){if(k(a))return v?D(a,t(v)):[a[0].clone(),a[1].clone()];var h=0,w,p;if(g(a))w=a.clone();else if("string"===typeof a)w=f(a);else{if(0===a)return[q(0),q(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=
Math.pow(2,256),h-=256;w=q(a)}if(k(v))w.mul(v[1]),p=v[0].clone();else if(g(v))p=v.clone();else if("string"===typeof v)p=f(v);else if(v){if(v!==Math.floor(v))for(;v!==Math.floor(v);)v*=Math.pow(2,256),h+=256;p=q(v)}else p=q(1);0<h?w=w.ushln(h):0>h&&(p=p.ushln(-h));return d(w,p)}var k=a("./is-rat"),g=a("./lib/is-bn"),q=a("./lib/num-to-bn"),f=a("./lib/str-to-bn"),d=a("./lib/rationalize"),D=a("./div");h.exports=t},{"./div":41,"./is-rat":43,"./lib/is-bn":47,"./lib/num-to-bn":48,"./lib/rationalize":49,
"./lib/str-to-bn":50}],43:[function(a,h,u){var t=a("./lib/is-bn");h.exports=function(a){return Array.isArray(a)&&2===a.length&&t(a[0])&&t(a[1])}},{"./lib/is-bn":47}],44:[function(a,h,u){var t=a("bn.js");h.exports=function(a){return a.cmp(new t(0))}},{"bn.js":57}],45:[function(a,h,u){var t=a("./bn-sign");h.exports=function(a){var g=a.length,q=a.words,f=0;if(1===g)f=q[0];else if(2===g)f=q[0]+67108864*q[1];else for(var d=0;d<g;d++)f+=q[d]*Math.pow(67108864,d);return t(a)*f}},{"./bn-sign":44}],46:[function(a,
h,u){var t=a("double-bits"),k=a("bit-twiddle").countTrailingZeros;h.exports=function(a){var q=k(t.lo(a));if(32>q)return q;a=k(t.hi(a));return 20<a?52:a+32}},{"bit-twiddle":56,"double-bits":79}],47:[function(a,h,u){a("bn.js");h.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":57}],48:[function(a,h,u){var t=a("bn.js"),k=a("double-bits");h.exports=function(a){var q=k.exponent(a);return 52>q?new t(a):(new t(a*Math.pow(2,52-q))).ushln(q-52)}},{"bn.js":57,"double-bits":79}],49:[function(a,
h,u){var t=a("./num-to-bn"),k=a("./bn-sign");h.exports=function(a,q){var f=k(a),d=k(q);if(0===f)return[t(0),t(1)];if(0===d)return[t(0),t(0)];0>d&&(a=a.neg(),q=q.neg());f=a.gcd(q);return f.cmpn(1)?[a.div(f),q.div(f)]:[a,q]}},{"./bn-sign":44,"./num-to-bn":48}],50:[function(a,h,u){var t=a("bn.js");h.exports=function(a){return new t(a)}},{"bn.js":57}],51:[function(a,h,u){var t=a("./lib/rationalize");h.exports=function(a,g){return t(a[0].mul(g[0]),a[1].mul(g[1]))}},{"./lib/rationalize":49}],52:[function(a,
h,u){var t=a("./lib/bn-sign");h.exports=function(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":44}],53:[function(a,h,u){var t=a("./lib/rationalize");h.exports=function(a,g){return t(a[0].mul(g[1]).sub(a[1].mul(g[0])),a[1].mul(g[1]))}},{"./lib/rationalize":49}],54:[function(a,h,u){var t=a("./lib/bn-to-num"),k=a("./lib/ctz");h.exports=function(a){var q=a[0];a=a[1];if(0===q.cmpn(0))return 0;var f=q.abs().divmod(a.abs()),d=t(f.div),f=f.mod,q=q.negative!==a.negative?-1:1;if(0===f.cmpn(0))return q*d;if(d){var h=
k(d)+4;a=t(f.ushln(h).divRound(a));return q*(d+a*Math.pow(2,-h))}d=a.bitLength()-f.bitLength()+53;a=t(f.ushln(d).divRound(a));if(1023>d)return q*a*Math.pow(2,-d);a*=Math.pow(2,-1023);return q*a*Math.pow(2,1023-d)}},{"./lib/bn-to-num":45,"./lib/ctz":46}],55:[function(a,h,u){function t(a,k,f,d,t){a=["function ",a,"(a,l,h,",d.join(","),"){",t?"":"var i=",f?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];t?0>k.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):
a.push(";if(",k,"){i=m;");f?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");t?a.push("return -1};"):a.push("return i};");return a.join("")}function k(a,k,f,d){return(new Function([t("A","x"+a+"y",k,["y"],d),t("P","c(x,y)"+a+"0",k,["y","c"],d),"function dispatchBsearch",f,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",f].join("")))()}
h.exports={ge:k(">=",!1,"GE"),gt:k(">",!1,"GT"),lt:k("<",!0,"LT"),le:k("<=",!0,"LE"),eq:k("-",!0,"EQ",!0)}},{}],56:[function(a,h,u){function t(a){var k=32;(a&=-a)&&k--;a&65535&&(k-=16);a&16711935&&(k-=8);a&252645135&&(k-=4);a&858993459&&(k-=2);a&1431655765&&--k;return k}"use restrict";u.INT_BITS=32;u.INT_MAX=2147483647;u.INT_MIN=-2147483648;u.sign=function(a){return(0<a)-(0>a)};u.abs=function(a){var k=a>>31;return(a^k)-k};u.min=function(a,k){return k^(a^k)&-(a<k)};u.max=function(a,k){return a^(a^
k)&-(a<k)};u.isPow2=function(a){return!(a&a-1)&&!!a};u.log2=function(a){var k,f;k=(65535<a)<<4;a>>>=k;f=(255<a)<<3;a>>>=f;k|=f;f=(15<a)<<2;a>>>=f;k|=f;f=(3<a)<<1;return k|f|a>>>f>>1};u.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};u.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};u.countTrailingZeros=t;u.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=
a>>>8;return(a|a>>>16)+1};u.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};u.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var k=Array(256);(function(a){for(var k=0;256>k;++k){for(var f=k,d=k,t=7,f=f>>>1;f;f>>>=1)d<<=1,d|=f&1,--t;a[k]=d<<t&255}})(k);u.reverse=function(a){return k[a&255]<<24|k[a>>>8&255]<<16|k[a>>>16&255]<<8|k[a>>>24&255]};u.interleave2=function(a,k){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;
k&=65535;k=(k|k<<8)&16711935;k=(k|k<<4)&252645135;k=(k|k<<2)&858993459;return(a|a<<1)&1431655765|((k|k<<1)&1431655765)<<1};u.deinterleave2=function(a,k){a=a>>>k&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};u.interleave3=function(a,k,f){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;k&=1023;k=(k|k<<16)&4278190335;k=(k|k<<8)&251719695;k=(k|k<<4)&3272356035;a=(a|a<<2)&1227133513|((k|k<<2)&1227133513)<<1;f&=1023;
f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;return a|((f|f<<2)&1227133513)<<2};u.deinterleave3=function(a,k){a=a>>>k&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};u.nextCombination=function(a){var k=a|a-1;return k+1|(~k&-~k)-1>>>t(a)+1}},{}],57:[function(a,h,u){(function(t,k){function g(b,a){if(!b)throw Error(a||"Assertion failed");}function q(b,a){b.super_=a;var c=function(){};c.prototype=a.prototype;b.prototype=
new c;b.prototype.constructor=b}function f(b,a,c){if(f.isBN(b))return b;this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==b){if("le"===a||"be"===a)c=a,a=10;this._init(b||0,a||10,c||"be")}}function d(b,a,c){var e=0;for(c=Math.min(b.length,c);a<c;a++)var d=b.charCodeAt(a)-48,e=e<<4,e=49<=d&&54>=d?e|d-49+10:17<=d&&22>=d?e|d-17+10:e|d&15;return e}function h(b,a,c,e){var d=0;for(c=Math.min(b.length,c);a<c;a++)var f=b.charCodeAt(a)-48,d=d*e,d=49<=f?d+(f-49+10):17<=f?d+(f-17+10):d+f;
return d}function n(b,a,c){c.negative=a.negative^b.negative;var e=b.length+a.length|0;c.length=e;var e=e-1|0,d=b.words[0]|0,f=a.words[0]|0,d=d*f,g=d/67108864|0;c.words[0]=d&67108863;for(var m=1;m<e;m++){for(var k=g>>>26,p=g&67108863,g=Math.min(m,a.length-1),r=Math.max(0,m-b.length+1);r<=g;r++)d=b.words[m-r|0]|0,f=a.words[r]|0,d=d*f+p,k+=d/67108864|0,p=d&67108863;c.words[m]=p|0;g=k|0}0!==g?c.words[m]=g|0:c.length--;return c.strip()}function v(b,a){this.x=b;this.y=a}function z(b,a){this.name=b;this.p=
new f(a,16);this.n=this.p.bitLength();this.k=(new f(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function w(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function e(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function c(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}
function m(b){"string"===typeof b?(b=f._prime(b),this.m=b.p,this.prime=b):(g(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null)}function x(b){m.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new f(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof t?t.exports=
f:k.BN=f;f.BN=f;f.wordSize=26;var y;try{y=a("buffer").Buffer}catch(b){}f.isBN=function(b){return b instanceof f?!0:null!==b&&"object"===typeof b&&b.constructor.wordSize===f.wordSize&&Array.isArray(b.words)};f.max=function(b,a){return 0<b.cmp(a)?b:a};f.min=function(b,a){return 0>b.cmp(a)?b:a};f.prototype._init=function(b,a,c){if("number"===typeof b)return this._initNumber(b,a,c);if("object"===typeof b)return this._initArray(b,a,c);"hex"===a&&(a=16);g(a===(a|0)&&2<=a&&36>=a);b=b.toString().replace(/\s+/g,
"");var e=0;"-"===b[0]&&e++;16===a?this._parseHex(b,e):this._parseBase(b,a,e);"-"===b[0]&&(this.negative=1);this.strip();"le"===c&&this._initArray(this.toArray(),a,c)};f.prototype._initNumber=function(b,a,c){0>b&&(this.negative=1,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(g(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===c&&this._initArray(this.toArray(),a,c)};f.prototype._initArray=
function(b,a,c){g("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var e,d=0;if("be"===c)for(a=b.length-1,c=0;0<=a;a-=3)e=b[a]|b[a-1]<<8|b[a-2]<<16,this.words[c]|=e<<d&67108863,this.words[c+1]=e>>>26-d&67108863,d+=24,26<=d&&(d-=26,c++);else if("le"===c)for(c=a=0;a<b.length;a+=3)e=b[a]|b[a+1]<<8|b[a+2]<<16,this.words[c]|=e<<d&67108863,this.words[c+1]=e>>>26-d&
67108863,d+=24,26<=d&&(d-=26,c++);return this.strip()};f.prototype._parseHex=function(b,a){this.length=Math.ceil((b.length-a)/6);this.words=Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var e,f,g=0,c=b.length-6;for(e=0;c>=a;c-=6)f=d(b,c,c+6),this.words[e]|=f<<g&67108863,this.words[e+1]|=f>>>26-g&4194303,g+=24,26<=g&&(g-=26,e++);c+6!==a&&(f=d(b,a,c+6),this.words[e]|=f<<g&67108863,this.words[e+1]|=f>>>26-g&4194303);this.strip()};f.prototype._parseBase=function(b,a,c){this.words=[0];
this.length=1;for(var e=0,d=1;67108863>=d;d*=a)e++;e--;for(var d=d/a|0,f=b.length-c,g=f%e,m=Math.min(f,f-g)+c,f=0;c<m;c+=e)f=h(b,c,c+e,a),this.imuln(d),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!==g){e=1;f=h(b,c,b.length,a);for(c=0;c<g;c++)e*=a;this.imuln(e);67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}};f.prototype.copy=function(b){b.words=Array(this.length);for(var a=0;a<this.length;a++)b.words[a]=this.words[a];b.length=this.length;b.negative=this.negative;b.red=this.red};
f.prototype.clone=function(){var b=new f(null);this.copy(b);return b};f.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this};f.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};f.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var H=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(b,a){b=b||10;a=a|0||1;var c;if(16===b||"hex"===b){c="";for(var e=0,d=0,f=0;f<this.length;f++){var m=
this.words[f],k=((m<<e|d)&16777215).toString(16),d=m>>>24-e&16777215;c=0!==d||f!==this.length-1?H[6-k.length]+k+c:k+c;e+=2;26<=e&&(e-=26,f--)}for(0!==d&&(c=d.toString(16)+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}if(b===(b|0)&&2<=b&&36>=b){e=u[b];d=A[b];c="";f=this.clone();for(f.negative=0;!f.isZero();)m=f.modn(d).toString(b),f=f.idivn(d),c=f.isZero()?m+c:H[e-m.length]+m+c;for(this.isZero()&&(c="0"+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}g(!1,"Base should be between 2 and 36")};
f.prototype.toNumber=function(){var b=this.words[0];2===this.length?b+=67108864*this.words[1]:3===this.length&&1===this.words[2]?b+=4503599627370496+67108864*this.words[1]:2<this.length&&g(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-b:b};f.prototype.toJSON=function(){return this.toString(16)};f.prototype.toBuffer=function(b,a){g("undefined"!==typeof y);return this.toArrayLike(y,b,a)};f.prototype.toArray=function(b,a){return this.toArrayLike(Array,b,a)};f.prototype.toArrayLike=
function(b,a,c){var e=this.byteLength();c=c||Math.max(1,e);g(e<=c,"byte array longer than desired length");g(0<c,"Requested array length <= 0");this.strip();var d="le"===a;b=new b(c);a=this.clone();if(d){for(d=0;!a.isZero();d++)e=a.andln(255),a.iushrn(8),b[d]=e;for(;d<c;d++)b[d]=0}else{for(d=0;d<c-e;d++)b[d]=0;for(d=0;!a.isZero();d++)e=a.andln(255),a.iushrn(8),b[c-d-1]=e}return b};f.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var a=0;4096<=b&&(a+=13,b>>>=13);64<=
b&&(a+=7,b>>>=7);8<=b&&(a+=4,b>>>=4);2<=b&&(a+=2,b>>>=2);return a+b};f.prototype._zeroBits=function(b){if(0===b)return 26;var a=0;0===(b&8191)&&(a+=13,b>>>=13);0===(b&127)&&(a+=7,b>>>=7);0===(b&15)&&(a+=4,b>>>=4);0===(b&3)&&(a+=2,b>>>=2);0===(b&1)&&a++;return a};f.prototype.bitLength=function(){var b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,a=0;a<this.length;a++){var c=this._zeroBits(this.words[a]),
b=b+c;if(26!==c)break}return b};f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};f.prototype.toTwos=function(b){return 0!==this.negative?this.abs().inotn(b).iaddn(1):this.clone()};f.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()};f.prototype.isNeg=function(){return 0!==this.negative};f.prototype.neg=function(){return this.clone().ineg()};f.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};f.prototype.iuor=
function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var a=0;a<b.length;a++)this.words[a]|=b.words[a];return this.strip()};f.prototype.ior=function(b){g(0===(this.negative|b.negative));return this.iuor(b)};f.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};f.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)};f.prototype.iuand=function(b){var a;a=this.length>b.length?b:this;for(var c=0;c<a.length;c++)this.words[c]&=
b.words[c];this.length=a.length;return this.strip()};f.prototype.iand=function(b){g(0===(this.negative|b.negative));return this.iuand(b)};f.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};f.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)};f.prototype.iuxor=function(b){var a;this.length>b.length?a=this:(a=b,b=this);for(var c=0;c<b.length;c++)this.words[c]=a.words[c]^b.words[c];if(this!==a)for(;c<a.length;c++)this.words[c]=
a.words[c];this.length=a.length;return this.strip()};f.prototype.ixor=function(b){g(0===(this.negative|b.negative));return this.iuxor(b)};f.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};f.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)};f.prototype.inotn=function(b){g("number"===typeof b&&0<=b);var a=Math.ceil(b/26)|0;b%=26;this._expand(a);0<b&&a--;for(var c=0;c<a;c++)this.words[c]=~this.words[c]&
67108863;0<b&&(this.words[c]=~this.words[c]&67108863>>26-b);return this.strip()};f.prototype.notn=function(b){return this.clone().inotn(b)};f.prototype.setn=function(b,a){g("number"===typeof b&&0<=b);var c=b/26|0,e=b%26;this._expand(c+1);this.words[c]=a?this.words[c]|1<<e:this.words[c]&~(1<<e);return this.strip()};f.prototype.iadd=function(b){var a;if(0!==this.negative&&0===b.negative)return this.negative=0,this.isub(b),this.negative^=1,this._normSign();if(0===this.negative&&0!==b.negative)return b.negative=
0,a=this.isub(b),b.negative=1,a._normSign();var c;this.length>b.length?c=this:(c=b,b=this);for(var e=a=0;e<b.length;e++)a=(c.words[e]|0)+(b.words[e]|0)+a,this.words[e]=a&67108863,a>>>=26;for(;0!==a&&e<c.length;e++)a=(c.words[e]|0)+a,this.words[e]=a&67108863,a>>>=26;this.length=c.length;if(0!==a)this.words[this.length]=a,this.length++;else if(c!==this)for(;e<c.length;e++)this.words[e]=c.words[e];return this};f.prototype.add=function(b){var a;return 0!==b.negative&&0===this.negative?(b.negative=0,a=
this.sub(b),b.negative^=1,a):0===b.negative&&0!==this.negative?(this.negative=0,a=b.sub(this),this.negative=1,a):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};f.prototype.isub=function(b){if(0!==b.negative){b.negative=0;var a=this.iadd(b);b.negative=1;return a._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();a=this.cmp(b);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;var c;0<a?c=this:(c=b,b=this);for(var e=
0,d=0;d<b.length;d++)a=(c.words[d]|0)-(b.words[d]|0)+e,e=a>>26,this.words[d]=a&67108863;for(;0!==e&&d<c.length;d++)a=(c.words[d]|0)+e,e=a>>26,this.words[d]=a&67108863;if(0===e&&d<c.length&&c!==this)for(;d<c.length;d++)this.words[d]=c.words[d];this.length=Math.max(this.length,d);c!==this&&(this.negative=1);return this.strip()};f.prototype.sub=function(b){return this.clone().isub(b)};var aa=function(b,a,c){var e=b.words,d=a.words,f=c.words,g=0,m,k=e[0]|0,p=k&8191,r=k>>>13,q=e[1]|0,k=q&8191,n=q>>>13,
x=e[2]|0,q=x&8191,y=x>>>13,t=e[3]|0,x=t&8191,v=t>>>13,w=e[4]|0,t=w&8191,h=w>>>13,D=e[5]|0,w=D&8191,z=D>>>13,H=e[6]|0,D=H&8191,A=H>>>13,C=e[7]|0,H=C&8191,u=C>>>13,na=e[8]|0,C=na&8191,na=na>>>13,aa=e[9]|0,e=aa&8191,aa=aa>>>13,E=d[0]|0,ka=E&8191,Z=E>>>13,sa=d[1]|0,E=sa&8191,wa=sa>>>13,Qa=d[2]|0,sa=Qa&8191,Ka=Qa>>>13,U=d[3]|0,Qa=U&8191,Na=U>>>13,ea=d[4]|0,U=ea&8191,pa=ea>>>13,Xa=d[5]|0,ea=Xa&8191,Cb=Xa>>>13,yb=d[6]|0,Xa=yb&8191,Jc=yb>>>13,Eb=d[7]|0,yb=Eb&8191,V=Eb>>>13,R=d[8]|0,Eb=R&8191,R=R>>>13,ha=
d[9]|0,d=ha&8191,ha=ha>>>13;c.negative=b.negative^a.negative;c.length=19;m=Math.imul(p,ka);b=Math.imul(p,Z);b=b+Math.imul(r,ka)|0;a=Math.imul(r,Z);var Aa=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(Aa>>>26)|0,Aa=Aa&67108863;m=Math.imul(k,ka);b=Math.imul(k,Z);b=b+Math.imul(n,ka)|0;a=Math.imul(n,Z);m=m+Math.imul(p,E)|0;b=b+Math.imul(p,wa)|0;b=b+Math.imul(r,E)|0;a=a+Math.imul(r,wa)|0;var zb=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(zb>>>26)|0,zb=zb&67108863;m=Math.imul(q,ka);b=Math.imul(q,Z);b=b+Math.imul(y,
ka)|0;a=Math.imul(y,Z);m=m+Math.imul(k,E)|0;b=b+Math.imul(k,wa)|0;b=b+Math.imul(n,E)|0;a=a+Math.imul(n,wa)|0;m=m+Math.imul(p,sa)|0;b=b+Math.imul(p,Ka)|0;b=b+Math.imul(r,sa)|0;a=a+Math.imul(r,Ka)|0;var Ac=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(Ac>>>26)|0,Ac=Ac&67108863;m=Math.imul(x,ka);b=Math.imul(x,Z);b=b+Math.imul(v,ka)|0;a=Math.imul(v,Z);m=m+Math.imul(q,E)|0;b=b+Math.imul(q,wa)|0;b=b+Math.imul(y,E)|0;a=a+Math.imul(y,wa)|0;m=m+Math.imul(k,sa)|0;b=b+Math.imul(k,Ka)|0;b=b+Math.imul(n,sa)|0;a=
a+Math.imul(n,Ka)|0;m=m+Math.imul(p,Qa)|0;b=b+Math.imul(p,Na)|0;b=b+Math.imul(r,Qa)|0;a=a+Math.imul(r,Na)|0;var Kc=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(Kc>>>26)|0,Kc=Kc&67108863;m=Math.imul(t,ka);b=Math.imul(t,Z);b=b+Math.imul(h,ka)|0;a=Math.imul(h,Z);m=m+Math.imul(x,E)|0;b=b+Math.imul(x,wa)|0;b=b+Math.imul(v,E)|0;a=a+Math.imul(v,wa)|0;m=m+Math.imul(q,sa)|0;b=b+Math.imul(q,Ka)|0;b=b+Math.imul(y,sa)|0;a=a+Math.imul(y,Ka)|0;m=m+Math.imul(k,Qa)|0;b=b+Math.imul(k,Na)|0;b=b+Math.imul(n,Qa)|0;a=a+
Math.imul(n,Na)|0;m=m+Math.imul(p,U)|0;b=b+Math.imul(p,pa)|0;b=b+Math.imul(r,U)|0;a=a+Math.imul(r,pa)|0;var P=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(P>>>26)|0,P=P&67108863;m=Math.imul(w,ka);b=Math.imul(w,Z);b=b+Math.imul(z,ka)|0;a=Math.imul(z,Z);m=m+Math.imul(t,E)|0;b=b+Math.imul(t,wa)|0;b=b+Math.imul(h,E)|0;a=a+Math.imul(h,wa)|0;m=m+Math.imul(x,sa)|0;b=b+Math.imul(x,Ka)|0;b=b+Math.imul(v,sa)|0;a=a+Math.imul(v,Ka)|0;m=m+Math.imul(q,Qa)|0;b=b+Math.imul(q,Na)|0;b=b+Math.imul(y,Qa)|0;a=a+Math.imul(y,
Na)|0;m=m+Math.imul(k,U)|0;b=b+Math.imul(k,pa)|0;b=b+Math.imul(n,U)|0;a=a+Math.imul(n,pa)|0;m=m+Math.imul(p,ea)|0;b=b+Math.imul(p,Cb)|0;b=b+Math.imul(r,ea)|0;a=a+Math.imul(r,Cb)|0;var G=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(G>>>26)|0,G=G&67108863;m=Math.imul(D,ka);b=Math.imul(D,Z);b=b+Math.imul(A,ka)|0;a=Math.imul(A,Z);m=m+Math.imul(w,E)|0;b=b+Math.imul(w,wa)|0;b=b+Math.imul(z,E)|0;a=a+Math.imul(z,wa)|0;m=m+Math.imul(t,sa)|0;b=b+Math.imul(t,Ka)|0;b=b+Math.imul(h,sa)|0;a=a+Math.imul(h,Ka)|0;m=
m+Math.imul(x,Qa)|0;b=b+Math.imul(x,Na)|0;b=b+Math.imul(v,Qa)|0;a=a+Math.imul(v,Na)|0;m=m+Math.imul(q,U)|0;b=b+Math.imul(q,pa)|0;b=b+Math.imul(y,U)|0;a=a+Math.imul(y,pa)|0;m=m+Math.imul(k,ea)|0;b=b+Math.imul(k,Cb)|0;b=b+Math.imul(n,ea)|0;a=a+Math.imul(n,Cb)|0;m=m+Math.imul(p,Xa)|0;b=b+Math.imul(p,Jc)|0;b=b+Math.imul(r,Xa)|0;a=a+Math.imul(r,Jc)|0;var oa=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(oa>>>26)|0,oa=oa&67108863;m=Math.imul(H,ka);b=Math.imul(H,Z);b=b+Math.imul(u,ka)|0;a=Math.imul(u,Z);m=m+
Math.imul(D,E)|0;b=b+Math.imul(D,wa)|0;b=b+Math.imul(A,E)|0;a=a+Math.imul(A,wa)|0;m=m+Math.imul(w,sa)|0;b=b+Math.imul(w,Ka)|0;b=b+Math.imul(z,sa)|0;a=a+Math.imul(z,Ka)|0;m=m+Math.imul(t,Qa)|0;b=b+Math.imul(t,Na)|0;b=b+Math.imul(h,Qa)|0;a=a+Math.imul(h,Na)|0;m=m+Math.imul(x,U)|0;b=b+Math.imul(x,pa)|0;b=b+Math.imul(v,U)|0;a=a+Math.imul(v,pa)|0;m=m+Math.imul(q,ea)|0;b=b+Math.imul(q,Cb)|0;b=b+Math.imul(y,ea)|0;a=a+Math.imul(y,Cb)|0;m=m+Math.imul(k,Xa)|0;b=b+Math.imul(k,Jc)|0;b=b+Math.imul(n,Xa)|0;a=a+
Math.imul(n,Jc)|0;m=m+Math.imul(p,yb)|0;b=b+Math.imul(p,V)|0;b=b+Math.imul(r,yb)|0;a=a+Math.imul(r,V)|0;var Ha=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(Ha>>>26)|0,Ha=Ha&67108863;m=Math.imul(C,ka);b=Math.imul(C,Z);b=b+Math.imul(na,ka)|0;a=Math.imul(na,Z);m=m+Math.imul(H,E)|0;b=b+Math.imul(H,wa)|0;b=b+Math.imul(u,E)|0;a=a+Math.imul(u,wa)|0;m=m+Math.imul(D,sa)|0;b=b+Math.imul(D,Ka)|0;b=b+Math.imul(A,sa)|0;a=a+Math.imul(A,Ka)|0;m=m+Math.imul(w,Qa)|0;b=b+Math.imul(w,Na)|0;b=b+Math.imul(z,Qa)|0;a=a+Math.imul(z,
Na)|0;m=m+Math.imul(t,U)|0;b=b+Math.imul(t,pa)|0;b=b+Math.imul(h,U)|0;a=a+Math.imul(h,pa)|0;m=m+Math.imul(x,ea)|0;b=b+Math.imul(x,Cb)|0;b=b+Math.imul(v,ea)|0;a=a+Math.imul(v,Cb)|0;m=m+Math.imul(q,Xa)|0;b=b+Math.imul(q,Jc)|0;b=b+Math.imul(y,Xa)|0;a=a+Math.imul(y,Jc)|0;m=m+Math.imul(k,yb)|0;b=b+Math.imul(k,V)|0;b=b+Math.imul(n,yb)|0;a=a+Math.imul(n,V)|0;m=m+Math.imul(p,Eb)|0;b=b+Math.imul(p,R)|0;b=b+Math.imul(r,Eb)|0;a=a+Math.imul(r,R)|0;var Y=(g+m|0)+((b&8191)<<13)|0,g=(a+(b>>>13)|0)+(Y>>>26)|0,Y=
Y&67108863;m=Math.imul(e,ka);b=Math.imul(e,Z);b=b+Math.imul(aa,ka)|0;a=Math.imul(aa,Z);m=m+Math.imul(C,E)|0;b=b+Math.imul(C,wa)|0;b=b+Math.imul(na,E)|0;a=a+Math.imul(na,wa)|0;m=m+Math.imul(H,sa)|0;b=b+Math.imul(H,Ka)|0;b=b+Math.imul(u,sa)|0;a=a+Math.imul(u,Ka)|0;m=m+Math.imul(D,Qa)|0;b=b+Math.imul(D,Na)|0;b=b+Math.imul(A,Qa)|0;a=a+Math.imul(A,Na)|0;m=m+Math.imul(w,U)|0;b=b+Math.imul(w,pa)|0;b=b+Math.imul(z,U)|0;a=a+Math.imul(z,pa)|0;m=m+Math.imul(t,ea)|0;b=b+Math.imul(t,Cb)|0;b=b+Math.imul(h,ea)|
0;a=a+Math.imul(h,Cb)|0;m=m+Math.imul(x,Xa)|0;b=b+Math.imul(x,Jc)|0;b=b+Math.imul(v,Xa)|0;a=a+Math.imul(v,Jc)|0;m=m+Math.imul(q,yb)|0;b=b+Math.imul(q,V)|0;b=b+Math.imul(y,yb)|0;a=a+Math.imul(y,V)|0;m=m+Math.imul(k,Eb)|0;b=b+Math.imul(k,R)|0;b=b+Math.imul(n,Eb)|0;a=a+Math.imul(n,R)|0;m=m+Math.imul(p,d)|0;b=b+Math.imul(p,ha)|0;b=b+Math.imul(r,d)|0;a=a+Math.imul(r,ha)|0;p=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(p>>>26)|0;p&=67108863;m=Math.imul(e,E);b=Math.imul(e,wa);b=b+Math.imul(aa,E)|0;a=Math.imul(aa,
wa);m=m+Math.imul(C,sa)|0;b=b+Math.imul(C,Ka)|0;b=b+Math.imul(na,sa)|0;a=a+Math.imul(na,Ka)|0;m=m+Math.imul(H,Qa)|0;b=b+Math.imul(H,Na)|0;b=b+Math.imul(u,Qa)|0;a=a+Math.imul(u,Na)|0;m=m+Math.imul(D,U)|0;b=b+Math.imul(D,pa)|0;b=b+Math.imul(A,U)|0;a=a+Math.imul(A,pa)|0;m=m+Math.imul(w,ea)|0;b=b+Math.imul(w,Cb)|0;b=b+Math.imul(z,ea)|0;a=a+Math.imul(z,Cb)|0;m=m+Math.imul(t,Xa)|0;b=b+Math.imul(t,Jc)|0;b=b+Math.imul(h,Xa)|0;a=a+Math.imul(h,Jc)|0;m=m+Math.imul(x,yb)|0;b=b+Math.imul(x,V)|0;b=b+Math.imul(v,
yb)|0;a=a+Math.imul(v,V)|0;m=m+Math.imul(q,Eb)|0;b=b+Math.imul(q,R)|0;b=b+Math.imul(y,Eb)|0;a=a+Math.imul(y,R)|0;m=m+Math.imul(k,d)|0;b=b+Math.imul(k,ha)|0;b=b+Math.imul(n,d)|0;a=a+Math.imul(n,ha)|0;k=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(k>>>26)|0;k&=67108863;m=Math.imul(e,sa);b=Math.imul(e,Ka);b=b+Math.imul(aa,sa)|0;a=Math.imul(aa,Ka);m=m+Math.imul(C,Qa)|0;b=b+Math.imul(C,Na)|0;b=b+Math.imul(na,Qa)|0;a=a+Math.imul(na,Na)|0;m=m+Math.imul(H,U)|0;b=b+Math.imul(H,pa)|0;b=b+Math.imul(u,U)|0;a=a+
Math.imul(u,pa)|0;m=m+Math.imul(D,ea)|0;b=b+Math.imul(D,Cb)|0;b=b+Math.imul(A,ea)|0;a=a+Math.imul(A,Cb)|0;m=m+Math.imul(w,Xa)|0;b=b+Math.imul(w,Jc)|0;b=b+Math.imul(z,Xa)|0;a=a+Math.imul(z,Jc)|0;m=m+Math.imul(t,yb)|0;b=b+Math.imul(t,V)|0;b=b+Math.imul(h,yb)|0;a=a+Math.imul(h,V)|0;m=m+Math.imul(x,Eb)|0;b=b+Math.imul(x,R)|0;b=b+Math.imul(v,Eb)|0;a=a+Math.imul(v,R)|0;m=m+Math.imul(q,d)|0;b=b+Math.imul(q,ha)|0;b=b+Math.imul(y,d)|0;a=a+Math.imul(y,ha)|0;q=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(q>>>
26)|0;q&=67108863;m=Math.imul(e,Qa);b=Math.imul(e,Na);b=b+Math.imul(aa,Qa)|0;a=Math.imul(aa,Na);m=m+Math.imul(C,U)|0;b=b+Math.imul(C,pa)|0;b=b+Math.imul(na,U)|0;a=a+Math.imul(na,pa)|0;m=m+Math.imul(H,ea)|0;b=b+Math.imul(H,Cb)|0;b=b+Math.imul(u,ea)|0;a=a+Math.imul(u,Cb)|0;m=m+Math.imul(D,Xa)|0;b=b+Math.imul(D,Jc)|0;b=b+Math.imul(A,Xa)|0;a=a+Math.imul(A,Jc)|0;m=m+Math.imul(w,yb)|0;b=b+Math.imul(w,V)|0;b=b+Math.imul(z,yb)|0;a=a+Math.imul(z,V)|0;m=m+Math.imul(t,Eb)|0;b=b+Math.imul(t,R)|0;b=b+Math.imul(h,
Eb)|0;a=a+Math.imul(h,R)|0;m=m+Math.imul(x,d)|0;b=b+Math.imul(x,ha)|0;b=b+Math.imul(v,d)|0;a=a+Math.imul(v,ha)|0;x=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(x>>>26)|0;x&=67108863;m=Math.imul(e,U);b=Math.imul(e,pa);b=b+Math.imul(aa,U)|0;a=Math.imul(aa,pa);m=m+Math.imul(C,ea)|0;b=b+Math.imul(C,Cb)|0;b=b+Math.imul(na,ea)|0;a=a+Math.imul(na,Cb)|0;m=m+Math.imul(H,Xa)|0;b=b+Math.imul(H,Jc)|0;b=b+Math.imul(u,Xa)|0;a=a+Math.imul(u,Jc)|0;m=m+Math.imul(D,yb)|0;b=b+Math.imul(D,V)|0;b=b+Math.imul(A,yb)|0;a=
a+Math.imul(A,V)|0;m=m+Math.imul(w,Eb)|0;b=b+Math.imul(w,R)|0;b=b+Math.imul(z,Eb)|0;a=a+Math.imul(z,R)|0;m=m+Math.imul(t,d)|0;b=b+Math.imul(t,ha)|0;b=b+Math.imul(h,d)|0;a=a+Math.imul(h,ha)|0;t=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(t>>>26)|0;t&=67108863;m=Math.imul(e,ea);b=Math.imul(e,Cb);b=b+Math.imul(aa,ea)|0;a=Math.imul(aa,Cb);m=m+Math.imul(C,Xa)|0;b=b+Math.imul(C,Jc)|0;b=b+Math.imul(na,Xa)|0;a=a+Math.imul(na,Jc)|0;m=m+Math.imul(H,yb)|0;b=b+Math.imul(H,V)|0;b=b+Math.imul(u,yb)|0;a=a+Math.imul(u,
V)|0;m=m+Math.imul(D,Eb)|0;b=b+Math.imul(D,R)|0;b=b+Math.imul(A,Eb)|0;a=a+Math.imul(A,R)|0;m=m+Math.imul(w,d)|0;b=b+Math.imul(w,ha)|0;b=b+Math.imul(z,d)|0;a=a+Math.imul(z,ha)|0;w=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(w>>>26)|0;w&=67108863;m=Math.imul(e,Xa);b=Math.imul(e,Jc);b=b+Math.imul(aa,Xa)|0;a=Math.imul(aa,Jc);m=m+Math.imul(C,yb)|0;b=b+Math.imul(C,V)|0;b=b+Math.imul(na,yb)|0;a=a+Math.imul(na,V)|0;m=m+Math.imul(H,Eb)|0;b=b+Math.imul(H,R)|0;b=b+Math.imul(u,Eb)|0;a=a+Math.imul(u,R)|0;m=m+Math.imul(D,
d)|0;b=b+Math.imul(D,ha)|0;b=b+Math.imul(A,d)|0;a=a+Math.imul(A,ha)|0;D=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(D>>>26)|0;D&=67108863;m=Math.imul(e,yb);b=Math.imul(e,V);b=b+Math.imul(aa,yb)|0;a=Math.imul(aa,V);m=m+Math.imul(C,Eb)|0;b=b+Math.imul(C,R)|0;b=b+Math.imul(na,Eb)|0;a=a+Math.imul(na,R)|0;m=m+Math.imul(H,d)|0;b=b+Math.imul(H,ha)|0;b=b+Math.imul(u,d)|0;a=a+Math.imul(u,ha)|0;H=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(H>>>26)|0;H&=67108863;m=Math.imul(e,Eb);b=Math.imul(e,R);b=b+Math.imul(aa,
Eb)|0;a=Math.imul(aa,R);m=m+Math.imul(C,d)|0;b=b+Math.imul(C,ha)|0;b=b+Math.imul(na,d)|0;a=a+Math.imul(na,ha)|0;C=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(C>>>26)|0;C&=67108863;m=Math.imul(e,d);b=Math.imul(e,ha);b=b+Math.imul(aa,d)|0;a=Math.imul(aa,ha);r=(g+m|0)+((b&8191)<<13)|0;g=(a+(b>>>13)|0)+(r>>>26)|0;f[0]=Aa;f[1]=zb;f[2]=Ac;f[3]=Kc;f[4]=P;f[5]=G;f[6]=oa;f[7]=Ha;f[8]=Y;f[9]=p;f[10]=k;f[11]=q;f[12]=x;f[13]=t;f[14]=w;f[15]=D;f[16]=H;f[17]=C;f[18]=r&67108863;0!==g&&(f[19]=g,c.length++);return c};
Math.imul||(aa=n);f.prototype.mulTo=function(b,a){var c;c=this.length+b.length;if(10===this.length&&10===b.length)c=aa(this,b,a);else if(63>c)c=n(this,b,a);else if(1024>c){a.negative=b.negative^this.negative;a.length=this.length+b.length;for(var e=0,d=c=0;d<a.length-1;d++){var m=c;c=0;for(var e=e&67108863,f=Math.min(d,b.length-1),g=Math.max(0,d-this.length+1);g<=f;g++){var k=(this.words[d-g]|0)*(b.words[g]|0),p=k&67108863,m=m+(k/67108864|0)|0,p=p+e|0,e=p&67108863,m=m+(p>>>26)|0;c+=m>>>26;m&=67108863}a.words[d]=
e;e=m}0!==e?a.words[d]=e:a.length--;c=a.strip()}else c=(new v).mulp(this,b,a);return c};v.prototype.makeRBT=function(b){for(var a=Array(b),c=f.prototype._countBits(b)-1,e=0;e<b;e++)a[e]=this.revBin(e,c,b);return a};v.prototype.revBin=function(b,a,c){if(0===b||b===c-1)return b;for(var e=c=0;e<a;e++)c|=(b&1)<<a-e-1,b>>=1;return c};v.prototype.permute=function(b,a,c,e,d,m){for(var f=0;f<m;f++)e[f]=a[b[f]],d[f]=c[b[f]]};v.prototype.transform=function(b,a,c,e,d,m){this.permute(m,b,a,c,e,d);for(b=1;b<d;b<<=
1){a=b<<1;m=Math.cos(2*Math.PI/a);for(var f=Math.sin(2*Math.PI/a),g=0;g<d;g+=a)for(var k=m,p=f,r=0;r<b;r++){var q=c[g+r],n=e[g+r],x=c[g+r+b],y=e[g+r+b],t=k*x-p*y,y=k*y+p*x,x=t;c[g+r]=q+x;e[g+r]=n+y;c[g+r+b]=q-x;e[g+r+b]=n-y;r!==a&&(t=m*k-f*p,p=m*p+f*k,k=t)}}};v.prototype.guessLen13b=function(b,a){for(var c=Math.max(a,b)|1,e=c&1,d=0,c=c/2|0;c;c>>>=1)d++;return 1<<d+1+e};v.prototype.conjugate=function(b,a,c){if(!(1>=c))for(var e=0;e<c/2;e++){var d=b[e];b[e]=b[c-e-1];b[c-e-1]=d;d=a[e];a[e]=-a[c-e-1];
a[c-e-1]=-d}};v.prototype.normalize13b=function(b,a){for(var c=0,e=0;e<a/2;e++)c=8192*Math.round(b[2*e+1]/a)+Math.round(b[2*e]/a)+c,b[e]=c&67108863,c=67108864>c?0:c/67108864|0;return b};v.prototype.convert13b=function(b,a,c,e){for(var d=0,m=0;m<a;m++)d+=b[m]|0,c[2*m]=d&8191,d>>>=13,c[2*m+1]=d&8191,d>>>=13;for(m=2*a;m<e;++m)c[m]=0;g(0===d);g(0===(d&-8192))};v.prototype.stub=function(b){for(var a=Array(b),c=0;c<b;c++)a[c]=0;return a};v.prototype.mulp=function(b,a,c){var e=2*this.guessLen13b(b.length,
a.length),d=this.makeRBT(e),m=this.stub(e),f=Array(e),g=Array(e),k=Array(e),p=Array(e),r=Array(e),q=Array(e),n=c.words;n.length=e;this.convert13b(b.words,b.length,f,e);this.convert13b(a.words,a.length,p,e);this.transform(f,m,g,k,e,d);this.transform(p,m,r,q,e,d);for(f=0;f<e;f++)p=g[f]*r[f]-k[f]*q[f],k[f]=g[f]*q[f]+k[f]*r[f],g[f]=p;this.conjugate(g,k,e);this.transform(g,k,n,m,e,d);this.conjugate(n,m,e);this.normalize13b(n,e);c.negative=b.negative^a.negative;c.length=b.length+a.length;return c.strip()};
f.prototype.mul=function(b){var a=new f(null);a.words=Array(this.length+b.length);return this.mulTo(b,a)};f.prototype.mulf=function(b){var a=new f(null);a.words=Array(this.length+b.length);return(new v).mulp(this,b,a)};f.prototype.imul=function(b){return this.clone().mulTo(b,this)};f.prototype.imuln=function(b){g("number"===typeof b);g(67108864>b);for(var a=0,c=0;c<this.length;c++){var e=(this.words[c]|0)*b,d=(e&67108863)+(a&67108863),a=a>>26,a=a+(e/67108864|0),a=a+(d>>>26);this.words[c]=d&67108863}0!==
a&&(this.words[c]=a,this.length++);return this};f.prototype.muln=function(b){return this.clone().imuln(b)};f.prototype.sqr=function(){return this.mul(this)};f.prototype.isqr=function(){return this.imul(this.clone())};f.prototype.pow=function(b){for(var a=Array(b.bitLength()),c=0;c<a.length;c++){var e=c%26;a[c]=(b.words[c/26|0]&1<<e)>>>e}if(0===a.length)return new f(1);b=this;for(c=0;c<a.length&&0===a[c];c++,b=b.sqr());if(++c<a.length)for(e=b.sqr();c<a.length;c++,e=e.sqr())0!==a[c]&&(b=b.mul(e));return b};
f.prototype.iushln=function(b){g("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;var c=67108863>>>26-a<<26-a,e;if(0!==a){var d=0;for(e=0;e<this.length;e++){var m=this.words[e]&c;this.words[e]=(this.words[e]|0)-m<<a|d;d=m>>>26-a}d&&(this.words[e]=d,this.length++)}if(0!==b){for(e=this.length-1;0<=e;e--)this.words[e+b]=this.words[e];for(e=0;e<b;e++)this.words[e]=0;this.length+=b}return this.strip()};f.prototype.ishln=function(b){g(0===this.negative);return this.iushln(b)};f.prototype.iushrn=function(b,
a,c){g("number"===typeof b&&0<=b);var e=b%26,d=Math.min((b-e)/26,this.length);b=67108863^67108863>>>e<<e;a=(a?(a-a%26)/26:0)-d;a=Math.max(0,a);if(c){for(var m=0;m<d;m++)c.words[m]=this.words[m];c.length=d}if(0!==d)if(this.length>d)for(this.length-=d,m=0;m<this.length;m++)this.words[m]=this.words[m+d];else this.words[0]=0,this.length=1;d=0;for(m=this.length-1;0<=m&&(0!==d||m>=a);m--){var f=this.words[m]|0;this.words[m]=d<<26-e|f>>>e;d=f&b}c&&0!==d&&(c.words[c.length++]=d);0===this.length&&(this.words[0]=
0,this.length=1);return this.strip()};f.prototype.ishrn=function(b,a,c){g(0===this.negative);return this.iushrn(b,a,c)};f.prototype.shln=function(b){return this.clone().ishln(b)};f.prototype.ushln=function(b){return this.clone().iushln(b)};f.prototype.shrn=function(b){return this.clone().ishrn(b)};f.prototype.ushrn=function(b){return this.clone().iushrn(b)};f.prototype.testn=function(b){g("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;return this.length<=b?!1:!!(this.words[b]&1<<a)};f.prototype.imaskn=
function(b){g("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;g(0===this.negative,"imaskn works only with positive numbers");if(this.length<=b)return this;0!==a&&b++;this.length=Math.min(b,this.length);0!==a&&(this.words[this.length-1]&=67108863^67108863>>>a<<a);return this.strip()};f.prototype.maskn=function(b){return this.clone().imaskn(b)};f.prototype.iaddn=function(b){g("number"===typeof b);g(67108864>b);if(0>b)return this.isubn(-b);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<
b)return this.words[0]=b-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(b);this.negative=1;return this}return this._iaddn(b)};f.prototype._iaddn=function(b){this.words[0]+=b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};f.prototype.isubn=function(b){g("number"===typeof b);g(67108864>b);if(0>b)return this.iaddn(-b);if(0!==this.negative)return this.negative=
0,this.iaddn(b),this.negative=1,this;this.words[0]-=b;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};f.prototype.addn=function(b){return this.clone().iaddn(b)};f.prototype.subn=function(b){return this.clone().isubn(b)};f.prototype.iabs=function(){this.negative=0;return this};f.prototype.abs=function(){return this.clone().iabs()};f.prototype._ishlnsubmul=
function(b,a,c){var e;this._expand(b.length+c);var d,m=0;for(e=0;e<b.length;e++)d=(this.words[e+c]|0)+m,m=(b.words[e]|0)*a,d-=m&67108863,m=(d>>26)-(m/67108864|0),this.words[e+c]=d&67108863;for(;e<this.length-c;e++)d=(this.words[e+c]|0)+m,m=d>>26,this.words[e+c]=d&67108863;if(0===m)return this.strip();g(-1===m);for(e=m=0;e<this.length;e++)d=-(this.words[e]|0)+m,m=d>>26,this.words[e]=d&67108863;this.negative=1;return this.strip()};f.prototype._wordDiv=function(b,a){var c=this.length-b.length,e=this.clone(),
d=b,m=d.words[d.length-1]|0,c=26-this._countBits(m);0!==c&&(d=d.ushln(c),e.iushln(c),m=d.words[d.length-1]|0);var g=e.length-d.length,k;if("mod"!==a){k=new f(null);k.length=g+1;k.words=Array(k.length);for(var p=0;p<k.length;p++)k.words[p]=0}p=e.clone()._ishlnsubmul(d,1,g);0===p.negative&&(e=p,k&&(k.words[g]=1));for(--g;0<=g;g--){p=67108864*(e.words[d.length+g]|0)+(e.words[d.length+g-1]|0);p=Math.min(p/m|0,67108863);for(e._ishlnsubmul(d,p,g);0!==e.negative;)p--,e.negative=0,e._ishlnsubmul(d,1,g),e.isZero()||
(e.negative^=1);k&&(k.words[g]=p)}k&&k.strip();e.strip();"div"!==a&&0!==c&&e.iushrn(c);return{div:k||null,mod:e}};f.prototype.divmod=function(b,a,c){g(!b.isZero());if(this.isZero())return{div:new f(0),mod:new f(0)};var e,d,m;return 0!==this.negative&&0===b.negative?(m=this.neg().divmod(b,a),"mod"!==a&&(e=m.div.neg()),"div"!==a&&(d=m.mod.neg(),c&&0!==d.negative&&d.iadd(b)),{div:e,mod:d}):0===this.negative&&0!==b.negative?(m=this.divmod(b.neg(),a),"mod"!==a&&(e=m.div.neg()),{div:e,mod:m.mod}):0!==(this.negative&
b.negative)?(m=this.neg().divmod(b.neg(),a),"div"!==a&&(d=m.mod.neg(),c&&0!==d.negative&&d.isub(b)),{div:m.div,mod:d}):b.length>this.length||0>this.cmp(b)?{div:new f(0),mod:this}:1===b.length?"div"===a?{div:this.divn(b.words[0]),mod:null}:"mod"===a?{div:null,mod:new f(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new f(this.modn(b.words[0]))}:this._wordDiv(b,a)};f.prototype.div=function(b){return this.divmod(b,"div",!1).div};f.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod};
f.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod};f.prototype.divRound=function(b){var a=this.divmod(b);if(a.mod.isZero())return a.div;var c=0!==a.div.negative?a.mod.isub(b):a.mod,e=b.ushrn(1);b=b.andln(1);c=c.cmp(e);return 0>c||1===b&&0===c?a.div:0!==a.div.negative?a.div.isubn(1):a.div.iaddn(1)};f.prototype.modn=function(b){g(67108863>=b);for(var a=67108864%b,c=0,e=this.length-1;0<=e;e--)c=(a*c+(this.words[e]|0))%b;return c};f.prototype.idivn=function(b){g(67108863>=b);for(var a=0,
c=this.length-1;0<=c;c--)a=(this.words[c]|0)+67108864*a,this.words[c]=a/b|0,a%=b;return this.strip()};f.prototype.divn=function(b){return this.clone().idivn(b)};f.prototype.egcd=function(b){g(0===b.negative);g(!b.isZero());var a=this,c=b.clone(),a=0!==a.negative?a.umod(b):a.clone();b=new f(1);for(var e=new f(0),d=new f(0),m=new f(1),k=0;a.isEven()&&c.isEven();)a.iushrn(1),c.iushrn(1),++k;for(var p=c.clone(),q=a.clone();!a.isZero();){for(var n=0,r=1;0===(a.words[0]&r)&&26>n;++n,r<<=1);if(0<n)for(a.iushrn(n);0<
n--;){if(b.isOdd()||e.isOdd())b.iadd(p),e.isub(q);b.iushrn(1);e.iushrn(1)}n=0;for(r=1;0===(c.words[0]&r)&&26>n;++n,r<<=1);if(0<n)for(c.iushrn(n);0<n--;){if(d.isOdd()||m.isOdd())d.iadd(p),m.isub(q);d.iushrn(1);m.iushrn(1)}0<=a.cmp(c)?(a.isub(c),b.isub(d),e.isub(m)):(c.isub(a),d.isub(b),m.isub(e))}return{a:d,b:m,gcd:c.iushln(k)}};f.prototype._invmp=function(b){g(0===b.negative);g(!b.isZero());for(var a=this,c=b.clone(),a=0!==a.negative?a.umod(b):a.clone(),e=new f(1),d=new f(0),m=c.clone();0<a.cmpn(1)&&
0<c.cmpn(1);){for(var k=0,p=1;0===(a.words[0]&p)&&26>k;++k,p<<=1);if(0<k)for(a.iushrn(k);0<k--;)e.isOdd()&&e.iadd(m),e.iushrn(1);k=0;for(p=1;0===(c.words[0]&p)&&26>k;++k,p<<=1);if(0<k)for(c.iushrn(k);0<k--;)d.isOdd()&&d.iadd(m),d.iushrn(1);0<=a.cmp(c)?(a.isub(c),e.isub(d)):(c.isub(a),d.isub(e))}a=0===a.cmpn(1)?e:d;0>a.cmpn(0)&&a.iadd(b);return a};f.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var a=this.clone();b=b.clone();a.negative=0;for(var c=b.negative=
0;a.isEven()&&b.isEven();c++)a.iushrn(1),b.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var e=a.cmp(b);if(0>e)e=a,a=b,b=e;else if(0===e||0===b.cmpn(1))break;a.isub(b)}while(1);return b.iushln(c)};f.prototype.invm=function(b){return this.egcd(b).a.umod(b)};f.prototype.isEven=function(){return 0===(this.words[0]&1)};f.prototype.isOdd=function(){return 1===(this.words[0]&1)};f.prototype.andln=function(b){return this.words[0]&b};f.prototype.bincn=function(b){g("number"===typeof b);
var a=b%26;b=(b-a)/26;a=1<<a;if(this.length<=b)return this._expand(b+1),this.words[b]|=a,this;for(;0!==a&&b<this.length;b++){var c=this.words[b]|0,c=c+a,a=c>>>26,c=c&67108863;this.words[b]=c}0!==a&&(this.words[b]=a,this.length++);return this};f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};f.prototype.cmpn=function(b){var a=0>b;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();1<this.length?b=1:(a&&(b=-b),g(67108863>=b,"Number is too big"),a=
this.words[0]|0,b=a===b?0:a<b?-1:1);return 0!==this.negative?-b|0:b};f.prototype.cmp=function(b){if(0!==this.negative&&0===b.negative)return-1;if(0===this.negative&&0!==b.negative)return 1;b=this.ucmp(b);return 0!==this.negative?-b|0:b};f.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var a=0,c=this.length-1;0<=c;c--){var e=this.words[c]|0,d=b.words[c]|0;if(e!==d){e<d?a=-1:e>d&&(a=1);break}}return a};f.prototype.gtn=function(b){return 1===this.cmpn(b)};
f.prototype.gt=function(b){return 1===this.cmp(b)};f.prototype.gten=function(b){return 0<=this.cmpn(b)};f.prototype.gte=function(b){return 0<=this.cmp(b)};f.prototype.ltn=function(b){return-1===this.cmpn(b)};f.prototype.lt=function(b){return-1===this.cmp(b)};f.prototype.lten=function(b){return 0>=this.cmpn(b)};f.prototype.lte=function(b){return 0>=this.cmp(b)};f.prototype.eqn=function(b){return 0===this.cmpn(b)};f.prototype.eq=function(b){return 0===this.cmp(b)};f.red=function(b){return new m(b)};
f.prototype.toRed=function(b){g(!this.red,"Already a number in reduction context");g(0===this.negative,"red works only with positives");return b.convertTo(this)._forceRed(b)};f.prototype.fromRed=function(){g(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};f.prototype._forceRed=function(b){this.red=b;return this};f.prototype.forceRed=function(b){g(!this.red,"Already a number in reduction context");return this._forceRed(b)};f.prototype.redAdd=function(b){g(this.red,
"redAdd works only with red numbers");return this.red.add(this,b)};f.prototype.redIAdd=function(b){g(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};f.prototype.redSub=function(b){g(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};f.prototype.redISub=function(b){g(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};f.prototype.redShl=function(b){g(this.red,"redShl works only with red numbers");return this.red.shl(this,
b)};f.prototype.redMul=function(b){g(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};f.prototype.redIMul=function(b){g(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};f.prototype.redSqr=function(){g(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};f.prototype.redISqr=function(){g(this.red,"redISqr works only with red numbers");this.red._verify1(this);
return this.red.isqr(this)};f.prototype.redSqrt=function(){g(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};f.prototype.redInvm=function(){g(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};f.prototype.redNeg=function(){g(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};f.prototype.redPow=function(b){g(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);
return this.red.pow(this,b)};var C={k256:null,p224:null,p192:null,p25519:null};z.prototype._tmp=function(){var b=new f(null);b.words=Array(Math.ceil(this.n/13));return b};z.prototype.ireduce=function(b){var a;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),a=b.bitLength();while(a>this.n);a=a<this.n?-1:b.ucmp(this.p);0===a?(b.words[0]=0,b.length=1):0<a?b.isub(this.p):b.strip();return b};z.prototype.split=function(b,a){b.iushrn(this.n,0,a)};z.prototype.imulK=function(b){return b.imul(this.k)};
q(w,z);w.prototype.split=function(b,a){for(var c=Math.min(b.length,9),e=0;e<c;e++)a.words[e]=b.words[e];a.length=c;if(9>=b.length)b.words[0]=0,b.length=1;else{c=b.words[9];a.words[a.length++]=c&4194303;for(e=10;e<b.length;e++){var d=b.words[e]|0;b.words[e-10]=(d&4194303)<<4|c>>>22;c=d}c>>>=22;b.words[e-10]=c;b.length=0===c&&10<b.length?b.length-10:b.length-9}};w.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var a=0,c=0;c<b.length;c++){var e=b.words[c]|0,a=a+
977*e;b.words[c]=a&67108863;a=64*e+(a/67108864|0)}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};q(p,z);q(e,z);q(c,z);c.prototype.imulK=function(b){for(var a=0,c=0;c<b.length;c++){var a=19*(b.words[c]|0)+a,e=a&67108863,a=a>>>26;b.words[c]=e}0!==a&&(b.words[b.length++]=a);return b};f._prime=function(b){if(C[b])return C[b];var a;if("k256"===b)a=new w;else if("p224"===b)a=new p;else if("p192"===b)a=new e;else if("p25519"===b)a=new c;else throw Error("Unknown prime "+
b);return C[b]=a};m.prototype._verify1=function(b){g(0===b.negative,"red works only with positives");g(b.red,"red works only with red numbers")};m.prototype._verify2=function(b,a){g(0===(b.negative|a.negative),"red works only with positives");g(b.red&&b.red===a.red,"red works only with red numbers")};m.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)};m.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)};
m.prototype.add=function(b,a){this._verify2(b,a);var c=b.add(a);0<=c.cmp(this.m)&&c.isub(this.m);return c._forceRed(this)};m.prototype.iadd=function(b,a){this._verify2(b,a);var c=b.iadd(a);0<=c.cmp(this.m)&&c.isub(this.m);return c};m.prototype.sub=function(b,a){this._verify2(b,a);var c=b.sub(a);0>c.cmpn(0)&&c.iadd(this.m);return c._forceRed(this)};m.prototype.isub=function(b,a){this._verify2(b,a);var c=b.isub(a);0>c.cmpn(0)&&c.iadd(this.m);return c};m.prototype.shl=function(b,a){this._verify1(b);
return this.imod(b.ushln(a))};m.prototype.imul=function(b,a){this._verify2(b,a);return this.imod(b.imul(a))};m.prototype.mul=function(b,a){this._verify2(b,a);return this.imod(b.mul(a))};m.prototype.isqr=function(b){return this.imul(b,b.clone())};m.prototype.sqr=function(b){return this.mul(b,b)};m.prototype.sqrt=function(b){if(b.isZero())return b.clone();var a=this.m.andln(3);g(1===a%2);if(3===a)return a=this.m.add(new f(1)).iushrn(2),this.pow(b,a);for(var c=this.m.subn(1),e=0;!c.isZero()&&0===c.andln(1);)e++,
c.iushrn(1);g(!c.isZero());for(var a=(new f(1)).toRed(this),d=a.redNeg(),m=this.m.subn(1).iushrn(1),k=this.m.bitLength(),k=(new f(2*k*k)).toRed(this);0!==this.pow(k,m).cmp(d);)k.redIAdd(d);m=this.pow(k,c);d=this.pow(b,c.addn(1).iushrn(1));b=this.pow(b,c);for(c=e;0!==b.cmp(a);){k=b;for(e=0;0!==k.cmp(a);e++)k=k.redSqr();g(e<c);m=this.pow(m,(new f(1)).iushln(c-e-1));d=d.redMul(m);m=m.redSqr();b=b.redMul(m);c=e}return d};m.prototype.invm=function(b){b=b._invmp(this.m);return 0!==b.negative?(b.negative=
0,this.imod(b).redNeg()):this.imod(b)};m.prototype.pow=function(b,a){if(a.isZero())return(new f(1)).toRed(this);if(0===a.cmpn(1))return b.clone();var c=Array(16);c[0]=(new f(1)).toRed(this);c[1]=b;for(var e=2;e<c.length;e++)c[e]=this.mul(c[e-1],b);var d=c[0],m=0,g=0,k=a.bitLength()%26;0===k&&(k=26);for(e=a.length-1;0<=e;e--){for(var p=a.words[e],k=k-1;0<=k;k--){var q=p>>k&1;d!==c[0]&&(d=this.sqr(d));if(0===q&&0===m)g=0;else if(m<<=1,m|=q,g++,4===g||0===e&&0===k)d=this.mul(d,c[m]),m=g=0}k=26}return d};
m.prototype.convertTo=function(b){var a=b.umod(this.m);return a===b?a.clone():a};m.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};f.mont=function(b){return new x(b)};q(x,m);x.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))};x.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};x.prototype.imul=function(b,a){if(b.isZero()||a.isZero())return b.words[0]=0,b.length=1,b;var c=b.imul(a),e=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),
e=c=c.isub(e).iushrn(this.shift);0<=c.cmp(this.m)?e=c.isub(this.m):0>c.cmpn(0)&&(e=c.iadd(this.m));return e._forceRed(this)};x.prototype.mul=function(b,a){if(b.isZero()||a.isZero())return(new f(0))._forceRed(this);var c=b.mul(a),e=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c=c.isub(e).iushrn(this.shift);0<=c.cmp(this.m)?e=c.isub(this.m):0>c.cmpn(0)&&(e=c.iadd(this.m));return e._forceRed(this)};x.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof h||h,this)},{buffer:65}],58:[function(a,h,u){function t(a,d,f,g){for(var k=0,e=0,c=0,m=a.length;c<m;++c){var q=a[c],y;a:{for(y=0;y<d;++y)if(!(q[y]<=q[y+d])){y=!0;break a}y=!1}if(!y){for(y=0;y<2*d;++y)f[k++]=q[y];g[e++]=c}}return e}function k(a,g,k,w){var p=a.length,e=g.length;if(!(0>=p||0>=e)){var c=a[0].length>>>1;if(!(0>=c)){var m,x=q.mallocDouble(2*c*p),y=q.mallocInt32(p),p=t(a,c,x,y);if(0<p){if(1===c&&w)f.init(p),m=f.sweepComplete(c,k,0,p,x,y,0,p,x,y);else{a=q.mallocDouble(2*c*e);var h=
q.mallocInt32(e),e=t(g,c,a,h);0<e&&(f.init(p+e),m=1===c?f.sweepBipartite(c,k,0,p,x,y,0,e,a,h):d(c,k,w,p,x,y,e,a,h),q.free(a),q.free(h))}q.free(x);q.free(y)}return m}}}function g(a,d){D.push([a,d])}h.exports=function(a,d,f){switch(arguments.length){case 1:return D=[],k(a,a,g,!0),D;case 2:if("function"===typeof d)return k(a,a,d,!0);D=[];k(a,d,g,!1);return D;case 3:return k(a,d,f,!1);default:throw Error("box-intersect: Invalid arguments");}};var q=a("typedarray-pool"),f=a("./lib/sweep"),d=a("./lib/intersect"),
D},{"./lib/intersect":60,"./lib/sweep":64,"typedarray-pool":126}],59:[function(a,h,u){function t(a){function q(f,q){var t,p="bruteForce"+(f?"Red":"Blue")+(q?"Flip":"")+(a?"Full":"");t=["function ",p,"(",k.join(),"){","var ","es","=2*","d",";"];var e="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";f?t.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",e):t.push(e,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");
a?t.push("if(y1<x0||x1<y0)continue;"):q?t.push("if(y0<=x0||x1<y0)continue;"):t.push("if(y0<x0||x1<y0)continue;");t.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");q?t.push("yi,xi"):t.push("xi,yi");t.push(");if(rv!==void 0)return rv;}}}");t=t.join("");d.push(t);n.push("return "+p+"("+k.join()+");")}var f="bruteForce"+(a?"Full":"Partial"),d=[],t=k.slice();a||t.splice(3,0,"fp");var n=["function "+f+"("+t.join()+"){"];n.push("if(re-rs>be-bs){");
a?(q(!0,!1),n.push("}else{"),q(!1,!1)):(n.push("if(fp){"),q(!0,!0),n.push("}else{"),q(!0,!1),n.push("}}else{if(fp){"),q(!1,!0),n.push("}else{"),q(!1,!1),n.push("}"));n.push("}}return "+f);f=d.join("")+n.join("");return(new Function(f))()}var k="d ax vv rs re rb ri bs be bb bi".split(" ");u.partial=t(!1);u.full=t(!0)},{}],60:[function(a,h,u){function t(a,c,b,e,d,m,f,g,k){var p=y*a;na[p]=c;na[p+1]=b;na[p+2]=e;na[p+3]=d;na[p+4]=m;na[p+5]=f;a*=H;A[a]=g;A[a+1]=k}h.exports=function(a,h,b,l,B,L,u,F,fa){var N=
8*g.log2(l+u+1)*(a+1)|0,ba=g.nextPow2(y*N);na.length<ba&&(k.free(na),na=k.mallocInt32(ba));N=g.nextPow2(H*N);A.length<N&&(k.free(A),A=k.mallocDouble(N));var N=0,ba=2*a,I;t(N++,0,0,l,0,u,b?16:0,-Infinity,Infinity);for(b||t(N++,0,0,u,0,l,1,-Infinity,Infinity);0<N;){--N;b=N*y;var r=na[b];u=na[b+1];var J=na[b+2],la=na[b+3],ia=na[b+4];b=na[b+5];l=N*H;var ua=A[l],ab=A[l+1],ma=b&1,za=!!(b&16),da=B,ga=L,O=F;l=fa;ma&&(da=F,ga=fa,O=B,l=L);if(b&2&&(J=e(a,r,u,J,da,ga,ab),u>=J))continue;if(b&4&&(u=c(a,r,u,J,da,
ga,ua),u>=J))continue;b=J-u;var T=ia-la;if(za){if(a*b*(b+T)<z){I=d.scanComplete(a,r,h,u,J,da,ga,la,ia,O,l);if(void 0!==I)return I;continue}}else if(a*Math.min(b,T)<n){I=q(a,r,h,ma,u,J,da,ga,la,ia,O,l);if(void 0!==I)return I;continue}else if(a*b*T<v){I=d.scanBipartite(a,r,h,ma,u,J,da,ga,la,ia,O,l);if(void 0!==I)return I;continue}b=w(a,r,u,J,da,ga,ua,ab);if(u<b)if(a*(b-u)<n){if(I=f(a,r+1,h,u,b,da,ga,la,ia,O,l),void 0!==I)return I}else if(r===a-2){if(I=ma?d.sweepBipartite(a,h,la,ia,O,l,u,b,da,ga):d.sweepBipartite(a,
h,u,b,da,ga,la,ia,O,l),void 0!==I)return I}else t(N++,r+1,u,b,la,ia,ma,-Infinity,Infinity),t(N++,r+1,la,ia,u,b,ma^1,-Infinity,Infinity);if(b<J)if(u=D(a,r,la,ia,O,l),I=O[ba*u+r],T=p(a,r,u,ia,O,l,I),T<ia&&t(N++,r,b,J,T,ia,(ma|4)+(za?16:0),I,ab),la<u&&t(N++,r,b,J,la,u,(ma|2)+(za?16:0),ua,I),u+1===T){if(za)a:{la=a;ia=h;l=l[u];ma=2*la;u*=ma;ua=O[u+r];ab=b;b*=ma;b:for(;ab<J;++ab,b+=ma)if(za=ga[ab],za!==l&&(T=da[b+r],I=da[b+r+la],!(ua<T||I<ua))){for(var ra=r+1;ra<la;++ra){T=da[b+ra];I=da[b+ra+la];var S=
O[u+ra+la];if(I<O[u+ra]||S<T)continue b}za=ia(za,l);if(void 0!==za){I=za;break a}}I=void 0}else a:{la=a;ia=h;l=l[u];ua=2*la;u*=ua;ab=O[u+r];za=b;b*=ua;b:for(;za<J;++za,b+=ua)if(T=da[b+r],I=da[b+r+la],!(ab<T||I<ab||ma&&ab===T)){ra=ga[za];for(S=r+1;S<la;++S){T=da[b+S];I=da[b+S+la];var Gb=O[u+S+la];if(I<O[u+S]||Gb<T)continue b}T=ma?ia(l,ra):ia(ra,l);if(void 0!==T){I=T;break a}}I=void 0}if(void 0!==I)return I}else if(u<T)if(za){if(J=m(a,r,b,J,da,ga,I),b<J)if(la=p(a,r,b,J,da,ga,I),r===a-2){if(b<la&&(I=
d.sweepComplete(a,h,b,la,da,ga,u,T,O,l),void 0!==I)||la<J&&(I=d.sweepBipartite(a,h,la,J,da,ga,u,T,O,l),void 0!==I))return I}else b<la&&t(N++,r+1,b,la,u,T,16,-Infinity,Infinity),la<J&&(t(N++,r+1,la,J,u,T,0,-Infinity,Infinity),t(N++,r+1,u,T,la,J,1,-Infinity,Infinity))}else J=ma?x(a,r,b,J,da,ga,I):m(a,r,b,J,da,ga,I),b<J&&(r===a-2?ma?d.sweepBipartite(a,h,u,T,O,l,b,J,da,ga):d.sweepBipartite(a,h,b,J,da,ga,u,T,O,l):(t(N++,r+1,b,J,u,T,ma,-Infinity,Infinity),t(N++,r+1,u,T,b,J,ma^1,-Infinity,Infinity)))}};
var k=a("typedarray-pool"),g=a("bit-twiddle");h=a("./brute");var q=h.partial,f=h.full,d=a("./sweep"),D=a("./median");a=a("./partition");var n=128,v=4194304,z=4194304,w=a("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),p=a("lo===p0",["p0"]),e=a("lo<p0",["p0"]),c=a("hi<=p0",["p0"]),m=a("lo<=p0&&p0<=hi",["p0"]),x=a("lo<p0&&p0<=hi",["p0"]),y=6,H=2,na=k.mallocInt32(1024),A=k.mallocDouble(1024)},{"./brute":59,"./median":61,"./partition":62,"./sweep":64,"bit-twiddle":56,"typedarray-pool":126}],61:[function(a,h,u){h.exports=
function(a,q,f,d,h,n){if(d<=f+1)return f;var v=f,z=d;d=d+f>>>1;for(var w=2*a,p=d,e=h[w*d+q];v<z;){if(z-v<k){for(var p=q,e=h,c=n,m=2*a,x=m*(v+1)+p,y=v+1;y<z;++y,x+=m)for(var H=e[x],u=y,A=m*(y-1);u>v&&e[A+p]>H;--u,A-=m){for(var aa=A,C=A+m,b=0;b<m;++b,++aa,++C){var l=e[aa];e[aa]=e[C];e[C]=l}aa=c[u];c[u]=c[u-1];c[u-1]=aa}break}x=z-v;p=Math.random()*x+v|0;e=h[w*p+q];m=Math.random()*x+v|0;c=h[w*m+q];y=Math.random()*x+v|0;x=h[w*y+q];e<=c?x>=c?(p=m,e=c):e>=x||(p=y,e=x):c>=x?(p=m,e=c):x>=e||(p=y,e=x);c=w*
(z-1);m=w*p;for(x=0;x<w;++x,++c,++m)y=h[c],h[c]=h[m],h[m]=y;c=n[z-1];n[z-1]=n[p];n[p]=c;p=t(a,q,v,z-1,h,n,e);c=w*(z-1);m=w*p;for(x=0;x<w;++x,++c,++m)y=h[c],h[c]=h[m],h[m]=y;c=n[z-1];n[z-1]=n[p];n[p]=c;if(d<p){for(z=p-1;v<z&&h[w*(z-1)+q]===e;)--z;z+=1}else if(p<d)for(v=p+1;v<z&&h[w*v+q]===e;)v+=1;else break}return t(a,q,f,d,h,n,h[w*d+q])};var t=a("./partition")("lo<p0",["p0"]),k=8},{"./partition":62}],62:[function(a,h,u){h.exports=function(a,g){var q="abcdef".split("").concat(g),f=[];0<=a.indexOf("lo")&&
f.push("lo=e[k+n]");0<=a.indexOf("hi")&&f.push("hi=e[k+o]");q.push(t.replace("_",f.join()).replace("$",a));return Function.apply(void 0,q)};var t="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],63:[function(a,h,u){function t(a,d,f){for(var g=2*(a+1),e=a+1;e<=d;++e){for(var c=f[g++],m=f[g++],k=e,q=g-2;k-- >a;){var n=f[q-2],t=f[q-1];if(n<c)break;else if(n===
c&&t<m)break;f[q]=n;f[q+1]=t;q-=2}f[q]=c;f[q+1]=m}}function k(a,d,f){a*=2;d*=2;var g=f[a],e=f[a+1];f[a]=f[d];f[a+1]=f[d+1];f[d]=g;f[d+1]=e}function g(a,d,f){a*=2;d*=2;f[a]=f[d];f[a+1]=f[d+1]}function q(a,d,f,g,e){a*=2;d*=2;e[a]=e[d];e[d]=f;e[a+1]=e[d+1];e[d+1]=g}function f(a,d,f){a*=2;d*=2;var g=f[a],e=f[d];return g<e?!1:g===e?f[a+1]>f[d+1]:!0}function d(a,d,f,g){a*=2;var e=g[a];return e<d?!0:e===d?g[a+1]<f:!1}function D(a,h,w){var p=(h-a+1)/6|0,e=a+p,c=h-p,m=a+h>>1,x=m-p,y=m+p,H=e,u=x,A=m,aa=y,C=
c,p=a+1,b=h-1,l=0;f(H,u,w)&&(l=H,H=u,u=l);f(aa,C,w)&&(l=aa,aa=C,C=l);f(H,A,w)&&(l=H,H=A,A=l);f(u,A,w)&&(l=u,u=A,A=l);f(H,aa,w)&&(l=H,H=aa,aa=l);f(A,aa,w)&&(l=A,A=aa,aa=l);f(u,C,w)&&(l=u,u=C,C=l);f(u,A,w)&&(l=u,u=A,A=l);f(aa,C,w)&&(l=aa,aa=C,C=l);for(var l=w[2*u],u=w[2*u+1],B=w[2*aa],aa=w[2*aa+1],H=2*H,A=2*A,C=2*C,e=2*e,m=2*m,c=2*c,L=0;2>L;++L){var W=w[A+L],F=w[C+L];w[e+L]=w[H+L];w[m+L]=W;w[c+L]=F}g(x,a,w);g(y,h,w);for(x=p;x<=b;++x)if(d(x,l,u,w))x!==p&&k(x,p,w),++p;else if(!d(x,B,aa,w))for(;;)if(d(b,
B,aa,w)){d(b,l,u,w)?(y=x,c=p,m=b,H=w,y*=2,c*=2,m*=2,e=H[y],A=H[y+1],H[y]=H[c],H[y+1]=H[c+1],H[c]=H[m],H[c+1]=H[m+1],H[m]=e,H[m+1]=A,++p):k(x,b,w);--b;break}else if(--b<x)break;q(a,p-1,l,u,w);q(h,b+1,B,aa,w);p-2-a<=n?t(a,p-2,w):D(a,p-2,w);h-(b+2)<=n?t(b+2,h,w):D(b+2,h,w);b-p<=n?t(p,b,w):D(p,b,w)}h.exports=function(a,d){d<=4*n?t(0,d-1,a):D(0,d-1,a)};var n=32},{}],64:[function(a,h,u){function t(a,c,d,f){f=c[f];d=a[d-1];a[f]=d;c[d]=f}h.exports={init:function(a){a=g.nextPow2(a);d.length<a&&(k.free(d),
d=k.mallocInt32(a));D.length<a&&(k.free(D),D=k.mallocInt32(a));n.length<a&&(k.free(n),n=k.mallocInt32(a));v.length<a&&(k.free(v),v=k.mallocInt32(a));z.length<a&&(k.free(z),z=k.mallocInt32(a));w.length<a&&(k.free(w),w=k.mallocInt32(a));a*=8;p.length<a&&(k.free(p),p=k.mallocDouble(a))},sweepBipartite:function(a,c,m,g,k,h,w,z,u,C){var b=0,l=2*a;--a;for(var B=l-1;m<g;++m){var L=h[m],W=l*m;p[b++]=k[W+a];p[b++]=-(L+1);p[b++]=k[W+B];p[b++]=L}for(m=w;m<z;++m)L=C[m]+f,g=l*m,p[b++]=u[g+a],p[b++]=-L,p[b++]=
u[g+B],p[b++]=L;z=b>>>1;q(p,z);for(m=C=u=0;m<z;++m)if(b=p[2*m+1]|0,b>=f)b=b-f|0,t(n,v,C--,b);else if(0<=b)t(d,D,u--,b);else{if(b<=-f){b=-b-f|0;for(l=0;l<u;++l)if(g=c(d[l],b),void 0!==g)return g;l=v;g=C++;n[g]=b}else{b=-b-1|0;for(l=0;l<C;++l)if(g=c(b,n[l]),void 0!==g)return g;l=D;g=u++;d[g]=b}l[b]=g}},sweepComplete:function(a,c,m,f,g,k,h,A,u,C){var b=0,l=2*a;--a;for(var B=l-1;m<f;++m){var L=k[m]+1<<1,W=l*m;p[b++]=g[W+a];p[b++]=-L;p[b++]=g[W+B];p[b++]=L}for(m=h;m<A;++m)L=C[m]+1<<1,f=l*m,p[b++]=u[f+
a],p[b++]=-L|1,p[b++]=u[f+B],p[b++]=L|1;A=b>>>1;q(p,A);for(m=b=C=u=0;m<A;++m)if(l=p[2*m+1]|0,f=l&1,m<A-1&&l>>1===p[2*m+3]>>1&&(f=2,m+=1),0>l){l=-(l>>1)-1;for(g=0;g<b;++g)if(k=c(z[g],l),void 0!==k)return k;if(0!==f)for(g=0;g<u;++g)if(k=c(d[g],l),void 0!==k)return k;if(1!==f)for(g=0;g<C;++g)if(k=c(n[g],l),void 0!==k)return k;0===f?(f=D,g=u++,d[g]=l,f[l]=g):1===f?(f=v,g=C++,n[g]=l,f[l]=g):2===f&&(f=w,g=b++,z[g]=l,f[l]=g)}else l=(l>>1)-1,0===f?t(d,D,u--,l):1===f?t(n,v,C--,l):2===f&&t(z,w,b--,l)},scanBipartite:function(a,
c,m,g,k,n,h,v,w,z,b,l){var B=0,u=2*a,W=c+a,F=1,fa=1;for(g?fa=f:F=f;k<n;++k){var N=k+F,ba=u*k;p[B++]=h[ba+c];p[B++]=-N;p[B++]=h[ba+W];p[B++]=N}for(k=w;k<z;++k)N=k+fa,n=u*k,p[B++]=b[n+c],p[B++]=-N;z=B>>>1;q(p,z);for(k=B=0;k<z;++k)if(N=p[2*k+1]|0,0>N)if(N=-N,fa=!1,N>=f?(fa=!g,N-=f):(fa=!!g,--N),fa)fa=D,n=B++,d[n]=N,fa[N]=n;else a:for(fa=l[N],N*=u,n=b[N+c+1],w=b[N+c+1+a],W=0;W<B;++W){var ba=d[W],I=u*ba;if(!(w<h[I+c+1]||h[I+c+1+a]<n)){for(var r=c+2;r<a;++r)if(b[N+r+a]<h[I+r]||h[I+r+a]<b[N+r])continue a;
ba=v[ba];ba=g?m(fa,ba):m(ba,fa);if(void 0!==ba)return ba}}else t(d,D,B--,N-F)},scanComplete:function(a,c,m,g,k,n,t,h,v,w,b){for(var l=0,D=2*a,z=c+a;g<k;++g){var u=g+f,F=D*g;p[l++]=n[F+c];p[l++]=-u;p[l++]=n[F+z];p[l++]=u}for(g=h;g<v;++g)u=g+1,k=D*g,p[l++]=w[k+c],p[l++]=-u;v=l>>>1;q(p,v);for(g=l=0;g<v;++g)if(k=p[2*g+1]|0,0>k)if(u=-k,u>=f)d[l++]=u-f;else a:for(--u,k=b[u],u*=D,z=w[u+c+1],F=w[u+c+1+a],h=0;h<l;++h){var fa=d[h],N=t[fa];if(N===k)break;fa*=D;if(!(F<n[fa+c+1]||n[fa+c+1+a]<z)){for(var ba=c+
2;ba<a;++ba)if(w[u+ba+a]<n[fa+ba]||n[fa+ba+a]<w[u+ba])continue a;N=m(N,k);if(void 0!==N)return N}}else{u=k-f;for(h=l-1;0<=h;--h)if(d[h]===u){for(ba=h+1;ba<l;++ba)d[ba-1]=d[ba];break}--l}}};var k=a("typedarray-pool"),g=a("bit-twiddle"),q=a("./sort"),f=268435456,d=k.mallocInt32(1024),D=k.mallocInt32(1024),n=k.mallocInt32(1024),v=k.mallocInt32(1024),z=k.mallocInt32(1024),w=k.mallocInt32(1024),p=k.mallocDouble(8192)},{"./sort":63,"bit-twiddle":56,"typedarray-pool":126}],65:[function(a,h,u){},{}],66:[function(a,
h,u){(function(t,k){function g(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(b){return!1}}function q(a,b){if((k.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");k.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=k.prototype):(null===a&&(a=new k(b)),a.length=b);return a}function k(a,b,c){if(!(k.TYPED_ARRAY_SUPPORT||
this instanceof k))return new k(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return h(this,a)}return f(this,a,b,c)}function f(a,b,c,e){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(e||0))throw new RangeError("'length' is out of bounds");
b=void 0===c&&void 0===e?new Uint8Array(b):void 0===e?new Uint8Array(b,c):new Uint8Array(b,c,e);k.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=k.prototype):a=n(a,b);return a}if("string"===typeof b){e=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!k.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=w(b,a)|0;e=q(e,c);b=e.write(b,a);b!==c&&(e=e.slice(0,b));return e}return v(a,b)}function d(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>
a)throw new RangeError('"size" argument must not be negative');}function h(a,b){d(b);a=q(a,0>b?0:z(b)|0);if(!k.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function n(a,b){var c=0>b.length?0:z(b.length)|0;a=q(a,c);for(var e=0;e<c;e+=1)a[e]=b[e]&255;return a}function v(a,b){if(k.isBuffer(b)){var c=z(b.length)|0;a=q(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||
(c=b.length,c=c!==c),c?q(a,0):n(a,b);if("Buffer"===b.type&&N(b.data))return n(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function z(a){if(a>=(k.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(k.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function w(a,b){if(k.isBuffer(a))return a.length;if("undefined"!==typeof ArrayBuffer&&
"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var e=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return B(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return F.toByteArray(l(a)).length;default:if(e)return B(a).length;b=(""+b).toLowerCase();e=!0}}
function p(a,b,c){var e=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;e="";for(c=a;c<b;++c)a=e,e=this[c],e=16>e?"0"+e.toString(16):e.toString(16),e=a+e;return e;case "utf8":case "utf-8":return x(this,b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;
case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(e)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();e=!0}}function e(a,b,c){var e=a[b];a[b]=a[c];a[c]=e}function c(a,
b,c,e,d){if(0===a.length)return-1;"string"===typeof c?(e=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=d?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(d)return-1;c=a.length-1}else if(0>c)if(d)c=0;else return-1;"string"===typeof b&&(b=k.from(b,e));if(k.isBuffer(b))return 0===b.length?-1:m(a,b,c,e,d);if("number"===typeof b)return b&=255,k.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,
b,c):m(a,[b],c,e,d);throw new TypeError("val must be string, number or Buffer");}function m(a,b,c,e,d){function m(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}var f=1,g=a.length,l=b.length;if(void 0!==e&&(e=String(e).toLowerCase(),"ucs2"===e||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>a.length||2>b.length)return-1;f=2;g/=2;l/=2;c/=2}if(d)for(e=-1;c<g;c++)if(m(a,c)===m(b,-1===e?0:c-e)){if(-1===e&&(e=c),c-e+1===l)return e*f}else-1!==e&&(c-=c-e),e=-1;else for(c+l>g&&(c=g-l);0<=c;c--){g=!0;for(e=
0;e<l;e++)if(m(a,c+e)!==m(b,e)){g=!1;break}if(g)return c}return-1}function x(a,b,c){c=Math.min(a.length,c);for(var e=[];b<c;){var d=a[b],m=null,f=239<d?4:223<d?3:191<d?2:1;if(b+f<=c){var g,l,k;switch(f){case 1:128>d&&(m=d);break;case 2:g=a[b+1];128===(g&192)&&(d=(d&31)<<6|g&63,127<d&&(m=d));break;case 3:g=a[b+1];l=a[b+2];128===(g&192)&&128===(l&192)&&(d=(d&15)<<12|(g&63)<<6|l&63,2047<d&&(55296>d||57343<d)&&(m=d));break;case 4:g=a[b+1],l=a[b+2],k=a[b+3],128===(g&192)&&128===(l&192)&&128===(k&192)&&
(d=(d&15)<<18|(g&63)<<12|(l&63)<<6|k&63,65535<d&&1114112>d&&(m=d))}}null===m?(m=65533,f=1):65535<m&&(m-=65536,e.push(m>>>10&1023|55296),m=56320|m&1023);e.push(m);b+=f}a=e.length;if(a<=ba)e=String.fromCharCode.apply(String,e);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,e.slice(b,b+=ba));e=c}return e}function y(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function H(a,b,c,e,d,m){if(!k.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');
if(b>d||b<m)throw new RangeError('"value" argument is out of bounds');if(c+e>a.length)throw new RangeError("Index out of range");}function na(a,b,c,e){0>b&&(b=65535+b+1);for(var d=0,m=Math.min(a.length-c,2);d<m;++d)a[c+d]=(b&255<<8*(e?d:1-d))>>>8*(e?d:1-d)}function A(a,b,c,e){0>b&&(b=4294967295+b+1);for(var d=0,m=Math.min(a.length-c,4);d<m;++d)a[c+d]=b>>>8*(e?d:3-d)&255}function aa(a,b,c,e,d,m){if(c+e>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");
}function C(a,b,c,e,d){d||aa(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);fa.write(a,b,c,e,23,4);return c+4}function b(a,b,c,e,d){d||aa(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);fa.write(a,b,c,e,52,8);return c+8}function l(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(I,"");if(2>a.length)return"";for(;0!==a.length%4;)a+="=";return a}function B(a,b){b=b||Infinity;for(var c,e=a.length,d=null,m=[],f=0;f<e;++f){c=a.charCodeAt(f);if(55295<c&&57344>c){if(!d){if(56319<
c){-1<(b-=3)&&m.push(239,191,189);continue}else if(f+1===e){-1<(b-=3)&&m.push(239,191,189);continue}d=c;continue}if(56320>c){-1<(b-=3)&&m.push(239,191,189);d=c;continue}c=(d-55296<<10|c-56320)+65536}else d&&-1<(b-=3)&&m.push(239,191,189);d=null;if(128>c){if(0>--b)break;m.push(c)}else if(2048>c){if(0>(b-=2))break;m.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;m.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;m.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");
}return m}function L(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function W(a,b,c,e){for(var d=0;d<e&&!(d+c>=b.length||d>=a.length);++d)b[d+c]=a[d];return d}var F=a("base64-js"),fa=a("ieee754"),N=a("isarray");u.Buffer=k;u.SlowBuffer=function(a){+a!=a&&(a=0);return k.alloc(+a)};u.INSPECT_MAX_BYTES=50;k.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:g();u.kMaxLength=k.TYPED_ARRAY_SUPPORT?2147483647:1073741823;k.poolSize=8192;k._augment=function(a){a.__proto__=
k.prototype;return a};k.from=function(a,b,c){return f(null,a,b,c)};k.TYPED_ARRAY_SUPPORT&&(k.prototype.__proto__=Uint8Array.prototype,k.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&k[Symbol.species]===k&&($jscomp.initSymbol(),Object.defineProperty(k,Symbol.species,{value:null,configurable:!0})));k.alloc=function(a,b,c){d(a);a=0>=a?q(null,a):void 0!==b?"string"===typeof c?q(null,a).fill(b,c):q(null,a).fill(b):q(null,
a);return a};k.allocUnsafe=function(a){return h(null,a)};k.allocUnsafeSlow=function(a){return h(null,a)};k.isBuffer=function(a){return!(null==a||!a._isBuffer)};k.compare=function(a,b){if(!k.isBuffer(a)||!k.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,e=b.length,d=0,m=Math.min(c,e);d<m;++d)if(a[d]!==b[d]){c=a[d];e=b[d];break}return c<e?-1:e<c?1:0};k.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};k.concat=function(a,b){if(!N(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return k.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;var e=k.allocUnsafe(b),d=0;for(c=0;c<a.length;++c){var m=a[c];if(!k.isBuffer(m))throw new TypeError('"list" argument must be an Array of Buffers');m.copy(e,d);d+=m.length}return e};k.byteLength=w;k.prototype._isBuffer=!0;k.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var b=0;b<a;b+=2)e(this,b,b+1);return this};k.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)e(this,b,b+3),e(this,b+1,b+2);return this};k.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)e(this,b,b+7),e(this,b+1,b+6),e(this,b+2,b+5),e(this,b+3,b+4);return this};k.prototype.toString=function(){var a=this.length|
0;return 0===a?"":0===arguments.length?x(this,0,a):p.apply(this,arguments)};k.prototype.equals=function(a){if(!k.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===k.compare(this,a)};k.prototype.inspect=function(){var a="",b=u.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... "));return"<Buffer "+a+">"};k.prototype.compare=function(a,b,c,e,d){if(!k.isBuffer(a))throw new TypeError("Argument must be a Buffer");
void 0===b&&(b=0);void 0===c&&(c=a?a.length:0);void 0===e&&(e=0);void 0===d&&(d=this.length);if(0>b||c>a.length||0>e||d>this.length)throw new RangeError("out of range index");if(e>=d&&b>=c)return 0;if(e>=d)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;e>>>=0;d>>>=0;if(this===a)return 0;var m=d-e,f=c-b,g=Math.min(m,f);e=this.slice(e,d);a=a.slice(b,c);for(b=0;b<g;++b)if(e[b]!==a[b]){m=e[b];f=a[b];break}return m<f?-1:f<m?1:0};k.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};k.prototype.indexOf=
function(a,b,e){return c(this,a,b,e,!0)};k.prototype.lastIndexOf=function(a,b,e){return c(this,a,b,e,!1)};k.prototype.write=function(a,b,c,e){if(void 0===b)e="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)e=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===e&&(e="utf8")):(e=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-b;if(void 0===c||c>d)c=d;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
e||(e="utf8");for(d=!1;;)switch(e){case "hex":a:{b=Number(b)||0;e=this.length-b;c?(c=Number(c),c>e&&(c=e)):c=e;e=a.length;if(0!==e%2)throw new TypeError("Invalid hex string");c>e/2&&(c=e/2);for(e=0;e<c;++e){d=parseInt(a.substr(2*e,2),16);if(isNaN(d)){a=e;break a}this[b+e]=d}a=e}return a;case "utf8":case "utf-8":return W(B(a,this.length-b),this,b,c);case "ascii":return W(L(a),this,b,c);case "latin1":case "binary":return W(L(a),this,b,c);case "base64":return W(F.toByteArray(l(a)),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=
this.length-b;for(var m=void 0,m=d=void 0,f=[],g=0;g<a.length&&!(0>(e-=2));++g)m=a.charCodeAt(g),d=m>>8,m%=256,f.push(m),f.push(d);return W(f,this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase();d=!0}};k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ba=4096;k.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&
(b=a);if(k.TYPED_ARRAY_SUPPORT)c=this.subarray(a,b),c.__proto__=k.prototype;else for(var e=b-a,c=new k(e,void 0),d=0;d<e;++d)c[d]=this[d+a];return c};k.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||y(a,b,this.length);c=this[a];for(var e=1,d=0;++d<b&&(e*=256);)c+=this[a+d]*e;return c};k.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||y(a,b,this.length);c=this[a+--b];for(var e=1;0<b&&(e*=256);)c+=this[a+--b]*e;return c};k.prototype.readUInt8=function(a,b){b||y(a,1,this.length);return this[a]};
k.prototype.readUInt16LE=function(a,b){b||y(a,2,this.length);return this[a]|this[a+1]<<8};k.prototype.readUInt16BE=function(a,b){b||y(a,2,this.length);return this[a]<<8|this[a+1]};k.prototype.readUInt32LE=function(a,b){b||y(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};k.prototype.readUInt32BE=function(a,b){b||y(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};k.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||y(a,b,this.length);c=
this[a];for(var e=1,d=0;++d<b&&(e*=256);)c+=this[a+d]*e;c>=128*e&&(c-=Math.pow(2,8*b));return c};k.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||y(a,b,this.length);c=b;for(var e=1,d=this[a+--c];0<c&&(e*=256);)d+=this[a+--c]*e;d>=128*e&&(d-=Math.pow(2,8*b));return d};k.prototype.readInt8=function(a,b){b||y(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};k.prototype.readInt16LE=function(a,b){b||y(a,2,this.length);var c=this[a]|this[a+1]<<8;return c&32768?c|4294901760:c};k.prototype.readInt16BE=
function(a,b){b||y(a,2,this.length);var c=this[a+1]|this[a]<<8;return c&32768?c|4294901760:c};k.prototype.readInt32LE=function(a,b){b||y(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};k.prototype.readInt32BE=function(a,b){b||y(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};k.prototype.readFloatLE=function(a,b){b||y(a,4,this.length);return fa.read(this,a,!0,23,4)};k.prototype.readFloatBE=function(a,b){b||y(a,4,this.length);return fa.read(this,a,
!1,23,4)};k.prototype.readDoubleLE=function(a,b){b||y(a,8,this.length);return fa.read(this,a,!0,52,8)};k.prototype.readDoubleBE=function(a,b){b||y(a,8,this.length);return fa.read(this,a,!1,52,8)};k.prototype.writeUIntLE=function(a,b,c,e){a=+a;b|=0;c|=0;e||H(this,a,b,c,Math.pow(2,8*c)-1,0);e=1;var d=0;for(this[b]=a&255;++d<c&&(e*=256);)this[b+d]=a/e&255;return b+c};k.prototype.writeUIntBE=function(a,b,c,e){a=+a;b|=0;c|=0;e||H(this,a,b,c,Math.pow(2,8*c)-1,0);e=c-1;var d=1;for(this[b+e]=a&255;0<=--e&&
(d*=256);)this[b+e]=a/d&255;return b+c};k.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||H(this,a,b,1,255,0);k.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};k.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||H(this,a,b,2,65535,0);k.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):na(this,a,b,!0);return b+2};k.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||H(this,a,b,2,65535,0);k.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):na(this,a,b,!1);return b+2};k.prototype.writeUInt32LE=
function(a,b,c){a=+a;b|=0;c||H(this,a,b,4,4294967295,0);k.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):A(this,a,b,!0);return b+4};k.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||H(this,a,b,4,4294967295,0);k.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):A(this,a,b,!1);return b+4};k.prototype.writeIntLE=function(a,b,c,e){a=+a;b|=0;e||(e=Math.pow(2,8*c-1),H(this,a,b,c,e-1,-e));e=0;var d=1,m=0;for(this[b]=a&255;++e<
c&&(d*=256);)0>a&&0===m&&0!==this[b+e-1]&&(m=1),this[b+e]=(a/d>>0)-m&255;return b+c};k.prototype.writeIntBE=function(a,b,c,e){a=+a;b|=0;e||(e=Math.pow(2,8*c-1),H(this,a,b,c,e-1,-e));e=c-1;var d=1,m=0;for(this[b+e]=a&255;0<=--e&&(d*=256);)0>a&&0===m&&0!==this[b+e+1]&&(m=1),this[b+e]=(a/d>>0)-m&255;return b+c};k.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||H(this,a,b,1,127,-128);k.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};k.prototype.writeInt16LE=function(a,
b,c){a=+a;b|=0;c||H(this,a,b,2,32767,-32768);k.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):na(this,a,b,!0);return b+2};k.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||H(this,a,b,2,32767,-32768);k.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):na(this,a,b,!1);return b+2};k.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||H(this,a,b,4,2147483647,-2147483648);k.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):A(this,a,b,!0);return b+4};k.prototype.writeInt32BE=
function(a,b,c){a=+a;b|=0;c||H(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);k.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):A(this,a,b,!1);return b+4};k.prototype.writeFloatLE=function(a,b,c){return C(this,a,b,!0,c)};k.prototype.writeFloatBE=function(a,b,c){return C(this,a,b,!1,c)};k.prototype.writeDoubleLE=function(a,c,e){return b(this,a,c,!0,e)};k.prototype.writeDoubleBE=function(a,c,e){return b(this,a,c,!1,e)};k.prototype.copy=function(a,b,
c,e){c||(c=0);e||0===e||(e=this.length);b>=a.length&&(b=a.length);b||(b=0);0<e&&e<c&&(e=c);if(e===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);a.length-b<e-c&&(e=a.length-b+c);var d=e-c;if(this===a&&c<b&&b<e)for(e=d-1;0<=e;--e)a[e+b]=this[e+c];else if(1E3>d||!k.TYPED_ARRAY_SUPPORT)for(e=
0;e<d;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+d),b);return d};k.prototype.fill=function(a,b,c,e){if("string"===typeof a){"string"===typeof b?(e=b,b=0,c=this.length):"string"===typeof c&&(e=c,c=this.length);if(1===a.length){var d=a.charCodeAt(0);256>d&&(a=d)}if(void 0!==e&&"string"!==typeof e)throw new TypeError("encoding must be a string");if("string"===typeof e&&!k.isEncoding(e))throw new TypeError("Unknown encoding: "+e);}else"number"===typeof a&&(a&=255);if(0>
b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(e=b;e<c;++e)this[e]=a;else for(a=k.isBuffer(a)?a:B((new k(a,e)).toString()),d=a.length,e=0;e<c-b;++e)this[e+b]=a[e%d];return this};var I=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"base64-js":38,buffer:66,ieee754:87,
isarray:93}],67:[function(a,h,u){function t(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function k(a,d){return a[0]-d[0]||a[1]-d[1]}function g(a,d,f){return d in a?a[d]:f}var q=a("./lib/monotone"),f=a("./lib/triangulation"),d=a("./lib/delaunay"),D=a("./lib/filter");h.exports=function(a,h,z){Array.isArray(h)?(z=z||{},h=h||[]):(z=h||{},h=[]);var w=!!g(z,"delaunay",!0),p=!!g(z,"interior",!0),e=!!g(z,"exterior",!0);z=!!g(z,"infinity",!1);if(!p&&!e||0===a.length)return[];var c=q(a,h);if(w||p!==
e||z){h=f(a.length,h.map(t).sort(k));for(var m=0;m<c.length;++m){var x=c[m];h.addTriangle(x[0],x[1],x[2])}w&&d(a,h);return e?p?z?D(h,0,z):h.cells():D(h,1,z):D(h,-1)}return c}},{"./lib/delaunay":68,"./lib/filter":69,"./lib/monotone":70,"./lib/triangulation":71}],68:[function(a,h,u){function t(a,q,f,d,t,n){var h=q.opposite(d,t);if(!(0>h)){if(t<d){var z=d;d=t;t=z;z=n;n=h;h=z}q.isConstraint(d,t)||0>k(a[d],a[t],a[n],a[h])&&f.push(d,t)}}var k=a("robust-in-sphere")[4];a("binary-search-bounds");h.exports=
function(a,q){for(var f=[],d=a.length,h=q.stars,n=0;n<d;++n)for(var v=h[n],z=1;z<v.length;z+=2){var w=v[z];if(!(w<n||q.isConstraint(n,w))){for(var p=v[z-1],e=-1,c=1;c<v.length;c+=2)if(v[c-1]===w){e=v[c];break}0>e||0>k(a[n],a[w],a[p],a[e])&&f.push(n,w)}}for(;0<f.length;){w=f.pop();n=f.pop();e=p=-1;v=h[n];for(d=1;d<v.length;d+=2)z=v[d-1],c=v[d],z===w?e=c:c===w&&(p=z);0>p||0>e||0<=k(a[n],a[w],a[p],a[e])||(q.flip(n,w),t(a,q,f,p,n,e),t(a,q,f,n,e,p),t(a,q,f,e,w,p),t(a,q,f,w,p,e))}}},{"binary-search-bounds":55,
"robust-in-sphere":108}],69:[function(a,h,u){function t(a,f,d,g,k,t,h){this.cells=a;this.neighbor=f;this.flags=g;this.constraint=d;this.active=k;this.next=t;this.boundary=h}function k(a,f){return a[0]-f[0]||a[1]-f[1]||a[2]-f[2]}var g=a("binary-search-bounds");h.exports=function(a,f,d){for(var g=a.cells(),n=g.length,h=0;h<n;++h){var z=g[h],w=z[0],p=z[1],e=z[2];p<e?p<w&&(z[0]=p,z[1]=e,z[2]=w):e<w&&(z[0]=e,z[1]=w,z[2]=p)}g.sort(k);for(var c=Array(n),h=0;h<c.length;++h)c[h]=0;var m=[],x=[],y=Array(3*
n),u=Array(3*n),na=null;d&&(na=[]);e=new t(g,y,u,c,m,x,na);for(h=0;h<n;++h)for(var z=g[h],A=0;3>A;++A){var w=z[A],p=z[(A+1)%3],aa=y[3*h+A]=e.locate(p,w,a.opposite(p,w)),C=u[3*h+A]=a.isConstraint(w,p);0>aa&&(C?x.push(h):(m.push(h),c[h]=1),d&&na.push([p,w,-1]))}if(0===f)return d?e.cells.concat(e.boundary):e.cells;n=1;h=e.active;z=e.next;a=e.flags;g=e.cells;w=e.constraint;for(p=e.neighbor;0<h.length||0<z.length;){for(;0<h.length;)if(c=h.pop(),a[c]!==-n)for(a[c]=n,m=0;3>m;++m)x=p[3*c+m],0<=x&&0===a[x]&&
(w[3*c+m]?z.push(x):(h.push(x),a[x]=n));c=z;z=h;h=c;z.length=0;n=-n}for(h=n=0;h<g.length;++h)a[h]===f&&(g[n++]=g[h]);g.length=n;return d?g.concat(e.boundary):g};t.prototype.locate=function(){var a=[0,0,0];return function(f,d,t){var n=f,h=d,z=t;d<t?d<f&&(n=d,h=t,z=f):t<f&&(n=t,h=f,z=d);if(0>n)return-1;a[0]=n;a[1]=h;a[2]=z;return g.eq(this.cells,a,k)}}()},{"binary-search-bounds":55}],70:[function(a,h,u){function t(a,d,f,g,k){this.a=a;this.b=d;this.idx=f;this.lowerIds=g;this.upperIds=k}function k(a,
d,f,g){this.a=a;this.b=d;this.type=f;this.idx=g}function g(a,d){var f=a.a[0]-d.a[0]||a.a[1]-d.a[1]||a.type-d.type;return f||0!==a.type&&(f=D(a.a,a.b,d.b))?f:a.idx-d.idx}function q(a,d){return D(a.a,a.b,d)}function f(a,d){var f;return(f=a.a[0]<d.a[0]?D(a.a,a.b,d.a):D(d.b,d.a,a.a))?f:(f=d.b[0]<a.b[0]?D(a.a,a.b,d.b):D(d.b,d.a,a.b))||a.idx-d.idx}var d=a("binary-search-bounds"),D=a("robust-orientation")[3];h.exports=function(a,h){for(var z=a.length,w=h.length,p=[],e=0;e<z;++e)p.push(new k(a[e],null,0,
e));for(e=0;e<w;++e){var c=h[e],z=a[c[0]],c=a[c[1]];z[0]<c[0]?p.push(new k(z,c,2,e),new k(c,z,1,e)):z[0]>c[0]&&p.push(new k(c,z,2,e),new k(z,c,1,e))}p.sort(g);e=p[0].a[0]-(1+Math.abs(p[0].a[0]))*Math.pow(2,-52);w=[new t([e,1],[e,0],-1,[],[],[],[])];z=[];e=0;for(c=p.length;e<c;++e){var m=p[e],x=m.type;if(0===x)for(var x=z,y=w,u=a,na=m.a,m=m.idx,A=d.lt(y,na,q),aa=d.gt(y,na,q);A<aa;++A){for(var C=y[A],b=C.lowerIds,l=b.length;1<l&&0<D(u[b[l-2]],u[b[l-1]],na);)x.push([b[l-1],b[l-2],m]),--l;b.length=l;
b.push(m);C=C.upperIds;for(l=C.length;1<l&&0>D(u[C[l-2]],u[C[l-1]],na);)x.push([C[l-2],C[l-1],m]),--l;C.length=l;C.push(m)}else 2===x?(x=w,y=m,u=d.le(x,y,f),na=x[u],m=na.upperIds,aa=m[m.length-1],na.upperIds=[aa],x.splice(u+1,0,new t(y.a,y.b,y.idx,[aa],m))):(x=w,y=m,u=y.a,y.a=y.b,y.b=u,y=d.eq(x,y,f),x[y-1].upperIds=x[y].upperIds,x.splice(y,1))}return z}},{"binary-search-bounds":55,"robust-orientation":109}],71:[function(a,h,u){function t(a,f){this.stars=a;this.edges=f}function k(a,f,d){for(var g=
1,k=a.length;g<k;g+=2)if(a[g-1]===f&&a[g]===d){a[g-1]=a[k-2];a[g]=a[k-1];a.length=k-2;break}}var g=a("binary-search-bounds");h.exports=function(a,f){for(var d=Array(a),g=0;g<a;++g)d[g]=[];return new t(d,f)};a=t.prototype;a.isConstraint=function(){function a(d,f){return d[0]-f[0]||d[1]-f[1]}var f=[0,0];return function(d,k){f[0]=Math.min(d,k);f[1]=Math.max(d,k);return 0<=g.eq(this.edges,f,a)}}();a.removeTriangle=function(a,f,d){var g=this.stars;k(g[a],f,d);k(g[f],d,a);k(g[d],a,f)};a.addTriangle=function(a,
f,d){var g=this.stars;g[a].push(f,d);g[f].push(d,a);g[d].push(a,f)};a.opposite=function(a,f){for(var d=this.stars[f],g=1,k=d.length;g<k;g+=2)if(d[g]===a)return d[g-1];return-1};a.flip=function(a,f){var d=this.opposite(a,f),g=this.opposite(f,a);this.removeTriangle(a,f,d);this.removeTriangle(f,a,g);this.addTriangle(a,g,d);this.addTriangle(f,d,g)};a.edges=function(){for(var a=this.stars,f=[],d=0,g=a.length;d<g;++d)for(var k=a[d],t=0,h=k.length;t<h;t+=2)f.push([k[t],k[t+1]]);return f};a.cells=function(){for(var a=
this.stars,f=[],d=0,g=a.length;d<g;++d)for(var k=a[d],t=0,h=k.length;t<h;t+=2){var w=k[t],p=k[t+1];d<Math.min(w,p)&&f.push([d,w,p])}return f}},{"binary-search-bounds":55}],72:[function(a,h,u){function t(a){a=x(a);return[H(a,-Infinity),H(a,Infinity)]}function k(a){for(var c=Array(a.length),e=0;e<a.length;++e){var b=a[e];c[e]=[H(b[0],-Infinity),H(b[1],-Infinity),H(b[0],Infinity),H(b[1],Infinity)]}return c}function g(a,c,d){var b=[];p(d,function(d,m){var f=c[d],g=c[m];f[0]!==g[0]&&f[0]!==g[1]&&f[1]!==
g[0]&&f[1]!==g[1]&&e(a[f[0]],a[f[1]],a[g[0]],a[g[1]])&&b.push([d,m])});return b}function q(a,c,d,b){var m=[];p(d,b,function(b,d){var f=c[b];if(f[0]!==d&&f[1]!==d){var g=a[d];e(a[f[0]],a[f[1]],g,g)&&m.push([b,d])}});return m}function f(a,e,d,b,f){var g,k,p=a.map(function(a){return[c(a[0]),c(a[1])]});for(g=0;g<d.length;++g){var q=d[g];k=q[0];var q=q[1],n=e[k],t=e[q];if(n=na(y(a[n[0]]),y(a[n[1]]),y(a[t[0]]),y(a[t[1]])))t=a.length,a.push([x(n[0]),x(n[1])]),p.push(n),b.push([k,t],[q,t])}b.sort(function(a,
b){if(a[0]!==b[0])return a[0]-b[0];var c=p[a[1]],e=p[b[1]];return m(c[0],e[0])||m(c[1],e[1])});for(g=b.length-1;0<=g;--g){q=b[g];k=q[0];n=e[k];t=n[0];d=n[1];var h=a[t],w=a[d];0>(h[0]-w[0]||h[1]-w[1])&&(h=t,t=d,d=h);n[0]=t;var t=n[1]=q[1],r;for(f&&(r=n[2]);0<g&&b[g-1][0]===k;)q=b[--g],q=q[1],f?e.push([t,q,r]):e.push([t,q]),t=q;f?e.push([t,d,r]):e.push([t,d])}return p}function d(a,c,e){e=c.length;for(var b=new w(e),d=[],m=0;m<c.length;++m){var f=c[m],g=t(f[0]),f=t(f[1]);d.push([H(g[0],-Infinity),H(f[0],
-Infinity),H(g[1],Infinity),H(f[1],Infinity)])}p(d,function(a,c){b.link(a,c)});g=!0;c=Array(e);for(m=0;m<e;++m)d=b.find(m),d!==m&&(g=!1,a[d]=[Math.min(a[m][0],a[d][0]),Math.min(a[m][1],a[d][1])]);if(g)return null;for(m=g=0;m<e;++m)d=b.find(m),d===m?(c[m]=g,a[g++]=a[m]):c[m]=-1;a.length=g;for(m=0;m<e;++m)0>c[m]&&(c[m]=c[b.find(m)]);return c}function D(a,c){return a[0]-c[0]||a[1]-c[1]}function n(a,c){var e=a[0]-c[0]||a[1]-c[1];return e?e:a[2]<c[2]?-1:a[2]>c[2]?1:0}function v(a,c,e){if(0!==a.length){if(c)for(var b=
0;b<a.length;++b){var d=a[b],m=c[d[0]],f=c[d[1]];d[0]=Math.min(m,f);d[1]=Math.max(m,f)}else for(b=0;b<a.length;++b)d=a[b],m=d[0],f=d[1],d[0]=Math.min(m,f),d[1]=Math.max(m,f);e?a.sort(n):a.sort(D);for(b=c=1;b<a.length;++b)if(d=a[b-1],m=a[b],m[0]!==d[0]||m[1]!==d[1]||e&&m[2]!==d[2])a[c++]=m;a.length=c}}function z(a,c,e){for(var b=Array(c.length),m=0;m<c.length;++m){var p=c[m],n=a[p[0]],p=a[p[1]];b[m]=[H(Math.min(n[0],p[0]),-Infinity),H(Math.min(n[1],p[1]),-Infinity),H(Math.max(n[0],p[0]),Infinity),
H(Math.max(n[1],p[1]),Infinity)]}m=g(a,c,b);n=k(a);b=q(a,c,b,n);p=f(a,c,m,b,e);a=d(a,p,n);v(c,a,e);return a?!0:0<m.length||0<b.length}h.exports=function(a,c,e){var b;if(e){b=c;for(var m=Array(c.length),f=0;f<c.length;++f){var g=c[f];m[f]=[g[0],g[1],e[f]]}c=m}f=c;g=!!e;m=d(a,[],k(a));v(f,m,g);for(m=!!m;z(a,c,!!e);)m=!0;if(e&&m)for(b.length=0,f=e.length=0;f<c.length;++f)g=c[f],b.push([g[0],g[1]]),e.push(g[2]);return m};var w=a("union-find"),p=a("box-intersect"),e=a("robust-segment-intersect"),c=a("big-rat"),
m=a("big-rat/cmp"),x=a("big-rat/to-float"),y=a("rat-vec"),H=a("nextafter"),na=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":73,"big-rat":42,"big-rat/cmp":40,"big-rat/to-float":54,"box-intersect":58,nextafter:96,"rat-vec":105,"robust-segment-intersect":112,"union-find":127}],73:[function(a,h,u){function t(a,d){return q(k(a[0],d[1]),k(a[1],d[0]))}h.exports=function(a,k,q,p){k=d(k,a);var e=d(p,q);p=t(k,e);if(0===f(p))return null;q=d(a,q);q=t(e,q);q=g(q,p);k=n(k,q);return D(a,k)};var k=a("big-rat/mul"),
g=a("big-rat/div"),q=a("big-rat/sub"),f=a("big-rat/sign"),d=a("rat-vec/sub"),D=a("rat-vec/add"),n=a("rat-vec/muls")},{"big-rat/div":41,"big-rat/mul":51,"big-rat/sign":52,"big-rat/sub":53,"rat-vec/add":104,"rat-vec/muls":106,"rat-vec/sub":107}],74:[function(a,h,u){function t(a,g,k){var t=q(a[0],-g[0]);a=q(a[1],-g[1]);var h=q(k[0],-g[0]);g=q(k[1],-g[1]);t=d(f(t,h),f(a,g));return 0<=t[t.length-1]}h.exports=function(a,d,f,q){var h=k(d,f,q);if(0===h){var h=g(k(a,d,f)),p=g(k(a,d,q));return h===p?0===h&&
(f=t(a,d,f),a=t(a,d,q),f!==a)?f?1:-1:0:0===p?0<h?-1:t(a,d,q)?-1:1:0===h?0<p?1:t(a,d,f)?1:-1:g(p-h)}p=k(a,d,f);return 0<p?0<h&&0<k(a,d,q)?1:-1:0>p?0<h||0<k(a,d,q)?1:-1:0<k(a,d,q)?1:t(a,d,f)?1:-1};var k=a("robust-orientation"),g=a("signum"),q=a("two-sum"),f=a("robust-product"),d=a("robust-sum")},{"robust-orientation":109,"robust-product":110,"robust-sum":114,signum:75,"two-sum":125}],75:[function(a,h,u){h.exports=function(a){return 0>a?-1:0<a?1:0}},{}],76:[function(a,h,u){function t(){this.argTypes=
[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var k=a("./lib/thunk.js");h.exports=function(a){var q=new t;q.pre=a.pre;q.body=a.body;q.post=a.post;var f=a.args.slice(0);q.argTypes=f;for(var d=0;d<f.length;++d){var h=f[d];if("array"===h||"object"===typeof h&&h.blockIndices){q.argTypes[d]="array";q.arrayArgs.push(d);q.arrayBlockIndices.push(h.blockIndices?
h.blockIndices:0);q.shimArgs.push("array"+d);if(d<q.pre.args.length&&0<q.pre.args[d].count)throw Error("cwise: pre() block may not reference array args");if(d<q.post.args.length&&0<q.post.args[d].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===h)q.scalarArgs.push(d),q.shimArgs.push("scalar"+d);else if("index"===h){q.indexArgs.push(d);if(d<q.pre.args.length&&0<q.pre.args[d].count)throw Error("cwise: pre() block may not reference array index");if(d<q.body.args.length&&
q.body.args[d].lvalue)throw Error("cwise: body() block may not write to array index");if(d<q.post.args.length&&0<q.post.args[d].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===h){q.shapeArgs.push(d);if(d<q.pre.args.length&&q.pre.args[d].lvalue)throw Error("cwise: pre() block may not write to array shape");if(d<q.body.args.length&&q.body.args[d].lvalue)throw Error("cwise: body() block may not write to array shape");if(d<q.post.args.length&&q.post.args[d].lvalue)throw Error("cwise: post() block may not write to array shape");
}else if("object"===typeof h&&h.offset)q.argTypes[d]="offset",q.offsetArgs.push({array:h.array,offset:h.offset}),q.offsetArgIndex.push(d);else throw Error("cwise: Unknown argument type "+f[d]);}if(0>=q.arrayArgs.length)throw Error("cwise: No array arguments specified");if(q.pre.args.length>f.length)throw Error("cwise: Too many arguments in pre() block");if(q.body.args.length>f.length)throw Error("cwise: Too many arguments in body() block");if(q.post.args.length>f.length)throw Error("cwise: Too many arguments in post() block");
q.debug=!!a.printCode||!!a.debug;q.funcName=a.funcName||"cwise";q.blockSize=a.blockSize||64;return k(q)}},{"./lib/thunk.js":78}],77:[function(a,h,u){function t(a,f,g){var k=a.length,q=f.arrayArgs.length;f=0<f.indexArgs.length;var t=[],p=[],e=0,c=0,m,x;for(m=0;m<k;++m)p.push(["i",m,"=0"].join(""));for(x=0;x<q;++x)for(m=0;m<k;++m)c=e,e=a[m],0===m?p.push(["d",x,"s",m,"=t",x,"p",e].join("")):p.push(["d",x,"s",m,"=(t",x,"p",e,"-s",c,"*t",x,"p",c,")"].join(""));0<p.length&&t.push("var "+p.join(","));for(m=
k-1;0<=m;--m)e=a[m],t.push(["for(i",m,"=0;i",m,"<s",e,";++i",m,"){"].join(""));t.push(g);for(m=0;m<k;++m){c=e;e=a[m];for(x=0;x<q;++x)t.push(["p",x,"+=d",x,"s",m].join(""));f&&(0<m&&t.push(["index[",c,"]-=s",c].join("")),t.push(["++index[",e,"]"].join("")));t.push("}")}return t.join("\n")}function k(a,f,g,k){for(var q=f.length,h=g.arrayArgs.length,p=g.blockSize,e=0<g.indexArgs.length,c=[],m=0;m<h;++m)c.push(["var offset",m,"=p",m].join(""));for(m=a;m<q;++m)c.push(["for(var j"+m+"=SS[",f[m],"]|0;j",
m,">0;){"].join("")),c.push(["if(j",m,"<",p,"){"].join("")),c.push(["s",f[m],"=j",m].join("")),c.push(["j",m,"=0"].join("")),c.push(["}else{s",f[m],"=",p].join("")),c.push(["j",m,"-=",p,"}"].join("")),e&&c.push(["index[",f[m],"]=j",m].join(""));for(m=0;m<h;++m){p=["offset"+m];for(e=a;e<q;++e)p.push(["j",e,"*t",m,"p",f[e]].join(""));c.push(["p",m,"=(",p.join("+"),")"].join(""))}c.push(t(f,g,k));for(m=a;m<q;++m)c.push("}");return c.join("\n")}function g(a,f,g){for(var k=a.body,q=[],t=[],p=0;p<a.args.length;++p){var e=
a.args[p];if(!(0>=e.count)){var c=new RegExp(e.name,"g"),m="",x=f.arrayArgs.indexOf(p);switch(f.argTypes[p]){case "offset":var h=f.offsetArgIndex.indexOf(p),x=f.offsetArgs[h].array,m="+q"+h;case "array":var m="p"+x+m,u="l"+p,h="a"+x;if(0===f.arrayBlockIndices[x])1===e.count?"generic"===g[x]?e.lvalue?(q.push(["var ",u,"=",h,".get(",m,")"].join("")),k=k.replace(c,u),t.push([h,".set(",m,",",u,")"].join(""))):k=k.replace(c,[h,".get(",m,")"].join("")):k=k.replace(c,[h,"[",m,"]"].join("")):"generic"===
g[x]?(q.push(["var ",u,"=",h,".get(",m,")"].join("")),k=k.replace(c,u),e.lvalue&&t.push([h,".set(",m,",",u,")"].join(""))):(q.push(["var ",u,"=",h,"[",m,"]"].join("")),k=k.replace(c,u),e.lvalue&&t.push([h,"[",m,"]=",u].join("")));else{c=[e.name];e=[m];for(m=0;m<Math.abs(f.arrayBlockIndices[x]);m++)c.push("\\s*\\[([^\\]]+)\\]"),e.push("$"+(m+1)+"*t"+x+"b"+m);c=new RegExp(c.join(""),"g");m=e.join("+");if("generic"===g[x])throw Error("cwise: Generic arrays not supported in combination with blocks!");
k=k.replace(c,[h,"[",m,"]"].join(""))}break;case "scalar":k=k.replace(c,"Y"+f.scalarArgs.indexOf(p));break;case "index":k=k.replace(c,"index");break;case "shape":k=k.replace(c,"shape")}}}return[q.join("\n"),k,t.join("\n")].join("\n").trim()}function q(a){for(var f=Array(a.length),g=!0,k=0;k<a.length;++k){var q=a[k],t=q.match(/\d+/),t=t?t[0]:"";0===q.charAt(0)?f[k]="u"+q.charAt(1)+t:f[k]=q.charAt(0)+t;0<k&&(g=g&&f[k]===f[k-1])}return g?f[0]:f.join("")}var f=a("uniq");h.exports=function(a,h){for(var n=
h[1].length-Math.abs(a.arrayBlockIndices[0])|0,v=Array(a.arrayArgs.length),z=Array(a.arrayArgs.length),w=0;w<a.arrayArgs.length;++w)z[w]=h[2*w],v[w]=h[2*w+1];for(var p=[],e=[],c=[],m=[],x=[],w=0;w<a.arrayArgs.length;++w){0>a.arrayBlockIndices[w]?(c.push(0),m.push(n),p.push(n),e.push(n+a.arrayBlockIndices[w])):(c.push(a.arrayBlockIndices[w]),m.push(a.arrayBlockIndices[w]+n),p.push(0),e.push(a.arrayBlockIndices[w]));for(var y=[],u=0;u<v[w].length;u++)c[w]<=v[w][u]&&v[w][u]<m[w]&&y.push(v[w][u]-c[w]);
x.push(y)}e=["SS"];m=["'use strict'"];y=[];for(u=0;u<n;++u)y.push(["s",u,"=SS[",u,"]"].join(""));for(w=0;w<a.arrayArgs.length;++w){e.push("a"+w);e.push("t"+w);e.push("p"+w);for(u=0;u<n;++u)y.push(["t",w,"p",u,"=t",w,"[",c[w]+u,"]"].join(""));for(u=0;u<Math.abs(a.arrayBlockIndices[w]);++u)y.push(["t",w,"b",u,"=t",w,"[",p[w]+u,"]"].join(""))}for(w=0;w<a.scalarArgs.length;++w)e.push("Y"+w);0<a.shapeArgs.length&&y.push("shape=SS.slice(0)");if(0<a.indexArgs.length){u=Array(n);for(w=0;w<n;++w)u[w]="0";
y.push(["index=[",u.join(","),"]"].join(""))}for(w=0;w<a.offsetArgs.length;++w){p=a.offsetArgs[w];c=[];for(u=0;u<p.offset.length;++u)0!==p.offset[u]&&(1===p.offset[u]?c.push(["t",p.array,"p",u].join("")):c.push([p.offset[u],"*t",p.array,"p",u].join("")));0===c.length?y.push("q"+w+"=0"):y.push(["q",w,"=",c.join("+")].join(""))}w=f([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));y=y.concat(w);0<y.length&&m.push("var "+y.join(","));for(w=0;w<a.arrayArgs.length;++w)m.push("p"+
w+"|=0");3<a.pre.body.length&&m.push(g(a.pre,a,z));w=g(a.body,a,z);a:for(u=0,y=x[0].length;u<y;){for(p=1;p<x.length;++p)if(x[p][u]!==x[0][u])break a;++u}u<n?m.push(k(u,x[0],a,w)):m.push(t(x[0],a,w));3<a.post.body.length&&m.push(g(a.post,a,z));a.debug&&console.log("-----Generated cwise routine for ",h,":\n"+m.join("\n")+"\n----------");n=[a.funcName||"unnamed","_cwise_loop_",v[0].join("s"),"m",u,q(z)].join("");return(new Function(["function ",n,"(",e.join(","),"){",m.join("\n"),"} return ",n].join("")))()}},
{uniq:128}],78:[function(a,h,u){var t=a("./compile.js");h.exports=function(a){var g=["'use strict'","var CACHED={}"],q=[];g.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var f=[],d=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],n=[],v=[],z=0;z<a.arrayArgs.length;++z){var w=a.arrayArgs[z];q.push(["t",w,"=array",w,".dtype,r",w,"=array",w,".order"].join(""));
f.push("t"+w);f.push("r"+w);d.push("t"+w);d.push("r"+w+".join()");h.push("array"+w+".data");h.push("array"+w+".stride");h.push("array"+w+".offset|0");0<z&&(n.push("array"+a.arrayArgs[0]+".shape.length===array"+w+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[z]))),v.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+w+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[z])+"]"))}1<a.arrayArgs.length&&(g.push("if (!("+n.join(" && ")+
")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),g.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),g.push("if (!("+v.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),g.push("}"));for(z=0;z<a.scalarArgs.length;++z)h.push("scalar"+a.scalarArgs[z]);q.push(["type=[",d.join(","),"].join()"].join(""));q.push("proc=CACHED[type]");g.push("var "+q.join(","));g.push(["if(!proc){CACHED[type]=proc=compile([",
f.join(","),"])}return proc(",h.join(","),")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+g.join("\n")+"\n----------");return(new Function("compile",g.join("\n")))(t.bind(void 0,a))}},{"./compile.js":77}],79:[function(a,h,u){(function(a){var k=!1;if("undefined"!==typeof Float64Array){var g=new Float64Array(1),q=new Uint32Array(g.buffer);g[0]=1;k=!0;1072693248===q[1]?(h.exports=function(a){g[0]=a;return[q[0],q[1]]},h.exports.pack=function(a,f){q[0]=a;q[1]=f;return g[0]},h.exports.lo=
function(a){g[0]=a;return q[0]},h.exports.hi=function(a){g[0]=a;return q[1]}):1072693248===q[0]?(h.exports=function(a){g[0]=a;return[q[1],q[0]]},h.exports.pack=function(a,f){q[1]=a;q[0]=f;return g[0]},h.exports.lo=function(a){g[0]=a;return q[1]},h.exports.hi=function(a){g[0]=a;return q[0]}):k=!1}if(!k){var f=new a(8);h.exports=function(a){f.writeDoubleLE(a,0,!0);return[f.readUInt32LE(0,!0),f.readUInt32LE(4,!0)]};h.exports.pack=function(a,g){f.writeUInt32LE(a,0,!0);f.writeUInt32LE(g,4,!0);return f.readDoubleLE(0,
!0)};h.exports.lo=function(a){f.writeDoubleLE(a,0,!0);return f.readUInt32LE(0,!0)};h.exports.hi=function(a){f.writeDoubleLE(a,0,!0);return f.readUInt32LE(4,!0)}}h.exports.sign=function(a){return h.exports.hi(a)>>>31};h.exports.exponent=function(a){return(h.exports.hi(a)<<1>>>21)-1023};h.exports.fraction=function(a){var f=h.exports.lo(a);a=h.exports.hi(a);var g=a&1048575;a&2146435072&&(g+=1048576);return[f,g]};h.exports.denormalized=function(a){return!(h.exports.hi(a)&2146435072)}}).call(this,a("buffer").Buffer)},
{buffer:66}],80:[function(a,h,u){function t(a,g,q){var f=a[q]|0;if(0>=f)return[];var d=Array(f),h;if(q===a.length-1)for(h=0;h<f;++h)d[h]=g;else for(h=0;h<f;++h)d[h]=t(a,g,q+1);return d}h.exports=function(a,g){"undefined"===typeof g&&(g=0);switch(typeof a){case "number":if(0<a){var q=a|0,f=g,d,h;d=Array(q);for(h=0;h<q;++h)d[h]=f;return d}break;case "object":if("number"===typeof a.length)return t(a,g,0)}return[]}},{}],81:[function(a,h,u){h.exports=function(a,g){var q=a.length;if("number"!==typeof g){for(var f=
g=0;f<q;++f){var d=a[f];g=Math.max(g,d[0],d[1])}g=(g|0)+1}g|=0;for(var h=Array(g),f=0;f<g;++f)h[f]=[];for(f=0;f<q;++f)d=a[f],h[d[0]].push(d[1]),h[d[1]].push(d[0]);for(q=0;q<g;++q)t(h[q],function(a,d){return a-d});return h};var t=a("uniq")},{uniq:128}],82:[function(a,h,u){function t(a,e,c,d,f,g){this._color=a;this.key=e;this.value=c;this.left=d;this.right=f;this._count=g}function k(a){return new t(a._color,a.key,a.value,a.left,a.right,a._count)}function g(a,e){return new t(a,e.key,e.value,e.left,e.right,
e._count)}function q(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function f(a,e){this._compare=a;this.root=e}function d(a,e){if(e.left){var c=d(a,e.left);if(c)return c}if(c=a(e.key,e.value))return c;if(e.right)return d(a,e.right)}function D(a,e,c,d){if(0>=e(a,d.key)){if(d.left){var f=D(a,e,c,d.left);if(f)return f}if(f=c(d.key,d.value))return f}if(d.right)return D(a,e,c,d.right)}function n(a,e,c,d,f){var g=c(a,f.key),k=c(e,f.key);if(0>=g&&(f.left&&(g=n(a,e,c,d,f.left))||0<k&&
(g=d(f.key,f.value))))return g;if(0<k&&f.right)return n(a,e,c,d,f.right)}function v(a,e){this.tree=a;this._stack=e}function z(a,e){a.key=e.key;a.value=e.value;a.left=e.left;a.right=e.right;a._color=e._color;a._count=e._count}function w(a,e){return a<e?-1:a>e?1:0}h.exports=function(a){return new f(a||w,null)};a=f.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(e,c){a.push(e)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(e,
c){a.push(c)});return a}});Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,e){for(var c=this._compare,d=this.root,k=[],n=[];d;){var h=c(a,d.key);k.push(d);n.push(h);d=0>=h?d.left:d.right}k.push(new t(0,a,e,null,null,1));for(h=k.length-2;0<=h;--h)d=k[h],k[h]=0>=n[h]?new t(d._color,d.key,d.value,k[h+1],d.right,d._count+1):new t(d._color,d.key,d.value,d.left,k[h+1],d._count+1);for(h=k.length-1;1<h;--h){n=k[h-1];d=k[h];if(1===n._color||1===d._color)break;
var w=k[h-2];if(w.left===n)if(n.left===d){var v=w.right;if(v&&0===v._color)n._color=1,w.right=g(1,v),w._color=0,--h;else{w._color=0;w.left=n.right;n._color=1;n.right=w;k[h-2]=n;k[h-1]=d;q(w);q(n);3<=h&&(h=k[h-3],h.left===w?h.left=n:h.right=n);break}}else if((v=w.right)&&0===v._color)n._color=1,w.right=g(1,v),w._color=0,--h;else{n.right=d.left;w._color=0;w.left=d.right;d._color=1;d.left=n;d.right=w;k[h-2]=d;k[h-1]=n;q(w);q(n);q(d);3<=h&&(h=k[h-3],h.left===w?h.left=d:h.right=d);break}else if(n.right===
d)if((v=w.left)&&0===v._color)n._color=1,w.left=g(1,v),w._color=0,--h;else{w._color=0;w.right=n.left;n._color=1;n.left=w;k[h-2]=n;k[h-1]=d;q(w);q(n);3<=h&&(h=k[h-3],h.right===w?h.right=n:h.left=n);break}else if((v=w.left)&&0===v._color)n._color=1,w.left=g(1,v),w._color=0,--h;else{n.left=d.right;w._color=0;w.right=d.left;d._color=1;d.right=n;d.left=w;k[h-2]=d;k[h-1]=n;q(w);q(n);q(d);3<=h&&(h=k[h-3],h.right===w?h.right=d:h.left=d);break}}k[0]._color=1;return new f(c,k[0])};a.forEach=function(a,e,c){if(this.root)switch(arguments.length){case 1:return d(a,
this.root);case 2:return D(e,this._compare,a,this.root);case 3:if(!(0<=this._compare(e,c)))return n(e,c,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.left;return new v(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],e=this.root;e;)a.push(e),e=e.right;return new v(this,a)}});a.at=function(a){if(0>a)return new v(this,[]);for(var e=this.root,c=[];;){c.push(e);if(e.left){if(a<e.left._count){e=e.left;continue}a-=
e.left._count}if(!a)return new v(this,c);--a;if(e.right){if(a>=e.right._count)break;e=e.right}else break}return new v(this,[])};a.ge=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0>=g&&(f=d.length);c=0>=g?c.left:c.right}d.length=f;return new v(this,d)};a.gt=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0>g&&(f=d.length);c=0>g?c.left:c.right}d.length=f;return new v(this,d)};a.lt=function(a){for(var e=this._compare,
c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0<g&&(f=d.length);c=0>=g?c.left:c.right}d.length=f;return new v(this,d)};a.le=function(a){for(var e=this._compare,c=this.root,d=[],f=0;c;){var g=e(a,c.key);d.push(c);0<=g&&(f=d.length);c=0>g?c.left:c.right}d.length=f;return new v(this,d)};a.find=function(a){for(var e=this._compare,c=this.root,d=[];c;){var f=e(a,c.key);d.push(c);if(0===f)return new v(this,d);c=0>=f?c.left:c.right}return new v(this,[])};a.remove=function(a){return(a=this.find(a))?
a.remove():this};a.get=function(a){for(var e=this._compare,c=this.root;c;){var d=e(a,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=v.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new v(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var e=
Array(a.length),c=a[a.length-1];e[e.length-1]=new t(c._color,c.key,c.value,c.left,c.right,c._count);for(var d=a.length-2;0<=d;--d)c=a[d],e[d]=c.left===a[d+1]?new t(c._color,c.key,c.value,e[d+1],c.right,c._count):new t(c._color,c.key,c.value,c.left,e[d+1],c._count);c=e[e.length-1];if(c.left&&c.right){a=e.length;for(c=c.left;c.right;)e.push(c),c=c.right;d=e[a-1];e.push(new t(c._color,d.key,d.value,c.left,c.right,c._count));e[a-1].key=c.key;e[a-1].value=c.value;for(d=e.length-2;d>=a;--d)c=e[d],e[d]=
new t(c._color,c.key,c.value,c.left,e[d+1],c._count);e[a-1].left=e[a]}c=e[e.length-1];if(0===c._color)for(d=e[e.length-2],d.left===c?d.left=null:d.right===c&&(d.right=null),e.pop(),d=0;d<e.length;++d)e[d]._count--;else if(c.left||c.right)for(c.left?z(c,c.left):c.right&&z(c,c.right),c._color=1,d=0;d<e.length-1;++d)e[d]._count--;else{if(1===e.length)return new f(this.tree._compare,null);for(d=0;d<e.length;++d)e[d]._count--;for(var d=e[e.length-2],n,h,w,v=e.length-1;0<=v;--v){a=e[v];if(0===v){a._color=
1;break}n=e[v-1];if(n.left===a){h=n.right;if(h.right&&0===h.right._color){h=n.right=k(h);w=h.right=k(h.right);n.right=h.left;h.left=n;h.right=w;h._color=n._color;a._color=1;n._color=1;w._color=1;q(n);q(h);if(1<v){var u=e[v-2];u.left===n?u.left=h:u.right=h}e[v-1]=h;break}else if(h.left&&0===h.left._color){h=n.right=k(h);w=h.left=k(h.left);n.right=w.left;h.left=w.right;w.left=n;w.right=h;w._color=n._color;n._color=1;h._color=1;a._color=1;q(n);q(h);q(w);1<v&&(u=e[v-2],u.left===n?u.left=w:u.right=w);
e[v-1]=w;break}if(1===h._color)if(0===n._color){n._color=1;n.right=g(0,h);break}else n.right=g(0,h);else h=k(h),n.right=h.left,h.left=n,h._color=n._color,n._color=0,q(n),q(h),1<v&&(u=e[v-2],u.left===n?u.left=h:u.right=h),e[v-1]=h,e[v]=n,v+1<e.length?e[v+1]=a:e.push(a),v+=2}else{h=n.left;if(h.left&&0===h.left._color){h=n.left=k(h);w=h.left=k(h.left);n.left=h.right;h.right=n;h.left=w;h._color=n._color;a._color=1;n._color=1;w._color=1;q(n);q(h);1<v&&(u=e[v-2],u.right===n?u.right=h:u.left=h);e[v-1]=h;
break}else if(h.right&&0===h.right._color){h=n.left=k(h);w=h.right=k(h.right);n.left=w.right;h.right=w.left;w.right=n;w.left=h;w._color=n._color;n._color=1;h._color=1;a._color=1;q(n);q(h);q(w);1<v&&(u=e[v-2],u.right===n?u.right=w:u.left=w);e[v-1]=w;break}if(1===h._color)if(0===n._color){n._color=1;n.left=g(0,h);break}else n.left=g(0,h);else h=k(h),n.left=h.right,h.right=n,h._color=n._color,n._color=0,q(n),q(h),1<v&&(u=e[v-2],u.right===n?u.right=h:u.left=h),e[v-1]=h,e[v]=n,v+1<e.length?e[v+1]=a:e.push(a),
v+=2}}d.left===c?d.left=null:d.right=null}return new f(this.tree._compare,e[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,e=this._stack;if(0===e.length)return(a=this.tree.root)?a._count:0;e[e.length-1].left&&(a=e[e.length-
1].left._count);for(var c=e.length-2;0<=c;--c)e[c+1]===e[c].right&&(++a,e[c].left&&(a+=e[c].left._count));return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.right)for(e=e.right;e;)a.push(e),e=e.left;else for(a.pop();0<a.length&&a[a.length-1].right===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].left===
a[e])return!0;return!1}});a.update=function(a){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");var c=Array(e.length),d=e[e.length-1];c[c.length-1]=new t(d._color,d.key,a,d.left,d.right,d._count);for(a=e.length-2;0<=a;--a)d=e[a],c[a]=d.left===e[a+1]?new t(d._color,d.key,d.value,c[a+1],d.right,d._count):new t(d._color,d.key,d.value,d.left,c[a+1],d._count);return new f(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var e=a[a.length-1];if(e.left)for(e=
e.left;e;)a.push(e),e=e.right;else for(a.pop();0<a.length&&a[a.length-1].left===e;)e=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var e=a.length-1;0<e;--e)if(a[e-1].right===a[e])return!0;return!1}})},{}],83:[function(a,h,u){function t(a){if(0>a)return Number("0/0");for(var f=g[0],d=g.length-1;0<d;--d)f+=g[d]/(a+d);d=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(d)-d+Math.log(f)-
Math.log(a)}var k=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],g=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
h.exports=function f(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*f(1-a));if(100<a)return Math.exp(t(a));--a;for(var g=k[0],h=1;9>h;h++)g+=k[h]/(a+h);h=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,a+.5)*Math.exp(-h)*g};h.exports.log=t},{}],84:[function(a,h,u){h.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],85:[function(a,h,u){var t=a("./identity");h.exports=function(a,g,q,f){var d,h,n,v,u,
w,p,e,c=g[0],m=g[1];g=g[2];n=f[0];v=f[1];h=f[2];p=q[0];f=q[1];d=q[2];if(1E-6>Math.abs(c-p)&&1E-6>Math.abs(m-f)&&1E-6>Math.abs(g-d))return t(a);q=c-p;f=m-f;p=g-d;e=1/Math.sqrt(q*q+f*f+p*p);q*=e;f*=e;p*=e;d=v*p-h*f;h=h*q-n*p;n=n*f-v*q;(e=Math.sqrt(d*d+h*h+n*n))?(e=1/e,d*=e,h*=e,n*=e):n=h=d=0;v=f*n-p*h;u=p*d-q*n;w=q*h-f*d;(e=Math.sqrt(v*v+u*u+w*w))?(e=1/e,v*=e,u*=e,w*=e):w=u=v=0;a[0]=d;a[1]=v;a[2]=q;a[3]=0;a[4]=h;a[5]=u;a[6]=f;a[7]=0;a[8]=n;a[9]=w;a[10]=p;a[11]=0;a[12]=-(d*c+h*m+n*g);a[13]=-(v*c+u*m+
w*g);a[14]=-(q*c+f*m+p*g);a[15]=1;return a}},{"./identity":84}],86:[function(a,h,u){h.exports=function(a,k,g,q,f){k=1/Math.tan(k/2);var d=1/(q-f);a[0]=k/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+q)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*q*d;a[15]=0;return a}},{}],87:[function(a,h,u){u.read=function(a,k,g,q,f){var d;d=8*f-q-1;var h=(1<<d)-1,n=h>>1,v=-7;f=g?f-1:0;var u=g?-1:1,w=a[k+f];f+=u;g=w&(1<<-v)-1;w>>=-v;for(v+=d;0<v;g=256*g+a[k+f],f+=u,v-=8);d=g&(1<<-v)-1;g>>=-v;
for(v+=q;0<v;d=256*d+a[k+f],f+=u,v-=8);if(0===g)g=1-n;else{if(g===h)return d?NaN:Infinity*(w?-1:1);d+=Math.pow(2,q);g-=n}return(w?-1:1)*d*Math.pow(2,g-q)};u.write=function(a,k,g,q,f,d){var h,n=8*d-f-1,v=(1<<n)-1,u=v>>1,w=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;d=q?0:d-1;var p=q?1:-1,e=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);isNaN(k)||Infinity===k?(k=isNaN(k)?1:0,q=v):(q=Math.floor(Math.log(k)/Math.LN2),1>k*(h=Math.pow(2,-q))&&(q--,h*=2),k=1<=q+u?k+w/h:k+w*Math.pow(2,1-u),2<=k*h&&(q++,h/=2),q+u>=v?(k=
0,q=v):1<=q+u?(k=(k*h-1)*Math.pow(2,f),q+=u):(k=k*Math.pow(2,u-1)*Math.pow(2,f),q=0));for(;8<=f;a[g+d]=k&255,d+=p,k/=256,f-=8);q=q<<f|k;for(n+=f;0<n;a[g+d]=q&255,d+=p,q/=256,n-=8);a[g+d-p]|=128*e}},{}],88:[function(a,h,u){function t(a,e,d,f,g){this.mid=a;this.left=e;this.right=d;this.leftPoints=f;this.rightPoints=g;this.count=(e?e.count:0)+(d?d.count:0)+f.length}function k(a,e){a.mid=e.mid;a.left=e.left;a.right=e.right;a.leftPoints=e.leftPoints;a.rightPoints=e.rightPoints;a.count=e.count}function g(a,
e){var d=w(e);a.mid=d.mid;a.left=d.left;a.right=d.right;a.leftPoints=d.leftPoints;a.rightPoints=d.rightPoints;a.count=d.count}function q(a,e){var d=a.intervals([]),f=d.indexOf(e);if(0>f)return 0;d.splice(f,1);g(a,d);return 1}function f(a,e,d){for(var f=0;f<a.length&&a[f][0]<=e;++f){var g=d(a[f]);if(g)return g}}function d(a,e,d){for(var f=a.length-1;0<=f&&a[f][1]>=e;--f){var g=d(a[f]);if(g)return g}}function D(a,e){for(var d=0;d<a.length;++d){var f=e(a[d]);if(f)return f}}function n(a,e){return a-e}
function v(a,e){var d=a[0]-e[0];return d?d:a[1]-e[1]}function z(a,e){var d=a[1]-e[1];return d?d:a[0]-e[0]}function w(a){if(0===a.length)return null;for(var e=[],d=0;d<a.length;++d)e.push(a[d][0],a[d][1]);e.sort(n);for(var e=e[e.length>>1],f=[],g=[],k=[],d=0;d<a.length;++d){var h=a[d];h[1]<e?f.push(h):e<h[0]?g.push(h):k.push(h)}a=k.slice();k.sort(v);a.sort(z);return new t(e,w(f),w(g),k,a)}function p(a){this.root=a}var e=a("binary-search-bounds");h.exports=function(a){return a&&0!==a.length?new p(w(a)):
new p(null)};a=t.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};a.insert=function(a){var d=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),g(this,d)):this.left.insert(a):this.left=w([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(d+1)?(d=this.intervals([]),d.push(a),g(this,d)):this.right.insert(a):
this.right=w([a]);else{var d=e.ge(this.leftPoints,a,v),f=e.ge(this.rightPoints,a,z);this.leftPoints.splice(d,0,a);this.rightPoints.splice(f,0,a)}};a.remove=function(a){var d=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(d-1))return q(this,a);d=this.left.remove(a);if(2===d)return this.left=null,--this.count,1;1===d&&--this.count;return d}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(d-1))return q(this,a);
d=this.right.remove(a);if(2===d)return this.right=null,--this.count,1;1===d&&--this.count;return d}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var f=this.left;f.right;)a=f,f=f.right;if(a===this)f.right=this.right;else{var g=this.left,d=this.right;a.count-=f.count;a.right=f.left;f.left=g;f.right=d}k(this,f);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
k(this,this.left):k(this,this.right);return 1}for(g=e.ge(this.leftPoints,a,v);g<this.leftPoints.length&&this.leftPoints[g][0]===a[0];++g)if(this.leftPoints[g]===a)for(--this.count,this.leftPoints.splice(g,1),d=e.ge(this.rightPoints,a,z);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),1;return 0};a.queryPoint=function(a,e){if(a<this.mid){if(this.left){var g=this.left.queryPoint(a,e);if(g)return g}return f(this.leftPoints,a,
e)}return a>this.mid?this.right&&(g=this.right.queryPoint(a,e))?g:d(this.rightPoints,a,e):D(this.leftPoints,e)};a.queryInterval=function(a,e,g){if(a<this.mid&&this.left){var k=this.left.queryInterval(a,e,g);if(k)return k}return e>this.mid&&this.right&&(k=this.right.queryInterval(a,e,g))?k:e<this.mid?f(this.leftPoints,e,g):a>this.mid?d(this.rightPoints,a,g):D(this.leftPoints,g)};a=p.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new t(a[0],null,null,[a],[a])};a.remove=function(a){return this.root?
(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,e){if(this.root)return this.root.queryPoint(a,e)};a.queryInterval=function(a,e,d){if(a<=e&&this.root)return this.root.queryInterval(a,e,d)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":89}],89:[function(a,h,u){function t(a,k,f,d,h,n){a=["function ",a,"(a,l,h,",
d.join(","),"){",n?"":"var i=",f?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",h?".get(m)":"[m]"];n?0>k.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",k,"){i=m;");f?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");n?a.push("return -1};"):a.push("return i};");return a.join("")}function k(a,k,f,d){return(new Function([t("A","x"+a+"y",k,["y"],!1,d),t("B","x"+a+"y",k,["y"],!0,d),t("P","c(x,y)"+a+"0",
k,["y","c"],!1,d),t("Q","c(x,y)"+a+"0",k,["y","c"],!0,d),"function dispatchBsearch",f,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",f].join("")))()}h.exports=
{ge:k(">=",!1,"GE"),gt:k(">",!1,"GT"),lt:k("<",!0,"LT"),le:k("<=",!0,"LE"),eq:k("-",!0,"EQ",!0)}},{}],90:[function(a,h,u){h.exports=function(a,k){k=k||Array(a.length);for(var g=0;g<a.length;++g)k[a[g]]=g;return k}},{}],91:[function(a,h,u){h.exports=function(a){for(var k=Array(a),g=0;g<a;++g)k[g]=g;return k}},{}],92:[function(a,h,u){function t(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}h.exports=function(a){return null!=a&&(t(a)||"function"===typeof a.readFloatLE&&
"function"===typeof a.slice&&t(a.slice(0,0))||!!a._isBuffer)}},{}],93:[function(a,h,u){var t={}.toString;h.exports=Array.isArray||function(a){return"[object Array]"==t.call(a)}},{}],94:[function(a,h,u){function t(a,d,f){for(var e=0,c=0;c<a;++c)d&1<<c&&(e|=1<<f[c]);return e}function k(a,k,h,e,c,m){function x(a,e){b.push("for(","i"+c[a],"=",e,";","i"+c[a],"<","s"+c[a],";","++","i"+c[a],"){")}function u(a){for(var e=0;e<A;++e)b.push("p"+e,"+=","u"+e+"_"+c[a],";");b.push("}")}function H(){for(var a=1;a<
1<<aa;++a)b.push(v,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",v,";")}function na(a,g){if(0>a){for(var k=0;k<A;++k)m[k]?b.push("c"+k+"_0","=","d"+k,".get(","p"+k,");"):b.push("c"+k+"_0","=","d"+k,"[","p"+k,"];");for(var l=[],k=0;k<A;++k)l.push("c"+k+"_0");for(k=0;k<e;++k)l.push("x"+k);b.push("b0","=",f,"[",n,"]=phase(",l.join(),");");for(l=1;l<1<<aa;++l)b.push("b"+l,"=",f,"[",n,"+","e"+l,"];");k=[];for(l=1;l<1<<aa;++l)k.push("(b0!==b"+l+")");b.push("if(",k.join("||"),"){");for(var h=[],k=0;k<aa;++k)h.push("i"+
k);for(k=0;k<A;++k)for(h.push("c"+k+"_0"),l=1;l<1<<aa;++l)m[k]?b.push("c"+k+"_"+l,"=","d"+k,".get(","p"+k,"+","d"+k+"_"+l,");"):b.push("c"+k+"_"+l,"=","d"+k,"[","p"+k,"+","d"+k+"_"+l,"];"),h.push("c"+k+"_"+l);for(k=0;k<1<<aa;++k)h.push("b"+k);for(k=0;k<e;++k)h.push("x"+k);b.push("vertex(",h.join(),");","v0","=",q,"[",n,"]=",d,"++;");k=(1<<aa)-1;h="b"+k;for(l=0;l<aa;++l)if(0===(g&~(1<<l))){for(var p=k^1<<l,t="b"+p,w=[],v=p;0<v;v=v-1&p)w.push(q+"["+n+"+"+("e"+v)+"]");w.push("v0");for(v=0;v<A;++v)l&
1?w.push("c"+v+"_"+k,"c"+v+"_"+p):w.push("c"+v+"_"+p,"c"+v+"_"+k);l&1?w.push(h,t):w.push(t,h);for(v=0;v<e;++v)w.push("x"+v);b.push("if(",h,"!==",t,"){","face(",w.join(),")}")}b.push("}",n,"+=1;")}else{for(l=a-1;0<=l;--l)x(l,0);k=[];for(l=0;l<A;++l)m[l]?k.push("d"+l+".get("+("p"+l)+")"):k.push("d"+l+"["+("p"+l)+"]");for(l=0;l<e;++l)k.push("x"+l);b.push(f,"[",n,"++]=phase(",k.join(),");");for(l=0;l<a;++l)u(l);for(l=0;l<A;++l)b.push("p"+l,"+=","u"+l+"_"+c[a],";");b.push("if(","s"+c[a],">0){","i"+c[a],
"=1;");na(a-1,g|1<<c[a]);for(l=0;l<A;++l)b.push("p"+l,"+=","u"+l+"_"+c[a],";");a===aa-1&&(b.push(n,"=0;"),H());x(a,2);na(a-1,g);a===aa-1&&(b.push("if(","i"+c[aa-1],"&1){",n,"=0;}"),H());u(a);b.push("}")}}var A=m.length,aa=c.length;if(2>aa)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var C="extractContour"+c.join("_"),b=[],l=[],B=[],L=0;L<A;++L)B.push("a"+L);for(L=0;L<e;++L)B.push("x"+L);for(L=0;L<aa;++L)l.push("s"+L+"=a0.shape["+L+"]|0");for(L=0;L<A;++L){l.push("d"+L+"="+
("a"+L)+".data","o"+L+"="+("a"+L)+".offset|0");for(var W=0;W<aa;++W)l.push("t"+L+"_"+W+"="+("a"+L)+".stride["+W+"]|0")}for(L=0;L<A;++L)for(l.push("p"+L+"="+("o"+L)),l.push("c"+L+"_0"),W=1;W<1<<aa;++W){for(var F=[],fa=0;fa<aa;++fa)W&1<<fa&&F.push("-"+("t"+L+"_"+fa));l.push("d"+L+"_"+W+"=("+F.join("")+")|0");l.push("c"+L+"_"+W+"=0")}for(L=0;L<A;++L)for(W=0;W<aa;++W)fa=["t"+L+"_"+c[W]],0<W&&fa.push("t"+L+"_"+c[W-1]+"*"+("s"+c[W-1])),l.push("u"+L+"_"+c[W]+"=("+fa.join("-")+")|0");for(L=0;L<aa;++L)l.push("i"+
L+"=0");l.push(d+"=0");W=["2"];for(L=aa-2;0<=L;--L)W.push("s"+c[L]);l.push(D+"=("+W.join("*")+")|0",f+"=mallocUint32("+D+")",q+"=mallocUint32("+D+")",n+"=0");l.push("b0=0");for(W=1;W<1<<aa;++W){L=[];F=[];for(fa=0;fa<aa;++fa)W&1<<fa&&(0===F.length?L.push("1"):L.unshift(F.join("*"))),F.push("s"+c[fa]);fa="";0>L[0].indexOf("s"+c[aa-2])&&(fa="-");F=t(aa,W,c);l.push("e"+F+"=(-"+L.join("-")+")|0","y"+F+"=("+fa+L.join("-")+")|0","b"+F+"=0")}l.push("v0=0",v+"=0");na(aa-1,0);b.push("freeUint32(",q,");freeUint32(",
f,");");C=["'use strict';function ",C,"(",B.join(),"){var ",l.join(),";",b.join(""),"}return ",C].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",C))(a,k,h,g.mallocUint32,g.freeUint32)}var g=a("typedarray-pool");h.exports=function(a){function d(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&d("Must specify arguments");var f=a.order;Array.isArray(f)||d("Must specify order");var e=a.arrayArguments||1;1>e&&d("Must have at least one array argument");
var c=a.scalarArguments||0;0>c&&d("Scalar arg count must be > 0");"function"!==typeof a.vertex&&d("Must specify vertex creation function");"function"!==typeof a.cell&&d("Must specify cell creation function");"function"!==typeof a.phase&&d("Must specify phase function");for(var g=a.getters||[],h=Array(e),q=0;q<e;++q)0<=g.indexOf(q)?h[q]=!0:h[q]=!1;return k(a.vertex,a.cell,a.phase,c,f,h)};var q="V",f="P",d="N",D="Q",n="X",v="T"},{"typedarray-pool":126}],95:[function(a,h,u){function t(a,d){return a[0]-
d[0]}function k(){var a=this.stride,d=Array(a.length),f;for(f=0;f<d.length;++f)d[f]=[Math.abs(a[f]),f];d.sort(t);a=Array(d.length);for(f=0;f<a.length;++f)a[f]=d[f][1];return a}function g(a,d){var g=["View",d,"d",a].join("");0>d&&(g="View_Nil"+a);var h="generic"===a;if(-1===d){var e,g=new Function("function "+g+"(a){this.data=a;};var proto="+g+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+
g+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+g+"(a){return new "+g+"(a);}");return g()}if(0===d)return g=new Function("TrivialArray","function "+g+"(a,d) {this.data = a;this.offset = d};var proto="+g+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+g+"_copy() {return new "+g+"(this.data,this.offset)};proto.pick=function "+
g+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+g+"_get(){return "+(h?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+g+"_set(v){return "+(h?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+g+"(a,b,c,d){return new "+g+"(a,d)}"),g(n[a][0]);e=["'use strict'"];var c=f(d),m=c.map(function(a){return"i"+a}),q="this.offset+"+c.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),t=c.map(function(a){return"b"+
a}).join(","),u=c.map(function(a){return"c"+a}).join(",");e.push("function "+g+"(a,"+t+","+u+",d){this.data=a","this.shape=["+t+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+g+".prototype","proto.dtype='"+a+"'","proto.dimension="+d);e.push("Object.defineProperty(proto,'size',{get:function "+g+"_size(){return "+c.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===d?e.push("proto.order=[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>d?(e.push("function "+g+"_order(){"),
2===d?e.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===d&&e.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):e.push("ORDER})"));e.push("proto.set=function "+g+"_set("+m.join(",")+",v){");h?e.push("return this.data.set("+q+",v)}"):e.push("return this.data["+
q+"]=v}");e.push("proto.get=function "+g+"_get("+m.join(",")+"){");h?e.push("return this.data.get("+q+")}"):e.push("return this.data["+q+"]}");e.push("proto.index=function "+g+"_index(",m.join(),"){return "+q+"}");e.push("proto.hi=function "+g+"_hi("+m.join(",")+"){return new "+g+"(this.data,"+c.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+c.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");h=c.map(function(a){return"a"+
a+"=this.shape["+a+"]"});q=c.map(function(a){return"c"+a+"=this.stride["+a+"]"});e.push("proto.lo=function "+g+"_lo("+m.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+q.join(","));for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");e.push("return new "+g+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"c"+a}).join(",")+",b)}");e.push("proto.step=function "+g+"_step("+m.join(",")+"){var "+c.map(function(a){return"a"+
a+"=this.shape["+a+"]"}).join(",")+","+c.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");e.push("return new "+g+"(this.data,"+c.map(function(a){return"a"+a}).join(",")+","+c.map(function(a){return"b"+a}).join(",")+",c)}");q=Array(d);t=Array(d);for(h=0;h<d;++h)q[h]="a[i"+h+"]",t[h]="b[i"+h+"]";
e.push("proto.transpose=function "+g+"_transpose("+m+"){"+m.map(function(a,c){return a+"=("+a+"===undefined?"+c+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+g+"(this.data,"+q.join(",")+","+t.join(",")+",this.offset)}");e.push("proto.pick=function "+g+"_pick("+m+"){var a=[],b=[],c=this.offset");for(h=0;h<d;++h)e.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");e.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");
e.push("return function construct_"+g+"(data,shape,stride,offset){return new "+g+"(data,"+c.map(function(a){return"shape["+a+"]"}).join(",")+","+c.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");g=new Function("CTOR_LIST","ORDER",e.join("\n"));return g(n[a],k)}function q(a){if(d(a))return"buffer";if(D)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";
case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(a)?"array":"generic"}var f=a("iota-array"),d=a("is-buffer"),D="undefined"!==typeof Float64Array,n={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],
uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var a in n)n[a].push(g(a,-1))});h.exports=function(a,d,f,k){if(void 0===a){var e=n.array[0];return e([])}"number"===typeof a&&(a=[a]);void 0===d&&(d=[a.length]);e=d.length;if(void 0===f){f=Array(e);for(var c=e-1,m=1;0<=c;--c)f[c]=m,m*=d[c]}if(void 0===k)for(c=k=0;c<e;++c)0>f[c]&&(k-=(d[c]-1)*f[c]);c=q(a);for(m=n[c];m.length<=e+1;)m.push(g(c,m.length-1));e=m[e+1];return e(a,d,f,k)}},{"iota-array":91,
"is-buffer":92}],96:[function(a,h,u){var t=a("double-bits"),k=Math.pow(2,-1074);h.exports=function(a,h){if(isNaN(a)||isNaN(h))return NaN;if(a===h)return a;if(0===a)return 0>h?-k:k;var f=t.hi(a),d=t.lo(a);h>a===0<a?4294967295===d?(f+=1,d=0):d+=1:0===d?(d=4294967295,--f):--d;return t.pack(d,f)}},{"double-bits":79}],97:[function(a,h,u){h.exports=function(a){var h=a.length;if(h<t)for(var f=1,d=0;d<h;++d)for(var u=0;u<d;++u)if(a[d]<a[u])f=-f;else{if(a[d]===a[u])return 0}else{for(var n=k.mallocUint8(h),
d=0;d<h;++d)n[d]=0;f=1;for(d=0;d<h;++d)if(!n[d]){var v=1;n[d]=1;for(u=a[d];u!==d;u=a[u]){if(n[u])return k.freeUint8(n),0;v+=1;n[u]=1}v&1||(f=-f)}k.freeUint8(n)}return f};var t=32,k=a("typedarray-pool")},{"typedarray-pool":126}],98:[function(a,h,u){var t=a("typedarray-pool"),k=a("invert-permutation");u.rank=function(a){var h=a.length;switch(h){case 0:case 1:return 0;case 2:return a[1]}var f=t.mallocUint32(h),d=t.mallocUint32(h),u=0,n;k(a,d);for(n=0;n<h;++n)f[n]=a[n];for(n=h-1;0<n;--n)h=d[n],a=f[n],
f[n]=f[h],f[h]=a,d[n]=d[a],d[a]=h,u=(u+a)*n;t.freeUint32(d);t.freeUint32(f);return u};u.unrank=function(a,k,f){switch(a){case 0:return f?f:[];case 1:return f?(f[0]=0,f):[0];case 2:return f?(k?(f[0]=0,f[1]=1):(f[0]=1,f[1]=0),f):k?[0,1]:[1,0]}f=f||Array(a);var d,h,n=1;f[0]=0;for(h=1;h<a;++h)f[h]=h,n=n*h|0;for(h=a-1;0<h;--h)a=k/n|0,k=k-a*n|0,n=n/h|0,d=f[h]|0,f[h]=f[a]|0,f[a]=d|0;return f}},{"invert-permutation":90,"typedarray-pool":126}],99:[function(a,h,u){h.exports=function(a,g){function h(a,d){var e=
v[d][a[d]];e.splice(e.indexOf(a),1)}function f(a,d,e){var f,k,n;for(k=0;2>k;++k)if(0<v[k][d].length){f=v[k][d][0];n=k;break}k=f[n^1];for(var p=0;2>p;++p)for(var w=v[p][d],u=0;u<w.length;++u){var b=w[u],l=b[p^1];0<t(g[a],g[d],g[k],g[l])&&(f=b,k=l,n=p)}if(e)return k;f&&h(f,n);return k}function d(a,d){var e=v[d][a][0],k=[a];h(e,d);for(e=e[d^1];;){for(;e!==a;)k.push(e),e=f(k[k.length-2],e,!1);if(0===v[0][a].length+v[1][a].length)break;var e=k[k.length-1],n=a,p=k[1],w=f(e,n,!0);if(0>t(g[e],g[n],g[p],g[w]))break;
k.push(a);e=f(e,n)}return k}for(var u=g.length|0,n=a.length,v=[Array(u),Array(u)],z=0;z<u;++z)v[0][z]=[],v[1][z]=[];for(z=0;z<n;++z){var w=a[z];v[0][w[0]].push(w);v[1][w[1]].push(w)}n=[];for(z=0;z<u;++z)0===v[0][z].length+v[1][z].length&&n.push([z]);for(z=0;z<u;++z)for(w=0;2>w;++w){for(var p=[];0<v[w][z].length;){var e=d(z,w);e[1]===e[e.length-1]?p.push.apply(p,e):(0<p.length&&n.push(p),p=e)}0<p.length&&n.push(p)}return n};var t=a("compare-angle")},{"compare-angle":74}],100:[function(a,h,u){h.exports=
function(a,g){for(var h=t(a,g.length),f=Array(g.length),d=Array(g.length),u=[],n=0;n<g.length;++n){var v=h[n].length;d[n]=v;f[n]=!0;1>=v&&u.push(n)}for(;0<u.length;)for(v=u.pop(),f[v]=!1,v=h[v],n=0;n<v.length;++n){var z=v[n];0===--d[z]&&u.push(z)}h=Array(g.length);d=[];for(n=0;n<g.length;++n)f[n]?(v=d.length,h[n]=v,d.push(g[n])):h[n]=-1;u=[];for(n=0;n<a.length;++n)v=a[n],f[v[0]]&&f[v[1]]&&u.push([h[v[0]],h[v[1]]]);return[u,d]};var t=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":81}],101:[function(a,
h,u){function t(a,d){for(var f=Array(a),e=0;e<a;++e)f[e]=d;return f}function k(a){for(var d=Array(a),f=0;f<a;++f)d[f]=[];return d}h.exports=function(a,h){function p(a){for(var b=a.length,c=0;c<b;++c)if(!W[a[c]])return!1;return!0}var e=v(a,h);a=e[0];h=e[1];for(var c=h.length,m=g(a,h.length),x=0;x<c;++x)if(1===m[x].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var m=q(a,h),m=m.filter(function(a){for(var b=a.length,c=[0],e=0;e<b;++e)var f=h[a[e]],g=h[a[(e+1)%b]],k=d(-f[0],
f[1]),m=d(-f[0],g[1]),f=d(g[0],f[1]),g=d(g[0],g[1]),c=D(c,D(D(k,m),D(f,g)));return 0<c[c.length-1]}),e=m.length,u=Array(e),H=Array(e),x=0;x<e;++x){u[x]=x;var na=Array(e),A=m[x].map(function(a){return h[a]}),aa=f([A]),C=0,b=0;a:for(;b<e;++b)if(na[b]=0,x!==b){for(var A=m[b],l=A.length,B=0;B<l;++B){var L=aa(h[A[B]]);if(0!==L){0>L&&(na[b]=1,C+=1);continue a}}na[b]=1;C+=1}H[x]=[C,x,na]}H.sort(function(a,b){return b[0]-a[0]});for(x=0;x<e;++x)for(na=H[x],A=na[1],l=na[2],b=0;b<e;++b)l[b]&&(u[b]=A);H=k(e);
for(x=0;x<e;++x)H[x].push(u[x]),H[u[x]].push(x);for(var na={},W=t(c,!1),x=0;x<e;++x)for(A=m[x],l=A.length,b=0;b<l;++b)c=A[b],aa=A[(b+1)%l],C=Math.min(c,aa)+":"+Math.max(c,aa),C in na?(C=na[C],H[C].push(x),H[x].push(C),W[c]=W[aa]=!0):na[C]=x;b=[];c=t(e,-1);for(x=0;x<e;++x)u[x]!==x||p(m[x])?c[x]=-1:(b.push(x),c[x]=0);for(e=[];0<b.length;){x=b.pop();u=H[x];n(u,function(a,b){return a-b});var l=u.length,na=c[x],F;0===na&&(A=m[x],F=[A]);for(x=0;x<l;++x)A=u[x],0<=c[A]||(c[A]=na^1,b.push(A),0===na&&(A=m[A],
p(A)||(A.reverse(),F.push(A))));0===na&&e.push(F)}return e};var g=a("edges-to-adjacency-list"),q=a("planar-dual"),f=a("point-in-big-polygon"),d=a("two-product"),D=a("robust-sum"),n=a("uniq"),v=a("./lib/trim-leaves")},{"./lib/trim-leaves":100,"edges-to-adjacency-list":81,"planar-dual":99,"point-in-big-polygon":103,"robust-sum":114,"two-product":124,uniq:128}],102:[function(a,h,u){arguments[4][89][0].apply(u,arguments)},{dup:89}],103:[function(a,h,u){function t(){return!0}function k(a){return function(e,
c){var d=a[e];return d?!!d.queryPoint(c,t):!1}}function g(a){for(var d={},c=0;c<a.length;++c){var f=a[c],g=f[0][0],h=f[0][1],f=f[1][1],h=[Math.min(h,f),Math.max(h,f)];g in d?d[g].push(h):d[g]=[h]}a={};g=Object.keys(d);for(c=0;c<g.length;++c)a[g[c]]=z(d[g[c]]);return k(a)}function q(a,d){return function(c){var f=w.le(d,c[0]);if(0>f)return 1;var g=a[f];if(!g)if(0<f&&d[f]===c[0])g=a[f-1];else return 1;for(f=1;g;){var k=g.key,h=n(c,k[0],k[1]);if(k[0][0]<k[1][0])if(0>h)g=g.left;else if(0<h)f=-1,g=g.right;
else return 0;else if(0<h)g=g.left;else if(0>h)f=1,g=g.right;else return 0}return f}}function f(a){return 1}function d(a){return function(d){return a(d[0],d[1])?0:1}}function D(a,d){return function(c){return a(c[0],c[1])?0:d(c)}}h.exports=function(a){for(var e=a.length,c=[],k=[],h=0;h<e;++h)for(var n=a[h],t=n.length,w=t-1,u=0;u<t;w=u++){var w=n[w],z=n[u];w[0]===z[0]?k.push([w,z]):c.push([w,z])}if(0===c.length)return 0===k.length?f:d(g(k));a=v(c);a=q(a.slabs,a.coordinates);return 0===k.length?a:D(g(k),
a)};var n=a("robust-orientation")[3],v=a("slab-decomposition"),z=a("interval-tree-1d"),w=a("binary-search-bounds")},{"binary-search-bounds":102,"interval-tree-1d":88,"robust-orientation":109,"slab-decomposition":121}],104:[function(a,h,u){var t=a("big-rat/add");h.exports=function(a,g){for(var h=a.length,f=Array(h),d=0;d<h;++d)f[d]=t(a[d],g[d]);return f}},{"big-rat/add":39}],105:[function(a,h,u){h.exports=function(a){for(var g=Array(a.length),h=0;h<a.length;++h)g[h]=t(a[h]);return g};var t=a("big-rat")},
{"big-rat":42}],106:[function(a,h,u){var t=a("big-rat"),k=a("big-rat/mul");h.exports=function(a,h){for(var f=t(h),d=a.length,u=Array(d),n=0;n<d;++n)u[n]=k(a[n],f);return u}},{"big-rat":42,"big-rat/mul":51}],107:[function(a,h,u){var t=a("big-rat/sub");h.exports=function(a,g){for(var h=a.length,f=Array(h),d=0;d<h;++d)f[d]=t(a[d],g[d]);return f}},{"big-rat/sub":53}],108:[function(a,h,u){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var g=d[f-1]=Array(a.length-1),k=0,h=0;k<a.length;++k)k!==
c&&(g[h++]=a[f][k]);return d}function k(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",k(a.slice(0,c)),",",k(a.slice(c)),")"].join("")}function g(a,c){if("m"===a.charAt(0)){if("w"===c.charAt(0)){var d=a.split("[");return["w",c.substr(1),"m",d[0].substr(1)].join("")}return["prod(",a,",",c,")"].join("")}return g(c,a)}function q(a){if(2===a.length)return[["diff(",g(a[0][0],a[1][1]),",",g(a[1][0],a[0][1]),")"].join("")];for(var c=
[],d=0;d<a.length;++d)c.push(["scale(",k(q(t(a,d))),",",d&1?"-":"",a[0][d],")"].join(""));return c}function f(a,c){for(var d=[],f=0;f<c-2;++f)d.push(["prod(m",a,"[",f,"],m",a,"[",f,"])"].join(""));return k(d)}function d(a){for(var c=[],d=[],g=Array(a),h=0;h<a;++h){g[h]=Array(a);for(var p=0;p<a;++p)g[h][p]=["m",p,"[",a-h-2,"]"].join("")}for(h=0;h<a;++h)g[0][h]="1",g[a-1][h]="w"+h;for(h=0;h<a;++h)0===(h&1)?c.push.apply(c,q(t(g,h))):d.push.apply(d,q(t(g,h)));c=k(c);d=k(d);g="exactInSphere"+a;p=[];for(h=
0;h<a;++h)p.push("m"+h);p=["function ",g,"(",p.join(),"){"];for(h=0;h<a;++h){p.push("var w",h,"=",f(h,a),";");for(var u=0;u<a;++u)u!==h&&p.push("var w",h,"m",u,"=scale(w",h,",m",u,"[0]);")}p.push("var p=",c,",n=",d,",d=diff(p,n);return d[d.length-1];}return ",g);return(new Function("sum","diff","prod","scale",p.join("")))(v,z,n,w)}function D(a){var c=p[a.length];c||(c=p[a.length]=d(a.length));return c.apply(void 0,a)}var n=a("two-product"),v=a("robust-sum"),z=a("robust-subtract"),w=a("robust-scale"),
p=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=p.length;)p.push(d(p.length));for(var a=[],c=["slow"],f=0;6>=f;++f)a.push("a"+f),c.push("o"+f);for(var g=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],f=2;6>=f;++f)g.push("case ",f,":return o",f,"(",a.slice(0,f).join(),");");g.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");c.push(g.join(""));
a=Function.apply(void 0,c);h.exports=a.apply(void 0,[D].concat(p));for(f=0;6>=f;++f)h.exports[f]=p[f]})()},{"robust-scale":111,"robust-subtract":113,"robust-sum":114,"two-product":124}],109:[function(a,h,u){function t(a,c){for(var d=Array(a.length-1),f=1;f<a.length;++f)for(var g=d[f-1]=Array(a.length-1),k=0,h=0;k<a.length;++k)k!==c&&(g[h++]=a[f][k]);return d}function k(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var c=a.length>>1;return["sum(",k(a.slice(0,
c)),",",k(a.slice(c)),")"].join("")}function g(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var c=[],d=0;d<a.length;++d)c.push(["scale(",k(g(t(a,d))),",",d&1?"-":"",a[0][d],")"].join(""));return c}function q(a){for(var c=[],f=[],h=Array(a),q=0;q<a;++q){h[q]=Array(a);for(var p=0;p<a;++p)h[q][p]=["m",p,"[",a-q-1,"]"].join("")}q=[];for(p=0;p<a;++p)0===(p&1)?c.push.apply(c,g(t(h,p))):f.push.apply(f,g(t(h,p))),q.push("m"+p);c=k(c);f=k(f);
a="orientation"+a+"Exact";a=["function ",a,"(",q.join(),"){var p=",c,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",a].join("");return(new Function("sum","prod","scale","sub",a))(D,d,n,v)}function f(a){var c=p[a.length];c||(c=p[a.length]=q(a.length));return c.apply(void 0,a)}var d=a("two-product"),D=a("robust-sum"),n=a("robust-scale"),v=a("robust-subtract"),z=q(3),w=q(4),p=[function(){return 0},function(){return 0},function(a,c){return c[0]-a[0]},function(a,c,d){var f=(a[1]-d[1])*(c[0]-d[0]),
g=(a[0]-d[0])*(c[1]-d[1]),k=f-g;if(0<f){if(0>=g)return k;f+=g}else if(0>f){if(0<=g)return k;f=-(f+g)}else return k;f*=3.3306690738754716E-16;return k>=f||k<=-f?k:z(a,c,d)},function(a,c,d,f){var g=a[0]-f[0],k=c[0]-f[0],h=d[0]-f[0],n=a[1]-f[1],q=c[1]-f[1],p=d[1]-f[1],b=a[2]-f[2],l=c[2]-f[2],t=d[2]-f[2],u=k*p,v=h*q,h=h*n,p=g*p,g=g*q,n=k*n,k=b*(u-v)+l*(h-p)+t*(g-n),b=7.771561172376103E-16*((Math.abs(u)+Math.abs(v))*Math.abs(b)+(Math.abs(h)+Math.abs(p))*Math.abs(l)+(Math.abs(g)+Math.abs(n))*Math.abs(t));
return k>b||-k>b?k:w(a,c,d,f)}];(function(){for(;5>=p.length;)p.push(q(p.length));for(var a=[],c=["slow"],d=0;5>=d;++d)a.push("a"+d),c.push("o"+d);for(var g=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;5>=d;++d)g.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");g.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");c.push(g.join(""));a=Function.apply(void 0,
c);h.exports=a.apply(void 0,[f].concat(p));for(d=0;5>=d;++d)h.exports[d]=p[d]})()},{"robust-scale":111,"robust-subtract":113,"robust-sum":114,"two-product":124}],110:[function(a,h,u){var t=a("robust-sum"),k=a("robust-scale");h.exports=function(a,h){if(1===a.length)return k(h,a[0]);if(1===h.length)return k(a,h[0]);if(0===a.length||0===h.length)return[0];var f=[0];if(a.length<h.length)for(var d=0;d<a.length;++d)f=t(f,k(h,a[d]));else for(d=0;d<h.length;++d)f=t(f,k(a,h[d]));return f}},{"robust-scale":111,
"robust-sum":114}],111:[function(a,h,u){var t=a("two-product"),k=a("two-sum");h.exports=function(a,h){var f=a.length;if(1===f)return f=t(a[0],h),f[0]?f:[f[1]];var d=Array(2*f),u=[.1,.1],n=[.1,.1],v=0;t(a[0],h,u);u[0]&&(d[v++]=u[0]);for(var z=1;z<f;++z){t(a[z],h,n);k(u[1],n[0],u);u[0]&&(d[v++]=u[0]);var w=n[1],p=u[1],e=w+p,w=p-(e-w);u[1]=e;w&&(d[v++]=w)}u[1]&&(d[v++]=u[1]);0===v&&(d[v++]=0);d.length=v;return d}},{"two-product":124,"two-sum":125}],112:[function(a,h,u){h.exports=function(a,g,h,f){var d=
t(a,h,f),u=t(g,h,f);if(0<d&&0<u||0>d&&0>u)return!1;var n=t(h,a,g),v=t(f,a,g);if(0<n&&0<v||0>n&&0>v)return!1;if(0===d&&0===u&&0===n&&0===v){a:{for(d=0;2>d;++d){var u=a[d],n=g[d],v=Math.max(u,n),z=h[d],w=f[d],p=Math.min(z,w);if(Math.max(z,w)<Math.min(u,n)||v<p){a=!1;break a}}a=!0}return a}return!0};var t=a("robust-orientation")[3]},{"robust-orientation":109}],113:[function(a,h,u){h.exports=function(a,k){var g=a.length|0,h=k.length|0;if(1===g&&1===h){var h=a[0],f=-k[0],g=h+f,d=g-h,g=(h=h-(g-d)+(f-d))?
[h,g]:[g];return g}var f=Array(g+h),u=d=0,n=0,v=Math.abs,z=a[u],w=v(z),p=-k[n],e=v(p),c,m;w<e?(m=z,u+=1,u<g&&(z=a[u],w=v(z))):(m=p,n+=1,n<h&&(p=-k[n],e=v(p)));u<g&&w<e||n>=h?(c=z,u+=1,u<g&&(z=a[u],w=v(z))):(c=p,n+=1,n<h&&(p=-k[n],e=v(p)));var x=c+m;m-=x-c;for(var y=x,H;u<g&&n<h;)w<e?(c=z,u+=1,u<g&&(z=a[u],w=v(z))):(c=p,n+=1,n<h&&(p=-k[n],e=v(p))),x=c+m,c=x-c,(c=m-c)&&(f[d++]=c),c=y+x,H=c-y,m=c-H,x-=H,y-=m,m=y+x,y=c;for(;u<g;)c=z,x=c+m,c=x-c,(c=m-c)&&(f[d++]=c),c=y+x,H=c-y,m=c-H,x-=H,y-=m,m=y+x,y=
c,u+=1,u<g&&(z=a[u]);for(;n<h;)c=p,x=c+m,c=x-c,(c=m-c)&&(f[d++]=c),c=y+x,H=c-y,m=c-H,x-=H,y-=m,m=y+x,y=c,n+=1,n<h&&(p=-k[n]);m&&(f[d++]=m);y&&(f[d++]=y);d||(f[d++]=0);f.length=d;return f}},{}],114:[function(a,h,u){h.exports=function(a,k){var g=a.length|0,h=k.length|0;if(1===g&&1===h){var h=a[0],f=k[0],g=h+f,d=g-h,g=(h=h-(g-d)+(f-d))?[h,g]:[g];return g}var f=Array(g+h),u=d=0,n=0,v=Math.abs,z=a[u],w=v(z),p=k[n],e=v(p),c,m;w<e?(m=z,u+=1,u<g&&(z=a[u],w=v(z))):(m=p,n+=1,n<h&&(p=k[n],e=v(p)));u<g&&w<e||
n>=h?(c=z,u+=1,u<g&&(z=a[u],w=v(z))):(c=p,n+=1,n<h&&(p=k[n],e=v(p)));var x=c+m;m-=x-c;for(var y=x,H;u<g&&n<h;)w<e?(c=z,u+=1,u<g&&(z=a[u],w=v(z))):(c=p,n+=1,n<h&&(p=k[n],e=v(p))),x=c+m,c=x-c,(c=m-c)&&(f[d++]=c),c=y+x,H=c-y,m=c-H,x-=H,y-=m,m=y+x,y=c;for(;u<g;)c=z,x=c+m,c=x-c,(c=m-c)&&(f[d++]=c),c=y+x,H=c-y,m=c-H,x-=H,y-=m,m=y+x,y=c,u+=1,u<g&&(z=a[u]);for(;n<h;)c=p,x=c+m,c=x-c,(c=m-c)&&(f[d++]=c),c=y+x,H=c-y,m=c-H,x-=H,y-=m,m=y+x,y=c,n+=1,n<h&&(p=k[n]);m&&(f[d++]=m);y&&(f[d++]=y);d||(f[d++]=0);f.length=
d;return f}},{}],115:[function(a,h,u){arguments[4][56][0].apply(u,arguments)},{dup:56}],116:[function(a,h,u){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var g=0;g<a;++g)this.roots[g]=g,this.ranks[g]=0}"use restrict";h.exports=t;t.prototype.length=function(){return this.roots.length};t.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};t.prototype.find=function(a){for(var g=this.roots;g[a]!==a;){var h=g[a];g[a]=g[h];a=h}return a};t.prototype.link=
function(a,g){var h=this.find(a),f=this.find(g);if(h!==f){var d=this.ranks,t=this.roots,n=d[h],u=d[f];n<u?t[h]=f:u<n?t[f]=h:(t[f]=h,++d[h])}}},{}],117:[function(a,h,u){function t(a,d){var f=a.length,e=a.length-d.length,c=Math.min;if(e)return e;switch(f){case 0:return 0;case 1:return a[0]-d[0];case 2:return(f=a[0]+a[1]-d[0]-d[1])?f:c(a[0],a[1])-c(d[0],d[1]);case 3:var e=a[0]+a[1],g=d[0]+d[1];if(f=e+a[2]-(g+d[2]))return f;var k=c(a[0],a[1]),h=c(d[0],d[1]);return(f=c(k,a[2])-c(h,d[2]))?f:c(k+a[2],e)-
c(h+d[2],g);default:c=a.slice(0);c.sort();g=d.slice(0);g.sort();for(k=0;k<f;++k)if(e=c[k]-g[k])return e;return 0}}function k(a,d){return t(a[0],d[0])}function g(a,d){if(d){for(var f=a.length,e=Array(f),c=0;c<f;++c)e[c]=[a[c],d[c]];e.sort(k);for(c=0;c<f;++c)a[c]=e[c][0],d[c]=e[c][1]}else a.sort(t);return a}function q(a){if(0===a.length)return[];for(var d=1,f=a.length,e=1;e<f;++e){var c=a[e];t(c,a[e-1])&&(e===d?d++:a[d++]=c)}a.length=d;return a}function f(a,d){for(var f=0,e=a.length-1,c=-1;f<=e;){var g=
f+e>>1,k=t(a[g],d);0>=k?(0===k&&(c=g),f=g+1):0<k&&(e=g-1)}return c}function d(a,d){for(var g=Array(a.length),e=0,c=g.length;e<c;++e)g[e]=[];for(var c=[],e=0,k=d.length;e<k;++e)for(var h=d[e],q=h.length,u=1,v=1<<q;u<v;++u){c.length=n.popCount(u);for(var A=0,D=0;D<q;++D)u&1<<D&&(c[A++]=h[D]);A=f(a,c);if(!(0>A))for(;!(g[A++].push(e),A>=a.length||0!==t(a[A],c)););}return g}function D(a,d){if(0>d)return[];for(var f=[],e=(1<<d+1)-1,c=0;c<a.length;++c)for(var k=a[c],h=e;h<1<<k.length;h=n.nextCombination(h)){for(var q=
Array(d+1),t=0,u=0;u<k.length;++u)h&1<<u&&(q[t++]=k[u]);f.push(q)}return g(f)}"use restrict";var n=a("bit-twiddle"),v=a("union-find");u.dimension=function(a){for(var d=0,f=Math.max,e=0,c=a.length;e<c;++e)d=f(d,a[e].length);return d-1};u.countVertices=function(a){for(var d=-1,f=Math.max,e=0,c=a.length;e<c;++e)for(var g=a[e],k=0,h=g.length;k<h;++k)d=f(d,g[k]);return d+1};u.cloneCells=function(a){for(var d=Array(a.length),f=0,e=a.length;f<e;++f)d[f]=a[f].slice(0);return d};u.compareCells=t;u.normalize=
g;u.unique=q;u.findCell=f;u.incidence=d;u.dual=function(a,f){if(!f)return d(q(D(a,0)),a,0);for(var g=Array(f),e=0;e<f;++e)g[e]=[];for(var e=0,c=a.length;e<c;++e)for(var k=a[e],h=0,n=k.length;h<n;++h)g[k[h]].push(e);return g};u.explode=function(a){for(var d=[],f=0,e=a.length;f<e;++f)for(var c=a[f],k=c.length|0,h=1,n=1<<k;h<n;++h){for(var q=[],t=0;t<k;++t)h>>>t&1&&q.push(c[t]);d.push(q)}return g(d)};u.skeleton=D;u.boundary=function(a){for(var d=[],f=0,e=a.length;f<e;++f)for(var c=a[f],k=0,h=c.length;k<
h;++k){for(var n=Array(c.length-1),q=0,t=0;q<h;++q)q!==k&&(n[t++]=c[q]);d.push(n)}return g(d)};u.connectedComponents=function(a,d){if(d){for(var k=new v(d),e=0;e<a.length;++e)for(var c=a[e],h=0;h<c.length;++h)for(var n=h+1;n<c.length;++n)k.link(c[h],c[n]);c=[];h=k.ranks;for(e=0;e<h.length;++e)h[e]=-1;for(e=0;e<a.length;++e)n=k.find(a[e][0]),0>h[n]?(h[n]=c.length,c.push([a[e].slice(0)])):c[h[n]].push(a[e].slice(0));return c}k=q(g(D(a,0)));e=new v(k.length);for(c=0;c<a.length;++c)for(h=a[c],n=0;n<h.length;++n)for(var t=
f(k,[h[n]]),u=n+1;u<h.length;++u)e.link(t,f(k,[h[u]]));h=[];n=e.ranks;for(c=0;c<n.length;++c)n[c]=-1;for(c=0;c<a.length;++c)t=e.find(f(k,[a[c][0]])),0>n[t]?(n[t]=h.length,h.push([a[c].slice(0)])):h[n[t]].push(a[c].slice(0));return h}},{"bit-twiddle":115,"union-find":116}],118:[function(a,h,u){h.exports=function(a,h,f){function d(a){if(na[a])return Infinity;var b=x[a],c=y[a];if(0>b||0>c)return Infinity;b=h[b];c=h[c];return Math.abs(t(h[a],b,c))/Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}
function u(a,c){var d=b[a],e=b[c];b[a]=e;b[c]=d;l[d]=c;l[e]=a}function n(a){for(var c=H[b[a]];;){var d=c,e=2*a+1,f=2*(a+1),g=a;if(e<B){var k=H[b[e]];k<d&&(g=e,d=k)}f<B&&H[b[f]]<d&&(g=f);if(g===a)return a;u(a,g);a=g}}function v(a){for(var c=H[b[a]];0<a;){var d;d=a&1?a-1>>1:(a>>1)-1;if(0<=d&&c<H[b[d]])u(a,d),a=d;else return a}}function z(){if(0<B){var a=b[0];u(0,B-1);--B;n(0);return a}return-1}function w(a,c){var d=b[a];if(H[d]===c)return a;H[d]=-Infinity;v(a);z();H[d]=c;B+=1;return v(B-1)}function p(a){if(!na[a]){na[a]=
!0;var b=x[a];a=y[a];0<=x[a]&&(x[a]=b);0<=y[b]&&(y[b]=a);0<=l[b]&&w(l[b],d(b));0<=l[a]&&w(l[a],d(a))}}function e(a,b){if(0>a[b])return b;var c=b,d=b;do{var e=a[d];if(!na[d]||0>e||e===d)break;d=e;e=a[d];if(!na[d]||0>e||e===d)break;d=e;c=a[c]}while(c!==d);for(c=b;c!==d;c=a[c])a[c]=d;return d}for(var c=h.length,m=a.length,x=Array(c),y=Array(c),H=Array(c),na=Array(c),A=0;A<c;++A)x[A]=y[A]=-1,H[A]=Infinity,na[A]=!1;for(A=0;A<m;++A){var aa=a[A];if(2!==aa.length)throw Error("Input must be a graph");var C=
aa[1],aa=aa[0];y[aa]=-1!==y[aa]?-2:C;x[C]=-1!==x[C]?-2:aa}for(var b=[],l=Array(c),A=0;A<c;++A)Infinity>(H[A]=d(A))?(l[A]=b.length,b.push(A)):l[A]=-1;for(var B=b.length,A=B>>1;0<=A;--A)n(A);for(;;){A=z();if(0>A||H[A]>f)break;p(A)}f=[];for(A=0;A<c;++A)na[A]||(l[A]=f.length,f.push(h[A].slice()));var L=[];a.forEach(function(a){var b=e(x,a[0]);a=e(y,a[1]);0<=b&&0<=a&&b!==a&&(b=l[b],a=l[a],b!==a&&L.push([b,a]))});k.unique(k.normalize(L));return{positions:f,edges:L}};var t=a("robust-orientation"),k=a("simplicial-complex")},
{"robust-orientation":109,"simplicial-complex":117}],119:[function(a,h,u){function t(a,h){var f,d;if(h[0][0]<h[1][0])f=h[0],d=h[1];else if(h[0][0]>h[1][0])f=h[1],d=h[0];else{f=Math.min(a[0][1],a[1][1]);d=Math.max(a[0][1],a[1][1]);var t=Math.min(h[0][1],h[1][1]),n=Math.max(h[0][1],h[1][1]);return d<t?d-t:f>n?f-n:d-n}a[0][1]<a[1][1]?(n=a[0],t=a[1]):(n=a[1],t=a[0]);return(n=k(d,f,n))?n:(n=k(d,f,t))?n:t-d}h.exports=function(a,h){var f,d;if(h[0][0]<h[1][0])f=h[0],d=h[1];else if(h[0][0]>h[1][0])f=h[1],
d=h[0];else return t(h,a);var u,n;if(a[0][0]<a[1][0])u=a[0],n=a[1];else if(a[0][0]>a[1][0])u=a[1],n=a[0];else return-t(a,h);var v=k(f,d,n),z=k(f,d,u);if(0>v){if(0>=z)return v}else if(0<v){if(0<=z)return v}else if(z)return z;v=k(n,u,d);z=k(n,u,f);if(0>v){if(0>=z)return v}else if(0<v){if(0<=z)return v}else if(z)return z;return d[0]-n[0]};var k=a("robust-orientation")},{"robust-orientation":109}],120:[function(a,h,u){arguments[4][89][0].apply(u,arguments)},{dup:89}],121:[function(a,h,u){function t(a,
d,f){this.slabs=a;this.coordinates=d;this.horizontal=f}function k(a,d){return a.y-d}function g(a,d){for(var f=null;a;){var e=a.key,c,k;e[0][0]<e[1][0]?(c=e[0],k=e[1]):(c=e[1],k=e[0]);c=n(c,k,d);if(0>c)a=a.left;else if(0<c)if(d[0]!==e[1][0])f=a,a=a.right;else{if(e=g(a.right,d))return e;a=a.left}else{if(d[0]!==e[1][0])return a;if(e=g(a.right,d))return e;a=a.left}}return f}function q(a,d,f,e){this.y=a;this.index=d;this.start=f;this.closed=e}function f(a,d,f,e){this.x=a;this.segment=d;this.create=f;this.index=
e}h.exports=function(a){for(var d=a.length,g=2*d,e=Array(g),c=0;c<d;++c){var k=a[c],h=k[0][0]<k[1][0];e[2*c]=new f(k[0][0],k,h,c);e[2*c+1]=new f(k[1][0],k,!h,c)}e.sort(function(a,c){var d=a.x-c.x;return d?d:(d=a.create-c.create)?d:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(c.segment[0][1],c.segment[1][1])});a=D(v);d=[];k=[];h=[];for(c=0;c<g;){for(var n=e[c].x,u=[];c<g;){var na=e[c];if(na.x!==n)break;c+=1;na.segment[0][0]===na.x&&na.segment[1][0]===na.x?na.create&&(na.segment[0][1]<na.segment[1][1]?
(u.push(new q(na.segment[0][1],na.index,!0,!0)),u.push(new q(na.segment[1][1],na.index,!1,!1))):(u.push(new q(na.segment[1][1],na.index,!0,!1)),u.push(new q(na.segment[0][1],na.index,!1,!0)))):a=na.create?a.insert(na.segment,na.index):a.remove(na.segment)}d.push(a.root);k.push(n);h.push(u)}return new t(d,k,h)};var d=a("binary-search-bounds"),D=a("functional-red-black-tree"),n=a("robust-orientation"),v=a("./lib/order-segments");t.prototype.castUp=function(a){var f=d.le(this.coordinates,a[0]);if(0>
f)return-1;var h=g(this.slabs[f],a),e=-1;h&&(e=h.value);if(this.coordinates[f]===a[0]){var c=null;h&&(c=h.key);0<f&&(h=g(this.slabs[f-1],a))&&(c?0<v(h.key,c)&&(c=h.key,e=h.value):(e=h.value,c=h.key));h=this.horizontal[f];if(0<h.length){var m=d.ge(h,a[1],k);if(m<h.length){f=h[m];if(a[1]===f.y){if(f.closed)return f.index;for(;m<h.length-1&&h[m+1].y===a[1];)if(m+=1,f=h[m],f.closed)return f.index;if(f.y===a[1]&&!f.start){m+=1;if(m>=h.length)return e;f=h[m]}}f.start?c?(a=n(c[0],c[1],[a[0],f.y]),c[0][0]>
c[1][0]&&(a=-a),0<a&&(e=f.index)):e=f.index:f.y!==a[1]&&(e=f.index)}}}return e}},{"./lib/order-segments":119,"binary-search-bounds":120,"functional-red-black-tree":82,"robust-orientation":109}],122:[function(a,h,u){function t(a,f){var h=a.length,q=["'use strict';"],t="surfaceNets"+a.join("_")+"d"+f;q.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===f&&q.push("getters:[0],");for(var u=[],p=[],e=0;e<
h;++e)u.push("d"+e),p.push("d"+e);for(e=0;e<1<<h;++e)u.push("v"+e),p.push("v"+e);for(e=0;e<1<<h;++e)u.push("p"+e),p.push("p"+e);u.push("a","b","c");p.push("a","c");q.push("vertex:function vertexFunc(",u.join(),"){");u=[];for(e=0;e<1<<h;++e)u.push("(p"+e+"<<"+e+")");q.push("var m=(",u.join("+"),")|0;if(m===0||m===",(1<<(1<<h))-1,"){return}");var u=[],c=[];128>=1<<(1<<h)?(q.push("switch(m){"),c=q):q.push("switch(m>>>7){");for(e=0;e<1<<(1<<h);++e){128<1<<(1<<h)&&0===e%128&&(0<u.length&&c.push("}}"),
c="vExtra"+u.length,q.push("case ",e>>>7,":",c,"(m&0x7f,",p.join(),");break;"),c=["function ",c,"(m,",p.join(),"){switch(m){"],u.push(c));c.push("case ",e&127,":");for(var m=Array(h),x=Array(h),y=Array(h),H=Array(h),na=0,A=0;A<h;++A)m[A]=[],x[A]=[],y[A]=0,H[A]=0;for(A=0;A<1<<h;++A)for(var aa=0;aa<h;++aa){var C=A^1<<aa;if(!(C>A)&&!(e&1<<C)!==!(e&1<<A)){var b=1;e&1<<C?x[aa].push("v"+C+"-v"+A):(x[aa].push("v"+A+"-v"+C),b=-b);0>b?(m[aa].push("-v"+A+"-v"+C),y[aa]+=2):(m[aa].push("v"+A+"+v"+C),y[aa]-=2);
na+=1;for(b=0;b<h;++b)b!==aa&&(C&1<<b?H[b]+=1:--H[b])}}A=[];for(aa=0;aa<h;++aa)0===m[aa].length?A.push("d"+aa+"-0.5"):(C="",0>y[aa]?C=y[aa]+"*c":0<y[aa]&&(C="+"+y[aa]+"*c"),A.push("d"+aa+"-"+(.5+H[aa]/na*.5)+"-"+m[aa].length/na*.5+"*("+m[aa].join("+")+C+")/("+x[aa].join("+")+")"));c.push("a.push([",A.join(),"]);","break;")}q.push("}},");0<u.length&&c.push("}}");p=[];for(e=0;e<1<<h-1;++e)p.push("v"+e);p.push("c0","c1","p0","p1","a","b","c");q.push("cell:function cellFunc(",p.join(),"){");h=g(h-1);
q.push("if(p0){b.push(",h.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",h.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",t,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",t,";");for(e=0;e<u.length;++e)q.push(u[e].join(""));return(new Function("genContour",q.join("")))(k)}h.exports=function(a,g){if(0>=a.dimension)return{positions:[],
cells:[]};if(1===a.dimension){for(var k=q(a,g),h=k.length,u=Array(h),w=Array(h),p=0;p<h;++p)u[p]=[k[p]],w[p]=[p];return{positions:u,cells:w}}k=a.order.join()+"-"+a.dtype;h=f[k];g=+g||0;h||(h=f[k]=t(a.order,a.dtype));return h(a,g)};var k=a("ndarray-extract-contour"),g=a("triangulate-hypercube"),q=a("zero-crossings"),f={}},{"ndarray-extract-contour":94,"triangulate-hypercube":123,"zero-crossings":132}],123:[function(a,h,u){h.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var f=Math.round(g(a+
1))|0,d=[],h=0;h<f;++h){for(var n=t.unrank(a,h),u=[0],z=0,w=0;w<n.length;++w)z+=1<<n[w],u.push(z);1>k(n)&&(u[0]=z,u[a]=0);d.push(u)}return d};var t=a("permutation-rank"),k=a("permutation-parity"),g=a("gamma")},{gamma:83,"permutation-parity":97,"permutation-rank":98}],124:[function(a,h,u){h.exports=function(a,g,h){var f=a*g,d=t*a,d=d-(d-a);a-=d;var u=t*g,u=u-(u-g);g-=u;g=a*g-(f-d*u-a*u-d*g);return h?(h[0]=g,h[1]=f,h):[g,f]};var t=+(Math.pow(2,27)+1)},{}],125:[function(a,h,u){h.exports=function(a,k,
g){var h=a+k,f=h-a;k-=f;a-=h-f;return g?(g[0]=a+k,g[1]=h,g):[a+k,h]}},{}],126:[function(a,h,u){(function(h){function k(a){if(a){var b=y.log2(a.length||a.byteLength);l[b].push(a)}}function g(a){a=y.nextPow2(a);var b=y.log2(a),b=l[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function q(a){return new Uint8Array(g(a),0,a)}function f(a){return new Uint16Array(g(2*a),0,a)}function d(a){return new Uint32Array(g(4*a),0,a)}function D(a){return new Int8Array(g(a),0,a)}function n(a){return new Int16Array(g(2*
a),0,a)}function v(a){return new Int32Array(g(4*a),0,a)}function z(a){return new Float32Array(g(4*a),0,a)}function w(a){return new Float64Array(g(8*a),0,a)}function p(a){return A?new Uint8ClampedArray(g(a),0,a):q(a)}function e(a){return aa?new BigUint64Array(g(8*a),0,a):null}function c(a){return C?new BigInt64Array(g(8*a),0,a):null}function m(a){return new DataView(g(a),0,a)}function x(a){a=y.nextPow2(a);var b=y.log2(a),b=B[b];return 0<b.length?b.pop():new na(a)}var y=a("bit-twiddle"),H=a("dup"),
na=a("buffer").Buffer;h.__TYPEDARRAY_POOL||(h.__TYPEDARRAY_POOL={UINT8:H([32,0]),UINT16:H([32,0]),UINT32:H([32,0]),BIGUINT64:H([32,0]),INT8:H([32,0]),INT16:H([32,0]),INT32:H([32,0]),BIGINT64:H([32,0]),FLOAT:H([32,0]),DOUBLE:H([32,0]),DATA:H([32,0]),UINT8C:H([32,0]),BUFFER:H([32,0])});var A="undefined"!==typeof Uint8ClampedArray,aa="undefined"!==typeof BigUint64Array,C="undefined"!==typeof BigInt64Array,b=h.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=H([32,0]));b.BIGUINT64||(b.BIGUINT64=H([32,0]));b.BIGINT64||
(b.BIGINT64=H([32,0]));b.BUFFER||(b.BUFFER=H([32,0]));var l=b.DATA,B=b.BUFFER;u.free=function(a){if(na.isBuffer(a))B[y.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=y.log2(a.length||a.byteLength)|0;l[b].push(a)}};u.freeUint8=u.freeUint16=u.freeUint32=u.freeBigUint64=u.freeInt8=u.freeInt16=u.freeInt32=u.freeBigInt64=u.freeFloat32=u.freeFloat=u.freeFloat64=u.freeDouble=u.freeUint8Clamped=u.freeDataView=function(a){k(a.buffer)};u.freeArrayBuffer=
k;u.freeBuffer=function(a){B[y.log2(a.length)].push(a)};u.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case "uint8":return q(a);case "uint16":return f(a);case "uint32":return d(a);case "int8":return D(a);case "int16":return n(a);case "int32":return v(a);case "float":case "float32":return z(a);case "double":case "float64":return w(a);case "uint8_clamped":return p(a);case "bigint64":return c(a);case "biguint64":return e(a);case "buffer":return x(a);case "data":case "dataview":return m(a);
default:return null}};u.mallocArrayBuffer=g;u.mallocUint8=q;u.mallocUint16=f;u.mallocUint32=d;u.mallocInt8=D;u.mallocInt16=n;u.mallocInt32=v;u.mallocFloat32=u.mallocFloat=z;u.mallocFloat64=u.mallocDouble=w;u.mallocUint8Clamped=p;u.mallocBigUint64=e;u.mallocBigInt64=c;u.mallocDataView=m;u.mallocBuffer=x;u.clearCache=function(){for(var a=0;32>a;++a)b.UINT8[a].length=0,b.UINT16[a].length=0,b.UINT32[a].length=0,b.INT8[a].length=0,b.INT16[a].length=0,b.INT32[a].length=0,b.FLOAT[a].length=0,b.DOUBLE[a].length=
0,b.BIGUINT64[a].length=0,b.BIGINT64[a].length=0,b.UINT8C[a].length=0,l[a].length=0,B[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":56,buffer:66,dup:80}],127:[function(a,h,u){function t(a){this.roots=Array(a);this.ranks=Array(a);for(var g=0;g<a;++g)this.roots[g]=g,this.ranks[g]=0}"use restrict";h.exports=t;a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=
function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var g=a,h=this.roots;h[a]!==a;)a=h[a];for(;h[g]!==a;){var f=h[g];h[g]=a;g=f}return a};a.link=function(a,g){var h=this.find(a),f=this.find(g);if(h!==f){var d=this.ranks,t=this.roots,n=d[h],u=d[f];n<u?t[h]=f:u<n?t[f]=h:(t[f]=h,++d[h])}}},{}],128:[function(a,h,u){h.exports=function(a,k,g){if(0===a.length)return a;if(k){g||a.sort(k);g=1;for(var h=a.length,f=a[0],d=a[0],u=1;u<h;++u)d=f,f=a[u],k(f,
d)&&(u===g?g++:a[g++]=f);a.length=g;return a}g||a.sort();k=1;g=a.length;h=a[0];f=a[0];for(d=1;d<g;++d)f=h,h=a[d],h!==f&&(d===k?k++:a[k++]=h);a.length=k;return a}},{}],129:[function(a,h,u){h.exports=function(a,f){if("object"!==typeof f||null===f)f={};return t(a,f.canvas||k,f.context||g,f)};var t=a("./lib/vtext"),k=null,g=null;"undefined"!==typeof document&&(k=document.createElement("canvas"),k.width=8192,k.height=1024,g=k.getContext("2d"))},{"./lib/vtext":130}],130:[function(a,h,u){function t(a,b,
c,d){var e="<"+a+">";a="</"+a+">";for(var f=e.length,g=a.length,k=b[0]===y||b[0]===A,h=0,m=-g;-1<h;){h=c.indexOf(e,h);if(-1===h)break;m=c.indexOf(a,h+f);if(-1===m)break;if(m<=h)break;for(var n=h;n<m+g;++n)if(n<h+f||n>=m)d[n]=null,c=c.substr(0,n)+" "+c.substr(n+1);else if(null!==d[n]){var p=d[n].indexOf(b[0]);-1===p?d[n]+=b:k&&(d[n]=d[n].substr(0,p+1)+(1+parseInt(d[n][p+1]))+d[n].substr(p+2))}h+=f;h=c.substr(h,m-h).indexOf(e);h=-1!==h?h:m+g}return d}function k(a,b,c){for(var d=b.textAlign||"start",
e=b.textBaseline||"alphabetic",f=[1073741824,1073741824],g=[0,0],h=a.length,k=0;k<h;++k)for(var m=a[k],n=0;2>n;++n)f[n]=Math.min(f[n],m[n])|0,g[n]=Math.max(g[n],m[n])|0;var p=0;switch(d){case "center":p=-.5*(f[0]+g[0]);break;case "right":case "end":p=-g[0];break;case "left":case "start":p=-f[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+d+"'");}var q=0;switch(e){case "hanging":case "top":q=-f[1];break;case "middle":q=-.5*(f[1]+g[1]);break;case "alphabetic":case "ideographic":q=
-3*c;break;case "bottom":q=-g[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'");}var t=1/c;"lineHeight"in b?t*=+b.lineHeight:"width"in b?t=b.width/(g[0]-f[0]):"height"in b&&(t=b.height/(g[1]-f[1]));return a.map(function(a){return[t*(a[0]+p),t*(a[1]+q)]})}function g(a,b,d,f,g,k){function h(){if(""!==ga){var a=b.measureText(ga).width;b.fillText(ga,ua+ma,ab+za);ma+=a}}function n(){return""+Math.round(da)+"px "}function q(a,c){var d=""+b.font;if(!0===k.subscripts){var f=
a.indexOf(A),g=c.indexOf(A),f=-1<f?parseInt(a[1+f]):0,g=-1<g?parseInt(c[1+g]):0;f!==g&&(d=d.replace(n(),"?px "),da*=Math.pow(.75,g-f),d=d.replace("?px ",n()));za+=.25*ia*(g-f)}!0===k.superscripts&&(f=a.indexOf(y),g=c.indexOf(y),f=-1<f?parseInt(a[1+f]):0,g=-1<g?parseInt(c[1+g]):0,f!==g&&(d=d.replace(n(),"?px "),da*=Math.pow(.75,g-f),d=d.replace("?px ",n())),za-=.25*ia*(g-f));!0===k.bolds&&(g=-1<a.indexOf(e),f=-1<c.indexOf(e),!g&&f&&(d=h?d.replace("italic ","italic bold "):"bold "+d),g&&!f&&(d=d.replace("bold ",
"")));if(!0===k.italics){var h=-1<a.indexOf(m),g=-1<c.indexOf(m);!h&&g&&(d="italic "+d);h&&!g&&(d=d.replace("italic ",""))}b.font=d}d=d.replace(/\n/g,"");d=!0===k.breaklines?d.replace(/\<br\>/g,"\n"):d.replace(/\<br\>/g," ");for(var u="",v=[],r=0;r<d.length;++r)v[r]=u;!0===k.bolds&&(v=t(p,e,d,v));!0===k.italics&&(v=t(c,m,d,v));!0===k.superscripts&&(v=t(x,H,d,v));!0===k.subscripts&&(v=t(na,aa,d,v));for(var w=[],z="",r=0;r<d.length;++r)null!==v[r]&&(z+=d[r],w.push(v[r]));v=z.split("\n");d=v.length;
var ia=Math.round(g*f),ua=f,ab=2*f;g=0;r=d*ia+ab;a.height<r&&(a.height=r);b.fillStyle="#000";b.fillRect(0,0,a.width,a.height);b.fillStyle="#fff";var r,ma,za,da,z=0,ga="";for(a=0;a<d;++a){var O=v[a]+"\n";ma=0;za=a*ia;da=f;ga="";for(r=0;r<O.length;++r){var T=r+z<w.length?w[r+z]:w[w.length-1];u===T?ga+=O[r]:(h(),ga=O[r],void 0!==T&&(q(u,T),u=T))}h();z+=O.length;r=Math.round(ma+2*ua)|0;g<r&&(g=r)}f=g;u=ab+ia*d;return D(b.getImageData(0,0,f,u).data,[u,f,4]).pick(-1,-1,0).transpose(1,0)}function q(a,b,
c,e){a=d(a,128);e=e?n(a.cells,a.positions,.25):{edges:a.cells,positions:a.positions};c=k(e.positions,b,c);a=e.edges;e="ccw"===b.orientation;v(c,a);if(b.polygons||b.polygon||b.polyline){b=w(a,c);a=Array(b.length);for(var f=0;f<b.length;++f){for(var g=b[f],h=Array(g.length),m=0;m<g.length;++m){for(var p=g[m],q=Array(p.length),t=0;t<p.length;++t)q[t]=c[p[t]].slice();e&&q.reverse();h[m]=q}a[f]=h}return a}return b.triangles||b.triangulate||b.triangle?{cells:z(c,a,{delaunay:!1,exterior:!1,interior:!0}),
positions:c}:{edges:a,positions:c}}function f(a,b,c){try{return q(a,b,c,!0)}catch(d){}try{return q(a,b,c,!1)}catch(d){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}h.exports=function(a,b,c,d){var e=64,k=1.25,h={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};d&&(d.size&&0<d.size&&(e=d.size),d.lineSpacing&&0<d.lineSpacing&&(k=d.lineSpacing),d.styletags&&d.styletags.breaklines&&(h.breaklines=d.styletags.breaklines?
!0:!1),d.styletags&&d.styletags.bolds&&(h.bolds=d.styletags.bolds?!0:!1),d.styletags&&d.styletags.italics&&(h.italics=d.styletags.italics?!0:!1),d.styletags&&d.styletags.subscripts&&(h.subscripts=d.styletags.subscripts?!0:!1),d.styletags&&d.styletags.superscripts&&(h.superscripts=d.styletags.superscripts?!0:!1));c.font=[d.fontStyle,d.fontVariant,d.fontWeight,e+"px",d.font].filter(function(a){return a}).join(" ");c.textAlign="start";c.textBaseline="alphabetic";c.direction="ltr";a=g(b,c,a,e,k,h);return f(a,
d,e)};h.exports.processPixels=f;var d=a("surface-nets"),D=a("ndarray"),n=a("simplify-planar-graph"),v=a("clean-pslg"),z=a("cdt2d"),w=a("planar-graph-to-polyline"),p="b",e="b|",c="i",m="i|",x="sup",y="+",H="+1",na="sub",A="-",aa="-1"},{cdt2d:67,"clean-pslg":72,ndarray:95,"planar-graph-to-polyline":101,"simplify-planar-graph":118,"surface-nets":122}],131:[function(a,h,u){h.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},
post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},
{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":76}],132:[function(a,h,u){h.exports=function(a,g){var h=[];g=+g||0;t(a.hi(a.shape[0]-1),h,g);return h};var t=a("./lib/zc-core")},{"./lib/zc-core":131}],133:[function(a,h,u){function t(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}
var k=a("./lib/util/check"),g=a("./lib/util/extend"),q=a("./lib/dynamic"),f=a("./lib/util/raf"),d=a("./lib/util/clock"),D=a("./lib/strings"),n=a("./lib/webgl"),v=a("./lib/extension"),z=a("./lib/limits"),w=a("./lib/buffer"),p=a("./lib/elements"),e=a("./lib/texture"),c=a("./lib/renderbuffer"),m=a("./lib/framebuffer"),x=a("./lib/attribute"),y=a("./lib/shader"),H=a("./lib/read"),na=a("./lib/core"),A=a("./lib/stats"),aa=a("./lib/timer");h.exports=function(a){function b(){if(0===Na.length)ga&&ga.update(),
Cb=null;else{Cb=f.next(b);I();for(var a=Na.length-1;0<=a;--a){var c=Na[a];c&&c(S,null,0)}la.flush();ga&&ga.update()}}function h(){!Cb&&0<Na.length&&(Cb=f.next(b))}function u(){Cb&&(f.cancel(b),Cb=null)}function L(a){a.preventDefault();ua=!0;u();ea.forEach(function(a){a()})}function W(a){la.getError();ua=!1;ab.restore();ka.restore();Ta.restore();Z.restore();sa.restore();wa.restore();E.restore();ga&&ga.restore();Qa.procs.refresh();h();pa.forEach(function(a){a()})}function F(a){function b(a,c){var d=
{},e={};Object.keys(a).forEach(function(b){var f=a[b];if(q.isDynamic(f))e[b]=q.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(q.isDynamic(f[g])){e[b]=q.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}k(!!a,"invalid args to regl({...})");k.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];
Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=g({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},l=Qa.compile(a,f,e,d,h),m=l.draw,n=l.batch,p=l.scope,r=[];return g(function(a,b){var d;ua&&k.raise("context lost");
if("function"===typeof a)return p.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)p.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)p.call(this,a[d],b,d);else return p.call(this,a,b,0);else if("number"===typeof a){if(0<a)return n.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return n.call(this,a,a.length)}else return m.call(this,a)},{stats:h,destroy:function(){l.destroy()}})}function fa(a,b){var c=0;Qa.procs.poll();var d=b.color;
d&&(la.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(la.clearDepth(+b.depth),c|=256);"stencil"in b&&(la.clearStencil(b.stencil|0),c|=1024);k(!!c,"called regl.clear with no buffer specified");la.clear(c)}function N(a){k.type(a,"function","regl.frame() callback must be a function");Na.push(a);h();return{cancel:function(){function b(){var a=t(Na,b);Na[a]=Na[Na.length-1];--Na.length;0>=Na.length&&u()}var c=t(Na,a);k(0<=c,"cannot cancel a frame twice");Na[c]=b}}}function ba(){var a=
Ka.viewport,b=Ka.scissor_box;a[0]=a[1]=b[0]=b[1]=0;S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=a[2]=b[2]=la.drawingBufferWidth;S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=a[3]=b[3]=la.drawingBufferHeight}function I(){S.tick+=1;S.time=J();ba();Qa.procs.poll()}function r(){Z.refresh();ba();Qa.procs.refresh();ga&&ga.update()}function J(){return(d()-O)/1E3}console.log("REGL args are:",a);a=n(a);console.log("REGL configs are:",a);if(!a)return null;var la=a.gl,ia=la.getContextAttributes(),
ua=la.isContextLost(),ab=v(la,a);if(!ab)return null;var ma=D(),za=A(),da=ab.extensions,ga=aa(la,da),O=d(),T=la.drawingBufferWidth,ra=la.drawingBufferHeight,S={tick:0,time:0,viewportWidth:T,viewportHeight:ra,framebufferWidth:T,framebufferHeight:ra,drawingBufferWidth:T,drawingBufferHeight:ra,pixelRatio:a.pixelRatio},T={elements:null,primitive:4,count:-1,offset:0,instances:-1},Gb=z(la,da),Ta=w(la,za,a,function(a){return E.destroyBuffer(a)}),X=p(la,da,Ta,za),E=x(la,da,Gb,za,Ta,X,T),ka=y(la,ma,za,a),Z=
e(la,da,Gb,function(){Qa.procs.poll()},S,za,a),sa=c(la,da,Gb,za,a),wa=m(la,da,Gb,Z,sa,za),Qa=na(la,ma,da,Gb,Ta,X,Z,wa,{},E,ka,T,S,ga,a),ma=H(la,wa,Qa.procs.poll,S,ia,da,Gb),Ka=Qa.next,U=la.canvas,Na=[],ea=[],pa=[],Xa=[a.onDestroy],Cb=null;U&&(U.addEventListener("webglcontextlost",L,!1),U.addEventListener("webglcontextrestored",W,!1));var yb=wa.setFBO=F({framebuffer:q.define.call(null,1,"framebuffer")});r();ia=g(F,{clear:function(a){k("object"===typeof a&&a,"regl.clear() takes an object as input");
if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)yb(g({framebuffer:a.framebuffer.faces[b]},a),fa);else yb(a,fa);else fa(null,a)},prop:q.define.bind(null,1),context:q.define.bind(null,2),"this":q.define.bind(null,3),draw:F({}),buffer:function(a){return Ta.create(a,34962,!1,!1)},elements:function(a){return X.create(a,!1)},texture:Z.create2D,cube:Z.createCube,renderbuffer:sa.create,framebuffer:wa.create,framebufferCube:wa.createCube,vao:E.createVAO,
attributes:ia,frame:N,on:function(a,b){k.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return N(b);case "lost":c=ea;break;case "restore":c=pa;break;case "destroy":c=Xa;break;default:k.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Gb,hasExtension:function(a){return 0<=Gb.extensions.indexOf(a.toLowerCase())},read:ma,destroy:function(){Na.length=
0;u();U&&(U.removeEventListener("webglcontextlost",L),U.removeEventListener("webglcontextrestored",W));ka.clear();wa.clear();sa.clear();E.clear();Z.clear();X.clear();Ta.clear();ga&&ga.clear();Xa.forEach(function(a){a()})},_gl:la,_refresh:r,poll:function(){I();ga&&ga.update()},now:J,stats:za});a.onDone(null,ia);return ia}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,
"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

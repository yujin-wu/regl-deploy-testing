var $jscomp={scope:{},getGlobal:function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global?global:g}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(g){return"jscomp_symbol_"+g+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(g){$jscomp.initSymbolIterator();if(g[$jscomp.global.Symbol.iterator])return g[$jscomp.global.Symbol.iterator]();var u=0;return{next:function(){return u==g.length?{done:!0}:{done:!1,value:g[u++]}}}};
$jscomp.arrayFromIterator=function(g){for(var u,A=[];!(u=g.next()).done;)A.push(u.value);return A};$jscomp.arrayFromIterable=function(g){return g instanceof Array?g:$jscomp.arrayFromIterator($jscomp.makeIterator(g))};
$jscomp.inherits=function(g,u){function A(){}A.prototype=u.prototype;g.prototype=new A;g.prototype.constructor=g;for(var a in u)if($jscomp.global.Object.defineProperties){var r=$jscomp.global.Object.getOwnPropertyDescriptor(u,a);r&&$jscomp.global.Object.defineProperty(g,a,r)}else g[a]=u[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(g,u){g instanceof String&&(g=String(g));var A=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},r=(a.next=function(){if(A<g.length){var q=A++;return{value:u(q,g[q]),done:!1}}r.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return r},a);return r};
$jscomp.array.findInternal_=function(g,u,A){g instanceof String&&(g=String(g));for(var a=g.length,r=0;r<a;r++){var q=g[r];if(u.call(A,q,r,g))return{i:r,v:q}}return{i:-1,v:void 0}};
$jscomp.array.from=function(g,u,A){u=void 0===u?function(q){return q}:u;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(g[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();g=g[Symbol.iterator]();for(var r;!(r=g.next()).done;)a.push(u.call(A,r.value))}else{r=g.length;for(var q=0;q<r;q++)a.push(u.call(A,g[q]))}return a};$jscomp.array.of=function(g){for(var u=[],A=0;A<arguments.length;++A)u[A-0]=arguments[A];return $jscomp.array.from(u)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(g,u){return[g,u]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(g){return g})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(g,u){return u})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(g,u,A){var a=this.length;g=Number(g);u=Number(u);A=Number(null!=A?A:a);if(g<u)for(A=Math.min(A,a);u<A;)u in this?this[g++]=this[u++]:(delete this[g++],u++);else for(A=Math.min(A,a+u-g),g+=A-u;A>u;)--A in this?this[--g]=this[A]:delete this[g];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(g,u,A){null!=A&&g.length||(A=this.length||0);A=Number(A);for(u=Number((void 0===u?0:u)||0);u<A;u++)this[u]=g;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(g,u){return $jscomp.array.findInternal_(this,g,u).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(g,u){return $jscomp.array.findInternal_(this,g,u).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(g){g=void 0===g?[]:g;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var u=g.next();!u.done;u=g.next())u=u.value,this.set(u[0],u[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var g=$jscomp.global.Map;if(!g||!g.prototype.entries||!Object.seal)return!1;try{var u=Object.seal({x:4}),A=new g($jscomp.makeIterator([[u,"s"]]));if("s"!=A.get(u)||1!=A.size||A.get({x:4})||A.set({x:4},"t")!=A||2!=A.size)return!1;var a=A.entries(),r=a.next();if(r.done||r.value[0]!=u||"s"!=r.value[1])return!1;r=a.next();return r.done||4!=r.value[0].x||"t"!=r.value[1]||!a.next().done?!1:!0}catch(q){return!1}};
$jscomp.Map.createHead_=function(){var g={};return g.previous=g.next=g.head=g};$jscomp.Map.getId_=function(g){if(!(g instanceof Object))return String(g);$jscomp.Map.key_ in g||g instanceof Object&&Object.isExtensible&&Object.isExtensible(g)&&$jscomp.Map.defineProperty_(g,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in g?g[$jscomp.Map.key_]:" "+g};
$jscomp.Map.prototype.set=function(g,u){var A=this.maybeGetEntry_(g),a=A.id,r=A.list,A=A.entry;r||(r=this.data_[a]=[]);A?A.value=u:(A={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:u},r.push(A),this.head_.previous.next=A,this.head_.previous=A,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(g){var u=this.maybeGetEntry_(g);g=u.id;var A=u.list,a=u.index;return(u=u.entry)&&A?(A.splice(a,1),A.length||delete this.data_[g],u.previous.next=u.next,u.next.previous=u.previous,u.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(g){return!!this.maybeGetEntry_(g).entry};
$jscomp.Map.prototype.get=function(g){return(g=this.maybeGetEntry_(g).entry)&&g.value};$jscomp.Map.prototype.maybeGetEntry_=function(g){var u=$jscomp.Map.getId_(g),A=this.data_[u];if(A)for(var a=0;a<A.length;a++){var r=A[a];if(g!==g&&r.key!==r.key||g===r.key)return{id:u,list:A,index:a,entry:r}}return{id:u,list:A,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(g){return[g.key,g.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(g){return g.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(g){return g.value})};$jscomp.Map.prototype.forEach=function(g,u){for(var A=$jscomp.makeIterator(this.entries()),a=A.next();!a.done;a=A.next())a=a.value,g.call(u,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(g){var u=this,A=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(A){for(;A.head!=u.head_;)A=A.previous;for(;A.next!=A.head;)return A=A.next,{done:!1,value:g(A)};A=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(g,u,A){Object.defineProperty(g,u,{value:String(A)})}:function(g,u,A){g[u]=String(A)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(g){g=Number(g)>>>0;if(0===g)return 32;var u=0;0===(g&4294901760)&&(g<<=16,u+=16);0===(g&4278190080)&&(g<<=8,u+=8);0===(g&4026531840)&&(g<<=4,u+=4);0===(g&3221225472)&&(g<<=2,u+=2);0===(g&2147483648)&&u++;return u};$jscomp.math.imul=function(g,u){g=Number(g);u=Number(u);var A=g&65535,a=u&65535;return A*a+((g>>>16&65535)*a+A*(u>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(g){g=Number(g);return 0===g||isNaN(g)?g:0<g?1:-1};
$jscomp.math.log10=function(g){return Math.log(g)/Math.LN10};$jscomp.math.log2=function(g){return Math.log(g)/Math.LN2};$jscomp.math.log1p=function(g){g=Number(g);if(.25>g&&-.25<g){for(var u=g,A=1,a=g,r=0,q=1;r!=a;)u*=g,q*=-1,a=(r=a)+q*u/++A;return a}return Math.log(1+g)};$jscomp.math.expm1=function(g){g=Number(g);if(.25>g&&-.25<g){for(var u=g,A=1,a=g,r=0;r!=a;)u*=g/++A,a=(r=a)+u;return a}return Math.exp(g)-1};$jscomp.math.cosh=function(g){g=Number(g);return(Math.exp(g)+Math.exp(-g))/2};
$jscomp.math.sinh=function(g){g=Number(g);return 0===g?g:(Math.exp(g)-Math.exp(-g))/2};$jscomp.math.tanh=function(g){g=Number(g);if(0===g)return g;var u=Math.exp(2*-Math.abs(g)),u=(1-u)/(1+u);return 0>g?-u:u};$jscomp.math.acosh=function(g){g=Number(g);return Math.log(g+Math.sqrt(g*g-1))};$jscomp.math.asinh=function(g){g=Number(g);if(0===g)return g;var u=Math.log(Math.abs(g)+Math.sqrt(g*g+1));return 0>g?-u:u};
$jscomp.math.atanh=function(g){g=Number(g);return($jscomp.math.log1p(g)-$jscomp.math.log1p(-g))/2};
$jscomp.math.hypot=function(g,u,A){for(var a=[],r=2;r<arguments.length;++r)a[r-2]=arguments[r];g=Number(g);u=Number(u);for(var q=Math.max(Math.abs(g),Math.abs(u)),v=$jscomp.makeIterator(a),r=v.next();!r.done;r=v.next())q=Math.max(q,Math.abs(r.value));if(1E100<q||1E-100>q){g/=q;u/=q;v=g*g+u*u;a=$jscomp.makeIterator(a);for(r=a.next();!r.done;r=a.next())r=r.value,r=Number(r)/q,v+=r*r;return Math.sqrt(v)*q}q=g*g+u*u;a=$jscomp.makeIterator(a);for(r=a.next();!r.done;r=a.next())r=r.value,r=Number(r),q+=
r*r;return Math.sqrt(q)};$jscomp.math.trunc=function(g){g=Number(g);if(isNaN(g)||Infinity===g||-Infinity===g||0===g)return g;var u=Math.floor(Math.abs(g));return 0>g?-u:u};$jscomp.math.cbrt=function(g){if(0===g)return g;g=Number(g);var u=Math.pow(Math.abs(g),1/3);return 0>g?-u:u};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(g){return"number"!==typeof g?!1:!isNaN(g)&&Infinity!==g&&-Infinity!==g};
$jscomp.number.isInteger=function(g){return $jscomp.number.isFinite(g)?g===Math.floor(g):!1};$jscomp.number.isNaN=function(g){return"number"===typeof g&&isNaN(g)};$jscomp.number.isSafeInteger=function(g){return $jscomp.number.isInteger(g)&&Math.abs(g)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(g,u){for(var A=[],a=1;a<arguments.length;++a)A[a-1]=arguments[a];A=$jscomp.makeIterator(A);for(a=A.next();!a.done;a=A.next())if(a=a.value)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(g[r]=a[r]);return g};$jscomp.object.is=function(g,u){return g===u?0!==g||1/g===1/u:g!==g&&u!==u};$jscomp.Set=function(g){g=void 0===g?[]:g;this.map_=new $jscomp.Map;if(g){g=$jscomp.makeIterator(g);for(var u=g.next();!u.done;u=g.next())this.add(u.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var g=$jscomp.global.Set;if(!g||!g.prototype.entries||!Object.seal)return!1;var u=Object.seal({x:4}),g=new g($jscomp.makeIterator([u]));if(g.has(u)||1!=g.size||g.add(u)!=g||1!=g.size||g.add({x:4})!=g||2!=g.size)return!1;var g=g.entries(),A=g.next();if(A.done||A.value[0]!=u||A.value[1]!=u)return!1;A=g.next();return A.done||A.value[0]==u||4!=A.value[0].x||A.value[1]!=A.value[0]?!1:g.next().done};
$jscomp.Set.prototype.add=function(g){this.map_.set(g,g);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(g){g=this.map_["delete"](g);this.size=this.map_.size;return g};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(g){return this.map_.has(g)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(g,u){var A=this;this.map_.forEach(function(a){return g.call(u,a,a,A)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(g,u){if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+u+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(g){for(var u=[],A=0;A<arguments.length;++A)u[A-0]=arguments[A];for(var A="",u=$jscomp.makeIterator(u),a=u.next();!a.done;a=u.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?A+=String.fromCharCode(a):(a-=65536,A+=String.fromCharCode(a>>>10&1023|55296),A+=String.fromCharCode(a&1023|56320))}return A};
$jscomp.string.repeat=function(g){var u=this.toString();if(0>g||1342177279<g)throw new RangeError("Invalid count value");g|=0;for(var A="";g;)if(g&1&&(A+=u),g>>>=1)u+=u;return A};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(g){var u=this.toString(),A=u.length;g=Number(g)||0;if(0<=g&&g<A){g|=0;var a=u.charCodeAt(g);if(55296>a||56319<a||g+1===A)return a;g=u.charCodeAt(g+1);return 56320>g||57343<g?a:1024*(a-55296)+g+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(g,u){u=void 0===u?0:u;$jscomp.string.noRegExp_(g,"includes");return-1!==this.toString().indexOf(g,u)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(g,u){u=void 0===u?0:u;$jscomp.string.noRegExp_(g,"startsWith");var A=this.toString();g+="";for(var a=A.length,r=g.length,q=Math.max(0,Math.min(u|0,A.length)),v=0;v<r&&q<a;)if(A[q++]!=g[v++])return!1;return v>=r};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(g,u){$jscomp.string.noRegExp_(g,"endsWith");var A=this.toString();g+="";void 0===u&&(u=A.length);for(var a=Math.max(0,Math.min(u|0,A.length)),r=g.length;0<r&&0<a;)if(A[--a]!=g[--r])return!1;return 0>=r};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function g(u,A,a){function r(f,e){if(!A[f]){if(!u[f]){var k="function"==typeof require&&require;if(!e&&k)return k(f,!0);if(q)return q(f,!0);k=Error("Cannot find module '"+f+"'");throw k.code="MODULE_NOT_FOUND",k;}k=A[f]={exports:{}};u[f][0].call(k.exports,function(e){return r(u[f][1][e]||e)},k,k.exports,g,u,A,a)}return A[f].exports}for(var q="function"==typeof require&&require,v=0;v<a.length;v++)r(a[v]);return r}return g})()({1:[function(g,u,A){u=g("../regl")();A=g("vectorize-text");var a=
g("gl-mat4/perspective"),r=g("gl-mat4/lookAt");g=A("hello regl!",{textAlign:"center",textBaseline:"middle"});var q=u.texture({copy:!0,min:"linear",mag:"linear"}),v=u({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    vec2 warp = uv + 0.01 * sin(t) * vec2(0.5 - uv.y, uv.x - 0.5)\n      - 0.01 * (uv - 0.5);\n    gl_FragColor = vec4(0.98 * texture2D(texture, warp).rgb, 1);\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",
attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:q,t:function(e){return.001*e.tick}},depth:{enable:!1},count:3}),f=u({frag:"\n  precision mediump float;\n  uniform float t;\n  void main () {\n    gl_FragColor = vec4(\n      1.0 + cos(2.0 * t),\n      1.0 + cos(2.1 * t + 1.0),\n      1.0 + cos(2.2 * t + 2.0),\n      1);\n  }",vert:"\n  attribute vec2 position;\n  uniform mat4 projection, view;\n  void main () {\n    gl_Position = projection * view * vec4(position, 0, 1);\n  }",attributes:{position:g.positions},
elements:g.edges,uniforms:{t:function(e){return.01*e.tick},view:function(e){e=.01*e.tick;return r([],[5*Math.sin(e),0,-5*Math.cos(e)],[0,0,0],[0,-1,0])},projection:function(e){return a([],Math.PI/4,e.viewportWidth/e.viewportHeight,.01,1E3)}},depth:{enable:!1}});u.frame(function(){v();f();q({copy:!0,min:"linear",mag:"linear"})})},{"../regl":133,"gl-mat4/lookAt":85,"gl-mat4/perspective":86,"vectorize-text":129}],2:[function(g,u,A){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;
this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var r=g("./util/sorted-object-keys"),q=g("./util/check"),v=g("./util/values"),f=g("./constants/dtypes.json"),e=g("./util/is-typed-array"),k=g("./util/is-ndarray"),p=g("./constants/primitives.json"),J="attributes elements offset count primitive instances".split(" ");u.exports=function(z,y,m,c,d,h,H){function w(b){if(b!==R.currentVAO){var l=y.oes_vertex_array_object;b?l.bindVertexArrayOES(b.vao):l.bindVertexArrayOES(null);
R.currentVAO=b}}function L(l){if(l!==R.currentVAO){if(l)l.bindAttrs();else{for(var d=y.angle_instanced_arrays,c=0;c<b.length;++c){var e=b[c];e.buffer?(z.enableVertexAttribArray(c),e.buffer.bind(),z.vertexAttribPointer(c,e.size,e.type,e.normalized,e.stride,e.offfset),d&&e.divisor&&d.vertexAttribDivisorANGLE(c,e.divisor)):(z.disableVertexAttribArray(c),z.vertexAttrib4f(c,e.x,e.y,e.z,e.w))}H.elements?z.bindBuffer(34963,H.elements.buffer.buffer):z.bindBuffer(34963,null)}R.currentVAO=l}}function g(){v(x).forEach(function(b){b.destroy()})}
function E(){this.id=++l;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=y.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;x[this.id]=this;this.buffers=[]}function ta(){y.oes_vertex_array_object&&v(x).forEach(function(b){b.refresh()})}var B=m.maxAttributes,b=Array(B);for(m=0;m<B;++m)b[m]=new a;var l=0,x={},R={Record:a,scope:{},state:b,currentVAO:null,targetVAO:null,restore:y.oes_vertex_array_object?ta:function(){},
createVAO:function(b){function l(b){var c;if(Array.isArray(b))c=b,x.elements&&x.ownsElements&&x.elements.destroy(),x.elements=null,x.ownsElements=!1,x.offset=0,x.count=0,x.instances=-1,x.primitive=4;else{q("object"===typeof b,"invalid arguments for create vao");q("attributes"in b,"must specify attributes for vao");if(b.elements){var C=b.elements;x.ownsElements?("function"===typeof C&&"elements"===C._reglType?x.elements.destroy():x.elements(C),x.ownsElements=!1):h.getElements(b.elements)?(x.elements=
b.elements,x.ownsElements=!1):(x.elements=h.create(b.elements),x.ownsElements=!0)}else x.elements=null,x.ownsElements=!1;c=b.attributes;x.offset=0;x.count=-1;x.instances=-1;x.primitive=4;x.elements&&(x.count=x.elements._elements.vertCount,x.primitive=x.elements._elements.primType);"offset"in b&&(x.offset=b.offset|0);"count"in b&&(x.count=b.count|0);"instances"in b&&(x.instances=b.instances|0);"primitive"in b&&(q(b.primitive in p,"bad primitive type: "+b.primitive),x.primitive=p[b.primitive]);q.optional(function(){for(var l=
r(b),t=0;t<l.length;++t)q(0<=J.indexOf(l[t]),'invalid option for vao: "'+l[t]+'" valid options are '+J)});q(Array.isArray(c),"attributes must be an array")}q(c.length<B,"too many attributes");q(0<c.length,"must specify at least one attribute");var C={},n=x.attributes;n.length=c.length;for(var t=0;t<c.length;++t){var m=c[t],v=n[t]=new a,w=m.data||m;if(Array.isArray(w)||e(w)||k(w)){var H;x.buffers[t]&&(H=x.buffers[t],e(w)&&H._buffer.byteLength>=w.byteLength?H.subdata(w):(H.destroy(),x.buffers[t]=null));
x.buffers[t]||(H=x.buffers[t]=d.create(m,34962,!1,!0));v.buffer=d.getBuffer(H);v.size=v.buffer.dimension|0;v.normalized=!1;v.type=v.buffer.dtype;v.offset=0;v.stride=0;v.divisor=0;v.state=1;C[t]=1}else d.getBuffer(m)?(v.buffer=d.getBuffer(m),v.size=v.buffer.dimension|0,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1):d.getBuffer(m.buffer)?(v.buffer=d.getBuffer(m.buffer),v.size=(+m.size||v.buffer.dimension)|0,v.normalized=!!m.normalized||!1,"type"in m?(q.parameter(m.type,
f,"invalid buffer type"),v.type=f[m.type]):v.type=v.buffer.dtype,v.offset=(m.offset||0)|0,v.stride=(m.stride||0)|0,v.divisor=(m.divisor||0)|0,v.state=1,q(1<=v.size&&4>=v.size,"size must be between 1 and 4"),q(0<=v.offset,"invalid offset"),q(0<=v.stride&&255>=v.stride,"stride must be between 0 and 255"),q(0<=v.divisor,"divisor must be positive"),q(!v.divisor||!!y.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in m?(q(0<t,"first attribute must not be a constant"),
v.x=+m.x||0,v.y=+m.y||0,v.z=+m.z||0,v.w=+m.w||0,v.state=2):q(!1,"invalid attribute spec for location "+t)}for(H=0;H<x.buffers.length;++H)!C[H]&&x.buffers[H]&&(x.buffers[H].destroy(),x.buffers[H]=null);x.refresh();return l}var x=new E;c.vaoCount+=1;l.destroy=function(){for(var b=0;b<x.buffers.length;++b)x.buffers[b]&&x.buffers[b].destroy();x.buffers.length=0;x.ownsElements&&(x.elements.destroy(),x.elements=null,x.ownsElements=!1);x.destroy()};l._vao=x;l._reglType="vao";return l(b)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(l){for(var d=0;d<b.length;++d){var c=b[d];c.buffer===l&&(z.disableVertexAttribArray(d),c.buffer=null)}},setVAO:y.oes_vertex_array_object?w:L,clear:y.oes_vertex_array_object?g:function(){}};E.prototype.bindAttrs=function(){for(var b=y.angle_instanced_arrays,l=this.attributes,d=0;d<l.length;++d){var c=l[d];c.buffer?(z.enableVertexAttribArray(d),z.bindBuffer(34962,c.buffer.buffer),z.vertexAttribPointer(d,c.size,c.type,c.normalized,c.stride,c.offset),
b&&c.divisor&&b.vertexAttribDivisorANGLE(d,c.divisor)):(z.disableVertexAttribArray(d),z.vertexAttrib4f(d,c.x,c.y,c.z,c.w))}for(b=l.length;b<B;++b)z.disableVertexAttribArray(b);(b=h.getElements(this.elements))?z.bindBuffer(34963,b.buffer.buffer):z.bindBuffer(34963,null)};E.prototype.refresh=function(){var b=y.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),R.currentVAO=null,b.bindVertexArrayOES(null))};E.prototype.destroy=function(){if(this.vao){var b=y.oes_vertex_array_object;
this===R.currentVAO&&(R.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);x[this.id]&&(delete x[this.id],--c.vaoCount)};return R}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(g,u,A){function a(d){return m[Object.prototype.toString.call(d)]|
0}function r(d,c){for(var e=0;e<c.length;++e)d[e]=c[e]}function q(d,c,e,q,f,h,p){for(var b=0,l=0;l<e;++l)for(var x=0;x<q;++x)d[b++]=c[f*l+h*x+p]}var v=g("./util/sorted-object-keys"),f=g("./util/check"),e=g("./util/is-typed-array"),k=g("./util/is-ndarray"),p=g("./util/values"),J=g("./util/pool");A=g("./util/flatten");var z=A.flatten,y=A.shape,m=g("./constants/arraytypes.json"),c=g("./constants/dtypes.json"),d=g("./constants/usage.json"),h=[];h[5120]=1;h[5122]=2;h[5124]=4;h[5121]=1;h[5123]=2;h[5125]=
4;h[5126]=4;u.exports=function(m,w,L,g){function E(b){this.id=l++;this.buffer=m.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;L.profile&&(this.stats={size:0})}function ta(b,l,d){b.byteLength=l.byteLength;m.bufferData(b.type,l,d)}function B(b,l,d,c,x,h){b.usage=d;if(Array.isArray(l)){if(b.dtype=c||5126,0<l.length)if(Array.isArray(l[0])){x=y(l);for(var n=c=1;n<x.length;++n)c*=x[n];b.dimension=c;l=z(l,x,b.dtype);ta(b,l,d);h?b.persistentData=
l:J.freeType(l)}else"number"===typeof l[0]?(b.dimension=x,x=J.allocType(b.dtype,l.length),r(x,l),ta(b,x,d),h?b.persistentData=x:J.freeType(x)):e(l[0])?(b.dimension=l[0].length,b.dtype=c||a(l[0])||5126,l=z(l,[l.length,l[0].length],b.dtype),ta(b,l,d),h?b.persistentData=l:J.freeType(l)):f.raise("invalid buffer data")}else if(e(l))b.dtype=c||a(l),b.dimension=x,ta(b,l,d),h&&(b.persistentData=new Uint8Array(new Uint8Array(l.buffer)));else if(k(l)){x=l.shape;var t=l.stride,n=l.offset,p=0,v=0,m=0,w=0;1===
x.length?(p=x[0],v=1,m=t[0],w=0):2===x.length?(p=x[0],v=x[1],m=t[0],w=t[1]):f.raise("invalid shape");b.dtype=c||a(l.data)||5126;b.dimension=v;x=J.allocType(b.dtype,p*v);q(x,l.data,p,v,m,w,n);ta(b,x,d);h?b.persistentData=x:J.freeType(x)}else l instanceof ArrayBuffer?(b.dtype=5121,b.dimension=x,ta(b,l,d),h&&(b.persistentData=new Uint8Array(new Uint8Array(l)))):f.raise("invalid buffer data")}function b(b){w.bufferCount--;g(b);var l=b.buffer;f(l,"buffer must not be deleted already");m.deleteBuffer(l);
b.buffer=null;delete x[b.id]}var l=0,x={};E.prototype.bind=function(){m.bindBuffer(this.type,this.buffer)};E.prototype.destroy=function(){b(this)};var R=[];L.profile&&(w.getTotalBufferSize=function(){var b=0;v(x).forEach(function(l){b+=x[l].stats.size});return b});return{create:function(l,p,v,R){function g(b){var l=35044,x=null,q=0,p=0,v=1;Array.isArray(b)||e(b)||k(b)||b instanceof ArrayBuffer?x=b:"number"===typeof b?q=b|0:b&&(f.type(b,"object","buffer arguments must be an object, a number or an array"),
"data"in b&&(f(null===x||Array.isArray(x)||e(x)||k(x),"invalid data for buffer"),x=b.data),"usage"in b&&(f.parameter(b.usage,d,"invalid buffer usage"),l=d[b.usage]),"type"in b&&(f.parameter(b.type,c,"invalid buffer type"),p=c[b.type]),"dimension"in b&&(f.type(b.dimension,"number","invalid dimension"),v=b.dimension|0),"length"in b&&(f.nni(q,"buffer length must be a nonnegative integer"),q=b.length|0));n.bind();x?B(n,x,l,p,v,R):(q&&m.bufferData(n.type,q,l),n.dtype=p||5121,n.usage=l,n.dimension=v,n.byteLength=
q);L.profile&&(n.stats.size=n.byteLength*h[n.dtype]);return g}function D(b,l){f(l+b.byteLength<=n.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+l+" to a buffer of size "+n.byteLength);m.bufferSubData(n.type,l,b)}w.bufferCount++;var n=new E(p);x[n.id]=n;v||g(l);g._reglType="buffer";g._buffer=n;g.subdata=function(b,l){var d=(l||0)|0,c;n.bind();if(e(b)||b instanceof ArrayBuffer)D(b,d);else if(Array.isArray(b)){if(0<b.length)if("number"===
typeof b[0]){var x=J.allocType(n.dtype,b.length);r(x,b);D(x,d);J.freeType(x)}else Array.isArray(b[0])||e(b[0])?(c=y(b),x=z(b,c,n.dtype),D(x,d),J.freeType(x)):f.raise("invalid buffer data")}else if(k(b)){c=b.shape;var h=b.stride,p=x=0,v=0,m=0;1===c.length?(x=c[0],p=1,v=h[0],m=0):2===c.length?(x=c[0],p=c[1],v=h[0],m=h[1]):f.raise("invalid shape");c=Array.isArray(b.data)?n.dtype:a(b.data);c=J.allocType(c,x*p);q(c,b.data,x,p,v,m,b.offset);D(c,d);J.freeType(c)}else f.raise("invalid data for buffer subdata");
return g};L.profile&&(g.stats=n.stats);g.destroy=function(){b(n)};return g},createStream:function(b,l){var d=R.pop();d||(d=new E(b));d.bind();B(d,l,35040,0,1,!1);return d},destroyStream:function(b){R.push(b)},clear:function(){p(x).forEach(b);R.forEach(b)},getBuffer:function(b){return b&&b._buffer instanceof E?b._buffer:null},restore:function(){p(x).forEach(function(b){b.buffer=m.createBuffer();m.bindBuffer(b.type,b.buffer);m.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:B}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(g,u,A){u.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(g,u,A){u.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(g,u,A){u.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(g,u,A){u.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(g,u,A){function a(b){return Array.isArray(b)||m(b)||c(b)}function r(b){return b.sort(function(b,
l){return"viewport"===b?-1:"viewport"===l?1:b<l?-1:1})}function q(b,l,d,c){this.thisDep=b;this.contextDep=l;this.propDep=d;this.append=c}function v(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function f(b){return new q(!1,!1,!1,b)}function e(b,l){var d=b.type;if(0===d)return d=b.data.length,new q(!0,1<=d,2<=d,l);if(4===d)return d=b.data,new q(d.thisDep,d.contextDep,d.propDep,l);if(5===d)return new q(!1,!1,!1,l);if(6===d){for(var c=d=!1,e=!1,x=0;x<b.data.length;++x){var n=b.data[x];1===n.type?
e=!0:2===n.type?c=!0:3===n.type?d=!0:0===n.type?(d=!0,n=n.data,1<=n&&(c=!0),2<=n&&(e=!0)):4===n.type&&(d=d||n.data.thisDep,c=c||n.data.contextDep,e=e||n.data.propDep)}return new q(d,c,e,l)}return new q(3===d,2===d,1===d,l)}var k=g("./util/sorted-object-keys"),p=g("./util/check"),J=g("./util/extend"),z=g("./util/codegen"),y=g("./util/loop"),m=g("./util/is-typed-array"),c=g("./util/is-ndarray"),d=g("./util/is-array-like"),h=g("./dynamic"),H=g("./constants/primitives.json"),w=g("./constants/dtypes.json"),
L=["x","y","z","w"],G="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),E={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ta="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
B={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},b={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},l={frag:35632,vert:35633},x={cw:2304,ccw:2305},R=new q(!1,!1,!1,function(){});u.exports=function(c,m,g,I,K,D,n,t,Z,Q,Wa,u,W,da,V){function T(b){return b.replace(".","_")}function P(b,l,t){var d=T(b);va.push(b);
ba[d]=ka[d]=!!t;La[d]=l}function M(b,l,t){var d=T(b);va.push(b);Array.isArray(t)?(ka[d]=t.slice(),ba[d]=t.slice()):ka[d]=ba[d]=t;Ha[d]=l}function S(){var b=z(),l=b.link,t=b.global;b.id=Gc++;b.batchId="0";var d=l(gb),c=b.shared={props:"a0"};k(gb).forEach(function(b){c[b]=t.def(d,".",b)});p.optional(function(){b.CHECK=l(p);b.commandStr=p.guessCommand();b.command=l(b.commandStr);b.assert=function(b,t,d){b("if(!(",t,"))",this.CHECK,".commandRaise(",l(d),",",this.command,");")};fa.invalidBlendCombinations=
ta});var n=b.next={},e=b.current={};k(Ha).forEach(function(b){Array.isArray(ka[b])&&(n[b]=t.def(c.next,".",b),e[b]=t.def(c.current,".",b))});var x=b.constants={};k(fa).forEach(function(b){x[b]=t.def(JSON.stringify(fa[b]))});b.invoke=function(t,d){switch(d.type){case 0:var n=["this",c.context,c.props,b.batchId];return t.def(l(d.data),".call(",n.slice(0,Math.max(d.data.length+1,4)),")");case 1:return t.def(c.props,d.data);case 2:return t.def(c.context,d.data);case 3:return t.def("this",d.data);case 4:return d.data.append(b,
t),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(l){return b.invoke(t,l)})}};b.attribCache={};var q={};b.scopeAttrib=function(b){b=m.id(b);if(b in q)return q[b];var t=Q.scope[b];t||(t=Q.scope[b]=new xa);return q[b]=l(t)};return b}function U(b){var l=b["static"];b=b.dynamic;var t;if("profile"in l){var d=!!l.profile;t=f(function(b,l){return d});t.enable=d}else if("profile"in b){var c=b.profile;t=e(c,function(b,l){return b.invoke(l,c)})}return t}function qa(b,l){var d=
b["static"],c=b.dynamic;if("framebuffer"in d){var n=d.framebuffer;return n?(n=t.getFramebuffer(n),p.command(n,"invalid framebuffer object"),f(function(b,l){var t=b.link(n),d=b.shared;l.set(d.framebuffer,".next",t);d=d.context;l.set(d,".framebufferWidth",t+".width");l.set(d,".framebufferHeight",t+".height");return t})):f(function(b,l){var t=b.shared;l.set(t.framebuffer,".next","null");t=t.context;l.set(t,".framebufferWidth",t+".drawingBufferWidth");l.set(t,".framebufferHeight",t+".drawingBufferHeight");
return"null"})}if("framebuffer"in c){var x=c.framebuffer;return e(x,function(b,l){var t=b.invoke(l,x),d=b.shared,c=d.framebuffer,n=l.def(c,".getFramebuffer(",t,")");p.optional(function(){b.assert(l,"!"+t+"||"+n,"invalid framebuffer object")});l.set(c,".next",n);d=d.context;l.set(d,".framebufferWidth",n+"?"+n+".width:"+d+".drawingBufferWidth");l.set(d,".framebufferHeight",n+"?"+n+".height:"+d+".drawingBufferHeight");return n})}return null}function A(b,l,t){function d(b){if(b in c){var x=c[b];p.commandType(x,
"object","invalid "+b,t.commandStr);var h=!0,f=x.x|0,v=x.y|0,m,k;"width"in x?(m=x.width|0,p.command(0<=m,"invalid "+b,t.commandStr)):h=!1;"height"in x?(k=x.height|0,p.command(0<=k,"invalid "+b,t.commandStr)):h=!1;return new q(!h&&l&&l.thisDep,!h&&l&&l.contextDep,!h&&l&&l.propDep,function(b,l){var t=b.shared.context,d=m;"width"in x||(d=l.def(t,".","framebufferWidth","-",f));var c=k;"height"in x||(c=l.def(t,".","framebufferHeight","-",v));return[f,v,d,c]})}if(b in n){var w=n[b],h=e(w,function(l,t){var d=
l.invoke(t,w);p.optional(function(){l.assert(t,d+"&&typeof "+d+'==="object"',"invalid "+b)});var c=l.shared.context,n=t.def(d,".x|0"),e=t.def(d,".y|0"),x=t.def('"width" in ',d,"?",d,".width|0:","(",c,".","framebufferWidth","-",n,")"),q=t.def('"height" in ',d,"?",d,".height|0:","(",c,".","framebufferHeight","-",e,")");p.optional(function(){l.assert(t,x+">=0&&"+q+">=0","invalid "+b)});return[n,e,x,q]});l&&(h.thisDep=h.thisDep||l.thisDep,h.contextDep=h.contextDep||l.contextDep,h.propDep=h.propDep||l.propDep);
return h}return l?new q(l.thisDep,l.contextDep,l.propDep,function(b,l){var t=b.shared.context;return[0,0,l.def(t,".","framebufferWidth"),l.def(t,".","framebufferHeight")]}):null}var c=b["static"],n=b.dynamic;if(b=d("viewport")){var x=b;b=new q(b.thisDep,b.contextDep,b.propDep,function(b,l){var t=x.append(b,l),d=b.shared.context;l.set(d,".viewportWidth",t[2]);l.set(d,".viewportHeight",t[3]);return t})}return{viewport:b,scissor_box:d("scissor.box")}}function O(b,l){var t=b["static"];if("string"===typeof t.frag&&
"string"===typeof t.vert){if(0<k(l.dynamic).length)return null;var t=l["static"],d=k(t);if(0<d.length&&"number"===typeof t[d[0]]){for(var c=[],n=0;n<d.length;++n)p("number"===typeof t[d[n]],"must specify all vertex attribute locations when using vaos"),c.push([t[d[n]]|0,d[n]]);return c}}return null}function N(b,t,d){function c(b){if(b in n){var t=m.id(n[b]);p.optional(function(){Wa.shader(l[b],t,p.guessCommand())});var d=f(function(){return t});d.id=t;return d}if(b in x){var q=x[b];return e(q,function(t,
d){var c=t.invoke(d,q),n=d.def(t.shared.strings,".id(",c,")");p.optional(function(){d(t.shared.shader,".shader(",l[b],",",n,",",t.command,");")});return n})}return null}var n=b["static"],x=b.dynamic,h=c("frag"),k=c("vert"),w=null;v(h)&&v(k)?(w=Wa.program(k.id,h.id,null,d),b=f(function(b,l){return b.link(w)})):b=new q(h&&h.thisDep||k&&k.thisDep,h&&h.contextDep||k&&k.contextDep,h&&h.propDep||k&&k.propDep,function(b,l){var t=b.shared.shader,d;d=h?h.append(b,l):l.def(t,".","frag");var c;c=k?k.append(b,
l):l.def(t,".","vert");var n=t+".program("+c+","+d;p.optional(function(){n+=","+b.command});return l.def(n+")")});return{frag:h,vert:k,progVar:b,program:w}}function ga(b,l){function t(b,v){if(b in d){var k=d[b]|0;v?n.offset=k:n.instances=k;p.command(!v||0<=k,"invalid "+b,l.commandStr);return f(function(b,l){v&&(b.OFFSET=k);return k})}if(b in c){var w=c[b];return e(w,function(l,t){var d=l.invoke(t,w);v&&(l.OFFSET=d,p.optional(function(){l.assert(t,d+">=0","invalid "+b)}));return d})}if(v){if(m)return f(function(b,
l){return b.OFFSET=0});if(x)return new q(h.thisDep,h.contextDep,h.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(x)return new q(h.thisDep,h.contextDep,h.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var d=b["static"],c=b.dynamic,n={},x=!1,h=function(){if("vao"in d){var b=d.vao;null!==b&&null===Q.getVAO(b)&&(b=Q.createVAO(b));x=!0;n.vao=b;return f(function(l){var t=
Q.getVAO(b);return t?l.link(t):"null"})}if("vao"in c){x=!0;var l=c.vao;return e(l,function(b,t){var d=b.invoke(t,l);return t.def(b.shared.vao+".getVAO("+d+")")})}return null}(),m=!1,w=function(){if("elements"in d){var b=d.elements;n.elements=b;if(a(b)){var t=n.elements=D.create(b,!0),b=D.getElements(t);m=!0}else b&&(b=D.getElements(b),m=!0,p.command(b,"invalid elements",l.commandStr));t=f(function(l,t){if(b){var d=l.link(b);return l.ELEMENTS=d}return l.ELEMENTS=null});t.value=b;return t}if("elements"in
c){m=!0;var v=c.elements;return e(v,function(b,l){var t=b.shared,d=t.isBufferArgs,t=t.elements,c=b.invoke(l,v),n=l.def("null"),d=l.def(d,"(",c,")"),e=b.cond(d).then(n,"=",t,".createStream(",c,");")["else"](n,"=",t,".getElements(",c,");");p.optional(function(){b.assert(e["else"],"!"+c+"||"+n,"invalid elements")});l.entry(e);l.exit(b.cond(d).then(t,".destroyStream(",n,");"));return b.ELEMENTS=n})}return x?new q(h.thisDep,h.contextDep,h.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+
b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),C=t("offset",!0),R=function(){if("primitive"in d){var b=d.primitive;n.primitive=b;p.commandParameter(b,H,"invalid primitve",l.commandStr);return f(function(l,t){return H[b]})}if("primitive"in c){var t=c.primitive;return e(t,function(b,l){var d=b.constants.primTypes,c=b.invoke(l,t);p.optional(function(){b.assert(l,c+" in "+d,"invalid primitive, must be one of "+k(H))});return l.def(d,"[",c,"]")})}return m?v(w)?w.value?
f(function(b,l){return l.def(b.ELEMENTS,".primType")}):f(function(){return 4}):new q(w.thisDep,w.contextDep,w.propDep,function(b,l){var t=b.ELEMENTS;return l.def(t,"?",t,".primType:",4)}):x?new q(h.thisDep,h.contextDep,h.propDep,function(b,l){return l.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),r=function(){if("count"in d){var b=d.count|0;n.count=b;p.command("number"===typeof b&&0<=b,"invalid vertex count",l.commandStr);return f(function(){return b})}if("count"in
c){var t=c.count;return e(t,function(b,l){var d=b.invoke(l,t);p.optional(function(){b.assert(l,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(m){if(v(w)){if(w)return C?new q(C.thisDep,C.contextDep,C.propDep,function(b,l){var t=l.def(b.ELEMENTS,".vertCount-",b.OFFSET);p.optional(function(){b.assert(l,t+">=0","invalid vertex offset/element buffer too small")});return t}):f(function(b,l){return l.def(b.ELEMENTS,".vertCount")});var k=f(function(){return-1});
p.optional(function(){k.MISSING=!0});return k}var D=new q(w.thisDep||C.thisDep,w.contextDep||C.contextDep,w.propDep||C.propDep,function(b,l){var t=b.ELEMENTS;return b.OFFSET?l.def(t,"?",t,".vertCount-",b.OFFSET,":-1"):l.def(t,"?",t,".vertCount:-1")});p.optional(function(){D.DYNAMIC=!0});return D}return x?new q(h.thisDep,h.contextDep,h.propDep,function(b,l){return l.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),z=t("instances",!1);return{elements:w,primitive:R,count:r,
instances:z,offset:C,vao:h,vaoActive:x,elementsActive:m,"static":n}}function X(l,t){var c=l["static"],n=l.dynamic,h={};va.forEach(function(l){function q(b,t){if(l in c){var d=b(c[l]);h[v]=f(function(){return d})}else if(l in n){var x=n[l];h[v]=e(x,function(b,l){return t(b,l,b.invoke(l,x))})}}var v=T(l);switch(l){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return q(function(b){p.commandType(b,
"boolean",l,t.commandStr);return b},function(b,t,d){p.optional(function(){b.assert(t,"typeof "+d+'==="boolean"',"invalid flag "+l,b.commandStr)});return d});case "depth.func":return q(function(b){p.commandParameter(b,B,"invalid "+l,t.commandStr);return B[b]},function(b,t,d){var c=b.constants.compareFuncs;p.optional(function(){b.assert(t,d+" in "+c,"invalid "+l+", must be one of "+k(B))});return t.def(c,"[",d,"]")});case "depth.range":return q(function(b){p.command(d(b)&&2===b.length&&"number"===typeof b[0]&&
"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",t.commandStr);return b},function(b,l,t){p.optional(function(){b.assert(l,b.shared.isArrayLike+"("+t+")&&"+t+".length===2&&typeof "+t+'[0]==="number"&&typeof '+t+'[1]==="number"&&'+t+"[0]<="+t+"[1]","depth range must be a 2d array")});var d=l.def("+",t,"[0]"),c=l.def("+",t,"[1]");return[d,c]});case "blend.func":return q(function(b){p.commandType(b,"object","blend.func",t.commandStr);var l="srcRGB"in b?b.srcRGB:b.src,d="srcAlpha"in b?b.srcAlpha:
b.src,c="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;p.commandParameter(l,E,v+".srcRGB",t.commandStr);p.commandParameter(d,E,v+".srcAlpha",t.commandStr);p.commandParameter(c,E,v+".dstRGB",t.commandStr);p.commandParameter(b,E,v+".dstAlpha",t.commandStr);p.command(-1===ta.indexOf(l+", "+c),"unallowed blending combination (srcRGB, dstRGB) = ("+l+", "+c+")",t.commandStr);return[E[l],E[c],E[d],E[b]]},function(b,t,d){function c(e,x){var h=t.def('"',e,x,'" in ',d,"?",d,".",e,x,":",d,".",
e);p.optional(function(){b.assert(t,h+" in "+n,"invalid "+l+"."+e+x+", must be one of "+k(E))});return h}var n=b.constants.blendFuncs;p.optional(function(){b.assert(t,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var e=c("src","RGB"),x=c("dst","RGB");p.optional(function(){b.assert(t,b.constants.invalidBlendCombinations+".indexOf("+e+'+", "+'+x+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var h=t.def(n,"[",e,"]"),q=t.def(n,"[",c("src","Alpha"),"]"),
v=t.def(n,"[",x,"]"),f=t.def(n,"[",c("dst","Alpha"),"]");return[h,v,q,f]});case "blend.equation":return q(function(b){if("string"===typeof b)return p.commandParameter(b,Fa,"invalid "+l,t.commandStr),[Fa[b],Fa[b]];if("object"===typeof b)return p.commandParameter(b.rgb,Fa,l+".rgb",t.commandStr),p.commandParameter(b.alpha,Fa,l+".alpha",t.commandStr),[Fa[b.rgb],Fa[b.alpha]];p.commandRaise("invalid blend.equation",t.commandStr)},function(b,t,d){var c=b.constants.blendEquations,n=t.def(),e=t.def(),x=b.cond("typeof ",
d,'==="string"');p.optional(function(){function t(l,d,n){b.assert(l,n+" in "+c,"invalid "+d+", must be one of "+k(Fa))}t(x.then,l,d);b.assert(x["else"],d+"&&typeof "+d+'==="object"',"invalid "+l);t(x["else"],l+".rgb",d+".rgb");t(x["else"],l+".alpha",d+".alpha")});x.then(n,"=",e,"=",c,"[",d,"];");x["else"](n,"=",c,"[",d,".rgb];",e,"=",c,"[",d,".alpha];");t(x);return[n,e]});case "blend.color":return q(function(b){p.command(d(b)&&4===b.length,"blend.color must be a 4d array",t.commandStr);return y(4,
function(l){return+b[l]})},function(b,l,t){p.optional(function(){b.assert(l,b.shared.isArrayLike+"("+t+")&&"+t+".length===4","blend.color must be a 4d array")});return y(4,function(b){return l.def("+",t,"[",b,"]")})});case "stencil.mask":return q(function(b){p.commandType(b,"number",v,t.commandStr);return b|0},function(b,l,t){p.optional(function(){b.assert(l,"typeof "+t+'==="number"',"invalid stencil.mask")});return l.def(t,"|0")});case "stencil.func":return q(function(b){p.commandType(b,"object",
v,t.commandStr);var d=b.cmp||"keep",c=b.ref||0;b="mask"in b?b.mask:-1;p.commandParameter(d,B,l+".cmp",t.commandStr);p.commandType(c,"number",l+".ref",t.commandStr);p.commandType(b,"number",l+".mask",t.commandStr);return[B[d],c,b]},function(b,l,t){var d=b.constants.compareFuncs;p.optional(function(){function c(){b.assert(l,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(t+"&&typeof ",t,'==="object"');c('!("cmp" in ',t,")||(",t,".cmp in ",d,")")});var c=l.def('"cmp" in ',t,"?",d,"[",
t,".cmp]",":",7680),n=l.def(t,".ref|0"),x=l.def('"mask" in ',t,"?",t,".mask|0:-1");return[c,n,x]});case "stencil.opFront":case "stencil.opBack":return q(function(d){p.commandType(d,"object",v,t.commandStr);var c=d.fail||"keep",n=d.zfail||"keep";d=d.zpass||"keep";p.commandParameter(c,b,l+".fail",t.commandStr);p.commandParameter(n,b,l+".zfail",t.commandStr);p.commandParameter(d,b,l+".zpass",t.commandStr);return["stencil.opBack"===l?1029:1028,b[c],b[n],b[d]]},function(t,d,c){function n(e){p.optional(function(){t.assert(d,
'!("'+e+'" in '+c+")||("+c+"."+e+" in "+x+")","invalid "+l+"."+e+", must be one of "+k(b))});return d.def('"',e,'" in ',c,"?",x,"[",c,".",e,"]:",7680)}var x=t.constants.stencilOps;p.optional(function(){t.assert(d,c+"&&typeof "+c+'==="object"',"invalid "+l)});return["stencil.opBack"===l?1029:1028,n("fail"),n("zfail"),n("zpass")]});case "polygonOffset.offset":return q(function(b){p.commandType(b,"object",v,t.commandStr);var l=b.factor|0;b=b.units|0;p.commandType(l,"number",v+".factor",t.commandStr);
p.commandType(b,"number",v+".units",t.commandStr);return[l,b]},function(b,t,d){p.optional(function(){b.assert(t,d+"&&typeof "+d+'==="object"',"invalid "+l)});var c=t.def(d,".factor|0"),n=t.def(d,".units|0");return[c,n]});case "cull.face":return q(function(b){var l=0;"front"===b?l=1028:"back"===b&&(l=1029);p.command(!!l,v,t.commandStr);return l},function(b,l,t){p.optional(function(){b.assert(l,t+'==="front"||'+t+'==="back"',"invalid cull.face")});return l.def(t,'==="front"?',1028,":",1029)});case "lineWidth":return q(function(b){p.command("number"===
typeof b&&b>=I.lineWidthDims[0]&&b<=I.lineWidthDims[1],"invalid line width, must be a positive number between "+I.lineWidthDims[0]+" and "+I.lineWidthDims[1],t.commandStr);return b},function(b,l,t){p.optional(function(){b.assert(l,"typeof "+t+'==="number"&&'+t+">="+I.lineWidthDims[0]+"&&"+t+"<="+I.lineWidthDims[1],"invalid line width")});return t});case "frontFace":return q(function(b){p.commandParameter(b,x,v,t.commandStr);return x[b]},function(b,l,t){p.optional(function(){b.assert(l,t+'==="cw"||'+
t+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return l.def(t+'==="cw"?2304:2305')});case "colorMask":return q(function(b){p.command(d(b)&&4===b.length,"color.mask must be length 4 array",t.commandStr);return b.map(function(b){return!!b})},function(b,l,t){p.optional(function(){b.assert(l,b.shared.isArrayLike+"("+t+")&&"+t+".length===4","invalid color.mask")});return y(4,function(b){return"!!"+t+"["+b+"]"})});case "sample.coverage":return q(function(b){p.command("object"===typeof b&&b,
v,t.commandStr);var l="value"in b?b.value:1;b=!!b.invert;p.command("number"===typeof l&&0<=l&&1>=l,"sample.coverage.value must be a number between 0 and 1",t.commandStr);return[l,b]},function(b,l,t){p.optional(function(){b.assert(l,t+"&&typeof "+t+'==="object"',"invalid sample.coverage")});var d=l.def('"value" in ',t,"?+",t,".value:1"),c=l.def("!!",t,".invert");return[d,c]})}});return h}function la(b,l){var t=b["static"],c=b.dynamic,n={};k(t).forEach(function(b){var c=t[b],x;if("number"===typeof c||
"boolean"===typeof c)x=f(function(){return c});else if("function"===typeof c){var e=c._reglType;"texture2d"===e||"textureCube"===e?x=f(function(b){return b.link(c)}):"framebuffer"===e||"framebufferCube"===e?(p.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',l.commandStr),x=f(function(b){return b.link(c.color[0])})):p.commandRaise('invalid data for uniform "'+b+'"',l.commandStr)}else d(c)?x=f(function(l){return l.global.def("[",y(c.length,function(t){p.command("number"===
typeof c[t]||"boolean"===typeof c[t],"invalid uniform "+b,l.commandStr);return c[t]}),"]")}):p.commandRaise('invalid or missing data for uniform "'+b+'"',l.commandStr);x.value=c;n[b]=x});k(c).forEach(function(b){var l=c[b];n[b]=e(l,function(b,t){return b.invoke(t,l)})});return n}function oa(b,l){var t=b["static"],c=b.dynamic,n={};k(t).forEach(function(b){var c=t[b],x=m.id(b),e=new xa;if(a(c))e.state=1,e.buffer=K.getBuffer(K.create(c,34962,!1,!0)),e.type=0;else{var h=K.getBuffer(c);if(h)e.state=1,
e.buffer=h,e.type=0;else if(p.command("object"===typeof c&&c,"invalid data for attribute "+b,l.commandStr),"constant"in c){var q=c.constant;e.buffer="null";e.state=2;"number"===typeof q?e.x=q:(p.command(d(q)&&0<q.length&&4>=q.length,"invalid constant for attribute "+b,l.commandStr),L.forEach(function(b,l){l<q.length&&(e[b]=q[l])}))}else{h=a(c.buffer)?K.getBuffer(K.create(c.buffer,34962,!1,!0)):K.getBuffer(c.buffer);p.command(!!h,'missing buffer for attribute "'+b+'"',l.commandStr);var v=c.offset|
0;p.command(0<=v,'invalid offset for attribute "'+b+'"',l.commandStr);var C=c.stride|0;p.command(0<=C&&256>C,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',l.commandStr);var D=c.size|0;p.command(!("size"in c)||0<D&&4>=D,'invalid size for attribute "'+b+'", must be 1,2,3,4',l.commandStr);var R=!!c.normalized,r=0;"type"in c&&(p.commandParameter(c.type,w,"invalid type for attribute "+b,l.commandStr),r=w[c.type]);var H=c.divisor|0;p.optional(function(){"divisor"in c&&(p.command(0===
H||pa,'cannot specify divisor for attribute "'+b+'", instancing not supported',l.commandStr),p.command(0<=H,'invalid divisor for attribute "'+b+'"',l.commandStr));var t=l.commandStr,d="buffer offset divisor normalized type size stride".split(" ");k(c).forEach(function(l){p.command(0<=d.indexOf(l),'unknown parameter "'+l+'" for attribute pointer "'+b+'" (valid parameters are '+d+")",t)})});e.buffer=h;e.state=1;e.size=D;e.normalized=R;e.type=r||h.dtype;e.offset=v;e.stride=C;e.divisor=H}}n[b]=f(function(b,
l){var t=b.attribCache;if(x in t)return t[x];var d={isStream:!1};k(e).forEach(function(b){d[b]=e[b]});e.buffer&&(d.buffer=b.link(e.buffer),d.type=d.type||d.buffer+".dtype");return t[x]=d})});k(c).forEach(function(b){var l=c[b];n[b]=e(l,function(t,d){function c(b){d(v[b],"=",n,".",b,"|0;")}var n=t.invoke(d,l),e=t.shared,x=t.constants,h=e.isBufferArgs,q=e.buffer;p.optional(function(){t.assert(d,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+h+"("+n+")||"+q+".getBuffer("+n+")||"+q+".getBuffer("+
n+".buffer)||"+h+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+e.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+b+'"')});var v={isStream:d.def(!1)},f=new xa;f.state=1;k(f).forEach(function(b){v[b]=d.def(""+f[b])});var m=v.buffer,w=v.type;d("if(",h,"(",n,")){",v.isStream,"=true;",m,"=",q,".createStream(",34962,",",n,");",w,"=",m,".dtype;","}else{",m,"=",q,".getBuffer(",n,");","if(",m,"){",w,"=",m,".dtype;",'}else if("constant" in ',n,"){",v.state,"=",
2,";","if(typeof "+n+'.constant === "number"){',v[L[0]],"=",n,".constant;",L.slice(1).map(function(b){return v[b]}).join("="),"=0;","}else{",L.map(function(b,l){return v[b]+"="+n+".constant.length>"+l+"?"+n+".constant["+l+"]:0;"}).join(""),"}}else{","if(",h,"(",n,".buffer)){",m,"=",q,".createStream(",34962,",",n,".buffer);","}else{",m,"=",q,".getBuffer(",n,".buffer);","}",w,'="type" in ',n,"?",x.glTypes,"[",n,".type]:",m,".dtype;",v.normalized,"=!!",n,".normalized;");c("size");c("offset");c("stride");
c("divisor");d("}}");d.exit("if(",v.isStream,"){",q,".destroyStream(",m,");","}");return v})});return n}function ya(b){var l=b["static"],t=b.dynamic,d={};k(l).forEach(function(b){var t=l[b];d[b]=f(function(b,l){return"number"===typeof t||"boolean"===typeof t?""+t:b.link(t)})});k(t).forEach(function(b){var l=t[b];d[b]=e(l,function(b,t){return b.invoke(t,l)})});return d}function ua(b,l,t,d,c){function n(b){var l=f[b];l&&(w[b]=l)}var e=b["static"],x=b.dynamic;p.optional(function(){function b(t){k(t).forEach(function(b){p.command(0<=
l.indexOf(b),'unknown parameter "'+b+'"',c.commandStr)})}var l="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(va);b(e);b(x)});var h=O(b,l),v=qa(b,c),f=A(b,v,c),m=ga(b,c),w=X(b,c),C=N(b,c,h);n("viewport");n(T("scissor.box"));var D=0<k(w).length,v={framebuffer:v,draw:m,shader:C,state:w,dirty:D,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};v.profile=U(b,c);v.uniforms=la(t,c);v.drawVAO=v.scopeVAO=m.vao;if(!v.drawVAO&&C.program&&!h&&g.angle_instanced_arrays&&
m["static"].elements){var r=!0;b=C.program.attributes.map(function(b){b=l["static"][b];r=r&&!!b;return b});if(r&&0<b.length){var R=Q.getVAO(Q.createVAO({attributes:b,elements:m["static"].elements}));v.drawVAO=new q(null,null,null,function(b,l){return b.link(R)});v.useVAO=!0}}h?v.useVAO=!0:v.attributes=oa(l,c);v.context=ya(d,c);return v}function aa(b,l,t){var d=b.shared.context,c=b.scope();k(t).forEach(function(n){l.save(d,"."+n);var e=t[n].append(b,l);Array.isArray(e)?c(d,".",n,"=[",e.join(),"];"):
c(d,".",n,"=",e,";")});l(c)}function za(b,l,t,d){var c=b.shared,n=c.gl,e=c.framebuffer,x;Ca&&(x=l.def(c.extensions,".webgl_draw_buffers"));var h=b.constants,c=h.drawBuffer,h=h.backBuffer;b=t?t.append(b,l):l.def(e,".next");d||l("if(",b,"!==",e,".cur){");l("if(",b,"){",n,".bindFramebuffer(",36160,",",b,".framebuffer);");Ca&&l(x,".drawBuffersWEBGL(",c,"[",b,".colorAttachments.length]);");l("}else{",n,".bindFramebuffer(",36160,",null);");Ca&&l(x,".drawBuffersWEBGL(",h,");");l("}",e,".cur=",b,";");d||
l("}")}function ja(b,l,t){var d=b.shared,c=d.gl,n=b.current,e=b.next,x=d.current,h=d.next,q=b.cond(x,".dirty");va.forEach(function(l){l=T(l);if(!(l in t.state)){var d,v;if(l in e){d=e[l];v=n[l];var f=y(ka[l].length,function(b){return q.def(d,"[",b,"]")});q(b.cond(f.map(function(b,l){return b+"!=="+v+"["+l+"]"}).join("||")).then(c,".",Ha[l],"(",f,");",f.map(function(b,l){return v+"["+l+"]="+b}).join(";"),";"))}else d=q.def(h,".",l),f=b.cond(d,"!==",x,".",l),q(f),l in La?f(b.cond(d).then(c,".enable(",
La[l],");")["else"](c,".disable(",La[l],");"),x,".",l,"=",d,";"):f(c,".",Ha[l],"(",d,");",x,".",l,"=",d,";")}});0===k(t.state).length&&q(x,".dirty=false;");l(q)}function ma(b,l,t,c){var n=b.shared,e=b.current,x=n.current,h=n.gl;r(k(t)).forEach(function(n){var q=t[n];if(!c||c(q)){var f=q.append(b,l);if(La[n]){var m=La[n];v(q)?f?l(h,".enable(",m,");"):l(h,".disable(",m,");"):l(b.cond(f).then(h,".enable(",m,");")["else"](h,".disable(",m,");"));l(x,".",n,"=",f,";")}else if(d(f)){var p=e[n];l(h,".",Ha[n],
"(",f,");",f.map(function(b,l){return p+"["+l+"]="+b}).join(";"),";")}else l(h,".",Ha[n],"(",f,");",x,".",n,"=",f,";")}})}function sa(b,l){pa&&(b.instancing=l.def(b.shared.extensions,".angle_instanced_arrays"))}function Ga(b,l,t,d,c){function n(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function e(b){k=l.def();b(k,"=",n(),";");"string"===typeof c?b(f,".count+=",c,";"):b(f,".count++;");da&&(d?(w=l.def(),b(w,"=",p,".getNumPendingQueries();")):b(p,".beginQuery(",f,");"))}
function x(b){b(f,".cpuTime+=",n(),"-",k,";");da&&(d?b(p,".pushScopeStats(",w,",",p,".getNumPendingQueries(),",f,");"):b(p,".endQuery();"))}function h(b){var t=l.def(m,".profile");l(m,".profile=",b,";");l.exit(m,".profile=",t,";")}var q=b.shared,f=b.stats,m=q.current,p=q.timer;t=t.profile;var k,w;if(t){if(v(t)){t.enable?(e(l),x(l.exit),h("true")):h("false");return}t=t.append(b,l);h(t)}else t=l.def(m,".profile");q=b.block();e(q);l("if(",t,"){",q,"}");b=b.block();x(b);l.exit("if(",t,"){",b,"}")}function Da(b,
l,t,d,c){function n(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function e(t,d,c){function n(){l("if(!",f,".buffer){",q,".enableVertexAttribArray(",v,");}");var t=c.type,e;e=c.size?l.def(c.size,"||",d):d;l("if(",f,".type!==",t,"||",f,".size!==",e,"||",k.map(function(b){return f+"."+b+"!=="+c[b]}).join("||"),"){",q,".bindBuffer(",34962,",",m,".buffer);",q,".vertexAttribPointer(",[v,e,t,
c.normalized,c.stride,c.offset],");",f,".type=",t,";",f,".size=",e,";",k.map(function(b){return f+"."+b+"="+c[b]+";"}).join(""),"}");pa&&(t=c.divisor,l("if(",f,".divisor!==",t,"){",b.instancing,".vertexAttribDivisorANGLE(",[v,t],");",f,".divisor=",t,";}"))}function h(){l("if(",f,".buffer){",q,".disableVertexAttribArray(",v,");",f,".buffer=null;","}if(",L.map(function(b,l){return f+"."+b+"!=="+p[l]}).join("||"),"){",q,".vertexAttrib4f(",v,",",p,");",L.map(function(b,l){return f+"."+b+"="+p[l]+";"}).join(""),
"}")}var q=x.gl,v=l.def(t,".location"),f=l.def(x.attributes,"[",v,"]");t=c.state;var m=c.buffer,p=[c.x,c.y,c.z,c.w],k=["buffer","normalized","offset","stride"];1===t?n():2===t?h():(l("if(",t,"===",1,"){"),n(),l("}else{"),h(),l("}"))}var x=b.shared;d.forEach(function(d){var x=d.name,h=t.attributes[x],q;if(h){if(!c(h))return;q=h.append(b,l)}else{if(!c(R))return;var f=b.scopeAttrib(x);p.optional(function(){b.assert(l,f+".state","missing attribute "+x)});q={};k(new xa).forEach(function(b){q[b]=l.def(f,
".",b)})}e(b.link(d),n(d.info.type),q)})}function sb(b,l,t,c,n,e){for(var x=b.shared,h=x.gl,q,f=0;f<c.length;++f){var k=c[f],w=k.name,C=k.info.type,D=t.uniforms[w],k=b.link(k)+".location",r;if(D){if(!n(D))continue;if(v(D)){var H=D.value;p.command(null!==H&&"undefined"!==typeof H,'missing uniform "'+w+'"',b.commandStr);if(35678===C||35680===C)p.command("function"===typeof H&&(35678===C&&("texture2d"===H._reglType||"framebuffer"===H._reglType)||35680===C&&("textureCube"===H._reglType||"framebufferCube"===
H._reglType)),"invalid texture for uniform "+w,b.commandStr),D=b.link(H._texture||H.color[0]._texture),l(h,".uniform1i(",k,",",D+".bind());"),l.exit(D,".unbind();");else if(35674===C||35675===C||35676===C){p.optional(function(){p.command(d(H),"invalid matrix for uniform "+w,b.commandStr);p.command(35674===C&&4===H.length||35675===C&&9===H.length||35676===C&&16===H.length,"invalid length for matrix uniform "+w,b.commandStr)});var D=b.global.def("new Float32Array(["+Array.prototype.slice.call(H)+"])"),
z=2;35675===C?z=3:35676===C&&(z=4);l(h,".uniformMatrix",z,"fv(",k,",false,",D,");")}else{switch(C){case 5126:p.commandType(H,"number","uniform "+w,b.commandStr);q="1f";break;case 35664:p.command(d(H)&&2===H.length,"uniform "+w,b.commandStr);q="2f";break;case 35665:p.command(d(H)&&3===H.length,"uniform "+w,b.commandStr);q="3f";break;case 35666:p.command(d(H)&&4===H.length,"uniform "+w,b.commandStr);q="4f";break;case 35670:p.commandType(H,"boolean","uniform "+w,b.commandStr);q="1i";break;case 5124:p.commandType(H,
"number","uniform "+w,b.commandStr);q="1i";break;case 35671:p.command(d(H)&&2===H.length,"uniform "+w,b.commandStr);q="2i";break;case 35667:p.command(d(H)&&2===H.length,"uniform "+w,b.commandStr);q="2i";break;case 35672:p.command(d(H)&&3===H.length,"uniform "+w,b.commandStr);q="3i";break;case 35668:p.command(d(H)&&3===H.length,"uniform "+w,b.commandStr);q="3i";break;case 35673:p.command(d(H)&&4===H.length,"uniform "+w,b.commandStr);q="4i";break;case 35669:p.command(d(H)&&4===H.length,"uniform "+w,
b.commandStr),q="4i"}l(h,".uniform",q,"(",k,",",d(H)?Array.prototype.slice.call(H):H,");")}continue}else r=D.append(b,l)}else{if(!n(R))continue;r=l.def(x.uniforms,"[",m.id(w),"]")}35678===C?(p(!Array.isArray(r),"must specify a scalar prop for textures"),l("if(",r,"&&",r,'._reglType==="framebuffer"){',r,"=",r,".color[0];","}")):35680===C&&(p(!Array.isArray(r),"must specify a scalar prop for cube maps"),l("if(",r,"&&",r,'._reglType==="framebufferCube"){',r,"=",r,".color[0];","}"));p.optional(function(){function t(d,
c){b.assert(l,d,'bad data or missing for uniform "'+w+'".  '+c)}function d(b){p(!Array.isArray(r),"must not specify an array type for uniform");t("typeof "+r+'==="'+b+'"',"invalid type, expected "+b)}function c(l,d){Array.isArray(r)?p(r.length===l,"must have length "+l):t(x.isArrayLike+"("+r+")&&"+r+".length==="+l,"invalid vector, should have length "+l,b.commandStr)}function n(l){p(!Array.isArray(r),"must not specify a value type");t("typeof "+r+'==="function"&&'+r+'._reglType==="texture'+(3553===
l?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(C){case 5124:d("number");break;case 35667:c(2,"number");break;case 35668:c(3,"number");break;case 35669:c(4,"number");break;case 5126:d("number");break;case 35664:c(2,"number");break;case 35665:c(3,"number");break;case 35666:c(4,"number");break;case 35670:d("boolean");break;case 35671:c(2,"boolean");break;case 35672:c(3,"boolean");break;case 35673:c(4,"boolean");break;case 35674:c(4,"number");break;case 35675:c(9,"number");break;case 35676:c(16,
"number");break;case 35678:n(3553);break;case 35680:n(34067)}});D=1;switch(C){case 35678:case 35680:D=l.def(r,"._texture");l(h,".uniform1i(",k,",",D,".bind());");l.exit(D,".unbind();");continue;case 5124:case 35670:q="1i";break;case 35667:case 35671:q="2i";D=2;break;case 35668:case 35672:q="3i";D=3;break;case 35669:case 35673:q="4i";D=4;break;case 5126:q="1f";break;case 35664:q="2f";D=2;break;case 35665:q="3f";D=3;break;case 35666:q="4f";D=4;break;case 35674:q="Matrix2fv";break;case 35675:q="Matrix3fv";
break;case 35676:q="Matrix4fv"}if("M"===q.charAt(0)){l(h,".uniform",q,"(",k,",");var k=Math.pow(C-35674+2,2),a=b.global.def("new Float32Array(",k,")");Array.isArray(r)?l("false,(",y(k,function(b){return a+"["+b+"]="+r[b]}),",",a,")"):l("false,(Array.isArray(",r,")||",r," instanceof Float32Array)?",r,":(",y(k,function(b){return a+"["+b+"]="+r+"["+b+"]"}),",",a,")");l(");")}else{if(1<D){for(var z=[],J=[],I=0;I<D;++I)Array.isArray(r)?J.push(r[I]):J.push(l.def(r+"["+I+"]")),e&&z.push(l.def());e&&l("if(!",
b.batchId,"||",z.map(function(b,l){return b+"!=="+J[l]}).join("||"),"){",z.map(function(b,l){return b+"="+J[l]+";"}).join(""));l(h,".uniform",q,"(",k,",",J.join(","),");")}else p(!Array.isArray(r),"uniform value must not be an array"),e&&(D=l.def(),l("if(!",b.batchId,"||",D,"!==",r,"){",D,"=",r,";")),l(h,".uniform",q,"(",k,",",r,");");e&&l("}")}}}function Ka(b,l,t,d){function c(n){var e=f[n];return e?e.contextDep&&d.contextDynamic||e.propDep?e.append(b,t):e.append(b,l):l.def(h,".",n)}function n(){function b(){t(D,
".drawElementsInstancedANGLE(",[k,C,H,w+"<<(("+H+"-5121)>>1)",r],");")}function l(){t(D,".drawArraysInstancedANGLE(",[k,w,C,r],");")}m&&"null"!==m?R?b():(t("if(",m,"){"),b(),t("}else{"),l(),t("}")):l()}function e(){function b(){t(q+".drawElements("+[k,C,H,w+"<<(("+H+"-5121)>>1)"]+");")}function l(){t(q+".drawArrays("+[k,w,C]+");")}m&&"null"!==m?R?b():(t("if(",m,"){"),b(),t("}else{"),l(),t("}")):l()}var x=b.shared,q=x.gl,h=x.draw,f=d.draw,m=function(){var c=f.elements,n=l;if(c){if(c.contextDep&&d.contextDynamic||
c.propDep)n=t;c=c.append(b,n);f.elementsActive&&n("if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=n.def(),n(c,"=",h,".","elements",";","if(",c,"){",q,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",x.vao,".currentVAO){",c,"=",b.shared.elements+".getElements("+x.vao,".currentVAO.elements);",Aa?"":"if("+c+")"+q+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),k=c("primitive"),w=c("offset"),C=function(){var c=f.count,n,e=l;if(c){if(c.contextDep&&d.contextDynamic||
c.propDep)e=t;n=c.append(b,e);p.optional(function(){c.MISSING&&b.assert(l,"false","missing vertex count");c.DYNAMIC&&b.assert(e,n+">=0","missing vertex count")})}else n=e.def(h,".","count"),p.optional(function(){b.assert(e,n+">=0","missing vertex count")});return n}();if("number"===typeof C){if(0===C)return}else t("if(",C,"){"),t.exit("}");var r,D;pa&&(r=c("instances"),D=b.instancing);var H=m+".type",R=f.elements&&v(f.elements)&&!f.vaoActive;pa&&("number"!==typeof r||0<=r)?"string"===typeof r?(t("if(",
r,">0){"),n(),t("}else if(",r,"<0){"),e(),t("}")):n():e()}function ea(b,l,t,d,c){var n=S();c=n.proc("body",c);p.optional(function(){n.commandStr=l.commandStr;n.command=n.link(l.commandStr)});pa&&(n.instancing=c.def(n.shared.extensions,".angle_instanced_arrays"));b(n,c,t,d);return n.compile().body}function ca(b,l,t,d){sa(b,l);t.useVAO?t.drawVAO?l(b.shared.vao,".setVAO(",t.drawVAO.append(b,l),");"):l(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(l(b.shared.vao,".setVAO(null);"),Da(b,l,t,d.attributes,
function(){return!0}));sb(b,l,t,d.uniforms,function(){return!0},!1);Ka(b,l,l,t)}function na(b,l){var t=b.proc("draw",1);sa(b,t);aa(b,t,l.context);za(b,t,l.framebuffer);ja(b,t,l);ma(b,t,l.state);Ga(b,t,l,!1,!0);var d=l.shader.progVar.append(b,t);t(b.shared.gl,".useProgram(",d,".program);");if(l.shader.program)ca(b,t,l,l.shader.program);else{t(b.shared.vao,".setVAO(null);");var c=b.global.def("{}"),n=t.def(d,".id"),e=t.def(c,"[",n,"]");t(b.cond(e).then(e,".call(this,a0);")["else"](e,"=",c,"[",n,"]=",
b.link(function(t){return ea(ca,b,l,t,1)}),"(",d,");",e,".call(this,a0);"))}0<k(l.state).length&&t(b.shared.current,".dirty=true;");b.shared.vao&&t(b.shared.vao,".setVAO(null);")}function wa(b,l,t,d){function c(){return!0}b.batchId="a1";sa(b,l);Da(b,l,t,d.attributes,c);sb(b,l,t,d.uniforms,c,!1);Ka(b,l,l,t)}function Ea(b,l,t,d){function c(b){return b.contextDep&&e||b.propDep}function n(b){return!c(b)}sa(b,l);var e=t.contextDep,x=l.def(),q=l.def();b.shared.props=q;b.batchId=x;var h=b.scope(),f=b.scope();
l(h.entry,"for(",x,"=0;",x,"<","a1",";++",x,"){",q,"=","a0","[",x,"];",f,"}",h.exit);t.needsContext&&aa(b,f,t.context);t.needsFramebuffer&&za(b,f,t.framebuffer);ma(b,f,t.state,c);t.profile&&c(t.profile)&&Ga(b,f,t,!1,!0);d?(t.useVAO?t.drawVAO?c(t.drawVAO)?f(b.shared.vao,".setVAO(",t.drawVAO.append(b,f),");"):h(b.shared.vao,".setVAO(",t.drawVAO.append(b,h),");"):h(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(h(b.shared.vao,".setVAO(null);"),Da(b,h,t,d.attributes,n),Da(b,f,t,d.attributes,c)),
sb(b,h,t,d.uniforms,n,!1),sb(b,f,t,d.uniforms,c,!0),Ka(b,h,f,t)):(l=b.global.def("{}"),d=t.shader.progVar.append(b,f),q=f.def(d,".id"),h=f.def(l,"[",q,"]"),f(b.shared.gl,".useProgram(",d,".program);","if(!",h,"){",h,"=",l,"[",q,"]=",b.link(function(l){return ea(wa,b,t,l,2)}),"(",d,");}",h,".call(this,a0[",x,"],",x,");"))}function Oa(b,l){function t(b){return b.contextDep&&c||b.propDep}var d=b.proc("batch",2);b.batchId="0";sa(b,d);var c=!1,n=!0;k(l.context).forEach(function(b){c=c||l.context[b].propDep});
c||(aa(b,d,l.context),n=!1);var e=l.framebuffer,x=!1;e?(e.propDep?c=x=!0:e.contextDep&&c&&(x=!0),x||za(b,d,e)):za(b,d,null);l.state.viewport&&l.state.viewport.propDep&&(c=!0);ja(b,d,l);ma(b,d,l.state,function(b){return!t(b)});l.profile&&t(l.profile)||Ga(b,d,l,!1,"a1");l.contextDep=c;l.needsContext=n;l.needsFramebuffer=x;n=l.shader.progVar;if(n.contextDep&&c||n.propDep)Ea(b,d,l,null);else if(n=n.append(b,d),d(b.shared.gl,".useProgram(",n,".program);"),l.shader.program)Ea(b,d,l,l.shader.program);else{d(b.shared.vao,
".setVAO(null);");var e=b.global.def("{}"),x=d.def(n,".id"),q=d.def(e,"[",x,"]");d(b.cond(q).then(q,".call(this,a0,a1);")["else"](q,"=",e,"[",x,"]=",b.link(function(t){return ea(Ea,b,l,t,2)}),"(",n,");",q,".call(this,a0,a1);"))}0<k(l.state).length&&d(b.shared.current,".dirty=true;");b.shared.vao&&d(b.shared.vao,".setVAO(null);")}function vb(b,l){function t(d){var e=l.shader[d];e&&c.set(n.shader,"."+d,e.append(b,c))}var c=b.proc("scope",3);b.batchId="a2";var n=b.shared,e=n.current;aa(b,c,l.context);
l.framebuffer&&l.framebuffer.append(b,c);r(k(l.state)).forEach(function(t){var e=l.state[t].append(b,c);d(e)?e.forEach(function(l,d){c.set(b.next[t],"["+d+"]",l)}):c.set(n.next,"."+t,e)});Ga(b,c,l,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(t){var d=l.draw[t];d&&c.set(n.draw,"."+t,""+d.append(b,c))});k(l.uniforms).forEach(function(t){var d=l.uniforms[t].append(b,c);Array.isArray(d)&&(d="["+d.join()+"]");c.set(n.uniforms,"["+m.id(t)+"]",d)});k(l.attributes).forEach(function(t){var d=
l.attributes[t].append(b,c),n=b.scopeAttrib(t);k(new xa).forEach(function(b){c.set(n,"."+b,d[b])})});l.scopeVAO&&c.set(n.vao,".targetVAO",l.scopeVAO.append(b,c));t("vert");t("frag");0<k(l.state).length&&(c(e,".dirty=true;"),c.exit(e,".dirty=true;"));c("a1(",b.shared.context,",a0,",b.batchId,");")}function ha(b){if("object"===typeof b&&!d(b)){for(var l=k(b),t=0;t<l.length;++t)if(h.isDynamic(b[l[t]]))return!0;return!1}}function Y(b,l,t){function d(b,l){x.forEach(function(t){var d=c[t];h.isDynamic(d)&&
(d=b.invoke(l,d),l(m,".",t,"=",d,";"))})}var c=l["static"][t];if(c&&ha(c)){var n=b.global,x=k(c),q=!1,f=!1,v=!1,m=b.global.def("{}");x.forEach(function(l){var t=c[l];if(h.isDynamic(t))"function"===typeof t&&(t=c[l]=h.unbox(t)),l=e(t,null),q=q||l.thisDep,v=v||l.propDep,f=f||l.contextDep;else{n(m,".",l,"=");switch(typeof t){case "number":n(t);break;case "string":n('"',t,'"');break;case "object":Array.isArray(t)&&n("[",t.join(),"]");break;default:n(b.link(t))}n(";")}});l.dynamic[t]=new h.DynamicVariable(4,
{thisDep:q,contextDep:f,propDep:v,ref:m,append:d});delete l["static"][t]}}var xa=Q.Record,Fa={add:32774,subtract:32778,"reverse subtract":32779};g.ext_blend_minmax&&(Fa.min=32775,Fa.max=32776);var pa=g.angle_instanced_arrays,Ca=g.webgl_draw_buffers,Aa=g.oes_vertex_array_object,ka={dirty:!0,profile:V.profile},ba={},va=[],La={},Ha={};P("dither",3024);P("blend.enable",3042);M("blend.color","blendColor",[0,0,0,0]);M("blend.equation","blendEquationSeparate",[32774,32774]);M("blend.func","blendFuncSeparate",
[1,0,1,0]);P("depth.enable",2929,!0);M("depth.func","depthFunc",513);M("depth.range","depthRange",[0,1]);M("depth.mask","depthMask",!0);M("colorMask","colorMask",[!0,!0,!0,!0]);P("cull.enable",2884);M("cull.face","cullFace",1029);M("frontFace","frontFace",2305);M("lineWidth","lineWidth",1);P("polygonOffset.enable",32823);M("polygonOffset.offset","polygonOffset",[0,0]);P("sample.alpha",32926);P("sample.enable",32928);M("sample.coverage","sampleCoverage",[1,!1]);P("stencil.enable",2960);M("stencil.mask",
"stencilMask",-1);M("stencil.func","stencilFunc",[519,0,-1]);M("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);M("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);P("scissor.enable",3089);M("scissor.box","scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);M("viewport","viewport",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var gb={gl:c,context:W,strings:m,next:ba,current:ka,draw:u,elements:D,buffer:K,shader:Wa,attributes:Q.state,vao:Q,uniforms:Z,framebuffer:t,extensions:g,
timer:da,isBufferArgs:a},fa={primTypes:H,compareFuncs:B,blendFuncs:E,blendEquations:Fa,stencilOps:b,glTypes:w,orientationType:x};p.optional(function(){gb.isArrayLike=d});Ca&&(fa.backBuffer=[1029],fa.drawBuffer=y(I.maxDrawbuffers,function(b){return 0===b?[0]:y(b,function(b){return 36064+b})}));var Gc=0;return{next:ba,current:ka,procs:function(){var b=S(),l=b.proc("poll"),t=b.proc("refresh"),c=b.block();l(c);t(c);var n=b.shared,e=n.gl,x=n.next,q=n.current;c(q,".dirty=false;");za(b,l);za(b,t,null,!0);
var h;pa&&(h=b.link(pa));g.oes_vertex_array_object&&t(b.link(g.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<I.maxAttributes;++f){var v=t.def(n.attributes,"[",f,"]"),m=b.cond(v,".buffer");m.then(e,".enableVertexAttribArray(",f,");",e,".bindBuffer(",34962,",",v,".buffer.buffer);",e,".vertexAttribPointer(",f,",",v,".size,",v,".type,",v,".normalized,",v,".stride,",v,".offset);")["else"](e,".disableVertexAttribArray(",f,");",e,".vertexAttrib4f(",f,",",v,".x,",v,".y,",v,".z,",v,
".w);",v,".buffer=null;");t(m);pa&&t(h,".vertexAttribDivisorANGLE(",f,",",v,".divisor);")}t(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");k(La).forEach(function(d){var n=La[d],h=c.def(x,".",d),f=b.block();f("if(",h,"){",e,".enable(",n,")}else{",e,".disable(",n,")}",q,".",d,"=",h,";");t(f);l("if(",h,"!==",q,".",d,"){",f,"}")});k(Ha).forEach(function(n){var h=Ha[n],f=ka[n],v,m,p=b.block();p(e,".",h,"(");d(f)?(h=f.length,v=b.global.def(x,".",n),m=b.global.def(q,
".",n),p(y(h,function(b){return v+"["+b+"]"}),");",y(h,function(b){return m+"["+b+"]="+v+"["+b+"];"}).join("")),l("if(",y(h,function(b){return v+"["+b+"]!=="+m+"["+b+"]"}).join("||"),"){",p,"}")):(v=c.def(x,".",n),m=c.def(q,".",n),p(v,");",q,".",n,"=",v,";"),l("if(",v,"!==",m,"){",p,"}"));t(p)});return b.compile()}(),compile:function(b,l,t,d,c){var n=S();n.stats=n.link(c);k(l["static"]).forEach(function(b){Y(n,l,b)});G.forEach(function(l){Y(n,b,l)});var e=ua(b,l,t,d,n);na(n,e);vb(n,e);Oa(n,e);return J(n.compile(),
{destroy:function(){e.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(g,u,A){function a(q,f){this.id=e++;this.type=q;this.data=f}function r(e){if(0===e.length)return[];var q=e.charAt(0),f=e.charAt(e.length-1);if(1<e.length&&q===f&&('"'===q||"'"===
q))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(q=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return r(e.substr(0,q.index)).concat(r(q[1])).concat(r(e.substr(q.index+q[0].length)));q=e.split(".");if(1===q.length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];e=[];for(f=0;f<q.length;++f)e=e.concat(r(q[f]));return e}function q(e){return"["+r(e).join("][")+"]"}function v(e,q){if("function"===typeof e)return new a(0,e);if("number"===typeof e||
"boolean"===typeof e)return new a(5,e);if(Array.isArray(e))return new a(6,e.map(function(e,f){return v(e,q+"["+f+"]")}));if(e instanceof a)return e;f(!1,"invalid option type in uniform "+q)}var f=g("./util/check"),e=0;u.exports={DynamicVariable:a,define:function(e,f){return new a(e,q(f+""))},isDynamic:function(e){return"function"===typeof e&&!e._reglType||e instanceof a},unbox:v,accessor:q}},{"./util/check":21}],10:[function(g,u,A){var a=g("./util/check"),r=g("./util/is-typed-array"),q=g("./util/is-ndarray"),
v=g("./util/values"),f=g("./constants/primitives.json"),e=g("./constants/usage.json");u.exports=function(k,p,J,z){function y(c){this.id=h++;d[this.id]=this;this.buffer=c;this.primType=4;this.type=this.vertCount=0}function m(d,c,e,h,f,b,l){d.buffer.bind();var x;c?((x=l)||r(c)&&(!q(c)||r(c.data))||(x=p.oes_element_index_uint?5125:5123),J._initBuffer(d.buffer,c,e,x,3)):(k.bufferData(34963,b,e),d.buffer.dtype=x||5121,d.buffer.usage=e,d.buffer.dimension=3,d.buffer.byteLength=b);x=l;if(!l){switch(d.buffer.dtype){case 5121:case 5120:x=
5121;break;case 5123:case 5122:x=5123;break;case 5125:case 5124:x=5125;break;default:a.raise("unsupported type for element array")}d.buffer.dtype=x}d.type=x;a(5125!==x||!!p.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");c=f;0>c&&(c=d.buffer.byteLength,5123===x?c>>=1:5125===x&&(c>>=2));d.vertCount=c;c=h;0>h&&(c=4,h=d.buffer.dimension,1===h&&(c=0),2===h&&(c=1),3===h&&(c=4));d.primType=c}function c(c){z.elementsCount--;a(null!==c.buffer,"must not double destroy elements");
delete d[c.id];c.buffer.destroy();c.buffer=null}var d={},h=0,H={uint8:5121,uint16:5123};p.oes_element_index_uint&&(H.uint32=5125);y.prototype.bind=function(){this.buffer.bind()};var w=[];return{create:function(d,h){function v(b){if(b)if("number"===typeof b)p(b),w.primType=4,w.vertCount=b|0,w.type=5121;else{var l=null,d=35044,c=-1,h=-1,k=0,z=0;if(Array.isArray(b)||r(b)||q(b))l=b;else if(a.type(b,"object","invalid arguments for elements"),"data"in b&&(l=b.data,a(Array.isArray(l)||r(l)||q(l),"invalid data for element buffer")),
"usage"in b&&(a.parameter(b.usage,e,"invalid element buffer usage"),d=e[b.usage]),"primitive"in b&&(a.parameter(b.primitive,f,"invalid element buffer primitive"),c=f[b.primitive]),"count"in b&&(a("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),h=b.count|0),"type"in b&&(a.parameter(b.type,H,"invalid buffer type"),z=H[b.type]),"length"in b)k=b.length|0;else if(k=h,5123===z||5122===z)k*=2;else if(5125===z||5124===z)k*=4;m(w,l,d,c,h,k,z)}else p(),w.primType=4,w.vertCount=0,
w.type=5121;return v}var p=J.create(null,34963,!0),w=new y(p._buffer);z.elementsCount++;v(d);v._reglType="elements";v._elements=w;v.subdata=function(b,l){p.subdata(b,l);return v};v.destroy=function(){c(w)};return v},createStream:function(d){var c=w.pop();c||(c=new y(J.create(null,34963,!0,!1)._buffer));m(c,d,35040,-1,-1,0,0);return c},destroyStream:function(d){w.push(d)},getElements:function(d){return"function"===typeof d&&d._elements instanceof y?d._elements:null},clear:function(){v(d).forEach(c)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(g,u,A){var a=g("./util/sorted-object-keys"),r=g("./util/check");u.exports=function(q,v){function f(f){r.type(f,"string","extension name must be string");f=f.toLowerCase();var v;try{v=e[f]=q.getExtension(f)}catch(p){}return!!v}for(var e={},k=0;k<v.extensions.length;++k){var p=v.extensions[k];if(!f(p))return v.onDestroy(),v.onDone('"'+p+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}v.optionalExtensions.forEach(f);return{extensions:e,restore:function(){a(e).forEach(function(q){if(e[q]&&!f(q))throw Error("(regl): error restoring extension "+q);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(g,u,A){var a=g("./util/check"),r=g("./util/values"),q=g("./util/extend"),v=[6407,6408],f=[];f[6408]=4;f[6407]=3;var e=[];e[5121]=1;e[5126]=4;e[36193]=2;var k=[32854,32855,36194,35907,34842,34843,34836],p={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};u.exports=function(J,z,y,m,c,d){function h(b,l,d){this.target=b;this.texture=l;this.renderbuffer=d;var c=b=0;l?(b=l.width,c=l.height):d&&(b=d.width,c=d.height);this.width=b;this.height=c}function H(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function w(b,l,d){if(b){if(b.texture){b=b.texture._texture;var c=Math.max(1,b.height);a(Math.max(1,b.width)===l&&c===d,"inconsistent width/height for supplied texture")}else b=
b.renderbuffer._renderbuffer,a(b.width===l&&b.height===d,"inconsistent width/height for renderbuffer");b.refCount+=1}}function g(b,l){l&&(l.texture?J.framebufferTexture2D(36160,b,l.target,l.texture._texture.texture,0):J.framebufferRenderbuffer(36160,b,36161,l.renderbuffer._renderbuffer.renderbuffer))}function G(b){var l=3553,d=null,c=null,n=b;"object"===typeof b&&(n=b.data,"target"in b&&(l=b.target|0));a.type(n,"function","invalid attachment data");b=n._reglType;"texture2d"===b?(d=n,a(3553===l)):
"textureCube"===b?(d=n,a(34069<=l&&34075>l,"invalid cube map target")):"renderbuffer"===b?(c=n,l=36161):a.raise("invalid regl object for attachment");return new h(l,d,c)}function E(b,l,d,n,e){if(d)return b=m.create2D({width:b,height:l,format:n,type:e}),b._texture.refCount=0,new h(3553,b,null);b=c.create({width:b,height:l,format:n});b._renderbuffer.refCount=0;return new h(36161,null,b)}function ta(b){return b&&(b.texture||b.renderbuffer)}function B(b,l,d){b&&(b.texture?b.texture.resize(l,d):b.renderbuffer&&
b.renderbuffer.resize(l,d),b.width=l,b.height=d)}function b(){this.id=D++;n[this.id]=this;this.framebuffer=J.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function l(b){b.colorAttachments.forEach(H);H(b.depthAttachment);H(b.stencilAttachment);H(b.depthStencilAttachment)}function x(b){var l=b.framebuffer;a(l,"must not double destroy framebuffer");J.deleteFramebuffer(l);b.framebuffer=null;d.framebufferCount--;
delete n[b.id]}function R(b){var l;J.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(l=0;l<d.length;++l)g(36064+l,d[l]);for(l=d.length;l<y.maxColorAttachments;++l)J.framebufferTexture2D(36160,36064+l,3553,null,0);J.framebufferTexture2D(36160,33306,3553,null,0);J.framebufferTexture2D(36160,36096,3553,null,0);J.framebufferTexture2D(36160,36128,3553,null,0);g(36096,b.depthAttachment);g(36128,b.stencilAttachment);g(33306,b.depthStencilAttachment);b=J.checkFramebufferStatus(36160);J.isContextLost()||
36053===b||a.raise("framebuffer configuration not supported, status = "+p[b]);J.bindFramebuffer(36160,F.next?F.next.framebuffer:null);F.cur=F.next;J.getError()}function C(t,c){function n(b,t){var d;a(F.next!==h,"can not update framebuffer which is currently in use");var c=0,x=0,q=!0,m=!0;d=null;var p=!0,C="rgba",r="uint8",D=1,H=null,J=null,g=null,B=!1;if("number"===typeof b)c=b|0,x=t|0||c;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(x=b.shape,a(Array.isArray(x)&&
2<=x.length,"invalid shape for framebuffer"),c=x[0],x=x[1]):("radius"in b&&(c=x=b.radius),"width"in b&&(c=b.width),"height"in b&&(x=b.height));if("color"in b||"colors"in b)d=b.color||b.colors,Array.isArray(d)&&a(1===d.length||z.webgl_draw_buffers,"multiple render targets not supported");if(!d){"colorCount"in b&&(D=b.colorCount|0,a(0<D,"invalid color buffer count"));"colorTexture"in b&&(p=!!b.colorTexture,C="rgba4");if("colorType"in b){r=b.colorType;if(p)a(z.oes_texture_float||!("float"===r||"float32"===
r),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(z.oes_texture_half_float||!("half float"===r||"float16"===r),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===r||"float16"===r)a(z.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),C="rgba16f";else if("float"===r||"float32"===r)a(z.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
C="rgba32f";a.oneOf(r,K,"invalid color type")}"colorFormat"in b&&(C=b.colorFormat,0<=ia.indexOf(C)?p=!0:0<=I.indexOf(C)?p=!1:a.optional(function(){if(p)a.oneOf(b.colorFormat,ia,"invalid color format for texture");else a.oneOf(b.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)B=!(!b.depthTexture&&!b.depthStencilTexture),a(!B||z.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?q=b.depth:
(H=b.depth,m=!1));"stencil"in b&&("boolean"===typeof b.stencil?m=b.stencil:(J=b.stencil,q=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?q=m=b.depthStencil:(g=b.depthStencil,m=q=!1))}else c=x=1;var L=null,Z=null,u=null,ua=null;if(Array.isArray(d))L=d.map(G);else if(d)L=[G(d)];else for(L=Array(D),d=0;d<D;++d)L[d]=E(c,x,p,C,r);a(z.webgl_draw_buffers||1>=L.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(L.length<=y.maxColorAttachments,
"too many color attachments, not supported");c=c||L[0].width;x=x||L[0].height;H?Z=G(H):q&&!m&&(Z=E(c,x,B,"depth","uint32"));J?u=G(J):m&&!q&&(u=E(c,x,!1,"stencil","uint8"));g?ua=G(g):!H&&!J&&m&&q&&(ua=E(c,x,B,"depth stencil","depth stencil"));a(1>=!!H+!!J+!!g,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");q=null;for(d=0;d<L.length;++d)w(L[d],c,x),a(!L[d]||L[d].texture&&0<=v.indexOf(L[d].texture._texture.format)||L[d].renderbuffer&&0<=k.indexOf(L[d].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+d+" is invalid"),L[d]&&L[d].texture&&(m=f[L[d].texture._texture.format]*e[L[d].texture._texture.type],null===q?q=m:a(q===m,"all color attachments much have the same number of bits per pixel."));w(Z,c,x);a(!Z||Z.texture&&6402===Z.texture._texture.format||Z.renderbuffer&&33189===Z.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");w(u,c,x);a(!u||u.renderbuffer&&36168===u.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
w(ua,c,x);a(!ua||ua.texture&&34041===ua.texture._texture.format||ua.renderbuffer&&34041===ua.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");l(h);h.width=c;h.height=x;h.colorAttachments=L;h.depthAttachment=Z;h.stencilAttachment=u;h.depthStencilAttachment=ua;n.color=L.map(ta);n.depth=ta(Z);n.stencil=ta(u);n.depthStencil=ta(ua);n.width=h.width;n.height=h.height;R(h);return n}var h=new b;d.framebufferCount++;n(t,c);return q(n,{resize:function(b,l){a(F.next!==
h,"can not resize a framebuffer which is currently in use");var t=Math.max(b|0,1),d=Math.max(l|0||t,1);if(t===h.width&&d===h.height)return n;for(var c=h.colorAttachments,e=0;e<c.length;++e)B(c[e],t,d);B(h.depthAttachment,t,d);B(h.stencilAttachment,t,d);B(h.depthStencilAttachment,t,d);h.width=n.width=t;h.height=n.height=d;R(h);return n},_reglType:"framebuffer",_framebuffer:h,destroy:function(){x(h);l(h)},use:function(b){F.setFBO({framebuffer:n},b)}})}var F={cur:null,next:null,dirty:!1,setFBO:null},
ia=["rgba"],I=["rgba4","rgb565","rgb5 a1"];z.ext_srgb&&I.push("srgba");z.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");z.webgl_color_buffer_float&&I.push("rgba32f");var K=["uint8"];z.oes_texture_half_float&&K.push("half float","float16");z.oes_texture_float&&K.push("float","float32");var D=0,n={};return q(F,{getFramebuffer:function(l){return"function"===typeof l&&"framebuffer"===l._reglType&&(l=l._framebuffer,l instanceof b)?l:null},create:C,createCube:function(b){function l(b){var t;a(0>
d.indexOf(F.next),"can not update framebuffer which is currently in use");var c={color:null},n=0,e=null;t="rgba";var x="uint8",h=1;if("number"===typeof b)n=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(n=b.shape,a(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),a(n[0]===n[1],"cube framebuffer must be square"),n=n[0]):("radius"in b&&(n=b.radius|0),"width"in b?(n=b.width|0,"height"in b&&a(b.height===n,"must be square")):"height"in b&&(n=b.height|0));
if("color"in b||"colors"in b)e=b.color||b.colors,Array.isArray(e)&&a(1===e.length||z.webgl_draw_buffers,"multiple render targets not supported");e||("colorCount"in b&&(h=b.colorCount|0,a(0<h,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,K,"invalid color type"),x=b.colorType),"colorFormat"in b&&(t=b.colorFormat,a.oneOf(b.colorFormat,ia,"invalid color format for texture")));"depth"in b&&(c.depth=b.depth);"stencil"in b&&(c.stencil=b.stencil);"depthStencil"in b&&(c.depthStencil=
b.depthStencil)}else n=1;if(e)if(Array.isArray(e))for(b=[],t=0;t<e.length;++t)b[t]=e[t];else b=[e];else for(b=Array(h),e={radius:n,format:t,type:x},t=0;t<h;++t)b[t]=m.createCube(e);c.color=Array(b.length);for(t=0;t<b.length;++t)h=b[t],a("function"===typeof h&&"textureCube"===h._reglType,"invalid cube map"),n=n||h.width,a(h.width===n&&h.height===n,"invalid cube map shape"),c.color[t]={target:34069,data:b[t]};for(t=0;6>t;++t){for(h=0;h<b.length;++h)c.color[h].target=34069+t;0<t&&(c.depth=d[0].depth,
c.stencil=d[0].stencil,c.depthStencil=d[0].depthStencil);if(d[t])d[t](c);else d[t]=C(c)}return q(l,{width:n,height:n,color:b})}var d=Array(6);l(b);return q(l,{faces:d,resize:function(b){var t=b|0;a(0<t&&t<=y.maxCubeMapSize,"invalid radius for cube fbo");if(t===l.width)return l;var c=l.color;for(b=0;b<c.length;++b)c[b].resize(t);for(b=0;6>b;++b)d[b].resize(t);l.width=l.height=t;return l},_reglType:"framebufferCube",destroy:function(){d.forEach(function(b){b.destroy()})}})},clear:function(){r(n).forEach(x)},
restore:function(){F.cur=null;F.next=null;F.dirty=!0;r(n).forEach(function(b){b.framebuffer=J.createFramebuffer();R(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(g,u,A){var a=g("./util/sorted-object-keys"),r=g("./util/pool");u.exports=function(q,v){var f=1;v.ext_texture_filter_anisotropic&&(f=q.getParameter(34047));var e=1,k=1;v.webgl_draw_buffers&&(e=q.getParameter(34852),k=q.getParameter(36063));var p=!!v.oes_texture_float;if(p){p=q.createTexture();q.bindTexture(3553,
p);q.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var J=q.createFramebuffer();q.bindFramebuffer(36160,J);q.framebufferTexture2D(36160,36064,3553,p,0);q.bindTexture(3553,null);if(36053!==q.checkFramebufferStatus(36160))p=!1;else{q.viewport(0,0,1,1);q.clearColor(1,0,0,1);q.clear(16384);var z=r.allocType(5126,4);q.readPixels(0,0,1,1,6408,5126,z);q.getError()?p=!1:(q.deleteFramebuffer(J),q.deleteTexture(p),p=1===z[0]);r.freeType(z)}}z=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(z=q.createTexture(),J=r.allocType(5121,36),q.activeTexture(33984),q.bindTexture(34067,z),q.texImage2D(34069,0,6408,3,3,0,6408,5121,J),r.freeType(J),q.bindTexture(34067,null),q.deleteTexture(z),z=!q.getError());return{colorBits:[q.getParameter(3410),q.getParameter(3411),q.getParameter(3412),q.getParameter(3413)],depthBits:q.getParameter(3414),stencilBits:q.getParameter(3415),subpixelBits:q.getParameter(3408),extensions:a(v).filter(function(e){return!!v[e]}),
maxAnisotropic:f,maxDrawbuffers:e,maxColorAttachments:k,pointSizeDims:q.getParameter(33901),lineWidthDims:q.getParameter(33902),maxViewportDims:q.getParameter(3386),maxCombinedTextureUnits:q.getParameter(35661),maxCubeMapSize:q.getParameter(34076),maxRenderbufferSize:q.getParameter(34024),maxTextureUnits:q.getParameter(34930),maxTextureSize:q.getParameter(3379),maxAttributes:q.getParameter(34921),maxVertexUniforms:q.getParameter(36347),maxVertexTextureUnits:q.getParameter(35660),maxVaryingVectors:q.getParameter(36348),
maxFragmentUniforms:q.getParameter(36349),glsl:q.getParameter(35724),renderer:q.getParameter(7937),vendor:q.getParameter(7936),version:q.getParameter(7938),readFloat:p,npotTextureCube:z}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(g,u,A){var a=g("./util/check"),r=g("./util/is-typed-array");u.exports=function(q,v,f,e,k,p,J){function z(m){var c;null===v.next?(a(k.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
c=5121):(a(null!==v.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=v.next.colorAttachments[0].texture._texture.type,a.optional(function(){p.oes_texture_float?(a(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&a(J.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var d=0,h=0,H=e.framebufferWidth,w=e.framebufferHeight,z=null;r(m)?z=m:m&&(a.type(m,"object","invalid arguments to regl.read()"),d=m.x|0,h=m.y|0,a(0<=d&&d<e.framebufferWidth,"invalid x offset for regl.read"),a(0<=h&&h<e.framebufferHeight,"invalid y offset for regl.read"),H=(m.width||e.framebufferWidth-d)|0,w=(m.height||e.framebufferHeight-h)|0,z=m.data||null);z&&(5121===c?a(z instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&a(z instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<H&&H+d<=e.framebufferWidth,"invalid width for read pixels");a(0<w&&w+h<=e.framebufferHeight,"invalid height for read pixels");f();m=H*w*4;z||(5121===c?z=new Uint8Array(m):5126===c&&(z=z||new Float32Array(m)));a.isTypedArray(z,"data buffer for regl.read() must be a typedarray");a(z.byteLength>=m,"data buffer for regl.read() too small");q.pixelStorei(3333,4);q.readPixels(d,h,H,w,6408,c,z);return z}function y(e){var c;
v.setFBO({framebuffer:e.framebuffer},function(){c=z(e)});return c}return function(e){return e&&"framebuffer"in e?y(e):z(e)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(g,u,A){var a=g("./util/sorted-object-keys"),r=g("./util/check"),q=g("./util/values"),v=[];v[32854]=2;v[32855]=2;v[36194]=2;v[33189]=2;v[36168]=1;v[34041]=4;v[35907]=4;v[34836]=16;v[34842]=8;v[34843]=6;u.exports=function(f,e,k,p,J){function z(c){this.id=d++;this.refCount=1;this.renderbuffer=c;this.format=32854;this.height=
this.width=0;J.profile&&(this.stats={size:0})}function y(d){var c=d.renderbuffer;r(c,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(c);d.renderbuffer=null;d.refCount=0;delete h[d.id];p.renderbufferCount--}var m={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(m.srgba=35907);e.ext_color_buffer_half_float&&(m.rgba16f=34842,m.rgb16f=34843);e.webgl_color_buffer_float&&(m.rgba32f=34836);var c=[];a(m).forEach(function(d){c[m[d]]=
d});var d=0,h={};z.prototype.decRef=function(){0>=--this.refCount&&y(this)};J.profile&&(p.getTotalRenderbufferSize=function(){var d=0;a(h).forEach(function(c){d+=h[c].stats.size});return d});return{create:function(d,e){function q(d,e){var h=0,b=0,l=32854;"object"===typeof d&&d?("shape"in d?(b=d.shape,r(Array.isArray(b)&&2<=b.length,"invalid renderbuffer shape"),h=b[0]|0,b=b[1]|0):("radius"in d&&(h=b=d.radius|0),"width"in d&&(h=d.width|0),"height"in d&&(b=d.height|0)),"format"in d&&(r.parameter(d.format,
m,"invalid renderbuffer format"),l=m[d.format])):"number"===typeof d?(h=d|0,b="number"===typeof e?e|0:h):d?r.raise("invalid arguments to renderbuffer constructor"):h=b=1;r(0<h&&0<b&&h<=k.maxRenderbufferSize&&b<=k.maxRenderbufferSize,"invalid renderbuffer size");if(h!==a.width||b!==a.height||l!==a.format)return q.width=a.width=h,q.height=a.height=b,a.format=l,f.bindRenderbuffer(36161,a.renderbuffer),f.renderbufferStorage(36161,l,h,b),r(0===f.getError(),"invalid render buffer format"),J.profile&&(a.stats.size=
v[a.format]*a.width*a.height),q.format=c[a.format],q}var a=new z(f.createRenderbuffer());h[a.id]=a;p.renderbufferCount++;q(d,e);q.resize=function(d,c){var e=d|0,b=c|0||e;if(e===a.width&&b===a.height)return q;r(0<e&&0<b&&e<=k.maxRenderbufferSize&&b<=k.maxRenderbufferSize,"invalid renderbuffer size");q.width=a.width=e;q.height=a.height=b;f.bindRenderbuffer(36161,a.renderbuffer);f.renderbufferStorage(36161,a.format,e,b);r(0===f.getError(),"invalid render buffer format");J.profile&&(a.stats.size=v[a.format]*
a.width*a.height);return q};q._reglType="renderbuffer";q._renderbuffer=a;J.profile&&(q.stats=a.stats);q.destroy=function(){a.decRef()};return q},clear:function(){q(h).forEach(y)},restore:function(){q(h).forEach(function(d){d.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,d.renderbuffer);f.renderbufferStorage(36161,d.format,d.width,d.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(g,u,A){var a=g("./util/sorted-object-keys"),
r=g("./util/check"),q=g("./util/extend"),v=g("./util/values");u.exports=function(f,e,k,p){function J(d,c,e,q){this.name=d;this.id=c;this.location=e;this.info=q}function z(d,c){for(var e=0;e<d.length;++e)if(d[e].id===c.id){d[e].location=c.location;return}d.push(c)}function y(c,q,v){var m=35632===c?d:h,b=m[q];if(!b){var l=e.str(q),b=f.createShader(c);f.shaderSource(b,l);f.compileShader(b);r.shaderError(f,b,l,c,v);m[q]=b}return b}function m(d,c){this.id=g++;this.fragId=d;this.vertId=c;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;p.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function c(d,c,q){var h;h=y(35632,d.fragId);var b=y(35633,d.vertId),l=d.program=f.createProgram();f.attachShader(l,h);f.attachShader(l,b);if(q)for(h=0;h<q.length;++h)b=q[h],f.bindAttribLocation(l,b[0],b[1]);f.linkProgram(l);r.linkError(f,l,e.str(d.fragId),e.str(d.vertId),c);q=f.getProgramParameter(l,35718);p.profile&&(d.stats.uniformsCount=q);b=d.uniforms;for(h=0;h<q;++h)if(c=f.getActiveUniform(l,
h))if(1<c.size)for(var x=0;x<c.size;++x){var v=c.name.replace("[0]","["+x+"]");z(b,new J(v,e.id(v),f.getUniformLocation(l,v),c))}else z(b,new J(c.name,e.id(c.name),f.getUniformLocation(l,c.name),c));q=f.getProgramParameter(l,35721);p.profile&&(d.stats.attributesCount=q);d=d.attributes;for(h=0;h<q;++h)(c=f.getActiveAttrib(l,h))&&z(d,new J(c.name,e.id(c.name),f.getAttribLocation(l,c.name),c))}var d={},h={},H={},w=[],g=0;p.profile&&(k.getMaxUniformsCount=function(){var d=0;w.forEach(function(c){c.stats.uniformsCount>
d&&(d=c.stats.uniformsCount)});return d},k.getMaxAttributesCount=function(){var d=0;w.forEach(function(c){c.stats.attributesCount>d&&(d=c.stats.attributesCount)});return d});return{clear:function(){var c=f.deleteShader.bind(f);v(d).forEach(c);d={};v(h).forEach(c);h={};w.forEach(function(d){f.deleteProgram(d.program)});w.length=0;H={};k.shaderCount=0},program:function(e,v,p,z){r.command(0<=e,"missing vertex shader",p);r.command(0<=v,"missing fragment shader",p);var b=H[v];b||(b=H[v]={});var l=b[e];
if(l&&(l.refCount++,!z))return l;var x=new m(v,e);k.shaderCount++;c(x,p,z);l||(b[e]=x);w.push(x);return q(x,{destroy:function(){x.refCount--;if(0>=x.refCount){f.deleteProgram(x.program);var l=w.indexOf(x);w.splice(l,1);k.shaderCount--}0>=b[x.vertId].refCount&&(f.deleteShader(h[x.vertId]),delete h[x.vertId],delete H[x.fragId][x.vertId]);a(H[x.fragId]).length||(f.deleteShader(d[x.fragId]),delete d[x.fragId],delete H[x.fragId])}})},restore:function(){d={};h={};for(var e=0;e<w.length;++e)c(w[e],null,
w[e].attributes.map(function(d){return[d.location,d.name]}))},shader:y,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(g,u,A){u.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(g,u,A){u.exports=function(){var a={"":0},r=[""];return{id:function(q){var v=a[q];if(v)return v;v=a[q]=r.length;r.push(q);
return v},str:function(q){return r[q]}}}},{}],19:[function(g,u,A){function a(b){return"[object "+b+"]"}function r(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function q(b){return Array.isArray(b)&&0!==b.length&&H(b[0])?!0:!1}function v(b){return Object.prototype.toString.call(b)}function f(b){if(!b)return!1;var l=v(b);return 0<=ia.indexOf(l)?!0:r(b)||q(b)||c(b)}function e(b,l){36193===b.type?(b.data=h(l),d.freeType(l)):b.data=l}function k(b,l,d,c,e,x){b="undefined"!==typeof K[b]?
K[b]:B[b]*I[l];x&&(b*=6);if(e){for(c=0;1<=d;)c+=b*d*d,d/=2;return c}return b*d*c}var p=g("./util/sorted-object-keys"),J=g("./util/check"),z=g("./util/extend"),y=g("./util/values"),m=g("./util/is-typed-array"),c=g("./util/is-ndarray"),d=g("./util/pool"),h=g("./util/to-half-float"),H=g("./util/is-array-like"),w=g("./util/flatten"),L=g("./util/is-pow2");A=g("./constants/arraytypes.json");var G=g("./constants/arraytypes.json"),E=[9984,9986,9985,9987],ta=[0,6409,6410,6407,6408],B={};B[6409]=B[6406]=B[6402]=
1;B[34041]=B[6410]=2;B[6407]=B[35904]=3;B[6408]=B[35906]=4;var b=a("HTMLCanvasElement"),l=a("OffscreenCanvas"),x=a("CanvasRenderingContext2D"),R=a("ImageBitmap"),C=a("HTMLImageElement"),F=a("HTMLVideoElement"),ia=p(A).concat([b,l,x,R,C,F]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var K=[];K[32854]=2;K[32855]=2;K[36194]=2;K[34041]=4;K[33776]=.5;K[33777]=.5;K[33778]=1;K[33779]=1;K[35986]=.5;K[35987]=1;K[34798]=1;K[35840]=.5;K[35841]=.25;K[35842]=.5;K[35843]=.25;K[36196]=.5;u.exports=
function(D,n,t,a,I,g,K){function W(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ia(b,l){b.internalformat=l.internalformat;b.format=l.format;b.type=l.type;b.compressed=l.compressed;b.premultiplyAlpha=l.premultiplyAlpha;b.flipY=l.flipY;b.unpackAlignment=l.unpackAlignment;b.colorSpace=l.colorSpace;b.width=l.width;b.height=l.height;b.channels=l.channels}
function V(b,l){if("object"===typeof l&&l){"premultiplyAlpha"in l&&(J.type(l.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=l.premultiplyAlpha);"flipY"in l&&(J.type(l.flipY,"boolean","invalid texture flip"),b.flipY=l.flipY);"alignment"in l&&(J.oneOf(l.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=l.alignment);"colorSpace"in l&&(J.parameter(l.colorSpace,Ka,"invalid colorSpace"),b.colorSpace=Ka[l.colorSpace]);if("type"in l){var d=l.type;J(n.oes_texture_float||
!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");J(n.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");J(n.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");J.parameter(d,ea,"invalid texture type");b.type=
ea[d]}var c=b.width,e=b.height,x=b.channels,d=!1;"shape"in l?(J(Array.isArray(l.shape)&&2<=l.shape.length,"shape must be an array"),c=l.shape[0],e=l.shape[1],3===l.shape.length&&(x=l.shape[2],J(0<x&&4>=x,"invalid number of channels"),d=!0),J(0<=c&&c<=t.maxTextureSize,"invalid width"),J(0<=e&&e<=t.maxTextureSize,"invalid height")):("radius"in l&&(c=e=l.radius,J(0<=c&&c<=t.maxTextureSize,"invalid radius")),"width"in l&&(c=l.width,J(0<=c&&c<=t.maxTextureSize,"invalid width")),"height"in l&&(e=l.height,
J(0<=e&&e<=t.maxTextureSize,"invalid height")),"channels"in l&&(x=l.channels,J(0<x&&4>=x,"invalid number of channels"),d=!0));b.width=c|0;b.height=e|0;b.channels=x|0;c=!1;"format"in l&&(c=l.format,J(n.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),J.parameter(c,ca,"invalid texture format"),e=b.internalformat=ca[c],b.format=Fa[e],c in ea&&!("type"in l)&&(b.type=ea[c]),c in na&&(b.compressed=!0),c=
!0);!d&&c?b.channels=B[b.format]:d&&!c?b.channels!==ta[b.format]&&(b.format=b.internalformat=ta[b.channels]):c&&d&&J(b.channels===B[b.format],"number of channels inconsistent with specified format")}}function T(b){D.pixelStorei(37440,b.flipY);D.pixelStorei(37441,b.premultiplyAlpha);D.pixelStorei(37443,b.colorSpace);D.pixelStorei(3317,b.unpackAlignment)}function P(){W.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function M(n,p){var k=null;
f(p)?k=p:p&&(J.type(p,"object","invalid pixel data type"),V(n,p),"x"in p&&(n.xOffset=p.x|0),"y"in p&&(n.yOffset=p.y|0),f(p.data)&&(k=p.data));J(!n.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(p.copy){J(!k,"can not specify copy and data field for the same texture");var D=I.viewportWidth,z=I.viewportHeight;n.width=n.width||D-n.xOffset;n.height=n.height||z-n.yOffset;n.needsCopy=!0;J(0<=n.xOffset&&n.xOffset<D&&0<=n.yOffset&&n.yOffset<z&&0<n.width&&n.width<=
D&&0<n.height&&n.height<=z,"copy texture read out of bounds")}else if(!k)n.width=n.width||1,n.height=n.height||1,n.channels=n.channels||4;else if(m(k))n.channels=n.channels||4,n.data=k,"type"in p||5121!==n.type||(n.type=G[Object.prototype.toString.call(k)]|0);else if(r(k)){n.channels=n.channels||4;D=k;z=D.length;switch(n.type){case 5121:case 5123:case 5125:case 5126:z=d.allocType(n.type,z);z.set(D);n.data=z;break;case 36193:n.data=h(D);break;default:J.raise("unsupported texture type, must specify a typed array")}n.alignment=
1;n.needsFree=!0}else if(c(k)){D=k.data;Array.isArray(D)||5121!==n.type||(n.type=G[Object.prototype.toString.call(D)]|0);var z=k.shape,a=k.stride,y,g,L,B;3===z.length?(L=z[2],B=a[2]):(J(2===z.length,"invalid ndarray pixel data, must be 2 or 3D"),B=L=1);y=z[0];g=z[1];z=a[0];a=a[1];n.alignment=1;n.width=y;n.height=g;n.channels=L;n.format=n.internalformat=ta[L];n.needsFree=!0;y=B;k=k.offset;L=n.width;B=n.height;g=n.channels;for(var Z=d.allocType(36193===n.type?5126:n.type,L*B*g),M=0,O=0;O<B;++O)for(var ea=
0;ea<L;++ea)for(var ca=0;ca<g;++ca)Z[M++]=D[z*ea+a*O+y*ca+k];e(n,Z)}else if(v(k)===b||v(k)===l||v(k)===x)v(k)===b||v(k)===l?n.element=k:n.element=k.canvas,n.width=n.element.width,n.height=n.element.height,n.channels=4;else if(v(k)===R)n.element=k,n.width=k.width,n.height=k.height,n.channels=4;else if(v(k)===C)n.element=k,n.width=k.naturalWidth,n.height=k.naturalHeight,n.channels=4;else if(v(k)===F)n.element=k,n.width=k.videoWidth,n.height=k.videoHeight,n.channels=4;else if(q(k)){D=n.width||k[0].length;
z=n.height||k.length;a=n.channels;a=H(k[0][0])?a||k[0][0].length:a||1;y=w.shape(k);L=1;for(B=0;B<y.length;++B)L*=y[B];L=d.allocType(36193===n.type?5126:n.type,L);w.flatten(k,y,"",L);e(n,L);n.alignment=1;n.width=D;n.height=z;n.channels=a;n.format=n.internalformat=ta[a];n.needsFree=!0}5126===n.type?J(0<=t.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===n.type&&J(0<=t.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function u(b,l,d,c,t){var n=b.element,e=b.data,x=b.internalformat,q=b.format,h=b.type,f=b.width,v=b.height;T(b);n?D.texSubImage2D(l,t,d,c,q,h,n):b.compressed?D.compressedTexSubImage2D(l,t,d,c,x,f,v,e):b.needsCopy?(a(),D.copyTexSubImage2D(l,t,d,c,b.xOffset,b.yOffset,f,v)):D.texSubImage2D(l,t,d,c,f,v,q,h,e)}function U(){return pa.pop()||new P}function qa(b){b.needsFree&&d.freeType(b.data);P.call(b);pa.push(b)}function A(){W.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function O(b,l,d){var c=b.images[0]=U();b.mipmask=1;c.width=b.width=l;c.height=b.height=d;c.channels=b.channels=4}function N(b,l){var d=null;if(f(l))d=b.images[0]=U(),ia(d,b),M(d,l),b.mipmask=1;else if(V(b,l),Array.isArray(l.mipmap))for(var c=l.mipmap,t=0;t<c.length;++t)d=b.images[t]=U(),ia(d,b),d.width>>=t,d.height>>=t,M(d,c[t]),b.mipmask|=1<<t;else d=b.images[0]=U(),ia(d,b),M(d,l),b.mipmask=1;ia(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==
b.internalformat&&33779!==b.internalformat||J(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ga(b,l){for(var d=b.images,c=0;c<d.length&&d[c];++c){var t=d[c],n=l,e=c,x=t.element,q=t.data,h=t.internalformat,f=t.format,v=t.type,m=t.width,p=t.height;T(t);x?D.texImage2D(n,e,f,f,v,x):t.compressed?D.compressedTexImage2D(n,e,h,m,p,0,q):t.needsCopy?(a(),D.copyTexImage2D(n,e,f,t.xOffset,t.yOffset,m,p,0)):D.texImage2D(n,
e,f,m,p,0,f,v,q||null)}}function X(){var b=Ca.pop()||new A;W.call(b);for(var l=b.mipmask=0;16>l;++l)b.images[l]=null;return b}function la(b){for(var l=b.images,d=0;d<l.length;++d)l[d]&&qa(l[d]),l[d]=null;Ca.push(b)}function oa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ya(b,l){if("min"in l){var d=l.min;J.parameter(d,sb);b.minFilter=sb[d];0<=E.indexOf(b.minFilter)&&!("faces"in l)&&(b.genMipmaps=!0)}"mag"in l&&
(d=l.mag,J.parameter(d,Da),b.magFilter=Da[d]);var d=b.wrapS,c=b.wrapT;if("wrap"in l){var n=l.wrap;"string"===typeof n?(J.parameter(n,Ga),d=c=Ga[n]):Array.isArray(n)&&(J.parameter(n[0],Ga),J.parameter(n[1],Ga),d=Ga[n[0]],c=Ga[n[1]])}else"wrapS"in l&&(d=l.wrapS,J.parameter(d,Ga),d=Ga[d]),"wrapT"in l&&(c=l.wrapT,J.parameter(c,Ga),c=Ga[c]);b.wrapS=d;b.wrapT=c;"anisotropic"in l&&(d=l.anisotropic,J("number"===typeof d&&1<=d&&d<=t.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=l.anisotropic);
if("mipmap"in l){d=!1;switch(typeof l.mipmap){case "string":J.parameter(l.mipmap,sa,"invalid mipmap hint");b.mipmapHint=sa[l.mipmap];d=b.genMipmaps=!0;break;case "boolean":d=b.genMipmaps=l.mipmap;break;case "object":J(Array.isArray(l.mipmap),"invalid mipmap type");b.genMipmaps=!1;d=!0;break;default:J.raise("invalid mipmap type")}!d||"min"in l||(b.minFilter=9984)}}function ua(b,l){D.texParameteri(l,10241,b.minFilter);D.texParameteri(l,10240,b.magFilter);D.texParameteri(l,10242,b.wrapS);D.texParameteri(l,
10243,b.wrapT);n.ext_texture_filter_anisotropic&&D.texParameteri(l,34046,b.anisotropic);b.genMipmaps&&(D.hint(33170,b.mipmapHint),D.generateMipmap(l))}function aa(b){W.call(this);this.mipmask=0;this.internalformat=6408;this.id=Aa++;this.refCount=1;this.target=b;this.texture=D.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new oa;K.profile&&(this.stats={size:0})}function za(b){D.activeTexture(33984);D.bindTexture(b.target,b.texture)}function ja(){var b=va[0];b?D.bindTexture(b.target,b.texture):
D.bindTexture(3553,null)}function ma(b){var l=b.texture;J(l,"must not double destroy texture");var d=b.unit,c=b.target;0<=d&&(D.activeTexture(33984+d),D.bindTexture(c,null),va[d]=null);D.deleteTexture(l);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ka[b.id];g.textureCount--}var sa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ga={repeat:10497,clamp:33071,mirror:33648},Da={nearest:9728,linear:9729},sb=z({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},Da),Ka={none:0,browser:37444},ea={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ca={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},na={};n.ext_srgb&&(ca.srgb=35904,ca.srgba=35906);n.oes_texture_float&&(ea.float32=ea["float"]=5126);n.oes_texture_half_float&&(ea.float16=ea["half float"]=36193);n.webgl_depth_texture&&(z(ca,{depth:6402,"depth stencil":34041}),z(ea,{uint16:5123,
uint32:5125,"depth stencil":34042}));n.webgl_compressed_texture_s3tc&&z(na,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});n.webgl_compressed_texture_atc&&z(na,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});n.webgl_compressed_texture_pvrtc&&z(na,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});n.webgl_compressed_texture_etc1&&(na["rgb etc1"]=36196);var wa=Array.prototype.slice.call(D.getParameter(34467));
p(na).forEach(function(b){var l=na[b];0<=wa.indexOf(l)&&(ca[b]=l)});var Ea=p(ca);t.textureFormats=Ea;var Oa=[];p(ca).forEach(function(b){Oa[ca[b]]=b});var vb=[];p(ea).forEach(function(b){vb[ea[b]]=b});var ha=[];p(Da).forEach(function(b){ha[Da[b]]=b});var Y=[];p(sb).forEach(function(b){Y[sb[b]]=b});var xa=[];p(Ga).forEach(function(b){xa[Ga[b]]=b});var Fa=Ea.reduce(function(b,l){var d=ca[l];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||n.ext_srgb&&(35904===d||35906===d)?b[d]=d:32855===
d||0<=l.indexOf("rgba")?b[d]=6408:b[d]=6407;return b},{}),pa=[],Ca=[],Aa=0,ka={},ba=t.maxTextureUnits,va=Array(ba).map(function(){return null});z(aa.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var l=0;l<ba;++l){var d=va[l];if(d){if(0<d.bindCount)continue;d.unit=-1}va[l]=this;b=l;break}b>=ba&&J.raise("insufficient number of texture units");K.profile&&g.maxTextureUnits<b+1&&(g.maxTextureUnits=b+1);this.unit=b;D.activeTexture(33984+b);D.bindTexture(this.target,this.texture)}return b},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ma(this)}});K.profile&&(g.getTotalTextureSize=function(){var b=0;p(ka).forEach(function(l){b+=ka[l].stats.size});return b});return{create2D:function(b,l){function d(b,l){var n=c.texInfo;oa.call(n);var e=X();"number"===typeof b?"number"===typeof l?O(e,b|0,l|0):O(e,b|0,b|0):b?(J.type(b,"object","invalid arguments to regl.texture"),ya(n,b),N(e,b)):O(e,1,1);n.genMipmaps&&(e.mipmask=(e.width<<1)-1);c.mipmask=e.mipmask;ia(c,e);J.texture2D(n,
e,t);c.internalformat=e.internalformat;d.width=e.width;d.height=e.height;za(c);ga(e,3553);ua(n,3553);ja();la(e);K.profile&&(c.stats.size=k(c.internalformat,c.type,e.width,e.height,n.genMipmaps,!1));d.format=Oa[c.internalformat];d.type=vb[c.type];d.mag=ha[n.magFilter];d.min=Y[n.minFilter];d.wrapS=xa[n.wrapS];d.wrapT=xa[n.wrapT];return d}var c=new aa(3553);ka[c.id]=c;g.textureCount++;d(b,l);d.subimage=function(b,l,t,n){J(!!b,"must specify image data");l|=0;t|=0;n|=0;var e=U();ia(e,c);e.width=0;e.height=
0;M(e,b);e.width=e.width||(c.width>>n)-l;e.height=e.height||(c.height>>n)-t;J(c.type===e.type&&c.format===e.format&&c.internalformat===e.internalformat,"incompatible format for texture.subimage");J(0<=l&&0<=t&&l+e.width<=c.width&&t+e.height<=c.height,"texture.subimage write out of bounds");J(c.mipmask&1<<n,"missing mipmap data");J(e.data||e.element||e.needsCopy,"missing image data");za(c);u(e,3553,l,t,n);ja();qa(e);return d};d.resize=function(b,l){var t=b|0,n=l|0||t;if(t===c.width&&n===c.height)return d;
d.width=c.width=t;d.height=c.height=n;za(c);for(var e=0;c.mipmask>>e;++e){var x=t>>e,q=n>>e;if(!x||!q)break;D.texImage2D(3553,e,c.format,x,q,0,c.format,c.type,null)}ja();K.profile&&(c.stats.size=k(c.internalformat,c.type,t,n,!1,!1));return d};d._reglType="texture2d";d._texture=c;K.profile&&(d.stats=c.stats);d.destroy=function(){c.decRef()};return d},createCube:function(b,l,d,c,n,e){function x(b,l,d,c,n,e){var f,v=q.texInfo;oa.call(v);for(f=0;6>f;++f)h[f]=X();if("number"!==typeof b&&b)if("object"===
typeof b)if(l)N(h[0],b),N(h[1],l),N(h[2],d),N(h[3],c),N(h[4],n),N(h[5],e);else if(ya(v,b),V(q,b),"faces"in b)for(b=b.faces,J(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),f=0;6>f;++f)J("object"===typeof b[f]&&!!b[f],"invalid input for cube map face"),ia(h[f],q),N(h[f],b[f]);else for(f=0;6>f;++f)N(h[f],b);else J.raise("invalid arguments to cube map");else for(b=b|0||1,f=0;6>f;++f)O(h[f],b,b);ia(q,h[0]);J.optional(function(){t.npotTextureCube||J(L(q.width)&&L(q.height),"your browser does not support non power or two texture dimensions")});
q.mipmask=v.genMipmaps?(h[0].width<<1)-1:h[0].mipmask;J.textureCube(q,v,h,t);q.internalformat=h[0].internalformat;x.width=h[0].width;x.height=h[0].height;za(q);for(f=0;6>f;++f)ga(h[f],34069+f);ua(v,34067);ja();K.profile&&(q.stats.size=k(q.internalformat,q.type,x.width,x.height,v.genMipmaps,!0));x.format=Oa[q.internalformat];x.type=vb[q.type];x.mag=ha[v.magFilter];x.min=Y[v.minFilter];x.wrapS=xa[v.wrapS];x.wrapT=xa[v.wrapT];for(f=0;6>f;++f)la(h[f]);return x}var q=new aa(34067);ka[q.id]=q;g.cubeCount++;
var h=Array(6);x(b,l,d,c,n,e);x.subimage=function(b,l,d,c,t){J(!!l,"must specify image data");J("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");d|=0;c|=0;t|=0;var n=U();ia(n,q);n.width=0;n.height=0;M(n,l);n.width=n.width||(q.width>>t)-d;n.height=n.height||(q.height>>t)-c;J(q.type===n.type&&q.format===n.format&&q.internalformat===n.internalformat,"incompatible format for texture.subimage");J(0<=d&&0<=c&&d+n.width<=q.width&&c+n.height<=q.height,"texture.subimage write out of bounds");J(q.mipmask&
1<<t,"missing mipmap data");J(n.data||n.element||n.needsCopy,"missing image data");za(q);u(n,34069+b,d,c,t);ja();qa(n);return x};x.resize=function(b){b|=0;if(b!==q.width){x.width=q.width=b;x.height=q.height=b;za(q);for(var l=0;6>l;++l)for(var d=0;q.mipmask>>d;++d)D.texImage2D(34069+l,d,q.format,b>>d,b>>d,0,q.format,q.type,null);ja();K.profile&&(q.stats.size=k(q.internalformat,q.type,x.width,x.height,!1,!0));return x}};x._reglType="textureCube";x._texture=q;K.profile&&(x.stats=q.stats);x.destroy=function(){q.decRef()};
return x},clear:function(){for(var b=0;b<ba;++b)D.activeTexture(33984+b),D.bindTexture(3553,null),va[b]=null;y(ka).forEach(ma);g.cubeCount=0;g.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<ba;++b){var l=va[b];l&&(l.bindCount=0,l.unit=-1,va[b]=null)}y(ka).forEach(function(b){b.texture=D.createTexture();D.bindTexture(b.target,b.texture);for(var l=0;32>l;++l)if(0!==(b.mipmask&1<<l))if(3553===b.target)D.texImage2D(3553,l,b.internalformat,b.width>>l,b.height>>l,0,
b.internalformat,b.type,null);else for(var d=0;6>d;++d)D.texImage2D(34069+d,l,b.internalformat,b.width>>l,b.height>>l,0,b.internalformat,b.type,null);ua(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<ba;++b){var l=va[b];l&&(l.bindCount=0,l.unit=-1,va[b]=null);D.activeTexture(33984+b);D.bindTexture(3553,null);D.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,
"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(g,u,A){u.exports=function(a,r){function q(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function v(e,f,c){var d=k.pop()||new q;d.startQueryIndex=e;d.endQueryIndex=f;d.sum=0;d.stats=c;p.push(d)}if(!r.ext_disjoint_timer_query)return null;var f=[],e=[],k=[],p=[],J=[],z=[];return{beginQuery:function(q){var m=f.pop()||r.ext_disjoint_timer_query.createQueryEXT();
r.ext_disjoint_timer_query.beginQueryEXT(35007,m);e.push(m);v(e.length-1,e.length,q)},endQuery:function(){r.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:v,update:function(){var q,v;q=e.length;if(0!==q){z.length=Math.max(z.length,q+1);J.length=Math.max(J.length,q+1);J[0]=0;var c=z[0]=0;for(v=q=0;v<e.length;++v){var d=e[v];r.ext_disjoint_timer_query.getQueryObjectEXT(d,34919)?(c+=r.ext_disjoint_timer_query.getQueryObjectEXT(d,34918),f.push(d)):e[q++]=d;J[v+1]=c;z[v+1]=q}e.length=q;for(v=
q=0;v<p.length;++v){var c=p[v],h=c.startQueryIndex,d=c.endQueryIndex;c.sum+=J[d]-J[h];h=z[h];d=z[d];d===h?(c.stats.gpuTime+=c.sum/1E6,k.push(c)):(c.startQueryIndex=h,c.endQueryIndex=d,p[q++]=c)}p.length=q}},getNumPendingQueries:function(){return e.length},clear:function(){f.push.apply(f,e);for(var q=0;q<f.length;q++)r.ext_disjoint_timer_query.deleteQueryEXT(f[q]);e.length=0;f.length=0},restore:function(){e.length=0;f.length=0}}}},{}],21:[function(g,u,A){function a(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function r(b){b=Error("(regl) "+b);console.error(b);throw b;}function q(b,d){b||r(d)}function v(b){return b?": "+b:""}function f(b,d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function e(b,d,c){0>d.indexOf(b)&&r("invalid value"+
v(c)+". must be one of: "+d)}function k(b,d){for(b+="";b.length<d;)b=" "+b;return b}function p(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function J(b,d){this.number=b;this.line=d;this.errors=[]}function z(b,d,c){this.file=b;this.line=d;this.message=c}function y(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function m(){var b=Error(),b=(b.stack||b).toString(),
d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function c(b,d){var c=b.split("\n"),e=1,q=0,h={unknown:new p,0:new p};h.unknown.name=h[0].name=d||y();h.unknown.lines.push(new J(0,""));for(var f=0;f<c.length;++f){var v=c[f],m=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(v);if(m)switch(m[1]){case "line":if(m=/(\d+)(\s+\d+)?/.exec(m[2]))e=m[1]|0,m[2]&&(q=m[2]|0,q in h||(h[q]=new p));break;case "define":if(m=/SHADER_NAME(_B64)?\s+(.*)$/.exec(m[2]))h[q].name=
m[1]?a(m[2]):m[2]}h[q].lines.push(new J(e++,v))}E(h).forEach(function(b){var l=h[b];l.lines.forEach(function(b){l.index[b.number]=b})});return h}function d(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var l=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);l?d.push(new z(l[1]|0,l[2]|0,l[3].trim())):0<b.length&&d.push(new z("unknown",0,b))}});return d}function h(b,d){d.forEach(function(d){var c=b[d.file];if(c){var e=c.index[d.line];if(e){e.errors.push(d);c.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(d)})}function H(b){b._commandRef=y()}function w(b,d){var c=m();r(b+" in command "+(d||y())+("unknown"===c?"":" called from "+c))}function L(b,d,c,e){f(b,d)||w("invalid parameter type"+v(c)+". expected "+d+", got "+typeof b,e||y())}function G(l,d){return 32820===l||32819===l||33635===l?2:34042===l?4:b[l]*d}var E=g("./sorted-object-keys"),ta=g("./is-typed-array");g=g("./extend");var B="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
b={};b[5120]=b[5121]=1;b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2;b[5124]=b[5125]=b[5126]=b[34042]=4;u.exports=g(q,{optional:function(b){b()},raise:r,commandRaise:w,command:function(b,d,c){b||w(d,c||y())},parameter:function(b,d,c){b in d||r("unknown parameter ("+b+")"+v(c)+". possible values: "+E(d).join())},commandParameter:function(b,d,c,e){b in d||w("unknown parameter ("+b+")"+v(c)+". possible values: "+E(d).join(),e||y())},constructor:function(b){E(b).forEach(function(b){0>B.indexOf(b)&&
r('invalid regl constructor argument "'+b+'". must be one of '+B)})},type:function(b,d,c){f(b,d)||r("invalid parameter type"+v(c)+". expected "+d+", got "+typeof b)},commandType:L,isTypedArray:function(b,d){ta(b)||r("invalid parameter type"+v(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||r("invalid parameter type, ("+b+")"+v(d)+". must be a nonnegative integer")},oneOf:e,shaderError:function(b,e,f,v,m){if(!b.getShaderParameter(e,b.COMPILE_STATUS)){e=b.getShaderInfoLog(e);b=v===
b.FRAGMENT_SHADER?"fragment":"vertex";L(f,"string",b+" shader source must be a string",m);var p=c(f,m);f=d(e);h(p,f);E(p).forEach(function(b){function l(b,d){c.push(b);t.push(d||"")}var d=p[b];if(d.hasErrors){var c=[""],t=[""];l("file number "+b+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(b){if(0<b.errors.length){l(k(b.number,4)+"|  ","background-color:yellow; font-weight:bold");l(b.line+"\n","color:red; background-color:yellow; font-weight:bold");
var d=0;b.errors.forEach(function(c){c=c.message;var t=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(t){var n=t[1];c=t[2];switch(n){case "assign":n="="}d=Math.max(b.line.indexOf(n,d),0)}else d=0;l(k("| ",6));l(k("^^^",d+3)+"\n","font-weight:bold");l(k("| ",6));l(c+"\n","font-weight:bold")});l(k("| ",6)+"\n")}else l(k(b.number,4)+"|  "),l(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(c.join("")):(t[0]=c.join("%c"),console.log.apply(console,t))}});q.raise("Error compiling "+
b+" shader, "+p[0].name)}},linkError:function(b,d,e,h,f){b.getProgramParameter(d,b.LINK_STATUS)||(b=b.getProgramInfoLog(d),e=c(e,f),h='Error linking program with vertex shader, "'+c(h,f)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(h+"\n"+b),q.raise(h))},callSite:m,saveCommandRef:H,saveDrawInfo:function(b,d,c,e){function q(b){return b?e.id(b):0}function h(b,
l){E(l).forEach(function(l){b[e.id(l)]=!0})}H(b);b._fragId=q(b["static"].frag);b._vertId=q(b["static"].vert);var f=b._uniformSet={};h(f,d["static"]);h(f,d.dynamic);d=b._attributeSet={};h(d,c["static"]);h(d,c.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,d,c){b.texture?e(b.texture._texture.internalformat,d,"unsupported texture format for attachment"):e(b.renderbuffer._renderbuffer.format,c,"unsupported renderbuffer format for attachment")},
guessCommand:y,texture2D:function(b,d,c){var e=d.width,h=d.height,f=d.channels;q(0<e&&e<=c.maxTextureSize&&0<h&&h<=c.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||q(!(e&e-1)&&!!e&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==e&&1!==h&&q(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(q(!(e&e-1)&&!!e&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),
q(d.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&q(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),q(!b.genMipmaps,"mipmap generation not supported with float textures"));var v=d.images;for(c=0;16>c;++c)if(v[c]){var m=e>>c,p=h>>c;q(d.mipmask&1<<c,"missing mipmap data");var n=v[c];q(n.width===m&&n.height===p,"invalid shape for mip images");q(n.format===d.format&&n.internalformat===
d.internalformat&&n.type===d.type,"incompatible type for mip image");!n.compressed&&n.data&&(m=Math.ceil(G(n.type,f)*m/n.unpackAlignment)*n.unpackAlignment,q(n.data.byteLength===m*p,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||q(0===(d.mipmask&1<<c),"extra mipmap data");d.compressed&&q(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,d,c,e){var h=b.width,f=b.height,v=b.channels;q(0<h&&h<=e.maxTextureSize&&
0<f&&f<=e.maxTextureSize,"invalid texture shape");q(h===f,"cube map must be square");q(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(e=0;e<c.length;++e){var m=c[e];q(m.width===h&&m.height===f,"inconsistent cube map face shape");d.genMipmaps&&(q(!m.compressed,"can not generate mipmap for compressed textures"),q(1===m.mipmask,"can not specify mipmaps and generate mipmaps"));for(var p=m.images,n=0;16>n;++n){var t=p[n];if(t){var k=h>>n,w=f>>n;q(m.mipmask&1<<n,"missing mipmap data");
q(t.width===k&&t.height===w,"invalid shape for mip images");q(t.format===b.format&&t.internalformat===b.internalformat&&t.type===b.type,"incompatible type for mip image");t.compressed||t.data&&q(t.data.byteLength===k*w*Math.max(G(t.type,v),t.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(g,u,A){u.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(g,u,A){function a(q){return Array.prototype.slice.call(q)}function r(q){return a(q).join("")}var q=g("./extend"),v=g("./compiled-fns");u.exports=function(){function f(){var e=[],c=[];return q(function(){e.push.apply(e,a(arguments))},{def:function(){var d="v"+p;p++;c.push(d);0<arguments.length&&(e.push(d,"="),e.push.apply(e,a(arguments)),e.push(";"));return d},toString:function(){return r([0<c.length?"var "+c.join(",")+";":"",r(e)])}})}function e(){function e(q,
h){d(q,h,"=",c.def(q,h),";")}var c=f(),d=f(),h=c.toString,v=d.toString;return q(function(){c.apply(c,a(arguments))},{def:c.def,entry:c,exit:d,save:e,set:function(d,q,h){e(d,q);c(d,q,"=",h,";")},toString:function(){return h()+v()}})}var k=0,p=0,J={},z=f(),y={};return{global:z,link:function(e){var c="$"+k,d=!1;"object"===typeof e&&e.name&&(c=e.name.replace(/ /g,"_"),d=!0);if(c in J)return c;J[c]=e;d||k++;return c},block:f,proc:function(f,c){function d(){var d="a"+h.length;h.push(d);return d}var h=[];
c=c||0;for(var v=0;v<c;++v)d();var v=e(),p=v.toString;return y[f]=q(v,{arg:d,toString:function(){return r(["function(",h.join(),"){",p(),"}"])}})},scope:e,cond:function(){var f=r(arguments),c=e(),d=e(),h=c.toString,v=d.toString;return q(c,{then:function(){c.apply(c,a(arguments));return this},"else":function(){d.apply(d,a(arguments));return this},toString:function(){var d=v();d&&(d="else{"+d+"}");return r(["if(",f,"){",h(),"}",d])}})},compile:function(){var e=[],c=[];Object.keys(J).sort(function(d,
c){var e="$"===d.charAt(0),q="$"===c.charAt(0);return e||q?e&&q?+d.slice(1)<+c.slice(1)?-1:1:e&&!q?-1:1:d.localeCompare(c)}).forEach(function(d){var q=J[d];e.push(d);c.push(q)});for(var d=0,q=e.length-1;-1<q;q--)if("$"===e[q].charAt(0)){d=q;break}var f=['"use strict";',z,"return {"];Object.keys(y).forEach(function(d){f.push('"',d,'":',y[d].toString(),",")});f.push("}");var q=r(f).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),d=e.slice(d).join(),p=v[d];if(!p)throw console.log("src code is:"),
console.log(q),console.log("compiled values:",c),console.log("linked names:",e),console.log("Keys available:",Object.keys(v)),console.log("Key:",d),console.log('"'+d+'": function('+e.join(", ")+") \n{\n"+q+"\n},"),Error("missing precompiled function with key: "+d);return p.apply(null,c)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(g,u,A){u.exports={$0:function(a){var r,q,v,f,e,k,p,J,z,y,m,c,d,h,H,w,g,G,E,ta,B,b,l,x,R,C,F,ia,I,K;r=a.attributes;q=a.current;v=a.framebuffer;f=a.gl;e=a.next;k=
a.vao;p=e.blend_color;J=q.blend_color;z=e.blend_equation;y=q.blend_equation;m=e.blend_func;c=q.blend_func;d=e.colorMask;h=q.colorMask;H=e.depth_range;w=q.depth_range;g=e.polygonOffset_offset;G=q.polygonOffset_offset;E=e.sample_coverage;ta=q.sample_coverage;B=e.scissor_box;b=q.scissor_box;l=e.stencil_func;x=q.stencil_func;R=e.stencil_opBack;C=q.stencil_opBack;F=e.stencil_opFront;ia=q.stencil_opFront;I=e.viewport;K=q.viewport;return{poll:function(){var k,n,t,r,a,u,A,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,
la;q.dirty=!1;n=e.blend_enable;t=e.cull_enable;r=e.depth_enable;a=e.dither;u=e.polygonOffset_enable;A=e.sample_alpha;W=e.sample_enable;da=e.scissor_enable;V=e.stencil_enable;T=e.cull_face;P=q.cull_face;M=e.depth_func;S=q.depth_func;U=e.depth_mask;qa=q.depth_mask;ra=e.frontFace;O=q.frontFace;N=e.lineWidth;ga=q.lineWidth;X=e.stencil_mask;la=q.stencil_mask;k=v.next;k!==v.cur&&(k?f.bindFramebuffer(36160,k.framebuffer):f.bindFramebuffer(36160,null),v.cur=k);n!==q.blend_enable&&(n?f.enable(3042):f.disable(3042),
q.blend_enable=n);t!==q.cull_enable&&(t?f.enable(2884):f.disable(2884),q.cull_enable=t);r!==q.depth_enable&&(r?f.enable(2929):f.disable(2929),q.depth_enable=r);a!==q.dither&&(a?f.enable(3024):f.disable(3024),q.dither=a);u!==q.polygonOffset_enable&&(u?f.enable(32823):f.disable(32823),q.polygonOffset_enable=u);A!==q.sample_alpha&&(A?f.enable(32926):f.disable(32926),q.sample_alpha=A);W!==q.sample_enable&&(W?f.enable(32928):f.disable(32928),q.sample_enable=W);da!==q.scissor_enable&&(da?f.enable(3089):
f.disable(3089),q.scissor_enable=da);V!==q.stencil_enable&&(V?f.enable(2960):f.disable(2960),q.stencil_enable=V);if(p[0]!==J[0]||p[1]!==J[1]||p[2]!==J[2]||p[3]!==J[3])f.blendColor(p[0],p[1],p[2],p[3]),J[0]=p[0],J[1]=p[1],J[2]=p[2],J[3]=p[3];if(z[0]!==y[0]||z[1]!==y[1])f.blendEquationSeparate(z[0],z[1]),y[0]=z[0],y[1]=z[1];if(m[0]!==c[0]||m[1]!==c[1]||m[2]!==c[2]||m[3]!==c[3])f.blendFuncSeparate(m[0],m[1],m[2],m[3]),c[0]=m[0],c[1]=m[1],c[2]=m[2],c[3]=m[3];if(d[0]!==h[0]||d[1]!==h[1]||d[2]!==h[2]||
d[3]!==h[3])f.colorMask(d[0],d[1],d[2],d[3]),h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3];T!==P&&(f.cullFace(T),q.cull_face=T);M!==S&&(f.depthFunc(M),q.depth_func=M);U!==qa&&(f.depthMask(U),q.depth_mask=U);if(H[0]!==w[0]||H[1]!==w[1])f.depthRange(H[0],H[1]),w[0]=H[0],w[1]=H[1];ra!==O&&(f.frontFace(ra),q.frontFace=ra);N!==ga&&(f.lineWidth(N),q.lineWidth=N);if(g[0]!==G[0]||g[1]!==G[1])f.polygonOffset(g[0],g[1]),G[0]=g[0],G[1]=g[1];if(E[0]!==ta[0]||E[1]!==ta[1])f.sampleCoverage(E[0],E[1]),ta[0]=E[0],ta[1]=
E[1];if(B[0]!==b[0]||B[1]!==b[1]||B[2]!==b[2]||B[3]!==b[3])f.scissor(B[0],B[1],B[2],B[3]),b[0]=B[0],b[1]=B[1],b[2]=B[2],b[3]=B[3];if(l[0]!==x[0]||l[1]!==x[1]||l[2]!==x[2])f.stencilFunc(l[0],l[1],l[2]),x[0]=l[0],x[1]=l[1],x[2]=l[2];X!==la&&(f.stencilMask(X),q.stencil_mask=X);if(R[0]!==C[0]||R[1]!==C[1]||R[2]!==C[2]||R[3]!==C[3])f.stencilOpSeparate(R[0],R[1],R[2],R[3]),C[0]=R[0],C[1]=R[1],C[2]=R[2],C[3]=R[3];if(F[0]!==ia[0]||F[1]!==ia[1]||F[2]!==ia[2]||F[3]!==ia[3])f.stencilOpSeparate(F[0],F[1],F[2],
F[3]),ia[0]=F[0],ia[1]=F[1],ia[2]=F[2],ia[3]=F[3];if(I[0]!==K[0]||I[1]!==K[1]||I[2]!==K[2]||I[3]!==K[3])f.viewport(I[0],I[1],I[2],I[3]),K[0]=I[0],K[1]=I[1],K[2]=I[2],K[3]=I[3]},refresh:function(){var a,n,t,Z,Q,u,A,W,da,V,T,P,M,S,U,qa;q.dirty=!1;n=e.blend_enable;t=e.cull_enable;Z=e.depth_enable;Q=e.dither;u=e.polygonOffset_enable;A=e.sample_alpha;W=e.sample_enable;da=e.scissor_enable;V=e.stencil_enable;T=e.cull_face;P=e.depth_func;M=e.depth_mask;S=e.frontFace;U=e.lineWidth;qa=e.stencil_mask;(a=v.next)?
f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);v.cur=a;a=r[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=r[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,
a.x,a.y,a.z,a.w),a.buffer=null);a=r[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=r[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);
a=r[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=r[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=r[6];a.buffer?(f.enableVertexAttribArray(6),
f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=r[7];a.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=r[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,a.buffer.buffer),
f.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=r[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=r[10];a.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(10,a.size,
a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=r[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=r[12];a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,
a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=r[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=r[14];a.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),
f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=r[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);k.currentVAO=null;k.setVAO(k.targetVAO);n?f.enable(3042):f.disable(3042);q.blend_enable=n;t?f.enable(2884):f.disable(2884);q.cull_enable=t;Z?f.enable(2929):f.disable(2929);q.depth_enable=Z;Q?f.enable(3024):f.disable(3024);
q.dither=Q;u?f.enable(32823):f.disable(32823);q.polygonOffset_enable=u;A?f.enable(32926):f.disable(32926);q.sample_alpha=A;W?f.enable(32928):f.disable(32928);q.sample_enable=W;da?f.enable(3089):f.disable(3089);q.scissor_enable=da;V?f.enable(2960):f.disable(2960);q.stencil_enable=V;f.blendColor(p[0],p[1],p[2],p[3]);J[0]=p[0];J[1]=p[1];J[2]=p[2];J[3]=p[3];f.blendEquationSeparate(z[0],z[1]);y[0]=z[0];y[1]=z[1];f.blendFuncSeparate(m[0],m[1],m[2],m[3]);c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=m[3];f.colorMask(d[0],
d[1],d[2],d[3]);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];f.cullFace(T);q.cull_face=T;f.depthFunc(P);q.depth_func=P;f.depthMask(M);q.depth_mask=M;f.depthRange(H[0],H[1]);w[0]=H[0];w[1]=H[1];f.frontFace(S);q.frontFace=S;f.lineWidth(U);q.lineWidth=U;f.polygonOffset(g[0],g[1]);G[0]=g[0];G[1]=g[1];f.sampleCoverage(E[0],E[1]);ta[0]=E[0];ta[1]=E[1];f.scissor(B[0],B[1],B[2],B[3]);b[0]=B[0];b[1]=B[1];b[2]=B[2];b[3]=B[3];f.stencilFunc(l[0],l[1],l[2]);x[0]=l[0];x[1]=l[1];x[2]=l[2];f.stencilMask(qa);q.stencil_mask=
qa;f.stencilOpSeparate(R[0],R[1],R[2],R[3]);C[0]=R[0];C[1]=R[1];C[2]=R[2];C[3]=R[3];f.stencilOpSeparate(F[0],F[1],F[2],F[3]);ia[0]=F[0];ia[1]=F[1];ia[2]=F[2];ia[3]=F[3];f.viewport(I[0],I[1],I[2],I[3]);K[0]=I[0];K[1]=I[1];K[2]=I[2];K[3]=I[3]}}},$3:function(a,r,q,v){var f,e,k,p,J,z,y,m,c,d,h,H,w,g,G,E,ta,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,u;f=a.context;e=a.current;k=a.framebuffer;p=a.gl;J=a.next;z=a.shader;y=a.vao;m=J.blend_color;c=e.blend_color;d=J.blend_equation;h=e.blend_equation;H=J.blend_func;w=e.blend_func;
g=J.colorMask;G=e.colorMask;E=J.depth_range;ta=e.depth_range;B=J.polygonOffset_offset;b=e.polygonOffset_offset;l=J.sample_coverage;x=e.sample_coverage;R=J.scissor_box;C=e.scissor_box;F=J.stencil_func;ia=e.stencil_func;I=J.stencil_opBack;K=e.stencil_opBack;D=J.stencil_opFront;n=e.stencil_opFront;t=J.viewport;Z=e.viewport;Q={};u={};return{batch:function(q,f){var a,Q,T,P,M;a=k.next;a!==k.cur&&(a?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null),k.cur=a);if(e.dirty){a=J.dither;a!==
e.dither&&(a?p.enable(3024):p.disable(3024),e.dither=a);a=J.blend_enable;a!==e.blend_enable&&(a?p.enable(3042):p.disable(3042),e.blend_enable=a);a=m[0];T=m[1];P=m[2];M=m[3];if(a!==c[0]||T!==c[1]||P!==c[2]||M!==c[3])p.blendColor(a,T,P,M),c[0]=a,c[1]=T,c[2]=P,c[3]=M;a=d[0];T=d[1];if(a!==h[0]||T!==h[1])p.blendEquationSeparate(a,T),h[0]=a,h[1]=T;a=H[0];T=H[1];P=H[2];M=H[3];if(a!==w[0]||T!==w[1]||P!==w[2]||M!==w[3])p.blendFuncSeparate(a,T,P,M),w[0]=a,w[1]=T,w[2]=P,w[3]=M;a=J.depth_enable;a!==e.depth_enable&&
(a?p.enable(2929):p.disable(2929),e.depth_enable=a);a=J.depth_func;a!==e.depth_func&&(p.depthFunc(a),e.depth_func=a);a=E[0];T=E[1];if(a!==ta[0]||T!==ta[1])p.depthRange(a,T),ta[0]=a,ta[1]=T;a=J.depth_mask;a!==e.depth_mask&&(p.depthMask(a),e.depth_mask=a);a=g[0];T=g[1];P=g[2];M=g[3];if(a!==G[0]||T!==G[1]||P!==G[2]||M!==G[3])p.colorMask(a,T,P,M),G[0]=a,G[1]=T,G[2]=P,G[3]=M;a=J.cull_enable;a!==e.cull_enable&&(a?p.enable(2884):p.disable(2884),e.cull_enable=a);a=J.cull_face;a!==e.cull_face&&(p.cullFace(a),
e.cull_face=a);a=J.frontFace;a!==e.frontFace&&(p.frontFace(a),e.frontFace=a);a=J.lineWidth;a!==e.lineWidth&&(p.lineWidth(a),e.lineWidth=a);a=J.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?p.enable(32823):p.disable(32823),e.polygonOffset_enable=a);a=B[0];T=B[1];if(a!==b[0]||T!==b[1])p.polygonOffset(a,T),b[0]=a,b[1]=T;a=J.sample_alpha;a!==e.sample_alpha&&(a?p.enable(32926):p.disable(32926),e.sample_alpha=a);a=J.sample_enable;a!==e.sample_enable&&(a?p.enable(32928):p.disable(32928),e.sample_enable=
a);a=l[0];T=l[1];if(a!==x[0]||T!==x[1])p.sampleCoverage(a,T),x[0]=a,x[1]=T;a=J.stencil_enable;a!==e.stencil_enable&&(a?p.enable(2960):p.disable(2960),e.stencil_enable=a);a=J.stencil_mask;a!==e.stencil_mask&&(p.stencilMask(a),e.stencil_mask=a);a=F[0];T=F[1];P=F[2];if(a!==ia[0]||T!==ia[1]||P!==ia[2])p.stencilFunc(a,T,P),ia[0]=a,ia[1]=T,ia[2]=P;a=D[0];T=D[1];P=D[2];M=D[3];if(a!==n[0]||T!==n[1]||P!==n[2]||M!==n[3])p.stencilOpSeparate(a,T,P,M),n[0]=a,n[1]=T,n[2]=P,n[3]=M;a=I[0];T=I[1];P=I[2];M=I[3];if(a!==
K[0]||T!==K[1]||P!==K[2]||M!==K[3])p.stencilOpSeparate(a,T,P,M),K[0]=a,K[1]=T,K[2]=P,K[3]=M;a=J.scissor_enable;a!==e.scissor_enable&&(a?p.enable(3089):p.disable(3089),e.scissor_enable=a);a=R[0];T=R[1];P=R[2];M=R[3];if(a!==C[0]||T!==C[1]||P!==C[2]||M!==C[3])p.scissor(a,T,P,M),C[0]=a,C[1]=T,C[2]=P,C[3]=M;a=t[0];T=t[1];P=t[2];M=t[3];if(a!==Z[0]||T!==Z[1]||P!==Z[2]||M!==Z[3])p.viewport(a,T,P,M),Z[0]=a,Z[1]=T,Z[2]=P,Z[3]=M;e.dirty=!1}if(a=e.profile)Q=performance.now(),r.count+=f;T=z.program(z.vert,z.frag);
p.useProgram(T.program);y.setVAO(null);P=T.id;(M=u[P])||(M=u[P]=v(T));M.call(this,q,f);y.setVAO(null);a&&(r.cpuTime+=performance.now()-Q)},draw:function(f){var a,v,V,T,P;a=k.next;a!==k.cur&&(a?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null),k.cur=a);if(e.dirty){a=J.dither;a!==e.dither&&(a?p.enable(3024):p.disable(3024),e.dither=a);a=J.blend_enable;a!==e.blend_enable&&(a?p.enable(3042):p.disable(3042),e.blend_enable=a);a=m[0];V=m[1];T=m[2];P=m[3];if(a!==c[0]||V!==c[1]||T!==c[2]||
P!==c[3])p.blendColor(a,V,T,P),c[0]=a,c[1]=V,c[2]=T,c[3]=P;a=d[0];V=d[1];if(a!==h[0]||V!==h[1])p.blendEquationSeparate(a,V),h[0]=a,h[1]=V;a=H[0];V=H[1];T=H[2];P=H[3];if(a!==w[0]||V!==w[1]||T!==w[2]||P!==w[3])p.blendFuncSeparate(a,V,T,P),w[0]=a,w[1]=V,w[2]=T,w[3]=P;a=J.depth_enable;a!==e.depth_enable&&(a?p.enable(2929):p.disable(2929),e.depth_enable=a);a=J.depth_func;a!==e.depth_func&&(p.depthFunc(a),e.depth_func=a);a=E[0];V=E[1];if(a!==ta[0]||V!==ta[1])p.depthRange(a,V),ta[0]=a,ta[1]=V;a=J.depth_mask;
a!==e.depth_mask&&(p.depthMask(a),e.depth_mask=a);a=g[0];V=g[1];T=g[2];P=g[3];if(a!==G[0]||V!==G[1]||T!==G[2]||P!==G[3])p.colorMask(a,V,T,P),G[0]=a,G[1]=V,G[2]=T,G[3]=P;a=J.cull_enable;a!==e.cull_enable&&(a?p.enable(2884):p.disable(2884),e.cull_enable=a);a=J.cull_face;a!==e.cull_face&&(p.cullFace(a),e.cull_face=a);a=J.frontFace;a!==e.frontFace&&(p.frontFace(a),e.frontFace=a);a=J.lineWidth;a!==e.lineWidth&&(p.lineWidth(a),e.lineWidth=a);a=J.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?p.enable(32823):
p.disable(32823),e.polygonOffset_enable=a);a=B[0];V=B[1];if(a!==b[0]||V!==b[1])p.polygonOffset(a,V),b[0]=a,b[1]=V;a=J.sample_alpha;a!==e.sample_alpha&&(a?p.enable(32926):p.disable(32926),e.sample_alpha=a);a=J.sample_enable;a!==e.sample_enable&&(a?p.enable(32928):p.disable(32928),e.sample_enable=a);a=l[0];V=l[1];if(a!==x[0]||V!==x[1])p.sampleCoverage(a,V),x[0]=a,x[1]=V;a=J.stencil_enable;a!==e.stencil_enable&&(a?p.enable(2960):p.disable(2960),e.stencil_enable=a);a=J.stencil_mask;a!==e.stencil_mask&&
(p.stencilMask(a),e.stencil_mask=a);a=F[0];V=F[1];T=F[2];if(a!==ia[0]||V!==ia[1]||T!==ia[2])p.stencilFunc(a,V,T),ia[0]=a,ia[1]=V,ia[2]=T;a=D[0];V=D[1];T=D[2];P=D[3];if(a!==n[0]||V!==n[1]||T!==n[2]||P!==n[3])p.stencilOpSeparate(a,V,T,P),n[0]=a,n[1]=V,n[2]=T,n[3]=P;a=I[0];V=I[1];T=I[2];P=I[3];if(a!==K[0]||V!==K[1]||T!==K[2]||P!==K[3])p.stencilOpSeparate(a,V,T,P),K[0]=a,K[1]=V,K[2]=T,K[3]=P;a=J.scissor_enable;a!==e.scissor_enable&&(a?p.enable(3089):p.disable(3089),e.scissor_enable=a);a=R[0];V=R[1];T=
R[2];P=R[3];if(a!==C[0]||V!==C[1]||T!==C[2]||P!==C[3])p.scissor(a,V,T,P),C[0]=a,C[1]=V,C[2]=T,C[3]=P;a=t[0];V=t[1];T=t[2];P=t[3];if(a!==Z[0]||V!==Z[1]||T!==Z[2]||P!==Z[3])p.viewport(a,V,T,P),Z[0]=a,Z[1]=V,Z[2]=T,Z[3]=P;e.dirty=!1}if(a=e.profile)v=performance.now(),r.count++;V=z.program(z.vert,z.frag);p.useProgram(V.program);y.setVAO(null);T=V.id;(P=Q[T])||(P=Q[T]=q(V));P.call(this,f);y.setVAO(null);a&&(r.cpuTime+=performance.now()-v)},scope:function(b,l,d){var c,t;if(c=e.profile)t=performance.now(),
r.count++;l(f,b,d);c&&(r.cpuTime+=performance.now()-t)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,r,q,v,f,e,k,p,J,z,y,m,c,d,h,H,w,g,G,E,ta,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,u,A,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,
ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa){var ka,ba,va,La,Ha,gb,fa,Gc,bc,Ia,cc,Tb,ze,Hd,Ad,Td,De,Ae,$d,qe,Cd,yd,Qd,Pd,Md,Be,Qe,Ue,Id,Ee,te,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa;ka=a.attributes;ba=a.context;va=a.current;La=a.draw;Ha=a.elements;gb=a.framebuffer;fa=a.gl;Gc=a.next;bc=a.shader;Ia=a.uniforms;cc=a.vao;Tb=Gc.blend_color;ze=va.blend_color;Hd=Gc.blend_equation;Ad=va.blend_equation;Td=Gc.blend_func;De=va.blend_func;
Ae=Gc.colorMask;$d=va.colorMask;qe=Gc.depth_range;Cd=va.depth_range;yd=Gc.polygonOffset_offset;Qd=va.polygonOffset_offset;Pd=Gc.sample_coverage;Md=va.sample_coverage;Be=Gc.scissor_box;Qe=va.scissor_box;Ue=Gc.stencil_func;Id=va.stencil_func;Ee=Gc.stencil_opBack;te=va.stencil_opBack;ie=Gc.stencil_opFront;Nd=va.stencil_opFront;Dd=Gc.viewport;pd=va.viewport;bd={};td={};Oc=new Float32Array(16);rd=new Float32Array(16);Hc=new Float32Array(16);gd=new Float32Array(16);Sc=new Float32Array(16);md=new Float32Array(16);
Wb=new Float32Array(16);Gb=new Float32Array(16);vc=new Float32Array(16);Ab=new Float32Array(16);yc=new Float32Array(16);Db=new Float32Array(16);Lc=new Float32Array(16);mc=new Float32Array(16);Ic=new Float32Array(16);hd=new Float32Array(16);cd=new Float32Array(16);Ec=new Float32Array(16);fc=new Float32Array(16);Jc=new Float32Array(16);pc=new Float32Array(16);rc=new Float32Array(16);nc=new Float32Array(16);qc=new Float32Array(16);hb=new Float32Array(16);Pc=new Float32Array(16);Rb=new Float32Array(16);
db=new Float32Array(16);Nb=new Float32Array(16);bb=new Float32Array(16);pb=new Float32Array(16);Xa=new Float32Array(16);return{batch:function(b,l){var t,n,q,a;t=gb.next;t!==gb.cur&&(t?fa.bindFramebuffer(36160,t.framebuffer):fa.bindFramebuffer(36160,null),gb.cur=t);if(va.dirty){var x,r,C,R,I,F,B,D,Z,Q,E,K,u,ia,ta,Wa,Ia,Tb,bc,Gb,Sc,Wb,Db,Ra,Be;x=Ae[0];r=Ae[1];C=Ae[2];R=Ae[3];if(x!==$d[0]||r!==$d[1]||C!==$d[2]||R!==$d[3])fa.colorMask(x,r,C,R),$d[0]=x,$d[1]=r,$d[2]=C,$d[3]=R;I=Gc.frontFace;I!==va.frontFace&&
(fa.frontFace(I),va.frontFace=I);F=Gc.polygonOffset_enable;F!==va.polygonOffset_enable&&(F?fa.enable(32823):fa.disable(32823),va.polygonOffset_enable=F);B=yd[0];D=yd[1];if(B!==Qd[0]||D!==Qd[1])fa.polygonOffset(B,D),Qd[0]=B,Qd[1]=D;Z=Gc.sample_alpha;Z!==va.sample_alpha&&(Z?fa.enable(32926):fa.disable(32926),va.sample_alpha=Z);Q=Gc.sample_enable;Q!==va.sample_enable&&(Q?fa.enable(32928):fa.disable(32928),va.sample_enable=Q);E=Pd[0];K=Pd[1];if(E!==Md[0]||K!==Md[1])fa.sampleCoverage(E,K),Md[0]=E,Md[1]=
K;u=Gc.stencil_enable;u!==va.stencil_enable&&(u?fa.enable(2960):fa.disable(2960),va.stencil_enable=u);ia=Gc.stencil_mask;ia!==va.stencil_mask&&(fa.stencilMask(ia),va.stencil_mask=ia);ta=Ue[0];Wa=Ue[1];Ia=Ue[2];if(ta!==Id[0]||Wa!==Id[1]||Ia!==Id[2])fa.stencilFunc(ta,Wa,Ia),Id[0]=ta,Id[1]=Wa,Id[2]=Ia;Tb=ie[0];bc=ie[1];Gb=ie[2];Sc=ie[3];if(Tb!==Nd[0]||bc!==Nd[1]||Gb!==Nd[2]||Sc!==Nd[3])fa.stencilOpSeparate(Tb,bc,Gb,Sc),Nd[0]=Tb,Nd[1]=bc,Nd[2]=Gb,Nd[3]=Sc;Wb=Ee[0];Db=Ee[1];Ra=Ee[2];Be=Ee[3];if(Wb!==te[0]||
Db!==te[1]||Ra!==te[2]||Be!==te[3])fa.stencilOpSeparate(Wb,Db,Ra,Be),te[0]=Wb,te[1]=Db,te[2]=Ra,te[3]=Be}fa.blendColor(0,0,0,0);ze[0]=0;ze[1]=0;ze[2]=0;ze[3]=0;fa.disable(3042);va.blend_enable=!1;fa.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;fa.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;fa.enable(2884);va.cull_enable=!0;fa.cullFace(1029);va.cull_face=1029;fa.enable(2929);va.depth_enable=!0;fa.depthFunc(513);va.depth_func=513;fa.depthMask(!0);va.depth_mask=!0;
fa.depthRange(0,1);Cd[0]=0;Cd[1]=1;fa.disable(3024);va.dither=!1;fa.lineWidth(2);va.lineWidth=2;fa.enable(3089);va.scissor_enable=!0;n=va.profile;va.profile=!1;fa.useProgram(A.program);var Ta,Ab,md,Na,mc,$a,Hc,Td,nb,Qa,vc,Sa,xb,yb,Ua,ob,rd,Hd,Ic,cb,Lc,gd,Za,Oc,Cb,ab,qe,yc,Yb,Qb,Dd,Sb,hd;cc.setVAO(null);Ta=sa.location;Ab=ka[Ta];Ab.buffer||fa.enableVertexAttribArray(Ta);if(Ab.type!==v.dtype||4!==Ab.size||Ab.buffer!==v||!1!==Ab.normalized||0!==Ab.offset||0!==Ab.stride)fa.bindBuffer(34962,v.buffer),fa.vertexAttribPointer(Ta,
4,v.dtype,!1,0,0),Ab.type=v.dtype,Ab.size=4,Ab.buffer=v,Ab.normalized=!1,Ab.offset=0,Ab.stride=0;md=Ga.location;Na=ka[md];Na.buffer||fa.enableVertexAttribArray(md);if(Na.type!==f.dtype||4!==Na.size||Na.buffer!==f||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)fa.bindBuffer(34962,f.buffer),fa.vertexAttribPointer(md,4,f.dtype,!1,0,0),Na.type=f.dtype,Na.size=4,Na.buffer=f,Na.normalized=!1,Na.offset=0,Na.stride=0;mc=Da.location;$a=ka[mc];$a.buffer||fa.enableVertexAttribArray(mc);if($a.type!==e.dtype||
4!==$a.size||$a.buffer!==e||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)fa.bindBuffer(34962,e.buffer),fa.vertexAttribPointer(mc,4,e.dtype,!1,0,0),$a.type=e.dtype,$a.size=4,$a.buffer=e,$a.normalized=!1,$a.offset=0,$a.stride=0;Hc=sb.location;Td=ka[Hc];Td.buffer||fa.enableVertexAttribArray(Hc);if(Td.type!==k.dtype||4!==Td.size||Td.buffer!==k||!1!==Td.normalized||0!==Td.offset||0!==Td.stride)fa.bindBuffer(34962,k.buffer),fa.vertexAttribPointer(Hc,4,k.dtype,!1,0,0),Td.type=k.dtype,Td.size=4,Td.buffer=
k,Td.normalized=!1,Td.offset=0,Td.stride=0;nb=Ka.location;Qa=ka[nb];Qa.buffer||fa.enableVertexAttribArray(nb);if(Qa.type!==p.dtype||4!==Qa.size||Qa.buffer!==p||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)fa.bindBuffer(34962,p.buffer),fa.vertexAttribPointer(nb,4,p.dtype,!1,0,0),Qa.type=p.dtype,Qa.size=4,Qa.buffer=p,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;vc=ea.location;Sa=ka[vc];Sa.buffer||fa.enableVertexAttribArray(vc);if(Sa.type!==J.dtype||4!==Sa.size||Sa.buffer!==J||!1!==Sa.normalized||0!==
Sa.offset||0!==Sa.stride)fa.bindBuffer(34962,J.buffer),fa.vertexAttribPointer(vc,4,J.dtype,!1,0,0),Sa.type=J.dtype,Sa.size=4,Sa.buffer=J,Sa.normalized=!1,Sa.offset=0,Sa.stride=0;xb=ca.location;yb=ka[xb];yb.buffer||fa.enableVertexAttribArray(xb);if(yb.type!==z.dtype||4!==yb.size||yb.buffer!==z||!1!==yb.normalized||0!==yb.offset||0!==yb.stride)fa.bindBuffer(34962,z.buffer),fa.vertexAttribPointer(xb,4,z.dtype,!1,0,0),yb.type=z.dtype,yb.size=4,yb.buffer=z,yb.normalized=!1,yb.offset=0,yb.stride=0;Ua=na.location;
ob=ka[Ua];ob.buffer||fa.enableVertexAttribArray(Ua);if(ob.type!==y.dtype||4!==ob.size||ob.buffer!==y||!1!==ob.normalized||0!==ob.offset||0!==ob.stride)fa.bindBuffer(34962,y.buffer),fa.vertexAttribPointer(Ua,4,y.dtype,!1,0,0),ob.type=y.dtype,ob.size=4,ob.buffer=y,ob.normalized=!1,ob.offset=0,ob.stride=0;rd=wa.location;Hd=ka[rd];Hd.buffer||fa.enableVertexAttribArray(rd);if(Hd.type!==m.dtype||4!==Hd.size||Hd.buffer!==m||!1!==Hd.normalized||0!==Hd.offset||0!==Hd.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(rd,
4,m.dtype,!1,0,0),Hd.type=m.dtype,Hd.size=4,Hd.buffer=m,Hd.normalized=!1,Hd.offset=0,Hd.stride=0;Ic=Ea.location;cb=ka[Ic];cb.buffer||fa.enableVertexAttribArray(Ic);if(cb.type!==c.dtype||4!==cb.size||cb.buffer!==c||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)fa.bindBuffer(34962,c.buffer),fa.vertexAttribPointer(Ic,4,c.dtype,!1,0,0),cb.type=c.dtype,cb.size=4,cb.buffer=c,cb.normalized=!1,cb.offset=0,cb.stride=0;Lc=Oa.location;gd=ka[Lc];gd.buffer||fa.enableVertexAttribArray(Lc);if(gd.type!==d.dtype||
4!==gd.size||gd.buffer!==d||!1!==gd.normalized||0!==gd.offset||0!==gd.stride)fa.bindBuffer(34962,d.buffer),fa.vertexAttribPointer(Lc,4,d.dtype,!1,0,0),gd.type=d.dtype,gd.size=4,gd.buffer=d,gd.normalized=!1,gd.offset=0,gd.stride=0;Za=vb.location;Oc=ka[Za];Oc.buffer||fa.enableVertexAttribArray(Za);if(Oc.type!==h.dtype||4!==Oc.size||Oc.buffer!==h||!1!==Oc.normalized||0!==Oc.offset||0!==Oc.stride)fa.bindBuffer(34962,h.buffer),fa.vertexAttribPointer(Za,4,h.dtype,!1,0,0),Oc.type=h.dtype,Oc.size=4,Oc.buffer=
h,Oc.normalized=!1,Oc.offset=0,Oc.stride=0;Cb=ha.location;ab=ka[Cb];ab.buffer||fa.enableVertexAttribArray(Cb);if(ab.type!==H.dtype||4!==ab.size||ab.buffer!==H||!1!==ab.normalized||0!==ab.offset||0!==ab.stride)fa.bindBuffer(34962,H.buffer),fa.vertexAttribPointer(Cb,4,H.dtype,!1,0,0),ab.type=H.dtype,ab.size=4,ab.buffer=H,ab.normalized=!1,ab.offset=0,ab.stride=0;qe=Y.location;yc=ka[qe];yc.buffer||fa.enableVertexAttribArray(qe);if(yc.type!==w.dtype||4!==yc.size||yc.buffer!==w||!1!==yc.normalized||0!==
yc.offset||0!==yc.stride)fa.bindBuffer(34962,w.buffer),fa.vertexAttribPointer(qe,4,w.dtype,!1,0,0),yc.type=w.dtype,yc.size=4,yc.buffer=w,yc.normalized=!1,yc.offset=0,yc.stride=0;Yb=xa.location;Qb=ka[Yb];Qb.buffer||fa.enableVertexAttribArray(Yb);if(Qb.type!==g.dtype||4!==Qb.size||Qb.buffer!==g||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)fa.bindBuffer(34962,g.buffer),fa.vertexAttribPointer(Yb,4,g.dtype,!1,0,0),Qb.type=g.dtype,Qb.size=4,Qb.buffer=g,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Dd=da.location;
Sb=ka[Dd];Sb.buffer||fa.enableVertexAttribArray(Dd);if(Sb.type!==G.dtype||4!==Sb.size||Sb.buffer!==G||!1!==Sb.normalized||0!==Sb.offset||0!==Sb.stride)fa.bindBuffer(34962,G.buffer),fa.vertexAttribPointer(Dd,4,G.dtype,!1,0,0),Sb.type=G.dtype,Sb.size=4,Sb.buffer=G,Sb.normalized=!1,Sb.offset=0,Sb.stride=0;fa.uniform1i(Fa.location,W.bind());(hd=La.elements)?fa.bindBuffer(34963,hd.buffer.buffer):cc.currentVAO&&(hd=Ha.getElements(cc.currentVAO.elements))&&fa.bindBuffer(34963,hd.buffer.buffer);for(q=0;q<
l;++q){a=b[q];var Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee;bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;Fc=bd.x|0;vd=bd.y|0;Qc="width"in bd?bd.width|0:ba.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:ba.framebufferHeight-vd;sd=ba.viewportWidth;ba.viewportWidth=Qc;oc=ba.viewportHeight;ba.viewportHeight=Yc;fa.viewport(Fc,vd,
Qc,Yc);pd[0]=Fc;pd[1]=vd;pd[2]=Qc;pd[3]=Yc;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;xc=td.x|0;hc=td.y|0;eb="width"in td?td.width|0:ba.framebufferWidth-xc;tc="height"in td?td.height|0:ba.framebufferHeight-hc;fa.scissor(xc,hc,eb,tc);Qe[0]=xc;Qe[1]=hc;Qe[2]=eb;Qe[3]=tc;Ub=a.dim0A;fa.uniformMatrix4fv(T.location,!1,Array.isArray(Ub)||Ub instanceof Float32Array?Ub:(cd[0]=Ub[0],cd[1]=Ub[1],cd[2]=Ub[2],cd[3]=Ub[3],cd[4]=Ub[4],cd[5]=Ub[5],cd[6]=Ub[6],cd[7]=Ub[7],cd[8]=
Ub[8],cd[9]=Ub[9],cd[10]=Ub[10],cd[11]=Ub[11],cd[12]=Ub[12],cd[13]=Ub[13],cd[14]=Ub[14],cd[15]=Ub[15],cd));Zb=a.dim1A;fa.uniformMatrix4fv(U.location,!1,Array.isArray(Zb)||Zb instanceof Float32Array?Zb:(Ec[0]=Zb[0],Ec[1]=Zb[1],Ec[2]=Zb[2],Ec[3]=Zb[3],Ec[4]=Zb[4],Ec[5]=Zb[5],Ec[6]=Zb[6],Ec[7]=Zb[7],Ec[8]=Zb[8],Ec[9]=Zb[9],Ec[10]=Zb[10],Ec[11]=Zb[11],Ec[12]=Zb[12],Ec[13]=Zb[13],Ec[14]=Zb[14],Ec[15]=Zb[15],Ec));ec=a.dim0B;fa.uniformMatrix4fv(P.location,!1,Array.isArray(ec)||ec instanceof Float32Array?
ec:(fc[0]=ec[0],fc[1]=ec[1],fc[2]=ec[2],fc[3]=ec[3],fc[4]=ec[4],fc[5]=ec[5],fc[6]=ec[6],fc[7]=ec[7],fc[8]=ec[8],fc[9]=ec[9],fc[10]=ec[10],fc[11]=ec[11],fc[12]=ec[12],fc[13]=ec[13],fc[14]=ec[14],fc[15]=ec[15],fc));ic=a.dim1B;fa.uniformMatrix4fv(qa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Jc[0]=ic[0],Jc[1]=ic[1],Jc[2]=ic[2],Jc[3]=ic[3],Jc[4]=ic[4],Jc[5]=ic[5],Jc[6]=ic[6],Jc[7]=ic[7],Jc[8]=ic[8],Jc[9]=ic[9],Jc[10]=ic[10],Jc[11]=ic[11],Jc[12]=ic[12],Jc[13]=ic[13],Jc[14]=ic[14],Jc[15]=
ic[15],Jc));zc=a.dim0C;fa.uniformMatrix4fv(M.location,!1,Array.isArray(zc)||zc instanceof Float32Array?zc:(pc[0]=zc[0],pc[1]=zc[1],pc[2]=zc[2],pc[3]=zc[3],pc[4]=zc[4],pc[5]=zc[5],pc[6]=zc[6],pc[7]=zc[7],pc[8]=zc[8],pc[9]=zc[9],pc[10]=zc[10],pc[11]=zc[11],pc[12]=zc[12],pc[13]=zc[13],pc[14]=zc[14],pc[15]=zc[15],pc));Cc=a.dim1C;fa.uniformMatrix4fv(ra.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(rc[0]=Cc[0],rc[1]=Cc[1],rc[2]=Cc[2],rc[3]=Cc[3],rc[4]=Cc[4],rc[5]=Cc[5],rc[6]=Cc[6],rc[7]=
Cc[7],rc[8]=Cc[8],rc[9]=Cc[9],rc[10]=Cc[10],rc[11]=Cc[11],rc[12]=Cc[12],rc[13]=Cc[13],rc[14]=Cc[14],rc[15]=Cc[15],rc));dd=a.dim0D;fa.uniformMatrix4fv(S.location,!1,Array.isArray(dd)||dd instanceof Float32Array?dd:(nc[0]=dd[0],nc[1]=dd[1],nc[2]=dd[2],nc[3]=dd[3],nc[4]=dd[4],nc[5]=dd[5],nc[6]=dd[6],nc[7]=dd[7],nc[8]=dd[8],nc[9]=dd[9],nc[10]=dd[10],nc[11]=dd[11],nc[12]=dd[12],nc[13]=dd[13],nc[14]=dd[14],nc[15]=dd[15],nc));Tc=a.dim1D;fa.uniformMatrix4fv(O.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?
Tc:(qc[0]=Tc[0],qc[1]=Tc[1],qc[2]=Tc[2],qc[3]=Tc[3],qc[4]=Tc[4],qc[5]=Tc[5],qc[6]=Tc[6],qc[7]=Tc[7],qc[8]=Tc[8],qc[9]=Tc[9],qc[10]=Tc[10],qc[11]=Tc[11],qc[12]=Tc[12],qc[13]=Tc[13],qc[14]=Tc[14],qc[15]=Tc[15],qc));Uc=a.loA;fa.uniformMatrix4fv(ya.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(hb[0]=Uc[0],hb[1]=Uc[1],hb[2]=Uc[2],hb[3]=Uc[3],hb[4]=Uc[4],hb[5]=Uc[5],hb[6]=Uc[6],hb[7]=Uc[7],hb[8]=Uc[8],hb[9]=Uc[9],hb[10]=Uc[10],hb[11]=Uc[11],hb[12]=Uc[12],hb[13]=Uc[13],hb[14]=Uc[14],hb[15]=
Uc[15],hb));Vc=a.hiA;fa.uniformMatrix4fv(ga.location,!1,Array.isArray(Vc)||Vc instanceof Float32Array?Vc:(Pc[0]=Vc[0],Pc[1]=Vc[1],Pc[2]=Vc[2],Pc[3]=Vc[3],Pc[4]=Vc[4],Pc[5]=Vc[5],Pc[6]=Vc[6],Pc[7]=Vc[7],Pc[8]=Vc[8],Pc[9]=Vc[9],Pc[10]=Vc[10],Pc[11]=Vc[11],Pc[12]=Vc[12],Pc[13]=Vc[13],Pc[14]=Vc[14],Pc[15]=Vc[15],Pc));Zc=a.loB;fa.uniformMatrix4fv(ua.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Rb[0]=Zc[0],Rb[1]=Zc[1],Rb[2]=Zc[2],Rb[3]=Zc[3],Rb[4]=Zc[4],Rb[5]=Zc[5],Rb[6]=Zc[6],Rb[7]=Zc[7],
Rb[8]=Zc[8],Rb[9]=Zc[9],Rb[10]=Zc[10],Rb[11]=Zc[11],Rb[12]=Zc[12],Rb[13]=Zc[13],Rb[14]=Zc[14],Rb[15]=Zc[15],Rb));od=a.hiB;fa.uniformMatrix4fv(X.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(db[0]=od[0],db[1]=od[1],db[2]=od[2],db[3]=od[3],db[4]=od[4],db[5]=od[5],db[6]=od[6],db[7]=od[7],db[8]=od[8],db[9]=od[9],db[10]=od[10],db[11]=od[11],db[12]=od[12],db[13]=od[13],db[14]=od[14],db[15]=od[15],db));ed=a.loC;fa.uniformMatrix4fv(aa.location,!1,Array.isArray(ed)||ed instanceof Float32Array?
ed:(Nb[0]=ed[0],Nb[1]=ed[1],Nb[2]=ed[2],Nb[3]=ed[3],Nb[4]=ed[4],Nb[5]=ed[5],Nb[6]=ed[6],Nb[7]=ed[7],Nb[8]=ed[8],Nb[9]=ed[9],Nb[10]=ed[10],Nb[11]=ed[11],Nb[12]=ed[12],Nb[13]=ed[13],Nb[14]=ed[14],Nb[15]=ed[15],Nb));$c=a.hiC;fa.uniformMatrix4fv(la.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(bb[0]=$c[0],bb[1]=$c[1],bb[2]=$c[2],bb[3]=$c[3],bb[4]=$c[4],bb[5]=$c[5],bb[6]=$c[6],bb[7]=$c[7],bb[8]=$c[8],bb[9]=$c[9],bb[10]=$c[10],bb[11]=$c[11],bb[12]=$c[12],bb[13]=$c[13],bb[14]=$c[14],bb[15]=
$c[15],bb));lc=a.loD;fa.uniformMatrix4fv(za.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(pb[0]=lc[0],pb[1]=lc[1],pb[2]=lc[2],pb[3]=lc[3],pb[4]=lc[4],pb[5]=lc[5],pb[6]=lc[6],pb[7]=lc[7],pb[8]=lc[8],pb[9]=lc[9],pb[10]=lc[10],pb[11]=lc[11],pb[12]=lc[12],pb[13]=lc[13],pb[14]=lc[14],pb[15]=lc[15],pb));dc=a.hiD;fa.uniformMatrix4fv(oa.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Xa[0]=dc[0],Xa[1]=dc[1],Xa[2]=dc[2],Xa[3]=dc[3],Xa[4]=dc[4],Xa[5]=dc[5],Xa[6]=dc[6],Xa[7]=dc[7],
Xa[8]=dc[8],Xa[9]=dc[9],Xa[10]=dc[10],Xa[11]=dc[11],Xa[12]=dc[12],Xa[13]=dc[13],Xa[14]=dc[14],Xa[15]=dc[15],Xa));ad=a.resolution;Xc=ad[0];Ac=ad[1];q&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,fa.uniform2f(pa.location,Xc,Ac));Bd=a.viewBoxPos;ye=Bd[0];kd=Bd[1];q&&ne===ye&&Fe===kd||(ne=ye,Fe=kd,fa.uniform2f(Ca.location,ye,kd));Ed=a.viewBoxSize;ge=Ed[0];Ud=Ed[1];q&&ae===ge&&Ld===Ud||(ae=ge,Ld=Ud,fa.uniform2f(Aa.location,ge,Ud));Jd=a.maskHeight;q&&qd===Jd||(qd=Jd,fa.uniform1f(ja.location,Jd));Wc=a.drwLayer;q&&wd===
Wc||(wd=Wc,fa.uniform1f(N.location,Wc));ud=a.contextColor;ld=ud[0];Fd=ud[1];je=ud[2];ue=ud[3];q&&xd===ld&&Gd===Fd&&le===je&&me===ue||(xd=ld,Gd=Fd,le=je,me=ue,fa.uniform4f(V.location,ld,Fd,je,ue));(ke=a.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);he=ke._texture;fa.uniform1i(ma.location,he.bind());ve=a.offset;if(ee=a.count)hd?fa.drawElements(1,ee,hd.type,ve<<(hd.type-5121>>1)):fa.drawArrays(1,ve,ee),ba.viewportWidth=sd,ba.viewportHeight=oc,he.unbind()}W.unbind();va.dirty=!0;cc.setVAO(null);
va.profile=n},draw:function(b){var l,t,n,a,x,r;l=gb.next;l!==gb.cur&&(l?fa.bindFramebuffer(36160,l.framebuffer):fa.bindFramebuffer(36160,null),gb.cur=l);if(va.dirty){l=Ae[0];r=Ae[1];t=Ae[2];n=Ae[3];if(l!==$d[0]||r!==$d[1]||t!==$d[2]||n!==$d[3])fa.colorMask(l,r,t,n),$d[0]=l,$d[1]=r,$d[2]=t,$d[3]=n;l=Gc.frontFace;l!==va.frontFace&&(fa.frontFace(l),va.frontFace=l);l=Gc.polygonOffset_enable;l!==va.polygonOffset_enable&&(l?fa.enable(32823):fa.disable(32823),va.polygonOffset_enable=l);l=yd[0];r=yd[1];if(l!==
Qd[0]||r!==Qd[1])fa.polygonOffset(l,r),Qd[0]=l,Qd[1]=r;l=Gc.sample_alpha;l!==va.sample_alpha&&(l?fa.enable(32926):fa.disable(32926),va.sample_alpha=l);l=Gc.sample_enable;l!==va.sample_enable&&(l?fa.enable(32928):fa.disable(32928),va.sample_enable=l);l=Pd[0];r=Pd[1];if(l!==Md[0]||r!==Md[1])fa.sampleCoverage(l,r),Md[0]=l,Md[1]=r;l=Gc.stencil_enable;l!==va.stencil_enable&&(l?fa.enable(2960):fa.disable(2960),va.stencil_enable=l);l=Gc.stencil_mask;l!==va.stencil_mask&&(fa.stencilMask(l),va.stencil_mask=
l);l=Ue[0];r=Ue[1];t=Ue[2];if(l!==Id[0]||r!==Id[1]||t!==Id[2])fa.stencilFunc(l,r,t),Id[0]=l,Id[1]=r,Id[2]=t;l=ie[0];r=ie[1];t=ie[2];n=ie[3];if(l!==Nd[0]||r!==Nd[1]||t!==Nd[2]||n!==Nd[3])fa.stencilOpSeparate(l,r,t,n),Nd[0]=l,Nd[1]=r,Nd[2]=t,Nd[3]=n;l=Ee[0];r=Ee[1];t=Ee[2];n=Ee[3];if(l!==te[0]||r!==te[1]||t!==te[2]||n!==te[3])fa.stencilOpSeparate(l,r,t,n),te[0]=l,te[1]=r,te[2]=t,te[3]=n}bd.height=b.viewportHeight;bd.width=b.viewportWidth;bd.x=b.viewportX;bd.y=b.viewportY;t=bd.x|0;n=bd.y|0;a="width"in
bd?bd.width|0:ba.framebufferWidth-t;x="height"in bd?bd.height|0:ba.framebufferHeight-n;l=ba.viewportWidth;ba.viewportWidth=a;r=ba.viewportHeight;ba.viewportHeight=x;fa.viewport(t,n,a,x);pd[0]=t;pd[1]=n;pd[2]=a;pd[3]=x;fa.blendColor(0,0,0,0);ze[0]=0;ze[1]=0;ze[2]=0;ze[3]=0;fa.disable(3042);va.blend_enable=!1;fa.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;fa.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;fa.enable(2884);va.cull_enable=!0;fa.cullFace(1029);va.cull_face=
1029;fa.enable(2929);va.depth_enable=!0;fa.depthFunc(513);va.depth_func=513;fa.depthMask(!0);va.depth_mask=!0;fa.depthRange(0,1);Cd[0]=0;Cd[1]=1;fa.disable(3024);va.dither=!1;fa.lineWidth(2);va.lineWidth=2;td.height=b.scissorHeight;td.width=b.scissorWidth;td.x=b.scissorX;td.y=b.scissorY;t=td.x|0;n=td.y|0;a="width"in td?td.width|0:ba.framebufferWidth-t;x="height"in td?td.height|0:ba.framebufferHeight-n;fa.scissor(t,n,a,x);Qe[0]=t;Qe[1]=n;Qe[2]=a;Qe[3]=x;fa.enable(3089);va.scissor_enable=!0;t=va.profile;
va.profile=!1;fa.useProgram(q.program);cc.setVAO(null);n=sa.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==v.dtype||4!==a.size||a.buffer!==v||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,v.buffer),fa.vertexAttribPointer(n,4,v.dtype,!1,0,0),a.type=v.dtype,a.size=4,a.buffer=v,a.normalized=!1,a.offset=0,a.stride=0;n=Ga.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==f.dtype||4!==a.size||a.buffer!==f||!1!==a.normalized||0!==a.offset||0!==
a.stride)fa.bindBuffer(34962,f.buffer),fa.vertexAttribPointer(n,4,f.dtype,!1,0,0),a.type=f.dtype,a.size=4,a.buffer=f,a.normalized=!1,a.offset=0,a.stride=0;n=Da.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==e.dtype||4!==a.size||a.buffer!==e||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,e.buffer),fa.vertexAttribPointer(n,4,e.dtype,!1,0,0),a.type=e.dtype,a.size=4,a.buffer=e,a.normalized=!1,a.offset=0,a.stride=0;n=sb.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);
if(a.type!==k.dtype||4!==a.size||a.buffer!==k||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,k.buffer),fa.vertexAttribPointer(n,4,k.dtype,!1,0,0),a.type=k.dtype,a.size=4,a.buffer=k,a.normalized=!1,a.offset=0,a.stride=0;n=Ka.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==p.dtype||4!==a.size||a.buffer!==p||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,p.buffer),fa.vertexAttribPointer(n,4,p.dtype,!1,0,0),a.type=p.dtype,a.size=4,a.buffer=p,
a.normalized=!1,a.offset=0,a.stride=0;n=ea.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==J.dtype||4!==a.size||a.buffer!==J||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,J.buffer),fa.vertexAttribPointer(n,4,J.dtype,!1,0,0),a.type=J.dtype,a.size=4,a.buffer=J,a.normalized=!1,a.offset=0,a.stride=0;n=ca.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==z.dtype||4!==a.size||a.buffer!==z||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,
z.buffer),fa.vertexAttribPointer(n,4,z.dtype,!1,0,0),a.type=z.dtype,a.size=4,a.buffer=z,a.normalized=!1,a.offset=0,a.stride=0;n=na.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==y.dtype||4!==a.size||a.buffer!==y||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,y.buffer),fa.vertexAttribPointer(n,4,y.dtype,!1,0,0),a.type=y.dtype,a.size=4,a.buffer=y,a.normalized=!1,a.offset=0,a.stride=0;n=wa.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==
m.dtype||4!==a.size||a.buffer!==m||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(n,4,m.dtype,!1,0,0),a.type=m.dtype,a.size=4,a.buffer=m,a.normalized=!1,a.offset=0,a.stride=0;n=Ea.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==c.dtype||4!==a.size||a.buffer!==c||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,c.buffer),fa.vertexAttribPointer(n,4,c.dtype,!1,0,0),a.type=c.dtype,a.size=4,a.buffer=c,a.normalized=
!1,a.offset=0,a.stride=0;n=Oa.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==d.dtype||4!==a.size||a.buffer!==d||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,d.buffer),fa.vertexAttribPointer(n,4,d.dtype,!1,0,0),a.type=d.dtype,a.size=4,a.buffer=d,a.normalized=!1,a.offset=0,a.stride=0;n=vb.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==h.dtype||4!==a.size||a.buffer!==h||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,
h.buffer),fa.vertexAttribPointer(n,4,h.dtype,!1,0,0),a.type=h.dtype,a.size=4,a.buffer=h,a.normalized=!1,a.offset=0,a.stride=0;n=ha.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==H.dtype||4!==a.size||a.buffer!==H||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,H.buffer),fa.vertexAttribPointer(n,4,H.dtype,!1,0,0),a.type=H.dtype,a.size=4,a.buffer=H,a.normalized=!1,a.offset=0,a.stride=0;n=Y.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==w.dtype||
4!==a.size||a.buffer!==w||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,w.buffer),fa.vertexAttribPointer(n,4,w.dtype,!1,0,0),a.type=w.dtype,a.size=4,a.buffer=w,a.normalized=!1,a.offset=0,a.stride=0;n=xa.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==g.dtype||4!==a.size||a.buffer!==g||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,g.buffer),fa.vertexAttribPointer(n,4,g.dtype,!1,0,0),a.type=g.dtype,a.size=4,a.buffer=g,a.normalized=!1,a.offset=
0,a.stride=0;n=da.location;a=ka[n];a.buffer||fa.enableVertexAttribArray(n);if(a.type!==G.dtype||4!==a.size||a.buffer!==G||!1!==a.normalized||0!==a.offset||0!==a.stride)fa.bindBuffer(34962,G.buffer),fa.vertexAttribPointer(n,4,G.dtype,!1,0,0),a.type=G.dtype,a.size=4,a.buffer=G,a.normalized=!1,a.offset=0,a.stride=0;n=b.dim0A;fa.uniformMatrix4fv(T.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Oc[0]=n[0],Oc[1]=n[1],Oc[2]=n[2],Oc[3]=n[3],Oc[4]=n[4],Oc[5]=n[5],Oc[6]=n[6],Oc[7]=n[7],Oc[8]=n[8],
Oc[9]=n[9],Oc[10]=n[10],Oc[11]=n[11],Oc[12]=n[12],Oc[13]=n[13],Oc[14]=n[14],Oc[15]=n[15],Oc));n=b.dim1A;fa.uniformMatrix4fv(U.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(rd[0]=n[0],rd[1]=n[1],rd[2]=n[2],rd[3]=n[3],rd[4]=n[4],rd[5]=n[5],rd[6]=n[6],rd[7]=n[7],rd[8]=n[8],rd[9]=n[9],rd[10]=n[10],rd[11]=n[11],rd[12]=n[12],rd[13]=n[13],rd[14]=n[14],rd[15]=n[15],rd));n=b.dim0B;fa.uniformMatrix4fv(P.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Hc[0]=n[0],Hc[1]=n[1],Hc[2]=n[2],
Hc[3]=n[3],Hc[4]=n[4],Hc[5]=n[5],Hc[6]=n[6],Hc[7]=n[7],Hc[8]=n[8],Hc[9]=n[9],Hc[10]=n[10],Hc[11]=n[11],Hc[12]=n[12],Hc[13]=n[13],Hc[14]=n[14],Hc[15]=n[15],Hc));n=b.dim1B;fa.uniformMatrix4fv(qa.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(gd[0]=n[0],gd[1]=n[1],gd[2]=n[2],gd[3]=n[3],gd[4]=n[4],gd[5]=n[5],gd[6]=n[6],gd[7]=n[7],gd[8]=n[8],gd[9]=n[9],gd[10]=n[10],gd[11]=n[11],gd[12]=n[12],gd[13]=n[13],gd[14]=n[14],gd[15]=n[15],gd));n=b.dim0C;fa.uniformMatrix4fv(M.location,!1,Array.isArray(n)||
n instanceof Float32Array?n:(Sc[0]=n[0],Sc[1]=n[1],Sc[2]=n[2],Sc[3]=n[3],Sc[4]=n[4],Sc[5]=n[5],Sc[6]=n[6],Sc[7]=n[7],Sc[8]=n[8],Sc[9]=n[9],Sc[10]=n[10],Sc[11]=n[11],Sc[12]=n[12],Sc[13]=n[13],Sc[14]=n[14],Sc[15]=n[15],Sc));n=b.dim1C;fa.uniformMatrix4fv(ra.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(md[0]=n[0],md[1]=n[1],md[2]=n[2],md[3]=n[3],md[4]=n[4],md[5]=n[5],md[6]=n[6],md[7]=n[7],md[8]=n[8],md[9]=n[9],md[10]=n[10],md[11]=n[11],md[12]=n[12],md[13]=n[13],md[14]=n[14],md[15]=n[15],
md));n=b.dim0D;fa.uniformMatrix4fv(S.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Wb[0]=n[0],Wb[1]=n[1],Wb[2]=n[2],Wb[3]=n[3],Wb[4]=n[4],Wb[5]=n[5],Wb[6]=n[6],Wb[7]=n[7],Wb[8]=n[8],Wb[9]=n[9],Wb[10]=n[10],Wb[11]=n[11],Wb[12]=n[12],Wb[13]=n[13],Wb[14]=n[14],Wb[15]=n[15],Wb));n=b.dim1D;fa.uniformMatrix4fv(O.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Gb[0]=n[0],Gb[1]=n[1],Gb[2]=n[2],Gb[3]=n[3],Gb[4]=n[4],Gb[5]=n[5],Gb[6]=n[6],Gb[7]=n[7],Gb[8]=n[8],Gb[9]=n[9],Gb[10]=n[10],
Gb[11]=n[11],Gb[12]=n[12],Gb[13]=n[13],Gb[14]=n[14],Gb[15]=n[15],Gb));n=b.loA;fa.uniformMatrix4fv(ya.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(vc[0]=n[0],vc[1]=n[1],vc[2]=n[2],vc[3]=n[3],vc[4]=n[4],vc[5]=n[5],vc[6]=n[6],vc[7]=n[7],vc[8]=n[8],vc[9]=n[9],vc[10]=n[10],vc[11]=n[11],vc[12]=n[12],vc[13]=n[13],vc[14]=n[14],vc[15]=n[15],vc));n=b.hiA;fa.uniformMatrix4fv(ga.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ab[0]=n[0],Ab[1]=n[1],Ab[2]=n[2],Ab[3]=n[3],Ab[4]=n[4],Ab[5]=
n[5],Ab[6]=n[6],Ab[7]=n[7],Ab[8]=n[8],Ab[9]=n[9],Ab[10]=n[10],Ab[11]=n[11],Ab[12]=n[12],Ab[13]=n[13],Ab[14]=n[14],Ab[15]=n[15],Ab));n=b.loB;fa.uniformMatrix4fv(ua.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(yc[0]=n[0],yc[1]=n[1],yc[2]=n[2],yc[3]=n[3],yc[4]=n[4],yc[5]=n[5],yc[6]=n[6],yc[7]=n[7],yc[8]=n[8],yc[9]=n[9],yc[10]=n[10],yc[11]=n[11],yc[12]=n[12],yc[13]=n[13],yc[14]=n[14],yc[15]=n[15],yc));n=b.hiB;fa.uniformMatrix4fv(X.location,!1,Array.isArray(n)||n instanceof Float32Array?
n:(Db[0]=n[0],Db[1]=n[1],Db[2]=n[2],Db[3]=n[3],Db[4]=n[4],Db[5]=n[5],Db[6]=n[6],Db[7]=n[7],Db[8]=n[8],Db[9]=n[9],Db[10]=n[10],Db[11]=n[11],Db[12]=n[12],Db[13]=n[13],Db[14]=n[14],Db[15]=n[15],Db));n=b.loC;fa.uniformMatrix4fv(aa.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Lc[0]=n[0],Lc[1]=n[1],Lc[2]=n[2],Lc[3]=n[3],Lc[4]=n[4],Lc[5]=n[5],Lc[6]=n[6],Lc[7]=n[7],Lc[8]=n[8],Lc[9]=n[9],Lc[10]=n[10],Lc[11]=n[11],Lc[12]=n[12],Lc[13]=n[13],Lc[14]=n[14],Lc[15]=n[15],Lc));n=b.hiC;fa.uniformMatrix4fv(la.location,
!1,Array.isArray(n)||n instanceof Float32Array?n:(mc[0]=n[0],mc[1]=n[1],mc[2]=n[2],mc[3]=n[3],mc[4]=n[4],mc[5]=n[5],mc[6]=n[6],mc[7]=n[7],mc[8]=n[8],mc[9]=n[9],mc[10]=n[10],mc[11]=n[11],mc[12]=n[12],mc[13]=n[13],mc[14]=n[14],mc[15]=n[15],mc));n=b.loD;fa.uniformMatrix4fv(za.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ic[0]=n[0],Ic[1]=n[1],Ic[2]=n[2],Ic[3]=n[3],Ic[4]=n[4],Ic[5]=n[5],Ic[6]=n[6],Ic[7]=n[7],Ic[8]=n[8],Ic[9]=n[9],Ic[10]=n[10],Ic[11]=n[11],Ic[12]=n[12],Ic[13]=n[13],Ic[14]=
n[14],Ic[15]=n[15],Ic));n=b.hiD;fa.uniformMatrix4fv(oa.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(hd[0]=n[0],hd[1]=n[1],hd[2]=n[2],hd[3]=n[3],hd[4]=n[4],hd[5]=n[5],hd[6]=n[6],hd[7]=n[7],hd[8]=n[8],hd[9]=n[9],hd[10]=n[10],hd[11]=n[11],hd[12]=n[12],hd[13]=n[13],hd[14]=n[14],hd[15]=n[15],hd));n=b.resolution;fa.uniform2f(pa.location,n[0],n[1]);n=b.viewBoxPos;fa.uniform2f(Ca.location,n[0],n[1]);n=b.viewBoxSize;fa.uniform2f(Aa.location,n[0],n[1]);fa.uniform1f(ja.location,b.maskHeight);fa.uniform1f(N.location,
b.drwLayer);n=b.contextColor;fa.uniform4f(V.location,n[0],n[1],n[2],n[3]);(n=b.maskTexture)&&"framebuffer"===n._reglType&&(n=n.color[0]);n=n._texture;fa.uniform1i(ma.location,n.bind());fa.uniform1i(Fa.location,E.bind());(a=La.elements)?fa.bindBuffer(34963,a.buffer.buffer):cc.currentVAO&&(a=Ha.getElements(cc.currentVAO.elements))&&fa.bindBuffer(34963,a.buffer.buffer);x=b.offset;if(b=b.count)a?fa.drawElements(1,b,a.type,x<<(a.type-5121>>1)):fa.drawArrays(1,x,b),va.dirty=!0,cc.setVAO(null),ba.viewportWidth=
l,ba.viewportHeight=r,va.profile=t,n.unbind(),E.unbind()},scope:function(a,q,r){var M,O,ea,ca,E,Y,na,Da,T,Ga,P,N,xa,V,Fa,sb,X,aa,U,pa,ha,S,ka,ga,wa,qa,Ca,W,Aa,ua,oa,fa,da,A,ja,Ka,sa,ra,Ba,ma,za,la,Ea,vb,ya,Oa,Ha,gb,hb,fc,Gb,Sc,Wb,qc,pc,Ab,Db,Md,Ee,nc,cc,ie,rc,db,bb,Xa,Jc,Ue,md,mc,pb,Hc,te,gd,Id,Oc,vc,Rb,yc,Ad,rd,Ic,Ec,Lc,$d,pd,ze,Nd,Nb,yd,Pc,Qe,cd,hd,Pd,Ae,De,Qd,Cd,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,be,de,
fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;
M=bd.x|0;O=bd.y|0;ea="width"in bd?bd.width|0:ba.framebufferWidth-M;ca="height"in bd?bd.height|0:ba.framebufferHeight-O;E=ba.viewportWidth;ba.viewportWidth=ea;Y=ba.viewportHeight;ba.viewportHeight=ca;na=Dd[0];Dd[0]=M;Da=Dd[1];Dd[1]=O;T=Dd[2];Dd[2]=ea;Ga=Dd[3];Dd[3]=ca;P=Tb[0];Tb[0]=0;N=Tb[1];Tb[1]=0;xa=Tb[2];Tb[2]=0;V=Tb[3];Tb[3]=0;Fa=Gc.blend_enable;Gc.blend_enable=!1;sb=Hd[0];Hd[0]=32774;X=Hd[1];Hd[1]=32774;aa=Td[0];Td[0]=770;U=Td[1];Td[1]=771;pa=Td[2];Td[2]=1;ha=Td[3];Td[3]=1;S=Gc.cull_enable;Gc.cull_enable=
!0;ka=Gc.cull_face;Gc.cull_face=1029;ga=Gc.depth_enable;Gc.depth_enable=!0;wa=Gc.depth_func;Gc.depth_func=513;qa=Gc.depth_mask;Gc.depth_mask=!0;Ca=qe[0];qe[0]=0;W=qe[1];qe[1]=1;Aa=Gc.dither;Gc.dither=!1;ua=Gc.lineWidth;Gc.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;oa=td.x|0;fa=td.y|0;da="width"in td?td.width|0:ba.framebufferWidth-oa;A="height"in td?td.height|0:ba.framebufferHeight-fa;ja=Be[0];Be[0]=oa;Ka=Be[1];Be[1]=fa;sa=Be[2];Be[2]=da;ra=Be[3];
Be[3]=A;Ba=Gc.scissor_enable;Gc.scissor_enable=!0;ma=va.profile;va.profile=!1;za=a.offset;la=La.offset;La.offset=za;Ea=a.count;vb=La.count;La.count=Ea;ya=La.primitive;La.primitive=1;Oa=a.contextColor;Ha=Ia[24];Ia[24]=Oa;gb=a.dim0A;hb=Ia[3];Ia[3]=gb;fc=a.dim0B;Gb=Ia[5];Ia[5]=fc;Sc=a.dim0C;Wb=Ia[7];Ia[7]=Sc;qc=a.dim0D;pc=Ia[9];Ia[9]=qc;Ab=a.dim1A;Db=Ia[4];Ia[4]=Ab;Md=a.dim1B;Ee=Ia[6];Ia[6]=Md;nc=a.dim1C;cc=Ia[8];Ia[8]=nc;ie=a.dim1D;rc=Ia[10];Ia[10]=ie;db=a.drwLayer;bb=Ia[23];Ia[23]=db;Xa=a.hiA;Jc=Ia[12];
Ia[12]=Xa;Ue=a.hiB;md=Ia[14];Ia[14]=Ue;mc=a.hiC;pb=Ia[16];Ia[16]=mc;Hc=a.hiD;te=Ia[18];Ia[18]=Hc;gd=a.loA;Id=Ia[11];Ia[11]=gd;Oc=a.loB;vc=Ia[13];Ia[13]=Oc;Rb=a.loC;yc=Ia[15];Ia[15]=Rb;Ad=a.loD;rd=Ia[17];Ia[17]=Ad;Ic=a.maskHeight;Ec=Ia[22];Ia[22]=Ic;Lc=a.maskTexture;$d=Ia[25];Ia[25]=Lc;pd=Ia[26];Ia[26]=ta;ze=a.resolution;Nd=Ia[19];Ia[19]=ze;Nb=a.viewBoxPos;yd=Ia[20];Ia[20]=Nb;Pc=a.viewBoxSize;Qe=Ia[21];Ia[21]=Pc;cd=B.buffer;B.buffer=G;hd=B.divisor;B.divisor=0;Pd=B.normalized;B.normalized=!1;Ae=B.offset;
B.offset=0;De=B.size;B.size=0;Qd=B.state;B.state=1;Cd=B.stride;B.stride=0;ae=B.type;B.type=G.dtype;Ud=B.w;B.w=0;Ld=B.x;B.x=0;Jd=B.y;B.y=0;qd=B.z;B.z=0;Wc=b.buffer;b.buffer=v;wd=b.divisor;b.divisor=0;ud=b.normalized;b.normalized=!1;ld=b.offset;b.offset=0;xd=b.size;b.size=0;Fd=b.state;b.state=1;Gd=b.stride;b.stride=0;je=b.type;b.type=v.dtype;le=b.w;b.w=0;ue=b.x;b.x=0;me=b.y;b.y=0;ke=b.z;b.z=0;he=l.buffer;l.buffer=f;ve=l.divisor;l.divisor=0;ee=l.normalized;l.normalized=!1;oe=l.offset;l.offset=0;Rc=l.size;
l.size=0;id=l.state;l.state=1;we=l.stride;l.stride=0;re=l.type;l.type=f.dtype;Rd=l.w;l.w=0;Vd=l.x;l.x=0;Wd=l.y;l.y=0;Xd=l.z;l.z=0;pe=x.buffer;x.buffer=e;Ce=x.divisor;x.divisor=0;Ge=x.normalized;x.normalized=!1;se=x.offset;x.offset=0;Ve=x.size;x.size=0;We=x.state;x.state=1;Re=x.stride;x.stride=0;xe=x.type;x.type=e.dtype;Je=x.w;x.w=0;Le=x.x;x.x=0;Me=x.y;x.y=0;Ne=x.z;x.z=0;Ke=R.buffer;R.buffer=k;Sd=R.divisor;R.divisor=0;be=R.normalized;R.normalized=!1;de=R.offset;R.offset=0;fe=R.size;R.size=0;Oe=R.state;
R.state=1;Kd=R.stride;R.stride=0;Yd=R.type;R.type=k.dtype;He=R.w;R.w=0;Pe=R.x;R.x=0;df=R.y;R.y=0;cf=R.z;R.z=0;Xe=C.buffer;C.buffer=p;Se=C.divisor;C.divisor=0;bf=C.normalized;C.normalized=!1;af=C.offset;C.offset=0;Ye=C.size;C.size=0;Ze=C.state;C.state=1;Zd=C.stride;C.stride=0;ce=C.type;C.type=p.dtype;$e=C.w;C.w=0;kf=C.x;C.x=0;of=C.y;C.y=0;gf=C.z;C.z=0;lf=F.buffer;F.buffer=J;mf=F.divisor;F.divisor=0;nf=F.normalized;F.normalized=!1;sf=F.offset;F.offset=0;pf=F.size;F.size=0;tf=F.state;F.state=1;Cf=F.stride;
F.stride=0;Df=F.type;F.type=J.dtype;Te=F.w;F.w=0;Ie=F.x;F.x=0;qf=F.y;F.y=0;rf=F.z;F.z=0;Ef=ia.buffer;ia.buffer=z;Hf=ia.divisor;ia.divisor=0;Bf=ia.normalized;ia.normalized=!1;Ff=ia.offset;ia.offset=0;Gf=ia.size;ia.size=0;xf=ia.state;ia.state=1;yf=ia.stride;ia.stride=0;wf=ia.type;ia.type=z.dtype;zf=ia.w;ia.w=0;Af=ia.x;ia.x=0;Jf=ia.y;ia.y=0;Kf=ia.z;ia.z=0;Lf=I.buffer;I.buffer=y;Mf=I.divisor;I.divisor=0;uf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;If=I.size;I.size=0;vf=I.state;I.state=1;dg=
I.stride;I.stride=0;Sf=I.type;I.type=y.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;hf=I.y;I.y=0;ef=I.z;I.z=0;Nf=K.buffer;K.buffer=m;Of=K.divisor;K.divisor=0;eg=K.normalized;K.normalized=!1;fg=K.offset;K.offset=0;gg=K.size;K.size=0;hg=K.state;K.state=1;ig=K.stride;K.stride=0;Wf=K.type;K.type=m.dtype;Uf=K.w;K.w=0;Xf=K.x;K.x=0;Yf=K.y;K.y=0;Zf=K.z;K.z=0;jg=D.buffer;D.buffer=c;rg=D.divisor;D.divisor=0;sg=D.normalized;D.normalized=!1;tg=D.offset;D.offset=0;ug=D.size;D.size=0;vg=D.state;D.state=1;wg=D.stride;D.stride=
0;xg=D.type;D.type=c.dtype;yg=D.w;D.w=0;zg=D.x;D.x=0;Ag=D.y;D.y=0;Bg=D.z;D.z=0;jf=n.buffer;n.buffer=d;ff=n.divisor;n.divisor=0;Pf=n.normalized;n.normalized=!1;Qf=n.offset;n.offset=0;kg=n.size;n.size=0;lg=n.state;n.state=1;mg=n.stride;n.stride=0;ng=n.type;n.type=d.dtype;og=n.w;n.w=0;$f=n.x;n.x=0;Vf=n.y;n.y=0;ag=n.z;n.z=0;bg=t.buffer;t.buffer=h;cg=t.divisor;t.divisor=0;pg=t.normalized;t.normalized=!1;Cg=t.offset;t.offset=0;Dg=t.size;t.size=0;Eg=t.state;t.state=1;Fg=t.stride;t.stride=0;Gg=t.type;t.type=
h.dtype;Hg=t.w;t.w=0;Ig=t.x;t.x=0;Jg=t.y;t.y=0;Kg=t.z;t.z=0;Lg=Z.buffer;Z.buffer=H;Mg=Z.divisor;Z.divisor=0;Ng=Z.normalized;Z.normalized=!1;Og=Z.offset;Z.offset=0;Pg=Z.size;Z.size=0;Qg=Z.state;Z.state=1;Rg=Z.stride;Z.stride=0;Sg=Z.type;Z.type=H.dtype;Tg=Z.w;Z.w=0;Ug=Z.x;Z.x=0;Vg=Z.y;Z.y=0;Wg=Z.z;Z.z=0;Xg=Q.buffer;Q.buffer=w;Yg=Q.divisor;Q.divisor=0;Zg=Q.normalized;Q.normalized=!1;$g=Q.offset;Q.offset=0;ah=Q.size;Q.size=0;bh=Q.state;Q.state=1;ch=Q.stride;Q.stride=0;dh=Q.type;Q.type=w.dtype;eh=Q.w;
Q.w=0;fh=Q.x;Q.x=0;gh=Q.y;Q.y=0;hh=Q.z;Q.z=0;ih=u.buffer;u.buffer=g;jh=u.divisor;u.divisor=0;kh=u.normalized;u.normalized=!1;lh=u.offset;u.offset=0;mh=u.size;u.size=0;nh=u.state;u.state=1;oh=u.stride;u.stride=0;ph=u.type;u.type=g.dtype;qh=u.w;u.w=0;rh=u.x;u.x=0;sh=u.y;u.y=0;th=u.z;u.z=0;uh=bc.vert;bc.vert=2;vh=bc.frag;bc.frag=1;va.dirty=!0;q(ba,a,r);ba.viewportWidth=E;ba.viewportHeight=Y;Dd[0]=na;Dd[1]=Da;Dd[2]=T;Dd[3]=Ga;Tb[0]=P;Tb[1]=N;Tb[2]=xa;Tb[3]=V;Gc.blend_enable=Fa;Hd[0]=sb;Hd[1]=X;Td[0]=
aa;Td[1]=U;Td[2]=pa;Td[3]=ha;Gc.cull_enable=S;Gc.cull_face=ka;Gc.depth_enable=ga;Gc.depth_func=wa;Gc.depth_mask=qa;qe[0]=Ca;qe[1]=W;Gc.dither=Aa;Gc.lineWidth=ua;Be[0]=ja;Be[1]=Ka;Be[2]=sa;Be[3]=ra;Gc.scissor_enable=Ba;va.profile=ma;La.offset=la;La.count=vb;La.primitive=ya;Ia[24]=Ha;Ia[3]=hb;Ia[5]=Gb;Ia[7]=Wb;Ia[9]=pc;Ia[4]=Db;Ia[6]=Ee;Ia[8]=cc;Ia[10]=rc;Ia[23]=bb;Ia[12]=Jc;Ia[14]=md;Ia[16]=pb;Ia[18]=te;Ia[11]=Id;Ia[13]=vc;Ia[15]=yc;Ia[17]=rd;Ia[22]=Ec;Ia[25]=$d;Ia[26]=pd;Ia[19]=Nd;Ia[20]=yd;Ia[21]=
Qe;B.buffer=cd;B.divisor=hd;B.normalized=Pd;B.offset=Ae;B.size=De;B.state=Qd;B.stride=Cd;B.type=ae;B.w=Ud;B.x=Ld;B.y=Jd;B.z=qd;b.buffer=Wc;b.divisor=wd;b.normalized=ud;b.offset=ld;b.size=xd;b.state=Fd;b.stride=Gd;b.type=je;b.w=le;b.x=ue;b.y=me;b.z=ke;l.buffer=he;l.divisor=ve;l.normalized=ee;l.offset=oe;l.size=Rc;l.state=id;l.stride=we;l.type=re;l.w=Rd;l.x=Vd;l.y=Wd;l.z=Xd;x.buffer=pe;x.divisor=Ce;x.normalized=Ge;x.offset=se;x.size=Ve;x.state=We;x.stride=Re;x.type=xe;x.w=Je;x.x=Le;x.y=Me;x.z=Ne;R.buffer=
Ke;R.divisor=Sd;R.normalized=be;R.offset=de;R.size=fe;R.state=Oe;R.stride=Kd;R.type=Yd;R.w=He;R.x=Pe;R.y=df;R.z=cf;C.buffer=Xe;C.divisor=Se;C.normalized=bf;C.offset=af;C.size=Ye;C.state=Ze;C.stride=Zd;C.type=ce;C.w=$e;C.x=kf;C.y=of;C.z=gf;F.buffer=lf;F.divisor=mf;F.normalized=nf;F.offset=sf;F.size=pf;F.state=tf;F.stride=Cf;F.type=Df;F.w=Te;F.x=Ie;F.y=qf;F.z=rf;ia.buffer=Ef;ia.divisor=Hf;ia.normalized=Bf;ia.offset=Ff;ia.size=Gf;ia.state=xf;ia.stride=yf;ia.type=wf;ia.w=zf;ia.x=Af;ia.y=Jf;ia.z=Kf;I.buffer=
Lf;I.divisor=Mf;I.normalized=uf;I.offset=Rf;I.size=If;I.state=vf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=hf;I.z=ef;K.buffer=Nf;K.divisor=Of;K.normalized=eg;K.offset=fg;K.size=gg;K.state=hg;K.stride=ig;K.type=Wf;K.w=Uf;K.x=Xf;K.y=Yf;K.z=Zf;D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;n.buffer=jf;n.divisor=ff;n.normalized=Pf;n.offset=Qf;n.size=kg;n.state=lg;n.stride=mg;n.type=ng;n.w=og;n.x=$f;n.y=Vf;n.z=ag;t.buffer=bg;t.divisor=
cg;t.normalized=pg;t.offset=Cg;t.size=Dg;t.state=Eg;t.stride=Fg;t.type=Gg;t.w=Hg;t.x=Ig;t.y=Jg;t.z=Kg;Z.buffer=Lg;Z.divisor=Mg;Z.normalized=Ng;Z.offset=Og;Z.size=Pg;Z.state=Qg;Z.stride=Rg;Z.type=Sg;Z.w=Tg;Z.x=Ug;Z.y=Vg;Z.z=Wg;Q.buffer=Xg;Q.divisor=Yg;Q.normalized=Zg;Q.offset=$g;Q.size=ah;Q.state=bh;Q.stride=ch;Q.type=dh;Q.w=eh;Q.x=fh;Q.y=gh;Q.z=hh;u.buffer=ih;u.divisor=jh;u.normalized=kh;u.offset=lh;u.size=mh;u.state=nh;u.stride=oh;u.type=ph;u.w=qh;u.x=rh;u.y=sh;u.z=th;bc.vert=uh;bc.frag=vh;va.dirty=
!0}}},$1:function(a,r){var q,v,f,e,k,p,J,z,y,m,c,d,h,H,w,g,G,E,u,B,b,l,x,R,C,F,ia,I,K,D;q=a.attributes;v=a.current;f=a.framebuffer;e=a.gl;k=a.next;p=a.vao;J=k.blend_color;z=v.blend_color;y=k.blend_equation;m=v.blend_equation;c=k.blend_func;d=v.blend_func;h=k.colorMask;H=v.colorMask;w=k.depth_range;g=v.depth_range;G=k.polygonOffset_offset;E=v.polygonOffset_offset;u=k.sample_coverage;B=v.sample_coverage;b=k.scissor_box;l=v.scissor_box;x=k.stencil_func;R=v.stencil_func;C=k.stencil_opBack;F=v.stencil_opBack;
ia=k.stencil_opFront;I=v.stencil_opFront;K=k.viewport;D=v.viewport;return{poll:function(){var n,t,a,q,p,r,W,da,V,T,P,M,S,U,qa,A,O,N,ga,X,la,oa;v.dirty=!1;t=k.blend_enable;a=k.cull_enable;q=k.depth_enable;p=k.dither;r=k.polygonOffset_enable;W=k.sample_alpha;da=k.sample_enable;V=k.scissor_enable;T=k.stencil_enable;P=k.cull_face;M=v.cull_face;S=k.depth_func;U=v.depth_func;qa=k.depth_mask;A=v.depth_mask;O=k.frontFace;N=v.frontFace;ga=k.lineWidth;X=v.lineWidth;la=k.stencil_mask;oa=v.stencil_mask;n=f.next;
n!==f.cur&&(n?e.bindFramebuffer(36160,n.framebuffer):e.bindFramebuffer(36160,null),f.cur=n);t!==v.blend_enable&&(t?e.enable(3042):e.disable(3042),v.blend_enable=t);a!==v.cull_enable&&(a?e.enable(2884):e.disable(2884),v.cull_enable=a);q!==v.depth_enable&&(q?e.enable(2929):e.disable(2929),v.depth_enable=q);p!==v.dither&&(p?e.enable(3024):e.disable(3024),v.dither=p);r!==v.polygonOffset_enable&&(r?e.enable(32823):e.disable(32823),v.polygonOffset_enable=r);W!==v.sample_alpha&&(W?e.enable(32926):e.disable(32926),
v.sample_alpha=W);da!==v.sample_enable&&(da?e.enable(32928):e.disable(32928),v.sample_enable=da);V!==v.scissor_enable&&(V?e.enable(3089):e.disable(3089),v.scissor_enable=V);T!==v.stencil_enable&&(T?e.enable(2960):e.disable(2960),v.stencil_enable=T);if(J[0]!==z[0]||J[1]!==z[1]||J[2]!==z[2]||J[3]!==z[3])e.blendColor(J[0],J[1],J[2],J[3]),z[0]=J[0],z[1]=J[1],z[2]=J[2],z[3]=J[3];if(y[0]!==m[0]||y[1]!==m[1])e.blendEquationSeparate(y[0],y[1]),m[0]=y[0],m[1]=y[1];if(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||
c[3]!==d[3])e.blendFuncSeparate(c[0],c[1],c[2],c[3]),d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3];if(h[0]!==H[0]||h[1]!==H[1]||h[2]!==H[2]||h[3]!==H[3])e.colorMask(h[0],h[1],h[2],h[3]),H[0]=h[0],H[1]=h[1],H[2]=h[2],H[3]=h[3];P!==M&&(e.cullFace(P),v.cull_face=P);S!==U&&(e.depthFunc(S),v.depth_func=S);qa!==A&&(e.depthMask(qa),v.depth_mask=qa);if(w[0]!==g[0]||w[1]!==g[1])e.depthRange(w[0],w[1]),g[0]=w[0],g[1]=w[1];O!==N&&(e.frontFace(O),v.frontFace=O);ga!==X&&(e.lineWidth(ga),v.lineWidth=ga);if(G[0]!==E[0]||
G[1]!==E[1])e.polygonOffset(G[0],G[1]),E[0]=G[0],E[1]=G[1];if(u[0]!==B[0]||u[1]!==B[1])e.sampleCoverage(u[0],u[1]),B[0]=u[0],B[1]=u[1];if(b[0]!==l[0]||b[1]!==l[1]||b[2]!==l[2]||b[3]!==l[3])e.scissor(b[0],b[1],b[2],b[3]),l[0]=b[0],l[1]=b[1],l[2]=b[2],l[3]=b[3];if(x[0]!==R[0]||x[1]!==R[1]||x[2]!==R[2])e.stencilFunc(x[0],x[1],x[2]),R[0]=x[0],R[1]=x[1],R[2]=x[2];la!==oa&&(e.stencilMask(la),v.stencil_mask=la);if(C[0]!==F[0]||C[1]!==F[1]||C[2]!==F[2]||C[3]!==F[3])e.stencilOpSeparate(C[0],C[1],C[2],C[3]),
F[0]=C[0],F[1]=C[1],F[2]=C[2],F[3]=C[3];if(ia[0]!==I[0]||ia[1]!==I[1]||ia[2]!==I[2]||ia[3]!==I[3])e.stencilOpSeparate(ia[0],ia[1],ia[2],ia[3]),I[0]=ia[0],I[1]=ia[1],I[2]=ia[2],I[3]=ia[3];if(K[0]!==D[0]||K[1]!==D[1]||K[2]!==D[2]||K[3]!==D[3])e.viewport(K[0],K[1],K[2],K[3]),D[0]=K[0],D[1]=K[1],D[2]=K[2],D[3]=K[3]},refresh:function(){var n,t,a,Q,Wa,A,W,da,V,T,P,M,S,U,qa,ra;v.dirty=!1;t=k.blend_enable;a=k.cull_enable;Q=k.depth_enable;Wa=k.dither;A=k.polygonOffset_enable;W=k.sample_alpha;da=k.sample_enable;
V=k.scissor_enable;T=k.stencil_enable;P=k.cull_face;M=k.depth_func;S=k.depth_mask;U=k.frontFace;qa=k.lineWidth;ra=k.stencil_mask;(n=f.next)?e.bindFramebuffer(36160,n.framebuffer):e.bindFramebuffer(36160,null);f.cur=n;n=q[0];n.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(0,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(0,n.divisor);n=q[1];n.buffer?
(e.enableVertexAttribArray(1),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(1,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(1,n.divisor);n=q[2];n.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(2,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(2,
n.divisor);n=q[3];n.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(3,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(3,n.divisor);n=q[4];n.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(4,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,n.x,n.y,n.z,
n.w),n.buffer=null);r.vertexAttribDivisorANGLE(4,n.divisor);n=q[5];n.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(5,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(5,n.divisor);n=q[6];n.buffer?(e.enableVertexAttribArray(6),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(6,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(6),
e.vertexAttrib4f(6,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(6,n.divisor);n=q[7];n.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(7,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(7,n.divisor);n=q[8];n.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(8,n.size,n.type,n.normalized,n.stride,
n.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(8,n.divisor);n=q[9];n.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(9,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(9,n.divisor);n=q[10];n.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(10,
n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(10,n.divisor);n=q[11];n.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(11,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(11,n.divisor);n=q[12];n.buffer?(e.enableVertexAttribArray(12),
e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(12,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(12,n.divisor);n=q[13];n.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(13,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(13,
n.divisor);n=q[14];n.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(14,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,n.x,n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(14,n.divisor);n=q[15];n.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,n.buffer.buffer),e.vertexAttribPointer(15,n.size,n.type,n.normalized,n.stride,n.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,n.x,
n.y,n.z,n.w),n.buffer=null);r.vertexAttribDivisorANGLE(15,n.divisor);p.currentVAO=null;p.setVAO(p.targetVAO);t?e.enable(3042):e.disable(3042);v.blend_enable=t;a?e.enable(2884):e.disable(2884);v.cull_enable=a;Q?e.enable(2929):e.disable(2929);v.depth_enable=Q;Wa?e.enable(3024):e.disable(3024);v.dither=Wa;A?e.enable(32823):e.disable(32823);v.polygonOffset_enable=A;W?e.enable(32926):e.disable(32926);v.sample_alpha=W;da?e.enable(32928):e.disable(32928);v.sample_enable=da;V?e.enable(3089):e.disable(3089);
v.scissor_enable=V;T?e.enable(2960):e.disable(2960);v.stencil_enable=T;e.blendColor(J[0],J[1],J[2],J[3]);z[0]=J[0];z[1]=J[1];z[2]=J[2];z[3]=J[3];e.blendEquationSeparate(y[0],y[1]);m[0]=y[0];m[1]=y[1];e.blendFuncSeparate(c[0],c[1],c[2],c[3]);d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[3];e.colorMask(h[0],h[1],h[2],h[3]);H[0]=h[0];H[1]=h[1];H[2]=h[2];H[3]=h[3];e.cullFace(P);v.cull_face=P;e.depthFunc(M);v.depth_func=M;e.depthMask(S);v.depth_mask=S;e.depthRange(w[0],w[1]);g[0]=w[0];g[1]=w[1];e.frontFace(U);
v.frontFace=U;e.lineWidth(qa);v.lineWidth=qa;e.polygonOffset(G[0],G[1]);E[0]=G[0];E[1]=G[1];e.sampleCoverage(u[0],u[1]);B[0]=u[0];B[1]=u[1];e.scissor(b[0],b[1],b[2],b[3]);l[0]=b[0];l[1]=b[1];l[2]=b[2];l[3]=b[3];e.stencilFunc(x[0],x[1],x[2]);R[0]=x[0];R[1]=x[1];R[2]=x[2];e.stencilMask(ra);v.stencil_mask=ra;e.stencilOpSeparate(C[0],C[1],C[2],C[3]);F[0]=C[0];F[1]=C[1];F[2]=C[2];F[3]=C[3];e.stencilOpSeparate(ia[0],ia[1],ia[2],ia[3]);I[0]=ia[0];I[1]=ia[1];I[2]=ia[2];I[3]=ia[3];e.viewport(K[0],K[1],K[2],
K[3]);D[0]=K[0];D[1]=K[1];D[2]=K[2];D[3]=K[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,r,q,v,f,e,k,p,J,z,y,m,c,d,h,H,w,g,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,Wa,A,W,da,V,T,P,M,S,U,qa,ra){var O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba,va,La,Ha,gb,fa,Gc,bc,Ia,cc,Tb;O=a.attributes;N=a.buffer;ga=a.context;X=a.current;la=a.draw;oa=
a.elements;ya=a.extensions;ua=a.framebuffer;aa=a.gl;za=a.isBufferArgs;ja=a.next;ma=a.shader;sa=a.uniforms;Ga=a.vao;Da=ja.blend_color;sb=X.blend_color;Ka=ja.blend_equation;ea=X.blend_equation;ca=ja.blend_func;na=X.blend_func;wa=ja.colorMask;Ea=X.colorMask;Oa=ja.depth_range;vb=X.depth_range;ha=ja.polygonOffset_offset;Y=X.polygonOffset_offset;xa=ja.sample_coverage;Fa=X.sample_coverage;pa=ja.scissor_box;Ca=X.scissor_box;Aa=ja.stencil_func;ka=X.stencil_func;ba=ja.stencil_opBack;va=X.stencil_opBack;La=
ja.stencil_opFront;Ha=X.stencil_opFront;gb=ja.viewport;fa=X.viewport;Gc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};bc={};bc.buffer=q;bc.divisor=1;Ia={};Ia.buffer=v;Ia.divisor=1;cc={};cc.buffer=f;cc.divisor=1;Tb={};Tb.buffer=e;Tb.divisor=1;return{batch:function(b,l){var a,e,q,h,x,f;a=ua.next;a!==ua.cur&&(a?aa.bindFramebuffer(36160,a.framebuffer):aa.bindFramebuffer(36160,null),ua.cur=a);if(X.dirty){var v,p,k,w,C,z,H,y,R,J,g,B,L,ca,E,G,Da,u,ta,pa,Ka,
sa,ma,gb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd;v=ja.dither;v!==X.dither&&(v?aa.enable(3024):aa.disable(3024),X.dither=v);p=ja.depth_func;p!==X.depth_func&&(aa.depthFunc(p),X.depth_func=p);k=Oa[0];w=Oa[1];if(k!==vb[0]||w!==vb[1])aa.depthRange(k,w),vb[0]=k,vb[1]=w;C=ja.depth_mask;C!==X.depth_mask&&(aa.depthMask(C),X.depth_mask=C);z=wa[0];H=wa[1];y=wa[2];R=wa[3];if(z!==Ea[0]||H!==Ea[1]||y!==Ea[2]||R!==Ea[3])aa.colorMask(z,H,y,R),Ea[0]=z,Ea[1]=H,Ea[2]=y,Ea[3]=R;J=ja.cull_enable;J!==X.cull_enable&&(J?aa.enable(2884):
aa.disable(2884),X.cull_enable=J);g=ja.cull_face;g!==X.cull_face&&(aa.cullFace(g),X.cull_face=g);B=ja.frontFace;B!==X.frontFace&&(aa.frontFace(B),X.frontFace=B);L=ja.lineWidth;L!==X.lineWidth&&(aa.lineWidth(L),X.lineWidth=L);ca=ja.polygonOffset_enable;ca!==X.polygonOffset_enable&&(ca?aa.enable(32823):aa.disable(32823),X.polygonOffset_enable=ca);E=ha[0];G=ha[1];if(E!==Y[0]||G!==Y[1])aa.polygonOffset(E,G),Y[0]=E,Y[1]=G;Da=ja.sample_alpha;Da!==X.sample_alpha&&(Da?aa.enable(32926):aa.disable(32926),X.sample_alpha=
Da);u=ja.sample_enable;u!==X.sample_enable&&(u?aa.enable(32928):aa.disable(32928),X.sample_enable=u);ta=xa[0];pa=xa[1];if(ta!==Fa[0]||pa!==Fa[1])aa.sampleCoverage(ta,pa),Fa[0]=ta,Fa[1]=pa;Ka=ja.stencil_enable;Ka!==X.stencil_enable&&(Ka?aa.enable(2960):aa.disable(2960),X.stencil_enable=Ka);sa=ja.stencil_mask;sa!==X.stencil_mask&&(aa.stencilMask(sa),X.stencil_mask=sa);ma=Aa[0];gb=Aa[1];Gb=Aa[2];if(ma!==ka[0]||gb!==ka[1]||Gb!==ka[2])aa.stencilFunc(ma,gb,Gb),ka[0]=ma,ka[1]=gb,ka[2]=Gb;vc=La[0];Ab=La[1];
yc=La[2];Db=La[3];if(vc!==Ha[0]||Ab!==Ha[1]||yc!==Ha[2]||Db!==Ha[3])aa.stencilOpSeparate(vc,Ab,yc,Db),Ha[0]=vc,Ha[1]=Ab,Ha[2]=yc,Ha[3]=Db;Lc=ba[0];mc=ba[1];Ic=ba[2];hd=ba[3];if(Lc!==va[0]||mc!==va[1]||Ic!==va[2]||hd!==va[3])aa.stencilOpSeparate(Lc,mc,Ic,hd),va[0]=Lc,va[1]=mc,va[2]=Ic,va[3]=hd}aa.blendColor(0,0,0,0);sb[0]=0;sb[1]=0;sb[2]=0;sb[3]=0;aa.enable(3042);X.blend_enable=!0;aa.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;aa.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;
na[2]=773;na[3]=1;aa.disable(2929);X.depth_enable=!1;aa.enable(3089);X.scissor_enable=!0;if(e=X.profile)q=performance.now(),r.count+=l;aa.useProgram(F.program);h=ya.angle_instanced_arrays;var cd,Ec,fc,Jc,pc,rc,nc,qc;Ga.setVAO(null);cd=Wa.location;Ec=O[cd];Ec.buffer||aa.enableVertexAttribArray(cd);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==m||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)aa.bindBuffer(34962,m.buffer),aa.vertexAttribPointer(cd,2,5126,!1,24,0),Ec.type=5126,Ec.size=2,Ec.buffer=m,
Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(h.vertexAttribDivisorANGLE(cd,0),Ec.divisor=0);fc=W.location;Jc=O[fc];Jc.buffer||aa.enableVertexAttribArray(fc);if(5126!==Jc.type||2!==Jc.size||Jc.buffer!==c||!1!==Jc.normalized||8!==Jc.offset||24!==Jc.stride)aa.bindBuffer(34962,c.buffer),aa.vertexAttribPointer(fc,2,5126,!1,24,8),Jc.type=5126,Jc.size=2,Jc.buffer=c,Jc.normalized=!1,Jc.offset=8,Jc.stride=24;0!==Jc.divisor&&(h.vertexAttribDivisorANGLE(fc,0),Jc.divisor=0);pc=t.location;rc=O[pc];
rc.buffer||aa.enableVertexAttribArray(pc);if(5126!==rc.type||2!==rc.size||rc.buffer!==d||!1!==rc.normalized||16!==rc.offset||24!==rc.stride)aa.bindBuffer(34962,d.buffer),aa.vertexAttribPointer(pc,2,5126,!1,24,16),rc.type=5126,rc.size=2,rc.buffer=d,rc.normalized=!1,rc.offset=16,rc.stride=24;0!==rc.divisor&&(h.vertexAttribDivisorANGLE(pc,0),rc.divisor=0);(nc=la.elements)?aa.bindBuffer(34963,nc.buffer.buffer):Ga.currentVAO&&(nc=oa.getElements(Ga.currentVAO.elements))&&aa.bindBuffer(34963,nc.buffer.buffer);
qc=la.offset;for(x=0;x<l;++x){f=b[x];var hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc;hb=f.viewport;Pc=hb.x|0;Rb=hb.y|0;db="width"in hb?hb.width|0:ga.framebufferWidth-Pc;Nb="height"in hb?hb.height|0:
ga.framebufferHeight-Rb;bb=ga.viewportWidth;ga.viewportWidth=db;pb=ga.viewportHeight;ga.viewportHeight=Nb;aa.viewport(Pc,Rb,db,Nb);fa[0]=Pc;fa[1]=Rb;fa[2]=db;fa[3]=Nb;Xa=f.viewport;Kc=Xa.x|0;Ib=Xa.y|0;Jb="width"in Xa?Xa.width|0:ga.framebufferWidth-Kc;sc="height"in Xa?Xa.height|0:ga.framebufferHeight-Ib;aa.scissor(Kc,Ib,Jb,sc);Ca[0]=Kc;Ca[1]=Ib;Ca[2]=Jb;Ca[3]=sc;Ob=ia.call(this,ga,f,x);cc.offset=Ob;lb=!1;Hb=null;Eb=0;zb=!1;$b=jb=0;Pb=1;rb=0;Va=5126;kb=jc=Bb=Vb=0;za(cc)?(lb=!0,Hb=N.createStream(34962,
cc),Va=Hb.dtype):(Hb=N.getBuffer(cc))?Va=Hb.dtype:"constant"in cc?(Pb=2,"number"===typeof cc.constant?(Bb=cc.constant,jc=kb=Vb=0):(Bb=0<cc.constant.length?cc.constant[0]:0,jc=1<cc.constant.length?cc.constant[1]:0,kb=2<cc.constant.length?cc.constant[2]:0,Vb=3<cc.constant.length?cc.constant[3]:0)):(Hb=za(cc.buffer)?N.createStream(34962,cc.buffer):N.getBuffer(cc.buffer),Va="type"in cc?Gc[cc.type]:Hb.dtype,zb=!!cc.normalized,$b=cc.size|0,jb=cc.offset|0,rb=cc.stride|0,Eb=cc.divisor|0);qb=T.location;Ja=
O[qb];if(1===Pb){Ja.buffer||aa.enableVertexAttribArray(qb);tb=$b||2;if(Ja.type!==Va||Ja.size!==tb||Ja.buffer!==Hb||Ja.normalized!==zb||Ja.offset!==jb||Ja.stride!==rb)aa.bindBuffer(34962,Hb.buffer),aa.vertexAttribPointer(qb,tb,Va,zb,rb,jb),Ja.type=Va,Ja.size=tb,Ja.buffer=Hb,Ja.normalized=zb,Ja.offset=jb,Ja.stride=rb;Ja.divisor!==Eb&&(h.vertexAttribDivisorANGLE(qb,Eb),Ja.divisor=Eb)}else if(Ja.buffer&&(aa.disableVertexAttribArray(qb),Ja.buffer=null),Ja.x!==Bb||Ja.y!==jc||Ja.z!==kb||Ja.w!==Vb)aa.vertexAttrib4f(qb,
Bb,jc,kb,Vb),Ja.x=Bb,Ja.y=jc,Ja.z=kb,Ja.w=Vb;Ma=I.call(this,ga,f,x);Tb.offset=Ma;fb=!1;ib=null;Pa=0;mb=!1;wb=Ya=0;ub=1;Ra=0;Dc=5126;Na=Fb=Kb=Ta=0;za(Tb)?(fb=!0,ib=N.createStream(34962,Tb),Dc=ib.dtype):(ib=N.getBuffer(Tb))?Dc=ib.dtype:"constant"in Tb?(ub=2,"number"===typeof Tb.constant?(Kb=Tb.constant,Fb=Na=Ta=0):(Kb=0<Tb.constant.length?Tb.constant[0]:0,Fb=1<Tb.constant.length?Tb.constant[1]:0,Na=2<Tb.constant.length?Tb.constant[2]:0,Ta=3<Tb.constant.length?Tb.constant[3]:0)):(ib=za(Tb.buffer)?N.createStream(34962,
Tb.buffer):N.getBuffer(Tb.buffer),Dc="type"in Tb?Gc[Tb.type]:ib.dtype,mb=!!Tb.normalized,wb=Tb.size|0,Ya=Tb.offset|0,Ra=Tb.stride|0,Pa=Tb.divisor|0);zd=P.location;$a=O[zd];if(1===ub){$a.buffer||aa.enableVertexAttribArray(zd);Lb=wb||2;if($a.type!==Dc||$a.size!==Lb||$a.buffer!==ib||$a.normalized!==mb||$a.offset!==Ya||$a.stride!==Ra)aa.bindBuffer(34962,ib.buffer),aa.vertexAttribPointer(zd,Lb,Dc,mb,Ra,Ya),$a.type=Dc,$a.size=Lb,$a.buffer=ib,$a.normalized=mb,$a.offset=Ya,$a.stride=Ra;$a.divisor!==Pa&&(h.vertexAttribDivisorANGLE(zd,
Pa),$a.divisor=Pa)}else if($a.buffer&&(aa.disableVertexAttribArray(zd),$a.buffer=null),$a.x!==Kb||$a.y!==Fb||$a.z!==Na||$a.w!==Ta)aa.vertexAttrib4f(zd,Kb,Fb,Na,Ta),$a.x=Kb,$a.y=Fb,$a.z=Na,$a.w=Ta;Mb=K.call(this,ga,f,x);Ia.offset=Mb;nb=!1;Qa=null;ac=0;Sa=!1;yb=xb=0;Ua=1;ob=0;gc=5126;kc=cb=wc=Bc=0;za(Ia)?(nb=!0,Qa=N.createStream(34962,Ia),gc=Qa.dtype):(Qa=N.getBuffer(Ia))?gc=Qa.dtype:"constant"in Ia?(Ua=2,"number"===typeof Ia.constant?(wc=Ia.constant,cb=kc=Bc=0):(wc=0<Ia.constant.length?Ia.constant[0]:
0,cb=1<Ia.constant.length?Ia.constant[1]:0,kc=2<Ia.constant.length?Ia.constant[2]:0,Bc=3<Ia.constant.length?Ia.constant[3]:0)):(Qa=za(Ia.buffer)?N.createStream(34962,Ia.buffer):N.getBuffer(Ia.buffer),gc="type"in Ia?Gc[Ia.type]:Qa.dtype,Sa=!!Ia.normalized,yb=Ia.size|0,xb=Ia.offset|0,ob=Ia.stride|0,ac=Ia.divisor|0);Mc=A.location;Za=O[Mc];if(1===Ua){Za.buffer||aa.enableVertexAttribArray(Mc);nd=yb||4;if(Za.type!==gc||Za.size!==nd||Za.buffer!==Qa||Za.normalized!==Sa||Za.offset!==xb||Za.stride!==ob)aa.bindBuffer(34962,
Qa.buffer),aa.vertexAttribPointer(Mc,nd,gc,Sa,ob,xb),Za.type=gc,Za.size=nd,Za.buffer=Qa,Za.normalized=Sa,Za.offset=xb,Za.stride=ob;Za.divisor!==ac&&(h.vertexAttribDivisorANGLE(Mc,ac),Za.divisor=ac)}else if(Za.buffer&&(aa.disableVertexAttribArray(Mc),Za.buffer=null),Za.x!==wc||Za.y!==cb||Za.z!==kc||Za.w!==Bc)aa.vertexAttrib4f(Mc,wc,cb,kc,Bc),Za.x=wc,Za.y=cb,Za.z=kc,Za.w=Bc;Cb=D.call(this,ga,f,x);bc.offset=Cb;ab=!1;Xb=null;uc=0;Yb=!1;Nc=Qb=0;Sb=1;Od=0;Fc=5126;sd=Yc=Qc=vd=0;za(bc)?(ab=!0,Xb=N.createStream(34962,
bc),Fc=Xb.dtype):(Xb=N.getBuffer(bc))?Fc=Xb.dtype:"constant"in bc?(Sb=2,"number"===typeof bc.constant?(Qc=bc.constant,Yc=sd=vd=0):(Qc=0<bc.constant.length?bc.constant[0]:0,Yc=1<bc.constant.length?bc.constant[1]:0,sd=2<bc.constant.length?bc.constant[2]:0,vd=3<bc.constant.length?bc.constant[3]:0)):(Xb=za(bc.buffer)?N.createStream(34962,bc.buffer):N.getBuffer(bc.buffer),Fc="type"in bc?Gc[bc.type]:Xb.dtype,Yb=!!bc.normalized,Nc=bc.size|0,Qb=bc.offset|0,Od=bc.stride|0,uc=bc.divisor|0);oc=Q.location;xc=
O[oc];if(1===Sb){xc.buffer||aa.enableVertexAttribArray(oc);hc=Nc||4;if(xc.type!==Fc||xc.size!==hc||xc.buffer!==Xb||xc.normalized!==Yb||xc.offset!==Qb||xc.stride!==Od)aa.bindBuffer(34962,Xb.buffer),aa.vertexAttribPointer(oc,hc,Fc,Yb,Od,Qb),xc.type=Fc,xc.size=hc,xc.buffer=Xb,xc.normalized=Yb,xc.offset=Qb,xc.stride=Od;xc.divisor!==uc&&(h.vertexAttribDivisorANGLE(oc,uc),xc.divisor=uc)}else if(xc.buffer&&(aa.disableVertexAttribArray(oc),xc.buffer=null),xc.x!==Qc||xc.y!==Yc||xc.z!==sd||xc.w!==vd)aa.vertexAttrib4f(oc,
Qc,Yc,sd,vd),xc.x=Qc,xc.y=Yc,xc.z=sd,xc.w=vd;eb=n.call(this,ga,f,x);tc=eb[0];Zb=eb[1];ic=eb[2];Cc=eb[3];x&&Ub===tc&&ec===Zb&&zc===ic&&dd===Cc||(Ub=tc,ec=Zb,zc=ic,dd=Cc,aa.uniform4f(ra.location,tc,Zb,ic,Cc));Tc=f.lineWidth;x&&Uc===Tc||(Uc=Tc,aa.uniform1f(da.location,Tc));Vc=f.capSize;x&&Zc===Vc||(Zc=Vc,aa.uniform1f(Z.location,Vc));od=f.scale;ed=od[0];lc=od[1];x&&$c===ed&&dc===lc||($c=ed,dc=lc,aa.uniform2f(M.location,ed,lc));ad=f.scaleFract;Xc=ad[0];Ac=ad[1];x&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,aa.uniform2f(S.location,
Xc,Ac));Bd=f.translate;ye=Bd[0];kd=Bd[1];x&&ne===ye&&Fe===kd||(ne=ye,Fe=kd,aa.uniform2f(U.location,ye,kd));Ed=f.translateFract;ge=Ed[0];Ud=Ed[1];x&&ae===ge&&Ld===Ud||(ae=ge,Ld=Ud,aa.uniform2f(qa.location,ge,Ud));Jd=f.opacity;x&&qd===Jd||(qd=Jd,aa.uniform1f(V.location,Jd));Wc=f.count;0<Wc?nc?h.drawElementsInstancedANGLE(4,36,nc.type,qc<<(nc.type-5121>>1),Wc):h.drawArraysInstancedANGLE(4,qc,36,Wc):0>Wc&&(nc?aa.drawElements(4,36,nc.type,qc<<(nc.type-5121>>1)):aa.drawArrays(4,qc,36));ga.viewportWidth=
bb;ga.viewportHeight=pb;lb&&N.destroyStream(Hb);fb&&N.destroyStream(ib);nb&&N.destroyStream(Qa);ab&&N.destroyStream(Xb)}X.dirty=!0;Ga.setVAO(null);e&&(r.cpuTime+=performance.now()-q)},draw:function(b){var l,n,a,e,q,x,f,v,w,C,H,R,g,I,F,B,D,L,ca,E,G,Da,K,u,ia,ta,pa,Ka,sa,ma,gb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac;l=ua.next;l!==ua.cur&&(l?
aa.bindFramebuffer(36160,l.framebuffer):aa.bindFramebuffer(36160,null),ua.cur=l);if(X.dirty){var Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub;Sa=ja.dither;Sa!==X.dither&&(Sa?aa.enable(3024):aa.disable(3024),X.dither=Sa);xb=ja.depth_func;xb!==X.depth_func&&(aa.depthFunc(xb),X.depth_func=xb);yb=Oa[0];Ua=Oa[1];if(yb!==vb[0]||Ua!==vb[1])aa.depthRange(yb,Ua),vb[0]=yb,vb[1]=Ua;ob=ja.depth_mask;ob!==X.depth_mask&&(aa.depthMask(ob),X.depth_mask=ob);gc=
wa[0];Bc=wa[1];wc=wa[2];cb=wa[3];if(gc!==Ea[0]||Bc!==Ea[1]||wc!==Ea[2]||cb!==Ea[3])aa.colorMask(gc,Bc,wc,cb),Ea[0]=gc,Ea[1]=Bc,Ea[2]=wc,Ea[3]=cb;kc=ja.cull_enable;kc!==X.cull_enable&&(kc?aa.enable(2884):aa.disable(2884),X.cull_enable=kc);Mc=ja.cull_face;Mc!==X.cull_face&&(aa.cullFace(Mc),X.cull_face=Mc);Za=ja.frontFace;Za!==X.frontFace&&(aa.frontFace(Za),X.frontFace=Za);nd=ja.lineWidth;nd!==X.lineWidth&&(aa.lineWidth(nd),X.lineWidth=nd);Cb=ja.polygonOffset_enable;Cb!==X.polygonOffset_enable&&(Cb?
aa.enable(32823):aa.disable(32823),X.polygonOffset_enable=Cb);ab=ha[0];Xb=ha[1];if(ab!==Y[0]||Xb!==Y[1])aa.polygonOffset(ab,Xb),Y[0]=ab,Y[1]=Xb;uc=ja.sample_alpha;uc!==X.sample_alpha&&(uc?aa.enable(32926):aa.disable(32926),X.sample_alpha=uc);Yb=ja.sample_enable;Yb!==X.sample_enable&&(Yb?aa.enable(32928):aa.disable(32928),X.sample_enable=Yb);Qb=xa[0];Nc=xa[1];if(Qb!==Fa[0]||Nc!==Fa[1])aa.sampleCoverage(Qb,Nc),Fa[0]=Qb,Fa[1]=Nc;Sb=ja.stencil_enable;Sb!==X.stencil_enable&&(Sb?aa.enable(2960):aa.disable(2960),
X.stencil_enable=Sb);Od=ja.stencil_mask;Od!==X.stencil_mask&&(aa.stencilMask(Od),X.stencil_mask=Od);Fc=Aa[0];vd=Aa[1];Qc=Aa[2];if(Fc!==ka[0]||vd!==ka[1]||Qc!==ka[2])aa.stencilFunc(Fc,vd,Qc),ka[0]=Fc,ka[1]=vd,ka[2]=Qc;Yc=La[0];sd=La[1];oc=La[2];xc=La[3];if(Yc!==Ha[0]||sd!==Ha[1]||oc!==Ha[2]||xc!==Ha[3])aa.stencilOpSeparate(Yc,sd,oc,xc),Ha[0]=Yc,Ha[1]=sd,Ha[2]=oc,Ha[3]=xc;hc=ba[0];eb=ba[1];tc=ba[2];Ub=ba[3];if(hc!==va[0]||eb!==va[1]||tc!==va[2]||Ub!==va[3])aa.stencilOpSeparate(hc,eb,tc,Ub),va[0]=hc,
va[1]=eb,va[2]=tc,va[3]=Ub}n=b.viewport;a=n.x|0;e=n.y|0;q="width"in n?n.width|0:ga.framebufferWidth-a;x="height"in n?n.height|0:ga.framebufferHeight-e;f=ga.viewportWidth;ga.viewportWidth=q;v=ga.viewportHeight;ga.viewportHeight=x;aa.viewport(a,e,q,x);fa[0]=a;fa[1]=e;fa[2]=q;fa[3]=x;aa.blendColor(0,0,0,0);sb[0]=0;sb[1]=0;sb[2]=0;sb[3]=0;aa.enable(3042);X.blend_enable=!0;aa.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;aa.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=
1;aa.disable(2929);X.depth_enable=!1;w=b.viewport;C=w.x|0;H=w.y|0;R="width"in w?w.width|0:ga.framebufferWidth-C;g="height"in w?w.height|0:ga.framebufferHeight-H;aa.scissor(C,H,R,g);Ca[0]=C;Ca[1]=H;Ca[2]=R;Ca[3]=g;aa.enable(3089);X.scissor_enable=!0;if(I=X.profile)F=performance.now(),r.count++;aa.useProgram(k.program);B=ya.angle_instanced_arrays;Ga.setVAO(null);D=p.call(this,ga,b,0);cc.offset=D;L=!1;ca=null;E=0;G=!1;K=Da=0;u=1;ia=0;ta=5126;ma=sa=Ka=pa=0;za(cc)?(L=!0,ca=N.createStream(34962,cc),ta=
ca.dtype):(ca=N.getBuffer(cc))?ta=ca.dtype:"constant"in cc?(u=2,"number"===typeof cc.constant?(Ka=cc.constant,sa=ma=pa=0):(Ka=0<cc.constant.length?cc.constant[0]:0,sa=1<cc.constant.length?cc.constant[1]:0,ma=2<cc.constant.length?cc.constant[2]:0,pa=3<cc.constant.length?cc.constant[3]:0)):(ca=za(cc.buffer)?N.createStream(34962,cc.buffer):N.getBuffer(cc.buffer),ta="type"in cc?Gc[cc.type]:ca.dtype,G=!!cc.normalized,K=cc.size|0,Da=cc.offset|0,ia=cc.stride|0,E=cc.divisor|0);gb=T.location;Gb=O[gb];if(1===
u){Gb.buffer||aa.enableVertexAttribArray(gb);vc=K||2;if(Gb.type!==ta||Gb.size!==vc||Gb.buffer!==ca||Gb.normalized!==G||Gb.offset!==Da||Gb.stride!==ia)aa.bindBuffer(34962,ca.buffer),aa.vertexAttribPointer(gb,vc,ta,G,ia,Da),Gb.type=ta,Gb.size=vc,Gb.buffer=ca,Gb.normalized=G,Gb.offset=Da,Gb.stride=ia;Gb.divisor!==E&&(B.vertexAttribDivisorANGLE(gb,E),Gb.divisor=E)}else if(Gb.buffer&&(aa.disableVertexAttribArray(gb),Gb.buffer=null),Gb.x!==Ka||Gb.y!==sa||Gb.z!==ma||Gb.w!==pa)aa.vertexAttrib4f(gb,Ka,sa,
ma,pa),Gb.x=Ka,Gb.y=sa,Gb.z=ma,Gb.w=pa;Ab=J.call(this,ga,b,0);Tb.offset=Ab;yc=!1;Db=null;Lc=0;mc=!1;hd=Ic=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Jc=0;za(Tb)?(yc=!0,Db=N.createStream(34962,Tb),fc=Db.dtype):(Db=N.getBuffer(Tb))?fc=Db.dtype:"constant"in Tb?(cd=2,"number"===typeof Tb.constant?(pc=Tb.constant,rc=nc=Jc=0):(pc=0<Tb.constant.length?Tb.constant[0]:0,rc=1<Tb.constant.length?Tb.constant[1]:0,nc=2<Tb.constant.length?Tb.constant[2]:0,Jc=3<Tb.constant.length?Tb.constant[3]:0)):(Db=za(Tb.buffer)?N.createStream(34962,
Tb.buffer):N.getBuffer(Tb.buffer),fc="type"in Tb?Gc[Tb.type]:Db.dtype,mc=!!Tb.normalized,hd=Tb.size|0,Ic=Tb.offset|0,Ec=Tb.stride|0,Lc=Tb.divisor|0);qc=P.location;hb=O[qc];if(1===cd){hb.buffer||aa.enableVertexAttribArray(qc);Pc=hd||2;if(hb.type!==fc||hb.size!==Pc||hb.buffer!==Db||hb.normalized!==mc||hb.offset!==Ic||hb.stride!==Ec)aa.bindBuffer(34962,Db.buffer),aa.vertexAttribPointer(qc,Pc,fc,mc,Ec,Ic),hb.type=fc,hb.size=Pc,hb.buffer=Db,hb.normalized=mc,hb.offset=Ic,hb.stride=Ec;hb.divisor!==Lc&&(B.vertexAttribDivisorANGLE(qc,
Lc),hb.divisor=Lc)}else if(hb.buffer&&(aa.disableVertexAttribArray(qc),hb.buffer=null),hb.x!==pc||hb.y!==rc||hb.z!==nc||hb.w!==Jc)aa.vertexAttrib4f(qc,pc,rc,nc,Jc),hb.x=pc,hb.y=rc,hb.z=nc,hb.w=Jc;Rb=z.call(this,ga,b,0);Ia.offset=Rb;db=!1;Nb=null;bb=0;pb=!1;Kc=Xa=0;Ib=1;Jb=0;sc=5126;Eb=Hb=lb=Ob=0;za(Ia)?(db=!0,Nb=N.createStream(34962,Ia),sc=Nb.dtype):(Nb=N.getBuffer(Ia))?sc=Nb.dtype:"constant"in Ia?(Ib=2,"number"===typeof Ia.constant?(lb=Ia.constant,Hb=Eb=Ob=0):(lb=0<Ia.constant.length?Ia.constant[0]:
0,Hb=1<Ia.constant.length?Ia.constant[1]:0,Eb=2<Ia.constant.length?Ia.constant[2]:0,Ob=3<Ia.constant.length?Ia.constant[3]:0)):(Nb=za(Ia.buffer)?N.createStream(34962,Ia.buffer):N.getBuffer(Ia.buffer),sc="type"in Ia?Gc[Ia.type]:Nb.dtype,pb=!!Ia.normalized,Kc=Ia.size|0,Xa=Ia.offset|0,Jb=Ia.stride|0,bb=Ia.divisor|0);zb=A.location;jb=O[zb];if(1===Ib){jb.buffer||aa.enableVertexAttribArray(zb);$b=Kc||4;if(jb.type!==sc||jb.size!==$b||jb.buffer!==Nb||jb.normalized!==pb||jb.offset!==Xa||jb.stride!==Jb)aa.bindBuffer(34962,
Nb.buffer),aa.vertexAttribPointer(zb,$b,sc,pb,Jb,Xa),jb.type=sc,jb.size=$b,jb.buffer=Nb,jb.normalized=pb,jb.offset=Xa,jb.stride=Jb;jb.divisor!==bb&&(B.vertexAttribDivisorANGLE(zb,bb),jb.divisor=bb)}else if(jb.buffer&&(aa.disableVertexAttribArray(zb),jb.buffer=null),jb.x!==lb||jb.y!==Hb||jb.z!==Eb||jb.w!==Ob)aa.vertexAttrib4f(zb,lb,Hb,Eb,Ob),jb.x=lb,jb.y=Hb,jb.z=Eb,jb.w=Ob;Pb=y.call(this,ga,b,0);bc.offset=Pb;rb=!1;Va=null;Vb=0;Bb=!1;kb=jc=0;qb=1;Ja=0;tb=5126;Pa=ib=fb=Ma=0;za(bc)?(rb=!0,Va=N.createStream(34962,
bc),tb=Va.dtype):(Va=N.getBuffer(bc))?tb=Va.dtype:"constant"in bc?(qb=2,"number"===typeof bc.constant?(fb=bc.constant,ib=Pa=Ma=0):(fb=0<bc.constant.length?bc.constant[0]:0,ib=1<bc.constant.length?bc.constant[1]:0,Pa=2<bc.constant.length?bc.constant[2]:0,Ma=3<bc.constant.length?bc.constant[3]:0)):(Va=za(bc.buffer)?N.createStream(34962,bc.buffer):N.getBuffer(bc.buffer),tb="type"in bc?Gc[bc.type]:Va.dtype,Bb=!!bc.normalized,kb=bc.size|0,jc=bc.offset|0,Ja=bc.stride|0,Vb=bc.divisor|0);mb=Q.location;Ya=
O[mb];if(1===qb){Ya.buffer||aa.enableVertexAttribArray(mb);wb=kb||4;if(Ya.type!==tb||Ya.size!==wb||Ya.buffer!==Va||Ya.normalized!==Bb||Ya.offset!==jc||Ya.stride!==Ja)aa.bindBuffer(34962,Va.buffer),aa.vertexAttribPointer(mb,wb,tb,Bb,Ja,jc),Ya.type=tb,Ya.size=wb,Ya.buffer=Va,Ya.normalized=Bb,Ya.offset=jc,Ya.stride=Ja;Ya.divisor!==Vb&&(B.vertexAttribDivisorANGLE(mb,Vb),Ya.divisor=Vb)}else if(Ya.buffer&&(aa.disableVertexAttribArray(mb),Ya.buffer=null),Ya.x!==fb||Ya.y!==ib||Ya.z!==Pa||Ya.w!==Ma)aa.vertexAttrib4f(mb,
fb,ib,Pa,Ma),Ya.x=fb,Ya.y=ib,Ya.z=Pa,Ya.w=Ma;ub=Wa.location;Ra=O[ub];Ra.buffer||aa.enableVertexAttribArray(ub);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==m||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)aa.bindBuffer(34962,m.buffer),aa.vertexAttribPointer(ub,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=m,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(B.vertexAttribDivisorANGLE(ub,0),Ra.divisor=0);Dc=W.location;Ta=O[Dc];Ta.buffer||aa.enableVertexAttribArray(Dc);if(5126!==Ta.type||
2!==Ta.size||Ta.buffer!==c||!1!==Ta.normalized||8!==Ta.offset||24!==Ta.stride)aa.bindBuffer(34962,c.buffer),aa.vertexAttribPointer(Dc,2,5126,!1,24,8),Ta.type=5126,Ta.size=2,Ta.buffer=c,Ta.normalized=!1,Ta.offset=8,Ta.stride=24;0!==Ta.divisor&&(B.vertexAttribDivisorANGLE(Dc,0),Ta.divisor=0);Kb=t.location;Fb=O[Kb];Fb.buffer||aa.enableVertexAttribArray(Kb);if(5126!==Fb.type||2!==Fb.size||Fb.buffer!==d||!1!==Fb.normalized||16!==Fb.offset||24!==Fb.stride)aa.bindBuffer(34962,d.buffer),aa.vertexAttribPointer(Kb,
2,5126,!1,24,16),Fb.type=5126,Fb.size=2,Fb.buffer=d,Fb.normalized=!1,Fb.offset=16,Fb.stride=24;0!==Fb.divisor&&(B.vertexAttribDivisorANGLE(Kb,0),Fb.divisor=0);Na=h.call(this,ga,b,0);aa.uniform4f(ra.location,Na[0],Na[1],Na[2],Na[3]);aa.uniform1f(da.location,b.lineWidth);aa.uniform1f(Z.location,b.capSize);zd=b.scale;aa.uniform2f(M.location,zd[0],zd[1]);$a=b.scaleFract;aa.uniform2f(S.location,$a[0],$a[1]);Lb=b.translate;aa.uniform2f(U.location,Lb[0],Lb[1]);Mb=b.translateFract;aa.uniform2f(qa.location,
Mb[0],Mb[1]);aa.uniform1f(V.location,b.opacity);(nb=la.elements)?aa.bindBuffer(34963,nb.buffer.buffer):Ga.currentVAO&&(nb=oa.getElements(Ga.currentVAO.elements))&&aa.bindBuffer(34963,nb.buffer.buffer);Qa=la.offset;ac=b.count;0<ac?nb?B.drawElementsInstancedANGLE(4,36,nb.type,Qa<<(nb.type-5121>>1),ac):B.drawArraysInstancedANGLE(4,Qa,36,ac):0>ac&&(nb?aa.drawElements(4,36,nb.type,Qa<<(nb.type-5121>>1)):aa.drawArrays(4,Qa,36));X.dirty=!0;Ga.setVAO(null);ga.viewportWidth=f;ga.viewportHeight=v;I&&(r.cpuTime+=
performance.now()-F);L&&N.destroyStream(ca);yc&&N.destroyStream(Db);db&&N.destroyStream(Nb);rb&&N.destroyStream(Va)},scope:function(n,t,a){var e,q,h,f,v,p,k,z,y,J,I,F,D,M,Z,Q,O,ea,Y,na,K,T,Ga,P,xa,V,Fa,sb,ia,aa,U,ha,S,ka,ba,wa,qa,Ca,W,Aa,Wa,ua,oa,fa,A,da,va,ra,Ba,Ea,vb,ya,Oa,Ha,La,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,
Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd;e=n.viewport;q=e.x|0;h=e.y|0;f="width"in e?e.width|0:ga.framebufferWidth-q;v="height"in e?e.height|0:ga.framebufferHeight-h;p=ga.viewportWidth;ga.viewportWidth=f;k=ga.viewportHeight;ga.viewportHeight=v;z=gb[0];gb[0]=q;y=gb[1];gb[1]=h;J=gb[2];gb[2]=f;I=gb[3];gb[3]=v;F=Da[0];Da[0]=0;D=Da[1];
Da[1]=0;M=Da[2];Da[2]=0;Z=Da[3];Da[3]=0;Q=ja.blend_enable;ja.blend_enable=!0;O=Ka[0];Ka[0]=32774;ea=Ka[1];Ka[1]=32774;Y=ca[0];ca[0]=770;na=ca[1];ca[1]=771;K=ca[2];ca[2]=773;T=ca[3];ca[3]=1;Ga=ja.depth_enable;ja.depth_enable=!1;P=n.viewport;xa=P.x|0;V=P.y|0;Fa="width"in P?P.width|0:ga.framebufferWidth-xa;sb="height"in P?P.height|0:ga.framebufferHeight-V;ia=pa[0];pa[0]=xa;aa=pa[1];pa[1]=V;U=pa[2];pa[2]=Fa;ha=pa[3];pa[3]=sb;S=ja.scissor_enable;ja.scissor_enable=!0;if(ka=X.profile)ba=performance.now(),
r.count++;wa=la.count;la.count=36;qa=n.count;Ca=la.instances;la.instances=qa;W=la.primitive;la.primitive=4;Aa=n.capSize;Wa=sa[5];sa[5]=Aa;ua=n.lineWidth;oa=sa[4];sa[4]=ua;fa=n.opacity;A=sa[10];sa[10]=fa;da=n.range;va=sa[18];sa[18]=da;ra=n.scale;Ba=sa[6];sa[6]=ra;Ea=n.scaleFract;vb=sa[7];sa[7]=Ea;ya=n.translate;Oa=sa[8];sa[8]=ya;Ha=n.translateFract;La=sa[9];sa[9]=Ha;Ib=H.call(this,ga,n,a);Jb=sa[3];sa[3]=Ib;sc=w.buffer;w.buffer=d;Ob=w.divisor;w.divisor=0;lb=w.normalized;w.normalized=!1;Hb=w.offset;
w.offset=16;Eb=w.size;w.size=0;zb=w.state;w.state=1;jb=w.stride;w.stride=24;$b=w.type;w.type=5126;Pb=w.w;w.w=0;rb=w.x;w.x=0;Va=w.y;w.y=0;Vb=w.z;w.z=0;Bb=g.call(this,ga,n,a);bc.offset=Bb;jc=!1;kb=null;qb=0;Ja=!1;Ma=tb=0;fb=1;ib=0;Pa=5126;ub=wb=Ya=mb=0;za(bc)?(jc=!0,kb=N.createStream(34962,bc),Pa=kb.dtype):(kb=N.getBuffer(bc))?Pa=kb.dtype:"constant"in bc?(fb=2,"number"===typeof bc.constant?(Ya=bc.constant,wb=ub=mb=0):(Ya=0<bc.constant.length?bc.constant[0]:0,wb=1<bc.constant.length?bc.constant[1]:0,
ub=2<bc.constant.length?bc.constant[2]:0,mb=3<bc.constant.length?bc.constant[3]:0)):(kb=za(bc.buffer)?N.createStream(34962,bc.buffer):N.getBuffer(bc.buffer),Pa="type"in bc?Gc[bc.type]:kb.dtype,Ja=!!bc.normalized,Ma=bc.size|0,tb=bc.offset|0,ib=bc.stride|0,qb=bc.divisor|0);Ra=G.buffer;G.buffer=kb;Dc=G.divisor;G.divisor=qb;Ta=G.normalized;G.normalized=Ja;Kb=G.offset;G.offset=tb;Fb=G.size;G.size=Ma;Na=G.state;G.state=fb;zd=G.stride;G.stride=ib;$a=G.type;G.type=Pa;Lb=G.w;G.w=mb;Mb=G.x;G.x=Ya;nb=G.y;G.y=
wb;Qa=G.z;G.z=ub;ac=E.buffer;E.buffer=m;Sa=E.divisor;E.divisor=0;xb=E.normalized;E.normalized=!1;yb=E.offset;E.offset=0;Ua=E.size;E.size=0;ob=E.state;E.state=1;gc=E.stride;E.stride=24;Bc=E.type;E.type=5126;wc=E.w;E.w=0;cb=E.x;E.x=0;kc=E.y;E.y=0;Mc=E.z;E.z=0;Za=u.call(this,ga,n,a);Ia.offset=Za;nd=!1;Cb=null;ab=0;Xb=!1;Yb=uc=0;Qb=1;Nc=0;Sb=5126;Qc=vd=Fc=Od=0;za(Ia)?(nd=!0,Cb=N.createStream(34962,Ia),Sb=Cb.dtype):(Cb=N.getBuffer(Ia))?Sb=Cb.dtype:"constant"in Ia?(Qb=2,"number"===typeof Ia.constant?(Fc=
Ia.constant,vd=Qc=Od=0):(Fc=0<Ia.constant.length?Ia.constant[0]:0,vd=1<Ia.constant.length?Ia.constant[1]:0,Qc=2<Ia.constant.length?Ia.constant[2]:0,Od=3<Ia.constant.length?Ia.constant[3]:0)):(Cb=za(Ia.buffer)?N.createStream(34962,Ia.buffer):N.getBuffer(Ia.buffer),Sb="type"in Ia?Gc[Ia.type]:Cb.dtype,Xb=!!Ia.normalized,Yb=Ia.size|0,uc=Ia.offset|0,Nc=Ia.stride|0,ab=Ia.divisor|0);Yc=B.buffer;B.buffer=Cb;sd=B.divisor;B.divisor=ab;oc=B.normalized;B.normalized=Xb;xc=B.offset;B.offset=uc;hc=B.size;B.size=
Yb;eb=B.state;B.state=Qb;tc=B.stride;B.stride=Nc;Ub=B.type;B.type=Sb;Zb=B.w;B.w=Od;ec=B.x;B.x=Fc;ic=B.y;B.y=vd;zc=B.z;B.z=Qc;Cc=b.buffer;b.buffer=c;dd=b.divisor;b.divisor=0;Tc=b.normalized;b.normalized=!1;Uc=b.offset;b.offset=8;Vc=b.size;b.size=0;Zc=b.state;b.state=1;od=b.stride;b.stride=24;ed=b.type;b.type=5126;$c=b.w;b.w=0;lc=b.x;b.x=0;dc=b.y;b.y=0;ad=b.z;b.z=0;Xc=l.call(this,ga,n,a);cc.offset=Xc;fd=!1;Ac=null;jd=0;Bd=!1;ne=ye=0;kd=1;Fe=0;Ed=5126;Ld=Ud=ae=ge=0;za(cc)?(fd=!0,Ac=N.createStream(34962,
cc),Ed=Ac.dtype):(Ac=N.getBuffer(cc))?Ed=Ac.dtype:"constant"in cc?(kd=2,"number"===typeof cc.constant?(ae=cc.constant,Ud=Ld=ge=0):(ae=0<cc.constant.length?cc.constant[0]:0,Ud=1<cc.constant.length?cc.constant[1]:0,Ld=2<cc.constant.length?cc.constant[2]:0,ge=3<cc.constant.length?cc.constant[3]:0)):(Ac=za(cc.buffer)?N.createStream(34962,cc.buffer):N.getBuffer(cc.buffer),Ed="type"in cc?Gc[cc.type]:Ac.dtype,Bd=!!cc.normalized,ne=cc.size|0,ye=cc.offset|0,Fe=cc.stride|0,jd=cc.divisor|0);Jd=x.buffer;x.buffer=
Ac;qd=x.divisor;x.divisor=jd;Wc=x.normalized;x.normalized=Bd;wd=x.offset;x.offset=ye;ud=x.size;x.size=ne;ld=x.state;x.state=kd;xd=x.stride;x.stride=Fe;Fd=x.type;x.type=Ed;Gd=x.w;x.w=ge;je=x.x;x.x=ae;le=x.y;x.y=Ud;ue=x.z;x.z=Ld;me=R.call(this,ga,n,a);Tb.offset=me;ke=!1;he=null;ve=0;ee=!1;Rc=oe=0;id=1;we=0;re=5126;Xd=Wd=Vd=Rd=0;za(Tb)?(ke=!0,he=N.createStream(34962,Tb),re=he.dtype):(he=N.getBuffer(Tb))?re=he.dtype:"constant"in Tb?(id=2,"number"===typeof Tb.constant?(Vd=Tb.constant,Wd=Xd=Rd=0):(Vd=0<
Tb.constant.length?Tb.constant[0]:0,Wd=1<Tb.constant.length?Tb.constant[1]:0,Xd=2<Tb.constant.length?Tb.constant[2]:0,Rd=3<Tb.constant.length?Tb.constant[3]:0)):(he=za(Tb.buffer)?N.createStream(34962,Tb.buffer):N.getBuffer(Tb.buffer),re="type"in Tb?Gc[Tb.type]:he.dtype,ee=!!Tb.normalized,Rc=Tb.size|0,oe=Tb.offset|0,we=Tb.stride|0,ve=Tb.divisor|0);pe=C.buffer;C.buffer=he;Ce=C.divisor;C.divisor=ve;Ge=C.normalized;C.normalized=ee;se=C.offset;C.offset=oe;Ve=C.size;C.size=Rc;We=C.state;C.state=id;Re=C.stride;
C.stride=we;xe=C.type;C.type=re;Je=C.w;C.w=Rd;Le=C.x;C.x=Vd;Me=C.y;C.y=Wd;Ne=C.z;C.z=Xd;Ke=ma.vert;ma.vert=2;Sd=ma.frag;ma.frag=1;X.dirty=!0;t(ga,n,a);ga.viewportWidth=p;ga.viewportHeight=k;gb[0]=z;gb[1]=y;gb[2]=J;gb[3]=I;Da[0]=F;Da[1]=D;Da[2]=M;Da[3]=Z;ja.blend_enable=Q;Ka[0]=O;Ka[1]=ea;ca[0]=Y;ca[1]=na;ca[2]=K;ca[3]=T;ja.depth_enable=Ga;pa[0]=ia;pa[1]=aa;pa[2]=U;pa[3]=ha;ja.scissor_enable=S;ka&&(r.cpuTime+=performance.now()-ba);la.count=wa;la.instances=Ca;la.primitive=W;sa[5]=Wa;sa[4]=oa;sa[10]=
A;sa[18]=va;sa[6]=Ba;sa[7]=vb;sa[8]=Oa;sa[9]=La;sa[3]=Jb;w.buffer=sc;w.divisor=Ob;w.normalized=lb;w.offset=Hb;w.size=Eb;w.state=zb;w.stride=jb;w.type=$b;w.w=Pb;w.x=rb;w.y=Va;w.z=Vb;jc&&N.destroyStream(kb);G.buffer=Ra;G.divisor=Dc;G.normalized=Ta;G.offset=Kb;G.size=Fb;G.state=Na;G.stride=zd;G.type=$a;G.w=Lb;G.x=Mb;G.y=nb;G.z=Qa;E.buffer=ac;E.divisor=Sa;E.normalized=xb;E.offset=yb;E.size=Ua;E.state=ob;E.stride=gc;E.type=Bc;E.w=wc;E.x=cb;E.y=kc;E.z=Mc;nd&&N.destroyStream(Cb);B.buffer=Yc;B.divisor=sd;
B.normalized=oc;B.offset=xc;B.size=hc;B.state=eb;B.stride=tc;B.type=Ub;B.w=Zb;B.x=ec;B.y=ic;B.z=zc;b.buffer=Cc;b.divisor=dd;b.normalized=Tc;b.offset=Uc;b.size=Vc;b.state=Zc;b.stride=od;b.type=ed;b.w=$c;b.x=lc;b.y=dc;b.z=ad;fd&&N.destroyStream(Ac);x.buffer=Jd;x.divisor=qd;x.normalized=Wc;x.offset=wd;x.size=ud;x.state=ld;x.stride=xd;x.type=Fd;x.w=Gd;x.x=je;x.y=le;x.z=ue;ke&&N.destroyStream(he);C.buffer=pe;C.divisor=Ce;C.normalized=Ge;C.offset=se;C.size=Ve;C.state=We;C.stride=Re;C.type=xe;C.w=Je;C.x=
Le;C.y=Me;C.z=Ne;ma.vert=Ke;ma.frag=Sd;X.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,r,q,v,f,e,k,p,J,z,y,m,c,d,h,H,w,g,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,Wa){var A,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba;A=a.attributes;W=a.buffer;da=a.context;V=a.current;T=a.draw;P=a.elements;M=
a.extensions;S=a.framebuffer;U=a.gl;qa=a.isBufferArgs;ra=a.next;O=a.shader;N=a.uniforms;ga=a.vao;X=ra.blend_color;la=V.blend_color;oa=ra.blend_equation;ya=V.blend_equation;ua=ra.blend_func;aa=V.blend_func;za=ra.colorMask;ja=V.colorMask;ma=ra.depth_range;sa=V.depth_range;Ga=ra.polygonOffset_offset;Da=V.polygonOffset_offset;sb=ra.sample_coverage;Ka=V.sample_coverage;ea=ra.scissor_box;ca=V.scissor_box;na=ra.stencil_func;wa=V.stencil_func;Ea=ra.stencil_opBack;Oa=V.stencil_opBack;vb=ra.stencil_opFront;
ha=V.stencil_opFront;Y=ra.viewport;xa=V.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};pa={divisor:1,offset:8,stride:8};Ca={divisor:1,offset:8,stride:8};Aa={divisor:1,offset:16,stride:8};ka={divisor:1,offset:16,stride:8};ba={divisor:1,offset:0,stride:4};return{batch:function(d,c){var a,q,h,v,p,m;a=S.next;a!==S.cur&&(a?U.bindFramebuffer(36160,a.framebuffer):U.bindFramebuffer(36160,null),S.cur=a);if(V.dirty){var k,w,z,H,y,J,O,ea,Y,N,X,ua,oa,
Pd,Md,Be,Qe,Ue,Id,Ee,te,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc;k=ra.dither;k!==V.dither&&(k?U.enable(3024):U.disable(3024),V.dither=k);w=ra.depth_func;w!==V.depth_func&&(U.depthFunc(w),V.depth_func=w);z=ma[0];H=ma[1];if(z!==sa[0]||H!==sa[1])U.depthRange(z,H),sa[0]=z,sa[1]=H;y=ra.depth_mask;y!==V.depth_mask&&(U.depthMask(y),V.depth_mask=y);J=za[0];O=za[1];ea=za[2];Y=za[3];if(J!==ja[0]||O!==ja[1]||ea!==ja[2]||Y!==ja[3])U.colorMask(J,O,ea,Y),ja[0]=J,ja[1]=O,ja[2]=ea,ja[3]=Y;N=ra.cull_enable;N!==V.cull_enable&&
(N?U.enable(2884):U.disable(2884),V.cull_enable=N);X=ra.cull_face;X!==V.cull_face&&(U.cullFace(X),V.cull_face=X);ua=ra.frontFace;ua!==V.frontFace&&(U.frontFace(ua),V.frontFace=ua);oa=ra.lineWidth;oa!==V.lineWidth&&(U.lineWidth(oa),V.lineWidth=oa);Pd=ra.polygonOffset_enable;Pd!==V.polygonOffset_enable&&(Pd?U.enable(32823):U.disable(32823),V.polygonOffset_enable=Pd);Md=Ga[0];Be=Ga[1];if(Md!==Da[0]||Be!==Da[1])U.polygonOffset(Md,Be),Da[0]=Md,Da[1]=Be;Qe=ra.sample_alpha;Qe!==V.sample_alpha&&(Qe?U.enable(32926):
U.disable(32926),V.sample_alpha=Qe);Ue=ra.sample_enable;Ue!==V.sample_enable&&(Ue?U.enable(32928):U.disable(32928),V.sample_enable=Ue);Id=sb[0];Ee=sb[1];if(Id!==Ka[0]||Ee!==Ka[1])U.sampleCoverage(Id,Ee),Ka[0]=Id,Ka[1]=Ee;te=ra.stencil_mask;te!==V.stencil_mask&&(U.stencilMask(te),V.stencil_mask=te);ie=na[0];Nd=na[1];Dd=na[2];if(ie!==wa[0]||Nd!==wa[1]||Dd!==wa[2])U.stencilFunc(ie,Nd,Dd),wa[0]=ie,wa[1]=Nd,wa[2]=Dd;pd=vb[0];bd=vb[1];td=vb[2];Oc=vb[3];if(pd!==ha[0]||bd!==ha[1]||td!==ha[2]||Oc!==ha[3])U.stencilOpSeparate(pd,
bd,td,Oc),ha[0]=pd,ha[1]=bd,ha[2]=td,ha[3]=Oc;rd=Ea[0];Hc=Ea[1];gd=Ea[2];Sc=Ea[3];if(rd!==Oa[0]||Hc!==Oa[1]||gd!==Oa[2]||Sc!==Oa[3])U.stencilOpSeparate(rd,Hc,gd,Sc),Oa[0]=rd,Oa[1]=Hc,Oa[2]=gd,Oa[3]=Sc}U.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;U.enable(3042);V.blend_enable=!0;U.blendEquationSeparate(32774,32774);ya[0]=32774;ya[1]=32774;U.blendFuncSeparate(770,771,773,1);aa[0]=770;aa[1]=771;aa[2]=773;aa[3]=1;U.enable(3089);V.scissor_enable=!0;U.disable(2960);V.stencil_enable=!1;if(q=V.profile)h=
performance.now(),r.count+=c;U.useProgram(g.program);v=M.angle_instanced_arrays;var md,Wb,Gb,vc,Ab;ga.setVAO(null);md=ia.location;Wb=A[md];Wb.buffer||U.enableVertexAttribArray(md);if(5126!==Wb.type||1!==Wb.size||Wb.buffer!==f||!1!==Wb.normalized||0!==Wb.offset||8!==Wb.stride)U.bindBuffer(34962,f.buffer),U.vertexAttribPointer(md,1,5126,!1,8,0),Wb.type=5126,Wb.size=1,Wb.buffer=f,Wb.normalized=!1,Wb.offset=0,Wb.stride=8;0!==Wb.divisor&&(v.vertexAttribDivisorANGLE(md,0),Wb.divisor=0);Gb=I.location;vc=
A[Gb];vc.buffer||U.enableVertexAttribArray(Gb);if(5126!==vc.type||1!==vc.size||vc.buffer!==e||!1!==vc.normalized||4!==vc.offset||8!==vc.stride)U.bindBuffer(34962,e.buffer),U.vertexAttribPointer(Gb,1,5126,!1,8,4),vc.type=5126,vc.size=1,vc.buffer=e,vc.normalized=!1,vc.offset=4,vc.stride=8;0!==vc.divisor&&(v.vertexAttribDivisorANGLE(Gb,0),vc.divisor=0);(Ab=T.elements)?U.bindBuffer(34963,Ab.buffer.buffer):ga.currentVAO&&(Ab=P.getElements(ga.currentVAO.elements))&&U.bindBuffer(34963,Ab.buffer.buffer);
for(p=0;p<c;++p){m=d[p];var yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld;yc=m.viewport;Db=yc.x|0;Lc=yc.y|0;mc="width"in yc?yc.width|0:da.framebufferWidth-
Db;Ic="height"in yc?yc.height|0:da.framebufferHeight-Lc;hd=da.viewportWidth;da.viewportWidth=mc;cd=da.viewportHeight;da.viewportHeight=Ic;U.viewport(Db,Lc,mc,Ic);xa[0]=Db;xa[1]=Lc;xa[2]=mc;xa[3]=Ic;(Ec=G.call(this,da,m,p))?U.enable(2929):U.disable(2929);V.depth_enable=Ec;fc=m.viewport;Jc=fc.x|0;pc=fc.y|0;rc="width"in fc?fc.width|0:da.framebufferWidth-Jc;nc="height"in fc?fc.height|0:da.framebufferHeight-pc;U.scissor(Jc,pc,rc,nc);ca[0]=Jc;ca[1]=pc;ca[2]=rc;ca[3]=nc;pa.buffer=m.positionBuffer;qc=!1;
hb=null;Pc=0;Rb=!1;Nb=db=0;bb=1;pb=0;Xa=5126;sc=Jb=Ib=Kc=0;qa(pa)?(qc=!0,hb=W.createStream(34962,pa),Xa=hb.dtype):(hb=W.getBuffer(pa))?Xa=hb.dtype:"constant"in pa?(bb=2,"number"===typeof pa.constant?(Ib=pa.constant,Jb=sc=Kc=0):(Ib=0<pa.constant.length?pa.constant[0]:0,Jb=1<pa.constant.length?pa.constant[1]:0,sc=2<pa.constant.length?pa.constant[2]:0,Kc=3<pa.constant.length?pa.constant[3]:0)):(hb=qa(pa.buffer)?W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Xa="type"in pa?Fa[pa.type]:hb.dtype,
Rb=!!pa.normalized,Nb=pa.size|0,db=pa.offset|0,pb=pa.stride|0,Pc=pa.divisor|0);Ob=u.location;lb=A[Ob];if(1===bb){lb.buffer||U.enableVertexAttribArray(Ob);Hb=Nb||2;if(lb.type!==Xa||lb.size!==Hb||lb.buffer!==hb||lb.normalized!==Rb||lb.offset!==db||lb.stride!==pb)U.bindBuffer(34962,hb.buffer),U.vertexAttribPointer(Ob,Hb,Xa,Rb,pb,db),lb.type=Xa,lb.size=Hb,lb.buffer=hb,lb.normalized=Rb,lb.offset=db,lb.stride=pb;lb.divisor!==Pc&&(v.vertexAttribDivisorANGLE(Ob,Pc),lb.divisor=Pc)}else if(lb.buffer&&(U.disableVertexAttribArray(Ob),
lb.buffer=null),lb.x!==Ib||lb.y!==Jb||lb.z!==sc||lb.w!==Kc)U.vertexAttrib4f(Ob,Ib,Jb,sc,Kc),lb.x=Ib,lb.y=Jb,lb.z=sc,lb.w=Kc;Aa.buffer=m.positionBuffer;Eb=!1;zb=null;jb=0;$b=!1;rb=Pb=0;Va=1;Vb=0;Bb=5126;Ja=qb=kb=jc=0;qa(Aa)?(Eb=!0,zb=W.createStream(34962,Aa),Bb=zb.dtype):(zb=W.getBuffer(Aa))?Bb=zb.dtype:"constant"in Aa?(Va=2,"number"===typeof Aa.constant?(kb=Aa.constant,qb=Ja=jc=0):(kb=0<Aa.constant.length?Aa.constant[0]:0,qb=1<Aa.constant.length?Aa.constant[1]:0,Ja=2<Aa.constant.length?Aa.constant[2]:
0,jc=3<Aa.constant.length?Aa.constant[3]:0)):(zb=qa(Aa.buffer)?W.createStream(34962,Aa.buffer):W.getBuffer(Aa.buffer),Bb="type"in Aa?Fa[Aa.type]:zb.dtype,$b=!!Aa.normalized,rb=Aa.size|0,Pb=Aa.offset|0,Vb=Aa.stride|0,jb=Aa.divisor|0);tb=b.location;Ma=A[tb];if(1===Va){Ma.buffer||U.enableVertexAttribArray(tb);fb=rb||2;if(Ma.type!==Bb||Ma.size!==fb||Ma.buffer!==zb||Ma.normalized!==$b||Ma.offset!==Pb||Ma.stride!==Vb)U.bindBuffer(34962,zb.buffer),U.vertexAttribPointer(tb,fb,Bb,$b,Vb,Pb),Ma.type=Bb,Ma.size=
fb,Ma.buffer=zb,Ma.normalized=$b,Ma.offset=Pb,Ma.stride=Vb;Ma.divisor!==jb&&(v.vertexAttribDivisorANGLE(tb,jb),Ma.divisor=jb)}else if(Ma.buffer&&(U.disableVertexAttribArray(tb),Ma.buffer=null),Ma.x!==kb||Ma.y!==qb||Ma.z!==Ja||Ma.w!==jc)U.vertexAttrib4f(tb,kb,qb,Ja,jc),Ma.x=kb,Ma.y=qb,Ma.z=Ja,Ma.w=jc;Ca.buffer=m.positionFractBuffer;ib=!1;Pa=null;mb=0;Ya=!1;ub=wb=0;Ra=1;Dc=0;Ta=5126;zd=Na=Fb=Kb=0;qa(Ca)?(ib=!0,Pa=W.createStream(34962,Ca),Ta=Pa.dtype):(Pa=W.getBuffer(Ca))?Ta=Pa.dtype:"constant"in Ca?
(Ra=2,"number"===typeof Ca.constant?(Fb=Ca.constant,Na=zd=Kb=0):(Fb=0<Ca.constant.length?Ca.constant[0]:0,Na=1<Ca.constant.length?Ca.constant[1]:0,zd=2<Ca.constant.length?Ca.constant[2]:0,Kb=3<Ca.constant.length?Ca.constant[3]:0)):(Pa=qa(Ca.buffer)?W.createStream(34962,Ca.buffer):W.getBuffer(Ca.buffer),Ta="type"in Ca?Fa[Ca.type]:Pa.dtype,Ya=!!Ca.normalized,ub=Ca.size|0,wb=Ca.offset|0,Dc=Ca.stride|0,mb=Ca.divisor|0);$a=B.location;Lb=A[$a];if(1===Ra){Lb.buffer||U.enableVertexAttribArray($a);Mb=ub||
2;if(Lb.type!==Ta||Lb.size!==Mb||Lb.buffer!==Pa||Lb.normalized!==Ya||Lb.offset!==wb||Lb.stride!==Dc)U.bindBuffer(34962,Pa.buffer),U.vertexAttribPointer($a,Mb,Ta,Ya,Dc,wb),Lb.type=Ta,Lb.size=Mb,Lb.buffer=Pa,Lb.normalized=Ya,Lb.offset=wb,Lb.stride=Dc;Lb.divisor!==mb&&(v.vertexAttribDivisorANGLE($a,mb),Lb.divisor=mb)}else if(Lb.buffer&&(U.disableVertexAttribArray($a),Lb.buffer=null),Lb.x!==Fb||Lb.y!==Na||Lb.z!==zd||Lb.w!==Kb)U.vertexAttrib4f($a,Fb,Na,zd,Kb),Lb.x=Fb,Lb.y=Na,Lb.z=zd,Lb.w=Kb;ka.buffer=
m.positionFractBuffer;nb=!1;Qa=null;ac=0;Sa=!1;yb=xb=0;Ua=1;ob=0;gc=5126;kc=cb=wc=Bc=0;qa(ka)?(nb=!0,Qa=W.createStream(34962,ka),gc=Qa.dtype):(Qa=W.getBuffer(ka))?gc=Qa.dtype:"constant"in ka?(Ua=2,"number"===typeof ka.constant?(wc=ka.constant,cb=kc=Bc=0):(wc=0<ka.constant.length?ka.constant[0]:0,cb=1<ka.constant.length?ka.constant[1]:0,kc=2<ka.constant.length?ka.constant[2]:0,Bc=3<ka.constant.length?ka.constant[3]:0)):(Qa=qa(ka.buffer)?W.createStream(34962,ka.buffer):W.getBuffer(ka.buffer),gc="type"in
ka?Fa[ka.type]:Qa.dtype,Sa=!!ka.normalized,yb=ka.size|0,xb=ka.offset|0,ob=ka.stride|0,ac=ka.divisor|0);Mc=l.location;Za=A[Mc];if(1===Ua){Za.buffer||U.enableVertexAttribArray(Mc);nd=yb||2;if(Za.type!==gc||Za.size!==nd||Za.buffer!==Qa||Za.normalized!==Sa||Za.offset!==xb||Za.stride!==ob)U.bindBuffer(34962,Qa.buffer),U.vertexAttribPointer(Mc,nd,gc,Sa,ob,xb),Za.type=gc,Za.size=nd,Za.buffer=Qa,Za.normalized=Sa,Za.offset=xb,Za.stride=ob;Za.divisor!==ac&&(v.vertexAttribDivisorANGLE(Mc,ac),Za.divisor=ac)}else if(Za.buffer&&
(U.disableVertexAttribArray(Mc),Za.buffer=null),Za.x!==wc||Za.y!==cb||Za.z!==kc||Za.w!==Bc)U.vertexAttrib4f(Mc,wc,cb,kc,Bc),Za.x=wc,Za.y=cb,Za.z=kc,Za.w=Bc;ba.buffer=m.colorBuffer;Cb=!1;ab=null;Xb=0;uc=!1;Qb=Yb=0;Nc=1;Sb=0;Od=5126;Yc=Qc=vd=Fc=0;qa(ba)?(Cb=!0,ab=W.createStream(34962,ba),Od=ab.dtype):(ab=W.getBuffer(ba))?Od=ab.dtype:"constant"in ba?(Nc=2,"number"===typeof ba.constant?(vd=ba.constant,Qc=Yc=Fc=0):(vd=0<ba.constant.length?ba.constant[0]:0,Qc=1<ba.constant.length?ba.constant[1]:0,Yc=2<
ba.constant.length?ba.constant[2]:0,Fc=3<ba.constant.length?ba.constant[3]:0)):(ab=qa(ba.buffer)?W.createStream(34962,ba.buffer):W.getBuffer(ba.buffer),Od="type"in ba?Fa[ba.type]:ab.dtype,uc=!!ba.normalized,Qb=ba.size|0,Yb=ba.offset|0,Sb=ba.stride|0,Xb=ba.divisor|0);sd=x.location;oc=A[sd];if(1===Nc){oc.buffer||U.enableVertexAttribArray(sd);xc=Qb||4;if(oc.type!==Od||oc.size!==xc||oc.buffer!==ab||oc.normalized!==uc||oc.offset!==Yb||oc.stride!==Sb)U.bindBuffer(34962,ab.buffer),U.vertexAttribPointer(sd,
xc,Od,uc,Sb,Yb),oc.type=Od,oc.size=xc,oc.buffer=ab,oc.normalized=uc,oc.offset=Yb,oc.stride=Sb;oc.divisor!==Xb&&(v.vertexAttribDivisorANGLE(sd,Xb),oc.divisor=Xb)}else if(oc.buffer&&(U.disableVertexAttribArray(sd),oc.buffer=null),oc.x!==vd||oc.y!==Qc||oc.z!==Yc||oc.w!==Fc)U.vertexAttrib4f(sd,vd,Qc,Yc,Fc),oc.x=vd,oc.y=Qc,oc.z=Yc,oc.w=Fc;hc=m.scale;eb=hc[0];Ub=hc[1];p&&tc===eb&&Zb===Ub||(tc=eb,Zb=Ub,U.uniform2f(D.location,eb,Ub));ec=m.scaleFract;ic=ec[0];Cc=ec[1];p&&zc===ic&&dd===Cc||(zc=ic,dd=Cc,U.uniform2f(n.location,
ic,Cc));Tc=m.translate;Uc=Tc[0];Zc=Tc[1];p&&Vc===Uc&&od===Zc||(Vc=Uc,od=Zc,U.uniform2f(Z.location,Uc,Zc));ed=m.translateFract;$c=ed[0];dc=ed[1];p&&lc===$c&&ad===dc||(lc=$c,ad=dc,U.uniform2f(Q.location,$c,dc));Xc=m.thickness;p&&fd===Xc||(fd=Xc,U.uniform1f(t.location,Xc));Ac=m.depth;p&&jd===Ac||(jd=Ac,U.uniform1f(F.location,Ac));Bd=E.call(this,da,m,p);ye=Bd[0];kd=Bd[1];Ed=Bd[2];ae=Bd[3];p&&ne===ye&&Fe===kd&&ge===Ed&&Ud===ae||(ne=ye,Fe=kd,ge=Ed,Ud=ae,U.uniform4f(Wa.location,ye,kd,Ed,ae));Ld=m.dashLength;
p&&Jd===Ld||(Jd=Ld,U.uniform1f(R.location,Ld));qd=m.opacity;p&&Wc===qd||(Wc=qd,U.uniform1f(K.location,qd));(wd=m.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);ud=wd._texture;U.uniform1i(C.location,ud.bind());ld=m.count;0<ld?Ab?v.drawElementsInstancedANGLE(5,4,Ab.type,0<<(Ab.type-5121>>1),ld):v.drawArraysInstancedANGLE(5,0,4,ld):0>ld&&(Ab?U.drawElements(5,4,Ab.type,0<<(Ab.type-5121>>1)):U.drawArrays(5,0,4));da.viewportWidth=hd;da.viewportHeight=cd;qc&&W.destroyStream(hb);Eb&&W.destroyStream(zb);
ib&&W.destroyStream(Pa);nb&&W.destroyStream(Qa);Cb&&W.destroyStream(ab);ud.unbind()}V.dirty=!0;ga.setVAO(null);q&&(r.cpuTime+=performance.now()-h)},draw:function(d){var c,a,h,p,m,w,z,H,y,J,g,L,O,ea,E,G,Y,N,X,ua,oa,Md,Be,Qe,Ue,Id,Ee,te,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb;c=S.next;c!==S.cur&&
(c?U.bindFramebuffer(36160,c.framebuffer):U.bindFramebuffer(36160,null),S.cur=c);if(V.dirty){var yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb;yb=ra.dither;yb!==V.dither&&(yb?U.enable(3024):U.disable(3024),V.dither=yb);Ua=ra.depth_func;Ua!==V.depth_func&&(U.depthFunc(Ua),V.depth_func=Ua);ob=ma[0];gc=ma[1];if(ob!==sa[0]||gc!==sa[1])U.depthRange(ob,gc),sa[0]=ob,sa[1]=gc;Bc=ra.depth_mask;Bc!==V.depth_mask&&(U.depthMask(Bc),V.depth_mask=Bc);wc=za[0];cb=
za[1];kc=za[2];Mc=za[3];if(wc!==ja[0]||cb!==ja[1]||kc!==ja[2]||Mc!==ja[3])U.colorMask(wc,cb,kc,Mc),ja[0]=wc,ja[1]=cb,ja[2]=kc,ja[3]=Mc;Za=ra.cull_enable;Za!==V.cull_enable&&(Za?U.enable(2884):U.disable(2884),V.cull_enable=Za);nd=ra.cull_face;nd!==V.cull_face&&(U.cullFace(nd),V.cull_face=nd);Cb=ra.frontFace;Cb!==V.frontFace&&(U.frontFace(Cb),V.frontFace=Cb);ab=ra.lineWidth;ab!==V.lineWidth&&(U.lineWidth(ab),V.lineWidth=ab);Xb=ra.polygonOffset_enable;Xb!==V.polygonOffset_enable&&(Xb?U.enable(32823):
U.disable(32823),V.polygonOffset_enable=Xb);uc=Ga[0];Yb=Ga[1];if(uc!==Da[0]||Yb!==Da[1])U.polygonOffset(uc,Yb),Da[0]=uc,Da[1]=Yb;Qb=ra.sample_alpha;Qb!==V.sample_alpha&&(Qb?U.enable(32926):U.disable(32926),V.sample_alpha=Qb);Nc=ra.sample_enable;Nc!==V.sample_enable&&(Nc?U.enable(32928):U.disable(32928),V.sample_enable=Nc);Sb=sb[0];Od=sb[1];if(Sb!==Ka[0]||Od!==Ka[1])U.sampleCoverage(Sb,Od),Ka[0]=Sb,Ka[1]=Od;Fc=ra.stencil_mask;Fc!==V.stencil_mask&&(U.stencilMask(Fc),V.stencil_mask=Fc);vd=na[0];Qc=na[1];
Yc=na[2];if(vd!==wa[0]||Qc!==wa[1]||Yc!==wa[2])U.stencilFunc(vd,Qc,Yc),wa[0]=vd,wa[1]=Qc,wa[2]=Yc;sd=vb[0];oc=vb[1];xc=vb[2];hc=vb[3];if(sd!==ha[0]||oc!==ha[1]||xc!==ha[2]||hc!==ha[3])U.stencilOpSeparate(sd,oc,xc,hc),ha[0]=sd,ha[1]=oc,ha[2]=xc,ha[3]=hc;eb=Ea[0];tc=Ea[1];Ub=Ea[2];Zb=Ea[3];if(eb!==Oa[0]||tc!==Oa[1]||Ub!==Oa[2]||Zb!==Oa[3])U.stencilOpSeparate(eb,tc,Ub,Zb),Oa[0]=eb,Oa[1]=tc,Oa[2]=Ub,Oa[3]=Zb}a=d.viewport;h=a.x|0;p=a.y|0;m="width"in a?a.width|0:da.framebufferWidth-h;w="height"in a?a.height|
0:da.framebufferHeight-p;z=da.viewportWidth;da.viewportWidth=m;H=da.viewportHeight;da.viewportHeight=w;U.viewport(h,p,m,w);xa[0]=h;xa[1]=p;xa[2]=m;xa[3]=w;U.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;U.enable(3042);V.blend_enable=!0;U.blendEquationSeparate(32774,32774);ya[0]=32774;ya[1]=32774;U.blendFuncSeparate(770,771,773,1);aa[0]=770;aa[1]=771;aa[2]=773;aa[3]=1;(y=q.call(this,da,d,0))?U.enable(2929):U.disable(2929);V.depth_enable=y;J=d.viewport;g=J.x|0;L=J.y|0;O="width"in J?J.width|0:
da.framebufferWidth-g;ea="height"in J?J.height|0:da.framebufferHeight-L;U.scissor(g,L,O,ea);ca[0]=g;ca[1]=L;ca[2]=O;ca[3]=ea;U.enable(3089);V.scissor_enable=!0;U.disable(2960);V.stencil_enable=!1;if(E=V.profile)G=performance.now(),r.count++;U.useProgram(v.program);Y=M.angle_instanced_arrays;ga.setVAO(null);pa.buffer=d.positionBuffer;N=!1;X=null;ua=0;oa=!1;Be=Md=0;Qe=1;Ue=0;Id=5126;Nd=ie=te=Ee=0;qa(pa)?(N=!0,X=W.createStream(34962,pa),Id=X.dtype):(X=W.getBuffer(pa))?Id=X.dtype:"constant"in pa?(Qe=
2,"number"===typeof pa.constant?(te=pa.constant,ie=Nd=Ee=0):(te=0<pa.constant.length?pa.constant[0]:0,ie=1<pa.constant.length?pa.constant[1]:0,Nd=2<pa.constant.length?pa.constant[2]:0,Ee=3<pa.constant.length?pa.constant[3]:0)):(X=qa(pa.buffer)?W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Id="type"in pa?Fa[pa.type]:X.dtype,oa=!!pa.normalized,Be=pa.size|0,Md=pa.offset|0,Ue=pa.stride|0,ua=pa.divisor|0);Dd=u.location;pd=A[Dd];if(1===Qe){pd.buffer||U.enableVertexAttribArray(Dd);bd=Be||2;if(pd.type!==
Id||pd.size!==bd||pd.buffer!==X||pd.normalized!==oa||pd.offset!==Md||pd.stride!==Ue)U.bindBuffer(34962,X.buffer),U.vertexAttribPointer(Dd,bd,Id,oa,Ue,Md),pd.type=Id,pd.size=bd,pd.buffer=X,pd.normalized=oa,pd.offset=Md,pd.stride=Ue;pd.divisor!==ua&&(Y.vertexAttribDivisorANGLE(Dd,ua),pd.divisor=ua)}else if(pd.buffer&&(U.disableVertexAttribArray(Dd),pd.buffer=null),pd.x!==te||pd.y!==ie||pd.z!==Nd||pd.w!==Ee)U.vertexAttrib4f(Dd,te,ie,Nd,Ee),pd.x=te,pd.y=ie,pd.z=Nd,pd.w=Ee;Aa.buffer=d.positionBuffer;td=
!1;Oc=null;rd=0;Hc=!1;Sc=gd=0;md=1;Wb=0;Gb=5126;Db=yc=Ab=vc=0;qa(Aa)?(td=!0,Oc=W.createStream(34962,Aa),Gb=Oc.dtype):(Oc=W.getBuffer(Aa))?Gb=Oc.dtype:"constant"in Aa?(md=2,"number"===typeof Aa.constant?(Ab=Aa.constant,yc=Db=vc=0):(Ab=0<Aa.constant.length?Aa.constant[0]:0,yc=1<Aa.constant.length?Aa.constant[1]:0,Db=2<Aa.constant.length?Aa.constant[2]:0,vc=3<Aa.constant.length?Aa.constant[3]:0)):(Oc=qa(Aa.buffer)?W.createStream(34962,Aa.buffer):W.getBuffer(Aa.buffer),Gb="type"in Aa?Fa[Aa.type]:Oc.dtype,
Hc=!!Aa.normalized,Sc=Aa.size|0,gd=Aa.offset|0,Wb=Aa.stride|0,rd=Aa.divisor|0);Lc=b.location;mc=A[Lc];if(1===md){mc.buffer||U.enableVertexAttribArray(Lc);Ic=Sc||2;if(mc.type!==Gb||mc.size!==Ic||mc.buffer!==Oc||mc.normalized!==Hc||mc.offset!==gd||mc.stride!==Wb)U.bindBuffer(34962,Oc.buffer),U.vertexAttribPointer(Lc,Ic,Gb,Hc,Wb,gd),mc.type=Gb,mc.size=Ic,mc.buffer=Oc,mc.normalized=Hc,mc.offset=gd,mc.stride=Wb;mc.divisor!==rd&&(Y.vertexAttribDivisorANGLE(Lc,rd),mc.divisor=rd)}else if(mc.buffer&&(U.disableVertexAttribArray(Lc),
mc.buffer=null),mc.x!==Ab||mc.y!==yc||mc.z!==Db||mc.w!==vc)U.vertexAttrib4f(Lc,Ab,yc,Db,vc),mc.x=Ab,mc.y=yc,mc.z=Db,mc.w=vc;Ca.buffer=d.positionFractBuffer;hd=!1;cd=null;Ec=0;fc=!1;pc=Jc=0;rc=1;nc=0;qc=5126;db=Rb=Pc=hb=0;qa(Ca)?(hd=!0,cd=W.createStream(34962,Ca),qc=cd.dtype):(cd=W.getBuffer(Ca))?qc=cd.dtype:"constant"in Ca?(rc=2,"number"===typeof Ca.constant?(Pc=Ca.constant,Rb=db=hb=0):(Pc=0<Ca.constant.length?Ca.constant[0]:0,Rb=1<Ca.constant.length?Ca.constant[1]:0,db=2<Ca.constant.length?Ca.constant[2]:
0,hb=3<Ca.constant.length?Ca.constant[3]:0)):(cd=qa(Ca.buffer)?W.createStream(34962,Ca.buffer):W.getBuffer(Ca.buffer),qc="type"in Ca?Fa[Ca.type]:cd.dtype,fc=!!Ca.normalized,pc=Ca.size|0,Jc=Ca.offset|0,nc=Ca.stride|0,Ec=Ca.divisor|0);Nb=B.location;bb=A[Nb];if(1===rc){bb.buffer||U.enableVertexAttribArray(Nb);pb=pc||2;if(bb.type!==qc||bb.size!==pb||bb.buffer!==cd||bb.normalized!==fc||bb.offset!==Jc||bb.stride!==nc)U.bindBuffer(34962,cd.buffer),U.vertexAttribPointer(Nb,pb,qc,fc,nc,Jc),bb.type=qc,bb.size=
pb,bb.buffer=cd,bb.normalized=fc,bb.offset=Jc,bb.stride=nc;bb.divisor!==Ec&&(Y.vertexAttribDivisorANGLE(Nb,Ec),bb.divisor=Ec)}else if(bb.buffer&&(U.disableVertexAttribArray(Nb),bb.buffer=null),bb.x!==Pc||bb.y!==Rb||bb.z!==db||bb.w!==hb)U.vertexAttrib4f(Nb,Pc,Rb,db,hb),bb.x=Pc,bb.y=Rb,bb.z=db,bb.w=hb;ka.buffer=d.positionFractBuffer;Xa=!1;Kc=null;Ib=0;Jb=!1;Ob=sc=0;lb=1;Hb=0;Eb=5126;Pb=$b=jb=zb=0;qa(ka)?(Xa=!0,Kc=W.createStream(34962,ka),Eb=Kc.dtype):(Kc=W.getBuffer(ka))?Eb=Kc.dtype:"constant"in ka?
(lb=2,"number"===typeof ka.constant?(jb=ka.constant,$b=Pb=zb=0):(jb=0<ka.constant.length?ka.constant[0]:0,$b=1<ka.constant.length?ka.constant[1]:0,Pb=2<ka.constant.length?ka.constant[2]:0,zb=3<ka.constant.length?ka.constant[3]:0)):(Kc=qa(ka.buffer)?W.createStream(34962,ka.buffer):W.getBuffer(ka.buffer),Eb="type"in ka?Fa[ka.type]:Kc.dtype,Jb=!!ka.normalized,Ob=ka.size|0,sc=ka.offset|0,Hb=ka.stride|0,Ib=ka.divisor|0);rb=l.location;Va=A[rb];if(1===lb){Va.buffer||U.enableVertexAttribArray(rb);Vb=Ob||
2;if(Va.type!==Eb||Va.size!==Vb||Va.buffer!==Kc||Va.normalized!==Jb||Va.offset!==sc||Va.stride!==Hb)U.bindBuffer(34962,Kc.buffer),U.vertexAttribPointer(rb,Vb,Eb,Jb,Hb,sc),Va.type=Eb,Va.size=Vb,Va.buffer=Kc,Va.normalized=Jb,Va.offset=sc,Va.stride=Hb;Va.divisor!==Ib&&(Y.vertexAttribDivisorANGLE(rb,Ib),Va.divisor=Ib)}else if(Va.buffer&&(U.disableVertexAttribArray(rb),Va.buffer=null),Va.x!==jb||Va.y!==$b||Va.z!==Pb||Va.w!==zb)U.vertexAttrib4f(rb,jb,$b,Pb,zb),Va.x=jb,Va.y=$b,Va.z=Pb,Va.w=zb;ba.buffer=
d.colorBuffer;Bb=!1;jc=null;kb=0;qb=!1;tb=Ja=0;Ma=1;fb=0;ib=5126;wb=Ya=mb=Pa=0;qa(ba)?(Bb=!0,jc=W.createStream(34962,ba),ib=jc.dtype):(jc=W.getBuffer(ba))?ib=jc.dtype:"constant"in ba?(Ma=2,"number"===typeof ba.constant?(mb=ba.constant,Ya=wb=Pa=0):(mb=0<ba.constant.length?ba.constant[0]:0,Ya=1<ba.constant.length?ba.constant[1]:0,wb=2<ba.constant.length?ba.constant[2]:0,Pa=3<ba.constant.length?ba.constant[3]:0)):(jc=qa(ba.buffer)?W.createStream(34962,ba.buffer):W.getBuffer(ba.buffer),ib="type"in ba?
Fa[ba.type]:jc.dtype,qb=!!ba.normalized,tb=ba.size|0,Ja=ba.offset|0,fb=ba.stride|0,kb=ba.divisor|0);ub=x.location;Ra=A[ub];if(1===Ma){Ra.buffer||U.enableVertexAttribArray(ub);Dc=tb||4;if(Ra.type!==ib||Ra.size!==Dc||Ra.buffer!==jc||Ra.normalized!==qb||Ra.offset!==Ja||Ra.stride!==fb)U.bindBuffer(34962,jc.buffer),U.vertexAttribPointer(ub,Dc,ib,qb,fb,Ja),Ra.type=ib,Ra.size=Dc,Ra.buffer=jc,Ra.normalized=qb,Ra.offset=Ja,Ra.stride=fb;Ra.divisor!==kb&&(Y.vertexAttribDivisorANGLE(ub,kb),Ra.divisor=kb)}else if(Ra.buffer&&
(U.disableVertexAttribArray(ub),Ra.buffer=null),Ra.x!==mb||Ra.y!==Ya||Ra.z!==wb||Ra.w!==Pa)U.vertexAttrib4f(ub,mb,Ya,wb,Pa),Ra.x=mb,Ra.y=Ya,Ra.z=wb,Ra.w=Pa;Ta=ia.location;Kb=A[Ta];Kb.buffer||U.enableVertexAttribArray(Ta);if(5126!==Kb.type||1!==Kb.size||Kb.buffer!==f||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)U.bindBuffer(34962,f.buffer),U.vertexAttribPointer(Ta,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=f,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(Y.vertexAttribDivisorANGLE(Ta,
0),Kb.divisor=0);Fb=I.location;Na=A[Fb];Na.buffer||U.enableVertexAttribArray(Fb);if(5126!==Na.type||1!==Na.size||Na.buffer!==e||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)U.bindBuffer(34962,e.buffer),U.vertexAttribPointer(Fb,1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=e,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(Y.vertexAttribDivisorANGLE(Fb,0),Na.divisor=0);zd=d.scale;U.uniform2f(D.location,zd[0],zd[1]);$a=d.scaleFract;U.uniform2f(n.location,$a[0],$a[1]);Lb=d.translate;U.uniform2f(Z.location,
Lb[0],Lb[1]);Mb=d.translateFract;U.uniform2f(Q.location,Mb[0],Mb[1]);U.uniform1f(t.location,d.thickness);U.uniform1f(F.location,d.depth);nb=k.call(this,da,d,0);U.uniform4f(Wa.location,nb[0],nb[1],nb[2],nb[3]);U.uniform1f(R.location,d.dashLength);U.uniform1f(K.location,d.opacity);(Qa=d.dashTexture)&&"framebuffer"===Qa._reglType&&(Qa=Qa.color[0]);ac=Qa._texture;U.uniform1i(C.location,ac.bind());(Sa=T.elements)?U.bindBuffer(34963,Sa.buffer.buffer):ga.currentVAO&&(Sa=P.getElements(ga.currentVAO.elements))&&
U.bindBuffer(34963,Sa.buffer.buffer);xb=d.count;0<xb?Sa?Y.drawElementsInstancedANGLE(5,4,Sa.type,0<<(Sa.type-5121>>1),xb):Y.drawArraysInstancedANGLE(5,0,4,xb):0>xb&&(Sa?U.drawElements(5,4,Sa.type,0<<(Sa.type-5121>>1)):U.drawArrays(5,0,4));V.dirty=!0;ga.setVAO(null);da.viewportWidth=z;da.viewportHeight=H;E&&(r.cpuTime+=performance.now()-G);N&&W.destroyStream(X);td&&W.destroyStream(Oc);hd&&W.destroyStream(cd);Xa&&W.destroyStream(Kc);Bb&&W.destroyStream(jc);ac.unbind()},scope:function(b,l,n){var t,a,
q,x,v,k,C,R,g,I,F,B,D,L,M,Z,Q,ca,E,G,Da,na,K,Ga,P,u,xa,sb,ia,aa,ta,U,ha,S,ga,wa,A,Wa,ja,Ka,sa,ma,za,Ea,la,Ba,vb,ya,Oa,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,
Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se;t=b.viewport;a=t.x|0;q=t.y|0;x="width"in t?t.width|0:da.framebufferWidth-a;v="height"in t?t.height|0:da.framebufferHeight-q;k=da.viewportWidth;da.viewportWidth=x;C=da.viewportHeight;da.viewportHeight=v;R=Y[0];Y[0]=a;g=Y[1];Y[1]=q;I=Y[2];Y[2]=x;F=Y[3];Y[3]=v;B=X[0];X[0]=0;D=X[1];X[1]=0;L=X[2];X[2]=0;M=X[3];X[3]=0;Z=ra.blend_enable;ra.blend_enable=!0;Q=oa[0];oa[0]=32774;
ca=oa[1];oa[1]=32774;E=ua[0];ua[0]=770;G=ua[1];ua[1]=771;Da=ua[2];ua[2]=773;na=ua[3];ua[3]=1;K=p.call(this,da,b,n);Ga=ra.depth_enable;ra.depth_enable=K;P=b.viewport;u=P.x|0;xa=P.y|0;sb="width"in P?P.width|0:da.framebufferWidth-u;ia="height"in P?P.height|0:da.framebufferHeight-xa;aa=ea[0];ea[0]=u;ta=ea[1];ea[1]=xa;U=ea[2];ea[2]=sb;ha=ea[3];ea[3]=ia;S=ra.scissor_enable;ra.scissor_enable=!0;ga=ra.stencil_enable;ra.stencil_enable=!1;if(wa=V.profile)A=performance.now(),r.count++;Wa=T.offset;T.offset=0;
ja=T.count;T.count=4;Ka=b.count;sa=T.instances;T.instances=Ka;ma=T.primitive;T.primitive=5;za=b.dashLength;Ea=N[23];N[23]=za;la=b.dashTexture;Ba=N[24];N[24]=la;vb=b.depth;ya=N[22];N[22]=vb;Oa=b.id;Ec=N[31];N[31]=Oa;fc=b.miterLimit;Jc=N[32];N[32]=fc;pc=J.call(this,da,b,n);rc=N[33];N[33]=pc;nc=b.opacity;qc=N[10];N[10]=nc;hb=da.pixelRatio;Pc=N[34];N[34]=hb;Rb=b.scale;db=N[6];N[6]=Rb;Nb=b.scaleFract;bb=N[7];N[7]=Nb;pb=b.thickness;Xa=N[21];N[21]=pb;Kc=b.translate;Ib=N[8];N[8]=Kc;Jb=b.translateFract;sc=
N[9];N[9]=Jb;Ob=z.call(this,da,b,n);lb=N[3];N[3]=Ob;pa.buffer=b.positionBuffer;Hb=!1;Eb=null;zb=0;jb=!1;Pb=$b=0;rb=1;Va=0;Vb=5126;qb=kb=jc=Bb=0;qa(pa)?(Hb=!0,Eb=W.createStream(34962,pa),Vb=Eb.dtype):(Eb=W.getBuffer(pa))?Vb=Eb.dtype:"constant"in pa?(rb=2,"number"===typeof pa.constant?(jc=pa.constant,kb=qb=Bb=0):(jc=0<pa.constant.length?pa.constant[0]:0,kb=1<pa.constant.length?pa.constant[1]:0,qb=2<pa.constant.length?pa.constant[2]:0,Bb=3<pa.constant.length?pa.constant[3]:0)):(Eb=qa(pa.buffer)?W.createStream(34962,
pa.buffer):W.getBuffer(pa.buffer),Vb="type"in pa?Fa[pa.type]:Eb.dtype,jb=!!pa.normalized,Pb=pa.size|0,$b=pa.offset|0,Va=pa.stride|0,zb=pa.divisor|0);Ja=y.buffer;y.buffer=Eb;tb=y.divisor;y.divisor=zb;Ma=y.normalized;y.normalized=jb;fb=y.offset;y.offset=$b;ib=y.size;y.size=Pb;Pa=y.state;y.state=rb;mb=y.stride;y.stride=Va;Ya=y.type;y.type=Vb;wb=y.w;y.w=Bb;ub=y.x;y.x=jc;Ra=y.y;y.y=kb;Dc=y.z;y.z=qb;Ca.buffer=b.positionFractBuffer;Ta=!1;Kb=null;Fb=0;Na=!1;$a=zd=0;Lb=1;Mb=0;nb=5126;xb=Sa=ac=Qa=0;qa(Ca)?
(Ta=!0,Kb=W.createStream(34962,Ca),nb=Kb.dtype):(Kb=W.getBuffer(Ca))?nb=Kb.dtype:"constant"in Ca?(Lb=2,"number"===typeof Ca.constant?(ac=Ca.constant,Sa=xb=Qa=0):(ac=0<Ca.constant.length?Ca.constant[0]:0,Sa=1<Ca.constant.length?Ca.constant[1]:0,xb=2<Ca.constant.length?Ca.constant[2]:0,Qa=3<Ca.constant.length?Ca.constant[3]:0)):(Kb=qa(Ca.buffer)?W.createStream(34962,Ca.buffer):W.getBuffer(Ca.buffer),nb="type"in Ca?Fa[Ca.type]:Kb.dtype,Na=!!Ca.normalized,$a=Ca.size|0,zd=Ca.offset|0,Mb=Ca.stride|0,Fb=
Ca.divisor|0);yb=m.buffer;m.buffer=Kb;Ua=m.divisor;m.divisor=Fb;ob=m.normalized;m.normalized=Na;gc=m.offset;m.offset=zd;Bc=m.size;m.size=$a;wc=m.state;m.state=Lb;cb=m.stride;m.stride=Mb;kc=m.type;m.type=nb;Mc=m.w;m.w=Qa;Za=m.x;m.x=ac;nd=m.y;m.y=Sa;Cb=m.z;m.z=xb;Aa.buffer=b.positionBuffer;ab=!1;Xb=null;uc=0;Yb=!1;Nc=Qb=0;Sb=1;Od=0;Fc=5126;sd=Yc=Qc=vd=0;qa(Aa)?(ab=!0,Xb=W.createStream(34962,Aa),Fc=Xb.dtype):(Xb=W.getBuffer(Aa))?Fc=Xb.dtype:"constant"in Aa?(Sb=2,"number"===typeof Aa.constant?(Qc=Aa.constant,
Yc=sd=vd=0):(Qc=0<Aa.constant.length?Aa.constant[0]:0,Yc=1<Aa.constant.length?Aa.constant[1]:0,sd=2<Aa.constant.length?Aa.constant[2]:0,vd=3<Aa.constant.length?Aa.constant[3]:0)):(Xb=qa(Aa.buffer)?W.createStream(34962,Aa.buffer):W.getBuffer(Aa.buffer),Fc="type"in Aa?Fa[Aa.type]:Xb.dtype,Yb=!!Aa.normalized,Nc=Aa.size|0,Qb=Aa.offset|0,Od=Aa.stride|0,uc=Aa.divisor|0);oc=c.buffer;c.buffer=Xb;xc=c.divisor;c.divisor=uc;hc=c.normalized;c.normalized=Yb;eb=c.offset;c.offset=Qb;tc=c.size;c.size=Nc;Ub=c.state;
c.state=Sb;Zb=c.stride;c.stride=Od;ec=c.type;c.type=Fc;ic=c.w;c.w=vd;zc=c.x;c.x=Qc;Cc=c.y;c.y=Yc;dd=c.z;c.z=sd;ka.buffer=b.positionFractBuffer;Tc=!1;Uc=null;Vc=0;Zc=!1;ed=od=0;$c=1;lc=0;dc=5126;Ac=fd=Xc=ad=0;qa(ka)?(Tc=!0,Uc=W.createStream(34962,ka),dc=Uc.dtype):(Uc=W.getBuffer(ka))?dc=Uc.dtype:"constant"in ka?($c=2,"number"===typeof ka.constant?(Xc=ka.constant,fd=Ac=ad=0):(Xc=0<ka.constant.length?ka.constant[0]:0,fd=1<ka.constant.length?ka.constant[1]:0,Ac=2<ka.constant.length?ka.constant[2]:0,ad=
3<ka.constant.length?ka.constant[3]:0)):(Uc=qa(ka.buffer)?W.createStream(34962,ka.buffer):W.getBuffer(ka.buffer),dc="type"in ka?Fa[ka.type]:Uc.dtype,Zc=!!ka.normalized,ed=ka.size|0,od=ka.offset|0,lc=ka.stride|0,Vc=ka.divisor|0);jd=d.buffer;d.buffer=Uc;Bd=d.divisor;d.divisor=Vc;ye=d.normalized;d.normalized=Zc;ne=d.offset;d.offset=od;kd=d.size;d.size=ed;Fe=d.state;d.state=$c;Ed=d.stride;d.stride=lc;ge=d.type;d.type=dc;ae=d.w;d.w=ad;Ud=d.x;d.x=Xc;Ld=d.y;d.y=fd;Jd=d.z;d.z=Ac;ba.buffer=b.colorBuffer;qd=
!1;Wc=null;wd=0;ud=!1;xd=ld=0;Fd=1;Gd=0;je=5126;ke=me=ue=le=0;qa(ba)?(qd=!0,Wc=W.createStream(34962,ba),je=Wc.dtype):(Wc=W.getBuffer(ba))?je=Wc.dtype:"constant"in ba?(Fd=2,"number"===typeof ba.constant?(ue=ba.constant,me=ke=le=0):(ue=0<ba.constant.length?ba.constant[0]:0,me=1<ba.constant.length?ba.constant[1]:0,ke=2<ba.constant.length?ba.constant[2]:0,le=3<ba.constant.length?ba.constant[3]:0)):(Wc=qa(ba.buffer)?W.createStream(34962,ba.buffer):W.getBuffer(ba.buffer),je="type"in ba?Fa[ba.type]:Wc.dtype,
ud=!!ba.normalized,xd=ba.size|0,ld=ba.offset|0,Gd=ba.stride|0,wd=ba.divisor|0);he=h.buffer;h.buffer=Wc;ve=h.divisor;h.divisor=wd;ee=h.normalized;h.normalized=ud;oe=h.offset;h.offset=ld;Rc=h.size;h.size=xd;id=h.state;h.state=Fd;we=h.stride;h.stride=Gd;re=h.type;h.type=je;Rd=h.w;h.w=le;Vd=h.x;h.x=ue;Wd=h.y;h.y=me;Xd=h.z;h.z=ke;pe=H.buffer;H.buffer=f;Ce=H.divisor;H.divisor=0;Ge=H.normalized;H.normalized=!1;se=H.offset;H.offset=0;Ve=H.size;H.size=0;We=H.state;H.state=1;Re=H.stride;H.stride=8;xe=H.type;
H.type=5126;Je=H.w;H.w=0;Le=H.x;H.x=0;Me=H.y;H.y=0;Ne=H.z;H.z=0;Ke=w.buffer;w.buffer=e;Sd=w.divisor;w.divisor=0;be=w.normalized;w.normalized=!1;de=w.offset;w.offset=4;fe=w.size;w.size=0;Oe=w.state;w.state=1;Kd=w.stride;w.stride=8;Yd=w.type;w.type=5126;He=w.w;w.w=0;Pe=w.x;w.x=0;df=w.y;w.y=0;cf=w.z;w.z=0;Xe=O.vert;O.vert=20;Se=O.frag;O.frag=19;V.dirty=!0;l(da,b,n);da.viewportWidth=k;da.viewportHeight=C;Y[0]=R;Y[1]=g;Y[2]=I;Y[3]=F;X[0]=B;X[1]=D;X[2]=L;X[3]=M;ra.blend_enable=Z;oa[0]=Q;oa[1]=ca;ua[0]=
E;ua[1]=G;ua[2]=Da;ua[3]=na;ra.depth_enable=Ga;ea[0]=aa;ea[1]=ta;ea[2]=U;ea[3]=ha;ra.scissor_enable=S;ra.stencil_enable=ga;wa&&(r.cpuTime+=performance.now()-A);T.offset=Wa;T.count=ja;T.instances=sa;T.primitive=ma;N[23]=Ea;N[24]=Ba;N[22]=ya;N[31]=Ec;N[32]=Jc;N[33]=rc;N[10]=qc;N[34]=Pc;N[6]=db;N[7]=bb;N[21]=Xa;N[8]=Ib;N[9]=sc;N[3]=lb;Hb&&W.destroyStream(Eb);y.buffer=Ja;y.divisor=tb;y.normalized=Ma;y.offset=fb;y.size=ib;y.state=Pa;y.stride=mb;y.type=Ya;y.w=wb;y.x=ub;y.y=Ra;y.z=Dc;Ta&&W.destroyStream(Kb);
m.buffer=yb;m.divisor=Ua;m.normalized=ob;m.offset=gc;m.size=Bc;m.state=wc;m.stride=cb;m.type=kc;m.w=Mc;m.x=Za;m.y=nd;m.z=Cb;ab&&W.destroyStream(Xb);c.buffer=oc;c.divisor=xc;c.normalized=hc;c.offset=eb;c.size=tc;c.state=Ub;c.stride=Zb;c.type=ec;c.w=ic;c.x=zc;c.y=Cc;c.z=dd;Tc&&W.destroyStream(Uc);d.buffer=jd;d.divisor=Bd;d.normalized=ye;d.offset=ne;d.size=kd;d.state=Fe;d.stride=Ed;d.type=ge;d.w=ae;d.x=Ud;d.y=Ld;d.z=Jd;qd&&W.destroyStream(Wc);h.buffer=he;h.divisor=ve;h.normalized=ee;h.offset=oe;h.size=
Rc;h.state=id;h.stride=we;h.type=re;h.w=Rd;h.x=Vd;h.y=Wd;h.z=Xd;H.buffer=pe;H.divisor=Ce;H.normalized=Ge;H.offset=se;H.size=Ve;H.state=We;H.stride=Re;H.type=xe;H.w=Je;H.x=Le;H.y=Me;H.z=Ne;w.buffer=Ke;w.divisor=Sd;w.normalized=be;w.offset=de;w.size=fe;w.state=Oe;w.stride=Kd;w.type=Yd;w.w=He;w.x=Pe;w.y=df;w.z=cf;O.vert=Xe;O.frag=Se;V.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,
r,q,v,f,e,k,p,J,z,y,m,c,d,h,H,w,g,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W,da,V){var T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba,va,La,Ha,gb,fa;T=a.attributes;P=a.buffer;M=a.context;S=a.current;U=a.draw;qa=a.elements;ra=a.extensions;O=a.framebuffer;N=a.gl;ga=a.isBufferArgs;X=a.next;la=a.shader;oa=a.uniforms;ya=a.vao;ua=X.blend_color;aa=S.blend_color;za=X.blend_equation;ja=S.blend_equation;ma=X.blend_func;sa=S.blend_func;Ga=X.colorMask;
Da=S.colorMask;sb=X.depth_range;Ka=S.depth_range;ea=X.polygonOffset_offset;ca=S.polygonOffset_offset;na=X.sample_coverage;wa=S.sample_coverage;Ea=X.scissor_box;Oa=S.scissor_box;vb=X.stencil_func;ha=S.stencil_func;Y=X.stencil_opBack;xa=S.stencil_opBack;Fa=X.stencil_opFront;pa=S.stencil_opFront;Ca=X.viewport;Aa=S.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ba={divisor:1,offset:0,stride:4};va={divisor:1,offset:8,stride:8};La={divisor:1,offset:4,
stride:4};Ha={divisor:1,offset:16,stride:8};gb={divisor:1,offset:24,stride:8};fa={divisor:1,offset:0,stride:8};return{batch:function(d,c){var a,q,h,v,p,m;a=O.next;a!==O.cur&&(a?N.bindFramebuffer(36160,a.framebuffer):N.bindFramebuffer(36160,null),O.cur=a);if(S.dirty){var k,w,z,H,g,y,J,L,G,Ca,ua,oa,ma,za,Ea,la,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb;k=X.dither;k!==S.dither&&(k?N.enable(3024):N.disable(3024),S.dither=k);w=X.depth_func;w!==S.depth_func&&(N.depthFunc(w),S.depth_func=w);z=sb[0];H=sb[1];
if(z!==Ka[0]||H!==Ka[1])N.depthRange(z,H),Ka[0]=z,Ka[1]=H;g=X.depth_mask;g!==S.depth_mask&&(N.depthMask(g),S.depth_mask=g);y=Ga[0];J=Ga[1];L=Ga[2];G=Ga[3];if(y!==Da[0]||J!==Da[1]||L!==Da[2]||G!==Da[3])N.colorMask(y,J,L,G),Da[0]=y,Da[1]=J,Da[2]=L,Da[3]=G;Ca=X.frontFace;Ca!==S.frontFace&&(N.frontFace(Ca),S.frontFace=Ca);ua=X.lineWidth;ua!==S.lineWidth&&(N.lineWidth(ua),S.lineWidth=ua);oa=X.polygonOffset_enable;oa!==S.polygonOffset_enable&&(oa?N.enable(32823):N.disable(32823),S.polygonOffset_enable=
oa);ma=ea[0];za=ea[1];if(ma!==ca[0]||za!==ca[1])N.polygonOffset(ma,za),ca[0]=ma,ca[1]=za;Ea=X.sample_alpha;Ea!==S.sample_alpha&&(Ea?N.enable(32926):N.disable(32926),S.sample_alpha=Ea);la=X.sample_enable;la!==S.sample_enable&&(la?N.enable(32928):N.disable(32928),S.sample_enable=la);ie=na[0];Nd=na[1];if(ie!==wa[0]||Nd!==wa[1])N.sampleCoverage(ie,Nd),wa[0]=ie,wa[1]=Nd;Dd=X.stencil_mask;Dd!==S.stencil_mask&&(N.stencilMask(Dd),S.stencil_mask=Dd);pd=vb[0];bd=vb[1];td=vb[2];if(pd!==ha[0]||bd!==ha[1]||td!==
ha[2])N.stencilFunc(pd,bd,td),ha[0]=pd,ha[1]=bd,ha[2]=td;Oc=Fa[0];rd=Fa[1];Hc=Fa[2];gd=Fa[3];if(Oc!==pa[0]||rd!==pa[1]||Hc!==pa[2]||gd!==pa[3])N.stencilOpSeparate(Oc,rd,Hc,gd),pa[0]=Oc,pa[1]=rd,pa[2]=Hc,pa[3]=gd;Sc=Y[0];md=Y[1];Wb=Y[2];Gb=Y[3];if(Sc!==xa[0]||md!==xa[1]||Wb!==xa[2]||Gb!==xa[3])N.stencilOpSeparate(Sc,md,Wb,Gb),xa[0]=Sc,xa[1]=md,xa[2]=Wb,xa[3]=Gb}N.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;N.enable(3042);S.blend_enable=!0;N.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=
32774;N.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;N.enable(2884);S.cull_enable=!0;N.cullFace(1029);S.cull_face=1029;N.enable(3089);S.scissor_enable=!0;N.disable(2960);S.stencil_enable=!1;if(q=S.profile)h=performance.now(),r.count+=c;N.useProgram(E.program);v=ra.angle_instanced_arrays;var vc,Ab,yc,Db,Lc;ya.setVAO(null);vc=K.location;Ab=T[vc];Ab.buffer||N.enableVertexAttribArray(vc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==f||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)N.bindBuffer(34962,
f.buffer),N.vertexAttribPointer(vc,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=f,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(v.vertexAttribDivisorANGLE(vc,0),Ab.divisor=0);yc=D.location;Db=T[yc];Db.buffer||N.enableVertexAttribArray(yc);if(5126!==Db.type||1!==Db.size||Db.buffer!==e||!1!==Db.normalized||4!==Db.offset||8!==Db.stride)N.bindBuffer(34962,e.buffer),N.vertexAttribPointer(yc,1,5126,!1,8,4),Db.type=5126,Db.size=1,Db.buffer=e,Db.normalized=!1,Db.offset=4,Db.stride=8;0!==Db.divisor&&
(v.vertexAttribDivisorANGLE(yc,0),Db.divisor=0);(Lc=U.elements)?N.bindBuffer(34963,Lc.buffer.buffer):ya.currentVAO&&(Lc=qa.getElements(ya.currentVAO.elements))&&N.bindBuffer(34963,Lc.buffer.buffer);for(p=0;p<c;++p){m=d[p];var mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,
tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc;mc=m.viewport;Ic=mc.x|0;hd=mc.y|0;cd="width"in mc?mc.width|0:M.framebufferWidth-Ic;Ec="height"in mc?mc.height|0:M.framebufferHeight-hd;fc=M.viewportWidth;M.viewportWidth=cd;Jc=M.viewportHeight;M.viewportHeight=Ec;N.viewport(Ic,hd,cd,Ec);Aa[0]=Ic;Aa[1]=hd;Aa[2]=cd;Aa[3]=Ec;(pc=u.call(this,M,m,p))?N.enable(2929):N.disable(2929);S.depth_enable=pc;rc=
m.viewport;nc=rc.x|0;qc=rc.y|0;hb="width"in rc?rc.width|0:M.framebufferWidth-nc;Pc="height"in rc?rc.height|0:M.framebufferHeight-qc;N.scissor(nc,qc,hb,Pc);Oa[0]=nc;Oa[1]=qc;Oa[2]=hb;Oa[3]=Pc;va.buffer=m.positionBuffer;Rb=!1;db=null;Nb=0;bb=!1;Xa=pb=0;Kc=1;Ib=0;Jb=5126;Hb=lb=Ob=sc=0;ga(va)?(Rb=!0,db=P.createStream(34962,va),Jb=db.dtype):(db=P.getBuffer(va))?Jb=db.dtype:"constant"in va?(Kc=2,"number"===typeof va.constant?(Ob=va.constant,lb=Hb=sc=0):(Ob=0<va.constant.length?va.constant[0]:0,lb=1<va.constant.length?
va.constant[1]:0,Hb=2<va.constant.length?va.constant[2]:0,sc=3<va.constant.length?va.constant[3]:0)):(db=ga(va.buffer)?P.createStream(34962,va.buffer):P.getBuffer(va.buffer),Jb="type"in va?ka[va.type]:db.dtype,bb=!!va.normalized,Xa=va.size|0,pb=va.offset|0,Ib=va.stride|0,Nb=va.divisor|0);Eb=x.location;zb=T[Eb];if(1===Kc){zb.buffer||N.enableVertexAttribArray(Eb);jb=Xa||2;if(zb.type!==Jb||zb.size!==jb||zb.buffer!==db||zb.normalized!==bb||zb.offset!==pb||zb.stride!==Ib)N.bindBuffer(34962,db.buffer),
N.vertexAttribPointer(Eb,jb,Jb,bb,Ib,pb),zb.type=Jb,zb.size=jb,zb.buffer=db,zb.normalized=bb,zb.offset=pb,zb.stride=Ib;zb.divisor!==Nb&&(v.vertexAttribDivisorANGLE(Eb,Nb),zb.divisor=Nb)}else if(zb.buffer&&(N.disableVertexAttribArray(Eb),zb.buffer=null),zb.x!==Ob||zb.y!==lb||zb.z!==Hb||zb.w!==sc)N.vertexAttrib4f(Eb,Ob,lb,Hb,sc),zb.x=Ob,zb.y=lb,zb.z=Hb,zb.w=sc;Ha.buffer=m.positionBuffer;$b=!1;Pb=null;rb=0;Va=!1;Bb=Vb=0;jc=1;kb=0;qb=5126;fb=Ma=tb=Ja=0;ga(Ha)?($b=!0,Pb=P.createStream(34962,Ha),qb=Pb.dtype):
(Pb=P.getBuffer(Ha))?qb=Pb.dtype:"constant"in Ha?(jc=2,"number"===typeof Ha.constant?(tb=Ha.constant,Ma=fb=Ja=0):(tb=0<Ha.constant.length?Ha.constant[0]:0,Ma=1<Ha.constant.length?Ha.constant[1]:0,fb=2<Ha.constant.length?Ha.constant[2]:0,Ja=3<Ha.constant.length?Ha.constant[3]:0)):(Pb=ga(Ha.buffer)?P.createStream(34962,Ha.buffer):P.getBuffer(Ha.buffer),qb="type"in Ha?ka[Ha.type]:Pb.dtype,Va=!!Ha.normalized,Bb=Ha.size|0,Vb=Ha.offset|0,kb=Ha.stride|0,rb=Ha.divisor|0);ib=C.location;Pa=T[ib];if(1===jc){Pa.buffer||
N.enableVertexAttribArray(ib);mb=Bb||2;if(Pa.type!==qb||Pa.size!==mb||Pa.buffer!==Pb||Pa.normalized!==Va||Pa.offset!==Vb||Pa.stride!==kb)N.bindBuffer(34962,Pb.buffer),N.vertexAttribPointer(ib,mb,qb,Va,kb,Vb),Pa.type=qb,Pa.size=mb,Pa.buffer=Pb,Pa.normalized=Va,Pa.offset=Vb,Pa.stride=kb;Pa.divisor!==rb&&(v.vertexAttribDivisorANGLE(ib,rb),Pa.divisor=rb)}else if(Pa.buffer&&(N.disableVertexAttribArray(ib),Pa.buffer=null),Pa.x!==tb||Pa.y!==Ma||Pa.z!==fb||Pa.w!==Ja)N.vertexAttrib4f(ib,tb,Ma,fb,Ja),Pa.x=
tb,Pa.y=Ma,Pa.z=fb,Pa.w=Ja;gb.buffer=m.positionBuffer;Ya=!1;wb=null;ub=0;Ra=!1;Ta=Dc=0;Kb=1;Fb=0;Na=5126;Mb=Lb=$a=zd=0;ga(gb)?(Ya=!0,wb=P.createStream(34962,gb),Na=wb.dtype):(wb=P.getBuffer(gb))?Na=wb.dtype:"constant"in gb?(Kb=2,"number"===typeof gb.constant?($a=gb.constant,Lb=Mb=zd=0):($a=0<gb.constant.length?gb.constant[0]:0,Lb=1<gb.constant.length?gb.constant[1]:0,Mb=2<gb.constant.length?gb.constant[2]:0,zd=3<gb.constant.length?gb.constant[3]:0)):(wb=ga(gb.buffer)?P.createStream(34962,gb.buffer):
P.getBuffer(gb.buffer),Na="type"in gb?ka[gb.type]:wb.dtype,Ra=!!gb.normalized,Ta=gb.size|0,Dc=gb.offset|0,Fb=gb.stride|0,ub=gb.divisor|0);nb=Z.location;Qa=T[nb];if(1===Kb){Qa.buffer||N.enableVertexAttribArray(nb);ac=Ta||2;if(Qa.type!==Na||Qa.size!==ac||Qa.buffer!==wb||Qa.normalized!==Ra||Qa.offset!==Dc||Qa.stride!==Fb)N.bindBuffer(34962,wb.buffer),N.vertexAttribPointer(nb,ac,Na,Ra,Fb,Dc),Qa.type=Na,Qa.size=ac,Qa.buffer=wb,Qa.normalized=Ra,Qa.offset=Dc,Qa.stride=Fb;Qa.divisor!==ub&&(v.vertexAttribDivisorANGLE(nb,
ub),Qa.divisor=ub)}else if(Qa.buffer&&(N.disableVertexAttribArray(nb),Qa.buffer=null),Qa.x!==$a||Qa.y!==Lb||Qa.z!==Mb||Qa.w!==zd)N.vertexAttrib4f(nb,$a,Lb,Mb,zd),Qa.x=$a,Qa.y=Lb,Qa.z=Mb,Qa.w=zd;fa.buffer=m.positionBuffer;Sa=!1;xb=null;yb=0;Ua=!1;gc=ob=0;Bc=1;wc=0;cb=5126;nd=Za=Mc=kc=0;ga(fa)?(Sa=!0,xb=P.createStream(34962,fa),cb=xb.dtype):(xb=P.getBuffer(fa))?cb=xb.dtype:"constant"in fa?(Bc=2,"number"===typeof fa.constant?(Mc=fa.constant,Za=nd=kc=0):(Mc=0<fa.constant.length?fa.constant[0]:0,Za=1<
fa.constant.length?fa.constant[1]:0,nd=2<fa.constant.length?fa.constant[2]:0,kc=3<fa.constant.length?fa.constant[3]:0)):(xb=ga(fa.buffer)?P.createStream(34962,fa.buffer):P.getBuffer(fa.buffer),cb="type"in fa?ka[fa.type]:xb.dtype,Ua=!!fa.normalized,gc=fa.size|0,ob=fa.offset|0,wc=fa.stride|0,yb=fa.divisor|0);Cb=A.location;ab=T[Cb];if(1===Bc){ab.buffer||N.enableVertexAttribArray(Cb);Xb=gc||2;if(ab.type!==cb||ab.size!==Xb||ab.buffer!==xb||ab.normalized!==Ua||ab.offset!==ob||ab.stride!==wc)N.bindBuffer(34962,
xb.buffer),N.vertexAttribPointer(Cb,Xb,cb,Ua,wc,ob),ab.type=cb,ab.size=Xb,ab.buffer=xb,ab.normalized=Ua,ab.offset=ob,ab.stride=wc;ab.divisor!==yb&&(v.vertexAttribDivisorANGLE(Cb,yb),ab.divisor=yb)}else if(ab.buffer&&(N.disableVertexAttribArray(Cb),ab.buffer=null),ab.x!==Mc||ab.y!==Za||ab.z!==nd||ab.w!==kc)N.vertexAttrib4f(Cb,Mc,Za,nd,kc),ab.x=Mc,ab.y=Za,ab.z=nd,ab.w=kc;ba.buffer=m.colorBuffer;uc=!1;Yb=null;Qb=0;Nc=!1;Od=Sb=0;Fc=1;vd=0;Qc=5126;xc=oc=sd=Yc=0;ga(ba)?(uc=!0,Yb=P.createStream(34962,ba),
Qc=Yb.dtype):(Yb=P.getBuffer(ba))?Qc=Yb.dtype:"constant"in ba?(Fc=2,"number"===typeof ba.constant?(sd=ba.constant,oc=xc=Yc=0):(sd=0<ba.constant.length?ba.constant[0]:0,oc=1<ba.constant.length?ba.constant[1]:0,xc=2<ba.constant.length?ba.constant[2]:0,Yc=3<ba.constant.length?ba.constant[3]:0)):(Yb=ga(ba.buffer)?P.createStream(34962,ba.buffer):P.getBuffer(ba.buffer),Qc="type"in ba?ka[ba.type]:Yb.dtype,Nc=!!ba.normalized,Od=ba.size|0,Sb=ba.offset|0,vd=ba.stride|0,Qb=ba.divisor|0);hc=l.location;eb=T[hc];
if(1===Fc){eb.buffer||N.enableVertexAttribArray(hc);tc=Od||4;if(eb.type!==Qc||eb.size!==tc||eb.buffer!==Yb||eb.normalized!==Nc||eb.offset!==Sb||eb.stride!==vd)N.bindBuffer(34962,Yb.buffer),N.vertexAttribPointer(hc,tc,Qc,Nc,vd,Sb),eb.type=Qc,eb.size=tc,eb.buffer=Yb,eb.normalized=Nc,eb.offset=Sb,eb.stride=vd;eb.divisor!==Qb&&(v.vertexAttribDivisorANGLE(hc,Qb),eb.divisor=Qb)}else if(eb.buffer&&(N.disableVertexAttribArray(hc),eb.buffer=null),eb.x!==sd||eb.y!==oc||eb.z!==xc||eb.w!==Yc)N.vertexAttrib4f(hc,
sd,oc,xc,Yc),eb.x=sd,eb.y=oc,eb.z=xc,eb.w=Yc;La.buffer=m.colorBuffer;Ub=!1;Zb=null;ec=0;ic=!1;Cc=zc=0;dd=1;Tc=0;Uc=5126;ed=od=Zc=Vc=0;ga(La)?(Ub=!0,Zb=P.createStream(34962,La),Uc=Zb.dtype):(Zb=P.getBuffer(La))?Uc=Zb.dtype:"constant"in La?(dd=2,"number"===typeof La.constant?(Zc=La.constant,od=ed=Vc=0):(Zc=0<La.constant.length?La.constant[0]:0,od=1<La.constant.length?La.constant[1]:0,ed=2<La.constant.length?La.constant[2]:0,Vc=3<La.constant.length?La.constant[3]:0)):(Zb=ga(La.buffer)?P.createStream(34962,
La.buffer):P.getBuffer(La.buffer),Uc="type"in La?ka[La.type]:Zb.dtype,ic=!!La.normalized,Cc=La.size|0,zc=La.offset|0,Tc=La.stride|0,ec=La.divisor|0);$c=R.location;lc=T[$c];if(1===dd){lc.buffer||N.enableVertexAttribArray($c);dc=Cc||4;if(lc.type!==Uc||lc.size!==dc||lc.buffer!==Zb||lc.normalized!==ic||lc.offset!==zc||lc.stride!==Tc)N.bindBuffer(34962,Zb.buffer),N.vertexAttribPointer($c,dc,Uc,ic,Tc,zc),lc.type=Uc,lc.size=dc,lc.buffer=Zb,lc.normalized=ic,lc.offset=zc,lc.stride=Tc;lc.divisor!==ec&&(v.vertexAttribDivisorANGLE($c,
ec),lc.divisor=ec)}else if(lc.buffer&&(N.disableVertexAttribArray($c),lc.buffer=null),lc.x!==Zc||lc.y!==od||lc.z!==ed||lc.w!==Vc)N.vertexAttrib4f($c,Zc,od,ed,Vc),lc.x=Zc,lc.y=od,lc.z=ed,lc.w=Vc;ad=m.scale;Xc=ad[0];Ac=ad[1];p&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,N.uniform2f(Ba.location,Xc,Ac));Bd=m.translate;ye=Bd[0];kd=Bd[1];p&&ne===ye&&Fe===kd||(ne=ye,Fe=kd,N.uniform2f(da.location,ye,kd));Ed=m.thickness;p&&ge===Ed||(ge=Ed,N.uniform1f(W.location,Ed));ae=m.depth;p&&Ud===ae||(Ud=ae,N.uniform1f(I.location,
ae));Ld=B.call(this,M,m,p);Jd=Ld[0];Wc=Ld[1];ud=Ld[2];xd=Ld[3];p&&qd===Jd&&wd===Wc&&ld===ud&&Fd===xd||(qd=Jd,wd=Wc,ld=ud,Fd=xd,N.uniform4f(V.location,Jd,Wc,ud,xd));Gd=m.miterLimit;p&&je===Gd||(je=Gd,N.uniform1f(n.location,Gd));le=b.call(this,M,m,p);p&&ue===le||(ue=le,N.uniform1f(t.location,le));me=m.dashLength;p&&ke===me||(ke=me,N.uniform1f(F.location,me));he=m.opacity;p&&ve===he||(ve=he,N.uniform1f(Q.location,he));(ee=m.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);oe=ee._texture;
N.uniform1i(ia.location,oe.bind());Rc=m.count;0<Rc?Lc?v.drawElementsInstancedANGLE(5,4,Lc.type,0<<(Lc.type-5121>>1),Rc):v.drawArraysInstancedANGLE(5,0,4,Rc):0>Rc&&(Lc?N.drawElements(5,4,Lc.type,0<<(Lc.type-5121>>1)):N.drawArrays(5,0,4));M.viewportWidth=fc;M.viewportHeight=Jc;Rb&&P.destroyStream(db);$b&&P.destroyStream(Pb);Ya&&P.destroyStream(wb);Sa&&P.destroyStream(xb);uc&&P.destroyStream(Yb);Ub&&P.destroyStream(Zb);oe.unbind()}S.dirty=!0;ya.setVAO(null);q&&(r.cpuTime+=performance.now()-h)},draw:function(b){var d,
c,a,h,m,w,z,H,g,y,J,B,L,E,G,u,ta,Ca,ua,oa,ma,za,Ea,la,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od;d=O.next;d!==O.cur&&(d?N.bindFramebuffer(36160,d.framebuffer):N.bindFramebuffer(36160,null),O.cur=d);if(S.dirty){var Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,
tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac;Fc=X.dither;Fc!==S.dither&&(Fc?N.enable(3024):N.disable(3024),S.dither=Fc);vd=X.depth_func;vd!==S.depth_func&&(N.depthFunc(vd),S.depth_func=vd);Qc=sb[0];Yc=sb[1];if(Qc!==Ka[0]||Yc!==Ka[1])N.depthRange(Qc,Yc),Ka[0]=Qc,Ka[1]=Yc;sd=X.depth_mask;sd!==S.depth_mask&&(N.depthMask(sd),S.depth_mask=sd);oc=Ga[0];xc=Ga[1];hc=Ga[2];eb=Ga[3];if(oc!==Da[0]||xc!==Da[1]||hc!==Da[2]||eb!==Da[3])N.colorMask(oc,xc,hc,eb),Da[0]=oc,Da[1]=xc,Da[2]=hc,Da[3]=
eb;tc=X.frontFace;tc!==S.frontFace&&(N.frontFace(tc),S.frontFace=tc);Ub=X.lineWidth;Ub!==S.lineWidth&&(N.lineWidth(Ub),S.lineWidth=Ub);Zb=X.polygonOffset_enable;Zb!==S.polygonOffset_enable&&(Zb?N.enable(32823):N.disable(32823),S.polygonOffset_enable=Zb);ec=ea[0];ic=ea[1];if(ec!==ca[0]||ic!==ca[1])N.polygonOffset(ec,ic),ca[0]=ec,ca[1]=ic;zc=X.sample_alpha;zc!==S.sample_alpha&&(zc?N.enable(32926):N.disable(32926),S.sample_alpha=zc);Cc=X.sample_enable;Cc!==S.sample_enable&&(Cc?N.enable(32928):N.disable(32928),
S.sample_enable=Cc);dd=na[0];Tc=na[1];if(dd!==wa[0]||Tc!==wa[1])N.sampleCoverage(dd,Tc),wa[0]=dd,wa[1]=Tc;Uc=X.stencil_mask;Uc!==S.stencil_mask&&(N.stencilMask(Uc),S.stencil_mask=Uc);Vc=vb[0];Zc=vb[1];od=vb[2];if(Vc!==ha[0]||Zc!==ha[1]||od!==ha[2])N.stencilFunc(Vc,Zc,od),ha[0]=Vc,ha[1]=Zc,ha[2]=od;ed=Fa[0];$c=Fa[1];lc=Fa[2];dc=Fa[3];if(ed!==pa[0]||$c!==pa[1]||lc!==pa[2]||dc!==pa[3])N.stencilOpSeparate(ed,$c,lc,dc),pa[0]=ed,pa[1]=$c,pa[2]=lc,pa[3]=dc;ad=Y[0];Xc=Y[1];fd=Y[2];Ac=Y[3];if(ad!==xa[0]||
Xc!==xa[1]||fd!==xa[2]||Ac!==xa[3])N.stencilOpSeparate(ad,Xc,fd,Ac),xa[0]=ad,xa[1]=Xc,xa[2]=fd,xa[3]=Ac}c=b.viewport;a=c.x|0;h=c.y|0;m="width"in c?c.width|0:M.framebufferWidth-a;w="height"in c?c.height|0:M.framebufferHeight-h;z=M.viewportWidth;M.viewportWidth=m;H=M.viewportHeight;M.viewportHeight=w;N.viewport(a,h,m,w);Aa[0]=a;Aa[1]=h;Aa[2]=m;Aa[3]=w;N.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;N.enable(3042);S.blend_enable=!0;N.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;N.blendFuncSeparate(770,
771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;N.enable(2884);S.cull_enable=!0;N.cullFace(1029);S.cull_face=1029;(g=q.call(this,M,b,0))?N.enable(2929):N.disable(2929);S.depth_enable=g;y=b.viewport;J=y.x|0;B=y.y|0;L="width"in y?y.width|0:M.framebufferWidth-J;E="height"in y?y.height|0:M.framebufferHeight-B;N.scissor(J,B,L,E);Oa[0]=J;Oa[1]=B;Oa[2]=L;Oa[3]=E;N.enable(3089);S.scissor_enable=!0;N.disable(2960);S.stencil_enable=!1;if(G=S.profile)u=performance.now(),r.count++;N.useProgram(v.program);ta=
ra.angle_instanced_arrays;ya.setVAO(null);va.buffer=b.positionBuffer;Ca=!1;ua=null;oa=0;ma=!1;Ea=za=0;la=1;Nd=0;Dd=5126;Oc=td=bd=pd=0;ga(va)?(Ca=!0,ua=P.createStream(34962,va),Dd=ua.dtype):(ua=P.getBuffer(va))?Dd=ua.dtype:"constant"in va?(la=2,"number"===typeof va.constant?(bd=va.constant,td=Oc=pd=0):(bd=0<va.constant.length?va.constant[0]:0,td=1<va.constant.length?va.constant[1]:0,Oc=2<va.constant.length?va.constant[2]:0,pd=3<va.constant.length?va.constant[3]:0)):(ua=ga(va.buffer)?P.createStream(34962,
va.buffer):P.getBuffer(va.buffer),Dd="type"in va?ka[va.type]:ua.dtype,ma=!!va.normalized,Ea=va.size|0,za=va.offset|0,Nd=va.stride|0,oa=va.divisor|0);rd=x.location;Hc=T[rd];if(1===la){Hc.buffer||N.enableVertexAttribArray(rd);gd=Ea||2;if(Hc.type!==Dd||Hc.size!==gd||Hc.buffer!==ua||Hc.normalized!==ma||Hc.offset!==za||Hc.stride!==Nd)N.bindBuffer(34962,ua.buffer),N.vertexAttribPointer(rd,gd,Dd,ma,Nd,za),Hc.type=Dd,Hc.size=gd,Hc.buffer=ua,Hc.normalized=ma,Hc.offset=za,Hc.stride=Nd;Hc.divisor!==oa&&(ta.vertexAttribDivisorANGLE(rd,
oa),Hc.divisor=oa)}else if(Hc.buffer&&(N.disableVertexAttribArray(rd),Hc.buffer=null),Hc.x!==bd||Hc.y!==td||Hc.z!==Oc||Hc.w!==pd)N.vertexAttrib4f(rd,bd,td,Oc,pd),Hc.x=bd,Hc.y=td,Hc.z=Oc,Hc.w=pd;Ha.buffer=b.positionBuffer;Sc=!1;md=null;Wb=0;Gb=!1;Ab=vc=0;yc=1;Db=0;Lc=5126;cd=hd=Ic=mc=0;ga(Ha)?(Sc=!0,md=P.createStream(34962,Ha),Lc=md.dtype):(md=P.getBuffer(Ha))?Lc=md.dtype:"constant"in Ha?(yc=2,"number"===typeof Ha.constant?(Ic=Ha.constant,hd=cd=mc=0):(Ic=0<Ha.constant.length?Ha.constant[0]:0,hd=1<
Ha.constant.length?Ha.constant[1]:0,cd=2<Ha.constant.length?Ha.constant[2]:0,mc=3<Ha.constant.length?Ha.constant[3]:0)):(md=ga(Ha.buffer)?P.createStream(34962,Ha.buffer):P.getBuffer(Ha.buffer),Lc="type"in Ha?ka[Ha.type]:md.dtype,Gb=!!Ha.normalized,Ab=Ha.size|0,vc=Ha.offset|0,Db=Ha.stride|0,Wb=Ha.divisor|0);Ec=C.location;fc=T[Ec];if(1===yc){fc.buffer||N.enableVertexAttribArray(Ec);Jc=Ab||2;if(fc.type!==Lc||fc.size!==Jc||fc.buffer!==md||fc.normalized!==Gb||fc.offset!==vc||fc.stride!==Db)N.bindBuffer(34962,
md.buffer),N.vertexAttribPointer(Ec,Jc,Lc,Gb,Db,vc),fc.type=Lc,fc.size=Jc,fc.buffer=md,fc.normalized=Gb,fc.offset=vc,fc.stride=Db;fc.divisor!==Wb&&(ta.vertexAttribDivisorANGLE(Ec,Wb),fc.divisor=Wb)}else if(fc.buffer&&(N.disableVertexAttribArray(Ec),fc.buffer=null),fc.x!==Ic||fc.y!==hd||fc.z!==cd||fc.w!==mc)N.vertexAttrib4f(Ec,Ic,hd,cd,mc),fc.x=Ic,fc.y=hd,fc.z=cd,fc.w=mc;gb.buffer=b.positionBuffer;pc=!1;rc=null;nc=0;qc=!1;Pc=hb=0;Rb=1;db=0;Nb=5126;Kc=Xa=pb=bb=0;ga(gb)?(pc=!0,rc=P.createStream(34962,
gb),Nb=rc.dtype):(rc=P.getBuffer(gb))?Nb=rc.dtype:"constant"in gb?(Rb=2,"number"===typeof gb.constant?(pb=gb.constant,Xa=Kc=bb=0):(pb=0<gb.constant.length?gb.constant[0]:0,Xa=1<gb.constant.length?gb.constant[1]:0,Kc=2<gb.constant.length?gb.constant[2]:0,bb=3<gb.constant.length?gb.constant[3]:0)):(rc=ga(gb.buffer)?P.createStream(34962,gb.buffer):P.getBuffer(gb.buffer),Nb="type"in gb?ka[gb.type]:rc.dtype,qc=!!gb.normalized,Pc=gb.size|0,hb=gb.offset|0,db=gb.stride|0,nc=gb.divisor|0);Ib=Z.location;Jb=
T[Ib];if(1===Rb){Jb.buffer||N.enableVertexAttribArray(Ib);sc=Pc||2;if(Jb.type!==Nb||Jb.size!==sc||Jb.buffer!==rc||Jb.normalized!==qc||Jb.offset!==hb||Jb.stride!==db)N.bindBuffer(34962,rc.buffer),N.vertexAttribPointer(Ib,sc,Nb,qc,db,hb),Jb.type=Nb,Jb.size=sc,Jb.buffer=rc,Jb.normalized=qc,Jb.offset=hb,Jb.stride=db;Jb.divisor!==nc&&(ta.vertexAttribDivisorANGLE(Ib,nc),Jb.divisor=nc)}else if(Jb.buffer&&(N.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==pb||Jb.y!==Xa||Jb.z!==Kc||Jb.w!==bb)N.vertexAttrib4f(Ib,
pb,Xa,Kc,bb),Jb.x=pb,Jb.y=Xa,Jb.z=Kc,Jb.w=bb;fa.buffer=b.positionBuffer;Ob=!1;lb=null;Hb=0;Eb=!1;jb=zb=0;$b=1;Pb=0;rb=5126;jc=Bb=Vb=Va=0;ga(fa)?(Ob=!0,lb=P.createStream(34962,fa),rb=lb.dtype):(lb=P.getBuffer(fa))?rb=lb.dtype:"constant"in fa?($b=2,"number"===typeof fa.constant?(Vb=fa.constant,Bb=jc=Va=0):(Vb=0<fa.constant.length?fa.constant[0]:0,Bb=1<fa.constant.length?fa.constant[1]:0,jc=2<fa.constant.length?fa.constant[2]:0,Va=3<fa.constant.length?fa.constant[3]:0)):(lb=ga(fa.buffer)?P.createStream(34962,
fa.buffer):P.getBuffer(fa.buffer),rb="type"in fa?ka[fa.type]:lb.dtype,Eb=!!fa.normalized,jb=fa.size|0,zb=fa.offset|0,Pb=fa.stride|0,Hb=fa.divisor|0);kb=A.location;qb=T[kb];if(1===$b){qb.buffer||N.enableVertexAttribArray(kb);Ja=jb||2;if(qb.type!==rb||qb.size!==Ja||qb.buffer!==lb||qb.normalized!==Eb||qb.offset!==zb||qb.stride!==Pb)N.bindBuffer(34962,lb.buffer),N.vertexAttribPointer(kb,Ja,rb,Eb,Pb,zb),qb.type=rb,qb.size=Ja,qb.buffer=lb,qb.normalized=Eb,qb.offset=zb,qb.stride=Pb;qb.divisor!==Hb&&(ta.vertexAttribDivisorANGLE(kb,
Hb),qb.divisor=Hb)}else if(qb.buffer&&(N.disableVertexAttribArray(kb),qb.buffer=null),qb.x!==Vb||qb.y!==Bb||qb.z!==jc||qb.w!==Va)N.vertexAttrib4f(kb,Vb,Bb,jc,Va),qb.x=Vb,qb.y=Bb,qb.z=jc,qb.w=Va;ba.buffer=b.colorBuffer;tb=!1;Ma=null;fb=0;ib=!1;mb=Pa=0;Ya=1;wb=0;ub=5126;Kb=Ta=Dc=Ra=0;ga(ba)?(tb=!0,Ma=P.createStream(34962,ba),ub=Ma.dtype):(Ma=P.getBuffer(ba))?ub=Ma.dtype:"constant"in ba?(Ya=2,"number"===typeof ba.constant?(Dc=ba.constant,Ta=Kb=Ra=0):(Dc=0<ba.constant.length?ba.constant[0]:0,Ta=1<ba.constant.length?
ba.constant[1]:0,Kb=2<ba.constant.length?ba.constant[2]:0,Ra=3<ba.constant.length?ba.constant[3]:0)):(Ma=ga(ba.buffer)?P.createStream(34962,ba.buffer):P.getBuffer(ba.buffer),ub="type"in ba?ka[ba.type]:Ma.dtype,ib=!!ba.normalized,mb=ba.size|0,Pa=ba.offset|0,wb=ba.stride|0,fb=ba.divisor|0);Fb=l.location;Na=T[Fb];if(1===Ya){Na.buffer||N.enableVertexAttribArray(Fb);zd=mb||4;if(Na.type!==ub||Na.size!==zd||Na.buffer!==Ma||Na.normalized!==ib||Na.offset!==Pa||Na.stride!==wb)N.bindBuffer(34962,Ma.buffer),
N.vertexAttribPointer(Fb,zd,ub,ib,wb,Pa),Na.type=ub,Na.size=zd,Na.buffer=Ma,Na.normalized=ib,Na.offset=Pa,Na.stride=wb;Na.divisor!==fb&&(ta.vertexAttribDivisorANGLE(Fb,fb),Na.divisor=fb)}else if(Na.buffer&&(N.disableVertexAttribArray(Fb),Na.buffer=null),Na.x!==Dc||Na.y!==Ta||Na.z!==Kb||Na.w!==Ra)N.vertexAttrib4f(Fb,Dc,Ta,Kb,Ra),Na.x=Dc,Na.y=Ta,Na.z=Kb,Na.w=Ra;La.buffer=b.colorBuffer;$a=!1;Lb=null;Mb=0;nb=!1;ac=Qa=0;Sa=1;xb=0;yb=5126;Bc=gc=ob=Ua=0;ga(La)?($a=!0,Lb=P.createStream(34962,La),yb=Lb.dtype):
(Lb=P.getBuffer(La))?yb=Lb.dtype:"constant"in La?(Sa=2,"number"===typeof La.constant?(ob=La.constant,gc=Bc=Ua=0):(ob=0<La.constant.length?La.constant[0]:0,gc=1<La.constant.length?La.constant[1]:0,Bc=2<La.constant.length?La.constant[2]:0,Ua=3<La.constant.length?La.constant[3]:0)):(Lb=ga(La.buffer)?P.createStream(34962,La.buffer):P.getBuffer(La.buffer),yb="type"in La?ka[La.type]:Lb.dtype,nb=!!La.normalized,ac=La.size|0,Qa=La.offset|0,xb=La.stride|0,Mb=La.divisor|0);wc=R.location;cb=T[wc];if(1===Sa){cb.buffer||
N.enableVertexAttribArray(wc);kc=ac||4;if(cb.type!==yb||cb.size!==kc||cb.buffer!==Lb||cb.normalized!==nb||cb.offset!==Qa||cb.stride!==xb)N.bindBuffer(34962,Lb.buffer),N.vertexAttribPointer(wc,kc,yb,nb,xb,Qa),cb.type=yb,cb.size=kc,cb.buffer=Lb,cb.normalized=nb,cb.offset=Qa,cb.stride=xb;cb.divisor!==Mb&&(ta.vertexAttribDivisorANGLE(wc,Mb),cb.divisor=Mb)}else if(cb.buffer&&(N.disableVertexAttribArray(wc),cb.buffer=null),cb.x!==ob||cb.y!==gc||cb.z!==Bc||cb.w!==Ua)N.vertexAttrib4f(wc,ob,gc,Bc,Ua),cb.x=
ob,cb.y=gc,cb.z=Bc,cb.w=Ua;Mc=K.location;Za=T[Mc];Za.buffer||N.enableVertexAttribArray(Mc);if(5126!==Za.type||1!==Za.size||Za.buffer!==f||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)N.bindBuffer(34962,f.buffer),N.vertexAttribPointer(Mc,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=f,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(ta.vertexAttribDivisorANGLE(Mc,0),Za.divisor=0);nd=D.location;Cb=T[nd];Cb.buffer||N.enableVertexAttribArray(nd);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==
e||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)N.bindBuffer(34962,e.buffer),N.vertexAttribPointer(nd,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=e,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(ta.vertexAttribDivisorANGLE(nd,0),Cb.divisor=0);ab=b.scale;N.uniform2f(Ba.location,ab[0],ab[1]);Xb=b.translate;N.uniform2f(da.location,Xb[0],Xb[1]);N.uniform1f(W.location,b.thickness);N.uniform1f(I.location,b.depth);uc=k.call(this,M,b,0);N.uniform4f(V.location,uc[0],uc[1],uc[2],uc[3]);N.uniform1f(n.location,
b.miterLimit);Yb=p.call(this,M,b,0);N.uniform1f(t.location,Yb);N.uniform1f(F.location,b.dashLength);N.uniform1f(Q.location,b.opacity);(Qb=b.dashTexture)&&"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Nc=Qb._texture;N.uniform1i(ia.location,Nc.bind());(Sb=U.elements)?N.bindBuffer(34963,Sb.buffer.buffer):ya.currentVAO&&(Sb=qa.getElements(ya.currentVAO.elements))&&N.bindBuffer(34963,Sb.buffer.buffer);Od=b.count;0<Od?Sb?ta.drawElementsInstancedANGLE(5,4,Sb.type,0<<(Sb.type-5121>>1),Od):ta.drawArraysInstancedANGLE(5,
0,4,Od):0>Od&&(Sb?N.drawElements(5,4,Sb.type,0<<(Sb.type-5121>>1)):N.drawArrays(5,0,4));S.dirty=!0;ya.setVAO(null);M.viewportWidth=z;M.viewportHeight=H;G&&(r.cpuTime+=performance.now()-u);Ca&&P.destroyStream(ua);Sc&&P.destroyStream(md);pc&&P.destroyStream(rc);Ob&&P.destroyStream(lb);tb&&P.destroyStream(Ma);$a&&P.destroyStream(Lb);Nc.unbind()},scope:function(b,l,n){var t,a,q,x,v,p,k,C,R,I,F,B,D,Z,O,Q,ca,E,ea,Y,Da,na,K,T,Ga,u,N,xa,V,Fa,sb,ia,aa,ta,pa,ha,wa,qa,A,W,Aa,Wa,da,ja,Ka,sa,ra,Ba,vb,ya,Oa,hb,
Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,
Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;t=b.viewport;a=t.x|0;q=t.y|0;x="width"in t?t.width|0:M.framebufferWidth-a;v="height"in t?t.height|0:M.framebufferHeight-q;p=M.viewportWidth;M.viewportWidth=x;k=M.viewportHeight;M.viewportHeight=v;C=Ca[0];Ca[0]=a;R=Ca[1];Ca[1]=q;I=Ca[2];Ca[2]=x;F=Ca[3];Ca[3]=v;B=ua[0];ua[0]=0;D=ua[1];ua[1]=0;Z=ua[2];ua[2]=0;O=ua[3];ua[3]=0;Q=X.blend_enable;X.blend_enable=!0;ca=za[0];za[0]=32774;E=za[1];za[1]=32774;ea=ma[0];ma[0]=
770;Y=ma[1];ma[1]=771;Da=ma[2];ma[2]=773;na=ma[3];ma[3]=1;K=X.cull_enable;X.cull_enable=!0;T=X.cull_face;X.cull_face=1029;Ga=J.call(this,M,b,n);u=X.depth_enable;X.depth_enable=Ga;N=b.viewport;xa=N.x|0;V=N.y|0;Fa="width"in N?N.width|0:M.framebufferWidth-xa;sb="height"in N?N.height|0:M.framebufferHeight-V;ia=Ea[0];Ea[0]=xa;aa=Ea[1];Ea[1]=V;ta=Ea[2];Ea[2]=Fa;pa=Ea[3];Ea[3]=sb;ha=X.scissor_enable;X.scissor_enable=!0;wa=X.stencil_enable;X.stencil_enable=!1;if(qa=S.profile)A=performance.now(),r.count++;
W=U.offset;U.offset=0;Aa=U.count;U.count=4;Wa=b.count;da=U.instances;U.instances=Wa;ja=U.primitive;U.primitive=5;Ka=b.dashLength;sa=oa[23];oa[23]=Ka;ra=b.dashTexture;Ba=oa[24];oa[24]=ra;vb=b.depth;ya=oa[22];oa[22]=vb;Oa=b.id;hb=oa[31];oa[31]=Oa;Pc=b.miterLimit;Rb=oa[32];oa[32]=Pc;db=z.call(this,M,b,n);Nb=oa[33];oa[33]=db;bb=b.opacity;pb=oa[10];oa[10]=bb;Xa=M.pixelRatio;Kc=oa[34];oa[34]=Xa;Ib=b.scale;Jb=oa[6];oa[6]=Ib;sc=b.scaleFract;Ob=oa[7];oa[7]=sc;lb=b.thickness;Hb=oa[21];oa[21]=lb;Eb=b.translate;
zb=oa[8];oa[8]=Eb;jb=b.translateFract;$b=oa[9];oa[9]=jb;Pb=y.call(this,M,b,n);rb=oa[3];oa[3]=Pb;ba.buffer=b.colorBuffer;Va=!1;Vb=null;Bb=0;jc=!1;qb=kb=0;Ja=1;tb=0;Ma=5126;mb=Pa=ib=fb=0;ga(ba)?(Va=!0,Vb=P.createStream(34962,ba),Ma=Vb.dtype):(Vb=P.getBuffer(ba))?Ma=Vb.dtype:"constant"in ba?(Ja=2,"number"===typeof ba.constant?(ib=ba.constant,Pa=mb=fb=0):(ib=0<ba.constant.length?ba.constant[0]:0,Pa=1<ba.constant.length?ba.constant[1]:0,mb=2<ba.constant.length?ba.constant[2]:0,fb=3<ba.constant.length?
ba.constant[3]:0)):(Vb=ga(ba.buffer)?P.createStream(34962,ba.buffer):P.getBuffer(ba.buffer),Ma="type"in ba?ka[ba.type]:Vb.dtype,jc=!!ba.normalized,qb=ba.size|0,kb=ba.offset|0,tb=ba.stride|0,Bb=ba.divisor|0);Ya=m.buffer;m.buffer=Vb;wb=m.divisor;m.divisor=Bb;ub=m.normalized;m.normalized=jc;Ra=m.offset;m.offset=kb;Dc=m.size;m.size=qb;Ta=m.state;m.state=Ja;Kb=m.stride;m.stride=tb;Fb=m.type;m.type=Ma;Na=m.w;m.w=fb;zd=m.x;m.x=ib;$a=m.y;m.y=Pa;Lb=m.z;m.z=mb;va.buffer=b.positionBuffer;Mb=!1;nb=null;Qa=0;
ac=!1;xb=Sa=0;yb=1;Ua=0;ob=5126;cb=wc=Bc=gc=0;ga(va)?(Mb=!0,nb=P.createStream(34962,va),ob=nb.dtype):(nb=P.getBuffer(va))?ob=nb.dtype:"constant"in va?(yb=2,"number"===typeof va.constant?(Bc=va.constant,wc=cb=gc=0):(Bc=0<va.constant.length?va.constant[0]:0,wc=1<va.constant.length?va.constant[1]:0,cb=2<va.constant.length?va.constant[2]:0,gc=3<va.constant.length?va.constant[3]:0)):(nb=ga(va.buffer)?P.createStream(34962,va.buffer):P.getBuffer(va.buffer),ob="type"in va?ka[va.type]:nb.dtype,ac=!!va.normalized,
xb=va.size|0,Sa=va.offset|0,Ua=va.stride|0,Qa=va.divisor|0);kc=c.buffer;c.buffer=nb;Mc=c.divisor;c.divisor=Qa;Za=c.normalized;c.normalized=ac;nd=c.offset;c.offset=Sa;Cb=c.size;c.size=xb;ab=c.state;c.state=yb;Xb=c.stride;c.stride=Ua;uc=c.type;c.type=ob;Yb=c.w;c.w=gc;Qb=c.x;c.x=Bc;Nc=c.y;c.y=wc;Sb=c.z;c.z=cb;La.buffer=b.colorBuffer;Od=!1;Fc=null;vd=0;Qc=!1;sd=Yc=0;oc=1;xc=0;hc=5126;Zb=Ub=tc=eb=0;ga(La)?(Od=!0,Fc=P.createStream(34962,La),hc=Fc.dtype):(Fc=P.getBuffer(La))?hc=Fc.dtype:"constant"in La?
(oc=2,"number"===typeof La.constant?(tc=La.constant,Ub=Zb=eb=0):(tc=0<La.constant.length?La.constant[0]:0,Ub=1<La.constant.length?La.constant[1]:0,Zb=2<La.constant.length?La.constant[2]:0,eb=3<La.constant.length?La.constant[3]:0)):(Fc=ga(La.buffer)?P.createStream(34962,La.buffer):P.getBuffer(La.buffer),hc="type"in La?ka[La.type]:Fc.dtype,Qc=!!La.normalized,sd=La.size|0,Yc=La.offset|0,xc=La.stride|0,vd=La.divisor|0);ec=d.buffer;d.buffer=Fc;ic=d.divisor;d.divisor=vd;zc=d.normalized;d.normalized=Qc;
Cc=d.offset;d.offset=Yc;dd=d.size;d.size=sd;Tc=d.state;d.state=oc;Uc=d.stride;d.stride=xc;Vc=d.type;d.type=hc;Zc=d.w;d.w=eb;od=d.x;d.x=tc;ed=d.y;d.y=Ub;$c=d.z;d.z=Zb;Ha.buffer=b.positionBuffer;lc=!1;dc=null;ad=0;Xc=!1;Ac=fd=0;jd=1;Bd=0;ye=5126;Ed=Fe=kd=ne=0;ga(Ha)?(lc=!0,dc=P.createStream(34962,Ha),ye=dc.dtype):(dc=P.getBuffer(Ha))?ye=dc.dtype:"constant"in Ha?(jd=2,"number"===typeof Ha.constant?(kd=Ha.constant,Fe=Ed=ne=0):(kd=0<Ha.constant.length?Ha.constant[0]:0,Fe=1<Ha.constant.length?Ha.constant[1]:
0,Ed=2<Ha.constant.length?Ha.constant[2]:0,ne=3<Ha.constant.length?Ha.constant[3]:0)):(dc=ga(Ha.buffer)?P.createStream(34962,Ha.buffer):P.getBuffer(Ha.buffer),ye="type"in Ha?ka[Ha.type]:dc.dtype,Xc=!!Ha.normalized,Ac=Ha.size|0,fd=Ha.offset|0,Bd=Ha.stride|0,ad=Ha.divisor|0);ge=h.buffer;h.buffer=dc;ae=h.divisor;h.divisor=ad;Ud=h.normalized;h.normalized=Xc;Ld=h.offset;h.offset=fd;Jd=h.size;h.size=Ac;qd=h.state;h.state=jd;Wc=h.stride;h.stride=Bd;wd=h.type;h.type=ye;ud=h.w;h.w=ne;ld=h.x;h.x=kd;xd=h.y;
h.y=Fe;Fd=h.z;h.z=Ed;Gd=H.buffer;H.buffer=f;je=H.divisor;H.divisor=0;le=H.normalized;H.normalized=!1;ue=H.offset;H.offset=0;me=H.size;H.size=0;ke=H.state;H.state=1;he=H.stride;H.stride=8;ve=H.type;H.type=5126;ee=H.w;H.w=0;oe=H.x;H.x=0;Rc=H.y;H.y=0;id=H.z;H.z=0;we=w.buffer;w.buffer=e;re=w.divisor;w.divisor=0;Rd=w.normalized;w.normalized=!1;Vd=w.offset;w.offset=4;Wd=w.size;w.size=0;Xd=w.state;w.state=1;pe=w.stride;w.stride=8;Ce=w.type;w.type=5126;Ge=w.w;w.w=0;se=w.x;w.x=0;Ve=w.y;w.y=0;We=w.z;w.z=0;
gb.buffer=b.positionBuffer;Re=!1;xe=null;Je=0;Le=!1;Ne=Me=0;Ke=1;Sd=0;be=5126;Kd=Oe=fe=de=0;ga(gb)?(Re=!0,xe=P.createStream(34962,gb),be=xe.dtype):(xe=P.getBuffer(gb))?be=xe.dtype:"constant"in gb?(Ke=2,"number"===typeof gb.constant?(fe=gb.constant,Oe=Kd=de=0):(fe=0<gb.constant.length?gb.constant[0]:0,Oe=1<gb.constant.length?gb.constant[1]:0,Kd=2<gb.constant.length?gb.constant[2]:0,de=3<gb.constant.length?gb.constant[3]:0)):(xe=ga(gb.buffer)?P.createStream(34962,gb.buffer):P.getBuffer(gb.buffer),be=
"type"in gb?ka[gb.type]:xe.dtype,Le=!!gb.normalized,Ne=gb.size|0,Me=gb.offset|0,Sd=gb.stride|0,Je=gb.divisor|0);Yd=g.buffer;g.buffer=xe;He=g.divisor;g.divisor=Je;Pe=g.normalized;g.normalized=Le;df=g.offset;g.offset=Me;cf=g.size;g.size=Ne;Xe=g.state;g.state=Ke;Se=g.stride;g.stride=Sd;bf=g.type;g.type=be;af=g.w;g.w=de;Ye=g.x;g.x=fe;Ze=g.y;g.y=Oe;Zd=g.z;g.z=Kd;fa.buffer=b.positionBuffer;ce=!1;$e=null;kf=0;of=!1;lf=gf=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;ga(fa)?(ce=!0,$e=P.createStream(34962,fa),sf=$e.dtype):
($e=P.getBuffer(fa))?sf=$e.dtype:"constant"in fa?(mf=2,"number"===typeof fa.constant?(tf=fa.constant,Cf=Df=pf=0):(tf=0<fa.constant.length?fa.constant[0]:0,Cf=1<fa.constant.length?fa.constant[1]:0,Df=2<fa.constant.length?fa.constant[2]:0,pf=3<fa.constant.length?fa.constant[3]:0)):($e=ga(fa.buffer)?P.createStream(34962,fa.buffer):P.getBuffer(fa.buffer),sf="type"in fa?ka[fa.type]:$e.dtype,of=!!fa.normalized,lf=fa.size|0,gf=fa.offset|0,nf=fa.stride|0,kf=fa.divisor|0);Te=G.buffer;G.buffer=$e;Ie=G.divisor;
G.divisor=kf;qf=G.normalized;G.normalized=of;rf=G.offset;G.offset=gf;Ef=G.size;G.size=lf;Hf=G.state;G.state=mf;Bf=G.stride;G.stride=nf;Ff=G.type;G.type=sf;Gf=G.w;G.w=pf;xf=G.x;G.x=tf;yf=G.y;G.y=Cf;wf=G.z;G.z=Df;zf=la.vert;la.vert=36;Af=la.frag;la.frag=35;S.dirty=!0;l(M,b,n);M.viewportWidth=p;M.viewportHeight=k;Ca[0]=C;Ca[1]=R;Ca[2]=I;Ca[3]=F;ua[0]=B;ua[1]=D;ua[2]=Z;ua[3]=O;X.blend_enable=Q;za[0]=ca;za[1]=E;ma[0]=ea;ma[1]=Y;ma[2]=Da;ma[3]=na;X.cull_enable=K;X.cull_face=T;X.depth_enable=u;Ea[0]=ia;
Ea[1]=aa;Ea[2]=ta;Ea[3]=pa;X.scissor_enable=ha;X.stencil_enable=wa;qa&&(r.cpuTime+=performance.now()-A);U.offset=W;U.count=Aa;U.instances=da;U.primitive=ja;oa[23]=sa;oa[24]=Ba;oa[22]=ya;oa[31]=hb;oa[32]=Rb;oa[33]=Nb;oa[10]=pb;oa[34]=Kc;oa[6]=Jb;oa[7]=Ob;oa[21]=Hb;oa[8]=zb;oa[9]=$b;oa[3]=rb;Va&&P.destroyStream(Vb);m.buffer=Ya;m.divisor=wb;m.normalized=ub;m.offset=Ra;m.size=Dc;m.state=Ta;m.stride=Kb;m.type=Fb;m.w=Na;m.x=zd;m.y=$a;m.z=Lb;Mb&&P.destroyStream(nb);c.buffer=kc;c.divisor=Mc;c.normalized=
Za;c.offset=nd;c.size=Cb;c.state=ab;c.stride=Xb;c.type=uc;c.w=Yb;c.x=Qb;c.y=Nc;c.z=Sb;Od&&P.destroyStream(Fc);d.buffer=ec;d.divisor=ic;d.normalized=zc;d.offset=Cc;d.size=dd;d.state=Tc;d.stride=Uc;d.type=Vc;d.w=Zc;d.x=od;d.y=ed;d.z=$c;lc&&P.destroyStream(dc);h.buffer=ge;h.divisor=ae;h.normalized=Ud;h.offset=Ld;h.size=Jd;h.state=qd;h.stride=Wc;h.type=wd;h.w=ud;h.x=ld;h.y=xd;h.z=Fd;H.buffer=Gd;H.divisor=je;H.normalized=le;H.offset=ue;H.size=me;H.state=ke;H.stride=he;H.type=ve;H.w=ee;H.x=oe;H.y=Rc;H.z=
id;w.buffer=we;w.divisor=re;w.normalized=Rd;w.offset=Vd;w.size=Wd;w.state=Xd;w.stride=pe;w.type=Ce;w.w=Ge;w.x=se;w.y=Ve;w.z=We;Re&&P.destroyStream(xe);g.buffer=Yd;g.divisor=He;g.normalized=Pe;g.offset=df;g.size=cf;g.state=Xe;g.stride=Se;g.type=bf;g.w=af;g.x=Ye;g.y=Ze;g.z=Zd;ce&&P.destroyStream($e);G.buffer=Te;G.divisor=Ie;G.normalized=qf;G.offset=rf;G.size=Ef;G.state=Hf;G.stride=Bf;G.type=Ff;G.w=Gf;G.x=xf;G.y=yf;G.z=wf;la.vert=zf;la.frag=Af;S.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,
r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G){var E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma;E=a.attributes;u=a.buffer;B=a.context;b=a.current;l=a.draw;x=a.elements;R=a.extensions;C=a.framebuffer;F=a.gl;ia=a.isBufferArgs;I=a.next;K=a.shader;D=a.uniforms;n=a.vao;t=I.blend_color;Z=b.blend_color;Q=I.blend_equation;A=b.blend_equation;Ba=I.blend_func;W=b.blend_func;da=I.colorMask;V=b.colorMask;T=I.depth_range;P=b.depth_range;M=I.polygonOffset_offset;S=b.polygonOffset_offset;
U=I.sample_coverage;qa=b.sample_coverage;ra=I.scissor_box;O=b.scissor_box;N=I.stencil_func;ga=b.stencil_func;X=I.stencil_opBack;la=b.stencil_opBack;oa=I.stencil_opFront;ya=b.stencil_opFront;ua=I.viewport;aa=b.viewport;za={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};ma={offset:8,stride:8};return{batch:function(t,a){var e,q,f,v,p,k;e=C.next;e!==C.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),C.cur=
e);if(b.dirty){var D,Q,K,ua,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba,ra,Ba,Ha,gb,fa,Gc,bc,Ia,cc,Tb,ze,Hd,Ad,Td,De,Ae,$d,qe,Cd;D=I.dither;D!==b.dither&&(D?F.enable(3024):F.disable(3024),b.dither=D);Q=I.depth_func;Q!==b.depth_func&&(F.depthFunc(Q),b.depth_func=Q);K=T[0];ua=T[1];if(K!==P[0]||ua!==P[1])F.depthRange(K,ua),P[0]=K,P[1]=ua;ha=I.depth_mask;ha!==b.depth_mask&&(F.depthMask(ha),b.depth_mask=ha);Y=da[0];xa=da[1];Fa=da[2];pa=da[3];if(Y!==V[0]||xa!==V[1]||Fa!==V[2]||pa!==V[3])F.colorMask(Y,xa,Fa,pa),V[0]=Y,V[1]=
xa,V[2]=Fa,V[3]=pa;Ca=I.cull_enable;Ca!==b.cull_enable&&(Ca?F.enable(2884):F.disable(2884),b.cull_enable=Ca);Aa=I.cull_face;Aa!==b.cull_face&&(F.cullFace(Aa),b.cull_face=Aa);ka=I.frontFace;ka!==b.frontFace&&(F.frontFace(ka),b.frontFace=ka);ba=I.lineWidth;ba!==b.lineWidth&&(F.lineWidth(ba),b.lineWidth=ba);ra=I.polygonOffset_enable;ra!==b.polygonOffset_enable&&(ra?F.enable(32823):F.disable(32823),b.polygonOffset_enable=ra);Ba=M[0];Ha=M[1];if(Ba!==S[0]||Ha!==S[1])F.polygonOffset(Ba,Ha),S[0]=Ba,S[1]=
Ha;gb=I.sample_alpha;gb!==b.sample_alpha&&(gb?F.enable(32926):F.disable(32926),b.sample_alpha=gb);fa=I.sample_enable;fa!==b.sample_enable&&(fa?F.enable(32928):F.disable(32928),b.sample_enable=fa);Gc=U[0];bc=U[1];if(Gc!==qa[0]||bc!==qa[1])F.sampleCoverage(Gc,bc),qa[0]=Gc,qa[1]=bc;Ia=I.stencil_mask;Ia!==b.stencil_mask&&(F.stencilMask(Ia),b.stencil_mask=Ia);cc=N[0];Tb=N[1];ze=N[2];if(cc!==ga[0]||Tb!==ga[1]||ze!==ga[2])F.stencilFunc(cc,Tb,ze),ga[0]=cc,ga[1]=Tb,ga[2]=ze;Hd=oa[0];Ad=oa[1];Td=oa[2];De=oa[3];
if(Hd!==ya[0]||Ad!==ya[1]||Td!==ya[2]||De!==ya[3])F.stencilOpSeparate(Hd,Ad,Td,De),ya[0]=Hd,ya[1]=Ad,ya[2]=Td,ya[3]=De;Ae=X[0];$d=X[1];qe=X[2];Cd=X[3];if(Ae!==la[0]||$d!==la[1]||qe!==la[2]||Cd!==la[3])F.stencilOpSeparate(Ae,$d,qe,Cd),la[0]=Ae,la[1]=$d,la[2]=qe,la[3]=Cd}F.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;F.enable(3042);b.blend_enable=!0;F.blendEquationSeparate(32774,32774);A[0]=32774;A[1]=32774;F.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;F.disable(2929);b.depth_enable=
!1;F.enable(3089);b.scissor_enable=!0;F.disable(2960);b.stencil_enable=!1;if(q=b.profile)f=performance.now(),r.count+=a;F.useProgram(g.program);v=R.angle_instanced_arrays;var yd;n.setVAO(null);yd=l.instances;for(p=0;p<a;++p){k=t[p];var Qd,Pd,Md,Be,Qe,Ue,Id,Ee,te,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb;Qd=k.viewport;Pd=Qd.x|
0;Md=Qd.y|0;Be="width"in Qd?Qd.width|0:B.framebufferWidth-Pd;Qe="height"in Qd?Qd.height|0:B.framebufferHeight-Md;Ue=B.viewportWidth;B.viewportWidth=Be;Id=B.viewportHeight;B.viewportHeight=Qe;F.viewport(Pd,Md,Be,Qe);aa[0]=Pd;aa[1]=Md;aa[2]=Be;aa[3]=Qe;Ee=k.viewport;te=Ee.x|0;ie=Ee.y|0;Nd="width"in Ee?Ee.width|0:B.framebufferWidth-te;Dd="height"in Ee?Ee.height|0:B.framebufferHeight-ie;F.scissor(te,ie,Nd,Dd);O[0]=te;O[1]=ie;O[2]=Nd;O[3]=Dd;ja.buffer=k.positionBuffer;pd=!1;bd=null;td=0;Oc=!1;Hc=rd=0;
gd=1;Sc=0;md=5126;Ab=vc=Gb=Wb=0;ia(ja)?(pd=!0,bd=u.createStream(34962,ja),md=bd.dtype):(bd=u.getBuffer(ja))?md=bd.dtype:"constant"in ja?(gd=2,"number"===typeof ja.constant?(Gb=ja.constant,vc=Ab=Wb=0):(Gb=0<ja.constant.length?ja.constant[0]:0,vc=1<ja.constant.length?ja.constant[1]:0,Ab=2<ja.constant.length?ja.constant[2]:0,Wb=3<ja.constant.length?ja.constant[3]:0)):(bd=ia(ja.buffer)?u.createStream(34962,ja.buffer):u.getBuffer(ja.buffer),md="type"in ja?za[ja.type]:bd.dtype,Oc=!!ja.normalized,Hc=ja.size|
0,rd=ja.offset|0,Sc=ja.stride|0,td=ja.divisor|0);yc=d.location;Db=E[yc];if(1===gd){Db.buffer||F.enableVertexAttribArray(yc);Lc=Hc||2;if(Db.type!==md||Db.size!==Lc||Db.buffer!==bd||Db.normalized!==Oc||Db.offset!==rd||Db.stride!==Sc)F.bindBuffer(34962,bd.buffer),F.vertexAttribPointer(yc,Lc,md,Oc,Sc,rd),Db.type=md,Db.size=Lc,Db.buffer=bd,Db.normalized=Oc,Db.offset=rd,Db.stride=Sc;Db.divisor!==td&&(v.vertexAttribDivisorANGLE(yc,td),Db.divisor=td)}else if(Db.buffer&&(F.disableVertexAttribArray(yc),Db.buffer=
null),Db.x!==Gb||Db.y!==vc||Db.z!==Ab||Db.w!==Wb)F.vertexAttrib4f(yc,Gb,vc,Ab,Wb),Db.x=Gb,Db.y=vc,Db.z=Ab,Db.w=Wb;ma.buffer=k.positionFractBuffer;mc=!1;Ic=null;hd=0;cd=!1;fc=Ec=0;Jc=1;pc=0;rc=5126;Pc=hb=qc=nc=0;ia(ma)?(mc=!0,Ic=u.createStream(34962,ma),rc=Ic.dtype):(Ic=u.getBuffer(ma))?rc=Ic.dtype:"constant"in ma?(Jc=2,"number"===typeof ma.constant?(qc=ma.constant,hb=Pc=nc=0):(qc=0<ma.constant.length?ma.constant[0]:0,hb=1<ma.constant.length?ma.constant[1]:0,Pc=2<ma.constant.length?ma.constant[2]:
0,nc=3<ma.constant.length?ma.constant[3]:0)):(Ic=ia(ma.buffer)?u.createStream(34962,ma.buffer):u.getBuffer(ma.buffer),rc="type"in ma?za[ma.type]:Ic.dtype,cd=!!ma.normalized,fc=ma.size|0,Ec=ma.offset|0,pc=ma.stride|0,hd=ma.divisor|0);Rb=h.location;db=E[Rb];if(1===Jc){db.buffer||F.enableVertexAttribArray(Rb);Nb=fc||2;if(db.type!==rc||db.size!==Nb||db.buffer!==Ic||db.normalized!==cd||db.offset!==Ec||db.stride!==pc)F.bindBuffer(34962,Ic.buffer),F.vertexAttribPointer(Rb,Nb,rc,cd,pc,Ec),db.type=rc,db.size=
Nb,db.buffer=Ic,db.normalized=cd,db.offset=Ec,db.stride=pc;db.divisor!==hd&&(v.vertexAttribDivisorANGLE(Rb,hd),db.divisor=hd)}else if(db.buffer&&(F.disableVertexAttribArray(Rb),db.buffer=null),db.x!==qc||db.y!==hb||db.z!==Pc||db.w!==nc)F.vertexAttrib4f(Rb,qc,hb,Pc,nc),db.x=qc,db.y=hb,db.z=Pc,db.w=nc;bb=k.fill;pb=bb[0];Kc=bb[1];Jb=bb[2];Ob=bb[3];p&&Xa===pb&&Ib===Kc&&sc===Jb&&lb===Ob||(Xa=pb,Ib=Kc,sc=Jb,lb=Ob,F.uniform4f(y.location,pb,Kc,Jb,Ob));Hb=k.scale;Eb=Hb[0];jb=Hb[1];p&&zb===Eb&&$b===jb||(zb=
Eb,$b=jb,F.uniform2f(H.location,Eb,jb));Pb=k.scaleFract;rb=Pb[0];Vb=Pb[1];p&&Va===rb&&Bb===Vb||(Va=rb,Bb=Vb,F.uniform2f(w.location,rb,Vb));jc=k.translate;kb=jc[0];Ja=jc[1];p&&qb===kb&&tb===Ja||(qb=kb,tb=Ja,F.uniform2f(L.location,kb,Ja));Ma=k.translateFract;fb=Ma[0];Pa=Ma[1];p&&ib===fb&&mb===Pa||(ib=fb,mb=Pa,F.uniform2f(G.location,fb,Pa));Ya=k.id;p&&wb===Ya||(wb=Ya,F.uniform1f(m.location,Ya));ub=k.opacity;p&&Ra===ub||(Ra=ub,F.uniform1f(c.location,ub));Dc=z.call(this,B,k,p);Ta=null;(Ta=(Kb=ia(Dc))?
x.createStream(Dc):x.getElements(Dc))&&F.bindBuffer(34963,Ta.buffer.buffer);if(Fb=Ta?Ta.vertCount:-1)0<yd?Ta?v.drawElementsInstancedANGLE(4,Fb,Ta.type,0<<(Ta.type-5121>>1),yd):v.drawArraysInstancedANGLE(4,0,Fb,yd):0>yd&&(Ta?F.drawElements(4,Fb,Ta.type,0<<(Ta.type-5121>>1)):F.drawArrays(4,0,Fb)),B.viewportWidth=Ue,B.viewportHeight=Id,pd&&u.destroyStream(bd),mc&&u.destroyStream(Ic),Kb&&x.destroyStream(Ta)}b.dirty=!0;n.setVAO(null);q&&(r.cpuTime+=performance.now()-f)},draw:function(t){var a,e,f,p,k,
z,g,J,D,Q,K,ha,Y,xa,Fa,pa,ua,Aa,ka,ba,ra,Ba;a=C.next;a!==C.cur&&(a?F.bindFramebuffer(36160,a.framebuffer):F.bindFramebuffer(36160,null),C.cur=a);if(b.dirty){a=I.dither;a!==b.dither&&(a?F.enable(3024):F.disable(3024),b.dither=a);a=I.depth_func;a!==b.depth_func&&(F.depthFunc(a),b.depth_func=a);a=T[0];z=T[1];if(a!==P[0]||z!==P[1])F.depthRange(a,z),P[0]=a,P[1]=z;a=I.depth_mask;a!==b.depth_mask&&(F.depthMask(a),b.depth_mask=a);a=da[0];z=da[1];e=da[2];f=da[3];if(a!==V[0]||z!==V[1]||e!==V[2]||f!==V[3])F.colorMask(a,
z,e,f),V[0]=a,V[1]=z,V[2]=e,V[3]=f;a=I.cull_enable;a!==b.cull_enable&&(a?F.enable(2884):F.disable(2884),b.cull_enable=a);a=I.cull_face;a!==b.cull_face&&(F.cullFace(a),b.cull_face=a);a=I.frontFace;a!==b.frontFace&&(F.frontFace(a),b.frontFace=a);a=I.lineWidth;a!==b.lineWidth&&(F.lineWidth(a),b.lineWidth=a);a=I.polygonOffset_enable;a!==b.polygonOffset_enable&&(a?F.enable(32823):F.disable(32823),b.polygonOffset_enable=a);a=M[0];z=M[1];if(a!==S[0]||z!==S[1])F.polygonOffset(a,z),S[0]=a,S[1]=z;a=I.sample_alpha;
a!==b.sample_alpha&&(a?F.enable(32926):F.disable(32926),b.sample_alpha=a);a=I.sample_enable;a!==b.sample_enable&&(a?F.enable(32928):F.disable(32928),b.sample_enable=a);a=U[0];z=U[1];if(a!==qa[0]||z!==qa[1])F.sampleCoverage(a,z),qa[0]=a,qa[1]=z;a=I.stencil_mask;a!==b.stencil_mask&&(F.stencilMask(a),b.stencil_mask=a);a=N[0];z=N[1];e=N[2];if(a!==ga[0]||z!==ga[1]||e!==ga[2])F.stencilFunc(a,z,e),ga[0]=a,ga[1]=z,ga[2]=e;a=oa[0];z=oa[1];e=oa[2];f=oa[3];if(a!==ya[0]||z!==ya[1]||e!==ya[2]||f!==ya[3])F.stencilOpSeparate(a,
z,e,f),ya[0]=a,ya[1]=z,ya[2]=e,ya[3]=f;a=X[0];z=X[1];e=X[2];f=X[3];if(a!==la[0]||z!==la[1]||e!==la[2]||f!==la[3])F.stencilOpSeparate(a,z,e,f),la[0]=a,la[1]=z,la[2]=e,la[3]=f}a=t.viewport;e=a.x|0;f=a.y|0;p="width"in a?a.width|0:B.framebufferWidth-e;k="height"in a?a.height|0:B.framebufferHeight-f;a=B.viewportWidth;B.viewportWidth=p;z=B.viewportHeight;B.viewportHeight=k;F.viewport(e,f,p,k);aa[0]=e;aa[1]=f;aa[2]=p;aa[3]=k;F.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;F.enable(3042);b.blend_enable=
!0;F.blendEquationSeparate(32774,32774);A[0]=32774;A[1]=32774;F.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;F.disable(2929);b.depth_enable=!1;k=t.viewport;e=k.x|0;f=k.y|0;p="width"in k?k.width|0:B.framebufferWidth-e;k="height"in k?k.height|0:B.framebufferHeight-f;F.scissor(e,f,p,k);O[0]=e;O[1]=f;O[2]=p;O[3]=k;F.enable(3089);b.scissor_enable=!0;F.disable(2960);b.stencil_enable=!1;if(e=b.profile)g=performance.now(),r.count++;F.useProgram(q.program);f=R.angle_instanced_arrays;
n.setVAO(null);ja.buffer=t.positionBuffer;p=!1;J=0;D=!1;K=Q=0;ha=1;Y=0;xa=5126;Aa=ua=pa=Fa=0;ia(ja)?(p=!0,k=u.createStream(34962,ja),xa=k.dtype):(k=u.getBuffer(ja))?xa=k.dtype:"constant"in ja?(ha=2,"number"===typeof ja.constant?(pa=ja.constant,ua=Aa=Fa=0):(pa=0<ja.constant.length?ja.constant[0]:0,ua=1<ja.constant.length?ja.constant[1]:0,Aa=2<ja.constant.length?ja.constant[2]:0,Fa=3<ja.constant.length?ja.constant[3]:0)):(k=ia(ja.buffer)?u.createStream(34962,ja.buffer):u.getBuffer(ja.buffer),xa="type"in
ja?za[ja.type]:k.dtype,D=!!ja.normalized,K=ja.size|0,Q=ja.offset|0,Y=ja.stride|0,J=ja.divisor|0);ka=d.location;ba=E[ka];if(1===ha){ba.buffer||F.enableVertexAttribArray(ka);K=K||2;if(ba.type!==xa||ba.size!==K||ba.buffer!==k||ba.normalized!==D||ba.offset!==Q||ba.stride!==Y)F.bindBuffer(34962,k.buffer),F.vertexAttribPointer(ka,K,xa,D,Y,Q),ba.type=xa,ba.size=K,ba.buffer=k,ba.normalized=D,ba.offset=Q,ba.stride=Y;ba.divisor!==J&&(f.vertexAttribDivisorANGLE(ka,J),ba.divisor=J)}else if(ba.buffer&&(F.disableVertexAttribArray(ka),
ba.buffer=null),ba.x!==pa||ba.y!==ua||ba.z!==Aa||ba.w!==Fa)F.vertexAttrib4f(ka,pa,ua,Aa,Fa),ba.x=pa,ba.y=ua,ba.z=Aa,ba.w=Fa;ma.buffer=t.positionFractBuffer;J=!1;Q=0;Y=!1;Fa=xa=0;pa=1;ka=0;ba=5126;Ba=ra=Aa=ua=0;ia(ma)?(J=!0,D=u.createStream(34962,ma),ba=D.dtype):(D=u.getBuffer(ma))?ba=D.dtype:"constant"in ma?(pa=2,"number"===typeof ma.constant?(Aa=ma.constant,ra=Ba=ua=0):(Aa=0<ma.constant.length?ma.constant[0]:0,ra=1<ma.constant.length?ma.constant[1]:0,Ba=2<ma.constant.length?ma.constant[2]:0,ua=3<
ma.constant.length?ma.constant[3]:0)):(D=ia(ma.buffer)?u.createStream(34962,ma.buffer):u.getBuffer(ma.buffer),ba="type"in ma?za[ma.type]:D.dtype,Y=!!ma.normalized,Fa=ma.size|0,xa=ma.offset|0,ka=ma.stride|0,Q=ma.divisor|0);K=h.location;ha=E[K];if(1===pa){ha.buffer||F.enableVertexAttribArray(K);Fa=Fa||2;if(ha.type!==ba||ha.size!==Fa||ha.buffer!==D||ha.normalized!==Y||ha.offset!==xa||ha.stride!==ka)F.bindBuffer(34962,D.buffer),F.vertexAttribPointer(K,Fa,ba,Y,ka,xa),ha.type=ba,ha.size=Fa,ha.buffer=D,
ha.normalized=Y,ha.offset=xa,ha.stride=ka;ha.divisor!==Q&&(f.vertexAttribDivisorANGLE(K,Q),ha.divisor=Q)}else if(ha.buffer&&(F.disableVertexAttribArray(K),ha.buffer=null),ha.x!==Aa||ha.y!==ra||ha.z!==Ba||ha.w!==ua)F.vertexAttrib4f(K,Aa,ra,Ba,ua),ha.x=Aa,ha.y=ra,ha.z=Ba,ha.w=ua;Q=t.fill;F.uniform4f(y.location,Q[0],Q[1],Q[2],Q[3]);Q=t.scale;F.uniform2f(H.location,Q[0],Q[1]);Q=t.scaleFract;F.uniform2f(w.location,Q[0],Q[1]);Q=t.translate;F.uniform2f(L.location,Q[0],Q[1]);Q=t.translateFract;F.uniform2f(G.location,
Q[0],Q[1]);F.uniform1f(m.location,t.id);F.uniform1f(c.location,t.opacity);Q=v.call(this,B,t,0);(Q=(t=ia(Q))?x.createStream(Q):x.getElements(Q))&&F.bindBuffer(34963,Q.buffer.buffer);if(Y=Q?Q.vertCount:-1)xa=l.instances,0<xa?Q?f.drawElementsInstancedANGLE(4,Y,Q.type,0<<(Q.type-5121>>1),xa):f.drawArraysInstancedANGLE(4,0,Y,xa):0>xa&&(Q?F.drawElements(4,Y,Q.type,0<<(Q.type-5121>>1)):F.drawArrays(4,0,Y)),b.dirty=!0,n.setVAO(null),B.viewportWidth=a,B.viewportHeight=z,e&&(r.cpuTime+=performance.now()-g),
p&&u.destroyStream(k),J&&u.destroyStream(D),t&&x.destroyStream(Q)},scope:function(n,d,c){var a,q,h,v,m,w,z,C,H,g,y,J,R,F,M,Z,O,L,E,G,T,P,N,V,X,aa,U,S,ga,qa,A,oa,W,Wa,da,la,ya,yd,Qd,Pd,Md,Be,Qe,Ue,Id,Ee,te,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub;a=n.viewport;q=a.x|0;h=a.y|0;v="width"in a?a.width|0:B.framebufferWidth-q;m="height"in a?a.height|
0:B.framebufferHeight-h;w=B.viewportWidth;B.viewportWidth=v;z=B.viewportHeight;B.viewportHeight=m;C=ua[0];ua[0]=q;H=ua[1];ua[1]=h;g=ua[2];ua[2]=v;y=ua[3];ua[3]=m;J=t[0];t[0]=0;R=t[1];t[1]=0;F=t[2];t[2]=0;M=t[3];t[3]=0;Z=I.blend_enable;I.blend_enable=!0;O=Q[0];Q[0]=32774;L=Q[1];Q[1]=32774;E=Ba[0];Ba[0]=770;G=Ba[1];Ba[1]=771;T=Ba[2];Ba[2]=773;P=Ba[3];Ba[3]=1;N=I.depth_enable;I.depth_enable=!1;V=n.viewport;X=V.x|0;aa=V.y|0;U="width"in V?V.width|0:B.framebufferWidth-X;S="height"in V?V.height|0:B.framebufferHeight-
aa;ga=ra[0];ra[0]=X;qa=ra[1];ra[1]=aa;A=ra[2];ra[2]=U;oa=ra[3];ra[3]=S;W=I.scissor_enable;I.scissor_enable=!0;Wa=I.stencil_enable;I.stencil_enable=!1;if(da=b.profile)la=performance.now(),r.count++;ya=f.call(this,B,n,c);yd=null;yd=(Qd=ia(ya))?x.createStream(ya):x.getElements(ya);Pd=l.elements;l.elements=yd;Md=l.offset;l.offset=0;Be=yd?yd.vertCount:-1;Qe=l.count;l.count=Be;Ue=l.primitive;l.primitive=4;Id=n.fill;Ee=D[14];D[14]=Id;te=n.id;ie=D[31];D[31]=te;Nd=n.opacity;Dd=D[10];D[10]=Nd;pd=B.pixelRatio;
bd=D[34];D[34]=pd;td=n.scale;Oc=D[6];D[6]=td;rd=n.scaleFract;Hc=D[7];D[7]=rd;gd=n.translate;Sc=D[8];D[8]=gd;md=n.translateFract;Wb=D[9];D[9]=md;Gb=e.call(this,B,n,c);vc=D[3];D[3]=Gb;ja.buffer=n.positionBuffer;Ab=!1;yc=null;Db=0;Lc=!1;Ic=mc=0;hd=1;cd=0;Ec=5126;rc=pc=Jc=fc=0;ia(ja)?(Ab=!0,yc=u.createStream(34962,ja),Ec=yc.dtype):(yc=u.getBuffer(ja))?Ec=yc.dtype:"constant"in ja?(hd=2,"number"===typeof ja.constant?(Jc=ja.constant,pc=rc=fc=0):(Jc=0<ja.constant.length?ja.constant[0]:0,pc=1<ja.constant.length?
ja.constant[1]:0,rc=2<ja.constant.length?ja.constant[2]:0,fc=3<ja.constant.length?ja.constant[3]:0)):(yc=ia(ja.buffer)?u.createStream(34962,ja.buffer):u.getBuffer(ja.buffer),Ec="type"in ja?za[ja.type]:yc.dtype,Lc=!!ja.normalized,Ic=ja.size|0,mc=ja.offset|0,cd=ja.stride|0,Db=ja.divisor|0);nc=k.buffer;k.buffer=yc;qc=k.divisor;k.divisor=Db;hb=k.normalized;k.normalized=Lc;Pc=k.offset;k.offset=mc;Rb=k.size;k.size=Ic;db=k.state;k.state=hd;Nb=k.stride;k.stride=cd;bb=k.type;k.type=Ec;pb=k.w;k.w=fc;Xa=k.x;
k.x=Jc;Kc=k.y;k.y=pc;Ib=k.z;k.z=rc;ma.buffer=n.positionFractBuffer;Jb=!1;sc=null;Ob=0;lb=!1;Eb=Hb=0;zb=1;jb=0;$b=5126;Vb=Va=rb=Pb=0;ia(ma)?(Jb=!0,sc=u.createStream(34962,ma),$b=sc.dtype):(sc=u.getBuffer(ma))?$b=sc.dtype:"constant"in ma?(zb=2,"number"===typeof ma.constant?(rb=ma.constant,Va=Vb=Pb=0):(rb=0<ma.constant.length?ma.constant[0]:0,Va=1<ma.constant.length?ma.constant[1]:0,Vb=2<ma.constant.length?ma.constant[2]:0,Pb=3<ma.constant.length?ma.constant[3]:0)):(sc=ia(ma.buffer)?u.createStream(34962,
ma.buffer):u.getBuffer(ma.buffer),$b="type"in ma?za[ma.type]:sc.dtype,lb=!!ma.normalized,Eb=ma.size|0,Hb=ma.offset|0,jb=ma.stride|0,Ob=ma.divisor|0);Bb=p.buffer;p.buffer=sc;jc=p.divisor;p.divisor=Ob;kb=p.normalized;p.normalized=lb;qb=p.offset;p.offset=Hb;Ja=p.size;p.size=Eb;tb=p.state;p.state=zb;Ma=p.stride;p.stride=jb;fb=p.type;p.type=$b;ib=p.w;p.w=Pb;Pa=p.x;p.x=rb;mb=p.y;p.y=Va;Ya=p.z;p.z=Vb;wb=K.vert;K.vert=42;ub=K.frag;K.frag=41;b.dirty=!0;d(B,n,c);B.viewportWidth=w;B.viewportHeight=z;ua[0]=C;
ua[1]=H;ua[2]=g;ua[3]=y;t[0]=J;t[1]=R;t[2]=F;t[3]=M;I.blend_enable=Z;Q[0]=O;Q[1]=L;Ba[0]=E;Ba[1]=G;Ba[2]=T;Ba[3]=P;I.depth_enable=N;ra[0]=ga;ra[1]=qa;ra[2]=A;ra[3]=oa;I.scissor_enable=W;I.stencil_enable=Wa;da&&(r.cpuTime+=performance.now()-la);Qd&&x.destroyStream(yd);l.elements=Pd;l.offset=Md;l.count=Qe;l.primitive=Ue;D[14]=Ee;D[31]=ie;D[10]=Dd;D[34]=bd;D[6]=Oc;D[7]=Hc;D[8]=Sc;D[9]=Wb;D[3]=vc;Ab&&u.destroyStream(yc);k.buffer=nc;k.divisor=qc;k.normalized=hb;k.offset=Pc;k.size=Rb;k.state=db;k.stride=
Nb;k.type=bb;k.w=pb;k.x=Xa;k.y=Kc;k.z=Ib;Jb&&u.destroyStream(sc);p.buffer=Bb;p.divisor=jc;p.normalized=kb;p.offset=qb;p.size=Ja;p.state=tb;p.stride=Ma;p.type=fb;p.w=ib;p.x=Pa;p.y=mb;p.z=Ya;K.vert=wb;K.frag=ub;b.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W,da,
V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka){var ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba,va,La,Ha,gb,fa,Gc,bc,Ia,cc,Tb,ze,Hd,Ad,Td,De,Ae,$d,qe,Cd,yd,Qd,Pd,Md;ea=a.attributes;ca=a.buffer;na=a.context;wa=a.current;Ea=a.draw;Oa=a.elements;vb=a.extensions;ha=a.framebuffer;Y=a.gl;xa=a.isBufferArgs;Fa=a.next;pa=a.shader;Ca=a.uniforms;Aa=a.vao;ka=Fa.blend_color;ba=wa.blend_color;va=Fa.blend_equation;La=wa.blend_equation;Ha=Fa.blend_func;gb=wa.blend_func;fa=Fa.colorMask;Gc=wa.colorMask;
bc=Fa.depth_range;Ia=wa.depth_range;cc=Fa.polygonOffset_offset;Tb=wa.polygonOffset_offset;ze=Fa.sample_coverage;Hd=wa.sample_coverage;Ad=Fa.scissor_box;Td=wa.scissor_box;De=Fa.stencil_func;Ae=wa.stencil_func;$d=Fa.stencil_opBack;qe=wa.stencil_opBack;Cd=Fa.stencil_opFront;yd=wa.stencil_opFront;Qd=Fa.viewport;Pd=wa.viewport;Md={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,l){var n,d,c,a,t,e;n=ha.next;n!==ha.cur&&(n?Y.bindFramebuffer(36160,
n.framebuffer):Y.bindFramebuffer(36160,null),ha.cur=n);if(wa.dirty){var q,h,f,x,v,p,m,k,w,z,C,H,g,y,J,R,I,F,B,D,L,E,G,K,u,ia,pa,ta,ka,Ca,Ha,db,Nb,bb;q=Fa.dither;q!==wa.dither&&(q?Y.enable(3024):Y.disable(3024),wa.dither=q);h=va[0];f=va[1];if(h!==La[0]||f!==La[1])Y.blendEquationSeparate(h,f),La[0]=h,La[1]=f;x=Fa.depth_func;x!==wa.depth_func&&(Y.depthFunc(x),wa.depth_func=x);v=bc[0];p=bc[1];if(v!==Ia[0]||p!==Ia[1])Y.depthRange(v,p),Ia[0]=v,Ia[1]=p;m=Fa.depth_mask;m!==wa.depth_mask&&(Y.depthMask(m),
wa.depth_mask=m);k=fa[0];w=fa[1];z=fa[2];C=fa[3];if(k!==Gc[0]||w!==Gc[1]||z!==Gc[2]||C!==Gc[3])Y.colorMask(k,w,z,C),Gc[0]=k,Gc[1]=w,Gc[2]=z,Gc[3]=C;H=Fa.cull_enable;H!==wa.cull_enable&&(H?Y.enable(2884):Y.disable(2884),wa.cull_enable=H);g=Fa.cull_face;g!==wa.cull_face&&(Y.cullFace(g),wa.cull_face=g);y=Fa.frontFace;y!==wa.frontFace&&(Y.frontFace(y),wa.frontFace=y);J=Fa.lineWidth;J!==wa.lineWidth&&(Y.lineWidth(J),wa.lineWidth=J);R=Fa.polygonOffset_enable;R!==wa.polygonOffset_enable&&(R?Y.enable(32823):
Y.disable(32823),wa.polygonOffset_enable=R);I=cc[0];F=cc[1];if(I!==Tb[0]||F!==Tb[1])Y.polygonOffset(I,F),Tb[0]=I,Tb[1]=F;B=Fa.sample_alpha;B!==wa.sample_alpha&&(B?Y.enable(32926):Y.disable(32926),wa.sample_alpha=B);D=Fa.sample_enable;D!==wa.sample_enable&&(D?Y.enable(32928):Y.disable(32928),wa.sample_enable=D);L=ze[0];E=ze[1];if(L!==Hd[0]||E!==Hd[1])Y.sampleCoverage(L,E),Hd[0]=L,Hd[1]=E;G=Fa.stencil_mask;G!==wa.stencil_mask&&(Y.stencilMask(G),wa.stencil_mask=G);K=De[0];u=De[1];ia=De[2];if(K!==Ae[0]||
u!==Ae[1]||ia!==Ae[2])Y.stencilFunc(K,u,ia),Ae[0]=K,Ae[1]=u,Ae[2]=ia;pa=Cd[0];ta=Cd[1];ka=Cd[2];Ca=Cd[3];if(pa!==yd[0]||ta!==yd[1]||ka!==yd[2]||Ca!==yd[3])Y.stencilOpSeparate(pa,ta,ka,Ca),yd[0]=pa,yd[1]=ta,yd[2]=ka,yd[3]=Ca;Ha=$d[0];db=$d[1];Nb=$d[2];bb=$d[3];if(Ha!==qe[0]||db!==qe[1]||Nb!==qe[2]||bb!==qe[3])Y.stencilOpSeparate(Ha,db,Nb,bb),qe[0]=Ha,qe[1]=db,qe[2]=Nb,qe[3]=bb}Y.blendColor(0,0,0,1);ba[0]=0;ba[1]=0;ba[2]=0;ba[3]=1;Y.enable(3042);wa.blend_enable=!0;Y.blendFuncSeparate(770,771,773,1);
gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;Y.disable(2929);wa.depth_enable=!1;Y.enable(3089);wa.scissor_enable=!0;Y.disable(2960);wa.stencil_enable=!1;if(d=wa.profile)c=performance.now(),r.count+=l;Y.useProgram(Z.program);a=vb.angle_instanced_arrays;var pb;Aa.setVAO(null);Y.uniform1i(N.location,!1);Y.uniform1i(ya.location,S.bind());pb=Ea.instances;for(t=0;t<l;++t){e=b[t];var Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,
Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Qd,Ad,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Xa=e.viewport;Kc=Xa.x|0;Ib=
Xa.y|0;Jb="width"in Xa?Xa.width|0:na.framebufferWidth-Kc;sc="height"in Xa?Xa.height|0:na.framebufferHeight-Ib;Ob=na.viewportWidth;na.viewportWidth=Jb;lb=na.viewportHeight;na.viewportHeight=sc;Y.viewport(Kc,Ib,Jb,sc);Pd[0]=Kc;Pd[1]=Ib;Pd[2]=Jb;Pd[3]=sc;Hb=e.viewport;Eb=Hb.x|0;zb=Hb.y|0;jb="width"in Hb?Hb.width|0:na.framebufferWidth-Eb;$b="height"in Hb?Hb.height|0:na.framebufferHeight-zb;Y.scissor(Eb,zb,jb,$b);Td[0]=Eb;Td[1]=zb;Td[2]=jb;Td[3]=$b;Pb=Q.call(this,na,e,t);rb=!1;Va=null;Vb=0;Bb=!1;kb=jc=
0;qb=1;Ja=0;tb=5126;Pa=ib=fb=Ma=0;xa(Pb)?(rb=!0,Va=ca.createStream(34962,Pb),tb=Va.dtype):(Va=ca.getBuffer(Pb))?tb=Va.dtype:"constant"in Pb?(qb=2,"number"===typeof Pb.constant?(fb=Pb.constant,ib=Pa=Ma=0):(fb=0<Pb.constant.length?Pb.constant[0]:0,ib=1<Pb.constant.length?Pb.constant[1]:0,Pa=2<Pb.constant.length?Pb.constant[2]:0,Ma=3<Pb.constant.length?Pb.constant[3]:0)):(Va=xa(Pb.buffer)?ca.createStream(34962,Pb.buffer):ca.getBuffer(Pb.buffer),tb="type"in Pb?Md[Pb.type]:Va.dtype,Bb=!!Pb.normalized,
kb=Pb.size|0,jc=Pb.offset|0,Ja=Pb.stride|0,Vb=Pb.divisor|0);mb=Ga.location;Ya=ea[mb];if(1===qb){Ya.buffer||Y.enableVertexAttribArray(mb);wb=kb||1;if(Ya.type!==tb||Ya.size!==wb||Ya.buffer!==Va||Ya.normalized!==Bb||Ya.offset!==jc||Ya.stride!==Ja)Y.bindBuffer(34962,Va.buffer),Y.vertexAttribPointer(mb,wb,tb,Bb,Ja,jc),Ya.type=tb,Ya.size=wb,Ya.buffer=Va,Ya.normalized=Bb,Ya.offset=jc,Ya.stride=Ja;Ya.divisor!==Vb&&(a.vertexAttribDivisorANGLE(mb,Vb),Ya.divisor=Vb)}else if(Ya.buffer&&(Y.disableVertexAttribArray(mb),
Ya.buffer=null),Ya.x!==fb||Ya.y!==ib||Ya.z!==Pa||Ya.w!==Ma)Y.vertexAttrib4f(mb,fb,ib,Pa,Ma),Ya.x=fb,Ya.y=ib,Ya.z=Pa,Ya.w=Ma;ub=A.call(this,na,e,t);Ra=!1;Dc=null;Ta=0;Kb=!1;Na=Fb=0;zd=1;$a=0;Lb=5126;ac=Qa=nb=Mb=0;xa(ub)?(Ra=!0,Dc=ca.createStream(34962,ub),Lb=Dc.dtype):(Dc=ca.getBuffer(ub))?Lb=Dc.dtype:"constant"in ub?(zd=2,"number"===typeof ub.constant?(nb=ub.constant,Qa=ac=Mb=0):(nb=0<ub.constant.length?ub.constant[0]:0,Qa=1<ub.constant.length?ub.constant[1]:0,ac=2<ub.constant.length?ub.constant[2]:
0,Mb=3<ub.constant.length?ub.constant[3]:0)):(Dc=xa(ub.buffer)?ca.createStream(34962,ub.buffer):ca.getBuffer(ub.buffer),Lb="type"in ub?Md[ub.type]:Dc.dtype,Kb=!!ub.normalized,Na=ub.size|0,Fb=ub.offset|0,$a=ub.stride|0,Ta=ub.divisor|0);Sa=sb.location;xb=ea[Sa];if(1===zd){xb.buffer||Y.enableVertexAttribArray(Sa);yb=Na||1;if(xb.type!==Lb||xb.size!==yb||xb.buffer!==Dc||xb.normalized!==Kb||xb.offset!==Fb||xb.stride!==$a)Y.bindBuffer(34962,Dc.buffer),Y.vertexAttribPointer(Sa,yb,Lb,Kb,$a,Fb),xb.type=Lb,
xb.size=yb,xb.buffer=Dc,xb.normalized=Kb,xb.offset=Fb,xb.stride=$a;xb.divisor!==Ta&&(a.vertexAttribDivisorANGLE(Sa,Ta),xb.divisor=Ta)}else if(xb.buffer&&(Y.disableVertexAttribArray(Sa),xb.buffer=null),xb.x!==nb||xb.y!==Qa||xb.z!==ac||xb.w!==Mb)Y.vertexAttrib4f(Sa,nb,Qa,ac,Mb),xb.x=nb,xb.y=Qa,xb.z=ac,xb.w=Mb;Ua=Ba.call(this,na,e,t);ob=!1;gc=null;Bc=0;wc=!1;kc=cb=0;Mc=1;Za=0;nd=5126;uc=Xb=ab=Cb=0;xa(Ua)?(ob=!0,gc=ca.createStream(34962,Ua),nd=gc.dtype):(gc=ca.getBuffer(Ua))?nd=gc.dtype:"constant"in Ua?
(Mc=2,"number"===typeof Ua.constant?(ab=Ua.constant,Xb=uc=Cb=0):(ab=0<Ua.constant.length?Ua.constant[0]:0,Xb=1<Ua.constant.length?Ua.constant[1]:0,uc=2<Ua.constant.length?Ua.constant[2]:0,Cb=3<Ua.constant.length?Ua.constant[3]:0)):(gc=xa(Ua.buffer)?ca.createStream(34962,Ua.buffer):ca.getBuffer(Ua.buffer),nd="type"in Ua?Md[Ua.type]:gc.dtype,wc=!!Ua.normalized,kc=Ua.size|0,cb=Ua.offset|0,Za=Ua.stride|0,Bc=Ua.divisor|0);Yb=Da.location;Qb=ea[Yb];if(1===Mc){Qb.buffer||Y.enableVertexAttribArray(Yb);Nc=
kc||1;if(Qb.type!==nd||Qb.size!==Nc||Qb.buffer!==gc||Qb.normalized!==wc||Qb.offset!==cb||Qb.stride!==Za)Y.bindBuffer(34962,gc.buffer),Y.vertexAttribPointer(Yb,Nc,nd,wc,Za,cb),Qb.type=nd,Qb.size=Nc,Qb.buffer=gc,Qb.normalized=wc,Qb.offset=cb,Qb.stride=Za;Qb.divisor!==Bc&&(a.vertexAttribDivisorANGLE(Yb,Bc),Qb.divisor=Bc)}else if(Qb.buffer&&(Y.disableVertexAttribArray(Yb),Qb.buffer=null),Qb.x!==ab||Qb.y!==Xb||Qb.z!==uc||Qb.w!==Cb)Y.vertexAttrib4f(Yb,ab,Xb,uc,Cb),Qb.x=ab,Qb.y=Xb,Qb.z=uc,Qb.w=Cb;Sb=W.call(this,
na,e,t);Od=!1;Fc=null;vd=0;Qc=!1;sd=Yc=0;oc=1;xc=0;hc=5126;Zb=Ub=tc=eb=0;xa(Sb)?(Od=!0,Fc=ca.createStream(34962,Sb),hc=Fc.dtype):(Fc=ca.getBuffer(Sb))?hc=Fc.dtype:"constant"in Sb?(oc=2,"number"===typeof Sb.constant?(tc=Sb.constant,Ub=Zb=eb=0):(tc=0<Sb.constant.length?Sb.constant[0]:0,Ub=1<Sb.constant.length?Sb.constant[1]:0,Zb=2<Sb.constant.length?Sb.constant[2]:0,eb=3<Sb.constant.length?Sb.constant[3]:0)):(Fc=xa(Sb.buffer)?ca.createStream(34962,Sb.buffer):ca.getBuffer(Sb.buffer),hc="type"in Sb?Md[Sb.type]:
Fc.dtype,Qc=!!Sb.normalized,sd=Sb.size|0,Yc=Sb.offset|0,xc=Sb.stride|0,vd=Sb.divisor|0);ec=Ka.location;ic=ea[ec];if(1===oc){ic.buffer||Y.enableVertexAttribArray(ec);zc=sd||1;if(ic.type!==hc||ic.size!==zc||ic.buffer!==Fc||ic.normalized!==Qc||ic.offset!==Yc||ic.stride!==xc)Y.bindBuffer(34962,Fc.buffer),Y.vertexAttribPointer(ec,zc,hc,Qc,xc,Yc),ic.type=hc,ic.size=zc,ic.buffer=Fc,ic.normalized=Qc,ic.offset=Yc,ic.stride=xc;ic.divisor!==vd&&(a.vertexAttribDivisorANGLE(ec,vd),ic.divisor=vd)}else if(ic.buffer&&
(Y.disableVertexAttribArray(ec),ic.buffer=null),ic.x!==tc||ic.y!==Ub||ic.z!==Zb||ic.w!==eb)Y.vertexAttrib4f(ec,tc,Ub,Zb,eb),ic.x=tc,ic.y=Ub,ic.z=Zb,ic.w=eb;Cc=da.call(this,na,e,t);dd=!1;Tc=null;Uc=0;Vc=!1;od=Zc=0;ed=1;$c=0;lc=5126;fd=Xc=ad=dc=0;xa(Cc)?(dd=!0,Tc=ca.createStream(34962,Cc),lc=Tc.dtype):(Tc=ca.getBuffer(Cc))?lc=Tc.dtype:"constant"in Cc?(ed=2,"number"===typeof Cc.constant?(ad=Cc.constant,Xc=fd=dc=0):(ad=0<Cc.constant.length?Cc.constant[0]:0,Xc=1<Cc.constant.length?Cc.constant[1]:0,fd=
2<Cc.constant.length?Cc.constant[2]:0,dc=3<Cc.constant.length?Cc.constant[3]:0)):(Tc=xa(Cc.buffer)?ca.createStream(34962,Cc.buffer):ca.getBuffer(Cc.buffer),lc="type"in Cc?Md[Cc.type]:Tc.dtype,Vc=!!Cc.normalized,od=Cc.size|0,Zc=Cc.offset|0,$c=Cc.stride|0,Uc=Cc.divisor|0);Ac=ja.location;jd=ea[Ac];if(1===ed){jd.buffer||Y.enableVertexAttribArray(Ac);Qd=od||1;if(jd.type!==lc||jd.size!==Qd||jd.buffer!==Tc||jd.normalized!==Vc||jd.offset!==Zc||jd.stride!==$c)Y.bindBuffer(34962,Tc.buffer),Y.vertexAttribPointer(Ac,
Qd,lc,Vc,$c,Zc),jd.type=lc,jd.size=Qd,jd.buffer=Tc,jd.normalized=Vc,jd.offset=Zc,jd.stride=$c;jd.divisor!==Uc&&(a.vertexAttribDivisorANGLE(Ac,Uc),jd.divisor=Uc)}else if(jd.buffer&&(Y.disableVertexAttribArray(Ac),jd.buffer=null),jd.x!==ad||jd.y!==Xc||jd.z!==fd||jd.w!==dc)Y.vertexAttrib4f(Ac,ad,Xc,fd,dc),jd.x=ad,jd.y=Xc,jd.z=fd,jd.w=dc;Ad=V.call(this,na,e,t);ne=!1;kd=null;Fe=0;Ed=!1;ae=ge=0;Ud=1;Ld=0;Jd=5126;ud=wd=Wc=qd=0;xa(Ad)?(ne=!0,kd=ca.createStream(34962,Ad),Jd=kd.dtype):(kd=ca.getBuffer(Ad))?
Jd=kd.dtype:"constant"in Ad?(Ud=2,"number"===typeof Ad.constant?(Wc=Ad.constant,wd=ud=qd=0):(Wc=0<Ad.constant.length?Ad.constant[0]:0,wd=1<Ad.constant.length?Ad.constant[1]:0,ud=2<Ad.constant.length?Ad.constant[2]:0,qd=3<Ad.constant.length?Ad.constant[3]:0)):(kd=xa(Ad.buffer)?ca.createStream(34962,Ad.buffer):ca.getBuffer(Ad.buffer),Jd="type"in Ad?Md[Ad.type]:kd.dtype,Ed=!!Ad.normalized,ae=Ad.size|0,ge=Ad.offset|0,Ld=Ad.stride|0,Fe=Ad.divisor|0);ld=ra.location;xd=ea[ld];if(1===Ud){xd.buffer||Y.enableVertexAttribArray(ld);
Fd=ae||1;if(xd.type!==Jd||xd.size!==Fd||xd.buffer!==kd||xd.normalized!==Ed||xd.offset!==ge||xd.stride!==Ld)Y.bindBuffer(34962,kd.buffer),Y.vertexAttribPointer(ld,Fd,Jd,Ed,Ld,ge),xd.type=Jd,xd.size=Fd,xd.buffer=kd,xd.normalized=Ed,xd.offset=ge,xd.stride=Ld;xd.divisor!==Fe&&(a.vertexAttribDivisorANGLE(ld,Fe),xd.divisor=Fe)}else if(xd.buffer&&(Y.disableVertexAttribArray(ld),xd.buffer=null),xd.x!==Wc||xd.y!==wd||xd.z!==ud||xd.w!==qd)Y.vertexAttrib4f(ld,Wc,wd,ud,qd),xd.x=Wc,xd.y=wd,xd.z=ud,xd.w=qd;Gd=
T.call(this,na,e,t);je=!1;le=null;ue=0;me=!1;he=ke=0;ve=1;ee=0;oe=5126;re=we=id=Rc=0;xa(Gd)?(je=!0,le=ca.createStream(34962,Gd),oe=le.dtype):(le=ca.getBuffer(Gd))?oe=le.dtype:"constant"in Gd?(ve=2,"number"===typeof Gd.constant?(id=Gd.constant,we=re=Rc=0):(id=0<Gd.constant.length?Gd.constant[0]:0,we=1<Gd.constant.length?Gd.constant[1]:0,re=2<Gd.constant.length?Gd.constant[2]:0,Rc=3<Gd.constant.length?Gd.constant[3]:0)):(le=xa(Gd.buffer)?ca.createStream(34962,Gd.buffer):ca.getBuffer(Gd.buffer),oe="type"in
Gd?Md[Gd.type]:le.dtype,me=!!Gd.normalized,he=Gd.size|0,ke=Gd.offset|0,ee=Gd.stride|0,ue=Gd.divisor|0);Rd=O.location;Vd=ea[Rd];if(1===ve){Vd.buffer||Y.enableVertexAttribArray(Rd);Wd=he||4;if(Vd.type!==oe||Vd.size!==Wd||Vd.buffer!==le||Vd.normalized!==me||Vd.offset!==ke||Vd.stride!==ee)Y.bindBuffer(34962,le.buffer),Y.vertexAttribPointer(Rd,Wd,oe,me,ee,ke),Vd.type=oe,Vd.size=Wd,Vd.buffer=le,Vd.normalized=me,Vd.offset=ke,Vd.stride=ee;Vd.divisor!==ue&&(a.vertexAttribDivisorANGLE(Rd,ue),Vd.divisor=ue)}else if(Vd.buffer&&
(Y.disableVertexAttribArray(Rd),Vd.buffer=null),Vd.x!==id||Vd.y!==we||Vd.z!==re||Vd.w!==Rc)Y.vertexAttrib4f(Rd,id,we,re,Rc),Vd.x=id,Vd.y=we,Vd.z=re,Vd.w=Rc;Xd=P.call(this,na,e,t);pe=!1;Ce=null;Ge=0;se=!1;We=Ve=0;Re=1;xe=0;Je=5126;Ke=Ne=Me=Le=0;xa(Xd)?(pe=!0,Ce=ca.createStream(34962,Xd),Je=Ce.dtype):(Ce=ca.getBuffer(Xd))?Je=Ce.dtype:"constant"in Xd?(Re=2,"number"===typeof Xd.constant?(Me=Xd.constant,Ne=Ke=Le=0):(Me=0<Xd.constant.length?Xd.constant[0]:0,Ne=1<Xd.constant.length?Xd.constant[1]:0,Ke=2<
Xd.constant.length?Xd.constant[2]:0,Le=3<Xd.constant.length?Xd.constant[3]:0)):(Ce=xa(Xd.buffer)?ca.createStream(34962,Xd.buffer):ca.getBuffer(Xd.buffer),Je="type"in Xd?Md[Xd.type]:Ce.dtype,se=!!Xd.normalized,We=Xd.size|0,Ve=Xd.offset|0,xe=Xd.stride|0,Ge=Xd.divisor|0);Sd=qa.location;be=ea[Sd];if(1===Re){be.buffer||Y.enableVertexAttribArray(Sd);de=We||4;if(be.type!==Je||be.size!==de||be.buffer!==Ce||be.normalized!==se||be.offset!==Ve||be.stride!==xe)Y.bindBuffer(34962,Ce.buffer),Y.vertexAttribPointer(Sd,
de,Je,se,xe,Ve),be.type=Je,be.size=de,be.buffer=Ce,be.normalized=se,be.offset=Ve,be.stride=xe;be.divisor!==Ge&&(a.vertexAttribDivisorANGLE(Sd,Ge),be.divisor=Ge)}else if(be.buffer&&(Y.disableVertexAttribArray(Sd),be.buffer=null),be.x!==Me||be.y!==Ne||be.z!==Ke||be.w!==Le)Y.vertexAttrib4f(Sd,Me,Ne,Ke,Le),be.x=Me,be.y=Ne,be.z=Ke,be.w=Le;fe=M.call(this,na,e,t);Oe=!1;Kd=null;Yd=0;He=!1;df=Pe=0;cf=1;Xe=0;Se=5126;Ze=Ye=af=bf=0;xa(fe)?(Oe=!0,Kd=ca.createStream(34962,fe),Se=Kd.dtype):(Kd=ca.getBuffer(fe))?
Se=Kd.dtype:"constant"in fe?(cf=2,"number"===typeof fe.constant?(af=fe.constant,Ye=Ze=bf=0):(af=0<fe.constant.length?fe.constant[0]:0,Ye=1<fe.constant.length?fe.constant[1]:0,Ze=2<fe.constant.length?fe.constant[2]:0,bf=3<fe.constant.length?fe.constant[3]:0)):(Kd=xa(fe.buffer)?ca.createStream(34962,fe.buffer):ca.getBuffer(fe.buffer),Se="type"in fe?Md[fe.type]:Kd.dtype,He=!!fe.normalized,df=fe.size|0,Pe=fe.offset|0,Xe=fe.stride|0,Yd=fe.divisor|0);Zd=ga.location;ce=ea[Zd];if(1===cf){ce.buffer||Y.enableVertexAttribArray(Zd);
$e=df||1;if(ce.type!==Se||ce.size!==$e||ce.buffer!==Kd||ce.normalized!==He||ce.offset!==Pe||ce.stride!==Xe)Y.bindBuffer(34962,Kd.buffer),Y.vertexAttribPointer(Zd,$e,Se,He,Xe,Pe),ce.type=Se,ce.size=$e,ce.buffer=Kd,ce.normalized=He,ce.offset=Pe,ce.stride=Xe;ce.divisor!==Yd&&(a.vertexAttribDivisorANGLE(Zd,Yd),ce.divisor=Yd)}else if(ce.buffer&&(Y.disableVertexAttribArray(Zd),ce.buffer=null),ce.x!==af||ce.y!==Ye||ce.z!==Ze||ce.w!==bf)Y.vertexAttrib4f(Zd,af,Ye,Ze,bf),ce.x=af,ce.y=Ye,ce.z=Ze,ce.w=bf;kf=
na.pixelRatio;t&&of===kf||(of=kf,Y.uniform1f(ua.location,kf));gf=e.scale;lf=gf[0];nf=gf[1];t&&mf===lf&&sf===nf||(mf=lf,sf=nf,Y.uniform2f(aa.location,lf,nf));pf=e.scaleFract;tf=pf[0];Df=pf[1];t&&Cf===tf&&Te===Df||(Cf=tf,Te=Df,Y.uniform2f(za.location,tf,Df));Ie=e.translate;qf=Ie[0];Ef=Ie[1];t&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,Y.uniform2f(ma.location,qf,Ef));Bf=e.translateFract;Ff=Bf[0];xf=Bf[1];t&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,Y.uniform2f(sa.location,Ff,xf));wf=U.call(this,na,e,t);zf=wf[0];Jf=wf[1];
t&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,Y.uniform2f(oa.location,zf,Jf));Lf=e.opacity;t&&Mf===Lf||(Mf=Lf,Y.uniform1f(la.location,Lf));(uf=e.markerTexture)&&"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;Y.uniform1i(X.location,Rf.bind());If=e.elements;vf=null;(vf=(dg=xa(If))?Oa.createStream(If):Oa.getElements(If))&&Y.bindBuffer(34963,vf.buffer.buffer);Sf=e.offset;if(Tf=e.count)0<pb?vf?a.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),pb):a.drawArraysInstancedANGLE(0,Sf,Tf,pb):
0>pb&&(vf?Y.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):Y.drawArrays(0,Sf,Tf)),na.viewportWidth=Ob,na.viewportHeight=lb,rb&&ca.destroyStream(Va),Ra&&ca.destroyStream(Dc),ob&&ca.destroyStream(gc),Od&&ca.destroyStream(Fc),dd&&ca.destroyStream(Tc),ne&&ca.destroyStream(kd),je&&ca.destroyStream(le),pe&&ca.destroyStream(Ce),Oe&&ca.destroyStream(Kd),Rf.unbind(),dg&&Oa.destroyStream(vf)}S.unbind();wa.dirty=!0;Aa.setVAO(null);d&&(r.cpuTime+=performance.now()-c)},draw:function(b){var l,n,a,t,h,x,w,C,H,
R,I,F,B,D,Q,M,Z,L,E,G,K,u,T,P,V,ia,pa,U,ta,S,ka,A,Ca,W,Wa,da,Ba,Ha,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,Ad,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Qd,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe;l=
ha.next;l!==ha.cur&&(l?Y.bindFramebuffer(36160,l.framebuffer):Y.bindFramebuffer(36160,null),ha.cur=l);if(wa.dirty){var Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf;Je=Fa.dither;Je!==wa.dither&&(Je?Y.enable(3024):Y.disable(3024),wa.dither=Je);Le=va[0];Me=va[1];if(Le!==La[0]||Me!==La[1])Y.blendEquationSeparate(Le,Me),La[0]=Le,La[1]=Me;Ne=Fa.depth_func;Ne!==wa.depth_func&&(Y.depthFunc(Ne),wa.depth_func=Ne);Ke=bc[0];Sd=bc[1];if(Ke!==Ia[0]||Sd!==
Ia[1])Y.depthRange(Ke,Sd),Ia[0]=Ke,Ia[1]=Sd;be=Fa.depth_mask;be!==wa.depth_mask&&(Y.depthMask(be),wa.depth_mask=be);de=fa[0];fe=fa[1];Oe=fa[2];Kd=fa[3];if(de!==Gc[0]||fe!==Gc[1]||Oe!==Gc[2]||Kd!==Gc[3])Y.colorMask(de,fe,Oe,Kd),Gc[0]=de,Gc[1]=fe,Gc[2]=Oe,Gc[3]=Kd;Yd=Fa.cull_enable;Yd!==wa.cull_enable&&(Yd?Y.enable(2884):Y.disable(2884),wa.cull_enable=Yd);He=Fa.cull_face;He!==wa.cull_face&&(Y.cullFace(He),wa.cull_face=He);Pe=Fa.frontFace;Pe!==wa.frontFace&&(Y.frontFace(Pe),wa.frontFace=Pe);df=Fa.lineWidth;
df!==wa.lineWidth&&(Y.lineWidth(df),wa.lineWidth=df);cf=Fa.polygonOffset_enable;cf!==wa.polygonOffset_enable&&(cf?Y.enable(32823):Y.disable(32823),wa.polygonOffset_enable=cf);Xe=cc[0];Se=cc[1];if(Xe!==Tb[0]||Se!==Tb[1])Y.polygonOffset(Xe,Se),Tb[0]=Xe,Tb[1]=Se;bf=Fa.sample_alpha;bf!==wa.sample_alpha&&(bf?Y.enable(32926):Y.disable(32926),wa.sample_alpha=bf);af=Fa.sample_enable;af!==wa.sample_enable&&(af?Y.enable(32928):Y.disable(32928),wa.sample_enable=af);Ye=ze[0];Ze=ze[1];if(Ye!==Hd[0]||Ze!==Hd[1])Y.sampleCoverage(Ye,
Ze),Hd[0]=Ye,Hd[1]=Ze;Zd=Fa.stencil_mask;Zd!==wa.stencil_mask&&(Y.stencilMask(Zd),wa.stencil_mask=Zd);ce=De[0];$e=De[1];kf=De[2];if(ce!==Ae[0]||$e!==Ae[1]||kf!==Ae[2])Y.stencilFunc(ce,$e,kf),Ae[0]=ce,Ae[1]=$e,Ae[2]=kf;of=Cd[0];gf=Cd[1];lf=Cd[2];mf=Cd[3];if(of!==yd[0]||gf!==yd[1]||lf!==yd[2]||mf!==yd[3])Y.stencilOpSeparate(of,gf,lf,mf),yd[0]=of,yd[1]=gf,yd[2]=lf,yd[3]=mf;nf=$d[0];sf=$d[1];pf=$d[2];tf=$d[3];if(nf!==qe[0]||sf!==qe[1]||pf!==qe[2]||tf!==qe[3])Y.stencilOpSeparate(nf,sf,pf,tf),qe[0]=nf,
qe[1]=sf,qe[2]=pf,qe[3]=tf}n=b.viewport;a=n.x|0;t=n.y|0;h="width"in n?n.width|0:na.framebufferWidth-a;x="height"in n?n.height|0:na.framebufferHeight-t;w=na.viewportWidth;na.viewportWidth=h;C=na.viewportHeight;na.viewportHeight=x;Y.viewport(a,t,h,x);Pd[0]=a;Pd[1]=t;Pd[2]=h;Pd[3]=x;Y.blendColor(0,0,0,1);ba[0]=0;ba[1]=0;ba[2]=0;ba[3]=1;Y.enable(3042);wa.blend_enable=!0;Y.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;Y.disable(2929);wa.depth_enable=!1;H=b.viewport;R=H.x|0;I=H.y|
0;F="width"in H?H.width|0:na.framebufferWidth-R;B="height"in H?H.height|0:na.framebufferHeight-I;Y.scissor(R,I,F,B);Td[0]=R;Td[1]=I;Td[2]=F;Td[3]=B;Y.enable(3089);wa.scissor_enable=!0;Y.disable(2960);wa.stencil_enable=!1;if(D=wa.profile)Q=performance.now(),r.count++;Y.useProgram(q.program);M=vb.angle_instanced_arrays;Aa.setVAO(null);Z=v.call(this,na,b,0);L=!1;E=null;G=0;K=!1;T=u=0;P=1;V=0;ia=5126;S=ta=U=pa=0;xa(Z)?(L=!0,E=ca.createStream(34962,Z),ia=E.dtype):(E=ca.getBuffer(Z))?ia=E.dtype:"constant"in
Z?(P=2,"number"===typeof Z.constant?(U=Z.constant,ta=S=pa=0):(U=0<Z.constant.length?Z.constant[0]:0,ta=1<Z.constant.length?Z.constant[1]:0,S=2<Z.constant.length?Z.constant[2]:0,pa=3<Z.constant.length?Z.constant[3]:0)):(E=xa(Z.buffer)?ca.createStream(34962,Z.buffer):ca.getBuffer(Z.buffer),ia="type"in Z?Md[Z.type]:E.dtype,K=!!Z.normalized,T=Z.size|0,u=Z.offset|0,V=Z.stride|0,G=Z.divisor|0);ka=Ga.location;A=ea[ka];if(1===P){A.buffer||Y.enableVertexAttribArray(ka);Ca=T||1;if(A.type!==ia||A.size!==Ca||
A.buffer!==E||A.normalized!==K||A.offset!==u||A.stride!==V)Y.bindBuffer(34962,E.buffer),Y.vertexAttribPointer(ka,Ca,ia,K,V,u),A.type=ia,A.size=Ca,A.buffer=E,A.normalized=K,A.offset=u,A.stride=V;A.divisor!==G&&(M.vertexAttribDivisorANGLE(ka,G),A.divisor=G)}else if(A.buffer&&(Y.disableVertexAttribArray(ka),A.buffer=null),A.x!==U||A.y!==ta||A.z!==S||A.w!==pa)Y.vertexAttrib4f(ka,U,ta,S,pa),A.x=U,A.y=ta,A.z=S,A.w=pa;W=f.call(this,na,b,0);Wa=!1;da=null;Ba=0;Ha=!1;Nb=db=0;bb=1;pb=0;Xa=5126;sc=Jb=Ib=Kc=0;
xa(W)?(Wa=!0,da=ca.createStream(34962,W),Xa=da.dtype):(da=ca.getBuffer(W))?Xa=da.dtype:"constant"in W?(bb=2,"number"===typeof W.constant?(Ib=W.constant,Jb=sc=Kc=0):(Ib=0<W.constant.length?W.constant[0]:0,Jb=1<W.constant.length?W.constant[1]:0,sc=2<W.constant.length?W.constant[2]:0,Kc=3<W.constant.length?W.constant[3]:0)):(da=xa(W.buffer)?ca.createStream(34962,W.buffer):ca.getBuffer(W.buffer),Xa="type"in W?Md[W.type]:da.dtype,Ha=!!W.normalized,Nb=W.size|0,db=W.offset|0,pb=W.stride|0,Ba=W.divisor|0);
Ob=sb.location;lb=ea[Ob];if(1===bb){lb.buffer||Y.enableVertexAttribArray(Ob);Hb=Nb||1;if(lb.type!==Xa||lb.size!==Hb||lb.buffer!==da||lb.normalized!==Ha||lb.offset!==db||lb.stride!==pb)Y.bindBuffer(34962,da.buffer),Y.vertexAttribPointer(Ob,Hb,Xa,Ha,pb,db),lb.type=Xa,lb.size=Hb,lb.buffer=da,lb.normalized=Ha,lb.offset=db,lb.stride=pb;lb.divisor!==Ba&&(M.vertexAttribDivisorANGLE(Ob,Ba),lb.divisor=Ba)}else if(lb.buffer&&(Y.disableVertexAttribArray(Ob),lb.buffer=null),lb.x!==Ib||lb.y!==Jb||lb.z!==sc||lb.w!==
Kc)Y.vertexAttrib4f(Ob,Ib,Jb,sc,Kc),lb.x=Ib,lb.y=Jb,lb.z=sc,lb.w=Kc;Eb=e.call(this,na,b,0);zb=!1;jb=null;$b=0;Pb=!1;Va=rb=0;Vb=1;Bb=0;jc=5126;tb=Ja=qb=kb=0;xa(Eb)?(zb=!0,jb=ca.createStream(34962,Eb),jc=jb.dtype):(jb=ca.getBuffer(Eb))?jc=jb.dtype:"constant"in Eb?(Vb=2,"number"===typeof Eb.constant?(qb=Eb.constant,Ja=tb=kb=0):(qb=0<Eb.constant.length?Eb.constant[0]:0,Ja=1<Eb.constant.length?Eb.constant[1]:0,tb=2<Eb.constant.length?Eb.constant[2]:0,kb=3<Eb.constant.length?Eb.constant[3]:0)):(jb=xa(Eb.buffer)?
ca.createStream(34962,Eb.buffer):ca.getBuffer(Eb.buffer),jc="type"in Eb?Md[Eb.type]:jb.dtype,Pb=!!Eb.normalized,Va=Eb.size|0,rb=Eb.offset|0,Bb=Eb.stride|0,$b=Eb.divisor|0);Ma=Da.location;fb=ea[Ma];if(1===Vb){fb.buffer||Y.enableVertexAttribArray(Ma);ib=Va||1;if(fb.type!==jc||fb.size!==ib||fb.buffer!==jb||fb.normalized!==Pb||fb.offset!==rb||fb.stride!==Bb)Y.bindBuffer(34962,jb.buffer),Y.vertexAttribPointer(Ma,ib,jc,Pb,Bb,rb),fb.type=jc,fb.size=ib,fb.buffer=jb,fb.normalized=Pb,fb.offset=rb,fb.stride=
Bb;fb.divisor!==$b&&(M.vertexAttribDivisorANGLE(Ma,$b),fb.divisor=$b)}else if(fb.buffer&&(Y.disableVertexAttribArray(Ma),fb.buffer=null),fb.x!==qb||fb.y!==Ja||fb.z!==tb||fb.w!==kb)Y.vertexAttrib4f(Ma,qb,Ja,tb,kb),fb.x=qb,fb.y=Ja,fb.z=tb,fb.w=kb;Pa=k.call(this,na,b,0);mb=!1;Ya=null;wb=0;ub=!1;Dc=Ra=0;Ta=1;Kb=0;Fb=5126;Lb=$a=Ad=Na=0;xa(Pa)?(mb=!0,Ya=ca.createStream(34962,Pa),Fb=Ya.dtype):(Ya=ca.getBuffer(Pa))?Fb=Ya.dtype:"constant"in Pa?(Ta=2,"number"===typeof Pa.constant?(Ad=Pa.constant,$a=Lb=Na=0):
(Ad=0<Pa.constant.length?Pa.constant[0]:0,$a=1<Pa.constant.length?Pa.constant[1]:0,Lb=2<Pa.constant.length?Pa.constant[2]:0,Na=3<Pa.constant.length?Pa.constant[3]:0)):(Ya=xa(Pa.buffer)?ca.createStream(34962,Pa.buffer):ca.getBuffer(Pa.buffer),Fb="type"in Pa?Md[Pa.type]:Ya.dtype,ub=!!Pa.normalized,Dc=Pa.size|0,Ra=Pa.offset|0,Kb=Pa.stride|0,wb=Pa.divisor|0);Mb=Ka.location;nb=ea[Mb];if(1===Ta){nb.buffer||Y.enableVertexAttribArray(Mb);Qa=Dc||1;if(nb.type!==Fb||nb.size!==Qa||nb.buffer!==Ya||nb.normalized!==
ub||nb.offset!==Ra||nb.stride!==Kb)Y.bindBuffer(34962,Ya.buffer),Y.vertexAttribPointer(Mb,Qa,Fb,ub,Kb,Ra),nb.type=Fb,nb.size=Qa,nb.buffer=Ya,nb.normalized=ub,nb.offset=Ra,nb.stride=Kb;nb.divisor!==wb&&(M.vertexAttribDivisorANGLE(Mb,wb),nb.divisor=wb)}else if(nb.buffer&&(Y.disableVertexAttribArray(Mb),nb.buffer=null),nb.x!==Ad||nb.y!==$a||nb.z!==Lb||nb.w!==Na)Y.vertexAttrib4f(Mb,Ad,$a,Lb,Na),nb.x=Ad,nb.y=$a,nb.z=Lb,nb.w=Na;ac=p.call(this,na,b,0);Sa=!1;xb=null;yb=0;Ua=!1;gc=ob=0;Bc=1;wc=0;cb=5126;nd=
Za=Mc=kc=0;xa(ac)?(Sa=!0,xb=ca.createStream(34962,ac),cb=xb.dtype):(xb=ca.getBuffer(ac))?cb=xb.dtype:"constant"in ac?(Bc=2,"number"===typeof ac.constant?(Mc=ac.constant,Za=nd=kc=0):(Mc=0<ac.constant.length?ac.constant[0]:0,Za=1<ac.constant.length?ac.constant[1]:0,nd=2<ac.constant.length?ac.constant[2]:0,kc=3<ac.constant.length?ac.constant[3]:0)):(xb=xa(ac.buffer)?ca.createStream(34962,ac.buffer):ca.getBuffer(ac.buffer),cb="type"in ac?Md[ac.type]:xb.dtype,Ua=!!ac.normalized,gc=ac.size|0,ob=ac.offset|
0,wc=ac.stride|0,yb=ac.divisor|0);Cb=ja.location;ab=ea[Cb];if(1===Bc){ab.buffer||Y.enableVertexAttribArray(Cb);Xb=gc||1;if(ab.type!==cb||ab.size!==Xb||ab.buffer!==xb||ab.normalized!==Ua||ab.offset!==ob||ab.stride!==wc)Y.bindBuffer(34962,xb.buffer),Y.vertexAttribPointer(Cb,Xb,cb,Ua,wc,ob),ab.type=cb,ab.size=Xb,ab.buffer=xb,ab.normalized=Ua,ab.offset=ob,ab.stride=wc;ab.divisor!==yb&&(M.vertexAttribDivisorANGLE(Cb,yb),ab.divisor=yb)}else if(ab.buffer&&(Y.disableVertexAttribArray(Cb),ab.buffer=null),
ab.x!==Mc||ab.y!==Za||ab.z!==nd||ab.w!==kc)Y.vertexAttrib4f(Cb,Mc,Za,nd,kc),ab.x=Mc,ab.y=Za,ab.z=nd,ab.w=kc;uc=g.call(this,na,b,0);Yb=!1;Qb=null;Nc=0;Sb=!1;Fc=Qd=0;vd=1;Qc=0;Yc=5126;hc=xc=oc=sd=0;xa(uc)?(Yb=!0,Qb=ca.createStream(34962,uc),Yc=Qb.dtype):(Qb=ca.getBuffer(uc))?Yc=Qb.dtype:"constant"in uc?(vd=2,"number"===typeof uc.constant?(oc=uc.constant,xc=hc=sd=0):(oc=0<uc.constant.length?uc.constant[0]:0,xc=1<uc.constant.length?uc.constant[1]:0,hc=2<uc.constant.length?uc.constant[2]:0,sd=3<uc.constant.length?
uc.constant[3]:0)):(Qb=xa(uc.buffer)?ca.createStream(34962,uc.buffer):ca.getBuffer(uc.buffer),Yc="type"in uc?Md[uc.type]:Qb.dtype,Sb=!!uc.normalized,Fc=uc.size|0,Qd=uc.offset|0,Qc=uc.stride|0,Nc=uc.divisor|0);eb=ra.location;tc=ea[eb];if(1===vd){tc.buffer||Y.enableVertexAttribArray(eb);Ub=Fc||1;if(tc.type!==Yc||tc.size!==Ub||tc.buffer!==Qb||tc.normalized!==Sb||tc.offset!==Qd||tc.stride!==Qc)Y.bindBuffer(34962,Qb.buffer),Y.vertexAttribPointer(eb,Ub,Yc,Sb,Qc,Qd),tc.type=Yc,tc.size=Ub,tc.buffer=Qb,tc.normalized=
Sb,tc.offset=Qd,tc.stride=Qc;tc.divisor!==Nc&&(M.vertexAttribDivisorANGLE(eb,Nc),tc.divisor=Nc)}else if(tc.buffer&&(Y.disableVertexAttribArray(eb),tc.buffer=null),tc.x!==oc||tc.y!==xc||tc.z!==hc||tc.w!==sd)Y.vertexAttrib4f(eb,oc,xc,hc,sd),tc.x=oc,tc.y=xc,tc.z=hc,tc.w=sd;Zb=z.call(this,na,b,0);ec=!1;ic=null;zc=0;Cc=!1;Tc=dd=0;Uc=1;Vc=0;Zc=5126;lc=$c=ed=od=0;xa(Zb)?(ec=!0,ic=ca.createStream(34962,Zb),Zc=ic.dtype):(ic=ca.getBuffer(Zb))?Zc=ic.dtype:"constant"in Zb?(Uc=2,"number"===typeof Zb.constant?
(ed=Zb.constant,$c=lc=od=0):(ed=0<Zb.constant.length?Zb.constant[0]:0,$c=1<Zb.constant.length?Zb.constant[1]:0,lc=2<Zb.constant.length?Zb.constant[2]:0,od=3<Zb.constant.length?Zb.constant[3]:0)):(ic=xa(Zb.buffer)?ca.createStream(34962,Zb.buffer):ca.getBuffer(Zb.buffer),Zc="type"in Zb?Md[Zb.type]:ic.dtype,Cc=!!Zb.normalized,Tc=Zb.size|0,dd=Zb.offset|0,Vc=Zb.stride|0,zc=Zb.divisor|0);dc=O.location;ad=ea[dc];if(1===Uc){ad.buffer||Y.enableVertexAttribArray(dc);Xc=Tc||4;if(ad.type!==Zc||ad.size!==Xc||
ad.buffer!==ic||ad.normalized!==Cc||ad.offset!==dd||ad.stride!==Vc)Y.bindBuffer(34962,ic.buffer),Y.vertexAttribPointer(dc,Xc,Zc,Cc,Vc,dd),ad.type=Zc,ad.size=Xc,ad.buffer=ic,ad.normalized=Cc,ad.offset=dd,ad.stride=Vc;ad.divisor!==zc&&(M.vertexAttribDivisorANGLE(dc,zc),ad.divisor=zc)}else if(ad.buffer&&(Y.disableVertexAttribArray(dc),ad.buffer=null),ad.x!==ed||ad.y!==$c||ad.z!==lc||ad.w!==od)Y.vertexAttrib4f(dc,ed,$c,lc,od),ad.x=ed,ad.y=$c,ad.z=lc,ad.w=od;fd=y.call(this,na,b,0);Ac=!1;jd=null;Bd=0;ye=
!1;kd=ne=0;Fe=1;Ed=0;ge=5126;Jd=Ld=Ud=ae=0;xa(fd)?(Ac=!0,jd=ca.createStream(34962,fd),ge=jd.dtype):(jd=ca.getBuffer(fd))?ge=jd.dtype:"constant"in fd?(Fe=2,"number"===typeof fd.constant?(Ud=fd.constant,Ld=Jd=ae=0):(Ud=0<fd.constant.length?fd.constant[0]:0,Ld=1<fd.constant.length?fd.constant[1]:0,Jd=2<fd.constant.length?fd.constant[2]:0,ae=3<fd.constant.length?fd.constant[3]:0)):(jd=xa(fd.buffer)?ca.createStream(34962,fd.buffer):ca.getBuffer(fd.buffer),ge="type"in fd?Md[fd.type]:jd.dtype,ye=!!fd.normalized,
kd=fd.size|0,ne=fd.offset|0,Ed=fd.stride|0,Bd=fd.divisor|0);qd=qa.location;Wc=ea[qd];if(1===Fe){Wc.buffer||Y.enableVertexAttribArray(qd);wd=kd||4;if(Wc.type!==ge||Wc.size!==wd||Wc.buffer!==jd||Wc.normalized!==ye||Wc.offset!==ne||Wc.stride!==Ed)Y.bindBuffer(34962,jd.buffer),Y.vertexAttribPointer(qd,wd,ge,ye,Ed,ne),Wc.type=ge,Wc.size=wd,Wc.buffer=jd,Wc.normalized=ye,Wc.offset=ne,Wc.stride=Ed;Wc.divisor!==Bd&&(M.vertexAttribDivisorANGLE(qd,Bd),Wc.divisor=Bd)}else if(Wc.buffer&&(Y.disableVertexAttribArray(qd),
Wc.buffer=null),Wc.x!==Ud||Wc.y!==Ld||Wc.z!==Jd||Wc.w!==ae)Y.vertexAttrib4f(qd,Ud,Ld,Jd,ae),Wc.x=Ud,Wc.y=Ld,Wc.z=Jd,Wc.w=ae;ud=m.call(this,na,b,0);ld=!1;xd=null;Fd=0;Gd=!1;le=je=0;ue=1;me=0;ke=5126;oe=ee=ve=he=0;xa(ud)?(ld=!0,xd=ca.createStream(34962,ud),ke=xd.dtype):(xd=ca.getBuffer(ud))?ke=xd.dtype:"constant"in ud?(ue=2,"number"===typeof ud.constant?(ve=ud.constant,ee=oe=he=0):(ve=0<ud.constant.length?ud.constant[0]:0,ee=1<ud.constant.length?ud.constant[1]:0,oe=2<ud.constant.length?ud.constant[2]:
0,he=3<ud.constant.length?ud.constant[3]:0)):(xd=xa(ud.buffer)?ca.createStream(34962,ud.buffer):ca.getBuffer(ud.buffer),ke="type"in ud?Md[ud.type]:xd.dtype,Gd=!!ud.normalized,le=ud.size|0,je=ud.offset|0,me=ud.stride|0,Fd=ud.divisor|0);Rc=ga.location;id=ea[Rc];if(1===ue){id.buffer||Y.enableVertexAttribArray(Rc);we=le||1;if(id.type!==ke||id.size!==we||id.buffer!==xd||id.normalized!==Gd||id.offset!==je||id.stride!==me)Y.bindBuffer(34962,xd.buffer),Y.vertexAttribPointer(Rc,we,ke,Gd,me,je),id.type=ke,
id.size=we,id.buffer=xd,id.normalized=Gd,id.offset=je,id.stride=me;id.divisor!==Fd&&(M.vertexAttribDivisorANGLE(Rc,Fd),id.divisor=Fd)}else if(id.buffer&&(Y.disableVertexAttribArray(Rc),id.buffer=null),id.x!==ve||id.y!==ee||id.z!==oe||id.w!==he)Y.vertexAttrib4f(Rc,ve,ee,oe,he),id.x=ve,id.y=ee,id.z=oe,id.w=he;Y.uniform1i(N.location,!1);Y.uniform1f(ua.location,na.pixelRatio);re=b.scale;Y.uniform2f(aa.location,re[0],re[1]);Rd=b.scaleFract;Y.uniform2f(za.location,Rd[0],Rd[1]);Vd=b.translate;Y.uniform2f(ma.location,
Vd[0],Vd[1]);Wd=b.translateFract;Y.uniform2f(sa.location,Wd[0],Wd[1]);Xd=c.call(this,na,b,0);Y.uniform2f(oa.location,Xd[0],Xd[1]);Y.uniform1f(la.location,b.opacity);Y.uniform1i(ya.location,d.bind());(pe=b.markerTexture)&&"framebuffer"===pe._reglType&&(pe=pe.color[0]);Ce=pe._texture;Y.uniform1i(X.location,Ce.bind());Ge=b.elements;se=null;(se=(Ve=xa(Ge))?Oa.createStream(Ge):Oa.getElements(Ge))&&Y.bindBuffer(34963,se.buffer.buffer);We=b.offset;if(Re=b.count)xe=Ea.instances,0<xe?se?M.drawElementsInstancedANGLE(0,
Re,se.type,We<<(se.type-5121>>1),xe):M.drawArraysInstancedANGLE(0,We,Re,xe):0>xe&&(se?Y.drawElements(0,Re,se.type,We<<(se.type-5121>>1)):Y.drawArrays(0,We,Re)),wa.dirty=!0,Aa.setVAO(null),na.viewportWidth=w,na.viewportHeight=C,D&&(r.cpuTime+=performance.now()-Q),L&&ca.destroyStream(E),Wa&&ca.destroyStream(da),zb&&ca.destroyStream(jb),mb&&ca.destroyStream(Ya),Sa&&ca.destroyStream(xb),Yb&&ca.destroyStream(Qb),ec&&ca.destroyStream(ic),Ac&&ca.destroyStream(jd),ld&&ca.destroyStream(xd),d.unbind(),Ce.unbind(),
Ve&&Oa.destroyStream(se)},scope:function(d,c,a){var e,q,f,v,p,m,k,z,g,y,J,Q,Z,M,O,ea,Y,T,Da,P,N,V,X,aa,U,sb,ha,Ga,S,A,ga,ua,ba,W,qa,oa,Wa,da,Aa,ja,fa,Ka,ma,ra,sa,za,la,Ba,ya,va,vb,Ia,gb,La,Tb,bc,cc,Gc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Td,Ta,Kb,Fb,Na,Hd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,Pd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,$d,Fc,yd,Qc,Yc,De,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,qe,Ae,ne,kd,Cd,Ed,ze,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,
me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;e=d.viewport;q=e.x|0;f=e.y|0;v="width"in e?e.width|0:na.framebufferWidth-q;p="height"in
e?e.height|0:na.framebufferHeight-f;m=na.viewportWidth;na.viewportWidth=v;k=na.viewportHeight;na.viewportHeight=p;z=Qd[0];Qd[0]=q;g=Qd[1];Qd[1]=f;y=Qd[2];Qd[2]=v;J=Qd[3];Qd[3]=p;Q=ka[0];ka[0]=0;Z=ka[1];ka[1]=0;M=ka[2];ka[2]=0;O=ka[3];ka[3]=1;ea=Fa.blend_enable;Fa.blend_enable=!0;Y=Ha[0];Ha[0]=770;T=Ha[1];Ha[1]=771;Da=Ha[2];Ha[2]=773;P=Ha[3];Ha[3]=1;N=Fa.depth_enable;Fa.depth_enable=!1;V=d.viewport;X=V.x|0;aa=V.y|0;U="width"in V?V.width|0:na.framebufferWidth-X;sb="height"in V?V.height|0:na.framebufferHeight-
aa;ha=Ad[0];Ad[0]=X;Ga=Ad[1];Ad[1]=aa;S=Ad[2];Ad[2]=U;A=Ad[3];Ad[3]=sb;ga=Fa.scissor_enable;Fa.scissor_enable=!0;ua=Fa.stencil_enable;Fa.stencil_enable=!1;if(ba=wa.profile)W=performance.now(),r.count++;qa=d.elements;oa=null;oa=(Wa=xa(qa))?Oa.createStream(qa):Oa.getElements(qa);da=Ea.elements;Ea.elements=oa;Aa=d.offset;ja=Ea.offset;Ea.offset=Aa;fa=d.count;Ka=Ea.count;Ea.count=fa;ma=Ea.primitive;Ea.primitive=0;ra=Ca[45];Ca[45]=!1;sa=d.markerTexture;za=Ca[48];Ca[48]=sa;la=d.opacity;Ba=Ca[10];Ca[10]=
la;ya=h.call(this,na,d,a);va=Ca[46];Ca[46]=ya;vb=Ca[47];Ca[47]=H;Ia=na.pixelRatio;gb=Ca[34];Ca[34]=Ia;La=d.scale;Tb=Ca[6];Ca[6]=La;bc=d.scaleFract;cc=Ca[7];Ca[7]=bc;Gc=d.translate;kb=Ca[8];Ca[8]=Gc;qb=d.translateFract;Ja=Ca[9];Ca[9]=qb;tb=w.call(this,na,d,a);Ma=!1;fb=null;ib=0;Pa=!1;Ya=mb=0;wb=1;ub=0;Ra=5126;Fb=Kb=Ta=Td=0;xa(tb)?(Ma=!0,fb=ca.createStream(34962,tb),Ra=fb.dtype):(fb=ca.getBuffer(tb))?Ra=fb.dtype:"constant"in tb?(wb=2,"number"===typeof tb.constant?(Ta=tb.constant,Kb=Fb=Td=0):(Ta=0<tb.constant.length?
tb.constant[0]:0,Kb=1<tb.constant.length?tb.constant[1]:0,Fb=2<tb.constant.length?tb.constant[2]:0,Td=3<tb.constant.length?tb.constant[3]:0)):(fb=xa(tb.buffer)?ca.createStream(34962,tb.buffer):ca.getBuffer(tb.buffer),Ra="type"in tb?Md[tb.type]:fb.dtype,Pa=!!tb.normalized,Ya=tb.size|0,mb=tb.offset|0,ub=tb.stride|0,ib=tb.divisor|0);Na=L.buffer;L.buffer=fb;Hd=L.divisor;L.divisor=ib;$a=L.normalized;L.normalized=Pa;Lb=L.offset;L.offset=mb;Mb=L.size;L.size=Ya;nb=L.state;L.state=wb;Qa=L.stride;L.stride=
ub;ac=L.type;L.type=Ra;Sa=L.w;L.w=Td;xb=L.x;L.x=Ta;yb=L.y;L.y=Kb;Ua=L.z;L.z=Fb;ob=G.call(this,na,d,a);gc=!1;Bc=null;wc=0;cb=!1;Mc=kc=0;Za=1;Pd=0;Cb=5126;Yb=uc=Xb=ab=0;xa(ob)?(gc=!0,Bc=ca.createStream(34962,ob),Cb=Bc.dtype):(Bc=ca.getBuffer(ob))?Cb=Bc.dtype:"constant"in ob?(Za=2,"number"===typeof ob.constant?(Xb=ob.constant,uc=Yb=ab=0):(Xb=0<ob.constant.length?ob.constant[0]:0,uc=1<ob.constant.length?ob.constant[1]:0,Yb=2<ob.constant.length?ob.constant[2]:0,ab=3<ob.constant.length?ob.constant[3]:0)):
(Bc=xa(ob.buffer)?ca.createStream(34962,ob.buffer):ca.getBuffer(ob.buffer),Cb="type"in ob?Md[ob.type]:Bc.dtype,cb=!!ob.normalized,Mc=ob.size|0,kc=ob.offset|0,Pd=ob.stride|0,wc=ob.divisor|0);Qb=E.buffer;E.buffer=Bc;Nc=E.divisor;E.divisor=wc;Sb=E.normalized;E.normalized=cb;$d=E.offset;E.offset=kc;Fc=E.size;E.size=Mc;yd=E.state;E.state=Za;Qc=E.stride;E.stride=Pd;Yc=E.type;E.type=Cb;De=E.w;E.w=ab;oc=E.x;E.x=Xb;xc=E.y;E.y=uc;hc=E.z;E.z=Yb;eb=u.call(this,na,d,a);tc=!1;Ub=null;Zb=0;ec=!1;zc=ic=0;Cc=1;dd=
0;Tc=5126;od=Zc=Vc=Uc=0;xa(eb)?(tc=!0,Ub=ca.createStream(34962,eb),Tc=Ub.dtype):(Ub=ca.getBuffer(eb))?Tc=Ub.dtype:"constant"in eb?(Cc=2,"number"===typeof eb.constant?(Vc=eb.constant,Zc=od=Uc=0):(Vc=0<eb.constant.length?eb.constant[0]:0,Zc=1<eb.constant.length?eb.constant[1]:0,od=2<eb.constant.length?eb.constant[2]:0,Uc=3<eb.constant.length?eb.constant[3]:0)):(Ub=xa(eb.buffer)?ca.createStream(34962,eb.buffer):ca.getBuffer(eb.buffer),Tc="type"in eb?Md[eb.type]:Ub.dtype,ec=!!eb.normalized,zc=eb.size|
0,ic=eb.offset|0,dd=eb.stride|0,Zb=eb.divisor|0);ed=B.buffer;B.buffer=Ub;$c=B.divisor;B.divisor=Zb;lc=B.normalized;B.normalized=ec;dc=B.offset;B.offset=ic;ad=B.size;B.size=zc;Xc=B.state;B.state=Cc;fd=B.stride;B.stride=dd;Ac=B.type;B.type=Tc;jd=B.w;B.w=Uc;qe=B.x;B.x=Vc;Ae=B.y;B.y=Zc;ne=B.z;B.z=od;kd=b.call(this,na,d,a);Cd=!1;Ed=null;ze=0;ae=!1;Ld=Ud=0;Jd=1;qd=0;Wc=5126;xd=ld=ud=wd=0;xa(kd)?(Cd=!0,Ed=ca.createStream(34962,kd),Wc=Ed.dtype):(Ed=ca.getBuffer(kd))?Wc=Ed.dtype:"constant"in kd?(Jd=2,"number"===
typeof kd.constant?(ud=kd.constant,ld=xd=wd=0):(ud=0<kd.constant.length?kd.constant[0]:0,ld=1<kd.constant.length?kd.constant[1]:0,xd=2<kd.constant.length?kd.constant[2]:0,wd=3<kd.constant.length?kd.constant[3]:0)):(Ed=xa(kd.buffer)?ca.createStream(34962,kd.buffer):ca.getBuffer(kd.buffer),Wc="type"in kd?Md[kd.type]:Ed.dtype,ae=!!kd.normalized,Ld=kd.size|0,Ud=kd.offset|0,qd=kd.stride|0,ze=kd.divisor|0);Fd=l.buffer;l.buffer=Ed;Gd=l.divisor;l.divisor=ze;je=l.normalized;l.normalized=ae;le=l.offset;l.offset=
Ud;ue=l.size;l.size=Ld;me=l.state;l.state=Jd;ke=l.stride;l.stride=qd;he=l.type;l.type=Wc;ve=l.w;l.w=wd;ee=l.x;l.x=ud;oe=l.y;l.y=ld;Rc=l.z;l.z=xd;id=x.call(this,na,d,a);we=!1;re=null;Rd=0;Vd=!1;Xd=Wd=0;pe=1;Ce=0;Ge=5126;Re=We=Ve=se=0;xa(id)?(we=!0,re=ca.createStream(34962,id),Ge=re.dtype):(re=ca.getBuffer(id))?Ge=re.dtype:"constant"in id?(pe=2,"number"===typeof id.constant?(Ve=id.constant,We=Re=se=0):(Ve=0<id.constant.length?id.constant[0]:0,We=1<id.constant.length?id.constant[1]:0,Re=2<id.constant.length?
id.constant[2]:0,se=3<id.constant.length?id.constant[3]:0)):(re=xa(id.buffer)?ca.createStream(34962,id.buffer):ca.getBuffer(id.buffer),Ge="type"in id?Md[id.type]:re.dtype,Vd=!!id.normalized,Xd=id.size|0,Wd=id.offset|0,Ce=id.stride|0,Rd=id.divisor|0);xe=R.buffer;R.buffer=re;Je=R.divisor;R.divisor=Rd;Le=R.normalized;R.normalized=Vd;Me=R.offset;R.offset=Wd;Ne=R.size;R.size=Xd;Ke=R.state;R.state=pe;Sd=R.stride;R.stride=Ce;be=R.type;R.type=Ge;de=R.w;R.w=se;fe=R.x;R.x=Ve;Oe=R.y;R.y=We;Kd=R.z;R.z=Re;Yd=
C.call(this,na,d,a);He=!1;Pe=null;df=0;cf=!1;Se=Xe=0;bf=1;af=0;Ye=5126;$e=ce=Zd=Ze=0;xa(Yd)?(He=!0,Pe=ca.createStream(34962,Yd),Ye=Pe.dtype):(Pe=ca.getBuffer(Yd))?Ye=Pe.dtype:"constant"in Yd?(bf=2,"number"===typeof Yd.constant?(Zd=Yd.constant,ce=$e=Ze=0):(Zd=0<Yd.constant.length?Yd.constant[0]:0,ce=1<Yd.constant.length?Yd.constant[1]:0,$e=2<Yd.constant.length?Yd.constant[2]:0,Ze=3<Yd.constant.length?Yd.constant[3]:0)):(Pe=xa(Yd.buffer)?ca.createStream(34962,Yd.buffer):ca.getBuffer(Yd.buffer),Ye="type"in
Yd?Md[Yd.type]:Pe.dtype,cf=!!Yd.normalized,Se=Yd.size|0,Xe=Yd.offset|0,af=Yd.stride|0,df=Yd.divisor|0);kf=F.buffer;F.buffer=Pe;of=F.divisor;F.divisor=df;gf=F.normalized;F.normalized=cf;lf=F.offset;F.offset=Xe;mf=F.size;F.size=Se;nf=F.state;F.state=bf;sf=F.stride;F.stride=af;pf=F.type;F.type=Ye;tf=F.w;F.w=Ze;Cf=F.x;F.x=Zd;Df=F.y;F.y=ce;Te=F.z;F.z=$e;Ie=ia.call(this,na,d,a);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;xa(Ie)?(qf=!0,rf=ca.createStream(34962,Ie),yf=rf.dtype):(rf=ca.getBuffer(Ie))?
yf=rf.dtype:"constant"in Ie?(Gf=2,"number"===typeof Ie.constant?(zf=Ie.constant,Af=Jf=wf=0):(zf=0<Ie.constant.length?Ie.constant[0]:0,Af=1<Ie.constant.length?Ie.constant[1]:0,Jf=2<Ie.constant.length?Ie.constant[2]:0,wf=3<Ie.constant.length?Ie.constant[3]:0)):(rf=xa(Ie.buffer)?ca.createStream(34962,Ie.buffer):ca.getBuffer(Ie.buffer),yf="type"in Ie?Md[Ie.type]:rf.dtype,Hf=!!Ie.normalized,Ff=Ie.size|0,Bf=Ie.offset|0,xf=Ie.stride|0,Ef=Ie.divisor|0);Kf=I.buffer;I.buffer=rf;Lf=I.divisor;I.divisor=Ef;Mf=
I.normalized;I.normalized=Hf;uf=I.offset;I.offset=Bf;Rf=I.size;I.size=Ff;If=I.state;I.state=Gf;vf=I.stride;I.stride=xf;dg=I.type;I.type=yf;Sf=I.w;I.w=wf;Tf=I.x;I.x=zf;qg=I.y;I.y=Af;hf=I.z;I.z=Jf;ef=K.call(this,na,d,a);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;xa(ef)?(Nf=!0,Of=ca.createStream(34962,ef),Uf=Of.dtype):(Of=ca.getBuffer(ef))?Uf=Of.dtype:"constant"in ef?(ig=2,"number"===typeof ef.constant?(Yf=ef.constant,Zf=jg=Xf=0):(Yf=0<ef.constant.length?ef.constant[0]:0,Zf=1<ef.constant.length?
ef.constant[1]:0,jg=2<ef.constant.length?ef.constant[2]:0,Xf=3<ef.constant.length?ef.constant[3]:0)):(Of=xa(ef.buffer)?ca.createStream(34962,ef.buffer):ca.getBuffer(ef.buffer),Uf="type"in ef?Md[ef.type]:Of.dtype,fg=!!ef.normalized,hg=ef.size|0,gg=ef.offset|0,Wf=ef.stride|0,eg=ef.divisor|0);rg=D.buffer;D.buffer=Of;sg=D.divisor;D.divisor=eg;tg=D.normalized;D.normalized=fg;ug=D.offset;D.offset=gg;vg=D.size;D.size=hg;wg=D.state;D.state=ig;xg=D.stride;D.stride=Wf;yg=D.type;D.type=Uf;zg=D.w;D.w=Xf;Ag=D.x;
D.x=Yf;Bg=D.y;D.y=Zf;jf=D.z;D.z=jg;ff=n.call(this,na,d,a);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;xa(ff)?(Pf=!0,Qf=ca.createStream(34962,ff),Vf=Qf.dtype):(Qf=ca.getBuffer(ff))?Vf=Qf.dtype:"constant"in ff?(og=2,"number"===typeof ff.constant?(bg=ff.constant,cg=pg=ag=0):(bg=0<ff.constant.length?ff.constant[0]:0,cg=1<ff.constant.length?ff.constant[1]:0,pg=2<ff.constant.length?ff.constant[2]:0,ag=3<ff.constant.length?ff.constant[3]:0)):(Qf=xa(ff.buffer)?ca.createStream(34962,ff.buffer):
ca.getBuffer(ff.buffer),Vf="type"in ff?Md[ff.type]:Qf.dtype,lg=!!ff.normalized,ng=ff.size|0,mg=ff.offset|0,$f=ff.stride|0,kg=ff.divisor|0);Cg=t.buffer;t.buffer=Qf;Dg=t.divisor;t.divisor=kg;Eg=t.normalized;t.normalized=lg;Fg=t.offset;t.offset=mg;Gg=t.size;t.size=ng;Hg=t.state;t.state=og;Ig=t.stride;t.stride=$f;Jg=t.type;t.type=Vf;Kg=t.w;t.w=ag;Lg=t.x;t.x=bg;Mg=t.y;t.y=cg;Ng=t.z;t.z=pg;Og=pa.vert;pa.vert=44;Pg=pa.frag;pa.frag=43;wa.dirty=!0;c(na,d,a);na.viewportWidth=m;na.viewportHeight=k;Qd[0]=z;Qd[1]=
g;Qd[2]=y;Qd[3]=J;ka[0]=Q;ka[1]=Z;ka[2]=M;ka[3]=O;Fa.blend_enable=ea;Ha[0]=Y;Ha[1]=T;Ha[2]=Da;Ha[3]=P;Fa.depth_enable=N;Ad[0]=ha;Ad[1]=Ga;Ad[2]=S;Ad[3]=A;Fa.scissor_enable=ga;Fa.stencil_enable=ua;ba&&(r.cpuTime+=performance.now()-W);Wa&&Oa.destroyStream(oa);Ea.elements=da;Ea.offset=ja;Ea.count=Ka;Ea.primitive=ma;Ca[45]=ra;Ca[48]=za;Ca[10]=Ba;Ca[46]=va;Ca[47]=vb;Ca[34]=gb;Ca[6]=Tb;Ca[7]=cc;Ca[8]=kb;Ca[9]=Ja;Ma&&ca.destroyStream(fb);L.buffer=Na;L.divisor=Hd;L.normalized=$a;L.offset=Lb;L.size=Mb;L.state=
nb;L.stride=Qa;L.type=ac;L.w=Sa;L.x=xb;L.y=yb;L.z=Ua;gc&&ca.destroyStream(Bc);E.buffer=Qb;E.divisor=Nc;E.normalized=Sb;E.offset=$d;E.size=Fc;E.state=yd;E.stride=Qc;E.type=Yc;E.w=De;E.x=oc;E.y=xc;E.z=hc;tc&&ca.destroyStream(Ub);B.buffer=ed;B.divisor=$c;B.normalized=lc;B.offset=dc;B.size=ad;B.state=Xc;B.stride=fd;B.type=Ac;B.w=jd;B.x=qe;B.y=Ae;B.z=ne;Cd&&ca.destroyStream(Ed);l.buffer=Fd;l.divisor=Gd;l.normalized=je;l.offset=le;l.size=ue;l.state=me;l.stride=ke;l.type=he;l.w=ve;l.x=ee;l.y=oe;l.z=Rc;we&&
ca.destroyStream(re);R.buffer=xe;R.divisor=Je;R.normalized=Le;R.offset=Me;R.size=Ne;R.state=Ke;R.stride=Sd;R.type=be;R.w=de;R.x=fe;R.y=Oe;R.z=Kd;He&&ca.destroyStream(Pe);F.buffer=kf;F.divisor=of;F.normalized=gf;F.offset=lf;F.size=mf;F.state=nf;F.stride=sf;F.type=pf;F.w=tf;F.x=Cf;F.y=Df;F.z=Te;qf&&ca.destroyStream(rf);I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=uf;I.size=Rf;I.state=If;I.stride=vf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=hf;Nf&&ca.destroyStream(Of);D.buffer=rg;D.divisor=sg;D.normalized=
tg;D.offset=ug;D.size=vg;D.state=wg;D.stride=xg;D.type=yg;D.w=zg;D.x=Ag;D.y=Bg;D.z=jf;Pf&&ca.destroyStream(Qf);t.buffer=Cg;t.divisor=Dg;t.normalized=Eg;t.offset=Fg;t.size=Gg;t.state=Hg;t.stride=Ig;t.type=Jg;t.w=Kg;t.x=Lg;t.y=Mg;t.z=Ng;pa.vert=Og;pa.frag=Pg;wa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,
l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb){var Ka,ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba,va,La,Ha,gb,fa,Gc,bc,Ia,cc,Tb,ze,Hd,Ad,Td,De,Ae,$d,qe,Cd,yd,Qd,Pd;Ka=a.attributes;ea=a.buffer;ca=a.context;na=a.current;wa=a.draw;Ea=a.elements;Oa=a.extensions;vb=a.framebuffer;ha=a.gl;Y=a.isBufferArgs;xa=a.next;Fa=a.shader;pa=a.uniforms;Ca=a.vao;Aa=xa.blend_color;ka=na.blend_color;ba=xa.blend_equation;va=na.blend_equation;La=xa.blend_func;Ha=na.blend_func;
gb=xa.colorMask;fa=na.colorMask;Gc=xa.depth_range;bc=na.depth_range;Ia=xa.polygonOffset_offset;cc=na.polygonOffset_offset;Tb=xa.sample_coverage;ze=na.sample_coverage;Hd=xa.scissor_box;Ad=na.scissor_box;Td=xa.stencil_func;De=na.stencil_func;Ae=xa.stencil_opBack;$d=na.stencil_opBack;qe=xa.stencil_opFront;Cd=na.stencil_opFront;yd=xa.viewport;Qd=na.viewport;Pd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,l){var n,d,c,a,t,e;n=vb.next;
n!==vb.cur&&(n?ha.bindFramebuffer(36160,n.framebuffer):ha.bindFramebuffer(36160,null),vb.cur=n);if(na.dirty){var q,h,f,x,v,p,m,k,w,z,C,H,g,y,J,R,I,F,B,D,L,E,G,K,u,Fa,ia,pa,ta,Aa,La,Rb,db,Nb;q=xa.dither;q!==na.dither&&(q?ha.enable(3024):ha.disable(3024),na.dither=q);h=ba[0];f=ba[1];if(h!==va[0]||f!==va[1])ha.blendEquationSeparate(h,f),va[0]=h,va[1]=f;x=xa.depth_func;x!==na.depth_func&&(ha.depthFunc(x),na.depth_func=x);v=Gc[0];p=Gc[1];if(v!==bc[0]||p!==bc[1])ha.depthRange(v,p),bc[0]=v,bc[1]=p;m=xa.depth_mask;
m!==na.depth_mask&&(ha.depthMask(m),na.depth_mask=m);k=gb[0];w=gb[1];z=gb[2];C=gb[3];if(k!==fa[0]||w!==fa[1]||z!==fa[2]||C!==fa[3])ha.colorMask(k,w,z,C),fa[0]=k,fa[1]=w,fa[2]=z,fa[3]=C;H=xa.cull_enable;H!==na.cull_enable&&(H?ha.enable(2884):ha.disable(2884),na.cull_enable=H);g=xa.cull_face;g!==na.cull_face&&(ha.cullFace(g),na.cull_face=g);y=xa.frontFace;y!==na.frontFace&&(ha.frontFace(y),na.frontFace=y);J=xa.lineWidth;J!==na.lineWidth&&(ha.lineWidth(J),na.lineWidth=J);R=xa.polygonOffset_enable;R!==
na.polygonOffset_enable&&(R?ha.enable(32823):ha.disable(32823),na.polygonOffset_enable=R);I=Ia[0];F=Ia[1];if(I!==cc[0]||F!==cc[1])ha.polygonOffset(I,F),cc[0]=I,cc[1]=F;B=xa.sample_alpha;B!==na.sample_alpha&&(B?ha.enable(32926):ha.disable(32926),na.sample_alpha=B);D=xa.sample_enable;D!==na.sample_enable&&(D?ha.enable(32928):ha.disable(32928),na.sample_enable=D);L=Tb[0];E=Tb[1];if(L!==ze[0]||E!==ze[1])ha.sampleCoverage(L,E),ze[0]=L,ze[1]=E;G=xa.stencil_mask;G!==na.stencil_mask&&(ha.stencilMask(G),na.stencil_mask=
G);K=Td[0];u=Td[1];Fa=Td[2];if(K!==De[0]||u!==De[1]||Fa!==De[2])ha.stencilFunc(K,u,Fa),De[0]=K,De[1]=u,De[2]=Fa;ia=qe[0];pa=qe[1];ta=qe[2];Aa=qe[3];if(ia!==Cd[0]||pa!==Cd[1]||ta!==Cd[2]||Aa!==Cd[3])ha.stencilOpSeparate(ia,pa,ta,Aa),Cd[0]=ia,Cd[1]=pa,Cd[2]=ta,Cd[3]=Aa;La=Ae[0];Rb=Ae[1];db=Ae[2];Nb=Ae[3];if(La!==$d[0]||Rb!==$d[1]||db!==$d[2]||Nb!==$d[3])ha.stencilOpSeparate(La,Rb,db,Nb),$d[0]=La,$d[1]=Rb,$d[2]=db,$d[3]=Nb}ha.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ha.enable(3042);na.blend_enable=
!0;ha.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;ha.disable(2929);na.depth_enable=!1;ha.enable(3089);na.scissor_enable=!0;ha.disable(2960);na.stencil_enable=!1;if(d=na.profile)c=performance.now(),r.count+=l;ha.useProgram(Z.program);a=Oa.angle_instanced_arrays;var bb;Ca.setVAO(null);ha.uniform1i(N.location,!1);ha.uniform1i(oa.location,S.bind());bb=wa.instances;for(t=0;t<l;++t){e=b[t];var pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,
Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,Hd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,yd,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,
uf,Rf,If,vf;pb=e.viewport;Xa=pb.x|0;Kc=pb.y|0;Ib="width"in pb?pb.width|0:ca.framebufferWidth-Xa;Jb="height"in pb?pb.height|0:ca.framebufferHeight-Kc;sc=ca.viewportWidth;ca.viewportWidth=Ib;Ob=ca.viewportHeight;ca.viewportHeight=Jb;ha.viewport(Xa,Kc,Ib,Jb);Qd[0]=Xa;Qd[1]=Kc;Qd[2]=Ib;Qd[3]=Jb;lb=e.viewport;Hb=lb.x|0;Eb=lb.y|0;zb="width"in lb?lb.width|0:ca.framebufferWidth-Hb;jb="height"in lb?lb.height|0:ca.framebufferHeight-Eb;ha.scissor(Hb,Eb,zb,jb);Ad[0]=Hb;Ad[1]=Eb;Ad[2]=zb;Ad[3]=jb;$b=Q.call(this,
ca,e,t);Pb=!1;rb=null;Va=0;Vb=!1;jc=Bb=0;kb=1;qb=0;Ja=5126;ib=fb=Ma=tb=0;Y($b)?(Pb=!0,rb=ea.createStream(34962,$b),Ja=rb.dtype):(rb=ea.getBuffer($b))?Ja=rb.dtype:"constant"in $b?(kb=2,"number"===typeof $b.constant?(Ma=$b.constant,fb=ib=tb=0):(Ma=0<$b.constant.length?$b.constant[0]:0,fb=1<$b.constant.length?$b.constant[1]:0,ib=2<$b.constant.length?$b.constant[2]:0,tb=3<$b.constant.length?$b.constant[3]:0)):(rb=Y($b.buffer)?ea.createStream(34962,$b.buffer):ea.getBuffer($b.buffer),Ja="type"in $b?Pd[$b.type]:
rb.dtype,Vb=!!$b.normalized,jc=$b.size|0,Bb=$b.offset|0,qb=$b.stride|0,Va=$b.divisor|0);Pa=sa.location;mb=Ka[Pa];if(1===kb){mb.buffer||ha.enableVertexAttribArray(Pa);Ya=jc||1;if(mb.type!==Ja||mb.size!==Ya||mb.buffer!==rb||mb.normalized!==Vb||mb.offset!==Bb||mb.stride!==qb)ha.bindBuffer(34962,rb.buffer),ha.vertexAttribPointer(Pa,Ya,Ja,Vb,qb,Bb),mb.type=Ja,mb.size=Ya,mb.buffer=rb,mb.normalized=Vb,mb.offset=Bb,mb.stride=qb;mb.divisor!==Va&&(a.vertexAttribDivisorANGLE(Pa,Va),mb.divisor=Va)}else if(mb.buffer&&
(ha.disableVertexAttribArray(Pa),mb.buffer=null),mb.x!==Ma||mb.y!==fb||mb.z!==ib||mb.w!==tb)ha.vertexAttrib4f(Pa,Ma,fb,ib,tb),mb.x=Ma,mb.y=fb,mb.z=ib,mb.w=tb;wb=A.call(this,ca,e,t);ub=!1;Ra=null;Dc=0;Ta=!1;Fb=Kb=0;Na=1;Hd=0;$a=5126;Qa=nb=Mb=Lb=0;Y(wb)?(ub=!0,Ra=ea.createStream(34962,wb),$a=Ra.dtype):(Ra=ea.getBuffer(wb))?$a=Ra.dtype:"constant"in wb?(Na=2,"number"===typeof wb.constant?(Mb=wb.constant,nb=Qa=Lb=0):(Mb=0<wb.constant.length?wb.constant[0]:0,nb=1<wb.constant.length?wb.constant[1]:0,Qa=
2<wb.constant.length?wb.constant[2]:0,Lb=3<wb.constant.length?wb.constant[3]:0)):(Ra=Y(wb.buffer)?ea.createStream(34962,wb.buffer):ea.getBuffer(wb.buffer),$a="type"in wb?Pd[wb.type]:Ra.dtype,Ta=!!wb.normalized,Fb=wb.size|0,Kb=wb.offset|0,Hd=wb.stride|0,Dc=wb.divisor|0);ac=Da.location;Sa=Ka[ac];if(1===Na){Sa.buffer||ha.enableVertexAttribArray(ac);xb=Fb||1;if(Sa.type!==$a||Sa.size!==xb||Sa.buffer!==Ra||Sa.normalized!==Ta||Sa.offset!==Kb||Sa.stride!==Hd)ha.bindBuffer(34962,Ra.buffer),ha.vertexAttribPointer(ac,
xb,$a,Ta,Hd,Kb),Sa.type=$a,Sa.size=xb,Sa.buffer=Ra,Sa.normalized=Ta,Sa.offset=Kb,Sa.stride=Hd;Sa.divisor!==Dc&&(a.vertexAttribDivisorANGLE(ac,Dc),Sa.divisor=Dc)}else if(Sa.buffer&&(ha.disableVertexAttribArray(ac),Sa.buffer=null),Sa.x!==Mb||Sa.y!==nb||Sa.z!==Qa||Sa.w!==Lb)ha.vertexAttrib4f(ac,Mb,nb,Qa,Lb),Sa.x=Mb,Sa.y=nb,Sa.z=Qa,Sa.w=Lb;yb=Ba.call(this,ca,e,t);Ua=!1;ob=null;gc=0;Bc=!1;cb=wc=0;kc=1;Mc=0;Za=5126;Xb=ab=Cb=nd=0;Y(yb)?(Ua=!0,ob=ea.createStream(34962,yb),Za=ob.dtype):(ob=ea.getBuffer(yb))?
Za=ob.dtype:"constant"in yb?(kc=2,"number"===typeof yb.constant?(Cb=yb.constant,ab=Xb=nd=0):(Cb=0<yb.constant.length?yb.constant[0]:0,ab=1<yb.constant.length?yb.constant[1]:0,Xb=2<yb.constant.length?yb.constant[2]:0,nd=3<yb.constant.length?yb.constant[3]:0)):(ob=Y(yb.buffer)?ea.createStream(34962,yb.buffer):ea.getBuffer(yb.buffer),Za="type"in yb?Pd[yb.type]:ob.dtype,Bc=!!yb.normalized,cb=yb.size|0,wc=yb.offset|0,Mc=yb.stride|0,gc=yb.divisor|0);uc=Ga.location;Yb=Ka[uc];if(1===kc){Yb.buffer||ha.enableVertexAttribArray(uc);
Qb=cb||1;if(Yb.type!==Za||Yb.size!==Qb||Yb.buffer!==ob||Yb.normalized!==Bc||Yb.offset!==wc||Yb.stride!==Mc)ha.bindBuffer(34962,ob.buffer),ha.vertexAttribPointer(uc,Qb,Za,Bc,Mc,wc),Yb.type=Za,Yb.size=Qb,Yb.buffer=ob,Yb.normalized=Bc,Yb.offset=wc,Yb.stride=Mc;Yb.divisor!==gc&&(a.vertexAttribDivisorANGLE(uc,gc),Yb.divisor=gc)}else if(Yb.buffer&&(ha.disableVertexAttribArray(uc),Yb.buffer=null),Yb.x!==Cb||Yb.y!==ab||Yb.z!==Xb||Yb.w!==nd)ha.vertexAttrib4f(uc,Cb,ab,Xb,nd),Yb.x=Cb,Yb.y=ab,Yb.z=Xb,Yb.w=nd;
Nc=W.call(this,ca,e,t);Sb=!1;yd=null;Fc=0;vd=!1;Yc=Qc=0;sd=1;oc=0;xc=5126;Ub=tc=eb=hc=0;Y(Nc)?(Sb=!0,yd=ea.createStream(34962,Nc),xc=yd.dtype):(yd=ea.getBuffer(Nc))?xc=yd.dtype:"constant"in Nc?(sd=2,"number"===typeof Nc.constant?(eb=Nc.constant,tc=Ub=hc=0):(eb=0<Nc.constant.length?Nc.constant[0]:0,tc=1<Nc.constant.length?Nc.constant[1]:0,Ub=2<Nc.constant.length?Nc.constant[2]:0,hc=3<Nc.constant.length?Nc.constant[3]:0)):(yd=Y(Nc.buffer)?ea.createStream(34962,Nc.buffer):ea.getBuffer(Nc.buffer),xc=
"type"in Nc?Pd[Nc.type]:yd.dtype,vd=!!Nc.normalized,Yc=Nc.size|0,Qc=Nc.offset|0,oc=Nc.stride|0,Fc=Nc.divisor|0);Zb=sb.location;ec=Ka[Zb];if(1===sd){ec.buffer||ha.enableVertexAttribArray(Zb);ic=Yc||1;if(ec.type!==xc||ec.size!==ic||ec.buffer!==yd||ec.normalized!==vd||ec.offset!==Qc||ec.stride!==oc)ha.bindBuffer(34962,yd.buffer),ha.vertexAttribPointer(Zb,ic,xc,vd,oc,Qc),ec.type=xc,ec.size=ic,ec.buffer=yd,ec.normalized=vd,ec.offset=Qc,ec.stride=oc;ec.divisor!==Fc&&(a.vertexAttribDivisorANGLE(Zb,Fc),ec.divisor=
Fc)}else if(ec.buffer&&(ha.disableVertexAttribArray(Zb),ec.buffer=null),ec.x!==eb||ec.y!==tc||ec.z!==Ub||ec.w!==hc)ha.vertexAttrib4f(Zb,eb,tc,Ub,hc),ec.x=eb,ec.y=tc,ec.z=Ub,ec.w=hc;zc=da.call(this,ca,e,t);Cc=!1;dd=null;Tc=0;Uc=!1;Zc=Vc=0;od=1;ed=0;$c=5126;Xc=ad=dc=lc=0;Y(zc)?(Cc=!0,dd=ea.createStream(34962,zc),$c=dd.dtype):(dd=ea.getBuffer(zc))?$c=dd.dtype:"constant"in zc?(od=2,"number"===typeof zc.constant?(dc=zc.constant,ad=Xc=lc=0):(dc=0<zc.constant.length?zc.constant[0]:0,ad=1<zc.constant.length?
zc.constant[1]:0,Xc=2<zc.constant.length?zc.constant[2]:0,lc=3<zc.constant.length?zc.constant[3]:0)):(dd=Y(zc.buffer)?ea.createStream(34962,zc.buffer):ea.getBuffer(zc.buffer),$c="type"in zc?Pd[zc.type]:dd.dtype,Uc=!!zc.normalized,Zc=zc.size|0,Vc=zc.offset|0,ed=zc.stride|0,Tc=zc.divisor|0);fd=za.location;Ac=Ka[fd];if(1===od){Ac.buffer||ha.enableVertexAttribArray(fd);jd=Zc||1;if(Ac.type!==$c||Ac.size!==jd||Ac.buffer!==dd||Ac.normalized!==Uc||Ac.offset!==Vc||Ac.stride!==ed)ha.bindBuffer(34962,dd.buffer),
ha.vertexAttribPointer(fd,jd,$c,Uc,ed,Vc),Ac.type=$c,Ac.size=jd,Ac.buffer=dd,Ac.normalized=Uc,Ac.offset=Vc,Ac.stride=ed;Ac.divisor!==Tc&&(a.vertexAttribDivisorANGLE(fd,Tc),Ac.divisor=Tc)}else if(Ac.buffer&&(ha.disableVertexAttribArray(fd),Ac.buffer=null),Ac.x!==dc||Ac.y!==ad||Ac.z!==Xc||Ac.w!==lc)ha.vertexAttrib4f(fd,dc,ad,Xc,lc),Ac.x=dc,Ac.y=ad,Ac.z=Xc,Ac.w=lc;Bd=V.call(this,ca,e,t);ye=!1;ne=null;kd=0;Fe=!1;ge=Ed=0;ae=1;Ud=0;Ld=5126;wd=Wc=qd=Jd=0;Y(Bd)?(ye=!0,ne=ea.createStream(34962,Bd),Ld=ne.dtype):
(ne=ea.getBuffer(Bd))?Ld=ne.dtype:"constant"in Bd?(ae=2,"number"===typeof Bd.constant?(qd=Bd.constant,Wc=wd=Jd=0):(qd=0<Bd.constant.length?Bd.constant[0]:0,Wc=1<Bd.constant.length?Bd.constant[1]:0,wd=2<Bd.constant.length?Bd.constant[2]:0,Jd=3<Bd.constant.length?Bd.constant[3]:0)):(ne=Y(Bd.buffer)?ea.createStream(34962,Bd.buffer):ea.getBuffer(Bd.buffer),Ld="type"in Bd?Pd[Bd.type]:ne.dtype,Fe=!!Bd.normalized,ge=Bd.size|0,Ed=Bd.offset|0,Ud=Bd.stride|0,kd=Bd.divisor|0);ud=ra.location;ld=Ka[ud];if(1===
ae){ld.buffer||ha.enableVertexAttribArray(ud);xd=ge||1;if(ld.type!==Ld||ld.size!==xd||ld.buffer!==ne||ld.normalized!==Fe||ld.offset!==Ed||ld.stride!==Ud)ha.bindBuffer(34962,ne.buffer),ha.vertexAttribPointer(ud,xd,Ld,Fe,Ud,Ed),ld.type=Ld,ld.size=xd,ld.buffer=ne,ld.normalized=Fe,ld.offset=Ed,ld.stride=Ud;ld.divisor!==kd&&(a.vertexAttribDivisorANGLE(ud,kd),ld.divisor=kd)}else if(ld.buffer&&(ha.disableVertexAttribArray(ud),ld.buffer=null),ld.x!==qd||ld.y!==Wc||ld.z!==wd||ld.w!==Jd)ha.vertexAttrib4f(ud,
qd,Wc,wd,Jd),ld.x=qd,ld.y=Wc,ld.z=wd,ld.w=Jd;Fd=T.call(this,ca,e,t);Gd=!1;je=null;le=0;ue=!1;ke=me=0;he=1;ve=0;ee=5126;we=id=Rc=oe=0;Y(Fd)?(Gd=!0,je=ea.createStream(34962,Fd),ee=je.dtype):(je=ea.getBuffer(Fd))?ee=je.dtype:"constant"in Fd?(he=2,"number"===typeof Fd.constant?(Rc=Fd.constant,id=we=oe=0):(Rc=0<Fd.constant.length?Fd.constant[0]:0,id=1<Fd.constant.length?Fd.constant[1]:0,we=2<Fd.constant.length?Fd.constant[2]:0,oe=3<Fd.constant.length?Fd.constant[3]:0)):(je=Y(Fd.buffer)?ea.createStream(34962,
Fd.buffer):ea.getBuffer(Fd.buffer),ee="type"in Fd?Pd[Fd.type]:je.dtype,ue=!!Fd.normalized,ke=Fd.size|0,me=Fd.offset|0,ve=Fd.stride|0,le=Fd.divisor|0);re=O.location;Rd=Ka[re];if(1===he){Rd.buffer||ha.enableVertexAttribArray(re);Vd=ke||4;if(Rd.type!==ee||Rd.size!==Vd||Rd.buffer!==je||Rd.normalized!==ue||Rd.offset!==me||Rd.stride!==ve)ha.bindBuffer(34962,je.buffer),ha.vertexAttribPointer(re,Vd,ee,ue,ve,me),Rd.type=ee,Rd.size=Vd,Rd.buffer=je,Rd.normalized=ue,Rd.offset=me,Rd.stride=ve;Rd.divisor!==le&&
(a.vertexAttribDivisorANGLE(re,le),Rd.divisor=le)}else if(Rd.buffer&&(ha.disableVertexAttribArray(re),Rd.buffer=null),Rd.x!==Rc||Rd.y!==id||Rd.z!==we||Rd.w!==oe)ha.vertexAttrib4f(re,Rc,id,we,oe),Rd.x=Rc,Rd.y=id,Rd.z=we,Rd.w=oe;Wd=P.call(this,ca,e,t);Xd=!1;pe=null;Ce=0;Ge=!1;Ve=se=0;We=1;Re=0;xe=5126;Ne=Me=Le=Je=0;Y(Wd)?(Xd=!0,pe=ea.createStream(34962,Wd),xe=pe.dtype):(pe=ea.getBuffer(Wd))?xe=pe.dtype:"constant"in Wd?(We=2,"number"===typeof Wd.constant?(Le=Wd.constant,Me=Ne=Je=0):(Le=0<Wd.constant.length?
Wd.constant[0]:0,Me=1<Wd.constant.length?Wd.constant[1]:0,Ne=2<Wd.constant.length?Wd.constant[2]:0,Je=3<Wd.constant.length?Wd.constant[3]:0)):(pe=Y(Wd.buffer)?ea.createStream(34962,Wd.buffer):ea.getBuffer(Wd.buffer),xe="type"in Wd?Pd[Wd.type]:pe.dtype,Ge=!!Wd.normalized,Ve=Wd.size|0,se=Wd.offset|0,Re=Wd.stride|0,Ce=Wd.divisor|0);Ke=qa.location;Sd=Ka[Ke];if(1===We){Sd.buffer||ha.enableVertexAttribArray(Ke);be=Ve||4;if(Sd.type!==xe||Sd.size!==be||Sd.buffer!==pe||Sd.normalized!==Ge||Sd.offset!==se||
Sd.stride!==Re)ha.bindBuffer(34962,pe.buffer),ha.vertexAttribPointer(Ke,be,xe,Ge,Re,se),Sd.type=xe,Sd.size=be,Sd.buffer=pe,Sd.normalized=Ge,Sd.offset=se,Sd.stride=Re;Sd.divisor!==Ce&&(a.vertexAttribDivisorANGLE(Ke,Ce),Sd.divisor=Ce)}else if(Sd.buffer&&(ha.disableVertexAttribArray(Ke),Sd.buffer=null),Sd.x!==Le||Sd.y!==Me||Sd.z!==Ne||Sd.w!==Je)ha.vertexAttrib4f(Ke,Le,Me,Ne,Je),Sd.x=Le,Sd.y=Me,Sd.z=Ne,Sd.w=Je;de=M.call(this,ca,e,t);fe=!1;Oe=null;Kd=0;Yd=!1;Pe=He=0;df=1;cf=0;Xe=5126;Ye=af=bf=Se=0;Y(de)?
(fe=!0,Oe=ea.createStream(34962,de),Xe=Oe.dtype):(Oe=ea.getBuffer(de))?Xe=Oe.dtype:"constant"in de?(df=2,"number"===typeof de.constant?(bf=de.constant,af=Ye=Se=0):(bf=0<de.constant.length?de.constant[0]:0,af=1<de.constant.length?de.constant[1]:0,Ye=2<de.constant.length?de.constant[2]:0,Se=3<de.constant.length?de.constant[3]:0)):(Oe=Y(de.buffer)?ea.createStream(34962,de.buffer):ea.getBuffer(de.buffer),Xe="type"in de?Pd[de.type]:Oe.dtype,Yd=!!de.normalized,Pe=de.size|0,He=de.offset|0,cf=de.stride|0,
Kd=de.divisor|0);Ze=ga.location;Zd=Ka[Ze];if(1===df){Zd.buffer||ha.enableVertexAttribArray(Ze);ce=Pe||1;if(Zd.type!==Xe||Zd.size!==ce||Zd.buffer!==Oe||Zd.normalized!==Yd||Zd.offset!==He||Zd.stride!==cf)ha.bindBuffer(34962,Oe.buffer),ha.vertexAttribPointer(Ze,ce,Xe,Yd,cf,He),Zd.type=Xe,Zd.size=ce,Zd.buffer=Oe,Zd.normalized=Yd,Zd.offset=He,Zd.stride=cf;Zd.divisor!==Kd&&(a.vertexAttribDivisorANGLE(Ze,Kd),Zd.divisor=Kd)}else if(Zd.buffer&&(ha.disableVertexAttribArray(Ze),Zd.buffer=null),Zd.x!==bf||Zd.y!==
af||Zd.z!==Ye||Zd.w!==Se)ha.vertexAttrib4f(Ze,bf,af,Ye,Se),Zd.x=bf,Zd.y=af,Zd.z=Ye,Zd.w=Se;$e=ca.pixelRatio;t&&kf===$e||(kf=$e,ha.uniform1f(ya.location,$e));of=U.call(this,ca,e,t);gf=of[0];mf=of[1];t&&lf===gf&&nf===mf||(lf=gf,nf=mf,ha.uniform2f(la.location,gf,mf));sf=e.scale;pf=sf[0];Cf=sf[1];t&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,ha.uniform2f(ua.location,pf,Cf));Te=e.scaleFract;Ie=Te[0];rf=Te[1];t&&qf===Ie&&Ef===rf||(qf=Ie,Ef=rf,ha.uniform2f(aa.location,Ie,rf));Hf=e.translate;Bf=Hf[0];Gf=Hf[1];t&&Ff===
Bf&&xf===Gf||(Ff=Bf,xf=Gf,ha.uniform2f(ja.location,Bf,Gf));yf=e.translateFract;wf=yf[0];Af=yf[1];t&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,ha.uniform2f(ma.location,wf,Af));Kf=e.opacity;t&&Lf===Kf||(Lf=Kf,ha.uniform1f(X.location,Kf));Mf=e.elements;uf=null;(uf=(Rf=Y(Mf))?Ea.createStream(Mf):Ea.getElements(Mf))&&ha.bindBuffer(34963,uf.buffer.buffer);If=e.offset;if(vf=e.count)0<bb?uf?a.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),bb):a.drawArraysInstancedANGLE(0,If,vf,bb):0>bb&&(uf?ha.drawElements(0,
vf,uf.type,If<<(uf.type-5121>>1)):ha.drawArrays(0,If,vf)),ca.viewportWidth=sc,ca.viewportHeight=Ob,Pb&&ea.destroyStream(rb),ub&&ea.destroyStream(Ra),Ua&&ea.destroyStream(ob),Sb&&ea.destroyStream(yd),Cc&&ea.destroyStream(dd),ye&&ea.destroyStream(ne),Gd&&ea.destroyStream(je),Xd&&ea.destroyStream(pe),fe&&ea.destroyStream(Oe),Rf&&Ea.destroyStream(uf)}S.unbind();na.dirty=!0;Ca.setVAO(null);d&&(r.cpuTime+=performance.now()-c)},draw:function(b){var l,n,a,t,h,x,w,C,H,R,I,F,B,D,Q,Z,M,L,E,G,K,u,T,P,V,Fa,ia,
pa,U,ta,S,A,W,Aa,da,Wa,Ba,La,Rb,db,Nb,bb,pb,Xa,Hd,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,yd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd,ye,ne,kd,Fe,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve;l=vb.next;l!==vb.cur&&(l?ha.bindFramebuffer(36160,
l.framebuffer):ha.bindFramebuffer(36160,null),vb.cur=l);if(na.dirty){var We,Re,xe,Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf;We=xa.dither;We!==na.dither&&(We?ha.enable(3024):ha.disable(3024),na.dither=We);Re=ba[0];xe=ba[1];if(Re!==va[0]||xe!==va[1])ha.blendEquationSeparate(Re,xe),va[0]=Re,va[1]=xe;Je=xa.depth_func;Je!==na.depth_func&&(ha.depthFunc(Je),na.depth_func=Je);Le=Gc[0];Me=Gc[1];if(Le!==bc[0]||Me!==bc[1])ha.depthRange(Le,Me),bc[0]=Le,bc[1]=
Me;Ne=xa.depth_mask;Ne!==na.depth_mask&&(ha.depthMask(Ne),na.depth_mask=Ne);Ke=gb[0];Sd=gb[1];be=gb[2];de=gb[3];if(Ke!==fa[0]||Sd!==fa[1]||be!==fa[2]||de!==fa[3])ha.colorMask(Ke,Sd,be,de),fa[0]=Ke,fa[1]=Sd,fa[2]=be,fa[3]=de;fe=xa.cull_enable;fe!==na.cull_enable&&(fe?ha.enable(2884):ha.disable(2884),na.cull_enable=fe);Oe=xa.cull_face;Oe!==na.cull_face&&(ha.cullFace(Oe),na.cull_face=Oe);Kd=xa.frontFace;Kd!==na.frontFace&&(ha.frontFace(Kd),na.frontFace=Kd);Yd=xa.lineWidth;Yd!==na.lineWidth&&(ha.lineWidth(Yd),
na.lineWidth=Yd);He=xa.polygonOffset_enable;He!==na.polygonOffset_enable&&(He?ha.enable(32823):ha.disable(32823),na.polygonOffset_enable=He);Pe=Ia[0];df=Ia[1];if(Pe!==cc[0]||df!==cc[1])ha.polygonOffset(Pe,df),cc[0]=Pe,cc[1]=df;cf=xa.sample_alpha;cf!==na.sample_alpha&&(cf?ha.enable(32926):ha.disable(32926),na.sample_alpha=cf);Xe=xa.sample_enable;Xe!==na.sample_enable&&(Xe?ha.enable(32928):ha.disable(32928),na.sample_enable=Xe);Se=Tb[0];bf=Tb[1];if(Se!==ze[0]||bf!==ze[1])ha.sampleCoverage(Se,bf),ze[0]=
Se,ze[1]=bf;af=xa.stencil_mask;af!==na.stencil_mask&&(ha.stencilMask(af),na.stencil_mask=af);Ye=Td[0];Ze=Td[1];Zd=Td[2];if(Ye!==De[0]||Ze!==De[1]||Zd!==De[2])ha.stencilFunc(Ye,Ze,Zd),De[0]=Ye,De[1]=Ze,De[2]=Zd;ce=qe[0];$e=qe[1];kf=qe[2];of=qe[3];if(ce!==Cd[0]||$e!==Cd[1]||kf!==Cd[2]||of!==Cd[3])ha.stencilOpSeparate(ce,$e,kf,of),Cd[0]=ce,Cd[1]=$e,Cd[2]=kf,Cd[3]=of;gf=Ae[0];lf=Ae[1];mf=Ae[2];nf=Ae[3];if(gf!==$d[0]||lf!==$d[1]||mf!==$d[2]||nf!==$d[3])ha.stencilOpSeparate(gf,lf,mf,nf),$d[0]=gf,$d[1]=
lf,$d[2]=mf,$d[3]=nf}n=b.viewport;a=n.x|0;t=n.y|0;h="width"in n?n.width|0:ca.framebufferWidth-a;x="height"in n?n.height|0:ca.framebufferHeight-t;w=ca.viewportWidth;ca.viewportWidth=h;C=ca.viewportHeight;ca.viewportHeight=x;ha.viewport(a,t,h,x);Qd[0]=a;Qd[1]=t;Qd[2]=h;Qd[3]=x;ha.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ha.enable(3042);na.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Ha[0]=770;Ha[1]=771;Ha[2]=773;Ha[3]=1;ha.disable(2929);na.depth_enable=!1;H=b.viewport;R=H.x|0;I=H.y|
0;F="width"in H?H.width|0:ca.framebufferWidth-R;B="height"in H?H.height|0:ca.framebufferHeight-I;ha.scissor(R,I,F,B);Ad[0]=R;Ad[1]=I;Ad[2]=F;Ad[3]=B;ha.enable(3089);na.scissor_enable=!0;ha.disable(2960);na.stencil_enable=!1;if(D=na.profile)Q=performance.now(),r.count++;ha.useProgram(q.program);Z=Oa.angle_instanced_arrays;Ca.setVAO(null);M=v.call(this,ca,b,0);L=!1;E=null;G=0;K=!1;T=u=0;P=1;V=0;Fa=5126;ta=U=pa=ia=0;Y(M)?(L=!0,E=ea.createStream(34962,M),Fa=E.dtype):(E=ea.getBuffer(M))?Fa=E.dtype:"constant"in
M?(P=2,"number"===typeof M.constant?(pa=M.constant,U=ta=ia=0):(pa=0<M.constant.length?M.constant[0]:0,U=1<M.constant.length?M.constant[1]:0,ta=2<M.constant.length?M.constant[2]:0,ia=3<M.constant.length?M.constant[3]:0)):(E=Y(M.buffer)?ea.createStream(34962,M.buffer):ea.getBuffer(M.buffer),Fa="type"in M?Pd[M.type]:E.dtype,K=!!M.normalized,T=M.size|0,u=M.offset|0,V=M.stride|0,G=M.divisor|0);S=sa.location;A=Ka[S];if(1===P){A.buffer||ha.enableVertexAttribArray(S);W=T||1;if(A.type!==Fa||A.size!==W||A.buffer!==
E||A.normalized!==K||A.offset!==u||A.stride!==V)ha.bindBuffer(34962,E.buffer),ha.vertexAttribPointer(S,W,Fa,K,V,u),A.type=Fa,A.size=W,A.buffer=E,A.normalized=K,A.offset=u,A.stride=V;A.divisor!==G&&(Z.vertexAttribDivisorANGLE(S,G),A.divisor=G)}else if(A.buffer&&(ha.disableVertexAttribArray(S),A.buffer=null),A.x!==pa||A.y!==U||A.z!==ta||A.w!==ia)ha.vertexAttrib4f(S,pa,U,ta,ia),A.x=pa,A.y=U,A.z=ta,A.w=ia;Aa=f.call(this,ca,b,0);da=!1;Wa=null;Ba=0;La=!1;db=Rb=0;Nb=1;bb=0;pb=5126;Jb=Ib=Hd=Xa=0;Y(Aa)?(da=
!0,Wa=ea.createStream(34962,Aa),pb=Wa.dtype):(Wa=ea.getBuffer(Aa))?pb=Wa.dtype:"constant"in Aa?(Nb=2,"number"===typeof Aa.constant?(Hd=Aa.constant,Ib=Jb=Xa=0):(Hd=0<Aa.constant.length?Aa.constant[0]:0,Ib=1<Aa.constant.length?Aa.constant[1]:0,Jb=2<Aa.constant.length?Aa.constant[2]:0,Xa=3<Aa.constant.length?Aa.constant[3]:0)):(Wa=Y(Aa.buffer)?ea.createStream(34962,Aa.buffer):ea.getBuffer(Aa.buffer),pb="type"in Aa?Pd[Aa.type]:Wa.dtype,La=!!Aa.normalized,db=Aa.size|0,Rb=Aa.offset|0,bb=Aa.stride|0,Ba=
Aa.divisor|0);sc=Da.location;Ob=Ka[sc];if(1===Nb){Ob.buffer||ha.enableVertexAttribArray(sc);lb=db||1;if(Ob.type!==pb||Ob.size!==lb||Ob.buffer!==Wa||Ob.normalized!==La||Ob.offset!==Rb||Ob.stride!==bb)ha.bindBuffer(34962,Wa.buffer),ha.vertexAttribPointer(sc,lb,pb,La,bb,Rb),Ob.type=pb,Ob.size=lb,Ob.buffer=Wa,Ob.normalized=La,Ob.offset=Rb,Ob.stride=bb;Ob.divisor!==Ba&&(Z.vertexAttribDivisorANGLE(sc,Ba),Ob.divisor=Ba)}else if(Ob.buffer&&(ha.disableVertexAttribArray(sc),Ob.buffer=null),Ob.x!==Hd||Ob.y!==
Ib||Ob.z!==Jb||Ob.w!==Xa)ha.vertexAttrib4f(sc,Hd,Ib,Jb,Xa),Ob.x=Hd,Ob.y=Ib,Ob.z=Jb,Ob.w=Xa;Hb=e.call(this,ca,b,0);Eb=!1;zb=null;jb=0;$b=!1;rb=Pb=0;Va=1;Vb=0;Bb=5126;Ja=qb=kb=jc=0;Y(Hb)?(Eb=!0,zb=ea.createStream(34962,Hb),Bb=zb.dtype):(zb=ea.getBuffer(Hb))?Bb=zb.dtype:"constant"in Hb?(Va=2,"number"===typeof Hb.constant?(kb=Hb.constant,qb=Ja=jc=0):(kb=0<Hb.constant.length?Hb.constant[0]:0,qb=1<Hb.constant.length?Hb.constant[1]:0,Ja=2<Hb.constant.length?Hb.constant[2]:0,jc=3<Hb.constant.length?Hb.constant[3]:
0)):(zb=Y(Hb.buffer)?ea.createStream(34962,Hb.buffer):ea.getBuffer(Hb.buffer),Bb="type"in Hb?Pd[Hb.type]:zb.dtype,$b=!!Hb.normalized,rb=Hb.size|0,Pb=Hb.offset|0,Vb=Hb.stride|0,jb=Hb.divisor|0);tb=Ga.location;Ma=Ka[tb];if(1===Va){Ma.buffer||ha.enableVertexAttribArray(tb);fb=rb||1;if(Ma.type!==Bb||Ma.size!==fb||Ma.buffer!==zb||Ma.normalized!==$b||Ma.offset!==Pb||Ma.stride!==Vb)ha.bindBuffer(34962,zb.buffer),ha.vertexAttribPointer(tb,fb,Bb,$b,Vb,Pb),Ma.type=Bb,Ma.size=fb,Ma.buffer=zb,Ma.normalized=$b,
Ma.offset=Pb,Ma.stride=Vb;Ma.divisor!==jb&&(Z.vertexAttribDivisorANGLE(tb,jb),Ma.divisor=jb)}else if(Ma.buffer&&(ha.disableVertexAttribArray(tb),Ma.buffer=null),Ma.x!==kb||Ma.y!==qb||Ma.z!==Ja||Ma.w!==jc)ha.vertexAttrib4f(tb,kb,qb,Ja,jc),Ma.x=kb,Ma.y=qb,Ma.z=Ja,Ma.w=jc;ib=k.call(this,ca,b,0);Pa=!1;mb=null;Ya=0;wb=!1;Ra=ub=0;Dc=1;Ta=0;Kb=5126;$a=yd=Na=Fb=0;Y(ib)?(Pa=!0,mb=ea.createStream(34962,ib),Kb=mb.dtype):(mb=ea.getBuffer(ib))?Kb=mb.dtype:"constant"in ib?(Dc=2,"number"===typeof ib.constant?(Na=
ib.constant,yd=$a=Fb=0):(Na=0<ib.constant.length?ib.constant[0]:0,yd=1<ib.constant.length?ib.constant[1]:0,$a=2<ib.constant.length?ib.constant[2]:0,Fb=3<ib.constant.length?ib.constant[3]:0)):(mb=Y(ib.buffer)?ea.createStream(34962,ib.buffer):ea.getBuffer(ib.buffer),Kb="type"in ib?Pd[ib.type]:mb.dtype,wb=!!ib.normalized,Ra=ib.size|0,ub=ib.offset|0,Ta=ib.stride|0,Ya=ib.divisor|0);Lb=sb.location;Mb=Ka[Lb];if(1===Dc){Mb.buffer||ha.enableVertexAttribArray(Lb);nb=Ra||1;if(Mb.type!==Kb||Mb.size!==nb||Mb.buffer!==
mb||Mb.normalized!==wb||Mb.offset!==ub||Mb.stride!==Ta)ha.bindBuffer(34962,mb.buffer),ha.vertexAttribPointer(Lb,nb,Kb,wb,Ta,ub),Mb.type=Kb,Mb.size=nb,Mb.buffer=mb,Mb.normalized=wb,Mb.offset=ub,Mb.stride=Ta;Mb.divisor!==Ya&&(Z.vertexAttribDivisorANGLE(Lb,Ya),Mb.divisor=Ya)}else if(Mb.buffer&&(ha.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Na||Mb.y!==yd||Mb.z!==$a||Mb.w!==Fb)ha.vertexAttrib4f(Lb,Na,yd,$a,Fb),Mb.x=Na,Mb.y=yd,Mb.z=$a,Mb.w=Fb;Qa=p.call(this,ca,b,0);ac=!1;Sa=null;xb=0;yb=!1;ob=
Ua=0;gc=1;Bc=0;wc=5126;Za=Mc=kc=cb=0;Y(Qa)?(ac=!0,Sa=ea.createStream(34962,Qa),wc=Sa.dtype):(Sa=ea.getBuffer(Qa))?wc=Sa.dtype:"constant"in Qa?(gc=2,"number"===typeof Qa.constant?(kc=Qa.constant,Mc=Za=cb=0):(kc=0<Qa.constant.length?Qa.constant[0]:0,Mc=1<Qa.constant.length?Qa.constant[1]:0,Za=2<Qa.constant.length?Qa.constant[2]:0,cb=3<Qa.constant.length?Qa.constant[3]:0)):(Sa=Y(Qa.buffer)?ea.createStream(34962,Qa.buffer):ea.getBuffer(Qa.buffer),wc="type"in Qa?Pd[Qa.type]:Sa.dtype,yb=!!Qa.normalized,
ob=Qa.size|0,Ua=Qa.offset|0,Bc=Qa.stride|0,xb=Qa.divisor|0);nd=za.location;Cb=Ka[nd];if(1===gc){Cb.buffer||ha.enableVertexAttribArray(nd);ab=ob||1;if(Cb.type!==wc||Cb.size!==ab||Cb.buffer!==Sa||Cb.normalized!==yb||Cb.offset!==Ua||Cb.stride!==Bc)ha.bindBuffer(34962,Sa.buffer),ha.vertexAttribPointer(nd,ab,wc,yb,Bc,Ua),Cb.type=wc,Cb.size=ab,Cb.buffer=Sa,Cb.normalized=yb,Cb.offset=Ua,Cb.stride=Bc;Cb.divisor!==xb&&(Z.vertexAttribDivisorANGLE(nd,xb),Cb.divisor=xb)}else if(Cb.buffer&&(ha.disableVertexAttribArray(nd),
Cb.buffer=null),Cb.x!==kc||Cb.y!==Mc||Cb.z!==Za||Cb.w!==cb)ha.vertexAttrib4f(nd,kc,Mc,Za,cb),Cb.x=kc,Cb.y=Mc,Cb.z=Za,Cb.w=cb;Xb=g.call(this,ca,b,0);uc=!1;Yb=null;Qb=0;Nc=!1;Od=Sb=0;Fc=1;vd=0;Qc=5126;xc=oc=sd=Yc=0;Y(Xb)?(uc=!0,Yb=ea.createStream(34962,Xb),Qc=Yb.dtype):(Yb=ea.getBuffer(Xb))?Qc=Yb.dtype:"constant"in Xb?(Fc=2,"number"===typeof Xb.constant?(sd=Xb.constant,oc=xc=Yc=0):(sd=0<Xb.constant.length?Xb.constant[0]:0,oc=1<Xb.constant.length?Xb.constant[1]:0,xc=2<Xb.constant.length?Xb.constant[2]:
0,Yc=3<Xb.constant.length?Xb.constant[3]:0)):(Yb=Y(Xb.buffer)?ea.createStream(34962,Xb.buffer):ea.getBuffer(Xb.buffer),Qc="type"in Xb?Pd[Xb.type]:Yb.dtype,Nc=!!Xb.normalized,Od=Xb.size|0,Sb=Xb.offset|0,vd=Xb.stride|0,Qb=Xb.divisor|0);hc=ra.location;eb=Ka[hc];if(1===Fc){eb.buffer||ha.enableVertexAttribArray(hc);tc=Od||1;if(eb.type!==Qc||eb.size!==tc||eb.buffer!==Yb||eb.normalized!==Nc||eb.offset!==Sb||eb.stride!==vd)ha.bindBuffer(34962,Yb.buffer),ha.vertexAttribPointer(hc,tc,Qc,Nc,vd,Sb),eb.type=Qc,
eb.size=tc,eb.buffer=Yb,eb.normalized=Nc,eb.offset=Sb,eb.stride=vd;eb.divisor!==Qb&&(Z.vertexAttribDivisorANGLE(hc,Qb),eb.divisor=Qb)}else if(eb.buffer&&(ha.disableVertexAttribArray(hc),eb.buffer=null),eb.x!==sd||eb.y!==oc||eb.z!==xc||eb.w!==Yc)ha.vertexAttrib4f(hc,sd,oc,xc,Yc),eb.x=sd,eb.y=oc,eb.z=xc,eb.w=Yc;Ub=z.call(this,ca,b,0);Zb=!1;ec=null;ic=0;zc=!1;dd=Cc=0;Tc=1;Uc=0;Vc=5126;$c=ed=od=Zc=0;Y(Ub)?(Zb=!0,ec=ea.createStream(34962,Ub),Vc=ec.dtype):(ec=ea.getBuffer(Ub))?Vc=ec.dtype:"constant"in Ub?
(Tc=2,"number"===typeof Ub.constant?(od=Ub.constant,ed=$c=Zc=0):(od=0<Ub.constant.length?Ub.constant[0]:0,ed=1<Ub.constant.length?Ub.constant[1]:0,$c=2<Ub.constant.length?Ub.constant[2]:0,Zc=3<Ub.constant.length?Ub.constant[3]:0)):(ec=Y(Ub.buffer)?ea.createStream(34962,Ub.buffer):ea.getBuffer(Ub.buffer),Vc="type"in Ub?Pd[Ub.type]:ec.dtype,zc=!!Ub.normalized,dd=Ub.size|0,Cc=Ub.offset|0,Uc=Ub.stride|0,ic=Ub.divisor|0);lc=O.location;dc=Ka[lc];if(1===Tc){dc.buffer||ha.enableVertexAttribArray(lc);ad=dd||
4;if(dc.type!==Vc||dc.size!==ad||dc.buffer!==ec||dc.normalized!==zc||dc.offset!==Cc||dc.stride!==Uc)ha.bindBuffer(34962,ec.buffer),ha.vertexAttribPointer(lc,ad,Vc,zc,Uc,Cc),dc.type=Vc,dc.size=ad,dc.buffer=ec,dc.normalized=zc,dc.offset=Cc,dc.stride=Uc;dc.divisor!==ic&&(Z.vertexAttribDivisorANGLE(lc,ic),dc.divisor=ic)}else if(dc.buffer&&(ha.disableVertexAttribArray(lc),dc.buffer=null),dc.x!==od||dc.y!==ed||dc.z!==$c||dc.w!==Zc)ha.vertexAttrib4f(lc,od,ed,$c,Zc),dc.x=od,dc.y=ed,dc.z=$c,dc.w=Zc;Xc=y.call(this,
ca,b,0);fd=!1;Ac=null;jd=0;Bd=!1;ne=ye=0;kd=1;Fe=0;Ed=5126;Ld=Ud=ae=ge=0;Y(Xc)?(fd=!0,Ac=ea.createStream(34962,Xc),Ed=Ac.dtype):(Ac=ea.getBuffer(Xc))?Ed=Ac.dtype:"constant"in Xc?(kd=2,"number"===typeof Xc.constant?(ae=Xc.constant,Ud=Ld=ge=0):(ae=0<Xc.constant.length?Xc.constant[0]:0,Ud=1<Xc.constant.length?Xc.constant[1]:0,Ld=2<Xc.constant.length?Xc.constant[2]:0,ge=3<Xc.constant.length?Xc.constant[3]:0)):(Ac=Y(Xc.buffer)?ea.createStream(34962,Xc.buffer):ea.getBuffer(Xc.buffer),Ed="type"in Xc?Pd[Xc.type]:
Ac.dtype,Bd=!!Xc.normalized,ne=Xc.size|0,ye=Xc.offset|0,Fe=Xc.stride|0,jd=Xc.divisor|0);Jd=qa.location;qd=Ka[Jd];if(1===kd){qd.buffer||ha.enableVertexAttribArray(Jd);Wc=ne||4;if(qd.type!==Ed||qd.size!==Wc||qd.buffer!==Ac||qd.normalized!==Bd||qd.offset!==ye||qd.stride!==Fe)ha.bindBuffer(34962,Ac.buffer),ha.vertexAttribPointer(Jd,Wc,Ed,Bd,Fe,ye),qd.type=Ed,qd.size=Wc,qd.buffer=Ac,qd.normalized=Bd,qd.offset=ye,qd.stride=Fe;qd.divisor!==jd&&(Z.vertexAttribDivisorANGLE(Jd,jd),qd.divisor=jd)}else if(qd.buffer&&
(ha.disableVertexAttribArray(Jd),qd.buffer=null),qd.x!==ae||qd.y!==Ud||qd.z!==Ld||qd.w!==ge)ha.vertexAttrib4f(Jd,ae,Ud,Ld,ge),qd.x=ae,qd.y=Ud,qd.z=Ld,qd.w=ge;wd=m.call(this,ca,b,0);ud=!1;ld=null;xd=0;Fd=!1;je=Gd=0;le=1;ue=0;me=5126;ee=ve=he=ke=0;Y(wd)?(ud=!0,ld=ea.createStream(34962,wd),me=ld.dtype):(ld=ea.getBuffer(wd))?me=ld.dtype:"constant"in wd?(le=2,"number"===typeof wd.constant?(he=wd.constant,ve=ee=ke=0):(he=0<wd.constant.length?wd.constant[0]:0,ve=1<wd.constant.length?wd.constant[1]:0,ee=
2<wd.constant.length?wd.constant[2]:0,ke=3<wd.constant.length?wd.constant[3]:0)):(ld=Y(wd.buffer)?ea.createStream(34962,wd.buffer):ea.getBuffer(wd.buffer),me="type"in wd?Pd[wd.type]:ld.dtype,Fd=!!wd.normalized,je=wd.size|0,Gd=wd.offset|0,ue=wd.stride|0,xd=wd.divisor|0);oe=ga.location;Rc=Ka[oe];if(1===le){Rc.buffer||ha.enableVertexAttribArray(oe);id=je||1;if(Rc.type!==me||Rc.size!==id||Rc.buffer!==ld||Rc.normalized!==Fd||Rc.offset!==Gd||Rc.stride!==ue)ha.bindBuffer(34962,ld.buffer),ha.vertexAttribPointer(oe,
id,me,Fd,ue,Gd),Rc.type=me,Rc.size=id,Rc.buffer=ld,Rc.normalized=Fd,Rc.offset=Gd,Rc.stride=ue;Rc.divisor!==xd&&(Z.vertexAttribDivisorANGLE(oe,xd),Rc.divisor=xd)}else if(Rc.buffer&&(ha.disableVertexAttribArray(oe),Rc.buffer=null),Rc.x!==he||Rc.y!==ve||Rc.z!==ee||Rc.w!==ke)ha.vertexAttrib4f(oe,he,ve,ee,ke),Rc.x=he,Rc.y=ve,Rc.z=ee,Rc.w=ke;ha.uniform1i(N.location,!1);ha.uniform1f(ya.location,ca.pixelRatio);we=c.call(this,ca,b,0);ha.uniform2f(la.location,we[0],we[1]);re=b.scale;ha.uniform2f(ua.location,
re[0],re[1]);Rd=b.scaleFract;ha.uniform2f(aa.location,Rd[0],Rd[1]);Vd=b.translate;ha.uniform2f(ja.location,Vd[0],Vd[1]);Wd=b.translateFract;ha.uniform2f(ma.location,Wd[0],Wd[1]);ha.uniform1f(X.location,b.opacity);ha.uniform1i(oa.location,d.bind());Xd=b.elements;pe=null;(pe=(Ce=Y(Xd))?Ea.createStream(Xd):Ea.getElements(Xd))&&ha.bindBuffer(34963,pe.buffer.buffer);Ge=b.offset;if(se=b.count)Ve=wa.instances,0<Ve?pe?Z.drawElementsInstancedANGLE(0,se,pe.type,Ge<<(pe.type-5121>>1),Ve):Z.drawArraysInstancedANGLE(0,
Ge,se,Ve):0>Ve&&(pe?ha.drawElements(0,se,pe.type,Ge<<(pe.type-5121>>1)):ha.drawArrays(0,Ge,se)),na.dirty=!0,Ca.setVAO(null),ca.viewportWidth=w,ca.viewportHeight=C,D&&(r.cpuTime+=performance.now()-Q),L&&ea.destroyStream(E),da&&ea.destroyStream(Wa),Eb&&ea.destroyStream(zb),Pa&&ea.destroyStream(mb),ac&&ea.destroyStream(Sa),uc&&ea.destroyStream(Yb),Zb&&ea.destroyStream(ec),fd&&ea.destroyStream(Ac),ud&&ea.destroyStream(ld),d.unbind(),Ce&&Ea.destroyStream(pe)},scope:function(d,c,a){var e,q,f,v,p,m,k,z,
g,y,J,Q,M,Z,O,T,Da,P,V,N,X,aa,U,sb,ha,S,Ga,A,ka,ga,ua,ba,W,qa,oa,Ca,Wa,da,ja,fa,Ka,ma,ra,sa,za,Ba,la,ya,va,vb,Ia,Ha,Oa,gb,Tb,Va,bc,cc,Gc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Td,Ta,Kb,Fb,Na,Ad,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,Qd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,$d,Fc,De,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,qe,Ae,Cd,kd,ze,Ed,ge,ae,Ud,Ld,Jd,qd,Wc,wd,ud,ld,xd,Fd,Gd,je,le,ue,me,ke,he,ve,ee,oe,Rc,id,we,re,Rd,Vd,Wd,Xd,pe,Ce,Ge,se,Ve,We,Re,xe,
Je,Le,Me,Ne,Ke,Sd,be,de,fe,Oe,Kd,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;e=d.viewport;q=e.x|0;f=e.y|0;v="width"in e?e.width|0:ca.framebufferWidth-q;p="height"in e?e.height|0:ca.framebufferHeight-f;m=ca.viewportWidth;ca.viewportWidth=
v;k=ca.viewportHeight;ca.viewportHeight=p;z=yd[0];yd[0]=q;g=yd[1];yd[1]=f;y=yd[2];yd[2]=v;J=yd[3];yd[3]=p;Q=Aa[0];Aa[0]=0;M=Aa[1];Aa[1]=0;Z=Aa[2];Aa[2]=0;O=Aa[3];Aa[3]=1;T=xa.blend_enable;xa.blend_enable=!0;Da=La[0];La[0]=770;P=La[1];La[1]=771;V=La[2];La[2]=773;N=La[3];La[3]=1;X=xa.depth_enable;xa.depth_enable=!1;aa=d.viewport;U=aa.x|0;sb=aa.y|0;ha="width"in aa?aa.width|0:ca.framebufferWidth-U;S="height"in aa?aa.height|0:ca.framebufferHeight-sb;Ga=Hd[0];Hd[0]=U;A=Hd[1];Hd[1]=sb;ka=Hd[2];Hd[2]=ha;
ga=Hd[3];Hd[3]=S;ua=xa.scissor_enable;xa.scissor_enable=!0;ba=xa.stencil_enable;xa.stencil_enable=!1;if(W=na.profile)qa=performance.now(),r.count++;oa=d.elements;Ca=null;Ca=(Wa=Y(oa))?Ea.createStream(oa):Ea.getElements(oa);da=wa.elements;wa.elements=Ca;ja=d.offset;fa=wa.offset;wa.offset=ja;Ka=d.count;ma=wa.count;wa.count=Ka;ra=wa.primitive;wa.primitive=0;sa=pa[45];pa[45]=!1;za=d.markerTexture;Ba=pa[48];pa[48]=za;la=d.opacity;ya=pa[10];pa[10]=la;va=h.call(this,ca,d,a);vb=pa[46];pa[46]=va;Ia=pa[47];
pa[47]=H;Ha=ca.pixelRatio;Oa=pa[34];pa[34]=Ha;gb=d.scale;Tb=pa[6];pa[6]=gb;Va=d.scaleFract;bc=pa[7];pa[7]=Va;cc=d.translate;Gc=pa[8];pa[8]=cc;kb=d.translateFract;qb=pa[9];pa[9]=kb;Ja=w.call(this,ca,d,a);tb=!1;Ma=null;fb=0;ib=!1;mb=Pa=0;Ya=1;wb=0;ub=5126;Kb=Ta=Td=Ra=0;Y(Ja)?(tb=!0,Ma=ea.createStream(34962,Ja),ub=Ma.dtype):(Ma=ea.getBuffer(Ja))?ub=Ma.dtype:"constant"in Ja?(Ya=2,"number"===typeof Ja.constant?(Td=Ja.constant,Ta=Kb=Ra=0):(Td=0<Ja.constant.length?Ja.constant[0]:0,Ta=1<Ja.constant.length?
Ja.constant[1]:0,Kb=2<Ja.constant.length?Ja.constant[2]:0,Ra=3<Ja.constant.length?Ja.constant[3]:0)):(Ma=Y(Ja.buffer)?ea.createStream(34962,Ja.buffer):ea.getBuffer(Ja.buffer),ub="type"in Ja?Pd[Ja.type]:Ma.dtype,ib=!!Ja.normalized,mb=Ja.size|0,Pa=Ja.offset|0,wb=Ja.stride|0,fb=Ja.divisor|0);Fb=L.buffer;L.buffer=Ma;Na=L.divisor;L.divisor=fb;Ad=L.normalized;L.normalized=ib;$a=L.offset;L.offset=Pa;Lb=L.size;L.size=mb;Mb=L.state;L.state=Ya;nb=L.stride;L.stride=wb;Qa=L.type;L.type=ub;ac=L.w;L.w=Ra;Sa=L.x;
L.x=Td;xb=L.y;L.y=Ta;yb=L.z;L.z=Kb;Ua=G.call(this,ca,d,a);ob=!1;gc=null;Bc=0;wc=!1;kc=cb=0;Mc=1;Za=0;Qd=5126;uc=Xb=ab=Cb=0;Y(Ua)?(ob=!0,gc=ea.createStream(34962,Ua),Qd=gc.dtype):(gc=ea.getBuffer(Ua))?Qd=gc.dtype:"constant"in Ua?(Mc=2,"number"===typeof Ua.constant?(ab=Ua.constant,Xb=uc=Cb=0):(ab=0<Ua.constant.length?Ua.constant[0]:0,Xb=1<Ua.constant.length?Ua.constant[1]:0,uc=2<Ua.constant.length?Ua.constant[2]:0,Cb=3<Ua.constant.length?Ua.constant[3]:0)):(gc=Y(Ua.buffer)?ea.createStream(34962,Ua.buffer):
ea.getBuffer(Ua.buffer),Qd="type"in Ua?Pd[Ua.type]:gc.dtype,wc=!!Ua.normalized,kc=Ua.size|0,cb=Ua.offset|0,Za=Ua.stride|0,Bc=Ua.divisor|0);Yb=E.buffer;E.buffer=gc;Qb=E.divisor;E.divisor=Bc;Nc=E.normalized;E.normalized=wc;Sb=E.offset;E.offset=cb;$d=E.size;E.size=kc;Fc=E.state;E.state=Mc;De=E.stride;E.stride=Za;Qc=E.type;E.type=Qd;Yc=E.w;E.w=Cb;sd=E.x;E.x=ab;oc=E.y;E.y=Xb;xc=E.z;E.z=uc;hc=u.call(this,ca,d,a);eb=!1;tc=null;Ub=0;Zb=!1;ic=ec=0;zc=1;Cc=0;dd=5126;Zc=Vc=Uc=Tc=0;Y(hc)?(eb=!0,tc=ea.createStream(34962,
hc),dd=tc.dtype):(tc=ea.getBuffer(hc))?dd=tc.dtype:"constant"in hc?(zc=2,"number"===typeof hc.constant?(Uc=hc.constant,Vc=Zc=Tc=0):(Uc=0<hc.constant.length?hc.constant[0]:0,Vc=1<hc.constant.length?hc.constant[1]:0,Zc=2<hc.constant.length?hc.constant[2]:0,Tc=3<hc.constant.length?hc.constant[3]:0)):(tc=Y(hc.buffer)?ea.createStream(34962,hc.buffer):ea.getBuffer(hc.buffer),dd="type"in hc?Pd[hc.type]:tc.dtype,Zb=!!hc.normalized,ic=hc.size|0,ec=hc.offset|0,Cc=hc.stride|0,Ub=hc.divisor|0);od=B.buffer;B.buffer=
tc;ed=B.divisor;B.divisor=Ub;$c=B.normalized;B.normalized=Zb;lc=B.offset;B.offset=ec;dc=B.size;B.size=ic;ad=B.state;B.state=zc;Xc=B.stride;B.stride=Cc;fd=B.type;B.type=dd;Ac=B.w;B.w=Tc;jd=B.x;B.x=Uc;qe=B.y;B.y=Vc;Ae=B.z;B.z=Zc;Cd=b.call(this,ca,d,a);kd=!1;ze=null;Ed=0;ge=!1;Ud=ae=0;Ld=1;Jd=0;qd=5126;ld=ud=wd=Wc=0;Y(Cd)?(kd=!0,ze=ea.createStream(34962,Cd),qd=ze.dtype):(ze=ea.getBuffer(Cd))?qd=ze.dtype:"constant"in Cd?(Ld=2,"number"===typeof Cd.constant?(wd=Cd.constant,ud=ld=Wc=0):(wd=0<Cd.constant.length?
Cd.constant[0]:0,ud=1<Cd.constant.length?Cd.constant[1]:0,ld=2<Cd.constant.length?Cd.constant[2]:0,Wc=3<Cd.constant.length?Cd.constant[3]:0)):(ze=Y(Cd.buffer)?ea.createStream(34962,Cd.buffer):ea.getBuffer(Cd.buffer),qd="type"in Cd?Pd[Cd.type]:ze.dtype,ge=!!Cd.normalized,Ud=Cd.size|0,ae=Cd.offset|0,Jd=Cd.stride|0,Ed=Cd.divisor|0);xd=l.buffer;l.buffer=ze;Fd=l.divisor;l.divisor=Ed;Gd=l.normalized;l.normalized=ge;je=l.offset;l.offset=ae;le=l.size;l.size=Ud;ue=l.state;l.state=Ld;me=l.stride;l.stride=Jd;
ke=l.type;l.type=qd;he=l.w;l.w=Wc;ve=l.x;l.x=wd;ee=l.y;l.y=ud;oe=l.z;l.z=ld;Rc=x.call(this,ca,d,a);id=!1;we=null;re=0;Rd=!1;Wd=Vd=0;Xd=1;pe=0;Ce=5126;We=Ve=se=Ge=0;Y(Rc)?(id=!0,we=ea.createStream(34962,Rc),Ce=we.dtype):(we=ea.getBuffer(Rc))?Ce=we.dtype:"constant"in Rc?(Xd=2,"number"===typeof Rc.constant?(se=Rc.constant,Ve=We=Ge=0):(se=0<Rc.constant.length?Rc.constant[0]:0,Ve=1<Rc.constant.length?Rc.constant[1]:0,We=2<Rc.constant.length?Rc.constant[2]:0,Ge=3<Rc.constant.length?Rc.constant[3]:0)):(we=
Y(Rc.buffer)?ea.createStream(34962,Rc.buffer):ea.getBuffer(Rc.buffer),Ce="type"in Rc?Pd[Rc.type]:we.dtype,Rd=!!Rc.normalized,Wd=Rc.size|0,Vd=Rc.offset|0,pe=Rc.stride|0,re=Rc.divisor|0);Re=R.buffer;R.buffer=we;xe=R.divisor;R.divisor=re;Je=R.normalized;R.normalized=Rd;Le=R.offset;R.offset=Vd;Me=R.size;R.size=Wd;Ne=R.state;R.state=Xd;Ke=R.stride;R.stride=pe;Sd=R.type;R.type=Ce;be=R.w;R.w=Ge;de=R.x;R.x=se;fe=R.y;R.y=Ve;Oe=R.z;R.z=We;Kd=C.call(this,ca,d,a);Yd=!1;He=null;Pe=0;df=!1;Xe=cf=0;Se=1;bf=0;af=
5126;ce=Zd=Ze=Ye=0;Y(Kd)?(Yd=!0,He=ea.createStream(34962,Kd),af=He.dtype):(He=ea.getBuffer(Kd))?af=He.dtype:"constant"in Kd?(Se=2,"number"===typeof Kd.constant?(Ze=Kd.constant,Zd=ce=Ye=0):(Ze=0<Kd.constant.length?Kd.constant[0]:0,Zd=1<Kd.constant.length?Kd.constant[1]:0,ce=2<Kd.constant.length?Kd.constant[2]:0,Ye=3<Kd.constant.length?Kd.constant[3]:0)):(He=Y(Kd.buffer)?ea.createStream(34962,Kd.buffer):ea.getBuffer(Kd.buffer),af="type"in Kd?Pd[Kd.type]:He.dtype,df=!!Kd.normalized,Xe=Kd.size|0,cf=Kd.offset|
0,bf=Kd.stride|0,Pe=Kd.divisor|0);$e=F.buffer;F.buffer=He;kf=F.divisor;F.divisor=Pe;of=F.normalized;F.normalized=df;gf=F.offset;F.offset=cf;lf=F.size;F.size=Xe;mf=F.state;F.state=Se;nf=F.stride;F.stride=bf;sf=F.type;F.type=af;pf=F.w;F.w=Ye;tf=F.x;F.x=Ze;Cf=F.y;F.y=Zd;Df=F.z;F.z=ce;Te=ia.call(this,ca,d,a);Ie=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;Y(Te)?(Ie=!0,qf=ea.createStream(34962,Te),xf=qf.dtype):(qf=ea.getBuffer(Te))?xf=qf.dtype:"constant"in Te?(Ff=2,"number"===typeof Te.constant?
(wf=Te.constant,zf=Af=yf=0):(wf=0<Te.constant.length?Te.constant[0]:0,zf=1<Te.constant.length?Te.constant[1]:0,Af=2<Te.constant.length?Te.constant[2]:0,yf=3<Te.constant.length?Te.constant[3]:0)):(qf=Y(Te.buffer)?ea.createStream(34962,Te.buffer):ea.getBuffer(Te.buffer),xf="type"in Te?Pd[Te.type]:qf.dtype,Ef=!!Te.normalized,Bf=Te.size|0,Hf=Te.offset|0,Gf=Te.stride|0,rf=Te.divisor|0);Jf=I.buffer;I.buffer=qf;Kf=I.divisor;I.divisor=rf;Lf=I.normalized;I.normalized=Ef;Mf=I.offset;I.offset=Hf;uf=I.size;I.size=
Bf;Rf=I.state;I.state=Ff;If=I.stride;I.stride=Gf;vf=I.type;I.type=xf;dg=I.w;I.w=yf;Sf=I.x;I.x=wf;Tf=I.y;I.y=zf;qg=I.z;I.z=Af;hf=K.call(this,ca,d,a);ef=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;Y(hf)?(ef=!0,Nf=ea.createStream(34962,hf),Wf=Nf.dtype):(Nf=ea.getBuffer(hf))?Wf=Nf.dtype:"constant"in hf?(hg=2,"number"===typeof hf.constant?(Xf=hf.constant,Yf=Zf=Uf=0):(Xf=0<hf.constant.length?hf.constant[0]:0,Yf=1<hf.constant.length?hf.constant[1]:0,Zf=2<hf.constant.length?hf.constant[2]:
0,Uf=3<hf.constant.length?hf.constant[3]:0)):(Nf=Y(hf.buffer)?ea.createStream(34962,hf.buffer):ea.getBuffer(hf.buffer),Wf="type"in hf?Pd[hf.type]:Nf.dtype,eg=!!hf.normalized,gg=hf.size|0,fg=hf.offset|0,ig=hf.stride|0,Of=hf.divisor|0);jg=D.buffer;D.buffer=Nf;rg=D.divisor;D.divisor=Of;sg=D.normalized;D.normalized=eg;tg=D.offset;D.offset=fg;ug=D.size;D.size=gg;vg=D.state;D.state=hg;wg=D.stride;D.stride=ig;xg=D.type;D.type=Wf;yg=D.w;D.w=Uf;zg=D.x;D.x=Xf;Ag=D.y;D.y=Yf;Bg=D.z;D.z=Zf;jf=n.call(this,ca,d,
a);ff=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;Y(jf)?(ff=!0,Pf=ea.createStream(34962,jf),$f=Pf.dtype):(Pf=ea.getBuffer(jf))?$f=Pf.dtype:"constant"in jf?(ng=2,"number"===typeof jf.constant?(ag=jf.constant,bg=cg=Vf=0):(ag=0<jf.constant.length?jf.constant[0]:0,bg=1<jf.constant.length?jf.constant[1]:0,cg=2<jf.constant.length?jf.constant[2]:0,Vf=3<jf.constant.length?jf.constant[3]:0)):(Pf=Y(jf.buffer)?ea.createStream(34962,jf.buffer):ea.getBuffer(jf.buffer),$f="type"in jf?Pd[jf.type]:
Pf.dtype,kg=!!jf.normalized,mg=jf.size|0,lg=jf.offset|0,og=jf.stride|0,Qf=jf.divisor|0);pg=t.buffer;t.buffer=Pf;Cg=t.divisor;t.divisor=Qf;Dg=t.normalized;t.normalized=kg;Eg=t.offset;t.offset=lg;Fg=t.size;t.size=mg;Gg=t.state;t.state=ng;Hg=t.stride;t.stride=og;Ig=t.type;t.type=$f;Jg=t.w;t.w=Vf;Kg=t.x;t.x=ag;Lg=t.y;t.y=bg;Mg=t.z;t.z=cg;Ng=Fa.vert;Fa.vert=59;Og=Fa.frag;Fa.frag=58;na.dirty=!0;c(ca,d,a);ca.viewportWidth=m;ca.viewportHeight=k;yd[0]=z;yd[1]=g;yd[2]=y;yd[3]=J;Aa[0]=Q;Aa[1]=M;Aa[2]=Z;Aa[3]=
O;xa.blend_enable=T;La[0]=Da;La[1]=P;La[2]=V;La[3]=N;xa.depth_enable=X;Hd[0]=Ga;Hd[1]=A;Hd[2]=ka;Hd[3]=ga;xa.scissor_enable=ua;xa.stencil_enable=ba;W&&(r.cpuTime+=performance.now()-qa);Wa&&Ea.destroyStream(Ca);wa.elements=da;wa.offset=fa;wa.count=ma;wa.primitive=ra;pa[45]=sa;pa[48]=Ba;pa[10]=ya;pa[46]=vb;pa[47]=Ia;pa[34]=Oa;pa[6]=Tb;pa[7]=bc;pa[8]=Gc;pa[9]=qb;tb&&ea.destroyStream(Ma);L.buffer=Fb;L.divisor=Na;L.normalized=Ad;L.offset=$a;L.size=Lb;L.state=Mb;L.stride=nb;L.type=Qa;L.w=ac;L.x=Sa;L.y=
xb;L.z=yb;ob&&ea.destroyStream(gc);E.buffer=Yb;E.divisor=Qb;E.normalized=Nc;E.offset=Sb;E.size=$d;E.state=Fc;E.stride=De;E.type=Qc;E.w=Yc;E.x=sd;E.y=oc;E.z=xc;eb&&ea.destroyStream(tc);B.buffer=od;B.divisor=ed;B.normalized=$c;B.offset=lc;B.size=dc;B.state=ad;B.stride=Xc;B.type=fd;B.w=Ac;B.x=jd;B.y=qe;B.z=Ae;kd&&ea.destroyStream(ze);l.buffer=xd;l.divisor=Fd;l.normalized=Gd;l.offset=je;l.size=le;l.state=ue;l.stride=me;l.type=ke;l.w=he;l.x=ve;l.y=ee;l.z=oe;id&&ea.destroyStream(we);R.buffer=Re;R.divisor=
xe;R.normalized=Je;R.offset=Le;R.size=Me;R.state=Ne;R.stride=Ke;R.type=Sd;R.w=be;R.x=de;R.y=fe;R.z=Oe;Yd&&ea.destroyStream(He);F.buffer=$e;F.divisor=kf;F.normalized=of;F.offset=gf;F.size=lf;F.state=mf;F.stride=nf;F.type=sf;F.w=pf;F.x=tf;F.y=Cf;F.z=Df;Ie&&ea.destroyStream(qf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=uf;I.state=Rf;I.stride=If;I.type=vf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;ef&&ea.destroyStream(Nf);D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=
wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;ff&&ea.destroyStream(Pf);t.buffer=pg;t.divisor=Cg;t.normalized=Dg;t.offset=Eg;t.size=Fg;t.state=Gg;t.stride=Hg;t.type=Ig;t.w=Jg;t.x=Kg;t.y=Lg;t.z=Mg;Fa.vert=Ng;Fa.frag=Og;na.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W,da){var V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,
ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba;V=a.attributes;T=a.buffer;P=a.context;M=a.current;S=a.draw;U=a.elements;qa=a.extensions;ra=a.framebuffer;O=a.gl;N=a.isBufferArgs;ga=a.next;X=a.shader;la=a.uniforms;oa=a.vao;ya=ga.blend_color;ua=M.blend_color;aa=ga.blend_equation;za=M.blend_equation;ja=ga.blend_func;ma=M.blend_func;sa=ga.colorMask;Ga=M.colorMask;Da=ga.depth_range;sb=M.depth_range;Ka=ga.polygonOffset_offset;ea=M.polygonOffset_offset;ca=ga.sample_coverage;na=
M.sample_coverage;wa=ga.scissor_box;Ea=M.scissor_box;Oa=ga.stencil_func;vb=M.stencil_func;ha=ga.stencil_opBack;Y=M.stencil_opBack;xa=ga.stencil_opFront;Fa=M.stencil_opFront;pa=ga.viewport;Ca=M.viewport;Aa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:4,stride:8};ba={offset:0,stride:8};return{batch:function(d,a){var c,e,q,h,f,v,p,m,k,w,z,H,g;c=ra.next;c!==ra.cur&&(c?O.bindFramebuffer(36160,c.framebuffer):O.bindFramebuffer(36160,null),ra.cur=
c);if(M.dirty){var y,J,X,pa,ja,la,ya,Md,Be,Qe,Ue,Id,Ee,te,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc;y=ga.dither;y!==M.dither&&(y?O.enable(3024):O.disable(3024),M.dither=y);J=aa[0];X=aa[1];if(J!==za[0]||X!==za[1])O.blendEquationSeparate(J,X),za[0]=J,za[1]=X;pa=ga.depth_func;pa!==M.depth_func&&(O.depthFunc(pa),M.depth_func=pa);ja=Da[0];la=Da[1];if(ja!==sb[0]||la!==sb[1])O.depthRange(ja,la),sb[0]=ja,sb[1]=la;ya=ga.depth_mask;ya!==M.depth_mask&&(O.depthMask(ya),M.depth_mask=
ya);Md=sa[0];Be=sa[1];Qe=sa[2];Ue=sa[3];if(Md!==Ga[0]||Be!==Ga[1]||Qe!==Ga[2]||Ue!==Ga[3])O.colorMask(Md,Be,Qe,Ue),Ga[0]=Md,Ga[1]=Be,Ga[2]=Qe,Ga[3]=Ue;Id=ga.cull_enable;Id!==M.cull_enable&&(Id?O.enable(2884):O.disable(2884),M.cull_enable=Id);Ee=ga.cull_face;Ee!==M.cull_face&&(O.cullFace(Ee),M.cull_face=Ee);te=ga.frontFace;te!==M.frontFace&&(O.frontFace(te),M.frontFace=te);ie=ga.lineWidth;ie!==M.lineWidth&&(O.lineWidth(ie),M.lineWidth=ie);Nd=ga.polygonOffset_enable;Nd!==M.polygonOffset_enable&&(Nd?
O.enable(32823):O.disable(32823),M.polygonOffset_enable=Nd);Dd=Ka[0];pd=Ka[1];if(Dd!==ea[0]||pd!==ea[1])O.polygonOffset(Dd,pd),ea[0]=Dd,ea[1]=pd;bd=ga.sample_alpha;bd!==M.sample_alpha&&(bd?O.enable(32926):O.disable(32926),M.sample_alpha=bd);td=ga.sample_enable;td!==M.sample_enable&&(td?O.enable(32928):O.disable(32928),M.sample_enable=td);Oc=ca[0];rd=ca[1];if(Oc!==na[0]||rd!==na[1])O.sampleCoverage(Oc,rd),na[0]=Oc,na[1]=rd;Hc=ga.stencil_mask;Hc!==M.stencil_mask&&(O.stencilMask(Hc),M.stencil_mask=Hc);
gd=Oa[0];Sc=Oa[1];md=Oa[2];if(gd!==vb[0]||Sc!==vb[1]||md!==vb[2])O.stencilFunc(gd,Sc,md),vb[0]=gd,vb[1]=Sc,vb[2]=md;Wb=xa[0];Gb=xa[1];vc=xa[2];Ab=xa[3];if(Wb!==Fa[0]||Gb!==Fa[1]||vc!==Fa[2]||Ab!==Fa[3])O.stencilOpSeparate(Wb,Gb,vc,Ab),Fa[0]=Wb,Fa[1]=Gb,Fa[2]=vc,Fa[3]=Ab;yc=ha[0];Db=ha[1];Lc=ha[2];mc=ha[3];if(yc!==Y[0]||Db!==Y[1]||Lc!==Y[2]||mc!==Y[3])O.stencilOpSeparate(yc,Db,Lc,mc),Y[0]=yc,Y[1]=Db,Y[2]=Lc,Y[3]=mc;Ic=ga.scissor_enable;Ic!==M.scissor_enable&&(Ic?O.enable(3089):O.disable(3089),M.scissor_enable=
Ic);hd=wa[0];cd=wa[1];Ec=wa[2];fc=wa[3];if(hd!==Ea[0]||cd!==Ea[1]||Ec!==Ea[2]||fc!==Ea[3])O.scissor(hd,cd,Ec,fc),Ea[0]=hd,Ea[1]=cd,Ea[2]=Ec,Ea[3]=fc}e=this.viewport;q=e.x|0;h=e.y|0;f="width"in e?e.width|0:P.framebufferWidth-q;v="height"in e?e.height|0:P.framebufferHeight-h;p=P.viewportWidth;P.viewportWidth=f;m=P.viewportHeight;P.viewportHeight=v;O.viewport(q,h,f,v);Ca[0]=q;Ca[1]=h;Ca[2]=f;Ca[3]=v;O.blendColor(0,0,0,1);ua[0]=0;ua[1]=0;ua[2]=0;ua[3]=1;O.enable(3042);M.blend_enable=!0;O.blendFuncSeparate(770,
771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;O.disable(2929);M.depth_enable=!1;O.disable(2960);M.stencil_enable=!1;if(k=M.profile)w=performance.now(),r.count+=a;O.useProgram(L.program);z=qa.angle_instanced_arrays;var Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb;oa.setVAO(null);ba.buffer=this.sizeBuffer;Jc=!1;pc=null;rc=0;nc=!1;
hb=qc=0;Pc=1;Rb=0;db=5126;Xa=pb=bb=Nb=0;N(ba)?(Jc=!0,pc=T.createStream(34962,ba),db=pc.dtype):(pc=T.getBuffer(ba))?db=pc.dtype:"constant"in ba?(Pc=2,"number"===typeof ba.constant?(bb=ba.constant,pb=Xa=Nb=0):(bb=0<ba.constant.length?ba.constant[0]:0,pb=1<ba.constant.length?ba.constant[1]:0,Xa=2<ba.constant.length?ba.constant[2]:0,Nb=3<ba.constant.length?ba.constant[3]:0)):(pc=N(ba.buffer)?T.createStream(34962,ba.buffer):T.getBuffer(ba.buffer),db="type"in ba?Aa[ba.type]:pc.dtype,nc=!!ba.normalized,
hb=ba.size|0,qc=ba.offset|0,Rb=ba.stride|0,rc=ba.divisor|0);Kc=da.location;Ib=V[Kc];if(1===Pc){Ib.buffer||O.enableVertexAttribArray(Kc);Jb=hb||1;if(Ib.type!==db||Ib.size!==Jb||Ib.buffer!==pc||Ib.normalized!==nc||Ib.offset!==qc||Ib.stride!==Rb)O.bindBuffer(34962,pc.buffer),O.vertexAttribPointer(Kc,Jb,db,nc,Rb,qc),Ib.type=db,Ib.size=Jb,Ib.buffer=pc,Ib.normalized=nc,Ib.offset=qc,Ib.stride=Rb;Ib.divisor!==rc&&(z.vertexAttribDivisorANGLE(Kc,rc),Ib.divisor=rc)}else if(Ib.buffer&&(O.disableVertexAttribArray(Kc),
Ib.buffer=null),Ib.x!==bb||Ib.y!==pb||Ib.z!==Xa||Ib.w!==Nb)O.vertexAttrib4f(Kc,bb,pb,Xa,Nb),Ib.x=bb,Ib.y=pb,Ib.z=Xa,Ib.w=Nb;ka.buffer=this.sizeBuffer;sc=!1;Ob=null;lb=0;Hb=!1;zb=Eb=0;jb=1;$b=0;Pb=5126;Bb=Vb=Va=rb=0;N(ka)?(sc=!0,Ob=T.createStream(34962,ka),Pb=Ob.dtype):(Ob=T.getBuffer(ka))?Pb=Ob.dtype:"constant"in ka?(jb=2,"number"===typeof ka.constant?(Va=ka.constant,Vb=Bb=rb=0):(Va=0<ka.constant.length?ka.constant[0]:0,Vb=1<ka.constant.length?ka.constant[1]:0,Bb=2<ka.constant.length?ka.constant[2]:
0,rb=3<ka.constant.length?ka.constant[3]:0)):(Ob=N(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),Pb="type"in ka?Aa[ka.type]:Ob.dtype,Hb=!!ka.normalized,zb=ka.size|0,Eb=ka.offset|0,$b=ka.stride|0,lb=ka.divisor|0);jc=I.location;kb=V[jc];if(1===jb){kb.buffer||O.enableVertexAttribArray(jc);qb=zb||1;if(kb.type!==Pb||kb.size!==qb||kb.buffer!==Ob||kb.normalized!==Hb||kb.offset!==Eb||kb.stride!==$b)O.bindBuffer(34962,Ob.buffer),O.vertexAttribPointer(jc,qb,Pb,Hb,$b,Eb),kb.type=Pb,kb.size=
qb,kb.buffer=Ob,kb.normalized=Hb,kb.offset=Eb,kb.stride=$b;kb.divisor!==lb&&(z.vertexAttribDivisorANGLE(jc,lb),kb.divisor=lb)}else if(kb.buffer&&(O.disableVertexAttribArray(jc),kb.buffer=null),kb.x!==Va||kb.y!==Vb||kb.z!==Bb||kb.w!==rb)O.vertexAttrib4f(jc,Va,Vb,Bb,rb),kb.x=Va,kb.y=Vb,kb.z=Bb,kb.w=rb;Ja=this.charBuffer;tb=!1;Ma=null;fb=0;ib=!1;mb=Pa=0;Ya=1;wb=0;ub=5126;Kb=Ta=Dc=Ra=0;N(Ja)?(tb=!0,Ma=T.createStream(34962,Ja),ub=Ma.dtype):(Ma=T.getBuffer(Ja))?ub=Ma.dtype:"constant"in Ja?(Ya=2,"number"===
typeof Ja.constant?(Dc=Ja.constant,Ta=Kb=Ra=0):(Dc=0<Ja.constant.length?Ja.constant[0]:0,Ta=1<Ja.constant.length?Ja.constant[1]:0,Kb=2<Ja.constant.length?Ja.constant[2]:0,Ra=3<Ja.constant.length?Ja.constant[3]:0)):(Ma=N(Ja.buffer)?T.createStream(34962,Ja.buffer):T.getBuffer(Ja.buffer),ub="type"in Ja?Aa[Ja.type]:Ma.dtype,ib=!!Ja.normalized,mb=Ja.size|0,Pa=Ja.offset|0,wb=Ja.stride|0,fb=Ja.divisor|0);Fb=ia.location;Na=V[Fb];if(1===Ya){Na.buffer||O.enableVertexAttribArray(Fb);zd=mb||1;if(Na.type!==ub||
Na.size!==zd||Na.buffer!==Ma||Na.normalized!==ib||Na.offset!==Pa||Na.stride!==wb)O.bindBuffer(34962,Ma.buffer),O.vertexAttribPointer(Fb,zd,ub,ib,wb,Pa),Na.type=ub,Na.size=zd,Na.buffer=Ma,Na.normalized=ib,Na.offset=Pa,Na.stride=wb;Na.divisor!==fb&&(z.vertexAttribDivisorANGLE(Fb,fb),Na.divisor=fb)}else if(Na.buffer&&(O.disableVertexAttribArray(Fb),Na.buffer=null),Na.x!==Dc||Na.y!==Ta||Na.z!==Kb||Na.w!==Ra)O.vertexAttrib4f(Fb,Dc,Ta,Kb,Ra),Na.x=Dc,Na.y=Ta,Na.z=Kb,Na.w=Ra;$a=this.position;Lb=!1;Mb=null;
nb=0;Qa=!1;Sa=ac=0;xb=1;yb=0;Ua=5126;wc=Bc=gc=ob=0;N($a)?(Lb=!0,Mb=T.createStream(34962,$a),Ua=Mb.dtype):(Mb=T.getBuffer($a))?Ua=Mb.dtype:"constant"in $a?(xb=2,"number"===typeof $a.constant?(gc=$a.constant,Bc=wc=ob=0):(gc=0<$a.constant.length?$a.constant[0]:0,Bc=1<$a.constant.length?$a.constant[1]:0,wc=2<$a.constant.length?$a.constant[2]:0,ob=3<$a.constant.length?$a.constant[3]:0)):(Mb=N($a.buffer)?T.createStream(34962,$a.buffer):T.getBuffer($a.buffer),Ua="type"in $a?Aa[$a.type]:Mb.dtype,Qa=!!$a.normalized,
Sa=$a.size|0,ac=$a.offset|0,yb=$a.stride|0,nb=$a.divisor|0);cb=Z.location;kc=V[cb];if(1===xb){kc.buffer||O.enableVertexAttribArray(cb);Mc=Sa||2;if(kc.type!==Ua||kc.size!==Mc||kc.buffer!==Mb||kc.normalized!==Qa||kc.offset!==ac||kc.stride!==yb)O.bindBuffer(34962,Mb.buffer),O.vertexAttribPointer(cb,Mc,Ua,Qa,yb,ac),kc.type=Ua,kc.size=Mc,kc.buffer=Mb,kc.normalized=Qa,kc.offset=ac,kc.stride=yb;kc.divisor!==nb&&(z.vertexAttribDivisorANGLE(cb,nb),kc.divisor=nb)}else if(kc.buffer&&(O.disableVertexAttribArray(cb),
kc.buffer=null),kc.x!==gc||kc.y!==Bc||kc.z!==wc||kc.w!==ob)O.vertexAttrib4f(cb,gc,Bc,wc,ob),kc.x=gc,kc.y=Bc,kc.z=wc,kc.w=ob;Za=this.viewportArray;O.uniform4f(W.location,Za[0],Za[1],Za[2],Za[3]);nd=this.scale;O.uniform2f(A.location,nd[0],nd[1]);Cb=this.translate;O.uniform2f(Ba.location,Cb[0],Cb[1]);(ab=S.elements)?O.bindBuffer(34963,ab.buffer.buffer):oa.currentVAO&&(ab=U.getElements(oa.currentVAO.elements))&&O.bindBuffer(34963,ab.buffer.buffer);Xb=S.instances;for(H=0;H<a;++H){g=d[H];var uc,Yb,Qb,Nc,
Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Bd;uc=G.call(this,P,g,H);H&&Yb===uc||(Yb=uc,O.uniform1f(K.location,uc));Qb=E.call(this,P,g,H);H&&Nc===Qb||(Nc=Qb,O.uniform1f(n.location,Qb));Sb=g.align;H&&Od===Sb||(Od=Sb,O.uniform1f(l.location,Sb));Fc=g.baseline;H&&vd===Fc||(vd=Fc,O.uniform1f(F.location,Fc));Qc=g.color;Yc=Qc[0];oc=Qc[1];hc=Qc[2];tc=Qc[3];H&&sd===Yc&&xc===oc&&eb===hc&&Ub===tc||(sd=Yc,xc=oc,eb=hc,Ub=tc,O.uniform4f(D.location,Yc,oc,hc,
tc));Zb=u.call(this,P,g,H);ec=Zb[0];zc=Zb[1];H&&ic===ec&&Cc===zc||(ic=ec,Cc=zc,O.uniform2f(C.location,ec,zc));dd=B.call(this,P,g,H);Tc=dd[0];Vc=dd[1];H&&Uc===Tc&&Zc===Vc||(Uc=Tc,Zc=Vc,O.uniform2f(R.location,Tc,Vc));od=g.positionOffset;ed=od[0];lc=od[1];H&&$c===ed&&dc===lc||($c=ed,dc=lc,O.uniform2f(Q.location,ed,lc));ad=g.opacity;H&&Xc===ad||(Xc=ad,O.uniform1f(t.location,ad));(fd=b.call(this,P,g,H))&&"framebuffer"===fd._reglType&&(fd=fd.color[0]);Ac=fd._texture;O.uniform1i(x.location,Ac.bind());jd=
g.offset;if(Bd=g.count)0<Xb?ab?z.drawElementsInstancedANGLE(0,Bd,ab.type,jd<<(ab.type-5121>>1),Xb):z.drawArraysInstancedANGLE(0,jd,Bd,Xb):0>Xb&&(ab?O.drawElements(0,Bd,ab.type,jd<<(ab.type-5121>>1)):O.drawArrays(0,jd,Bd)),Ac.unbind()}Jc&&T.destroyStream(pc);sc&&T.destroyStream(Ob);tb&&T.destroyStream(Ma);Lb&&T.destroyStream(Mb);M.dirty=!0;oa.setVAO(null);P.viewportWidth=p;P.viewportHeight=m;k&&(r.cpuTime+=performance.now()-w)},draw:function(b){var d,c,a,h,m,w,z,H,g,y,J,B,E,L,G,u,X,pa,ta,ja,la,ya,
Be,Qe,Ue,Id,Ee,te,ie,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb;d=ra.next;d!==ra.cur&&(d?O.bindFramebuffer(36160,d.framebuffer):O.bindFramebuffer(36160,null),ra.cur=d);if(M.dirty){var Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc;Ya=ga.dither;Ya!==M.dither&&(Ya?O.enable(3024):O.disable(3024),
M.dither=Ya);wb=aa[0];ub=aa[1];if(wb!==za[0]||ub!==za[1])O.blendEquationSeparate(wb,ub),za[0]=wb,za[1]=ub;Ra=ga.depth_func;Ra!==M.depth_func&&(O.depthFunc(Ra),M.depth_func=Ra);Dc=Da[0];Ta=Da[1];if(Dc!==sb[0]||Ta!==sb[1])O.depthRange(Dc,Ta),sb[0]=Dc,sb[1]=Ta;Kb=ga.depth_mask;Kb!==M.depth_mask&&(O.depthMask(Kb),M.depth_mask=Kb);Fb=sa[0];Na=sa[1];zd=sa[2];$a=sa[3];if(Fb!==Ga[0]||Na!==Ga[1]||zd!==Ga[2]||$a!==Ga[3])O.colorMask(Fb,Na,zd,$a),Ga[0]=Fb,Ga[1]=Na,Ga[2]=zd,Ga[3]=$a;Lb=ga.cull_enable;Lb!==M.cull_enable&&
(Lb?O.enable(2884):O.disable(2884),M.cull_enable=Lb);Mb=ga.cull_face;Mb!==M.cull_face&&(O.cullFace(Mb),M.cull_face=Mb);nb=ga.frontFace;nb!==M.frontFace&&(O.frontFace(nb),M.frontFace=nb);Qa=ga.lineWidth;Qa!==M.lineWidth&&(O.lineWidth(Qa),M.lineWidth=Qa);ac=ga.polygonOffset_enable;ac!==M.polygonOffset_enable&&(ac?O.enable(32823):O.disable(32823),M.polygonOffset_enable=ac);Sa=Ka[0];xb=Ka[1];if(Sa!==ea[0]||xb!==ea[1])O.polygonOffset(Sa,xb),ea[0]=Sa,ea[1]=xb;yb=ga.sample_alpha;yb!==M.sample_alpha&&(yb?
O.enable(32926):O.disable(32926),M.sample_alpha=yb);Ua=ga.sample_enable;Ua!==M.sample_enable&&(Ua?O.enable(32928):O.disable(32928),M.sample_enable=Ua);ob=ca[0];gc=ca[1];if(ob!==na[0]||gc!==na[1])O.sampleCoverage(ob,gc),na[0]=ob,na[1]=gc;Bc=ga.stencil_mask;Bc!==M.stencil_mask&&(O.stencilMask(Bc),M.stencil_mask=Bc);wc=Oa[0];cb=Oa[1];kc=Oa[2];if(wc!==vb[0]||cb!==vb[1]||kc!==vb[2])O.stencilFunc(wc,cb,kc),vb[0]=wc,vb[1]=cb,vb[2]=kc;Mc=xa[0];Za=xa[1];nd=xa[2];Cb=xa[3];if(Mc!==Fa[0]||Za!==Fa[1]||nd!==Fa[2]||
Cb!==Fa[3])O.stencilOpSeparate(Mc,Za,nd,Cb),Fa[0]=Mc,Fa[1]=Za,Fa[2]=nd,Fa[3]=Cb;ab=ha[0];Xb=ha[1];uc=ha[2];Yb=ha[3];if(ab!==Y[0]||Xb!==Y[1]||uc!==Y[2]||Yb!==Y[3])O.stencilOpSeparate(ab,Xb,uc,Yb),Y[0]=ab,Y[1]=Xb,Y[2]=uc,Y[3]=Yb;Qb=ga.scissor_enable;Qb!==M.scissor_enable&&(Qb?O.enable(3089):O.disable(3089),M.scissor_enable=Qb);Nc=wa[0];Sb=wa[1];Od=wa[2];Fc=wa[3];if(Nc!==Ea[0]||Sb!==Ea[1]||Od!==Ea[2]||Fc!==Ea[3])O.scissor(Nc,Sb,Od,Fc),Ea[0]=Nc,Ea[1]=Sb,Ea[2]=Od,Ea[3]=Fc}c=this.viewport;a=c.x|0;h=c.y|
0;m="width"in c?c.width|0:P.framebufferWidth-a;w="height"in c?c.height|0:P.framebufferHeight-h;z=P.viewportWidth;P.viewportWidth=m;H=P.viewportHeight;P.viewportHeight=w;O.viewport(a,h,m,w);Ca[0]=a;Ca[1]=h;Ca[2]=m;Ca[3]=w;O.blendColor(0,0,0,1);ua[0]=0;ua[1]=0;ua[2]=0;ua[3]=1;O.enable(3042);M.blend_enable=!0;O.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;O.disable(2929);M.depth_enable=!1;O.disable(2960);M.stencil_enable=!1;if(g=M.profile)y=performance.now(),r.count++;O.useProgram(q.program);
J=qa.angle_instanced_arrays;oa.setVAO(null);ba.buffer=this.sizeBuffer;B=!1;E=null;L=0;G=!1;X=u=0;pa=1;ta=0;ja=5126;Qe=Be=ya=la=0;N(ba)?(B=!0,E=T.createStream(34962,ba),ja=E.dtype):(E=T.getBuffer(ba))?ja=E.dtype:"constant"in ba?(pa=2,"number"===typeof ba.constant?(ya=ba.constant,Be=Qe=la=0):(ya=0<ba.constant.length?ba.constant[0]:0,Be=1<ba.constant.length?ba.constant[1]:0,Qe=2<ba.constant.length?ba.constant[2]:0,la=3<ba.constant.length?ba.constant[3]:0)):(E=N(ba.buffer)?T.createStream(34962,ba.buffer):
T.getBuffer(ba.buffer),ja="type"in ba?Aa[ba.type]:E.dtype,G=!!ba.normalized,X=ba.size|0,u=ba.offset|0,ta=ba.stride|0,L=ba.divisor|0);Ue=da.location;Id=V[Ue];if(1===pa){Id.buffer||O.enableVertexAttribArray(Ue);Ee=X||1;if(Id.type!==ja||Id.size!==Ee||Id.buffer!==E||Id.normalized!==G||Id.offset!==u||Id.stride!==ta)O.bindBuffer(34962,E.buffer),O.vertexAttribPointer(Ue,Ee,ja,G,ta,u),Id.type=ja,Id.size=Ee,Id.buffer=E,Id.normalized=G,Id.offset=u,Id.stride=ta;Id.divisor!==L&&(J.vertexAttribDivisorANGLE(Ue,
L),Id.divisor=L)}else if(Id.buffer&&(O.disableVertexAttribArray(Ue),Id.buffer=null),Id.x!==ya||Id.y!==Be||Id.z!==Qe||Id.w!==la)O.vertexAttrib4f(Ue,ya,Be,Qe,la),Id.x=ya,Id.y=Be,Id.z=Qe,Id.w=la;ka.buffer=this.sizeBuffer;te=!1;ie=null;Nd=0;Dd=!1;bd=pd=0;td=1;Oc=0;rd=5126;md=Sc=gd=Hc=0;N(ka)?(te=!0,ie=T.createStream(34962,ka),rd=ie.dtype):(ie=T.getBuffer(ka))?rd=ie.dtype:"constant"in ka?(td=2,"number"===typeof ka.constant?(gd=ka.constant,Sc=md=Hc=0):(gd=0<ka.constant.length?ka.constant[0]:0,Sc=1<ka.constant.length?
ka.constant[1]:0,md=2<ka.constant.length?ka.constant[2]:0,Hc=3<ka.constant.length?ka.constant[3]:0)):(ie=N(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),rd="type"in ka?Aa[ka.type]:ie.dtype,Dd=!!ka.normalized,bd=ka.size|0,pd=ka.offset|0,Oc=ka.stride|0,Nd=ka.divisor|0);Wb=I.location;Gb=V[Wb];if(1===td){Gb.buffer||O.enableVertexAttribArray(Wb);vc=bd||1;if(Gb.type!==rd||Gb.size!==vc||Gb.buffer!==ie||Gb.normalized!==Dd||Gb.offset!==pd||Gb.stride!==Oc)O.bindBuffer(34962,ie.buffer),O.vertexAttribPointer(Wb,
vc,rd,Dd,Oc,pd),Gb.type=rd,Gb.size=vc,Gb.buffer=ie,Gb.normalized=Dd,Gb.offset=pd,Gb.stride=Oc;Gb.divisor!==Nd&&(J.vertexAttribDivisorANGLE(Wb,Nd),Gb.divisor=Nd)}else if(Gb.buffer&&(O.disableVertexAttribArray(Wb),Gb.buffer=null),Gb.x!==gd||Gb.y!==Sc||Gb.z!==md||Gb.w!==Hc)O.vertexAttrib4f(Wb,gd,Sc,md,Hc),Gb.x=gd,Gb.y=Sc,Gb.z=md,Gb.w=Hc;Ab=this.charBuffer;yc=!1;Db=null;Lc=0;mc=!1;hd=Ic=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Jc=0;N(Ab)?(yc=!0,Db=T.createStream(34962,Ab),fc=Db.dtype):(Db=T.getBuffer(Ab))?fc=Db.dtype:
"constant"in Ab?(cd=2,"number"===typeof Ab.constant?(pc=Ab.constant,rc=nc=Jc=0):(pc=0<Ab.constant.length?Ab.constant[0]:0,rc=1<Ab.constant.length?Ab.constant[1]:0,nc=2<Ab.constant.length?Ab.constant[2]:0,Jc=3<Ab.constant.length?Ab.constant[3]:0)):(Db=N(Ab.buffer)?T.createStream(34962,Ab.buffer):T.getBuffer(Ab.buffer),fc="type"in Ab?Aa[Ab.type]:Db.dtype,mc=!!Ab.normalized,hd=Ab.size|0,Ic=Ab.offset|0,Ec=Ab.stride|0,Lc=Ab.divisor|0);qc=ia.location;hb=V[qc];if(1===cd){hb.buffer||O.enableVertexAttribArray(qc);
Pc=hd||1;if(hb.type!==fc||hb.size!==Pc||hb.buffer!==Db||hb.normalized!==mc||hb.offset!==Ic||hb.stride!==Ec)O.bindBuffer(34962,Db.buffer),O.vertexAttribPointer(qc,Pc,fc,mc,Ec,Ic),hb.type=fc,hb.size=Pc,hb.buffer=Db,hb.normalized=mc,hb.offset=Ic,hb.stride=Ec;hb.divisor!==Lc&&(J.vertexAttribDivisorANGLE(qc,Lc),hb.divisor=Lc)}else if(hb.buffer&&(O.disableVertexAttribArray(qc),hb.buffer=null),hb.x!==pc||hb.y!==rc||hb.z!==nc||hb.w!==Jc)O.vertexAttrib4f(qc,pc,rc,nc,Jc),hb.x=pc,hb.y=rc,hb.z=nc,hb.w=Jc;Rb=
this.position;db=!1;Nb=null;bb=0;pb=!1;Kc=Xa=0;Ib=1;Jb=0;sc=5126;Eb=Hb=lb=Ob=0;N(Rb)?(db=!0,Nb=T.createStream(34962,Rb),sc=Nb.dtype):(Nb=T.getBuffer(Rb))?sc=Nb.dtype:"constant"in Rb?(Ib=2,"number"===typeof Rb.constant?(lb=Rb.constant,Hb=Eb=Ob=0):(lb=0<Rb.constant.length?Rb.constant[0]:0,Hb=1<Rb.constant.length?Rb.constant[1]:0,Eb=2<Rb.constant.length?Rb.constant[2]:0,Ob=3<Rb.constant.length?Rb.constant[3]:0)):(Nb=N(Rb.buffer)?T.createStream(34962,Rb.buffer):T.getBuffer(Rb.buffer),sc="type"in Rb?Aa[Rb.type]:
Nb.dtype,pb=!!Rb.normalized,Kc=Rb.size|0,Xa=Rb.offset|0,Jb=Rb.stride|0,bb=Rb.divisor|0);zb=Z.location;jb=V[zb];if(1===Ib){jb.buffer||O.enableVertexAttribArray(zb);$b=Kc||2;if(jb.type!==sc||jb.size!==$b||jb.buffer!==Nb||jb.normalized!==pb||jb.offset!==Xa||jb.stride!==Jb)O.bindBuffer(34962,Nb.buffer),O.vertexAttribPointer(zb,$b,sc,pb,Jb,Xa),jb.type=sc,jb.size=$b,jb.buffer=Nb,jb.normalized=pb,jb.offset=Xa,jb.stride=Jb;jb.divisor!==bb&&(J.vertexAttribDivisorANGLE(zb,bb),jb.divisor=bb)}else if(jb.buffer&&
(O.disableVertexAttribArray(zb),jb.buffer=null),jb.x!==lb||jb.y!==Hb||jb.z!==Eb||jb.w!==Ob)O.vertexAttrib4f(zb,lb,Hb,Eb,Ob),jb.x=lb,jb.y=Hb,jb.z=Eb,jb.w=Ob;Pb=v.call(this,P,b,0);O.uniform1f(K.location,Pb);rb=f.call(this,P,b,0);O.uniform1f(n.location,rb);O.uniform1f(l.location,b.align);O.uniform1f(F.location,b.baseline);Va=this.viewportArray;O.uniform4f(W.location,Va[0],Va[1],Va[2],Va[3]);Vb=b.color;O.uniform4f(D.location,Vb[0],Vb[1],Vb[2],Vb[3]);Bb=e.call(this,P,b,0);O.uniform2f(C.location,Bb[0],
Bb[1]);jc=k.call(this,P,b,0);O.uniform2f(R.location,jc[0],jc[1]);kb=this.scale;O.uniform2f(A.location,kb[0],kb[1]);qb=this.translate;O.uniform2f(Ba.location,qb[0],qb[1]);Ja=b.positionOffset;O.uniform2f(Q.location,Ja[0],Ja[1]);O.uniform1f(t.location,b.opacity);(tb=p.call(this,P,b,0))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);Ma=tb._texture;O.uniform1i(x.location,Ma.bind());(fb=S.elements)?O.bindBuffer(34963,fb.buffer.buffer):oa.currentVAO&&(fb=U.getElements(oa.currentVAO.elements))&&O.bindBuffer(34963,
fb.buffer.buffer);ib=b.offset;if(Pa=b.count)mb=S.instances,0<mb?fb?J.drawElementsInstancedANGLE(0,Pa,fb.type,ib<<(fb.type-5121>>1),mb):J.drawArraysInstancedANGLE(0,ib,Pa,mb):0>mb&&(fb?O.drawElements(0,Pa,fb.type,ib<<(fb.type-5121>>1)):O.drawArrays(0,ib,Pa)),M.dirty=!0,oa.setVAO(null),P.viewportWidth=z,P.viewportHeight=H,g&&(r.cpuTime+=performance.now()-y),B&&T.destroyStream(E),te&&T.destroyStream(ie),yc&&T.destroyStream(Db),db&&T.destroyStream(Nb),Ma.unbind()},scope:function(b,l,n){var a,t,e,q,f,
x,v,p,k,C,R,I,B,F,D,Q,Z,E,L,O,G,ea,ca,K,Y,u,na,Da,V,xa,Fa,ia,aa,U,ta,sb,ha,A,Ga,ua,W,qa,wa,oa,Ca,Wa,da,Ka,ma,ra,sa,za,Ba,Ea,vb,Oa,hb,Pc,Rb,db,Nb,bb,pb,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za,nd,Cb,ab,Xb,uc,Yb,Qb,Nc,Sb,Od,Fc,vd,Qc,Yc,sd,oc,xc,hc,eb,tc,Ub,Zb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd;a=this.viewport;t=a.x|0;e=a.y|0;q="width"in a?a.width|0:P.framebufferWidth-
t;f="height"in a?a.height|0:P.framebufferHeight-e;x=P.viewportWidth;P.viewportWidth=q;v=P.viewportHeight;P.viewportHeight=f;p=pa[0];pa[0]=t;k=pa[1];pa[1]=e;C=pa[2];pa[2]=q;R=pa[3];pa[3]=f;I=ya[0];ya[0]=0;B=ya[1];ya[1]=0;F=ya[2];ya[2]=0;D=ya[3];ya[3]=1;Q=ga.blend_enable;ga.blend_enable=!0;Z=ja[0];ja[0]=770;E=ja[1];ja[1]=771;L=ja[2];ja[2]=773;O=ja[3];ja[3]=1;G=ga.depth_enable;ga.depth_enable=!1;ea=ga.stencil_enable;ga.stencil_enable=!1;if(ca=M.profile)K=performance.now(),r.count++;Y=b.offset;u=S.offset;
S.offset=Y;na=b.count;Da=S.count;S.count=na;V=S.primitive;S.primitive=0;xa=b.align;Fa=la[64];la[64]=xa;ia=g.call(this,P,b,n);aa=la[69];la[69]=ia;U=z.call(this,P,b,n);ta=la[67];la[67]=U;sb=y.call(this,P,b,n);ha=la[66];la[66]=sb;A=b.baseline;Ga=la[65];la[65]=A;ua=m.call(this,P,b,n);W=la[62];la[62]=ua;qa=b.color;wa=la[14];la[14]=qa;oa=c.call(this,P,b,n);Ca=la[63];la[63]=oa;Wa=b.opacity;da=la[10];la[10]=Wa;Ka=b.positionOffset;ma=la[68];la[68]=Ka;ra=this.scale;sa=la[6];la[6]=ra;za=this.translate;Ba=la[8];
la[8]=za;Ea=this.viewportArray;vb=la[3];la[3]=Ea;Oa=this.charBuffer;hb=!1;Pc=null;Rb=0;db=!1;bb=Nb=0;pb=1;Xa=0;Kc=5126;Ob=sc=Jb=Ib=0;N(Oa)?(hb=!0,Pc=T.createStream(34962,Oa),Kc=Pc.dtype):(Pc=T.getBuffer(Oa))?Kc=Pc.dtype:"constant"in Oa?(pb=2,"number"===typeof Oa.constant?(Jb=Oa.constant,sc=Ob=Ib=0):(Jb=0<Oa.constant.length?Oa.constant[0]:0,sc=1<Oa.constant.length?Oa.constant[1]:0,Ob=2<Oa.constant.length?Oa.constant[2]:0,Ib=3<Oa.constant.length?Oa.constant[3]:0)):(Pc=N(Oa.buffer)?T.createStream(34962,
Oa.buffer):T.getBuffer(Oa.buffer),Kc="type"in Oa?Aa[Oa.type]:Pc.dtype,db=!!Oa.normalized,bb=Oa.size|0,Nb=Oa.offset|0,Xa=Oa.stride|0,Rb=Oa.divisor|0);lb=d.buffer;d.buffer=Pc;Hb=d.divisor;d.divisor=Rb;Eb=d.normalized;d.normalized=db;zb=d.offset;d.offset=Nb;jb=d.size;d.size=bb;$b=d.state;d.state=pb;Pb=d.stride;d.stride=Xa;rb=d.type;d.type=Kc;Va=d.w;d.w=Ib;Vb=d.x;d.x=Jb;Bb=d.y;d.y=sc;jc=d.z;d.z=Ob;ka.buffer=this.sizeBuffer;kb=!1;qb=null;Ja=0;tb=!1;fb=Ma=0;ib=1;Pa=0;mb=5126;Ra=ub=wb=Ya=0;N(ka)?(kb=!0,
qb=T.createStream(34962,ka),mb=qb.dtype):(qb=T.getBuffer(ka))?mb=qb.dtype:"constant"in ka?(ib=2,"number"===typeof ka.constant?(wb=ka.constant,ub=Ra=Ya=0):(wb=0<ka.constant.length?ka.constant[0]:0,ub=1<ka.constant.length?ka.constant[1]:0,Ra=2<ka.constant.length?ka.constant[2]:0,Ya=3<ka.constant.length?ka.constant[3]:0)):(qb=N(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),mb="type"in ka?Aa[ka.type]:qb.dtype,tb=!!ka.normalized,fb=ka.size|0,Ma=ka.offset|0,Pa=ka.stride|0,Ja=ka.divisor|
0);Dc=h.buffer;h.buffer=qb;Ta=h.divisor;h.divisor=Ja;Kb=h.normalized;h.normalized=tb;Fb=h.offset;h.offset=Ma;Na=h.size;h.size=fb;zd=h.state;h.state=ib;$a=h.stride;h.stride=Pa;Lb=h.type;h.type=mb;Mb=h.w;h.w=Ya;nb=h.x;h.x=wb;Qa=h.y;h.y=ub;ac=h.z;h.z=Ra;Sa=this.position;xb=!1;yb=null;Ua=0;ob=!1;Bc=gc=0;wc=1;cb=0;kc=5126;Cb=nd=Za=Mc=0;N(Sa)?(xb=!0,yb=T.createStream(34962,Sa),kc=yb.dtype):(yb=T.getBuffer(Sa))?kc=yb.dtype:"constant"in Sa?(wc=2,"number"===typeof Sa.constant?(Za=Sa.constant,nd=Cb=Mc=0):(Za=
0<Sa.constant.length?Sa.constant[0]:0,nd=1<Sa.constant.length?Sa.constant[1]:0,Cb=2<Sa.constant.length?Sa.constant[2]:0,Mc=3<Sa.constant.length?Sa.constant[3]:0)):(yb=N(Sa.buffer)?T.createStream(34962,Sa.buffer):T.getBuffer(Sa.buffer),kc="type"in Sa?Aa[Sa.type]:yb.dtype,ob=!!Sa.normalized,Bc=Sa.size|0,gc=Sa.offset|0,cb=Sa.stride|0,Ua=Sa.divisor|0);ab=H.buffer;H.buffer=yb;Xb=H.divisor;H.divisor=Ua;uc=H.normalized;H.normalized=ob;Yb=H.offset;H.offset=gc;Qb=H.size;H.size=Bc;Nc=H.state;H.state=wc;Sb=
H.stride;H.stride=cb;Od=H.type;H.type=kc;Fc=H.w;H.w=Mc;vd=H.x;H.x=Za;Qc=H.y;H.y=nd;Yc=H.z;H.z=Cb;ba.buffer=this.sizeBuffer;sd=!1;oc=null;xc=0;hc=!1;tc=eb=0;Ub=1;Zb=0;ec=5126;dd=Cc=zc=ic=0;N(ba)?(sd=!0,oc=T.createStream(34962,ba),ec=oc.dtype):(oc=T.getBuffer(ba))?ec=oc.dtype:"constant"in ba?(Ub=2,"number"===typeof ba.constant?(zc=ba.constant,Cc=dd=ic=0):(zc=0<ba.constant.length?ba.constant[0]:0,Cc=1<ba.constant.length?ba.constant[1]:0,dd=2<ba.constant.length?ba.constant[2]:0,ic=3<ba.constant.length?
ba.constant[3]:0)):(oc=N(ba.buffer)?T.createStream(34962,ba.buffer):T.getBuffer(ba.buffer),ec="type"in ba?Aa[ba.type]:oc.dtype,hc=!!ba.normalized,tc=ba.size|0,eb=ba.offset|0,Zb=ba.stride|0,xc=ba.divisor|0);Tc=w.buffer;w.buffer=oc;Uc=w.divisor;w.divisor=xc;Vc=w.normalized;w.normalized=hc;Zc=w.offset;w.offset=eb;od=w.size;w.size=tc;ed=w.state;w.state=Ub;$c=w.stride;w.stride=Zb;lc=w.type;w.type=ec;dc=w.w;w.w=ic;ad=w.x;w.x=zc;Xc=w.y;w.y=Cc;fd=w.z;w.z=dd;Ac=X.vert;X.vert=61;jd=X.frag;X.frag=60;M.dirty=
!0;l(P,b,n);P.viewportWidth=x;P.viewportHeight=v;pa[0]=p;pa[1]=k;pa[2]=C;pa[3]=R;ya[0]=I;ya[1]=B;ya[2]=F;ya[3]=D;ga.blend_enable=Q;ja[0]=Z;ja[1]=E;ja[2]=L;ja[3]=O;ga.depth_enable=G;ga.stencil_enable=ea;ca&&(r.cpuTime+=performance.now()-K);S.offset=u;S.count=Da;S.primitive=V;la[64]=Fa;la[69]=aa;la[67]=ta;la[66]=ha;la[65]=Ga;la[62]=W;la[14]=wa;la[63]=Ca;la[10]=da;la[68]=ma;la[6]=sa;la[8]=Ba;la[3]=vb;hb&&T.destroyStream(Pc);d.buffer=lb;d.divisor=Hb;d.normalized=Eb;d.offset=zb;d.size=jb;d.state=$b;d.stride=
Pb;d.type=rb;d.w=Va;d.x=Vb;d.y=Bb;d.z=jc;kb&&T.destroyStream(qb);h.buffer=Dc;h.divisor=Ta;h.normalized=Kb;h.offset=Fb;h.size=Na;h.state=zd;h.stride=$a;h.type=Lb;h.w=Mb;h.x=nb;h.y=Qa;h.z=ac;xb&&T.destroyStream(yb);H.buffer=ab;H.divisor=Xb;H.normalized=uc;H.offset=Yb;H.size=Qb;H.state=Nc;H.stride=Sb;H.type=Od;H.w=Fc;H.x=vd;H.y=Qc;H.z=Yc;sd&&T.destroyStream(oc);w.buffer=Tc;w.divisor=Uc;w.normalized=Vc;w.offset=Zc;w.size=od;w.state=ed;w.stride=$c;w.type=lc;w.w=dc;w.x=ad;w.y=Xc;w.z=fd;X.vert=Ac;X.frag=
jd;M.dirty=!0}}},$2:function(a,r,q){var v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n;v=a.attributes;f=a.current;e=a.framebuffer;k=a.gl;p=a.next;g=a.vao;z=p.blend_color;y=f.blend_color;m=p.blend_equation;c=f.blend_equation;d=p.blend_func;h=f.blend_func;H=p.colorMask;w=f.colorMask;L=p.depth_range;G=f.depth_range;E=p.polygonOffset_offset;u=f.polygonOffset_offset;B=p.sample_coverage;b=f.sample_coverage;l=p.scissor_box;x=f.scissor_box;R=p.stencil_func;C=f.stencil_func;F=p.stencil_opBack;
ia=f.stencil_opBack;I=p.stencil_opFront;K=f.stencil_opFront;D=p.viewport;n=f.viewport;return{poll:function(){var a,q,v,r,g,J,A,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya;f.dirty=!1;q=p.blend_enable;v=p.cull_enable;r=p.depth_enable;g=p.dither;J=p.polygonOffset_enable;A=p.sample_alpha;V=p.sample_enable;T=p.scissor_enable;P=p.stencil_enable;M=p.cull_face;S=f.cull_face;U=p.depth_func;qa=f.depth_func;ra=p.depth_mask;O=f.depth_mask;N=p.frontFace;ga=f.frontFace;X=p.lineWidth;la=f.lineWidth;oa=p.stencil_mask;ya=
f.stencil_mask;a=e.next;a!==e.cur&&(a?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null),e.cur=a);q!==f.blend_enable&&(q?k.enable(3042):k.disable(3042),f.blend_enable=q);v!==f.cull_enable&&(v?k.enable(2884):k.disable(2884),f.cull_enable=v);r!==f.depth_enable&&(r?k.enable(2929):k.disable(2929),f.depth_enable=r);g!==f.dither&&(g?k.enable(3024):k.disable(3024),f.dither=g);J!==f.polygonOffset_enable&&(J?k.enable(32823):k.disable(32823),f.polygonOffset_enable=J);A!==f.sample_alpha&&(A?
k.enable(32926):k.disable(32926),f.sample_alpha=A);V!==f.sample_enable&&(V?k.enable(32928):k.disable(32928),f.sample_enable=V);T!==f.scissor_enable&&(T?k.enable(3089):k.disable(3089),f.scissor_enable=T);P!==f.stencil_enable&&(P?k.enable(2960):k.disable(2960),f.stencil_enable=P);if(z[0]!==y[0]||z[1]!==y[1]||z[2]!==y[2]||z[3]!==y[3])k.blendColor(z[0],z[1],z[2],z[3]),y[0]=z[0],y[1]=z[1],y[2]=z[2],y[3]=z[3];if(m[0]!==c[0]||m[1]!==c[1])k.blendEquationSeparate(m[0],m[1]),c[0]=m[0],c[1]=m[1];if(d[0]!==h[0]||
d[1]!==h[1]||d[2]!==h[2]||d[3]!==h[3])k.blendFuncSeparate(d[0],d[1],d[2],d[3]),h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3];if(H[0]!==w[0]||H[1]!==w[1]||H[2]!==w[2]||H[3]!==w[3])k.colorMask(H[0],H[1],H[2],H[3]),w[0]=H[0],w[1]=H[1],w[2]=H[2],w[3]=H[3];M!==S&&(k.cullFace(M),f.cull_face=M);U!==qa&&(k.depthFunc(U),f.depth_func=U);ra!==O&&(k.depthMask(ra),f.depth_mask=ra);if(L[0]!==G[0]||L[1]!==G[1])k.depthRange(L[0],L[1]),G[0]=L[0],G[1]=L[1];N!==ga&&(k.frontFace(N),f.frontFace=N);X!==la&&(k.lineWidth(X),f.lineWidth=
X);if(E[0]!==u[0]||E[1]!==u[1])k.polygonOffset(E[0],E[1]),u[0]=E[0],u[1]=E[1];if(B[0]!==b[0]||B[1]!==b[1])k.sampleCoverage(B[0],B[1]),b[0]=B[0],b[1]=B[1];if(l[0]!==x[0]||l[1]!==x[1]||l[2]!==x[2]||l[3]!==x[3])k.scissor(l[0],l[1],l[2],l[3]),x[0]=l[0],x[1]=l[1],x[2]=l[2],x[3]=l[3];if(R[0]!==C[0]||R[1]!==C[1]||R[2]!==C[2])k.stencilFunc(R[0],R[1],R[2]),C[0]=R[0],C[1]=R[1],C[2]=R[2];oa!==ya&&(k.stencilMask(oa),f.stencil_mask=oa);if(F[0]!==ia[0]||F[1]!==ia[1]||F[2]!==ia[2]||F[3]!==ia[3])k.stencilOpSeparate(F[0],
F[1],F[2],F[3]),ia[0]=F[0],ia[1]=F[1],ia[2]=F[2],ia[3]=F[3];if(I[0]!==K[0]||I[1]!==K[1]||I[2]!==K[2]||I[3]!==K[3])k.stencilOpSeparate(I[0],I[1],I[2],I[3]),K[0]=I[0],K[1]=I[1],K[2]=I[2],K[3]=I[3];if(D[0]!==n[0]||D[1]!==n[1]||D[2]!==n[2]||D[3]!==n[3])k.viewport(D[0],D[1],D[2],D[3]),n[0]=D[0],n[1]=D[1],n[2]=D[2],n[3]=D[3]},refresh:function(){var a,q,r,A,Ba,W,da,V,T,P,M,S,U,qa,ra,O;f.dirty=!1;q=p.blend_enable;r=p.cull_enable;A=p.depth_enable;Ba=p.dither;W=p.polygonOffset_enable;da=p.sample_alpha;V=p.sample_enable;
T=p.scissor_enable;P=p.stencil_enable;M=p.cull_face;S=p.depth_func;U=p.depth_mask;qa=p.frontFace;ra=p.lineWidth;O=p.stencil_mask;(a=e.next)?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null);e.cur=a;a=v[0];a.buffer?(k.enableVertexAttribArray(0),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(0),k.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=v[1];a.buffer?(k.enableVertexAttribArray(1),k.bindBuffer(34962,
a.buffer.buffer),k.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(1),k.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=v[2];a.buffer?(k.enableVertexAttribArray(2),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(2),k.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=v[3];a.buffer?(k.enableVertexAttribArray(3),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(3,
a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(3),k.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=v[4];a.buffer?(k.enableVertexAttribArray(4),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(4),k.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=v[5];a.buffer?(k.enableVertexAttribArray(5),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,
a.offset)):(k.disableVertexAttribArray(5),k.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=v[6];a.buffer?(k.enableVertexAttribArray(6),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(6),k.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=v[7];a.buffer?(k.enableVertexAttribArray(7),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(7),
k.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=v[8];a.buffer?(k.enableVertexAttribArray(8),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(8),k.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=v[9];a.buffer?(k.enableVertexAttribArray(9),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(9),k.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=v[10];a.buffer?(k.enableVertexAttribArray(10),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(10),k.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=v[11];a.buffer?(k.enableVertexAttribArray(11),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(11),k.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=
v[12];a.buffer?(k.enableVertexAttribArray(12),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(12),k.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=v[13];a.buffer?(k.enableVertexAttribArray(13),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(13),k.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=v[14];a.buffer?(k.enableVertexAttribArray(14),
k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(14),k.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=v[15];a.buffer?(k.enableVertexAttribArray(15),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(15),k.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);g.currentVAO=null;g.setVAO(g.targetVAO);q?k.enable(3042):k.disable(3042);
f.blend_enable=q;r?k.enable(2884):k.disable(2884);f.cull_enable=r;A?k.enable(2929):k.disable(2929);f.depth_enable=A;Ba?k.enable(3024):k.disable(3024);f.dither=Ba;W?k.enable(32823):k.disable(32823);f.polygonOffset_enable=W;da?k.enable(32926):k.disable(32926);f.sample_alpha=da;V?k.enable(32928):k.disable(32928);f.sample_enable=V;T?k.enable(3089):k.disable(3089);f.scissor_enable=T;P?k.enable(2960):k.disable(2960);f.stencil_enable=P;k.blendColor(z[0],z[1],z[2],z[3]);y[0]=z[0];y[1]=z[1];y[2]=z[2];y[3]=
z[3];k.blendEquationSeparate(m[0],m[1]);c[0]=m[0];c[1]=m[1];k.blendFuncSeparate(d[0],d[1],d[2],d[3]);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];k.colorMask(H[0],H[1],H[2],H[3]);w[0]=H[0];w[1]=H[1];w[2]=H[2];w[3]=H[3];k.cullFace(M);f.cull_face=M;k.depthFunc(S);f.depth_func=S;k.depthMask(U);f.depth_mask=U;k.depthRange(L[0],L[1]);G[0]=L[0];G[1]=L[1];k.frontFace(qa);f.frontFace=qa;k.lineWidth(ra);f.lineWidth=ra;k.polygonOffset(E[0],E[1]);u[0]=E[0];u[1]=E[1];k.sampleCoverage(B[0],B[1]);b[0]=B[0];b[1]=B[1];
k.scissor(l[0],l[1],l[2],l[3]);x[0]=l[0];x[1]=l[1];x[2]=l[2];x[3]=l[3];k.stencilFunc(R[0],R[1],R[2]);C[0]=R[0];C[1]=R[1];C[2]=R[2];k.stencilMask(O);f.stencil_mask=O;k.stencilOpSeparate(F[0],F[1],F[2],F[3]);ia[0]=F[0];ia[1]=F[1];ia[2]=F[2];ia[3]=F[3];k.stencilOpSeparate(I[0],I[1],I[2],I[3]);K[0]=I[0];K[1]=I[1];K[2]=I[2];K[3]=I[3];k.viewport(D[0],D[1],D[2],D[3]);n[0]=D[0];n[1]=D[1];n[2]=D[2];n[3]=D[3]}}},$7:function(a,r,q,v,f,e,k,p){var g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,
W,da,V;g=a.context;z=a.current;y=a.framebuffer;m=a.gl;c=a.next;d=a.shader;h=a.vao;H=c.blend_color;w=z.blend_color;L=c.blend_equation;G=z.blend_equation;E=c.blend_func;u=z.blend_func;B=c.colorMask;b=z.colorMask;l=c.depth_range;x=z.depth_range;R=c.polygonOffset_offset;C=z.polygonOffset_offset;F=c.sample_coverage;ia=z.sample_coverage;I=c.scissor_box;K=z.scissor_box;D=c.stencil_func;n=z.stencil_func;t=c.stencil_opBack;Z=z.stencil_opBack;Q=c.stencil_opFront;A=z.stencil_opFront;Ba=c.viewport;W=z.viewport;
da={};V={};return{draw:function(a){var p,k,I,V,qa,ra,O,N,ga,X;p=a.framebuffer;k=y.getFramebuffer(p);p&&!k&&r.commandRaise(f,q);p=y.next;y.next=k;I=g.framebufferWidth;g.framebufferWidth=k?k.width:g.drawingBufferWidth;V=g.framebufferHeight;g.framebufferHeight=k?k.height:g.drawingBufferHeight;k!==y.cur&&(k?m.bindFramebuffer(36160,k.framebuffer):m.bindFramebuffer(36160,null),y.cur=k);if(z.dirty){k=c.dither;k!==z.dither&&(k?m.enable(3024):m.disable(3024),z.dither=k);k=c.blend_enable;k!==z.blend_enable&&
(k?m.enable(3042):m.disable(3042),z.blend_enable=k);k=H[0];O=H[1];qa=H[2];ra=H[3];if(k!==w[0]||O!==w[1]||qa!==w[2]||ra!==w[3])m.blendColor(k,O,qa,ra),w[0]=k,w[1]=O,w[2]=qa,w[3]=ra;k=L[0];O=L[1];if(k!==G[0]||O!==G[1])m.blendEquationSeparate(k,O),G[0]=k,G[1]=O;k=E[0];O=E[1];qa=E[2];ra=E[3];if(k!==u[0]||O!==u[1]||qa!==u[2]||ra!==u[3])m.blendFuncSeparate(k,O,qa,ra),u[0]=k,u[1]=O,u[2]=qa,u[3]=ra;k=c.depth_enable;k!==z.depth_enable&&(k?m.enable(2929):m.disable(2929),z.depth_enable=k);k=c.depth_func;k!==
z.depth_func&&(m.depthFunc(k),z.depth_func=k);k=l[0];O=l[1];if(k!==x[0]||O!==x[1])m.depthRange(k,O),x[0]=k,x[1]=O;k=c.depth_mask;k!==z.depth_mask&&(m.depthMask(k),z.depth_mask=k);k=B[0];O=B[1];qa=B[2];ra=B[3];if(k!==b[0]||O!==b[1]||qa!==b[2]||ra!==b[3])m.colorMask(k,O,qa,ra),b[0]=k,b[1]=O,b[2]=qa,b[3]=ra;k=c.cull_enable;k!==z.cull_enable&&(k?m.enable(2884):m.disable(2884),z.cull_enable=k);k=c.cull_face;k!==z.cull_face&&(m.cullFace(k),z.cull_face=k);k=c.frontFace;k!==z.frontFace&&(m.frontFace(k),z.frontFace=
k);k=c.lineWidth;k!==z.lineWidth&&(m.lineWidth(k),z.lineWidth=k);k=c.polygonOffset_enable;k!==z.polygonOffset_enable&&(k?m.enable(32823):m.disable(32823),z.polygonOffset_enable=k);k=R[0];O=R[1];if(k!==C[0]||O!==C[1])m.polygonOffset(k,O),C[0]=k,C[1]=O;k=c.sample_alpha;k!==z.sample_alpha&&(k?m.enable(32926):m.disable(32926),z.sample_alpha=k);k=c.sample_enable;k!==z.sample_enable&&(k?m.enable(32928):m.disable(32928),z.sample_enable=k);k=F[0];O=F[1];if(k!==ia[0]||O!==ia[1])m.sampleCoverage(k,O),ia[0]=
k,ia[1]=O;k=c.stencil_enable;k!==z.stencil_enable&&(k?m.enable(2960):m.disable(2960),z.stencil_enable=k);k=c.stencil_mask;k!==z.stencil_mask&&(m.stencilMask(k),z.stencil_mask=k);k=D[0];O=D[1];qa=D[2];if(k!==n[0]||O!==n[1]||qa!==n[2])m.stencilFunc(k,O,qa),n[0]=k,n[1]=O,n[2]=qa;k=Q[0];O=Q[1];qa=Q[2];ra=Q[3];if(k!==A[0]||O!==A[1]||qa!==A[2]||ra!==A[3])m.stencilOpSeparate(k,O,qa,ra),A[0]=k,A[1]=O,A[2]=qa,A[3]=ra;k=t[0];O=t[1];qa=t[2];ra=t[3];if(k!==Z[0]||O!==Z[1]||qa!==Z[2]||ra!==Z[3])m.stencilOpSeparate(k,
O,qa,ra),Z[0]=k,Z[1]=O,Z[2]=qa,Z[3]=ra;k=c.scissor_enable;k!==z.scissor_enable&&(k?m.enable(3089):m.disable(3089),z.scissor_enable=k)}qa=g.framebufferWidth;ra=g.framebufferHeight;k=g.viewportWidth;g.viewportWidth=qa;O=g.viewportHeight;g.viewportHeight=ra;m.viewport(0,0,qa,ra);W[0]=0;W[1]=0;W[2]=qa;W[3]=ra;qa=g.framebufferWidth;ra=g.framebufferHeight;m.scissor(0,0,qa,ra);K[0]=0;K[1]=0;K[2]=qa;K[3]=ra;if(qa=z.profile)N=performance.now(),v.count++;ra=d.program(d.vert,d.frag,q);m.useProgram(ra.program);
h.setVAO(null);ga=ra.id;(X=da[ga])||(X=da[ga]=e(ra));X.call(this,a);z.dirty=!0;h.setVAO(null);y.next=p;g.framebufferWidth=I;g.framebufferHeight=V;g.viewportWidth=k;g.viewportHeight=O;qa&&(v.cpuTime+=performance.now()-N)},scope:function(b,l,n){var a,d,c,e,t,h,f,x,p,m,w,H,C,R,B;a=b.framebuffer;d=y.getFramebuffer(a);a&&!d&&r.commandRaise(k,q);a=y.next;y.next=d;c=g.framebufferWidth;g.framebufferWidth=d?d.width:g.drawingBufferWidth;e=g.framebufferHeight;g.framebufferHeight=d?d.height:g.drawingBufferHeight;
t=g.framebufferWidth;h=g.framebufferHeight;d=g.viewportWidth;g.viewportWidth=t;f=g.viewportHeight;g.viewportHeight=h;x=Ba[0];Ba[0]=0;p=Ba[1];Ba[1]=0;m=Ba[2];Ba[2]=t;t=Ba[3];Ba[3]=h;w=g.framebufferWidth;H=g.framebufferHeight;h=I[0];I[0]=0;C=I[1];I[1]=0;R=I[2];I[2]=w;w=I[3];I[3]=H;if(H=z.profile)B=performance.now(),v.count++;z.dirty=!0;l(g,b,n);y.next=a;g.framebufferWidth=c;g.framebufferHeight=e;g.viewportWidth=d;g.viewportHeight=f;Ba[0]=x;Ba[1]=p;Ba[2]=m;Ba[3]=t;I[0]=h;I[1]=C;I[2]=R;I[3]=w;H&&(v.cpuTime+=
performance.now()-B);z.dirty=!0},batch:function(a,e){var f,k,r,g,y;if(z.dirty){f=c.dither;f!==z.dither&&(f?m.enable(3024):m.disable(3024),z.dither=f);f=c.blend_enable;f!==z.blend_enable&&(f?m.enable(3042):m.disable(3042),z.blend_enable=f);f=H[0];r=H[1];g=H[2];y=H[3];if(f!==w[0]||r!==w[1]||g!==w[2]||y!==w[3])m.blendColor(f,r,g,y),w[0]=f,w[1]=r,w[2]=g,w[3]=y;f=L[0];r=L[1];if(f!==G[0]||r!==G[1])m.blendEquationSeparate(f,r),G[0]=f,G[1]=r;f=E[0];r=E[1];g=E[2];y=E[3];if(f!==u[0]||r!==u[1]||g!==u[2]||y!==
u[3])m.blendFuncSeparate(f,r,g,y),u[0]=f,u[1]=r,u[2]=g,u[3]=y;f=c.depth_enable;f!==z.depth_enable&&(f?m.enable(2929):m.disable(2929),z.depth_enable=f);f=c.depth_func;f!==z.depth_func&&(m.depthFunc(f),z.depth_func=f);f=l[0];r=l[1];if(f!==x[0]||r!==x[1])m.depthRange(f,r),x[0]=f,x[1]=r;f=c.depth_mask;f!==z.depth_mask&&(m.depthMask(f),z.depth_mask=f);f=B[0];r=B[1];g=B[2];y=B[3];if(f!==b[0]||r!==b[1]||g!==b[2]||y!==b[3])m.colorMask(f,r,g,y),b[0]=f,b[1]=r,b[2]=g,b[3]=y;f=c.cull_enable;f!==z.cull_enable&&
(f?m.enable(2884):m.disable(2884),z.cull_enable=f);f=c.cull_face;f!==z.cull_face&&(m.cullFace(f),z.cull_face=f);f=c.frontFace;f!==z.frontFace&&(m.frontFace(f),z.frontFace=f);f=c.lineWidth;f!==z.lineWidth&&(m.lineWidth(f),z.lineWidth=f);f=c.polygonOffset_enable;f!==z.polygonOffset_enable&&(f?m.enable(32823):m.disable(32823),z.polygonOffset_enable=f);f=R[0];r=R[1];if(f!==C[0]||r!==C[1])m.polygonOffset(f,r),C[0]=f,C[1]=r;f=c.sample_alpha;f!==z.sample_alpha&&(f?m.enable(32926):m.disable(32926),z.sample_alpha=
f);f=c.sample_enable;f!==z.sample_enable&&(f?m.enable(32928):m.disable(32928),z.sample_enable=f);f=F[0];r=F[1];if(f!==ia[0]||r!==ia[1])m.sampleCoverage(f,r),ia[0]=f,ia[1]=r;f=c.stencil_enable;f!==z.stencil_enable&&(f?m.enable(2960):m.disable(2960),z.stencil_enable=f);f=c.stencil_mask;f!==z.stencil_mask&&(m.stencilMask(f),z.stencil_mask=f);f=D[0];r=D[1];g=D[2];if(f!==n[0]||r!==n[1]||g!==n[2])m.stencilFunc(f,r,g),n[0]=f,n[1]=r,n[2]=g;f=Q[0];r=Q[1];g=Q[2];y=Q[3];if(f!==A[0]||r!==A[1]||g!==A[2]||y!==
A[3])m.stencilOpSeparate(f,r,g,y),A[0]=f,A[1]=r,A[2]=g,A[3]=y;f=t[0];r=t[1];g=t[2];y=t[3];if(f!==Z[0]||r!==Z[1]||g!==Z[2]||y!==Z[3])m.stencilOpSeparate(f,r,g,y),Z[0]=f,Z[1]=r,Z[2]=g,Z[3]=y;f=c.scissor_enable;f!==z.scissor_enable&&(f?m.enable(3089):m.disable(3089),z.scissor_enable=f)}if(f=z.profile)k=performance.now(),v.count+=e;r=d.program(d.vert,d.frag,q);m.useProgram(r.program);h.setVAO(null);g=r.id;(y=V[g])||(y=V[g]=p(r));y.call(this,a,e);z.dirty=!0;h.setVAO(null);f&&(v.cpuTime+=performance.now()-
k)}}},$5:function(a,r,q,v,f,e){var k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W;k=a.context;p=a.current;g=a.framebuffer;z=a.gl;y=a.next;m=a.shader;c=a.vao;d=y.blend_color;h=p.blend_color;H=y.blend_equation;w=p.blend_equation;L=y.blend_func;G=p.blend_func;E=y.colorMask;u=p.colorMask;B=y.depth_range;b=p.depth_range;l=y.polygonOffset_offset;x=p.polygonOffset_offset;R=y.sample_coverage;C=p.sample_coverage;F=y.scissor_box;ia=p.scissor_box;I=y.stencil_func;K=p.stencil_func;D=y.stencil_opBack;
n=p.stencil_opBack;t=y.stencil_opFront;Z=p.stencil_opFront;Q=y.viewport;A=p.viewport;Ba={};W={};return{draw:function(a){var e,k,r,M,S;e=g.next;e!==g.cur&&(e?z.bindFramebuffer(36160,e.framebuffer):z.bindFramebuffer(36160,null),g.cur=e);if(p.dirty){e=y.dither;e!==p.dither&&(e?z.enable(3024):z.disable(3024),p.dither=e);e=y.blend_enable;e!==p.blend_enable&&(e?z.enable(3042):z.disable(3042),p.blend_enable=e);e=d[0];r=d[1];M=d[2];S=d[3];if(e!==h[0]||r!==h[1]||M!==h[2]||S!==h[3])z.blendColor(e,r,M,S),h[0]=
e,h[1]=r,h[2]=M,h[3]=S;e=H[0];r=H[1];if(e!==w[0]||r!==w[1])z.blendEquationSeparate(e,r),w[0]=e,w[1]=r;e=L[0];r=L[1];M=L[2];S=L[3];if(e!==G[0]||r!==G[1]||M!==G[2]||S!==G[3])z.blendFuncSeparate(e,r,M,S),G[0]=e,G[1]=r,G[2]=M,G[3]=S;e=y.depth_enable;e!==p.depth_enable&&(e?z.enable(2929):z.disable(2929),p.depth_enable=e);e=y.depth_func;e!==p.depth_func&&(z.depthFunc(e),p.depth_func=e);e=B[0];r=B[1];if(e!==b[0]||r!==b[1])z.depthRange(e,r),b[0]=e,b[1]=r;e=y.depth_mask;e!==p.depth_mask&&(z.depthMask(e),p.depth_mask=
e);e=E[0];r=E[1];M=E[2];S=E[3];if(e!==u[0]||r!==u[1]||M!==u[2]||S!==u[3])z.colorMask(e,r,M,S),u[0]=e,u[1]=r,u[2]=M,u[3]=S;e=y.cull_enable;e!==p.cull_enable&&(e?z.enable(2884):z.disable(2884),p.cull_enable=e);e=y.cull_face;e!==p.cull_face&&(z.cullFace(e),p.cull_face=e);e=y.frontFace;e!==p.frontFace&&(z.frontFace(e),p.frontFace=e);e=y.lineWidth;e!==p.lineWidth&&(z.lineWidth(e),p.lineWidth=e);e=y.polygonOffset_enable;e!==p.polygonOffset_enable&&(e?z.enable(32823):z.disable(32823),p.polygonOffset_enable=
e);e=l[0];r=l[1];if(e!==x[0]||r!==x[1])z.polygonOffset(e,r),x[0]=e,x[1]=r;e=y.sample_alpha;e!==p.sample_alpha&&(e?z.enable(32926):z.disable(32926),p.sample_alpha=e);e=y.sample_enable;e!==p.sample_enable&&(e?z.enable(32928):z.disable(32928),p.sample_enable=e);e=R[0];r=R[1];if(e!==C[0]||r!==C[1])z.sampleCoverage(e,r),C[0]=e,C[1]=r;e=y.stencil_enable;e!==p.stencil_enable&&(e?z.enable(2960):z.disable(2960),p.stencil_enable=e);e=y.stencil_mask;e!==p.stencil_mask&&(z.stencilMask(e),p.stencil_mask=e);e=
I[0];r=I[1];M=I[2];if(e!==K[0]||r!==K[1]||M!==K[2])z.stencilFunc(e,r,M),K[0]=e,K[1]=r,K[2]=M;e=t[0];r=t[1];M=t[2];S=t[3];if(e!==Z[0]||r!==Z[1]||M!==Z[2]||S!==Z[3])z.stencilOpSeparate(e,r,M,S),Z[0]=e,Z[1]=r,Z[2]=M,Z[3]=S;e=D[0];r=D[1];M=D[2];S=D[3];if(e!==n[0]||r!==n[1]||M!==n[2]||S!==n[3])z.stencilOpSeparate(e,r,M,S),n[0]=e,n[1]=r,n[2]=M,n[3]=S;e=y.scissor_enable;e!==p.scissor_enable&&(e?z.enable(3089):z.disable(3089),p.scissor_enable=e);e=F[0];r=F[1];M=F[2];S=F[3];if(e!==ia[0]||r!==ia[1]||M!==ia[2]||
S!==ia[3])z.scissor(e,r,M,S),ia[0]=e,ia[1]=r,ia[2]=M,ia[3]=S;e=Q[0];r=Q[1];M=Q[2];S=Q[3];if(e!==A[0]||r!==A[1]||M!==A[2]||S!==A[3])z.viewport(e,r,M,S),A[0]=e,A[1]=r,A[2]=M,A[3]=S;p.dirty=!1}if(e=p.profile)k=performance.now(),v.count++;r=m.program(m.vert,m.frag,q);z.useProgram(r.program);c.setVAO(null);M=r.id;(S=Ba[M])||(S=Ba[M]=f(r));S.call(this,a);c.setVAO(null);e&&(v.cpuTime+=performance.now()-k)},scope:function(b,l,n){var a,d;if(a=p.profile)d=performance.now(),v.count++;l(k,b,n);a&&(v.cpuTime+=
performance.now()-d)},batch:function(a,f){var k,r,M,S,U;k=g.next;k!==g.cur&&(k?z.bindFramebuffer(36160,k.framebuffer):z.bindFramebuffer(36160,null),g.cur=k);if(p.dirty){k=y.dither;k!==p.dither&&(k?z.enable(3024):z.disable(3024),p.dither=k);k=y.blend_enable;k!==p.blend_enable&&(k?z.enable(3042):z.disable(3042),p.blend_enable=k);k=d[0];M=d[1];S=d[2];U=d[3];if(k!==h[0]||M!==h[1]||S!==h[2]||U!==h[3])z.blendColor(k,M,S,U),h[0]=k,h[1]=M,h[2]=S,h[3]=U;k=H[0];M=H[1];if(k!==w[0]||M!==w[1])z.blendEquationSeparate(k,
M),w[0]=k,w[1]=M;k=L[0];M=L[1];S=L[2];U=L[3];if(k!==G[0]||M!==G[1]||S!==G[2]||U!==G[3])z.blendFuncSeparate(k,M,S,U),G[0]=k,G[1]=M,G[2]=S,G[3]=U;k=y.depth_enable;k!==p.depth_enable&&(k?z.enable(2929):z.disable(2929),p.depth_enable=k);k=y.depth_func;k!==p.depth_func&&(z.depthFunc(k),p.depth_func=k);k=B[0];M=B[1];if(k!==b[0]||M!==b[1])z.depthRange(k,M),b[0]=k,b[1]=M;k=y.depth_mask;k!==p.depth_mask&&(z.depthMask(k),p.depth_mask=k);k=E[0];M=E[1];S=E[2];U=E[3];if(k!==u[0]||M!==u[1]||S!==u[2]||U!==u[3])z.colorMask(k,
M,S,U),u[0]=k,u[1]=M,u[2]=S,u[3]=U;k=y.cull_enable;k!==p.cull_enable&&(k?z.enable(2884):z.disable(2884),p.cull_enable=k);k=y.cull_face;k!==p.cull_face&&(z.cullFace(k),p.cull_face=k);k=y.frontFace;k!==p.frontFace&&(z.frontFace(k),p.frontFace=k);k=y.lineWidth;k!==p.lineWidth&&(z.lineWidth(k),p.lineWidth=k);k=y.polygonOffset_enable;k!==p.polygonOffset_enable&&(k?z.enable(32823):z.disable(32823),p.polygonOffset_enable=k);k=l[0];M=l[1];if(k!==x[0]||M!==x[1])z.polygonOffset(k,M),x[0]=k,x[1]=M;k=y.sample_alpha;
k!==p.sample_alpha&&(k?z.enable(32926):z.disable(32926),p.sample_alpha=k);k=y.sample_enable;k!==p.sample_enable&&(k?z.enable(32928):z.disable(32928),p.sample_enable=k);k=R[0];M=R[1];if(k!==C[0]||M!==C[1])z.sampleCoverage(k,M),C[0]=k,C[1]=M;k=y.stencil_enable;k!==p.stencil_enable&&(k?z.enable(2960):z.disable(2960),p.stencil_enable=k);k=y.stencil_mask;k!==p.stencil_mask&&(z.stencilMask(k),p.stencil_mask=k);k=I[0];M=I[1];S=I[2];if(k!==K[0]||M!==K[1]||S!==K[2])z.stencilFunc(k,M,S),K[0]=k,K[1]=M,K[2]=
S;k=t[0];M=t[1];S=t[2];U=t[3];if(k!==Z[0]||M!==Z[1]||S!==Z[2]||U!==Z[3])z.stencilOpSeparate(k,M,S,U),Z[0]=k,Z[1]=M,Z[2]=S,Z[3]=U;k=D[0];M=D[1];S=D[2];U=D[3];if(k!==n[0]||M!==n[1]||S!==n[2]||U!==n[3])z.stencilOpSeparate(k,M,S,U),n[0]=k,n[1]=M,n[2]=S,n[3]=U;k=y.scissor_enable;k!==p.scissor_enable&&(k?z.enable(3089):z.disable(3089),p.scissor_enable=k);k=F[0];M=F[1];S=F[2];U=F[3];if(k!==ia[0]||M!==ia[1]||S!==ia[2]||U!==ia[3])z.scissor(k,M,S,U),ia[0]=k,ia[1]=M,ia[2]=S,ia[3]=U;k=Q[0];M=Q[1];S=Q[2];U=Q[3];
if(k!==A[0]||M!==A[1]||S!==A[2]||U!==A[3])z.viewport(k,M,S,U),A[0]=k,A[1]=M,A[2]=S,A[3]=U;p.dirty=!1}if(k=p.profile)r=performance.now(),v.count+=f;M=m.program(m.vert,m.frag,q);z.useProgram(M.program);c.setVAO(null);S=M.id;(U=W[S])||(U=W[S]=e(M));U.call(this,a,f);c.setVAO(null);k&&(v.cpuTime+=performance.now()-r)}}},"$26,color,freq,phase,projection,time,view":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n){var t,Z,Q,A,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,
ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea,Oa,vb,ha;t=a.attributes;Z=a.context;Q=a.current;A=a.draw;Ba=a.elements;W=a.framebuffer;da=a.gl;V=a.isArrayLike;T=a.next;P=a.shader;M=a.uniforms;S=a.vao;U=T.blend_color;qa=Q.blend_color;ra=T.blend_equation;O=Q.blend_equation;N=T.blend_func;ga=Q.blend_func;X=T.colorMask;la=Q.colorMask;oa=T.depth_range;ya=Q.depth_range;ua=T.polygonOffset_offset;aa=Q.polygonOffset_offset;za=T.sample_coverage;ja=Q.sample_coverage;ma=T.scissor_box;sa=Q.scissor_box;Ga=T.stencil_func;Da=
Q.stencil_func;sb=T.stencil_opBack;Ka=Q.stencil_opBack;ea=T.stencil_opFront;ca=Q.stencil_opFront;na=T.viewport;wa=Q.viewport;Ea=new Float32Array(16);Oa=new Float32Array(16);vb=new Float32Array(16);ha=new Float32Array(16);return{draw:function(b){var l,a,h,x;l=W.next;l!==W.cur&&(l?da.bindFramebuffer(36160,l.framebuffer):da.bindFramebuffer(36160,null),W.cur=l);if(Q.dirty){var w;l=T.dither;l!==Q.dither&&(l?da.enable(3024):da.disable(3024),Q.dither=l);l=T.blend_enable;l!==Q.blend_enable&&(l?da.enable(3042):
da.disable(3042),Q.blend_enable=l);l=U[0];h=U[1];x=U[2];w=U[3];if(l!==qa[0]||h!==qa[1]||x!==qa[2]||w!==qa[3])da.blendColor(l,h,x,w),qa[0]=l,qa[1]=h,qa[2]=x,qa[3]=w;l=ra[0];h=ra[1];if(l!==O[0]||h!==O[1])da.blendEquationSeparate(l,h),O[0]=l,O[1]=h;l=N[0];h=N[1];x=N[2];w=N[3];if(l!==ga[0]||h!==ga[1]||x!==ga[2]||w!==ga[3])da.blendFuncSeparate(l,h,x,w),ga[0]=l,ga[1]=h,ga[2]=x,ga[3]=w;l=T.depth_enable;l!==Q.depth_enable&&(l?da.enable(2929):da.disable(2929),Q.depth_enable=l);l=T.depth_func;l!==Q.depth_func&&
(da.depthFunc(l),Q.depth_func=l);l=oa[0];h=oa[1];if(l!==ya[0]||h!==ya[1])da.depthRange(l,h),ya[0]=l,ya[1]=h;l=T.depth_mask;l!==Q.depth_mask&&(da.depthMask(l),Q.depth_mask=l);l=X[0];h=X[1];x=X[2];w=X[3];if(l!==la[0]||h!==la[1]||x!==la[2]||w!==la[3])da.colorMask(l,h,x,w),la[0]=l,la[1]=h,la[2]=x,la[3]=w;l=T.cull_enable;l!==Q.cull_enable&&(l?da.enable(2884):da.disable(2884),Q.cull_enable=l);l=T.cull_face;l!==Q.cull_face&&(da.cullFace(l),Q.cull_face=l);l=T.frontFace;l!==Q.frontFace&&(da.frontFace(l),Q.frontFace=
l);l=T.lineWidth;l!==Q.lineWidth&&(da.lineWidth(l),Q.lineWidth=l);l=T.polygonOffset_enable;l!==Q.polygonOffset_enable&&(l?da.enable(32823):da.disable(32823),Q.polygonOffset_enable=l);l=ua[0];h=ua[1];if(l!==aa[0]||h!==aa[1])da.polygonOffset(l,h),aa[0]=l,aa[1]=h;l=T.sample_alpha;l!==Q.sample_alpha&&(l?da.enable(32926):da.disable(32926),Q.sample_alpha=l);l=T.sample_enable;l!==Q.sample_enable&&(l?da.enable(32928):da.disable(32928),Q.sample_enable=l);l=za[0];h=za[1];if(l!==ja[0]||h!==ja[1])da.sampleCoverage(l,
h),ja[0]=l,ja[1]=h;l=T.stencil_enable;l!==Q.stencil_enable&&(l?da.enable(2960):da.disable(2960),Q.stencil_enable=l);l=T.stencil_mask;l!==Q.stencil_mask&&(da.stencilMask(l),Q.stencil_mask=l);l=Ga[0];h=Ga[1];x=Ga[2];if(l!==Da[0]||h!==Da[1]||x!==Da[2])da.stencilFunc(l,h,x),Da[0]=l,Da[1]=h,Da[2]=x;l=ea[0];h=ea[1];x=ea[2];w=ea[3];if(l!==ca[0]||h!==ca[1]||x!==ca[2]||w!==ca[3])da.stencilOpSeparate(l,h,x,w),ca[0]=l,ca[1]=h,ca[2]=x,ca[3]=w;l=sb[0];h=sb[1];x=sb[2];w=sb[3];if(l!==Ka[0]||h!==Ka[1]||x!==Ka[2]||
w!==Ka[3])da.stencilOpSeparate(l,h,x,w),Ka[0]=l,Ka[1]=h,Ka[2]=x,Ka[3]=w;l=T.scissor_enable;l!==Q.scissor_enable&&(l?da.enable(3089):da.disable(3089),Q.scissor_enable=l);l=ma[0];h=ma[1];x=ma[2];w=ma[3];if(l!==sa[0]||h!==sa[1]||x!==sa[2]||w!==sa[3])da.scissor(l,h,x,w),sa[0]=l,sa[1]=h,sa[2]=x,sa[3]=w;l=na[0];h=na[1];x=na[2];w=na[3];if(l!==wa[0]||h!==wa[1]||x!==wa[2]||w!==wa[3])da.viewport(l,h,x,w),wa[0]=l,wa[1]=h,wa[2]=x,wa[3]=w;Q.dirty=!1}if(l=Q.profile)a=performance.now(),v.count++;da.useProgram(f.program);
S.setVAO(null);h=ia.location;x=t[h];x.buffer||da.enableVertexAttribArray(h);if(5126!==x.type||4!==x.size||x.buffer!==e||!1!==x.normalized||0!==x.offset||44!==x.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(h,4,5126,!1,44,0),x.type=5126,x.size=4,x.buffer=e,x.normalized=!1,x.offset=0,x.stride=44;h=I.location;x=t[h];x.buffer||da.enableVertexAttribArray(h);if(5126!==x.type||4!==x.size||x.buffer!==k||!1!==x.normalized||16!==x.offset||44!==x.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(h,
4,5126,!1,44,16),x.type=5126,x.size=4,x.buffer=k,x.normalized=!1,x.offset=16,x.stride=44;h=F.location;x=t[h];x.buffer||da.enableVertexAttribArray(h);if(5126!==x.type||3!==x.size||x.buffer!==p||!1!==x.normalized||32!==x.offset||44!==x.stride)da.bindBuffer(34962,p.buffer),da.vertexAttribPointer(h,3,5126,!1,44,32),x.type=5126,x.size=3,x.buffer=p,x.normalized=!1,x.offset=32,x.stride=44;h=g.call(this,Z,b,0);"number"!==typeof h&&r.commandRaise(z,q);da.uniform1f(D.location,h);h=y.call(this,Z,b,0);V(h)&&
16===h.length||r.commandRaise(m,q);da.uniformMatrix4fv(n.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ea[0]=h[0],Ea[1]=h[1],Ea[2]=h[2],Ea[3]=h[3],Ea[4]=h[4],Ea[5]=h[5],Ea[6]=h[6],Ea[7]=h[7],Ea[8]=h[8],Ea[9]=h[9],Ea[10]=h[10],Ea[11]=h[11],Ea[12]=h[12],Ea[13]=h[13],Ea[14]=h[14],Ea[15]=h[15],Ea));b=c.call(this,Z,b,0);V(b)&&16===b.length||r.commandRaise(d,q);da.uniformMatrix4fv(K.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Oa[0]=b[0],Oa[1]=b[1],Oa[2]=b[2],Oa[3]=b[3],Oa[4]=
b[4],Oa[5]=b[5],Oa[6]=b[6],Oa[7]=b[7],Oa[8]=b[8],Oa[9]=b[9],Oa[10]=b[10],Oa[11]=b[11],Oa[12]=b[12],Oa[13]=b[13],Oa[14]=b[14],Oa[15]=b[15],Oa));(b=A.elements)?da.bindBuffer(34963,b.buffer.buffer):S.currentVAO&&(b=Ba.getElements(S.currentVAO.elements))&&da.bindBuffer(34963,b.buffer.buffer);h=A.offset;b?da.drawElements(0,1E4,b.type,h<<(b.type-5121>>1)):da.drawArrays(0,h,1E4);S.setVAO(null);l&&(v.cpuTime+=performance.now()-a)},scope:function(b,l,n){var a,d,c,t,q,f,x,m,r,g,z,C,y,R,I,J,B,F,D,O,u,ea,ca,
K,na,Da,N,X,ia,aa,sb,ha,Ga,S,T,V,U,ta,ga,ua,W,wa,oa,qa,da;if(a=Q.profile)d=performance.now(),v.count++;c=A.count;A.count=1E4;t=A.primitive;A.primitive=0;q=h.call(this,Z,b,n);f=M[5];M[5]=q;x=H.call(this,Z,b,n);q=M[3];M[3]=x;m=w.call(this,Z,b,n);x=M[4];M[4]=m;m=L.buffer;L.buffer=p;r=L.divisor;L.divisor=0;g=L.normalized;L.normalized=!1;z=L.offset;L.offset=32;C=L.size;L.size=0;y=L.state;L.state=1;R=L.stride;L.stride=44;I=L.type;L.type=5126;J=L.w;L.w=0;B=L.x;L.x=0;F=L.y;L.y=0;D=L.z;L.z=0;O=G.buffer;G.buffer=
e;u=G.divisor;G.divisor=0;ea=G.normalized;G.normalized=!1;ca=G.offset;G.offset=0;K=G.size;G.size=0;na=G.state;G.state=1;Da=G.stride;G.stride=44;N=G.type;G.type=5126;X=G.w;G.w=0;ia=G.x;G.x=0;aa=G.y;G.y=0;sb=G.z;G.z=0;ha=E.buffer;E.buffer=k;Ga=E.divisor;E.divisor=0;S=E.normalized;E.normalized=!1;T=E.offset;E.offset=16;V=E.size;E.size=0;U=E.state;E.state=1;ta=E.stride;E.stride=44;ga=E.type;E.type=5126;ua=E.w;E.w=0;W=E.x;E.x=0;wa=E.y;E.y=0;oa=E.z;E.z=0;qa=P.vert;P.vert=2;da=P.frag;P.frag=1;l(Z,b,n);a&&
(v.cpuTime+=performance.now()-d);A.count=c;A.primitive=t;M[5]=f;M[3]=q;M[4]=x;L.buffer=m;L.divisor=r;L.normalized=g;L.offset=z;L.size=C;L.state=y;L.stride=R;L.type=I;L.w=J;L.x=B;L.y=F;L.z=D;G.buffer=O;G.divisor=u;G.normalized=ea;G.offset=ca;G.size=K;G.state=na;G.stride=Da;G.type=N;G.w=X;G.x=ia;G.y=aa;G.z=sb;E.buffer=ha;E.divisor=Ga;E.normalized=S;E.offset=T;E.size=V;E.state=U;E.stride=ta;E.type=ga;E.w=ua;E.x=W;E.y=wa;E.z=oa;P.vert=qa;P.frag=da},batch:function(a,d){var c,h,f;c=W.next;c!==W.cur&&(c?
da.bindFramebuffer(36160,c.framebuffer):da.bindFramebuffer(36160,null),W.cur=c);if(Q.dirty){var m,w,g;c=T.dither;c!==Q.dither&&(c?da.enable(3024):da.disable(3024),Q.dither=c);c=T.blend_enable;c!==Q.blend_enable&&(c?da.enable(3042):da.disable(3042),Q.blend_enable=c);c=U[0];m=U[1];w=U[2];g=U[3];if(c!==qa[0]||m!==qa[1]||w!==qa[2]||g!==qa[3])da.blendColor(c,m,w,g),qa[0]=c,qa[1]=m,qa[2]=w,qa[3]=g;c=ra[0];m=ra[1];if(c!==O[0]||m!==O[1])da.blendEquationSeparate(c,m),O[0]=c,O[1]=m;c=N[0];m=N[1];w=N[2];g=N[3];
if(c!==ga[0]||m!==ga[1]||w!==ga[2]||g!==ga[3])da.blendFuncSeparate(c,m,w,g),ga[0]=c,ga[1]=m,ga[2]=w,ga[3]=g;c=T.depth_enable;c!==Q.depth_enable&&(c?da.enable(2929):da.disable(2929),Q.depth_enable=c);c=T.depth_func;c!==Q.depth_func&&(da.depthFunc(c),Q.depth_func=c);c=oa[0];m=oa[1];if(c!==ya[0]||m!==ya[1])da.depthRange(c,m),ya[0]=c,ya[1]=m;c=T.depth_mask;c!==Q.depth_mask&&(da.depthMask(c),Q.depth_mask=c);c=X[0];m=X[1];w=X[2];g=X[3];if(c!==la[0]||m!==la[1]||w!==la[2]||g!==la[3])da.colorMask(c,m,w,g),
la[0]=c,la[1]=m,la[2]=w,la[3]=g;c=T.cull_enable;c!==Q.cull_enable&&(c?da.enable(2884):da.disable(2884),Q.cull_enable=c);c=T.cull_face;c!==Q.cull_face&&(da.cullFace(c),Q.cull_face=c);c=T.frontFace;c!==Q.frontFace&&(da.frontFace(c),Q.frontFace=c);c=T.lineWidth;c!==Q.lineWidth&&(da.lineWidth(c),Q.lineWidth=c);c=T.polygonOffset_enable;c!==Q.polygonOffset_enable&&(c?da.enable(32823):da.disable(32823),Q.polygonOffset_enable=c);c=ua[0];m=ua[1];if(c!==aa[0]||m!==aa[1])da.polygonOffset(c,m),aa[0]=c,aa[1]=
m;c=T.sample_alpha;c!==Q.sample_alpha&&(c?da.enable(32926):da.disable(32926),Q.sample_alpha=c);c=T.sample_enable;c!==Q.sample_enable&&(c?da.enable(32928):da.disable(32928),Q.sample_enable=c);c=za[0];m=za[1];if(c!==ja[0]||m!==ja[1])da.sampleCoverage(c,m),ja[0]=c,ja[1]=m;c=T.stencil_enable;c!==Q.stencil_enable&&(c?da.enable(2960):da.disable(2960),Q.stencil_enable=c);c=T.stencil_mask;c!==Q.stencil_mask&&(da.stencilMask(c),Q.stencil_mask=c);c=Ga[0];m=Ga[1];w=Ga[2];if(c!==Da[0]||m!==Da[1]||w!==Da[2])da.stencilFunc(c,
m,w),Da[0]=c,Da[1]=m,Da[2]=w;c=ea[0];m=ea[1];w=ea[2];g=ea[3];if(c!==ca[0]||m!==ca[1]||w!==ca[2]||g!==ca[3])da.stencilOpSeparate(c,m,w,g),ca[0]=c,ca[1]=m,ca[2]=w,ca[3]=g;c=sb[0];m=sb[1];w=sb[2];g=sb[3];if(c!==Ka[0]||m!==Ka[1]||w!==Ka[2]||g!==Ka[3])da.stencilOpSeparate(c,m,w,g),Ka[0]=c,Ka[1]=m,Ka[2]=w,Ka[3]=g;c=T.scissor_enable;c!==Q.scissor_enable&&(c?da.enable(3089):da.disable(3089),Q.scissor_enable=c);c=ma[0];m=ma[1];w=ma[2];g=ma[3];if(c!==sa[0]||m!==sa[1]||w!==sa[2]||g!==sa[3])da.scissor(c,m,w,
g),sa[0]=c,sa[1]=m,sa[2]=w,sa[3]=g;c=na[0];m=na[1];w=na[2];g=na[3];if(c!==wa[0]||m!==wa[1]||w!==wa[2]||g!==wa[3])da.viewport(c,m,w,g),wa[0]=c,wa[1]=m,wa[2]=w,wa[3]=g;Q.dirty=!1}if(c=Q.profile)h=performance.now(),v.count+=d;da.useProgram(u.program);S.setVAO(null);m=ia.location;w=t[m];w.buffer||da.enableVertexAttribArray(m);if(5126!==w.type||4!==w.size||w.buffer!==e||!1!==w.normalized||0!==w.offset||44!==w.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(m,4,5126,!1,44,0),w.type=5126,w.size=
4,w.buffer=e,w.normalized=!1,w.offset=0,w.stride=44;m=I.location;w=t[m];w.buffer||da.enableVertexAttribArray(m);if(5126!==w.type||4!==w.size||w.buffer!==k||!1!==w.normalized||16!==w.offset||44!==w.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(m,4,5126,!1,44,16),w.type=5126,w.size=4,w.buffer=k,w.normalized=!1,w.offset=16,w.stride=44;m=F.location;w=t[m];w.buffer||da.enableVertexAttribArray(m);if(5126!==w.type||3!==w.size||w.buffer!==p||!1!==w.normalized||32!==w.offset||44!==w.stride)da.bindBuffer(34962,
p.buffer),da.vertexAttribPointer(m,3,5126,!1,44,32),w.type=5126,w.size=3,w.buffer=p,w.normalized=!1,w.offset=32,w.stride=44;m=B.call(this,Z,void 0,f);"number"!==typeof m&&r.commandRaise(b,q);da.uniform1f(D.location,m);m=l.call(this,Z,void 0,f);V(m)&&16===m.length||r.commandRaise(x,q);da.uniformMatrix4fv(n.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(vb[0]=m[0],vb[1]=m[1],vb[2]=m[2],vb[3]=m[3],vb[4]=m[4],vb[5]=m[5],vb[6]=m[6],vb[7]=m[7],vb[8]=m[8],vb[9]=m[9],vb[10]=m[10],vb[11]=m[11],
vb[12]=m[12],vb[13]=m[13],vb[14]=m[14],vb[15]=m[15],vb));f=R.call(this,Z,void 0,f);V(f)&&16===f.length||r.commandRaise(C,q);da.uniformMatrix4fv(K.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ha[0]=f[0],ha[1]=f[1],ha[2]=f[2],ha[3]=f[3],ha[4]=f[4],ha[5]=f[5],ha[6]=f[6],ha[7]=f[7],ha[8]=f[8],ha[9]=f[9],ha[10]=f[10],ha[11]=f[11],ha[12]=f[12],ha[13]=f[13],ha[14]=f[14],ha[15]=f[15],ha));(m=A.elements)?da.bindBuffer(34963,m.buffer.buffer):S.currentVAO&&(m=Ba.getElements(S.currentVAO.elements))&&
da.bindBuffer(34963,m.buffer.buffer);w=A.offset;for(f=0;f<d;++f)m?da.drawElements(0,1E4,m.type,w<<(m.type-5121>>1)):da.drawArrays(0,w,1E4);S.setVAO(null);c&&(v.cpuTime+=performance.now()-h)}}},"$34,atlas,normal,position,projection,uv,view":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W,da,V){var T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea,Oa,vb,ha,Y,xa,Fa,pa,Ca,Aa,ka,ba,va,La,Ha;T=a.attributes;P=a.buffer;M=a.context;S=a.current;
U=a.draw;qa=a.elements;ra=a.framebuffer;O=a.gl;N=a.isArrayLike;ga=a.isBufferArgs;X=a.next;la=a.shader;oa=a.uniforms;ya=a.vao;ua=X.blend_color;aa=S.blend_color;za=X.blend_equation;ja=S.blend_equation;ma=X.blend_func;sa=S.blend_func;Ga=X.colorMask;Da=S.colorMask;sb=X.depth_range;Ka=S.depth_range;ea=X.polygonOffset_offset;ca=S.polygonOffset_offset;na=X.sample_coverage;wa=S.sample_coverage;Ea=X.scissor_box;Oa=S.scissor_box;vb=X.stencil_func;ha=S.stencil_func;Y=X.stencil_opBack;xa=S.stencil_opBack;Fa=
X.stencil_opFront;pa=S.stencil_opFront;Ca=X.viewport;Aa=S.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ba=new Float32Array(16);va=new Float32Array(16);La=new Float32Array(16);Ha=new Float32Array(16);return{draw:function(b){var l,n,a,t,x,w,H,C,R,I,B,F,D,Z,E,L,G,u,K,ia,U,ta,oa,la,Ha,La,Nd,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb,bb,pb;l=M.view;n=f.call(this,M,b,0);M.view=n;a=ra.next;
a!==ra.cur&&(a?O.bindFramebuffer(36160,a.framebuffer):O.bindFramebuffer(36160,null),ra.cur=a);if(S.dirty){var Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb;Xa=X.dither;Xa!==S.dither&&(Xa?O.enable(3024):O.disable(3024),S.dither=Xa);Kc=X.blend_enable;Kc!==S.blend_enable&&(Kc?O.enable(3042):O.disable(3042),S.blend_enable=Kc);Ib=ua[0];Jb=ua[1];sc=ua[2];Ob=ua[3];if(Ib!==aa[0]||Jb!==aa[1]||sc!==
aa[2]||Ob!==aa[3])O.blendColor(Ib,Jb,sc,Ob),aa[0]=Ib,aa[1]=Jb,aa[2]=sc,aa[3]=Ob;lb=za[0];Hb=za[1];if(lb!==ja[0]||Hb!==ja[1])O.blendEquationSeparate(lb,Hb),ja[0]=lb,ja[1]=Hb;Eb=ma[0];zb=ma[1];jb=ma[2];$b=ma[3];if(Eb!==sa[0]||zb!==sa[1]||jb!==sa[2]||$b!==sa[3])O.blendFuncSeparate(Eb,zb,jb,$b),sa[0]=Eb,sa[1]=zb,sa[2]=jb,sa[3]=$b;Pb=X.depth_enable;Pb!==S.depth_enable&&(Pb?O.enable(2929):O.disable(2929),S.depth_enable=Pb);rb=X.depth_func;rb!==S.depth_func&&(O.depthFunc(rb),S.depth_func=rb);Va=sb[0];Vb=
sb[1];if(Va!==Ka[0]||Vb!==Ka[1])O.depthRange(Va,Vb),Ka[0]=Va,Ka[1]=Vb;Bb=X.depth_mask;Bb!==S.depth_mask&&(O.depthMask(Bb),S.depth_mask=Bb);jc=Ga[0];kb=Ga[1];qb=Ga[2];Ja=Ga[3];if(jc!==Da[0]||kb!==Da[1]||qb!==Da[2]||Ja!==Da[3])O.colorMask(jc,kb,qb,Ja),Da[0]=jc,Da[1]=kb,Da[2]=qb,Da[3]=Ja;tb=X.frontFace;tb!==S.frontFace&&(O.frontFace(tb),S.frontFace=tb);Ma=X.lineWidth;Ma!==S.lineWidth&&(O.lineWidth(Ma),S.lineWidth=Ma);fb=X.polygonOffset_enable;fb!==S.polygonOffset_enable&&(fb?O.enable(32823):O.disable(32823),
S.polygonOffset_enable=fb);ib=ea[0];Pa=ea[1];if(ib!==ca[0]||Pa!==ca[1])O.polygonOffset(ib,Pa),ca[0]=ib,ca[1]=Pa;mb=X.sample_alpha;mb!==S.sample_alpha&&(mb?O.enable(32926):O.disable(32926),S.sample_alpha=mb);Ya=X.sample_enable;Ya!==S.sample_enable&&(Ya?O.enable(32928):O.disable(32928),S.sample_enable=Ya);wb=na[0];ub=na[1];if(wb!==wa[0]||ub!==wa[1])O.sampleCoverage(wb,ub),wa[0]=wb,wa[1]=ub;Ra=X.stencil_enable;Ra!==S.stencil_enable&&(Ra?O.enable(2960):O.disable(2960),S.stencil_enable=Ra);Dc=X.stencil_mask;
Dc!==S.stencil_mask&&(O.stencilMask(Dc),S.stencil_mask=Dc);Ta=vb[0];Kb=vb[1];Fb=vb[2];if(Ta!==ha[0]||Kb!==ha[1]||Fb!==ha[2])O.stencilFunc(Ta,Kb,Fb),ha[0]=Ta,ha[1]=Kb,ha[2]=Fb;Na=Fa[0];zd=Fa[1];$a=Fa[2];Lb=Fa[3];if(Na!==pa[0]||zd!==pa[1]||$a!==pa[2]||Lb!==pa[3])O.stencilOpSeparate(Na,zd,$a,Lb),pa[0]=Na,pa[1]=zd,pa[2]=$a,pa[3]=Lb;Mb=Y[0];nb=Y[1];Qa=Y[2];ac=Y[3];if(Mb!==xa[0]||nb!==xa[1]||Qa!==xa[2]||ac!==xa[3])O.stencilOpSeparate(Mb,nb,Qa,ac),xa[0]=Mb,xa[1]=nb,xa[2]=Qa,xa[3]=ac;Sa=X.scissor_enable;
Sa!==S.scissor_enable&&(Sa?O.enable(3089):O.disable(3089),S.scissor_enable=Sa);xb=Ea[0];yb=Ea[1];Ua=Ea[2];ob=Ea[3];if(xb!==Oa[0]||yb!==Oa[1]||Ua!==Oa[2]||ob!==Oa[3])O.scissor(xb,yb,Ua,ob),Oa[0]=xb,Oa[1]=yb,Oa[2]=Ua,Oa[3]=ob;gc=Ca[0];Bc=Ca[1];wc=Ca[2];cb=Ca[3];if(gc!==Aa[0]||Bc!==Aa[1]||wc!==Aa[2]||cb!==Aa[3])O.viewport(gc,Bc,wc,cb),Aa[0]=gc,Aa[1]=Bc,Aa[2]=wc,Aa[3]=cb}O.enable(2884);S.cull_enable=!0;O.cullFace(1029);S.cull_face=1029;if(t=S.profile)x=performance.now(),v.count++;O.useProgram(e.program);
ya.setVAO(null);(w=b.position)&&("object"===typeof w||"function"===typeof w)&&(ga(w)||P.getBuffer(w)||P.getBuffer(w.buffer)||ga(w.buffer)||"constant"in w&&("number"===typeof w.constant||N(w.constant)))||r.commandRaise(k,q);H=!1;C=null;R=!1;B=I=0;F=1;D=0;Z=5126;u=G=L=E=0;ga(w)?(H=!0,C=P.createStream(34962,w),Z=C.dtype):(C=P.getBuffer(w))?Z=C.dtype:"constant"in w?(F=2,"number"===typeof w.constant?(L=w.constant,G=u=E=0):(L=0<w.constant.length?w.constant[0]:0,G=1<w.constant.length?w.constant[1]:0,u=2<
w.constant.length?w.constant[2]:0,E=3<w.constant.length?w.constant[3]:0)):(C=ga(w.buffer)?P.createStream(34962,w.buffer):P.getBuffer(w.buffer),Z="type"in w?ka[w.type]:C.dtype,R=!!w.normalized,B=w.size|0,I=w.offset|0,D=w.stride|0);K=Ba.location;ia=T[K];if(1===F){if(ia.buffer||O.enableVertexAttribArray(K),U=B||3,ia.type!==Z||ia.size!==U||ia.buffer!==C||ia.normalized!==R||ia.offset!==I||ia.stride!==D)O.bindBuffer(34962,C.buffer),O.vertexAttribPointer(K,U,Z,R,D,I),ia.type=Z,ia.size=U,ia.buffer=C,ia.normalized=
R,ia.offset=I,ia.stride=D}else if(ia.buffer&&(O.disableVertexAttribArray(K),ia.buffer=null),ia.x!==L||ia.y!==G||ia.z!==u||ia.w!==E)O.vertexAttrib4f(K,L,G,u,E),ia.x=L,ia.y=G,ia.z=u,ia.w=E;(ta=b.normal)&&("object"===typeof ta||"function"===typeof ta)&&(ga(ta)||P.getBuffer(ta)||P.getBuffer(ta.buffer)||ga(ta.buffer)||"constant"in ta&&("number"===typeof ta.constant||N(ta.constant)))||r.commandRaise(p,q);oa=!1;la=null;Ha=!1;Nd=La=0;Dd=1;pd=0;bd=5126;Hc=rd=Oc=td=0;ga(ta)?(oa=!0,la=P.createStream(34962,ta),
bd=la.dtype):(la=P.getBuffer(ta))?bd=la.dtype:"constant"in ta?(Dd=2,"number"===typeof ta.constant?(Oc=ta.constant,rd=Hc=td=0):(Oc=0<ta.constant.length?ta.constant[0]:0,rd=1<ta.constant.length?ta.constant[1]:0,Hc=2<ta.constant.length?ta.constant[2]:0,td=3<ta.constant.length?ta.constant[3]:0)):(la=ga(ta.buffer)?P.createStream(34962,ta.buffer):P.getBuffer(ta.buffer),bd="type"in ta?ka[ta.type]:la.dtype,Ha=!!ta.normalized,Nd=ta.size|0,La=ta.offset|0,pd=ta.stride|0);gd=A.location;Sc=T[gd];if(1===Dd){if(Sc.buffer||
O.enableVertexAttribArray(gd),md=Nd||3,Sc.type!==bd||Sc.size!==md||Sc.buffer!==la||Sc.normalized!==Ha||Sc.offset!==La||Sc.stride!==pd)O.bindBuffer(34962,la.buffer),O.vertexAttribPointer(gd,md,bd,Ha,pd,La),Sc.type=bd,Sc.size=md,Sc.buffer=la,Sc.normalized=Ha,Sc.offset=La,Sc.stride=pd}else if(Sc.buffer&&(O.disableVertexAttribArray(gd),Sc.buffer=null),Sc.x!==Oc||Sc.y!==rd||Sc.z!==Hc||Sc.w!==td)O.vertexAttrib4f(gd,Oc,rd,Hc,td),Sc.x=Oc,Sc.y=rd,Sc.z=Hc,Sc.w=td;(Wb=b.uv)&&("object"===typeof Wb||"function"===
typeof Wb)&&(ga(Wb)||P.getBuffer(Wb)||P.getBuffer(Wb.buffer)||ga(Wb.buffer)||"constant"in Wb&&("number"===typeof Wb.constant||N(Wb.constant)))||r.commandRaise(g,q);Gb=!1;vc=null;Ab=!1;Db=yc=0;Lc=1;mc=0;Ic=5126;fc=Ec=cd=hd=0;ga(Wb)?(Gb=!0,vc=P.createStream(34962,Wb),Ic=vc.dtype):(vc=P.getBuffer(Wb))?Ic=vc.dtype:"constant"in Wb?(Lc=2,"number"===typeof Wb.constant?(cd=Wb.constant,Ec=fc=hd=0):(cd=0<Wb.constant.length?Wb.constant[0]:0,Ec=1<Wb.constant.length?Wb.constant[1]:0,fc=2<Wb.constant.length?Wb.constant[2]:
0,hd=3<Wb.constant.length?Wb.constant[3]:0)):(vc=ga(Wb.buffer)?P.createStream(34962,Wb.buffer):P.getBuffer(Wb.buffer),Ic="type"in Wb?ka[Wb.type]:vc.dtype,Ab=!!Wb.normalized,Db=Wb.size|0,yc=Wb.offset|0,mc=Wb.stride|0);Jc=da.location;pc=T[Jc];if(1===Lc){if(pc.buffer||O.enableVertexAttribArray(Jc),rc=Db||2,pc.type!==Ic||pc.size!==rc||pc.buffer!==vc||pc.normalized!==Ab||pc.offset!==yc||pc.stride!==mc)O.bindBuffer(34962,vc.buffer),O.vertexAttribPointer(Jc,rc,Ic,Ab,mc,yc),pc.type=Ic,pc.size=rc,pc.buffer=
vc,pc.normalized=Ab,pc.offset=yc,pc.stride=mc}else if(pc.buffer&&(O.disableVertexAttribArray(Jc),pc.buffer=null),pc.x!==cd||pc.y!==Ec||pc.z!==fc||pc.w!==hd)O.vertexAttrib4f(Jc,cd,Ec,fc,hd),pc.x=cd,pc.y=Ec,pc.z=fc,pc.w=hd;nc=z.call(this,M,b,0);N(nc)&&16===nc.length||r.commandRaise(y,q);O.uniformMatrix4fv(W.location,!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(ba[0]=nc[0],ba[1]=nc[1],ba[2]=nc[2],ba[3]=nc[3],ba[4]=nc[4],ba[5]=nc[5],ba[6]=nc[6],ba[7]=nc[7],ba[8]=nc[8],ba[9]=nc[9],ba[10]=nc[10],
ba[11]=nc[11],ba[12]=nc[12],ba[13]=nc[13],ba[14]=nc[14],ba[15]=nc[15],ba));qc=M.view;N(qc)&&16===qc.length||r.commandRaise(m,q);O.uniformMatrix4fv(V.location,!1,Array.isArray(qc)||qc instanceof Float32Array?qc:(va[0]=qc[0],va[1]=qc[1],va[2]=qc[2],va[3]=qc[3],va[4]=qc[4],va[5]=qc[5],va[6]=qc[6],va[7]=qc[7],va[8]=qc[8],va[9]=qc[9],va[10]=qc[10],va[11]=qc[11],va[12]=qc[12],va[13]=qc[13],va[14]=qc[14],va[15]=qc[15],va));(hb=b.atlas)&&"framebuffer"===hb._reglType&&(hb=hb.color[0]);"function"===typeof hb&&
"texture2d"===hb._reglType||r.commandRaise(c,q);Pc=hb._texture;O.uniform1i(Q.location,Pc.bind());Rb=b.elements;db=null;(Nb=ga(Rb))?db=qa.createStream(Rb):(db=qa.getElements(Rb),Rb&&!db&&r.commandRaise(d,q));db&&O.bindBuffer(34963,db.buffer.buffer);bb=db?db.primType:4;pb=db?db.vertCount:-1;0<=pb||r.commandRaise(h,q);pb&&(db?O.drawElements(bb,pb,db.type,0<<(db.type-5121>>1)):O.drawArrays(bb,0,pb),S.dirty=!0,ya.setVAO(null),M.view=l,t&&(v.cpuTime+=performance.now()-x),H&&P.destroyStream(C),oa&&P.destroyStream(la),
Gb&&P.destroyStream(vc),Pc.unbind(),Nb&&qa.destroyStream(db))},scope:function(n,a,d){var c,e,t,h,f,x,k,m,p,g,z,C,y,R,I,J,F,D,Z,Q,O,ea,ca,K,Y,na,Da,ia,A,aa,sb,ha,Ga,T,V,ua,W,xa,Fa,pa,wa,ba,da,ja,Ka,Wa,ma,sa,Ca,za,Ba,Aa,ra,ya,Ea,vb,va,Oa,Ha,La,Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,$a,Lb,Mb,nb;c=M.view;e=H.call(this,M,n,d);M.view=e;t=X.cull_enable;X.cull_enable=!0;h=X.cull_face;X.cull_face=1029;if(f=S.profile)x=performance.now(),
v.count++;k=n.elements;m=null;(p=ga(k))?m=qa.createStream(k):(m=qa.getElements(k),k&&!m&&r.commandRaise(w,q));g=U.elements;U.elements=m;z=U.offset;U.offset=0;C=m?m.vertCount:-1;y=U.count;U.count=C;R=m?m.primType:4;I=U.primitive;U.primitive=R;J=n.atlas;F=oa[5];oa[5]=J;D=L.call(this,M,n,d);Z=oa[3];oa[3]=D;Q=M.view;O=oa[4];oa[4]=Q;(ea=n.normal)&&("object"===typeof ea||"function"===typeof ea)&&(ga(ea)||P.getBuffer(ea)||P.getBuffer(ea.buffer)||ga(ea.buffer)||"constant"in ea&&("number"===typeof ea.constant||
N(ea.constant)))||r.commandRaise(G,q);ca=!1;K=null;Y=0;na=!1;ia=Da=0;A=1;aa=0;sb=5126;V=T=Ga=ha=0;ga(ea)?(ca=!0,K=P.createStream(34962,ea),sb=K.dtype):(K=P.getBuffer(ea))?sb=K.dtype:"constant"in ea?(A=2,"number"===typeof ea.constant?(Ga=ea.constant,T=V=ha=0):(Ga=0<ea.constant.length?ea.constant[0]:0,T=1<ea.constant.length?ea.constant[1]:0,V=2<ea.constant.length?ea.constant[2]:0,ha=3<ea.constant.length?ea.constant[3]:0)):(K=ga(ea.buffer)?P.createStream(34962,ea.buffer):P.getBuffer(ea.buffer),sb="type"in
ea?ka[ea.type]:K.dtype,na=!!ea.normalized,ia=ea.size|0,Da=ea.offset|0,aa=ea.stride|0,Y=ea.divisor|0);ua=E.buffer;E.buffer=K;W=E.divisor;E.divisor=Y;xa=E.normalized;E.normalized=na;Fa=E.offset;E.offset=Da;pa=E.size;E.size=ia;wa=E.state;E.state=A;ba=E.stride;E.stride=aa;da=E.type;E.type=sb;ja=E.w;E.w=ha;Ka=E.x;E.x=Ga;Wa=E.y;E.y=T;ma=E.z;E.z=V;(sa=n.position)&&("object"===typeof sa||"function"===typeof sa)&&(ga(sa)||P.getBuffer(sa)||P.getBuffer(sa.buffer)||ga(sa.buffer)||"constant"in sa&&("number"===
typeof sa.constant||N(sa.constant)))||r.commandRaise(u,q);Ca=!1;za=null;Ba=0;Aa=!1;ya=ra=0;Ea=1;vb=0;va=5126;Xa=La=Ha=Oa=0;ga(sa)?(Ca=!0,za=P.createStream(34962,sa),va=za.dtype):(za=P.getBuffer(sa))?va=za.dtype:"constant"in sa?(Ea=2,"number"===typeof sa.constant?(Ha=sa.constant,La=Xa=Oa=0):(Ha=0<sa.constant.length?sa.constant[0]:0,La=1<sa.constant.length?sa.constant[1]:0,Xa=2<sa.constant.length?sa.constant[2]:0,Oa=3<sa.constant.length?sa.constant[3]:0)):(za=ga(sa.buffer)?P.createStream(34962,sa.buffer):
P.getBuffer(sa.buffer),va="type"in sa?ka[sa.type]:za.dtype,Aa=!!sa.normalized,ya=sa.size|0,ra=sa.offset|0,vb=sa.stride|0,Ba=sa.divisor|0);Kc=B.buffer;B.buffer=za;Ib=B.divisor;B.divisor=Ba;Jb=B.normalized;B.normalized=Aa;sc=B.offset;B.offset=ra;Ob=B.size;B.size=ya;lb=B.state;B.state=Ea;Hb=B.stride;B.stride=vb;Eb=B.type;B.type=va;zb=B.w;B.w=Oa;jb=B.x;B.x=Ha;$b=B.y;B.y=La;Pb=B.z;B.z=Xa;(rb=n.uv)&&("object"===typeof rb||"function"===typeof rb)&&(ga(rb)||P.getBuffer(rb)||P.getBuffer(rb.buffer)||ga(rb.buffer)||
"constant"in rb&&("number"===typeof rb.constant||N(rb.constant)))||r.commandRaise(b,q);Va=!1;Vb=null;Bb=0;jc=!1;qb=kb=0;Ja=1;tb=0;Ma=5126;mb=Pa=ib=fb=0;ga(rb)?(Va=!0,Vb=P.createStream(34962,rb),Ma=Vb.dtype):(Vb=P.getBuffer(rb))?Ma=Vb.dtype:"constant"in rb?(Ja=2,"number"===typeof rb.constant?(ib=rb.constant,Pa=mb=fb=0):(ib=0<rb.constant.length?rb.constant[0]:0,Pa=1<rb.constant.length?rb.constant[1]:0,mb=2<rb.constant.length?rb.constant[2]:0,fb=3<rb.constant.length?rb.constant[3]:0)):(Vb=ga(rb.buffer)?
P.createStream(34962,rb.buffer):P.getBuffer(rb.buffer),Ma="type"in rb?ka[rb.type]:Vb.dtype,jc=!!rb.normalized,qb=rb.size|0,kb=rb.offset|0,tb=rb.stride|0,Bb=rb.divisor|0);Ya=l.buffer;l.buffer=Vb;wb=l.divisor;l.divisor=Bb;ub=l.normalized;l.normalized=jc;Ra=l.offset;l.offset=kb;Dc=l.size;l.size=qb;Ta=l.state;l.state=Ja;Kb=l.stride;l.stride=tb;Fb=l.type;l.type=Ma;Na=l.w;l.w=fb;zd=l.x;l.x=ib;$a=l.y;l.y=Pa;Lb=l.z;l.z=mb;Mb=la.vert;la.vert=2;nb=la.frag;la.frag=1;S.dirty=!0;a(M,n,d);M.view=c;X.cull_enable=
t;X.cull_face=h;f&&(v.cpuTime+=performance.now()-x);p&&qa.destroyStream(m);U.elements=g;U.offset=z;U.count=y;U.primitive=I;oa[5]=F;oa[3]=Z;oa[4]=O;ca&&P.destroyStream(K);E.buffer=ua;E.divisor=W;E.normalized=xa;E.offset=Fa;E.size=pa;E.state=wa;E.stride=ba;E.type=da;E.w=ja;E.x=Ka;E.y=Wa;E.z=ma;Ca&&P.destroyStream(za);B.buffer=Kc;B.divisor=Ib;B.normalized=Jb;B.offset=sc;B.size=Ob;B.state=lb;B.stride=Hb;B.type=Eb;B.w=zb;B.x=jb;B.y=$b;B.z=Pb;Va&&P.destroyStream(Vb);l.buffer=Ya;l.divisor=wb;l.normalized=
ub;l.offset=Ra;l.size=Dc;l.state=Ta;l.stride=Kb;l.type=Fb;l.w=Na;l.x=zd;l.y=$a;l.z=Lb;la.vert=Mb;la.frag=nb;S.dirty=!0},batch:function(b,l){var a,d,c,e,h,f,k;a=M.view;d=x.call(this,M,b,0);M.view=d;c=ra.next;c!==ra.cur&&(c?O.bindFramebuffer(36160,c.framebuffer):O.bindFramebuffer(36160,null),ra.cur=c);if(S.dirty){var m,p,w,g,z,H,y,J,B,E,L,G,u,ta,U,oa,ba,la,va,Dd,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Wb,Gb,vc,Ab,yc,Db,Lc,mc,Ic,hd,cd,Ec,fc,Jc,pc,rc,nc,qc,hb,Pc,Rb,db,Nb;m=X.dither;m!==S.dither&&(m?O.enable(3024):
O.disable(3024),S.dither=m);p=X.blend_enable;p!==S.blend_enable&&(p?O.enable(3042):O.disable(3042),S.blend_enable=p);w=ua[0];g=ua[1];z=ua[2];H=ua[3];if(w!==aa[0]||g!==aa[1]||z!==aa[2]||H!==aa[3])O.blendColor(w,g,z,H),aa[0]=w,aa[1]=g,aa[2]=z,aa[3]=H;y=za[0];J=za[1];if(y!==ja[0]||J!==ja[1])O.blendEquationSeparate(y,J),ja[0]=y,ja[1]=J;B=ma[0];E=ma[1];L=ma[2];G=ma[3];if(B!==sa[0]||E!==sa[1]||L!==sa[2]||G!==sa[3])O.blendFuncSeparate(B,E,L,G),sa[0]=B,sa[1]=E,sa[2]=L,sa[3]=G;u=X.depth_enable;u!==S.depth_enable&&
(u?O.enable(2929):O.disable(2929),S.depth_enable=u);ta=X.depth_func;ta!==S.depth_func&&(O.depthFunc(ta),S.depth_func=ta);U=sb[0];oa=sb[1];if(U!==Ka[0]||oa!==Ka[1])O.depthRange(U,oa),Ka[0]=U,Ka[1]=oa;ba=X.depth_mask;ba!==S.depth_mask&&(O.depthMask(ba),S.depth_mask=ba);la=Ga[0];va=Ga[1];Dd=Ga[2];pd=Ga[3];if(la!==Da[0]||va!==Da[1]||Dd!==Da[2]||pd!==Da[3])O.colorMask(la,va,Dd,pd),Da[0]=la,Da[1]=va,Da[2]=Dd,Da[3]=pd;bd=X.frontFace;bd!==S.frontFace&&(O.frontFace(bd),S.frontFace=bd);td=X.lineWidth;td!==
S.lineWidth&&(O.lineWidth(td),S.lineWidth=td);Oc=X.polygonOffset_enable;Oc!==S.polygonOffset_enable&&(Oc?O.enable(32823):O.disable(32823),S.polygonOffset_enable=Oc);rd=ea[0];Hc=ea[1];if(rd!==ca[0]||Hc!==ca[1])O.polygonOffset(rd,Hc),ca[0]=rd,ca[1]=Hc;gd=X.sample_alpha;gd!==S.sample_alpha&&(gd?O.enable(32926):O.disable(32926),S.sample_alpha=gd);Sc=X.sample_enable;Sc!==S.sample_enable&&(Sc?O.enable(32928):O.disable(32928),S.sample_enable=Sc);md=na[0];Wb=na[1];if(md!==wa[0]||Wb!==wa[1])O.sampleCoverage(md,
Wb),wa[0]=md,wa[1]=Wb;Gb=X.stencil_enable;Gb!==S.stencil_enable&&(Gb?O.enable(2960):O.disable(2960),S.stencil_enable=Gb);vc=X.stencil_mask;vc!==S.stencil_mask&&(O.stencilMask(vc),S.stencil_mask=vc);Ab=vb[0];yc=vb[1];Db=vb[2];if(Ab!==ha[0]||yc!==ha[1]||Db!==ha[2])O.stencilFunc(Ab,yc,Db),ha[0]=Ab,ha[1]=yc,ha[2]=Db;Lc=Fa[0];mc=Fa[1];Ic=Fa[2];hd=Fa[3];if(Lc!==pa[0]||mc!==pa[1]||Ic!==pa[2]||hd!==pa[3])O.stencilOpSeparate(Lc,mc,Ic,hd),pa[0]=Lc,pa[1]=mc,pa[2]=Ic,pa[3]=hd;cd=Y[0];Ec=Y[1];fc=Y[2];Jc=Y[3];
if(cd!==xa[0]||Ec!==xa[1]||fc!==xa[2]||Jc!==xa[3])O.stencilOpSeparate(cd,Ec,fc,Jc),xa[0]=cd,xa[1]=Ec,xa[2]=fc,xa[3]=Jc;pc=X.scissor_enable;pc!==S.scissor_enable&&(pc?O.enable(3089):O.disable(3089),S.scissor_enable=pc);rc=Ea[0];nc=Ea[1];qc=Ea[2];hb=Ea[3];if(rc!==Oa[0]||nc!==Oa[1]||qc!==Oa[2]||hb!==Oa[3])O.scissor(rc,nc,qc,hb),Oa[0]=rc,Oa[1]=nc,Oa[2]=qc,Oa[3]=hb;Pc=Ca[0];Rb=Ca[1];db=Ca[2];Nb=Ca[3];if(Pc!==Aa[0]||Rb!==Aa[1]||db!==Aa[2]||Nb!==Aa[3])O.viewport(Pc,Rb,db,Nb),Aa[0]=Pc,Aa[1]=Rb,Aa[2]=db,Aa[3]=
Nb}O.enable(2884);S.cull_enable=!0;O.cullFace(1029);S.cull_face=1029;if(e=S.profile)h=performance.now(),v.count+=l;O.useProgram(R.program);var bb,pb;ya.setVAO(null);bb=I.call(this,M,k,f);N(bb)&&16===bb.length||r.commandRaise(K,q);O.uniformMatrix4fv(W.location,!1,Array.isArray(bb)||bb instanceof Float32Array?bb:(La[0]=bb[0],La[1]=bb[1],La[2]=bb[2],La[3]=bb[3],La[4]=bb[4],La[5]=bb[5],La[6]=bb[6],La[7]=bb[7],La[8]=bb[8],La[9]=bb[9],La[10]=bb[10],La[11]=bb[11],La[12]=bb[12],La[13]=bb[13],La[14]=bb[14],
La[15]=bb[15],La));pb=M.view;N(pb)&&16===pb.length||r.commandRaise(D,q);O.uniformMatrix4fv(V.location,!1,Array.isArray(pb)||pb instanceof Float32Array?pb:(Ha[0]=pb[0],Ha[1]=pb[1],Ha[2]=pb[2],Ha[3]=pb[3],Ha[4]=pb[4],Ha[5]=pb[5],Ha[6]=pb[6],Ha[7]=pb[7],Ha[8]=pb[8],Ha[9]=pb[9],Ha[10]=pb[10],Ha[11]=pb[11],Ha[12]=pb[12],Ha[13]=pb[13],Ha[14]=pb[14],Ha[15]=pb[15],Ha));for(f=0;f<l;++f){k=b[f];var Xa,Kc,Ib,Jb,sc,Ob,lb,Hb,Eb,zb,jb,$b,Pb,rb,Va,Vb,Bb,jc,kb,qb,Ja,tb,Ma,fb,ib,Pa,mb,Ya,wb,ub,Ra,Dc,Ta,Kb,Fb,Na,zd,
$a,Lb,Mb,nb,Qa,ac,Sa,xb,yb,Ua,ob,gc,Bc,wc,cb,kc,Mc,Za;(Xa=k.position)&&("object"===typeof Xa||"function"===typeof Xa)&&(ga(Xa)||P.getBuffer(Xa)||P.getBuffer(Xa.buffer)||ga(Xa.buffer)||"constant"in Xa&&("number"===typeof Xa.constant||N(Xa.constant)))||r.commandRaise(C,q);Kc=!1;Ib=null;Jb=!1;Ob=sc=0;lb=1;Hb=0;Eb=5126;Pb=$b=jb=zb=0;ga(Xa)?(Kc=!0,Ib=P.createStream(34962,Xa),Eb=Ib.dtype):(Ib=P.getBuffer(Xa))?Eb=Ib.dtype:"constant"in Xa?(lb=2,"number"===typeof Xa.constant?(jb=Xa.constant,$b=Pb=zb=0):(jb=
0<Xa.constant.length?Xa.constant[0]:0,$b=1<Xa.constant.length?Xa.constant[1]:0,Pb=2<Xa.constant.length?Xa.constant[2]:0,zb=3<Xa.constant.length?Xa.constant[3]:0)):(Ib=ga(Xa.buffer)?P.createStream(34962,Xa.buffer):P.getBuffer(Xa.buffer),Eb="type"in Xa?ka[Xa.type]:Ib.dtype,Jb=!!Xa.normalized,Ob=Xa.size|0,sc=Xa.offset|0,Hb=Xa.stride|0);rb=Ba.location;Va=T[rb];if(1===lb){if(Va.buffer||O.enableVertexAttribArray(rb),Vb=Ob||3,Va.type!==Eb||Va.size!==Vb||Va.buffer!==Ib||Va.normalized!==Jb||Va.offset!==sc||
Va.stride!==Hb)O.bindBuffer(34962,Ib.buffer),O.vertexAttribPointer(rb,Vb,Eb,Jb,Hb,sc),Va.type=Eb,Va.size=Vb,Va.buffer=Ib,Va.normalized=Jb,Va.offset=sc,Va.stride=Hb}else if(Va.buffer&&(O.disableVertexAttribArray(rb),Va.buffer=null),Va.x!==jb||Va.y!==$b||Va.z!==Pb||Va.w!==zb)O.vertexAttrib4f(rb,jb,$b,Pb,zb),Va.x=jb,Va.y=$b,Va.z=Pb,Va.w=zb;(Bb=k.normal)&&("object"===typeof Bb||"function"===typeof Bb)&&(ga(Bb)||P.getBuffer(Bb)||P.getBuffer(Bb.buffer)||ga(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||
N(Bb.constant)))||r.commandRaise(F,q);jc=!1;kb=null;qb=!1;tb=Ja=0;Ma=1;fb=0;ib=5126;wb=Ya=mb=Pa=0;ga(Bb)?(jc=!0,kb=P.createStream(34962,Bb),ib=kb.dtype):(kb=P.getBuffer(Bb))?ib=kb.dtype:"constant"in Bb?(Ma=2,"number"===typeof Bb.constant?(mb=Bb.constant,Ya=wb=Pa=0):(mb=0<Bb.constant.length?Bb.constant[0]:0,Ya=1<Bb.constant.length?Bb.constant[1]:0,wb=2<Bb.constant.length?Bb.constant[2]:0,Pa=3<Bb.constant.length?Bb.constant[3]:0)):(kb=ga(Bb.buffer)?P.createStream(34962,Bb.buffer):P.getBuffer(Bb.buffer),
ib="type"in Bb?ka[Bb.type]:kb.dtype,qb=!!Bb.normalized,tb=Bb.size|0,Ja=Bb.offset|0,fb=Bb.stride|0);ub=A.location;Ra=T[ub];if(1===Ma){if(Ra.buffer||O.enableVertexAttribArray(ub),Dc=tb||3,Ra.type!==ib||Ra.size!==Dc||Ra.buffer!==kb||Ra.normalized!==qb||Ra.offset!==Ja||Ra.stride!==fb)O.bindBuffer(34962,kb.buffer),O.vertexAttribPointer(ub,Dc,ib,qb,fb,Ja),Ra.type=ib,Ra.size=Dc,Ra.buffer=kb,Ra.normalized=qb,Ra.offset=Ja,Ra.stride=fb}else if(Ra.buffer&&(O.disableVertexAttribArray(ub),Ra.buffer=null),Ra.x!==
mb||Ra.y!==Ya||Ra.z!==wb||Ra.w!==Pa)O.vertexAttrib4f(ub,mb,Ya,wb,Pa),Ra.x=mb,Ra.y=Ya,Ra.z=wb,Ra.w=Pa;(Ta=k.uv)&&("object"===typeof Ta||"function"===typeof Ta)&&(ga(Ta)||P.getBuffer(Ta)||P.getBuffer(Ta.buffer)||ga(Ta.buffer)||"constant"in Ta&&("number"===typeof Ta.constant||N(Ta.constant)))||r.commandRaise(ia,q);Kb=!1;Fb=null;Na=!1;$a=zd=0;Lb=1;Mb=0;nb=5126;xb=Sa=ac=Qa=0;ga(Ta)?(Kb=!0,Fb=P.createStream(34962,Ta),nb=Fb.dtype):(Fb=P.getBuffer(Ta))?nb=Fb.dtype:"constant"in Ta?(Lb=2,"number"===typeof Ta.constant?
(ac=Ta.constant,Sa=xb=Qa=0):(ac=0<Ta.constant.length?Ta.constant[0]:0,Sa=1<Ta.constant.length?Ta.constant[1]:0,xb=2<Ta.constant.length?Ta.constant[2]:0,Qa=3<Ta.constant.length?Ta.constant[3]:0)):(Fb=ga(Ta.buffer)?P.createStream(34962,Ta.buffer):P.getBuffer(Ta.buffer),nb="type"in Ta?ka[Ta.type]:Fb.dtype,Na=!!Ta.normalized,$a=Ta.size|0,zd=Ta.offset|0,Mb=Ta.stride|0);yb=da.location;Ua=T[yb];if(1===Lb){if(Ua.buffer||O.enableVertexAttribArray(yb),ob=$a||2,Ua.type!==nb||Ua.size!==ob||Ua.buffer!==Fb||Ua.normalized!==
Na||Ua.offset!==zd||Ua.stride!==Mb)O.bindBuffer(34962,Fb.buffer),O.vertexAttribPointer(yb,ob,nb,Na,Mb,zd),Ua.type=nb,Ua.size=ob,Ua.buffer=Fb,Ua.normalized=Na,Ua.offset=zd,Ua.stride=Mb}else if(Ua.buffer&&(O.disableVertexAttribArray(yb),Ua.buffer=null),Ua.x!==ac||Ua.y!==Sa||Ua.z!==xb||Ua.w!==Qa)O.vertexAttrib4f(yb,ac,Sa,xb,Qa),Ua.x=ac,Ua.y=Sa,Ua.z=xb,Ua.w=Qa;(gc=k.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||r.commandRaise(n,q);Bc=gc._texture;
O.uniform1i(Q.location,Bc.bind());wc=k.elements;cb=null;(kc=ga(wc))?cb=qa.createStream(wc):(cb=qa.getElements(wc),wc&&!cb&&r.commandRaise(t,q));cb&&O.bindBuffer(34963,cb.buffer.buffer);Mc=cb?cb.primType:4;Za=cb?cb.vertCount:-1;0<=Za||r.commandRaise(Z,q);Za&&(cb?O.drawElements(Mc,Za,cb.type,0<<(cb.type-5121>>1)):O.drawArrays(Mc,0,Za),Kc&&P.destroyStream(Ib),jc&&P.destroyStream(kb),Kb&&P.destroyStream(Fb),Bc.unbind(),kc&&qa.destroyStream(cb))}S.dirty=!0;ya.setVAO(null);M.view=a;e&&(v.cpuTime+=performance.now()-
h)}}},"$7,color,position":function(a,r,q,v,f,e,k,p,g,z){var y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,A,Ba,W,da,V,T,P,M,S,U;y=a.attributes;m=a.context;c=a.current;d=a.draw;h=a.elements;H=a.framebuffer;w=a.gl;L=a.next;G=a.shader;E=a.uniforms;u=a.vao;B=L.blend_color;b=c.blend_color;l=L.blend_equation;x=c.blend_equation;R=L.blend_func;C=c.blend_func;F=L.colorMask;ia=c.colorMask;I=L.depth_range;K=c.depth_range;D=L.polygonOffset_offset;n=c.polygonOffset_offset;t=L.sample_coverage;Z=c.sample_coverage;
Q=L.scissor_box;A=c.scissor_box;Ba=L.stencil_func;W=c.stencil_func;da=L.stencil_opBack;V=c.stencil_opBack;T=L.stencil_opFront;P=c.stencil_opFront;M=L.viewport;S=c.viewport;U=[1,0,0,1];return{draw:function(a){var q,k,m,p;a=H.next;a!==H.cur&&(a?w.bindFramebuffer(36160,a.framebuffer):w.bindFramebuffer(36160,null),H.cur=a);if(c.dirty){a=L.dither;a!==c.dither&&(a?w.enable(3024):w.disable(3024),c.dither=a);a=L.blend_enable;a!==c.blend_enable&&(a?w.enable(3042):w.disable(3042),c.blend_enable=a);a=B[0];k=
B[1];m=B[2];p=B[3];if(a!==b[0]||k!==b[1]||m!==b[2]||p!==b[3])w.blendColor(a,k,m,p),b[0]=a,b[1]=k,b[2]=m,b[3]=p;a=l[0];k=l[1];if(a!==x[0]||k!==x[1])w.blendEquationSeparate(a,k),x[0]=a,x[1]=k;a=R[0];k=R[1];m=R[2];p=R[3];if(a!==C[0]||k!==C[1]||m!==C[2]||p!==C[3])w.blendFuncSeparate(a,k,m,p),C[0]=a,C[1]=k,C[2]=m,C[3]=p;a=L.depth_enable;a!==c.depth_enable&&(a?w.enable(2929):w.disable(2929),c.depth_enable=a);a=L.depth_func;a!==c.depth_func&&(w.depthFunc(a),c.depth_func=a);a=I[0];k=I[1];if(a!==K[0]||k!==
K[1])w.depthRange(a,k),K[0]=a,K[1]=k;a=L.depth_mask;a!==c.depth_mask&&(w.depthMask(a),c.depth_mask=a);a=F[0];k=F[1];m=F[2];p=F[3];if(a!==ia[0]||k!==ia[1]||m!==ia[2]||p!==ia[3])w.colorMask(a,k,m,p),ia[0]=a,ia[1]=k,ia[2]=m,ia[3]=p;a=L.cull_enable;a!==c.cull_enable&&(a?w.enable(2884):w.disable(2884),c.cull_enable=a);a=L.cull_face;a!==c.cull_face&&(w.cullFace(a),c.cull_face=a);a=L.frontFace;a!==c.frontFace&&(w.frontFace(a),c.frontFace=a);a=L.lineWidth;a!==c.lineWidth&&(w.lineWidth(a),c.lineWidth=a);a=
L.polygonOffset_enable;a!==c.polygonOffset_enable&&(a?w.enable(32823):w.disable(32823),c.polygonOffset_enable=a);a=D[0];k=D[1];if(a!==n[0]||k!==n[1])w.polygonOffset(a,k),n[0]=a,n[1]=k;a=L.sample_alpha;a!==c.sample_alpha&&(a?w.enable(32926):w.disable(32926),c.sample_alpha=a);a=L.sample_enable;a!==c.sample_enable&&(a?w.enable(32928):w.disable(32928),c.sample_enable=a);a=t[0];k=t[1];if(a!==Z[0]||k!==Z[1])w.sampleCoverage(a,k),Z[0]=a,Z[1]=k;a=L.stencil_enable;a!==c.stencil_enable&&(a?w.enable(2960):w.disable(2960),
c.stencil_enable=a);a=L.stencil_mask;a!==c.stencil_mask&&(w.stencilMask(a),c.stencil_mask=a);a=Ba[0];k=Ba[1];m=Ba[2];if(a!==W[0]||k!==W[1]||m!==W[2])w.stencilFunc(a,k,m),W[0]=a,W[1]=k,W[2]=m;a=T[0];k=T[1];m=T[2];p=T[3];if(a!==P[0]||k!==P[1]||m!==P[2]||p!==P[3])w.stencilOpSeparate(a,k,m,p),P[0]=a,P[1]=k,P[2]=m,P[3]=p;a=da[0];k=da[1];m=da[2];p=da[3];if(a!==V[0]||k!==V[1]||m!==V[2]||p!==V[3])w.stencilOpSeparate(a,k,m,p),V[0]=a,V[1]=k,V[2]=m,V[3]=p;a=L.scissor_enable;a!==c.scissor_enable&&(a?w.enable(3089):
w.disable(3089),c.scissor_enable=a);a=Q[0];k=Q[1];m=Q[2];p=Q[3];if(a!==A[0]||k!==A[1]||m!==A[2]||p!==A[3])w.scissor(a,k,m,p),A[0]=a,A[1]=k,A[2]=m,A[3]=p;a=M[0];k=M[1];m=M[2];p=M[3];if(a!==S[0]||k!==S[1]||m!==S[2]||p!==S[3])w.viewport(a,k,m,p),S[0]=a,S[1]=k,S[2]=m,S[3]=p;c.dirty=!1}if(a=c.profile)q=performance.now(),v.count++;w.useProgram(f.program);u.setVAO(null);k=z.location;m=y[k];m.buffer||w.enableVertexAttribArray(k);if(m.type!==e.dtype||2!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||
0!==m.stride)w.bindBuffer(34962,e.buffer),w.vertexAttribPointer(k,2,e.dtype,!1,0,0),m.type=e.dtype,m.size=2,m.buffer=e,m.normalized=!1,m.offset=0,m.stride=0;w.uniform4f(g.location,1,0,0,1);(k=d.elements)?w.bindBuffer(34963,k.buffer.buffer):u.currentVAO&&(k=h.getElements(u.currentVAO.elements))&&w.bindBuffer(34963,k.buffer.buffer);m=d.primitive;p=d.offset;k?w.drawElements(m,3,k.type,p<<(k.type-5121>>1)):w.drawArrays(m,p,3);u.setVAO(null);a&&(v.cpuTime+=performance.now()-q)},scope:function(b,l,a){var n,
t,h,f,q,x,p,w,r,g,z,C,H,y,R,I,J,B;if(n=c.profile)t=performance.now(),v.count++;h=d.count;d.count=3;f=E[3];E[3]=U;q=k.buffer;k.buffer=e;x=k.divisor;k.divisor=0;p=k.normalized;k.normalized=!1;w=k.offset;k.offset=0;r=k.size;k.size=0;g=k.state;k.state=1;z=k.stride;k.stride=0;C=k.type;k.type=e.dtype;H=k.w;k.w=0;y=k.x;k.x=0;R=k.y;k.y=0;I=k.z;k.z=0;J=G.vert;G.vert=2;B=G.frag;G.frag=1;l(m,b,a);n&&(v.cpuTime+=performance.now()-t);d.count=h;E[3]=f;k.buffer=q;k.divisor=x;k.normalized=p;k.offset=w;k.size=r;k.state=
g;k.stride=z;k.type=C;k.w=H;k.x=y;k.y=R;k.z=I;G.vert=J;G.frag=B},batch:function(a,f){var q,k,m;q=H.next;q!==H.cur&&(q?w.bindFramebuffer(36160,q.framebuffer):w.bindFramebuffer(36160,null),H.cur=q);if(c.dirty){var r,E;q=L.dither;q!==c.dither&&(q?w.enable(3024):w.disable(3024),c.dither=q);q=L.blend_enable;q!==c.blend_enable&&(q?w.enable(3042):w.disable(3042),c.blend_enable=q);q=B[0];m=B[1];r=B[2];E=B[3];if(q!==b[0]||m!==b[1]||r!==b[2]||E!==b[3])w.blendColor(q,m,r,E),b[0]=q,b[1]=m,b[2]=r,b[3]=E;q=l[0];
m=l[1];if(q!==x[0]||m!==x[1])w.blendEquationSeparate(q,m),x[0]=q,x[1]=m;q=R[0];m=R[1];r=R[2];E=R[3];if(q!==C[0]||m!==C[1]||r!==C[2]||E!==C[3])w.blendFuncSeparate(q,m,r,E),C[0]=q,C[1]=m,C[2]=r,C[3]=E;q=L.depth_enable;q!==c.depth_enable&&(q?w.enable(2929):w.disable(2929),c.depth_enable=q);q=L.depth_func;q!==c.depth_func&&(w.depthFunc(q),c.depth_func=q);q=I[0];m=I[1];if(q!==K[0]||m!==K[1])w.depthRange(q,m),K[0]=q,K[1]=m;q=L.depth_mask;q!==c.depth_mask&&(w.depthMask(q),c.depth_mask=q);q=F[0];m=F[1];r=
F[2];E=F[3];if(q!==ia[0]||m!==ia[1]||r!==ia[2]||E!==ia[3])w.colorMask(q,m,r,E),ia[0]=q,ia[1]=m,ia[2]=r,ia[3]=E;q=L.cull_enable;q!==c.cull_enable&&(q?w.enable(2884):w.disable(2884),c.cull_enable=q);q=L.cull_face;q!==c.cull_face&&(w.cullFace(q),c.cull_face=q);q=L.frontFace;q!==c.frontFace&&(w.frontFace(q),c.frontFace=q);q=L.lineWidth;q!==c.lineWidth&&(w.lineWidth(q),c.lineWidth=q);q=L.polygonOffset_enable;q!==c.polygonOffset_enable&&(q?w.enable(32823):w.disable(32823),c.polygonOffset_enable=q);q=D[0];
m=D[1];if(q!==n[0]||m!==n[1])w.polygonOffset(q,m),n[0]=q,n[1]=m;q=L.sample_alpha;q!==c.sample_alpha&&(q?w.enable(32926):w.disable(32926),c.sample_alpha=q);q=L.sample_enable;q!==c.sample_enable&&(q?w.enable(32928):w.disable(32928),c.sample_enable=q);q=t[0];m=t[1];if(q!==Z[0]||m!==Z[1])w.sampleCoverage(q,m),Z[0]=q,Z[1]=m;q=L.stencil_enable;q!==c.stencil_enable&&(q?w.enable(2960):w.disable(2960),c.stencil_enable=q);q=L.stencil_mask;q!==c.stencil_mask&&(w.stencilMask(q),c.stencil_mask=q);q=Ba[0];m=Ba[1];
r=Ba[2];if(q!==W[0]||m!==W[1]||r!==W[2])w.stencilFunc(q,m,r),W[0]=q,W[1]=m,W[2]=r;q=T[0];m=T[1];r=T[2];E=T[3];if(q!==P[0]||m!==P[1]||r!==P[2]||E!==P[3])w.stencilOpSeparate(q,m,r,E),P[0]=q,P[1]=m,P[2]=r,P[3]=E;q=da[0];m=da[1];r=da[2];E=da[3];if(q!==V[0]||m!==V[1]||r!==V[2]||E!==V[3])w.stencilOpSeparate(q,m,r,E),V[0]=q,V[1]=m,V[2]=r,V[3]=E;q=L.scissor_enable;q!==c.scissor_enable&&(q?w.enable(3089):w.disable(3089),c.scissor_enable=q);q=Q[0];m=Q[1];r=Q[2];E=Q[3];if(q!==A[0]||m!==A[1]||r!==A[2]||E!==A[3])w.scissor(q,
m,r,E),A[0]=q,A[1]=m,A[2]=r,A[3]=E;q=M[0];m=M[1];r=M[2];E=M[3];if(q!==S[0]||m!==S[1]||r!==S[2]||E!==S[3])w.viewport(q,m,r,E),S[0]=q,S[1]=m,S[2]=r,S[3]=E;c.dirty=!1}if(q=c.profile)k=performance.now(),v.count+=f;w.useProgram(p.program);var G;u.setVAO(null);m=z.location;r=y[m];r.buffer||w.enableVertexAttribArray(m);if(r.type!==e.dtype||2!==r.size||r.buffer!==e||!1!==r.normalized||0!==r.offset||0!==r.stride)w.bindBuffer(34962,e.buffer),w.vertexAttribPointer(m,2,e.dtype,!1,0,0),r.type=e.dtype,r.size=2,
r.buffer=e,r.normalized=!1,r.offset=0,r.stride=0;w.uniform4f(g.location,1,0,0,1);(r=d.elements)?w.bindBuffer(34963,r.buffer.buffer):u.currentVAO&&(r=h.getElements(u.currentVAO.elements))&&w.bindBuffer(34963,r.buffer.buffer);E=d.primitive;G=d.offset;for(m=0;m<f;++m)r?w.drawElements(E,3,r.type,G<<(r.type-5121>>1)):w.drawArrays(E,G,3);u.setVAO(null);q&&(v.cpuTime+=performance.now()-k)}}},"$19,angle,color,offset,position":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l){var x,R,C,F,ia,I,K,D,
n,t,Z,Q,A,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma;x=a.attributes;R=a.context;C=a.current;F=a.draw;ia=a.elements;I=a.framebuffer;K=a.gl;D=a.isArrayLike;n=a.next;t=a.shader;Z=a.uniforms;Q=a.vao;A=n.blend_color;Ba=C.blend_color;W=n.blend_equation;da=C.blend_equation;V=n.blend_func;T=C.blend_func;P=n.colorMask;M=C.colorMask;S=n.depth_range;U=C.depth_range;qa=n.polygonOffset_offset;ra=C.polygonOffset_offset;O=n.sample_coverage;N=C.sample_coverage;ga=n.scissor_box;X=C.scissor_box;la=
n.stencil_func;oa=C.stencil_func;ya=n.stencil_opBack;ua=C.stencil_opBack;aa=n.stencil_opFront;za=C.stencil_opFront;ja=n.viewport;ma=C.viewport;return{draw:function(a){var d,c,t,h;d=I.next;d!==I.cur&&(d?K.bindFramebuffer(36160,d.framebuffer):K.bindFramebuffer(36160,null),I.cur=d);if(C.dirty){var m;d=n.dither;d!==C.dither&&(d?K.enable(3024):K.disable(3024),C.dither=d);d=n.blend_enable;d!==C.blend_enable&&(d?K.enable(3042):K.disable(3042),C.blend_enable=d);d=A[0];t=A[1];h=A[2];m=A[3];if(d!==Ba[0]||t!==
Ba[1]||h!==Ba[2]||m!==Ba[3])K.blendColor(d,t,h,m),Ba[0]=d,Ba[1]=t,Ba[2]=h,Ba[3]=m;d=W[0];t=W[1];if(d!==da[0]||t!==da[1])K.blendEquationSeparate(d,t),da[0]=d,da[1]=t;d=V[0];t=V[1];h=V[2];m=V[3];if(d!==T[0]||t!==T[1]||h!==T[2]||m!==T[3])K.blendFuncSeparate(d,t,h,m),T[0]=d,T[1]=t,T[2]=h,T[3]=m;d=n.depth_func;d!==C.depth_func&&(K.depthFunc(d),C.depth_func=d);d=S[0];t=S[1];if(d!==U[0]||t!==U[1])K.depthRange(d,t),U[0]=d,U[1]=t;d=n.depth_mask;d!==C.depth_mask&&(K.depthMask(d),C.depth_mask=d);d=P[0];t=P[1];
h=P[2];m=P[3];if(d!==M[0]||t!==M[1]||h!==M[2]||m!==M[3])K.colorMask(d,t,h,m),M[0]=d,M[1]=t,M[2]=h,M[3]=m;d=n.cull_enable;d!==C.cull_enable&&(d?K.enable(2884):K.disable(2884),C.cull_enable=d);d=n.cull_face;d!==C.cull_face&&(K.cullFace(d),C.cull_face=d);d=n.frontFace;d!==C.frontFace&&(K.frontFace(d),C.frontFace=d);d=n.lineWidth;d!==C.lineWidth&&(K.lineWidth(d),C.lineWidth=d);d=n.polygonOffset_enable;d!==C.polygonOffset_enable&&(d?K.enable(32823):K.disable(32823),C.polygonOffset_enable=d);d=qa[0];t=
qa[1];if(d!==ra[0]||t!==ra[1])K.polygonOffset(d,t),ra[0]=d,ra[1]=t;d=n.sample_alpha;d!==C.sample_alpha&&(d?K.enable(32926):K.disable(32926),C.sample_alpha=d);d=n.sample_enable;d!==C.sample_enable&&(d?K.enable(32928):K.disable(32928),C.sample_enable=d);d=O[0];t=O[1];if(d!==N[0]||t!==N[1])K.sampleCoverage(d,t),N[0]=d,N[1]=t;d=n.stencil_enable;d!==C.stencil_enable&&(d?K.enable(2960):K.disable(2960),C.stencil_enable=d);d=n.stencil_mask;d!==C.stencil_mask&&(K.stencilMask(d),C.stencil_mask=d);d=la[0];t=
la[1];h=la[2];if(d!==oa[0]||t!==oa[1]||h!==oa[2])K.stencilFunc(d,t,h),oa[0]=d,oa[1]=t,oa[2]=h;d=aa[0];t=aa[1];h=aa[2];m=aa[3];if(d!==za[0]||t!==za[1]||h!==za[2]||m!==za[3])K.stencilOpSeparate(d,t,h,m),za[0]=d,za[1]=t,za[2]=h,za[3]=m;d=ya[0];t=ya[1];h=ya[2];m=ya[3];if(d!==ua[0]||t!==ua[1]||h!==ua[2]||m!==ua[3])K.stencilOpSeparate(d,t,h,m),ua[0]=d,ua[1]=t,ua[2]=h,ua[3]=m;d=n.scissor_enable;d!==C.scissor_enable&&(d?K.enable(3089):K.disable(3089),C.scissor_enable=d);d=ga[0];t=ga[1];h=ga[2];m=ga[3];if(d!==
X[0]||t!==X[1]||h!==X[2]||m!==X[3])K.scissor(d,t,h,m),X[0]=d,X[1]=t,X[2]=h,X[3]=m;d=ja[0];t=ja[1];h=ja[2];m=ja[3];if(d!==ma[0]||t!==ma[1]||h!==ma[2]||m!==ma[3])K.viewport(d,t,h,m),ma[0]=d,ma[1]=t,ma[2]=h,ma[3]=m}K.disable(2929);C.depth_enable=!1;if(d=C.profile)c=performance.now(),v.count++;K.useProgram(f.program);Q.setVAO(null);t=l.location;h=x[t];h.buffer||K.enableVertexAttribArray(t);if(h.type!==e.dtype||2!==h.size||h.buffer!==e||!1!==h.normalized||0!==h.offset||0!==h.stride)K.bindBuffer(34962,
e.buffer),K.vertexAttribPointer(t,2,e.dtype,!1,0,0),h.type=e.dtype,h.size=2,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;t=k.call(this,R,a,0);"number"!==typeof t&&r.commandRaise(p,q);K.uniform1f(u.location,t);t=a.offset;D(t)&&2===t.length||r.commandRaise(g,q);K.uniform2f(b.location,t[0],t[1]);a=z.call(this,R,a,0);D(a)&&4===a.length||r.commandRaise(y,q);K.uniform4f(B.location,a[0],a[1],a[2],a[3]);(a=F.elements)?K.bindBuffer(34963,a.buffer.buffer):Q.currentVAO&&(a=ia.getElements(Q.currentVAO.elements))&&
K.bindBuffer(34963,a.buffer.buffer);t=F.primitive;h=F.offset;a?K.drawElements(t,3,a.type,h<<(a.type-5121>>1)):K.drawArrays(t,h,3);C.dirty=!0;Q.setVAO(null);d&&(v.cpuTime+=performance.now()-c)},scope:function(b,l,a){var q,h,f,k,x,p,w,r,g,z,H,y,I,J,B,D,E,Q,L,G,u;q=n.depth_enable;n.depth_enable=!1;if(h=C.profile)f=performance.now(),v.count++;k=F.count;F.count=3;x=m.call(this,R,b,a);p=Z[3];Z[3]=x;w=c.call(this,R,b,a);x=Z[5];Z[5]=w;r=b.offset;w=Z[4];Z[4]=r;r=d.buffer;d.buffer=e;g=d.divisor;d.divisor=0;
z=d.normalized;d.normalized=!1;H=d.offset;d.offset=0;y=d.size;d.size=0;I=d.state;d.state=1;J=d.stride;d.stride=0;B=d.type;d.type=e.dtype;D=d.w;d.w=0;E=d.x;d.x=0;Q=d.y;d.y=0;L=d.z;d.z=0;G=t.vert;t.vert=2;u=t.frag;t.frag=1;C.dirty=!0;l(R,b,a);n.depth_enable=q;h&&(v.cpuTime+=performance.now()-f);F.count=k;Z[3]=p;Z[5]=x;Z[4]=w;d.buffer=r;d.divisor=g;d.normalized=z;d.offset=H;d.size=y;d.state=I;d.stride=J;d.type=B;d.w=D;d.x=E;d.y=Q;d.z=L;t.vert=G;t.frag=u;C.dirty=!0},batch:function(a,d){var c,t,f,k;c=
I.next;c!==I.cur&&(c?K.bindFramebuffer(36160,c.framebuffer):K.bindFramebuffer(36160,null),I.cur=c);if(C.dirty){var m,p,g;c=n.dither;c!==C.dither&&(c?K.enable(3024):K.disable(3024),C.dither=c);c=n.blend_enable;c!==C.blend_enable&&(c?K.enable(3042):K.disable(3042),C.blend_enable=c);c=A[0];m=A[1];p=A[2];g=A[3];if(c!==Ba[0]||m!==Ba[1]||p!==Ba[2]||g!==Ba[3])K.blendColor(c,m,p,g),Ba[0]=c,Ba[1]=m,Ba[2]=p,Ba[3]=g;c=W[0];m=W[1];if(c!==da[0]||m!==da[1])K.blendEquationSeparate(c,m),da[0]=c,da[1]=m;c=V[0];m=
V[1];p=V[2];g=V[3];if(c!==T[0]||m!==T[1]||p!==T[2]||g!==T[3])K.blendFuncSeparate(c,m,p,g),T[0]=c,T[1]=m,T[2]=p,T[3]=g;c=n.depth_func;c!==C.depth_func&&(K.depthFunc(c),C.depth_func=c);c=S[0];m=S[1];if(c!==U[0]||m!==U[1])K.depthRange(c,m),U[0]=c,U[1]=m;c=n.depth_mask;c!==C.depth_mask&&(K.depthMask(c),C.depth_mask=c);c=P[0];m=P[1];p=P[2];g=P[3];if(c!==M[0]||m!==M[1]||p!==M[2]||g!==M[3])K.colorMask(c,m,p,g),M[0]=c,M[1]=m,M[2]=p,M[3]=g;c=n.cull_enable;c!==C.cull_enable&&(c?K.enable(2884):K.disable(2884),
C.cull_enable=c);c=n.cull_face;c!==C.cull_face&&(K.cullFace(c),C.cull_face=c);c=n.frontFace;c!==C.frontFace&&(K.frontFace(c),C.frontFace=c);c=n.lineWidth;c!==C.lineWidth&&(K.lineWidth(c),C.lineWidth=c);c=n.polygonOffset_enable;c!==C.polygonOffset_enable&&(c?K.enable(32823):K.disable(32823),C.polygonOffset_enable=c);c=qa[0];m=qa[1];if(c!==ra[0]||m!==ra[1])K.polygonOffset(c,m),ra[0]=c,ra[1]=m;c=n.sample_alpha;c!==C.sample_alpha&&(c?K.enable(32926):K.disable(32926),C.sample_alpha=c);c=n.sample_enable;
c!==C.sample_enable&&(c?K.enable(32928):K.disable(32928),C.sample_enable=c);c=O[0];m=O[1];if(c!==N[0]||m!==N[1])K.sampleCoverage(c,m),N[0]=c,N[1]=m;c=n.stencil_enable;c!==C.stencil_enable&&(c?K.enable(2960):K.disable(2960),C.stencil_enable=c);c=n.stencil_mask;c!==C.stencil_mask&&(K.stencilMask(c),C.stencil_mask=c);c=la[0];m=la[1];p=la[2];if(c!==oa[0]||m!==oa[1]||p!==oa[2])K.stencilFunc(c,m,p),oa[0]=c,oa[1]=m,oa[2]=p;c=aa[0];m=aa[1];p=aa[2];g=aa[3];if(c!==za[0]||m!==za[1]||p!==za[2]||g!==za[3])K.stencilOpSeparate(c,
m,p,g),za[0]=c,za[1]=m,za[2]=p,za[3]=g;c=ya[0];m=ya[1];p=ya[2];g=ya[3];if(c!==ua[0]||m!==ua[1]||p!==ua[2]||g!==ua[3])K.stencilOpSeparate(c,m,p,g),ua[0]=c,ua[1]=m,ua[2]=p,ua[3]=g;c=n.scissor_enable;c!==C.scissor_enable&&(c?K.enable(3089):K.disable(3089),C.scissor_enable=c);c=ga[0];m=ga[1];p=ga[2];g=ga[3];if(c!==X[0]||m!==X[1]||p!==X[2]||g!==X[3])K.scissor(c,m,p,g),X[0]=c,X[1]=m,X[2]=p,X[3]=g;c=ja[0];m=ja[1];p=ja[2];g=ja[3];if(c!==ma[0]||m!==ma[1]||p!==ma[2]||g!==ma[3])K.viewport(c,m,p,g),ma[0]=c,ma[1]=
m,ma[2]=p,ma[3]=g}K.disable(2929);C.depth_enable=!1;if(c=C.profile)t=performance.now(),v.count+=d;K.useProgram(h.program);Q.setVAO(null);m=l.location;p=x[m];p.buffer||K.enableVertexAttribArray(m);if(p.type!==e.dtype||2!==p.size||p.buffer!==e||!1!==p.normalized||0!==p.offset||0!==p.stride)K.bindBuffer(34962,e.buffer),K.vertexAttribPointer(m,2,e.dtype,!1,0,0),p.type=e.dtype,p.size=2,p.buffer=e,p.normalized=!1,p.offset=0,p.stride=0;f=H.call(this,R,k,f);"number"!==typeof f&&r.commandRaise(w,q);K.uniform1f(u.location,
f);(m=F.elements)?K.bindBuffer(34963,m.buffer.buffer):Q.currentVAO&&(m=ia.getElements(Q.currentVAO.elements))&&K.bindBuffer(34963,m.buffer.buffer);p=F.primitive;g=F.offset;for(f=0;f<d;++f){k=a[f];var z,y,J,Z,Y,xa,Fa,pa,Ca;z=k.offset;D(z)&&2===z.length||r.commandRaise(L,q);y=z[0];z=z[1];f&&J===y&&Z===z||(J=y,Z=z,K.uniform2f(b.location,y,z));Y=G.call(this,R,k,f);D(Y)&&4===Y.length||r.commandRaise(E,q);k=Y[0];y=Y[1];z=Y[2];Y=Y[3];f&&xa===k&&Fa===y&&pa===z&&Ca===Y||(xa=k,Fa=y,pa=z,Ca=Y,K.uniform4f(B.location,
k,y,z,Y));m?K.drawElements(p,3,m.type,g<<(m.type-5121>>1)):K.drawArrays(p,g,3)}C.dirty=!0;Q.setVAO(null);c&&(v.cpuTime+=performance.now()-t)}}},"$23,model,position,projection,view":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F){var A,I,K,D,n,t,Z,Q,Wa,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea;A=a.attributes;I=a.context;K=a.current;D=a.draw;n=a.framebuffer;t=a.gl;Z=a.isArrayLike;Q=a.next;Wa=a.shader;Ba=a.uniforms;W=a.vao;da=Q.blend_color;
V=K.blend_color;T=Q.blend_equation;P=K.blend_equation;M=Q.blend_func;S=K.blend_func;U=Q.colorMask;qa=K.colorMask;ra=Q.depth_range;O=K.depth_range;N=Q.polygonOffset_offset;ga=K.polygonOffset_offset;X=Q.sample_coverage;la=K.sample_coverage;oa=Q.scissor_box;ya=K.scissor_box;ua=Q.stencil_func;aa=K.stencil_func;za=Q.stencil_opBack;ja=K.stencil_opBack;ma=Q.stencil_opFront;sa=K.stencil_opFront;Ga=Q.viewport;Da=K.viewport;sb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ka=new Float32Array(16);ea=new Float32Array(16);
ca=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];na=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);wa=new Float32Array(16);Ea=new Float32Array(16);return{draw:function(b){var l,a,d,c;l=n.next;l!==n.cur&&(l?t.bindFramebuffer(36160,l.framebuffer):t.bindFramebuffer(36160,null),n.cur=l);if(K.dirty){var h;l=Q.dither;l!==K.dither&&(l?t.enable(3024):t.disable(3024),K.dither=l);l=Q.blend_enable;l!==K.blend_enable&&(l?t.enable(3042):t.disable(3042),K.blend_enable=l);l=da[0];d=da[1];c=da[2];h=da[3];if(l!==V[0]||d!==
V[1]||c!==V[2]||h!==V[3])t.blendColor(l,d,c,h),V[0]=l,V[1]=d,V[2]=c,V[3]=h;l=T[0];d=T[1];if(l!==P[0]||d!==P[1])t.blendEquationSeparate(l,d),P[0]=l,P[1]=d;l=M[0];d=M[1];c=M[2];h=M[3];if(l!==S[0]||d!==S[1]||c!==S[2]||h!==S[3])t.blendFuncSeparate(l,d,c,h),S[0]=l,S[1]=d,S[2]=c,S[3]=h;l=Q.depth_enable;l!==K.depth_enable&&(l?t.enable(2929):t.disable(2929),K.depth_enable=l);l=Q.depth_func;l!==K.depth_func&&(t.depthFunc(l),K.depth_func=l);l=ra[0];d=ra[1];if(l!==O[0]||d!==O[1])t.depthRange(l,d),O[0]=l,O[1]=
d;l=Q.depth_mask;l!==K.depth_mask&&(t.depthMask(l),K.depth_mask=l);l=U[0];d=U[1];c=U[2];h=U[3];if(l!==qa[0]||d!==qa[1]||c!==qa[2]||h!==qa[3])t.colorMask(l,d,c,h),qa[0]=l,qa[1]=d,qa[2]=c,qa[3]=h;l=Q.cull_enable;l!==K.cull_enable&&(l?t.enable(2884):t.disable(2884),K.cull_enable=l);l=Q.cull_face;l!==K.cull_face&&(t.cullFace(l),K.cull_face=l);l=Q.frontFace;l!==K.frontFace&&(t.frontFace(l),K.frontFace=l);l=Q.lineWidth;l!==K.lineWidth&&(t.lineWidth(l),K.lineWidth=l);l=Q.polygonOffset_enable;l!==K.polygonOffset_enable&&
(l?t.enable(32823):t.disable(32823),K.polygonOffset_enable=l);l=N[0];d=N[1];if(l!==ga[0]||d!==ga[1])t.polygonOffset(l,d),ga[0]=l,ga[1]=d;l=Q.sample_alpha;l!==K.sample_alpha&&(l?t.enable(32926):t.disable(32926),K.sample_alpha=l);l=Q.sample_enable;l!==K.sample_enable&&(l?t.enable(32928):t.disable(32928),K.sample_enable=l);l=X[0];d=X[1];if(l!==la[0]||d!==la[1])t.sampleCoverage(l,d),la[0]=l,la[1]=d;l=Q.stencil_enable;l!==K.stencil_enable&&(l?t.enable(2960):t.disable(2960),K.stencil_enable=l);l=Q.stencil_mask;
l!==K.stencil_mask&&(t.stencilMask(l),K.stencil_mask=l);l=ua[0];d=ua[1];c=ua[2];if(l!==aa[0]||d!==aa[1]||c!==aa[2])t.stencilFunc(l,d,c),aa[0]=l,aa[1]=d,aa[2]=c;l=ma[0];d=ma[1];c=ma[2];h=ma[3];if(l!==sa[0]||d!==sa[1]||c!==sa[2]||h!==sa[3])t.stencilOpSeparate(l,d,c,h),sa[0]=l,sa[1]=d,sa[2]=c,sa[3]=h;l=za[0];d=za[1];c=za[2];h=za[3];if(l!==ja[0]||d!==ja[1]||c!==ja[2]||h!==ja[3])t.stencilOpSeparate(l,d,c,h),ja[0]=l,ja[1]=d,ja[2]=c,ja[3]=h;l=Q.scissor_enable;l!==K.scissor_enable&&(l?t.enable(3089):t.disable(3089),
K.scissor_enable=l);l=oa[0];d=oa[1];c=oa[2];h=oa[3];if(l!==ya[0]||d!==ya[1]||c!==ya[2]||h!==ya[3])t.scissor(l,d,c,h),ya[0]=l,ya[1]=d,ya[2]=c,ya[3]=h;l=Ga[0];d=Ga[1];c=Ga[2];h=Ga[3];if(l!==Da[0]||d!==Da[1]||c!==Da[2]||h!==Da[3])t.viewport(l,d,c,h),Da[0]=l,Da[1]=d,Da[2]=c,Da[3]=h;K.dirty=!1}if(l=K.profile)a=performance.now(),v.count++;t.useProgram(f.program);W.setVAO(null);d=R.location;c=A[d];c.buffer||t.enableVertexAttribArray(d);if(c.type!==e.dtype||3!==c.size||c.buffer!==e||!1!==c.normalized||0!==
c.offset||0!==c.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(d,3,e.dtype,!1,0,0),c.type=e.dtype,c.size=3,c.buffer=e,c.normalized=!1,c.offset=0,c.stride=0;t.uniformMatrix4fv(x.location,!1,sb);d=k.call(this,I,b,0);Z(d)&&16===d.length||r.commandRaise(p,q);t.uniformMatrix4fv(F.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Ka[0]=d[0],Ka[1]=d[1],Ka[2]=d[2],Ka[3]=d[3],Ka[4]=d[4],Ka[5]=d[5],Ka[6]=d[6],Ka[7]=d[7],Ka[8]=d[8],Ka[9]=d[9],Ka[10]=d[10],Ka[11]=d[11],Ka[12]=d[12],Ka[13]=
d[13],Ka[14]=d[14],Ka[15]=d[15],Ka));b=g.call(this,I,b,0);Z(b)&&16===b.length||r.commandRaise(z,q);t.uniformMatrix4fv(C.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(ea[0]=b[0],ea[1]=b[1],ea[2]=b[2],ea[3]=b[3],ea[4]=b[4],ea[5]=b[5],ea[6]=b[6],ea[7]=b[7],ea[8]=b[8],ea[9]=b[9],ea[10]=b[10],ea[11]=b[11],ea[12]=b[12],ea[13]=b[13],ea[14]=b[14],ea[15]=b[15],ea));y&&t.bindBuffer(34963,y.buffer.buffer);b=y.primType;d=y.vertCount-0;0<=d||r.commandRaise(m,q);d&&(t.drawElements(b,d,y.type,0<<(y.type-
5121>>1)),W.setVAO(null),l&&(v.cpuTime+=performance.now()-a))},scope:function(b,l,a){var n,t,f,m,k,x,p,g,z,C,y,R,J,B,F,E,Z,Q,L,G,u,ea,A;if(n=K.profile)t=performance.now(),v.count++;f=D.elements;D.elements=c;m=D.offset;D.offset=0;k=c.vertCount-0;0<=k||r.commandRaise(d,q);x=D.count;D.count=k;p=c.primType;k=D.primitive;D.primitive=p;p=Ba[3];Ba[3]=ca;g=h.call(this,I,b,a);z=Ba[5];Ba[5]=g;C=H.call(this,I,b,a);g=Ba[4];Ba[4]=C;C=w.buffer;w.buffer=e;y=w.divisor;w.divisor=0;R=w.normalized;w.normalized=!1;J=
w.offset;w.offset=0;B=w.size;w.size=0;F=w.state;w.state=1;E=w.stride;w.stride=0;Z=w.type;w.type=e.dtype;Q=w.w;w.w=0;L=w.x;w.x=0;G=w.y;w.y=0;u=w.z;w.z=0;ea=Wa.vert;Wa.vert=2;A=Wa.frag;Wa.frag=1;l(I,b,a);n&&(v.cpuTime+=performance.now()-t);D.elements=f;D.offset=m;D.count=x;D.primitive=k;Ba[3]=p;Ba[5]=z;Ba[4]=g;w.buffer=C;w.divisor=y;w.normalized=R;w.offset=J;w.size=B;w.state=F;w.stride=E;w.type=Z;w.w=Q;w.x=L;w.y=G;w.z=u;Wa.vert=ea;Wa.frag=A},batch:function(d,a){var c,h,f;c=n.next;c!==n.cur&&(c?t.bindFramebuffer(36160,
c.framebuffer):t.bindFramebuffer(36160,null),n.cur=c);if(K.dirty){var m,k,p;c=Q.dither;c!==K.dither&&(c?t.enable(3024):t.disable(3024),K.dither=c);c=Q.blend_enable;c!==K.blend_enable&&(c?t.enable(3042):t.disable(3042),K.blend_enable=c);c=da[0];m=da[1];k=da[2];p=da[3];if(c!==V[0]||m!==V[1]||k!==V[2]||p!==V[3])t.blendColor(c,m,k,p),V[0]=c,V[1]=m,V[2]=k,V[3]=p;c=T[0];m=T[1];if(c!==P[0]||m!==P[1])t.blendEquationSeparate(c,m),P[0]=c,P[1]=m;c=M[0];m=M[1];k=M[2];p=M[3];if(c!==S[0]||m!==S[1]||k!==S[2]||p!==
S[3])t.blendFuncSeparate(c,m,k,p),S[0]=c,S[1]=m,S[2]=k,S[3]=p;c=Q.depth_enable;c!==K.depth_enable&&(c?t.enable(2929):t.disable(2929),K.depth_enable=c);c=Q.depth_func;c!==K.depth_func&&(t.depthFunc(c),K.depth_func=c);c=ra[0];m=ra[1];if(c!==O[0]||m!==O[1])t.depthRange(c,m),O[0]=c,O[1]=m;c=Q.depth_mask;c!==K.depth_mask&&(t.depthMask(c),K.depth_mask=c);c=U[0];m=U[1];k=U[2];p=U[3];if(c!==qa[0]||m!==qa[1]||k!==qa[2]||p!==qa[3])t.colorMask(c,m,k,p),qa[0]=c,qa[1]=m,qa[2]=k,qa[3]=p;c=Q.cull_enable;c!==K.cull_enable&&
(c?t.enable(2884):t.disable(2884),K.cull_enable=c);c=Q.cull_face;c!==K.cull_face&&(t.cullFace(c),K.cull_face=c);c=Q.frontFace;c!==K.frontFace&&(t.frontFace(c),K.frontFace=c);c=Q.lineWidth;c!==K.lineWidth&&(t.lineWidth(c),K.lineWidth=c);c=Q.polygonOffset_enable;c!==K.polygonOffset_enable&&(c?t.enable(32823):t.disable(32823),K.polygonOffset_enable=c);c=N[0];m=N[1];if(c!==ga[0]||m!==ga[1])t.polygonOffset(c,m),ga[0]=c,ga[1]=m;c=Q.sample_alpha;c!==K.sample_alpha&&(c?t.enable(32926):t.disable(32926),K.sample_alpha=
c);c=Q.sample_enable;c!==K.sample_enable&&(c?t.enable(32928):t.disable(32928),K.sample_enable=c);c=X[0];m=X[1];if(c!==la[0]||m!==la[1])t.sampleCoverage(c,m),la[0]=c,la[1]=m;c=Q.stencil_enable;c!==K.stencil_enable&&(c?t.enable(2960):t.disable(2960),K.stencil_enable=c);c=Q.stencil_mask;c!==K.stencil_mask&&(t.stencilMask(c),K.stencil_mask=c);c=ua[0];m=ua[1];k=ua[2];if(c!==aa[0]||m!==aa[1]||k!==aa[2])t.stencilFunc(c,m,k),aa[0]=c,aa[1]=m,aa[2]=k;c=ma[0];m=ma[1];k=ma[2];p=ma[3];if(c!==sa[0]||m!==sa[1]||
k!==sa[2]||p!==sa[3])t.stencilOpSeparate(c,m,k,p),sa[0]=c,sa[1]=m,sa[2]=k,sa[3]=p;c=za[0];m=za[1];k=za[2];p=za[3];if(c!==ja[0]||m!==ja[1]||k!==ja[2]||p!==ja[3])t.stencilOpSeparate(c,m,k,p),ja[0]=c,ja[1]=m,ja[2]=k,ja[3]=p;c=Q.scissor_enable;c!==K.scissor_enable&&(c?t.enable(3089):t.disable(3089),K.scissor_enable=c);c=oa[0];m=oa[1];k=oa[2];p=oa[3];if(c!==ya[0]||m!==ya[1]||k!==ya[2]||p!==ya[3])t.scissor(c,m,k,p),ya[0]=c,ya[1]=m,ya[2]=k,ya[3]=p;c=Ga[0];m=Ga[1];k=Ga[2];p=Ga[3];if(c!==Da[0]||m!==Da[1]||
k!==Da[2]||p!==Da[3])t.viewport(c,m,k,p),Da[0]=c,Da[1]=m,Da[2]=k,Da[3]=p;K.dirty=!1}if(c=K.profile)h=performance.now(),v.count+=a;t.useProgram(L.program);W.setVAO(null);m=R.location;k=A[m];k.buffer||t.enableVertexAttribArray(m);if(k.type!==e.dtype||3!==k.size||k.buffer!==e||!1!==k.normalized||0!==k.offset||0!==k.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(m,3,e.dtype,!1,0,0),k.type=e.dtype,k.size=3,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;t.uniformMatrix4fv(x.location,!1,na);
m=G.call(this,I,void 0,f);Z(m)&&16===m.length||r.commandRaise(E,q);t.uniformMatrix4fv(F.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(wa[0]=m[0],wa[1]=m[1],wa[2]=m[2],wa[3]=m[3],wa[4]=m[4],wa[5]=m[5],wa[6]=m[6],wa[7]=m[7],wa[8]=m[8],wa[9]=m[9],wa[10]=m[10],wa[11]=m[11],wa[12]=m[12],wa[13]=m[13],wa[14]=m[14],wa[15]=m[15],wa));f=u.call(this,I,void 0,f);Z(f)&&16===f.length||r.commandRaise(B,q);t.uniformMatrix4fv(C.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ea[0]=f[0],Ea[1]=
f[1],Ea[2]=f[2],Ea[3]=f[3],Ea[4]=f[4],Ea[5]=f[5],Ea[6]=f[6],Ea[7]=f[7],Ea[8]=f[8],Ea[9]=f[9],Ea[10]=f[10],Ea[11]=f[11],Ea[12]=f[12],Ea[13]=f[13],Ea[14]=f[14],Ea[15]=f[15],Ea));b&&t.bindBuffer(34963,b.buffer.buffer);m=b.primType;k=b.vertCount-0;0<=k||r.commandRaise(l,q);for(f=0;f<a;++f)k&&t.drawElements(m,k,b.type,0<<(b.type-5121>>1));W.setVAO(null);c&&(v.cpuTime+=performance.now()-h)}}},$20:function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u){var B,b,l,x,R,C,F,A,I,K,D,n,t,Z,Q,Wa,Ba,W,da,V,T,P,M,S,
U,qa,ra,O,N,ga,X,la,oa,ya;B=a.context;b=a.current;l=a.framebuffer;x=a.gl;R=a.next;C=a.shader;F=a.uniforms;A=a.vao;I=R.blend_color;K=b.blend_color;D=R.blend_equation;n=b.blend_equation;t=R.blend_func;Z=b.blend_func;Q=R.colorMask;Wa=b.colorMask;Ba=R.depth_range;W=b.depth_range;da=R.polygonOffset_offset;V=b.polygonOffset_offset;T=R.sample_coverage;P=b.sample_coverage;M=R.scissor_box;S=b.scissor_box;U=R.stencil_func;qa=b.stencil_func;ra=R.stencil_opBack;O=b.stencil_opBack;N=R.stencil_opFront;ga=b.stencil_opFront;
X=R.viewport;la=b.viewport;oa={};ya={};return{draw:function(d){var a,c,h,m,w,r,H,y,F,E,L,G,u;a=B.center;c=B.distance;h=B.eye;m=B.phi;w=B.projection;r=k.call(this,B,d,0);H=B.theta;y=B.up;F=B.view;B.center=f;B.distance=2.302585092994046;B.eye=e;B.phi=0;B.projection=r;B.theta=0;B.up=p;B.view=g;r=l.next;r!==l.cur&&(r?x.bindFramebuffer(36160,r.framebuffer):x.bindFramebuffer(36160,null),l.cur=r);if(b.dirty){r=R.dither;r!==b.dither&&(r?x.enable(3024):x.disable(3024),b.dither=r);r=R.blend_enable;r!==b.blend_enable&&
(r?x.enable(3042):x.disable(3042),b.blend_enable=r);r=I[0];L=I[1];G=I[2];u=I[3];if(r!==K[0]||L!==K[1]||G!==K[2]||u!==K[3])x.blendColor(r,L,G,u),K[0]=r,K[1]=L,K[2]=G,K[3]=u;r=D[0];L=D[1];if(r!==n[0]||L!==n[1])x.blendEquationSeparate(r,L),n[0]=r,n[1]=L;r=t[0];L=t[1];G=t[2];u=t[3];if(r!==Z[0]||L!==Z[1]||G!==Z[2]||u!==Z[3])x.blendFuncSeparate(r,L,G,u),Z[0]=r,Z[1]=L,Z[2]=G,Z[3]=u;r=R.depth_enable;r!==b.depth_enable&&(r?x.enable(2929):x.disable(2929),b.depth_enable=r);r=R.depth_func;r!==b.depth_func&&(x.depthFunc(r),
b.depth_func=r);r=Ba[0];L=Ba[1];if(r!==W[0]||L!==W[1])x.depthRange(r,L),W[0]=r,W[1]=L;r=R.depth_mask;r!==b.depth_mask&&(x.depthMask(r),b.depth_mask=r);r=Q[0];L=Q[1];G=Q[2];u=Q[3];if(r!==Wa[0]||L!==Wa[1]||G!==Wa[2]||u!==Wa[3])x.colorMask(r,L,G,u),Wa[0]=r,Wa[1]=L,Wa[2]=G,Wa[3]=u;r=R.cull_enable;r!==b.cull_enable&&(r?x.enable(2884):x.disable(2884),b.cull_enable=r);r=R.cull_face;r!==b.cull_face&&(x.cullFace(r),b.cull_face=r);r=R.frontFace;r!==b.frontFace&&(x.frontFace(r),b.frontFace=r);r=R.lineWidth;
r!==b.lineWidth&&(x.lineWidth(r),b.lineWidth=r);r=R.polygonOffset_enable;r!==b.polygonOffset_enable&&(r?x.enable(32823):x.disable(32823),b.polygonOffset_enable=r);r=da[0];L=da[1];if(r!==V[0]||L!==V[1])x.polygonOffset(r,L),V[0]=r,V[1]=L;r=R.sample_alpha;r!==b.sample_alpha&&(r?x.enable(32926):x.disable(32926),b.sample_alpha=r);r=R.sample_enable;r!==b.sample_enable&&(r?x.enable(32928):x.disable(32928),b.sample_enable=r);r=T[0];L=T[1];if(r!==P[0]||L!==P[1])x.sampleCoverage(r,L),P[0]=r,P[1]=L;r=R.stencil_enable;
r!==b.stencil_enable&&(r?x.enable(2960):x.disable(2960),b.stencil_enable=r);r=R.stencil_mask;r!==b.stencil_mask&&(x.stencilMask(r),b.stencil_mask=r);r=U[0];L=U[1];G=U[2];if(r!==qa[0]||L!==qa[1]||G!==qa[2])x.stencilFunc(r,L,G),qa[0]=r,qa[1]=L,qa[2]=G;r=N[0];L=N[1];G=N[2];u=N[3];if(r!==ga[0]||L!==ga[1]||G!==ga[2]||u!==ga[3])x.stencilOpSeparate(r,L,G,u),ga[0]=r,ga[1]=L,ga[2]=G,ga[3]=u;r=ra[0];L=ra[1];G=ra[2];u=ra[3];if(r!==O[0]||L!==O[1]||G!==O[2]||u!==O[3])x.stencilOpSeparate(r,L,G,u),O[0]=r,O[1]=L,
O[2]=G,O[3]=u;r=R.scissor_enable;r!==b.scissor_enable&&(r?x.enable(3089):x.disable(3089),b.scissor_enable=r);r=M[0];L=M[1];G=M[2];u=M[3];if(r!==S[0]||L!==S[1]||G!==S[2]||u!==S[3])x.scissor(r,L,G,u),S[0]=r,S[1]=L,S[2]=G,S[3]=u;r=X[0];L=X[1];G=X[2];u=X[3];if(r!==la[0]||L!==la[1]||G!==la[2]||u!==la[3])x.viewport(r,L,G,u),la[0]=r,la[1]=L,la[2]=G,la[3]=u;b.dirty=!1}if(r=b.profile)E=performance.now(),v.count++;L=C.program(C.vert,C.frag,q);x.useProgram(L.program);A.setVAO(null);G=L.id;(u=oa[G])||(u=oa[G]=
z(L));u.call(this,d);A.setVAO(null);B.center=a;B.distance=c;B.eye=h;B.phi=m;B.projection=w;B.theta=H;B.up=y;B.view=F;r&&(v.cpuTime+=performance.now()-E)},scope:function(l,a,n){var e,t,q,f,k,x,p,r,w,g,z,C,H,R,I,J,D,L,E;e=B.center;t=B.distance;q=B.eye;f=B.phi;k=B.projection;x=c.call(this,B,l,n);p=B.theta;r=B.up;w=B.view;B.center=y;B.distance=2.302585092994046;B.eye=m;B.phi=0;B.projection=x;B.theta=0;B.up=d;B.view=h;if(x=b.profile)g=performance.now(),v.count++;z=B.center;C=F[1];F[1]=z;H=B.distance;z=
F[2];F[2]=H;R=B.eye;H=F[3];F[3]=R;I=B.phi;R=F[4];F[4]=I;J=B.projection;I=F[5];F[5]=J;D=B.theta;J=F[6];F[6]=D;L=B.up;D=F[7];F[7]=L;L=B.view;E=F[8];F[8]=L;a(B,l,n);B.center=e;B.distance=t;B.eye=q;B.phi=f;B.projection=k;B.theta=p;B.up=r;B.view=w;x&&(v.cpuTime+=performance.now()-g);F[1]=C;F[2]=z;F[3]=H;F[4]=R;F[5]=I;F[6]=J;F[7]=D;F[8]=E},batch:function(d,a){var c,e,h,m,f,k,p,r,g,z,y,J,F;c=B.center;e=B.distance;h=B.eye;m=B.phi;f=B.projection;k=L.call(this,B,d,0);p=B.theta;r=B.up;g=B.view;B.center=H;B.distance=
2.302585092994046;B.eye=w;B.phi=0;B.projection=k;B.theta=0;B.up=G;B.view=E;k=l.next;k!==l.cur&&(k?x.bindFramebuffer(36160,k.framebuffer):x.bindFramebuffer(36160,null),l.cur=k);if(b.dirty){k=R.dither;k!==b.dither&&(k?x.enable(3024):x.disable(3024),b.dither=k);k=R.blend_enable;k!==b.blend_enable&&(k?x.enable(3042):x.disable(3042),b.blend_enable=k);k=I[0];y=I[1];J=I[2];F=I[3];if(k!==K[0]||y!==K[1]||J!==K[2]||F!==K[3])x.blendColor(k,y,J,F),K[0]=k,K[1]=y,K[2]=J,K[3]=F;k=D[0];y=D[1];if(k!==n[0]||y!==n[1])x.blendEquationSeparate(k,
y),n[0]=k,n[1]=y;k=t[0];y=t[1];J=t[2];F=t[3];if(k!==Z[0]||y!==Z[1]||J!==Z[2]||F!==Z[3])x.blendFuncSeparate(k,y,J,F),Z[0]=k,Z[1]=y,Z[2]=J,Z[3]=F;k=R.depth_enable;k!==b.depth_enable&&(k?x.enable(2929):x.disable(2929),b.depth_enable=k);k=R.depth_func;k!==b.depth_func&&(x.depthFunc(k),b.depth_func=k);k=Ba[0];y=Ba[1];if(k!==W[0]||y!==W[1])x.depthRange(k,y),W[0]=k,W[1]=y;k=R.depth_mask;k!==b.depth_mask&&(x.depthMask(k),b.depth_mask=k);k=Q[0];y=Q[1];J=Q[2];F=Q[3];if(k!==Wa[0]||y!==Wa[1]||J!==Wa[2]||F!==
Wa[3])x.colorMask(k,y,J,F),Wa[0]=k,Wa[1]=y,Wa[2]=J,Wa[3]=F;k=R.cull_enable;k!==b.cull_enable&&(k?x.enable(2884):x.disable(2884),b.cull_enable=k);k=R.cull_face;k!==b.cull_face&&(x.cullFace(k),b.cull_face=k);k=R.frontFace;k!==b.frontFace&&(x.frontFace(k),b.frontFace=k);k=R.lineWidth;k!==b.lineWidth&&(x.lineWidth(k),b.lineWidth=k);k=R.polygonOffset_enable;k!==b.polygonOffset_enable&&(k?x.enable(32823):x.disable(32823),b.polygonOffset_enable=k);k=da[0];y=da[1];if(k!==V[0]||y!==V[1])x.polygonOffset(k,
y),V[0]=k,V[1]=y;k=R.sample_alpha;k!==b.sample_alpha&&(k?x.enable(32926):x.disable(32926),b.sample_alpha=k);k=R.sample_enable;k!==b.sample_enable&&(k?x.enable(32928):x.disable(32928),b.sample_enable=k);k=T[0];y=T[1];if(k!==P[0]||y!==P[1])x.sampleCoverage(k,y),P[0]=k,P[1]=y;k=R.stencil_enable;k!==b.stencil_enable&&(k?x.enable(2960):x.disable(2960),b.stencil_enable=k);k=R.stencil_mask;k!==b.stencil_mask&&(x.stencilMask(k),b.stencil_mask=k);k=U[0];y=U[1];J=U[2];if(k!==qa[0]||y!==qa[1]||J!==qa[2])x.stencilFunc(k,
y,J),qa[0]=k,qa[1]=y,qa[2]=J;k=N[0];y=N[1];J=N[2];F=N[3];if(k!==ga[0]||y!==ga[1]||J!==ga[2]||F!==ga[3])x.stencilOpSeparate(k,y,J,F),ga[0]=k,ga[1]=y,ga[2]=J,ga[3]=F;k=ra[0];y=ra[1];J=ra[2];F=ra[3];if(k!==O[0]||y!==O[1]||J!==O[2]||F!==O[3])x.stencilOpSeparate(k,y,J,F),O[0]=k,O[1]=y,O[2]=J,O[3]=F;k=R.scissor_enable;k!==b.scissor_enable&&(k?x.enable(3089):x.disable(3089),b.scissor_enable=k);k=M[0];y=M[1];J=M[2];F=M[3];if(k!==S[0]||y!==S[1]||J!==S[2]||F!==S[3])x.scissor(k,y,J,F),S[0]=k,S[1]=y,S[2]=J,S[3]=
F;k=X[0];y=X[1];J=X[2];F=X[3];if(k!==la[0]||y!==la[1]||J!==la[2]||F!==la[3])x.viewport(k,y,J,F),la[0]=k,la[1]=y,la[2]=J,la[3]=F;b.dirty=!1}if(k=b.profile)z=performance.now(),v.count+=a;y=C.program(C.vert,C.frag,q);x.useProgram(y.program);A.setVAO(null);J=y.id;(F=ya[J])||(F=ya[J]=u(y));F.call(this,d,a);A.setVAO(null);B.center=c;B.distance=e;B.eye=h;B.phi=m;B.projection=f;B.theta=p;B.up=r;B.view=g;k&&(v.cpuTime+=performance.now()-z)}}},"$27,position,projection,tex,uv,view":function(a,r,q,v,f,e,k,p,
g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l,x,R,C,F,A,I,K,D,n){var t,Z,Q,Wa,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da,sb,Ka,ea,ca,na,wa,Ea,Oa,vb;t=a.attributes;Z=a.context;Q=a.current;Wa=a.draw;Ba=a.framebuffer;W=a.gl;da=a.isArrayLike;V=a.next;T=a.shader;P=a.uniforms;M=a.vao;S=V.blend_color;U=Q.blend_color;qa=V.blend_equation;ra=Q.blend_equation;O=V.blend_func;N=Q.blend_func;ga=V.colorMask;X=Q.colorMask;la=V.depth_range;oa=Q.depth_range;ya=V.polygonOffset_offset;ua=Q.polygonOffset_offset;
aa=V.sample_coverage;za=Q.sample_coverage;ja=V.scissor_box;ma=Q.scissor_box;sa=V.stencil_func;Ga=Q.stencil_func;Da=V.stencil_opBack;sb=Q.stencil_opBack;Ka=V.stencil_opFront;ea=Q.stencil_opFront;ca=V.viewport;na=Q.viewport;wa=new Float32Array(16);Ea=new Float32Array(16);Oa=new Float32Array(16);vb=new Float32Array(16);return{draw:function(b){var l,a,h,x;l=Ba.next;l!==Ba.cur&&(l?W.bindFramebuffer(36160,l.framebuffer):W.bindFramebuffer(36160,null),Ba.cur=l);if(Q.dirty){var w;l=V.dither;l!==Q.dither&&
(l?W.enable(3024):W.disable(3024),Q.dither=l);l=V.blend_enable;l!==Q.blend_enable&&(l?W.enable(3042):W.disable(3042),Q.blend_enable=l);l=S[0];h=S[1];x=S[2];w=S[3];if(l!==U[0]||h!==U[1]||x!==U[2]||w!==U[3])W.blendColor(l,h,x,w),U[0]=l,U[1]=h,U[2]=x,U[3]=w;l=qa[0];h=qa[1];if(l!==ra[0]||h!==ra[1])W.blendEquationSeparate(l,h),ra[0]=l,ra[1]=h;l=O[0];h=O[1];x=O[2];w=O[3];if(l!==N[0]||h!==N[1]||x!==N[2]||w!==N[3])W.blendFuncSeparate(l,h,x,w),N[0]=l,N[1]=h,N[2]=x,N[3]=w;l=V.depth_enable;l!==Q.depth_enable&&
(l?W.enable(2929):W.disable(2929),Q.depth_enable=l);l=V.depth_func;l!==Q.depth_func&&(W.depthFunc(l),Q.depth_func=l);l=la[0];h=la[1];if(l!==oa[0]||h!==oa[1])W.depthRange(l,h),oa[0]=l,oa[1]=h;l=V.depth_mask;l!==Q.depth_mask&&(W.depthMask(l),Q.depth_mask=l);l=ga[0];h=ga[1];x=ga[2];w=ga[3];if(l!==X[0]||h!==X[1]||x!==X[2]||w!==X[3])W.colorMask(l,h,x,w),X[0]=l,X[1]=h,X[2]=x,X[3]=w;l=V.cull_enable;l!==Q.cull_enable&&(l?W.enable(2884):W.disable(2884),Q.cull_enable=l);l=V.cull_face;l!==Q.cull_face&&(W.cullFace(l),
Q.cull_face=l);l=V.frontFace;l!==Q.frontFace&&(W.frontFace(l),Q.frontFace=l);l=V.lineWidth;l!==Q.lineWidth&&(W.lineWidth(l),Q.lineWidth=l);l=V.polygonOffset_enable;l!==Q.polygonOffset_enable&&(l?W.enable(32823):W.disable(32823),Q.polygonOffset_enable=l);l=ya[0];h=ya[1];if(l!==ua[0]||h!==ua[1])W.polygonOffset(l,h),ua[0]=l,ua[1]=h;l=V.sample_alpha;l!==Q.sample_alpha&&(l?W.enable(32926):W.disable(32926),Q.sample_alpha=l);l=V.sample_enable;l!==Q.sample_enable&&(l?W.enable(32928):W.disable(32928),Q.sample_enable=
l);l=aa[0];h=aa[1];if(l!==za[0]||h!==za[1])W.sampleCoverage(l,h),za[0]=l,za[1]=h;l=V.stencil_enable;l!==Q.stencil_enable&&(l?W.enable(2960):W.disable(2960),Q.stencil_enable=l);l=V.stencil_mask;l!==Q.stencil_mask&&(W.stencilMask(l),Q.stencil_mask=l);l=sa[0];h=sa[1];x=sa[2];if(l!==Ga[0]||h!==Ga[1]||x!==Ga[2])W.stencilFunc(l,h,x),Ga[0]=l,Ga[1]=h,Ga[2]=x;l=Ka[0];h=Ka[1];x=Ka[2];w=Ka[3];if(l!==ea[0]||h!==ea[1]||x!==ea[2]||w!==ea[3])W.stencilOpSeparate(l,h,x,w),ea[0]=l,ea[1]=h,ea[2]=x,ea[3]=w;l=Da[0];h=
Da[1];x=Da[2];w=Da[3];if(l!==sb[0]||h!==sb[1]||x!==sb[2]||w!==sb[3])W.stencilOpSeparate(l,h,x,w),sb[0]=l,sb[1]=h,sb[2]=x,sb[3]=w;l=V.scissor_enable;l!==Q.scissor_enable&&(l?W.enable(3089):W.disable(3089),Q.scissor_enable=l);l=ja[0];h=ja[1];x=ja[2];w=ja[3];if(l!==ma[0]||h!==ma[1]||x!==ma[2]||w!==ma[3])W.scissor(l,h,x,w),ma[0]=l,ma[1]=h,ma[2]=x,ma[3]=w;l=ca[0];h=ca[1];x=ca[2];w=ca[3];if(l!==na[0]||h!==na[1]||x!==na[2]||w!==na[3])W.viewport(l,h,x,w),na[0]=l,na[1]=h,na[2]=x,na[3]=w;Q.dirty=!1}if(l=Q.profile)a=
performance.now(),v.count++;W.useProgram(f.program);M.setVAO(null);h=A.location;x=t[h];x.buffer||W.enableVertexAttribArray(h);if(x.type!==e.dtype||3!==x.size||x.buffer!==e||!1!==x.normalized||0!==x.offset||0!==x.stride)W.bindBuffer(34962,e.buffer),W.vertexAttribPointer(h,3,e.dtype,!1,0,0),x.type=e.dtype,x.size=3,x.buffer=e,x.normalized=!1,x.offset=0,x.stride=0;h=D.location;x=t[h];x.buffer||W.enableVertexAttribArray(h);if(x.type!==k.dtype||2!==x.size||x.buffer!==k||!1!==x.normalized||0!==x.offset||
0!==x.stride)W.bindBuffer(34962,k.buffer),W.vertexAttribPointer(h,2,k.dtype,!1,0,0),x.type=k.dtype,x.size=2,x.buffer=k,x.normalized=!1,x.offset=0,x.stride=0;h=p.call(this,Z,b,0);da(h)&&16===h.length||r.commandRaise(g,q);W.uniformMatrix4fv(I.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(wa[0]=h[0],wa[1]=h[1],wa[2]=h[2],wa[3]=h[3],wa[4]=h[4],wa[5]=h[5],wa[6]=h[6],wa[7]=h[7],wa[8]=h[8],wa[9]=h[9],wa[10]=h[10],wa[11]=h[11],wa[12]=h[12],wa[13]=h[13],wa[14]=h[14],wa[15]=h[15],wa));h=z.call(this,
Z,b,0);da(h)&&16===h.length||r.commandRaise(y,q);W.uniformMatrix4fv(n.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ea[0]=h[0],Ea[1]=h[1],Ea[2]=h[2],Ea[3]=h[3],Ea[4]=h[4],Ea[5]=h[5],Ea[6]=h[6],Ea[7]=h[7],Ea[8]=h[8],Ea[9]=h[9],Ea[10]=h[10],Ea[11]=h[11],Ea[12]=h[12],Ea[13]=h[13],Ea[14]=h[14],Ea[15]=h[15],Ea));(b=b.texture)&&"framebuffer"===b._reglType&&(b=b.color[0]);"function"===typeof b&&"texture2d"===b._reglType||r.commandRaise(m,q);b=b._texture;W.uniform1i(K.location,b.bind());c&&W.bindBuffer(34963,
c.buffer.buffer);h=c.primType;x=c.vertCount-0;0<=x||r.commandRaise(d,q);x&&(W.drawElements(h,x,c.type,0<<(c.type-5121>>1)),M.setVAO(null),l&&(v.cpuTime+=performance.now()-a),b.unbind())},scope:function(b,l,a){var d,c,n,t,m,f,x,p,g,z,C,y,R,J,I,F,B,D,u,K,ea,A,ia,M,O,ca,aa,N,X,ta,S,U,V,na,W;if(d=Q.profile)c=performance.now(),v.count++;n=Wa.elements;Wa.elements=h;t=Wa.offset;Wa.offset=0;m=h.vertCount-0;0<=m||r.commandRaise(H,q);f=Wa.count;Wa.count=m;x=h.primType;m=Wa.primitive;Wa.primitive=x;p=w.call(this,
Z,b,a);x=P[3];P[3]=p;g=b.texture;p=P[5];P[5]=g;z=L.call(this,Z,b,a);g=P[4];P[4]=z;z=G.buffer;G.buffer=e;C=G.divisor;G.divisor=0;y=G.normalized;G.normalized=!1;R=G.offset;G.offset=0;J=G.size;G.size=0;I=G.state;G.state=1;F=G.stride;G.stride=0;B=G.type;G.type=e.dtype;D=G.w;G.w=0;u=G.x;G.x=0;K=G.y;G.y=0;ea=G.z;G.z=0;A=E.buffer;E.buffer=k;ia=E.divisor;E.divisor=0;M=E.normalized;E.normalized=!1;O=E.offset;E.offset=0;ca=E.size;E.size=0;aa=E.state;E.state=1;N=E.stride;E.stride=0;X=E.type;E.type=k.dtype;ta=
E.w;E.w=0;S=E.x;E.x=0;U=E.y;E.y=0;V=E.z;E.z=0;na=T.vert;T.vert=2;W=T.frag;T.frag=1;l(Z,b,a);d&&(v.cpuTime+=performance.now()-c);Wa.elements=n;Wa.offset=t;Wa.count=f;Wa.primitive=m;P[3]=x;P[5]=p;P[4]=g;G.buffer=z;G.divisor=C;G.normalized=y;G.offset=R;G.size=J;G.state=I;G.stride=F;G.type=B;G.w=D;G.x=u;G.y=K;G.z=ea;E.buffer=A;E.divisor=ia;E.normalized=M;E.offset=O;E.size=ca;E.state=aa;E.stride=N;E.type=X;E.w=ta;E.x=S;E.y=U;E.z=V;T.vert=na;T.frag=W},batch:function(a,d){var c,h,m,f;c=Ba.next;c!==Ba.cur&&
(c?W.bindFramebuffer(36160,c.framebuffer):W.bindFramebuffer(36160,null),Ba.cur=c);if(Q.dirty){var p,w,g;c=V.dither;c!==Q.dither&&(c?W.enable(3024):W.disable(3024),Q.dither=c);c=V.blend_enable;c!==Q.blend_enable&&(c?W.enable(3042):W.disable(3042),Q.blend_enable=c);c=S[0];p=S[1];w=S[2];g=S[3];if(c!==U[0]||p!==U[1]||w!==U[2]||g!==U[3])W.blendColor(c,p,w,g),U[0]=c,U[1]=p,U[2]=w,U[3]=g;c=qa[0];p=qa[1];if(c!==ra[0]||p!==ra[1])W.blendEquationSeparate(c,p),ra[0]=c,ra[1]=p;c=O[0];p=O[1];w=O[2];g=O[3];if(c!==
N[0]||p!==N[1]||w!==N[2]||g!==N[3])W.blendFuncSeparate(c,p,w,g),N[0]=c,N[1]=p,N[2]=w,N[3]=g;c=V.depth_enable;c!==Q.depth_enable&&(c?W.enable(2929):W.disable(2929),Q.depth_enable=c);c=V.depth_func;c!==Q.depth_func&&(W.depthFunc(c),Q.depth_func=c);c=la[0];p=la[1];if(c!==oa[0]||p!==oa[1])W.depthRange(c,p),oa[0]=c,oa[1]=p;c=V.depth_mask;c!==Q.depth_mask&&(W.depthMask(c),Q.depth_mask=c);c=ga[0];p=ga[1];w=ga[2];g=ga[3];if(c!==X[0]||p!==X[1]||w!==X[2]||g!==X[3])W.colorMask(c,p,w,g),X[0]=c,X[1]=p,X[2]=w,
X[3]=g;c=V.cull_enable;c!==Q.cull_enable&&(c?W.enable(2884):W.disable(2884),Q.cull_enable=c);c=V.cull_face;c!==Q.cull_face&&(W.cullFace(c),Q.cull_face=c);c=V.frontFace;c!==Q.frontFace&&(W.frontFace(c),Q.frontFace=c);c=V.lineWidth;c!==Q.lineWidth&&(W.lineWidth(c),Q.lineWidth=c);c=V.polygonOffset_enable;c!==Q.polygonOffset_enable&&(c?W.enable(32823):W.disable(32823),Q.polygonOffset_enable=c);c=ya[0];p=ya[1];if(c!==ua[0]||p!==ua[1])W.polygonOffset(c,p),ua[0]=c,ua[1]=p;c=V.sample_alpha;c!==Q.sample_alpha&&
(c?W.enable(32926):W.disable(32926),Q.sample_alpha=c);c=V.sample_enable;c!==Q.sample_enable&&(c?W.enable(32928):W.disable(32928),Q.sample_enable=c);c=aa[0];p=aa[1];if(c!==za[0]||p!==za[1])W.sampleCoverage(c,p),za[0]=c,za[1]=p;c=V.stencil_enable;c!==Q.stencil_enable&&(c?W.enable(2960):W.disable(2960),Q.stencil_enable=c);c=V.stencil_mask;c!==Q.stencil_mask&&(W.stencilMask(c),Q.stencil_mask=c);c=sa[0];p=sa[1];w=sa[2];if(c!==Ga[0]||p!==Ga[1]||w!==Ga[2])W.stencilFunc(c,p,w),Ga[0]=c,Ga[1]=p,Ga[2]=w;c=Ka[0];
p=Ka[1];w=Ka[2];g=Ka[3];if(c!==ea[0]||p!==ea[1]||w!==ea[2]||g!==ea[3])W.stencilOpSeparate(c,p,w,g),ea[0]=c,ea[1]=p,ea[2]=w,ea[3]=g;c=Da[0];p=Da[1];w=Da[2];g=Da[3];if(c!==sb[0]||p!==sb[1]||w!==sb[2]||g!==sb[3])W.stencilOpSeparate(c,p,w,g),sb[0]=c,sb[1]=p,sb[2]=w,sb[3]=g;c=V.scissor_enable;c!==Q.scissor_enable&&(c?W.enable(3089):W.disable(3089),Q.scissor_enable=c);c=ja[0];p=ja[1];w=ja[2];g=ja[3];if(c!==ma[0]||p!==ma[1]||w!==ma[2]||g!==ma[3])W.scissor(c,p,w,g),ma[0]=c,ma[1]=p,ma[2]=w,ma[3]=g;c=ca[0];
p=ca[1];w=ca[2];g=ca[3];if(c!==na[0]||p!==na[1]||w!==na[2]||g!==na[3])W.viewport(c,p,w,g),na[0]=c,na[1]=p,na[2]=w,na[3]=g;Q.dirty=!1}if(c=Q.profile)h=performance.now(),v.count+=d;W.useProgram(u.program);M.setVAO(null);p=A.location;w=t[p];w.buffer||W.enableVertexAttribArray(p);if(w.type!==e.dtype||3!==w.size||w.buffer!==e||!1!==w.normalized||0!==w.offset||0!==w.stride)W.bindBuffer(34962,e.buffer),W.vertexAttribPointer(p,3,e.dtype,!1,0,0),w.type=e.dtype,w.size=3,w.buffer=e,w.normalized=!1,w.offset=
0,w.stride=0;p=D.location;w=t[p];w.buffer||W.enableVertexAttribArray(p);if(w.type!==k.dtype||2!==w.size||w.buffer!==k||!1!==w.normalized||0!==w.offset||0!==w.stride)W.bindBuffer(34962,k.buffer),W.vertexAttribPointer(p,2,k.dtype,!1,0,0),w.type=k.dtype,w.size=2,w.buffer=k,w.normalized=!1,w.offset=0,w.stride=0;p=B.call(this,Z,f,m);da(p)&&16===p.length||r.commandRaise(b,q);W.uniformMatrix4fv(I.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Oa[0]=p[0],Oa[1]=p[1],Oa[2]=p[2],Oa[3]=p[3],Oa[4]=
p[4],Oa[5]=p[5],Oa[6]=p[6],Oa[7]=p[7],Oa[8]=p[8],Oa[9]=p[9],Oa[10]=p[10],Oa[11]=p[11],Oa[12]=p[12],Oa[13]=p[13],Oa[14]=p[14],Oa[15]=p[15],Oa));m=l.call(this,Z,f,m);da(m)&&16===m.length||r.commandRaise(x,q);W.uniformMatrix4fv(n.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(vb[0]=m[0],vb[1]=m[1],vb[2]=m[2],vb[3]=m[3],vb[4]=m[4],vb[5]=m[5],vb[6]=m[6],vb[7]=m[7],vb[8]=m[8],vb[9]=m[9],vb[10]=m[10],vb[11]=m[11],vb[12]=m[12],vb[13]=m[13],vb[14]=m[14],vb[15]=m[15],vb));C&&W.bindBuffer(34963,
C.buffer.buffer);p=C.primType;w=C.vertCount-0;0<=w||r.commandRaise(F,q);for(m=0;m<d;++m)f=a[m],(f=f.texture)&&"framebuffer"===f._reglType&&(f=f.color[0]),"function"===typeof f&&"texture2d"===f._reglType||r.commandRaise(R,q),f=f._texture,W.uniform1i(K.location,f.bind()),w&&(W.drawElements(p,w,C.type,0<<(C.type-5121>>1)),f.unbind());M.setVAO(null);c&&(v.cpuTime+=performance.now()-h)}}},"$19,normal,position,projection,view":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L,G,E,u,B,b,l){var x,R,C,F,A,I,K,
D,n,t,Z,Q,Wa,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa,Ga,Da;x=a.attributes;R=a.context;C=a.current;F=a.draw;A=a.framebuffer;I=a.gl;K=a.isArrayLike;D=a.next;n=a.shader;t=a.uniforms;Z=a.vao;Q=D.blend_color;Wa=C.blend_color;Ba=D.blend_equation;W=C.blend_equation;da=D.blend_func;V=C.blend_func;T=D.colorMask;P=C.colorMask;M=D.depth_range;S=C.depth_range;U=D.polygonOffset_offset;qa=C.polygonOffset_offset;ra=D.sample_coverage;O=C.sample_coverage;N=D.scissor_box;ga=C.scissor_box;X=D.stencil_func;
la=C.stencil_func;oa=D.stencil_opBack;ya=C.stencil_opBack;ua=D.stencil_opFront;aa=C.stencil_opFront;za=D.viewport;ja=C.viewport;ma=new Float32Array(16);sa=new Float32Array(16);Ga=new Float32Array(16);Da=new Float32Array(16);return{draw:function(c){var a,d,n;c=A.next;c!==A.cur&&(c?I.bindFramebuffer(36160,c.framebuffer):I.bindFramebuffer(36160,null),A.cur=c);if(C.dirty){var h;c=D.dither;c!==C.dither&&(c?I.enable(3024):I.disable(3024),C.dither=c);c=D.blend_enable;c!==C.blend_enable&&(c?I.enable(3042):
I.disable(3042),C.blend_enable=c);c=Q[0];d=Q[1];n=Q[2];h=Q[3];if(c!==Wa[0]||d!==Wa[1]||n!==Wa[2]||h!==Wa[3])I.blendColor(c,d,n,h),Wa[0]=c,Wa[1]=d,Wa[2]=n,Wa[3]=h;c=Ba[0];d=Ba[1];if(c!==W[0]||d!==W[1])I.blendEquationSeparate(c,d),W[0]=c,W[1]=d;c=da[0];d=da[1];n=da[2];h=da[3];if(c!==V[0]||d!==V[1]||n!==V[2]||h!==V[3])I.blendFuncSeparate(c,d,n,h),V[0]=c,V[1]=d,V[2]=n,V[3]=h;c=D.depth_enable;c!==C.depth_enable&&(c?I.enable(2929):I.disable(2929),C.depth_enable=c);c=D.depth_func;c!==C.depth_func&&(I.depthFunc(c),
C.depth_func=c);c=M[0];d=M[1];if(c!==S[0]||d!==S[1])I.depthRange(c,d),S[0]=c,S[1]=d;c=D.depth_mask;c!==C.depth_mask&&(I.depthMask(c),C.depth_mask=c);c=T[0];d=T[1];n=T[2];h=T[3];if(c!==P[0]||d!==P[1]||n!==P[2]||h!==P[3])I.colorMask(c,d,n,h),P[0]=c,P[1]=d,P[2]=n,P[3]=h;c=D.cull_enable;c!==C.cull_enable&&(c?I.enable(2884):I.disable(2884),C.cull_enable=c);c=D.cull_face;c!==C.cull_face&&(I.cullFace(c),C.cull_face=c);c=D.frontFace;c!==C.frontFace&&(I.frontFace(c),C.frontFace=c);c=D.lineWidth;c!==C.lineWidth&&
(I.lineWidth(c),C.lineWidth=c);c=D.polygonOffset_enable;c!==C.polygonOffset_enable&&(c?I.enable(32823):I.disable(32823),C.polygonOffset_enable=c);c=U[0];d=U[1];if(c!==qa[0]||d!==qa[1])I.polygonOffset(c,d),qa[0]=c,qa[1]=d;c=D.sample_alpha;c!==C.sample_alpha&&(c?I.enable(32926):I.disable(32926),C.sample_alpha=c);c=D.sample_enable;c!==C.sample_enable&&(c?I.enable(32928):I.disable(32928),C.sample_enable=c);c=ra[0];d=ra[1];if(c!==O[0]||d!==O[1])I.sampleCoverage(c,d),O[0]=c,O[1]=d;c=D.stencil_enable;c!==
C.stencil_enable&&(c?I.enable(2960):I.disable(2960),C.stencil_enable=c);c=D.stencil_mask;c!==C.stencil_mask&&(I.stencilMask(c),C.stencil_mask=c);c=X[0];d=X[1];n=X[2];if(c!==la[0]||d!==la[1]||n!==la[2])I.stencilFunc(c,d,n),la[0]=c,la[1]=d,la[2]=n;c=ua[0];d=ua[1];n=ua[2];h=ua[3];if(c!==aa[0]||d!==aa[1]||n!==aa[2]||h!==aa[3])I.stencilOpSeparate(c,d,n,h),aa[0]=c,aa[1]=d,aa[2]=n,aa[3]=h;c=oa[0];d=oa[1];n=oa[2];h=oa[3];if(c!==ya[0]||d!==ya[1]||n!==ya[2]||h!==ya[3])I.stencilOpSeparate(c,d,n,h),ya[0]=c,ya[1]=
d,ya[2]=n,ya[3]=h;c=D.scissor_enable;c!==C.scissor_enable&&(c?I.enable(3089):I.disable(3089),C.scissor_enable=c);c=N[0];d=N[1];n=N[2];h=N[3];if(c!==ga[0]||d!==ga[1]||n!==ga[2]||h!==ga[3])I.scissor(c,d,n,h),ga[0]=c,ga[1]=d,ga[2]=n,ga[3]=h;c=za[0];d=za[1];n=za[2];h=za[3];if(c!==ja[0]||d!==ja[1]||n!==ja[2]||h!==ja[3])I.viewport(c,d,n,h),ja[0]=c,ja[1]=d,ja[2]=n,ja[3]=h;C.dirty=!1}if(c=C.profile)a=performance.now(),v.count++;I.useProgram(f.program);Z.setVAO(null);d=B.location;n=x[d];n.buffer||I.enableVertexAttribArray(d);
if(n.type!==e.dtype||3!==n.size||n.buffer!==e||!1!==n.normalized||0!==n.offset||0!==n.stride)I.bindBuffer(34962,e.buffer),I.vertexAttribPointer(d,3,e.dtype,!1,0,0),n.type=e.dtype,n.size=3,n.buffer=e,n.normalized=!1,n.offset=0,n.stride=0;d=u.location;n=x[d];n.buffer||I.enableVertexAttribArray(d);if(n.type!==k.dtype||3!==n.size||n.buffer!==k||!1!==n.normalized||0!==n.offset||0!==n.stride)I.bindBuffer(34962,k.buffer),I.vertexAttribPointer(d,3,k.dtype,!1,0,0),n.type=k.dtype,n.size=3,n.buffer=k,n.normalized=
!1,n.offset=0,n.stride=0;d=t[5];K(d)&&16===d.length||r.commandRaise(p,q);I.uniformMatrix4fv(b.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(ma[0]=d[0],ma[1]=d[1],ma[2]=d[2],ma[3]=d[3],ma[4]=d[4],ma[5]=d[5],ma[6]=d[6],ma[7]=d[7],ma[8]=d[8],ma[9]=d[9],ma[10]=d[10],ma[11]=d[11],ma[12]=d[12],ma[13]=d[13],ma[14]=d[14],ma[15]=d[15],ma));d=t[8];K(d)&&16===d.length||r.commandRaise(g,q);I.uniformMatrix4fv(l.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(sa[0]=d[0],sa[1]=d[1],sa[2]=
d[2],sa[3]=d[3],sa[4]=d[4],sa[5]=d[5],sa[6]=d[6],sa[7]=d[7],sa[8]=d[8],sa[9]=d[9],sa[10]=d[10],sa[11]=d[11],sa[12]=d[12],sa[13]=d[13],sa[14]=d[14],sa[15]=d[15],sa));z&&I.bindBuffer(34963,z.buffer.buffer);d=z.primType;n=z.vertCount-0;0<=n||r.commandRaise(y,q);n&&(I.drawElements(d,n,z.type,0<<(z.type-5121>>1)),Z.setVAO(null),c&&(v.cpuTime+=performance.now()-a))},scope:function(b,l,a){var t,f,x,p,w,g,z,H,y,J,I,B,D,L,E,G,Z,Q,u,K,A,ia,M,O,aa,N,P,X,S,ta,T,U;if(t=C.profile)f=performance.now(),v.count++;
x=F.elements;F.elements=m;p=F.offset;F.offset=0;w=m.vertCount-0;0<=w||r.commandRaise(c,q);g=F.count;F.count=w;z=m.primType;w=F.primitive;F.primitive=z;z=d.buffer;d.buffer=k;H=d.divisor;d.divisor=0;y=d.normalized;d.normalized=!1;J=d.offset;d.offset=0;I=d.size;d.size=0;B=d.state;d.state=1;D=d.stride;d.stride=0;L=d.type;d.type=k.dtype;E=d.w;d.w=0;G=d.x;d.x=0;Z=d.y;d.y=0;Q=d.z;d.z=0;u=h.buffer;h.buffer=e;K=h.divisor;h.divisor=0;A=h.normalized;h.normalized=!1;ia=h.offset;h.offset=0;M=h.size;h.size=0;O=
h.state;h.state=1;aa=h.stride;h.stride=0;N=h.type;h.type=e.dtype;P=h.w;h.w=0;X=h.x;h.x=0;S=h.y;h.y=0;ta=h.z;h.z=0;T=n.vert;n.vert=10;U=n.frag;n.frag=9;l(R,b,a);t&&(v.cpuTime+=performance.now()-f);F.elements=x;F.offset=p;F.count=g;F.primitive=w;d.buffer=z;d.divisor=H;d.normalized=y;d.offset=J;d.size=I;d.state=B;d.stride=D;d.type=L;d.w=E;d.x=G;d.y=Z;d.z=Q;h.buffer=u;h.divisor=K;h.normalized=A;h.offset=ia;h.size=M;h.state=O;h.stride=aa;h.type=N;h.w=P;h.x=X;h.y=S;h.z=ta;n.vert=T;n.frag=U},batch:function(c,
d){var a,n,h;a=A.next;a!==A.cur&&(a?I.bindFramebuffer(36160,a.framebuffer):I.bindFramebuffer(36160,null),A.cur=a);if(C.dirty){var m,f;a=D.dither;a!==C.dither&&(a?I.enable(3024):I.disable(3024),C.dither=a);a=D.blend_enable;a!==C.blend_enable&&(a?I.enable(3042):I.disable(3042),C.blend_enable=a);a=Q[0];h=Q[1];m=Q[2];f=Q[3];if(a!==Wa[0]||h!==Wa[1]||m!==Wa[2]||f!==Wa[3])I.blendColor(a,h,m,f),Wa[0]=a,Wa[1]=h,Wa[2]=m,Wa[3]=f;a=Ba[0];h=Ba[1];if(a!==W[0]||h!==W[1])I.blendEquationSeparate(a,h),W[0]=a,W[1]=
h;a=da[0];h=da[1];m=da[2];f=da[3];if(a!==V[0]||h!==V[1]||m!==V[2]||f!==V[3])I.blendFuncSeparate(a,h,m,f),V[0]=a,V[1]=h,V[2]=m,V[3]=f;a=D.depth_enable;a!==C.depth_enable&&(a?I.enable(2929):I.disable(2929),C.depth_enable=a);a=D.depth_func;a!==C.depth_func&&(I.depthFunc(a),C.depth_func=a);a=M[0];h=M[1];if(a!==S[0]||h!==S[1])I.depthRange(a,h),S[0]=a,S[1]=h;a=D.depth_mask;a!==C.depth_mask&&(I.depthMask(a),C.depth_mask=a);a=T[0];h=T[1];m=T[2];f=T[3];if(a!==P[0]||h!==P[1]||m!==P[2]||f!==P[3])I.colorMask(a,
h,m,f),P[0]=a,P[1]=h,P[2]=m,P[3]=f;a=D.cull_enable;a!==C.cull_enable&&(a?I.enable(2884):I.disable(2884),C.cull_enable=a);a=D.cull_face;a!==C.cull_face&&(I.cullFace(a),C.cull_face=a);a=D.frontFace;a!==C.frontFace&&(I.frontFace(a),C.frontFace=a);a=D.lineWidth;a!==C.lineWidth&&(I.lineWidth(a),C.lineWidth=a);a=D.polygonOffset_enable;a!==C.polygonOffset_enable&&(a?I.enable(32823):I.disable(32823),C.polygonOffset_enable=a);a=U[0];h=U[1];if(a!==qa[0]||h!==qa[1])I.polygonOffset(a,h),qa[0]=a,qa[1]=h;a=D.sample_alpha;
a!==C.sample_alpha&&(a?I.enable(32926):I.disable(32926),C.sample_alpha=a);a=D.sample_enable;a!==C.sample_enable&&(a?I.enable(32928):I.disable(32928),C.sample_enable=a);a=ra[0];h=ra[1];if(a!==O[0]||h!==O[1])I.sampleCoverage(a,h),O[0]=a,O[1]=h;a=D.stencil_enable;a!==C.stencil_enable&&(a?I.enable(2960):I.disable(2960),C.stencil_enable=a);a=D.stencil_mask;a!==C.stencil_mask&&(I.stencilMask(a),C.stencil_mask=a);a=X[0];h=X[1];m=X[2];if(a!==la[0]||h!==la[1]||m!==la[2])I.stencilFunc(a,h,m),la[0]=a,la[1]=
h,la[2]=m;a=ua[0];h=ua[1];m=ua[2];f=ua[3];if(a!==aa[0]||h!==aa[1]||m!==aa[2]||f!==aa[3])I.stencilOpSeparate(a,h,m,f),aa[0]=a,aa[1]=h,aa[2]=m,aa[3]=f;a=oa[0];h=oa[1];m=oa[2];f=oa[3];if(a!==ya[0]||h!==ya[1]||m!==ya[2]||f!==ya[3])I.stencilOpSeparate(a,h,m,f),ya[0]=a,ya[1]=h,ya[2]=m,ya[3]=f;a=D.scissor_enable;a!==C.scissor_enable&&(a?I.enable(3089):I.disable(3089),C.scissor_enable=a);a=N[0];h=N[1];m=N[2];f=N[3];if(a!==ga[0]||h!==ga[1]||m!==ga[2]||f!==ga[3])I.scissor(a,h,m,f),ga[0]=a,ga[1]=h,ga[2]=m,ga[3]=
f;a=za[0];h=za[1];m=za[2];f=za[3];if(a!==ja[0]||h!==ja[1]||m!==ja[2]||f!==ja[3])I.viewport(a,h,m,f),ja[0]=a,ja[1]=h,ja[2]=m,ja[3]=f;C.dirty=!1}if(a=C.profile)n=performance.now(),v.count+=d;I.useProgram(H.program);Z.setVAO(null);h=B.location;m=x[h];m.buffer||I.enableVertexAttribArray(h);if(m.type!==e.dtype||3!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||0!==m.stride)I.bindBuffer(34962,e.buffer),I.vertexAttribPointer(h,3,e.dtype,!1,0,0),m.type=e.dtype,m.size=3,m.buffer=e,m.normalized=!1,
m.offset=0,m.stride=0;h=u.location;m=x[h];m.buffer||I.enableVertexAttribArray(h);if(m.type!==k.dtype||3!==m.size||m.buffer!==k||!1!==m.normalized||0!==m.offset||0!==m.stride)I.bindBuffer(34962,k.buffer),I.vertexAttribPointer(h,3,k.dtype,!1,0,0),m.type=k.dtype,m.size=3,m.buffer=k,m.normalized=!1,m.offset=0,m.stride=0;h=t[5];K(h)&&16===h.length||r.commandRaise(w,q);I.uniformMatrix4fv(b.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ga[0]=h[0],Ga[1]=h[1],Ga[2]=h[2],Ga[3]=h[3],Ga[4]=h[4],
Ga[5]=h[5],Ga[6]=h[6],Ga[7]=h[7],Ga[8]=h[8],Ga[9]=h[9],Ga[10]=h[10],Ga[11]=h[11],Ga[12]=h[12],Ga[13]=h[13],Ga[14]=h[14],Ga[15]=h[15],Ga));h=t[8];K(h)&&16===h.length||r.commandRaise(L,q);I.uniformMatrix4fv(l.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Da[0]=h[0],Da[1]=h[1],Da[2]=h[2],Da[3]=h[3],Da[4]=h[4],Da[5]=h[5],Da[6]=h[6],Da[7]=h[7],Da[8]=h[8],Da[9]=h[9],Da[10]=h[10],Da[11]=h[11],Da[12]=h[12],Da[13]=h[13],Da[14]=h[14],Da[15]=h[15],Da));G&&I.bindBuffer(34963,G.buffer.buffer);m=G.primType;
f=G.vertCount-0;0<=f||r.commandRaise(E,q);for(h=0;h<d;++h)f&&I.drawElements(m,f,G.type,0<<(G.type-5121>>1));Z.setVAO(null);a&&(v.cpuTime+=performance.now()-n)}}},"$14,angle,color,position":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,L){var G,E,u,B,b,l,x,R,C,F,A,I,K,D,n,t,Z,Q,Wa,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa;G=a.attributes;E=a.context;u=a.current;B=a.draw;b=a.elements;l=a.framebuffer;x=a.gl;R=a.isArrayLike;C=a.next;F=a.shader;A=a.uniforms;I=a.vao;K=C.blend_color;D=u.blend_color;n=C.blend_equation;
t=u.blend_equation;Z=C.blend_func;Q=u.blend_func;Wa=C.colorMask;Ba=u.colorMask;W=C.depth_range;da=u.depth_range;V=C.polygonOffset_offset;T=u.polygonOffset_offset;P=C.sample_coverage;M=u.sample_coverage;S=C.scissor_box;U=u.scissor_box;qa=C.stencil_func;ra=u.stencil_func;O=C.stencil_opBack;N=u.stencil_opBack;ga=C.stencil_opFront;X=u.stencil_opFront;la=C.viewport;oa=u.viewport;return{draw:function(c){var a,d,h,m;a=l.next;a!==l.cur&&(a?x.bindFramebuffer(36160,a.framebuffer):x.bindFramebuffer(36160,null),
l.cur=a);if(u.dirty){var z;a=C.dither;a!==u.dither&&(a?x.enable(3024):x.disable(3024),u.dither=a);a=C.blend_enable;a!==u.blend_enable&&(a?x.enable(3042):x.disable(3042),u.blend_enable=a);a=K[0];h=K[1];m=K[2];z=K[3];if(a!==D[0]||h!==D[1]||m!==D[2]||z!==D[3])x.blendColor(a,h,m,z),D[0]=a,D[1]=h,D[2]=m,D[3]=z;a=n[0];h=n[1];if(a!==t[0]||h!==t[1])x.blendEquationSeparate(a,h),t[0]=a,t[1]=h;a=Z[0];h=Z[1];m=Z[2];z=Z[3];if(a!==Q[0]||h!==Q[1]||m!==Q[2]||z!==Q[3])x.blendFuncSeparate(a,h,m,z),Q[0]=a,Q[1]=h,Q[2]=
m,Q[3]=z;a=C.depth_func;a!==u.depth_func&&(x.depthFunc(a),u.depth_func=a);a=W[0];h=W[1];if(a!==da[0]||h!==da[1])x.depthRange(a,h),da[0]=a,da[1]=h;a=C.depth_mask;a!==u.depth_mask&&(x.depthMask(a),u.depth_mask=a);a=Wa[0];h=Wa[1];m=Wa[2];z=Wa[3];if(a!==Ba[0]||h!==Ba[1]||m!==Ba[2]||z!==Ba[3])x.colorMask(a,h,m,z),Ba[0]=a,Ba[1]=h,Ba[2]=m,Ba[3]=z;a=C.cull_enable;a!==u.cull_enable&&(a?x.enable(2884):x.disable(2884),u.cull_enable=a);a=C.cull_face;a!==u.cull_face&&(x.cullFace(a),u.cull_face=a);a=C.frontFace;
a!==u.frontFace&&(x.frontFace(a),u.frontFace=a);a=C.lineWidth;a!==u.lineWidth&&(x.lineWidth(a),u.lineWidth=a);a=C.polygonOffset_enable;a!==u.polygonOffset_enable&&(a?x.enable(32823):x.disable(32823),u.polygonOffset_enable=a);a=V[0];h=V[1];if(a!==T[0]||h!==T[1])x.polygonOffset(a,h),T[0]=a,T[1]=h;a=C.sample_alpha;a!==u.sample_alpha&&(a?x.enable(32926):x.disable(32926),u.sample_alpha=a);a=C.sample_enable;a!==u.sample_enable&&(a?x.enable(32928):x.disable(32928),u.sample_enable=a);a=P[0];h=P[1];if(a!==
M[0]||h!==M[1])x.sampleCoverage(a,h),M[0]=a,M[1]=h;a=C.stencil_enable;a!==u.stencil_enable&&(a?x.enable(2960):x.disable(2960),u.stencil_enable=a);a=C.stencil_mask;a!==u.stencil_mask&&(x.stencilMask(a),u.stencil_mask=a);a=qa[0];h=qa[1];m=qa[2];if(a!==ra[0]||h!==ra[1]||m!==ra[2])x.stencilFunc(a,h,m),ra[0]=a,ra[1]=h,ra[2]=m;a=ga[0];h=ga[1];m=ga[2];z=ga[3];if(a!==X[0]||h!==X[1]||m!==X[2]||z!==X[3])x.stencilOpSeparate(a,h,m,z),X[0]=a,X[1]=h,X[2]=m,X[3]=z;a=O[0];h=O[1];m=O[2];z=O[3];if(a!==N[0]||h!==N[1]||
m!==N[2]||z!==N[3])x.stencilOpSeparate(a,h,m,z),N[0]=a,N[1]=h,N[2]=m,N[3]=z;a=C.scissor_enable;a!==u.scissor_enable&&(a?x.enable(3089):x.disable(3089),u.scissor_enable=a);a=S[0];h=S[1];m=S[2];z=S[3];if(a!==U[0]||h!==U[1]||m!==U[2]||z!==U[3])x.scissor(a,h,m,z),U[0]=a,U[1]=h,U[2]=m,U[3]=z;a=la[0];h=la[1];m=la[2];z=la[3];if(a!==oa[0]||h!==oa[1]||m!==oa[2]||z!==oa[3])x.viewport(a,h,m,z),oa[0]=a,oa[1]=h,oa[2]=m,oa[3]=z}x.disable(2929);u.depth_enable=!1;if(a=u.profile)d=performance.now(),v.count++;x.useProgram(f.program);
I.setVAO(null);h=L.location;m=G[h];m.buffer||x.enableVertexAttribArray(h);if(m.type!==e.dtype||2!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||0!==m.stride)x.bindBuffer(34962,e.buffer),x.vertexAttribPointer(h,2,e.dtype,!1,0,0),m.type=e.dtype,m.size=2,m.buffer=e,m.normalized=!1,m.offset=0,m.stride=0;h=k.call(this,E,c,0);"number"!==typeof h&&r.commandRaise(p,q);x.uniform1f(H.location,h);c=c.color;R(c)&&4===c.length||r.commandRaise(g,q);x.uniform4f(w.location,c[0],c[1],c[2],c[3]);(c=B.elements)?
x.bindBuffer(34963,c.buffer.buffer):I.currentVAO&&(c=b.getElements(I.currentVAO.elements))&&x.bindBuffer(34963,c.buffer.buffer);h=B.primitive;m=B.offset;c?x.drawElements(h,3,c.type,m<<(c.type-5121>>1)):x.drawArrays(h,m,3);u.dirty=!0;I.setVAO(null);a&&(v.cpuTime+=performance.now()-d)},scope:function(b,c,a){var l,d,n,h,t,m,k,q,f,x,p,w,r,g,H,R,J,I,D,L;l=C.depth_enable;C.depth_enable=!1;if(d=u.profile)n=performance.now(),v.count++;h=B.count;B.count=3;t=z.call(this,E,b,a);m=A[3];A[3]=t;k=b.color;t=A[4];
A[4]=k;k=y.buffer;y.buffer=e;q=y.divisor;y.divisor=0;f=y.normalized;y.normalized=!1;x=y.offset;y.offset=0;p=y.size;y.size=0;w=y.state;y.state=1;r=y.stride;y.stride=0;g=y.type;y.type=e.dtype;H=y.w;y.w=0;R=y.x;y.x=0;J=y.y;y.y=0;I=y.z;y.z=0;D=F.vert;F.vert=2;L=F.frag;F.frag=1;u.dirty=!0;c(E,b,a);C.depth_enable=l;d&&(v.cpuTime+=performance.now()-n);B.count=h;A[3]=m;A[4]=t;y.buffer=k;y.divisor=q;y.normalized=f;y.offset=x;y.size=p;y.state=w;y.stride=r;y.type=g;y.w=H;y.x=R;y.y=J;y.z=I;F.vert=D;F.frag=L;
u.dirty=!0},batch:function(a,k){var f,p,g,z;f=l.next;f!==l.cur&&(f?x.bindFramebuffer(36160,f.framebuffer):x.bindFramebuffer(36160,null),l.cur=f);if(u.dirty){var y,J,F;f=C.dither;f!==u.dither&&(f?x.enable(3024):x.disable(3024),u.dither=f);f=C.blend_enable;f!==u.blend_enable&&(f?x.enable(3042):x.disable(3042),u.blend_enable=f);f=K[0];y=K[1];J=K[2];F=K[3];if(f!==D[0]||y!==D[1]||J!==D[2]||F!==D[3])x.blendColor(f,y,J,F),D[0]=f,D[1]=y,D[2]=J,D[3]=F;f=n[0];y=n[1];if(f!==t[0]||y!==t[1])x.blendEquationSeparate(f,
y),t[0]=f,t[1]=y;f=Z[0];y=Z[1];J=Z[2];F=Z[3];if(f!==Q[0]||y!==Q[1]||J!==Q[2]||F!==Q[3])x.blendFuncSeparate(f,y,J,F),Q[0]=f,Q[1]=y,Q[2]=J,Q[3]=F;f=C.depth_func;f!==u.depth_func&&(x.depthFunc(f),u.depth_func=f);f=W[0];y=W[1];if(f!==da[0]||y!==da[1])x.depthRange(f,y),da[0]=f,da[1]=y;f=C.depth_mask;f!==u.depth_mask&&(x.depthMask(f),u.depth_mask=f);f=Wa[0];y=Wa[1];J=Wa[2];F=Wa[3];if(f!==Ba[0]||y!==Ba[1]||J!==Ba[2]||F!==Ba[3])x.colorMask(f,y,J,F),Ba[0]=f,Ba[1]=y,Ba[2]=J,Ba[3]=F;f=C.cull_enable;f!==u.cull_enable&&
(f?x.enable(2884):x.disable(2884),u.cull_enable=f);f=C.cull_face;f!==u.cull_face&&(x.cullFace(f),u.cull_face=f);f=C.frontFace;f!==u.frontFace&&(x.frontFace(f),u.frontFace=f);f=C.lineWidth;f!==u.lineWidth&&(x.lineWidth(f),u.lineWidth=f);f=C.polygonOffset_enable;f!==u.polygonOffset_enable&&(f?x.enable(32823):x.disable(32823),u.polygonOffset_enable=f);f=V[0];y=V[1];if(f!==T[0]||y!==T[1])x.polygonOffset(f,y),T[0]=f,T[1]=y;f=C.sample_alpha;f!==u.sample_alpha&&(f?x.enable(32926):x.disable(32926),u.sample_alpha=
f);f=C.sample_enable;f!==u.sample_enable&&(f?x.enable(32928):x.disable(32928),u.sample_enable=f);f=P[0];y=P[1];if(f!==M[0]||y!==M[1])x.sampleCoverage(f,y),M[0]=f,M[1]=y;f=C.stencil_enable;f!==u.stencil_enable&&(f?x.enable(2960):x.disable(2960),u.stencil_enable=f);f=C.stencil_mask;f!==u.stencil_mask&&(x.stencilMask(f),u.stencil_mask=f);f=qa[0];y=qa[1];J=qa[2];if(f!==ra[0]||y!==ra[1]||J!==ra[2])x.stencilFunc(f,y,J),ra[0]=f,ra[1]=y,ra[2]=J;f=ga[0];y=ga[1];J=ga[2];F=ga[3];if(f!==X[0]||y!==X[1]||J!==X[2]||
F!==X[3])x.stencilOpSeparate(f,y,J,F),X[0]=f,X[1]=y,X[2]=J,X[3]=F;f=O[0];y=O[1];J=O[2];F=O[3];if(f!==N[0]||y!==N[1]||J!==N[2]||F!==N[3])x.stencilOpSeparate(f,y,J,F),N[0]=f,N[1]=y,N[2]=J,N[3]=F;f=C.scissor_enable;f!==u.scissor_enable&&(f?x.enable(3089):x.disable(3089),u.scissor_enable=f);f=S[0];y=S[1];J=S[2];F=S[3];if(f!==U[0]||y!==U[1]||J!==U[2]||F!==U[3])x.scissor(f,y,J,F),U[0]=f,U[1]=y,U[2]=J,U[3]=F;f=la[0];y=la[1];J=la[2];F=la[3];if(f!==oa[0]||y!==oa[1]||J!==oa[2]||F!==oa[3])x.viewport(f,y,J,F),
oa[0]=f,oa[1]=y,oa[2]=J,oa[3]=F}x.disable(2929);u.depth_enable=!1;if(f=u.profile)p=performance.now(),v.count+=k;x.useProgram(m.program);I.setVAO(null);y=L.location;J=G[y];J.buffer||x.enableVertexAttribArray(y);if(J.type!==e.dtype||2!==J.size||J.buffer!==e||!1!==J.normalized||0!==J.offset||0!==J.stride)x.bindBuffer(34962,e.buffer),x.vertexAttribPointer(y,2,e.dtype,!1,0,0),J.type=e.dtype,J.size=2,J.buffer=e,J.normalized=!1,J.offset=0,J.stride=0;g=c.call(this,E,z,g);"number"!==typeof g&&r.commandRaise(d,
q);x.uniform1f(H.location,g);(y=B.elements)?x.bindBuffer(34963,y.buffer.buffer):I.currentVAO&&(y=b.getElements(I.currentVAO.elements))&&x.bindBuffer(34963,y.buffer.buffer);J=B.primitive;F=B.offset;for(g=0;g<k;++g){z=a[g];var A,ia,ea,ca,na,wa,Ea;A=z.color;R(A)&&4===A.length||r.commandRaise(h,q);z=A[0];ea=A[1];na=A[2];A=A[3];g&&ia===z&&ca===ea&&wa===na&&Ea===A||(ia=z,ca=ea,wa=na,Ea=A,x.uniform4f(w.location,z,ea,na,A));y?x.drawElements(J,3,y.type,F<<(y.type-5121>>1)):x.drawArrays(J,F,3)}u.dirty=!0;I.setVAO(null);
f&&(v.cpuTime+=performance.now()-p)}}},"$13,color,position":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H){var w,u,G,E,A,B,b,l,x,R,C,F,ia,I,K,D,n,t,Z,Q,Wa,Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga;w=a.attributes;u=a.context;G=a.current;E=a.draw;A=a.framebuffer;B=a.gl;b=a.next;l=a.shader;x=a.uniforms;R=a.vao;C=b.blend_color;F=G.blend_color;ia=b.blend_equation;I=G.blend_equation;K=b.blend_func;D=G.blend_func;n=b.colorMask;t=G.colorMask;Z=b.depth_range;Q=G.depth_range;Wa=b.polygonOffset_offset;Ba=G.polygonOffset_offset;
W=b.sample_coverage;da=G.sample_coverage;V=b.scissor_box;T=G.scissor_box;P=b.stencil_func;M=G.stencil_func;S=b.stencil_opBack;U=G.stencil_opBack;qa=b.stencil_opFront;ra=G.stencil_opFront;O=b.viewport;N=G.viewport;ga=[1,0,0,1];return{draw:function(c){var a,l,d;c=A.next;c!==A.cur&&(c?B.bindFramebuffer(36160,c.framebuffer):B.bindFramebuffer(36160,null),A.cur=c);if(G.dirty){var m;c=b.dither;c!==G.dither&&(c?B.enable(3024):B.disable(3024),G.dither=c);c=b.blend_enable;c!==G.blend_enable&&(c?B.enable(3042):
B.disable(3042),G.blend_enable=c);c=C[0];l=C[1];d=C[2];m=C[3];if(c!==F[0]||l!==F[1]||d!==F[2]||m!==F[3])B.blendColor(c,l,d,m),F[0]=c,F[1]=l,F[2]=d,F[3]=m;c=ia[0];l=ia[1];if(c!==I[0]||l!==I[1])B.blendEquationSeparate(c,l),I[0]=c,I[1]=l;c=K[0];l=K[1];d=K[2];m=K[3];if(c!==D[0]||l!==D[1]||d!==D[2]||m!==D[3])B.blendFuncSeparate(c,l,d,m),D[0]=c,D[1]=l,D[2]=d,D[3]=m;c=b.depth_enable;c!==G.depth_enable&&(c?B.enable(2929):B.disable(2929),G.depth_enable=c);c=b.depth_func;c!==G.depth_func&&(B.depthFunc(c),G.depth_func=
c);c=Z[0];l=Z[1];if(c!==Q[0]||l!==Q[1])B.depthRange(c,l),Q[0]=c,Q[1]=l;c=b.depth_mask;c!==G.depth_mask&&(B.depthMask(c),G.depth_mask=c);c=n[0];l=n[1];d=n[2];m=n[3];if(c!==t[0]||l!==t[1]||d!==t[2]||m!==t[3])B.colorMask(c,l,d,m),t[0]=c,t[1]=l,t[2]=d,t[3]=m;c=b.cull_enable;c!==G.cull_enable&&(c?B.enable(2884):B.disable(2884),G.cull_enable=c);c=b.cull_face;c!==G.cull_face&&(B.cullFace(c),G.cull_face=c);c=b.frontFace;c!==G.frontFace&&(B.frontFace(c),G.frontFace=c);c=b.polygonOffset_enable;c!==G.polygonOffset_enable&&
(c?B.enable(32823):B.disable(32823),G.polygonOffset_enable=c);c=Wa[0];l=Wa[1];if(c!==Ba[0]||l!==Ba[1])B.polygonOffset(c,l),Ba[0]=c,Ba[1]=l;c=b.sample_alpha;c!==G.sample_alpha&&(c?B.enable(32926):B.disable(32926),G.sample_alpha=c);c=b.sample_enable;c!==G.sample_enable&&(c?B.enable(32928):B.disable(32928),G.sample_enable=c);c=W[0];l=W[1];if(c!==da[0]||l!==da[1])B.sampleCoverage(c,l),da[0]=c,da[1]=l;c=b.stencil_enable;c!==G.stencil_enable&&(c?B.enable(2960):B.disable(2960),G.stencil_enable=c);c=b.stencil_mask;
c!==G.stencil_mask&&(B.stencilMask(c),G.stencil_mask=c);c=P[0];l=P[1];d=P[2];if(c!==M[0]||l!==M[1]||d!==M[2])B.stencilFunc(c,l,d),M[0]=c,M[1]=l,M[2]=d;c=qa[0];l=qa[1];d=qa[2];m=qa[3];if(c!==ra[0]||l!==ra[1]||d!==ra[2]||m!==ra[3])B.stencilOpSeparate(c,l,d,m),ra[0]=c,ra[1]=l,ra[2]=d,ra[3]=m;c=S[0];l=S[1];d=S[2];m=S[3];if(c!==U[0]||l!==U[1]||d!==U[2]||m!==U[3])B.stencilOpSeparate(c,l,d,m),U[0]=c,U[1]=l,U[2]=d,U[3]=m;c=b.scissor_enable;c!==G.scissor_enable&&(c?B.enable(3089):B.disable(3089),G.scissor_enable=
c);c=V[0];l=V[1];d=V[2];m=V[3];if(c!==T[0]||l!==T[1]||d!==T[2]||m!==T[3])B.scissor(c,l,d,m),T[0]=c,T[1]=l,T[2]=d,T[3]=m;c=O[0];l=O[1];d=O[2];m=O[3];if(c!==N[0]||l!==N[1]||d!==N[2]||m!==N[3])B.viewport(c,l,d,m),N[0]=c,N[1]=l,N[2]=d,N[3]=m}B.lineWidth(1);G.lineWidth=1;if(c=G.profile)a=performance.now(),v.count++;B.useProgram(f.program);R.setVAO(null);l=H.location;d=w[l];d.buffer||B.enableVertexAttribArray(l);if(d.type!==e.dtype||2!==d.size||d.buffer!==e||!1!==d.normalized||0!==d.offset||0!==d.stride)B.bindBuffer(34962,
e.buffer),B.vertexAttribPointer(l,2,e.dtype,!1,0,0),d.type=e.dtype,d.size=2,d.buffer=e,d.normalized=!1,d.offset=0,d.stride=0;B.uniform4f(h.location,1,0,0,1);k&&B.bindBuffer(34963,k.buffer.buffer);l=k.primType;d=k.vertCount-0;0<=d||r.commandRaise(p,q);d&&(B.drawElements(l,d,k.type,0<<(k.type-5121>>1)),G.dirty=!0,R.setVAO(null),c&&(v.cpuTime+=performance.now()-a))},scope:function(c,a,d){var n,h,m,t,f,k,p,w,H,C,R,I,F,B,D,Z,Q,K,A,ia,M,O;n=b.lineWidth;b.lineWidth=1;if(h=G.profile)m=performance.now(),v.count++;
t=E.elements;E.elements=g;f=E.offset;E.offset=0;k=g.vertCount-0;0<=k||r.commandRaise(z,q);p=E.count;E.count=k;w=g.primType;k=E.primitive;E.primitive=w;w=x[3];x[3]=ga;H=y.buffer;y.buffer=e;C=y.divisor;y.divisor=0;R=y.normalized;y.normalized=!1;I=y.offset;y.offset=0;F=y.size;y.size=0;B=y.state;y.state=1;D=y.stride;y.stride=0;Z=y.type;y.type=e.dtype;Q=y.w;y.w=0;K=y.x;y.x=0;A=y.y;y.y=0;ia=y.z;y.z=0;M=l.vert;l.vert=2;O=l.frag;l.frag=1;G.dirty=!0;a(u,c,d);b.lineWidth=n;h&&(v.cpuTime+=performance.now()-
m);E.elements=t;E.offset=f;E.count=p;E.primitive=k;x[3]=w;y.buffer=H;y.divisor=C;y.normalized=R;y.offset=I;y.size=F;y.state=B;y.stride=D;y.type=Z;y.w=Q;y.x=K;y.y=A;y.z=ia;l.vert=M;l.frag=O;G.dirty=!0},batch:function(l,a){var f,k,x;f=A.next;f!==A.cur&&(f?B.bindFramebuffer(36160,f.framebuffer):B.bindFramebuffer(36160,null),A.cur=f);if(G.dirty){var p,g;f=b.dither;f!==G.dither&&(f?B.enable(3024):B.disable(3024),G.dither=f);f=b.blend_enable;f!==G.blend_enable&&(f?B.enable(3042):B.disable(3042),G.blend_enable=
f);f=C[0];x=C[1];p=C[2];g=C[3];if(f!==F[0]||x!==F[1]||p!==F[2]||g!==F[3])B.blendColor(f,x,p,g),F[0]=f,F[1]=x,F[2]=p,F[3]=g;f=ia[0];x=ia[1];if(f!==I[0]||x!==I[1])B.blendEquationSeparate(f,x),I[0]=f,I[1]=x;f=K[0];x=K[1];p=K[2];g=K[3];if(f!==D[0]||x!==D[1]||p!==D[2]||g!==D[3])B.blendFuncSeparate(f,x,p,g),D[0]=f,D[1]=x,D[2]=p,D[3]=g;f=b.depth_enable;f!==G.depth_enable&&(f?B.enable(2929):B.disable(2929),G.depth_enable=f);f=b.depth_func;f!==G.depth_func&&(B.depthFunc(f),G.depth_func=f);f=Z[0];x=Z[1];if(f!==
Q[0]||x!==Q[1])B.depthRange(f,x),Q[0]=f,Q[1]=x;f=b.depth_mask;f!==G.depth_mask&&(B.depthMask(f),G.depth_mask=f);f=n[0];x=n[1];p=n[2];g=n[3];if(f!==t[0]||x!==t[1]||p!==t[2]||g!==t[3])B.colorMask(f,x,p,g),t[0]=f,t[1]=x,t[2]=p,t[3]=g;f=b.cull_enable;f!==G.cull_enable&&(f?B.enable(2884):B.disable(2884),G.cull_enable=f);f=b.cull_face;f!==G.cull_face&&(B.cullFace(f),G.cull_face=f);f=b.frontFace;f!==G.frontFace&&(B.frontFace(f),G.frontFace=f);f=b.polygonOffset_enable;f!==G.polygonOffset_enable&&(f?B.enable(32823):
B.disable(32823),G.polygonOffset_enable=f);f=Wa[0];x=Wa[1];if(f!==Ba[0]||x!==Ba[1])B.polygonOffset(f,x),Ba[0]=f,Ba[1]=x;f=b.sample_alpha;f!==G.sample_alpha&&(f?B.enable(32926):B.disable(32926),G.sample_alpha=f);f=b.sample_enable;f!==G.sample_enable&&(f?B.enable(32928):B.disable(32928),G.sample_enable=f);f=W[0];x=W[1];if(f!==da[0]||x!==da[1])B.sampleCoverage(f,x),da[0]=f,da[1]=x;f=b.stencil_enable;f!==G.stencil_enable&&(f?B.enable(2960):B.disable(2960),G.stencil_enable=f);f=b.stencil_mask;f!==G.stencil_mask&&
(B.stencilMask(f),G.stencil_mask=f);f=P[0];x=P[1];p=P[2];if(f!==M[0]||x!==M[1]||p!==M[2])B.stencilFunc(f,x,p),M[0]=f,M[1]=x,M[2]=p;f=qa[0];x=qa[1];p=qa[2];g=qa[3];if(f!==ra[0]||x!==ra[1]||p!==ra[2]||g!==ra[3])B.stencilOpSeparate(f,x,p,g),ra[0]=f,ra[1]=x,ra[2]=p,ra[3]=g;f=S[0];x=S[1];p=S[2];g=S[3];if(f!==U[0]||x!==U[1]||p!==U[2]||g!==U[3])B.stencilOpSeparate(f,x,p,g),U[0]=f,U[1]=x,U[2]=p,U[3]=g;f=b.scissor_enable;f!==G.scissor_enable&&(f?B.enable(3089):B.disable(3089),G.scissor_enable=f);f=V[0];x=
V[1];p=V[2];g=V[3];if(f!==T[0]||x!==T[1]||p!==T[2]||g!==T[3])B.scissor(f,x,p,g),T[0]=f,T[1]=x,T[2]=p,T[3]=g;f=O[0];x=O[1];p=O[2];g=O[3];if(f!==N[0]||x!==N[1]||p!==N[2]||g!==N[3])B.viewport(f,x,p,g),N[0]=f,N[1]=x,N[2]=p,N[3]=g}B.lineWidth(1);G.lineWidth=1;if(f=G.profile)k=performance.now(),v.count+=a;B.useProgram(m.program);R.setVAO(null);x=H.location;p=w[x];p.buffer||B.enableVertexAttribArray(x);if(p.type!==e.dtype||2!==p.size||p.buffer!==e||!1!==p.normalized||0!==p.offset||0!==p.stride)B.bindBuffer(34962,
e.buffer),B.vertexAttribPointer(x,2,e.dtype,!1,0,0),p.type=e.dtype,p.size=2,p.buffer=e,p.normalized=!1,p.offset=0,p.stride=0;B.uniform4f(h.location,1,0,0,1);c&&B.bindBuffer(34963,c.buffer.buffer);p=c.primType;g=c.vertCount-0;0<=g||r.commandRaise(d,q);for(x=0;x<a;++x)g&&B.drawElements(p,g,c.type,0<<(c.type-5121>>1));G.dirty=!0;R.setVAO(null);f&&(v.cpuTime+=performance.now()-k)}}},"$20,mouse,position,t,texture":function(a,r,q,v,f,e,k,p,g,z,y,m,c,d,h,H,w,u,G,E,A,B,b,l,x){var R,C,F,ia,I,K,D,n,t,Z,Q,Wa,
Ba,W,da,V,T,P,M,S,U,qa,ra,O,N,ga,X,la,oa,ya,ua,aa,za,ja,ma,sa;R=a.attributes;C=a.context;F=a.current;ia=a.draw;I=a.elements;K=a.framebuffer;D=a.gl;n=a.isArrayLike;t=a.next;Z=a.shader;Q=a.uniforms;Wa=a.vao;Ba=t.blend_color;W=F.blend_color;da=t.blend_equation;V=F.blend_equation;T=t.blend_func;P=F.blend_func;M=t.colorMask;S=F.colorMask;U=t.depth_range;qa=F.depth_range;ra=t.polygonOffset_offset;O=F.polygonOffset_offset;N=t.sample_coverage;ga=F.sample_coverage;X=t.scissor_box;la=F.scissor_box;oa=t.stencil_func;
ya=F.stencil_func;ua=t.stencil_opBack;aa=F.stencil_opBack;za=t.stencil_opFront;ja=F.stencil_opFront;ma=t.viewport;sa=F.viewport;return{draw:function(c){var a,d,h,m;a=K.next;a!==K.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),K.cur=a);if(F.dirty){var w;a=t.dither;a!==F.dither&&(a?D.enable(3024):D.disable(3024),F.dither=a);a=t.blend_enable;a!==F.blend_enable&&(a?D.enable(3042):D.disable(3042),F.blend_enable=a);a=Ba[0];h=Ba[1];m=Ba[2];w=Ba[3];if(a!==W[0]||h!==W[1]||m!==
W[2]||w!==W[3])D.blendColor(a,h,m,w),W[0]=a,W[1]=h,W[2]=m,W[3]=w;a=da[0];h=da[1];if(a!==V[0]||h!==V[1])D.blendEquationSeparate(a,h),V[0]=a,V[1]=h;a=T[0];h=T[1];m=T[2];w=T[3];if(a!==P[0]||h!==P[1]||m!==P[2]||w!==P[3])D.blendFuncSeparate(a,h,m,w),P[0]=a,P[1]=h,P[2]=m,P[3]=w;a=t.depth_enable;a!==F.depth_enable&&(a?D.enable(2929):D.disable(2929),F.depth_enable=a);a=t.depth_func;a!==F.depth_func&&(D.depthFunc(a),F.depth_func=a);a=U[0];h=U[1];if(a!==qa[0]||h!==qa[1])D.depthRange(a,h),qa[0]=a,qa[1]=h;a=
t.depth_mask;a!==F.depth_mask&&(D.depthMask(a),F.depth_mask=a);a=M[0];h=M[1];m=M[2];w=M[3];if(a!==S[0]||h!==S[1]||m!==S[2]||w!==S[3])D.colorMask(a,h,m,w),S[0]=a,S[1]=h,S[2]=m,S[3]=w;a=t.cull_enable;a!==F.cull_enable&&(a?D.enable(2884):D.disable(2884),F.cull_enable=a);a=t.cull_face;a!==F.cull_face&&(D.cullFace(a),F.cull_face=a);a=t.frontFace;a!==F.frontFace&&(D.frontFace(a),F.frontFace=a);a=t.lineWidth;a!==F.lineWidth&&(D.lineWidth(a),F.lineWidth=a);a=t.polygonOffset_enable;a!==F.polygonOffset_enable&&
(a?D.enable(32823):D.disable(32823),F.polygonOffset_enable=a);a=ra[0];h=ra[1];if(a!==O[0]||h!==O[1])D.polygonOffset(a,h),O[0]=a,O[1]=h;a=t.sample_alpha;a!==F.sample_alpha&&(a?D.enable(32926):D.disable(32926),F.sample_alpha=a);a=t.sample_enable;a!==F.sample_enable&&(a?D.enable(32928):D.disable(32928),F.sample_enable=a);a=N[0];h=N[1];if(a!==ga[0]||h!==ga[1])D.sampleCoverage(a,h),ga[0]=a,ga[1]=h;a=t.stencil_enable;a!==F.stencil_enable&&(a?D.enable(2960):D.disable(2960),F.stencil_enable=a);a=t.stencil_mask;
a!==F.stencil_mask&&(D.stencilMask(a),F.stencil_mask=a);a=oa[0];h=oa[1];m=oa[2];if(a!==ya[0]||h!==ya[1]||m!==ya[2])D.stencilFunc(a,h,m),ya[0]=a,ya[1]=h,ya[2]=m;a=za[0];h=za[1];m=za[2];w=za[3];if(a!==ja[0]||h!==ja[1]||m!==ja[2]||w!==ja[3])D.stencilOpSeparate(a,h,m,w),ja[0]=a,ja[1]=h,ja[2]=m,ja[3]=w;a=ua[0];h=ua[1];m=ua[2];w=ua[3];if(a!==aa[0]||h!==aa[1]||m!==aa[2]||w!==aa[3])D.stencilOpSeparate(a,h,m,w),aa[0]=a,aa[1]=h,aa[2]=m,aa[3]=w;a=t.scissor_enable;a!==F.scissor_enable&&(a?D.enable(3089):D.disable(3089),
F.scissor_enable=a);a=X[0];h=X[1];m=X[2];w=X[3];if(a!==la[0]||h!==la[1]||m!==la[2]||w!==la[3])D.scissor(a,h,m,w),la[0]=a,la[1]=h,la[2]=m,la[3]=w;a=ma[0];h=ma[1];m=ma[2];w=ma[3];if(a!==sa[0]||h!==sa[1]||m!==sa[2]||w!==sa[3])D.viewport(a,h,m,w),sa[0]=a,sa[1]=h,sa[2]=m,sa[3]=w;F.dirty=!1}if(a=F.profile)d=performance.now(),v.count++;D.useProgram(f.program);Wa.setVAO(null);h=b.location;m=R[h];m.buffer||D.enableVertexAttribArray(h);if(m.type!==e.dtype||2!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||
0!==m.stride)D.bindBuffer(34962,e.buffer),D.vertexAttribPointer(h,2,e.dtype,!1,0,0),m.type=e.dtype,m.size=2,m.buffer=e,m.normalized=!1,m.offset=0,m.stride=0;h=k.call(this,C,c,0);n(h)&&2===h.length||r.commandRaise(p,q);D.uniform2f(B.location,h[0],h[1]);c=g.call(this,C,c,0);"number"!==typeof c&&r.commandRaise(z,q);D.uniform1f(l.location,c);D.uniform1i(x.location,y.bind());(c=ia.elements)?D.bindBuffer(34963,c.buffer.buffer):Wa.currentVAO&&(c=I.getElements(Wa.currentVAO.elements))&&D.bindBuffer(34963,
c.buffer.buffer);h=ia.primitive;m=ia.offset;c?D.drawElements(h,3,c.type,m<<(c.type-5121>>1)):D.drawArrays(h,m,3);Wa.setVAO(null);a&&(v.cpuTime+=performance.now()-d);y.unbind()},scope:function(b,a,l){var n,f,t,k,q,x,p,w,r,g,z,y,H,J,R,I,B,u,D,L;if(n=F.profile)f=performance.now(),v.count++;t=ia.count;ia.count=3;k=m.call(this,C,b,l);q=Q[3];Q[3]=k;x=c.call(this,C,b,l);k=Q[4];Q[4]=x;x=Q[5];Q[5]=d;p=h.buffer;h.buffer=e;w=h.divisor;h.divisor=0;r=h.normalized;h.normalized=!1;g=h.offset;h.offset=0;z=h.size;
h.size=0;y=h.state;h.state=1;H=h.stride;h.stride=0;J=h.type;h.type=e.dtype;R=h.w;h.w=0;I=h.x;h.x=0;B=h.y;h.y=0;u=h.z;h.z=0;D=Z.vert;Z.vert=2;L=Z.frag;Z.frag=1;a(C,b,l);n&&(v.cpuTime+=performance.now()-f);ia.count=t;Q[3]=q;Q[4]=k;Q[5]=x;h.buffer=p;h.divisor=w;h.normalized=r;h.offset=g;h.size=z;h.state=y;h.stride=H;h.type=J;h.w=R;h.x=I;h.y=B;h.z=u;Z.vert=D;Z.frag=L},batch:function(c,a){var d,h,f;d=K.next;d!==K.cur&&(d?D.bindFramebuffer(36160,d.framebuffer):D.bindFramebuffer(36160,null),K.cur=d);if(F.dirty){var m,
k,p;d=t.dither;d!==F.dither&&(d?D.enable(3024):D.disable(3024),F.dither=d);d=t.blend_enable;d!==F.blend_enable&&(d?D.enable(3042):D.disable(3042),F.blend_enable=d);d=Ba[0];m=Ba[1];k=Ba[2];p=Ba[3];if(d!==W[0]||m!==W[1]||k!==W[2]||p!==W[3])D.blendColor(d,m,k,p),W[0]=d,W[1]=m,W[2]=k,W[3]=p;d=da[0];m=da[1];if(d!==V[0]||m!==V[1])D.blendEquationSeparate(d,m),V[0]=d,V[1]=m;d=T[0];m=T[1];k=T[2];p=T[3];if(d!==P[0]||m!==P[1]||k!==P[2]||p!==P[3])D.blendFuncSeparate(d,m,k,p),P[0]=d,P[1]=m,P[2]=k,P[3]=p;d=t.depth_enable;
d!==F.depth_enable&&(d?D.enable(2929):D.disable(2929),F.depth_enable=d);d=t.depth_func;d!==F.depth_func&&(D.depthFunc(d),F.depth_func=d);d=U[0];m=U[1];if(d!==qa[0]||m!==qa[1])D.depthRange(d,m),qa[0]=d,qa[1]=m;d=t.depth_mask;d!==F.depth_mask&&(D.depthMask(d),F.depth_mask=d);d=M[0];m=M[1];k=M[2];p=M[3];if(d!==S[0]||m!==S[1]||k!==S[2]||p!==S[3])D.colorMask(d,m,k,p),S[0]=d,S[1]=m,S[2]=k,S[3]=p;d=t.cull_enable;d!==F.cull_enable&&(d?D.enable(2884):D.disable(2884),F.cull_enable=d);d=t.cull_face;d!==F.cull_face&&
(D.cullFace(d),F.cull_face=d);d=t.frontFace;d!==F.frontFace&&(D.frontFace(d),F.frontFace=d);d=t.lineWidth;d!==F.lineWidth&&(D.lineWidth(d),F.lineWidth=d);d=t.polygonOffset_enable;d!==F.polygonOffset_enable&&(d?D.enable(32823):D.disable(32823),F.polygonOffset_enable=d);d=ra[0];m=ra[1];if(d!==O[0]||m!==O[1])D.polygonOffset(d,m),O[0]=d,O[1]=m;d=t.sample_alpha;d!==F.sample_alpha&&(d?D.enable(32926):D.disable(32926),F.sample_alpha=d);d=t.sample_enable;d!==F.sample_enable&&(d?D.enable(32928):D.disable(32928),
F.sample_enable=d);d=N[0];m=N[1];if(d!==ga[0]||m!==ga[1])D.sampleCoverage(d,m),ga[0]=d,ga[1]=m;d=t.stencil_enable;d!==F.stencil_enable&&(d?D.enable(2960):D.disable(2960),F.stencil_enable=d);d=t.stencil_mask;d!==F.stencil_mask&&(D.stencilMask(d),F.stencil_mask=d);d=oa[0];m=oa[1];k=oa[2];if(d!==ya[0]||m!==ya[1]||k!==ya[2])D.stencilFunc(d,m,k),ya[0]=d,ya[1]=m,ya[2]=k;d=za[0];m=za[1];k=za[2];p=za[3];if(d!==ja[0]||m!==ja[1]||k!==ja[2]||p!==ja[3])D.stencilOpSeparate(d,m,k,p),ja[0]=d,ja[1]=m,ja[2]=k,ja[3]=
p;d=ua[0];m=ua[1];k=ua[2];p=ua[3];if(d!==aa[0]||m!==aa[1]||k!==aa[2]||p!==aa[3])D.stencilOpSeparate(d,m,k,p),aa[0]=d,aa[1]=m,aa[2]=k,aa[3]=p;d=t.scissor_enable;d!==F.scissor_enable&&(d?D.enable(3089):D.disable(3089),F.scissor_enable=d);d=X[0];m=X[1];k=X[2];p=X[3];if(d!==la[0]||m!==la[1]||k!==la[2]||p!==la[3])D.scissor(d,m,k,p),la[0]=d,la[1]=m,la[2]=k,la[3]=p;d=ma[0];m=ma[1];k=ma[2];p=ma[3];if(d!==sa[0]||m!==sa[1]||k!==sa[2]||p!==sa[3])D.viewport(d,m,k,p),sa[0]=d,sa[1]=m,sa[2]=k,sa[3]=p;F.dirty=!1}if(d=
F.profile)h=performance.now(),v.count+=a;D.useProgram(H.program);Wa.setVAO(null);m=b.location;k=R[m];k.buffer||D.enableVertexAttribArray(m);if(k.type!==e.dtype||2!==k.size||k.buffer!==e||!1!==k.normalized||0!==k.offset||0!==k.stride)D.bindBuffer(34962,e.buffer),D.vertexAttribPointer(m,2,e.dtype,!1,0,0),k.type=e.dtype,k.size=2,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;m=w.call(this,C,void 0,f);n(m)&&2===m.length||r.commandRaise(u,q);D.uniform2f(B.location,m[0],m[1]);f=G.call(this,C,void 0,f);
"number"!==typeof f&&r.commandRaise(E,q);D.uniform1f(l.location,f);D.uniform1i(x.location,A.bind());(m=ia.elements)?D.bindBuffer(34963,m.buffer.buffer):Wa.currentVAO&&(m=I.getElements(Wa.currentVAO.elements))&&D.bindBuffer(34963,m.buffer.buffer);k=ia.primitive;p=ia.offset;for(f=0;f<a;++f)m?D.drawElements(k,3,m.type,p<<(m.type-5121>>1)):D.drawArrays(k,p,3);A.unbind();Wa.setVAO(null);d&&(v.cpuTime+=performance.now()-h)}}}}},{}],25:[function(g,u,A){var a=g("./sorted-object-keys");u.exports=function(r,
q){for(var v=a(q),f=0;f<v.length;++f)r[v[f]]=q[v[f]];return r}},{"./sorted-object-keys":34}],26:[function(g,u,A){function a(a,f,e,k,q,r){for(var g=0;g<f;++g)for(var y=a[g],m=0;m<e;++m)for(var c=y[m],d=0;d<k;++d)q[r++]=c[d]}function r(q,f,e,k,p){for(var g=1,z=e+1;z<f.length;++z)g*=f[z];var y=f[e];if(4===f.length-e){var m=f[e+1],c=f[e+2];f=f[e+3];for(z=0;z<y;++z)a(q[z],m,c,f,k,p),p+=g}else for(z=0;z<y;++z)r(q[z],f,e+1,k,p),p+=g}var q=g("./pool");u.exports={shape:function(a){for(var f=[];a.length;a=
a[0])f.push(a.length);return f},flatten:function(v,f,e,k){var p=1;if(f.length)for(var g=0;g<f.length;++g)p*=f[g];else p=0;e=k||q.allocType(e,p);switch(f.length){case 0:break;case 1:k=f[0];for(f=0;f<k;++f)e[f]=v[f];break;case 2:k=f[0];f=f[1];for(g=p=0;g<k;++g)for(var z=v[g],y=0;y<f;++y)e[p++]=z[y];break;case 3:a(v,f[0],f[1],f[2],e,0);break;default:r(v,f,0,e,0)}return e}}},{"./pool":32}],27:[function(g,u,A){var a=g("./is-typed-array");u.exports=function(r){return Array.isArray(r)||a(r)}},{"./is-typed-array":30}],
28:[function(g,u,A){var a=g("./is-typed-array");u.exports=function(r){return!!r&&"object"===typeof r&&Array.isArray(r.shape)&&Array.isArray(r.stride)&&"number"===typeof r.offset&&r.shape.length===r.stride.length&&(Array.isArray(r.data)||a(r.data))}},{"./is-typed-array":30}],29:[function(g,u,A){u.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(g,u,A){u.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof
Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(g,u,A){u.exports=function(a,r){for(var q=Array(a),v=0;v<a;++v)q[v]=r(v);return q}},{}],32:[function(g,u,A){function a(a){var f,e;f=(65535<a)<<4;a>>>=f;e=(255<a)<<3;a>>>=e;f|=e;e=(15<a)<<2;a>>>=e;f|=e;e=(3<a)<<1;return f|e|a>>>e>>1}function r(){function r(f){a:{for(var q=16;268435456>=q;q*=16)if(f<=q){f=q;break a}f=0}q=e[a(f)>>2];return 0<q.length?q.pop():new ArrayBuffer(f)}
function f(f){e[a(f.byteLength)>>2].push(f)}var e=q(8,function(){return[]});return{alloc:r,free:f,allocType:function(a,f){var e=null;switch(a){case 5120:e=new Int8Array(r(f),0,f);break;case 5121:e=new Uint8Array(r(f),0,f);break;case 5122:e=new Int16Array(r(2*f),0,f);break;case 5123:e=new Uint16Array(r(2*f),0,f);break;case 5124:e=new Int32Array(r(4*f),0,f);break;case 5125:e=new Uint32Array(r(4*f),0,f);break;case 5126:e=new Float32Array(r(4*f),0,f);break;default:return null}return e.length!==f?e.subarray(0,
f):e},freeType:function(a){f(a.buffer)}}}var q=g("./loop");g=r();g.zero=r();u.exports=g},{"./loop":31}],33:[function(g,u,A){u.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(g,u,A){u.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(g,u,A){var a=g("./pool"),r=new Float32Array(1),
q=new Uint32Array(r.buffer);u.exports=function(v){for(var f=a.allocType(5123,v.length),e=0;e<v.length;++e)if(isNaN(v[e]))f[e]=65535;else if(Infinity===v[e])f[e]=31744;else if(-Infinity===v[e])f[e]=64512;else{r[0]=v[e];var k=q[0],p=k>>>31<<15,g=(k<<1>>>24)-127,k=k>>13&1023;f[e]=-24>g?p:-14>g?p+(k+1024>>-14-g):15<g?p+31744:p+(g+15<<10)+k}return f}},{"./pool":32}],36:[function(g,u,A){var a=g("./sorted-object-keys");u.exports=function(r){return a(r).map(function(a){return r[a]})}},{"./sorted-object-keys":34}],
37:[function(g,u,A){function a(a,f,q){function r(){var c=window.innerWidth,d=window.innerHeight;a!==document.body&&(d=v.getBoundingClientRect(),c=d.right-d.left,d=d.bottom-d.top);v.width=q*c;v.height=q*d}var v=document.createElement("canvas");e(v.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(v);a===document.body&&(v.style.position="absolute",e(a.style,{margin:0,padding:0}));var m;a!==document.body&&"function"===typeof ResizeObserver?(m=new ResizeObserver(function(){setTimeout(r)}),
m.observe(a)):window.addEventListener("resize",r,!1);r();return{canvas:v,onDestroy:function(){m?m.disconnect():window.removeEventListener("resize",r);a.removeChild(v)}}}function r(a,f){function e(q){try{return a.getContext(q,f)}catch(r){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function q(a){if("string"===typeof a)return a.split();f(Array.isArray(a),"invalid extension array");return a}function v(a){return"string"===typeof a?(f("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(a)):a}var f=g("./util/check"),e=g("./util/extend");u.exports=function(e){var p=e||{},g,z,y,m;e={};var c=[],d=[],h="undefined"===typeof window?1:window.devicePixelRatio,H=!1,w=function(a){a&&f.raise(a)},u=function(){};"string"===typeof p?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),g=document.querySelector(p),f(g,"invalid query string for element")):"object"===typeof p?"string"===typeof p.nodeName&&"function"===typeof p.appendChild&&
"function"===typeof p.getBoundingClientRect?g=p:"function"===typeof p.drawArrays||"function"===typeof p.drawElements?(m=p,y=m.canvas):(f.constructor(p),"gl"in p?m=p.gl:"canvas"in p?y=v(p.canvas):"container"in p&&(z=v(p.container)),"attributes"in p&&(e=p.attributes,f.type(e,"object","invalid context attributes")),"extensions"in p&&(c=q(p.extensions)),"optionalExtensions"in p&&(d=q(p.optionalExtensions)),"onDone"in p&&(f.type(p.onDone,"function","invalid or missing onDone callback"),w=p.onDone),"profile"in
p&&(H=!!p.profile),"pixelRatio"in p&&(h=+p.pixelRatio,f(0<h,"invalid pixel ratio"))):f.raise("invalid arguments to regl");g&&("canvas"===g.nodeName.toLowerCase()?y=g:z=g);if(!m){if(!y){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");g=a(z||document.body,w,h);if(!g)return null;y=g.canvas;u=g.onDestroy}void 0===e.premultipliedAlpha&&(e.premultipliedAlpha=!0);m=r(y,e)}return m?{gl:m,canvas:y,container:z,extensions:c,optionalExtensions:d,pixelRatio:h,
profile:H,onDone:w,onDestroy:u}:(u(),w("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(g,u,A){function a(a){var f=a.length;if(0<f%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=f);return[a,a===f?0:4-a%4]}function r(a,f,p){for(var r=[],v=f;v<p;v+=3)f=(a[v]<<16&16711680)+(a[v+1]<<8&65280)+(a[v+2]&255),r.push(q[f>>18&63]+q[f>>12&63]+q[f>>6&63]+q[f&63]);
return r.join("")}A.byteLength=function(f){f=a(f);var k=f[1];return 3*(f[0]+k)/4-k};A.toByteArray=function(e){var k,q=a(e);k=q[0];var q=q[1],r=new f(3*(k+q)/4-q),g=0,y=0<q?k-4:k,m;for(m=0;m<y;m+=4)k=v[e.charCodeAt(m)]<<18|v[e.charCodeAt(m+1)]<<12|v[e.charCodeAt(m+2)]<<6|v[e.charCodeAt(m+3)],r[g++]=k>>16&255,r[g++]=k>>8&255,r[g++]=k&255;2===q&&(k=v[e.charCodeAt(m)]<<2|v[e.charCodeAt(m+1)]>>4,r[g++]=k&255);1===q&&(k=v[e.charCodeAt(m)]<<10|v[e.charCodeAt(m+1)]<<4|v[e.charCodeAt(m+2)]>>2,r[g++]=k>>8&
255,r[g++]=k&255);return r};A.fromByteArray=function(a){for(var f=a.length,p=f%3,v=[],g=0,y=f-p;g<y;g+=16383)v.push(r(a,g,g+16383>y?y:g+16383));1===p?(a=a[f-1],v.push(q[a>>2]+q[a<<4&63]+"==")):2===p&&(a=(a[f-2]<<8)+a[f-1],v.push(q[a>>10]+q[a>>4&63]+q[a<<2&63]+"="));return v.join("")};var q=[],v=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;for(g=0;64>g;++g)q[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],v["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=
g;v[45]=62;v[95]=63},{}],39:[function(g,u,A){var a=g("./lib/rationalize");u.exports=function(r,q){return a(r[0].mul(q[1]).add(q[0].mul(r[1])),r[1].mul(q[1]))}},{"./lib/rationalize":49}],40:[function(g,u,A){u.exports=function(a,r){return a[0].mul(r[1]).cmp(r[0].mul(a[1]))}},{}],41:[function(g,u,A){var a=g("./lib/rationalize");u.exports=function(r,q){return a(r[0].mul(q[1]),r[1].mul(q[0]))}},{"./lib/rationalize":49}],42:[function(g,u,A){function a(p,g){if(r(p))return g?k(p,a(g)):[p[0].clone(),p[1].clone()];
var z=0,y,m;if(q(p))y=p.clone();else if("string"===typeof p)y=f(p);else{if(0===p)return[v(0),v(1)];if(p!==Math.floor(p))for(;p!==Math.floor(p);)p*=Math.pow(2,256),z-=256;y=v(p)}if(r(g))y.mul(g[1]),m=g[0].clone();else if(q(g))m=g.clone();else if("string"===typeof g)m=f(g);else if(g){if(g!==Math.floor(g))for(;g!==Math.floor(g);)g*=Math.pow(2,256),z+=256;m=v(g)}else m=v(1);0<z?y=y.ushln(z):0>z&&(m=m.ushln(-z));return e(y,m)}var r=g("./is-rat"),q=g("./lib/is-bn"),v=g("./lib/num-to-bn"),f=g("./lib/str-to-bn"),
e=g("./lib/rationalize"),k=g("./div");u.exports=a},{"./div":41,"./is-rat":43,"./lib/is-bn":47,"./lib/num-to-bn":48,"./lib/rationalize":49,"./lib/str-to-bn":50}],43:[function(g,u,A){var a=g("./lib/is-bn");u.exports=function(r){return Array.isArray(r)&&2===r.length&&a(r[0])&&a(r[1])}},{"./lib/is-bn":47}],44:[function(g,u,A){var a=g("bn.js");u.exports=function(r){return r.cmp(new a(0))}},{"bn.js":57}],45:[function(g,u,A){var a=g("./bn-sign");u.exports=function(r){var q=r.length,v=r.words,f=0;if(1===
q)f=v[0];else if(2===q)f=v[0]+67108864*v[1];else for(var e=0;e<q;e++)f+=v[e]*Math.pow(67108864,e);return a(r)*f}},{"./bn-sign":44}],46:[function(g,u,A){var a=g("double-bits"),r=g("bit-twiddle").countTrailingZeros;u.exports=function(q){var v=r(a.lo(q));if(32>v)return v;q=r(a.hi(q));return 20<q?52:q+32}},{"bit-twiddle":56,"double-bits":79}],47:[function(g,u,A){g("bn.js");u.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":57}],48:[function(g,u,A){var a=g("bn.js"),r=g("double-bits");
u.exports=function(q){var v=r.exponent(q);return 52>v?new a(q):(new a(q*Math.pow(2,52-v))).ushln(v-52)}},{"bn.js":57,"double-bits":79}],49:[function(g,u,A){var a=g("./num-to-bn"),r=g("./bn-sign");u.exports=function(q,v){var f=r(q),e=r(v);if(0===f)return[a(0),a(1)];if(0===e)return[a(0),a(0)];0>e&&(q=q.neg(),v=v.neg());f=q.gcd(v);return f.cmpn(1)?[q.div(f),v.div(f)]:[q,v]}},{"./bn-sign":44,"./num-to-bn":48}],50:[function(g,u,A){var a=g("bn.js");u.exports=function(r){return new a(r)}},{"bn.js":57}],
51:[function(g,u,A){var a=g("./lib/rationalize");u.exports=function(r,q){return a(r[0].mul(q[0]),r[1].mul(q[1]))}},{"./lib/rationalize":49}],52:[function(g,u,A){var a=g("./lib/bn-sign");u.exports=function(r){return a(r[0])*a(r[1])}},{"./lib/bn-sign":44}],53:[function(g,u,A){var a=g("./lib/rationalize");u.exports=function(r,q){return a(r[0].mul(q[1]).sub(r[1].mul(q[0])),r[1].mul(q[1]))}},{"./lib/rationalize":49}],54:[function(g,u,A){var a=g("./lib/bn-to-num"),r=g("./lib/ctz");u.exports=function(q){var v=
q[0];q=q[1];if(0===v.cmpn(0))return 0;var f=v.abs().divmod(q.abs()),e=a(f.div),f=f.mod,v=v.negative!==q.negative?-1:1;if(0===f.cmpn(0))return v*e;if(e){var k=r(e)+4;q=a(f.ushln(k).divRound(q));return v*(e+q*Math.pow(2,-k))}e=q.bitLength()-f.bitLength()+53;q=a(f.ushln(e).divRound(q));if(1023>e)return v*q*Math.pow(2,-e);q*=Math.pow(2,-1023);return v*q*Math.pow(2,1023-e)}},{"./lib/bn-to-num":45,"./lib/ctz":46}],55:[function(g,u,A){function a(a,r,f,e,k){a=["function ",a,"(a,l,h,",e.join(","),"){",k?"":
"var i=",f?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];k?0>r.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",r,"){i=m;");f?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");k?a.push("return -1};"):a.push("return i};");return a.join("")}function r(q,r,f,e){return(new Function([a("A","x"+q+"y",r,["y"],e),a("P","c(x,y)"+q+"0",r,["y","c"],e),"function dispatchBsearch",f,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",
f].join("")))()}u.exports={ge:r(">=",!1,"GE"),gt:r(">",!1,"GT"),lt:r("<",!0,"LT"),le:r("<=",!0,"LE"),eq:r("-",!0,"EQ",!0)}},{}],56:[function(g,u,A){function a(a){var r=32;(a&=-a)&&r--;a&65535&&(r-=16);a&16711935&&(r-=8);a&252645135&&(r-=4);a&858993459&&(r-=2);a&1431655765&&--r;return r}"use restrict";A.INT_BITS=32;A.INT_MAX=2147483647;A.INT_MIN=-2147483648;A.sign=function(a){return(0<a)-(0>a)};A.abs=function(a){var r=a>>31;return(a^r)-r};A.min=function(a,r){return r^(a^r)&-(a<r)};A.max=function(a,
r){return a^(a^r)&-(a<r)};A.isPow2=function(a){return!(a&a-1)&&!!a};A.log2=function(a){var r,f;r=(65535<a)<<4;a>>>=r;f=(255<a)<<3;a>>>=f;r|=f;f=(15<a)<<2;a>>>=f;r|=f;f=(3<a)<<1;return r|f|a>>>f>>1};A.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};A.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};A.countTrailingZeros=a;A.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>
2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};A.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};A.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var r=Array(256);(function(a){for(var r=0;256>r;++r){for(var f=r,e=r,k=7,f=f>>>1;f;f>>>=1)e<<=1,e|=f&1,--k;a[r]=e<<k&255}})(r);A.reverse=function(a){return r[a&255]<<24|r[a>>>8&255]<<16|r[a>>>16&255]<<8|r[a>>>24&255]};A.interleave2=function(a,r){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|
a<<2)&858993459;r&=65535;r=(r|r<<8)&16711935;r=(r|r<<4)&252645135;r=(r|r<<2)&858993459;return(a|a<<1)&1431655765|((r|r<<1)&1431655765)<<1};A.deinterleave2=function(a,r){a=a>>>r&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};A.interleave3=function(a,r,f){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;a=(a|a<<2)&1227133513|((r|r<<2)&1227133513)<<
1;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;return a|((f|f<<2)&1227133513)<<2};A.deinterleave3=function(a,r){a=a>>>r&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};A.nextCombination=function(q){var r=q|q-1;return r+1|(~r&-~r)-1>>>a(q)+1}},{}],57:[function(g,u,A){(function(a,r){function q(b,a){if(!b)throw Error(a||"Assertion failed");}function v(b,a){b.super_=a;var c=function(){};c.prototype=a.prototype;
b.prototype=new c;b.prototype.constructor=b}function f(b,a,c){if(f.isBN(b))return b;this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==b){if("le"===a||"be"===a)c=a,a=10;this._init(b||0,a||10,c||"be")}}function e(b,a,c){var d=0;for(c=Math.min(b.length,c);a<c;a++)var h=b.charCodeAt(a)-48,d=d<<4,d=49<=h&&54>=h?d|h-49+10:17<=h&&22>=h?d|h-17+10:d|h&15;return d}function k(b,a,c,d){var h=0;for(c=Math.min(b.length,c);a<c;a++)var f=b.charCodeAt(a)-48,h=h*d,h=49<=f?h+(f-49+10):17<=f?h+(f-
17+10):h+f;return h}function p(b,a,c){c.negative=a.negative^b.negative;var d=b.length+a.length|0;c.length=d;var d=d-1|0,h=b.words[0]|0,f=a.words[0]|0,h=h*f,m=h/67108864|0;c.words[0]=h&67108863;for(var e=1;e<d;e++){for(var k=m>>>26,p=m&67108863,m=Math.min(e,a.length-1),n=Math.max(0,e-b.length+1);n<=m;n++)h=b.words[e-n|0]|0,f=a.words[n]|0,h=h*f+p,k+=h/67108864|0,p=h&67108863;c.words[e]=p|0;m=k|0}0!==m?c.words[e]=m|0:c.length--;return c.strip()}function J(b,a){this.x=b;this.y=a}function z(b,a){this.name=
b;this.p=new f(a,16);this.n=this.p.bitLength();this.k=(new f(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function y(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function m(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function c(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function d(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}
function h(b){"string"===typeof b?(b=f._prime(b),this.m=b.p,this.prime=b):(q(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null)}function H(b){h.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new f(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof a?a.exports=
f:r.BN=f;f.BN=f;f.wordSize=26;var w;try{w=g("buffer").Buffer}catch(b){}f.isBN=function(b){return b instanceof f?!0:null!==b&&"object"===typeof b&&b.constructor.wordSize===f.wordSize&&Array.isArray(b.words)};f.max=function(b,a){return 0<b.cmp(a)?b:a};f.min=function(b,a){return 0>b.cmp(a)?b:a};f.prototype._init=function(b,a,c){if("number"===typeof b)return this._initNumber(b,a,c);if("object"===typeof b)return this._initArray(b,a,c);"hex"===a&&(a=16);q(a===(a|0)&&2<=a&&36>=a);b=b.toString().replace(/\s+/g,
"");var d=0;"-"===b[0]&&d++;16===a?this._parseHex(b,d):this._parseBase(b,a,d);"-"===b[0]&&(this.negative=1);this.strip();"le"===c&&this._initArray(this.toArray(),a,c)};f.prototype._initNumber=function(b,a,c){0>b&&(this.negative=1,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(q(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===c&&this._initArray(this.toArray(),a,c)};f.prototype._initArray=
function(b,a,c){q("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var d,h=0;if("be"===c)for(a=b.length-1,c=0;0<=a;a-=3)d=b[a]|b[a-1]<<8|b[a-2]<<16,this.words[c]|=d<<h&67108863,this.words[c+1]=d>>>26-h&67108863,h+=24,26<=h&&(h-=26,c++);else if("le"===c)for(c=a=0;a<b.length;a+=3)d=b[a]|b[a+1]<<8|b[a+2]<<16,this.words[c]|=d<<h&67108863,this.words[c+1]=d>>>26-h&
67108863,h+=24,26<=h&&(h-=26,c++);return this.strip()};f.prototype._parseHex=function(b,a){this.length=Math.ceil((b.length-a)/6);this.words=Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var d,h,f=0,c=b.length-6;for(d=0;c>=a;c-=6)h=e(b,c,c+6),this.words[d]|=h<<f&67108863,this.words[d+1]|=h>>>26-f&4194303,f+=24,26<=f&&(f-=26,d++);c+6!==a&&(h=e(b,a,c+6),this.words[d]|=h<<f&67108863,this.words[d+1]|=h>>>26-f&4194303);this.strip()};f.prototype._parseBase=function(b,a,c){this.words=[0];
this.length=1;for(var d=0,h=1;67108863>=h;h*=a)d++;d--;for(var h=h/a|0,f=b.length-c,m=f%d,e=Math.min(f,f-m)+c,f=0;c<e;c+=d)f=k(b,c,c+d,a),this.imuln(h),67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f);if(0!==m){d=1;f=k(b,c,b.length,a);for(c=0;c<m;c++)d*=a;this.imuln(d);67108864>this.words[0]+f?this.words[0]+=f:this._iaddn(f)}};f.prototype.copy=function(b){b.words=Array(this.length);for(var a=0;a<this.length;a++)b.words[a]=this.words[a];b.length=this.length;b.negative=this.negative;b.red=this.red};
f.prototype.clone=function(){var b=new f(null);this.copy(b);return b};f.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this};f.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};f.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
G=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(b,a){b=b||10;a=a|0||1;var c;if(16===b||"hex"===b){c="";for(var d=0,h=0,f=0;f<this.length;f++){var m=
this.words[f],e=((m<<d|h)&16777215).toString(16),h=m>>>24-d&16777215;c=0!==h||f!==this.length-1?u[6-e.length]+e+c:e+c;d+=2;26<=d&&(d-=26,f--)}for(0!==h&&(c=h.toString(16)+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}if(b===(b|0)&&2<=b&&36>=b){d=G[b];h=E[b];c="";f=this.clone();for(f.negative=0;!f.isZero();)m=f.modn(h).toString(b),f=f.idivn(h),c=f.isZero()?m+c:u[d-m.length]+m+c;for(this.isZero()&&(c="0"+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}q(!1,"Base should be between 2 and 36")};
f.prototype.toNumber=function(){var b=this.words[0];2===this.length?b+=67108864*this.words[1]:3===this.length&&1===this.words[2]?b+=4503599627370496+67108864*this.words[1]:2<this.length&&q(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-b:b};f.prototype.toJSON=function(){return this.toString(16)};f.prototype.toBuffer=function(b,a){q("undefined"!==typeof w);return this.toArrayLike(w,b,a)};f.prototype.toArray=function(b,a){return this.toArrayLike(Array,b,a)};f.prototype.toArrayLike=
function(b,a,c){var d=this.byteLength();c=c||Math.max(1,d);q(d<=c,"byte array longer than desired length");q(0<c,"Requested array length <= 0");this.strip();var h="le"===a;b=new b(c);a=this.clone();if(h){for(h=0;!a.isZero();h++)d=a.andln(255),a.iushrn(8),b[h]=d;for(;h<c;h++)b[h]=0}else{for(h=0;h<c-d;h++)b[h]=0;for(h=0;!a.isZero();h++)d=a.andln(255),a.iushrn(8),b[c-h-1]=d}return b};f.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var a=0;4096<=b&&(a+=13,b>>>=13);64<=
b&&(a+=7,b>>>=7);8<=b&&(a+=4,b>>>=4);2<=b&&(a+=2,b>>>=2);return a+b};f.prototype._zeroBits=function(b){if(0===b)return 26;var a=0;0===(b&8191)&&(a+=13,b>>>=13);0===(b&127)&&(a+=7,b>>>=7);0===(b&15)&&(a+=4,b>>>=4);0===(b&3)&&(a+=2,b>>>=2);0===(b&1)&&a++;return a};f.prototype.bitLength=function(){var b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,a=0;a<this.length;a++){var c=this._zeroBits(this.words[a]),
b=b+c;if(26!==c)break}return b};f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};f.prototype.toTwos=function(b){return 0!==this.negative?this.abs().inotn(b).iaddn(1):this.clone()};f.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()};f.prototype.isNeg=function(){return 0!==this.negative};f.prototype.neg=function(){return this.clone().ineg()};f.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};f.prototype.iuor=
function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var a=0;a<b.length;a++)this.words[a]|=b.words[a];return this.strip()};f.prototype.ior=function(b){q(0===(this.negative|b.negative));return this.iuor(b)};f.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};f.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)};f.prototype.iuand=function(b){var a;a=this.length>b.length?b:this;for(var c=0;c<a.length;c++)this.words[c]&=
b.words[c];this.length=a.length;return this.strip()};f.prototype.iand=function(b){q(0===(this.negative|b.negative));return this.iuand(b)};f.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};f.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)};f.prototype.iuxor=function(b){var a;this.length>b.length?a=this:(a=b,b=this);for(var c=0;c<b.length;c++)this.words[c]=a.words[c]^b.words[c];if(this!==a)for(;c<a.length;c++)this.words[c]=
a.words[c];this.length=a.length;return this.strip()};f.prototype.ixor=function(b){q(0===(this.negative|b.negative));return this.iuxor(b)};f.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};f.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)};f.prototype.inotn=function(b){q("number"===typeof b&&0<=b);var a=Math.ceil(b/26)|0;b%=26;this._expand(a);0<b&&a--;for(var c=0;c<a;c++)this.words[c]=~this.words[c]&
67108863;0<b&&(this.words[c]=~this.words[c]&67108863>>26-b);return this.strip()};f.prototype.notn=function(b){return this.clone().inotn(b)};f.prototype.setn=function(b,a){q("number"===typeof b&&0<=b);var c=b/26|0,d=b%26;this._expand(c+1);this.words[c]=a?this.words[c]|1<<d:this.words[c]&~(1<<d);return this.strip()};f.prototype.iadd=function(b){var a;if(0!==this.negative&&0===b.negative)return this.negative=0,this.isub(b),this.negative^=1,this._normSign();if(0===this.negative&&0!==b.negative)return b.negative=
0,a=this.isub(b),b.negative=1,a._normSign();var c;this.length>b.length?c=this:(c=b,b=this);for(var d=a=0;d<b.length;d++)a=(c.words[d]|0)+(b.words[d]|0)+a,this.words[d]=a&67108863,a>>>=26;for(;0!==a&&d<c.length;d++)a=(c.words[d]|0)+a,this.words[d]=a&67108863,a>>>=26;this.length=c.length;if(0!==a)this.words[this.length]=a,this.length++;else if(c!==this)for(;d<c.length;d++)this.words[d]=c.words[d];return this};f.prototype.add=function(b){var a;return 0!==b.negative&&0===this.negative?(b.negative=0,a=
this.sub(b),b.negative^=1,a):0===b.negative&&0!==this.negative?(this.negative=0,a=b.sub(this),this.negative=1,a):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};f.prototype.isub=function(b){if(0!==b.negative){b.negative=0;var a=this.iadd(b);b.negative=1;return a._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();a=this.cmp(b);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;var c;0<a?c=this:(c=b,b=this);for(var d=
0,h=0;h<b.length;h++)a=(c.words[h]|0)-(b.words[h]|0)+d,d=a>>26,this.words[h]=a&67108863;for(;0!==d&&h<c.length;h++)a=(c.words[h]|0)+d,d=a>>26,this.words[h]=a&67108863;if(0===d&&h<c.length&&c!==this)for(;h<c.length;h++)this.words[h]=c.words[h];this.length=Math.max(this.length,h);c!==this&&(this.negative=1);return this.strip()};f.prototype.sub=function(b){return this.clone().isub(b)};var A=function(b,a,c){var d=b.words,h=a.words,f=c.words,m=0,e,k=d[0]|0,p=k&8191,n=k>>>13,t=d[1]|0,k=t&8191,q=t>>>13,
r=d[2]|0,t=r&8191,w=r>>>13,g=d[3]|0,r=g&8191,v=g>>>13,y=d[4]|0,g=y&8191,z=y>>>13,H=d[5]|0,y=H&8191,J=H>>>13,B=d[6]|0,H=B&8191,u=B>>>13,L=d[7]|0,B=L&8191,E=L>>>13,G=d[8]|0,L=G&8191,G=G>>>13,A=d[9]|0,d=A&8191,A=A>>>13,N=h[0]|0,ta=N&8191,X=N>>>13,la=h[1]|0,N=la&8191,oa=la>>>13,ya=h[2]|0,la=ya&8191,ua=ya>>>13,aa=h[3]|0,ya=aa&8191,za=aa>>>13,ja=h[4]|0,aa=ja&8191,ma=ja>>>13,sa=h[5]|0,ja=sa&8191,Ga=sa>>>13,Da=h[6]|0,sa=Da&8191,sb=Da>>>13,Ka=h[7]|0,Da=Ka&8191,ea=Ka>>>13,ca=h[8]|0,Ka=ca&8191,ca=ca>>>13,na=
h[9]|0,h=na&8191,na=na>>>13;c.negative=b.negative^a.negative;c.length=19;e=Math.imul(p,ta);b=Math.imul(p,X);b=b+Math.imul(n,ta)|0;a=Math.imul(n,X);var wa=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(wa>>>26)|0,wa=wa&67108863;e=Math.imul(k,ta);b=Math.imul(k,X);b=b+Math.imul(q,ta)|0;a=Math.imul(q,X);e=e+Math.imul(p,N)|0;b=b+Math.imul(p,oa)|0;b=b+Math.imul(n,N)|0;a=a+Math.imul(n,oa)|0;var Ea=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(Ea>>>26)|0,Ea=Ea&67108863;e=Math.imul(t,ta);b=Math.imul(t,X);b=b+Math.imul(w,
ta)|0;a=Math.imul(w,X);e=e+Math.imul(k,N)|0;b=b+Math.imul(k,oa)|0;b=b+Math.imul(q,N)|0;a=a+Math.imul(q,oa)|0;e=e+Math.imul(p,la)|0;b=b+Math.imul(p,ua)|0;b=b+Math.imul(n,la)|0;a=a+Math.imul(n,ua)|0;var Oa=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(Oa>>>26)|0,Oa=Oa&67108863;e=Math.imul(r,ta);b=Math.imul(r,X);b=b+Math.imul(v,ta)|0;a=Math.imul(v,X);e=e+Math.imul(t,N)|0;b=b+Math.imul(t,oa)|0;b=b+Math.imul(w,N)|0;a=a+Math.imul(w,oa)|0;e=e+Math.imul(k,la)|0;b=b+Math.imul(k,ua)|0;b=b+Math.imul(q,la)|0;a=
a+Math.imul(q,ua)|0;e=e+Math.imul(p,ya)|0;b=b+Math.imul(p,za)|0;b=b+Math.imul(n,ya)|0;a=a+Math.imul(n,za)|0;var vb=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(vb>>>26)|0,vb=vb&67108863;e=Math.imul(g,ta);b=Math.imul(g,X);b=b+Math.imul(z,ta)|0;a=Math.imul(z,X);e=e+Math.imul(r,N)|0;b=b+Math.imul(r,oa)|0;b=b+Math.imul(v,N)|0;a=a+Math.imul(v,oa)|0;e=e+Math.imul(t,la)|0;b=b+Math.imul(t,ua)|0;b=b+Math.imul(w,la)|0;a=a+Math.imul(w,ua)|0;e=e+Math.imul(k,ya)|0;b=b+Math.imul(k,za)|0;b=b+Math.imul(q,ya)|0;a=a+
Math.imul(q,za)|0;e=e+Math.imul(p,aa)|0;b=b+Math.imul(p,ma)|0;b=b+Math.imul(n,aa)|0;a=a+Math.imul(n,ma)|0;var ha=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(ha>>>26)|0,ha=ha&67108863;e=Math.imul(y,ta);b=Math.imul(y,X);b=b+Math.imul(J,ta)|0;a=Math.imul(J,X);e=e+Math.imul(g,N)|0;b=b+Math.imul(g,oa)|0;b=b+Math.imul(z,N)|0;a=a+Math.imul(z,oa)|0;e=e+Math.imul(r,la)|0;b=b+Math.imul(r,ua)|0;b=b+Math.imul(v,la)|0;a=a+Math.imul(v,ua)|0;e=e+Math.imul(t,ya)|0;b=b+Math.imul(t,za)|0;b=b+Math.imul(w,ya)|0;a=a+Math.imul(w,
za)|0;e=e+Math.imul(k,aa)|0;b=b+Math.imul(k,ma)|0;b=b+Math.imul(q,aa)|0;a=a+Math.imul(q,ma)|0;e=e+Math.imul(p,ja)|0;b=b+Math.imul(p,Ga)|0;b=b+Math.imul(n,ja)|0;a=a+Math.imul(n,Ga)|0;var Y=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(Y>>>26)|0,Y=Y&67108863;e=Math.imul(H,ta);b=Math.imul(H,X);b=b+Math.imul(u,ta)|0;a=Math.imul(u,X);e=e+Math.imul(y,N)|0;b=b+Math.imul(y,oa)|0;b=b+Math.imul(J,N)|0;a=a+Math.imul(J,oa)|0;e=e+Math.imul(g,la)|0;b=b+Math.imul(g,ua)|0;b=b+Math.imul(z,la)|0;a=a+Math.imul(z,ua)|0;
e=e+Math.imul(r,ya)|0;b=b+Math.imul(r,za)|0;b=b+Math.imul(v,ya)|0;a=a+Math.imul(v,za)|0;e=e+Math.imul(t,aa)|0;b=b+Math.imul(t,ma)|0;b=b+Math.imul(w,aa)|0;a=a+Math.imul(w,ma)|0;e=e+Math.imul(k,ja)|0;b=b+Math.imul(k,Ga)|0;b=b+Math.imul(q,ja)|0;a=a+Math.imul(q,Ga)|0;e=e+Math.imul(p,sa)|0;b=b+Math.imul(p,sb)|0;b=b+Math.imul(n,sa)|0;a=a+Math.imul(n,sb)|0;var xa=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(xa>>>26)|0,xa=xa&67108863;e=Math.imul(B,ta);b=Math.imul(B,X);b=b+Math.imul(E,ta)|0;a=Math.imul(E,X);
e=e+Math.imul(H,N)|0;b=b+Math.imul(H,oa)|0;b=b+Math.imul(u,N)|0;a=a+Math.imul(u,oa)|0;e=e+Math.imul(y,la)|0;b=b+Math.imul(y,ua)|0;b=b+Math.imul(J,la)|0;a=a+Math.imul(J,ua)|0;e=e+Math.imul(g,ya)|0;b=b+Math.imul(g,za)|0;b=b+Math.imul(z,ya)|0;a=a+Math.imul(z,za)|0;e=e+Math.imul(r,aa)|0;b=b+Math.imul(r,ma)|0;b=b+Math.imul(v,aa)|0;a=a+Math.imul(v,ma)|0;e=e+Math.imul(t,ja)|0;b=b+Math.imul(t,Ga)|0;b=b+Math.imul(w,ja)|0;a=a+Math.imul(w,Ga)|0;e=e+Math.imul(k,sa)|0;b=b+Math.imul(k,sb)|0;b=b+Math.imul(q,sa)|
0;a=a+Math.imul(q,sb)|0;e=e+Math.imul(p,Da)|0;b=b+Math.imul(p,ea)|0;b=b+Math.imul(n,Da)|0;a=a+Math.imul(n,ea)|0;var Fa=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>13)|0)+(Fa>>>26)|0,Fa=Fa&67108863;e=Math.imul(L,ta);b=Math.imul(L,X);b=b+Math.imul(G,ta)|0;a=Math.imul(G,X);e=e+Math.imul(B,N)|0;b=b+Math.imul(B,oa)|0;b=b+Math.imul(E,N)|0;a=a+Math.imul(E,oa)|0;e=e+Math.imul(H,la)|0;b=b+Math.imul(H,ua)|0;b=b+Math.imul(u,la)|0;a=a+Math.imul(u,ua)|0;e=e+Math.imul(y,ya)|0;b=b+Math.imul(y,za)|0;b=b+Math.imul(J,ya)|0;
a=a+Math.imul(J,za)|0;e=e+Math.imul(g,aa)|0;b=b+Math.imul(g,ma)|0;b=b+Math.imul(z,aa)|0;a=a+Math.imul(z,ma)|0;e=e+Math.imul(r,ja)|0;b=b+Math.imul(r,Ga)|0;b=b+Math.imul(v,ja)|0;a=a+Math.imul(v,Ga)|0;e=e+Math.imul(t,sa)|0;b=b+Math.imul(t,sb)|0;b=b+Math.imul(w,sa)|0;a=a+Math.imul(w,sb)|0;e=e+Math.imul(k,Da)|0;b=b+Math.imul(k,ea)|0;b=b+Math.imul(q,Da)|0;a=a+Math.imul(q,ea)|0;e=e+Math.imul(p,Ka)|0;b=b+Math.imul(p,ca)|0;b=b+Math.imul(n,Ka)|0;a=a+Math.imul(n,ca)|0;var pa=(m+e|0)+((b&8191)<<13)|0,m=(a+(b>>>
13)|0)+(pa>>>26)|0,pa=pa&67108863;e=Math.imul(d,ta);b=Math.imul(d,X);b=b+Math.imul(A,ta)|0;a=Math.imul(A,X);e=e+Math.imul(L,N)|0;b=b+Math.imul(L,oa)|0;b=b+Math.imul(G,N)|0;a=a+Math.imul(G,oa)|0;e=e+Math.imul(B,la)|0;b=b+Math.imul(B,ua)|0;b=b+Math.imul(E,la)|0;a=a+Math.imul(E,ua)|0;e=e+Math.imul(H,ya)|0;b=b+Math.imul(H,za)|0;b=b+Math.imul(u,ya)|0;a=a+Math.imul(u,za)|0;e=e+Math.imul(y,aa)|0;b=b+Math.imul(y,ma)|0;b=b+Math.imul(J,aa)|0;a=a+Math.imul(J,ma)|0;e=e+Math.imul(g,ja)|0;b=b+Math.imul(g,Ga)|0;
b=b+Math.imul(z,ja)|0;a=a+Math.imul(z,Ga)|0;e=e+Math.imul(r,sa)|0;b=b+Math.imul(r,sb)|0;b=b+Math.imul(v,sa)|0;a=a+Math.imul(v,sb)|0;e=e+Math.imul(t,Da)|0;b=b+Math.imul(t,ea)|0;b=b+Math.imul(w,Da)|0;a=a+Math.imul(w,ea)|0;e=e+Math.imul(k,Ka)|0;b=b+Math.imul(k,ca)|0;b=b+Math.imul(q,Ka)|0;a=a+Math.imul(q,ca)|0;e=e+Math.imul(p,h)|0;b=b+Math.imul(p,na)|0;b=b+Math.imul(n,h)|0;a=a+Math.imul(n,na)|0;p=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(p>>>26)|0;p&=67108863;e=Math.imul(d,N);b=Math.imul(d,oa);b=b+Math.imul(A,
N)|0;a=Math.imul(A,oa);e=e+Math.imul(L,la)|0;b=b+Math.imul(L,ua)|0;b=b+Math.imul(G,la)|0;a=a+Math.imul(G,ua)|0;e=e+Math.imul(B,ya)|0;b=b+Math.imul(B,za)|0;b=b+Math.imul(E,ya)|0;a=a+Math.imul(E,za)|0;e=e+Math.imul(H,aa)|0;b=b+Math.imul(H,ma)|0;b=b+Math.imul(u,aa)|0;a=a+Math.imul(u,ma)|0;e=e+Math.imul(y,ja)|0;b=b+Math.imul(y,Ga)|0;b=b+Math.imul(J,ja)|0;a=a+Math.imul(J,Ga)|0;e=e+Math.imul(g,sa)|0;b=b+Math.imul(g,sb)|0;b=b+Math.imul(z,sa)|0;a=a+Math.imul(z,sb)|0;e=e+Math.imul(r,Da)|0;b=b+Math.imul(r,
ea)|0;b=b+Math.imul(v,Da)|0;a=a+Math.imul(v,ea)|0;e=e+Math.imul(t,Ka)|0;b=b+Math.imul(t,ca)|0;b=b+Math.imul(w,Ka)|0;a=a+Math.imul(w,ca)|0;e=e+Math.imul(k,h)|0;b=b+Math.imul(k,na)|0;b=b+Math.imul(q,h)|0;a=a+Math.imul(q,na)|0;k=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(k>>>26)|0;k&=67108863;e=Math.imul(d,la);b=Math.imul(d,ua);b=b+Math.imul(A,la)|0;a=Math.imul(A,ua);e=e+Math.imul(L,ya)|0;b=b+Math.imul(L,za)|0;b=b+Math.imul(G,ya)|0;a=a+Math.imul(G,za)|0;e=e+Math.imul(B,aa)|0;b=b+Math.imul(B,ma)|0;b=
b+Math.imul(E,aa)|0;a=a+Math.imul(E,ma)|0;e=e+Math.imul(H,ja)|0;b=b+Math.imul(H,Ga)|0;b=b+Math.imul(u,ja)|0;a=a+Math.imul(u,Ga)|0;e=e+Math.imul(y,sa)|0;b=b+Math.imul(y,sb)|0;b=b+Math.imul(J,sa)|0;a=a+Math.imul(J,sb)|0;e=e+Math.imul(g,Da)|0;b=b+Math.imul(g,ea)|0;b=b+Math.imul(z,Da)|0;a=a+Math.imul(z,ea)|0;e=e+Math.imul(r,Ka)|0;b=b+Math.imul(r,ca)|0;b=b+Math.imul(v,Ka)|0;a=a+Math.imul(v,ca)|0;e=e+Math.imul(t,h)|0;b=b+Math.imul(t,na)|0;b=b+Math.imul(w,h)|0;a=a+Math.imul(w,na)|0;t=(m+e|0)+((b&8191)<<
13)|0;m=(a+(b>>>13)|0)+(t>>>26)|0;t&=67108863;e=Math.imul(d,ya);b=Math.imul(d,za);b=b+Math.imul(A,ya)|0;a=Math.imul(A,za);e=e+Math.imul(L,aa)|0;b=b+Math.imul(L,ma)|0;b=b+Math.imul(G,aa)|0;a=a+Math.imul(G,ma)|0;e=e+Math.imul(B,ja)|0;b=b+Math.imul(B,Ga)|0;b=b+Math.imul(E,ja)|0;a=a+Math.imul(E,Ga)|0;e=e+Math.imul(H,sa)|0;b=b+Math.imul(H,sb)|0;b=b+Math.imul(u,sa)|0;a=a+Math.imul(u,sb)|0;e=e+Math.imul(y,Da)|0;b=b+Math.imul(y,ea)|0;b=b+Math.imul(J,Da)|0;a=a+Math.imul(J,ea)|0;e=e+Math.imul(g,Ka)|0;b=b+Math.imul(g,
ca)|0;b=b+Math.imul(z,Ka)|0;a=a+Math.imul(z,ca)|0;e=e+Math.imul(r,h)|0;b=b+Math.imul(r,na)|0;b=b+Math.imul(v,h)|0;a=a+Math.imul(v,na)|0;r=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(r>>>26)|0;r&=67108863;e=Math.imul(d,aa);b=Math.imul(d,ma);b=b+Math.imul(A,aa)|0;a=Math.imul(A,ma);e=e+Math.imul(L,ja)|0;b=b+Math.imul(L,Ga)|0;b=b+Math.imul(G,ja)|0;a=a+Math.imul(G,Ga)|0;e=e+Math.imul(B,sa)|0;b=b+Math.imul(B,sb)|0;b=b+Math.imul(E,sa)|0;a=a+Math.imul(E,sb)|0;e=e+Math.imul(H,Da)|0;b=b+Math.imul(H,ea)|0;b=
b+Math.imul(u,Da)|0;a=a+Math.imul(u,ea)|0;e=e+Math.imul(y,Ka)|0;b=b+Math.imul(y,ca)|0;b=b+Math.imul(J,Ka)|0;a=a+Math.imul(J,ca)|0;e=e+Math.imul(g,h)|0;b=b+Math.imul(g,na)|0;b=b+Math.imul(z,h)|0;a=a+Math.imul(z,na)|0;g=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(g>>>26)|0;g&=67108863;e=Math.imul(d,ja);b=Math.imul(d,Ga);b=b+Math.imul(A,ja)|0;a=Math.imul(A,Ga);e=e+Math.imul(L,sa)|0;b=b+Math.imul(L,sb)|0;b=b+Math.imul(G,sa)|0;a=a+Math.imul(G,sb)|0;e=e+Math.imul(B,Da)|0;b=b+Math.imul(B,ea)|0;b=b+Math.imul(E,
Da)|0;a=a+Math.imul(E,ea)|0;e=e+Math.imul(H,Ka)|0;b=b+Math.imul(H,ca)|0;b=b+Math.imul(u,Ka)|0;a=a+Math.imul(u,ca)|0;e=e+Math.imul(y,h)|0;b=b+Math.imul(y,na)|0;b=b+Math.imul(J,h)|0;a=a+Math.imul(J,na)|0;y=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(y>>>26)|0;y&=67108863;e=Math.imul(d,sa);b=Math.imul(d,sb);b=b+Math.imul(A,sa)|0;a=Math.imul(A,sb);e=e+Math.imul(L,Da)|0;b=b+Math.imul(L,ea)|0;b=b+Math.imul(G,Da)|0;a=a+Math.imul(G,ea)|0;e=e+Math.imul(B,Ka)|0;b=b+Math.imul(B,ca)|0;b=b+Math.imul(E,Ka)|0;a=
a+Math.imul(E,ca)|0;e=e+Math.imul(H,h)|0;b=b+Math.imul(H,na)|0;b=b+Math.imul(u,h)|0;a=a+Math.imul(u,na)|0;H=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(H>>>26)|0;H&=67108863;e=Math.imul(d,Da);b=Math.imul(d,ea);b=b+Math.imul(A,Da)|0;a=Math.imul(A,ea);e=e+Math.imul(L,Ka)|0;b=b+Math.imul(L,ca)|0;b=b+Math.imul(G,Ka)|0;a=a+Math.imul(G,ca)|0;e=e+Math.imul(B,h)|0;b=b+Math.imul(B,na)|0;b=b+Math.imul(E,h)|0;a=a+Math.imul(E,na)|0;B=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(B>>>26)|0;B&=67108863;e=Math.imul(d,
Ka);b=Math.imul(d,ca);b=b+Math.imul(A,Ka)|0;a=Math.imul(A,ca);e=e+Math.imul(L,h)|0;b=b+Math.imul(L,na)|0;b=b+Math.imul(G,h)|0;a=a+Math.imul(G,na)|0;L=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(L>>>26)|0;L&=67108863;e=Math.imul(d,h);b=Math.imul(d,na);b=b+Math.imul(A,h)|0;a=Math.imul(A,na);n=(m+e|0)+((b&8191)<<13)|0;m=(a+(b>>>13)|0)+(n>>>26)|0;f[0]=wa;f[1]=Ea;f[2]=Oa;f[3]=vb;f[4]=ha;f[5]=Y;f[6]=xa;f[7]=Fa;f[8]=pa;f[9]=p;f[10]=k;f[11]=t;f[12]=r;f[13]=g;f[14]=y;f[15]=H;f[16]=B;f[17]=L;f[18]=n&67108863;
0!==m&&(f[19]=m,c.length++);return c};Math.imul||(A=p);f.prototype.mulTo=function(b,a){var c;c=this.length+b.length;if(10===this.length&&10===b.length)c=A(this,b,a);else if(63>c)c=p(this,b,a);else if(1024>c){a.negative=b.negative^this.negative;a.length=this.length+b.length;for(var d=0,h=c=0;h<a.length-1;h++){var e=c;c=0;for(var d=d&67108863,f=Math.min(h,b.length-1),m=Math.max(0,h-this.length+1);m<=f;m++){var k=(this.words[h-m]|0)*(b.words[m]|0),q=k&67108863,e=e+(k/67108864|0)|0,q=q+d|0,d=q&67108863,
e=e+(q>>>26)|0;c+=e>>>26;e&=67108863}a.words[h]=d;d=e}0!==d?a.words[h]=d:a.length--;c=a.strip()}else c=(new J).mulp(this,b,a);return c};J.prototype.makeRBT=function(b){for(var a=Array(b),c=f.prototype._countBits(b)-1,d=0;d<b;d++)a[d]=this.revBin(d,c,b);return a};J.prototype.revBin=function(b,a,c){if(0===b||b===c-1)return b;for(var d=c=0;d<a;d++)c|=(b&1)<<a-d-1,b>>=1;return c};J.prototype.permute=function(b,a,c,d,h,e){for(var f=0;f<e;f++)d[f]=a[b[f]],h[f]=c[b[f]]};J.prototype.transform=function(b,
a,c,d,h,e){this.permute(e,b,a,c,d,h);for(b=1;b<h;b<<=1){a=b<<1;e=Math.cos(2*Math.PI/a);for(var f=Math.sin(2*Math.PI/a),m=0;m<h;m+=a)for(var k=e,p=f,n=0;n<b;n++){var t=c[m+n],q=d[m+n],r=c[m+n+b],w=d[m+n+b],g=k*r-p*w,w=k*w+p*r,r=g;c[m+n]=t+r;d[m+n]=q+w;c[m+n+b]=t-r;d[m+n+b]=q-w;n!==a&&(g=e*k-f*p,p=e*p+f*k,k=g)}}};J.prototype.guessLen13b=function(b,a){for(var c=Math.max(a,b)|1,d=c&1,h=0,c=c/2|0;c;c>>>=1)h++;return 1<<h+1+d};J.prototype.conjugate=function(b,a,c){if(!(1>=c))for(var d=0;d<c/2;d++){var h=
b[d];b[d]=b[c-d-1];b[c-d-1]=h;h=a[d];a[d]=-a[c-d-1];a[c-d-1]=-h}};J.prototype.normalize13b=function(b,a){for(var c=0,d=0;d<a/2;d++)c=8192*Math.round(b[2*d+1]/a)+Math.round(b[2*d]/a)+c,b[d]=c&67108863,c=67108864>c?0:c/67108864|0;return b};J.prototype.convert13b=function(b,a,c,d){for(var h=0,e=0;e<a;e++)h+=b[e]|0,c[2*e]=h&8191,h>>>=13,c[2*e+1]=h&8191,h>>>=13;for(e=2*a;e<d;++e)c[e]=0;q(0===h);q(0===(h&-8192))};J.prototype.stub=function(b){for(var a=Array(b),c=0;c<b;c++)a[c]=0;return a};J.prototype.mulp=
function(b,a,c){var d=2*this.guessLen13b(b.length,a.length),h=this.makeRBT(d),e=this.stub(d),f=Array(d),m=Array(d),k=Array(d),p=Array(d),n=Array(d),t=Array(d),q=c.words;q.length=d;this.convert13b(b.words,b.length,f,d);this.convert13b(a.words,a.length,p,d);this.transform(f,e,m,k,d,h);this.transform(p,e,n,t,d,h);for(f=0;f<d;f++)p=m[f]*n[f]-k[f]*t[f],k[f]=m[f]*t[f]+k[f]*n[f],m[f]=p;this.conjugate(m,k,d);this.transform(m,k,q,e,d,h);this.conjugate(q,e,d);this.normalize13b(q,d);c.negative=b.negative^a.negative;
c.length=b.length+a.length;return c.strip()};f.prototype.mul=function(b){var a=new f(null);a.words=Array(this.length+b.length);return this.mulTo(b,a)};f.prototype.mulf=function(b){var a=new f(null);a.words=Array(this.length+b.length);return(new J).mulp(this,b,a)};f.prototype.imul=function(b){return this.clone().mulTo(b,this)};f.prototype.imuln=function(b){q("number"===typeof b);q(67108864>b);for(var a=0,c=0;c<this.length;c++){var d=(this.words[c]|0)*b,h=(d&67108863)+(a&67108863),a=a>>26,a=a+(d/67108864|
0),a=a+(h>>>26);this.words[c]=h&67108863}0!==a&&(this.words[c]=a,this.length++);return this};f.prototype.muln=function(b){return this.clone().imuln(b)};f.prototype.sqr=function(){return this.mul(this)};f.prototype.isqr=function(){return this.imul(this.clone())};f.prototype.pow=function(b){for(var a=Array(b.bitLength()),c=0;c<a.length;c++){var d=c%26;a[c]=(b.words[c/26|0]&1<<d)>>>d}if(0===a.length)return new f(1);b=this;for(c=0;c<a.length&&0===a[c];c++,b=b.sqr());if(++c<a.length)for(d=b.sqr();c<a.length;c++,
d=d.sqr())0!==a[c]&&(b=b.mul(d));return b};f.prototype.iushln=function(b){q("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;var c=67108863>>>26-a<<26-a,d;if(0!==a){var h=0;for(d=0;d<this.length;d++){var e=this.words[d]&c;this.words[d]=(this.words[d]|0)-e<<a|h;h=e>>>26-a}h&&(this.words[d]=h,this.length++)}if(0!==b){for(d=this.length-1;0<=d;d--)this.words[d+b]=this.words[d];for(d=0;d<b;d++)this.words[d]=0;this.length+=b}return this.strip()};f.prototype.ishln=function(b){q(0===this.negative);return this.iushln(b)};
f.prototype.iushrn=function(b,a,c){q("number"===typeof b&&0<=b);var d=b%26,h=Math.min((b-d)/26,this.length);b=67108863^67108863>>>d<<d;a=(a?(a-a%26)/26:0)-h;a=Math.max(0,a);if(c){for(var e=0;e<h;e++)c.words[e]=this.words[e];c.length=h}if(0!==h)if(this.length>h)for(this.length-=h,e=0;e<this.length;e++)this.words[e]=this.words[e+h];else this.words[0]=0,this.length=1;h=0;for(e=this.length-1;0<=e&&(0!==h||e>=a);e--){var f=this.words[e]|0;this.words[e]=h<<26-d|f>>>d;h=f&b}c&&0!==h&&(c.words[c.length++]=
h);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};f.prototype.ishrn=function(b,a,c){q(0===this.negative);return this.iushrn(b,a,c)};f.prototype.shln=function(b){return this.clone().ishln(b)};f.prototype.ushln=function(b){return this.clone().iushln(b)};f.prototype.shrn=function(b){return this.clone().ishrn(b)};f.prototype.ushrn=function(b){return this.clone().iushrn(b)};f.prototype.testn=function(b){q("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;return this.length<=b?!1:
!!(this.words[b]&1<<a)};f.prototype.imaskn=function(b){q("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;q(0===this.negative,"imaskn works only with positive numbers");if(this.length<=b)return this;0!==a&&b++;this.length=Math.min(b,this.length);0!==a&&(this.words[this.length-1]&=67108863^67108863>>>a<<a);return this.strip()};f.prototype.maskn=function(b){return this.clone().imaskn(b)};f.prototype.iaddn=function(b){q("number"===typeof b);q(67108864>b);if(0>b)return this.isubn(-b);if(0!==this.negative){if(1===
this.length&&(this.words[0]|0)<b)return this.words[0]=b-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(b);this.negative=1;return this}return this._iaddn(b)};f.prototype._iaddn=function(b){this.words[0]+=b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};f.prototype.isubn=function(b){q("number"===typeof b);q(67108864>b);if(0>b)return this.iaddn(-b);if(0!==
this.negative)return this.negative=0,this.iaddn(b),this.negative=1,this;this.words[0]-=b;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};f.prototype.addn=function(b){return this.clone().iaddn(b)};f.prototype.subn=function(b){return this.clone().isubn(b)};f.prototype.iabs=function(){this.negative=0;return this};f.prototype.abs=function(){return this.clone().iabs()};
f.prototype._ishlnsubmul=function(b,a,c){var d;this._expand(b.length+c);var h,e=0;for(d=0;d<b.length;d++)h=(this.words[d+c]|0)+e,e=(b.words[d]|0)*a,h-=e&67108863,e=(h>>26)-(e/67108864|0),this.words[d+c]=h&67108863;for(;d<this.length-c;d++)h=(this.words[d+c]|0)+e,e=h>>26,this.words[d+c]=h&67108863;if(0===e)return this.strip();q(-1===e);for(d=e=0;d<this.length;d++)h=-(this.words[d]|0)+e,e=h>>26,this.words[d]=h&67108863;this.negative=1;return this.strip()};f.prototype._wordDiv=function(b,a){var c=this.length-
b.length,d=this.clone(),h=b,e=h.words[h.length-1]|0,c=26-this._countBits(e);0!==c&&(h=h.ushln(c),d.iushln(c),e=h.words[h.length-1]|0);var m=d.length-h.length,k;if("mod"!==a){k=new f(null);k.length=m+1;k.words=Array(k.length);for(var p=0;p<k.length;p++)k.words[p]=0}p=d.clone()._ishlnsubmul(h,1,m);0===p.negative&&(d=p,k&&(k.words[m]=1));for(--m;0<=m;m--){p=67108864*(d.words[h.length+m]|0)+(d.words[h.length+m-1]|0);p=Math.min(p/e|0,67108863);for(d._ishlnsubmul(h,p,m);0!==d.negative;)p--,d.negative=0,
d._ishlnsubmul(h,1,m),d.isZero()||(d.negative^=1);k&&(k.words[m]=p)}k&&k.strip();d.strip();"div"!==a&&0!==c&&d.iushrn(c);return{div:k||null,mod:d}};f.prototype.divmod=function(b,a,c){q(!b.isZero());if(this.isZero())return{div:new f(0),mod:new f(0)};var d,h,e;return 0!==this.negative&&0===b.negative?(e=this.neg().divmod(b,a),"mod"!==a&&(d=e.div.neg()),"div"!==a&&(h=e.mod.neg(),c&&0!==h.negative&&h.iadd(b)),{div:d,mod:h}):0===this.negative&&0!==b.negative?(e=this.divmod(b.neg(),a),"mod"!==a&&(d=e.div.neg()),
{div:d,mod:e.mod}):0!==(this.negative&b.negative)?(e=this.neg().divmod(b.neg(),a),"div"!==a&&(h=e.mod.neg(),c&&0!==h.negative&&h.isub(b)),{div:e.div,mod:h}):b.length>this.length||0>this.cmp(b)?{div:new f(0),mod:this}:1===b.length?"div"===a?{div:this.divn(b.words[0]),mod:null}:"mod"===a?{div:null,mod:new f(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new f(this.modn(b.words[0]))}:this._wordDiv(b,a)};f.prototype.div=function(b){return this.divmod(b,"div",!1).div};f.prototype.mod=function(b){return this.divmod(b,
"mod",!1).mod};f.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod};f.prototype.divRound=function(b){var a=this.divmod(b);if(a.mod.isZero())return a.div;var c=0!==a.div.negative?a.mod.isub(b):a.mod,d=b.ushrn(1);b=b.andln(1);c=c.cmp(d);return 0>c||1===b&&0===c?a.div:0!==a.div.negative?a.div.isubn(1):a.div.iaddn(1)};f.prototype.modn=function(b){q(67108863>=b);for(var a=67108864%b,c=0,d=this.length-1;0<=d;d--)c=(a*c+(this.words[d]|0))%b;return c};f.prototype.idivn=function(b){q(67108863>=
b);for(var a=0,c=this.length-1;0<=c;c--)a=(this.words[c]|0)+67108864*a,this.words[c]=a/b|0,a%=b;return this.strip()};f.prototype.divn=function(b){return this.clone().idivn(b)};f.prototype.egcd=function(b){q(0===b.negative);q(!b.isZero());var a=this,c=b.clone(),a=0!==a.negative?a.umod(b):a.clone();b=new f(1);for(var d=new f(0),h=new f(0),e=new f(1),m=0;a.isEven()&&c.isEven();)a.iushrn(1),c.iushrn(1),++m;for(var k=c.clone(),p=a.clone();!a.isZero();){for(var r=0,n=1;0===(a.words[0]&n)&&26>r;++r,n<<=
1);if(0<r)for(a.iushrn(r);0<r--;){if(b.isOdd()||d.isOdd())b.iadd(k),d.isub(p);b.iushrn(1);d.iushrn(1)}r=0;for(n=1;0===(c.words[0]&n)&&26>r;++r,n<<=1);if(0<r)for(c.iushrn(r);0<r--;){if(h.isOdd()||e.isOdd())h.iadd(k),e.isub(p);h.iushrn(1);e.iushrn(1)}0<=a.cmp(c)?(a.isub(c),b.isub(h),d.isub(e)):(c.isub(a),h.isub(b),e.isub(d))}return{a:h,b:e,gcd:c.iushln(m)}};f.prototype._invmp=function(b){q(0===b.negative);q(!b.isZero());for(var a=this,c=b.clone(),a=0!==a.negative?a.umod(b):a.clone(),d=new f(1),h=new f(0),
e=c.clone();0<a.cmpn(1)&&0<c.cmpn(1);){for(var m=0,k=1;0===(a.words[0]&k)&&26>m;++m,k<<=1);if(0<m)for(a.iushrn(m);0<m--;)d.isOdd()&&d.iadd(e),d.iushrn(1);m=0;for(k=1;0===(c.words[0]&k)&&26>m;++m,k<<=1);if(0<m)for(c.iushrn(m);0<m--;)h.isOdd()&&h.iadd(e),h.iushrn(1);0<=a.cmp(c)?(a.isub(c),d.isub(h)):(c.isub(a),h.isub(d))}a=0===a.cmpn(1)?d:h;0>a.cmpn(0)&&a.iadd(b);return a};f.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var a=this.clone();b=b.clone();a.negative=
0;for(var c=b.negative=0;a.isEven()&&b.isEven();c++)a.iushrn(1),b.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var d=a.cmp(b);if(0>d)d=a,a=b,b=d;else if(0===d||0===b.cmpn(1))break;a.isub(b)}while(1);return b.iushln(c)};f.prototype.invm=function(b){return this.egcd(b).a.umod(b)};f.prototype.isEven=function(){return 0===(this.words[0]&1)};f.prototype.isOdd=function(){return 1===(this.words[0]&1)};f.prototype.andln=function(b){return this.words[0]&b};f.prototype.bincn=function(b){q("number"===
typeof b);var a=b%26;b=(b-a)/26;a=1<<a;if(this.length<=b)return this._expand(b+1),this.words[b]|=a,this;for(;0!==a&&b<this.length;b++){var c=this.words[b]|0,c=c+a,a=c>>>26,c=c&67108863;this.words[b]=c}0!==a&&(this.words[b]=a,this.length++);return this};f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};f.prototype.cmpn=function(b){var a=0>b;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();1<this.length?b=1:(a&&(b=-b),q(67108863>=b,"Number is too big"),
a=this.words[0]|0,b=a===b?0:a<b?-1:1);return 0!==this.negative?-b|0:b};f.prototype.cmp=function(b){if(0!==this.negative&&0===b.negative)return-1;if(0===this.negative&&0!==b.negative)return 1;b=this.ucmp(b);return 0!==this.negative?-b|0:b};f.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var a=0,c=this.length-1;0<=c;c--){var d=this.words[c]|0,h=b.words[c]|0;if(d!==h){d<h?a=-1:d>h&&(a=1);break}}return a};f.prototype.gtn=function(b){return 1===this.cmpn(b)};
f.prototype.gt=function(b){return 1===this.cmp(b)};f.prototype.gten=function(b){return 0<=this.cmpn(b)};f.prototype.gte=function(b){return 0<=this.cmp(b)};f.prototype.ltn=function(b){return-1===this.cmpn(b)};f.prototype.lt=function(b){return-1===this.cmp(b)};f.prototype.lten=function(b){return 0>=this.cmpn(b)};f.prototype.lte=function(b){return 0>=this.cmp(b)};f.prototype.eqn=function(b){return 0===this.cmpn(b)};f.prototype.eq=function(b){return 0===this.cmp(b)};f.red=function(b){return new h(b)};
f.prototype.toRed=function(b){q(!this.red,"Already a number in reduction context");q(0===this.negative,"red works only with positives");return b.convertTo(this)._forceRed(b)};f.prototype.fromRed=function(){q(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};f.prototype._forceRed=function(b){this.red=b;return this};f.prototype.forceRed=function(b){q(!this.red,"Already a number in reduction context");return this._forceRed(b)};f.prototype.redAdd=function(b){q(this.red,
"redAdd works only with red numbers");return this.red.add(this,b)};f.prototype.redIAdd=function(b){q(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};f.prototype.redSub=function(b){q(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};f.prototype.redISub=function(b){q(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};f.prototype.redShl=function(b){q(this.red,"redShl works only with red numbers");return this.red.shl(this,
b)};f.prototype.redMul=function(b){q(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};f.prototype.redIMul=function(b){q(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};f.prototype.redSqr=function(){q(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};f.prototype.redISqr=function(){q(this.red,"redISqr works only with red numbers");this.red._verify1(this);
return this.red.isqr(this)};f.prototype.redSqrt=function(){q(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};f.prototype.redInvm=function(){q(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};f.prototype.redNeg=function(){q(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};f.prototype.redPow=function(b){q(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);
return this.red.pow(this,b)};var B={k256:null,p224:null,p192:null,p25519:null};z.prototype._tmp=function(){var b=new f(null);b.words=Array(Math.ceil(this.n/13));return b};z.prototype.ireduce=function(b){var a;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),a=b.bitLength();while(a>this.n);a=a<this.n?-1:b.ucmp(this.p);0===a?(b.words[0]=0,b.length=1):0<a?b.isub(this.p):b.strip();return b};z.prototype.split=function(b,a){b.iushrn(this.n,0,a)};z.prototype.imulK=function(b){return b.imul(this.k)};
v(y,z);y.prototype.split=function(b,a){for(var c=Math.min(b.length,9),d=0;d<c;d++)a.words[d]=b.words[d];a.length=c;if(9>=b.length)b.words[0]=0,b.length=1;else{c=b.words[9];a.words[a.length++]=c&4194303;for(d=10;d<b.length;d++){var h=b.words[d]|0;b.words[d-10]=(h&4194303)<<4|c>>>22;c=h}c>>>=22;b.words[d-10]=c;b.length=0===c&&10<b.length?b.length-10:b.length-9}};y.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var a=0,c=0;c<b.length;c++){var d=b.words[c]|0,a=a+
977*d;b.words[c]=a&67108863;a=64*d+(a/67108864|0)}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};v(m,z);v(c,z);v(d,z);d.prototype.imulK=function(b){for(var a=0,c=0;c<b.length;c++){var a=19*(b.words[c]|0)+a,d=a&67108863,a=a>>>26;b.words[c]=d}0!==a&&(b.words[b.length++]=a);return b};f._prime=function(b){if(B[b])return B[b];var a;if("k256"===b)a=new y;else if("p224"===b)a=new m;else if("p192"===b)a=new c;else if("p25519"===b)a=new d;else throw Error("Unknown prime "+
b);return B[b]=a};h.prototype._verify1=function(b){q(0===b.negative,"red works only with positives");q(b.red,"red works only with red numbers")};h.prototype._verify2=function(b,a){q(0===(b.negative|a.negative),"red works only with positives");q(b.red&&b.red===a.red,"red works only with red numbers")};h.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)};h.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)};
h.prototype.add=function(b,a){this._verify2(b,a);var c=b.add(a);0<=c.cmp(this.m)&&c.isub(this.m);return c._forceRed(this)};h.prototype.iadd=function(b,a){this._verify2(b,a);var c=b.iadd(a);0<=c.cmp(this.m)&&c.isub(this.m);return c};h.prototype.sub=function(b,a){this._verify2(b,a);var c=b.sub(a);0>c.cmpn(0)&&c.iadd(this.m);return c._forceRed(this)};h.prototype.isub=function(b,a){this._verify2(b,a);var c=b.isub(a);0>c.cmpn(0)&&c.iadd(this.m);return c};h.prototype.shl=function(b,a){this._verify1(b);
return this.imod(b.ushln(a))};h.prototype.imul=function(b,a){this._verify2(b,a);return this.imod(b.imul(a))};h.prototype.mul=function(b,a){this._verify2(b,a);return this.imod(b.mul(a))};h.prototype.isqr=function(b){return this.imul(b,b.clone())};h.prototype.sqr=function(b){return this.mul(b,b)};h.prototype.sqrt=function(b){if(b.isZero())return b.clone();var a=this.m.andln(3);q(1===a%2);if(3===a)return a=this.m.add(new f(1)).iushrn(2),this.pow(b,a);for(var c=this.m.subn(1),d=0;!c.isZero()&&0===c.andln(1);)d++,
c.iushrn(1);q(!c.isZero());for(var a=(new f(1)).toRed(this),h=a.redNeg(),e=this.m.subn(1).iushrn(1),m=this.m.bitLength(),m=(new f(2*m*m)).toRed(this);0!==this.pow(m,e).cmp(h);)m.redIAdd(h);e=this.pow(m,c);h=this.pow(b,c.addn(1).iushrn(1));b=this.pow(b,c);for(c=d;0!==b.cmp(a);){m=b;for(d=0;0!==m.cmp(a);d++)m=m.redSqr();q(d<c);e=this.pow(e,(new f(1)).iushln(c-d-1));h=h.redMul(e);e=e.redSqr();b=b.redMul(e);c=d}return h};h.prototype.invm=function(b){b=b._invmp(this.m);return 0!==b.negative?(b.negative=
0,this.imod(b).redNeg()):this.imod(b)};h.prototype.pow=function(b,a){if(a.isZero())return(new f(1)).toRed(this);if(0===a.cmpn(1))return b.clone();var c=Array(16);c[0]=(new f(1)).toRed(this);c[1]=b;for(var d=2;d<c.length;d++)c[d]=this.mul(c[d-1],b);var h=c[0],e=0,m=0,k=a.bitLength()%26;0===k&&(k=26);for(d=a.length-1;0<=d;d--){for(var p=a.words[d],k=k-1;0<=k;k--){var q=p>>k&1;h!==c[0]&&(h=this.sqr(h));if(0===q&&0===e)m=0;else if(e<<=1,e|=q,m++,4===m||0===d&&0===k)h=this.mul(h,c[e]),e=m=0}k=26}return h};
h.prototype.convertTo=function(b){var a=b.umod(this.m);return a===b?a.clone():a};h.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};f.mont=function(b){return new H(b)};v(H,h);H.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))};H.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};H.prototype.imul=function(b,a){if(b.isZero()||a.isZero())return b.words[0]=0,b.length=1,b;var c=b.imul(a),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),
d=c=c.isub(d).iushrn(this.shift);0<=c.cmp(this.m)?d=c.isub(this.m):0>c.cmpn(0)&&(d=c.iadd(this.m));return d._forceRed(this)};H.prototype.mul=function(b,a){if(b.isZero()||a.isZero())return(new f(0))._forceRed(this);var c=b.mul(a),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=c=c.isub(d).iushrn(this.shift);0<=c.cmp(this.m)?d=c.isub(this.m):0>c.cmpn(0)&&(d=c.iadd(this.m));return d._forceRed(this)};H.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===
typeof u||u,this)},{buffer:65}],58:[function(g,u,A){function a(a,e,f,k){for(var m=0,c=0,d=0,h=a.length;d<h;++d){var q=a[d],r;a:{for(r=0;r<e;++r)if(!(q[r]<=q[r+e])){r=!0;break a}r=!1}if(!r){for(r=0;r<2*e;++r)f[m++]=q[r];k[c++]=d}}return c}function r(k,q,r,g){var m=k.length,c=q.length;if(!(0>=m||0>=c)){var d=k[0].length>>>1;if(!(0>=d)){var h,H=v.mallocDouble(2*d*m),w=v.mallocInt32(m),m=a(k,d,H,w);if(0<m){if(1===d&&g)f.init(m),h=f.sweepComplete(d,r,0,m,H,w,0,m,H,w);else{k=v.mallocDouble(2*d*c);var u=
v.mallocInt32(c),c=a(q,d,k,u);0<c&&(f.init(m+c),h=1===d?f.sweepBipartite(d,r,0,m,H,w,0,c,k,u):e(d,r,g,m,H,w,c,k,u),v.free(k),v.free(u))}v.free(H);v.free(w)}return h}}}function q(a,e){k.push([a,e])}u.exports=function(a,e,f){switch(arguments.length){case 1:return k=[],r(a,a,q,!0),k;case 2:if("function"===typeof e)return r(a,a,e,!0);k=[];r(a,e,q,!1);return k;case 3:return r(a,e,f,!1);default:throw Error("box-intersect: Invalid arguments");}};var v=g("typedarray-pool"),f=g("./lib/sweep"),e=g("./lib/intersect"),
k},{"./lib/intersect":60,"./lib/sweep":64,"typedarray-pool":126}],59:[function(g,u,A){function a(a){function g(f,k){var v,m="bruteForce"+(f?"Red":"Blue")+(k?"Flip":"")+(a?"Full":"");v=["function ",m,"(",r.join(),"){","var ","es","=2*","d",";"];var c="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(a?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";f?v.push("for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];","Q",":",c):v.push(c,"Q",":","for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];");
a?v.push("if(y1<x0||x1<y0)continue;"):k?v.push("if(y0<=x0||x1<y0)continue;"):v.push("if(y0<x0||x1<y0)continue;");v.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv(");k?v.push("yi,xi"):v.push("xi,yi");v.push(");if(rv!==void 0)return rv;}}}");v=v.join("");e.push(v);p.push("return "+m+"("+r.join()+");")}var f="bruteForce"+(a?"Full":"Partial"),e=[],k=r.slice();a||k.splice(3,0,"fp");var p=["function "+f+"("+k.join()+"){"];p.push("if(re-rs>be-bs){");
a?(g(!0,!1),p.push("}else{"),g(!1,!1)):(p.push("if(fp){"),g(!0,!0),p.push("}else{"),g(!0,!1),p.push("}}else{if(fp){"),g(!1,!0),p.push("}else{"),g(!1,!1),p.push("}"));p.push("}}return "+f);f=e.join("")+p.join("");return(new Function(f))()}var r="d ax vv rs re rb ri bs be bb bi".split(" ");A.partial=a(!1);A.full=a(!0)},{}],60:[function(g,u,A){function a(a,c,b,d,h,e,f,m,k){var p=w*a;G[p]=c;G[p+1]=b;G[p+2]=d;G[p+3]=h;G[p+4]=e;G[p+5]=f;a*=L;E[a]=m;E[a+1]=k}u.exports=function(g,B,b,l,x,u,C,F,A){var I=8*
q.log2(l+C+1)*(g+1)|0,K=q.nextPow2(w*I);G.length<K&&(r.free(G),G=r.mallocInt32(K));I=q.nextPow2(L*I);E.length<I&&(r.free(E),E=r.mallocDouble(I));var I=0,K=2*g,D;a(I++,0,0,l,0,C,b?16:0,-Infinity,Infinity);for(b||a(I++,0,0,C,0,l,1,-Infinity,Infinity);0<I;){--I;b=I*w;var n=G[b];C=G[b+1];var t=G[b+2],Z=G[b+3],Q=G[b+4];b=G[b+5];l=I*L;var Wa=E[l],Ba=E[l+1],W=b&1,da=!!(b&16),V=x,T=u,P=F;l=A;W&&(V=F,T=A,P=x,l=u);if(b&2&&(t=c(g,n,C,t,V,T,Ba),C>=t))continue;if(b&4&&(C=d(g,n,C,t,V,T,Wa),C>=t))continue;b=t-C;
var M=Q-Z;if(da){if(g*b*(b+M)<z){D=e.scanComplete(g,n,B,C,t,V,T,Z,Q,P,l);if(void 0!==D)return D;continue}}else if(g*Math.min(b,M)<p){D=v(g,n,B,W,C,t,V,T,Z,Q,P,l);if(void 0!==D)return D;continue}else if(g*b*M<J){D=e.scanBipartite(g,n,B,W,C,t,V,T,Z,Q,P,l);if(void 0!==D)return D;continue}b=y(g,n,C,t,V,T,Wa,Ba);if(C<b)if(g*(b-C)<p){if(D=f(g,n+1,B,C,b,V,T,Z,Q,P,l),void 0!==D)return D}else if(n===g-2){if(D=W?e.sweepBipartite(g,B,Z,Q,P,l,C,b,V,T):e.sweepBipartite(g,B,C,b,V,T,Z,Q,P,l),void 0!==D)return D}else a(I++,
n+1,C,b,Z,Q,W,-Infinity,Infinity),a(I++,n+1,Z,Q,C,b,W^1,-Infinity,Infinity);if(b<t)if(C=k(g,n,Z,Q,P,l),D=P[K*C+n],M=m(g,n,C,Q,P,l,D),M<Q&&a(I++,n,b,t,M,Q,(W|4)+(da?16:0),D,Ba),Z<C&&a(I++,n,b,t,Z,C,(W|2)+(da?16:0),Wa,D),C+1===M){if(da)a:{Z=g;Q=B;l=l[C];W=2*Z;C*=W;Wa=P[C+n];Ba=b;b*=W;b:for(;Ba<t;++Ba,b+=W)if(da=T[Ba],da!==l&&(M=V[b+n],D=V[b+n+Z],!(Wa<M||D<Wa))){for(var S=n+1;S<Z;++S){M=V[b+S];D=V[b+S+Z];var U=P[C+S+Z];if(D<P[C+S]||U<M)continue b}da=Q(da,l);if(void 0!==da){D=da;break a}}D=void 0}else a:{Z=
g;Q=B;l=l[C];Wa=2*Z;C*=Wa;Ba=P[C+n];da=b;b*=Wa;b:for(;da<t;++da,b+=Wa)if(M=V[b+n],D=V[b+n+Z],!(Ba<M||D<Ba||W&&Ba===M)){S=T[da];for(U=n+1;U<Z;++U){M=V[b+U];D=V[b+U+Z];var qa=P[C+U+Z];if(D<P[C+U]||qa<M)continue b}M=W?Q(l,S):Q(S,l);if(void 0!==M){D=M;break a}}D=void 0}if(void 0!==D)return D}else if(C<M)if(da){if(t=h(g,n,b,t,V,T,D),b<t)if(Z=m(g,n,b,t,V,T,D),n===g-2){if(b<Z&&(D=e.sweepComplete(g,B,b,Z,V,T,C,M,P,l),void 0!==D)||Z<t&&(D=e.sweepBipartite(g,B,Z,t,V,T,C,M,P,l),void 0!==D))return D}else b<Z&&
a(I++,n+1,b,Z,C,M,16,-Infinity,Infinity),Z<t&&(a(I++,n+1,Z,t,C,M,0,-Infinity,Infinity),a(I++,n+1,C,M,Z,t,1,-Infinity,Infinity))}else t=W?H(g,n,b,t,V,T,D):h(g,n,b,t,V,T,D),b<t&&(n===g-2?W?e.sweepBipartite(g,B,C,M,P,l,b,t,V,T):e.sweepBipartite(g,B,b,t,V,T,C,M,P,l):(a(I++,n+1,b,t,C,M,W,-Infinity,Infinity),a(I++,n+1,C,M,b,t,W^1,-Infinity,Infinity)))}};var r=g("typedarray-pool"),q=g("bit-twiddle");u=g("./brute");var v=u.partial,f=u.full,e=g("./sweep"),k=g("./median");g=g("./partition");var p=128,J=4194304,
z=4194304,y=g("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),m=g("lo===p0",["p0"]),c=g("lo<p0",["p0"]),d=g("hi<=p0",["p0"]),h=g("lo<=p0&&p0<=hi",["p0"]),H=g("lo<p0&&p0<=hi",["p0"]),w=6,L=2,G=r.mallocInt32(1024),E=r.mallocDouble(1024)},{"./brute":59,"./median":61,"./partition":62,"./sweep":64,"bit-twiddle":56,"typedarray-pool":126}],61:[function(g,u,A){u.exports=function(q,g,f,e,k,p){if(e<=f+1)return f;var J=f,z=e;e=e+f>>>1;for(var y=2*q,m=e,c=k[y*e+g];J<z;){if(z-J<r){for(var m=g,c=k,d=p,h=2*q,H=h*(J+1)+m,w=
J+1;w<z;++w,H+=h)for(var u=c[H],G=w,E=h*(w-1);G>J&&c[E+m]>u;--G,E-=h){for(var A=E,B=E+h,b=0;b<h;++b,++A,++B){var l=c[A];c[A]=c[B];c[B]=l}A=d[G];d[G]=d[G-1];d[G-1]=A}break}H=z-J;m=Math.random()*H+J|0;c=k[y*m+g];h=Math.random()*H+J|0;d=k[y*h+g];w=Math.random()*H+J|0;H=k[y*w+g];c<=d?H>=d?(m=h,c=d):c>=H||(m=w,c=H):d>=H?(m=h,c=d):H>=c||(m=w,c=H);d=y*(z-1);h=y*m;for(H=0;H<y;++H,++d,++h)w=k[d],k[d]=k[h],k[h]=w;d=p[z-1];p[z-1]=p[m];p[m]=d;m=a(q,g,J,z-1,k,p,c);d=y*(z-1);h=y*m;for(H=0;H<y;++H,++d,++h)w=k[d],
k[d]=k[h],k[h]=w;d=p[z-1];p[z-1]=p[m];p[m]=d;if(e<m){for(z=m-1;J<z&&k[y*(z-1)+g]===c;)--z;z+=1}else if(m<e)for(J=m+1;J<z&&k[y*J+g]===c;)J+=1;else break}return a(q,g,f,e,k,p,k[y*e+g])};var a=g("./partition")("lo<p0",["p0"]),r=8},{"./partition":62}],62:[function(g,u,A){u.exports=function(r,q){var g="abcdef".split("").concat(q),f=[];0<=r.indexOf("lo")&&f.push("lo=e[k+n]");0<=r.indexOf("hi")&&f.push("hi=e[k+o]");g.push(a.replace("_",f.join()).replace("$",r));return Function.apply(void 0,g)};var a="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},
{}],63:[function(g,u,A){function a(a,e,f){for(var m=2*(a+1),c=a+1;c<=e;++c){for(var d=f[m++],h=f[m++],k=c,p=m-2;k-- >a;){var q=f[p-2],r=f[p-1];if(q<d)break;else if(q===d&&r<h)break;f[p]=q;f[p+1]=r;p-=2}f[p]=d;f[p+1]=h}}function r(a,e,f){a*=2;e*=2;var m=f[a],c=f[a+1];f[a]=f[e];f[a+1]=f[e+1];f[e]=m;f[e+1]=c}function q(a,e,f){a*=2;e*=2;f[a]=f[e];f[a+1]=f[e+1]}function v(a,e,f,m,c){a*=2;e*=2;c[a]=c[e];c[e]=f;c[a+1]=c[e+1];c[e+1]=m}function f(a,e,f){a*=2;e*=2;var m=f[a],c=f[e];return m<c?!1:m===c?f[a+
1]>f[e+1]:!0}function e(a,e,f,m){a*=2;var c=m[a];return c<e?!0:c===e?m[a+1]<f:!1}function k(g,z,y){var m=(z-g+1)/6|0,c=g+m,d=z-m,h=g+z>>1,H=h-m,w=h+m,u=c,G=H,E=h,A=w,B=d,m=g+1,b=z-1,l=0;f(u,G,y)&&(l=u,u=G,G=l);f(A,B,y)&&(l=A,A=B,B=l);f(u,E,y)&&(l=u,u=E,E=l);f(G,E,y)&&(l=G,G=E,E=l);f(u,A,y)&&(l=u,u=A,A=l);f(E,A,y)&&(l=E,E=A,A=l);f(G,B,y)&&(l=G,G=B,B=l);f(G,E,y)&&(l=G,G=E,E=l);f(A,B,y)&&(l=A,A=B,B=l);for(var l=y[2*G],G=y[2*G+1],x=y[2*A],A=y[2*A+1],u=2*u,E=2*E,B=2*B,c=2*c,h=2*h,d=2*d,R=0;2>R;++R){var C=
y[E+R],F=y[B+R];y[c+R]=y[u+R];y[h+R]=C;y[d+R]=F}q(H,g,y);q(w,z,y);for(H=m;H<=b;++H)if(e(H,l,G,y))H!==m&&r(H,m,y),++m;else if(!e(H,x,A,y))for(;;)if(e(b,x,A,y)){e(b,l,G,y)?(w=H,d=m,h=b,u=y,w*=2,d*=2,h*=2,c=u[w],E=u[w+1],u[w]=u[d],u[w+1]=u[d+1],u[d]=u[h],u[d+1]=u[h+1],u[h]=c,u[h+1]=E,++m):r(H,b,y);--b;break}else if(--b<H)break;v(g,m-1,l,G,y);v(z,b+1,x,A,y);m-2-g<=p?a(g,m-2,y):k(g,m-2,y);z-(b+2)<=p?a(b+2,z,y):k(b+2,z,y);b-m<=p?a(m,b,y):k(m,b,y)}u.exports=function(e,f){f<=4*p?a(0,f-1,e):k(0,f-1,e)};var p=
32},{}],64:[function(g,u,A){function a(a,d,h,e){e=d[e];h=a[h-1];a[e]=h;d[h]=e}u.exports={init:function(a){a=q.nextPow2(a);e.length<a&&(r.free(e),e=r.mallocInt32(a));k.length<a&&(r.free(k),k=r.mallocInt32(a));p.length<a&&(r.free(p),p=r.mallocInt32(a));J.length<a&&(r.free(J),J=r.mallocInt32(a));z.length<a&&(r.free(z),z=r.mallocInt32(a));y.length<a&&(r.free(y),y=r.mallocInt32(a));a*=8;m.length<a&&(r.free(m),m=r.mallocDouble(a))},sweepBipartite:function(c,d,h,q,r,g,y,z,u,B){var b=0,l=2*c;--c;for(var x=
l-1;h<q;++h){var A=g[h],C=l*h;m[b++]=r[C+c];m[b++]=-(A+1);m[b++]=r[C+x];m[b++]=A}for(h=y;h<z;++h)A=B[h]+f,q=l*h,m[b++]=u[q+c],m[b++]=-A,m[b++]=u[q+x],m[b++]=A;z=b>>>1;v(m,z);for(h=B=u=0;h<z;++h)if(b=m[2*h+1]|0,b>=f)b=b-f|0,a(p,J,B--,b);else if(0<=b)a(e,k,u--,b);else{if(b<=-f){b=-b-f|0;for(l=0;l<u;++l)if(q=d(e[l],b),void 0!==q)return q;l=J;q=B++;p[q]=b}else{b=-b-1|0;for(l=0;l<B;++l)if(q=d(b,p[l]),void 0!==q)return q;l=k;q=u++;e[q]=b}l[b]=q}},sweepComplete:function(c,d,h,f,q,r,g,u,A,B){var b=0,l=2*
c;--c;for(var x=l-1;h<f;++h){var R=r[h]+1<<1,C=l*h;m[b++]=q[C+c];m[b++]=-R;m[b++]=q[C+x];m[b++]=R}for(h=g;h<u;++h)R=B[h]+1<<1,f=l*h,m[b++]=A[f+c],m[b++]=-R|1,m[b++]=A[f+x],m[b++]=R|1;u=b>>>1;v(m,u);for(h=b=B=A=0;h<u;++h)if(l=m[2*h+1]|0,f=l&1,h<u-1&&l>>1===m[2*h+3]>>1&&(f=2,h+=1),0>l){l=-(l>>1)-1;for(q=0;q<b;++q)if(r=d(z[q],l),void 0!==r)return r;if(0!==f)for(q=0;q<A;++q)if(r=d(e[q],l),void 0!==r)return r;if(1!==f)for(q=0;q<B;++q)if(r=d(p[q],l),void 0!==r)return r;0===f?(f=k,q=A++,e[q]=l,f[l]=q):1===
f?(f=J,q=B++,p[q]=l,f[l]=q):2===f&&(f=y,q=b++,z[q]=l,f[l]=q)}else l=(l>>1)-1,0===f?a(e,k,A--,l):1===f?a(p,J,B--,l):2===f&&a(z,y,b--,l)},scanBipartite:function(c,d,h,p,q,r,g,y,z,u,b,l){var x=0,J=2*c,C=d+c,F=1,A=1;for(p?A=f:F=f;q<r;++q){var I=q+F,K=J*q;m[x++]=g[K+d];m[x++]=-I;m[x++]=g[K+C];m[x++]=I}for(q=z;q<u;++q)I=q+A,r=J*q,m[x++]=b[r+d],m[x++]=-I;u=x>>>1;v(m,u);for(q=x=0;q<u;++q)if(I=m[2*q+1]|0,0>I)if(I=-I,A=!1,I>=f?(A=!p,I-=f):(A=!!p,--I),A)A=k,r=x++,e[r]=I,A[I]=r;else a:for(A=l[I],I*=J,r=b[I+d+
1],z=b[I+d+1+c],C=0;C<x;++C){var K=e[C],D=J*K;if(!(z<g[D+d+1]||g[D+d+1+c]<r)){for(var n=d+2;n<c;++n)if(b[I+n+c]<g[D+n]||g[D+n+c]<b[I+n])continue a;K=y[K];K=p?h(A,K):h(K,A);if(void 0!==K)return K}}else a(e,k,x--,I-F)},scanComplete:function(a,d,h,k,p,q,r,g,z,y,b){for(var l=0,x=2*a,u=d+a;k<p;++k){var J=k+f,F=x*k;m[l++]=q[F+d];m[l++]=-J;m[l++]=q[F+u];m[l++]=J}for(k=g;k<z;++k)J=k+1,p=x*k,m[l++]=y[p+d],m[l++]=-J;z=l>>>1;v(m,z);for(k=l=0;k<z;++k)if(p=m[2*k+1]|0,0>p)if(J=-p,J>=f)e[l++]=J-f;else a:for(--J,
p=b[J],J*=x,u=y[J+d+1],F=y[J+d+1+a],g=0;g<l;++g){var A=e[g],I=r[A];if(I===p)break;A*=x;if(!(F<q[A+d+1]||q[A+d+1+a]<u)){for(var K=d+2;K<a;++K)if(y[J+K+a]<q[A+K]||q[A+K+a]<y[J+K])continue a;I=h(I,p);if(void 0!==I)return I}}else{J=p-f;for(g=l-1;0<=g;--g)if(e[g]===J){for(K=g+1;K<l;++K)e[K-1]=e[K];break}--l}}};var r=g("typedarray-pool"),q=g("bit-twiddle"),v=g("./sort"),f=268435456,e=r.mallocInt32(1024),k=r.mallocInt32(1024),p=r.mallocInt32(1024),J=r.mallocInt32(1024),z=r.mallocInt32(1024),y=r.mallocInt32(1024),
m=r.mallocDouble(8192)},{"./sort":63,"bit-twiddle":56,"typedarray-pool":126}],65:[function(g,u,A){},{}],66:[function(g,u,A){(function(a,r){function q(){try{var b=new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()&&"function"===typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(a){return!1}}function v(b,a){if((r.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<a)throw new RangeError("Invalid typed array length");r.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(a),
b.__proto__=r.prototype):(null===b&&(b=new r(a)),b.length=a);return b}function r(b,a,c){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(b,a,c);if("number"===typeof b){if("string"===typeof a)throw Error("If encoding is specified then the first argument must be a string");return k(this,b)}return f(this,b,a,c)}function f(b,a,c,d){if("number"===typeof a)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer){a.byteLength;
if(0>c||a.byteLength<c)throw new RangeError("'offset' is out of bounds");if(a.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");a=void 0===c&&void 0===d?new Uint8Array(a):void 0===d?new Uint8Array(a,c):new Uint8Array(a,c,d);r.TYPED_ARRAY_SUPPORT?(b=a,b.__proto__=r.prototype):b=p(b,a);return b}if("string"===typeof a){d=b;b=c;if("string"!==typeof b||""===b)b="utf8";if(!r.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');c=y(a,b)|0;d=v(d,c);a=d.write(a,
b);a!==c&&(d=d.slice(0,a));return d}return u(b,a)}function e(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');if(0>b)throw new RangeError('"size" argument must not be negative');}function k(b,a){e(a);b=v(b,0>a?0:z(a)|0);if(!r.TYPED_ARRAY_SUPPORT)for(var c=0;c<a;++c)b[c]=0;return b}function p(b,a){var c=0>a.length?0:z(a.length)|0;b=v(b,c);for(var d=0;d<c;d+=1)b[d]=a[d]&255;return b}function u(b,a){if(r.isBuffer(a)){var c=z(a.length)|0;b=v(b,c);if(0===b.length)return b;
a.copy(b,0,0,c);return b}if(a){if("undefined"!==typeof ArrayBuffer&&a.buffer instanceof ArrayBuffer||"length"in a)return(c="number"!==typeof a.length)||(c=a.length,c=c!==c),c?v(b,0):p(b,a);if("Buffer"===a.type&&I(a.data))return p(b,a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function z(b){if(b>=(r.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(r.TYPED_ARRAY_SUPPORT?
2147483647:1073741823).toString(16)+" bytes");return b|0}function y(b,a){if(r.isBuffer(b))return b.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(b)||b instanceof ArrayBuffer))return b.byteLength;"string"!==typeof b&&(b=""+b);var c=b.length;if(0===c)return 0;for(var d=!1;;)switch(a){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return x(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
c;case "hex":return c>>>1;case "base64":return F.toByteArray(l(b)).length;default:if(d)return x(b).length;a=(""+a).toLowerCase();d=!0}}function m(b,a,c){var d=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;a>>>=0;if(c<=a)return"";for(b||(b="utf8");;)switch(b){case "hex":b=a;a=c;c=this.length;if(!b||0>b)b=0;if(!a||0>a||a>c)a=c;d="";for(c=b;c<a;++c)b=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return H(this,
a,c);case "ascii":b="";for(c=Math.min(this.length,c);a<c;++a)b+=String.fromCharCode(this[a]&127);return b;case "latin1":case "binary":b="";for(c=Math.min(this.length,c);a<c;++a)b+=String.fromCharCode(this[a]);return b;case "base64":return a=0===a&&c===this.length?F.fromByteArray(this):F.fromByteArray(this.slice(a,c)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,c);c="";for(b=0;b<a.length;b+=2)c+=String.fromCharCode(a[b]+256*a[b+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+
b);b=(b+"").toLowerCase();d=!0}}function c(b,a,c){var d=b[a];b[a]=b[c];b[c]=d}function d(b,a,c,d,e){if(0===b.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:b.length-1);0>c&&(c=b.length+c);if(c>=b.length){if(e)return-1;c=b.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof a&&(a=r.from(a,d));if(r.isBuffer(a))return 0===a.length?-1:h(b,a,c,d,e);if("number"===typeof a)return a&=255,r.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(b,a,c):Uint8Array.prototype.lastIndexOf.call(b,a,c):h(b,[a],c,d,e);throw new TypeError("val must be string, number or Buffer");}function h(b,a,c,d,h){function e(b,a){return 1===f?b[a]:b.readUInt16BE(a*f)}var f=1,m=b.length,l=a.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>b.length||2>a.length)return-1;f=2;m/=2;l/=2;c/=2}if(h)for(d=-1;c<m;c++)if(e(b,c)===e(a,-1===
d?0:c-d)){if(-1===d&&(d=c),c-d+1===l)return d*f}else-1!==d&&(c-=c-d),d=-1;else for(c+l>m&&(c=m-l);0<=c;c--){m=!0;for(d=0;d<l;d++)if(e(b,c+d)!==e(a,d)){m=!1;break}if(m)return c}return-1}function H(b,a,c){c=Math.min(b.length,c);for(var d=[];a<c;){var h=b[a],e=null,f=239<h?4:223<h?3:191<h?2:1;if(a+f<=c){var m,l,k;switch(f){case 1:128>h&&(e=h);break;case 2:m=b[a+1];128===(m&192)&&(h=(h&31)<<6|m&63,127<h&&(e=h));break;case 3:m=b[a+1];l=b[a+2];128===(m&192)&&128===(l&192)&&(h=(h&15)<<12|(m&63)<<6|l&63,
2047<h&&(55296>h||57343<h)&&(e=h));break;case 4:m=b[a+1],l=b[a+2],k=b[a+3],128===(m&192)&&128===(l&192)&&128===(k&192)&&(h=(h&15)<<18|(m&63)<<12|(l&63)<<6|k&63,65535<h&&1114112>h&&(e=h))}}null===e?(e=65533,f=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|e&1023);d.push(e);a+=f}b=d.length;if(b<=K)d=String.fromCharCode.apply(String,d);else{c="";for(a=0;a<b;)c+=String.fromCharCode.apply(String,d.slice(a,a+=K));d=c}return d}function w(b,a,c){if(0!==b%1||0>b)throw new RangeError("offset is not uint");
if(b+a>c)throw new RangeError("Trying to access beyond buffer length");}function L(b,a,c,d,h,e){if(!r.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>h||a<e)throw new RangeError('"value" argument is out of bounds');if(c+d>b.length)throw new RangeError("Index out of range");}function G(b,a,c,d){0>a&&(a=65535+a+1);for(var h=0,e=Math.min(b.length-c,2);h<e;++h)b[c+h]=(a&255<<8*(d?h:1-h))>>>8*(d?h:1-h)}function E(b,a,c,d){0>a&&(a=4294967295+a+1);for(var h=0,e=Math.min(b.length-
c,4);h<e;++h)b[c+h]=a>>>8*(d?h:3-h)&255}function ta(b,a,c,d,h,e){if(c+d>b.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function B(b,a,c,d,h){h||ta(b,a,c,4,3.4028234663852886E38,-3.4028234663852886E38);ia.write(b,a,c,d,23,4);return c+4}function b(b,a,c,d,h){h||ta(b,a,c,8,1.7976931348623157E308,-1.7976931348623157E308);ia.write(b,a,c,d,52,8);return c+8}function l(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");b=b.replace(D,"");if(2>b.length)return"";
for(;0!==b.length%4;)b+="=";return b}function x(b,a){a=a||Infinity;for(var c,d=b.length,h=null,e=[],f=0;f<d;++f){c=b.charCodeAt(f);if(55295<c&&57344>c){if(!h){if(56319<c){-1<(a-=3)&&e.push(239,191,189);continue}else if(f+1===d){-1<(a-=3)&&e.push(239,191,189);continue}h=c;continue}if(56320>c){-1<(a-=3)&&e.push(239,191,189);h=c;continue}c=(h-55296<<10|c-56320)+65536}else h&&-1<(a-=3)&&e.push(239,191,189);h=null;if(128>c){if(0>--a)break;e.push(c)}else if(2048>c){if(0>(a-=2))break;e.push(c>>6|192,c&63|
128)}else if(65536>c){if(0>(a-=3))break;e.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(a-=4))break;e.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return e}function R(b){for(var a=[],c=0;c<b.length;++c)a.push(b.charCodeAt(c)&255);return a}function C(b,a,c,d){for(var h=0;h<d&&!(h+c>=a.length||h>=b.length);++h)a[h+c]=b[h];return h}var F=g("base64-js"),ia=g("ieee754"),I=g("isarray");A.Buffer=r;A.SlowBuffer=function(b){+b!=b&&(b=0);return r.alloc(+b)};
A.INSPECT_MAX_BYTES=50;r.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:q();A.kMaxLength=r.TYPED_ARRAY_SUPPORT?2147483647:1073741823;r.poolSize=8192;r._augment=function(b){b.__proto__=r.prototype;return b};r.from=function(b,a,c){return f(null,b,a,c)};r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&($jscomp.initSymbol(),
Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})));r.alloc=function(b,a,c){e(b);b=0>=b?v(null,b):void 0!==a?"string"===typeof c?v(null,b).fill(a,c):v(null,b).fill(a):v(null,b);return b};r.allocUnsafe=function(b){return k(null,b)};r.allocUnsafeSlow=function(b){return k(null,b)};r.isBuffer=function(b){return!(null==b||!b._isBuffer)};r.compare=function(b,a){if(!r.isBuffer(b)||!r.isBuffer(a))throw new TypeError("Arguments must be Buffers");if(b===a)return 0;for(var c=b.length,d=a.length,
h=0,e=Math.min(c,d);h<e;++h)if(b[h]!==a[h]){c=b[h];d=a[h];break}return c<d?-1:d<c?1:0};r.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};r.concat=function(b,a){if(!I(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return r.alloc(0);var c;if(void 0===a)for(c=a=0;c<b.length;++c)a+=b[c].length;
var d=r.allocUnsafe(a),h=0;for(c=0;c<b.length;++c){var e=b[c];if(!r.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(d,h);h+=e.length}return d};r.byteLength=y;r.prototype._isBuffer=!0;r.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<b;a+=2)c(this,a,a+1);return this};r.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var a=0;a<b;a+=4)c(this,a,a+3),c(this,a+1,a+2);return this};r.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<b;a+=8)c(this,a,a+7),c(this,a+1,a+6),c(this,a+2,a+5),c(this,a+3,a+4);return this};r.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?H(this,0,b):m.apply(this,arguments)};r.prototype.equals=function(b){if(!r.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===r.compare(this,b)};r.prototype.inspect=function(){var b="",a=A.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(b+=" ... "));return"<Buffer "+b+">"};r.prototype.compare=function(b,a,c,d,h){if(!r.isBuffer(b))throw new TypeError("Argument must be a Buffer");void 0===a&&(a=0);void 0===c&&(c=b?b.length:0);void 0===d&&(d=0);void 0===h&&(h=this.length);if(0>a||c>b.length||0>d||h>this.length)throw new RangeError("out of range index");
if(d>=h&&a>=c)return 0;if(d>=h)return-1;if(a>=c)return 1;a>>>=0;c>>>=0;d>>>=0;h>>>=0;if(this===b)return 0;var e=h-d,f=c-a,m=Math.min(e,f);d=this.slice(d,h);b=b.slice(a,c);for(a=0;a<m;++a)if(d[a]!==b[a]){e=d[a];f=b[a];break}return e<f?-1:f<e?1:0};r.prototype.includes=function(b,a,c){return-1!==this.indexOf(b,a,c)};r.prototype.indexOf=function(b,a,c){return d(this,b,a,c,!0)};r.prototype.lastIndexOf=function(b,a,c){return d(this,b,a,c,!1)};r.prototype.write=function(b,a,c,d){if(void 0===a)d="utf8",c=
this.length,a=0;else if(void 0===c&&"string"===typeof a)d=a,c=this.length,a=0;else if(isFinite(a))a|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var h=this.length-a;if(void 0===c||c>h)c=h;if(0<b.length&&(0>c||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(h=!1;;)switch(d){case "hex":a:{a=Number(a)||0;d=this.length-a;c?(c=Number(c),c>d&&(c=
d)):c=d;d=b.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){h=parseInt(b.substr(2*d,2),16);if(isNaN(h)){b=d;break a}this[a+d]=h}b=d}return b;case "utf8":case "utf-8":return C(x(b,this.length-a),this,a,c);case "ascii":return C(R(b),this,a,c);case "latin1":case "binary":return C(R(b),this,a,c);case "base64":return C(F.toByteArray(l(b)),this,a,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-a;for(var e=void 0,e=h=void 0,f=[],m=0;m<
b.length&&!(0>(d-=2));++m)e=b.charCodeAt(m),h=e>>8,e%=256,f.push(e),f.push(h);return C(f,this,a,c);default:if(h)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();h=!0}};r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;r.prototype.slice=function(b,a){var c=this.length;b=~~b;a=void 0===a?c:~~a;0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);a<b&&(a=b);if(r.TYPED_ARRAY_SUPPORT)c=this.subarray(b,a),c.__proto__=
r.prototype;else for(var d=a-b,c=new r(d,void 0),h=0;h<d;++h)c[h]=this[h+b];return c};r.prototype.readUIntLE=function(b,a,c){b|=0;a|=0;c||w(b,a,this.length);c=this[b];for(var d=1,h=0;++h<a&&(d*=256);)c+=this[b+h]*d;return c};r.prototype.readUIntBE=function(b,a,c){b|=0;a|=0;c||w(b,a,this.length);c=this[b+--a];for(var d=1;0<a&&(d*=256);)c+=this[b+--a]*d;return c};r.prototype.readUInt8=function(b,a){a||w(b,1,this.length);return this[b]};r.prototype.readUInt16LE=function(b,a){a||w(b,2,this.length);return this[b]|
this[b+1]<<8};r.prototype.readUInt16BE=function(b,a){a||w(b,2,this.length);return this[b]<<8|this[b+1]};r.prototype.readUInt32LE=function(b,a){a||w(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};r.prototype.readUInt32BE=function(b,a){a||w(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};r.prototype.readIntLE=function(b,a,c){b|=0;a|=0;c||w(b,a,this.length);c=this[b];for(var d=1,h=0;++h<a&&(d*=256);)c+=this[b+h]*d;c>=128*d&&(c-=Math.pow(2,
8*a));return c};r.prototype.readIntBE=function(b,a,c){b|=0;a|=0;c||w(b,a,this.length);c=a;for(var d=1,h=this[b+--c];0<c&&(d*=256);)h+=this[b+--c]*d;h>=128*d&&(h-=Math.pow(2,8*a));return h};r.prototype.readInt8=function(b,a){a||w(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};r.prototype.readInt16LE=function(b,a){a||w(b,2,this.length);var c=this[b]|this[b+1]<<8;return c&32768?c|4294901760:c};r.prototype.readInt16BE=function(b,a){a||w(b,2,this.length);var c=this[b+1]|this[b]<<8;return c&
32768?c|4294901760:c};r.prototype.readInt32LE=function(b,a){a||w(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};r.prototype.readInt32BE=function(b,a){a||w(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};r.prototype.readFloatLE=function(b,a){a||w(b,4,this.length);return ia.read(this,b,!0,23,4)};r.prototype.readFloatBE=function(b,a){a||w(b,4,this.length);return ia.read(this,b,!1,23,4)};r.prototype.readDoubleLE=function(b,a){a||w(b,8,this.length);
return ia.read(this,b,!0,52,8)};r.prototype.readDoubleBE=function(b,a){a||w(b,8,this.length);return ia.read(this,b,!1,52,8)};r.prototype.writeUIntLE=function(b,a,c,d){b=+b;a|=0;c|=0;d||L(this,b,a,c,Math.pow(2,8*c)-1,0);d=1;var h=0;for(this[a]=b&255;++h<c&&(d*=256);)this[a+h]=b/d&255;return a+c};r.prototype.writeUIntBE=function(b,a,c,d){b=+b;a|=0;c|=0;d||L(this,b,a,c,Math.pow(2,8*c)-1,0);d=c-1;var h=1;for(this[a+d]=b&255;0<=--d&&(h*=256);)this[a+d]=b/h&255;return a+c};r.prototype.writeUInt8=function(b,
a,c){b=+b;a|=0;c||L(this,b,a,1,255,0);r.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[a]=b&255;return a+1};r.prototype.writeUInt16LE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,2,65535,0);r.TYPED_ARRAY_SUPPORT?(this[a]=b&255,this[a+1]=b>>>8):G(this,b,a,!0);return a+2};r.prototype.writeUInt16BE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,2,65535,0);r.TYPED_ARRAY_SUPPORT?(this[a]=b>>>8,this[a+1]=b&255):G(this,b,a,!1);return a+2};r.prototype.writeUInt32LE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,4,4294967295,0);
r.TYPED_ARRAY_SUPPORT?(this[a+3]=b>>>24,this[a+2]=b>>>16,this[a+1]=b>>>8,this[a]=b&255):E(this,b,a,!0);return a+4};r.prototype.writeUInt32BE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,4,4294967295,0);r.TYPED_ARRAY_SUPPORT?(this[a]=b>>>24,this[a+1]=b>>>16,this[a+2]=b>>>8,this[a+3]=b&255):E(this,b,a,!1);return a+4};r.prototype.writeIntLE=function(b,a,c,d){b=+b;a|=0;d||(d=Math.pow(2,8*c-1),L(this,b,a,c,d-1,-d));d=0;var h=1,e=0;for(this[a]=b&255;++d<c&&(h*=256);)0>b&&0===e&&0!==this[a+d-1]&&(e=1),this[a+
d]=(b/h>>0)-e&255;return a+c};r.prototype.writeIntBE=function(b,a,c,d){b=+b;a|=0;d||(d=Math.pow(2,8*c-1),L(this,b,a,c,d-1,-d));d=c-1;var h=1,e=0;for(this[a+d]=b&255;0<=--d&&(h*=256);)0>b&&0===e&&0!==this[a+d+1]&&(e=1),this[a+d]=(b/h>>0)-e&255;return a+c};r.prototype.writeInt8=function(b,a,c){b=+b;a|=0;c||L(this,b,a,1,127,-128);r.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[a]=b&255;return a+1};r.prototype.writeInt16LE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,2,32767,-32768);r.TYPED_ARRAY_SUPPORT?
(this[a]=b&255,this[a+1]=b>>>8):G(this,b,a,!0);return a+2};r.prototype.writeInt16BE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,2,32767,-32768);r.TYPED_ARRAY_SUPPORT?(this[a]=b>>>8,this[a+1]=b&255):G(this,b,a,!1);return a+2};r.prototype.writeInt32LE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,4,2147483647,-2147483648);r.TYPED_ARRAY_SUPPORT?(this[a]=b&255,this[a+1]=b>>>8,this[a+2]=b>>>16,this[a+3]=b>>>24):E(this,b,a,!0);return a+4};r.prototype.writeInt32BE=function(b,a,c){b=+b;a|=0;c||L(this,b,a,4,2147483647,
-2147483648);0>b&&(b=4294967295+b+1);r.TYPED_ARRAY_SUPPORT?(this[a]=b>>>24,this[a+1]=b>>>16,this[a+2]=b>>>8,this[a+3]=b&255):E(this,b,a,!1);return a+4};r.prototype.writeFloatLE=function(b,a,c){return B(this,b,a,!0,c)};r.prototype.writeFloatBE=function(b,a,c){return B(this,b,a,!1,c)};r.prototype.writeDoubleLE=function(a,c,d){return b(this,a,c,!0,d)};r.prototype.writeDoubleBE=function(a,c,d){return b(this,a,c,!1,d)};r.prototype.copy=function(b,a,c,d){c||(c=0);d||0===d||(d=this.length);a>=b.length&&
(a=b.length);a||(a=0);0<d&&d<c&&(d=c);if(d===c||0===b.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);b.length-a<d-c&&(d=b.length-a+c);var h=d-c;if(this===b&&c<a&&a<d)for(d=h-1;0<=d;--d)b[d+a]=this[d+c];else if(1E3>h||!r.TYPED_ARRAY_SUPPORT)for(d=0;d<h;++d)b[d+a]=this[d+c];else Uint8Array.prototype.set.call(b,
this.subarray(c,c+h),a);return h};r.prototype.fill=function(b,a,c,d){if("string"===typeof b){"string"===typeof a?(d=a,a=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===b.length){var h=b.charCodeAt(0);256>h&&(b=h)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!r.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof b&&(b&=255);if(0>a||this.length<a||this.length<c)throw new RangeError("Out of range index");
if(c<=a)return this;a>>>=0;c=void 0===c?this.length:c>>>0;b||(b=0);if("number"===typeof b)for(d=a;d<c;++d)this[d]=b;else for(b=r.isBuffer(b)?b:x((new r(b,d)).toString()),h=b.length,d=0;d<c-a;++d)this[d+a]=b[d%h];return this};var D=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},g("buffer").Buffer)},{"base64-js":38,buffer:66,ieee754:87,isarray:93}],67:[function(g,u,A){function a(a){return[Math.min(a[0],a[1]),Math.max(a[0],
a[1])]}function r(a,e){return a[0]-e[0]||a[1]-e[1]}function q(a,e,f){return e in a?a[e]:f}var v=g("./lib/monotone"),f=g("./lib/triangulation"),e=g("./lib/delaunay"),k=g("./lib/filter");u.exports=function(p,g,z){Array.isArray(g)?(z=z||{},g=g||[]):(z=g||{},g=[]);var y=!!q(z,"delaunay",!0),m=!!q(z,"interior",!0),c=!!q(z,"exterior",!0);z=!!q(z,"infinity",!1);if(!m&&!c||0===p.length)return[];var d=v(p,g);if(y||m!==c||z){g=f(p.length,g.map(a).sort(r));for(var h=0;h<d.length;++h){var H=d[h];g.addTriangle(H[0],
H[1],H[2])}y&&e(p,g);return c?m?z?k(g,0,z):g.cells():k(g,1,z):k(g,-1)}return d}},{"./lib/delaunay":68,"./lib/filter":69,"./lib/monotone":70,"./lib/triangulation":71}],68:[function(g,u,A){function a(a,g,f,e,k,p){var u=g.opposite(e,k);if(!(0>u)){if(k<e){var z=e;e=k;k=z;z=p;p=u;u=z}g.isConstraint(e,k)||0>r(a[e],a[k],a[p],a[u])&&f.push(e,k)}}var r=g("robust-in-sphere")[4];g("binary-search-bounds");u.exports=function(q,g){for(var f=[],e=q.length,k=g.stars,p=0;p<e;++p)for(var u=k[p],z=1;z<u.length;z+=2){var y=
u[z];if(!(y<p||g.isConstraint(p,y))){for(var m=u[z-1],c=-1,d=1;d<u.length;d+=2)if(u[d-1]===y){c=u[d];break}0>c||0>r(q[p],q[y],q[m],q[c])&&f.push(p,y)}}for(;0<f.length;){y=f.pop();p=f.pop();c=m=-1;u=k[p];for(e=1;e<u.length;e+=2)z=u[e-1],d=u[e],z===y?c=d:d===y&&(m=z);0>m||0>c||0<=r(q[p],q[y],q[m],q[c])||(g.flip(p,y),a(q,g,f,m,p,c),a(q,g,f,p,c,m),a(q,g,f,c,y,m),a(q,g,f,y,m,c))}}},{"binary-search-bounds":55,"robust-in-sphere":108}],69:[function(g,u,A){function a(a,f,e,k,p,q,r){this.cells=a;this.neighbor=
f;this.flags=k;this.constraint=e;this.active=p;this.next=q;this.boundary=r}function r(a,f){return a[0]-f[0]||a[1]-f[1]||a[2]-f[2]}var q=g("binary-search-bounds");u.exports=function(q,f,e){for(var k=q.cells(),p=k.length,g=0;g<p;++g){var z=k[g],y=z[0],m=z[1],c=z[2];m<c?m<y&&(z[0]=m,z[1]=c,z[2]=y):c<y&&(z[0]=c,z[1]=y,z[2]=m)}k.sort(r);for(var d=Array(p),g=0;g<d.length;++g)d[g]=0;var h=[],H=[],w=Array(3*p),u=Array(3*p),G=null;e&&(G=[]);c=new a(k,w,u,d,h,H,G);for(g=0;g<p;++g)for(var z=k[g],E=0;3>E;++E){var y=
z[E],m=z[(E+1)%3],A=w[3*g+E]=c.locate(m,y,q.opposite(m,y)),B=u[3*g+E]=q.isConstraint(y,m);0>A&&(B?H.push(g):(h.push(g),d[g]=1),e&&G.push([m,y,-1]))}if(0===f)return e?c.cells.concat(c.boundary):c.cells;p=1;g=c.active;z=c.next;q=c.flags;k=c.cells;y=c.constraint;for(m=c.neighbor;0<g.length||0<z.length;){for(;0<g.length;)if(d=g.pop(),q[d]!==-p)for(q[d]=p,h=0;3>h;++h)H=m[3*d+h],0<=H&&0===q[H]&&(y[3*d+h]?z.push(H):(g.push(H),q[H]=p));d=z;z=g;g=d;z.length=0;p=-p}for(g=p=0;g<k.length;++g)q[g]===f&&(k[p++]=
k[g]);k.length=p;return e?k.concat(c.boundary):k};a.prototype.locate=function(){var a=[0,0,0];return function(f,e,k){var p=f,g=e,z=k;e<k?e<f&&(p=e,g=k,z=f):k<f&&(p=k,g=f,z=e);if(0>p)return-1;a[0]=p;a[1]=g;a[2]=z;return q.eq(this.cells,a,r)}}()},{"binary-search-bounds":55}],70:[function(g,u,A){function a(a,e,f,k,m){this.a=a;this.b=e;this.idx=f;this.lowerIds=k;this.upperIds=m}function r(a,e,f,k){this.a=a;this.b=e;this.type=f;this.idx=k}function q(a,e){var f=a.a[0]-e.a[0]||a.a[1]-e.a[1]||a.type-e.type;
return f||0!==a.type&&(f=k(a.a,a.b,e.b))?f:a.idx-e.idx}function v(a,e){return k(a.a,a.b,e)}function f(a,e){var f;return(f=a.a[0]<e.a[0]?k(a.a,a.b,e.a):k(e.b,e.a,a.a))?f:(f=e.b[0]<a.b[0]?k(a.a,a.b,e.b):k(e.b,e.a,a.b))||a.idx-e.idx}var e=g("binary-search-bounds"),k=g("robust-orientation")[3];u.exports=function(p,g){for(var z=p.length,y=g.length,m=[],c=0;c<z;++c)m.push(new r(p[c],null,0,c));for(c=0;c<y;++c){var d=g[c],z=p[d[0]],d=p[d[1]];z[0]<d[0]?m.push(new r(z,d,2,c),new r(d,z,1,c)):z[0]>d[0]&&m.push(new r(d,
z,2,c),new r(z,d,1,c))}m.sort(q);c=m[0].a[0]-(1+Math.abs(m[0].a[0]))*Math.pow(2,-52);y=[new a([c,1],[c,0],-1,[],[],[],[])];z=[];c=0;for(d=m.length;c<d;++c){var h=m[c],H=h.type;if(0===H)for(var H=z,w=y,u=p,G=h.a,h=h.idx,E=e.lt(w,G,v),A=e.gt(w,G,v);E<A;++E){for(var B=w[E],b=B.lowerIds,l=b.length;1<l&&0<k(u[b[l-2]],u[b[l-1]],G);)H.push([b[l-1],b[l-2],h]),--l;b.length=l;b.push(h);B=B.upperIds;for(l=B.length;1<l&&0>k(u[B[l-2]],u[B[l-1]],G);)H.push([B[l-2],B[l-1],h]),--l;B.length=l;B.push(h)}else 2===H?
(H=y,w=h,u=e.le(H,w,f),G=H[u],h=G.upperIds,A=h[h.length-1],G.upperIds=[A],H.splice(u+1,0,new a(w.a,w.b,w.idx,[A],h))):(H=y,w=h,u=w.a,w.a=w.b,w.b=u,w=e.eq(H,w,f),H[w-1].upperIds=H[w].upperIds,H.splice(w,1))}return z}},{"binary-search-bounds":55,"robust-orientation":109}],71:[function(g,u,A){function a(a,f){this.stars=a;this.edges=f}function r(a,f,e){for(var k=1,q=a.length;k<q;k+=2)if(a[k-1]===f&&a[k]===e){a[k-1]=a[q-2];a[k]=a[q-1];a.length=q-2;break}}var q=g("binary-search-bounds");u.exports=function(q,
f){for(var e=Array(q),k=0;k<q;++k)e[k]=[];return new a(e,f)};g=a.prototype;g.isConstraint=function(){function a(e,f){return e[0]-f[0]||e[1]-f[1]}var f=[0,0];return function(e,k){f[0]=Math.min(e,k);f[1]=Math.max(e,k);return 0<=q.eq(this.edges,f,a)}}();g.removeTriangle=function(a,f,e){var k=this.stars;r(k[a],f,e);r(k[f],e,a);r(k[e],a,f)};g.addTriangle=function(a,f,e){var k=this.stars;k[a].push(f,e);k[f].push(e,a);k[e].push(a,f)};g.opposite=function(a,f){for(var e=this.stars[f],k=1,q=e.length;k<q;k+=
2)if(e[k]===a)return e[k-1];return-1};g.flip=function(a,f){var e=this.opposite(a,f),k=this.opposite(f,a);this.removeTriangle(a,f,e);this.removeTriangle(f,a,k);this.addTriangle(a,k,e);this.addTriangle(f,e,k)};g.edges=function(){for(var a=this.stars,f=[],e=0,k=a.length;e<k;++e)for(var q=a[e],r=0,g=q.length;r<g;r+=2)f.push([q[r],q[r+1]]);return f};g.cells=function(){for(var a=this.stars,f=[],e=0,k=a.length;e<k;++e)for(var q=a[e],r=0,g=q.length;r<g;r+=2){var y=q[r],m=q[r+1];e<Math.min(y,m)&&f.push([e,
y,m])}return f}},{"binary-search-bounds":55}],72:[function(g,u,A){function a(a){a=H(a);return[L(a,-Infinity),L(a,Infinity)]}function r(a){for(var c=Array(a.length),d=0;d<a.length;++d){var b=a[d];c[d]=[L(b[0],-Infinity),L(b[1],-Infinity),L(b[0],Infinity),L(b[1],Infinity)]}return c}function q(a,d,h){var b=[];m(h,function(h,e){var f=d[h],m=d[e];f[0]!==m[0]&&f[0]!==m[1]&&f[1]!==m[0]&&f[1]!==m[1]&&c(a[f[0]],a[f[1]],a[m[0]],a[m[1]])&&b.push([h,e])});return b}function v(a,d,h,b){var e=[];m(h,b,function(b,
h){var f=d[b];if(f[0]!==h&&f[1]!==h){var m=a[h];c(a[f[0]],a[f[1]],m,m)&&e.push([b,h])}});return e}function f(a,c,e,b,f){var m,k,q=a.map(function(b){return[d(b[0]),d(b[1])]});for(m=0;m<e.length;++m){var r=e[m];k=r[0];var r=r[1],p=c[k],g=c[r];if(p=G(w(a[p[0]]),w(a[p[1]]),w(a[g[0]]),w(a[g[1]])))g=a.length,a.push([H(p[0]),H(p[1])]),q.push(p),b.push([k,g],[r,g])}b.sort(function(b,a){if(b[0]!==a[0])return b[0]-a[0];var c=q[b[1]],d=q[a[1]];return h(c[0],d[0])||h(c[1],d[1])});for(m=b.length-1;0<=m;--m){r=
b[m];k=r[0];p=c[k];g=p[0];e=p[1];var v=a[g],y=a[e];0>(v[0]-y[0]||v[1]-y[1])&&(v=g,g=e,e=v);p[0]=g;var g=p[1]=r[1],n;for(f&&(n=p[2]);0<m&&b[m-1][0]===k;)r=b[--m],r=r[1],f?c.push([g,r,n]):c.push([g,r]),g=r;f?c.push([g,e,n]):c.push([g,e])}return q}function e(c,d,h){h=d.length;for(var b=new y(h),e=[],f=0;f<d.length;++f){var k=d[f],q=a(k[0]),k=a(k[1]);e.push([L(q[0],-Infinity),L(k[0],-Infinity),L(q[1],Infinity),L(k[1],Infinity)])}m(e,function(a,c){b.link(a,c)});q=!0;d=Array(h);for(f=0;f<h;++f)e=b.find(f),
e!==f&&(q=!1,c[e]=[Math.min(c[f][0],c[e][0]),Math.min(c[f][1],c[e][1])]);if(q)return null;for(f=q=0;f<h;++f)e=b.find(f),e===f?(d[f]=q,c[q++]=c[f]):d[f]=-1;c.length=q;for(f=0;f<h;++f)0>d[f]&&(d[f]=d[b.find(f)]);return d}function k(a,c){return a[0]-c[0]||a[1]-c[1]}function p(a,c){var d=a[0]-c[0]||a[1]-c[1];return d?d:a[2]<c[2]?-1:a[2]>c[2]?1:0}function J(a,c,d){if(0!==a.length){if(c)for(var b=0;b<a.length;++b){var h=a[b],e=c[h[0]],f=c[h[1]];h[0]=Math.min(e,f);h[1]=Math.max(e,f)}else for(b=0;b<a.length;++b)h=
a[b],e=h[0],f=h[1],h[0]=Math.min(e,f),h[1]=Math.max(e,f);d?a.sort(p):a.sort(k);for(b=c=1;b<a.length;++b)if(h=a[b-1],e=a[b],e[0]!==h[0]||e[1]!==h[1]||d&&e[2]!==h[2])a[c++]=e;a.length=c}}function z(a,c,d){for(var b=Array(c.length),h=0;h<c.length;++h){var m=c[h],k=a[m[0]],m=a[m[1]];b[h]=[L(Math.min(k[0],m[0]),-Infinity),L(Math.min(k[1],m[1]),-Infinity),L(Math.max(k[0],m[0]),Infinity),L(Math.max(k[1],m[1]),Infinity)]}h=q(a,c,b);k=r(a);b=v(a,c,b,k);m=f(a,c,h,b,d);a=e(a,m,k);J(c,a,d);return a?!0:0<h.length||
0<b.length}u.exports=function(a,c,d){var b;if(d){b=c;for(var h=Array(c.length),f=0;f<c.length;++f){var m=c[f];h[f]=[m[0],m[1],d[f]]}c=h}f=c;m=!!d;h=e(a,[],r(a));J(f,h,m);for(h=!!h;z(a,c,!!d);)h=!0;if(d&&h)for(b.length=0,f=d.length=0;f<c.length;++f)m=c[f],b.push([m[0],m[1]]),d.push(m[2]);return h};var y=g("union-find"),m=g("box-intersect"),c=g("robust-segment-intersect"),d=g("big-rat"),h=g("big-rat/cmp"),H=g("big-rat/to-float"),w=g("rat-vec"),L=g("nextafter"),G=g("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":73,
"big-rat":42,"big-rat/cmp":40,"big-rat/to-float":54,"box-intersect":58,nextafter:96,"rat-vec":105,"robust-segment-intersect":112,"union-find":127}],73:[function(g,u,A){function a(a,e){return v(r(a[0],e[1]),r(a[1],e[0]))}u.exports=function(r,g,v,m){g=e(g,r);var c=e(m,v);m=a(g,c);if(0===f(m))return null;v=e(r,v);v=a(c,v);v=q(v,m);g=p(g,v);return k(r,g)};var r=g("big-rat/mul"),q=g("big-rat/div"),v=g("big-rat/sub"),f=g("big-rat/sign"),e=g("rat-vec/sub"),k=g("rat-vec/add"),p=g("rat-vec/muls")},{"big-rat/div":41,
"big-rat/mul":51,"big-rat/sign":52,"big-rat/sub":53,"rat-vec/add":104,"rat-vec/muls":106,"rat-vec/sub":107}],74:[function(g,u,A){function a(a,q,r){var g=v(a[0],-q[0]);a=v(a[1],-q[1]);var y=v(r[0],-q[0]);q=v(r[1],-q[1]);g=e(f(g,y),f(a,q));return 0<=g[g.length-1]}u.exports=function(e,f,g,v){var y=r(f,g,v);if(0===y){var y=q(r(e,f,g)),m=q(r(e,f,v));return y===m?0===y&&(g=a(e,f,g),e=a(e,f,v),g!==e)?g?1:-1:0:0===m?0<y?-1:a(e,f,v)?-1:1:0===y?0<m?1:a(e,f,g)?1:-1:q(m-y)}m=r(e,f,g);return 0<m?0<y&&0<r(e,f,
v)?1:-1:0>m?0<y||0<r(e,f,v)?1:-1:0<r(e,f,v)?1:a(e,f,g)?1:-1};var r=g("robust-orientation"),q=g("signum"),v=g("two-sum"),f=g("robust-product"),e=g("robust-sum")},{"robust-orientation":109,"robust-product":110,"robust-sum":114,signum:75,"two-sum":125}],75:[function(g,u,A){u.exports=function(a){return 0>a?-1:0<a?1:0}},{}],76:[function(g,u,A){function a(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=
[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var r=g("./lib/thunk.js");u.exports=function(q){var g=new a;g.pre=q.pre;g.body=q.body;g.post=q.post;var f=q.args.slice(0);g.argTypes=f;for(var e=0;e<f.length;++e){var k=f[e];if("array"===k||"object"===typeof k&&k.blockIndices){g.argTypes[e]="array";g.arrayArgs.push(e);g.arrayBlockIndices.push(k.blockIndices?k.blockIndices:0);g.shimArgs.push("array"+e);if(e<g.pre.args.length&&0<g.pre.args[e].count)throw Error("cwise: pre() block may not reference array args");
if(e<g.post.args.length&&0<g.post.args[e].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===k)g.scalarArgs.push(e),g.shimArgs.push("scalar"+e);else if("index"===k){g.indexArgs.push(e);if(e<g.pre.args.length&&0<g.pre.args[e].count)throw Error("cwise: pre() block may not reference array index");if(e<g.body.args.length&&g.body.args[e].lvalue)throw Error("cwise: body() block may not write to array index");if(e<g.post.args.length&&0<g.post.args[e].count)throw Error("cwise: post() block may not reference array index");
}else if("shape"===k){g.shapeArgs.push(e);if(e<g.pre.args.length&&g.pre.args[e].lvalue)throw Error("cwise: pre() block may not write to array shape");if(e<g.body.args.length&&g.body.args[e].lvalue)throw Error("cwise: body() block may not write to array shape");if(e<g.post.args.length&&g.post.args[e].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof k&&k.offset)g.argTypes[e]="offset",g.offsetArgs.push({array:k.array,offset:k.offset}),g.offsetArgIndex.push(e);
else throw Error("cwise: Unknown argument type "+f[e]);}if(0>=g.arrayArgs.length)throw Error("cwise: No array arguments specified");if(g.pre.args.length>f.length)throw Error("cwise: Too many arguments in pre() block");if(g.body.args.length>f.length)throw Error("cwise: Too many arguments in body() block");if(g.post.args.length>f.length)throw Error("cwise: Too many arguments in post() block");g.debug=!!q.printCode||!!q.debug;g.funcName=q.funcName||"cwise";g.blockSize=q.blockSize||64;return r(g)}},{"./lib/thunk.js":78}],
77:[function(g,u,A){function a(a,f,q){var g=a.length,r=f.arrayArgs.length;f=0<f.indexArgs.length;var v=[],m=[],c=0,d=0,h,H;for(h=0;h<g;++h)m.push(["i",h,"=0"].join(""));for(H=0;H<r;++H)for(h=0;h<g;++h)d=c,c=a[h],0===h?m.push(["d",H,"s",h,"=t",H,"p",c].join("")):m.push(["d",H,"s",h,"=(t",H,"p",c,"-s",d,"*t",H,"p",d,")"].join(""));0<m.length&&v.push("var "+m.join(","));for(h=g-1;0<=h;--h)c=a[h],v.push(["for(i",h,"=0;i",h,"<s",c,";++i",h,"){"].join(""));v.push(q);for(h=0;h<g;++h){d=c;c=a[h];for(H=0;H<
r;++H)v.push(["p",H,"+=d",H,"s",h].join(""));f&&(0<h&&v.push(["index[",d,"]-=s",d].join("")),v.push(["++index[",c,"]"].join("")));v.push("}")}return v.join("\n")}function r(e,f,q,g){for(var r=f.length,v=q.arrayArgs.length,m=q.blockSize,c=0<q.indexArgs.length,d=[],h=0;h<v;++h)d.push(["var offset",h,"=p",h].join(""));for(h=e;h<r;++h)d.push(["for(var j"+h+"=SS[",f[h],"]|0;j",h,">0;){"].join("")),d.push(["if(j",h,"<",m,"){"].join("")),d.push(["s",f[h],"=j",h].join("")),d.push(["j",h,"=0"].join("")),d.push(["}else{s",
f[h],"=",m].join("")),d.push(["j",h,"-=",m,"}"].join("")),c&&d.push(["index[",f[h],"]=j",h].join(""));for(h=0;h<v;++h){m=["offset"+h];for(c=e;c<r;++c)m.push(["j",c,"*t",h,"p",f[c]].join(""));d.push(["p",h,"=(",m.join("+"),")"].join(""))}d.push(a(f,q,g));for(h=e;h<r;++h)d.push("}");return d.join("\n")}function q(a,f,q){for(var g=a.body,r=[],v=[],m=0;m<a.args.length;++m){var c=a.args[m];if(!(0>=c.count)){var d=new RegExp(c.name,"g"),h="",H=f.arrayArgs.indexOf(m);switch(f.argTypes[m]){case "offset":var w=
f.offsetArgIndex.indexOf(m),H=f.offsetArgs[w].array,h="+q"+w;case "array":var h="p"+H+h,u="l"+m,w="a"+H;if(0===f.arrayBlockIndices[H])1===c.count?"generic"===q[H]?c.lvalue?(r.push(["var ",u,"=",w,".get(",h,")"].join("")),g=g.replace(d,u),v.push([w,".set(",h,",",u,")"].join(""))):g=g.replace(d,[w,".get(",h,")"].join("")):g=g.replace(d,[w,"[",h,"]"].join("")):"generic"===q[H]?(r.push(["var ",u,"=",w,".get(",h,")"].join("")),g=g.replace(d,u),c.lvalue&&v.push([w,".set(",h,",",u,")"].join(""))):(r.push(["var ",
u,"=",w,"[",h,"]"].join("")),g=g.replace(d,u),c.lvalue&&v.push([w,"[",h,"]=",u].join("")));else{d=[c.name];c=[h];for(h=0;h<Math.abs(f.arrayBlockIndices[H]);h++)d.push("\\s*\\[([^\\]]+)\\]"),c.push("$"+(h+1)+"*t"+H+"b"+h);d=new RegExp(d.join(""),"g");h=c.join("+");if("generic"===q[H])throw Error("cwise: Generic arrays not supported in combination with blocks!");g=g.replace(d,[w,"[",h,"]"].join(""))}break;case "scalar":g=g.replace(d,"Y"+f.scalarArgs.indexOf(m));break;case "index":g=g.replace(d,"index");
break;case "shape":g=g.replace(d,"shape")}}}return[r.join("\n"),g,v.join("\n")].join("\n").trim()}function v(a){for(var f=Array(a.length),q=!0,g=0;g<a.length;++g){var r=a[g],v=r.match(/\d+/),v=v?v[0]:"";0===r.charAt(0)?f[g]="u"+r.charAt(1)+v:f[g]=r.charAt(0)+v;0<g&&(q=q&&f[g]===f[g-1])}return q?f[0]:f.join("")}var f=g("uniq");u.exports=function(e,k){for(var g=k[1].length-Math.abs(e.arrayBlockIndices[0])|0,u=Array(e.arrayArgs.length),z=Array(e.arrayArgs.length),y=0;y<e.arrayArgs.length;++y)z[y]=k[2*
y],u[y]=k[2*y+1];for(var m=[],c=[],d=[],h=[],H=[],y=0;y<e.arrayArgs.length;++y){0>e.arrayBlockIndices[y]?(d.push(0),h.push(g),m.push(g),c.push(g+e.arrayBlockIndices[y])):(d.push(e.arrayBlockIndices[y]),h.push(e.arrayBlockIndices[y]+g),m.push(0),c.push(e.arrayBlockIndices[y]));for(var w=[],L=0;L<u[y].length;L++)d[y]<=u[y][L]&&u[y][L]<h[y]&&w.push(u[y][L]-d[y]);H.push(w)}c=["SS"];h=["'use strict'"];w=[];for(L=0;L<g;++L)w.push(["s",L,"=SS[",L,"]"].join(""));for(y=0;y<e.arrayArgs.length;++y){c.push("a"+
y);c.push("t"+y);c.push("p"+y);for(L=0;L<g;++L)w.push(["t",y,"p",L,"=t",y,"[",d[y]+L,"]"].join(""));for(L=0;L<Math.abs(e.arrayBlockIndices[y]);++L)w.push(["t",y,"b",L,"=t",y,"[",m[y]+L,"]"].join(""))}for(y=0;y<e.scalarArgs.length;++y)c.push("Y"+y);0<e.shapeArgs.length&&w.push("shape=SS.slice(0)");if(0<e.indexArgs.length){L=Array(g);for(y=0;y<g;++y)L[y]="0";w.push(["index=[",L.join(","),"]"].join(""))}for(y=0;y<e.offsetArgs.length;++y){m=e.offsetArgs[y];d=[];for(L=0;L<m.offset.length;++L)0!==m.offset[L]&&
(1===m.offset[L]?d.push(["t",m.array,"p",L].join("")):d.push([m.offset[L],"*t",m.array,"p",L].join("")));0===d.length?w.push("q"+y+"=0"):w.push(["q",y,"=",d.join("+")].join(""))}y=f([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(y);0<w.length&&h.push("var "+w.join(","));for(y=0;y<e.arrayArgs.length;++y)h.push("p"+y+"|=0");3<e.pre.body.length&&h.push(q(e.pre,e,z));y=q(e.body,e,z);a:for(L=0,w=H[0].length;L<w;){for(m=1;m<H.length;++m)if(H[m][L]!==H[0][L])break a;
++L}L<g?h.push(r(L,H[0],e,y)):h.push(a(H[0],e,y));3<e.post.body.length&&h.push(q(e.post,e,z));e.debug&&console.log("-----Generated cwise routine for ",k,":\n"+h.join("\n")+"\n----------");g=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",L,v(z)].join("");return(new Function(["function ",g,"(",c.join(","),"){",h.join("\n"),"} return ",g].join("")))()}},{uniq:128}],78:[function(g,u,A){var a=g("./compile.js");u.exports=function(g){var q=["'use strict'","var CACHED={}"],v=[];q.push(["return function ",
g.funcName+"_cwise_thunk","(",g.shimArgs.join(","),"){"].join(""));for(var f=[],e=[],k=[["array",g.arrayArgs[0],".shape.slice(",Math.max(0,g.arrayBlockIndices[0]),0>g.arrayBlockIndices[0]?","+g.arrayBlockIndices[0]+")":")"].join("")],p=[],u=[],z=0;z<g.arrayArgs.length;++z){var y=g.arrayArgs[z];v.push(["t",y,"=array",y,".dtype,r",y,"=array",y,".order"].join(""));f.push("t"+y);f.push("r"+y);e.push("t"+y);e.push("r"+y+".join()");k.push("array"+y+".data");k.push("array"+y+".stride");k.push("array"+y+
".offset|0");0<z&&(p.push("array"+g.arrayArgs[0]+".shape.length===array"+y+".shape.length+"+(Math.abs(g.arrayBlockIndices[0])-Math.abs(g.arrayBlockIndices[z]))),u.push("array"+g.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,g.arrayBlockIndices[0])+"]===array"+y+".shape[shapeIndex+"+Math.max(0,g.arrayBlockIndices[z])+"]"))}1<g.arrayArgs.length&&(q.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),q.push("for(var shapeIndex=array"+g.arrayArgs[0]+
".shape.length-"+Math.abs(g.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),q.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),q.push("}"));for(z=0;z<g.scalarArgs.length;++z)k.push("scalar"+g.scalarArgs[z]);v.push(["type=[",e.join(","),"].join()"].join(""));v.push("proc=CACHED[type]");q.push("var "+v.join(","));q.push(["if(!proc){CACHED[type]=proc=compile([",f.join(","),"])}return proc(",k.join(","),")}"].join(""));g.debug&&console.log("-----Generated thunk:\n"+
q.join("\n")+"\n----------");return(new Function("compile",q.join("\n")))(a.bind(void 0,g))}},{"./compile.js":77}],79:[function(g,u,A){(function(a){var g=!1;if("undefined"!==typeof Float64Array){var q=new Float64Array(1),v=new Uint32Array(q.buffer);q[0]=1;g=!0;1072693248===v[1]?(u.exports=function(a){q[0]=a;return[v[0],v[1]]},u.exports.pack=function(a,f){v[0]=a;v[1]=f;return q[0]},u.exports.lo=function(a){q[0]=a;return v[0]},u.exports.hi=function(a){q[0]=a;return v[1]}):1072693248===v[0]?(u.exports=
function(a){q[0]=a;return[v[1],v[0]]},u.exports.pack=function(a,f){v[1]=a;v[0]=f;return q[0]},u.exports.lo=function(a){q[0]=a;return v[1]},u.exports.hi=function(a){q[0]=a;return v[0]}):g=!1}if(!g){var f=new a(8);u.exports=function(a){f.writeDoubleLE(a,0,!0);return[f.readUInt32LE(0,!0),f.readUInt32LE(4,!0)]};u.exports.pack=function(a,k){f.writeUInt32LE(a,0,!0);f.writeUInt32LE(k,4,!0);return f.readDoubleLE(0,!0)};u.exports.lo=function(a){f.writeDoubleLE(a,0,!0);return f.readUInt32LE(0,!0)};u.exports.hi=
function(a){f.writeDoubleLE(a,0,!0);return f.readUInt32LE(4,!0)}}u.exports.sign=function(a){return u.exports.hi(a)>>>31};u.exports.exponent=function(a){return(u.exports.hi(a)<<1>>>21)-1023};u.exports.fraction=function(a){var f=u.exports.lo(a);a=u.exports.hi(a);var q=a&1048575;a&2146435072&&(q+=1048576);return[f,q]};u.exports.denormalized=function(a){return!(u.exports.hi(a)&2146435072)}}).call(this,g("buffer").Buffer)},{buffer:66}],80:[function(g,u,A){function a(g,q,v){var f=g[v]|0;if(0>=f)return[];
var e=Array(f),k;if(v===g.length-1)for(k=0;k<f;++k)e[k]=q;else for(k=0;k<f;++k)e[k]=a(g,q,v+1);return e}u.exports=function(g,q){"undefined"===typeof q&&(q=0);switch(typeof g){case "number":if(0<g){var v=g|0,f=q,e,k;e=Array(v);for(k=0;k<v;++k)e[k]=f;return e}break;case "object":if("number"===typeof g.length)return a(g,q,0)}return[]}},{}],81:[function(g,u,A){u.exports=function(g,q){var v=g.length;if("number"!==typeof q){for(var f=q=0;f<v;++f){var e=g[f];q=Math.max(q,e[0],e[1])}q=(q|0)+1}q|=0;for(var k=
Array(q),f=0;f<q;++f)k[f]=[];for(f=0;f<v;++f)e=g[f],k[e[0]].push(e[1]),k[e[1]].push(e[0]);for(v=0;v<q;++v)a(k[v],function(a,e){return a-e});return k};var a=g("uniq")},{uniq:128}],82:[function(g,u,A){function a(a,c,d,h,e,f){this._color=a;this.key=c;this.value=d;this.left=h;this.right=e;this._count=f}function r(e){return new a(e._color,e.key,e.value,e.left,e.right,e._count)}function q(e,c){return new a(e,c.key,c.value,c.left,c.right,c._count)}function v(a){a._count=1+(a.left?a.left._count:0)+(a.right?
a.right._count:0)}function f(a,c){this._compare=a;this.root=c}function e(a,c){if(c.left){var d=e(a,c.left);if(d)return d}if(d=a(c.key,c.value))return d;if(c.right)return e(a,c.right)}function k(a,c,d,h){if(0>=c(a,h.key)){if(h.left){var e=k(a,c,d,h.left);if(e)return e}if(e=d(h.key,h.value))return e}if(h.right)return k(a,c,d,h.right)}function p(a,c,d,h,e){var f=d(a,e.key),k=d(c,e.key);if(0>=f&&(e.left&&(f=p(a,c,d,h,e.left))||0<k&&(f=h(e.key,e.value))))return f;if(0<k&&e.right)return p(a,c,d,h,e.right)}
function J(a,c){this.tree=a;this._stack=c}function z(a,c){a.key=c.key;a.value=c.value;a.left=c.left;a.right=c.right;a._color=c._color;a._count=c._count}function y(a,c){return a<c?-1:a>c?1:0}u.exports=function(a){return new f(a||y,null)};g=f.prototype;Object.defineProperty(g,"keys",{get:function(){var a=[];this.forEach(function(c,d){a.push(c)});return a}});Object.defineProperty(g,"values",{get:function(){var a=[];this.forEach(function(c,d){a.push(d)});return a}});Object.defineProperty(g,"length",{get:function(){return this.root?
this.root._count:0}});g.insert=function(e,c){for(var d=this._compare,h=this.root,k=[],g=[];h;){var r=d(e,h.key);k.push(h);g.push(r);h=0>=r?h.left:h.right}k.push(new a(0,e,c,null,null,1));for(r=k.length-2;0<=r;--r)h=k[r],k[r]=0>=g[r]?new a(h._color,h.key,h.value,k[r+1],h.right,h._count+1):new a(h._color,h.key,h.value,h.left,k[r+1],h._count+1);for(r=k.length-1;1<r;--r){g=k[r-1];h=k[r];if(1===g._color||1===h._color)break;var p=k[r-2];if(p.left===g)if(g.left===h){var y=p.right;if(y&&0===y._color)g._color=
1,p.right=q(1,y),p._color=0,--r;else{p._color=0;p.left=g.right;g._color=1;g.right=p;k[r-2]=g;k[r-1]=h;v(p);v(g);3<=r&&(r=k[r-3],r.left===p?r.left=g:r.right=g);break}}else if((y=p.right)&&0===y._color)g._color=1,p.right=q(1,y),p._color=0,--r;else{g.right=h.left;p._color=0;p.left=h.right;h._color=1;h.left=g;h.right=p;k[r-2]=h;k[r-1]=g;v(p);v(g);v(h);3<=r&&(r=k[r-3],r.left===p?r.left=h:r.right=h);break}else if(g.right===h)if((y=p.left)&&0===y._color)g._color=1,p.left=q(1,y),p._color=0,--r;else{p._color=
0;p.right=g.left;g._color=1;g.left=p;k[r-2]=g;k[r-1]=h;v(p);v(g);3<=r&&(r=k[r-3],r.right===p?r.right=g:r.left=g);break}else if((y=p.left)&&0===y._color)g._color=1,p.left=q(1,y),p._color=0,--r;else{g.left=h.right;p._color=0;p.right=h.left;h._color=1;h.right=g;h.left=p;k[r-2]=h;k[r-1]=g;v(p);v(g);v(h);3<=r&&(r=k[r-3],r.right===p?r.right=h:r.left=h);break}}k[0]._color=1;return new f(d,k[0])};g.forEach=function(a,c,d){if(this.root)switch(arguments.length){case 1:return e(a,this.root);case 2:return k(c,
this._compare,a,this.root);case 3:if(!(0<=this._compare(c,d)))return p(c,d,this._compare,a,this.root)}};Object.defineProperty(g,"begin",{get:function(){for(var a=[],c=this.root;c;)a.push(c),c=c.left;return new J(this,a)}});Object.defineProperty(g,"end",{get:function(){for(var a=[],c=this.root;c;)a.push(c),c=c.right;return new J(this,a)}});g.at=function(a){if(0>a)return new J(this,[]);for(var c=this.root,d=[];;){d.push(c);if(c.left){if(a<c.left._count){c=c.left;continue}a-=c.left._count}if(!a)return new J(this,
d);--a;if(c.right){if(a>=c.right._count)break;c=c.right}else break}return new J(this,[])};g.ge=function(a){for(var c=this._compare,d=this.root,h=[],e=0;d;){var f=c(a,d.key);h.push(d);0>=f&&(e=h.length);d=0>=f?d.left:d.right}h.length=e;return new J(this,h)};g.gt=function(a){for(var c=this._compare,d=this.root,h=[],e=0;d;){var f=c(a,d.key);h.push(d);0>f&&(e=h.length);d=0>f?d.left:d.right}h.length=e;return new J(this,h)};g.lt=function(a){for(var c=this._compare,d=this.root,h=[],e=0;d;){var f=c(a,d.key);
h.push(d);0<f&&(e=h.length);d=0>=f?d.left:d.right}h.length=e;return new J(this,h)};g.le=function(a){for(var c=this._compare,d=this.root,h=[],e=0;d;){var f=c(a,d.key);h.push(d);0<=f&&(e=h.length);d=0>f?d.left:d.right}h.length=e;return new J(this,h)};g.find=function(a){for(var c=this._compare,d=this.root,h=[];d;){var e=c(a,d.key);h.push(d);if(0===e)return new J(this,h);d=0>=e?d.left:d.right}return new J(this,[])};g.remove=function(a){return(a=this.find(a))?a.remove():this};g.get=function(a){for(var c=
this._compare,d=this.root;d;){var h=c(a,d.key);if(0===h)return d.value;d=0>=h?d.left:d.right}};g=J.prototype;Object.defineProperty(g,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(g,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});g.clone=function(){return new J(this.tree,this._stack.slice())};g.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var c=Array(e.length),d=e[e.length-1];c[c.length-
1]=new a(d._color,d.key,d.value,d.left,d.right,d._count);for(var h=e.length-2;0<=h;--h)d=e[h],c[h]=d.left===e[h+1]?new a(d._color,d.key,d.value,c[h+1],d.right,d._count):new a(d._color,d.key,d.value,d.left,c[h+1],d._count);d=c[c.length-1];if(d.left&&d.right){e=c.length;for(d=d.left;d.right;)c.push(d),d=d.right;h=c[e-1];c.push(new a(d._color,h.key,h.value,d.left,d.right,d._count));c[e-1].key=d.key;c[e-1].value=d.value;for(h=c.length-2;h>=e;--h)d=c[h],c[h]=new a(d._color,d.key,d.value,d.left,c[h+1],
d._count);c[e-1].left=c[e]}d=c[c.length-1];if(0===d._color)for(h=c[c.length-2],h.left===d?h.left=null:h.right===d&&(h.right=null),c.pop(),h=0;h<c.length;++h)c[h]._count--;else if(d.left||d.right)for(d.left?z(d,d.left):d.right&&z(d,d.right),d._color=1,h=0;h<c.length-1;++h)c[h]._count--;else{if(1===c.length)return new f(this.tree._compare,null);for(h=0;h<c.length;++h)c[h]._count--;for(var h=c[c.length-2],k,g,p,y=c.length-1;0<=y;--y){e=c[y];if(0===y){e._color=1;break}k=c[y-1];if(k.left===e){g=k.right;
if(g.right&&0===g.right._color){g=k.right=r(g);p=g.right=r(g.right);k.right=g.left;g.left=k;g.right=p;g._color=k._color;e._color=1;k._color=1;p._color=1;v(k);v(g);if(1<y){var u=c[y-2];u.left===k?u.left=g:u.right=g}c[y-1]=g;break}else if(g.left&&0===g.left._color){g=k.right=r(g);p=g.left=r(g.left);k.right=p.left;g.left=p.right;p.left=k;p.right=g;p._color=k._color;k._color=1;g._color=1;e._color=1;v(k);v(g);v(p);1<y&&(u=c[y-2],u.left===k?u.left=p:u.right=p);c[y-1]=p;break}if(1===g._color)if(0===k._color){k._color=
1;k.right=q(0,g);break}else k.right=q(0,g);else g=r(g),k.right=g.left,g.left=k,g._color=k._color,k._color=0,v(k),v(g),1<y&&(u=c[y-2],u.left===k?u.left=g:u.right=g),c[y-1]=g,c[y]=k,y+1<c.length?c[y+1]=e:c.push(e),y+=2}else{g=k.left;if(g.left&&0===g.left._color){g=k.left=r(g);p=g.left=r(g.left);k.left=g.right;g.right=k;g.left=p;g._color=k._color;e._color=1;k._color=1;p._color=1;v(k);v(g);1<y&&(u=c[y-2],u.right===k?u.right=g:u.left=g);c[y-1]=g;break}else if(g.right&&0===g.right._color){g=k.left=r(g);
p=g.right=r(g.right);k.left=p.right;g.right=p.left;p.right=k;p.left=g;p._color=k._color;k._color=1;g._color=1;e._color=1;v(k);v(g);v(p);1<y&&(u=c[y-2],u.right===k?u.right=p:u.left=p);c[y-1]=p;break}if(1===g._color)if(0===k._color){k._color=1;k.left=q(0,g);break}else k.left=q(0,g);else g=r(g),k.left=g.right,g.right=k,g._color=k._color,k._color=0,v(k),v(g),1<y&&(u=c[y-2],u.right===k?u.right=g:u.left=g),c[y-1]=g,c[y]=k,y+1<c.length?c[y+1]=e:c.push(e),y+=2}}h.left===d?h.left=null:h.right=null}return new f(this.tree._compare,
c[0])};Object.defineProperty(g,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(g,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(g,"index",{get:function(){var a=0,c=this._stack;if(0===c.length)return(a=this.tree.root)?a._count:0;c[c.length-1].left&&(a=c[c.length-1].left._count);for(var d=c.length-2;0<=d;--d)c[d+1]===c[d].right&&(++a,
c[d].left&&(a+=c[d].left._count));return a},enumerable:!0});g.next=function(){var a=this._stack;if(0!==a.length){var c=a[a.length-1];if(c.right)for(c=c.right;c;)a.push(c),c=c.left;else for(a.pop();0<a.length&&a[a.length-1].right===c;)c=a[a.length-1],a.pop()}};Object.defineProperty(g,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var c=a.length-1;0<c;--c)if(a[c-1].left===a[c])return!0;return!1}});g.update=function(e){var c=this._stack;if(0===
c.length)throw Error("Can't update empty node!");var d=Array(c.length),h=c[c.length-1];d[d.length-1]=new a(h._color,h.key,e,h.left,h.right,h._count);for(e=c.length-2;0<=e;--e)h=c[e],d[e]=h.left===c[e+1]?new a(h._color,h.key,h.value,d[e+1],h.right,h._count):new a(h._color,h.key,h.value,h.left,d[e+1],h._count);return new f(this.tree._compare,d[0])};g.prev=function(){var a=this._stack;if(0!==a.length){var c=a[a.length-1];if(c.left)for(c=c.left;c;)a.push(c),c=c.right;else for(a.pop();0<a.length&&a[a.length-
1].left===c;)c=a[a.length-1],a.pop()}};Object.defineProperty(g,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var c=a.length-1;0<c;--c)if(a[c-1].right===a[c])return!0;return!1}})},{}],83:[function(g,u,A){function a(a){if(0>a)return Number("0/0");for(var f=q[0],e=q.length-1;0<e;--e)f+=q[e]/(a+e);e=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(e)-e+Math.log(f)-Math.log(a)}var r=[.9999999999998099,676.5203681218851,-1259.1392167224028,
771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],q=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];u.exports=function f(e){if(.5>e)return Math.PI/(Math.sin(Math.PI*e)*
f(1-e));if(100<e)return Math.exp(a(e));--e;for(var k=r[0],g=1;9>g;g++)k+=r[g]/(e+g);g=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,e+.5)*Math.exp(-g)*k};u.exports.log=a},{}],84:[function(g,u,A){u.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],85:[function(g,u,A){var a=g("./identity");u.exports=function(g,q,v,f){var e,k,p,u,z,y,m,c,d=q[0],h=q[1];q=q[2];p=f[0];u=f[1];k=f[2];m=v[0];f=v[1];e=v[2];
if(1E-6>Math.abs(d-m)&&1E-6>Math.abs(h-f)&&1E-6>Math.abs(q-e))return a(g);v=d-m;f=h-f;m=q-e;c=1/Math.sqrt(v*v+f*f+m*m);v*=c;f*=c;m*=c;e=u*m-k*f;k=k*v-p*m;p=p*f-u*v;(c=Math.sqrt(e*e+k*k+p*p))?(c=1/c,e*=c,k*=c,p*=c):p=k=e=0;u=f*p-m*k;z=m*e-v*p;y=v*k-f*e;(c=Math.sqrt(u*u+z*z+y*y))?(c=1/c,u*=c,z*=c,y*=c):y=z=u=0;g[0]=e;g[1]=u;g[2]=v;g[3]=0;g[4]=k;g[5]=z;g[6]=f;g[7]=0;g[8]=p;g[9]=y;g[10]=m;g[11]=0;g[12]=-(e*d+k*h+p*q);g[13]=-(u*d+z*h+y*q);g[14]=-(v*d+f*h+m*q);g[15]=1;return g}},{"./identity":84}],86:[function(g,
u,A){u.exports=function(a,g,q,v,f){g=1/Math.tan(g/2);var e=1/(v-f);a[0]=g/q;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+v)*e;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*v*e;a[15]=0;return a}},{}],87:[function(g,u,A){A.read=function(a,g,q,v,f){var e;e=8*f-v-1;var k=(1<<e)-1,p=k>>1,u=-7;f=q?f-1:0;var z=q?-1:1,y=a[g+f];f+=z;q=y&(1<<-u)-1;y>>=-u;for(u+=e;0<u;q=256*q+a[g+f],f+=z,u-=8);e=q&(1<<-u)-1;q>>=-u;for(u+=v;0<u;e=256*e+a[g+f],f+=z,u-=8);if(0===q)q=1-p;else{if(q===k)return e?NaN:
Infinity*(y?-1:1);e+=Math.pow(2,v);q-=p}return(y?-1:1)*e*Math.pow(2,q-v)};A.write=function(a,g,q,v,f,e){var k,p=8*e-f-1,u=(1<<p)-1,z=u>>1,y=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;e=v?0:e-1;var m=v?1:-1,c=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,v=u):(v=Math.floor(Math.log(g)/Math.LN2),1>g*(k=Math.pow(2,-v))&&(v--,k*=2),g=1<=v+z?g+y/k:g+y*Math.pow(2,1-z),2<=g*k&&(v++,k/=2),v+z>=u?(g=0,v=u):1<=v+z?(g=(g*k-1)*Math.pow(2,f),v+=z):(g=g*Math.pow(2,z-1)*Math.pow(2,f),
v=0));for(;8<=f;a[q+e]=g&255,e+=m,g/=256,f-=8);v=v<<f|g;for(p+=f;0<p;a[q+e]=v&255,e+=m,v/=256,p-=8);a[q+e-m]|=128*c}},{}],88:[function(g,u,A){function a(a,c,e,f,m){this.mid=a;this.left=c;this.right=e;this.leftPoints=f;this.rightPoints=m;this.count=(c?c.count:0)+(e?e.count:0)+f.length}function r(a,c){a.mid=c.mid;a.left=c.left;a.right=c.right;a.leftPoints=c.leftPoints;a.rightPoints=c.rightPoints;a.count=c.count}function q(a,c){var e=y(c);a.mid=e.mid;a.left=e.left;a.right=e.right;a.leftPoints=e.leftPoints;
a.rightPoints=e.rightPoints;a.count=e.count}function v(a,c){var e=a.intervals([]),f=e.indexOf(c);if(0>f)return 0;e.splice(f,1);q(a,e);return 1}function f(a,c,e){for(var f=0;f<a.length&&a[f][0]<=c;++f){var m=e(a[f]);if(m)return m}}function e(a,c,e){for(var f=a.length-1;0<=f&&a[f][1]>=c;--f){var m=e(a[f]);if(m)return m}}function k(a,c){for(var e=0;e<a.length;++e){var f=c(a[e]);if(f)return f}}function p(a,c){return a-c}function J(a,c){var e=a[0]-c[0];return e?e:a[1]-c[1]}function z(a,c){var e=a[1]-c[1];
return e?e:a[0]-c[0]}function y(c){if(0===c.length)return null;for(var h=[],e=0;e<c.length;++e)h.push(c[e][0],c[e][1]);h.sort(p);for(var h=h[h.length>>1],f=[],m=[],k=[],e=0;e<c.length;++e){var g=c[e];g[1]<h?f.push(g):h<g[0]?m.push(g):k.push(g)}c=k.slice();k.sort(J);c.sort(z);return new a(h,y(f),y(m),k,c)}function m(a){this.root=a}var c=g("binary-search-bounds");u.exports=function(a){return a&&0!==a.length?new m(y(a)):new m(null)};g=a.prototype;g.intervals=function(a){a.push.apply(a,this.leftPoints);
this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);return a};g.insert=function(a){var e=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?(e=this.intervals([]),e.push(a),q(this,e)):this.left.insert(a):this.left=y([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?(e=this.intervals([]),e.push(a),q(this,e)):this.right.insert(a):this.right=y([a]);else{var e=c.ge(this.leftPoints,a,J),f=c.ge(this.rightPoints,a,
z);this.leftPoints.splice(e,0,a);this.rightPoints.splice(f,0,a)}};g.remove=function(a){var e=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(e-1))return v(this,a);e=this.left.remove(a);if(2===e)return this.left=null,--this.count,1;1===e&&--this.count;return e}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(e-1))return v(this,a);e=this.right.remove(a);if(2===e)return this.right=null,--this.count,1;1===e&&--this.count;
return e}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var f=this.left;f.right;)a=f,f=f.right;if(a===this)f.right=this.right;else{var m=this.left,e=this.right;a.count-=f.count;a.right=f.left;f.left=m;f.right=e}r(this,f);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?r(this,this.left):r(this,this.right);return 1}for(m=c.ge(this.leftPoints,
a,J);m<this.leftPoints.length&&this.leftPoints[m][0]===a[0];++m)if(this.leftPoints[m]===a)for(--this.count,this.leftPoints.splice(m,1),e=c.ge(this.rightPoints,a,z);e<this.rightPoints.length&&this.rightPoints[e][1]===a[1];++e)if(this.rightPoints[e]===a)return this.rightPoints.splice(e,1),1;return 0};g.queryPoint=function(a,c){if(a<this.mid){if(this.left){var m=this.left.queryPoint(a,c);if(m)return m}return f(this.leftPoints,a,c)}return a>this.mid?this.right&&(m=this.right.queryPoint(a,c))?m:e(this.rightPoints,
a,c):k(this.leftPoints,c)};g.queryInterval=function(a,c,m){if(a<this.mid&&this.left){var g=this.left.queryInterval(a,c,m);if(g)return g}return c>this.mid&&this.right&&(g=this.right.queryInterval(a,c,m))?g:c<this.mid?f(this.leftPoints,c,m):a>this.mid?e(this.rightPoints,a,m):k(this.leftPoints,m)};g=m.prototype;g.insert=function(c){this.root?this.root.insert(c):this.root=new a(c[0],null,null,[c],[c])};g.remove=function(a){return this.root?(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};g.queryPoint=
function(a,c){if(this.root)return this.root.queryPoint(a,c)};g.queryInterval=function(a,c,e){if(a<=c&&this.root)return this.root.queryInterval(a,c,e)};Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":89}],89:[function(g,u,A){function a(a,g,f,e,k,p){a=["function ",a,"(a,l,h,",e.join(","),"){",p?"":"var i=",f?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",
k?".get(m)":"[m]"];p?0>g.indexOf("c")?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",g,"){i=m;");f?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}");a.push("}");p?a.push("return -1};"):a.push("return i};");return a.join("")}function r(g,r,f,e){return(new Function([a("A","x"+g+"y",r,["y"],!1,e),a("B","x"+g+"y",r,["y"],!0,e),a("P","c(x,y)"+g+"0",r,["y","c"],!1,e),a("Q","c(x,y)"+g+"0",r,["y","c"],!0,e),"function dispatchBsearch",
f,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",f].join("")))()}u.exports={ge:r(">=",!1,"GE"),gt:r(">",!1,"GT"),lt:r("<",!0,"LT"),le:r("<=",!0,"LE"),eq:r("-",
!0,"EQ",!0)}},{}],90:[function(g,u,A){u.exports=function(a,g){g=g||Array(a.length);for(var q=0;q<a.length;++q)g[a[q]]=q;return g}},{}],91:[function(g,u,A){u.exports=function(a){for(var g=Array(a),q=0;q<a;++q)g[q]=q;return g}},{}],92:[function(g,u,A){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}u.exports=function(g){return null!=g&&(a(g)||"function"===typeof g.readFloatLE&&"function"===typeof g.slice&&a(g.slice(0,0))||!!g._isBuffer)}},{}],
93:[function(g,u,A){var a={}.toString;u.exports=Array.isArray||function(g){return"[object Array]"==a.call(g)}},{}],94:[function(g,u,A){function a(a,e,f){for(var c=0,d=0;d<a;++d)e&1<<d&&(c|=1<<f[d]);return c}function r(g,r,m,c,d,h){function u(a,c){b.push("for(","i"+d[a],"=",c,";","i"+d[a],"<","s"+d[a],";","++","i"+d[a],"){")}function w(a){for(var c=0;c<E;++c)b.push("p"+c,"+=","u"+c+"_"+d[a],";");b.push("}")}function A(){for(var a=1;a<1<<ta;++a)b.push(J,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",J,
";")}function G(a,m){if(0>a){for(var l=0;l<E;++l)h[l]?b.push("c"+l+"_0","=","d"+l,".get(","p"+l,");"):b.push("c"+l+"_0","=","d"+l,"[","p"+l,"];");for(var k=[],l=0;l<E;++l)k.push("c"+l+"_0");for(l=0;l<c;++l)k.push("x"+l);b.push("b0","=",f,"[",p,"]=phase(",k.join(),");");for(k=1;k<1<<ta;++k)b.push("b"+k,"=",f,"[",p,"+","e"+k,"];");l=[];for(k=1;k<1<<ta;++k)l.push("(b0!==b"+k+")");b.push("if(",l.join("||"),"){");for(var g=[],l=0;l<ta;++l)g.push("i"+l);for(l=0;l<E;++l)for(g.push("c"+l+"_0"),k=1;k<1<<ta;++k)h[l]?
b.push("c"+l+"_"+k,"=","d"+l,".get(","p"+l,"+","d"+l+"_"+k,");"):b.push("c"+l+"_"+k,"=","d"+l,"[","p"+l,"+","d"+l+"_"+k,"];"),g.push("c"+l+"_"+k);for(l=0;l<1<<ta;++l)g.push("b"+l);for(l=0;l<c;++l)g.push("x"+l);b.push("vertex(",g.join(),");","v0","=",v,"[",p,"]=",e,"++;");l=(1<<ta)-1;g="b"+l;for(k=0;k<ta;++k)if(0===(m&~(1<<k))){for(var q=l^1<<k,r="b"+q,x=[],y=q;0<y;y=y-1&q)x.push(v+"["+p+"+"+("e"+y)+"]");x.push("v0");for(y=0;y<E;++y)k&1?x.push("c"+y+"_"+l,"c"+y+"_"+q):x.push("c"+y+"_"+q,"c"+y+"_"+
l);k&1?x.push(g,r):x.push(r,g);for(y=0;y<c;++y)x.push("x"+y);b.push("if(",g,"!==",r,"){","face(",x.join(),")}")}b.push("}",p,"+=1;")}else{for(k=a-1;0<=k;--k)u(k,0);l=[];for(k=0;k<E;++k)h[k]?l.push("d"+k+".get("+("p"+k)+")"):l.push("d"+k+"["+("p"+k)+"]");for(k=0;k<c;++k)l.push("x"+k);b.push(f,"[",p,"++]=phase(",l.join(),");");for(k=0;k<a;++k)w(k);for(k=0;k<E;++k)b.push("p"+k,"+=","u"+k+"_"+d[a],";");b.push("if(","s"+d[a],">0){","i"+d[a],"=1;");G(a-1,m|1<<d[a]);for(k=0;k<E;++k)b.push("p"+k,"+=","u"+
k+"_"+d[a],";");a===ta-1&&(b.push(p,"=0;"),A());u(a,2);G(a-1,m);a===ta-1&&(b.push("if(","i"+d[ta-1],"&1){",p,"=0;}"),A());w(a);b.push("}")}}var E=h.length,ta=d.length;if(2>ta)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var B="extractContour"+d.join("_"),b=[],l=[],x=[],R=0;R<E;++R)x.push("a"+R);for(R=0;R<c;++R)x.push("x"+R);for(R=0;R<ta;++R)l.push("s"+R+"=a0.shape["+R+"]|0");for(R=0;R<E;++R){l.push("d"+R+"="+("a"+R)+".data","o"+R+"="+("a"+R)+".offset|0");for(var C=0;C<
ta;++C)l.push("t"+R+"_"+C+"="+("a"+R)+".stride["+C+"]|0")}for(R=0;R<E;++R)for(l.push("p"+R+"="+("o"+R)),l.push("c"+R+"_0"),C=1;C<1<<ta;++C){for(var F=[],ia=0;ia<ta;++ia)C&1<<ia&&F.push("-"+("t"+R+"_"+ia));l.push("d"+R+"_"+C+"=("+F.join("")+")|0");l.push("c"+R+"_"+C+"=0")}for(R=0;R<E;++R)for(C=0;C<ta;++C)ia=["t"+R+"_"+d[C]],0<C&&ia.push("t"+R+"_"+d[C-1]+"*"+("s"+d[C-1])),l.push("u"+R+"_"+d[C]+"=("+ia.join("-")+")|0");for(R=0;R<ta;++R)l.push("i"+R+"=0");l.push(e+"=0");C=["2"];for(R=ta-2;0<=R;--R)C.push("s"+
d[R]);l.push(k+"=("+C.join("*")+")|0",f+"=mallocUint32("+k+")",v+"=mallocUint32("+k+")",p+"=0");l.push("b0=0");for(C=1;C<1<<ta;++C){R=[];F=[];for(ia=0;ia<ta;++ia)C&1<<ia&&(0===F.length?R.push("1"):R.unshift(F.join("*"))),F.push("s"+d[ia]);ia="";0>R[0].indexOf("s"+d[ta-2])&&(ia="-");F=a(ta,C,d);l.push("e"+F+"=(-"+R.join("-")+")|0","y"+F+"=("+ia+R.join("-")+")|0","b"+F+"=0")}l.push("v0=0",J+"=0");G(ta-1,0);b.push("freeUint32(",v,");freeUint32(",f,");");B=["'use strict';function ",B,"(",x.join(),"){var ",
l.join(),";",b.join(""),"}return ",B].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",B))(g,r,m,q.mallocUint32,q.freeUint32)}var q=g("typedarray-pool");u.exports=function(a){function e(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&e("Must specify arguments");var f=a.order;Array.isArray(f)||e("Must specify order");var c=a.arrayArguments||1;1>c&&e("Must have at least one array argument");var d=a.scalarArguments||0;0>d&&e("Scalar arg count must be > 0");
"function"!==typeof a.vertex&&e("Must specify vertex creation function");"function"!==typeof a.cell&&e("Must specify cell creation function");"function"!==typeof a.phase&&e("Must specify phase function");for(var h=a.getters||[],k=Array(c),g=0;g<c;++g)0<=h.indexOf(g)?k[g]=!0:k[g]=!1;return r(a.vertex,a.cell,a.phase,d,f,k)};var v="V",f="P",e="N",k="Q",p="X",J="T"},{"typedarray-pool":126}],95:[function(g,u,A){function a(a,e){return a[0]-e[0]}function r(){var e=this.stride,f=Array(e.length),k;for(k=0;k<
f.length;++k)f[k]=[Math.abs(e[k]),k];f.sort(a);e=Array(f.length);for(k=0;k<e.length;++k)e[k]=f[k][1];return e}function q(a,e){var k=["View",e,"d",a].join("");0>e&&(k="View_Nil"+a);var m="generic"===a;if(-1===e){var c,k=new Function("function "+k+"(a){this.data=a;};var proto="+k+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+k+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
k+"(a){return new "+k+"(a);}");return k()}if(0===e)return k=new Function("TrivialArray","function "+k+"(a,d) {this.data = a;this.offset = d};var proto="+k+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+k+"_copy() {return new "+k+"(this.data,this.offset)};proto.pick=function "+k+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
k+"_get(){return "+(m?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+k+"_set(v){return "+(m?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+k+"(a,b,c,d){return new "+k+"(a,d)}"),k(p[a][0]);c=["'use strict'"];var d=f(e),h=d.map(function(a){return"i"+a}),g="this.offset+"+d.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),q=d.map(function(a){return"b"+a}).join(","),v=d.map(function(a){return"c"+a}).join(",");c.push("function "+
k+"(a,"+q+","+v+",d){this.data=a","this.shape=["+q+"]","this.stride=["+v+"]","this.offset=d|0}","var proto="+k+".prototype","proto.dtype='"+a+"'","proto.dimension="+e);c.push("Object.defineProperty(proto,'size',{get:function "+k+"_size(){return "+d.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===e?c.push("proto.order=[0]"):(c.push("Object.defineProperty(proto,'order',{get:"),4>e?(c.push("function "+k+"_order(){"),2===e?c.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===e&&c.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):c.push("ORDER})"));c.push("proto.set=function "+k+"_set("+h.join(",")+",v){");m?c.push("return this.data.set("+g+",v)}"):c.push("return this.data["+g+"]=v}");c.push("proto.get=function "+k+"_get("+h.join(",")+"){");m?c.push("return this.data.get("+
g+")}"):c.push("return this.data["+g+"]}");c.push("proto.index=function "+k+"_index(",h.join(),"){return "+g+"}");c.push("proto.hi=function "+k+"_hi("+h.join(",")+"){return new "+k+"(this.data,"+d.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+d.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");m=d.map(function(a){return"a"+a+"=this.shape["+a+"]"});g=d.map(function(a){return"c"+a+"=this.stride["+a+"]"});c.push("proto.lo=function "+
k+"_lo("+h.join(",")+"){var b=this.offset,d=0,"+m.join(",")+","+g.join(","));for(m=0;m<e;++m)c.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");c.push("return new "+k+"(this.data,"+d.map(function(a){return"a"+a}).join(",")+","+d.map(function(a){return"c"+a}).join(",")+",b)}");c.push("proto.step=function "+k+"_step("+h.join(",")+"){var "+d.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+d.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<e;++m)c.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");c.push("return new "+k+"(this.data,"+d.map(function(a){return"a"+a}).join(",")+","+d.map(function(a){return"b"+a}).join(",")+",c)}");g=Array(e);q=Array(e);for(m=0;m<e;++m)g[m]="a[i"+m+"]",q[m]="b[i"+m+"]";c.push("proto.transpose=function "+k+"_transpose("+h+"){"+h.map(function(a,c){return a+"=("+a+"===undefined?"+
c+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+k+"(this.data,"+g.join(",")+","+q.join(",")+",this.offset)}");c.push("proto.pick=function "+k+"_pick("+h+"){var a=[],b=[],c=this.offset");for(m=0;m<e;++m)c.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");c.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");c.push("return function construct_"+k+"(data,shape,stride,offset){return new "+
k+"(data,"+d.map(function(a){return"shape["+a+"]"}).join(",")+","+d.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");k=new Function("CTOR_LIST","ORDER",c.join("\n"));return k(p[a],r)}function v(a){if(e(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(a)?"array":"generic"}var f=g("iota-array"),e=g("is-buffer"),k="undefined"!==typeof Float64Array,p={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};
(function(){for(var a in p)p[a].push(q(a,-1))});u.exports=function(a,e,f,k){if(void 0===a){var c=p.array[0];return c([])}"number"===typeof a&&(a=[a]);void 0===e&&(e=[a.length]);c=e.length;if(void 0===f){f=Array(c);for(var d=c-1,h=1;0<=d;--d)f[d]=h,h*=e[d]}if(void 0===k)for(d=k=0;d<c;++d)0>f[d]&&(k-=(e[d]-1)*f[d]);d=v(a);for(h=p[d];h.length<=c+1;)h.push(q(d,h.length-1));c=h[c+1];return c(a,e,f,k)}},{"iota-array":91,"is-buffer":92}],96:[function(g,u,A){var a=g("double-bits"),r=Math.pow(2,-1074);u.exports=
function(g,v){if(isNaN(g)||isNaN(v))return NaN;if(g===v)return g;if(0===g)return 0>v?-r:r;var f=a.hi(g),e=a.lo(g);v>g===0<g?4294967295===e?(f+=1,e=0):e+=1:0===e?(e=4294967295,--f):--e;return a.pack(e,f)}},{"double-bits":79}],97:[function(g,u,A){u.exports=function(g){var v=g.length;if(v<a)for(var f=1,e=0;e<v;++e)for(var k=0;k<e;++k)if(g[e]<g[k])f=-f;else{if(g[e]===g[k])return 0}else{for(var p=r.mallocUint8(v),e=0;e<v;++e)p[e]=0;f=1;for(e=0;e<v;++e)if(!p[e]){var u=1;p[e]=1;for(k=g[e];k!==e;k=g[k]){if(p[k])return r.freeUint8(p),
0;u+=1;p[k]=1}u&1||(f=-f)}r.freeUint8(p)}return f};var a=32,r=g("typedarray-pool")},{"typedarray-pool":126}],98:[function(g,u,A){var a=g("typedarray-pool"),r=g("invert-permutation");A.rank=function(g){var v=g.length;switch(v){case 0:case 1:return 0;case 2:return g[1]}var f=a.mallocUint32(v),e=a.mallocUint32(v),k=0,p;r(g,e);for(p=0;p<v;++p)f[p]=g[p];for(p=v-1;0<p;--p)v=e[p],g=f[p],f[p]=f[v],f[v]=g,e[p]=e[g],e[g]=v,k=(k+g)*p;a.freeUint32(e);a.freeUint32(f);return k};A.unrank=function(a,g,f){switch(a){case 0:return f?
f:[];case 1:return f?(f[0]=0,f):[0];case 2:return f?(g?(f[0]=0,f[1]=1):(f[0]=1,f[1]=0),f):g?[0,1]:[1,0]}f=f||Array(a);var e,k,p=1;f[0]=0;for(k=1;k<a;++k)f[k]=k,p=p*k|0;for(k=a-1;0<k;--k)a=g/p|0,g=g-a*p|0,p=p/k|0,e=f[k]|0,f[k]=f[a]|0,f[a]=e|0;return f}},{"invert-permutation":90,"typedarray-pool":126}],99:[function(g,u,A){u.exports=function(g,q){function v(a,c){var e=u[c][a[c]];e.splice(e.indexOf(a),1)}function f(c,e,f){var k,m,g;for(m=0;2>m;++m)if(0<u[m][e].length){k=u[m][e][0];g=m;break}m=k[g^1];
for(var p=0;2>p;++p)for(var r=u[p][e],y=0;y<r.length;++y){var b=r[y],l=b[p^1];0<a(q[c],q[e],q[m],q[l])&&(k=b,m=l,g=p)}if(f)return m;k&&v(k,g);return m}function e(c,e){var k=u[e][c][0],m=[c];v(k,e);for(k=k[e^1];;){for(;k!==c;)m.push(k),k=f(m[m.length-2],k,!1);if(0===u[0][c].length+u[1][c].length)break;var k=m[m.length-1],g=c,p=m[1],r=f(k,g,!0);if(0>a(q[k],q[g],q[p],q[r]))break;m.push(c);k=f(k,g)}return m}for(var k=q.length|0,p=g.length,u=[Array(k),Array(k)],z=0;z<k;++z)u[0][z]=[],u[1][z]=[];for(z=
0;z<p;++z){var y=g[z];u[0][y[0]].push(y);u[1][y[1]].push(y)}p=[];for(z=0;z<k;++z)0===u[0][z].length+u[1][z].length&&p.push([z]);for(z=0;z<k;++z)for(y=0;2>y;++y){for(var m=[];0<u[y][z].length;){var c=e(z,y);c[1]===c[c.length-1]?m.push.apply(m,c):(0<m.length&&p.push(m),m=c)}0<m.length&&p.push(m)}return p};var a=g("compare-angle")},{"compare-angle":74}],100:[function(g,u,A){u.exports=function(g,q){for(var v=a(g,q.length),f=Array(q.length),e=Array(q.length),k=[],p=0;p<q.length;++p){var u=v[p].length;
e[p]=u;f[p]=!0;1>=u&&k.push(p)}for(;0<k.length;)for(u=k.pop(),f[u]=!1,u=v[u],p=0;p<u.length;++p){var z=u[p];0===--e[z]&&k.push(z)}v=Array(q.length);e=[];for(p=0;p<q.length;++p)f[p]?(u=e.length,v[p]=u,e.push(q[p])):v[p]=-1;k=[];for(p=0;p<g.length;++p)u=g[p],f[u[0]]&&f[u[1]]&&k.push([v[u[0]],v[u[1]]]);return[k,e]};var a=g("edges-to-adjacency-list")},{"edges-to-adjacency-list":81}],101:[function(g,u,A){function a(a,e){for(var f=Array(a),c=0;c<a;++c)f[c]=e;return f}function r(a){for(var e=Array(a),f=
0;f<a;++f)e[f]=[];return e}u.exports=function(g,y){function m(a){for(var b=a.length,c=0;c<b;++c)if(!C[a[c]])return!1;return!0}var c=J(g,y);g=c[0];y=c[1];for(var d=y.length,h=q(g,y.length),u=0;u<d;++u)if(1===h[u].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");for(var h=v(g,y),h=h.filter(function(a){for(var b=a.length,c=[0],d=0;d<b;++d)var h=y[a[d]],f=y[a[(d+1)%b]],l=e(-h[0],h[1]),m=e(-h[0],f[1]),h=e(f[0],h[1]),f=e(f[0],f[1]),c=k(c,k(k(l,m),k(h,f)));return 0<c[c.length-1]}),
c=h.length,w=Array(c),A=Array(c),u=0;u<c;++u){w[u]=u;var G=Array(c),E=h[u].map(function(a){return y[a]}),ta=f([E]),B=0,b=0;a:for(;b<c;++b)if(G[b]=0,u!==b){for(var E=h[b],l=E.length,x=0;x<l;++x){var R=ta(y[E[x]]);if(0!==R){0>R&&(G[b]=1,B+=1);continue a}}G[b]=1;B+=1}A[u]=[B,u,G]}A.sort(function(a,b){return b[0]-a[0]});for(u=0;u<c;++u)for(G=A[u],E=G[1],l=G[2],b=0;b<c;++b)l[b]&&(w[b]=E);A=r(c);for(u=0;u<c;++u)A[u].push(w[u]),A[w[u]].push(u);for(var G={},C=a(d,!1),u=0;u<c;++u)for(E=h[u],l=E.length,b=0;b<
l;++b)d=E[b],ta=E[(b+1)%l],B=Math.min(d,ta)+":"+Math.max(d,ta),B in G?(B=G[B],A[B].push(u),A[u].push(B),C[d]=C[ta]=!0):G[B]=u;b=[];d=a(c,-1);for(u=0;u<c;++u)w[u]!==u||m(h[u])?d[u]=-1:(b.push(u),d[u]=0);for(c=[];0<b.length;){u=b.pop();w=A[u];p(w,function(a,b){return a-b});var l=w.length,G=d[u],F;0===G&&(E=h[u],F=[E]);for(u=0;u<l;++u)E=w[u],0<=d[E]||(d[E]=G^1,b.push(E),0===G&&(E=h[E],m(E)||(E.reverse(),F.push(E))));0===G&&c.push(F)}return c};var q=g("edges-to-adjacency-list"),v=g("planar-dual"),f=g("point-in-big-polygon"),
e=g("two-product"),k=g("robust-sum"),p=g("uniq"),J=g("./lib/trim-leaves")},{"./lib/trim-leaves":100,"edges-to-adjacency-list":81,"planar-dual":99,"point-in-big-polygon":103,"robust-sum":114,"two-product":124,uniq:128}],102:[function(g,u,A){arguments[4][89][0].apply(A,arguments)},{dup:89}],103:[function(g,u,A){function a(){return!0}function r(e){return function(c,d){var h=e[c];return h?!!h.queryPoint(d,a):!1}}function q(a){for(var c={},d=0;d<a.length;++d){var e=a[d],f=e[0][0],k=e[0][1],e=e[1][1],k=
[Math.min(k,e),Math.max(k,e)];f in c?c[f].push(k):c[f]=[k]}a={};f=Object.keys(c);for(d=0;d<f.length;++d)a[f[d]]=z(c[f[d]]);return r(a)}function v(a,c){return function(d){var e=y.le(c,d[0]);if(0>e)return 1;var f=a[e];if(!f)if(0<e&&c[e]===d[0])f=a[e-1];else return 1;for(e=1;f;){var k=f.key,g=p(d,k[0],k[1]);if(k[0][0]<k[1][0])if(0>g)f=f.left;else if(0<g)e=-1,f=f.right;else return 0;else if(0<g)f=f.left;else if(0>g)e=1,f=f.right;else return 0}return e}}function f(a){return 1}function e(a){return function(c){return a(c[0],
c[1])?0:1}}function k(a,c){return function(d){return a(d[0],d[1])?0:c(d)}}u.exports=function(a){for(var c=a.length,d=[],h=[],g=0;g<c;++g)for(var p=a[g],r=p.length,u=r-1,y=0;y<r;u=y++){var u=p[u],z=p[y];u[0]===z[0]?h.push([u,z]):d.push([u,z])}if(0===d.length)return 0===h.length?f:e(q(h));a=J(d);a=v(a.slabs,a.coordinates);return 0===h.length?a:k(q(h),a)};var p=g("robust-orientation")[3],J=g("slab-decomposition"),z=g("interval-tree-1d"),y=g("binary-search-bounds")},{"binary-search-bounds":102,"interval-tree-1d":88,
"robust-orientation":109,"slab-decomposition":121}],104:[function(g,u,A){var a=g("big-rat/add");u.exports=function(g,q){for(var v=g.length,f=Array(v),e=0;e<v;++e)f[e]=a(g[e],q[e]);return f}},{"big-rat/add":39}],105:[function(g,u,A){u.exports=function(g){for(var q=Array(g.length),v=0;v<g.length;++v)q[v]=a(g[v]);return q};var a=g("big-rat")},{"big-rat":42}],106:[function(g,u,A){var a=g("big-rat"),r=g("big-rat/mul");u.exports=function(g,v){for(var f=a(v),e=g.length,k=Array(e),p=0;p<e;++p)k[p]=r(g[p],
f);return k}},{"big-rat":42,"big-rat/mul":51}],107:[function(g,u,A){var a=g("big-rat/sub");u.exports=function(g,q){for(var v=g.length,f=Array(v),e=0;e<v;++e)f[e]=a(g[e],q[e]);return f}},{"big-rat/sub":53}],108:[function(g,u,A){function a(a,d){for(var e=Array(a.length-1),f=1;f<a.length;++f)for(var k=e[f-1]=Array(a.length-1),g=0,m=0;g<a.length;++g)g!==d&&(k[m++]=a[f][g]);return e}function r(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var d=a.length>>1;return["sum(",
r(a.slice(0,d)),",",r(a.slice(d)),")"].join("")}function q(a,d){if("m"===a.charAt(0)){if("w"===d.charAt(0)){var e=a.split("[");return["w",d.substr(1),"m",e[0].substr(1)].join("")}return["prod(",a,",",d,")"].join("")}return q(d,a)}function v(c){if(2===c.length)return[["diff(",q(c[0][0],c[1][1]),",",q(c[1][0],c[0][1]),")"].join("")];for(var d=[],e=0;e<c.length;++e)d.push(["scale(",r(v(a(c,e))),",",e&1?"-":"",c[0][e],")"].join(""));return d}function f(a,d){for(var e=[],f=0;f<d-2;++f)e.push(["prod(m",
a,"[",f,"],m",a,"[",f,"])"].join(""));return r(e)}function e(c){for(var d=[],e=[],k=Array(c),g=0;g<c;++g){k[g]=Array(c);for(var m=0;m<c;++m)k[g][m]=["m",m,"[",c-g-2,"]"].join("")}for(g=0;g<c;++g)k[0][g]="1",k[c-1][g]="w"+g;for(g=0;g<c;++g)0===(g&1)?d.push.apply(d,v(a(k,g))):e.push.apply(e,v(a(k,g)));d=r(d);e=r(e);k="exactInSphere"+c;m=[];for(g=0;g<c;++g)m.push("m"+g);m=["function ",k,"(",m.join(),"){"];for(g=0;g<c;++g){m.push("var w",g,"=",f(g,c),";");for(var q=0;q<c;++q)q!==g&&m.push("var w",g,"m",
q,"=scale(w",g,",m",q,"[0]);")}m.push("var p=",d,",n=",e,",d=diff(p,n);return d[d.length-1];}return ",k);return(new Function("sum","diff","prod","scale",m.join("")))(J,z,p,y)}function k(a){var d=m[a.length];d||(d=m[a.length]=e(a.length));return d.apply(void 0,a)}var p=g("two-product"),J=g("robust-sum"),z=g("robust-subtract"),y=g("robust-scale"),m=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=m.length;)m.push(e(m.length));for(var a=[],d=["slow"],f=0;6>=f;++f)a.push("a"+
f),d.push("o"+f);for(var g=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],f=2;6>=f;++f)g.push("case ",f,":return o",f,"(",a.slice(0,f).join(),");");g.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");d.push(g.join(""));a=Function.apply(void 0,d);u.exports=a.apply(void 0,[k].concat(m));for(f=0;6>=f;++f)u.exports[f]=m[f]})()},{"robust-scale":111,"robust-subtract":113,"robust-sum":114,
"two-product":124}],109:[function(g,u,A){function a(a,d){for(var e=Array(a.length-1),f=1;f<a.length;++f)for(var k=e[f-1]=Array(a.length-1),g=0,m=0;g<a.length;++g)g!==d&&(k[m++]=a[f][g]);return e}function r(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var d=a.length>>1;return["sum(",r(a.slice(0,d)),",",r(a.slice(d)),")"].join("")}function q(c){if(2===c.length)return[["sum(prod(",c[0][0],",",c[1][1],"),prod(-",c[0][1],",",c[1][0],"))"].join("")];for(var d=
[],e=0;e<c.length;++e)d.push(["scale(",r(q(a(c,e))),",",e&1?"-":"",c[0][e],")"].join(""));return d}function v(c){for(var d=[],f=[],g=Array(c),m=0;m<c;++m){g[m]=Array(c);for(var v=0;v<c;++v)g[m][v]=["m",v,"[",c-m-1,"]"].join("")}m=[];for(v=0;v<c;++v)0===(v&1)?d.push.apply(d,q(a(g,v))):f.push.apply(f,q(a(g,v))),m.push("m"+v);d=r(d);f=r(f);c="orientation"+c+"Exact";c=["function ",c,"(",m.join(),"){var p=",d,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",c].join("");return(new Function("sum","prod",
"scale","sub",c))(k,e,p,J)}function f(a){var d=m[a.length];d||(d=m[a.length]=v(a.length));return d.apply(void 0,a)}var e=g("two-product"),k=g("robust-sum"),p=g("robust-scale"),J=g("robust-subtract"),z=v(3),y=v(4),m=[function(){return 0},function(){return 0},function(a,d){return d[0]-a[0]},function(a,d,e){var f=(a[1]-e[1])*(d[0]-e[0]),k=(a[0]-e[0])*(d[1]-e[1]),g=f-k;if(0<f){if(0>=k)return g;f+=k}else if(0>f){if(0<=k)return g;f=-(f+k)}else return g;f*=3.3306690738754716E-16;return g>=f||g<=-f?g:z(a,
d,e)},function(a,d,e,f){var k=a[0]-f[0],g=d[0]-f[0],m=e[0]-f[0],q=a[1]-f[1],p=d[1]-f[1],r=e[1]-f[1],b=a[2]-f[2],l=d[2]-f[2],v=e[2]-f[2],u=g*r,z=m*p,m=m*q,r=k*r,k=k*p,q=g*q,g=b*(u-z)+l*(m-r)+v*(k-q),b=7.771561172376103E-16*((Math.abs(u)+Math.abs(z))*Math.abs(b)+(Math.abs(m)+Math.abs(r))*Math.abs(l)+(Math.abs(k)+Math.abs(q))*Math.abs(v));return g>b||-g>b?g:y(a,d,e,f)}];(function(){for(;5>=m.length;)m.push(v(m.length));for(var a=[],d=["slow"],e=0;5>=e;++e)a.push("a"+e),d.push("o"+e);for(var k=["function getOrientation(",
a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],e=2;5>=e;++e)k.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");k.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");d.push(k.join(""));a=Function.apply(void 0,d);u.exports=a.apply(void 0,[f].concat(m));for(e=0;5>=e;++e)u.exports[e]=m[e]})()},{"robust-scale":111,"robust-subtract":113,"robust-sum":114,"two-product":124}],110:[function(g,u,A){var a=
g("robust-sum"),r=g("robust-scale");u.exports=function(g,v){if(1===g.length)return r(v,g[0]);if(1===v.length)return r(g,v[0]);if(0===g.length||0===v.length)return[0];var f=[0];if(g.length<v.length)for(var e=0;e<g.length;++e)f=a(f,r(v,g[e]));else for(e=0;e<v.length;++e)f=a(f,r(g,v[e]));return f}},{"robust-scale":111,"robust-sum":114}],111:[function(g,u,A){var a=g("two-product"),r=g("two-sum");u.exports=function(g,v){var f=g.length;if(1===f)return f=a(g[0],v),f[0]?f:[f[1]];var e=Array(2*f),k=[.1,.1],
p=[.1,.1],u=0;a(g[0],v,k);k[0]&&(e[u++]=k[0]);for(var z=1;z<f;++z){a(g[z],v,p);r(k[1],p[0],k);k[0]&&(e[u++]=k[0]);var y=p[1],m=k[1],c=y+m,y=m-(c-y);k[1]=c;y&&(e[u++]=y)}k[1]&&(e[u++]=k[1]);0===u&&(e[u++]=0);e.length=u;return e}},{"two-product":124,"two-sum":125}],112:[function(g,u,A){u.exports=function(g,q,v,f){var e=a(g,v,f),k=a(q,v,f);if(0<e&&0<k||0>e&&0>k)return!1;var p=a(v,g,q),u=a(f,g,q);if(0<p&&0<u||0>p&&0>u)return!1;if(0===e&&0===k&&0===p&&0===u){a:{for(e=0;2>e;++e){var k=g[e],p=q[e],u=Math.max(k,
p),z=v[e],y=f[e],m=Math.min(z,y);if(Math.max(z,y)<Math.min(k,p)||u<m){g=!1;break a}}g=!0}return g}return!0};var a=g("robust-orientation")[3]},{"robust-orientation":109}],113:[function(g,u,A){u.exports=function(a,g){var q=a.length|0,v=g.length|0;if(1===q&&1===v){var v=a[0],f=-g[0],q=v+f,e=q-v,q=(v=v-(q-e)+(f-e))?[v,q]:[q];return q}var f=Array(q+v),k=e=0,p=0,u=Math.abs,z=a[k],y=u(z),m=-g[p],c=u(m),d,h;y<c?(h=z,k+=1,k<q&&(z=a[k],y=u(z))):(h=m,p+=1,p<v&&(m=-g[p],c=u(m)));k<q&&y<c||p>=v?(d=z,k+=1,k<q&&
(z=a[k],y=u(z))):(d=m,p+=1,p<v&&(m=-g[p],c=u(m)));var A=d+h;h-=A-d;for(var w=A,L;k<q&&p<v;)y<c?(d=z,k+=1,k<q&&(z=a[k],y=u(z))):(d=m,p+=1,p<v&&(m=-g[p],c=u(m))),A=d+h,d=A-d,(d=h-d)&&(f[e++]=d),d=w+A,L=d-w,h=d-L,A-=L,w-=h,h=w+A,w=d;for(;k<q;)d=z,A=d+h,d=A-d,(d=h-d)&&(f[e++]=d),d=w+A,L=d-w,h=d-L,A-=L,w-=h,h=w+A,w=d,k+=1,k<q&&(z=a[k]);for(;p<v;)d=m,A=d+h,d=A-d,(d=h-d)&&(f[e++]=d),d=w+A,L=d-w,h=d-L,A-=L,w-=h,h=w+A,w=d,p+=1,p<v&&(m=-g[p]);h&&(f[e++]=h);w&&(f[e++]=w);e||(f[e++]=0);f.length=e;return f}},
{}],114:[function(g,u,A){u.exports=function(a,g){var q=a.length|0,v=g.length|0;if(1===q&&1===v){var v=a[0],f=g[0],q=v+f,e=q-v,q=(v=v-(q-e)+(f-e))?[v,q]:[q];return q}var f=Array(q+v),k=e=0,p=0,u=Math.abs,z=a[k],y=u(z),m=g[p],c=u(m),d,h;y<c?(h=z,k+=1,k<q&&(z=a[k],y=u(z))):(h=m,p+=1,p<v&&(m=g[p],c=u(m)));k<q&&y<c||p>=v?(d=z,k+=1,k<q&&(z=a[k],y=u(z))):(d=m,p+=1,p<v&&(m=g[p],c=u(m)));var A=d+h;h-=A-d;for(var w=A,L;k<q&&p<v;)y<c?(d=z,k+=1,k<q&&(z=a[k],y=u(z))):(d=m,p+=1,p<v&&(m=g[p],c=u(m))),A=d+h,d=A-
d,(d=h-d)&&(f[e++]=d),d=w+A,L=d-w,h=d-L,A-=L,w-=h,h=w+A,w=d;for(;k<q;)d=z,A=d+h,d=A-d,(d=h-d)&&(f[e++]=d),d=w+A,L=d-w,h=d-L,A-=L,w-=h,h=w+A,w=d,k+=1,k<q&&(z=a[k]);for(;p<v;)d=m,A=d+h,d=A-d,(d=h-d)&&(f[e++]=d),d=w+A,L=d-w,h=d-L,A-=L,w-=h,h=w+A,w=d,p+=1,p<v&&(m=g[p]);h&&(f[e++]=h);w&&(f[e++]=w);e||(f[e++]=0);f.length=e;return f}},{}],115:[function(g,u,A){arguments[4][56][0].apply(A,arguments)},{dup:56}],116:[function(g,u,A){function a(a){this.roots=Array(a);this.ranks=Array(a);for(var g=0;g<a;++g)this.roots[g]=
g,this.ranks[g]=0}"use restrict";u.exports=a;a.prototype.length=function(){return this.roots.length};a.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.prototype.find=function(a){for(var g=this.roots;g[a]!==a;){var v=g[a];g[a]=g[v];a=v}return a};a.prototype.link=function(a,g){var v=this.find(a),f=this.find(g);if(v!==f){var e=this.ranks,k=this.roots,p=e[v],u=e[f];p<u?k[v]=f:u<p?k[f]=v:(k[f]=v,++e[v])}}},{}],117:[function(g,u,A){function a(a,e){var f=
a.length,c=a.length-e.length,d=Math.min;if(c)return c;switch(f){case 0:return 0;case 1:return a[0]-e[0];case 2:return(f=a[0]+a[1]-e[0]-e[1])?f:d(a[0],a[1])-d(e[0],e[1]);case 3:var c=a[0]+a[1],h=e[0]+e[1];if(f=c+a[2]-(h+e[2]))return f;var g=d(a[0],a[1]),k=d(e[0],e[1]);return(f=d(g,a[2])-d(k,e[2]))?f:d(g+a[2],c)-d(k+e[2],h);default:d=a.slice(0);d.sort();h=e.slice(0);h.sort();for(g=0;g<f;++g)if(c=d[g]-h[g])return c;return 0}}function r(e,f){return a(e[0],f[0])}function q(e,f){if(f){for(var g=e.length,
c=Array(g),d=0;d<g;++d)c[d]=[e[d],f[d]];c.sort(r);for(d=0;d<g;++d)e[d]=c[d][0],f[d]=c[d][1]}else e.sort(a);return e}function v(e){if(0===e.length)return[];for(var f=1,g=e.length,c=1;c<g;++c){var d=e[c];a(d,e[c-1])&&(c===f?f++:e[f++]=d)}e.length=f;return e}function f(e,f){for(var g=0,c=e.length-1,d=-1;g<=c;){var h=g+c>>1,k=a(e[h],f);0>=k?(0===k&&(d=h),g=h+1):0<k&&(c=h-1)}return d}function e(e,g){for(var k=Array(e.length),c=0,d=k.length;c<d;++c)k[c]=[];for(var d=[],c=0,h=g.length;c<h;++c)for(var q=
g[c],r=q.length,v=1,u=1<<r;v<u;++v){d.length=p.popCount(v);for(var A=0,J=0;J<r;++J)v&1<<J&&(d[A++]=q[J]);A=f(e,d);if(!(0>A))for(;!(k[A++].push(c),A>=e.length||0!==a(e[A],d)););}return k}function k(a,e){if(0>e)return[];for(var f=[],c=(1<<e+1)-1,d=0;d<a.length;++d)for(var h=a[d],g=c;g<1<<h.length;g=p.nextCombination(g)){for(var k=Array(e+1),r=0,v=0;v<h.length;++v)g&1<<v&&(k[r++]=h[v]);f.push(k)}return q(f)}"use restrict";var p=g("bit-twiddle"),J=g("union-find");A.dimension=function(a){for(var e=0,f=
Math.max,c=0,d=a.length;c<d;++c)e=f(e,a[c].length);return e-1};A.countVertices=function(a){for(var e=-1,f=Math.max,c=0,d=a.length;c<d;++c)for(var h=a[c],g=0,k=h.length;g<k;++g)e=f(e,h[g]);return e+1};A.cloneCells=function(a){for(var e=Array(a.length),f=0,c=a.length;f<c;++f)e[f]=a[f].slice(0);return e};A.compareCells=a;A.normalize=q;A.unique=v;A.findCell=f;A.incidence=e;A.dual=function(a,f){if(!f)return e(v(k(a,0)),a,0);for(var g=Array(f),c=0;c<f;++c)g[c]=[];for(var c=0,d=a.length;c<d;++c)for(var h=
a[c],q=0,p=h.length;q<p;++q)g[h[q]].push(c);return g};A.explode=function(a){for(var e=[],f=0,c=a.length;f<c;++f)for(var d=a[f],h=d.length|0,g=1,k=1<<h;g<k;++g){for(var p=[],r=0;r<h;++r)g>>>r&1&&p.push(d[r]);e.push(p)}return q(e)};A.skeleton=k;A.boundary=function(a){for(var e=[],f=0,c=a.length;f<c;++f)for(var d=a[f],h=0,g=d.length;h<g;++h){for(var k=Array(d.length-1),p=0,r=0;p<g;++p)p!==h&&(k[r++]=d[p]);e.push(k)}return q(e)};A.connectedComponents=function(a,e){if(e){for(var g=new J(e),c=0;c<a.length;++c)for(var d=
a[c],h=0;h<d.length;++h)for(var p=h+1;p<d.length;++p)g.link(d[h],d[p]);d=[];h=g.ranks;for(c=0;c<h.length;++c)h[c]=-1;for(c=0;c<a.length;++c)p=g.find(a[c][0]),0>h[p]?(h[p]=d.length,d.push([a[c].slice(0)])):d[h[p]].push(a[c].slice(0));return d}g=v(q(k(a,0)));c=new J(g.length);for(d=0;d<a.length;++d)for(h=a[d],p=0;p<h.length;++p)for(var r=f(g,[h[p]]),u=p+1;u<h.length;++u)c.link(r,f(g,[h[u]]));h=[];p=c.ranks;for(d=0;d<p.length;++d)p[d]=-1;for(d=0;d<a.length;++d)r=c.find(f(g,[a[d][0]])),0>p[r]?(p[r]=h.length,
h.push([a[d].slice(0)])):h[p[r]].push(a[d].slice(0));return h}},{"bit-twiddle":115,"union-find":116}],118:[function(g,u,A){u.exports=function(g,v,f){function e(b){if(G[b])return Infinity;var c=A[b],d=w[b];if(0>c||0>d)return Infinity;c=v[c];d=v[d];return Math.abs(a(v[b],c,d))/Math.sqrt(Math.pow(c[0]-d[0],2)+Math.pow(c[1]-d[1],2))}function k(a,c){var d=b[a],e=b[c];b[a]=e;b[c]=d;l[d]=c;l[e]=a}function p(a){for(var c=L[b[a]];;){var d=c,e=2*a+1,f=2*(a+1),h=a;if(e<x){var g=L[b[e]];g<d&&(h=e,d=g)}f<x&&L[b[f]]<
d&&(h=f);if(h===a)return a;k(a,h);a=h}}function u(a){for(var c=L[b[a]];0<a;){var d;d=a&1?a-1>>1:(a>>1)-1;if(0<=d&&c<L[b[d]])k(a,d),a=d;else return a}}function z(){if(0<x){var a=b[0];k(0,x-1);--x;p(0);return a}return-1}function y(a,c){var d=b[a];if(L[d]===c)return a;L[d]=-Infinity;u(a);z();L[d]=c;x+=1;return u(x-1)}function m(a){if(!G[a]){G[a]=!0;var b=A[a];a=w[a];0<=A[a]&&(A[a]=b);0<=w[b]&&(w[b]=a);0<=l[b]&&y(l[b],e(b));0<=l[a]&&y(l[a],e(a))}}function c(a,b){if(0>a[b])return b;var c=b,d=b;do{var e=
a[d];if(!G[d]||0>e||e===d)break;d=e;e=a[d];if(!G[d]||0>e||e===d)break;d=e;c=a[c]}while(c!==d);for(c=b;c!==d;c=a[c])a[c]=d;return d}for(var d=v.length,h=g.length,A=Array(d),w=Array(d),L=Array(d),G=Array(d),E=0;E<d;++E)A[E]=w[E]=-1,L[E]=Infinity,G[E]=!1;for(E=0;E<h;++E){var ta=g[E];if(2!==ta.length)throw Error("Input must be a graph");var B=ta[1],ta=ta[0];w[ta]=-1!==w[ta]?-2:B;A[B]=-1!==A[B]?-2:ta}for(var b=[],l=Array(d),E=0;E<d;++E)Infinity>(L[E]=e(E))?(l[E]=b.length,b.push(E)):l[E]=-1;for(var x=b.length,
E=x>>1;0<=E;--E)p(E);for(;;){E=z();if(0>E||L[E]>f)break;m(E)}f=[];for(E=0;E<d;++E)G[E]||(l[E]=f.length,f.push(v[E].slice()));var R=[];g.forEach(function(a){var b=c(A,a[0]);a=c(w,a[1]);0<=b&&0<=a&&b!==a&&(b=l[b],a=l[a],b!==a&&R.push([b,a]))});r.unique(r.normalize(R));return{positions:f,edges:R}};var a=g("robust-orientation"),r=g("simplicial-complex")},{"robust-orientation":109,"simplicial-complex":117}],119:[function(g,u,A){function a(a,g){var f,e;if(g[0][0]<g[1][0])f=g[0],e=g[1];else if(g[0][0]>g[1][0])f=
g[1],e=g[0];else{f=Math.min(a[0][1],a[1][1]);e=Math.max(a[0][1],a[1][1]);var k=Math.min(g[0][1],g[1][1]),p=Math.max(g[0][1],g[1][1]);return e<k?e-k:f>p?f-p:e-p}a[0][1]<a[1][1]?(p=a[0],k=a[1]):(p=a[1],k=a[0]);return(p=r(e,f,p))?p:(p=r(e,f,k))?p:k-e}u.exports=function(g,v){var f,e;if(v[0][0]<v[1][0])f=v[0],e=v[1];else if(v[0][0]>v[1][0])f=v[1],e=v[0];else return a(v,g);var k,p;if(g[0][0]<g[1][0])k=g[0],p=g[1];else if(g[0][0]>g[1][0])k=g[1],p=g[0];else return-a(g,v);var u=r(f,e,p),z=r(f,e,k);if(0>u){if(0>=
z)return u}else if(0<u){if(0<=z)return u}else if(z)return z;u=r(p,k,e);z=r(p,k,f);if(0>u){if(0>=z)return u}else if(0<u){if(0<=z)return u}else if(z)return z;return e[0]-p[0]};var r=g("robust-orientation")},{"robust-orientation":109}],120:[function(g,u,A){arguments[4][89][0].apply(A,arguments)},{dup:89}],121:[function(g,u,A){function a(a,e,f){this.slabs=a;this.coordinates=e;this.horizontal=f}function r(a,e){return a.y-e}function q(a,e){for(var f=null;a;){var c=a.key,d,h;c[0][0]<c[1][0]?(d=c[0],h=c[1]):
(d=c[1],h=c[0]);d=p(d,h,e);if(0>d)a=a.left;else if(0<d)if(e[0]!==c[1][0])f=a,a=a.right;else{if(c=q(a.right,e))return c;a=a.left}else{if(e[0]!==c[1][0])return a;if(c=q(a.right,e))return c;a=a.left}}return f}function v(a,e,f,c){this.y=a;this.index=e;this.start=f;this.closed=c}function f(a,e,f,c){this.x=a;this.segment=e;this.create=f;this.index=c}u.exports=function(e){for(var g=e.length,m=2*g,c=Array(m),d=0;d<g;++d){var h=e[d],p=h[0][0]<h[1][0];c[2*d]=new f(h[0][0],h,p,d);c[2*d+1]=new f(h[1][0],h,!p,
d)}c.sort(function(a,c){var d=a.x-c.x;return d?d:(d=a.create-c.create)?d:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(c.segment[0][1],c.segment[1][1])});e=k(J);g=[];h=[];p=[];for(d=0;d<m;){for(var q=c[d].x,r=[];d<m;){var u=c[d];if(u.x!==q)break;d+=1;u.segment[0][0]===u.x&&u.segment[1][0]===u.x?u.create&&(u.segment[0][1]<u.segment[1][1]?(r.push(new v(u.segment[0][1],u.index,!0,!0)),r.push(new v(u.segment[1][1],u.index,!1,!1))):(r.push(new v(u.segment[1][1],u.index,!0,!1)),r.push(new v(u.segment[0][1],
u.index,!1,!0)))):e=u.create?e.insert(u.segment,u.index):e.remove(u.segment)}g.push(e.root);h.push(q);p.push(r)}return new a(g,h,p)};var e=g("binary-search-bounds"),k=g("functional-red-black-tree"),p=g("robust-orientation"),J=g("./lib/order-segments");a.prototype.castUp=function(a){var f=e.le(this.coordinates,a[0]);if(0>f)return-1;var g=q(this.slabs[f],a),c=-1;g&&(c=g.value);if(this.coordinates[f]===a[0]){var d=null;g&&(d=g.key);0<f&&(g=q(this.slabs[f-1],a))&&(d?0<J(g.key,d)&&(d=g.key,c=g.value):
(c=g.value,d=g.key));g=this.horizontal[f];if(0<g.length){var h=e.ge(g,a[1],r);if(h<g.length){f=g[h];if(a[1]===f.y){if(f.closed)return f.index;for(;h<g.length-1&&g[h+1].y===a[1];)if(h+=1,f=g[h],f.closed)return f.index;if(f.y===a[1]&&!f.start){h+=1;if(h>=g.length)return c;f=g[h]}}f.start?d?(a=p(d[0],d[1],[a[0],f.y]),d[0][0]>d[1][0]&&(a=-a),0<a&&(c=f.index)):c=f.index:f.y!==a[1]&&(c=f.index)}}}return c}},{"./lib/order-segments":119,"binary-search-bounds":120,"functional-red-black-tree":82,"robust-orientation":109}],
122:[function(g,u,A){function a(a,f){var g=a.length,v=["'use strict';"],u="surfaceNets"+a.join("_")+"d"+f;v.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");"generic"===f&&v.push("getters:[0],");for(var y=[],m=[],c=0;c<g;++c)y.push("d"+c),m.push("d"+c);for(c=0;c<1<<g;++c)y.push("v"+c),m.push("v"+c);for(c=0;c<1<<g;++c)y.push("p"+c),m.push("p"+c);y.push("a","b","c");m.push("a","c");v.push("vertex:function vertexFunc(",
y.join(),"){");y=[];for(c=0;c<1<<g;++c)y.push("(p"+c+"<<"+c+")");v.push("var m=(",y.join("+"),")|0;if(m===0||m===",(1<<(1<<g))-1,"){return}");var y=[],d=[];128>=1<<(1<<g)?(v.push("switch(m){"),d=v):v.push("switch(m>>>7){");for(c=0;c<1<<(1<<g);++c){128<1<<(1<<g)&&0===c%128&&(0<y.length&&d.push("}}"),d="vExtra"+y.length,v.push("case ",c>>>7,":",d,"(m&0x7f,",m.join(),");break;"),d=["function ",d,"(m,",m.join(),"){switch(m){"],y.push(d));d.push("case ",c&127,":");for(var h=Array(g),A=Array(g),w=Array(g),
L=Array(g),G=0,E=0;E<g;++E)h[E]=[],A[E]=[],w[E]=0,L[E]=0;for(E=0;E<1<<g;++E)for(var ta=0;ta<g;++ta){var B=E^1<<ta;if(!(B>E)&&!(c&1<<B)!==!(c&1<<E)){var b=1;c&1<<B?A[ta].push("v"+B+"-v"+E):(A[ta].push("v"+E+"-v"+B),b=-b);0>b?(h[ta].push("-v"+E+"-v"+B),w[ta]+=2):(h[ta].push("v"+E+"+v"+B),w[ta]-=2);G+=1;for(b=0;b<g;++b)b!==ta&&(B&1<<b?L[b]+=1:--L[b])}}E=[];for(ta=0;ta<g;++ta)0===h[ta].length?E.push("d"+ta+"-0.5"):(B="",0>w[ta]?B=w[ta]+"*c":0<w[ta]&&(B="+"+w[ta]+"*c"),E.push("d"+ta+"-"+(.5+L[ta]/G*.5)+
"-"+h[ta].length/G*.5+"*("+h[ta].join("+")+B+")/("+A[ta].join("+")+")"));d.push("a.push([",E.join(),"]);","break;")}v.push("}},");0<y.length&&d.push("}}");m=[];for(c=0;c<1<<g-1;++c)m.push("v"+c);m.push("c0","c1","p0","p1","a","b","c");v.push("cell:function cellFunc(",m.join(),"){");g=q(g-1);v.push("if(p0){b.push(",g.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",g.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),
")}}});function ",u,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",u,";");for(c=0;c<y.length;++c)v.push(y[c].join(""));return(new Function("genContour",v.join("")))(r)}u.exports=function(e,g){if(0>=e.dimension)return{positions:[],cells:[]};if(1===e.dimension){for(var p=v(e,g),q=p.length,r=Array(q),u=Array(q),m=0;m<q;++m)r[m]=[p[m]],u[m]=[m];return{positions:r,cells:u}}p=e.order.join()+"-"+e.dtype;q=f[p];g=+g||0;q||(q=f[p]=a(e.order,
e.dtype));return q(e,g)};var r=g("ndarray-extract-contour"),q=g("triangulate-hypercube"),v=g("zero-crossings"),f={}},{"ndarray-extract-contour":94,"triangulate-hypercube":123,"zero-crossings":132}],123:[function(g,u,A){u.exports=function(g){if(0>g)return[];if(0===g)return[[0]];for(var f=Math.round(q(g+1))|0,e=[],k=0;k<f;++k){for(var p=a.unrank(g,k),u=[0],z=0,y=0;y<p.length;++y)z+=1<<p[y],u.push(z);1>r(p)&&(u[0]=z,u[g]=0);e.push(u)}return e};var a=g("permutation-rank"),r=g("permutation-parity"),q=
g("gamma")},{gamma:83,"permutation-parity":97,"permutation-rank":98}],124:[function(g,u,A){u.exports=function(g,q,v){var f=g*q,e=a*g,e=e-(e-g);g-=e;var k=a*q,k=k-(k-q);q-=k;q=g*q-(f-e*k-g*k-e*q);return v?(v[0]=q,v[1]=f,v):[q,f]};var a=+(Math.pow(2,27)+1)},{}],125:[function(g,u,A){u.exports=function(a,g,q){var v=a+g,f=v-a;g-=f;a-=v-f;return q?(q[0]=a+g,q[1]=v,q):[a+g,v]}},{}],126:[function(g,u,A){(function(a){function r(a){if(a){var b=w.log2(a.length||a.byteLength);l[b].push(a)}}function q(a){a=w.nextPow2(a);
var b=w.log2(a),b=l[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function v(a){return new Uint8Array(q(a),0,a)}function f(a){return new Uint16Array(q(2*a),0,a)}function e(a){return new Uint32Array(q(4*a),0,a)}function k(a){return new Int8Array(q(a),0,a)}function p(a){return new Int16Array(q(2*a),0,a)}function u(a){return new Int32Array(q(4*a),0,a)}function z(a){return new Float32Array(q(4*a),0,a)}function y(a){return new Float64Array(q(8*a),0,a)}function m(a){return E?new Uint8ClampedArray(q(a),
0,a):v(a)}function c(a){return ta?new BigUint64Array(q(8*a),0,a):null}function d(a){return B?new BigInt64Array(q(8*a),0,a):null}function h(a){return new DataView(q(a),0,a)}function H(a){a=w.nextPow2(a);var b=w.log2(a),b=x[b];return 0<b.length?b.pop():new G(a)}var w=g("bit-twiddle"),L=g("dup"),G=g("buffer").Buffer;a.__TYPEDARRAY_POOL||(a.__TYPEDARRAY_POOL={UINT8:L([32,0]),UINT16:L([32,0]),UINT32:L([32,0]),BIGUINT64:L([32,0]),INT8:L([32,0]),INT16:L([32,0]),INT32:L([32,0]),BIGINT64:L([32,0]),FLOAT:L([32,
0]),DOUBLE:L([32,0]),DATA:L([32,0]),UINT8C:L([32,0]),BUFFER:L([32,0])});var E="undefined"!==typeof Uint8ClampedArray,ta="undefined"!==typeof BigUint64Array,B="undefined"!==typeof BigInt64Array,b=a.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=L([32,0]));b.BIGUINT64||(b.BIGUINT64=L([32,0]));b.BIGINT64||(b.BIGINT64=L([32,0]));b.BUFFER||(b.BUFFER=L([32,0]));var l=b.DATA,x=b.BUFFER;A.free=function(a){if(G.isBuffer(a))x[w.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&
(a=a.buffer),a){var b=w.log2(a.length||a.byteLength)|0;l[b].push(a)}};A.freeUint8=A.freeUint16=A.freeUint32=A.freeBigUint64=A.freeInt8=A.freeInt16=A.freeInt32=A.freeBigInt64=A.freeFloat32=A.freeFloat=A.freeFloat64=A.freeDouble=A.freeUint8Clamped=A.freeDataView=function(a){r(a.buffer)};A.freeArrayBuffer=r;A.freeBuffer=function(a){x[w.log2(a.length)].push(a)};A.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return q(a);switch(b){case "uint8":return v(a);case "uint16":return f(a);case "uint32":return e(a);
case "int8":return k(a);case "int16":return p(a);case "int32":return u(a);case "float":case "float32":return z(a);case "double":case "float64":return y(a);case "uint8_clamped":return m(a);case "bigint64":return d(a);case "biguint64":return c(a);case "buffer":return H(a);case "data":case "dataview":return h(a);default:return null}};A.mallocArrayBuffer=q;A.mallocUint8=v;A.mallocUint16=f;A.mallocUint32=e;A.mallocInt8=k;A.mallocInt16=p;A.mallocInt32=u;A.mallocFloat32=A.mallocFloat=z;A.mallocFloat64=A.mallocDouble=
y;A.mallocUint8Clamped=m;A.mallocBigUint64=c;A.mallocBigInt64=d;A.mallocDataView=h;A.mallocBuffer=H;A.clearCache=function(){for(var a=0;32>a;++a)b.UINT8[a].length=0,b.UINT16[a].length=0,b.UINT32[a].length=0,b.INT8[a].length=0,b.INT16[a].length=0,b.INT32[a].length=0,b.FLOAT[a].length=0,b.DOUBLE[a].length=0,b.BIGUINT64[a].length=0,b.BIGINT64[a].length=0,b.UINT8C[a].length=0,l[a].length=0,x[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{"bit-twiddle":56,buffer:66,dup:80}],127:[function(g,u,A){function a(a){this.roots=Array(a);this.ranks=Array(a);for(var g=0;g<a;++g)this.roots[g]=g,this.ranks[g]=0}"use restrict";u.exports=a;g=a.prototype;Object.defineProperty(g,"length",{get:function(){return this.roots.length}});g.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};g.find=function(a){for(var g=a,v=this.roots;v[a]!==a;)a=v[a];for(;v[g]!==a;){var f=v[g];v[g]=a;g=f}return a};g.link=
function(a,g){var v=this.find(a),f=this.find(g);if(v!==f){var e=this.ranks,k=this.roots,p=e[v],u=e[f];p<u?k[v]=f:u<p?k[f]=v:(k[f]=v,++e[v])}}},{}],128:[function(g,u,A){u.exports=function(a,g,q){if(0===a.length)return a;if(g){q||a.sort(g);q=1;for(var v=a.length,f=a[0],e=a[0],k=1;k<v;++k)e=f,f=a[k],g(f,e)&&(k===q?q++:a[q++]=f);a.length=q;return a}q||a.sort();g=1;q=a.length;v=a[0];f=a[0];for(e=1;e<q;++e)f=v,v=a[e],v!==f&&(e===g?g++:a[g++]=v);a.length=g;return a}},{}],129:[function(g,u,A){u.exports=function(g,
f){if("object"!==typeof f||null===f)f={};return a(g,f.canvas||r,f.context||q,f)};var a=g("./lib/vtext"),r=null,q=null;"undefined"!==typeof document&&(r=document.createElement("canvas"),r.width=8192,r.height=1024,q=r.getContext("2d"))},{"./lib/vtext":130}],130:[function(g,u,A){function a(a,b,c,d){var e="<"+a+">";a="</"+a+">";for(var f=e.length,h=a.length,g=b[0]===w||b[0]===E,k=0,m=-h;-1<k;){k=c.indexOf(e,k);if(-1===k)break;m=c.indexOf(a,k+f);if(-1===m)break;if(m<=k)break;for(var p=k;p<m+h;++p)if(p<
k+f||p>=m)d[p]=null,c=c.substr(0,p)+" "+c.substr(p+1);else if(null!==d[p]){var n=d[p].indexOf(b[0]);-1===n?d[p]+=b:g&&(d[p]=d[p].substr(0,n+1)+(1+parseInt(d[p][n+1]))+d[p].substr(n+2))}k+=f;k=c.substr(k,m-k).indexOf(e);k=-1!==k?k:m+h}return d}function r(a,b,c){for(var d=b.textAlign||"start",e=b.textBaseline||"alphabetic",f=[1073741824,1073741824],h=[0,0],g=a.length,k=0;k<g;++k)for(var m=a[k],p=0;2>p;++p)f[p]=Math.min(f[p],m[p])|0,h[p]=Math.max(h[p],m[p])|0;var n=0;switch(d){case "center":n=-.5*(f[0]+
h[0]);break;case "right":case "end":n=-h[0];break;case "left":case "start":n=-f[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+d+"'");}var q=0;switch(e){case "hanging":case "top":q=-f[1];break;case "middle":q=-.5*(f[1]+h[1]);break;case "alphabetic":case "ideographic":q=-3*c;break;case "bottom":q=-h[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'");}var r=1/c;"lineHeight"in b?r*=+b.lineHeight:"width"in b?r=b.width/(h[0]-f[0]):"height"in b&&
(r=b.height/(h[1]-f[1]));return a.map(function(a){return[r*(a[0]+n),r*(a[1]+q)]})}function q(e,b,f,g,p,q){function r(){if(""!==T){var a=b.measureText(T).width;b.fillText(T,Wa+W,Ba+da);W+=a}}function u(){return""+Math.round(V)+"px "}function v(a,d){var e=""+b.font;if(!0===q.subscripts){var f=a.indexOf(E),g=d.indexOf(E),f=-1<f?parseInt(a[1+f]):0,g=-1<g?parseInt(d[1+g]):0;f!==g&&(e=e.replace(u(),"?px "),V*=Math.pow(.75,g-f),e=e.replace("?px ",u()));da+=.25*J*(g-f)}!0===q.superscripts&&(f=a.indexOf(w),
g=d.indexOf(w),f=-1<f?parseInt(a[1+f]):0,g=-1<g?parseInt(d[1+g]):0,f!==g&&(e=e.replace(u(),"?px "),V*=Math.pow(.75,g-f),e=e.replace("?px ",u())),da-=.25*J*(g-f));!0===q.bolds&&(g=-1<a.indexOf(c),f=-1<d.indexOf(c),!g&&f&&(e=k?e.replace("italic ","italic bold "):"bold "+e),g&&!f&&(e=e.replace("bold ","")));if(!0===q.italics){var k=-1<a.indexOf(h),g=-1<d.indexOf(h);!k&&g&&(e="italic "+e);k&&!g&&(e=e.replace("italic ",""))}b.font=e}f=f.replace(/\n/g,"");f=!0===q.breaklines?f.replace(/\<br\>/g,"\n"):f.replace(/\<br\>/g,
" ");for(var y="",z=[],n=0;n<f.length;++n)z[n]=y;!0===q.bolds&&(z=a(m,c,f,z));!0===q.italics&&(z=a(d,h,f,z));!0===q.superscripts&&(z=a(H,L,f,z));!0===q.subscripts&&(z=a(G,ta,f,z));for(var t=[],A="",n=0;n<f.length;++n)null!==z[n]&&(A+=f[n],t.push(z[n]));z=A.split("\n");f=z.length;var J=Math.round(p*g),Wa=g,Ba=2*g;p=0;n=f*J+Ba;e.height<n&&(e.height=n);b.fillStyle="#000";b.fillRect(0,0,e.width,e.height);b.fillStyle="#fff";var n,W,da,V,A=0,T="";for(e=0;e<f;++e){var P=z[e]+"\n";W=0;da=e*J;V=g;T="";for(n=
0;n<P.length;++n){var M=n+A<t.length?t[n+A]:t[t.length-1];y===M?T+=P[n]:(r(),T=P[n],void 0!==M&&(v(y,M),y=M))}r();A+=P.length;n=Math.round(W+2*Wa)|0;p<n&&(p=n)}g=p;y=Ba+J*f;return k(b.getImageData(0,0,g,y).data,[y,g,4]).pick(-1,-1,0).transpose(1,0)}function v(a,b,c,d){a=e(a,128);d=d?p(a.cells,a.positions,.25):{edges:a.cells,positions:a.positions};c=r(d.positions,b,c);a=d.edges;d="ccw"===b.orientation;J(c,a);if(b.polygons||b.polygon||b.polyline){b=y(a,c);a=Array(b.length);for(var f=0;f<b.length;++f){for(var g=
b[f],h=Array(g.length),k=0;k<g.length;++k){for(var m=g[k],q=Array(m.length),u=0;u<m.length;++u)q[u]=c[m[u]].slice();d&&q.reverse();h[k]=q}a[f]=h}return a}return b.triangles||b.triangulate||b.triangle?{cells:z(c,a,{delaunay:!1,exterior:!1,interior:!0}),positions:c}:{edges:a,positions:c}}function f(a,b,c){try{return v(a,b,c,!0)}catch(d){}try{return v(a,b,c,!1)}catch(d){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}
u.exports=function(a,b,c,d){var e=64,g=1.25,h={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};d&&(d.size&&0<d.size&&(e=d.size),d.lineSpacing&&0<d.lineSpacing&&(g=d.lineSpacing),d.styletags&&d.styletags.breaklines&&(h.breaklines=d.styletags.breaklines?!0:!1),d.styletags&&d.styletags.bolds&&(h.bolds=d.styletags.bolds?!0:!1),d.styletags&&d.styletags.italics&&(h.italics=d.styletags.italics?!0:!1),d.styletags&&d.styletags.subscripts&&(h.subscripts=d.styletags.subscripts?!0:!1),d.styletags&&
d.styletags.superscripts&&(h.superscripts=d.styletags.superscripts?!0:!1));c.font=[d.fontStyle,d.fontVariant,d.fontWeight,e+"px",d.font].filter(function(a){return a}).join(" ");c.textAlign="start";c.textBaseline="alphabetic";c.direction="ltr";a=q(b,c,a,e,g,h);return f(a,d,e)};u.exports.processPixels=f;var e=g("surface-nets"),k=g("ndarray"),p=g("simplify-planar-graph"),J=g("clean-pslg"),z=g("cdt2d"),y=g("planar-graph-to-polyline"),m="b",c="b|",d="i",h="i|",H="sup",w="+",L="+1",G="sub",E="-",ta="-1"},
{cdt2d:67,"clean-pslg":72,ndarray:95,"planar-graph-to-polyline":101,"simplify-planar-graph":118,"surface-nets":122}],131:[function(g,u,A){u.exports=g("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":76}],132:[function(g,u,A){u.exports=function(g,q){var u=[];q=+q||0;a(g.hi(g.shape[0]-1),u,q);return u};var a=g("./lib/zc-core")},
{"./lib/zc-core":131}],133:[function(g,u,A){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var r=g("./lib/util/check"),q=g("./lib/util/extend"),v=g("./lib/dynamic"),f=g("./lib/util/raf"),e=g("./lib/util/clock"),k=g("./lib/strings"),p=g("./lib/webgl"),J=g("./lib/extension"),z=g("./lib/limits"),y=g("./lib/buffer"),m=g("./lib/elements"),c=g("./lib/texture"),d=g("./lib/renderbuffer"),h=g("./lib/framebuffer"),H=g("./lib/attribute"),w=g("./lib/shader"),L=g("./lib/read"),G=g("./lib/core"),
E=g("./lib/stats"),ta=g("./lib/timer");u.exports=function(g){function b(){if(0===za.length)T&&T.update(),Ga=null;else{Ga=f.next(b);D();for(var a=za.length-1;0<=a;--a){var c=za[a];c&&c(U,null,0)}Z.flush();T&&T.update()}}function l(){!Ga&&0<za.length&&(Ga=f.next(b))}function u(){Ga&&(f.cancel(b),Ga=null)}function A(a){a.preventDefault();Wa=!0;u();ja.forEach(function(a){a()})}function C(a){Z.getError();Wa=!1;Ba.restore();ga.restore();ra.restore();X.restore();la.restore();oa.restore();N.restore();T&&
T.restore();ya.procs.refresh();l();ma.forEach(function(a){a()})}function F(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(v.isDynamic(f))e[b]=v.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(v.isDynamic(f[g])){e[b]=v.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<a;)n.push(null);return n}r(!!a,"invalid args to regl({...})");r.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||
{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=q({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=ya.compile(a,
f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return q(function(a,b){var d;Wa&&r.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,
a)},{stats:g,destroy:function(){h.destroy()}})}function ia(a,b){var c=0;ya.procs.poll();var d=b.color;d&&(Z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Z.clearDepth(+b.depth),c|=256);"stencil"in b&&(Z.clearStencil(b.stencil|0),c|=1024);r(!!c,"called regl.clear with no buffer specified");Z.clear(c)}function I(b){r.type(b,"function","regl.frame() callback must be a function");za.push(b);l();return{cancel:function(){function c(){var b=a(za,c);za[b]=za[za.length-1];--za.length;
0>=za.length&&u()}var d=a(za,b);r(0<=d,"cannot cancel a frame twice");za[d]=c}}}function K(){var a=ua.viewport,b=ua.scissor_box;a[0]=a[1]=b[0]=b[1]=0;U.viewportWidth=U.framebufferWidth=U.drawingBufferWidth=a[2]=b[2]=Z.drawingBufferWidth;U.viewportHeight=U.framebufferHeight=U.drawingBufferHeight=a[3]=b[3]=Z.drawingBufferHeight}function D(){U.tick+=1;U.time=t();K();ya.procs.poll()}function n(){X.refresh();K();ya.procs.refresh();T&&T.update()}function t(){return(e()-P)/1E3}console.log("REGL args are:",
g);g=p(g);console.log("REGL configs are:",g);if(!g)return null;var Z=g.gl,Q=Z.getContextAttributes(),Wa=Z.isContextLost(),Ba=J(Z,g);if(!Ba)return null;var W=k(),da=E(),V=Ba.extensions,T=ta(Z,V),P=e(),M=Z.drawingBufferWidth,S=Z.drawingBufferHeight,U={tick:0,time:0,viewportWidth:M,viewportHeight:S,framebufferWidth:M,framebufferHeight:S,drawingBufferWidth:M,drawingBufferHeight:S,pixelRatio:g.pixelRatio},M={elements:null,primitive:4,count:-1,offset:0,instances:-1},qa=z(Z,V),ra=y(Z,da,g,function(a){return N.destroyBuffer(a)}),
O=m(Z,V,ra,da),N=H(Z,V,qa,da,ra,O,M),ga=w(Z,W,da,g),X=c(Z,V,qa,function(){ya.procs.poll()},U,da,g),la=d(Z,V,qa,da,g),oa=h(Z,V,qa,X,la,da),ya=G(Z,W,V,qa,ra,O,X,oa,{},N,ga,M,U,T,g),W=L(Z,oa,ya.procs.poll,U,Q,V,qa),ua=ya.next,aa=Z.canvas,za=[],ja=[],ma=[],sa=[g.onDestroy],Ga=null;aa&&(aa.addEventListener("webglcontextlost",A,!1),aa.addEventListener("webglcontextrestored",C,!1));var Da=oa.setFBO=F({framebuffer:v.define.call(null,1,"framebuffer")});n();Q=q(F,{clear:function(a){r("object"===typeof a&&a,
"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)Da(q({framebuffer:a.framebuffer.faces[b]},a),ia);else Da(a,ia);else ia(null,a)},prop:v.define.bind(null,1),context:v.define.bind(null,2),"this":v.define.bind(null,3),draw:F({}),buffer:function(a){return ra.create(a,34962,!1,!1)},elements:function(a){return O.create(a,!1)},texture:X.create2D,cube:X.createCube,renderbuffer:la.create,framebuffer:oa.create,framebufferCube:oa.createCube,
vao:N.createVAO,attributes:Q,frame:I,on:function(a,b){r.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return I(b);case "lost":c=ja;break;case "restore":c=ma;break;case "destroy":c=sa;break;default:r.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:qa,hasExtension:function(a){return 0<=qa.extensions.indexOf(a.toLowerCase())},
read:W,destroy:function(){za.length=0;u();aa&&(aa.removeEventListener("webglcontextlost",A),aa.removeEventListener("webglcontextrestored",C));ga.clear();oa.clear();la.clear();N.clear();X.clear();O.clear();ra.clear();T&&T.clear();sa.forEach(function(a){a()})},_gl:Z,_refresh:n,poll:function(){D();T&&T.update()},now:t,stats:da});g.onDone(null,Q);return Q}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,
"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

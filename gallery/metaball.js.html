<!DOCTYPE html>
      <html>
        <head>
          <title>example/metaball.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(g){return"undefined"!=typeof window&&window===g?g:"undefined"!=typeof global?global:g}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(g){return"jscomp_symbol_"+g+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(g){$jscomp.initSymbolIterator();if(g[$jscomp.global.Symbol.iterator])return g[$jscomp.global.Symbol.iterator]();var q=0;return{next:function(){return q==g.length?{done:!0}:{done:!1,value:g[q++]}}}};
$jscomp.arrayFromIterator=function(g){for(var q,z=[];!(q=g.next()).done;)z.push(q.value);return z};$jscomp.arrayFromIterable=function(g){return g instanceof Array?g:$jscomp.arrayFromIterator($jscomp.makeIterator(g))};
$jscomp.inherits=function(g,q){function z(){}z.prototype=q.prototype;g.prototype=new z;g.prototype.constructor=g;for(var a in q)if($jscomp.global.Object.defineProperties){var b=$jscomp.global.Object.getOwnPropertyDescriptor(q,a);b&&$jscomp.global.Object.defineProperty(g,a,b)}else g[a]=q[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(g,q){g instanceof String&&(g=String(g));var z=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},b=(a.next=function(){if(z<g.length){var a=z++;return{value:q(a,g[a]),done:!1}}b.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return b},a);return b};
$jscomp.array.findInternal_=function(g,q,z){g instanceof String&&(g=String(g));for(var a=g.length,b=0;b<a;b++){var x=g[b];if(q.call(z,x,b,g))return{i:b,v:x}}return{i:-1,v:void 0}};
$jscomp.array.from=function(g,q,z){q=void 0===q?function(a){return a}:q;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(g[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();g=g[Symbol.iterator]();for(var b;!(b=g.next()).done;)a.push(q.call(z,b.value))}else{b=g.length;for(var x=0;x<b;x++)a.push(q.call(z,g[x]))}return a};$jscomp.array.of=function(g){for(var q=[],z=0;z<arguments.length;++z)q[z-0]=arguments[z];return $jscomp.array.from(q)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(g,q){return[g,q]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(g){return g})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(g,q){return q})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(g,q,z){var a=this.length;g=Number(g);q=Number(q);z=Number(null!=z?z:a);if(g<q)for(z=Math.min(z,a);q<z;)q in this?this[g++]=this[q++]:(delete this[g++],q++);else for(z=Math.min(z,a+q-g),g+=z-q;z>q;)--z in this?this[--g]=this[z]:delete this[g];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(g,q,z){null!=z&&g.length||(z=this.length||0);z=Number(z);for(q=Number((void 0===q?0:q)||0);q<z;q++)this[q]=g;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(g,q){return $jscomp.array.findInternal_(this,g,q).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(g,q){return $jscomp.array.findInternal_(this,g,q).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(g){g=void 0===g?[]:g;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var q=g.next();!q.done;q=g.next())q=q.value,this.set(q[0],q[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var g=$jscomp.global.Map;if(!g||!g.prototype.entries||!Object.seal)return!1;try{var q=Object.seal({x:4}),z=new g($jscomp.makeIterator([[q,"s"]]));if("s"!=z.get(q)||1!=z.size||z.get({x:4})||z.set({x:4},"t")!=z||2!=z.size)return!1;var a=z.entries(),b=a.next();if(b.done||b.value[0]!=q||"s"!=b.value[1])return!1;b=a.next();return b.done||4!=b.value[0].x||"t"!=b.value[1]||!a.next().done?!1:!0}catch(x){return!1}};
$jscomp.Map.createHead_=function(){var g={};return g.previous=g.next=g.head=g};$jscomp.Map.getId_=function(g){if(!(g instanceof Object))return String(g);$jscomp.Map.key_ in g||g instanceof Object&&Object.isExtensible&&Object.isExtensible(g)&&$jscomp.Map.defineProperty_(g,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in g?g[$jscomp.Map.key_]:" "+g};
$jscomp.Map.prototype.set=function(g,q){var z=this.maybeGetEntry_(g),a=z.id,b=z.list,z=z.entry;b||(b=this.data_[a]=[]);z?z.value=q:(z={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:q},b.push(z),this.head_.previous.next=z,this.head_.previous=z,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(g){var q=this.maybeGetEntry_(g);g=q.id;var z=q.list,a=q.index;return(q=q.entry)&&z?(z.splice(a,1),z.length||delete this.data_[g],q.previous.next=q.next,q.next.previous=q.previous,q.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(g){return!!this.maybeGetEntry_(g).entry};
$jscomp.Map.prototype.get=function(g){return(g=this.maybeGetEntry_(g).entry)&&g.value};$jscomp.Map.prototype.maybeGetEntry_=function(g){var q=$jscomp.Map.getId_(g),z=this.data_[q];if(z)for(var a=0;a<z.length;a++){var b=z[a];if(g!==g&&b.key!==b.key||g===b.key)return{id:q,list:z,index:a,entry:b}}return{id:q,list:z,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(g){return[g.key,g.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(g){return g.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(g){return g.value})};$jscomp.Map.prototype.forEach=function(g,q){for(var z=$jscomp.makeIterator(this.entries()),a=z.next();!a.done;a=z.next())a=a.value,g.call(q,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(g){var q=this,z=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(z){for(;z.head!=q.head_;)z=z.previous;for(;z.next!=z.head;)return z=z.next,{done:!1,value:g(z)};z=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(g,q,z){Object.defineProperty(g,q,{value:String(z)})}:function(g,q,z){g[q]=String(z)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(g){g=Number(g)>>>0;if(0===g)return 32;var q=0;0===(g&4294901760)&&(g<<=16,q+=16);0===(g&4278190080)&&(g<<=8,q+=8);0===(g&4026531840)&&(g<<=4,q+=4);0===(g&3221225472)&&(g<<=2,q+=2);0===(g&2147483648)&&q++;return q};$jscomp.math.imul=function(g,q){g=Number(g);q=Number(q);var z=g&65535,a=q&65535;return z*a+((g>>>16&65535)*a+z*(q>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(g){g=Number(g);return 0===g||isNaN(g)?g:0<g?1:-1};
$jscomp.math.log10=function(g){return Math.log(g)/Math.LN10};$jscomp.math.log2=function(g){return Math.log(g)/Math.LN2};$jscomp.math.log1p=function(g){g=Number(g);if(.25>g&&-.25<g){for(var q=g,z=1,a=g,b=0,x=1;b!=a;)q*=g,x*=-1,a=(b=a)+x*q/++z;return a}return Math.log(1+g)};$jscomp.math.expm1=function(g){g=Number(g);if(.25>g&&-.25<g){for(var q=g,z=1,a=g,b=0;b!=a;)q*=g/++z,a=(b=a)+q;return a}return Math.exp(g)-1};$jscomp.math.cosh=function(g){g=Number(g);return(Math.exp(g)+Math.exp(-g))/2};
$jscomp.math.sinh=function(g){g=Number(g);return 0===g?g:(Math.exp(g)-Math.exp(-g))/2};$jscomp.math.tanh=function(g){g=Number(g);if(0===g)return g;var q=Math.exp(2*-Math.abs(g)),q=(1-q)/(1+q);return 0>g?-q:q};$jscomp.math.acosh=function(g){g=Number(g);return Math.log(g+Math.sqrt(g*g-1))};$jscomp.math.asinh=function(g){g=Number(g);if(0===g)return g;var q=Math.log(Math.abs(g)+Math.sqrt(g*g+1));return 0>g?-q:q};
$jscomp.math.atanh=function(g){g=Number(g);return($jscomp.math.log1p(g)-$jscomp.math.log1p(-g))/2};
$jscomp.math.hypot=function(g,q,z){for(var a=[],b=2;b<arguments.length;++b)a[b-2]=arguments[b];g=Number(g);q=Number(q);for(var x=Math.max(Math.abs(g),Math.abs(q)),l=$jscomp.makeIterator(a),b=l.next();!b.done;b=l.next())x=Math.max(x,Math.abs(b.value));if(1E100<x||1E-100>x){g/=x;q/=x;l=g*g+q*q;a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())b=b.value,b=Number(b)/x,l+=b*b;return Math.sqrt(l)*x}x=g*g+q*q;a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next())b=b.value,b=Number(b),x+=
b*b;return Math.sqrt(x)};$jscomp.math.trunc=function(g){g=Number(g);if(isNaN(g)||Infinity===g||-Infinity===g||0===g)return g;var q=Math.floor(Math.abs(g));return 0>g?-q:q};$jscomp.math.cbrt=function(g){if(0===g)return g;g=Number(g);var q=Math.pow(Math.abs(g),1/3);return 0>g?-q:q};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(g){return"number"!==typeof g?!1:!isNaN(g)&&Infinity!==g&&-Infinity!==g};
$jscomp.number.isInteger=function(g){return $jscomp.number.isFinite(g)?g===Math.floor(g):!1};$jscomp.number.isNaN=function(g){return"number"===typeof g&&isNaN(g)};$jscomp.number.isSafeInteger=function(g){return $jscomp.number.isInteger(g)&&Math.abs(g)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(g,q){for(var z=[],a=1;a<arguments.length;++a)z[a-1]=arguments[a];z=$jscomp.makeIterator(z);for(a=z.next();!a.done;a=z.next())if(a=a.value)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(g[b]=a[b]);return g};$jscomp.object.is=function(g,q){return g===q?0!==g||1/g===1/q:g!==g&&q!==q};$jscomp.Set=function(g){g=void 0===g?[]:g;this.map_=new $jscomp.Map;if(g){g=$jscomp.makeIterator(g);for(var q=g.next();!q.done;q=g.next())this.add(q.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var g=$jscomp.global.Set;if(!g||!g.prototype.entries||!Object.seal)return!1;var q=Object.seal({x:4}),g=new g($jscomp.makeIterator([q]));if(g.has(q)||1!=g.size||g.add(q)!=g||1!=g.size||g.add({x:4})!=g||2!=g.size)return!1;var g=g.entries(),z=g.next();if(z.done||z.value[0]!=q||z.value[1]!=q)return!1;z=g.next();return z.done||z.value[0]==q||4!=z.value[0].x||z.value[1]!=z.value[0]?!1:g.next().done};
$jscomp.Set.prototype.add=function(g){this.map_.set(g,g);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(g){g=this.map_["delete"](g);this.size=this.map_.size;return g};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(g){return this.map_.has(g)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(g,q){var z=this;this.map_.forEach(function(a){return g.call(q,a,a,z)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(g,q){if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+q+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(g){for(var q=[],z=0;z<arguments.length;++z)q[z-0]=arguments[z];for(var z="",q=$jscomp.makeIterator(q),a=q.next();!a.done;a=q.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?z+=String.fromCharCode(a):(a-=65536,z+=String.fromCharCode(a>>>10&1023|55296),z+=String.fromCharCode(a&1023|56320))}return z};
$jscomp.string.repeat=function(g){var q=this.toString();if(0>g||1342177279<g)throw new RangeError("Invalid count value");g|=0;for(var z="";g;)if(g&1&&(z+=q),g>>>=1)q+=q;return z};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(g){var q=this.toString(),z=q.length;g=Number(g)||0;if(0<=g&&g<z){g|=0;var a=q.charCodeAt(g);if(55296>a||56319<a||g+1===z)return a;g=q.charCodeAt(g+1);return 56320>g||57343<g?a:1024*(a-55296)+g+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(g,q){q=void 0===q?0:q;$jscomp.string.noRegExp_(g,"includes");return-1!==this.toString().indexOf(g,q)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(g,q){q=void 0===q?0:q;$jscomp.string.noRegExp_(g,"startsWith");var z=this.toString();g+="";for(var a=z.length,b=g.length,x=Math.max(0,Math.min(q|0,z.length)),l=0;l<b&&x<a;)if(z[x++]!=g[l++])return!1;return l>=b};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(g,q){$jscomp.string.noRegExp_(g,"endsWith");var z=this.toString();g+="";void 0===q&&(q=z.length);for(var a=Math.max(0,Math.min(q|0,z.length)),b=g.length;0<b&&0<a;)if(z[--a]!=g[--b])return!1;return 0>=b};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function g(q,z,a){function b(k,f){if(!z[k]){if(!q[k]){var d="function"==typeof require&&require;if(!f&&d)return d(k,!0);if(x)return x(k,!0);d=Error("Cannot find module '"+k+"'");throw d.code="MODULE_NOT_FOUND",d;}d=z[k]={exports:{}};q[k][0].call(d.exports,function(a){return b(q[k][1][a]||a)},d,d.exports,g,q,z,a)}return z[k].exports}for(var x="function"==typeof require&&require,l=0;l<a.length;l++)b(a[l]);return b}return g})()({1:[function(g,q,z){var a=g("../regl")(),b=g("surface-nets"),
x=g("ndarray"),l=g("angle-normals"),k=g("gl-mat3"),f=g("./util/camera")(a,{distance:1.5,maxDistance:3,minDistance:.5,center:[1,1,1],theta:1}),d=a.buffer({length:49152,type:"float",usage:"dynamic"}),e=a.buffer({length:49152,type:"float",usage:"dynamic"}),ga=a.elements({length:221184,count:36864,type:"uint16",usage:"dynamic",primitive:"triangles"}),w=a({vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n      gl_Position = vec4(position, 0., 1.);\n    }",frag:"\n    precision mediump float;\n    uniform vec3 color;\n    uniform float noise, width, height;\n\n    #define VIG_REDUCTION_POWER 1.\n    #define VIG_BOOST 1.\n\n    float random(vec3 scale,float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);\n    }\n\n    void main () {\n      vec2 resolution = vec2(width, height);\n      vec2 center = resolution * 0.5;\n      float vignette = distance( center, gl_FragCoord.xy ) / resolution.x;\n      vignette = VIG_BOOST - vignette * VIG_REDUCTION_POWER;\n\n      float n = noise * (.5 - random(vec3(1.), length(gl_FragCoord)));\n\n      float v = .5 * length(vec2(gl_FragCoord.y / resolution.y, (1. - abs(.5 - gl_FragCoord.x / resolution.x))));\n      vec3 base = color;\n      base += vec3(pow(v, 2.));\n\n      gl_FragColor = vec4(base * vec3(vignette) + vec3(n), 1.);\n    }",
uniforms:{color:[36/255,70/255,106/255],width:a.context("viewportWidth"),height:a.context("viewportHeight"),noise:.05},attributes:{position:[-4,-4,4,-4,0,4]},count:3}),u=a({vert:"\n    precision mediump float;\n    uniform mat4 projection, view;\n    uniform mat3 normalMatrix;\n\n    attribute vec3 position, normal;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    void main () {\n      vNormal = normalMatrix * normal;\n      vONormal = normal;\n      vPosition = vec4(position, 1.0);\n      vOPosition = view * vPosition;\n      vU = normalize(vec3(vOPosition));\n      gl_Position = projection * vOPosition;\n    }",
frag:"\n    precision mediump float;\n    uniform sampler2D textureMap, normalMap;\n    uniform float normalScale, texScale;\n    uniform vec3 color, eye;\n\n    varying vec3 vNormal, vONormal, vU;\n    varying vec4 vPosition, vOPosition;\n\n    float random(vec3 scale, float seed) {\n      return fract(sin(dot(gl_FragCoord.xyz + seed,scale)) * 43758.5453 + seed);\n    }\n\n    vec3 spherical_environment_map(vec3 ray, vec3 normal) {\n      vec3 r = reflect(normalize(ray), normalize(normal));\n      float m = 2.0 * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.0) * (r.z + 1.0));\n      vec2 calculatedNormal = vec2(r.x / m + 0.5, r.y / m + 0.5);\n      return texture2D(textureMap, calculatedNormal).rgb;\n    }\n\n    mat3 tangent_space_basis(vec3 blend_weights) {\n      vec3 tanX = vec3(vNormal.x, -vNormal.z, vNormal.y);\n      vec3 tanY = vec3(vNormal.z, vNormal.y, -vNormal.x);\n      vec3 tanZ = vec3(-vNormal.y, vNormal.x, vNormal.z);\n      vec3 blended_tangent = tanX * blend_weights.xxx +\n                             tanY * blend_weights.yyy +\n                             tanZ * blend_weights.zzz;\n\n      return mat3(\n        normalize(blended_tangent),\n        normalize(cross(vNormal, blended_tangent)),\n        normalize(vNormal)\n      );\n    }\n\n    vec3 blended_bump(vec3 blend_weights) {\n      vec2 coord1 = vPosition.yz * texScale;\n      vec2 coord2 = vPosition.zx * texScale;\n      vec2 coord3 = vPosition.xy * texScale;\n\n      vec3 bump1 = texture2D(normalMap, coord1).rgb;\n      vec3 bump2 = texture2D(normalMap, coord2).rgb;\n      vec3 bump3 = texture2D(normalMap, coord3).rgb;\n\n      return bump1 * blend_weights.xxx +\n             bump2 * blend_weights.yyy +\n             bump3 * blend_weights.zzz;\n    }\n\n    void main() {\n      // Using triplanar texturing, as in http://http.developer.nvidia.com/GPUGems3/gpugems3_ch01.html\n      vec3 blend_weights = abs(normalize(vONormal.xyz));\n      blend_weights = (blend_weights - 0.2) * 7.;\n      blend_weights = max(blend_weights, 0.);\n      blend_weights /= (blend_weights.x + blend_weights.y + blend_weights.z);\n\n      mat3 tsb = tangent_space_basis(blend_weights);\n      vec3 bump = blended_bump(blend_weights);\n\n      vec3 normalTex = bump * 2.0 - 1.0;\n      normalTex.xy *= normalScale;\n      normalTex.y *= -1.;\n      normalTex = normalize(normalTex);\n      vec3 finalNormal = tsb * normalTex;\n      vec3 base = spherical_environment_map(vU, finalNormal);\n\n      float rim = 1.75 * max(0., abs(dot(normalize(vNormal), normalize(-vOPosition.xyz))));\n      base += 10. * base * color * clamp(1. - rim, 0., .15);\n\n      base = vec3(1.) - (vec3(1.) - base) * (vec3(1.) - base);\n\n      float dither = .05 * random(vec3(1.), length(gl_FragCoord));\n      base += vec3(dither);\n\n      gl_FragColor = vec4(base.rgb, 1.);\n    }",
attributes:{position:{buffer:d},normal:{buffer:e}},uniforms:{color:[36/255,70/255,106/255],sphereColor:[36/255,70/255,106/255],normalScale:1,texScale:10,normalMatrix:function(a){var f=k.create();k.normalFromMat4(f,a.view);return f},textureMap:a.prop("textureMap"),normalMap:a.prop("normalMap")},elements:ga}),pa=1.2/((Math.sqrt(20)-1)/4+1),h=[.5,.5,.5],A=[1.5,1.5,1.5],n=[0,1,2].map(function(a){return(A[a]-h[a])/50}),ua=50*Math.sqrt(pa/12),m=function(a){a*=.5;for(var f=new Float32Array(125E3),e=0;20>
e;e++)for(var d=void 0,k=void 0,l=void 0,u=void 0,A=void 0,ga=void 0,ga=void 0,l=$jscomp.makeIterator([.27*Math.sin(e+1.26*a*(1.03+.5*Math.cos(.21*e)))+.5,.27*Math.cos(e+1.12*a*.21*Math.sin(.72+.83*e))+.5,.27*Math.cos(e+.132*a*Math.sin(.92+.53*e))+.5]),d=l.next().value,k=l.next().value,l=l.next().value,ga=[d,k,l].map(function(c){c*=50;return[Math.max(Math.floor(c-ua),1),Math.min(Math.floor(c+ua),49)]}),u=ga[0],A=ga[1],ga=ga[2],C=ga[0];C<ga[1];C++)for(var B=2500*C,w=A[0];w<A[1];w++)for(var g=50*w,
m=u[0];m<u[1];m++){var t=m/50-d,p=w/50-k,c=C/50-l,t=pa/(1E-6+t*t+p*p+c*c)-12;0<t&&(f[B+g+m]+=t)}a=b(x(f,[50,50,50]),80);f=Array(a.positions.length);for(e=0;e<a.positions.length;e++){d=a.positions[e];k=Array(3);for(l=0;3>l;l++)k[l]=h[l]+d[l]*n[l];f[e]=k}return{positions:f,cells:a.cells}};g("resl")({manifest:{sphereTexture:{type:"image",src:"assets/spheretexture.jpg",parser:function(f){return a.texture({data:f,mag:"linear",min:"linear"})}},normalTexture:{type:"image",src:"assets/normaltexture.jpg",
parser:function(f){return a.texture({data:f,wrapT:"repeat",wrapS:"repeat",min:"linear mipmap linear",mag:"linear"})}}},onDone:function(b){var x=b.sphereTexture,k=b.normalTexture;a.frame(function(b){b=m(b.time);d({data:b.positions});ga({data:b.cells});e({data:l(b.cells,b.positions)});f(function(){w({depth:{enable:!1,mask:!1}});a.clear({depth:1});u({textureMap:x,normalMap:k})})})}})},{"../regl":91,"./util/camera":2,"angle-normals":39,"gl-mat3":58,ndarray:79,resl:83,"surface-nets":84}],2:[function(g,
q,z){var a=g("mouse-change"),b=g("mouse-wheel"),x=g("gl-mat4/identity"),l=g("gl-mat4/perspective"),k=g("gl-mat4/lookAt");q.exports=function(f,d){function e(a){a*=.9;return.1>Math.abs(a)?0:a}function ga(a){var f=w.center,b=w.eye,d=w.up;w.theta+=n;w.phi=Math.min(Math.max(w.phi+ua,-Math.PI/2),Math.PI/2);w.distance=Math.min(Math.max(w.distance+m,h),A);n=e(n);ua=e(ua);m=e(m);for(var x=w.theta,l=w.phi,C=Math.exp(w.distance),B=C*Math.sin(x)*Math.cos(l),x=C*Math.cos(x)*Math.cos(l),l=C*Math.sin(l),C=0;3>C;++C)b[C]=
f[C]+B*g[C]+x*u[C]+l*d[C];k(w.view,b,f,d);H(a)}var w={view:x(new Float32Array(16)),projection:x(new Float32Array(16)),center:new Float32Array(d.center||3),theta:d.theta||0,phi:d.phi||0,distance:Math.log(d.distance||10),eye:new Float32Array(3),up:new Float32Array(d.up||[0,1,0])},u=new Float32Array([1,0,0]),g=new Float32Array([0,0,1]),h=Math.log("minDistance"in d?d.minDistance:.1),A=Math.log("maxDistance"in d?d.maxDistance:1E3),n=0,ua=0,m=0,E=0,J=0;a(function(a,f,b){if(a&1){a=(b-J)/window.innerHeight;
var e=Math.max(w.distance,.5);n+=(f-E)/window.innerWidth*e;ua+=e*a}E=f;J=b});b(function(a,f){m+=f/window.innerHeight});var H=f({context:Object.assign({},w,{projection:function(a){return l(w.projection,Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)}}),uniforms:Object.keys(w).reduce(function(a,b){a[b]=f.context(b);return a},{})});Object.keys(w).forEach(function(a){ga[a]=w[a]});return ga}},{"gl-mat4/identity":67,"gl-mat4/lookAt":68,"gl-mat4/perspective":69,"mouse-change":75,"mouse-wheel":77}],3:[function(g,
q,z){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var b=g("./util/sorted-object-keys"),x=g("./util/check"),l=g("./util/values"),k=g("./constants/dtypes.json"),f=g("./util/is-typed-array"),d=g("./util/is-ndarray"),e=g("./constants/primitives.json"),ga="attributes elements offset count primitive instances".split(" ");q.exports=function(w,u,g,h,A,n,ua){function m(a){if(a!==Q.currentVAO){var f=
u.oes_vertex_array_object;a?f.bindVertexArrayOES(a.vao):f.bindVertexArrayOES(null);Q.currentVAO=a}}function E(a){if(a!==Q.currentVAO){if(a)a.bindAttrs();else{for(var f=u.angle_instanced_arrays,b=0;b<v.length;++b){var e=v[b];e.buffer?(w.enableVertexAttribArray(b),e.buffer.bind(),w.vertexAttribPointer(b,e.size,e.type,e.normalized,e.stride,e.offfset),f&&e.divisor&&f.vertexAttribDivisorANGLE(b,e.divisor)):(w.disableVertexAttribArray(b),w.vertexAttrib4f(b,e.x,e.y,e.z,e.w))}ua.elements?w.bindBuffer(34963,
ua.elements.buffer.buffer):w.bindBuffer(34963,null)}Q.currentVAO=a}}function J(){l(L).forEach(function(a){a.destroy()})}function H(){this.id=++S;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=u.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;L[this.id]=this;this.buffers=[]}function ea(){u.oes_vertex_array_object&&l(L).forEach(function(a){a.refresh()})}var y=g.maxAttributes,v=Array(y);for(g=0;g<y;++g)v[g]=
new a;var S=0,L={},Q={Record:a,scope:{},state:v,currentVAO:null,targetVAO:null,restore:u.oes_vertex_array_object?ea:function(){},createVAO:function(l){function B(l){var C;if(Array.isArray(l))C=l,v.elements&&v.ownsElements&&v.elements.destroy(),v.elements=null,v.ownsElements=!1,v.offset=0,v.count=0,v.instances=-1,v.primitive=4;else{x("object"===typeof l,"invalid arguments for create vao");x("attributes"in l,"must specify attributes for vao");if(l.elements){var t=l.elements;v.ownsElements?("function"===
typeof t&&"elements"===t._reglType?v.elements.destroy():v.elements(t),v.ownsElements=!1):n.getElements(l.elements)?(v.elements=l.elements,v.ownsElements=!1):(v.elements=n.create(l.elements),v.ownsElements=!0)}else v.elements=null,v.ownsElements=!1;C=l.attributes;v.offset=0;v.count=-1;v.instances=-1;v.primitive=4;v.elements&&(v.count=v.elements._elements.vertCount,v.primitive=v.elements._elements.primType);"offset"in l&&(v.offset=l.offset|0);"count"in l&&(v.count=l.count|0);"instances"in l&&(v.instances=
l.instances|0);"primitive"in l&&(x(l.primitive in e,"bad primitive type: "+l.primitive),v.primitive=e[l.primitive]);x.optional(function(){for(var c=b(l),p=0;p<c.length;++p)x(0<=ga.indexOf(c[p]),'invalid option for vao: "'+c[p]+'" valid options are '+ga)});x(Array.isArray(C),"attributes must be an array")}x(C.length<y,"too many attributes");x(0<C.length,"must specify at least one attribute");var t={},p=v.attributes;p.length=C.length;for(var c=0;c<C.length;++c){var D=C[c],r=p[c]=new a,h=D.data||D;if(Array.isArray(h)||
f(h)||d(h)){var g;v.buffers[c]&&(g=v.buffers[c],f(h)&&g._buffer.byteLength>=h.byteLength?g.subdata(h):(g.destroy(),v.buffers[c]=null));v.buffers[c]||(g=v.buffers[c]=A.create(D,34962,!1,!0));r.buffer=A.getBuffer(g);r.size=r.buffer.dimension|0;r.normalized=!1;r.type=r.buffer.dtype;r.offset=0;r.stride=0;r.divisor=0;r.state=1;t[c]=1}else A.getBuffer(D)?(r.buffer=A.getBuffer(D),r.size=r.buffer.dimension|0,r.normalized=!1,r.type=r.buffer.dtype,r.offset=0,r.stride=0,r.divisor=0,r.state=1):A.getBuffer(D.buffer)?
(r.buffer=A.getBuffer(D.buffer),r.size=(+D.size||r.buffer.dimension)|0,r.normalized=!!D.normalized||!1,"type"in D?(x.parameter(D.type,k,"invalid buffer type"),r.type=k[D.type]):r.type=r.buffer.dtype,r.offset=(D.offset||0)|0,r.stride=(D.stride||0)|0,r.divisor=(D.divisor||0)|0,r.state=1,x(1<=r.size&&4>=r.size,"size must be between 1 and 4"),x(0<=r.offset,"invalid offset"),x(0<=r.stride&&255>=r.stride,"stride must be between 0 and 255"),x(0<=r.divisor,"divisor must be positive"),x(!r.divisor||!!u.angle_instanced_arrays,
"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in D?(x(0<c,"first attribute must not be a constant"),r.x=+D.x||0,r.y=+D.y||0,r.z=+D.z||0,r.w=+D.w||0,r.state=2):x(!1,"invalid attribute spec for location "+c)}for(g=0;g<v.buffers.length;++g)!t[g]&&v.buffers[g]&&(v.buffers[g].destroy(),v.buffers[g]=null);v.refresh();return B}var v=new H;h.vaoCount+=1;B.destroy=function(){for(var a=0;a<v.buffers.length;++a)v.buffers[a]&&v.buffers[a].destroy();v.buffers.length=0;v.ownsElements&&(v.elements.destroy(),
v.elements=null,v.ownsElements=!1);v.destroy()};B._vao=v;B._reglType="vao";return B(l)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var f=0;f<v.length;++f){var b=v[f];b.buffer===a&&(w.disableVertexAttribArray(f),b.buffer=null)}},setVAO:u.oes_vertex_array_object?m:E,clear:u.oes_vertex_array_object?J:function(){}};H.prototype.bindAttrs=function(){for(var a=u.angle_instanced_arrays,f=this.attributes,b=0;b<f.length;++b){var e=f[b];e.buffer?(w.enableVertexAttribArray(b),
w.bindBuffer(34962,e.buffer.buffer),w.vertexAttribPointer(b,e.size,e.type,e.normalized,e.stride,e.offset),a&&e.divisor&&a.vertexAttribDivisorANGLE(b,e.divisor)):(w.disableVertexAttribArray(b),w.vertexAttrib4f(b,e.x,e.y,e.z,e.w))}for(a=f.length;a<y;++a)w.disableVertexAttribArray(a);(a=n.getElements(this.elements))?w.bindBuffer(34963,a.buffer.buffer):w.bindBuffer(34963,null)};H.prototype.refresh=function(){var a=u.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),Q.currentVAO=
null,a.bindVertexArrayOES(null))};H.prototype.destroy=function(){if(this.vao){var a=u.oes_vertex_array_object;this===Q.currentVAO&&(Q.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);L[this.id]&&(delete L[this.id],--h.vaoCount)};return Q}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./util/check":22,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/sorted-object-keys":35,
"./util/values":37}],4:[function(g,q,z){function a(a){return pa[Object.prototype.toString.call(a)]|0}function b(a,f){for(var b=0;b<f.length;++b)a[b]=f[b]}function x(a,f,b,e,d,x,l){for(var k=0,u=0;u<b;++u)for(var h=0;h<e;++h)a[k++]=f[d*u+x*h+l]}var l=g("./util/sorted-object-keys"),k=g("./util/check"),f=g("./util/is-typed-array"),d=g("./util/is-ndarray"),e=g("./util/values"),ga=g("./util/pool");z=g("./util/flatten");var w=z.flatten,u=z.shape,pa=g("./constants/arraytypes.json"),h=g("./constants/dtypes.json"),
A=g("./constants/usage.json"),n=[];n[5120]=1;n[5122]=2;n[5124]=4;n[5121]=1;n[5123]=2;n[5125]=4;n[5126]=4;q.exports=function(g,m,pa,J){function H(a){this.id=S++;this.buffer=g.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;pa.profile&&(this.stats={size:0})}function ea(a,f,b){a.byteLength=f.byteLength;g.bufferData(a.type,f,b)}function y(e,l,v,y,h,t){e.usage=v;if(Array.isArray(l)){if(e.dtype=y||5126,0<l.length)if(Array.isArray(l[0])){h=
u(l);for(var p=y=1;p<h.length;++p)y*=h[p];e.dimension=y;l=w(l,h,e.dtype);ea(e,l,v);t?e.persistentData=l:ga.freeType(l)}else"number"===typeof l[0]?(e.dimension=h,h=ga.allocType(e.dtype,l.length),b(h,l),ea(e,h,v),t?e.persistentData=h:ga.freeType(h)):f(l[0])?(e.dimension=l[0].length,e.dtype=y||a(l[0])||5126,l=w(l,[l.length,l[0].length],e.dtype),ea(e,l,v),t?e.persistentData=l:ga.freeType(l)):k.raise("invalid buffer data")}else if(f(l))e.dtype=y||a(l),e.dimension=h,ea(e,l,v),t&&(e.persistentData=new Uint8Array(new Uint8Array(l.buffer)));
else if(d(l)){h=l.shape;var c=l.stride,p=l.offset,D=0,r=0,g=0,A=0;1===h.length?(D=h[0],r=1,g=c[0],A=0):2===h.length?(D=h[0],r=h[1],g=c[0],A=c[1]):k.raise("invalid shape");e.dtype=y||a(l.data)||5126;e.dimension=r;h=ga.allocType(e.dtype,D*r);x(h,l.data,D,r,g,A,p);ea(e,h,v);t?e.persistentData=h:ga.freeType(h)}else l instanceof ArrayBuffer?(e.dtype=5121,e.dimension=h,ea(e,l,v),t&&(e.persistentData=new Uint8Array(new Uint8Array(l)))):k.raise("invalid buffer data")}function v(a){m.bufferCount--;J(a);var f=
a.buffer;k(f,"buffer must not be deleted already");g.deleteBuffer(f);a.buffer=null;delete L[a.id]}var S=0,L={};H.prototype.bind=function(){g.bindBuffer(this.type,this.buffer)};H.prototype.destroy=function(){v(this)};var Q=[];pa.profile&&(m.getTotalBufferSize=function(){var a=0;l(L).forEach(function(f){a+=L[f].stats.size});return a});return{create:function(e,l,J,Q){function S(c){var a=35044,b=null,e=0,t=0,x=1;Array.isArray(c)||f(c)||d(c)||c instanceof ArrayBuffer?b=c:"number"===typeof c?e=c|0:c&&(k.type(c,
"object","buffer arguments must be an object, a number or an array"),"data"in c&&(k(null===b||Array.isArray(b)||f(b)||d(b),"invalid data for buffer"),b=c.data),"usage"in c&&(k.parameter(c.usage,A,"invalid buffer usage"),a=A[c.usage]),"type"in c&&(k.parameter(c.type,h,"invalid buffer type"),t=h[c.type]),"dimension"in c&&(k.type(c.dimension,"number","invalid dimension"),x=c.dimension|0),"length"in c&&(k.nni(e,"buffer length must be a nonnegative integer"),e=c.length|0));p.bind();b?y(p,b,a,t,x,Q):(e&&
g.bufferData(p.type,e,a),p.dtype=t||5121,p.usage=a,p.dimension=x,p.byteLength=e);pa.profile&&(p.stats.size=p.byteLength*n[p.dtype]);return S}function t(c,a){k(a+c.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+c.byteLength+" starting from offset "+a+" to a buffer of size "+p.byteLength);g.bufferSubData(p.type,a,c)}m.bufferCount++;var p=new H(l);L[p.id]=p;J||S(e);S._reglType="buffer";S._buffer=p;S.subdata=function(c,e){var l=(e||0)|0,v;p.bind();
if(f(c)||c instanceof ArrayBuffer)t(c,l);else if(Array.isArray(c)){if(0<c.length)if("number"===typeof c[0]){var y=ga.allocType(p.dtype,c.length);b(y,c);t(y,l);ga.freeType(y)}else Array.isArray(c[0])||f(c[0])?(v=u(c),y=w(c,v,p.dtype),t(y,l),ga.freeType(y)):k.raise("invalid buffer data")}else if(d(c)){v=c.shape;var h=c.stride,C=y=0,g=0,A=0;1===v.length?(y=v[0],C=1,g=h[0],A=0):2===v.length?(y=v[0],C=v[1],g=h[0],A=h[1]):k.raise("invalid shape");v=Array.isArray(c.data)?p.dtype:a(c.data);v=ga.allocType(v,
y*C);x(v,c.data,y,C,g,A,c.offset);t(v,l);ga.freeType(v)}else k.raise("invalid data for buffer subdata");return S};pa.profile&&(S.stats=p.stats);S.destroy=function(){v(p)};return S},createStream:function(a,f){var b=Q.pop();b||(b=new H(a));b.bind();y(b,f,35040,0,1,!1);return b},destroyStream:function(a){Q.push(a)},clear:function(){e(L).forEach(v);Q.forEach(v)},getBuffer:function(a){return a&&a._buffer instanceof H?a._buffer:null},restore:function(){e(L).forEach(function(a){a.buffer=g.createBuffer();
g.bindBuffer(a.type,a.buffer);g.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:y}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,"./constants/usage.json":8,"./util/check":22,"./util/flatten":27,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/pool":33,"./util/sorted-object-keys":35,"./util/values":37}],5:[function(g,q,z){q.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(g,q,z){q.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],7:[function(g,q,z){q.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(g,q,z){q.exports={"static":35044,dynamic:35048,stream:35040}},
{}],9:[function(g,q,z){function a(a){return Array.isArray(a)||pa(a)||h(a)}function b(a){return a.sort(function(a,f){return"viewport"===a?-1:"viewport"===f?1:a<f?-1:1})}function x(a,f,b,e){this.thisDep=a;this.contextDep=f;this.propDep=b;this.append=e}function l(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function k(a){return new x(!1,!1,!1,a)}function f(a,f){var b=a.type;if(0===b)return b=a.data.length,new x(!0,1<=b,2<=b,f);if(4===b)return b=a.data,new x(b.thisDep,b.contextDep,b.propDep,f);
if(5===b)return new x(!1,!1,!1,f);if(6===b){for(var e=b=!1,d=!1,t=0;t<a.data.length;++t){var p=a.data[t];1===p.type?d=!0:2===p.type?e=!0:3===p.type?b=!0:0===p.type?(b=!0,p=p.data,1<=p&&(e=!0),2<=p&&(d=!0)):4===p.type&&(b=b||p.data.thisDep,e=e||p.data.contextDep,d=d||p.data.propDep)}return new x(b,e,d,f)}return new x(3===b,2===b,1===b,f)}var d=g("./util/sorted-object-keys"),e=g("./util/check"),ga=g("./util/extend"),w=g("./util/codegen"),u=g("./util/loop"),pa=g("./util/is-typed-array"),h=g("./util/is-ndarray"),
A=g("./util/is-array-like"),n=g("./dynamic"),ua=g("./constants/primitives.json"),m=g("./constants/dtypes.json"),E=["x","y","z","w"],J="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),H={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,
"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ea="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),y={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,
"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},v={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},S={frag:35632,vert:35633},L={cw:2304,ccw:2305},Q=new x(!1,!1,!1,function(){});q.exports=function(h,g,pa,I,K,t,p,c,D,r,la,na,U,aa,T){function R(c){return c.replace(".","_")}function N(c,p,a){var f=R(c);va.push(c);Y[f]=ha[f]=!!a;Ka[f]=p}function F(c,p,a){var f=R(c);va.push(c);Array.isArray(a)?
(ha[f]=a.slice(),Y[f]=a.slice()):ha[f]=Y[f]=a;Ga[f]=p}function O(){var c=w(),p=c.link,a=c.global;c.id=Gc++;c.batchId="0";var f=p(eb),b=c.shared={props:"a0"};d(eb).forEach(function(c){b[c]=a.def(f,".",c)});e.optional(function(){c.CHECK=p(e);c.commandStr=e.guessCommand();c.command=p(c.commandStr);c.assert=function(c,a,f){c("if(!(",a,"))",this.CHECK,".commandRaise(",p(f),",",this.command,");")};ba.invalidBlendCombinations=ea});var t=c.next={},x=c.current={};d(Ga).forEach(function(c){Array.isArray(ha[c])&&
(t[c]=a.def(b.next,".",c),x[c]=a.def(b.current,".",c))});var l=c.constants={};d(ba).forEach(function(c){l[c]=a.def(JSON.stringify(ba[c]))});c.invoke=function(a,f){switch(f.type){case 0:var e=["this",b.context,b.props,c.batchId];return a.def(p(f.data),".call(",e.slice(0,Math.max(f.data.length+1,4)),")");case 1:return a.def(b.props,f.data);case 2:return a.def(b.context,f.data);case 3:return a.def("this",f.data);case 4:return f.data.append(c,a),f.data.ref;case 5:return f.data.toString();case 6:return f.data.map(function(p){return c.invoke(a,
p)})}};c.attribCache={};var k={};c.scopeAttrib=function(c){c=g.id(c);if(c in k)return k[c];var a=r.scope[c];a||(a=r.scope[c]=new xa);return k[c]=p(a)};return c}function P(c){var p=c["static"];c=c.dynamic;var a;if("profile"in p){var b=!!p.profile;a=k(function(c,p){return b});a.enable=b}else if("profile"in c){var e=c.profile;a=f(e,function(c,p){return c.invoke(p,e)})}return a}function qa(p,a){var b=p["static"],d=p.dynamic;if("framebuffer"in b){var t=b.framebuffer;return t?(t=c.getFramebuffer(t),e.command(t,
"invalid framebuffer object"),k(function(c,p){var a=c.link(t),f=c.shared;p.set(f.framebuffer,".next",a);f=f.context;p.set(f,".framebufferWidth",a+".width");p.set(f,".framebufferHeight",a+".height");return a})):k(function(c,p){var a=c.shared;p.set(a.framebuffer,".next","null");a=a.context;p.set(a,".framebufferWidth",a+".drawingBufferWidth");p.set(a,".framebufferHeight",a+".drawingBufferHeight");return"null"})}if("framebuffer"in d){var x=d.framebuffer;return f(x,function(c,p){var a=c.invoke(p,x),f=
c.shared,b=f.framebuffer,d=p.def(b,".getFramebuffer(",a,")");e.optional(function(){c.assert(p,"!"+a+"||"+d,"invalid framebuffer object")});p.set(b,".next",d);f=f.context;p.set(f,".framebufferWidth",d+"?"+d+".width:"+f+".drawingBufferWidth");p.set(f,".framebufferHeight",d+"?"+d+".height:"+f+".drawingBufferHeight");return d})}return null}function q(c,p,a){function b(c){if(c in d){var l=d[c];e.commandType(l,"object","invalid "+c,a.commandStr);var r=!0,k=l.x|0,D=l.y|0,v,y;"width"in l?(v=l.width|0,e.command(0<=
v,"invalid "+c,a.commandStr)):r=!1;"height"in l?(y=l.height|0,e.command(0<=y,"invalid "+c,a.commandStr)):r=!1;return new x(!r&&p&&p.thisDep,!r&&p&&p.contextDep,!r&&p&&p.propDep,function(c,p){var a=c.shared.context,f=v;"width"in l||(f=p.def(a,".","framebufferWidth","-",k));var b=y;"height"in l||(b=p.def(a,".","framebufferHeight","-",D));return[k,D,f,b]})}if(c in t){var h=t[c],r=f(h,function(p,a){var f=p.invoke(a,h);e.optional(function(){p.assert(a,f+"&&typeof "+f+'==="object"',"invalid "+c)});var b=
p.shared.context,d=a.def(f,".x|0"),t=a.def(f,".y|0"),x=a.def('"width" in ',f,"?",f,".width|0:","(",b,".","framebufferWidth","-",d,")"),l=a.def('"height" in ',f,"?",f,".height|0:","(",b,".","framebufferHeight","-",t,")");e.optional(function(){p.assert(a,x+">=0&&"+l+">=0","invalid "+c)});return[d,t,x,l]});p&&(r.thisDep=r.thisDep||p.thisDep,r.contextDep=r.contextDep||p.contextDep,r.propDep=r.propDep||p.propDep);return r}return p?new x(p.thisDep,p.contextDep,p.propDep,function(c,p){var a=c.shared.context;
return[0,0,p.def(a,".","framebufferWidth"),p.def(a,".","framebufferHeight")]}):null}var d=c["static"],t=c.dynamic;if(c=b("viewport")){var l=c;c=new x(c.thisDep,c.contextDep,c.propDep,function(c,p){var a=l.append(c,p),f=c.shared.context;p.set(f,".viewportWidth",a[2]);p.set(f,".viewportHeight",a[3]);return a})}return{viewport:c,scissor_box:b("scissor.box")}}function G(c,p){var a=c["static"];if("string"===typeof a.frag&&"string"===typeof a.vert){if(0<d(p.dynamic).length)return null;var a=p["static"],
f=d(a);if(0<f.length&&"number"===typeof a[f[0]]){for(var b=[],t=0;t<f.length;++t)e("number"===typeof a[f[t]],"must specify all vertex attribute locations when using vaos"),b.push([a[f[t]]|0,f[t]]);return b}}return null}function M(c,p,a){function b(c){if(c in d){var p=g.id(d[c]);e.optional(function(){la.shader(S[c],p,e.guessCommand())});var a=k(function(){return p});a.id=p;return a}if(c in t){var x=t[c];return f(x,function(p,a){var f=p.invoke(a,x),b=a.def(p.shared.strings,".id(",f,")");e.optional(function(){a(p.shared.shader,
".shader(",S[c],",",b,",",p.command,");")});return b})}return null}var d=c["static"],t=c.dynamic,r=b("frag"),D=b("vert"),v=null;l(r)&&l(D)?(v=la.program(D.id,r.id,null,a),c=k(function(c,p){return c.link(v)})):c=new x(r&&r.thisDep||D&&D.thisDep,r&&r.contextDep||D&&D.contextDep,r&&r.propDep||D&&D.propDep,function(c,p){var a=c.shared.shader,f;f=r?r.append(c,p):p.def(a,".","frag");var b;b=D?D.append(c,p):p.def(a,".","vert");var d=a+".program("+b+","+f;e.optional(function(){d+=","+c.command});return p.def(d+
")")});return{frag:r,vert:D,progVar:c,program:v}}function da(c,p){function b(c,a){if(c in D){var d=D[c]|0;a?y.offset=d:y.instances=d;e.command(!a||0<=d,"invalid "+c,p.commandStr);return k(function(c,p){a&&(c.OFFSET=d);return d})}if(c in v){var t=v[c];return f(t,function(p,f){var b=p.invoke(f,t);a&&(p.OFFSET=b,e.optional(function(){p.assert(f,b+">=0","invalid "+c)}));return b})}if(a){if(G)return k(function(c,p){return c.OFFSET=0});if(h)return new x(F.thisDep,F.contextDep,F.propDep,function(c,p){return p.def(c.shared.vao+
".currentVAO?"+c.shared.vao+".currentVAO.offset:0")})}else if(h)return new x(F.thisDep,F.contextDep,F.propDep,function(c,p){return p.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.instances:-1")});return null}var D=c["static"],v=c.dynamic,y={},h=!1,F=function(){if("vao"in D){var c=D.vao;null!==c&&null===r.getVAO(c)&&(c=r.createVAO(c));h=!0;y.vao=c;return k(function(p){var a=r.getVAO(c);return a?p.link(a):"null"})}if("vao"in v){h=!0;var p=v.vao;return f(p,function(c,a){var f=c.invoke(a,
p);return a.def(c.shared.vao+".getVAO("+f+")")})}return null}(),G=!1,V=function(){if("elements"in D){var c=D.elements;y.elements=c;if(a(c)){var b=y.elements=t.create(c,!0),c=t.getElements(b);G=!0}else c&&(c=t.getElements(c),G=!0,e.command(c,"invalid elements",p.commandStr));b=k(function(p,a){if(c){var f=p.link(c);return p.ELEMENTS=f}return p.ELEMENTS=null});b.value=c;return b}if("elements"in v){G=!0;var d=v.elements;return f(d,function(c,p){var a=c.shared,f=a.isBufferArgs,a=a.elements,b=c.invoke(p,
d),t=p.def("null"),f=p.def(f,"(",b,")"),x=c.cond(f).then(t,"=",a,".createStream(",b,");")["else"](t,"=",a,".getElements(",b,");");e.optional(function(){c.assert(x["else"],"!"+b+"||"+t,"invalid elements")});p.entry(x);p.exit(c.cond(f).then(a,".destroyStream(",t,");"));return c.ELEMENTS=t})}return h?new x(F.thisDep,F.contextDep,F.propDep,function(c,p){return p.def(c.shared.vao+".currentVAO?"+c.shared.elements+".getElements("+c.shared.vao+".currentVAO.elements):null")}):null}(),u=b("offset",!0),ca=function(){if("primitive"in
D){var c=D.primitive;y.primitive=c;e.commandParameter(c,ua,"invalid primitve",p.commandStr);return k(function(p,a){return ua[c]})}if("primitive"in v){var a=v.primitive;return f(a,function(c,p){var f=c.constants.primTypes,b=c.invoke(p,a);e.optional(function(){c.assert(p,b+" in "+f,"invalid primitive, must be one of "+d(ua))});return p.def(f,"[",b,"]")})}return G?l(V)?V.value?k(function(c,p){return p.def(c.ELEMENTS,".primType")}):k(function(){return 4}):new x(V.thisDep,V.contextDep,V.propDep,function(c,
p){var a=c.ELEMENTS;return p.def(a,"?",a,".primType:",4)}):h?new x(F.thisDep,F.contextDep,F.propDep,function(c,p){return p.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.primitive:4")}):null}(),g=function(){if("count"in D){var c=D.count|0;y.count=c;e.command("number"===typeof c&&0<=c,"invalid vertex count",p.commandStr);return k(function(){return c})}if("count"in v){var a=v.count;return f(a,function(c,p){var f=c.invoke(p,a);e.optional(function(){c.assert(p,"typeof "+f+'==="number"&&'+f+
">=0&&"+f+"===("+f+"|0)","invalid vertex count")});return f})}if(G){if(l(V)){if(V)return u?new x(u.thisDep,u.contextDep,u.propDep,function(c,p){var a=p.def(c.ELEMENTS,".vertCount-",c.OFFSET);e.optional(function(){c.assert(p,a+">=0","invalid vertex offset/element buffer too small")});return a}):k(function(c,p){return p.def(c.ELEMENTS,".vertCount")});var b=k(function(){return-1});e.optional(function(){b.MISSING=!0});return b}var d=new x(V.thisDep||u.thisDep,V.contextDep||u.contextDep,V.propDep||u.propDep,
function(c,p){var a=c.ELEMENTS;return c.OFFSET?p.def(a,"?",a,".vertCount-",c.OFFSET,":-1"):p.def(a,"?",a,".vertCount:-1")});e.optional(function(){d.DYNAMIC=!0});return d}return h?new x(F.thisDep,F.contextDep,F.propDep,function(c,p){return p.def(c.shared.vao,".currentVAO?",c.shared.vao,".currentVAO.count:-1")}):null}(),A=b("instances",!1);return{elements:V,primitive:ca,count:g,instances:A,offset:u,vao:F,vaoActive:h,elementsActive:G,"static":y}}function X(c,p){var a=c["static"],b=c.dynamic,t={};va.forEach(function(c){function x(p,
e){if(c in a){var d=p(a[c]);t[l]=k(function(){return d})}else if(c in b){var r=b[c];t[l]=f(r,function(c,p){return e(c,p,c.invoke(p,r))})}}var l=R(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return x(function(a){e.commandType(a,"boolean",c,p.commandStr);return a},function(p,a,f){e.optional(function(){p.assert(a,"typeof "+f+'==="boolean"',
"invalid flag "+c,p.commandStr)});return f});case "depth.func":return x(function(a){e.commandParameter(a,y,"invalid "+c,p.commandStr);return y[a]},function(p,a,f){var b=p.constants.compareFuncs;e.optional(function(){p.assert(a,f+" in "+b,"invalid "+c+", must be one of "+d(y))});return a.def(b,"[",f,"]")});case "depth.range":return x(function(c){e.command(A(c)&&2===c.length&&"number"===typeof c[0]&&"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",p.commandStr);return c},function(c,p,a){e.optional(function(){c.assert(p,
c.shared.isArrayLike+"("+a+")&&"+a+".length===2&&typeof "+a+'[0]==="number"&&typeof '+a+'[1]==="number"&&'+a+"[0]<="+a+"[1]","depth range must be a 2d array")});var f=p.def("+",a,"[0]"),b=p.def("+",a,"[1]");return[f,b]});case "blend.func":return x(function(c){e.commandType(c,"object","blend.func",p.commandStr);var a="srcRGB"in c?c.srcRGB:c.src,f="srcAlpha"in c?c.srcAlpha:c.src,b="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;e.commandParameter(a,H,l+".srcRGB",p.commandStr);e.commandParameter(f,
H,l+".srcAlpha",p.commandStr);e.commandParameter(b,H,l+".dstRGB",p.commandStr);e.commandParameter(c,H,l+".dstAlpha",p.commandStr);e.command(-1===ea.indexOf(a+", "+b),"unallowed blending combination (srcRGB, dstRGB) = ("+a+", "+b+")",p.commandStr);return[H[a],H[b],H[f],H[c]]},function(p,a,f){function b(x,l){var r=a.def('"',x,l,'" in ',f,"?",f,".",x,l,":",f,".",x);e.optional(function(){p.assert(a,r+" in "+t,"invalid "+c+"."+x+l+", must be one of "+d(H))});return r}var t=p.constants.blendFuncs;e.optional(function(){p.assert(a,
f+"&&typeof "+f+'==="object"',"invalid blend func, must be an object")});var x=b("src","RGB"),l=b("dst","RGB");e.optional(function(){p.assert(a,p.constants.invalidBlendCombinations+".indexOf("+x+'+", "+'+l+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var r=a.def(t,"[",x,"]"),D=a.def(t,"[",b("src","Alpha"),"]"),k=a.def(t,"[",l,"]"),v=a.def(t,"[",b("dst","Alpha"),"]");return[r,k,D,v]});case "blend.equation":return x(function(a){if("string"===typeof a)return e.commandParameter(a,
Ia,"invalid "+c,p.commandStr),[Ia[a],Ia[a]];if("object"===typeof a)return e.commandParameter(a.rgb,Ia,c+".rgb",p.commandStr),e.commandParameter(a.alpha,Ia,c+".alpha",p.commandStr),[Ia[a.rgb],Ia[a.alpha]];e.commandRaise("invalid blend.equation",p.commandStr)},function(p,a,f){var b=p.constants.blendEquations,t=a.def(),x=a.def(),l=p.cond("typeof ",f,'==="string"');e.optional(function(){function a(c,f,e){p.assert(c,e+" in "+b,"invalid "+f+", must be one of "+d(Ia))}a(l.then,c,f);p.assert(l["else"],f+
"&&typeof "+f+'==="object"',"invalid "+c);a(l["else"],c+".rgb",f+".rgb");a(l["else"],c+".alpha",f+".alpha")});l.then(t,"=",x,"=",b,"[",f,"];");l["else"](t,"=",b,"[",f,".rgb];",x,"=",b,"[",f,".alpha];");a(l);return[t,x]});case "blend.color":return x(function(c){e.command(A(c)&&4===c.length,"blend.color must be a 4d array",p.commandStr);return u(4,function(p){return+c[p]})},function(c,p,a){e.optional(function(){c.assert(p,c.shared.isArrayLike+"("+a+")&&"+a+".length===4","blend.color must be a 4d array")});
return u(4,function(c){return p.def("+",a,"[",c,"]")})});case "stencil.mask":return x(function(c){e.commandType(c,"number",l,p.commandStr);return c|0},function(c,p,a){e.optional(function(){c.assert(p,"typeof "+a+'==="number"',"invalid stencil.mask")});return p.def(a,"|0")});case "stencil.func":return x(function(a){e.commandType(a,"object",l,p.commandStr);var f=a.cmp||"keep",b=a.ref||0;a="mask"in a?a.mask:-1;e.commandParameter(f,y,c+".cmp",p.commandStr);e.commandType(b,"number",c+".ref",p.commandStr);
e.commandType(a,"number",c+".mask",p.commandStr);return[y[f],b,a]},function(c,p,a){var f=c.constants.compareFuncs;e.optional(function(){function b(){c.assert(p,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(a+"&&typeof ",a,'==="object"');b('!("cmp" in ',a,")||(",a,".cmp in ",f,")")});var b=p.def('"cmp" in ',a,"?",f,"[",a,".cmp]",":",7680),d=p.def(a,".ref|0"),t=p.def('"mask" in ',a,"?",a,".mask|0:-1");return[b,d,t]});case "stencil.opFront":case "stencil.opBack":return x(function(a){e.commandType(a,
"object",l,p.commandStr);var f=a.fail||"keep",b=a.zfail||"keep";a=a.zpass||"keep";e.commandParameter(f,v,c+".fail",p.commandStr);e.commandParameter(b,v,c+".zfail",p.commandStr);e.commandParameter(a,v,c+".zpass",p.commandStr);return["stencil.opBack"===c?1029:1028,v[f],v[b],v[a]]},function(p,a,f){function b(x){e.optional(function(){p.assert(a,'!("'+x+'" in '+f+")||("+f+"."+x+" in "+t+")","invalid "+c+"."+x+", must be one of "+d(v))});return a.def('"',x,'" in ',f,"?",t,"[",f,".",x,"]:",7680)}var t=p.constants.stencilOps;
e.optional(function(){p.assert(a,f+"&&typeof "+f+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,b("fail"),b("zfail"),b("zpass")]});case "polygonOffset.offset":return x(function(c){e.commandType(c,"object",l,p.commandStr);var a=c.factor|0;c=c.units|0;e.commandType(a,"number",l+".factor",p.commandStr);e.commandType(c,"number",l+".units",p.commandStr);return[a,c]},function(p,a,f){e.optional(function(){p.assert(a,f+"&&typeof "+f+'==="object"',"invalid "+c)});var b=a.def(f,".factor|0"),
d=a.def(f,".units|0");return[b,d]});case "cull.face":return x(function(c){var a=0;"front"===c?a=1028:"back"===c&&(a=1029);e.command(!!a,l,p.commandStr);return a},function(c,p,a){e.optional(function(){c.assert(p,a+'==="front"||'+a+'==="back"',"invalid cull.face")});return p.def(a,'==="front"?',1028,":",1029)});case "lineWidth":return x(function(c){e.command("number"===typeof c&&c>=I.lineWidthDims[0]&&c<=I.lineWidthDims[1],"invalid line width, must be a positive number between "+I.lineWidthDims[0]+
" and "+I.lineWidthDims[1],p.commandStr);return c},function(c,p,a){e.optional(function(){c.assert(p,"typeof "+a+'==="number"&&'+a+">="+I.lineWidthDims[0]+"&&"+a+"<="+I.lineWidthDims[1],"invalid line width")});return a});case "frontFace":return x(function(c){e.commandParameter(c,L,l,p.commandStr);return L[c]},function(c,p,a){e.optional(function(){c.assert(p,a+'==="cw"||'+a+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return p.def(a+'==="cw"?2304:2305')});case "colorMask":return x(function(c){e.command(A(c)&&
4===c.length,"color.mask must be length 4 array",p.commandStr);return c.map(function(c){return!!c})},function(c,p,a){e.optional(function(){c.assert(p,c.shared.isArrayLike+"("+a+")&&"+a+".length===4","invalid color.mask")});return u(4,function(c){return"!!"+a+"["+c+"]"})});case "sample.coverage":return x(function(c){e.command("object"===typeof c&&c,l,p.commandStr);var a="value"in c?c.value:1;c=!!c.invert;e.command("number"===typeof a&&0<=a&&1>=a,"sample.coverage.value must be a number between 0 and 1",
p.commandStr);return[a,c]},function(c,p,a){e.optional(function(){c.assert(p,a+"&&typeof "+a+'==="object"',"invalid sample.coverage")});var f=p.def('"value" in ',a,"?+",a,".value:1"),b=p.def("!!",a,".invert");return[f,b]})}});return t}function z(c,p){var a=c["static"],b=c.dynamic,t={};d(a).forEach(function(c){var f=a[c],b;if("number"===typeof f||"boolean"===typeof f)b=k(function(){return f});else if("function"===typeof f){var d=f._reglType;"texture2d"===d||"textureCube"===d?b=k(function(c){return c.link(f)}):
"framebuffer"===d||"framebufferCube"===d?(e.command(0<f.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',p.commandStr),b=k(function(c){return c.link(f.color[0])})):e.commandRaise('invalid data for uniform "'+c+'"',p.commandStr)}else A(f)?b=k(function(p){return p.global.def("[",u(f.length,function(a){e.command("number"===typeof f[a]||"boolean"===typeof f[a],"invalid uniform "+c,p.commandStr);return f[a]}),"]")}):e.commandRaise('invalid or missing data for uniform "'+
c+'"',p.commandStr);b.value=f;t[c]=b});d(b).forEach(function(c){var p=b[c];t[c]=f(p,function(c,a){return c.invoke(a,p)})});return t}function oa(c,p){var b=c["static"],t=c.dynamic,x={};d(b).forEach(function(c){var f=b[c],t=g.id(c),l=new xa;if(a(f))l.state=1,l.buffer=K.getBuffer(K.create(f,34962,!1,!0)),l.type=0;else{var r=K.getBuffer(f);if(r)l.state=1,l.buffer=r,l.type=0;else if(e.command("object"===typeof f&&f,"invalid data for attribute "+c,p.commandStr),"constant"in f){var D=f.constant;l.buffer=
"null";l.state=2;"number"===typeof D?l.x=D:(e.command(A(D)&&0<D.length&&4>=D.length,"invalid constant for attribute "+c,p.commandStr),E.forEach(function(c,p){p<D.length&&(l[c]=D[p])}))}else{r=a(f.buffer)?K.getBuffer(K.create(f.buffer,34962,!1,!0)):K.getBuffer(f.buffer);e.command(!!r,'missing buffer for attribute "'+c+'"',p.commandStr);var v=f.offset|0;e.command(0<=v,'invalid offset for attribute "'+c+'"',p.commandStr);var y=f.stride|0;e.command(0<=y&&256>y,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',
p.commandStr);var h=f.size|0;e.command(!("size"in f)||0<h&&4>=h,'invalid size for attribute "'+c+'", must be 1,2,3,4',p.commandStr);var F=!!f.normalized,V=0;"type"in f&&(e.commandParameter(f.type,m,"invalid type for attribute "+c,p.commandStr),V=m[f.type]);var G=f.divisor|0;e.optional(function(){"divisor"in f&&(e.command(0===G||ma,'cannot specify divisor for attribute "'+c+'", instancing not supported',p.commandStr),e.command(0<=G,'invalid divisor for attribute "'+c+'"',p.commandStr));var a=p.commandStr,
b="buffer offset divisor normalized type size stride".split(" ");d(f).forEach(function(p){e.command(0<=b.indexOf(p),'unknown parameter "'+p+'" for attribute pointer "'+c+'" (valid parameters are '+b+")",a)})});l.buffer=r;l.state=1;l.size=h;l.normalized=F;l.type=V||r.dtype;l.offset=v;l.stride=y;l.divisor=G}}x[c]=k(function(c,p){var a=c.attribCache;if(t in a)return a[t];var f={isStream:!1};d(l).forEach(function(c){f[c]=l[c]});l.buffer&&(f.buffer=c.link(l.buffer),f.type=f.type||f.buffer+".dtype");return a[t]=
f})});d(t).forEach(function(c){var p=t[c];x[c]=f(p,function(a,f){function b(c){f(k[c],"=",t,".",c,"|0;")}var t=a.invoke(f,p),l=a.shared,x=a.constants,r=l.isBufferArgs,D=l.buffer;e.optional(function(){a.assert(f,t+"&&(typeof "+t+'==="object"||typeof '+t+'==="function")&&('+r+"("+t+")||"+D+".getBuffer("+t+")||"+D+".getBuffer("+t+".buffer)||"+r+"("+t+'.buffer)||("constant" in '+t+"&&(typeof "+t+'.constant==="number"||'+l.isArrayLike+"("+t+".constant))))",'invalid dynamic attribute "'+c+'"')});var k=
{isStream:f.def(!1)},v=new xa;v.state=1;d(v).forEach(function(c){k[c]=f.def(""+v[c])});var y=k.buffer,h=k.type;f("if(",r,"(",t,")){",k.isStream,"=true;",y,"=",D,".createStream(",34962,",",t,");",h,"=",y,".dtype;","}else{",y,"=",D,".getBuffer(",t,");","if(",y,"){",h,"=",y,".dtype;",'}else if("constant" in ',t,"){",k.state,"=",2,";","if(typeof "+t+'.constant === "number"){',k[E[0]],"=",t,".constant;",E.slice(1).map(function(c){return k[c]}).join("="),"=0;","}else{",E.map(function(c,p){return k[c]+"="+
t+".constant.length>"+p+"?"+t+".constant["+p+"]:0;"}).join(""),"}}else{","if(",r,"(",t,".buffer)){",y,"=",D,".createStream(",34962,",",t,".buffer);","}else{",y,"=",D,".getBuffer(",t,".buffer);","}",h,'="type" in ',t,"?",x.glTypes,"[",t,".type]:",y,".dtype;",k.normalized,"=!!",t,".normalized;");b("size");b("offset");b("stride");b("divisor");f("}}");f.exit("if(",k.isStream,"){",D,".destroyStream(",y,");","}");return k})});return x}function Da(c){var p=c["static"],a=c.dynamic,b={};d(p).forEach(function(c){var a=
p[c];b[c]=k(function(c,p){return"number"===typeof a||"boolean"===typeof a?""+a:c.link(a)})});d(a).forEach(function(c){var p=a[c];b[c]=f(p,function(c,a){return c.invoke(a,p)})});return b}function ya(c,p,a,f,b){function t(c){var p=y[c];p&&(F[c]=p)}var l=c["static"],D=c.dynamic;e.optional(function(){function c(a){d(a).forEach(function(c){e.command(0<=p.indexOf(c),'unknown parameter "'+c+'"',b.commandStr)})}var p="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(va);
c(l);c(D)});var k=G(c,p),v=qa(c,b),y=q(c,v,b),h=da(c,b),F=X(c,b),V=M(c,b,k);t("viewport");t(R("scissor.box"));var u=0<d(F).length,v={framebuffer:v,draw:h,shader:V,state:F,dirty:u,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};v.profile=P(c,b);v.uniforms=z(a,b);v.drawVAO=v.scopeVAO=h.vao;if(!v.drawVAO&&V.program&&!k&&pa.angle_instanced_arrays&&h["static"].elements){var ca=!0;c=V.program.attributes.map(function(c){c=p["static"][c];ca=ca&&!!c;return c});if(ca&&0<c.length){var g=r.getVAO(r.createVAO({attributes:c,
elements:h["static"].elements}));v.drawVAO=new x(null,null,null,function(c,p){return c.link(g)});v.useVAO=!0}}k?v.useVAO=!0:v.attributes=oa(p,b);v.context=Da(f,b);return v}function Z(c,p,a){var f=c.shared.context,b=c.scope();d(a).forEach(function(e){p.save(f,"."+e);var t=a[e].append(c,p);Array.isArray(t)?b(f,".",e,"=[",t.join(),"];"):b(f,".",e,"=",t,";")});p(b)}function Ca(c,p,a,f){var b=c.shared,e=b.gl,t=b.framebuffer,d;za&&(d=p.def(b.extensions,".webgl_draw_buffers"));var l=c.constants,b=l.drawBuffer,
l=l.backBuffer;c=a?a.append(c,p):p.def(t,".next");f||p("if(",c,"!==",t,".cur){");p("if(",c,"){",e,".bindFramebuffer(",36160,",",c,".framebuffer);");za&&p(d,".drawBuffersWEBGL(",b,"[",c,".colorAttachments.length]);");p("}else{",e,".bindFramebuffer(",36160,",null);");za&&p(d,".drawBuffersWEBGL(",l,");");p("}",t,".cur=",c,";");f||p("}")}function ia(c,p,a){var f=c.shared,b=f.gl,e=c.current,t=c.next,l=f.current,x=f.next,r=c.cond(l,".dirty");va.forEach(function(p){p=R(p);if(!(p in a.state)){var f,d;if(p in
t){f=t[p];d=e[p];var D=u(ha[p].length,function(c){return r.def(f,"[",c,"]")});r(c.cond(D.map(function(c,p){return c+"!=="+d+"["+p+"]"}).join("||")).then(b,".",Ga[p],"(",D,");",D.map(function(c,p){return d+"["+p+"]="+c}).join(";"),";"))}else f=r.def(x,".",p),D=c.cond(f,"!==",l,".",p),r(D),p in Ka?D(c.cond(f).then(b,".enable(",Ka[p],");")["else"](b,".disable(",Ka[p],");"),l,".",p,"=",f,";"):D(b,".",Ga[p],"(",f,");",l,".",p,"=",f,";")}});0===d(a.state).length&&r(l,".dirty=false;");p(r)}function ka(c,
p,a,f){var e=c.shared,t=c.current,x=e.current,r=e.gl;b(d(a)).forEach(function(b){var e=a[b];if(!f||f(e)){var d=e.append(c,p);if(Ka[b]){var D=Ka[b];l(e)?d?p(r,".enable(",D,");"):p(r,".disable(",D,");"):p(c.cond(d).then(r,".enable(",D,");")["else"](r,".disable(",D,");"));p(x,".",b,"=",d,";")}else if(A(d)){var k=t[b];p(r,".",Ga[b],"(",d,");",d.map(function(c,p){return k+"["+p+"]="+c}).join(";"),";")}else p(r,".",Ga[b],"(",d,");",x,".",b,"=",d,";")}})}function Ba(c,p){ma&&(c.instancing=p.def(c.shared.extensions,
".angle_instanced_arrays"))}function Qa(c,p,a,f,b){function e(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function t(c){y=p.def();c(y,"=",e(),";");"string"===typeof b?c(D,".count+=",b,";"):c(D,".count++;");aa&&(f?(h=p.def(),c(h,"=",v,".getNumPendingQueries();")):c(v,".beginQuery(",D,");"))}function d(c){c(D,".cpuTime+=",e(),"-",y,";");aa&&(f?c(v,".pushScopeStats(",h,",",v,".getNumPendingQueries(),",D,");"):c(v,".endQuery();"))}function x(c){var a=p.def(k,".profile");
p(k,".profile=",c,";");p.exit(k,".profile=",a,";")}var r=c.shared,D=c.stats,k=r.current,v=r.timer;a=a.profile;var y,h;if(a){if(l(a)){a.enable?(t(p),d(p.exit),x("true")):x("false");return}a=a.append(c,p);x(a)}else a=p.def(k,".profile");r=c.block();t(r);p("if(",a,"){",r,"}");c=c.block();d(c);p.exit("if(",a,"){",c,"}")}function Aa(c,p,a,f,b){function t(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function l(a,f,b){function e(){p("if(!",D,".buffer){",d,".enableVertexAttribArray(",r,");}");var a=b.type,t;t=b.size?p.def(b.size,"||",f):f;p("if(",D,".type!==",a,"||",D,".size!==",t,"||",y.map(function(c){return D+"."+c+"!=="+b[c]}).join("||"),"){",d,".bindBuffer(",34962,",",k,".buffer);",d,".vertexAttribPointer(",[r,t,a,b.normalized,b.stride,b.offset],");",D,".type=",a,";",D,".size=",t,";",y.map(function(c){return D+"."+c+"="+b[c]+";"}).join(""),"}");ma&&(a=b.divisor,p("if(",D,".divisor!==",a,"){",
c.instancing,".vertexAttribDivisorANGLE(",[r,a],");",D,".divisor=",a,";}"))}function t(){p("if(",D,".buffer){",d,".disableVertexAttribArray(",r,");",D,".buffer=null;","}if(",E.map(function(c,p){return D+"."+c+"!=="+v[p]}).join("||"),"){",d,".vertexAttrib4f(",r,",",v,");",E.map(function(c,p){return D+"."+c+"="+v[p]+";"}).join(""),"}")}var d=x.gl,r=p.def(a,".location"),D=p.def(x.attributes,"[",r,"]");a=b.state;var k=b.buffer,v=[b.x,b.y,b.z,b.w],y=["buffer","normalized","offset","stride"];1===a?e():
2===a?t():(p("if(",a,"===",1,"){"),e(),p("}else{"),t(),p("}"))}var x=c.shared;f.forEach(function(f){var x=f.name,r=a.attributes[x],D;if(r){if(!b(r))return;D=r.append(c,p)}else{if(!b(Q))return;var k=c.scopeAttrib(x);e.optional(function(){c.assert(p,k+".state","missing attribute "+x)});D={};d(new xa).forEach(function(c){D[c]=p.def(k,".",c)})}l(c.link(f),t(f.info.type),D)})}function Hb(c,p,a,f,b,t){for(var d=c.shared,x=d.gl,r,D=0;D<f.length;++D){var k=f[D],v=k.name,y=k.info.type,h=a.uniforms[v],k=c.link(k)+
".location",F;if(h){if(!b(h))continue;if(l(h)){var V=h.value;e.command(null!==V&&"undefined"!==typeof V,'missing uniform "'+v+'"',c.commandStr);if(35678===y||35680===y)e.command("function"===typeof V&&(35678===y&&("texture2d"===V._reglType||"framebuffer"===V._reglType)||35680===y&&("textureCube"===V._reglType||"framebufferCube"===V._reglType)),"invalid texture for uniform "+v,c.commandStr),h=c.link(V._texture||V.color[0]._texture),p(x,".uniform1i(",k,",",h+".bind());"),p.exit(h,".unbind();");else if(35674===
y||35675===y||35676===y){e.optional(function(){e.command(A(V),"invalid matrix for uniform "+v,c.commandStr);e.command(35674===y&&4===V.length||35675===y&&9===V.length||35676===y&&16===V.length,"invalid length for matrix uniform "+v,c.commandStr)});var h=c.global.def("new Float32Array(["+Array.prototype.slice.call(V)+"])"),G=2;35675===y?G=3:35676===y&&(G=4);p(x,".uniformMatrix",G,"fv(",k,",false,",h,");")}else{switch(y){case 5126:e.commandType(V,"number","uniform "+v,c.commandStr);r="1f";break;case 35664:e.command(A(V)&&
2===V.length,"uniform "+v,c.commandStr);r="2f";break;case 35665:e.command(A(V)&&3===V.length,"uniform "+v,c.commandStr);r="3f";break;case 35666:e.command(A(V)&&4===V.length,"uniform "+v,c.commandStr);r="4f";break;case 35670:e.commandType(V,"boolean","uniform "+v,c.commandStr);r="1i";break;case 5124:e.commandType(V,"number","uniform "+v,c.commandStr);r="1i";break;case 35671:e.command(A(V)&&2===V.length,"uniform "+v,c.commandStr);r="2i";break;case 35667:e.command(A(V)&&2===V.length,"uniform "+v,c.commandStr);
r="2i";break;case 35672:e.command(A(V)&&3===V.length,"uniform "+v,c.commandStr);r="3i";break;case 35668:e.command(A(V)&&3===V.length,"uniform "+v,c.commandStr);r="3i";break;case 35673:e.command(A(V)&&4===V.length,"uniform "+v,c.commandStr);r="4i";break;case 35669:e.command(A(V)&&4===V.length,"uniform "+v,c.commandStr),r="4i"}p(x,".uniform",r,"(",k,",",A(V)?Array.prototype.slice.call(V):V,");")}continue}else F=h.append(c,p)}else{if(!b(Q))continue;F=p.def(d.uniforms,"[",g.id(v),"]")}35678===y?(e(!Array.isArray(F),
"must specify a scalar prop for textures"),p("if(",F,"&&",F,'._reglType==="framebuffer"){',F,"=",F,".color[0];","}")):35680===y&&(e(!Array.isArray(F),"must specify a scalar prop for cube maps"),p("if(",F,"&&",F,'._reglType==="framebufferCube"){',F,"=",F,".color[0];","}"));e.optional(function(){function a(f,b){c.assert(p,f,'bad data or missing for uniform "'+v+'".  '+b)}function f(c){e(!Array.isArray(F),"must not specify an array type for uniform");a("typeof "+F+'==="'+c+'"',"invalid type, expected "+
c)}function b(p,f){Array.isArray(F)?e(F.length===p,"must have length "+p):a(d.isArrayLike+"("+F+")&&"+F+".length==="+p,"invalid vector, should have length "+p,c.commandStr)}function t(p){e(!Array.isArray(F),"must not specify a value type");a("typeof "+F+'==="function"&&'+F+'._reglType==="texture'+(3553===p?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(y){case 5124:f("number");break;case 35667:b(2,"number");break;case 35668:b(3,"number");break;case 35669:b(4,"number");break;case 5126:f("number");
break;case 35664:b(2,"number");break;case 35665:b(3,"number");break;case 35666:b(4,"number");break;case 35670:f("boolean");break;case 35671:b(2,"boolean");break;case 35672:b(3,"boolean");break;case 35673:b(4,"boolean");break;case 35674:b(4,"number");break;case 35675:b(9,"number");break;case 35676:b(16,"number");break;case 35678:t(3553);break;case 35680:t(34067)}});h=1;switch(y){case 35678:case 35680:h=p.def(F,"._texture");p(x,".uniform1i(",k,",",h,".bind());");p.exit(h,".unbind();");continue;case 5124:case 35670:r=
"1i";break;case 35667:case 35671:r="2i";h=2;break;case 35668:case 35672:r="3i";h=3;break;case 35669:case 35673:r="4i";h=4;break;case 5126:r="1f";break;case 35664:r="2f";h=2;break;case 35665:r="3f";h=3;break;case 35666:r="4f";h=4;break;case 35674:r="Matrix2fv";break;case 35675:r="Matrix3fv";break;case 35676:r="Matrix4fv"}if("M"===r.charAt(0)){p(x,".uniform",r,"(",k,",");var k=Math.pow(y-35674+2,2),ca=c.global.def("new Float32Array(",k,")");Array.isArray(F)?p("false,(",u(k,function(c){return ca+"["+
c+"]="+F[c]}),",",ca,")"):p("false,(Array.isArray(",F,")||",F," instanceof Float32Array)?",F,":(",u(k,function(c){return ca+"["+c+"]="+F+"["+c+"]"}),",",ca,")");p(");")}else{if(1<h){for(var G=[],ga=[],W=0;W<h;++W)Array.isArray(F)?ga.push(F[W]):ga.push(p.def(F+"["+W+"]")),t&&G.push(p.def());t&&p("if(!",c.batchId,"||",G.map(function(c,p){return c+"!=="+ga[p]}).join("||"),"){",G.map(function(c,p){return c+"="+ga[p]+";"}).join(""));p(x,".uniform",r,"(",k,",",ga.join(","),");")}else e(!Array.isArray(F),
"uniform value must not be an array"),t&&(h=p.def(),p("if(!",c.batchId,"||",h,"!==",F,"){",h,"=",F,";")),p(x,".uniform",r,"(",k,",",F,");");t&&p("}")}}}function $a(c,p,a,f){function b(e){var t=k[e];return t?t.contextDep&&f.contextDynamic||t.propDep?t.append(c,a):t.append(c,p):p.def(D,".",e)}function t(){function c(){a(G,".drawElementsInstancedANGLE(",[y,F,u,h+"<<(("+u+"-5121)>>1)",V],");")}function p(){a(G,".drawArraysInstancedANGLE(",[y,h,F,V],");")}v&&"null"!==v?ca?c():(a("if(",v,"){"),c(),a("}else{"),
p(),a("}")):p()}function d(){function c(){a(r+".drawElements("+[y,F,u,h+"<<(("+u+"-5121)>>1)"]+");")}function p(){a(r+".drawArrays("+[y,h,F]+");")}v&&"null"!==v?ca?c():(a("if(",v,"){"),c(),a("}else{"),p(),a("}")):p()}var x=c.shared,r=x.gl,D=x.draw,k=f.draw,v=function(){var b=k.elements,e=p;if(b){if(b.contextDep&&f.contextDynamic||b.propDep)e=a;b=b.append(c,e);k.elementsActive&&e("if("+b+")"+r+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=e.def(),e(b,"=",D,".","elements",";","if(",b,"){",r,".bindBuffer(",
34963,",",b,".buffer.buffer);}","else if(",x.vao,".currentVAO){",b,"=",c.shared.elements+".getElements("+x.vao,".currentVAO.elements);",Fa?"":"if("+b+")"+r+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),y=b("primitive"),h=b("offset"),F=function(){var b=k.count,t,d=p;if(b){if(b.contextDep&&f.contextDynamic||b.propDep)d=a;t=b.append(c,d);e.optional(function(){b.MISSING&&c.assert(p,"false","missing vertex count");b.DYNAMIC&&c.assert(d,t+">=0","missing vertex count")})}else t=d.def(D,".",
"count"),e.optional(function(){c.assert(d,t+">=0","missing vertex count")});return t}();if("number"===typeof F){if(0===F)return}else a("if(",F,"){"),a.exit("}");var V,G;ma&&(V=b("instances"),G=c.instancing);var u=v+".type",ca=k.elements&&l(k.elements)&&!k.vaoActive;ma&&("number"!==typeof V||0<=V)?"string"===typeof V?(a("if(",V,">0){"),t(),a("}else if(",V,"<0){"),d(),a("}")):t():d()}function V(c,p,a,f,b){var t=O();b=t.proc("body",b);e.optional(function(){t.commandStr=p.commandStr;t.command=t.link(p.commandStr)});
ma&&(t.instancing=b.def(t.shared.extensions,".angle_instanced_arrays"));c(t,b,a,f);return t.compile().body}function ca(c,p,a,f){Ba(c,p);a.useVAO?a.drawVAO?p(c.shared.vao,".setVAO(",a.drawVAO.append(c,p),");"):p(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(p(c.shared.vao,".setVAO(null);"),Aa(c,p,a,f.attributes,function(){return!0}));Hb(c,p,a,f.uniforms,function(){return!0},!1);$a(c,p,p,a)}function sa(c,p){var a=c.proc("draw",1);Ba(c,a);Z(c,a,p.context);Ca(c,a,p.framebuffer);ia(c,a,p);ka(c,
a,p.state);Qa(c,a,p,!1,!0);var f=p.shader.progVar.append(c,a);a(c.shared.gl,".useProgram(",f,".program);");if(p.shader.program)ca(c,a,p,p.shader.program);else{a(c.shared.vao,".setVAO(null);");var b=c.global.def("{}"),e=a.def(f,".id"),t=a.def(b,"[",e,"]");a(c.cond(t).then(t,".call(this,a0);")["else"](t,"=",b,"[",e,"]=",c.link(function(a){return V(ca,c,p,a,1)}),"(",f,");",t,".call(this,a0);"))}0<d(p.state).length&&a(c.shared.current,".dirty=true;");c.shared.vao&&a(c.shared.vao,".setVAO(null);")}function wa(c,
p,a,f){function b(){return!0}c.batchId="a1";Ba(c,p);Aa(c,p,a,f.attributes,b);Hb(c,p,a,f.uniforms,b,!1);$a(c,p,p,a)}function Ea(c,p,a,f){function b(c){return c.contextDep&&e||c.propDep}function t(c){return!b(c)}Ba(c,p);var e=a.contextDep,d=p.def(),x=p.def();c.shared.props=x;c.batchId=d;var l=c.scope(),r=c.scope();p(l.entry,"for(",d,"=0;",d,"<","a1",";++",d,"){",x,"=","a0","[",d,"];",r,"}",l.exit);a.needsContext&&Z(c,r,a.context);a.needsFramebuffer&&Ca(c,r,a.framebuffer);ka(c,r,a.state,b);a.profile&&
b(a.profile)&&Qa(c,r,a,!1,!0);f?(a.useVAO?a.drawVAO?b(a.drawVAO)?r(c.shared.vao,".setVAO(",a.drawVAO.append(c,r),");"):l(c.shared.vao,".setVAO(",a.drawVAO.append(c,l),");"):l(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(l(c.shared.vao,".setVAO(null);"),Aa(c,l,a,f.attributes,t),Aa(c,r,a,f.attributes,b)),Hb(c,l,a,f.uniforms,t,!1),Hb(c,r,a,f.uniforms,b,!0),$a(c,l,r,a)):(p=c.global.def("{}"),f=a.shader.progVar.append(c,r),x=r.def(f,".id"),l=r.def(p,"[",x,"]"),r(c.shared.gl,".useProgram(",f,".program);",
"if(!",l,"){",l,"=",p,"[",x,"]=",c.link(function(p){return V(wa,c,a,p,2)}),"(",f,");}",l,".call(this,a0[",d,"],",d,");"))}function mb(c,p){function a(c){return c.contextDep&&b||c.propDep}var f=c.proc("batch",2);c.batchId="0";Ba(c,f);var b=!1,t=!0;d(p.context).forEach(function(c){b=b||p.context[c].propDep});b||(Z(c,f,p.context),t=!1);var e=p.framebuffer,x=!1;e?(e.propDep?b=x=!0:e.contextDep&&b&&(x=!0),x||Ca(c,f,e)):Ca(c,f,null);p.state.viewport&&p.state.viewport.propDep&&(b=!0);ia(c,f,p);ka(c,f,p.state,
function(c){return!a(c)});p.profile&&a(p.profile)||Qa(c,f,p,!1,"a1");p.contextDep=b;p.needsContext=t;p.needsFramebuffer=x;t=p.shader.progVar;if(t.contextDep&&b||t.propDep)Ea(c,f,p,null);else if(t=t.append(c,f),f(c.shared.gl,".useProgram(",t,".program);"),p.shader.program)Ea(c,f,p,p.shader.program);else{f(c.shared.vao,".setVAO(null);");var e=c.global.def("{}"),x=f.def(t,".id"),l=f.def(e,"[",x,"]");f(c.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",e,"[",x,"]=",c.link(function(a){return V(Ea,c,
p,a,2)}),"(",t,");",l,".call(this,a0,a1);"))}0<d(p.state).length&&f(c.shared.current,".dirty=true;");c.shared.vao&&f(c.shared.vao,".setVAO(null);")}function Gb(c,p){function a(b){var e=p.shader[b];e&&f.set(t.shader,"."+b,e.append(c,f))}var f=c.proc("scope",3);c.batchId="a2";var t=c.shared,e=t.current;Z(c,f,p.context);p.framebuffer&&p.framebuffer.append(c,f);b(d(p.state)).forEach(function(a){var b=p.state[a].append(c,f);A(b)?b.forEach(function(p,b){f.set(c.next[a],"["+b+"]",p)}):f.set(t.next,"."+a,
b)});Qa(c,f,p,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(a){var b=p.draw[a];b&&f.set(t.draw,"."+a,""+b.append(c,f))});d(p.uniforms).forEach(function(a){var b=p.uniforms[a].append(c,f);Array.isArray(b)&&(b="["+b.join()+"]");f.set(t.uniforms,"["+g.id(a)+"]",b)});d(p.attributes).forEach(function(a){var b=p.attributes[a].append(c,f),t=c.scopeAttrib(a);d(new xa).forEach(function(c){f.set(t,"."+c,b[c])})});p.scopeVAO&&f.set(t.vao,".targetVAO",p.scopeVAO.append(c,f));a("vert");
a("frag");0<d(p.state).length&&(f(e,".dirty=true;"),f.exit(e,".dirty=true;"));f("a1(",c.shared.context,",a0,",c.batchId,");")}function fa(c){if("object"===typeof c&&!A(c)){for(var p=d(c),a=0;a<p.length;++a)if(n.isDynamic(c[p[a]]))return!0;return!1}}function W(c,p,a){function b(c,p){x.forEach(function(a){var f=t[a];n.isDynamic(f)&&(f=c.invoke(p,f),p(k,".",a,"=",f,";"))})}var t=p["static"][a];if(t&&fa(t)){var e=c.global,x=d(t),l=!1,r=!1,D=!1,k=c.global.def("{}");x.forEach(function(p){var a=t[p];if(n.isDynamic(a))"function"===
typeof a&&(a=t[p]=n.unbox(a)),p=f(a,null),l=l||p.thisDep,D=D||p.propDep,r=r||p.contextDep;else{e(k,".",p,"=");switch(typeof a){case "number":e(a);break;case "string":e('"',a,'"');break;case "object":Array.isArray(a)&&e("[",a.join(),"]");break;default:e(c.link(a))}e(";")}});p.dynamic[a]=new n.DynamicVariable(4,{thisDep:l,contextDep:r,propDep:D,ref:k,append:b});delete p["static"][a]}}var xa=r.Record,Ia={add:32774,subtract:32778,"reverse subtract":32779};pa.ext_blend_minmax&&(Ia.min=32775,Ia.max=32776);
var ma=pa.angle_instanced_arrays,za=pa.webgl_draw_buffers,Fa=pa.oes_vertex_array_object,ha={dirty:!0,profile:T.profile},Y={},va=[],Ka={},Ga={};N("dither",3024);N("blend.enable",3042);F("blend.color","blendColor",[0,0,0,0]);F("blend.equation","blendEquationSeparate",[32774,32774]);F("blend.func","blendFuncSeparate",[1,0,1,0]);N("depth.enable",2929,!0);F("depth.func","depthFunc",513);F("depth.range","depthRange",[0,1]);F("depth.mask","depthMask",!0);F("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",
2884);F("cull.face","cullFace",1029);F("frontFace","frontFace",2305);F("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);F("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);F("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);F("stencil.mask","stencilMask",-1);F("stencil.func","stencilFunc",[519,0,-1]);F("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);F("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",
3089);F("scissor.box","scissor",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);F("viewport","viewport",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);var eb={gl:h,context:U,strings:g,next:Y,current:ha,draw:na,elements:t,buffer:K,shader:la,attributes:r.state,vao:r,uniforms:D,framebuffer:c,extensions:pa,timer:aa,isBufferArgs:a},ba={primTypes:ua,compareFuncs:y,blendFuncs:H,blendEquations:Ia,stencilOps:v,glTypes:m,orientationType:L};e.optional(function(){eb.isArrayLike=A});za&&(ba.backBuffer=[1029],
ba.drawBuffer=u(I.maxDrawbuffers,function(c){return 0===c?[0]:u(c,function(c){return 36064+c})}));var Gc=0;return{next:Y,current:ha,procs:function(){var c=O(),p=c.proc("poll"),a=c.proc("refresh"),f=c.block();p(f);a(f);var b=c.shared,t=b.gl,e=b.next,x=b.current;f(x,".dirty=false;");Ca(c,p);Ca(c,a,null,!0);var l;ma&&(l=c.link(ma));pa.oes_vertex_array_object&&a(c.link(pa.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var r=0;r<I.maxAttributes;++r){var D=a.def(b.attributes,"[",r,"]"),k=c.cond(D,
".buffer");k.then(t,".enableVertexAttribArray(",r,");",t,".bindBuffer(",34962,",",D,".buffer.buffer);",t,".vertexAttribPointer(",r,",",D,".size,",D,".type,",D,".normalized,",D,".stride,",D,".offset);")["else"](t,".disableVertexAttribArray(",r,");",t,".vertexAttrib4f(",r,",",D,".x,",D,".y,",D,".z,",D,".w);",D,".buffer=null;");a(k);ma&&a(l,".vertexAttribDivisorANGLE(",r,",",D,".divisor);")}a(c.shared.vao,".currentVAO=null;",c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);");d(Ka).forEach(function(b){var d=
Ka[b],l=f.def(e,".",b),r=c.block();r("if(",l,"){",t,".enable(",d,")}else{",t,".disable(",d,")}",x,".",b,"=",l,";");a(r);p("if(",l,"!==",x,".",b,"){",r,"}")});d(Ga).forEach(function(b){var d=Ga[b],l=ha[b],r,D,k=c.block();k(t,".",d,"(");A(l)?(d=l.length,r=c.global.def(e,".",b),D=c.global.def(x,".",b),k(u(d,function(c){return r+"["+c+"]"}),");",u(d,function(c){return D+"["+c+"]="+r+"["+c+"];"}).join("")),p("if(",u(d,function(c){return r+"["+c+"]!=="+D+"["+c+"]"}).join("||"),"){",k,"}")):(r=f.def(e,".",
b),D=f.def(x,".",b),k(r,");",x,".",b,"=",r,";"),p("if(",r,"!==",D,"){",k,"}"));a(k)});return c.compile()}(),compile:function(c,p,a,f,b){var t=O();t.stats=t.link(b);d(p["static"]).forEach(function(c){W(t,p,c)});J.forEach(function(p){W(t,c,p)});var e=ya(c,p,a,f,t);sa(t,e);Gb(t,e);mb(t,e);return ga(t.compile(),{destroy:function(){e.shader.program.destroy()}})}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./dynamic":10,"./util/check":22,"./util/codegen":24,"./util/extend":26,"./util/is-array-like":28,
"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/loop":32,"./util/sorted-object-keys":35}],10:[function(g,q,z){function a(a,b){this.id=f++;this.type=a;this.data=b}function b(a){if(0===a.length)return[];var f=a.charAt(0),l=a.charAt(a.length-1);if(1<a.length&&f===l&&('"'===f||"'"===f))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(f=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,f.index)).concat(b(f[1])).concat(b(a.substr(f.index+
f[0].length)));f=a.split(".");if(1===f.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(l=0;l<f.length;++l)a=a.concat(b(f[l]));return a}function x(a){return"["+b(a).join("][")+"]"}function l(f,b){if("function"===typeof f)return new a(0,f);if("number"===typeof f||"boolean"===typeof f)return new a(5,f);if(Array.isArray(f))return new a(6,f.map(function(a,f){return l(a,b+"["+f+"]")}));if(f instanceof a)return f;k(!1,"invalid option type in uniform "+b)}var k=g("./util/check"),
f=0;q.exports={DynamicVariable:a,define:function(f,b){return new a(f,x(b+""))},isDynamic:function(f){return"function"===typeof f&&!f._reglType||f instanceof a},unbox:l,accessor:x}},{"./util/check":22}],11:[function(g,q,z){var a=g("./util/check"),b=g("./util/is-typed-array"),x=g("./util/is-ndarray"),l=g("./util/values"),k=g("./constants/primitives.json"),f=g("./constants/usage.json");q.exports=function(d,e,g,w){function u(a){this.id=n++;A[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=
0}function pa(f,l,k,h,y,v,u){f.buffer.bind();var A;l?((A=u)||b(l)&&(!x(l)||b(l.data))||(A=e.oes_element_index_uint?5125:5123),g._initBuffer(f.buffer,l,k,A,3)):(d.bufferData(34963,v,k),f.buffer.dtype=A||5121,f.buffer.usage=k,f.buffer.dimension=3,f.buffer.byteLength=v);A=u;if(!u){switch(f.buffer.dtype){case 5121:case 5120:A=5121;break;case 5123:case 5122:A=5123;break;case 5125:case 5124:A=5125;break;default:a.raise("unsupported type for element array")}f.buffer.dtype=A}f.type=A;a(5125!==A||!!e.oes_element_index_uint,
"32 bit element buffers not supported, enable oes_element_index_uint first");l=y;0>l&&(l=f.buffer.byteLength,5123===A?l>>=1:5125===A&&(l>>=2));f.vertCount=l;l=h;0>h&&(l=4,h=f.buffer.dimension,1===h&&(l=0),2===h&&(l=1),3===h&&(l=4));f.primType=l}function h(f){w.elementsCount--;a(null!==f.buffer,"must not double destroy elements");delete A[f.id];f.buffer.destroy();f.buffer=null}var A={},n=0,ua={uint8:5121,uint16:5123};e.oes_element_index_uint&&(ua.uint32=5125);u.prototype.bind=function(){this.buffer.bind()};
var m=[];return{create:function(e,l){function d(e){if(e)if("number"===typeof e)A(e),y.primType=4,y.vertCount=e|0,y.type=5121;else{var l=null,h=35044,u=-1,g=-1,ga=0,w=0;if(Array.isArray(e)||b(e)||x(e))l=e;else if(a.type(e,"object","invalid arguments for elements"),"data"in e&&(l=e.data,a(Array.isArray(l)||b(l)||x(l),"invalid data for element buffer")),"usage"in e&&(a.parameter(e.usage,f,"invalid element buffer usage"),h=f[e.usage]),"primitive"in e&&(a.parameter(e.primitive,k,"invalid element buffer primitive"),
u=k[e.primitive]),"count"in e&&(a("number"===typeof e.count&&0<=e.count,"invalid vertex count for elements"),g=e.count|0),"type"in e&&(a.parameter(e.type,ua,"invalid buffer type"),w=ua[e.type]),"length"in e)ga=e.length|0;else if(ga=g,5123===w||5122===w)ga*=2;else if(5125===w||5124===w)ga*=4;pa(y,l,h,u,g,ga,w)}else A(),y.primType=4,y.vertCount=0,y.type=5121;return d}var A=g.create(null,34963,!0),y=new u(A._buffer);w.elementsCount++;d(e);d._reglType="elements";d._elements=y;d.subdata=function(a,f){A.subdata(a,
f);return d};d.destroy=function(){h(y)};return d},createStream:function(a){var f=m.pop();f||(f=new u(g.create(null,34963,!0,!1)._buffer));pa(f,a,35040,-1,-1,0,0);return f},destroyStream:function(a){m.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof u?a._elements:null},clear:function(){l(A).forEach(h)}}}},{"./constants/primitives.json":7,"./constants/usage.json":8,"./util/check":22,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/values":37}],12:[function(g,
q,z){var a=g("./util/sorted-object-keys"),b=g("./util/check");q.exports=function(x,l){function k(a){b.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=f[a]=x.getExtension(a)}catch(l){}return!!e}for(var f={},d=0;d<l.extensions.length;++d){var e=l.extensions[d];if(!k(e))return l.onDestroy(),l.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}l.optionalExtensions.forEach(k);return{extensions:f,
restore:function(){a(f).forEach(function(a){if(f[a]&&!k(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":22,"./util/sorted-object-keys":35}],13:[function(g,q,z){var a=g("./util/check"),b=g("./util/values"),x=g("./util/extend"),l=[6407,6408],k=[];k[6408]=4;k[6407]=3;var f=[];f[5121]=1;f[5126]=4;f[36193]=2;var d=[32854,32855,36194,35907,34842,34843,34836],e={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};q.exports=function(g,w,u,pa,h,A){function n(c,p,a){this.target=c;this.texture=p;this.renderbuffer=a;var f=c=0;p?(c=p.width,f=p.height):a&&(c=a.width,f=a.height);this.width=c;this.height=f}function ua(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function m(c,p,f){if(c){if(c.texture){c=c.texture._texture;var b=Math.max(1,c.height);a(Math.max(1,c.width)===p&&b===f,"inconsistent width/height for supplied texture")}else c=c.renderbuffer._renderbuffer,
a(c.width===p&&c.height===f,"inconsistent width/height for renderbuffer");c.refCount+=1}}function E(c,p){p&&(p.texture?g.framebufferTexture2D(36160,c,p.target,p.texture._texture.texture,0):g.framebufferRenderbuffer(36160,c,36161,p.renderbuffer._renderbuffer.renderbuffer))}function J(c){var p=3553,f=null,b=null,t=c;"object"===typeof c&&(t=c.data,"target"in c&&(p=c.target|0));a.type(t,"function","invalid attachment data");c=t._reglType;"texture2d"===c?(f=t,a(3553===p)):"textureCube"===c?(f=t,a(34069<=
p&&34075>p,"invalid cube map target")):"renderbuffer"===c?(b=t,p=36161):a.raise("invalid regl object for attachment");return new n(p,f,b)}function H(c,p,a,f,b){if(a)return c=pa.create2D({width:c,height:p,format:f,type:b}),c._texture.refCount=0,new n(3553,c,null);c=h.create({width:c,height:p,format:f});c._renderbuffer.refCount=0;return new n(36161,null,c)}function ea(c){return c&&(c.texture||c.renderbuffer)}function y(c,p,a){c&&(c.texture?c.texture.resize(p,a):c.renderbuffer&&c.renderbuffer.resize(p,
a),c.width=p,c.height=a)}function v(){this.id=t++;p[this.id]=this;this.framebuffer=g.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function S(c){c.colorAttachments.forEach(ua);ua(c.depthAttachment);ua(c.stencilAttachment);ua(c.depthStencilAttachment)}function L(c){var f=c.framebuffer;a(f,"must not double destroy framebuffer");g.deleteFramebuffer(f);c.framebuffer=null;A.framebufferCount--;delete p[c.id]}
function Q(c){var p;g.bindFramebuffer(36160,c.framebuffer);var f=c.colorAttachments;for(p=0;p<f.length;++p)E(36064+p,f[p]);for(p=f.length;p<u.maxColorAttachments;++p)g.framebufferTexture2D(36160,36064+p,3553,null,0);g.framebufferTexture2D(36160,33306,3553,null,0);g.framebufferTexture2D(36160,36096,3553,null,0);g.framebufferTexture2D(36160,36128,3553,null,0);E(36096,c.depthAttachment);E(36128,c.stencilAttachment);E(33306,c.depthStencilAttachment);c=g.checkFramebufferStatus(36160);g.isContextLost()||
36053===c||a.raise("framebuffer configuration not supported, status = "+e[c]);g.bindFramebuffer(36160,B.next?B.next.framebuffer:null);B.cur=B.next;g.getError()}function C(c,p){function b(c,p){var e;a(B.next!==t,"can not update framebuffer which is currently in use");var x=0,D=0,v=!0,h=!0;e=null;var y=!0,g="rgba",A="uint8",C=1,G=null,ga=null,pa=null,n=!1;if("number"===typeof c)x=c|0,D=p|0||x;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(D=c.shape,a(Array.isArray(D)&&
2<=D.length,"invalid shape for framebuffer"),x=D[0],D=D[1]):("radius"in c&&(x=D=c.radius),"width"in c&&(x=c.width),"height"in c&&(D=c.height));if("color"in c||"colors"in c)e=c.color||c.colors,Array.isArray(e)&&a(1===e.length||w.webgl_draw_buffers,"multiple render targets not supported");if(!e){"colorCount"in c&&(C=c.colorCount|0,a(0<C,"invalid color buffer count"));"colorTexture"in c&&(y=!!c.colorTexture,g="rgba4");if("colorType"in c){A=c.colorType;if(y)a(w.oes_texture_float||!("float"===A||"float32"===
A),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(w.oes_texture_half_float||!("half float"===A||"float16"===A),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===A||"float16"===A)a(w.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),g="rgba16f";else if("float"===A||"float32"===A)a(w.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
g="rgba32f";a.oneOf(A,K,"invalid color type")}"colorFormat"in c&&(g=c.colorFormat,0<=q.indexOf(g)?y=!0:0<=I.indexOf(g)?y=!1:a.optional(function(){if(y)a.oneOf(c.colorFormat,q,"invalid color format for texture");else a.oneOf(c.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)n=!(!c.depthTexture&&!c.depthStencilTexture),a(!n||w.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?v=c.depth:
(G=c.depth,h=!1));"stencil"in c&&("boolean"===typeof c.stencil?h=c.stencil:(ga=c.stencil,v=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?v=h=c.depthStencil:(pa=c.depthStencil,h=v=!1))}else x=D=1;var L=null,E=null,ua=null,ya=null;if(Array.isArray(e))L=e.map(J);else if(e)L=[J(e)];else for(L=Array(C),e=0;e<C;++e)L[e]=H(x,D,y,g,A);a(w.webgl_draw_buffers||1>=L.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(L.length<=u.maxColorAttachments,
"too many color attachments, not supported");x=x||L[0].width;D=D||L[0].height;G?E=J(G):v&&!h&&(E=H(x,D,n,"depth","uint32"));ga?ua=J(ga):h&&!v&&(ua=H(x,D,!1,"stencil","uint8"));pa?ya=J(pa):!G&&!ga&&h&&v&&(ya=H(x,D,n,"depth stencil","depth stencil"));a(1>=!!G+!!ga+!!pa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");v=null;for(e=0;e<L.length;++e)m(L[e],x,D),a(!L[e]||L[e].texture&&0<=l.indexOf(L[e].texture._texture.format)||L[e].renderbuffer&&0<=d.indexOf(L[e].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+e+" is invalid"),L[e]&&L[e].texture&&(h=k[L[e].texture._texture.format]*f[L[e].texture._texture.type],null===v?v=h:a(v===h,"all color attachments much have the same number of bits per pixel."));m(E,x,D);a(!E||E.texture&&6402===E.texture._texture.format||E.renderbuffer&&33189===E.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");m(ua,x,D);a(!ua||ua.renderbuffer&&36168===ua.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
m(ya,x,D);a(!ya||ya.texture&&34041===ya.texture._texture.format||ya.renderbuffer&&34041===ya.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");S(t);t.width=x;t.height=D;t.colorAttachments=L;t.depthAttachment=E;t.stencilAttachment=ua;t.depthStencilAttachment=ya;b.color=L.map(ea);b.depth=ea(E);b.stencil=ea(ua);b.depthStencil=ea(ya);b.width=t.width;b.height=t.height;Q(t);return b}var t=new v;A.framebufferCount++;b(c,p);return x(b,{resize:function(c,p){a(B.next!==
t,"can not resize a framebuffer which is currently in use");var f=Math.max(c|0,1),e=Math.max(p|0||f,1);if(f===t.width&&e===t.height)return b;for(var l=t.colorAttachments,x=0;x<l.length;++x)y(l[x],f,e);y(t.depthAttachment,f,e);y(t.stencilAttachment,f,e);y(t.depthStencilAttachment,f,e);t.width=b.width=f;t.height=b.height=e;Q(t);return b},_reglType:"framebuffer",_framebuffer:t,destroy:function(){L(t);S(t)},use:function(c){B.setFBO({framebuffer:b},c)}})}var B={cur:null,next:null,dirty:!1,setFBO:null},
q=["rgba"],I=["rgba4","rgb565","rgb5 a1"];w.ext_srgb&&I.push("srgba");w.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");w.webgl_color_buffer_float&&I.push("rgba32f");var K=["uint8"];w.oes_texture_half_float&&K.push("half float","float16");w.oes_texture_float&&K.push("float","float32");var t=0,p={};return x(B,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof v)?c:null},create:C,createCube:function(c){function p(c){var b;a(0>
f.indexOf(B.next),"can not update framebuffer which is currently in use");var t={color:null},e=0,l=null;b="rgba";var d="uint8",k=1;if("number"===typeof c)e=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(e=c.shape,a(Array.isArray(e)&&2<=e.length,"invalid shape for framebuffer"),a(e[0]===e[1],"cube framebuffer must be square"),e=e[0]):("radius"in c&&(e=c.radius|0),"width"in c?(e=c.width|0,"height"in c&&a(c.height===e,"must be square")):"height"in c&&(e=c.height|0));
if("color"in c||"colors"in c)l=c.color||c.colors,Array.isArray(l)&&a(1===l.length||w.webgl_draw_buffers,"multiple render targets not supported");l||("colorCount"in c&&(k=c.colorCount|0,a(0<k,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,K,"invalid color type"),d=c.colorType),"colorFormat"in c&&(b=c.colorFormat,a.oneOf(c.colorFormat,q,"invalid color format for texture")));"depth"in c&&(t.depth=c.depth);"stencil"in c&&(t.stencil=c.stencil);"depthStencil"in c&&(t.depthStencil=
c.depthStencil)}else e=1;if(l)if(Array.isArray(l))for(c=[],b=0;b<l.length;++b)c[b]=l[b];else c=[l];else for(c=Array(k),l={radius:e,format:b,type:d},b=0;b<k;++b)c[b]=pa.createCube(l);t.color=Array(c.length);for(b=0;b<c.length;++b)k=c[b],a("function"===typeof k&&"textureCube"===k._reglType,"invalid cube map"),e=e||k.width,a(k.width===e&&k.height===e,"invalid cube map shape"),t.color[b]={target:34069,data:c[b]};for(b=0;6>b;++b){for(k=0;k<c.length;++k)t.color[k].target=34069+b;0<b&&(t.depth=f[0].depth,
t.stencil=f[0].stencil,t.depthStencil=f[0].depthStencil);if(f[b])f[b](t);else f[b]=C(t)}return x(p,{width:e,height:e,color:c})}var f=Array(6);p(c);return x(p,{faces:f,resize:function(c){var b=c|0;a(0<b&&b<=u.maxCubeMapSize,"invalid radius for cube fbo");if(b===p.width)return p;var e=p.color;for(c=0;c<e.length;++c)e[c].resize(b);for(c=0;6>c;++c)f[c].resize(b);p.width=p.height=b;return p},_reglType:"framebufferCube",destroy:function(){f.forEach(function(c){c.destroy()})}})},clear:function(){b(p).forEach(L)},
restore:function(){B.cur=null;B.next=null;B.dirty=!0;b(p).forEach(function(c){c.framebuffer=g.createFramebuffer();Q(c)})}})}},{"./util/check":22,"./util/extend":26,"./util/values":37}],14:[function(g,q,z){var a=g("./util/sorted-object-keys"),b=g("./util/pool");q.exports=function(x,l){var k=1;l.ext_texture_filter_anisotropic&&(k=x.getParameter(34047));var f=1,d=1;l.webgl_draw_buffers&&(f=x.getParameter(34852),d=x.getParameter(36063));var e=!!l.oes_texture_float;if(e){e=x.createTexture();x.bindTexture(3553,
e);x.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var g=x.createFramebuffer();x.bindFramebuffer(36160,g);x.framebufferTexture2D(36160,36064,3553,e,0);x.bindTexture(3553,null);if(36053!==x.checkFramebufferStatus(36160))e=!1;else{x.viewport(0,0,1,1);x.clearColor(1,0,0,1);x.clear(16384);var w=b.allocType(5126,4);x.readPixels(0,0,1,1,6408,5126,w);x.getError()?e=!1:(x.deleteFramebuffer(g),x.deleteTexture(e),e=1===w[0]);b.freeType(w)}}w=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(w=x.createTexture(),g=b.allocType(5121,36),x.activeTexture(33984),x.bindTexture(34067,w),x.texImage2D(34069,0,6408,3,3,0,6408,5121,g),b.freeType(g),x.bindTexture(34067,null),x.deleteTexture(w),w=!x.getError());return{colorBits:[x.getParameter(3410),x.getParameter(3411),x.getParameter(3412),x.getParameter(3413)],depthBits:x.getParameter(3414),stencilBits:x.getParameter(3415),subpixelBits:x.getParameter(3408),extensions:a(l).filter(function(a){return!!l[a]}),
maxAnisotropic:k,maxDrawbuffers:f,maxColorAttachments:d,pointSizeDims:x.getParameter(33901),lineWidthDims:x.getParameter(33902),maxViewportDims:x.getParameter(3386),maxCombinedTextureUnits:x.getParameter(35661),maxCubeMapSize:x.getParameter(34076),maxRenderbufferSize:x.getParameter(34024),maxTextureUnits:x.getParameter(34930),maxTextureSize:x.getParameter(3379),maxAttributes:x.getParameter(34921),maxVertexUniforms:x.getParameter(36347),maxVertexTextureUnits:x.getParameter(35660),maxVaryingVectors:x.getParameter(36348),
maxFragmentUniforms:x.getParameter(36349),glsl:x.getParameter(35724),renderer:x.getParameter(7937),vendor:x.getParameter(7936),version:x.getParameter(7938),readFloat:e,npotTextureCube:w}}},{"./util/pool":33,"./util/sorted-object-keys":35}],15:[function(g,q,z){var a=g("./util/check"),b=g("./util/is-typed-array");q.exports=function(x,l,k,f,d,e,g){function w(u){var h;null===l.next?(a(d.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
h=5121):(a(null!==l.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),h=l.next.colorAttachments[0].texture._texture.type,a.optional(function(){e.oes_texture_float?(a(5121===h||5126===h,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===h&&a(g.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===h,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var A=0,w=0,ua=f.framebufferWidth,m=f.framebufferHeight,E=null;b(u)?E=u:u&&(a.type(u,"object","invalid arguments to regl.read()"),A=u.x|0,w=u.y|0,a(0<=A&&A<f.framebufferWidth,"invalid x offset for regl.read"),a(0<=w&&w<f.framebufferHeight,"invalid y offset for regl.read"),ua=(u.width||f.framebufferWidth-A)|0,m=(u.height||f.framebufferHeight-w)|0,E=u.data||null);E&&(5121===h?a(E instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===h&&a(E instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<ua&&ua+A<=f.framebufferWidth,"invalid width for read pixels");a(0<m&&m+w<=f.framebufferHeight,"invalid height for read pixels");k();u=ua*m*4;E||(5121===h?E=new Uint8Array(u):5126===h&&(E=E||new Float32Array(u)));a.isTypedArray(E,"data buffer for regl.read() must be a typedarray");a(E.byteLength>=u,"data buffer for regl.read() too small");x.pixelStorei(3333,4);x.readPixels(A,w,ua,m,6408,h,E);return E}
function u(a){var f;l.setFBO({framebuffer:a.framebuffer},function(){f=w(a)});return f}return function(a){return a&&"framebuffer"in a?u(a):w(a)}}},{"./util/check":22,"./util/is-typed-array":31}],16:[function(g,q,z){var a=g("./util/sorted-object-keys"),b=g("./util/check"),x=g("./util/values"),l=[];l[32854]=2;l[32855]=2;l[36194]=2;l[33189]=2;l[36168]=1;l[34041]=4;l[35907]=4;l[34836]=16;l[34842]=8;l[34843]=6;q.exports=function(k,f,d,e,g){function w(a){this.id=A++;this.refCount=1;this.renderbuffer=a;this.format=
32854;this.height=this.width=0;g.profile&&(this.stats={size:0})}function u(a){var f=a.renderbuffer;b(f,"must not double destroy renderbuffer");k.bindRenderbuffer(36161,null);k.deleteRenderbuffer(f);a.renderbuffer=null;a.refCount=0;delete n[a.id];e.renderbufferCount--}var pa={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};f.ext_srgb&&(pa.srgba=35907);f.ext_color_buffer_half_float&&(pa.rgba16f=34842,pa.rgb16f=34843);f.webgl_color_buffer_float&&(pa.rgba32f=
34836);var h=[];a(pa).forEach(function(a){h[pa[a]]=a});var A=0,n={};w.prototype.decRef=function(){0>=--this.refCount&&u(this)};g.profile&&(e.getTotalRenderbufferSize=function(){var f=0;a(n).forEach(function(a){f+=n[a].stats.size});return f});return{create:function(a,f){function x(a,f){var e=0,v=0,A=32854;"object"===typeof a&&a?("shape"in a?(v=a.shape,b(Array.isArray(v)&&2<=v.length,"invalid renderbuffer shape"),e=v[0]|0,v=v[1]|0):("radius"in a&&(e=v=a.radius|0),"width"in a&&(e=a.width|0),"height"in
a&&(v=a.height|0)),"format"in a&&(b.parameter(a.format,pa,"invalid renderbuffer format"),A=pa[a.format])):"number"===typeof a?(e=a|0,v="number"===typeof f?f|0:e):a?b.raise("invalid arguments to renderbuffer constructor"):e=v=1;b(0<e&&0<v&&e<=d.maxRenderbufferSize&&v<=d.maxRenderbufferSize,"invalid renderbuffer size");if(e!==u.width||v!==u.height||A!==u.format)return x.width=u.width=e,x.height=u.height=v,u.format=A,k.bindRenderbuffer(36161,u.renderbuffer),k.renderbufferStorage(36161,A,e,v),b(0===k.getError(),
"invalid render buffer format"),g.profile&&(u.stats.size=l[u.format]*u.width*u.height),x.format=h[u.format],x}var u=new w(k.createRenderbuffer());n[u.id]=u;e.renderbufferCount++;x(a,f);x.resize=function(a,f){var e=a|0,v=f|0||e;if(e===u.width&&v===u.height)return x;b(0<e&&0<v&&e<=d.maxRenderbufferSize&&v<=d.maxRenderbufferSize,"invalid renderbuffer size");x.width=u.width=e;x.height=u.height=v;k.bindRenderbuffer(36161,u.renderbuffer);k.renderbufferStorage(36161,u.format,e,v);b(0===k.getError(),"invalid render buffer format");
g.profile&&(u.stats.size=l[u.format]*u.width*u.height);return x};x._reglType="renderbuffer";x._renderbuffer=u;g.profile&&(x.stats=u.stats);x.destroy=function(){u.decRef()};return x},clear:function(){x(n).forEach(u)},restore:function(){x(n).forEach(function(a){a.renderbuffer=k.createRenderbuffer();k.bindRenderbuffer(36161,a.renderbuffer);k.renderbufferStorage(36161,a.format,a.width,a.height)});k.bindRenderbuffer(36161,null)}}}},{"./util/check":22,"./util/sorted-object-keys":35,"./util/values":37}],
17:[function(g,q,z){var a=g("./util/sorted-object-keys"),b=g("./util/check"),x=g("./util/extend"),l=g("./util/values");q.exports=function(k,f,d,e){function g(a,f,b,e){this.name=a;this.id=f;this.location=b;this.info=e}function w(a,f){for(var b=0;b<a.length;++b)if(a[b].id===f.id){a[b].location=f.location;return}a.push(f)}function u(a,e,l){var x=35632===a?A:n,d=x[e];if(!d){var h=f.str(e),d=k.createShader(a);k.shaderSource(d,h);k.compileShader(d);b.shaderError(k,d,h,a,l);x[e]=d}return d}function pa(a,
f){this.id=E++;this.fragId=a;this.vertId=f;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;e.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function h(a,l,x){var d;d=u(35632,a.fragId);var h=u(35633,a.vertId),A=a.program=k.createProgram();k.attachShader(A,d);k.attachShader(A,h);if(x)for(d=0;d<x.length;++d)h=x[d],k.bindAttribLocation(A,h[0],h[1]);k.linkProgram(A);b.linkError(k,A,f.str(a.fragId),f.str(a.vertId),l);x=k.getProgramParameter(A,35718);e.profile&&(a.stats.uniformsCount=
x);h=a.uniforms;for(d=0;d<x;++d)if(l=k.getActiveUniform(A,d))if(1<l.size)for(var m=0;m<l.size;++m){var n=l.name.replace("[0]","["+m+"]");w(h,new g(n,f.id(n),k.getUniformLocation(A,n),l))}else w(h,new g(l.name,f.id(l.name),k.getUniformLocation(A,l.name),l));x=k.getProgramParameter(A,35721);e.profile&&(a.stats.attributesCount=x);a=a.attributes;for(d=0;d<x;++d)(l=k.getActiveAttrib(A,d))&&w(a,new g(l.name,f.id(l.name),k.getAttribLocation(A,l.name),l))}var A={},n={},ua={},m=[],E=0;e.profile&&(d.getMaxUniformsCount=
function(){var a=0;m.forEach(function(f){f.stats.uniformsCount>a&&(a=f.stats.uniformsCount)});return a},d.getMaxAttributesCount=function(){var a=0;m.forEach(function(f){f.stats.attributesCount>a&&(a=f.stats.attributesCount)});return a});return{clear:function(){var a=k.deleteShader.bind(k);l(A).forEach(a);A={};l(n).forEach(a);n={};m.forEach(function(a){k.deleteProgram(a.program)});m.length=0;ua={};d.shaderCount=0},program:function(f,e,l,u){b.command(0<=f,"missing vertex shader",l);b.command(0<=e,"missing fragment shader",
l);var v=ua[e];v||(v=ua[e]={});var g=v[f];if(g&&(g.refCount++,!u))return g;var w=new pa(e,f);d.shaderCount++;h(w,l,u);g||(v[f]=w);m.push(w);return x(w,{destroy:function(){w.refCount--;if(0>=w.refCount){k.deleteProgram(w.program);var f=m.indexOf(w);m.splice(f,1);d.shaderCount--}0>=v[w.vertId].refCount&&(k.deleteShader(n[w.vertId]),delete n[w.vertId],delete ua[w.fragId][w.vertId]);a(ua[w.fragId]).length||(k.deleteShader(A[w.fragId]),delete A[w.fragId],delete ua[w.fragId])}})},restore:function(){A={};
n={};for(var a=0;a<m.length;++a)h(m[a],null,m[a].attributes.map(function(a){return[a.location,a.name]}))},shader:u,frag:-1,vert:-1}}},{"./util/check":22,"./util/extend":26,"./util/sorted-object-keys":35,"./util/values":37}],18:[function(g,q,z){q.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],19:[function(g,q,z){q.exports=function(){var a={"":0},b=[""];return{id:function(x){var l=
a[x];if(l)return l;l=a[x]=b.length;b.push(x);return l},str:function(a){return b[a]}}}},{}],20:[function(g,q,z){function a(a){return"[object "+a+"]"}function b(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function x(a){return Array.isArray(a)&&0!==a.length&&ua(a[0])?!0:!1}function l(a){return Object.prototype.toString.call(a)}function k(a){if(!a)return!1;var p=l(a);return 0<=ra.indexOf(p)?!0:b(a)||x(a)||h(a)}function f(a,p){36193===a.type?(a.data=n(p),A.freeType(p)):a.data=p}
function d(a,p,c,f,b,e){a="undefined"!==typeof K[a]?K[a]:y[a]*I[p];e&&(a*=6);if(b){for(f=0;1<=c;)f+=a*c*c,c/=2;return f}return a*c*f}var e=g("./util/sorted-object-keys"),ga=g("./util/check"),w=g("./util/extend"),u=g("./util/values"),pa=g("./util/is-typed-array"),h=g("./util/is-ndarray"),A=g("./util/pool"),n=g("./util/to-half-float"),ua=g("./util/is-array-like"),m=g("./util/flatten"),E=g("./util/is-pow2");z=g("./constants/arraytypes.json");var J=g("./constants/arraytypes.json"),H=[9984,9986,9985,9987],
ea=[0,6409,6410,6407,6408],y={};y[6409]=y[6406]=y[6402]=1;y[34041]=y[6410]=2;y[6407]=y[35904]=3;y[6408]=y[35906]=4;var v=a("HTMLCanvasElement"),S=a("OffscreenCanvas"),L=a("CanvasRenderingContext2D"),Q=a("ImageBitmap"),C=a("HTMLImageElement"),B=a("HTMLVideoElement"),ra=e(z).concat([v,S,L,Q,C,B]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var K=[];K[32854]=2;K[32855]=2;K[36194]=2;K[34041]=4;K[33776]=.5;K[33777]=.5;K[33778]=1;K[33779]=1;K[35986]=.5;K[35987]=1;K[34798]=1;K[35840]=.5;K[35841]=
.25;K[35842]=.5;K[35843]=.25;K[36196]=.5;q.exports=function(a,p,c,D,r,g,I){function U(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function K(c,a){c.internalformat=a.internalformat;c.format=a.format;c.type=a.type;c.compressed=a.compressed;c.premultiplyAlpha=a.premultiplyAlpha;c.flipY=a.flipY;c.unpackAlignment=a.unpackAlignment;c.colorSpace=a.colorSpace;c.width=
a.width;c.height=a.height;c.channels=a.channels}function T(a,f){if("object"===typeof f&&f){"premultiplyAlpha"in f&&(ga.type(f.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=f.premultiplyAlpha);"flipY"in f&&(ga.type(f.flipY,"boolean","invalid texture flip"),a.flipY=f.flipY);"alignment"in f&&(ga.oneOf(f.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=f.alignment);"colorSpace"in f&&(ga.parameter(f.colorSpace,$a,"invalid colorSpace"),a.colorSpace=$a[f.colorSpace]);
if("type"in f){var b=f.type;ga(p.oes_texture_float||!("float"===b||"float32"===b),"you must enable the OES_texture_float extension in order to use floating point textures.");ga(p.oes_texture_half_float||!("half float"===b||"float16"===b),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");ga(p.webgl_depth_texture||!("uint16"===b||"uint32"===b||"depth stencil"===b),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
ga.parameter(b,V,"invalid texture type");a.type=V[b]}var e=a.width,t=a.height,l=a.channels,b=!1;"shape"in f?(ga(Array.isArray(f.shape)&&2<=f.shape.length,"shape must be an array"),e=f.shape[0],t=f.shape[1],3===f.shape.length&&(l=f.shape[2],ga(0<l&&4>=l,"invalid number of channels"),b=!0),ga(0<=e&&e<=c.maxTextureSize,"invalid width"),ga(0<=t&&t<=c.maxTextureSize,"invalid height")):("radius"in f&&(e=t=f.radius,ga(0<=e&&e<=c.maxTextureSize,"invalid radius")),"width"in f&&(e=f.width,ga(0<=e&&e<=c.maxTextureSize,
"invalid width")),"height"in f&&(t=f.height,ga(0<=t&&t<=c.maxTextureSize,"invalid height")),"channels"in f&&(l=f.channels,ga(0<l&&4>=l,"invalid number of channels"),b=!0));a.width=e|0;a.height=t|0;a.channels=l|0;e=!1;"format"in f&&(e=f.format,ga(p.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ga.parameter(e,ca,"invalid texture format"),t=a.internalformat=ca[e],a.format=Ia[t],e in V&&!("type"in f)&&
(a.type=V[e]),e in sa&&(a.compressed=!0),e=!0);!b&&e?a.channels=y[a.format]:b&&!e?a.channels!==ea[a.format]&&(a.format=a.internalformat=ea[a.channels]):e&&b&&ga(a.channels===y[a.format],"number of channels inconsistent with specified format")}}function R(c){a.pixelStorei(37440,c.flipY);a.pixelStorei(37441,c.premultiplyAlpha);a.pixelStorei(37443,c.colorSpace);a.pixelStorei(3317,c.unpackAlignment)}function N(){U.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;
this.needsCopy=!1}function F(a,p){var e=null;k(p)?e=p:p&&(ga.type(p,"object","invalid pixel data type"),T(a,p),"x"in p&&(a.xOffset=p.x|0),"y"in p&&(a.yOffset=p.y|0),k(p.data)&&(e=p.data));ga(!a.compressed||e instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(p.copy){ga(!e,"can not specify copy and data field for the same texture");var t=r.viewportWidth,d=r.viewportHeight;a.width=a.width||t-a.xOffset;a.height=a.height||d-a.yOffset;a.needsCopy=!0;ga(0<=a.xOffset&&a.xOffset<
t&&0<=a.yOffset&&a.yOffset<d&&0<a.width&&a.width<=t&&0<a.height&&a.height<=d,"copy texture read out of bounds")}else if(!e)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(pa(e))a.channels=a.channels||4,a.data=e,"type"in p||5121!==a.type||(a.type=J[Object.prototype.toString.call(e)]|0);else if(b(e)){a.channels=a.channels||4;t=e;d=t.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:d=A.allocType(a.type,d);d.set(t);a.data=d;break;case 36193:a.data=n(t);break;default:ga.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(h(e)){t=e.data;Array.isArray(t)||5121!==a.type||(a.type=J[Object.prototype.toString.call(t)]|0);var d=e.shape,D=e.stride,V,u,F,g;3===d.length?(F=d[2],g=D[2]):(ga(2===d.length,"invalid ndarray pixel data, must be 2 or 3D"),g=F=1);V=d[0];u=d[1];d=D[0];D=D[1];a.alignment=1;a.width=V;a.height=u;a.channels=F;a.format=a.internalformat=ea[F];a.needsFree=!0;V=g;e=e.offset;F=a.width;g=a.height;u=a.channels;for(var y=A.allocType(36193===a.type?5126:a.type,F*g*u),G=0,ca=0;ca<g;++ca)for(var w=
0;w<F;++w)for(var W=0;W<u;++W)y[G++]=t[d*w+D*ca+V*W+e];f(a,y)}else if(l(e)===v||l(e)===S||l(e)===L)l(e)===v||l(e)===S?a.element=e:a.element=e.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(l(e)===Q)a.element=e,a.width=e.width,a.height=e.height,a.channels=4;else if(l(e)===C)a.element=e,a.width=e.naturalWidth,a.height=e.naturalHeight,a.channels=4;else if(l(e)===B)a.element=e,a.width=e.videoWidth,a.height=e.videoHeight,a.channels=4;else if(x(e)){t=a.width||e[0].length;
d=a.height||e.length;D=a.channels;D=ua(e[0][0])?D||e[0][0].length:D||1;V=m.shape(e);F=1;for(g=0;g<V.length;++g)F*=V[g];F=A.allocType(36193===a.type?5126:a.type,F);m.flatten(e,V,"",F);f(a,F);a.alignment=1;a.width=t;a.height=d;a.channels=D;a.format=a.internalformat=ea[D];a.needsFree=!0}5126===a.type?ga(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&ga(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function O(c,p,f,b,e){var l=c.element,d=c.data,x=c.internalformat,r=c.format,k=c.type,h=c.width,v=c.height;R(c);l?a.texSubImage2D(p,e,f,b,r,k,l):c.compressed?a.compressedTexSubImage2D(p,e,f,b,x,h,v,d):c.needsCopy?(D(),a.copyTexSubImage2D(p,e,f,b,c.xOffset,c.yOffset,h,v)):a.texSubImage2D(p,e,f,b,h,v,r,k,d)}function P(){return ma.pop()||new N}function qa(c){c.needsFree&&A.freeType(c.data);N.call(c);ma.push(c)}function q(){U.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function G(c,a,p){var f=c.images[0]=P();c.mipmask=1;f.width=c.width=a;f.height=c.height=p;f.channels=c.channels=4}function M(c,a){var p=null;if(k(a))p=c.images[0]=P(),K(p,c),F(p,a),c.mipmask=1;else if(T(c,a),Array.isArray(a.mipmap))for(var f=a.mipmap,b=0;b<f.length;++b)p=c.images[b]=P(),K(p,c),p.width>>=b,p.height>>=b,F(p,f[b]),c.mipmask|=1<<b;else p=c.images[0]=P(),K(p,c),F(p,a),c.mipmask=1;K(c,c.images[0]);!c.compressed||33776!==c.internalformat&&33777!==c.internalformat&&33778!==c.internalformat&&
33779!==c.internalformat||ga(0===c.width%4&&0===c.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(c,p){for(var f=c.images,b=0;b<f.length&&f[b];++b){var e=f[b],l=p,d=b,x=e.element,r=e.data,k=e.internalformat,h=e.format,v=e.type,F=e.width,V=e.height;R(e);x?a.texImage2D(l,d,h,h,v,x):e.compressed?a.compressedTexImage2D(l,d,k,F,V,0,r):e.needsCopy?(D(),a.copyTexImage2D(l,d,h,e.xOffset,e.yOffset,F,V,0)):a.texImage2D(l,d,h,F,V,0,h,
v,r||null)}}function X(){var c=za.pop()||new q;U.call(c);for(var a=c.mipmask=0;16>a;++a)c.images[a]=null;return c}function z(c){for(var a=c.images,p=0;p<a.length;++p)a[p]&&qa(a[p]),a[p]=null;za.push(c)}function oa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ra(a,p){if("min"in p){var f=p.min;ga.parameter(f,Hb);a.minFilter=Hb[f];0<=H.indexOf(a.minFilter)&&!("faces"in p)&&(a.genMipmaps=!0)}"mag"in p&&(f=p.mag,ga.parameter(f,
Aa),a.magFilter=Aa[f]);var f=a.wrapS,b=a.wrapT;if("wrap"in p){var e=p.wrap;"string"===typeof e?(ga.parameter(e,Qa),f=b=Qa[e]):Array.isArray(e)&&(ga.parameter(e[0],Qa),ga.parameter(e[1],Qa),f=Qa[e[0]],b=Qa[e[1]])}else"wrapS"in p&&(f=p.wrapS,ga.parameter(f,Qa),f=Qa[f]),"wrapT"in p&&(b=p.wrapT,ga.parameter(b,Qa),b=Qa[b]);a.wrapS=f;a.wrapT=b;"anisotropic"in p&&(f=p.anisotropic,ga("number"===typeof f&&1<=f&&f<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=p.anisotropic);if("mipmap"in
p){f=!1;switch(typeof p.mipmap){case "string":ga.parameter(p.mipmap,Ba,"invalid mipmap hint");a.mipmapHint=Ba[p.mipmap];f=a.genMipmaps=!0;break;case "boolean":f=a.genMipmaps=p.mipmap;break;case "object":ga(Array.isArray(p.mipmap),"invalid mipmap type");a.genMipmaps=!1;f=!0;break;default:ga.raise("invalid mipmap type")}!f||"min"in p||(a.minFilter=9984)}}function ya(c,f){a.texParameteri(f,10241,c.minFilter);a.texParameteri(f,10240,c.magFilter);a.texParameteri(f,10242,c.wrapS);a.texParameteri(f,10243,
c.wrapT);p.ext_texture_filter_anisotropic&&a.texParameteri(f,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(f))}function Z(c){U.call(this);this.mipmask=0;this.internalformat=6408;this.id=Fa++;this.refCount=1;this.target=c;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new oa;I.profile&&(this.stats={size:0})}function Ca(c){a.activeTexture(33984);a.bindTexture(c.target,c.texture)}function ia(){var c=va[0];c?a.bindTexture(c.target,c.texture):
a.bindTexture(3553,null)}function ka(c){var p=c.texture;ga(p,"must not double destroy texture");var f=c.unit,b=c.target;0<=f&&(a.activeTexture(33984+f),a.bindTexture(b,null),va[f]=null);a.deleteTexture(p);c.texture=null;c.params=null;c.pixels=null;c.refCount=0;delete ha[c.id];g.textureCount--}var Ba={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Qa={repeat:10497,clamp:33071,mirror:33648},Aa={nearest:9728,linear:9729},Hb=w({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},Aa),$a={none:0,browser:37444},V={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ca={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sa={};p.ext_srgb&&(ca.srgb=35904,ca.srgba=35906);p.oes_texture_float&&(V.float32=V["float"]=5126);p.oes_texture_half_float&&(V.float16=V["half float"]=36193);p.webgl_depth_texture&&(w(ca,{depth:6402,"depth stencil":34041}),w(V,{uint16:5123,uint32:5125,
"depth stencil":34042}));p.webgl_compressed_texture_s3tc&&w(sa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});p.webgl_compressed_texture_atc&&w(sa,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});p.webgl_compressed_texture_pvrtc&&w(sa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});p.webgl_compressed_texture_etc1&&(sa["rgb etc1"]=36196);var wa=Array.prototype.slice.call(a.getParameter(34467));
e(sa).forEach(function(c){var a=sa[c];0<=wa.indexOf(a)&&(ca[c]=a)});var Ea=e(ca);c.textureFormats=Ea;var mb=[];e(ca).forEach(function(c){mb[ca[c]]=c});var Gb=[];e(V).forEach(function(c){Gb[V[c]]=c});var fa=[];e(Aa).forEach(function(c){fa[Aa[c]]=c});var W=[];e(Hb).forEach(function(c){W[Hb[c]]=c});var xa=[];e(Qa).forEach(function(c){xa[Qa[c]]=c});var Ia=Ea.reduce(function(c,a){var f=ca[a];6409===f||6406===f||6409===f||6410===f||6402===f||34041===f||p.ext_srgb&&(35904===f||35906===f)?c[f]=f:32855===
f||0<=a.indexOf("rgba")?c[f]=6408:c[f]=6407;return c},{}),ma=[],za=[],Fa=0,ha={},Y=c.maxTextureUnits,va=Array(Y).map(function(){return null});w(Z.prototype,{bind:function(){this.bindCount+=1;var c=this.unit;if(0>c){for(var p=0;p<Y;++p){var f=va[p];if(f){if(0<f.bindCount)continue;f.unit=-1}va[p]=this;c=p;break}c>=Y&&ga.raise("insufficient number of texture units");I.profile&&g.maxTextureUnits<c+1&&(g.maxTextureUnits=c+1);this.unit=c;a.activeTexture(33984+c);a.bindTexture(this.target,this.texture)}return c},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ka(this)}});I.profile&&(g.getTotalTextureSize=function(){var c=0;e(ha).forEach(function(a){c+=ha[a].stats.size});return c});return{create2D:function(p,f){function b(a,p){var f=e.texInfo;oa.call(f);var t=X();"number"===typeof a?"number"===typeof p?G(t,a|0,p|0):G(t,a|0,a|0):a?(ga.type(a,"object","invalid arguments to regl.texture"),ra(f,a),M(t,a)):G(t,1,1);f.genMipmaps&&(t.mipmask=(t.width<<1)-1);e.mipmask=t.mipmask;K(e,t);ga.texture2D(f,
t,c);e.internalformat=t.internalformat;b.width=t.width;b.height=t.height;Ca(e);da(t,3553);ya(f,3553);ia();z(t);I.profile&&(e.stats.size=d(e.internalformat,e.type,t.width,t.height,f.genMipmaps,!1));b.format=mb[e.internalformat];b.type=Gb[e.type];b.mag=fa[f.magFilter];b.min=W[f.minFilter];b.wrapS=xa[f.wrapS];b.wrapT=xa[f.wrapT];return b}var e=new Z(3553);ha[e.id]=e;g.textureCount++;b(p,f);b.subimage=function(c,a,p,f){ga(!!c,"must specify image data");a|=0;p|=0;f|=0;var t=P();K(t,e);t.width=0;t.height=
0;F(t,c);t.width=t.width||(e.width>>f)-a;t.height=t.height||(e.height>>f)-p;ga(e.type===t.type&&e.format===t.format&&e.internalformat===t.internalformat,"incompatible format for texture.subimage");ga(0<=a&&0<=p&&a+t.width<=e.width&&p+t.height<=e.height,"texture.subimage write out of bounds");ga(e.mipmask&1<<f,"missing mipmap data");ga(t.data||t.element||t.needsCopy,"missing image data");Ca(e);O(t,3553,a,p,f);ia();qa(t);return b};b.resize=function(c,p){var f=c|0,l=p|0||f;if(f===e.width&&l===e.height)return b;
b.width=e.width=f;b.height=e.height=l;Ca(e);for(var x=0;e.mipmask>>x;++x){var r=f>>x,k=l>>x;if(!r||!k)break;a.texImage2D(3553,x,e.format,r,k,0,e.format,e.type,null)}ia();I.profile&&(e.stats.size=d(e.internalformat,e.type,f,l,!1,!1));return b};b._reglType="texture2d";b._texture=e;I.profile&&(b.stats=e.stats);b.destroy=function(){e.decRef()};return b},createCube:function(p,f,b,e,l,x){function r(a,p,f,b,e,t){var l,x=k.texInfo;oa.call(x);for(l=0;6>l;++l)D[l]=X();if("number"!==typeof a&&a)if("object"===
typeof a)if(p)M(D[0],a),M(D[1],p),M(D[2],f),M(D[3],b),M(D[4],e),M(D[5],t);else if(ra(x,a),T(k,a),"faces"in a)for(a=a.faces,ga(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),l=0;6>l;++l)ga("object"===typeof a[l]&&!!a[l],"invalid input for cube map face"),K(D[l],k),M(D[l],a[l]);else for(l=0;6>l;++l)M(D[l],a);else ga.raise("invalid arguments to cube map");else for(a=a|0||1,l=0;6>l;++l)G(D[l],a,a);K(k,D[0]);ga.optional(function(){c.npotTextureCube||ga(E(k.width)&&E(k.height),"your browser does not support non power or two texture dimensions")});
k.mipmask=x.genMipmaps?(D[0].width<<1)-1:D[0].mipmask;ga.textureCube(k,x,D,c);k.internalformat=D[0].internalformat;r.width=D[0].width;r.height=D[0].height;Ca(k);for(l=0;6>l;++l)da(D[l],34069+l);ya(x,34067);ia();I.profile&&(k.stats.size=d(k.internalformat,k.type,r.width,r.height,x.genMipmaps,!0));r.format=mb[k.internalformat];r.type=Gb[k.type];r.mag=fa[x.magFilter];r.min=W[x.minFilter];r.wrapS=xa[x.wrapS];r.wrapT=xa[x.wrapT];for(l=0;6>l;++l)z(D[l]);return r}var k=new Z(34067);ha[k.id]=k;g.cubeCount++;
var D=Array(6);r(p,f,b,e,l,x);r.subimage=function(c,a,p,f,b){ga(!!a,"must specify image data");ga("number"===typeof c&&c===(c|0)&&0<=c&&6>c,"invalid face");p|=0;f|=0;b|=0;var e=P();K(e,k);e.width=0;e.height=0;F(e,a);e.width=e.width||(k.width>>b)-p;e.height=e.height||(k.height>>b)-f;ga(k.type===e.type&&k.format===e.format&&k.internalformat===e.internalformat,"incompatible format for texture.subimage");ga(0<=p&&0<=f&&p+e.width<=k.width&&f+e.height<=k.height,"texture.subimage write out of bounds");ga(k.mipmask&
1<<b,"missing mipmap data");ga(e.data||e.element||e.needsCopy,"missing image data");Ca(k);O(e,34069+c,p,f,b);ia();qa(e);return r};r.resize=function(c){c|=0;if(c!==k.width){r.width=k.width=c;r.height=k.height=c;Ca(k);for(var p=0;6>p;++p)for(var f=0;k.mipmask>>f;++f)a.texImage2D(34069+p,f,k.format,c>>f,c>>f,0,k.format,k.type,null);ia();I.profile&&(k.stats.size=d(k.internalformat,k.type,r.width,r.height,!1,!0));return r}};r._reglType="textureCube";r._texture=k;I.profile&&(r.stats=k.stats);r.destroy=
function(){k.decRef()};return r},clear:function(){for(var c=0;c<Y;++c)a.activeTexture(33984+c),a.bindTexture(3553,null),va[c]=null;u(ha).forEach(ka);g.cubeCount=0;g.textureCount=0},getTexture:function(c){return null},restore:function(){for(var c=0;c<Y;++c){var p=va[c];p&&(p.bindCount=0,p.unit=-1,va[c]=null)}u(ha).forEach(function(c){c.texture=a.createTexture();a.bindTexture(c.target,c.texture);for(var p=0;32>p;++p)if(0!==(c.mipmask&1<<p))if(3553===c.target)a.texImage2D(3553,p,c.internalformat,c.width>>
p,c.height>>p,0,c.internalformat,c.type,null);else for(var f=0;6>f;++f)a.texImage2D(34069+f,p,c.internalformat,c.width>>p,c.height>>p,0,c.internalformat,c.type,null);ya(c.texInfo,c.target)})},refresh:function(){for(var c=0;c<Y;++c){var p=va[c];p&&(p.bindCount=0,p.unit=-1,va[c]=null);a.activeTexture(33984+c);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":5,"./util/check":22,"./util/extend":26,"./util/flatten":27,"./util/is-array-like":28,"./util/is-ndarray":29,
"./util/is-pow2":30,"./util/is-typed-array":31,"./util/pool":33,"./util/sorted-object-keys":35,"./util/to-half-float":36,"./util/values":37}],21:[function(g,q,z){q.exports=function(a,b){function x(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function l(a,f,b){var l=d.pop()||new x;l.startQueryIndex=a;l.endQueryIndex=f;l.sum=0;l.stats=b;e.push(l)}if(!b.ext_disjoint_timer_query)return null;var k=[],f=[],d=[],e=[],g=[],w=[];return{beginQuery:function(a){var e=k.pop()||b.ext_disjoint_timer_query.createQueryEXT();
b.ext_disjoint_timer_query.beginQueryEXT(35007,e);f.push(e);l(f.length-1,f.length,a)},endQuery:function(){b.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:l,update:function(){var a,l;a=f.length;if(0!==a){w.length=Math.max(w.length,a+1);g.length=Math.max(g.length,a+1);g[0]=0;var x=w[0]=0;for(l=a=0;l<f.length;++l){var A=f[l];b.ext_disjoint_timer_query.getQueryObjectEXT(A,34919)?(x+=b.ext_disjoint_timer_query.getQueryObjectEXT(A,34918),k.push(A)):f[a++]=A;g[l+1]=x;w[l+1]=a}f.length=a;for(l=
a=0;l<e.length;++l){var x=e[l],n=x.startQueryIndex,A=x.endQueryIndex;x.sum+=g[A]-g[n];n=w[n];A=w[A];A===n?(x.stats.gpuTime+=x.sum/1E6,d.push(x)):(x.startQueryIndex=n,x.endQueryIndex=A,e[a++]=x)}e.length=a}},getNumPendingQueries:function(){return f.length},clear:function(){k.push.apply(k,f);for(var a=0;a<k.length;a++)b.ext_disjoint_timer_query.deleteQueryEXT(k[a]);f.length=0;k.length=0},restore:function(){f.length=0;k.length=0}}}},{}],22:[function(g,q,z){function a(a){return"undefined"!==typeof atob?
atob(a):"base64:"+a}function b(a){a=Error("(regl) "+a);console.error(a);throw a;}function x(a,f){a||b(f)}function l(a){return a?": "+a:""}function k(a,f){switch(f){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function f(a,f,e){0>f.indexOf(a)&&b("invalid value"+
l(e)+". must be one of: "+f)}function d(a,f){for(a+="";a.length<f;)a=" "+a;return a}function e(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function ga(a,f){this.number=a;this.line=f;this.errors=[]}function w(a,f,b){this.file=a;this.line=f;this.message=b}function u(){var a=Error(),a=(a.stack||a).toString(),f=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return f?f[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function pa(){var a=Error(),a=(a.stack||
a).toString(),f=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return f?f[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function h(f,b){var l=f.split("\n"),x=1,d=0,k={unknown:new e,0:new e};k.unknown.name=k[0].name=b||u();k.unknown.lines.push(new ga(0,""));for(var h=0;h<l.length;++h){var v=l[h],t=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(v);if(t)switch(t[1]){case "line":if(t=/(\d+)(\s+\d+)?/.exec(t[2]))x=t[1]|0,t[2]&&(d=t[2]|0,d in k||(k[d]=new e));break;case "define":if(t=/SHADER_NAME(_B64)?\s+(.*)$/.exec(t[2]))k[d].name=
t[1]?a(t[2]):t[2]}k[d].lines.push(new ga(x++,v))}H(k).forEach(function(a){var c=k[a];c.lines.forEach(function(a){c.index[a.number]=a})});return k}function A(a){var f=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var b=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);b?f.push(new w(b[1]|0,b[2]|0,b[3].trim())):0<a.length&&f.push(new w("unknown",0,a))}});return f}function n(a,f){f.forEach(function(f){var b=a[f.file];if(b){var e=b.index[f.line];if(e){e.errors.push(f);b.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(f)})}function ua(a){a._commandRef=u()}function m(a,f){var e=pa();b(a+" in command "+(f||u())+("unknown"===e?"":" called from "+e))}function E(a,f,b,e){k(a,f)||m("invalid parameter type"+l(b)+". expected "+f+", got "+typeof a,e||u())}function J(a,f){return 32820===a||32819===a||33635===a?2:34042===a?4:v[a]*f}var H=g("./sorted-object-keys"),ea=g("./is-typed-array");g=g("./extend");var y="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
v={};v[5120]=v[5121]=1;v[5122]=v[5123]=v[36193]=v[33635]=v[32819]=v[32820]=2;v[5124]=v[5125]=v[5126]=v[34042]=4;q.exports=g(x,{optional:function(a){a()},raise:b,commandRaise:m,command:function(a,f,b){a||m(f,b||u())},parameter:function(a,f,e){a in f||b("unknown parameter ("+a+")"+l(e)+". possible values: "+H(f).join())},commandParameter:function(a,f,b,e){a in f||m("unknown parameter ("+a+")"+l(b)+". possible values: "+H(f).join(),e||u())},constructor:function(a){H(a).forEach(function(a){0>y.indexOf(a)&&
b('invalid regl constructor argument "'+a+'". must be one of '+y)})},type:function(a,f,e){k(a,f)||b("invalid parameter type"+l(e)+". expected "+f+", got "+typeof a)},commandType:E,isTypedArray:function(a,f){ea(a)||b("invalid parameter type"+l(f)+". must be a typed array")},nni:function(a,f){0<=a&&(a|0)===a||b("invalid parameter type, ("+a+")"+l(f)+". must be a nonnegative integer")},oneOf:f,shaderError:function(a,f,b,e,l){if(!a.getShaderParameter(f,a.COMPILE_STATUS)){f=a.getShaderInfoLog(f);a=e===
a.FRAGMENT_SHADER?"fragment":"vertex";E(b,"string",a+" shader source must be a string",l);var k=h(b,l);b=A(f);n(k,b);H(k).forEach(function(a){function f(a,b){p.push(a);c.push(b||"")}var b=k[a];if(b.hasErrors){var p=[""],c=[""];f("file number "+a+": "+b.name+"\n","color:red;text-decoration:underline;font-weight:bold");b.lines.forEach(function(c){if(0<c.errors.length){f(d(c.number,4)+"|  ","background-color:yellow; font-weight:bold");f(c.line+"\n","color:red; background-color:yellow; font-weight:bold");
var a=0;c.errors.forEach(function(p){p=p.message;var b=/^\s*'(.*)'\s*:\s*(.*)$/.exec(p);if(b){var e=b[1];p=b[2];switch(e){case "assign":e="="}a=Math.max(c.line.indexOf(e,a),0)}else a=0;f(d("| ",6));f(d("^^^",a+3)+"\n","font-weight:bold");f(d("| ",6));f(p+"\n","font-weight:bold")});f(d("| ",6)+"\n")}else f(d(c.number,4)+"|  "),f(c.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(p.join("")):(c[0]=p.join("%c"),console.log.apply(console,c))}});x.raise("Error compiling "+
a+" shader, "+k[0].name)}},linkError:function(a,f,b,e,l){a.getProgramParameter(f,a.LINK_STATUS)||(a=a.getProgramInfoLog(f),b=h(b,l),e='Error linking program with vertex shader, "'+h(e,l)[0].name+'", and fragment shader "'+b[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(e+"\n"+a),x.raise(e))},callSite:pa,saveCommandRef:ua,saveDrawInfo:function(a,f,b,e){function l(a){return a?e.id(a):0}function x(a,
f){H(f).forEach(function(p){a[e.id(p)]=!0})}ua(a);a._fragId=l(a["static"].frag);a._vertId=l(a["static"].vert);var d=a._uniformSet={};x(d,f["static"]);x(d,f.dynamic);f=a._attributeSet={};x(f,b["static"]);x(f,b.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,b,e){a.texture?f(a.texture._texture.internalformat,b,"unsupported texture format for attachment"):f(a.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},
guessCommand:u,texture2D:function(a,f,b){var e=f.width,l=f.height,d=f.channels;x(0<e&&e<=b.maxTextureSize&&0<l&&l<=b.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||x(!(e&e-1)&&!!e&&!(l&l-1)&&!!l,"incompatible wrap mode for texture, both width and height must be power of 2");1===f.mipmask?1!==e&&1!==l&&x(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(x(!(e&e-1)&&!!e&&!(l&l-1)&&!!l,"texture must be a square power of 2 to support mipmapping"),
x(f.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));5126===f.type&&(0>b.extensions.indexOf("oes_texture_float_linear")&&x(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),x(!a.genMipmaps,"mipmap generation not supported with float textures"));var k=f.images;for(b=0;16>b;++b)if(k[b]){var h=e>>b,t=l>>b;x(f.mipmask&1<<b,"missing mipmap data");var p=k[b];x(p.width===h&&p.height===t,"invalid shape for mip images");x(p.format===f.format&&p.internalformat===
f.internalformat&&p.type===f.type,"incompatible type for mip image");!p.compressed&&p.data&&(h=Math.ceil(J(p.type,d)*h/p.unpackAlignment)*p.unpackAlignment,x(p.data.byteLength===h*t,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||x(0===(f.mipmask&1<<b),"extra mipmap data");f.compressed&&x(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,f,b,e){var l=a.width,d=a.height,k=a.channels;x(0<l&&l<=e.maxTextureSize&&
0<d&&d<=e.maxTextureSize,"invalid texture shape");x(l===d,"cube map must be square");x(33071===f.wrapS&&33071===f.wrapT,"wrap mode not supported by cube map");for(e=0;e<b.length;++e){var h=b[e];x(h.width===l&&h.height===d,"inconsistent cube map face shape");f.genMipmaps&&(x(!h.compressed,"can not generate mipmap for compressed textures"),x(1===h.mipmask,"can not specify mipmaps and generate mipmaps"));for(var t=h.images,p=0;16>p;++p){var c=t[p];if(c){var D=l>>p,r=d>>p;x(h.mipmask&1<<p,"missing mipmap data");
x(c.width===D&&c.height===r,"invalid shape for mip images");x(c.format===a.format&&c.internalformat===a.internalformat&&c.type===a.type,"incompatible type for mip image");c.compressed||c.data&&x(c.data.byteLength===D*r*Math.max(J(c.type,k),c.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":26,"./is-typed-array":31,"./sorted-object-keys":35}],23:[function(g,q,z){q.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],24:[function(g,q,z){function a(a){return Array.prototype.slice.call(a)}function b(b){return a(b).join("")}var x=g("./extend"),l=g("./compiled-fns");q.exports=function(){function k(){var f=[],l=[];return x(function(){f.push.apply(f,a(arguments))},{def:function(){var b="v"+e;e++;l.push(b);0<arguments.length&&(f.push(b,"="),f.push.apply(f,a(arguments)),f.push(";"));return b},toString:function(){return b([0<l.length?"var "+l.join(",")+";":"",b(f)])}})}function f(){function f(a,
l){e(a,l,"=",b.def(a,l),";")}var b=k(),e=k(),l=b.toString,d=e.toString;return x(function(){b.apply(b,a(arguments))},{def:b.def,entry:b,exit:e,save:f,set:function(a,e,l){f(a,e);b(a,e,"=",l,";")},toString:function(){return l()+d()}})}var d=0,e=0,g={},w=k(),u={};return{global:w,link:function(a){var f="$"+d,b=!1;"object"===typeof a&&a.name&&(f=a.name.replace(/ /g,"_"),b=!0);if(f in g)return f;g[f]=a;b||d++;return f},block:k,proc:function(a,e){function l(){var a="a"+d.length;d.push(a);return a}var d=[];
e=e||0;for(var k=0;k<e;++k)l();var k=f(),g=k.toString;return u[a]=x(k,{arg:l,toString:function(){return b(["function(",d.join(),"){",g(),"}"])}})},scope:f,cond:function(){var e=b(arguments),l=f(),d=f(),k=l.toString,g=d.toString;return x(l,{then:function(){l.apply(l,a(arguments));return this},"else":function(){d.apply(d,a(arguments));return this},toString:function(){var a=g();a&&(a="else{"+a+"}");return b(["if(",e,"){",k(),"}",a])}})},compile:function(){var a=[],f=[];Object.keys(g).sort(function(a,
f){var b="$"===a.charAt(0),e="$"===f.charAt(0);return b||e?b&&e?+a.slice(1)<+f.slice(1)?-1:1:b&&!e?-1:1:a.localeCompare(f)}).forEach(function(b){var e=g[b];a.push(b);f.push(e)});for(var e=0,x=a.length-1;-1<x;x--)if("$"===a[x].charAt(0)){e=x;break}var d=['"use strict";',w,"return {"];Object.keys(u).forEach(function(a){d.push('"',a,'":',u[a].toString(),",")});d.push("}");var x=b(d).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),e=a.slice(e).join(),k=l[e];if(!k)throw console.log("src code is:"),
console.log(x),console.log("compiled values:",f),console.log("linked names:",a),console.log("Keys available:",Object.keys(l)),console.log("Key:",e),console.log('"'+e+'": function('+a.join(", ")+") \n{\n"+x+"\n},"),Error("missing precompiled function with key: "+e);return k.apply(null,f)}}}},{"./compiled-fns":25,"./extend":26}],25:[function(g,q,z){q.exports={$0:function(a){var b,x,l,k,f,d,e,g,w,u,pa,h,A,n,ua,m,E,J,H,ea,y,v,q,L,Q,C,B,z,I,K;b=a.attributes;x=a.current;l=a.framebuffer;k=a.gl;f=a.next;
d=a.vao;e=f.blend_color;g=x.blend_color;w=f.blend_equation;u=x.blend_equation;pa=f.blend_func;h=x.blend_func;A=f.colorMask;n=x.colorMask;ua=f.depth_range;m=x.depth_range;E=f.polygonOffset_offset;J=x.polygonOffset_offset;H=f.sample_coverage;ea=x.sample_coverage;y=f.scissor_box;v=x.scissor_box;q=f.stencil_func;L=x.stencil_func;Q=f.stencil_opBack;C=x.stencil_opBack;B=f.stencil_opFront;z=x.stencil_opFront;I=f.viewport;K=x.viewport;return{poll:function(){var a,p,c,b,d,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,
da,X,ja;x.dirty=!1;p=f.blend_enable;c=f.cull_enable;b=f.depth_enable;d=f.dither;la=f.polygonOffset_enable;na=f.sample_alpha;U=f.sample_enable;aa=f.scissor_enable;T=f.stencil_enable;R=f.cull_face;N=x.cull_face;F=f.depth_func;O=x.depth_func;P=f.depth_mask;qa=x.depth_mask;ta=f.frontFace;G=x.frontFace;M=f.lineWidth;da=x.lineWidth;X=f.stencil_mask;ja=x.stencil_mask;a=l.next;a!==l.cur&&(a?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null),l.cur=a);p!==x.blend_enable&&(p?k.enable(3042):
k.disable(3042),x.blend_enable=p);c!==x.cull_enable&&(c?k.enable(2884):k.disable(2884),x.cull_enable=c);b!==x.depth_enable&&(b?k.enable(2929):k.disable(2929),x.depth_enable=b);d!==x.dither&&(d?k.enable(3024):k.disable(3024),x.dither=d);la!==x.polygonOffset_enable&&(la?k.enable(32823):k.disable(32823),x.polygonOffset_enable=la);na!==x.sample_alpha&&(na?k.enable(32926):k.disable(32926),x.sample_alpha=na);U!==x.sample_enable&&(U?k.enable(32928):k.disable(32928),x.sample_enable=U);aa!==x.scissor_enable&&
(aa?k.enable(3089):k.disable(3089),x.scissor_enable=aa);T!==x.stencil_enable&&(T?k.enable(2960):k.disable(2960),x.stencil_enable=T);if(e[0]!==g[0]||e[1]!==g[1]||e[2]!==g[2]||e[3]!==g[3])k.blendColor(e[0],e[1],e[2],e[3]),g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=e[3];if(w[0]!==u[0]||w[1]!==u[1])k.blendEquationSeparate(w[0],w[1]),u[0]=w[0],u[1]=w[1];if(pa[0]!==h[0]||pa[1]!==h[1]||pa[2]!==h[2]||pa[3]!==h[3])k.blendFuncSeparate(pa[0],pa[1],pa[2],pa[3]),h[0]=pa[0],h[1]=pa[1],h[2]=pa[2],h[3]=pa[3];if(A[0]!==n[0]||
A[1]!==n[1]||A[2]!==n[2]||A[3]!==n[3])k.colorMask(A[0],A[1],A[2],A[3]),n[0]=A[0],n[1]=A[1],n[2]=A[2],n[3]=A[3];R!==N&&(k.cullFace(R),x.cull_face=R);F!==O&&(k.depthFunc(F),x.depth_func=F);P!==qa&&(k.depthMask(P),x.depth_mask=P);if(ua[0]!==m[0]||ua[1]!==m[1])k.depthRange(ua[0],ua[1]),m[0]=ua[0],m[1]=ua[1];ta!==G&&(k.frontFace(ta),x.frontFace=ta);M!==da&&(k.lineWidth(M),x.lineWidth=M);if(E[0]!==J[0]||E[1]!==J[1])k.polygonOffset(E[0],E[1]),J[0]=E[0],J[1]=E[1];if(H[0]!==ea[0]||H[1]!==ea[1])k.sampleCoverage(H[0],
H[1]),ea[0]=H[0],ea[1]=H[1];if(y[0]!==v[0]||y[1]!==v[1]||y[2]!==v[2]||y[3]!==v[3])k.scissor(y[0],y[1],y[2],y[3]),v[0]=y[0],v[1]=y[1],v[2]=y[2],v[3]=y[3];if(q[0]!==L[0]||q[1]!==L[1]||q[2]!==L[2])k.stencilFunc(q[0],q[1],q[2]),L[0]=q[0],L[1]=q[1],L[2]=q[2];X!==ja&&(k.stencilMask(X),x.stencil_mask=X);if(Q[0]!==C[0]||Q[1]!==C[1]||Q[2]!==C[2]||Q[3]!==C[3])k.stencilOpSeparate(Q[0],Q[1],Q[2],Q[3]),C[0]=Q[0],C[1]=Q[1],C[2]=Q[2],C[3]=Q[3];if(B[0]!==z[0]||B[1]!==z[1]||B[2]!==z[2]||B[3]!==z[3])k.stencilOpSeparate(B[0],
B[1],B[2],B[3]),z[0]=B[0],z[1]=B[1],z[2]=B[2],z[3]=B[3];if(I[0]!==K[0]||I[1]!==K[1]||I[2]!==K[2]||I[3]!==K[3])k.viewport(I[0],I[1],I[2],I[3]),K[0]=I[0],K[1]=I[1],K[2]=I[2],K[3]=I[3]},refresh:function(){var a,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa;x.dirty=!1;p=f.blend_enable;c=f.cull_enable;D=f.depth_enable;r=f.dither;la=f.polygonOffset_enable;na=f.sample_alpha;U=f.sample_enable;aa=f.scissor_enable;T=f.stencil_enable;R=f.cull_face;N=f.depth_func;F=f.depth_mask;O=f.frontFace;P=f.lineWidth;qa=f.stencil_mask;
(a=l.next)?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null);l.cur=a;a=b[0];a.buffer?(k.enableVertexAttribArray(0),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(0),k.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=b[1];a.buffer?(k.enableVertexAttribArray(1),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(1),
k.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=b[2];a.buffer?(k.enableVertexAttribArray(2),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(2),k.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=b[3];a.buffer?(k.enableVertexAttribArray(3),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(3),k.vertexAttrib4f(3,a.x,a.y,a.z,
a.w),a.buffer=null);a=b[4];a.buffer?(k.enableVertexAttribArray(4),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(4),k.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=b[5];a.buffer?(k.enableVertexAttribArray(5),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(5),k.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=b[6];a.buffer?
(k.enableVertexAttribArray(6),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(6),k.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=b[7];a.buffer?(k.enableVertexAttribArray(7),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(7),k.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=b[8];a.buffer?(k.enableVertexAttribArray(8),k.bindBuffer(34962,
a.buffer.buffer),k.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(8),k.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=b[9];a.buffer?(k.enableVertexAttribArray(9),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(9),k.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=b[10];a.buffer?(k.enableVertexAttribArray(10),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(10),k.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=b[11];a.buffer?(k.enableVertexAttribArray(11),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(11),k.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=b[12];a.buffer?(k.enableVertexAttribArray(12),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(12,a.size,a.type,a.normalized,
a.stride,a.offset)):(k.disableVertexAttribArray(12),k.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=b[13];a.buffer?(k.enableVertexAttribArray(13),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(13),k.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=b[14];a.buffer?(k.enableVertexAttribArray(14),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(14),
k.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=b[15];a.buffer?(k.enableVertexAttribArray(15),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(15),k.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);d.currentVAO=null;d.setVAO(d.targetVAO);p?k.enable(3042):k.disable(3042);x.blend_enable=p;c?k.enable(2884):k.disable(2884);x.cull_enable=c;D?k.enable(2929):k.disable(2929);x.depth_enable=D;r?k.enable(3024):k.disable(3024);
x.dither=r;la?k.enable(32823):k.disable(32823);x.polygonOffset_enable=la;na?k.enable(32926):k.disable(32926);x.sample_alpha=na;U?k.enable(32928):k.disable(32928);x.sample_enable=U;aa?k.enable(3089):k.disable(3089);x.scissor_enable=aa;T?k.enable(2960):k.disable(2960);x.stencil_enable=T;k.blendColor(e[0],e[1],e[2],e[3]);g[0]=e[0];g[1]=e[1];g[2]=e[2];g[3]=e[3];k.blendEquationSeparate(w[0],w[1]);u[0]=w[0];u[1]=w[1];k.blendFuncSeparate(pa[0],pa[1],pa[2],pa[3]);h[0]=pa[0];h[1]=pa[1];h[2]=pa[2];h[3]=pa[3];
k.colorMask(A[0],A[1],A[2],A[3]);n[0]=A[0];n[1]=A[1];n[2]=A[2];n[3]=A[3];k.cullFace(R);x.cull_face=R;k.depthFunc(N);x.depth_func=N;k.depthMask(F);x.depth_mask=F;k.depthRange(ua[0],ua[1]);m[0]=ua[0];m[1]=ua[1];k.frontFace(O);x.frontFace=O;k.lineWidth(P);x.lineWidth=P;k.polygonOffset(E[0],E[1]);J[0]=E[0];J[1]=E[1];k.sampleCoverage(H[0],H[1]);ea[0]=H[0];ea[1]=H[1];k.scissor(y[0],y[1],y[2],y[3]);v[0]=y[0];v[1]=y[1];v[2]=y[2];v[3]=y[3];k.stencilFunc(q[0],q[1],q[2]);L[0]=q[0];L[1]=q[1];L[2]=q[2];k.stencilMask(qa);
x.stencil_mask=qa;k.stencilOpSeparate(Q[0],Q[1],Q[2],Q[3]);C[0]=Q[0];C[1]=Q[1];C[2]=Q[2];C[3]=Q[3];k.stencilOpSeparate(B[0],B[1],B[2],B[3]);z[0]=B[0];z[1]=B[1];z[2]=B[2];z[3]=B[3];k.viewport(I[0],I[1],I[2],I[3]);K[0]=I[0];K[1]=I[1];K[2]=I[2];K[3]=I[3]}}},$3:function(a,b,x,l){var k,f,d,e,g,w,u,pa,h,A,n,ua,m,E,J,H,q,y,v,S,L,Q,C,B,z,I,K,t,p,c,D,r,la;k=a.context;f=a.current;d=a.framebuffer;e=a.gl;g=a.next;w=a.shader;u=a.vao;pa=g.blend_color;h=f.blend_color;A=g.blend_equation;n=f.blend_equation;ua=g.blend_func;
m=f.blend_func;E=g.colorMask;J=f.colorMask;H=g.depth_range;q=f.depth_range;y=g.polygonOffset_offset;v=f.polygonOffset_offset;S=g.sample_coverage;L=f.sample_coverage;Q=g.scissor_box;C=f.scissor_box;B=g.stencil_func;z=f.stencil_func;I=g.stencil_opBack;K=f.stencil_opBack;t=g.stencil_opFront;p=f.stencil_opFront;c=g.viewport;D=f.viewport;r={};la={};return{batch:function(a,x){var k,r,R,N,F;k=d.next;k!==d.cur&&(k?e.bindFramebuffer(36160,k.framebuffer):e.bindFramebuffer(36160,null),d.cur=k);if(f.dirty){k=
g.dither;k!==f.dither&&(k?e.enable(3024):e.disable(3024),f.dither=k);k=g.blend_enable;k!==f.blend_enable&&(k?e.enable(3042):e.disable(3042),f.blend_enable=k);k=pa[0];R=pa[1];N=pa[2];F=pa[3];if(k!==h[0]||R!==h[1]||N!==h[2]||F!==h[3])e.blendColor(k,R,N,F),h[0]=k,h[1]=R,h[2]=N,h[3]=F;k=A[0];R=A[1];if(k!==n[0]||R!==n[1])e.blendEquationSeparate(k,R),n[0]=k,n[1]=R;k=ua[0];R=ua[1];N=ua[2];F=ua[3];if(k!==m[0]||R!==m[1]||N!==m[2]||F!==m[3])e.blendFuncSeparate(k,R,N,F),m[0]=k,m[1]=R,m[2]=N,m[3]=F;k=g.depth_enable;
k!==f.depth_enable&&(k?e.enable(2929):e.disable(2929),f.depth_enable=k);k=g.depth_func;k!==f.depth_func&&(e.depthFunc(k),f.depth_func=k);k=H[0];R=H[1];if(k!==q[0]||R!==q[1])e.depthRange(k,R),q[0]=k,q[1]=R;k=g.depth_mask;k!==f.depth_mask&&(e.depthMask(k),f.depth_mask=k);k=E[0];R=E[1];N=E[2];F=E[3];if(k!==J[0]||R!==J[1]||N!==J[2]||F!==J[3])e.colorMask(k,R,N,F),J[0]=k,J[1]=R,J[2]=N,J[3]=F;k=g.cull_enable;k!==f.cull_enable&&(k?e.enable(2884):e.disable(2884),f.cull_enable=k);k=g.cull_face;k!==f.cull_face&&
(e.cullFace(k),f.cull_face=k);k=g.frontFace;k!==f.frontFace&&(e.frontFace(k),f.frontFace=k);k=g.lineWidth;k!==f.lineWidth&&(e.lineWidth(k),f.lineWidth=k);k=g.polygonOffset_enable;k!==f.polygonOffset_enable&&(k?e.enable(32823):e.disable(32823),f.polygonOffset_enable=k);k=y[0];R=y[1];if(k!==v[0]||R!==v[1])e.polygonOffset(k,R),v[0]=k,v[1]=R;k=g.sample_alpha;k!==f.sample_alpha&&(k?e.enable(32926):e.disable(32926),f.sample_alpha=k);k=g.sample_enable;k!==f.sample_enable&&(k?e.enable(32928):e.disable(32928),
f.sample_enable=k);k=S[0];R=S[1];if(k!==L[0]||R!==L[1])e.sampleCoverage(k,R),L[0]=k,L[1]=R;k=g.stencil_enable;k!==f.stencil_enable&&(k?e.enable(2960):e.disable(2960),f.stencil_enable=k);k=g.stencil_mask;k!==f.stencil_mask&&(e.stencilMask(k),f.stencil_mask=k);k=B[0];R=B[1];N=B[2];if(k!==z[0]||R!==z[1]||N!==z[2])e.stencilFunc(k,R,N),z[0]=k,z[1]=R,z[2]=N;k=t[0];R=t[1];N=t[2];F=t[3];if(k!==p[0]||R!==p[1]||N!==p[2]||F!==p[3])e.stencilOpSeparate(k,R,N,F),p[0]=k,p[1]=R,p[2]=N,p[3]=F;k=I[0];R=I[1];N=I[2];
F=I[3];if(k!==K[0]||R!==K[1]||N!==K[2]||F!==K[3])e.stencilOpSeparate(k,R,N,F),K[0]=k,K[1]=R,K[2]=N,K[3]=F;k=g.scissor_enable;k!==f.scissor_enable&&(k?e.enable(3089):e.disable(3089),f.scissor_enable=k);k=Q[0];R=Q[1];N=Q[2];F=Q[3];if(k!==C[0]||R!==C[1]||N!==C[2]||F!==C[3])e.scissor(k,R,N,F),C[0]=k,C[1]=R,C[2]=N,C[3]=F;k=c[0];R=c[1];N=c[2];F=c[3];if(k!==D[0]||R!==D[1]||N!==D[2]||F!==D[3])e.viewport(k,R,N,F),D[0]=k,D[1]=R,D[2]=N,D[3]=F;f.dirty=!1}if(k=f.profile)r=performance.now(),b.count+=x;R=w.program(w.vert,
w.frag);e.useProgram(R.program);u.setVAO(null);N=R.id;(F=la[N])||(F=la[N]=l(R));F.call(this,a,x);u.setVAO(null);k&&(b.cpuTime+=performance.now()-r)},draw:function(a){var l,k,T,R,N;l=d.next;l!==d.cur&&(l?e.bindFramebuffer(36160,l.framebuffer):e.bindFramebuffer(36160,null),d.cur=l);if(f.dirty){l=g.dither;l!==f.dither&&(l?e.enable(3024):e.disable(3024),f.dither=l);l=g.blend_enable;l!==f.blend_enable&&(l?e.enable(3042):e.disable(3042),f.blend_enable=l);l=pa[0];T=pa[1];R=pa[2];N=pa[3];if(l!==h[0]||T!==
h[1]||R!==h[2]||N!==h[3])e.blendColor(l,T,R,N),h[0]=l,h[1]=T,h[2]=R,h[3]=N;l=A[0];T=A[1];if(l!==n[0]||T!==n[1])e.blendEquationSeparate(l,T),n[0]=l,n[1]=T;l=ua[0];T=ua[1];R=ua[2];N=ua[3];if(l!==m[0]||T!==m[1]||R!==m[2]||N!==m[3])e.blendFuncSeparate(l,T,R,N),m[0]=l,m[1]=T,m[2]=R,m[3]=N;l=g.depth_enable;l!==f.depth_enable&&(l?e.enable(2929):e.disable(2929),f.depth_enable=l);l=g.depth_func;l!==f.depth_func&&(e.depthFunc(l),f.depth_func=l);l=H[0];T=H[1];if(l!==q[0]||T!==q[1])e.depthRange(l,T),q[0]=l,q[1]=
T;l=g.depth_mask;l!==f.depth_mask&&(e.depthMask(l),f.depth_mask=l);l=E[0];T=E[1];R=E[2];N=E[3];if(l!==J[0]||T!==J[1]||R!==J[2]||N!==J[3])e.colorMask(l,T,R,N),J[0]=l,J[1]=T,J[2]=R,J[3]=N;l=g.cull_enable;l!==f.cull_enable&&(l?e.enable(2884):e.disable(2884),f.cull_enable=l);l=g.cull_face;l!==f.cull_face&&(e.cullFace(l),f.cull_face=l);l=g.frontFace;l!==f.frontFace&&(e.frontFace(l),f.frontFace=l);l=g.lineWidth;l!==f.lineWidth&&(e.lineWidth(l),f.lineWidth=l);l=g.polygonOffset_enable;l!==f.polygonOffset_enable&&
(l?e.enable(32823):e.disable(32823),f.polygonOffset_enable=l);l=y[0];T=y[1];if(l!==v[0]||T!==v[1])e.polygonOffset(l,T),v[0]=l,v[1]=T;l=g.sample_alpha;l!==f.sample_alpha&&(l?e.enable(32926):e.disable(32926),f.sample_alpha=l);l=g.sample_enable;l!==f.sample_enable&&(l?e.enable(32928):e.disable(32928),f.sample_enable=l);l=S[0];T=S[1];if(l!==L[0]||T!==L[1])e.sampleCoverage(l,T),L[0]=l,L[1]=T;l=g.stencil_enable;l!==f.stencil_enable&&(l?e.enable(2960):e.disable(2960),f.stencil_enable=l);l=g.stencil_mask;
l!==f.stencil_mask&&(e.stencilMask(l),f.stencil_mask=l);l=B[0];T=B[1];R=B[2];if(l!==z[0]||T!==z[1]||R!==z[2])e.stencilFunc(l,T,R),z[0]=l,z[1]=T,z[2]=R;l=t[0];T=t[1];R=t[2];N=t[3];if(l!==p[0]||T!==p[1]||R!==p[2]||N!==p[3])e.stencilOpSeparate(l,T,R,N),p[0]=l,p[1]=T,p[2]=R,p[3]=N;l=I[0];T=I[1];R=I[2];N=I[3];if(l!==K[0]||T!==K[1]||R!==K[2]||N!==K[3])e.stencilOpSeparate(l,T,R,N),K[0]=l,K[1]=T,K[2]=R,K[3]=N;l=g.scissor_enable;l!==f.scissor_enable&&(l?e.enable(3089):e.disable(3089),f.scissor_enable=l);l=
Q[0];T=Q[1];R=Q[2];N=Q[3];if(l!==C[0]||T!==C[1]||R!==C[2]||N!==C[3])e.scissor(l,T,R,N),C[0]=l,C[1]=T,C[2]=R,C[3]=N;l=c[0];T=c[1];R=c[2];N=c[3];if(l!==D[0]||T!==D[1]||R!==D[2]||N!==D[3])e.viewport(l,T,R,N),D[0]=l,D[1]=T,D[2]=R,D[3]=N;f.dirty=!1}if(l=f.profile)k=performance.now(),b.count++;T=w.program(w.vert,w.frag);e.useProgram(T.program);u.setVAO(null);R=T.id;(N=r[R])||(N=r[R]=x(T));N.call(this,a);u.setVAO(null);l&&(b.cpuTime+=performance.now()-k)},scope:function(a,c,p){var e,l;if(e=f.profile)l=performance.now(),
b.count++;c(k,a,p);e&&(b.cpuTime+=performance.now()-l)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,b,x,l,k,f,d,e,g,w,u,pa,h,A,n,ua,m,E,J,H,q,y,v,S,L,Q,C,B,z,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,
V,ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa){var ha,Y,va,Ka,Ga,eb,ba,Gc,cc,Ha,dc,Tb,Ae,Fd,zd,Od,Ce,Bd,Xd,pe,he,Dd,Pd,ae,se,cf,Pe,Te,Gd,De,te,ue,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va;ha=a.attributes;Y=a.context;va=a.current;Ka=a.draw;Ga=a.elements;eb=a.framebuffer;ba=a.gl;Gc=a.next;cc=a.shader;Ha=a.uniforms;dc=a.vao;Tb=Gc.blend_color;Ae=va.blend_color;Fd=Gc.blend_equation;zd=va.blend_equation;Od=Gc.blend_func;Ce=va.blend_func;Bd=
Gc.colorMask;Xd=va.colorMask;pe=Gc.depth_range;he=va.depth_range;Dd=Gc.polygonOffset_offset;Pd=va.polygonOffset_offset;ae=Gc.sample_coverage;se=va.sample_coverage;cf=Gc.scissor_box;Pe=va.scissor_box;Te=Gc.stencil_func;Gd=va.stencil_func;De=Gc.stencil_opBack;te=va.stencil_opBack;ue=Gc.stencil_opFront;Yd=va.stencil_opFront;Jd=Gc.viewport;pd=va.viewport;ed={};sd={};Oc=new Float32Array(16);rd=new Float32Array(16);Hc=new Float32Array(16);id=new Float32Array(16);Tc=new Float32Array(16);nd=new Float32Array(16);
Wb=new Float32Array(16);Jb=new Float32Array(16);vc=new Float32Array(16);Ab=new Float32Array(16);yc=new Float32Array(16);Cb=new Float32Array(16);Lc=new Float32Array(16);oc=new Float32Array(16);Ic=new Float32Array(16);$c=new Float32Array(16);Zc=new Float32Array(16);Ec=new Float32Array(16);hc=new Float32Array(16);Jc=new Float32Array(16);qc=new Float32Array(16);rc=new Float32Array(16);fc=new Float32Array(16);pb=new Float32Array(16);fb=new Float32Array(16);Pc=new Float32Array(16);$b=new Float32Array(16);
hb=new Float32Array(16);Ob=new Float32Array(16);bb=new Float32Array(16);qb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,c){var p,b,x,r;p=eb.next;p!==eb.cur&&(p?ba.bindFramebuffer(36160,p.framebuffer):ba.bindFramebuffer(36160,null),eb.cur=p);if(va.dirty){var t,D,v,y,C,B,I,Q,L,K,H,la,q,z,ea,S,Ha,ra,Tb,cc,Jb,Tc,Wb,Pa,Cb;t=Bd[0];D=Bd[1];v=Bd[2];y=Bd[3];if(t!==Xd[0]||D!==Xd[1]||v!==Xd[2]||y!==Xd[3])ba.colorMask(t,D,v,y),Xd[0]=t,Xd[1]=D,Xd[2]=v,Xd[3]=y;C=Gc.frontFace;C!==va.frontFace&&
(ba.frontFace(C),va.frontFace=C);B=Gc.polygonOffset_enable;B!==va.polygonOffset_enable&&(B?ba.enable(32823):ba.disable(32823),va.polygonOffset_enable=B);I=Dd[0];Q=Dd[1];if(I!==Pd[0]||Q!==Pd[1])ba.polygonOffset(I,Q),Pd[0]=I,Pd[1]=Q;L=Gc.sample_alpha;L!==va.sample_alpha&&(L?ba.enable(32926):ba.disable(32926),va.sample_alpha=L);K=Gc.sample_enable;K!==va.sample_enable&&(K?ba.enable(32928):ba.disable(32928),va.sample_enable=K);H=ae[0];la=ae[1];if(H!==se[0]||la!==se[1])ba.sampleCoverage(H,la),se[0]=H,se[1]=
la;q=Gc.stencil_enable;q!==va.stencil_enable&&(q?ba.enable(2960):ba.disable(2960),va.stencil_enable=q);z=Gc.stencil_mask;z!==va.stencil_mask&&(ba.stencilMask(z),va.stencil_mask=z);ea=Te[0];S=Te[1];Ha=Te[2];if(ea!==Gd[0]||S!==Gd[1]||Ha!==Gd[2])ba.stencilFunc(ea,S,Ha),Gd[0]=ea,Gd[1]=S,Gd[2]=Ha;ra=ue[0];Tb=ue[1];cc=ue[2];Jb=ue[3];if(ra!==Yd[0]||Tb!==Yd[1]||cc!==Yd[2]||Jb!==Yd[3])ba.stencilOpSeparate(ra,Tb,cc,Jb),Yd[0]=ra,Yd[1]=Tb,Yd[2]=cc,Yd[3]=Jb;Tc=De[0];Wb=De[1];Pa=De[2];Cb=De[3];if(Tc!==te[0]||Wb!==
te[1]||Pa!==te[2]||Cb!==te[3])ba.stencilOpSeparate(Tc,Wb,Pa,Cb),te[0]=Tc,te[1]=Wb,te[2]=Pa,te[3]=Cb}ba.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;ba.disable(3042);va.blend_enable=!1;ba.blendEquationSeparate(32774,32774);zd[0]=32774;zd[1]=32774;ba.blendFuncSeparate(770,771,1,1);Ce[0]=770;Ce[1]=771;Ce[2]=1;Ce[3]=1;ba.enable(2884);va.cull_enable=!0;ba.cullFace(1029);va.cull_face=1029;ba.enable(2929);va.depth_enable=!0;ba.depthFunc(513);va.depth_func=513;ba.depthMask(!0);va.depth_mask=!0;ba.depthRange(0,
1);he[0]=0;he[1]=1;ba.disable(3024);va.dither=!1;ba.lineWidth(2);va.lineWidth=2;ba.enable(3089);va.scissor_enable=!0;b=va.profile;va.profile=!1;ba.useProgram(na.program);var cf,Ab,nd,Ma,oc,Ya,Hc,Od,nb,Oa,vc,Ra,xb,yb,Ta,ob,rd,Fd,Ic,cb,Lc,id,Xa,Oc,Bb,Za,pe,yc,Yb,Rb,Jd,Sb,$c;dc.setVAO(null);cf=Ba.location;Ab=ha[cf];Ab.buffer||ba.enableVertexAttribArray(cf);if(Ab.type!==l.dtype||4!==Ab.size||Ab.buffer!==l||!1!==Ab.normalized||0!==Ab.offset||0!==Ab.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(cf,
4,l.dtype,!1,0,0),Ab.type=l.dtype,Ab.size=4,Ab.buffer=l,Ab.normalized=!1,Ab.offset=0,Ab.stride=0;nd=Qa.location;Ma=ha[nd];Ma.buffer||ba.enableVertexAttribArray(nd);if(Ma.type!==k.dtype||4!==Ma.size||Ma.buffer!==k||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)ba.bindBuffer(34962,k.buffer),ba.vertexAttribPointer(nd,4,k.dtype,!1,0,0),Ma.type=k.dtype,Ma.size=4,Ma.buffer=k,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;oc=Aa.location;Ya=ha[oc];Ya.buffer||ba.enableVertexAttribArray(oc);if(Ya.type!==f.dtype||
4!==Ya.size||Ya.buffer!==f||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ba.bindBuffer(34962,f.buffer),ba.vertexAttribPointer(oc,4,f.dtype,!1,0,0),Ya.type=f.dtype,Ya.size=4,Ya.buffer=f,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Hc=Hb.location;Od=ha[Hc];Od.buffer||ba.enableVertexAttribArray(Hc);if(Od.type!==d.dtype||4!==Od.size||Od.buffer!==d||!1!==Od.normalized||0!==Od.offset||0!==Od.stride)ba.bindBuffer(34962,d.buffer),ba.vertexAttribPointer(Hc,4,d.dtype,!1,0,0),Od.type=d.dtype,Od.size=4,Od.buffer=
d,Od.normalized=!1,Od.offset=0,Od.stride=0;nb=$a.location;Oa=ha[nb];Oa.buffer||ba.enableVertexAttribArray(nb);if(Oa.type!==e.dtype||4!==Oa.size||Oa.buffer!==e||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ba.bindBuffer(34962,e.buffer),ba.vertexAttribPointer(nb,4,e.dtype,!1,0,0),Oa.type=e.dtype,Oa.size=4,Oa.buffer=e,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;vc=V.location;Ra=ha[vc];Ra.buffer||ba.enableVertexAttribArray(vc);if(Ra.type!==g.dtype||4!==Ra.size||Ra.buffer!==g||!1!==Ra.normalized||0!==
Ra.offset||0!==Ra.stride)ba.bindBuffer(34962,g.buffer),ba.vertexAttribPointer(vc,4,g.dtype,!1,0,0),Ra.type=g.dtype,Ra.size=4,Ra.buffer=g,Ra.normalized=!1,Ra.offset=0,Ra.stride=0;xb=ca.location;yb=ha[xb];yb.buffer||ba.enableVertexAttribArray(xb);if(yb.type!==w.dtype||4!==yb.size||yb.buffer!==w||!1!==yb.normalized||0!==yb.offset||0!==yb.stride)ba.bindBuffer(34962,w.buffer),ba.vertexAttribPointer(xb,4,w.dtype,!1,0,0),yb.type=w.dtype,yb.size=4,yb.buffer=w,yb.normalized=!1,yb.offset=0,yb.stride=0;Ta=sa.location;
ob=ha[Ta];ob.buffer||ba.enableVertexAttribArray(Ta);if(ob.type!==u.dtype||4!==ob.size||ob.buffer!==u||!1!==ob.normalized||0!==ob.offset||0!==ob.stride)ba.bindBuffer(34962,u.buffer),ba.vertexAttribPointer(Ta,4,u.dtype,!1,0,0),ob.type=u.dtype,ob.size=4,ob.buffer=u,ob.normalized=!1,ob.offset=0,ob.stride=0;rd=wa.location;Fd=ha[rd];Fd.buffer||ba.enableVertexAttribArray(rd);if(Fd.type!==pa.dtype||4!==Fd.size||Fd.buffer!==pa||!1!==Fd.normalized||0!==Fd.offset||0!==Fd.stride)ba.bindBuffer(34962,pa.buffer),
ba.vertexAttribPointer(rd,4,pa.dtype,!1,0,0),Fd.type=pa.dtype,Fd.size=4,Fd.buffer=pa,Fd.normalized=!1,Fd.offset=0,Fd.stride=0;Ic=Ea.location;cb=ha[Ic];cb.buffer||ba.enableVertexAttribArray(Ic);if(cb.type!==h.dtype||4!==cb.size||cb.buffer!==h||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)ba.bindBuffer(34962,h.buffer),ba.vertexAttribPointer(Ic,4,h.dtype,!1,0,0),cb.type=h.dtype,cb.size=4,cb.buffer=h,cb.normalized=!1,cb.offset=0,cb.stride=0;Lc=mb.location;id=ha[Lc];id.buffer||ba.enableVertexAttribArray(Lc);
if(id.type!==A.dtype||4!==id.size||id.buffer!==A||!1!==id.normalized||0!==id.offset||0!==id.stride)ba.bindBuffer(34962,A.buffer),ba.vertexAttribPointer(Lc,4,A.dtype,!1,0,0),id.type=A.dtype,id.size=4,id.buffer=A,id.normalized=!1,id.offset=0,id.stride=0;Xa=Gb.location;Oc=ha[Xa];Oc.buffer||ba.enableVertexAttribArray(Xa);if(Oc.type!==n.dtype||4!==Oc.size||Oc.buffer!==n||!1!==Oc.normalized||0!==Oc.offset||0!==Oc.stride)ba.bindBuffer(34962,n.buffer),ba.vertexAttribPointer(Xa,4,n.dtype,!1,0,0),Oc.type=n.dtype,
Oc.size=4,Oc.buffer=n,Oc.normalized=!1,Oc.offset=0,Oc.stride=0;Bb=fa.location;Za=ha[Bb];Za.buffer||ba.enableVertexAttribArray(Bb);if(Za.type!==ua.dtype||4!==Za.size||Za.buffer!==ua||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ba.bindBuffer(34962,ua.buffer),ba.vertexAttribPointer(Bb,4,ua.dtype,!1,0,0),Za.type=ua.dtype,Za.size=4,Za.buffer=ua,Za.normalized=!1,Za.offset=0,Za.stride=0;pe=W.location;yc=ha[pe];yc.buffer||ba.enableVertexAttribArray(pe);if(yc.type!==m.dtype||4!==yc.size||yc.buffer!==
m||!1!==yc.normalized||0!==yc.offset||0!==yc.stride)ba.bindBuffer(34962,m.buffer),ba.vertexAttribPointer(pe,4,m.dtype,!1,0,0),yc.type=m.dtype,yc.size=4,yc.buffer=m,yc.normalized=!1,yc.offset=0,yc.stride=0;Yb=xa.location;Rb=ha[Yb];Rb.buffer||ba.enableVertexAttribArray(Yb);if(Rb.type!==E.dtype||4!==Rb.size||Rb.buffer!==E||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)ba.bindBuffer(34962,E.buffer),ba.vertexAttribPointer(Yb,4,E.dtype,!1,0,0),Rb.type=E.dtype,Rb.size=4,Rb.buffer=E,Rb.normalized=!1,Rb.offset=
0,Rb.stride=0;Jd=aa.location;Sb=ha[Jd];Sb.buffer||ba.enableVertexAttribArray(Jd);if(Sb.type!==J.dtype||4!==Sb.size||Sb.buffer!==J||!1!==Sb.normalized||0!==Sb.offset||0!==Sb.stride)ba.bindBuffer(34962,J.buffer),ba.vertexAttribPointer(Jd,4,J.dtype,!1,0,0),Sb.type=J.dtype,Sb.size=4,Sb.buffer=J,Sb.normalized=!1,Sb.offset=0,Sb.stride=0;ba.uniform1i(Ia.location,U.bind());($c=Ka.elements)?ba.bindBuffer(34963,$c.buffer.buffer):dc.currentVAO&&($c=Ga.getElements(dc.currentVAO.elements))&&ba.bindBuffer(34963,
$c.buffer.buffer);for(x=0;x<c;++x){r=a[x];var Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de;ed.height=r.viewportHeight;ed.width=r.viewportWidth;ed.x=r.viewportX;ed.y=r.viewportY;Fc=ed.x|0;ud=ed.y|0;Rc="width"in ed?ed.width|0:Y.framebufferWidth-Fc;ad="height"in ed?ed.height|0:Y.framebufferHeight-ud;vd=Y.viewportWidth;Y.viewportWidth=Rc;pc=Y.viewportHeight;Y.viewportHeight=
ad;ba.viewport(Fc,ud,Rc,ad);pd[0]=Fc;pd[1]=ud;pd[2]=Rc;pd[3]=ad;sd.height=r.scissorHeight;sd.width=r.scissorWidth;sd.x=r.scissorX;sd.y=r.scissorY;xc=sd.x|0;jc=sd.y|0;ab="width"in sd?sd.width|0:Y.framebufferWidth-xc;tc="height"in sd?sd.height|0:Y.framebufferHeight-jc;ba.scissor(xc,jc,ab,tc);Pe[0]=xc;Pe[1]=jc;Pe[2]=ab;Pe[3]=tc;Ub=r.dim0A;ba.uniformMatrix4fv(R.location,!1,Array.isArray(Ub)||Ub instanceof Float32Array?Ub:(Zc[0]=Ub[0],Zc[1]=Ub[1],Zc[2]=Ub[2],Zc[3]=Ub[3],Zc[4]=Ub[4],Zc[5]=Ub[5],Zc[6]=Ub[6],
Zc[7]=Ub[7],Zc[8]=Ub[8],Zc[9]=Ub[9],Zc[10]=Ub[10],Zc[11]=Ub[11],Zc[12]=Ub[12],Zc[13]=Ub[13],Zc[14]=Ub[14],Zc[15]=Ub[15],Zc));Zb=r.dim1A;ba.uniformMatrix4fv(P.location,!1,Array.isArray(Zb)||Zb instanceof Float32Array?Zb:(Ec[0]=Zb[0],Ec[1]=Zb[1],Ec[2]=Zb[2],Ec[3]=Zb[3],Ec[4]=Zb[4],Ec[5]=Zb[5],Ec[6]=Zb[6],Ec[7]=Zb[7],Ec[8]=Zb[8],Ec[9]=Zb[9],Ec[10]=Zb[10],Ec[11]=Zb[11],Ec[12]=Zb[12],Ec[13]=Zb[13],Ec[14]=Zb[14],Ec[15]=Zb[15],Ec));gc=r.dim0B;ba.uniformMatrix4fv(N.location,!1,Array.isArray(gc)||gc instanceof
Float32Array?gc:(hc[0]=gc[0],hc[1]=gc[1],hc[2]=gc[2],hc[3]=gc[3],hc[4]=gc[4],hc[5]=gc[5],hc[6]=gc[6],hc[7]=gc[7],hc[8]=gc[8],hc[9]=gc[9],hc[10]=gc[10],hc[11]=gc[11],hc[12]=gc[12],hc[13]=gc[13],hc[14]=gc[14],hc[15]=gc[15],hc));kc=r.dim1B;ba.uniformMatrix4fv(qa.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(Jc[0]=kc[0],Jc[1]=kc[1],Jc[2]=kc[2],Jc[3]=kc[3],Jc[4]=kc[4],Jc[5]=kc[5],Jc[6]=kc[6],Jc[7]=kc[7],Jc[8]=kc[8],Jc[9]=kc[9],Jc[10]=kc[10],Jc[11]=kc[11],Jc[12]=kc[12],Jc[13]=kc[13],Jc[14]=
kc[14],Jc[15]=kc[15],Jc));zc=r.dim0C;ba.uniformMatrix4fv(F.location,!1,Array.isArray(zc)||zc instanceof Float32Array?zc:(qc[0]=zc[0],qc[1]=zc[1],qc[2]=zc[2],qc[3]=zc[3],qc[4]=zc[4],qc[5]=zc[5],qc[6]=zc[6],qc[7]=zc[7],qc[8]=zc[8],qc[9]=zc[9],qc[10]=zc[10],qc[11]=zc[11],qc[12]=zc[12],qc[13]=zc[13],qc[14]=zc[14],qc[15]=zc[15],qc));Cc=r.dim1C;ba.uniformMatrix4fv(ta.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(rc[0]=Cc[0],rc[1]=Cc[1],rc[2]=Cc[2],rc[3]=Cc[3],rc[4]=Cc[4],rc[5]=Cc[5],rc[6]=
Cc[6],rc[7]=Cc[7],rc[8]=Cc[8],rc[9]=Cc[9],rc[10]=Cc[10],rc[11]=Cc[11],rc[12]=Cc[12],rc[13]=Cc[13],rc[14]=Cc[14],rc[15]=Cc[15],rc));fd=r.dim0D;ba.uniformMatrix4fv(O.location,!1,Array.isArray(fd)||fd instanceof Float32Array?fd:(fc[0]=fd[0],fc[1]=fd[1],fc[2]=fd[2],fc[3]=fd[3],fc[4]=fd[4],fc[5]=fd[5],fc[6]=fd[6],fc[7]=fd[7],fc[8]=fd[8],fc[9]=fd[9],fc[10]=fd[10],fc[11]=fd[11],fc[12]=fd[12],fc[13]=fd[13],fc[14]=fd[14],fc[15]=fd[15],fc));Uc=r.dim1D;ba.uniformMatrix4fv(G.location,!1,Array.isArray(Uc)||Uc instanceof
Float32Array?Uc:(pb[0]=Uc[0],pb[1]=Uc[1],pb[2]=Uc[2],pb[3]=Uc[3],pb[4]=Uc[4],pb[5]=Uc[5],pb[6]=Uc[6],pb[7]=Uc[7],pb[8]=Uc[8],pb[9]=Uc[9],pb[10]=Uc[10],pb[11]=Uc[11],pb[12]=Uc[12],pb[13]=Uc[13],pb[14]=Uc[14],pb[15]=Uc[15],pb));Vc=r.loA;ba.uniformMatrix4fv(Da.location,!1,Array.isArray(Vc)||Vc instanceof Float32Array?Vc:(fb[0]=Vc[0],fb[1]=Vc[1],fb[2]=Vc[2],fb[3]=Vc[3],fb[4]=Vc[4],fb[5]=Vc[5],fb[6]=Vc[6],fb[7]=Vc[7],fb[8]=Vc[8],fb[9]=Vc[9],fb[10]=Vc[10],fb[11]=Vc[11],fb[12]=Vc[12],fb[13]=Vc[13],fb[14]=
Vc[14],fb[15]=Vc[15],fb));Wc=r.hiA;ba.uniformMatrix4fv(da.location,!1,Array.isArray(Wc)||Wc instanceof Float32Array?Wc:(Pc[0]=Wc[0],Pc[1]=Wc[1],Pc[2]=Wc[2],Pc[3]=Wc[3],Pc[4]=Wc[4],Pc[5]=Wc[5],Pc[6]=Wc[6],Pc[7]=Wc[7],Pc[8]=Wc[8],Pc[9]=Wc[9],Pc[10]=Wc[10],Pc[11]=Wc[11],Pc[12]=Wc[12],Pc[13]=Wc[13],Pc[14]=Wc[14],Pc[15]=Wc[15],Pc));bd=r.loB;ba.uniformMatrix4fv(ya.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:($b[0]=bd[0],$b[1]=bd[1],$b[2]=bd[2],$b[3]=bd[3],$b[4]=bd[4],$b[5]=bd[5],$b[6]=
bd[6],$b[7]=bd[7],$b[8]=bd[8],$b[9]=bd[9],$b[10]=bd[10],$b[11]=bd[11],$b[12]=bd[12],$b[13]=bd[13],$b[14]=bd[14],$b[15]=bd[15],$b));od=r.hiB;ba.uniformMatrix4fv(X.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(hb[0]=od[0],hb[1]=od[1],hb[2]=od[2],hb[3]=od[3],hb[4]=od[4],hb[5]=od[5],hb[6]=od[6],hb[7]=od[7],hb[8]=od[8],hb[9]=od[9],hb[10]=od[10],hb[11]=od[11],hb[12]=od[12],hb[13]=od[13],hb[14]=od[14],hb[15]=od[15],hb));gd=r.loC;ba.uniformMatrix4fv(Z.location,!1,Array.isArray(gd)||gd instanceof
Float32Array?gd:(Ob[0]=gd[0],Ob[1]=gd[1],Ob[2]=gd[2],Ob[3]=gd[3],Ob[4]=gd[4],Ob[5]=gd[5],Ob[6]=gd[6],Ob[7]=gd[7],Ob[8]=gd[8],Ob[9]=gd[9],Ob[10]=gd[10],Ob[11]=gd[11],Ob[12]=gd[12],Ob[13]=gd[13],Ob[14]=gd[14],Ob[15]=gd[15],Ob));cd=r.hiC;ba.uniformMatrix4fv(ja.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(bb[0]=cd[0],bb[1]=cd[1],bb[2]=cd[2],bb[3]=cd[3],bb[4]=cd[4],bb[5]=cd[5],bb[6]=cd[6],bb[7]=cd[7],bb[8]=cd[8],bb[9]=cd[9],bb[10]=cd[10],bb[11]=cd[11],bb[12]=cd[12],bb[13]=cd[13],bb[14]=
cd[14],bb[15]=cd[15],bb));nc=r.loD;ba.uniformMatrix4fv(Ca.location,!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(qb[0]=nc[0],qb[1]=nc[1],qb[2]=nc[2],qb[3]=nc[3],qb[4]=nc[4],qb[5]=nc[5],qb[6]=nc[6],qb[7]=nc[7],qb[8]=nc[8],qb[9]=nc[9],qb[10]=nc[10],qb[11]=nc[11],qb[12]=nc[12],qb[13]=nc[13],qb[14]=nc[14],qb[15]=nc[15],qb));ec=r.hiD;ba.uniformMatrix4fv(oa.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(Va[0]=ec[0],Va[1]=ec[1],Va[2]=ec[2],Va[3]=ec[3],Va[4]=ec[4],Va[5]=ec[5],Va[6]=
ec[6],Va[7]=ec[7],Va[8]=ec[8],Va[9]=ec[9],Va[10]=ec[10],Va[11]=ec[11],Va[12]=ec[12],Va[13]=ec[13],Va[14]=ec[14],Va[15]=ec[15],Va));dd=r.resolution;Yc=dd[0];Ac=dd[1];x&&hd===Yc&&kd===Ac||(hd=Yc,kd=Ac,ba.uniform2f(ma.location,Yc,Ac));Ad=r.viewBoxPos;ze=Ad[0];ld=Ad[1];x&&me===ze&&Ee===ld||(me=ze,Ee=ld,ba.uniform2f(za.location,ze,ld));Qd=r.viewBoxSize;fe=Qd[0];Rd=Qd[1];x&&Zd===fe&&Kd===Rd||(Zd=fe,Kd=Rd,ba.uniform2f(Fa.location,fe,Rd));Hd=r.maskHeight;x&&qd===Hd||(qd=Hd,ba.uniform1f(ia.location,Hd));Xc=
r.drwLayer;x&&wd===Xc||(wd=Xc,ba.uniform1f(M.location,Xc));td=r.contextColor;md=td[0];Cd=td[1];ie=td[2];ve=td[3];x&&xd===md&&Ed===Cd&&ke===ie&&le===ve||(xd=md,Ed=Cd,ke=ie,le=ve,ba.uniform4f(T.location,md,Cd,ie,ve));(je=r.maskTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);ge=je._texture;ba.uniform1i(ka.location,ge.bind());we=r.offset;if(de=r.count)$c?ba.drawElements(1,de,$c.type,we<<($c.type-5121>>1)):ba.drawArrays(1,we,de),Y.viewportWidth=vd,Y.viewportHeight=pc,ge.unbind()}U.unbind();va.dirty=
!0;dc.setVAO(null);va.profile=b},draw:function(a){var c,p,b,r,t,D;c=eb.next;c!==eb.cur&&(c?ba.bindFramebuffer(36160,c.framebuffer):ba.bindFramebuffer(36160,null),eb.cur=c);if(va.dirty){c=Bd[0];D=Bd[1];p=Bd[2];b=Bd[3];if(c!==Xd[0]||D!==Xd[1]||p!==Xd[2]||b!==Xd[3])ba.colorMask(c,D,p,b),Xd[0]=c,Xd[1]=D,Xd[2]=p,Xd[3]=b;c=Gc.frontFace;c!==va.frontFace&&(ba.frontFace(c),va.frontFace=c);c=Gc.polygonOffset_enable;c!==va.polygonOffset_enable&&(c?ba.enable(32823):ba.disable(32823),va.polygonOffset_enable=c);
c=Dd[0];D=Dd[1];if(c!==Pd[0]||D!==Pd[1])ba.polygonOffset(c,D),Pd[0]=c,Pd[1]=D;c=Gc.sample_alpha;c!==va.sample_alpha&&(c?ba.enable(32926):ba.disable(32926),va.sample_alpha=c);c=Gc.sample_enable;c!==va.sample_enable&&(c?ba.enable(32928):ba.disable(32928),va.sample_enable=c);c=ae[0];D=ae[1];if(c!==se[0]||D!==se[1])ba.sampleCoverage(c,D),se[0]=c,se[1]=D;c=Gc.stencil_enable;c!==va.stencil_enable&&(c?ba.enable(2960):ba.disable(2960),va.stencil_enable=c);c=Gc.stencil_mask;c!==va.stencil_mask&&(ba.stencilMask(c),
va.stencil_mask=c);c=Te[0];D=Te[1];p=Te[2];if(c!==Gd[0]||D!==Gd[1]||p!==Gd[2])ba.stencilFunc(c,D,p),Gd[0]=c,Gd[1]=D,Gd[2]=p;c=ue[0];D=ue[1];p=ue[2];b=ue[3];if(c!==Yd[0]||D!==Yd[1]||p!==Yd[2]||b!==Yd[3])ba.stencilOpSeparate(c,D,p,b),Yd[0]=c,Yd[1]=D,Yd[2]=p,Yd[3]=b;c=De[0];D=De[1];p=De[2];b=De[3];if(c!==te[0]||D!==te[1]||p!==te[2]||b!==te[3])ba.stencilOpSeparate(c,D,p,b),te[0]=c,te[1]=D,te[2]=p,te[3]=b}ed.height=a.viewportHeight;ed.width=a.viewportWidth;ed.x=a.viewportX;ed.y=a.viewportY;p=ed.x|0;b=
ed.y|0;r="width"in ed?ed.width|0:Y.framebufferWidth-p;t="height"in ed?ed.height|0:Y.framebufferHeight-b;c=Y.viewportWidth;Y.viewportWidth=r;D=Y.viewportHeight;Y.viewportHeight=t;ba.viewport(p,b,r,t);pd[0]=p;pd[1]=b;pd[2]=r;pd[3]=t;ba.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;ba.disable(3042);va.blend_enable=!1;ba.blendEquationSeparate(32774,32774);zd[0]=32774;zd[1]=32774;ba.blendFuncSeparate(770,771,1,1);Ce[0]=770;Ce[1]=771;Ce[2]=1;Ce[3]=1;ba.enable(2884);va.cull_enable=!0;ba.cullFace(1029);
va.cull_face=1029;ba.enable(2929);va.depth_enable=!0;ba.depthFunc(513);va.depth_func=513;ba.depthMask(!0);va.depth_mask=!0;ba.depthRange(0,1);he[0]=0;he[1]=1;ba.disable(3024);va.dither=!1;ba.lineWidth(2);va.lineWidth=2;sd.height=a.scissorHeight;sd.width=a.scissorWidth;sd.x=a.scissorX;sd.y=a.scissorY;p=sd.x|0;b=sd.y|0;r="width"in sd?sd.width|0:Y.framebufferWidth-p;t="height"in sd?sd.height|0:Y.framebufferHeight-b;ba.scissor(p,b,r,t);Pe[0]=p;Pe[1]=b;Pe[2]=r;Pe[3]=t;ba.enable(3089);va.scissor_enable=
!0;p=va.profile;va.profile=!1;ba.useProgram(x.program);dc.setVAO(null);b=Ba.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==l.dtype||4!==r.size||r.buffer!==l||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(b,4,l.dtype,!1,0,0),r.type=l.dtype,r.size=4,r.buffer=l,r.normalized=!1,r.offset=0,r.stride=0;b=Qa.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==k.dtype||4!==r.size||r.buffer!==k||!1!==r.normalized||0!==
r.offset||0!==r.stride)ba.bindBuffer(34962,k.buffer),ba.vertexAttribPointer(b,4,k.dtype,!1,0,0),r.type=k.dtype,r.size=4,r.buffer=k,r.normalized=!1,r.offset=0,r.stride=0;b=Aa.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==f.dtype||4!==r.size||r.buffer!==f||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,f.buffer),ba.vertexAttribPointer(b,4,f.dtype,!1,0,0),r.type=f.dtype,r.size=4,r.buffer=f,r.normalized=!1,r.offset=0,r.stride=0;b=Hb.location;r=ha[b];r.buffer||
ba.enableVertexAttribArray(b);if(r.type!==d.dtype||4!==r.size||r.buffer!==d||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,d.buffer),ba.vertexAttribPointer(b,4,d.dtype,!1,0,0),r.type=d.dtype,r.size=4,r.buffer=d,r.normalized=!1,r.offset=0,r.stride=0;b=$a.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==e.dtype||4!==r.size||r.buffer!==e||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,e.buffer),ba.vertexAttribPointer(b,4,e.dtype,!1,0,0),r.type=
e.dtype,r.size=4,r.buffer=e,r.normalized=!1,r.offset=0,r.stride=0;b=V.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==g.dtype||4!==r.size||r.buffer!==g||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,g.buffer),ba.vertexAttribPointer(b,4,g.dtype,!1,0,0),r.type=g.dtype,r.size=4,r.buffer=g,r.normalized=!1,r.offset=0,r.stride=0;b=ca.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==w.dtype||4!==r.size||r.buffer!==w||!1!==r.normalized||0!==r.offset||
0!==r.stride)ba.bindBuffer(34962,w.buffer),ba.vertexAttribPointer(b,4,w.dtype,!1,0,0),r.type=w.dtype,r.size=4,r.buffer=w,r.normalized=!1,r.offset=0,r.stride=0;b=sa.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==u.dtype||4!==r.size||r.buffer!==u||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,u.buffer),ba.vertexAttribPointer(b,4,u.dtype,!1,0,0),r.type=u.dtype,r.size=4,r.buffer=u,r.normalized=!1,r.offset=0,r.stride=0;b=wa.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);
if(r.type!==pa.dtype||4!==r.size||r.buffer!==pa||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,pa.buffer),ba.vertexAttribPointer(b,4,pa.dtype,!1,0,0),r.type=pa.dtype,r.size=4,r.buffer=pa,r.normalized=!1,r.offset=0,r.stride=0;b=Ea.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==h.dtype||4!==r.size||r.buffer!==h||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,h.buffer),ba.vertexAttribPointer(b,4,h.dtype,!1,0,0),r.type=h.dtype,r.size=4,r.buffer=
h,r.normalized=!1,r.offset=0,r.stride=0;b=mb.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==A.dtype||4!==r.size||r.buffer!==A||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,A.buffer),ba.vertexAttribPointer(b,4,A.dtype,!1,0,0),r.type=A.dtype,r.size=4,r.buffer=A,r.normalized=!1,r.offset=0,r.stride=0;b=Gb.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==n.dtype||4!==r.size||r.buffer!==n||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,
n.buffer),ba.vertexAttribPointer(b,4,n.dtype,!1,0,0),r.type=n.dtype,r.size=4,r.buffer=n,r.normalized=!1,r.offset=0,r.stride=0;b=fa.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==ua.dtype||4!==r.size||r.buffer!==ua||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,ua.buffer),ba.vertexAttribPointer(b,4,ua.dtype,!1,0,0),r.type=ua.dtype,r.size=4,r.buffer=ua,r.normalized=!1,r.offset=0,r.stride=0;b=W.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==
m.dtype||4!==r.size||r.buffer!==m||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,m.buffer),ba.vertexAttribPointer(b,4,m.dtype,!1,0,0),r.type=m.dtype,r.size=4,r.buffer=m,r.normalized=!1,r.offset=0,r.stride=0;b=xa.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==E.dtype||4!==r.size||r.buffer!==E||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,E.buffer),ba.vertexAttribPointer(b,4,E.dtype,!1,0,0),r.type=E.dtype,r.size=4,r.buffer=E,r.normalized=
!1,r.offset=0,r.stride=0;b=aa.location;r=ha[b];r.buffer||ba.enableVertexAttribArray(b);if(r.type!==J.dtype||4!==r.size||r.buffer!==J||!1!==r.normalized||0!==r.offset||0!==r.stride)ba.bindBuffer(34962,J.buffer),ba.vertexAttribPointer(b,4,J.dtype,!1,0,0),r.type=J.dtype,r.size=4,r.buffer=J,r.normalized=!1,r.offset=0,r.stride=0;b=a.dim0A;ba.uniformMatrix4fv(R.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Oc[0]=b[0],Oc[1]=b[1],Oc[2]=b[2],Oc[3]=b[3],Oc[4]=b[4],Oc[5]=b[5],Oc[6]=b[6],Oc[7]=b[7],
Oc[8]=b[8],Oc[9]=b[9],Oc[10]=b[10],Oc[11]=b[11],Oc[12]=b[12],Oc[13]=b[13],Oc[14]=b[14],Oc[15]=b[15],Oc));b=a.dim1A;ba.uniformMatrix4fv(P.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(rd[0]=b[0],rd[1]=b[1],rd[2]=b[2],rd[3]=b[3],rd[4]=b[4],rd[5]=b[5],rd[6]=b[6],rd[7]=b[7],rd[8]=b[8],rd[9]=b[9],rd[10]=b[10],rd[11]=b[11],rd[12]=b[12],rd[13]=b[13],rd[14]=b[14],rd[15]=b[15],rd));b=a.dim0B;ba.uniformMatrix4fv(N.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Hc[0]=b[0],Hc[1]=b[1],
Hc[2]=b[2],Hc[3]=b[3],Hc[4]=b[4],Hc[5]=b[5],Hc[6]=b[6],Hc[7]=b[7],Hc[8]=b[8],Hc[9]=b[9],Hc[10]=b[10],Hc[11]=b[11],Hc[12]=b[12],Hc[13]=b[13],Hc[14]=b[14],Hc[15]=b[15],Hc));b=a.dim1B;ba.uniformMatrix4fv(qa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(id[0]=b[0],id[1]=b[1],id[2]=b[2],id[3]=b[3],id[4]=b[4],id[5]=b[5],id[6]=b[6],id[7]=b[7],id[8]=b[8],id[9]=b[9],id[10]=b[10],id[11]=b[11],id[12]=b[12],id[13]=b[13],id[14]=b[14],id[15]=b[15],id));b=a.dim0C;ba.uniformMatrix4fv(F.location,!1,Array.isArray(b)||
b instanceof Float32Array?b:(Tc[0]=b[0],Tc[1]=b[1],Tc[2]=b[2],Tc[3]=b[3],Tc[4]=b[4],Tc[5]=b[5],Tc[6]=b[6],Tc[7]=b[7],Tc[8]=b[8],Tc[9]=b[9],Tc[10]=b[10],Tc[11]=b[11],Tc[12]=b[12],Tc[13]=b[13],Tc[14]=b[14],Tc[15]=b[15],Tc));b=a.dim1C;ba.uniformMatrix4fv(ta.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(nd[0]=b[0],nd[1]=b[1],nd[2]=b[2],nd[3]=b[3],nd[4]=b[4],nd[5]=b[5],nd[6]=b[6],nd[7]=b[7],nd[8]=b[8],nd[9]=b[9],nd[10]=b[10],nd[11]=b[11],nd[12]=b[12],nd[13]=b[13],nd[14]=b[14],nd[15]=b[15],
nd));b=a.dim0D;ba.uniformMatrix4fv(O.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Wb[0]=b[0],Wb[1]=b[1],Wb[2]=b[2],Wb[3]=b[3],Wb[4]=b[4],Wb[5]=b[5],Wb[6]=b[6],Wb[7]=b[7],Wb[8]=b[8],Wb[9]=b[9],Wb[10]=b[10],Wb[11]=b[11],Wb[12]=b[12],Wb[13]=b[13],Wb[14]=b[14],Wb[15]=b[15],Wb));b=a.dim1D;ba.uniformMatrix4fv(G.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Jb[0]=b[0],Jb[1]=b[1],Jb[2]=b[2],Jb[3]=b[3],Jb[4]=b[4],Jb[5]=b[5],Jb[6]=b[6],Jb[7]=b[7],Jb[8]=b[8],Jb[9]=b[9],Jb[10]=b[10],
Jb[11]=b[11],Jb[12]=b[12],Jb[13]=b[13],Jb[14]=b[14],Jb[15]=b[15],Jb));b=a.loA;ba.uniformMatrix4fv(Da.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(vc[0]=b[0],vc[1]=b[1],vc[2]=b[2],vc[3]=b[3],vc[4]=b[4],vc[5]=b[5],vc[6]=b[6],vc[7]=b[7],vc[8]=b[8],vc[9]=b[9],vc[10]=b[10],vc[11]=b[11],vc[12]=b[12],vc[13]=b[13],vc[14]=b[14],vc[15]=b[15],vc));b=a.hiA;ba.uniformMatrix4fv(da.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Ab[0]=b[0],Ab[1]=b[1],Ab[2]=b[2],Ab[3]=b[3],Ab[4]=b[4],Ab[5]=
b[5],Ab[6]=b[6],Ab[7]=b[7],Ab[8]=b[8],Ab[9]=b[9],Ab[10]=b[10],Ab[11]=b[11],Ab[12]=b[12],Ab[13]=b[13],Ab[14]=b[14],Ab[15]=b[15],Ab));b=a.loB;ba.uniformMatrix4fv(ya.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(yc[0]=b[0],yc[1]=b[1],yc[2]=b[2],yc[3]=b[3],yc[4]=b[4],yc[5]=b[5],yc[6]=b[6],yc[7]=b[7],yc[8]=b[8],yc[9]=b[9],yc[10]=b[10],yc[11]=b[11],yc[12]=b[12],yc[13]=b[13],yc[14]=b[14],yc[15]=b[15],yc));b=a.hiB;ba.uniformMatrix4fv(X.location,!1,Array.isArray(b)||b instanceof Float32Array?
b:(Cb[0]=b[0],Cb[1]=b[1],Cb[2]=b[2],Cb[3]=b[3],Cb[4]=b[4],Cb[5]=b[5],Cb[6]=b[6],Cb[7]=b[7],Cb[8]=b[8],Cb[9]=b[9],Cb[10]=b[10],Cb[11]=b[11],Cb[12]=b[12],Cb[13]=b[13],Cb[14]=b[14],Cb[15]=b[15],Cb));b=a.loC;ba.uniformMatrix4fv(Z.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Lc[0]=b[0],Lc[1]=b[1],Lc[2]=b[2],Lc[3]=b[3],Lc[4]=b[4],Lc[5]=b[5],Lc[6]=b[6],Lc[7]=b[7],Lc[8]=b[8],Lc[9]=b[9],Lc[10]=b[10],Lc[11]=b[11],Lc[12]=b[12],Lc[13]=b[13],Lc[14]=b[14],Lc[15]=b[15],Lc));b=a.hiC;ba.uniformMatrix4fv(ja.location,
!1,Array.isArray(b)||b instanceof Float32Array?b:(oc[0]=b[0],oc[1]=b[1],oc[2]=b[2],oc[3]=b[3],oc[4]=b[4],oc[5]=b[5],oc[6]=b[6],oc[7]=b[7],oc[8]=b[8],oc[9]=b[9],oc[10]=b[10],oc[11]=b[11],oc[12]=b[12],oc[13]=b[13],oc[14]=b[14],oc[15]=b[15],oc));b=a.loD;ba.uniformMatrix4fv(Ca.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Ic[0]=b[0],Ic[1]=b[1],Ic[2]=b[2],Ic[3]=b[3],Ic[4]=b[4],Ic[5]=b[5],Ic[6]=b[6],Ic[7]=b[7],Ic[8]=b[8],Ic[9]=b[9],Ic[10]=b[10],Ic[11]=b[11],Ic[12]=b[12],Ic[13]=b[13],Ic[14]=
b[14],Ic[15]=b[15],Ic));b=a.hiD;ba.uniformMatrix4fv(oa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:($c[0]=b[0],$c[1]=b[1],$c[2]=b[2],$c[3]=b[3],$c[4]=b[4],$c[5]=b[5],$c[6]=b[6],$c[7]=b[7],$c[8]=b[8],$c[9]=b[9],$c[10]=b[10],$c[11]=b[11],$c[12]=b[12],$c[13]=b[13],$c[14]=b[14],$c[15]=b[15],$c));b=a.resolution;ba.uniform2f(ma.location,b[0],b[1]);b=a.viewBoxPos;ba.uniform2f(za.location,b[0],b[1]);b=a.viewBoxSize;ba.uniform2f(Fa.location,b[0],b[1]);ba.uniform1f(ia.location,a.maskHeight);ba.uniform1f(M.location,
a.drwLayer);b=a.contextColor;ba.uniform4f(T.location,b[0],b[1],b[2],b[3]);(b=a.maskTexture)&&"framebuffer"===b._reglType&&(b=b.color[0]);b=b._texture;ba.uniform1i(ka.location,b.bind());ba.uniform1i(Ia.location,H.bind());(r=Ka.elements)?ba.bindBuffer(34963,r.buffer.buffer):dc.currentVAO&&(r=Ga.getElements(dc.currentVAO.elements))&&ba.bindBuffer(34963,r.buffer.buffer);t=a.offset;if(a=a.count)r?ba.drawElements(1,a,r.type,t<<(r.type-5121>>1)):ba.drawArrays(1,t,a),va.dirty=!0,dc.setVAO(null),Y.viewportWidth=
c,Y.viewportHeight=D,va.profile=p,b.unbind(),H.unbind()},scope:function(a,b,x){var F,V,G,ca,W,sa,Aa,xa,Qa,Ia,M,R,N,Hb,X,T,Z,ma,fa,ha,P,H,wa,O,da,za,Fa,ba,qa,ya,oa,U,ia,$a,aa,Ba,Ea,ka,Ca,Gb,na,ta,ja,Da,mb,Ga,eb,fb,hc,Jb,Tc,Wb,pb,qc,Ab,Cb,se,De,fc,dc,ue,rc,hb,bb,Va,Jc,Te,nd,oc,ab,qb,Hc,te,id,Gd,Oc,vc,$b,yc,zd,rd,Ic,Ec,Lc,Xd,pd,Ae,Yd,Ob,Dd,Pc,Pe,Zc,$c,ae,Bd,Ce,Pd,he,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd,$d,ce,
ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Se,He,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ed.height=a.viewportHeight;ed.width=a.viewportWidth;ed.x=a.viewportX;ed.y=a.viewportY;
F=ed.x|0;V=ed.y|0;G="width"in ed?ed.width|0:Y.framebufferWidth-F;ca="height"in ed?ed.height|0:Y.framebufferHeight-V;W=Y.viewportWidth;Y.viewportWidth=G;sa=Y.viewportHeight;Y.viewportHeight=ca;Aa=Jd[0];Jd[0]=F;xa=Jd[1];Jd[1]=V;Qa=Jd[2];Jd[2]=G;Ia=Jd[3];Jd[3]=ca;M=Tb[0];Tb[0]=0;R=Tb[1];Tb[1]=0;N=Tb[2];Tb[2]=0;Hb=Tb[3];Tb[3]=0;X=Gc.blend_enable;Gc.blend_enable=!1;T=Fd[0];Fd[0]=32774;Z=Fd[1];Fd[1]=32774;ma=Od[0];Od[0]=770;fa=Od[1];Od[1]=771;ha=Od[2];Od[2]=1;P=Od[3];Od[3]=1;H=Gc.cull_enable;Gc.cull_enable=
!0;wa=Gc.cull_face;Gc.cull_face=1029;O=Gc.depth_enable;Gc.depth_enable=!0;da=Gc.depth_func;Gc.depth_func=513;za=Gc.depth_mask;Gc.depth_mask=!0;Fa=pe[0];pe[0]=0;ba=pe[1];pe[1]=1;qa=Gc.dither;Gc.dither=!1;ya=Gc.lineWidth;Gc.lineWidth=2;sd.height=a.scissorHeight;sd.width=a.scissorWidth;sd.x=a.scissorX;sd.y=a.scissorY;oa=sd.x|0;U=sd.y|0;ia="width"in sd?sd.width|0:Y.framebufferWidth-oa;$a="height"in sd?sd.height|0:Y.framebufferHeight-U;aa=cf[0];cf[0]=oa;Ba=cf[1];cf[1]=U;Ea=cf[2];cf[2]=ia;ka=cf[3];cf[3]=
$a;Ca=Gc.scissor_enable;Gc.scissor_enable=!0;Gb=va.profile;va.profile=!1;na=a.offset;ta=Ka.offset;Ka.offset=na;ja=a.count;Da=Ka.count;Ka.count=ja;mb=Ka.primitive;Ka.primitive=1;Ga=a.contextColor;eb=Ha[24];Ha[24]=Ga;fb=a.dim0A;hc=Ha[3];Ha[3]=fb;Jb=a.dim0B;Tc=Ha[5];Ha[5]=Jb;Wb=a.dim0C;pb=Ha[7];Ha[7]=Wb;qc=a.dim0D;Ab=Ha[9];Ha[9]=qc;Cb=a.dim1A;se=Ha[4];Ha[4]=Cb;De=a.dim1B;fc=Ha[6];Ha[6]=De;dc=a.dim1C;ue=Ha[8];Ha[8]=dc;rc=a.dim1D;hb=Ha[10];Ha[10]=rc;bb=a.drwLayer;Va=Ha[23];Ha[23]=bb;Jc=a.hiA;Te=Ha[12];
Ha[12]=Jc;nd=a.hiB;oc=Ha[14];Ha[14]=nd;ab=a.hiC;qb=Ha[16];Ha[16]=ab;Hc=a.hiD;te=Ha[18];Ha[18]=Hc;id=a.loA;Gd=Ha[11];Ha[11]=id;Oc=a.loB;vc=Ha[13];Ha[13]=Oc;$b=a.loC;yc=Ha[15];Ha[15]=$b;zd=a.loD;rd=Ha[17];Ha[17]=zd;Ic=a.maskHeight;Ec=Ha[22];Ha[22]=Ic;Lc=a.maskTexture;Xd=Ha[25];Ha[25]=Lc;pd=Ha[26];Ha[26]=q;Ae=a.resolution;Yd=Ha[19];Ha[19]=Ae;Ob=a.viewBoxPos;Dd=Ha[20];Ha[20]=Ob;Pc=a.viewBoxSize;Pe=Ha[21];Ha[21]=Pc;Zc=y.buffer;y.buffer=J;$c=y.divisor;y.divisor=0;ae=y.normalized;y.normalized=!1;Bd=y.offset;
y.offset=0;Ce=y.size;y.size=0;Pd=y.state;y.state=1;he=y.stride;y.stride=0;Zd=y.type;y.type=J.dtype;Rd=y.w;y.w=0;Kd=y.x;y.x=0;Hd=y.y;y.y=0;qd=y.z;y.z=0;Xc=v.buffer;v.buffer=l;wd=v.divisor;v.divisor=0;td=v.normalized;v.normalized=!1;md=v.offset;v.offset=0;xd=v.size;v.size=0;Cd=v.state;v.state=1;Ed=v.stride;v.stride=0;ie=v.type;v.type=l.dtype;ke=v.w;v.w=0;ve=v.x;v.x=0;le=v.y;v.y=0;je=v.z;v.z=0;ge=S.buffer;S.buffer=k;we=S.divisor;S.divisor=0;de=S.normalized;S.normalized=!1;ne=S.offset;S.offset=0;Sc=S.size;
S.size=0;jd=S.state;S.state=1;xe=S.stride;S.stride=0;qe=S.type;S.type=k.dtype;Md=S.w;S.w=0;Sd=S.x;S.x=0;Td=S.y;S.y=0;Ud=S.z;S.z=0;oe=L.buffer;L.buffer=f;Be=L.divisor;L.divisor=0;Fe=L.normalized;L.normalized=!1;re=L.offset;L.offset=0;Ue=L.size;L.size=0;Ve=L.state;L.state=1;Qe=L.stride;L.stride=0;ye=L.type;L.type=f.dtype;Ie=L.w;L.w=0;Ke=L.x;L.x=0;Le=L.y;L.y=0;Me=L.z;L.z=0;Je=Q.buffer;Q.buffer=d;Nd=Q.divisor;Q.divisor=0;$d=Q.normalized;Q.normalized=!1;ce=Q.offset;Q.offset=0;ee=Q.size;Q.size=0;Ne=Q.state;
Q.state=1;Id=Q.stride;Q.stride=0;Vd=Q.type;Q.type=d.dtype;Ge=Q.w;Q.w=0;Oe=Q.x;Q.x=0;df=Q.y;Q.y=0;bf=Q.z;Q.z=0;We=C.buffer;C.buffer=e;Re=C.divisor;C.divisor=0;af=C.normalized;C.normalized=!1;$e=C.offset;C.offset=0;Xe=C.size;C.size=0;Ye=C.state;C.state=1;Wd=C.stride;C.stride=0;be=C.type;C.type=e.dtype;Ze=C.w;C.w=0;kf=C.x;C.x=0;of=C.y;C.y=0;gf=C.z;C.z=0;lf=B.buffer;B.buffer=g;mf=B.divisor;B.divisor=0;nf=B.normalized;B.normalized=!1;sf=B.offset;B.offset=0;pf=B.size;B.size=0;tf=B.state;B.state=1;Cf=B.stride;
B.stride=0;Df=B.type;B.type=g.dtype;Se=B.w;B.w=0;He=B.x;B.x=0;qf=B.y;B.y=0;rf=B.z;B.z=0;Ef=z.buffer;z.buffer=w;Hf=z.divisor;z.divisor=0;Bf=z.normalized;z.normalized=!1;Ff=z.offset;z.offset=0;Gf=z.size;z.size=0;xf=z.state;z.state=1;yf=z.stride;z.stride=0;wf=z.type;z.type=w.dtype;zf=z.w;z.w=0;Af=z.x;z.x=0;Jf=z.y;z.y=0;Kf=z.z;z.z=0;Lf=I.buffer;I.buffer=u;Mf=I.divisor;I.divisor=0;uf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;If=I.size;I.size=0;vf=I.state;I.state=1;dg=I.stride;I.stride=0;Sf=I.type;
I.type=u.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;hf=I.y;I.y=0;ef=I.z;I.z=0;Nf=K.buffer;K.buffer=pa;Of=K.divisor;K.divisor=0;eg=K.normalized;K.normalized=!1;fg=K.offset;K.offset=0;gg=K.size;K.size=0;hg=K.state;K.state=1;ig=K.stride;K.stride=0;Wf=K.type;K.type=pa.dtype;Uf=K.w;K.w=0;Xf=K.x;K.x=0;Yf=K.y;K.y=0;Zf=K.z;K.z=0;jg=t.buffer;t.buffer=h;rg=t.divisor;t.divisor=0;sg=t.normalized;t.normalized=!1;tg=t.offset;t.offset=0;ug=t.size;t.size=0;vg=t.state;t.state=1;wg=t.stride;t.stride=0;xg=t.type;t.type=h.dtype;
yg=t.w;t.w=0;zg=t.x;t.x=0;Ag=t.y;t.y=0;Bg=t.z;t.z=0;jf=p.buffer;p.buffer=A;ff=p.divisor;p.divisor=0;Pf=p.normalized;p.normalized=!1;Qf=p.offset;p.offset=0;kg=p.size;p.size=0;lg=p.state;p.state=1;mg=p.stride;p.stride=0;ng=p.type;p.type=A.dtype;og=p.w;p.w=0;$f=p.x;p.x=0;Vf=p.y;p.y=0;ag=p.z;p.z=0;bg=c.buffer;c.buffer=n;cg=c.divisor;c.divisor=0;pg=c.normalized;c.normalized=!1;Cg=c.offset;c.offset=0;Dg=c.size;c.size=0;Eg=c.state;c.state=1;Fg=c.stride;c.stride=0;Gg=c.type;c.type=n.dtype;Hg=c.w;c.w=0;Ig=
c.x;c.x=0;Jg=c.y;c.y=0;Kg=c.z;c.z=0;Lg=D.buffer;D.buffer=ua;Mg=D.divisor;D.divisor=0;Ng=D.normalized;D.normalized=!1;Og=D.offset;D.offset=0;Pg=D.size;D.size=0;Qg=D.state;D.state=1;Rg=D.stride;D.stride=0;Sg=D.type;D.type=ua.dtype;Tg=D.w;D.w=0;Ug=D.x;D.x=0;Vg=D.y;D.y=0;Wg=D.z;D.z=0;Xg=r.buffer;r.buffer=m;Yg=r.divisor;r.divisor=0;Zg=r.normalized;r.normalized=!1;$g=r.offset;r.offset=0;ah=r.size;r.size=0;bh=r.state;r.state=1;ch=r.stride;r.stride=0;dh=r.type;r.type=m.dtype;eh=r.w;r.w=0;fh=r.x;r.x=0;gh=
r.y;r.y=0;hh=r.z;r.z=0;ih=la.buffer;la.buffer=E;jh=la.divisor;la.divisor=0;kh=la.normalized;la.normalized=!1;lh=la.offset;la.offset=0;mh=la.size;la.size=0;nh=la.state;la.state=1;oh=la.stride;la.stride=0;ph=la.type;la.type=E.dtype;qh=la.w;la.w=0;rh=la.x;la.x=0;sh=la.y;la.y=0;th=la.z;la.z=0;uh=cc.vert;cc.vert=2;vh=cc.frag;cc.frag=1;va.dirty=!0;b(Y,a,x);Y.viewportWidth=W;Y.viewportHeight=sa;Jd[0]=Aa;Jd[1]=xa;Jd[2]=Qa;Jd[3]=Ia;Tb[0]=M;Tb[1]=R;Tb[2]=N;Tb[3]=Hb;Gc.blend_enable=X;Fd[0]=T;Fd[1]=Z;Od[0]=ma;
Od[1]=fa;Od[2]=ha;Od[3]=P;Gc.cull_enable=H;Gc.cull_face=wa;Gc.depth_enable=O;Gc.depth_func=da;Gc.depth_mask=za;pe[0]=Fa;pe[1]=ba;Gc.dither=qa;Gc.lineWidth=ya;cf[0]=aa;cf[1]=Ba;cf[2]=Ea;cf[3]=ka;Gc.scissor_enable=Ca;va.profile=Gb;Ka.offset=ta;Ka.count=Da;Ka.primitive=mb;Ha[24]=eb;Ha[3]=hc;Ha[5]=Tc;Ha[7]=pb;Ha[9]=Ab;Ha[4]=se;Ha[6]=fc;Ha[8]=ue;Ha[10]=hb;Ha[23]=Va;Ha[12]=Te;Ha[14]=oc;Ha[16]=qb;Ha[18]=te;Ha[11]=Gd;Ha[13]=vc;Ha[15]=yc;Ha[17]=rd;Ha[22]=Ec;Ha[25]=Xd;Ha[26]=pd;Ha[19]=Yd;Ha[20]=Dd;Ha[21]=Pe;
y.buffer=Zc;y.divisor=$c;y.normalized=ae;y.offset=Bd;y.size=Ce;y.state=Pd;y.stride=he;y.type=Zd;y.w=Rd;y.x=Kd;y.y=Hd;y.z=qd;v.buffer=Xc;v.divisor=wd;v.normalized=td;v.offset=md;v.size=xd;v.state=Cd;v.stride=Ed;v.type=ie;v.w=ke;v.x=ve;v.y=le;v.z=je;S.buffer=ge;S.divisor=we;S.normalized=de;S.offset=ne;S.size=Sc;S.state=jd;S.stride=xe;S.type=qe;S.w=Md;S.x=Sd;S.y=Td;S.z=Ud;L.buffer=oe;L.divisor=Be;L.normalized=Fe;L.offset=re;L.size=Ue;L.state=Ve;L.stride=Qe;L.type=ye;L.w=Ie;L.x=Ke;L.y=Le;L.z=Me;Q.buffer=
Je;Q.divisor=Nd;Q.normalized=$d;Q.offset=ce;Q.size=ee;Q.state=Ne;Q.stride=Id;Q.type=Vd;Q.w=Ge;Q.x=Oe;Q.y=df;Q.z=bf;C.buffer=We;C.divisor=Re;C.normalized=af;C.offset=$e;C.size=Xe;C.state=Ye;C.stride=Wd;C.type=be;C.w=Ze;C.x=kf;C.y=of;C.z=gf;B.buffer=lf;B.divisor=mf;B.normalized=nf;B.offset=sf;B.size=pf;B.state=tf;B.stride=Cf;B.type=Df;B.w=Se;B.x=He;B.y=qf;B.z=rf;z.buffer=Ef;z.divisor=Hf;z.normalized=Bf;z.offset=Ff;z.size=Gf;z.state=xf;z.stride=yf;z.type=wf;z.w=zf;z.x=Af;z.y=Jf;z.z=Kf;I.buffer=Lf;I.divisor=
Mf;I.normalized=uf;I.offset=Rf;I.size=If;I.state=vf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=hf;I.z=ef;K.buffer=Nf;K.divisor=Of;K.normalized=eg;K.offset=fg;K.size=gg;K.state=hg;K.stride=ig;K.type=Wf;K.w=Uf;K.x=Xf;K.y=Yf;K.z=Zf;t.buffer=jg;t.divisor=rg;t.normalized=sg;t.offset=tg;t.size=ug;t.state=vg;t.stride=wg;t.type=xg;t.w=yg;t.x=zg;t.y=Ag;t.z=Bg;p.buffer=jf;p.divisor=ff;p.normalized=Pf;p.offset=Qf;p.size=kg;p.state=lg;p.stride=mg;p.type=ng;p.w=og;p.x=$f;p.y=Vf;p.z=ag;c.buffer=bg;c.divisor=cg;c.normalized=
pg;c.offset=Cg;c.size=Dg;c.state=Eg;c.stride=Fg;c.type=Gg;c.w=Hg;c.x=Ig;c.y=Jg;c.z=Kg;D.buffer=Lg;D.divisor=Mg;D.normalized=Ng;D.offset=Og;D.size=Pg;D.state=Qg;D.stride=Rg;D.type=Sg;D.w=Tg;D.x=Ug;D.y=Vg;D.z=Wg;r.buffer=Xg;r.divisor=Yg;r.normalized=Zg;r.offset=$g;r.size=ah;r.state=bh;r.stride=ch;r.type=dh;r.w=eh;r.x=fh;r.y=gh;r.z=hh;la.buffer=ih;la.divisor=jh;la.normalized=kh;la.offset=lh;la.size=mh;la.state=nh;la.stride=oh;la.type=ph;la.w=qh;la.x=rh;la.y=sh;la.z=th;cc.vert=uh;cc.frag=vh;va.dirty=
!0}}},$1:function(a,b){var x,l,k,f,d,e,g,w,u,pa,h,A,n,q,m,E,J,H,z,y,v,S,L,Q,C,B,ra,I,K,t;x=a.attributes;l=a.current;k=a.framebuffer;f=a.gl;d=a.next;e=a.vao;g=d.blend_color;w=l.blend_color;u=d.blend_equation;pa=l.blend_equation;h=d.blend_func;A=l.blend_func;n=d.colorMask;q=l.colorMask;m=d.depth_range;E=l.depth_range;J=d.polygonOffset_offset;H=l.polygonOffset_offset;z=d.sample_coverage;y=l.sample_coverage;v=d.scissor_box;S=l.scissor_box;L=d.stencil_func;Q=l.stencil_func;C=d.stencil_opBack;B=l.stencil_opBack;
ra=d.stencil_opFront;I=l.stencil_opFront;K=d.viewport;t=l.viewport;return{poll:function(){var a,c,b,e,x,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa;l.dirty=!1;c=d.blend_enable;b=d.cull_enable;e=d.depth_enable;x=d.dither;na=d.polygonOffset_enable;U=d.sample_alpha;aa=d.sample_enable;T=d.scissor_enable;R=d.stencil_enable;N=d.cull_face;F=l.cull_face;O=d.depth_func;P=l.depth_func;qa=d.depth_mask;ta=l.depth_mask;G=d.frontFace;M=l.frontFace;da=d.lineWidth;X=l.lineWidth;ja=d.stencil_mask;oa=l.stencil_mask;a=
k.next;a!==k.cur&&(a?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null),k.cur=a);c!==l.blend_enable&&(c?f.enable(3042):f.disable(3042),l.blend_enable=c);b!==l.cull_enable&&(b?f.enable(2884):f.disable(2884),l.cull_enable=b);e!==l.depth_enable&&(e?f.enable(2929):f.disable(2929),l.depth_enable=e);x!==l.dither&&(x?f.enable(3024):f.disable(3024),l.dither=x);na!==l.polygonOffset_enable&&(na?f.enable(32823):f.disable(32823),l.polygonOffset_enable=na);U!==l.sample_alpha&&(U?f.enable(32926):
f.disable(32926),l.sample_alpha=U);aa!==l.sample_enable&&(aa?f.enable(32928):f.disable(32928),l.sample_enable=aa);T!==l.scissor_enable&&(T?f.enable(3089):f.disable(3089),l.scissor_enable=T);R!==l.stencil_enable&&(R?f.enable(2960):f.disable(2960),l.stencil_enable=R);if(g[0]!==w[0]||g[1]!==w[1]||g[2]!==w[2]||g[3]!==w[3])f.blendColor(g[0],g[1],g[2],g[3]),w[0]=g[0],w[1]=g[1],w[2]=g[2],w[3]=g[3];if(u[0]!==pa[0]||u[1]!==pa[1])f.blendEquationSeparate(u[0],u[1]),pa[0]=u[0],pa[1]=u[1];if(h[0]!==A[0]||h[1]!==
A[1]||h[2]!==A[2]||h[3]!==A[3])f.blendFuncSeparate(h[0],h[1],h[2],h[3]),A[0]=h[0],A[1]=h[1],A[2]=h[2],A[3]=h[3];if(n[0]!==q[0]||n[1]!==q[1]||n[2]!==q[2]||n[3]!==q[3])f.colorMask(n[0],n[1],n[2],n[3]),q[0]=n[0],q[1]=n[1],q[2]=n[2],q[3]=n[3];N!==F&&(f.cullFace(N),l.cull_face=N);O!==P&&(f.depthFunc(O),l.depth_func=O);qa!==ta&&(f.depthMask(qa),l.depth_mask=qa);if(m[0]!==E[0]||m[1]!==E[1])f.depthRange(m[0],m[1]),E[0]=m[0],E[1]=m[1];G!==M&&(f.frontFace(G),l.frontFace=G);da!==X&&(f.lineWidth(da),l.lineWidth=
da);if(J[0]!==H[0]||J[1]!==H[1])f.polygonOffset(J[0],J[1]),H[0]=J[0],H[1]=J[1];if(z[0]!==y[0]||z[1]!==y[1])f.sampleCoverage(z[0],z[1]),y[0]=z[0],y[1]=z[1];if(v[0]!==S[0]||v[1]!==S[1]||v[2]!==S[2]||v[3]!==S[3])f.scissor(v[0],v[1],v[2],v[3]),S[0]=v[0],S[1]=v[1],S[2]=v[2],S[3]=v[3];if(L[0]!==Q[0]||L[1]!==Q[1]||L[2]!==Q[2])f.stencilFunc(L[0],L[1],L[2]),Q[0]=L[0],Q[1]=L[1],Q[2]=L[2];ja!==oa&&(f.stencilMask(ja),l.stencil_mask=ja);if(C[0]!==B[0]||C[1]!==B[1]||C[2]!==B[2]||C[3]!==B[3])f.stencilOpSeparate(C[0],
C[1],C[2],C[3]),B[0]=C[0],B[1]=C[1],B[2]=C[2],B[3]=C[3];if(ra[0]!==I[0]||ra[1]!==I[1]||ra[2]!==I[2]||ra[3]!==I[3])f.stencilOpSeparate(ra[0],ra[1],ra[2],ra[3]),I[0]=ra[0],I[1]=ra[1],I[2]=ra[2],I[3]=ra[3];if(K[0]!==t[0]||K[1]!==t[1]||K[2]!==t[2]||K[3]!==t[3])f.viewport(K[0],K[1],K[2],K[3]),t[0]=K[0],t[1]=K[1],t[2]=K[2],t[3]=K[3]},refresh:function(){var a,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta;l.dirty=!1;c=d.blend_enable;D=d.cull_enable;r=d.depth_enable;la=d.dither;na=d.polygonOffset_enable;U=d.sample_alpha;
aa=d.sample_enable;T=d.scissor_enable;R=d.stencil_enable;N=d.cull_face;F=d.depth_func;O=d.depth_mask;P=d.frontFace;qa=d.lineWidth;ta=d.stencil_mask;(a=k.next)?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);k.cur=a;a=x[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(0,a.divisor);
a=x[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(1,a.divisor);a=x[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=
null);b.vertexAttribDivisorANGLE(2,a.divisor);a=x[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(3,a.divisor);a=x[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(4),
f.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(4,a.divisor);a=x[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(5,a.divisor);a=x[6];a.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,
a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(6,a.divisor);a=x[7];a.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(7,a.divisor);a=x[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(8,
a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(8,a.divisor);a=x[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(9,a.divisor);a=x[10];a.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,
a.buffer.buffer),f.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(10,a.divisor);a=x[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(11,a.divisor);a=x[12];
a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(12,a.divisor);a=x[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=
null);b.vertexAttribDivisorANGLE(13,a.divisor);a=x[14];a.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(14,a.divisor);a=x[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(15),
f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(15,a.divisor);e.currentVAO=null;e.setVAO(e.targetVAO);c?f.enable(3042):f.disable(3042);l.blend_enable=c;D?f.enable(2884):f.disable(2884);l.cull_enable=D;r?f.enable(2929):f.disable(2929);l.depth_enable=r;la?f.enable(3024):f.disable(3024);l.dither=la;na?f.enable(32823):f.disable(32823);l.polygonOffset_enable=na;U?f.enable(32926):f.disable(32926);l.sample_alpha=U;aa?f.enable(32928):f.disable(32928);l.sample_enable=aa;T?f.enable(3089):
f.disable(3089);l.scissor_enable=T;R?f.enable(2960):f.disable(2960);l.stencil_enable=R;f.blendColor(g[0],g[1],g[2],g[3]);w[0]=g[0];w[1]=g[1];w[2]=g[2];w[3]=g[3];f.blendEquationSeparate(u[0],u[1]);pa[0]=u[0];pa[1]=u[1];f.blendFuncSeparate(h[0],h[1],h[2],h[3]);A[0]=h[0];A[1]=h[1];A[2]=h[2];A[3]=h[3];f.colorMask(n[0],n[1],n[2],n[3]);q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];f.cullFace(N);l.cull_face=N;f.depthFunc(F);l.depth_func=F;f.depthMask(O);l.depth_mask=O;f.depthRange(m[0],m[1]);E[0]=m[0];E[1]=m[1];
f.frontFace(P);l.frontFace=P;f.lineWidth(qa);l.lineWidth=qa;f.polygonOffset(J[0],J[1]);H[0]=J[0];H[1]=J[1];f.sampleCoverage(z[0],z[1]);y[0]=z[0];y[1]=z[1];f.scissor(v[0],v[1],v[2],v[3]);S[0]=v[0];S[1]=v[1];S[2]=v[2];S[3]=v[3];f.stencilFunc(L[0],L[1],L[2]);Q[0]=L[0];Q[1]=L[1];Q[2]=L[2];f.stencilMask(ta);l.stencil_mask=ta;f.stencilOpSeparate(C[0],C[1],C[2],C[3]);B[0]=C[0];B[1]=C[1];B[2]=C[2];B[3]=C[3];f.stencilOpSeparate(ra[0],ra[1],ra[2],ra[3]);I[0]=ra[0];I[1]=ra[1];I[2]=ra[2];I[3]=ra[3];f.viewport(K[0],
K[1],K[2],K[3]);t[0]=K[0];t[1]=K[1];t[2]=K[2];t[3]=K[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,b,x,l,k,f,d,e,g,w,u,pa,h,A,n,q,m,E,J,H,z,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta){var G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa,ha,Y,va,Ka,Ga,eb,ba,Gc,cc,Ha,dc,Tb;G=a.attributes;M=a.buffer;da=a.context;X=a.current;ja=
a.draw;oa=a.elements;Da=a.extensions;ya=a.framebuffer;Z=a.gl;Ca=a.isBufferArgs;ia=a.next;ka=a.shader;Ba=a.uniforms;Qa=a.vao;Aa=ia.blend_color;Hb=X.blend_color;$a=ia.blend_equation;V=X.blend_equation;ca=ia.blend_func;sa=X.blend_func;wa=ia.colorMask;Ea=X.colorMask;mb=ia.depth_range;Gb=X.depth_range;fa=ia.polygonOffset_offset;W=X.polygonOffset_offset;xa=ia.sample_coverage;Ia=X.sample_coverage;ma=ia.scissor_box;za=X.scissor_box;Fa=ia.stencil_func;ha=X.stencil_func;Y=ia.stencil_opBack;va=X.stencil_opBack;
Ka=ia.stencil_opFront;Ga=X.stencil_opFront;eb=ia.viewport;ba=X.viewport;Gc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};cc={};cc.buffer=x;cc.divisor=1;Ha={};Ha.buffer=l;Ha.divisor=1;dc={};dc.buffer=k;dc.divisor=1;Tb={};Tb.buffer=f;Tb.divisor=1;return{batch:function(a,f){var e,l,x,k,d,g;e=ya.next;e!==ya.cur&&(e?Z.bindFramebuffer(36160,e.framebuffer):Z.bindFramebuffer(36160,null),ya.cur=e);if(X.dirty){var v,y,u,ca,w,Aa,m,C,n,J,ma,Q,ga,L,E,H,q,z,ua,ea,
S,$a,Ba,ka,eb,vc,Ab,yc,Cb,Lc,oc,Ic,$c;v=ia.dither;v!==X.dither&&(v?Z.enable(3024):Z.disable(3024),X.dither=v);y=ia.depth_func;y!==X.depth_func&&(Z.depthFunc(y),X.depth_func=y);u=mb[0];ca=mb[1];if(u!==Gb[0]||ca!==Gb[1])Z.depthRange(u,ca),Gb[0]=u,Gb[1]=ca;w=ia.depth_mask;w!==X.depth_mask&&(Z.depthMask(w),X.depth_mask=w);Aa=wa[0];m=wa[1];C=wa[2];n=wa[3];if(Aa!==Ea[0]||m!==Ea[1]||C!==Ea[2]||n!==Ea[3])Z.colorMask(Aa,m,C,n),Ea[0]=Aa,Ea[1]=m,Ea[2]=C,Ea[3]=n;J=ia.cull_enable;J!==X.cull_enable&&(J?Z.enable(2884):
Z.disable(2884),X.cull_enable=J);ma=ia.cull_face;ma!==X.cull_face&&(Z.cullFace(ma),X.cull_face=ma);Q=ia.frontFace;Q!==X.frontFace&&(Z.frontFace(Q),X.frontFace=Q);ga=ia.lineWidth;ga!==X.lineWidth&&(Z.lineWidth(ga),X.lineWidth=ga);L=ia.polygonOffset_enable;L!==X.polygonOffset_enable&&(L?Z.enable(32823):Z.disable(32823),X.polygonOffset_enable=L);E=fa[0];H=fa[1];if(E!==W[0]||H!==W[1])Z.polygonOffset(E,H),W[0]=E,W[1]=H;q=ia.sample_alpha;q!==X.sample_alpha&&(q?Z.enable(32926):Z.disable(32926),X.sample_alpha=
q);z=ia.sample_enable;z!==X.sample_enable&&(z?Z.enable(32928):Z.disable(32928),X.sample_enable=z);ua=xa[0];ea=xa[1];if(ua!==Ia[0]||ea!==Ia[1])Z.sampleCoverage(ua,ea),Ia[0]=ua,Ia[1]=ea;S=ia.stencil_enable;S!==X.stencil_enable&&(S?Z.enable(2960):Z.disable(2960),X.stencil_enable=S);$a=ia.stencil_mask;$a!==X.stencil_mask&&(Z.stencilMask($a),X.stencil_mask=$a);Ba=Fa[0];ka=Fa[1];eb=Fa[2];if(Ba!==ha[0]||ka!==ha[1]||eb!==ha[2])Z.stencilFunc(Ba,ka,eb),ha[0]=Ba,ha[1]=ka,ha[2]=eb;vc=Ka[0];Ab=Ka[1];yc=Ka[2];
Cb=Ka[3];if(vc!==Ga[0]||Ab!==Ga[1]||yc!==Ga[2]||Cb!==Ga[3])Z.stencilOpSeparate(vc,Ab,yc,Cb),Ga[0]=vc,Ga[1]=Ab,Ga[2]=yc,Ga[3]=Cb;Lc=Y[0];oc=Y[1];Ic=Y[2];$c=Y[3];if(Lc!==va[0]||oc!==va[1]||Ic!==va[2]||$c!==va[3])Z.stencilOpSeparate(Lc,oc,Ic,$c),va[0]=Lc,va[1]=oc,va[2]=Ic,va[3]=$c}Z.blendColor(0,0,0,0);Hb[0]=0;Hb[1]=0;Hb[2]=0;Hb[3]=0;Z.enable(3042);X.blend_enable=!0;Z.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;Z.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;Z.disable(2929);
X.depth_enable=!1;Z.enable(3089);X.scissor_enable=!0;if(l=X.profile)x=performance.now(),b.count+=f;Z.useProgram(B.program);k=Da.angle_instanced_arrays;var Zc,Ec,hc,Jc,qc,rc,fc,pb;Qa.setVAO(null);Zc=la.location;Ec=G[Zc];Ec.buffer||Z.enableVertexAttribArray(Zc);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==pa||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)Z.bindBuffer(34962,pa.buffer),Z.vertexAttribPointer(Zc,2,5126,!1,24,0),Ec.type=5126,Ec.size=2,Ec.buffer=pa,Ec.normalized=!1,Ec.offset=0,Ec.stride=
24;0!==Ec.divisor&&(k.vertexAttribDivisorANGLE(Zc,0),Ec.divisor=0);hc=U.location;Jc=G[hc];Jc.buffer||Z.enableVertexAttribArray(hc);if(5126!==Jc.type||2!==Jc.size||Jc.buffer!==h||!1!==Jc.normalized||8!==Jc.offset||24!==Jc.stride)Z.bindBuffer(34962,h.buffer),Z.vertexAttribPointer(hc,2,5126,!1,24,8),Jc.type=5126,Jc.size=2,Jc.buffer=h,Jc.normalized=!1,Jc.offset=8,Jc.stride=24;0!==Jc.divisor&&(k.vertexAttribDivisorANGLE(hc,0),Jc.divisor=0);qc=c.location;rc=G[qc];rc.buffer||Z.enableVertexAttribArray(qc);
if(5126!==rc.type||2!==rc.size||rc.buffer!==A||!1!==rc.normalized||16!==rc.offset||24!==rc.stride)Z.bindBuffer(34962,A.buffer),Z.vertexAttribPointer(qc,2,5126,!1,24,16),rc.type=5126,rc.size=2,rc.buffer=A,rc.normalized=!1,rc.offset=16,rc.stride=24;0!==rc.divisor&&(k.vertexAttribDivisorANGLE(qc,0),rc.divisor=0);(fc=ja.elements)?Z.bindBuffer(34963,fc.buffer.buffer):Qa.currentVAO&&(fc=oa.getElements(Qa.currentVAO.elements))&&Z.bindBuffer(34963,fc.buffer.buffer);pb=ja.offset;for(d=0;d<f;++d){g=a[d];var fb,
Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc;fb=g.viewport;Pc=fb.x|0;$b=fb.y|0;hb="width"in fb?fb.width|0:da.framebufferWidth-Pc;Ob="height"in fb?fb.height|0:da.framebufferHeight-$b;bb=da.viewportWidth;
da.viewportWidth=hb;qb=da.viewportHeight;da.viewportHeight=Ob;Z.viewport(Pc,$b,hb,Ob);ba[0]=Pc;ba[1]=$b;ba[2]=hb;ba[3]=Ob;Va=g.viewport;Kc=Va.x|0;Ib=Va.y|0;Kb="width"in Va?Va.width|0:da.framebufferWidth-Kc;sc="height"in Va?Va.height|0:da.framebufferHeight-Ib;Z.scissor(Kc,Ib,Kb,sc);za[0]=Kc;za[1]=Ib;za[2]=Kb;za[3]=sc;Pb=ra.call(this,da,g,d);dc.offset=Pb;kb=!1;Fb=null;Db=0;zb=!1;ac=ib=0;Qb=1;sb=0;Sa=5126;jb=lc=tb=Vb=0;Ca(dc)?(kb=!0,Fb=M.createStream(34962,dc),Sa=Fb.dtype):(Fb=M.getBuffer(dc))?Sa=Fb.dtype:
"constant"in dc?(Qb=2,"number"===typeof dc.constant?(tb=dc.constant,lc=jb=Vb=0):(tb=0<dc.constant.length?dc.constant[0]:0,lc=1<dc.constant.length?dc.constant[1]:0,jb=2<dc.constant.length?dc.constant[2]:0,Vb=3<dc.constant.length?dc.constant[3]:0)):(Fb=Ca(dc.buffer)?M.createStream(34962,dc.buffer):M.getBuffer(dc.buffer),Sa="type"in dc?Gc[dc.type]:Fb.dtype,zb=!!dc.normalized,ac=dc.size|0,ib=dc.offset|0,sb=dc.stride|0,Db=dc.divisor|0);rb=R.location;Ja=G[rb];if(1===Qb){Ja.buffer||Z.enableVertexAttribArray(rb);
ub=ac||2;if(Ja.type!==Sa||Ja.size!==ub||Ja.buffer!==Fb||Ja.normalized!==zb||Ja.offset!==ib||Ja.stride!==sb)Z.bindBuffer(34962,Fb.buffer),Z.vertexAttribPointer(rb,ub,Sa,zb,sb,ib),Ja.type=Sa,Ja.size=ub,Ja.buffer=Fb,Ja.normalized=zb,Ja.offset=ib,Ja.stride=sb;Ja.divisor!==Db&&(k.vertexAttribDivisorANGLE(rb,Db),Ja.divisor=Db)}else if(Ja.buffer&&(Z.disableVertexAttribArray(rb),Ja.buffer=null),Ja.x!==tb||Ja.y!==lc||Ja.z!==jb||Ja.w!==Vb)Z.vertexAttrib4f(rb,tb,lc,jb,Vb),Ja.x=tb,Ja.y=lc,Ja.z=jb,Ja.w=Vb;La=
I.call(this,da,g,d);Tb.offset=La;db=!1;gb=null;Na=0;lb=!1;wb=Wa=0;vb=1;Pa=0;Dc=5126;Ma=Eb=Lb=Ua=0;Ca(Tb)?(db=!0,gb=M.createStream(34962,Tb),Dc=gb.dtype):(gb=M.getBuffer(Tb))?Dc=gb.dtype:"constant"in Tb?(vb=2,"number"===typeof Tb.constant?(Lb=Tb.constant,Eb=Ma=Ua=0):(Lb=0<Tb.constant.length?Tb.constant[0]:0,Eb=1<Tb.constant.length?Tb.constant[1]:0,Ma=2<Tb.constant.length?Tb.constant[2]:0,Ua=3<Tb.constant.length?Tb.constant[3]:0)):(gb=Ca(Tb.buffer)?M.createStream(34962,Tb.buffer):M.getBuffer(Tb.buffer),
Dc="type"in Tb?Gc[Tb.type]:gb.dtype,lb=!!Tb.normalized,wb=Tb.size|0,Wa=Tb.offset|0,Pa=Tb.stride|0,Na=Tb.divisor|0);yd=N.location;Ya=G[yd];if(1===vb){Ya.buffer||Z.enableVertexAttribArray(yd);Mb=wb||2;if(Ya.type!==Dc||Ya.size!==Mb||Ya.buffer!==gb||Ya.normalized!==lb||Ya.offset!==Wa||Ya.stride!==Pa)Z.bindBuffer(34962,gb.buffer),Z.vertexAttribPointer(yd,Mb,Dc,lb,Pa,Wa),Ya.type=Dc,Ya.size=Mb,Ya.buffer=gb,Ya.normalized=lb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==Na&&(k.vertexAttribDivisorANGLE(yd,Na),Ya.divisor=
Na)}else if(Ya.buffer&&(Z.disableVertexAttribArray(yd),Ya.buffer=null),Ya.x!==Lb||Ya.y!==Eb||Ya.z!==Ma||Ya.w!==Ua)Z.vertexAttrib4f(yd,Lb,Eb,Ma,Ua),Ya.x=Lb,Ya.y=Eb,Ya.z=Ma,Ya.w=Ua;Nb=K.call(this,da,g,d);Ha.offset=Nb;nb=!1;Oa=null;bc=0;Ra=!1;yb=xb=0;Ta=1;ob=0;ic=5126;mc=cb=wc=Bc=0;Ca(Ha)?(nb=!0,Oa=M.createStream(34962,Ha),ic=Oa.dtype):(Oa=M.getBuffer(Ha))?ic=Oa.dtype:"constant"in Ha?(Ta=2,"number"===typeof Ha.constant?(wc=Ha.constant,cb=mc=Bc=0):(wc=0<Ha.constant.length?Ha.constant[0]:0,cb=1<Ha.constant.length?
Ha.constant[1]:0,mc=2<Ha.constant.length?Ha.constant[2]:0,Bc=3<Ha.constant.length?Ha.constant[3]:0)):(Oa=Ca(Ha.buffer)?M.createStream(34962,Ha.buffer):M.getBuffer(Ha.buffer),ic="type"in Ha?Gc[Ha.type]:Oa.dtype,Ra=!!Ha.normalized,yb=Ha.size|0,xb=Ha.offset|0,ob=Ha.stride|0,bc=Ha.divisor|0);Mc=na.location;Xa=G[Mc];if(1===Ta){Xa.buffer||Z.enableVertexAttribArray(Mc);Qc=yb||4;if(Xa.type!==ic||Xa.size!==Qc||Xa.buffer!==Oa||Xa.normalized!==Ra||Xa.offset!==xb||Xa.stride!==ob)Z.bindBuffer(34962,Oa.buffer),
Z.vertexAttribPointer(Mc,Qc,ic,Ra,ob,xb),Xa.type=ic,Xa.size=Qc,Xa.buffer=Oa,Xa.normalized=Ra,Xa.offset=xb,Xa.stride=ob;Xa.divisor!==bc&&(k.vertexAttribDivisorANGLE(Mc,bc),Xa.divisor=bc)}else if(Xa.buffer&&(Z.disableVertexAttribArray(Mc),Xa.buffer=null),Xa.x!==wc||Xa.y!==cb||Xa.z!==mc||Xa.w!==Bc)Z.vertexAttrib4f(Mc,wc,cb,mc,Bc),Xa.x=wc,Xa.y=cb,Xa.z=mc,Xa.w=Bc;Bb=t.call(this,da,g,d);cc.offset=Bb;Za=!1;Xb=null;uc=0;Yb=!1;Nc=Rb=0;Sb=1;Ld=0;Fc=5126;vd=ad=Rc=ud=0;Ca(cc)?(Za=!0,Xb=M.createStream(34962,cc),
Fc=Xb.dtype):(Xb=M.getBuffer(cc))?Fc=Xb.dtype:"constant"in cc?(Sb=2,"number"===typeof cc.constant?(Rc=cc.constant,ad=vd=ud=0):(Rc=0<cc.constant.length?cc.constant[0]:0,ad=1<cc.constant.length?cc.constant[1]:0,vd=2<cc.constant.length?cc.constant[2]:0,ud=3<cc.constant.length?cc.constant[3]:0)):(Xb=Ca(cc.buffer)?M.createStream(34962,cc.buffer):M.getBuffer(cc.buffer),Fc="type"in cc?Gc[cc.type]:Xb.dtype,Yb=!!cc.normalized,Nc=cc.size|0,Rb=cc.offset|0,Ld=cc.stride|0,uc=cc.divisor|0);pc=r.location;xc=G[pc];
if(1===Sb){xc.buffer||Z.enableVertexAttribArray(pc);jc=Nc||4;if(xc.type!==Fc||xc.size!==jc||xc.buffer!==Xb||xc.normalized!==Yb||xc.offset!==Rb||xc.stride!==Ld)Z.bindBuffer(34962,Xb.buffer),Z.vertexAttribPointer(pc,jc,Fc,Yb,Ld,Rb),xc.type=Fc,xc.size=jc,xc.buffer=Xb,xc.normalized=Yb,xc.offset=Rb,xc.stride=Ld;xc.divisor!==uc&&(k.vertexAttribDivisorANGLE(pc,uc),xc.divisor=uc)}else if(xc.buffer&&(Z.disableVertexAttribArray(pc),xc.buffer=null),xc.x!==Rc||xc.y!==ad||xc.z!==vd||xc.w!==ud)Z.vertexAttrib4f(pc,
Rc,ad,vd,ud),xc.x=Rc,xc.y=ad,xc.z=vd,xc.w=ud;ab=p.call(this,da,g,d);tc=ab[0];Zb=ab[1];kc=ab[2];Cc=ab[3];d&&Ub===tc&&gc===Zb&&zc===kc&&fd===Cc||(Ub=tc,gc=Zb,zc=kc,fd=Cc,Z.uniform4f(ta.location,tc,Zb,kc,Cc));Uc=g.lineWidth;d&&Vc===Uc||(Vc=Uc,Z.uniform1f(aa.location,Uc));Wc=g.capSize;d&&bd===Wc||(bd=Wc,Z.uniform1f(D.location,Wc));od=g.scale;gd=od[0];nc=od[1];d&&cd===gd&&ec===nc||(cd=gd,ec=nc,Z.uniform2f(F.location,gd,nc));dd=g.scaleFract;Yc=dd[0];Ac=dd[1];d&&hd===Yc&&kd===Ac||(hd=Yc,kd=Ac,Z.uniform2f(O.location,
Yc,Ac));Ad=g.translate;ze=Ad[0];ld=Ad[1];d&&me===ze&&Ee===ld||(me=ze,Ee=ld,Z.uniform2f(P.location,ze,ld));Qd=g.translateFract;fe=Qd[0];Rd=Qd[1];d&&Zd===fe&&Kd===Rd||(Zd=fe,Kd=Rd,Z.uniform2f(qa.location,fe,Rd));Hd=g.opacity;d&&qd===Hd||(qd=Hd,Z.uniform1f(T.location,Hd));Xc=g.count;0<Xc?fc?k.drawElementsInstancedANGLE(4,36,fc.type,pb<<(fc.type-5121>>1),Xc):k.drawArraysInstancedANGLE(4,pb,36,Xc):0>Xc&&(fc?Z.drawElements(4,36,fc.type,pb<<(fc.type-5121>>1)):Z.drawArrays(4,pb,36));da.viewportWidth=bb;da.viewportHeight=
qb;kb&&M.destroyStream(Fb);db&&M.destroyStream(gb);nb&&M.destroyStream(Oa);Za&&M.destroyStream(Xb)}X.dirty=!0;Qa.setVAO(null);l&&(b.cpuTime+=performance.now()-x)},draw:function(a){var f,p,l,x,k,t,v,y,ca,Aa,m,C,B,I,J,ma,Q,L,E,K,H,q,z,ua,ea,S,$a,Ba,ka,ra,eb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc;f=ya.next;f!==ya.cur&&(f?Z.bindFramebuffer(36160,
f.framebuffer):Z.bindFramebuffer(36160,null),ya.cur=f);if(X.dirty){var Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub;Ra=ia.dither;Ra!==X.dither&&(Ra?Z.enable(3024):Z.disable(3024),X.dither=Ra);xb=ia.depth_func;xb!==X.depth_func&&(Z.depthFunc(xb),X.depth_func=xb);yb=mb[0];Ta=mb[1];if(yb!==Gb[0]||Ta!==Gb[1])Z.depthRange(yb,Ta),Gb[0]=yb,Gb[1]=Ta;ob=ia.depth_mask;ob!==X.depth_mask&&(Z.depthMask(ob),X.depth_mask=ob);ic=wa[0];Bc=wa[1];wc=wa[2];cb=wa[3];
if(ic!==Ea[0]||Bc!==Ea[1]||wc!==Ea[2]||cb!==Ea[3])Z.colorMask(ic,Bc,wc,cb),Ea[0]=ic,Ea[1]=Bc,Ea[2]=wc,Ea[3]=cb;mc=ia.cull_enable;mc!==X.cull_enable&&(mc?Z.enable(2884):Z.disable(2884),X.cull_enable=mc);Mc=ia.cull_face;Mc!==X.cull_face&&(Z.cullFace(Mc),X.cull_face=Mc);Xa=ia.frontFace;Xa!==X.frontFace&&(Z.frontFace(Xa),X.frontFace=Xa);Qc=ia.lineWidth;Qc!==X.lineWidth&&(Z.lineWidth(Qc),X.lineWidth=Qc);Bb=ia.polygonOffset_enable;Bb!==X.polygonOffset_enable&&(Bb?Z.enable(32823):Z.disable(32823),X.polygonOffset_enable=
Bb);Za=fa[0];Xb=fa[1];if(Za!==W[0]||Xb!==W[1])Z.polygonOffset(Za,Xb),W[0]=Za,W[1]=Xb;uc=ia.sample_alpha;uc!==X.sample_alpha&&(uc?Z.enable(32926):Z.disable(32926),X.sample_alpha=uc);Yb=ia.sample_enable;Yb!==X.sample_enable&&(Yb?Z.enable(32928):Z.disable(32928),X.sample_enable=Yb);Rb=xa[0];Nc=xa[1];if(Rb!==Ia[0]||Nc!==Ia[1])Z.sampleCoverage(Rb,Nc),Ia[0]=Rb,Ia[1]=Nc;Sb=ia.stencil_enable;Sb!==X.stencil_enable&&(Sb?Z.enable(2960):Z.disable(2960),X.stencil_enable=Sb);Ld=ia.stencil_mask;Ld!==X.stencil_mask&&
(Z.stencilMask(Ld),X.stencil_mask=Ld);Fc=Fa[0];ud=Fa[1];Rc=Fa[2];if(Fc!==ha[0]||ud!==ha[1]||Rc!==ha[2])Z.stencilFunc(Fc,ud,Rc),ha[0]=Fc,ha[1]=ud,ha[2]=Rc;ad=Ka[0];vd=Ka[1];pc=Ka[2];xc=Ka[3];if(ad!==Ga[0]||vd!==Ga[1]||pc!==Ga[2]||xc!==Ga[3])Z.stencilOpSeparate(ad,vd,pc,xc),Ga[0]=ad,Ga[1]=vd,Ga[2]=pc,Ga[3]=xc;jc=Y[0];ab=Y[1];tc=Y[2];Ub=Y[3];if(jc!==va[0]||ab!==va[1]||tc!==va[2]||Ub!==va[3])Z.stencilOpSeparate(jc,ab,tc,Ub),va[0]=jc,va[1]=ab,va[2]=tc,va[3]=Ub}p=a.viewport;l=p.x|0;x=p.y|0;k="width"in p?
p.width|0:da.framebufferWidth-l;t="height"in p?p.height|0:da.framebufferHeight-x;v=da.viewportWidth;da.viewportWidth=k;y=da.viewportHeight;da.viewportHeight=t;Z.viewport(l,x,k,t);ba[0]=l;ba[1]=x;ba[2]=k;ba[3]=t;Z.blendColor(0,0,0,0);Hb[0]=0;Hb[1]=0;Hb[2]=0;Hb[3]=0;Z.enable(3042);X.blend_enable=!0;Z.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;Z.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;Z.disable(2929);X.depth_enable=!1;ca=a.viewport;Aa=ca.x|0;m=ca.y|0;C="width"in
ca?ca.width|0:da.framebufferWidth-Aa;B="height"in ca?ca.height|0:da.framebufferHeight-m;Z.scissor(Aa,m,C,B);za[0]=Aa;za[1]=m;za[2]=C;za[3]=B;Z.enable(3089);X.scissor_enable=!0;if(I=X.profile)J=performance.now(),b.count++;Z.useProgram(d.program);ma=Da.angle_instanced_arrays;Qa.setVAO(null);Q=e.call(this,da,a,0);dc.offset=Q;L=!1;E=null;K=0;H=!1;z=q=0;ua=1;ea=0;S=5126;ra=ka=Ba=$a=0;Ca(dc)?(L=!0,E=M.createStream(34962,dc),S=E.dtype):(E=M.getBuffer(dc))?S=E.dtype:"constant"in dc?(ua=2,"number"===typeof dc.constant?
(Ba=dc.constant,ka=ra=$a=0):(Ba=0<dc.constant.length?dc.constant[0]:0,ka=1<dc.constant.length?dc.constant[1]:0,ra=2<dc.constant.length?dc.constant[2]:0,$a=3<dc.constant.length?dc.constant[3]:0)):(E=Ca(dc.buffer)?M.createStream(34962,dc.buffer):M.getBuffer(dc.buffer),S="type"in dc?Gc[dc.type]:E.dtype,H=!!dc.normalized,z=dc.size|0,q=dc.offset|0,ea=dc.stride|0,K=dc.divisor|0);eb=R.location;Jb=G[eb];if(1===ua){Jb.buffer||Z.enableVertexAttribArray(eb);vc=z||2;if(Jb.type!==S||Jb.size!==vc||Jb.buffer!==
E||Jb.normalized!==H||Jb.offset!==q||Jb.stride!==ea)Z.bindBuffer(34962,E.buffer),Z.vertexAttribPointer(eb,vc,S,H,ea,q),Jb.type=S,Jb.size=vc,Jb.buffer=E,Jb.normalized=H,Jb.offset=q,Jb.stride=ea;Jb.divisor!==K&&(ma.vertexAttribDivisorANGLE(eb,K),Jb.divisor=K)}else if(Jb.buffer&&(Z.disableVertexAttribArray(eb),Jb.buffer=null),Jb.x!==Ba||Jb.y!==ka||Jb.z!==ra||Jb.w!==$a)Z.vertexAttrib4f(eb,Ba,ka,ra,$a),Jb.x=Ba,Jb.y=ka,Jb.z=ra,Jb.w=$a;Ab=g.call(this,da,a,0);Tb.offset=Ab;yc=!1;Cb=null;Lc=0;oc=!1;$c=Ic=0;
Zc=1;Ec=0;hc=5126;fc=rc=qc=Jc=0;Ca(Tb)?(yc=!0,Cb=M.createStream(34962,Tb),hc=Cb.dtype):(Cb=M.getBuffer(Tb))?hc=Cb.dtype:"constant"in Tb?(Zc=2,"number"===typeof Tb.constant?(qc=Tb.constant,rc=fc=Jc=0):(qc=0<Tb.constant.length?Tb.constant[0]:0,rc=1<Tb.constant.length?Tb.constant[1]:0,fc=2<Tb.constant.length?Tb.constant[2]:0,Jc=3<Tb.constant.length?Tb.constant[3]:0)):(Cb=Ca(Tb.buffer)?M.createStream(34962,Tb.buffer):M.getBuffer(Tb.buffer),hc="type"in Tb?Gc[Tb.type]:Cb.dtype,oc=!!Tb.normalized,$c=Tb.size|
0,Ic=Tb.offset|0,Ec=Tb.stride|0,Lc=Tb.divisor|0);pb=N.location;fb=G[pb];if(1===Zc){fb.buffer||Z.enableVertexAttribArray(pb);Pc=$c||2;if(fb.type!==hc||fb.size!==Pc||fb.buffer!==Cb||fb.normalized!==oc||fb.offset!==Ic||fb.stride!==Ec)Z.bindBuffer(34962,Cb.buffer),Z.vertexAttribPointer(pb,Pc,hc,oc,Ec,Ic),fb.type=hc,fb.size=Pc,fb.buffer=Cb,fb.normalized=oc,fb.offset=Ic,fb.stride=Ec;fb.divisor!==Lc&&(ma.vertexAttribDivisorANGLE(pb,Lc),fb.divisor=Lc)}else if(fb.buffer&&(Z.disableVertexAttribArray(pb),fb.buffer=
null),fb.x!==qc||fb.y!==rc||fb.z!==fc||fb.w!==Jc)Z.vertexAttrib4f(pb,qc,rc,fc,Jc),fb.x=qc,fb.y=rc,fb.z=fc,fb.w=Jc;$b=w.call(this,da,a,0);Ha.offset=$b;hb=!1;Ob=null;bb=0;qb=!1;Kc=Va=0;Ib=1;Kb=0;sc=5126;Db=Fb=kb=Pb=0;Ca(Ha)?(hb=!0,Ob=M.createStream(34962,Ha),sc=Ob.dtype):(Ob=M.getBuffer(Ha))?sc=Ob.dtype:"constant"in Ha?(Ib=2,"number"===typeof Ha.constant?(kb=Ha.constant,Fb=Db=Pb=0):(kb=0<Ha.constant.length?Ha.constant[0]:0,Fb=1<Ha.constant.length?Ha.constant[1]:0,Db=2<Ha.constant.length?Ha.constant[2]:
0,Pb=3<Ha.constant.length?Ha.constant[3]:0)):(Ob=Ca(Ha.buffer)?M.createStream(34962,Ha.buffer):M.getBuffer(Ha.buffer),sc="type"in Ha?Gc[Ha.type]:Ob.dtype,qb=!!Ha.normalized,Kc=Ha.size|0,Va=Ha.offset|0,Kb=Ha.stride|0,bb=Ha.divisor|0);zb=na.location;ib=G[zb];if(1===Ib){ib.buffer||Z.enableVertexAttribArray(zb);ac=Kc||4;if(ib.type!==sc||ib.size!==ac||ib.buffer!==Ob||ib.normalized!==qb||ib.offset!==Va||ib.stride!==Kb)Z.bindBuffer(34962,Ob.buffer),Z.vertexAttribPointer(zb,ac,sc,qb,Kb,Va),ib.type=sc,ib.size=
ac,ib.buffer=Ob,ib.normalized=qb,ib.offset=Va,ib.stride=Kb;ib.divisor!==bb&&(ma.vertexAttribDivisorANGLE(zb,bb),ib.divisor=bb)}else if(ib.buffer&&(Z.disableVertexAttribArray(zb),ib.buffer=null),ib.x!==kb||ib.y!==Fb||ib.z!==Db||ib.w!==Pb)Z.vertexAttrib4f(zb,kb,Fb,Db,Pb),ib.x=kb,ib.y=Fb,ib.z=Db,ib.w=Pb;Qb=u.call(this,da,a,0);cc.offset=Qb;sb=!1;Sa=null;Vb=0;tb=!1;jb=lc=0;rb=1;Ja=0;ub=5126;Na=gb=db=La=0;Ca(cc)?(sb=!0,Sa=M.createStream(34962,cc),ub=Sa.dtype):(Sa=M.getBuffer(cc))?ub=Sa.dtype:"constant"in
cc?(rb=2,"number"===typeof cc.constant?(db=cc.constant,gb=Na=La=0):(db=0<cc.constant.length?cc.constant[0]:0,gb=1<cc.constant.length?cc.constant[1]:0,Na=2<cc.constant.length?cc.constant[2]:0,La=3<cc.constant.length?cc.constant[3]:0)):(Sa=Ca(cc.buffer)?M.createStream(34962,cc.buffer):M.getBuffer(cc.buffer),ub="type"in cc?Gc[cc.type]:Sa.dtype,tb=!!cc.normalized,jb=cc.size|0,lc=cc.offset|0,Ja=cc.stride|0,Vb=cc.divisor|0);lb=r.location;Wa=G[lb];if(1===rb){Wa.buffer||Z.enableVertexAttribArray(lb);wb=jb||
4;if(Wa.type!==ub||Wa.size!==wb||Wa.buffer!==Sa||Wa.normalized!==tb||Wa.offset!==lc||Wa.stride!==Ja)Z.bindBuffer(34962,Sa.buffer),Z.vertexAttribPointer(lb,wb,ub,tb,Ja,lc),Wa.type=ub,Wa.size=wb,Wa.buffer=Sa,Wa.normalized=tb,Wa.offset=lc,Wa.stride=Ja;Wa.divisor!==Vb&&(ma.vertexAttribDivisorANGLE(lb,Vb),Wa.divisor=Vb)}else if(Wa.buffer&&(Z.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==db||Wa.y!==gb||Wa.z!==Na||Wa.w!==La)Z.vertexAttrib4f(lb,db,gb,Na,La),Wa.x=db,Wa.y=gb,Wa.z=Na,Wa.w=La;vb=la.location;
Pa=G[vb];Pa.buffer||Z.enableVertexAttribArray(vb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==pa||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)Z.bindBuffer(34962,pa.buffer),Z.vertexAttribPointer(vb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=pa,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(ma.vertexAttribDivisorANGLE(vb,0),Pa.divisor=0);Dc=U.location;Ua=G[Dc];Ua.buffer||Z.enableVertexAttribArray(Dc);if(5126!==Ua.type||2!==Ua.size||Ua.buffer!==h||!1!==Ua.normalized||8!==Ua.offset||
24!==Ua.stride)Z.bindBuffer(34962,h.buffer),Z.vertexAttribPointer(Dc,2,5126,!1,24,8),Ua.type=5126,Ua.size=2,Ua.buffer=h,Ua.normalized=!1,Ua.offset=8,Ua.stride=24;0!==Ua.divisor&&(ma.vertexAttribDivisorANGLE(Dc,0),Ua.divisor=0);Lb=c.location;Eb=G[Lb];Eb.buffer||Z.enableVertexAttribArray(Lb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==A||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)Z.bindBuffer(34962,A.buffer),Z.vertexAttribPointer(Lb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,Eb.buffer=A,Eb.normalized=
!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(ma.vertexAttribDivisorANGLE(Lb,0),Eb.divisor=0);Ma=n.call(this,da,a,0);Z.uniform4f(ta.location,Ma[0],Ma[1],Ma[2],Ma[3]);Z.uniform1f(aa.location,a.lineWidth);Z.uniform1f(D.location,a.capSize);yd=a.scale;Z.uniform2f(F.location,yd[0],yd[1]);Ya=a.scaleFract;Z.uniform2f(O.location,Ya[0],Ya[1]);Mb=a.translate;Z.uniform2f(P.location,Mb[0],Mb[1]);Nb=a.translateFract;Z.uniform2f(qa.location,Nb[0],Nb[1]);Z.uniform1f(T.location,a.opacity);(nb=ja.elements)?Z.bindBuffer(34963,
nb.buffer.buffer):Qa.currentVAO&&(nb=oa.getElements(Qa.currentVAO.elements))&&Z.bindBuffer(34963,nb.buffer.buffer);Oa=ja.offset;bc=a.count;0<bc?nb?ma.drawElementsInstancedANGLE(4,36,nb.type,Oa<<(nb.type-5121>>1),bc):ma.drawArraysInstancedANGLE(4,Oa,36,bc):0>bc&&(nb?Z.drawElements(4,36,nb.type,Oa<<(nb.type-5121>>1)):Z.drawArrays(4,Oa,36));X.dirty=!0;Qa.setVAO(null);da.viewportWidth=v;da.viewportHeight=y;I&&(b.cpuTime+=performance.now()-J);L&&M.destroyStream(E);yc&&M.destroyStream(Cb);hb&&M.destroyStream(Ob);
sb&&M.destroyStream(Sa)},scope:function(a,c,f){var p,e,l,r,x,d,k,t,g,D,F,V,u,G,w,W,sa,n,B,xa,Qa,Ia,R,N,Hb,I,T,Z,fa,ga,K,ha,P,Y,wa,O,za,la,Fa,ba,qa,ya,oa,U,aa,va,Ea,Gb,na,ta,Da,mb,ra,Ga,Ka,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,
qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd;p=a.viewport;e=p.x|0;l=p.y|0;r="width"in p?p.width|0:da.framebufferWidth-e;x="height"in p?p.height|0:da.framebufferHeight-l;d=da.viewportWidth;da.viewportWidth=r;k=da.viewportHeight;da.viewportHeight=x;t=eb[0];eb[0]=e;g=eb[1];eb[1]=l;D=eb[2];eb[2]=r;F=eb[3];eb[3]=x;V=Aa[0];Aa[0]=0;u=Aa[1];Aa[1]=0;G=Aa[2];Aa[2]=0;w=Aa[3];Aa[3]=0;W=ia.blend_enable;ia.blend_enable=!0;sa=$a[0];$a[0]=32774;
n=$a[1];$a[1]=32774;B=ca[0];ca[0]=770;xa=ca[1];ca[1]=771;Qa=ca[2];ca[2]=773;Ia=ca[3];ca[3]=1;R=ia.depth_enable;ia.depth_enable=!1;N=a.viewport;Hb=N.x|0;I=N.y|0;T="width"in N?N.width|0:da.framebufferWidth-Hb;Z="height"in N?N.height|0:da.framebufferHeight-I;fa=ma[0];ma[0]=Hb;ga=ma[1];ma[1]=I;K=ma[2];ma[2]=T;ha=ma[3];ma[3]=Z;P=ia.scissor_enable;ia.scissor_enable=!0;if(Y=X.profile)wa=performance.now(),b.count++;O=ja.count;ja.count=36;za=a.count;la=ja.instances;ja.instances=za;Fa=ja.primitive;ja.primitive=
4;ba=a.capSize;qa=Ba[5];Ba[5]=ba;ya=a.lineWidth;oa=Ba[4];Ba[4]=ya;U=a.opacity;aa=Ba[10];Ba[10]=U;va=a.range;Ea=Ba[18];Ba[18]=va;Gb=a.scale;na=Ba[6];Ba[6]=Gb;ta=a.scaleFract;Da=Ba[7];Ba[7]=ta;mb=a.translate;ra=Ba[8];Ba[8]=mb;Ga=a.translateFract;Ka=Ba[9];Ba[9]=Ga;Ib=q.call(this,da,a,f);Kb=Ba[3];Ba[3]=Ib;sc=m.buffer;m.buffer=A;Pb=m.divisor;m.divisor=0;kb=m.normalized;m.normalized=!1;Fb=m.offset;m.offset=16;Db=m.size;m.size=0;zb=m.state;m.state=1;ib=m.stride;m.stride=24;ac=m.type;m.type=5126;Qb=m.w;m.w=
0;sb=m.x;m.x=0;Sa=m.y;m.y=0;Vb=m.z;m.z=0;tb=E.call(this,da,a,f);cc.offset=tb;lc=!1;jb=null;rb=0;Ja=!1;La=ub=0;db=1;gb=0;Na=5126;vb=wb=Wa=lb=0;Ca(cc)?(lc=!0,jb=M.createStream(34962,cc),Na=jb.dtype):(jb=M.getBuffer(cc))?Na=jb.dtype:"constant"in cc?(db=2,"number"===typeof cc.constant?(Wa=cc.constant,wb=vb=lb=0):(Wa=0<cc.constant.length?cc.constant[0]:0,wb=1<cc.constant.length?cc.constant[1]:0,vb=2<cc.constant.length?cc.constant[2]:0,lb=3<cc.constant.length?cc.constant[3]:0)):(jb=Ca(cc.buffer)?M.createStream(34962,
cc.buffer):M.getBuffer(cc.buffer),Na="type"in cc?Gc[cc.type]:jb.dtype,Ja=!!cc.normalized,La=cc.size|0,ub=cc.offset|0,gb=cc.stride|0,rb=cc.divisor|0);Pa=J.buffer;J.buffer=jb;Dc=J.divisor;J.divisor=rb;Ua=J.normalized;J.normalized=Ja;Lb=J.offset;J.offset=ub;Eb=J.size;J.size=La;Ma=J.state;J.state=db;yd=J.stride;J.stride=gb;Ya=J.type;J.type=Na;Mb=J.w;J.w=lb;Nb=J.x;J.x=Wa;nb=J.y;J.y=wb;Oa=J.z;J.z=vb;bc=H.buffer;H.buffer=pa;Ra=H.divisor;H.divisor=0;xb=H.normalized;H.normalized=!1;yb=H.offset;H.offset=0;
Ta=H.size;H.size=0;ob=H.state;H.state=1;ic=H.stride;H.stride=24;Bc=H.type;H.type=5126;wc=H.w;H.w=0;cb=H.x;H.x=0;mc=H.y;H.y=0;Mc=H.z;H.z=0;Xa=z.call(this,da,a,f);Ha.offset=Xa;Qc=!1;Bb=null;Za=0;Xb=!1;Yb=uc=0;Rb=1;Nc=0;Sb=5126;Rc=ud=Fc=Ld=0;Ca(Ha)?(Qc=!0,Bb=M.createStream(34962,Ha),Sb=Bb.dtype):(Bb=M.getBuffer(Ha))?Sb=Bb.dtype:"constant"in Ha?(Rb=2,"number"===typeof Ha.constant?(Fc=Ha.constant,ud=Rc=Ld=0):(Fc=0<Ha.constant.length?Ha.constant[0]:0,ud=1<Ha.constant.length?Ha.constant[1]:0,Rc=2<Ha.constant.length?
Ha.constant[2]:0,Ld=3<Ha.constant.length?Ha.constant[3]:0)):(Bb=Ca(Ha.buffer)?M.createStream(34962,Ha.buffer):M.getBuffer(Ha.buffer),Sb="type"in Ha?Gc[Ha.type]:Bb.dtype,Xb=!!Ha.normalized,Yb=Ha.size|0,uc=Ha.offset|0,Nc=Ha.stride|0,Za=Ha.divisor|0);ad=y.buffer;y.buffer=Bb;vd=y.divisor;y.divisor=Za;pc=y.normalized;y.normalized=Xb;xc=y.offset;y.offset=uc;jc=y.size;y.size=Yb;ab=y.state;y.state=Rb;tc=y.stride;y.stride=Nc;Ub=y.type;y.type=Sb;Zb=y.w;y.w=Ld;gc=y.x;y.x=Fc;kc=y.y;y.y=ud;zc=y.z;y.z=Rc;Cc=v.buffer;
v.buffer=h;fd=v.divisor;v.divisor=0;Uc=v.normalized;v.normalized=!1;Vc=v.offset;v.offset=8;Wc=v.size;v.size=0;bd=v.state;v.state=1;od=v.stride;v.stride=24;gd=v.type;v.type=5126;cd=v.w;v.w=0;nc=v.x;v.x=0;ec=v.y;v.y=0;dd=v.z;v.z=0;Yc=S.call(this,da,a,f);dc.offset=Yc;hd=!1;Ac=null;kd=0;Ad=!1;me=ze=0;ld=1;Ee=0;Qd=5126;Kd=Rd=Zd=fe=0;Ca(dc)?(hd=!0,Ac=M.createStream(34962,dc),Qd=Ac.dtype):(Ac=M.getBuffer(dc))?Qd=Ac.dtype:"constant"in dc?(ld=2,"number"===typeof dc.constant?(Zd=dc.constant,Rd=Kd=fe=0):(Zd=
0<dc.constant.length?dc.constant[0]:0,Rd=1<dc.constant.length?dc.constant[1]:0,Kd=2<dc.constant.length?dc.constant[2]:0,fe=3<dc.constant.length?dc.constant[3]:0)):(Ac=Ca(dc.buffer)?M.createStream(34962,dc.buffer):M.getBuffer(dc.buffer),Qd="type"in dc?Gc[dc.type]:Ac.dtype,Ad=!!dc.normalized,me=dc.size|0,ze=dc.offset|0,Ee=dc.stride|0,kd=dc.divisor|0);Hd=L.buffer;L.buffer=Ac;qd=L.divisor;L.divisor=kd;Xc=L.normalized;L.normalized=Ad;wd=L.offset;L.offset=ze;td=L.size;L.size=me;md=L.state;L.state=ld;xd=
L.stride;L.stride=Ee;Cd=L.type;L.type=Qd;Ed=L.w;L.w=fe;ie=L.x;L.x=Zd;ke=L.y;L.y=Rd;ve=L.z;L.z=Kd;le=Q.call(this,da,a,f);Tb.offset=le;je=!1;ge=null;we=0;de=!1;Sc=ne=0;jd=1;xe=0;qe=5126;Ud=Td=Sd=Md=0;Ca(Tb)?(je=!0,ge=M.createStream(34962,Tb),qe=ge.dtype):(ge=M.getBuffer(Tb))?qe=ge.dtype:"constant"in Tb?(jd=2,"number"===typeof Tb.constant?(Sd=Tb.constant,Td=Ud=Md=0):(Sd=0<Tb.constant.length?Tb.constant[0]:0,Td=1<Tb.constant.length?Tb.constant[1]:0,Ud=2<Tb.constant.length?Tb.constant[2]:0,Md=3<Tb.constant.length?
Tb.constant[3]:0)):(ge=Ca(Tb.buffer)?M.createStream(34962,Tb.buffer):M.getBuffer(Tb.buffer),qe="type"in Tb?Gc[Tb.type]:ge.dtype,de=!!Tb.normalized,Sc=Tb.size|0,ne=Tb.offset|0,xe=Tb.stride|0,we=Tb.divisor|0);oe=C.buffer;C.buffer=ge;Be=C.divisor;C.divisor=we;Fe=C.normalized;C.normalized=de;re=C.offset;C.offset=ne;Ue=C.size;C.size=Sc;Ve=C.state;C.state=jd;Qe=C.stride;C.stride=xe;ye=C.type;C.type=qe;Ie=C.w;C.w=Md;Ke=C.x;C.x=Sd;Le=C.y;C.y=Td;Me=C.z;C.z=Ud;Je=ka.vert;ka.vert=2;Nd=ka.frag;ka.frag=1;X.dirty=
!0;c(da,a,f);da.viewportWidth=d;da.viewportHeight=k;eb[0]=t;eb[1]=g;eb[2]=D;eb[3]=F;Aa[0]=V;Aa[1]=u;Aa[2]=G;Aa[3]=w;ia.blend_enable=W;$a[0]=sa;$a[1]=n;ca[0]=B;ca[1]=xa;ca[2]=Qa;ca[3]=Ia;ia.depth_enable=R;ma[0]=fa;ma[1]=ga;ma[2]=K;ma[3]=ha;ia.scissor_enable=P;Y&&(b.cpuTime+=performance.now()-wa);ja.count=O;ja.instances=la;ja.primitive=Fa;Ba[5]=qa;Ba[4]=oa;Ba[10]=aa;Ba[18]=Ea;Ba[6]=na;Ba[7]=Da;Ba[8]=ra;Ba[9]=Ka;Ba[3]=Kb;m.buffer=sc;m.divisor=Pb;m.normalized=kb;m.offset=Fb;m.size=Db;m.state=zb;m.stride=
ib;m.type=ac;m.w=Qb;m.x=sb;m.y=Sa;m.z=Vb;lc&&M.destroyStream(jb);J.buffer=Pa;J.divisor=Dc;J.normalized=Ua;J.offset=Lb;J.size=Eb;J.state=Ma;J.stride=yd;J.type=Ya;J.w=Mb;J.x=Nb;J.y=nb;J.z=Oa;H.buffer=bc;H.divisor=Ra;H.normalized=xb;H.offset=yb;H.size=Ta;H.state=ob;H.stride=ic;H.type=Bc;H.w=wc;H.x=cb;H.y=mc;H.z=Mc;Qc&&M.destroyStream(Bb);y.buffer=ad;y.divisor=vd;y.normalized=pc;y.offset=xc;y.size=jc;y.state=ab;y.stride=tc;y.type=Ub;y.w=Zb;y.x=gc;y.y=kc;y.z=zc;v.buffer=Cc;v.divisor=fd;v.normalized=Uc;
v.offset=Vc;v.size=Wc;v.state=bd;v.stride=od;v.type=gd;v.w=cd;v.x=nc;v.y=ec;v.z=dd;hd&&M.destroyStream(Ac);L.buffer=Hd;L.divisor=qd;L.normalized=Xc;L.offset=wd;L.size=td;L.state=md;L.stride=xd;L.type=Cd;L.w=Ed;L.x=ie;L.y=ke;L.z=ve;je&&M.destroyStream(ge);C.buffer=oe;C.divisor=Be;C.normalized=Fe;C.offset=re;C.size=Ue;C.state=Ve;C.stride=Qe;C.type=ye;C.w=Ie;C.x=Ke;C.y=Le;C.z=Me;ka.vert=Je;ka.frag=Nd;X.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
b,x,l,k,f,d,e,g,w,u,pa,h,A,n,q,m,E,J,H,z,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la){var na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa,ha,Y;na=a.attributes;U=a.buffer;aa=a.context;T=a.current;R=a.draw;N=a.elements;F=a.extensions;O=a.framebuffer;P=a.gl;qa=a.isBufferArgs;ta=a.next;G=a.shader;M=a.uniforms;da=a.vao;X=ta.blend_color;ja=T.blend_color;oa=ta.blend_equation;Da=T.blend_equation;ya=ta.blend_func;Z=T.blend_func;Ca=ta.colorMask;ia=T.colorMask;
ka=ta.depth_range;Ba=T.depth_range;Qa=ta.polygonOffset_offset;Aa=T.polygonOffset_offset;Hb=ta.sample_coverage;$a=T.sample_coverage;V=ta.scissor_box;ca=T.scissor_box;sa=ta.stencil_func;wa=T.stencil_func;Ea=ta.stencil_opBack;mb=T.stencil_opBack;Gb=ta.stencil_opFront;fa=T.stencil_opFront;W=ta.viewport;xa=T.viewport;Ia={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ma={divisor:1,offset:8,stride:8};za={divisor:1,offset:8,stride:8};Fa={divisor:1,offset:16,
stride:8};ha={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(a,e){var l,x,d,g,V,h;l=O.next;l!==O.cur&&(l?P.bindFramebuffer(36160,l.framebuffer):P.bindFramebuffer(36160,null),O.cur=l);if(T.dirty){var u,G,A,w,W,m,n,M,pa,X,ga,q,ya,oa,ua,cf,Pe,Te,Gd,De,te,ue,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc;u=ta.dither;u!==T.dither&&(u?P.enable(3024):P.disable(3024),T.dither=u);G=ta.depth_func;G!==T.depth_func&&(P.depthFunc(G),T.depth_func=G);A=ka[0];w=ka[1];if(A!==Ba[0]||w!==Ba[1])P.depthRange(A,
w),Ba[0]=A,Ba[1]=w;W=ta.depth_mask;W!==T.depth_mask&&(P.depthMask(W),T.depth_mask=W);m=Ca[0];n=Ca[1];M=Ca[2];pa=Ca[3];if(m!==ia[0]||n!==ia[1]||M!==ia[2]||pa!==ia[3])P.colorMask(m,n,M,pa),ia[0]=m,ia[1]=n,ia[2]=M,ia[3]=pa;X=ta.cull_enable;X!==T.cull_enable&&(X?P.enable(2884):P.disable(2884),T.cull_enable=X);ga=ta.cull_face;ga!==T.cull_face&&(P.cullFace(ga),T.cull_face=ga);q=ta.frontFace;q!==T.frontFace&&(P.frontFace(q),T.frontFace=q);ya=ta.lineWidth;ya!==T.lineWidth&&(P.lineWidth(ya),T.lineWidth=ya);
oa=ta.polygonOffset_enable;oa!==T.polygonOffset_enable&&(oa?P.enable(32823):P.disable(32823),T.polygonOffset_enable=oa);ua=Qa[0];cf=Qa[1];if(ua!==Aa[0]||cf!==Aa[1])P.polygonOffset(ua,cf),Aa[0]=ua,Aa[1]=cf;Pe=ta.sample_alpha;Pe!==T.sample_alpha&&(Pe?P.enable(32926):P.disable(32926),T.sample_alpha=Pe);Te=ta.sample_enable;Te!==T.sample_enable&&(Te?P.enable(32928):P.disable(32928),T.sample_enable=Te);Gd=Hb[0];De=Hb[1];if(Gd!==$a[0]||De!==$a[1])P.sampleCoverage(Gd,De),$a[0]=Gd,$a[1]=De;te=ta.stencil_mask;
te!==T.stencil_mask&&(P.stencilMask(te),T.stencil_mask=te);ue=sa[0];Yd=sa[1];Jd=sa[2];if(ue!==wa[0]||Yd!==wa[1]||Jd!==wa[2])P.stencilFunc(ue,Yd,Jd),wa[0]=ue,wa[1]=Yd,wa[2]=Jd;pd=Gb[0];ed=Gb[1];sd=Gb[2];Oc=Gb[3];if(pd!==fa[0]||ed!==fa[1]||sd!==fa[2]||Oc!==fa[3])P.stencilOpSeparate(pd,ed,sd,Oc),fa[0]=pd,fa[1]=ed,fa[2]=sd,fa[3]=Oc;rd=Ea[0];Hc=Ea[1];id=Ea[2];Tc=Ea[3];if(rd!==mb[0]||Hc!==mb[1]||id!==mb[2]||Tc!==mb[3])P.stencilOpSeparate(rd,Hc,id,Tc),mb[0]=rd,mb[1]=Hc,mb[2]=id,mb[3]=Tc}P.blendColor(0,0,
0,0);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=0;P.enable(3042);T.blend_enable=!0;P.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;P.blendFuncSeparate(770,771,773,1);Z[0]=770;Z[1]=771;Z[2]=773;Z[3]=1;P.enable(3089);T.scissor_enable=!0;P.disable(2960);T.stencil_enable=!1;if(x=T.profile)d=performance.now(),b.count+=e;P.useProgram(E.program);g=F.angle_instanced_arrays;var nd,Wb,Jb,vc,Ab;da.setVAO(null);nd=ra.location;Wb=na[nd];Wb.buffer||P.enableVertexAttribArray(nd);if(5126!==Wb.type||1!==Wb.size||
Wb.buffer!==k||!1!==Wb.normalized||0!==Wb.offset||8!==Wb.stride)P.bindBuffer(34962,k.buffer),P.vertexAttribPointer(nd,1,5126,!1,8,0),Wb.type=5126,Wb.size=1,Wb.buffer=k,Wb.normalized=!1,Wb.offset=0,Wb.stride=8;0!==Wb.divisor&&(g.vertexAttribDivisorANGLE(nd,0),Wb.divisor=0);Jb=I.location;vc=na[Jb];vc.buffer||P.enableVertexAttribArray(Jb);if(5126!==vc.type||1!==vc.size||vc.buffer!==f||!1!==vc.normalized||4!==vc.offset||8!==vc.stride)P.bindBuffer(34962,f.buffer),P.vertexAttribPointer(Jb,1,5126,!1,8,4),
vc.type=5126,vc.size=1,vc.buffer=f,vc.normalized=!1,vc.offset=4,vc.stride=8;0!==vc.divisor&&(g.vertexAttribDivisorANGLE(Jb,0),vc.divisor=0);(Ab=R.elements)?P.bindBuffer(34963,Ab.buffer.buffer):da.currentVAO&&(Ab=N.getElements(da.currentVAO.elements))&&P.bindBuffer(34963,Ab.buffer.buffer);for(V=0;V<e;++V){h=a[V];var yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,
Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md;yc=h.viewport;Cb=yc.x|0;Lc=yc.y|0;oc="width"in yc?yc.width|0:aa.framebufferWidth-Cb;Ic="height"in yc?yc.height|0:aa.framebufferHeight-Lc;$c=aa.viewportWidth;aa.viewportWidth=oc;Zc=aa.viewportHeight;aa.viewportHeight=Ic;P.viewport(Cb,Lc,oc,Ic);xa[0]=Cb;xa[1]=Lc;xa[2]=oc;xa[3]=Ic;(Ec=J.call(this,
aa,h,V))?P.enable(2929):P.disable(2929);T.depth_enable=Ec;hc=h.viewport;Jc=hc.x|0;qc=hc.y|0;rc="width"in hc?hc.width|0:aa.framebufferWidth-Jc;fc="height"in hc?hc.height|0:aa.framebufferHeight-qc;P.scissor(Jc,qc,rc,fc);ca[0]=Jc;ca[1]=qc;ca[2]=rc;ca[3]=fc;ma.buffer=h.positionBuffer;pb=!1;fb=null;Pc=0;$b=!1;Ob=hb=0;bb=1;qb=0;Va=5126;sc=Kb=Ib=Kc=0;qa(ma)?(pb=!0,fb=U.createStream(34962,ma),Va=fb.dtype):(fb=U.getBuffer(ma))?Va=fb.dtype:"constant"in ma?(bb=2,"number"===typeof ma.constant?(Ib=ma.constant,
Kb=sc=Kc=0):(Ib=0<ma.constant.length?ma.constant[0]:0,Kb=1<ma.constant.length?ma.constant[1]:0,sc=2<ma.constant.length?ma.constant[2]:0,Kc=3<ma.constant.length?ma.constant[3]:0)):(fb=qa(ma.buffer)?U.createStream(34962,ma.buffer):U.getBuffer(ma.buffer),Va="type"in ma?Ia[ma.type]:fb.dtype,$b=!!ma.normalized,Ob=ma.size|0,hb=ma.offset|0,qb=ma.stride|0,Pc=ma.divisor|0);Pb=z.location;kb=na[Pb];if(1===bb){kb.buffer||P.enableVertexAttribArray(Pb);Fb=Ob||2;if(kb.type!==Va||kb.size!==Fb||kb.buffer!==fb||kb.normalized!==
$b||kb.offset!==hb||kb.stride!==qb)P.bindBuffer(34962,fb.buffer),P.vertexAttribPointer(Pb,Fb,Va,$b,qb,hb),kb.type=Va,kb.size=Fb,kb.buffer=fb,kb.normalized=$b,kb.offset=hb,kb.stride=qb;kb.divisor!==Pc&&(g.vertexAttribDivisorANGLE(Pb,Pc),kb.divisor=Pc)}else if(kb.buffer&&(P.disableVertexAttribArray(Pb),kb.buffer=null),kb.x!==Ib||kb.y!==Kb||kb.z!==sc||kb.w!==Kc)P.vertexAttrib4f(Pb,Ib,Kb,sc,Kc),kb.x=Ib,kb.y=Kb,kb.z=sc,kb.w=Kc;Fa.buffer=h.positionBuffer;Db=!1;zb=null;ib=0;ac=!1;sb=Qb=0;Sa=1;Vb=0;tb=5126;
Ja=rb=jb=lc=0;qa(Fa)?(Db=!0,zb=U.createStream(34962,Fa),tb=zb.dtype):(zb=U.getBuffer(Fa))?tb=zb.dtype:"constant"in Fa?(Sa=2,"number"===typeof Fa.constant?(jb=Fa.constant,rb=Ja=lc=0):(jb=0<Fa.constant.length?Fa.constant[0]:0,rb=1<Fa.constant.length?Fa.constant[1]:0,Ja=2<Fa.constant.length?Fa.constant[2]:0,lc=3<Fa.constant.length?Fa.constant[3]:0)):(zb=qa(Fa.buffer)?U.createStream(34962,Fa.buffer):U.getBuffer(Fa.buffer),tb="type"in Fa?Ia[Fa.type]:zb.dtype,ac=!!Fa.normalized,sb=Fa.size|0,Qb=Fa.offset|
0,Vb=Fa.stride|0,ib=Fa.divisor|0);ub=v.location;La=na[ub];if(1===Sa){La.buffer||P.enableVertexAttribArray(ub);db=sb||2;if(La.type!==tb||La.size!==db||La.buffer!==zb||La.normalized!==ac||La.offset!==Qb||La.stride!==Vb)P.bindBuffer(34962,zb.buffer),P.vertexAttribPointer(ub,db,tb,ac,Vb,Qb),La.type=tb,La.size=db,La.buffer=zb,La.normalized=ac,La.offset=Qb,La.stride=Vb;La.divisor!==ib&&(g.vertexAttribDivisorANGLE(ub,ib),La.divisor=ib)}else if(La.buffer&&(P.disableVertexAttribArray(ub),La.buffer=null),La.x!==
jb||La.y!==rb||La.z!==Ja||La.w!==lc)P.vertexAttrib4f(ub,jb,rb,Ja,lc),La.x=jb,La.y=rb,La.z=Ja,La.w=lc;za.buffer=h.positionFractBuffer;gb=!1;Na=null;lb=0;Wa=!1;vb=wb=0;Pa=1;Dc=0;Ua=5126;yd=Ma=Eb=Lb=0;qa(za)?(gb=!0,Na=U.createStream(34962,za),Ua=Na.dtype):(Na=U.getBuffer(za))?Ua=Na.dtype:"constant"in za?(Pa=2,"number"===typeof za.constant?(Eb=za.constant,Ma=yd=Lb=0):(Eb=0<za.constant.length?za.constant[0]:0,Ma=1<za.constant.length?za.constant[1]:0,yd=2<za.constant.length?za.constant[2]:0,Lb=3<za.constant.length?
za.constant[3]:0)):(Na=qa(za.buffer)?U.createStream(34962,za.buffer):U.getBuffer(za.buffer),Ua="type"in za?Ia[za.type]:Na.dtype,Wa=!!za.normalized,vb=za.size|0,wb=za.offset|0,Dc=za.stride|0,lb=za.divisor|0);Ya=y.location;Mb=na[Ya];if(1===Pa){Mb.buffer||P.enableVertexAttribArray(Ya);Nb=vb||2;if(Mb.type!==Ua||Mb.size!==Nb||Mb.buffer!==Na||Mb.normalized!==Wa||Mb.offset!==wb||Mb.stride!==Dc)P.bindBuffer(34962,Na.buffer),P.vertexAttribPointer(Ya,Nb,Ua,Wa,Dc,wb),Mb.type=Ua,Mb.size=Nb,Mb.buffer=Na,Mb.normalized=
Wa,Mb.offset=wb,Mb.stride=Dc;Mb.divisor!==lb&&(g.vertexAttribDivisorANGLE(Ya,lb),Mb.divisor=lb)}else if(Mb.buffer&&(P.disableVertexAttribArray(Ya),Mb.buffer=null),Mb.x!==Eb||Mb.y!==Ma||Mb.z!==yd||Mb.w!==Lb)P.vertexAttrib4f(Ya,Eb,Ma,yd,Lb),Mb.x=Eb,Mb.y=Ma,Mb.z=yd,Mb.w=Lb;ha.buffer=h.positionFractBuffer;nb=!1;Oa=null;bc=0;Ra=!1;yb=xb=0;Ta=1;ob=0;ic=5126;mc=cb=wc=Bc=0;qa(ha)?(nb=!0,Oa=U.createStream(34962,ha),ic=Oa.dtype):(Oa=U.getBuffer(ha))?ic=Oa.dtype:"constant"in ha?(Ta=2,"number"===typeof ha.constant?
(wc=ha.constant,cb=mc=Bc=0):(wc=0<ha.constant.length?ha.constant[0]:0,cb=1<ha.constant.length?ha.constant[1]:0,mc=2<ha.constant.length?ha.constant[2]:0,Bc=3<ha.constant.length?ha.constant[3]:0)):(Oa=qa(ha.buffer)?U.createStream(34962,ha.buffer):U.getBuffer(ha.buffer),ic="type"in ha?Ia[ha.type]:Oa.dtype,Ra=!!ha.normalized,yb=ha.size|0,xb=ha.offset|0,ob=ha.stride|0,bc=ha.divisor|0);Mc=S.location;Xa=na[Mc];if(1===Ta){Xa.buffer||P.enableVertexAttribArray(Mc);Qc=yb||2;if(Xa.type!==ic||Xa.size!==Qc||Xa.buffer!==
Oa||Xa.normalized!==Ra||Xa.offset!==xb||Xa.stride!==ob)P.bindBuffer(34962,Oa.buffer),P.vertexAttribPointer(Mc,Qc,ic,Ra,ob,xb),Xa.type=ic,Xa.size=Qc,Xa.buffer=Oa,Xa.normalized=Ra,Xa.offset=xb,Xa.stride=ob;Xa.divisor!==bc&&(g.vertexAttribDivisorANGLE(Mc,bc),Xa.divisor=bc)}else if(Xa.buffer&&(P.disableVertexAttribArray(Mc),Xa.buffer=null),Xa.x!==wc||Xa.y!==cb||Xa.z!==mc||Xa.w!==Bc)P.vertexAttrib4f(Mc,wc,cb,mc,Bc),Xa.x=wc,Xa.y=cb,Xa.z=mc,Xa.w=Bc;Y.buffer=h.colorBuffer;Bb=!1;Za=null;Xb=0;uc=!1;Rb=Yb=0;
Nc=1;Sb=0;Ld=5126;ad=Rc=ud=Fc=0;qa(Y)?(Bb=!0,Za=U.createStream(34962,Y),Ld=Za.dtype):(Za=U.getBuffer(Y))?Ld=Za.dtype:"constant"in Y?(Nc=2,"number"===typeof Y.constant?(ud=Y.constant,Rc=ad=Fc=0):(ud=0<Y.constant.length?Y.constant[0]:0,Rc=1<Y.constant.length?Y.constant[1]:0,ad=2<Y.constant.length?Y.constant[2]:0,Fc=3<Y.constant.length?Y.constant[3]:0)):(Za=qa(Y.buffer)?U.createStream(34962,Y.buffer):U.getBuffer(Y.buffer),Ld="type"in Y?Ia[Y.type]:Za.dtype,uc=!!Y.normalized,Rb=Y.size|0,Yb=Y.offset|0,
Sb=Y.stride|0,Xb=Y.divisor|0);vd=L.location;pc=na[vd];if(1===Nc){pc.buffer||P.enableVertexAttribArray(vd);xc=Rb||4;if(pc.type!==Ld||pc.size!==xc||pc.buffer!==Za||pc.normalized!==uc||pc.offset!==Yb||pc.stride!==Sb)P.bindBuffer(34962,Za.buffer),P.vertexAttribPointer(vd,xc,Ld,uc,Sb,Yb),pc.type=Ld,pc.size=xc,pc.buffer=Za,pc.normalized=uc,pc.offset=Yb,pc.stride=Sb;pc.divisor!==Xb&&(g.vertexAttribDivisorANGLE(vd,Xb),pc.divisor=Xb)}else if(pc.buffer&&(P.disableVertexAttribArray(vd),pc.buffer=null),pc.x!==
ud||pc.y!==Rc||pc.z!==ad||pc.w!==Fc)P.vertexAttrib4f(vd,ud,Rc,ad,Fc),pc.x=ud,pc.y=Rc,pc.z=ad,pc.w=Fc;jc=h.scale;ab=jc[0];Ub=jc[1];V&&tc===ab&&Zb===Ub||(tc=ab,Zb=Ub,P.uniform2f(t.location,ab,Ub));gc=h.scaleFract;kc=gc[0];Cc=gc[1];V&&zc===kc&&fd===Cc||(zc=kc,fd=Cc,P.uniform2f(p.location,kc,Cc));Uc=h.translate;Vc=Uc[0];bd=Uc[1];V&&Wc===Vc&&od===bd||(Wc=Vc,od=bd,P.uniform2f(D.location,Vc,bd));gd=h.translateFract;cd=gd[0];ec=gd[1];V&&nc===cd&&dd===ec||(nc=cd,dd=ec,P.uniform2f(r.location,cd,ec));Yc=h.thickness;
V&&hd===Yc||(hd=Yc,P.uniform1f(c.location,Yc));Ac=h.depth;V&&kd===Ac||(kd=Ac,P.uniform1f(B.location,Ac));Ad=H.call(this,aa,h,V);ze=Ad[0];ld=Ad[1];Qd=Ad[2];Zd=Ad[3];V&&me===ze&&Ee===ld&&fe===Qd&&Rd===Zd||(me=ze,Ee=ld,fe=Qd,Rd=Zd,P.uniform4f(la.location,ze,ld,Qd,Zd));Kd=h.dashLength;V&&Hd===Kd||(Hd=Kd,P.uniform1f(Q.location,Kd));qd=h.opacity;V&&Xc===qd||(Xc=qd,P.uniform1f(K.location,qd));(wd=h.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);td=wd._texture;P.uniform1i(C.location,td.bind());
md=h.count;0<md?Ab?g.drawElementsInstancedANGLE(5,4,Ab.type,0<<(Ab.type-5121>>1),md):g.drawArraysInstancedANGLE(5,0,4,md):0>md&&(Ab?P.drawElements(5,4,Ab.type,0<<(Ab.type-5121>>1)):P.drawArrays(5,0,4));aa.viewportWidth=$c;aa.viewportHeight=Zc;pb&&U.destroyStream(fb);Db&&U.destroyStream(zb);gb&&U.destroyStream(Na);nb&&U.destroyStream(Oa);Bb&&U.destroyStream(Za);td.unbind()}T.dirty=!0;da.setVAO(null);x&&(b.cpuTime+=performance.now()-d)},draw:function(a){var e,g,h,V,u,G,A,w,W,m,n,M,pa,X,J,ga,E,q,H,ya,
oa,ua,cf,Pe,Te,Gd,De,te,ue,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb;e=O.next;e!==O.cur&&(e?P.bindFramebuffer(36160,e.framebuffer):P.bindFramebuffer(36160,null),O.cur=e);if(T.dirty){var yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb;yb=ta.dither;yb!==
T.dither&&(yb?P.enable(3024):P.disable(3024),T.dither=yb);Ta=ta.depth_func;Ta!==T.depth_func&&(P.depthFunc(Ta),T.depth_func=Ta);ob=ka[0];ic=ka[1];if(ob!==Ba[0]||ic!==Ba[1])P.depthRange(ob,ic),Ba[0]=ob,Ba[1]=ic;Bc=ta.depth_mask;Bc!==T.depth_mask&&(P.depthMask(Bc),T.depth_mask=Bc);wc=Ca[0];cb=Ca[1];mc=Ca[2];Mc=Ca[3];if(wc!==ia[0]||cb!==ia[1]||mc!==ia[2]||Mc!==ia[3])P.colorMask(wc,cb,mc,Mc),ia[0]=wc,ia[1]=cb,ia[2]=mc,ia[3]=Mc;Xa=ta.cull_enable;Xa!==T.cull_enable&&(Xa?P.enable(2884):P.disable(2884),T.cull_enable=
Xa);Qc=ta.cull_face;Qc!==T.cull_face&&(P.cullFace(Qc),T.cull_face=Qc);Bb=ta.frontFace;Bb!==T.frontFace&&(P.frontFace(Bb),T.frontFace=Bb);Za=ta.lineWidth;Za!==T.lineWidth&&(P.lineWidth(Za),T.lineWidth=Za);Xb=ta.polygonOffset_enable;Xb!==T.polygonOffset_enable&&(Xb?P.enable(32823):P.disable(32823),T.polygonOffset_enable=Xb);uc=Qa[0];Yb=Qa[1];if(uc!==Aa[0]||Yb!==Aa[1])P.polygonOffset(uc,Yb),Aa[0]=uc,Aa[1]=Yb;Rb=ta.sample_alpha;Rb!==T.sample_alpha&&(Rb?P.enable(32926):P.disable(32926),T.sample_alpha=
Rb);Nc=ta.sample_enable;Nc!==T.sample_enable&&(Nc?P.enable(32928):P.disable(32928),T.sample_enable=Nc);Sb=Hb[0];Ld=Hb[1];if(Sb!==$a[0]||Ld!==$a[1])P.sampleCoverage(Sb,Ld),$a[0]=Sb,$a[1]=Ld;Fc=ta.stencil_mask;Fc!==T.stencil_mask&&(P.stencilMask(Fc),T.stencil_mask=Fc);ud=sa[0];Rc=sa[1];ad=sa[2];if(ud!==wa[0]||Rc!==wa[1]||ad!==wa[2])P.stencilFunc(ud,Rc,ad),wa[0]=ud,wa[1]=Rc,wa[2]=ad;vd=Gb[0];pc=Gb[1];xc=Gb[2];jc=Gb[3];if(vd!==fa[0]||pc!==fa[1]||xc!==fa[2]||jc!==fa[3])P.stencilOpSeparate(vd,pc,xc,jc),
fa[0]=vd,fa[1]=pc,fa[2]=xc,fa[3]=jc;ab=Ea[0];tc=Ea[1];Ub=Ea[2];Zb=Ea[3];if(ab!==mb[0]||tc!==mb[1]||Ub!==mb[2]||Zb!==mb[3])P.stencilOpSeparate(ab,tc,Ub,Zb),mb[0]=ab,mb[1]=tc,mb[2]=Ub,mb[3]=Zb}g=a.viewport;h=g.x|0;V=g.y|0;u="width"in g?g.width|0:aa.framebufferWidth-h;G="height"in g?g.height|0:aa.framebufferHeight-V;A=aa.viewportWidth;aa.viewportWidth=u;w=aa.viewportHeight;aa.viewportHeight=G;P.viewport(h,V,u,G);xa[0]=h;xa[1]=V;xa[2]=u;xa[3]=G;P.blendColor(0,0,0,0);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=0;P.enable(3042);
T.blend_enable=!0;P.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;P.blendFuncSeparate(770,771,773,1);Z[0]=770;Z[1]=771;Z[2]=773;Z[3]=1;(W=x.call(this,aa,a,0))?P.enable(2929):P.disable(2929);T.depth_enable=W;m=a.viewport;n=m.x|0;M=m.y|0;pa="width"in m?m.width|0:aa.framebufferWidth-n;X="height"in m?m.height|0:aa.framebufferHeight-M;P.scissor(n,M,pa,X);ca[0]=n;ca[1]=M;ca[2]=pa;ca[3]=X;P.enable(3089);T.scissor_enable=!0;P.disable(2960);T.stencil_enable=!1;if(J=T.profile)ga=performance.now(),
b.count++;P.useProgram(l.program);E=F.angle_instanced_arrays;da.setVAO(null);ma.buffer=a.positionBuffer;q=!1;H=null;ya=0;oa=!1;cf=ua=0;Pe=1;Te=0;Gd=5126;Yd=ue=te=De=0;qa(ma)?(q=!0,H=U.createStream(34962,ma),Gd=H.dtype):(H=U.getBuffer(ma))?Gd=H.dtype:"constant"in ma?(Pe=2,"number"===typeof ma.constant?(te=ma.constant,ue=Yd=De=0):(te=0<ma.constant.length?ma.constant[0]:0,ue=1<ma.constant.length?ma.constant[1]:0,Yd=2<ma.constant.length?ma.constant[2]:0,De=3<ma.constant.length?ma.constant[3]:0)):(H=qa(ma.buffer)?
U.createStream(34962,ma.buffer):U.getBuffer(ma.buffer),Gd="type"in ma?Ia[ma.type]:H.dtype,oa=!!ma.normalized,cf=ma.size|0,ua=ma.offset|0,Te=ma.stride|0,ya=ma.divisor|0);Jd=z.location;pd=na[Jd];if(1===Pe){pd.buffer||P.enableVertexAttribArray(Jd);ed=cf||2;if(pd.type!==Gd||pd.size!==ed||pd.buffer!==H||pd.normalized!==oa||pd.offset!==ua||pd.stride!==Te)P.bindBuffer(34962,H.buffer),P.vertexAttribPointer(Jd,ed,Gd,oa,Te,ua),pd.type=Gd,pd.size=ed,pd.buffer=H,pd.normalized=oa,pd.offset=ua,pd.stride=Te;pd.divisor!==
ya&&(E.vertexAttribDivisorANGLE(Jd,ya),pd.divisor=ya)}else if(pd.buffer&&(P.disableVertexAttribArray(Jd),pd.buffer=null),pd.x!==te||pd.y!==ue||pd.z!==Yd||pd.w!==De)P.vertexAttrib4f(Jd,te,ue,Yd,De),pd.x=te,pd.y=ue,pd.z=Yd,pd.w=De;Fa.buffer=a.positionBuffer;sd=!1;Oc=null;rd=0;Hc=!1;Tc=id=0;nd=1;Wb=0;Jb=5126;Cb=yc=Ab=vc=0;qa(Fa)?(sd=!0,Oc=U.createStream(34962,Fa),Jb=Oc.dtype):(Oc=U.getBuffer(Fa))?Jb=Oc.dtype:"constant"in Fa?(nd=2,"number"===typeof Fa.constant?(Ab=Fa.constant,yc=Cb=vc=0):(Ab=0<Fa.constant.length?
Fa.constant[0]:0,yc=1<Fa.constant.length?Fa.constant[1]:0,Cb=2<Fa.constant.length?Fa.constant[2]:0,vc=3<Fa.constant.length?Fa.constant[3]:0)):(Oc=qa(Fa.buffer)?U.createStream(34962,Fa.buffer):U.getBuffer(Fa.buffer),Jb="type"in Fa?Ia[Fa.type]:Oc.dtype,Hc=!!Fa.normalized,Tc=Fa.size|0,id=Fa.offset|0,Wb=Fa.stride|0,rd=Fa.divisor|0);Lc=v.location;oc=na[Lc];if(1===nd){oc.buffer||P.enableVertexAttribArray(Lc);Ic=Tc||2;if(oc.type!==Jb||oc.size!==Ic||oc.buffer!==Oc||oc.normalized!==Hc||oc.offset!==id||oc.stride!==
Wb)P.bindBuffer(34962,Oc.buffer),P.vertexAttribPointer(Lc,Ic,Jb,Hc,Wb,id),oc.type=Jb,oc.size=Ic,oc.buffer=Oc,oc.normalized=Hc,oc.offset=id,oc.stride=Wb;oc.divisor!==rd&&(E.vertexAttribDivisorANGLE(Lc,rd),oc.divisor=rd)}else if(oc.buffer&&(P.disableVertexAttribArray(Lc),oc.buffer=null),oc.x!==Ab||oc.y!==yc||oc.z!==Cb||oc.w!==vc)P.vertexAttrib4f(Lc,Ab,yc,Cb,vc),oc.x=Ab,oc.y=yc,oc.z=Cb,oc.w=vc;za.buffer=a.positionFractBuffer;$c=!1;Zc=null;Ec=0;hc=!1;qc=Jc=0;rc=1;fc=0;pb=5126;hb=$b=Pc=fb=0;qa(za)?($c=
!0,Zc=U.createStream(34962,za),pb=Zc.dtype):(Zc=U.getBuffer(za))?pb=Zc.dtype:"constant"in za?(rc=2,"number"===typeof za.constant?(Pc=za.constant,$b=hb=fb=0):(Pc=0<za.constant.length?za.constant[0]:0,$b=1<za.constant.length?za.constant[1]:0,hb=2<za.constant.length?za.constant[2]:0,fb=3<za.constant.length?za.constant[3]:0)):(Zc=qa(za.buffer)?U.createStream(34962,za.buffer):U.getBuffer(za.buffer),pb="type"in za?Ia[za.type]:Zc.dtype,hc=!!za.normalized,qc=za.size|0,Jc=za.offset|0,fc=za.stride|0,Ec=za.divisor|
0);Ob=y.location;bb=na[Ob];if(1===rc){bb.buffer||P.enableVertexAttribArray(Ob);qb=qc||2;if(bb.type!==pb||bb.size!==qb||bb.buffer!==Zc||bb.normalized!==hc||bb.offset!==Jc||bb.stride!==fc)P.bindBuffer(34962,Zc.buffer),P.vertexAttribPointer(Ob,qb,pb,hc,fc,Jc),bb.type=pb,bb.size=qb,bb.buffer=Zc,bb.normalized=hc,bb.offset=Jc,bb.stride=fc;bb.divisor!==Ec&&(E.vertexAttribDivisorANGLE(Ob,Ec),bb.divisor=Ec)}else if(bb.buffer&&(P.disableVertexAttribArray(Ob),bb.buffer=null),bb.x!==Pc||bb.y!==$b||bb.z!==hb||
bb.w!==fb)P.vertexAttrib4f(Ob,Pc,$b,hb,fb),bb.x=Pc,bb.y=$b,bb.z=hb,bb.w=fb;ha.buffer=a.positionFractBuffer;Va=!1;Kc=null;Ib=0;Kb=!1;Pb=sc=0;kb=1;Fb=0;Db=5126;Qb=ac=ib=zb=0;qa(ha)?(Va=!0,Kc=U.createStream(34962,ha),Db=Kc.dtype):(Kc=U.getBuffer(ha))?Db=Kc.dtype:"constant"in ha?(kb=2,"number"===typeof ha.constant?(ib=ha.constant,ac=Qb=zb=0):(ib=0<ha.constant.length?ha.constant[0]:0,ac=1<ha.constant.length?ha.constant[1]:0,Qb=2<ha.constant.length?ha.constant[2]:0,zb=3<ha.constant.length?ha.constant[3]:
0)):(Kc=qa(ha.buffer)?U.createStream(34962,ha.buffer):U.getBuffer(ha.buffer),Db="type"in ha?Ia[ha.type]:Kc.dtype,Kb=!!ha.normalized,Pb=ha.size|0,sc=ha.offset|0,Fb=ha.stride|0,Ib=ha.divisor|0);sb=S.location;Sa=na[sb];if(1===kb){Sa.buffer||P.enableVertexAttribArray(sb);Vb=Pb||2;if(Sa.type!==Db||Sa.size!==Vb||Sa.buffer!==Kc||Sa.normalized!==Kb||Sa.offset!==sc||Sa.stride!==Fb)P.bindBuffer(34962,Kc.buffer),P.vertexAttribPointer(sb,Vb,Db,Kb,Fb,sc),Sa.type=Db,Sa.size=Vb,Sa.buffer=Kc,Sa.normalized=Kb,Sa.offset=
sc,Sa.stride=Fb;Sa.divisor!==Ib&&(E.vertexAttribDivisorANGLE(sb,Ib),Sa.divisor=Ib)}else if(Sa.buffer&&(P.disableVertexAttribArray(sb),Sa.buffer=null),Sa.x!==ib||Sa.y!==ac||Sa.z!==Qb||Sa.w!==zb)P.vertexAttrib4f(sb,ib,ac,Qb,zb),Sa.x=ib,Sa.y=ac,Sa.z=Qb,Sa.w=zb;Y.buffer=a.colorBuffer;tb=!1;lc=null;jb=0;rb=!1;ub=Ja=0;La=1;db=0;gb=5126;wb=Wa=lb=Na=0;qa(Y)?(tb=!0,lc=U.createStream(34962,Y),gb=lc.dtype):(lc=U.getBuffer(Y))?gb=lc.dtype:"constant"in Y?(La=2,"number"===typeof Y.constant?(lb=Y.constant,Wa=wb=
Na=0):(lb=0<Y.constant.length?Y.constant[0]:0,Wa=1<Y.constant.length?Y.constant[1]:0,wb=2<Y.constant.length?Y.constant[2]:0,Na=3<Y.constant.length?Y.constant[3]:0)):(lc=qa(Y.buffer)?U.createStream(34962,Y.buffer):U.getBuffer(Y.buffer),gb="type"in Y?Ia[Y.type]:lc.dtype,rb=!!Y.normalized,ub=Y.size|0,Ja=Y.offset|0,db=Y.stride|0,jb=Y.divisor|0);vb=L.location;Pa=na[vb];if(1===La){Pa.buffer||P.enableVertexAttribArray(vb);Dc=ub||4;if(Pa.type!==gb||Pa.size!==Dc||Pa.buffer!==lc||Pa.normalized!==rb||Pa.offset!==
Ja||Pa.stride!==db)P.bindBuffer(34962,lc.buffer),P.vertexAttribPointer(vb,Dc,gb,rb,db,Ja),Pa.type=gb,Pa.size=Dc,Pa.buffer=lc,Pa.normalized=rb,Pa.offset=Ja,Pa.stride=db;Pa.divisor!==jb&&(E.vertexAttribDivisorANGLE(vb,jb),Pa.divisor=jb)}else if(Pa.buffer&&(P.disableVertexAttribArray(vb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==wb||Pa.w!==Na)P.vertexAttrib4f(vb,lb,Wa,wb,Na),Pa.x=lb,Pa.y=Wa,Pa.z=wb,Pa.w=Na;Ua=ra.location;Lb=na[Ua];Lb.buffer||P.enableVertexAttribArray(Ua);if(5126!==Lb.type||1!==Lb.size||
Lb.buffer!==k||!1!==Lb.normalized||0!==Lb.offset||8!==Lb.stride)P.bindBuffer(34962,k.buffer),P.vertexAttribPointer(Ua,1,5126,!1,8,0),Lb.type=5126,Lb.size=1,Lb.buffer=k,Lb.normalized=!1,Lb.offset=0,Lb.stride=8;0!==Lb.divisor&&(E.vertexAttribDivisorANGLE(Ua,0),Lb.divisor=0);Eb=I.location;Ma=na[Eb];Ma.buffer||P.enableVertexAttribArray(Eb);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==f||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)P.bindBuffer(34962,f.buffer),P.vertexAttribPointer(Eb,1,5126,!1,8,4),
Ma.type=5126,Ma.size=1,Ma.buffer=f,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(E.vertexAttribDivisorANGLE(Eb,0),Ma.divisor=0);yd=a.scale;P.uniform2f(t.location,yd[0],yd[1]);Ya=a.scaleFract;P.uniform2f(p.location,Ya[0],Ya[1]);Mb=a.translate;P.uniform2f(D.location,Mb[0],Mb[1]);Nb=a.translateFract;P.uniform2f(r.location,Nb[0],Nb[1]);P.uniform1f(c.location,a.thickness);P.uniform1f(B.location,a.depth);nb=d.call(this,aa,a,0);P.uniform4f(la.location,nb[0],nb[1],nb[2],nb[3]);P.uniform1f(Q.location,
a.dashLength);P.uniform1f(K.location,a.opacity);(Oa=a.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);bc=Oa._texture;P.uniform1i(C.location,bc.bind());(Ra=R.elements)?P.bindBuffer(34963,Ra.buffer.buffer):da.currentVAO&&(Ra=N.getElements(da.currentVAO.elements))&&P.bindBuffer(34963,Ra.buffer.buffer);xb=a.count;0<xb?Ra?E.drawElementsInstancedANGLE(5,4,Ra.type,0<<(Ra.type-5121>>1),xb):E.drawArraysInstancedANGLE(5,0,4,xb):0>xb&&(Ra?P.drawElements(5,4,Ra.type,0<<(Ra.type-5121>>1)):P.drawArrays(5,
0,4));T.dirty=!0;da.setVAO(null);aa.viewportWidth=A;aa.viewportHeight=w;J&&(b.cpuTime+=performance.now()-ga);q&&U.destroyStream(H);sd&&U.destroyStream(Oc);$c&&U.destroyStream(Zc);Va&&U.destroyStream(Kc);tb&&U.destroyStream(lc);bc.unbind()},scope:function(a,c,p){var l,r,x,d,t,D,v,F,y,ca,Aa,sa,C,B,xa,Qa,N,Hb,I,J,Z,E,Q,fa,L,K,H,P,wa,O,da,la,z,S,ea,ia,$a,Ba,ka,Ea,Ca,Gb,na,ja,Da,mb,ra,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,
gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re;l=a.viewport;r=l.x|0;x=l.y|0;d="width"in l?l.width|0:aa.framebufferWidth-r;t="height"in l?l.height|
0:aa.framebufferHeight-x;D=aa.viewportWidth;aa.viewportWidth=d;v=aa.viewportHeight;aa.viewportHeight=t;F=W[0];W[0]=r;y=W[1];W[1]=x;ca=W[2];W[2]=d;Aa=W[3];W[3]=t;sa=X[0];X[0]=0;C=X[1];X[1]=0;B=X[2];X[2]=0;xa=X[3];X[3]=0;Qa=ta.blend_enable;ta.blend_enable=!0;N=oa[0];oa[0]=32774;Hb=oa[1];oa[1]=32774;I=ya[0];ya[0]=770;J=ya[1];ya[1]=771;Z=ya[2];ya[2]=773;E=ya[3];ya[3]=1;Q=e.call(this,aa,a,p);fa=ta.depth_enable;ta.depth_enable=Q;L=a.viewport;K=L.x|0;H=L.y|0;P="width"in L?L.width|0:aa.framebufferWidth-K;
wa="height"in L?L.height|0:aa.framebufferHeight-H;O=V[0];V[0]=K;da=V[1];V[1]=H;la=V[2];V[2]=P;z=V[3];V[3]=wa;S=ta.scissor_enable;ta.scissor_enable=!0;ea=ta.stencil_enable;ta.stencil_enable=!1;if(ia=T.profile)$a=performance.now(),b.count++;Ba=R.offset;R.offset=0;ka=R.count;R.count=4;Ea=a.count;Ca=R.instances;R.instances=Ea;Gb=R.primitive;R.primitive=5;na=a.dashLength;ja=M[23];M[23]=na;Da=a.dashTexture;mb=M[24];M[24]=Da;ra=a.depth;$c=M[22];M[22]=ra;Zc=a.id;Ec=M[31];M[31]=Zc;hc=a.miterLimit;Jc=M[32];
M[32]=hc;qc=g.call(this,aa,a,p);rc=M[33];M[33]=qc;fc=a.opacity;pb=M[10];M[10]=fc;fb=aa.pixelRatio;Pc=M[34];M[34]=fb;$b=a.scale;hb=M[6];M[6]=$b;Ob=a.scaleFract;bb=M[7];M[7]=Ob;qb=a.thickness;Va=M[21];M[21]=qb;Kc=a.translate;Ib=M[8];M[8]=Kc;Kb=a.translateFract;sc=M[9];M[9]=Kb;Pb=w.call(this,aa,a,p);kb=M[3];M[3]=Pb;ma.buffer=a.positionBuffer;Fb=!1;Db=null;zb=0;ib=!1;Qb=ac=0;sb=1;Sa=0;Vb=5126;rb=jb=lc=tb=0;qa(ma)?(Fb=!0,Db=U.createStream(34962,ma),Vb=Db.dtype):(Db=U.getBuffer(ma))?Vb=Db.dtype:"constant"in
ma?(sb=2,"number"===typeof ma.constant?(lc=ma.constant,jb=rb=tb=0):(lc=0<ma.constant.length?ma.constant[0]:0,jb=1<ma.constant.length?ma.constant[1]:0,rb=2<ma.constant.length?ma.constant[2]:0,tb=3<ma.constant.length?ma.constant[3]:0)):(Db=qa(ma.buffer)?U.createStream(34962,ma.buffer):U.getBuffer(ma.buffer),Vb="type"in ma?Ia[ma.type]:Db.dtype,ib=!!ma.normalized,Qb=ma.size|0,ac=ma.offset|0,Sa=ma.stride|0,zb=ma.divisor|0);Ja=u.buffer;u.buffer=Db;ub=u.divisor;u.divisor=zb;La=u.normalized;u.normalized=
ib;db=u.offset;u.offset=ac;gb=u.size;u.size=Qb;Na=u.state;u.state=sb;lb=u.stride;u.stride=Sa;Wa=u.type;u.type=Vb;wb=u.w;u.w=tb;vb=u.x;u.x=lc;Pa=u.y;u.y=jb;Dc=u.z;u.z=rb;za.buffer=a.positionFractBuffer;Ua=!1;Lb=null;Eb=0;Ma=!1;Ya=yd=0;Mb=1;Nb=0;nb=5126;xb=Ra=bc=Oa=0;qa(za)?(Ua=!0,Lb=U.createStream(34962,za),nb=Lb.dtype):(Lb=U.getBuffer(za))?nb=Lb.dtype:"constant"in za?(Mb=2,"number"===typeof za.constant?(bc=za.constant,Ra=xb=Oa=0):(bc=0<za.constant.length?za.constant[0]:0,Ra=1<za.constant.length?za.constant[1]:
0,xb=2<za.constant.length?za.constant[2]:0,Oa=3<za.constant.length?za.constant[3]:0)):(Lb=qa(za.buffer)?U.createStream(34962,za.buffer):U.getBuffer(za.buffer),nb="type"in za?Ia[za.type]:Lb.dtype,Ma=!!za.normalized,Ya=za.size|0,yd=za.offset|0,Nb=za.stride|0,Eb=za.divisor|0);yb=pa.buffer;pa.buffer=Lb;Ta=pa.divisor;pa.divisor=Eb;ob=pa.normalized;pa.normalized=Ma;ic=pa.offset;pa.offset=yd;Bc=pa.size;pa.size=Ya;wc=pa.state;pa.state=Mb;cb=pa.stride;pa.stride=Nb;mc=pa.type;pa.type=nb;Mc=pa.w;pa.w=Oa;Xa=
pa.x;pa.x=bc;Qc=pa.y;pa.y=Ra;Bb=pa.z;pa.z=xb;Fa.buffer=a.positionBuffer;Za=!1;Xb=null;uc=0;Yb=!1;Nc=Rb=0;Sb=1;Ld=0;Fc=5126;vd=ad=Rc=ud=0;qa(Fa)?(Za=!0,Xb=U.createStream(34962,Fa),Fc=Xb.dtype):(Xb=U.getBuffer(Fa))?Fc=Xb.dtype:"constant"in Fa?(Sb=2,"number"===typeof Fa.constant?(Rc=Fa.constant,ad=vd=ud=0):(Rc=0<Fa.constant.length?Fa.constant[0]:0,ad=1<Fa.constant.length?Fa.constant[1]:0,vd=2<Fa.constant.length?Fa.constant[2]:0,ud=3<Fa.constant.length?Fa.constant[3]:0)):(Xb=qa(Fa.buffer)?U.createStream(34962,
Fa.buffer):U.getBuffer(Fa.buffer),Fc="type"in Fa?Ia[Fa.type]:Xb.dtype,Yb=!!Fa.normalized,Nc=Fa.size|0,Rb=Fa.offset|0,Ld=Fa.stride|0,uc=Fa.divisor|0);pc=h.buffer;h.buffer=Xb;xc=h.divisor;h.divisor=uc;jc=h.normalized;h.normalized=Yb;ab=h.offset;h.offset=Rb;tc=h.size;h.size=Nc;Ub=h.state;h.state=Sb;Zb=h.stride;h.stride=Ld;gc=h.type;h.type=Fc;kc=h.w;h.w=ud;zc=h.x;h.x=Rc;Cc=h.y;h.y=ad;fd=h.z;h.z=vd;ha.buffer=a.positionFractBuffer;Uc=!1;Vc=null;Wc=0;bd=!1;gd=od=0;cd=1;nc=0;ec=5126;Ac=hd=Yc=dd=0;qa(ha)?
(Uc=!0,Vc=U.createStream(34962,ha),ec=Vc.dtype):(Vc=U.getBuffer(ha))?ec=Vc.dtype:"constant"in ha?(cd=2,"number"===typeof ha.constant?(Yc=ha.constant,hd=Ac=dd=0):(Yc=0<ha.constant.length?ha.constant[0]:0,hd=1<ha.constant.length?ha.constant[1]:0,Ac=2<ha.constant.length?ha.constant[2]:0,dd=3<ha.constant.length?ha.constant[3]:0)):(Vc=qa(ha.buffer)?U.createStream(34962,ha.buffer):U.getBuffer(ha.buffer),ec="type"in ha?Ia[ha.type]:Vc.dtype,bd=!!ha.normalized,gd=ha.size|0,od=ha.offset|0,nc=ha.stride|0,Wc=
ha.divisor|0);kd=A.buffer;A.buffer=Vc;Ad=A.divisor;A.divisor=Wc;ze=A.normalized;A.normalized=bd;me=A.offset;A.offset=od;ld=A.size;A.size=gd;Ee=A.state;A.state=cd;Qd=A.stride;A.stride=nc;fe=A.type;A.type=ec;Zd=A.w;A.w=dd;Rd=A.x;A.x=Yc;Kd=A.y;A.y=hd;Hd=A.z;A.z=Ac;Y.buffer=a.colorBuffer;qd=!1;Xc=null;wd=0;td=!1;xd=md=0;Cd=1;Ed=0;ie=5126;je=le=ve=ke=0;qa(Y)?(qd=!0,Xc=U.createStream(34962,Y),ie=Xc.dtype):(Xc=U.getBuffer(Y))?ie=Xc.dtype:"constant"in Y?(Cd=2,"number"===typeof Y.constant?(ve=Y.constant,le=
je=ke=0):(ve=0<Y.constant.length?Y.constant[0]:0,le=1<Y.constant.length?Y.constant[1]:0,je=2<Y.constant.length?Y.constant[2]:0,ke=3<Y.constant.length?Y.constant[3]:0)):(Xc=qa(Y.buffer)?U.createStream(34962,Y.buffer):U.getBuffer(Y.buffer),ie="type"in Y?Ia[Y.type]:Xc.dtype,td=!!Y.normalized,xd=Y.size|0,md=Y.offset|0,Ed=Y.stride|0,wd=Y.divisor|0);ge=n.buffer;n.buffer=Xc;we=n.divisor;n.divisor=wd;de=n.normalized;n.normalized=td;ne=n.offset;n.offset=md;Sc=n.size;n.size=xd;jd=n.state;n.state=Cd;xe=n.stride;
n.stride=Ed;qe=n.type;n.type=ie;Md=n.w;n.w=ke;Sd=n.x;n.x=ve;Td=n.y;n.y=le;Ud=n.z;n.z=je;oe=q.buffer;q.buffer=k;Be=q.divisor;q.divisor=0;Fe=q.normalized;q.normalized=!1;re=q.offset;q.offset=0;Ue=q.size;q.size=0;Ve=q.state;q.state=1;Qe=q.stride;q.stride=8;ye=q.type;q.type=5126;Ie=q.w;q.w=0;Ke=q.x;q.x=0;Le=q.y;q.y=0;Me=q.z;q.z=0;Je=m.buffer;m.buffer=f;Nd=m.divisor;m.divisor=0;$d=m.normalized;m.normalized=!1;ce=m.offset;m.offset=4;ee=m.size;m.size=0;Ne=m.state;m.state=1;Id=m.stride;m.stride=8;Vd=m.type;
m.type=5126;Ge=m.w;m.w=0;Oe=m.x;m.x=0;df=m.y;m.y=0;bf=m.z;m.z=0;We=G.vert;G.vert=20;Re=G.frag;G.frag=19;T.dirty=!0;c(aa,a,p);aa.viewportWidth=D;aa.viewportHeight=v;W[0]=F;W[1]=y;W[2]=ca;W[3]=Aa;X[0]=sa;X[1]=C;X[2]=B;X[3]=xa;ta.blend_enable=Qa;oa[0]=N;oa[1]=Hb;ya[0]=I;ya[1]=J;ya[2]=Z;ya[3]=E;ta.depth_enable=fa;V[0]=O;V[1]=da;V[2]=la;V[3]=z;ta.scissor_enable=S;ta.stencil_enable=ea;ia&&(b.cpuTime+=performance.now()-$a);R.offset=Ba;R.count=ka;R.instances=Ca;R.primitive=Gb;M[23]=ja;M[24]=mb;M[22]=$c;M[31]=
Ec;M[32]=Jc;M[33]=rc;M[10]=pb;M[34]=Pc;M[6]=hb;M[7]=bb;M[21]=Va;M[8]=Ib;M[9]=sc;M[3]=kb;Fb&&U.destroyStream(Db);u.buffer=Ja;u.divisor=ub;u.normalized=La;u.offset=db;u.size=gb;u.state=Na;u.stride=lb;u.type=Wa;u.w=wb;u.x=vb;u.y=Pa;u.z=Dc;Ua&&U.destroyStream(Lb);pa.buffer=yb;pa.divisor=Ta;pa.normalized=ob;pa.offset=ic;pa.size=Bc;pa.state=wc;pa.stride=cb;pa.type=mc;pa.w=Mc;pa.x=Xa;pa.y=Qc;pa.z=Bb;Za&&U.destroyStream(Xb);h.buffer=pc;h.divisor=xc;h.normalized=jc;h.offset=ab;h.size=tc;h.state=Ub;h.stride=
Zb;h.type=gc;h.w=kc;h.x=zc;h.y=Cc;h.z=fd;Uc&&U.destroyStream(Vc);A.buffer=kd;A.divisor=Ad;A.normalized=ze;A.offset=me;A.size=ld;A.state=Ee;A.stride=Qd;A.type=fe;A.w=Zd;A.x=Rd;A.y=Kd;A.z=Hd;qd&&U.destroyStream(Xc);n.buffer=ge;n.divisor=we;n.normalized=de;n.offset=ne;n.size=Sc;n.state=jd;n.stride=xe;n.type=qe;n.w=Md;n.x=Sd;n.y=Td;n.z=Ud;q.buffer=oe;q.divisor=Be;q.normalized=Fe;q.offset=re;q.size=Ue;q.state=Ve;q.stride=Qe;q.type=ye;q.w=Ie;q.x=Ke;q.y=Le;q.z=Me;m.buffer=Je;m.divisor=Nd;m.normalized=$d;
m.offset=ce;m.size=ee;m.state=Ne;m.stride=Id;m.type=Vd;m.w=Ge;m.x=Oe;m.y=df;m.z=bf;G.vert=We;G.frag=Re;T.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,b,x,l,k,f,d,e,g,w,u,pa,h,A,n,q,m,E,J,H,z,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T){var R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa,ha,Y,va,Ka,Ga,eb,
ba;R=a.attributes;N=a.buffer;F=a.context;O=a.current;P=a.draw;qa=a.elements;ta=a.extensions;G=a.framebuffer;M=a.gl;da=a.isBufferArgs;X=a.next;ja=a.shader;oa=a.uniforms;Da=a.vao;ya=X.blend_color;Z=O.blend_color;Ca=X.blend_equation;ia=O.blend_equation;ka=X.blend_func;Ba=O.blend_func;Qa=X.colorMask;Aa=O.colorMask;Hb=X.depth_range;$a=O.depth_range;V=X.polygonOffset_offset;ca=O.polygonOffset_offset;sa=X.sample_coverage;wa=O.sample_coverage;Ea=X.scissor_box;mb=O.scissor_box;Gb=X.stencil_func;fa=O.stencil_func;
W=X.stencil_opBack;xa=O.stencil_opBack;Ia=X.stencil_opFront;ma=O.stencil_opFront;za=X.viewport;Fa=O.viewport;ha={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};va={divisor:1,offset:8,stride:8};Ka={divisor:1,offset:4,stride:4};Ga={divisor:1,offset:16,stride:8};eb={divisor:1,offset:24,stride:8};ba={divisor:1,offset:0,stride:8};return{batch:function(a,e){var l,x,d,g,h,u;l=G.next;l!==G.cur&&(l?M.bindFramebuffer(36160,l.framebuffer):
M.bindFramebuffer(36160,null),G.cur=l);if(O.dirty){var A,w,m,n,pa,J,q,E,ga,za,ya,oa,ua,ka,Ea,Ca,ja,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb;A=X.dither;A!==O.dither&&(A?M.enable(3024):M.disable(3024),O.dither=A);w=X.depth_func;w!==O.depth_func&&(M.depthFunc(w),O.depth_func=w);m=Hb[0];n=Hb[1];if(m!==$a[0]||n!==$a[1])M.depthRange(m,n),$a[0]=m,$a[1]=n;pa=X.depth_mask;pa!==O.depth_mask&&(M.depthMask(pa),O.depth_mask=pa);J=Qa[0];q=Qa[1];E=Qa[2];ga=Qa[3];if(J!==Aa[0]||q!==Aa[1]||E!==Aa[2]||ga!==Aa[3])M.colorMask(J,
q,E,ga),Aa[0]=J,Aa[1]=q,Aa[2]=E,Aa[3]=ga;za=X.frontFace;za!==O.frontFace&&(M.frontFace(za),O.frontFace=za);ya=X.lineWidth;ya!==O.lineWidth&&(M.lineWidth(ya),O.lineWidth=ya);oa=X.polygonOffset_enable;oa!==O.polygonOffset_enable&&(oa?M.enable(32823):M.disable(32823),O.polygonOffset_enable=oa);ua=V[0];ka=V[1];if(ua!==ca[0]||ka!==ca[1])M.polygonOffset(ua,ka),ca[0]=ua,ca[1]=ka;Ea=X.sample_alpha;Ea!==O.sample_alpha&&(Ea?M.enable(32926):M.disable(32926),O.sample_alpha=Ea);Ca=X.sample_enable;Ca!==O.sample_enable&&
(Ca?M.enable(32928):M.disable(32928),O.sample_enable=Ca);ja=sa[0];Yd=sa[1];if(ja!==wa[0]||Yd!==wa[1])M.sampleCoverage(ja,Yd),wa[0]=ja,wa[1]=Yd;Jd=X.stencil_mask;Jd!==O.stencil_mask&&(M.stencilMask(Jd),O.stencil_mask=Jd);pd=Gb[0];ed=Gb[1];sd=Gb[2];if(pd!==fa[0]||ed!==fa[1]||sd!==fa[2])M.stencilFunc(pd,ed,sd),fa[0]=pd,fa[1]=ed,fa[2]=sd;Oc=Ia[0];rd=Ia[1];Hc=Ia[2];id=Ia[3];if(Oc!==ma[0]||rd!==ma[1]||Hc!==ma[2]||id!==ma[3])M.stencilOpSeparate(Oc,rd,Hc,id),ma[0]=Oc,ma[1]=rd,ma[2]=Hc,ma[3]=id;Tc=W[0];nd=
W[1];Wb=W[2];Jb=W[3];if(Tc!==xa[0]||nd!==xa[1]||Wb!==xa[2]||Jb!==xa[3])M.stencilOpSeparate(Tc,nd,Wb,Jb),xa[0]=Tc,xa[1]=nd,xa[2]=Wb,xa[3]=Jb}M.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;M.enable(3042);O.blend_enable=!0;M.blendEquationSeparate(32774,32774);ia[0]=32774;ia[1]=32774;M.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;M.enable(2884);O.cull_enable=!0;M.cullFace(1029);O.cull_face=1029;M.enable(3089);O.scissor_enable=!0;M.disable(2960);O.stencil_enable=!1;if(x=O.profile)d=
performance.now(),b.count+=e;M.useProgram(H.program);g=ta.angle_instanced_arrays;var vc,Ab,yc,Cb,Lc;Da.setVAO(null);vc=K.location;Ab=R[vc];Ab.buffer||M.enableVertexAttribArray(vc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==k||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)M.bindBuffer(34962,k.buffer),M.vertexAttribPointer(vc,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=k,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(g.vertexAttribDivisorANGLE(vc,0),Ab.divisor=0);yc=t.location;Cb=
R[yc];Cb.buffer||M.enableVertexAttribArray(yc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==f||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)M.bindBuffer(34962,f.buffer),M.vertexAttribPointer(yc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=f,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(g.vertexAttribDivisorANGLE(yc,0),Cb.divisor=0);(Lc=P.elements)?M.bindBuffer(34963,Lc.buffer.buffer):Da.currentVAO&&(Lc=qa.getElements(Da.currentVAO.elements))&&M.bindBuffer(34963,Lc.buffer.buffer);
for(h=0;h<e;++h){u=a[h];var oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc;oc=u.viewport;Ic=oc.x|0;$c=oc.y|0;Zc="width"in
oc?oc.width|0:F.framebufferWidth-Ic;Ec="height"in oc?oc.height|0:F.framebufferHeight-$c;hc=F.viewportWidth;F.viewportWidth=Zc;Jc=F.viewportHeight;F.viewportHeight=Ec;M.viewport(Ic,$c,Zc,Ec);Fa[0]=Ic;Fa[1]=$c;Fa[2]=Zc;Fa[3]=Ec;(qc=z.call(this,F,u,h))?M.enable(2929):M.disable(2929);O.depth_enable=qc;rc=u.viewport;fc=rc.x|0;pb=rc.y|0;fb="width"in rc?rc.width|0:F.framebufferWidth-fc;Pc="height"in rc?rc.height|0:F.framebufferHeight-pb;M.scissor(fc,pb,fb,Pc);mb[0]=fc;mb[1]=pb;mb[2]=fb;mb[3]=Pc;va.buffer=
u.positionBuffer;$b=!1;hb=null;Ob=0;bb=!1;Va=qb=0;Kc=1;Ib=0;Kb=5126;Fb=kb=Pb=sc=0;da(va)?($b=!0,hb=N.createStream(34962,va),Kb=hb.dtype):(hb=N.getBuffer(va))?Kb=hb.dtype:"constant"in va?(Kc=2,"number"===typeof va.constant?(Pb=va.constant,kb=Fb=sc=0):(Pb=0<va.constant.length?va.constant[0]:0,kb=1<va.constant.length?va.constant[1]:0,Fb=2<va.constant.length?va.constant[2]:0,sc=3<va.constant.length?va.constant[3]:0)):(hb=da(va.buffer)?N.createStream(34962,va.buffer):N.getBuffer(va.buffer),Kb="type"in
va?ha[va.type]:hb.dtype,bb=!!va.normalized,Va=va.size|0,qb=va.offset|0,Ib=va.stride|0,Ob=va.divisor|0);Db=L.location;zb=R[Db];if(1===Kc){zb.buffer||M.enableVertexAttribArray(Db);ib=Va||2;if(zb.type!==Kb||zb.size!==ib||zb.buffer!==hb||zb.normalized!==bb||zb.offset!==qb||zb.stride!==Ib)M.bindBuffer(34962,hb.buffer),M.vertexAttribPointer(Db,ib,Kb,bb,Ib,qb),zb.type=Kb,zb.size=ib,zb.buffer=hb,zb.normalized=bb,zb.offset=qb,zb.stride=Ib;zb.divisor!==Ob&&(g.vertexAttribDivisorANGLE(Db,Ob),zb.divisor=Ob)}else if(zb.buffer&&
(M.disableVertexAttribArray(Db),zb.buffer=null),zb.x!==Pb||zb.y!==kb||zb.z!==Fb||zb.w!==sc)M.vertexAttrib4f(Db,Pb,kb,Fb,sc),zb.x=Pb,zb.y=kb,zb.z=Fb,zb.w=sc;Ga.buffer=u.positionBuffer;ac=!1;Qb=null;sb=0;Sa=!1;tb=Vb=0;lc=1;jb=0;rb=5126;db=La=ub=Ja=0;da(Ga)?(ac=!0,Qb=N.createStream(34962,Ga),rb=Qb.dtype):(Qb=N.getBuffer(Ga))?rb=Qb.dtype:"constant"in Ga?(lc=2,"number"===typeof Ga.constant?(ub=Ga.constant,La=db=Ja=0):(ub=0<Ga.constant.length?Ga.constant[0]:0,La=1<Ga.constant.length?Ga.constant[1]:0,db=
2<Ga.constant.length?Ga.constant[2]:0,Ja=3<Ga.constant.length?Ga.constant[3]:0)):(Qb=da(Ga.buffer)?N.createStream(34962,Ga.buffer):N.getBuffer(Ga.buffer),rb="type"in Ga?ha[Ga.type]:Qb.dtype,Sa=!!Ga.normalized,tb=Ga.size|0,Vb=Ga.offset|0,jb=Ga.stride|0,sb=Ga.divisor|0);gb=C.location;Na=R[gb];if(1===lc){Na.buffer||M.enableVertexAttribArray(gb);lb=tb||2;if(Na.type!==rb||Na.size!==lb||Na.buffer!==Qb||Na.normalized!==Sa||Na.offset!==Vb||Na.stride!==jb)M.bindBuffer(34962,Qb.buffer),M.vertexAttribPointer(gb,
lb,rb,Sa,jb,Vb),Na.type=rb,Na.size=lb,Na.buffer=Qb,Na.normalized=Sa,Na.offset=Vb,Na.stride=jb;Na.divisor!==sb&&(g.vertexAttribDivisorANGLE(gb,sb),Na.divisor=sb)}else if(Na.buffer&&(M.disableVertexAttribArray(gb),Na.buffer=null),Na.x!==ub||Na.y!==La||Na.z!==db||Na.w!==Ja)M.vertexAttrib4f(gb,ub,La,db,Ja),Na.x=ub,Na.y=La,Na.z=db,Na.w=Ja;eb.buffer=u.positionBuffer;Wa=!1;wb=null;vb=0;Pa=!1;Ua=Dc=0;Lb=1;Eb=0;Ma=5126;Nb=Mb=Ya=yd=0;da(eb)?(Wa=!0,wb=N.createStream(34962,eb),Ma=wb.dtype):(wb=N.getBuffer(eb))?
Ma=wb.dtype:"constant"in eb?(Lb=2,"number"===typeof eb.constant?(Ya=eb.constant,Mb=Nb=yd=0):(Ya=0<eb.constant.length?eb.constant[0]:0,Mb=1<eb.constant.length?eb.constant[1]:0,Nb=2<eb.constant.length?eb.constant[2]:0,yd=3<eb.constant.length?eb.constant[3]:0)):(wb=da(eb.buffer)?N.createStream(34962,eb.buffer):N.getBuffer(eb.buffer),Ma="type"in eb?ha[eb.type]:wb.dtype,Pa=!!eb.normalized,Ua=eb.size|0,Dc=eb.offset|0,Eb=eb.stride|0,vb=eb.divisor|0);nb=D.location;Oa=R[nb];if(1===Lb){Oa.buffer||M.enableVertexAttribArray(nb);
bc=Ua||2;if(Oa.type!==Ma||Oa.size!==bc||Oa.buffer!==wb||Oa.normalized!==Pa||Oa.offset!==Dc||Oa.stride!==Eb)M.bindBuffer(34962,wb.buffer),M.vertexAttribPointer(nb,bc,Ma,Pa,Eb,Dc),Oa.type=Ma,Oa.size=bc,Oa.buffer=wb,Oa.normalized=Pa,Oa.offset=Dc,Oa.stride=Eb;Oa.divisor!==vb&&(g.vertexAttribDivisorANGLE(nb,vb),Oa.divisor=vb)}else if(Oa.buffer&&(M.disableVertexAttribArray(nb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Mb||Oa.z!==Nb||Oa.w!==yd)M.vertexAttrib4f(nb,Ya,Mb,Nb,yd),Oa.x=Ya,Oa.y=Mb,Oa.z=Nb,Oa.w=yd;ba.buffer=
u.positionBuffer;Ra=!1;xb=null;yb=0;Ta=!1;ic=ob=0;Bc=1;wc=0;cb=5126;Qc=Xa=Mc=mc=0;da(ba)?(Ra=!0,xb=N.createStream(34962,ba),cb=xb.dtype):(xb=N.getBuffer(ba))?cb=xb.dtype:"constant"in ba?(Bc=2,"number"===typeof ba.constant?(Mc=ba.constant,Xa=Qc=mc=0):(Mc=0<ba.constant.length?ba.constant[0]:0,Xa=1<ba.constant.length?ba.constant[1]:0,Qc=2<ba.constant.length?ba.constant[2]:0,mc=3<ba.constant.length?ba.constant[3]:0)):(xb=da(ba.buffer)?N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),cb="type"in
ba?ha[ba.type]:xb.dtype,Ta=!!ba.normalized,ic=ba.size|0,ob=ba.offset|0,wc=ba.stride|0,yb=ba.divisor|0);Bb=la.location;Za=R[Bb];if(1===Bc){Za.buffer||M.enableVertexAttribArray(Bb);Xb=ic||2;if(Za.type!==cb||Za.size!==Xb||Za.buffer!==xb||Za.normalized!==Ta||Za.offset!==ob||Za.stride!==wc)M.bindBuffer(34962,xb.buffer),M.vertexAttribPointer(Bb,Xb,cb,Ta,wc,ob),Za.type=cb,Za.size=Xb,Za.buffer=xb,Za.normalized=Ta,Za.offset=ob,Za.stride=wc;Za.divisor!==yb&&(g.vertexAttribDivisorANGLE(Bb,yb),Za.divisor=yb)}else if(Za.buffer&&
(M.disableVertexAttribArray(Bb),Za.buffer=null),Za.x!==Mc||Za.y!==Xa||Za.z!==Qc||Za.w!==mc)M.vertexAttrib4f(Bb,Mc,Xa,Qc,mc),Za.x=Mc,Za.y=Xa,Za.z=Qc,Za.w=mc;Y.buffer=u.colorBuffer;uc=!1;Yb=null;Rb=0;Nc=!1;Ld=Sb=0;Fc=1;ud=0;Rc=5126;xc=pc=vd=ad=0;da(Y)?(uc=!0,Yb=N.createStream(34962,Y),Rc=Yb.dtype):(Yb=N.getBuffer(Y))?Rc=Yb.dtype:"constant"in Y?(Fc=2,"number"===typeof Y.constant?(vd=Y.constant,pc=xc=ad=0):(vd=0<Y.constant.length?Y.constant[0]:0,pc=1<Y.constant.length?Y.constant[1]:0,xc=2<Y.constant.length?
Y.constant[2]:0,ad=3<Y.constant.length?Y.constant[3]:0)):(Yb=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),Rc="type"in Y?ha[Y.type]:Yb.dtype,Nc=!!Y.normalized,Ld=Y.size|0,Sb=Y.offset|0,ud=Y.stride|0,Rb=Y.divisor|0);jc=S.location;ab=R[jc];if(1===Fc){ab.buffer||M.enableVertexAttribArray(jc);tc=Ld||4;if(ab.type!==Rc||ab.size!==tc||ab.buffer!==Yb||ab.normalized!==Nc||ab.offset!==Sb||ab.stride!==ud)M.bindBuffer(34962,Yb.buffer),M.vertexAttribPointer(jc,tc,Rc,Nc,ud,Sb),ab.type=Rc,ab.size=
tc,ab.buffer=Yb,ab.normalized=Nc,ab.offset=Sb,ab.stride=ud;ab.divisor!==Rb&&(g.vertexAttribDivisorANGLE(jc,Rb),ab.divisor=Rb)}else if(ab.buffer&&(M.disableVertexAttribArray(jc),ab.buffer=null),ab.x!==vd||ab.y!==pc||ab.z!==xc||ab.w!==ad)M.vertexAttrib4f(jc,vd,pc,xc,ad),ab.x=vd,ab.y=pc,ab.z=xc,ab.w=ad;Ka.buffer=u.colorBuffer;Ub=!1;Zb=null;gc=0;kc=!1;Cc=zc=0;fd=1;Uc=0;Vc=5126;gd=od=bd=Wc=0;da(Ka)?(Ub=!0,Zb=N.createStream(34962,Ka),Vc=Zb.dtype):(Zb=N.getBuffer(Ka))?Vc=Zb.dtype:"constant"in Ka?(fd=2,"number"===
typeof Ka.constant?(bd=Ka.constant,od=gd=Wc=0):(bd=0<Ka.constant.length?Ka.constant[0]:0,od=1<Ka.constant.length?Ka.constant[1]:0,gd=2<Ka.constant.length?Ka.constant[2]:0,Wc=3<Ka.constant.length?Ka.constant[3]:0)):(Zb=da(Ka.buffer)?N.createStream(34962,Ka.buffer):N.getBuffer(Ka.buffer),Vc="type"in Ka?ha[Ka.type]:Zb.dtype,kc=!!Ka.normalized,Cc=Ka.size|0,zc=Ka.offset|0,Uc=Ka.stride|0,gc=Ka.divisor|0);cd=Q.location;nc=R[cd];if(1===fd){nc.buffer||M.enableVertexAttribArray(cd);ec=Cc||4;if(nc.type!==Vc||
nc.size!==ec||nc.buffer!==Zb||nc.normalized!==kc||nc.offset!==zc||nc.stride!==Uc)M.bindBuffer(34962,Zb.buffer),M.vertexAttribPointer(cd,ec,Vc,kc,Uc,zc),nc.type=Vc,nc.size=ec,nc.buffer=Zb,nc.normalized=kc,nc.offset=zc,nc.stride=Uc;nc.divisor!==gc&&(g.vertexAttribDivisorANGLE(cd,gc),nc.divisor=gc)}else if(nc.buffer&&(M.disableVertexAttribArray(cd),nc.buffer=null),nc.x!==bd||nc.y!==od||nc.z!==gd||nc.w!==Wc)M.vertexAttrib4f(cd,bd,od,gd,Wc),nc.x=bd,nc.y=od,nc.z=gd,nc.w=Wc;dd=u.scale;Yc=dd[0];Ac=dd[1];
h&&hd===Yc&&kd===Ac||(hd=Yc,kd=Ac,M.uniform2f(na.location,Yc,Ac));Ad=u.translate;ze=Ad[0];ld=Ad[1];h&&me===ze&&Ee===ld||(me=ze,Ee=ld,M.uniform2f(aa.location,ze,ld));Qd=u.thickness;h&&fe===Qd||(fe=Qd,M.uniform1f(U.location,Qd));Zd=u.depth;h&&Rd===Zd||(Rd=Zd,M.uniform1f(I.location,Zd));Kd=y.call(this,F,u,h);Hd=Kd[0];Xc=Kd[1];td=Kd[2];xd=Kd[3];h&&qd===Hd&&wd===Xc&&md===td&&Cd===xd||(qd=Hd,wd=Xc,md=td,Cd=xd,M.uniform4f(T.location,Hd,Xc,td,xd));Ed=u.miterLimit;h&&ie===Ed||(ie=Ed,M.uniform1f(p.location,
Ed));ke=v.call(this,F,u,h);h&&ve===ke||(ve=ke,M.uniform1f(c.location,ke));le=u.dashLength;h&&je===le||(je=le,M.uniform1f(B.location,le));ge=u.opacity;h&&we===ge||(we=ge,M.uniform1f(r.location,ge));(de=u.dashTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);ne=de._texture;M.uniform1i(ra.location,ne.bind());Sc=u.count;0<Sc?Lc?g.drawElementsInstancedANGLE(5,4,Lc.type,0<<(Lc.type-5121>>1),Sc):g.drawArraysInstancedANGLE(5,0,4,Sc):0>Sc&&(Lc?M.drawElements(5,4,Lc.type,0<<(Lc.type-5121>>1)):M.drawArrays(5,
0,4));F.viewportWidth=hc;F.viewportHeight=Jc;$b&&N.destroyStream(hb);ac&&N.destroyStream(Qb);Wa&&N.destroyStream(wb);Ra&&N.destroyStream(xb);uc&&N.destroyStream(Yb);Ub&&N.destroyStream(Zb);ne.unbind()}O.dirty=!0;Da.setVAO(null);x&&(b.cpuTime+=performance.now()-d)},draw:function(a){var g,h,v,u,y,A,w,m,n,pa,J,q,E,ga,H,za,z,ya,oa,ea,ua,ka,Ea,Ca,ja,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,
lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld;g=G.next;g!==G.cur&&(g?M.bindFramebuffer(36160,g.framebuffer):M.bindFramebuffer(36160,null),G.cur=g);if(O.dirty){var Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac;Fc=X.dither;Fc!==O.dither&&(Fc?M.enable(3024):M.disable(3024),O.dither=Fc);ud=X.depth_func;ud!==O.depth_func&&(M.depthFunc(ud),O.depth_func=ud);Rc=Hb[0];
ad=Hb[1];if(Rc!==$a[0]||ad!==$a[1])M.depthRange(Rc,ad),$a[0]=Rc,$a[1]=ad;vd=X.depth_mask;vd!==O.depth_mask&&(M.depthMask(vd),O.depth_mask=vd);pc=Qa[0];xc=Qa[1];jc=Qa[2];ab=Qa[3];if(pc!==Aa[0]||xc!==Aa[1]||jc!==Aa[2]||ab!==Aa[3])M.colorMask(pc,xc,jc,ab),Aa[0]=pc,Aa[1]=xc,Aa[2]=jc,Aa[3]=ab;tc=X.frontFace;tc!==O.frontFace&&(M.frontFace(tc),O.frontFace=tc);Ub=X.lineWidth;Ub!==O.lineWidth&&(M.lineWidth(Ub),O.lineWidth=Ub);Zb=X.polygonOffset_enable;Zb!==O.polygonOffset_enable&&(Zb?M.enable(32823):M.disable(32823),
O.polygonOffset_enable=Zb);gc=V[0];kc=V[1];if(gc!==ca[0]||kc!==ca[1])M.polygonOffset(gc,kc),ca[0]=gc,ca[1]=kc;zc=X.sample_alpha;zc!==O.sample_alpha&&(zc?M.enable(32926):M.disable(32926),O.sample_alpha=zc);Cc=X.sample_enable;Cc!==O.sample_enable&&(Cc?M.enable(32928):M.disable(32928),O.sample_enable=Cc);fd=sa[0];Uc=sa[1];if(fd!==wa[0]||Uc!==wa[1])M.sampleCoverage(fd,Uc),wa[0]=fd,wa[1]=Uc;Vc=X.stencil_mask;Vc!==O.stencil_mask&&(M.stencilMask(Vc),O.stencil_mask=Vc);Wc=Gb[0];bd=Gb[1];od=Gb[2];if(Wc!==
fa[0]||bd!==fa[1]||od!==fa[2])M.stencilFunc(Wc,bd,od),fa[0]=Wc,fa[1]=bd,fa[2]=od;gd=Ia[0];cd=Ia[1];nc=Ia[2];ec=Ia[3];if(gd!==ma[0]||cd!==ma[1]||nc!==ma[2]||ec!==ma[3])M.stencilOpSeparate(gd,cd,nc,ec),ma[0]=gd,ma[1]=cd,ma[2]=nc,ma[3]=ec;dd=W[0];Yc=W[1];hd=W[2];Ac=W[3];if(dd!==xa[0]||Yc!==xa[1]||hd!==xa[2]||Ac!==xa[3])M.stencilOpSeparate(dd,Yc,hd,Ac),xa[0]=dd,xa[1]=Yc,xa[2]=hd,xa[3]=Ac}h=a.viewport;v=h.x|0;u=h.y|0;y="width"in h?h.width|0:F.framebufferWidth-v;A="height"in h?h.height|0:F.framebufferHeight-
u;w=F.viewportWidth;F.viewportWidth=y;m=F.viewportHeight;F.viewportHeight=A;M.viewport(v,u,y,A);Fa[0]=v;Fa[1]=u;Fa[2]=y;Fa[3]=A;M.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;M.enable(3042);O.blend_enable=!0;M.blendEquationSeparate(32774,32774);ia[0]=32774;ia[1]=32774;M.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;M.enable(2884);O.cull_enable=!0;M.cullFace(1029);O.cull_face=1029;(n=x.call(this,F,a,0))?M.enable(2929):M.disable(2929);O.depth_enable=n;pa=a.viewport;J=pa.x|
0;q=pa.y|0;E="width"in pa?pa.width|0:F.framebufferWidth-J;ga="height"in pa?pa.height|0:F.framebufferHeight-q;M.scissor(J,q,E,ga);mb[0]=J;mb[1]=q;mb[2]=E;mb[3]=ga;M.enable(3089);O.scissor_enable=!0;M.disable(2960);O.stencil_enable=!1;if(H=O.profile)za=performance.now(),b.count++;M.useProgram(l.program);z=ta.angle_instanced_arrays;Da.setVAO(null);va.buffer=a.positionBuffer;ya=!1;oa=null;ea=0;ua=!1;Ea=ka=0;Ca=1;ja=0;Jd=5126;Oc=sd=ed=pd=0;da(va)?(ya=!0,oa=N.createStream(34962,va),Jd=oa.dtype):(oa=N.getBuffer(va))?
Jd=oa.dtype:"constant"in va?(Ca=2,"number"===typeof va.constant?(ed=va.constant,sd=Oc=pd=0):(ed=0<va.constant.length?va.constant[0]:0,sd=1<va.constant.length?va.constant[1]:0,Oc=2<va.constant.length?va.constant[2]:0,pd=3<va.constant.length?va.constant[3]:0)):(oa=da(va.buffer)?N.createStream(34962,va.buffer):N.getBuffer(va.buffer),Jd="type"in va?ha[va.type]:oa.dtype,ua=!!va.normalized,Ea=va.size|0,ka=va.offset|0,ja=va.stride|0,ea=va.divisor|0);rd=L.location;Hc=R[rd];if(1===Ca){Hc.buffer||M.enableVertexAttribArray(rd);
id=Ea||2;if(Hc.type!==Jd||Hc.size!==id||Hc.buffer!==oa||Hc.normalized!==ua||Hc.offset!==ka||Hc.stride!==ja)M.bindBuffer(34962,oa.buffer),M.vertexAttribPointer(rd,id,Jd,ua,ja,ka),Hc.type=Jd,Hc.size=id,Hc.buffer=oa,Hc.normalized=ua,Hc.offset=ka,Hc.stride=ja;Hc.divisor!==ea&&(z.vertexAttribDivisorANGLE(rd,ea),Hc.divisor=ea)}else if(Hc.buffer&&(M.disableVertexAttribArray(rd),Hc.buffer=null),Hc.x!==ed||Hc.y!==sd||Hc.z!==Oc||Hc.w!==pd)M.vertexAttrib4f(rd,ed,sd,Oc,pd),Hc.x=ed,Hc.y=sd,Hc.z=Oc,Hc.w=pd;Ga.buffer=
a.positionBuffer;Tc=!1;nd=null;Wb=0;Jb=!1;Ab=vc=0;yc=1;Cb=0;Lc=5126;Zc=$c=Ic=oc=0;da(Ga)?(Tc=!0,nd=N.createStream(34962,Ga),Lc=nd.dtype):(nd=N.getBuffer(Ga))?Lc=nd.dtype:"constant"in Ga?(yc=2,"number"===typeof Ga.constant?(Ic=Ga.constant,$c=Zc=oc=0):(Ic=0<Ga.constant.length?Ga.constant[0]:0,$c=1<Ga.constant.length?Ga.constant[1]:0,Zc=2<Ga.constant.length?Ga.constant[2]:0,oc=3<Ga.constant.length?Ga.constant[3]:0)):(nd=da(Ga.buffer)?N.createStream(34962,Ga.buffer):N.getBuffer(Ga.buffer),Lc="type"in
Ga?ha[Ga.type]:nd.dtype,Jb=!!Ga.normalized,Ab=Ga.size|0,vc=Ga.offset|0,Cb=Ga.stride|0,Wb=Ga.divisor|0);Ec=C.location;hc=R[Ec];if(1===yc){hc.buffer||M.enableVertexAttribArray(Ec);Jc=Ab||2;if(hc.type!==Lc||hc.size!==Jc||hc.buffer!==nd||hc.normalized!==Jb||hc.offset!==vc||hc.stride!==Cb)M.bindBuffer(34962,nd.buffer),M.vertexAttribPointer(Ec,Jc,Lc,Jb,Cb,vc),hc.type=Lc,hc.size=Jc,hc.buffer=nd,hc.normalized=Jb,hc.offset=vc,hc.stride=Cb;hc.divisor!==Wb&&(z.vertexAttribDivisorANGLE(Ec,Wb),hc.divisor=Wb)}else if(hc.buffer&&
(M.disableVertexAttribArray(Ec),hc.buffer=null),hc.x!==Ic||hc.y!==$c||hc.z!==Zc||hc.w!==oc)M.vertexAttrib4f(Ec,Ic,$c,Zc,oc),hc.x=Ic,hc.y=$c,hc.z=Zc,hc.w=oc;eb.buffer=a.positionBuffer;qc=!1;rc=null;fc=0;pb=!1;Pc=fb=0;$b=1;hb=0;Ob=5126;Kc=Va=qb=bb=0;da(eb)?(qc=!0,rc=N.createStream(34962,eb),Ob=rc.dtype):(rc=N.getBuffer(eb))?Ob=rc.dtype:"constant"in eb?($b=2,"number"===typeof eb.constant?(qb=eb.constant,Va=Kc=bb=0):(qb=0<eb.constant.length?eb.constant[0]:0,Va=1<eb.constant.length?eb.constant[1]:0,Kc=
2<eb.constant.length?eb.constant[2]:0,bb=3<eb.constant.length?eb.constant[3]:0)):(rc=da(eb.buffer)?N.createStream(34962,eb.buffer):N.getBuffer(eb.buffer),Ob="type"in eb?ha[eb.type]:rc.dtype,pb=!!eb.normalized,Pc=eb.size|0,fb=eb.offset|0,hb=eb.stride|0,fc=eb.divisor|0);Ib=D.location;Kb=R[Ib];if(1===$b){Kb.buffer||M.enableVertexAttribArray(Ib);sc=Pc||2;if(Kb.type!==Ob||Kb.size!==sc||Kb.buffer!==rc||Kb.normalized!==pb||Kb.offset!==fb||Kb.stride!==hb)M.bindBuffer(34962,rc.buffer),M.vertexAttribPointer(Ib,
sc,Ob,pb,hb,fb),Kb.type=Ob,Kb.size=sc,Kb.buffer=rc,Kb.normalized=pb,Kb.offset=fb,Kb.stride=hb;Kb.divisor!==fc&&(z.vertexAttribDivisorANGLE(Ib,fc),Kb.divisor=fc)}else if(Kb.buffer&&(M.disableVertexAttribArray(Ib),Kb.buffer=null),Kb.x!==qb||Kb.y!==Va||Kb.z!==Kc||Kb.w!==bb)M.vertexAttrib4f(Ib,qb,Va,Kc,bb),Kb.x=qb,Kb.y=Va,Kb.z=Kc,Kb.w=bb;ba.buffer=a.positionBuffer;Pb=!1;kb=null;Fb=0;Db=!1;ib=zb=0;ac=1;Qb=0;sb=5126;lc=tb=Vb=Sa=0;da(ba)?(Pb=!0,kb=N.createStream(34962,ba),sb=kb.dtype):(kb=N.getBuffer(ba))?
sb=kb.dtype:"constant"in ba?(ac=2,"number"===typeof ba.constant?(Vb=ba.constant,tb=lc=Sa=0):(Vb=0<ba.constant.length?ba.constant[0]:0,tb=1<ba.constant.length?ba.constant[1]:0,lc=2<ba.constant.length?ba.constant[2]:0,Sa=3<ba.constant.length?ba.constant[3]:0)):(kb=da(ba.buffer)?N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),sb="type"in ba?ha[ba.type]:kb.dtype,Db=!!ba.normalized,ib=ba.size|0,zb=ba.offset|0,Qb=ba.stride|0,Fb=ba.divisor|0);jb=la.location;rb=R[jb];if(1===ac){rb.buffer||M.enableVertexAttribArray(jb);
Ja=ib||2;if(rb.type!==sb||rb.size!==Ja||rb.buffer!==kb||rb.normalized!==Db||rb.offset!==zb||rb.stride!==Qb)M.bindBuffer(34962,kb.buffer),M.vertexAttribPointer(jb,Ja,sb,Db,Qb,zb),rb.type=sb,rb.size=Ja,rb.buffer=kb,rb.normalized=Db,rb.offset=zb,rb.stride=Qb;rb.divisor!==Fb&&(z.vertexAttribDivisorANGLE(jb,Fb),rb.divisor=Fb)}else if(rb.buffer&&(M.disableVertexAttribArray(jb),rb.buffer=null),rb.x!==Vb||rb.y!==tb||rb.z!==lc||rb.w!==Sa)M.vertexAttrib4f(jb,Vb,tb,lc,Sa),rb.x=Vb,rb.y=tb,rb.z=lc,rb.w=Sa;Y.buffer=
a.colorBuffer;ub=!1;La=null;db=0;gb=!1;lb=Na=0;Wa=1;wb=0;vb=5126;Lb=Ua=Dc=Pa=0;da(Y)?(ub=!0,La=N.createStream(34962,Y),vb=La.dtype):(La=N.getBuffer(Y))?vb=La.dtype:"constant"in Y?(Wa=2,"number"===typeof Y.constant?(Dc=Y.constant,Ua=Lb=Pa=0):(Dc=0<Y.constant.length?Y.constant[0]:0,Ua=1<Y.constant.length?Y.constant[1]:0,Lb=2<Y.constant.length?Y.constant[2]:0,Pa=3<Y.constant.length?Y.constant[3]:0)):(La=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),vb="type"in Y?ha[Y.type]:La.dtype,
gb=!!Y.normalized,lb=Y.size|0,Na=Y.offset|0,wb=Y.stride|0,db=Y.divisor|0);Eb=S.location;Ma=R[Eb];if(1===Wa){Ma.buffer||M.enableVertexAttribArray(Eb);yd=lb||4;if(Ma.type!==vb||Ma.size!==yd||Ma.buffer!==La||Ma.normalized!==gb||Ma.offset!==Na||Ma.stride!==wb)M.bindBuffer(34962,La.buffer),M.vertexAttribPointer(Eb,yd,vb,gb,wb,Na),Ma.type=vb,Ma.size=yd,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=wb;Ma.divisor!==db&&(z.vertexAttribDivisorANGLE(Eb,db),Ma.divisor=db)}else if(Ma.buffer&&(M.disableVertexAttribArray(Eb),
Ma.buffer=null),Ma.x!==Dc||Ma.y!==Ua||Ma.z!==Lb||Ma.w!==Pa)M.vertexAttrib4f(Eb,Dc,Ua,Lb,Pa),Ma.x=Dc,Ma.y=Ua,Ma.z=Lb,Ma.w=Pa;Ka.buffer=a.colorBuffer;Ya=!1;Mb=null;Nb=0;nb=!1;bc=Oa=0;Ra=1;xb=0;yb=5126;Bc=ic=ob=Ta=0;da(Ka)?(Ya=!0,Mb=N.createStream(34962,Ka),yb=Mb.dtype):(Mb=N.getBuffer(Ka))?yb=Mb.dtype:"constant"in Ka?(Ra=2,"number"===typeof Ka.constant?(ob=Ka.constant,ic=Bc=Ta=0):(ob=0<Ka.constant.length?Ka.constant[0]:0,ic=1<Ka.constant.length?Ka.constant[1]:0,Bc=2<Ka.constant.length?Ka.constant[2]:
0,Ta=3<Ka.constant.length?Ka.constant[3]:0)):(Mb=da(Ka.buffer)?N.createStream(34962,Ka.buffer):N.getBuffer(Ka.buffer),yb="type"in Ka?ha[Ka.type]:Mb.dtype,nb=!!Ka.normalized,bc=Ka.size|0,Oa=Ka.offset|0,xb=Ka.stride|0,Nb=Ka.divisor|0);wc=Q.location;cb=R[wc];if(1===Ra){cb.buffer||M.enableVertexAttribArray(wc);mc=bc||4;if(cb.type!==yb||cb.size!==mc||cb.buffer!==Mb||cb.normalized!==nb||cb.offset!==Oa||cb.stride!==xb)M.bindBuffer(34962,Mb.buffer),M.vertexAttribPointer(wc,mc,yb,nb,xb,Oa),cb.type=yb,cb.size=
mc,cb.buffer=Mb,cb.normalized=nb,cb.offset=Oa,cb.stride=xb;cb.divisor!==Nb&&(z.vertexAttribDivisorANGLE(wc,Nb),cb.divisor=Nb)}else if(cb.buffer&&(M.disableVertexAttribArray(wc),cb.buffer=null),cb.x!==ob||cb.y!==ic||cb.z!==Bc||cb.w!==Ta)M.vertexAttrib4f(wc,ob,ic,Bc,Ta),cb.x=ob,cb.y=ic,cb.z=Bc,cb.w=Ta;Mc=K.location;Xa=R[Mc];Xa.buffer||M.enableVertexAttribArray(Mc);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==k||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)M.bindBuffer(34962,k.buffer),M.vertexAttribPointer(Mc,
1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=k,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(z.vertexAttribDivisorANGLE(Mc,0),Xa.divisor=0);Qc=t.location;Bb=R[Qc];Bb.buffer||M.enableVertexAttribArray(Qc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==f||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)M.bindBuffer(34962,f.buffer),M.vertexAttribPointer(Qc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=f,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&(z.vertexAttribDivisorANGLE(Qc,
0),Bb.divisor=0);Za=a.scale;M.uniform2f(na.location,Za[0],Za[1]);Xb=a.translate;M.uniform2f(aa.location,Xb[0],Xb[1]);M.uniform1f(U.location,a.thickness);M.uniform1f(I.location,a.depth);uc=d.call(this,F,a,0);M.uniform4f(T.location,uc[0],uc[1],uc[2],uc[3]);M.uniform1f(p.location,a.miterLimit);Yb=e.call(this,F,a,0);M.uniform1f(c.location,Yb);M.uniform1f(B.location,a.dashLength);M.uniform1f(r.location,a.opacity);(Rb=a.dashTexture)&&"framebuffer"===Rb._reglType&&(Rb=Rb.color[0]);Nc=Rb._texture;M.uniform1i(ra.location,
Nc.bind());(Sb=P.elements)?M.bindBuffer(34963,Sb.buffer.buffer):Da.currentVAO&&(Sb=qa.getElements(Da.currentVAO.elements))&&M.bindBuffer(34963,Sb.buffer.buffer);Ld=a.count;0<Ld?Sb?z.drawElementsInstancedANGLE(5,4,Sb.type,0<<(Sb.type-5121>>1),Ld):z.drawArraysInstancedANGLE(5,0,4,Ld):0>Ld&&(Sb?M.drawElements(5,4,Sb.type,0<<(Sb.type-5121>>1)):M.drawArrays(5,0,4));O.dirty=!0;Da.setVAO(null);F.viewportWidth=w;F.viewportHeight=m;H&&(b.cpuTime+=performance.now()-za);ya&&N.destroyStream(oa);Tc&&N.destroyStream(nd);
qc&&N.destroyStream(rc);Pb&&N.destroyStream(kb);ub&&N.destroyStream(La);Ya&&N.destroyStream(Mb);Nc.unbind()},scope:function(a,c,p){var e,l,r,x,d,t,D,v,V,y,G,ca,W,Aa,sa,C,B,xa,Qa,Ia,M,R,Hb,I,ma,T,Z,Q,fa,L,H,K,wa,z,la,Fa,qa,S,ea,U,ia,$a,aa,Ba,Gb,na,ta,Da,mb,ra,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,
ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Se,He,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;e=a.viewport;l=e.x|0;r=e.y|0;x="width"in e?e.width|0:F.framebufferWidth-l;d="height"in e?e.height|0:F.framebufferHeight-r;t=F.viewportWidth;F.viewportWidth=
x;D=F.viewportHeight;F.viewportHeight=d;v=za[0];za[0]=l;V=za[1];za[1]=r;y=za[2];za[2]=x;G=za[3];za[3]=d;ca=ya[0];ya[0]=0;W=ya[1];ya[1]=0;Aa=ya[2];ya[2]=0;sa=ya[3];ya[3]=0;C=X.blend_enable;X.blend_enable=!0;B=Ca[0];Ca[0]=32774;xa=Ca[1];Ca[1]=32774;Qa=ka[0];ka[0]=770;Ia=ka[1];ka[1]=771;M=ka[2];ka[2]=773;R=ka[3];ka[3]=1;Hb=X.cull_enable;X.cull_enable=!0;I=X.cull_face;X.cull_face=1029;ma=g.call(this,F,a,p);T=X.depth_enable;X.depth_enable=ma;Z=a.viewport;Q=Z.x|0;fa=Z.y|0;L="width"in Z?Z.width|0:F.framebufferWidth-
Q;H="height"in Z?Z.height|0:F.framebufferHeight-fa;K=Ea[0];Ea[0]=Q;wa=Ea[1];Ea[1]=fa;z=Ea[2];Ea[2]=L;la=Ea[3];Ea[3]=H;Fa=X.scissor_enable;X.scissor_enable=!0;qa=X.stencil_enable;X.stencil_enable=!1;if(S=O.profile)ea=performance.now(),b.count++;U=P.offset;P.offset=0;ia=P.count;P.count=4;$a=a.count;aa=P.instances;P.instances=$a;Ba=P.primitive;P.primitive=5;Gb=a.dashLength;na=oa[23];oa[23]=Gb;ta=a.dashTexture;Da=oa[24];oa[24]=ta;mb=a.depth;ra=oa[22];oa[22]=mb;pb=a.id;fb=oa[31];oa[31]=pb;Pc=a.miterLimit;
$b=oa[32];oa[32]=Pc;hb=w.call(this,F,a,p);Ob=oa[33];oa[33]=hb;bb=a.opacity;qb=oa[10];oa[10]=bb;Va=F.pixelRatio;Kc=oa[34];oa[34]=Va;Ib=a.scale;Kb=oa[6];oa[6]=Ib;sc=a.scaleFract;Pb=oa[7];oa[7]=sc;kb=a.thickness;Fb=oa[21];oa[21]=kb;Db=a.translate;zb=oa[8];oa[8]=Db;ib=a.translateFract;ac=oa[9];oa[9]=ib;Qb=u.call(this,F,a,p);sb=oa[3];oa[3]=Qb;Y.buffer=a.colorBuffer;Sa=!1;Vb=null;tb=0;lc=!1;rb=jb=0;Ja=1;ub=0;La=5126;lb=Na=gb=db=0;da(Y)?(Sa=!0,Vb=N.createStream(34962,Y),La=Vb.dtype):(Vb=N.getBuffer(Y))?
La=Vb.dtype:"constant"in Y?(Ja=2,"number"===typeof Y.constant?(gb=Y.constant,Na=lb=db=0):(gb=0<Y.constant.length?Y.constant[0]:0,Na=1<Y.constant.length?Y.constant[1]:0,lb=2<Y.constant.length?Y.constant[2]:0,db=3<Y.constant.length?Y.constant[3]:0)):(Vb=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),La="type"in Y?ha[Y.type]:Vb.dtype,lc=!!Y.normalized,rb=Y.size|0,jb=Y.offset|0,ub=Y.stride|0,tb=Y.divisor|0);Wa=pa.buffer;pa.buffer=Vb;wb=pa.divisor;pa.divisor=tb;vb=pa.normalized;pa.normalized=
lc;Pa=pa.offset;pa.offset=jb;Dc=pa.size;pa.size=rb;Ua=pa.state;pa.state=Ja;Lb=pa.stride;pa.stride=ub;Eb=pa.type;pa.type=La;Ma=pa.w;pa.w=db;yd=pa.x;pa.x=gb;Ya=pa.y;pa.y=Na;Mb=pa.z;pa.z=lb;va.buffer=a.positionBuffer;Nb=!1;nb=null;Oa=0;bc=!1;xb=Ra=0;yb=1;Ta=0;ob=5126;cb=wc=Bc=ic=0;da(va)?(Nb=!0,nb=N.createStream(34962,va),ob=nb.dtype):(nb=N.getBuffer(va))?ob=nb.dtype:"constant"in va?(yb=2,"number"===typeof va.constant?(Bc=va.constant,wc=cb=ic=0):(Bc=0<va.constant.length?va.constant[0]:0,wc=1<va.constant.length?
va.constant[1]:0,cb=2<va.constant.length?va.constant[2]:0,ic=3<va.constant.length?va.constant[3]:0)):(nb=da(va.buffer)?N.createStream(34962,va.buffer):N.getBuffer(va.buffer),ob="type"in va?ha[va.type]:nb.dtype,bc=!!va.normalized,xb=va.size|0,Ra=va.offset|0,Ta=va.stride|0,Oa=va.divisor|0);mc=h.buffer;h.buffer=nb;Mc=h.divisor;h.divisor=Oa;Xa=h.normalized;h.normalized=bc;Qc=h.offset;h.offset=Ra;Bb=h.size;h.size=xb;Za=h.state;h.state=yb;Xb=h.stride;h.stride=Ta;uc=h.type;h.type=ob;Yb=h.w;h.w=ic;Rb=h.x;
h.x=Bc;Nc=h.y;h.y=wc;Sb=h.z;h.z=cb;Ka.buffer=a.colorBuffer;Ld=!1;Fc=null;ud=0;Rc=!1;vd=ad=0;pc=1;xc=0;jc=5126;Zb=Ub=tc=ab=0;da(Ka)?(Ld=!0,Fc=N.createStream(34962,Ka),jc=Fc.dtype):(Fc=N.getBuffer(Ka))?jc=Fc.dtype:"constant"in Ka?(pc=2,"number"===typeof Ka.constant?(tc=Ka.constant,Ub=Zb=ab=0):(tc=0<Ka.constant.length?Ka.constant[0]:0,Ub=1<Ka.constant.length?Ka.constant[1]:0,Zb=2<Ka.constant.length?Ka.constant[2]:0,ab=3<Ka.constant.length?Ka.constant[3]:0)):(Fc=da(Ka.buffer)?N.createStream(34962,Ka.buffer):
N.getBuffer(Ka.buffer),jc="type"in Ka?ha[Ka.type]:Fc.dtype,Rc=!!Ka.normalized,vd=Ka.size|0,ad=Ka.offset|0,xc=Ka.stride|0,ud=Ka.divisor|0);gc=A.buffer;A.buffer=Fc;kc=A.divisor;A.divisor=ud;zc=A.normalized;A.normalized=Rc;Cc=A.offset;A.offset=ad;fd=A.size;A.size=vd;Uc=A.state;A.state=pc;Vc=A.stride;A.stride=xc;Wc=A.type;A.type=jc;bd=A.w;A.w=ab;od=A.x;A.x=tc;gd=A.y;A.y=Ub;cd=A.z;A.z=Zb;Ga.buffer=a.positionBuffer;nc=!1;ec=null;dd=0;Yc=!1;Ac=hd=0;kd=1;Ad=0;ze=5126;Qd=Ee=ld=me=0;da(Ga)?(nc=!0,ec=N.createStream(34962,
Ga),ze=ec.dtype):(ec=N.getBuffer(Ga))?ze=ec.dtype:"constant"in Ga?(kd=2,"number"===typeof Ga.constant?(ld=Ga.constant,Ee=Qd=me=0):(ld=0<Ga.constant.length?Ga.constant[0]:0,Ee=1<Ga.constant.length?Ga.constant[1]:0,Qd=2<Ga.constant.length?Ga.constant[2]:0,me=3<Ga.constant.length?Ga.constant[3]:0)):(ec=da(Ga.buffer)?N.createStream(34962,Ga.buffer):N.getBuffer(Ga.buffer),ze="type"in Ga?ha[Ga.type]:ec.dtype,Yc=!!Ga.normalized,Ac=Ga.size|0,hd=Ga.offset|0,Ad=Ga.stride|0,dd=Ga.divisor|0);fe=n.buffer;n.buffer=
ec;Zd=n.divisor;n.divisor=dd;Rd=n.normalized;n.normalized=Yc;Kd=n.offset;n.offset=hd;Hd=n.size;n.size=Ac;qd=n.state;n.state=kd;Xc=n.stride;n.stride=Ad;wd=n.type;n.type=ze;td=n.w;n.w=me;md=n.x;n.x=ld;xd=n.y;n.y=Ee;Cd=n.z;n.z=Qd;Ed=q.buffer;q.buffer=k;ie=q.divisor;q.divisor=0;ke=q.normalized;q.normalized=!1;ve=q.offset;q.offset=0;le=q.size;q.size=0;je=q.state;q.state=1;ge=q.stride;q.stride=8;we=q.type;q.type=5126;de=q.w;q.w=0;ne=q.x;q.x=0;Sc=q.y;q.y=0;jd=q.z;q.z=0;xe=m.buffer;m.buffer=f;qe=m.divisor;
m.divisor=0;Md=m.normalized;m.normalized=!1;Sd=m.offset;m.offset=4;Td=m.size;m.size=0;Ud=m.state;m.state=1;oe=m.stride;m.stride=8;Be=m.type;m.type=5126;Fe=m.w;m.w=0;re=m.x;m.x=0;Ue=m.y;m.y=0;Ve=m.z;m.z=0;eb.buffer=a.positionBuffer;Qe=!1;ye=null;Ie=0;Ke=!1;Me=Le=0;Je=1;Nd=0;$d=5126;Id=Ne=ee=ce=0;da(eb)?(Qe=!0,ye=N.createStream(34962,eb),$d=ye.dtype):(ye=N.getBuffer(eb))?$d=ye.dtype:"constant"in eb?(Je=2,"number"===typeof eb.constant?(ee=eb.constant,Ne=Id=ce=0):(ee=0<eb.constant.length?eb.constant[0]:
0,Ne=1<eb.constant.length?eb.constant[1]:0,Id=2<eb.constant.length?eb.constant[2]:0,ce=3<eb.constant.length?eb.constant[3]:0)):(ye=da(eb.buffer)?N.createStream(34962,eb.buffer):N.getBuffer(eb.buffer),$d="type"in eb?ha[eb.type]:ye.dtype,Ke=!!eb.normalized,Me=eb.size|0,Le=eb.offset|0,Nd=eb.stride|0,Ie=eb.divisor|0);Vd=E.buffer;E.buffer=ye;Ge=E.divisor;E.divisor=Ie;Oe=E.normalized;E.normalized=Ke;df=E.offset;E.offset=Le;bf=E.size;E.size=Me;We=E.state;E.state=Je;Re=E.stride;E.stride=Nd;af=E.type;E.type=
$d;$e=E.w;E.w=ce;Xe=E.x;E.x=ee;Ye=E.y;E.y=Ne;Wd=E.z;E.z=Id;ba.buffer=a.positionBuffer;be=!1;Ze=null;kf=0;of=!1;lf=gf=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;da(ba)?(be=!0,Ze=N.createStream(34962,ba),sf=Ze.dtype):(Ze=N.getBuffer(ba))?sf=Ze.dtype:"constant"in ba?(mf=2,"number"===typeof ba.constant?(tf=ba.constant,Cf=Df=pf=0):(tf=0<ba.constant.length?ba.constant[0]:0,Cf=1<ba.constant.length?ba.constant[1]:0,Df=2<ba.constant.length?ba.constant[2]:0,pf=3<ba.constant.length?ba.constant[3]:0)):(Ze=da(ba.buffer)?
N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),sf="type"in ba?ha[ba.type]:Ze.dtype,of=!!ba.normalized,lf=ba.size|0,gf=ba.offset|0,nf=ba.stride|0,kf=ba.divisor|0);Se=J.buffer;J.buffer=Ze;He=J.divisor;J.divisor=kf;qf=J.normalized;J.normalized=of;rf=J.offset;J.offset=gf;Ef=J.size;J.size=lf;Hf=J.state;J.state=mf;Bf=J.stride;J.stride=nf;Ff=J.type;J.type=sf;Gf=J.w;J.w=pf;xf=J.x;J.x=tf;yf=J.y;J.y=Cf;wf=J.z;J.z=Df;zf=ja.vert;ja.vert=36;Af=ja.frag;ja.frag=35;O.dirty=!0;c(F,a,p);F.viewportWidth=t;F.viewportHeight=
D;za[0]=v;za[1]=V;za[2]=y;za[3]=G;ya[0]=ca;ya[1]=W;ya[2]=Aa;ya[3]=sa;X.blend_enable=C;Ca[0]=B;Ca[1]=xa;ka[0]=Qa;ka[1]=Ia;ka[2]=M;ka[3]=R;X.cull_enable=Hb;X.cull_face=I;X.depth_enable=T;Ea[0]=K;Ea[1]=wa;Ea[2]=z;Ea[3]=la;X.scissor_enable=Fa;X.stencil_enable=qa;S&&(b.cpuTime+=performance.now()-ea);P.offset=U;P.count=ia;P.instances=aa;P.primitive=Ba;oa[23]=na;oa[24]=Da;oa[22]=ra;oa[31]=fb;oa[32]=$b;oa[33]=Ob;oa[10]=qb;oa[34]=Kc;oa[6]=Kb;oa[7]=Pb;oa[21]=Fb;oa[8]=zb;oa[9]=ac;oa[3]=sb;Sa&&N.destroyStream(Vb);
pa.buffer=Wa;pa.divisor=wb;pa.normalized=vb;pa.offset=Pa;pa.size=Dc;pa.state=Ua;pa.stride=Lb;pa.type=Eb;pa.w=Ma;pa.x=yd;pa.y=Ya;pa.z=Mb;Nb&&N.destroyStream(nb);h.buffer=mc;h.divisor=Mc;h.normalized=Xa;h.offset=Qc;h.size=Bb;h.state=Za;h.stride=Xb;h.type=uc;h.w=Yb;h.x=Rb;h.y=Nc;h.z=Sb;Ld&&N.destroyStream(Fc);A.buffer=gc;A.divisor=kc;A.normalized=zc;A.offset=Cc;A.size=fd;A.state=Uc;A.stride=Vc;A.type=Wc;A.w=bd;A.x=od;A.y=gd;A.z=cd;nc&&N.destroyStream(ec);n.buffer=fe;n.divisor=Zd;n.normalized=Rd;n.offset=
Kd;n.size=Hd;n.state=qd;n.stride=Xc;n.type=wd;n.w=td;n.x=md;n.y=xd;n.z=Cd;q.buffer=Ed;q.divisor=ie;q.normalized=ke;q.offset=ve;q.size=le;q.state=je;q.stride=ge;q.type=we;q.w=de;q.x=ne;q.y=Sc;q.z=jd;m.buffer=xe;m.divisor=qe;m.normalized=Md;m.offset=Sd;m.size=Td;m.state=Ud;m.stride=oe;m.type=Be;m.w=Fe;m.x=re;m.y=Ue;m.z=Ve;Qe&&N.destroyStream(ye);E.buffer=Vd;E.divisor=Ge;E.normalized=Oe;E.offset=df;E.size=bf;E.state=We;E.stride=Re;E.type=af;E.w=$e;E.x=Xe;E.y=Ye;E.z=Wd;be&&N.destroyStream(Ze);J.buffer=
Se;J.divisor=He;J.normalized=qf;J.offset=rf;J.size=Ef;J.state=Hf;J.stride=Bf;J.type=Ff;J.w=Gf;J.x=xf;J.y=yf;J.z=wf;ja.vert=zf;ja.frag=Af;O.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,b,x,l,k,f,d,e,g,w,u,pa,h,A,n,q,m,E,J){var H,z,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka;H=a.attributes;z=a.buffer;y=a.context;v=a.current;S=a.draw;L=a.elements;Q=a.extensions;C=a.framebuffer;B=a.gl;ra=a.isBufferArgs;
I=a.next;K=a.shader;t=a.uniforms;p=a.vao;c=I.blend_color;D=v.blend_color;r=I.blend_equation;la=v.blend_equation;na=I.blend_func;U=v.blend_func;aa=I.colorMask;T=v.colorMask;R=I.depth_range;N=v.depth_range;F=I.polygonOffset_offset;O=v.polygonOffset_offset;P=I.sample_coverage;qa=v.sample_coverage;ta=I.scissor_box;G=v.scissor_box;M=I.stencil_func;da=v.stencil_func;X=I.stencil_opBack;ja=v.stencil_opBack;oa=I.stencil_opFront;Da=v.stencil_opFront;ya=I.viewport;Z=v.viewport;Ca={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ia={offset:8,stride:8};ka={offset:8,stride:8};return{batch:function(a,c){var f,e,l,r,x,d;f=C.next;f!==C.cur&&(f?B.bindFramebuffer(36160,f.framebuffer):B.bindFramebuffer(36160,null),C.cur=f);if(v.dirty){var k,t,K,ya,fa,W,xa,Ia,ma,za,Fa,ha,Y,na,ta,Ga,eb,ba,Gc,cc,Ha,dc,Tb,Ae,Fd,zd,Od,Ce,Bd,Xd,pe,he;k=I.dither;k!==v.dither&&(k?B.enable(3024):B.disable(3024),v.dither=k);t=I.depth_func;t!==v.depth_func&&(B.depthFunc(t),v.depth_func=t);K=R[0];
ya=R[1];if(K!==N[0]||ya!==N[1])B.depthRange(K,ya),N[0]=K,N[1]=ya;fa=I.depth_mask;fa!==v.depth_mask&&(B.depthMask(fa),v.depth_mask=fa);W=aa[0];xa=aa[1];Ia=aa[2];ma=aa[3];if(W!==T[0]||xa!==T[1]||Ia!==T[2]||ma!==T[3])B.colorMask(W,xa,Ia,ma),T[0]=W,T[1]=xa,T[2]=Ia,T[3]=ma;za=I.cull_enable;za!==v.cull_enable&&(za?B.enable(2884):B.disable(2884),v.cull_enable=za);Fa=I.cull_face;Fa!==v.cull_face&&(B.cullFace(Fa),v.cull_face=Fa);ha=I.frontFace;ha!==v.frontFace&&(B.frontFace(ha),v.frontFace=ha);Y=I.lineWidth;
Y!==v.lineWidth&&(B.lineWidth(Y),v.lineWidth=Y);na=I.polygonOffset_enable;na!==v.polygonOffset_enable&&(na?B.enable(32823):B.disable(32823),v.polygonOffset_enable=na);ta=F[0];Ga=F[1];if(ta!==O[0]||Ga!==O[1])B.polygonOffset(ta,Ga),O[0]=ta,O[1]=Ga;eb=I.sample_alpha;eb!==v.sample_alpha&&(eb?B.enable(32926):B.disable(32926),v.sample_alpha=eb);ba=I.sample_enable;ba!==v.sample_enable&&(ba?B.enable(32928):B.disable(32928),v.sample_enable=ba);Gc=P[0];cc=P[1];if(Gc!==qa[0]||cc!==qa[1])B.sampleCoverage(Gc,
cc),qa[0]=Gc,qa[1]=cc;Ha=I.stencil_mask;Ha!==v.stencil_mask&&(B.stencilMask(Ha),v.stencil_mask=Ha);dc=M[0];Tb=M[1];Ae=M[2];if(dc!==da[0]||Tb!==da[1]||Ae!==da[2])B.stencilFunc(dc,Tb,Ae),da[0]=dc,da[1]=Tb,da[2]=Ae;Fd=oa[0];zd=oa[1];Od=oa[2];Ce=oa[3];if(Fd!==Da[0]||zd!==Da[1]||Od!==Da[2]||Ce!==Da[3])B.stencilOpSeparate(Fd,zd,Od,Ce),Da[0]=Fd,Da[1]=zd,Da[2]=Od,Da[3]=Ce;Bd=X[0];Xd=X[1];pe=X[2];he=X[3];if(Bd!==ja[0]||Xd!==ja[1]||pe!==ja[2]||he!==ja[3])B.stencilOpSeparate(Bd,Xd,pe,he),ja[0]=Bd,ja[1]=Xd,ja[2]=
pe,ja[3]=he}B.blendColor(0,0,0,0);D[0]=0;D[1]=0;D[2]=0;D[3]=0;B.enable(3042);v.blend_enable=!0;B.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;B.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;B.disable(2929);v.depth_enable=!1;B.enable(3089);v.scissor_enable=!0;B.disable(2960);v.stencil_enable=!1;if(e=v.profile)l=performance.now(),b.count+=c;B.useProgram(g.program);r=Q.angle_instanced_arrays;var Dd;p.setVAO(null);Dd=S.instances;for(x=0;x<c;++x){d=a[x];var Pd,ae,se,
cf,Pe,Te,Gd,De,te,ue,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb;Pd=d.viewport;ae=Pd.x|0;se=Pd.y|0;cf="width"in Pd?Pd.width|0:y.framebufferWidth-ae;Pe="height"in Pd?Pd.height|0:y.framebufferHeight-se;Te=y.viewportWidth;y.viewportWidth=cf;Gd=y.viewportHeight;y.viewportHeight=Pe;B.viewport(ae,se,cf,Pe);Z[0]=ae;Z[1]=se;Z[2]=cf;Z[3]=Pe;
De=d.viewport;te=De.x|0;ue=De.y|0;Yd="width"in De?De.width|0:y.framebufferWidth-te;Jd="height"in De?De.height|0:y.framebufferHeight-ue;B.scissor(te,ue,Yd,Jd);G[0]=te;G[1]=ue;G[2]=Yd;G[3]=Jd;ia.buffer=d.positionBuffer;pd=!1;ed=null;sd=0;Oc=!1;Hc=rd=0;id=1;Tc=0;nd=5126;Ab=vc=Jb=Wb=0;ra(ia)?(pd=!0,ed=z.createStream(34962,ia),nd=ed.dtype):(ed=z.getBuffer(ia))?nd=ed.dtype:"constant"in ia?(id=2,"number"===typeof ia.constant?(Jb=ia.constant,vc=Ab=Wb=0):(Jb=0<ia.constant.length?ia.constant[0]:0,vc=1<ia.constant.length?
ia.constant[1]:0,Ab=2<ia.constant.length?ia.constant[2]:0,Wb=3<ia.constant.length?ia.constant[3]:0)):(ed=ra(ia.buffer)?z.createStream(34962,ia.buffer):z.getBuffer(ia.buffer),nd="type"in ia?Ca[ia.type]:ed.dtype,Oc=!!ia.normalized,Hc=ia.size|0,rd=ia.offset|0,Tc=ia.stride|0,sd=ia.divisor|0);yc=A.location;Cb=H[yc];if(1===id){Cb.buffer||B.enableVertexAttribArray(yc);Lc=Hc||2;if(Cb.type!==nd||Cb.size!==Lc||Cb.buffer!==ed||Cb.normalized!==Oc||Cb.offset!==rd||Cb.stride!==Tc)B.bindBuffer(34962,ed.buffer),
B.vertexAttribPointer(yc,Lc,nd,Oc,Tc,rd),Cb.type=nd,Cb.size=Lc,Cb.buffer=ed,Cb.normalized=Oc,Cb.offset=rd,Cb.stride=Tc;Cb.divisor!==sd&&(r.vertexAttribDivisorANGLE(yc,sd),Cb.divisor=sd)}else if(Cb.buffer&&(B.disableVertexAttribArray(yc),Cb.buffer=null),Cb.x!==Jb||Cb.y!==vc||Cb.z!==Ab||Cb.w!==Wb)B.vertexAttrib4f(yc,Jb,vc,Ab,Wb),Cb.x=Jb,Cb.y=vc,Cb.z=Ab,Cb.w=Wb;ka.buffer=d.positionFractBuffer;oc=!1;Ic=null;$c=0;Zc=!1;hc=Ec=0;Jc=1;qc=0;rc=5126;Pc=fb=pb=fc=0;ra(ka)?(oc=!0,Ic=z.createStream(34962,ka),rc=
Ic.dtype):(Ic=z.getBuffer(ka))?rc=Ic.dtype:"constant"in ka?(Jc=2,"number"===typeof ka.constant?(pb=ka.constant,fb=Pc=fc=0):(pb=0<ka.constant.length?ka.constant[0]:0,fb=1<ka.constant.length?ka.constant[1]:0,Pc=2<ka.constant.length?ka.constant[2]:0,fc=3<ka.constant.length?ka.constant[3]:0)):(Ic=ra(ka.buffer)?z.createStream(34962,ka.buffer):z.getBuffer(ka.buffer),rc="type"in ka?Ca[ka.type]:Ic.dtype,Zc=!!ka.normalized,hc=ka.size|0,Ec=ka.offset|0,qc=ka.stride|0,$c=ka.divisor|0);$b=n.location;hb=H[$b];
if(1===Jc){hb.buffer||B.enableVertexAttribArray($b);Ob=hc||2;if(hb.type!==rc||hb.size!==Ob||hb.buffer!==Ic||hb.normalized!==Zc||hb.offset!==Ec||hb.stride!==qc)B.bindBuffer(34962,Ic.buffer),B.vertexAttribPointer($b,Ob,rc,Zc,qc,Ec),hb.type=rc,hb.size=Ob,hb.buffer=Ic,hb.normalized=Zc,hb.offset=Ec,hb.stride=qc;hb.divisor!==$c&&(r.vertexAttribDivisorANGLE($b,$c),hb.divisor=$c)}else if(hb.buffer&&(B.disableVertexAttribArray($b),hb.buffer=null),hb.x!==pb||hb.y!==fb||hb.z!==Pc||hb.w!==fc)B.vertexAttrib4f($b,
pb,fb,Pc,fc),hb.x=pb,hb.y=fb,hb.z=Pc,hb.w=fc;bb=d.fill;qb=bb[0];Kc=bb[1];Kb=bb[2];Pb=bb[3];x&&Va===qb&&Ib===Kc&&sc===Kb&&kb===Pb||(Va=qb,Ib=Kc,sc=Kb,kb=Pb,B.uniform4f(u.location,qb,Kc,Kb,Pb));Fb=d.scale;Db=Fb[0];ib=Fb[1];x&&zb===Db&&ac===ib||(zb=Db,ac=ib,B.uniform2f(q.location,Db,ib));Qb=d.scaleFract;sb=Qb[0];Vb=Qb[1];x&&Sa===sb&&tb===Vb||(Sa=sb,tb=Vb,B.uniform2f(m.location,sb,Vb));lc=d.translate;jb=lc[0];Ja=lc[1];x&&rb===jb&&ub===Ja||(rb=jb,ub=Ja,B.uniform2f(E.location,jb,Ja));La=d.translateFract;
db=La[0];Na=La[1];x&&gb===db&&lb===Na||(gb=db,lb=Na,B.uniform2f(J.location,db,Na));Wa=d.id;x&&wb===Wa||(wb=Wa,B.uniform1f(pa.location,Wa));vb=d.opacity;x&&Pa===vb||(Pa=vb,B.uniform1f(h.location,vb));Dc=w.call(this,y,d,x);Ua=null;(Ua=(Lb=ra(Dc))?L.createStream(Dc):L.getElements(Dc))&&B.bindBuffer(34963,Ua.buffer.buffer);if(Eb=Ua?Ua.vertCount:-1)0<Dd?Ua?r.drawElementsInstancedANGLE(4,Eb,Ua.type,0<<(Ua.type-5121>>1),Dd):r.drawArraysInstancedANGLE(4,0,Eb,Dd):0>Dd&&(Ua?B.drawElements(4,Eb,Ua.type,0<<(Ua.type-
5121>>1)):B.drawArrays(4,0,Eb)),y.viewportWidth=Te,y.viewportHeight=Gd,pd&&z.destroyStream(ed),oc&&z.destroyStream(Ic),Lb&&L.destroyStream(Ua)}v.dirty=!0;p.setVAO(null);e&&(b.cpuTime+=performance.now()-l)},draw:function(a){var c,f,e,r,d,k,g,t,w,ga,K,fa,W,xa,Ia,ma,za,ya,ha,Y,na,ta;c=C.next;c!==C.cur&&(c?B.bindFramebuffer(36160,c.framebuffer):B.bindFramebuffer(36160,null),C.cur=c);if(v.dirty){c=I.dither;c!==v.dither&&(c?B.enable(3024):B.disable(3024),v.dither=c);c=I.depth_func;c!==v.depth_func&&(B.depthFunc(c),
v.depth_func=c);c=R[0];k=R[1];if(c!==N[0]||k!==N[1])B.depthRange(c,k),N[0]=c,N[1]=k;c=I.depth_mask;c!==v.depth_mask&&(B.depthMask(c),v.depth_mask=c);c=aa[0];k=aa[1];f=aa[2];e=aa[3];if(c!==T[0]||k!==T[1]||f!==T[2]||e!==T[3])B.colorMask(c,k,f,e),T[0]=c,T[1]=k,T[2]=f,T[3]=e;c=I.cull_enable;c!==v.cull_enable&&(c?B.enable(2884):B.disable(2884),v.cull_enable=c);c=I.cull_face;c!==v.cull_face&&(B.cullFace(c),v.cull_face=c);c=I.frontFace;c!==v.frontFace&&(B.frontFace(c),v.frontFace=c);c=I.lineWidth;c!==v.lineWidth&&
(B.lineWidth(c),v.lineWidth=c);c=I.polygonOffset_enable;c!==v.polygonOffset_enable&&(c?B.enable(32823):B.disable(32823),v.polygonOffset_enable=c);c=F[0];k=F[1];if(c!==O[0]||k!==O[1])B.polygonOffset(c,k),O[0]=c,O[1]=k;c=I.sample_alpha;c!==v.sample_alpha&&(c?B.enable(32926):B.disable(32926),v.sample_alpha=c);c=I.sample_enable;c!==v.sample_enable&&(c?B.enable(32928):B.disable(32928),v.sample_enable=c);c=P[0];k=P[1];if(c!==qa[0]||k!==qa[1])B.sampleCoverage(c,k),qa[0]=c,qa[1]=k;c=I.stencil_mask;c!==v.stencil_mask&&
(B.stencilMask(c),v.stencil_mask=c);c=M[0];k=M[1];f=M[2];if(c!==da[0]||k!==da[1]||f!==da[2])B.stencilFunc(c,k,f),da[0]=c,da[1]=k,da[2]=f;c=oa[0];k=oa[1];f=oa[2];e=oa[3];if(c!==Da[0]||k!==Da[1]||f!==Da[2]||e!==Da[3])B.stencilOpSeparate(c,k,f,e),Da[0]=c,Da[1]=k,Da[2]=f,Da[3]=e;c=X[0];k=X[1];f=X[2];e=X[3];if(c!==ja[0]||k!==ja[1]||f!==ja[2]||e!==ja[3])B.stencilOpSeparate(c,k,f,e),ja[0]=c,ja[1]=k,ja[2]=f,ja[3]=e}c=a.viewport;f=c.x|0;e=c.y|0;r="width"in c?c.width|0:y.framebufferWidth-f;d="height"in c?c.height|
0:y.framebufferHeight-e;c=y.viewportWidth;y.viewportWidth=r;k=y.viewportHeight;y.viewportHeight=d;B.viewport(f,e,r,d);Z[0]=f;Z[1]=e;Z[2]=r;Z[3]=d;B.blendColor(0,0,0,0);D[0]=0;D[1]=0;D[2]=0;D[3]=0;B.enable(3042);v.blend_enable=!0;B.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;B.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;B.disable(2929);v.depth_enable=!1;d=a.viewport;f=d.x|0;e=d.y|0;r="width"in d?d.width|0:y.framebufferWidth-f;d="height"in d?d.height|0:y.framebufferHeight-
e;B.scissor(f,e,r,d);G[0]=f;G[1]=e;G[2]=r;G[3]=d;B.enable(3089);v.scissor_enable=!0;B.disable(2960);v.stencil_enable=!1;if(f=v.profile)g=performance.now(),b.count++;B.useProgram(x.program);e=Q.angle_instanced_arrays;p.setVAO(null);ia.buffer=a.positionBuffer;r=!1;t=0;w=!1;K=ga=0;fa=1;W=0;xa=5126;ya=za=ma=Ia=0;ra(ia)?(r=!0,d=z.createStream(34962,ia),xa=d.dtype):(d=z.getBuffer(ia))?xa=d.dtype:"constant"in ia?(fa=2,"number"===typeof ia.constant?(ma=ia.constant,za=ya=Ia=0):(ma=0<ia.constant.length?ia.constant[0]:
0,za=1<ia.constant.length?ia.constant[1]:0,ya=2<ia.constant.length?ia.constant[2]:0,Ia=3<ia.constant.length?ia.constant[3]:0)):(d=ra(ia.buffer)?z.createStream(34962,ia.buffer):z.getBuffer(ia.buffer),xa="type"in ia?Ca[ia.type]:d.dtype,w=!!ia.normalized,K=ia.size|0,ga=ia.offset|0,W=ia.stride|0,t=ia.divisor|0);ha=A.location;Y=H[ha];if(1===fa){Y.buffer||B.enableVertexAttribArray(ha);K=K||2;if(Y.type!==xa||Y.size!==K||Y.buffer!==d||Y.normalized!==w||Y.offset!==ga||Y.stride!==W)B.bindBuffer(34962,d.buffer),
B.vertexAttribPointer(ha,K,xa,w,W,ga),Y.type=xa,Y.size=K,Y.buffer=d,Y.normalized=w,Y.offset=ga,Y.stride=W;Y.divisor!==t&&(e.vertexAttribDivisorANGLE(ha,t),Y.divisor=t)}else if(Y.buffer&&(B.disableVertexAttribArray(ha),Y.buffer=null),Y.x!==ma||Y.y!==za||Y.z!==ya||Y.w!==Ia)B.vertexAttrib4f(ha,ma,za,ya,Ia),Y.x=ma,Y.y=za,Y.z=ya,Y.w=Ia;ka.buffer=a.positionFractBuffer;t=!1;ga=0;W=!1;Ia=xa=0;ma=1;ha=0;Y=5126;ta=na=ya=za=0;ra(ka)?(t=!0,w=z.createStream(34962,ka),Y=w.dtype):(w=z.getBuffer(ka))?Y=w.dtype:"constant"in
ka?(ma=2,"number"===typeof ka.constant?(ya=ka.constant,na=ta=za=0):(ya=0<ka.constant.length?ka.constant[0]:0,na=1<ka.constant.length?ka.constant[1]:0,ta=2<ka.constant.length?ka.constant[2]:0,za=3<ka.constant.length?ka.constant[3]:0)):(w=ra(ka.buffer)?z.createStream(34962,ka.buffer):z.getBuffer(ka.buffer),Y="type"in ka?Ca[ka.type]:w.dtype,W=!!ka.normalized,Ia=ka.size|0,xa=ka.offset|0,ha=ka.stride|0,ga=ka.divisor|0);K=n.location;fa=H[K];if(1===ma){fa.buffer||B.enableVertexAttribArray(K);Ia=Ia||2;if(fa.type!==
Y||fa.size!==Ia||fa.buffer!==w||fa.normalized!==W||fa.offset!==xa||fa.stride!==ha)B.bindBuffer(34962,w.buffer),B.vertexAttribPointer(K,Ia,Y,W,ha,xa),fa.type=Y,fa.size=Ia,fa.buffer=w,fa.normalized=W,fa.offset=xa,fa.stride=ha;fa.divisor!==ga&&(e.vertexAttribDivisorANGLE(K,ga),fa.divisor=ga)}else if(fa.buffer&&(B.disableVertexAttribArray(K),fa.buffer=null),fa.x!==ya||fa.y!==na||fa.z!==ta||fa.w!==za)B.vertexAttrib4f(K,ya,na,ta,za),fa.x=ya,fa.y=na,fa.z=ta,fa.w=za;ga=a.fill;B.uniform4f(u.location,ga[0],
ga[1],ga[2],ga[3]);ga=a.scale;B.uniform2f(q.location,ga[0],ga[1]);ga=a.scaleFract;B.uniform2f(m.location,ga[0],ga[1]);ga=a.translate;B.uniform2f(E.location,ga[0],ga[1]);ga=a.translateFract;B.uniform2f(J.location,ga[0],ga[1]);B.uniform1f(pa.location,a.id);B.uniform1f(h.location,a.opacity);ga=l.call(this,y,a,0);(ga=(a=ra(ga))?L.createStream(ga):L.getElements(ga))&&B.bindBuffer(34963,ga.buffer.buffer);if(W=ga?ga.vertCount:-1)xa=S.instances,0<xa?ga?e.drawElementsInstancedANGLE(4,W,ga.type,0<<(ga.type-
5121>>1),xa):e.drawArraysInstancedANGLE(4,0,W,xa):0>xa&&(ga?B.drawElements(4,W,ga.type,0<<(ga.type-5121>>1)):B.drawArrays(4,0,W)),v.dirty=!0,p.setVAO(null),y.viewportWidth=c,y.viewportHeight=k,f&&(b.cpuTime+=performance.now()-g),r&&z.destroyStream(d),t&&z.destroyStream(w),a&&L.destroyStream(ga)},scope:function(a,p,l){var x,g,D,h,u,F,G,w,A,m,W,C,n,B,pa,M,ga,R,N,J,q,X,T,E,Z,Q,H,P,O,da,la,oa,qa,U,aa,ua,ja,Da,Pd,ae,se,cf,Pe,Te,Gd,De,te,ue,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,
Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb;x=a.viewport;g=x.x|0;D=x.y|0;h="width"in x?x.width|0:y.framebufferWidth-g;u="height"in x?x.height|0:y.framebufferHeight-D;F=y.viewportWidth;y.viewportWidth=h;G=y.viewportHeight;y.viewportHeight=u;w=ya[0];ya[0]=g;A=ya[1];ya[1]=D;m=ya[2];ya[2]=h;W=ya[3];ya[3]=u;C=c[0];c[0]=0;n=c[1];c[1]=0;B=c[2];c[2]=0;pa=c[3];c[3]=0;M=I.blend_enable;I.blend_enable=!0;ga=r[0];r[0]=32774;
R=r[1];r[1]=32774;N=na[0];na[0]=770;J=na[1];na[1]=771;q=na[2];na[2]=773;X=na[3];na[3]=1;T=I.depth_enable;I.depth_enable=!1;E=a.viewport;Z=E.x|0;Q=E.y|0;H="width"in E?E.width|0:y.framebufferWidth-Z;P="height"in E?E.height|0:y.framebufferHeight-Q;O=ta[0];ta[0]=Z;da=ta[1];ta[1]=Q;la=ta[2];ta[2]=H;oa=ta[3];ta[3]=P;qa=I.scissor_enable;I.scissor_enable=!0;U=I.stencil_enable;I.stencil_enable=!1;if(aa=v.profile)ua=performance.now(),b.count++;ja=k.call(this,y,a,l);Da=null;Da=(Pd=ra(ja))?L.createStream(ja):
L.getElements(ja);ae=S.elements;S.elements=Da;se=S.offset;S.offset=0;cf=Da?Da.vertCount:-1;Pe=S.count;S.count=cf;Te=S.primitive;S.primitive=4;Gd=a.fill;De=t[14];t[14]=Gd;te=a.id;ue=t[31];t[31]=te;Yd=a.opacity;Jd=t[10];t[10]=Yd;pd=y.pixelRatio;ed=t[34];t[34]=pd;sd=a.scale;Oc=t[6];t[6]=sd;rd=a.scaleFract;Hc=t[7];t[7]=rd;id=a.translate;Tc=t[8];t[8]=id;nd=a.translateFract;Wb=t[9];t[9]=nd;Jb=f.call(this,y,a,l);vc=t[3];t[3]=Jb;ia.buffer=a.positionBuffer;Ab=!1;yc=null;Cb=0;Lc=!1;Ic=oc=0;$c=1;Zc=0;Ec=5126;
rc=qc=Jc=hc=0;ra(ia)?(Ab=!0,yc=z.createStream(34962,ia),Ec=yc.dtype):(yc=z.getBuffer(ia))?Ec=yc.dtype:"constant"in ia?($c=2,"number"===typeof ia.constant?(Jc=ia.constant,qc=rc=hc=0):(Jc=0<ia.constant.length?ia.constant[0]:0,qc=1<ia.constant.length?ia.constant[1]:0,rc=2<ia.constant.length?ia.constant[2]:0,hc=3<ia.constant.length?ia.constant[3]:0)):(yc=ra(ia.buffer)?z.createStream(34962,ia.buffer):z.getBuffer(ia.buffer),Ec="type"in ia?Ca[ia.type]:yc.dtype,Lc=!!ia.normalized,Ic=ia.size|0,oc=ia.offset|
0,Zc=ia.stride|0,Cb=ia.divisor|0);fc=d.buffer;d.buffer=yc;pb=d.divisor;d.divisor=Cb;fb=d.normalized;d.normalized=Lc;Pc=d.offset;d.offset=oc;$b=d.size;d.size=Ic;hb=d.state;d.state=$c;Ob=d.stride;d.stride=Zc;bb=d.type;d.type=Ec;qb=d.w;d.w=hc;Va=d.x;d.x=Jc;Kc=d.y;d.y=qc;Ib=d.z;d.z=rc;ka.buffer=a.positionFractBuffer;Kb=!1;sc=null;Pb=0;kb=!1;Db=Fb=0;zb=1;ib=0;ac=5126;Vb=Sa=sb=Qb=0;ra(ka)?(Kb=!0,sc=z.createStream(34962,ka),ac=sc.dtype):(sc=z.getBuffer(ka))?ac=sc.dtype:"constant"in ka?(zb=2,"number"===typeof ka.constant?
(sb=ka.constant,Sa=Vb=Qb=0):(sb=0<ka.constant.length?ka.constant[0]:0,Sa=1<ka.constant.length?ka.constant[1]:0,Vb=2<ka.constant.length?ka.constant[2]:0,Qb=3<ka.constant.length?ka.constant[3]:0)):(sc=ra(ka.buffer)?z.createStream(34962,ka.buffer):z.getBuffer(ka.buffer),ac="type"in ka?Ca[ka.type]:sc.dtype,kb=!!ka.normalized,Db=ka.size|0,Fb=ka.offset|0,ib=ka.stride|0,Pb=ka.divisor|0);tb=e.buffer;e.buffer=sc;lc=e.divisor;e.divisor=Pb;jb=e.normalized;e.normalized=kb;rb=e.offset;e.offset=Fb;Ja=e.size;e.size=
Db;ub=e.state;e.state=zb;La=e.stride;e.stride=ib;db=e.type;e.type=ac;gb=e.w;e.w=Qb;Na=e.x;e.x=sb;lb=e.y;e.y=Sa;Wa=e.z;e.z=Vb;wb=K.vert;K.vert=42;vb=K.frag;K.frag=41;v.dirty=!0;p(y,a,l);y.viewportWidth=F;y.viewportHeight=G;ya[0]=w;ya[1]=A;ya[2]=m;ya[3]=W;c[0]=C;c[1]=n;c[2]=B;c[3]=pa;I.blend_enable=M;r[0]=ga;r[1]=R;na[0]=N;na[1]=J;na[2]=q;na[3]=X;I.depth_enable=T;ta[0]=O;ta[1]=da;ta[2]=la;ta[3]=oa;I.scissor_enable=qa;I.stencil_enable=U;aa&&(b.cpuTime+=performance.now()-ua);Pd&&L.destroyStream(Da);S.elements=
ae;S.offset=se;S.count=Pe;S.primitive=Te;t[14]=De;t[31]=ue;t[10]=Jd;t[34]=ed;t[6]=Oc;t[7]=Hc;t[8]=Tc;t[9]=Wb;t[3]=vc;Ab&&z.destroyStream(yc);d.buffer=fc;d.divisor=pb;d.normalized=fb;d.offset=Pc;d.size=$b;d.state=hb;d.stride=Ob;d.type=bb;d.w=qb;d.x=Va;d.y=Kc;d.z=Ib;Kb&&z.destroyStream(sc);e.buffer=tb;e.divisor=lc;e.normalized=jb;e.offset=rb;e.size=Ja;e.state=ub;e.stride=La;e.type=db;e.w=gb;e.x=Na;e.y=lb;e.z=Wa;K.vert=wb;K.frag=vb;v.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
b,x,l,k,f,d,e,g,w,u,pa,h,A,n,q,m,E,J,H,z,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a){var V,ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa,ha,Y,va,Ka,Ga,eb,ba,Gc,cc,Ha,dc,Tb,Ae,Fd,zd,Od,Ce,Bd,Xd,pe,he,Dd,Pd,ae,se;V=a.attributes;ca=a.buffer;sa=a.context;wa=a.current;Ea=a.draw;mb=a.elements;Gb=a.extensions;fa=a.framebuffer;W=a.gl;xa=a.isBufferArgs;Ia=a.next;ma=a.shader;za=a.uniforms;Fa=a.vao;ha=Ia.blend_color;Y=wa.blend_color;va=Ia.blend_equation;
Ka=wa.blend_equation;Ga=Ia.blend_func;eb=wa.blend_func;ba=Ia.colorMask;Gc=wa.colorMask;cc=Ia.depth_range;Ha=wa.depth_range;dc=Ia.polygonOffset_offset;Tb=wa.polygonOffset_offset;Ae=Ia.sample_coverage;Fd=wa.sample_coverage;zd=Ia.scissor_box;Od=wa.scissor_box;Ce=Ia.stencil_func;Bd=wa.stencil_func;Xd=Ia.stencil_opBack;pe=wa.stencil_opBack;he=Ia.stencil_opFront;Dd=wa.stencil_opFront;Pd=Ia.viewport;ae=wa.viewport;se={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,c){var f,p,e,l,x,d;f=fa.next;f!==fa.cur&&(f?W.bindFramebuffer(36160,f.framebuffer):W.bindFramebuffer(36160,null),fa.cur=f);if(wa.dirty){var k,g,t,h,v,u,y,w,A,m,C,n,B,pa,ga,q,J,I,E,ma,Q,K,L,H,ha,z,za,S,ea,ua,ra,Ga,Ob,bb;k=Ia.dither;k!==wa.dither&&(k?W.enable(3024):W.disable(3024),wa.dither=k);g=va[0];t=va[1];if(g!==Ka[0]||t!==Ka[1])W.blendEquationSeparate(g,t),Ka[0]=g,Ka[1]=t;h=Ia.depth_func;h!==wa.depth_func&&(W.depthFunc(h),wa.depth_func=h);v=cc[0];u=cc[1];if(v!==Ha[0]||u!==
Ha[1])W.depthRange(v,u),Ha[0]=v,Ha[1]=u;y=Ia.depth_mask;y!==wa.depth_mask&&(W.depthMask(y),wa.depth_mask=y);w=ba[0];A=ba[1];m=ba[2];C=ba[3];if(w!==Gc[0]||A!==Gc[1]||m!==Gc[2]||C!==Gc[3])W.colorMask(w,A,m,C),Gc[0]=w,Gc[1]=A,Gc[2]=m,Gc[3]=C;n=Ia.cull_enable;n!==wa.cull_enable&&(n?W.enable(2884):W.disable(2884),wa.cull_enable=n);B=Ia.cull_face;B!==wa.cull_face&&(W.cullFace(B),wa.cull_face=B);pa=Ia.frontFace;pa!==wa.frontFace&&(W.frontFace(pa),wa.frontFace=pa);ga=Ia.lineWidth;ga!==wa.lineWidth&&(W.lineWidth(ga),
wa.lineWidth=ga);q=Ia.polygonOffset_enable;q!==wa.polygonOffset_enable&&(q?W.enable(32823):W.disable(32823),wa.polygonOffset_enable=q);J=dc[0];I=dc[1];if(J!==Tb[0]||I!==Tb[1])W.polygonOffset(J,I),Tb[0]=J,Tb[1]=I;E=Ia.sample_alpha;E!==wa.sample_alpha&&(E?W.enable(32926):W.disable(32926),wa.sample_alpha=E);ma=Ia.sample_enable;ma!==wa.sample_enable&&(ma?W.enable(32928):W.disable(32928),wa.sample_enable=ma);Q=Ae[0];K=Ae[1];if(Q!==Fd[0]||K!==Fd[1])W.sampleCoverage(Q,K),Fd[0]=Q,Fd[1]=K;L=Ia.stencil_mask;
L!==wa.stencil_mask&&(W.stencilMask(L),wa.stencil_mask=L);H=Ce[0];ha=Ce[1];z=Ce[2];if(H!==Bd[0]||ha!==Bd[1]||z!==Bd[2])W.stencilFunc(H,ha,z),Bd[0]=H,Bd[1]=ha,Bd[2]=z;za=he[0];S=he[1];ea=he[2];ua=he[3];if(za!==Dd[0]||S!==Dd[1]||ea!==Dd[2]||ua!==Dd[3])W.stencilOpSeparate(za,S,ea,ua),Dd[0]=za,Dd[1]=S,Dd[2]=ea,Dd[3]=ua;ra=Xd[0];Ga=Xd[1];Ob=Xd[2];bb=Xd[3];if(ra!==pe[0]||Ga!==pe[1]||Ob!==pe[2]||bb!==pe[3])W.stencilOpSeparate(ra,Ga,Ob,bb),pe[0]=ra,pe[1]=Ga,pe[2]=Ob,pe[3]=bb}W.blendColor(0,0,0,1);Y[0]=0;
Y[1]=0;Y[2]=0;Y[3]=1;W.enable(3042);wa.blend_enable=!0;W.blendFuncSeparate(770,771,773,1);eb[0]=770;eb[1]=771;eb[2]=773;eb[3]=1;W.disable(2929);wa.depth_enable=!1;W.enable(3089);wa.scissor_enable=!0;W.disable(2960);wa.stencil_enable=!1;if(p=wa.profile)e=performance.now(),b.count+=c;W.useProgram(D.program);l=Gb.angle_instanced_arrays;var qb;Fa.setVAO(null);W.uniform1i(M.location,!1);W.uniform1i(Da.location,O.bind());qb=Ea.instances;for(x=0;x<c;++x){d=a[x];var Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,
sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Pd,zd,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Se,He,qf,rf,
Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Va=d.viewport;Kc=Va.x|0;Ib=Va.y|0;Kb="width"in Va?Va.width|0:sa.framebufferWidth-Kc;sc="height"in Va?Va.height|0:sa.framebufferHeight-Ib;Pb=sa.viewportWidth;sa.viewportWidth=Kb;kb=sa.viewportHeight;sa.viewportHeight=sc;W.viewport(Kc,Ib,Kb,sc);ae[0]=Kc;ae[1]=Ib;ae[2]=Kb;ae[3]=sc;Fb=d.viewport;Db=Fb.x|0;zb=Fb.y|0;ib="width"in Fb?Fb.width|0:sa.framebufferWidth-Db;ac="height"in Fb?Fb.height|0:sa.framebufferHeight-zb;W.scissor(Db,zb,ib,ac);
Od[0]=Db;Od[1]=zb;Od[2]=ib;Od[3]=ac;Qb=r.call(this,sa,d,x);sb=!1;Sa=null;Vb=0;tb=!1;jb=lc=0;rb=1;Ja=0;ub=5126;Na=gb=db=La=0;xa(Qb)?(sb=!0,Sa=ca.createStream(34962,Qb),ub=Sa.dtype):(Sa=ca.getBuffer(Qb))?ub=Sa.dtype:"constant"in Qb?(rb=2,"number"===typeof Qb.constant?(db=Qb.constant,gb=Na=La=0):(db=0<Qb.constant.length?Qb.constant[0]:0,gb=1<Qb.constant.length?Qb.constant[1]:0,Na=2<Qb.constant.length?Qb.constant[2]:0,La=3<Qb.constant.length?Qb.constant[3]:0)):(Sa=xa(Qb.buffer)?ca.createStream(34962,
Qb.buffer):ca.getBuffer(Qb.buffer),ub="type"in Qb?se[Qb.type]:Sa.dtype,tb=!!Qb.normalized,jb=Qb.size|0,lc=Qb.offset|0,Ja=Qb.stride|0,Vb=Qb.divisor|0);lb=Qa.location;Wa=V[lb];if(1===rb){Wa.buffer||W.enableVertexAttribArray(lb);wb=jb||1;if(Wa.type!==ub||Wa.size!==wb||Wa.buffer!==Sa||Wa.normalized!==tb||Wa.offset!==lc||Wa.stride!==Ja)W.bindBuffer(34962,Sa.buffer),W.vertexAttribPointer(lb,wb,ub,tb,Ja,lc),Wa.type=ub,Wa.size=wb,Wa.buffer=Sa,Wa.normalized=tb,Wa.offset=lc,Wa.stride=Ja;Wa.divisor!==Vb&&(l.vertexAttribDivisorANGLE(lb,
Vb),Wa.divisor=Vb)}else if(Wa.buffer&&(W.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==db||Wa.y!==gb||Wa.z!==Na||Wa.w!==La)W.vertexAttrib4f(lb,db,gb,Na,La),Wa.x=db,Wa.y=gb,Wa.z=Na,Wa.w=La;vb=la.call(this,sa,d,x);Pa=!1;Dc=null;Ua=0;Lb=!1;Ma=Eb=0;yd=1;Ya=0;Mb=5126;bc=Oa=nb=Nb=0;xa(vb)?(Pa=!0,Dc=ca.createStream(34962,vb),Mb=Dc.dtype):(Dc=ca.getBuffer(vb))?Mb=Dc.dtype:"constant"in vb?(yd=2,"number"===typeof vb.constant?(nb=vb.constant,Oa=bc=Nb=0):(nb=0<vb.constant.length?vb.constant[0]:0,Oa=1<vb.constant.length?
vb.constant[1]:0,bc=2<vb.constant.length?vb.constant[2]:0,Nb=3<vb.constant.length?vb.constant[3]:0)):(Dc=xa(vb.buffer)?ca.createStream(34962,vb.buffer):ca.getBuffer(vb.buffer),Mb="type"in vb?se[vb.type]:Dc.dtype,Lb=!!vb.normalized,Ma=vb.size|0,Eb=vb.offset|0,Ya=vb.stride|0,Ua=vb.divisor|0);Ra=Hb.location;xb=V[Ra];if(1===yd){xb.buffer||W.enableVertexAttribArray(Ra);yb=Ma||1;if(xb.type!==Mb||xb.size!==yb||xb.buffer!==Dc||xb.normalized!==Lb||xb.offset!==Eb||xb.stride!==Ya)W.bindBuffer(34962,Dc.buffer),
W.vertexAttribPointer(Ra,yb,Mb,Lb,Ya,Eb),xb.type=Mb,xb.size=yb,xb.buffer=Dc,xb.normalized=Lb,xb.offset=Eb,xb.stride=Ya;xb.divisor!==Ua&&(l.vertexAttribDivisorANGLE(Ra,Ua),xb.divisor=Ua)}else if(xb.buffer&&(W.disableVertexAttribArray(Ra),xb.buffer=null),xb.x!==nb||xb.y!==Oa||xb.z!==bc||xb.w!==Nb)W.vertexAttrib4f(Ra,nb,Oa,bc,Nb),xb.x=nb,xb.y=Oa,xb.z=bc,xb.w=Nb;Ta=na.call(this,sa,d,x);ob=!1;ic=null;Bc=0;wc=!1;mc=cb=0;Mc=1;Xa=0;Qc=5126;uc=Xb=Za=Bb=0;xa(Ta)?(ob=!0,ic=ca.createStream(34962,Ta),Qc=ic.dtype):
(ic=ca.getBuffer(Ta))?Qc=ic.dtype:"constant"in Ta?(Mc=2,"number"===typeof Ta.constant?(Za=Ta.constant,Xb=uc=Bb=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Xb=1<Ta.constant.length?Ta.constant[1]:0,uc=2<Ta.constant.length?Ta.constant[2]:0,Bb=3<Ta.constant.length?Ta.constant[3]:0)):(ic=xa(Ta.buffer)?ca.createStream(34962,Ta.buffer):ca.getBuffer(Ta.buffer),Qc="type"in Ta?se[Ta.type]:ic.dtype,wc=!!Ta.normalized,mc=Ta.size|0,cb=Ta.offset|0,Xa=Ta.stride|0,Bc=Ta.divisor|0);Yb=Aa.location;Rb=V[Yb];if(1===
Mc){Rb.buffer||W.enableVertexAttribArray(Yb);Nc=mc||1;if(Rb.type!==Qc||Rb.size!==Nc||Rb.buffer!==ic||Rb.normalized!==wc||Rb.offset!==cb||Rb.stride!==Xa)W.bindBuffer(34962,ic.buffer),W.vertexAttribPointer(Yb,Nc,Qc,wc,Xa,cb),Rb.type=Qc,Rb.size=Nc,Rb.buffer=ic,Rb.normalized=wc,Rb.offset=cb,Rb.stride=Xa;Rb.divisor!==Bc&&(l.vertexAttribDivisorANGLE(Yb,Bc),Rb.divisor=Bc)}else if(Rb.buffer&&(W.disableVertexAttribArray(Yb),Rb.buffer=null),Rb.x!==Za||Rb.y!==Xb||Rb.z!==uc||Rb.w!==Bb)W.vertexAttrib4f(Yb,Za,
Xb,uc,Bb),Rb.x=Za,Rb.y=Xb,Rb.z=uc,Rb.w=Bb;Sb=U.call(this,sa,d,x);Ld=!1;Fc=null;ud=0;Rc=!1;vd=ad=0;pc=1;xc=0;jc=5126;Zb=Ub=tc=ab=0;xa(Sb)?(Ld=!0,Fc=ca.createStream(34962,Sb),jc=Fc.dtype):(Fc=ca.getBuffer(Sb))?jc=Fc.dtype:"constant"in Sb?(pc=2,"number"===typeof Sb.constant?(tc=Sb.constant,Ub=Zb=ab=0):(tc=0<Sb.constant.length?Sb.constant[0]:0,Ub=1<Sb.constant.length?Sb.constant[1]:0,Zb=2<Sb.constant.length?Sb.constant[2]:0,ab=3<Sb.constant.length?Sb.constant[3]:0)):(Fc=xa(Sb.buffer)?ca.createStream(34962,
Sb.buffer):ca.getBuffer(Sb.buffer),jc="type"in Sb?se[Sb.type]:Fc.dtype,Rc=!!Sb.normalized,vd=Sb.size|0,ad=Sb.offset|0,xc=Sb.stride|0,ud=Sb.divisor|0);gc=$a.location;kc=V[gc];if(1===pc){kc.buffer||W.enableVertexAttribArray(gc);zc=vd||1;if(kc.type!==jc||kc.size!==zc||kc.buffer!==Fc||kc.normalized!==Rc||kc.offset!==ad||kc.stride!==xc)W.bindBuffer(34962,Fc.buffer),W.vertexAttribPointer(gc,zc,jc,Rc,xc,ad),kc.type=jc,kc.size=zc,kc.buffer=Fc,kc.normalized=Rc,kc.offset=ad,kc.stride=xc;kc.divisor!==ud&&(l.vertexAttribDivisorANGLE(gc,
ud),kc.divisor=ud)}else if(kc.buffer&&(W.disableVertexAttribArray(gc),kc.buffer=null),kc.x!==tc||kc.y!==Ub||kc.z!==Zb||kc.w!==ab)W.vertexAttrib4f(gc,tc,Ub,Zb,ab),kc.x=tc,kc.y=Ub,kc.z=Zb,kc.w=ab;Cc=aa.call(this,sa,d,x);fd=!1;Uc=null;Vc=0;Wc=!1;od=bd=0;gd=1;cd=0;nc=5126;hd=Yc=dd=ec=0;xa(Cc)?(fd=!0,Uc=ca.createStream(34962,Cc),nc=Uc.dtype):(Uc=ca.getBuffer(Cc))?nc=Uc.dtype:"constant"in Cc?(gd=2,"number"===typeof Cc.constant?(dd=Cc.constant,Yc=hd=ec=0):(dd=0<Cc.constant.length?Cc.constant[0]:0,Yc=1<Cc.constant.length?
Cc.constant[1]:0,hd=2<Cc.constant.length?Cc.constant[2]:0,ec=3<Cc.constant.length?Cc.constant[3]:0)):(Uc=xa(Cc.buffer)?ca.createStream(34962,Cc.buffer):ca.getBuffer(Cc.buffer),nc="type"in Cc?se[Cc.type]:Uc.dtype,Wc=!!Cc.normalized,od=Cc.size|0,bd=Cc.offset|0,cd=Cc.stride|0,Vc=Cc.divisor|0);Ac=ia.location;kd=V[Ac];if(1===gd){kd.buffer||W.enableVertexAttribArray(Ac);Pd=od||1;if(kd.type!==nc||kd.size!==Pd||kd.buffer!==Uc||kd.normalized!==Wc||kd.offset!==bd||kd.stride!==cd)W.bindBuffer(34962,Uc.buffer),
W.vertexAttribPointer(Ac,Pd,nc,Wc,cd,bd),kd.type=nc,kd.size=Pd,kd.buffer=Uc,kd.normalized=Wc,kd.offset=bd,kd.stride=cd;kd.divisor!==Vc&&(l.vertexAttribDivisorANGLE(Ac,Vc),kd.divisor=Vc)}else if(kd.buffer&&(W.disableVertexAttribArray(Ac),kd.buffer=null),kd.x!==dd||kd.y!==Yc||kd.z!==hd||kd.w!==ec)W.vertexAttrib4f(Ac,dd,Yc,hd,ec),kd.x=dd,kd.y=Yc,kd.z=hd,kd.w=ec;zd=T.call(this,sa,d,x);me=!1;ld=null;Ee=0;Qd=!1;Zd=fe=0;Rd=1;Kd=0;Hd=5126;td=wd=Xc=qd=0;xa(zd)?(me=!0,ld=ca.createStream(34962,zd),Hd=ld.dtype):
(ld=ca.getBuffer(zd))?Hd=ld.dtype:"constant"in zd?(Rd=2,"number"===typeof zd.constant?(Xc=zd.constant,wd=td=qd=0):(Xc=0<zd.constant.length?zd.constant[0]:0,wd=1<zd.constant.length?zd.constant[1]:0,td=2<zd.constant.length?zd.constant[2]:0,qd=3<zd.constant.length?zd.constant[3]:0)):(ld=xa(zd.buffer)?ca.createStream(34962,zd.buffer):ca.getBuffer(zd.buffer),Hd="type"in zd?se[zd.type]:ld.dtype,Qd=!!zd.normalized,Zd=zd.size|0,fe=zd.offset|0,Kd=zd.stride|0,Ee=zd.divisor|0);md=ta.location;xd=V[md];if(1===
Rd){xd.buffer||W.enableVertexAttribArray(md);Cd=Zd||1;if(xd.type!==Hd||xd.size!==Cd||xd.buffer!==ld||xd.normalized!==Qd||xd.offset!==fe||xd.stride!==Kd)W.bindBuffer(34962,ld.buffer),W.vertexAttribPointer(md,Cd,Hd,Qd,Kd,fe),xd.type=Hd,xd.size=Cd,xd.buffer=ld,xd.normalized=Qd,xd.offset=fe,xd.stride=Kd;xd.divisor!==Ee&&(l.vertexAttribDivisorANGLE(md,Ee),xd.divisor=Ee)}else if(xd.buffer&&(W.disableVertexAttribArray(md),xd.buffer=null),xd.x!==Xc||xd.y!==wd||xd.z!==td||xd.w!==qd)W.vertexAttrib4f(md,Xc,
wd,td,qd),xd.x=Xc,xd.y=wd,xd.z=td,xd.w=qd;Ed=R.call(this,sa,d,x);ie=!1;ke=null;ve=0;le=!1;ge=je=0;we=1;de=0;ne=5126;qe=xe=jd=Sc=0;xa(Ed)?(ie=!0,ke=ca.createStream(34962,Ed),ne=ke.dtype):(ke=ca.getBuffer(Ed))?ne=ke.dtype:"constant"in Ed?(we=2,"number"===typeof Ed.constant?(jd=Ed.constant,xe=qe=Sc=0):(jd=0<Ed.constant.length?Ed.constant[0]:0,xe=1<Ed.constant.length?Ed.constant[1]:0,qe=2<Ed.constant.length?Ed.constant[2]:0,Sc=3<Ed.constant.length?Ed.constant[3]:0)):(ke=xa(Ed.buffer)?ca.createStream(34962,
Ed.buffer):ca.getBuffer(Ed.buffer),ne="type"in Ed?se[Ed.type]:ke.dtype,le=!!Ed.normalized,ge=Ed.size|0,je=Ed.offset|0,de=Ed.stride|0,ve=Ed.divisor|0);Md=G.location;Sd=V[Md];if(1===we){Sd.buffer||W.enableVertexAttribArray(Md);Td=ge||4;if(Sd.type!==ne||Sd.size!==Td||Sd.buffer!==ke||Sd.normalized!==le||Sd.offset!==je||Sd.stride!==de)W.bindBuffer(34962,ke.buffer),W.vertexAttribPointer(Md,Td,ne,le,de,je),Sd.type=ne,Sd.size=Td,Sd.buffer=ke,Sd.normalized=le,Sd.offset=je,Sd.stride=de;Sd.divisor!==ve&&(l.vertexAttribDivisorANGLE(Md,
ve),Sd.divisor=ve)}else if(Sd.buffer&&(W.disableVertexAttribArray(Md),Sd.buffer=null),Sd.x!==jd||Sd.y!==xe||Sd.z!==qe||Sd.w!==Sc)W.vertexAttrib4f(Md,jd,xe,qe,Sc),Sd.x=jd,Sd.y=xe,Sd.z=qe,Sd.w=Sc;Ud=N.call(this,sa,d,x);oe=!1;Be=null;Fe=0;re=!1;Ve=Ue=0;Qe=1;ye=0;Ie=5126;Je=Me=Le=Ke=0;xa(Ud)?(oe=!0,Be=ca.createStream(34962,Ud),Ie=Be.dtype):(Be=ca.getBuffer(Ud))?Ie=Be.dtype:"constant"in Ud?(Qe=2,"number"===typeof Ud.constant?(Le=Ud.constant,Me=Je=Ke=0):(Le=0<Ud.constant.length?Ud.constant[0]:0,Me=1<Ud.constant.length?
Ud.constant[1]:0,Je=2<Ud.constant.length?Ud.constant[2]:0,Ke=3<Ud.constant.length?Ud.constant[3]:0)):(Be=xa(Ud.buffer)?ca.createStream(34962,Ud.buffer):ca.getBuffer(Ud.buffer),Ie="type"in Ud?se[Ud.type]:Be.dtype,re=!!Ud.normalized,Ve=Ud.size|0,Ue=Ud.offset|0,ye=Ud.stride|0,Fe=Ud.divisor|0);Nd=qa.location;$d=V[Nd];if(1===Qe){$d.buffer||W.enableVertexAttribArray(Nd);ce=Ve||4;if($d.type!==Ie||$d.size!==ce||$d.buffer!==Be||$d.normalized!==re||$d.offset!==Ue||$d.stride!==ye)W.bindBuffer(34962,Be.buffer),
W.vertexAttribPointer(Nd,ce,Ie,re,ye,Ue),$d.type=Ie,$d.size=ce,$d.buffer=Be,$d.normalized=re,$d.offset=Ue,$d.stride=ye;$d.divisor!==Fe&&(l.vertexAttribDivisorANGLE(Nd,Fe),$d.divisor=Fe)}else if($d.buffer&&(W.disableVertexAttribArray(Nd),$d.buffer=null),$d.x!==Le||$d.y!==Me||$d.z!==Je||$d.w!==Ke)W.vertexAttrib4f(Nd,Le,Me,Je,Ke),$d.x=Le,$d.y=Me,$d.z=Je,$d.w=Ke;ee=F.call(this,sa,d,x);Ne=!1;Id=null;Vd=0;Ge=!1;df=Oe=0;bf=1;We=0;Re=5126;Ye=Xe=$e=af=0;xa(ee)?(Ne=!0,Id=ca.createStream(34962,ee),Re=Id.dtype):
(Id=ca.getBuffer(ee))?Re=Id.dtype:"constant"in ee?(bf=2,"number"===typeof ee.constant?($e=ee.constant,Xe=Ye=af=0):($e=0<ee.constant.length?ee.constant[0]:0,Xe=1<ee.constant.length?ee.constant[1]:0,Ye=2<ee.constant.length?ee.constant[2]:0,af=3<ee.constant.length?ee.constant[3]:0)):(Id=xa(ee.buffer)?ca.createStream(34962,ee.buffer):ca.getBuffer(ee.buffer),Re="type"in ee?se[ee.type]:Id.dtype,Ge=!!ee.normalized,df=ee.size|0,Oe=ee.offset|0,We=ee.stride|0,Vd=ee.divisor|0);Wd=da.location;be=V[Wd];if(1===
bf){be.buffer||W.enableVertexAttribArray(Wd);Ze=df||1;if(be.type!==Re||be.size!==Ze||be.buffer!==Id||be.normalized!==Ge||be.offset!==Oe||be.stride!==We)W.bindBuffer(34962,Id.buffer),W.vertexAttribPointer(Wd,Ze,Re,Ge,We,Oe),be.type=Re,be.size=Ze,be.buffer=Id,be.normalized=Ge,be.offset=Oe,be.stride=We;be.divisor!==Vd&&(l.vertexAttribDivisorANGLE(Wd,Vd),be.divisor=Vd)}else if(be.buffer&&(W.disableVertexAttribArray(Wd),be.buffer=null),be.x!==$e||be.y!==Xe||be.z!==Ye||be.w!==af)W.vertexAttrib4f(Wd,$e,
Xe,Ye,af),be.x=$e,be.y=Xe,be.z=Ye,be.w=af;kf=sa.pixelRatio;x&&of===kf||(of=kf,W.uniform1f(ya.location,kf));gf=d.scale;lf=gf[0];nf=gf[1];x&&mf===lf&&sf===nf||(mf=lf,sf=nf,W.uniform2f(Z.location,lf,nf));pf=d.scaleFract;tf=pf[0];Df=pf[1];x&&Cf===tf&&Se===Df||(Cf=tf,Se=Df,W.uniform2f(Ca.location,tf,Df));He=d.translate;qf=He[0];Ef=He[1];x&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,W.uniform2f(ka.location,qf,Ef));Bf=d.translateFract;Ff=Bf[0];xf=Bf[1];x&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,W.uniform2f(Ba.location,Ff,xf));
wf=P.call(this,sa,d,x);zf=wf[0];Jf=wf[1];x&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,W.uniform2f(oa.location,zf,Jf));Lf=d.opacity;x&&Mf===Lf||(Mf=Lf,W.uniform1f(ja.location,Lf));(uf=d.markerTexture)&&"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;W.uniform1i(X.location,Rf.bind());If=d.elements;vf=null;(vf=(dg=xa(If))?mb.createStream(If):mb.getElements(If))&&W.bindBuffer(34963,vf.buffer.buffer);Sf=d.offset;if(Tf=d.count)0<qb?vf?l.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),qb):
l.drawArraysInstancedANGLE(0,Sf,Tf,qb):0>qb&&(vf?W.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):W.drawArrays(0,Sf,Tf)),sa.viewportWidth=Pb,sa.viewportHeight=kb,sb&&ca.destroyStream(Sa),Pa&&ca.destroyStream(Dc),ob&&ca.destroyStream(ic),Ld&&ca.destroyStream(Fc),fd&&ca.destroyStream(Uc),me&&ca.destroyStream(ld),ie&&ca.destroyStream(ke),oe&&ca.destroyStream(Be),Ne&&ca.destroyStream(Id),Rf.unbind(),dg&&mb.destroyStream(vf)}O.unbind();wa.dirty=!0;Fa.setVAO(null);p&&(b.cpuTime+=performance.now()-e)},
draw:function(a){var c,p,r,t,D,v,F,y,m,C,n,B,R,q,J,N,I,E,ma,Q,T,K,L,H,ha,z,P,O,za,la,S,U,ea,aa,ua,na,ra,Ga,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,zd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Pd,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,
Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye;c=fa.next;c!==fa.cur&&(c?W.bindFramebuffer(36160,c.framebuffer):W.bindFramebuffer(36160,null),fa.cur=c);if(wa.dirty){var Ie,Ke,Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,kf,of,gf,lf,mf,nf,sf,pf,tf;Ie=Ia.dither;Ie!==wa.dither&&(Ie?W.enable(3024):W.disable(3024),wa.dither=Ie);Ke=va[0];Le=va[1];if(Ke!==Ka[0]||Le!==Ka[1])W.blendEquationSeparate(Ke,Le),Ka[0]=Ke,Ka[1]=Le;Me=Ia.depth_func;Me!==wa.depth_func&&(W.depthFunc(Me),wa.depth_func=Me);
Je=cc[0];Nd=cc[1];if(Je!==Ha[0]||Nd!==Ha[1])W.depthRange(Je,Nd),Ha[0]=Je,Ha[1]=Nd;$d=Ia.depth_mask;$d!==wa.depth_mask&&(W.depthMask($d),wa.depth_mask=$d);ce=ba[0];ee=ba[1];Ne=ba[2];Id=ba[3];if(ce!==Gc[0]||ee!==Gc[1]||Ne!==Gc[2]||Id!==Gc[3])W.colorMask(ce,ee,Ne,Id),Gc[0]=ce,Gc[1]=ee,Gc[2]=Ne,Gc[3]=Id;Vd=Ia.cull_enable;Vd!==wa.cull_enable&&(Vd?W.enable(2884):W.disable(2884),wa.cull_enable=Vd);Ge=Ia.cull_face;Ge!==wa.cull_face&&(W.cullFace(Ge),wa.cull_face=Ge);Oe=Ia.frontFace;Oe!==wa.frontFace&&(W.frontFace(Oe),
wa.frontFace=Oe);df=Ia.lineWidth;df!==wa.lineWidth&&(W.lineWidth(df),wa.lineWidth=df);bf=Ia.polygonOffset_enable;bf!==wa.polygonOffset_enable&&(bf?W.enable(32823):W.disable(32823),wa.polygonOffset_enable=bf);We=dc[0];Re=dc[1];if(We!==Tb[0]||Re!==Tb[1])W.polygonOffset(We,Re),Tb[0]=We,Tb[1]=Re;af=Ia.sample_alpha;af!==wa.sample_alpha&&(af?W.enable(32926):W.disable(32926),wa.sample_alpha=af);$e=Ia.sample_enable;$e!==wa.sample_enable&&($e?W.enable(32928):W.disable(32928),wa.sample_enable=$e);Xe=Ae[0];
Ye=Ae[1];if(Xe!==Fd[0]||Ye!==Fd[1])W.sampleCoverage(Xe,Ye),Fd[0]=Xe,Fd[1]=Ye;Wd=Ia.stencil_mask;Wd!==wa.stencil_mask&&(W.stencilMask(Wd),wa.stencil_mask=Wd);be=Ce[0];Ze=Ce[1];kf=Ce[2];if(be!==Bd[0]||Ze!==Bd[1]||kf!==Bd[2])W.stencilFunc(be,Ze,kf),Bd[0]=be,Bd[1]=Ze,Bd[2]=kf;of=he[0];gf=he[1];lf=he[2];mf=he[3];if(of!==Dd[0]||gf!==Dd[1]||lf!==Dd[2]||mf!==Dd[3])W.stencilOpSeparate(of,gf,lf,mf),Dd[0]=of,Dd[1]=gf,Dd[2]=lf,Dd[3]=mf;nf=Xd[0];sf=Xd[1];pf=Xd[2];tf=Xd[3];if(nf!==pe[0]||sf!==pe[1]||pf!==pe[2]||
tf!==pe[3])W.stencilOpSeparate(nf,sf,pf,tf),pe[0]=nf,pe[1]=sf,pe[2]=pf,pe[3]=tf}p=a.viewport;r=p.x|0;t=p.y|0;D="width"in p?p.width|0:sa.framebufferWidth-r;v="height"in p?p.height|0:sa.framebufferHeight-t;F=sa.viewportWidth;sa.viewportWidth=D;y=sa.viewportHeight;sa.viewportHeight=v;W.viewport(r,t,D,v);ae[0]=r;ae[1]=t;ae[2]=D;ae[3]=v;W.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;W.enable(3042);wa.blend_enable=!0;W.blendFuncSeparate(770,771,773,1);eb[0]=770;eb[1]=771;eb[2]=773;eb[3]=1;W.disable(2929);
wa.depth_enable=!1;m=a.viewport;C=m.x|0;n=m.y|0;B="width"in m?m.width|0:sa.framebufferWidth-C;R="height"in m?m.height|0:sa.framebufferHeight-n;W.scissor(C,n,B,R);Od[0]=C;Od[1]=n;Od[2]=B;Od[3]=R;W.enable(3089);wa.scissor_enable=!0;W.disable(2960);wa.stencil_enable=!1;if(q=wa.profile)J=performance.now(),b.count++;W.useProgram(x.program);N=Gb.angle_instanced_arrays;Fa.setVAO(null);I=l.call(this,sa,a,0);E=!1;ma=null;Q=0;T=!1;L=K=0;H=1;ha=0;z=5126;la=za=O=P=0;xa(I)?(E=!0,ma=ca.createStream(34962,I),z=
ma.dtype):(ma=ca.getBuffer(I))?z=ma.dtype:"constant"in I?(H=2,"number"===typeof I.constant?(O=I.constant,za=la=P=0):(O=0<I.constant.length?I.constant[0]:0,za=1<I.constant.length?I.constant[1]:0,la=2<I.constant.length?I.constant[2]:0,P=3<I.constant.length?I.constant[3]:0)):(ma=xa(I.buffer)?ca.createStream(34962,I.buffer):ca.getBuffer(I.buffer),z="type"in I?se[I.type]:ma.dtype,T=!!I.normalized,L=I.size|0,K=I.offset|0,ha=I.stride|0,Q=I.divisor|0);S=Qa.location;U=V[S];if(1===H){U.buffer||W.enableVertexAttribArray(S);
ea=L||1;if(U.type!==z||U.size!==ea||U.buffer!==ma||U.normalized!==T||U.offset!==K||U.stride!==ha)W.bindBuffer(34962,ma.buffer),W.vertexAttribPointer(S,ea,z,T,ha,K),U.type=z,U.size=ea,U.buffer=ma,U.normalized=T,U.offset=K,U.stride=ha;U.divisor!==Q&&(N.vertexAttribDivisorANGLE(S,Q),U.divisor=Q)}else if(U.buffer&&(W.disableVertexAttribArray(S),U.buffer=null),U.x!==O||U.y!==za||U.z!==la||U.w!==P)W.vertexAttrib4f(S,O,za,la,P),U.x=O,U.y=za,U.z=la,U.w=P;aa=k.call(this,sa,a,0);ua=!1;na=null;ra=0;Ga=!1;Ob=
hb=0;bb=1;qb=0;Va=5126;sc=Kb=Ib=Kc=0;xa(aa)?(ua=!0,na=ca.createStream(34962,aa),Va=na.dtype):(na=ca.getBuffer(aa))?Va=na.dtype:"constant"in aa?(bb=2,"number"===typeof aa.constant?(Ib=aa.constant,Kb=sc=Kc=0):(Ib=0<aa.constant.length?aa.constant[0]:0,Kb=1<aa.constant.length?aa.constant[1]:0,sc=2<aa.constant.length?aa.constant[2]:0,Kc=3<aa.constant.length?aa.constant[3]:0)):(na=xa(aa.buffer)?ca.createStream(34962,aa.buffer):ca.getBuffer(aa.buffer),Va="type"in aa?se[aa.type]:na.dtype,Ga=!!aa.normalized,
Ob=aa.size|0,hb=aa.offset|0,qb=aa.stride|0,ra=aa.divisor|0);Pb=Hb.location;kb=V[Pb];if(1===bb){kb.buffer||W.enableVertexAttribArray(Pb);Fb=Ob||1;if(kb.type!==Va||kb.size!==Fb||kb.buffer!==na||kb.normalized!==Ga||kb.offset!==hb||kb.stride!==qb)W.bindBuffer(34962,na.buffer),W.vertexAttribPointer(Pb,Fb,Va,Ga,qb,hb),kb.type=Va,kb.size=Fb,kb.buffer=na,kb.normalized=Ga,kb.offset=hb,kb.stride=qb;kb.divisor!==ra&&(N.vertexAttribDivisorANGLE(Pb,ra),kb.divisor=ra)}else if(kb.buffer&&(W.disableVertexAttribArray(Pb),
kb.buffer=null),kb.x!==Ib||kb.y!==Kb||kb.z!==sc||kb.w!==Kc)W.vertexAttrib4f(Pb,Ib,Kb,sc,Kc),kb.x=Ib,kb.y=Kb,kb.z=sc,kb.w=Kc;Db=f.call(this,sa,a,0);zb=!1;ib=null;ac=0;Qb=!1;Sa=sb=0;Vb=1;tb=0;lc=5126;ub=Ja=rb=jb=0;xa(Db)?(zb=!0,ib=ca.createStream(34962,Db),lc=ib.dtype):(ib=ca.getBuffer(Db))?lc=ib.dtype:"constant"in Db?(Vb=2,"number"===typeof Db.constant?(rb=Db.constant,Ja=ub=jb=0):(rb=0<Db.constant.length?Db.constant[0]:0,Ja=1<Db.constant.length?Db.constant[1]:0,ub=2<Db.constant.length?Db.constant[2]:
0,jb=3<Db.constant.length?Db.constant[3]:0)):(ib=xa(Db.buffer)?ca.createStream(34962,Db.buffer):ca.getBuffer(Db.buffer),lc="type"in Db?se[Db.type]:ib.dtype,Qb=!!Db.normalized,Sa=Db.size|0,sb=Db.offset|0,tb=Db.stride|0,ac=Db.divisor|0);La=Aa.location;db=V[La];if(1===Vb){db.buffer||W.enableVertexAttribArray(La);gb=Sa||1;if(db.type!==lc||db.size!==gb||db.buffer!==ib||db.normalized!==Qb||db.offset!==sb||db.stride!==tb)W.bindBuffer(34962,ib.buffer),W.vertexAttribPointer(La,gb,lc,Qb,tb,sb),db.type=lc,db.size=
gb,db.buffer=ib,db.normalized=Qb,db.offset=sb,db.stride=tb;db.divisor!==ac&&(N.vertexAttribDivisorANGLE(La,ac),db.divisor=ac)}else if(db.buffer&&(W.disableVertexAttribArray(La),db.buffer=null),db.x!==rb||db.y!==Ja||db.z!==ub||db.w!==jb)W.vertexAttrib4f(La,rb,Ja,ub,jb),db.x=rb,db.y=Ja,db.z=ub,db.w=jb;Na=d.call(this,sa,a,0);lb=!1;Wa=null;wb=0;vb=!1;Dc=Pa=0;Ua=1;Lb=0;Eb=5126;Mb=Ya=zd=Ma=0;xa(Na)?(lb=!0,Wa=ca.createStream(34962,Na),Eb=Wa.dtype):(Wa=ca.getBuffer(Na))?Eb=Wa.dtype:"constant"in Na?(Ua=2,
"number"===typeof Na.constant?(zd=Na.constant,Ya=Mb=Ma=0):(zd=0<Na.constant.length?Na.constant[0]:0,Ya=1<Na.constant.length?Na.constant[1]:0,Mb=2<Na.constant.length?Na.constant[2]:0,Ma=3<Na.constant.length?Na.constant[3]:0)):(Wa=xa(Na.buffer)?ca.createStream(34962,Na.buffer):ca.getBuffer(Na.buffer),Eb="type"in Na?se[Na.type]:Wa.dtype,vb=!!Na.normalized,Dc=Na.size|0,Pa=Na.offset|0,Lb=Na.stride|0,wb=Na.divisor|0);Nb=$a.location;nb=V[Nb];if(1===Ua){nb.buffer||W.enableVertexAttribArray(Nb);Oa=Dc||1;if(nb.type!==
Eb||nb.size!==Oa||nb.buffer!==Wa||nb.normalized!==vb||nb.offset!==Pa||nb.stride!==Lb)W.bindBuffer(34962,Wa.buffer),W.vertexAttribPointer(Nb,Oa,Eb,vb,Lb,Pa),nb.type=Eb,nb.size=Oa,nb.buffer=Wa,nb.normalized=vb,nb.offset=Pa,nb.stride=Lb;nb.divisor!==wb&&(N.vertexAttribDivisorANGLE(Nb,wb),nb.divisor=wb)}else if(nb.buffer&&(W.disableVertexAttribArray(Nb),nb.buffer=null),nb.x!==zd||nb.y!==Ya||nb.z!==Mb||nb.w!==Ma)W.vertexAttrib4f(Nb,zd,Ya,Mb,Ma),nb.x=zd,nb.y=Ya,nb.z=Mb,nb.w=Ma;bc=e.call(this,sa,a,0);Ra=
!1;xb=null;yb=0;Ta=!1;ic=ob=0;Bc=1;wc=0;cb=5126;Qc=Xa=Mc=mc=0;xa(bc)?(Ra=!0,xb=ca.createStream(34962,bc),cb=xb.dtype):(xb=ca.getBuffer(bc))?cb=xb.dtype:"constant"in bc?(Bc=2,"number"===typeof bc.constant?(Mc=bc.constant,Xa=Qc=mc=0):(Mc=0<bc.constant.length?bc.constant[0]:0,Xa=1<bc.constant.length?bc.constant[1]:0,Qc=2<bc.constant.length?bc.constant[2]:0,mc=3<bc.constant.length?bc.constant[3]:0)):(xb=xa(bc.buffer)?ca.createStream(34962,bc.buffer):ca.getBuffer(bc.buffer),cb="type"in bc?se[bc.type]:
xb.dtype,Ta=!!bc.normalized,ic=bc.size|0,ob=bc.offset|0,wc=bc.stride|0,yb=bc.divisor|0);Bb=ia.location;Za=V[Bb];if(1===Bc){Za.buffer||W.enableVertexAttribArray(Bb);Xb=ic||1;if(Za.type!==cb||Za.size!==Xb||Za.buffer!==xb||Za.normalized!==Ta||Za.offset!==ob||Za.stride!==wc)W.bindBuffer(34962,xb.buffer),W.vertexAttribPointer(Bb,Xb,cb,Ta,wc,ob),Za.type=cb,Za.size=Xb,Za.buffer=xb,Za.normalized=Ta,Za.offset=ob,Za.stride=wc;Za.divisor!==yb&&(N.vertexAttribDivisorANGLE(Bb,yb),Za.divisor=yb)}else if(Za.buffer&&
(W.disableVertexAttribArray(Bb),Za.buffer=null),Za.x!==Mc||Za.y!==Xa||Za.z!==Qc||Za.w!==mc)W.vertexAttrib4f(Bb,Mc,Xa,Qc,mc),Za.x=Mc,Za.y=Xa,Za.z=Qc,Za.w=mc;uc=g.call(this,sa,a,0);Yb=!1;Rb=null;Nc=0;Sb=!1;Fc=Pd=0;ud=1;Rc=0;ad=5126;jc=xc=pc=vd=0;xa(uc)?(Yb=!0,Rb=ca.createStream(34962,uc),ad=Rb.dtype):(Rb=ca.getBuffer(uc))?ad=Rb.dtype:"constant"in uc?(ud=2,"number"===typeof uc.constant?(pc=uc.constant,xc=jc=vd=0):(pc=0<uc.constant.length?uc.constant[0]:0,xc=1<uc.constant.length?uc.constant[1]:0,jc=2<
uc.constant.length?uc.constant[2]:0,vd=3<uc.constant.length?uc.constant[3]:0)):(Rb=xa(uc.buffer)?ca.createStream(34962,uc.buffer):ca.getBuffer(uc.buffer),ad="type"in uc?se[uc.type]:Rb.dtype,Sb=!!uc.normalized,Fc=uc.size|0,Pd=uc.offset|0,Rc=uc.stride|0,Nc=uc.divisor|0);ab=ta.location;tc=V[ab];if(1===ud){tc.buffer||W.enableVertexAttribArray(ab);Ub=Fc||1;if(tc.type!==ad||tc.size!==Ub||tc.buffer!==Rb||tc.normalized!==Sb||tc.offset!==Pd||tc.stride!==Rc)W.bindBuffer(34962,Rb.buffer),W.vertexAttribPointer(ab,
Ub,ad,Sb,Rc,Pd),tc.type=ad,tc.size=Ub,tc.buffer=Rb,tc.normalized=Sb,tc.offset=Pd,tc.stride=Rc;tc.divisor!==Nc&&(N.vertexAttribDivisorANGLE(ab,Nc),tc.divisor=Nc)}else if(tc.buffer&&(W.disableVertexAttribArray(ab),tc.buffer=null),tc.x!==pc||tc.y!==xc||tc.z!==jc||tc.w!==vd)W.vertexAttrib4f(ab,pc,xc,jc,vd),tc.x=pc,tc.y=xc,tc.z=jc,tc.w=vd;Zb=w.call(this,sa,a,0);gc=!1;kc=null;zc=0;Cc=!1;Uc=fd=0;Vc=1;Wc=0;bd=5126;nc=cd=gd=od=0;xa(Zb)?(gc=!0,kc=ca.createStream(34962,Zb),bd=kc.dtype):(kc=ca.getBuffer(Zb))?
bd=kc.dtype:"constant"in Zb?(Vc=2,"number"===typeof Zb.constant?(gd=Zb.constant,cd=nc=od=0):(gd=0<Zb.constant.length?Zb.constant[0]:0,cd=1<Zb.constant.length?Zb.constant[1]:0,nc=2<Zb.constant.length?Zb.constant[2]:0,od=3<Zb.constant.length?Zb.constant[3]:0)):(kc=xa(Zb.buffer)?ca.createStream(34962,Zb.buffer):ca.getBuffer(Zb.buffer),bd="type"in Zb?se[Zb.type]:kc.dtype,Cc=!!Zb.normalized,Uc=Zb.size|0,fd=Zb.offset|0,Wc=Zb.stride|0,zc=Zb.divisor|0);ec=G.location;dd=V[ec];if(1===Vc){dd.buffer||W.enableVertexAttribArray(ec);
Yc=Uc||4;if(dd.type!==bd||dd.size!==Yc||dd.buffer!==kc||dd.normalized!==Cc||dd.offset!==fd||dd.stride!==Wc)W.bindBuffer(34962,kc.buffer),W.vertexAttribPointer(ec,Yc,bd,Cc,Wc,fd),dd.type=bd,dd.size=Yc,dd.buffer=kc,dd.normalized=Cc,dd.offset=fd,dd.stride=Wc;dd.divisor!==zc&&(N.vertexAttribDivisorANGLE(ec,zc),dd.divisor=zc)}else if(dd.buffer&&(W.disableVertexAttribArray(ec),dd.buffer=null),dd.x!==gd||dd.y!==cd||dd.z!==nc||dd.w!==od)W.vertexAttrib4f(ec,gd,cd,nc,od),dd.x=gd,dd.y=cd,dd.z=nc,dd.w=od;hd=
u.call(this,sa,a,0);Ac=!1;kd=null;Ad=0;ze=!1;ld=me=0;Ee=1;Qd=0;fe=5126;Hd=Kd=Rd=Zd=0;xa(hd)?(Ac=!0,kd=ca.createStream(34962,hd),fe=kd.dtype):(kd=ca.getBuffer(hd))?fe=kd.dtype:"constant"in hd?(Ee=2,"number"===typeof hd.constant?(Rd=hd.constant,Kd=Hd=Zd=0):(Rd=0<hd.constant.length?hd.constant[0]:0,Kd=1<hd.constant.length?hd.constant[1]:0,Hd=2<hd.constant.length?hd.constant[2]:0,Zd=3<hd.constant.length?hd.constant[3]:0)):(kd=xa(hd.buffer)?ca.createStream(34962,hd.buffer):ca.getBuffer(hd.buffer),fe="type"in
hd?se[hd.type]:kd.dtype,ze=!!hd.normalized,ld=hd.size|0,me=hd.offset|0,Qd=hd.stride|0,Ad=hd.divisor|0);qd=qa.location;Xc=V[qd];if(1===Ee){Xc.buffer||W.enableVertexAttribArray(qd);wd=ld||4;if(Xc.type!==fe||Xc.size!==wd||Xc.buffer!==kd||Xc.normalized!==ze||Xc.offset!==me||Xc.stride!==Qd)W.bindBuffer(34962,kd.buffer),W.vertexAttribPointer(qd,wd,fe,ze,Qd,me),Xc.type=fe,Xc.size=wd,Xc.buffer=kd,Xc.normalized=ze,Xc.offset=me,Xc.stride=Qd;Xc.divisor!==Ad&&(N.vertexAttribDivisorANGLE(qd,Ad),Xc.divisor=Ad)}else if(Xc.buffer&&
(W.disableVertexAttribArray(qd),Xc.buffer=null),Xc.x!==Rd||Xc.y!==Kd||Xc.z!==Hd||Xc.w!==Zd)W.vertexAttrib4f(qd,Rd,Kd,Hd,Zd),Xc.x=Rd,Xc.y=Kd,Xc.z=Hd,Xc.w=Zd;td=pa.call(this,sa,a,0);md=!1;xd=null;Cd=0;Ed=!1;ke=ie=0;ve=1;le=0;je=5126;ne=de=we=ge=0;xa(td)?(md=!0,xd=ca.createStream(34962,td),je=xd.dtype):(xd=ca.getBuffer(td))?je=xd.dtype:"constant"in td?(ve=2,"number"===typeof td.constant?(we=td.constant,de=ne=ge=0):(we=0<td.constant.length?td.constant[0]:0,de=1<td.constant.length?td.constant[1]:0,ne=
2<td.constant.length?td.constant[2]:0,ge=3<td.constant.length?td.constant[3]:0)):(xd=xa(td.buffer)?ca.createStream(34962,td.buffer):ca.getBuffer(td.buffer),je="type"in td?se[td.type]:xd.dtype,Ed=!!td.normalized,ke=td.size|0,ie=td.offset|0,le=td.stride|0,Cd=td.divisor|0);Sc=da.location;jd=V[Sc];if(1===ve){jd.buffer||W.enableVertexAttribArray(Sc);xe=ke||1;if(jd.type!==je||jd.size!==xe||jd.buffer!==xd||jd.normalized!==Ed||jd.offset!==ie||jd.stride!==le)W.bindBuffer(34962,xd.buffer),W.vertexAttribPointer(Sc,
xe,je,Ed,le,ie),jd.type=je,jd.size=xe,jd.buffer=xd,jd.normalized=Ed,jd.offset=ie,jd.stride=le;jd.divisor!==Cd&&(N.vertexAttribDivisorANGLE(Sc,Cd),jd.divisor=Cd)}else if(jd.buffer&&(W.disableVertexAttribArray(Sc),jd.buffer=null),jd.x!==we||jd.y!==de||jd.z!==ne||jd.w!==ge)W.vertexAttrib4f(Sc,we,de,ne,ge),jd.x=we,jd.y=de,jd.z=ne,jd.w=ge;W.uniform1i(M.location,!1);W.uniform1f(ya.location,sa.pixelRatio);qe=a.scale;W.uniform2f(Z.location,qe[0],qe[1]);Md=a.scaleFract;W.uniform2f(Ca.location,Md[0],Md[1]);
Sd=a.translate;W.uniform2f(ka.location,Sd[0],Sd[1]);Td=a.translateFract;W.uniform2f(Ba.location,Td[0],Td[1]);Ud=h.call(this,sa,a,0);W.uniform2f(oa.location,Ud[0],Ud[1]);W.uniform1f(ja.location,a.opacity);W.uniform1i(Da.location,A.bind());(oe=a.markerTexture)&&"framebuffer"===oe._reglType&&(oe=oe.color[0]);Be=oe._texture;W.uniform1i(X.location,Be.bind());Fe=a.elements;re=null;(re=(Ue=xa(Fe))?mb.createStream(Fe):mb.getElements(Fe))&&W.bindBuffer(34963,re.buffer.buffer);Ve=a.offset;if(Qe=a.count)ye=
Ea.instances,0<ye?re?N.drawElementsInstancedANGLE(0,Qe,re.type,Ve<<(re.type-5121>>1),ye):N.drawArraysInstancedANGLE(0,Ve,Qe,ye):0>ye&&(re?W.drawElements(0,Qe,re.type,Ve<<(re.type-5121>>1)):W.drawArrays(0,Ve,Qe)),wa.dirty=!0,Fa.setVAO(null),sa.viewportWidth=F,sa.viewportHeight=y,q&&(b.cpuTime+=performance.now()-J),E&&ca.destroyStream(ma),ua&&ca.destroyStream(na),zb&&ca.destroyStream(ib),lb&&ca.destroyStream(Wa),Ra&&ca.destroyStream(xb),Yb&&ca.destroyStream(Rb),gc&&ca.destroyStream(kc),Ac&&ca.destroyStream(kd),
md&&ca.destroyStream(xd),A.unbind(),Be.unbind(),Ue&&mb.destroyStream(re)},scope:function(a,f,e){var l,r,x,d,k,g,D,h,u,F,V,G,w,A,W,Aa,pa,M,ga,R,N,X,T,Z,fa,Hb,P,Qa,O,Y,da,la,ya,oa,qa,U,Fa,ba,aa,ia,$a,ka,na,Ba,Ca,ta,ja,va,Da,Gb,Ha,eb,Ka,Tb,Sa,cc,dc,Gc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Od,Ua,Lb,Eb,Ma,Fd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,ae,Fc,Xd,Rc,ad,Ce,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Dd,pe,me,ld,Bd,he,
Ae,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Se,He,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;l=a.viewport;r=l.x|0;x=l.y|0;d="width"in
l?l.width|0:sa.framebufferWidth-r;k="height"in l?l.height|0:sa.framebufferHeight-x;g=sa.viewportWidth;sa.viewportWidth=d;D=sa.viewportHeight;sa.viewportHeight=k;h=Pd[0];Pd[0]=r;u=Pd[1];Pd[1]=x;F=Pd[2];Pd[2]=d;V=Pd[3];Pd[3]=k;G=ha[0];ha[0]=0;w=ha[1];ha[1]=0;A=ha[2];ha[2]=0;W=ha[3];ha[3]=1;Aa=Ia.blend_enable;Ia.blend_enable=!0;pa=Ga[0];Ga[0]=770;M=Ga[1];Ga[1]=771;ga=Ga[2];Ga[2]=773;R=Ga[3];Ga[3]=1;N=Ia.depth_enable;Ia.depth_enable=!1;X=a.viewport;T=X.x|0;Z=X.y|0;fa="width"in X?X.width|0:sa.framebufferWidth-
T;Hb="height"in X?X.height|0:sa.framebufferHeight-Z;P=zd[0];zd[0]=T;Qa=zd[1];zd[1]=Z;O=zd[2];zd[2]=fa;Y=zd[3];zd[3]=Hb;da=Ia.scissor_enable;Ia.scissor_enable=!0;la=Ia.stencil_enable;Ia.stencil_enable=!1;if(ya=wa.profile)oa=performance.now(),b.count++;qa=a.elements;U=null;U=(Fa=xa(qa))?mb.createStream(qa):mb.getElements(qa);ba=Ea.elements;Ea.elements=U;aa=a.offset;ia=Ea.offset;Ea.offset=aa;$a=a.count;ka=Ea.count;Ea.count=$a;na=Ea.primitive;Ea.primitive=0;Ba=za[45];za[45]=!1;Ca=a.markerTexture;ta=za[48];
za[48]=Ca;ja=a.opacity;va=za[10];za[10]=ja;Da=n.call(this,sa,a,e);Gb=za[46];za[46]=Da;Ha=za[47];za[47]=q;eb=sa.pixelRatio;Ka=za[34];za[34]=eb;Tb=a.scale;Sa=za[6];za[6]=Tb;cc=a.scaleFract;dc=za[7];za[7]=cc;Gc=a.translate;jb=za[8];za[8]=Gc;rb=a.translateFract;Ja=za[9];za[9]=rb;ub=m.call(this,sa,a,e);La=!1;db=null;gb=0;Na=!1;Wa=lb=0;wb=1;vb=0;Pa=5126;Eb=Lb=Ua=Od=0;xa(ub)?(La=!0,db=ca.createStream(34962,ub),Pa=db.dtype):(db=ca.getBuffer(ub))?Pa=db.dtype:"constant"in ub?(wb=2,"number"===typeof ub.constant?
(Ua=ub.constant,Lb=Eb=Od=0):(Ua=0<ub.constant.length?ub.constant[0]:0,Lb=1<ub.constant.length?ub.constant[1]:0,Eb=2<ub.constant.length?ub.constant[2]:0,Od=3<ub.constant.length?ub.constant[3]:0)):(db=xa(ub.buffer)?ca.createStream(34962,ub.buffer):ca.getBuffer(ub.buffer),Pa="type"in ub?se[ub.type]:db.dtype,Na=!!ub.normalized,Wa=ub.size|0,lb=ub.offset|0,vb=ub.stride|0,gb=ub.divisor|0);Ma=E.buffer;E.buffer=db;Fd=E.divisor;E.divisor=gb;Ya=E.normalized;E.normalized=Na;Mb=E.offset;E.offset=lb;Nb=E.size;
E.size=Wa;nb=E.state;E.state=wb;Oa=E.stride;E.stride=vb;bc=E.type;E.type=Pa;Ra=E.w;E.w=Od;xb=E.x;E.x=Ua;yb=E.y;E.y=Lb;Ta=E.z;E.z=Eb;ob=J.call(this,sa,a,e);ic=!1;Bc=null;wc=0;cb=!1;Mc=mc=0;Xa=1;Qc=0;Bb=5126;Yb=uc=Xb=Za=0;xa(ob)?(ic=!0,Bc=ca.createStream(34962,ob),Bb=Bc.dtype):(Bc=ca.getBuffer(ob))?Bb=Bc.dtype:"constant"in ob?(Xa=2,"number"===typeof ob.constant?(Xb=ob.constant,uc=Yb=Za=0):(Xb=0<ob.constant.length?ob.constant[0]:0,uc=1<ob.constant.length?ob.constant[1]:0,Yb=2<ob.constant.length?ob.constant[2]:
0,Za=3<ob.constant.length?ob.constant[3]:0)):(Bc=xa(ob.buffer)?ca.createStream(34962,ob.buffer):ca.getBuffer(ob.buffer),Bb="type"in ob?se[ob.type]:Bc.dtype,cb=!!ob.normalized,Mc=ob.size|0,mc=ob.offset|0,Qc=ob.stride|0,wc=ob.divisor|0);Rb=H.buffer;H.buffer=Bc;Nc=H.divisor;H.divisor=wc;Sb=H.normalized;H.normalized=cb;ae=H.offset;H.offset=mc;Fc=H.size;H.size=Mc;Xd=H.state;H.state=Xa;Rc=H.stride;H.stride=Qc;ad=H.type;H.type=Bb;Ce=H.w;H.w=Za;pc=H.x;H.x=Xb;xc=H.y;H.y=uc;jc=H.z;H.z=Yb;ab=z.call(this,sa,
a,e);tc=!1;Ub=null;Zb=0;gc=!1;zc=kc=0;Cc=1;fd=0;Uc=5126;od=bd=Wc=Vc=0;xa(ab)?(tc=!0,Ub=ca.createStream(34962,ab),Uc=Ub.dtype):(Ub=ca.getBuffer(ab))?Uc=Ub.dtype:"constant"in ab?(Cc=2,"number"===typeof ab.constant?(Wc=ab.constant,bd=od=Vc=0):(Wc=0<ab.constant.length?ab.constant[0]:0,bd=1<ab.constant.length?ab.constant[1]:0,od=2<ab.constant.length?ab.constant[2]:0,Vc=3<ab.constant.length?ab.constant[3]:0)):(Ub=xa(ab.buffer)?ca.createStream(34962,ab.buffer):ca.getBuffer(ab.buffer),Uc="type"in ab?se[ab.type]:
Ub.dtype,gc=!!ab.normalized,zc=ab.size|0,kc=ab.offset|0,fd=ab.stride|0,Zb=ab.divisor|0);gd=y.buffer;y.buffer=Ub;cd=y.divisor;y.divisor=Zb;nc=y.normalized;y.normalized=gc;ec=y.offset;y.offset=kc;dd=y.size;y.size=zc;Yc=y.state;y.state=Cc;hd=y.stride;y.stride=fd;Ac=y.type;y.type=Uc;kd=y.w;y.w=Vc;Dd=y.x;y.x=Wc;pe=y.y;y.y=bd;me=y.z;y.z=od;ld=v.call(this,sa,a,e);Bd=!1;he=null;Ae=0;Zd=!1;Kd=Rd=0;Hd=1;qd=0;Xc=5126;xd=md=td=wd=0;xa(ld)?(Bd=!0,he=ca.createStream(34962,ld),Xc=he.dtype):(he=ca.getBuffer(ld))?
Xc=he.dtype:"constant"in ld?(Hd=2,"number"===typeof ld.constant?(td=ld.constant,md=xd=wd=0):(td=0<ld.constant.length?ld.constant[0]:0,md=1<ld.constant.length?ld.constant[1]:0,xd=2<ld.constant.length?ld.constant[2]:0,wd=3<ld.constant.length?ld.constant[3]:0)):(he=xa(ld.buffer)?ca.createStream(34962,ld.buffer):ca.getBuffer(ld.buffer),Xc="type"in ld?se[ld.type]:he.dtype,Zd=!!ld.normalized,Kd=ld.size|0,Rd=ld.offset|0,qd=ld.stride|0,Ae=ld.divisor|0);Cd=S.buffer;S.buffer=he;Ed=S.divisor;S.divisor=Ae;ie=
S.normalized;S.normalized=Zd;ke=S.offset;S.offset=Rd;ve=S.size;S.size=Kd;le=S.state;S.state=Hd;je=S.stride;S.stride=qd;ge=S.type;S.type=Xc;we=S.w;S.w=wd;de=S.x;S.x=td;ne=S.y;S.y=md;Sc=S.z;S.z=xd;jd=L.call(this,sa,a,e);xe=!1;qe=null;Md=0;Sd=!1;Ud=Td=0;oe=1;Be=0;Fe=5126;Qe=Ve=Ue=re=0;xa(jd)?(xe=!0,qe=ca.createStream(34962,jd),Fe=qe.dtype):(qe=ca.getBuffer(jd))?Fe=qe.dtype:"constant"in jd?(oe=2,"number"===typeof jd.constant?(Ue=jd.constant,Ve=Qe=re=0):(Ue=0<jd.constant.length?jd.constant[0]:0,Ve=1<jd.constant.length?
jd.constant[1]:0,Qe=2<jd.constant.length?jd.constant[2]:0,re=3<jd.constant.length?jd.constant[3]:0)):(qe=xa(jd.buffer)?ca.createStream(34962,jd.buffer):ca.getBuffer(jd.buffer),Fe="type"in jd?se[jd.type]:qe.dtype,Sd=!!jd.normalized,Ud=jd.size|0,Td=jd.offset|0,Be=jd.stride|0,Md=jd.divisor|0);ye=Q.buffer;Q.buffer=qe;Ie=Q.divisor;Q.divisor=Md;Ke=Q.normalized;Q.normalized=Sd;Le=Q.offset;Q.offset=Td;Me=Q.size;Q.size=Ud;Je=Q.state;Q.state=oe;Nd=Q.stride;Q.stride=Be;$d=Q.type;Q.type=Fe;ce=Q.w;Q.w=re;ee=Q.x;
Q.x=Ue;Ne=Q.y;Q.y=Ve;Id=Q.z;Q.z=Qe;Vd=C.call(this,sa,a,e);Ge=!1;Oe=null;df=0;bf=!1;Re=We=0;af=1;$e=0;Xe=5126;Ze=be=Wd=Ye=0;xa(Vd)?(Ge=!0,Oe=ca.createStream(34962,Vd),Xe=Oe.dtype):(Oe=ca.getBuffer(Vd))?Xe=Oe.dtype:"constant"in Vd?(af=2,"number"===typeof Vd.constant?(Wd=Vd.constant,be=Ze=Ye=0):(Wd=0<Vd.constant.length?Vd.constant[0]:0,be=1<Vd.constant.length?Vd.constant[1]:0,Ze=2<Vd.constant.length?Vd.constant[2]:0,Ye=3<Vd.constant.length?Vd.constant[3]:0)):(Oe=xa(Vd.buffer)?ca.createStream(34962,Vd.buffer):
ca.getBuffer(Vd.buffer),Xe="type"in Vd?se[Vd.type]:Oe.dtype,bf=!!Vd.normalized,Re=Vd.size|0,We=Vd.offset|0,$e=Vd.stride|0,df=Vd.divisor|0);kf=B.buffer;B.buffer=Oe;of=B.divisor;B.divisor=df;gf=B.normalized;B.normalized=bf;lf=B.offset;B.offset=We;mf=B.size;B.size=Re;nf=B.state;B.state=af;sf=B.stride;B.stride=$e;pf=B.type;B.type=Xe;tf=B.w;B.w=Ye;Cf=B.x;B.x=Wd;Df=B.y;B.y=be;Se=B.z;B.z=Ze;He=ra.call(this,sa,a,e);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;xa(He)?(qf=!0,rf=ca.createStream(34962,
He),yf=rf.dtype):(rf=ca.getBuffer(He))?yf=rf.dtype:"constant"in He?(Gf=2,"number"===typeof He.constant?(zf=He.constant,Af=Jf=wf=0):(zf=0<He.constant.length?He.constant[0]:0,Af=1<He.constant.length?He.constant[1]:0,Jf=2<He.constant.length?He.constant[2]:0,wf=3<He.constant.length?He.constant[3]:0)):(rf=xa(He.buffer)?ca.createStream(34962,He.buffer):ca.getBuffer(He.buffer),yf="type"in He?se[He.type]:rf.dtype,Hf=!!He.normalized,Ff=He.size|0,Bf=He.offset|0,xf=He.stride|0,Ef=He.divisor|0);Kf=I.buffer;I.buffer=
rf;Lf=I.divisor;I.divisor=Ef;Mf=I.normalized;I.normalized=Hf;uf=I.offset;I.offset=Bf;Rf=I.size;I.size=Ff;If=I.state;I.state=Gf;vf=I.stride;I.stride=xf;dg=I.type;I.type=yf;Sf=I.w;I.w=wf;Tf=I.x;I.x=zf;qg=I.y;I.y=Af;hf=I.z;I.z=Jf;ef=K.call(this,sa,a,e);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;xa(ef)?(Nf=!0,Of=ca.createStream(34962,ef),Uf=Of.dtype):(Of=ca.getBuffer(ef))?Uf=Of.dtype:"constant"in ef?(ig=2,"number"===typeof ef.constant?(Yf=ef.constant,Zf=jg=Xf=0):(Yf=0<ef.constant.length?
ef.constant[0]:0,Zf=1<ef.constant.length?ef.constant[1]:0,jg=2<ef.constant.length?ef.constant[2]:0,Xf=3<ef.constant.length?ef.constant[3]:0)):(Of=xa(ef.buffer)?ca.createStream(34962,ef.buffer):ca.getBuffer(ef.buffer),Uf="type"in ef?se[ef.type]:Of.dtype,fg=!!ef.normalized,hg=ef.size|0,gg=ef.offset|0,Wf=ef.stride|0,eg=ef.divisor|0);rg=t.buffer;t.buffer=Of;sg=t.divisor;t.divisor=eg;tg=t.normalized;t.normalized=fg;ug=t.offset;t.offset=gg;vg=t.size;t.size=hg;wg=t.state;t.state=ig;xg=t.stride;t.stride=
Wf;yg=t.type;t.type=Uf;zg=t.w;t.w=Xf;Ag=t.x;t.x=Yf;Bg=t.y;t.y=Zf;jf=t.z;t.z=jg;ff=p.call(this,sa,a,e);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;xa(ff)?(Pf=!0,Qf=ca.createStream(34962,ff),Vf=Qf.dtype):(Qf=ca.getBuffer(ff))?Vf=Qf.dtype:"constant"in ff?(og=2,"number"===typeof ff.constant?(bg=ff.constant,cg=pg=ag=0):(bg=0<ff.constant.length?ff.constant[0]:0,cg=1<ff.constant.length?ff.constant[1]:0,pg=2<ff.constant.length?ff.constant[2]:0,ag=3<ff.constant.length?ff.constant[3]:0)):
(Qf=xa(ff.buffer)?ca.createStream(34962,ff.buffer):ca.getBuffer(ff.buffer),Vf="type"in ff?se[ff.type]:Qf.dtype,lg=!!ff.normalized,ng=ff.size|0,mg=ff.offset|0,$f=ff.stride|0,kg=ff.divisor|0);Cg=c.buffer;c.buffer=Qf;Dg=c.divisor;c.divisor=kg;Eg=c.normalized;c.normalized=lg;Fg=c.offset;c.offset=mg;Gg=c.size;c.size=ng;Hg=c.state;c.state=og;Ig=c.stride;c.stride=$f;Jg=c.type;c.type=Vf;Kg=c.w;c.w=ag;Lg=c.x;c.x=bg;Mg=c.y;c.y=cg;Ng=c.z;c.z=pg;Og=ma.vert;ma.vert=44;Pg=ma.frag;ma.frag=43;wa.dirty=!0;f(sa,a,
e);sa.viewportWidth=g;sa.viewportHeight=D;Pd[0]=h;Pd[1]=u;Pd[2]=F;Pd[3]=V;ha[0]=G;ha[1]=w;ha[2]=A;ha[3]=W;Ia.blend_enable=Aa;Ga[0]=pa;Ga[1]=M;Ga[2]=ga;Ga[3]=R;Ia.depth_enable=N;zd[0]=P;zd[1]=Qa;zd[2]=O;zd[3]=Y;Ia.scissor_enable=da;Ia.stencil_enable=la;ya&&(b.cpuTime+=performance.now()-oa);Fa&&mb.destroyStream(U);Ea.elements=ba;Ea.offset=ia;Ea.count=ka;Ea.primitive=na;za[45]=Ba;za[48]=ta;za[10]=va;za[46]=Gb;za[47]=Ha;za[34]=Ka;za[6]=Sa;za[7]=dc;za[8]=jb;za[9]=Ja;La&&ca.destroyStream(db);E.buffer=Ma;
E.divisor=Fd;E.normalized=Ya;E.offset=Mb;E.size=Nb;E.state=nb;E.stride=Oa;E.type=bc;E.w=Ra;E.x=xb;E.y=yb;E.z=Ta;ic&&ca.destroyStream(Bc);H.buffer=Rb;H.divisor=Nc;H.normalized=Sb;H.offset=ae;H.size=Fc;H.state=Xd;H.stride=Rc;H.type=ad;H.w=Ce;H.x=pc;H.y=xc;H.z=jc;tc&&ca.destroyStream(Ub);y.buffer=gd;y.divisor=cd;y.normalized=nc;y.offset=ec;y.size=dd;y.state=Yc;y.stride=hd;y.type=Ac;y.w=kd;y.x=Dd;y.y=pe;y.z=me;Bd&&ca.destroyStream(he);S.buffer=Cd;S.divisor=Ed;S.normalized=ie;S.offset=ke;S.size=ve;S.state=
le;S.stride=je;S.type=ge;S.w=we;S.x=de;S.y=ne;S.z=Sc;xe&&ca.destroyStream(qe);Q.buffer=ye;Q.divisor=Ie;Q.normalized=Ke;Q.offset=Le;Q.size=Me;Q.state=Je;Q.stride=Nd;Q.type=$d;Q.w=ce;Q.x=ee;Q.y=Ne;Q.z=Id;Ge&&ca.destroyStream(Oe);B.buffer=kf;B.divisor=of;B.normalized=gf;B.offset=lf;B.size=mf;B.state=nf;B.stride=sf;B.type=pf;B.w=tf;B.x=Cf;B.y=Df;B.z=Se;qf&&ca.destroyStream(rf);I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=uf;I.size=Rf;I.state=If;I.stride=vf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=hf;Nf&&
ca.destroyStream(Of);t.buffer=rg;t.divisor=sg;t.normalized=tg;t.offset=ug;t.size=vg;t.state=wg;t.stride=xg;t.type=yg;t.w=zg;t.x=Ag;t.y=Bg;t.z=jf;Pf&&ca.destroyStream(Qf);c.buffer=Cg;c.divisor=Dg;c.normalized=Eg;c.offset=Fg;c.size=Gg;c.state=Hg;c.stride=Ig;c.type=Jg;c.w=Kg;c.x=Lg;c.y=Mg;c.z=Ng;ma.vert=Og;ma.frag=Pg;wa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
b,x,l,k,f,d,e,g,w,u,pa,h,A,n,q,m,E,J,H,z,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb){var $a,V,ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa,ha,Y,va,Ka,Ga,eb,ba,Gc,cc,Ha,dc,Tb,Ae,Fd,zd,Od,Ce,Bd,Xd,pe,he,Dd,Pd,ae;$a=a.attributes;V=a.buffer;ca=a.context;sa=a.current;wa=a.draw;Ea=a.elements;mb=a.extensions;Gb=a.framebuffer;fa=a.gl;W=a.isBufferArgs;xa=a.next;Ia=a.shader;ma=a.uniforms;za=a.vao;Fa=xa.blend_color;ha=sa.blend_color;Y=xa.blend_equation;va=
sa.blend_equation;Ka=xa.blend_func;Ga=sa.blend_func;eb=xa.colorMask;ba=sa.colorMask;Gc=xa.depth_range;cc=sa.depth_range;Ha=xa.polygonOffset_offset;dc=sa.polygonOffset_offset;Tb=xa.sample_coverage;Ae=sa.sample_coverage;Fd=xa.scissor_box;zd=sa.scissor_box;Od=xa.stencil_func;Ce=sa.stencil_func;Bd=xa.stencil_opBack;Xd=sa.stencil_opBack;pe=xa.stencil_opFront;he=sa.stencil_opFront;Dd=xa.viewport;Pd=sa.viewport;ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,c){var f,p,e,l,x,d;f=Gb.next;f!==Gb.cur&&(f?fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),Gb.cur=f);if(sa.dirty){var k,g,t,h,v,u,y,w,A,m,C,n,B,pa,I,Ia,ga,q,J,ma,E,Q,K,L,H,z,Fa,S,ea,ua,ra,Ka,hb,Ob;k=xa.dither;k!==sa.dither&&(k?fa.enable(3024):fa.disable(3024),sa.dither=k);g=Y[0];t=Y[1];if(g!==va[0]||t!==va[1])fa.blendEquationSeparate(g,t),va[0]=g,va[1]=t;h=xa.depth_func;h!==sa.depth_func&&(fa.depthFunc(h),sa.depth_func=h);v=Gc[0];u=Gc[1];if(v!==cc[0]||
u!==cc[1])fa.depthRange(v,u),cc[0]=v,cc[1]=u;y=xa.depth_mask;y!==sa.depth_mask&&(fa.depthMask(y),sa.depth_mask=y);w=eb[0];A=eb[1];m=eb[2];C=eb[3];if(w!==ba[0]||A!==ba[1]||m!==ba[2]||C!==ba[3])fa.colorMask(w,A,m,C),ba[0]=w,ba[1]=A,ba[2]=m,ba[3]=C;n=xa.cull_enable;n!==sa.cull_enable&&(n?fa.enable(2884):fa.disable(2884),sa.cull_enable=n);B=xa.cull_face;B!==sa.cull_face&&(fa.cullFace(B),sa.cull_face=B);pa=xa.frontFace;pa!==sa.frontFace&&(fa.frontFace(pa),sa.frontFace=pa);I=xa.lineWidth;I!==sa.lineWidth&&
(fa.lineWidth(I),sa.lineWidth=I);Ia=xa.polygonOffset_enable;Ia!==sa.polygonOffset_enable&&(Ia?fa.enable(32823):fa.disable(32823),sa.polygonOffset_enable=Ia);ga=Ha[0];q=Ha[1];if(ga!==dc[0]||q!==dc[1])fa.polygonOffset(ga,q),dc[0]=ga,dc[1]=q;J=xa.sample_alpha;J!==sa.sample_alpha&&(J?fa.enable(32926):fa.disable(32926),sa.sample_alpha=J);ma=xa.sample_enable;ma!==sa.sample_enable&&(ma?fa.enable(32928):fa.disable(32928),sa.sample_enable=ma);E=Tb[0];Q=Tb[1];if(E!==Ae[0]||Q!==Ae[1])fa.sampleCoverage(E,Q),
Ae[0]=E,Ae[1]=Q;K=xa.stencil_mask;K!==sa.stencil_mask&&(fa.stencilMask(K),sa.stencil_mask=K);L=Od[0];H=Od[1];z=Od[2];if(L!==Ce[0]||H!==Ce[1]||z!==Ce[2])fa.stencilFunc(L,H,z),Ce[0]=L,Ce[1]=H,Ce[2]=z;Fa=pe[0];S=pe[1];ea=pe[2];ua=pe[3];if(Fa!==he[0]||S!==he[1]||ea!==he[2]||ua!==he[3])fa.stencilOpSeparate(Fa,S,ea,ua),he[0]=Fa,he[1]=S,he[2]=ea,he[3]=ua;ra=Bd[0];Ka=Bd[1];hb=Bd[2];Ob=Bd[3];if(ra!==Xd[0]||Ka!==Xd[1]||hb!==Xd[2]||Ob!==Xd[3])fa.stencilOpSeparate(ra,Ka,hb,Ob),Xd[0]=ra,Xd[1]=Ka,Xd[2]=hb,Xd[3]=
Ob}fa.blendColor(0,0,0,1);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=1;fa.enable(3042);sa.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;fa.disable(2929);sa.depth_enable=!1;fa.enable(3089);sa.scissor_enable=!0;fa.disable(2960);sa.stencil_enable=!1;if(p=sa.profile)e=performance.now(),b.count+=c;fa.useProgram(D.program);l=mb.angle_instanced_arrays;var bb;za.setVAO(null);fa.uniform1i(M.location,!1);fa.uniform1i(oa.location,O.bind());bb=wa.instances;for(x=0;x<c;++x){d=a[x];
var qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,Fd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Dd,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,
kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Se,He,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;qb=d.viewport;Va=qb.x|0;Kc=qb.y|0;Ib="width"in qb?qb.width|0:ca.framebufferWidth-Va;Kb="height"in qb?qb.height|0:ca.framebufferHeight-Kc;sc=ca.viewportWidth;ca.viewportWidth=Ib;Pb=ca.viewportHeight;ca.viewportHeight=Kb;fa.viewport(Va,Kc,Ib,Kb);Pd[0]=Va;Pd[1]=Kc;Pd[2]=Ib;Pd[3]=Kb;kb=d.viewport;Fb=kb.x|0;Db=kb.y|0;zb="width"in kb?kb.width|0:ca.framebufferWidth-Fb;ib="height"in kb?kb.height|0:ca.framebufferHeight-
Db;fa.scissor(Fb,Db,zb,ib);zd[0]=Fb;zd[1]=Db;zd[2]=zb;zd[3]=ib;ac=r.call(this,ca,d,x);Qb=!1;sb=null;Sa=0;Vb=!1;lc=tb=0;jb=1;rb=0;Ja=5126;gb=db=La=ub=0;W(ac)?(Qb=!0,sb=V.createStream(34962,ac),Ja=sb.dtype):(sb=V.getBuffer(ac))?Ja=sb.dtype:"constant"in ac?(jb=2,"number"===typeof ac.constant?(La=ac.constant,db=gb=ub=0):(La=0<ac.constant.length?ac.constant[0]:0,db=1<ac.constant.length?ac.constant[1]:0,gb=2<ac.constant.length?ac.constant[2]:0,ub=3<ac.constant.length?ac.constant[3]:0)):(sb=W(ac.buffer)?
V.createStream(34962,ac.buffer):V.getBuffer(ac.buffer),Ja="type"in ac?ae[ac.type]:sb.dtype,Vb=!!ac.normalized,lc=ac.size|0,tb=ac.offset|0,rb=ac.stride|0,Sa=ac.divisor|0);Na=Ba.location;lb=$a[Na];if(1===jb){lb.buffer||fa.enableVertexAttribArray(Na);Wa=lc||1;if(lb.type!==Ja||lb.size!==Wa||lb.buffer!==sb||lb.normalized!==Vb||lb.offset!==tb||lb.stride!==rb)fa.bindBuffer(34962,sb.buffer),fa.vertexAttribPointer(Na,Wa,Ja,Vb,rb,tb),lb.type=Ja,lb.size=Wa,lb.buffer=sb,lb.normalized=Vb,lb.offset=tb,lb.stride=
rb;lb.divisor!==Sa&&(l.vertexAttribDivisorANGLE(Na,Sa),lb.divisor=Sa)}else if(lb.buffer&&(fa.disableVertexAttribArray(Na),lb.buffer=null),lb.x!==La||lb.y!==db||lb.z!==gb||lb.w!==ub)fa.vertexAttrib4f(Na,La,db,gb,ub),lb.x=La,lb.y=db,lb.z=gb,lb.w=ub;wb=la.call(this,ca,d,x);vb=!1;Pa=null;Dc=0;Ua=!1;Eb=Lb=0;Ma=1;Fd=0;Ya=5126;Oa=nb=Nb=Mb=0;W(wb)?(vb=!0,Pa=V.createStream(34962,wb),Ya=Pa.dtype):(Pa=V.getBuffer(wb))?Ya=Pa.dtype:"constant"in wb?(Ma=2,"number"===typeof wb.constant?(Nb=wb.constant,nb=Oa=Mb=0):
(Nb=0<wb.constant.length?wb.constant[0]:0,nb=1<wb.constant.length?wb.constant[1]:0,Oa=2<wb.constant.length?wb.constant[2]:0,Mb=3<wb.constant.length?wb.constant[3]:0)):(Pa=W(wb.buffer)?V.createStream(34962,wb.buffer):V.getBuffer(wb.buffer),Ya="type"in wb?ae[wb.type]:Pa.dtype,Ua=!!wb.normalized,Eb=wb.size|0,Lb=wb.offset|0,Fd=wb.stride|0,Dc=wb.divisor|0);bc=Aa.location;Ra=$a[bc];if(1===Ma){Ra.buffer||fa.enableVertexAttribArray(bc);xb=Eb||1;if(Ra.type!==Ya||Ra.size!==xb||Ra.buffer!==Pa||Ra.normalized!==
Ua||Ra.offset!==Lb||Ra.stride!==Fd)fa.bindBuffer(34962,Pa.buffer),fa.vertexAttribPointer(bc,xb,Ya,Ua,Fd,Lb),Ra.type=Ya,Ra.size=xb,Ra.buffer=Pa,Ra.normalized=Ua,Ra.offset=Lb,Ra.stride=Fd;Ra.divisor!==Dc&&(l.vertexAttribDivisorANGLE(bc,Dc),Ra.divisor=Dc)}else if(Ra.buffer&&(fa.disableVertexAttribArray(bc),Ra.buffer=null),Ra.x!==Nb||Ra.y!==nb||Ra.z!==Oa||Ra.w!==Mb)fa.vertexAttrib4f(bc,Nb,nb,Oa,Mb),Ra.x=Nb,Ra.y=nb,Ra.z=Oa,Ra.w=Mb;yb=na.call(this,ca,d,x);Ta=!1;ob=null;ic=0;Bc=!1;cb=wc=0;mc=1;Mc=0;Xa=5126;
Xb=Za=Bb=Qc=0;W(yb)?(Ta=!0,ob=V.createStream(34962,yb),Xa=ob.dtype):(ob=V.getBuffer(yb))?Xa=ob.dtype:"constant"in yb?(mc=2,"number"===typeof yb.constant?(Bb=yb.constant,Za=Xb=Qc=0):(Bb=0<yb.constant.length?yb.constant[0]:0,Za=1<yb.constant.length?yb.constant[1]:0,Xb=2<yb.constant.length?yb.constant[2]:0,Qc=3<yb.constant.length?yb.constant[3]:0)):(ob=W(yb.buffer)?V.createStream(34962,yb.buffer):V.getBuffer(yb.buffer),Xa="type"in yb?ae[yb.type]:ob.dtype,Bc=!!yb.normalized,cb=yb.size|0,wc=yb.offset|
0,Mc=yb.stride|0,ic=yb.divisor|0);uc=Qa.location;Yb=$a[uc];if(1===mc){Yb.buffer||fa.enableVertexAttribArray(uc);Rb=cb||1;if(Yb.type!==Xa||Yb.size!==Rb||Yb.buffer!==ob||Yb.normalized!==Bc||Yb.offset!==wc||Yb.stride!==Mc)fa.bindBuffer(34962,ob.buffer),fa.vertexAttribPointer(uc,Rb,Xa,Bc,Mc,wc),Yb.type=Xa,Yb.size=Rb,Yb.buffer=ob,Yb.normalized=Bc,Yb.offset=wc,Yb.stride=Mc;Yb.divisor!==ic&&(l.vertexAttribDivisorANGLE(uc,ic),Yb.divisor=ic)}else if(Yb.buffer&&(fa.disableVertexAttribArray(uc),Yb.buffer=null),
Yb.x!==Bb||Yb.y!==Za||Yb.z!==Xb||Yb.w!==Qc)fa.vertexAttrib4f(uc,Bb,Za,Xb,Qc),Yb.x=Bb,Yb.y=Za,Yb.z=Xb,Yb.w=Qc;Nc=U.call(this,ca,d,x);Sb=!1;Dd=null;Fc=0;ud=!1;ad=Rc=0;vd=1;pc=0;xc=5126;Ub=tc=ab=jc=0;W(Nc)?(Sb=!0,Dd=V.createStream(34962,Nc),xc=Dd.dtype):(Dd=V.getBuffer(Nc))?xc=Dd.dtype:"constant"in Nc?(vd=2,"number"===typeof Nc.constant?(ab=Nc.constant,tc=Ub=jc=0):(ab=0<Nc.constant.length?Nc.constant[0]:0,tc=1<Nc.constant.length?Nc.constant[1]:0,Ub=2<Nc.constant.length?Nc.constant[2]:0,jc=3<Nc.constant.length?
Nc.constant[3]:0)):(Dd=W(Nc.buffer)?V.createStream(34962,Nc.buffer):V.getBuffer(Nc.buffer),xc="type"in Nc?ae[Nc.type]:Dd.dtype,ud=!!Nc.normalized,ad=Nc.size|0,Rc=Nc.offset|0,pc=Nc.stride|0,Fc=Nc.divisor|0);Zb=Hb.location;gc=$a[Zb];if(1===vd){gc.buffer||fa.enableVertexAttribArray(Zb);kc=ad||1;if(gc.type!==xc||gc.size!==kc||gc.buffer!==Dd||gc.normalized!==ud||gc.offset!==Rc||gc.stride!==pc)fa.bindBuffer(34962,Dd.buffer),fa.vertexAttribPointer(Zb,kc,xc,ud,pc,Rc),gc.type=xc,gc.size=kc,gc.buffer=Dd,gc.normalized=
ud,gc.offset=Rc,gc.stride=pc;gc.divisor!==Fc&&(l.vertexAttribDivisorANGLE(Zb,Fc),gc.divisor=Fc)}else if(gc.buffer&&(fa.disableVertexAttribArray(Zb),gc.buffer=null),gc.x!==ab||gc.y!==tc||gc.z!==Ub||gc.w!==jc)fa.vertexAttrib4f(Zb,ab,tc,Ub,jc),gc.x=ab,gc.y=tc,gc.z=Ub,gc.w=jc;zc=aa.call(this,ca,d,x);Cc=!1;fd=null;Uc=0;Vc=!1;bd=Wc=0;od=1;gd=0;cd=5126;Yc=dd=ec=nc=0;W(zc)?(Cc=!0,fd=V.createStream(34962,zc),cd=fd.dtype):(fd=V.getBuffer(zc))?cd=fd.dtype:"constant"in zc?(od=2,"number"===typeof zc.constant?
(ec=zc.constant,dd=Yc=nc=0):(ec=0<zc.constant.length?zc.constant[0]:0,dd=1<zc.constant.length?zc.constant[1]:0,Yc=2<zc.constant.length?zc.constant[2]:0,nc=3<zc.constant.length?zc.constant[3]:0)):(fd=W(zc.buffer)?V.createStream(34962,zc.buffer):V.getBuffer(zc.buffer),cd="type"in zc?ae[zc.type]:fd.dtype,Vc=!!zc.normalized,bd=zc.size|0,Wc=zc.offset|0,gd=zc.stride|0,Uc=zc.divisor|0);hd=Ca.location;Ac=$a[hd];if(1===od){Ac.buffer||fa.enableVertexAttribArray(hd);kd=bd||1;if(Ac.type!==cd||Ac.size!==kd||Ac.buffer!==
fd||Ac.normalized!==Vc||Ac.offset!==Wc||Ac.stride!==gd)fa.bindBuffer(34962,fd.buffer),fa.vertexAttribPointer(hd,kd,cd,Vc,gd,Wc),Ac.type=cd,Ac.size=kd,Ac.buffer=fd,Ac.normalized=Vc,Ac.offset=Wc,Ac.stride=gd;Ac.divisor!==Uc&&(l.vertexAttribDivisorANGLE(hd,Uc),Ac.divisor=Uc)}else if(Ac.buffer&&(fa.disableVertexAttribArray(hd),Ac.buffer=null),Ac.x!==ec||Ac.y!==dd||Ac.z!==Yc||Ac.w!==nc)fa.vertexAttrib4f(hd,ec,dd,Yc,nc),Ac.x=ec,Ac.y=dd,Ac.z=Yc,Ac.w=nc;Ad=T.call(this,ca,d,x);ze=!1;me=null;ld=0;Ee=!1;fe=
Qd=0;Zd=1;Rd=0;Kd=5126;wd=Xc=qd=Hd=0;W(Ad)?(ze=!0,me=V.createStream(34962,Ad),Kd=me.dtype):(me=V.getBuffer(Ad))?Kd=me.dtype:"constant"in Ad?(Zd=2,"number"===typeof Ad.constant?(qd=Ad.constant,Xc=wd=Hd=0):(qd=0<Ad.constant.length?Ad.constant[0]:0,Xc=1<Ad.constant.length?Ad.constant[1]:0,wd=2<Ad.constant.length?Ad.constant[2]:0,Hd=3<Ad.constant.length?Ad.constant[3]:0)):(me=W(Ad.buffer)?V.createStream(34962,Ad.buffer):V.getBuffer(Ad.buffer),Kd="type"in Ad?ae[Ad.type]:me.dtype,Ee=!!Ad.normalized,fe=
Ad.size|0,Qd=Ad.offset|0,Rd=Ad.stride|0,ld=Ad.divisor|0);td=ta.location;md=$a[td];if(1===Zd){md.buffer||fa.enableVertexAttribArray(td);xd=fe||1;if(md.type!==Kd||md.size!==xd||md.buffer!==me||md.normalized!==Ee||md.offset!==Qd||md.stride!==Rd)fa.bindBuffer(34962,me.buffer),fa.vertexAttribPointer(td,xd,Kd,Ee,Rd,Qd),md.type=Kd,md.size=xd,md.buffer=me,md.normalized=Ee,md.offset=Qd,md.stride=Rd;md.divisor!==ld&&(l.vertexAttribDivisorANGLE(td,ld),md.divisor=ld)}else if(md.buffer&&(fa.disableVertexAttribArray(td),
md.buffer=null),md.x!==qd||md.y!==Xc||md.z!==wd||md.w!==Hd)fa.vertexAttrib4f(td,qd,Xc,wd,Hd),md.x=qd,md.y=Xc,md.z=wd,md.w=Hd;Cd=R.call(this,ca,d,x);Ed=!1;ie=null;ke=0;ve=!1;je=le=0;ge=1;we=0;de=5126;xe=jd=Sc=ne=0;W(Cd)?(Ed=!0,ie=V.createStream(34962,Cd),de=ie.dtype):(ie=V.getBuffer(Cd))?de=ie.dtype:"constant"in Cd?(ge=2,"number"===typeof Cd.constant?(Sc=Cd.constant,jd=xe=ne=0):(Sc=0<Cd.constant.length?Cd.constant[0]:0,jd=1<Cd.constant.length?Cd.constant[1]:0,xe=2<Cd.constant.length?Cd.constant[2]:
0,ne=3<Cd.constant.length?Cd.constant[3]:0)):(ie=W(Cd.buffer)?V.createStream(34962,Cd.buffer):V.getBuffer(Cd.buffer),de="type"in Cd?ae[Cd.type]:ie.dtype,ve=!!Cd.normalized,je=Cd.size|0,le=Cd.offset|0,we=Cd.stride|0,ke=Cd.divisor|0);qe=G.location;Md=$a[qe];if(1===ge){Md.buffer||fa.enableVertexAttribArray(qe);Sd=je||4;if(Md.type!==de||Md.size!==Sd||Md.buffer!==ie||Md.normalized!==ve||Md.offset!==le||Md.stride!==we)fa.bindBuffer(34962,ie.buffer),fa.vertexAttribPointer(qe,Sd,de,ve,we,le),Md.type=de,Md.size=
Sd,Md.buffer=ie,Md.normalized=ve,Md.offset=le,Md.stride=we;Md.divisor!==ke&&(l.vertexAttribDivisorANGLE(qe,ke),Md.divisor=ke)}else if(Md.buffer&&(fa.disableVertexAttribArray(qe),Md.buffer=null),Md.x!==Sc||Md.y!==jd||Md.z!==xe||Md.w!==ne)fa.vertexAttrib4f(qe,Sc,jd,xe,ne),Md.x=Sc,Md.y=jd,Md.z=xe,Md.w=ne;Td=N.call(this,ca,d,x);Ud=!1;oe=null;Be=0;Fe=!1;Ue=re=0;Ve=1;Qe=0;ye=5126;Me=Le=Ke=Ie=0;W(Td)?(Ud=!0,oe=V.createStream(34962,Td),ye=oe.dtype):(oe=V.getBuffer(Td))?ye=oe.dtype:"constant"in Td?(Ve=2,"number"===
typeof Td.constant?(Ke=Td.constant,Le=Me=Ie=0):(Ke=0<Td.constant.length?Td.constant[0]:0,Le=1<Td.constant.length?Td.constant[1]:0,Me=2<Td.constant.length?Td.constant[2]:0,Ie=3<Td.constant.length?Td.constant[3]:0)):(oe=W(Td.buffer)?V.createStream(34962,Td.buffer):V.getBuffer(Td.buffer),ye="type"in Td?ae[Td.type]:oe.dtype,Fe=!!Td.normalized,Ue=Td.size|0,re=Td.offset|0,Qe=Td.stride|0,Be=Td.divisor|0);Je=qa.location;Nd=$a[Je];if(1===Ve){Nd.buffer||fa.enableVertexAttribArray(Je);$d=Ue||4;if(Nd.type!==
ye||Nd.size!==$d||Nd.buffer!==oe||Nd.normalized!==Fe||Nd.offset!==re||Nd.stride!==Qe)fa.bindBuffer(34962,oe.buffer),fa.vertexAttribPointer(Je,$d,ye,Fe,Qe,re),Nd.type=ye,Nd.size=$d,Nd.buffer=oe,Nd.normalized=Fe,Nd.offset=re,Nd.stride=Qe;Nd.divisor!==Be&&(l.vertexAttribDivisorANGLE(Je,Be),Nd.divisor=Be)}else if(Nd.buffer&&(fa.disableVertexAttribArray(Je),Nd.buffer=null),Nd.x!==Ke||Nd.y!==Le||Nd.z!==Me||Nd.w!==Ie)fa.vertexAttrib4f(Je,Ke,Le,Me,Ie),Nd.x=Ke,Nd.y=Le,Nd.z=Me,Nd.w=Ie;ce=F.call(this,ca,d,x);
ee=!1;Ne=null;Id=0;Vd=!1;Oe=Ge=0;df=1;bf=0;We=5126;Xe=$e=af=Re=0;W(ce)?(ee=!0,Ne=V.createStream(34962,ce),We=Ne.dtype):(Ne=V.getBuffer(ce))?We=Ne.dtype:"constant"in ce?(df=2,"number"===typeof ce.constant?(af=ce.constant,$e=Xe=Re=0):(af=0<ce.constant.length?ce.constant[0]:0,$e=1<ce.constant.length?ce.constant[1]:0,Xe=2<ce.constant.length?ce.constant[2]:0,Re=3<ce.constant.length?ce.constant[3]:0)):(Ne=W(ce.buffer)?V.createStream(34962,ce.buffer):V.getBuffer(ce.buffer),We="type"in ce?ae[ce.type]:Ne.dtype,
Vd=!!ce.normalized,Oe=ce.size|0,Ge=ce.offset|0,bf=ce.stride|0,Id=ce.divisor|0);Ye=da.location;Wd=$a[Ye];if(1===df){Wd.buffer||fa.enableVertexAttribArray(Ye);be=Oe||1;if(Wd.type!==We||Wd.size!==be||Wd.buffer!==Ne||Wd.normalized!==Vd||Wd.offset!==Ge||Wd.stride!==bf)fa.bindBuffer(34962,Ne.buffer),fa.vertexAttribPointer(Ye,be,We,Vd,bf,Ge),Wd.type=We,Wd.size=be,Wd.buffer=Ne,Wd.normalized=Vd,Wd.offset=Ge,Wd.stride=bf;Wd.divisor!==Id&&(l.vertexAttribDivisorANGLE(Ye,Id),Wd.divisor=Id)}else if(Wd.buffer&&
(fa.disableVertexAttribArray(Ye),Wd.buffer=null),Wd.x!==af||Wd.y!==$e||Wd.z!==Xe||Wd.w!==Re)fa.vertexAttrib4f(Ye,af,$e,Xe,Re),Wd.x=af,Wd.y=$e,Wd.z=Xe,Wd.w=Re;Ze=ca.pixelRatio;x&&kf===Ze||(kf=Ze,fa.uniform1f(Da.location,Ze));of=P.call(this,ca,d,x);gf=of[0];mf=of[1];x&&lf===gf&&nf===mf||(lf=gf,nf=mf,fa.uniform2f(ja.location,gf,mf));sf=d.scale;pf=sf[0];Cf=sf[1];x&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,fa.uniform2f(ya.location,pf,Cf));Se=d.scaleFract;He=Se[0];rf=Se[1];x&&qf===He&&Ef===rf||(qf=He,Ef=rf,fa.uniform2f(Z.location,
He,rf));Hf=d.translate;Bf=Hf[0];Gf=Hf[1];x&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,fa.uniform2f(ia.location,Bf,Gf));yf=d.translateFract;wf=yf[0];Af=yf[1];x&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,fa.uniform2f(ka.location,wf,Af));Kf=d.opacity;x&&Lf===Kf||(Lf=Kf,fa.uniform1f(X.location,Kf));Mf=d.elements;uf=null;(uf=(Rf=W(Mf))?Ea.createStream(Mf):Ea.getElements(Mf))&&fa.bindBuffer(34963,uf.buffer.buffer);If=d.offset;if(vf=d.count)0<bb?uf?l.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),bb):l.drawArraysInstancedANGLE(0,
If,vf,bb):0>bb&&(uf?fa.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):fa.drawArrays(0,If,vf)),ca.viewportWidth=sc,ca.viewportHeight=Pb,Qb&&V.destroyStream(sb),vb&&V.destroyStream(Pa),Ta&&V.destroyStream(ob),Sb&&V.destroyStream(Dd),Cc&&V.destroyStream(fd),ze&&V.destroyStream(me),Ed&&V.destroyStream(ie),Ud&&V.destroyStream(oe),ee&&V.destroyStream(Ne),Rf&&Ea.destroyStream(uf)}O.unbind();sa.dirty=!0;za.setVAO(null);p&&(b.cpuTime+=performance.now()-e)},draw:function(a){var c,p,r,t,D,v,F,y,m,C,n,B,I,
Ia,R,N,q,J,ma,E,Q,T,K,L,H,z,P,O,la,U,Fa,S,aa,ea,ua,na,ra,Ka,$b,hb,Ob,bb,qb,Va,Fd,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,Dd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad,ze,me,ld,Ee,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue;c=Gb.next;c!==Gb.cur&&
(c?fa.bindFramebuffer(36160,c.framebuffer):fa.bindFramebuffer(36160,null),Gb.cur=c);if(sa.dirty){var Ve,Qe,ye,Ie,Ke,Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,kf,of,gf,lf,mf,nf;Ve=xa.dither;Ve!==sa.dither&&(Ve?fa.enable(3024):fa.disable(3024),sa.dither=Ve);Qe=Y[0];ye=Y[1];if(Qe!==va[0]||ye!==va[1])fa.blendEquationSeparate(Qe,ye),va[0]=Qe,va[1]=ye;Ie=xa.depth_func;Ie!==sa.depth_func&&(fa.depthFunc(Ie),sa.depth_func=Ie);Ke=Gc[0];Le=Gc[1];if(Ke!==cc[0]||Le!==cc[1])fa.depthRange(Ke,
Le),cc[0]=Ke,cc[1]=Le;Me=xa.depth_mask;Me!==sa.depth_mask&&(fa.depthMask(Me),sa.depth_mask=Me);Je=eb[0];Nd=eb[1];$d=eb[2];ce=eb[3];if(Je!==ba[0]||Nd!==ba[1]||$d!==ba[2]||ce!==ba[3])fa.colorMask(Je,Nd,$d,ce),ba[0]=Je,ba[1]=Nd,ba[2]=$d,ba[3]=ce;ee=xa.cull_enable;ee!==sa.cull_enable&&(ee?fa.enable(2884):fa.disable(2884),sa.cull_enable=ee);Ne=xa.cull_face;Ne!==sa.cull_face&&(fa.cullFace(Ne),sa.cull_face=Ne);Id=xa.frontFace;Id!==sa.frontFace&&(fa.frontFace(Id),sa.frontFace=Id);Vd=xa.lineWidth;Vd!==sa.lineWidth&&
(fa.lineWidth(Vd),sa.lineWidth=Vd);Ge=xa.polygonOffset_enable;Ge!==sa.polygonOffset_enable&&(Ge?fa.enable(32823):fa.disable(32823),sa.polygonOffset_enable=Ge);Oe=Ha[0];df=Ha[1];if(Oe!==dc[0]||df!==dc[1])fa.polygonOffset(Oe,df),dc[0]=Oe,dc[1]=df;bf=xa.sample_alpha;bf!==sa.sample_alpha&&(bf?fa.enable(32926):fa.disable(32926),sa.sample_alpha=bf);We=xa.sample_enable;We!==sa.sample_enable&&(We?fa.enable(32928):fa.disable(32928),sa.sample_enable=We);Re=Tb[0];af=Tb[1];if(Re!==Ae[0]||af!==Ae[1])fa.sampleCoverage(Re,
af),Ae[0]=Re,Ae[1]=af;$e=xa.stencil_mask;$e!==sa.stencil_mask&&(fa.stencilMask($e),sa.stencil_mask=$e);Xe=Od[0];Ye=Od[1];Wd=Od[2];if(Xe!==Ce[0]||Ye!==Ce[1]||Wd!==Ce[2])fa.stencilFunc(Xe,Ye,Wd),Ce[0]=Xe,Ce[1]=Ye,Ce[2]=Wd;be=pe[0];Ze=pe[1];kf=pe[2];of=pe[3];if(be!==he[0]||Ze!==he[1]||kf!==he[2]||of!==he[3])fa.stencilOpSeparate(be,Ze,kf,of),he[0]=be,he[1]=Ze,he[2]=kf,he[3]=of;gf=Bd[0];lf=Bd[1];mf=Bd[2];nf=Bd[3];if(gf!==Xd[0]||lf!==Xd[1]||mf!==Xd[2]||nf!==Xd[3])fa.stencilOpSeparate(gf,lf,mf,nf),Xd[0]=
gf,Xd[1]=lf,Xd[2]=mf,Xd[3]=nf}p=a.viewport;r=p.x|0;t=p.y|0;D="width"in p?p.width|0:ca.framebufferWidth-r;v="height"in p?p.height|0:ca.framebufferHeight-t;F=ca.viewportWidth;ca.viewportWidth=D;y=ca.viewportHeight;ca.viewportHeight=v;fa.viewport(r,t,D,v);Pd[0]=r;Pd[1]=t;Pd[2]=D;Pd[3]=v;fa.blendColor(0,0,0,1);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=1;fa.enable(3042);sa.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;fa.disable(2929);sa.depth_enable=!1;m=a.viewport;C=m.x|
0;n=m.y|0;B="width"in m?m.width|0:ca.framebufferWidth-C;I="height"in m?m.height|0:ca.framebufferHeight-n;fa.scissor(C,n,B,I);zd[0]=C;zd[1]=n;zd[2]=B;zd[3]=I;fa.enable(3089);sa.scissor_enable=!0;fa.disable(2960);sa.stencil_enable=!1;if(Ia=sa.profile)R=performance.now(),b.count++;fa.useProgram(x.program);N=mb.angle_instanced_arrays;za.setVAO(null);q=l.call(this,ca,a,0);J=!1;ma=null;E=0;Q=!1;K=T=0;L=1;H=0;z=5126;U=la=O=P=0;W(q)?(J=!0,ma=V.createStream(34962,q),z=ma.dtype):(ma=V.getBuffer(q))?z=ma.dtype:
"constant"in q?(L=2,"number"===typeof q.constant?(O=q.constant,la=U=P=0):(O=0<q.constant.length?q.constant[0]:0,la=1<q.constant.length?q.constant[1]:0,U=2<q.constant.length?q.constant[2]:0,P=3<q.constant.length?q.constant[3]:0)):(ma=W(q.buffer)?V.createStream(34962,q.buffer):V.getBuffer(q.buffer),z="type"in q?ae[q.type]:ma.dtype,Q=!!q.normalized,K=q.size|0,T=q.offset|0,H=q.stride|0,E=q.divisor|0);Fa=Ba.location;S=$a[Fa];if(1===L){S.buffer||fa.enableVertexAttribArray(Fa);aa=K||1;if(S.type!==z||S.size!==
aa||S.buffer!==ma||S.normalized!==Q||S.offset!==T||S.stride!==H)fa.bindBuffer(34962,ma.buffer),fa.vertexAttribPointer(Fa,aa,z,Q,H,T),S.type=z,S.size=aa,S.buffer=ma,S.normalized=Q,S.offset=T,S.stride=H;S.divisor!==E&&(N.vertexAttribDivisorANGLE(Fa,E),S.divisor=E)}else if(S.buffer&&(fa.disableVertexAttribArray(Fa),S.buffer=null),S.x!==O||S.y!==la||S.z!==U||S.w!==P)fa.vertexAttrib4f(Fa,O,la,U,P),S.x=O,S.y=la,S.z=U,S.w=P;ea=k.call(this,ca,a,0);ua=!1;na=null;ra=0;Ka=!1;hb=$b=0;Ob=1;bb=0;qb=5126;Kb=Ib=
Fd=Va=0;W(ea)?(ua=!0,na=V.createStream(34962,ea),qb=na.dtype):(na=V.getBuffer(ea))?qb=na.dtype:"constant"in ea?(Ob=2,"number"===typeof ea.constant?(Fd=ea.constant,Ib=Kb=Va=0):(Fd=0<ea.constant.length?ea.constant[0]:0,Ib=1<ea.constant.length?ea.constant[1]:0,Kb=2<ea.constant.length?ea.constant[2]:0,Va=3<ea.constant.length?ea.constant[3]:0)):(na=W(ea.buffer)?V.createStream(34962,ea.buffer):V.getBuffer(ea.buffer),qb="type"in ea?ae[ea.type]:na.dtype,Ka=!!ea.normalized,hb=ea.size|0,$b=ea.offset|0,bb=ea.stride|
0,ra=ea.divisor|0);sc=Aa.location;Pb=$a[sc];if(1===Ob){Pb.buffer||fa.enableVertexAttribArray(sc);kb=hb||1;if(Pb.type!==qb||Pb.size!==kb||Pb.buffer!==na||Pb.normalized!==Ka||Pb.offset!==$b||Pb.stride!==bb)fa.bindBuffer(34962,na.buffer),fa.vertexAttribPointer(sc,kb,qb,Ka,bb,$b),Pb.type=qb,Pb.size=kb,Pb.buffer=na,Pb.normalized=Ka,Pb.offset=$b,Pb.stride=bb;Pb.divisor!==ra&&(N.vertexAttribDivisorANGLE(sc,ra),Pb.divisor=ra)}else if(Pb.buffer&&(fa.disableVertexAttribArray(sc),Pb.buffer=null),Pb.x!==Fd||
Pb.y!==Ib||Pb.z!==Kb||Pb.w!==Va)fa.vertexAttrib4f(sc,Fd,Ib,Kb,Va),Pb.x=Fd,Pb.y=Ib,Pb.z=Kb,Pb.w=Va;Fb=f.call(this,ca,a,0);Db=!1;zb=null;ib=0;ac=!1;sb=Qb=0;Sa=1;Vb=0;tb=5126;Ja=rb=jb=lc=0;W(Fb)?(Db=!0,zb=V.createStream(34962,Fb),tb=zb.dtype):(zb=V.getBuffer(Fb))?tb=zb.dtype:"constant"in Fb?(Sa=2,"number"===typeof Fb.constant?(jb=Fb.constant,rb=Ja=lc=0):(jb=0<Fb.constant.length?Fb.constant[0]:0,rb=1<Fb.constant.length?Fb.constant[1]:0,Ja=2<Fb.constant.length?Fb.constant[2]:0,lc=3<Fb.constant.length?
Fb.constant[3]:0)):(zb=W(Fb.buffer)?V.createStream(34962,Fb.buffer):V.getBuffer(Fb.buffer),tb="type"in Fb?ae[Fb.type]:zb.dtype,ac=!!Fb.normalized,sb=Fb.size|0,Qb=Fb.offset|0,Vb=Fb.stride|0,ib=Fb.divisor|0);ub=Qa.location;La=$a[ub];if(1===Sa){La.buffer||fa.enableVertexAttribArray(ub);db=sb||1;if(La.type!==tb||La.size!==db||La.buffer!==zb||La.normalized!==ac||La.offset!==Qb||La.stride!==Vb)fa.bindBuffer(34962,zb.buffer),fa.vertexAttribPointer(ub,db,tb,ac,Vb,Qb),La.type=tb,La.size=db,La.buffer=zb,La.normalized=
ac,La.offset=Qb,La.stride=Vb;La.divisor!==ib&&(N.vertexAttribDivisorANGLE(ub,ib),La.divisor=ib)}else if(La.buffer&&(fa.disableVertexAttribArray(ub),La.buffer=null),La.x!==jb||La.y!==rb||La.z!==Ja||La.w!==lc)fa.vertexAttrib4f(ub,jb,rb,Ja,lc),La.x=jb,La.y=rb,La.z=Ja,La.w=lc;gb=d.call(this,ca,a,0);Na=!1;lb=null;Wa=0;wb=!1;Pa=vb=0;Dc=1;Ua=0;Lb=5126;Ya=Dd=Ma=Eb=0;W(gb)?(Na=!0,lb=V.createStream(34962,gb),Lb=lb.dtype):(lb=V.getBuffer(gb))?Lb=lb.dtype:"constant"in gb?(Dc=2,"number"===typeof gb.constant?(Ma=
gb.constant,Dd=Ya=Eb=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Dd=1<gb.constant.length?gb.constant[1]:0,Ya=2<gb.constant.length?gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(lb=W(gb.buffer)?V.createStream(34962,gb.buffer):V.getBuffer(gb.buffer),Lb="type"in gb?ae[gb.type]:lb.dtype,wb=!!gb.normalized,Pa=gb.size|0,vb=gb.offset|0,Ua=gb.stride|0,Wa=gb.divisor|0);Mb=Hb.location;Nb=$a[Mb];if(1===Dc){Nb.buffer||fa.enableVertexAttribArray(Mb);nb=Pa||1;if(Nb.type!==Lb||Nb.size!==nb||Nb.buffer!==
lb||Nb.normalized!==wb||Nb.offset!==vb||Nb.stride!==Ua)fa.bindBuffer(34962,lb.buffer),fa.vertexAttribPointer(Mb,nb,Lb,wb,Ua,vb),Nb.type=Lb,Nb.size=nb,Nb.buffer=lb,Nb.normalized=wb,Nb.offset=vb,Nb.stride=Ua;Nb.divisor!==Wa&&(N.vertexAttribDivisorANGLE(Mb,Wa),Nb.divisor=Wa)}else if(Nb.buffer&&(fa.disableVertexAttribArray(Mb),Nb.buffer=null),Nb.x!==Ma||Nb.y!==Dd||Nb.z!==Ya||Nb.w!==Eb)fa.vertexAttrib4f(Mb,Ma,Dd,Ya,Eb),Nb.x=Ma,Nb.y=Dd,Nb.z=Ya,Nb.w=Eb;Oa=e.call(this,ca,a,0);bc=!1;Ra=null;xb=0;yb=!1;ob=
Ta=0;ic=1;Bc=0;wc=5126;Xa=Mc=mc=cb=0;W(Oa)?(bc=!0,Ra=V.createStream(34962,Oa),wc=Ra.dtype):(Ra=V.getBuffer(Oa))?wc=Ra.dtype:"constant"in Oa?(ic=2,"number"===typeof Oa.constant?(mc=Oa.constant,Mc=Xa=cb=0):(mc=0<Oa.constant.length?Oa.constant[0]:0,Mc=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,cb=3<Oa.constant.length?Oa.constant[3]:0)):(Ra=W(Oa.buffer)?V.createStream(34962,Oa.buffer):V.getBuffer(Oa.buffer),wc="type"in Oa?ae[Oa.type]:Ra.dtype,yb=!!Oa.normalized,ob=
Oa.size|0,Ta=Oa.offset|0,Bc=Oa.stride|0,xb=Oa.divisor|0);Qc=Ca.location;Bb=$a[Qc];if(1===ic){Bb.buffer||fa.enableVertexAttribArray(Qc);Za=ob||1;if(Bb.type!==wc||Bb.size!==Za||Bb.buffer!==Ra||Bb.normalized!==yb||Bb.offset!==Ta||Bb.stride!==Bc)fa.bindBuffer(34962,Ra.buffer),fa.vertexAttribPointer(Qc,Za,wc,yb,Bc,Ta),Bb.type=wc,Bb.size=Za,Bb.buffer=Ra,Bb.normalized=yb,Bb.offset=Ta,Bb.stride=Bc;Bb.divisor!==xb&&(N.vertexAttribDivisorANGLE(Qc,xb),Bb.divisor=xb)}else if(Bb.buffer&&(fa.disableVertexAttribArray(Qc),
Bb.buffer=null),Bb.x!==mc||Bb.y!==Mc||Bb.z!==Xa||Bb.w!==cb)fa.vertexAttrib4f(Qc,mc,Mc,Xa,cb),Bb.x=mc,Bb.y=Mc,Bb.z=Xa,Bb.w=cb;Xb=g.call(this,ca,a,0);uc=!1;Yb=null;Rb=0;Nc=!1;Ld=Sb=0;Fc=1;ud=0;Rc=5126;xc=pc=vd=ad=0;W(Xb)?(uc=!0,Yb=V.createStream(34962,Xb),Rc=Yb.dtype):(Yb=V.getBuffer(Xb))?Rc=Yb.dtype:"constant"in Xb?(Fc=2,"number"===typeof Xb.constant?(vd=Xb.constant,pc=xc=ad=0):(vd=0<Xb.constant.length?Xb.constant[0]:0,pc=1<Xb.constant.length?Xb.constant[1]:0,xc=2<Xb.constant.length?Xb.constant[2]:
0,ad=3<Xb.constant.length?Xb.constant[3]:0)):(Yb=W(Xb.buffer)?V.createStream(34962,Xb.buffer):V.getBuffer(Xb.buffer),Rc="type"in Xb?ae[Xb.type]:Yb.dtype,Nc=!!Xb.normalized,Ld=Xb.size|0,Sb=Xb.offset|0,ud=Xb.stride|0,Rb=Xb.divisor|0);jc=ta.location;ab=$a[jc];if(1===Fc){ab.buffer||fa.enableVertexAttribArray(jc);tc=Ld||1;if(ab.type!==Rc||ab.size!==tc||ab.buffer!==Yb||ab.normalized!==Nc||ab.offset!==Sb||ab.stride!==ud)fa.bindBuffer(34962,Yb.buffer),fa.vertexAttribPointer(jc,tc,Rc,Nc,ud,Sb),ab.type=Rc,
ab.size=tc,ab.buffer=Yb,ab.normalized=Nc,ab.offset=Sb,ab.stride=ud;ab.divisor!==Rb&&(N.vertexAttribDivisorANGLE(jc,Rb),ab.divisor=Rb)}else if(ab.buffer&&(fa.disableVertexAttribArray(jc),ab.buffer=null),ab.x!==vd||ab.y!==pc||ab.z!==xc||ab.w!==ad)fa.vertexAttrib4f(jc,vd,pc,xc,ad),ab.x=vd,ab.y=pc,ab.z=xc,ab.w=ad;Ub=w.call(this,ca,a,0);Zb=!1;gc=null;kc=0;zc=!1;fd=Cc=0;Uc=1;Vc=0;Wc=5126;cd=gd=od=bd=0;W(Ub)?(Zb=!0,gc=V.createStream(34962,Ub),Wc=gc.dtype):(gc=V.getBuffer(Ub))?Wc=gc.dtype:"constant"in Ub?
(Uc=2,"number"===typeof Ub.constant?(od=Ub.constant,gd=cd=bd=0):(od=0<Ub.constant.length?Ub.constant[0]:0,gd=1<Ub.constant.length?Ub.constant[1]:0,cd=2<Ub.constant.length?Ub.constant[2]:0,bd=3<Ub.constant.length?Ub.constant[3]:0)):(gc=W(Ub.buffer)?V.createStream(34962,Ub.buffer):V.getBuffer(Ub.buffer),Wc="type"in Ub?ae[Ub.type]:gc.dtype,zc=!!Ub.normalized,fd=Ub.size|0,Cc=Ub.offset|0,Vc=Ub.stride|0,kc=Ub.divisor|0);nc=G.location;ec=$a[nc];if(1===Uc){ec.buffer||fa.enableVertexAttribArray(nc);dd=fd||
4;if(ec.type!==Wc||ec.size!==dd||ec.buffer!==gc||ec.normalized!==zc||ec.offset!==Cc||ec.stride!==Vc)fa.bindBuffer(34962,gc.buffer),fa.vertexAttribPointer(nc,dd,Wc,zc,Vc,Cc),ec.type=Wc,ec.size=dd,ec.buffer=gc,ec.normalized=zc,ec.offset=Cc,ec.stride=Vc;ec.divisor!==kc&&(N.vertexAttribDivisorANGLE(nc,kc),ec.divisor=kc)}else if(ec.buffer&&(fa.disableVertexAttribArray(nc),ec.buffer=null),ec.x!==od||ec.y!==gd||ec.z!==cd||ec.w!==bd)fa.vertexAttrib4f(nc,od,gd,cd,bd),ec.x=od,ec.y=gd,ec.z=cd,ec.w=bd;Yc=u.call(this,
ca,a,0);hd=!1;Ac=null;kd=0;Ad=!1;me=ze=0;ld=1;Ee=0;Qd=5126;Kd=Rd=Zd=fe=0;W(Yc)?(hd=!0,Ac=V.createStream(34962,Yc),Qd=Ac.dtype):(Ac=V.getBuffer(Yc))?Qd=Ac.dtype:"constant"in Yc?(ld=2,"number"===typeof Yc.constant?(Zd=Yc.constant,Rd=Kd=fe=0):(Zd=0<Yc.constant.length?Yc.constant[0]:0,Rd=1<Yc.constant.length?Yc.constant[1]:0,Kd=2<Yc.constant.length?Yc.constant[2]:0,fe=3<Yc.constant.length?Yc.constant[3]:0)):(Ac=W(Yc.buffer)?V.createStream(34962,Yc.buffer):V.getBuffer(Yc.buffer),Qd="type"in Yc?ae[Yc.type]:
Ac.dtype,Ad=!!Yc.normalized,me=Yc.size|0,ze=Yc.offset|0,Ee=Yc.stride|0,kd=Yc.divisor|0);Hd=qa.location;qd=$a[Hd];if(1===ld){qd.buffer||fa.enableVertexAttribArray(Hd);Xc=me||4;if(qd.type!==Qd||qd.size!==Xc||qd.buffer!==Ac||qd.normalized!==Ad||qd.offset!==ze||qd.stride!==Ee)fa.bindBuffer(34962,Ac.buffer),fa.vertexAttribPointer(Hd,Xc,Qd,Ad,Ee,ze),qd.type=Qd,qd.size=Xc,qd.buffer=Ac,qd.normalized=Ad,qd.offset=ze,qd.stride=Ee;qd.divisor!==kd&&(N.vertexAttribDivisorANGLE(Hd,kd),qd.divisor=kd)}else if(qd.buffer&&
(fa.disableVertexAttribArray(Hd),qd.buffer=null),qd.x!==Zd||qd.y!==Rd||qd.z!==Kd||qd.w!==fe)fa.vertexAttrib4f(Hd,Zd,Rd,Kd,fe),qd.x=Zd,qd.y=Rd,qd.z=Kd,qd.w=fe;wd=pa.call(this,ca,a,0);td=!1;md=null;xd=0;Cd=!1;ie=Ed=0;ke=1;ve=0;le=5126;de=we=ge=je=0;W(wd)?(td=!0,md=V.createStream(34962,wd),le=md.dtype):(md=V.getBuffer(wd))?le=md.dtype:"constant"in wd?(ke=2,"number"===typeof wd.constant?(ge=wd.constant,we=de=je=0):(ge=0<wd.constant.length?wd.constant[0]:0,we=1<wd.constant.length?wd.constant[1]:0,de=2<
wd.constant.length?wd.constant[2]:0,je=3<wd.constant.length?wd.constant[3]:0)):(md=W(wd.buffer)?V.createStream(34962,wd.buffer):V.getBuffer(wd.buffer),le="type"in wd?ae[wd.type]:md.dtype,Cd=!!wd.normalized,ie=wd.size|0,Ed=wd.offset|0,ve=wd.stride|0,xd=wd.divisor|0);ne=da.location;Sc=$a[ne];if(1===ke){Sc.buffer||fa.enableVertexAttribArray(ne);jd=ie||1;if(Sc.type!==le||Sc.size!==jd||Sc.buffer!==md||Sc.normalized!==Cd||Sc.offset!==Ed||Sc.stride!==ve)fa.bindBuffer(34962,md.buffer),fa.vertexAttribPointer(ne,
jd,le,Cd,ve,Ed),Sc.type=le,Sc.size=jd,Sc.buffer=md,Sc.normalized=Cd,Sc.offset=Ed,Sc.stride=ve;Sc.divisor!==xd&&(N.vertexAttribDivisorANGLE(ne,xd),Sc.divisor=xd)}else if(Sc.buffer&&(fa.disableVertexAttribArray(ne),Sc.buffer=null),Sc.x!==ge||Sc.y!==we||Sc.z!==de||Sc.w!==je)fa.vertexAttrib4f(ne,ge,we,de,je),Sc.x=ge,Sc.y=we,Sc.z=de,Sc.w=je;fa.uniform1i(M.location,!1);fa.uniform1f(Da.location,ca.pixelRatio);xe=h.call(this,ca,a,0);fa.uniform2f(ja.location,xe[0],xe[1]);qe=a.scale;fa.uniform2f(ya.location,
qe[0],qe[1]);Md=a.scaleFract;fa.uniform2f(Z.location,Md[0],Md[1]);Sd=a.translate;fa.uniform2f(ia.location,Sd[0],Sd[1]);Td=a.translateFract;fa.uniform2f(ka.location,Td[0],Td[1]);fa.uniform1f(X.location,a.opacity);fa.uniform1i(oa.location,A.bind());Ud=a.elements;oe=null;(oe=(Be=W(Ud))?Ea.createStream(Ud):Ea.getElements(Ud))&&fa.bindBuffer(34963,oe.buffer.buffer);Fe=a.offset;if(re=a.count)Ue=wa.instances,0<Ue?oe?N.drawElementsInstancedANGLE(0,re,oe.type,Fe<<(oe.type-5121>>1),Ue):N.drawArraysInstancedANGLE(0,
Fe,re,Ue):0>Ue&&(oe?fa.drawElements(0,re,oe.type,Fe<<(oe.type-5121>>1)):fa.drawArrays(0,Fe,re)),sa.dirty=!0,za.setVAO(null),ca.viewportWidth=F,ca.viewportHeight=y,Ia&&(b.cpuTime+=performance.now()-R),J&&V.destroyStream(ma),ua&&V.destroyStream(na),Db&&V.destroyStream(zb),Na&&V.destroyStream(lb),bc&&V.destroyStream(Ra),uc&&V.destroyStream(Yb),Zb&&V.destroyStream(gc),hd&&V.destroyStream(Ac),td&&V.destroyStream(md),A.unbind(),Be&&Ea.destroyStream(oe)},scope:function(a,f,e){var l,r,x,d,k,g,D,h,u,F,G,w,
A,Aa,pa,N,ga,M,R,X,T,Z,fa,Hb,P,ha,Qa,O,Y,za,da,la,ya,oa,U,qa,ba,aa,ia,$a,na,ka,Ba,Ca,ta,ja,va,Da,Gb,Ha,Ga,mb,eb,Tb,cc,Sa,dc,tb,Gc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Od,Ua,Lb,Eb,Ma,zd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Pd,Fc,Xd,Rc,ad,Ce,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,he,pe,Bd,ld,Ae,Qd,fe,Zd,Rd,Kd,Hd,qd,Xc,wd,td,md,xd,Cd,Ed,ie,ke,ve,le,je,ge,we,de,ne,Sc,jd,xe,qe,Md,Sd,Td,Ud,oe,Be,Fe,re,Ue,Ve,Qe,ye,Ie,Ke,
Le,Me,Je,Nd,$d,ce,ee,Ne,Id,Vd,Ge,Oe,df,bf,We,Re,af,$e,Xe,Ye,Wd,be,Ze,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Se,He,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;l=a.viewport;r=l.x|0;x=l.y|0;d="width"in l?l.width|0:ca.framebufferWidth-r;k="height"in l?l.height|0:ca.framebufferHeight-x;g=ca.viewportWidth;ca.viewportWidth=
d;D=ca.viewportHeight;ca.viewportHeight=k;h=Dd[0];Dd[0]=r;u=Dd[1];Dd[1]=x;F=Dd[2];Dd[2]=d;G=Dd[3];Dd[3]=k;w=Fa[0];Fa[0]=0;A=Fa[1];Fa[1]=0;Aa=Fa[2];Fa[2]=0;pa=Fa[3];Fa[3]=1;N=xa.blend_enable;xa.blend_enable=!0;ga=Ka[0];Ka[0]=770;M=Ka[1];Ka[1]=771;R=Ka[2];Ka[2]=773;X=Ka[3];Ka[3]=1;T=xa.depth_enable;xa.depth_enable=!1;Z=a.viewport;fa=Z.x|0;Hb=Z.y|0;P="width"in Z?Z.width|0:ca.framebufferWidth-fa;ha="height"in Z?Z.height|0:ca.framebufferHeight-Hb;Qa=Fd[0];Fd[0]=fa;O=Fd[1];Fd[1]=Hb;Y=Fd[2];Fd[2]=P;za=Fd[3];
Fd[3]=ha;da=xa.scissor_enable;xa.scissor_enable=!0;la=xa.stencil_enable;xa.stencil_enable=!1;if(ya=sa.profile)oa=performance.now(),b.count++;U=a.elements;qa=null;qa=(ba=W(U))?Ea.createStream(U):Ea.getElements(U);aa=wa.elements;wa.elements=qa;ia=a.offset;$a=wa.offset;wa.offset=ia;na=a.count;ka=wa.count;wa.count=na;Ba=wa.primitive;wa.primitive=0;Ca=ma[45];ma[45]=!1;ta=a.markerTexture;ja=ma[48];ma[48]=ta;va=a.opacity;Da=ma[10];ma[10]=va;Gb=n.call(this,ca,a,e);Ha=ma[46];ma[46]=Gb;Ga=ma[47];ma[47]=q;mb=
ca.pixelRatio;eb=ma[34];ma[34]=mb;Tb=a.scale;cc=ma[6];ma[6]=Tb;Sa=a.scaleFract;dc=ma[7];ma[7]=Sa;tb=a.translate;Gc=ma[8];ma[8]=tb;jb=a.translateFract;rb=ma[9];ma[9]=jb;Ja=m.call(this,ca,a,e);ub=!1;La=null;db=0;gb=!1;lb=Na=0;Wa=1;wb=0;vb=5126;Lb=Ua=Od=Pa=0;W(Ja)?(ub=!0,La=V.createStream(34962,Ja),vb=La.dtype):(La=V.getBuffer(Ja))?vb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Od=Ja.constant,Ua=Lb=Pa=0):(Od=0<Ja.constant.length?Ja.constant[0]:0,Ua=1<Ja.constant.length?Ja.constant[1]:
0,Lb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=W(Ja.buffer)?V.createStream(34962,Ja.buffer):V.getBuffer(Ja.buffer),vb="type"in Ja?ae[Ja.type]:La.dtype,gb=!!Ja.normalized,lb=Ja.size|0,Na=Ja.offset|0,wb=Ja.stride|0,db=Ja.divisor|0);Eb=E.buffer;E.buffer=La;Ma=E.divisor;E.divisor=db;zd=E.normalized;E.normalized=gb;Ya=E.offset;E.offset=Na;Mb=E.size;E.size=lb;Nb=E.state;E.state=Wa;nb=E.stride;E.stride=wb;Oa=E.type;E.type=vb;bc=E.w;E.w=Pa;Ra=E.x;E.x=Od;xb=E.y;E.y=
Ua;yb=E.z;E.z=Lb;Ta=J.call(this,ca,a,e);ob=!1;ic=null;Bc=0;wc=!1;mc=cb=0;Mc=1;Xa=0;Qc=5126;uc=Xb=Za=Bb=0;W(Ta)?(ob=!0,ic=V.createStream(34962,Ta),Qc=ic.dtype):(ic=V.getBuffer(Ta))?Qc=ic.dtype:"constant"in Ta?(Mc=2,"number"===typeof Ta.constant?(Za=Ta.constant,Xb=uc=Bb=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Xb=1<Ta.constant.length?Ta.constant[1]:0,uc=2<Ta.constant.length?Ta.constant[2]:0,Bb=3<Ta.constant.length?Ta.constant[3]:0)):(ic=W(Ta.buffer)?V.createStream(34962,Ta.buffer):V.getBuffer(Ta.buffer),
Qc="type"in Ta?ae[Ta.type]:ic.dtype,wc=!!Ta.normalized,mc=Ta.size|0,cb=Ta.offset|0,Xa=Ta.stride|0,Bc=Ta.divisor|0);Yb=H.buffer;H.buffer=ic;Rb=H.divisor;H.divisor=Bc;Nc=H.normalized;H.normalized=wc;Sb=H.offset;H.offset=cb;Pd=H.size;H.size=mc;Fc=H.state;H.state=Mc;Xd=H.stride;H.stride=Xa;Rc=H.type;H.type=Qc;ad=H.w;H.w=Bb;Ce=H.x;H.x=Za;pc=H.y;H.y=Xb;xc=H.z;H.z=uc;jc=z.call(this,ca,a,e);ab=!1;tc=null;Ub=0;Zb=!1;kc=gc=0;zc=1;Cc=0;fd=5126;bd=Wc=Vc=Uc=0;W(jc)?(ab=!0,tc=V.createStream(34962,jc),fd=tc.dtype):
(tc=V.getBuffer(jc))?fd=tc.dtype:"constant"in jc?(zc=2,"number"===typeof jc.constant?(Vc=jc.constant,Wc=bd=Uc=0):(Vc=0<jc.constant.length?jc.constant[0]:0,Wc=1<jc.constant.length?jc.constant[1]:0,bd=2<jc.constant.length?jc.constant[2]:0,Uc=3<jc.constant.length?jc.constant[3]:0)):(tc=W(jc.buffer)?V.createStream(34962,jc.buffer):V.getBuffer(jc.buffer),fd="type"in jc?ae[jc.type]:tc.dtype,Zb=!!jc.normalized,kc=jc.size|0,gc=jc.offset|0,Cc=jc.stride|0,Ub=jc.divisor|0);od=y.buffer;y.buffer=tc;gd=y.divisor;
y.divisor=Ub;cd=y.normalized;y.normalized=Zb;nc=y.offset;y.offset=gc;ec=y.size;y.size=kc;dd=y.state;y.state=zc;Yc=y.stride;y.stride=Cc;hd=y.type;y.type=fd;Ac=y.w;y.w=Uc;kd=y.x;y.x=Vc;he=y.y;y.y=Wc;pe=y.z;y.z=bd;Bd=v.call(this,ca,a,e);ld=!1;Ae=null;Qd=0;fe=!1;Rd=Zd=0;Kd=1;Hd=0;qd=5126;md=td=wd=Xc=0;W(Bd)?(ld=!0,Ae=V.createStream(34962,Bd),qd=Ae.dtype):(Ae=V.getBuffer(Bd))?qd=Ae.dtype:"constant"in Bd?(Kd=2,"number"===typeof Bd.constant?(wd=Bd.constant,td=md=Xc=0):(wd=0<Bd.constant.length?Bd.constant[0]:
0,td=1<Bd.constant.length?Bd.constant[1]:0,md=2<Bd.constant.length?Bd.constant[2]:0,Xc=3<Bd.constant.length?Bd.constant[3]:0)):(Ae=W(Bd.buffer)?V.createStream(34962,Bd.buffer):V.getBuffer(Bd.buffer),qd="type"in Bd?ae[Bd.type]:Ae.dtype,fe=!!Bd.normalized,Rd=Bd.size|0,Zd=Bd.offset|0,Hd=Bd.stride|0,Qd=Bd.divisor|0);xd=S.buffer;S.buffer=Ae;Cd=S.divisor;S.divisor=Qd;Ed=S.normalized;S.normalized=fe;ie=S.offset;S.offset=Zd;ke=S.size;S.size=Rd;ve=S.state;S.state=Kd;le=S.stride;S.stride=Hd;je=S.type;S.type=
qd;ge=S.w;S.w=Xc;we=S.x;S.x=wd;de=S.y;S.y=td;ne=S.z;S.z=md;Sc=L.call(this,ca,a,e);jd=!1;xe=null;qe=0;Md=!1;Td=Sd=0;Ud=1;oe=0;Be=5126;Ve=Ue=re=Fe=0;W(Sc)?(jd=!0,xe=V.createStream(34962,Sc),Be=xe.dtype):(xe=V.getBuffer(Sc))?Be=xe.dtype:"constant"in Sc?(Ud=2,"number"===typeof Sc.constant?(re=Sc.constant,Ue=Ve=Fe=0):(re=0<Sc.constant.length?Sc.constant[0]:0,Ue=1<Sc.constant.length?Sc.constant[1]:0,Ve=2<Sc.constant.length?Sc.constant[2]:0,Fe=3<Sc.constant.length?Sc.constant[3]:0)):(xe=W(Sc.buffer)?V.createStream(34962,
Sc.buffer):V.getBuffer(Sc.buffer),Be="type"in Sc?ae[Sc.type]:xe.dtype,Md=!!Sc.normalized,Td=Sc.size|0,Sd=Sc.offset|0,oe=Sc.stride|0,qe=Sc.divisor|0);Qe=Q.buffer;Q.buffer=xe;ye=Q.divisor;Q.divisor=qe;Ie=Q.normalized;Q.normalized=Md;Ke=Q.offset;Q.offset=Sd;Le=Q.size;Q.size=Td;Me=Q.state;Q.state=Ud;Je=Q.stride;Q.stride=oe;Nd=Q.type;Q.type=Be;$d=Q.w;Q.w=Fe;ce=Q.x;Q.x=re;ee=Q.y;Q.y=Ue;Ne=Q.z;Q.z=Ve;Id=C.call(this,ca,a,e);Vd=!1;Ge=null;Oe=0;df=!1;We=bf=0;Re=1;af=0;$e=5126;be=Wd=Ye=Xe=0;W(Id)?(Vd=!0,Ge=
V.createStream(34962,Id),$e=Ge.dtype):(Ge=V.getBuffer(Id))?$e=Ge.dtype:"constant"in Id?(Re=2,"number"===typeof Id.constant?(Ye=Id.constant,Wd=be=Xe=0):(Ye=0<Id.constant.length?Id.constant[0]:0,Wd=1<Id.constant.length?Id.constant[1]:0,be=2<Id.constant.length?Id.constant[2]:0,Xe=3<Id.constant.length?Id.constant[3]:0)):(Ge=W(Id.buffer)?V.createStream(34962,Id.buffer):V.getBuffer(Id.buffer),$e="type"in Id?ae[Id.type]:Ge.dtype,df=!!Id.normalized,We=Id.size|0,bf=Id.offset|0,af=Id.stride|0,Oe=Id.divisor|
0);Ze=B.buffer;B.buffer=Ge;kf=B.divisor;B.divisor=Oe;of=B.normalized;B.normalized=df;gf=B.offset;B.offset=bf;lf=B.size;B.size=We;mf=B.state;B.state=Re;nf=B.stride;B.stride=af;sf=B.type;B.type=$e;pf=B.w;B.w=Xe;tf=B.x;B.x=Ye;Cf=B.y;B.y=Wd;Df=B.z;B.z=be;Se=ra.call(this,ca,a,e);He=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;W(Se)?(He=!0,qf=V.createStream(34962,Se),xf=qf.dtype):(qf=V.getBuffer(Se))?xf=qf.dtype:"constant"in Se?(Ff=2,"number"===typeof Se.constant?(wf=Se.constant,zf=Af=
yf=0):(wf=0<Se.constant.length?Se.constant[0]:0,zf=1<Se.constant.length?Se.constant[1]:0,Af=2<Se.constant.length?Se.constant[2]:0,yf=3<Se.constant.length?Se.constant[3]:0)):(qf=W(Se.buffer)?V.createStream(34962,Se.buffer):V.getBuffer(Se.buffer),xf="type"in Se?ae[Se.type]:qf.dtype,Ef=!!Se.normalized,Bf=Se.size|0,Hf=Se.offset|0,Gf=Se.stride|0,rf=Se.divisor|0);Jf=I.buffer;I.buffer=qf;Kf=I.divisor;I.divisor=rf;Lf=I.normalized;I.normalized=Ef;Mf=I.offset;I.offset=Hf;uf=I.size;I.size=Bf;Rf=I.state;I.state=
Ff;If=I.stride;I.stride=Gf;vf=I.type;I.type=xf;dg=I.w;I.w=yf;Sf=I.x;I.x=wf;Tf=I.y;I.y=zf;qg=I.z;I.z=Af;hf=K.call(this,ca,a,e);ef=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;W(hf)?(ef=!0,Nf=V.createStream(34962,hf),Wf=Nf.dtype):(Nf=V.getBuffer(hf))?Wf=Nf.dtype:"constant"in hf?(hg=2,"number"===typeof hf.constant?(Xf=hf.constant,Yf=Zf=Uf=0):(Xf=0<hf.constant.length?hf.constant[0]:0,Yf=1<hf.constant.length?hf.constant[1]:0,Zf=2<hf.constant.length?hf.constant[2]:0,Uf=3<hf.constant.length?
hf.constant[3]:0)):(Nf=W(hf.buffer)?V.createStream(34962,hf.buffer):V.getBuffer(hf.buffer),Wf="type"in hf?ae[hf.type]:Nf.dtype,eg=!!hf.normalized,gg=hf.size|0,fg=hf.offset|0,ig=hf.stride|0,Of=hf.divisor|0);jg=t.buffer;t.buffer=Nf;rg=t.divisor;t.divisor=Of;sg=t.normalized;t.normalized=eg;tg=t.offset;t.offset=fg;ug=t.size;t.size=gg;vg=t.state;t.state=hg;wg=t.stride;t.stride=ig;xg=t.type;t.type=Wf;yg=t.w;t.w=Uf;zg=t.x;t.x=Xf;Ag=t.y;t.y=Yf;Bg=t.z;t.z=Zf;jf=p.call(this,ca,a,e);ff=!1;Pf=null;Qf=0;kg=!1;
mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;W(jf)?(ff=!0,Pf=V.createStream(34962,jf),$f=Pf.dtype):(Pf=V.getBuffer(jf))?$f=Pf.dtype:"constant"in jf?(ng=2,"number"===typeof jf.constant?(ag=jf.constant,bg=cg=Vf=0):(ag=0<jf.constant.length?jf.constant[0]:0,bg=1<jf.constant.length?jf.constant[1]:0,cg=2<jf.constant.length?jf.constant[2]:0,Vf=3<jf.constant.length?jf.constant[3]:0)):(Pf=W(jf.buffer)?V.createStream(34962,jf.buffer):V.getBuffer(jf.buffer),$f="type"in jf?ae[jf.type]:Pf.dtype,kg=!!jf.normalized,
mg=jf.size|0,lg=jf.offset|0,og=jf.stride|0,Qf=jf.divisor|0);pg=c.buffer;c.buffer=Pf;Cg=c.divisor;c.divisor=Qf;Dg=c.normalized;c.normalized=kg;Eg=c.offset;c.offset=lg;Fg=c.size;c.size=mg;Gg=c.state;c.state=ng;Hg=c.stride;c.stride=og;Ig=c.type;c.type=$f;Jg=c.w;c.w=Vf;Kg=c.x;c.x=ag;Lg=c.y;c.y=bg;Mg=c.z;c.z=cg;Ng=Ia.vert;Ia.vert=59;Og=Ia.frag;Ia.frag=58;sa.dirty=!0;f(ca,a,e);ca.viewportWidth=g;ca.viewportHeight=D;Dd[0]=h;Dd[1]=u;Dd[2]=F;Dd[3]=G;Fa[0]=w;Fa[1]=A;Fa[2]=Aa;Fa[3]=pa;xa.blend_enable=N;Ka[0]=
ga;Ka[1]=M;Ka[2]=R;Ka[3]=X;xa.depth_enable=T;Fd[0]=Qa;Fd[1]=O;Fd[2]=Y;Fd[3]=za;xa.scissor_enable=da;xa.stencil_enable=la;ya&&(b.cpuTime+=performance.now()-oa);ba&&Ea.destroyStream(qa);wa.elements=aa;wa.offset=$a;wa.count=ka;wa.primitive=Ba;ma[45]=Ca;ma[48]=ja;ma[10]=Da;ma[46]=Ha;ma[47]=Ga;ma[34]=eb;ma[6]=cc;ma[7]=dc;ma[8]=Gc;ma[9]=rb;ub&&V.destroyStream(La);E.buffer=Eb;E.divisor=Ma;E.normalized=zd;E.offset=Ya;E.size=Mb;E.state=Nb;E.stride=nb;E.type=Oa;E.w=bc;E.x=Ra;E.y=xb;E.z=yb;ob&&V.destroyStream(ic);
H.buffer=Yb;H.divisor=Rb;H.normalized=Nc;H.offset=Sb;H.size=Pd;H.state=Fc;H.stride=Xd;H.type=Rc;H.w=ad;H.x=Ce;H.y=pc;H.z=xc;ab&&V.destroyStream(tc);y.buffer=od;y.divisor=gd;y.normalized=cd;y.offset=nc;y.size=ec;y.state=dd;y.stride=Yc;y.type=hd;y.w=Ac;y.x=kd;y.y=he;y.z=pe;ld&&V.destroyStream(Ae);S.buffer=xd;S.divisor=Cd;S.normalized=Ed;S.offset=ie;S.size=ke;S.state=ve;S.stride=le;S.type=je;S.w=ge;S.x=we;S.y=de;S.z=ne;jd&&V.destroyStream(xe);Q.buffer=Qe;Q.divisor=ye;Q.normalized=Ie;Q.offset=Ke;Q.size=
Le;Q.state=Me;Q.stride=Je;Q.type=Nd;Q.w=$d;Q.x=ce;Q.y=ee;Q.z=Ne;Vd&&V.destroyStream(Ge);B.buffer=Ze;B.divisor=kf;B.normalized=of;B.offset=gf;B.size=lf;B.state=mf;B.stride=nf;B.type=sf;B.w=pf;B.x=tf;B.y=Cf;B.z=Df;He&&V.destroyStream(qf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=uf;I.state=Rf;I.stride=If;I.type=vf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;ef&&V.destroyStream(Nf);t.buffer=jg;t.divisor=rg;t.normalized=sg;t.offset=tg;t.size=ug;t.state=vg;t.stride=wg;t.type=xg;t.w=yg;t.x=zg;t.y=Ag;
t.z=Bg;ff&&V.destroyStream(Pf);c.buffer=pg;c.divisor=Cg;c.normalized=Dg;c.offset=Eg;c.size=Fg;c.state=Gg;c.stride=Hg;c.type=Ig;c.w=Jg;c.x=Kg;c.y=Lg;c.z=Mg;Ia.vert=Ng;Ia.frag=Og;sa.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,b,x,l,k,f,d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa){var T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,
ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa,ha,Y;T=a.attributes;R=a.buffer;N=a.context;F=a.current;O=a.draw;P=a.elements;qa=a.extensions;ta=a.framebuffer;G=a.gl;M=a.isBufferArgs;da=a.next;X=a.shader;ja=a.uniforms;oa=a.vao;Da=da.blend_color;ya=F.blend_color;Z=da.blend_equation;Ca=F.blend_equation;ia=da.blend_func;ka=F.blend_func;Ba=da.colorMask;Qa=F.colorMask;Aa=da.depth_range;Hb=F.depth_range;$a=da.polygonOffset_offset;V=F.polygonOffset_offset;ca=da.sample_coverage;sa=F.sample_coverage;wa=da.scissor_box;
Ea=F.scissor_box;mb=da.stencil_func;Gb=F.stencil_func;fa=da.stencil_opBack;W=F.stencil_opBack;xa=da.stencil_opFront;Ia=F.stencil_opFront;ma=da.viewport;za=F.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ha={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(a,f){var e,l,x,d,k,g,h,u,w,A,m,n,q;e=ta.next;e!==ta.cur&&(e?G.bindFramebuffer(36160,e.framebuffer):G.bindFramebuffer(36160,null),ta.cur=e);if(F.dirty){var pa,ga,ma,X,z,ia,
ua,ja,Da,Pe,Te,Gd,De,te,ue,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc;pa=da.dither;pa!==F.dither&&(pa?G.enable(3024):G.disable(3024),F.dither=pa);ga=Z[0];ma=Z[1];if(ga!==Ca[0]||ma!==Ca[1])G.blendEquationSeparate(ga,ma),Ca[0]=ga,Ca[1]=ma;X=da.depth_func;X!==F.depth_func&&(G.depthFunc(X),F.depth_func=X);z=Aa[0];ia=Aa[1];if(z!==Hb[0]||ia!==Hb[1])G.depthRange(z,ia),Hb[0]=z,Hb[1]=ia;ua=da.depth_mask;ua!==F.depth_mask&&(G.depthMask(ua),F.depth_mask=ua);ja=Ba[0];Da=Ba[1];Pe=
Ba[2];Te=Ba[3];if(ja!==Qa[0]||Da!==Qa[1]||Pe!==Qa[2]||Te!==Qa[3])G.colorMask(ja,Da,Pe,Te),Qa[0]=ja,Qa[1]=Da,Qa[2]=Pe,Qa[3]=Te;Gd=da.cull_enable;Gd!==F.cull_enable&&(Gd?G.enable(2884):G.disable(2884),F.cull_enable=Gd);De=da.cull_face;De!==F.cull_face&&(G.cullFace(De),F.cull_face=De);te=da.frontFace;te!==F.frontFace&&(G.frontFace(te),F.frontFace=te);ue=da.lineWidth;ue!==F.lineWidth&&(G.lineWidth(ue),F.lineWidth=ue);Yd=da.polygonOffset_enable;Yd!==F.polygonOffset_enable&&(Yd?G.enable(32823):G.disable(32823),
F.polygonOffset_enable=Yd);Jd=$a[0];pd=$a[1];if(Jd!==V[0]||pd!==V[1])G.polygonOffset(Jd,pd),V[0]=Jd,V[1]=pd;ed=da.sample_alpha;ed!==F.sample_alpha&&(ed?G.enable(32926):G.disable(32926),F.sample_alpha=ed);sd=da.sample_enable;sd!==F.sample_enable&&(sd?G.enable(32928):G.disable(32928),F.sample_enable=sd);Oc=ca[0];rd=ca[1];if(Oc!==sa[0]||rd!==sa[1])G.sampleCoverage(Oc,rd),sa[0]=Oc,sa[1]=rd;Hc=da.stencil_mask;Hc!==F.stencil_mask&&(G.stencilMask(Hc),F.stencil_mask=Hc);id=mb[0];Tc=mb[1];nd=mb[2];if(id!==
Gb[0]||Tc!==Gb[1]||nd!==Gb[2])G.stencilFunc(id,Tc,nd),Gb[0]=id,Gb[1]=Tc,Gb[2]=nd;Wb=xa[0];Jb=xa[1];vc=xa[2];Ab=xa[3];if(Wb!==Ia[0]||Jb!==Ia[1]||vc!==Ia[2]||Ab!==Ia[3])G.stencilOpSeparate(Wb,Jb,vc,Ab),Ia[0]=Wb,Ia[1]=Jb,Ia[2]=vc,Ia[3]=Ab;yc=fa[0];Cb=fa[1];Lc=fa[2];oc=fa[3];if(yc!==W[0]||Cb!==W[1]||Lc!==W[2]||oc!==W[3])G.stencilOpSeparate(yc,Cb,Lc,oc),W[0]=yc,W[1]=Cb,W[2]=Lc,W[3]=oc;Ic=da.scissor_enable;Ic!==F.scissor_enable&&(Ic?G.enable(3089):G.disable(3089),F.scissor_enable=Ic);$c=wa[0];Zc=wa[1];
Ec=wa[2];hc=wa[3];if($c!==Ea[0]||Zc!==Ea[1]||Ec!==Ea[2]||hc!==Ea[3])G.scissor($c,Zc,Ec,hc),Ea[0]=$c,Ea[1]=Zc,Ea[2]=Ec,Ea[3]=hc}l=this.viewport;x=l.x|0;d=l.y|0;k="width"in l?l.width|0:N.framebufferWidth-x;g="height"in l?l.height|0:N.framebufferHeight-d;h=N.viewportWidth;N.viewportWidth=k;u=N.viewportHeight;N.viewportHeight=g;G.viewport(x,d,k,g);za[0]=x;za[1]=d;za[2]=k;za[3]=g;G.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;G.enable(3042);F.blend_enable=!0;G.blendFuncSeparate(770,771,773,1);ka[0]=
770;ka[1]=771;ka[2]=773;ka[3]=1;G.disable(2929);F.depth_enable=!1;G.disable(2960);F.stencil_enable=!1;if(w=F.profile)A=performance.now(),b.count+=f;G.useProgram(E.program);m=qa.angle_instanced_arrays;var Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb;oa.setVAO(null);Y.buffer=this.sizeBuffer;Jc=!1;qc=null;rc=0;fc=!1;fb=pb=0;Pc=1;$b=0;
hb=5126;Va=qb=bb=Ob=0;M(Y)?(Jc=!0,qc=R.createStream(34962,Y),hb=qc.dtype):(qc=R.getBuffer(Y))?hb=qc.dtype:"constant"in Y?(Pc=2,"number"===typeof Y.constant?(bb=Y.constant,qb=Va=Ob=0):(bb=0<Y.constant.length?Y.constant[0]:0,qb=1<Y.constant.length?Y.constant[1]:0,Va=2<Y.constant.length?Y.constant[2]:0,Ob=3<Y.constant.length?Y.constant[3]:0)):(qc=M(Y.buffer)?R.createStream(34962,Y.buffer):R.getBuffer(Y.buffer),hb="type"in Y?Fa[Y.type]:qc.dtype,fc=!!Y.normalized,fb=Y.size|0,pb=Y.offset|0,$b=Y.stride|
0,rc=Y.divisor|0);Kc=aa.location;Ib=T[Kc];if(1===Pc){Ib.buffer||G.enableVertexAttribArray(Kc);Kb=fb||1;if(Ib.type!==hb||Ib.size!==Kb||Ib.buffer!==qc||Ib.normalized!==fc||Ib.offset!==pb||Ib.stride!==$b)G.bindBuffer(34962,qc.buffer),G.vertexAttribPointer(Kc,Kb,hb,fc,$b,pb),Ib.type=hb,Ib.size=Kb,Ib.buffer=qc,Ib.normalized=fc,Ib.offset=pb,Ib.stride=$b;Ib.divisor!==rc&&(m.vertexAttribDivisorANGLE(Kc,rc),Ib.divisor=rc)}else if(Ib.buffer&&(G.disableVertexAttribArray(Kc),Ib.buffer=null),Ib.x!==bb||Ib.y!==
qb||Ib.z!==Va||Ib.w!==Ob)G.vertexAttrib4f(Kc,bb,qb,Va,Ob),Ib.x=bb,Ib.y=qb,Ib.z=Va,Ib.w=Ob;ha.buffer=this.sizeBuffer;sc=!1;Pb=null;kb=0;Fb=!1;zb=Db=0;ib=1;ac=0;Qb=5126;tb=Vb=Sa=sb=0;M(ha)?(sc=!0,Pb=R.createStream(34962,ha),Qb=Pb.dtype):(Pb=R.getBuffer(ha))?Qb=Pb.dtype:"constant"in ha?(ib=2,"number"===typeof ha.constant?(Sa=ha.constant,Vb=tb=sb=0):(Sa=0<ha.constant.length?ha.constant[0]:0,Vb=1<ha.constant.length?ha.constant[1]:0,tb=2<ha.constant.length?ha.constant[2]:0,sb=3<ha.constant.length?ha.constant[3]:
0)):(Pb=M(ha.buffer)?R.createStream(34962,ha.buffer):R.getBuffer(ha.buffer),Qb="type"in ha?Fa[ha.type]:Pb.dtype,Fb=!!ha.normalized,zb=ha.size|0,Db=ha.offset|0,ac=ha.stride|0,kb=ha.divisor|0);lc=I.location;jb=T[lc];if(1===ib){jb.buffer||G.enableVertexAttribArray(lc);rb=zb||1;if(jb.type!==Qb||jb.size!==rb||jb.buffer!==Pb||jb.normalized!==Fb||jb.offset!==Db||jb.stride!==ac)G.bindBuffer(34962,Pb.buffer),G.vertexAttribPointer(lc,rb,Qb,Fb,ac,Db),jb.type=Qb,jb.size=rb,jb.buffer=Pb,jb.normalized=Fb,jb.offset=
Db,jb.stride=ac;jb.divisor!==kb&&(m.vertexAttribDivisorANGLE(lc,kb),jb.divisor=kb)}else if(jb.buffer&&(G.disableVertexAttribArray(lc),jb.buffer=null),jb.x!==Sa||jb.y!==Vb||jb.z!==tb||jb.w!==sb)G.vertexAttrib4f(lc,Sa,Vb,tb,sb),jb.x=Sa,jb.y=Vb,jb.z=tb,jb.w=sb;Ja=this.charBuffer;ub=!1;La=null;db=0;gb=!1;lb=Na=0;Wa=1;wb=0;vb=5126;Lb=Ua=Dc=Pa=0;M(Ja)?(ub=!0,La=R.createStream(34962,Ja),vb=La.dtype):(La=R.getBuffer(Ja))?vb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Dc=Ja.constant,Ua=Lb=
Pa=0):(Dc=0<Ja.constant.length?Ja.constant[0]:0,Ua=1<Ja.constant.length?Ja.constant[1]:0,Lb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=M(Ja.buffer)?R.createStream(34962,Ja.buffer):R.getBuffer(Ja.buffer),vb="type"in Ja?Fa[Ja.type]:La.dtype,gb=!!Ja.normalized,lb=Ja.size|0,Na=Ja.offset|0,wb=Ja.stride|0,db=Ja.divisor|0);Eb=ra.location;Ma=T[Eb];if(1===Wa){Ma.buffer||G.enableVertexAttribArray(Eb);yd=lb||1;if(Ma.type!==vb||Ma.size!==yd||Ma.buffer!==La||Ma.normalized!==
gb||Ma.offset!==Na||Ma.stride!==wb)G.bindBuffer(34962,La.buffer),G.vertexAttribPointer(Eb,yd,vb,gb,wb,Na),Ma.type=vb,Ma.size=yd,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=wb;Ma.divisor!==db&&(m.vertexAttribDivisorANGLE(Eb,db),Ma.divisor=db)}else if(Ma.buffer&&(G.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==Dc||Ma.y!==Ua||Ma.z!==Lb||Ma.w!==Pa)G.vertexAttrib4f(Eb,Dc,Ua,Lb,Pa),Ma.x=Dc,Ma.y=Ua,Ma.z=Lb,Ma.w=Pa;Ya=this.position;Mb=!1;Nb=null;nb=0;Oa=!1;Ra=bc=0;xb=1;yb=0;Ta=5126;wc=Bc=ic=
ob=0;M(Ya)?(Mb=!0,Nb=R.createStream(34962,Ya),Ta=Nb.dtype):(Nb=R.getBuffer(Ya))?Ta=Nb.dtype:"constant"in Ya?(xb=2,"number"===typeof Ya.constant?(ic=Ya.constant,Bc=wc=ob=0):(ic=0<Ya.constant.length?Ya.constant[0]:0,Bc=1<Ya.constant.length?Ya.constant[1]:0,wc=2<Ya.constant.length?Ya.constant[2]:0,ob=3<Ya.constant.length?Ya.constant[3]:0)):(Nb=M(Ya.buffer)?R.createStream(34962,Ya.buffer):R.getBuffer(Ya.buffer),Ta="type"in Ya?Fa[Ya.type]:Nb.dtype,Oa=!!Ya.normalized,Ra=Ya.size|0,bc=Ya.offset|0,yb=Ya.stride|
0,nb=Ya.divisor|0);cb=D.location;mc=T[cb];if(1===xb){mc.buffer||G.enableVertexAttribArray(cb);Mc=Ra||2;if(mc.type!==Ta||mc.size!==Mc||mc.buffer!==Nb||mc.normalized!==Oa||mc.offset!==bc||mc.stride!==yb)G.bindBuffer(34962,Nb.buffer),G.vertexAttribPointer(cb,Mc,Ta,Oa,yb,bc),mc.type=Ta,mc.size=Mc,mc.buffer=Nb,mc.normalized=Oa,mc.offset=bc,mc.stride=yb;mc.divisor!==nb&&(m.vertexAttribDivisorANGLE(cb,nb),mc.divisor=nb)}else if(mc.buffer&&(G.disableVertexAttribArray(cb),mc.buffer=null),mc.x!==ic||mc.y!==
Bc||mc.z!==wc||mc.w!==ob)G.vertexAttrib4f(cb,ic,Bc,wc,ob),mc.x=ic,mc.y=Bc,mc.z=wc,mc.w=ob;Xa=this.viewportArray;G.uniform4f(U.location,Xa[0],Xa[1],Xa[2],Xa[3]);Qc=this.scale;G.uniform2f(la.location,Qc[0],Qc[1]);Bb=this.translate;G.uniform2f(na.location,Bb[0],Bb[1]);(Za=O.elements)?G.bindBuffer(34963,Za.buffer.buffer):oa.currentVAO&&(Za=P.getElements(oa.currentVAO.elements))&&G.bindBuffer(34963,Za.buffer.buffer);Xb=O.instances;for(n=0;n<f;++n){q=a[n];var uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,
tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd,Ad;uc=J.call(this,N,q,n);n&&Yb===uc||(Yb=uc,G.uniform1f(K.location,uc));Rb=H.call(this,N,q,n);n&&Nc===Rb||(Nc=Rb,G.uniform1f(p.location,Rb));Sb=q.align;n&&Ld===Sb||(Ld=Sb,G.uniform1f(S.location,Sb));Fc=q.baseline;n&&ud===Fc||(ud=Fc,G.uniform1f(B.location,Fc));Rc=q.color;ad=Rc[0];pc=Rc[1];jc=Rc[2];tc=Rc[3];n&&vd===ad&&xc===pc&&ab===jc&&Ub===tc||(vd=ad,xc=pc,ab=jc,Ub=tc,G.uniform4f(t.location,ad,pc,jc,tc));Zb=ea.call(this,N,q,n);gc=Zb[0];
zc=Zb[1];n&&kc===gc&&Cc===zc||(kc=gc,Cc=zc,G.uniform2f(C.location,gc,zc));fd=y.call(this,N,q,n);Uc=fd[0];Wc=fd[1];n&&Vc===Uc&&bd===Wc||(Vc=Uc,bd=Wc,G.uniform2f(Q.location,Uc,Wc));od=q.positionOffset;gd=od[0];nc=od[1];n&&cd===gd&&ec===nc||(cd=gd,ec=nc,G.uniform2f(r.location,gd,nc));dd=q.opacity;n&&Yc===dd||(Yc=dd,G.uniform1f(c.location,dd));(hd=v.call(this,N,q,n))&&"framebuffer"===hd._reglType&&(hd=hd.color[0]);Ac=hd._texture;G.uniform1i(L.location,Ac.bind());kd=q.offset;if(Ad=q.count)0<Xb?Za?m.drawElementsInstancedANGLE(0,
Ad,Za.type,kd<<(Za.type-5121>>1),Xb):m.drawArraysInstancedANGLE(0,kd,Ad,Xb):0>Xb&&(Za?G.drawElements(0,Ad,Za.type,kd<<(Za.type-5121>>1)):G.drawArrays(0,kd,Ad)),Ac.unbind()}Jc&&R.destroyStream(qc);sc&&R.destroyStream(Pb);ub&&R.destroyStream(La);Mb&&R.destroyStream(Nb);F.dirty=!0;oa.setVAO(null);N.viewportWidth=h;N.viewportHeight=u;w&&(b.cpuTime+=performance.now()-A)},draw:function(a){var g,h,v,u,y,w,A,m,n,q,pa,ga,J,ma,X,E,z,H,ea,ia,ua,ja,Da,Pe,Te,Gd,De,te,ue,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,
vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb;g=ta.next;g!==ta.cur&&(g?G.bindFramebuffer(36160,g.framebuffer):G.bindFramebuffer(36160,null),ta.cur=g);if(F.dirty){var Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc;Wa=da.dither;Wa!==F.dither&&(Wa?G.enable(3024):G.disable(3024),F.dither=Wa);wb=Z[0];vb=Z[1];if(wb!==Ca[0]||vb!==Ca[1])G.blendEquationSeparate(wb,
vb),Ca[0]=wb,Ca[1]=vb;Pa=da.depth_func;Pa!==F.depth_func&&(G.depthFunc(Pa),F.depth_func=Pa);Dc=Aa[0];Ua=Aa[1];if(Dc!==Hb[0]||Ua!==Hb[1])G.depthRange(Dc,Ua),Hb[0]=Dc,Hb[1]=Ua;Lb=da.depth_mask;Lb!==F.depth_mask&&(G.depthMask(Lb),F.depth_mask=Lb);Eb=Ba[0];Ma=Ba[1];yd=Ba[2];Ya=Ba[3];if(Eb!==Qa[0]||Ma!==Qa[1]||yd!==Qa[2]||Ya!==Qa[3])G.colorMask(Eb,Ma,yd,Ya),Qa[0]=Eb,Qa[1]=Ma,Qa[2]=yd,Qa[3]=Ya;Mb=da.cull_enable;Mb!==F.cull_enable&&(Mb?G.enable(2884):G.disable(2884),F.cull_enable=Mb);Nb=da.cull_face;Nb!==
F.cull_face&&(G.cullFace(Nb),F.cull_face=Nb);nb=da.frontFace;nb!==F.frontFace&&(G.frontFace(nb),F.frontFace=nb);Oa=da.lineWidth;Oa!==F.lineWidth&&(G.lineWidth(Oa),F.lineWidth=Oa);bc=da.polygonOffset_enable;bc!==F.polygonOffset_enable&&(bc?G.enable(32823):G.disable(32823),F.polygonOffset_enable=bc);Ra=$a[0];xb=$a[1];if(Ra!==V[0]||xb!==V[1])G.polygonOffset(Ra,xb),V[0]=Ra,V[1]=xb;yb=da.sample_alpha;yb!==F.sample_alpha&&(yb?G.enable(32926):G.disable(32926),F.sample_alpha=yb);Ta=da.sample_enable;Ta!==
F.sample_enable&&(Ta?G.enable(32928):G.disable(32928),F.sample_enable=Ta);ob=ca[0];ic=ca[1];if(ob!==sa[0]||ic!==sa[1])G.sampleCoverage(ob,ic),sa[0]=ob,sa[1]=ic;Bc=da.stencil_mask;Bc!==F.stencil_mask&&(G.stencilMask(Bc),F.stencil_mask=Bc);wc=mb[0];cb=mb[1];mc=mb[2];if(wc!==Gb[0]||cb!==Gb[1]||mc!==Gb[2])G.stencilFunc(wc,cb,mc),Gb[0]=wc,Gb[1]=cb,Gb[2]=mc;Mc=xa[0];Xa=xa[1];Qc=xa[2];Bb=xa[3];if(Mc!==Ia[0]||Xa!==Ia[1]||Qc!==Ia[2]||Bb!==Ia[3])G.stencilOpSeparate(Mc,Xa,Qc,Bb),Ia[0]=Mc,Ia[1]=Xa,Ia[2]=Qc,Ia[3]=
Bb;Za=fa[0];Xb=fa[1];uc=fa[2];Yb=fa[3];if(Za!==W[0]||Xb!==W[1]||uc!==W[2]||Yb!==W[3])G.stencilOpSeparate(Za,Xb,uc,Yb),W[0]=Za,W[1]=Xb,W[2]=uc,W[3]=Yb;Rb=da.scissor_enable;Rb!==F.scissor_enable&&(Rb?G.enable(3089):G.disable(3089),F.scissor_enable=Rb);Nc=wa[0];Sb=wa[1];Ld=wa[2];Fc=wa[3];if(Nc!==Ea[0]||Sb!==Ea[1]||Ld!==Ea[2]||Fc!==Ea[3])G.scissor(Nc,Sb,Ld,Fc),Ea[0]=Nc,Ea[1]=Sb,Ea[2]=Ld,Ea[3]=Fc}h=this.viewport;v=h.x|0;u=h.y|0;y="width"in h?h.width|0:N.framebufferWidth-v;w="height"in h?h.height|0:N.framebufferHeight-
u;A=N.viewportWidth;N.viewportWidth=y;m=N.viewportHeight;N.viewportHeight=w;G.viewport(v,u,y,w);za[0]=v;za[1]=u;za[2]=y;za[3]=w;G.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;G.enable(3042);F.blend_enable=!0;G.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;G.disable(2929);F.depth_enable=!1;G.disable(2960);F.stencil_enable=!1;if(n=F.profile)q=performance.now(),b.count++;G.useProgram(x.program);pa=qa.angle_instanced_arrays;oa.setVAO(null);Y.buffer=this.sizeBuffer;ga=!1;
J=null;ma=0;X=!1;z=E=0;H=1;ea=0;ia=5126;Pe=Da=ja=ua=0;M(Y)?(ga=!0,J=R.createStream(34962,Y),ia=J.dtype):(J=R.getBuffer(Y))?ia=J.dtype:"constant"in Y?(H=2,"number"===typeof Y.constant?(ja=Y.constant,Da=Pe=ua=0):(ja=0<Y.constant.length?Y.constant[0]:0,Da=1<Y.constant.length?Y.constant[1]:0,Pe=2<Y.constant.length?Y.constant[2]:0,ua=3<Y.constant.length?Y.constant[3]:0)):(J=M(Y.buffer)?R.createStream(34962,Y.buffer):R.getBuffer(Y.buffer),ia="type"in Y?Fa[Y.type]:J.dtype,X=!!Y.normalized,z=Y.size|0,E=Y.offset|
0,ea=Y.stride|0,ma=Y.divisor|0);Te=aa.location;Gd=T[Te];if(1===H){Gd.buffer||G.enableVertexAttribArray(Te);De=z||1;if(Gd.type!==ia||Gd.size!==De||Gd.buffer!==J||Gd.normalized!==X||Gd.offset!==E||Gd.stride!==ea)G.bindBuffer(34962,J.buffer),G.vertexAttribPointer(Te,De,ia,X,ea,E),Gd.type=ia,Gd.size=De,Gd.buffer=J,Gd.normalized=X,Gd.offset=E,Gd.stride=ea;Gd.divisor!==ma&&(pa.vertexAttribDivisorANGLE(Te,ma),Gd.divisor=ma)}else if(Gd.buffer&&(G.disableVertexAttribArray(Te),Gd.buffer=null),Gd.x!==ja||Gd.y!==
Da||Gd.z!==Pe||Gd.w!==ua)G.vertexAttrib4f(Te,ja,Da,Pe,ua),Gd.x=ja,Gd.y=Da,Gd.z=Pe,Gd.w=ua;ha.buffer=this.sizeBuffer;te=!1;ue=null;Yd=0;Jd=!1;ed=pd=0;sd=1;Oc=0;rd=5126;nd=Tc=id=Hc=0;M(ha)?(te=!0,ue=R.createStream(34962,ha),rd=ue.dtype):(ue=R.getBuffer(ha))?rd=ue.dtype:"constant"in ha?(sd=2,"number"===typeof ha.constant?(id=ha.constant,Tc=nd=Hc=0):(id=0<ha.constant.length?ha.constant[0]:0,Tc=1<ha.constant.length?ha.constant[1]:0,nd=2<ha.constant.length?ha.constant[2]:0,Hc=3<ha.constant.length?ha.constant[3]:
0)):(ue=M(ha.buffer)?R.createStream(34962,ha.buffer):R.getBuffer(ha.buffer),rd="type"in ha?Fa[ha.type]:ue.dtype,Jd=!!ha.normalized,ed=ha.size|0,pd=ha.offset|0,Oc=ha.stride|0,Yd=ha.divisor|0);Wb=I.location;Jb=T[Wb];if(1===sd){Jb.buffer||G.enableVertexAttribArray(Wb);vc=ed||1;if(Jb.type!==rd||Jb.size!==vc||Jb.buffer!==ue||Jb.normalized!==Jd||Jb.offset!==pd||Jb.stride!==Oc)G.bindBuffer(34962,ue.buffer),G.vertexAttribPointer(Wb,vc,rd,Jd,Oc,pd),Jb.type=rd,Jb.size=vc,Jb.buffer=ue,Jb.normalized=Jd,Jb.offset=
pd,Jb.stride=Oc;Jb.divisor!==Yd&&(pa.vertexAttribDivisorANGLE(Wb,Yd),Jb.divisor=Yd)}else if(Jb.buffer&&(G.disableVertexAttribArray(Wb),Jb.buffer=null),Jb.x!==id||Jb.y!==Tc||Jb.z!==nd||Jb.w!==Hc)G.vertexAttrib4f(Wb,id,Tc,nd,Hc),Jb.x=id,Jb.y=Tc,Jb.z=nd,Jb.w=Hc;Ab=this.charBuffer;yc=!1;Cb=null;Lc=0;oc=!1;$c=Ic=0;Zc=1;Ec=0;hc=5126;fc=rc=qc=Jc=0;M(Ab)?(yc=!0,Cb=R.createStream(34962,Ab),hc=Cb.dtype):(Cb=R.getBuffer(Ab))?hc=Cb.dtype:"constant"in Ab?(Zc=2,"number"===typeof Ab.constant?(qc=Ab.constant,rc=
fc=Jc=0):(qc=0<Ab.constant.length?Ab.constant[0]:0,rc=1<Ab.constant.length?Ab.constant[1]:0,fc=2<Ab.constant.length?Ab.constant[2]:0,Jc=3<Ab.constant.length?Ab.constant[3]:0)):(Cb=M(Ab.buffer)?R.createStream(34962,Ab.buffer):R.getBuffer(Ab.buffer),hc="type"in Ab?Fa[Ab.type]:Cb.dtype,oc=!!Ab.normalized,$c=Ab.size|0,Ic=Ab.offset|0,Ec=Ab.stride|0,Lc=Ab.divisor|0);pb=ra.location;fb=T[pb];if(1===Zc){fb.buffer||G.enableVertexAttribArray(pb);Pc=$c||1;if(fb.type!==hc||fb.size!==Pc||fb.buffer!==Cb||fb.normalized!==
oc||fb.offset!==Ic||fb.stride!==Ec)G.bindBuffer(34962,Cb.buffer),G.vertexAttribPointer(pb,Pc,hc,oc,Ec,Ic),fb.type=hc,fb.size=Pc,fb.buffer=Cb,fb.normalized=oc,fb.offset=Ic,fb.stride=Ec;fb.divisor!==Lc&&(pa.vertexAttribDivisorANGLE(pb,Lc),fb.divisor=Lc)}else if(fb.buffer&&(G.disableVertexAttribArray(pb),fb.buffer=null),fb.x!==qc||fb.y!==rc||fb.z!==fc||fb.w!==Jc)G.vertexAttrib4f(pb,qc,rc,fc,Jc),fb.x=qc,fb.y=rc,fb.z=fc,fb.w=Jc;$b=this.position;hb=!1;Ob=null;bb=0;qb=!1;Kc=Va=0;Ib=1;Kb=0;sc=5126;Db=Fb=
kb=Pb=0;M($b)?(hb=!0,Ob=R.createStream(34962,$b),sc=Ob.dtype):(Ob=R.getBuffer($b))?sc=Ob.dtype:"constant"in $b?(Ib=2,"number"===typeof $b.constant?(kb=$b.constant,Fb=Db=Pb=0):(kb=0<$b.constant.length?$b.constant[0]:0,Fb=1<$b.constant.length?$b.constant[1]:0,Db=2<$b.constant.length?$b.constant[2]:0,Pb=3<$b.constant.length?$b.constant[3]:0)):(Ob=M($b.buffer)?R.createStream(34962,$b.buffer):R.getBuffer($b.buffer),sc="type"in $b?Fa[$b.type]:Ob.dtype,qb=!!$b.normalized,Kc=$b.size|0,Va=$b.offset|0,Kb=$b.stride|
0,bb=$b.divisor|0);zb=D.location;ib=T[zb];if(1===Ib){ib.buffer||G.enableVertexAttribArray(zb);ac=Kc||2;if(ib.type!==sc||ib.size!==ac||ib.buffer!==Ob||ib.normalized!==qb||ib.offset!==Va||ib.stride!==Kb)G.bindBuffer(34962,Ob.buffer),G.vertexAttribPointer(zb,ac,sc,qb,Kb,Va),ib.type=sc,ib.size=ac,ib.buffer=Ob,ib.normalized=qb,ib.offset=Va,ib.stride=Kb;ib.divisor!==bb&&(pa.vertexAttribDivisorANGLE(zb,bb),ib.divisor=bb)}else if(ib.buffer&&(G.disableVertexAttribArray(zb),ib.buffer=null),ib.x!==kb||ib.y!==
Fb||ib.z!==Db||ib.w!==Pb)G.vertexAttrib4f(zb,kb,Fb,Db,Pb),ib.x=kb,ib.y=Fb,ib.z=Db,ib.w=Pb;Qb=l.call(this,N,a,0);G.uniform1f(K.location,Qb);sb=k.call(this,N,a,0);G.uniform1f(p.location,sb);G.uniform1f(S.location,a.align);G.uniform1f(B.location,a.baseline);Sa=this.viewportArray;G.uniform4f(U.location,Sa[0],Sa[1],Sa[2],Sa[3]);Vb=a.color;G.uniform4f(t.location,Vb[0],Vb[1],Vb[2],Vb[3]);tb=f.call(this,N,a,0);G.uniform2f(C.location,tb[0],tb[1]);lc=d.call(this,N,a,0);G.uniform2f(Q.location,lc[0],lc[1]);jb=
this.scale;G.uniform2f(la.location,jb[0],jb[1]);rb=this.translate;G.uniform2f(na.location,rb[0],rb[1]);Ja=a.positionOffset;G.uniform2f(r.location,Ja[0],Ja[1]);G.uniform1f(c.location,a.opacity);(ub=e.call(this,N,a,0))&&"framebuffer"===ub._reglType&&(ub=ub.color[0]);La=ub._texture;G.uniform1i(L.location,La.bind());(db=O.elements)?G.bindBuffer(34963,db.buffer.buffer):oa.currentVAO&&(db=P.getElements(oa.currentVAO.elements))&&G.bindBuffer(34963,db.buffer.buffer);gb=a.offset;if(Na=a.count)lb=O.instances,
0<lb?db?pa.drawElementsInstancedANGLE(0,Na,db.type,gb<<(db.type-5121>>1),lb):pa.drawArraysInstancedANGLE(0,gb,Na,lb):0>lb&&(db?G.drawElements(0,Na,db.type,gb<<(db.type-5121>>1)):G.drawArrays(0,gb,Na)),F.dirty=!0,oa.setVAO(null),N.viewportWidth=A,N.viewportHeight=m,n&&(b.cpuTime+=performance.now()-q),ga&&R.destroyStream(J),te&&R.destroyStream(ue),yc&&R.destroyStream(Cb),hb&&R.destroyStream(Ob),La.unbind()},scope:function(a,c,f){var p,e,l,r,x,d,k,t,D,v,y,V,G,ca,W,C,B,sa,Aa,xa,I,Ia,J,E,T,Q,Z,K,L,H,fa,
Hb,P,Qa,za,la,wa,ya,S,U,oa,qa,ea,aa,$a,na,ka,Ba,Ca,ta,Ea,Gb,ra,mb,fc,pb,fb,Pc,$b,hb,Ob,bb,qb,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa,Qc,Bb,Za,Xb,uc,Yb,Rb,Nc,Sb,Ld,Fc,ud,Rc,ad,vd,pc,xc,jc,ab,tc,Ub,Zb,gc,kc,zc,Cc,fd,Uc,Vc,Wc,bd,od,gd,cd,nc,ec,dd,Yc,hd,Ac,kd;p=this.viewport;e=p.x|0;l=p.y|0;r="width"in p?p.width|0:N.framebufferWidth-e;x="height"in p?p.height|0:N.framebufferHeight-
l;d=N.viewportWidth;N.viewportWidth=r;k=N.viewportHeight;N.viewportHeight=x;t=ma[0];ma[0]=e;D=ma[1];ma[1]=l;v=ma[2];ma[2]=r;y=ma[3];ma[3]=x;V=Da[0];Da[0]=0;G=Da[1];Da[1]=0;ca=Da[2];Da[2]=0;W=Da[3];Da[3]=1;C=da.blend_enable;da.blend_enable=!0;B=ia[0];ia[0]=770;sa=ia[1];ia[1]=771;Aa=ia[2];ia[2]=773;xa=ia[3];ia[3]=1;I=da.depth_enable;da.depth_enable=!1;Ia=da.stencil_enable;da.stencil_enable=!1;if(J=F.profile)E=performance.now(),b.count++;T=a.offset;Q=O.offset;O.offset=T;Z=a.count;K=O.count;O.count=Z;
L=O.primitive;O.primitive=0;H=a.align;fa=ja[64];ja[64]=H;Hb=g.call(this,N,a,f);P=ja[69];ja[69]=Hb;Qa=w.call(this,N,a,f);za=ja[67];ja[67]=Qa;la=u.call(this,N,a,f);wa=ja[66];ja[66]=la;ya=a.baseline;S=ja[65];ja[65]=ya;U=q.call(this,N,a,f);oa=ja[62];ja[62]=U;qa=a.color;ea=ja[14];ja[14]=qa;aa=h.call(this,N,a,f);$a=ja[63];ja[63]=aa;na=a.opacity;ka=ja[10];ja[10]=na;Ba=a.positionOffset;Ca=ja[68];ja[68]=Ba;ta=this.scale;Ea=ja[6];ja[6]=ta;Gb=this.translate;ra=ja[8];ja[8]=Gb;mb=this.viewportArray;fc=ja[3];ja[3]=
mb;pb=this.charBuffer;fb=!1;Pc=null;$b=0;hb=!1;bb=Ob=0;qb=1;Va=0;Kc=5126;Pb=sc=Kb=Ib=0;M(pb)?(fb=!0,Pc=R.createStream(34962,pb),Kc=Pc.dtype):(Pc=R.getBuffer(pb))?Kc=Pc.dtype:"constant"in pb?(qb=2,"number"===typeof pb.constant?(Kb=pb.constant,sc=Pb=Ib=0):(Kb=0<pb.constant.length?pb.constant[0]:0,sc=1<pb.constant.length?pb.constant[1]:0,Pb=2<pb.constant.length?pb.constant[2]:0,Ib=3<pb.constant.length?pb.constant[3]:0)):(Pc=M(pb.buffer)?R.createStream(34962,pb.buffer):R.getBuffer(pb.buffer),Kc="type"in
pb?Fa[pb.type]:Pc.dtype,hb=!!pb.normalized,bb=pb.size|0,Ob=pb.offset|0,Va=pb.stride|0,$b=pb.divisor|0);kb=A.buffer;A.buffer=Pc;Fb=A.divisor;A.divisor=$b;Db=A.normalized;A.normalized=hb;zb=A.offset;A.offset=Ob;ib=A.size;A.size=bb;ac=A.state;A.state=qb;Qb=A.stride;A.stride=Va;sb=A.type;A.type=Kc;Sa=A.w;A.w=Ib;Vb=A.x;A.x=Kb;tb=A.y;A.y=sc;lc=A.z;A.z=Pb;ha.buffer=this.sizeBuffer;jb=!1;rb=null;Ja=0;ub=!1;db=La=0;gb=1;Na=0;lb=5126;Pa=vb=wb=Wa=0;M(ha)?(jb=!0,rb=R.createStream(34962,ha),lb=rb.dtype):(rb=R.getBuffer(ha))?
lb=rb.dtype:"constant"in ha?(gb=2,"number"===typeof ha.constant?(wb=ha.constant,vb=Pa=Wa=0):(wb=0<ha.constant.length?ha.constant[0]:0,vb=1<ha.constant.length?ha.constant[1]:0,Pa=2<ha.constant.length?ha.constant[2]:0,Wa=3<ha.constant.length?ha.constant[3]:0)):(rb=M(ha.buffer)?R.createStream(34962,ha.buffer):R.getBuffer(ha.buffer),lb="type"in ha?Fa[ha.type]:rb.dtype,ub=!!ha.normalized,db=ha.size|0,La=ha.offset|0,Na=ha.stride|0,Ja=ha.divisor|0);Dc=n.buffer;n.buffer=rb;Ua=n.divisor;n.divisor=Ja;Lb=n.normalized;
n.normalized=ub;Eb=n.offset;n.offset=La;Ma=n.size;n.size=db;yd=n.state;n.state=gb;Ya=n.stride;n.stride=Na;Mb=n.type;n.type=lb;Nb=n.w;n.w=Wa;nb=n.x;n.x=wb;Oa=n.y;n.y=vb;bc=n.z;n.z=Pa;Ra=this.position;xb=!1;yb=null;Ta=0;ob=!1;Bc=ic=0;wc=1;cb=0;mc=5126;Bb=Qc=Xa=Mc=0;M(Ra)?(xb=!0,yb=R.createStream(34962,Ra),mc=yb.dtype):(yb=R.getBuffer(Ra))?mc=yb.dtype:"constant"in Ra?(wc=2,"number"===typeof Ra.constant?(Xa=Ra.constant,Qc=Bb=Mc=0):(Xa=0<Ra.constant.length?Ra.constant[0]:0,Qc=1<Ra.constant.length?Ra.constant[1]:
0,Bb=2<Ra.constant.length?Ra.constant[2]:0,Mc=3<Ra.constant.length?Ra.constant[3]:0)):(yb=M(Ra.buffer)?R.createStream(34962,Ra.buffer):R.getBuffer(Ra.buffer),mc="type"in Ra?Fa[Ra.type]:yb.dtype,ob=!!Ra.normalized,Bc=Ra.size|0,ic=Ra.offset|0,cb=Ra.stride|0,Ta=Ra.divisor|0);Za=z.buffer;z.buffer=yb;Xb=z.divisor;z.divisor=Ta;uc=z.normalized;z.normalized=ob;Yb=z.offset;z.offset=ic;Rb=z.size;z.size=Bc;Nc=z.state;z.state=wc;Sb=z.stride;z.stride=cb;Ld=z.type;z.type=mc;Fc=z.w;z.w=Mc;ud=z.x;z.x=Xa;Rc=z.y;z.y=
Qc;ad=z.z;z.z=Bb;Y.buffer=this.sizeBuffer;vd=!1;pc=null;xc=0;jc=!1;tc=ab=0;Ub=1;Zb=0;gc=5126;fd=Cc=zc=kc=0;M(Y)?(vd=!0,pc=R.createStream(34962,Y),gc=pc.dtype):(pc=R.getBuffer(Y))?gc=pc.dtype:"constant"in Y?(Ub=2,"number"===typeof Y.constant?(zc=Y.constant,Cc=fd=kc=0):(zc=0<Y.constant.length?Y.constant[0]:0,Cc=1<Y.constant.length?Y.constant[1]:0,fd=2<Y.constant.length?Y.constant[2]:0,kc=3<Y.constant.length?Y.constant[3]:0)):(pc=M(Y.buffer)?R.createStream(34962,Y.buffer):R.getBuffer(Y.buffer),gc="type"in
Y?Fa[Y.type]:pc.dtype,jc=!!Y.normalized,tc=Y.size|0,ab=Y.offset|0,Zb=Y.stride|0,xc=Y.divisor|0);Uc=m.buffer;m.buffer=pc;Vc=m.divisor;m.divisor=xc;Wc=m.normalized;m.normalized=jc;bd=m.offset;m.offset=ab;od=m.size;m.size=tc;gd=m.state;m.state=Ub;cd=m.stride;m.stride=Zb;nc=m.type;m.type=gc;ec=m.w;m.w=kc;dd=m.x;m.x=zc;Yc=m.y;m.y=Cc;hd=m.z;m.z=fd;Ac=X.vert;X.vert=61;kd=X.frag;X.frag=60;F.dirty=!0;c(N,a,f);N.viewportWidth=d;N.viewportHeight=k;ma[0]=t;ma[1]=D;ma[2]=v;ma[3]=y;Da[0]=V;Da[1]=G;Da[2]=ca;Da[3]=
W;da.blend_enable=C;ia[0]=B;ia[1]=sa;ia[2]=Aa;ia[3]=xa;da.depth_enable=I;da.stencil_enable=Ia;J&&(b.cpuTime+=performance.now()-E);O.offset=Q;O.count=K;O.primitive=L;ja[64]=fa;ja[69]=P;ja[67]=za;ja[66]=wa;ja[65]=S;ja[62]=oa;ja[14]=ea;ja[63]=$a;ja[10]=ka;ja[68]=Ca;ja[6]=Ea;ja[8]=ra;ja[3]=fc;fb&&R.destroyStream(Pc);A.buffer=kb;A.divisor=Fb;A.normalized=Db;A.offset=zb;A.size=ib;A.state=ac;A.stride=Qb;A.type=sb;A.w=Sa;A.x=Vb;A.y=tb;A.z=lc;jb&&R.destroyStream(rb);n.buffer=Dc;n.divisor=Ua;n.normalized=Lb;
n.offset=Eb;n.size=Ma;n.state=yd;n.stride=Ya;n.type=Mb;n.w=Nb;n.x=nb;n.y=Oa;n.z=bc;xb&&R.destroyStream(yb);z.buffer=Za;z.divisor=Xb;z.normalized=uc;z.offset=Yb;z.size=Rb;z.state=Nc;z.stride=Sb;z.type=Ld;z.w=Fc;z.x=ud;z.y=Rc;z.z=ad;vd&&R.destroyStream(pc);m.buffer=Uc;m.divisor=Vc;m.normalized=Wc;m.offset=bd;m.size=od;m.state=gd;m.stride=cd;m.type=nc;m.w=ec;m.x=dd;m.y=Yc;m.z=hd;X.vert=Ac;X.frag=kd;F.dirty=!0}}},$2:function(a,b,x){var l,k,f,d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p;l=a.attributes;
k=a.current;f=a.framebuffer;d=a.gl;e=a.next;g=a.vao;w=e.blend_color;u=k.blend_color;q=e.blend_equation;h=k.blend_equation;A=e.blend_func;n=k.blend_func;z=e.colorMask;m=k.colorMask;E=e.depth_range;J=k.depth_range;H=e.polygonOffset_offset;ea=k.polygonOffset_offset;y=e.sample_coverage;v=k.sample_coverage;S=e.scissor_box;L=k.scissor_box;Q=e.stencil_func;C=k.stencil_func;B=e.stencil_opBack;ra=k.stencil_opBack;I=e.stencil_opFront;K=k.stencil_opFront;t=e.viewport;p=k.viewport;return{poll:function(){var a,
b,l,x,g,ga,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da;k.dirty=!1;b=e.blend_enable;l=e.cull_enable;x=e.depth_enable;g=e.dither;ga=e.polygonOffset_enable;aa=e.sample_alpha;T=e.sample_enable;R=e.scissor_enable;N=e.stencil_enable;F=e.cull_face;O=k.cull_face;P=e.depth_func;qa=k.depth_func;ta=e.depth_mask;G=k.depth_mask;M=e.frontFace;da=k.frontFace;X=e.lineWidth;ja=k.lineWidth;oa=e.stencil_mask;Da=k.stencil_mask;a=f.next;a!==f.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null),f.cur=
a);b!==k.blend_enable&&(b?d.enable(3042):d.disable(3042),k.blend_enable=b);l!==k.cull_enable&&(l?d.enable(2884):d.disable(2884),k.cull_enable=l);x!==k.depth_enable&&(x?d.enable(2929):d.disable(2929),k.depth_enable=x);g!==k.dither&&(g?d.enable(3024):d.disable(3024),k.dither=g);ga!==k.polygonOffset_enable&&(ga?d.enable(32823):d.disable(32823),k.polygonOffset_enable=ga);aa!==k.sample_alpha&&(aa?d.enable(32926):d.disable(32926),k.sample_alpha=aa);T!==k.sample_enable&&(T?d.enable(32928):d.disable(32928),
k.sample_enable=T);R!==k.scissor_enable&&(R?d.enable(3089):d.disable(3089),k.scissor_enable=R);N!==k.stencil_enable&&(N?d.enable(2960):d.disable(2960),k.stencil_enable=N);if(w[0]!==u[0]||w[1]!==u[1]||w[2]!==u[2]||w[3]!==u[3])d.blendColor(w[0],w[1],w[2],w[3]),u[0]=w[0],u[1]=w[1],u[2]=w[2],u[3]=w[3];if(q[0]!==h[0]||q[1]!==h[1])d.blendEquationSeparate(q[0],q[1]),h[0]=q[0],h[1]=q[1];if(A[0]!==n[0]||A[1]!==n[1]||A[2]!==n[2]||A[3]!==n[3])d.blendFuncSeparate(A[0],A[1],A[2],A[3]),n[0]=A[0],n[1]=A[1],n[2]=
A[2],n[3]=A[3];if(z[0]!==m[0]||z[1]!==m[1]||z[2]!==m[2]||z[3]!==m[3])d.colorMask(z[0],z[1],z[2],z[3]),m[0]=z[0],m[1]=z[1],m[2]=z[2],m[3]=z[3];F!==O&&(d.cullFace(F),k.cull_face=F);P!==qa&&(d.depthFunc(P),k.depth_func=P);ta!==G&&(d.depthMask(ta),k.depth_mask=ta);if(E[0]!==J[0]||E[1]!==J[1])d.depthRange(E[0],E[1]),J[0]=E[0],J[1]=E[1];M!==da&&(d.frontFace(M),k.frontFace=M);X!==ja&&(d.lineWidth(X),k.lineWidth=X);if(H[0]!==ea[0]||H[1]!==ea[1])d.polygonOffset(H[0],H[1]),ea[0]=H[0],ea[1]=H[1];if(y[0]!==v[0]||
y[1]!==v[1])d.sampleCoverage(y[0],y[1]),v[0]=y[0],v[1]=y[1];if(S[0]!==L[0]||S[1]!==L[1]||S[2]!==L[2]||S[3]!==L[3])d.scissor(S[0],S[1],S[2],S[3]),L[0]=S[0],L[1]=S[1],L[2]=S[2],L[3]=S[3];if(Q[0]!==C[0]||Q[1]!==C[1]||Q[2]!==C[2])d.stencilFunc(Q[0],Q[1],Q[2]),C[0]=Q[0],C[1]=Q[1],C[2]=Q[2];oa!==Da&&(d.stencilMask(oa),k.stencil_mask=oa);if(B[0]!==ra[0]||B[1]!==ra[1]||B[2]!==ra[2]||B[3]!==ra[3])d.stencilOpSeparate(B[0],B[1],B[2],B[3]),ra[0]=B[0],ra[1]=B[1],ra[2]=B[2],ra[3]=B[3];if(I[0]!==K[0]||I[1]!==K[1]||
I[2]!==K[2]||I[3]!==K[3])d.stencilOpSeparate(I[0],I[1],I[2],I[3]),K[0]=I[0],K[1]=I[1],K[2]=I[2],K[3]=I[3];if(t[0]!==p[0]||t[1]!==p[1]||t[2]!==p[2]||t[3]!==p[3])d.viewport(t[0],t[1],t[2],t[3]),p[0]=t[0],p[1]=t[1],p[2]=t[2],p[3]=t[3]},refresh:function(){var a,b,r,x,na,U,aa,T,R,N,F,O,P,qa,ta,G;k.dirty=!1;b=e.blend_enable;r=e.cull_enable;x=e.depth_enable;na=e.dither;U=e.polygonOffset_enable;aa=e.sample_alpha;T=e.sample_enable;R=e.scissor_enable;N=e.stencil_enable;F=e.cull_face;O=e.depth_func;P=e.depth_mask;
qa=e.frontFace;ta=e.lineWidth;G=e.stencil_mask;(a=f.next)?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null);f.cur=a;a=l[0];a.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=l[1];a.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(1,a.size,a.type,a.normalized,
a.stride,a.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=l[2];a.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=l[3];a.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(3),
d.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=l[4];a.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=l[5];a.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,a.x,a.y,a.z,
a.w),a.buffer=null);a=l[6];a.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=l[7];a.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=l[8];a.buffer?
(d.enableVertexAttribArray(8),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=l[9];a.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=l[10];a.buffer?(d.enableVertexAttribArray(10),
d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=l[11];a.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=l[12];a.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,a.buffer.buffer),
d.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=l[13];a.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=l[14];a.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(14,
a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=l[15];a.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);g.currentVAO=null;g.setVAO(g.targetVAO);b?d.enable(3042):d.disable(3042);k.blend_enable=b;r?d.enable(2884):d.disable(2884);k.cull_enable=
r;x?d.enable(2929):d.disable(2929);k.depth_enable=x;na?d.enable(3024):d.disable(3024);k.dither=na;U?d.enable(32823):d.disable(32823);k.polygonOffset_enable=U;aa?d.enable(32926):d.disable(32926);k.sample_alpha=aa;T?d.enable(32928):d.disable(32928);k.sample_enable=T;R?d.enable(3089):d.disable(3089);k.scissor_enable=R;N?d.enable(2960):d.disable(2960);k.stencil_enable=N;d.blendColor(w[0],w[1],w[2],w[3]);u[0]=w[0];u[1]=w[1];u[2]=w[2];u[3]=w[3];d.blendEquationSeparate(q[0],q[1]);h[0]=q[0];h[1]=q[1];d.blendFuncSeparate(A[0],
A[1],A[2],A[3]);n[0]=A[0];n[1]=A[1];n[2]=A[2];n[3]=A[3];d.colorMask(z[0],z[1],z[2],z[3]);m[0]=z[0];m[1]=z[1];m[2]=z[2];m[3]=z[3];d.cullFace(F);k.cull_face=F;d.depthFunc(O);k.depth_func=O;d.depthMask(P);k.depth_mask=P;d.depthRange(E[0],E[1]);J[0]=E[0];J[1]=E[1];d.frontFace(qa);k.frontFace=qa;d.lineWidth(ta);k.lineWidth=ta;d.polygonOffset(H[0],H[1]);ea[0]=H[0];ea[1]=H[1];d.sampleCoverage(y[0],y[1]);v[0]=y[0];v[1]=y[1];d.scissor(S[0],S[1],S[2],S[3]);L[0]=S[0];L[1]=S[1];L[2]=S[2];L[3]=S[3];d.stencilFunc(Q[0],
Q[1],Q[2]);C[0]=Q[0];C[1]=Q[1];C[2]=Q[2];d.stencilMask(G);k.stencil_mask=G;d.stencilOpSeparate(B[0],B[1],B[2],B[3]);ra[0]=B[0];ra[1]=B[1];ra[2]=B[2];ra[3]=B[3];d.stencilOpSeparate(I[0],I[1],I[2],I[3]);K[0]=I[0];K[1]=I[1];K[2]=I[2];K[3]=I[3];d.viewport(t[0],t[1],t[2],t[3]);p[0]=t[0];p[1]=t[1];p[2]=t[2];p[3]=t[3]}}},$7:function(a,b,x,l,k,f,d,e){var g,w,u,q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T;g=a.context;w=a.current;u=a.framebuffer;q=a.gl;h=a.next;A=a.shader;n=a.vao;z=h.blend_color;
m=w.blend_color;E=h.blend_equation;J=w.blend_equation;H=h.blend_func;ea=w.blend_func;y=h.colorMask;v=w.colorMask;S=h.depth_range;L=w.depth_range;Q=h.polygonOffset_offset;C=w.polygonOffset_offset;B=h.sample_coverage;ra=w.sample_coverage;I=h.scissor_box;K=w.scissor_box;t=h.stencil_func;p=w.stencil_func;c=h.stencil_opBack;D=w.stencil_opBack;r=h.stencil_opFront;la=w.stencil_opFront;na=h.viewport;U=w.viewport;aa={};T={};return{draw:function(a){var e,d,I,T,qa,na,G,M,da,X;e=a.framebuffer;d=u.getFramebuffer(e);
e&&!d&&b.commandRaise(k,x);e=u.next;u.next=d;I=g.framebufferWidth;g.framebufferWidth=d?d.width:g.drawingBufferWidth;T=g.framebufferHeight;g.framebufferHeight=d?d.height:g.drawingBufferHeight;d!==u.cur&&(d?q.bindFramebuffer(36160,d.framebuffer):q.bindFramebuffer(36160,null),u.cur=d);if(w.dirty){d=h.dither;d!==w.dither&&(d?q.enable(3024):q.disable(3024),w.dither=d);d=h.blend_enable;d!==w.blend_enable&&(d?q.enable(3042):q.disable(3042),w.blend_enable=d);d=z[0];G=z[1];qa=z[2];na=z[3];if(d!==m[0]||G!==
m[1]||qa!==m[2]||na!==m[3])q.blendColor(d,G,qa,na),m[0]=d,m[1]=G,m[2]=qa,m[3]=na;d=E[0];G=E[1];if(d!==J[0]||G!==J[1])q.blendEquationSeparate(d,G),J[0]=d,J[1]=G;d=H[0];G=H[1];qa=H[2];na=H[3];if(d!==ea[0]||G!==ea[1]||qa!==ea[2]||na!==ea[3])q.blendFuncSeparate(d,G,qa,na),ea[0]=d,ea[1]=G,ea[2]=qa,ea[3]=na;d=h.depth_enable;d!==w.depth_enable&&(d?q.enable(2929):q.disable(2929),w.depth_enable=d);d=h.depth_func;d!==w.depth_func&&(q.depthFunc(d),w.depth_func=d);d=S[0];G=S[1];if(d!==L[0]||G!==L[1])q.depthRange(d,
G),L[0]=d,L[1]=G;d=h.depth_mask;d!==w.depth_mask&&(q.depthMask(d),w.depth_mask=d);d=y[0];G=y[1];qa=y[2];na=y[3];if(d!==v[0]||G!==v[1]||qa!==v[2]||na!==v[3])q.colorMask(d,G,qa,na),v[0]=d,v[1]=G,v[2]=qa,v[3]=na;d=h.cull_enable;d!==w.cull_enable&&(d?q.enable(2884):q.disable(2884),w.cull_enable=d);d=h.cull_face;d!==w.cull_face&&(q.cullFace(d),w.cull_face=d);d=h.frontFace;d!==w.frontFace&&(q.frontFace(d),w.frontFace=d);d=h.lineWidth;d!==w.lineWidth&&(q.lineWidth(d),w.lineWidth=d);d=h.polygonOffset_enable;
d!==w.polygonOffset_enable&&(d?q.enable(32823):q.disable(32823),w.polygonOffset_enable=d);d=Q[0];G=Q[1];if(d!==C[0]||G!==C[1])q.polygonOffset(d,G),C[0]=d,C[1]=G;d=h.sample_alpha;d!==w.sample_alpha&&(d?q.enable(32926):q.disable(32926),w.sample_alpha=d);d=h.sample_enable;d!==w.sample_enable&&(d?q.enable(32928):q.disable(32928),w.sample_enable=d);d=B[0];G=B[1];if(d!==ra[0]||G!==ra[1])q.sampleCoverage(d,G),ra[0]=d,ra[1]=G;d=h.stencil_enable;d!==w.stencil_enable&&(d?q.enable(2960):q.disable(2960),w.stencil_enable=
d);d=h.stencil_mask;d!==w.stencil_mask&&(q.stencilMask(d),w.stencil_mask=d);d=t[0];G=t[1];qa=t[2];if(d!==p[0]||G!==p[1]||qa!==p[2])q.stencilFunc(d,G,qa),p[0]=d,p[1]=G,p[2]=qa;d=r[0];G=r[1];qa=r[2];na=r[3];if(d!==la[0]||G!==la[1]||qa!==la[2]||na!==la[3])q.stencilOpSeparate(d,G,qa,na),la[0]=d,la[1]=G,la[2]=qa,la[3]=na;d=c[0];G=c[1];qa=c[2];na=c[3];if(d!==D[0]||G!==D[1]||qa!==D[2]||na!==D[3])q.stencilOpSeparate(d,G,qa,na),D[0]=d,D[1]=G,D[2]=qa,D[3]=na;d=h.scissor_enable;d!==w.scissor_enable&&(d?q.enable(3089):
q.disable(3089),w.scissor_enable=d)}qa=g.framebufferWidth;na=g.framebufferHeight;d=g.viewportWidth;g.viewportWidth=qa;G=g.viewportHeight;g.viewportHeight=na;q.viewport(0,0,qa,na);U[0]=0;U[1]=0;U[2]=qa;U[3]=na;qa=g.framebufferWidth;na=g.framebufferHeight;q.scissor(0,0,qa,na);K[0]=0;K[1]=0;K[2]=qa;K[3]=na;if(qa=w.profile)M=performance.now(),l.count++;na=A.program(A.vert,A.frag,x);q.useProgram(na.program);n.setVAO(null);da=na.id;(X=aa[da])||(X=aa[da]=f(na));X.call(this,a);w.dirty=!0;n.setVAO(null);u.next=
e;g.framebufferWidth=I;g.framebufferHeight=T;g.viewportWidth=d;g.viewportHeight=G;qa&&(l.cpuTime+=performance.now()-M)},scope:function(a,c,f){var p,e,r,k,t,D,h,v,y,A,q,m,n,C,B;p=a.framebuffer;e=u.getFramebuffer(p);p&&!e&&b.commandRaise(d,x);p=u.next;u.next=e;r=g.framebufferWidth;g.framebufferWidth=e?e.width:g.drawingBufferWidth;k=g.framebufferHeight;g.framebufferHeight=e?e.height:g.drawingBufferHeight;t=g.framebufferWidth;D=g.framebufferHeight;e=g.viewportWidth;g.viewportWidth=t;h=g.viewportHeight;
g.viewportHeight=D;v=na[0];na[0]=0;y=na[1];na[1]=0;A=na[2];na[2]=t;t=na[3];na[3]=D;q=g.framebufferWidth;m=g.framebufferHeight;D=I[0];I[0]=0;n=I[1];I[1]=0;C=I[2];I[2]=q;q=I[3];I[3]=m;if(m=w.profile)B=performance.now(),l.count++;w.dirty=!0;c(g,a,f);u.next=p;g.framebufferWidth=r;g.framebufferHeight=k;g.viewportWidth=e;g.viewportHeight=h;na[0]=v;na[1]=y;na[2]=A;na[3]=t;I[0]=D;I[1]=n;I[2]=C;I[3]=q;m&&(l.cpuTime+=performance.now()-B);w.dirty=!0},batch:function(a,b){var f,d,k,g,u;if(w.dirty){f=h.dither;
f!==w.dither&&(f?q.enable(3024):q.disable(3024),w.dither=f);f=h.blend_enable;f!==w.blend_enable&&(f?q.enable(3042):q.disable(3042),w.blend_enable=f);f=z[0];k=z[1];g=z[2];u=z[3];if(f!==m[0]||k!==m[1]||g!==m[2]||u!==m[3])q.blendColor(f,k,g,u),m[0]=f,m[1]=k,m[2]=g,m[3]=u;f=E[0];k=E[1];if(f!==J[0]||k!==J[1])q.blendEquationSeparate(f,k),J[0]=f,J[1]=k;f=H[0];k=H[1];g=H[2];u=H[3];if(f!==ea[0]||k!==ea[1]||g!==ea[2]||u!==ea[3])q.blendFuncSeparate(f,k,g,u),ea[0]=f,ea[1]=k,ea[2]=g,ea[3]=u;f=h.depth_enable;f!==
w.depth_enable&&(f?q.enable(2929):q.disable(2929),w.depth_enable=f);f=h.depth_func;f!==w.depth_func&&(q.depthFunc(f),w.depth_func=f);f=S[0];k=S[1];if(f!==L[0]||k!==L[1])q.depthRange(f,k),L[0]=f,L[1]=k;f=h.depth_mask;f!==w.depth_mask&&(q.depthMask(f),w.depth_mask=f);f=y[0];k=y[1];g=y[2];u=y[3];if(f!==v[0]||k!==v[1]||g!==v[2]||u!==v[3])q.colorMask(f,k,g,u),v[0]=f,v[1]=k,v[2]=g,v[3]=u;f=h.cull_enable;f!==w.cull_enable&&(f?q.enable(2884):q.disable(2884),w.cull_enable=f);f=h.cull_face;f!==w.cull_face&&
(q.cullFace(f),w.cull_face=f);f=h.frontFace;f!==w.frontFace&&(q.frontFace(f),w.frontFace=f);f=h.lineWidth;f!==w.lineWidth&&(q.lineWidth(f),w.lineWidth=f);f=h.polygonOffset_enable;f!==w.polygonOffset_enable&&(f?q.enable(32823):q.disable(32823),w.polygonOffset_enable=f);f=Q[0];k=Q[1];if(f!==C[0]||k!==C[1])q.polygonOffset(f,k),C[0]=f,C[1]=k;f=h.sample_alpha;f!==w.sample_alpha&&(f?q.enable(32926):q.disable(32926),w.sample_alpha=f);f=h.sample_enable;f!==w.sample_enable&&(f?q.enable(32928):q.disable(32928),
w.sample_enable=f);f=B[0];k=B[1];if(f!==ra[0]||k!==ra[1])q.sampleCoverage(f,k),ra[0]=f,ra[1]=k;f=h.stencil_enable;f!==w.stencil_enable&&(f?q.enable(2960):q.disable(2960),w.stencil_enable=f);f=h.stencil_mask;f!==w.stencil_mask&&(q.stencilMask(f),w.stencil_mask=f);f=t[0];k=t[1];g=t[2];if(f!==p[0]||k!==p[1]||g!==p[2])q.stencilFunc(f,k,g),p[0]=f,p[1]=k,p[2]=g;f=r[0];k=r[1];g=r[2];u=r[3];if(f!==la[0]||k!==la[1]||g!==la[2]||u!==la[3])q.stencilOpSeparate(f,k,g,u),la[0]=f,la[1]=k,la[2]=g,la[3]=u;f=c[0];k=
c[1];g=c[2];u=c[3];if(f!==D[0]||k!==D[1]||g!==D[2]||u!==D[3])q.stencilOpSeparate(f,k,g,u),D[0]=f,D[1]=k,D[2]=g,D[3]=u;f=h.scissor_enable;f!==w.scissor_enable&&(f?q.enable(3089):q.disable(3089),w.scissor_enable=f)}if(f=w.profile)d=performance.now(),l.count+=b;k=A.program(A.vert,A.frag,x);q.useProgram(k.program);n.setVAO(null);g=k.id;(u=T[g])||(u=T[g]=e(k));u.call(this,a,b);w.dirty=!0;n.setVAO(null);f&&(l.cpuTime+=performance.now()-d)}}},$5:function(a,b,x,l,k,f){var d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea,y,
v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U;d=a.context;e=a.current;g=a.framebuffer;w=a.gl;u=a.next;q=a.shader;h=a.vao;A=u.blend_color;n=e.blend_color;z=u.blend_equation;m=e.blend_equation;E=u.blend_func;J=e.blend_func;H=u.colorMask;ea=e.colorMask;y=u.depth_range;v=e.depth_range;S=u.polygonOffset_offset;L=e.polygonOffset_offset;Q=u.sample_coverage;C=e.sample_coverage;B=u.scissor_box;ra=e.scissor_box;I=u.stencil_func;K=e.stencil_func;t=u.stencil_opBack;p=e.stencil_opBack;c=u.stencil_opFront;D=e.stencil_opFront;
r=u.viewport;la=e.viewport;na={};U={};return{draw:function(a){var b,f,d,F,O;b=g.next;b!==g.cur&&(b?w.bindFramebuffer(36160,b.framebuffer):w.bindFramebuffer(36160,null),g.cur=b);if(e.dirty){b=u.dither;b!==e.dither&&(b?w.enable(3024):w.disable(3024),e.dither=b);b=u.blend_enable;b!==e.blend_enable&&(b?w.enable(3042):w.disable(3042),e.blend_enable=b);b=A[0];d=A[1];F=A[2];O=A[3];if(b!==n[0]||d!==n[1]||F!==n[2]||O!==n[3])w.blendColor(b,d,F,O),n[0]=b,n[1]=d,n[2]=F,n[3]=O;b=z[0];d=z[1];if(b!==m[0]||d!==m[1])w.blendEquationSeparate(b,
d),m[0]=b,m[1]=d;b=E[0];d=E[1];F=E[2];O=E[3];if(b!==J[0]||d!==J[1]||F!==J[2]||O!==J[3])w.blendFuncSeparate(b,d,F,O),J[0]=b,J[1]=d,J[2]=F,J[3]=O;b=u.depth_enable;b!==e.depth_enable&&(b?w.enable(2929):w.disable(2929),e.depth_enable=b);b=u.depth_func;b!==e.depth_func&&(w.depthFunc(b),e.depth_func=b);b=y[0];d=y[1];if(b!==v[0]||d!==v[1])w.depthRange(b,d),v[0]=b,v[1]=d;b=u.depth_mask;b!==e.depth_mask&&(w.depthMask(b),e.depth_mask=b);b=H[0];d=H[1];F=H[2];O=H[3];if(b!==ea[0]||d!==ea[1]||F!==ea[2]||O!==ea[3])w.colorMask(b,
d,F,O),ea[0]=b,ea[1]=d,ea[2]=F,ea[3]=O;b=u.cull_enable;b!==e.cull_enable&&(b?w.enable(2884):w.disable(2884),e.cull_enable=b);b=u.cull_face;b!==e.cull_face&&(w.cullFace(b),e.cull_face=b);b=u.frontFace;b!==e.frontFace&&(w.frontFace(b),e.frontFace=b);b=u.lineWidth;b!==e.lineWidth&&(w.lineWidth(b),e.lineWidth=b);b=u.polygonOffset_enable;b!==e.polygonOffset_enable&&(b?w.enable(32823):w.disable(32823),e.polygonOffset_enable=b);b=S[0];d=S[1];if(b!==L[0]||d!==L[1])w.polygonOffset(b,d),L[0]=b,L[1]=d;b=u.sample_alpha;
b!==e.sample_alpha&&(b?w.enable(32926):w.disable(32926),e.sample_alpha=b);b=u.sample_enable;b!==e.sample_enable&&(b?w.enable(32928):w.disable(32928),e.sample_enable=b);b=Q[0];d=Q[1];if(b!==C[0]||d!==C[1])w.sampleCoverage(b,d),C[0]=b,C[1]=d;b=u.stencil_enable;b!==e.stencil_enable&&(b?w.enable(2960):w.disable(2960),e.stencil_enable=b);b=u.stencil_mask;b!==e.stencil_mask&&(w.stencilMask(b),e.stencil_mask=b);b=I[0];d=I[1];F=I[2];if(b!==K[0]||d!==K[1]||F!==K[2])w.stencilFunc(b,d,F),K[0]=b,K[1]=d,K[2]=
F;b=c[0];d=c[1];F=c[2];O=c[3];if(b!==D[0]||d!==D[1]||F!==D[2]||O!==D[3])w.stencilOpSeparate(b,d,F,O),D[0]=b,D[1]=d,D[2]=F,D[3]=O;b=t[0];d=t[1];F=t[2];O=t[3];if(b!==p[0]||d!==p[1]||F!==p[2]||O!==p[3])w.stencilOpSeparate(b,d,F,O),p[0]=b,p[1]=d,p[2]=F,p[3]=O;b=u.scissor_enable;b!==e.scissor_enable&&(b?w.enable(3089):w.disable(3089),e.scissor_enable=b);b=B[0];d=B[1];F=B[2];O=B[3];if(b!==ra[0]||d!==ra[1]||F!==ra[2]||O!==ra[3])w.scissor(b,d,F,O),ra[0]=b,ra[1]=d,ra[2]=F,ra[3]=O;b=r[0];d=r[1];F=r[2];O=r[3];
if(b!==la[0]||d!==la[1]||F!==la[2]||O!==la[3])w.viewport(b,d,F,O),la[0]=b,la[1]=d,la[2]=F,la[3]=O;e.dirty=!1}if(b=e.profile)f=performance.now(),l.count++;d=q.program(q.vert,q.frag,x);w.useProgram(d.program);h.setVAO(null);F=d.id;(O=na[F])||(O=na[F]=k(d));O.call(this,a);h.setVAO(null);b&&(l.cpuTime+=performance.now()-f)},scope:function(a,c,b){var f,p;if(f=e.profile)p=performance.now(),l.count++;c(d,a,b);f&&(l.cpuTime+=performance.now()-p)},batch:function(a,b){var d,k,F,O,P;d=g.next;d!==g.cur&&(d?w.bindFramebuffer(36160,
d.framebuffer):w.bindFramebuffer(36160,null),g.cur=d);if(e.dirty){d=u.dither;d!==e.dither&&(d?w.enable(3024):w.disable(3024),e.dither=d);d=u.blend_enable;d!==e.blend_enable&&(d?w.enable(3042):w.disable(3042),e.blend_enable=d);d=A[0];F=A[1];O=A[2];P=A[3];if(d!==n[0]||F!==n[1]||O!==n[2]||P!==n[3])w.blendColor(d,F,O,P),n[0]=d,n[1]=F,n[2]=O,n[3]=P;d=z[0];F=z[1];if(d!==m[0]||F!==m[1])w.blendEquationSeparate(d,F),m[0]=d,m[1]=F;d=E[0];F=E[1];O=E[2];P=E[3];if(d!==J[0]||F!==J[1]||O!==J[2]||P!==J[3])w.blendFuncSeparate(d,
F,O,P),J[0]=d,J[1]=F,J[2]=O,J[3]=P;d=u.depth_enable;d!==e.depth_enable&&(d?w.enable(2929):w.disable(2929),e.depth_enable=d);d=u.depth_func;d!==e.depth_func&&(w.depthFunc(d),e.depth_func=d);d=y[0];F=y[1];if(d!==v[0]||F!==v[1])w.depthRange(d,F),v[0]=d,v[1]=F;d=u.depth_mask;d!==e.depth_mask&&(w.depthMask(d),e.depth_mask=d);d=H[0];F=H[1];O=H[2];P=H[3];if(d!==ea[0]||F!==ea[1]||O!==ea[2]||P!==ea[3])w.colorMask(d,F,O,P),ea[0]=d,ea[1]=F,ea[2]=O,ea[3]=P;d=u.cull_enable;d!==e.cull_enable&&(d?w.enable(2884):
w.disable(2884),e.cull_enable=d);d=u.cull_face;d!==e.cull_face&&(w.cullFace(d),e.cull_face=d);d=u.frontFace;d!==e.frontFace&&(w.frontFace(d),e.frontFace=d);d=u.lineWidth;d!==e.lineWidth&&(w.lineWidth(d),e.lineWidth=d);d=u.polygonOffset_enable;d!==e.polygonOffset_enable&&(d?w.enable(32823):w.disable(32823),e.polygonOffset_enable=d);d=S[0];F=S[1];if(d!==L[0]||F!==L[1])w.polygonOffset(d,F),L[0]=d,L[1]=F;d=u.sample_alpha;d!==e.sample_alpha&&(d?w.enable(32926):w.disable(32926),e.sample_alpha=d);d=u.sample_enable;
d!==e.sample_enable&&(d?w.enable(32928):w.disable(32928),e.sample_enable=d);d=Q[0];F=Q[1];if(d!==C[0]||F!==C[1])w.sampleCoverage(d,F),C[0]=d,C[1]=F;d=u.stencil_enable;d!==e.stencil_enable&&(d?w.enable(2960):w.disable(2960),e.stencil_enable=d);d=u.stencil_mask;d!==e.stencil_mask&&(w.stencilMask(d),e.stencil_mask=d);d=I[0];F=I[1];O=I[2];if(d!==K[0]||F!==K[1]||O!==K[2])w.stencilFunc(d,F,O),K[0]=d,K[1]=F,K[2]=O;d=c[0];F=c[1];O=c[2];P=c[3];if(d!==D[0]||F!==D[1]||O!==D[2]||P!==D[3])w.stencilOpSeparate(d,
F,O,P),D[0]=d,D[1]=F,D[2]=O,D[3]=P;d=t[0];F=t[1];O=t[2];P=t[3];if(d!==p[0]||F!==p[1]||O!==p[2]||P!==p[3])w.stencilOpSeparate(d,F,O,P),p[0]=d,p[1]=F,p[2]=O,p[3]=P;d=u.scissor_enable;d!==e.scissor_enable&&(d?w.enable(3089):w.disable(3089),e.scissor_enable=d);d=B[0];F=B[1];O=B[2];P=B[3];if(d!==ra[0]||F!==ra[1]||O!==ra[2]||P!==ra[3])w.scissor(d,F,O,P),ra[0]=d,ra[1]=F,ra[2]=O,ra[3]=P;d=r[0];F=r[1];O=r[2];P=r[3];if(d!==la[0]||F!==la[1]||O!==la[2]||P!==la[3])w.viewport(d,F,O,P),la[0]=d,la[1]=F,la[2]=O,la[3]=
P;e.dirty=!1}if(d=e.profile)k=performance.now(),l.count+=b;F=q.program(q.vert,q.frag,x);w.useProgram(F.program);h.setVAO(null);O=F.id;(P=U[O])||(P=U[O]=f(F));P.call(this,a,b);h.setVAO(null);d&&(l.cpuTime+=performance.now()-k)}}},"$26,color,freq,phase,projection,time,view":function(a,b,x,l,k,f,d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p){var c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,ca,sa,wa,Ea,mb,Gb,fa;c=a.attributes;D=a.context;r=a.current;la=
a.draw;na=a.elements;U=a.framebuffer;aa=a.gl;T=a.isArrayLike;R=a.next;N=a.shader;F=a.uniforms;O=a.vao;P=R.blend_color;qa=r.blend_color;ta=R.blend_equation;G=r.blend_equation;M=R.blend_func;da=r.blend_func;X=R.colorMask;ja=r.colorMask;oa=R.depth_range;Da=r.depth_range;ya=R.polygonOffset_offset;Z=r.polygonOffset_offset;Ca=R.sample_coverage;ia=r.sample_coverage;ka=R.scissor_box;Ba=r.scissor_box;Qa=R.stencil_func;Aa=r.stencil_func;Hb=R.stencil_opBack;$a=r.stencil_opBack;V=R.stencil_opFront;ca=r.stencil_opFront;
sa=R.viewport;wa=r.viewport;Ea=new Float32Array(16);mb=new Float32Array(16);Gb=new Float32Array(16);fa=new Float32Array(16);return{draw:function(a){var v,y,m,n;v=U.next;v!==U.cur&&(v?aa.bindFramebuffer(36160,v.framebuffer):aa.bindFramebuffer(36160,null),U.cur=v);if(r.dirty){var C;v=R.dither;v!==r.dither&&(v?aa.enable(3024):aa.disable(3024),r.dither=v);v=R.blend_enable;v!==r.blend_enable&&(v?aa.enable(3042):aa.disable(3042),r.blend_enable=v);v=P[0];m=P[1];n=P[2];C=P[3];if(v!==qa[0]||m!==qa[1]||n!==
qa[2]||C!==qa[3])aa.blendColor(v,m,n,C),qa[0]=v,qa[1]=m,qa[2]=n,qa[3]=C;v=ta[0];m=ta[1];if(v!==G[0]||m!==G[1])aa.blendEquationSeparate(v,m),G[0]=v,G[1]=m;v=M[0];m=M[1];n=M[2];C=M[3];if(v!==da[0]||m!==da[1]||n!==da[2]||C!==da[3])aa.blendFuncSeparate(v,m,n,C),da[0]=v,da[1]=m,da[2]=n,da[3]=C;v=R.depth_enable;v!==r.depth_enable&&(v?aa.enable(2929):aa.disable(2929),r.depth_enable=v);v=R.depth_func;v!==r.depth_func&&(aa.depthFunc(v),r.depth_func=v);v=oa[0];m=oa[1];if(v!==Da[0]||m!==Da[1])aa.depthRange(v,
m),Da[0]=v,Da[1]=m;v=R.depth_mask;v!==r.depth_mask&&(aa.depthMask(v),r.depth_mask=v);v=X[0];m=X[1];n=X[2];C=X[3];if(v!==ja[0]||m!==ja[1]||n!==ja[2]||C!==ja[3])aa.colorMask(v,m,n,C),ja[0]=v,ja[1]=m,ja[2]=n,ja[3]=C;v=R.cull_enable;v!==r.cull_enable&&(v?aa.enable(2884):aa.disable(2884),r.cull_enable=v);v=R.cull_face;v!==r.cull_face&&(aa.cullFace(v),r.cull_face=v);v=R.frontFace;v!==r.frontFace&&(aa.frontFace(v),r.frontFace=v);v=R.lineWidth;v!==r.lineWidth&&(aa.lineWidth(v),r.lineWidth=v);v=R.polygonOffset_enable;
v!==r.polygonOffset_enable&&(v?aa.enable(32823):aa.disable(32823),r.polygonOffset_enable=v);v=ya[0];m=ya[1];if(v!==Z[0]||m!==Z[1])aa.polygonOffset(v,m),Z[0]=v,Z[1]=m;v=R.sample_alpha;v!==r.sample_alpha&&(v?aa.enable(32926):aa.disable(32926),r.sample_alpha=v);v=R.sample_enable;v!==r.sample_enable&&(v?aa.enable(32928):aa.disable(32928),r.sample_enable=v);v=Ca[0];m=Ca[1];if(v!==ia[0]||m!==ia[1])aa.sampleCoverage(v,m),ia[0]=v,ia[1]=m;v=R.stencil_enable;v!==r.stencil_enable&&(v?aa.enable(2960):aa.disable(2960),
r.stencil_enable=v);v=R.stencil_mask;v!==r.stencil_mask&&(aa.stencilMask(v),r.stencil_mask=v);v=Qa[0];m=Qa[1];n=Qa[2];if(v!==Aa[0]||m!==Aa[1]||n!==Aa[2])aa.stencilFunc(v,m,n),Aa[0]=v,Aa[1]=m,Aa[2]=n;v=V[0];m=V[1];n=V[2];C=V[3];if(v!==ca[0]||m!==ca[1]||n!==ca[2]||C!==ca[3])aa.stencilOpSeparate(v,m,n,C),ca[0]=v,ca[1]=m,ca[2]=n,ca[3]=C;v=Hb[0];m=Hb[1];n=Hb[2];C=Hb[3];if(v!==$a[0]||m!==$a[1]||n!==$a[2]||C!==$a[3])aa.stencilOpSeparate(v,m,n,C),$a[0]=v,$a[1]=m,$a[2]=n,$a[3]=C;v=R.scissor_enable;v!==r.scissor_enable&&
(v?aa.enable(3089):aa.disable(3089),r.scissor_enable=v);v=ka[0];m=ka[1];n=ka[2];C=ka[3];if(v!==Ba[0]||m!==Ba[1]||n!==Ba[2]||C!==Ba[3])aa.scissor(v,m,n,C),Ba[0]=v,Ba[1]=m,Ba[2]=n,Ba[3]=C;v=sa[0];m=sa[1];n=sa[2];C=sa[3];if(v!==wa[0]||m!==wa[1]||n!==wa[2]||C!==wa[3])aa.viewport(v,m,n,C),wa[0]=v,wa[1]=m,wa[2]=n,wa[3]=C;r.dirty=!1}if(v=r.profile)y=performance.now(),l.count++;aa.useProgram(k.program);O.setVAO(null);m=ra.location;n=c[m];n.buffer||aa.enableVertexAttribArray(m);if(5126!==n.type||4!==n.size||
n.buffer!==f||!1!==n.normalized||0!==n.offset||44!==n.stride)aa.bindBuffer(34962,f.buffer),aa.vertexAttribPointer(m,4,5126,!1,44,0),n.type=5126,n.size=4,n.buffer=f,n.normalized=!1,n.offset=0,n.stride=44;m=I.location;n=c[m];n.buffer||aa.enableVertexAttribArray(m);if(5126!==n.type||4!==n.size||n.buffer!==d||!1!==n.normalized||16!==n.offset||44!==n.stride)aa.bindBuffer(34962,d.buffer),aa.vertexAttribPointer(m,4,5126,!1,44,16),n.type=5126,n.size=4,n.buffer=d,n.normalized=!1,n.offset=16,n.stride=44;m=
B.location;n=c[m];n.buffer||aa.enableVertexAttribArray(m);if(5126!==n.type||3!==n.size||n.buffer!==e||!1!==n.normalized||32!==n.offset||44!==n.stride)aa.bindBuffer(34962,e.buffer),aa.vertexAttribPointer(m,3,5126,!1,44,32),n.type=5126,n.size=3,n.buffer=e,n.normalized=!1,n.offset=32,n.stride=44;m=g.call(this,D,a,0);"number"!==typeof m&&b.commandRaise(w,x);aa.uniform1f(t.location,m);m=u.call(this,D,a,0);T(m)&&16===m.length||b.commandRaise(q,x);aa.uniformMatrix4fv(p.location,!1,Array.isArray(m)||m instanceof
Float32Array?m:(Ea[0]=m[0],Ea[1]=m[1],Ea[2]=m[2],Ea[3]=m[3],Ea[4]=m[4],Ea[5]=m[5],Ea[6]=m[6],Ea[7]=m[7],Ea[8]=m[8],Ea[9]=m[9],Ea[10]=m[10],Ea[11]=m[11],Ea[12]=m[12],Ea[13]=m[13],Ea[14]=m[14],Ea[15]=m[15],Ea));a=h.call(this,D,a,0);T(a)&&16===a.length||b.commandRaise(A,x);aa.uniformMatrix4fv(K.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(mb[0]=a[0],mb[1]=a[1],mb[2]=a[2],mb[3]=a[3],mb[4]=a[4],mb[5]=a[5],mb[6]=a[6],mb[7]=a[7],mb[8]=a[8],mb[9]=a[9],mb[10]=a[10],mb[11]=a[11],mb[12]=a[12],
mb[13]=a[13],mb[14]=a[14],mb[15]=a[15],mb));(a=la.elements)?aa.bindBuffer(34963,a.buffer.buffer):O.currentVAO&&(a=na.getElements(O.currentVAO.elements))&&aa.bindBuffer(34963,a.buffer.buffer);m=la.offset;a?aa.drawElements(0,1E4,a.type,m<<(a.type-5121>>1)):aa.drawArrays(0,m,1E4);O.setVAO(null);v&&(l.cpuTime+=performance.now()-y)},scope:function(a,c,b){var p,x,k,g,t,v,h,u,y,V,G,w,A,q,ca,C,B,sa,Aa,I,M,X,Q,K,Z,L,ga,fa,Hb,pa,Qa,O,da,wa,P,R,ya,S,oa,U,T,ea,qa,ia,aa;if(p=r.profile)x=performance.now(),l.count++;
k=la.count;la.count=1E4;g=la.primitive;la.primitive=0;t=n.call(this,D,a,b);v=F[5];F[5]=t;h=z.call(this,D,a,b);t=F[3];F[3]=h;u=m.call(this,D,a,b);h=F[4];F[4]=u;u=E.buffer;E.buffer=e;y=E.divisor;E.divisor=0;V=E.normalized;E.normalized=!1;G=E.offset;E.offset=32;w=E.size;E.size=0;A=E.state;E.state=1;q=E.stride;E.stride=44;ca=E.type;E.type=5126;C=E.w;E.w=0;B=E.x;E.x=0;sa=E.y;E.y=0;Aa=E.z;E.z=0;I=J.buffer;J.buffer=f;M=J.divisor;J.divisor=0;X=J.normalized;J.normalized=!1;Q=J.offset;J.offset=0;K=J.size;J.size=
0;Z=J.state;J.state=1;L=J.stride;J.stride=44;ga=J.type;J.type=5126;fa=J.w;J.w=0;Hb=J.x;J.x=0;pa=J.y;J.y=0;Qa=J.z;J.z=0;O=H.buffer;H.buffer=d;da=H.divisor;H.divisor=0;wa=H.normalized;H.normalized=!1;P=H.offset;H.offset=16;R=H.size;H.size=0;ya=H.state;H.state=1;S=H.stride;H.stride=44;oa=H.type;H.type=5126;U=H.w;H.w=0;T=H.x;H.x=0;ea=H.y;H.y=0;qa=H.z;H.z=0;ia=N.vert;N.vert=2;aa=N.frag;N.frag=1;c(D,a,b);p&&(l.cpuTime+=performance.now()-x);la.count=k;la.primitive=g;F[5]=v;F[3]=t;F[4]=h;E.buffer=u;E.divisor=
y;E.normalized=V;E.offset=G;E.size=w;E.state=A;E.stride=q;E.type=ca;E.w=C;E.x=B;E.y=sa;E.z=Aa;J.buffer=I;J.divisor=M;J.normalized=X;J.offset=Q;J.size=K;J.state=Z;J.stride=L;J.type=ga;J.w=fa;J.x=Hb;J.y=pa;J.z=Qa;H.buffer=O;H.divisor=da;H.normalized=wa;H.offset=P;H.size=R;H.state=ya;H.stride=S;H.type=oa;H.w=U;H.x=T;H.y=ea;H.z=qa;N.vert=ia;N.frag=aa},batch:function(a,k){var g,h,u;g=U.next;g!==U.cur&&(g?aa.bindFramebuffer(36160,g.framebuffer):aa.bindFramebuffer(36160,null),U.cur=g);if(r.dirty){var m,
w,n;g=R.dither;g!==r.dither&&(g?aa.enable(3024):aa.disable(3024),r.dither=g);g=R.blend_enable;g!==r.blend_enable&&(g?aa.enable(3042):aa.disable(3042),r.blend_enable=g);g=P[0];m=P[1];w=P[2];n=P[3];if(g!==qa[0]||m!==qa[1]||w!==qa[2]||n!==qa[3])aa.blendColor(g,m,w,n),qa[0]=g,qa[1]=m,qa[2]=w,qa[3]=n;g=ta[0];m=ta[1];if(g!==G[0]||m!==G[1])aa.blendEquationSeparate(g,m),G[0]=g,G[1]=m;g=M[0];m=M[1];w=M[2];n=M[3];if(g!==da[0]||m!==da[1]||w!==da[2]||n!==da[3])aa.blendFuncSeparate(g,m,w,n),da[0]=g,da[1]=m,da[2]=
w,da[3]=n;g=R.depth_enable;g!==r.depth_enable&&(g?aa.enable(2929):aa.disable(2929),r.depth_enable=g);g=R.depth_func;g!==r.depth_func&&(aa.depthFunc(g),r.depth_func=g);g=oa[0];m=oa[1];if(g!==Da[0]||m!==Da[1])aa.depthRange(g,m),Da[0]=g,Da[1]=m;g=R.depth_mask;g!==r.depth_mask&&(aa.depthMask(g),r.depth_mask=g);g=X[0];m=X[1];w=X[2];n=X[3];if(g!==ja[0]||m!==ja[1]||w!==ja[2]||n!==ja[3])aa.colorMask(g,m,w,n),ja[0]=g,ja[1]=m,ja[2]=w,ja[3]=n;g=R.cull_enable;g!==r.cull_enable&&(g?aa.enable(2884):aa.disable(2884),
r.cull_enable=g);g=R.cull_face;g!==r.cull_face&&(aa.cullFace(g),r.cull_face=g);g=R.frontFace;g!==r.frontFace&&(aa.frontFace(g),r.frontFace=g);g=R.lineWidth;g!==r.lineWidth&&(aa.lineWidth(g),r.lineWidth=g);g=R.polygonOffset_enable;g!==r.polygonOffset_enable&&(g?aa.enable(32823):aa.disable(32823),r.polygonOffset_enable=g);g=ya[0];m=ya[1];if(g!==Z[0]||m!==Z[1])aa.polygonOffset(g,m),Z[0]=g,Z[1]=m;g=R.sample_alpha;g!==r.sample_alpha&&(g?aa.enable(32926):aa.disable(32926),r.sample_alpha=g);g=R.sample_enable;
g!==r.sample_enable&&(g?aa.enable(32928):aa.disable(32928),r.sample_enable=g);g=Ca[0];m=Ca[1];if(g!==ia[0]||m!==ia[1])aa.sampleCoverage(g,m),ia[0]=g,ia[1]=m;g=R.stencil_enable;g!==r.stencil_enable&&(g?aa.enable(2960):aa.disable(2960),r.stencil_enable=g);g=R.stencil_mask;g!==r.stencil_mask&&(aa.stencilMask(g),r.stencil_mask=g);g=Qa[0];m=Qa[1];w=Qa[2];if(g!==Aa[0]||m!==Aa[1]||w!==Aa[2])aa.stencilFunc(g,m,w),Aa[0]=g,Aa[1]=m,Aa[2]=w;g=V[0];m=V[1];w=V[2];n=V[3];if(g!==ca[0]||m!==ca[1]||w!==ca[2]||n!==
ca[3])aa.stencilOpSeparate(g,m,w,n),ca[0]=g,ca[1]=m,ca[2]=w,ca[3]=n;g=Hb[0];m=Hb[1];w=Hb[2];n=Hb[3];if(g!==$a[0]||m!==$a[1]||w!==$a[2]||n!==$a[3])aa.stencilOpSeparate(g,m,w,n),$a[0]=g,$a[1]=m,$a[2]=w,$a[3]=n;g=R.scissor_enable;g!==r.scissor_enable&&(g?aa.enable(3089):aa.disable(3089),r.scissor_enable=g);g=ka[0];m=ka[1];w=ka[2];n=ka[3];if(g!==Ba[0]||m!==Ba[1]||w!==Ba[2]||n!==Ba[3])aa.scissor(g,m,w,n),Ba[0]=g,Ba[1]=m,Ba[2]=w,Ba[3]=n;g=sa[0];m=sa[1];w=sa[2];n=sa[3];if(g!==wa[0]||m!==wa[1]||w!==wa[2]||
n!==wa[3])aa.viewport(g,m,w,n),wa[0]=g,wa[1]=m,wa[2]=w,wa[3]=n;r.dirty=!1}if(g=r.profile)h=performance.now(),l.count+=k;aa.useProgram(ea.program);O.setVAO(null);m=ra.location;w=c[m];w.buffer||aa.enableVertexAttribArray(m);if(5126!==w.type||4!==w.size||w.buffer!==f||!1!==w.normalized||0!==w.offset||44!==w.stride)aa.bindBuffer(34962,f.buffer),aa.vertexAttribPointer(m,4,5126,!1,44,0),w.type=5126,w.size=4,w.buffer=f,w.normalized=!1,w.offset=0,w.stride=44;m=I.location;w=c[m];w.buffer||aa.enableVertexAttribArray(m);
if(5126!==w.type||4!==w.size||w.buffer!==d||!1!==w.normalized||16!==w.offset||44!==w.stride)aa.bindBuffer(34962,d.buffer),aa.vertexAttribPointer(m,4,5126,!1,44,16),w.type=5126,w.size=4,w.buffer=d,w.normalized=!1,w.offset=16,w.stride=44;m=B.location;w=c[m];w.buffer||aa.enableVertexAttribArray(m);if(5126!==w.type||3!==w.size||w.buffer!==e||!1!==w.normalized||32!==w.offset||44!==w.stride)aa.bindBuffer(34962,e.buffer),aa.vertexAttribPointer(m,3,5126,!1,44,32),w.type=5126,w.size=3,w.buffer=e,w.normalized=
!1,w.offset=32,w.stride=44;m=y.call(this,D,void 0,u);"number"!==typeof m&&b.commandRaise(v,x);aa.uniform1f(t.location,m);m=S.call(this,D,void 0,u);T(m)&&16===m.length||b.commandRaise(L,x);aa.uniformMatrix4fv(p.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(Gb[0]=m[0],Gb[1]=m[1],Gb[2]=m[2],Gb[3]=m[3],Gb[4]=m[4],Gb[5]=m[5],Gb[6]=m[6],Gb[7]=m[7],Gb[8]=m[8],Gb[9]=m[9],Gb[10]=m[10],Gb[11]=m[11],Gb[12]=m[12],Gb[13]=m[13],Gb[14]=m[14],Gb[15]=m[15],Gb));u=Q.call(this,D,void 0,u);T(u)&&16===u.length||
b.commandRaise(C,x);aa.uniformMatrix4fv(K.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(fa[0]=u[0],fa[1]=u[1],fa[2]=u[2],fa[3]=u[3],fa[4]=u[4],fa[5]=u[5],fa[6]=u[6],fa[7]=u[7],fa[8]=u[8],fa[9]=u[9],fa[10]=u[10],fa[11]=u[11],fa[12]=u[12],fa[13]=u[13],fa[14]=u[14],fa[15]=u[15],fa));(m=la.elements)?aa.bindBuffer(34963,m.buffer.buffer):O.currentVAO&&(m=na.getElements(O.currentVAO.elements))&&aa.bindBuffer(34963,m.buffer.buffer);w=la.offset;for(u=0;u<k;++u)m?aa.drawElements(0,1E4,m.type,w<<
(m.type-5121>>1)):aa.drawArrays(0,w,1E4);O.setVAO(null);g&&(l.cpuTime+=performance.now()-h)}}},"$34,atlas,normal,position,projection,uv,view":function(a,b,x,l,k,f,d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T){var R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,ca,sa,wa,Ea,mb,Gb,fa,W,xa,Ia,ma,za,Fa,ha,Y,va,Ka,Ga;R=a.attributes;N=a.buffer;F=a.context;O=a.current;P=a.draw;qa=a.elements;ta=a.framebuffer;G=a.gl;M=a.isArrayLike;da=a.isBufferArgs;X=a.next;ja=
a.shader;oa=a.uniforms;Da=a.vao;ya=X.blend_color;Z=O.blend_color;Ca=X.blend_equation;ia=O.blend_equation;ka=X.blend_func;Ba=O.blend_func;Qa=X.colorMask;Aa=O.colorMask;Hb=X.depth_range;$a=O.depth_range;V=X.polygonOffset_offset;ca=O.polygonOffset_offset;sa=X.sample_coverage;wa=O.sample_coverage;Ea=X.scissor_box;mb=O.scissor_box;Gb=X.stencil_func;fa=O.stencil_func;W=X.stencil_opBack;xa=O.stencil_opBack;Ia=X.stencil_opFront;ma=O.stencil_opFront;za=X.viewport;Fa=O.viewport;ha={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);va=new Float32Array(16);Ka=new Float32Array(16);Ga=new Float32Array(16);return{draw:function(a){var c,p,t,v,D,m,y,C,B,z,I,J,E,Q,K,L,H,P,S,oa,ea,ja,ua,ra,Ga,Ka,Yd,Jd,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob,bb,qb;c=F.view;p=k.call(this,F,a,0);F.view=p;t=ta.next;t!==ta.cur&&(t?G.bindFramebuffer(36160,t.framebuffer):G.bindFramebuffer(36160,null),ta.cur=t);if(O.dirty){var Va,
Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb;Va=X.dither;Va!==O.dither&&(Va?G.enable(3024):G.disable(3024),O.dither=Va);Kc=X.blend_enable;Kc!==O.blend_enable&&(Kc?G.enable(3042):G.disable(3042),O.blend_enable=Kc);Ib=ya[0];Kb=ya[1];sc=ya[2];Pb=ya[3];if(Ib!==Z[0]||Kb!==Z[1]||sc!==Z[2]||Pb!==Z[3])G.blendColor(Ib,Kb,sc,Pb),Z[0]=Ib,Z[1]=Kb,Z[2]=sc,Z[3]=Pb;kb=Ca[0];Fb=Ca[1];if(kb!==ia[0]||Fb!==ia[1])G.blendEquationSeparate(kb,
Fb),ia[0]=kb,ia[1]=Fb;Db=ka[0];zb=ka[1];ib=ka[2];ac=ka[3];if(Db!==Ba[0]||zb!==Ba[1]||ib!==Ba[2]||ac!==Ba[3])G.blendFuncSeparate(Db,zb,ib,ac),Ba[0]=Db,Ba[1]=zb,Ba[2]=ib,Ba[3]=ac;Qb=X.depth_enable;Qb!==O.depth_enable&&(Qb?G.enable(2929):G.disable(2929),O.depth_enable=Qb);sb=X.depth_func;sb!==O.depth_func&&(G.depthFunc(sb),O.depth_func=sb);Sa=Hb[0];Vb=Hb[1];if(Sa!==$a[0]||Vb!==$a[1])G.depthRange(Sa,Vb),$a[0]=Sa,$a[1]=Vb;tb=X.depth_mask;tb!==O.depth_mask&&(G.depthMask(tb),O.depth_mask=tb);lc=Qa[0];jb=
Qa[1];rb=Qa[2];Ja=Qa[3];if(lc!==Aa[0]||jb!==Aa[1]||rb!==Aa[2]||Ja!==Aa[3])G.colorMask(lc,jb,rb,Ja),Aa[0]=lc,Aa[1]=jb,Aa[2]=rb,Aa[3]=Ja;ub=X.frontFace;ub!==O.frontFace&&(G.frontFace(ub),O.frontFace=ub);La=X.lineWidth;La!==O.lineWidth&&(G.lineWidth(La),O.lineWidth=La);db=X.polygonOffset_enable;db!==O.polygonOffset_enable&&(db?G.enable(32823):G.disable(32823),O.polygonOffset_enable=db);gb=V[0];Na=V[1];if(gb!==ca[0]||Na!==ca[1])G.polygonOffset(gb,Na),ca[0]=gb,ca[1]=Na;lb=X.sample_alpha;lb!==O.sample_alpha&&
(lb?G.enable(32926):G.disable(32926),O.sample_alpha=lb);Wa=X.sample_enable;Wa!==O.sample_enable&&(Wa?G.enable(32928):G.disable(32928),O.sample_enable=Wa);wb=sa[0];vb=sa[1];if(wb!==wa[0]||vb!==wa[1])G.sampleCoverage(wb,vb),wa[0]=wb,wa[1]=vb;Pa=X.stencil_enable;Pa!==O.stencil_enable&&(Pa?G.enable(2960):G.disable(2960),O.stencil_enable=Pa);Dc=X.stencil_mask;Dc!==O.stencil_mask&&(G.stencilMask(Dc),O.stencil_mask=Dc);Ua=Gb[0];Lb=Gb[1];Eb=Gb[2];if(Ua!==fa[0]||Lb!==fa[1]||Eb!==fa[2])G.stencilFunc(Ua,Lb,
Eb),fa[0]=Ua,fa[1]=Lb,fa[2]=Eb;Ma=Ia[0];yd=Ia[1];Ya=Ia[2];Mb=Ia[3];if(Ma!==ma[0]||yd!==ma[1]||Ya!==ma[2]||Mb!==ma[3])G.stencilOpSeparate(Ma,yd,Ya,Mb),ma[0]=Ma,ma[1]=yd,ma[2]=Ya,ma[3]=Mb;Nb=W[0];nb=W[1];Oa=W[2];bc=W[3];if(Nb!==xa[0]||nb!==xa[1]||Oa!==xa[2]||bc!==xa[3])G.stencilOpSeparate(Nb,nb,Oa,bc),xa[0]=Nb,xa[1]=nb,xa[2]=Oa,xa[3]=bc;Ra=X.scissor_enable;Ra!==O.scissor_enable&&(Ra?G.enable(3089):G.disable(3089),O.scissor_enable=Ra);xb=Ea[0];yb=Ea[1];Ta=Ea[2];ob=Ea[3];if(xb!==mb[0]||yb!==mb[1]||Ta!==
mb[2]||ob!==mb[3])G.scissor(xb,yb,Ta,ob),mb[0]=xb,mb[1]=yb,mb[2]=Ta,mb[3]=ob;ic=za[0];Bc=za[1];wc=za[2];cb=za[3];if(ic!==Fa[0]||Bc!==Fa[1]||wc!==Fa[2]||cb!==Fa[3])G.viewport(ic,Bc,wc,cb),Fa[0]=ic,Fa[1]=Bc,Fa[2]=wc,Fa[3]=cb}G.enable(2884);O.cull_enable=!0;G.cullFace(1029);O.cull_face=1029;if(v=O.profile)D=performance.now(),l.count++;G.useProgram(f.program);Da.setVAO(null);(m=a.position)&&("object"===typeof m||"function"===typeof m)&&(da(m)||N.getBuffer(m)||N.getBuffer(m.buffer)||da(m.buffer)||"constant"in
m&&("number"===typeof m.constant||M(m.constant)))||b.commandRaise(d,x);y=!1;C=null;B=!1;I=z=0;J=1;E=0;Q=5126;P=H=L=K=0;da(m)?(y=!0,C=N.createStream(34962,m),Q=C.dtype):(C=N.getBuffer(m))?Q=C.dtype:"constant"in m?(J=2,"number"===typeof m.constant?(L=m.constant,H=P=K=0):(L=0<m.constant.length?m.constant[0]:0,H=1<m.constant.length?m.constant[1]:0,P=2<m.constant.length?m.constant[2]:0,K=3<m.constant.length?m.constant[3]:0)):(C=da(m.buffer)?N.createStream(34962,m.buffer):N.getBuffer(m.buffer),Q="type"in
m?ha[m.type]:C.dtype,B=!!m.normalized,I=m.size|0,z=m.offset|0,E=m.stride|0);S=na.location;oa=R[S];if(1===J){if(oa.buffer||G.enableVertexAttribArray(S),ea=I||3,oa.type!==Q||oa.size!==ea||oa.buffer!==C||oa.normalized!==B||oa.offset!==z||oa.stride!==E)G.bindBuffer(34962,C.buffer),G.vertexAttribPointer(S,ea,Q,B,E,z),oa.type=Q,oa.size=ea,oa.buffer=C,oa.normalized=B,oa.offset=z,oa.stride=E}else if(oa.buffer&&(G.disableVertexAttribArray(S),oa.buffer=null),oa.x!==L||oa.y!==H||oa.z!==P||oa.w!==K)G.vertexAttrib4f(S,
L,H,P,K),oa.x=L,oa.y=H,oa.z=P,oa.w=K;(ja=a.normal)&&("object"===typeof ja||"function"===typeof ja)&&(da(ja)||N.getBuffer(ja)||N.getBuffer(ja.buffer)||da(ja.buffer)||"constant"in ja&&("number"===typeof ja.constant||M(ja.constant)))||b.commandRaise(e,x);ua=!1;ra=null;Ga=!1;Yd=Ka=0;Jd=1;pd=0;ed=5126;Hc=rd=Oc=sd=0;da(ja)?(ua=!0,ra=N.createStream(34962,ja),ed=ra.dtype):(ra=N.getBuffer(ja))?ed=ra.dtype:"constant"in ja?(Jd=2,"number"===typeof ja.constant?(Oc=ja.constant,rd=Hc=sd=0):(Oc=0<ja.constant.length?
ja.constant[0]:0,rd=1<ja.constant.length?ja.constant[1]:0,Hc=2<ja.constant.length?ja.constant[2]:0,sd=3<ja.constant.length?ja.constant[3]:0)):(ra=da(ja.buffer)?N.createStream(34962,ja.buffer):N.getBuffer(ja.buffer),ed="type"in ja?ha[ja.type]:ra.dtype,Ga=!!ja.normalized,Yd=ja.size|0,Ka=ja.offset|0,pd=ja.stride|0);id=la.location;Tc=R[id];if(1===Jd){if(Tc.buffer||G.enableVertexAttribArray(id),nd=Yd||3,Tc.type!==ed||Tc.size!==nd||Tc.buffer!==ra||Tc.normalized!==Ga||Tc.offset!==Ka||Tc.stride!==pd)G.bindBuffer(34962,
ra.buffer),G.vertexAttribPointer(id,nd,ed,Ga,pd,Ka),Tc.type=ed,Tc.size=nd,Tc.buffer=ra,Tc.normalized=Ga,Tc.offset=Ka,Tc.stride=pd}else if(Tc.buffer&&(G.disableVertexAttribArray(id),Tc.buffer=null),Tc.x!==Oc||Tc.y!==rd||Tc.z!==Hc||Tc.w!==sd)G.vertexAttrib4f(id,Oc,rd,Hc,sd),Tc.x=Oc,Tc.y=rd,Tc.z=Hc,Tc.w=sd;(Wb=a.uv)&&("object"===typeof Wb||"function"===typeof Wb)&&(da(Wb)||N.getBuffer(Wb)||N.getBuffer(Wb.buffer)||da(Wb.buffer)||"constant"in Wb&&("number"===typeof Wb.constant||M(Wb.constant)))||b.commandRaise(g,
x);Jb=!1;vc=null;Ab=!1;Cb=yc=0;Lc=1;oc=0;Ic=5126;hc=Ec=Zc=$c=0;da(Wb)?(Jb=!0,vc=N.createStream(34962,Wb),Ic=vc.dtype):(vc=N.getBuffer(Wb))?Ic=vc.dtype:"constant"in Wb?(Lc=2,"number"===typeof Wb.constant?(Zc=Wb.constant,Ec=hc=$c=0):(Zc=0<Wb.constant.length?Wb.constant[0]:0,Ec=1<Wb.constant.length?Wb.constant[1]:0,hc=2<Wb.constant.length?Wb.constant[2]:0,$c=3<Wb.constant.length?Wb.constant[3]:0)):(vc=da(Wb.buffer)?N.createStream(34962,Wb.buffer):N.getBuffer(Wb.buffer),Ic="type"in Wb?ha[Wb.type]:vc.dtype,
Ab=!!Wb.normalized,Cb=Wb.size|0,yc=Wb.offset|0,oc=Wb.stride|0);Jc=aa.location;qc=R[Jc];if(1===Lc){if(qc.buffer||G.enableVertexAttribArray(Jc),rc=Cb||2,qc.type!==Ic||qc.size!==rc||qc.buffer!==vc||qc.normalized!==Ab||qc.offset!==yc||qc.stride!==oc)G.bindBuffer(34962,vc.buffer),G.vertexAttribPointer(Jc,rc,Ic,Ab,oc,yc),qc.type=Ic,qc.size=rc,qc.buffer=vc,qc.normalized=Ab,qc.offset=yc,qc.stride=oc}else if(qc.buffer&&(G.disableVertexAttribArray(Jc),qc.buffer=null),qc.x!==Zc||qc.y!==Ec||qc.z!==hc||qc.w!==
$c)G.vertexAttrib4f(Jc,Zc,Ec,hc,$c),qc.x=Zc,qc.y=Ec,qc.z=hc,qc.w=$c;fc=w.call(this,F,a,0);M(fc)&&16===fc.length||b.commandRaise(u,x);G.uniformMatrix4fv(U.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(Y[0]=fc[0],Y[1]=fc[1],Y[2]=fc[2],Y[3]=fc[3],Y[4]=fc[4],Y[5]=fc[5],Y[6]=fc[6],Y[7]=fc[7],Y[8]=fc[8],Y[9]=fc[9],Y[10]=fc[10],Y[11]=fc[11],Y[12]=fc[12],Y[13]=fc[13],Y[14]=fc[14],Y[15]=fc[15],Y));pb=F.view;M(pb)&&16===pb.length||b.commandRaise(q,x);G.uniformMatrix4fv(T.location,!1,Array.isArray(pb)||
pb instanceof Float32Array?pb:(va[0]=pb[0],va[1]=pb[1],va[2]=pb[2],va[3]=pb[3],va[4]=pb[4],va[5]=pb[5],va[6]=pb[6],va[7]=pb[7],va[8]=pb[8],va[9]=pb[9],va[10]=pb[10],va[11]=pb[11],va[12]=pb[12],va[13]=pb[13],va[14]=pb[14],va[15]=pb[15],va));(fb=a.atlas)&&"framebuffer"===fb._reglType&&(fb=fb.color[0]);"function"===typeof fb&&"texture2d"===fb._reglType||b.commandRaise(h,x);Pc=fb._texture;G.uniform1i(r.location,Pc.bind());$b=a.elements;hb=null;(Ob=da($b))?hb=qa.createStream($b):(hb=qa.getElements($b),
$b&&!hb&&b.commandRaise(A,x));hb&&G.bindBuffer(34963,hb.buffer.buffer);bb=hb?hb.primType:4;qb=hb?hb.vertCount:-1;0<=qb||b.commandRaise(n,x);qb&&(hb?G.drawElements(bb,qb,hb.type,0<<(hb.type-5121>>1)):G.drawArrays(bb,0,qb),O.dirty=!0,Da.setVAO(null),F.view=c,v&&(l.cpuTime+=performance.now()-D),y&&N.destroyStream(C),ua&&N.destroyStream(ra),Jb&&N.destroyStream(vc),Pc.unbind(),Ob&&qa.destroyStream(hb))},scope:function(a,c,f){var p,e,d,r,k,g,t,D,u,h,w,V,n,G,A,q,C,ca,W,B,sa,Aa,I,Q,K,L,Z,ga,fa,Hb,pa,Qa,ma,
xa,wa,Ia,la,R,ya,Y,U,T,ia,aa,na,$a,za,ka,Ba,Ca,Ea,Fa,Da,ra,Gb,va,ta,mb,Ga,Ka,Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb;p=F.view;e=z.call(this,F,a,f);F.view=e;d=X.cull_enable;X.cull_enable=!0;r=X.cull_face;X.cull_face=1029;if(k=O.profile)g=performance.now(),l.count++;t=a.elements;D=null;(u=da(t))?D=qa.createStream(t):(D=qa.getElements(t),t&&!D&&b.commandRaise(m,x));h=P.elements;P.elements=D;w=P.offset;P.offset=0;V=D?D.vertCount:
-1;n=P.count;P.count=V;G=D?D.primType:4;A=P.primitive;P.primitive=G;q=a.atlas;C=oa[5];oa[5]=q;ca=E.call(this,F,a,f);W=oa[3];oa[3]=ca;B=F.view;sa=oa[4];oa[4]=B;(Aa=a.normal)&&("object"===typeof Aa||"function"===typeof Aa)&&(da(Aa)||N.getBuffer(Aa)||N.getBuffer(Aa.buffer)||da(Aa.buffer)||"constant"in Aa&&("number"===typeof Aa.constant||M(Aa.constant)))||b.commandRaise(J,x);I=!1;Q=null;K=0;L=!1;ga=Z=0;fa=1;Hb=0;pa=5126;wa=xa=ma=Qa=0;da(Aa)?(I=!0,Q=N.createStream(34962,Aa),pa=Q.dtype):(Q=N.getBuffer(Aa))?
pa=Q.dtype:"constant"in Aa?(fa=2,"number"===typeof Aa.constant?(ma=Aa.constant,xa=wa=Qa=0):(ma=0<Aa.constant.length?Aa.constant[0]:0,xa=1<Aa.constant.length?Aa.constant[1]:0,wa=2<Aa.constant.length?Aa.constant[2]:0,Qa=3<Aa.constant.length?Aa.constant[3]:0)):(Q=da(Aa.buffer)?N.createStream(34962,Aa.buffer):N.getBuffer(Aa.buffer),pa="type"in Aa?ha[Aa.type]:Q.dtype,L=!!Aa.normalized,ga=Aa.size|0,Z=Aa.offset|0,Hb=Aa.stride|0,K=Aa.divisor|0);Ia=H.buffer;H.buffer=Q;la=H.divisor;H.divisor=K;R=H.normalized;
H.normalized=L;ya=H.offset;H.offset=Z;Y=H.size;H.size=ga;U=H.state;H.state=fa;T=H.stride;H.stride=Hb;ia=H.type;H.type=pa;aa=H.w;H.w=Qa;na=H.x;H.x=ma;$a=H.y;H.y=xa;za=H.z;H.z=wa;(ka=a.position)&&("object"===typeof ka||"function"===typeof ka)&&(da(ka)||N.getBuffer(ka)||N.getBuffer(ka.buffer)||da(ka.buffer)||"constant"in ka&&("number"===typeof ka.constant||M(ka.constant)))||b.commandRaise(ea,x);Ba=!1;Ca=null;Ea=0;Fa=!1;ra=Da=0;Gb=1;va=0;ta=5126;Va=Ka=Ga=mb=0;da(ka)?(Ba=!0,Ca=N.createStream(34962,ka),
ta=Ca.dtype):(Ca=N.getBuffer(ka))?ta=Ca.dtype:"constant"in ka?(Gb=2,"number"===typeof ka.constant?(Ga=ka.constant,Ka=Va=mb=0):(Ga=0<ka.constant.length?ka.constant[0]:0,Ka=1<ka.constant.length?ka.constant[1]:0,Va=2<ka.constant.length?ka.constant[2]:0,mb=3<ka.constant.length?ka.constant[3]:0)):(Ca=da(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),ta="type"in ka?ha[ka.type]:Ca.dtype,Fa=!!ka.normalized,ra=ka.size|0,Da=ka.offset|0,va=ka.stride|0,Ea=ka.divisor|0);Kc=y.buffer;y.buffer=
Ca;Ib=y.divisor;y.divisor=Ea;Kb=y.normalized;y.normalized=Fa;sc=y.offset;y.offset=Da;Pb=y.size;y.size=ra;kb=y.state;y.state=Gb;Fb=y.stride;y.stride=va;Db=y.type;y.type=ta;zb=y.w;y.w=mb;ib=y.x;y.x=Ga;ac=y.y;y.y=Ka;Qb=y.z;y.z=Va;(sb=a.uv)&&("object"===typeof sb||"function"===typeof sb)&&(da(sb)||N.getBuffer(sb)||N.getBuffer(sb.buffer)||da(sb.buffer)||"constant"in sb&&("number"===typeof sb.constant||M(sb.constant)))||b.commandRaise(v,x);Sa=!1;Vb=null;tb=0;lc=!1;rb=jb=0;Ja=1;ub=0;La=5126;lb=Na=gb=db=
0;da(sb)?(Sa=!0,Vb=N.createStream(34962,sb),La=Vb.dtype):(Vb=N.getBuffer(sb))?La=Vb.dtype:"constant"in sb?(Ja=2,"number"===typeof sb.constant?(gb=sb.constant,Na=lb=db=0):(gb=0<sb.constant.length?sb.constant[0]:0,Na=1<sb.constant.length?sb.constant[1]:0,lb=2<sb.constant.length?sb.constant[2]:0,db=3<sb.constant.length?sb.constant[3]:0)):(Vb=da(sb.buffer)?N.createStream(34962,sb.buffer):N.getBuffer(sb.buffer),La="type"in sb?ha[sb.type]:Vb.dtype,lc=!!sb.normalized,rb=sb.size|0,jb=sb.offset|0,ub=sb.stride|
0,tb=sb.divisor|0);Wa=S.buffer;S.buffer=Vb;wb=S.divisor;S.divisor=tb;vb=S.normalized;S.normalized=lc;Pa=S.offset;S.offset=jb;Dc=S.size;S.size=rb;Ua=S.state;S.state=Ja;Lb=S.stride;S.stride=ub;Eb=S.type;S.type=La;Ma=S.w;S.w=db;yd=S.x;S.x=gb;Ya=S.y;S.y=Na;Mb=S.z;S.z=lb;Nb=ja.vert;ja.vert=2;nb=ja.frag;ja.frag=1;O.dirty=!0;c(F,a,f);F.view=p;X.cull_enable=d;X.cull_face=r;k&&(l.cpuTime+=performance.now()-g);u&&qa.destroyStream(D);P.elements=h;P.offset=w;P.count=n;P.primitive=A;oa[5]=C;oa[3]=W;oa[4]=sa;I&&
N.destroyStream(Q);H.buffer=Ia;H.divisor=la;H.normalized=R;H.offset=ya;H.size=Y;H.state=U;H.stride=T;H.type=ia;H.w=aa;H.x=na;H.y=$a;H.z=za;Ba&&N.destroyStream(Ca);y.buffer=Kc;y.divisor=Ib;y.normalized=Kb;y.offset=sc;y.size=Pb;y.state=kb;y.stride=Fb;y.type=Db;y.w=zb;y.x=ib;y.y=ac;y.z=Qb;Sa&&N.destroyStream(Vb);S.buffer=Wa;S.divisor=wb;S.normalized=vb;S.offset=Pa;S.size=Dc;S.state=Ua;S.stride=Lb;S.type=Eb;S.w=Ma;S.x=yd;S.y=Ya;S.z=Mb;ja.vert=Nb;ja.frag=nb;O.dirty=!0},batch:function(a,f){var e,d,k,g,
v,m,u;e=F.view;d=L.call(this,F,a,0);F.view=d;k=ta.next;k!==ta.cur&&(k?G.bindFramebuffer(36160,k.framebuffer):G.bindFramebuffer(36160,null),ta.cur=k);if(O.dirty){var h,w,y,n,A,q,z,J,E,ga,H,pa,oa,P,S,Y,ea,ja,ua,va,pd,ed,sd,Oc,rd,Hc,id,Tc,nd,Wb,Jb,vc,Ab,yc,Cb,Lc,oc,Ic,$c,Zc,Ec,hc,Jc,qc,rc,fc,pb,fb,Pc,$b,hb,Ob;h=X.dither;h!==O.dither&&(h?G.enable(3024):G.disable(3024),O.dither=h);w=X.blend_enable;w!==O.blend_enable&&(w?G.enable(3042):G.disable(3042),O.blend_enable=w);y=ya[0];n=ya[1];A=ya[2];q=ya[3];if(y!==
Z[0]||n!==Z[1]||A!==Z[2]||q!==Z[3])G.blendColor(y,n,A,q),Z[0]=y,Z[1]=n,Z[2]=A,Z[3]=q;z=Ca[0];J=Ca[1];if(z!==ia[0]||J!==ia[1])G.blendEquationSeparate(z,J),ia[0]=z,ia[1]=J;E=ka[0];ga=ka[1];H=ka[2];pa=ka[3];if(E!==Ba[0]||ga!==Ba[1]||H!==Ba[2]||pa!==Ba[3])G.blendFuncSeparate(E,ga,H,pa),Ba[0]=E,Ba[1]=ga,Ba[2]=H,Ba[3]=pa;oa=X.depth_enable;oa!==O.depth_enable&&(oa?G.enable(2929):G.disable(2929),O.depth_enable=oa);P=X.depth_func;P!==O.depth_func&&(G.depthFunc(P),O.depth_func=P);S=Hb[0];Y=Hb[1];if(S!==$a[0]||
Y!==$a[1])G.depthRange(S,Y),$a[0]=S,$a[1]=Y;ea=X.depth_mask;ea!==O.depth_mask&&(G.depthMask(ea),O.depth_mask=ea);ja=Qa[0];ua=Qa[1];va=Qa[2];pd=Qa[3];if(ja!==Aa[0]||ua!==Aa[1]||va!==Aa[2]||pd!==Aa[3])G.colorMask(ja,ua,va,pd),Aa[0]=ja,Aa[1]=ua,Aa[2]=va,Aa[3]=pd;ed=X.frontFace;ed!==O.frontFace&&(G.frontFace(ed),O.frontFace=ed);sd=X.lineWidth;sd!==O.lineWidth&&(G.lineWidth(sd),O.lineWidth=sd);Oc=X.polygonOffset_enable;Oc!==O.polygonOffset_enable&&(Oc?G.enable(32823):G.disable(32823),O.polygonOffset_enable=
Oc);rd=V[0];Hc=V[1];if(rd!==ca[0]||Hc!==ca[1])G.polygonOffset(rd,Hc),ca[0]=rd,ca[1]=Hc;id=X.sample_alpha;id!==O.sample_alpha&&(id?G.enable(32926):G.disable(32926),O.sample_alpha=id);Tc=X.sample_enable;Tc!==O.sample_enable&&(Tc?G.enable(32928):G.disable(32928),O.sample_enable=Tc);nd=sa[0];Wb=sa[1];if(nd!==wa[0]||Wb!==wa[1])G.sampleCoverage(nd,Wb),wa[0]=nd,wa[1]=Wb;Jb=X.stencil_enable;Jb!==O.stencil_enable&&(Jb?G.enable(2960):G.disable(2960),O.stencil_enable=Jb);vc=X.stencil_mask;vc!==O.stencil_mask&&
(G.stencilMask(vc),O.stencil_mask=vc);Ab=Gb[0];yc=Gb[1];Cb=Gb[2];if(Ab!==fa[0]||yc!==fa[1]||Cb!==fa[2])G.stencilFunc(Ab,yc,Cb),fa[0]=Ab,fa[1]=yc,fa[2]=Cb;Lc=Ia[0];oc=Ia[1];Ic=Ia[2];$c=Ia[3];if(Lc!==ma[0]||oc!==ma[1]||Ic!==ma[2]||$c!==ma[3])G.stencilOpSeparate(Lc,oc,Ic,$c),ma[0]=Lc,ma[1]=oc,ma[2]=Ic,ma[3]=$c;Zc=W[0];Ec=W[1];hc=W[2];Jc=W[3];if(Zc!==xa[0]||Ec!==xa[1]||hc!==xa[2]||Jc!==xa[3])G.stencilOpSeparate(Zc,Ec,hc,Jc),xa[0]=Zc,xa[1]=Ec,xa[2]=hc,xa[3]=Jc;qc=X.scissor_enable;qc!==O.scissor_enable&&
(qc?G.enable(3089):G.disable(3089),O.scissor_enable=qc);rc=Ea[0];fc=Ea[1];pb=Ea[2];fb=Ea[3];if(rc!==mb[0]||fc!==mb[1]||pb!==mb[2]||fb!==mb[3])G.scissor(rc,fc,pb,fb),mb[0]=rc,mb[1]=fc,mb[2]=pb,mb[3]=fb;Pc=za[0];$b=za[1];hb=za[2];Ob=za[3];if(Pc!==Fa[0]||$b!==Fa[1]||hb!==Fa[2]||Ob!==Fa[3])G.viewport(Pc,$b,hb,Ob),Fa[0]=Pc,Fa[1]=$b,Fa[2]=hb,Fa[3]=Ob}G.enable(2884);O.cull_enable=!0;G.cullFace(1029);O.cull_face=1029;if(g=O.profile)v=performance.now(),l.count+=f;G.useProgram(Q.program);var bb,qb;Da.setVAO(null);
bb=I.call(this,F,u,m);M(bb)&&16===bb.length||b.commandRaise(K,x);G.uniformMatrix4fv(U.location,!1,Array.isArray(bb)||bb instanceof Float32Array?bb:(Ka[0]=bb[0],Ka[1]=bb[1],Ka[2]=bb[2],Ka[3]=bb[3],Ka[4]=bb[4],Ka[5]=bb[5],Ka[6]=bb[6],Ka[7]=bb[7],Ka[8]=bb[8],Ka[9]=bb[9],Ka[10]=bb[10],Ka[11]=bb[11],Ka[12]=bb[12],Ka[13]=bb[13],Ka[14]=bb[14],Ka[15]=bb[15],Ka));qb=F.view;M(qb)&&16===qb.length||b.commandRaise(t,x);G.uniformMatrix4fv(T.location,!1,Array.isArray(qb)||qb instanceof Float32Array?qb:(Ga[0]=qb[0],
Ga[1]=qb[1],Ga[2]=qb[2],Ga[3]=qb[3],Ga[4]=qb[4],Ga[5]=qb[5],Ga[6]=qb[6],Ga[7]=qb[7],Ga[8]=qb[8],Ga[9]=qb[9],Ga[10]=qb[10],Ga[11]=qb[11],Ga[12]=qb[12],Ga[13]=qb[13],Ga[14]=qb[14],Ga[15]=qb[15],Ga));for(m=0;m<f;++m){u=a[m];var Va,Kc,Ib,Kb,sc,Pb,kb,Fb,Db,zb,ib,ac,Qb,sb,Sa,Vb,tb,lc,jb,rb,Ja,ub,La,db,gb,Na,lb,Wa,wb,vb,Pa,Dc,Ua,Lb,Eb,Ma,yd,Ya,Mb,Nb,nb,Oa,bc,Ra,xb,yb,Ta,ob,ic,Bc,wc,cb,mc,Mc,Xa;(Va=u.position)&&("object"===typeof Va||"function"===typeof Va)&&(da(Va)||N.getBuffer(Va)||N.getBuffer(Va.buffer)||
da(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||M(Va.constant)))||b.commandRaise(C,x);Kc=!1;Ib=null;Kb=!1;Pb=sc=0;kb=1;Fb=0;Db=5126;Qb=ac=ib=zb=0;da(Va)?(Kc=!0,Ib=N.createStream(34962,Va),Db=Ib.dtype):(Ib=N.getBuffer(Va))?Db=Ib.dtype:"constant"in Va?(kb=2,"number"===typeof Va.constant?(ib=Va.constant,ac=Qb=zb=0):(ib=0<Va.constant.length?Va.constant[0]:0,ac=1<Va.constant.length?Va.constant[1]:0,Qb=2<Va.constant.length?Va.constant[2]:0,zb=3<Va.constant.length?Va.constant[3]:0)):(Ib=
da(Va.buffer)?N.createStream(34962,Va.buffer):N.getBuffer(Va.buffer),Db="type"in Va?ha[Va.type]:Ib.dtype,Kb=!!Va.normalized,Pb=Va.size|0,sc=Va.offset|0,Fb=Va.stride|0);sb=na.location;Sa=R[sb];if(1===kb){if(Sa.buffer||G.enableVertexAttribArray(sb),Vb=Pb||3,Sa.type!==Db||Sa.size!==Vb||Sa.buffer!==Ib||Sa.normalized!==Kb||Sa.offset!==sc||Sa.stride!==Fb)G.bindBuffer(34962,Ib.buffer),G.vertexAttribPointer(sb,Vb,Db,Kb,Fb,sc),Sa.type=Db,Sa.size=Vb,Sa.buffer=Ib,Sa.normalized=Kb,Sa.offset=sc,Sa.stride=Fb}else if(Sa.buffer&&
(G.disableVertexAttribArray(sb),Sa.buffer=null),Sa.x!==ib||Sa.y!==ac||Sa.z!==Qb||Sa.w!==zb)G.vertexAttrib4f(sb,ib,ac,Qb,zb),Sa.x=ib,Sa.y=ac,Sa.z=Qb,Sa.w=zb;(tb=u.normal)&&("object"===typeof tb||"function"===typeof tb)&&(da(tb)||N.getBuffer(tb)||N.getBuffer(tb.buffer)||da(tb.buffer)||"constant"in tb&&("number"===typeof tb.constant||M(tb.constant)))||b.commandRaise(B,x);lc=!1;jb=null;rb=!1;ub=Ja=0;La=1;db=0;gb=5126;wb=Wa=lb=Na=0;da(tb)?(lc=!0,jb=N.createStream(34962,tb),gb=jb.dtype):(jb=N.getBuffer(tb))?
gb=jb.dtype:"constant"in tb?(La=2,"number"===typeof tb.constant?(lb=tb.constant,Wa=wb=Na=0):(lb=0<tb.constant.length?tb.constant[0]:0,Wa=1<tb.constant.length?tb.constant[1]:0,wb=2<tb.constant.length?tb.constant[2]:0,Na=3<tb.constant.length?tb.constant[3]:0)):(jb=da(tb.buffer)?N.createStream(34962,tb.buffer):N.getBuffer(tb.buffer),gb="type"in tb?ha[tb.type]:jb.dtype,rb=!!tb.normalized,ub=tb.size|0,Ja=tb.offset|0,db=tb.stride|0);vb=la.location;Pa=R[vb];if(1===La){if(Pa.buffer||G.enableVertexAttribArray(vb),
Dc=ub||3,Pa.type!==gb||Pa.size!==Dc||Pa.buffer!==jb||Pa.normalized!==rb||Pa.offset!==Ja||Pa.stride!==db)G.bindBuffer(34962,jb.buffer),G.vertexAttribPointer(vb,Dc,gb,rb,db,Ja),Pa.type=gb,Pa.size=Dc,Pa.buffer=jb,Pa.normalized=rb,Pa.offset=Ja,Pa.stride=db}else if(Pa.buffer&&(G.disableVertexAttribArray(vb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==wb||Pa.w!==Na)G.vertexAttrib4f(vb,lb,Wa,wb,Na),Pa.x=lb,Pa.y=Wa,Pa.z=wb,Pa.w=Na;(Ua=u.uv)&&("object"===typeof Ua||"function"===typeof Ua)&&(da(Ua)||N.getBuffer(Ua)||
N.getBuffer(Ua.buffer)||da(Ua.buffer)||"constant"in Ua&&("number"===typeof Ua.constant||M(Ua.constant)))||b.commandRaise(ra,x);Lb=!1;Eb=null;Ma=!1;Ya=yd=0;Mb=1;Nb=0;nb=5126;xb=Ra=bc=Oa=0;da(Ua)?(Lb=!0,Eb=N.createStream(34962,Ua),nb=Eb.dtype):(Eb=N.getBuffer(Ua))?nb=Eb.dtype:"constant"in Ua?(Mb=2,"number"===typeof Ua.constant?(bc=Ua.constant,Ra=xb=Oa=0):(bc=0<Ua.constant.length?Ua.constant[0]:0,Ra=1<Ua.constant.length?Ua.constant[1]:0,xb=2<Ua.constant.length?Ua.constant[2]:0,Oa=3<Ua.constant.length?
Ua.constant[3]:0)):(Eb=da(Ua.buffer)?N.createStream(34962,Ua.buffer):N.getBuffer(Ua.buffer),nb="type"in Ua?ha[Ua.type]:Eb.dtype,Ma=!!Ua.normalized,Ya=Ua.size|0,yd=Ua.offset|0,Nb=Ua.stride|0);yb=aa.location;Ta=R[yb];if(1===Mb){if(Ta.buffer||G.enableVertexAttribArray(yb),ob=Ya||2,Ta.type!==nb||Ta.size!==ob||Ta.buffer!==Eb||Ta.normalized!==Ma||Ta.offset!==yd||Ta.stride!==Nb)G.bindBuffer(34962,Eb.buffer),G.vertexAttribPointer(yb,ob,nb,Ma,Nb,yd),Ta.type=nb,Ta.size=ob,Ta.buffer=Eb,Ta.normalized=Ma,Ta.offset=
yd,Ta.stride=Nb}else if(Ta.buffer&&(G.disableVertexAttribArray(yb),Ta.buffer=null),Ta.x!==bc||Ta.y!==Ra||Ta.z!==xb||Ta.w!==Oa)G.vertexAttrib4f(yb,bc,Ra,xb,Oa),Ta.x=bc,Ta.y=Ra,Ta.z=xb,Ta.w=Oa;(ic=u.atlas)&&"framebuffer"===ic._reglType&&(ic=ic.color[0]);"function"===typeof ic&&"texture2d"===ic._reglType||b.commandRaise(p,x);Bc=ic._texture;G.uniform1i(r.location,Bc.bind());wc=u.elements;cb=null;(mc=da(wc))?cb=qa.createStream(wc):(cb=qa.getElements(wc),wc&&!cb&&b.commandRaise(c,x));cb&&G.bindBuffer(34963,
cb.buffer.buffer);Mc=cb?cb.primType:4;Xa=cb?cb.vertCount:-1;0<=Xa||b.commandRaise(D,x);Xa&&(cb?G.drawElements(Mc,Xa,cb.type,0<<(cb.type-5121>>1)):G.drawArrays(Mc,0,Xa),Kc&&N.destroyStream(Ib),lc&&N.destroyStream(jb),Lb&&N.destroyStream(Eb),Bc.unbind(),mc&&qa.destroyStream(cb))}O.dirty=!0;Da.setVAO(null);F.view=e;g&&(l.cpuTime+=performance.now()-v)}}},"$7,color,position":function(a,b,x,l,k,f,d,e,g,w){var u,q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P;u=a.attributes;q=
a.context;h=a.current;A=a.draw;n=a.elements;z=a.framebuffer;m=a.gl;E=a.next;J=a.shader;H=a.uniforms;ea=a.vao;y=E.blend_color;v=h.blend_color;S=E.blend_equation;L=h.blend_equation;Q=E.blend_func;C=h.blend_func;B=E.colorMask;ra=h.colorMask;I=E.depth_range;K=h.depth_range;t=E.polygonOffset_offset;p=h.polygonOffset_offset;c=E.sample_coverage;D=h.sample_coverage;r=E.scissor_box;la=h.scissor_box;na=E.stencil_func;U=h.stencil_func;aa=E.stencil_opBack;T=h.stencil_opBack;R=E.stencil_opFront;N=h.stencil_opFront;
F=E.viewport;O=h.viewport;P=[1,0,0,1];return{draw:function(a){var b,e,d,x;a=z.next;a!==z.cur&&(a?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null),z.cur=a);if(h.dirty){a=E.dither;a!==h.dither&&(a?m.enable(3024):m.disable(3024),h.dither=a);a=E.blend_enable;a!==h.blend_enable&&(a?m.enable(3042):m.disable(3042),h.blend_enable=a);a=y[0];e=y[1];d=y[2];x=y[3];if(a!==v[0]||e!==v[1]||d!==v[2]||x!==v[3])m.blendColor(a,e,d,x),v[0]=a,v[1]=e,v[2]=d,v[3]=x;a=S[0];e=S[1];if(a!==L[0]||e!==L[1])m.blendEquationSeparate(a,
e),L[0]=a,L[1]=e;a=Q[0];e=Q[1];d=Q[2];x=Q[3];if(a!==C[0]||e!==C[1]||d!==C[2]||x!==C[3])m.blendFuncSeparate(a,e,d,x),C[0]=a,C[1]=e,C[2]=d,C[3]=x;a=E.depth_enable;a!==h.depth_enable&&(a?m.enable(2929):m.disable(2929),h.depth_enable=a);a=E.depth_func;a!==h.depth_func&&(m.depthFunc(a),h.depth_func=a);a=I[0];e=I[1];if(a!==K[0]||e!==K[1])m.depthRange(a,e),K[0]=a,K[1]=e;a=E.depth_mask;a!==h.depth_mask&&(m.depthMask(a),h.depth_mask=a);a=B[0];e=B[1];d=B[2];x=B[3];if(a!==ra[0]||e!==ra[1]||d!==ra[2]||x!==ra[3])m.colorMask(a,
e,d,x),ra[0]=a,ra[1]=e,ra[2]=d,ra[3]=x;a=E.cull_enable;a!==h.cull_enable&&(a?m.enable(2884):m.disable(2884),h.cull_enable=a);a=E.cull_face;a!==h.cull_face&&(m.cullFace(a),h.cull_face=a);a=E.frontFace;a!==h.frontFace&&(m.frontFace(a),h.frontFace=a);a=E.lineWidth;a!==h.lineWidth&&(m.lineWidth(a),h.lineWidth=a);a=E.polygonOffset_enable;a!==h.polygonOffset_enable&&(a?m.enable(32823):m.disable(32823),h.polygonOffset_enable=a);a=t[0];e=t[1];if(a!==p[0]||e!==p[1])m.polygonOffset(a,e),p[0]=a,p[1]=e;a=E.sample_alpha;
a!==h.sample_alpha&&(a?m.enable(32926):m.disable(32926),h.sample_alpha=a);a=E.sample_enable;a!==h.sample_enable&&(a?m.enable(32928):m.disable(32928),h.sample_enable=a);a=c[0];e=c[1];if(a!==D[0]||e!==D[1])m.sampleCoverage(a,e),D[0]=a,D[1]=e;a=E.stencil_enable;a!==h.stencil_enable&&(a?m.enable(2960):m.disable(2960),h.stencil_enable=a);a=E.stencil_mask;a!==h.stencil_mask&&(m.stencilMask(a),h.stencil_mask=a);a=na[0];e=na[1];d=na[2];if(a!==U[0]||e!==U[1]||d!==U[2])m.stencilFunc(a,e,d),U[0]=a,U[1]=e,U[2]=
d;a=R[0];e=R[1];d=R[2];x=R[3];if(a!==N[0]||e!==N[1]||d!==N[2]||x!==N[3])m.stencilOpSeparate(a,e,d,x),N[0]=a,N[1]=e,N[2]=d,N[3]=x;a=aa[0];e=aa[1];d=aa[2];x=aa[3];if(a!==T[0]||e!==T[1]||d!==T[2]||x!==T[3])m.stencilOpSeparate(a,e,d,x),T[0]=a,T[1]=e,T[2]=d,T[3]=x;a=E.scissor_enable;a!==h.scissor_enable&&(a?m.enable(3089):m.disable(3089),h.scissor_enable=a);a=r[0];e=r[1];d=r[2];x=r[3];if(a!==la[0]||e!==la[1]||d!==la[2]||x!==la[3])m.scissor(a,e,d,x),la[0]=a,la[1]=e,la[2]=d,la[3]=x;a=F[0];e=F[1];d=F[2];
x=F[3];if(a!==O[0]||e!==O[1]||d!==O[2]||x!==O[3])m.viewport(a,e,d,x),O[0]=a,O[1]=e,O[2]=d,O[3]=x;h.dirty=!1}if(a=h.profile)b=performance.now(),l.count++;m.useProgram(k.program);ea.setVAO(null);e=w.location;d=u[e];d.buffer||m.enableVertexAttribArray(e);if(d.type!==f.dtype||2!==d.size||d.buffer!==f||!1!==d.normalized||0!==d.offset||0!==d.stride)m.bindBuffer(34962,f.buffer),m.vertexAttribPointer(e,2,f.dtype,!1,0,0),d.type=f.dtype,d.size=2,d.buffer=f,d.normalized=!1,d.offset=0,d.stride=0;m.uniform4f(g.location,
1,0,0,1);(e=A.elements)?m.bindBuffer(34963,e.buffer.buffer):ea.currentVAO&&(e=n.getElements(ea.currentVAO.elements))&&m.bindBuffer(34963,e.buffer.buffer);d=A.primitive;x=A.offset;e?m.drawElements(d,3,e.type,x<<(e.type-5121>>1)):m.drawArrays(d,x,3);ea.setVAO(null);a&&(l.cpuTime+=performance.now()-b)},scope:function(a,c,b){var p,e,x,r,k,g,t,v,D,m,u,w,y,n,C,B,V,ca;if(p=h.profile)e=performance.now(),l.count++;x=A.count;A.count=3;r=H[3];H[3]=P;k=d.buffer;d.buffer=f;g=d.divisor;d.divisor=0;t=d.normalized;
d.normalized=!1;v=d.offset;d.offset=0;D=d.size;d.size=0;m=d.state;d.state=1;u=d.stride;d.stride=0;w=d.type;d.type=f.dtype;y=d.w;d.w=0;n=d.x;d.x=0;C=d.y;d.y=0;B=d.z;d.z=0;V=J.vert;J.vert=2;ca=J.frag;J.frag=1;c(q,a,b);p&&(l.cpuTime+=performance.now()-e);A.count=x;H[3]=r;d.buffer=k;d.divisor=g;d.normalized=t;d.offset=v;d.size=D;d.state=m;d.stride=u;d.type=w;d.w=y;d.x=n;d.y=C;d.z=B;J.vert=V;J.frag=ca},batch:function(a,b){var d,x,k;d=z.next;d!==z.cur&&(d?m.bindFramebuffer(36160,d.framebuffer):m.bindFramebuffer(36160,
null),z.cur=d);if(h.dirty){var q,J;d=E.dither;d!==h.dither&&(d?m.enable(3024):m.disable(3024),h.dither=d);d=E.blend_enable;d!==h.blend_enable&&(d?m.enable(3042):m.disable(3042),h.blend_enable=d);d=y[0];k=y[1];q=y[2];J=y[3];if(d!==v[0]||k!==v[1]||q!==v[2]||J!==v[3])m.blendColor(d,k,q,J),v[0]=d,v[1]=k,v[2]=q,v[3]=J;d=S[0];k=S[1];if(d!==L[0]||k!==L[1])m.blendEquationSeparate(d,k),L[0]=d,L[1]=k;d=Q[0];k=Q[1];q=Q[2];J=Q[3];if(d!==C[0]||k!==C[1]||q!==C[2]||J!==C[3])m.blendFuncSeparate(d,k,q,J),C[0]=d,C[1]=
k,C[2]=q,C[3]=J;d=E.depth_enable;d!==h.depth_enable&&(d?m.enable(2929):m.disable(2929),h.depth_enable=d);d=E.depth_func;d!==h.depth_func&&(m.depthFunc(d),h.depth_func=d);d=I[0];k=I[1];if(d!==K[0]||k!==K[1])m.depthRange(d,k),K[0]=d,K[1]=k;d=E.depth_mask;d!==h.depth_mask&&(m.depthMask(d),h.depth_mask=d);d=B[0];k=B[1];q=B[2];J=B[3];if(d!==ra[0]||k!==ra[1]||q!==ra[2]||J!==ra[3])m.colorMask(d,k,q,J),ra[0]=d,ra[1]=k,ra[2]=q,ra[3]=J;d=E.cull_enable;d!==h.cull_enable&&(d?m.enable(2884):m.disable(2884),h.cull_enable=
d);d=E.cull_face;d!==h.cull_face&&(m.cullFace(d),h.cull_face=d);d=E.frontFace;d!==h.frontFace&&(m.frontFace(d),h.frontFace=d);d=E.lineWidth;d!==h.lineWidth&&(m.lineWidth(d),h.lineWidth=d);d=E.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?m.enable(32823):m.disable(32823),h.polygonOffset_enable=d);d=t[0];k=t[1];if(d!==p[0]||k!==p[1])m.polygonOffset(d,k),p[0]=d,p[1]=k;d=E.sample_alpha;d!==h.sample_alpha&&(d?m.enable(32926):m.disable(32926),h.sample_alpha=d);d=E.sample_enable;d!==h.sample_enable&&
(d?m.enable(32928):m.disable(32928),h.sample_enable=d);d=c[0];k=c[1];if(d!==D[0]||k!==D[1])m.sampleCoverage(d,k),D[0]=d,D[1]=k;d=E.stencil_enable;d!==h.stencil_enable&&(d?m.enable(2960):m.disable(2960),h.stencil_enable=d);d=E.stencil_mask;d!==h.stencil_mask&&(m.stencilMask(d),h.stencil_mask=d);d=na[0];k=na[1];q=na[2];if(d!==U[0]||k!==U[1]||q!==U[2])m.stencilFunc(d,k,q),U[0]=d,U[1]=k,U[2]=q;d=R[0];k=R[1];q=R[2];J=R[3];if(d!==N[0]||k!==N[1]||q!==N[2]||J!==N[3])m.stencilOpSeparate(d,k,q,J),N[0]=d,N[1]=
k,N[2]=q,N[3]=J;d=aa[0];k=aa[1];q=aa[2];J=aa[3];if(d!==T[0]||k!==T[1]||q!==T[2]||J!==T[3])m.stencilOpSeparate(d,k,q,J),T[0]=d,T[1]=k,T[2]=q,T[3]=J;d=E.scissor_enable;d!==h.scissor_enable&&(d?m.enable(3089):m.disable(3089),h.scissor_enable=d);d=r[0];k=r[1];q=r[2];J=r[3];if(d!==la[0]||k!==la[1]||q!==la[2]||J!==la[3])m.scissor(d,k,q,J),la[0]=d,la[1]=k,la[2]=q,la[3]=J;d=F[0];k=F[1];q=F[2];J=F[3];if(d!==O[0]||k!==O[1]||q!==O[2]||J!==O[3])m.viewport(d,k,q,J),O[0]=d,O[1]=k,O[2]=q,O[3]=J;h.dirty=!1}if(d=
h.profile)x=performance.now(),l.count+=b;m.useProgram(e.program);var H;ea.setVAO(null);k=w.location;q=u[k];q.buffer||m.enableVertexAttribArray(k);if(q.type!==f.dtype||2!==q.size||q.buffer!==f||!1!==q.normalized||0!==q.offset||0!==q.stride)m.bindBuffer(34962,f.buffer),m.vertexAttribPointer(k,2,f.dtype,!1,0,0),q.type=f.dtype,q.size=2,q.buffer=f,q.normalized=!1,q.offset=0,q.stride=0;m.uniform4f(g.location,1,0,0,1);(q=A.elements)?m.bindBuffer(34963,q.buffer.buffer):ea.currentVAO&&(q=n.getElements(ea.currentVAO.elements))&&
m.bindBuffer(34963,q.buffer.buffer);J=A.primitive;H=A.offset;for(k=0;k<b;++k)q?m.drawElements(J,3,q.type,H<<(q.type-5121>>1)):m.drawArrays(J,H,3);ea.setVAO(null);d&&(l.cpuTime+=performance.now()-x)}}},"$19,angle,color,offset,position":function(a,b,x,l,k,f,d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea,y,v,S){var L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka;L=a.attributes;Q=a.context;C=a.current;B=a.draw;ra=a.elements;I=a.framebuffer;K=a.gl;t=a.isArrayLike;p=a.next;c=a.shader;
D=a.uniforms;r=a.vao;la=p.blend_color;na=C.blend_color;U=p.blend_equation;aa=C.blend_equation;T=p.blend_func;R=C.blend_func;N=p.colorMask;F=C.colorMask;O=p.depth_range;P=C.depth_range;qa=p.polygonOffset_offset;ta=C.polygonOffset_offset;G=p.sample_coverage;M=C.sample_coverage;da=p.scissor_box;X=C.scissor_box;ja=p.stencil_func;oa=C.stencil_func;Da=p.stencil_opBack;ya=C.stencil_opBack;Z=p.stencil_opFront;Ca=C.stencil_opFront;ia=p.viewport;ka=C.viewport;return{draw:function(a){var c,D,m,h;c=I.next;c!==
I.cur&&(c?K.bindFramebuffer(36160,c.framebuffer):K.bindFramebuffer(36160,null),I.cur=c);if(C.dirty){var q;c=p.dither;c!==C.dither&&(c?K.enable(3024):K.disable(3024),C.dither=c);c=p.blend_enable;c!==C.blend_enable&&(c?K.enable(3042):K.disable(3042),C.blend_enable=c);c=la[0];m=la[1];h=la[2];q=la[3];if(c!==na[0]||m!==na[1]||h!==na[2]||q!==na[3])K.blendColor(c,m,h,q),na[0]=c,na[1]=m,na[2]=h,na[3]=q;c=U[0];m=U[1];if(c!==aa[0]||m!==aa[1])K.blendEquationSeparate(c,m),aa[0]=c,aa[1]=m;c=T[0];m=T[1];h=T[2];
q=T[3];if(c!==R[0]||m!==R[1]||h!==R[2]||q!==R[3])K.blendFuncSeparate(c,m,h,q),R[0]=c,R[1]=m,R[2]=h,R[3]=q;c=p.depth_func;c!==C.depth_func&&(K.depthFunc(c),C.depth_func=c);c=O[0];m=O[1];if(c!==P[0]||m!==P[1])K.depthRange(c,m),P[0]=c,P[1]=m;c=p.depth_mask;c!==C.depth_mask&&(K.depthMask(c),C.depth_mask=c);c=N[0];m=N[1];h=N[2];q=N[3];if(c!==F[0]||m!==F[1]||h!==F[2]||q!==F[3])K.colorMask(c,m,h,q),F[0]=c,F[1]=m,F[2]=h,F[3]=q;c=p.cull_enable;c!==C.cull_enable&&(c?K.enable(2884):K.disable(2884),C.cull_enable=
c);c=p.cull_face;c!==C.cull_face&&(K.cullFace(c),C.cull_face=c);c=p.frontFace;c!==C.frontFace&&(K.frontFace(c),C.frontFace=c);c=p.lineWidth;c!==C.lineWidth&&(K.lineWidth(c),C.lineWidth=c);c=p.polygonOffset_enable;c!==C.polygonOffset_enable&&(c?K.enable(32823):K.disable(32823),C.polygonOffset_enable=c);c=qa[0];m=qa[1];if(c!==ta[0]||m!==ta[1])K.polygonOffset(c,m),ta[0]=c,ta[1]=m;c=p.sample_alpha;c!==C.sample_alpha&&(c?K.enable(32926):K.disable(32926),C.sample_alpha=c);c=p.sample_enable;c!==C.sample_enable&&
(c?K.enable(32928):K.disable(32928),C.sample_enable=c);c=G[0];m=G[1];if(c!==M[0]||m!==M[1])K.sampleCoverage(c,m),M[0]=c,M[1]=m;c=p.stencil_enable;c!==C.stencil_enable&&(c?K.enable(2960):K.disable(2960),C.stencil_enable=c);c=p.stencil_mask;c!==C.stencil_mask&&(K.stencilMask(c),C.stencil_mask=c);c=ja[0];m=ja[1];h=ja[2];if(c!==oa[0]||m!==oa[1]||h!==oa[2])K.stencilFunc(c,m,h),oa[0]=c,oa[1]=m,oa[2]=h;c=Z[0];m=Z[1];h=Z[2];q=Z[3];if(c!==Ca[0]||m!==Ca[1]||h!==Ca[2]||q!==Ca[3])K.stencilOpSeparate(c,m,h,q),
Ca[0]=c,Ca[1]=m,Ca[2]=h,Ca[3]=q;c=Da[0];m=Da[1];h=Da[2];q=Da[3];if(c!==ya[0]||m!==ya[1]||h!==ya[2]||q!==ya[3])K.stencilOpSeparate(c,m,h,q),ya[0]=c,ya[1]=m,ya[2]=h,ya[3]=q;c=p.scissor_enable;c!==C.scissor_enable&&(c?K.enable(3089):K.disable(3089),C.scissor_enable=c);c=da[0];m=da[1];h=da[2];q=da[3];if(c!==X[0]||m!==X[1]||h!==X[2]||q!==X[3])K.scissor(c,m,h,q),X[0]=c,X[1]=m,X[2]=h,X[3]=q;c=ia[0];m=ia[1];h=ia[2];q=ia[3];if(c!==ka[0]||m!==ka[1]||h!==ka[2]||q!==ka[3])K.viewport(c,m,h,q),ka[0]=c,ka[1]=m,
ka[2]=h,ka[3]=q}K.disable(2929);C.depth_enable=!1;if(c=C.profile)D=performance.now(),l.count++;K.useProgram(k.program);r.setVAO(null);m=S.location;h=L[m];h.buffer||K.enableVertexAttribArray(m);if(h.type!==f.dtype||2!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)K.bindBuffer(34962,f.buffer),K.vertexAttribPointer(m,2,f.dtype,!1,0,0),h.type=f.dtype,h.size=2,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;m=d.call(this,Q,a,0);"number"!==typeof m&&b.commandRaise(e,x);K.uniform1f(ea.location,
m);m=a.offset;t(m)&&2===m.length||b.commandRaise(g,x);K.uniform2f(v.location,m[0],m[1]);a=w.call(this,Q,a,0);t(a)&&4===a.length||b.commandRaise(u,x);K.uniform4f(y.location,a[0],a[1],a[2],a[3]);(a=B.elements)?K.bindBuffer(34963,a.buffer.buffer):r.currentVAO&&(a=ra.getElements(r.currentVAO.elements))&&K.bindBuffer(34963,a.buffer.buffer);m=B.primitive;h=B.offset;a?K.drawElements(m,3,a.type,h<<(a.type-5121>>1)):K.drawArrays(m,h,3);C.dirty=!0;r.setVAO(null);c&&(l.cpuTime+=performance.now()-D)},scope:function(a,
b,d){var e,k,x,r,g,t,v,m,u,w,y,n,J,z,I,E,F,G,K,L,H;e=p.depth_enable;p.depth_enable=!1;if(k=C.profile)x=performance.now(),l.count++;r=B.count;B.count=3;g=q.call(this,Q,a,d);t=D[3];D[3]=g;v=h.call(this,Q,a,d);g=D[5];D[5]=v;m=a.offset;v=D[4];D[4]=m;m=A.buffer;A.buffer=f;u=A.divisor;A.divisor=0;w=A.normalized;A.normalized=!1;y=A.offset;A.offset=0;n=A.size;A.size=0;J=A.state;A.state=1;z=A.stride;A.stride=0;I=A.type;A.type=f.dtype;E=A.w;A.w=0;F=A.x;A.x=0;G=A.y;A.y=0;K=A.z;A.z=0;L=c.vert;c.vert=2;H=c.frag;
c.frag=1;C.dirty=!0;b(Q,a,d);p.depth_enable=e;k&&(l.cpuTime+=performance.now()-x);B.count=r;D[3]=t;D[5]=g;D[4]=v;A.buffer=m;A.divisor=u;A.normalized=w;A.offset=y;A.size=n;A.state=J;A.stride=z;A.type=I;A.w=E;A.x=F;A.y=G;A.z=K;c.vert=L;c.frag=H;C.dirty=!0},batch:function(a,c){var d,e,k,g;d=I.next;d!==I.cur&&(d?K.bindFramebuffer(36160,d.framebuffer):K.bindFramebuffer(36160,null),I.cur=d);if(C.dirty){var D,h,u;d=p.dither;d!==C.dither&&(d?K.enable(3024):K.disable(3024),C.dither=d);d=p.blend_enable;d!==
C.blend_enable&&(d?K.enable(3042):K.disable(3042),C.blend_enable=d);d=la[0];D=la[1];h=la[2];u=la[3];if(d!==na[0]||D!==na[1]||h!==na[2]||u!==na[3])K.blendColor(d,D,h,u),na[0]=d,na[1]=D,na[2]=h,na[3]=u;d=U[0];D=U[1];if(d!==aa[0]||D!==aa[1])K.blendEquationSeparate(d,D),aa[0]=d,aa[1]=D;d=T[0];D=T[1];h=T[2];u=T[3];if(d!==R[0]||D!==R[1]||h!==R[2]||u!==R[3])K.blendFuncSeparate(d,D,h,u),R[0]=d,R[1]=D,R[2]=h,R[3]=u;d=p.depth_func;d!==C.depth_func&&(K.depthFunc(d),C.depth_func=d);d=O[0];D=O[1];if(d!==P[0]||
D!==P[1])K.depthRange(d,D),P[0]=d,P[1]=D;d=p.depth_mask;d!==C.depth_mask&&(K.depthMask(d),C.depth_mask=d);d=N[0];D=N[1];h=N[2];u=N[3];if(d!==F[0]||D!==F[1]||h!==F[2]||u!==F[3])K.colorMask(d,D,h,u),F[0]=d,F[1]=D,F[2]=h,F[3]=u;d=p.cull_enable;d!==C.cull_enable&&(d?K.enable(2884):K.disable(2884),C.cull_enable=d);d=p.cull_face;d!==C.cull_face&&(K.cullFace(d),C.cull_face=d);d=p.frontFace;d!==C.frontFace&&(K.frontFace(d),C.frontFace=d);d=p.lineWidth;d!==C.lineWidth&&(K.lineWidth(d),C.lineWidth=d);d=p.polygonOffset_enable;
d!==C.polygonOffset_enable&&(d?K.enable(32823):K.disable(32823),C.polygonOffset_enable=d);d=qa[0];D=qa[1];if(d!==ta[0]||D!==ta[1])K.polygonOffset(d,D),ta[0]=d,ta[1]=D;d=p.sample_alpha;d!==C.sample_alpha&&(d?K.enable(32926):K.disable(32926),C.sample_alpha=d);d=p.sample_enable;d!==C.sample_enable&&(d?K.enable(32928):K.disable(32928),C.sample_enable=d);d=G[0];D=G[1];if(d!==M[0]||D!==M[1])K.sampleCoverage(d,D),M[0]=d,M[1]=D;d=p.stencil_enable;d!==C.stencil_enable&&(d?K.enable(2960):K.disable(2960),C.stencil_enable=
d);d=p.stencil_mask;d!==C.stencil_mask&&(K.stencilMask(d),C.stencil_mask=d);d=ja[0];D=ja[1];h=ja[2];if(d!==oa[0]||D!==oa[1]||h!==oa[2])K.stencilFunc(d,D,h),oa[0]=d,oa[1]=D,oa[2]=h;d=Z[0];D=Z[1];h=Z[2];u=Z[3];if(d!==Ca[0]||D!==Ca[1]||h!==Ca[2]||u!==Ca[3])K.stencilOpSeparate(d,D,h,u),Ca[0]=d,Ca[1]=D,Ca[2]=h,Ca[3]=u;d=Da[0];D=Da[1];h=Da[2];u=Da[3];if(d!==ya[0]||D!==ya[1]||h!==ya[2]||u!==ya[3])K.stencilOpSeparate(d,D,h,u),ya[0]=d,ya[1]=D,ya[2]=h,ya[3]=u;d=p.scissor_enable;d!==C.scissor_enable&&(d?K.enable(3089):
K.disable(3089),C.scissor_enable=d);d=da[0];D=da[1];h=da[2];u=da[3];if(d!==X[0]||D!==X[1]||h!==X[2]||u!==X[3])K.scissor(d,D,h,u),X[0]=d,X[1]=D,X[2]=h,X[3]=u;d=ia[0];D=ia[1];h=ia[2];u=ia[3];if(d!==ka[0]||D!==ka[1]||h!==ka[2]||u!==ka[3])K.viewport(d,D,h,u),ka[0]=d,ka[1]=D,ka[2]=h,ka[3]=u}K.disable(2929);C.depth_enable=!1;if(d=C.profile)e=performance.now(),l.count+=c;K.useProgram(n.program);r.setVAO(null);D=S.location;h=L[D];h.buffer||K.enableVertexAttribArray(D);if(h.type!==f.dtype||2!==h.size||h.buffer!==
f||!1!==h.normalized||0!==h.offset||0!==h.stride)K.bindBuffer(34962,f.buffer),K.vertexAttribPointer(D,2,f.dtype,!1,0,0),h.type=f.dtype,h.size=2,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;k=z.call(this,Q,g,k);"number"!==typeof k&&b.commandRaise(m,x);K.uniform1f(ea.location,k);(D=B.elements)?K.bindBuffer(34963,D.buffer.buffer):r.currentVAO&&(D=ra.getElements(r.currentVAO.elements))&&K.bindBuffer(34963,D.buffer.buffer);h=B.primitive;u=B.offset;for(k=0;k<c;++k){g=a[k];var w,q,A,ga,W,pa,Ia,ma,za;
w=g.offset;t(w)&&2===w.length||b.commandRaise(E,x);q=w[0];w=w[1];k&&A===q&&ga===w||(A=q,ga=w,K.uniform2f(v.location,q,w));W=J.call(this,Q,g,k);t(W)&&4===W.length||b.commandRaise(H,x);g=W[0];q=W[1];w=W[2];W=W[3];k&&pa===g&&Ia===q&&ma===w&&za===W||(pa=g,Ia=q,ma=w,za=W,K.uniform4f(y.location,g,q,w,W));D?K.drawElements(h,3,D.type,u<<(D.type-5121>>1)):K.drawArrays(h,u,3)}C.dirty=!0;r.setVAO(null);d&&(l.cpuTime+=performance.now()-e)}}},"$23,model,position,projection,view":function(a,b,x,l,k,f,d,e,g,w,u,
q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B){var ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,ca,sa,wa,Ea;ra=a.attributes;I=a.context;K=a.current;t=a.draw;p=a.framebuffer;c=a.gl;D=a.isArrayLike;r=a.next;la=a.shader;na=a.uniforms;U=a.vao;aa=r.blend_color;T=K.blend_color;R=r.blend_equation;N=K.blend_equation;F=r.blend_func;O=K.blend_func;P=r.colorMask;qa=K.colorMask;ta=r.depth_range;G=K.depth_range;M=r.polygonOffset_offset;da=K.polygonOffset_offset;X=r.sample_coverage;
ja=K.sample_coverage;oa=r.scissor_box;Da=K.scissor_box;ya=r.stencil_func;Z=K.stencil_func;Ca=r.stencil_opBack;ia=K.stencil_opBack;ka=r.stencil_opFront;Ba=K.stencil_opFront;Qa=r.viewport;Aa=K.viewport;Hb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);$a=new Float32Array(16);V=new Float32Array(16);ca=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];sa=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);wa=new Float32Array(16);Ea=new Float32Array(16);return{draw:function(a){var t,h,v,m;t=p.next;t!==p.cur&&(t?
c.bindFramebuffer(36160,t.framebuffer):c.bindFramebuffer(36160,null),p.cur=t);if(K.dirty){var y;t=r.dither;t!==K.dither&&(t?c.enable(3024):c.disable(3024),K.dither=t);t=r.blend_enable;t!==K.blend_enable&&(t?c.enable(3042):c.disable(3042),K.blend_enable=t);t=aa[0];v=aa[1];m=aa[2];y=aa[3];if(t!==T[0]||v!==T[1]||m!==T[2]||y!==T[3])c.blendColor(t,v,m,y),T[0]=t,T[1]=v,T[2]=m,T[3]=y;t=R[0];v=R[1];if(t!==N[0]||v!==N[1])c.blendEquationSeparate(t,v),N[0]=t,N[1]=v;t=F[0];v=F[1];m=F[2];y=F[3];if(t!==O[0]||v!==
O[1]||m!==O[2]||y!==O[3])c.blendFuncSeparate(t,v,m,y),O[0]=t,O[1]=v,O[2]=m,O[3]=y;t=r.depth_enable;t!==K.depth_enable&&(t?c.enable(2929):c.disable(2929),K.depth_enable=t);t=r.depth_func;t!==K.depth_func&&(c.depthFunc(t),K.depth_func=t);t=ta[0];v=ta[1];if(t!==G[0]||v!==G[1])c.depthRange(t,v),G[0]=t,G[1]=v;t=r.depth_mask;t!==K.depth_mask&&(c.depthMask(t),K.depth_mask=t);t=P[0];v=P[1];m=P[2];y=P[3];if(t!==qa[0]||v!==qa[1]||m!==qa[2]||y!==qa[3])c.colorMask(t,v,m,y),qa[0]=t,qa[1]=v,qa[2]=m,qa[3]=y;t=r.cull_enable;
t!==K.cull_enable&&(t?c.enable(2884):c.disable(2884),K.cull_enable=t);t=r.cull_face;t!==K.cull_face&&(c.cullFace(t),K.cull_face=t);t=r.frontFace;t!==K.frontFace&&(c.frontFace(t),K.frontFace=t);t=r.lineWidth;t!==K.lineWidth&&(c.lineWidth(t),K.lineWidth=t);t=r.polygonOffset_enable;t!==K.polygonOffset_enable&&(t?c.enable(32823):c.disable(32823),K.polygonOffset_enable=t);t=M[0];v=M[1];if(t!==da[0]||v!==da[1])c.polygonOffset(t,v),da[0]=t,da[1]=v;t=r.sample_alpha;t!==K.sample_alpha&&(t?c.enable(32926):
c.disable(32926),K.sample_alpha=t);t=r.sample_enable;t!==K.sample_enable&&(t?c.enable(32928):c.disable(32928),K.sample_enable=t);t=X[0];v=X[1];if(t!==ja[0]||v!==ja[1])c.sampleCoverage(t,v),ja[0]=t,ja[1]=v;t=r.stencil_enable;t!==K.stencil_enable&&(t?c.enable(2960):c.disable(2960),K.stencil_enable=t);t=r.stencil_mask;t!==K.stencil_mask&&(c.stencilMask(t),K.stencil_mask=t);t=ya[0];v=ya[1];m=ya[2];if(t!==Z[0]||v!==Z[1]||m!==Z[2])c.stencilFunc(t,v,m),Z[0]=t,Z[1]=v,Z[2]=m;t=ka[0];v=ka[1];m=ka[2];y=ka[3];
if(t!==Ba[0]||v!==Ba[1]||m!==Ba[2]||y!==Ba[3])c.stencilOpSeparate(t,v,m,y),Ba[0]=t,Ba[1]=v,Ba[2]=m,Ba[3]=y;t=Ca[0];v=Ca[1];m=Ca[2];y=Ca[3];if(t!==ia[0]||v!==ia[1]||m!==ia[2]||y!==ia[3])c.stencilOpSeparate(t,v,m,y),ia[0]=t,ia[1]=v,ia[2]=m,ia[3]=y;t=r.scissor_enable;t!==K.scissor_enable&&(t?c.enable(3089):c.disable(3089),K.scissor_enable=t);t=oa[0];v=oa[1];m=oa[2];y=oa[3];if(t!==Da[0]||v!==Da[1]||m!==Da[2]||y!==Da[3])c.scissor(t,v,m,y),Da[0]=t,Da[1]=v,Da[2]=m,Da[3]=y;t=Qa[0];v=Qa[1];m=Qa[2];y=Qa[3];
if(t!==Aa[0]||v!==Aa[1]||m!==Aa[2]||y!==Aa[3])c.viewport(t,v,m,y),Aa[0]=t,Aa[1]=v,Aa[2]=m,Aa[3]=y;K.dirty=!1}if(t=K.profile)h=performance.now(),l.count++;c.useProgram(k.program);U.setVAO(null);v=Q.location;m=ra[v];m.buffer||c.enableVertexAttribArray(v);if(m.type!==f.dtype||3!==m.size||m.buffer!==f||!1!==m.normalized||0!==m.offset||0!==m.stride)c.bindBuffer(34962,f.buffer),c.vertexAttribPointer(v,3,f.dtype,!1,0,0),m.type=f.dtype,m.size=3,m.buffer=f,m.normalized=!1,m.offset=0,m.stride=0;c.uniformMatrix4fv(L.location,
!1,Hb);v=d.call(this,I,a,0);D(v)&&16===v.length||b.commandRaise(e,x);c.uniformMatrix4fv(B.location,!1,Array.isArray(v)||v instanceof Float32Array?v:($a[0]=v[0],$a[1]=v[1],$a[2]=v[2],$a[3]=v[3],$a[4]=v[4],$a[5]=v[5],$a[6]=v[6],$a[7]=v[7],$a[8]=v[8],$a[9]=v[9],$a[10]=v[10],$a[11]=v[11],$a[12]=v[12],$a[13]=v[13],$a[14]=v[14],$a[15]=v[15],$a));a=g.call(this,I,a,0);D(a)&&16===a.length||b.commandRaise(w,x);c.uniformMatrix4fv(C.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(V[0]=a[0],V[1]=a[1],
V[2]=a[2],V[3]=a[3],V[4]=a[4],V[5]=a[5],V[6]=a[6],V[7]=a[7],V[8]=a[8],V[9]=a[9],V[10]=a[10],V[11]=a[11],V[12]=a[12],V[13]=a[13],V[14]=a[14],V[15]=a[15],V));u&&c.bindBuffer(34963,u.buffer.buffer);a=u.primType;v=u.vertCount-0;0<=v||b.commandRaise(q,x);v&&(c.drawElements(a,v,u.type,0<<(u.type-5121>>1)),U.setVAO(null),t&&(l.cpuTime+=performance.now()-h))},scope:function(a,c,d){var p,e,k,r,g,v,D,u,y,w,q,V,C,B,J,E,F,Q,G,sa,L,H,Z;if(p=K.profile)e=performance.now(),l.count++;k=t.elements;t.elements=h;r=t.offset;
t.offset=0;g=h.vertCount-0;0<=g||b.commandRaise(A,x);v=t.count;t.count=g;D=h.primType;g=t.primitive;t.primitive=D;D=na[3];na[3]=ca;u=n.call(this,I,a,d);y=na[5];na[5]=u;w=z.call(this,I,a,d);u=na[4];na[4]=w;w=m.buffer;m.buffer=f;q=m.divisor;m.divisor=0;V=m.normalized;m.normalized=!1;C=m.offset;m.offset=0;B=m.size;m.size=0;J=m.state;m.state=1;E=m.stride;m.stride=0;F=m.type;m.type=f.dtype;Q=m.w;m.w=0;G=m.x;m.x=0;sa=m.y;m.y=0;L=m.z;m.z=0;H=la.vert;la.vert=2;Z=la.frag;la.frag=1;c(I,a,d);p&&(l.cpuTime+=
performance.now()-e);t.elements=k;t.offset=r;t.count=v;t.primitive=g;na[3]=D;na[5]=y;na[4]=u;m.buffer=w;m.divisor=q;m.normalized=V;m.offset=C;m.size=B;m.state=J;m.stride=E;m.type=F;m.w=Q;m.x=G;m.y=sa;m.z=L;la.vert=H;la.frag=Z},batch:function(a,d){var e,k,g;e=p.next;e!==p.cur&&(e?c.bindFramebuffer(36160,e.framebuffer):c.bindFramebuffer(36160,null),p.cur=e);if(K.dirty){var t,m,h;e=r.dither;e!==K.dither&&(e?c.enable(3024):c.disable(3024),K.dither=e);e=r.blend_enable;e!==K.blend_enable&&(e?c.enable(3042):
c.disable(3042),K.blend_enable=e);e=aa[0];t=aa[1];m=aa[2];h=aa[3];if(e!==T[0]||t!==T[1]||m!==T[2]||h!==T[3])c.blendColor(e,t,m,h),T[0]=e,T[1]=t,T[2]=m,T[3]=h;e=R[0];t=R[1];if(e!==N[0]||t!==N[1])c.blendEquationSeparate(e,t),N[0]=e,N[1]=t;e=F[0];t=F[1];m=F[2];h=F[3];if(e!==O[0]||t!==O[1]||m!==O[2]||h!==O[3])c.blendFuncSeparate(e,t,m,h),O[0]=e,O[1]=t,O[2]=m,O[3]=h;e=r.depth_enable;e!==K.depth_enable&&(e?c.enable(2929):c.disable(2929),K.depth_enable=e);e=r.depth_func;e!==K.depth_func&&(c.depthFunc(e),
K.depth_func=e);e=ta[0];t=ta[1];if(e!==G[0]||t!==G[1])c.depthRange(e,t),G[0]=e,G[1]=t;e=r.depth_mask;e!==K.depth_mask&&(c.depthMask(e),K.depth_mask=e);e=P[0];t=P[1];m=P[2];h=P[3];if(e!==qa[0]||t!==qa[1]||m!==qa[2]||h!==qa[3])c.colorMask(e,t,m,h),qa[0]=e,qa[1]=t,qa[2]=m,qa[3]=h;e=r.cull_enable;e!==K.cull_enable&&(e?c.enable(2884):c.disable(2884),K.cull_enable=e);e=r.cull_face;e!==K.cull_face&&(c.cullFace(e),K.cull_face=e);e=r.frontFace;e!==K.frontFace&&(c.frontFace(e),K.frontFace=e);e=r.lineWidth;
e!==K.lineWidth&&(c.lineWidth(e),K.lineWidth=e);e=r.polygonOffset_enable;e!==K.polygonOffset_enable&&(e?c.enable(32823):c.disable(32823),K.polygonOffset_enable=e);e=M[0];t=M[1];if(e!==da[0]||t!==da[1])c.polygonOffset(e,t),da[0]=e,da[1]=t;e=r.sample_alpha;e!==K.sample_alpha&&(e?c.enable(32926):c.disable(32926),K.sample_alpha=e);e=r.sample_enable;e!==K.sample_enable&&(e?c.enable(32928):c.disable(32928),K.sample_enable=e);e=X[0];t=X[1];if(e!==ja[0]||t!==ja[1])c.sampleCoverage(e,t),ja[0]=e,ja[1]=t;e=
r.stencil_enable;e!==K.stencil_enable&&(e?c.enable(2960):c.disable(2960),K.stencil_enable=e);e=r.stencil_mask;e!==K.stencil_mask&&(c.stencilMask(e),K.stencil_mask=e);e=ya[0];t=ya[1];m=ya[2];if(e!==Z[0]||t!==Z[1]||m!==Z[2])c.stencilFunc(e,t,m),Z[0]=e,Z[1]=t,Z[2]=m;e=ka[0];t=ka[1];m=ka[2];h=ka[3];if(e!==Ba[0]||t!==Ba[1]||m!==Ba[2]||h!==Ba[3])c.stencilOpSeparate(e,t,m,h),Ba[0]=e,Ba[1]=t,Ba[2]=m,Ba[3]=h;e=Ca[0];t=Ca[1];m=Ca[2];h=Ca[3];if(e!==ia[0]||t!==ia[1]||m!==ia[2]||h!==ia[3])c.stencilOpSeparate(e,
t,m,h),ia[0]=e,ia[1]=t,ia[2]=m,ia[3]=h;e=r.scissor_enable;e!==K.scissor_enable&&(e?c.enable(3089):c.disable(3089),K.scissor_enable=e);e=oa[0];t=oa[1];m=oa[2];h=oa[3];if(e!==Da[0]||t!==Da[1]||m!==Da[2]||h!==Da[3])c.scissor(e,t,m,h),Da[0]=e,Da[1]=t,Da[2]=m,Da[3]=h;e=Qa[0];t=Qa[1];m=Qa[2];h=Qa[3];if(e!==Aa[0]||t!==Aa[1]||m!==Aa[2]||h!==Aa[3])c.viewport(e,t,m,h),Aa[0]=e,Aa[1]=t,Aa[2]=m,Aa[3]=h;K.dirty=!1}if(e=K.profile)k=performance.now(),l.count+=d;c.useProgram(E.program);U.setVAO(null);t=Q.location;
m=ra[t];m.buffer||c.enableVertexAttribArray(t);if(m.type!==f.dtype||3!==m.size||m.buffer!==f||!1!==m.normalized||0!==m.offset||0!==m.stride)c.bindBuffer(34962,f.buffer),c.vertexAttribPointer(t,3,f.dtype,!1,0,0),m.type=f.dtype,m.size=3,m.buffer=f,m.normalized=!1,m.offset=0,m.stride=0;c.uniformMatrix4fv(L.location,!1,sa);t=J.call(this,I,void 0,g);D(t)&&16===t.length||b.commandRaise(H,x);c.uniformMatrix4fv(B.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(wa[0]=t[0],wa[1]=t[1],wa[2]=t[2],
wa[3]=t[3],wa[4]=t[4],wa[5]=t[5],wa[6]=t[6],wa[7]=t[7],wa[8]=t[8],wa[9]=t[9],wa[10]=t[10],wa[11]=t[11],wa[12]=t[12],wa[13]=t[13],wa[14]=t[14],wa[15]=t[15],wa));g=ea.call(this,I,void 0,g);D(g)&&16===g.length||b.commandRaise(y,x);c.uniformMatrix4fv(C.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Ea[0]=g[0],Ea[1]=g[1],Ea[2]=g[2],Ea[3]=g[3],Ea[4]=g[4],Ea[5]=g[5],Ea[6]=g[6],Ea[7]=g[7],Ea[8]=g[8],Ea[9]=g[9],Ea[10]=g[10],Ea[11]=g[11],Ea[12]=g[12],Ea[13]=g[13],Ea[14]=g[14],Ea[15]=g[15],Ea));
v&&c.bindBuffer(34963,v.buffer.buffer);t=v.primType;m=v.vertCount-0;0<=m||b.commandRaise(S,x);for(g=0;g<d;++g)m&&c.drawElements(t,m,v.type,0<<(v.type-5121>>1));U.setVAO(null);e&&(l.cpuTime+=performance.now()-k)}}},$20:function(a,b,x,l,k,f,d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea){var y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da;y=a.context;v=a.current;S=a.framebuffer;L=a.gl;Q=a.next;C=a.shader;B=a.uniforms;ra=a.vao;I=Q.blend_color;K=v.blend_color;t=Q.blend_equation;p=v.blend_equation;
c=Q.blend_func;D=v.blend_func;r=Q.colorMask;la=v.colorMask;na=Q.depth_range;U=v.depth_range;aa=Q.polygonOffset_offset;T=v.polygonOffset_offset;R=Q.sample_coverage;N=v.sample_coverage;F=Q.scissor_box;O=v.scissor_box;P=Q.stencil_func;qa=v.stencil_func;ta=Q.stencil_opBack;G=v.stencil_opBack;M=Q.stencil_opFront;da=v.stencil_opFront;X=Q.viewport;ja=v.viewport;oa={};Da={};return{draw:function(a){var b,m,h,u,q,n,A,B,J,V,z,E,H;b=y.center;m=y.distance;h=y.eye;u=y.phi;q=y.projection;n=d.call(this,y,a,0);A=
y.theta;B=y.up;J=y.view;y.center=k;y.distance=2.302585092994046;y.eye=f;y.phi=0;y.projection=n;y.theta=0;y.up=e;y.view=g;n=S.next;n!==S.cur&&(n?L.bindFramebuffer(36160,n.framebuffer):L.bindFramebuffer(36160,null),S.cur=n);if(v.dirty){n=Q.dither;n!==v.dither&&(n?L.enable(3024):L.disable(3024),v.dither=n);n=Q.blend_enable;n!==v.blend_enable&&(n?L.enable(3042):L.disable(3042),v.blend_enable=n);n=I[0];z=I[1];E=I[2];H=I[3];if(n!==K[0]||z!==K[1]||E!==K[2]||H!==K[3])L.blendColor(n,z,E,H),K[0]=n,K[1]=z,K[2]=
E,K[3]=H;n=t[0];z=t[1];if(n!==p[0]||z!==p[1])L.blendEquationSeparate(n,z),p[0]=n,p[1]=z;n=c[0];z=c[1];E=c[2];H=c[3];if(n!==D[0]||z!==D[1]||E!==D[2]||H!==D[3])L.blendFuncSeparate(n,z,E,H),D[0]=n,D[1]=z,D[2]=E,D[3]=H;n=Q.depth_enable;n!==v.depth_enable&&(n?L.enable(2929):L.disable(2929),v.depth_enable=n);n=Q.depth_func;n!==v.depth_func&&(L.depthFunc(n),v.depth_func=n);n=na[0];z=na[1];if(n!==U[0]||z!==U[1])L.depthRange(n,z),U[0]=n,U[1]=z;n=Q.depth_mask;n!==v.depth_mask&&(L.depthMask(n),v.depth_mask=
n);n=r[0];z=r[1];E=r[2];H=r[3];if(n!==la[0]||z!==la[1]||E!==la[2]||H!==la[3])L.colorMask(n,z,E,H),la[0]=n,la[1]=z,la[2]=E,la[3]=H;n=Q.cull_enable;n!==v.cull_enable&&(n?L.enable(2884):L.disable(2884),v.cull_enable=n);n=Q.cull_face;n!==v.cull_face&&(L.cullFace(n),v.cull_face=n);n=Q.frontFace;n!==v.frontFace&&(L.frontFace(n),v.frontFace=n);n=Q.lineWidth;n!==v.lineWidth&&(L.lineWidth(n),v.lineWidth=n);n=Q.polygonOffset_enable;n!==v.polygonOffset_enable&&(n?L.enable(32823):L.disable(32823),v.polygonOffset_enable=
n);n=aa[0];z=aa[1];if(n!==T[0]||z!==T[1])L.polygonOffset(n,z),T[0]=n,T[1]=z;n=Q.sample_alpha;n!==v.sample_alpha&&(n?L.enable(32926):L.disable(32926),v.sample_alpha=n);n=Q.sample_enable;n!==v.sample_enable&&(n?L.enable(32928):L.disable(32928),v.sample_enable=n);n=R[0];z=R[1];if(n!==N[0]||z!==N[1])L.sampleCoverage(n,z),N[0]=n,N[1]=z;n=Q.stencil_enable;n!==v.stencil_enable&&(n?L.enable(2960):L.disable(2960),v.stencil_enable=n);n=Q.stencil_mask;n!==v.stencil_mask&&(L.stencilMask(n),v.stencil_mask=n);
n=P[0];z=P[1];E=P[2];if(n!==qa[0]||z!==qa[1]||E!==qa[2])L.stencilFunc(n,z,E),qa[0]=n,qa[1]=z,qa[2]=E;n=M[0];z=M[1];E=M[2];H=M[3];if(n!==da[0]||z!==da[1]||E!==da[2]||H!==da[3])L.stencilOpSeparate(n,z,E,H),da[0]=n,da[1]=z,da[2]=E,da[3]=H;n=ta[0];z=ta[1];E=ta[2];H=ta[3];if(n!==G[0]||z!==G[1]||E!==G[2]||H!==G[3])L.stencilOpSeparate(n,z,E,H),G[0]=n,G[1]=z,G[2]=E,G[3]=H;n=Q.scissor_enable;n!==v.scissor_enable&&(n?L.enable(3089):L.disable(3089),v.scissor_enable=n);n=F[0];z=F[1];E=F[2];H=F[3];if(n!==O[0]||
z!==O[1]||E!==O[2]||H!==O[3])L.scissor(n,z,E,H),O[0]=n,O[1]=z,O[2]=E,O[3]=H;n=X[0];z=X[1];E=X[2];H=X[3];if(n!==ja[0]||z!==ja[1]||E!==ja[2]||H!==ja[3])L.viewport(n,z,E,H),ja[0]=n,ja[1]=z,ja[2]=E,ja[3]=H;v.dirty=!1}if(n=v.profile)V=performance.now(),l.count++;z=C.program(C.vert,C.frag,x);L.useProgram(z.program);ra.setVAO(null);E=z.id;(H=oa[E])||(H=oa[E]=w(z));H.call(this,a);ra.setVAO(null);y.center=b;y.distance=m;y.eye=h;y.phi=u;y.projection=q;y.theta=A;y.up=B;y.view=J;n&&(l.cpuTime+=performance.now()-
V)},scope:function(a,c,b){var f,d,p,e,k,x,r,g,t,m,D,w,C,z,J,E,I,H,F;f=y.center;d=y.distance;p=y.eye;e=y.phi;k=y.projection;x=h.call(this,y,a,b);r=y.theta;g=y.up;t=y.view;y.center=u;y.distance=2.302585092994046;y.eye=q;y.phi=0;y.projection=x;y.theta=0;y.up=A;y.view=n;if(x=v.profile)m=performance.now(),l.count++;D=y.center;w=B[1];B[1]=D;C=y.distance;D=B[2];B[2]=C;z=y.eye;C=B[3];B[3]=z;J=y.phi;z=B[4];B[4]=J;E=y.projection;J=B[5];B[5]=E;I=y.theta;E=B[6];B[6]=I;H=y.up;I=B[7];B[7]=H;H=y.view;F=B[8];B[8]=
H;c(y,a,b);y.center=f;y.distance=d;y.eye=p;y.phi=e;y.projection=k;y.theta=r;y.up=g;y.view=t;x&&(l.cpuTime+=performance.now()-m);B[1]=w;B[2]=D;B[3]=C;B[4]=z;B[5]=J;B[6]=E;B[7]=I;B[8]=F},batch:function(a,b){var f,d,e,k,g,h,u,n,w,q,A,B,ga;f=y.center;d=y.distance;e=y.eye;k=y.phi;g=y.projection;h=E.call(this,y,a,0);u=y.theta;n=y.up;w=y.view;y.center=z;y.distance=2.302585092994046;y.eye=m;y.phi=0;y.projection=h;y.theta=0;y.up=J;y.view=H;h=S.next;h!==S.cur&&(h?L.bindFramebuffer(36160,h.framebuffer):L.bindFramebuffer(36160,
null),S.cur=h);if(v.dirty){h=Q.dither;h!==v.dither&&(h?L.enable(3024):L.disable(3024),v.dither=h);h=Q.blend_enable;h!==v.blend_enable&&(h?L.enable(3042):L.disable(3042),v.blend_enable=h);h=I[0];A=I[1];B=I[2];ga=I[3];if(h!==K[0]||A!==K[1]||B!==K[2]||ga!==K[3])L.blendColor(h,A,B,ga),K[0]=h,K[1]=A,K[2]=B,K[3]=ga;h=t[0];A=t[1];if(h!==p[0]||A!==p[1])L.blendEquationSeparate(h,A),p[0]=h,p[1]=A;h=c[0];A=c[1];B=c[2];ga=c[3];if(h!==D[0]||A!==D[1]||B!==D[2]||ga!==D[3])L.blendFuncSeparate(h,A,B,ga),D[0]=h,D[1]=
A,D[2]=B,D[3]=ga;h=Q.depth_enable;h!==v.depth_enable&&(h?L.enable(2929):L.disable(2929),v.depth_enable=h);h=Q.depth_func;h!==v.depth_func&&(L.depthFunc(h),v.depth_func=h);h=na[0];A=na[1];if(h!==U[0]||A!==U[1])L.depthRange(h,A),U[0]=h,U[1]=A;h=Q.depth_mask;h!==v.depth_mask&&(L.depthMask(h),v.depth_mask=h);h=r[0];A=r[1];B=r[2];ga=r[3];if(h!==la[0]||A!==la[1]||B!==la[2]||ga!==la[3])L.colorMask(h,A,B,ga),la[0]=h,la[1]=A,la[2]=B,la[3]=ga;h=Q.cull_enable;h!==v.cull_enable&&(h?L.enable(2884):L.disable(2884),
v.cull_enable=h);h=Q.cull_face;h!==v.cull_face&&(L.cullFace(h),v.cull_face=h);h=Q.frontFace;h!==v.frontFace&&(L.frontFace(h),v.frontFace=h);h=Q.lineWidth;h!==v.lineWidth&&(L.lineWidth(h),v.lineWidth=h);h=Q.polygonOffset_enable;h!==v.polygonOffset_enable&&(h?L.enable(32823):L.disable(32823),v.polygonOffset_enable=h);h=aa[0];A=aa[1];if(h!==T[0]||A!==T[1])L.polygonOffset(h,A),T[0]=h,T[1]=A;h=Q.sample_alpha;h!==v.sample_alpha&&(h?L.enable(32926):L.disable(32926),v.sample_alpha=h);h=Q.sample_enable;h!==
v.sample_enable&&(h?L.enable(32928):L.disable(32928),v.sample_enable=h);h=R[0];A=R[1];if(h!==N[0]||A!==N[1])L.sampleCoverage(h,A),N[0]=h,N[1]=A;h=Q.stencil_enable;h!==v.stencil_enable&&(h?L.enable(2960):L.disable(2960),v.stencil_enable=h);h=Q.stencil_mask;h!==v.stencil_mask&&(L.stencilMask(h),v.stencil_mask=h);h=P[0];A=P[1];B=P[2];if(h!==qa[0]||A!==qa[1]||B!==qa[2])L.stencilFunc(h,A,B),qa[0]=h,qa[1]=A,qa[2]=B;h=M[0];A=M[1];B=M[2];ga=M[3];if(h!==da[0]||A!==da[1]||B!==da[2]||ga!==da[3])L.stencilOpSeparate(h,
A,B,ga),da[0]=h,da[1]=A,da[2]=B,da[3]=ga;h=ta[0];A=ta[1];B=ta[2];ga=ta[3];if(h!==G[0]||A!==G[1]||B!==G[2]||ga!==G[3])L.stencilOpSeparate(h,A,B,ga),G[0]=h,G[1]=A,G[2]=B,G[3]=ga;h=Q.scissor_enable;h!==v.scissor_enable&&(h?L.enable(3089):L.disable(3089),v.scissor_enable=h);h=F[0];A=F[1];B=F[2];ga=F[3];if(h!==O[0]||A!==O[1]||B!==O[2]||ga!==O[3])L.scissor(h,A,B,ga),O[0]=h,O[1]=A,O[2]=B,O[3]=ga;h=X[0];A=X[1];B=X[2];ga=X[3];if(h!==ja[0]||A!==ja[1]||B!==ja[2]||ga!==ja[3])L.viewport(h,A,B,ga),ja[0]=h,ja[1]=
A,ja[2]=B,ja[3]=ga;v.dirty=!1}if(h=v.profile)q=performance.now(),l.count+=b;A=C.program(C.vert,C.frag,x);L.useProgram(A.program);ra.setVAO(null);B=A.id;(ga=Da[B])||(ga=Da[B]=ea(A));ga.call(this,a,b);ra.setVAO(null);y.center=f;y.distance=d;y.eye=e;y.phi=k;y.projection=g;y.theta=u;y.up=n;y.view=w;h&&(l.cpuTime+=performance.now()-q)}}},"$27,position,projection,tex,uv,view":function(a,b,x,l,k,f,d,e,g,w,u,q,h,A,n,z,m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p){var c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,
oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa,Hb,$a,V,ca,sa,wa,Ea,mb,Gb;c=a.attributes;D=a.context;r=a.current;la=a.draw;na=a.framebuffer;U=a.gl;aa=a.isArrayLike;T=a.next;R=a.shader;N=a.uniforms;F=a.vao;O=T.blend_color;P=r.blend_color;qa=T.blend_equation;ta=r.blend_equation;G=T.blend_func;M=r.blend_func;da=T.colorMask;X=r.colorMask;ja=T.depth_range;oa=r.depth_range;Da=T.polygonOffset_offset;ya=r.polygonOffset_offset;Z=T.sample_coverage;Ca=r.sample_coverage;ia=T.scissor_box;ka=r.scissor_box;Ba=T.stencil_func;Qa=r.stencil_func;
Aa=T.stencil_opBack;Hb=r.stencil_opBack;$a=T.stencil_opFront;V=r.stencil_opFront;ca=T.viewport;sa=r.viewport;wa=new Float32Array(16);Ea=new Float32Array(16);mb=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(a){var m,v,n,y;m=na.next;m!==na.cur&&(m?U.bindFramebuffer(36160,m.framebuffer):U.bindFramebuffer(36160,null),na.cur=m);if(r.dirty){var C;m=T.dither;m!==r.dither&&(m?U.enable(3024):U.disable(3024),r.dither=m);m=T.blend_enable;m!==r.blend_enable&&(m?U.enable(3042):U.disable(3042),
r.blend_enable=m);m=O[0];n=O[1];y=O[2];C=O[3];if(m!==P[0]||n!==P[1]||y!==P[2]||C!==P[3])U.blendColor(m,n,y,C),P[0]=m,P[1]=n,P[2]=y,P[3]=C;m=qa[0];n=qa[1];if(m!==ta[0]||n!==ta[1])U.blendEquationSeparate(m,n),ta[0]=m,ta[1]=n;m=G[0];n=G[1];y=G[2];C=G[3];if(m!==M[0]||n!==M[1]||y!==M[2]||C!==M[3])U.blendFuncSeparate(m,n,y,C),M[0]=m,M[1]=n,M[2]=y,M[3]=C;m=T.depth_enable;m!==r.depth_enable&&(m?U.enable(2929):U.disable(2929),r.depth_enable=m);m=T.depth_func;m!==r.depth_func&&(U.depthFunc(m),r.depth_func=
m);m=ja[0];n=ja[1];if(m!==oa[0]||n!==oa[1])U.depthRange(m,n),oa[0]=m,oa[1]=n;m=T.depth_mask;m!==r.depth_mask&&(U.depthMask(m),r.depth_mask=m);m=da[0];n=da[1];y=da[2];C=da[3];if(m!==X[0]||n!==X[1]||y!==X[2]||C!==X[3])U.colorMask(m,n,y,C),X[0]=m,X[1]=n,X[2]=y,X[3]=C;m=T.cull_enable;m!==r.cull_enable&&(m?U.enable(2884):U.disable(2884),r.cull_enable=m);m=T.cull_face;m!==r.cull_face&&(U.cullFace(m),r.cull_face=m);m=T.frontFace;m!==r.frontFace&&(U.frontFace(m),r.frontFace=m);m=T.lineWidth;m!==r.lineWidth&&
(U.lineWidth(m),r.lineWidth=m);m=T.polygonOffset_enable;m!==r.polygonOffset_enable&&(m?U.enable(32823):U.disable(32823),r.polygonOffset_enable=m);m=Da[0];n=Da[1];if(m!==ya[0]||n!==ya[1])U.polygonOffset(m,n),ya[0]=m,ya[1]=n;m=T.sample_alpha;m!==r.sample_alpha&&(m?U.enable(32926):U.disable(32926),r.sample_alpha=m);m=T.sample_enable;m!==r.sample_enable&&(m?U.enable(32928):U.disable(32928),r.sample_enable=m);m=Z[0];n=Z[1];if(m!==Ca[0]||n!==Ca[1])U.sampleCoverage(m,n),Ca[0]=m,Ca[1]=n;m=T.stencil_enable;
m!==r.stencil_enable&&(m?U.enable(2960):U.disable(2960),r.stencil_enable=m);m=T.stencil_mask;m!==r.stencil_mask&&(U.stencilMask(m),r.stencil_mask=m);m=Ba[0];n=Ba[1];y=Ba[2];if(m!==Qa[0]||n!==Qa[1]||y!==Qa[2])U.stencilFunc(m,n,y),Qa[0]=m,Qa[1]=n,Qa[2]=y;m=$a[0];n=$a[1];y=$a[2];C=$a[3];if(m!==V[0]||n!==V[1]||y!==V[2]||C!==V[3])U.stencilOpSeparate(m,n,y,C),V[0]=m,V[1]=n,V[2]=y,V[3]=C;m=Aa[0];n=Aa[1];y=Aa[2];C=Aa[3];if(m!==Hb[0]||n!==Hb[1]||y!==Hb[2]||C!==Hb[3])U.stencilOpSeparate(m,n,y,C),Hb[0]=m,Hb[1]=
n,Hb[2]=y,Hb[3]=C;m=T.scissor_enable;m!==r.scissor_enable&&(m?U.enable(3089):U.disable(3089),r.scissor_enable=m);m=ia[0];n=ia[1];y=ia[2];C=ia[3];if(m!==ka[0]||n!==ka[1]||y!==ka[2]||C!==ka[3])U.scissor(m,n,y,C),ka[0]=m,ka[1]=n,ka[2]=y,ka[3]=C;m=ca[0];n=ca[1];y=ca[2];C=ca[3];if(m!==sa[0]||n!==sa[1]||y!==sa[2]||C!==sa[3])U.viewport(m,n,y,C),sa[0]=m,sa[1]=n,sa[2]=y,sa[3]=C;r.dirty=!1}if(m=r.profile)v=performance.now(),l.count++;U.useProgram(k.program);F.setVAO(null);n=ra.location;y=c[n];y.buffer||U.enableVertexAttribArray(n);
if(y.type!==f.dtype||3!==y.size||y.buffer!==f||!1!==y.normalized||0!==y.offset||0!==y.stride)U.bindBuffer(34962,f.buffer),U.vertexAttribPointer(n,3,f.dtype,!1,0,0),y.type=f.dtype,y.size=3,y.buffer=f,y.normalized=!1,y.offset=0,y.stride=0;n=t.location;y=c[n];y.buffer||U.enableVertexAttribArray(n);if(y.type!==d.dtype||2!==y.size||y.buffer!==d||!1!==y.normalized||0!==y.offset||0!==y.stride)U.bindBuffer(34962,d.buffer),U.vertexAttribPointer(n,2,d.dtype,!1,0,0),y.type=d.dtype,y.size=2,y.buffer=d,y.normalized=
!1,y.offset=0,y.stride=0;n=e.call(this,D,a,0);aa(n)&&16===n.length||b.commandRaise(g,x);U.uniformMatrix4fv(I.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(wa[0]=n[0],wa[1]=n[1],wa[2]=n[2],wa[3]=n[3],wa[4]=n[4],wa[5]=n[5],wa[6]=n[6],wa[7]=n[7],wa[8]=n[8],wa[9]=n[9],wa[10]=n[10],wa[11]=n[11],wa[12]=n[12],wa[13]=n[13],wa[14]=n[14],wa[15]=n[15],wa));n=w.call(this,D,a,0);aa(n)&&16===n.length||b.commandRaise(u,x);U.uniformMatrix4fv(p.location,!1,Array.isArray(n)||n instanceof Float32Array?
n:(Ea[0]=n[0],Ea[1]=n[1],Ea[2]=n[2],Ea[3]=n[3],Ea[4]=n[4],Ea[5]=n[5],Ea[6]=n[6],Ea[7]=n[7],Ea[8]=n[8],Ea[9]=n[9],Ea[10]=n[10],Ea[11]=n[11],Ea[12]=n[12],Ea[13]=n[13],Ea[14]=n[14],Ea[15]=n[15],Ea));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||b.commandRaise(q,x);a=a._texture;U.uniform1i(K.location,a.bind());h&&U.bindBuffer(34963,h.buffer.buffer);n=h.primType;y=h.vertCount-0;0<=y||b.commandRaise(A,x);y&&(U.drawElements(n,y,h.type,0<<(h.type-
5121>>1)),F.setVAO(null),m&&(l.cpuTime+=performance.now()-v),a.unbind())},scope:function(a,c,p){var e,k,g,t,h,v,u,y,w,q,A,V,C,B,I,F,Q,G,ga,K,ca,L,Z,M,X,pa,O,sa,P,oa,S,Hb,U,T,ya;if(e=r.profile)k=performance.now(),l.count++;g=la.elements;la.elements=n;t=la.offset;la.offset=0;h=n.vertCount-0;0<=h||b.commandRaise(z,x);v=la.count;la.count=h;u=n.primType;h=la.primitive;la.primitive=u;y=m.call(this,D,a,p);u=N[3];N[3]=y;w=a.texture;y=N[5];N[5]=w;q=E.call(this,D,a,p);w=N[4];N[4]=q;q=J.buffer;J.buffer=f;A=
J.divisor;J.divisor=0;V=J.normalized;J.normalized=!1;C=J.offset;J.offset=0;B=J.size;J.size=0;I=J.state;J.state=1;F=J.stride;J.stride=0;Q=J.type;J.type=f.dtype;G=J.w;J.w=0;ga=J.x;J.x=0;K=J.y;J.y=0;ca=J.z;J.z=0;L=H.buffer;H.buffer=d;Z=H.divisor;H.divisor=0;M=H.normalized;H.normalized=!1;X=H.offset;H.offset=0;pa=H.size;H.size=0;O=H.state;H.state=1;sa=H.stride;H.stride=0;P=H.type;H.type=d.dtype;oa=H.w;H.w=0;S=H.x;H.x=0;Hb=H.y;H.y=0;U=H.z;H.z=0;T=R.vert;R.vert=2;ya=R.frag;R.frag=1;c(D,a,p);e&&(l.cpuTime+=
performance.now()-k);la.elements=g;la.offset=t;la.count=v;la.primitive=h;N[3]=u;N[5]=y;N[4]=w;J.buffer=q;J.divisor=A;J.normalized=V;J.offset=C;J.size=B;J.state=I;J.stride=F;J.type=Q;J.w=G;J.x=ga;J.y=K;J.z=ca;H.buffer=L;H.divisor=Z;H.normalized=M;H.offset=X;H.size=pa;H.state=O;H.stride=sa;H.type=P;H.w=oa;H.x=S;H.y=Hb;H.z=U;R.vert=T;R.frag=ya},batch:function(a,e){var k,g,m,h;k=na.next;k!==na.cur&&(k?U.bindFramebuffer(36160,k.framebuffer):U.bindFramebuffer(36160,null),na.cur=k);if(r.dirty){var n,u,w;
k=T.dither;k!==r.dither&&(k?U.enable(3024):U.disable(3024),r.dither=k);k=T.blend_enable;k!==r.blend_enable&&(k?U.enable(3042):U.disable(3042),r.blend_enable=k);k=O[0];n=O[1];u=O[2];w=O[3];if(k!==P[0]||n!==P[1]||u!==P[2]||w!==P[3])U.blendColor(k,n,u,w),P[0]=k,P[1]=n,P[2]=u,P[3]=w;k=qa[0];n=qa[1];if(k!==ta[0]||n!==ta[1])U.blendEquationSeparate(k,n),ta[0]=k,ta[1]=n;k=G[0];n=G[1];u=G[2];w=G[3];if(k!==M[0]||n!==M[1]||u!==M[2]||w!==M[3])U.blendFuncSeparate(k,n,u,w),M[0]=k,M[1]=n,M[2]=u,M[3]=w;k=T.depth_enable;
k!==r.depth_enable&&(k?U.enable(2929):U.disable(2929),r.depth_enable=k);k=T.depth_func;k!==r.depth_func&&(U.depthFunc(k),r.depth_func=k);k=ja[0];n=ja[1];if(k!==oa[0]||n!==oa[1])U.depthRange(k,n),oa[0]=k,oa[1]=n;k=T.depth_mask;k!==r.depth_mask&&(U.depthMask(k),r.depth_mask=k);k=da[0];n=da[1];u=da[2];w=da[3];if(k!==X[0]||n!==X[1]||u!==X[2]||w!==X[3])U.colorMask(k,n,u,w),X[0]=k,X[1]=n,X[2]=u,X[3]=w;k=T.cull_enable;k!==r.cull_enable&&(k?U.enable(2884):U.disable(2884),r.cull_enable=k);k=T.cull_face;k!==
r.cull_face&&(U.cullFace(k),r.cull_face=k);k=T.frontFace;k!==r.frontFace&&(U.frontFace(k),r.frontFace=k);k=T.lineWidth;k!==r.lineWidth&&(U.lineWidth(k),r.lineWidth=k);k=T.polygonOffset_enable;k!==r.polygonOffset_enable&&(k?U.enable(32823):U.disable(32823),r.polygonOffset_enable=k);k=Da[0];n=Da[1];if(k!==ya[0]||n!==ya[1])U.polygonOffset(k,n),ya[0]=k,ya[1]=n;k=T.sample_alpha;k!==r.sample_alpha&&(k?U.enable(32926):U.disable(32926),r.sample_alpha=k);k=T.sample_enable;k!==r.sample_enable&&(k?U.enable(32928):
U.disable(32928),r.sample_enable=k);k=Z[0];n=Z[1];if(k!==Ca[0]||n!==Ca[1])U.sampleCoverage(k,n),Ca[0]=k,Ca[1]=n;k=T.stencil_enable;k!==r.stencil_enable&&(k?U.enable(2960):U.disable(2960),r.stencil_enable=k);k=T.stencil_mask;k!==r.stencil_mask&&(U.stencilMask(k),r.stencil_mask=k);k=Ba[0];n=Ba[1];u=Ba[2];if(k!==Qa[0]||n!==Qa[1]||u!==Qa[2])U.stencilFunc(k,n,u),Qa[0]=k,Qa[1]=n,Qa[2]=u;k=$a[0];n=$a[1];u=$a[2];w=$a[3];if(k!==V[0]||n!==V[1]||u!==V[2]||w!==V[3])U.stencilOpSeparate(k,n,u,w),V[0]=k,V[1]=n,
V[2]=u,V[3]=w;k=Aa[0];n=Aa[1];u=Aa[2];w=Aa[3];if(k!==Hb[0]||n!==Hb[1]||u!==Hb[2]||w!==Hb[3])U.stencilOpSeparate(k,n,u,w),Hb[0]=k,Hb[1]=n,Hb[2]=u,Hb[3]=w;k=T.scissor_enable;k!==r.scissor_enable&&(k?U.enable(3089):U.disable(3089),r.scissor_enable=k);k=ia[0];n=ia[1];u=ia[2];w=ia[3];if(k!==ka[0]||n!==ka[1]||u!==ka[2]||w!==ka[3])U.scissor(k,n,u,w),ka[0]=k,ka[1]=n,ka[2]=u,ka[3]=w;k=ca[0];n=ca[1];u=ca[2];w=ca[3];if(k!==sa[0]||n!==sa[1]||u!==sa[2]||w!==sa[3])U.viewport(k,n,u,w),sa[0]=k,sa[1]=n,sa[2]=u,sa[3]=
w;r.dirty=!1}if(k=r.profile)g=performance.now(),l.count+=e;U.useProgram(ea.program);F.setVAO(null);n=ra.location;u=c[n];u.buffer||U.enableVertexAttribArray(n);if(u.type!==f.dtype||3!==u.size||u.buffer!==f||!1!==u.normalized||0!==u.offset||0!==u.stride)U.bindBuffer(34962,f.buffer),U.vertexAttribPointer(n,3,f.dtype,!1,0,0),u.type=f.dtype,u.size=3,u.buffer=f,u.normalized=!1,u.offset=0,u.stride=0;n=t.location;u=c[n];u.buffer||U.enableVertexAttribArray(n);if(u.type!==d.dtype||2!==u.size||u.buffer!==d||
!1!==u.normalized||0!==u.offset||0!==u.stride)U.bindBuffer(34962,d.buffer),U.vertexAttribPointer(n,2,d.dtype,!1,0,0),u.type=d.dtype,u.size=2,u.buffer=d,u.normalized=!1,u.offset=0,u.stride=0;n=y.call(this,D,h,m);aa(n)&&16===n.length||b.commandRaise(v,x);U.uniformMatrix4fv(I.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(mb[0]=n[0],mb[1]=n[1],mb[2]=n[2],mb[3]=n[3],mb[4]=n[4],mb[5]=n[5],mb[6]=n[6],mb[7]=n[7],mb[8]=n[8],mb[9]=n[9],mb[10]=n[10],mb[11]=n[11],mb[12]=n[12],mb[13]=n[13],mb[14]=
n[14],mb[15]=n[15],mb));m=S.call(this,D,h,m);aa(m)&&16===m.length||b.commandRaise(L,x);U.uniformMatrix4fv(p.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(Gb[0]=m[0],Gb[1]=m[1],Gb[2]=m[2],Gb[3]=m[3],Gb[4]=m[4],Gb[5]=m[5],Gb[6]=m[6],Gb[7]=m[7],Gb[8]=m[8],Gb[9]=m[9],Gb[10]=m[10],Gb[11]=m[11],Gb[12]=m[12],Gb[13]=m[13],Gb[14]=m[14],Gb[15]=m[15],Gb));C&&U.bindBuffer(34963,C.buffer.buffer);n=C.primType;u=C.vertCount-0;0<=u||b.commandRaise(B,x);for(m=0;m<e;++m)h=a[m],(h=h.texture)&&"framebuffer"===
h._reglType&&(h=h.color[0]),"function"===typeof h&&"texture2d"===h._reglType||b.commandRaise(Q,x),h=h._texture,U.uniform1i(K.location,h.bind()),u&&(U.drawElements(n,u,C.type,0<<(C.type-5121>>1)),h.unbind());F.setVAO(null);k&&(l.cpuTime+=performance.now()-g)}}},"$19,normal,position,projection,view":function(a,b,g,l,k,f,d,e,q,w,u,z,h,A,n,ua,m,E,J,H,ea,y,v,S){var L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba,Qa,Aa;L=a.attributes;Q=a.context;C=a.current;B=a.draw;
ra=a.framebuffer;I=a.gl;K=a.isArrayLike;t=a.next;p=a.shader;c=a.uniforms;D=a.vao;r=t.blend_color;la=C.blend_color;na=t.blend_equation;U=C.blend_equation;aa=t.blend_func;T=C.blend_func;R=t.colorMask;N=C.colorMask;F=t.depth_range;O=C.depth_range;P=t.polygonOffset_offset;qa=C.polygonOffset_offset;ta=t.sample_coverage;G=C.sample_coverage;M=t.scissor_box;da=C.scissor_box;X=t.stencil_func;ja=C.stencil_func;oa=t.stencil_opBack;Da=C.stencil_opBack;ya=t.stencil_opFront;Z=C.stencil_opFront;Ca=t.viewport;ia=
C.viewport;ka=new Float32Array(16);Ba=new Float32Array(16);Qa=new Float32Array(16);Aa=new Float32Array(16);return{draw:function(a){var p,m,h;a=ra.next;a!==ra.cur&&(a?I.bindFramebuffer(36160,a.framebuffer):I.bindFramebuffer(36160,null),ra.cur=a);if(C.dirty){var n;a=t.dither;a!==C.dither&&(a?I.enable(3024):I.disable(3024),C.dither=a);a=t.blend_enable;a!==C.blend_enable&&(a?I.enable(3042):I.disable(3042),C.blend_enable=a);a=r[0];m=r[1];h=r[2];n=r[3];if(a!==la[0]||m!==la[1]||h!==la[2]||n!==la[3])I.blendColor(a,
m,h,n),la[0]=a,la[1]=m,la[2]=h,la[3]=n;a=na[0];m=na[1];if(a!==U[0]||m!==U[1])I.blendEquationSeparate(a,m),U[0]=a,U[1]=m;a=aa[0];m=aa[1];h=aa[2];n=aa[3];if(a!==T[0]||m!==T[1]||h!==T[2]||n!==T[3])I.blendFuncSeparate(a,m,h,n),T[0]=a,T[1]=m,T[2]=h,T[3]=n;a=t.depth_enable;a!==C.depth_enable&&(a?I.enable(2929):I.disable(2929),C.depth_enable=a);a=t.depth_func;a!==C.depth_func&&(I.depthFunc(a),C.depth_func=a);a=F[0];m=F[1];if(a!==O[0]||m!==O[1])I.depthRange(a,m),O[0]=a,O[1]=m;a=t.depth_mask;a!==C.depth_mask&&
(I.depthMask(a),C.depth_mask=a);a=R[0];m=R[1];h=R[2];n=R[3];if(a!==N[0]||m!==N[1]||h!==N[2]||n!==N[3])I.colorMask(a,m,h,n),N[0]=a,N[1]=m,N[2]=h,N[3]=n;a=t.cull_enable;a!==C.cull_enable&&(a?I.enable(2884):I.disable(2884),C.cull_enable=a);a=t.cull_face;a!==C.cull_face&&(I.cullFace(a),C.cull_face=a);a=t.frontFace;a!==C.frontFace&&(I.frontFace(a),C.frontFace=a);a=t.lineWidth;a!==C.lineWidth&&(I.lineWidth(a),C.lineWidth=a);a=t.polygonOffset_enable;a!==C.polygonOffset_enable&&(a?I.enable(32823):I.disable(32823),
C.polygonOffset_enable=a);a=P[0];m=P[1];if(a!==qa[0]||m!==qa[1])I.polygonOffset(a,m),qa[0]=a,qa[1]=m;a=t.sample_alpha;a!==C.sample_alpha&&(a?I.enable(32926):I.disable(32926),C.sample_alpha=a);a=t.sample_enable;a!==C.sample_enable&&(a?I.enable(32928):I.disable(32928),C.sample_enable=a);a=ta[0];m=ta[1];if(a!==G[0]||m!==G[1])I.sampleCoverage(a,m),G[0]=a,G[1]=m;a=t.stencil_enable;a!==C.stencil_enable&&(a?I.enable(2960):I.disable(2960),C.stencil_enable=a);a=t.stencil_mask;a!==C.stencil_mask&&(I.stencilMask(a),
C.stencil_mask=a);a=X[0];m=X[1];h=X[2];if(a!==ja[0]||m!==ja[1]||h!==ja[2])I.stencilFunc(a,m,h),ja[0]=a,ja[1]=m,ja[2]=h;a=ya[0];m=ya[1];h=ya[2];n=ya[3];if(a!==Z[0]||m!==Z[1]||h!==Z[2]||n!==Z[3])I.stencilOpSeparate(a,m,h,n),Z[0]=a,Z[1]=m,Z[2]=h,Z[3]=n;a=oa[0];m=oa[1];h=oa[2];n=oa[3];if(a!==Da[0]||m!==Da[1]||h!==Da[2]||n!==Da[3])I.stencilOpSeparate(a,m,h,n),Da[0]=a,Da[1]=m,Da[2]=h,Da[3]=n;a=t.scissor_enable;a!==C.scissor_enable&&(a?I.enable(3089):I.disable(3089),C.scissor_enable=a);a=M[0];m=M[1];h=M[2];
n=M[3];if(a!==da[0]||m!==da[1]||h!==da[2]||n!==da[3])I.scissor(a,m,h,n),da[0]=a,da[1]=m,da[2]=h,da[3]=n;a=Ca[0];m=Ca[1];h=Ca[2];n=Ca[3];if(a!==ia[0]||m!==ia[1]||h!==ia[2]||n!==ia[3])I.viewport(a,m,h,n),ia[0]=a,ia[1]=m,ia[2]=h,ia[3]=n;C.dirty=!1}if(a=C.profile)p=performance.now(),l.count++;I.useProgram(k.program);D.setVAO(null);m=y.location;h=L[m];h.buffer||I.enableVertexAttribArray(m);if(h.type!==f.dtype||3!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)I.bindBuffer(34962,f.buffer),
I.vertexAttribPointer(m,3,f.dtype,!1,0,0),h.type=f.dtype,h.size=3,h.buffer=f,h.normalized=!1,h.offset=0,h.stride=0;m=ea.location;h=L[m];h.buffer||I.enableVertexAttribArray(m);if(h.type!==d.dtype||3!==h.size||h.buffer!==d||!1!==h.normalized||0!==h.offset||0!==h.stride)I.bindBuffer(34962,d.buffer),I.vertexAttribPointer(m,3,d.dtype,!1,0,0),h.type=d.dtype,h.size=3,h.buffer=d,h.normalized=!1,h.offset=0,h.stride=0;m=c[5];K(m)&&16===m.length||b.commandRaise(e,g);I.uniformMatrix4fv(v.location,!1,Array.isArray(m)||
m instanceof Float32Array?m:(ka[0]=m[0],ka[1]=m[1],ka[2]=m[2],ka[3]=m[3],ka[4]=m[4],ka[5]=m[5],ka[6]=m[6],ka[7]=m[7],ka[8]=m[8],ka[9]=m[9],ka[10]=m[10],ka[11]=m[11],ka[12]=m[12],ka[13]=m[13],ka[14]=m[14],ka[15]=m[15],ka));m=c[8];K(m)&&16===m.length||b.commandRaise(q,g);I.uniformMatrix4fv(S.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(Ba[0]=m[0],Ba[1]=m[1],Ba[2]=m[2],Ba[3]=m[3],Ba[4]=m[4],Ba[5]=m[5],Ba[6]=m[6],Ba[7]=m[7],Ba[8]=m[8],Ba[9]=m[9],Ba[10]=m[10],Ba[11]=m[11],Ba[12]=m[12],Ba[13]=
m[13],Ba[14]=m[14],Ba[15]=m[15],Ba));w&&I.bindBuffer(34963,w.buffer.buffer);m=w.primType;h=w.vertCount-0;0<=h||b.commandRaise(u,g);h&&(I.drawElements(m,h,w.type,0<<(w.type-5121>>1)),D.setVAO(null),a&&(l.cpuTime+=performance.now()-p))},scope:function(a,c,e){var k,m,r,t,v,u,D,y,w,q,J,E,I,H,F,G,ga,K,L,Z,M,N,X,O,P,oa,S,la,R,U,T,ya;if(k=C.profile)m=performance.now(),l.count++;r=B.elements;B.elements=z;t=B.offset;B.offset=0;v=z.vertCount-0;0<=v||b.commandRaise(h,g);u=B.count;B.count=v;D=z.primType;v=B.primitive;
B.primitive=D;D=A.buffer;A.buffer=d;y=A.divisor;A.divisor=0;w=A.normalized;A.normalized=!1;q=A.offset;A.offset=0;J=A.size;A.size=0;E=A.state;A.state=1;I=A.stride;A.stride=0;H=A.type;A.type=d.dtype;F=A.w;A.w=0;G=A.x;A.x=0;ga=A.y;A.y=0;K=A.z;A.z=0;L=n.buffer;n.buffer=f;Z=n.divisor;n.divisor=0;M=n.normalized;n.normalized=!1;N=n.offset;n.offset=0;X=n.size;n.size=0;O=n.state;n.state=1;P=n.stride;n.stride=0;oa=n.type;n.type=f.dtype;S=n.w;n.w=0;la=n.x;n.x=0;R=n.y;n.y=0;U=n.z;n.z=0;T=p.vert;p.vert=10;ya=
p.frag;p.frag=9;c(Q,a,e);k&&(l.cpuTime+=performance.now()-m);B.elements=r;B.offset=t;B.count=u;B.primitive=v;A.buffer=D;A.divisor=y;A.normalized=w;A.offset=q;A.size=J;A.state=E;A.stride=I;A.type=H;A.w=F;A.x=G;A.y=ga;A.z=K;n.buffer=L;n.divisor=Z;n.normalized=M;n.offset=N;n.size=X;n.state=O;n.stride=P;n.type=oa;n.w=S;n.x=la;n.y=R;n.z=U;p.vert=T;p.frag=ya},batch:function(a,p){var e,k,h;e=ra.next;e!==ra.cur&&(e?I.bindFramebuffer(36160,e.framebuffer):I.bindFramebuffer(36160,null),ra.cur=e);if(C.dirty){var n,
u;e=t.dither;e!==C.dither&&(e?I.enable(3024):I.disable(3024),C.dither=e);e=t.blend_enable;e!==C.blend_enable&&(e?I.enable(3042):I.disable(3042),C.blend_enable=e);e=r[0];h=r[1];n=r[2];u=r[3];if(e!==la[0]||h!==la[1]||n!==la[2]||u!==la[3])I.blendColor(e,h,n,u),la[0]=e,la[1]=h,la[2]=n,la[3]=u;e=na[0];h=na[1];if(e!==U[0]||h!==U[1])I.blendEquationSeparate(e,h),U[0]=e,U[1]=h;e=aa[0];h=aa[1];n=aa[2];u=aa[3];if(e!==T[0]||h!==T[1]||n!==T[2]||u!==T[3])I.blendFuncSeparate(e,h,n,u),T[0]=e,T[1]=h,T[2]=n,T[3]=u;
e=t.depth_enable;e!==C.depth_enable&&(e?I.enable(2929):I.disable(2929),C.depth_enable=e);e=t.depth_func;e!==C.depth_func&&(I.depthFunc(e),C.depth_func=e);e=F[0];h=F[1];if(e!==O[0]||h!==O[1])I.depthRange(e,h),O[0]=e,O[1]=h;e=t.depth_mask;e!==C.depth_mask&&(I.depthMask(e),C.depth_mask=e);e=R[0];h=R[1];n=R[2];u=R[3];if(e!==N[0]||h!==N[1]||n!==N[2]||u!==N[3])I.colorMask(e,h,n,u),N[0]=e,N[1]=h,N[2]=n,N[3]=u;e=t.cull_enable;e!==C.cull_enable&&(e?I.enable(2884):I.disable(2884),C.cull_enable=e);e=t.cull_face;
e!==C.cull_face&&(I.cullFace(e),C.cull_face=e);e=t.frontFace;e!==C.frontFace&&(I.frontFace(e),C.frontFace=e);e=t.lineWidth;e!==C.lineWidth&&(I.lineWidth(e),C.lineWidth=e);e=t.polygonOffset_enable;e!==C.polygonOffset_enable&&(e?I.enable(32823):I.disable(32823),C.polygonOffset_enable=e);e=P[0];h=P[1];if(e!==qa[0]||h!==qa[1])I.polygonOffset(e,h),qa[0]=e,qa[1]=h;e=t.sample_alpha;e!==C.sample_alpha&&(e?I.enable(32926):I.disable(32926),C.sample_alpha=e);e=t.sample_enable;e!==C.sample_enable&&(e?I.enable(32928):
I.disable(32928),C.sample_enable=e);e=ta[0];h=ta[1];if(e!==G[0]||h!==G[1])I.sampleCoverage(e,h),G[0]=e,G[1]=h;e=t.stencil_enable;e!==C.stencil_enable&&(e?I.enable(2960):I.disable(2960),C.stencil_enable=e);e=t.stencil_mask;e!==C.stencil_mask&&(I.stencilMask(e),C.stencil_mask=e);e=X[0];h=X[1];n=X[2];if(e!==ja[0]||h!==ja[1]||n!==ja[2])I.stencilFunc(e,h,n),ja[0]=e,ja[1]=h,ja[2]=n;e=ya[0];h=ya[1];n=ya[2];u=ya[3];if(e!==Z[0]||h!==Z[1]||n!==Z[2]||u!==Z[3])I.stencilOpSeparate(e,h,n,u),Z[0]=e,Z[1]=h,Z[2]=
n,Z[3]=u;e=oa[0];h=oa[1];n=oa[2];u=oa[3];if(e!==Da[0]||h!==Da[1]||n!==Da[2]||u!==Da[3])I.stencilOpSeparate(e,h,n,u),Da[0]=e,Da[1]=h,Da[2]=n,Da[3]=u;e=t.scissor_enable;e!==C.scissor_enable&&(e?I.enable(3089):I.disable(3089),C.scissor_enable=e);e=M[0];h=M[1];n=M[2];u=M[3];if(e!==da[0]||h!==da[1]||n!==da[2]||u!==da[3])I.scissor(e,h,n,u),da[0]=e,da[1]=h,da[2]=n,da[3]=u;e=Ca[0];h=Ca[1];n=Ca[2];u=Ca[3];if(e!==ia[0]||h!==ia[1]||n!==ia[2]||u!==ia[3])I.viewport(e,h,n,u),ia[0]=e,ia[1]=h,ia[2]=n,ia[3]=u;C.dirty=
!1}if(e=C.profile)k=performance.now(),l.count+=p;I.useProgram(ua.program);D.setVAO(null);h=y.location;n=L[h];n.buffer||I.enableVertexAttribArray(h);if(n.type!==f.dtype||3!==n.size||n.buffer!==f||!1!==n.normalized||0!==n.offset||0!==n.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(h,3,f.dtype,!1,0,0),n.type=f.dtype,n.size=3,n.buffer=f,n.normalized=!1,n.offset=0,n.stride=0;h=ea.location;n=L[h];n.buffer||I.enableVertexAttribArray(h);if(n.type!==d.dtype||3!==n.size||n.buffer!==d||!1!==n.normalized||
0!==n.offset||0!==n.stride)I.bindBuffer(34962,d.buffer),I.vertexAttribPointer(h,3,d.dtype,!1,0,0),n.type=d.dtype,n.size=3,n.buffer=d,n.normalized=!1,n.offset=0,n.stride=0;h=c[5];K(h)&&16===h.length||b.commandRaise(m,g);I.uniformMatrix4fv(v.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Qa[0]=h[0],Qa[1]=h[1],Qa[2]=h[2],Qa[3]=h[3],Qa[4]=h[4],Qa[5]=h[5],Qa[6]=h[6],Qa[7]=h[7],Qa[8]=h[8],Qa[9]=h[9],Qa[10]=h[10],Qa[11]=h[11],Qa[12]=h[12],Qa[13]=h[13],Qa[14]=h[14],Qa[15]=h[15],Qa));h=c[8];K(h)&&
16===h.length||b.commandRaise(E,g);I.uniformMatrix4fv(S.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Aa[0]=h[0],Aa[1]=h[1],Aa[2]=h[2],Aa[3]=h[3],Aa[4]=h[4],Aa[5]=h[5],Aa[6]=h[6],Aa[7]=h[7],Aa[8]=h[8],Aa[9]=h[9],Aa[10]=h[10],Aa[11]=h[11],Aa[12]=h[12],Aa[13]=h[13],Aa[14]=h[14],Aa[15]=h[15],Aa));J&&I.bindBuffer(34963,J.buffer.buffer);n=J.primType;u=J.vertCount-0;0<=u||b.commandRaise(H,g);for(h=0;h<p;++h)u&&I.drawElements(n,u,J.type,0<<(J.type-5121>>1));D.setVAO(null);e&&(l.cpuTime+=performance.now()-
k)}}},"$14,angle,color,position":function(a,b,g,l,k,f,d,e,q,w,u,z,h,A,n,ua,m,E){var J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa;J=a.attributes;H=a.context;ea=a.current;y=a.draw;v=a.elements;S=a.framebuffer;L=a.gl;Q=a.isArrayLike;C=a.next;B=a.shader;ra=a.uniforms;I=a.vao;K=C.blend_color;t=ea.blend_color;p=C.blend_equation;c=ea.blend_equation;D=C.blend_func;r=ea.blend_func;la=C.colorMask;na=ea.colorMask;U=C.depth_range;aa=ea.depth_range;T=C.polygonOffset_offset;
R=ea.polygonOffset_offset;N=C.sample_coverage;F=ea.sample_coverage;O=C.scissor_box;P=ea.scissor_box;qa=C.stencil_func;ta=ea.stencil_func;G=C.stencil_opBack;M=ea.stencil_opBack;da=C.stencil_opFront;X=ea.stencil_opFront;ja=C.viewport;oa=ea.viewport;return{draw:function(a){var h,n,u,w;h=S.next;h!==S.cur&&(h?L.bindFramebuffer(36160,h.framebuffer):L.bindFramebuffer(36160,null),S.cur=h);if(ea.dirty){var A;h=C.dither;h!==ea.dither&&(h?L.enable(3024):L.disable(3024),ea.dither=h);h=C.blend_enable;h!==ea.blend_enable&&
(h?L.enable(3042):L.disable(3042),ea.blend_enable=h);h=K[0];u=K[1];w=K[2];A=K[3];if(h!==t[0]||u!==t[1]||w!==t[2]||A!==t[3])L.blendColor(h,u,w,A),t[0]=h,t[1]=u,t[2]=w,t[3]=A;h=p[0];u=p[1];if(h!==c[0]||u!==c[1])L.blendEquationSeparate(h,u),c[0]=h,c[1]=u;h=D[0];u=D[1];w=D[2];A=D[3];if(h!==r[0]||u!==r[1]||w!==r[2]||A!==r[3])L.blendFuncSeparate(h,u,w,A),r[0]=h,r[1]=u,r[2]=w,r[3]=A;h=C.depth_func;h!==ea.depth_func&&(L.depthFunc(h),ea.depth_func=h);h=U[0];u=U[1];if(h!==aa[0]||u!==aa[1])L.depthRange(h,u),
aa[0]=h,aa[1]=u;h=C.depth_mask;h!==ea.depth_mask&&(L.depthMask(h),ea.depth_mask=h);h=la[0];u=la[1];w=la[2];A=la[3];if(h!==na[0]||u!==na[1]||w!==na[2]||A!==na[3])L.colorMask(h,u,w,A),na[0]=h,na[1]=u,na[2]=w,na[3]=A;h=C.cull_enable;h!==ea.cull_enable&&(h?L.enable(2884):L.disable(2884),ea.cull_enable=h);h=C.cull_face;h!==ea.cull_face&&(L.cullFace(h),ea.cull_face=h);h=C.frontFace;h!==ea.frontFace&&(L.frontFace(h),ea.frontFace=h);h=C.lineWidth;h!==ea.lineWidth&&(L.lineWidth(h),ea.lineWidth=h);h=C.polygonOffset_enable;
h!==ea.polygonOffset_enable&&(h?L.enable(32823):L.disable(32823),ea.polygonOffset_enable=h);h=T[0];u=T[1];if(h!==R[0]||u!==R[1])L.polygonOffset(h,u),R[0]=h,R[1]=u;h=C.sample_alpha;h!==ea.sample_alpha&&(h?L.enable(32926):L.disable(32926),ea.sample_alpha=h);h=C.sample_enable;h!==ea.sample_enable&&(h?L.enable(32928):L.disable(32928),ea.sample_enable=h);h=N[0];u=N[1];if(h!==F[0]||u!==F[1])L.sampleCoverage(h,u),F[0]=h,F[1]=u;h=C.stencil_enable;h!==ea.stencil_enable&&(h?L.enable(2960):L.disable(2960),ea.stencil_enable=
h);h=C.stencil_mask;h!==ea.stencil_mask&&(L.stencilMask(h),ea.stencil_mask=h);h=qa[0];u=qa[1];w=qa[2];if(h!==ta[0]||u!==ta[1]||w!==ta[2])L.stencilFunc(h,u,w),ta[0]=h,ta[1]=u,ta[2]=w;h=da[0];u=da[1];w=da[2];A=da[3];if(h!==X[0]||u!==X[1]||w!==X[2]||A!==X[3])L.stencilOpSeparate(h,u,w,A),X[0]=h,X[1]=u,X[2]=w,X[3]=A;h=G[0];u=G[1];w=G[2];A=G[3];if(h!==M[0]||u!==M[1]||w!==M[2]||A!==M[3])L.stencilOpSeparate(h,u,w,A),M[0]=h,M[1]=u,M[2]=w,M[3]=A;h=C.scissor_enable;h!==ea.scissor_enable&&(h?L.enable(3089):L.disable(3089),
ea.scissor_enable=h);h=O[0];u=O[1];w=O[2];A=O[3];if(h!==P[0]||u!==P[1]||w!==P[2]||A!==P[3])L.scissor(h,u,w,A),P[0]=h,P[1]=u,P[2]=w,P[3]=A;h=ja[0];u=ja[1];w=ja[2];A=ja[3];if(h!==oa[0]||u!==oa[1]||w!==oa[2]||A!==oa[3])L.viewport(h,u,w,A),oa[0]=h,oa[1]=u,oa[2]=w,oa[3]=A}L.disable(2929);ea.depth_enable=!1;if(h=ea.profile)n=performance.now(),l.count++;L.useProgram(k.program);I.setVAO(null);u=E.location;w=J[u];w.buffer||L.enableVertexAttribArray(u);if(w.type!==f.dtype||2!==w.size||w.buffer!==f||!1!==w.normalized||
0!==w.offset||0!==w.stride)L.bindBuffer(34962,f.buffer),L.vertexAttribPointer(u,2,f.dtype,!1,0,0),w.type=f.dtype,w.size=2,w.buffer=f,w.normalized=!1,w.offset=0,w.stride=0;u=d.call(this,H,a,0);"number"!==typeof u&&b.commandRaise(e,g);L.uniform1f(ua.location,u);a=a.color;Q(a)&&4===a.length||b.commandRaise(q,g);L.uniform4f(m.location,a[0],a[1],a[2],a[3]);(a=y.elements)?L.bindBuffer(34963,a.buffer.buffer):I.currentVAO&&(a=v.getElements(I.currentVAO.elements))&&L.bindBuffer(34963,a.buffer.buffer);u=y.primitive;
w=y.offset;a?L.drawElements(u,3,a.type,w<<(a.type-5121>>1)):L.drawArrays(u,w,3);ea.dirty=!0;I.setVAO(null);h&&(l.cpuTime+=performance.now()-n)},scope:function(a,c,b){var e,d,p,h,k,m,g,r,x,t,n,v,D,q,A,z,J,E,I,F;e=C.depth_enable;C.depth_enable=!1;if(d=ea.profile)p=performance.now(),l.count++;h=y.count;y.count=3;k=w.call(this,H,a,b);m=ra[3];ra[3]=k;g=a.color;k=ra[4];ra[4]=g;g=u.buffer;u.buffer=f;r=u.divisor;u.divisor=0;x=u.normalized;u.normalized=!1;t=u.offset;u.offset=0;n=u.size;u.size=0;v=u.state;
u.state=1;D=u.stride;u.stride=0;q=u.type;u.type=f.dtype;A=u.w;u.w=0;z=u.x;u.x=0;J=u.y;u.y=0;E=u.z;u.z=0;I=B.vert;B.vert=2;F=B.frag;B.frag=1;ea.dirty=!0;c(H,a,b);C.depth_enable=e;d&&(l.cpuTime+=performance.now()-p);y.count=h;ra[3]=m;ra[4]=k;u.buffer=g;u.divisor=r;u.normalized=x;u.offset=t;u.size=n;u.state=v;u.stride=D;u.type=q;u.w=A;u.x=z;u.y=J;u.z=E;B.vert=I;B.frag=F;ea.dirty=!0},batch:function(a,e){var d,k,u,w;d=S.next;d!==S.cur&&(d?L.bindFramebuffer(36160,d.framebuffer):L.bindFramebuffer(36160,
null),S.cur=d);if(ea.dirty){var q,B,ga;d=C.dither;d!==ea.dither&&(d?L.enable(3024):L.disable(3024),ea.dither=d);d=C.blend_enable;d!==ea.blend_enable&&(d?L.enable(3042):L.disable(3042),ea.blend_enable=d);d=K[0];q=K[1];B=K[2];ga=K[3];if(d!==t[0]||q!==t[1]||B!==t[2]||ga!==t[3])L.blendColor(d,q,B,ga),t[0]=d,t[1]=q,t[2]=B,t[3]=ga;d=p[0];q=p[1];if(d!==c[0]||q!==c[1])L.blendEquationSeparate(d,q),c[0]=d,c[1]=q;d=D[0];q=D[1];B=D[2];ga=D[3];if(d!==r[0]||q!==r[1]||B!==r[2]||ga!==r[3])L.blendFuncSeparate(d,q,
B,ga),r[0]=d,r[1]=q,r[2]=B,r[3]=ga;d=C.depth_func;d!==ea.depth_func&&(L.depthFunc(d),ea.depth_func=d);d=U[0];q=U[1];if(d!==aa[0]||q!==aa[1])L.depthRange(d,q),aa[0]=d,aa[1]=q;d=C.depth_mask;d!==ea.depth_mask&&(L.depthMask(d),ea.depth_mask=d);d=la[0];q=la[1];B=la[2];ga=la[3];if(d!==na[0]||q!==na[1]||B!==na[2]||ga!==na[3])L.colorMask(d,q,B,ga),na[0]=d,na[1]=q,na[2]=B,na[3]=ga;d=C.cull_enable;d!==ea.cull_enable&&(d?L.enable(2884):L.disable(2884),ea.cull_enable=d);d=C.cull_face;d!==ea.cull_face&&(L.cullFace(d),
ea.cull_face=d);d=C.frontFace;d!==ea.frontFace&&(L.frontFace(d),ea.frontFace=d);d=C.lineWidth;d!==ea.lineWidth&&(L.lineWidth(d),ea.lineWidth=d);d=C.polygonOffset_enable;d!==ea.polygonOffset_enable&&(d?L.enable(32823):L.disable(32823),ea.polygonOffset_enable=d);d=T[0];q=T[1];if(d!==R[0]||q!==R[1])L.polygonOffset(d,q),R[0]=d,R[1]=q;d=C.sample_alpha;d!==ea.sample_alpha&&(d?L.enable(32926):L.disable(32926),ea.sample_alpha=d);d=C.sample_enable;d!==ea.sample_enable&&(d?L.enable(32928):L.disable(32928),
ea.sample_enable=d);d=N[0];q=N[1];if(d!==F[0]||q!==F[1])L.sampleCoverage(d,q),F[0]=d,F[1]=q;d=C.stencil_enable;d!==ea.stencil_enable&&(d?L.enable(2960):L.disable(2960),ea.stencil_enable=d);d=C.stencil_mask;d!==ea.stencil_mask&&(L.stencilMask(d),ea.stencil_mask=d);d=qa[0];q=qa[1];B=qa[2];if(d!==ta[0]||q!==ta[1]||B!==ta[2])L.stencilFunc(d,q,B),ta[0]=d,ta[1]=q,ta[2]=B;d=da[0];q=da[1];B=da[2];ga=da[3];if(d!==X[0]||q!==X[1]||B!==X[2]||ga!==X[3])L.stencilOpSeparate(d,q,B,ga),X[0]=d,X[1]=q,X[2]=B,X[3]=ga;
d=G[0];q=G[1];B=G[2];ga=G[3];if(d!==M[0]||q!==M[1]||B!==M[2]||ga!==M[3])L.stencilOpSeparate(d,q,B,ga),M[0]=d,M[1]=q,M[2]=B,M[3]=ga;d=C.scissor_enable;d!==ea.scissor_enable&&(d?L.enable(3089):L.disable(3089),ea.scissor_enable=d);d=O[0];q=O[1];B=O[2];ga=O[3];if(d!==P[0]||q!==P[1]||B!==P[2]||ga!==P[3])L.scissor(d,q,B,ga),P[0]=d,P[1]=q,P[2]=B,P[3]=ga;d=ja[0];q=ja[1];B=ja[2];ga=ja[3];if(d!==oa[0]||q!==oa[1]||B!==oa[2]||ga!==oa[3])L.viewport(d,q,B,ga),oa[0]=d,oa[1]=q,oa[2]=B,oa[3]=ga}L.disable(2929);ea.depth_enable=
!1;if(d=ea.profile)k=performance.now(),l.count+=e;L.useProgram(z.program);I.setVAO(null);q=E.location;B=J[q];B.buffer||L.enableVertexAttribArray(q);if(B.type!==f.dtype||2!==B.size||B.buffer!==f||!1!==B.normalized||0!==B.offset||0!==B.stride)L.bindBuffer(34962,f.buffer),L.vertexAttribPointer(q,2,f.dtype,!1,0,0),B.type=f.dtype,B.size=2,B.buffer=f,B.normalized=!1,B.offset=0,B.stride=0;u=h.call(this,H,w,u);"number"!==typeof u&&b.commandRaise(A,g);L.uniform1f(ua.location,u);(q=y.elements)?L.bindBuffer(34963,
q.buffer.buffer):I.currentVAO&&(q=v.getElements(I.currentVAO.elements))&&L.bindBuffer(34963,q.buffer.buffer);B=y.primitive;ga=y.offset;for(u=0;u<e;++u){w=a[u];var Hb,ra,V,ca,sa,wa,Ea;Hb=w.color;Q(Hb)&&4===Hb.length||b.commandRaise(n,g);w=Hb[0];V=Hb[1];sa=Hb[2];Hb=Hb[3];u&&ra===w&&ca===V&&wa===sa&&Ea===Hb||(ra=w,ca=V,wa=sa,Ea=Hb,L.uniform4f(m.location,w,V,sa,Hb));q?L.drawElements(B,3,q.type,ga<<(q.type-5121>>1)):L.drawArrays(B,ga,3)}ea.dirty=!0;I.setVAO(null);d&&(l.cpuTime+=performance.now()-k)}}},
"$13,color,position":function(a,b,g,l,k,f,d,e,q,w,u,z,h,A,n,ua){var m,E,J,H,ea,y,v,S,L,Q,C,B,ra,I,K,t,p,c,D,r,la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da;m=a.attributes;E=a.context;J=a.current;H=a.draw;ea=a.framebuffer;y=a.gl;v=a.next;S=a.shader;L=a.uniforms;Q=a.vao;C=v.blend_color;B=J.blend_color;ra=v.blend_equation;I=J.blend_equation;K=v.blend_func;t=J.blend_func;p=v.colorMask;c=J.colorMask;D=v.depth_range;r=J.depth_range;la=v.polygonOffset_offset;na=J.polygonOffset_offset;U=v.sample_coverage;aa=J.sample_coverage;
T=v.scissor_box;R=J.scissor_box;N=v.stencil_func;F=J.stencil_func;O=v.stencil_opBack;P=J.stencil_opBack;qa=v.stencil_opFront;ta=J.stencil_opFront;G=v.viewport;M=J.viewport;da=[1,0,0,1];return{draw:function(a){var h,u,w;a=ea.next;a!==ea.cur&&(a?y.bindFramebuffer(36160,a.framebuffer):y.bindFramebuffer(36160,null),ea.cur=a);if(J.dirty){var q;a=v.dither;a!==J.dither&&(a?y.enable(3024):y.disable(3024),J.dither=a);a=v.blend_enable;a!==J.blend_enable&&(a?y.enable(3042):y.disable(3042),J.blend_enable=a);
a=C[0];u=C[1];w=C[2];q=C[3];if(a!==B[0]||u!==B[1]||w!==B[2]||q!==B[3])y.blendColor(a,u,w,q),B[0]=a,B[1]=u,B[2]=w,B[3]=q;a=ra[0];u=ra[1];if(a!==I[0]||u!==I[1])y.blendEquationSeparate(a,u),I[0]=a,I[1]=u;a=K[0];u=K[1];w=K[2];q=K[3];if(a!==t[0]||u!==t[1]||w!==t[2]||q!==t[3])y.blendFuncSeparate(a,u,w,q),t[0]=a,t[1]=u,t[2]=w,t[3]=q;a=v.depth_enable;a!==J.depth_enable&&(a?y.enable(2929):y.disable(2929),J.depth_enable=a);a=v.depth_func;a!==J.depth_func&&(y.depthFunc(a),J.depth_func=a);a=D[0];u=D[1];if(a!==
r[0]||u!==r[1])y.depthRange(a,u),r[0]=a,r[1]=u;a=v.depth_mask;a!==J.depth_mask&&(y.depthMask(a),J.depth_mask=a);a=p[0];u=p[1];w=p[2];q=p[3];if(a!==c[0]||u!==c[1]||w!==c[2]||q!==c[3])y.colorMask(a,u,w,q),c[0]=a,c[1]=u,c[2]=w,c[3]=q;a=v.cull_enable;a!==J.cull_enable&&(a?y.enable(2884):y.disable(2884),J.cull_enable=a);a=v.cull_face;a!==J.cull_face&&(y.cullFace(a),J.cull_face=a);a=v.frontFace;a!==J.frontFace&&(y.frontFace(a),J.frontFace=a);a=v.polygonOffset_enable;a!==J.polygonOffset_enable&&(a?y.enable(32823):
y.disable(32823),J.polygonOffset_enable=a);a=la[0];u=la[1];if(a!==na[0]||u!==na[1])y.polygonOffset(a,u),na[0]=a,na[1]=u;a=v.sample_alpha;a!==J.sample_alpha&&(a?y.enable(32926):y.disable(32926),J.sample_alpha=a);a=v.sample_enable;a!==J.sample_enable&&(a?y.enable(32928):y.disable(32928),J.sample_enable=a);a=U[0];u=U[1];if(a!==aa[0]||u!==aa[1])y.sampleCoverage(a,u),aa[0]=a,aa[1]=u;a=v.stencil_enable;a!==J.stencil_enable&&(a?y.enable(2960):y.disable(2960),J.stencil_enable=a);a=v.stencil_mask;a!==J.stencil_mask&&
(y.stencilMask(a),J.stencil_mask=a);a=N[0];u=N[1];w=N[2];if(a!==F[0]||u!==F[1]||w!==F[2])y.stencilFunc(a,u,w),F[0]=a,F[1]=u,F[2]=w;a=qa[0];u=qa[1];w=qa[2];q=qa[3];if(a!==ta[0]||u!==ta[1]||w!==ta[2]||q!==ta[3])y.stencilOpSeparate(a,u,w,q),ta[0]=a,ta[1]=u,ta[2]=w,ta[3]=q;a=O[0];u=O[1];w=O[2];q=O[3];if(a!==P[0]||u!==P[1]||w!==P[2]||q!==P[3])y.stencilOpSeparate(a,u,w,q),P[0]=a,P[1]=u,P[2]=w,P[3]=q;a=v.scissor_enable;a!==J.scissor_enable&&(a?y.enable(3089):y.disable(3089),J.scissor_enable=a);a=T[0];u=
T[1];w=T[2];q=T[3];if(a!==R[0]||u!==R[1]||w!==R[2]||q!==R[3])y.scissor(a,u,w,q),R[0]=a,R[1]=u,R[2]=w,R[3]=q;a=G[0];u=G[1];w=G[2];q=G[3];if(a!==M[0]||u!==M[1]||w!==M[2]||q!==M[3])y.viewport(a,u,w,q),M[0]=a,M[1]=u,M[2]=w,M[3]=q}y.lineWidth(1);J.lineWidth=1;if(a=J.profile)h=performance.now(),l.count++;y.useProgram(k.program);Q.setVAO(null);u=ua.location;w=m[u];w.buffer||y.enableVertexAttribArray(u);if(w.type!==f.dtype||2!==w.size||w.buffer!==f||!1!==w.normalized||0!==w.offset||0!==w.stride)y.bindBuffer(34962,
f.buffer),y.vertexAttribPointer(u,2,f.dtype,!1,0,0),w.type=f.dtype,w.size=2,w.buffer=f,w.normalized=!1,w.offset=0,w.stride=0;y.uniform4f(n.location,1,0,0,1);d&&y.bindBuffer(34963,d.buffer.buffer);u=d.primType;w=d.vertCount-0;0<=w||b.commandRaise(e,g);w&&(y.drawElements(u,w,d.type,0<<(d.type-5121>>1)),J.dirty=!0,Q.setVAO(null),a&&(l.cpuTime+=performance.now()-h))},scope:function(a,c,d){var e,p,h,k,m,r,t,n,D,y,A,C,B,z,I,F,G,Q,K,M,N,pa;e=v.lineWidth;v.lineWidth=1;if(p=J.profile)h=performance.now(),l.count++;
k=H.elements;H.elements=q;m=H.offset;H.offset=0;r=q.vertCount-0;0<=r||b.commandRaise(w,g);t=H.count;H.count=r;n=q.primType;r=H.primitive;H.primitive=n;n=L[3];L[3]=da;D=u.buffer;u.buffer=f;y=u.divisor;u.divisor=0;A=u.normalized;u.normalized=!1;C=u.offset;u.offset=0;B=u.size;u.size=0;z=u.state;u.state=1;I=u.stride;u.stride=0;F=u.type;u.type=f.dtype;G=u.w;u.w=0;Q=u.x;u.x=0;K=u.y;u.y=0;M=u.z;u.z=0;N=S.vert;S.vert=2;pa=S.frag;S.frag=1;J.dirty=!0;c(E,a,d);v.lineWidth=e;p&&(l.cpuTime+=performance.now()-
h);H.elements=k;H.offset=m;H.count=t;H.primitive=r;L[3]=n;u.buffer=D;u.divisor=y;u.normalized=A;u.offset=C;u.size=B;u.state=z;u.stride=I;u.type=F;u.w=G;u.x=Q;u.y=K;u.z=M;S.vert=N;S.frag=pa;J.dirty=!0},batch:function(a,d){var e,k,u;e=ea.next;e!==ea.cur&&(e?y.bindFramebuffer(36160,e.framebuffer):y.bindFramebuffer(36160,null),ea.cur=e);if(J.dirty){var w,q;e=v.dither;e!==J.dither&&(e?y.enable(3024):y.disable(3024),J.dither=e);e=v.blend_enable;e!==J.blend_enable&&(e?y.enable(3042):y.disable(3042),J.blend_enable=
e);e=C[0];u=C[1];w=C[2];q=C[3];if(e!==B[0]||u!==B[1]||w!==B[2]||q!==B[3])y.blendColor(e,u,w,q),B[0]=e,B[1]=u,B[2]=w,B[3]=q;e=ra[0];u=ra[1];if(e!==I[0]||u!==I[1])y.blendEquationSeparate(e,u),I[0]=e,I[1]=u;e=K[0];u=K[1];w=K[2];q=K[3];if(e!==t[0]||u!==t[1]||w!==t[2]||q!==t[3])y.blendFuncSeparate(e,u,w,q),t[0]=e,t[1]=u,t[2]=w,t[3]=q;e=v.depth_enable;e!==J.depth_enable&&(e?y.enable(2929):y.disable(2929),J.depth_enable=e);e=v.depth_func;e!==J.depth_func&&(y.depthFunc(e),J.depth_func=e);e=D[0];u=D[1];if(e!==
r[0]||u!==r[1])y.depthRange(e,u),r[0]=e,r[1]=u;e=v.depth_mask;e!==J.depth_mask&&(y.depthMask(e),J.depth_mask=e);e=p[0];u=p[1];w=p[2];q=p[3];if(e!==c[0]||u!==c[1]||w!==c[2]||q!==c[3])y.colorMask(e,u,w,q),c[0]=e,c[1]=u,c[2]=w,c[3]=q;e=v.cull_enable;e!==J.cull_enable&&(e?y.enable(2884):y.disable(2884),J.cull_enable=e);e=v.cull_face;e!==J.cull_face&&(y.cullFace(e),J.cull_face=e);e=v.frontFace;e!==J.frontFace&&(y.frontFace(e),J.frontFace=e);e=v.polygonOffset_enable;e!==J.polygonOffset_enable&&(e?y.enable(32823):
y.disable(32823),J.polygonOffset_enable=e);e=la[0];u=la[1];if(e!==na[0]||u!==na[1])y.polygonOffset(e,u),na[0]=e,na[1]=u;e=v.sample_alpha;e!==J.sample_alpha&&(e?y.enable(32926):y.disable(32926),J.sample_alpha=e);e=v.sample_enable;e!==J.sample_enable&&(e?y.enable(32928):y.disable(32928),J.sample_enable=e);e=U[0];u=U[1];if(e!==aa[0]||u!==aa[1])y.sampleCoverage(e,u),aa[0]=e,aa[1]=u;e=v.stencil_enable;e!==J.stencil_enable&&(e?y.enable(2960):y.disable(2960),J.stencil_enable=e);e=v.stencil_mask;e!==J.stencil_mask&&
(y.stencilMask(e),J.stencil_mask=e);e=N[0];u=N[1];w=N[2];if(e!==F[0]||u!==F[1]||w!==F[2])y.stencilFunc(e,u,w),F[0]=e,F[1]=u,F[2]=w;e=qa[0];u=qa[1];w=qa[2];q=qa[3];if(e!==ta[0]||u!==ta[1]||w!==ta[2]||q!==ta[3])y.stencilOpSeparate(e,u,w,q),ta[0]=e,ta[1]=u,ta[2]=w,ta[3]=q;e=O[0];u=O[1];w=O[2];q=O[3];if(e!==P[0]||u!==P[1]||w!==P[2]||q!==P[3])y.stencilOpSeparate(e,u,w,q),P[0]=e,P[1]=u,P[2]=w,P[3]=q;e=v.scissor_enable;e!==J.scissor_enable&&(e?y.enable(3089):y.disable(3089),J.scissor_enable=e);e=T[0];u=
T[1];w=T[2];q=T[3];if(e!==R[0]||u!==R[1]||w!==R[2]||q!==R[3])y.scissor(e,u,w,q),R[0]=e,R[1]=u,R[2]=w,R[3]=q;e=G[0];u=G[1];w=G[2];q=G[3];if(e!==M[0]||u!==M[1]||w!==M[2]||q!==M[3])y.viewport(e,u,w,q),M[0]=e,M[1]=u,M[2]=w,M[3]=q}y.lineWidth(1);J.lineWidth=1;if(e=J.profile)k=performance.now(),l.count+=d;y.useProgram(z.program);Q.setVAO(null);u=ua.location;w=m[u];w.buffer||y.enableVertexAttribArray(u);if(w.type!==f.dtype||2!==w.size||w.buffer!==f||!1!==w.normalized||0!==w.offset||0!==w.stride)y.bindBuffer(34962,
f.buffer),y.vertexAttribPointer(u,2,f.dtype,!1,0,0),w.type=f.dtype,w.size=2,w.buffer=f,w.normalized=!1,w.offset=0,w.stride=0;y.uniform4f(n.location,1,0,0,1);h&&y.bindBuffer(34963,h.buffer.buffer);w=h.primType;q=h.vertCount-0;0<=q||b.commandRaise(A,g);for(u=0;u<d;++u)q&&y.drawElements(w,q,h.type,0<<(h.type-5121>>1));J.dirty=!0;Q.setVAO(null);e&&(l.cpuTime+=performance.now()-k)}}},"$20,mouse,position,t,texture":function(a,b,g,l,k,f,d,e,q,w,u,z,h,A,n,ua,m,E,J,H,ea,y,v,S,L){var Q,C,B,ra,I,K,t,p,c,D,r,
la,na,U,aa,T,R,N,F,O,P,qa,ta,G,M,da,X,ja,oa,Da,ya,Z,Ca,ia,ka,Ba;Q=a.attributes;C=a.context;B=a.current;ra=a.draw;I=a.elements;K=a.framebuffer;t=a.gl;p=a.isArrayLike;c=a.next;D=a.shader;r=a.uniforms;la=a.vao;na=c.blend_color;U=B.blend_color;aa=c.blend_equation;T=B.blend_equation;R=c.blend_func;N=B.blend_func;F=c.colorMask;O=B.colorMask;P=c.depth_range;qa=B.depth_range;ta=c.polygonOffset_offset;G=B.polygonOffset_offset;M=c.sample_coverage;da=B.sample_coverage;X=c.scissor_box;ja=B.scissor_box;oa=c.stencil_func;
Da=B.stencil_func;ya=c.stencil_opBack;Z=B.stencil_opBack;Ca=c.stencil_opFront;ia=B.stencil_opFront;ka=c.viewport;Ba=B.viewport;return{draw:function(a){var h,m,r,n;h=K.next;h!==K.cur&&(h?t.bindFramebuffer(36160,h.framebuffer):t.bindFramebuffer(36160,null),K.cur=h);if(B.dirty){var D;h=c.dither;h!==B.dither&&(h?t.enable(3024):t.disable(3024),B.dither=h);h=c.blend_enable;h!==B.blend_enable&&(h?t.enable(3042):t.disable(3042),B.blend_enable=h);h=na[0];r=na[1];n=na[2];D=na[3];if(h!==U[0]||r!==U[1]||n!==
U[2]||D!==U[3])t.blendColor(h,r,n,D),U[0]=h,U[1]=r,U[2]=n,U[3]=D;h=aa[0];r=aa[1];if(h!==T[0]||r!==T[1])t.blendEquationSeparate(h,r),T[0]=h,T[1]=r;h=R[0];r=R[1];n=R[2];D=R[3];if(h!==N[0]||r!==N[1]||n!==N[2]||D!==N[3])t.blendFuncSeparate(h,r,n,D),N[0]=h,N[1]=r,N[2]=n,N[3]=D;h=c.depth_enable;h!==B.depth_enable&&(h?t.enable(2929):t.disable(2929),B.depth_enable=h);h=c.depth_func;h!==B.depth_func&&(t.depthFunc(h),B.depth_func=h);h=P[0];r=P[1];if(h!==qa[0]||r!==qa[1])t.depthRange(h,r),qa[0]=h,qa[1]=r;h=
c.depth_mask;h!==B.depth_mask&&(t.depthMask(h),B.depth_mask=h);h=F[0];r=F[1];n=F[2];D=F[3];if(h!==O[0]||r!==O[1]||n!==O[2]||D!==O[3])t.colorMask(h,r,n,D),O[0]=h,O[1]=r,O[2]=n,O[3]=D;h=c.cull_enable;h!==B.cull_enable&&(h?t.enable(2884):t.disable(2884),B.cull_enable=h);h=c.cull_face;h!==B.cull_face&&(t.cullFace(h),B.cull_face=h);h=c.frontFace;h!==B.frontFace&&(t.frontFace(h),B.frontFace=h);h=c.lineWidth;h!==B.lineWidth&&(t.lineWidth(h),B.lineWidth=h);h=c.polygonOffset_enable;h!==B.polygonOffset_enable&&
(h?t.enable(32823):t.disable(32823),B.polygonOffset_enable=h);h=ta[0];r=ta[1];if(h!==G[0]||r!==G[1])t.polygonOffset(h,r),G[0]=h,G[1]=r;h=c.sample_alpha;h!==B.sample_alpha&&(h?t.enable(32926):t.disable(32926),B.sample_alpha=h);h=c.sample_enable;h!==B.sample_enable&&(h?t.enable(32928):t.disable(32928),B.sample_enable=h);h=M[0];r=M[1];if(h!==da[0]||r!==da[1])t.sampleCoverage(h,r),da[0]=h,da[1]=r;h=c.stencil_enable;h!==B.stencil_enable&&(h?t.enable(2960):t.disable(2960),B.stencil_enable=h);h=c.stencil_mask;
h!==B.stencil_mask&&(t.stencilMask(h),B.stencil_mask=h);h=oa[0];r=oa[1];n=oa[2];if(h!==Da[0]||r!==Da[1]||n!==Da[2])t.stencilFunc(h,r,n),Da[0]=h,Da[1]=r,Da[2]=n;h=Ca[0];r=Ca[1];n=Ca[2];D=Ca[3];if(h!==ia[0]||r!==ia[1]||n!==ia[2]||D!==ia[3])t.stencilOpSeparate(h,r,n,D),ia[0]=h,ia[1]=r,ia[2]=n,ia[3]=D;h=ya[0];r=ya[1];n=ya[2];D=ya[3];if(h!==Z[0]||r!==Z[1]||n!==Z[2]||D!==Z[3])t.stencilOpSeparate(h,r,n,D),Z[0]=h,Z[1]=r,Z[2]=n,Z[3]=D;h=c.scissor_enable;h!==B.scissor_enable&&(h?t.enable(3089):t.disable(3089),
B.scissor_enable=h);h=X[0];r=X[1];n=X[2];D=X[3];if(h!==ja[0]||r!==ja[1]||n!==ja[2]||D!==ja[3])t.scissor(h,r,n,D),ja[0]=h,ja[1]=r,ja[2]=n,ja[3]=D;h=ka[0];r=ka[1];n=ka[2];D=ka[3];if(h!==Ba[0]||r!==Ba[1]||n!==Ba[2]||D!==Ba[3])t.viewport(h,r,n,D),Ba[0]=h,Ba[1]=r,Ba[2]=n,Ba[3]=D;B.dirty=!1}if(h=B.profile)m=performance.now(),l.count++;t.useProgram(k.program);la.setVAO(null);r=v.location;n=Q[r];n.buffer||t.enableVertexAttribArray(r);if(n.type!==f.dtype||2!==n.size||n.buffer!==f||!1!==n.normalized||0!==n.offset||
0!==n.stride)t.bindBuffer(34962,f.buffer),t.vertexAttribPointer(r,2,f.dtype,!1,0,0),n.type=f.dtype,n.size=2,n.buffer=f,n.normalized=!1,n.offset=0,n.stride=0;r=d.call(this,C,a,0);p(r)&&2===r.length||b.commandRaise(e,g);t.uniform2f(y.location,r[0],r[1]);a=q.call(this,C,a,0);"number"!==typeof a&&b.commandRaise(w,g);t.uniform1f(S.location,a);t.uniform1i(L.location,u.bind());(a=ra.elements)?t.bindBuffer(34963,a.buffer.buffer):la.currentVAO&&(a=I.getElements(la.currentVAO.elements))&&t.bindBuffer(34963,
a.buffer.buffer);r=ra.primitive;n=ra.offset;a?t.drawElements(r,3,a.type,n<<(a.type-5121>>1)):t.drawArrays(r,n,3);la.setVAO(null);h&&(l.cpuTime+=performance.now()-m);u.unbind()},scope:function(a,c,b){var e,d,p,k,m,g,x,u,t,v,w,q,y,J,E,I,ga,H,F,G;if(e=B.profile)d=performance.now(),l.count++;p=ra.count;ra.count=3;k=z.call(this,C,a,b);m=r[3];r[3]=k;g=h.call(this,C,a,b);k=r[4];r[4]=g;g=r[5];r[5]=A;x=n.buffer;n.buffer=f;u=n.divisor;n.divisor=0;t=n.normalized;n.normalized=!1;v=n.offset;n.offset=0;w=n.size;
n.size=0;q=n.state;n.state=1;y=n.stride;n.stride=0;J=n.type;n.type=f.dtype;E=n.w;n.w=0;I=n.x;n.x=0;ga=n.y;n.y=0;H=n.z;n.z=0;F=D.vert;D.vert=2;G=D.frag;D.frag=1;c(C,a,b);e&&(l.cpuTime+=performance.now()-d);ra.count=p;r[3]=m;r[4]=k;r[5]=g;n.buffer=x;n.divisor=u;n.normalized=t;n.offset=v;n.size=w;n.state=q;n.stride=y;n.type=J;n.w=E;n.x=I;n.y=ga;n.z=H;D.vert=F;D.frag=G},batch:function(a,e){var d,h,k;d=K.next;d!==K.cur&&(d?t.bindFramebuffer(36160,d.framebuffer):t.bindFramebuffer(36160,null),K.cur=d);if(B.dirty){var r,
n,u;d=c.dither;d!==B.dither&&(d?t.enable(3024):t.disable(3024),B.dither=d);d=c.blend_enable;d!==B.blend_enable&&(d?t.enable(3042):t.disable(3042),B.blend_enable=d);d=na[0];r=na[1];n=na[2];u=na[3];if(d!==U[0]||r!==U[1]||n!==U[2]||u!==U[3])t.blendColor(d,r,n,u),U[0]=d,U[1]=r,U[2]=n,U[3]=u;d=aa[0];r=aa[1];if(d!==T[0]||r!==T[1])t.blendEquationSeparate(d,r),T[0]=d,T[1]=r;d=R[0];r=R[1];n=R[2];u=R[3];if(d!==N[0]||r!==N[1]||n!==N[2]||u!==N[3])t.blendFuncSeparate(d,r,n,u),N[0]=d,N[1]=r,N[2]=n,N[3]=u;d=c.depth_enable;
d!==B.depth_enable&&(d?t.enable(2929):t.disable(2929),B.depth_enable=d);d=c.depth_func;d!==B.depth_func&&(t.depthFunc(d),B.depth_func=d);d=P[0];r=P[1];if(d!==qa[0]||r!==qa[1])t.depthRange(d,r),qa[0]=d,qa[1]=r;d=c.depth_mask;d!==B.depth_mask&&(t.depthMask(d),B.depth_mask=d);d=F[0];r=F[1];n=F[2];u=F[3];if(d!==O[0]||r!==O[1]||n!==O[2]||u!==O[3])t.colorMask(d,r,n,u),O[0]=d,O[1]=r,O[2]=n,O[3]=u;d=c.cull_enable;d!==B.cull_enable&&(d?t.enable(2884):t.disable(2884),B.cull_enable=d);d=c.cull_face;d!==B.cull_face&&
(t.cullFace(d),B.cull_face=d);d=c.frontFace;d!==B.frontFace&&(t.frontFace(d),B.frontFace=d);d=c.lineWidth;d!==B.lineWidth&&(t.lineWidth(d),B.lineWidth=d);d=c.polygonOffset_enable;d!==B.polygonOffset_enable&&(d?t.enable(32823):t.disable(32823),B.polygonOffset_enable=d);d=ta[0];r=ta[1];if(d!==G[0]||r!==G[1])t.polygonOffset(d,r),G[0]=d,G[1]=r;d=c.sample_alpha;d!==B.sample_alpha&&(d?t.enable(32926):t.disable(32926),B.sample_alpha=d);d=c.sample_enable;d!==B.sample_enable&&(d?t.enable(32928):t.disable(32928),
B.sample_enable=d);d=M[0];r=M[1];if(d!==da[0]||r!==da[1])t.sampleCoverage(d,r),da[0]=d,da[1]=r;d=c.stencil_enable;d!==B.stencil_enable&&(d?t.enable(2960):t.disable(2960),B.stencil_enable=d);d=c.stencil_mask;d!==B.stencil_mask&&(t.stencilMask(d),B.stencil_mask=d);d=oa[0];r=oa[1];n=oa[2];if(d!==Da[0]||r!==Da[1]||n!==Da[2])t.stencilFunc(d,r,n),Da[0]=d,Da[1]=r,Da[2]=n;d=Ca[0];r=Ca[1];n=Ca[2];u=Ca[3];if(d!==ia[0]||r!==ia[1]||n!==ia[2]||u!==ia[3])t.stencilOpSeparate(d,r,n,u),ia[0]=d,ia[1]=r,ia[2]=n,ia[3]=
u;d=ya[0];r=ya[1];n=ya[2];u=ya[3];if(d!==Z[0]||r!==Z[1]||n!==Z[2]||u!==Z[3])t.stencilOpSeparate(d,r,n,u),Z[0]=d,Z[1]=r,Z[2]=n,Z[3]=u;d=c.scissor_enable;d!==B.scissor_enable&&(d?t.enable(3089):t.disable(3089),B.scissor_enable=d);d=X[0];r=X[1];n=X[2];u=X[3];if(d!==ja[0]||r!==ja[1]||n!==ja[2]||u!==ja[3])t.scissor(d,r,n,u),ja[0]=d,ja[1]=r,ja[2]=n,ja[3]=u;d=ka[0];r=ka[1];n=ka[2];u=ka[3];if(d!==Ba[0]||r!==Ba[1]||n!==Ba[2]||u!==Ba[3])t.viewport(d,r,n,u),Ba[0]=d,Ba[1]=r,Ba[2]=n,Ba[3]=u;B.dirty=!1}if(d=B.profile)h=
performance.now(),l.count+=e;t.useProgram(ua.program);la.setVAO(null);r=v.location;n=Q[r];n.buffer||t.enableVertexAttribArray(r);if(n.type!==f.dtype||2!==n.size||n.buffer!==f||!1!==n.normalized||0!==n.offset||0!==n.stride)t.bindBuffer(34962,f.buffer),t.vertexAttribPointer(r,2,f.dtype,!1,0,0),n.type=f.dtype,n.size=2,n.buffer=f,n.normalized=!1,n.offset=0,n.stride=0;r=m.call(this,C,void 0,k);p(r)&&2===r.length||b.commandRaise(E,g);t.uniform2f(y.location,r[0],r[1]);k=J.call(this,C,void 0,k);"number"!==
typeof k&&b.commandRaise(H,g);t.uniform1f(S.location,k);t.uniform1i(L.location,ea.bind());(r=ra.elements)?t.bindBuffer(34963,r.buffer.buffer):la.currentVAO&&(r=I.getElements(la.currentVAO.elements))&&t.bindBuffer(34963,r.buffer.buffer);n=ra.primitive;u=ra.offset;for(k=0;k<e;++k)r?t.drawElements(n,3,r.type,u<<(r.type-5121>>1)):t.drawArrays(n,u,3);ea.unbind();la.setVAO(null);d&&(l.cpuTime+=performance.now()-h)}}}}},{}],26:[function(g,q,z){var a=g("./sorted-object-keys");q.exports=function(b,g){for(var l=
a(g),k=0;k<l.length;++k)b[l[k]]=g[l[k]];return b}},{"./sorted-object-keys":35}],27:[function(g,q,z){function a(a,b,f,d,e,g){for(var x=0;x<b;++x)for(var u=a[x],q=0;q<f;++q)for(var h=u[q],A=0;A<d;++A)e[g++]=h[A]}function b(l,k,f,d,e){for(var g=1,x=f+1;x<k.length;++x)g*=k[x];var u=k[f];if(4===k.length-f){var q=k[f+1],h=k[f+2];k=k[f+3];for(x=0;x<u;++x)a(l[x],q,h,k,d,e),e+=g}else for(x=0;x<u;++x)b(l[x],k,f+1,d,e),e+=g}var x=g("./pool");q.exports={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);
return b},flatten:function(l,k,f,d){var e=1;if(k.length)for(var g=0;g<k.length;++g)e*=k[g];else e=0;f=d||x.allocType(f,e);switch(k.length){case 0:break;case 1:d=k[0];for(k=0;k<d;++k)f[k]=l[k];break;case 2:d=k[0];k=k[1];for(g=e=0;g<d;++g)for(var w=l[g],u=0;u<k;++u)f[e++]=w[u];break;case 3:a(l,k[0],k[1],k[2],f,0);break;default:b(l,k,0,f,0)}return f}}},{"./pool":33}],28:[function(g,q,z){var a=g("./is-typed-array");q.exports=function(b){return Array.isArray(b)||a(b)}},{"./is-typed-array":31}],29:[function(g,
q,z){var a=g("./is-typed-array");q.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||a(b.data))}},{"./is-typed-array":31}],30:[function(g,q,z){q.exports=function(a){return!(a&a-1)&&!!a}},{}],31:[function(g,q,z){q.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||
a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],32:[function(g,q,z){q.exports=function(a,b){for(var g=Array(a),l=0;l<a;++l)g[l]=b(l);return g}},{}],33:[function(g,q,z){function a(a){var b,f;b=(65535<a)<<4;a>>>=b;f=(255<a)<<3;a>>>=f;b|=f;f=(15<a)<<2;a>>>=f;b|=f;f=(3<a)<<1;return b|f|a>>>f>>1}function b(){function b(d){a:{for(var e=16;268435456>=e;e*=16)if(d<=e){d=e;break a}d=0}e=f[a(d)>>2];return 0<e.length?e.pop():new ArrayBuffer(d)}
function k(b){f[a(b.byteLength)>>2].push(b)}var f=x(8,function(){return[]});return{alloc:b,free:k,allocType:function(a,e){var f=null;switch(a){case 5120:f=new Int8Array(b(e),0,e);break;case 5121:f=new Uint8Array(b(e),0,e);break;case 5122:f=new Int16Array(b(2*e),0,e);break;case 5123:f=new Uint16Array(b(2*e),0,e);break;case 5124:f=new Int32Array(b(4*e),0,e);break;case 5125:f=new Uint32Array(b(4*e),0,e);break;case 5126:f=new Float32Array(b(4*e),0,e);break;default:return null}return f.length!==e?f.subarray(0,
e):f},freeType:function(a){k(a.buffer)}}}var x=g("./loop");g=b();g.zero=b();q.exports=g},{"./loop":32}],34:[function(g,q,z){q.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],35:[function(g,q,z){q.exports=function(a){return Object.keys(a).sort()}},{}],36:[function(g,q,z){var a=g("./pool"),b=new Float32Array(1),
x=new Uint32Array(b.buffer);q.exports=function(l){for(var k=a.allocType(5123,l.length),f=0;f<l.length;++f)if(isNaN(l[f]))k[f]=65535;else if(Infinity===l[f])k[f]=31744;else if(-Infinity===l[f])k[f]=64512;else{b[0]=l[f];var d=x[0],e=d>>>31<<15,g=(d<<1>>>24)-127,d=d>>13&1023;k[f]=-24>g?e:-14>g?e+(d+1024>>-14-g):15<g?e+31744:e+(g+15<<10)+d}return k}},{"./pool":33}],37:[function(g,q,z){var a=g("./sorted-object-keys");q.exports=function(b){return a(b).map(function(a){return b[a]})}},{"./sorted-object-keys":35}],
38:[function(g,q,z){function a(a,b,k){function l(){var b=window.innerWidth,e=window.innerHeight;a!==document.body&&(e=g.getBoundingClientRect(),b=e.right-e.left,e=e.bottom-e.top);g.width=k*b;g.height=k*e}var g=document.createElement("canvas");f(g.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(g);a===document.body&&(g.style.position="absolute",f(a.style,{margin:0,padding:0}));var x;a!==document.body&&"function"===typeof ResizeObserver?(x=new ResizeObserver(function(){setTimeout(l)}),
x.observe(a)):window.addEventListener("resize",l,!1);l();return{canvas:g,onDestroy:function(){x?x.disconnect():window.removeEventListener("resize",l);a.removeChild(g)}}}function b(a,b){function f(k){try{return a.getContext(k,b)}catch(l){return null}}return f("webgl")||f("experimental-webgl")||f("webgl-experimental")}function x(a){if("string"===typeof a)return a.split();k(Array.isArray(a),"invalid extension array");return a}function l(a){return"string"===typeof a?(k("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(a)):a}var k=g("./util/check"),f=g("./util/extend");q.exports=function(d){var e=d||{},f,g,u,q;d={};var h=[],A=[],n="undefined"===typeof window?1:window.devicePixelRatio,z=!1,m=function(a){a&&k.raise(a)},E=function(){};"string"===typeof e?(k("undefined"!==typeof document,"selector queries only supported in DOM environments"),f=document.querySelector(e),k(f,"invalid query string for element")):"object"===typeof e?"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&
"function"===typeof e.getBoundingClientRect?f=e:"function"===typeof e.drawArrays||"function"===typeof e.drawElements?(q=e,u=q.canvas):(k.constructor(e),"gl"in e?q=e.gl:"canvas"in e?u=l(e.canvas):"container"in e&&(g=l(e.container)),"attributes"in e&&(d=e.attributes,k.type(d,"object","invalid context attributes")),"extensions"in e&&(h=x(e.extensions)),"optionalExtensions"in e&&(A=x(e.optionalExtensions)),"onDone"in e&&(k.type(e.onDone,"function","invalid or missing onDone callback"),m=e.onDone),"profile"in
e&&(z=!!e.profile),"pixelRatio"in e&&(n=+e.pixelRatio,k(0<n,"invalid pixel ratio"))):k.raise("invalid arguments to regl");f&&("canvas"===f.nodeName.toLowerCase()?u=f:g=f);if(!q){if(!u){k("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");f=a(g||document.body,m,n);if(!f)return null;u=f.canvas;E=f.onDestroy}void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!0);q=b(u,d)}return q?{gl:q,canvas:u,container:g,extensions:h,optionalExtensions:A,pixelRatio:n,
profile:z,onDone:m,onDestroy:E}:(E(),m("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":22,"./util/extend":26}],39:[function(g,q,z){function a(a,g,l){return Math.sqrt(Math.pow(a,2)+Math.pow(g,2)+Math.pow(l,2))}q.exports=function(b,g){for(var l=g.length,k=b.length,f=Array(l),d=0;d<l;++d)f[d]=[0,0,0];for(d=0;d<k;++d){var e=b[d],q=g[e[0]],w=g[e[1]],u=g[e[2]],z=q[0]-w[0],h=q[1]-w[1],A=q[2]-w[2],n=a(z,h,A),ua=w[0]-u[0],m=w[1]-u[1],E=w[2]-
u[2],J=a(ua,m,E),H=a(u[0]-q[0],u[1]-q[1],u[2]-q[2]);1E-6>Math.min(n,J,H)||(u=.5*(n+J+H),w=Math.sqrt((u-n)*(u-J)*(u-H)/u),q=h*E-A*m,A=A*ua-z*E,z=z*m-h*ua,h=a(q,A,z),q/=h,A/=h,z/=h,h=f[e[0]],J=Math.atan2(w,u-J),ua=A,m=z,h[0]+=J*q,h[1]+=J*ua,h[2]+=J*m,J=f[e[1]],H=Math.atan2(w,u-H),h=A,ua=z,J[0]+=H*q,J[1]+=H*h,J[2]+=H*ua,e=f[e[2]],n=Math.atan2(w,u-n),u=A,w=z,e[0]+=n*q,e[1]+=n*u,e[2]+=n*w)}for(d=0;d<l;++d)k=f[d],n=Math.sqrt(Math.pow(k[0],2)+Math.pow(k[1],2)+Math.pow(k[2],2)),1E-8>n?(k[0]=1,k[1]=0,k[2]=
0):(k[0]/=n,k[1]/=n,k[2]/=n);return f}},{}],40:[function(g,q,z){function a(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=b);return[a,a===b?0:4-a%4]}function b(a,b,e){for(var k=[],l=b;l<e;l+=3)b=(a[l]<<16&16711680)+(a[l+1]<<8&65280)+(a[l+2]&255),k.push(x[b>>18&63]+x[b>>12&63]+x[b>>6&63]+x[b&63]);return k.join("")}z.byteLength=function(b){b=a(b);var d=b[1];return 3*(b[0]+d)/4-d};z.toByteArray=function(b){var d,e=a(b);d=e[0];var e=
e[1],g=new k(3*(d+e)/4-e),x=0,u=0<e?d-4:d,q;for(q=0;q<u;q+=4)d=l[b.charCodeAt(q)]<<18|l[b.charCodeAt(q+1)]<<12|l[b.charCodeAt(q+2)]<<6|l[b.charCodeAt(q+3)],g[x++]=d>>16&255,g[x++]=d>>8&255,g[x++]=d&255;2===e&&(d=l[b.charCodeAt(q)]<<2|l[b.charCodeAt(q+1)]>>4,g[x++]=d&255);1===e&&(d=l[b.charCodeAt(q)]<<10|l[b.charCodeAt(q+1)]<<4|l[b.charCodeAt(q+2)]>>2,g[x++]=d>>8&255,g[x++]=d&255);return g};z.fromByteArray=function(a){for(var d=a.length,e=d%3,k=[],l=0,g=d-e;l<g;l+=16383)k.push(b(a,l,l+16383>g?g:l+
16383));1===e?(a=a[d-1],k.push(x[a>>2]+x[a<<4&63]+"==")):2===e&&(a=(a[d-2]<<8)+a[d-1],k.push(x[a>>10]+x[a>>4&63]+x[a<<2&63]+"="));return k.join("")};var x=[],l=[],k="undefined"!==typeof Uint8Array?Uint8Array:Array;for(g=0;64>g;++g)x[g]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g],l["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(g)]=g;l[45]=62;l[95]=63},{}],41:[function(g,q,z){function a(a){var b=32;(a&=-a)&&b--;a&65535&&(b-=16);a&16711935&&(b-=
8);a&252645135&&(b-=4);a&858993459&&(b-=2);a&1431655765&&--b;return b}"use restrict";z.INT_BITS=32;z.INT_MAX=2147483647;z.INT_MIN=-2147483648;z.sign=function(a){return(0<a)-(0>a)};z.abs=function(a){var b=a>>31;return(a^b)-b};z.min=function(a,b){return b^(a^b)&-(a<b)};z.max=function(a,b){return a^(a^b)&-(a<b)};z.isPow2=function(a){return!(a&a-1)&&!!a};z.log2=function(a){var b,k;b=(65535<a)<<4;a>>>=b;k=(255<a)<<3;a>>>=k;b|=k;k=(15<a)<<2;a>>>=k;b|=k;k=(3<a)<<1;return b|k|a>>>k>>1};z.log10=function(a){return 1E9<=
a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};z.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};z.countTrailingZeros=a;z.nextPow2=function(a){a+=0===a;--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};z.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};z.parity=function(a){a^=a>>>16;a^=a>>>8;a=(a^a>>>4)&15;return 27030>>>a&1};var b=Array(256);(function(a){for(var b=
0;256>b;++b){for(var k=b,f=b,d=7,k=k>>>1;k;k>>>=1)f<<=1,f|=k&1,--d;a[b]=f<<d&255}})(b);z.reverse=function(a){return b[a&255]<<24|b[a>>>8&255]<<16|b[a>>>16&255]<<8|b[a>>>24&255]};z.interleave2=function(a,b){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b&=65535;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1};z.deinterleave2=function(a,b){a=a>>>b&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>
4)&16711935;return((a|a>>>16)&65535)<<16>>16};z.interleave3=function(a,b,k){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;b=(b|b<<4)&3272356035;a=(a|a<<2)&1227133513|((b|b<<2)&1227133513)<<1;k&=1023;k=(k|k<<16)&4278190335;k=(k|k<<8)&251719695;k=(k|k<<4)&3272356035;return a|((k|k<<2)&1227133513)<<2};z.deinterleave3=function(a,b){a=a>>>b&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|
a>>>16)&1023)<<22>>22};z.nextCombination=function(b){var g=b|b-1;return g+1|(~g&-~g)-1>>>a(b)+1}},{}],42:[function(g,q,z){(function(a,b){function x(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(c){return!1}}function l(a,c){if((b.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError("Invalid typed array length");b.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(c),
a.__proto__=b.prototype):(null===a&&(a=new b(c)),a.length=c);return a}function b(a,c,e){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(a,c,e);if("number"===typeof a){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return d(this,a)}return k(this,a,c,e)}function k(a,c,d,f){if("number"===typeof c)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;
if(0>d||c.byteLength<d)throw new RangeError("'offset' is out of bounds");if(c.byteLength<d+(f||0))throw new RangeError("'length' is out of bounds");c=void 0===d&&void 0===f?new Uint8Array(c):void 0===f?new Uint8Array(c,d):new Uint8Array(c,d,f);b.TYPED_ARRAY_SUPPORT?(a=c,a.__proto__=b.prototype):a=e(a,c);return a}if("string"===typeof c){f=a;a=d;if("string"!==typeof a||""===a)a="utf8";if(!b.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');d=u(c,a)|0;f=l(f,d);c=f.write(c,
a);c!==d&&(f=f.slice(0,c));return f}return q(a,c)}function f(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function d(a,c){f(c);a=l(a,0>c?0:w(c)|0);if(!b.TYPED_ARRAY_SUPPORT)for(var d=0;d<c;++d)a[d]=0;return a}function e(a,c){var b=0>c.length?0:w(c.length)|0;a=l(a,b);for(var d=0;d<b;d+=1)a[d]=c[d]&255;return a}function q(a,c){if(b.isBuffer(c)){var d=w(c.length)|0;a=l(a,d);if(0===a.length)return a;
c.copy(a,0,0,d);return a}if(c){if("undefined"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return(d="number"!==typeof c.length)||(d=c.length,d=d!==d),d?l(a,0):e(a,c);if("Buffer"===c.type&&I(c.data))return e(a,c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function w(a){if(a>=(b.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(b.TYPED_ARRAY_SUPPORT?
2147483647:1073741823).toString(16)+" bytes");return a|0}function u(a,c){if(b.isBuffer(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var d=a.length;if(0===d)return 0;for(var e=!1;;)switch(c){case "ascii":case "latin1":case "binary":return d;case "utf8":case "utf-8":case void 0:return L(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
d;case "hex":return d>>>1;case "base64":return B.toByteArray(S(a)).length;default:if(e)return L(a).length;c=(""+c).toLowerCase();e=!0}}function pa(a,c,b){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===b||b>this.length)b=this.length;if(0>=b)return"";b>>>=0;c>>>=0;if(b<=c)return"";for(a||(a="utf8");;)switch(a){case "hex":a=c;c=b;b=this.length;if(!a||0>a)a=0;if(!c||0>c||c>b)c=b;d="";for(b=a;b<c;++b)a=d,d=this[b],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return ua(this,
c,b);case "ascii":a="";for(b=Math.min(this.length,b);c<b;++c)a+=String.fromCharCode(this[c]&127);return a;case "latin1":case "binary":a="";for(b=Math.min(this.length,b);c<b;++c)a+=String.fromCharCode(this[c]);return a;case "base64":return c=0===c&&b===this.length?B.fromByteArray(this):B.fromByteArray(this.slice(c,b)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,b);b="";for(a=0;a<c.length;a+=2)b+=String.fromCharCode(c[a]+256*c[a+1]);return b;default:if(d)throw new TypeError("Unknown encoding: "+
a);a=(a+"").toLowerCase();d=!0}}function h(a,c,b){var d=a[c];a[c]=a[b];a[b]=d}function A(a,c,d,e,f){if(0===a.length)return-1;"string"===typeof d?(e=d,d=0):2147483647<d?d=2147483647:-2147483648>d&&(d=-2147483648);d=+d;isNaN(d)&&(d=f?0:a.length-1);0>d&&(d=a.length+d);if(d>=a.length){if(f)return-1;d=a.length-1}else if(0>d)if(f)d=0;else return-1;"string"===typeof c&&(c=b.from(c,e));if(b.isBuffer(c))return 0===c.length?-1:n(a,c,d,e,f);if("number"===typeof c)return c&=255,b.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(a,c,d):Uint8Array.prototype.lastIndexOf.call(a,c,d):n(a,[c],d,e,f);throw new TypeError("val must be string, number or Buffer");}function n(a,c,b,d,e){function f(a,c){return 1===h?a[c]:a.readUInt16BE(c*h)}var h=1,k=a.length,g=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>c.length)return-1;h=2;k/=2;g/=2;b/=2}if(e)for(d=-1;b<k;b++)if(f(a,b)===f(c,-1===
d?0:b-d)){if(-1===d&&(d=b),b-d+1===g)return d*h}else-1!==d&&(b-=b-d),d=-1;else for(b+g>k&&(b=k-g);0<=b;b--){k=!0;for(d=0;d<g;d++)if(f(a,b+d)!==f(c,d)){k=!1;break}if(k)return b}return-1}function ua(a,c,b){b=Math.min(a.length,b);for(var d=[];c<b;){var e=a[c],f=null,h=239<e?4:223<e?3:191<e?2:1;if(c+h<=b){var k,g,m;switch(h){case 1:128>e&&(f=e);break;case 2:k=a[c+1];128===(k&192)&&(e=(e&31)<<6|k&63,127<e&&(f=e));break;case 3:k=a[c+1];g=a[c+2];128===(k&192)&&128===(g&192)&&(e=(e&15)<<12|(k&63)<<6|g&63,
2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:k=a[c+1],g=a[c+2],m=a[c+3],128===(k&192)&&128===(g&192)&&128===(m&192)&&(e=(e&15)<<18|(k&63)<<12|(g&63)<<6|m&63,65535<e&&1114112>e&&(f=e))}}null===f?(f=65533,h=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);c+=h}a=d.length;if(a<=K)d=String.fromCharCode.apply(String,d);else{b="";for(c=0;c<a;)b+=String.fromCharCode.apply(String,d.slice(c,c+=K));d=b}return d}function m(a,c,b){if(0!==a%1||0>a)throw new RangeError("offset is not uint");
if(a+c>b)throw new RangeError("Trying to access beyond buffer length");}function E(a,c,d,e,f,h){if(!b.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>f||c<h)throw new RangeError('"value" argument is out of bounds');if(d+e>a.length)throw new RangeError("Index out of range");}function J(a,c,b,d){0>c&&(c=65535+c+1);for(var e=0,f=Math.min(a.length-b,2);e<f;++e)a[b+e]=(c&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function H(a,c,b,d){0>c&&(c=4294967295+c+1);for(var e=0,f=Math.min(a.length-
b,4);e<f;++e)a[b+e]=c>>>8*(d?e:3-e)&255}function ea(a,c,b,d,e,f){if(b+d>a.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("Index out of range");}function y(a,c,b,d,e){e||ea(a,c,b,4,3.4028234663852886E38,-3.4028234663852886E38);ra.write(a,c,b,d,23,4);return b+4}function v(a,c,b,d,e){e||ea(a,c,b,8,1.7976931348623157E308,-1.7976931348623157E308);ra.write(a,c,b,d,52,8);return b+8}function S(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(t,"");if(2>a.length)return"";
for(;0!==a.length%4;)a+="=";return a}function L(a,c){c=c||Infinity;for(var b,d=a.length,e=null,f=[],h=0;h<d;++h){b=a.charCodeAt(h);if(55295<b&&57344>b){if(!e){if(56319<b){-1<(c-=3)&&f.push(239,191,189);continue}else if(h+1===d){-1<(c-=3)&&f.push(239,191,189);continue}e=b;continue}if(56320>b){-1<(c-=3)&&f.push(239,191,189);e=b;continue}b=(e-55296<<10|b-56320)+65536}else e&&-1<(c-=3)&&f.push(239,191,189);e=null;if(128>b){if(0>--c)break;f.push(b)}else if(2048>b){if(0>(c-=2))break;f.push(b>>6|192,b&63|
128)}else if(65536>b){if(0>(c-=3))break;f.push(b>>12|224,b>>6&63|128,b&63|128)}else if(1114112>b){if(0>(c-=4))break;f.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return f}function Q(a){for(var c=[],b=0;b<a.length;++b)c.push(a.charCodeAt(b)&255);return c}function C(a,c,b,d){for(var e=0;e<d&&!(e+b>=c.length||e>=a.length);++e)c[e+b]=a[e];return e}var B=g("base64-js"),ra=g("ieee754"),I=g("isarray");z.Buffer=b;z.SlowBuffer=function(a){+a!=a&&(a=0);return b.alloc(+a)};
z.INSPECT_MAX_BYTES=50;b.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:x();z.kMaxLength=b.TYPED_ARRAY_SUPPORT?2147483647:1073741823;b.poolSize=8192;b._augment=function(a){a.__proto__=b.prototype;return a};b.from=function(a,c,b){return k(null,a,c,b)};b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol(),"undefined"!==typeof Symbol&&Symbol.species&&b[Symbol.species]===b&&($jscomp.initSymbol(),
Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})));b.alloc=function(a,c,b){f(a);a=0>=a?l(null,a):void 0!==c?"string"===typeof b?l(null,a).fill(c,b):l(null,a).fill(c):l(null,a);return a};b.allocUnsafe=function(a){return d(null,a)};b.allocUnsafeSlow=function(a){return d(null,a)};b.isBuffer=function(a){return!(null==a||!a._isBuffer)};b.compare=function(a,c){if(!b.isBuffer(a)||!b.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(a===c)return 0;for(var d=a.length,e=c.length,
f=0,h=Math.min(d,e);f<h;++f)if(a[f]!==c[f]){d=a[f];e=c[f];break}return d<e?-1:e<d?1:0};b.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};b.concat=function(a,c){if(!I(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return b.alloc(0);var d;if(void 0===c)for(d=c=0;d<a.length;++d)c+=a[d].length;
var e=b.allocUnsafe(c),f=0;for(d=0;d<a.length;++d){var h=a[d];if(!b.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(e,f);f+=h.length}return e};b.byteLength=u;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<a;c+=2)h(this,c,c+1);return this};b.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var c=0;c<a;c+=4)h(this,c,c+3),h(this,c+1,c+2);return this};b.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<a;c+=8)h(this,c,c+7),h(this,c+1,c+6),h(this,c+2,c+5),h(this,c+3,c+4);return this};b.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?ua(this,0,a):pa.apply(this,arguments)};b.prototype.equals=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");
return this===a?!0:0===b.compare(this,a)};b.prototype.inspect=function(){var a="",c=z.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(a+=" ... "));return"<Buffer "+a+">"};b.prototype.compare=function(a,c,d,e,f){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");void 0===c&&(c=0);void 0===d&&(d=a?a.length:0);void 0===e&&(e=0);void 0===f&&(f=this.length);if(0>c||d>a.length||0>e||f>this.length)throw new RangeError("out of range index");
if(e>=f&&c>=d)return 0;if(e>=f)return-1;if(c>=d)return 1;c>>>=0;d>>>=0;e>>>=0;f>>>=0;if(this===a)return 0;var h=f-e,k=d-c,g=Math.min(h,k);e=this.slice(e,f);a=a.slice(c,d);for(c=0;c<g;++c)if(e[c]!==a[c]){h=e[c];k=a[c];break}return h<k?-1:k<h?1:0};b.prototype.includes=function(a,c,b){return-1!==this.indexOf(a,c,b)};b.prototype.indexOf=function(a,c,b){return A(this,a,c,b,!0)};b.prototype.lastIndexOf=function(a,c,b){return A(this,a,c,b,!1)};b.prototype.write=function(a,c,b,d){if(void 0===c)d="utf8",b=
this.length,c=0;else if(void 0===b&&"string"===typeof c)d=c,b=this.length,c=0;else if(isFinite(c))c|=0,isFinite(b)?(b|=0,void 0===d&&(d="utf8")):(d=b,b=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-c;if(void 0===b||b>e)b=e;if(0<a.length&&(0>b||0>c)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{c=Number(c)||0;d=this.length-c;b?(b=Number(b),b>d&&(b=
d)):b=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");b>d/2&&(b=d/2);for(d=0;d<b;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[c+d]=e}a=d}return a;case "utf8":case "utf-8":return C(L(a,this.length-c),this,c,b);case "ascii":return C(Q(a),this,c,b);case "latin1":case "binary":return C(Q(a),this,c,b);case "base64":return C(B.toByteArray(S(a)),this,c,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.length-c;for(var f=void 0,f=e=void 0,h=[],k=0;k<
a.length&&!(0>(d-=2));++k)f=a.charCodeAt(k),e=f>>8,f%=256,h.push(f),h.push(e);return C(h,this,c,b);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;b.prototype.slice=function(a,c){var d=this.length;a=~~a;c=void 0===c?d:~~c;0>a?(a+=d,0>a&&(a=0)):a>d&&(a=d);0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);c<a&&(c=a);if(b.TYPED_ARRAY_SUPPORT)d=this.subarray(a,c),d.__proto__=
b.prototype;else for(var e=c-a,d=new b(e,void 0),f=0;f<e;++f)d[f]=this[f+a];return d};b.prototype.readUIntLE=function(a,c,b){a|=0;c|=0;b||m(a,c,this.length);b=this[a];for(var d=1,e=0;++e<c&&(d*=256);)b+=this[a+e]*d;return b};b.prototype.readUIntBE=function(a,c,b){a|=0;c|=0;b||m(a,c,this.length);b=this[a+--c];for(var d=1;0<c&&(d*=256);)b+=this[a+--c]*d;return b};b.prototype.readUInt8=function(a,c){c||m(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,c){c||m(a,2,this.length);return this[a]|
this[a+1]<<8};b.prototype.readUInt16BE=function(a,c){c||m(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,c){c||m(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};b.prototype.readUInt32BE=function(a,c){c||m(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,c,b){a|=0;c|=0;b||m(a,c,this.length);b=this[a];for(var d=1,e=0;++e<c&&(d*=256);)b+=this[a+e]*d;b>=128*d&&(b-=Math.pow(2,
8*c));return b};b.prototype.readIntBE=function(a,c,b){a|=0;c|=0;b||m(a,c,this.length);b=c;for(var d=1,e=this[a+--b];0<b&&(d*=256);)e+=this[a+--b]*d;e>=128*d&&(e-=Math.pow(2,8*c));return e};b.prototype.readInt8=function(a,c){c||m(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,c){c||m(a,2,this.length);var b=this[a]|this[a+1]<<8;return b&32768?b|4294901760:b};b.prototype.readInt16BE=function(a,c){c||m(a,2,this.length);var b=this[a+1]|this[a]<<8;return b&
32768?b|4294901760:b};b.prototype.readInt32LE=function(a,c){c||m(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,c){c||m(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,c){c||m(a,4,this.length);return ra.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,c){c||m(a,4,this.length);return ra.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,c){c||m(a,8,this.length);
return ra.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,c){c||m(a,8,this.length);return ra.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,c,b,d){a=+a;c|=0;b|=0;d||E(this,a,c,b,Math.pow(2,8*b)-1,0);d=1;var e=0;for(this[c]=a&255;++e<b&&(d*=256);)this[c+e]=a/d&255;return c+b};b.prototype.writeUIntBE=function(a,c,b,d){a=+a;c|=0;b|=0;d||E(this,a,c,b,Math.pow(2,8*b)-1,0);d=b-1;var e=1;for(this[c+d]=a&255;0<=--d&&(e*=256);)this[c+d]=a/e&255;return c+b};b.prototype.writeUInt8=function(a,
c,d){a=+a;c|=0;d||E(this,a,c,1,255,0);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[c]=a&255;return c+1};b.prototype.writeUInt16LE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8):J(this,a,c,!0);return c+2};b.prototype.writeUInt16BE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,2,65535,0);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):J(this,a,c,!1);return c+2};b.prototype.writeUInt32LE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,4,4294967295,0);
b.TYPED_ARRAY_SUPPORT?(this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255):H(this,a,c,!0);return c+4};b.prototype.writeUInt32BE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,4,4294967295,0);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):H(this,a,c,!1);return c+4};b.prototype.writeIntLE=function(a,b,d,e){a=+a;b|=0;e||(e=Math.pow(2,8*d-1),E(this,a,b,d,e-1,-e));e=0;var f=1,h=0;for(this[b]=a&255;++e<d&&(f*=256);)0>a&&0===h&&0!==this[b+e-1]&&(h=1),this[b+
e]=(a/f>>0)-h&255;return b+d};b.prototype.writeIntBE=function(a,b,d,e){a=+a;b|=0;e||(e=Math.pow(2,8*d-1),E(this,a,b,d,e-1,-e));e=d-1;var f=1,h=0;for(this[b+e]=a&255;0<=--e&&(f*=256);)0>a&&0===h&&0!==this[b+e+1]&&(h=1),this[b+e]=(a/f>>0)-h&255;return b+d};b.prototype.writeInt8=function(a,c,d){a=+a;c|=0;d||E(this,a,c,1,127,-128);b.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[c]=a&255;return c+1};b.prototype.writeInt16LE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?
(this[c]=a&255,this[c+1]=a>>>8):J(this,a,c,!0);return c+2};b.prototype.writeInt16BE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,2,32767,-32768);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>8,this[c+1]=a&255):J(this,a,c,!1);return c+2};b.prototype.writeInt32LE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,4,2147483647,-2147483648);b.TYPED_ARRAY_SUPPORT?(this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24):H(this,a,c,!0);return c+4};b.prototype.writeInt32BE=function(a,c,d){a=+a;c|=0;d||E(this,a,c,4,2147483647,
-2147483648);0>a&&(a=4294967295+a+1);b.TYPED_ARRAY_SUPPORT?(this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255):H(this,a,c,!1);return c+4};b.prototype.writeFloatLE=function(a,b,d){return y(this,a,b,!0,d)};b.prototype.writeFloatBE=function(a,b,d){return y(this,a,b,!1,d)};b.prototype.writeDoubleLE=function(a,b,d){return v(this,a,b,!0,d)};b.prototype.writeDoubleBE=function(a,b,d){return v(this,a,b,!1,d)};b.prototype.copy=function(a,c,d,e){d||(d=0);e||0===e||(e=this.length);c>=a.length&&
(c=a.length);c||(c=0);0<e&&e<d&&(e=d);if(e===d||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);a.length-c<e-d&&(e=a.length-c+d);var f=e-d;if(this===a&&d<c&&c<e)for(e=f-1;0<=e;--e)a[e+c]=this[e+d];else if(1E3>f||!b.TYPED_ARRAY_SUPPORT)for(e=0;e<f;++e)a[e+c]=this[e+d];else Uint8Array.prototype.set.call(a,
this.subarray(d,d+f),c);return f};b.prototype.fill=function(a,c,d,e){if("string"===typeof a){"string"===typeof c?(e=c,c=0,d=this.length):"string"===typeof d&&(e=d,d=this.length);if(1===a.length){var f=a.charCodeAt(0);256>f&&(a=f)}if(void 0!==e&&"string"!==typeof e)throw new TypeError("encoding must be a string");if("string"===typeof e&&!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);}else"number"===typeof a&&(a&=255);if(0>c||this.length<c||this.length<d)throw new RangeError("Out of range index");
if(d<=c)return this;c>>>=0;d=void 0===d?this.length:d>>>0;a||(a=0);if("number"===typeof a)for(e=c;e<d;++e)this[e]=a;else for(a=b.isBuffer(a)?a:L((new b(a,e)).toString()),f=a.length,e=0;e<d-c;++e)this[e+c]=a[e%f];return this};var t=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},g("buffer").Buffer)},{"base64-js":40,buffer:42,ieee754:70,isarray:74}],43:[function(g,q,z){function a(){this.argTypes=[];this.shimArgs=
[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var b=g("./lib/thunk.js");q.exports=function(g){var l=new a;l.pre=g.pre;l.body=g.body;l.post=g.post;var k=g.args.slice(0);l.argTypes=k;for(var f=0;f<k.length;++f){var d=k[f];if("array"===d||"object"===typeof d&&d.blockIndices){l.argTypes[f]="array";l.arrayArgs.push(f);l.arrayBlockIndices.push(d.blockIndices?
d.blockIndices:0);l.shimArgs.push("array"+f);if(f<l.pre.args.length&&0<l.pre.args[f].count)throw Error("cwise: pre() block may not reference array args");if(f<l.post.args.length&&0<l.post.args[f].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===d)l.scalarArgs.push(f),l.shimArgs.push("scalar"+f);else if("index"===d){l.indexArgs.push(f);if(f<l.pre.args.length&&0<l.pre.args[f].count)throw Error("cwise: pre() block may not reference array index");if(f<l.body.args.length&&
l.body.args[f].lvalue)throw Error("cwise: body() block may not write to array index");if(f<l.post.args.length&&0<l.post.args[f].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===d){l.shapeArgs.push(f);if(f<l.pre.args.length&&l.pre.args[f].lvalue)throw Error("cwise: pre() block may not write to array shape");if(f<l.body.args.length&&l.body.args[f].lvalue)throw Error("cwise: body() block may not write to array shape");if(f<l.post.args.length&&l.post.args[f].lvalue)throw Error("cwise: post() block may not write to array shape");
}else if("object"===typeof d&&d.offset)l.argTypes[f]="offset",l.offsetArgs.push({array:d.array,offset:d.offset}),l.offsetArgIndex.push(f);else throw Error("cwise: Unknown argument type "+k[f]);}if(0>=l.arrayArgs.length)throw Error("cwise: No array arguments specified");if(l.pre.args.length>k.length)throw Error("cwise: Too many arguments in pre() block");if(l.body.args.length>k.length)throw Error("cwise: Too many arguments in body() block");if(l.post.args.length>k.length)throw Error("cwise: Too many arguments in post() block");
l.debug=!!g.printCode||!!g.debug;l.funcName=g.funcName||"cwise";l.blockSize=g.blockSize||64;return b(l)}},{"./lib/thunk.js":45}],44:[function(g,q,z){function a(a,b,e){var k=a.length,g=b.arrayArgs.length;b=0<b.indexArgs.length;var l=[],x=[],h=0,q=0,n,z;for(n=0;n<k;++n)x.push(["i",n,"=0"].join(""));for(z=0;z<g;++z)for(n=0;n<k;++n)q=h,h=a[n],0===n?x.push(["d",z,"s",n,"=t",z,"p",h].join("")):x.push(["d",z,"s",n,"=(t",z,"p",h,"-s",q,"*t",z,"p",q,")"].join(""));0<x.length&&l.push("var "+x.join(","));for(n=
k-1;0<=n;--n)h=a[n],l.push(["for(i",n,"=0;i",n,"<s",h,";++i",n,"){"].join(""));l.push(e);for(n=0;n<k;++n){q=h;h=a[n];for(z=0;z<g;++z)l.push(["p",z,"+=d",z,"s",n].join(""));b&&(0<n&&l.push(["index[",q,"]-=s",q].join("")),l.push(["++index[",h,"]"].join("")));l.push("}")}return l.join("\n")}function b(b,d,e,k){for(var g=d.length,l=e.arrayArgs.length,x=e.blockSize,h=0<e.indexArgs.length,q=[],n=0;n<l;++n)q.push(["var offset",n,"=p",n].join(""));for(n=b;n<g;++n)q.push(["for(var j"+n+"=SS[",d[n],"]|0;j",
n,">0;){"].join("")),q.push(["if(j",n,"<",x,"){"].join("")),q.push(["s",d[n],"=j",n].join("")),q.push(["j",n,"=0"].join("")),q.push(["}else{s",d[n],"=",x].join("")),q.push(["j",n,"-=",x,"}"].join("")),h&&q.push(["index[",d[n],"]=j",n].join(""));for(n=0;n<l;++n){x=["offset"+n];for(h=b;h<g;++h)x.push(["j",h,"*t",n,"p",d[h]].join(""));q.push(["p",n,"=(",x.join("+"),")"].join(""))}q.push(a(d,e,k));for(n=b;n<g;++n)q.push("}");return q.join("\n")}function x(a,b,e){for(var k=a.body,g=[],l=[],x=0;x<a.args.length;++x){var h=
a.args[x];if(!(0>=h.count)){var q=new RegExp(h.name,"g"),n="",z=b.arrayArgs.indexOf(x);switch(b.argTypes[x]){case "offset":var m=b.offsetArgIndex.indexOf(x),z=b.offsetArgs[m].array,n="+q"+m;case "array":var n="p"+z+n,E="l"+x,m="a"+z;if(0===b.arrayBlockIndices[z])1===h.count?"generic"===e[z]?h.lvalue?(g.push(["var ",E,"=",m,".get(",n,")"].join("")),k=k.replace(q,E),l.push([m,".set(",n,",",E,")"].join(""))):k=k.replace(q,[m,".get(",n,")"].join("")):k=k.replace(q,[m,"[",n,"]"].join("")):"generic"===
e[z]?(g.push(["var ",E,"=",m,".get(",n,")"].join("")),k=k.replace(q,E),h.lvalue&&l.push([m,".set(",n,",",E,")"].join(""))):(g.push(["var ",E,"=",m,"[",n,"]"].join("")),k=k.replace(q,E),h.lvalue&&l.push([m,"[",n,"]=",E].join("")));else{q=[h.name];h=[n];for(n=0;n<Math.abs(b.arrayBlockIndices[z]);n++)q.push("\\s*\\[([^\\]]+)\\]"),h.push("$"+(n+1)+"*t"+z+"b"+n);q=new RegExp(q.join(""),"g");n=h.join("+");if("generic"===e[z])throw Error("cwise: Generic arrays not supported in combination with blocks!");
k=k.replace(q,[m,"[",n,"]"].join(""))}break;case "scalar":k=k.replace(q,"Y"+b.scalarArgs.indexOf(x));break;case "index":k=k.replace(q,"index");break;case "shape":k=k.replace(q,"shape")}}}return[g.join("\n"),k,l.join("\n")].join("\n").trim()}function l(a){for(var b=Array(a.length),e=!0,k=0;k<a.length;++k){var g=a[k],l=g.match(/\d+/),l=l?l[0]:"";0===g.charAt(0)?b[k]="u"+g.charAt(1)+l:b[k]=g.charAt(0)+l;0<k&&(e=e&&b[k]===b[k-1])}return e?b[0]:b.join("")}var k=g("uniq");q.exports=function(f,d){for(var e=
d[1].length-Math.abs(f.arrayBlockIndices[0])|0,g=Array(f.arrayArgs.length),q=Array(f.arrayArgs.length),u=0;u<f.arrayArgs.length;++u)q[u]=d[2*u],g[u]=d[2*u+1];for(var z=[],h=[],A=[],n=[],ua=[],u=0;u<f.arrayArgs.length;++u){0>f.arrayBlockIndices[u]?(A.push(0),n.push(e),z.push(e),h.push(e+f.arrayBlockIndices[u])):(A.push(f.arrayBlockIndices[u]),n.push(f.arrayBlockIndices[u]+e),z.push(0),h.push(f.arrayBlockIndices[u]));for(var m=[],E=0;E<g[u].length;E++)A[u]<=g[u][E]&&g[u][E]<n[u]&&m.push(g[u][E]-A[u]);
ua.push(m)}h=["SS"];n=["'use strict'"];m=[];for(E=0;E<e;++E)m.push(["s",E,"=SS[",E,"]"].join(""));for(u=0;u<f.arrayArgs.length;++u){h.push("a"+u);h.push("t"+u);h.push("p"+u);for(E=0;E<e;++E)m.push(["t",u,"p",E,"=t",u,"[",A[u]+E,"]"].join(""));for(E=0;E<Math.abs(f.arrayBlockIndices[u]);++E)m.push(["t",u,"b",E,"=t",u,"[",z[u]+E,"]"].join(""))}for(u=0;u<f.scalarArgs.length;++u)h.push("Y"+u);0<f.shapeArgs.length&&m.push("shape=SS.slice(0)");if(0<f.indexArgs.length){E=Array(e);for(u=0;u<e;++u)E[u]="0";
m.push(["index=[",E.join(","),"]"].join(""))}for(u=0;u<f.offsetArgs.length;++u){z=f.offsetArgs[u];A=[];for(E=0;E<z.offset.length;++E)0!==z.offset[E]&&(1===z.offset[E]?A.push(["t",z.array,"p",E].join("")):A.push([z.offset[E],"*t",z.array,"p",E].join("")));0===A.length?m.push("q"+u+"=0"):m.push(["q",u,"=",A.join("+")].join(""))}u=k([].concat(f.pre.thisVars).concat(f.body.thisVars).concat(f.post.thisVars));m=m.concat(u);0<m.length&&n.push("var "+m.join(","));for(u=0;u<f.arrayArgs.length;++u)n.push("p"+
u+"|=0");3<f.pre.body.length&&n.push(x(f.pre,f,q));u=x(f.body,f,q);a:for(E=0,m=ua[0].length;E<m;){for(z=1;z<ua.length;++z)if(ua[z][E]!==ua[0][E])break a;++E}E<e?n.push(b(E,ua[0],f,u)):n.push(a(ua[0],f,u));3<f.post.body.length&&n.push(x(f.post,f,q));f.debug&&console.log("-----Generated cwise routine for ",d,":\n"+n.join("\n")+"\n----------");e=[f.funcName||"unnamed","_cwise_loop_",g[0].join("s"),"m",E,l(q)].join("");return(new Function(["function ",e,"(",h.join(","),"){",n.join("\n"),"} return ",e].join("")))()}},
{uniq:88}],45:[function(g,q,z){var a=g("./compile.js");q.exports=function(b){var g=["'use strict'","var CACHED={}"],l=[];g.push(["return function ",b.funcName+"_cwise_thunk","(",b.shimArgs.join(","),"){"].join(""));for(var k=[],f=[],d=[["array",b.arrayArgs[0],".shape.slice(",Math.max(0,b.arrayBlockIndices[0]),0>b.arrayBlockIndices[0]?","+b.arrayBlockIndices[0]+")":")"].join("")],e=[],q=[],w=0;w<b.arrayArgs.length;++w){var u=b.arrayArgs[w];l.push(["t",u,"=array",u,".dtype,r",u,"=array",u,".order"].join(""));
k.push("t"+u);k.push("r"+u);f.push("t"+u);f.push("r"+u+".join()");d.push("array"+u+".data");d.push("array"+u+".stride");d.push("array"+u+".offset|0");0<w&&(e.push("array"+b.arrayArgs[0]+".shape.length===array"+u+".shape.length+"+(Math.abs(b.arrayBlockIndices[0])-Math.abs(b.arrayBlockIndices[w]))),q.push("array"+b.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[0])+"]===array"+u+".shape[shapeIndex+"+Math.max(0,b.arrayBlockIndices[w])+"]"))}1<b.arrayArgs.length&&(g.push("if (!("+e.join(" && ")+
")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),g.push("for(var shapeIndex=array"+b.arrayArgs[0]+".shape.length-"+Math.abs(b.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),g.push("if (!("+q.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),g.push("}"));for(w=0;w<b.scalarArgs.length;++w)d.push("scalar"+b.scalarArgs[w]);l.push(["type=[",f.join(","),"].join()"].join(""));l.push("proc=CACHED[type]");g.push("var "+l.join(","));g.push(["if(!proc){CACHED[type]=proc=compile([",
k.join(","),"])}return proc(",d.join(","),")}"].join(""));b.debug&&console.log("-----Generated thunk:\n"+g.join("\n")+"\n----------");return(new Function("compile",g.join("\n")))(a.bind(void 0,b))}},{"./compile.js":44}],46:[function(g,q,z){function a(b,g,l){var k=b[l]|0;if(0>=k)return[];var f=Array(k),d;if(l===b.length-1)for(d=0;d<k;++d)f[d]=g;else for(d=0;d<k;++d)f[d]=a(b,g,l+1);return f}q.exports=function(b,g){"undefined"===typeof g&&(g=0);switch(typeof b){case "number":if(0<b){var l=b|0,k=g,f,
d;f=Array(l);for(d=0;d<l;++d)f[d]=k;return f}break;case "object":if("number"===typeof b.length)return a(b,g,0)}return[]}},{}],47:[function(g,q,z){function a(a){if(0>a)return Number("0/0");for(var b=x[0],f=x.length-1;0<f;--f)b+=x[f]/(a+f);f=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(f)-f+Math.log(b)-Math.log(a)}var b=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],
x=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];q.exports=function k(f){if(.5>f)return Math.PI/(Math.sin(Math.PI*f)*k(1-f));if(100<f)return Math.exp(a(f));--f;for(var d=b[0],e=1;9>e;e++)d+=b[e]/(f+e);e=f+7+.5;return Math.sqrt(2*Math.PI)*
Math.pow(e,f+.5)*Math.exp(-e)*d};q.exports.log=a},{}],48:[function(g,q,z){q.exports=function(a,b){var g=b[0],l=b[1],k=b[2],f=b[3],d=b[4],e=b[5],q=b[6],w=b[7],u=b[8];a[0]=d*u-e*w;a[1]=k*w-l*u;a[2]=l*e-k*d;a[3]=e*q-f*u;a[4]=g*u-k*q;a[5]=k*f-g*e;a[6]=f*w-d*q;a[7]=l*q-g*w;a[8]=g*d-l*f;return a}},{}],49:[function(g,q,z){q.exports=function(a){var b=new Float32Array(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b}},{}],50:[function(g,q,z){q.exports=function(a,
b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}},{}],51:[function(g,q,z){q.exports=function(){var a=new Float32Array(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],52:[function(g,q,z){q.exports=function(a){var b=a[3],g=a[4],l=a[5],k=a[6],f=a[7],d=a[8];return a[0]*(d*g-l*f)+a[1]*(l*k-d*b)+a[2]*(f*b-g*k)}},{}],53:[function(g,q,z){q.exports=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]+a[4]*
a[4]+a[5]*a[5]+a[6]*a[6]+a[7]*a[7]+a[8]*a[8])}},{}],54:[function(g,q,z){q.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a}},{}],55:[function(g,q,z){q.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}},{}],56:[function(g,q,z){q.exports=function(a,b){var g=b[0],l=b[1],k=b[2],f=b[3],d=g+g,e=l+l,q=k+k,g=g*d,w=l*d,l=l*e,u=k*d,z=k*e,k=k*q,d=f*d,e=f*e,f=f*q;a[0]=1-l-k;
a[3]=w-f;a[6]=u+e;a[1]=w+f;a[4]=1-g-k;a[7]=z-d;a[2]=u-e;a[5]=z+d;a[8]=1-g-l;return a}},{}],57:[function(g,q,z){q.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}},{}],58:[function(g,q,z){q.exports={adjoint:g("./adjoint"),clone:g("./clone"),copy:g("./copy"),create:g("./create"),determinant:g("./determinant"),frob:g("./frob"),fromMat2:g("./from-mat2"),fromMat4:g("./from-mat4"),fromQuat:g("./from-quat"),identity:g("./identity"),invert:g("./invert"),multiply:g("./multiply"),
normalFromMat4:g("./normal-from-mat4"),rotate:g("./rotate"),scale:g("./scale"),str:g("./str"),translate:g("./translate"),transpose:g("./transpose")}},{"./adjoint":48,"./clone":49,"./copy":50,"./create":51,"./determinant":52,"./frob":53,"./from-mat2":54,"./from-mat4":55,"./from-quat":56,"./identity":57,"./invert":59,"./multiply":60,"./normal-from-mat4":61,"./rotate":62,"./scale":63,"./str":64,"./translate":65,"./transpose":66}],59:[function(g,q,z){q.exports=function(a,b){var g=b[0],l=b[1],k=b[2],f=
b[3],d=b[4],e=b[5],q=b[6],w=b[7],u=b[8],z=u*d-e*w,h=-u*f+e*q,A=w*f-d*q,n=g*z+l*h+k*A;if(!n)return null;n=1/n;a[0]=z*n;a[1]=(-u*l+k*w)*n;a[2]=(e*l-k*d)*n;a[3]=h*n;a[4]=(u*g-k*q)*n;a[5]=(-e*g+k*f)*n;a[6]=A*n;a[7]=(-w*g+l*q)*n;a[8]=(d*g-l*f)*n;return a}},{}],60:[function(g,q,z){q.exports=function(a,b,g){var l=b[0],k=b[1],f=b[2],d=b[3],e=b[4],q=b[5],w=b[6],u=b[7];b=b[8];var z=g[0],h=g[1],A=g[2],n=g[3],ua=g[4],m=g[5],E=g[6],J=g[7];g=g[8];a[0]=z*l+h*d+A*w;a[1]=z*k+h*e+A*u;a[2]=z*f+h*q+A*b;a[3]=n*l+ua*d+
m*w;a[4]=n*k+ua*e+m*u;a[5]=n*f+ua*q+m*b;a[6]=E*l+J*d+g*w;a[7]=E*k+J*e+g*u;a[8]=E*f+J*q+g*b;return a}},{}],61:[function(g,q,z){q.exports=function(a,b){var g=b[0],l=b[1],k=b[2],f=b[3],d=b[4],e=b[5],q=b[6],w=b[7],u=b[8],z=b[9],h=b[10],A=b[11],n=b[12],ua=b[13],m=b[14],E=b[15],J=g*e-l*d,H=g*q-k*d,ea=g*w-f*d,y=l*q-k*e,v=l*w-f*e,S=k*w-f*q,L=u*ua-z*n,Q=u*m-h*n,u=u*E-A*n,C=z*m-h*ua,z=z*E-A*ua,h=h*E-A*m,A=J*h-H*z+ea*C+y*u-v*Q+S*L;if(!A)return null;A=1/A;a[0]=(e*h-q*z+w*C)*A;a[1]=(q*u-d*h-w*Q)*A;a[2]=(d*z-e*
u+w*L)*A;a[3]=(k*z-l*h-f*C)*A;a[4]=(g*h-k*u+f*Q)*A;a[5]=(l*u-g*z-f*L)*A;a[6]=(ua*S-m*v+E*y)*A;a[7]=(m*ea-n*S-E*H)*A;a[8]=(n*v-ua*ea+E*J)*A;return a}},{}],62:[function(g,q,z){q.exports=function(a,b,g){var l=b[0],k=b[1],f=b[2],d=b[3],e=b[4],q=b[5],w=b[6],u=b[7];b=b[8];var z=Math.sin(g);g=Math.cos(g);a[0]=g*l+z*d;a[1]=g*k+z*e;a[2]=g*f+z*q;a[3]=g*d-z*l;a[4]=g*e-z*k;a[5]=g*q-z*f;a[6]=w;a[7]=u;a[8]=b;return a}},{}],63:[function(g,q,z){q.exports=function(a,b,g){var l=g[0];g=g[1];a[0]=l*b[0];a[1]=l*b[1];
a[2]=l*b[2];a[3]=g*b[3];a[4]=g*b[4];a[5]=g*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}},{}],64:[function(g,q,z){q.exports=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}},{}],65:[function(g,q,z){q.exports=function(a,b,g){var l=b[0],k=b[1],f=b[2],d=b[3],e=b[4],q=b[5],w=b[6],u=b[7];b=b[8];var z=g[0];g=g[1];a[0]=l;a[1]=k;a[2]=f;a[3]=d;a[4]=e;a[5]=q;a[6]=z*l+g*d+w;a[7]=z*k+g*e+u;a[8]=z*f+g*q+b;return a}},{}],66:[function(g,q,z){q.exports=
function(a,b){if(a===b){var g=b[1],l=b[2],k=b[5];a[1]=b[3];a[2]=b[6];a[3]=g;a[5]=b[7];a[6]=l;a[7]=k}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}},{}],67:[function(g,q,z){q.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],68:[function(g,q,z){var a=g("./identity");q.exports=function(b,g,l,k){var f,d,e,q,w,u,z,h,A=g[0],n=g[1];g=g[2];e=k[0];
q=k[1];d=k[2];z=l[0];k=l[1];f=l[2];if(1E-6>Math.abs(A-z)&&1E-6>Math.abs(n-k)&&1E-6>Math.abs(g-f))return a(b);l=A-z;k=n-k;z=g-f;h=1/Math.sqrt(l*l+k*k+z*z);l*=h;k*=h;z*=h;f=q*z-d*k;d=d*l-e*z;e=e*k-q*l;(h=Math.sqrt(f*f+d*d+e*e))?(h=1/h,f*=h,d*=h,e*=h):e=d=f=0;q=k*e-z*d;w=z*f-l*e;u=l*d-k*f;(h=Math.sqrt(q*q+w*w+u*u))?(h=1/h,q*=h,w*=h,u*=h):u=w=q=0;b[0]=f;b[1]=q;b[2]=l;b[3]=0;b[4]=d;b[5]=w;b[6]=k;b[7]=0;b[8]=e;b[9]=u;b[10]=z;b[11]=0;b[12]=-(f*A+d*n+e*g);b[13]=-(q*A+w*n+u*g);b[14]=-(l*A+k*n+z*g);b[15]=1;
return b}},{"./identity":67}],69:[function(g,q,z){q.exports=function(a,b,g,l,k){b=1/Math.tan(b/2);var f=1/(l-k);a[0]=b/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(k+l)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*k*l*f;a[15]=0;return a}},{}],70:[function(g,q,z){z.read=function(a,b,g,l,k){var f;f=8*k-l-1;var d=(1<<f)-1,e=d>>1,q=-7;k=g?k-1:0;var w=g?-1:1,u=a[b+k];k+=w;g=u&(1<<-q)-1;u>>=-q;for(q+=f;0<q;g=256*g+a[b+k],k+=w,q-=8);f=g&(1<<-q)-1;g>>=-q;for(q+=l;0<q;f=256*f+a[b+k],k+=w,
q-=8);if(0===g)g=1-e;else{if(g===d)return f?NaN:Infinity*(u?-1:1);f+=Math.pow(2,l);g-=e}return(u?-1:1)*f*Math.pow(2,g-l)};z.write=function(a,b,g,l,k,f){var d,e=8*f-k-1,q=(1<<e)-1,w=q>>1,u=23===k?Math.pow(2,-24)-Math.pow(2,-77):0;f=l?0:f-1;var z=l?1:-1,h=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,l=q):(l=Math.floor(Math.log(b)/Math.LN2),1>b*(d=Math.pow(2,-l))&&(l--,d*=2),b=1<=l+w?b+u/d:b+u*Math.pow(2,1-w),2<=b*d&&(l++,d/=2),l+w>=q?(b=0,l=q):1<=l+w?(b=(b*d-1)*Math.pow(2,
k),l+=w):(b=b*Math.pow(2,w-1)*Math.pow(2,k),l=0));for(;8<=k;a[g+f]=b&255,f+=z,b/=256,k-=8);l=l<<k|b;for(e+=k;0<e;a[g+f]=l&255,f+=z,l/=256,e-=8);a[g+f-z]|=128*h}},{}],71:[function(g,q,z){q.exports=function(a,b){b=b||Array(a.length);for(var g=0;g<a.length;++g)b[a[g]]=g;return b}},{}],72:[function(g,q,z){q.exports=function(a){for(var b=Array(a),g=0;g<a;++g)b[g]=g;return b}},{}],73:[function(g,q,z){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}
q.exports=function(b){return null!=b&&(a(b)||"function"===typeof b.readFloatLE&&"function"===typeof b.slice&&a(b.slice(0,0))||!!b._isBuffer)}},{}],74:[function(g,q,z){var a={}.toString;q.exports=Array.isArray||function(b){return"[object Array]"==a.call(b)}},{}],75:[function(g,q,z){q.exports=function(b,g){function l(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==ua.alt,ua.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==ua.shift,ua.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==ua.control,ua.control=
!!a.ctrlKey);"metaKey"in a&&(b=b||a.metaKey!==ua.meta,ua.meta=!!a.metaKey);return b}function k(b,d){var e=a.x(d),f=a.y(d);"buttons"in d&&(b=d.buttons|0);if(b!==h||e!==A||f!==n||l(d))h=b|0,A=e||0,n=f||0,g&&g(h,A,n,ua)}function f(a){k(0,a)}function d(){if(h||A||n||ua.shift||ua.alt||ua.meta||ua.control)h=A=n=0,ua.shift=ua.alt=ua.control=ua.meta=!1,g&&g(0,0,0,ua)}function e(a){l(a)&&g&&g(h,A,n,ua)}function q(b){0===a.buttons(b)?k(0,b):k(h,b)}function w(b){k(h|a.buttons(b),b)}function u(b){k(h&~a.buttons(b),
b)}function z(){m||(m=!0,b.addEventListener("mousemove",q),b.addEventListener("mousedown",w),b.addEventListener("mouseup",u),b.addEventListener("mouseleave",f),b.addEventListener("mouseenter",f),b.addEventListener("mouseout",f),b.addEventListener("mouseover",f),b.addEventListener("blur",d),b.addEventListener("keyup",e),b.addEventListener("keydown",e),b.addEventListener("keypress",e),b!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",e),window.addEventListener("keydown",
e),window.addEventListener("keypress",e)))}g||(g=b,b=window);var h=0,A=0,n=0,ua={shift:!1,alt:!1,control:!1,meta:!1},m=!1;z();var E={element:b};Object.defineProperties(E,{enabled:{get:function(){return m},set:function(a){a?z():m&&(m=!1,b.removeEventListener("mousemove",q),b.removeEventListener("mousedown",w),b.removeEventListener("mouseup",u),b.removeEventListener("mouseleave",f),b.removeEventListener("mouseenter",f),b.removeEventListener("mouseout",f),b.removeEventListener("mouseover",f),b.removeEventListener("blur",
d),b.removeEventListener("keyup",e),b.removeEventListener("keydown",e),b.removeEventListener("keypress",e),b!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",e),window.removeEventListener("keydown",e),window.removeEventListener("keypress",e)))},enumerable:!0},buttons:{get:function(){return h},enumerable:!0},x:{get:function(){return A},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return ua},enumerable:!0}});return E};var a=g("mouse-event")},
{"mouse-event":76}],76:[function(g,q,z){function a(a){return a.target||a.srcElement||window}z.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};z.element=a;z.x=function(b){if("object"===typeof b){if("offsetX"in b)return b.offsetX;var g=a(b).getBoundingClientRect();return b.clientX-g.left}return 0};
z.y=function(b){if("object"===typeof b){if("offsetY"in b)return b.offsetY;var g=a(b).getBoundingClientRect();return b.clientY-g.top}return 0}},{}],77:[function(g,q,z){var a=g("to-px");q.exports=function(b,g,l){"function"===typeof b&&(l=!!g,g=b,b=window);var k=a("ex",b),f=function(a){l&&a.preventDefault();var b=a.deltaX||0,f=a.deltaY||0,q=a.deltaZ||0,u=1;switch(a.deltaMode){case 1:u=k;break;case 2:u=window.innerHeight}b*=u;f*=u;q*=u;if(b||f||q)return g(b,f,q,a)};b.addEventListener("wheel",f);return f}},
{"to-px":85}],78:[function(g,q,z){function a(a,b,d){for(var e=0,f=0;f<a;++f)b&1<<f&&(e|=1<<d[f]);return e}function b(b,g,q,h,z,n){function ua(a,b){v.push("for(","i"+z[a],"=",b,";","i"+z[a],"<","s"+z[a],";","++","i"+z[a],"){")}function m(a){for(var b=0;b<H;++b)v.push("p"+b,"+=","u"+b+"_"+z[a],";");v.push("}")}function E(){for(var a=1;a<1<<ea;++a)v.push(ga,"=","e"+a,";","e"+a,"=","y"+a,";","y"+a,"=",ga,";")}function J(a,b){if(0>a){for(var d=0;d<H;++d)n[d]?v.push("c"+d+"_0","=","d"+d,".get(","p"+d,");"):
v.push("c"+d+"_0","=","d"+d,"[","p"+d,"];");for(var g=[],d=0;d<H;++d)g.push("c"+d+"_0");for(d=0;d<h;++d)g.push("x"+d);v.push("b0","=",k,"[",e,"]=phase(",g.join(),");");for(g=1;g<1<<ea;++g)v.push("b"+g,"=",k,"[",e,"+","e"+g,"];");d=[];for(g=1;g<1<<ea;++g)d.push("(b0!==b"+g+")");v.push("if(",d.join("||"),"){");for(var c=[],d=0;d<ea;++d)c.push("i"+d);for(d=0;d<H;++d)for(c.push("c"+d+"_0"),g=1;g<1<<ea;++g)n[d]?v.push("c"+d+"_"+g,"=","d"+d,".get(","p"+d,"+","d"+d+"_"+g,");"):v.push("c"+d+"_"+g,"=","d"+
d,"[","p"+d,"+","d"+d+"_"+g,"];"),c.push("c"+d+"_"+g);for(d=0;d<1<<ea;++d)c.push("b"+d);for(d=0;d<h;++d)c.push("x"+d);v.push("vertex(",c.join(),");","v0","=",l,"[",e,"]=",f,"++;");d=(1<<ea)-1;c="b"+d;for(g=0;g<ea;++g)if(0===(b&~(1<<g))){for(var u=d^1<<g,r="b"+u,q=[],w=u;0<w;w=w-1&u)q.push(l+"["+e+"+"+("e"+w)+"]");q.push("v0");for(w=0;w<H;++w)g&1?q.push("c"+w+"_"+d,"c"+w+"_"+u):q.push("c"+w+"_"+u,"c"+w+"_"+d);g&1?q.push(c,r):q.push(r,c);for(w=0;w<h;++w)q.push("x"+w);v.push("if(",c,"!==",r,"){","face(",
q.join(),")}")}v.push("}",e,"+=1;")}else{for(g=a-1;0<=g;--g)ua(g,0);d=[];for(g=0;g<H;++g)n[g]?d.push("d"+g+".get("+("p"+g)+")"):d.push("d"+g+"["+("p"+g)+"]");for(g=0;g<h;++g)d.push("x"+g);v.push(k,"[",e,"++]=phase(",d.join(),");");for(g=0;g<a;++g)m(g);for(g=0;g<H;++g)v.push("p"+g,"+=","u"+g+"_"+z[a],";");v.push("if(","s"+z[a],">0){","i"+z[a],"=1;");J(a-1,b|1<<z[a]);for(g=0;g<H;++g)v.push("p"+g,"+=","u"+g+"_"+z[a],";");a===ea-1&&(v.push(e,"=0;"),E());ua(a,2);J(a-1,b);a===ea-1&&(v.push("if(","i"+z[ea-
1],"&1){",e,"=0;}"),E());m(a);v.push("}")}}var H=n.length,ea=z.length;if(2>ea)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var y="extractContour"+z.join("_"),v=[],S=[],L=[],Q=0;Q<H;++Q)L.push("a"+Q);for(Q=0;Q<h;++Q)L.push("x"+Q);for(Q=0;Q<ea;++Q)S.push("s"+Q+"=a0.shape["+Q+"]|0");for(Q=0;Q<H;++Q){S.push("d"+Q+"="+("a"+Q)+".data","o"+Q+"="+("a"+Q)+".offset|0");for(var C=0;C<ea;++C)S.push("t"+Q+"_"+C+"="+("a"+Q)+".stride["+C+"]|0")}for(Q=0;Q<H;++Q)for(S.push("p"+Q+"="+("o"+
Q)),S.push("c"+Q+"_0"),C=1;C<1<<ea;++C){for(var B=[],ra=0;ra<ea;++ra)C&1<<ra&&B.push("-"+("t"+Q+"_"+ra));S.push("d"+Q+"_"+C+"=("+B.join("")+")|0");S.push("c"+Q+"_"+C+"=0")}for(Q=0;Q<H;++Q)for(C=0;C<ea;++C)ra=["t"+Q+"_"+z[C]],0<C&&ra.push("t"+Q+"_"+z[C-1]+"*"+("s"+z[C-1])),S.push("u"+Q+"_"+z[C]+"=("+ra.join("-")+")|0");for(Q=0;Q<ea;++Q)S.push("i"+Q+"=0");S.push(f+"=0");C=["2"];for(Q=ea-2;0<=Q;--Q)C.push("s"+z[Q]);S.push(d+"=("+C.join("*")+")|0",k+"=mallocUint32("+d+")",l+"=mallocUint32("+d+")",e+"=0");
S.push("b0=0");for(C=1;C<1<<ea;++C){Q=[];B=[];for(ra=0;ra<ea;++ra)C&1<<ra&&(0===B.length?Q.push("1"):Q.unshift(B.join("*"))),B.push("s"+z[ra]);ra="";0>Q[0].indexOf("s"+z[ea-2])&&(ra="-");B=a(ea,C,z);S.push("e"+B+"=(-"+Q.join("-")+")|0","y"+B+"=("+ra+Q.join("-")+")|0","b"+B+"=0")}S.push("v0=0",ga+"=0");J(ea-1,0);v.push("freeUint32(",l,");freeUint32(",k,");");y=["'use strict';function ",y,"(",L.join(),"){var ",S.join(),";",v.join(""),"}return ",y].join("");return(new Function("vertex","face","phase",
"mallocUint32","freeUint32",y))(b,g,q,x.mallocUint32,x.freeUint32)}var x=g("typedarray-pool");q.exports=function(a){function d(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&d("Must specify arguments");var e=a.order;Array.isArray(e)||d("Must specify order");var f=a.arrayArguments||1;1>f&&d("Must have at least one array argument");var g=a.scalarArguments||0;0>g&&d("Scalar arg count must be > 0");"function"!==typeof a.vertex&&d("Must specify vertex creation function");"function"!==
typeof a.cell&&d("Must specify cell creation function");"function"!==typeof a.phase&&d("Must specify phase function");for(var k=a.getters||[],l=Array(f),m=0;m<f;++m)0<=k.indexOf(m)?l[m]=!0:l[m]=!1;return b(a.vertex,a.cell,a.phase,g,e,l)};var l="V",k="P",f="N",d="Q",e="X",ga="T"},{"typedarray-pool":87}],79:[function(g,q,z){function a(a,b){return a[0]-b[0]}function b(){var b=this.stride,d=Array(b.length),e;for(e=0;e<d.length;++e)d[e]=[Math.abs(b[e]),e];d.sort(a);b=Array(d.length);for(e=0;e<b.length;++e)b[e]=
d[e][1];return b}function x(a,d){var f=["View",d,"d",a].join("");0>d&&(f="View_Nil"+a);var g="generic"===a;if(-1===d){var h,f=new Function("function "+f+"(a){this.data=a;};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+f+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+
f+"(a){return new "+f+"(a);}");return f()}if(0===d)return f=new Function("TrivialArray","function "+f+"(a,d) {this.data = a;this.offset = d};var proto="+f+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick=function "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+
f+"_get(){return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+f+"_set(v){return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),f(e[a][0]);h=["'use strict'"];var l=k(d),n=l.map(function(a){return"i"+a}),q="this.offset+"+l.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=l.map(function(a){return"b"+a}).join(","),x=l.map(function(a){return"c"+a}).join(",");h.push("function "+
f+"(a,"+m+","+x+",d){this.data=a","this.shape=["+m+"]","this.stride=["+x+"]","this.offset=d|0}","var proto="+f+".prototype","proto.dtype='"+a+"'","proto.dimension="+d);h.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+l.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===d?h.push("proto.order=[0]"):(h.push("Object.defineProperty(proto,'order',{get:"),4>d?(h.push("function "+f+"_order(){"),2===d?h.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):
3===d&&h.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):h.push("ORDER})"));h.push("proto.set=function "+f+"_set("+n.join(",")+",v){");g?h.push("return this.data.set("+q+",v)}"):h.push("return this.data["+q+"]=v}");h.push("proto.get=function "+f+"_get("+n.join(",")+"){");g?h.push("return this.data.get("+
q+")}"):h.push("return this.data["+q+"]}");h.push("proto.index=function "+f+"_index(",n.join(),"){return "+q+"}");h.push("proto.hi=function "+f+"_hi("+n.join(",")+"){return new "+f+"(this.data,"+l.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+l.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");g=l.map(function(a){return"a"+a+"=this.shape["+a+"]"});q=l.map(function(a){return"c"+a+"=this.stride["+a+"]"});h.push("proto.lo=function "+
f+"_lo("+n.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+q.join(","));for(g=0;g<d;++g)h.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");h.push("return new "+f+"(this.data,"+l.map(function(a){return"a"+a}).join(",")+","+l.map(function(a){return"c"+a}).join(",")+",b)}");h.push("proto.step=function "+f+"_step("+n.join(",")+"){var "+l.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+l.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+
",c=this.offset,d=0,ceil=Math.ceil");for(g=0;g<d;++g)h.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");h.push("return new "+f+"(this.data,"+l.map(function(a){return"a"+a}).join(",")+","+l.map(function(a){return"b"+a}).join(",")+",c)}");q=Array(d);m=Array(d);for(g=0;g<d;++g)q[g]="a[i"+g+"]",m[g]="b[i"+g+"]";h.push("proto.transpose=function "+f+"_transpose("+n+"){"+n.map(function(a,b){return a+"=("+a+"===undefined?"+
b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+f+"(this.data,"+q.join(",")+","+m.join(",")+",this.offset)}");h.push("proto.pick=function "+f+"_pick("+n+"){var a=[],b=[],c=this.offset");for(g=0;g<d;++g)h.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");h.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");h.push("return function construct_"+f+"(data,shape,stride,offset){return new "+
f+"(data,"+l.map(function(a){return"shape["+a+"]"}).join(",")+","+l.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");f=new Function("CTOR_LIST","ORDER",h.join("\n"));return f(e[a],b)}function l(a){if(f(a))return"buffer";if(d)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";
case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(a)?"array":"generic"}var k=g("iota-array"),f=g("is-buffer"),d="undefined"!==typeof Float64Array,e={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};
(function(){for(var a in e)e[a].push(x(a,-1))});q.exports=function(a,b,d,f){if(void 0===a){var g=e.array[0];return g([])}"number"===typeof a&&(a=[a]);void 0===b&&(b=[a.length]);g=b.length;if(void 0===d){d=Array(g);for(var k=g-1,n=1;0<=k;--k)d[k]=n,n*=b[k]}if(void 0===f)for(k=f=0;k<g;++k)0>d[k]&&(f-=(b[k]-1)*d[k]);k=l(a);for(n=e[k];n.length<=g+1;)n.push(x(k,n.length-1));g=n[g+1];return g(a,b,d,f)}},{"iota-array":72,"is-buffer":73}],80:[function(g,q,z){q.exports=function(a,b){b||(b=[0,""]);a=String(a);
var g=parseFloat(a,10);b[0]=g;b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return b}},{}],81:[function(g,q,z){q.exports=function(g){var l=g.length;if(l<a)for(var k=1,f=0;f<l;++f)for(var d=0;d<f;++d)if(g[f]<g[d])k=-k;else{if(g[f]===g[d])return 0}else{for(var e=b.mallocUint8(l),f=0;f<l;++f)e[f]=0;k=1;for(f=0;f<l;++f)if(!e[f]){var q=1;e[f]=1;for(d=g[f];d!==f;d=g[d]){if(e[d])return b.freeUint8(e),0;q+=1;e[d]=1}q&1||(k=-k)}b.freeUint8(e)}return k};var a=32,b=g("typedarray-pool")},{"typedarray-pool":87}],82:[function(g,
q,z){var a=g("typedarray-pool"),b=g("invert-permutation");z.rank=function(g){var l=g.length;switch(l){case 0:case 1:return 0;case 2:return g[1]}var k=a.mallocUint32(l),f=a.mallocUint32(l),d=0,e;b(g,f);for(e=0;e<l;++e)k[e]=g[e];for(e=l-1;0<e;--e)l=f[e],g=k[e],k[e]=k[l],k[l]=g,f[e]=f[g],f[g]=l,d=(d+g)*e;a.freeUint32(f);a.freeUint32(k);return d};z.unrank=function(a,b,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(b?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):b?[0,1]:[1,0]}g=
g||Array(a);var f,d,e=1;g[0]=0;for(d=1;d<a;++d)g[d]=d,e=e*d|0;for(d=a-1;0<d;--d)a=b/e|0,b=b-a*e|0,e=e/d|0,f=g[d]|0,g[d]=g[a]|0,g[a]=f|0;return g}},{"invert-permutation":71,"typedarray-pool":87}],83:[function(g,q,z){function a(a){throw Error("resl: "+a);}function b(b,e,f){Object.keys(b).forEach(function(b){0>e.indexOf(b)&&a('invalid parameter "'+b+'" in '+f)})}function x(a,b){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=b}var l=["manifest","onDone","onProgress","onError"],k=["type",
"src","stream","credentials","parser"],f=["onData","onDone"];q.exports=function(d){function e(b,e){if(b in d){var f=d[b];"function"!==typeof f&&a('invalid callback "'+b+'"');return f}return null}function g(a){function b(){if(!(2>k.readyState||1===n.state||-1===n.state)){if(200!==k.status)return u('error loading resource "'+a.name+'"');if(2<k.readyState&&0===n.state){var e;e="binary"===a.type?k.response:k.responseText;if(h.data)try{l=h.data(e)}catch(f){return u(f)}else l=e}if(3<k.readyState&&0===n.state){if(h.done)try{l=
h.done()}catch(f){return u(f)}n.state=1}m[d]=l;n.progress=.75*n.progress+.25;n.ready=a.stream&&!!l||1===n.state;z()}}var d=a.name,e=a.stream,f="binary"===a.type,h=a.parser,k=new XMLHttpRequest,l=null,n=new x(d,function(){1!==n.state&&-1!==n.state&&(k.onreadystatechange=null,k.abort(),n.state=-1)});k.onreadystatechange=e?b:function(){4===k.readyState&&b()};f&&(k.responseType="arraybuffer");a.credentials&&(k.withCredentials=!0);k.open("GET",a.src,!0);k.send();return n}function q(a,b){function d(){if(0===
n.state)if(l.data)try{w=l.data(b)}catch(a){return u(a)}else w=b}function e(a){d();m[k]=w;n.progress=a.lengthComputable?Math.max(n.progress,a.loaded/a.total):.75*n.progress+.25;z(k)}function f(){d();if(0===n.state){if(l.done)try{w=l.done()}catch(a){return u(a)}n.state=1}n.progress=1;n.ready=!0;m[k]=w;h();z("finish "+k)}function g(){u('error loading asset "'+k+'"')}function h(){a.stream&&b.removeEventListener("progress",e);"image"===a.type?b.addEventListener("load",f):b.addEventListener("canplay",f);
b.removeEventListener("error",g)}var k=a.name,l=a.parser,n=new x(k,function(){1!==n.state&&-1!==n.state&&(n.state=-1,h(),b.src="")}),w=b;a.stream&&b.addEventListener("progress",e);if("image"===a.type)b.addEventListener("load",f);else{var t=!1,p=!1;b.addEventListener("loadedmetadata",function(){p=!0;t&&f()});b.addEventListener("canplay",function(){t=!0;p&&f()})}b.addEventListener("error",g);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return n}function u(a){-1!==E&&1!==E&&
(E=-1,H.forEach(function(a){a.cancel()}),ua?"string"===typeof a?ua(Error("resl: "+a)):ua(a):console.error("resl error:",a))}function z(a){if(-1!==E&&1!==E){var b=0,d=0;H.forEach(function(a){a.ready&&(d+=1);b+=a.progress});d===H.length?(E=1,A(m)):n&&n(b/H.length,a)}}"object"===typeof d&&d||a("invalid or missing configuration");b(d,l,"config");var h=d.manifest;"object"===typeof h&&h||a("missing manifest");var A=e("onDone");A||a("missing onDone() callback");var n=e("onProgress"),ua=e("onError"),m={},
E=0,J={text:g,binary:function(a){return g(a)},image:function(a){return q(a,document.createElement("img"))},video:function(a){return q(a,document.createElement("video"))},audio:function(a){return q(a,document.createElement("audio"))}},H=Object.keys(h).map(function(d){function e(b,d){if(b in g.parser){var f=g.parser[b];"function"!==typeof f&&a("invalid parser callback "+b+' for asset "'+b+'"');return f}return d}var g=h[d];"string"===typeof g?g={src:g}:"object"===typeof g&&g||a('invalid asset definition "'+
d+'"');b(g,k,'asset "'+d+'"');var l={};"parser"in g&&("function"===typeof g.parser?l={data:g.parser}:"object"===typeof g.parser&&g.parser?(b(l,f,'parser for asset "'+d+'"'),"onData"in l||a('missing onData callback for parser in asset "'+d+'"'),l={data:e("onData"),done:e("onDone")}):a('invalid parser for asset "'+d+'"'));return{name:d,type:function(b,e,f){b in g&&(f=g[b]);0>e.indexOf(f)&&a("invalid "+b+' "'+f+'" for asset "'+d+'", possible values: '+e);return f}("type",Object.keys(J),"text"),stream:!!g.stream,
credentials:!!g.credentials,src:function(b,e,f){b in g?f=g[b]:e&&a("missing "+b+' for asset "'+d+'"');"string"!==typeof f&&a("invalid "+b+' for asset "'+d+'", must be a string');return f}("src",!0,""),parser:l}}).map(function(a){return J[a.type](a)});0===H.length&&setTimeout(function(){z("done")},1)}},{}],84:[function(g,q,z){function a(a,d){var e=a.length,g=["'use strict';"],k="surfaceNets"+a.join("_")+"d"+d;g.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");
"generic"===d&&g.push("getters:[0],");for(var l=[],q=[],h=0;h<e;++h)l.push("d"+h),q.push("d"+h);for(h=0;h<1<<e;++h)l.push("v"+h),q.push("v"+h);for(h=0;h<1<<e;++h)l.push("p"+h),q.push("p"+h);l.push("a","b","c");q.push("a","c");g.push("vertex:function vertexFunc(",l.join(),"){");l=[];for(h=0;h<1<<e;++h)l.push("(p"+h+"<<"+h+")");g.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<e))-1,"){return}");var l=[],z=[];128>=1<<(1<<e)?(g.push("switch(m){"),z=g):g.push("switch(m>>>7){");for(h=0;h<1<<(1<<
e);++h){128<1<<(1<<e)&&0===h%128&&(0<l.length&&z.push("}}"),z="vExtra"+l.length,g.push("case ",h>>>7,":",z,"(m&0x7f,",q.join(),");break;"),z=["function ",z,"(m,",q.join(),"){switch(m){"],l.push(z));z.push("case ",h&127,":");for(var n=Array(e),ua=Array(e),m=Array(e),E=Array(e),J=0,H=0;H<e;++H)n[H]=[],ua[H]=[],m[H]=0,E[H]=0;for(H=0;H<1<<e;++H)for(var ea=0;ea<e;++ea){var y=H^1<<ea;if(!(y>H)&&!(h&1<<y)!==!(h&1<<H)){var v=1;h&1<<y?ua[ea].push("v"+y+"-v"+H):(ua[ea].push("v"+H+"-v"+y),v=-v);0>v?(n[ea].push("-v"+
H+"-v"+y),m[ea]+=2):(n[ea].push("v"+H+"+v"+y),m[ea]-=2);J+=1;for(v=0;v<e;++v)v!==ea&&(y&1<<v?E[v]+=1:--E[v])}}H=[];for(ea=0;ea<e;++ea)0===n[ea].length?H.push("d"+ea+"-0.5"):(y="",0>m[ea]?y=m[ea]+"*c":0<m[ea]&&(y="+"+m[ea]+"*c"),H.push("d"+ea+"-"+(.5+E[ea]/J*.5)+"-"+n[ea].length/J*.5+"*("+n[ea].join("+")+y+")/("+ua[ea].join("+")+")"));z.push("a.push([",H.join(),"]);","break;")}g.push("}},");0<l.length&&z.push("}}");q=[];for(h=0;h<1<<e-1;++h)q.push("v"+h);q.push("c0","c1","p0","p1","a","b","c");g.push("cell:function cellFunc(",
q.join(),"){");e=x(e-1);g.push("if(p0){b.push(",e.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",e.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",k,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",k,";");for(h=0;h<l.length;++h)g.push(l[h].join(""));return(new Function("genContour",g.join("")))(b)}q.exports=function(b,d){if(0>=
b.dimension)return{positions:[],cells:[]};if(1===b.dimension){for(var e=l(b,d),g=e.length,q=Array(g),u=Array(g),x=0;x<g;++x)q[x]=[e[x]],u[x]=[x];return{positions:q,cells:u}}e=b.order.join()+"-"+b.dtype;g=k[e];d=+d||0;g||(g=k[e]=a(b.order,b.dtype));return g(b,d)};var b=g("ndarray-extract-contour"),x=g("triangulate-hypercube"),l=g("zero-crossings"),k={}},{"ndarray-extract-contour":78,"triangulate-hypercube":86,"zero-crossings":90}],85:[function(g,q,z){function a(a,b){var e=l(getComputedStyle(a).getPropertyValue(b));
return e[0]*x(e[1],a)}function b(b,d){var e=document.createElement("div");e.style.height="128"+b;d.appendChild(e);var g=a(e,"height")/128;d.removeChild(e);return g}function x(f,d){if(!f)return null;d=d||document.body;f=(f+""||"px").trim().toLowerCase();if(d===window||d===document)d=document.body;switch(f){case "%":return d.clientHeight/100;case "ch":case "ex":return b(f,d);case "em":return a(d,"font-size");case "rem":return a(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/
100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return k;case "cm":return k/2.54;case "mm":return k/25.4;case "pt":return k/72;case "pc":return k/6;case "px":return 1}var e=l(f);if(!isNaN(e[0])&&e[1]){var g=x(e[1],d);return"number"===typeof g?e[0]*g:null}return null}var l=g("parse-unit");q.exports=x;var k=b("in",document.body)},{"parse-unit":80}],86:[function(g,q,z){q.exports=function(g){if(0>
g)return[];if(0===g)return[[0]];for(var k=Math.round(x(g+1))|0,f=[],d=0;d<k;++d){for(var e=a.unrank(g,d),q=[0],w=0,u=0;u<e.length;++u)w+=1<<e[u],q.push(w);1>b(e)&&(q[0]=w,q[g]=0);f.push(q)}return f};var a=g("permutation-rank"),b=g("permutation-parity"),x=g("gamma")},{gamma:47,"permutation-parity":81,"permutation-rank":82}],87:[function(g,q,z){(function(a){function b(a){if(a){var b=m.log2(a.length||a.byteLength);S[b].push(a)}}function q(a){a=m.nextPow2(a);var b=m.log2(a),b=S[b];return 0<b.length?b.pop():
new ArrayBuffer(a)}function l(a){return new Uint8Array(q(a),0,a)}function k(a){return new Uint16Array(q(2*a),0,a)}function f(a){return new Uint32Array(q(4*a),0,a)}function d(a){return new Int8Array(q(a),0,a)}function e(a){return new Int16Array(q(2*a),0,a)}function ga(a){return new Int32Array(q(4*a),0,a)}function w(a){return new Float32Array(q(4*a),0,a)}function u(a){return new Float64Array(q(8*a),0,a)}function pa(a){return H?new Uint8ClampedArray(q(a),0,a):l(a)}function h(a){return ea?new BigUint64Array(q(8*
a),0,a):null}function A(a){return y?new BigInt64Array(q(8*a),0,a):null}function n(a){return new DataView(q(a),0,a)}function ua(a){a=m.nextPow2(a);var b=m.log2(a),b=L[b];return 0<b.length?b.pop():new J(a)}var m=g("bit-twiddle"),E=g("dup"),J=g("buffer").Buffer;a.__TYPEDARRAY_POOL||(a.__TYPEDARRAY_POOL={UINT8:E([32,0]),UINT16:E([32,0]),UINT32:E([32,0]),BIGUINT64:E([32,0]),INT8:E([32,0]),INT16:E([32,0]),INT32:E([32,0]),BIGINT64:E([32,0]),FLOAT:E([32,0]),DOUBLE:E([32,0]),DATA:E([32,0]),UINT8C:E([32,0]),
BUFFER:E([32,0])});var H="undefined"!==typeof Uint8ClampedArray,ea="undefined"!==typeof BigUint64Array,y="undefined"!==typeof BigInt64Array,v=a.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=E([32,0]));v.BIGUINT64||(v.BIGUINT64=E([32,0]));v.BIGINT64||(v.BIGINT64=E([32,0]));v.BUFFER||(v.BUFFER=E([32,0]));var S=v.DATA,L=v.BUFFER;z.free=function(a){if(J.isBuffer(a))L[m.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=m.log2(a.length||a.byteLength)|
0;S[b].push(a)}};z.freeUint8=z.freeUint16=z.freeUint32=z.freeBigUint64=z.freeInt8=z.freeInt16=z.freeInt32=z.freeBigInt64=z.freeFloat32=z.freeFloat=z.freeFloat64=z.freeDouble=z.freeUint8Clamped=z.freeDataView=function(a){b(a.buffer)};z.freeArrayBuffer=b;z.freeBuffer=function(a){L[m.log2(a.length)].push(a)};z.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return q(a);switch(b){case "uint8":return l(a);case "uint16":return k(a);case "uint32":return f(a);case "int8":return d(a);case "int16":return e(a);
case "int32":return ga(a);case "float":case "float32":return w(a);case "double":case "float64":return u(a);case "uint8_clamped":return pa(a);case "bigint64":return A(a);case "biguint64":return h(a);case "buffer":return ua(a);case "data":case "dataview":return n(a);default:return null}};z.mallocArrayBuffer=q;z.mallocUint8=l;z.mallocUint16=k;z.mallocUint32=f;z.mallocInt8=d;z.mallocInt16=e;z.mallocInt32=ga;z.mallocFloat32=z.mallocFloat=w;z.mallocFloat64=z.mallocDouble=u;z.mallocUint8Clamped=pa;z.mallocBigUint64=
h;z.mallocBigInt64=A;z.mallocDataView=n;z.mallocBuffer=ua;z.clearCache=function(){for(var a=0;32>a;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.BIGUINT64[a].length=0,v.BIGINT64[a].length=0,v.UINT8C[a].length=0,S[a].length=0,L[a].length=0}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":41,buffer:42,
dup:46}],88:[function(g,q,z){q.exports=function(a,b,g){if(0===a.length)return a;if(b){g||a.sort(b);g=1;for(var l=a.length,k=a[0],f=a[0],d=1;d<l;++d)f=k,k=a[d],b(k,f)&&(d===g?g++:a[g++]=k);a.length=g;return a}g||a.sort();b=1;g=a.length;l=a[0];k=a[0];for(f=1;f<g;++f)k=l,l=a[f],l!==k&&(f===b?b++:a[b++]=l);a.length=b;return a}},{}],89:[function(g,q,z){q.exports=g("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":43}],90:[function(g,q,z){q.exports=function(b,g){var l=[];g=+g||0;a(b.hi(b.shape[0]-1),l,g);return l};var a=g("./lib/zc-core")},{"./lib/zc-core":89}],91:[function(g,q,z){function a(a,b){for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}var b=g("./lib/util/check"),
x=g("./lib/util/extend"),l=g("./lib/dynamic"),k=g("./lib/util/raf"),f=g("./lib/util/clock"),d=g("./lib/strings"),e=g("./lib/webgl"),ga=g("./lib/extension"),w=g("./lib/limits"),u=g("./lib/buffer"),pa=g("./lib/elements"),h=g("./lib/texture"),A=g("./lib/renderbuffer"),n=g("./lib/framebuffer"),ua=g("./lib/attribute"),m=g("./lib/shader"),E=g("./lib/read"),J=g("./lib/core"),H=g("./lib/stats"),ea=g("./lib/timer");q.exports=function(g){function q(){if(0===Ca.length)R&&R.update(),Qa=null;else{Qa=k.next(q);
t();for(var a=Ca.length-1;0<=a;--a){var b=Ca[a];b&&b(P,null,0)}D.flush();R&&R.update()}}function z(){!Qa&&0<Ca.length&&(Qa=k.next(q))}function L(){Qa&&(k.cancel(q),Qa=null)}function Q(a){a.preventDefault();la=!0;L();ia.forEach(function(a){a()})}function C(a){D.getError();la=!1;na.restore();da.restore();ta.restore();X.restore();ja.restore();oa.restore();M.restore();R&&R.restore();Da.procs.refresh();z();ka.forEach(function(a){a()})}function B(a){function c(a,b){var d={},e={};Object.keys(a).forEach(function(c){var f=
a[c];if(l.isDynamic(f))e[c]=l.unbox(f,c);else{if(b&&Array.isArray(f))for(var g=0;g<f.length;++g)if(l.isDynamic(f[g])){e[c]=l.unbox(f,c);return}d[c]=f}});return{dynamic:e,"static":d}}function d(a){for(;q.length<a;)q.push(null);return q}b(!!a,"invalid args to regl({...})");b.type(a,"object","invalid args to regl({...})");var e=c(a.context||{},!0),f=c(a.uniforms||{},!0),g=c(a.attributes||{},!1);a=c(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+
b]=d[b]})}}var c=x({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=Da.compile(a,g,f,e,h),m=k.draw,n=k.batch,p=k.scope,q=[];return x(function(a,c){var e;la&&b.raise("context lost");if("function"===typeof a)return p.call(this,
null,a,0);if("function"===typeof c)if("number"===typeof a)for(e=0;e<a;++e)p.call(this,null,c,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)p.call(this,a[e],c,e);else return p.call(this,a,c,0);else if("number"===typeof a){if(0<a)return n.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return n.call(this,a,a.length)}else return m.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function ra(a,c){var d=0;Da.procs.poll();var e=c.color;e&&(D.clearColor(+e[0]||0,+e[1]||0,+e[2]||
0,+e[3]||0),d|=16384);"depth"in c&&(D.clearDepth(+c.depth),d|=256);"stencil"in c&&(D.clearStencil(c.stencil|0),d|=1024);b(!!d,"called regl.clear with no buffer specified");D.clear(d)}function I(c){b.type(c,"function","regl.frame() callback must be a function");Ca.push(c);z();return{cancel:function(){function d(){var b=a(Ca,d);Ca[b]=Ca[Ca.length-1];--Ca.length;0>=Ca.length&&L()}var e=a(Ca,c);b(0<=e,"cannot cancel a frame twice");Ca[e]=d}}}function K(){var a=ya.viewport,b=ya.scissor_box;a[0]=a[1]=b[0]=
b[1]=0;P.viewportWidth=P.framebufferWidth=P.drawingBufferWidth=a[2]=b[2]=D.drawingBufferWidth;P.viewportHeight=P.framebufferHeight=P.drawingBufferHeight=a[3]=b[3]=D.drawingBufferHeight}function t(){P.tick+=1;P.time=c();K();Da.procs.poll()}function p(){X.refresh();K();Da.procs.refresh();R&&R.update()}function c(){return(f()-N)/1E3}console.log("REGL args are:",g);g=e(g);console.log("REGL configs are:",g);if(!g)return null;var D=g.gl,r=D.getContextAttributes(),la=D.isContextLost(),na=ga(D,g);if(!na)return null;
var U=d(),aa=H(),T=na.extensions,R=ea(D,T),N=f(),F=D.drawingBufferWidth,O=D.drawingBufferHeight,P={tick:0,time:0,viewportWidth:F,viewportHeight:O,framebufferWidth:F,framebufferHeight:O,drawingBufferWidth:F,drawingBufferHeight:O,pixelRatio:g.pixelRatio},F={elements:null,primitive:4,count:-1,offset:0,instances:-1},qa=w(D,T),ta=u(D,aa,g,function(a){return M.destroyBuffer(a)}),G=pa(D,T,ta,aa),M=ua(D,T,qa,aa,ta,G,F),da=m(D,U,aa,g),X=h(D,T,qa,function(){Da.procs.poll()},P,aa,g),ja=A(D,T,qa,aa,g),oa=n(D,
T,qa,X,ja,aa),Da=J(D,U,T,qa,ta,G,X,oa,{},M,da,F,P,R,g),U=E(D,oa,Da.procs.poll,P,r,T,qa),ya=Da.next,Z=D.canvas,Ca=[],ia=[],ka=[],Ba=[g.onDestroy],Qa=null;Z&&(Z.addEventListener("webglcontextlost",Q,!1),Z.addEventListener("webglcontextrestored",C,!1));var Aa=oa.setFBO=B({framebuffer:l.define.call(null,1,"framebuffer")});p();r=x(B,{clear:function(a){b("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var c=
0;6>c;++c)Aa(x({framebuffer:a.framebuffer.faces[c]},a),ra);else Aa(a,ra);else ra(null,a)},prop:l.define.bind(null,1),context:l.define.bind(null,2),"this":l.define.bind(null,3),draw:B({}),buffer:function(a){return ta.create(a,34962,!1,!1)},elements:function(a){return G.create(a,!1)},texture:X.create2D,cube:X.createCube,renderbuffer:ja.create,framebuffer:oa.create,framebufferCube:oa.createCube,vao:M.createVAO,attributes:r,frame:I,on:function(a,c){b.type(c,"function","listener callback must be a function");
var d;switch(a){case "frame":return I(c);case "lost":d=ia;break;case "restore":d=ka;break;case "destroy":d=Ba;break;default:b.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(c);return{cancel:function(){for(var a=0;a<d.length;++a)if(d[a]===c){d[a]=d[d.length-1];d.pop();break}}}},limits:qa,hasExtension:function(a){return 0<=qa.extensions.indexOf(a.toLowerCase())},read:U,destroy:function(){Ca.length=0;L();Z&&(Z.removeEventListener("webglcontextlost",Q),Z.removeEventListener("webglcontextrestored",
C));da.clear();oa.clear();ja.clear();M.clear();X.clear();G.clear();ta.clear();R&&R.clear();Ba.forEach(function(a){a()})},_gl:D,_refresh:p,poll:function(){t();R&&R.update()},now:c,stats:aa});g.onDone(null,r);return r}},{"./lib/attribute":3,"./lib/buffer":4,"./lib/core":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/stats":18,"./lib/strings":19,"./lib/texture":20,"./lib/timer":21,
"./lib/util/check":22,"./lib/util/clock":23,"./lib/util/extend":26,"./lib/util/raf":34,"./lib/webgl":38}]},{},[1]);

        </script>
        </body>
      </html>
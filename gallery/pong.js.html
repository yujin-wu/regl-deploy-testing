<!DOCTYPE html>
      <html>
        <head>
          <title>example/pong.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function t(G,ga,a){function z(f,g){if(!ga[f]){if(!G[f]){var l="function"==typeof require&&require;if(!g&&l)return l(f,!0);if(v)return v(f,!0);l=Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l;}l=ga[f]={exports:{}};G[f][0].call(l.exports,function(b){return z(G[f][1][b]||b)},l,l.exports,t,G,ga,a)}return ga[f].exports}for(var v="function"==typeof require&&require,Y=0;Y<a.length;Y++)z(a[Y]);return z}return t})()({1:[function(t,G,ga){function a(b,a){this.c=x.fromValues(b[0],
b[1]);this.r=x.fromValues(a[0],a[1])}function z(b,a,e){return a<e?b<a?a:b>e?e:b:b<e?e:b>a?a:b}function v(b,a,e){var g=+(b.c[0]-a.c[0])-(b.r[0]+a.r[0]),B=-(b.c[0]-a.c[0])-(b.r[0]+a.r[0]);if(0<g||0<B)return!1;var u=+(b.c[1]-a.c[1])-e*(b.r[1]+a.r[1]);b=-(b.c[1]-a.c[1])-e*(b.r[1]+a.r[1]);if(0<u||0<b)return!1;if(g>B&&g>u&&g>b)return x.fromValues(-1,0);if(B>g&&B>u&&B>b)return x.fromValues(1,0);if(u>g&&u>B&&u>b)return x.fromValues(0,-1);if(b>g&&b>B&&b>u)return x.fromValues(0,1)}function Y(b,a){return Math.random()*
(a-b)+b}function f(b){r.c=[0,0];r.r=[.02,.02];var a=Y(.3,.4);b=b?Y(Math.PI-1.2,Math.PI+1.2):Y(-1.2,1.2);oa=[a*Math.cos(b),a*Math.sin(b)]}function g(b,a){for(var e=p.sampleRate*b,g=p.createBuffer(2,e,p.sampleRate),B=0;2>B;B++){var u=g.getChannelData(B);a(u,e)}return g}function l(b){var a=p.createBufferSource();a.buffer=b;a.connect(p.destination);a.start()}function b(b,a){l(Q[ma]);ma=(ma+1)%2;return x.subtract(b,b,x.scale([0,0],a,2.1*x.dot(b,a)))}var da=t("../regl")(),x=t("gl-vec2"),F=null;t("mouse-change")(function(b,
a,e){F=e});var T=new a([-.9,0],[.03,.15]),A=new a([.9,0],[.03,.15]),h=new a([0,0],[.005,1]),r=new a([0,0],[0,0]),oa=x.fromValues(0,0),p=new AudioContext,Q=[];Q[0]=g(.15,function(b,a){for(var e=.1,g=0;g<a;g++)0===g%100&&(e*=-1),b[g]=e*(1-g/a)});Q[1]=g(.15,function(b,a){for(var e=.1,g=0;g<a;g++)0===g%150&&(e*=-1),b[g]=e*(1-g/a)});var q=g(.4,function(b,a){for(var g=.1,e=50,B=0;B<a;B++)0===B%e&&(g*=-1),0===B%600&&(e-=2),b[B]=g*(1-B/a)}),L=g(.5,function(b,a){for(var g=Y(-.1,.1),e=0;e<a;e++)0===e%150&&
(g=Y(-.1,.1)),b[e]=g*(1-e/a)}),ma=0,e=da({frag:"\n    precision mediump float;\n    void main() {\n      gl_FragColor = vec4(1.0);\n    }",vert:"\n  precision mediump float;\n\n  attribute vec2 position;\n\n  uniform vec2 offset;\n  uniform vec2 scale;\n\n  uniform float viewportWidth;\n  uniform float viewportHeight;\n\n  void main() {\n    // windows ratio scaling factor.\n    float r = (viewportWidth) / (viewportHeight);\n    gl_Position = vec4(position.xy * scale * vec2(1.0, r) + offset, 0, 1);\n  }",
attributes:{position:[[-1,-1],[1,1],[-1,1],[-1,-1],[1,-1],[1,1]]},uniforms:{offset:function(b,a){return a.aabb.c},scale:function(b,a){return a.aabb.r},viewportWidth:da.context("viewportWidth"),viewportHeight:da.context("viewportHeight")},depth:{enable:!1},cull:{enable:!0},count:6});f(!0);da.frame(function(a){var g=a.viewportWidth,k=a.viewportHeight;a=a.pixelRatio;da.clear({color:[0,0,0,1]});var g=g/k,p=-1+T.r[1]*g,B=1-T.r[1]*g;null!==F&&(T.c[1]=z(-1+2*(1-F*a/k),p,B));A.c[1]=z(A.c[1]+.0323*(r.c[1]-
A.c[1]),p,B);x.scaleAndAdd(r.c,r.c,oa,.017);1<=r.c[1]+g*r.r[1]&&(oa=b(oa,x.fromValues(0,-1)));1<=r.c[0]+r.r[0]&&(l(q),f(!0));-1>=r.c[1]-g*r.r[1]&&(oa=b(oa,x.fromValues(0,1)));-1>=r.c[0]-r.r[0]&&(l(L),f(!1));k=v(A,r,g);!1!==k&&(oa=b(oa,k));k=v(T,r,g);!1!==k&&(oa=b(oa,k));e([{aabb:T},{aabb:A},{aabb:h},{aabb:r}])})},{"../regl":85,"gl-vec2":55,"mouse-change":83}],2:[function(t,G,ga){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=
this.stride=this.offset=0}var z=t("./util/sorted-object-keys"),v=t("./util/check"),Y=t("./util/values"),f=t("./constants/dtypes.json"),g=t("./util/is-typed-array"),l=t("./util/is-ndarray"),b=t("./constants/primitives.json"),da="attributes elements offset count primitive instances".split(" ");G.exports=function(x,F,T,A,h,r,oa){function p(b){if(b!==Z.currentVAO){var a=F.oes_vertex_array_object;b?a.bindVertexArrayOES(b.vao):a.bindVertexArrayOES(null);Z.currentVAO=b}}function Q(b){if(b!==Z.currentVAO){if(b)b.bindAttrs();
else{for(var a=F.angle_instanced_arrays,g=0;g<C.length;++g){var e=C[g];e.buffer?(x.enableVertexAttribArray(g),e.buffer.bind(),x.vertexAttribPointer(g,e.size,e.type,e.normalized,e.stride,e.offfset),a&&e.divisor&&a.vertexAttribDivisorANGLE(g,e.divisor)):(x.disableVertexAttribArray(g),x.vertexAttrib4f(g,e.x,e.y,e.z,e.w))}oa.elements?x.bindBuffer(34963,oa.elements.buffer.buffer):x.bindBuffer(34963,null)}Z.currentVAO=b}}function q(){Y(k).forEach(function(b){b.destroy()})}function L(){this.id=++U;this.attributes=
[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=F.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;k[this.id]=this;this.buffers=[]}function ma(){F.oes_vertex_array_object&&Y(k).forEach(function(b){b.refresh()})}var e=T.maxAttributes,C=Array(e);for(T=0;T<e;++T)C[T]=new a;var U=0,k={},Z={Record:a,scope:{},state:C,currentVAO:null,targetVAO:null,restore:F.oes_vertex_array_object?ma:function(){},createVAO:function(B){function u(B){var C;
if(Array.isArray(B))C=B,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{v("object"===typeof B,"invalid arguments for create vao");v("attributes"in B,"must specify attributes for vao");if(B.elements){var d=B.elements;k.ownsElements?("function"===typeof d&&"elements"===d._reglType?k.elements.destroy():k.elements(d),k.ownsElements=!1):r.getElements(B.elements)?(k.elements=B.elements,k.ownsElements=!1):(k.elements=
r.create(B.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;C=B.attributes;k.offset=0;k.count=-1;k.instances=-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in B&&(k.offset=B.offset|0);"count"in B&&(k.count=B.count|0);"instances"in B&&(k.instances=B.instances|0);"primitive"in B&&(v(B.primitive in b,"bad primitive type: "+B.primitive),k.primitive=b[B.primitive]);v.optional(function(){for(var c=z(B),d=0;d<c.length;++d)v(0<=
da.indexOf(c[d]),'invalid option for vao: "'+c[d]+'" valid options are '+da)});v(Array.isArray(C),"attributes must be an array")}v(C.length<e,"too many attributes");v(0<C.length,"must specify at least one attribute");var d={},R=k.attributes;R.length=C.length;for(var c=0;c<C.length;++c){var q=C[c],K=R[c]=new a,U=q.data||q;if(Array.isArray(U)||g(U)||l(U)){var p;k.buffers[c]&&(p=k.buffers[c],g(U)&&p._buffer.byteLength>=U.byteLength?p.subdata(U):(p.destroy(),k.buffers[c]=null));k.buffers[c]||(p=k.buffers[c]=
h.create(q,34962,!1,!0));K.buffer=h.getBuffer(p);K.size=K.buffer.dimension|0;K.normalized=!1;K.type=K.buffer.dtype;K.offset=0;K.stride=0;K.divisor=0;K.state=1;d[c]=1}else h.getBuffer(q)?(K.buffer=h.getBuffer(q),K.size=K.buffer.dimension|0,K.normalized=!1,K.type=K.buffer.dtype,K.offset=0,K.stride=0,K.divisor=0,K.state=1):h.getBuffer(q.buffer)?(K.buffer=h.getBuffer(q.buffer),K.size=(+q.size||K.buffer.dimension)|0,K.normalized=!!q.normalized||!1,"type"in q?(v.parameter(q.type,f,"invalid buffer type"),
K.type=f[q.type]):K.type=K.buffer.dtype,K.offset=(q.offset||0)|0,K.stride=(q.stride||0)|0,K.divisor=(q.divisor||0)|0,K.state=1,v(1<=K.size&&4>=K.size,"size must be between 1 and 4"),v(0<=K.offset,"invalid offset"),v(0<=K.stride&&255>=K.stride,"stride must be between 0 and 255"),v(0<=K.divisor,"divisor must be positive"),v(!K.divisor||!!F.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in q?(v(0<c,"first attribute must not be a constant"),K.x=+q.x||0,K.y=+q.y||0,
K.z=+q.z||0,K.w=+q.w||0,K.state=2):v(!1,"invalid attribute spec for location "+c)}for(p=0;p<k.buffers.length;++p)!d[p]&&k.buffers[p]&&(k.buffers[p].destroy(),k.buffers[p]=null);k.refresh();return u}var k=new L;A.vaoCount+=1;u.destroy=function(){for(var b=0;b<k.buffers.length;++b)k.buffers[b]&&k.buffers[b].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1);k.destroy()};u._vao=k;u._reglType="vao";return u(B)},getVAO:function(b){return"function"===typeof b&&
b._vao?b._vao:null},destroyBuffer:function(b){for(var a=0;a<C.length;++a){var g=C[a];g.buffer===b&&(x.disableVertexAttribArray(a),g.buffer=null)}},setVAO:F.oes_vertex_array_object?p:Q,clear:F.oes_vertex_array_object?q:function(){}};L.prototype.bindAttrs=function(){for(var b=F.angle_instanced_arrays,a=this.attributes,g=0;g<a.length;++g){var k=a[g];k.buffer?(x.enableVertexAttribArray(g),x.bindBuffer(34962,k.buffer.buffer),x.vertexAttribPointer(g,k.size,k.type,k.normalized,k.stride,k.offset),b&&k.divisor&&
b.vertexAttribDivisorANGLE(g,k.divisor)):(x.disableVertexAttribArray(g),x.vertexAttrib4f(g,k.x,k.y,k.z,k.w))}for(b=a.length;b<e;++b)x.disableVertexAttribArray(b);(b=r.getElements(this.elements))?x.bindBuffer(34963,b.buffer.buffer):x.bindBuffer(34963,null)};L.prototype.refresh=function(){var b=F.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),Z.currentVAO=null,b.bindVertexArrayOES(null))};L.prototype.destroy=function(){if(this.vao){var b=F.oes_vertex_array_object;this===
Z.currentVAO&&(Z.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);k[this.id]&&(delete k[this.id],--A.vaoCount)};return Z}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(t,G,ga){function a(b){return T[Object.prototype.toString.call(b)]|
0}function z(b,a){for(var g=0;g<a.length;++g)b[g]=a[g]}function v(b,a,g,l,z,f,e){for(var C=0,U=0;U<g;++U)for(var k=0;k<l;++k)b[C++]=a[z*U+f*k+e]}var Y=t("./util/sorted-object-keys"),f=t("./util/check"),g=t("./util/is-typed-array"),l=t("./util/is-ndarray"),b=t("./util/values"),da=t("./util/pool");ga=t("./util/flatten");var x=ga.flatten,F=ga.shape,T=t("./constants/arraytypes.json"),A=t("./constants/dtypes.json"),h=t("./constants/usage.json"),r=[];r[5120]=1;r[5122]=2;r[5124]=4;r[5121]=1;r[5123]=2;r[5125]=
4;r[5126]=4;G.exports=function(T,p,Q,q){function L(b){this.id=U++;this.buffer=T.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;Q.profile&&(this.stats={size:0})}function ma(b,a,g){b.byteLength=a.byteLength;T.bufferData(b.type,a,g)}function e(b,e,k,C,q,d){b.usage=k;if(Array.isArray(e)){if(b.dtype=C||5126,0<e.length)if(Array.isArray(e[0])){q=F(e);for(var R=C=1;R<q.length;++R)C*=q[R];b.dimension=C;e=x(e,q,b.dtype);ma(b,e,k);d?b.persistentData=
e:da.freeType(e)}else"number"===typeof e[0]?(b.dimension=q,q=da.allocType(b.dtype,e.length),z(q,e),ma(b,q,k),d?b.persistentData=q:da.freeType(q)):g(e[0])?(b.dimension=e[0].length,b.dtype=C||a(e[0])||5126,e=x(e,[e.length,e[0].length],b.dtype),ma(b,e,k),d?b.persistentData=e:da.freeType(e)):f.raise("invalid buffer data")}else if(g(e))b.dtype=C||a(e),b.dimension=q,ma(b,e,k),d&&(b.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(l(e)){q=e.shape;var c=e.stride,R=e.offset,U=0,K=0,p=0,Y=0;
1===q.length?(U=q[0],K=1,p=c[0],Y=0):2===q.length?(U=q[0],K=q[1],p=c[0],Y=c[1]):f.raise("invalid shape");b.dtype=C||a(e.data)||5126;b.dimension=K;q=da.allocType(b.dtype,U*K);v(q,e.data,U,K,p,Y,R);ma(b,q,k);d?b.persistentData=q:da.freeType(q)}else e instanceof ArrayBuffer?(b.dtype=5121,b.dimension=q,ma(b,e,k),d&&(b.persistentData=new Uint8Array(new Uint8Array(e)))):f.raise("invalid buffer data")}function C(b){p.bufferCount--;q(b);var a=b.buffer;f(a,"buffer must not be deleted already");T.deleteBuffer(a);
b.buffer=null;delete k[b.id]}var U=0,k={};L.prototype.bind=function(){T.bindBuffer(this.type,this.buffer)};L.prototype.destroy=function(){C(this)};var Z=[];Q.profile&&(p.getTotalBufferSize=function(){var b=0;Y(k).forEach(function(a){b+=k[a].stats.size});return b});return{create:function(b,u,q,U){function E(c){var d=35044,b=null,a=0,k=0,u=1;Array.isArray(c)||g(c)||l(c)||c instanceof ArrayBuffer?b=c:"number"===typeof c?a=c|0:c&&(f.type(c,"object","buffer arguments must be an object, a number or an array"),
"data"in c&&(f(null===b||Array.isArray(b)||g(b)||l(b),"invalid data for buffer"),b=c.data),"usage"in c&&(f.parameter(c.usage,h,"invalid buffer usage"),d=h[c.usage]),"type"in c&&(f.parameter(c.type,A,"invalid buffer type"),k=A[c.type]),"dimension"in c&&(f.type(c.dimension,"number","invalid dimension"),u=c.dimension|0),"length"in c&&(f.nni(a,"buffer length must be a nonnegative integer"),a=c.length|0));R.bind();b?e(R,b,d,k,u,U):(a&&T.bufferData(R.type,a,d),R.dtype=k||5121,R.usage=d,R.dimension=u,R.byteLength=
a);Q.profile&&(R.stats.size=R.byteLength*r[R.dtype]);return E}function d(c,d){f(d+c.byteLength<=R.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+c.byteLength+" starting from offset "+d+" to a buffer of size "+R.byteLength);T.bufferSubData(R.type,d,c)}p.bufferCount++;var R=new L(u);k[R.id]=R;q||E(b);E._reglType="buffer";E._buffer=R;E.subdata=function(c,b){var e=(b||0)|0,k;R.bind();if(g(c)||c instanceof ArrayBuffer)d(c,e);else if(Array.isArray(c)){if(0<c.length)if("number"===
typeof c[0]){var u=da.allocType(R.dtype,c.length);z(u,c);d(u,e);da.freeType(u)}else Array.isArray(c[0])||g(c[0])?(k=F(c),u=x(c,k,R.dtype),d(u,e),da.freeType(u)):f.raise("invalid buffer data")}else if(l(c)){k=c.shape;var B=c.stride,q=u=0,C=0,M=0;1===k.length?(u=k[0],q=1,C=B[0],M=0):2===k.length?(u=k[0],q=k[1],C=B[0],M=B[1]):f.raise("invalid shape");k=Array.isArray(c.data)?R.dtype:a(c.data);k=da.allocType(k,u*q);v(k,c.data,u,q,C,M,c.offset);d(k,e);da.freeType(k)}else f.raise("invalid data for buffer subdata");
return E};Q.profile&&(E.stats=R.stats);E.destroy=function(){C(R)};return E},createStream:function(b,a){var g=Z.pop();g||(g=new L(b));g.bind();e(g,a,35040,0,1,!1);return g},destroyStream:function(b){Z.push(b)},clear:function(){b(k).forEach(C);Z.forEach(C)},getBuffer:function(b){return b&&b._buffer instanceof L?b._buffer:null},restore:function(){b(k).forEach(function(b){b.buffer=T.createBuffer();T.bindBuffer(b.type,b.buffer);T.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:e}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(t,G,ga){G.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(t,G,ga){G.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(t,G,ga){G.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(t,G,ga){G.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(t,G,ga){function a(b){return Array.isArray(b)||T(b)||A(b)}function z(b){return b.sort(function(b,
a){return"viewport"===b?-1:"viewport"===a?1:b<a?-1:1})}function v(b,a,e,g){this.thisDep=b;this.contextDep=a;this.propDep=e;this.append=g}function Y(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function f(b){return new v(!1,!1,!1,b)}function g(b,a){var e=b.type;if(0===e)return e=b.data.length,new v(!0,1<=e,2<=e,a);if(4===e)return e=b.data,new v(e.thisDep,e.contextDep,e.propDep,a);if(5===e)return new v(!1,!1,!1,a);if(6===e){for(var g=e=!1,k=!1,d=0;d<b.data.length;++d){var l=b.data[d];1===l.type?
k=!0:2===l.type?g=!0:3===l.type?e=!0:0===l.type?(e=!0,l=l.data,1<=l&&(g=!0),2<=l&&(k=!0)):4===l.type&&(e=e||l.data.thisDep,g=g||l.data.contextDep,k=k||l.data.propDep)}return new v(e,g,k,a)}return new v(3===e,2===e,1===e,a)}var l=t("./util/sorted-object-keys"),b=t("./util/check"),da=t("./util/extend"),x=t("./util/codegen"),F=t("./util/loop"),T=t("./util/is-typed-array"),A=t("./util/is-ndarray"),h=t("./util/is-array-like"),r=t("./dynamic"),oa=t("./constants/primitives.json"),p=t("./constants/dtypes.json"),
Q=["x","y","z","w"],q="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),L={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ma="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
e={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},C={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},U={frag:35632,vert:35633},k={cw:2304,ccw:2305},Z=new v(!1,!1,!1,function(){});G.exports=function(B,u,A,D,E,d,R,c,T,K,ha,Ba,W,ba,S){function M(b){return b.replace(".","_")}function N(b,c,d){var e=M(b);wa.push(b);
X[e]=ka[e]=!!d;Ha[e]=c}function m(b,c,d){var e=M(b);wa.push(b);Array.isArray(d)?(ka[e]=d.slice(),X[e]=d.slice()):ka[e]=X[e]=d;Ka[e]=c}function O(){var c=x(),d=c.link,e=c.global;c.id=yd++;c.batchId="0";var a=d(hb),g=c.shared={props:"a0"};l(hb).forEach(function(c){g[c]=e.def(a,".",c)});b.optional(function(){c.CHECK=d(b);c.commandStr=b.guessCommand();c.command=d(c.commandStr);c.assert=function(c,b,e){c("if(!(",b,"))",this.CHECK,".commandRaise(",d(e),",",this.command,");")};ca.invalidBlendCombinations=
ma});var m=c.next={},w=c.current={};l(Ka).forEach(function(c){Array.isArray(ka[c])&&(m[c]=e.def(g.next,".",c),w[c]=e.def(g.current,".",c))});var y=c.constants={};l(ca).forEach(function(c){y[c]=e.def(JSON.stringify(ca[c]))});c.invoke=function(b,e){switch(e.type){case 0:var a=["this",g.context,g.props,c.batchId];return b.def(d(e.data),".call(",a.slice(0,Math.max(e.data.length+1,4)),")");case 1:return b.def(g.props,e.data);case 2:return b.def(g.context,e.data);case 3:return b.def("this",e.data);case 4:return e.data.append(c,
b),e.data.ref;case 5:return e.data.toString();case 6:return e.data.map(function(d){return c.invoke(b,d)})}};c.attribCache={};var n={};c.scopeAttrib=function(c){c=u.id(c);if(c in n)return n[c];var b=K.scope[c];b||(b=K.scope[c]=new ta);return n[c]=d(b)};return c}function P(c){var b=c["static"];c=c.dynamic;var d;if("profile"in b){var e=!!b.profile;d=f(function(c,b){return e});d.enable=e}else if("profile"in c){var a=c.profile;d=g(a,function(c,b){return c.invoke(b,a)})}return d}function xa(d,e){var a=
d["static"],m=d.dynamic;if("framebuffer"in a){var w=a.framebuffer;return w?(w=c.getFramebuffer(w),b.command(w,"invalid framebuffer object"),f(function(c,b){var d=c.link(w),e=c.shared;b.set(e.framebuffer,".next",d);e=e.context;b.set(e,".framebufferWidth",d+".width");b.set(e,".framebufferHeight",d+".height");return d})):f(function(c,b){var d=c.shared;b.set(d.framebuffer,".next","null");d=d.context;b.set(d,".framebufferWidth",d+".drawingBufferWidth");b.set(d,".framebufferHeight",d+".drawingBufferHeight");
return"null"})}if("framebuffer"in m){var y=m.framebuffer;return g(y,function(c,d){var e=c.invoke(d,y),a=c.shared,g=a.framebuffer,m=d.def(g,".getFramebuffer(",e,")");b.optional(function(){c.assert(d,"!"+e+"||"+m,"invalid framebuffer object")});d.set(g,".next",m);a=a.context;d.set(a,".framebufferWidth",m+"?"+m+".width:"+a+".drawingBufferWidth");d.set(a,".framebufferHeight",m+"?"+m+".height:"+a+".drawingBufferHeight");return m})}return null}function ra(c,d,e){function a(c){if(c in m){var y=m[c];b.commandType(y,
"object","invalid "+c,e.commandStr);var n=!0,k=y.x|0,H=y.y|0,l,u;"width"in y?(l=y.width|0,b.command(0<=l,"invalid "+c,e.commandStr)):n=!1;"height"in y?(u=y.height|0,b.command(0<=u,"invalid "+c,e.commandStr)):n=!1;return new v(!n&&d&&d.thisDep,!n&&d&&d.contextDep,!n&&d&&d.propDep,function(c,b){var d=c.shared.context,e=l;"width"in y||(e=b.def(d,".","framebufferWidth","-",k));var a=u;"height"in y||(a=b.def(d,".","framebufferHeight","-",H));return[k,H,e,a]})}if(c in w){var J=w[c],n=g(J,function(d,e){var a=
d.invoke(e,J);b.optional(function(){d.assert(e,a+"&&typeof "+a+'==="object"',"invalid "+c)});var g=d.shared.context,m=e.def(a,".x|0"),y=e.def(a,".y|0"),w=e.def('"width" in ',a,"?",a,".width|0:","(",g,".","framebufferWidth","-",m,")"),n=e.def('"height" in ',a,"?",a,".height|0:","(",g,".","framebufferHeight","-",y,")");b.optional(function(){d.assert(e,w+">=0&&"+n+">=0","invalid "+c)});return[m,y,w,n]});d&&(n.thisDep=n.thisDep||d.thisDep,n.contextDep=n.contextDep||d.contextDep,n.propDep=n.propDep||d.propDep);
return n}return d?new v(d.thisDep,d.contextDep,d.propDep,function(c,b){var d=c.shared.context;return[0,0,b.def(d,".","framebufferWidth"),b.def(d,".","framebufferHeight")]}):null}var m=c["static"],w=c.dynamic;if(c=a("viewport")){var y=c;c=new v(c.thisDep,c.contextDep,c.propDep,function(c,b){var d=y.append(c,b),e=c.shared.context;b.set(e,".viewportWidth",d[2]);b.set(e,".viewportHeight",d[3]);return d})}return{viewport:c,scissor_box:a("scissor.box")}}function w(c,d){var e=c["static"];if("string"===typeof e.frag&&
"string"===typeof e.vert){if(0<l(d.dynamic).length)return null;var e=d["static"],a=l(e);if(0<a.length&&"number"===typeof e[a[0]]){for(var g=[],m=0;m<a.length;++m)b("number"===typeof e[a[m]],"must specify all vertex attribute locations when using vaos"),g.push([e[a[m]]|0,a[m]]);return g}}return null}function I(c,d,e){function a(c){if(c in m){var d=u.id(m[c]);b.optional(function(){ha.shader(U[c],d,b.guessCommand())});var e=f(function(){return d});e.id=d;return e}if(c in y){var w=y[c];return g(w,function(d,
e){var a=d.invoke(e,w),g=e.def(d.shared.strings,".id(",a,")");b.optional(function(){e(d.shared.shader,".shader(",U[c],",",g,",",d.command,");")});return g})}return null}var m=c["static"],y=c.dynamic,w=a("frag"),n=a("vert"),k=null;Y(w)&&Y(n)?(k=ha.program(n.id,w.id,null,e),c=f(function(c,d){return c.link(k)})):c=new v(w&&w.thisDep||n&&n.thisDep,w&&w.contextDep||n&&n.contextDep,w&&w.propDep||n&&n.propDep,function(c,d){var e=c.shared.shader,a;a=w?w.append(c,d):d.def(e,".","frag");var g;g=n?n.append(c,
d):d.def(e,".","vert");var m=e+".program("+g+","+a;b.optional(function(){m+=","+c.command});return d.def(m+")")});return{frag:w,vert:n,progVar:c,program:k}}function aa(c,e){function m(c,d){if(c in w){var a=w[c]|0;d?y.offset=a:y.instances=a;b.command(!d||0<=a,"invalid "+c,e.commandStr);return f(function(c,b){d&&(c.OFFSET=a);return a})}if(c in n){var J=n[c];return g(J,function(e,a){var g=e.invoke(a,J);d&&(e.OFFSET=g,b.optional(function(){e.assert(a,g+">=0","invalid "+c)}));return g})}if(d){if(u)return f(function(c,
d){return c.OFFSET=0});if(k)return new v(H.thisDep,H.contextDep,H.propDep,function(c,d){return d.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.offset:0")})}else if(k)return new v(H.thisDep,H.contextDep,H.propDep,function(c,d){return d.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.instances:-1")});return null}var w=c["static"],n=c.dynamic,y={},k=!1,H=function(){if("vao"in w){var c=w.vao;null!==c&&null===K.getVAO(c)&&(c=K.createVAO(c));k=!0;y.vao=c;return f(function(d){var b=
K.getVAO(c);return b?d.link(b):"null"})}if("vao"in n){k=!0;var d=n.vao;return g(d,function(c,b){var e=c.invoke(b,d);return b.def(c.shared.vao+".getVAO("+e+")")})}return null}(),u=!1,J=function(){if("elements"in w){var c=w.elements;y.elements=c;if(a(c)){var m=y.elements=d.create(c,!0),c=d.getElements(m);u=!0}else c&&(c=d.getElements(c),u=!0,b.command(c,"invalid elements",e.commandStr));m=f(function(d,b){if(c){var e=d.link(c);return d.ELEMENTS=e}return d.ELEMENTS=null});m.value=c;return m}if("elements"in
n){u=!0;var J=n.elements;return g(J,function(c,d){var e=c.shared,a=e.isBufferArgs,e=e.elements,g=c.invoke(d,J),m=d.def("null"),a=d.def(a,"(",g,")"),w=c.cond(a).then(m,"=",e,".createStream(",g,");")["else"](m,"=",e,".getElements(",g,");");b.optional(function(){c.assert(w["else"],"!"+g+"||"+m,"invalid elements")});d.entry(w);d.exit(c.cond(a).then(e,".destroyStream(",m,");"));return c.ELEMENTS=m})}return k?new v(H.thisDep,H.contextDep,H.propDep,function(c,d){return d.def(c.shared.vao+".currentVAO?"+
c.shared.elements+".getElements("+c.shared.vao+".currentVAO.elements):null")}):null}(),la=m("offset",!0),q=function(){if("primitive"in w){var c=w.primitive;y.primitive=c;b.commandParameter(c,oa,"invalid primitve",e.commandStr);return f(function(d,b){return oa[c]})}if("primitive"in n){var d=n.primitive;return g(d,function(c,e){var a=c.constants.primTypes,g=c.invoke(e,d);b.optional(function(){c.assert(e,g+" in "+a,"invalid primitive, must be one of "+l(oa))});return e.def(a,"[",g,"]")})}return u?Y(J)?
J.value?f(function(c,d){return d.def(c.ELEMENTS,".primType")}):f(function(){return 4}):new v(J.thisDep,J.contextDep,J.propDep,function(c,d){var b=c.ELEMENTS;return d.def(b,"?",b,".primType:",4)}):k?new v(H.thisDep,H.contextDep,H.propDep,function(c,d){return d.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.primitive:4")}):null}(),R=function(){if("count"in w){var c=w.count|0;y.count=c;b.command("number"===typeof c&&0<=c,"invalid vertex count",e.commandStr);return f(function(){return c})}if("count"in
n){var d=n.count;return g(d,function(c,e){var a=c.invoke(e,d);b.optional(function(){c.assert(e,"typeof "+a+'==="number"&&'+a+">=0&&"+a+"===("+a+"|0)","invalid vertex count")});return a})}if(u){if(Y(J)){if(J)return la?new v(la.thisDep,la.contextDep,la.propDep,function(c,d){var e=d.def(c.ELEMENTS,".vertCount-",c.OFFSET);b.optional(function(){c.assert(d,e+">=0","invalid vertex offset/element buffer too small")});return e}):f(function(c,d){return d.def(c.ELEMENTS,".vertCount")});var a=f(function(){return-1});
b.optional(function(){a.MISSING=!0});return a}var m=new v(J.thisDep||la.thisDep,J.contextDep||la.contextDep,J.propDep||la.propDep,function(c,d){var b=c.ELEMENTS;return c.OFFSET?d.def(b,"?",b,".vertCount-",c.OFFSET,":-1"):d.def(b,"?",b,".vertCount:-1")});b.optional(function(){m.DYNAMIC=!0});return m}return k?new v(H.thisDep,H.contextDep,H.propDep,function(c,d){return d.def(c.shared.vao,".currentVAO?",c.shared.vao,".currentVAO.count:-1")}):null}(),M=m("instances",!1);return{elements:J,primitive:q,count:R,
instances:M,offset:la,vao:H,vaoActive:k,elementsActive:u,"static":y}}function V(c,d){var a=c["static"],m=c.dynamic,w={};wa.forEach(function(c){function n(d,b){if(c in a){var e=d(a[c]);w[y]=f(function(){return e})}else if(c in m){var k=m[c];w[y]=g(k,function(c,d){return b(c,d,c.invoke(d,k))})}}var y=M(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return n(function(e){b.commandType(e,
"boolean",c,d.commandStr);return e},function(d,e,a){b.optional(function(){d.assert(e,"typeof "+a+'==="boolean"',"invalid flag "+c,d.commandStr)});return a});case "depth.func":return n(function(a){b.commandParameter(a,e,"invalid "+c,d.commandStr);return e[a]},function(d,a,g){var m=d.constants.compareFuncs;b.optional(function(){d.assert(a,g+" in "+m,"invalid "+c+", must be one of "+l(e))});return a.def(m,"[",g,"]")});case "depth.range":return n(function(c){b.command(h(c)&&2===c.length&&"number"===typeof c[0]&&
"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",d.commandStr);return c},function(c,d,e){b.optional(function(){c.assert(d,c.shared.isArrayLike+"("+e+")&&"+e+".length===2&&typeof "+e+'[0]==="number"&&typeof '+e+'[1]==="number"&&'+e+"[0]<="+e+"[1]","depth range must be a 2d array")});var a=d.def("+",e,"[0]"),g=d.def("+",e,"[1]");return[a,g]});case "blend.func":return n(function(c){b.commandType(c,"object","blend.func",d.commandStr);var e="srcRGB"in c?c.srcRGB:c.src,a="srcAlpha"in c?c.srcAlpha:
c.src,g="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;b.commandParameter(e,L,y+".srcRGB",d.commandStr);b.commandParameter(a,L,y+".srcAlpha",d.commandStr);b.commandParameter(g,L,y+".dstRGB",d.commandStr);b.commandParameter(c,L,y+".dstAlpha",d.commandStr);b.command(-1===ma.indexOf(e+", "+g),"unallowed blending combination (srcRGB, dstRGB) = ("+e+", "+g+")",d.commandStr);return[L[e],L[g],L[a],L[c]]},function(d,e,a){function g(n,w){var y=e.def('"',n,w,'" in ',a,"?",a,".",n,w,":",a,".",
n);b.optional(function(){d.assert(e,y+" in "+m,"invalid "+c+"."+n+w+", must be one of "+l(L))});return y}var m=d.constants.blendFuncs;b.optional(function(){d.assert(e,a+"&&typeof "+a+'==="object"',"invalid blend func, must be an object")});var n=g("src","RGB"),w=g("dst","RGB");b.optional(function(){d.assert(e,d.constants.invalidBlendCombinations+".indexOf("+n+'+", "+'+w+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var y=e.def(m,"[",n,"]"),k=e.def(m,"[",g("src","Alpha"),"]"),
H=e.def(m,"[",w,"]"),J=e.def(m,"[",g("dst","Alpha"),"]");return[y,H,k,J]});case "blend.equation":return n(function(e){if("string"===typeof e)return b.commandParameter(e,Ga,"invalid "+c,d.commandStr),[Ga[e],Ga[e]];if("object"===typeof e)return b.commandParameter(e.rgb,Ga,c+".rgb",d.commandStr),b.commandParameter(e.alpha,Ga,c+".alpha",d.commandStr),[Ga[e.rgb],Ga[e.alpha]];b.commandRaise("invalid blend.equation",d.commandStr)},function(d,e,a){var g=d.constants.blendEquations,m=e.def(),n=e.def(),w=d.cond("typeof ",
a,'==="string"');b.optional(function(){function b(c,e,a){d.assert(c,a+" in "+g,"invalid "+e+", must be one of "+l(Ga))}b(w.then,c,a);d.assert(w["else"],a+"&&typeof "+a+'==="object"',"invalid "+c);b(w["else"],c+".rgb",a+".rgb");b(w["else"],c+".alpha",a+".alpha")});w.then(m,"=",n,"=",g,"[",a,"];");w["else"](m,"=",g,"[",a,".rgb];",n,"=",g,"[",a,".alpha];");e(w);return[m,n]});case "blend.color":return n(function(c){b.command(h(c)&&4===c.length,"blend.color must be a 4d array",d.commandStr);return F(4,
function(d){return+c[d]})},function(c,d,e){b.optional(function(){c.assert(d,c.shared.isArrayLike+"("+e+")&&"+e+".length===4","blend.color must be a 4d array")});return F(4,function(c){return d.def("+",e,"[",c,"]")})});case "stencil.mask":return n(function(c){b.commandType(c,"number",y,d.commandStr);return c|0},function(c,d,e){b.optional(function(){c.assert(d,"typeof "+e+'==="number"',"invalid stencil.mask")});return d.def(e,"|0")});case "stencil.func":return n(function(a){b.commandType(a,"object",
y,d.commandStr);var g=a.cmp||"keep",m=a.ref||0;a="mask"in a?a.mask:-1;b.commandParameter(g,e,c+".cmp",d.commandStr);b.commandType(m,"number",c+".ref",d.commandStr);b.commandType(a,"number",c+".mask",d.commandStr);return[e[g],m,a]},function(c,d,e){var a=c.constants.compareFuncs;b.optional(function(){function b(){c.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(e+"&&typeof ",e,'==="object"');b('!("cmp" in ',e,")||(",e,".cmp in ",a,")")});var g=d.def('"cmp" in ',e,"?",a,"[",
e,".cmp]",":",7680),m=d.def(e,".ref|0"),n=d.def('"mask" in ',e,"?",e,".mask|0:-1");return[g,m,n]});case "stencil.opFront":case "stencil.opBack":return n(function(e){b.commandType(e,"object",y,d.commandStr);var a=e.fail||"keep",g=e.zfail||"keep";e=e.zpass||"keep";b.commandParameter(a,C,c+".fail",d.commandStr);b.commandParameter(g,C,c+".zfail",d.commandStr);b.commandParameter(e,C,c+".zpass",d.commandStr);return["stencil.opBack"===c?1029:1028,C[a],C[g],C[e]]},function(d,e,a){function g(n){b.optional(function(){d.assert(e,
'!("'+n+'" in '+a+")||("+a+"."+n+" in "+m+")","invalid "+c+"."+n+", must be one of "+l(C))});return e.def('"',n,'" in ',a,"?",m,"[",a,".",n,"]:",7680)}var m=d.constants.stencilOps;b.optional(function(){d.assert(e,a+"&&typeof "+a+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,g("fail"),g("zfail"),g("zpass")]});case "polygonOffset.offset":return n(function(c){b.commandType(c,"object",y,d.commandStr);var e=c.factor|0;c=c.units|0;b.commandType(e,"number",y+".factor",d.commandStr);
b.commandType(c,"number",y+".units",d.commandStr);return[e,c]},function(d,e,a){b.optional(function(){d.assert(e,a+"&&typeof "+a+'==="object"',"invalid "+c)});var g=e.def(a,".factor|0"),m=e.def(a,".units|0");return[g,m]});case "cull.face":return n(function(c){var e=0;"front"===c?e=1028:"back"===c&&(e=1029);b.command(!!e,y,d.commandStr);return e},function(c,d,e){b.optional(function(){c.assert(d,e+'==="front"||'+e+'==="back"',"invalid cull.face")});return d.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return n(function(c){b.command("number"===
typeof c&&c>=D.lineWidthDims[0]&&c<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+" and "+D.lineWidthDims[1],d.commandStr);return c},function(c,d,e){b.optional(function(){c.assert(d,"typeof "+e+'==="number"&&'+e+">="+D.lineWidthDims[0]+"&&"+e+"<="+D.lineWidthDims[1],"invalid line width")});return e});case "frontFace":return n(function(c){b.commandParameter(c,k,y,d.commandStr);return k[c]},function(c,d,e){b.optional(function(){c.assert(d,e+'==="cw"||'+
e+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(e+'==="cw"?2304:2305')});case "colorMask":return n(function(c){b.command(h(c)&&4===c.length,"color.mask must be length 4 array",d.commandStr);return c.map(function(c){return!!c})},function(c,d,e){b.optional(function(){c.assert(d,c.shared.isArrayLike+"("+e+")&&"+e+".length===4","invalid color.mask")});return F(4,function(c){return"!!"+e+"["+c+"]"})});case "sample.coverage":return n(function(c){b.command("object"===typeof c&&c,
y,d.commandStr);var e="value"in c?c.value:1;c=!!c.invert;b.command("number"===typeof e&&0<=e&&1>=e,"sample.coverage.value must be a number between 0 and 1",d.commandStr);return[e,c]},function(c,d,e){b.optional(function(){c.assert(d,e+"&&typeof "+e+'==="object"',"invalid sample.coverage")});var a=d.def('"value" in ',e,"?+",e,".value:1"),g=d.def("!!",e,".invert");return[a,g]})}});return w}function na(c,d){var e=c["static"],a=c.dynamic,m={};l(e).forEach(function(c){var a=e[c],g;if("number"===typeof a||
"boolean"===typeof a)g=f(function(){return a});else if("function"===typeof a){var n=a._reglType;"texture2d"===n||"textureCube"===n?g=f(function(c){return c.link(a)}):"framebuffer"===n||"framebufferCube"===n?(b.command(0<a.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',d.commandStr),g=f(function(c){return c.link(a.color[0])})):b.commandRaise('invalid data for uniform "'+c+'"',d.commandStr)}else h(a)?g=f(function(d){return d.global.def("[",F(a.length,function(e){b.command("number"===
typeof a[e]||"boolean"===typeof a[e],"invalid uniform "+c,d.commandStr);return a[e]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+c+'"',d.commandStr);g.value=a;m[c]=g});l(a).forEach(function(c){var d=a[c];m[c]=g(d,function(c,e){return c.invoke(e,d)})});return m}function sa(c,d){var e=c["static"],m=c.dynamic,n={};l(e).forEach(function(c){var g=e[c],m=u.id(c),w=new ta;if(a(g))w.state=1,w.buffer=E.getBuffer(E.create(g,34962,!1,!0)),w.type=0;else{var y=E.getBuffer(g);if(y)w.state=1,
w.buffer=y,w.type=0;else if(b.command("object"===typeof g&&g,"invalid data for attribute "+c,d.commandStr),"constant"in g){var k=g.constant;w.buffer="null";w.state=2;"number"===typeof k?w.x=k:(b.command(h(k)&&0<k.length&&4>=k.length,"invalid constant for attribute "+c,d.commandStr),Q.forEach(function(c,d){d<k.length&&(w[c]=k[d])}))}else{y=a(g.buffer)?E.getBuffer(E.create(g.buffer,34962,!1,!0)):E.getBuffer(g.buffer);b.command(!!y,'missing buffer for attribute "'+c+'"',d.commandStr);var H=g.offset|
0;b.command(0<=H,'invalid offset for attribute "'+c+'"',d.commandStr);var J=g.stride|0;b.command(0<=J&&256>J,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',d.commandStr);var la=g.size|0;b.command(!("size"in g)||0<la&&4>=la,'invalid size for attribute "'+c+'", must be 1,2,3,4',d.commandStr);var q=!!g.normalized,R=0;"type"in g&&(b.commandParameter(g.type,p,"invalid type for attribute "+c,d.commandStr),R=p[g.type]);var M=g.divisor|0;b.optional(function(){"divisor"in g&&(b.command(0===
M||pa,'cannot specify divisor for attribute "'+c+'", instancing not supported',d.commandStr),b.command(0<=M,'invalid divisor for attribute "'+c+'"',d.commandStr));var e=d.commandStr,a="buffer offset divisor normalized type size stride".split(" ");l(g).forEach(function(d){b.command(0<=a.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+c+'" (valid parameters are '+a+")",e)})});w.buffer=y;w.state=1;w.size=la;w.normalized=q;w.type=R||y.dtype;w.offset=H;w.stride=J;w.divisor=M}}n[c]=f(function(c,
d){var e=c.attribCache;if(m in e)return e[m];var b={isStream:!1};l(w).forEach(function(c){b[c]=w[c]});w.buffer&&(b.buffer=c.link(w.buffer),b.type=b.type||b.buffer+".dtype");return e[m]=b})});l(m).forEach(function(c){var d=m[c];n[c]=g(d,function(e,a){function g(c){a(H[c],"=",m,".",c,"|0;")}var m=e.invoke(a,d),w=e.shared,n=e.constants,y=w.isBufferArgs,k=w.buffer;b.optional(function(){e.assert(a,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+y+"("+m+")||"+k+".getBuffer("+m+")||"+k+".getBuffer("+
m+".buffer)||"+y+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+w.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+c+'"')});var H={isStream:a.def(!1)},J=new ta;J.state=1;l(J).forEach(function(c){H[c]=a.def(""+J[c])});var u=H.buffer,la=H.type;a("if(",y,"(",m,")){",H.isStream,"=true;",u,"=",k,".createStream(",34962,",",m,");",la,"=",u,".dtype;","}else{",u,"=",k,".getBuffer(",m,");","if(",u,"){",la,"=",u,".dtype;",'}else if("constant" in ',m,"){",H.state,"=",
2,";","if(typeof "+m+'.constant === "number"){',H[Q[0]],"=",m,".constant;",Q.slice(1).map(function(c){return H[c]}).join("="),"=0;","}else{",Q.map(function(c,d){return H[c]+"="+m+".constant.length>"+d+"?"+m+".constant["+d+"]:0;"}).join(""),"}}else{","if(",y,"(",m,".buffer)){",u,"=",k,".createStream(",34962,",",m,".buffer);","}else{",u,"=",k,".getBuffer(",m,".buffer);","}",la,'="type" in ',m,"?",n.glTypes,"[",m,".type]:",u,".dtype;",H.normalized,"=!!",m,".normalized;");g("size");g("offset");g("stride");
g("divisor");a("}}");a.exit("if(",H.isStream,"){",k,".destroyStream(",u,");","}");return H})});return n}function Ca(c){var d=c["static"],e=c.dynamic,b={};l(d).forEach(function(c){var e=d[c];b[c]=f(function(c,d){return"number"===typeof e||"boolean"===typeof e?""+e:c.link(e)})});l(e).forEach(function(c){var d=e[c];b[c]=g(d,function(c,e){return c.invoke(e,d)})});return b}function ya(c,d,e,a,g){function m(c){var d=J[c];d&&(la[c]=d)}var n=c["static"],y=c.dynamic;b.optional(function(){function c(e){l(e).forEach(function(c){b.command(0<=
d.indexOf(c),'unknown parameter "'+c+'"',g.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(wa);c(n);c(y)});var k=w(c,d),H=xa(c,g),J=ra(c,H,g),u=aa(c,g),la=V(c,g),q=I(c,g,k);m("viewport");m(M("scissor.box"));var R=0<l(la).length,H={framebuffer:H,draw:u,shader:q,state:la,dirty:R,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};H.profile=P(c,g);H.uniforms=na(e,g);H.drawVAO=H.scopeVAO=u.vao;if(!H.drawVAO&&q.program&&!k&&A.angle_instanced_arrays&&
u["static"].elements){var B=!0;c=q.program.attributes.map(function(c){c=d["static"][c];B=B&&!!c;return c});if(B&&0<c.length){var C=K.getVAO(K.createVAO({attributes:c,elements:u["static"].elements}));H.drawVAO=new v(null,null,null,function(c,d){return c.link(C)});H.useVAO=!0}}k?H.useVAO=!0:H.attributes=sa(d,g);H.context=Ca(a,g);return H}function ea(c,d,e){var b=c.shared.context,a=c.scope();l(e).forEach(function(g){d.save(b,"."+g);var m=e[g].append(c,d);Array.isArray(m)?a(b,".",g,"=[",m.join(),"];"):
a(b,".",g,"=",m,";")});d(a)}function Da(c,d,e,b){var a=c.shared,g=a.gl,m=a.framebuffer,w;za&&(w=d.def(a.extensions,".webgl_draw_buffers"));var n=c.constants,a=n.drawBuffer,n=n.backBuffer;c=e?e.append(c,d):d.def(m,".next");b||d("if(",c,"!==",m,".cur){");d("if(",c,"){",g,".bindFramebuffer(",36160,",",c,".framebuffer);");za&&d(w,".drawBuffersWEBGL(",a,"[",c,".colorAttachments.length]);");d("}else{",g,".bindFramebuffer(",36160,",null);");za&&d(w,".drawBuffersWEBGL(",n,");");d("}",m,".cur=",c,";");b||
d("}")}function ja(c,d,e){var b=c.shared,a=b.gl,g=c.current,m=c.next,w=b.current,n=b.next,y=c.cond(w,".dirty");wa.forEach(function(d){d=M(d);if(!(d in e.state)){var b,k;if(d in m){b=m[d];k=g[d];var H=F(ka[d].length,function(c){return y.def(b,"[",c,"]")});y(c.cond(H.map(function(c,d){return c+"!=="+k+"["+d+"]"}).join("||")).then(a,".",Ka[d],"(",H,");",H.map(function(c,d){return k+"["+d+"]="+c}).join(";"),";"))}else b=y.def(n,".",d),H=c.cond(b,"!==",w,".",d),y(H),d in Ha?H(c.cond(b).then(a,".enable(",
Ha[d],");")["else"](a,".disable(",Ha[d],");"),w,".",d,"=",b,";"):H(a,".",Ka[d],"(",b,");",w,".",d,"=",b,";")}});0===l(e.state).length&&y(w,".dirty=false;");d(y)}function qa(c,d,e,b){var a=c.shared,g=c.current,m=a.current,w=a.gl;z(l(e)).forEach(function(a){var n=e[a];if(!b||b(n)){var y=n.append(c,d);if(Ha[a]){var k=Ha[a];Y(n)?y?d(w,".enable(",k,");"):d(w,".disable(",k,");"):d(c.cond(y).then(w,".enable(",k,");")["else"](w,".disable(",k,");"));d(m,".",a,"=",y,";")}else if(h(y)){var H=g[a];d(w,".",Ka[a],
"(",y,");",y.map(function(c,d){return H+"["+d+"]="+c}).join(";"),";")}else d(w,".",Ka[a],"(",y,");",m,".",a,"=",y,";")}})}function Aa(c,d){pa&&(c.instancing=d.def(c.shared.extensions,".angle_instanced_arrays"))}function Qa(c,d,e,b,a){function g(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function m(c){u=d.def();c(u,"=",g(),";");"string"===typeof a?c(k,".count+=",a,";"):c(k,".count++;");ba&&(b?(la=d.def(),c(la,"=",J,".getNumPendingQueries();")):c(J,".beginQuery(",k,");"))}
function w(c){c(k,".cpuTime+=",g(),"-",u,";");ba&&(b?c(J,".pushScopeStats(",la,",",J,".getNumPendingQueries(),",k,");"):c(J,".endQuery();"))}function n(c){var e=d.def(H,".profile");d(H,".profile=",c,";");d.exit(H,".profile=",e,";")}var y=c.shared,k=c.stats,H=y.current,J=y.timer;e=e.profile;var u,la;if(e){if(Y(e)){e.enable?(m(d),w(d.exit),n("true")):n("false");return}e=e.append(c,d);n(e)}else e=d.def(H,".profile");y=c.block();m(y);d("if(",e,"){",y,"}");c=c.block();w(c);d.exit("if(",e,"){",c,"}")}function la(c,
d,e,a,g){function m(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function w(e,b,a){function g(){d("if(!",H,".buffer){",y,".enableVertexAttribArray(",k,");}");var e=a.type,m;m=a.size?d.def(a.size,"||",b):b;d("if(",H,".type!==",e,"||",H,".size!==",m,"||",la.map(function(c){return H+"."+c+"!=="+a[c]}).join("||"),"){",y,".bindBuffer(",34962,",",J,".buffer);",y,".vertexAttribPointer(",[k,m,e,
a.normalized,a.stride,a.offset],");",H,".type=",e,";",H,".size=",m,";",la.map(function(c){return H+"."+c+"="+a[c]+";"}).join(""),"}");pa&&(e=a.divisor,d("if(",H,".divisor!==",e,"){",c.instancing,".vertexAttribDivisorANGLE(",[k,e],");",H,".divisor=",e,";}"))}function m(){d("if(",H,".buffer){",y,".disableVertexAttribArray(",k,");",H,".buffer=null;","}if(",Q.map(function(c,d){return H+"."+c+"!=="+u[d]}).join("||"),"){",y,".vertexAttrib4f(",k,",",u,");",Q.map(function(c,d){return H+"."+c+"="+u[d]+";"}).join(""),
"}")}var y=n.gl,k=d.def(e,".location"),H=d.def(n.attributes,"[",k,"]");e=a.state;var J=a.buffer,u=[a.x,a.y,a.z,a.w],la=["buffer","normalized","offset","stride"];1===e?g():2===e?m():(d("if(",e,"===",1,"){"),g(),d("}else{"),m(),d("}"))}var n=c.shared;a.forEach(function(a){var n=a.name,y=e.attributes[n],k;if(y){if(!g(y))return;k=y.append(c,d)}else{if(!g(Z))return;var H=c.scopeAttrib(n);b.optional(function(){c.assert(d,H+".state","missing attribute "+n)});k={};l(new ta).forEach(function(c){k[c]=d.def(H,
".",c)})}w(c.link(a),m(a.info.type),k)})}function dc(c,d,e,a,g,m){for(var w=c.shared,n=w.gl,y,k=0;k<a.length;++k){var H=a[k],J=H.name,la=H.info.type,l=e.uniforms[J],H=c.link(H)+".location",q;if(l){if(!g(l))continue;if(Y(l)){var R=l.value;b.command(null!==R&&"undefined"!==typeof R,'missing uniform "'+J+'"',c.commandStr);if(35678===la||35680===la)b.command("function"===typeof R&&(35678===la&&("texture2d"===R._reglType||"framebuffer"===R._reglType)||35680===la&&("textureCube"===R._reglType||"framebufferCube"===
R._reglType)),"invalid texture for uniform "+J,c.commandStr),l=c.link(R._texture||R.color[0]._texture),d(n,".uniform1i(",H,",",l+".bind());"),d.exit(l,".unbind();");else if(35674===la||35675===la||35676===la){b.optional(function(){b.command(h(R),"invalid matrix for uniform "+J,c.commandStr);b.command(35674===la&&4===R.length||35675===la&&9===R.length||35676===la&&16===R.length,"invalid length for matrix uniform "+J,c.commandStr)});var l=c.global.def("new Float32Array(["+Array.prototype.slice.call(R)+
"])"),M=2;35675===la?M=3:35676===la&&(M=4);d(n,".uniformMatrix",M,"fv(",H,",false,",l,");")}else{switch(la){case 5126:b.commandType(R,"number","uniform "+J,c.commandStr);y="1f";break;case 35664:b.command(h(R)&&2===R.length,"uniform "+J,c.commandStr);y="2f";break;case 35665:b.command(h(R)&&3===R.length,"uniform "+J,c.commandStr);y="3f";break;case 35666:b.command(h(R)&&4===R.length,"uniform "+J,c.commandStr);y="4f";break;case 35670:b.commandType(R,"boolean","uniform "+J,c.commandStr);y="1i";break;case 5124:b.commandType(R,
"number","uniform "+J,c.commandStr);y="1i";break;case 35671:b.command(h(R)&&2===R.length,"uniform "+J,c.commandStr);y="2i";break;case 35667:b.command(h(R)&&2===R.length,"uniform "+J,c.commandStr);y="2i";break;case 35672:b.command(h(R)&&3===R.length,"uniform "+J,c.commandStr);y="3i";break;case 35668:b.command(h(R)&&3===R.length,"uniform "+J,c.commandStr);y="3i";break;case 35673:b.command(h(R)&&4===R.length,"uniform "+J,c.commandStr);y="4i";break;case 35669:b.command(h(R)&&4===R.length,"uniform "+J,
c.commandStr),y="4i"}d(n,".uniform",y,"(",H,",",h(R)?Array.prototype.slice.call(R):R,");")}continue}else q=l.append(c,d)}else{if(!g(Z))continue;q=d.def(w.uniforms,"[",u.id(J),"]")}35678===la?(b(!Array.isArray(q),"must specify a scalar prop for textures"),d("if(",q,"&&",q,'._reglType==="framebuffer"){',q,"=",q,".color[0];","}")):35680===la&&(b(!Array.isArray(q),"must specify a scalar prop for cube maps"),d("if(",q,"&&",q,'._reglType==="framebufferCube"){',q,"=",q,".color[0];","}"));b.optional(function(){function e(a,
b){c.assert(d,a,'bad data or missing for uniform "'+J+'".  '+b)}function a(c){b(!Array.isArray(q),"must not specify an array type for uniform");e("typeof "+q+'==="'+c+'"',"invalid type, expected "+c)}function g(d,a){Array.isArray(q)?b(q.length===d,"must have length "+d):e(w.isArrayLike+"("+q+")&&"+q+".length==="+d,"invalid vector, should have length "+d,c.commandStr)}function m(d){b(!Array.isArray(q),"must not specify a value type");e("typeof "+q+'==="function"&&'+q+'._reglType==="texture'+(3553===
d?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(la){case 5124:a("number");break;case 35667:g(2,"number");break;case 35668:g(3,"number");break;case 35669:g(4,"number");break;case 5126:a("number");break;case 35664:g(2,"number");break;case 35665:g(3,"number");break;case 35666:g(4,"number");break;case 35670:a("boolean");break;case 35671:g(2,"boolean");break;case 35672:g(3,"boolean");break;case 35673:g(4,"boolean");break;case 35674:g(4,"number");break;case 35675:g(9,"number");break;case 35676:g(16,
"number");break;case 35678:m(3553);break;case 35680:m(34067)}});l=1;switch(la){case 35678:case 35680:l=d.def(q,"._texture");d(n,".uniform1i(",H,",",l,".bind());");d.exit(l,".unbind();");continue;case 5124:case 35670:y="1i";break;case 35667:case 35671:y="2i";l=2;break;case 35668:case 35672:y="3i";l=3;break;case 35669:case 35673:y="4i";l=4;break;case 5126:y="1f";break;case 35664:y="2f";l=2;break;case 35665:y="3f";l=3;break;case 35666:y="4f";l=4;break;case 35674:y="Matrix2fv";break;case 35675:y="Matrix3fv";
break;case 35676:y="Matrix4fv"}if("M"===y.charAt(0)){d(n,".uniform",y,"(",H,",");var H=Math.pow(la-35674+2,2),B=c.global.def("new Float32Array(",H,")");Array.isArray(q)?d("false,(",F(H,function(c){return B+"["+c+"]="+q[c]}),",",B,")"):d("false,(Array.isArray(",q,")||",q," instanceof Float32Array)?",q,":(",F(H,function(c){return B+"["+c+"]="+q+"["+c+"]"}),",",B,")");d(");")}else{if(1<l){for(var M=[],C=[],ta=0;ta<l;++ta)Array.isArray(q)?C.push(q[ta]):C.push(d.def(q+"["+ta+"]")),m&&M.push(d.def());m&&
d("if(!",c.batchId,"||",M.map(function(c,d){return c+"!=="+C[d]}).join("||"),"){",M.map(function(c,d){return c+"="+C[d]+";"}).join(""));d(n,".uniform",y,"(",H,",",C.join(","),");")}else b(!Array.isArray(q),"uniform value must not be an array"),m&&(l=d.def(),d("if(!",c.batchId,"||",l,"!==",q,"){",l,"=",q,";")),d(n,".uniform",y,"(",H,",",q,");");m&&d("}")}}}function Ya(c,d,e,a){function g(b){var m=k[b];return m?m.contextDep&&a.contextDynamic||m.propDep?m.append(c,e):m.append(c,d):d.def(H,".",b)}function m(){function c(){e(R,
".drawElementsInstancedANGLE(",[la,l,M,u+"<<(("+M+"-5121)>>1)",q],");")}function d(){e(R,".drawArraysInstancedANGLE(",[la,u,l,q],");")}J&&"null"!==J?B?c():(e("if(",J,"){"),c(),e("}else{"),d(),e("}")):d()}function y(){function c(){e(w+".drawElements("+[la,l,M,u+"<<(("+M+"-5121)>>1)"]+");")}function d(){e(w+".drawArrays("+[la,u,l]+");")}J&&"null"!==J?B?c():(e("if(",J,"){"),c(),e("}else{"),d(),e("}")):d()}var n=c.shared,w=n.gl,H=n.draw,k=a.draw,J=function(){var b=k.elements,g=d;if(b){if(b.contextDep&&
a.contextDynamic||b.propDep)g=e;b=b.append(c,g);k.elementsActive&&g("if("+b+")"+w+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=g.def(),g(b,"=",H,".","elements",";","if(",b,"){",w,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",n.vao,".currentVAO){",b,"=",c.shared.elements+".getElements("+n.vao,".currentVAO.elements);",Ea?"":"if("+b+")"+w+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),la=g("primitive"),u=g("offset"),l=function(){var g=k.count,m,y=d;if(g){if(g.contextDep&&
a.contextDynamic||g.propDep)y=e;m=g.append(c,y);b.optional(function(){g.MISSING&&c.assert(d,"false","missing vertex count");g.DYNAMIC&&c.assert(y,m+">=0","missing vertex count")})}else m=y.def(H,".","count"),b.optional(function(){c.assert(y,m+">=0","missing vertex count")});return m}();if("number"===typeof l){if(0===l)return}else e("if(",l,"){"),e.exit("}");var q,R;pa&&(q=g("instances"),R=c.instancing);var M=J+".type",B=k.elements&&Y(k.elements)&&!k.vaoActive;pa&&("number"!==typeof q||0<=q)?"string"===
typeof q?(e("if(",q,">0){"),m(),e("}else if(",q,"<0){"),y(),e("}")):m():y()}function y(c,d,e,a,g){var m=O();g=m.proc("body",g);b.optional(function(){m.commandStr=d.commandStr;m.command=m.link(d.commandStr)});pa&&(m.instancing=g.def(m.shared.extensions,".angle_instanced_arrays"));c(m,g,e,a);return m.compile().body}function n(c,d,e,a){Aa(c,d);e.useVAO?e.drawVAO?d(c.shared.vao,".setVAO(",e.drawVAO.append(c,d),");"):d(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(d(c.shared.vao,".setVAO(null);"),
la(c,d,e,a.attributes,function(){return!0}));dc(c,d,e,a.uniforms,function(){return!0},!1);Ya(c,d,d,e)}function J(c,d){var e=c.proc("draw",1);Aa(c,e);ea(c,e,d.context);Da(c,e,d.framebuffer);ja(c,e,d);qa(c,e,d.state);Qa(c,e,d,!1,!0);var a=d.shader.progVar.append(c,e);e(c.shared.gl,".useProgram(",a,".program);");if(d.shader.program)n(c,e,d,d.shader.program);else{e(c.shared.vao,".setVAO(null);");var b=c.global.def("{}"),g=e.def(a,".id"),m=e.def(b,"[",g,"]");e(c.cond(m).then(m,".call(this,a0);")["else"](m,
"=",b,"[",g,"]=",c.link(function(e){return y(n,c,d,e,1)}),"(",a,");",m,".call(this,a0);"))}0<l(d.state).length&&e(c.shared.current,".dirty=true;");c.shared.vao&&e(c.shared.vao,".setVAO(null);")}function va(c,d,e,a){function b(){return!0}c.batchId="a1";Aa(c,d);la(c,d,e,a.attributes,b);dc(c,d,e,a.uniforms,b,!1);Ya(c,d,d,e)}function Fa(c,d,e,a){function b(c){return c.contextDep&&m||c.propDep}function g(c){return!b(c)}Aa(c,d);var m=e.contextDep,w=d.def(),n=d.def();c.shared.props=n;c.batchId=w;var H=c.scope(),
k=c.scope();d(H.entry,"for(",w,"=0;",w,"<","a1",";++",w,"){",n,"=","a0","[",w,"];",k,"}",H.exit);e.needsContext&&ea(c,k,e.context);e.needsFramebuffer&&Da(c,k,e.framebuffer);qa(c,k,e.state,b);e.profile&&b(e.profile)&&Qa(c,k,e,!1,!0);a?(e.useVAO?e.drawVAO?b(e.drawVAO)?k(c.shared.vao,".setVAO(",e.drawVAO.append(c,k),");"):H(c.shared.vao,".setVAO(",e.drawVAO.append(c,H),");"):H(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(H(c.shared.vao,".setVAO(null);"),la(c,H,e,a.attributes,g),la(c,k,e,a.attributes,
b)),dc(c,H,e,a.uniforms,g,!1),dc(c,k,e,a.uniforms,b,!0),Ya(c,H,k,e)):(d=c.global.def("{}"),a=e.shader.progVar.append(c,k),n=k.def(a,".id"),H=k.def(d,"[",n,"]"),k(c.shared.gl,".useProgram(",a,".program);","if(!",H,"){",H,"=",d,"[",n,"]=",c.link(function(d){return y(va,c,e,d,2)}),"(",a,");}",H,".call(this,a0[",w,"],",w,");"))}function t(c,d){function e(c){return c.contextDep&&b||c.propDep}var a=c.proc("batch",2);c.batchId="0";Aa(c,a);var b=!1,g=!0;l(d.context).forEach(function(c){b=b||d.context[c].propDep});
b||(ea(c,a,d.context),g=!1);var m=d.framebuffer,w=!1;m?(m.propDep?b=w=!0:m.contextDep&&b&&(w=!0),w||Da(c,a,m)):Da(c,a,null);d.state.viewport&&d.state.viewport.propDep&&(b=!0);ja(c,a,d);qa(c,a,d.state,function(c){return!e(c)});d.profile&&e(d.profile)||Qa(c,a,d,!1,"a1");d.contextDep=b;d.needsContext=g;d.needsFramebuffer=w;g=d.shader.progVar;if(g.contextDep&&b||g.propDep)Fa(c,a,d,null);else if(g=g.append(c,a),a(c.shared.gl,".useProgram(",g,".program);"),d.shader.program)Fa(c,a,d,d.shader.program);else{a(c.shared.vao,
".setVAO(null);");var m=c.global.def("{}"),w=a.def(g,".id"),n=a.def(m,"[",w,"]");a(c.cond(n).then(n,".call(this,a0,a1);")["else"](n,"=",m,"[",w,"]=",c.link(function(e){return y(Fa,c,d,e,2)}),"(",g,");",n,".call(this,a0,a1);"))}0<l(d.state).length&&a(c.shared.current,".dirty=true;");c.shared.vao&&a(c.shared.vao,".setVAO(null);")}function Gb(c,d){function e(g){var m=d.shader[g];m&&a.set(b.shader,"."+g,m.append(c,a))}var a=c.proc("scope",3);c.batchId="a2";var b=c.shared,g=b.current;ea(c,a,d.context);
d.framebuffer&&d.framebuffer.append(c,a);z(l(d.state)).forEach(function(e){var g=d.state[e].append(c,a);h(g)?g.forEach(function(d,b){a.set(c.next[e],"["+b+"]",d)}):a.set(b.next,"."+e,g)});Qa(c,a,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(e){var g=d.draw[e];g&&a.set(b.draw,"."+e,""+g.append(c,a))});l(d.uniforms).forEach(function(e){var g=d.uniforms[e].append(c,a);Array.isArray(g)&&(g="["+g.join()+"]");a.set(b.uniforms,"["+u.id(e)+"]",g)});l(d.attributes).forEach(function(e){var b=
d.attributes[e].append(c,a),g=c.scopeAttrib(e);l(new ta).forEach(function(c){a.set(g,"."+c,b[c])})});d.scopeVAO&&a.set(b.vao,".targetVAO",d.scopeVAO.append(c,a));e("vert");e("frag");0<l(d.state).length&&(a(g,".dirty=true;"),a.exit(g,".dirty=true;"));a("a1(",c.shared.context,",a0,",c.batchId,");")}function fa(c){if("object"===typeof c&&!h(c)){for(var d=l(c),e=0;e<d.length;++e)if(r.isDynamic(c[d[e]]))return!0;return!1}}function H(c,d,e){function a(c,d){w.forEach(function(e){var a=b[e];r.isDynamic(a)&&
(a=c.invoke(d,a),d(H,".",e,"=",a,";"))})}var b=d["static"][e];if(b&&fa(b)){var m=c.global,w=l(b),y=!1,n=!1,k=!1,H=c.global.def("{}");w.forEach(function(d){var e=b[d];if(r.isDynamic(e))"function"===typeof e&&(e=b[d]=r.unbox(e)),d=g(e,null),y=y||d.thisDep,k=k||d.propDep,n=n||d.contextDep;else{m(H,".",d,"=");switch(typeof e){case "number":m(e);break;case "string":m('"',e,'"');break;case "object":Array.isArray(e)&&m("[",e.join(),"]");break;default:m(c.link(e))}m(";")}});d.dynamic[e]=new r.DynamicVariable(4,
{thisDep:y,contextDep:n,propDep:k,ref:H,append:a});delete d["static"][e]}}var ta=K.Record,Ga={add:32774,subtract:32778,"reverse subtract":32779};A.ext_blend_minmax&&(Ga.min=32775,Ga.max=32776);var pa=A.angle_instanced_arrays,za=A.webgl_draw_buffers,Ea=A.oes_vertex_array_object,ka={dirty:!0,profile:S.profile},X={},wa=[],Ha={},Ka={};N("dither",3024);N("blend.enable",3042);m("blend.color","blendColor",[0,0,0,0]);m("blend.equation","blendEquationSeparate",[32774,32774]);m("blend.func","blendFuncSeparate",
[1,0,1,0]);N("depth.enable",2929,!0);m("depth.func","depthFunc",513);m("depth.range","depthRange",[0,1]);m("depth.mask","depthMask",!0);m("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);m("cull.face","cullFace",1029);m("frontFace","frontFace",2305);m("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);m("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);m("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);m("stencil.mask",
"stencilMask",-1);m("stencil.func","stencilFunc",[519,0,-1]);m("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);m("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);m("scissor.box","scissor",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);m("viewport","viewport",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);var hb={gl:B,context:W,strings:u,next:X,current:ka,draw:Ba,elements:d,buffer:E,shader:ha,attributes:K.state,vao:K,uniforms:T,framebuffer:c,extensions:A,
timer:ba,isBufferArgs:a},ca={primTypes:oa,compareFuncs:e,blendFuncs:L,blendEquations:Ga,stencilOps:C,glTypes:p,orientationType:k};b.optional(function(){hb.isArrayLike=h});za&&(ca.backBuffer=[1029],ca.drawBuffer=F(D.maxDrawbuffers,function(c){return 0===c?[0]:F(c,function(c){return 36064+c})}));var yd=0;return{next:X,current:ka,procs:function(){var c=O(),d=c.proc("poll"),e=c.proc("refresh"),a=c.block();d(a);e(a);var b=c.shared,g=b.gl,m=b.next,w=b.current;a(w,".dirty=false;");Da(c,d);Da(c,e,null,!0);
var y;pa&&(y=c.link(pa));A.oes_vertex_array_object&&e(c.link(A.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<D.maxAttributes;++n){var k=e.def(b.attributes,"[",n,"]"),H=c.cond(k,".buffer");H.then(g,".enableVertexAttribArray(",n,");",g,".bindBuffer(",34962,",",k,".buffer.buffer);",g,".vertexAttribPointer(",n,",",k,".size,",k,".type,",k,".normalized,",k,".stride,",k,".offset);")["else"](g,".disableVertexAttribArray(",n,");",g,".vertexAttrib4f(",n,",",k,".x,",k,".y,",k,".z,",k,
".w);",k,".buffer=null;");e(H);pa&&e(y,".vertexAttribDivisorANGLE(",n,",",k,".divisor);")}e(c.shared.vao,".currentVAO=null;",c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);");l(Ha).forEach(function(b){var n=Ha[b],y=a.def(m,".",b),k=c.block();k("if(",y,"){",g,".enable(",n,")}else{",g,".disable(",n,")}",w,".",b,"=",y,";");e(k);d("if(",y,"!==",w,".",b,"){",k,"}")});l(Ka).forEach(function(b){var n=Ka[b],y=ka[b],k,H,J=c.block();J(g,".",n,"(");h(y)?(n=y.length,k=c.global.def(m,".",b),H=c.global.def(w,
".",b),J(F(n,function(c){return k+"["+c+"]"}),");",F(n,function(c){return H+"["+c+"]="+k+"["+c+"];"}).join("")),d("if(",F(n,function(c){return k+"["+c+"]!=="+H+"["+c+"]"}).join("||"),"){",J,"}")):(k=a.def(m,".",b),H=a.def(w,".",b),J(k,");",w,".",b,"=",k,";"),d("if(",k,"!==",H,"){",J,"}"));e(J)});return c.compile()}(),compile:function(c,d,e,a,b){var g=O();g.stats=g.link(b);l(d["static"]).forEach(function(c){H(g,d,c)});q.forEach(function(d){H(g,c,d)});var m=ya(c,d,e,a,g);J(g,m);Gb(g,m);t(g,m);return da(g.compile(),
{destroy:function(){m.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(t,G,ga){function a(a,b){this.id=g++;this.type=a;this.data=b}function z(a){if(0===a.length)return[];var b=a.charAt(0),g=a.charAt(a.length-1);if(1<a.length&&b===g&&('"'===b||"'"===
b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return z(a.substr(0,b.index)).concat(z(b[1])).concat(z(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(g=0;g<b.length;++g)a=a.concat(z(b[g]));return a}function v(a){return"["+z(a).join("][")+"]"}function Y(g,b){if("function"===typeof g)return new a(0,g);if("number"===typeof g||
"boolean"===typeof g)return new a(5,g);if(Array.isArray(g))return new a(6,g.map(function(a,g){return Y(a,b+"["+g+"]")}));if(g instanceof a)return g;f(!1,"invalid option type in uniform "+b)}var f=t("./util/check"),g=0;G.exports={DynamicVariable:a,define:function(g,b){return new a(g,v(b+""))},isDynamic:function(g){return"function"===typeof g&&!g._reglType||g instanceof a},unbox:Y,accessor:v}},{"./util/check":21}],10:[function(t,G,ga){var a=t("./util/check"),z=t("./util/is-typed-array"),v=t("./util/is-ndarray"),
Y=t("./util/values"),f=t("./constants/primitives.json"),g=t("./constants/usage.json");G.exports=function(l,b,da,x){function F(a){this.id=r++;h[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function T(g,q,f,p,e,C,U){g.buffer.bind();var k;q?((k=U)||z(q)&&(!v(q)||z(q.data))||(k=b.oes_element_index_uint?5125:5123),da._initBuffer(g.buffer,q,f,k,3)):(l.bufferData(34963,C,f),g.buffer.dtype=k||5121,g.buffer.usage=f,g.buffer.dimension=3,g.buffer.byteLength=C);k=U;if(!U){switch(g.buffer.dtype){case 5121:case 5120:k=
5121;break;case 5123:case 5122:k=5123;break;case 5125:case 5124:k=5125;break;default:a.raise("unsupported type for element array")}g.buffer.dtype=k}g.type=k;a(5125!==k||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");q=e;0>q&&(q=g.buffer.byteLength,5123===k?q>>=1:5125===k&&(q>>=2));g.vertCount=q;q=p;0>p&&(q=4,p=g.buffer.dimension,1===p&&(q=0),2===p&&(q=1),3===p&&(q=4));g.primType=q}function A(b){x.elementsCount--;a(null!==b.buffer,"must not double destroy elements");
delete h[b.id];b.buffer.destroy();b.buffer=null}var h={},r=0,oa={uint8:5121,uint16:5123};b.oes_element_index_uint&&(oa.uint32=5125);F.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:function(b,q){function l(b){if(b)if("number"===typeof b)p(b),e.primType=4,e.vertCount=b|0,e.type=5121;else{var q=null,k=35044,Y=-1,B=-1,u=0,A=0;if(Array.isArray(b)||z(b)||v(b))q=b;else if(a.type(b,"object","invalid arguments for elements"),"data"in b&&(q=b.data,a(Array.isArray(q)||z(q)||v(q),"invalid data for element buffer")),
"usage"in b&&(a.parameter(b.usage,g,"invalid element buffer usage"),k=g[b.usage]),"primitive"in b&&(a.parameter(b.primitive,f,"invalid element buffer primitive"),Y=f[b.primitive]),"count"in b&&(a("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),B=b.count|0),"type"in b&&(a.parameter(b.type,oa,"invalid buffer type"),A=oa[b.type]),"length"in b)u=b.length|0;else if(u=B,5123===A||5122===A)u*=2;else if(5125===A||5124===A)u*=4;T(e,q,k,Y,B,u,A)}else p(),e.primType=4,e.vertCount=
0,e.type=5121;return l}var p=da.create(null,34963,!0),e=new F(p._buffer);x.elementsCount++;l(b);l._reglType="elements";l._elements=e;l.subdata=function(e,a){p.subdata(e,a);return l};l.destroy=function(){A(e)};return l},createStream:function(a){var b=p.pop();b||(b=new F(da.create(null,34963,!0,!1)._buffer));T(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){p.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof F?a._elements:null},clear:function(){Y(h).forEach(A)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(t,G,ga){var a=t("./util/sorted-object-keys"),z=t("./util/check");G.exports=function(v,Y){function f(a){z.type(a,"string","extension name must be string");a=a.toLowerCase();var b;try{b=g[a]=v.getExtension(a)}catch(l){}return!!b}for(var g={},l=0;l<Y.extensions.length;++l){var b=Y.extensions[l];if(!f(b))return Y.onDestroy(),Y.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}Y.optionalExtensions.forEach(f);return{extensions:g,restore:function(){a(g).forEach(function(a){if(g[a]&&!f(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(t,G,ga){var a=t("./util/check"),z=t("./util/values"),v=t("./util/extend"),Y=[6407,6408],f=[];f[6408]=4;f[6407]=3;var g=[];g[5121]=1;g[5126]=4;g[36193]=2;var l=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};G.exports=function(da,x,F,T,A,h){function r(c,d,e){this.target=c;this.texture=d;this.renderbuffer=e;var a=c=0;d?(c=d.width,a=d.height):e&&(c=e.width,a=e.height);this.width=c;this.height=a}function oa(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function p(c,d,e){if(c){if(c.texture){c=c.texture._texture;var b=Math.max(1,c.height);a(Math.max(1,c.width)===d&&b===e,"inconsistent width/height for supplied texture")}else c=
c.renderbuffer._renderbuffer,a(c.width===d&&c.height===e,"inconsistent width/height for renderbuffer");c.refCount+=1}}function Q(c,d){d&&(d.texture?da.framebufferTexture2D(36160,c,d.target,d.texture._texture.texture,0):da.framebufferRenderbuffer(36160,c,36161,d.renderbuffer._renderbuffer.renderbuffer))}function q(c){var d=3553,e=null,b=null,g=c;"object"===typeof c&&(g=c.data,"target"in c&&(d=c.target|0));a.type(g,"function","invalid attachment data");c=g._reglType;"texture2d"===c?(e=g,a(3553===d)):
"textureCube"===c?(e=g,a(34069<=d&&34075>d,"invalid cube map target")):"renderbuffer"===c?(b=g,d=36161):a.raise("invalid regl object for attachment");return new r(d,e,b)}function L(c,d,e,a,b){if(e)return c=T.create2D({width:c,height:d,format:a,type:b}),c._texture.refCount=0,new r(3553,c,null);c=A.create({width:c,height:d,format:a});c._renderbuffer.refCount=0;return new r(36161,null,c)}function ma(c){return c&&(c.texture||c.renderbuffer)}function e(c,d,e){c&&(c.texture?c.texture.resize(d,e):c.renderbuffer&&
c.renderbuffer.resize(d,e),c.width=d,c.height=e)}function C(){this.id=d++;R[this.id]=this;this.framebuffer=da.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function U(c){c.colorAttachments.forEach(oa);oa(c.depthAttachment);oa(c.stencilAttachment);oa(c.depthStencilAttachment)}function k(c){var d=c.framebuffer;a(d,"must not double destroy framebuffer");da.deleteFramebuffer(d);c.framebuffer=null;h.framebufferCount--;
delete R[c.id]}function Z(c){var d;da.bindFramebuffer(36160,c.framebuffer);var e=c.colorAttachments;for(d=0;d<e.length;++d)Q(36064+d,e[d]);for(d=e.length;d<F.maxColorAttachments;++d)da.framebufferTexture2D(36160,36064+d,3553,null,0);da.framebufferTexture2D(36160,33306,3553,null,0);da.framebufferTexture2D(36160,36096,3553,null,0);da.framebufferTexture2D(36160,36128,3553,null,0);Q(36096,c.depthAttachment);Q(36128,c.stencilAttachment);Q(33306,c.depthStencilAttachment);c=da.checkFramebufferStatus(36160);
da.isContextLost()||36053===c||a.raise("framebuffer configuration not supported, status = "+b[c]);da.bindFramebuffer(36160,u.next?u.next.framebuffer:null);u.cur=u.next;da.getError()}function B(c,d){function b(c,d){var e;a(u.next!==R,"can not update framebuffer which is currently in use");var k=0,M=0,B=!0,m=!0;e=null;var C=!0,z="rgba",v="uint8",A=1,w=null,I=null,h=null,V=!1;if("number"===typeof c)k=c|0,M=d|0||k;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(M=c.shape,
a(Array.isArray(M)&&2<=M.length,"invalid shape for framebuffer"),k=M[0],M=M[1]):("radius"in c&&(k=M=c.radius),"width"in c&&(k=c.width),"height"in c&&(M=c.height));if("color"in c||"colors"in c)e=c.color||c.colors,Array.isArray(e)&&a(1===e.length||x.webgl_draw_buffers,"multiple render targets not supported");if(!e){"colorCount"in c&&(A=c.colorCount|0,a(0<A,"invalid color buffer count"));"colorTexture"in c&&(C=!!c.colorTexture,z="rgba4");if("colorType"in c){v=c.colorType;if(C)a(x.oes_texture_float||
!("float"===v||"float32"===v),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(x.oes_texture_half_float||!("half float"===v||"float16"===v),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===v||"float16"===v)a(x.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),z="rgba16f";else if("float"===v||"float32"===v)a(x.webgl_color_buffer_float,
"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),z="rgba32f";a.oneOf(v,E,"invalid color type")}"colorFormat"in c&&(z=c.colorFormat,0<=ua.indexOf(z)?C=!0:0<=D.indexOf(z)?C=!1:a.optional(function(){if(C)a.oneOf(c.colorFormat,ua,"invalid color format for texture");else a.oneOf(c.colorFormat,D,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)V=!(!c.depthTexture&&!c.depthStencilTexture),a(!V||x.webgl_depth_texture,
"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?B=c.depth:(w=c.depth,m=!1));"stencil"in c&&("boolean"===typeof c.stencil?m=c.stencil:(I=c.stencil,B=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?B=m=c.depthStencil:(h=c.depthStencil,m=B=!1))}else k=M=1;var r=null,T=null,Q=null,ya=null;if(Array.isArray(e))r=e.map(q);else if(e)r=[q(e)];else for(r=Array(A),e=0;e<A;++e)r[e]=L(k,M,C,z,v);a(x.webgl_draw_buffers||1>=r.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");
a(r.length<=F.maxColorAttachments,"too many color attachments, not supported");k=k||r[0].width;M=M||r[0].height;w?T=q(w):B&&!m&&(T=L(k,M,V,"depth","uint32"));I?Q=q(I):m&&!B&&(Q=L(k,M,!1,"stencil","uint8"));h?ya=q(h):!w&&!I&&m&&B&&(ya=L(k,M,V,"depth stencil","depth stencil"));a(1>=!!w+!!I+!!h,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");B=null;for(e=0;e<r.length;++e)p(r[e],k,M),a(!r[e]||r[e].texture&&0<=Y.indexOf(r[e].texture._texture.format)||r[e].renderbuffer&&
0<=l.indexOf(r[e].renderbuffer._renderbuffer.format),"framebuffer color attachment "+e+" is invalid"),r[e]&&r[e].texture&&(m=f[r[e].texture._texture.format]*g[r[e].texture._texture.type],null===B?B=m:a(B===m,"all color attachments much have the same number of bits per pixel."));p(T,k,M);a(!T||T.texture&&6402===T.texture._texture.format||T.renderbuffer&&33189===T.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");p(Q,k,M);a(!Q||Q.renderbuffer&&36168===Q.renderbuffer._renderbuffer.format,
"invalid stencil attachment for framebuffer object");p(ya,k,M);a(!ya||ya.texture&&34041===ya.texture._texture.format||ya.renderbuffer&&34041===ya.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");U(R);R.width=k;R.height=M;R.colorAttachments=r;R.depthAttachment=T;R.stencilAttachment=Q;R.depthStencilAttachment=ya;b.color=r.map(ma);b.depth=ma(T);b.stencil=ma(Q);b.depthStencil=ma(ya);b.width=R.width;b.height=R.height;Z(R);return b}var R=new C;h.framebufferCount++;
b(c,d);return v(b,{resize:function(c,d){a(u.next!==R,"can not resize a framebuffer which is currently in use");var g=Math.max(c|0,1),k=Math.max(d|0||g,1);if(g===R.width&&k===R.height)return b;for(var q=R.colorAttachments,l=0;l<q.length;++l)e(q[l],g,k);e(R.depthAttachment,g,k);e(R.stencilAttachment,g,k);e(R.depthStencilAttachment,g,k);R.width=b.width=g;R.height=b.height=k;Z(R);return b},_reglType:"framebuffer",_framebuffer:R,destroy:function(){k(R);U(R)},use:function(c){u.setFBO({framebuffer:b},c)}})}
var u={cur:null,next:null,dirty:!1,setFBO:null},ua=["rgba"],D=["rgba4","rgb565","rgb5 a1"];x.ext_srgb&&D.push("srgba");x.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");x.webgl_color_buffer_float&&D.push("rgba32f");var E=["uint8"];x.oes_texture_half_float&&E.push("half float","float16");x.oes_texture_float&&E.push("float","float32");var d=0,R={};return v(u,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof C)?c:null},create:B,
createCube:function(c){function d(c){var b;a(0>e.indexOf(u.next),"can not update framebuffer which is currently in use");var g={color:null},k=0,R=null;b="rgba";var q="uint8",l=1;if("number"===typeof c)k=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(k=c.shape,a(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),a(k[0]===k[1],"cube framebuffer must be square"),k=k[0]):("radius"in c&&(k=c.radius|0),"width"in c?(k=c.width|0,"height"in c&&a(c.height===k,
"must be square")):"height"in c&&(k=c.height|0));if("color"in c||"colors"in c)R=c.color||c.colors,Array.isArray(R)&&a(1===R.length||x.webgl_draw_buffers,"multiple render targets not supported");R||("colorCount"in c&&(l=c.colorCount|0,a(0<l,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,E,"invalid color type"),q=c.colorType),"colorFormat"in c&&(b=c.colorFormat,a.oneOf(c.colorFormat,ua,"invalid color format for texture")));"depth"in c&&(g.depth=c.depth);"stencil"in c&&(g.stencil=
c.stencil);"depthStencil"in c&&(g.depthStencil=c.depthStencil)}else k=1;if(R)if(Array.isArray(R))for(c=[],b=0;b<R.length;++b)c[b]=R[b];else c=[R];else for(c=Array(l),R={radius:k,format:b,type:q},b=0;b<l;++b)c[b]=T.createCube(R);g.color=Array(c.length);for(b=0;b<c.length;++b)l=c[b],a("function"===typeof l&&"textureCube"===l._reglType,"invalid cube map"),k=k||l.width,a(l.width===k&&l.height===k,"invalid cube map shape"),g.color[b]={target:34069,data:c[b]};for(b=0;6>b;++b){for(l=0;l<c.length;++l)g.color[l].target=
34069+b;0<b&&(g.depth=e[0].depth,g.stencil=e[0].stencil,g.depthStencil=e[0].depthStencil);if(e[b])e[b](g);else e[b]=B(g)}return v(d,{width:k,height:k,color:c})}var e=Array(6);d(c);return v(d,{faces:e,resize:function(c){var b=c|0;a(0<b&&b<=F.maxCubeMapSize,"invalid radius for cube fbo");if(b===d.width)return d;var g=d.color;for(c=0;c<g.length;++c)g[c].resize(b);for(c=0;6>c;++c)e[c].resize(b);d.width=d.height=b;return d},_reglType:"framebufferCube",destroy:function(){e.forEach(function(c){c.destroy()})}})},
clear:function(){z(R).forEach(k)},restore:function(){u.cur=null;u.next=null;u.dirty=!0;z(R).forEach(function(c){c.framebuffer=da.createFramebuffer();Z(c)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(t,G,ga){var a=t("./util/sorted-object-keys"),z=t("./util/pool");G.exports=function(v,Y){var f=1;Y.ext_texture_filter_anisotropic&&(f=v.getParameter(34047));var g=1,l=1;Y.webgl_draw_buffers&&(g=v.getParameter(34852),l=v.getParameter(36063));var b=!!Y.oes_texture_float;
if(b){b=v.createTexture();v.bindTexture(3553,b);v.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var da=v.createFramebuffer();v.bindFramebuffer(36160,da);v.framebufferTexture2D(36160,36064,3553,b,0);v.bindTexture(3553,null);if(36053!==v.checkFramebufferStatus(36160))b=!1;else{v.viewport(0,0,1,1);v.clearColor(1,0,0,1);v.clear(16384);var x=z.allocType(5126,4);v.readPixels(0,0,1,1,6408,5126,x);v.getError()?b=!1:(v.deleteFramebuffer(da),v.deleteTexture(b),b=1===x[0]);z.freeType(x)}}x=!0;"undefined"!==typeof navigator&&
(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(x=v.createTexture(),da=z.allocType(5121,36),v.activeTexture(33984),v.bindTexture(34067,x),v.texImage2D(34069,0,6408,3,3,0,6408,5121,da),z.freeType(da),v.bindTexture(34067,null),v.deleteTexture(x),x=!v.getError());return{colorBits:[v.getParameter(3410),v.getParameter(3411),v.getParameter(3412),v.getParameter(3413)],depthBits:v.getParameter(3414),stencilBits:v.getParameter(3415),subpixelBits:v.getParameter(3408),
extensions:a(Y).filter(function(b){return!!Y[b]}),maxAnisotropic:f,maxDrawbuffers:g,maxColorAttachments:l,pointSizeDims:v.getParameter(33901),lineWidthDims:v.getParameter(33902),maxViewportDims:v.getParameter(3386),maxCombinedTextureUnits:v.getParameter(35661),maxCubeMapSize:v.getParameter(34076),maxRenderbufferSize:v.getParameter(34024),maxTextureUnits:v.getParameter(34930),maxTextureSize:v.getParameter(3379),maxAttributes:v.getParameter(34921),maxVertexUniforms:v.getParameter(36347),maxVertexTextureUnits:v.getParameter(35660),
maxVaryingVectors:v.getParameter(36348),maxFragmentUniforms:v.getParameter(36349),glsl:v.getParameter(35724),renderer:v.getParameter(7937),vendor:v.getParameter(7936),version:v.getParameter(7938),readFloat:b,npotTextureCube:x}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(t,G,ga){var a=t("./util/check"),z=t("./util/is-typed-array");G.exports=function(v,Y,f,g,l,b,da){function x(T){var A;null===Y.next?(a(l.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
A=5121):(a(null!==Y.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),A=Y.next.colorAttachments[0].texture._texture.type,a.optional(function(){b.oes_texture_float?(a(5121===A||5126===A,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===A&&a(da.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===A,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var h=0,r=0,x=g.framebufferWidth,p=g.framebufferHeight,Q=null;z(T)?Q=T:T&&(a.type(T,"object","invalid arguments to regl.read()"),h=T.x|0,r=T.y|0,a(0<=h&&h<g.framebufferWidth,"invalid x offset for regl.read"),a(0<=r&&r<g.framebufferHeight,"invalid y offset for regl.read"),x=(T.width||g.framebufferWidth-h)|0,p=(T.height||g.framebufferHeight-r)|0,Q=T.data||null);Q&&(5121===A?a(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===A&&a(Q instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<x&&x+h<=g.framebufferWidth,"invalid width for read pixels");a(0<p&&p+r<=g.framebufferHeight,"invalid height for read pixels");f();T=x*p*4;Q||(5121===A?Q=new Uint8Array(T):5126===A&&(Q=Q||new Float32Array(T)));a.isTypedArray(Q,"data buffer for regl.read() must be a typedarray");a(Q.byteLength>=T,"data buffer for regl.read() too small");v.pixelStorei(3333,4);v.readPixels(h,r,x,p,6408,A,Q);return Q}function F(b){var a;
Y.setFBO({framebuffer:b.framebuffer},function(){a=x(b)});return a}return function(b){return b&&"framebuffer"in b?F(b):x(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(t,G,ga){var a=t("./util/sorted-object-keys"),z=t("./util/check"),v=t("./util/values"),Y=[];Y[32854]=2;Y[32855]=2;Y[36194]=2;Y[33189]=2;Y[36168]=1;Y[34041]=4;Y[35907]=4;Y[34836]=16;Y[34842]=8;Y[34843]=6;G.exports=function(f,g,l,b,da){function x(b){this.id=h++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=
this.width=0;da.profile&&(this.stats={size:0})}function F(a){var g=a.renderbuffer;z(g,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(g);a.renderbuffer=null;a.refCount=0;delete r[a.id];b.renderbufferCount--}var T={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};g.ext_srgb&&(T.srgba=35907);g.ext_color_buffer_half_float&&(T.rgba16f=34842,T.rgb16f=34843);g.webgl_color_buffer_float&&(T.rgba32f=34836);var A=[];a(T).forEach(function(b){A[T[b]]=
b});var h=0,r={};x.prototype.decRef=function(){0>=--this.refCount&&F(this)};da.profile&&(b.getTotalRenderbufferSize=function(){var b=0;a(r).forEach(function(a){b+=r[a].stats.size});return b});return{create:function(a,g){function v(b,a){var e=0,g=0,p=32854;"object"===typeof b&&b?("shape"in b?(g=b.shape,z(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),e=g[0]|0,g=g[1]|0):("radius"in b&&(e=g=b.radius|0),"width"in b&&(e=b.width|0),"height"in b&&(g=b.height|0)),"format"in b&&(z.parameter(b.format,
T,"invalid renderbuffer format"),p=T[b.format])):"number"===typeof b?(e=b|0,g="number"===typeof a?a|0:e):b?z.raise("invalid arguments to renderbuffer constructor"):e=g=1;z(0<e&&0<g&&e<=l.maxRenderbufferSize&&g<=l.maxRenderbufferSize,"invalid renderbuffer size");if(e!==q.width||g!==q.height||p!==q.format)return v.width=q.width=e,v.height=q.height=g,q.format=p,f.bindRenderbuffer(36161,q.renderbuffer),f.renderbufferStorage(36161,p,e,g),z(0===f.getError(),"invalid render buffer format"),da.profile&&(q.stats.size=
Y[q.format]*q.width*q.height),v.format=A[q.format],v}var q=new x(f.createRenderbuffer());r[q.id]=q;b.renderbufferCount++;v(a,g);v.resize=function(b,a){var e=b|0,g=a|0||e;if(e===q.width&&g===q.height)return v;z(0<e&&0<g&&e<=l.maxRenderbufferSize&&g<=l.maxRenderbufferSize,"invalid renderbuffer size");v.width=q.width=e;v.height=q.height=g;f.bindRenderbuffer(36161,q.renderbuffer);f.renderbufferStorage(36161,q.format,e,g);z(0===f.getError(),"invalid render buffer format");da.profile&&(q.stats.size=Y[q.format]*
q.width*q.height);return v};v._reglType="renderbuffer";v._renderbuffer=q;da.profile&&(v.stats=q.stats);v.destroy=function(){q.decRef()};return v},clear:function(){v(r).forEach(F)},restore:function(){v(r).forEach(function(b){b.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,b.renderbuffer);f.renderbufferStorage(36161,b.format,b.width,b.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(t,G,ga){var a=t("./util/sorted-object-keys"),
z=t("./util/check"),v=t("./util/extend"),Y=t("./util/values");G.exports=function(f,g,l,b){function da(b,a,g,e){this.name=b;this.id=a;this.location=g;this.info=e}function x(b,a){for(var g=0;g<b.length;++g)if(b[g].id===a.id){b[g].location=a.location;return}b.push(a)}function F(b,a,l){var e=35632===b?h:r,C=e[a];if(!C){var p=g.str(a),C=f.createShader(b);f.shaderSource(C,p);f.compileShader(C);z.shaderError(f,C,p,b,l);e[a]=C}return C}function T(a,g){this.id=Q++;this.fragId=a;this.vertId=g;this.program=
null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function A(a,l,p){var e;e=F(35632,a.fragId);var C=F(35633,a.vertId),v=a.program=f.createProgram();f.attachShader(v,e);f.attachShader(v,C);if(p)for(e=0;e<p.length;++e)C=p[e],f.bindAttribLocation(v,C[0],C[1]);f.linkProgram(v);z.linkError(f,v,g.str(a.fragId),g.str(a.vertId),l);p=f.getProgramParameter(v,35718);b.profile&&(a.stats.uniformsCount=p);C=a.uniforms;for(e=0;e<p;++e)if(l=f.getActiveUniform(v,
e))if(1<l.size)for(var k=0;k<l.size;++k){var Y=l.name.replace("[0]","["+k+"]");x(C,new da(Y,g.id(Y),f.getUniformLocation(v,Y),l))}else x(C,new da(l.name,g.id(l.name),f.getUniformLocation(v,l.name),l));p=f.getProgramParameter(v,35721);b.profile&&(a.stats.attributesCount=p);a=a.attributes;for(e=0;e<p;++e)(l=f.getActiveAttrib(v,e))&&x(a,new da(l.name,g.id(l.name),f.getAttribLocation(v,l.name),l))}var h={},r={},oa={},p=[],Q=0;b.profile&&(l.getMaxUniformsCount=function(){var b=0;p.forEach(function(a){a.stats.uniformsCount>
b&&(b=a.stats.uniformsCount)});return b},l.getMaxAttributesCount=function(){var b=0;p.forEach(function(a){a.stats.attributesCount>b&&(b=a.stats.attributesCount)});return b});return{clear:function(){var b=f.deleteShader.bind(f);Y(h).forEach(b);h={};Y(r).forEach(b);r={};p.forEach(function(b){f.deleteProgram(b.program)});p.length=0;oa={};l.shaderCount=0},program:function(b,g,Y,e){z.command(0<=b,"missing vertex shader",Y);z.command(0<=g,"missing fragment shader",Y);var C=oa[g];C||(C=oa[g]={});var U=C[b];
if(U&&(U.refCount++,!e))return U;var k=new T(g,b);l.shaderCount++;A(k,Y,e);U||(C[b]=k);p.push(k);return v(k,{destroy:function(){k.refCount--;if(0>=k.refCount){f.deleteProgram(k.program);var e=p.indexOf(k);p.splice(e,1);l.shaderCount--}0>=C[k.vertId].refCount&&(f.deleteShader(r[k.vertId]),delete r[k.vertId],delete oa[k.fragId][k.vertId]);a(oa[k.fragId]).length||(f.deleteShader(h[k.fragId]),delete h[k.fragId],delete oa[k.fragId])}})},restore:function(){h={};r={};for(var b=0;b<p.length;++b)A(p[b],null,
p[b].attributes.map(function(b){return[b.location,b.name]}))},shader:F,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(t,G,ga){G.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(t,G,ga){G.exports=function(){var a={"":0},z=[""];return{id:function(v){var Y=a[v];if(Y)return Y;Y=a[v]=z.length;z.push(v);
return Y},str:function(a){return z[a]}}}},{}],19:[function(t,G,ga){function a(d){return"[object "+d+"]"}function z(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function v(d){return Array.isArray(d)&&0!==d.length&&oa(d[0])?!0:!1}function Y(d){return Object.prototype.toString.call(d)}function f(d){if(!d)return!1;var e=Y(d);return 0<=ua.indexOf(e)?!0:z(d)||v(d)||A(d)}function g(d,e){36193===d.type?(d.data=r(e),h.freeType(e)):d.data=e}function l(d,b,c,a,g,k){d="undefined"!==typeof E[d]?
E[d]:e[d]*D[b];k&&(d*=6);if(g){for(a=0;1<=c;)a+=d*c*c,c/=2;return a}return d*c*a}var b=t("./util/sorted-object-keys"),da=t("./util/check"),x=t("./util/extend"),F=t("./util/values"),T=t("./util/is-typed-array"),A=t("./util/is-ndarray"),h=t("./util/pool"),r=t("./util/to-half-float"),oa=t("./util/is-array-like"),p=t("./util/flatten"),Q=t("./util/is-pow2");ga=t("./constants/arraytypes.json");var q=t("./constants/arraytypes.json"),L=[9984,9986,9985,9987],ma=[0,6409,6410,6407,6408],e={};e[6409]=e[6406]=
e[6402]=1;e[34041]=e[6410]=2;e[6407]=e[35904]=3;e[6408]=e[35906]=4;var C=a("HTMLCanvasElement"),U=a("OffscreenCanvas"),k=a("CanvasRenderingContext2D"),Z=a("ImageBitmap"),B=a("HTMLImageElement"),u=a("HTMLVideoElement"),ua=b(ga).concat([C,U,k,Z,B,u]),D=[];D[5121]=1;D[5126]=4;D[36193]=2;D[5123]=2;D[5125]=4;var E=[];E[32854]=2;E[32855]=2;E[36194]=2;E[34041]=4;E[33776]=.5;E[33777]=.5;E[33778]=1;E[33779]=1;E[35986]=.5;E[35987]=1;E[34798]=1;E[35840]=.5;E[35841]=.25;E[35842]=.5;E[35843]=.25;E[36196]=.5;G.exports=
function(d,a,c,E,K,D,ua){function W(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ba(c,d){c.internalformat=d.internalformat;c.format=d.format;c.type=d.type;c.compressed=d.compressed;c.premultiplyAlpha=d.premultiplyAlpha;c.flipY=d.flipY;c.unpackAlignment=d.unpackAlignment;c.colorSpace=d.colorSpace;c.width=d.width;c.height=d.height;c.channels=d.channels}
function S(d,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(da.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),d.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(da.type(b.flipY,"boolean","invalid texture flip"),d.flipY=b.flipY);"alignment"in b&&(da.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),d.unpackAlignment=b.alignment);"colorSpace"in b&&(da.parameter(b.colorSpace,Ya,"invalid colorSpace"),d.colorSpace=Ya[b.colorSpace]);if("type"in b){var g=b.type;da(a.oes_texture_float||
!("float"===g||"float32"===g),"you must enable the OES_texture_float extension in order to use floating point textures.");da(a.oes_texture_half_float||!("half float"===g||"float16"===g),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");da(a.webgl_depth_texture||!("uint16"===g||"uint32"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");da.parameter(g,y,"invalid texture type");
d.type=y[g]}var m=d.width,k=d.height,w=d.channels,g=!1;"shape"in b?(da(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),m=b.shape[0],k=b.shape[1],3===b.shape.length&&(w=b.shape[2],da(0<w&&4>=w,"invalid number of channels"),g=!0),da(0<=m&&m<=c.maxTextureSize,"invalid width"),da(0<=k&&k<=c.maxTextureSize,"invalid height")):("radius"in b&&(m=k=b.radius,da(0<=m&&m<=c.maxTextureSize,"invalid radius")),"width"in b&&(m=b.width,da(0<=m&&m<=c.maxTextureSize,"invalid width")),"height"in b&&
(k=b.height,da(0<=k&&k<=c.maxTextureSize,"invalid height")),"channels"in b&&(w=b.channels,da(0<w&&4>=w,"invalid number of channels"),g=!0));d.width=m|0;d.height=k|0;d.channels=w|0;m=!1;"format"in b&&(m=b.format,da(a.webgl_depth_texture||!("depth"===m||"depth stencil"===m),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),da.parameter(m,n,"invalid texture format"),k=d.internalformat=n[m],d.format=Ga[k],m in y&&!("type"in b)&&(d.type=y[m]),m in J&&(d.compressed=
!0),m=!0);!g&&m?d.channels=e[d.format]:g&&!m?d.channels!==ma[d.format]&&(d.format=d.internalformat=ma[d.channels]):m&&g&&da(d.channels===e[d.format],"number of channels inconsistent with specified format")}}function M(c){d.pixelStorei(37440,c.flipY);d.pixelStorei(37441,c.premultiplyAlpha);d.pixelStorei(37443,c.colorSpace);d.pixelStorei(3317,c.unpackAlignment)}function N(){W.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function m(d,e){var b=
null;f(e)?b=e:e&&(da.type(e,"object","invalid pixel data type"),S(d,e),"x"in e&&(d.xOffset=e.x|0),"y"in e&&(d.yOffset=e.y|0),f(e.data)&&(b=e.data));da(!d.compressed||b instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(e.copy){da(!b,"can not specify copy and data field for the same texture");var a=K.viewportWidth,m=K.viewportHeight;d.width=d.width||a-d.xOffset;d.height=d.height||m-d.yOffset;d.needsCopy=!0;da(0<=d.xOffset&&d.xOffset<a&&0<=d.yOffset&&d.yOffset<m&&0<d.width&&
d.width<=a&&0<d.height&&d.height<=m,"copy texture read out of bounds")}else if(!b)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(T(b))d.channels=d.channels||4,d.data=b,"type"in e||5121!==d.type||(d.type=q[Object.prototype.toString.call(b)]|0);else if(z(b)){d.channels=d.channels||4;a=b;m=a.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:m=h.allocType(d.type,m);m.set(a);d.data=m;break;case 36193:d.data=r(a);break;default:da.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(A(b)){a=b.data;Array.isArray(a)||5121!==d.type||(d.type=q[Object.prototype.toString.call(a)]|0);var m=b.shape,w=b.stride,n,y,H,J;3===m.length?(H=m[2],J=w[2]):(da(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),J=H=1);n=m[0];y=m[1];m=w[0];w=w[1];d.alignment=1;d.width=n;d.height=y;d.channels=H;d.format=d.internalformat=ma[H];d.needsFree=!0;n=J;b=b.offset;H=d.width;J=d.height;y=d.channels;for(var l=h.allocType(36193===d.type?5126:d.type,H*J*y),la=0,R=0;R<J;++R)for(var M=
0;M<H;++M)for(var ta=0;ta<y;++ta)l[la++]=a[m*M+w*R+n*ta+b];g(d,l)}else if(Y(b)===C||Y(b)===U||Y(b)===k)Y(b)===C||Y(b)===U?d.element=b:d.element=b.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(Y(b)===Z)d.element=b,d.width=b.width,d.height=b.height,d.channels=4;else if(Y(b)===B)d.element=b,d.width=b.naturalWidth,d.height=b.naturalHeight,d.channels=4;else if(Y(b)===u)d.element=b,d.width=b.videoWidth,d.height=b.videoHeight,d.channels=4;else if(v(b)){a=d.width||b[0].length;
m=d.height||b.length;w=d.channels;w=oa(b[0][0])?w||b[0][0].length:w||1;n=p.shape(b);H=1;for(J=0;J<n.length;++J)H*=n[J];H=h.allocType(36193===d.type?5126:d.type,H);p.flatten(b,n,"",H);g(d,H);d.alignment=1;d.width=a;d.height=m;d.channels=w;d.format=d.internalformat=ma[w];d.needsFree=!0}5126===d.type?da(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&da(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function O(c,b,e,a,g){var m=c.element,w=c.data,n=c.internalformat,k=c.format,y=c.type,H=c.width,J=c.height;M(c);m?d.texSubImage2D(b,g,e,a,k,y,m):c.compressed?d.compressedTexSubImage2D(b,g,e,a,n,H,J,w):c.needsCopy?(E(),d.copyTexSubImage2D(b,g,e,a,c.xOffset,c.yOffset,H,J)):d.texSubImage2D(b,g,e,a,H,J,k,y,w)}function P(){return pa.pop()||new N}function xa(c){c.needsFree&&h.freeType(c.data);N.call(c);pa.push(c)}function ra(){W.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function w(c,d,b){var e=c.images[0]=P();c.mipmask=1;e.width=c.width=d;e.height=c.height=b;e.channels=c.channels=4}function I(c,d){var b=null;if(f(d))b=c.images[0]=P(),ba(b,c),m(b,d),c.mipmask=1;else if(S(c,d),Array.isArray(d.mipmap))for(var e=d.mipmap,a=0;a<e.length;++a)b=c.images[a]=P(),ba(b,c),b.width>>=a,b.height>>=a,m(b,e[a]),c.mipmask|=1<<a;else b=c.images[0]=P(),ba(b,c),m(b,d),c.mipmask=1;ba(c,c.images[0]);!c.compressed||33776!==c.internalformat&&33777!==c.internalformat&&33778!==
c.internalformat&&33779!==c.internalformat||da(0===c.width%4&&0===c.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function aa(c,b){for(var e=c.images,a=0;a<e.length&&e[a];++a){var g=e[a],m=b,w=a,n=g.element,k=g.data,y=g.internalformat,H=g.format,J=g.type,l=g.width,la=g.height;M(g);n?d.texImage2D(m,w,H,H,J,n):g.compressed?d.compressedTexImage2D(m,w,y,l,la,0,k):g.needsCopy?(E(),d.copyTexImage2D(m,w,H,g.xOffset,g.yOffset,l,la,0)):d.texImage2D(m,
w,H,l,la,0,H,J,k||null)}}function V(){var c=za.pop()||new ra;W.call(c);for(var d=c.mipmask=0;16>d;++d)c.images[d]=null;return c}function na(c){for(var d=c.images,b=0;b<d.length;++b)d[b]&&xa(d[b]),d[b]=null;za.push(c)}function sa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ca(d,b){if("min"in b){var e=b.min;da.parameter(e,dc);d.minFilter=dc[e];0<=L.indexOf(d.minFilter)&&!("faces"in b)&&(d.genMipmaps=!0)}"mag"in
b&&(e=b.mag,da.parameter(e,la),d.magFilter=la[e]);var e=d.wrapS,a=d.wrapT;if("wrap"in b){var g=b.wrap;"string"===typeof g?(da.parameter(g,Qa),e=a=Qa[g]):Array.isArray(g)&&(da.parameter(g[0],Qa),da.parameter(g[1],Qa),e=Qa[g[0]],a=Qa[g[1]])}else"wrapS"in b&&(e=b.wrapS,da.parameter(e,Qa),e=Qa[e]),"wrapT"in b&&(a=b.wrapT,da.parameter(a,Qa),a=Qa[a]);d.wrapS=e;d.wrapT=a;"anisotropic"in b&&(e=b.anisotropic,da("number"===typeof e&&1<=e&&e<=c.maxAnisotropic,"aniso samples must be between 1 and "),d.anisotropic=
b.anisotropic);if("mipmap"in b){e=!1;switch(typeof b.mipmap){case "string":da.parameter(b.mipmap,Aa,"invalid mipmap hint");d.mipmapHint=Aa[b.mipmap];e=d.genMipmaps=!0;break;case "boolean":e=d.genMipmaps=b.mipmap;break;case "object":da(Array.isArray(b.mipmap),"invalid mipmap type");d.genMipmaps=!1;e=!0;break;default:da.raise("invalid mipmap type")}!e||"min"in b||(d.minFilter=9984)}}function ya(c,b){d.texParameteri(b,10241,c.minFilter);d.texParameteri(b,10240,c.magFilter);d.texParameteri(b,10242,c.wrapS);
d.texParameteri(b,10243,c.wrapT);a.ext_texture_filter_anisotropic&&d.texParameteri(b,34046,c.anisotropic);c.genMipmaps&&(d.hint(33170,c.mipmapHint),d.generateMipmap(b))}function ea(c){W.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ea++;this.refCount=1;this.target=c;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new sa;ua.profile&&(this.stats={size:0})}function Da(c){d.activeTexture(33984);d.bindTexture(c.target,c.texture)}function ja(){var c=wa[0];c?d.bindTexture(c.target,
c.texture):d.bindTexture(3553,null)}function qa(c){var b=c.texture;da(b,"must not double destroy texture");var e=c.unit,a=c.target;0<=e&&(d.activeTexture(33984+e),d.bindTexture(a,null),wa[e]=null);d.deleteTexture(b);c.texture=null;c.params=null;c.pixels=null;c.refCount=0;delete ka[c.id];D.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Qa={repeat:10497,clamp:33071,mirror:33648},la={nearest:9728,linear:9729},dc=x({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},la),Ya={none:0,browser:37444},y={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},n={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},J={};a.ext_srgb&&(n.srgb=35904,n.srgba=35906);a.oes_texture_float&&(y.float32=y["float"]=5126);a.oes_texture_half_float&&(y.float16=y["half float"]=36193);a.webgl_depth_texture&&(x(n,{depth:6402,"depth stencil":34041}),x(y,{uint16:5123,uint32:5125,
"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&x(J,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&x(J,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&x(J,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(J["rgb etc1"]=36196);var va=Array.prototype.slice.call(d.getParameter(34467));
b(J).forEach(function(c){var d=J[c];0<=va.indexOf(d)&&(n[c]=d)});var Fa=b(n);c.textureFormats=Fa;var t=[];b(n).forEach(function(c){t[n[c]]=c});var Gb=[];b(y).forEach(function(c){Gb[y[c]]=c});var fa=[];b(la).forEach(function(c){fa[la[c]]=c});var H=[];b(dc).forEach(function(c){H[dc[c]]=c});var ta=[];b(Qa).forEach(function(c){ta[Qa[c]]=c});var Ga=Fa.reduce(function(c,d){var b=n[d];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||a.ext_srgb&&(35904===b||35906===b)?c[b]=b:32855===b||0<=d.indexOf("rgba")?
c[b]=6408:c[b]=6407;return c},{}),pa=[],za=[],Ea=0,ka={},X=c.maxTextureUnits,wa=Array(X).map(function(){return null});x(ea.prototype,{bind:function(){this.bindCount+=1;var c=this.unit;if(0>c){for(var b=0;b<X;++b){var e=wa[b];if(e){if(0<e.bindCount)continue;e.unit=-1}wa[b]=this;c=b;break}c>=X&&da.raise("insufficient number of texture units");ua.profile&&D.maxTextureUnits<c+1&&(D.maxTextureUnits=c+1);this.unit=c;d.activeTexture(33984+c);d.bindTexture(this.target,this.texture)}return c},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&qa(this)}});ua.profile&&(D.getTotalTextureSize=function(){var c=0;b(ka).forEach(function(d){c+=ka[d].stats.size});return c});return{create2D:function(b,e){function a(d,b){var e=g.texInfo;sa.call(e);var m=V();"number"===typeof d?"number"===typeof b?w(m,d|0,b|0):w(m,d|0,d|0):d?(da.type(d,"object","invalid arguments to regl.texture"),Ca(e,d),I(m,d)):w(m,1,1);e.genMipmaps&&(m.mipmask=(m.width<<1)-1);g.mipmask=m.mipmask;ba(g,m);da.texture2D(e,m,c);g.internalformat=
m.internalformat;a.width=m.width;a.height=m.height;Da(g);aa(m,3553);ya(e,3553);ja();na(m);ua.profile&&(g.stats.size=l(g.internalformat,g.type,m.width,m.height,e.genMipmaps,!1));a.format=t[g.internalformat];a.type=Gb[g.type];a.mag=fa[e.magFilter];a.min=H[e.minFilter];a.wrapS=ta[e.wrapS];a.wrapT=ta[e.wrapT];return a}var g=new ea(3553);ka[g.id]=g;D.textureCount++;a(b,e);a.subimage=function(c,d,b,e){da(!!c,"must specify image data");d|=0;b|=0;e|=0;var w=P();ba(w,g);w.width=0;w.height=0;m(w,c);w.width=
w.width||(g.width>>e)-d;w.height=w.height||(g.height>>e)-b;da(g.type===w.type&&g.format===w.format&&g.internalformat===w.internalformat,"incompatible format for texture.subimage");da(0<=d&&0<=b&&d+w.width<=g.width&&b+w.height<=g.height,"texture.subimage write out of bounds");da(g.mipmask&1<<e,"missing mipmap data");da(w.data||w.element||w.needsCopy,"missing image data");Da(g);O(w,3553,d,b,e);ja();xa(w);return a};a.resize=function(c,b){var e=c|0,m=b|0||e;if(e===g.width&&m===g.height)return a;a.width=
g.width=e;a.height=g.height=m;Da(g);for(var w=0;g.mipmask>>w;++w){var n=e>>w,k=m>>w;if(!n||!k)break;d.texImage2D(3553,w,g.format,n,k,0,g.format,g.type,null)}ja();ua.profile&&(g.stats.size=l(g.internalformat,g.type,e,m,!1,!1));return a};a._reglType="texture2d";a._texture=g;ua.profile&&(a.stats=g.stats);a.destroy=function(){g.decRef()};return a},createCube:function(b,e,a,g,n,k){function y(d,b,e,a,g,m){var n,k=J.texInfo;sa.call(k);for(n=0;6>n;++n)la[n]=V();if("number"!==typeof d&&d)if("object"===typeof d)if(b)I(la[0],
d),I(la[1],b),I(la[2],e),I(la[3],a),I(la[4],g),I(la[5],m);else if(Ca(k,d),S(J,d),"faces"in d)for(d=d.faces,da(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),n=0;6>n;++n)da("object"===typeof d[n]&&!!d[n],"invalid input for cube map face"),ba(la[n],J),I(la[n],d[n]);else for(n=0;6>n;++n)I(la[n],d);else da.raise("invalid arguments to cube map");else for(d=d|0||1,n=0;6>n;++n)w(la[n],d,d);ba(J,la[0]);da.optional(function(){c.npotTextureCube||da(Q(J.width)&&Q(J.height),"your browser does not support non power or two texture dimensions")});
J.mipmask=k.genMipmaps?(la[0].width<<1)-1:la[0].mipmask;da.textureCube(J,k,la,c);J.internalformat=la[0].internalformat;y.width=la[0].width;y.height=la[0].height;Da(J);for(n=0;6>n;++n)aa(la[n],34069+n);ya(k,34067);ja();ua.profile&&(J.stats.size=l(J.internalformat,J.type,y.width,y.height,k.genMipmaps,!0));y.format=t[J.internalformat];y.type=Gb[J.type];y.mag=fa[k.magFilter];y.min=H[k.minFilter];y.wrapS=ta[k.wrapS];y.wrapT=ta[k.wrapT];for(n=0;6>n;++n)na(la[n]);return y}var J=new ea(34067);ka[J.id]=J;
D.cubeCount++;var la=Array(6);y(b,e,a,g,n,k);y.subimage=function(c,d,b,e,a){da(!!d,"must specify image data");da("number"===typeof c&&c===(c|0)&&0<=c&&6>c,"invalid face");b|=0;e|=0;a|=0;var g=P();ba(g,J);g.width=0;g.height=0;m(g,d);g.width=g.width||(J.width>>a)-b;g.height=g.height||(J.height>>a)-e;da(J.type===g.type&&J.format===g.format&&J.internalformat===g.internalformat,"incompatible format for texture.subimage");da(0<=b&&0<=e&&b+g.width<=J.width&&e+g.height<=J.height,"texture.subimage write out of bounds");
da(J.mipmask&1<<a,"missing mipmap data");da(g.data||g.element||g.needsCopy,"missing image data");Da(J);O(g,34069+c,b,e,a);ja();xa(g);return y};y.resize=function(c){c|=0;if(c!==J.width){y.width=J.width=c;y.height=J.height=c;Da(J);for(var b=0;6>b;++b)for(var e=0;J.mipmask>>e;++e)d.texImage2D(34069+b,e,J.format,c>>e,c>>e,0,J.format,J.type,null);ja();ua.profile&&(J.stats.size=l(J.internalformat,J.type,y.width,y.height,!1,!0));return y}};y._reglType="textureCube";y._texture=J;ua.profile&&(y.stats=J.stats);
y.destroy=function(){J.decRef()};return y},clear:function(){for(var c=0;c<X;++c)d.activeTexture(33984+c),d.bindTexture(3553,null),wa[c]=null;F(ka).forEach(qa);D.cubeCount=0;D.textureCount=0},getTexture:function(c){return null},restore:function(){for(var c=0;c<X;++c){var b=wa[c];b&&(b.bindCount=0,b.unit=-1,wa[c]=null)}F(ka).forEach(function(c){c.texture=d.createTexture();d.bindTexture(c.target,c.texture);for(var b=0;32>b;++b)if(0!==(c.mipmask&1<<b))if(3553===c.target)d.texImage2D(3553,b,c.internalformat,
c.width>>b,c.height>>b,0,c.internalformat,c.type,null);else for(var e=0;6>e;++e)d.texImage2D(34069+e,b,c.internalformat,c.width>>b,c.height>>b,0,c.internalformat,c.type,null);ya(c.texInfo,c.target)})},refresh:function(){for(var c=0;c<X;++c){var b=wa[c];b&&(b.bindCount=0,b.unit=-1,wa[c]=null);d.activeTexture(33984+c);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(t,G,ga){G.exports=function(a,z){function v(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function Y(a,g,z){var f=l.pop()||new v;f.startQueryIndex=a;f.endQueryIndex=g;f.sum=0;f.stats=z;b.push(f)}if(!z.ext_disjoint_timer_query)return null;var f=[],g=[],l=[],b=[],da=[],x=[];return{beginQuery:function(b){var a=f.pop()||z.ext_disjoint_timer_query.createQueryEXT();
z.ext_disjoint_timer_query.beginQueryEXT(35007,a);g.push(a);Y(g.length-1,g.length,b)},endQuery:function(){z.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Y,update:function(){var a,v;a=g.length;if(0!==a){x.length=Math.max(x.length,a+1);da.length=Math.max(da.length,a+1);da[0]=0;var Y=x[0]=0;for(v=a=0;v<g.length;++v){var h=g[v];z.ext_disjoint_timer_query.getQueryObjectEXT(h,34919)?(Y+=z.ext_disjoint_timer_query.getQueryObjectEXT(h,34918),f.push(h)):g[a++]=h;da[v+1]=Y;x[v+1]=a}g.length=
a;for(v=a=0;v<b.length;++v){var Y=b[v],r=Y.startQueryIndex,h=Y.endQueryIndex;Y.sum+=da[h]-da[r];r=x[r];h=x[h];h===r?(Y.stats.gpuTime+=Y.sum/1E6,l.push(Y)):(Y.startQueryIndex=r,Y.endQueryIndex=h,b[a++]=Y)}b.length=a}},getNumPendingQueries:function(){return g.length},clear:function(){f.push.apply(f,g);for(var b=0;b<f.length;b++)z.ext_disjoint_timer_query.deleteQueryEXT(f[b]);g.length=0;f.length=0},restore:function(){g.length=0;f.length=0}}}},{}],21:[function(t,G,ga){function a(b){return"undefined"!==
typeof atob?atob(b):"base64:"+b}function z(b){b=Error("(regl) "+b);console.error(b);throw b;}function v(b,e){b||z(e)}function Y(b){return b?": "+b:""}function f(b,e){switch(e){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function g(b,e,a){0>e.indexOf(b)&&
z("invalid value"+Y(a)+". must be one of: "+e)}function l(b,e){for(b+="";b.length<e;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function da(b,e){this.number=b;this.line=e;this.errors=[]}function x(b,e,a){this.file=b;this.line=e;this.message=a}function F(){var b=Error(),b=(b.stack||b).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return e?e[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function T(){var b=Error(),
b=(b.stack||b).toString(),e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return e?e[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function A(e,g){var l=e.split("\n"),q=1,u=0,z={unknown:new b,0:new b};z.unknown.name=z[0].name=g||F();z.unknown.lines.push(new da(0,""));for(var f=0;f<l.length;++f){var p=l[f],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(p);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))q=d[1]|0,d[2]&&(u=d[2]|0,u in z||(z[u]=new b));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))z[u].name=
d[1]?a(d[2]):d[2]}z[u].lines.push(new da(q++,p))}L(z).forEach(function(d){var c=z[d];c.lines.forEach(function(d){c.index[d.number]=d})});return z}function h(b){var e=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var a=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);a?e.push(new x(a[1]|0,a[2]|0,a[3].trim())):0<b.length&&e.push(new x("unknown",0,b))}});return e}function r(b,e){e.forEach(function(e){var a=b[e.file];if(a){var g=a.index[e.line];if(g){g.errors.push(e);a.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(e)})}function oa(b){b._commandRef=F()}function p(b,e){var a=T();z(b+" in command "+(e||F())+("unknown"===a?"":" called from "+a))}function Q(b,e,a,g){f(b,e)||p("invalid parameter type"+Y(a)+". expected "+e+", got "+typeof b,g||F())}function q(b,e){return 32820===b||32819===b||33635===b?2:34042===b?4:C[b]*e}var L=t("./sorted-object-keys"),ma=t("./is-typed-array");t=t("./extend");var e="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
C={};C[5120]=C[5121]=1;C[5122]=C[5123]=C[36193]=C[33635]=C[32819]=C[32820]=2;C[5124]=C[5125]=C[5126]=C[34042]=4;G.exports=t(v,{optional:function(b){b()},raise:z,commandRaise:p,command:function(b,e,a){b||p(e,a||F())},parameter:function(b,e,a){b in e||z("unknown parameter ("+b+")"+Y(a)+". possible values: "+L(e).join())},commandParameter:function(b,e,a,g){b in e||p("unknown parameter ("+b+")"+Y(a)+". possible values: "+L(e).join(),g||F())},constructor:function(b){L(b).forEach(function(b){0>e.indexOf(b)&&
z('invalid regl constructor argument "'+b+'". must be one of '+e)})},type:function(b,e,a){f(b,e)||z("invalid parameter type"+Y(a)+". expected "+e+", got "+typeof b)},commandType:Q,isTypedArray:function(b,e){ma(b)||z("invalid parameter type"+Y(e)+". must be a typed array")},nni:function(b,e){0<=b&&(b|0)===b||z("invalid parameter type, ("+b+")"+Y(e)+". must be a nonnegative integer")},oneOf:g,shaderError:function(b,e,a,g,u){if(!b.getShaderParameter(e,b.COMPILE_STATUS)){e=b.getShaderInfoLog(e);b=g===
b.FRAGMENT_SHADER?"fragment":"vertex";Q(a,"string",b+" shader source must be a string",u);var q=A(a,u);a=h(e);r(q,a);L(q).forEach(function(b){function e(d,b){a.push(d);c.push(b||"")}var d=q[b];if(d.hasErrors){var a=[""],c=[""];e("file number "+b+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(c){if(0<c.errors.length){e(l(c.number,4)+"|  ","background-color:yellow; font-weight:bold");e(c.line+"\n","color:red; background-color:yellow; font-weight:bold");
var d=0;c.errors.forEach(function(b){b=b.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(b);if(a){var g=a[1];b=a[2];switch(g){case "assign":g="="}d=Math.max(c.line.indexOf(g,d),0)}else d=0;e(l("| ",6));e(l("^^^",d+3)+"\n","font-weight:bold");e(l("| ",6));e(b+"\n","font-weight:bold")});e(l("| ",6)+"\n")}else e(l(c.number,4)+"|  "),e(c.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(a.join("")):(c[0]=a.join("%c"),console.log.apply(console,c))}});v.raise("Error compiling "+
b+" shader, "+q[0].name)}},linkError:function(b,e,a,g,l){b.getProgramParameter(e,b.LINK_STATUS)||(b=b.getProgramInfoLog(e),a=A(a,l),g='Error linking program with vertex shader, "'+A(g,l)[0].name+'", and fragment shader "'+a[0].name+'"',"undefined"!==typeof document?console.log("%c"+g+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(g+"\n"+b),v.raise(g))},callSite:T,saveCommandRef:oa,saveDrawInfo:function(b,e,a,g){function l(b){return b?g.id(b):0}function q(b,
d){L(d).forEach(function(d){b[g.id(d)]=!0})}oa(b);b._fragId=l(b["static"].frag);b._vertId=l(b["static"].vert);var z=b._uniformSet={};q(z,e["static"]);q(z,e.dynamic);e=b._attributeSet={};q(e,a["static"]);q(e,a.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,e,a){b.texture?g(b.texture._texture.internalformat,e,"unsupported texture format for attachment"):g(b.renderbuffer._renderbuffer.format,a,"unsupported renderbuffer format for attachment")},
guessCommand:F,texture2D:function(b,e,a){var g=e.width,l=e.height,z=e.channels;v(0<g&&g<=a.maxTextureSize&&0<l&&l<=a.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||v(!(g&g-1)&&!!g&&!(l&l-1)&&!!l,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==g&&1!==l&&v(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(v(!(g&g-1)&&!!g&&!(l&l-1)&&!!l,"texture must be a square power of 2 to support mipmapping"),
v(e.mipmask===(g<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>a.extensions.indexOf("oes_texture_float_linear")&&v(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),v(!b.genMipmaps,"mipmap generation not supported with float textures"));var f=e.images;for(a=0;16>a;++a)if(f[a]){var p=g>>a,d=l>>a;v(e.mipmask&1<<a,"missing mipmap data");var R=f[a];v(R.width===p&&R.height===d,"invalid shape for mip images");v(R.format===e.format&&R.internalformat===
e.internalformat&&R.type===e.type,"incompatible type for mip image");!R.compressed&&R.data&&(p=Math.ceil(q(R.type,z)*p/R.unpackAlignment)*R.unpackAlignment,v(R.data.byteLength===p*d,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||v(0===(e.mipmask&1<<a),"extra mipmap data");e.compressed&&v(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,e,a,g){var l=b.width,z=b.height,f=b.channels;v(0<l&&l<=g.maxTextureSize&&
0<z&&z<=g.maxTextureSize,"invalid texture shape");v(l===z,"cube map must be square");v(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(g=0;g<a.length;++g){var p=a[g];v(p.width===l&&p.height===z,"inconsistent cube map face shape");e.genMipmaps&&(v(!p.compressed,"can not generate mipmap for compressed textures"),v(1===p.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=p.images,R=0;16>R;++R){var c=d[R];if(c){var C=l>>R,Y=z>>R;v(p.mipmask&1<<R,"missing mipmap data");
v(c.width===C&&c.height===Y,"invalid shape for mip images");v(c.format===b.format&&c.internalformat===b.internalformat&&c.type===b.type,"incompatible type for mip image");c.compressed||c.data&&v(c.data.byteLength===C*Y*Math.max(q(c.type,f),c.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(t,G,ga){G.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(t,G,ga){function a(a){return Array.prototype.slice.call(a)}function z(z){return a(z).join("")}var v=t("./extend"),Y=t("./compiled-fns");G.exports=function(){function f(){var g=[],l=[];return v(function(){g.push.apply(g,a(arguments))},{def:function(){var z="v"+b;b++;l.push(z);0<arguments.length&&(g.push(z,"="),g.push.apply(g,a(arguments)),g.push(";"));return z},toString:function(){return z([0<l.length?"var "+l.join(",")+";":"",z(g)])}})}function g(){function b(a,
z){l(a,z,"=",g.def(a,z),";")}var g=f(),l=f(),z=g.toString,Y=l.toString;return v(function(){g.apply(g,a(arguments))},{def:g.def,entry:g,exit:l,save:b,set:function(a,l,q){b(a,l);g(a,l,"=",q,";")},toString:function(){return z()+Y()}})}var l=0,b=0,da={},x=f(),F={};return{global:x,link:function(b){var a="$"+l,g=!1;"object"===typeof b&&b.name&&(a=b.name.replace(/ /g,"_"),g=!0);if(a in da)return a;da[a]=b;g||l++;return a},block:f,proc:function(b,a){function l(){var b="a"+f.length;f.push(b);return b}var f=
[];a=a||0;for(var Y=0;Y<a;++Y)l();var Y=g(),p=Y.toString;return F[b]=v(Y,{arg:l,toString:function(){return z(["function(",f.join(),"){",p(),"}"])}})},scope:g,cond:function(){var b=z(arguments),l=g(),f=g(),Y=l.toString,x=f.toString;return v(l,{then:function(){l.apply(l,a(arguments));return this},"else":function(){f.apply(f,a(arguments));return this},toString:function(){var a=x();a&&(a="else{"+a+"}");return z(["if(",b,"){",Y(),"}",a])}})},compile:function(){var b=[],a=[];Object.keys(da).sort(function(b,
a){var g="$"===b.charAt(0),l="$"===a.charAt(0);return g||l?g&&l?+b.slice(1)<+a.slice(1)?-1:1:g&&!l?-1:1:b.localeCompare(a)}).forEach(function(g){var l=da[g];b.push(g);a.push(l)});for(var g=0,l=b.length-1;-1<l;l--)if("$"===b[l].charAt(0)){g=l;break}var f=['"use strict";',x,"return {"];Object.keys(F).forEach(function(b){f.push('"',b,'":',F[b].toString(),",")});f.push("}");var l=z(f).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),g=b.slice(g).join(),p=Y[g];if(!p)throw console.log("src code is:"),
console.log(l),console.log("compiled values:",a),console.log("linked names:",b),console.log("Keys available:",Object.keys(Y)),console.log("Key:",g),console.log('"'+g+'": function('+b.join(", ")+") \n{\n"+l+"\n},"),Error("missing precompiled function with key: "+g);return p.apply(null,a)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(t,G,ga){G.exports={$0:function(a){var z,v,Y,f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U,k,Z,B,u,t,D,E;z=a.attributes;v=a.current;Y=a.framebuffer;f=a.gl;g=a.next;
l=a.vao;b=g.blend_color;da=v.blend_color;x=g.blend_equation;F=v.blend_equation;T=g.blend_func;A=v.blend_func;h=g.colorMask;r=v.colorMask;oa=g.depth_range;p=v.depth_range;Q=g.polygonOffset_offset;q=v.polygonOffset_offset;L=g.sample_coverage;ma=v.sample_coverage;e=g.scissor_box;C=v.scissor_box;U=g.stencil_func;k=v.stencil_func;Z=g.stencil_opBack;B=v.stencil_opBack;u=g.stencil_opFront;t=v.stencil_opFront;D=g.viewport;E=v.viewport;return{poll:function(){var d,a,c,l,z,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,
aa,V,na;v.dirty=!1;a=g.blend_enable;c=g.cull_enable;l=g.depth_enable;z=g.dither;ha=g.polygonOffset_enable;Ba=g.sample_alpha;W=g.sample_enable;ba=g.scissor_enable;S=g.stencil_enable;M=g.cull_face;N=v.cull_face;m=g.depth_func;O=v.depth_func;P=g.depth_mask;xa=v.depth_mask;ra=g.frontFace;w=v.frontFace;I=g.lineWidth;aa=v.lineWidth;V=g.stencil_mask;na=v.stencil_mask;d=Y.next;d!==Y.cur&&(d?f.bindFramebuffer(36160,d.framebuffer):f.bindFramebuffer(36160,null),Y.cur=d);a!==v.blend_enable&&(a?f.enable(3042):
f.disable(3042),v.blend_enable=a);c!==v.cull_enable&&(c?f.enable(2884):f.disable(2884),v.cull_enable=c);l!==v.depth_enable&&(l?f.enable(2929):f.disable(2929),v.depth_enable=l);z!==v.dither&&(z?f.enable(3024):f.disable(3024),v.dither=z);ha!==v.polygonOffset_enable&&(ha?f.enable(32823):f.disable(32823),v.polygonOffset_enable=ha);Ba!==v.sample_alpha&&(Ba?f.enable(32926):f.disable(32926),v.sample_alpha=Ba);W!==v.sample_enable&&(W?f.enable(32928):f.disable(32928),v.sample_enable=W);ba!==v.scissor_enable&&
(ba?f.enable(3089):f.disable(3089),v.scissor_enable=ba);S!==v.stencil_enable&&(S?f.enable(2960):f.disable(2960),v.stencil_enable=S);if(b[0]!==da[0]||b[1]!==da[1]||b[2]!==da[2]||b[3]!==da[3])f.blendColor(b[0],b[1],b[2],b[3]),da[0]=b[0],da[1]=b[1],da[2]=b[2],da[3]=b[3];if(x[0]!==F[0]||x[1]!==F[1])f.blendEquationSeparate(x[0],x[1]),F[0]=x[0],F[1]=x[1];if(T[0]!==A[0]||T[1]!==A[1]||T[2]!==A[2]||T[3]!==A[3])f.blendFuncSeparate(T[0],T[1],T[2],T[3]),A[0]=T[0],A[1]=T[1],A[2]=T[2],A[3]=T[3];if(h[0]!==r[0]||
h[1]!==r[1]||h[2]!==r[2]||h[3]!==r[3])f.colorMask(h[0],h[1],h[2],h[3]),r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3];M!==N&&(f.cullFace(M),v.cull_face=M);m!==O&&(f.depthFunc(m),v.depth_func=m);P!==xa&&(f.depthMask(P),v.depth_mask=P);if(oa[0]!==p[0]||oa[1]!==p[1])f.depthRange(oa[0],oa[1]),p[0]=oa[0],p[1]=oa[1];ra!==w&&(f.frontFace(ra),v.frontFace=ra);I!==aa&&(f.lineWidth(I),v.lineWidth=I);if(Q[0]!==q[0]||Q[1]!==q[1])f.polygonOffset(Q[0],Q[1]),q[0]=Q[0],q[1]=Q[1];if(L[0]!==ma[0]||L[1]!==ma[1])f.sampleCoverage(L[0],
L[1]),ma[0]=L[0],ma[1]=L[1];if(e[0]!==C[0]||e[1]!==C[1]||e[2]!==C[2]||e[3]!==C[3])f.scissor(e[0],e[1],e[2],e[3]),C[0]=e[0],C[1]=e[1],C[2]=e[2],C[3]=e[3];if(U[0]!==k[0]||U[1]!==k[1]||U[2]!==k[2])f.stencilFunc(U[0],U[1],U[2]),k[0]=U[0],k[1]=U[1],k[2]=U[2];V!==na&&(f.stencilMask(V),v.stencil_mask=V);if(Z[0]!==B[0]||Z[1]!==B[1]||Z[2]!==B[2]||Z[3]!==B[3])f.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]),B[0]=Z[0],B[1]=Z[1],B[2]=Z[2],B[3]=Z[3];if(u[0]!==t[0]||u[1]!==t[1]||u[2]!==t[2]||u[3]!==t[3])f.stencilOpSeparate(u[0],
u[1],u[2],u[3]),t[0]=u[0],t[1]=u[1],t[2]=u[2],t[3]=u[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])f.viewport(D[0],D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3]},refresh:function(){var d,a,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa;v.dirty=!1;a=g.blend_enable;c=g.cull_enable;ia=g.depth_enable;K=g.dither;ha=g.polygonOffset_enable;Ba=g.sample_alpha;W=g.sample_enable;ba=g.scissor_enable;S=g.stencil_enable;M=g.cull_face;N=g.depth_func;m=g.depth_mask;O=g.frontFace;P=g.lineWidth;xa=g.stencil_mask;
(d=Y.next)?f.bindFramebuffer(36160,d.framebuffer):f.bindFramebuffer(36160,null);Y.cur=d;d=z[0];d.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=z[1];d.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(1),
f.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);d=z[2];d.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=z[3];d.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,d.x,d.y,d.z,
d.w),d.buffer=null);d=z[4];d.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=z[5];d.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=z[6];d.buffer?
(f.enableVertexAttribArray(6),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=z[7];d.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=z[8];d.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,
d.buffer.buffer),f.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=z[9];d.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=z[10];d.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(10,
d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=z[11];d.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=z[12];d.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=z[13];d.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=z[14];d.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(14),
f.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=z[15];d.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);l.currentVAO=null;l.setVAO(l.targetVAO);a?f.enable(3042):f.disable(3042);v.blend_enable=a;c?f.enable(2884):f.disable(2884);v.cull_enable=c;ia?f.enable(2929):f.disable(2929);v.depth_enable=ia;K?f.enable(3024):f.disable(3024);
v.dither=K;ha?f.enable(32823):f.disable(32823);v.polygonOffset_enable=ha;Ba?f.enable(32926):f.disable(32926);v.sample_alpha=Ba;W?f.enable(32928):f.disable(32928);v.sample_enable=W;ba?f.enable(3089):f.disable(3089);v.scissor_enable=ba;S?f.enable(2960):f.disable(2960);v.stencil_enable=S;f.blendColor(b[0],b[1],b[2],b[3]);da[0]=b[0];da[1]=b[1];da[2]=b[2];da[3]=b[3];f.blendEquationSeparate(x[0],x[1]);F[0]=x[0];F[1]=x[1];f.blendFuncSeparate(T[0],T[1],T[2],T[3]);A[0]=T[0];A[1]=T[1];A[2]=T[2];A[3]=T[3];f.colorMask(h[0],
h[1],h[2],h[3]);r[0]=h[0];r[1]=h[1];r[2]=h[2];r[3]=h[3];f.cullFace(M);v.cull_face=M;f.depthFunc(N);v.depth_func=N;f.depthMask(m);v.depth_mask=m;f.depthRange(oa[0],oa[1]);p[0]=oa[0];p[1]=oa[1];f.frontFace(O);v.frontFace=O;f.lineWidth(P);v.lineWidth=P;f.polygonOffset(Q[0],Q[1]);q[0]=Q[0];q[1]=Q[1];f.sampleCoverage(L[0],L[1]);ma[0]=L[0];ma[1]=L[1];f.scissor(e[0],e[1],e[2],e[3]);C[0]=e[0];C[1]=e[1];C[2]=e[2];C[3]=e[3];f.stencilFunc(U[0],U[1],U[2]);k[0]=U[0];k[1]=U[1];k[2]=U[2];f.stencilMask(xa);v.stencil_mask=
xa;f.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]);B[0]=Z[0];B[1]=Z[1];B[2]=Z[2];B[3]=Z[3];f.stencilOpSeparate(u[0],u[1],u[2],u[3]);t[0]=u[0];t[1]=u[1];t[2]=u[2];t[3]=u[3];f.viewport(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=D[1];E[2]=D[2];E[3]=D[3]}}},$3:function(a,z,v,Y){var f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U,k,Z,B,u,t,D,E,d,R,c,ia,K,ha;f=a.context;g=a.current;l=a.framebuffer;b=a.gl;da=a.next;x=a.shader;F=a.vao;T=da.blend_color;A=g.blend_color;h=da.blend_equation;r=g.blend_equation;oa=da.blend_func;
p=g.blend_func;Q=da.colorMask;q=g.colorMask;L=da.depth_range;ma=g.depth_range;e=da.polygonOffset_offset;C=g.polygonOffset_offset;U=da.sample_coverage;k=g.sample_coverage;Z=da.scissor_box;B=g.scissor_box;u=da.stencil_func;t=g.stencil_func;D=da.stencil_opBack;E=g.stencil_opBack;d=da.stencil_opFront;R=g.stencil_opFront;c=da.viewport;ia=g.viewport;K={};ha={};return{batch:function(a,f){var v,S,M,N,m;v=l.next;v!==l.cur&&(v?b.bindFramebuffer(36160,v.framebuffer):b.bindFramebuffer(36160,null),l.cur=v);if(g.dirty){v=
da.dither;v!==g.dither&&(v?b.enable(3024):b.disable(3024),g.dither=v);v=da.blend_enable;v!==g.blend_enable&&(v?b.enable(3042):b.disable(3042),g.blend_enable=v);v=T[0];M=T[1];N=T[2];m=T[3];if(v!==A[0]||M!==A[1]||N!==A[2]||m!==A[3])b.blendColor(v,M,N,m),A[0]=v,A[1]=M,A[2]=N,A[3]=m;v=h[0];M=h[1];if(v!==r[0]||M!==r[1])b.blendEquationSeparate(v,M),r[0]=v,r[1]=M;v=oa[0];M=oa[1];N=oa[2];m=oa[3];if(v!==p[0]||M!==p[1]||N!==p[2]||m!==p[3])b.blendFuncSeparate(v,M,N,m),p[0]=v,p[1]=M,p[2]=N,p[3]=m;v=da.depth_enable;
v!==g.depth_enable&&(v?b.enable(2929):b.disable(2929),g.depth_enable=v);v=da.depth_func;v!==g.depth_func&&(b.depthFunc(v),g.depth_func=v);v=L[0];M=L[1];if(v!==ma[0]||M!==ma[1])b.depthRange(v,M),ma[0]=v,ma[1]=M;v=da.depth_mask;v!==g.depth_mask&&(b.depthMask(v),g.depth_mask=v);v=Q[0];M=Q[1];N=Q[2];m=Q[3];if(v!==q[0]||M!==q[1]||N!==q[2]||m!==q[3])b.colorMask(v,M,N,m),q[0]=v,q[1]=M,q[2]=N,q[3]=m;v=da.cull_enable;v!==g.cull_enable&&(v?b.enable(2884):b.disable(2884),g.cull_enable=v);v=da.cull_face;v!==
g.cull_face&&(b.cullFace(v),g.cull_face=v);v=da.frontFace;v!==g.frontFace&&(b.frontFace(v),g.frontFace=v);v=da.lineWidth;v!==g.lineWidth&&(b.lineWidth(v),g.lineWidth=v);v=da.polygonOffset_enable;v!==g.polygonOffset_enable&&(v?b.enable(32823):b.disable(32823),g.polygonOffset_enable=v);v=e[0];M=e[1];if(v!==C[0]||M!==C[1])b.polygonOffset(v,M),C[0]=v,C[1]=M;v=da.sample_alpha;v!==g.sample_alpha&&(v?b.enable(32926):b.disable(32926),g.sample_alpha=v);v=da.sample_enable;v!==g.sample_enable&&(v?b.enable(32928):
b.disable(32928),g.sample_enable=v);v=U[0];M=U[1];if(v!==k[0]||M!==k[1])b.sampleCoverage(v,M),k[0]=v,k[1]=M;v=da.stencil_enable;v!==g.stencil_enable&&(v?b.enable(2960):b.disable(2960),g.stencil_enable=v);v=da.stencil_mask;v!==g.stencil_mask&&(b.stencilMask(v),g.stencil_mask=v);v=u[0];M=u[1];N=u[2];if(v!==t[0]||M!==t[1]||N!==t[2])b.stencilFunc(v,M,N),t[0]=v,t[1]=M,t[2]=N;v=d[0];M=d[1];N=d[2];m=d[3];if(v!==R[0]||M!==R[1]||N!==R[2]||m!==R[3])b.stencilOpSeparate(v,M,N,m),R[0]=v,R[1]=M,R[2]=N,R[3]=m;v=
D[0];M=D[1];N=D[2];m=D[3];if(v!==E[0]||M!==E[1]||N!==E[2]||m!==E[3])b.stencilOpSeparate(v,M,N,m),E[0]=v,E[1]=M,E[2]=N,E[3]=m;v=da.scissor_enable;v!==g.scissor_enable&&(v?b.enable(3089):b.disable(3089),g.scissor_enable=v);v=Z[0];M=Z[1];N=Z[2];m=Z[3];if(v!==B[0]||M!==B[1]||N!==B[2]||m!==B[3])b.scissor(v,M,N,m),B[0]=v,B[1]=M,B[2]=N,B[3]=m;v=c[0];M=c[1];N=c[2];m=c[3];if(v!==ia[0]||M!==ia[1]||N!==ia[2]||m!==ia[3])b.viewport(v,M,N,m),ia[0]=v,ia[1]=M,ia[2]=N,ia[3]=m;g.dirty=!1}if(v=g.profile)S=performance.now(),
z.count+=f;M=x.program(x.vert,x.frag);b.useProgram(M.program);F.setVAO(null);N=M.id;(m=ha[N])||(m=ha[N]=Y(M));m.call(this,a,f);F.setVAO(null);v&&(z.cpuTime+=performance.now()-S)},draw:function(a){var f,Y,S,M,N;f=l.next;f!==l.cur&&(f?b.bindFramebuffer(36160,f.framebuffer):b.bindFramebuffer(36160,null),l.cur=f);if(g.dirty){f=da.dither;f!==g.dither&&(f?b.enable(3024):b.disable(3024),g.dither=f);f=da.blend_enable;f!==g.blend_enable&&(f?b.enable(3042):b.disable(3042),g.blend_enable=f);f=T[0];S=T[1];M=
T[2];N=T[3];if(f!==A[0]||S!==A[1]||M!==A[2]||N!==A[3])b.blendColor(f,S,M,N),A[0]=f,A[1]=S,A[2]=M,A[3]=N;f=h[0];S=h[1];if(f!==r[0]||S!==r[1])b.blendEquationSeparate(f,S),r[0]=f,r[1]=S;f=oa[0];S=oa[1];M=oa[2];N=oa[3];if(f!==p[0]||S!==p[1]||M!==p[2]||N!==p[3])b.blendFuncSeparate(f,S,M,N),p[0]=f,p[1]=S,p[2]=M,p[3]=N;f=da.depth_enable;f!==g.depth_enable&&(f?b.enable(2929):b.disable(2929),g.depth_enable=f);f=da.depth_func;f!==g.depth_func&&(b.depthFunc(f),g.depth_func=f);f=L[0];S=L[1];if(f!==ma[0]||S!==
ma[1])b.depthRange(f,S),ma[0]=f,ma[1]=S;f=da.depth_mask;f!==g.depth_mask&&(b.depthMask(f),g.depth_mask=f);f=Q[0];S=Q[1];M=Q[2];N=Q[3];if(f!==q[0]||S!==q[1]||M!==q[2]||N!==q[3])b.colorMask(f,S,M,N),q[0]=f,q[1]=S,q[2]=M,q[3]=N;f=da.cull_enable;f!==g.cull_enable&&(f?b.enable(2884):b.disable(2884),g.cull_enable=f);f=da.cull_face;f!==g.cull_face&&(b.cullFace(f),g.cull_face=f);f=da.frontFace;f!==g.frontFace&&(b.frontFace(f),g.frontFace=f);f=da.lineWidth;f!==g.lineWidth&&(b.lineWidth(f),g.lineWidth=f);f=
da.polygonOffset_enable;f!==g.polygonOffset_enable&&(f?b.enable(32823):b.disable(32823),g.polygonOffset_enable=f);f=e[0];S=e[1];if(f!==C[0]||S!==C[1])b.polygonOffset(f,S),C[0]=f,C[1]=S;f=da.sample_alpha;f!==g.sample_alpha&&(f?b.enable(32926):b.disable(32926),g.sample_alpha=f);f=da.sample_enable;f!==g.sample_enable&&(f?b.enable(32928):b.disable(32928),g.sample_enable=f);f=U[0];S=U[1];if(f!==k[0]||S!==k[1])b.sampleCoverage(f,S),k[0]=f,k[1]=S;f=da.stencil_enable;f!==g.stencil_enable&&(f?b.enable(2960):
b.disable(2960),g.stencil_enable=f);f=da.stencil_mask;f!==g.stencil_mask&&(b.stencilMask(f),g.stencil_mask=f);f=u[0];S=u[1];M=u[2];if(f!==t[0]||S!==t[1]||M!==t[2])b.stencilFunc(f,S,M),t[0]=f,t[1]=S,t[2]=M;f=d[0];S=d[1];M=d[2];N=d[3];if(f!==R[0]||S!==R[1]||M!==R[2]||N!==R[3])b.stencilOpSeparate(f,S,M,N),R[0]=f,R[1]=S,R[2]=M,R[3]=N;f=D[0];S=D[1];M=D[2];N=D[3];if(f!==E[0]||S!==E[1]||M!==E[2]||N!==E[3])b.stencilOpSeparate(f,S,M,N),E[0]=f,E[1]=S,E[2]=M,E[3]=N;f=da.scissor_enable;f!==g.scissor_enable&&
(f?b.enable(3089):b.disable(3089),g.scissor_enable=f);f=Z[0];S=Z[1];M=Z[2];N=Z[3];if(f!==B[0]||S!==B[1]||M!==B[2]||N!==B[3])b.scissor(f,S,M,N),B[0]=f,B[1]=S,B[2]=M,B[3]=N;f=c[0];S=c[1];M=c[2];N=c[3];if(f!==ia[0]||S!==ia[1]||M!==ia[2]||N!==ia[3])b.viewport(f,S,M,N),ia[0]=f,ia[1]=S,ia[2]=M,ia[3]=N;g.dirty=!1}if(f=g.profile)Y=performance.now(),z.count++;S=x.program(x.vert,x.frag);b.useProgram(S.program);F.setVAO(null);M=S.id;(N=K[M])||(N=K[M]=v(S));N.call(this,a);F.setVAO(null);f&&(z.cpuTime+=performance.now()-
Y)},scope:function(c,b,d){var e,a;if(e=g.profile)a=performance.now(),z.count++;b(f,c,d);e&&(z.cpuTime+=performance.now()-a)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,z,v,Y,f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q,L,t,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,
W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea){var ka,X,wa,Ha,Ka,hb,ca,yd,ac,Ia,G,Tb,ye,Cd,xd,Wd,Ae,zd,Vd,oe,he,Nd,fe,ee,$d,$e,Oe,Se,Ed,Be,ie,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va;ka=a.attributes;X=a.context;wa=a.current;Ha=a.draw;Ka=a.elements;hb=a.framebuffer;ca=a.gl;yd=a.next;ac=a.shader;Ia=a.uniforms;G=a.vao;Tb=yd.blend_color;ye=wa.blend_color;Cd=yd.blend_equation;
xd=wa.blend_equation;Wd=yd.blend_func;Ae=wa.blend_func;zd=yd.colorMask;Vd=wa.colorMask;oe=yd.depth_range;he=wa.depth_range;Nd=yd.polygonOffset_offset;fe=wa.polygonOffset_offset;ee=yd.sample_coverage;$d=wa.sample_coverage;$e=yd.scissor_box;Oe=wa.scissor_box;Se=yd.stencil_func;Ed=wa.stencil_func;Be=yd.stencil_opBack;ie=wa.stencil_opBack;Jd=yd.stencil_opFront;Xd=wa.stencil_opFront;Ad=yd.viewport;nd=wa.viewport;ad={};rd={};Lc=new Float32Array(16);pd=new Float32Array(16);Fc=new Float32Array(16);fd=new Float32Array(16);
Pc=new Float32Array(16);ld=new Float32Array(16);Ab=new Float32Array(16);Eb=new Float32Array(16);uc=new Float32Array(16);yb=new Float32Array(16);xc=new Float32Array(16);Bb=new Float32Array(16);Jc=new Float32Array(16);lc=new Float32Array(16);Gc=new Float32Array(16);gd=new Float32Array(16);bd=new Float32Array(16);Dc=new Float32Array(16);fc=new Float32Array(16);Hc=new Float32Array(16);oc=new Float32Array(16);qc=new Float32Array(16);mc=new Float32Array(16);pc=new Float32Array(16);fb=new Float32Array(16);
Vc=new Float32Array(16);Rb=new Float32Array(16);cb=new Float32Array(16);Mb=new Float32Array(16);ab=new Float32Array(16);ob=new Float32Array(16);Va=new Float32Array(16);return{batch:function(c,d){var e,a,k,v;e=hb.next;e!==hb.cur&&(e?ca.bindFramebuffer(36160,e.framebuffer):ca.bindFramebuffer(36160,null),hb.cur=e);if(wa.dirty){var R,u,z,B,C,K,D,E,L,U,Z,t,ma,ia,ha,Ia,ua,Tb,ac,Eb,Pc,Ab,Bb,Pa,$e;R=zd[0];u=zd[1];z=zd[2];B=zd[3];if(R!==Vd[0]||u!==Vd[1]||z!==Vd[2]||B!==Vd[3])ca.colorMask(R,u,z,B),Vd[0]=R,
Vd[1]=u,Vd[2]=z,Vd[3]=B;C=yd.frontFace;C!==wa.frontFace&&(ca.frontFace(C),wa.frontFace=C);K=yd.polygonOffset_enable;K!==wa.polygonOffset_enable&&(K?ca.enable(32823):ca.disable(32823),wa.polygonOffset_enable=K);D=Nd[0];E=Nd[1];if(D!==fe[0]||E!==fe[1])ca.polygonOffset(D,E),fe[0]=D,fe[1]=E;L=yd.sample_alpha;L!==wa.sample_alpha&&(L?ca.enable(32926):ca.disable(32926),wa.sample_alpha=L);U=yd.sample_enable;U!==wa.sample_enable&&(U?ca.enable(32928):ca.disable(32928),wa.sample_enable=U);Z=ee[0];t=ee[1];if(Z!==
$d[0]||t!==$d[1])ca.sampleCoverage(Z,t),$d[0]=Z,$d[1]=t;ma=yd.stencil_enable;ma!==wa.stencil_enable&&(ma?ca.enable(2960):ca.disable(2960),wa.stencil_enable=ma);ia=yd.stencil_mask;ia!==wa.stencil_mask&&(ca.stencilMask(ia),wa.stencil_mask=ia);ha=Se[0];Ia=Se[1];ua=Se[2];if(ha!==Ed[0]||Ia!==Ed[1]||ua!==Ed[2])ca.stencilFunc(ha,Ia,ua),Ed[0]=ha,Ed[1]=Ia,Ed[2]=ua;Tb=Jd[0];ac=Jd[1];Eb=Jd[2];Pc=Jd[3];if(Tb!==Xd[0]||ac!==Xd[1]||Eb!==Xd[2]||Pc!==Xd[3])ca.stencilOpSeparate(Tb,ac,Eb,Pc),Xd[0]=Tb,Xd[1]=ac,Xd[2]=
Eb,Xd[3]=Pc;Ab=Be[0];Bb=Be[1];Pa=Be[2];$e=Be[3];if(Ab!==ie[0]||Bb!==ie[1]||Pa!==ie[2]||$e!==ie[3])ca.stencilOpSeparate(Ab,Bb,Pa,$e),ie[0]=Ab,ie[1]=Bb,ie[2]=Pa,ie[3]=$e}ca.blendColor(0,0,0,0);ye[0]=0;ye[1]=0;ye[2]=0;ye[3]=0;ca.disable(3042);wa.blend_enable=!1;ca.blendEquationSeparate(32774,32774);xd[0]=32774;xd[1]=32774;ca.blendFuncSeparate(770,771,1,1);Ae[0]=770;Ae[1]=771;Ae[2]=1;Ae[3]=1;ca.enable(2884);wa.cull_enable=!0;ca.cullFace(1029);wa.cull_face=1029;ca.enable(2929);wa.depth_enable=!0;ca.depthFunc(513);
wa.depth_func=513;ca.depthMask(!0);wa.depth_mask=!0;ca.depthRange(0,1);he[0]=0;he[1]=1;ca.disable(3024);wa.dither=!1;ca.lineWidth(2);wa.lineWidth=2;ca.enable(3089);wa.scissor_enable=!0;a=wa.profile;wa.profile=!1;ca.useProgram(Ba.program);var Sa,yb,ld,Ma,lc,Za,Fc,Wd,mb,Oa,uc,Ra,vb,wb,Ua,nb,pd,Cd,Gc,bb,Jc,fd,Xa,Lc,zb,$a,oe,xc,Wb,Qb,Ad,Sb,gd;G.setVAO(null);Sa=Aa.location;yb=ka[Sa];yb.buffer||ca.enableVertexAttribArray(Sa);if(yb.type!==Y.dtype||4!==yb.size||yb.buffer!==Y||!1!==yb.normalized||0!==yb.offset||
0!==yb.stride)ca.bindBuffer(34962,Y.buffer),ca.vertexAttribPointer(Sa,4,Y.dtype,!1,0,0),yb.type=Y.dtype,yb.size=4,yb.buffer=Y,yb.normalized=!1,yb.offset=0,yb.stride=0;ld=Qa.location;Ma=ka[ld];Ma.buffer||ca.enableVertexAttribArray(ld);if(Ma.type!==f.dtype||4!==Ma.size||Ma.buffer!==f||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)ca.bindBuffer(34962,f.buffer),ca.vertexAttribPointer(ld,4,f.dtype,!1,0,0),Ma.type=f.dtype,Ma.size=4,Ma.buffer=f,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;lc=la.location;
Za=ka[lc];Za.buffer||ca.enableVertexAttribArray(lc);if(Za.type!==g.dtype||4!==Za.size||Za.buffer!==g||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ca.bindBuffer(34962,g.buffer),ca.vertexAttribPointer(lc,4,g.dtype,!1,0,0),Za.type=g.dtype,Za.size=4,Za.buffer=g,Za.normalized=!1,Za.offset=0,Za.stride=0;Fc=dc.location;Wd=ka[Fc];Wd.buffer||ca.enableVertexAttribArray(Fc);if(Wd.type!==l.dtype||4!==Wd.size||Wd.buffer!==l||!1!==Wd.normalized||0!==Wd.offset||0!==Wd.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(Fc,
4,l.dtype,!1,0,0),Wd.type=l.dtype,Wd.size=4,Wd.buffer=l,Wd.normalized=!1,Wd.offset=0,Wd.stride=0;mb=Ya.location;Oa=ka[mb];Oa.buffer||ca.enableVertexAttribArray(mb);if(Oa.type!==b.dtype||4!==Oa.size||Oa.buffer!==b||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ca.bindBuffer(34962,b.buffer),ca.vertexAttribPointer(mb,4,b.dtype,!1,0,0),Oa.type=b.dtype,Oa.size=4,Oa.buffer=b,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;uc=y.location;Ra=ka[uc];Ra.buffer||ca.enableVertexAttribArray(uc);if(Ra.type!==da.dtype||
4!==Ra.size||Ra.buffer!==da||!1!==Ra.normalized||0!==Ra.offset||0!==Ra.stride)ca.bindBuffer(34962,da.buffer),ca.vertexAttribPointer(uc,4,da.dtype,!1,0,0),Ra.type=da.dtype,Ra.size=4,Ra.buffer=da,Ra.normalized=!1,Ra.offset=0,Ra.stride=0;vb=n.location;wb=ka[vb];wb.buffer||ca.enableVertexAttribArray(vb);if(wb.type!==x.dtype||4!==wb.size||wb.buffer!==x||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)ca.bindBuffer(34962,x.buffer),ca.vertexAttribPointer(vb,4,x.dtype,!1,0,0),wb.type=x.dtype,wb.size=4,wb.buffer=
x,wb.normalized=!1,wb.offset=0,wb.stride=0;Ua=J.location;nb=ka[Ua];nb.buffer||ca.enableVertexAttribArray(Ua);if(nb.type!==F.dtype||4!==nb.size||nb.buffer!==F||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(Ua,4,F.dtype,!1,0,0),nb.type=F.dtype,nb.size=4,nb.buffer=F,nb.normalized=!1,nb.offset=0,nb.stride=0;pd=va.location;Cd=ka[pd];Cd.buffer||ca.enableVertexAttribArray(pd);if(Cd.type!==T.dtype||4!==Cd.size||Cd.buffer!==T||!1!==Cd.normalized||0!==
Cd.offset||0!==Cd.stride)ca.bindBuffer(34962,T.buffer),ca.vertexAttribPointer(pd,4,T.dtype,!1,0,0),Cd.type=T.dtype,Cd.size=4,Cd.buffer=T,Cd.normalized=!1,Cd.offset=0,Cd.stride=0;Gc=Fa.location;bb=ka[Gc];bb.buffer||ca.enableVertexAttribArray(Gc);if(bb.type!==A.dtype||4!==bb.size||bb.buffer!==A||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ca.bindBuffer(34962,A.buffer),ca.vertexAttribPointer(Gc,4,A.dtype,!1,0,0),bb.type=A.dtype,bb.size=4,bb.buffer=A,bb.normalized=!1,bb.offset=0,bb.stride=0;Jc=Yb.location;
fd=ka[Jc];fd.buffer||ca.enableVertexAttribArray(Jc);if(fd.type!==h.dtype||4!==fd.size||fd.buffer!==h||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)ca.bindBuffer(34962,h.buffer),ca.vertexAttribPointer(Jc,4,h.dtype,!1,0,0),fd.type=h.dtype,fd.size=4,fd.buffer=h,fd.normalized=!1,fd.offset=0,fd.stride=0;Xa=Gb.location;Lc=ka[Xa];Lc.buffer||ca.enableVertexAttribArray(Xa);if(Lc.type!==r.dtype||4!==Lc.size||Lc.buffer!==r||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ca.bindBuffer(34962,r.buffer),ca.vertexAttribPointer(Xa,
4,r.dtype,!1,0,0),Lc.type=r.dtype,Lc.size=4,Lc.buffer=r,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;zb=fa.location;$a=ka[zb];$a.buffer||ca.enableVertexAttribArray(zb);if($a.type!==oa.dtype||4!==$a.size||$a.buffer!==oa||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)ca.bindBuffer(34962,oa.buffer),ca.vertexAttribPointer(zb,4,oa.dtype,!1,0,0),$a.type=oa.dtype,$a.size=4,$a.buffer=oa,$a.normalized=!1,$a.offset=0,$a.stride=0;oe=H.location;xc=ka[oe];xc.buffer||ca.enableVertexAttribArray(oe);if(xc.type!==
p.dtype||4!==xc.size||xc.buffer!==p||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)ca.bindBuffer(34962,p.buffer),ca.vertexAttribPointer(oe,4,p.dtype,!1,0,0),xc.type=p.dtype,xc.size=4,xc.buffer=p,xc.normalized=!1,xc.offset=0,xc.stride=0;Wb=ta.location;Qb=ka[Wb];Qb.buffer||ca.enableVertexAttribArray(Wb);if(Qb.type!==Q.dtype||4!==Qb.size||Qb.buffer!==Q||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ca.bindBuffer(34962,Q.buffer),ca.vertexAttribPointer(Wb,4,Q.dtype,!1,0,0),Qb.type=Q.dtype,Qb.size=
4,Qb.buffer=Q,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Ad=ba.location;Sb=ka[Ad];Sb.buffer||ca.enableVertexAttribArray(Ad);if(Sb.type!==q.dtype||4!==Sb.size||Sb.buffer!==q||!1!==Sb.normalized||0!==Sb.offset||0!==Sb.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(Ad,4,q.dtype,!1,0,0),Sb.type=q.dtype,Sb.size=4,Sb.buffer=q,Sb.normalized=!1,Sb.offset=0,Sb.stride=0;ca.uniform1i(Ga.location,W.bind());(gd=Ha.elements)?ca.bindBuffer(34963,gd.buffer.buffer):G.currentVAO&&(gd=Ka.getElements(G.currentVAO.elements))&&
ca.bindBuffer(34963,gd.buffer.buffer);for(k=0;k<d;++k){v=c[k];var Ec,ga,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce;ad.height=v.viewportHeight;ad.width=v.viewportWidth;ad.x=v.viewportX;ad.y=v.viewportY;Ec=ad.x|0;ga=ad.y|0;Nc="width"in ad?ad.width|0:X.framebufferWidth-Ec;Xc="height"in ad?ad.height|0:X.framebufferHeight-ga;td=X.viewportWidth;X.viewportWidth=Nc;nc=X.viewportHeight;
X.viewportHeight=Xc;ca.viewport(Ec,ga,Nc,Xc);nd[0]=Ec;nd[1]=ga;nd[2]=Nc;nd[3]=Xc;rd.height=v.scissorHeight;rd.width=v.scissorWidth;rd.x=v.scissorX;rd.y=v.scissorY;wc=rd.x|0;hc=rd.y|0;db="width"in rd?rd.width|0:X.framebufferWidth-wc;sc="height"in rd?rd.height|0:X.framebufferHeight-hc;ca.scissor(wc,hc,db,sc);Oe[0]=wc;Oe[1]=hc;Oe[2]=db;Oe[3]=sc;Ub=v.dim0A;ca.uniformMatrix4fv(M.location,!1,Array.isArray(Ub)||Ub instanceof Float32Array?Ub:(bd[0]=Ub[0],bd[1]=Ub[1],bd[2]=Ub[2],bd[3]=Ub[3],bd[4]=Ub[4],bd[5]=
Ub[5],bd[6]=Ub[6],bd[7]=Ub[7],bd[8]=Ub[8],bd[9]=Ub[9],bd[10]=Ub[10],bd[11]=Ub[11],bd[12]=Ub[12],bd[13]=Ub[13],bd[14]=Ub[14],bd[15]=Ub[15],bd));Xb=v.dim1A;ca.uniformMatrix4fv(P.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Dc[0]=Xb[0],Dc[1]=Xb[1],Dc[2]=Xb[2],Dc[3]=Xb[3],Dc[4]=Xb[4],Dc[5]=Xb[5],Dc[6]=Xb[6],Dc[7]=Xb[7],Dc[8]=Xb[8],Dc[9]=Xb[9],Dc[10]=Xb[10],Dc[11]=Xb[11],Dc[12]=Xb[12],Dc[13]=Xb[13],Dc[14]=Xb[14],Dc[15]=Xb[15],Dc));ec=v.dim0B;ca.uniformMatrix4fv(N.location,!1,Array.isArray(ec)||
ec instanceof Float32Array?ec:(fc[0]=ec[0],fc[1]=ec[1],fc[2]=ec[2],fc[3]=ec[3],fc[4]=ec[4],fc[5]=ec[5],fc[6]=ec[6],fc[7]=ec[7],fc[8]=ec[8],fc[9]=ec[9],fc[10]=ec[10],fc[11]=ec[11],fc[12]=ec[12],fc[13]=ec[13],fc[14]=ec[14],fc[15]=ec[15],fc));ic=v.dim1B;ca.uniformMatrix4fv(xa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Hc[0]=ic[0],Hc[1]=ic[1],Hc[2]=ic[2],Hc[3]=ic[3],Hc[4]=ic[4],Hc[5]=ic[5],Hc[6]=ic[6],Hc[7]=ic[7],Hc[8]=ic[8],Hc[9]=ic[9],Hc[10]=ic[10],Hc[11]=ic[11],Hc[12]=ic[12],Hc[13]=
ic[13],Hc[14]=ic[14],Hc[15]=ic[15],Hc));yc=v.dim0C;ca.uniformMatrix4fv(m.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(oc[0]=yc[0],oc[1]=yc[1],oc[2]=yc[2],oc[3]=yc[3],oc[4]=yc[4],oc[5]=yc[5],oc[6]=yc[6],oc[7]=yc[7],oc[8]=yc[8],oc[9]=yc[9],oc[10]=yc[10],oc[11]=yc[11],oc[12]=yc[12],oc[13]=yc[13],oc[14]=yc[14],oc[15]=yc[15],oc));Bc=v.dim1C;ca.uniformMatrix4fv(ra.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(qc[0]=Bc[0],qc[1]=Bc[1],qc[2]=Bc[2],qc[3]=Bc[3],qc[4]=Bc[4],qc[5]=
Bc[5],qc[6]=Bc[6],qc[7]=Bc[7],qc[8]=Bc[8],qc[9]=Bc[9],qc[10]=Bc[10],qc[11]=Bc[11],qc[12]=Bc[12],qc[13]=Bc[13],qc[14]=Bc[14],qc[15]=Bc[15],qc));cd=v.dim0D;ca.uniformMatrix4fv(O.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(mc[0]=cd[0],mc[1]=cd[1],mc[2]=cd[2],mc[3]=cd[3],mc[4]=cd[4],mc[5]=cd[5],mc[6]=cd[6],mc[7]=cd[7],mc[8]=cd[8],mc[9]=cd[9],mc[10]=cd[10],mc[11]=cd[11],mc[12]=cd[12],mc[13]=cd[13],mc[14]=cd[14],mc[15]=cd[15],mc));Qc=v.dim1D;ca.uniformMatrix4fv(w.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(pc[0]=Qc[0],pc[1]=Qc[1],pc[2]=Qc[2],pc[3]=Qc[3],pc[4]=Qc[4],pc[5]=Qc[5],pc[6]=Qc[6],pc[7]=Qc[7],pc[8]=Qc[8],pc[9]=Qc[9],pc[10]=Qc[10],pc[11]=Qc[11],pc[12]=Qc[12],pc[13]=Qc[13],pc[14]=Qc[14],pc[15]=Qc[15],pc));Rc=v.loA;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(fb[0]=Rc[0],fb[1]=Rc[1],fb[2]=Rc[2],fb[3]=Rc[3],fb[4]=Rc[4],fb[5]=Rc[5],fb[6]=Rc[6],fb[7]=Rc[7],fb[8]=Rc[8],fb[9]=Rc[9],fb[10]=Rc[10],fb[11]=Rc[11],fb[12]=Rc[12],fb[13]=
Rc[13],fb[14]=Rc[14],fb[15]=Rc[15],fb));Tc=v.hiA;ca.uniformMatrix4fv(aa.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?Tc:(Vc[0]=Tc[0],Vc[1]=Tc[1],Vc[2]=Tc[2],Vc[3]=Tc[3],Vc[4]=Tc[4],Vc[5]=Tc[5],Vc[6]=Tc[6],Vc[7]=Tc[7],Vc[8]=Tc[8],Vc[9]=Tc[9],Vc[10]=Tc[10],Vc[11]=Tc[11],Vc[12]=Tc[12],Vc[13]=Tc[13],Vc[14]=Tc[14],Vc[15]=Tc[15],Vc));Yc=v.loB;ca.uniformMatrix4fv(ya.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(Rb[0]=Yc[0],Rb[1]=Yc[1],Rb[2]=Yc[2],Rb[3]=Yc[3],Rb[4]=Yc[4],Rb[5]=
Yc[5],Rb[6]=Yc[6],Rb[7]=Yc[7],Rb[8]=Yc[8],Rb[9]=Yc[9],Rb[10]=Yc[10],Rb[11]=Yc[11],Rb[12]=Yc[12],Rb[13]=Yc[13],Rb[14]=Yc[14],Rb[15]=Yc[15],Rb));md=v.hiB;ca.uniformMatrix4fv(V.location,!1,Array.isArray(md)||md instanceof Float32Array?md:(cb[0]=md[0],cb[1]=md[1],cb[2]=md[2],cb[3]=md[3],cb[4]=md[4],cb[5]=md[5],cb[6]=md[6],cb[7]=md[7],cb[8]=md[8],cb[9]=md[9],cb[10]=md[10],cb[11]=md[11],cb[12]=md[12],cb[13]=md[13],cb[14]=md[14],cb[15]=md[15],cb));dd=v.loC;ca.uniformMatrix4fv(ea.location,!1,Array.isArray(dd)||
dd instanceof Float32Array?dd:(Mb[0]=dd[0],Mb[1]=dd[1],Mb[2]=dd[2],Mb[3]=dd[3],Mb[4]=dd[4],Mb[5]=dd[5],Mb[6]=dd[6],Mb[7]=dd[7],Mb[8]=dd[8],Mb[9]=dd[9],Mb[10]=dd[10],Mb[11]=dd[11],Mb[12]=dd[12],Mb[13]=dd[13],Mb[14]=dd[14],Mb[15]=dd[15],Mb));Zc=v.hiC;ca.uniformMatrix4fv(na.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(ab[0]=Zc[0],ab[1]=Zc[1],ab[2]=Zc[2],ab[3]=Zc[3],ab[4]=Zc[4],ab[5]=Zc[5],ab[6]=Zc[6],ab[7]=Zc[7],ab[8]=Zc[8],ab[9]=Zc[9],ab[10]=Zc[10],ab[11]=Zc[11],ab[12]=Zc[12],ab[13]=
Zc[13],ab[14]=Zc[14],ab[15]=Zc[15],ab));kc=v.loD;ca.uniformMatrix4fv(Da.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(ob[0]=kc[0],ob[1]=kc[1],ob[2]=kc[2],ob[3]=kc[3],ob[4]=kc[4],ob[5]=kc[5],ob[6]=kc[6],ob[7]=kc[7],ob[8]=kc[8],ob[9]=kc[9],ob[10]=kc[10],ob[11]=kc[11],ob[12]=kc[12],ob[13]=kc[13],ob[14]=kc[14],ob[15]=kc[15],ob));cc=v.hiD;ca.uniformMatrix4fv(sa.location,!1,Array.isArray(cc)||cc instanceof Float32Array?cc:(Va[0]=cc[0],Va[1]=cc[1],Va[2]=cc[2],Va[3]=cc[3],Va[4]=cc[4],Va[5]=
cc[5],Va[6]=cc[6],Va[7]=cc[7],Va[8]=cc[8],Va[9]=cc[9],Va[10]=cc[10],Va[11]=cc[11],Va[12]=cc[12],Va[13]=cc[13],Va[14]=cc[14],Va[15]=cc[15],Va));$c=v.resolution;Wc=$c[0];zc=$c[1];k&&ed===Wc&&id===zc||(ed=Wc,id=zc,ca.uniform2f(pa.location,Wc,zc));ud=v.viewBoxPos;xe=ud[0];jd=ud[1];k&&Ce===xe&&De===jd||(Ce=xe,De=jd,ca.uniform2f(za.location,xe,jd));Od=v.viewBoxSize;pe=Od[0];Pd=Od[1];k&&be===pe&&Id===Pd||(be=pe,Id=Pd,ca.uniform2f(Ea.location,pe,Pd));Fd=v.maskHeight;k&&od===Fd||(od=Fd,ca.uniform1f(ja.location,
Fd));Uc=v.drwLayer;k&&vd===Uc||(vd=Uc,ca.uniform1f(I.location,Uc));sd=v.contextColor;kd=sd[0];Bd=sd[1];je=sd[2];te=sd[3];k&&wd===kd&&Dd===Bd&&re===je&&le===te||(wd=kd,Dd=Bd,re=je,le=te,ca.uniform4f(S.location,kd,Bd,je,te));(ke=v.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);ge=ke._texture;ca.uniform1i(qa.location,ge.bind());ue=v.offset;if(ce=v.count)gd?ca.drawElements(1,ce,gd.type,ue<<(gd.type-5121>>1)):ca.drawArrays(1,ue,ce),X.viewportWidth=td,X.viewportHeight=nc,ge.unbind()}W.unbind();
wa.dirty=!0;G.setVAO(null);wa.profile=a},draw:function(c){var d,e,a,k,R,u;d=hb.next;d!==hb.cur&&(d?ca.bindFramebuffer(36160,d.framebuffer):ca.bindFramebuffer(36160,null),hb.cur=d);if(wa.dirty){d=zd[0];u=zd[1];e=zd[2];a=zd[3];if(d!==Vd[0]||u!==Vd[1]||e!==Vd[2]||a!==Vd[3])ca.colorMask(d,u,e,a),Vd[0]=d,Vd[1]=u,Vd[2]=e,Vd[3]=a;d=yd.frontFace;d!==wa.frontFace&&(ca.frontFace(d),wa.frontFace=d);d=yd.polygonOffset_enable;d!==wa.polygonOffset_enable&&(d?ca.enable(32823):ca.disable(32823),wa.polygonOffset_enable=
d);d=Nd[0];u=Nd[1];if(d!==fe[0]||u!==fe[1])ca.polygonOffset(d,u),fe[0]=d,fe[1]=u;d=yd.sample_alpha;d!==wa.sample_alpha&&(d?ca.enable(32926):ca.disable(32926),wa.sample_alpha=d);d=yd.sample_enable;d!==wa.sample_enable&&(d?ca.enable(32928):ca.disable(32928),wa.sample_enable=d);d=ee[0];u=ee[1];if(d!==$d[0]||u!==$d[1])ca.sampleCoverage(d,u),$d[0]=d,$d[1]=u;d=yd.stencil_enable;d!==wa.stencil_enable&&(d?ca.enable(2960):ca.disable(2960),wa.stencil_enable=d);d=yd.stencil_mask;d!==wa.stencil_mask&&(ca.stencilMask(d),
wa.stencil_mask=d);d=Se[0];u=Se[1];e=Se[2];if(d!==Ed[0]||u!==Ed[1]||e!==Ed[2])ca.stencilFunc(d,u,e),Ed[0]=d,Ed[1]=u,Ed[2]=e;d=Jd[0];u=Jd[1];e=Jd[2];a=Jd[3];if(d!==Xd[0]||u!==Xd[1]||e!==Xd[2]||a!==Xd[3])ca.stencilOpSeparate(d,u,e,a),Xd[0]=d,Xd[1]=u,Xd[2]=e,Xd[3]=a;d=Be[0];u=Be[1];e=Be[2];a=Be[3];if(d!==ie[0]||u!==ie[1]||e!==ie[2]||a!==ie[3])ca.stencilOpSeparate(d,u,e,a),ie[0]=d,ie[1]=u,ie[2]=e,ie[3]=a}ad.height=c.viewportHeight;ad.width=c.viewportWidth;ad.x=c.viewportX;ad.y=c.viewportY;e=ad.x|0;a=
ad.y|0;k="width"in ad?ad.width|0:X.framebufferWidth-e;R="height"in ad?ad.height|0:X.framebufferHeight-a;d=X.viewportWidth;X.viewportWidth=k;u=X.viewportHeight;X.viewportHeight=R;ca.viewport(e,a,k,R);nd[0]=e;nd[1]=a;nd[2]=k;nd[3]=R;ca.blendColor(0,0,0,0);ye[0]=0;ye[1]=0;ye[2]=0;ye[3]=0;ca.disable(3042);wa.blend_enable=!1;ca.blendEquationSeparate(32774,32774);xd[0]=32774;xd[1]=32774;ca.blendFuncSeparate(770,771,1,1);Ae[0]=770;Ae[1]=771;Ae[2]=1;Ae[3]=1;ca.enable(2884);wa.cull_enable=!0;ca.cullFace(1029);
wa.cull_face=1029;ca.enable(2929);wa.depth_enable=!0;ca.depthFunc(513);wa.depth_func=513;ca.depthMask(!0);wa.depth_mask=!0;ca.depthRange(0,1);he[0]=0;he[1]=1;ca.disable(3024);wa.dither=!1;ca.lineWidth(2);wa.lineWidth=2;rd.height=c.scissorHeight;rd.width=c.scissorWidth;rd.x=c.scissorX;rd.y=c.scissorY;e=rd.x|0;a=rd.y|0;k="width"in rd?rd.width|0:X.framebufferWidth-e;R="height"in rd?rd.height|0:X.framebufferHeight-a;ca.scissor(e,a,k,R);Oe[0]=e;Oe[1]=a;Oe[2]=k;Oe[3]=R;ca.enable(3089);wa.scissor_enable=
!0;e=wa.profile;wa.profile=!1;ca.useProgram(v.program);G.setVAO(null);a=Aa.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==Y.dtype||4!==k.size||k.buffer!==Y||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,Y.buffer),ca.vertexAttribPointer(a,4,Y.dtype,!1,0,0),k.type=Y.dtype,k.size=4,k.buffer=Y,k.normalized=!1,k.offset=0,k.stride=0;a=Qa.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==f.dtype||4!==k.size||k.buffer!==f||!1!==k.normalized||0!==
k.offset||0!==k.stride)ca.bindBuffer(34962,f.buffer),ca.vertexAttribPointer(a,4,f.dtype,!1,0,0),k.type=f.dtype,k.size=4,k.buffer=f,k.normalized=!1,k.offset=0,k.stride=0;a=la.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==g.dtype||4!==k.size||k.buffer!==g||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,g.buffer),ca.vertexAttribPointer(a,4,g.dtype,!1,0,0),k.type=g.dtype,k.size=4,k.buffer=g,k.normalized=!1,k.offset=0,k.stride=0;a=dc.location;k=ka[a];k.buffer||
ca.enableVertexAttribArray(a);if(k.type!==l.dtype||4!==k.size||k.buffer!==l||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(a,4,l.dtype,!1,0,0),k.type=l.dtype,k.size=4,k.buffer=l,k.normalized=!1,k.offset=0,k.stride=0;a=Ya.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==b.dtype||4!==k.size||k.buffer!==b||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,b.buffer),ca.vertexAttribPointer(a,4,b.dtype,!1,0,0),k.type=
b.dtype,k.size=4,k.buffer=b,k.normalized=!1,k.offset=0,k.stride=0;a=y.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==da.dtype||4!==k.size||k.buffer!==da||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,da.buffer),ca.vertexAttribPointer(a,4,da.dtype,!1,0,0),k.type=da.dtype,k.size=4,k.buffer=da,k.normalized=!1,k.offset=0,k.stride=0;a=n.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==x.dtype||4!==k.size||k.buffer!==x||!1!==k.normalized||0!==
k.offset||0!==k.stride)ca.bindBuffer(34962,x.buffer),ca.vertexAttribPointer(a,4,x.dtype,!1,0,0),k.type=x.dtype,k.size=4,k.buffer=x,k.normalized=!1,k.offset=0,k.stride=0;a=J.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==F.dtype||4!==k.size||k.buffer!==F||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(a,4,F.dtype,!1,0,0),k.type=F.dtype,k.size=4,k.buffer=F,k.normalized=!1,k.offset=0,k.stride=0;a=va.location;k=ka[a];k.buffer||
ca.enableVertexAttribArray(a);if(k.type!==T.dtype||4!==k.size||k.buffer!==T||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,T.buffer),ca.vertexAttribPointer(a,4,T.dtype,!1,0,0),k.type=T.dtype,k.size=4,k.buffer=T,k.normalized=!1,k.offset=0,k.stride=0;a=Fa.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==A.dtype||4!==k.size||k.buffer!==A||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,A.buffer),ca.vertexAttribPointer(a,4,A.dtype,!1,0,0),k.type=
A.dtype,k.size=4,k.buffer=A,k.normalized=!1,k.offset=0,k.stride=0;a=Yb.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==h.dtype||4!==k.size||k.buffer!==h||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,h.buffer),ca.vertexAttribPointer(a,4,h.dtype,!1,0,0),k.type=h.dtype,k.size=4,k.buffer=h,k.normalized=!1,k.offset=0,k.stride=0;a=Gb.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==r.dtype||4!==k.size||k.buffer!==r||!1!==k.normalized||0!==k.offset||
0!==k.stride)ca.bindBuffer(34962,r.buffer),ca.vertexAttribPointer(a,4,r.dtype,!1,0,0),k.type=r.dtype,k.size=4,k.buffer=r,k.normalized=!1,k.offset=0,k.stride=0;a=fa.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==oa.dtype||4!==k.size||k.buffer!==oa||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,oa.buffer),ca.vertexAttribPointer(a,4,oa.dtype,!1,0,0),k.type=oa.dtype,k.size=4,k.buffer=oa,k.normalized=!1,k.offset=0,k.stride=0;a=H.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);
if(k.type!==p.dtype||4!==k.size||k.buffer!==p||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,p.buffer),ca.vertexAttribPointer(a,4,p.dtype,!1,0,0),k.type=p.dtype,k.size=4,k.buffer=p,k.normalized=!1,k.offset=0,k.stride=0;a=ta.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==Q.dtype||4!==k.size||k.buffer!==Q||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,Q.buffer),ca.vertexAttribPointer(a,4,Q.dtype,!1,0,0),k.type=Q.dtype,k.size=4,k.buffer=Q,
k.normalized=!1,k.offset=0,k.stride=0;a=ba.location;k=ka[a];k.buffer||ca.enableVertexAttribArray(a);if(k.type!==q.dtype||4!==k.size||k.buffer!==q||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(a,4,q.dtype,!1,0,0),k.type=q.dtype,k.size=4,k.buffer=q,k.normalized=!1,k.offset=0,k.stride=0;a=c.dim0A;ca.uniformMatrix4fv(M.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Lc[0]=a[0],Lc[1]=a[1],Lc[2]=a[2],Lc[3]=a[3],Lc[4]=a[4],Lc[5]=a[5],Lc[6]=
a[6],Lc[7]=a[7],Lc[8]=a[8],Lc[9]=a[9],Lc[10]=a[10],Lc[11]=a[11],Lc[12]=a[12],Lc[13]=a[13],Lc[14]=a[14],Lc[15]=a[15],Lc));a=c.dim1A;ca.uniformMatrix4fv(P.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(pd[0]=a[0],pd[1]=a[1],pd[2]=a[2],pd[3]=a[3],pd[4]=a[4],pd[5]=a[5],pd[6]=a[6],pd[7]=a[7],pd[8]=a[8],pd[9]=a[9],pd[10]=a[10],pd[11]=a[11],pd[12]=a[12],pd[13]=a[13],pd[14]=a[14],pd[15]=a[15],pd));a=c.dim0B;ca.uniformMatrix4fv(N.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Fc[0]=
a[0],Fc[1]=a[1],Fc[2]=a[2],Fc[3]=a[3],Fc[4]=a[4],Fc[5]=a[5],Fc[6]=a[6],Fc[7]=a[7],Fc[8]=a[8],Fc[9]=a[9],Fc[10]=a[10],Fc[11]=a[11],Fc[12]=a[12],Fc[13]=a[13],Fc[14]=a[14],Fc[15]=a[15],Fc));a=c.dim1B;ca.uniformMatrix4fv(xa.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(fd[0]=a[0],fd[1]=a[1],fd[2]=a[2],fd[3]=a[3],fd[4]=a[4],fd[5]=a[5],fd[6]=a[6],fd[7]=a[7],fd[8]=a[8],fd[9]=a[9],fd[10]=a[10],fd[11]=a[11],fd[12]=a[12],fd[13]=a[13],fd[14]=a[14],fd[15]=a[15],fd));a=c.dim0C;ca.uniformMatrix4fv(m.location,
!1,Array.isArray(a)||a instanceof Float32Array?a:(Pc[0]=a[0],Pc[1]=a[1],Pc[2]=a[2],Pc[3]=a[3],Pc[4]=a[4],Pc[5]=a[5],Pc[6]=a[6],Pc[7]=a[7],Pc[8]=a[8],Pc[9]=a[9],Pc[10]=a[10],Pc[11]=a[11],Pc[12]=a[12],Pc[13]=a[13],Pc[14]=a[14],Pc[15]=a[15],Pc));a=c.dim1C;ca.uniformMatrix4fv(ra.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(ld[0]=a[0],ld[1]=a[1],ld[2]=a[2],ld[3]=a[3],ld[4]=a[4],ld[5]=a[5],ld[6]=a[6],ld[7]=a[7],ld[8]=a[8],ld[9]=a[9],ld[10]=a[10],ld[11]=a[11],ld[12]=a[12],ld[13]=a[13],ld[14]=
a[14],ld[15]=a[15],ld));a=c.dim0D;ca.uniformMatrix4fv(O.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Ab[0]=a[0],Ab[1]=a[1],Ab[2]=a[2],Ab[3]=a[3],Ab[4]=a[4],Ab[5]=a[5],Ab[6]=a[6],Ab[7]=a[7],Ab[8]=a[8],Ab[9]=a[9],Ab[10]=a[10],Ab[11]=a[11],Ab[12]=a[12],Ab[13]=a[13],Ab[14]=a[14],Ab[15]=a[15],Ab));a=c.dim1D;ca.uniformMatrix4fv(w.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Eb[0]=a[0],Eb[1]=a[1],Eb[2]=a[2],Eb[3]=a[3],Eb[4]=a[4],Eb[5]=a[5],Eb[6]=a[6],Eb[7]=a[7],Eb[8]=a[8],Eb[9]=
a[9],Eb[10]=a[10],Eb[11]=a[11],Eb[12]=a[12],Eb[13]=a[13],Eb[14]=a[14],Eb[15]=a[15],Eb));a=c.loA;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(uc[0]=a[0],uc[1]=a[1],uc[2]=a[2],uc[3]=a[3],uc[4]=a[4],uc[5]=a[5],uc[6]=a[6],uc[7]=a[7],uc[8]=a[8],uc[9]=a[9],uc[10]=a[10],uc[11]=a[11],uc[12]=a[12],uc[13]=a[13],uc[14]=a[14],uc[15]=a[15],uc));a=c.hiA;ca.uniformMatrix4fv(aa.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(yb[0]=a[0],yb[1]=a[1],yb[2]=a[2],yb[3]=a[3],
yb[4]=a[4],yb[5]=a[5],yb[6]=a[6],yb[7]=a[7],yb[8]=a[8],yb[9]=a[9],yb[10]=a[10],yb[11]=a[11],yb[12]=a[12],yb[13]=a[13],yb[14]=a[14],yb[15]=a[15],yb));a=c.loB;ca.uniformMatrix4fv(ya.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(xc[0]=a[0],xc[1]=a[1],xc[2]=a[2],xc[3]=a[3],xc[4]=a[4],xc[5]=a[5],xc[6]=a[6],xc[7]=a[7],xc[8]=a[8],xc[9]=a[9],xc[10]=a[10],xc[11]=a[11],xc[12]=a[12],xc[13]=a[13],xc[14]=a[14],xc[15]=a[15],xc));a=c.hiB;ca.uniformMatrix4fv(V.location,!1,Array.isArray(a)||a instanceof
Float32Array?a:(Bb[0]=a[0],Bb[1]=a[1],Bb[2]=a[2],Bb[3]=a[3],Bb[4]=a[4],Bb[5]=a[5],Bb[6]=a[6],Bb[7]=a[7],Bb[8]=a[8],Bb[9]=a[9],Bb[10]=a[10],Bb[11]=a[11],Bb[12]=a[12],Bb[13]=a[13],Bb[14]=a[14],Bb[15]=a[15],Bb));a=c.loC;ca.uniformMatrix4fv(ea.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Jc[0]=a[0],Jc[1]=a[1],Jc[2]=a[2],Jc[3]=a[3],Jc[4]=a[4],Jc[5]=a[5],Jc[6]=a[6],Jc[7]=a[7],Jc[8]=a[8],Jc[9]=a[9],Jc[10]=a[10],Jc[11]=a[11],Jc[12]=a[12],Jc[13]=a[13],Jc[14]=a[14],Jc[15]=a[15],Jc));a=c.hiC;ca.uniformMatrix4fv(na.location,
!1,Array.isArray(a)||a instanceof Float32Array?a:(lc[0]=a[0],lc[1]=a[1],lc[2]=a[2],lc[3]=a[3],lc[4]=a[4],lc[5]=a[5],lc[6]=a[6],lc[7]=a[7],lc[8]=a[8],lc[9]=a[9],lc[10]=a[10],lc[11]=a[11],lc[12]=a[12],lc[13]=a[13],lc[14]=a[14],lc[15]=a[15],lc));a=c.loD;ca.uniformMatrix4fv(Da.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Gc[0]=a[0],Gc[1]=a[1],Gc[2]=a[2],Gc[3]=a[3],Gc[4]=a[4],Gc[5]=a[5],Gc[6]=a[6],Gc[7]=a[7],Gc[8]=a[8],Gc[9]=a[9],Gc[10]=a[10],Gc[11]=a[11],Gc[12]=a[12],Gc[13]=a[13],Gc[14]=
a[14],Gc[15]=a[15],Gc));a=c.hiD;ca.uniformMatrix4fv(sa.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(gd[0]=a[0],gd[1]=a[1],gd[2]=a[2],gd[3]=a[3],gd[4]=a[4],gd[5]=a[5],gd[6]=a[6],gd[7]=a[7],gd[8]=a[8],gd[9]=a[9],gd[10]=a[10],gd[11]=a[11],gd[12]=a[12],gd[13]=a[13],gd[14]=a[14],gd[15]=a[15],gd));a=c.resolution;ca.uniform2f(pa.location,a[0],a[1]);a=c.viewBoxPos;ca.uniform2f(za.location,a[0],a[1]);a=c.viewBoxSize;ca.uniform2f(Ea.location,a[0],a[1]);ca.uniform1f(ja.location,c.maskHeight);ca.uniform1f(I.location,
c.drwLayer);a=c.contextColor;ca.uniform4f(S.location,a[0],a[1],a[2],a[3]);(a=c.maskTexture)&&"framebuffer"===a._reglType&&(a=a.color[0]);a=a._texture;ca.uniform1i(qa.location,a.bind());ca.uniform1i(Ga.location,L.bind());(k=Ha.elements)?ca.bindBuffer(34963,k.buffer.buffer):G.currentVAO&&(k=Ka.getElements(G.currentVAO.elements))&&ca.bindBuffer(34963,k.buffer.buffer);R=c.offset;if(c=c.count)k?ca.drawElements(1,c,k.type,R<<(k.type-5121>>1)):ca.drawArrays(1,R,c),wa.dirty=!0,G.setVAO(null),X.viewportWidth=
d,X.viewportHeight=u,wa.profile=e,a.unbind(),L.unbind()},scope:function(a,m,n){var w,y,H,J,v,la,z,M,ta,Qa,Ga,I,V,dc,N,ea,pa,fa,S,ka,P,va,O,aa,za,Ea,ca,xa,L,ya,sa,ja,W,Ya,ba,Aa,Fa,qa,Da,ra,na,Gb,Ca,Yb,Ka,hb,Ba,fb,fc,G,Eb,Pc,Ab,pc,oc,yb,Bb,$d,Be,mc,Jd,qc,cb,ab,Va,Hc,jf,Se,ld,lc,ob,Fc,ie,fd,Ed,Lc,uc,Rb,xc,xd,pd,Gc,Dc,Jc,Vd,nd,ye,Xd,Mb,Nd,Vc,Oe,bd,gd,ee,zd,Ae,fe,he,ga,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,
Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ad.height=a.viewportHeight;ad.width=a.viewportWidth;ad.x=a.viewportX;ad.y=a.viewportY;
w=ad.x|0;y=ad.y|0;H="width"in ad?ad.width|0:X.framebufferWidth-w;J="height"in ad?ad.height|0:X.framebufferHeight-y;v=X.viewportWidth;X.viewportWidth=H;la=X.viewportHeight;X.viewportHeight=J;z=Ad[0];Ad[0]=w;M=Ad[1];Ad[1]=y;ta=Ad[2];Ad[2]=H;Qa=Ad[3];Ad[3]=J;Ga=Tb[0];Tb[0]=0;I=Tb[1];Tb[1]=0;V=Tb[2];Tb[2]=0;dc=Tb[3];Tb[3]=0;N=yd.blend_enable;yd.blend_enable=!1;ea=Cd[0];Cd[0]=32774;pa=Cd[1];Cd[1]=32774;fa=Wd[0];Wd[0]=770;S=Wd[1];Wd[1]=771;ka=Wd[2];Wd[2]=1;P=Wd[3];Wd[3]=1;va=yd.cull_enable;yd.cull_enable=
!0;O=yd.cull_face;yd.cull_face=1029;aa=yd.depth_enable;yd.depth_enable=!0;za=yd.depth_func;yd.depth_func=513;Ea=yd.depth_mask;yd.depth_mask=!0;ca=oe[0];oe[0]=0;xa=oe[1];oe[1]=1;L=yd.dither;yd.dither=!1;ya=yd.lineWidth;yd.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;sa=rd.x|0;ja=rd.y|0;W="width"in rd?rd.width|0:X.framebufferWidth-sa;Ya="height"in rd?rd.height|0:X.framebufferHeight-ja;ba=$e[0];$e[0]=sa;Aa=$e[1];$e[1]=ja;Fa=$e[2];$e[2]=W;qa=$e[3];$e[3]=
Ya;Da=yd.scissor_enable;yd.scissor_enable=!0;ra=wa.profile;wa.profile=!1;na=a.offset;Gb=Ha.offset;Ha.offset=na;Ca=a.count;Yb=Ha.count;Ha.count=Ca;Ka=Ha.primitive;Ha.primitive=1;hb=a.contextColor;Ba=Ia[24];Ia[24]=hb;fb=a.dim0A;fc=Ia[3];Ia[3]=fb;G=a.dim0B;Eb=Ia[5];Ia[5]=G;Pc=a.dim0C;Ab=Ia[7];Ia[7]=Pc;pc=a.dim0D;oc=Ia[9];Ia[9]=pc;yb=a.dim1A;Bb=Ia[4];Ia[4]=yb;$d=a.dim1B;Be=Ia[6];Ia[6]=$d;mc=a.dim1C;Jd=Ia[8];Ia[8]=mc;qc=a.dim1D;cb=Ia[10];Ia[10]=qc;ab=a.drwLayer;Va=Ia[23];Ia[23]=ab;Hc=a.hiA;jf=Ia[12];Ia[12]=
Hc;Se=a.hiB;ld=Ia[14];Ia[14]=Se;lc=a.hiC;ob=Ia[16];Ia[16]=lc;Fc=a.hiD;ie=Ia[18];Ia[18]=Fc;fd=a.loA;Ed=Ia[11];Ia[11]=fd;Lc=a.loB;uc=Ia[13];Ia[13]=Lc;Rb=a.loC;xc=Ia[15];Ia[15]=Rb;xd=a.loD;pd=Ia[17];Ia[17]=xd;Gc=a.maskHeight;Dc=Ia[22];Ia[22]=Gc;Jc=a.maskTexture;Vd=Ia[25];Ia[25]=Jc;nd=Ia[26];Ia[26]=t;ye=a.resolution;Xd=Ia[19];Ia[19]=ye;Mb=a.viewBoxPos;Nd=Ia[20];Ia[20]=Mb;Vc=a.viewBoxSize;Oe=Ia[21];Ia[21]=Vc;bd=e.buffer;e.buffer=q;gd=e.divisor;e.divisor=0;ee=e.normalized;e.normalized=!1;zd=e.offset;e.offset=
0;Ae=e.size;e.size=0;fe=e.state;e.state=1;he=e.stride;e.stride=0;ga=e.type;e.type=q.dtype;Pd=e.w;e.w=0;Id=e.x;e.x=0;Fd=e.y;e.y=0;od=e.z;e.z=0;Uc=C.buffer;C.buffer=Y;vd=C.divisor;C.divisor=0;sd=C.normalized;C.normalized=!1;kd=C.offset;C.offset=0;wd=C.size;C.size=0;Bd=C.state;C.state=1;Dd=C.stride;C.stride=0;je=C.type;C.type=Y.dtype;re=C.w;C.w=0;te=C.x;C.x=0;le=C.y;C.y=0;ke=C.z;C.z=0;ge=U.buffer;U.buffer=f;ue=U.divisor;U.divisor=0;ce=U.normalized;U.normalized=!1;me=U.offset;U.offset=0;Oc=U.size;U.size=
0;hd=U.state;U.state=1;ve=U.stride;U.stride=0;qe=U.type;U.type=f.dtype;Kd=U.w;U.w=0;Qd=U.x;U.x=0;Rd=U.y;U.y=0;Sd=U.z;U.z=0;ne=k.buffer;k.buffer=g;ze=k.divisor;k.divisor=0;Ee=k.normalized;k.normalized=!1;se=k.offset;k.offset=0;Te=k.size;k.size=0;Ue=k.state;k.state=1;Pe=k.stride;k.stride=0;we=k.type;k.type=g.dtype;He=k.w;k.w=0;Je=k.x;k.x=0;Ke=k.y;k.y=0;Le=k.z;k.z=0;Ie=Z.buffer;Z.buffer=l;Md=Z.divisor;Z.divisor=0;Yd=Z.normalized;Z.normalized=!1;ae=Z.offset;Z.offset=0;de=Z.size;Z.size=0;Me=Z.state;Z.state=
1;Gd=Z.stride;Z.stride=0;Td=Z.type;Z.type=l.dtype;Fe=Z.w;Z.w=0;Ne=Z.x;Z.x=0;cf=Z.y;Z.y=0;bf=Z.z;Z.z=0;Ve=B.buffer;B.buffer=b;Qe=B.divisor;B.divisor=0;af=B.normalized;B.normalized=!1;Ze=B.offset;B.offset=0;We=B.size;B.size=0;Xe=B.state;B.state=1;Ud=B.stride;B.stride=0;Zd=B.type;B.type=b.dtype;Ye=B.w;B.w=0;kf=B.x;B.x=0;of=B.y;B.y=0;ff=B.z;B.z=0;lf=u.buffer;u.buffer=da;mf=u.divisor;u.divisor=0;nf=u.normalized;u.normalized=!1;sf=u.offset;u.offset=0;pf=u.size;u.size=0;tf=u.state;u.state=1;Cf=u.stride;
u.stride=0;Df=u.type;u.type=da.dtype;Re=u.w;u.w=0;Ge=u.x;u.x=0;qf=u.y;u.y=0;rf=u.z;u.z=0;Ef=ua.buffer;ua.buffer=x;Hf=ua.divisor;ua.divisor=0;Bf=ua.normalized;ua.normalized=!1;Ff=ua.offset;ua.offset=0;Gf=ua.size;ua.size=0;xf=ua.state;ua.state=1;yf=ua.stride;ua.stride=0;wf=ua.type;ua.type=x.dtype;zf=ua.w;ua.w=0;Af=ua.x;ua.x=0;Jf=ua.y;ua.y=0;Kf=ua.z;ua.z=0;Lf=D.buffer;D.buffer=F;Mf=D.divisor;D.divisor=0;uf=D.normalized;D.normalized=!1;Rf=D.offset;D.offset=0;If=D.size;D.size=0;vf=D.state;D.state=1;dg=
D.stride;D.stride=0;Sf=D.type;D.type=F.dtype;Tf=D.w;D.w=0;qg=D.x;D.x=0;gf=D.y;D.y=0;df=D.z;D.z=0;Nf=E.buffer;E.buffer=T;Of=E.divisor;E.divisor=0;eg=E.normalized;E.normalized=!1;fg=E.offset;E.offset=0;gg=E.size;E.size=0;hg=E.state;E.state=1;ig=E.stride;E.stride=0;Wf=E.type;E.type=T.dtype;Uf=E.w;E.w=0;Xf=E.x;E.x=0;Yf=E.y;E.y=0;Zf=E.z;E.z=0;jg=d.buffer;d.buffer=A;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=
0;xg=d.type;d.type=A.dtype;yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;hf=R.buffer;R.buffer=h;ef=R.divisor;R.divisor=0;Pf=R.normalized;R.normalized=!1;Qf=R.offset;R.offset=0;kg=R.size;R.size=0;lg=R.state;R.state=1;mg=R.stride;R.stride=0;ng=R.type;R.type=h.dtype;og=R.w;R.w=0;$f=R.x;R.x=0;Vf=R.y;R.y=0;ag=R.z;R.z=0;bg=c.buffer;c.buffer=r;cg=c.divisor;c.divisor=0;pg=c.normalized;c.normalized=!1;Cg=c.offset;c.offset=0;Dg=c.size;c.size=0;Eg=c.state;c.state=1;Fg=c.stride;c.stride=0;Gg=c.type;c.type=
r.dtype;Hg=c.w;c.w=0;Ig=c.x;c.x=0;Jg=c.y;c.y=0;Kg=c.z;c.z=0;Lg=ia.buffer;ia.buffer=oa;Mg=ia.divisor;ia.divisor=0;Ng=ia.normalized;ia.normalized=!1;Og=ia.offset;ia.offset=0;Pg=ia.size;ia.size=0;Qg=ia.state;ia.state=1;Rg=ia.stride;ia.stride=0;Sg=ia.type;ia.type=oa.dtype;Tg=ia.w;ia.w=0;Ug=ia.x;ia.x=0;Vg=ia.y;ia.y=0;Wg=ia.z;ia.z=0;Xg=K.buffer;K.buffer=p;Yg=K.divisor;K.divisor=0;Zg=K.normalized;K.normalized=!1;$g=K.offset;K.offset=0;ah=K.size;K.size=0;bh=K.state;K.state=1;ch=K.stride;K.stride=0;dh=K.type;
K.type=p.dtype;eh=K.w;K.w=0;fh=K.x;K.x=0;gh=K.y;K.y=0;hh=K.z;K.z=0;ih=ha.buffer;ha.buffer=Q;jh=ha.divisor;ha.divisor=0;kh=ha.normalized;ha.normalized=!1;lh=ha.offset;ha.offset=0;mh=ha.size;ha.size=0;nh=ha.state;ha.state=1;oh=ha.stride;ha.stride=0;ph=ha.type;ha.type=Q.dtype;qh=ha.w;ha.w=0;rh=ha.x;ha.x=0;sh=ha.y;ha.y=0;th=ha.z;ha.z=0;uh=ac.vert;ac.vert=2;vh=ac.frag;ac.frag=1;wa.dirty=!0;m(X,a,n);X.viewportWidth=v;X.viewportHeight=la;Ad[0]=z;Ad[1]=M;Ad[2]=ta;Ad[3]=Qa;Tb[0]=Ga;Tb[1]=I;Tb[2]=V;Tb[3]=dc;
yd.blend_enable=N;Cd[0]=ea;Cd[1]=pa;Wd[0]=fa;Wd[1]=S;Wd[2]=ka;Wd[3]=P;yd.cull_enable=va;yd.cull_face=O;yd.depth_enable=aa;yd.depth_func=za;yd.depth_mask=Ea;oe[0]=ca;oe[1]=xa;yd.dither=L;yd.lineWidth=ya;$e[0]=ba;$e[1]=Aa;$e[2]=Fa;$e[3]=qa;yd.scissor_enable=Da;wa.profile=ra;Ha.offset=Gb;Ha.count=Yb;Ha.primitive=Ka;Ia[24]=Ba;Ia[3]=fc;Ia[5]=Eb;Ia[7]=Ab;Ia[9]=oc;Ia[4]=Bb;Ia[6]=Be;Ia[8]=Jd;Ia[10]=cb;Ia[23]=Va;Ia[12]=jf;Ia[14]=ld;Ia[16]=ob;Ia[18]=ie;Ia[11]=Ed;Ia[13]=uc;Ia[15]=xc;Ia[17]=pd;Ia[22]=Dc;Ia[25]=
Vd;Ia[26]=nd;Ia[19]=Xd;Ia[20]=Nd;Ia[21]=Oe;e.buffer=bd;e.divisor=gd;e.normalized=ee;e.offset=zd;e.size=Ae;e.state=fe;e.stride=he;e.type=ga;e.w=Pd;e.x=Id;e.y=Fd;e.z=od;C.buffer=Uc;C.divisor=vd;C.normalized=sd;C.offset=kd;C.size=wd;C.state=Bd;C.stride=Dd;C.type=je;C.w=re;C.x=te;C.y=le;C.z=ke;U.buffer=ge;U.divisor=ue;U.normalized=ce;U.offset=me;U.size=Oc;U.state=hd;U.stride=ve;U.type=qe;U.w=Kd;U.x=Qd;U.y=Rd;U.z=Sd;k.buffer=ne;k.divisor=ze;k.normalized=Ee;k.offset=se;k.size=Te;k.state=Ue;k.stride=Pe;
k.type=we;k.w=He;k.x=Je;k.y=Ke;k.z=Le;Z.buffer=Ie;Z.divisor=Md;Z.normalized=Yd;Z.offset=ae;Z.size=de;Z.state=Me;Z.stride=Gd;Z.type=Td;Z.w=Fe;Z.x=Ne;Z.y=cf;Z.z=bf;B.buffer=Ve;B.divisor=Qe;B.normalized=af;B.offset=Ze;B.size=We;B.state=Xe;B.stride=Ud;B.type=Zd;B.w=Ye;B.x=kf;B.y=of;B.z=ff;u.buffer=lf;u.divisor=mf;u.normalized=nf;u.offset=sf;u.size=pf;u.state=tf;u.stride=Cf;u.type=Df;u.w=Re;u.x=Ge;u.y=qf;u.z=rf;ua.buffer=Ef;ua.divisor=Hf;ua.normalized=Bf;ua.offset=Ff;ua.size=Gf;ua.state=xf;ua.stride=yf;
ua.type=wf;ua.w=zf;ua.x=Af;ua.y=Jf;ua.z=Kf;D.buffer=Lf;D.divisor=Mf;D.normalized=uf;D.offset=Rf;D.size=If;D.state=vf;D.stride=dg;D.type=Sf;D.w=Tf;D.x=qg;D.y=gf;D.z=df;E.buffer=Nf;E.divisor=Of;E.normalized=eg;E.offset=fg;E.size=gg;E.state=hg;E.stride=ig;E.type=Wf;E.w=Uf;E.x=Xf;E.y=Yf;E.z=Zf;d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;R.buffer=hf;R.divisor=ef;R.normalized=Pf;R.offset=Qf;R.size=kg;R.state=lg;R.stride=mg;
R.type=ng;R.w=og;R.x=$f;R.y=Vf;R.z=ag;c.buffer=bg;c.divisor=cg;c.normalized=pg;c.offset=Cg;c.size=Dg;c.state=Eg;c.stride=Fg;c.type=Gg;c.w=Hg;c.x=Ig;c.y=Jg;c.z=Kg;ia.buffer=Lg;ia.divisor=Mg;ia.normalized=Ng;ia.offset=Og;ia.size=Pg;ia.state=Qg;ia.stride=Rg;ia.type=Sg;ia.w=Tg;ia.x=Ug;ia.y=Vg;ia.z=Wg;K.buffer=Xg;K.divisor=Yg;K.normalized=Zg;K.offset=$g;K.size=ah;K.state=bh;K.stride=ch;K.type=dh;K.w=eh;K.x=fh;K.y=gh;K.z=hh;ha.buffer=ih;ha.divisor=jh;ha.normalized=kh;ha.offset=lh;ha.size=mh;ha.state=nh;
ha.stride=oh;ha.type=ph;ha.w=qh;ha.x=rh;ha.y=sh;ha.z=th;ac.vert=uh;ac.frag=vh;wa.dirty=!0}}},$1:function(a,z){var v,Y,f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q,L,t,e,C,U,k,Z,B,u,ua,D,E,d;v=a.attributes;Y=a.current;f=a.framebuffer;g=a.gl;l=a.next;b=a.vao;da=l.blend_color;x=Y.blend_color;F=l.blend_equation;T=Y.blend_equation;A=l.blend_func;h=Y.blend_func;r=l.colorMask;oa=Y.colorMask;p=l.depth_range;Q=Y.depth_range;q=l.polygonOffset_offset;L=Y.polygonOffset_offset;t=l.sample_coverage;e=Y.sample_coverage;C=l.scissor_box;
U=Y.scissor_box;k=l.stencil_func;Z=Y.stencil_func;B=l.stencil_opBack;u=Y.stencil_opBack;ua=l.stencil_opFront;D=Y.stencil_opFront;E=l.viewport;d=Y.viewport;return{poll:function(){var a,c,b,v,z,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa;Y.dirty=!1;c=l.blend_enable;b=l.cull_enable;v=l.depth_enable;z=l.dither;Ba=l.polygonOffset_enable;W=l.sample_alpha;ba=l.sample_enable;S=l.scissor_enable;M=l.stencil_enable;N=l.cull_face;m=Y.cull_face;O=l.depth_func;P=Y.depth_func;xa=l.depth_mask;ra=Y.depth_mask;w=l.frontFace;
I=Y.frontFace;aa=l.lineWidth;V=Y.lineWidth;na=l.stencil_mask;sa=Y.stencil_mask;a=f.next;a!==f.cur&&(a?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null),f.cur=a);c!==Y.blend_enable&&(c?g.enable(3042):g.disable(3042),Y.blend_enable=c);b!==Y.cull_enable&&(b?g.enable(2884):g.disable(2884),Y.cull_enable=b);v!==Y.depth_enable&&(v?g.enable(2929):g.disable(2929),Y.depth_enable=v);z!==Y.dither&&(z?g.enable(3024):g.disable(3024),Y.dither=z);Ba!==Y.polygonOffset_enable&&(Ba?g.enable(32823):
g.disable(32823),Y.polygonOffset_enable=Ba);W!==Y.sample_alpha&&(W?g.enable(32926):g.disable(32926),Y.sample_alpha=W);ba!==Y.sample_enable&&(ba?g.enable(32928):g.disable(32928),Y.sample_enable=ba);S!==Y.scissor_enable&&(S?g.enable(3089):g.disable(3089),Y.scissor_enable=S);M!==Y.stencil_enable&&(M?g.enable(2960):g.disable(2960),Y.stencil_enable=M);if(da[0]!==x[0]||da[1]!==x[1]||da[2]!==x[2]||da[3]!==x[3])g.blendColor(da[0],da[1],da[2],da[3]),x[0]=da[0],x[1]=da[1],x[2]=da[2],x[3]=da[3];if(F[0]!==T[0]||
F[1]!==T[1])g.blendEquationSeparate(F[0],F[1]),T[0]=F[0],T[1]=F[1];if(A[0]!==h[0]||A[1]!==h[1]||A[2]!==h[2]||A[3]!==h[3])g.blendFuncSeparate(A[0],A[1],A[2],A[3]),h[0]=A[0],h[1]=A[1],h[2]=A[2],h[3]=A[3];if(r[0]!==oa[0]||r[1]!==oa[1]||r[2]!==oa[2]||r[3]!==oa[3])g.colorMask(r[0],r[1],r[2],r[3]),oa[0]=r[0],oa[1]=r[1],oa[2]=r[2],oa[3]=r[3];N!==m&&(g.cullFace(N),Y.cull_face=N);O!==P&&(g.depthFunc(O),Y.depth_func=O);xa!==ra&&(g.depthMask(xa),Y.depth_mask=xa);if(p[0]!==Q[0]||p[1]!==Q[1])g.depthRange(p[0],
p[1]),Q[0]=p[0],Q[1]=p[1];w!==I&&(g.frontFace(w),Y.frontFace=w);aa!==V&&(g.lineWidth(aa),Y.lineWidth=aa);if(q[0]!==L[0]||q[1]!==L[1])g.polygonOffset(q[0],q[1]),L[0]=q[0],L[1]=q[1];if(t[0]!==e[0]||t[1]!==e[1])g.sampleCoverage(t[0],t[1]),e[0]=t[0],e[1]=t[1];if(C[0]!==U[0]||C[1]!==U[1]||C[2]!==U[2]||C[3]!==U[3])g.scissor(C[0],C[1],C[2],C[3]),U[0]=C[0],U[1]=C[1],U[2]=C[2],U[3]=C[3];if(k[0]!==Z[0]||k[1]!==Z[1]||k[2]!==Z[2])g.stencilFunc(k[0],k[1],k[2]),Z[0]=k[0],Z[1]=k[1],Z[2]=k[2];na!==sa&&(g.stencilMask(na),
Y.stencil_mask=na);if(B[0]!==u[0]||B[1]!==u[1]||B[2]!==u[2]||B[3]!==u[3])g.stencilOpSeparate(B[0],B[1],B[2],B[3]),u[0]=B[0],u[1]=B[1],u[2]=B[2],u[3]=B[3];if(ua[0]!==D[0]||ua[1]!==D[1]||ua[2]!==D[2]||ua[3]!==D[3])g.stencilOpSeparate(ua[0],ua[1],ua[2],ua[3]),D[0]=ua[0],D[1]=ua[1],D[2]=ua[2],D[3]=ua[3];if(E[0]!==d[0]||E[1]!==d[1]||E[2]!==d[2]||E[3]!==d[3])g.viewport(E[0],E[1],E[2],E[3]),d[0]=E[0],d[1]=E[1],d[2]=E[2],d[3]=E[3]},refresh:function(){var a,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra;Y.dirty=!1;c=
l.blend_enable;ia=l.cull_enable;K=l.depth_enable;ha=l.dither;Ba=l.polygonOffset_enable;W=l.sample_alpha;ba=l.sample_enable;S=l.scissor_enable;M=l.stencil_enable;N=l.cull_face;m=l.depth_func;O=l.depth_mask;P=l.frontFace;xa=l.lineWidth;ra=l.stencil_mask;(a=f.next)?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null);f.cur=a;a=v[0];a.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(0),
g.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(0,a.divisor);a=v[1];a.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(1,a.divisor);a=v[2];a.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,
a.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(2,a.divisor);a=v[3];a.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(3,a.divisor);a=v[4];a.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(4,
a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(4,a.divisor);a=v[5];a.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(5,a.divisor);a=v[6];a.buffer?(g.enableVertexAttribArray(6),g.bindBuffer(34962,
a.buffer.buffer),g.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(6,a.divisor);a=v[7];a.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(7,a.divisor);a=v[8];a.buffer?
(g.enableVertexAttribArray(8),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(8,a.divisor);a=v[9];a.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(9,
a.divisor);a=v[10];a.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(10,a.divisor);a=v[11];a.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,a.x,
a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(11,a.divisor);a=v[12];a.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(12,a.divisor);a=v[13];a.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):
(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(13,a.divisor);a=v[14];a.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(14,a.divisor);a=v[15];a.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(15,
a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);z.vertexAttribDivisorANGLE(15,a.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);c?g.enable(3042):g.disable(3042);Y.blend_enable=c;ia?g.enable(2884):g.disable(2884);Y.cull_enable=ia;K?g.enable(2929):g.disable(2929);Y.depth_enable=K;ha?g.enable(3024):g.disable(3024);Y.dither=ha;Ba?g.enable(32823):g.disable(32823);Y.polygonOffset_enable=Ba;W?g.enable(32926):g.disable(32926);
Y.sample_alpha=W;ba?g.enable(32928):g.disable(32928);Y.sample_enable=ba;S?g.enable(3089):g.disable(3089);Y.scissor_enable=S;M?g.enable(2960):g.disable(2960);Y.stencil_enable=M;g.blendColor(da[0],da[1],da[2],da[3]);x[0]=da[0];x[1]=da[1];x[2]=da[2];x[3]=da[3];g.blendEquationSeparate(F[0],F[1]);T[0]=F[0];T[1]=F[1];g.blendFuncSeparate(A[0],A[1],A[2],A[3]);h[0]=A[0];h[1]=A[1];h[2]=A[2];h[3]=A[3];g.colorMask(r[0],r[1],r[2],r[3]);oa[0]=r[0];oa[1]=r[1];oa[2]=r[2];oa[3]=r[3];g.cullFace(N);Y.cull_face=N;g.depthFunc(m);
Y.depth_func=m;g.depthMask(O);Y.depth_mask=O;g.depthRange(p[0],p[1]);Q[0]=p[0];Q[1]=p[1];g.frontFace(P);Y.frontFace=P;g.lineWidth(xa);Y.lineWidth=xa;g.polygonOffset(q[0],q[1]);L[0]=q[0];L[1]=q[1];g.sampleCoverage(t[0],t[1]);e[0]=t[0];e[1]=t[1];g.scissor(C[0],C[1],C[2],C[3]);U[0]=C[0];U[1]=C[1];U[2]=C[2];U[3]=C[3];g.stencilFunc(k[0],k[1],k[2]);Z[0]=k[0];Z[1]=k[1];Z[2]=k[2];g.stencilMask(ra);Y.stencil_mask=ra;g.stencilOpSeparate(B[0],B[1],B[2],B[3]);u[0]=B[0];u[1]=B[1];u[2]=B[2];u[3]=B[3];g.stencilOpSeparate(ua[0],
ua[1],ua[2],ua[3]);D[0]=ua[0];D[1]=ua[1];D[2]=ua[2];D[3]=ua[3];g.viewport(E[0],E[1],E[2],E[3]);d[0]=E[0];d[1]=E[1];d[2]=E[2];d[3]=E[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,z,v,Y,f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q,L,t,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra){var w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea,ka,X,wa,Ha,
Ka,hb,ca,yd,ac,Ia,G,Tb;w=a.attributes;I=a.buffer;aa=a.context;V=a.current;na=a.draw;sa=a.elements;Ca=a.extensions;ya=a.framebuffer;ea=a.gl;Da=a.isBufferArgs;ja=a.next;qa=a.shader;Aa=a.uniforms;Qa=a.vao;la=ja.blend_color;dc=V.blend_color;Ya=ja.blend_equation;y=V.blend_equation;n=ja.blend_func;J=V.blend_func;va=ja.colorMask;Fa=V.colorMask;Yb=ja.depth_range;Gb=V.depth_range;fa=ja.polygonOffset_offset;H=V.polygonOffset_offset;ta=ja.sample_coverage;Ga=V.sample_coverage;pa=ja.scissor_box;za=V.scissor_box;
Ea=ja.stencil_func;ka=V.stencil_func;X=ja.stencil_opBack;wa=V.stencil_opBack;Ha=ja.stencil_opFront;Ka=V.stencil_opFront;hb=ja.viewport;ca=V.viewport;yd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ac={};ac.buffer=v;ac.divisor=1;Ia={};Ia.buffer=Y;Ia.divisor=1;G={};G.buffer=f;G.divisor=1;Tb={};Tb.buffer=g;Tb.divisor=1;return{batch:function(a,b){var e,g,k,n,l,v;e=ya.next;e!==ya.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,
null),ya.cur=e);if(V.dirty){var la,f,q,B,p,C,Y,pa,r,x,L,da,F,Q,U,Ya,Z,Aa,oa,t,qa,ma,hb,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd;la=ja.dither;la!==V.dither&&(la?ea.enable(3024):ea.disable(3024),V.dither=la);f=ja.depth_func;f!==V.depth_func&&(ea.depthFunc(f),V.depth_func=f);q=Yb[0];B=Yb[1];if(q!==Gb[0]||B!==Gb[1])ea.depthRange(q,B),Gb[0]=q,Gb[1]=B;p=ja.depth_mask;p!==V.depth_mask&&(ea.depthMask(p),V.depth_mask=p);C=va[0];Y=va[1];pa=va[2];r=va[3];if(C!==Fa[0]||Y!==Fa[1]||pa!==Fa[2]||r!==Fa[3])ea.colorMask(C,Y,
pa,r),Fa[0]=C,Fa[1]=Y,Fa[2]=pa,Fa[3]=r;x=ja.cull_enable;x!==V.cull_enable&&(x?ea.enable(2884):ea.disable(2884),V.cull_enable=x);L=ja.cull_face;L!==V.cull_face&&(ea.cullFace(L),V.cull_face=L);da=ja.frontFace;da!==V.frontFace&&(ea.frontFace(da),V.frontFace=da);F=ja.lineWidth;F!==V.lineWidth&&(ea.lineWidth(F),V.lineWidth=F);Q=ja.polygonOffset_enable;Q!==V.polygonOffset_enable&&(Q?ea.enable(32823):ea.disable(32823),V.polygonOffset_enable=Q);U=fa[0];Ya=fa[1];if(U!==H[0]||Ya!==H[1])ea.polygonOffset(U,Ya),
H[0]=U,H[1]=Ya;Z=ja.sample_alpha;Z!==V.sample_alpha&&(Z?ea.enable(32926):ea.disable(32926),V.sample_alpha=Z);Aa=ja.sample_enable;Aa!==V.sample_enable&&(Aa?ea.enable(32928):ea.disable(32928),V.sample_enable=Aa);oa=ta[0];t=ta[1];if(oa!==Ga[0]||t!==Ga[1])ea.sampleCoverage(oa,t),Ga[0]=oa,Ga[1]=t;qa=ja.stencil_enable;qa!==V.stencil_enable&&(qa?ea.enable(2960):ea.disable(2960),V.stencil_enable=qa);ma=ja.stencil_mask;ma!==V.stencil_mask&&(ea.stencilMask(ma),V.stencil_mask=ma);hb=Ea[0];Ab=Ea[1];Eb=Ea[2];
if(hb!==ka[0]||Ab!==ka[1]||Eb!==ka[2])ea.stencilFunc(hb,Ab,Eb),ka[0]=hb,ka[1]=Ab,ka[2]=Eb;uc=Ha[0];yb=Ha[1];xc=Ha[2];Bb=Ha[3];if(uc!==Ka[0]||yb!==Ka[1]||xc!==Ka[2]||Bb!==Ka[3])ea.stencilOpSeparate(uc,yb,xc,Bb),Ka[0]=uc,Ka[1]=yb,Ka[2]=xc,Ka[3]=Bb;Jc=X[0];lc=X[1];Gc=X[2];gd=X[3];if(Jc!==wa[0]||lc!==wa[1]||Gc!==wa[2]||gd!==wa[3])ea.stencilOpSeparate(Jc,lc,Gc,gd),wa[0]=Jc,wa[1]=lc,wa[2]=Gc,wa[3]=gd}ea.blendColor(0,0,0,0);dc[0]=0;dc[1]=0;dc[2]=0;dc[3]=0;ea.enable(3042);V.blend_enable=!0;ea.blendEquationSeparate(32774,
32774);y[0]=32774;y[1]=32774;ea.blendFuncSeparate(770,771,773,1);J[0]=770;J[1]=771;J[2]=773;J[3]=1;ea.disable(2929);V.depth_enable=!1;ea.enable(3089);V.scissor_enable=!0;if(g=V.profile)k=performance.now(),z.count+=b;ea.useProgram(u.program);n=Ca.angle_instanced_arrays;var bd,Dc,fc,Hc,oc,qc,mc,pc;Qa.setVAO(null);bd=ha.location;Dc=w[bd];Dc.buffer||ea.enableVertexAttribArray(bd);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==T||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)ea.bindBuffer(34962,T.buffer),
ea.vertexAttribPointer(bd,2,5126,!1,24,0),Dc.type=5126,Dc.size=2,Dc.buffer=T,Dc.normalized=!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(n.vertexAttribDivisorANGLE(bd,0),Dc.divisor=0);fc=W.location;Hc=w[fc];Hc.buffer||ea.enableVertexAttribArray(fc);if(5126!==Hc.type||2!==Hc.size||Hc.buffer!==A||!1!==Hc.normalized||8!==Hc.offset||24!==Hc.stride)ea.bindBuffer(34962,A.buffer),ea.vertexAttribPointer(fc,2,5126,!1,24,8),Hc.type=5126,Hc.size=2,Hc.buffer=A,Hc.normalized=!1,Hc.offset=8,Hc.stride=24;0!==Hc.divisor&&
(n.vertexAttribDivisorANGLE(fc,0),Hc.divisor=0);oc=c.location;qc=w[oc];qc.buffer||ea.enableVertexAttribArray(oc);if(5126!==qc.type||2!==qc.size||qc.buffer!==h||!1!==qc.normalized||16!==qc.offset||24!==qc.stride)ea.bindBuffer(34962,h.buffer),ea.vertexAttribPointer(oc,2,5126,!1,24,16),qc.type=5126,qc.size=2,qc.buffer=h,qc.normalized=!1,qc.offset=16,qc.stride=24;0!==qc.divisor&&(n.vertexAttribDivisorANGLE(oc,0),qc.divisor=0);(mc=na.elements)?ea.bindBuffer(34963,mc.buffer.buffer):Qa.currentVAO&&(mc=sa.getElements(Qa.currentVAO.elements))&&
ea.bindBuffer(34963,mc.buffer.buffer);pc=na.offset;for(l=0;l<b;++l){v=a[l];var fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,ga,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc;fb=v.viewport;Vc=fb.x|0;Rb=fb.y|0;cb="width"in fb?fb.width|0:aa.framebufferWidth-
Vc;Mb="height"in fb?fb.height|0:aa.framebufferHeight-Rb;ab=aa.viewportWidth;aa.viewportWidth=cb;ob=aa.viewportHeight;aa.viewportHeight=Mb;ea.viewport(Vc,Rb,cb,Mb);ca[0]=Vc;ca[1]=Rb;ca[2]=cb;ca[3]=Mb;Va=v.viewport;Ic=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:aa.framebufferWidth-Ic;rc="height"in Va?Va.height|0:aa.framebufferHeight-Hb;ea.scissor(Ic,Hb,Ib,rc);za[0]=Ic;za[1]=Hb;za[2]=Ib;za[3]=rc;Nb=ua.call(this,aa,v,l);G.offset=Nb;kb=!1;Fb=null;Cb=0;xb=!1;Zb=ib=0;Ob=1;rb=0;Ta=5126;jb=bc=pb=Pb=0;Da(G)?
(kb=!0,Fb=I.createStream(34962,G),Ta=Fb.dtype):(Fb=I.getBuffer(G))?Ta=Fb.dtype:"constant"in G?(Ob=2,"number"===typeof G.constant?(pb=G.constant,bc=jb=Pb=0):(pb=0<G.constant.length?G.constant[0]:0,bc=1<G.constant.length?G.constant[1]:0,jb=2<G.constant.length?G.constant[2]:0,Pb=3<G.constant.length?G.constant[3]:0)):(Fb=Da(G.buffer)?I.createStream(34962,G.buffer):I.getBuffer(G.buffer),Ta="type"in G?yd[G.type]:Fb.dtype,xb=!!G.normalized,Zb=G.size|0,ib=G.offset|0,rb=G.stride|0,Cb=G.divisor|0);qb=M.location;
Ja=w[qb];if(1===Ob){Ja.buffer||ea.enableVertexAttribArray(qb);sb=Zb||2;if(Ja.type!==Ta||Ja.size!==sb||Ja.buffer!==Fb||Ja.normalized!==xb||Ja.offset!==ib||Ja.stride!==rb)ea.bindBuffer(34962,Fb.buffer),ea.vertexAttribPointer(qb,sb,Ta,xb,rb,ib),Ja.type=Ta,Ja.size=sb,Ja.buffer=Fb,Ja.normalized=xb,Ja.offset=ib,Ja.stride=rb;Ja.divisor!==Cb&&(n.vertexAttribDivisorANGLE(qb,Cb),Ja.divisor=Cb)}else if(Ja.buffer&&(ea.disableVertexAttribArray(qb),Ja.buffer=null),Ja.x!==pb||Ja.y!==bc||Ja.z!==jb||Ja.w!==Pb)ea.vertexAttrib4f(qb,
pb,bc,jb,Pb),Ja.x=pb,Ja.y=bc,Ja.z=jb,Ja.w=Pb;La=D.call(this,aa,v,l);Tb.offset=La;eb=!1;gb=null;Na=0;lb=!1;ub=Wa=0;tb=1;Pa=0;Cc=5126;Ma=Db=Jb=Sa=0;Da(Tb)?(eb=!0,gb=I.createStream(34962,Tb),Cc=gb.dtype):(gb=I.getBuffer(Tb))?Cc=gb.dtype:"constant"in Tb?(tb=2,"number"===typeof Tb.constant?(Jb=Tb.constant,Db=Ma=Sa=0):(Jb=0<Tb.constant.length?Tb.constant[0]:0,Db=1<Tb.constant.length?Tb.constant[1]:0,Ma=2<Tb.constant.length?Tb.constant[2]:0,Sa=3<Tb.constant.length?Tb.constant[3]:0)):(gb=Da(Tb.buffer)?I.createStream(34962,
Tb.buffer):I.getBuffer(Tb.buffer),Cc="type"in Tb?yd[Tb.type]:gb.dtype,lb=!!Tb.normalized,ub=Tb.size|0,Wa=Tb.offset|0,Pa=Tb.stride|0,Na=Tb.divisor|0);ga=N.location;Za=w[ga];if(1===tb){Za.buffer||ea.enableVertexAttribArray(ga);Kb=ub||2;if(Za.type!==Cc||Za.size!==Kb||Za.buffer!==gb||Za.normalized!==lb||Za.offset!==Wa||Za.stride!==Pa)ea.bindBuffer(34962,gb.buffer),ea.vertexAttribPointer(ga,Kb,Cc,lb,Pa,Wa),Za.type=Cc,Za.size=Kb,Za.buffer=gb,Za.normalized=lb,Za.offset=Wa,Za.stride=Pa;Za.divisor!==Na&&(n.vertexAttribDivisorANGLE(ga,
Na),Za.divisor=Na)}else if(Za.buffer&&(ea.disableVertexAttribArray(ga),Za.buffer=null),Za.x!==Jb||Za.y!==Db||Za.z!==Ma||Za.w!==Sa)ea.vertexAttrib4f(ga,Jb,Db,Ma,Sa),Za.x=Jb,Za.y=Db,Za.z=Ma,Za.w=Sa;Lb=E.call(this,aa,v,l);Ia.offset=Lb;mb=!1;Oa=null;$b=0;Ra=!1;wb=vb=0;Ua=1;nb=0;gc=5126;jc=bb=vc=Ac=0;Da(Ia)?(mb=!0,Oa=I.createStream(34962,Ia),gc=Oa.dtype):(Oa=I.getBuffer(Ia))?gc=Oa.dtype:"constant"in Ia?(Ua=2,"number"===typeof Ia.constant?(vc=Ia.constant,bb=jc=Ac=0):(vc=0<Ia.constant.length?Ia.constant[0]:
0,bb=1<Ia.constant.length?Ia.constant[1]:0,jc=2<Ia.constant.length?Ia.constant[2]:0,Ac=3<Ia.constant.length?Ia.constant[3]:0)):(Oa=Da(Ia.buffer)?I.createStream(34962,Ia.buffer):I.getBuffer(Ia.buffer),gc="type"in Ia?yd[Ia.type]:Oa.dtype,Ra=!!Ia.normalized,wb=Ia.size|0,vb=Ia.offset|0,nb=Ia.stride|0,$b=Ia.divisor|0);Sc=Ba.location;Xa=w[Sc];if(1===Ua){Xa.buffer||ea.enableVertexAttribArray(Sc);Mc=wb||4;if(Xa.type!==gc||Xa.size!==Mc||Xa.buffer!==Oa||Xa.normalized!==Ra||Xa.offset!==vb||Xa.stride!==nb)ea.bindBuffer(34962,
Oa.buffer),ea.vertexAttribPointer(Sc,Mc,gc,Ra,nb,vb),Xa.type=gc,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Ra,Xa.offset=vb,Xa.stride=nb;Xa.divisor!==$b&&(n.vertexAttribDivisorANGLE(Sc,$b),Xa.divisor=$b)}else if(Xa.buffer&&(ea.disableVertexAttribArray(Sc),Xa.buffer=null),Xa.x!==vc||Xa.y!==bb||Xa.z!==jc||Xa.w!==Ac)ea.vertexAttrib4f(Sc,vc,bb,jc,Ac),Xa.x=vc,Xa.y=bb,Xa.z=jc,Xa.w=Ac;zb=d.call(this,aa,v,l);ac.offset=zb;$a=!1;Vb=null;tc=0;Wb=!1;Kc=Qb=0;Sb=1;qd=0;Ec=5126;td=Xc=Nc=Hd=0;Da(ac)?($a=!0,Vb=I.createStream(34962,
ac),Ec=Vb.dtype):(Vb=I.getBuffer(ac))?Ec=Vb.dtype:"constant"in ac?(Sb=2,"number"===typeof ac.constant?(Nc=ac.constant,Xc=td=Hd=0):(Nc=0<ac.constant.length?ac.constant[0]:0,Xc=1<ac.constant.length?ac.constant[1]:0,td=2<ac.constant.length?ac.constant[2]:0,Hd=3<ac.constant.length?ac.constant[3]:0)):(Vb=Da(ac.buffer)?I.createStream(34962,ac.buffer):I.getBuffer(ac.buffer),Ec="type"in ac?yd[ac.type]:Vb.dtype,Wb=!!ac.normalized,Kc=ac.size|0,Qb=ac.offset|0,qd=ac.stride|0,tc=ac.divisor|0);nc=K.location;wc=
w[nc];if(1===Sb){wc.buffer||ea.enableVertexAttribArray(nc);hc=Kc||4;if(wc.type!==Ec||wc.size!==hc||wc.buffer!==Vb||wc.normalized!==Wb||wc.offset!==Qb||wc.stride!==qd)ea.bindBuffer(34962,Vb.buffer),ea.vertexAttribPointer(nc,hc,Ec,Wb,qd,Qb),wc.type=Ec,wc.size=hc,wc.buffer=Vb,wc.normalized=Wb,wc.offset=Qb,wc.stride=qd;wc.divisor!==tc&&(n.vertexAttribDivisorANGLE(nc,tc),wc.divisor=tc)}else if(wc.buffer&&(ea.disableVertexAttribArray(nc),wc.buffer=null),wc.x!==Nc||wc.y!==Xc||wc.z!==td||wc.w!==Hd)ea.vertexAttrib4f(nc,
Nc,Xc,td,Hd),wc.x=Nc,wc.y=Xc,wc.z=td,wc.w=Hd;db=R.call(this,aa,v,l);sc=db[0];Xb=db[1];ic=db[2];Bc=db[3];l&&Ub===sc&&ec===Xb&&yc===ic&&cd===Bc||(Ub=sc,ec=Xb,yc=ic,cd=Bc,ea.uniform4f(ra.location,sc,Xb,ic,Bc));Qc=v.lineWidth;l&&Rc===Qc||(Rc=Qc,ea.uniform1f(ba.location,Qc));Tc=v.capSize;l&&Yc===Tc||(Yc=Tc,ea.uniform1f(ia.location,Tc));md=v.scale;dd=md[0];kc=md[1];l&&Zc===dd&&cc===kc||(Zc=dd,cc=kc,ea.uniform2f(m.location,dd,kc));$c=v.scaleFract;Wc=$c[0];zc=$c[1];l&&ed===Wc&&id===zc||(ed=Wc,id=zc,ea.uniform2f(O.location,
Wc,zc));ud=v.translate;xe=ud[0];jd=ud[1];l&&Ce===xe&&De===jd||(Ce=xe,De=jd,ea.uniform2f(P.location,xe,jd));Od=v.translateFract;pe=Od[0];Pd=Od[1];l&&be===pe&&Id===Pd||(be=pe,Id=Pd,ea.uniform2f(xa.location,pe,Pd));Fd=v.opacity;l&&od===Fd||(od=Fd,ea.uniform1f(S.location,Fd));Uc=v.count;0<Uc?mc?n.drawElementsInstancedANGLE(4,36,mc.type,pc<<(mc.type-5121>>1),Uc):n.drawArraysInstancedANGLE(4,pc,36,Uc):0>Uc&&(mc?ea.drawElements(4,36,mc.type,pc<<(mc.type-5121>>1)):ea.drawArrays(4,pc,36));aa.viewportWidth=
ab;aa.viewportHeight=ob;kb&&I.destroyStream(Fb);eb&&I.destroyStream(gb);mb&&I.destroyStream(Oa);$a&&I.destroyStream(Vb)}V.dirty=!0;Qa.setVAO(null);g&&(z.cpuTime+=performance.now()-k)},draw:function(a){var d,e,g,k,n,v,la,f,u,q,B,p,C,Y,pa,D,E,L,R,Q,U,Ya,Z,Aa,oa,t,qa,ma,ua,hb,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,ga,Za,Kb,Lb,mb,Oa,$b;d=ya.next;d!==ya.cur&&(d?
ea.bindFramebuffer(36160,d.framebuffer):ea.bindFramebuffer(36160,null),ya.cur=d);if(V.dirty){var Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub;Ra=ja.dither;Ra!==V.dither&&(Ra?ea.enable(3024):ea.disable(3024),V.dither=Ra);vb=ja.depth_func;vb!==V.depth_func&&(ea.depthFunc(vb),V.depth_func=vb);wb=Yb[0];Ua=Yb[1];if(wb!==Gb[0]||Ua!==Gb[1])ea.depthRange(wb,Ua),Gb[0]=wb,Gb[1]=Ua;nb=ja.depth_mask;nb!==V.depth_mask&&(ea.depthMask(nb),V.depth_mask=nb);gc=
va[0];Ac=va[1];vc=va[2];bb=va[3];if(gc!==Fa[0]||Ac!==Fa[1]||vc!==Fa[2]||bb!==Fa[3])ea.colorMask(gc,Ac,vc,bb),Fa[0]=gc,Fa[1]=Ac,Fa[2]=vc,Fa[3]=bb;jc=ja.cull_enable;jc!==V.cull_enable&&(jc?ea.enable(2884):ea.disable(2884),V.cull_enable=jc);Sc=ja.cull_face;Sc!==V.cull_face&&(ea.cullFace(Sc),V.cull_face=Sc);Xa=ja.frontFace;Xa!==V.frontFace&&(ea.frontFace(Xa),V.frontFace=Xa);Mc=ja.lineWidth;Mc!==V.lineWidth&&(ea.lineWidth(Mc),V.lineWidth=Mc);zb=ja.polygonOffset_enable;zb!==V.polygonOffset_enable&&(zb?
ea.enable(32823):ea.disable(32823),V.polygonOffset_enable=zb);$a=fa[0];Vb=fa[1];if($a!==H[0]||Vb!==H[1])ea.polygonOffset($a,Vb),H[0]=$a,H[1]=Vb;tc=ja.sample_alpha;tc!==V.sample_alpha&&(tc?ea.enable(32926):ea.disable(32926),V.sample_alpha=tc);Wb=ja.sample_enable;Wb!==V.sample_enable&&(Wb?ea.enable(32928):ea.disable(32928),V.sample_enable=Wb);Qb=ta[0];Kc=ta[1];if(Qb!==Ga[0]||Kc!==Ga[1])ea.sampleCoverage(Qb,Kc),Ga[0]=Qb,Ga[1]=Kc;Sb=ja.stencil_enable;Sb!==V.stencil_enable&&(Sb?ea.enable(2960):ea.disable(2960),
V.stencil_enable=Sb);qd=ja.stencil_mask;qd!==V.stencil_mask&&(ea.stencilMask(qd),V.stencil_mask=qd);Ec=Ea[0];Hd=Ea[1];Nc=Ea[2];if(Ec!==ka[0]||Hd!==ka[1]||Nc!==ka[2])ea.stencilFunc(Ec,Hd,Nc),ka[0]=Ec,ka[1]=Hd,ka[2]=Nc;Xc=Ha[0];td=Ha[1];nc=Ha[2];wc=Ha[3];if(Xc!==Ka[0]||td!==Ka[1]||nc!==Ka[2]||wc!==Ka[3])ea.stencilOpSeparate(Xc,td,nc,wc),Ka[0]=Xc,Ka[1]=td,Ka[2]=nc,Ka[3]=wc;hc=X[0];db=X[1];sc=X[2];Ub=X[3];if(hc!==wa[0]||db!==wa[1]||sc!==wa[2]||Ub!==wa[3])ea.stencilOpSeparate(hc,db,sc,Ub),wa[0]=hc,wa[1]=
db,wa[2]=sc,wa[3]=Ub}e=a.viewport;g=e.x|0;k=e.y|0;n="width"in e?e.width|0:aa.framebufferWidth-g;v="height"in e?e.height|0:aa.framebufferHeight-k;la=aa.viewportWidth;aa.viewportWidth=n;f=aa.viewportHeight;aa.viewportHeight=v;ea.viewport(g,k,n,v);ca[0]=g;ca[1]=k;ca[2]=n;ca[3]=v;ea.blendColor(0,0,0,0);dc[0]=0;dc[1]=0;dc[2]=0;dc[3]=0;ea.enable(3042);V.blend_enable=!0;ea.blendEquationSeparate(32774,32774);y[0]=32774;y[1]=32774;ea.blendFuncSeparate(770,771,773,1);J[0]=770;J[1]=771;J[2]=773;J[3]=1;ea.disable(2929);
V.depth_enable=!1;u=a.viewport;q=u.x|0;B=u.y|0;p="width"in u?u.width|0:aa.framebufferWidth-q;C="height"in u?u.height|0:aa.framebufferHeight-B;ea.scissor(q,B,p,C);za[0]=q;za[1]=B;za[2]=p;za[3]=C;ea.enable(3089);V.scissor_enable=!0;if(Y=V.profile)pa=performance.now(),z.count++;ea.useProgram(l.program);D=Ca.angle_instanced_arrays;Qa.setVAO(null);E=b.call(this,aa,a,0);G.offset=E;L=!1;R=null;Q=0;U=!1;Z=Ya=0;Aa=1;oa=0;t=5126;hb=ua=ma=qa=0;Da(G)?(L=!0,R=I.createStream(34962,G),t=R.dtype):(R=I.getBuffer(G))?
t=R.dtype:"constant"in G?(Aa=2,"number"===typeof G.constant?(ma=G.constant,ua=hb=qa=0):(ma=0<G.constant.length?G.constant[0]:0,ua=1<G.constant.length?G.constant[1]:0,hb=2<G.constant.length?G.constant[2]:0,qa=3<G.constant.length?G.constant[3]:0)):(R=Da(G.buffer)?I.createStream(34962,G.buffer):I.getBuffer(G.buffer),t="type"in G?yd[G.type]:R.dtype,U=!!G.normalized,Z=G.size|0,Ya=G.offset|0,oa=G.stride|0,Q=G.divisor|0);Ab=M.location;Eb=w[Ab];if(1===Aa){Eb.buffer||ea.enableVertexAttribArray(Ab);uc=Z||2;
if(Eb.type!==t||Eb.size!==uc||Eb.buffer!==R||Eb.normalized!==U||Eb.offset!==Ya||Eb.stride!==oa)ea.bindBuffer(34962,R.buffer),ea.vertexAttribPointer(Ab,uc,t,U,oa,Ya),Eb.type=t,Eb.size=uc,Eb.buffer=R,Eb.normalized=U,Eb.offset=Ya,Eb.stride=oa;Eb.divisor!==Q&&(D.vertexAttribDivisorANGLE(Ab,Q),Eb.divisor=Q)}else if(Eb.buffer&&(ea.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==ma||Eb.y!==ua||Eb.z!==hb||Eb.w!==qa)ea.vertexAttrib4f(Ab,ma,ua,hb,qa),Eb.x=ma,Eb.y=ua,Eb.z=hb,Eb.w=qa;yb=da.call(this,aa,a,
0);Tb.offset=yb;xc=!1;Bb=null;Jc=0;lc=!1;gd=Gc=0;bd=1;Dc=0;fc=5126;mc=qc=oc=Hc=0;Da(Tb)?(xc=!0,Bb=I.createStream(34962,Tb),fc=Bb.dtype):(Bb=I.getBuffer(Tb))?fc=Bb.dtype:"constant"in Tb?(bd=2,"number"===typeof Tb.constant?(oc=Tb.constant,qc=mc=Hc=0):(oc=0<Tb.constant.length?Tb.constant[0]:0,qc=1<Tb.constant.length?Tb.constant[1]:0,mc=2<Tb.constant.length?Tb.constant[2]:0,Hc=3<Tb.constant.length?Tb.constant[3]:0)):(Bb=Da(Tb.buffer)?I.createStream(34962,Tb.buffer):I.getBuffer(Tb.buffer),fc="type"in Tb?
yd[Tb.type]:Bb.dtype,lc=!!Tb.normalized,gd=Tb.size|0,Gc=Tb.offset|0,Dc=Tb.stride|0,Jc=Tb.divisor|0);pc=N.location;fb=w[pc];if(1===bd){fb.buffer||ea.enableVertexAttribArray(pc);Vc=gd||2;if(fb.type!==fc||fb.size!==Vc||fb.buffer!==Bb||fb.normalized!==lc||fb.offset!==Gc||fb.stride!==Dc)ea.bindBuffer(34962,Bb.buffer),ea.vertexAttribPointer(pc,Vc,fc,lc,Dc,Gc),fb.type=fc,fb.size=Vc,fb.buffer=Bb,fb.normalized=lc,fb.offset=Gc,fb.stride=Dc;fb.divisor!==Jc&&(D.vertexAttribDivisorANGLE(pc,Jc),fb.divisor=Jc)}else if(fb.buffer&&
(ea.disableVertexAttribArray(pc),fb.buffer=null),fb.x!==oc||fb.y!==qc||fb.z!==mc||fb.w!==Hc)ea.vertexAttrib4f(pc,oc,qc,mc,Hc),fb.x=oc,fb.y=qc,fb.z=mc,fb.w=Hc;Rb=x.call(this,aa,a,0);Ia.offset=Rb;cb=!1;Mb=null;ab=0;ob=!1;Ic=Va=0;Hb=1;Ib=0;rc=5126;Cb=Fb=kb=Nb=0;Da(Ia)?(cb=!0,Mb=I.createStream(34962,Ia),rc=Mb.dtype):(Mb=I.getBuffer(Ia))?rc=Mb.dtype:"constant"in Ia?(Hb=2,"number"===typeof Ia.constant?(kb=Ia.constant,Fb=Cb=Nb=0):(kb=0<Ia.constant.length?Ia.constant[0]:0,Fb=1<Ia.constant.length?Ia.constant[1]:
0,Cb=2<Ia.constant.length?Ia.constant[2]:0,Nb=3<Ia.constant.length?Ia.constant[3]:0)):(Mb=Da(Ia.buffer)?I.createStream(34962,Ia.buffer):I.getBuffer(Ia.buffer),rc="type"in Ia?yd[Ia.type]:Mb.dtype,ob=!!Ia.normalized,Ic=Ia.size|0,Va=Ia.offset|0,Ib=Ia.stride|0,ab=Ia.divisor|0);xb=Ba.location;ib=w[xb];if(1===Hb){ib.buffer||ea.enableVertexAttribArray(xb);Zb=Ic||4;if(ib.type!==rc||ib.size!==Zb||ib.buffer!==Mb||ib.normalized!==ob||ib.offset!==Va||ib.stride!==Ib)ea.bindBuffer(34962,Mb.buffer),ea.vertexAttribPointer(xb,
Zb,rc,ob,Ib,Va),ib.type=rc,ib.size=Zb,ib.buffer=Mb,ib.normalized=ob,ib.offset=Va,ib.stride=Ib;ib.divisor!==ab&&(D.vertexAttribDivisorANGLE(xb,ab),ib.divisor=ab)}else if(ib.buffer&&(ea.disableVertexAttribArray(xb),ib.buffer=null),ib.x!==kb||ib.y!==Fb||ib.z!==Cb||ib.w!==Nb)ea.vertexAttrib4f(xb,kb,Fb,Cb,Nb),ib.x=kb,ib.y=Fb,ib.z=Cb,ib.w=Nb;Ob=F.call(this,aa,a,0);ac.offset=Ob;rb=!1;Ta=null;Pb=0;pb=!1;jb=bc=0;qb=1;Ja=0;sb=5126;Na=gb=eb=La=0;Da(ac)?(rb=!0,Ta=I.createStream(34962,ac),sb=Ta.dtype):(Ta=I.getBuffer(ac))?
sb=Ta.dtype:"constant"in ac?(qb=2,"number"===typeof ac.constant?(eb=ac.constant,gb=Na=La=0):(eb=0<ac.constant.length?ac.constant[0]:0,gb=1<ac.constant.length?ac.constant[1]:0,Na=2<ac.constant.length?ac.constant[2]:0,La=3<ac.constant.length?ac.constant[3]:0)):(Ta=Da(ac.buffer)?I.createStream(34962,ac.buffer):I.getBuffer(ac.buffer),sb="type"in ac?yd[ac.type]:Ta.dtype,pb=!!ac.normalized,jb=ac.size|0,bc=ac.offset|0,Ja=ac.stride|0,Pb=ac.divisor|0);lb=K.location;Wa=w[lb];if(1===qb){Wa.buffer||ea.enableVertexAttribArray(lb);
ub=jb||4;if(Wa.type!==sb||Wa.size!==ub||Wa.buffer!==Ta||Wa.normalized!==pb||Wa.offset!==bc||Wa.stride!==Ja)ea.bindBuffer(34962,Ta.buffer),ea.vertexAttribPointer(lb,ub,sb,pb,Ja,bc),Wa.type=sb,Wa.size=ub,Wa.buffer=Ta,Wa.normalized=pb,Wa.offset=bc,Wa.stride=Ja;Wa.divisor!==Pb&&(D.vertexAttribDivisorANGLE(lb,Pb),Wa.divisor=Pb)}else if(Wa.buffer&&(ea.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==eb||Wa.y!==gb||Wa.z!==Na||Wa.w!==La)ea.vertexAttrib4f(lb,eb,gb,Na,La),Wa.x=eb,Wa.y=gb,Wa.z=Na,Wa.w=La;
tb=ha.location;Pa=w[tb];Pa.buffer||ea.enableVertexAttribArray(tb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==T||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ea.bindBuffer(34962,T.buffer),ea.vertexAttribPointer(tb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=T,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(D.vertexAttribDivisorANGLE(tb,0),Pa.divisor=0);Cc=W.location;Sa=w[Cc];Sa.buffer||ea.enableVertexAttribArray(Cc);if(5126!==Sa.type||2!==Sa.size||Sa.buffer!==A||!1!==Sa.normalized||
8!==Sa.offset||24!==Sa.stride)ea.bindBuffer(34962,A.buffer),ea.vertexAttribPointer(Cc,2,5126,!1,24,8),Sa.type=5126,Sa.size=2,Sa.buffer=A,Sa.normalized=!1,Sa.offset=8,Sa.stride=24;0!==Sa.divisor&&(D.vertexAttribDivisorANGLE(Cc,0),Sa.divisor=0);Jb=c.location;Db=w[Jb];Db.buffer||ea.enableVertexAttribArray(Jb);if(5126!==Db.type||2!==Db.size||Db.buffer!==h||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)ea.bindBuffer(34962,h.buffer),ea.vertexAttribPointer(Jb,2,5126,!1,24,16),Db.type=5126,Db.size=2,
Db.buffer=h,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(D.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Ma=r.call(this,aa,a,0);ea.uniform4f(ra.location,Ma[0],Ma[1],Ma[2],Ma[3]);ea.uniform1f(ba.location,a.lineWidth);ea.uniform1f(ia.location,a.capSize);ga=a.scale;ea.uniform2f(m.location,ga[0],ga[1]);Za=a.scaleFract;ea.uniform2f(O.location,Za[0],Za[1]);Kb=a.translate;ea.uniform2f(P.location,Kb[0],Kb[1]);Lb=a.translateFract;ea.uniform2f(xa.location,Lb[0],Lb[1]);ea.uniform1f(S.location,
a.opacity);(mb=na.elements)?ea.bindBuffer(34963,mb.buffer.buffer):Qa.currentVAO&&(mb=sa.getElements(Qa.currentVAO.elements))&&ea.bindBuffer(34963,mb.buffer.buffer);Oa=na.offset;$b=a.count;0<$b?mb?D.drawElementsInstancedANGLE(4,36,mb.type,Oa<<(mb.type-5121>>1),$b):D.drawArraysInstancedANGLE(4,Oa,36,$b):0>$b&&(mb?ea.drawElements(4,36,mb.type,Oa<<(mb.type-5121>>1)):ea.drawArrays(4,Oa,36));V.dirty=!0;Qa.setVAO(null);aa.viewportWidth=la;aa.viewportHeight=f;Y&&(z.cpuTime+=performance.now()-pa);L&&I.destroyStream(R);
xc&&I.destroyStream(Bb);cb&&I.destroyStream(Mb);rb&&I.destroyStream(Ta)},scope:function(a,c,d){var b,g,m,w,y,H,l,J,v,f,u,M,ta,Qa,Ga,Y,dc,N,ea,fa,S,D,ka,K,P,X,E,va,O,r,za,x,R,Ea,ca,xa,ya,da,sa,F,W,wa,ba,Fa,ra,Gb,ia,ha,Ca,Yb,ua,Ka,Ha,Ba,ga,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,
cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md;b=a.viewport;g=b.x|0;m=b.y|0;w="width"in b?b.width|0:aa.framebufferWidth-g;y="height"in b?b.height|0:aa.framebufferHeight-m;H=aa.viewportWidth;aa.viewportWidth=w;l=aa.viewportHeight;aa.viewportHeight=y;J=hb[0];hb[0]=g;v=hb[1];hb[1]=m;f=hb[2];hb[2]=w;u=hb[3];hb[3]=y;M=la[0];la[0]=0;ta=la[1];la[1]=0;Qa=la[2];la[2]=0;Ga=la[3];la[3]=0;
Y=ja.blend_enable;ja.blend_enable=!0;dc=Ya[0];Ya[0]=32774;N=Ya[1];Ya[1]=32774;ea=n[0];n[0]=770;fa=n[1];n[1]=771;S=n[2];n[2]=773;D=n[3];n[3]=1;ka=ja.depth_enable;ja.depth_enable=!1;K=a.viewport;P=K.x|0;X=K.y|0;E="width"in K?K.width|0:aa.framebufferWidth-P;va="height"in K?K.height|0:aa.framebufferHeight-X;O=pa[0];pa[0]=P;r=pa[1];pa[1]=X;za=pa[2];pa[2]=E;x=pa[3];pa[3]=va;R=ja.scissor_enable;ja.scissor_enable=!0;if(Ea=V.profile)ca=performance.now(),z.count++;xa=na.count;na.count=36;ya=a.count;da=na.instances;
na.instances=ya;sa=na.primitive;na.primitive=4;F=a.capSize;W=Aa[5];Aa[5]=F;wa=a.lineWidth;ba=Aa[4];Aa[4]=wa;Fa=a.opacity;ra=Aa[10];Aa[10]=Fa;Gb=a.range;ia=Aa[18];Aa[18]=Gb;ha=a.scale;Ca=Aa[6];Aa[6]=ha;Yb=a.scaleFract;ua=Aa[7];Aa[7]=Yb;Ka=a.translate;Ha=Aa[8];Aa[8]=Ka;Ba=a.translateFract;ga=Aa[9];Aa[9]=Ba;Hb=oa.call(this,aa,a,d);Ib=Aa[3];Aa[3]=Hb;rc=p.buffer;p.buffer=h;Nb=p.divisor;p.divisor=0;kb=p.normalized;p.normalized=!1;Fb=p.offset;p.offset=16;Cb=p.size;p.size=0;xb=p.state;p.state=1;ib=p.stride;
p.stride=24;Zb=p.type;p.type=5126;Ob=p.w;p.w=0;rb=p.x;p.x=0;Ta=p.y;p.y=0;Pb=p.z;p.z=0;pb=Q.call(this,aa,a,d);ac.offset=pb;bc=!1;jb=null;qb=0;Ja=!1;La=sb=0;eb=1;gb=0;Na=5126;tb=ub=Wa=lb=0;Da(ac)?(bc=!0,jb=I.createStream(34962,ac),Na=jb.dtype):(jb=I.getBuffer(ac))?Na=jb.dtype:"constant"in ac?(eb=2,"number"===typeof ac.constant?(Wa=ac.constant,ub=tb=lb=0):(Wa=0<ac.constant.length?ac.constant[0]:0,ub=1<ac.constant.length?ac.constant[1]:0,tb=2<ac.constant.length?ac.constant[2]:0,lb=3<ac.constant.length?
ac.constant[3]:0)):(jb=Da(ac.buffer)?I.createStream(34962,ac.buffer):I.getBuffer(ac.buffer),Na="type"in ac?yd[ac.type]:jb.dtype,Ja=!!ac.normalized,La=ac.size|0,sb=ac.offset|0,gb=ac.stride|0,qb=ac.divisor|0);Pa=q.buffer;q.buffer=jb;Cc=q.divisor;q.divisor=qb;Sa=q.normalized;q.normalized=Ja;Jb=q.offset;q.offset=sb;Db=q.size;q.size=La;Ma=q.state;q.state=eb;Ld=q.stride;q.stride=gb;Za=q.type;q.type=Na;Kb=q.w;q.w=lb;Lb=q.x;q.x=Wa;mb=q.y;q.y=ub;Oa=q.z;q.z=tb;$b=L.buffer;L.buffer=T;Ra=L.divisor;L.divisor=
0;vb=L.normalized;L.normalized=!1;wb=L.offset;L.offset=0;Ua=L.size;L.size=0;nb=L.state;L.state=1;gc=L.stride;L.stride=24;Ac=L.type;L.type=5126;vc=L.w;L.w=0;bb=L.x;L.x=0;jc=L.y;L.y=0;Sc=L.z;L.z=0;Xa=t.call(this,aa,a,d);Ia.offset=Xa;Mc=!1;zb=null;$a=0;Vb=!1;Wb=tc=0;Qb=1;Kc=0;Sb=5126;Nc=Hd=Ec=qd=0;Da(Ia)?(Mc=!0,zb=I.createStream(34962,Ia),Sb=zb.dtype):(zb=I.getBuffer(Ia))?Sb=zb.dtype:"constant"in Ia?(Qb=2,"number"===typeof Ia.constant?(Ec=Ia.constant,Hd=Nc=qd=0):(Ec=0<Ia.constant.length?Ia.constant[0]:
0,Hd=1<Ia.constant.length?Ia.constant[1]:0,Nc=2<Ia.constant.length?Ia.constant[2]:0,qd=3<Ia.constant.length?Ia.constant[3]:0)):(zb=Da(Ia.buffer)?I.createStream(34962,Ia.buffer):I.getBuffer(Ia.buffer),Sb="type"in Ia?yd[Ia.type]:zb.dtype,Vb=!!Ia.normalized,Wb=Ia.size|0,tc=Ia.offset|0,Kc=Ia.stride|0,$a=Ia.divisor|0);Xc=e.buffer;e.buffer=zb;td=e.divisor;e.divisor=$a;nc=e.normalized;e.normalized=Vb;wc=e.offset;e.offset=tc;hc=e.size;e.size=Wb;db=e.state;e.state=Qb;sc=e.stride;e.stride=Kc;Ub=e.type;e.type=
Sb;Xb=e.w;e.w=qd;ec=e.x;e.x=Ec;ic=e.y;e.y=Hd;yc=e.z;e.z=Nc;Bc=C.buffer;C.buffer=A;cd=C.divisor;C.divisor=0;Qc=C.normalized;C.normalized=!1;Rc=C.offset;C.offset=8;Tc=C.size;C.size=0;Yc=C.state;C.state=1;md=C.stride;C.stride=24;dd=C.type;C.type=5126;Zc=C.w;C.w=0;kc=C.x;C.x=0;cc=C.y;C.y=0;$c=C.z;C.z=0;Wc=U.call(this,aa,a,d);G.offset=Wc;ed=!1;zc=null;id=0;ud=!1;Ce=xe=0;jd=1;De=0;Od=5126;Id=Pd=be=pe=0;Da(G)?(ed=!0,zc=I.createStream(34962,G),Od=zc.dtype):(zc=I.getBuffer(G))?Od=zc.dtype:"constant"in G?(jd=
2,"number"===typeof G.constant?(be=G.constant,Pd=Id=pe=0):(be=0<G.constant.length?G.constant[0]:0,Pd=1<G.constant.length?G.constant[1]:0,Id=2<G.constant.length?G.constant[2]:0,pe=3<G.constant.length?G.constant[3]:0)):(zc=Da(G.buffer)?I.createStream(34962,G.buffer):I.getBuffer(G.buffer),Od="type"in G?yd[G.type]:zc.dtype,ud=!!G.normalized,Ce=G.size|0,xe=G.offset|0,De=G.stride|0,id=G.divisor|0);Fd=k.buffer;k.buffer=zc;od=k.divisor;k.divisor=id;Uc=k.normalized;k.normalized=ud;vd=k.offset;k.offset=xe;
sd=k.size;k.size=Ce;kd=k.state;k.state=jd;wd=k.stride;k.stride=De;Bd=k.type;k.type=Od;Dd=k.w;k.w=pe;je=k.x;k.x=be;re=k.y;k.y=Pd;te=k.z;k.z=Id;le=Z.call(this,aa,a,d);Tb.offset=le;ke=!1;ge=null;ue=0;ce=!1;Oc=me=0;hd=1;ve=0;qe=5126;Sd=Rd=Qd=Kd=0;Da(Tb)?(ke=!0,ge=I.createStream(34962,Tb),qe=ge.dtype):(ge=I.getBuffer(Tb))?qe=ge.dtype:"constant"in Tb?(hd=2,"number"===typeof Tb.constant?(Qd=Tb.constant,Rd=Sd=Kd=0):(Qd=0<Tb.constant.length?Tb.constant[0]:0,Rd=1<Tb.constant.length?Tb.constant[1]:0,Sd=2<Tb.constant.length?
Tb.constant[2]:0,Kd=3<Tb.constant.length?Tb.constant[3]:0)):(ge=Da(Tb.buffer)?I.createStream(34962,Tb.buffer):I.getBuffer(Tb.buffer),qe="type"in Tb?yd[Tb.type]:ge.dtype,ce=!!Tb.normalized,Oc=Tb.size|0,me=Tb.offset|0,ve=Tb.stride|0,ue=Tb.divisor|0);ne=B.buffer;B.buffer=ge;ze=B.divisor;B.divisor=ue;Ee=B.normalized;B.normalized=ce;se=B.offset;B.offset=me;Te=B.size;B.size=Oc;Ue=B.state;B.state=hd;Pe=B.stride;B.stride=ve;we=B.type;B.type=qe;He=B.w;B.w=Kd;Je=B.x;B.x=Qd;Ke=B.y;B.y=Rd;Le=B.z;B.z=Sd;Ie=qa.vert;
qa.vert=2;Md=qa.frag;qa.frag=1;V.dirty=!0;c(aa,a,d);aa.viewportWidth=H;aa.viewportHeight=l;hb[0]=J;hb[1]=v;hb[2]=f;hb[3]=u;la[0]=M;la[1]=ta;la[2]=Qa;la[3]=Ga;ja.blend_enable=Y;Ya[0]=dc;Ya[1]=N;n[0]=ea;n[1]=fa;n[2]=S;n[3]=D;ja.depth_enable=ka;pa[0]=O;pa[1]=r;pa[2]=za;pa[3]=x;ja.scissor_enable=R;Ea&&(z.cpuTime+=performance.now()-ca);na.count=xa;na.instances=da;na.primitive=sa;Aa[5]=W;Aa[4]=ba;Aa[10]=ra;Aa[18]=ia;Aa[6]=Ca;Aa[7]=ua;Aa[8]=Ha;Aa[9]=ga;Aa[3]=Ib;p.buffer=rc;p.divisor=Nb;p.normalized=kb;p.offset=
Fb;p.size=Cb;p.state=xb;p.stride=ib;p.type=Zb;p.w=Ob;p.x=rb;p.y=Ta;p.z=Pb;bc&&I.destroyStream(jb);q.buffer=Pa;q.divisor=Cc;q.normalized=Sa;q.offset=Jb;q.size=Db;q.state=Ma;q.stride=Ld;q.type=Za;q.w=Kb;q.x=Lb;q.y=mb;q.z=Oa;L.buffer=$b;L.divisor=Ra;L.normalized=vb;L.offset=wb;L.size=Ua;L.state=nb;L.stride=gc;L.type=Ac;L.w=vc;L.x=bb;L.y=jc;L.z=Sc;Mc&&I.destroyStream(zb);e.buffer=Xc;e.divisor=td;e.normalized=nc;e.offset=wc;e.size=hc;e.state=db;e.stride=sc;e.type=Ub;e.w=Xb;e.x=ec;e.y=ic;e.z=yc;C.buffer=
Bc;C.divisor=cd;C.normalized=Qc;C.offset=Rc;C.size=Tc;C.state=Yc;C.stride=md;C.type=dd;C.w=Zc;C.x=kc;C.y=cc;C.z=$c;ed&&I.destroyStream(zc);k.buffer=Fd;k.divisor=od;k.normalized=Uc;k.offset=vd;k.size=sd;k.state=kd;k.stride=wd;k.type=Bd;k.w=Dd;k.x=je;k.y=re;k.z=te;ke&&I.destroyStream(ge);B.buffer=ne;B.divisor=ze;B.normalized=Ee;B.offset=se;B.size=Te;B.state=Ue;B.stride=Pe;B.type=we;B.w=He;B.x=Je;B.y=Ke;B.z=Le;qa.vert=Ie;qa.frag=Md;V.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
z,v,Y,f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q,L,t,e,C,U,k,Z,B,u,G,D,E,d,R,c,ia,K,ha){var Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea,ka,X;Ba=a.attributes;W=a.buffer;ba=a.context;S=a.current;M=a.draw;N=a.elements;m=a.extensions;O=a.framebuffer;P=a.gl;xa=a.isBufferArgs;ra=a.next;w=a.shader;I=a.uniforms;aa=a.vao;V=ra.blend_color;na=S.blend_color;sa=ra.blend_equation;Ca=S.blend_equation;ya=ra.blend_func;ea=S.blend_func;Da=ra.colorMask;ja=S.colorMask;
qa=ra.depth_range;Aa=S.depth_range;Qa=ra.polygonOffset_offset;la=S.polygonOffset_offset;dc=ra.sample_coverage;Ya=S.sample_coverage;y=ra.scissor_box;n=S.scissor_box;J=ra.stencil_func;va=S.stencil_func;Fa=ra.stencil_opBack;Yb=S.stencil_opBack;Gb=ra.stencil_opFront;fa=S.stencil_opFront;H=ra.viewport;ta=S.viewport;Ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};pa={divisor:1,offset:8,stride:8};za={divisor:1,offset:8,stride:8};Ea={divisor:1,offset:16,stride:8};
ka={divisor:1,offset:16,stride:8};X={divisor:1,offset:0,stride:4};return{batch:function(a,b){var w,y,H,l,v,I;w=O.next;w!==O.cur&&(w?P.bindFramebuffer(36160,w.framebuffer):P.bindFramebuffer(36160,null),O.cur=w);if(S.dirty){var p,Y,V,r,h,x,A,ya,da,sa,F,T,oa,ga,$d,$e,Oe,Se,Ed,Be,ie,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc;p=ra.dither;p!==S.dither&&(p?P.enable(3024):P.disable(3024),S.dither=p);Y=ra.depth_func;Y!==S.depth_func&&(P.depthFunc(Y),S.depth_func=Y);V=qa[0];r=qa[1];if(V!==Aa[0]||r!==Aa[1])P.depthRange(V,
r),Aa[0]=V,Aa[1]=r;h=ra.depth_mask;h!==S.depth_mask&&(P.depthMask(h),S.depth_mask=h);x=Da[0];A=Da[1];ya=Da[2];da=Da[3];if(x!==ja[0]||A!==ja[1]||ya!==ja[2]||da!==ja[3])P.colorMask(x,A,ya,da),ja[0]=x,ja[1]=A,ja[2]=ya,ja[3]=da;sa=ra.cull_enable;sa!==S.cull_enable&&(sa?P.enable(2884):P.disable(2884),S.cull_enable=sa);F=ra.cull_face;F!==S.cull_face&&(P.cullFace(F),S.cull_face=F);T=ra.frontFace;T!==S.frontFace&&(P.frontFace(T),S.frontFace=T);oa=ra.lineWidth;oa!==S.lineWidth&&(P.lineWidth(oa),S.lineWidth=
oa);ga=ra.polygonOffset_enable;ga!==S.polygonOffset_enable&&(ga?P.enable(32823):P.disable(32823),S.polygonOffset_enable=ga);$d=Qa[0];$e=Qa[1];if($d!==la[0]||$e!==la[1])P.polygonOffset($d,$e),la[0]=$d,la[1]=$e;Oe=ra.sample_alpha;Oe!==S.sample_alpha&&(Oe?P.enable(32926):P.disable(32926),S.sample_alpha=Oe);Se=ra.sample_enable;Se!==S.sample_enable&&(Se?P.enable(32928):P.disable(32928),S.sample_enable=Se);Ed=dc[0];Be=dc[1];if(Ed!==Ya[0]||Be!==Ya[1])P.sampleCoverage(Ed,Be),Ya[0]=Ed,Ya[1]=Be;ie=ra.stencil_mask;
ie!==S.stencil_mask&&(P.stencilMask(ie),S.stencil_mask=ie);Jd=J[0];Xd=J[1];Ad=J[2];if(Jd!==va[0]||Xd!==va[1]||Ad!==va[2])P.stencilFunc(Jd,Xd,Ad),va[0]=Jd,va[1]=Xd,va[2]=Ad;nd=Gb[0];ad=Gb[1];rd=Gb[2];Lc=Gb[3];if(nd!==fa[0]||ad!==fa[1]||rd!==fa[2]||Lc!==fa[3])P.stencilOpSeparate(nd,ad,rd,Lc),fa[0]=nd,fa[1]=ad,fa[2]=rd,fa[3]=Lc;pd=Fa[0];Fc=Fa[1];fd=Fa[2];Pc=Fa[3];if(pd!==Yb[0]||Fc!==Yb[1]||fd!==Yb[2]||Pc!==Yb[3])P.stencilOpSeparate(pd,Fc,fd,Pc),Yb[0]=pd,Yb[1]=Fc,Yb[2]=fd,Yb[3]=Pc}P.blendColor(0,0,0,
0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;P.enable(3042);S.blend_enable=!0;P.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;P.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;P.enable(3089);S.scissor_enable=!0;P.disable(2960);S.stencil_enable=!1;if(y=S.profile)H=performance.now(),z.count+=b;P.useProgram(Q.program);l=m.angle_instanced_arrays;var ld,Ab,Eb,uc,yb;aa.setVAO(null);ld=G.location;Ab=Ba[ld];Ab.buffer||P.enableVertexAttribArray(ld);if(5126!==Ab.type||1!==Ab.size||
Ab.buffer!==f||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)P.bindBuffer(34962,f.buffer),P.vertexAttribPointer(ld,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=f,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(l.vertexAttribDivisorANGLE(ld,0),Ab.divisor=0);Eb=D.location;uc=Ba[Eb];uc.buffer||P.enableVertexAttribArray(Eb);if(5126!==uc.type||1!==uc.size||uc.buffer!==g||!1!==uc.normalized||4!==uc.offset||8!==uc.stride)P.bindBuffer(34962,g.buffer),P.vertexAttribPointer(Eb,1,5126,!1,8,4),
uc.type=5126,uc.size=1,uc.buffer=g,uc.normalized=!1,uc.offset=4,uc.stride=8;0!==uc.divisor&&(l.vertexAttribDivisorANGLE(Eb,0),uc.divisor=0);(yb=M.elements)?P.bindBuffer(34963,yb.buffer.buffer):aa.currentVAO&&(yb=N.getElements(aa.currentVAO.elements))&&P.bindBuffer(34963,yb.buffer.buffer);for(v=0;v<b;++v){I=a[v];var xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,
Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd;xc=I.viewport;Bb=xc.x|0;Jc=xc.y|0;lc="width"in xc?xc.width|0:ba.framebufferWidth-Bb;Gc="height"in xc?xc.height|0:ba.framebufferHeight-Jc;gd=ba.viewportWidth;ba.viewportWidth=lc;bd=ba.viewportHeight;ba.viewportHeight=Gc;P.viewport(Bb,Jc,lc,Gc);ta[0]=Bb;ta[1]=Jc;ta[2]=lc;ta[3]=Gc;(Dc=q.call(this,
ba,I,v))?P.enable(2929):P.disable(2929);S.depth_enable=Dc;fc=I.viewport;Hc=fc.x|0;oc=fc.y|0;qc="width"in fc?fc.width|0:ba.framebufferWidth-Hc;mc="height"in fc?fc.height|0:ba.framebufferHeight-oc;P.scissor(Hc,oc,qc,mc);n[0]=Hc;n[1]=oc;n[2]=qc;n[3]=mc;pa.buffer=I.positionBuffer;pc=!1;fb=null;Vc=0;Rb=!1;Mb=cb=0;ab=1;ob=0;Va=5126;rc=Ib=Hb=Ic=0;xa(pa)?(pc=!0,fb=W.createStream(34962,pa),Va=fb.dtype):(fb=W.getBuffer(pa))?Va=fb.dtype:"constant"in pa?(ab=2,"number"===typeof pa.constant?(Hb=pa.constant,Ib=
rc=Ic=0):(Hb=0<pa.constant.length?pa.constant[0]:0,Ib=1<pa.constant.length?pa.constant[1]:0,rc=2<pa.constant.length?pa.constant[2]:0,Ic=3<pa.constant.length?pa.constant[3]:0)):(fb=xa(pa.buffer)?W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Va="type"in pa?Ga[pa.type]:fb.dtype,Rb=!!pa.normalized,Mb=pa.size|0,cb=pa.offset|0,ob=pa.stride|0,Vc=pa.divisor|0);Nb=t.location;kb=Ba[Nb];if(1===ab){kb.buffer||P.enableVertexAttribArray(Nb);Fb=Mb||2;if(kb.type!==Va||kb.size!==Fb||kb.buffer!==fb||kb.normalized!==
Rb||kb.offset!==cb||kb.stride!==ob)P.bindBuffer(34962,fb.buffer),P.vertexAttribPointer(Nb,Fb,Va,Rb,ob,cb),kb.type=Va,kb.size=Fb,kb.buffer=fb,kb.normalized=Rb,kb.offset=cb,kb.stride=ob;kb.divisor!==Vc&&(l.vertexAttribDivisorANGLE(Nb,Vc),kb.divisor=Vc)}else if(kb.buffer&&(P.disableVertexAttribArray(Nb),kb.buffer=null),kb.x!==Hb||kb.y!==Ib||kb.z!==rc||kb.w!==Ic)P.vertexAttrib4f(Nb,Hb,Ib,rc,Ic),kb.x=Hb,kb.y=Ib,kb.z=rc,kb.w=Ic;Ea.buffer=I.positionBuffer;Cb=!1;xb=null;ib=0;Zb=!1;rb=Ob=0;Ta=1;Pb=0;pb=5126;
Ja=qb=jb=bc=0;xa(Ea)?(Cb=!0,xb=W.createStream(34962,Ea),pb=xb.dtype):(xb=W.getBuffer(Ea))?pb=xb.dtype:"constant"in Ea?(Ta=2,"number"===typeof Ea.constant?(jb=Ea.constant,qb=Ja=bc=0):(jb=0<Ea.constant.length?Ea.constant[0]:0,qb=1<Ea.constant.length?Ea.constant[1]:0,Ja=2<Ea.constant.length?Ea.constant[2]:0,bc=3<Ea.constant.length?Ea.constant[3]:0)):(xb=xa(Ea.buffer)?W.createStream(34962,Ea.buffer):W.getBuffer(Ea.buffer),pb="type"in Ea?Ga[Ea.type]:xb.dtype,Zb=!!Ea.normalized,rb=Ea.size|0,Ob=Ea.offset|
0,Pb=Ea.stride|0,ib=Ea.divisor|0);sb=C.location;La=Ba[sb];if(1===Ta){La.buffer||P.enableVertexAttribArray(sb);eb=rb||2;if(La.type!==pb||La.size!==eb||La.buffer!==xb||La.normalized!==Zb||La.offset!==Ob||La.stride!==Pb)P.bindBuffer(34962,xb.buffer),P.vertexAttribPointer(sb,eb,pb,Zb,Pb,Ob),La.type=pb,La.size=eb,La.buffer=xb,La.normalized=Zb,La.offset=Ob,La.stride=Pb;La.divisor!==ib&&(l.vertexAttribDivisorANGLE(sb,ib),La.divisor=ib)}else if(La.buffer&&(P.disableVertexAttribArray(sb),La.buffer=null),La.x!==
jb||La.y!==qb||La.z!==Ja||La.w!==bc)P.vertexAttrib4f(sb,jb,qb,Ja,bc),La.x=jb,La.y=qb,La.z=Ja,La.w=bc;za.buffer=I.positionFractBuffer;gb=!1;Na=null;lb=0;Wa=!1;tb=ub=0;Pa=1;Cc=0;Sa=5126;Ld=Ma=Db=Jb=0;xa(za)?(gb=!0,Na=W.createStream(34962,za),Sa=Na.dtype):(Na=W.getBuffer(za))?Sa=Na.dtype:"constant"in za?(Pa=2,"number"===typeof za.constant?(Db=za.constant,Ma=Ld=Jb=0):(Db=0<za.constant.length?za.constant[0]:0,Ma=1<za.constant.length?za.constant[1]:0,Ld=2<za.constant.length?za.constant[2]:0,Jb=3<za.constant.length?
za.constant[3]:0)):(Na=xa(za.buffer)?W.createStream(34962,za.buffer):W.getBuffer(za.buffer),Sa="type"in za?Ga[za.type]:Na.dtype,Wa=!!za.normalized,tb=za.size|0,ub=za.offset|0,Cc=za.stride|0,lb=za.divisor|0);Za=e.location;Kb=Ba[Za];if(1===Pa){Kb.buffer||P.enableVertexAttribArray(Za);Lb=tb||2;if(Kb.type!==Sa||Kb.size!==Lb||Kb.buffer!==Na||Kb.normalized!==Wa||Kb.offset!==ub||Kb.stride!==Cc)P.bindBuffer(34962,Na.buffer),P.vertexAttribPointer(Za,Lb,Sa,Wa,Cc,ub),Kb.type=Sa,Kb.size=Lb,Kb.buffer=Na,Kb.normalized=
Wa,Kb.offset=ub,Kb.stride=Cc;Kb.divisor!==lb&&(l.vertexAttribDivisorANGLE(Za,lb),Kb.divisor=lb)}else if(Kb.buffer&&(P.disableVertexAttribArray(Za),Kb.buffer=null),Kb.x!==Db||Kb.y!==Ma||Kb.z!==Ld||Kb.w!==Jb)P.vertexAttrib4f(Za,Db,Ma,Ld,Jb),Kb.x=Db,Kb.y=Ma,Kb.z=Ld,Kb.w=Jb;ka.buffer=I.positionFractBuffer;mb=!1;Oa=null;$b=0;Ra=!1;wb=vb=0;Ua=1;nb=0;gc=5126;jc=bb=vc=Ac=0;xa(ka)?(mb=!0,Oa=W.createStream(34962,ka),gc=Oa.dtype):(Oa=W.getBuffer(ka))?gc=Oa.dtype:"constant"in ka?(Ua=2,"number"===typeof ka.constant?
(vc=ka.constant,bb=jc=Ac=0):(vc=0<ka.constant.length?ka.constant[0]:0,bb=1<ka.constant.length?ka.constant[1]:0,jc=2<ka.constant.length?ka.constant[2]:0,Ac=3<ka.constant.length?ka.constant[3]:0)):(Oa=xa(ka.buffer)?W.createStream(34962,ka.buffer):W.getBuffer(ka.buffer),gc="type"in ka?Ga[ka.type]:Oa.dtype,Ra=!!ka.normalized,wb=ka.size|0,vb=ka.offset|0,nb=ka.stride|0,$b=ka.divisor|0);Sc=U.location;Xa=Ba[Sc];if(1===Ua){Xa.buffer||P.enableVertexAttribArray(Sc);Mc=wb||2;if(Xa.type!==gc||Xa.size!==Mc||Xa.buffer!==
Oa||Xa.normalized!==Ra||Xa.offset!==vb||Xa.stride!==nb)P.bindBuffer(34962,Oa.buffer),P.vertexAttribPointer(Sc,Mc,gc,Ra,nb,vb),Xa.type=gc,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Ra,Xa.offset=vb,Xa.stride=nb;Xa.divisor!==$b&&(l.vertexAttribDivisorANGLE(Sc,$b),Xa.divisor=$b)}else if(Xa.buffer&&(P.disableVertexAttribArray(Sc),Xa.buffer=null),Xa.x!==vc||Xa.y!==bb||Xa.z!==jc||Xa.w!==Ac)P.vertexAttrib4f(Sc,vc,bb,jc,Ac),Xa.x=vc,Xa.y=bb,Xa.z=jc,Xa.w=Ac;X.buffer=I.colorBuffer;zb=!1;$a=null;Vb=0;tc=!1;Qb=Wb=0;
Kc=1;Sb=0;qd=5126;Xc=Nc=Hd=Ec=0;xa(X)?(zb=!0,$a=W.createStream(34962,X),qd=$a.dtype):($a=W.getBuffer(X))?qd=$a.dtype:"constant"in X?(Kc=2,"number"===typeof X.constant?(Hd=X.constant,Nc=Xc=Ec=0):(Hd=0<X.constant.length?X.constant[0]:0,Nc=1<X.constant.length?X.constant[1]:0,Xc=2<X.constant.length?X.constant[2]:0,Ec=3<X.constant.length?X.constant[3]:0)):($a=xa(X.buffer)?W.createStream(34962,X.buffer):W.getBuffer(X.buffer),qd="type"in X?Ga[X.type]:$a.dtype,tc=!!X.normalized,Qb=X.size|0,Wb=X.offset|0,
Sb=X.stride|0,Vb=X.divisor|0);td=k.location;nc=Ba[td];if(1===Kc){nc.buffer||P.enableVertexAttribArray(td);wc=Qb||4;if(nc.type!==qd||nc.size!==wc||nc.buffer!==$a||nc.normalized!==tc||nc.offset!==Wb||nc.stride!==Sb)P.bindBuffer(34962,$a.buffer),P.vertexAttribPointer(td,wc,qd,tc,Sb,Wb),nc.type=qd,nc.size=wc,nc.buffer=$a,nc.normalized=tc,nc.offset=Wb,nc.stride=Sb;nc.divisor!==Vb&&(l.vertexAttribDivisorANGLE(td,Vb),nc.divisor=Vb)}else if(nc.buffer&&(P.disableVertexAttribArray(td),nc.buffer=null),nc.x!==
Hd||nc.y!==Nc||nc.z!==Xc||nc.w!==Ec)P.vertexAttrib4f(td,Hd,Nc,Xc,Ec),nc.x=Hd,nc.y=Nc,nc.z=Xc,nc.w=Ec;hc=I.scale;db=hc[0];Ub=hc[1];v&&sc===db&&Xb===Ub||(sc=db,Xb=Ub,P.uniform2f(d.location,db,Ub));ec=I.scaleFract;ic=ec[0];Bc=ec[1];v&&yc===ic&&cd===Bc||(yc=ic,cd=Bc,P.uniform2f(R.location,ic,Bc));Qc=I.translate;Rc=Qc[0];Yc=Qc[1];v&&Tc===Rc&&md===Yc||(Tc=Rc,md=Yc,P.uniform2f(ia.location,Rc,Yc));dd=I.translateFract;Zc=dd[0];cc=dd[1];v&&kc===Zc&&$c===cc||(kc=Zc,$c=cc,P.uniform2f(K.location,Zc,cc));Wc=I.thickness;
v&&ed===Wc||(ed=Wc,P.uniform1f(c.location,Wc));zc=I.depth;v&&id===zc||(id=zc,P.uniform1f(u.location,zc));ud=L.call(this,ba,I,v);xe=ud[0];jd=ud[1];Od=ud[2];be=ud[3];v&&Ce===xe&&De===jd&&pe===Od&&Pd===be||(Ce=xe,De=jd,pe=Od,Pd=be,P.uniform4f(ha.location,xe,jd,Od,be));Id=I.dashLength;v&&Fd===Id||(Fd=Id,P.uniform1f(Z.location,Id));od=I.opacity;v&&Uc===od||(Uc=od,P.uniform1f(E.location,od));(vd=I.dashTexture)&&"framebuffer"===vd._reglType&&(vd=vd.color[0]);sd=vd._texture;P.uniform1i(B.location,sd.bind());
kd=I.count;0<kd?yb?l.drawElementsInstancedANGLE(5,4,yb.type,0<<(yb.type-5121>>1),kd):l.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(yb?P.drawElements(5,4,yb.type,0<<(yb.type-5121>>1)):P.drawArrays(5,0,4));ba.viewportWidth=gd;ba.viewportHeight=bd;pc&&W.destroyStream(fb);Cb&&W.destroyStream(xb);gb&&W.destroyStream(Na);mb&&W.destroyStream(Oa);zb&&W.destroyStream($a);sd.unbind()}S.dirty=!0;aa.setVAO(null);y&&(z.cpuTime+=performance.now()-H)},draw:function(a){var b,w,y,H,q,I,p,V,r,h,x,A,L,ya,da,sa,F,T,Q,
oa,ga,$d,$e,Oe,Se,Ed,Be,ie,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb;b=O.next;b!==O.cur&&(b?P.bindFramebuffer(36160,b.framebuffer):P.bindFramebuffer(36160,null),O.cur=b);if(S.dirty){var wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb;wb=ra.dither;wb!==
S.dither&&(wb?P.enable(3024):P.disable(3024),S.dither=wb);Ua=ra.depth_func;Ua!==S.depth_func&&(P.depthFunc(Ua),S.depth_func=Ua);nb=qa[0];gc=qa[1];if(nb!==Aa[0]||gc!==Aa[1])P.depthRange(nb,gc),Aa[0]=nb,Aa[1]=gc;Ac=ra.depth_mask;Ac!==S.depth_mask&&(P.depthMask(Ac),S.depth_mask=Ac);vc=Da[0];bb=Da[1];jc=Da[2];Sc=Da[3];if(vc!==ja[0]||bb!==ja[1]||jc!==ja[2]||Sc!==ja[3])P.colorMask(vc,bb,jc,Sc),ja[0]=vc,ja[1]=bb,ja[2]=jc,ja[3]=Sc;Xa=ra.cull_enable;Xa!==S.cull_enable&&(Xa?P.enable(2884):P.disable(2884),S.cull_enable=
Xa);Mc=ra.cull_face;Mc!==S.cull_face&&(P.cullFace(Mc),S.cull_face=Mc);zb=ra.frontFace;zb!==S.frontFace&&(P.frontFace(zb),S.frontFace=zb);$a=ra.lineWidth;$a!==S.lineWidth&&(P.lineWidth($a),S.lineWidth=$a);Vb=ra.polygonOffset_enable;Vb!==S.polygonOffset_enable&&(Vb?P.enable(32823):P.disable(32823),S.polygonOffset_enable=Vb);tc=Qa[0];Wb=Qa[1];if(tc!==la[0]||Wb!==la[1])P.polygonOffset(tc,Wb),la[0]=tc,la[1]=Wb;Qb=ra.sample_alpha;Qb!==S.sample_alpha&&(Qb?P.enable(32926):P.disable(32926),S.sample_alpha=
Qb);Kc=ra.sample_enable;Kc!==S.sample_enable&&(Kc?P.enable(32928):P.disable(32928),S.sample_enable=Kc);Sb=dc[0];qd=dc[1];if(Sb!==Ya[0]||qd!==Ya[1])P.sampleCoverage(Sb,qd),Ya[0]=Sb,Ya[1]=qd;Ec=ra.stencil_mask;Ec!==S.stencil_mask&&(P.stencilMask(Ec),S.stencil_mask=Ec);Hd=J[0];Nc=J[1];Xc=J[2];if(Hd!==va[0]||Nc!==va[1]||Xc!==va[2])P.stencilFunc(Hd,Nc,Xc),va[0]=Hd,va[1]=Nc,va[2]=Xc;td=Gb[0];nc=Gb[1];wc=Gb[2];hc=Gb[3];if(td!==fa[0]||nc!==fa[1]||wc!==fa[2]||hc!==fa[3])P.stencilOpSeparate(td,nc,wc,hc),fa[0]=
td,fa[1]=nc,fa[2]=wc,fa[3]=hc;db=Fa[0];sc=Fa[1];Ub=Fa[2];Xb=Fa[3];if(db!==Yb[0]||sc!==Yb[1]||Ub!==Yb[2]||Xb!==Yb[3])P.stencilOpSeparate(db,sc,Ub,Xb),Yb[0]=db,Yb[1]=sc,Yb[2]=Ub,Yb[3]=Xb}w=a.viewport;y=w.x|0;H=w.y|0;q="width"in w?w.width|0:ba.framebufferWidth-y;I="height"in w?w.height|0:ba.framebufferHeight-H;p=ba.viewportWidth;ba.viewportWidth=q;V=ba.viewportHeight;ba.viewportHeight=I;P.viewport(y,H,q,I);ta[0]=y;ta[1]=H;ta[2]=q;ta[3]=I;P.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;P.enable(3042);
S.blend_enable=!0;P.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;P.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;(r=v.call(this,ba,a,0))?P.enable(2929):P.disable(2929);S.depth_enable=r;h=a.viewport;x=h.x|0;A=h.y|0;L="width"in h?h.width|0:ba.framebufferWidth-x;ya="height"in h?h.height|0:ba.framebufferHeight-A;P.scissor(x,A,L,ya);n[0]=x;n[1]=A;n[2]=L;n[3]=ya;P.enable(3089);S.scissor_enable=!0;P.disable(2960);S.stencil_enable=!1;if(da=S.profile)sa=performance.now(),
z.count++;P.useProgram(Y.program);F=m.angle_instanced_arrays;aa.setVAO(null);pa.buffer=a.positionBuffer;T=!1;Q=null;oa=0;ga=!1;$e=$d=0;Oe=1;Se=0;Ed=5126;Xd=Jd=ie=Be=0;xa(pa)?(T=!0,Q=W.createStream(34962,pa),Ed=Q.dtype):(Q=W.getBuffer(pa))?Ed=Q.dtype:"constant"in pa?(Oe=2,"number"===typeof pa.constant?(ie=pa.constant,Jd=Xd=Be=0):(ie=0<pa.constant.length?pa.constant[0]:0,Jd=1<pa.constant.length?pa.constant[1]:0,Xd=2<pa.constant.length?pa.constant[2]:0,Be=3<pa.constant.length?pa.constant[3]:0)):(Q=xa(pa.buffer)?
W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Ed="type"in pa?Ga[pa.type]:Q.dtype,ga=!!pa.normalized,$e=pa.size|0,$d=pa.offset|0,Se=pa.stride|0,oa=pa.divisor|0);Ad=t.location;nd=Ba[Ad];if(1===Oe){nd.buffer||P.enableVertexAttribArray(Ad);ad=$e||2;if(nd.type!==Ed||nd.size!==ad||nd.buffer!==Q||nd.normalized!==ga||nd.offset!==$d||nd.stride!==Se)P.bindBuffer(34962,Q.buffer),P.vertexAttribPointer(Ad,ad,Ed,ga,Se,$d),nd.type=Ed,nd.size=ad,nd.buffer=Q,nd.normalized=ga,nd.offset=$d,nd.stride=Se;nd.divisor!==
oa&&(F.vertexAttribDivisorANGLE(Ad,oa),nd.divisor=oa)}else if(nd.buffer&&(P.disableVertexAttribArray(Ad),nd.buffer=null),nd.x!==ie||nd.y!==Jd||nd.z!==Xd||nd.w!==Be)P.vertexAttrib4f(Ad,ie,Jd,Xd,Be),nd.x=ie,nd.y=Jd,nd.z=Xd,nd.w=Be;Ea.buffer=a.positionBuffer;rd=!1;Lc=null;pd=0;Fc=!1;Pc=fd=0;ld=1;Ab=0;Eb=5126;Bb=xc=yb=uc=0;xa(Ea)?(rd=!0,Lc=W.createStream(34962,Ea),Eb=Lc.dtype):(Lc=W.getBuffer(Ea))?Eb=Lc.dtype:"constant"in Ea?(ld=2,"number"===typeof Ea.constant?(yb=Ea.constant,xc=Bb=uc=0):(yb=0<Ea.constant.length?
Ea.constant[0]:0,xc=1<Ea.constant.length?Ea.constant[1]:0,Bb=2<Ea.constant.length?Ea.constant[2]:0,uc=3<Ea.constant.length?Ea.constant[3]:0)):(Lc=xa(Ea.buffer)?W.createStream(34962,Ea.buffer):W.getBuffer(Ea.buffer),Eb="type"in Ea?Ga[Ea.type]:Lc.dtype,Fc=!!Ea.normalized,Pc=Ea.size|0,fd=Ea.offset|0,Ab=Ea.stride|0,pd=Ea.divisor|0);Jc=C.location;lc=Ba[Jc];if(1===ld){lc.buffer||P.enableVertexAttribArray(Jc);Gc=Pc||2;if(lc.type!==Eb||lc.size!==Gc||lc.buffer!==Lc||lc.normalized!==Fc||lc.offset!==fd||lc.stride!==
Ab)P.bindBuffer(34962,Lc.buffer),P.vertexAttribPointer(Jc,Gc,Eb,Fc,Ab,fd),lc.type=Eb,lc.size=Gc,lc.buffer=Lc,lc.normalized=Fc,lc.offset=fd,lc.stride=Ab;lc.divisor!==pd&&(F.vertexAttribDivisorANGLE(Jc,pd),lc.divisor=pd)}else if(lc.buffer&&(P.disableVertexAttribArray(Jc),lc.buffer=null),lc.x!==yb||lc.y!==xc||lc.z!==Bb||lc.w!==uc)P.vertexAttrib4f(Jc,yb,xc,Bb,uc),lc.x=yb,lc.y=xc,lc.z=Bb,lc.w=uc;za.buffer=a.positionFractBuffer;gd=!1;bd=null;Dc=0;fc=!1;oc=Hc=0;qc=1;mc=0;pc=5126;cb=Rb=Vc=fb=0;xa(za)?(gd=
!0,bd=W.createStream(34962,za),pc=bd.dtype):(bd=W.getBuffer(za))?pc=bd.dtype:"constant"in za?(qc=2,"number"===typeof za.constant?(Vc=za.constant,Rb=cb=fb=0):(Vc=0<za.constant.length?za.constant[0]:0,Rb=1<za.constant.length?za.constant[1]:0,cb=2<za.constant.length?za.constant[2]:0,fb=3<za.constant.length?za.constant[3]:0)):(bd=xa(za.buffer)?W.createStream(34962,za.buffer):W.getBuffer(za.buffer),pc="type"in za?Ga[za.type]:bd.dtype,fc=!!za.normalized,oc=za.size|0,Hc=za.offset|0,mc=za.stride|0,Dc=za.divisor|
0);Mb=e.location;ab=Ba[Mb];if(1===qc){ab.buffer||P.enableVertexAttribArray(Mb);ob=oc||2;if(ab.type!==pc||ab.size!==ob||ab.buffer!==bd||ab.normalized!==fc||ab.offset!==Hc||ab.stride!==mc)P.bindBuffer(34962,bd.buffer),P.vertexAttribPointer(Mb,ob,pc,fc,mc,Hc),ab.type=pc,ab.size=ob,ab.buffer=bd,ab.normalized=fc,ab.offset=Hc,ab.stride=mc;ab.divisor!==Dc&&(F.vertexAttribDivisorANGLE(Mb,Dc),ab.divisor=Dc)}else if(ab.buffer&&(P.disableVertexAttribArray(Mb),ab.buffer=null),ab.x!==Vc||ab.y!==Rb||ab.z!==cb||
ab.w!==fb)P.vertexAttrib4f(Mb,Vc,Rb,cb,fb),ab.x=Vc,ab.y=Rb,ab.z=cb,ab.w=fb;ka.buffer=a.positionFractBuffer;Va=!1;Ic=null;Hb=0;Ib=!1;Nb=rc=0;kb=1;Fb=0;Cb=5126;Ob=Zb=ib=xb=0;xa(ka)?(Va=!0,Ic=W.createStream(34962,ka),Cb=Ic.dtype):(Ic=W.getBuffer(ka))?Cb=Ic.dtype:"constant"in ka?(kb=2,"number"===typeof ka.constant?(ib=ka.constant,Zb=Ob=xb=0):(ib=0<ka.constant.length?ka.constant[0]:0,Zb=1<ka.constant.length?ka.constant[1]:0,Ob=2<ka.constant.length?ka.constant[2]:0,xb=3<ka.constant.length?ka.constant[3]:
0)):(Ic=xa(ka.buffer)?W.createStream(34962,ka.buffer):W.getBuffer(ka.buffer),Cb="type"in ka?Ga[ka.type]:Ic.dtype,Ib=!!ka.normalized,Nb=ka.size|0,rc=ka.offset|0,Fb=ka.stride|0,Hb=ka.divisor|0);rb=U.location;Ta=Ba[rb];if(1===kb){Ta.buffer||P.enableVertexAttribArray(rb);Pb=Nb||2;if(Ta.type!==Cb||Ta.size!==Pb||Ta.buffer!==Ic||Ta.normalized!==Ib||Ta.offset!==rc||Ta.stride!==Fb)P.bindBuffer(34962,Ic.buffer),P.vertexAttribPointer(rb,Pb,Cb,Ib,Fb,rc),Ta.type=Cb,Ta.size=Pb,Ta.buffer=Ic,Ta.normalized=Ib,Ta.offset=
rc,Ta.stride=Fb;Ta.divisor!==Hb&&(F.vertexAttribDivisorANGLE(rb,Hb),Ta.divisor=Hb)}else if(Ta.buffer&&(P.disableVertexAttribArray(rb),Ta.buffer=null),Ta.x!==ib||Ta.y!==Zb||Ta.z!==Ob||Ta.w!==xb)P.vertexAttrib4f(rb,ib,Zb,Ob,xb),Ta.x=ib,Ta.y=Zb,Ta.z=Ob,Ta.w=xb;X.buffer=a.colorBuffer;pb=!1;bc=null;jb=0;qb=!1;sb=Ja=0;La=1;eb=0;gb=5126;ub=Wa=lb=Na=0;xa(X)?(pb=!0,bc=W.createStream(34962,X),gb=bc.dtype):(bc=W.getBuffer(X))?gb=bc.dtype:"constant"in X?(La=2,"number"===typeof X.constant?(lb=X.constant,Wa=ub=
Na=0):(lb=0<X.constant.length?X.constant[0]:0,Wa=1<X.constant.length?X.constant[1]:0,ub=2<X.constant.length?X.constant[2]:0,Na=3<X.constant.length?X.constant[3]:0)):(bc=xa(X.buffer)?W.createStream(34962,X.buffer):W.getBuffer(X.buffer),gb="type"in X?Ga[X.type]:bc.dtype,qb=!!X.normalized,sb=X.size|0,Ja=X.offset|0,eb=X.stride|0,jb=X.divisor|0);tb=k.location;Pa=Ba[tb];if(1===La){Pa.buffer||P.enableVertexAttribArray(tb);Cc=sb||4;if(Pa.type!==gb||Pa.size!==Cc||Pa.buffer!==bc||Pa.normalized!==qb||Pa.offset!==
Ja||Pa.stride!==eb)P.bindBuffer(34962,bc.buffer),P.vertexAttribPointer(tb,Cc,gb,qb,eb,Ja),Pa.type=gb,Pa.size=Cc,Pa.buffer=bc,Pa.normalized=qb,Pa.offset=Ja,Pa.stride=eb;Pa.divisor!==jb&&(F.vertexAttribDivisorANGLE(tb,jb),Pa.divisor=jb)}else if(Pa.buffer&&(P.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==ub||Pa.w!==Na)P.vertexAttrib4f(tb,lb,Wa,ub,Na),Pa.x=lb,Pa.y=Wa,Pa.z=ub,Pa.w=Na;Sa=G.location;Jb=Ba[Sa];Jb.buffer||P.enableVertexAttribArray(Sa);if(5126!==Jb.type||1!==Jb.size||
Jb.buffer!==f||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)P.bindBuffer(34962,f.buffer),P.vertexAttribPointer(Sa,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=f,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(F.vertexAttribDivisorANGLE(Sa,0),Jb.divisor=0);Db=D.location;Ma=Ba[Db];Ma.buffer||P.enableVertexAttribArray(Db);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==g||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)P.bindBuffer(34962,g.buffer),P.vertexAttribPointer(Db,1,5126,!1,8,4),
Ma.type=5126,Ma.size=1,Ma.buffer=g,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(F.vertexAttribDivisorANGLE(Db,0),Ma.divisor=0);Ld=a.scale;P.uniform2f(d.location,Ld[0],Ld[1]);Za=a.scaleFract;P.uniform2f(R.location,Za[0],Za[1]);Kb=a.translate;P.uniform2f(ia.location,Kb[0],Kb[1]);Lb=a.translateFract;P.uniform2f(K.location,Lb[0],Lb[1]);P.uniform1f(c.location,a.thickness);P.uniform1f(u.location,a.depth);mb=l.call(this,ba,a,0);P.uniform4f(ha.location,mb[0],mb[1],mb[2],mb[3]);P.uniform1f(Z.location,
a.dashLength);P.uniform1f(E.location,a.opacity);(Oa=a.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);$b=Oa._texture;P.uniform1i(B.location,$b.bind());(Ra=M.elements)?P.bindBuffer(34963,Ra.buffer.buffer):aa.currentVAO&&(Ra=N.getElements(aa.currentVAO.elements))&&P.bindBuffer(34963,Ra.buffer.buffer);vb=a.count;0<vb?Ra?F.drawElementsInstancedANGLE(5,4,Ra.type,0<<(Ra.type-5121>>1),vb):F.drawArraysInstancedANGLE(5,0,4,vb):0>vb&&(Ra?P.drawElements(5,4,Ra.type,0<<(Ra.type-5121>>1)):P.drawArrays(5,
0,4));S.dirty=!0;aa.setVAO(null);ba.viewportWidth=p;ba.viewportHeight=V;da&&(z.cpuTime+=performance.now()-sa);T&&W.destroyStream(Q);rd&&W.destroyStream(Lc);gd&&W.destroyStream(bd);Va&&W.destroyStream(Ic);pb&&W.destroyStream(bc);$b.unbind()},scope:function(a,c,d){var e,k,m,n,l,J,v,la,u,q,ta,Qa,B,C,Y,dc,N,ea,fa,D,K,P,E,va,O,aa,R,L,Q,ja,U,Ya,Z,Aa,t,qa,Fa,Da,Gb,na,ma,G,ia,ha,Ca,Yb,ua,Ba,ga,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,
gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe;e=a.viewport;k=e.x|0;m=e.y|0;n="width"in e?e.width|0:ba.framebufferWidth-k;l="height"in e?e.height|
0:ba.framebufferHeight-m;J=ba.viewportWidth;ba.viewportWidth=n;v=ba.viewportHeight;ba.viewportHeight=l;la=H[0];H[0]=k;u=H[1];H[1]=m;q=H[2];H[2]=n;ta=H[3];H[3]=l;Qa=V[0];V[0]=0;B=V[1];V[1]=0;C=V[2];V[2]=0;Y=V[3];V[3]=0;dc=ra.blend_enable;ra.blend_enable=!0;N=sa[0];sa[0]=32774;ea=sa[1];sa[1]=32774;fa=ya[0];ya[0]=770;D=ya[1];ya[1]=771;K=ya[2];ya[2]=773;P=ya[3];ya[3]=1;E=b.call(this,ba,a,d);va=ra.depth_enable;ra.depth_enable=E;O=a.viewport;aa=O.x|0;R=O.y|0;L="width"in O?O.width|0:ba.framebufferWidth-
aa;Q="height"in O?O.height|0:ba.framebufferHeight-R;ja=y[0];y[0]=aa;U=y[1];y[1]=R;Ya=y[2];y[2]=L;Z=y[3];y[3]=Q;Aa=ra.scissor_enable;ra.scissor_enable=!0;t=ra.stencil_enable;ra.stencil_enable=!1;if(qa=S.profile)Fa=performance.now(),z.count++;Da=M.offset;M.offset=0;Gb=M.count;M.count=4;na=a.count;ma=M.instances;M.instances=na;G=M.primitive;M.primitive=5;ia=a.dashLength;ha=I[23];I[23]=ia;Ca=a.dashTexture;Yb=I[24];I[24]=Ca;ua=a.depth;Ba=I[22];I[22]=ua;ga=a.id;Dc=I[31];I[31]=ga;fc=a.miterLimit;Hc=I[32];
I[32]=fc;oc=da.call(this,ba,a,d);qc=I[33];I[33]=oc;mc=a.opacity;pc=I[10];I[10]=mc;fb=ba.pixelRatio;Vc=I[34];I[34]=fb;Rb=a.scale;cb=I[6];I[6]=Rb;Mb=a.scaleFract;ab=I[7];I[7]=Mb;ob=a.thickness;Va=I[21];I[21]=ob;Ic=a.translate;Hb=I[8];I[8]=Ic;Ib=a.translateFract;rc=I[9];I[9]=Ib;Nb=x.call(this,ba,a,d);kb=I[3];I[3]=Nb;pa.buffer=a.positionBuffer;Fb=!1;Cb=null;xb=0;ib=!1;Ob=Zb=0;rb=1;Ta=0;Pb=5126;qb=jb=bc=pb=0;xa(pa)?(Fb=!0,Cb=W.createStream(34962,pa),Pb=Cb.dtype):(Cb=W.getBuffer(pa))?Pb=Cb.dtype:"constant"in
pa?(rb=2,"number"===typeof pa.constant?(bc=pa.constant,jb=qb=pb=0):(bc=0<pa.constant.length?pa.constant[0]:0,jb=1<pa.constant.length?pa.constant[1]:0,qb=2<pa.constant.length?pa.constant[2]:0,pb=3<pa.constant.length?pa.constant[3]:0)):(Cb=xa(pa.buffer)?W.createStream(34962,pa.buffer):W.getBuffer(pa.buffer),Pb="type"in pa?Ga[pa.type]:Cb.dtype,ib=!!pa.normalized,Ob=pa.size|0,Zb=pa.offset|0,Ta=pa.stride|0,xb=pa.divisor|0);Ja=F.buffer;F.buffer=Cb;sb=F.divisor;F.divisor=xb;La=F.normalized;F.normalized=
ib;eb=F.offset;F.offset=Zb;gb=F.size;F.size=Ob;Na=F.state;F.state=rb;lb=F.stride;F.stride=Ta;Wa=F.type;F.type=Pb;ub=F.w;F.w=pb;tb=F.x;F.x=bc;Pa=F.y;F.y=jb;Cc=F.z;F.z=qb;za.buffer=a.positionFractBuffer;Sa=!1;Jb=null;Db=0;Ma=!1;Za=Ld=0;Kb=1;Lb=0;mb=5126;vb=Ra=$b=Oa=0;xa(za)?(Sa=!0,Jb=W.createStream(34962,za),mb=Jb.dtype):(Jb=W.getBuffer(za))?mb=Jb.dtype:"constant"in za?(Kb=2,"number"===typeof za.constant?($b=za.constant,Ra=vb=Oa=0):($b=0<za.constant.length?za.constant[0]:0,Ra=1<za.constant.length?za.constant[1]:
0,vb=2<za.constant.length?za.constant[2]:0,Oa=3<za.constant.length?za.constant[3]:0)):(Jb=xa(za.buffer)?W.createStream(34962,za.buffer):W.getBuffer(za.buffer),mb="type"in za?Ga[za.type]:Jb.dtype,Ma=!!za.normalized,Za=za.size|0,Ld=za.offset|0,Lb=za.stride|0,Db=za.divisor|0);wb=T.buffer;T.buffer=Jb;Ua=T.divisor;T.divisor=Db;nb=T.normalized;T.normalized=Ma;gc=T.offset;T.offset=Ld;Ac=T.size;T.size=Za;vc=T.state;T.state=Kb;bb=T.stride;T.stride=Lb;jc=T.type;T.type=mb;Sc=T.w;T.w=Oa;Xa=T.x;T.x=$b;Mc=T.y;
T.y=Ra;zb=T.z;T.z=vb;Ea.buffer=a.positionBuffer;$a=!1;Vb=null;tc=0;Wb=!1;Kc=Qb=0;Sb=1;qd=0;Ec=5126;td=Xc=Nc=Hd=0;xa(Ea)?($a=!0,Vb=W.createStream(34962,Ea),Ec=Vb.dtype):(Vb=W.getBuffer(Ea))?Ec=Vb.dtype:"constant"in Ea?(Sb=2,"number"===typeof Ea.constant?(Nc=Ea.constant,Xc=td=Hd=0):(Nc=0<Ea.constant.length?Ea.constant[0]:0,Xc=1<Ea.constant.length?Ea.constant[1]:0,td=2<Ea.constant.length?Ea.constant[2]:0,Hd=3<Ea.constant.length?Ea.constant[3]:0)):(Vb=xa(Ea.buffer)?W.createStream(34962,Ea.buffer):W.getBuffer(Ea.buffer),
Ec="type"in Ea?Ga[Ea.type]:Vb.dtype,Wb=!!Ea.normalized,Kc=Ea.size|0,Qb=Ea.offset|0,qd=Ea.stride|0,tc=Ea.divisor|0);nc=A.buffer;A.buffer=Vb;wc=A.divisor;A.divisor=tc;hc=A.normalized;A.normalized=Wb;db=A.offset;A.offset=Qb;sc=A.size;A.size=Kc;Ub=A.state;A.state=Sb;Xb=A.stride;A.stride=qd;ec=A.type;A.type=Ec;ic=A.w;A.w=Hd;yc=A.x;A.x=Nc;Bc=A.y;A.y=Xc;cd=A.z;A.z=td;ka.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Tc=0;Yc=!1;dd=md=0;Zc=1;kc=0;cc=5126;zc=ed=Wc=$c=0;xa(ka)?(Qc=!0,Rc=W.createStream(34962,ka),
cc=Rc.dtype):(Rc=W.getBuffer(ka))?cc=Rc.dtype:"constant"in ka?(Zc=2,"number"===typeof ka.constant?(Wc=ka.constant,ed=zc=$c=0):(Wc=0<ka.constant.length?ka.constant[0]:0,ed=1<ka.constant.length?ka.constant[1]:0,zc=2<ka.constant.length?ka.constant[2]:0,$c=3<ka.constant.length?ka.constant[3]:0)):(Rc=xa(ka.buffer)?W.createStream(34962,ka.buffer):W.getBuffer(ka.buffer),cc="type"in ka?Ga[ka.type]:Rc.dtype,Yc=!!ka.normalized,dd=ka.size|0,md=ka.offset|0,kc=ka.stride|0,Tc=ka.divisor|0);id=h.buffer;h.buffer=
Rc;ud=h.divisor;h.divisor=Tc;xe=h.normalized;h.normalized=Yc;Ce=h.offset;h.offset=md;jd=h.size;h.size=dd;De=h.state;h.state=Zc;Od=h.stride;h.stride=kc;pe=h.type;h.type=cc;be=h.w;h.w=$c;Pd=h.x;h.x=Wc;Id=h.y;h.y=ed;Fd=h.z;h.z=zc;X.buffer=a.colorBuffer;od=!1;Uc=null;vd=0;sd=!1;wd=kd=0;Bd=1;Dd=0;je=5126;ke=le=te=re=0;xa(X)?(od=!0,Uc=W.createStream(34962,X),je=Uc.dtype):(Uc=W.getBuffer(X))?je=Uc.dtype:"constant"in X?(Bd=2,"number"===typeof X.constant?(te=X.constant,le=ke=re=0):(te=0<X.constant.length?
X.constant[0]:0,le=1<X.constant.length?X.constant[1]:0,ke=2<X.constant.length?X.constant[2]:0,re=3<X.constant.length?X.constant[3]:0)):(Uc=xa(X.buffer)?W.createStream(34962,X.buffer):W.getBuffer(X.buffer),je="type"in X?Ga[X.type]:Uc.dtype,sd=!!X.normalized,wd=X.size|0,kd=X.offset|0,Dd=X.stride|0,vd=X.divisor|0);ge=r.buffer;r.buffer=Uc;ue=r.divisor;r.divisor=vd;ce=r.normalized;r.normalized=sd;me=r.offset;r.offset=kd;Oc=r.size;r.size=wd;hd=r.state;r.state=Bd;ve=r.stride;r.stride=Dd;qe=r.type;r.type=
je;Kd=r.w;r.w=re;Qd=r.x;r.x=te;Rd=r.y;r.y=le;Sd=r.z;r.z=ke;ne=oa.buffer;oa.buffer=f;ze=oa.divisor;oa.divisor=0;Ee=oa.normalized;oa.normalized=!1;se=oa.offset;oa.offset=0;Te=oa.size;oa.size=0;Ue=oa.state;oa.state=1;Pe=oa.stride;oa.stride=8;we=oa.type;oa.type=5126;He=oa.w;oa.w=0;Je=oa.x;oa.x=0;Ke=oa.y;oa.y=0;Le=oa.z;oa.z=0;Ie=p.buffer;p.buffer=g;Md=p.divisor;p.divisor=0;Yd=p.normalized;p.normalized=!1;ae=p.offset;p.offset=4;de=p.size;p.size=0;Me=p.state;p.state=1;Gd=p.stride;p.stride=8;Td=p.type;p.type=
5126;Fe=p.w;p.w=0;Ne=p.x;p.x=0;cf=p.y;p.y=0;bf=p.z;p.z=0;Ve=w.vert;w.vert=20;Qe=w.frag;w.frag=19;S.dirty=!0;c(ba,a,d);ba.viewportWidth=J;ba.viewportHeight=v;H[0]=la;H[1]=u;H[2]=q;H[3]=ta;V[0]=Qa;V[1]=B;V[2]=C;V[3]=Y;ra.blend_enable=dc;sa[0]=N;sa[1]=ea;ya[0]=fa;ya[1]=D;ya[2]=K;ya[3]=P;ra.depth_enable=va;y[0]=ja;y[1]=U;y[2]=Ya;y[3]=Z;ra.scissor_enable=Aa;ra.stencil_enable=t;qa&&(z.cpuTime+=performance.now()-Fa);M.offset=Da;M.count=Gb;M.instances=ma;M.primitive=G;I[23]=ha;I[24]=Yb;I[22]=Ba;I[31]=Dc;
I[32]=Hc;I[33]=qc;I[10]=pc;I[34]=Vc;I[6]=cb;I[7]=ab;I[21]=Va;I[8]=Hb;I[9]=rc;I[3]=kb;Fb&&W.destroyStream(Cb);F.buffer=Ja;F.divisor=sb;F.normalized=La;F.offset=eb;F.size=gb;F.state=Na;F.stride=lb;F.type=Wa;F.w=ub;F.x=tb;F.y=Pa;F.z=Cc;Sa&&W.destroyStream(Jb);T.buffer=wb;T.divisor=Ua;T.normalized=nb;T.offset=gc;T.size=Ac;T.state=vc;T.stride=bb;T.type=jc;T.w=Sc;T.x=Xa;T.y=Mc;T.z=zb;$a&&W.destroyStream(Vb);A.buffer=nc;A.divisor=wc;A.normalized=hc;A.offset=db;A.size=sc;A.state=Ub;A.stride=Xb;A.type=ec;
A.w=ic;A.x=yc;A.y=Bc;A.z=cd;Qc&&W.destroyStream(Rc);h.buffer=id;h.divisor=ud;h.normalized=xe;h.offset=Ce;h.size=jd;h.state=De;h.stride=Od;h.type=pe;h.w=be;h.x=Pd;h.y=Id;h.z=Fd;od&&W.destroyStream(Uc);r.buffer=ge;r.divisor=ue;r.normalized=ce;r.offset=me;r.size=Oc;r.state=hd;r.stride=ve;r.type=qe;r.w=Kd;r.x=Qd;r.y=Rd;r.z=Sd;oa.buffer=ne;oa.divisor=ze;oa.normalized=Ee;oa.offset=se;oa.size=Te;oa.state=Ue;oa.stride=Pe;oa.type=we;oa.w=He;oa.x=Je;oa.y=Ke;oa.z=Le;p.buffer=Ie;p.divisor=Md;p.normalized=Yd;
p.offset=ae;p.size=de;p.state=Me;p.stride=Gd;p.type=Td;p.w=Fe;p.x=Ne;p.y=cf;p.z=bf;w.vert=Ve;w.frag=Qe;S.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,z,v,Y,f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q,L,t,e,C,U,k,Z,B,u,G,D,E,d,R,c,ia,K,ha,Ba,W,ba,S){var M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea,ka,X,wa,Ha,Ka,hb,
ca;M=a.attributes;N=a.buffer;m=a.context;O=a.current;P=a.draw;xa=a.elements;ra=a.extensions;w=a.framebuffer;I=a.gl;aa=a.isBufferArgs;V=a.next;na=a.shader;sa=a.uniforms;Ca=a.vao;ya=V.blend_color;ea=O.blend_color;Da=V.blend_equation;ja=O.blend_equation;qa=V.blend_func;Aa=O.blend_func;Qa=V.colorMask;la=O.colorMask;dc=V.depth_range;Ya=O.depth_range;y=V.polygonOffset_offset;n=O.polygonOffset_offset;J=V.sample_coverage;va=O.sample_coverage;Fa=V.scissor_box;Yb=O.scissor_box;Gb=V.stencil_func;fa=O.stencil_func;
H=V.stencil_opBack;ta=O.stencil_opBack;Ga=V.stencil_opFront;pa=O.stencil_opFront;za=V.viewport;Ea=O.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={divisor:1,offset:0,stride:4};wa={divisor:1,offset:8,stride:8};Ha={divisor:1,offset:4,stride:4};Ka={divisor:1,offset:16,stride:8};hb={divisor:1,offset:24,stride:8};ca={divisor:1,offset:0,stride:8};return{batch:function(a,b){var l,v,q,p,Y,h;l=w.next;l!==w.cur&&(l?I.bindFramebuffer(36160,l.framebuffer):
I.bindFramebuffer(36160,null),w.cur=l);if(O.dirty){var r,x,A,za,ya,da,sa,Q,F,T,oa,qa,Fa,Da,na,ie,Jd,ga,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb;r=V.dither;r!==O.dither&&(r?I.enable(3024):I.disable(3024),O.dither=r);x=V.depth_func;x!==O.depth_func&&(I.depthFunc(x),O.depth_func=x);A=dc[0];za=dc[1];if(A!==Ya[0]||za!==Ya[1])I.depthRange(A,za),Ya[0]=A,Ya[1]=za;ya=V.depth_mask;ya!==O.depth_mask&&(I.depthMask(ya),O.depth_mask=ya);da=Qa[0];sa=Qa[1];Q=Qa[2];F=Qa[3];if(da!==la[0]||sa!==la[1]||Q!==la[2]||F!==la[3])I.colorMask(da,
sa,Q,F),la[0]=da,la[1]=sa,la[2]=Q,la[3]=F;T=V.frontFace;T!==O.frontFace&&(I.frontFace(T),O.frontFace=T);oa=V.lineWidth;oa!==O.lineWidth&&(I.lineWidth(oa),O.lineWidth=oa);qa=V.polygonOffset_enable;qa!==O.polygonOffset_enable&&(qa?I.enable(32823):I.disable(32823),O.polygonOffset_enable=qa);Fa=y[0];Da=y[1];if(Fa!==n[0]||Da!==n[1])I.polygonOffset(Fa,Da),n[0]=Fa,n[1]=Da;na=V.sample_alpha;na!==O.sample_alpha&&(na?I.enable(32926):I.disable(32926),O.sample_alpha=na);ie=V.sample_enable;ie!==O.sample_enable&&
(ie?I.enable(32928):I.disable(32928),O.sample_enable=ie);Jd=J[0];ga=J[1];if(Jd!==va[0]||ga!==va[1])I.sampleCoverage(Jd,ga),va[0]=Jd,va[1]=ga;Ad=V.stencil_mask;Ad!==O.stencil_mask&&(I.stencilMask(Ad),O.stencil_mask=Ad);nd=Gb[0];ad=Gb[1];rd=Gb[2];if(nd!==fa[0]||ad!==fa[1]||rd!==fa[2])I.stencilFunc(nd,ad,rd),fa[0]=nd,fa[1]=ad,fa[2]=rd;Lc=Ga[0];pd=Ga[1];Fc=Ga[2];fd=Ga[3];if(Lc!==pa[0]||pd!==pa[1]||Fc!==pa[2]||fd!==pa[3])I.stencilOpSeparate(Lc,pd,Fc,fd),pa[0]=Lc,pa[1]=pd,pa[2]=Fc,pa[3]=fd;Pc=H[0];ld=H[1];
Ab=H[2];Eb=H[3];if(Pc!==ta[0]||ld!==ta[1]||Ab!==ta[2]||Eb!==ta[3])I.stencilOpSeparate(Pc,ld,Ab,Eb),ta[0]=Pc,ta[1]=ld,ta[2]=Ab,ta[3]=Eb}I.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;I.enable(3042);O.blend_enable=!0;I.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;I.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;I.enable(2884);O.cull_enable=!0;I.cullFace(1029);O.cull_face=1029;I.enable(3089);O.scissor_enable=!0;I.disable(2960);O.stencil_enable=!1;if(v=O.profile)q=
performance.now(),z.count+=b;I.useProgram(L.program);p=ra.angle_instanced_arrays;var uc,yb,xc,Bb,Jc;Ca.setVAO(null);uc=E.location;yb=M[uc];yb.buffer||I.enableVertexAttribArray(uc);if(5126!==yb.type||1!==yb.size||yb.buffer!==f||!1!==yb.normalized||0!==yb.offset||8!==yb.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(uc,1,5126,!1,8,0),yb.type=5126,yb.size=1,yb.buffer=f,yb.normalized=!1,yb.offset=0,yb.stride=8;0!==yb.divisor&&(p.vertexAttribDivisorANGLE(uc,0),yb.divisor=0);xc=d.location;Bb=
M[xc];Bb.buffer||I.enableVertexAttribArray(xc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==g||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)I.bindBuffer(34962,g.buffer),I.vertexAttribPointer(xc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=g,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&(p.vertexAttribDivisorANGLE(xc,0),Bb.divisor=0);(Jc=P.elements)?I.bindBuffer(34963,Jc.buffer.buffer):Ca.currentVAO&&(Jc=xa.getElements(Ca.currentVAO.elements))&&I.bindBuffer(34963,Jc.buffer.buffer);
for(Y=0;Y<b;++Y){h=a[Y];var lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc;lc=h.viewport;Gc=lc.x|0;gd=lc.y|0;bd="width"in
lc?lc.width|0:m.framebufferWidth-Gc;Dc="height"in lc?lc.height|0:m.framebufferHeight-gd;fc=m.viewportWidth;m.viewportWidth=bd;Hc=m.viewportHeight;m.viewportHeight=Dc;I.viewport(Gc,gd,bd,Dc);Ea[0]=Gc;Ea[1]=gd;Ea[2]=bd;Ea[3]=Dc;(oc=t.call(this,m,h,Y))?I.enable(2929):I.disable(2929);O.depth_enable=oc;qc=h.viewport;mc=qc.x|0;pc=qc.y|0;fb="width"in qc?qc.width|0:m.framebufferWidth-mc;Vc="height"in qc?qc.height|0:m.framebufferHeight-pc;I.scissor(mc,pc,fb,Vc);Yb[0]=mc;Yb[1]=pc;Yb[2]=fb;Yb[3]=Vc;wa.buffer=
h.positionBuffer;Rb=!1;cb=null;Mb=0;ab=!1;Va=ob=0;Ic=1;Hb=0;Ib=5126;Fb=kb=Nb=rc=0;aa(wa)?(Rb=!0,cb=N.createStream(34962,wa),Ib=cb.dtype):(cb=N.getBuffer(wa))?Ib=cb.dtype:"constant"in wa?(Ic=2,"number"===typeof wa.constant?(Nb=wa.constant,kb=Fb=rc=0):(Nb=0<wa.constant.length?wa.constant[0]:0,kb=1<wa.constant.length?wa.constant[1]:0,Fb=2<wa.constant.length?wa.constant[2]:0,rc=3<wa.constant.length?wa.constant[3]:0)):(cb=aa(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),Ib="type"in
wa?ka[wa.type]:cb.dtype,ab=!!wa.normalized,Va=wa.size|0,ob=wa.offset|0,Hb=wa.stride|0,Mb=wa.divisor|0);Cb=k.location;xb=M[Cb];if(1===Ic){xb.buffer||I.enableVertexAttribArray(Cb);ib=Va||2;if(xb.type!==Ib||xb.size!==ib||xb.buffer!==cb||xb.normalized!==ab||xb.offset!==ob||xb.stride!==Hb)I.bindBuffer(34962,cb.buffer),I.vertexAttribPointer(Cb,ib,Ib,ab,Hb,ob),xb.type=Ib,xb.size=ib,xb.buffer=cb,xb.normalized=ab,xb.offset=ob,xb.stride=Hb;xb.divisor!==Mb&&(p.vertexAttribDivisorANGLE(Cb,Mb),xb.divisor=Mb)}else if(xb.buffer&&
(I.disableVertexAttribArray(Cb),xb.buffer=null),xb.x!==Nb||xb.y!==kb||xb.z!==Fb||xb.w!==rc)I.vertexAttrib4f(Cb,Nb,kb,Fb,rc),xb.x=Nb,xb.y=kb,xb.z=Fb,xb.w=rc;Ka.buffer=h.positionBuffer;Zb=!1;Ob=null;rb=0;Ta=!1;pb=Pb=0;bc=1;jb=0;qb=5126;eb=La=sb=Ja=0;aa(Ka)?(Zb=!0,Ob=N.createStream(34962,Ka),qb=Ob.dtype):(Ob=N.getBuffer(Ka))?qb=Ob.dtype:"constant"in Ka?(bc=2,"number"===typeof Ka.constant?(sb=Ka.constant,La=eb=Ja=0):(sb=0<Ka.constant.length?Ka.constant[0]:0,La=1<Ka.constant.length?Ka.constant[1]:0,eb=
2<Ka.constant.length?Ka.constant[2]:0,Ja=3<Ka.constant.length?Ka.constant[3]:0)):(Ob=aa(Ka.buffer)?N.createStream(34962,Ka.buffer):N.getBuffer(Ka.buffer),qb="type"in Ka?ka[Ka.type]:Ob.dtype,Ta=!!Ka.normalized,pb=Ka.size|0,Pb=Ka.offset|0,jb=Ka.stride|0,rb=Ka.divisor|0);gb=B.location;Na=M[gb];if(1===bc){Na.buffer||I.enableVertexAttribArray(gb);lb=pb||2;if(Na.type!==qb||Na.size!==lb||Na.buffer!==Ob||Na.normalized!==Ta||Na.offset!==Pb||Na.stride!==jb)I.bindBuffer(34962,Ob.buffer),I.vertexAttribPointer(gb,
lb,qb,Ta,jb,Pb),Na.type=qb,Na.size=lb,Na.buffer=Ob,Na.normalized=Ta,Na.offset=Pb,Na.stride=jb;Na.divisor!==rb&&(p.vertexAttribDivisorANGLE(gb,rb),Na.divisor=rb)}else if(Na.buffer&&(I.disableVertexAttribArray(gb),Na.buffer=null),Na.x!==sb||Na.y!==La||Na.z!==eb||Na.w!==Ja)I.vertexAttrib4f(gb,sb,La,eb,Ja),Na.x=sb,Na.y=La,Na.z=eb,Na.w=Ja;hb.buffer=h.positionBuffer;Wa=!1;ub=null;tb=0;Pa=!1;Sa=Cc=0;Jb=1;Db=0;Ma=5126;Lb=Kb=Za=Ld=0;aa(hb)?(Wa=!0,ub=N.createStream(34962,hb),Ma=ub.dtype):(ub=N.getBuffer(hb))?
Ma=ub.dtype:"constant"in hb?(Jb=2,"number"===typeof hb.constant?(Za=hb.constant,Kb=Lb=Ld=0):(Za=0<hb.constant.length?hb.constant[0]:0,Kb=1<hb.constant.length?hb.constant[1]:0,Lb=2<hb.constant.length?hb.constant[2]:0,Ld=3<hb.constant.length?hb.constant[3]:0)):(ub=aa(hb.buffer)?N.createStream(34962,hb.buffer):N.getBuffer(hb.buffer),Ma="type"in hb?ka[hb.type]:ub.dtype,Pa=!!hb.normalized,Sa=hb.size|0,Cc=hb.offset|0,Db=hb.stride|0,tb=hb.divisor|0);mb=ia.location;Oa=M[mb];if(1===Jb){Oa.buffer||I.enableVertexAttribArray(mb);
$b=Sa||2;if(Oa.type!==Ma||Oa.size!==$b||Oa.buffer!==ub||Oa.normalized!==Pa||Oa.offset!==Cc||Oa.stride!==Db)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(mb,$b,Ma,Pa,Db,Cc),Oa.type=Ma,Oa.size=$b,Oa.buffer=ub,Oa.normalized=Pa,Oa.offset=Cc,Oa.stride=Db;Oa.divisor!==tb&&(p.vertexAttribDivisorANGLE(mb,tb),Oa.divisor=tb)}else if(Oa.buffer&&(I.disableVertexAttribArray(mb),Oa.buffer=null),Oa.x!==Za||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==Ld)I.vertexAttrib4f(mb,Za,Kb,Lb,Ld),Oa.x=Za,Oa.y=Kb,Oa.z=Lb,Oa.w=Ld;ca.buffer=
h.positionBuffer;Ra=!1;vb=null;wb=0;Ua=!1;gc=nb=0;Ac=1;vc=0;bb=5126;Mc=Xa=Sc=jc=0;aa(ca)?(Ra=!0,vb=N.createStream(34962,ca),bb=vb.dtype):(vb=N.getBuffer(ca))?bb=vb.dtype:"constant"in ca?(Ac=2,"number"===typeof ca.constant?(Sc=ca.constant,Xa=Mc=jc=0):(Sc=0<ca.constant.length?ca.constant[0]:0,Xa=1<ca.constant.length?ca.constant[1]:0,Mc=2<ca.constant.length?ca.constant[2]:0,jc=3<ca.constant.length?ca.constant[3]:0)):(vb=aa(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),bb="type"in
ca?ka[ca.type]:vb.dtype,Ua=!!ca.normalized,gc=ca.size|0,nb=ca.offset|0,vc=ca.stride|0,wb=ca.divisor|0);zb=ha.location;$a=M[zb];if(1===Ac){$a.buffer||I.enableVertexAttribArray(zb);Vb=gc||2;if($a.type!==bb||$a.size!==Vb||$a.buffer!==vb||$a.normalized!==Ua||$a.offset!==nb||$a.stride!==vc)I.bindBuffer(34962,vb.buffer),I.vertexAttribPointer(zb,Vb,bb,Ua,vc,nb),$a.type=bb,$a.size=Vb,$a.buffer=vb,$a.normalized=Ua,$a.offset=nb,$a.stride=vc;$a.divisor!==wb&&(p.vertexAttribDivisorANGLE(zb,wb),$a.divisor=wb)}else if($a.buffer&&
(I.disableVertexAttribArray(zb),$a.buffer=null),$a.x!==Sc||$a.y!==Xa||$a.z!==Mc||$a.w!==jc)I.vertexAttrib4f(zb,Sc,Xa,Mc,jc),$a.x=Sc,$a.y=Xa,$a.z=Mc,$a.w=jc;X.buffer=h.colorBuffer;tc=!1;Wb=null;Qb=0;Kc=!1;qd=Sb=0;Ec=1;Hd=0;Nc=5126;wc=nc=td=Xc=0;aa(X)?(tc=!0,Wb=N.createStream(34962,X),Nc=Wb.dtype):(Wb=N.getBuffer(X))?Nc=Wb.dtype:"constant"in X?(Ec=2,"number"===typeof X.constant?(td=X.constant,nc=wc=Xc=0):(td=0<X.constant.length?X.constant[0]:0,nc=1<X.constant.length?X.constant[1]:0,wc=2<X.constant.length?
X.constant[2]:0,Xc=3<X.constant.length?X.constant[3]:0)):(Wb=aa(X.buffer)?N.createStream(34962,X.buffer):N.getBuffer(X.buffer),Nc="type"in X?ka[X.type]:Wb.dtype,Kc=!!X.normalized,qd=X.size|0,Sb=X.offset|0,Hd=X.stride|0,Qb=X.divisor|0);hc=U.location;db=M[hc];if(1===Ec){db.buffer||I.enableVertexAttribArray(hc);sc=qd||4;if(db.type!==Nc||db.size!==sc||db.buffer!==Wb||db.normalized!==Kc||db.offset!==Sb||db.stride!==Hd)I.bindBuffer(34962,Wb.buffer),I.vertexAttribPointer(hc,sc,Nc,Kc,Hd,Sb),db.type=Nc,db.size=
sc,db.buffer=Wb,db.normalized=Kc,db.offset=Sb,db.stride=Hd;db.divisor!==Qb&&(p.vertexAttribDivisorANGLE(hc,Qb),db.divisor=Qb)}else if(db.buffer&&(I.disableVertexAttribArray(hc),db.buffer=null),db.x!==td||db.y!==nc||db.z!==wc||db.w!==Xc)I.vertexAttrib4f(hc,td,nc,wc,Xc),db.x=td,db.y=nc,db.z=wc,db.w=Xc;Ha.buffer=h.colorBuffer;Ub=!1;Xb=null;ec=0;ic=!1;Bc=yc=0;cd=1;Qc=0;Rc=5126;dd=md=Yc=Tc=0;aa(Ha)?(Ub=!0,Xb=N.createStream(34962,Ha),Rc=Xb.dtype):(Xb=N.getBuffer(Ha))?Rc=Xb.dtype:"constant"in Ha?(cd=2,"number"===
typeof Ha.constant?(Yc=Ha.constant,md=dd=Tc=0):(Yc=0<Ha.constant.length?Ha.constant[0]:0,md=1<Ha.constant.length?Ha.constant[1]:0,dd=2<Ha.constant.length?Ha.constant[2]:0,Tc=3<Ha.constant.length?Ha.constant[3]:0)):(Xb=aa(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),Rc="type"in Ha?ka[Ha.type]:Xb.dtype,ic=!!Ha.normalized,Bc=Ha.size|0,yc=Ha.offset|0,Qc=Ha.stride|0,ec=Ha.divisor|0);Zc=Z.location;kc=M[Zc];if(1===cd){kc.buffer||I.enableVertexAttribArray(Zc);cc=Bc||4;if(kc.type!==Rc||
kc.size!==cc||kc.buffer!==Xb||kc.normalized!==ic||kc.offset!==yc||kc.stride!==Qc)I.bindBuffer(34962,Xb.buffer),I.vertexAttribPointer(Zc,cc,Rc,ic,Qc,yc),kc.type=Rc,kc.size=cc,kc.buffer=Xb,kc.normalized=ic,kc.offset=yc,kc.stride=Qc;kc.divisor!==ec&&(p.vertexAttribDivisorANGLE(Zc,ec),kc.divisor=ec)}else if(kc.buffer&&(I.disableVertexAttribArray(Zc),kc.buffer=null),kc.x!==Yc||kc.y!==md||kc.z!==dd||kc.w!==Tc)I.vertexAttrib4f(Zc,Yc,md,dd,Tc),kc.x=Yc,kc.y=md,kc.z=dd,kc.w=Tc;$c=h.scale;Wc=$c[0];zc=$c[1];
Y&&ed===Wc&&id===zc||(ed=Wc,id=zc,I.uniform2f(Ba.location,Wc,zc));ud=h.translate;xe=ud[0];jd=ud[1];Y&&Ce===xe&&De===jd||(Ce=xe,De=jd,I.uniform2f(ba.location,xe,jd));Od=h.thickness;Y&&pe===Od||(pe=Od,I.uniform1f(W.location,Od));be=h.depth;Y&&Pd===be||(Pd=be,I.uniform1f(D.location,be));Id=e.call(this,m,h,Y);Fd=Id[0];Uc=Id[1];sd=Id[2];wd=Id[3];Y&&od===Fd&&vd===Uc&&kd===sd&&Bd===wd||(od=Fd,vd=Uc,kd=sd,Bd=wd,I.uniform4f(S.location,Fd,Uc,sd,wd));Dd=h.miterLimit;Y&&je===Dd||(je=Dd,I.uniform1f(R.location,
Dd));re=C.call(this,m,h,Y);Y&&te===re||(te=re,I.uniform1f(c.location,re));le=h.dashLength;Y&&ke===le||(ke=le,I.uniform1f(u.location,le));ge=h.opacity;Y&&ue===ge||(ue=ge,I.uniform1f(K.location,ge));(ce=h.dashTexture)&&"framebuffer"===ce._reglType&&(ce=ce.color[0]);me=ce._texture;I.uniform1i(G.location,me.bind());Oc=h.count;0<Oc?Jc?p.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):p.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?I.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):I.drawArrays(5,
0,4));m.viewportWidth=fc;m.viewportHeight=Hc;Rb&&N.destroyStream(cb);Zb&&N.destroyStream(Ob);Wa&&N.destroyStream(ub);Ra&&N.destroyStream(vb);tc&&N.destroyStream(Wb);Ub&&N.destroyStream(Xb);me.unbind()}O.dirty=!0;Ca.setVAO(null);v&&(z.cpuTime+=performance.now()-q)},draw:function(a){var e,q,p,C,h,r,x,A,za,L,ya,da,sa,Q,F,T,oa,t,qa,Fa,Da,na,ma,Jd,ga,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,
pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd;e=w.next;e!==w.cur&&(e?I.bindFramebuffer(36160,e.framebuffer):I.bindFramebuffer(36160,null),w.cur=e);if(O.dirty){var Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc;Ec=V.dither;Ec!==O.dither&&(Ec?I.enable(3024):I.disable(3024),O.dither=Ec);Hd=V.depth_func;Hd!==O.depth_func&&(I.depthFunc(Hd),O.depth_func=Hd);Nc=
dc[0];Xc=dc[1];if(Nc!==Ya[0]||Xc!==Ya[1])I.depthRange(Nc,Xc),Ya[0]=Nc,Ya[1]=Xc;td=V.depth_mask;td!==O.depth_mask&&(I.depthMask(td),O.depth_mask=td);nc=Qa[0];wc=Qa[1];hc=Qa[2];db=Qa[3];if(nc!==la[0]||wc!==la[1]||hc!==la[2]||db!==la[3])I.colorMask(nc,wc,hc,db),la[0]=nc,la[1]=wc,la[2]=hc,la[3]=db;sc=V.frontFace;sc!==O.frontFace&&(I.frontFace(sc),O.frontFace=sc);Ub=V.lineWidth;Ub!==O.lineWidth&&(I.lineWidth(Ub),O.lineWidth=Ub);Xb=V.polygonOffset_enable;Xb!==O.polygonOffset_enable&&(Xb?I.enable(32823):
I.disable(32823),O.polygonOffset_enable=Xb);ec=y[0];ic=y[1];if(ec!==n[0]||ic!==n[1])I.polygonOffset(ec,ic),n[0]=ec,n[1]=ic;yc=V.sample_alpha;yc!==O.sample_alpha&&(yc?I.enable(32926):I.disable(32926),O.sample_alpha=yc);Bc=V.sample_enable;Bc!==O.sample_enable&&(Bc?I.enable(32928):I.disable(32928),O.sample_enable=Bc);cd=J[0];Qc=J[1];if(cd!==va[0]||Qc!==va[1])I.sampleCoverage(cd,Qc),va[0]=cd,va[1]=Qc;Rc=V.stencil_mask;Rc!==O.stencil_mask&&(I.stencilMask(Rc),O.stencil_mask=Rc);Tc=Gb[0];Yc=Gb[1];md=Gb[2];
if(Tc!==fa[0]||Yc!==fa[1]||md!==fa[2])I.stencilFunc(Tc,Yc,md),fa[0]=Tc,fa[1]=Yc,fa[2]=md;dd=Ga[0];Zc=Ga[1];kc=Ga[2];cc=Ga[3];if(dd!==pa[0]||Zc!==pa[1]||kc!==pa[2]||cc!==pa[3])I.stencilOpSeparate(dd,Zc,kc,cc),pa[0]=dd,pa[1]=Zc,pa[2]=kc,pa[3]=cc;$c=H[0];Wc=H[1];ed=H[2];zc=H[3];if($c!==ta[0]||Wc!==ta[1]||ed!==ta[2]||zc!==ta[3])I.stencilOpSeparate($c,Wc,ed,zc),ta[0]=$c,ta[1]=Wc,ta[2]=ed,ta[3]=zc}q=a.viewport;p=q.x|0;C=q.y|0;h="width"in q?q.width|0:m.framebufferWidth-p;r="height"in q?q.height|0:m.framebufferHeight-
C;x=m.viewportWidth;m.viewportWidth=h;A=m.viewportHeight;m.viewportHeight=r;I.viewport(p,C,h,r);Ea[0]=p;Ea[1]=C;Ea[2]=h;Ea[3]=r;I.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;I.enable(3042);O.blend_enable=!0;I.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;I.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;I.enable(2884);O.cull_enable=!0;I.cullFace(1029);O.cull_face=1029;(za=v.call(this,m,a,0))?I.enable(2929):I.disable(2929);O.depth_enable=za;L=a.viewport;
ya=L.x|0;da=L.y|0;sa="width"in L?L.width|0:m.framebufferWidth-ya;Q="height"in L?L.height|0:m.framebufferHeight-da;I.scissor(ya,da,sa,Q);Yb[0]=ya;Yb[1]=da;Yb[2]=sa;Yb[3]=Q;I.enable(3089);O.scissor_enable=!0;I.disable(2960);O.stencil_enable=!1;if(F=O.profile)T=performance.now(),z.count++;I.useProgram(Y.program);oa=ra.angle_instanced_arrays;Ca.setVAO(null);wa.buffer=a.positionBuffer;t=!1;qa=null;Fa=0;Da=!1;ma=na=0;Jd=1;ga=0;Ad=5126;Lc=rd=ad=nd=0;aa(wa)?(t=!0,qa=N.createStream(34962,wa),Ad=qa.dtype):
(qa=N.getBuffer(wa))?Ad=qa.dtype:"constant"in wa?(Jd=2,"number"===typeof wa.constant?(ad=wa.constant,rd=Lc=nd=0):(ad=0<wa.constant.length?wa.constant[0]:0,rd=1<wa.constant.length?wa.constant[1]:0,Lc=2<wa.constant.length?wa.constant[2]:0,nd=3<wa.constant.length?wa.constant[3]:0)):(qa=aa(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),Ad="type"in wa?ka[wa.type]:qa.dtype,Da=!!wa.normalized,ma=wa.size|0,na=wa.offset|0,ga=wa.stride|0,Fa=wa.divisor|0);pd=k.location;Fc=M[pd];if(1===Jd){Fc.buffer||
I.enableVertexAttribArray(pd);fd=ma||2;if(Fc.type!==Ad||Fc.size!==fd||Fc.buffer!==qa||Fc.normalized!==Da||Fc.offset!==na||Fc.stride!==ga)I.bindBuffer(34962,qa.buffer),I.vertexAttribPointer(pd,fd,Ad,Da,ga,na),Fc.type=Ad,Fc.size=fd,Fc.buffer=qa,Fc.normalized=Da,Fc.offset=na,Fc.stride=ga;Fc.divisor!==Fa&&(oa.vertexAttribDivisorANGLE(pd,Fa),Fc.divisor=Fa)}else if(Fc.buffer&&(I.disableVertexAttribArray(pd),Fc.buffer=null),Fc.x!==ad||Fc.y!==rd||Fc.z!==Lc||Fc.w!==nd)I.vertexAttrib4f(pd,ad,rd,Lc,nd),Fc.x=
ad,Fc.y=rd,Fc.z=Lc,Fc.w=nd;Ka.buffer=a.positionBuffer;Pc=!1;ld=null;Ab=0;Eb=!1;yb=uc=0;xc=1;Bb=0;Jc=5126;bd=gd=Gc=lc=0;aa(Ka)?(Pc=!0,ld=N.createStream(34962,Ka),Jc=ld.dtype):(ld=N.getBuffer(Ka))?Jc=ld.dtype:"constant"in Ka?(xc=2,"number"===typeof Ka.constant?(Gc=Ka.constant,gd=bd=lc=0):(Gc=0<Ka.constant.length?Ka.constant[0]:0,gd=1<Ka.constant.length?Ka.constant[1]:0,bd=2<Ka.constant.length?Ka.constant[2]:0,lc=3<Ka.constant.length?Ka.constant[3]:0)):(ld=aa(Ka.buffer)?N.createStream(34962,Ka.buffer):
N.getBuffer(Ka.buffer),Jc="type"in Ka?ka[Ka.type]:ld.dtype,Eb=!!Ka.normalized,yb=Ka.size|0,uc=Ka.offset|0,Bb=Ka.stride|0,Ab=Ka.divisor|0);Dc=B.location;fc=M[Dc];if(1===xc){fc.buffer||I.enableVertexAttribArray(Dc);Hc=yb||2;if(fc.type!==Jc||fc.size!==Hc||fc.buffer!==ld||fc.normalized!==Eb||fc.offset!==uc||fc.stride!==Bb)I.bindBuffer(34962,ld.buffer),I.vertexAttribPointer(Dc,Hc,Jc,Eb,Bb,uc),fc.type=Jc,fc.size=Hc,fc.buffer=ld,fc.normalized=Eb,fc.offset=uc,fc.stride=Bb;fc.divisor!==Ab&&(oa.vertexAttribDivisorANGLE(Dc,
Ab),fc.divisor=Ab)}else if(fc.buffer&&(I.disableVertexAttribArray(Dc),fc.buffer=null),fc.x!==Gc||fc.y!==gd||fc.z!==bd||fc.w!==lc)I.vertexAttrib4f(Dc,Gc,gd,bd,lc),fc.x=Gc,fc.y=gd,fc.z=bd,fc.w=lc;hb.buffer=a.positionBuffer;oc=!1;qc=null;mc=0;pc=!1;Vc=fb=0;Rb=1;cb=0;Mb=5126;Ic=Va=ob=ab=0;aa(hb)?(oc=!0,qc=N.createStream(34962,hb),Mb=qc.dtype):(qc=N.getBuffer(hb))?Mb=qc.dtype:"constant"in hb?(Rb=2,"number"===typeof hb.constant?(ob=hb.constant,Va=Ic=ab=0):(ob=0<hb.constant.length?hb.constant[0]:0,Va=1<
hb.constant.length?hb.constant[1]:0,Ic=2<hb.constant.length?hb.constant[2]:0,ab=3<hb.constant.length?hb.constant[3]:0)):(qc=aa(hb.buffer)?N.createStream(34962,hb.buffer):N.getBuffer(hb.buffer),Mb="type"in hb?ka[hb.type]:qc.dtype,pc=!!hb.normalized,Vc=hb.size|0,fb=hb.offset|0,cb=hb.stride|0,mc=hb.divisor|0);Hb=ia.location;Ib=M[Hb];if(1===Rb){Ib.buffer||I.enableVertexAttribArray(Hb);rc=Vc||2;if(Ib.type!==Mb||Ib.size!==rc||Ib.buffer!==qc||Ib.normalized!==pc||Ib.offset!==fb||Ib.stride!==cb)I.bindBuffer(34962,
qc.buffer),I.vertexAttribPointer(Hb,rc,Mb,pc,cb,fb),Ib.type=Mb,Ib.size=rc,Ib.buffer=qc,Ib.normalized=pc,Ib.offset=fb,Ib.stride=cb;Ib.divisor!==mc&&(oa.vertexAttribDivisorANGLE(Hb,mc),Ib.divisor=mc)}else if(Ib.buffer&&(I.disableVertexAttribArray(Hb),Ib.buffer=null),Ib.x!==ob||Ib.y!==Va||Ib.z!==Ic||Ib.w!==ab)I.vertexAttrib4f(Hb,ob,Va,Ic,ab),Ib.x=ob,Ib.y=Va,Ib.z=Ic,Ib.w=ab;ca.buffer=a.positionBuffer;Nb=!1;kb=null;Fb=0;Cb=!1;ib=xb=0;Zb=1;Ob=0;rb=5126;bc=pb=Pb=Ta=0;aa(ca)?(Nb=!0,kb=N.createStream(34962,
ca),rb=kb.dtype):(kb=N.getBuffer(ca))?rb=kb.dtype:"constant"in ca?(Zb=2,"number"===typeof ca.constant?(Pb=ca.constant,pb=bc=Ta=0):(Pb=0<ca.constant.length?ca.constant[0]:0,pb=1<ca.constant.length?ca.constant[1]:0,bc=2<ca.constant.length?ca.constant[2]:0,Ta=3<ca.constant.length?ca.constant[3]:0)):(kb=aa(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),rb="type"in ca?ka[ca.type]:kb.dtype,Cb=!!ca.normalized,ib=ca.size|0,xb=ca.offset|0,Ob=ca.stride|0,Fb=ca.divisor|0);jb=ha.location;qb=
M[jb];if(1===Zb){qb.buffer||I.enableVertexAttribArray(jb);Ja=ib||2;if(qb.type!==rb||qb.size!==Ja||qb.buffer!==kb||qb.normalized!==Cb||qb.offset!==xb||qb.stride!==Ob)I.bindBuffer(34962,kb.buffer),I.vertexAttribPointer(jb,Ja,rb,Cb,Ob,xb),qb.type=rb,qb.size=Ja,qb.buffer=kb,qb.normalized=Cb,qb.offset=xb,qb.stride=Ob;qb.divisor!==Fb&&(oa.vertexAttribDivisorANGLE(jb,Fb),qb.divisor=Fb)}else if(qb.buffer&&(I.disableVertexAttribArray(jb),qb.buffer=null),qb.x!==Pb||qb.y!==pb||qb.z!==bc||qb.w!==Ta)I.vertexAttrib4f(jb,
Pb,pb,bc,Ta),qb.x=Pb,qb.y=pb,qb.z=bc,qb.w=Ta;X.buffer=a.colorBuffer;sb=!1;La=null;eb=0;gb=!1;lb=Na=0;Wa=1;ub=0;tb=5126;Jb=Sa=Cc=Pa=0;aa(X)?(sb=!0,La=N.createStream(34962,X),tb=La.dtype):(La=N.getBuffer(X))?tb=La.dtype:"constant"in X?(Wa=2,"number"===typeof X.constant?(Cc=X.constant,Sa=Jb=Pa=0):(Cc=0<X.constant.length?X.constant[0]:0,Sa=1<X.constant.length?X.constant[1]:0,Jb=2<X.constant.length?X.constant[2]:0,Pa=3<X.constant.length?X.constant[3]:0)):(La=aa(X.buffer)?N.createStream(34962,X.buffer):
N.getBuffer(X.buffer),tb="type"in X?ka[X.type]:La.dtype,gb=!!X.normalized,lb=X.size|0,Na=X.offset|0,ub=X.stride|0,eb=X.divisor|0);Db=U.location;Ma=M[Db];if(1===Wa){Ma.buffer||I.enableVertexAttribArray(Db);Ld=lb||4;if(Ma.type!==tb||Ma.size!==Ld||Ma.buffer!==La||Ma.normalized!==gb||Ma.offset!==Na||Ma.stride!==ub)I.bindBuffer(34962,La.buffer),I.vertexAttribPointer(Db,Ld,tb,gb,ub,Na),Ma.type=tb,Ma.size=Ld,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=ub;Ma.divisor!==eb&&(oa.vertexAttribDivisorANGLE(Db,
eb),Ma.divisor=eb)}else if(Ma.buffer&&(I.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Sa||Ma.z!==Jb||Ma.w!==Pa)I.vertexAttrib4f(Db,Cc,Sa,Jb,Pa),Ma.x=Cc,Ma.y=Sa,Ma.z=Jb,Ma.w=Pa;Ha.buffer=a.colorBuffer;Za=!1;Kb=null;Lb=0;mb=!1;$b=Oa=0;Ra=1;vb=0;wb=5126;Ac=gc=nb=Ua=0;aa(Ha)?(Za=!0,Kb=N.createStream(34962,Ha),wb=Kb.dtype):(Kb=N.getBuffer(Ha))?wb=Kb.dtype:"constant"in Ha?(Ra=2,"number"===typeof Ha.constant?(nb=Ha.constant,gc=Ac=Ua=0):(nb=0<Ha.constant.length?Ha.constant[0]:0,gc=1<Ha.constant.length?
Ha.constant[1]:0,Ac=2<Ha.constant.length?Ha.constant[2]:0,Ua=3<Ha.constant.length?Ha.constant[3]:0)):(Kb=aa(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),wb="type"in Ha?ka[Ha.type]:Kb.dtype,mb=!!Ha.normalized,$b=Ha.size|0,Oa=Ha.offset|0,vb=Ha.stride|0,Lb=Ha.divisor|0);vc=Z.location;bb=M[vc];if(1===Ra){bb.buffer||I.enableVertexAttribArray(vc);jc=$b||4;if(bb.type!==wb||bb.size!==jc||bb.buffer!==Kb||bb.normalized!==mb||bb.offset!==Oa||bb.stride!==vb)I.bindBuffer(34962,Kb.buffer),
I.vertexAttribPointer(vc,jc,wb,mb,vb,Oa),bb.type=wb,bb.size=jc,bb.buffer=Kb,bb.normalized=mb,bb.offset=Oa,bb.stride=vb;bb.divisor!==Lb&&(oa.vertexAttribDivisorANGLE(vc,Lb),bb.divisor=Lb)}else if(bb.buffer&&(I.disableVertexAttribArray(vc),bb.buffer=null),bb.x!==nb||bb.y!==gc||bb.z!==Ac||bb.w!==Ua)I.vertexAttrib4f(vc,nb,gc,Ac,Ua),bb.x=nb,bb.y=gc,bb.z=Ac,bb.w=Ua;Sc=E.location;Xa=M[Sc];Xa.buffer||I.enableVertexAttribArray(Sc);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==f||!1!==Xa.normalized||0!==Xa.offset||
8!==Xa.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(Sc,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=f,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(oa.vertexAttribDivisorANGLE(Sc,0),Xa.divisor=0);Mc=d.location;zb=M[Mc];zb.buffer||I.enableVertexAttribArray(Mc);if(5126!==zb.type||1!==zb.size||zb.buffer!==g||!1!==zb.normalized||4!==zb.offset||8!==zb.stride)I.bindBuffer(34962,g.buffer),I.vertexAttribPointer(Mc,1,5126,!1,8,4),zb.type=5126,zb.size=1,zb.buffer=g,zb.normalized=
!1,zb.offset=4,zb.stride=8;0!==zb.divisor&&(oa.vertexAttribDivisorANGLE(Mc,0),zb.divisor=0);$a=a.scale;I.uniform2f(Ba.location,$a[0],$a[1]);Vb=a.translate;I.uniform2f(ba.location,Vb[0],Vb[1]);I.uniform1f(W.location,a.thickness);I.uniform1f(D.location,a.depth);tc=l.call(this,m,a,0);I.uniform4f(S.location,tc[0],tc[1],tc[2],tc[3]);I.uniform1f(R.location,a.miterLimit);Wb=b.call(this,m,a,0);I.uniform1f(c.location,Wb);I.uniform1f(u.location,a.dashLength);I.uniform1f(K.location,a.opacity);(Qb=a.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;I.uniform1i(G.location,Kc.bind());(Sb=P.elements)?I.bindBuffer(34963,Sb.buffer.buffer):Ca.currentVAO&&(Sb=xa.getElements(Ca.currentVAO.elements))&&I.bindBuffer(34963,Sb.buffer.buffer);qd=a.count;0<qd?Sb?oa.drawElementsInstancedANGLE(5,4,Sb.type,0<<(Sb.type-5121>>1),qd):oa.drawArraysInstancedANGLE(5,0,4,qd):0>qd&&(Sb?I.drawElements(5,4,Sb.type,0<<(Sb.type-5121>>1)):I.drawArrays(5,0,4));O.dirty=!0;Ca.setVAO(null);m.viewportWidth=x;m.viewportHeight=
A;F&&(z.cpuTime+=performance.now()-T);t&&N.destroyStream(qa);Pc&&N.destroyStream(ld);oc&&N.destroyStream(qc);Nb&&N.destroyStream(kb);sb&&N.destroyStream(La);Za&&N.destroyStream(Kb);Kc.unbind()},scope:function(a,c,d){var b,e,k,n,w,y,H,l,J,v,la,u,M,ta,I,Qa,Ga,B,Y,C,dc,pa,ea,fa,S,D,K,E,va,L,R,Ea,xa,ja,U,Ya,W,Z,Aa,t,ba,Gb,ra,ma,G,ia,ha,Ca,Yb,ua,Ba,fb,ga,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,
wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;b=a.viewport;e=b.x|0;k=b.y|0;n="width"in b?b.width|0:m.framebufferWidth-
e;w="height"in b?b.height|0:m.framebufferHeight-k;y=m.viewportWidth;m.viewportWidth=n;H=m.viewportHeight;m.viewportHeight=w;l=za[0];za[0]=e;J=za[1];za[1]=k;v=za[2];za[2]=n;la=za[3];za[3]=w;u=ya[0];ya[0]=0;M=ya[1];ya[1]=0;ta=ya[2];ya[2]=0;I=ya[3];ya[3]=0;Qa=V.blend_enable;V.blend_enable=!0;Ga=Da[0];Da[0]=32774;B=Da[1];Da[1]=32774;Y=qa[0];qa[0]=770;C=qa[1];qa[1]=771;dc=qa[2];qa[2]=773;pa=qa[3];qa[3]=1;ea=V.cull_enable;V.cull_enable=!0;fa=V.cull_face;V.cull_face=1029;S=da.call(this,m,a,d);D=V.depth_enable;
V.depth_enable=S;K=a.viewport;E=K.x|0;va=K.y|0;L="width"in K?K.width|0:m.framebufferWidth-E;R="height"in K?K.height|0:m.framebufferHeight-va;Ea=Fa[0];Fa[0]=E;xa=Fa[1];Fa[1]=va;ja=Fa[2];Fa[2]=L;U=Fa[3];Fa[3]=R;Ya=V.scissor_enable;V.scissor_enable=!0;W=V.stencil_enable;V.stencil_enable=!1;if(Z=O.profile)Aa=performance.now(),z.count++;t=P.offset;P.offset=0;ba=P.count;P.count=4;Gb=a.count;ra=P.instances;P.instances=Gb;ma=P.primitive;P.primitive=5;G=a.dashLength;ia=sa[23];sa[23]=G;ha=a.dashTexture;Ca=
sa[24];sa[24]=ha;Yb=a.depth;ua=sa[22];sa[22]=Yb;Ba=a.id;fb=sa[31];sa[31]=Ba;ga=a.miterLimit;Rb=sa[32];sa[32]=ga;cb=x.call(this,m,a,d);Mb=sa[33];sa[33]=cb;ab=a.opacity;ob=sa[10];sa[10]=ab;Va=m.pixelRatio;Ic=sa[34];sa[34]=Va;Hb=a.scale;Ib=sa[6];sa[6]=Hb;rc=a.scaleFract;Nb=sa[7];sa[7]=rc;kb=a.thickness;Fb=sa[21];sa[21]=kb;Cb=a.translate;xb=sa[8];sa[8]=Cb;ib=a.translateFract;Zb=sa[9];sa[9]=ib;Ob=F.call(this,m,a,d);rb=sa[3];sa[3]=Ob;X.buffer=a.colorBuffer;Ta=!1;Pb=null;pb=0;bc=!1;qb=jb=0;Ja=1;sb=0;La=
5126;lb=Na=gb=eb=0;aa(X)?(Ta=!0,Pb=N.createStream(34962,X),La=Pb.dtype):(Pb=N.getBuffer(X))?La=Pb.dtype:"constant"in X?(Ja=2,"number"===typeof X.constant?(gb=X.constant,Na=lb=eb=0):(gb=0<X.constant.length?X.constant[0]:0,Na=1<X.constant.length?X.constant[1]:0,lb=2<X.constant.length?X.constant[2]:0,eb=3<X.constant.length?X.constant[3]:0)):(Pb=aa(X.buffer)?N.createStream(34962,X.buffer):N.getBuffer(X.buffer),La="type"in X?ka[X.type]:Pb.dtype,bc=!!X.normalized,qb=X.size|0,jb=X.offset|0,sb=X.stride|0,
pb=X.divisor|0);Wa=T.buffer;T.buffer=Pb;ub=T.divisor;T.divisor=pb;tb=T.normalized;T.normalized=bc;Pa=T.offset;T.offset=jb;Cc=T.size;T.size=qb;Sa=T.state;T.state=Ja;Jb=T.stride;T.stride=sb;Db=T.type;T.type=La;Ma=T.w;T.w=eb;Ld=T.x;T.x=gb;Za=T.y;T.y=Na;Kb=T.z;T.z=lb;wa.buffer=a.positionBuffer;Lb=!1;mb=null;Oa=0;$b=!1;vb=Ra=0;wb=1;Ua=0;nb=5126;bb=vc=Ac=gc=0;aa(wa)?(Lb=!0,mb=N.createStream(34962,wa),nb=mb.dtype):(mb=N.getBuffer(wa))?nb=mb.dtype:"constant"in wa?(wb=2,"number"===typeof wa.constant?(Ac=wa.constant,
vc=bb=gc=0):(Ac=0<wa.constant.length?wa.constant[0]:0,vc=1<wa.constant.length?wa.constant[1]:0,bb=2<wa.constant.length?wa.constant[2]:0,gc=3<wa.constant.length?wa.constant[3]:0)):(mb=aa(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),nb="type"in wa?ka[wa.type]:mb.dtype,$b=!!wa.normalized,vb=wa.size|0,Ra=wa.offset|0,Ua=wa.stride|0,Oa=wa.divisor|0);jc=A.buffer;A.buffer=mb;Sc=A.divisor;A.divisor=Oa;Xa=A.normalized;A.normalized=$b;Mc=A.offset;A.offset=Ra;zb=A.size;A.size=vb;$a=A.state;
A.state=wb;Vb=A.stride;A.stride=Ua;tc=A.type;A.type=nb;Wb=A.w;A.w=gc;Qb=A.x;A.x=Ac;Kc=A.y;A.y=vc;Sb=A.z;A.z=bb;Ha.buffer=a.colorBuffer;qd=!1;Ec=null;Hd=0;Nc=!1;td=Xc=0;nc=1;wc=0;hc=5126;Xb=Ub=sc=db=0;aa(Ha)?(qd=!0,Ec=N.createStream(34962,Ha),hc=Ec.dtype):(Ec=N.getBuffer(Ha))?hc=Ec.dtype:"constant"in Ha?(nc=2,"number"===typeof Ha.constant?(sc=Ha.constant,Ub=Xb=db=0):(sc=0<Ha.constant.length?Ha.constant[0]:0,Ub=1<Ha.constant.length?Ha.constant[1]:0,Xb=2<Ha.constant.length?Ha.constant[2]:0,db=3<Ha.constant.length?
Ha.constant[3]:0)):(Ec=aa(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),hc="type"in Ha?ka[Ha.type]:Ec.dtype,Nc=!!Ha.normalized,td=Ha.size|0,Xc=Ha.offset|0,wc=Ha.stride|0,Hd=Ha.divisor|0);ec=h.buffer;h.buffer=Ec;ic=h.divisor;h.divisor=Hd;yc=h.normalized;h.normalized=Nc;Bc=h.offset;h.offset=Xc;cd=h.size;h.size=td;Qc=h.state;h.state=nc;Rc=h.stride;h.stride=wc;Tc=h.type;h.type=hc;Yc=h.w;h.w=db;md=h.x;h.x=sc;dd=h.y;h.y=Ub;Zc=h.z;h.z=Xb;Ka.buffer=a.positionBuffer;kc=!1;cc=null;$c=0;
Wc=!1;zc=ed=0;id=1;ud=0;xe=5126;Od=De=jd=Ce=0;aa(Ka)?(kc=!0,cc=N.createStream(34962,Ka),xe=cc.dtype):(cc=N.getBuffer(Ka))?xe=cc.dtype:"constant"in Ka?(id=2,"number"===typeof Ka.constant?(jd=Ka.constant,De=Od=Ce=0):(jd=0<Ka.constant.length?Ka.constant[0]:0,De=1<Ka.constant.length?Ka.constant[1]:0,Od=2<Ka.constant.length?Ka.constant[2]:0,Ce=3<Ka.constant.length?Ka.constant[3]:0)):(cc=aa(Ka.buffer)?N.createStream(34962,Ka.buffer):N.getBuffer(Ka.buffer),xe="type"in Ka?ka[Ka.type]:cc.dtype,Wc=!!Ka.normalized,
zc=Ka.size|0,ed=Ka.offset|0,ud=Ka.stride|0,$c=Ka.divisor|0);pe=r.buffer;r.buffer=cc;be=r.divisor;r.divisor=$c;Pd=r.normalized;r.normalized=Wc;Id=r.offset;r.offset=ed;Fd=r.size;r.size=zc;od=r.state;r.state=id;Uc=r.stride;r.stride=ud;vd=r.type;r.type=xe;sd=r.w;r.w=Ce;kd=r.x;r.x=jd;wd=r.y;r.y=De;Bd=r.z;r.z=Od;Dd=oa.buffer;oa.buffer=f;je=oa.divisor;oa.divisor=0;re=oa.normalized;oa.normalized=!1;te=oa.offset;oa.offset=0;le=oa.size;oa.size=0;ke=oa.state;oa.state=1;ge=oa.stride;oa.stride=8;ue=oa.type;oa.type=
5126;ce=oa.w;oa.w=0;me=oa.x;oa.x=0;Oc=oa.y;oa.y=0;hd=oa.z;oa.z=0;ve=p.buffer;p.buffer=g;qe=p.divisor;p.divisor=0;Kd=p.normalized;p.normalized=!1;Qd=p.offset;p.offset=4;Rd=p.size;p.size=0;Sd=p.state;p.state=1;ne=p.stride;p.stride=8;ze=p.type;p.type=5126;Ee=p.w;p.w=0;se=p.x;p.x=0;Te=p.y;p.y=0;Ue=p.z;p.z=0;hb.buffer=a.positionBuffer;Pe=!1;we=null;He=0;Je=!1;Le=Ke=0;Ie=1;Md=0;Yd=5126;Gd=Me=de=ae=0;aa(hb)?(Pe=!0,we=N.createStream(34962,hb),Yd=we.dtype):(we=N.getBuffer(hb))?Yd=we.dtype:"constant"in hb?
(Ie=2,"number"===typeof hb.constant?(de=hb.constant,Me=Gd=ae=0):(de=0<hb.constant.length?hb.constant[0]:0,Me=1<hb.constant.length?hb.constant[1]:0,Gd=2<hb.constant.length?hb.constant[2]:0,ae=3<hb.constant.length?hb.constant[3]:0)):(we=aa(hb.buffer)?N.createStream(34962,hb.buffer):N.getBuffer(hb.buffer),Yd="type"in hb?ka[hb.type]:we.dtype,Je=!!hb.normalized,Le=hb.size|0,Ke=hb.offset|0,Md=hb.stride|0,He=hb.divisor|0);Td=Q.buffer;Q.buffer=we;Fe=Q.divisor;Q.divisor=He;Ne=Q.normalized;Q.normalized=Je;
cf=Q.offset;Q.offset=Ke;bf=Q.size;Q.size=Le;Ve=Q.state;Q.state=Ie;Qe=Q.stride;Q.stride=Md;af=Q.type;Q.type=Yd;Ze=Q.w;Q.w=ae;We=Q.x;Q.x=de;Xe=Q.y;Q.y=Me;Ud=Q.z;Q.z=Gd;ca.buffer=a.positionBuffer;Zd=!1;Ye=null;kf=0;of=!1;lf=ff=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;aa(ca)?(Zd=!0,Ye=N.createStream(34962,ca),sf=Ye.dtype):(Ye=N.getBuffer(ca))?sf=Ye.dtype:"constant"in ca?(mf=2,"number"===typeof ca.constant?(tf=ca.constant,Cf=Df=pf=0):(tf=0<ca.constant.length?ca.constant[0]:0,Cf=1<ca.constant.length?ca.constant[1]:
0,Df=2<ca.constant.length?ca.constant[2]:0,pf=3<ca.constant.length?ca.constant[3]:0)):(Ye=aa(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),sf="type"in ca?ka[ca.type]:Ye.dtype,of=!!ca.normalized,lf=ca.size|0,ff=ca.offset|0,nf=ca.stride|0,kf=ca.divisor|0);Re=q.buffer;q.buffer=Ye;Ge=q.divisor;q.divisor=kf;qf=q.normalized;q.normalized=of;rf=q.offset;q.offset=ff;Ef=q.size;q.size=lf;Hf=q.state;q.state=mf;Bf=q.stride;q.stride=nf;Ff=q.type;q.type=sf;Gf=q.w;q.w=pf;xf=q.x;q.x=tf;yf=q.y;
q.y=Cf;wf=q.z;q.z=Df;zf=na.vert;na.vert=36;Af=na.frag;na.frag=35;O.dirty=!0;c(m,a,d);m.viewportWidth=y;m.viewportHeight=H;za[0]=l;za[1]=J;za[2]=v;za[3]=la;ya[0]=u;ya[1]=M;ya[2]=ta;ya[3]=I;V.blend_enable=Qa;Da[0]=Ga;Da[1]=B;qa[0]=Y;qa[1]=C;qa[2]=dc;qa[3]=pa;V.cull_enable=ea;V.cull_face=fa;V.depth_enable=D;Fa[0]=Ea;Fa[1]=xa;Fa[2]=ja;Fa[3]=U;V.scissor_enable=Ya;V.stencil_enable=W;Z&&(z.cpuTime+=performance.now()-Aa);P.offset=t;P.count=ba;P.instances=ra;P.primitive=ma;sa[23]=ia;sa[24]=Ca;sa[22]=ua;sa[31]=
fb;sa[32]=Rb;sa[33]=Mb;sa[10]=ob;sa[34]=Ic;sa[6]=Ib;sa[7]=Nb;sa[21]=Fb;sa[8]=xb;sa[9]=Zb;sa[3]=rb;Ta&&N.destroyStream(Pb);T.buffer=Wa;T.divisor=ub;T.normalized=tb;T.offset=Pa;T.size=Cc;T.state=Sa;T.stride=Jb;T.type=Db;T.w=Ma;T.x=Ld;T.y=Za;T.z=Kb;Lb&&N.destroyStream(mb);A.buffer=jc;A.divisor=Sc;A.normalized=Xa;A.offset=Mc;A.size=zb;A.state=$a;A.stride=Vb;A.type=tc;A.w=Wb;A.x=Qb;A.y=Kc;A.z=Sb;qd&&N.destroyStream(Ec);h.buffer=ec;h.divisor=ic;h.normalized=yc;h.offset=Bc;h.size=cd;h.state=Qc;h.stride=
Rc;h.type=Tc;h.w=Yc;h.x=md;h.y=dd;h.z=Zc;kc&&N.destroyStream(cc);r.buffer=pe;r.divisor=be;r.normalized=Pd;r.offset=Id;r.size=Fd;r.state=od;r.stride=Uc;r.type=vd;r.w=sd;r.x=kd;r.y=wd;r.z=Bd;oa.buffer=Dd;oa.divisor=je;oa.normalized=re;oa.offset=te;oa.size=le;oa.state=ke;oa.stride=ge;oa.type=ue;oa.w=ce;oa.x=me;oa.y=Oc;oa.z=hd;p.buffer=ve;p.divisor=qe;p.normalized=Kd;p.offset=Qd;p.size=Rd;p.state=Sd;p.stride=ne;p.type=ze;p.w=Ee;p.x=se;p.y=Te;p.z=Ue;Pe&&N.destroyStream(we);Q.buffer=Td;Q.divisor=Fe;Q.normalized=
Ne;Q.offset=cf;Q.size=bf;Q.state=Ve;Q.stride=Qe;Q.type=af;Q.w=Ze;Q.x=We;Q.y=Xe;Q.z=Ud;Zd&&N.destroyStream(Ye);q.buffer=Re;q.divisor=Ge;q.normalized=qf;q.offset=rf;q.size=Ef;q.state=Hf;q.stride=Bf;q.type=Ff;q.w=Gf;q.x=xf;q.y=yf;q.z=wf;na.vert=zf;na.frag=Af;O.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,z,v,Y,f,g,l,b,da,x,F,T,A,h,r,oa,p,Q,q){var L,t,e,C,U,k,Z,B,u,G,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,
ja,qa;L=a.attributes;t=a.buffer;e=a.context;C=a.current;U=a.draw;k=a.elements;Z=a.extensions;B=a.framebuffer;u=a.gl;G=a.isBufferArgs;D=a.next;E=a.shader;d=a.uniforms;R=a.vao;c=D.blend_color;ia=C.blend_color;K=D.blend_equation;ha=C.blend_equation;Ba=D.blend_func;W=C.blend_func;ba=D.colorMask;S=C.colorMask;M=D.depth_range;N=C.depth_range;m=D.polygonOffset_offset;O=C.polygonOffset_offset;P=D.sample_coverage;xa=C.sample_coverage;ra=D.scissor_box;w=C.scissor_box;I=D.stencil_func;aa=C.stencil_func;V=D.stencil_opBack;
na=C.stencil_opBack;sa=D.stencil_opFront;Ca=C.stencil_opFront;ya=D.viewport;ea=C.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};qa={offset:8,stride:8};return{batch:function(a,c){var d,b,g,y,n,l;d=B.next;d!==B.cur&&(d?u.bindFramebuffer(36160,d.framebuffer):u.bindFramebuffer(36160,null),B.cur=d);if(C.dirty){var v,f,Y,K,fa,H,ta,Ga,pa,E,Ea,ka,X,ya,ra,Ba,hb,ca,ga,ac,Ia,jf,Tb,ye,Cd,xd,Wd,Ae,zd,Vd,oe,he;v=D.dither;v!==C.dither&&
(v?u.enable(3024):u.disable(3024),C.dither=v);f=D.depth_func;f!==C.depth_func&&(u.depthFunc(f),C.depth_func=f);Y=M[0];K=M[1];if(Y!==N[0]||K!==N[1])u.depthRange(Y,K),N[0]=Y,N[1]=K;fa=D.depth_mask;fa!==C.depth_mask&&(u.depthMask(fa),C.depth_mask=fa);H=ba[0];ta=ba[1];Ga=ba[2];pa=ba[3];if(H!==S[0]||ta!==S[1]||Ga!==S[2]||pa!==S[3])u.colorMask(H,ta,Ga,pa),S[0]=H,S[1]=ta,S[2]=Ga,S[3]=pa;E=D.cull_enable;E!==C.cull_enable&&(E?u.enable(2884):u.disable(2884),C.cull_enable=E);Ea=D.cull_face;Ea!==C.cull_face&&
(u.cullFace(Ea),C.cull_face=Ea);ka=D.frontFace;ka!==C.frontFace&&(u.frontFace(ka),C.frontFace=ka);X=D.lineWidth;X!==C.lineWidth&&(u.lineWidth(X),C.lineWidth=X);ya=D.polygonOffset_enable;ya!==C.polygonOffset_enable&&(ya?u.enable(32823):u.disable(32823),C.polygonOffset_enable=ya);ra=m[0];Ba=m[1];if(ra!==O[0]||Ba!==O[1])u.polygonOffset(ra,Ba),O[0]=ra,O[1]=Ba;hb=D.sample_alpha;hb!==C.sample_alpha&&(hb?u.enable(32926):u.disable(32926),C.sample_alpha=hb);ca=D.sample_enable;ca!==C.sample_enable&&(ca?u.enable(32928):
u.disable(32928),C.sample_enable=ca);ga=P[0];ac=P[1];if(ga!==xa[0]||ac!==xa[1])u.sampleCoverage(ga,ac),xa[0]=ga,xa[1]=ac;Ia=D.stencil_mask;Ia!==C.stencil_mask&&(u.stencilMask(Ia),C.stencil_mask=Ia);jf=I[0];Tb=I[1];ye=I[2];if(jf!==aa[0]||Tb!==aa[1]||ye!==aa[2])u.stencilFunc(jf,Tb,ye),aa[0]=jf,aa[1]=Tb,aa[2]=ye;Cd=sa[0];xd=sa[1];Wd=sa[2];Ae=sa[3];if(Cd!==Ca[0]||xd!==Ca[1]||Wd!==Ca[2]||Ae!==Ca[3])u.stencilOpSeparate(Cd,xd,Wd,Ae),Ca[0]=Cd,Ca[1]=xd,Ca[2]=Wd,Ca[3]=Ae;zd=V[0];Vd=V[1];oe=V[2];he=V[3];if(zd!==
na[0]||Vd!==na[1]||oe!==na[2]||he!==na[3])u.stencilOpSeparate(zd,Vd,oe,he),na[0]=zd,na[1]=Vd,na[2]=oe,na[3]=he}u.blendColor(0,0,0,0);ia[0]=0;ia[1]=0;ia[2]=0;ia[3]=0;u.enable(3042);C.blend_enable=!0;u.blendEquationSeparate(32774,32774);ha[0]=32774;ha[1]=32774;u.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;u.disable(2929);C.depth_enable=!1;u.enable(3089);C.scissor_enable=!0;u.disable(2960);C.stencil_enable=!1;if(b=C.profile)g=performance.now(),z.count+=c;u.useProgram(da.program);
y=Z.angle_instanced_arrays;var Nd;R.setVAO(null);Nd=U.instances;for(n=0;n<c;++n){l=a[n];var fe,ee,$d,$e,Oe,Se,Ed,Be,ie,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db;fe=l.viewport;ee=fe.x|0;$d=fe.y|0;$e="width"in fe?fe.width|0:e.framebufferWidth-ee;Oe="height"in fe?fe.height|0:e.framebufferHeight-$d;Se=e.viewportWidth;e.viewportWidth=
$e;Ed=e.viewportHeight;e.viewportHeight=Oe;u.viewport(ee,$d,$e,Oe);ea[0]=ee;ea[1]=$d;ea[2]=$e;ea[3]=Oe;Be=l.viewport;ie=Be.x|0;Jd=Be.y|0;Xd="width"in Be?Be.width|0:e.framebufferWidth-ie;Ad="height"in Be?Be.height|0:e.framebufferHeight-Jd;u.scissor(ie,Jd,Xd,Ad);w[0]=ie;w[1]=Jd;w[2]=Xd;w[3]=Ad;ja.buffer=l.positionBuffer;nd=!1;ad=null;rd=0;Lc=!1;Fc=pd=0;fd=1;Pc=0;ld=5126;yb=uc=Eb=Ab=0;G(ja)?(nd=!0,ad=t.createStream(34962,ja),ld=ad.dtype):(ad=t.getBuffer(ja))?ld=ad.dtype:"constant"in ja?(fd=2,"number"===
typeof ja.constant?(Eb=ja.constant,uc=yb=Ab=0):(Eb=0<ja.constant.length?ja.constant[0]:0,uc=1<ja.constant.length?ja.constant[1]:0,yb=2<ja.constant.length?ja.constant[2]:0,Ab=3<ja.constant.length?ja.constant[3]:0)):(ad=G(ja.buffer)?t.createStream(34962,ja.buffer):t.getBuffer(ja.buffer),ld="type"in ja?Da[ja.type]:ad.dtype,Lc=!!ja.normalized,Fc=ja.size|0,pd=ja.offset|0,Pc=ja.stride|0,rd=ja.divisor|0);xc=h.location;Bb=L[xc];if(1===fd){Bb.buffer||u.enableVertexAttribArray(xc);Jc=Fc||2;if(Bb.type!==ld||
Bb.size!==Jc||Bb.buffer!==ad||Bb.normalized!==Lc||Bb.offset!==pd||Bb.stride!==Pc)u.bindBuffer(34962,ad.buffer),u.vertexAttribPointer(xc,Jc,ld,Lc,Pc,pd),Bb.type=ld,Bb.size=Jc,Bb.buffer=ad,Bb.normalized=Lc,Bb.offset=pd,Bb.stride=Pc;Bb.divisor!==rd&&(y.vertexAttribDivisorANGLE(xc,rd),Bb.divisor=rd)}else if(Bb.buffer&&(u.disableVertexAttribArray(xc),Bb.buffer=null),Bb.x!==Eb||Bb.y!==uc||Bb.z!==yb||Bb.w!==Ab)u.vertexAttrib4f(xc,Eb,uc,yb,Ab),Bb.x=Eb,Bb.y=uc,Bb.z=yb,Bb.w=Ab;qa.buffer=l.positionFractBuffer;
lc=!1;Gc=null;gd=0;bd=!1;fc=Dc=0;Hc=1;oc=0;qc=5126;Vc=fb=pc=mc=0;G(qa)?(lc=!0,Gc=t.createStream(34962,qa),qc=Gc.dtype):(Gc=t.getBuffer(qa))?qc=Gc.dtype:"constant"in qa?(Hc=2,"number"===typeof qa.constant?(pc=qa.constant,fb=Vc=mc=0):(pc=0<qa.constant.length?qa.constant[0]:0,fb=1<qa.constant.length?qa.constant[1]:0,Vc=2<qa.constant.length?qa.constant[2]:0,mc=3<qa.constant.length?qa.constant[3]:0)):(Gc=G(qa.buffer)?t.createStream(34962,qa.buffer):t.getBuffer(qa.buffer),qc="type"in qa?Da[qa.type]:Gc.dtype,
bd=!!qa.normalized,fc=qa.size|0,Dc=qa.offset|0,oc=qa.stride|0,gd=qa.divisor|0);Rb=r.location;cb=L[Rb];if(1===Hc){cb.buffer||u.enableVertexAttribArray(Rb);Mb=fc||2;if(cb.type!==qc||cb.size!==Mb||cb.buffer!==Gc||cb.normalized!==bd||cb.offset!==Dc||cb.stride!==oc)u.bindBuffer(34962,Gc.buffer),u.vertexAttribPointer(Rb,Mb,qc,bd,oc,Dc),cb.type=qc,cb.size=Mb,cb.buffer=Gc,cb.normalized=bd,cb.offset=Dc,cb.stride=oc;cb.divisor!==gd&&(y.vertexAttribDivisorANGLE(Rb,gd),cb.divisor=gd)}else if(cb.buffer&&(u.disableVertexAttribArray(Rb),
cb.buffer=null),cb.x!==pc||cb.y!==fb||cb.z!==Vc||cb.w!==mc)u.vertexAttrib4f(Rb,pc,fb,Vc,mc),cb.x=pc,cb.y=fb,cb.z=Vc,cb.w=mc;ab=l.fill;ob=ab[0];Ic=ab[1];Ib=ab[2];Nb=ab[3];n&&Va===ob&&Hb===Ic&&rc===Ib&&kb===Nb||(Va=ob,Hb=Ic,rc=Ib,kb=Nb,u.uniform4f(F.location,ob,Ic,Ib,Nb));Fb=l.scale;Cb=Fb[0];ib=Fb[1];n&&xb===Cb&&Zb===ib||(xb=Cb,Zb=ib,u.uniform2f(oa.location,Cb,ib));Ob=l.scaleFract;rb=Ob[0];Pb=Ob[1];n&&Ta===rb&&pb===Pb||(Ta=rb,pb=Pb,u.uniform2f(p.location,rb,Pb));bc=l.translate;jb=bc[0];Ja=bc[1];n&&
qb===jb&&sb===Ja||(qb=jb,sb=Ja,u.uniform2f(Q.location,jb,Ja));La=l.translateFract;eb=La[0];Na=La[1];n&&gb===eb&&lb===Na||(gb=eb,lb=Na,u.uniform2f(q.location,eb,Na));Wa=l.id;n&&ub===Wa||(ub=Wa,u.uniform1f(T.location,Wa));tb=l.opacity;n&&Pa===tb||(Pa=tb,u.uniform1f(A.location,tb));Cc=x.call(this,e,l,n);Sa=null;(Sa=(Jb=G(Cc))?k.createStream(Cc):k.getElements(Cc))&&u.bindBuffer(34963,Sa.buffer.buffer);if(Db=Sa?Sa.vertCount:-1)0<Nd?Sa?y.drawElementsInstancedANGLE(4,Db,Sa.type,0<<(Sa.type-5121>>1),Nd):
y.drawArraysInstancedANGLE(4,0,Db,Nd):0>Nd&&(Sa?u.drawElements(4,Db,Sa.type,0<<(Sa.type-5121>>1)):u.drawArrays(4,0,Db)),e.viewportWidth=Se,e.viewportHeight=Ed,nd&&t.destroyStream(ad),lc&&t.destroyStream(Gc),Jb&&k.destroyStream(Sa)}C.dirty=!0;R.setVAO(null);b&&(z.cpuTime+=performance.now()-g)},draw:function(a){var c,d,b,g,y,n,l,f,K,E,x,fa,H,ta,Ga,pa,za,Ea,ka,X,ya,da;c=B.next;c!==B.cur&&(c?u.bindFramebuffer(36160,c.framebuffer):u.bindFramebuffer(36160,null),B.cur=c);if(C.dirty){c=D.dither;c!==C.dither&&
(c?u.enable(3024):u.disable(3024),C.dither=c);c=D.depth_func;c!==C.depth_func&&(u.depthFunc(c),C.depth_func=c);c=M[0];n=M[1];if(c!==N[0]||n!==N[1])u.depthRange(c,n),N[0]=c,N[1]=n;c=D.depth_mask;c!==C.depth_mask&&(u.depthMask(c),C.depth_mask=c);c=ba[0];n=ba[1];d=ba[2];b=ba[3];if(c!==S[0]||n!==S[1]||d!==S[2]||b!==S[3])u.colorMask(c,n,d,b),S[0]=c,S[1]=n,S[2]=d,S[3]=b;c=D.cull_enable;c!==C.cull_enable&&(c?u.enable(2884):u.disable(2884),C.cull_enable=c);c=D.cull_face;c!==C.cull_face&&(u.cullFace(c),C.cull_face=
c);c=D.frontFace;c!==C.frontFace&&(u.frontFace(c),C.frontFace=c);c=D.lineWidth;c!==C.lineWidth&&(u.lineWidth(c),C.lineWidth=c);c=D.polygonOffset_enable;c!==C.polygonOffset_enable&&(c?u.enable(32823):u.disable(32823),C.polygonOffset_enable=c);c=m[0];n=m[1];if(c!==O[0]||n!==O[1])u.polygonOffset(c,n),O[0]=c,O[1]=n;c=D.sample_alpha;c!==C.sample_alpha&&(c?u.enable(32926):u.disable(32926),C.sample_alpha=c);c=D.sample_enable;c!==C.sample_enable&&(c?u.enable(32928):u.disable(32928),C.sample_enable=c);c=P[0];
n=P[1];if(c!==xa[0]||n!==xa[1])u.sampleCoverage(c,n),xa[0]=c,xa[1]=n;c=D.stencil_mask;c!==C.stencil_mask&&(u.stencilMask(c),C.stencil_mask=c);c=I[0];n=I[1];d=I[2];if(c!==aa[0]||n!==aa[1]||d!==aa[2])u.stencilFunc(c,n,d),aa[0]=c,aa[1]=n,aa[2]=d;c=sa[0];n=sa[1];d=sa[2];b=sa[3];if(c!==Ca[0]||n!==Ca[1]||d!==Ca[2]||b!==Ca[3])u.stencilOpSeparate(c,n,d,b),Ca[0]=c,Ca[1]=n,Ca[2]=d,Ca[3]=b;c=V[0];n=V[1];d=V[2];b=V[3];if(c!==na[0]||n!==na[1]||d!==na[2]||b!==na[3])u.stencilOpSeparate(c,n,d,b),na[0]=c,na[1]=n,
na[2]=d,na[3]=b}c=a.viewport;d=c.x|0;b=c.y|0;g="width"in c?c.width|0:e.framebufferWidth-d;y="height"in c?c.height|0:e.framebufferHeight-b;c=e.viewportWidth;e.viewportWidth=g;n=e.viewportHeight;e.viewportHeight=y;u.viewport(d,b,g,y);ea[0]=d;ea[1]=b;ea[2]=g;ea[3]=y;u.blendColor(0,0,0,0);ia[0]=0;ia[1]=0;ia[2]=0;ia[3]=0;u.enable(3042);C.blend_enable=!0;u.blendEquationSeparate(32774,32774);ha[0]=32774;ha[1]=32774;u.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;u.disable(2929);C.depth_enable=
!1;y=a.viewport;d=y.x|0;b=y.y|0;g="width"in y?y.width|0:e.framebufferWidth-d;y="height"in y?y.height|0:e.framebufferHeight-b;u.scissor(d,b,g,y);w[0]=d;w[1]=b;w[2]=g;w[3]=y;u.enable(3089);C.scissor_enable=!0;u.disable(2960);C.stencil_enable=!1;if(d=C.profile)l=performance.now(),z.count++;u.useProgram(v.program);b=Z.angle_instanced_arrays;R.setVAO(null);ja.buffer=a.positionBuffer;g=!1;f=0;K=!1;x=E=0;fa=1;H=0;ta=5126;Ea=za=pa=Ga=0;G(ja)?(g=!0,y=t.createStream(34962,ja),ta=y.dtype):(y=t.getBuffer(ja))?
ta=y.dtype:"constant"in ja?(fa=2,"number"===typeof ja.constant?(pa=ja.constant,za=Ea=Ga=0):(pa=0<ja.constant.length?ja.constant[0]:0,za=1<ja.constant.length?ja.constant[1]:0,Ea=2<ja.constant.length?ja.constant[2]:0,Ga=3<ja.constant.length?ja.constant[3]:0)):(y=G(ja.buffer)?t.createStream(34962,ja.buffer):t.getBuffer(ja.buffer),ta="type"in ja?Da[ja.type]:y.dtype,K=!!ja.normalized,x=ja.size|0,E=ja.offset|0,H=ja.stride|0,f=ja.divisor|0);ka=h.location;X=L[ka];if(1===fa){X.buffer||u.enableVertexAttribArray(ka);
x=x||2;if(X.type!==ta||X.size!==x||X.buffer!==y||X.normalized!==K||X.offset!==E||X.stride!==H)u.bindBuffer(34962,y.buffer),u.vertexAttribPointer(ka,x,ta,K,H,E),X.type=ta,X.size=x,X.buffer=y,X.normalized=K,X.offset=E,X.stride=H;X.divisor!==f&&(b.vertexAttribDivisorANGLE(ka,f),X.divisor=f)}else if(X.buffer&&(u.disableVertexAttribArray(ka),X.buffer=null),X.x!==pa||X.y!==za||X.z!==Ea||X.w!==Ga)u.vertexAttrib4f(ka,pa,za,Ea,Ga),X.x=pa,X.y=za,X.z=Ea,X.w=Ga;qa.buffer=a.positionFractBuffer;f=!1;E=0;H=!1;Ga=
ta=0;pa=1;ka=0;X=5126;da=ya=Ea=za=0;G(qa)?(f=!0,K=t.createStream(34962,qa),X=K.dtype):(K=t.getBuffer(qa))?X=K.dtype:"constant"in qa?(pa=2,"number"===typeof qa.constant?(Ea=qa.constant,ya=da=za=0):(Ea=0<qa.constant.length?qa.constant[0]:0,ya=1<qa.constant.length?qa.constant[1]:0,da=2<qa.constant.length?qa.constant[2]:0,za=3<qa.constant.length?qa.constant[3]:0)):(K=G(qa.buffer)?t.createStream(34962,qa.buffer):t.getBuffer(qa.buffer),X="type"in qa?Da[qa.type]:K.dtype,H=!!qa.normalized,Ga=qa.size|0,ta=
qa.offset|0,ka=qa.stride|0,E=qa.divisor|0);x=r.location;fa=L[x];if(1===pa){fa.buffer||u.enableVertexAttribArray(x);Ga=Ga||2;if(fa.type!==X||fa.size!==Ga||fa.buffer!==K||fa.normalized!==H||fa.offset!==ta||fa.stride!==ka)u.bindBuffer(34962,K.buffer),u.vertexAttribPointer(x,Ga,X,H,ka,ta),fa.type=X,fa.size=Ga,fa.buffer=K,fa.normalized=H,fa.offset=ta,fa.stride=ka;fa.divisor!==E&&(b.vertexAttribDivisorANGLE(x,E),fa.divisor=E)}else if(fa.buffer&&(u.disableVertexAttribArray(x),fa.buffer=null),fa.x!==Ea||
fa.y!==ya||fa.z!==da||fa.w!==za)u.vertexAttrib4f(x,Ea,ya,da,za),fa.x=Ea,fa.y=ya,fa.z=da,fa.w=za;E=a.fill;u.uniform4f(F.location,E[0],E[1],E[2],E[3]);E=a.scale;u.uniform2f(oa.location,E[0],E[1]);E=a.scaleFract;u.uniform2f(p.location,E[0],E[1]);E=a.translate;u.uniform2f(Q.location,E[0],E[1]);E=a.translateFract;u.uniform2f(q.location,E[0],E[1]);u.uniform1f(T.location,a.id);u.uniform1f(A.location,a.opacity);E=Y.call(this,e,a,0);(E=(a=G(E))?k.createStream(E):k.getElements(E))&&u.bindBuffer(34963,E.buffer.buffer);
if(H=E?E.vertCount:-1)ta=U.instances,0<ta?E?b.drawElementsInstancedANGLE(4,H,E.type,0<<(E.type-5121>>1),ta):b.drawArraysInstancedANGLE(4,0,H,ta):0>ta&&(E?u.drawElements(4,H,E.type,0<<(E.type-5121>>1)):u.drawArrays(4,0,H)),C.dirty=!0,R.setVAO(null),e.viewportWidth=c,e.viewportHeight=n,d&&(z.cpuTime+=performance.now()-l),g&&t.destroyStream(y),f&&t.destroyStream(K),a&&k.destroyStream(E)},scope:function(a,m,w){var v,u,y,n,J,q,M,I,p,Y,H,ta,Ga,B,V,N,ea,S,h,P,x,r,O,aa,A,L,R,da,xa,sa,Q,F,T,W,oa,Z,ba,na,ia,
ha,Ca,ga,Oe,Se,Ed,Be,ie,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb;v=a.viewport;u=v.x|0;y=v.y|0;n="width"in v?v.width|0:e.framebufferWidth-u;J="height"in v?v.height|0:e.framebufferHeight-y;q=e.viewportWidth;e.viewportWidth=n;M=e.viewportHeight;e.viewportHeight=J;I=ya[0];ya[0]=u;p=ya[1];ya[1]=y;Y=ya[2];ya[2]=n;H=ya[3];ya[3]=J;ta=c[0];c[0]=0;Ga=
c[1];c[1]=0;B=c[2];c[2]=0;V=c[3];c[3]=0;N=D.blend_enable;D.blend_enable=!0;ea=K[0];K[0]=32774;S=K[1];K[1]=32774;h=Ba[0];Ba[0]=770;P=Ba[1];Ba[1]=771;x=Ba[2];Ba[2]=773;r=Ba[3];Ba[3]=1;O=D.depth_enable;D.depth_enable=!1;aa=a.viewport;A=aa.x|0;L=aa.y|0;R="width"in aa?aa.width|0:e.framebufferWidth-A;da="height"in aa?aa.height|0:e.framebufferHeight-L;xa=ra[0];ra[0]=A;sa=ra[1];ra[1]=L;Q=ra[2];ra[2]=R;F=ra[3];ra[3]=da;T=D.scissor_enable;D.scissor_enable=!0;W=D.stencil_enable;D.stencil_enable=!1;if(oa=C.profile)Z=
performance.now(),z.count++;ba=f.call(this,e,a,w);na=null;na=(ia=G(ba))?k.createStream(ba):k.getElements(ba);ha=U.elements;U.elements=na;Ca=U.offset;U.offset=0;ga=na?na.vertCount:-1;Oe=U.count;U.count=ga;Se=U.primitive;U.primitive=4;Ed=a.fill;Be=d[14];d[14]=Ed;ie=a.id;Jd=d[31];d[31]=ie;Xd=a.opacity;Ad=d[10];d[10]=Xd;nd=e.pixelRatio;ad=d[34];d[34]=nd;rd=a.scale;Lc=d[6];d[6]=rd;pd=a.scaleFract;Fc=d[7];d[7]=pd;fd=a.translate;Pc=d[8];d[8]=fd;ld=a.translateFract;Ab=d[9];d[9]=ld;Eb=g.call(this,e,a,w);uc=
d[3];d[3]=Eb;ja.buffer=a.positionBuffer;yb=!1;xc=null;Bb=0;Jc=!1;Gc=lc=0;gd=1;bd=0;Dc=5126;qc=oc=Hc=fc=0;G(ja)?(yb=!0,xc=t.createStream(34962,ja),Dc=xc.dtype):(xc=t.getBuffer(ja))?Dc=xc.dtype:"constant"in ja?(gd=2,"number"===typeof ja.constant?(Hc=ja.constant,oc=qc=fc=0):(Hc=0<ja.constant.length?ja.constant[0]:0,oc=1<ja.constant.length?ja.constant[1]:0,qc=2<ja.constant.length?ja.constant[2]:0,fc=3<ja.constant.length?ja.constant[3]:0)):(xc=G(ja.buffer)?t.createStream(34962,ja.buffer):t.getBuffer(ja.buffer),
Dc="type"in ja?Da[ja.type]:xc.dtype,Jc=!!ja.normalized,Gc=ja.size|0,lc=ja.offset|0,bd=ja.stride|0,Bb=ja.divisor|0);mc=l.buffer;l.buffer=xc;pc=l.divisor;l.divisor=Bb;fb=l.normalized;l.normalized=Jc;Vc=l.offset;l.offset=lc;Rb=l.size;l.size=Gc;cb=l.state;l.state=gd;Mb=l.stride;l.stride=bd;ab=l.type;l.type=Dc;ob=l.w;l.w=fc;Va=l.x;l.x=Hc;Ic=l.y;l.y=oc;Hb=l.z;l.z=qc;qa.buffer=a.positionFractBuffer;Ib=!1;rc=null;Nb=0;kb=!1;Cb=Fb=0;xb=1;ib=0;Zb=5126;Pb=Ta=rb=Ob=0;G(qa)?(Ib=!0,rc=t.createStream(34962,qa),
Zb=rc.dtype):(rc=t.getBuffer(qa))?Zb=rc.dtype:"constant"in qa?(xb=2,"number"===typeof qa.constant?(rb=qa.constant,Ta=Pb=Ob=0):(rb=0<qa.constant.length?qa.constant[0]:0,Ta=1<qa.constant.length?qa.constant[1]:0,Pb=2<qa.constant.length?qa.constant[2]:0,Ob=3<qa.constant.length?qa.constant[3]:0)):(rc=G(qa.buffer)?t.createStream(34962,qa.buffer):t.getBuffer(qa.buffer),Zb="type"in qa?Da[qa.type]:rc.dtype,kb=!!qa.normalized,Cb=qa.size|0,Fb=qa.offset|0,ib=qa.stride|0,Nb=qa.divisor|0);pb=b.buffer;b.buffer=
rc;bc=b.divisor;b.divisor=Nb;jb=b.normalized;b.normalized=kb;qb=b.offset;b.offset=Fb;Ja=b.size;b.size=Cb;sb=b.state;b.state=xb;La=b.stride;b.stride=ib;eb=b.type;b.type=Zb;gb=b.w;b.w=Ob;Na=b.x;b.x=rb;lb=b.y;b.y=Ta;Wa=b.z;b.z=Pb;ub=E.vert;E.vert=42;tb=E.frag;E.frag=41;C.dirty=!0;m(e,a,w);e.viewportWidth=q;e.viewportHeight=M;ya[0]=I;ya[1]=p;ya[2]=Y;ya[3]=H;c[0]=ta;c[1]=Ga;c[2]=B;c[3]=V;D.blend_enable=N;K[0]=ea;K[1]=S;Ba[0]=h;Ba[1]=P;Ba[2]=x;Ba[3]=r;D.depth_enable=O;ra[0]=xa;ra[1]=sa;ra[2]=Q;ra[3]=F;
D.scissor_enable=T;D.stencil_enable=W;oa&&(z.cpuTime+=performance.now()-Z);ia&&k.destroyStream(na);U.elements=ha;U.offset=Ca;U.count=Oe;U.primitive=Se;d[14]=Be;d[31]=Jd;d[10]=Ad;d[34]=ad;d[6]=Lc;d[7]=Fc;d[8]=Pc;d[9]=Ab;d[3]=uc;yb&&t.destroyStream(xc);l.buffer=mc;l.divisor=pc;l.normalized=fb;l.offset=Vc;l.size=Rb;l.state=cb;l.stride=Mb;l.type=ab;l.w=ob;l.x=Va;l.y=Ic;l.z=Hb;Ib&&t.destroyStream(rc);b.buffer=pb;b.divisor=bc;b.normalized=jb;b.offset=qb;b.size=Ja;b.state=sb;b.stride=La;b.type=eb;b.w=gb;
b.x=Na;b.y=lb;b.z=Wa;E.vert=ub;E.frag=tb;C.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,z,v,Y,f,g,l,b,da,x,F,T,A,h,r,t,p,Q,q,L,G,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya){var y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea,ka,X,wa,Ha,Ka,hb,ca,ga,ac,Ia,jf,Tb,ye,Cd,xd,Wd,Ae,zd,Vd,
oe,he,Nd,fe,ee,$d;y=a.attributes;n=a.buffer;J=a.context;va=a.current;Fa=a.draw;Yb=a.elements;Gb=a.extensions;fa=a.framebuffer;H=a.gl;ta=a.isBufferArgs;Ga=a.next;pa=a.shader;za=a.uniforms;Ea=a.vao;ka=Ga.blend_color;X=va.blend_color;wa=Ga.blend_equation;Ha=va.blend_equation;Ka=Ga.blend_func;hb=va.blend_func;ca=Ga.colorMask;ga=va.colorMask;ac=Ga.depth_range;Ia=va.depth_range;jf=Ga.polygonOffset_offset;Tb=va.polygonOffset_offset;ye=Ga.sample_coverage;Cd=va.sample_coverage;xd=Ga.scissor_box;Wd=va.scissor_box;
Ae=Ga.stencil_func;zd=va.stencil_func;Vd=Ga.stencil_opBack;oe=va.stencil_opBack;he=Ga.stencil_opFront;Nd=va.stencil_opFront;fe=Ga.viewport;ee=va.viewport;$d={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var d,b,e,g,k,l;d=fa.next;d!==fa.cur&&(d?H.bindFramebuffer(36160,d.framebuffer):H.bindFramebuffer(36160,null),fa.cur=d);if(va.dirty){var v,f,u,q,p,Y,B,C,E,pa,D,h,ka,x,r,A,za,L,R,da,Q,F,T,t,U,oa,Z,G,ma,ua,Ka,cb,Mb,ab;v=Ga.dither;
v!==va.dither&&(v?H.enable(3024):H.disable(3024),va.dither=v);f=wa[0];u=wa[1];if(f!==Ha[0]||u!==Ha[1])H.blendEquationSeparate(f,u),Ha[0]=f,Ha[1]=u;q=Ga.depth_func;q!==va.depth_func&&(H.depthFunc(q),va.depth_func=q);p=ac[0];Y=ac[1];if(p!==Ia[0]||Y!==Ia[1])H.depthRange(p,Y),Ia[0]=p,Ia[1]=Y;B=Ga.depth_mask;B!==va.depth_mask&&(H.depthMask(B),va.depth_mask=B);C=ca[0];E=ca[1];pa=ca[2];D=ca[3];if(C!==ga[0]||E!==ga[1]||pa!==ga[2]||D!==ga[3])H.colorMask(C,E,pa,D),ga[0]=C,ga[1]=E,ga[2]=pa,ga[3]=D;h=Ga.cull_enable;
h!==va.cull_enable&&(h?H.enable(2884):H.disable(2884),va.cull_enable=h);ka=Ga.cull_face;ka!==va.cull_face&&(H.cullFace(ka),va.cull_face=ka);x=Ga.frontFace;x!==va.frontFace&&(H.frontFace(x),va.frontFace=x);r=Ga.lineWidth;r!==va.lineWidth&&(H.lineWidth(r),va.lineWidth=r);A=Ga.polygonOffset_enable;A!==va.polygonOffset_enable&&(A?H.enable(32823):H.disable(32823),va.polygonOffset_enable=A);za=jf[0];L=jf[1];if(za!==Tb[0]||L!==Tb[1])H.polygonOffset(za,L),Tb[0]=za,Tb[1]=L;R=Ga.sample_alpha;R!==va.sample_alpha&&
(R?H.enable(32926):H.disable(32926),va.sample_alpha=R);da=Ga.sample_enable;da!==va.sample_enable&&(da?H.enable(32928):H.disable(32928),va.sample_enable=da);Q=ye[0];F=ye[1];if(Q!==Cd[0]||F!==Cd[1])H.sampleCoverage(Q,F),Cd[0]=Q,Cd[1]=F;T=Ga.stencil_mask;T!==va.stencil_mask&&(H.stencilMask(T),va.stencil_mask=T);t=Ae[0];U=Ae[1];oa=Ae[2];if(t!==zd[0]||U!==zd[1]||oa!==zd[2])H.stencilFunc(t,U,oa),zd[0]=t,zd[1]=U,zd[2]=oa;Z=he[0];G=he[1];ma=he[2];ua=he[3];if(Z!==Nd[0]||G!==Nd[1]||ma!==Nd[2]||ua!==Nd[3])H.stencilOpSeparate(Z,
G,ma,ua),Nd[0]=Z,Nd[1]=G,Nd[2]=ma,Nd[3]=ua;Ka=Vd[0];cb=Vd[1];Mb=Vd[2];ab=Vd[3];if(Ka!==oe[0]||cb!==oe[1]||Mb!==oe[2]||ab!==oe[3])H.stencilOpSeparate(Ka,cb,Mb,ab),oe[0]=Ka,oe[1]=cb,oe[2]=Mb,oe[3]=ab}H.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;H.enable(3042);va.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);hb[0]=770;hb[1]=771;hb[2]=773;hb[3]=1;H.disable(2929);va.depth_enable=!1;H.enable(3089);va.scissor_enable=!0;H.disable(2960);va.stencil_enable=!1;if(b=va.profile)e=performance.now(),z.count+=
c;H.useProgram(ia.program);g=Gb.angle_instanced_arrays;var ob;Ea.setVAO(null);H.uniform1i(I.location,!1);H.uniform1i(Ca.location,O.bind());ob=Fa.instances;for(k=0;k<c;++k){l=a[k];var Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xd,fe,jd,De,Od,pe,be,Pd,Id,
Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Va=l.viewport;Ic=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:J.framebufferWidth-Ic;rc="height"in Va?Va.height|0:J.framebufferHeight-Hb;Nb=J.viewportWidth;J.viewportWidth=Ib;kb=J.viewportHeight;J.viewportHeight=rc;H.viewport(Ic,
Hb,Ib,rc);ee[0]=Ic;ee[1]=Hb;ee[2]=Ib;ee[3]=rc;Fb=l.viewport;Cb=Fb.x|0;xb=Fb.y|0;ib="width"in Fb?Fb.width|0:J.framebufferWidth-Cb;Zb="height"in Fb?Fb.height|0:J.framebufferHeight-xb;H.scissor(Cb,xb,ib,Zb);Wd[0]=Cb;Wd[1]=xb;Wd[2]=ib;Wd[3]=Zb;Ob=K.call(this,J,l,k);rb=!1;Ta=null;Pb=0;pb=!1;jb=bc=0;qb=1;Ja=0;sb=5126;Na=gb=eb=La=0;ta(Ob)?(rb=!0,Ta=n.createStream(34962,Ob),sb=Ta.dtype):(Ta=n.getBuffer(Ob))?sb=Ta.dtype:"constant"in Ob?(qb=2,"number"===typeof Ob.constant?(eb=Ob.constant,gb=Na=La=0):(eb=0<
Ob.constant.length?Ob.constant[0]:0,gb=1<Ob.constant.length?Ob.constant[1]:0,Na=2<Ob.constant.length?Ob.constant[2]:0,La=3<Ob.constant.length?Ob.constant[3]:0)):(Ta=ta(Ob.buffer)?n.createStream(34962,Ob.buffer):n.getBuffer(Ob.buffer),sb="type"in Ob?$d[Ob.type]:Ta.dtype,pb=!!Ob.normalized,jb=Ob.size|0,bc=Ob.offset|0,Ja=Ob.stride|0,Pb=Ob.divisor|0);lb=Qa.location;Wa=y[lb];if(1===qb){Wa.buffer||H.enableVertexAttribArray(lb);ub=jb||1;if(Wa.type!==sb||Wa.size!==ub||Wa.buffer!==Ta||Wa.normalized!==pb||
Wa.offset!==bc||Wa.stride!==Ja)H.bindBuffer(34962,Ta.buffer),H.vertexAttribPointer(lb,ub,sb,pb,Ja,bc),Wa.type=sb,Wa.size=ub,Wa.buffer=Ta,Wa.normalized=pb,Wa.offset=bc,Wa.stride=Ja;Wa.divisor!==Pb&&(g.vertexAttribDivisorANGLE(lb,Pb),Wa.divisor=Pb)}else if(Wa.buffer&&(H.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==eb||Wa.y!==gb||Wa.z!==Na||Wa.w!==La)H.vertexAttrib4f(lb,eb,gb,Na,La),Wa.x=eb,Wa.y=gb,Wa.z=Na,Wa.w=La;tb=ha.call(this,J,l,k);Pa=!1;Cc=null;Sa=0;Jb=!1;Ma=Db=0;Ld=1;Za=0;Kb=5126;$b=Oa=
mb=Lb=0;ta(tb)?(Pa=!0,Cc=n.createStream(34962,tb),Kb=Cc.dtype):(Cc=n.getBuffer(tb))?Kb=Cc.dtype:"constant"in tb?(Ld=2,"number"===typeof tb.constant?(mb=tb.constant,Oa=$b=Lb=0):(mb=0<tb.constant.length?tb.constant[0]:0,Oa=1<tb.constant.length?tb.constant[1]:0,$b=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Cc=ta(tb.buffer)?n.createStream(34962,tb.buffer):n.getBuffer(tb.buffer),Kb="type"in tb?$d[tb.type]:Cc.dtype,Jb=!!tb.normalized,Ma=tb.size|0,Db=tb.offset|0,Za=
tb.stride|0,Sa=tb.divisor|0);Ra=dc.location;vb=y[Ra];if(1===Ld){vb.buffer||H.enableVertexAttribArray(Ra);wb=Ma||1;if(vb.type!==Kb||vb.size!==wb||vb.buffer!==Cc||vb.normalized!==Jb||vb.offset!==Db||vb.stride!==Za)H.bindBuffer(34962,Cc.buffer),H.vertexAttribPointer(Ra,wb,Kb,Jb,Za,Db),vb.type=Kb,vb.size=wb,vb.buffer=Cc,vb.normalized=Jb,vb.offset=Db,vb.stride=Za;vb.divisor!==Sa&&(g.vertexAttribDivisorANGLE(Ra,Sa),vb.divisor=Sa)}else if(vb.buffer&&(H.disableVertexAttribArray(Ra),vb.buffer=null),vb.x!==
mb||vb.y!==Oa||vb.z!==$b||vb.w!==Lb)H.vertexAttrib4f(Ra,mb,Oa,$b,Lb),vb.x=mb,vb.y=Oa,vb.z=$b,vb.w=Lb;Ua=Ba.call(this,J,l,k);nb=!1;gc=null;Ac=0;vc=!1;jc=bb=0;Sc=1;Xa=0;Mc=5126;tc=Vb=$a=zb=0;ta(Ua)?(nb=!0,gc=n.createStream(34962,Ua),Mc=gc.dtype):(gc=n.getBuffer(Ua))?Mc=gc.dtype:"constant"in Ua?(Sc=2,"number"===typeof Ua.constant?($a=Ua.constant,Vb=tc=zb=0):($a=0<Ua.constant.length?Ua.constant[0]:0,Vb=1<Ua.constant.length?Ua.constant[1]:0,tc=2<Ua.constant.length?Ua.constant[2]:0,zb=3<Ua.constant.length?
Ua.constant[3]:0)):(gc=ta(Ua.buffer)?n.createStream(34962,Ua.buffer):n.getBuffer(Ua.buffer),Mc="type"in Ua?$d[Ua.type]:gc.dtype,vc=!!Ua.normalized,jc=Ua.size|0,bb=Ua.offset|0,Xa=Ua.stride|0,Ac=Ua.divisor|0);Wb=la.location;Qb=y[Wb];if(1===Sc){Qb.buffer||H.enableVertexAttribArray(Wb);Kc=jc||1;if(Qb.type!==Mc||Qb.size!==Kc||Qb.buffer!==gc||Qb.normalized!==vc||Qb.offset!==bb||Qb.stride!==Xa)H.bindBuffer(34962,gc.buffer),H.vertexAttribPointer(Wb,Kc,Mc,vc,Xa,bb),Qb.type=Mc,Qb.size=Kc,Qb.buffer=gc,Qb.normalized=
vc,Qb.offset=bb,Qb.stride=Xa;Qb.divisor!==Ac&&(g.vertexAttribDivisorANGLE(Wb,Ac),Qb.divisor=Ac)}else if(Qb.buffer&&(H.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==$a||Qb.y!==Vb||Qb.z!==tc||Qb.w!==zb)H.vertexAttrib4f(Wb,$a,Vb,tc,zb),Qb.x=$a,Qb.y=Vb,Qb.z=tc,Qb.w=zb;Sb=W.call(this,J,l,k);qd=!1;Ec=null;Hd=0;Nc=!1;td=Xc=0;nc=1;wc=0;hc=5126;Xb=Ub=sc=db=0;ta(Sb)?(qd=!0,Ec=n.createStream(34962,Sb),hc=Ec.dtype):(Ec=n.getBuffer(Sb))?hc=Ec.dtype:"constant"in Sb?(nc=2,"number"===typeof Sb.constant?(sc=
Sb.constant,Ub=Xb=db=0):(sc=0<Sb.constant.length?Sb.constant[0]:0,Ub=1<Sb.constant.length?Sb.constant[1]:0,Xb=2<Sb.constant.length?Sb.constant[2]:0,db=3<Sb.constant.length?Sb.constant[3]:0)):(Ec=ta(Sb.buffer)?n.createStream(34962,Sb.buffer):n.getBuffer(Sb.buffer),hc="type"in Sb?$d[Sb.type]:Ec.dtype,Nc=!!Sb.normalized,td=Sb.size|0,Xc=Sb.offset|0,wc=Sb.stride|0,Hd=Sb.divisor|0);ec=Ya.location;ic=y[ec];if(1===nc){ic.buffer||H.enableVertexAttribArray(ec);yc=td||1;if(ic.type!==hc||ic.size!==yc||ic.buffer!==
Ec||ic.normalized!==Nc||ic.offset!==Xc||ic.stride!==wc)H.bindBuffer(34962,Ec.buffer),H.vertexAttribPointer(ec,yc,hc,Nc,wc,Xc),ic.type=hc,ic.size=yc,ic.buffer=Ec,ic.normalized=Nc,ic.offset=Xc,ic.stride=wc;ic.divisor!==Hd&&(g.vertexAttribDivisorANGLE(ec,Hd),ic.divisor=Hd)}else if(ic.buffer&&(H.disableVertexAttribArray(ec),ic.buffer=null),ic.x!==sc||ic.y!==Ub||ic.z!==Xb||ic.w!==db)H.vertexAttrib4f(ec,sc,Ub,Xb,db),ic.x=sc,ic.y=Ub,ic.z=Xb,ic.w=db;Bc=ba.call(this,J,l,k);cd=!1;Qc=null;Rc=0;Tc=!1;md=Yc=0;
dd=1;Zc=0;kc=5126;ed=Wc=$c=cc=0;ta(Bc)?(cd=!0,Qc=n.createStream(34962,Bc),kc=Qc.dtype):(Qc=n.getBuffer(Bc))?kc=Qc.dtype:"constant"in Bc?(dd=2,"number"===typeof Bc.constant?($c=Bc.constant,Wc=ed=cc=0):($c=0<Bc.constant.length?Bc.constant[0]:0,Wc=1<Bc.constant.length?Bc.constant[1]:0,ed=2<Bc.constant.length?Bc.constant[2]:0,cc=3<Bc.constant.length?Bc.constant[3]:0)):(Qc=ta(Bc.buffer)?n.createStream(34962,Bc.buffer):n.getBuffer(Bc.buffer),kc="type"in Bc?$d[Bc.type]:Qc.dtype,Tc=!!Bc.normalized,md=Bc.size|
0,Yc=Bc.offset|0,Zc=Bc.stride|0,Rc=Bc.divisor|0);zc=ja.location;id=y[zc];if(1===dd){id.buffer||H.enableVertexAttribArray(zc);ud=md||1;if(id.type!==kc||id.size!==ud||id.buffer!==Qc||id.normalized!==Tc||id.offset!==Yc||id.stride!==Zc)H.bindBuffer(34962,Qc.buffer),H.vertexAttribPointer(zc,ud,kc,Tc,Zc,Yc),id.type=kc,id.size=ud,id.buffer=Qc,id.normalized=Tc,id.offset=Yc,id.stride=Zc;id.divisor!==Rc&&(g.vertexAttribDivisorANGLE(zc,Rc),id.divisor=Rc)}else if(id.buffer&&(H.disableVertexAttribArray(zc),id.buffer=
null),id.x!==$c||id.y!==Wc||id.z!==ed||id.w!==cc)H.vertexAttrib4f(zc,$c,Wc,ed,cc),id.x=$c,id.y=Wc,id.z=ed,id.w=cc;xd=S.call(this,J,l,k);fe=!1;jd=null;De=0;Od=!1;be=pe=0;Pd=1;Id=0;Fd=5126;sd=vd=Uc=od=0;ta(xd)?(fe=!0,jd=n.createStream(34962,xd),Fd=jd.dtype):(jd=n.getBuffer(xd))?Fd=jd.dtype:"constant"in xd?(Pd=2,"number"===typeof xd.constant?(Uc=xd.constant,vd=sd=od=0):(Uc=0<xd.constant.length?xd.constant[0]:0,vd=1<xd.constant.length?xd.constant[1]:0,sd=2<xd.constant.length?xd.constant[2]:0,od=3<xd.constant.length?
xd.constant[3]:0)):(jd=ta(xd.buffer)?n.createStream(34962,xd.buffer):n.getBuffer(xd.buffer),Fd="type"in xd?$d[xd.type]:jd.dtype,Od=!!xd.normalized,be=xd.size|0,pe=xd.offset|0,Id=xd.stride|0,De=xd.divisor|0);kd=ra.location;wd=y[kd];if(1===Pd){wd.buffer||H.enableVertexAttribArray(kd);Bd=be||1;if(wd.type!==Fd||wd.size!==Bd||wd.buffer!==jd||wd.normalized!==Od||wd.offset!==pe||wd.stride!==Id)H.bindBuffer(34962,jd.buffer),H.vertexAttribPointer(kd,Bd,Fd,Od,Id,pe),wd.type=Fd,wd.size=Bd,wd.buffer=jd,wd.normalized=
Od,wd.offset=pe,wd.stride=Id;wd.divisor!==De&&(g.vertexAttribDivisorANGLE(kd,De),wd.divisor=De)}else if(wd.buffer&&(H.disableVertexAttribArray(kd),wd.buffer=null),wd.x!==Uc||wd.y!==vd||wd.z!==sd||wd.w!==od)H.vertexAttrib4f(kd,Uc,vd,sd,od),wd.x=Uc,wd.y=vd,wd.z=sd,wd.w=od;Dd=M.call(this,J,l,k);je=!1;re=null;te=0;le=!1;ge=ke=0;ue=1;ce=0;me=5126;qe=ve=hd=Oc=0;ta(Dd)?(je=!0,re=n.createStream(34962,Dd),me=re.dtype):(re=n.getBuffer(Dd))?me=re.dtype:"constant"in Dd?(ue=2,"number"===typeof Dd.constant?(hd=
Dd.constant,ve=qe=Oc=0):(hd=0<Dd.constant.length?Dd.constant[0]:0,ve=1<Dd.constant.length?Dd.constant[1]:0,qe=2<Dd.constant.length?Dd.constant[2]:0,Oc=3<Dd.constant.length?Dd.constant[3]:0)):(re=ta(Dd.buffer)?n.createStream(34962,Dd.buffer):n.getBuffer(Dd.buffer),me="type"in Dd?$d[Dd.type]:re.dtype,le=!!Dd.normalized,ge=Dd.size|0,ke=Dd.offset|0,ce=Dd.stride|0,te=Dd.divisor|0);Kd=w.location;Qd=y[Kd];if(1===ue){Qd.buffer||H.enableVertexAttribArray(Kd);Rd=ge||4;if(Qd.type!==me||Qd.size!==Rd||Qd.buffer!==
re||Qd.normalized!==le||Qd.offset!==ke||Qd.stride!==ce)H.bindBuffer(34962,re.buffer),H.vertexAttribPointer(Kd,Rd,me,le,ce,ke),Qd.type=me,Qd.size=Rd,Qd.buffer=re,Qd.normalized=le,Qd.offset=ke,Qd.stride=ce;Qd.divisor!==te&&(g.vertexAttribDivisorANGLE(Kd,te),Qd.divisor=te)}else if(Qd.buffer&&(H.disableVertexAttribArray(Kd),Qd.buffer=null),Qd.x!==hd||Qd.y!==ve||Qd.z!==qe||Qd.w!==Oc)H.vertexAttrib4f(Kd,hd,ve,qe,Oc),Qd.x=hd,Qd.y=ve,Qd.z=qe,Qd.w=Oc;Sd=N.call(this,J,l,k);ne=!1;ze=null;Ee=0;se=!1;Ue=Te=0;
Pe=1;we=0;He=5126;Ie=Le=Ke=Je=0;ta(Sd)?(ne=!0,ze=n.createStream(34962,Sd),He=ze.dtype):(ze=n.getBuffer(Sd))?He=ze.dtype:"constant"in Sd?(Pe=2,"number"===typeof Sd.constant?(Ke=Sd.constant,Le=Ie=Je=0):(Ke=0<Sd.constant.length?Sd.constant[0]:0,Le=1<Sd.constant.length?Sd.constant[1]:0,Ie=2<Sd.constant.length?Sd.constant[2]:0,Je=3<Sd.constant.length?Sd.constant[3]:0)):(ze=ta(Sd.buffer)?n.createStream(34962,Sd.buffer):n.getBuffer(Sd.buffer),He="type"in Sd?$d[Sd.type]:ze.dtype,se=!!Sd.normalized,Ue=Sd.size|
0,Te=Sd.offset|0,we=Sd.stride|0,Ee=Sd.divisor|0);Md=xa.location;Yd=y[Md];if(1===Pe){Yd.buffer||H.enableVertexAttribArray(Md);ae=Ue||4;if(Yd.type!==He||Yd.size!==ae||Yd.buffer!==ze||Yd.normalized!==se||Yd.offset!==Te||Yd.stride!==we)H.bindBuffer(34962,ze.buffer),H.vertexAttribPointer(Md,ae,He,se,we,Te),Yd.type=He,Yd.size=ae,Yd.buffer=ze,Yd.normalized=se,Yd.offset=Te,Yd.stride=we;Yd.divisor!==Ee&&(g.vertexAttribDivisorANGLE(Md,Ee),Yd.divisor=Ee)}else if(Yd.buffer&&(H.disableVertexAttribArray(Md),Yd.buffer=
null),Yd.x!==Ke||Yd.y!==Le||Yd.z!==Ie||Yd.w!==Je)H.vertexAttrib4f(Md,Ke,Le,Ie,Je),Yd.x=Ke,Yd.y=Le,Yd.z=Ie,Yd.w=Je;de=m.call(this,J,l,k);Me=!1;Gd=null;Td=0;Fe=!1;cf=Ne=0;bf=1;Ve=0;Qe=5126;Xe=We=Ze=af=0;ta(de)?(Me=!0,Gd=n.createStream(34962,de),Qe=Gd.dtype):(Gd=n.getBuffer(de))?Qe=Gd.dtype:"constant"in de?(bf=2,"number"===typeof de.constant?(Ze=de.constant,We=Xe=af=0):(Ze=0<de.constant.length?de.constant[0]:0,We=1<de.constant.length?de.constant[1]:0,Xe=2<de.constant.length?de.constant[2]:0,af=3<de.constant.length?
de.constant[3]:0)):(Gd=ta(de.buffer)?n.createStream(34962,de.buffer):n.getBuffer(de.buffer),Qe="type"in de?$d[de.type]:Gd.dtype,Fe=!!de.normalized,cf=de.size|0,Ne=de.offset|0,Ve=de.stride|0,Td=de.divisor|0);Ud=aa.location;Zd=y[Ud];if(1===bf){Zd.buffer||H.enableVertexAttribArray(Ud);Ye=cf||1;if(Zd.type!==Qe||Zd.size!==Ye||Zd.buffer!==Gd||Zd.normalized!==Fe||Zd.offset!==Ne||Zd.stride!==Ve)H.bindBuffer(34962,Gd.buffer),H.vertexAttribPointer(Ud,Ye,Qe,Fe,Ve,Ne),Zd.type=Qe,Zd.size=Ye,Zd.buffer=Gd,Zd.normalized=
Fe,Zd.offset=Ne,Zd.stride=Ve;Zd.divisor!==Td&&(g.vertexAttribDivisorANGLE(Ud,Td),Zd.divisor=Td)}else if(Zd.buffer&&(H.disableVertexAttribArray(Ud),Zd.buffer=null),Zd.x!==Ze||Zd.y!==We||Zd.z!==Xe||Zd.w!==af)H.vertexAttrib4f(Ud,Ze,We,Xe,af),Zd.x=Ze,Zd.y=We,Zd.z=Xe,Zd.w=af;kf=J.pixelRatio;k&&of===kf||(of=kf,H.uniform1f(ya.location,kf));ff=l.scale;lf=ff[0];nf=ff[1];k&&mf===lf&&sf===nf||(mf=lf,sf=nf,H.uniform2f(ea.location,lf,nf));pf=l.scaleFract;tf=pf[0];Df=pf[1];k&&Cf===tf&&Re===Df||(Cf=tf,Re=Df,H.uniform2f(Da.location,
tf,Df));Ge=l.translate;qf=Ge[0];Ef=Ge[1];k&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,H.uniform2f(qa.location,qf,Ef));Bf=l.translateFract;Ff=Bf[0];xf=Bf[1];k&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,H.uniform2f(Aa.location,Ff,xf));wf=P.call(this,J,l,k);zf=wf[0];Jf=wf[1];k&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,H.uniform2f(sa.location,zf,Jf));Lf=l.opacity;k&&Mf===Lf||(Mf=Lf,H.uniform1f(na.location,Lf));(uf=l.markerTexture)&&"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;H.uniform1i(V.location,Rf.bind());If=l.elements;
vf=null;(vf=(dg=ta(If))?Yb.createStream(If):Yb.getElements(If))&&H.bindBuffer(34963,vf.buffer.buffer);Sf=l.offset;if(Tf=l.count)0<ob?vf?g.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),ob):g.drawArraysInstancedANGLE(0,Sf,Tf,ob):0>ob&&(vf?H.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):H.drawArrays(0,Sf,Tf)),J.viewportWidth=Nb,J.viewportHeight=kb,rb&&n.destroyStream(Ta),Pa&&n.destroyStream(Cc),nb&&n.destroyStream(gc),qd&&n.destroyStream(Ec),cd&&n.destroyStream(Qc),fe&&n.destroyStream(jd),
je&&n.destroyStream(re),ne&&n.destroyStream(ze),Me&&n.destroyStream(Gd),Rf.unbind(),dg&&Yb.destroyStream(vf)}O.unbind();va.dirty=!0;Ea.setVAO(null);b&&(z.cpuTime+=performance.now()-e)},draw:function(a){var c,d,e,k,m,u,q,M,p,B,C,N,E,pa,K,S,D,ka,P,r,O,za,L,R,Q,t,U,W,oa,Z,ba,G,ia,ha,ma,ua,Ba,Ka,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,xd,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,
fe,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we;c=fa.next;c!==fa.cur&&(c?H.bindFramebuffer(36160,c.framebuffer):H.bindFramebuffer(36160,null),fa.cur=c);if(va.dirty){var He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf;He=Ga.dither;He!==va.dither&&(He?H.enable(3024):H.disable(3024),
va.dither=He);Je=wa[0];Ke=wa[1];if(Je!==Ha[0]||Ke!==Ha[1])H.blendEquationSeparate(Je,Ke),Ha[0]=Je,Ha[1]=Ke;Le=Ga.depth_func;Le!==va.depth_func&&(H.depthFunc(Le),va.depth_func=Le);Ie=ac[0];Md=ac[1];if(Ie!==Ia[0]||Md!==Ia[1])H.depthRange(Ie,Md),Ia[0]=Ie,Ia[1]=Md;Yd=Ga.depth_mask;Yd!==va.depth_mask&&(H.depthMask(Yd),va.depth_mask=Yd);ae=ca[0];de=ca[1];Me=ca[2];Gd=ca[3];if(ae!==ga[0]||de!==ga[1]||Me!==ga[2]||Gd!==ga[3])H.colorMask(ae,de,Me,Gd),ga[0]=ae,ga[1]=de,ga[2]=Me,ga[3]=Gd;Td=Ga.cull_enable;Td!==
va.cull_enable&&(Td?H.enable(2884):H.disable(2884),va.cull_enable=Td);Fe=Ga.cull_face;Fe!==va.cull_face&&(H.cullFace(Fe),va.cull_face=Fe);Ne=Ga.frontFace;Ne!==va.frontFace&&(H.frontFace(Ne),va.frontFace=Ne);cf=Ga.lineWidth;cf!==va.lineWidth&&(H.lineWidth(cf),va.lineWidth=cf);bf=Ga.polygonOffset_enable;bf!==va.polygonOffset_enable&&(bf?H.enable(32823):H.disable(32823),va.polygonOffset_enable=bf);Ve=jf[0];Qe=jf[1];if(Ve!==Tb[0]||Qe!==Tb[1])H.polygonOffset(Ve,Qe),Tb[0]=Ve,Tb[1]=Qe;af=Ga.sample_alpha;
af!==va.sample_alpha&&(af?H.enable(32926):H.disable(32926),va.sample_alpha=af);Ze=Ga.sample_enable;Ze!==va.sample_enable&&(Ze?H.enable(32928):H.disable(32928),va.sample_enable=Ze);We=ye[0];Xe=ye[1];if(We!==Cd[0]||Xe!==Cd[1])H.sampleCoverage(We,Xe),Cd[0]=We,Cd[1]=Xe;Ud=Ga.stencil_mask;Ud!==va.stencil_mask&&(H.stencilMask(Ud),va.stencil_mask=Ud);Zd=Ae[0];Ye=Ae[1];kf=Ae[2];if(Zd!==zd[0]||Ye!==zd[1]||kf!==zd[2])H.stencilFunc(Zd,Ye,kf),zd[0]=Zd,zd[1]=Ye,zd[2]=kf;of=he[0];ff=he[1];lf=he[2];mf=he[3];if(of!==
Nd[0]||ff!==Nd[1]||lf!==Nd[2]||mf!==Nd[3])H.stencilOpSeparate(of,ff,lf,mf),Nd[0]=of,Nd[1]=ff,Nd[2]=lf,Nd[3]=mf;nf=Vd[0];sf=Vd[1];pf=Vd[2];tf=Vd[3];if(nf!==oe[0]||sf!==oe[1]||pf!==oe[2]||tf!==oe[3])H.stencilOpSeparate(nf,sf,pf,tf),oe[0]=nf,oe[1]=sf,oe[2]=pf,oe[3]=tf}d=a.viewport;e=d.x|0;k=d.y|0;m="width"in d?d.width|0:J.framebufferWidth-e;u="height"in d?d.height|0:J.framebufferHeight-k;q=J.viewportWidth;J.viewportWidth=m;M=J.viewportHeight;J.viewportHeight=u;H.viewport(e,k,m,u);ee[0]=e;ee[1]=k;ee[2]=
m;ee[3]=u;H.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;H.enable(3042);va.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);hb[0]=770;hb[1]=771;hb[2]=773;hb[3]=1;H.disable(2929);va.depth_enable=!1;p=a.viewport;B=p.x|0;C=p.y|0;N="width"in p?p.width|0:J.framebufferWidth-B;E="height"in p?p.height|0:J.framebufferHeight-C;H.scissor(B,C,N,E);Wd[0]=B;Wd[1]=C;Wd[2]=N;Wd[3]=E;H.enable(3089);va.scissor_enable=!0;H.disable(2960);va.stencil_enable=!1;if(pa=va.profile)K=performance.now(),z.count++;H.useProgram(v.program);
S=Gb.angle_instanced_arrays;Ea.setVAO(null);D=Y.call(this,J,a,0);ka=!1;P=null;r=0;O=!1;L=za=0;R=1;Q=0;t=5126;Z=oa=W=U=0;ta(D)?(ka=!0,P=n.createStream(34962,D),t=P.dtype):(P=n.getBuffer(D))?t=P.dtype:"constant"in D?(R=2,"number"===typeof D.constant?(W=D.constant,oa=Z=U=0):(W=0<D.constant.length?D.constant[0]:0,oa=1<D.constant.length?D.constant[1]:0,Z=2<D.constant.length?D.constant[2]:0,U=3<D.constant.length?D.constant[3]:0)):(P=ta(D.buffer)?n.createStream(34962,D.buffer):n.getBuffer(D.buffer),t="type"in
D?$d[D.type]:P.dtype,O=!!D.normalized,L=D.size|0,za=D.offset|0,Q=D.stride|0,r=D.divisor|0);ba=Qa.location;G=y[ba];if(1===R){G.buffer||H.enableVertexAttribArray(ba);ia=L||1;if(G.type!==t||G.size!==ia||G.buffer!==P||G.normalized!==O||G.offset!==za||G.stride!==Q)H.bindBuffer(34962,P.buffer),H.vertexAttribPointer(ba,ia,t,O,Q,za),G.type=t,G.size=ia,G.buffer=P,G.normalized=O,G.offset=za,G.stride=Q;G.divisor!==r&&(S.vertexAttribDivisorANGLE(ba,r),G.divisor=r)}else if(G.buffer&&(H.disableVertexAttribArray(ba),
G.buffer=null),G.x!==W||G.y!==oa||G.z!==Z||G.w!==U)H.vertexAttrib4f(ba,W,oa,Z,U),G.x=W,G.y=oa,G.z=Z,G.w=U;ha=f.call(this,J,a,0);ma=!1;ua=null;Ba=0;Ka=!1;Mb=cb=0;ab=1;ob=0;Va=5126;rc=Ib=Hb=Ic=0;ta(ha)?(ma=!0,ua=n.createStream(34962,ha),Va=ua.dtype):(ua=n.getBuffer(ha))?Va=ua.dtype:"constant"in ha?(ab=2,"number"===typeof ha.constant?(Hb=ha.constant,Ib=rc=Ic=0):(Hb=0<ha.constant.length?ha.constant[0]:0,Ib=1<ha.constant.length?ha.constant[1]:0,rc=2<ha.constant.length?ha.constant[2]:0,Ic=3<ha.constant.length?
ha.constant[3]:0)):(ua=ta(ha.buffer)?n.createStream(34962,ha.buffer):n.getBuffer(ha.buffer),Va="type"in ha?$d[ha.type]:ua.dtype,Ka=!!ha.normalized,Mb=ha.size|0,cb=ha.offset|0,ob=ha.stride|0,Ba=ha.divisor|0);Nb=dc.location;kb=y[Nb];if(1===ab){kb.buffer||H.enableVertexAttribArray(Nb);Fb=Mb||1;if(kb.type!==Va||kb.size!==Fb||kb.buffer!==ua||kb.normalized!==Ka||kb.offset!==cb||kb.stride!==ob)H.bindBuffer(34962,ua.buffer),H.vertexAttribPointer(Nb,Fb,Va,Ka,ob,cb),kb.type=Va,kb.size=Fb,kb.buffer=ua,kb.normalized=
Ka,kb.offset=cb,kb.stride=ob;kb.divisor!==Ba&&(S.vertexAttribDivisorANGLE(Nb,Ba),kb.divisor=Ba)}else if(kb.buffer&&(H.disableVertexAttribArray(Nb),kb.buffer=null),kb.x!==Hb||kb.y!==Ib||kb.z!==rc||kb.w!==Ic)H.vertexAttrib4f(Nb,Hb,Ib,rc,Ic),kb.x=Hb,kb.y=Ib,kb.z=rc,kb.w=Ic;Cb=g.call(this,J,a,0);xb=!1;ib=null;Zb=0;Ob=!1;Ta=rb=0;Pb=1;pb=0;bc=5126;sb=Ja=qb=jb=0;ta(Cb)?(xb=!0,ib=n.createStream(34962,Cb),bc=ib.dtype):(ib=n.getBuffer(Cb))?bc=ib.dtype:"constant"in Cb?(Pb=2,"number"===typeof Cb.constant?(qb=
Cb.constant,Ja=sb=jb=0):(qb=0<Cb.constant.length?Cb.constant[0]:0,Ja=1<Cb.constant.length?Cb.constant[1]:0,sb=2<Cb.constant.length?Cb.constant[2]:0,jb=3<Cb.constant.length?Cb.constant[3]:0)):(ib=ta(Cb.buffer)?n.createStream(34962,Cb.buffer):n.getBuffer(Cb.buffer),bc="type"in Cb?$d[Cb.type]:ib.dtype,Ob=!!Cb.normalized,Ta=Cb.size|0,rb=Cb.offset|0,pb=Cb.stride|0,Zb=Cb.divisor|0);La=la.location;eb=y[La];if(1===Pb){eb.buffer||H.enableVertexAttribArray(La);gb=Ta||1;if(eb.type!==bc||eb.size!==gb||eb.buffer!==
ib||eb.normalized!==Ob||eb.offset!==rb||eb.stride!==pb)H.bindBuffer(34962,ib.buffer),H.vertexAttribPointer(La,gb,bc,Ob,pb,rb),eb.type=bc,eb.size=gb,eb.buffer=ib,eb.normalized=Ob,eb.offset=rb,eb.stride=pb;eb.divisor!==Zb&&(S.vertexAttribDivisorANGLE(La,Zb),eb.divisor=Zb)}else if(eb.buffer&&(H.disableVertexAttribArray(La),eb.buffer=null),eb.x!==qb||eb.y!==Ja||eb.z!==sb||eb.w!==jb)H.vertexAttrib4f(La,qb,Ja,sb,jb),eb.x=qb,eb.y=Ja,eb.z=sb,eb.w=jb;Na=l.call(this,J,a,0);lb=!1;Wa=null;ub=0;tb=!1;Cc=Pa=0;
Sa=1;Jb=0;Db=5126;Kb=Za=xd=Ma=0;ta(Na)?(lb=!0,Wa=n.createStream(34962,Na),Db=Wa.dtype):(Wa=n.getBuffer(Na))?Db=Wa.dtype:"constant"in Na?(Sa=2,"number"===typeof Na.constant?(xd=Na.constant,Za=Kb=Ma=0):(xd=0<Na.constant.length?Na.constant[0]:0,Za=1<Na.constant.length?Na.constant[1]:0,Kb=2<Na.constant.length?Na.constant[2]:0,Ma=3<Na.constant.length?Na.constant[3]:0)):(Wa=ta(Na.buffer)?n.createStream(34962,Na.buffer):n.getBuffer(Na.buffer),Db="type"in Na?$d[Na.type]:Wa.dtype,tb=!!Na.normalized,Cc=Na.size|
0,Pa=Na.offset|0,Jb=Na.stride|0,ub=Na.divisor|0);Lb=Ya.location;mb=y[Lb];if(1===Sa){mb.buffer||H.enableVertexAttribArray(Lb);Oa=Cc||1;if(mb.type!==Db||mb.size!==Oa||mb.buffer!==Wa||mb.normalized!==tb||mb.offset!==Pa||mb.stride!==Jb)H.bindBuffer(34962,Wa.buffer),H.vertexAttribPointer(Lb,Oa,Db,tb,Jb,Pa),mb.type=Db,mb.size=Oa,mb.buffer=Wa,mb.normalized=tb,mb.offset=Pa,mb.stride=Jb;mb.divisor!==ub&&(S.vertexAttribDivisorANGLE(Lb,ub),mb.divisor=ub)}else if(mb.buffer&&(H.disableVertexAttribArray(Lb),mb.buffer=
null),mb.x!==xd||mb.y!==Za||mb.z!==Kb||mb.w!==Ma)H.vertexAttrib4f(Lb,xd,Za,Kb,Ma),mb.x=xd,mb.y=Za,mb.z=Kb,mb.w=Ma;$b=b.call(this,J,a,0);Ra=!1;vb=null;wb=0;Ua=!1;gc=nb=0;Ac=1;vc=0;bb=5126;Mc=Xa=Sc=jc=0;ta($b)?(Ra=!0,vb=n.createStream(34962,$b),bb=vb.dtype):(vb=n.getBuffer($b))?bb=vb.dtype:"constant"in $b?(Ac=2,"number"===typeof $b.constant?(Sc=$b.constant,Xa=Mc=jc=0):(Sc=0<$b.constant.length?$b.constant[0]:0,Xa=1<$b.constant.length?$b.constant[1]:0,Mc=2<$b.constant.length?$b.constant[2]:0,jc=3<$b.constant.length?
$b.constant[3]:0)):(vb=ta($b.buffer)?n.createStream(34962,$b.buffer):n.getBuffer($b.buffer),bb="type"in $b?$d[$b.type]:vb.dtype,Ua=!!$b.normalized,gc=$b.size|0,nb=$b.offset|0,vc=$b.stride|0,wb=$b.divisor|0);zb=ja.location;$a=y[zb];if(1===Ac){$a.buffer||H.enableVertexAttribArray(zb);Vb=gc||1;if($a.type!==bb||$a.size!==Vb||$a.buffer!==vb||$a.normalized!==Ua||$a.offset!==nb||$a.stride!==vc)H.bindBuffer(34962,vb.buffer),H.vertexAttribPointer(zb,Vb,bb,Ua,vc,nb),$a.type=bb,$a.size=Vb,$a.buffer=vb,$a.normalized=
Ua,$a.offset=nb,$a.stride=vc;$a.divisor!==wb&&(S.vertexAttribDivisorANGLE(zb,wb),$a.divisor=wb)}else if($a.buffer&&(H.disableVertexAttribArray(zb),$a.buffer=null),$a.x!==Sc||$a.y!==Xa||$a.z!==Mc||$a.w!==jc)H.vertexAttrib4f(zb,Sc,Xa,Mc,jc),$a.x=Sc,$a.y=Xa,$a.z=Mc,$a.w=jc;tc=da.call(this,J,a,0);Wb=!1;Qb=null;Kc=0;Sb=!1;Ec=qd=0;fe=1;Nc=0;Xc=5126;hc=wc=nc=td=0;ta(tc)?(Wb=!0,Qb=n.createStream(34962,tc),Xc=Qb.dtype):(Qb=n.getBuffer(tc))?Xc=Qb.dtype:"constant"in tc?(fe=2,"number"===typeof tc.constant?(nc=
tc.constant,wc=hc=td=0):(nc=0<tc.constant.length?tc.constant[0]:0,wc=1<tc.constant.length?tc.constant[1]:0,hc=2<tc.constant.length?tc.constant[2]:0,td=3<tc.constant.length?tc.constant[3]:0)):(Qb=ta(tc.buffer)?n.createStream(34962,tc.buffer):n.getBuffer(tc.buffer),Xc="type"in tc?$d[tc.type]:Qb.dtype,Sb=!!tc.normalized,Ec=tc.size|0,qd=tc.offset|0,Nc=tc.stride|0,Kc=tc.divisor|0);db=ra.location;sc=y[db];if(1===fe){sc.buffer||H.enableVertexAttribArray(db);Ub=Ec||1;if(sc.type!==Xc||sc.size!==Ub||sc.buffer!==
Qb||sc.normalized!==Sb||sc.offset!==qd||sc.stride!==Nc)H.bindBuffer(34962,Qb.buffer),H.vertexAttribPointer(db,Ub,Xc,Sb,Nc,qd),sc.type=Xc,sc.size=Ub,sc.buffer=Qb,sc.normalized=Sb,sc.offset=qd,sc.stride=Nc;sc.divisor!==Kc&&(S.vertexAttribDivisorANGLE(db,Kc),sc.divisor=Kc)}else if(sc.buffer&&(H.disableVertexAttribArray(db),sc.buffer=null),sc.x!==nc||sc.y!==wc||sc.z!==hc||sc.w!==td)H.vertexAttrib4f(db,nc,wc,hc,td),sc.x=nc,sc.y=wc,sc.z=hc,sc.w=td;Xb=x.call(this,J,a,0);ec=!1;ic=null;yc=0;Bc=!1;Qc=cd=0;
Rc=1;Tc=0;Yc=5126;kc=Zc=dd=md=0;ta(Xb)?(ec=!0,ic=n.createStream(34962,Xb),Yc=ic.dtype):(ic=n.getBuffer(Xb))?Yc=ic.dtype:"constant"in Xb?(Rc=2,"number"===typeof Xb.constant?(dd=Xb.constant,Zc=kc=md=0):(dd=0<Xb.constant.length?Xb.constant[0]:0,Zc=1<Xb.constant.length?Xb.constant[1]:0,kc=2<Xb.constant.length?Xb.constant[2]:0,md=3<Xb.constant.length?Xb.constant[3]:0)):(ic=ta(Xb.buffer)?n.createStream(34962,Xb.buffer):n.getBuffer(Xb.buffer),Yc="type"in Xb?$d[Xb.type]:ic.dtype,Bc=!!Xb.normalized,Qc=Xb.size|
0,cd=Xb.offset|0,Tc=Xb.stride|0,yc=Xb.divisor|0);cc=w.location;$c=y[cc];if(1===Rc){$c.buffer||H.enableVertexAttribArray(cc);Wc=Qc||4;if($c.type!==Yc||$c.size!==Wc||$c.buffer!==ic||$c.normalized!==Bc||$c.offset!==cd||$c.stride!==Tc)H.bindBuffer(34962,ic.buffer),H.vertexAttribPointer(cc,Wc,Yc,Bc,Tc,cd),$c.type=Yc,$c.size=Wc,$c.buffer=ic,$c.normalized=Bc,$c.offset=cd,$c.stride=Tc;$c.divisor!==yc&&(S.vertexAttribDivisorANGLE(cc,yc),$c.divisor=yc)}else if($c.buffer&&(H.disableVertexAttribArray(cc),$c.buffer=
null),$c.x!==dd||$c.y!==Zc||$c.z!==kc||$c.w!==md)H.vertexAttrib4f(cc,dd,Zc,kc,md),$c.x=dd,$c.y=Zc,$c.z=kc,$c.w=md;ed=F.call(this,J,a,0);zc=!1;id=null;ud=0;xe=!1;jd=Ce=0;De=1;Od=0;pe=5126;Fd=Id=Pd=be=0;ta(ed)?(zc=!0,id=n.createStream(34962,ed),pe=id.dtype):(id=n.getBuffer(ed))?pe=id.dtype:"constant"in ed?(De=2,"number"===typeof ed.constant?(Pd=ed.constant,Id=Fd=be=0):(Pd=0<ed.constant.length?ed.constant[0]:0,Id=1<ed.constant.length?ed.constant[1]:0,Fd=2<ed.constant.length?ed.constant[2]:0,be=3<ed.constant.length?
ed.constant[3]:0)):(id=ta(ed.buffer)?n.createStream(34962,ed.buffer):n.getBuffer(ed.buffer),pe="type"in ed?$d[ed.type]:id.dtype,xe=!!ed.normalized,jd=ed.size|0,Ce=ed.offset|0,Od=ed.stride|0,ud=ed.divisor|0);od=xa.location;Uc=y[od];if(1===De){Uc.buffer||H.enableVertexAttribArray(od);vd=jd||4;if(Uc.type!==pe||Uc.size!==vd||Uc.buffer!==id||Uc.normalized!==xe||Uc.offset!==Ce||Uc.stride!==Od)H.bindBuffer(34962,id.buffer),H.vertexAttribPointer(od,vd,pe,xe,Od,Ce),Uc.type=pe,Uc.size=vd,Uc.buffer=id,Uc.normalized=
xe,Uc.offset=Ce,Uc.stride=Od;Uc.divisor!==ud&&(S.vertexAttribDivisorANGLE(od,ud),Uc.divisor=ud)}else if(Uc.buffer&&(H.disableVertexAttribArray(od),Uc.buffer=null),Uc.x!==Pd||Uc.y!==Id||Uc.z!==Fd||Uc.w!==be)H.vertexAttrib4f(od,Pd,Id,Fd,be),Uc.x=Pd,Uc.y=Id,Uc.z=Fd,Uc.w=be;sd=T.call(this,J,a,0);kd=!1;wd=null;Bd=0;Dd=!1;re=je=0;te=1;le=0;ke=5126;me=ce=ue=ge=0;ta(sd)?(kd=!0,wd=n.createStream(34962,sd),ke=wd.dtype):(wd=n.getBuffer(sd))?ke=wd.dtype:"constant"in sd?(te=2,"number"===typeof sd.constant?(ue=
sd.constant,ce=me=ge=0):(ue=0<sd.constant.length?sd.constant[0]:0,ce=1<sd.constant.length?sd.constant[1]:0,me=2<sd.constant.length?sd.constant[2]:0,ge=3<sd.constant.length?sd.constant[3]:0)):(wd=ta(sd.buffer)?n.createStream(34962,sd.buffer):n.getBuffer(sd.buffer),ke="type"in sd?$d[sd.type]:wd.dtype,Dd=!!sd.normalized,re=sd.size|0,je=sd.offset|0,le=sd.stride|0,Bd=sd.divisor|0);Oc=aa.location;hd=y[Oc];if(1===te){hd.buffer||H.enableVertexAttribArray(Oc);ve=re||1;if(hd.type!==ke||hd.size!==ve||hd.buffer!==
wd||hd.normalized!==Dd||hd.offset!==je||hd.stride!==le)H.bindBuffer(34962,wd.buffer),H.vertexAttribPointer(Oc,ve,ke,Dd,le,je),hd.type=ke,hd.size=ve,hd.buffer=wd,hd.normalized=Dd,hd.offset=je,hd.stride=le;hd.divisor!==Bd&&(S.vertexAttribDivisorANGLE(Oc,Bd),hd.divisor=Bd)}else if(hd.buffer&&(H.disableVertexAttribArray(Oc),hd.buffer=null),hd.x!==ue||hd.y!==ce||hd.z!==me||hd.w!==ge)H.vertexAttrib4f(Oc,ue,ce,me,ge),hd.x=ue,hd.y=ce,hd.z=me,hd.w=ge;H.uniform1i(I.location,!1);H.uniform1f(ya.location,J.pixelRatio);
qe=a.scale;H.uniform2f(ea.location,qe[0],qe[1]);Kd=a.scaleFract;H.uniform2f(Da.location,Kd[0],Kd[1]);Qd=a.translate;H.uniform2f(qa.location,Qd[0],Qd[1]);Rd=a.translateFract;H.uniform2f(Aa.location,Rd[0],Rd[1]);Sd=A.call(this,J,a,0);H.uniform2f(sa.location,Sd[0],Sd[1]);H.uniform1f(na.location,a.opacity);H.uniform1i(Ca.location,h.bind());(ne=a.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);ze=ne._texture;H.uniform1i(V.location,ze.bind());Ee=a.elements;se=null;(se=(Te=ta(Ee))?Yb.createStream(Ee):
Yb.getElements(Ee))&&H.bindBuffer(34963,se.buffer.buffer);Ue=a.offset;if(Pe=a.count)we=Fa.instances,0<we?se?S.drawElementsInstancedANGLE(0,Pe,se.type,Ue<<(se.type-5121>>1),we):S.drawArraysInstancedANGLE(0,Ue,Pe,we):0>we&&(se?H.drawElements(0,Pe,se.type,Ue<<(se.type-5121>>1)):H.drawArrays(0,Ue,Pe)),va.dirty=!0,Ea.setVAO(null),J.viewportWidth=q,J.viewportHeight=M,pa&&(z.cpuTime+=performance.now()-K),ka&&n.destroyStream(P),ma&&n.destroyStream(ua),xb&&n.destroyStream(ib),lb&&n.destroyStream(Wa),Ra&&n.destroyStream(vb),
Wb&&n.destroyStream(Qb),ec&&n.destroyStream(ic),zc&&n.destroyStream(id),kd&&n.destroyStream(wd),h.unbind(),ze.unbind(),Te&&Yb.destroyStream(se)},scope:function(a,b,g){var m,w,y,l,H,v,f,la,M,I,Y,V,N,S,ea,K,fa,dc,P,h,Qa,x,O,X,A,aa,ya,da,Ea,xa,sa,F,T,ca,ja,W,ba,Ya,qa,Da,na,Aa,ha,ra,ia,wa,Ca,Gb,Ba,Ia,hb,Ha,Tb,ga,Ta,ac,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Wd,Sa,Jb,Db,Ma,yd,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Cd,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,Vd,Ec,ee,Nc,Xc,Ae,nc,wc,hc,db,sc,Ub,Xb,ec,
ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,Nd,oe,jd,zd,he,ye,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,jf,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,
Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;m=a.viewport;w=m.x|0;y=m.y|0;l="width"in m?m.width|0:J.framebufferWidth-w;H="height"in m?m.height|0:J.framebufferHeight-y;v=J.viewportWidth;J.viewportWidth=l;f=J.viewportHeight;J.viewportHeight=H;la=fe[0];fe[0]=w;M=fe[1];fe[1]=y;I=fe[2];fe[2]=l;Y=fe[3];fe[3]=H;V=ka[0];ka[0]=0;N=ka[1];ka[1]=0;S=ka[2];ka[2]=0;ea=ka[3];ka[3]=1;K=Ga.blend_enable;Ga.blend_enable=!0;fa=Ka[0];Ka[0]=770;dc=Ka[1];Ka[1]=771;P=Ka[2];Ka[2]=773;h=Ka[3];Ka[3]=1;Qa=Ga.depth_enable;Ga.depth_enable=
!1;x=a.viewport;O=x.x|0;X=x.y|0;A="width"in x?x.width|0:J.framebufferWidth-O;aa="height"in x?x.height|0:J.framebufferHeight-X;ya=xd[0];xd[0]=O;da=xd[1];xd[1]=X;Ea=xd[2];xd[2]=A;xa=xd[3];xd[3]=aa;sa=Ga.scissor_enable;Ga.scissor_enable=!0;F=Ga.stencil_enable;Ga.stencil_enable=!1;if(T=va.profile)ca=performance.now(),z.count++;ja=a.elements;W=null;W=(ba=ta(ja))?Yb.createStream(ja):Yb.getElements(ja);Ya=Fa.elements;Fa.elements=W;qa=a.offset;Da=Fa.offset;Fa.offset=qa;na=a.count;Aa=Fa.count;Fa.count=na;
ha=Fa.primitive;Fa.primitive=0;ra=za[45];za[45]=!1;ia=a.markerTexture;wa=za[48];za[48]=ia;Ca=a.opacity;Gb=za[10];za[10]=Ca;Ba=r.call(this,J,a,g);Ia=za[46];za[46]=Ba;hb=za[47];za[47]=t;Ha=J.pixelRatio;Tb=za[34];za[34]=Ha;ga=a.scale;Ta=za[6];za[6]=ga;ac=a.scaleFract;pb=za[7];za[7]=ac;bc=a.translate;jb=za[8];za[8]=bc;qb=a.translateFract;Ja=za[9];za[9]=qb;sb=p.call(this,J,a,g);La=!1;eb=null;gb=0;Na=!1;Wa=lb=0;ub=1;tb=0;Pa=5126;Db=Jb=Sa=Wd=0;ta(sb)?(La=!0,eb=n.createStream(34962,sb),Pa=eb.dtype):(eb=n.getBuffer(sb))?
Pa=eb.dtype:"constant"in sb?(ub=2,"number"===typeof sb.constant?(Sa=sb.constant,Jb=Db=Wd=0):(Sa=0<sb.constant.length?sb.constant[0]:0,Jb=1<sb.constant.length?sb.constant[1]:0,Db=2<sb.constant.length?sb.constant[2]:0,Wd=3<sb.constant.length?sb.constant[3]:0)):(eb=ta(sb.buffer)?n.createStream(34962,sb.buffer):n.getBuffer(sb.buffer),Pa="type"in sb?$d[sb.type]:eb.dtype,Na=!!sb.normalized,Wa=sb.size|0,lb=sb.offset|0,tb=sb.stride|0,gb=sb.divisor|0);Ma=Q.buffer;Q.buffer=eb;yd=Q.divisor;Q.divisor=gb;Za=Q.normalized;
Q.normalized=Na;Kb=Q.offset;Q.offset=lb;Lb=Q.size;Q.size=Wa;mb=Q.state;Q.state=ub;Oa=Q.stride;Q.stride=tb;$b=Q.type;Q.type=Pa;Ra=Q.w;Q.w=Wd;vb=Q.x;Q.x=Sa;wb=Q.y;Q.y=Jb;Ua=Q.z;Q.z=Db;nb=q.call(this,J,a,g);gc=!1;Ac=null;vc=0;bb=!1;Cd=jc=0;Xa=1;Mc=0;zb=5126;Wb=tc=Vb=$a=0;ta(nb)?(gc=!0,Ac=n.createStream(34962,nb),zb=Ac.dtype):(Ac=n.getBuffer(nb))?zb=Ac.dtype:"constant"in nb?(Xa=2,"number"===typeof nb.constant?(Vb=nb.constant,tc=Wb=$a=0):(Vb=0<nb.constant.length?nb.constant[0]:0,tc=1<nb.constant.length?
nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,$a=3<nb.constant.length?nb.constant[3]:0)):(Ac=ta(nb.buffer)?n.createStream(34962,nb.buffer):n.getBuffer(nb.buffer),zb="type"in nb?$d[nb.type]:Ac.dtype,bb=!!nb.normalized,Cd=nb.size|0,jc=nb.offset|0,Mc=nb.stride|0,vc=nb.divisor|0);Qb=L.buffer;L.buffer=Ac;Kc=L.divisor;L.divisor=vc;Sb=L.normalized;L.normalized=bb;Vd=L.offset;L.offset=jc;Ec=L.size;L.size=Cd;ee=L.state;L.state=Xa;Nc=L.stride;L.stride=Mc;Xc=L.type;L.type=zb;Ae=L.w;L.w=$a;nc=L.x;
L.x=Vb;wc=L.y;L.y=tc;hc=L.z;L.z=Wb;db=G.call(this,J,a,g);sc=!1;Ub=null;Xb=0;ec=!1;yc=ic=0;Bc=1;cd=0;Qc=5126;md=Yc=Tc=Rc=0;ta(db)?(sc=!0,Ub=n.createStream(34962,db),Qc=Ub.dtype):(Ub=n.getBuffer(db))?Qc=Ub.dtype:"constant"in db?(Bc=2,"number"===typeof db.constant?(Tc=db.constant,Yc=md=Rc=0):(Tc=0<db.constant.length?db.constant[0]:0,Yc=1<db.constant.length?db.constant[1]:0,md=2<db.constant.length?db.constant[2]:0,Rc=3<db.constant.length?db.constant[3]:0)):(Ub=ta(db.buffer)?n.createStream(34962,db.buffer):
n.getBuffer(db.buffer),Qc="type"in db?$d[db.type]:Ub.dtype,ec=!!db.normalized,yc=db.size|0,ic=db.offset|0,cd=db.stride|0,Xb=db.divisor|0);dd=e.buffer;e.buffer=Ub;Zc=e.divisor;e.divisor=Xb;kc=e.normalized;e.normalized=ec;cc=e.offset;e.offset=ic;$c=e.size;e.size=yc;Wc=e.state;e.state=Bc;ed=e.stride;e.stride=cd;zc=e.type;e.type=Qc;id=e.w;e.w=Rc;ud=e.x;e.x=Tc;Nd=e.y;e.y=Yc;oe=e.z;e.z=md;jd=C.call(this,J,a,g);zd=!1;he=null;ye=0;be=!1;Id=Pd=0;Fd=1;od=0;Uc=5126;wd=kd=sd=vd=0;ta(jd)?(zd=!0,he=n.createStream(34962,
jd),Uc=he.dtype):(he=n.getBuffer(jd))?Uc=he.dtype:"constant"in jd?(Fd=2,"number"===typeof jd.constant?(sd=jd.constant,kd=wd=vd=0):(sd=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,wd=2<jd.constant.length?jd.constant[2]:0,vd=3<jd.constant.length?jd.constant[3]:0)):(he=ta(jd.buffer)?n.createStream(34962,jd.buffer):n.getBuffer(jd.buffer),Uc="type"in jd?$d[jd.type]:he.dtype,be=!!jd.normalized,Id=jd.size|0,Pd=jd.offset|0,od=jd.stride|0,ye=jd.divisor|0);Bd=U.buffer;U.buffer=
he;Dd=U.divisor;U.divisor=ye;je=U.normalized;U.normalized=be;jf=U.offset;U.offset=Pd;te=U.size;U.size=Id;le=U.state;U.state=Fd;ke=U.stride;U.stride=od;ge=U.type;U.type=Uc;ue=U.w;U.w=vd;ce=U.x;U.x=sd;me=U.y;U.y=kd;Oc=U.z;U.z=wd;hd=k.call(this,J,a,g);ve=!1;qe=null;Kd=0;Qd=!1;Sd=Rd=0;ne=1;ze=0;Ee=5126;Pe=Ue=Te=se=0;ta(hd)?(ve=!0,qe=n.createStream(34962,hd),Ee=qe.dtype):(qe=n.getBuffer(hd))?Ee=qe.dtype:"constant"in hd?(ne=2,"number"===typeof hd.constant?(Te=hd.constant,Ue=Pe=se=0):(Te=0<hd.constant.length?
hd.constant[0]:0,Ue=1<hd.constant.length?hd.constant[1]:0,Pe=2<hd.constant.length?hd.constant[2]:0,se=3<hd.constant.length?hd.constant[3]:0)):(qe=ta(hd.buffer)?n.createStream(34962,hd.buffer):n.getBuffer(hd.buffer),Ee="type"in hd?$d[hd.type]:qe.dtype,Qd=!!hd.normalized,Sd=hd.size|0,Rd=hd.offset|0,ze=hd.stride|0,Kd=hd.divisor|0);we=Z.buffer;Z.buffer=qe;He=Z.divisor;Z.divisor=Kd;Je=Z.normalized;Z.normalized=Qd;Ke=Z.offset;Z.offset=Rd;Le=Z.size;Z.size=Sd;Ie=Z.state;Z.state=ne;Md=Z.stride;Z.stride=ze;
Yd=Z.type;Z.type=Ee;ae=Z.w;Z.w=se;de=Z.x;Z.x=Te;Me=Z.y;Z.y=Ue;Gd=Z.z;Z.z=Pe;Td=B.call(this,J,a,g);Fe=!1;Ne=null;cf=0;bf=!1;Qe=Ve=0;af=1;Ze=0;We=5126;Ye=Zd=Ud=Xe=0;ta(Td)?(Fe=!0,Ne=n.createStream(34962,Td),We=Ne.dtype):(Ne=n.getBuffer(Td))?We=Ne.dtype:"constant"in Td?(af=2,"number"===typeof Td.constant?(Ud=Td.constant,Zd=Ye=Xe=0):(Ud=0<Td.constant.length?Td.constant[0]:0,Zd=1<Td.constant.length?Td.constant[1]:0,Ye=2<Td.constant.length?Td.constant[2]:0,Xe=3<Td.constant.length?Td.constant[3]:0)):(Ne=
ta(Td.buffer)?n.createStream(34962,Td.buffer):n.getBuffer(Td.buffer),We="type"in Td?$d[Td.type]:Ne.dtype,bf=!!Td.normalized,Qe=Td.size|0,Ve=Td.offset|0,Ze=Td.stride|0,cf=Td.divisor|0);kf=u.buffer;u.buffer=Ne;of=u.divisor;u.divisor=cf;ff=u.normalized;u.normalized=bf;lf=u.offset;u.offset=Ve;mf=u.size;u.size=Qe;nf=u.state;u.state=af;sf=u.stride;u.stride=Ze;pf=u.type;u.type=We;tf=u.w;u.w=Xe;Cf=u.x;u.x=Ud;Df=u.y;u.y=Zd;Re=u.z;u.z=Ye;Ge=ua.call(this,J,a,g);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=
5126;Jf=Af=zf=wf=0;ta(Ge)?(qf=!0,rf=n.createStream(34962,Ge),yf=rf.dtype):(rf=n.getBuffer(Ge))?yf=rf.dtype:"constant"in Ge?(Gf=2,"number"===typeof Ge.constant?(zf=Ge.constant,Af=Jf=wf=0):(zf=0<Ge.constant.length?Ge.constant[0]:0,Af=1<Ge.constant.length?Ge.constant[1]:0,Jf=2<Ge.constant.length?Ge.constant[2]:0,wf=3<Ge.constant.length?Ge.constant[3]:0)):(rf=ta(Ge.buffer)?n.createStream(34962,Ge.buffer):n.getBuffer(Ge.buffer),yf="type"in Ge?$d[Ge.type]:rf.dtype,Hf=!!Ge.normalized,Ff=Ge.size|0,Bf=Ge.offset|
0,xf=Ge.stride|0,Ef=Ge.divisor|0);Kf=D.buffer;D.buffer=rf;Lf=D.divisor;D.divisor=Ef;Mf=D.normalized;D.normalized=Hf;uf=D.offset;D.offset=Bf;Rf=D.size;D.size=Ff;If=D.state;D.state=Gf;vf=D.stride;D.stride=xf;dg=D.type;D.type=yf;Sf=D.w;D.w=wf;Tf=D.x;D.x=zf;qg=D.y;D.y=Af;gf=D.z;D.z=Jf;df=E.call(this,J,a,g);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ta(df)?(Nf=!0,Of=n.createStream(34962,df),Uf=Of.dtype):(Of=n.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?
(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=ta(df.buffer)?n.createStream(34962,df.buffer):n.getBuffer(df.buffer),Uf="type"in df?$d[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=d.buffer;d.buffer=Of;sg=d.divisor;d.divisor=eg;tg=d.normalized;d.normalized=fg;ug=d.offset;d.offset=gg;vg=d.size;d.size=
hg;wg=d.state;d.state=ig;xg=d.stride;d.stride=Wf;yg=d.type;d.type=Uf;zg=d.w;d.w=Xf;Ag=d.x;d.x=Yf;Bg=d.y;d.y=Zf;hf=d.z;d.z=jg;ef=R.call(this,J,a,g);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ta(ef)?(Pf=!0,Qf=n.createStream(34962,ef),Vf=Qf.dtype):(Qf=n.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:
0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=ta(ef.buffer)?n.createStream(34962,ef.buffer):n.getBuffer(ef.buffer),Vf="type"in ef?$d[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|0,$f=ef.stride|0,kg=ef.divisor|0);Cg=c.buffer;c.buffer=Qf;Dg=c.divisor;c.divisor=kg;Eg=c.normalized;c.normalized=lg;Fg=c.offset;c.offset=mg;Gg=c.size;c.size=ng;Hg=c.state;c.state=og;Ig=c.stride;c.stride=$f;Jg=c.type;c.type=Vf;Kg=c.w;c.w=ag;Lg=c.x;c.x=bg;Mg=c.y;c.y=cg;Ng=c.z;c.z=pg;Og=pa.vert;pa.vert=44;
Pg=pa.frag;pa.frag=43;va.dirty=!0;b(J,a,g);J.viewportWidth=v;J.viewportHeight=f;fe[0]=la;fe[1]=M;fe[2]=I;fe[3]=Y;ka[0]=V;ka[1]=N;ka[2]=S;ka[3]=ea;Ga.blend_enable=K;Ka[0]=fa;Ka[1]=dc;Ka[2]=P;Ka[3]=h;Ga.depth_enable=Qa;xd[0]=ya;xd[1]=da;xd[2]=Ea;xd[3]=xa;Ga.scissor_enable=sa;Ga.stencil_enable=F;T&&(z.cpuTime+=performance.now()-ca);ba&&Yb.destroyStream(W);Fa.elements=Ya;Fa.offset=Da;Fa.count=Aa;Fa.primitive=ha;za[45]=ra;za[48]=wa;za[10]=Gb;za[46]=Ia;za[47]=hb;za[34]=Tb;za[6]=Ta;za[7]=pb;za[8]=jb;za[9]=
Ja;La&&n.destroyStream(eb);Q.buffer=Ma;Q.divisor=yd;Q.normalized=Za;Q.offset=Kb;Q.size=Lb;Q.state=mb;Q.stride=Oa;Q.type=$b;Q.w=Ra;Q.x=vb;Q.y=wb;Q.z=Ua;gc&&n.destroyStream(Ac);L.buffer=Qb;L.divisor=Kc;L.normalized=Sb;L.offset=Vd;L.size=Ec;L.state=ee;L.stride=Nc;L.type=Xc;L.w=Ae;L.x=nc;L.y=wc;L.z=hc;sc&&n.destroyStream(Ub);e.buffer=dd;e.divisor=Zc;e.normalized=kc;e.offset=cc;e.size=$c;e.state=Wc;e.stride=ed;e.type=zc;e.w=id;e.x=ud;e.y=Nd;e.z=oe;zd&&n.destroyStream(he);U.buffer=Bd;U.divisor=Dd;U.normalized=
je;U.offset=jf;U.size=te;U.state=le;U.stride=ke;U.type=ge;U.w=ue;U.x=ce;U.y=me;U.z=Oc;ve&&n.destroyStream(qe);Z.buffer=we;Z.divisor=He;Z.normalized=Je;Z.offset=Ke;Z.size=Le;Z.state=Ie;Z.stride=Md;Z.type=Yd;Z.w=ae;Z.x=de;Z.y=Me;Z.z=Gd;Fe&&n.destroyStream(Ne);u.buffer=kf;u.divisor=of;u.normalized=ff;u.offset=lf;u.size=mf;u.state=nf;u.stride=sf;u.type=pf;u.w=tf;u.x=Cf;u.y=Df;u.z=Re;qf&&n.destroyStream(rf);D.buffer=Kf;D.divisor=Lf;D.normalized=Mf;D.offset=uf;D.size=Rf;D.state=If;D.stride=vf;D.type=dg;
D.w=Sf;D.x=Tf;D.y=qg;D.z=gf;Nf&&n.destroyStream(Of);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;d.x=Ag;d.y=Bg;d.z=hf;Pf&&n.destroyStream(Qf);c.buffer=Cg;c.divisor=Dg;c.normalized=Eg;c.offset=Fg;c.size=Gg;c.state=Hg;c.stride=Ig;c.type=Jg;c.w=Kg;c.x=Lg;c.y=Mg;c.z=Ng;pa.vert=Og;pa.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
z,v,Y,f,g,l,b,da,x,F,T,A,h,r,t,p,Q,q,L,G,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc){var Ya,y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea,ka,X,wa,Ha,Ka,hb,ca,ga,ac,Ia,jf,Tb,ye,Cd,xd,Wd,Ae,zd,Vd,oe,he,Nd,fe,ee;Ya=a.attributes;y=a.buffer;n=a.context;J=a.current;va=a.draw;Fa=a.elements;Yb=a.extensions;Gb=a.framebuffer;fa=a.gl;H=a.isBufferArgs;ta=a.next;Ga=a.shader;pa=a.uniforms;za=a.vao;Ea=ta.blend_color;ka=J.blend_color;X=ta.blend_equation;wa=J.blend_equation;
Ha=ta.blend_func;Ka=J.blend_func;hb=ta.colorMask;ca=J.colorMask;ga=ta.depth_range;ac=J.depth_range;Ia=ta.polygonOffset_offset;jf=J.polygonOffset_offset;Tb=ta.sample_coverage;ye=J.sample_coverage;Cd=ta.scissor_box;xd=J.scissor_box;Wd=ta.stencil_func;Ae=J.stencil_func;zd=ta.stencil_opBack;Vd=J.stencil_opBack;oe=ta.stencil_opFront;he=J.stencil_opFront;Nd=ta.viewport;fe=J.viewport;ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
c){var d,b,e,g,k,l;d=Gb.next;d!==Gb.cur&&(d?fa.bindFramebuffer(36160,d.framebuffer):fa.bindFramebuffer(36160,null),Gb.cur=d);if(J.dirty){var v,f,u,q,p,B,Y,C,Ga,E,D,pa,h,x,r,A,L,R,da,Ea,Q,F,T,t,U,oa,Z,G,ma,ua,Ha,Rb,cb,Mb;v=ta.dither;v!==J.dither&&(v?fa.enable(3024):fa.disable(3024),J.dither=v);f=X[0];u=X[1];if(f!==wa[0]||u!==wa[1])fa.blendEquationSeparate(f,u),wa[0]=f,wa[1]=u;q=ta.depth_func;q!==J.depth_func&&(fa.depthFunc(q),J.depth_func=q);p=ga[0];B=ga[1];if(p!==ac[0]||B!==ac[1])fa.depthRange(p,
B),ac[0]=p,ac[1]=B;Y=ta.depth_mask;Y!==J.depth_mask&&(fa.depthMask(Y),J.depth_mask=Y);C=hb[0];Ga=hb[1];E=hb[2];D=hb[3];if(C!==ca[0]||Ga!==ca[1]||E!==ca[2]||D!==ca[3])fa.colorMask(C,Ga,E,D),ca[0]=C,ca[1]=Ga,ca[2]=E,ca[3]=D;pa=ta.cull_enable;pa!==J.cull_enable&&(pa?fa.enable(2884):fa.disable(2884),J.cull_enable=pa);h=ta.cull_face;h!==J.cull_face&&(fa.cullFace(h),J.cull_face=h);x=ta.frontFace;x!==J.frontFace&&(fa.frontFace(x),J.frontFace=x);r=ta.lineWidth;r!==J.lineWidth&&(fa.lineWidth(r),J.lineWidth=
r);A=ta.polygonOffset_enable;A!==J.polygonOffset_enable&&(A?fa.enable(32823):fa.disable(32823),J.polygonOffset_enable=A);L=Ia[0];R=Ia[1];if(L!==jf[0]||R!==jf[1])fa.polygonOffset(L,R),jf[0]=L,jf[1]=R;da=ta.sample_alpha;da!==J.sample_alpha&&(da?fa.enable(32926):fa.disable(32926),J.sample_alpha=da);Ea=ta.sample_enable;Ea!==J.sample_enable&&(Ea?fa.enable(32928):fa.disable(32928),J.sample_enable=Ea);Q=Tb[0];F=Tb[1];if(Q!==ye[0]||F!==ye[1])fa.sampleCoverage(Q,F),ye[0]=Q,ye[1]=F;T=ta.stencil_mask;T!==J.stencil_mask&&
(fa.stencilMask(T),J.stencil_mask=T);t=Wd[0];U=Wd[1];oa=Wd[2];if(t!==Ae[0]||U!==Ae[1]||oa!==Ae[2])fa.stencilFunc(t,U,oa),Ae[0]=t,Ae[1]=U,Ae[2]=oa;Z=oe[0];G=oe[1];ma=oe[2];ua=oe[3];if(Z!==he[0]||G!==he[1]||ma!==he[2]||ua!==he[3])fa.stencilOpSeparate(Z,G,ma,ua),he[0]=Z,he[1]=G,he[2]=ma,he[3]=ua;Ha=zd[0];Rb=zd[1];cb=zd[2];Mb=zd[3];if(Ha!==Vd[0]||Rb!==Vd[1]||cb!==Vd[2]||Mb!==Vd[3])fa.stencilOpSeparate(Ha,Rb,cb,Mb),Vd[0]=Ha,Vd[1]=Rb,Vd[2]=cb,Vd[3]=Mb}fa.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=
1;fa.enable(3042);J.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ka[0]=770;Ka[1]=771;Ka[2]=773;Ka[3]=1;fa.disable(2929);J.depth_enable=!1;fa.enable(3089);J.scissor_enable=!0;fa.disable(2960);J.stencil_enable=!1;if(b=J.profile)e=performance.now(),z.count+=c;fa.useProgram(ia.program);g=Yb.angle_instanced_arrays;var ab;za.setVAO(null);fa.uniform1i(I.location,!1);fa.uniform1i(sa.location,O.bind());ab=va.instances;for(k=0;k<c;++k){l=a[k];var ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,
bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Cd,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Nd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,
Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;ob=l.viewport;Va=ob.x|0;Ic=ob.y|0;Hb="width"in ob?ob.width|0:n.framebufferWidth-Va;Ib="height"in ob?ob.height|0:n.framebufferHeight-Ic;rc=n.viewportWidth;n.viewportWidth=Hb;Nb=n.viewportHeight;n.viewportHeight=Ib;fa.viewport(Va,Ic,Hb,Ib);fe[0]=Va;fe[1]=Ic;fe[2]=Hb;fe[3]=Ib;kb=l.viewport;Fb=kb.x|0;Cb=kb.y|0;xb="width"in kb?kb.width|0:n.framebufferWidth-Fb;ib="height"in kb?kb.height|0:n.framebufferHeight-Cb;fa.scissor(Fb,Cb,xb,ib);xd[0]=Fb;xd[1]=Cb;xd[2]=xb;
xd[3]=ib;Zb=K.call(this,n,l,k);Ob=!1;rb=null;Ta=0;Pb=!1;bc=pb=0;jb=1;qb=0;Ja=5126;gb=eb=La=sb=0;H(Zb)?(Ob=!0,rb=y.createStream(34962,Zb),Ja=rb.dtype):(rb=y.getBuffer(Zb))?Ja=rb.dtype:"constant"in Zb?(jb=2,"number"===typeof Zb.constant?(La=Zb.constant,eb=gb=sb=0):(La=0<Zb.constant.length?Zb.constant[0]:0,eb=1<Zb.constant.length?Zb.constant[1]:0,gb=2<Zb.constant.length?Zb.constant[2]:0,sb=3<Zb.constant.length?Zb.constant[3]:0)):(rb=H(Zb.buffer)?y.createStream(34962,Zb.buffer):y.getBuffer(Zb.buffer),
Ja="type"in Zb?ee[Zb.type]:rb.dtype,Pb=!!Zb.normalized,bc=Zb.size|0,pb=Zb.offset|0,qb=Zb.stride|0,Ta=Zb.divisor|0);Na=Aa.location;lb=Ya[Na];if(1===jb){lb.buffer||fa.enableVertexAttribArray(Na);Wa=bc||1;if(lb.type!==Ja||lb.size!==Wa||lb.buffer!==rb||lb.normalized!==Pb||lb.offset!==pb||lb.stride!==qb)fa.bindBuffer(34962,rb.buffer),fa.vertexAttribPointer(Na,Wa,Ja,Pb,qb,pb),lb.type=Ja,lb.size=Wa,lb.buffer=rb,lb.normalized=Pb,lb.offset=pb,lb.stride=qb;lb.divisor!==Ta&&(g.vertexAttribDivisorANGLE(Na,Ta),
lb.divisor=Ta)}else if(lb.buffer&&(fa.disableVertexAttribArray(Na),lb.buffer=null),lb.x!==La||lb.y!==eb||lb.z!==gb||lb.w!==sb)fa.vertexAttrib4f(Na,La,eb,gb,sb),lb.x=La,lb.y=eb,lb.z=gb,lb.w=sb;ub=ha.call(this,n,l,k);tb=!1;Pa=null;Cc=0;Sa=!1;Db=Jb=0;Ma=1;Cd=0;Za=5126;Oa=mb=Lb=Kb=0;H(ub)?(tb=!0,Pa=y.createStream(34962,ub),Za=Pa.dtype):(Pa=y.getBuffer(ub))?Za=Pa.dtype:"constant"in ub?(Ma=2,"number"===typeof ub.constant?(Lb=ub.constant,mb=Oa=Kb=0):(Lb=0<ub.constant.length?ub.constant[0]:0,mb=1<ub.constant.length?
ub.constant[1]:0,Oa=2<ub.constant.length?ub.constant[2]:0,Kb=3<ub.constant.length?ub.constant[3]:0)):(Pa=H(ub.buffer)?y.createStream(34962,ub.buffer):y.getBuffer(ub.buffer),Za="type"in ub?ee[ub.type]:Pa.dtype,Sa=!!ub.normalized,Db=ub.size|0,Jb=ub.offset|0,Cd=ub.stride|0,Cc=ub.divisor|0);$b=la.location;Ra=Ya[$b];if(1===Ma){Ra.buffer||fa.enableVertexAttribArray($b);vb=Db||1;if(Ra.type!==Za||Ra.size!==vb||Ra.buffer!==Pa||Ra.normalized!==Sa||Ra.offset!==Jb||Ra.stride!==Cd)fa.bindBuffer(34962,Pa.buffer),
fa.vertexAttribPointer($b,vb,Za,Sa,Cd,Jb),Ra.type=Za,Ra.size=vb,Ra.buffer=Pa,Ra.normalized=Sa,Ra.offset=Jb,Ra.stride=Cd;Ra.divisor!==Cc&&(g.vertexAttribDivisorANGLE($b,Cc),Ra.divisor=Cc)}else if(Ra.buffer&&(fa.disableVertexAttribArray($b),Ra.buffer=null),Ra.x!==Lb||Ra.y!==mb||Ra.z!==Oa||Ra.w!==Kb)fa.vertexAttrib4f($b,Lb,mb,Oa,Kb),Ra.x=Lb,Ra.y=mb,Ra.z=Oa,Ra.w=Kb;wb=Ba.call(this,n,l,k);Ua=!1;nb=null;gc=0;Ac=!1;bb=vc=0;jc=1;Sc=0;Xa=5126;Vb=$a=zb=Mc=0;H(wb)?(Ua=!0,nb=y.createStream(34962,wb),Xa=nb.dtype):
(nb=y.getBuffer(wb))?Xa=nb.dtype:"constant"in wb?(jc=2,"number"===typeof wb.constant?(zb=wb.constant,$a=Vb=Mc=0):(zb=0<wb.constant.length?wb.constant[0]:0,$a=1<wb.constant.length?wb.constant[1]:0,Vb=2<wb.constant.length?wb.constant[2]:0,Mc=3<wb.constant.length?wb.constant[3]:0)):(nb=H(wb.buffer)?y.createStream(34962,wb.buffer):y.getBuffer(wb.buffer),Xa="type"in wb?ee[wb.type]:nb.dtype,Ac=!!wb.normalized,bb=wb.size|0,vc=wb.offset|0,Sc=wb.stride|0,gc=wb.divisor|0);tc=Qa.location;Wb=Ya[tc];if(1===jc){Wb.buffer||
fa.enableVertexAttribArray(tc);Qb=bb||1;if(Wb.type!==Xa||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==Ac||Wb.offset!==vc||Wb.stride!==Sc)fa.bindBuffer(34962,nb.buffer),fa.vertexAttribPointer(tc,Qb,Xa,Ac,Sc,vc),Wb.type=Xa,Wb.size=Qb,Wb.buffer=nb,Wb.normalized=Ac,Wb.offset=vc,Wb.stride=Sc;Wb.divisor!==gc&&(g.vertexAttribDivisorANGLE(tc,gc),Wb.divisor=gc)}else if(Wb.buffer&&(fa.disableVertexAttribArray(tc),Wb.buffer=null),Wb.x!==zb||Wb.y!==$a||Wb.z!==Vb||Wb.w!==Mc)fa.vertexAttrib4f(tc,zb,$a,Vb,Mc),
Wb.x=zb,Wb.y=$a,Wb.z=Vb,Wb.w=Mc;Kc=W.call(this,n,l,k);Sb=!1;qd=null;Ec=0;Nd=!1;Xc=Nc=0;td=1;nc=0;wc=5126;Ub=sc=db=hc=0;H(Kc)?(Sb=!0,qd=y.createStream(34962,Kc),wc=qd.dtype):(qd=y.getBuffer(Kc))?wc=qd.dtype:"constant"in Kc?(td=2,"number"===typeof Kc.constant?(db=Kc.constant,sc=Ub=hc=0):(db=0<Kc.constant.length?Kc.constant[0]:0,sc=1<Kc.constant.length?Kc.constant[1]:0,Ub=2<Kc.constant.length?Kc.constant[2]:0,hc=3<Kc.constant.length?Kc.constant[3]:0)):(qd=H(Kc.buffer)?y.createStream(34962,Kc.buffer):
y.getBuffer(Kc.buffer),wc="type"in Kc?ee[Kc.type]:qd.dtype,Nd=!!Kc.normalized,Xc=Kc.size|0,Nc=Kc.offset|0,nc=Kc.stride|0,Ec=Kc.divisor|0);Xb=dc.location;ec=Ya[Xb];if(1===td){ec.buffer||fa.enableVertexAttribArray(Xb);ic=Xc||1;if(ec.type!==wc||ec.size!==ic||ec.buffer!==qd||ec.normalized!==Nd||ec.offset!==Nc||ec.stride!==nc)fa.bindBuffer(34962,qd.buffer),fa.vertexAttribPointer(Xb,ic,wc,Nd,nc,Nc),ec.type=wc,ec.size=ic,ec.buffer=qd,ec.normalized=Nd,ec.offset=Nc,ec.stride=nc;ec.divisor!==Ec&&(g.vertexAttribDivisorANGLE(Xb,
Ec),ec.divisor=Ec)}else if(ec.buffer&&(fa.disableVertexAttribArray(Xb),ec.buffer=null),ec.x!==db||ec.y!==sc||ec.z!==Ub||ec.w!==hc)fa.vertexAttrib4f(Xb,db,sc,Ub,hc),ec.x=db,ec.y=sc,ec.z=Ub,ec.w=hc;yc=ba.call(this,n,l,k);Bc=!1;cd=null;Qc=0;Rc=!1;Yc=Tc=0;md=1;dd=0;Zc=5126;Wc=$c=cc=kc=0;H(yc)?(Bc=!0,cd=y.createStream(34962,yc),Zc=cd.dtype):(cd=y.getBuffer(yc))?Zc=cd.dtype:"constant"in yc?(md=2,"number"===typeof yc.constant?(cc=yc.constant,$c=Wc=kc=0):(cc=0<yc.constant.length?yc.constant[0]:0,$c=1<yc.constant.length?
yc.constant[1]:0,Wc=2<yc.constant.length?yc.constant[2]:0,kc=3<yc.constant.length?yc.constant[3]:0)):(cd=H(yc.buffer)?y.createStream(34962,yc.buffer):y.getBuffer(yc.buffer),Zc="type"in yc?ee[yc.type]:cd.dtype,Rc=!!yc.normalized,Yc=yc.size|0,Tc=yc.offset|0,dd=yc.stride|0,Qc=yc.divisor|0);ed=Da.location;zc=Ya[ed];if(1===md){zc.buffer||fa.enableVertexAttribArray(ed);id=Yc||1;if(zc.type!==Zc||zc.size!==id||zc.buffer!==cd||zc.normalized!==Rc||zc.offset!==Tc||zc.stride!==dd)fa.bindBuffer(34962,cd.buffer),
fa.vertexAttribPointer(ed,id,Zc,Rc,dd,Tc),zc.type=Zc,zc.size=id,zc.buffer=cd,zc.normalized=Rc,zc.offset=Tc,zc.stride=dd;zc.divisor!==Qc&&(g.vertexAttribDivisorANGLE(ed,Qc),zc.divisor=Qc)}else if(zc.buffer&&(fa.disableVertexAttribArray(ed),zc.buffer=null),zc.x!==cc||zc.y!==$c||zc.z!==Wc||zc.w!==kc)fa.vertexAttrib4f(ed,cc,$c,Wc,kc),zc.x=cc,zc.y=$c,zc.z=Wc,zc.w=kc;ud=S.call(this,n,l,k);xe=!1;Ce=null;jd=0;De=!1;pe=Od=0;be=1;Pd=0;Id=5126;vd=Uc=od=Fd=0;H(ud)?(xe=!0,Ce=y.createStream(34962,ud),Id=Ce.dtype):
(Ce=y.getBuffer(ud))?Id=Ce.dtype:"constant"in ud?(be=2,"number"===typeof ud.constant?(od=ud.constant,Uc=vd=Fd=0):(od=0<ud.constant.length?ud.constant[0]:0,Uc=1<ud.constant.length?ud.constant[1]:0,vd=2<ud.constant.length?ud.constant[2]:0,Fd=3<ud.constant.length?ud.constant[3]:0)):(Ce=H(ud.buffer)?y.createStream(34962,ud.buffer):y.getBuffer(ud.buffer),Id="type"in ud?ee[ud.type]:Ce.dtype,De=!!ud.normalized,pe=ud.size|0,Od=ud.offset|0,Pd=ud.stride|0,jd=ud.divisor|0);sd=ra.location;kd=Ya[sd];if(1===be){kd.buffer||
fa.enableVertexAttribArray(sd);wd=pe||1;if(kd.type!==Id||kd.size!==wd||kd.buffer!==Ce||kd.normalized!==De||kd.offset!==Od||kd.stride!==Pd)fa.bindBuffer(34962,Ce.buffer),fa.vertexAttribPointer(sd,wd,Id,De,Pd,Od),kd.type=Id,kd.size=wd,kd.buffer=Ce,kd.normalized=De,kd.offset=Od,kd.stride=Pd;kd.divisor!==jd&&(g.vertexAttribDivisorANGLE(sd,jd),kd.divisor=jd)}else if(kd.buffer&&(fa.disableVertexAttribArray(sd),kd.buffer=null),kd.x!==od||kd.y!==Uc||kd.z!==vd||kd.w!==Fd)fa.vertexAttrib4f(sd,od,Uc,vd,Fd),
kd.x=od,kd.y=Uc,kd.z=vd,kd.w=Fd;Bd=M.call(this,n,l,k);Dd=!1;je=null;re=0;te=!1;ke=le=0;ge=1;ue=0;ce=5126;ve=hd=Oc=me=0;H(Bd)?(Dd=!0,je=y.createStream(34962,Bd),ce=je.dtype):(je=y.getBuffer(Bd))?ce=je.dtype:"constant"in Bd?(ge=2,"number"===typeof Bd.constant?(Oc=Bd.constant,hd=ve=me=0):(Oc=0<Bd.constant.length?Bd.constant[0]:0,hd=1<Bd.constant.length?Bd.constant[1]:0,ve=2<Bd.constant.length?Bd.constant[2]:0,me=3<Bd.constant.length?Bd.constant[3]:0)):(je=H(Bd.buffer)?y.createStream(34962,Bd.buffer):
y.getBuffer(Bd.buffer),ce="type"in Bd?ee[Bd.type]:je.dtype,te=!!Bd.normalized,ke=Bd.size|0,le=Bd.offset|0,ue=Bd.stride|0,re=Bd.divisor|0);qe=w.location;Kd=Ya[qe];if(1===ge){Kd.buffer||fa.enableVertexAttribArray(qe);Qd=ke||4;if(Kd.type!==ce||Kd.size!==Qd||Kd.buffer!==je||Kd.normalized!==te||Kd.offset!==le||Kd.stride!==ue)fa.bindBuffer(34962,je.buffer),fa.vertexAttribPointer(qe,Qd,ce,te,ue,le),Kd.type=ce,Kd.size=Qd,Kd.buffer=je,Kd.normalized=te,Kd.offset=le,Kd.stride=ue;Kd.divisor!==re&&(g.vertexAttribDivisorANGLE(qe,
re),Kd.divisor=re)}else if(Kd.buffer&&(fa.disableVertexAttribArray(qe),Kd.buffer=null),Kd.x!==Oc||Kd.y!==hd||Kd.z!==ve||Kd.w!==me)fa.vertexAttrib4f(qe,Oc,hd,ve,me),Kd.x=Oc,Kd.y=hd,Kd.z=ve,Kd.w=me;Rd=N.call(this,n,l,k);Sd=!1;ne=null;ze=0;Ee=!1;Te=se=0;Ue=1;Pe=0;we=5126;Le=Ke=Je=He=0;H(Rd)?(Sd=!0,ne=y.createStream(34962,Rd),we=ne.dtype):(ne=y.getBuffer(Rd))?we=ne.dtype:"constant"in Rd?(Ue=2,"number"===typeof Rd.constant?(Je=Rd.constant,Ke=Le=He=0):(Je=0<Rd.constant.length?Rd.constant[0]:0,Ke=1<Rd.constant.length?
Rd.constant[1]:0,Le=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(ne=H(Rd.buffer)?y.createStream(34962,Rd.buffer):y.getBuffer(Rd.buffer),we="type"in Rd?ee[Rd.type]:ne.dtype,Ee=!!Rd.normalized,Te=Rd.size|0,se=Rd.offset|0,Pe=Rd.stride|0,ze=Rd.divisor|0);Ie=xa.location;Md=Ya[Ie];if(1===Ue){Md.buffer||fa.enableVertexAttribArray(Ie);Yd=Te||4;if(Md.type!==we||Md.size!==Yd||Md.buffer!==ne||Md.normalized!==Ee||Md.offset!==se||Md.stride!==Pe)fa.bindBuffer(34962,ne.buffer),
fa.vertexAttribPointer(Ie,Yd,we,Ee,Pe,se),Md.type=we,Md.size=Yd,Md.buffer=ne,Md.normalized=Ee,Md.offset=se,Md.stride=Pe;Md.divisor!==ze&&(g.vertexAttribDivisorANGLE(Ie,ze),Md.divisor=ze)}else if(Md.buffer&&(fa.disableVertexAttribArray(Ie),Md.buffer=null),Md.x!==Je||Md.y!==Ke||Md.z!==Le||Md.w!==He)fa.vertexAttrib4f(Ie,Je,Ke,Le,He),Md.x=Je,Md.y=Ke,Md.z=Le,Md.w=He;ae=m.call(this,n,l,k);de=!1;Me=null;Gd=0;Td=!1;Ne=Fe=0;cf=1;bf=0;Ve=5126;We=Ze=af=Qe=0;H(ae)?(de=!0,Me=y.createStream(34962,ae),Ve=Me.dtype):
(Me=y.getBuffer(ae))?Ve=Me.dtype:"constant"in ae?(cf=2,"number"===typeof ae.constant?(af=ae.constant,Ze=We=Qe=0):(af=0<ae.constant.length?ae.constant[0]:0,Ze=1<ae.constant.length?ae.constant[1]:0,We=2<ae.constant.length?ae.constant[2]:0,Qe=3<ae.constant.length?ae.constant[3]:0)):(Me=H(ae.buffer)?y.createStream(34962,ae.buffer):y.getBuffer(ae.buffer),Ve="type"in ae?ee[ae.type]:Me.dtype,Td=!!ae.normalized,Ne=ae.size|0,Fe=ae.offset|0,bf=ae.stride|0,Gd=ae.divisor|0);Xe=aa.location;Ud=Ya[Xe];if(1===cf){Ud.buffer||
fa.enableVertexAttribArray(Xe);Zd=Ne||1;if(Ud.type!==Ve||Ud.size!==Zd||Ud.buffer!==Me||Ud.normalized!==Td||Ud.offset!==Fe||Ud.stride!==bf)fa.bindBuffer(34962,Me.buffer),fa.vertexAttribPointer(Xe,Zd,Ve,Td,bf,Fe),Ud.type=Ve,Ud.size=Zd,Ud.buffer=Me,Ud.normalized=Td,Ud.offset=Fe,Ud.stride=bf;Ud.divisor!==Gd&&(g.vertexAttribDivisorANGLE(Xe,Gd),Ud.divisor=Gd)}else if(Ud.buffer&&(fa.disableVertexAttribArray(Xe),Ud.buffer=null),Ud.x!==af||Ud.y!==Ze||Ud.z!==We||Ud.w!==Qe)fa.vertexAttrib4f(Xe,af,Ze,We,Qe),
Ud.x=af,Ud.y=Ze,Ud.z=We,Ud.w=Qe;Ye=n.pixelRatio;k&&kf===Ye||(kf=Ye,fa.uniform1f(Ca.location,Ye));of=P.call(this,n,l,k);ff=of[0];mf=of[1];k&&lf===ff&&nf===mf||(lf=ff,nf=mf,fa.uniform2f(na.location,ff,mf));sf=l.scale;pf=sf[0];Cf=sf[1];k&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,fa.uniform2f(ya.location,pf,Cf));Re=l.scaleFract;Ge=Re[0];rf=Re[1];k&&qf===Ge&&Ef===rf||(qf=Ge,Ef=rf,fa.uniform2f(ea.location,Ge,rf));Hf=l.translate;Bf=Hf[0];Gf=Hf[1];k&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,fa.uniform2f(ja.location,Bf,Gf));
yf=l.translateFract;wf=yf[0];Af=yf[1];k&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,fa.uniform2f(qa.location,wf,Af));Kf=l.opacity;k&&Lf===Kf||(Lf=Kf,fa.uniform1f(V.location,Kf));Mf=l.elements;uf=null;(uf=(Rf=H(Mf))?Fa.createStream(Mf):Fa.getElements(Mf))&&fa.bindBuffer(34963,uf.buffer.buffer);If=l.offset;if(vf=l.count)0<ab?uf?g.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),ab):g.drawArraysInstancedANGLE(0,If,vf,ab):0>ab&&(uf?fa.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):fa.drawArrays(0,
If,vf)),n.viewportWidth=rc,n.viewportHeight=Nb,Ob&&y.destroyStream(rb),tb&&y.destroyStream(Pa),Ua&&y.destroyStream(nb),Sb&&y.destroyStream(qd),Bc&&y.destroyStream(cd),xe&&y.destroyStream(Ce),Dd&&y.destroyStream(je),Sd&&y.destroyStream(ne),de&&y.destroyStream(Me),Rf&&Fa.destroyStream(uf)}O.unbind();J.dirty=!0;za.setVAO(null);b&&(z.cpuTime+=performance.now()-e)},draw:function(a){var c,d,e,k,m,u,q,M,p,B,C,Ga,N,E,S,D,pa,K,P,r,O,L,R,Ea,Q,t,U,W,oa,Z,ba,G,ha,ia,ma,ua,Ba,Ha,Rb,cb,Mb,ab,ob,Va,Cd,Hb,Ib,rc,
Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Nd,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud,xe,Ce,jd,De,Od,pe,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te;c=Gb.next;c!==Gb.cur&&(c?fa.bindFramebuffer(36160,c.framebuffer):fa.bindFramebuffer(36160,null),Gb.cur=c);
if(J.dirty){var Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf;Ue=ta.dither;Ue!==J.dither&&(Ue?fa.enable(3024):fa.disable(3024),J.dither=Ue);Pe=X[0];we=X[1];if(Pe!==wa[0]||we!==wa[1])fa.blendEquationSeparate(Pe,we),wa[0]=Pe,wa[1]=we;He=ta.depth_func;He!==J.depth_func&&(fa.depthFunc(He),J.depth_func=He);Je=ga[0];Ke=ga[1];if(Je!==ac[0]||Ke!==ac[1])fa.depthRange(Je,Ke),ac[0]=Je,ac[1]=Ke;Le=ta.depth_mask;Le!==J.depth_mask&&(fa.depthMask(Le),J.depth_mask=
Le);Ie=hb[0];Md=hb[1];Yd=hb[2];ae=hb[3];if(Ie!==ca[0]||Md!==ca[1]||Yd!==ca[2]||ae!==ca[3])fa.colorMask(Ie,Md,Yd,ae),ca[0]=Ie,ca[1]=Md,ca[2]=Yd,ca[3]=ae;de=ta.cull_enable;de!==J.cull_enable&&(de?fa.enable(2884):fa.disable(2884),J.cull_enable=de);Me=ta.cull_face;Me!==J.cull_face&&(fa.cullFace(Me),J.cull_face=Me);Gd=ta.frontFace;Gd!==J.frontFace&&(fa.frontFace(Gd),J.frontFace=Gd);Td=ta.lineWidth;Td!==J.lineWidth&&(fa.lineWidth(Td),J.lineWidth=Td);Fe=ta.polygonOffset_enable;Fe!==J.polygonOffset_enable&&
(Fe?fa.enable(32823):fa.disable(32823),J.polygonOffset_enable=Fe);Ne=Ia[0];cf=Ia[1];if(Ne!==jf[0]||cf!==jf[1])fa.polygonOffset(Ne,cf),jf[0]=Ne,jf[1]=cf;bf=ta.sample_alpha;bf!==J.sample_alpha&&(bf?fa.enable(32926):fa.disable(32926),J.sample_alpha=bf);Ve=ta.sample_enable;Ve!==J.sample_enable&&(Ve?fa.enable(32928):fa.disable(32928),J.sample_enable=Ve);Qe=Tb[0];af=Tb[1];if(Qe!==ye[0]||af!==ye[1])fa.sampleCoverage(Qe,af),ye[0]=Qe,ye[1]=af;Ze=ta.stencil_mask;Ze!==J.stencil_mask&&(fa.stencilMask(Ze),J.stencil_mask=
Ze);We=Wd[0];Xe=Wd[1];Ud=Wd[2];if(We!==Ae[0]||Xe!==Ae[1]||Ud!==Ae[2])fa.stencilFunc(We,Xe,Ud),Ae[0]=We,Ae[1]=Xe,Ae[2]=Ud;Zd=oe[0];Ye=oe[1];kf=oe[2];of=oe[3];if(Zd!==he[0]||Ye!==he[1]||kf!==he[2]||of!==he[3])fa.stencilOpSeparate(Zd,Ye,kf,of),he[0]=Zd,he[1]=Ye,he[2]=kf,he[3]=of;ff=zd[0];lf=zd[1];mf=zd[2];nf=zd[3];if(ff!==Vd[0]||lf!==Vd[1]||mf!==Vd[2]||nf!==Vd[3])fa.stencilOpSeparate(ff,lf,mf,nf),Vd[0]=ff,Vd[1]=lf,Vd[2]=mf,Vd[3]=nf}d=a.viewport;e=d.x|0;k=d.y|0;m="width"in d?d.width|0:n.framebufferWidth-
e;u="height"in d?d.height|0:n.framebufferHeight-k;q=n.viewportWidth;n.viewportWidth=m;M=n.viewportHeight;n.viewportHeight=u;fa.viewport(e,k,m,u);fe[0]=e;fe[1]=k;fe[2]=m;fe[3]=u;fa.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;fa.enable(3042);J.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ka[0]=770;Ka[1]=771;Ka[2]=773;Ka[3]=1;fa.disable(2929);J.depth_enable=!1;p=a.viewport;B=p.x|0;C=p.y|0;Ga="width"in p?p.width|0:n.framebufferWidth-B;N="height"in p?p.height|0:n.framebufferHeight-C;fa.scissor(B,
C,Ga,N);xd[0]=B;xd[1]=C;xd[2]=Ga;xd[3]=N;fa.enable(3089);J.scissor_enable=!0;fa.disable(2960);J.stencil_enable=!1;if(E=J.profile)S=performance.now(),z.count++;fa.useProgram(v.program);D=Yb.angle_instanced_arrays;za.setVAO(null);pa=Y.call(this,n,a,0);K=!1;P=null;r=0;O=!1;R=L=0;Ea=1;Q=0;t=5126;Z=oa=W=U=0;H(pa)?(K=!0,P=y.createStream(34962,pa),t=P.dtype):(P=y.getBuffer(pa))?t=P.dtype:"constant"in pa?(Ea=2,"number"===typeof pa.constant?(W=pa.constant,oa=Z=U=0):(W=0<pa.constant.length?pa.constant[0]:0,
oa=1<pa.constant.length?pa.constant[1]:0,Z=2<pa.constant.length?pa.constant[2]:0,U=3<pa.constant.length?pa.constant[3]:0)):(P=H(pa.buffer)?y.createStream(34962,pa.buffer):y.getBuffer(pa.buffer),t="type"in pa?ee[pa.type]:P.dtype,O=!!pa.normalized,R=pa.size|0,L=pa.offset|0,Q=pa.stride|0,r=pa.divisor|0);ba=Aa.location;G=Ya[ba];if(1===Ea){G.buffer||fa.enableVertexAttribArray(ba);ha=R||1;if(G.type!==t||G.size!==ha||G.buffer!==P||G.normalized!==O||G.offset!==L||G.stride!==Q)fa.bindBuffer(34962,P.buffer),
fa.vertexAttribPointer(ba,ha,t,O,Q,L),G.type=t,G.size=ha,G.buffer=P,G.normalized=O,G.offset=L,G.stride=Q;G.divisor!==r&&(D.vertexAttribDivisorANGLE(ba,r),G.divisor=r)}else if(G.buffer&&(fa.disableVertexAttribArray(ba),G.buffer=null),G.x!==W||G.y!==oa||G.z!==Z||G.w!==U)fa.vertexAttrib4f(ba,W,oa,Z,U),G.x=W,G.y=oa,G.z=Z,G.w=U;ia=f.call(this,n,a,0);ma=!1;ua=null;Ba=0;Ha=!1;cb=Rb=0;Mb=1;ab=0;ob=5126;Ib=Hb=Cd=Va=0;H(ia)?(ma=!0,ua=y.createStream(34962,ia),ob=ua.dtype):(ua=y.getBuffer(ia))?ob=ua.dtype:"constant"in
ia?(Mb=2,"number"===typeof ia.constant?(Cd=ia.constant,Hb=Ib=Va=0):(Cd=0<ia.constant.length?ia.constant[0]:0,Hb=1<ia.constant.length?ia.constant[1]:0,Ib=2<ia.constant.length?ia.constant[2]:0,Va=3<ia.constant.length?ia.constant[3]:0)):(ua=H(ia.buffer)?y.createStream(34962,ia.buffer):y.getBuffer(ia.buffer),ob="type"in ia?ee[ia.type]:ua.dtype,Ha=!!ia.normalized,cb=ia.size|0,Rb=ia.offset|0,ab=ia.stride|0,Ba=ia.divisor|0);rc=la.location;Nb=Ya[rc];if(1===Mb){Nb.buffer||fa.enableVertexAttribArray(rc);kb=
cb||1;if(Nb.type!==ob||Nb.size!==kb||Nb.buffer!==ua||Nb.normalized!==Ha||Nb.offset!==Rb||Nb.stride!==ab)fa.bindBuffer(34962,ua.buffer),fa.vertexAttribPointer(rc,kb,ob,Ha,ab,Rb),Nb.type=ob,Nb.size=kb,Nb.buffer=ua,Nb.normalized=Ha,Nb.offset=Rb,Nb.stride=ab;Nb.divisor!==Ba&&(D.vertexAttribDivisorANGLE(rc,Ba),Nb.divisor=Ba)}else if(Nb.buffer&&(fa.disableVertexAttribArray(rc),Nb.buffer=null),Nb.x!==Cd||Nb.y!==Hb||Nb.z!==Ib||Nb.w!==Va)fa.vertexAttrib4f(rc,Cd,Hb,Ib,Va),Nb.x=Cd,Nb.y=Hb,Nb.z=Ib,Nb.w=Va;Fb=
g.call(this,n,a,0);Cb=!1;xb=null;ib=0;Zb=!1;rb=Ob=0;Ta=1;Pb=0;pb=5126;Ja=qb=jb=bc=0;H(Fb)?(Cb=!0,xb=y.createStream(34962,Fb),pb=xb.dtype):(xb=y.getBuffer(Fb))?pb=xb.dtype:"constant"in Fb?(Ta=2,"number"===typeof Fb.constant?(jb=Fb.constant,qb=Ja=bc=0):(jb=0<Fb.constant.length?Fb.constant[0]:0,qb=1<Fb.constant.length?Fb.constant[1]:0,Ja=2<Fb.constant.length?Fb.constant[2]:0,bc=3<Fb.constant.length?Fb.constant[3]:0)):(xb=H(Fb.buffer)?y.createStream(34962,Fb.buffer):y.getBuffer(Fb.buffer),pb="type"in
Fb?ee[Fb.type]:xb.dtype,Zb=!!Fb.normalized,rb=Fb.size|0,Ob=Fb.offset|0,Pb=Fb.stride|0,ib=Fb.divisor|0);sb=Qa.location;La=Ya[sb];if(1===Ta){La.buffer||fa.enableVertexAttribArray(sb);eb=rb||1;if(La.type!==pb||La.size!==eb||La.buffer!==xb||La.normalized!==Zb||La.offset!==Ob||La.stride!==Pb)fa.bindBuffer(34962,xb.buffer),fa.vertexAttribPointer(sb,eb,pb,Zb,Pb,Ob),La.type=pb,La.size=eb,La.buffer=xb,La.normalized=Zb,La.offset=Ob,La.stride=Pb;La.divisor!==ib&&(D.vertexAttribDivisorANGLE(sb,ib),La.divisor=
ib)}else if(La.buffer&&(fa.disableVertexAttribArray(sb),La.buffer=null),La.x!==jb||La.y!==qb||La.z!==Ja||La.w!==bc)fa.vertexAttrib4f(sb,jb,qb,Ja,bc),La.x=jb,La.y=qb,La.z=Ja,La.w=bc;gb=l.call(this,n,a,0);Na=!1;lb=null;Wa=0;ub=!1;Pa=tb=0;Cc=1;Sa=0;Jb=5126;Za=Nd=Ma=Db=0;H(gb)?(Na=!0,lb=y.createStream(34962,gb),Jb=lb.dtype):(lb=y.getBuffer(gb))?Jb=lb.dtype:"constant"in gb?(Cc=2,"number"===typeof gb.constant?(Ma=gb.constant,Nd=Za=Db=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Nd=1<gb.constant.length?
gb.constant[1]:0,Za=2<gb.constant.length?gb.constant[2]:0,Db=3<gb.constant.length?gb.constant[3]:0)):(lb=H(gb.buffer)?y.createStream(34962,gb.buffer):y.getBuffer(gb.buffer),Jb="type"in gb?ee[gb.type]:lb.dtype,ub=!!gb.normalized,Pa=gb.size|0,tb=gb.offset|0,Sa=gb.stride|0,Wa=gb.divisor|0);Kb=dc.location;Lb=Ya[Kb];if(1===Cc){Lb.buffer||fa.enableVertexAttribArray(Kb);mb=Pa||1;if(Lb.type!==Jb||Lb.size!==mb||Lb.buffer!==lb||Lb.normalized!==ub||Lb.offset!==tb||Lb.stride!==Sa)fa.bindBuffer(34962,lb.buffer),
fa.vertexAttribPointer(Kb,mb,Jb,ub,Sa,tb),Lb.type=Jb,Lb.size=mb,Lb.buffer=lb,Lb.normalized=ub,Lb.offset=tb,Lb.stride=Sa;Lb.divisor!==Wa&&(D.vertexAttribDivisorANGLE(Kb,Wa),Lb.divisor=Wa)}else if(Lb.buffer&&(fa.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Ma||Lb.y!==Nd||Lb.z!==Za||Lb.w!==Db)fa.vertexAttrib4f(Kb,Ma,Nd,Za,Db),Lb.x=Ma,Lb.y=Nd,Lb.z=Za,Lb.w=Db;Oa=b.call(this,n,a,0);$b=!1;Ra=null;vb=0;wb=!1;nb=Ua=0;gc=1;Ac=0;vc=5126;Xa=Sc=jc=bb=0;H(Oa)?($b=!0,Ra=y.createStream(34962,Oa),vc=Ra.dtype):
(Ra=y.getBuffer(Oa))?vc=Ra.dtype:"constant"in Oa?(gc=2,"number"===typeof Oa.constant?(jc=Oa.constant,Sc=Xa=bb=0):(jc=0<Oa.constant.length?Oa.constant[0]:0,Sc=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Ra=H(Oa.buffer)?y.createStream(34962,Oa.buffer):y.getBuffer(Oa.buffer),vc="type"in Oa?ee[Oa.type]:Ra.dtype,wb=!!Oa.normalized,nb=Oa.size|0,Ua=Oa.offset|0,Ac=Oa.stride|0,vb=Oa.divisor|0);Mc=Da.location;zb=Ya[Mc];if(1===gc){zb.buffer||
fa.enableVertexAttribArray(Mc);$a=nb||1;if(zb.type!==vc||zb.size!==$a||zb.buffer!==Ra||zb.normalized!==wb||zb.offset!==Ua||zb.stride!==Ac)fa.bindBuffer(34962,Ra.buffer),fa.vertexAttribPointer(Mc,$a,vc,wb,Ac,Ua),zb.type=vc,zb.size=$a,zb.buffer=Ra,zb.normalized=wb,zb.offset=Ua,zb.stride=Ac;zb.divisor!==vb&&(D.vertexAttribDivisorANGLE(Mc,vb),zb.divisor=vb)}else if(zb.buffer&&(fa.disableVertexAttribArray(Mc),zb.buffer=null),zb.x!==jc||zb.y!==Sc||zb.z!==Xa||zb.w!==bb)fa.vertexAttrib4f(Mc,jc,Sc,Xa,bb),
zb.x=jc,zb.y=Sc,zb.z=Xa,zb.w=bb;Vb=da.call(this,n,a,0);tc=!1;Wb=null;Qb=0;Kc=!1;qd=Sb=0;Ec=1;Hd=0;Nc=5126;wc=nc=td=Xc=0;H(Vb)?(tc=!0,Wb=y.createStream(34962,Vb),Nc=Wb.dtype):(Wb=y.getBuffer(Vb))?Nc=Wb.dtype:"constant"in Vb?(Ec=2,"number"===typeof Vb.constant?(td=Vb.constant,nc=wc=Xc=0):(td=0<Vb.constant.length?Vb.constant[0]:0,nc=1<Vb.constant.length?Vb.constant[1]:0,wc=2<Vb.constant.length?Vb.constant[2]:0,Xc=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=H(Vb.buffer)?y.createStream(34962,Vb.buffer):
y.getBuffer(Vb.buffer),Nc="type"in Vb?ee[Vb.type]:Wb.dtype,Kc=!!Vb.normalized,qd=Vb.size|0,Sb=Vb.offset|0,Hd=Vb.stride|0,Qb=Vb.divisor|0);hc=ra.location;db=Ya[hc];if(1===Ec){db.buffer||fa.enableVertexAttribArray(hc);sc=qd||1;if(db.type!==Nc||db.size!==sc||db.buffer!==Wb||db.normalized!==Kc||db.offset!==Sb||db.stride!==Hd)fa.bindBuffer(34962,Wb.buffer),fa.vertexAttribPointer(hc,sc,Nc,Kc,Hd,Sb),db.type=Nc,db.size=sc,db.buffer=Wb,db.normalized=Kc,db.offset=Sb,db.stride=Hd;db.divisor!==Qb&&(D.vertexAttribDivisorANGLE(hc,
Qb),db.divisor=Qb)}else if(db.buffer&&(fa.disableVertexAttribArray(hc),db.buffer=null),db.x!==td||db.y!==nc||db.z!==wc||db.w!==Xc)fa.vertexAttrib4f(hc,td,nc,wc,Xc),db.x=td,db.y=nc,db.z=wc,db.w=Xc;Ub=x.call(this,n,a,0);Xb=!1;ec=null;ic=0;yc=!1;cd=Bc=0;Qc=1;Rc=0;Tc=5126;Zc=dd=md=Yc=0;H(Ub)?(Xb=!0,ec=y.createStream(34962,Ub),Tc=ec.dtype):(ec=y.getBuffer(Ub))?Tc=ec.dtype:"constant"in Ub?(Qc=2,"number"===typeof Ub.constant?(md=Ub.constant,dd=Zc=Yc=0):(md=0<Ub.constant.length?Ub.constant[0]:0,dd=1<Ub.constant.length?
Ub.constant[1]:0,Zc=2<Ub.constant.length?Ub.constant[2]:0,Yc=3<Ub.constant.length?Ub.constant[3]:0)):(ec=H(Ub.buffer)?y.createStream(34962,Ub.buffer):y.getBuffer(Ub.buffer),Tc="type"in Ub?ee[Ub.type]:ec.dtype,yc=!!Ub.normalized,cd=Ub.size|0,Bc=Ub.offset|0,Rc=Ub.stride|0,ic=Ub.divisor|0);kc=w.location;cc=Ya[kc];if(1===Qc){cc.buffer||fa.enableVertexAttribArray(kc);$c=cd||4;if(cc.type!==Tc||cc.size!==$c||cc.buffer!==ec||cc.normalized!==yc||cc.offset!==Bc||cc.stride!==Rc)fa.bindBuffer(34962,ec.buffer),
fa.vertexAttribPointer(kc,$c,Tc,yc,Rc,Bc),cc.type=Tc,cc.size=$c,cc.buffer=ec,cc.normalized=yc,cc.offset=Bc,cc.stride=Rc;cc.divisor!==ic&&(D.vertexAttribDivisorANGLE(kc,ic),cc.divisor=ic)}else if(cc.buffer&&(fa.disableVertexAttribArray(kc),cc.buffer=null),cc.x!==md||cc.y!==dd||cc.z!==Zc||cc.w!==Yc)fa.vertexAttrib4f(kc,md,dd,Zc,Yc),cc.x=md,cc.y=dd,cc.z=Zc,cc.w=Yc;Wc=F.call(this,n,a,0);ed=!1;zc=null;id=0;ud=!1;Ce=xe=0;jd=1;De=0;Od=5126;Id=Pd=be=pe=0;H(Wc)?(ed=!0,zc=y.createStream(34962,Wc),Od=zc.dtype):
(zc=y.getBuffer(Wc))?Od=zc.dtype:"constant"in Wc?(jd=2,"number"===typeof Wc.constant?(be=Wc.constant,Pd=Id=pe=0):(be=0<Wc.constant.length?Wc.constant[0]:0,Pd=1<Wc.constant.length?Wc.constant[1]:0,Id=2<Wc.constant.length?Wc.constant[2]:0,pe=3<Wc.constant.length?Wc.constant[3]:0)):(zc=H(Wc.buffer)?y.createStream(34962,Wc.buffer):y.getBuffer(Wc.buffer),Od="type"in Wc?ee[Wc.type]:zc.dtype,ud=!!Wc.normalized,Ce=Wc.size|0,xe=Wc.offset|0,De=Wc.stride|0,id=Wc.divisor|0);Fd=xa.location;od=Ya[Fd];if(1===jd){od.buffer||
fa.enableVertexAttribArray(Fd);Uc=Ce||4;if(od.type!==Od||od.size!==Uc||od.buffer!==zc||od.normalized!==ud||od.offset!==xe||od.stride!==De)fa.bindBuffer(34962,zc.buffer),fa.vertexAttribPointer(Fd,Uc,Od,ud,De,xe),od.type=Od,od.size=Uc,od.buffer=zc,od.normalized=ud,od.offset=xe,od.stride=De;od.divisor!==id&&(D.vertexAttribDivisorANGLE(Fd,id),od.divisor=id)}else if(od.buffer&&(fa.disableVertexAttribArray(Fd),od.buffer=null),od.x!==be||od.y!==Pd||od.z!==Id||od.w!==pe)fa.vertexAttrib4f(Fd,be,Pd,Id,pe),
od.x=be,od.y=Pd,od.z=Id,od.w=pe;vd=T.call(this,n,a,0);sd=!1;kd=null;wd=0;Bd=!1;je=Dd=0;re=1;te=0;le=5126;ce=ue=ge=ke=0;H(vd)?(sd=!0,kd=y.createStream(34962,vd),le=kd.dtype):(kd=y.getBuffer(vd))?le=kd.dtype:"constant"in vd?(re=2,"number"===typeof vd.constant?(ge=vd.constant,ue=ce=ke=0):(ge=0<vd.constant.length?vd.constant[0]:0,ue=1<vd.constant.length?vd.constant[1]:0,ce=2<vd.constant.length?vd.constant[2]:0,ke=3<vd.constant.length?vd.constant[3]:0)):(kd=H(vd.buffer)?y.createStream(34962,vd.buffer):
y.getBuffer(vd.buffer),le="type"in vd?ee[vd.type]:kd.dtype,Bd=!!vd.normalized,je=vd.size|0,Dd=vd.offset|0,te=vd.stride|0,wd=vd.divisor|0);me=aa.location;Oc=Ya[me];if(1===re){Oc.buffer||fa.enableVertexAttribArray(me);hd=je||1;if(Oc.type!==le||Oc.size!==hd||Oc.buffer!==kd||Oc.normalized!==Bd||Oc.offset!==Dd||Oc.stride!==te)fa.bindBuffer(34962,kd.buffer),fa.vertexAttribPointer(me,hd,le,Bd,te,Dd),Oc.type=le,Oc.size=hd,Oc.buffer=kd,Oc.normalized=Bd,Oc.offset=Dd,Oc.stride=te;Oc.divisor!==wd&&(D.vertexAttribDivisorANGLE(me,
wd),Oc.divisor=wd)}else if(Oc.buffer&&(fa.disableVertexAttribArray(me),Oc.buffer=null),Oc.x!==ge||Oc.y!==ue||Oc.z!==ce||Oc.w!==ke)fa.vertexAttrib4f(me,ge,ue,ce,ke),Oc.x=ge,Oc.y=ue,Oc.z=ce,Oc.w=ke;fa.uniform1i(I.location,!1);fa.uniform1f(Ca.location,n.pixelRatio);ve=A.call(this,n,a,0);fa.uniform2f(na.location,ve[0],ve[1]);qe=a.scale;fa.uniform2f(ya.location,qe[0],qe[1]);Kd=a.scaleFract;fa.uniform2f(ea.location,Kd[0],Kd[1]);Qd=a.translate;fa.uniform2f(ja.location,Qd[0],Qd[1]);Rd=a.translateFract;fa.uniform2f(qa.location,
Rd[0],Rd[1]);fa.uniform1f(V.location,a.opacity);fa.uniform1i(sa.location,h.bind());Sd=a.elements;ne=null;(ne=(ze=H(Sd))?Fa.createStream(Sd):Fa.getElements(Sd))&&fa.bindBuffer(34963,ne.buffer.buffer);Ee=a.offset;if(se=a.count)Te=va.instances,0<Te?ne?D.drawElementsInstancedANGLE(0,se,ne.type,Ee<<(ne.type-5121>>1),Te):D.drawArraysInstancedANGLE(0,Ee,se,Te):0>Te&&(ne?fa.drawElements(0,se,ne.type,Ee<<(ne.type-5121>>1)):fa.drawArrays(0,Ee,se)),J.dirty=!0,za.setVAO(null),n.viewportWidth=q,n.viewportHeight=
M,E&&(z.cpuTime+=performance.now()-S),K&&y.destroyStream(P),ma&&y.destroyStream(ua),Cb&&y.destroyStream(xb),Na&&y.destroyStream(lb),$b&&y.destroyStream(Ra),tc&&y.destroyStream(Wb),Xb&&y.destroyStream(ec),ed&&y.destroyStream(zc),sd&&y.destroyStream(kd),h.unbind(),ze&&Fa.destroyStream(ne)},scope:function(a,b,g){var m,w,l,v,f,la,M,I,Y,N,V,S,K,ea,fa,P,dc,h,ka,Qa,x,O,X,A,aa,za,da,ya,xa,sa,F,T,ca,ja,W,ba,Ya,qa,ia,ha,Da,na,Aa,ra,wa,Ca,Gb,Ba,Ia,Ka,hb,Yb,ga,Tb,ac,Ta,Pb,pb,Wd,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,
ub,tb,Pa,xd,Sa,Jb,Db,Ma,yd,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,Vd,Ec,Ae,Nc,Xc,fe,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,he,oe,zd,jd,ye,Od,jf,be,Pd,Id,Fd,od,Uc,vd,sd,kd,wd,Bd,Dd,je,re,te,le,ke,ge,ue,ce,me,Oc,hd,ve,qe,Kd,Qd,Rd,Sd,ne,ze,Ee,se,Te,Ue,Pe,we,He,Je,Ke,Le,Ie,Md,Yd,ae,de,Me,Gd,Td,Fe,Ne,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,Zd,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,
Rf,If,vf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;m=a.viewport;w=m.x|0;l=m.y|0;v="width"in m?m.width|0:n.framebufferWidth-w;f="height"in m?m.height|0:n.framebufferHeight-l;la=n.viewportWidth;n.viewportWidth=v;M=n.viewportHeight;n.viewportHeight=f;I=Nd[0];Nd[0]=w;Y=Nd[1];Nd[1]=l;N=Nd[2];Nd[2]=v;V=Nd[3];Nd[3]=f;S=Ea[0];Ea[0]=0;K=Ea[1];Ea[1]=0;ea=Ea[2];Ea[2]=0;fa=Ea[3];
Ea[3]=1;P=ta.blend_enable;ta.blend_enable=!0;dc=Ha[0];Ha[0]=770;h=Ha[1];Ha[1]=771;ka=Ha[2];Ha[2]=773;Qa=Ha[3];Ha[3]=1;x=ta.depth_enable;ta.depth_enable=!1;O=a.viewport;X=O.x|0;A=O.y|0;aa="width"in O?O.width|0:n.framebufferWidth-X;za="height"in O?O.height|0:n.framebufferHeight-A;da=Cd[0];Cd[0]=X;ya=Cd[1];Cd[1]=A;xa=Cd[2];Cd[2]=aa;sa=Cd[3];Cd[3]=za;F=ta.scissor_enable;ta.scissor_enable=!0;T=ta.stencil_enable;ta.stencil_enable=!1;if(ca=J.profile)ja=performance.now(),z.count++;W=a.elements;ba=null;ba=
(Ya=H(W))?Fa.createStream(W):Fa.getElements(W);qa=va.elements;va.elements=ba;ia=a.offset;ha=va.offset;va.offset=ia;Da=a.count;na=va.count;va.count=Da;Aa=va.primitive;va.primitive=0;ra=pa[45];pa[45]=!1;wa=a.markerTexture;Ca=pa[48];pa[48]=wa;Gb=a.opacity;Ba=pa[10];pa[10]=Gb;Ia=r.call(this,n,a,g);Ka=pa[46];pa[46]=Ia;hb=pa[47];pa[47]=t;Yb=n.pixelRatio;ga=pa[34];pa[34]=Yb;Tb=a.scale;ac=pa[6];pa[6]=Tb;Ta=a.scaleFract;Pb=pa[7];pa[7]=Ta;pb=a.translate;Wd=pa[8];pa[8]=pb;jb=a.translateFract;qb=pa[9];pa[9]=
jb;Ja=p.call(this,n,a,g);sb=!1;La=null;eb=0;gb=!1;lb=Na=0;Wa=1;ub=0;tb=5126;Jb=Sa=xd=Pa=0;H(Ja)?(sb=!0,La=y.createStream(34962,Ja),tb=La.dtype):(La=y.getBuffer(Ja))?tb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(xd=Ja.constant,Sa=Jb=Pa=0):(xd=0<Ja.constant.length?Ja.constant[0]:0,Sa=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=H(Ja.buffer)?y.createStream(34962,Ja.buffer):y.getBuffer(Ja.buffer),tb="type"in
Ja?ee[Ja.type]:La.dtype,gb=!!Ja.normalized,lb=Ja.size|0,Na=Ja.offset|0,ub=Ja.stride|0,eb=Ja.divisor|0);Db=Q.buffer;Q.buffer=La;Ma=Q.divisor;Q.divisor=eb;yd=Q.normalized;Q.normalized=gb;Za=Q.offset;Q.offset=Na;Kb=Q.size;Q.size=lb;Lb=Q.state;Q.state=Wa;mb=Q.stride;Q.stride=ub;Oa=Q.type;Q.type=tb;$b=Q.w;Q.w=Pa;Ra=Q.x;Q.x=xd;vb=Q.y;Q.y=Sa;wb=Q.z;Q.z=Jb;Ua=q.call(this,n,a,g);nb=!1;gc=null;Ac=0;vc=!1;jc=bb=0;Sc=1;Xa=0;Mc=5126;tc=Vb=$a=zb=0;H(Ua)?(nb=!0,gc=y.createStream(34962,Ua),Mc=gc.dtype):(gc=y.getBuffer(Ua))?
Mc=gc.dtype:"constant"in Ua?(Sc=2,"number"===typeof Ua.constant?($a=Ua.constant,Vb=tc=zb=0):($a=0<Ua.constant.length?Ua.constant[0]:0,Vb=1<Ua.constant.length?Ua.constant[1]:0,tc=2<Ua.constant.length?Ua.constant[2]:0,zb=3<Ua.constant.length?Ua.constant[3]:0)):(gc=H(Ua.buffer)?y.createStream(34962,Ua.buffer):y.getBuffer(Ua.buffer),Mc="type"in Ua?ee[Ua.type]:gc.dtype,vc=!!Ua.normalized,jc=Ua.size|0,bb=Ua.offset|0,Xa=Ua.stride|0,Ac=Ua.divisor|0);Wb=L.buffer;L.buffer=gc;Qb=L.divisor;L.divisor=Ac;Kc=L.normalized;
L.normalized=vc;Sb=L.offset;L.offset=bb;Vd=L.size;L.size=jc;Ec=L.state;L.state=Sc;Ae=L.stride;L.stride=Xa;Nc=L.type;L.type=Mc;Xc=L.w;L.w=zb;fe=L.x;L.x=$a;nc=L.y;L.y=Vb;wc=L.z;L.z=tc;hc=G.call(this,n,a,g);db=!1;sc=null;Ub=0;Xb=!1;ic=ec=0;yc=1;Bc=0;cd=5126;Yc=Tc=Rc=Qc=0;H(hc)?(db=!0,sc=y.createStream(34962,hc),cd=sc.dtype):(sc=y.getBuffer(hc))?cd=sc.dtype:"constant"in hc?(yc=2,"number"===typeof hc.constant?(Rc=hc.constant,Tc=Yc=Qc=0):(Rc=0<hc.constant.length?hc.constant[0]:0,Tc=1<hc.constant.length?
hc.constant[1]:0,Yc=2<hc.constant.length?hc.constant[2]:0,Qc=3<hc.constant.length?hc.constant[3]:0)):(sc=H(hc.buffer)?y.createStream(34962,hc.buffer):y.getBuffer(hc.buffer),cd="type"in hc?ee[hc.type]:sc.dtype,Xb=!!hc.normalized,ic=hc.size|0,ec=hc.offset|0,Bc=hc.stride|0,Ub=hc.divisor|0);md=e.buffer;e.buffer=sc;dd=e.divisor;e.divisor=Ub;Zc=e.normalized;e.normalized=Xb;kc=e.offset;e.offset=ec;cc=e.size;e.size=ic;$c=e.state;e.state=yc;Wc=e.stride;e.stride=Bc;ed=e.type;e.type=cd;zc=e.w;e.w=Qc;id=e.x;
e.x=Rc;he=e.y;e.y=Tc;oe=e.z;e.z=Yc;zd=C.call(this,n,a,g);jd=!1;ye=null;Od=0;jf=!1;Pd=be=0;Id=1;Fd=0;od=5126;kd=sd=vd=Uc=0;H(zd)?(jd=!0,ye=y.createStream(34962,zd),od=ye.dtype):(ye=y.getBuffer(zd))?od=ye.dtype:"constant"in zd?(Id=2,"number"===typeof zd.constant?(vd=zd.constant,sd=kd=Uc=0):(vd=0<zd.constant.length?zd.constant[0]:0,sd=1<zd.constant.length?zd.constant[1]:0,kd=2<zd.constant.length?zd.constant[2]:0,Uc=3<zd.constant.length?zd.constant[3]:0)):(ye=H(zd.buffer)?y.createStream(34962,zd.buffer):
y.getBuffer(zd.buffer),od="type"in zd?ee[zd.type]:ye.dtype,jf=!!zd.normalized,Pd=zd.size|0,be=zd.offset|0,Fd=zd.stride|0,Od=zd.divisor|0);wd=U.buffer;U.buffer=ye;Bd=U.divisor;U.divisor=Od;Dd=U.normalized;U.normalized=jf;je=U.offset;U.offset=be;re=U.size;U.size=Pd;te=U.state;U.state=Id;le=U.stride;U.stride=Fd;ke=U.type;U.type=od;ge=U.w;U.w=Uc;ue=U.x;U.x=vd;ce=U.y;U.y=sd;me=U.z;U.z=kd;Oc=k.call(this,n,a,g);hd=!1;ve=null;qe=0;Kd=!1;Rd=Qd=0;Sd=1;ne=0;ze=5126;Ue=Te=se=Ee=0;H(Oc)?(hd=!0,ve=y.createStream(34962,
Oc),ze=ve.dtype):(ve=y.getBuffer(Oc))?ze=ve.dtype:"constant"in Oc?(Sd=2,"number"===typeof Oc.constant?(se=Oc.constant,Te=Ue=Ee=0):(se=0<Oc.constant.length?Oc.constant[0]:0,Te=1<Oc.constant.length?Oc.constant[1]:0,Ue=2<Oc.constant.length?Oc.constant[2]:0,Ee=3<Oc.constant.length?Oc.constant[3]:0)):(ve=H(Oc.buffer)?y.createStream(34962,Oc.buffer):y.getBuffer(Oc.buffer),ze="type"in Oc?ee[Oc.type]:ve.dtype,Kd=!!Oc.normalized,Rd=Oc.size|0,Qd=Oc.offset|0,ne=Oc.stride|0,qe=Oc.divisor|0);Pe=Z.buffer;Z.buffer=
ve;we=Z.divisor;Z.divisor=qe;He=Z.normalized;Z.normalized=Kd;Je=Z.offset;Z.offset=Qd;Ke=Z.size;Z.size=Rd;Le=Z.state;Z.state=Sd;Ie=Z.stride;Z.stride=ne;Md=Z.type;Z.type=ze;Yd=Z.w;Z.w=Ee;ae=Z.x;Z.x=se;de=Z.y;Z.y=Te;Me=Z.z;Z.z=Ue;Gd=B.call(this,n,a,g);Td=!1;Fe=null;Ne=0;cf=!1;Ve=bf=0;Qe=1;af=0;Ze=5126;Zd=Ud=Xe=We=0;H(Gd)?(Td=!0,Fe=y.createStream(34962,Gd),Ze=Fe.dtype):(Fe=y.getBuffer(Gd))?Ze=Fe.dtype:"constant"in Gd?(Qe=2,"number"===typeof Gd.constant?(Xe=Gd.constant,Ud=Zd=We=0):(Xe=0<Gd.constant.length?
Gd.constant[0]:0,Ud=1<Gd.constant.length?Gd.constant[1]:0,Zd=2<Gd.constant.length?Gd.constant[2]:0,We=3<Gd.constant.length?Gd.constant[3]:0)):(Fe=H(Gd.buffer)?y.createStream(34962,Gd.buffer):y.getBuffer(Gd.buffer),Ze="type"in Gd?ee[Gd.type]:Fe.dtype,cf=!!Gd.normalized,Ve=Gd.size|0,bf=Gd.offset|0,af=Gd.stride|0,Ne=Gd.divisor|0);Ye=u.buffer;u.buffer=Fe;kf=u.divisor;u.divisor=Ne;of=u.normalized;u.normalized=cf;ff=u.offset;u.offset=bf;lf=u.size;u.size=Ve;mf=u.state;u.state=Qe;nf=u.stride;u.stride=af;
sf=u.type;u.type=Ze;pf=u.w;u.w=We;tf=u.x;u.x=Xe;Cf=u.y;u.y=Ud;Df=u.z;u.z=Zd;Re=ua.call(this,n,a,g);Ge=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;H(Re)?(Ge=!0,qf=y.createStream(34962,Re),xf=qf.dtype):(qf=y.getBuffer(Re))?xf=qf.dtype:"constant"in Re?(Ff=2,"number"===typeof Re.constant?(wf=Re.constant,zf=Af=yf=0):(wf=0<Re.constant.length?Re.constant[0]:0,zf=1<Re.constant.length?Re.constant[1]:0,Af=2<Re.constant.length?Re.constant[2]:0,yf=3<Re.constant.length?Re.constant[3]:0)):(qf=
H(Re.buffer)?y.createStream(34962,Re.buffer):y.getBuffer(Re.buffer),xf="type"in Re?ee[Re.type]:qf.dtype,Ef=!!Re.normalized,Bf=Re.size|0,Hf=Re.offset|0,Gf=Re.stride|0,rf=Re.divisor|0);Jf=D.buffer;D.buffer=qf;Kf=D.divisor;D.divisor=rf;Lf=D.normalized;D.normalized=Ef;Mf=D.offset;D.offset=Hf;uf=D.size;D.size=Bf;Rf=D.state;D.state=Ff;If=D.stride;D.stride=Gf;vf=D.type;D.type=xf;dg=D.w;D.w=yf;Sf=D.x;D.x=wf;Tf=D.y;D.y=zf;qg=D.z;D.z=Af;gf=E.call(this,n,a,g);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;
Zf=Yf=Xf=Uf=0;H(gf)?(df=!0,Nf=y.createStream(34962,gf),Wf=Nf.dtype):(Nf=y.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=H(gf.buffer)?y.createStream(34962,gf.buffer):y.getBuffer(gf.buffer),Wf="type"in gf?ee[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|
0,ig=gf.stride|0,Of=gf.divisor|0);jg=d.buffer;d.buffer=Nf;rg=d.divisor;d.divisor=Of;sg=d.normalized;d.normalized=eg;tg=d.offset;d.offset=fg;ug=d.size;d.size=gg;vg=d.state;d.state=hg;wg=d.stride;d.stride=ig;xg=d.type;d.type=Wf;yg=d.w;d.w=Uf;zg=d.x;d.x=Xf;Ag=d.y;d.y=Yf;Bg=d.z;d.z=Zf;hf=R.call(this,n,a,g);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;H(hf)?(ef=!0,Pf=y.createStream(34962,hf),$f=Pf.dtype):(Pf=y.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?
(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=H(hf.buffer)?y.createStream(34962,hf.buffer):y.getBuffer(hf.buffer),$f="type"in hf?ee[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=c.buffer;c.buffer=Pf;Cg=c.divisor;c.divisor=Qf;Dg=c.normalized;c.normalized=kg;Eg=c.offset;c.offset=lg;Fg=c.size;c.size=
mg;Gg=c.state;c.state=ng;Hg=c.stride;c.stride=og;Ig=c.type;c.type=$f;Jg=c.w;c.w=Vf;Kg=c.x;c.x=ag;Lg=c.y;c.y=bg;Mg=c.z;c.z=cg;Ng=Ga.vert;Ga.vert=59;Og=Ga.frag;Ga.frag=58;J.dirty=!0;b(n,a,g);n.viewportWidth=la;n.viewportHeight=M;Nd[0]=I;Nd[1]=Y;Nd[2]=N;Nd[3]=V;Ea[0]=S;Ea[1]=K;Ea[2]=ea;Ea[3]=fa;ta.blend_enable=P;Ha[0]=dc;Ha[1]=h;Ha[2]=ka;Ha[3]=Qa;ta.depth_enable=x;Cd[0]=da;Cd[1]=ya;Cd[2]=xa;Cd[3]=sa;ta.scissor_enable=F;ta.stencil_enable=T;ca&&(z.cpuTime+=performance.now()-ja);Ya&&Fa.destroyStream(ba);
va.elements=qa;va.offset=ha;va.count=na;va.primitive=Aa;pa[45]=ra;pa[48]=Ca;pa[10]=Ba;pa[46]=Ka;pa[47]=hb;pa[34]=ga;pa[6]=ac;pa[7]=Pb;pa[8]=Wd;pa[9]=qb;sb&&y.destroyStream(La);Q.buffer=Db;Q.divisor=Ma;Q.normalized=yd;Q.offset=Za;Q.size=Kb;Q.state=Lb;Q.stride=mb;Q.type=Oa;Q.w=$b;Q.x=Ra;Q.y=vb;Q.z=wb;nb&&y.destroyStream(gc);L.buffer=Wb;L.divisor=Qb;L.normalized=Kc;L.offset=Sb;L.size=Vd;L.state=Ec;L.stride=Ae;L.type=Nc;L.w=Xc;L.x=fe;L.y=nc;L.z=wc;db&&y.destroyStream(sc);e.buffer=md;e.divisor=dd;e.normalized=
Zc;e.offset=kc;e.size=cc;e.state=$c;e.stride=Wc;e.type=ed;e.w=zc;e.x=id;e.y=he;e.z=oe;jd&&y.destroyStream(ye);U.buffer=wd;U.divisor=Bd;U.normalized=Dd;U.offset=je;U.size=re;U.state=te;U.stride=le;U.type=ke;U.w=ge;U.x=ue;U.y=ce;U.z=me;hd&&y.destroyStream(ve);Z.buffer=Pe;Z.divisor=we;Z.normalized=He;Z.offset=Je;Z.size=Ke;Z.state=Le;Z.stride=Ie;Z.type=Md;Z.w=Yd;Z.x=ae;Z.y=de;Z.z=Me;Td&&y.destroyStream(Fe);u.buffer=Ye;u.divisor=kf;u.normalized=of;u.offset=ff;u.size=lf;u.state=mf;u.stride=nf;u.type=sf;
u.w=pf;u.x=tf;u.y=Cf;u.z=Df;Ge&&y.destroyStream(qf);D.buffer=Jf;D.divisor=Kf;D.normalized=Lf;D.offset=Mf;D.size=uf;D.state=Rf;D.stride=If;D.type=vf;D.w=dg;D.x=Sf;D.y=Tf;D.z=qg;df&&y.destroyStream(Nf);d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;ef&&y.destroyStream(Pf);c.buffer=pg;c.divisor=Cg;c.normalized=Dg;c.offset=Eg;c.size=Fg;c.state=Gg;c.stride=Hg;c.type=Ig;c.w=Jg;c.x=Kg;c.y=Lg;c.z=Mg;Ga.vert=Ng;Ga.frag=Og;J.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,z,v,Y,f,g,l,b,da,x,F,T,A,h,r,t,p,Q,q,L,G,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,W,ba){var S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea,ka,X;S=a.attributes;M=a.buffer;N=a.context;m=a.current;O=a.draw;P=a.elements;xa=a.extensions;ra=a.framebuffer;w=a.gl;I=a.isBufferArgs;aa=a.next;V=a.shader;
na=a.uniforms;sa=a.vao;Ca=aa.blend_color;ya=m.blend_color;ea=aa.blend_equation;Da=m.blend_equation;ja=aa.blend_func;qa=m.blend_func;Aa=aa.colorMask;Qa=m.colorMask;la=aa.depth_range;dc=m.depth_range;Ya=aa.polygonOffset_offset;y=m.polygonOffset_offset;n=aa.sample_coverage;J=m.sample_coverage;va=aa.scissor_box;Fa=m.scissor_box;Yb=aa.stencil_func;Gb=m.stencil_func;fa=aa.stencil_opBack;H=m.stencil_opBack;ta=aa.stencil_opFront;Ga=m.stencil_opFront;pa=aa.viewport;za=m.viewport;Ea={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:4,stride:8};X={offset:0,stride:8};return{batch:function(a,b){var g,l,v,f,p,Y,pa,V,h,x,r,A,t;g=ra.next;g!==ra.cur&&(g?w.bindFramebuffer(36160,g.framebuffer):w.bindFramebuffer(36160,null),ra.cur=g);if(m.dirty){var da,F,T,ja,oa,na,Ca,ga,$e,Oe,Se,Ed,Be,ie,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc;da=aa.dither;da!==m.dither&&(da?w.enable(3024):w.disable(3024),m.dither=da);F=ea[0];T=ea[1];if(F!==Da[0]||
T!==Da[1])w.blendEquationSeparate(F,T),Da[0]=F,Da[1]=T;ja=aa.depth_func;ja!==m.depth_func&&(w.depthFunc(ja),m.depth_func=ja);oa=la[0];na=la[1];if(oa!==dc[0]||na!==dc[1])w.depthRange(oa,na),dc[0]=oa,dc[1]=na;Ca=aa.depth_mask;Ca!==m.depth_mask&&(w.depthMask(Ca),m.depth_mask=Ca);ga=Aa[0];$e=Aa[1];Oe=Aa[2];Se=Aa[3];if(ga!==Qa[0]||$e!==Qa[1]||Oe!==Qa[2]||Se!==Qa[3])w.colorMask(ga,$e,Oe,Se),Qa[0]=ga,Qa[1]=$e,Qa[2]=Oe,Qa[3]=Se;Ed=aa.cull_enable;Ed!==m.cull_enable&&(Ed?w.enable(2884):w.disable(2884),m.cull_enable=
Ed);Be=aa.cull_face;Be!==m.cull_face&&(w.cullFace(Be),m.cull_face=Be);ie=aa.frontFace;ie!==m.frontFace&&(w.frontFace(ie),m.frontFace=ie);Jd=aa.lineWidth;Jd!==m.lineWidth&&(w.lineWidth(Jd),m.lineWidth=Jd);Xd=aa.polygonOffset_enable;Xd!==m.polygonOffset_enable&&(Xd?w.enable(32823):w.disable(32823),m.polygonOffset_enable=Xd);Ad=Ya[0];nd=Ya[1];if(Ad!==y[0]||nd!==y[1])w.polygonOffset(Ad,nd),y[0]=Ad,y[1]=nd;ad=aa.sample_alpha;ad!==m.sample_alpha&&(ad?w.enable(32926):w.disable(32926),m.sample_alpha=ad);
rd=aa.sample_enable;rd!==m.sample_enable&&(rd?w.enable(32928):w.disable(32928),m.sample_enable=rd);Lc=n[0];pd=n[1];if(Lc!==J[0]||pd!==J[1])w.sampleCoverage(Lc,pd),J[0]=Lc,J[1]=pd;Fc=aa.stencil_mask;Fc!==m.stencil_mask&&(w.stencilMask(Fc),m.stencil_mask=Fc);fd=Yb[0];Pc=Yb[1];ld=Yb[2];if(fd!==Gb[0]||Pc!==Gb[1]||ld!==Gb[2])w.stencilFunc(fd,Pc,ld),Gb[0]=fd,Gb[1]=Pc,Gb[2]=ld;Ab=ta[0];Eb=ta[1];uc=ta[2];yb=ta[3];if(Ab!==Ga[0]||Eb!==Ga[1]||uc!==Ga[2]||yb!==Ga[3])w.stencilOpSeparate(Ab,Eb,uc,yb),Ga[0]=Ab,
Ga[1]=Eb,Ga[2]=uc,Ga[3]=yb;xc=fa[0];Bb=fa[1];Jc=fa[2];lc=fa[3];if(xc!==H[0]||Bb!==H[1]||Jc!==H[2]||lc!==H[3])w.stencilOpSeparate(xc,Bb,Jc,lc),H[0]=xc,H[1]=Bb,H[2]=Jc,H[3]=lc;Gc=aa.scissor_enable;Gc!==m.scissor_enable&&(Gc?w.enable(3089):w.disable(3089),m.scissor_enable=Gc);gd=va[0];bd=va[1];Dc=va[2];fc=va[3];if(gd!==Fa[0]||bd!==Fa[1]||Dc!==Fa[2]||fc!==Fa[3])w.scissor(gd,bd,Dc,fc),Fa[0]=gd,Fa[1]=bd,Fa[2]=Dc,Fa[3]=fc}l=this.viewport;v=l.x|0;f=l.y|0;p="width"in l?l.width|0:N.framebufferWidth-v;Y="height"in
l?l.height|0:N.framebufferHeight-f;pa=N.viewportWidth;N.viewportWidth=p;V=N.viewportHeight;N.viewportHeight=Y;w.viewport(v,f,p,Y);za[0]=v;za[1]=f;za[2]=p;za[3]=Y;w.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;w.enable(3042);m.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;w.disable(2929);m.depth_enable=!1;w.disable(2960);m.stencil_enable=!1;if(h=m.profile)x=performance.now(),z.count+=b;w.useProgram(Q.program);r=xa.angle_instanced_arrays;var Hc,oc,qc,
mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb;sa.setVAO(null);X.buffer=this.sizeBuffer;Hc=!1;oc=null;qc=0;mc=!1;fb=pc=0;Vc=1;Rb=0;cb=5126;Va=ob=ab=Mb=0;I(X)?(Hc=!0,oc=M.createStream(34962,X),cb=oc.dtype):(oc=M.getBuffer(X))?cb=oc.dtype:"constant"in X?(Vc=2,"number"===typeof X.constant?(ab=X.constant,ob=Va=Mb=0):(ab=0<X.constant.length?X.constant[0]:
0,ob=1<X.constant.length?X.constant[1]:0,Va=2<X.constant.length?X.constant[2]:0,Mb=3<X.constant.length?X.constant[3]:0)):(oc=I(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),cb="type"in X?Ea[X.type]:oc.dtype,mc=!!X.normalized,fb=X.size|0,pc=X.offset|0,Rb=X.stride|0,qc=X.divisor|0);Ic=ba.location;Hb=S[Ic];if(1===Vc){Hb.buffer||w.enableVertexAttribArray(Ic);Ib=fb||1;if(Hb.type!==cb||Hb.size!==Ib||Hb.buffer!==oc||Hb.normalized!==mc||Hb.offset!==pc||Hb.stride!==Rb)w.bindBuffer(34962,oc.buffer),
w.vertexAttribPointer(Ic,Ib,cb,mc,Rb,pc),Hb.type=cb,Hb.size=Ib,Hb.buffer=oc,Hb.normalized=mc,Hb.offset=pc,Hb.stride=Rb;Hb.divisor!==qc&&(r.vertexAttribDivisorANGLE(Ic,qc),Hb.divisor=qc)}else if(Hb.buffer&&(w.disableVertexAttribArray(Ic),Hb.buffer=null),Hb.x!==ab||Hb.y!==ob||Hb.z!==Va||Hb.w!==Mb)w.vertexAttrib4f(Ic,ab,ob,Va,Mb),Hb.x=ab,Hb.y=ob,Hb.z=Va,Hb.w=Mb;ka.buffer=this.sizeBuffer;rc=!1;Nb=null;kb=0;Fb=!1;xb=Cb=0;ib=1;Zb=0;Ob=5126;pb=Pb=Ta=rb=0;I(ka)?(rc=!0,Nb=M.createStream(34962,ka),Ob=Nb.dtype):
(Nb=M.getBuffer(ka))?Ob=Nb.dtype:"constant"in ka?(ib=2,"number"===typeof ka.constant?(Ta=ka.constant,Pb=pb=rb=0):(Ta=0<ka.constant.length?ka.constant[0]:0,Pb=1<ka.constant.length?ka.constant[1]:0,pb=2<ka.constant.length?ka.constant[2]:0,rb=3<ka.constant.length?ka.constant[3]:0)):(Nb=I(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),Ob="type"in ka?Ea[ka.type]:Nb.dtype,Fb=!!ka.normalized,xb=ka.size|0,Cb=ka.offset|0,Zb=ka.stride|0,kb=ka.divisor|0);bc=D.location;jb=S[bc];if(1===ib){jb.buffer||
w.enableVertexAttribArray(bc);qb=xb||1;if(jb.type!==Ob||jb.size!==qb||jb.buffer!==Nb||jb.normalized!==Fb||jb.offset!==Cb||jb.stride!==Zb)w.bindBuffer(34962,Nb.buffer),w.vertexAttribPointer(bc,qb,Ob,Fb,Zb,Cb),jb.type=Ob,jb.size=qb,jb.buffer=Nb,jb.normalized=Fb,jb.offset=Cb,jb.stride=Zb;jb.divisor!==kb&&(r.vertexAttribDivisorANGLE(bc,kb),jb.divisor=kb)}else if(jb.buffer&&(w.disableVertexAttribArray(bc),jb.buffer=null),jb.x!==Ta||jb.y!==Pb||jb.z!==pb||jb.w!==rb)w.vertexAttrib4f(bc,Ta,Pb,pb,rb),jb.x=
Ta,jb.y=Pb,jb.z=pb,jb.w=rb;Ja=this.charBuffer;sb=!1;La=null;eb=0;gb=!1;lb=Na=0;Wa=1;ub=0;tb=5126;Jb=Sa=Cc=Pa=0;I(Ja)?(sb=!0,La=M.createStream(34962,Ja),tb=La.dtype):(La=M.getBuffer(Ja))?tb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Cc=Ja.constant,Sa=Jb=Pa=0):(Cc=0<Ja.constant.length?Ja.constant[0]:0,Sa=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=I(Ja.buffer)?M.createStream(34962,Ja.buffer):M.getBuffer(Ja.buffer),
tb="type"in Ja?Ea[Ja.type]:La.dtype,gb=!!Ja.normalized,lb=Ja.size|0,Na=Ja.offset|0,ub=Ja.stride|0,eb=Ja.divisor|0);Db=ua.location;Ma=S[Db];if(1===Wa){Ma.buffer||w.enableVertexAttribArray(Db);Ld=lb||1;if(Ma.type!==tb||Ma.size!==Ld||Ma.buffer!==La||Ma.normalized!==gb||Ma.offset!==Na||Ma.stride!==ub)w.bindBuffer(34962,La.buffer),w.vertexAttribPointer(Db,Ld,tb,gb,ub,Na),Ma.type=tb,Ma.size=Ld,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=ub;Ma.divisor!==eb&&(r.vertexAttribDivisorANGLE(Db,eb),Ma.divisor=
eb)}else if(Ma.buffer&&(w.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Sa||Ma.z!==Jb||Ma.w!==Pa)w.vertexAttrib4f(Db,Cc,Sa,Jb,Pa),Ma.x=Cc,Ma.y=Sa,Ma.z=Jb,Ma.w=Pa;Za=this.position;Kb=!1;Lb=null;mb=0;Oa=!1;Ra=$b=0;vb=1;wb=0;Ua=5126;vc=Ac=gc=nb=0;I(Za)?(Kb=!0,Lb=M.createStream(34962,Za),Ua=Lb.dtype):(Lb=M.getBuffer(Za))?Ua=Lb.dtype:"constant"in Za?(vb=2,"number"===typeof Za.constant?(gc=Za.constant,Ac=vc=nb=0):(gc=0<Za.constant.length?Za.constant[0]:0,Ac=1<Za.constant.length?Za.constant[1]:
0,vc=2<Za.constant.length?Za.constant[2]:0,nb=3<Za.constant.length?Za.constant[3]:0)):(Lb=I(Za.buffer)?M.createStream(34962,Za.buffer):M.getBuffer(Za.buffer),Ua="type"in Za?Ea[Za.type]:Lb.dtype,Oa=!!Za.normalized,Ra=Za.size|0,$b=Za.offset|0,wb=Za.stride|0,mb=Za.divisor|0);bb=ia.location;jc=S[bb];if(1===vb){jc.buffer||w.enableVertexAttribArray(bb);Sc=Ra||2;if(jc.type!==Ua||jc.size!==Sc||jc.buffer!==Lb||jc.normalized!==Oa||jc.offset!==$b||jc.stride!==wb)w.bindBuffer(34962,Lb.buffer),w.vertexAttribPointer(bb,
Sc,Ua,Oa,wb,$b),jc.type=Ua,jc.size=Sc,jc.buffer=Lb,jc.normalized=Oa,jc.offset=$b,jc.stride=wb;jc.divisor!==mb&&(r.vertexAttribDivisorANGLE(bb,mb),jc.divisor=mb)}else if(jc.buffer&&(w.disableVertexAttribArray(bb),jc.buffer=null),jc.x!==gc||jc.y!==Ac||jc.z!==vc||jc.w!==nb)w.vertexAttrib4f(bb,gc,Ac,vc,nb),jc.x=gc,jc.y=Ac,jc.z=vc,jc.w=nb;Xa=this.viewportArray;w.uniform4f(W.location,Xa[0],Xa[1],Xa[2],Xa[3]);Mc=this.scale;w.uniform2f(ha.location,Mc[0],Mc[1]);zb=this.translate;w.uniform2f(Ba.location,zb[0],
zb[1]);($a=O.elements)?w.bindBuffer(34963,$a.buffer.buffer):sa.currentVAO&&($a=P.getElements(sa.currentVAO.elements))&&w.bindBuffer(34963,$a.buffer.buffer);Vb=O.instances;for(A=0;A<b;++A){t=a[A];var tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id,ud;tc=q.call(this,N,t,A);A&&Wb===tc||(Wb=tc,w.uniform1f(E.location,tc));Qb=L.call(this,N,t,A);A&&Kc===Qb||(Kc=Qb,w.uniform1f(R.location,Qb));Sb=t.align;A&&qd===Sb||(qd=Sb,w.uniform1f(U.location,
Sb));Ec=t.baseline;A&&Hd===Ec||(Hd=Ec,w.uniform1f(u.location,Ec));Nc=t.color;Xc=Nc[0];nc=Nc[1];hc=Nc[2];sc=Nc[3];A&&td===Xc&&wc===nc&&db===hc&&Ub===sc||(td=Xc,wc=nc,db=hc,Ub=sc,w.uniform4f(d.location,Xc,nc,hc,sc));Xb=G.call(this,N,t,A);ec=Xb[0];yc=Xb[1];A&&ic===ec&&Bc===yc||(ic=ec,Bc=yc,w.uniform2f(B.location,ec,yc));cd=e.call(this,N,t,A);Qc=cd[0];Tc=cd[1];A&&Rc===Qc&&Yc===Tc||(Rc=Qc,Yc=Tc,w.uniform2f(Z.location,Qc,Tc));md=t.positionOffset;dd=md[0];kc=md[1];A&&Zc===dd&&cc===kc||(Zc=dd,cc=kc,w.uniform2f(K.location,
dd,kc));$c=t.opacity;A&&Wc===$c||(Wc=$c,w.uniform1f(c.location,$c));(ed=C.call(this,N,t,A))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);zc=ed._texture;w.uniform1i(k.location,zc.bind());id=t.offset;if(ud=t.count)0<Vb?$a?r.drawElementsInstancedANGLE(0,ud,$a.type,id<<($a.type-5121>>1),Vb):r.drawArraysInstancedANGLE(0,id,ud,Vb):0>Vb&&($a?w.drawElements(0,ud,$a.type,id<<($a.type-5121>>1)):w.drawArrays(0,id,ud)),zc.unbind()}Hc&&M.destroyStream(oc);rc&&M.destroyStream(Nb);sb&&M.destroyStream(La);Kb&&
M.destroyStream(Lb);m.dirty=!0;sa.setVAO(null);N.viewportWidth=pa;N.viewportHeight=V;h&&(z.cpuTime+=performance.now()-x)},draw:function(a){var e,q,p,C,pa,V,h,r,x,A,L,t,da,Q,F,T,ja,G,oa,na,Ca,ma,ga,Oe,Se,Ed,Be,ie,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb;e=ra.next;e!==ra.cur&&(e?w.bindFramebuffer(36160,e.framebuffer):w.bindFramebuffer(36160,null),ra.cur=
e);if(m.dirty){var Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec;Wa=aa.dither;Wa!==m.dither&&(Wa?w.enable(3024):w.disable(3024),m.dither=Wa);ub=ea[0];tb=ea[1];if(ub!==Da[0]||tb!==Da[1])w.blendEquationSeparate(ub,tb),Da[0]=ub,Da[1]=tb;Pa=aa.depth_func;Pa!==m.depth_func&&(w.depthFunc(Pa),m.depth_func=Pa);Cc=la[0];Sa=la[1];if(Cc!==dc[0]||Sa!==dc[1])w.depthRange(Cc,Sa),dc[0]=Cc,dc[1]=Sa;Jb=aa.depth_mask;Jb!==m.depth_mask&&(w.depthMask(Jb),
m.depth_mask=Jb);Db=Aa[0];Ma=Aa[1];Ld=Aa[2];Za=Aa[3];if(Db!==Qa[0]||Ma!==Qa[1]||Ld!==Qa[2]||Za!==Qa[3])w.colorMask(Db,Ma,Ld,Za),Qa[0]=Db,Qa[1]=Ma,Qa[2]=Ld,Qa[3]=Za;Kb=aa.cull_enable;Kb!==m.cull_enable&&(Kb?w.enable(2884):w.disable(2884),m.cull_enable=Kb);Lb=aa.cull_face;Lb!==m.cull_face&&(w.cullFace(Lb),m.cull_face=Lb);mb=aa.frontFace;mb!==m.frontFace&&(w.frontFace(mb),m.frontFace=mb);Oa=aa.lineWidth;Oa!==m.lineWidth&&(w.lineWidth(Oa),m.lineWidth=Oa);$b=aa.polygonOffset_enable;$b!==m.polygonOffset_enable&&
($b?w.enable(32823):w.disable(32823),m.polygonOffset_enable=$b);Ra=Ya[0];vb=Ya[1];if(Ra!==y[0]||vb!==y[1])w.polygonOffset(Ra,vb),y[0]=Ra,y[1]=vb;wb=aa.sample_alpha;wb!==m.sample_alpha&&(wb?w.enable(32926):w.disable(32926),m.sample_alpha=wb);Ua=aa.sample_enable;Ua!==m.sample_enable&&(Ua?w.enable(32928):w.disable(32928),m.sample_enable=Ua);nb=n[0];gc=n[1];if(nb!==J[0]||gc!==J[1])w.sampleCoverage(nb,gc),J[0]=nb,J[1]=gc;Ac=aa.stencil_mask;Ac!==m.stencil_mask&&(w.stencilMask(Ac),m.stencil_mask=Ac);vc=
Yb[0];bb=Yb[1];jc=Yb[2];if(vc!==Gb[0]||bb!==Gb[1]||jc!==Gb[2])w.stencilFunc(vc,bb,jc),Gb[0]=vc,Gb[1]=bb,Gb[2]=jc;Sc=ta[0];Xa=ta[1];Mc=ta[2];zb=ta[3];if(Sc!==Ga[0]||Xa!==Ga[1]||Mc!==Ga[2]||zb!==Ga[3])w.stencilOpSeparate(Sc,Xa,Mc,zb),Ga[0]=Sc,Ga[1]=Xa,Ga[2]=Mc,Ga[3]=zb;$a=fa[0];Vb=fa[1];tc=fa[2];Wb=fa[3];if($a!==H[0]||Vb!==H[1]||tc!==H[2]||Wb!==H[3])w.stencilOpSeparate($a,Vb,tc,Wb),H[0]=$a,H[1]=Vb,H[2]=tc,H[3]=Wb;Qb=aa.scissor_enable;Qb!==m.scissor_enable&&(Qb?w.enable(3089):w.disable(3089),m.scissor_enable=
Qb);Kc=va[0];Sb=va[1];qd=va[2];Ec=va[3];if(Kc!==Fa[0]||Sb!==Fa[1]||qd!==Fa[2]||Ec!==Fa[3])w.scissor(Kc,Sb,qd,Ec),Fa[0]=Kc,Fa[1]=Sb,Fa[2]=qd,Fa[3]=Ec}q=this.viewport;p=q.x|0;C=q.y|0;pa="width"in q?q.width|0:N.framebufferWidth-p;V="height"in q?q.height|0:N.framebufferHeight-C;h=N.viewportWidth;N.viewportWidth=pa;r=N.viewportHeight;N.viewportHeight=V;w.viewport(p,C,pa,V);za[0]=p;za[1]=C;za[2]=pa;za[3]=V;w.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;w.enable(3042);m.blend_enable=!0;w.blendFuncSeparate(770,
771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;w.disable(2929);m.depth_enable=!1;w.disable(2960);m.stencil_enable=!1;if(x=m.profile)A=performance.now(),z.count++;w.useProgram(v.program);L=xa.angle_instanced_arrays;sa.setVAO(null);X.buffer=this.sizeBuffer;t=!1;da=null;Q=0;F=!1;ja=T=0;G=1;oa=0;na=5126;Oe=ga=ma=Ca=0;I(X)?(t=!0,da=M.createStream(34962,X),na=da.dtype):(da=M.getBuffer(X))?na=da.dtype:"constant"in X?(G=2,"number"===typeof X.constant?(ma=X.constant,ga=Oe=Ca=0):(ma=0<X.constant.length?X.constant[0]:
0,ga=1<X.constant.length?X.constant[1]:0,Oe=2<X.constant.length?X.constant[2]:0,Ca=3<X.constant.length?X.constant[3]:0)):(da=I(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),na="type"in X?Ea[X.type]:da.dtype,F=!!X.normalized,ja=X.size|0,T=X.offset|0,oa=X.stride|0,Q=X.divisor|0);Se=ba.location;Ed=S[Se];if(1===G){Ed.buffer||w.enableVertexAttribArray(Se);Be=ja||1;if(Ed.type!==na||Ed.size!==Be||Ed.buffer!==da||Ed.normalized!==F||Ed.offset!==T||Ed.stride!==oa)w.bindBuffer(34962,da.buffer),
w.vertexAttribPointer(Se,Be,na,F,oa,T),Ed.type=na,Ed.size=Be,Ed.buffer=da,Ed.normalized=F,Ed.offset=T,Ed.stride=oa;Ed.divisor!==Q&&(L.vertexAttribDivisorANGLE(Se,Q),Ed.divisor=Q)}else if(Ed.buffer&&(w.disableVertexAttribArray(Se),Ed.buffer=null),Ed.x!==ma||Ed.y!==ga||Ed.z!==Oe||Ed.w!==Ca)w.vertexAttrib4f(Se,ma,ga,Oe,Ca),Ed.x=ma,Ed.y=ga,Ed.z=Oe,Ed.w=Ca;ka.buffer=this.sizeBuffer;ie=!1;Jd=null;Xd=0;Ad=!1;ad=nd=0;rd=1;Lc=0;pd=5126;ld=Pc=fd=Fc=0;I(ka)?(ie=!0,Jd=M.createStream(34962,ka),pd=Jd.dtype):(Jd=
M.getBuffer(ka))?pd=Jd.dtype:"constant"in ka?(rd=2,"number"===typeof ka.constant?(fd=ka.constant,Pc=ld=Fc=0):(fd=0<ka.constant.length?ka.constant[0]:0,Pc=1<ka.constant.length?ka.constant[1]:0,ld=2<ka.constant.length?ka.constant[2]:0,Fc=3<ka.constant.length?ka.constant[3]:0)):(Jd=I(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),pd="type"in ka?Ea[ka.type]:Jd.dtype,Ad=!!ka.normalized,ad=ka.size|0,nd=ka.offset|0,Lc=ka.stride|0,Xd=ka.divisor|0);Ab=D.location;Eb=S[Ab];if(1===rd){Eb.buffer||
w.enableVertexAttribArray(Ab);uc=ad||1;if(Eb.type!==pd||Eb.size!==uc||Eb.buffer!==Jd||Eb.normalized!==Ad||Eb.offset!==nd||Eb.stride!==Lc)w.bindBuffer(34962,Jd.buffer),w.vertexAttribPointer(Ab,uc,pd,Ad,Lc,nd),Eb.type=pd,Eb.size=uc,Eb.buffer=Jd,Eb.normalized=Ad,Eb.offset=nd,Eb.stride=Lc;Eb.divisor!==Xd&&(L.vertexAttribDivisorANGLE(Ab,Xd),Eb.divisor=Xd)}else if(Eb.buffer&&(w.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==fd||Eb.y!==Pc||Eb.z!==ld||Eb.w!==Fc)w.vertexAttrib4f(Ab,fd,Pc,ld,Fc),Eb.x=
fd,Eb.y=Pc,Eb.z=ld,Eb.w=Fc;yb=this.charBuffer;xc=!1;Bb=null;Jc=0;lc=!1;gd=Gc=0;bd=1;Dc=0;fc=5126;mc=qc=oc=Hc=0;I(yb)?(xc=!0,Bb=M.createStream(34962,yb),fc=Bb.dtype):(Bb=M.getBuffer(yb))?fc=Bb.dtype:"constant"in yb?(bd=2,"number"===typeof yb.constant?(oc=yb.constant,qc=mc=Hc=0):(oc=0<yb.constant.length?yb.constant[0]:0,qc=1<yb.constant.length?yb.constant[1]:0,mc=2<yb.constant.length?yb.constant[2]:0,Hc=3<yb.constant.length?yb.constant[3]:0)):(Bb=I(yb.buffer)?M.createStream(34962,yb.buffer):M.getBuffer(yb.buffer),
fc="type"in yb?Ea[yb.type]:Bb.dtype,lc=!!yb.normalized,gd=yb.size|0,Gc=yb.offset|0,Dc=yb.stride|0,Jc=yb.divisor|0);pc=ua.location;fb=S[pc];if(1===bd){fb.buffer||w.enableVertexAttribArray(pc);Vc=gd||1;if(fb.type!==fc||fb.size!==Vc||fb.buffer!==Bb||fb.normalized!==lc||fb.offset!==Gc||fb.stride!==Dc)w.bindBuffer(34962,Bb.buffer),w.vertexAttribPointer(pc,Vc,fc,lc,Dc,Gc),fb.type=fc,fb.size=Vc,fb.buffer=Bb,fb.normalized=lc,fb.offset=Gc,fb.stride=Dc;fb.divisor!==Jc&&(L.vertexAttribDivisorANGLE(pc,Jc),fb.divisor=
Jc)}else if(fb.buffer&&(w.disableVertexAttribArray(pc),fb.buffer=null),fb.x!==oc||fb.y!==qc||fb.z!==mc||fb.w!==Hc)w.vertexAttrib4f(pc,oc,qc,mc,Hc),fb.x=oc,fb.y=qc,fb.z=mc,fb.w=Hc;Rb=this.position;cb=!1;Mb=null;ab=0;ob=!1;Ic=Va=0;Hb=1;Ib=0;rc=5126;Cb=Fb=kb=Nb=0;I(Rb)?(cb=!0,Mb=M.createStream(34962,Rb),rc=Mb.dtype):(Mb=M.getBuffer(Rb))?rc=Mb.dtype:"constant"in Rb?(Hb=2,"number"===typeof Rb.constant?(kb=Rb.constant,Fb=Cb=Nb=0):(kb=0<Rb.constant.length?Rb.constant[0]:0,Fb=1<Rb.constant.length?Rb.constant[1]:
0,Cb=2<Rb.constant.length?Rb.constant[2]:0,Nb=3<Rb.constant.length?Rb.constant[3]:0)):(Mb=I(Rb.buffer)?M.createStream(34962,Rb.buffer):M.getBuffer(Rb.buffer),rc="type"in Rb?Ea[Rb.type]:Mb.dtype,ob=!!Rb.normalized,Ic=Rb.size|0,Va=Rb.offset|0,Ib=Rb.stride|0,ab=Rb.divisor|0);xb=ia.location;ib=S[xb];if(1===Hb){ib.buffer||w.enableVertexAttribArray(xb);Zb=Ic||2;if(ib.type!==rc||ib.size!==Zb||ib.buffer!==Mb||ib.normalized!==ob||ib.offset!==Va||ib.stride!==Ib)w.bindBuffer(34962,Mb.buffer),w.vertexAttribPointer(xb,
Zb,rc,ob,Ib,Va),ib.type=rc,ib.size=Zb,ib.buffer=Mb,ib.normalized=ob,ib.offset=Va,ib.stride=Ib;ib.divisor!==ab&&(L.vertexAttribDivisorANGLE(xb,ab),ib.divisor=ab)}else if(ib.buffer&&(w.disableVertexAttribArray(xb),ib.buffer=null),ib.x!==kb||ib.y!==Fb||ib.z!==Cb||ib.w!==Nb)w.vertexAttrib4f(xb,kb,Fb,Cb,Nb),ib.x=kb,ib.y=Fb,ib.z=Cb,ib.w=Nb;Ob=Y.call(this,N,a,0);w.uniform1f(E.location,Ob);rb=f.call(this,N,a,0);w.uniform1f(R.location,rb);w.uniform1f(U.location,a.align);w.uniform1f(u.location,a.baseline);
Ta=this.viewportArray;w.uniform4f(W.location,Ta[0],Ta[1],Ta[2],Ta[3]);Pb=a.color;w.uniform4f(d.location,Pb[0],Pb[1],Pb[2],Pb[3]);pb=g.call(this,N,a,0);w.uniform2f(B.location,pb[0],pb[1]);bc=l.call(this,N,a,0);w.uniform2f(Z.location,bc[0],bc[1]);jb=this.scale;w.uniform2f(ha.location,jb[0],jb[1]);qb=this.translate;w.uniform2f(Ba.location,qb[0],qb[1]);Ja=a.positionOffset;w.uniform2f(K.location,Ja[0],Ja[1]);w.uniform1f(c.location,a.opacity);(sb=b.call(this,N,a,0))&&"framebuffer"===sb._reglType&&(sb=sb.color[0]);
La=sb._texture;w.uniform1i(k.location,La.bind());(eb=O.elements)?w.bindBuffer(34963,eb.buffer.buffer):sa.currentVAO&&(eb=P.getElements(sa.currentVAO.elements))&&w.bindBuffer(34963,eb.buffer.buffer);gb=a.offset;if(Na=a.count)lb=O.instances,0<lb?eb?L.drawElementsInstancedANGLE(0,Na,eb.type,gb<<(eb.type-5121>>1),lb):L.drawArraysInstancedANGLE(0,gb,Na,lb):0>lb&&(eb?w.drawElements(0,Na,eb.type,gb<<(eb.type-5121>>1)):w.drawArrays(0,gb,Na)),m.dirty=!0,sa.setVAO(null),N.viewportWidth=h,N.viewportHeight=r,
x&&(z.cpuTime+=performance.now()-A),t&&M.destroyStream(da),ie&&M.destroyStream(Jd),xc&&M.destroyStream(Bb),cb&&M.destroyStream(Mb),La.unbind()},scope:function(a,c,d){var b,e,g,k,w,n,y,l,H,v,J,f,u,la,q,Y,B,ta,C,Ga,D,E,S,K,ea,fa,P,dc,Qa,L,za,R,va,ya,Q,xa,sa,U,W,G,Z,ba,Ya,qa,ia,ha,Da,Aa,ra,Fa,Gb,ma,ua,Ba,Yb,ga,fb,Vc,Rb,cb,Mb,ab,ob,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa,Mc,zb,
$a,Vb,tc,Wb,Qb,Kc,Sb,qd,Ec,Hd,Nc,Xc,td,nc,wc,hc,db,sc,Ub,Xb,ec,ic,yc,Bc,cd,Qc,Rc,Tc,Yc,md,dd,Zc,kc,cc,$c,Wc,ed,zc,id;b=this.viewport;e=b.x|0;g=b.y|0;k="width"in b?b.width|0:N.framebufferWidth-e;w="height"in b?b.height|0:N.framebufferHeight-g;n=N.viewportWidth;N.viewportWidth=k;y=N.viewportHeight;N.viewportHeight=w;l=pa[0];pa[0]=e;H=pa[1];pa[1]=g;v=pa[2];pa[2]=k;J=pa[3];pa[3]=w;f=Ca[0];Ca[0]=0;u=Ca[1];Ca[1]=0;la=Ca[2];Ca[2]=0;q=Ca[3];Ca[3]=1;Y=aa.blend_enable;aa.blend_enable=!0;B=ja[0];ja[0]=770;ta=
ja[1];ja[1]=771;C=ja[2];ja[2]=773;Ga=ja[3];ja[3]=1;D=aa.depth_enable;aa.depth_enable=!1;E=aa.stencil_enable;aa.stencil_enable=!1;if(S=m.profile)K=performance.now(),z.count++;ea=a.offset;fa=O.offset;O.offset=ea;P=a.count;dc=O.count;O.count=P;Qa=O.primitive;O.primitive=0;L=a.align;za=na[64];na[64]=L;R=da.call(this,N,a,d);va=na[69];na[69]=R;ya=x.call(this,N,a,d);Q=na[67];na[67]=ya;xa=F.call(this,N,a,d);sa=na[66];na[66]=xa;U=a.baseline;W=na[65];na[65]=U;G=T.call(this,N,a,d);Z=na[62];na[62]=G;ba=a.color;
Ya=na[14];na[14]=ba;qa=A.call(this,N,a,d);ia=na[63];na[63]=qa;ha=a.opacity;Da=na[10];na[10]=ha;Aa=a.positionOffset;ra=na[68];na[68]=Aa;Fa=this.scale;Gb=na[6];na[6]=Fa;ma=this.translate;ua=na[8];na[8]=ma;Ba=this.viewportArray;Yb=na[3];na[3]=Ba;ga=this.charBuffer;fb=!1;Vc=null;Rb=0;cb=!1;ab=Mb=0;ob=1;Va=0;Ic=5126;Nb=rc=Ib=Hb=0;I(ga)?(fb=!0,Vc=M.createStream(34962,ga),Ic=Vc.dtype):(Vc=M.getBuffer(ga))?Ic=Vc.dtype:"constant"in ga?(ob=2,"number"===typeof ga.constant?(Ib=ga.constant,rc=Nb=Hb=0):(Ib=0<ga.constant.length?
ga.constant[0]:0,rc=1<ga.constant.length?ga.constant[1]:0,Nb=2<ga.constant.length?ga.constant[2]:0,Hb=3<ga.constant.length?ga.constant[3]:0)):(Vc=I(ga.buffer)?M.createStream(34962,ga.buffer):M.getBuffer(ga.buffer),Ic="type"in ga?Ea[ga.type]:Vc.dtype,cb=!!ga.normalized,ab=ga.size|0,Mb=ga.offset|0,Va=ga.stride|0,Rb=ga.divisor|0);kb=h.buffer;h.buffer=Vc;Fb=h.divisor;h.divisor=Rb;Cb=h.normalized;h.normalized=cb;xb=h.offset;h.offset=Mb;ib=h.size;h.size=ab;Zb=h.state;h.state=ob;Ob=h.stride;h.stride=Va;
rb=h.type;h.type=Ic;Ta=h.w;h.w=Hb;Pb=h.x;h.x=Ib;pb=h.y;h.y=rc;bc=h.z;h.z=Nb;ka.buffer=this.sizeBuffer;jb=!1;qb=null;Ja=0;sb=!1;eb=La=0;gb=1;Na=0;lb=5126;Pa=tb=ub=Wa=0;I(ka)?(jb=!0,qb=M.createStream(34962,ka),lb=qb.dtype):(qb=M.getBuffer(ka))?lb=qb.dtype:"constant"in ka?(gb=2,"number"===typeof ka.constant?(ub=ka.constant,tb=Pa=Wa=0):(ub=0<ka.constant.length?ka.constant[0]:0,tb=1<ka.constant.length?ka.constant[1]:0,Pa=2<ka.constant.length?ka.constant[2]:0,Wa=3<ka.constant.length?ka.constant[3]:0)):
(qb=I(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),lb="type"in ka?Ea[ka.type]:qb.dtype,sb=!!ka.normalized,eb=ka.size|0,La=ka.offset|0,Na=ka.stride|0,Ja=ka.divisor|0);Cc=r.buffer;r.buffer=qb;Sa=r.divisor;r.divisor=Ja;Jb=r.normalized;r.normalized=sb;Db=r.offset;r.offset=La;Ma=r.size;r.size=eb;Ld=r.state;r.state=gb;Za=r.stride;r.stride=Na;Kb=r.type;r.type=lb;Lb=r.w;r.w=Wa;mb=r.x;r.x=ub;Oa=r.y;r.y=tb;$b=r.z;r.z=Pa;Ra=this.position;vb=!1;wb=null;Ua=0;nb=!1;Ac=gc=0;vc=1;bb=0;jc=5126;
zb=Mc=Xa=Sc=0;I(Ra)?(vb=!0,wb=M.createStream(34962,Ra),jc=wb.dtype):(wb=M.getBuffer(Ra))?jc=wb.dtype:"constant"in Ra?(vc=2,"number"===typeof Ra.constant?(Xa=Ra.constant,Mc=zb=Sc=0):(Xa=0<Ra.constant.length?Ra.constant[0]:0,Mc=1<Ra.constant.length?Ra.constant[1]:0,zb=2<Ra.constant.length?Ra.constant[2]:0,Sc=3<Ra.constant.length?Ra.constant[3]:0)):(wb=I(Ra.buffer)?M.createStream(34962,Ra.buffer):M.getBuffer(Ra.buffer),jc="type"in Ra?Ea[Ra.type]:wb.dtype,nb=!!Ra.normalized,Ac=Ra.size|0,gc=Ra.offset|
0,bb=Ra.stride|0,Ua=Ra.divisor|0);$a=t.buffer;t.buffer=wb;Vb=t.divisor;t.divisor=Ua;tc=t.normalized;t.normalized=nb;Wb=t.offset;t.offset=gc;Qb=t.size;t.size=Ac;Kc=t.state;t.state=vc;Sb=t.stride;t.stride=bb;qd=t.type;t.type=jc;Ec=t.w;t.w=Sc;Hd=t.x;t.x=Xa;Nc=t.y;t.y=Mc;Xc=t.z;t.z=zb;X.buffer=this.sizeBuffer;td=!1;nc=null;wc=0;hc=!1;sc=db=0;Ub=1;Xb=0;ec=5126;cd=Bc=yc=ic=0;I(X)?(td=!0,nc=M.createStream(34962,X),ec=nc.dtype):(nc=M.getBuffer(X))?ec=nc.dtype:"constant"in X?(Ub=2,"number"===typeof X.constant?
(yc=X.constant,Bc=cd=ic=0):(yc=0<X.constant.length?X.constant[0]:0,Bc=1<X.constant.length?X.constant[1]:0,cd=2<X.constant.length?X.constant[2]:0,ic=3<X.constant.length?X.constant[3]:0)):(nc=I(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),ec="type"in X?Ea[X.type]:nc.dtype,hc=!!X.normalized,sc=X.size|0,db=X.offset|0,Xb=X.stride|0,wc=X.divisor|0);Qc=p.buffer;p.buffer=nc;Rc=p.divisor;p.divisor=wc;Tc=p.normalized;p.normalized=hc;Yc=p.offset;p.offset=db;md=p.size;p.size=sc;dd=p.state;p.state=
Ub;Zc=p.stride;p.stride=Xb;kc=p.type;p.type=ec;cc=p.w;p.w=ic;$c=p.x;p.x=yc;Wc=p.y;p.y=Bc;ed=p.z;p.z=cd;zc=V.vert;V.vert=61;id=V.frag;V.frag=60;m.dirty=!0;c(N,a,d);N.viewportWidth=n;N.viewportHeight=y;pa[0]=l;pa[1]=H;pa[2]=v;pa[3]=J;Ca[0]=f;Ca[1]=u;Ca[2]=la;Ca[3]=q;aa.blend_enable=Y;ja[0]=B;ja[1]=ta;ja[2]=C;ja[3]=Ga;aa.depth_enable=D;aa.stencil_enable=E;S&&(z.cpuTime+=performance.now()-K);O.offset=fa;O.count=dc;O.primitive=Qa;na[64]=za;na[69]=va;na[67]=Q;na[66]=sa;na[65]=W;na[62]=Z;na[14]=Ya;na[63]=
ia;na[10]=Da;na[68]=ra;na[6]=Gb;na[8]=ua;na[3]=Yb;fb&&M.destroyStream(Vc);h.buffer=kb;h.divisor=Fb;h.normalized=Cb;h.offset=xb;h.size=ib;h.state=Zb;h.stride=Ob;h.type=rb;h.w=Ta;h.x=Pb;h.y=pb;h.z=bc;jb&&M.destroyStream(qb);r.buffer=Cc;r.divisor=Sa;r.normalized=Jb;r.offset=Db;r.size=Ma;r.state=Ld;r.stride=Za;r.type=Kb;r.w=Lb;r.x=mb;r.y=Oa;r.z=$b;vb&&M.destroyStream(wb);t.buffer=$a;t.divisor=Vb;t.normalized=tc;t.offset=Wb;t.size=Qb;t.state=Kc;t.stride=Sb;t.type=qd;t.w=Ec;t.x=Hd;t.y=Nc;t.z=Xc;td&&M.destroyStream(nc);
p.buffer=Qc;p.divisor=Rc;p.normalized=Tc;p.offset=Yc;p.size=md;p.state=dd;p.stride=Zc;p.type=kc;p.w=cc;p.x=$c;p.y=Wc;p.z=ed;V.vert=zc;V.frag=id;m.dirty=!0}}},$2:function(a,z,v){var Y,f,g,l,b,t,x,F,T,A,h,r,G,p,Q,q,L,ma,e,C,U,k,Z,B,u,ua,D,E,d,R;Y=a.attributes;f=a.current;g=a.framebuffer;l=a.gl;b=a.next;t=a.vao;x=b.blend_color;F=f.blend_color;T=b.blend_equation;A=f.blend_equation;h=b.blend_func;r=f.blend_func;G=b.colorMask;p=f.colorMask;Q=b.depth_range;q=f.depth_range;L=b.polygonOffset_offset;ma=f.polygonOffset_offset;
e=b.sample_coverage;C=f.sample_coverage;U=b.scissor_box;k=f.scissor_box;Z=b.stencil_func;B=f.stencil_func;u=b.stencil_opBack;ua=f.stencil_opBack;D=b.stencil_opFront;E=f.stencil_opFront;d=b.viewport;R=f.viewport;return{poll:function(){var a,v,z,Y,t,da,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca;f.dirty=!1;v=b.blend_enable;z=b.cull_enable;Y=b.depth_enable;t=b.dither;da=b.polygonOffset_enable;ba=b.sample_alpha;S=b.sample_enable;M=b.scissor_enable;N=b.stencil_enable;m=b.cull_face;O=f.cull_face;P=b.depth_func;
xa=f.depth_func;ra=b.depth_mask;w=f.depth_mask;I=b.frontFace;aa=f.frontFace;V=b.lineWidth;na=f.lineWidth;sa=b.stencil_mask;Ca=f.stencil_mask;a=g.next;a!==g.cur&&(a?l.bindFramebuffer(36160,a.framebuffer):l.bindFramebuffer(36160,null),g.cur=a);v!==f.blend_enable&&(v?l.enable(3042):l.disable(3042),f.blend_enable=v);z!==f.cull_enable&&(z?l.enable(2884):l.disable(2884),f.cull_enable=z);Y!==f.depth_enable&&(Y?l.enable(2929):l.disable(2929),f.depth_enable=Y);t!==f.dither&&(t?l.enable(3024):l.disable(3024),
f.dither=t);da!==f.polygonOffset_enable&&(da?l.enable(32823):l.disable(32823),f.polygonOffset_enable=da);ba!==f.sample_alpha&&(ba?l.enable(32926):l.disable(32926),f.sample_alpha=ba);S!==f.sample_enable&&(S?l.enable(32928):l.disable(32928),f.sample_enable=S);M!==f.scissor_enable&&(M?l.enable(3089):l.disable(3089),f.scissor_enable=M);N!==f.stencil_enable&&(N?l.enable(2960):l.disable(2960),f.stencil_enable=N);if(x[0]!==F[0]||x[1]!==F[1]||x[2]!==F[2]||x[3]!==F[3])l.blendColor(x[0],x[1],x[2],x[3]),F[0]=
x[0],F[1]=x[1],F[2]=x[2],F[3]=x[3];if(T[0]!==A[0]||T[1]!==A[1])l.blendEquationSeparate(T[0],T[1]),A[0]=T[0],A[1]=T[1];if(h[0]!==r[0]||h[1]!==r[1]||h[2]!==r[2]||h[3]!==r[3])l.blendFuncSeparate(h[0],h[1],h[2],h[3]),r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3];if(G[0]!==p[0]||G[1]!==p[1]||G[2]!==p[2]||G[3]!==p[3])l.colorMask(G[0],G[1],G[2],G[3]),p[0]=G[0],p[1]=G[1],p[2]=G[2],p[3]=G[3];m!==O&&(l.cullFace(m),f.cull_face=m);P!==xa&&(l.depthFunc(P),f.depth_func=P);ra!==w&&(l.depthMask(ra),f.depth_mask=ra);if(Q[0]!==
q[0]||Q[1]!==q[1])l.depthRange(Q[0],Q[1]),q[0]=Q[0],q[1]=Q[1];I!==aa&&(l.frontFace(I),f.frontFace=I);V!==na&&(l.lineWidth(V),f.lineWidth=V);if(L[0]!==ma[0]||L[1]!==ma[1])l.polygonOffset(L[0],L[1]),ma[0]=L[0],ma[1]=L[1];if(e[0]!==C[0]||e[1]!==C[1])l.sampleCoverage(e[0],e[1]),C[0]=e[0],C[1]=e[1];if(U[0]!==k[0]||U[1]!==k[1]||U[2]!==k[2]||U[3]!==k[3])l.scissor(U[0],U[1],U[2],U[3]),k[0]=U[0],k[1]=U[1],k[2]=U[2],k[3]=U[3];if(Z[0]!==B[0]||Z[1]!==B[1]||Z[2]!==B[2])l.stencilFunc(Z[0],Z[1],Z[2]),B[0]=Z[0],
B[1]=Z[1],B[2]=Z[2];sa!==Ca&&(l.stencilMask(sa),f.stencil_mask=sa);if(u[0]!==ua[0]||u[1]!==ua[1]||u[2]!==ua[2]||u[3]!==ua[3])l.stencilOpSeparate(u[0],u[1],u[2],u[3]),ua[0]=u[0],ua[1]=u[1],ua[2]=u[2],ua[3]=u[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])l.stencilOpSeparate(D[0],D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3];if(d[0]!==R[0]||d[1]!==R[1]||d[2]!==R[2]||d[3]!==R[3])l.viewport(d[0],d[1],d[2],d[3]),R[0]=d[0],R[1]=d[1],R[2]=d[2],R[3]=d[3]},refresh:function(){var a,v,z,
ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w;f.dirty=!1;v=b.blend_enable;z=b.cull_enable;ha=b.depth_enable;Ba=b.dither;W=b.polygonOffset_enable;ba=b.sample_alpha;S=b.sample_enable;M=b.scissor_enable;N=b.stencil_enable;m=b.cull_face;O=b.depth_func;P=b.depth_mask;xa=b.frontFace;ra=b.lineWidth;w=b.stencil_mask;(a=g.next)?l.bindFramebuffer(36160,a.framebuffer):l.bindFramebuffer(36160,null);g.cur=a;a=Y[0];a.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(0,a.size,a.type,
a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[1];a.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[2];a.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):
(l.disableVertexAttribArray(2),l.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[3];a.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[4];a.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(4),
l.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[5];a.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[6];a.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,a.x,a.y,a.z,
a.w),a.buffer=null);a=Y[7];a.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[8];a.buffer?(l.enableVertexAttribArray(8),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[9];a.buffer?
(l.enableVertexAttribArray(9),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[10];a.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[11];a.buffer?(l.enableVertexAttribArray(11),
l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[12];a.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[13];a.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,a.buffer.buffer),
l.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(13),l.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[14];a.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=Y[15];a.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,a.buffer.buffer),l.vertexAttribPointer(15,
a.size,a.type,a.normalized,a.stride,a.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);t.currentVAO=null;t.setVAO(t.targetVAO);v?l.enable(3042):l.disable(3042);f.blend_enable=v;z?l.enable(2884):l.disable(2884);f.cull_enable=z;ha?l.enable(2929):l.disable(2929);f.depth_enable=ha;Ba?l.enable(3024):l.disable(3024);f.dither=Ba;W?l.enable(32823):l.disable(32823);f.polygonOffset_enable=W;ba?l.enable(32926):l.disable(32926);f.sample_alpha=ba;S?l.enable(32928):l.disable(32928);
f.sample_enable=S;M?l.enable(3089):l.disable(3089);f.scissor_enable=M;N?l.enable(2960):l.disable(2960);f.stencil_enable=N;l.blendColor(x[0],x[1],x[2],x[3]);F[0]=x[0];F[1]=x[1];F[2]=x[2];F[3]=x[3];l.blendEquationSeparate(T[0],T[1]);A[0]=T[0];A[1]=T[1];l.blendFuncSeparate(h[0],h[1],h[2],h[3]);r[0]=h[0];r[1]=h[1];r[2]=h[2];r[3]=h[3];l.colorMask(G[0],G[1],G[2],G[3]);p[0]=G[0];p[1]=G[1];p[2]=G[2];p[3]=G[3];l.cullFace(m);f.cull_face=m;l.depthFunc(O);f.depth_func=O;l.depthMask(P);f.depth_mask=P;l.depthRange(Q[0],
Q[1]);q[0]=Q[0];q[1]=Q[1];l.frontFace(xa);f.frontFace=xa;l.lineWidth(ra);f.lineWidth=ra;l.polygonOffset(L[0],L[1]);ma[0]=L[0];ma[1]=L[1];l.sampleCoverage(e[0],e[1]);C[0]=e[0];C[1]=e[1];l.scissor(U[0],U[1],U[2],U[3]);k[0]=U[0];k[1]=U[1];k[2]=U[2];k[3]=U[3];l.stencilFunc(Z[0],Z[1],Z[2]);B[0]=Z[0];B[1]=Z[1];B[2]=Z[2];l.stencilMask(w);f.stencil_mask=w;l.stencilOpSeparate(u[0],u[1],u[2],u[3]);ua[0]=u[0];ua[1]=u[1];ua[2]=u[2];ua[3]=u[3];l.stencilOpSeparate(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=D[1];E[2]=
D[2];E[3]=D[3];l.viewport(d[0],d[1],d[2],d[3]);R[0]=d[0];R[1]=d[1];R[2]=d[2];R[3]=d[3]}}},$7:function(a,z,v,Y,f,g,l,b){var t,x,F,T,A,h,r,G,p,Q,q,L,ma,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,W,ba,S;t=a.context;x=a.current;F=a.framebuffer;T=a.gl;A=a.next;h=a.shader;r=a.vao;G=A.blend_color;p=x.blend_color;Q=A.blend_equation;q=x.blend_equation;L=A.blend_func;ma=x.blend_func;e=A.colorMask;C=x.colorMask;U=A.depth_range;k=x.depth_range;Z=A.polygonOffset_offset;B=x.polygonOffset_offset;u=A.sample_coverage;
ua=x.sample_coverage;D=A.scissor_box;E=x.scissor_box;d=A.stencil_func;R=x.stencil_func;c=A.stencil_opBack;ia=x.stencil_opBack;K=A.stencil_opFront;ha=x.stencil_opFront;Ba=A.viewport;W=x.viewport;ba={};S={};return{draw:function(a){var b,m,l,D,S,ra,w,I,aa,V;b=a.framebuffer;m=F.getFramebuffer(b);b&&!m&&z.commandRaise(f,v);b=F.next;F.next=m;l=t.framebufferWidth;t.framebufferWidth=m?m.width:t.drawingBufferWidth;D=t.framebufferHeight;t.framebufferHeight=m?m.height:t.drawingBufferHeight;m!==F.cur&&(m?T.bindFramebuffer(36160,
m.framebuffer):T.bindFramebuffer(36160,null),F.cur=m);if(x.dirty){m=A.dither;m!==x.dither&&(m?T.enable(3024):T.disable(3024),x.dither=m);m=A.blend_enable;m!==x.blend_enable&&(m?T.enable(3042):T.disable(3042),x.blend_enable=m);m=G[0];w=G[1];S=G[2];ra=G[3];if(m!==p[0]||w!==p[1]||S!==p[2]||ra!==p[3])T.blendColor(m,w,S,ra),p[0]=m,p[1]=w,p[2]=S,p[3]=ra;m=Q[0];w=Q[1];if(m!==q[0]||w!==q[1])T.blendEquationSeparate(m,w),q[0]=m,q[1]=w;m=L[0];w=L[1];S=L[2];ra=L[3];if(m!==ma[0]||w!==ma[1]||S!==ma[2]||ra!==ma[3])T.blendFuncSeparate(m,
w,S,ra),ma[0]=m,ma[1]=w,ma[2]=S,ma[3]=ra;m=A.depth_enable;m!==x.depth_enable&&(m?T.enable(2929):T.disable(2929),x.depth_enable=m);m=A.depth_func;m!==x.depth_func&&(T.depthFunc(m),x.depth_func=m);m=U[0];w=U[1];if(m!==k[0]||w!==k[1])T.depthRange(m,w),k[0]=m,k[1]=w;m=A.depth_mask;m!==x.depth_mask&&(T.depthMask(m),x.depth_mask=m);m=e[0];w=e[1];S=e[2];ra=e[3];if(m!==C[0]||w!==C[1]||S!==C[2]||ra!==C[3])T.colorMask(m,w,S,ra),C[0]=m,C[1]=w,C[2]=S,C[3]=ra;m=A.cull_enable;m!==x.cull_enable&&(m?T.enable(2884):
T.disable(2884),x.cull_enable=m);m=A.cull_face;m!==x.cull_face&&(T.cullFace(m),x.cull_face=m);m=A.frontFace;m!==x.frontFace&&(T.frontFace(m),x.frontFace=m);m=A.lineWidth;m!==x.lineWidth&&(T.lineWidth(m),x.lineWidth=m);m=A.polygonOffset_enable;m!==x.polygonOffset_enable&&(m?T.enable(32823):T.disable(32823),x.polygonOffset_enable=m);m=Z[0];w=Z[1];if(m!==B[0]||w!==B[1])T.polygonOffset(m,w),B[0]=m,B[1]=w;m=A.sample_alpha;m!==x.sample_alpha&&(m?T.enable(32926):T.disable(32926),x.sample_alpha=m);m=A.sample_enable;
m!==x.sample_enable&&(m?T.enable(32928):T.disable(32928),x.sample_enable=m);m=u[0];w=u[1];if(m!==ua[0]||w!==ua[1])T.sampleCoverage(m,w),ua[0]=m,ua[1]=w;m=A.stencil_enable;m!==x.stencil_enable&&(m?T.enable(2960):T.disable(2960),x.stencil_enable=m);m=A.stencil_mask;m!==x.stencil_mask&&(T.stencilMask(m),x.stencil_mask=m);m=d[0];w=d[1];S=d[2];if(m!==R[0]||w!==R[1]||S!==R[2])T.stencilFunc(m,w,S),R[0]=m,R[1]=w,R[2]=S;m=K[0];w=K[1];S=K[2];ra=K[3];if(m!==ha[0]||w!==ha[1]||S!==ha[2]||ra!==ha[3])T.stencilOpSeparate(m,
w,S,ra),ha[0]=m,ha[1]=w,ha[2]=S,ha[3]=ra;m=c[0];w=c[1];S=c[2];ra=c[3];if(m!==ia[0]||w!==ia[1]||S!==ia[2]||ra!==ia[3])T.stencilOpSeparate(m,w,S,ra),ia[0]=m,ia[1]=w,ia[2]=S,ia[3]=ra;m=A.scissor_enable;m!==x.scissor_enable&&(m?T.enable(3089):T.disable(3089),x.scissor_enable=m)}S=t.framebufferWidth;ra=t.framebufferHeight;m=t.viewportWidth;t.viewportWidth=S;w=t.viewportHeight;t.viewportHeight=ra;T.viewport(0,0,S,ra);W[0]=0;W[1]=0;W[2]=S;W[3]=ra;S=t.framebufferWidth;ra=t.framebufferHeight;T.scissor(0,0,
S,ra);E[0]=0;E[1]=0;E[2]=S;E[3]=ra;if(S=x.profile)I=performance.now(),Y.count++;ra=h.program(h.vert,h.frag,v);T.useProgram(ra.program);r.setVAO(null);aa=ra.id;(V=ba[aa])||(V=ba[aa]=g(ra));V.call(this,a);x.dirty=!0;r.setVAO(null);F.next=b;t.framebufferWidth=l;t.framebufferHeight=D;t.viewportWidth=m;t.viewportHeight=w;S&&(Y.cpuTime+=performance.now()-I)},scope:function(a,c,d){var b,e,g,k,w,f,u,q,p,B,C,S,E,K,h;b=a.framebuffer;e=F.getFramebuffer(b);b&&!e&&z.commandRaise(l,v);b=F.next;F.next=e;g=t.framebufferWidth;
t.framebufferWidth=e?e.width:t.drawingBufferWidth;k=t.framebufferHeight;t.framebufferHeight=e?e.height:t.drawingBufferHeight;w=t.framebufferWidth;f=t.framebufferHeight;e=t.viewportWidth;t.viewportWidth=w;u=t.viewportHeight;t.viewportHeight=f;q=Ba[0];Ba[0]=0;p=Ba[1];Ba[1]=0;B=Ba[2];Ba[2]=w;w=Ba[3];Ba[3]=f;C=t.framebufferWidth;S=t.framebufferHeight;f=D[0];D[0]=0;E=D[1];D[1]=0;K=D[2];D[2]=C;C=D[3];D[3]=S;if(S=x.profile)h=performance.now(),Y.count++;x.dirty=!0;c(t,a,d);F.next=b;t.framebufferWidth=g;t.framebufferHeight=
k;t.viewportWidth=e;t.viewportHeight=u;Ba[0]=q;Ba[1]=p;Ba[2]=B;Ba[3]=w;D[0]=f;D[1]=E;D[2]=K;D[3]=C;S&&(Y.cpuTime+=performance.now()-h);x.dirty=!0},batch:function(a,g){var m,l,f,z,D;if(x.dirty){m=A.dither;m!==x.dither&&(m?T.enable(3024):T.disable(3024),x.dither=m);m=A.blend_enable;m!==x.blend_enable&&(m?T.enable(3042):T.disable(3042),x.blend_enable=m);m=G[0];f=G[1];z=G[2];D=G[3];if(m!==p[0]||f!==p[1]||z!==p[2]||D!==p[3])T.blendColor(m,f,z,D),p[0]=m,p[1]=f,p[2]=z,p[3]=D;m=Q[0];f=Q[1];if(m!==q[0]||f!==
q[1])T.blendEquationSeparate(m,f),q[0]=m,q[1]=f;m=L[0];f=L[1];z=L[2];D=L[3];if(m!==ma[0]||f!==ma[1]||z!==ma[2]||D!==ma[3])T.blendFuncSeparate(m,f,z,D),ma[0]=m,ma[1]=f,ma[2]=z,ma[3]=D;m=A.depth_enable;m!==x.depth_enable&&(m?T.enable(2929):T.disable(2929),x.depth_enable=m);m=A.depth_func;m!==x.depth_func&&(T.depthFunc(m),x.depth_func=m);m=U[0];f=U[1];if(m!==k[0]||f!==k[1])T.depthRange(m,f),k[0]=m,k[1]=f;m=A.depth_mask;m!==x.depth_mask&&(T.depthMask(m),x.depth_mask=m);m=e[0];f=e[1];z=e[2];D=e[3];if(m!==
C[0]||f!==C[1]||z!==C[2]||D!==C[3])T.colorMask(m,f,z,D),C[0]=m,C[1]=f,C[2]=z,C[3]=D;m=A.cull_enable;m!==x.cull_enable&&(m?T.enable(2884):T.disable(2884),x.cull_enable=m);m=A.cull_face;m!==x.cull_face&&(T.cullFace(m),x.cull_face=m);m=A.frontFace;m!==x.frontFace&&(T.frontFace(m),x.frontFace=m);m=A.lineWidth;m!==x.lineWidth&&(T.lineWidth(m),x.lineWidth=m);m=A.polygonOffset_enable;m!==x.polygonOffset_enable&&(m?T.enable(32823):T.disable(32823),x.polygonOffset_enable=m);m=Z[0];f=Z[1];if(m!==B[0]||f!==
B[1])T.polygonOffset(m,f),B[0]=m,B[1]=f;m=A.sample_alpha;m!==x.sample_alpha&&(m?T.enable(32926):T.disable(32926),x.sample_alpha=m);m=A.sample_enable;m!==x.sample_enable&&(m?T.enable(32928):T.disable(32928),x.sample_enable=m);m=u[0];f=u[1];if(m!==ua[0]||f!==ua[1])T.sampleCoverage(m,f),ua[0]=m,ua[1]=f;m=A.stencil_enable;m!==x.stencil_enable&&(m?T.enable(2960):T.disable(2960),x.stencil_enable=m);m=A.stencil_mask;m!==x.stencil_mask&&(T.stencilMask(m),x.stencil_mask=m);m=d[0];f=d[1];z=d[2];if(m!==R[0]||
f!==R[1]||z!==R[2])T.stencilFunc(m,f,z),R[0]=m,R[1]=f,R[2]=z;m=K[0];f=K[1];z=K[2];D=K[3];if(m!==ha[0]||f!==ha[1]||z!==ha[2]||D!==ha[3])T.stencilOpSeparate(m,f,z,D),ha[0]=m,ha[1]=f,ha[2]=z,ha[3]=D;m=c[0];f=c[1];z=c[2];D=c[3];if(m!==ia[0]||f!==ia[1]||z!==ia[2]||D!==ia[3])T.stencilOpSeparate(m,f,z,D),ia[0]=m,ia[1]=f,ia[2]=z,ia[3]=D;m=A.scissor_enable;m!==x.scissor_enable&&(m?T.enable(3089):T.disable(3089),x.scissor_enable=m)}if(m=x.profile)l=performance.now(),Y.count+=g;f=h.program(h.vert,h.frag,v);
T.useProgram(f.program);r.setVAO(null);z=f.id;(D=S[z])||(D=S[z]=b(f));D.call(this,a,g);x.dirty=!0;r.setVAO(null);m&&(Y.cpuTime+=performance.now()-l)}}},$5:function(a,z,v,Y,f,g){var l,b,t,x,F,T,A,h,r,G,p,Q,q,L,ma,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,W;l=a.context;b=a.current;t=a.framebuffer;x=a.gl;F=a.next;T=a.shader;A=a.vao;h=F.blend_color;r=b.blend_color;G=F.blend_equation;p=b.blend_equation;Q=F.blend_func;q=b.blend_func;L=F.colorMask;ma=b.colorMask;e=F.depth_range;C=b.depth_range;U=F.polygonOffset_offset;
k=b.polygonOffset_offset;Z=F.sample_coverage;B=b.sample_coverage;u=F.scissor_box;ua=b.scissor_box;D=F.stencil_func;E=b.stencil_func;d=F.stencil_opBack;R=b.stencil_opBack;c=F.stencil_opFront;ia=b.stencil_opFront;K=F.viewport;ha=b.viewport;Ba={};W={};return{draw:function(a){var g,l,z,m,O;g=t.next;g!==t.cur&&(g?x.bindFramebuffer(36160,g.framebuffer):x.bindFramebuffer(36160,null),t.cur=g);if(b.dirty){g=F.dither;g!==b.dither&&(g?x.enable(3024):x.disable(3024),b.dither=g);g=F.blend_enable;g!==b.blend_enable&&
(g?x.enable(3042):x.disable(3042),b.blend_enable=g);g=h[0];z=h[1];m=h[2];O=h[3];if(g!==r[0]||z!==r[1]||m!==r[2]||O!==r[3])x.blendColor(g,z,m,O),r[0]=g,r[1]=z,r[2]=m,r[3]=O;g=G[0];z=G[1];if(g!==p[0]||z!==p[1])x.blendEquationSeparate(g,z),p[0]=g,p[1]=z;g=Q[0];z=Q[1];m=Q[2];O=Q[3];if(g!==q[0]||z!==q[1]||m!==q[2]||O!==q[3])x.blendFuncSeparate(g,z,m,O),q[0]=g,q[1]=z,q[2]=m,q[3]=O;g=F.depth_enable;g!==b.depth_enable&&(g?x.enable(2929):x.disable(2929),b.depth_enable=g);g=F.depth_func;g!==b.depth_func&&(x.depthFunc(g),
b.depth_func=g);g=e[0];z=e[1];if(g!==C[0]||z!==C[1])x.depthRange(g,z),C[0]=g,C[1]=z;g=F.depth_mask;g!==b.depth_mask&&(x.depthMask(g),b.depth_mask=g);g=L[0];z=L[1];m=L[2];O=L[3];if(g!==ma[0]||z!==ma[1]||m!==ma[2]||O!==ma[3])x.colorMask(g,z,m,O),ma[0]=g,ma[1]=z,ma[2]=m,ma[3]=O;g=F.cull_enable;g!==b.cull_enable&&(g?x.enable(2884):x.disable(2884),b.cull_enable=g);g=F.cull_face;g!==b.cull_face&&(x.cullFace(g),b.cull_face=g);g=F.frontFace;g!==b.frontFace&&(x.frontFace(g),b.frontFace=g);g=F.lineWidth;g!==
b.lineWidth&&(x.lineWidth(g),b.lineWidth=g);g=F.polygonOffset_enable;g!==b.polygonOffset_enable&&(g?x.enable(32823):x.disable(32823),b.polygonOffset_enable=g);g=U[0];z=U[1];if(g!==k[0]||z!==k[1])x.polygonOffset(g,z),k[0]=g,k[1]=z;g=F.sample_alpha;g!==b.sample_alpha&&(g?x.enable(32926):x.disable(32926),b.sample_alpha=g);g=F.sample_enable;g!==b.sample_enable&&(g?x.enable(32928):x.disable(32928),b.sample_enable=g);g=Z[0];z=Z[1];if(g!==B[0]||z!==B[1])x.sampleCoverage(g,z),B[0]=g,B[1]=z;g=F.stencil_enable;
g!==b.stencil_enable&&(g?x.enable(2960):x.disable(2960),b.stencil_enable=g);g=F.stencil_mask;g!==b.stencil_mask&&(x.stencilMask(g),b.stencil_mask=g);g=D[0];z=D[1];m=D[2];if(g!==E[0]||z!==E[1]||m!==E[2])x.stencilFunc(g,z,m),E[0]=g,E[1]=z,E[2]=m;g=c[0];z=c[1];m=c[2];O=c[3];if(g!==ia[0]||z!==ia[1]||m!==ia[2]||O!==ia[3])x.stencilOpSeparate(g,z,m,O),ia[0]=g,ia[1]=z,ia[2]=m,ia[3]=O;g=d[0];z=d[1];m=d[2];O=d[3];if(g!==R[0]||z!==R[1]||m!==R[2]||O!==R[3])x.stencilOpSeparate(g,z,m,O),R[0]=g,R[1]=z,R[2]=m,R[3]=
O;g=F.scissor_enable;g!==b.scissor_enable&&(g?x.enable(3089):x.disable(3089),b.scissor_enable=g);g=u[0];z=u[1];m=u[2];O=u[3];if(g!==ua[0]||z!==ua[1]||m!==ua[2]||O!==ua[3])x.scissor(g,z,m,O),ua[0]=g,ua[1]=z,ua[2]=m,ua[3]=O;g=K[0];z=K[1];m=K[2];O=K[3];if(g!==ha[0]||z!==ha[1]||m!==ha[2]||O!==ha[3])x.viewport(g,z,m,O),ha[0]=g,ha[1]=z,ha[2]=m,ha[3]=O;b.dirty=!1}if(g=b.profile)l=performance.now(),Y.count++;z=T.program(T.vert,T.frag,v);x.useProgram(z.program);A.setVAO(null);m=z.id;(O=Ba[m])||(O=Ba[m]=f(z));
O.call(this,a);A.setVAO(null);g&&(Y.cpuTime+=performance.now()-l)},scope:function(a,c,d){var e,g;if(e=b.profile)g=performance.now(),Y.count++;c(l,a,d);e&&(Y.cpuTime+=performance.now()-g)},batch:function(a,l){var f,z,m,O,P;f=t.next;f!==t.cur&&(f?x.bindFramebuffer(36160,f.framebuffer):x.bindFramebuffer(36160,null),t.cur=f);if(b.dirty){f=F.dither;f!==b.dither&&(f?x.enable(3024):x.disable(3024),b.dither=f);f=F.blend_enable;f!==b.blend_enable&&(f?x.enable(3042):x.disable(3042),b.blend_enable=f);f=h[0];
m=h[1];O=h[2];P=h[3];if(f!==r[0]||m!==r[1]||O!==r[2]||P!==r[3])x.blendColor(f,m,O,P),r[0]=f,r[1]=m,r[2]=O,r[3]=P;f=G[0];m=G[1];if(f!==p[0]||m!==p[1])x.blendEquationSeparate(f,m),p[0]=f,p[1]=m;f=Q[0];m=Q[1];O=Q[2];P=Q[3];if(f!==q[0]||m!==q[1]||O!==q[2]||P!==q[3])x.blendFuncSeparate(f,m,O,P),q[0]=f,q[1]=m,q[2]=O,q[3]=P;f=F.depth_enable;f!==b.depth_enable&&(f?x.enable(2929):x.disable(2929),b.depth_enable=f);f=F.depth_func;f!==b.depth_func&&(x.depthFunc(f),b.depth_func=f);f=e[0];m=e[1];if(f!==C[0]||m!==
C[1])x.depthRange(f,m),C[0]=f,C[1]=m;f=F.depth_mask;f!==b.depth_mask&&(x.depthMask(f),b.depth_mask=f);f=L[0];m=L[1];O=L[2];P=L[3];if(f!==ma[0]||m!==ma[1]||O!==ma[2]||P!==ma[3])x.colorMask(f,m,O,P),ma[0]=f,ma[1]=m,ma[2]=O,ma[3]=P;f=F.cull_enable;f!==b.cull_enable&&(f?x.enable(2884):x.disable(2884),b.cull_enable=f);f=F.cull_face;f!==b.cull_face&&(x.cullFace(f),b.cull_face=f);f=F.frontFace;f!==b.frontFace&&(x.frontFace(f),b.frontFace=f);f=F.lineWidth;f!==b.lineWidth&&(x.lineWidth(f),b.lineWidth=f);f=
F.polygonOffset_enable;f!==b.polygonOffset_enable&&(f?x.enable(32823):x.disable(32823),b.polygonOffset_enable=f);f=U[0];m=U[1];if(f!==k[0]||m!==k[1])x.polygonOffset(f,m),k[0]=f,k[1]=m;f=F.sample_alpha;f!==b.sample_alpha&&(f?x.enable(32926):x.disable(32926),b.sample_alpha=f);f=F.sample_enable;f!==b.sample_enable&&(f?x.enable(32928):x.disable(32928),b.sample_enable=f);f=Z[0];m=Z[1];if(f!==B[0]||m!==B[1])x.sampleCoverage(f,m),B[0]=f,B[1]=m;f=F.stencil_enable;f!==b.stencil_enable&&(f?x.enable(2960):x.disable(2960),
b.stencil_enable=f);f=F.stencil_mask;f!==b.stencil_mask&&(x.stencilMask(f),b.stencil_mask=f);f=D[0];m=D[1];O=D[2];if(f!==E[0]||m!==E[1]||O!==E[2])x.stencilFunc(f,m,O),E[0]=f,E[1]=m,E[2]=O;f=c[0];m=c[1];O=c[2];P=c[3];if(f!==ia[0]||m!==ia[1]||O!==ia[2]||P!==ia[3])x.stencilOpSeparate(f,m,O,P),ia[0]=f,ia[1]=m,ia[2]=O,ia[3]=P;f=d[0];m=d[1];O=d[2];P=d[3];if(f!==R[0]||m!==R[1]||O!==R[2]||P!==R[3])x.stencilOpSeparate(f,m,O,P),R[0]=f,R[1]=m,R[2]=O,R[3]=P;f=F.scissor_enable;f!==b.scissor_enable&&(f?x.enable(3089):
x.disable(3089),b.scissor_enable=f);f=u[0];m=u[1];O=u[2];P=u[3];if(f!==ua[0]||m!==ua[1]||O!==ua[2]||P!==ua[3])x.scissor(f,m,O,P),ua[0]=f,ua[1]=m,ua[2]=O,ua[3]=P;f=K[0];m=K[1];O=K[2];P=K[3];if(f!==ha[0]||m!==ha[1]||O!==ha[2]||P!==ha[3])x.viewport(f,m,O,P),ha[0]=f,ha[1]=m,ha[2]=O,ha[3]=P;b.dirty=!1}if(f=b.profile)z=performance.now(),Y.count+=l;m=T.program(T.vert,T.frag,v);x.useProgram(m.program);A.setVAO(null);O=m.id;(P=W[O])||(P=W[O]=g(m));P.call(this,a,l);A.setVAO(null);f&&(Y.cpuTime+=performance.now()-
z)}}},"$26,color,freq,phase,projection,time,view":function(a,z,v,Y,f,g,l,b,t,x,F,T,A,h,r,G,p,Q,q,L,ma,e,C,U,k,Z,B,u,ua,D,E,d,R){var c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,ga,Gb,fa;c=a.attributes;ia=a.context;K=a.current;ha=a.draw;Ba=a.elements;W=a.framebuffer;ba=a.gl;S=a.isArrayLike;M=a.next;N=a.shader;m=a.uniforms;O=a.vao;P=M.blend_color;xa=K.blend_color;ra=M.blend_equation;w=K.blend_equation;I=M.blend_func;aa=K.blend_func;V=M.colorMask;na=
K.colorMask;sa=M.depth_range;Ca=K.depth_range;ya=M.polygonOffset_offset;ea=K.polygonOffset_offset;Da=M.sample_coverage;ja=K.sample_coverage;qa=M.scissor_box;Aa=K.scissor_box;Qa=M.stencil_func;la=K.stencil_func;dc=M.stencil_opBack;Ya=K.stencil_opBack;y=M.stencil_opFront;n=K.stencil_opFront;J=M.viewport;va=K.viewport;Fa=new Float32Array(16);ga=new Float32Array(16);Gb=new Float32Array(16);fa=new Float32Array(16);return{draw:function(a){var e,k,m,q;e=W.next;e!==W.cur&&(e?ba.bindFramebuffer(36160,e.framebuffer):
ba.bindFramebuffer(36160,null),W.cur=e);if(K.dirty){var p;e=M.dither;e!==K.dither&&(e?ba.enable(3024):ba.disable(3024),K.dither=e);e=M.blend_enable;e!==K.blend_enable&&(e?ba.enable(3042):ba.disable(3042),K.blend_enable=e);e=P[0];m=P[1];q=P[2];p=P[3];if(e!==xa[0]||m!==xa[1]||q!==xa[2]||p!==xa[3])ba.blendColor(e,m,q,p),xa[0]=e,xa[1]=m,xa[2]=q,xa[3]=p;e=ra[0];m=ra[1];if(e!==w[0]||m!==w[1])ba.blendEquationSeparate(e,m),w[0]=e,w[1]=m;e=I[0];m=I[1];q=I[2];p=I[3];if(e!==aa[0]||m!==aa[1]||q!==aa[2]||p!==
aa[3])ba.blendFuncSeparate(e,m,q,p),aa[0]=e,aa[1]=m,aa[2]=q,aa[3]=p;e=M.depth_enable;e!==K.depth_enable&&(e?ba.enable(2929):ba.disable(2929),K.depth_enable=e);e=M.depth_func;e!==K.depth_func&&(ba.depthFunc(e),K.depth_func=e);e=sa[0];m=sa[1];if(e!==Ca[0]||m!==Ca[1])ba.depthRange(e,m),Ca[0]=e,Ca[1]=m;e=M.depth_mask;e!==K.depth_mask&&(ba.depthMask(e),K.depth_mask=e);e=V[0];m=V[1];q=V[2];p=V[3];if(e!==na[0]||m!==na[1]||q!==na[2]||p!==na[3])ba.colorMask(e,m,q,p),na[0]=e,na[1]=m,na[2]=q,na[3]=p;e=M.cull_enable;
e!==K.cull_enable&&(e?ba.enable(2884):ba.disable(2884),K.cull_enable=e);e=M.cull_face;e!==K.cull_face&&(ba.cullFace(e),K.cull_face=e);e=M.frontFace;e!==K.frontFace&&(ba.frontFace(e),K.frontFace=e);e=M.lineWidth;e!==K.lineWidth&&(ba.lineWidth(e),K.lineWidth=e);e=M.polygonOffset_enable;e!==K.polygonOffset_enable&&(e?ba.enable(32823):ba.disable(32823),K.polygonOffset_enable=e);e=ya[0];m=ya[1];if(e!==ea[0]||m!==ea[1])ba.polygonOffset(e,m),ea[0]=e,ea[1]=m;e=M.sample_alpha;e!==K.sample_alpha&&(e?ba.enable(32926):
ba.disable(32926),K.sample_alpha=e);e=M.sample_enable;e!==K.sample_enable&&(e?ba.enable(32928):ba.disable(32928),K.sample_enable=e);e=Da[0];m=Da[1];if(e!==ja[0]||m!==ja[1])ba.sampleCoverage(e,m),ja[0]=e,ja[1]=m;e=M.stencil_enable;e!==K.stencil_enable&&(e?ba.enable(2960):ba.disable(2960),K.stencil_enable=e);e=M.stencil_mask;e!==K.stencil_mask&&(ba.stencilMask(e),K.stencil_mask=e);e=Qa[0];m=Qa[1];q=Qa[2];if(e!==la[0]||m!==la[1]||q!==la[2])ba.stencilFunc(e,m,q),la[0]=e,la[1]=m,la[2]=q;e=y[0];m=y[1];
q=y[2];p=y[3];if(e!==n[0]||m!==n[1]||q!==n[2]||p!==n[3])ba.stencilOpSeparate(e,m,q,p),n[0]=e,n[1]=m,n[2]=q,n[3]=p;e=dc[0];m=dc[1];q=dc[2];p=dc[3];if(e!==Ya[0]||m!==Ya[1]||q!==Ya[2]||p!==Ya[3])ba.stencilOpSeparate(e,m,q,p),Ya[0]=e,Ya[1]=m,Ya[2]=q,Ya[3]=p;e=M.scissor_enable;e!==K.scissor_enable&&(e?ba.enable(3089):ba.disable(3089),K.scissor_enable=e);e=qa[0];m=qa[1];q=qa[2];p=qa[3];if(e!==Aa[0]||m!==Aa[1]||q!==Aa[2]||p!==Aa[3])ba.scissor(e,m,q,p),Aa[0]=e,Aa[1]=m,Aa[2]=q,Aa[3]=p;e=J[0];m=J[1];q=J[2];
p=J[3];if(e!==va[0]||m!==va[1]||q!==va[2]||p!==va[3])ba.viewport(e,m,q,p),va[0]=e,va[1]=m,va[2]=q,va[3]=p;K.dirty=!1}if(e=K.profile)k=performance.now(),Y.count++;ba.useProgram(f.program);O.setVAO(null);m=ua.location;q=c[m];q.buffer||ba.enableVertexAttribArray(m);if(5126!==q.type||4!==q.size||q.buffer!==g||!1!==q.normalized||0!==q.offset||44!==q.stride)ba.bindBuffer(34962,g.buffer),ba.vertexAttribPointer(m,4,5126,!1,44,0),q.type=5126,q.size=4,q.buffer=g,q.normalized=!1,q.offset=0,q.stride=44;m=D.location;
q=c[m];q.buffer||ba.enableVertexAttribArray(m);if(5126!==q.type||4!==q.size||q.buffer!==l||!1!==q.normalized||16!==q.offset||44!==q.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(m,4,5126,!1,44,16),q.type=5126,q.size=4,q.buffer=l,q.normalized=!1,q.offset=16,q.stride=44;m=u.location;q=c[m];q.buffer||ba.enableVertexAttribArray(m);if(5126!==q.type||3!==q.size||q.buffer!==b||!1!==q.normalized||32!==q.offset||44!==q.stride)ba.bindBuffer(34962,b.buffer),ba.vertexAttribPointer(m,3,5126,!1,44,
32),q.type=5126,q.size=3,q.buffer=b,q.normalized=!1,q.offset=32,q.stride=44;m=t.call(this,ia,a,0);"number"!==typeof m&&z.commandRaise(x,v);ba.uniform1f(d.location,m);m=F.call(this,ia,a,0);S(m)&&16===m.length||z.commandRaise(T,v);ba.uniformMatrix4fv(R.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(Fa[0]=m[0],Fa[1]=m[1],Fa[2]=m[2],Fa[3]=m[3],Fa[4]=m[4],Fa[5]=m[5],Fa[6]=m[6],Fa[7]=m[7],Fa[8]=m[8],Fa[9]=m[9],Fa[10]=m[10],Fa[11]=m[11],Fa[12]=m[12],Fa[13]=m[13],Fa[14]=m[14],Fa[15]=m[15],Fa));
a=A.call(this,ia,a,0);S(a)&&16===a.length||z.commandRaise(h,v);ba.uniformMatrix4fv(E.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(ga[0]=a[0],ga[1]=a[1],ga[2]=a[2],ga[3]=a[3],ga[4]=a[4],ga[5]=a[5],ga[6]=a[6],ga[7]=a[7],ga[8]=a[8],ga[9]=a[9],ga[10]=a[10],ga[11]=a[11],ga[12]=a[12],ga[13]=a[13],ga[14]=a[14],ga[15]=a[15],ga));(a=ha.elements)?ba.bindBuffer(34963,a.buffer.buffer):O.currentVAO&&(a=Ba.getElements(O.currentVAO.elements))&&ba.bindBuffer(34963,a.buffer.buffer);m=ha.offset;a?ba.drawElements(0,
1E4,a.type,m<<(a.type-5121>>1)):ba.drawArrays(0,m,1E4);O.setVAO(null);e&&(Y.cpuTime+=performance.now()-k)},scope:function(a,c,d){var e,k,w,n,f,y,v,J,u,z,la,B,C,I,D,V,E,ea,fa,t,dc,h,x,Qa,A,M,O,aa,S,P,R,va,ya,F,T,sa,da,U,ja,W,Z,ba,xa,Ya,qa;if(e=K.profile)k=performance.now(),Y.count++;w=ha.count;ha.count=1E4;n=ha.primitive;ha.primitive=0;f=r.call(this,ia,a,d);y=m[5];m[5]=f;v=G.call(this,ia,a,d);f=m[3];m[3]=v;J=p.call(this,ia,a,d);v=m[4];m[4]=J;J=Q.buffer;Q.buffer=b;u=Q.divisor;Q.divisor=0;z=Q.normalized;
Q.normalized=!1;la=Q.offset;Q.offset=32;B=Q.size;Q.size=0;C=Q.state;Q.state=1;I=Q.stride;Q.stride=44;D=Q.type;Q.type=5126;V=Q.w;Q.w=0;E=Q.x;Q.x=0;ea=Q.y;Q.y=0;fa=Q.z;Q.z=0;t=q.buffer;q.buffer=g;dc=q.divisor;q.divisor=0;h=q.normalized;q.normalized=!1;x=q.offset;q.offset=0;Qa=q.size;q.size=0;A=q.state;q.state=1;M=q.stride;q.stride=44;O=q.type;q.type=5126;aa=q.w;q.w=0;S=q.x;q.x=0;P=q.y;q.y=0;R=q.z;q.z=0;va=L.buffer;L.buffer=l;ya=L.divisor;L.divisor=0;F=L.normalized;L.normalized=!1;T=L.offset;L.offset=
16;sa=L.size;L.size=0;da=L.state;L.state=1;U=L.stride;L.stride=44;ja=L.type;L.type=5126;W=L.w;L.w=0;Z=L.x;L.x=0;ba=L.y;L.y=0;xa=L.z;L.z=0;Ya=N.vert;N.vert=2;qa=N.frag;N.frag=1;c(ia,a,d);e&&(Y.cpuTime+=performance.now()-k);ha.count=w;ha.primitive=n;m[5]=y;m[3]=f;m[4]=v;Q.buffer=J;Q.divisor=u;Q.normalized=z;Q.offset=la;Q.size=B;Q.state=C;Q.stride=I;Q.type=D;Q.w=V;Q.x=E;Q.y=ea;Q.z=fa;q.buffer=t;q.divisor=dc;q.normalized=h;q.offset=x;q.size=Qa;q.state=A;q.stride=M;q.type=O;q.w=aa;q.x=S;q.y=P;q.z=R;L.buffer=
va;L.divisor=ya;L.normalized=F;L.offset=T;L.size=sa;L.state=da;L.stride=U;L.type=ja;L.w=W;L.x=Z;L.y=ba;L.z=xa;N.vert=Ya;N.frag=qa},batch:function(a,m){var f,q,p;f=W.next;f!==W.cur&&(f?ba.bindFramebuffer(36160,f.framebuffer):ba.bindFramebuffer(36160,null),W.cur=f);if(K.dirty){var t,h,r;f=M.dither;f!==K.dither&&(f?ba.enable(3024):ba.disable(3024),K.dither=f);f=M.blend_enable;f!==K.blend_enable&&(f?ba.enable(3042):ba.disable(3042),K.blend_enable=f);f=P[0];t=P[1];h=P[2];r=P[3];if(f!==xa[0]||t!==xa[1]||
h!==xa[2]||r!==xa[3])ba.blendColor(f,t,h,r),xa[0]=f,xa[1]=t,xa[2]=h,xa[3]=r;f=ra[0];t=ra[1];if(f!==w[0]||t!==w[1])ba.blendEquationSeparate(f,t),w[0]=f,w[1]=t;f=I[0];t=I[1];h=I[2];r=I[3];if(f!==aa[0]||t!==aa[1]||h!==aa[2]||r!==aa[3])ba.blendFuncSeparate(f,t,h,r),aa[0]=f,aa[1]=t,aa[2]=h,aa[3]=r;f=M.depth_enable;f!==K.depth_enable&&(f?ba.enable(2929):ba.disable(2929),K.depth_enable=f);f=M.depth_func;f!==K.depth_func&&(ba.depthFunc(f),K.depth_func=f);f=sa[0];t=sa[1];if(f!==Ca[0]||t!==Ca[1])ba.depthRange(f,
t),Ca[0]=f,Ca[1]=t;f=M.depth_mask;f!==K.depth_mask&&(ba.depthMask(f),K.depth_mask=f);f=V[0];t=V[1];h=V[2];r=V[3];if(f!==na[0]||t!==na[1]||h!==na[2]||r!==na[3])ba.colorMask(f,t,h,r),na[0]=f,na[1]=t,na[2]=h,na[3]=r;f=M.cull_enable;f!==K.cull_enable&&(f?ba.enable(2884):ba.disable(2884),K.cull_enable=f);f=M.cull_face;f!==K.cull_face&&(ba.cullFace(f),K.cull_face=f);f=M.frontFace;f!==K.frontFace&&(ba.frontFace(f),K.frontFace=f);f=M.lineWidth;f!==K.lineWidth&&(ba.lineWidth(f),K.lineWidth=f);f=M.polygonOffset_enable;
f!==K.polygonOffset_enable&&(f?ba.enable(32823):ba.disable(32823),K.polygonOffset_enable=f);f=ya[0];t=ya[1];if(f!==ea[0]||t!==ea[1])ba.polygonOffset(f,t),ea[0]=f,ea[1]=t;f=M.sample_alpha;f!==K.sample_alpha&&(f?ba.enable(32926):ba.disable(32926),K.sample_alpha=f);f=M.sample_enable;f!==K.sample_enable&&(f?ba.enable(32928):ba.disable(32928),K.sample_enable=f);f=Da[0];t=Da[1];if(f!==ja[0]||t!==ja[1])ba.sampleCoverage(f,t),ja[0]=f,ja[1]=t;f=M.stencil_enable;f!==K.stencil_enable&&(f?ba.enable(2960):ba.disable(2960),
K.stencil_enable=f);f=M.stencil_mask;f!==K.stencil_mask&&(ba.stencilMask(f),K.stencil_mask=f);f=Qa[0];t=Qa[1];h=Qa[2];if(f!==la[0]||t!==la[1]||h!==la[2])ba.stencilFunc(f,t,h),la[0]=f,la[1]=t,la[2]=h;f=y[0];t=y[1];h=y[2];r=y[3];if(f!==n[0]||t!==n[1]||h!==n[2]||r!==n[3])ba.stencilOpSeparate(f,t,h,r),n[0]=f,n[1]=t,n[2]=h,n[3]=r;f=dc[0];t=dc[1];h=dc[2];r=dc[3];if(f!==Ya[0]||t!==Ya[1]||h!==Ya[2]||r!==Ya[3])ba.stencilOpSeparate(f,t,h,r),Ya[0]=f,Ya[1]=t,Ya[2]=h,Ya[3]=r;f=M.scissor_enable;f!==K.scissor_enable&&
(f?ba.enable(3089):ba.disable(3089),K.scissor_enable=f);f=qa[0];t=qa[1];h=qa[2];r=qa[3];if(f!==Aa[0]||t!==Aa[1]||h!==Aa[2]||r!==Aa[3])ba.scissor(f,t,h,r),Aa[0]=f,Aa[1]=t,Aa[2]=h,Aa[3]=r;f=J[0];t=J[1];h=J[2];r=J[3];if(f!==va[0]||t!==va[1]||h!==va[2]||r!==va[3])ba.viewport(f,t,h,r),va[0]=f,va[1]=t,va[2]=h,va[3]=r;K.dirty=!1}if(f=K.profile)q=performance.now(),Y.count+=m;ba.useProgram(ma.program);O.setVAO(null);t=ua.location;h=c[t];h.buffer||ba.enableVertexAttribArray(t);if(5126!==h.type||4!==h.size||
h.buffer!==g||!1!==h.normalized||0!==h.offset||44!==h.stride)ba.bindBuffer(34962,g.buffer),ba.vertexAttribPointer(t,4,5126,!1,44,0),h.type=5126,h.size=4,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=44;t=D.location;h=c[t];h.buffer||ba.enableVertexAttribArray(t);if(5126!==h.type||4!==h.size||h.buffer!==l||!1!==h.normalized||16!==h.offset||44!==h.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(t,4,5126,!1,44,16),h.type=5126,h.size=4,h.buffer=l,h.normalized=!1,h.offset=16,h.stride=44;t=
u.location;h=c[t];h.buffer||ba.enableVertexAttribArray(t);if(5126!==h.type||3!==h.size||h.buffer!==b||!1!==h.normalized||32!==h.offset||44!==h.stride)ba.bindBuffer(34962,b.buffer),ba.vertexAttribPointer(t,3,5126,!1,44,32),h.type=5126,h.size=3,h.buffer=b,h.normalized=!1,h.offset=32,h.stride=44;t=e.call(this,ia,void 0,p);"number"!==typeof t&&z.commandRaise(C,v);ba.uniform1f(d.location,t);t=U.call(this,ia,void 0,p);S(t)&&16===t.length||z.commandRaise(k,v);ba.uniformMatrix4fv(R.location,!1,Array.isArray(t)||
t instanceof Float32Array?t:(Gb[0]=t[0],Gb[1]=t[1],Gb[2]=t[2],Gb[3]=t[3],Gb[4]=t[4],Gb[5]=t[5],Gb[6]=t[6],Gb[7]=t[7],Gb[8]=t[8],Gb[9]=t[9],Gb[10]=t[10],Gb[11]=t[11],Gb[12]=t[12],Gb[13]=t[13],Gb[14]=t[14],Gb[15]=t[15],Gb));p=Z.call(this,ia,void 0,p);S(p)&&16===p.length||z.commandRaise(B,v);ba.uniformMatrix4fv(E.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(fa[0]=p[0],fa[1]=p[1],fa[2]=p[2],fa[3]=p[3],fa[4]=p[4],fa[5]=p[5],fa[6]=p[6],fa[7]=p[7],fa[8]=p[8],fa[9]=p[9],fa[10]=p[10],fa[11]=
p[11],fa[12]=p[12],fa[13]=p[13],fa[14]=p[14],fa[15]=p[15],fa));(t=ha.elements)?ba.bindBuffer(34963,t.buffer.buffer):O.currentVAO&&(t=Ba.getElements(O.currentVAO.elements))&&ba.bindBuffer(34963,t.buffer.buffer);h=ha.offset;for(p=0;p<m;++p)t?ba.drawElements(0,1E4,t.type,h<<(t.type-5121>>1)):ba.drawArrays(0,h,1E4);O.setVAO(null);f&&(Y.cpuTime+=performance.now()-q)}}},"$34,atlas,normal,position,projection,uv,view":function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,
ga,W,ba,S){var M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,Yb,Gb,fa,H,ta,Ga,pa,za,Ea,ka,X,wa,Ha,Ka;M=a.attributes;N=a.buffer;m=a.context;O=a.current;P=a.draw;xa=a.elements;ra=a.framebuffer;w=a.gl;I=a.isArrayLike;aa=a.isBufferArgs;V=a.next;na=a.shader;sa=a.uniforms;Ca=a.vao;ya=V.blend_color;ea=O.blend_color;Da=V.blend_equation;ja=O.blend_equation;qa=V.blend_func;Aa=O.blend_func;Qa=V.colorMask;la=O.colorMask;dc=V.depth_range;Ya=O.depth_range;y=V.polygonOffset_offset;
n=O.polygonOffset_offset;J=V.sample_coverage;va=O.sample_coverage;Fa=V.scissor_box;Yb=O.scissor_box;Gb=V.stencil_func;fa=O.stencil_func;H=V.stencil_opBack;ta=O.stencil_opBack;Ga=V.stencil_opFront;pa=O.stencil_opFront;za=V.viewport;Ea=O.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X=new Float32Array(16);wa=new Float32Array(16);Ha=new Float32Array(16);Ka=new Float32Array(16);return{draw:function(a){var c,d,e,k,q,u,p,B,C,D,E,L,P,R,Q,sa,U,
Z,na,ia,oa,ma,ua,Ha,Ka,Jd,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb,ab,ob;c=m.view;d=f.call(this,m,a,0);m.view=d;e=ra.next;e!==ra.cur&&(e?w.bindFramebuffer(36160,e.framebuffer):w.bindFramebuffer(36160,null),ra.cur=e);if(O.dirty){var Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb;Va=V.dither;Va!==O.dither&&(Va?w.enable(3024):w.disable(3024),
O.dither=Va);Ic=V.blend_enable;Ic!==O.blend_enable&&(Ic?w.enable(3042):w.disable(3042),O.blend_enable=Ic);Hb=ya[0];Ib=ya[1];rc=ya[2];Nb=ya[3];if(Hb!==ea[0]||Ib!==ea[1]||rc!==ea[2]||Nb!==ea[3])w.blendColor(Hb,Ib,rc,Nb),ea[0]=Hb,ea[1]=Ib,ea[2]=rc,ea[3]=Nb;kb=Da[0];Fb=Da[1];if(kb!==ja[0]||Fb!==ja[1])w.blendEquationSeparate(kb,Fb),ja[0]=kb,ja[1]=Fb;Cb=qa[0];xb=qa[1];ib=qa[2];Zb=qa[3];if(Cb!==Aa[0]||xb!==Aa[1]||ib!==Aa[2]||Zb!==Aa[3])w.blendFuncSeparate(Cb,xb,ib,Zb),Aa[0]=Cb,Aa[1]=xb,Aa[2]=ib,Aa[3]=Zb;
Ob=V.depth_enable;Ob!==O.depth_enable&&(Ob?w.enable(2929):w.disable(2929),O.depth_enable=Ob);rb=V.depth_func;rb!==O.depth_func&&(w.depthFunc(rb),O.depth_func=rb);Ta=dc[0];Pb=dc[1];if(Ta!==Ya[0]||Pb!==Ya[1])w.depthRange(Ta,Pb),Ya[0]=Ta,Ya[1]=Pb;pb=V.depth_mask;pb!==O.depth_mask&&(w.depthMask(pb),O.depth_mask=pb);bc=Qa[0];jb=Qa[1];qb=Qa[2];Ja=Qa[3];if(bc!==la[0]||jb!==la[1]||qb!==la[2]||Ja!==la[3])w.colorMask(bc,jb,qb,Ja),la[0]=bc,la[1]=jb,la[2]=qb,la[3]=Ja;sb=V.frontFace;sb!==O.frontFace&&(w.frontFace(sb),
O.frontFace=sb);La=V.lineWidth;La!==O.lineWidth&&(w.lineWidth(La),O.lineWidth=La);eb=V.polygonOffset_enable;eb!==O.polygonOffset_enable&&(eb?w.enable(32823):w.disable(32823),O.polygonOffset_enable=eb);gb=y[0];Na=y[1];if(gb!==n[0]||Na!==n[1])w.polygonOffset(gb,Na),n[0]=gb,n[1]=Na;lb=V.sample_alpha;lb!==O.sample_alpha&&(lb?w.enable(32926):w.disable(32926),O.sample_alpha=lb);Wa=V.sample_enable;Wa!==O.sample_enable&&(Wa?w.enable(32928):w.disable(32928),O.sample_enable=Wa);ub=J[0];tb=J[1];if(ub!==va[0]||
tb!==va[1])w.sampleCoverage(ub,tb),va[0]=ub,va[1]=tb;Pa=V.stencil_enable;Pa!==O.stencil_enable&&(Pa?w.enable(2960):w.disable(2960),O.stencil_enable=Pa);Cc=V.stencil_mask;Cc!==O.stencil_mask&&(w.stencilMask(Cc),O.stencil_mask=Cc);Sa=Gb[0];Jb=Gb[1];Db=Gb[2];if(Sa!==fa[0]||Jb!==fa[1]||Db!==fa[2])w.stencilFunc(Sa,Jb,Db),fa[0]=Sa,fa[1]=Jb,fa[2]=Db;Ma=Ga[0];Ld=Ga[1];Za=Ga[2];Kb=Ga[3];if(Ma!==pa[0]||Ld!==pa[1]||Za!==pa[2]||Kb!==pa[3])w.stencilOpSeparate(Ma,Ld,Za,Kb),pa[0]=Ma,pa[1]=Ld,pa[2]=Za,pa[3]=Kb;Lb=
H[0];mb=H[1];Oa=H[2];$b=H[3];if(Lb!==ta[0]||mb!==ta[1]||Oa!==ta[2]||$b!==ta[3])w.stencilOpSeparate(Lb,mb,Oa,$b),ta[0]=Lb,ta[1]=mb,ta[2]=Oa,ta[3]=$b;Ra=V.scissor_enable;Ra!==O.scissor_enable&&(Ra?w.enable(3089):w.disable(3089),O.scissor_enable=Ra);vb=Fa[0];wb=Fa[1];Ua=Fa[2];nb=Fa[3];if(vb!==Yb[0]||wb!==Yb[1]||Ua!==Yb[2]||nb!==Yb[3])w.scissor(vb,wb,Ua,nb),Yb[0]=vb,Yb[1]=wb,Yb[2]=Ua,Yb[3]=nb;gc=za[0];Ac=za[1];vc=za[2];bb=za[3];if(gc!==Ea[0]||Ac!==Ea[1]||vc!==Ea[2]||bb!==Ea[3])w.viewport(gc,Ac,vc,bb),
Ea[0]=gc,Ea[1]=Ac,Ea[2]=vc,Ea[3]=bb}w.enable(2884);O.cull_enable=!0;w.cullFace(1029);O.cull_face=1029;if(k=O.profile)q=performance.now(),t.count++;w.useProgram(g.program);Ca.setVAO(null);(u=a.position)&&("object"===typeof u||"function"===typeof u)&&(aa(u)||N.getBuffer(u)||N.getBuffer(u.buffer)||aa(u.buffer)||"constant"in u&&("number"===typeof u.constant||I(u.constant)))||z.commandRaise(l,v);p=!1;B=null;C=!1;E=D=0;L=1;P=0;R=5126;Z=U=sa=Q=0;aa(u)?(p=!0,B=N.createStream(34962,u),R=B.dtype):(B=N.getBuffer(u))?
R=B.dtype:"constant"in u?(L=2,"number"===typeof u.constant?(sa=u.constant,U=Z=Q=0):(sa=0<u.constant.length?u.constant[0]:0,U=1<u.constant.length?u.constant[1]:0,Z=2<u.constant.length?u.constant[2]:0,Q=3<u.constant.length?u.constant[3]:0)):(B=aa(u.buffer)?N.createStream(34962,u.buffer):N.getBuffer(u.buffer),R="type"in u?ka[u.type]:B.dtype,C=!!u.normalized,E=u.size|0,D=u.offset|0,P=u.stride|0);na=ga.location;ia=M[na];if(1===L){if(ia.buffer||w.enableVertexAttribArray(na),oa=E||3,ia.type!==R||ia.size!==
oa||ia.buffer!==B||ia.normalized!==C||ia.offset!==D||ia.stride!==P)w.bindBuffer(34962,B.buffer),w.vertexAttribPointer(na,oa,R,C,P,D),ia.type=R,ia.size=oa,ia.buffer=B,ia.normalized=C,ia.offset=D,ia.stride=P}else if(ia.buffer&&(w.disableVertexAttribArray(na),ia.buffer=null),ia.x!==sa||ia.y!==U||ia.z!==Z||ia.w!==Q)w.vertexAttrib4f(na,sa,U,Z,Q),ia.x=sa,ia.y=U,ia.z=Z,ia.w=Q;(ma=a.normal)&&("object"===typeof ma||"function"===typeof ma)&&(aa(ma)||N.getBuffer(ma)||N.getBuffer(ma.buffer)||aa(ma.buffer)||"constant"in
ma&&("number"===typeof ma.constant||I(ma.constant)))||z.commandRaise(b,v);ua=!1;Ha=null;Ka=!1;Xd=Jd=0;Ad=1;nd=0;ad=5126;Fc=pd=Lc=rd=0;aa(ma)?(ua=!0,Ha=N.createStream(34962,ma),ad=Ha.dtype):(Ha=N.getBuffer(ma))?ad=Ha.dtype:"constant"in ma?(Ad=2,"number"===typeof ma.constant?(Lc=ma.constant,pd=Fc=rd=0):(Lc=0<ma.constant.length?ma.constant[0]:0,pd=1<ma.constant.length?ma.constant[1]:0,Fc=2<ma.constant.length?ma.constant[2]:0,rd=3<ma.constant.length?ma.constant[3]:0)):(Ha=aa(ma.buffer)?N.createStream(34962,
ma.buffer):N.getBuffer(ma.buffer),ad="type"in ma?ka[ma.type]:Ha.dtype,Ka=!!ma.normalized,Xd=ma.size|0,Jd=ma.offset|0,nd=ma.stride|0);fd=ha.location;Pc=M[fd];if(1===Ad){if(Pc.buffer||w.enableVertexAttribArray(fd),ld=Xd||3,Pc.type!==ad||Pc.size!==ld||Pc.buffer!==Ha||Pc.normalized!==Ka||Pc.offset!==Jd||Pc.stride!==nd)w.bindBuffer(34962,Ha.buffer),w.vertexAttribPointer(fd,ld,ad,Ka,nd,Jd),Pc.type=ad,Pc.size=ld,Pc.buffer=Ha,Pc.normalized=Ka,Pc.offset=Jd,Pc.stride=nd}else if(Pc.buffer&&(w.disableVertexAttribArray(fd),
Pc.buffer=null),Pc.x!==Lc||Pc.y!==pd||Pc.z!==Fc||Pc.w!==rd)w.vertexAttrib4f(fd,Lc,pd,Fc,rd),Pc.x=Lc,Pc.y=pd,Pc.z=Fc,Pc.w=rd;(Ab=a.uv)&&("object"===typeof Ab||"function"===typeof Ab)&&(aa(Ab)||N.getBuffer(Ab)||N.getBuffer(Ab.buffer)||aa(Ab.buffer)||"constant"in Ab&&("number"===typeof Ab.constant||I(Ab.constant)))||z.commandRaise(G,v);Eb=!1;uc=null;yb=!1;Bb=xc=0;Jc=1;lc=0;Gc=5126;fc=Dc=bd=gd=0;aa(Ab)?(Eb=!0,uc=N.createStream(34962,Ab),Gc=uc.dtype):(uc=N.getBuffer(Ab))?Gc=uc.dtype:"constant"in Ab?(Jc=
2,"number"===typeof Ab.constant?(bd=Ab.constant,Dc=fc=gd=0):(bd=0<Ab.constant.length?Ab.constant[0]:0,Dc=1<Ab.constant.length?Ab.constant[1]:0,fc=2<Ab.constant.length?Ab.constant[2]:0,gd=3<Ab.constant.length?Ab.constant[3]:0)):(uc=aa(Ab.buffer)?N.createStream(34962,Ab.buffer):N.getBuffer(Ab.buffer),Gc="type"in Ab?ka[Ab.type]:uc.dtype,yb=!!Ab.normalized,Bb=Ab.size|0,xc=Ab.offset|0,lc=Ab.stride|0);Hc=ba.location;oc=M[Hc];if(1===Jc){if(oc.buffer||w.enableVertexAttribArray(Hc),qc=Bb||2,oc.type!==Gc||
oc.size!==qc||oc.buffer!==uc||oc.normalized!==yb||oc.offset!==xc||oc.stride!==lc)w.bindBuffer(34962,uc.buffer),w.vertexAttribPointer(Hc,qc,Gc,yb,lc,xc),oc.type=Gc,oc.size=qc,oc.buffer=uc,oc.normalized=yb,oc.offset=xc,oc.stride=lc}else if(oc.buffer&&(w.disableVertexAttribArray(Hc),oc.buffer=null),oc.x!==bd||oc.y!==Dc||oc.z!==fc||oc.w!==gd)w.vertexAttrib4f(Hc,bd,Dc,fc,gd),oc.x=bd,oc.y=Dc,oc.z=fc,oc.w=gd;mc=x.call(this,m,a,0);I(mc)&&16===mc.length||z.commandRaise(F,v);w.uniformMatrix4fv(W.location,!1,
Array.isArray(mc)||mc instanceof Float32Array?mc:(X[0]=mc[0],X[1]=mc[1],X[2]=mc[2],X[3]=mc[3],X[4]=mc[4],X[5]=mc[5],X[6]=mc[6],X[7]=mc[7],X[8]=mc[8],X[9]=mc[9],X[10]=mc[10],X[11]=mc[11],X[12]=mc[12],X[13]=mc[13],X[14]=mc[14],X[15]=mc[15],X));pc=m.view;I(pc)&&16===pc.length||z.commandRaise(T,v);w.uniformMatrix4fv(S.location,!1,Array.isArray(pc)||pc instanceof Float32Array?pc:(wa[0]=pc[0],wa[1]=pc[1],wa[2]=pc[2],wa[3]=pc[3],wa[4]=pc[4],wa[5]=pc[5],wa[6]=pc[6],wa[7]=pc[7],wa[8]=pc[8],wa[9]=pc[9],wa[10]=
pc[10],wa[11]=pc[11],wa[12]=pc[12],wa[13]=pc[13],wa[14]=pc[14],wa[15]=pc[15],wa));(fb=a.atlas)&&"framebuffer"===fb._reglType&&(fb=fb.color[0]);"function"===typeof fb&&"texture2d"===fb._reglType||z.commandRaise(A,v);Vc=fb._texture;w.uniform1i(K.location,Vc.bind());Rb=a.elements;cb=null;(Mb=aa(Rb))?cb=xa.createStream(Rb):(cb=xa.getElements(Rb),Rb&&!cb&&z.commandRaise(h,v));cb&&w.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;ob=cb?cb.vertCount:-1;0<=ob||z.commandRaise(r,v);ob&&(cb?w.drawElements(ab,
ob,cb.type,0<<(cb.type-5121>>1)):w.drawArrays(ab,0,ob),O.dirty=!0,Ca.setVAO(null),m.view=c,k&&(t.cpuTime+=performance.now()-q),p&&N.destroyStream(B),ua&&N.destroyStream(Ha),Eb&&N.destroyStream(uc),Vc.unbind(),Mb&&xa.destroyStream(cb))},scope:function(a,c,d){var b,g,k,f,w,n,y,l,H,J,u,la,B,h,D,E,ea,r,K,fa,dc,x,Qa,A,M,ta,pa,R,S,Ga,va,X,ya,F,T,G,da,ja,W,Z,ba,Ya,za,qa,ia,Da,Aa,ha,Ea,Fa,Ca,Gb,ra,ua,ga,wa,Ba,Ha,Ka,Yb,Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,
tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb;b=m.view;g=oa.call(this,m,a,d);m.view=g;k=V.cull_enable;V.cull_enable=!0;f=V.cull_face;V.cull_face=1029;if(w=O.profile)n=performance.now(),t.count++;y=a.elements;l=null;(H=aa(y))?l=xa.createStream(y):(l=xa.getElements(y),y&&!l&&z.commandRaise(p,v));J=P.elements;P.elements=l;u=P.offset;P.offset=0;la=l?l.vertCount:-1;B=P.count;P.count=la;h=l?l.primType:4;D=P.primitive;P.primitive=h;E=a.atlas;ea=sa[5];sa[5]=E;r=Q.call(this,m,a,d);K=sa[3];sa[3]=r;fa=m.view;dc=sa[4];
sa[4]=fa;(x=a.normal)&&("object"===typeof x||"function"===typeof x)&&(aa(x)||N.getBuffer(x)||N.getBuffer(x.buffer)||aa(x.buffer)||"constant"in x&&("number"===typeof x.constant||I(x.constant)))||z.commandRaise(q,v);Qa=!1;A=null;M=0;ta=!1;R=pa=0;S=1;Ga=0;va=5126;T=F=ya=X=0;aa(x)?(Qa=!0,A=N.createStream(34962,x),va=A.dtype):(A=N.getBuffer(x))?va=A.dtype:"constant"in x?(S=2,"number"===typeof x.constant?(ya=x.constant,F=T=X=0):(ya=0<x.constant.length?x.constant[0]:0,F=1<x.constant.length?x.constant[1]:
0,T=2<x.constant.length?x.constant[2]:0,X=3<x.constant.length?x.constant[3]:0)):(A=aa(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),va="type"in x?ka[x.type]:A.dtype,ta=!!x.normalized,R=x.size|0,pa=x.offset|0,Ga=x.stride|0,M=x.divisor|0);G=L.buffer;L.buffer=A;da=L.divisor;L.divisor=M;ja=L.normalized;L.normalized=ta;W=L.offset;L.offset=pa;Z=L.size;L.size=R;ba=L.state;L.state=S;Ya=L.stride;L.stride=Ga;za=L.type;L.type=va;qa=L.w;L.w=X;ia=L.x;L.x=ya;Da=L.y;L.y=F;Aa=L.z;L.z=T;(ha=a.position)&&
("object"===typeof ha||"function"===typeof ha)&&(aa(ha)||N.getBuffer(ha)||N.getBuffer(ha.buffer)||aa(ha.buffer)||"constant"in ha&&("number"===typeof ha.constant||I(ha.constant)))||z.commandRaise(ma,v);Ea=!1;Fa=null;Ca=0;Gb=!1;ua=ra=0;ga=1;wa=0;Ba=5126;Va=Yb=Ka=Ha=0;aa(ha)?(Ea=!0,Fa=N.createStream(34962,ha),Ba=Fa.dtype):(Fa=N.getBuffer(ha))?Ba=Fa.dtype:"constant"in ha?(ga=2,"number"===typeof ha.constant?(Ka=ha.constant,Yb=Va=Ha=0):(Ka=0<ha.constant.length?ha.constant[0]:0,Yb=1<ha.constant.length?ha.constant[1]:
0,Va=2<ha.constant.length?ha.constant[2]:0,Ha=3<ha.constant.length?ha.constant[3]:0)):(Fa=aa(ha.buffer)?N.createStream(34962,ha.buffer):N.getBuffer(ha.buffer),Ba="type"in ha?ka[ha.type]:Fa.dtype,Gb=!!ha.normalized,ua=ha.size|0,ra=ha.offset|0,wa=ha.stride|0,Ca=ha.divisor|0);Ic=e.buffer;e.buffer=Fa;Hb=e.divisor;e.divisor=Ca;Ib=e.normalized;e.normalized=Gb;rc=e.offset;e.offset=ra;Nb=e.size;e.size=ua;kb=e.state;e.state=ga;Fb=e.stride;e.stride=wa;Cb=e.type;e.type=Ba;xb=e.w;e.w=Ha;ib=e.x;e.x=Ka;Zb=e.y;
e.y=Yb;Ob=e.z;e.z=Va;(rb=a.uv)&&("object"===typeof rb||"function"===typeof rb)&&(aa(rb)||N.getBuffer(rb)||N.getBuffer(rb.buffer)||aa(rb.buffer)||"constant"in rb&&("number"===typeof rb.constant||I(rb.constant)))||z.commandRaise(C,v);Ta=!1;Pb=null;pb=0;bc=!1;qb=jb=0;Ja=1;sb=0;La=5126;lb=Na=gb=eb=0;aa(rb)?(Ta=!0,Pb=N.createStream(34962,rb),La=Pb.dtype):(Pb=N.getBuffer(rb))?La=Pb.dtype:"constant"in rb?(Ja=2,"number"===typeof rb.constant?(gb=rb.constant,Na=lb=eb=0):(gb=0<rb.constant.length?rb.constant[0]:
0,Na=1<rb.constant.length?rb.constant[1]:0,lb=2<rb.constant.length?rb.constant[2]:0,eb=3<rb.constant.length?rb.constant[3]:0)):(Pb=aa(rb.buffer)?N.createStream(34962,rb.buffer):N.getBuffer(rb.buffer),La="type"in rb?ka[rb.type]:Pb.dtype,bc=!!rb.normalized,qb=rb.size|0,jb=rb.offset|0,sb=rb.stride|0,pb=rb.divisor|0);Wa=U.buffer;U.buffer=Pb;ub=U.divisor;U.divisor=pb;tb=U.normalized;U.normalized=bc;Pa=U.offset;U.offset=jb;Cc=U.size;U.size=qb;Sa=U.state;U.state=Ja;Jb=U.stride;U.stride=sb;Db=U.type;U.type=
La;Ma=U.w;U.w=eb;Ld=U.x;U.x=gb;Za=U.y;U.y=Na;Kb=U.z;U.z=lb;Lb=na.vert;na.vert=2;mb=na.frag;na.frag=1;O.dirty=!0;c(m,a,d);m.view=b;V.cull_enable=k;V.cull_face=f;w&&(t.cpuTime+=performance.now()-n);H&&xa.destroyStream(l);P.elements=J;P.offset=u;P.count=B;P.primitive=D;sa[5]=ea;sa[3]=K;sa[4]=dc;Qa&&N.destroyStream(A);L.buffer=G;L.divisor=da;L.normalized=ja;L.offset=W;L.size=Z;L.state=ba;L.stride=Ya;L.type=za;L.w=qa;L.x=ia;L.y=Da;L.z=Aa;Ea&&N.destroyStream(Fa);e.buffer=Ic;e.divisor=Hb;e.normalized=Ib;
e.offset=rc;e.size=Nb;e.state=kb;e.stride=Fb;e.type=Cb;e.w=xb;e.x=ib;e.y=Zb;e.z=Ob;Ta&&N.destroyStream(Pb);U.buffer=Wa;U.divisor=ub;U.normalized=tb;U.offset=Pa;U.size=Cc;U.state=Sa;U.stride=Jb;U.type=Db;U.w=Ma;U.x=Ld;U.y=Za;U.z=Kb;na.vert=Lb;na.frag=mb;O.dirty=!0},batch:function(a,b){var e,g,f,l,q,p,C;e=m.view;g=k.call(this,m,a,0);m.view=g;f=ra.next;f!==ra.cur&&(f?w.bindFramebuffer(36160,f.framebuffer):w.bindFramebuffer(36160,null),ra.cur=f);if(O.dirty){var h,x,r,A,L,P,X,Q,F,T,sa,G,da,U,na,oa,ma,
wa,Xd,Ad,nd,ad,rd,Lc,pd,Fc,fd,Pc,ld,Ab,Eb,uc,yb,xc,Bb,Jc,lc,Gc,gd,bd,Dc,fc,Hc,oc,qc,mc,pc,fb,Vc,Rb,cb,Mb;h=V.dither;h!==O.dither&&(h?w.enable(3024):w.disable(3024),O.dither=h);x=V.blend_enable;x!==O.blend_enable&&(x?w.enable(3042):w.disable(3042),O.blend_enable=x);r=ya[0];A=ya[1];L=ya[2];P=ya[3];if(r!==ea[0]||A!==ea[1]||L!==ea[2]||P!==ea[3])w.blendColor(r,A,L,P),ea[0]=r,ea[1]=A,ea[2]=L,ea[3]=P;X=Da[0];Q=Da[1];if(X!==ja[0]||Q!==ja[1])w.blendEquationSeparate(X,Q),ja[0]=X,ja[1]=Q;F=qa[0];T=qa[1];sa=
qa[2];G=qa[3];if(F!==Aa[0]||T!==Aa[1]||sa!==Aa[2]||G!==Aa[3])w.blendFuncSeparate(F,T,sa,G),Aa[0]=F,Aa[1]=T,Aa[2]=sa,Aa[3]=G;da=V.depth_enable;da!==O.depth_enable&&(da?w.enable(2929):w.disable(2929),O.depth_enable=da);U=V.depth_func;U!==O.depth_func&&(w.depthFunc(U),O.depth_func=U);na=dc[0];oa=dc[1];if(na!==Ya[0]||oa!==Ya[1])w.depthRange(na,oa),Ya[0]=na,Ya[1]=oa;ma=V.depth_mask;ma!==O.depth_mask&&(w.depthMask(ma),O.depth_mask=ma);wa=Qa[0];Xd=Qa[1];Ad=Qa[2];nd=Qa[3];if(wa!==la[0]||Xd!==la[1]||Ad!==
la[2]||nd!==la[3])w.colorMask(wa,Xd,Ad,nd),la[0]=wa,la[1]=Xd,la[2]=Ad,la[3]=nd;ad=V.frontFace;ad!==O.frontFace&&(w.frontFace(ad),O.frontFace=ad);rd=V.lineWidth;rd!==O.lineWidth&&(w.lineWidth(rd),O.lineWidth=rd);Lc=V.polygonOffset_enable;Lc!==O.polygonOffset_enable&&(Lc?w.enable(32823):w.disable(32823),O.polygonOffset_enable=Lc);pd=y[0];Fc=y[1];if(pd!==n[0]||Fc!==n[1])w.polygonOffset(pd,Fc),n[0]=pd,n[1]=Fc;fd=V.sample_alpha;fd!==O.sample_alpha&&(fd?w.enable(32926):w.disable(32926),O.sample_alpha=fd);
Pc=V.sample_enable;Pc!==O.sample_enable&&(Pc?w.enable(32928):w.disable(32928),O.sample_enable=Pc);ld=J[0];Ab=J[1];if(ld!==va[0]||Ab!==va[1])w.sampleCoverage(ld,Ab),va[0]=ld,va[1]=Ab;Eb=V.stencil_enable;Eb!==O.stencil_enable&&(Eb?w.enable(2960):w.disable(2960),O.stencil_enable=Eb);uc=V.stencil_mask;uc!==O.stencil_mask&&(w.stencilMask(uc),O.stencil_mask=uc);yb=Gb[0];xc=Gb[1];Bb=Gb[2];if(yb!==fa[0]||xc!==fa[1]||Bb!==fa[2])w.stencilFunc(yb,xc,Bb),fa[0]=yb,fa[1]=xc,fa[2]=Bb;Jc=Ga[0];lc=Ga[1];Gc=Ga[2];
gd=Ga[3];if(Jc!==pa[0]||lc!==pa[1]||Gc!==pa[2]||gd!==pa[3])w.stencilOpSeparate(Jc,lc,Gc,gd),pa[0]=Jc,pa[1]=lc,pa[2]=Gc,pa[3]=gd;bd=H[0];Dc=H[1];fc=H[2];Hc=H[3];if(bd!==ta[0]||Dc!==ta[1]||fc!==ta[2]||Hc!==ta[3])w.stencilOpSeparate(bd,Dc,fc,Hc),ta[0]=bd,ta[1]=Dc,ta[2]=fc,ta[3]=Hc;oc=V.scissor_enable;oc!==O.scissor_enable&&(oc?w.enable(3089):w.disable(3089),O.scissor_enable=oc);qc=Fa[0];mc=Fa[1];pc=Fa[2];fb=Fa[3];if(qc!==Yb[0]||mc!==Yb[1]||pc!==Yb[2]||fb!==Yb[3])w.scissor(qc,mc,pc,fb),Yb[0]=qc,Yb[1]=
mc,Yb[2]=pc,Yb[3]=fb;Vc=za[0];Rb=za[1];cb=za[2];Mb=za[3];if(Vc!==Ea[0]||Rb!==Ea[1]||cb!==Ea[2]||Mb!==Ea[3])w.viewport(Vc,Rb,cb,Mb),Ea[0]=Vc,Ea[1]=Rb,Ea[2]=cb,Ea[3]=Mb}w.enable(2884);O.cull_enable=!0;w.cullFace(1029);O.cull_face=1029;if(l=O.profile)q=performance.now(),t.count+=b;w.useProgram(Z.program);var ab,ob;Ca.setVAO(null);ab=D.call(this,m,C,p);I(ab)&&16===ab.length||z.commandRaise(E,v);w.uniformMatrix4fv(W.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ha[0]=ab[0],Ha[1]=ab[1],
Ha[2]=ab[2],Ha[3]=ab[3],Ha[4]=ab[4],Ha[5]=ab[5],Ha[6]=ab[6],Ha[7]=ab[7],Ha[8]=ab[8],Ha[9]=ab[9],Ha[10]=ab[10],Ha[11]=ab[11],Ha[12]=ab[12],Ha[13]=ab[13],Ha[14]=ab[14],Ha[15]=ab[15],Ha));ob=m.view;I(ob)&&16===ob.length||z.commandRaise(d,v);w.uniformMatrix4fv(S.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Ka[0]=ob[0],Ka[1]=ob[1],Ka[2]=ob[2],Ka[3]=ob[3],Ka[4]=ob[4],Ka[5]=ob[5],Ka[6]=ob[6],Ka[7]=ob[7],Ka[8]=ob[8],Ka[9]=ob[9],Ka[10]=ob[10],Ka[11]=ob[11],Ka[12]=ob[12],Ka[13]=ob[13],Ka[14]=
ob[14],Ka[15]=ob[15],Ka));for(p=0;p<b;++p){C=a[p];var Va,Ic,Hb,Ib,rc,Nb,kb,Fb,Cb,xb,ib,Zb,Ob,rb,Ta,Pb,pb,bc,jb,qb,Ja,sb,La,eb,gb,Na,lb,Wa,ub,tb,Pa,Cc,Sa,Jb,Db,Ma,Ld,Za,Kb,Lb,mb,Oa,$b,Ra,vb,wb,Ua,nb,gc,Ac,vc,bb,jc,Sc,Xa;(Va=C.position)&&("object"===typeof Va||"function"===typeof Va)&&(aa(Va)||N.getBuffer(Va)||N.getBuffer(Va.buffer)||aa(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||I(Va.constant)))||z.commandRaise(B,v);Ic=!1;Hb=null;Ib=!1;Nb=rc=0;kb=1;Fb=0;Cb=5126;Ob=Zb=ib=xb=0;aa(Va)?
(Ic=!0,Hb=N.createStream(34962,Va),Cb=Hb.dtype):(Hb=N.getBuffer(Va))?Cb=Hb.dtype:"constant"in Va?(kb=2,"number"===typeof Va.constant?(ib=Va.constant,Zb=Ob=xb=0):(ib=0<Va.constant.length?Va.constant[0]:0,Zb=1<Va.constant.length?Va.constant[1]:0,Ob=2<Va.constant.length?Va.constant[2]:0,xb=3<Va.constant.length?Va.constant[3]:0)):(Hb=aa(Va.buffer)?N.createStream(34962,Va.buffer):N.getBuffer(Va.buffer),Cb="type"in Va?ka[Va.type]:Hb.dtype,Ib=!!Va.normalized,Nb=Va.size|0,rc=Va.offset|0,Fb=Va.stride|0);rb=
ga.location;Ta=M[rb];if(1===kb){if(Ta.buffer||w.enableVertexAttribArray(rb),Pb=Nb||3,Ta.type!==Cb||Ta.size!==Pb||Ta.buffer!==Hb||Ta.normalized!==Ib||Ta.offset!==rc||Ta.stride!==Fb)w.bindBuffer(34962,Hb.buffer),w.vertexAttribPointer(rb,Pb,Cb,Ib,Fb,rc),Ta.type=Cb,Ta.size=Pb,Ta.buffer=Hb,Ta.normalized=Ib,Ta.offset=rc,Ta.stride=Fb}else if(Ta.buffer&&(w.disableVertexAttribArray(rb),Ta.buffer=null),Ta.x!==ib||Ta.y!==Zb||Ta.z!==Ob||Ta.w!==xb)w.vertexAttrib4f(rb,ib,Zb,Ob,xb),Ta.x=ib,Ta.y=Zb,Ta.z=Ob,Ta.w=
xb;(pb=C.normal)&&("object"===typeof pb||"function"===typeof pb)&&(aa(pb)||N.getBuffer(pb)||N.getBuffer(pb.buffer)||aa(pb.buffer)||"constant"in pb&&("number"===typeof pb.constant||I(pb.constant)))||z.commandRaise(u,v);bc=!1;jb=null;qb=!1;sb=Ja=0;La=1;eb=0;gb=5126;ub=Wa=lb=Na=0;aa(pb)?(bc=!0,jb=N.createStream(34962,pb),gb=jb.dtype):(jb=N.getBuffer(pb))?gb=jb.dtype:"constant"in pb?(La=2,"number"===typeof pb.constant?(lb=pb.constant,Wa=ub=Na=0):(lb=0<pb.constant.length?pb.constant[0]:0,Wa=1<pb.constant.length?
pb.constant[1]:0,ub=2<pb.constant.length?pb.constant[2]:0,Na=3<pb.constant.length?pb.constant[3]:0)):(jb=aa(pb.buffer)?N.createStream(34962,pb.buffer):N.getBuffer(pb.buffer),gb="type"in pb?ka[pb.type]:jb.dtype,qb=!!pb.normalized,sb=pb.size|0,Ja=pb.offset|0,eb=pb.stride|0);tb=ha.location;Pa=M[tb];if(1===La){if(Pa.buffer||w.enableVertexAttribArray(tb),Cc=sb||3,Pa.type!==gb||Pa.size!==Cc||Pa.buffer!==jb||Pa.normalized!==qb||Pa.offset!==Ja||Pa.stride!==eb)w.bindBuffer(34962,jb.buffer),w.vertexAttribPointer(tb,
Cc,gb,qb,eb,Ja),Pa.type=gb,Pa.size=Cc,Pa.buffer=jb,Pa.normalized=qb,Pa.offset=Ja,Pa.stride=eb}else if(Pa.buffer&&(w.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==ub||Pa.w!==Na)w.vertexAttrib4f(tb,lb,Wa,ub,Na),Pa.x=lb,Pa.y=Wa,Pa.z=ub,Pa.w=Na;(Sa=C.uv)&&("object"===typeof Sa||"function"===typeof Sa)&&(aa(Sa)||N.getBuffer(Sa)||N.getBuffer(Sa.buffer)||aa(Sa.buffer)||"constant"in Sa&&("number"===typeof Sa.constant||I(Sa.constant)))||z.commandRaise(ua,v);Jb=!1;Db=null;Ma=!1;
Za=Ld=0;Kb=1;Lb=0;mb=5126;vb=Ra=$b=Oa=0;aa(Sa)?(Jb=!0,Db=N.createStream(34962,Sa),mb=Db.dtype):(Db=N.getBuffer(Sa))?mb=Db.dtype:"constant"in Sa?(Kb=2,"number"===typeof Sa.constant?($b=Sa.constant,Ra=vb=Oa=0):($b=0<Sa.constant.length?Sa.constant[0]:0,Ra=1<Sa.constant.length?Sa.constant[1]:0,vb=2<Sa.constant.length?Sa.constant[2]:0,Oa=3<Sa.constant.length?Sa.constant[3]:0)):(Db=aa(Sa.buffer)?N.createStream(34962,Sa.buffer):N.getBuffer(Sa.buffer),mb="type"in Sa?ka[Sa.type]:Db.dtype,Ma=!!Sa.normalized,
Za=Sa.size|0,Ld=Sa.offset|0,Lb=Sa.stride|0);wb=ba.location;Ua=M[wb];if(1===Kb){if(Ua.buffer||w.enableVertexAttribArray(wb),nb=Za||2,Ua.type!==mb||Ua.size!==nb||Ua.buffer!==Db||Ua.normalized!==Ma||Ua.offset!==Ld||Ua.stride!==Lb)w.bindBuffer(34962,Db.buffer),w.vertexAttribPointer(wb,nb,mb,Ma,Lb,Ld),Ua.type=mb,Ua.size=nb,Ua.buffer=Db,Ua.normalized=Ma,Ua.offset=Ld,Ua.stride=Lb}else if(Ua.buffer&&(w.disableVertexAttribArray(wb),Ua.buffer=null),Ua.x!==$b||Ua.y!==Ra||Ua.z!==vb||Ua.w!==Oa)w.vertexAttrib4f(wb,
$b,Ra,vb,Oa),Ua.x=$b,Ua.y=Ra,Ua.z=vb,Ua.w=Oa;(gc=C.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||z.commandRaise(R,v);Ac=gc._texture;w.uniform1i(K.location,Ac.bind());vc=C.elements;bb=null;(jc=aa(vc))?bb=xa.createStream(vc):(bb=xa.getElements(vc),vc&&!bb&&z.commandRaise(c,v));bb&&w.bindBuffer(34963,bb.buffer.buffer);Sc=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||z.commandRaise(ia,v);Xa&&(bb?w.drawElements(Sc,Xa,bb.type,0<<(bb.type-5121>>
1)):w.drawArrays(Sc,0,Xa),Ic&&N.destroyStream(Hb),bc&&N.destroyStream(jb),Jb&&N.destroyStream(Db),Ac.unbind(),jc&&xa.destroyStream(bb))}O.dirty=!0;Ca.setVAO(null);m.view=e;l&&(t.cpuTime+=performance.now()-q)}}},"$7,color,position":function(a,z,v,t,f,g,l,b,G,x){var F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,ga,W,ba,S,M,N,m,O,P;F=a.attributes;T=a.context;A=a.current;h=a.draw;r=a.elements;oa=a.framebuffer;p=a.gl;Q=a.next;q=a.shader;L=a.uniforms;ma=a.vao;e=Q.blend_color;C=A.blend_color;
U=Q.blend_equation;k=A.blend_equation;Z=Q.blend_func;B=A.blend_func;u=Q.colorMask;ua=A.colorMask;D=Q.depth_range;E=A.depth_range;d=Q.polygonOffset_offset;R=A.polygonOffset_offset;c=Q.sample_coverage;ia=A.sample_coverage;K=Q.scissor_box;ha=A.scissor_box;ga=Q.stencil_func;W=A.stencil_func;ba=Q.stencil_opBack;S=A.stencil_opBack;M=Q.stencil_opFront;N=A.stencil_opFront;m=Q.viewport;O=A.viewport;P=[1,0,0,1];return{draw:function(a){var b,w,l,v;a=oa.next;a!==oa.cur&&(a?p.bindFramebuffer(36160,a.framebuffer):
p.bindFramebuffer(36160,null),oa.cur=a);if(A.dirty){a=Q.dither;a!==A.dither&&(a?p.enable(3024):p.disable(3024),A.dither=a);a=Q.blend_enable;a!==A.blend_enable&&(a?p.enable(3042):p.disable(3042),A.blend_enable=a);a=e[0];w=e[1];l=e[2];v=e[3];if(a!==C[0]||w!==C[1]||l!==C[2]||v!==C[3])p.blendColor(a,w,l,v),C[0]=a,C[1]=w,C[2]=l,C[3]=v;a=U[0];w=U[1];if(a!==k[0]||w!==k[1])p.blendEquationSeparate(a,w),k[0]=a,k[1]=w;a=Z[0];w=Z[1];l=Z[2];v=Z[3];if(a!==B[0]||w!==B[1]||l!==B[2]||v!==B[3])p.blendFuncSeparate(a,
w,l,v),B[0]=a,B[1]=w,B[2]=l,B[3]=v;a=Q.depth_enable;a!==A.depth_enable&&(a?p.enable(2929):p.disable(2929),A.depth_enable=a);a=Q.depth_func;a!==A.depth_func&&(p.depthFunc(a),A.depth_func=a);a=D[0];w=D[1];if(a!==E[0]||w!==E[1])p.depthRange(a,w),E[0]=a,E[1]=w;a=Q.depth_mask;a!==A.depth_mask&&(p.depthMask(a),A.depth_mask=a);a=u[0];w=u[1];l=u[2];v=u[3];if(a!==ua[0]||w!==ua[1]||l!==ua[2]||v!==ua[3])p.colorMask(a,w,l,v),ua[0]=a,ua[1]=w,ua[2]=l,ua[3]=v;a=Q.cull_enable;a!==A.cull_enable&&(a?p.enable(2884):
p.disable(2884),A.cull_enable=a);a=Q.cull_face;a!==A.cull_face&&(p.cullFace(a),A.cull_face=a);a=Q.frontFace;a!==A.frontFace&&(p.frontFace(a),A.frontFace=a);a=Q.lineWidth;a!==A.lineWidth&&(p.lineWidth(a),A.lineWidth=a);a=Q.polygonOffset_enable;a!==A.polygonOffset_enable&&(a?p.enable(32823):p.disable(32823),A.polygonOffset_enable=a);a=d[0];w=d[1];if(a!==R[0]||w!==R[1])p.polygonOffset(a,w),R[0]=a,R[1]=w;a=Q.sample_alpha;a!==A.sample_alpha&&(a?p.enable(32926):p.disable(32926),A.sample_alpha=a);a=Q.sample_enable;
a!==A.sample_enable&&(a?p.enable(32928):p.disable(32928),A.sample_enable=a);a=c[0];w=c[1];if(a!==ia[0]||w!==ia[1])p.sampleCoverage(a,w),ia[0]=a,ia[1]=w;a=Q.stencil_enable;a!==A.stencil_enable&&(a?p.enable(2960):p.disable(2960),A.stencil_enable=a);a=Q.stencil_mask;a!==A.stencil_mask&&(p.stencilMask(a),A.stencil_mask=a);a=ga[0];w=ga[1];l=ga[2];if(a!==W[0]||w!==W[1]||l!==W[2])p.stencilFunc(a,w,l),W[0]=a,W[1]=w,W[2]=l;a=M[0];w=M[1];l=M[2];v=M[3];if(a!==N[0]||w!==N[1]||l!==N[2]||v!==N[3])p.stencilOpSeparate(a,
w,l,v),N[0]=a,N[1]=w,N[2]=l,N[3]=v;a=ba[0];w=ba[1];l=ba[2];v=ba[3];if(a!==S[0]||w!==S[1]||l!==S[2]||v!==S[3])p.stencilOpSeparate(a,w,l,v),S[0]=a,S[1]=w,S[2]=l,S[3]=v;a=Q.scissor_enable;a!==A.scissor_enable&&(a?p.enable(3089):p.disable(3089),A.scissor_enable=a);a=K[0];w=K[1];l=K[2];v=K[3];if(a!==ha[0]||w!==ha[1]||l!==ha[2]||v!==ha[3])p.scissor(a,w,l,v),ha[0]=a,ha[1]=w,ha[2]=l,ha[3]=v;a=m[0];w=m[1];l=m[2];v=m[3];if(a!==O[0]||w!==O[1]||l!==O[2]||v!==O[3])p.viewport(a,w,l,v),O[0]=a,O[1]=w,O[2]=l,O[3]=
v;A.dirty=!1}if(a=A.profile)b=performance.now(),t.count++;p.useProgram(f.program);ma.setVAO(null);w=x.location;l=F[w];l.buffer||p.enableVertexAttribArray(w);if(l.type!==g.dtype||2!==l.size||l.buffer!==g||!1!==l.normalized||0!==l.offset||0!==l.stride)p.bindBuffer(34962,g.buffer),p.vertexAttribPointer(w,2,g.dtype,!1,0,0),l.type=g.dtype,l.size=2,l.buffer=g,l.normalized=!1,l.offset=0,l.stride=0;p.uniform4f(G.location,1,0,0,1);(w=h.elements)?p.bindBuffer(34963,w.buffer.buffer):ma.currentVAO&&(w=r.getElements(ma.currentVAO.elements))&&
p.bindBuffer(34963,w.buffer.buffer);l=h.primitive;v=h.offset;w?p.drawElements(l,3,w.type,v<<(w.type-5121>>1)):p.drawArrays(l,v,3);ma.setVAO(null);a&&(t.cpuTime+=performance.now()-b)},scope:function(a,c,d){var b,e,k,m,f,v,u,z,p,B,C,D,E,la,x,r,y,n;if(b=A.profile)e=performance.now(),t.count++;k=h.count;h.count=3;m=L[3];L[3]=P;f=l.buffer;l.buffer=g;v=l.divisor;l.divisor=0;u=l.normalized;l.normalized=!1;z=l.offset;l.offset=0;p=l.size;l.size=0;B=l.state;l.state=1;C=l.stride;l.stride=0;D=l.type;l.type=g.dtype;
E=l.w;l.w=0;la=l.x;l.x=0;x=l.y;l.y=0;r=l.z;l.z=0;y=q.vert;q.vert=2;n=q.frag;q.frag=1;c(T,a,d);b&&(t.cpuTime+=performance.now()-e);h.count=k;L[3]=m;l.buffer=f;l.divisor=v;l.normalized=u;l.offset=z;l.size=p;l.state=B;l.stride=C;l.type=D;l.w=E;l.x=la;l.y=x;l.z=r;q.vert=y;q.frag=n},batch:function(a,f){var l,v,q;l=oa.next;l!==oa.cur&&(l?p.bindFramebuffer(36160,l.framebuffer):p.bindFramebuffer(36160,null),oa.cur=l);if(A.dirty){var z,L;l=Q.dither;l!==A.dither&&(l?p.enable(3024):p.disable(3024),A.dither=
l);l=Q.blend_enable;l!==A.blend_enable&&(l?p.enable(3042):p.disable(3042),A.blend_enable=l);l=e[0];q=e[1];z=e[2];L=e[3];if(l!==C[0]||q!==C[1]||z!==C[2]||L!==C[3])p.blendColor(l,q,z,L),C[0]=l,C[1]=q,C[2]=z,C[3]=L;l=U[0];q=U[1];if(l!==k[0]||q!==k[1])p.blendEquationSeparate(l,q),k[0]=l,k[1]=q;l=Z[0];q=Z[1];z=Z[2];L=Z[3];if(l!==B[0]||q!==B[1]||z!==B[2]||L!==B[3])p.blendFuncSeparate(l,q,z,L),B[0]=l,B[1]=q,B[2]=z,B[3]=L;l=Q.depth_enable;l!==A.depth_enable&&(l?p.enable(2929):p.disable(2929),A.depth_enable=
l);l=Q.depth_func;l!==A.depth_func&&(p.depthFunc(l),A.depth_func=l);l=D[0];q=D[1];if(l!==E[0]||q!==E[1])p.depthRange(l,q),E[0]=l,E[1]=q;l=Q.depth_mask;l!==A.depth_mask&&(p.depthMask(l),A.depth_mask=l);l=u[0];q=u[1];z=u[2];L=u[3];if(l!==ua[0]||q!==ua[1]||z!==ua[2]||L!==ua[3])p.colorMask(l,q,z,L),ua[0]=l,ua[1]=q,ua[2]=z,ua[3]=L;l=Q.cull_enable;l!==A.cull_enable&&(l?p.enable(2884):p.disable(2884),A.cull_enable=l);l=Q.cull_face;l!==A.cull_face&&(p.cullFace(l),A.cull_face=l);l=Q.frontFace;l!==A.frontFace&&
(p.frontFace(l),A.frontFace=l);l=Q.lineWidth;l!==A.lineWidth&&(p.lineWidth(l),A.lineWidth=l);l=Q.polygonOffset_enable;l!==A.polygonOffset_enable&&(l?p.enable(32823):p.disable(32823),A.polygonOffset_enable=l);l=d[0];q=d[1];if(l!==R[0]||q!==R[1])p.polygonOffset(l,q),R[0]=l,R[1]=q;l=Q.sample_alpha;l!==A.sample_alpha&&(l?p.enable(32926):p.disable(32926),A.sample_alpha=l);l=Q.sample_enable;l!==A.sample_enable&&(l?p.enable(32928):p.disable(32928),A.sample_enable=l);l=c[0];q=c[1];if(l!==ia[0]||q!==ia[1])p.sampleCoverage(l,
q),ia[0]=l,ia[1]=q;l=Q.stencil_enable;l!==A.stencil_enable&&(l?p.enable(2960):p.disable(2960),A.stencil_enable=l);l=Q.stencil_mask;l!==A.stencil_mask&&(p.stencilMask(l),A.stencil_mask=l);l=ga[0];q=ga[1];z=ga[2];if(l!==W[0]||q!==W[1]||z!==W[2])p.stencilFunc(l,q,z),W[0]=l,W[1]=q,W[2]=z;l=M[0];q=M[1];z=M[2];L=M[3];if(l!==N[0]||q!==N[1]||z!==N[2]||L!==N[3])p.stencilOpSeparate(l,q,z,L),N[0]=l,N[1]=q,N[2]=z,N[3]=L;l=ba[0];q=ba[1];z=ba[2];L=ba[3];if(l!==S[0]||q!==S[1]||z!==S[2]||L!==S[3])p.stencilOpSeparate(l,
q,z,L),S[0]=l,S[1]=q,S[2]=z,S[3]=L;l=Q.scissor_enable;l!==A.scissor_enable&&(l?p.enable(3089):p.disable(3089),A.scissor_enable=l);l=K[0];q=K[1];z=K[2];L=K[3];if(l!==ha[0]||q!==ha[1]||z!==ha[2]||L!==ha[3])p.scissor(l,q,z,L),ha[0]=l,ha[1]=q,ha[2]=z,ha[3]=L;l=m[0];q=m[1];z=m[2];L=m[3];if(l!==O[0]||q!==O[1]||z!==O[2]||L!==O[3])p.viewport(l,q,z,L),O[0]=l,O[1]=q,O[2]=z,O[3]=L;A.dirty=!1}if(l=A.profile)v=performance.now(),t.count+=f;p.useProgram(b.program);var P;ma.setVAO(null);q=x.location;z=F[q];z.buffer||
p.enableVertexAttribArray(q);if(z.type!==g.dtype||2!==z.size||z.buffer!==g||!1!==z.normalized||0!==z.offset||0!==z.stride)p.bindBuffer(34962,g.buffer),p.vertexAttribPointer(q,2,g.dtype,!1,0,0),z.type=g.dtype,z.size=2,z.buffer=g,z.normalized=!1,z.offset=0,z.stride=0;p.uniform4f(G.location,1,0,0,1);(z=h.elements)?p.bindBuffer(34963,z.buffer.buffer):ma.currentVAO&&(z=r.getElements(ma.currentVAO.elements))&&p.bindBuffer(34963,z.buffer.buffer);L=h.primitive;P=h.offset;for(q=0;q<f;++q)z?p.drawElements(L,
3,z.type,P<<(z.type-5121>>1)):p.drawArrays(L,P,3);ma.setVAO(null);l&&(t.cpuTime+=performance.now()-v)}}},"$19,angle,color,offset,position":function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U){var k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,ga,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa;k=a.attributes;Z=a.context;B=a.current;u=a.draw;ua=a.elements;D=a.framebuffer;E=a.gl;d=a.isArrayLike;R=a.next;c=a.shader;ia=a.uniforms;K=a.vao;ha=R.blend_color;ga=B.blend_color;W=R.blend_equation;ba=B.blend_equation;
S=R.blend_func;M=B.blend_func;N=R.colorMask;m=B.colorMask;O=R.depth_range;P=B.depth_range;xa=R.polygonOffset_offset;ra=B.polygonOffset_offset;w=R.sample_coverage;I=B.sample_coverage;aa=R.scissor_box;V=B.scissor_box;na=R.stencil_func;sa=B.stencil_func;Ca=R.stencil_opBack;ya=B.stencil_opBack;ea=R.stencil_opFront;Da=B.stencil_opFront;ja=R.viewport;qa=B.viewport;return{draw:function(a){var c,q,p,h;c=D.next;c!==D.cur&&(c?E.bindFramebuffer(36160,c.framebuffer):E.bindFramebuffer(36160,null),D.cur=c);if(B.dirty){var y;
c=R.dither;c!==B.dither&&(c?E.enable(3024):E.disable(3024),B.dither=c);c=R.blend_enable;c!==B.blend_enable&&(c?E.enable(3042):E.disable(3042),B.blend_enable=c);c=ha[0];p=ha[1];h=ha[2];y=ha[3];if(c!==ga[0]||p!==ga[1]||h!==ga[2]||y!==ga[3])E.blendColor(c,p,h,y),ga[0]=c,ga[1]=p,ga[2]=h,ga[3]=y;c=W[0];p=W[1];if(c!==ba[0]||p!==ba[1])E.blendEquationSeparate(c,p),ba[0]=c,ba[1]=p;c=S[0];p=S[1];h=S[2];y=S[3];if(c!==M[0]||p!==M[1]||h!==M[2]||y!==M[3])E.blendFuncSeparate(c,p,h,y),M[0]=c,M[1]=p,M[2]=h,M[3]=y;
c=R.depth_func;c!==B.depth_func&&(E.depthFunc(c),B.depth_func=c);c=O[0];p=O[1];if(c!==P[0]||p!==P[1])E.depthRange(c,p),P[0]=c,P[1]=p;c=R.depth_mask;c!==B.depth_mask&&(E.depthMask(c),B.depth_mask=c);c=N[0];p=N[1];h=N[2];y=N[3];if(c!==m[0]||p!==m[1]||h!==m[2]||y!==m[3])E.colorMask(c,p,h,y),m[0]=c,m[1]=p,m[2]=h,m[3]=y;c=R.cull_enable;c!==B.cull_enable&&(c?E.enable(2884):E.disable(2884),B.cull_enable=c);c=R.cull_face;c!==B.cull_face&&(E.cullFace(c),B.cull_face=c);c=R.frontFace;c!==B.frontFace&&(E.frontFace(c),
B.frontFace=c);c=R.lineWidth;c!==B.lineWidth&&(E.lineWidth(c),B.lineWidth=c);c=R.polygonOffset_enable;c!==B.polygonOffset_enable&&(c?E.enable(32823):E.disable(32823),B.polygonOffset_enable=c);c=xa[0];p=xa[1];if(c!==ra[0]||p!==ra[1])E.polygonOffset(c,p),ra[0]=c,ra[1]=p;c=R.sample_alpha;c!==B.sample_alpha&&(c?E.enable(32926):E.disable(32926),B.sample_alpha=c);c=R.sample_enable;c!==B.sample_enable&&(c?E.enable(32928):E.disable(32928),B.sample_enable=c);c=w[0];p=w[1];if(c!==I[0]||p!==I[1])E.sampleCoverage(c,
p),I[0]=c,I[1]=p;c=R.stencil_enable;c!==B.stencil_enable&&(c?E.enable(2960):E.disable(2960),B.stencil_enable=c);c=R.stencil_mask;c!==B.stencil_mask&&(E.stencilMask(c),B.stencil_mask=c);c=na[0];p=na[1];h=na[2];if(c!==sa[0]||p!==sa[1]||h!==sa[2])E.stencilFunc(c,p,h),sa[0]=c,sa[1]=p,sa[2]=h;c=ea[0];p=ea[1];h=ea[2];y=ea[3];if(c!==Da[0]||p!==Da[1]||h!==Da[2]||y!==Da[3])E.stencilOpSeparate(c,p,h,y),Da[0]=c,Da[1]=p,Da[2]=h,Da[3]=y;c=Ca[0];p=Ca[1];h=Ca[2];y=Ca[3];if(c!==ya[0]||p!==ya[1]||h!==ya[2]||y!==ya[3])E.stencilOpSeparate(c,
p,h,y),ya[0]=c,ya[1]=p,ya[2]=h,ya[3]=y;c=R.scissor_enable;c!==B.scissor_enable&&(c?E.enable(3089):E.disable(3089),B.scissor_enable=c);c=aa[0];p=aa[1];h=aa[2];y=aa[3];if(c!==V[0]||p!==V[1]||h!==V[2]||y!==V[3])E.scissor(c,p,h,y),V[0]=c,V[1]=p,V[2]=h,V[3]=y;c=ja[0];p=ja[1];h=ja[2];y=ja[3];if(c!==qa[0]||p!==qa[1]||h!==qa[2]||y!==qa[3])E.viewport(c,p,h,y),qa[0]=c,qa[1]=p,qa[2]=h,qa[3]=y}E.disable(2929);B.depth_enable=!1;if(c=B.profile)q=performance.now(),t.count++;E.useProgram(f.program);K.setVAO(null);
p=U.location;h=k[p];h.buffer||E.enableVertexAttribArray(p);if(h.type!==g.dtype||2!==h.size||h.buffer!==g||!1!==h.normalized||0!==h.offset||0!==h.stride)E.bindBuffer(34962,g.buffer),E.vertexAttribPointer(p,2,g.dtype,!1,0,0),h.type=g.dtype,h.size=2,h.buffer=g,h.normalized=!1,h.offset=0,h.stride=0;p=l.call(this,Z,a,0);"number"!==typeof p&&z.commandRaise(b,v);E.uniform1f(ma.location,p);p=a.offset;d(p)&&2===p.length||z.commandRaise(G,v);E.uniform2f(C.location,p[0],p[1]);a=x.call(this,Z,a,0);d(a)&&4===
a.length||z.commandRaise(F,v);E.uniform4f(e.location,a[0],a[1],a[2],a[3]);(a=u.elements)?E.bindBuffer(34963,a.buffer.buffer):K.currentVAO&&(a=ua.getElements(K.currentVAO.elements))&&E.bindBuffer(34963,a.buffer.buffer);p=u.primitive;h=u.offset;a?E.drawElements(p,3,a.type,h<<(a.type-5121>>1)):E.drawArrays(p,h,3);B.dirty=!0;K.setVAO(null);c&&(t.cpuTime+=performance.now()-q)},scope:function(a,d,b){var e,k,m,l,f,v,q,w,z,p,H,C,D,E,x,r,I,ea,K,L,V;e=R.depth_enable;R.depth_enable=!1;if(k=B.profile)m=performance.now(),
t.count++;l=u.count;u.count=3;f=T.call(this,Z,a,b);v=ia[3];ia[3]=f;q=A.call(this,Z,a,b);f=ia[5];ia[5]=q;w=a.offset;q=ia[4];ia[4]=w;w=h.buffer;h.buffer=g;z=h.divisor;h.divisor=0;p=h.normalized;h.normalized=!1;H=h.offset;h.offset=0;C=h.size;h.size=0;D=h.state;h.state=1;E=h.stride;h.stride=0;x=h.type;h.type=g.dtype;r=h.w;h.w=0;I=h.x;h.x=0;ea=h.y;h.y=0;K=h.z;h.z=0;L=c.vert;c.vert=2;V=c.frag;c.frag=1;B.dirty=!0;d(Z,a,b);R.depth_enable=e;k&&(t.cpuTime+=performance.now()-m);u.count=l;ia[3]=v;ia[5]=f;ia[4]=
q;h.buffer=w;h.divisor=z;h.normalized=p;h.offset=H;h.size=C;h.state=D;h.stride=E;h.type=x;h.w=r;h.x=I;h.y=ea;h.z=K;c.vert=L;c.frag=V;B.dirty=!0},batch:function(a,c){var b,l,f,y;b=D.next;b!==D.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),D.cur=b);if(B.dirty){var n,J,h;b=R.dither;b!==B.dither&&(b?E.enable(3024):E.disable(3024),B.dither=b);b=R.blend_enable;b!==B.blend_enable&&(b?E.enable(3042):E.disable(3042),B.blend_enable=b);b=ha[0];n=ha[1];J=ha[2];h=ha[3];if(b!==ga[0]||
n!==ga[1]||J!==ga[2]||h!==ga[3])E.blendColor(b,n,J,h),ga[0]=b,ga[1]=n,ga[2]=J,ga[3]=h;b=W[0];n=W[1];if(b!==ba[0]||n!==ba[1])E.blendEquationSeparate(b,n),ba[0]=b,ba[1]=n;b=S[0];n=S[1];J=S[2];h=S[3];if(b!==M[0]||n!==M[1]||J!==M[2]||h!==M[3])E.blendFuncSeparate(b,n,J,h),M[0]=b,M[1]=n,M[2]=J,M[3]=h;b=R.depth_func;b!==B.depth_func&&(E.depthFunc(b),B.depth_func=b);b=O[0];n=O[1];if(b!==P[0]||n!==P[1])E.depthRange(b,n),P[0]=b,P[1]=n;b=R.depth_mask;b!==B.depth_mask&&(E.depthMask(b),B.depth_mask=b);b=N[0];
n=N[1];J=N[2];h=N[3];if(b!==m[0]||n!==m[1]||J!==m[2]||h!==m[3])E.colorMask(b,n,J,h),m[0]=b,m[1]=n,m[2]=J,m[3]=h;b=R.cull_enable;b!==B.cull_enable&&(b?E.enable(2884):E.disable(2884),B.cull_enable=b);b=R.cull_face;b!==B.cull_face&&(E.cullFace(b),B.cull_face=b);b=R.frontFace;b!==B.frontFace&&(E.frontFace(b),B.frontFace=b);b=R.lineWidth;b!==B.lineWidth&&(E.lineWidth(b),B.lineWidth=b);b=R.polygonOffset_enable;b!==B.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),B.polygonOffset_enable=b);b=xa[0];
n=xa[1];if(b!==ra[0]||n!==ra[1])E.polygonOffset(b,n),ra[0]=b,ra[1]=n;b=R.sample_alpha;b!==B.sample_alpha&&(b?E.enable(32926):E.disable(32926),B.sample_alpha=b);b=R.sample_enable;b!==B.sample_enable&&(b?E.enable(32928):E.disable(32928),B.sample_enable=b);b=w[0];n=w[1];if(b!==I[0]||n!==I[1])E.sampleCoverage(b,n),I[0]=b,I[1]=n;b=R.stencil_enable;b!==B.stencil_enable&&(b?E.enable(2960):E.disable(2960),B.stencil_enable=b);b=R.stencil_mask;b!==B.stencil_mask&&(E.stencilMask(b),B.stencil_mask=b);b=na[0];
n=na[1];J=na[2];if(b!==sa[0]||n!==sa[1]||J!==sa[2])E.stencilFunc(b,n,J),sa[0]=b,sa[1]=n,sa[2]=J;b=ea[0];n=ea[1];J=ea[2];h=ea[3];if(b!==Da[0]||n!==Da[1]||J!==Da[2]||h!==Da[3])E.stencilOpSeparate(b,n,J,h),Da[0]=b,Da[1]=n,Da[2]=J,Da[3]=h;b=Ca[0];n=Ca[1];J=Ca[2];h=Ca[3];if(b!==ya[0]||n!==ya[1]||J!==ya[2]||h!==ya[3])E.stencilOpSeparate(b,n,J,h),ya[0]=b,ya[1]=n,ya[2]=J,ya[3]=h;b=R.scissor_enable;b!==B.scissor_enable&&(b?E.enable(3089):E.disable(3089),B.scissor_enable=b);b=aa[0];n=aa[1];J=aa[2];h=aa[3];
if(b!==V[0]||n!==V[1]||J!==V[2]||h!==V[3])E.scissor(b,n,J,h),V[0]=b,V[1]=n,V[2]=J,V[3]=h;b=ja[0];n=ja[1];J=ja[2];h=ja[3];if(b!==qa[0]||n!==qa[1]||J!==qa[2]||h!==qa[3])E.viewport(b,n,J,h),qa[0]=b,qa[1]=n,qa[2]=J,qa[3]=h}E.disable(2929);B.depth_enable=!1;if(b=B.profile)l=performance.now(),t.count+=c;E.useProgram(r.program);K.setVAO(null);n=U.location;J=k[n];J.buffer||E.enableVertexAttribArray(n);if(J.type!==g.dtype||2!==J.size||J.buffer!==g||!1!==J.normalized||0!==J.offset||0!==J.stride)E.bindBuffer(34962,
g.buffer),E.vertexAttribPointer(n,2,g.dtype,!1,0,0),J.type=g.dtype,J.size=2,J.buffer=g,J.normalized=!1,J.offset=0,J.stride=0;f=oa.call(this,Z,y,f);"number"!==typeof f&&z.commandRaise(p,v);E.uniform1f(ma.location,f);(n=u.elements)?E.bindBuffer(34963,n.buffer.buffer):K.currentVAO&&(n=ua.getElements(K.currentVAO.elements))&&E.bindBuffer(34963,n.buffer.buffer);J=u.primitive;h=u.offset;for(f=0;f<c;++f){y=a[f];var x,A,F,fa,H,ta,Ga,pa,G;x=y.offset;d(x)&&2===x.length||z.commandRaise(Q,v);A=x[0];x=x[1];f&&
F===A&&fa===x||(F=A,fa=x,E.uniform2f(C.location,A,x));H=q.call(this,Z,y,f);d(H)&&4===H.length||z.commandRaise(L,v);y=H[0];A=H[1];x=H[2];H=H[3];f&&ta===y&&Ga===A&&pa===x&&G===H||(ta=y,Ga=A,pa=x,G=H,E.uniform4f(e.location,y,A,x,H));n?E.drawElements(J,3,n.type,h<<(n.type-5121>>1)):E.drawArrays(J,h,3)}B.dirty=!0;K.setVAO(null);b&&(t.cpuTime+=performance.now()-l)}}},"$23,model,position,projection,view":function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U,k,Z,B,u){var ga,D,E,d,R,c,ia,K,ha,Ba,W,ba,
S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa;ga=a.attributes;D=a.context;E=a.current;d=a.draw;R=a.framebuffer;c=a.gl;ia=a.isArrayLike;K=a.next;ha=a.shader;Ba=a.uniforms;W=a.vao;ba=K.blend_color;S=E.blend_color;M=K.blend_equation;N=E.blend_equation;m=K.blend_func;O=E.blend_func;P=K.colorMask;xa=E.colorMask;ra=K.depth_range;w=E.depth_range;I=K.polygonOffset_offset;aa=E.polygonOffset_offset;V=K.sample_coverage;na=E.sample_coverage;sa=K.scissor_box;Ca=E.scissor_box;ya=
K.stencil_func;ea=E.stencil_func;Da=K.stencil_opBack;ja=E.stencil_opBack;qa=K.stencil_opFront;Aa=E.stencil_opFront;Qa=K.viewport;la=E.viewport;dc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ya=new Float32Array(16);y=new Float32Array(16);n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];J=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(a){var d,e,n,q;d=R.next;d!==R.cur&&(d?c.bindFramebuffer(36160,d.framebuffer):c.bindFramebuffer(36160,
null),R.cur=d);if(E.dirty){var p;d=K.dither;d!==E.dither&&(d?c.enable(3024):c.disable(3024),E.dither=d);d=K.blend_enable;d!==E.blend_enable&&(d?c.enable(3042):c.disable(3042),E.blend_enable=d);d=ba[0];n=ba[1];q=ba[2];p=ba[3];if(d!==S[0]||n!==S[1]||q!==S[2]||p!==S[3])c.blendColor(d,n,q,p),S[0]=d,S[1]=n,S[2]=q,S[3]=p;d=M[0];n=M[1];if(d!==N[0]||n!==N[1])c.blendEquationSeparate(d,n),N[0]=d,N[1]=n;d=m[0];n=m[1];q=m[2];p=m[3];if(d!==O[0]||n!==O[1]||q!==O[2]||p!==O[3])c.blendFuncSeparate(d,n,q,p),O[0]=d,
O[1]=n,O[2]=q,O[3]=p;d=K.depth_enable;d!==E.depth_enable&&(d?c.enable(2929):c.disable(2929),E.depth_enable=d);d=K.depth_func;d!==E.depth_func&&(c.depthFunc(d),E.depth_func=d);d=ra[0];n=ra[1];if(d!==w[0]||n!==w[1])c.depthRange(d,n),w[0]=d,w[1]=n;d=K.depth_mask;d!==E.depth_mask&&(c.depthMask(d),E.depth_mask=d);d=P[0];n=P[1];q=P[2];p=P[3];if(d!==xa[0]||n!==xa[1]||q!==xa[2]||p!==xa[3])c.colorMask(d,n,q,p),xa[0]=d,xa[1]=n,xa[2]=q,xa[3]=p;d=K.cull_enable;d!==E.cull_enable&&(d?c.enable(2884):c.disable(2884),
E.cull_enable=d);d=K.cull_face;d!==E.cull_face&&(c.cullFace(d),E.cull_face=d);d=K.frontFace;d!==E.frontFace&&(c.frontFace(d),E.frontFace=d);d=K.lineWidth;d!==E.lineWidth&&(c.lineWidth(d),E.lineWidth=d);d=K.polygonOffset_enable;d!==E.polygonOffset_enable&&(d?c.enable(32823):c.disable(32823),E.polygonOffset_enable=d);d=I[0];n=I[1];if(d!==aa[0]||n!==aa[1])c.polygonOffset(d,n),aa[0]=d,aa[1]=n;d=K.sample_alpha;d!==E.sample_alpha&&(d?c.enable(32926):c.disable(32926),E.sample_alpha=d);d=K.sample_enable;
d!==E.sample_enable&&(d?c.enable(32928):c.disable(32928),E.sample_enable=d);d=V[0];n=V[1];if(d!==na[0]||n!==na[1])c.sampleCoverage(d,n),na[0]=d,na[1]=n;d=K.stencil_enable;d!==E.stencil_enable&&(d?c.enable(2960):c.disable(2960),E.stencil_enable=d);d=K.stencil_mask;d!==E.stencil_mask&&(c.stencilMask(d),E.stencil_mask=d);d=ya[0];n=ya[1];q=ya[2];if(d!==ea[0]||n!==ea[1]||q!==ea[2])c.stencilFunc(d,n,q),ea[0]=d,ea[1]=n,ea[2]=q;d=qa[0];n=qa[1];q=qa[2];p=qa[3];if(d!==Aa[0]||n!==Aa[1]||q!==Aa[2]||p!==Aa[3])c.stencilOpSeparate(d,
n,q,p),Aa[0]=d,Aa[1]=n,Aa[2]=q,Aa[3]=p;d=Da[0];n=Da[1];q=Da[2];p=Da[3];if(d!==ja[0]||n!==ja[1]||q!==ja[2]||p!==ja[3])c.stencilOpSeparate(d,n,q,p),ja[0]=d,ja[1]=n,ja[2]=q,ja[3]=p;d=K.scissor_enable;d!==E.scissor_enable&&(d?c.enable(3089):c.disable(3089),E.scissor_enable=d);d=sa[0];n=sa[1];q=sa[2];p=sa[3];if(d!==Ca[0]||n!==Ca[1]||q!==Ca[2]||p!==Ca[3])c.scissor(d,n,q,p),Ca[0]=d,Ca[1]=n,Ca[2]=q,Ca[3]=p;d=Qa[0];n=Qa[1];q=Qa[2];p=Qa[3];if(d!==la[0]||n!==la[1]||q!==la[2]||p!==la[3])c.viewport(d,n,q,p),la[0]=
d,la[1]=n,la[2]=q,la[3]=p;E.dirty=!1}if(d=E.profile)e=performance.now(),t.count++;c.useProgram(f.program);W.setVAO(null);n=Z.location;q=ga[n];q.buffer||c.enableVertexAttribArray(n);if(q.type!==g.dtype||3!==q.size||q.buffer!==g||!1!==q.normalized||0!==q.offset||0!==q.stride)c.bindBuffer(34962,g.buffer),c.vertexAttribPointer(n,3,g.dtype,!1,0,0),q.type=g.dtype,q.size=3,q.buffer=g,q.normalized=!1,q.offset=0,q.stride=0;c.uniformMatrix4fv(k.location,!1,dc);n=l.call(this,D,a,0);ia(n)&&16===n.length||z.commandRaise(b,
v);c.uniformMatrix4fv(u.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ya[0]=n[0],Ya[1]=n[1],Ya[2]=n[2],Ya[3]=n[3],Ya[4]=n[4],Ya[5]=n[5],Ya[6]=n[6],Ya[7]=n[7],Ya[8]=n[8],Ya[9]=n[9],Ya[10]=n[10],Ya[11]=n[11],Ya[12]=n[12],Ya[13]=n[13],Ya[14]=n[14],Ya[15]=n[15],Ya));a=G.call(this,D,a,0);ia(a)&&16===a.length||z.commandRaise(x,v);c.uniformMatrix4fv(B.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(y[0]=a[0],y[1]=a[1],y[2]=a[2],y[3]=a[3],y[4]=a[4],y[5]=a[5],y[6]=a[6],y[7]=a[7],y[8]=
a[8],y[9]=a[9],y[10]=a[10],y[11]=a[11],y[12]=a[12],y[13]=a[13],y[14]=a[14],y[15]=a[15],y));F&&c.bindBuffer(34963,F.buffer.buffer);a=F.primType;n=F.vertCount-0;0<=n||z.commandRaise(T,v);n&&(c.drawElements(a,n,F.type,0<<(F.type-5121>>1)),W.setVAO(null),d&&(t.cpuTime+=performance.now()-e))},scope:function(a,c,b){var e,k,m,l,f,y,q,w,J,u,B,C,x,la,I,ea,K,L,V,M,N,O,P;if(e=E.profile)k=performance.now(),t.count++;m=d.elements;d.elements=A;l=d.offset;d.offset=0;f=A.vertCount-0;0<=f||z.commandRaise(h,v);y=d.count;
d.count=f;q=A.primType;f=d.primitive;d.primitive=q;q=Ba[3];Ba[3]=n;w=r.call(this,D,a,b);J=Ba[5];Ba[5]=w;u=oa.call(this,D,a,b);w=Ba[4];Ba[4]=u;u=p.buffer;p.buffer=g;B=p.divisor;p.divisor=0;C=p.normalized;p.normalized=!1;x=p.offset;p.offset=0;la=p.size;p.size=0;I=p.state;p.state=1;ea=p.stride;p.stride=0;K=p.type;p.type=g.dtype;L=p.w;p.w=0;V=p.x;p.x=0;M=p.y;p.y=0;N=p.z;p.z=0;O=ha.vert;ha.vert=2;P=ha.frag;ha.frag=1;c(D,a,b);e&&(t.cpuTime+=performance.now()-k);d.elements=m;d.offset=l;d.count=y;d.primitive=
f;Ba[3]=q;Ba[5]=J;Ba[4]=w;p.buffer=u;p.divisor=B;p.normalized=C;p.offset=x;p.size=la;p.state=I;p.stride=ea;p.type=K;p.w=L;p.x=V;p.y=M;p.z=N;ha.vert=O;ha.frag=P},batch:function(a,d){var b,f,l;b=R.next;b!==R.cur&&(b?c.bindFramebuffer(36160,b.framebuffer):c.bindFramebuffer(36160,null),R.cur=b);if(E.dirty){var n,y,p;b=K.dither;b!==E.dither&&(b?c.enable(3024):c.disable(3024),E.dither=b);b=K.blend_enable;b!==E.blend_enable&&(b?c.enable(3042):c.disable(3042),E.blend_enable=b);b=ba[0];n=ba[1];y=ba[2];p=ba[3];
if(b!==S[0]||n!==S[1]||y!==S[2]||p!==S[3])c.blendColor(b,n,y,p),S[0]=b,S[1]=n,S[2]=y,S[3]=p;b=M[0];n=M[1];if(b!==N[0]||n!==N[1])c.blendEquationSeparate(b,n),N[0]=b,N[1]=n;b=m[0];n=m[1];y=m[2];p=m[3];if(b!==O[0]||n!==O[1]||y!==O[2]||p!==O[3])c.blendFuncSeparate(b,n,y,p),O[0]=b,O[1]=n,O[2]=y,O[3]=p;b=K.depth_enable;b!==E.depth_enable&&(b?c.enable(2929):c.disable(2929),E.depth_enable=b);b=K.depth_func;b!==E.depth_func&&(c.depthFunc(b),E.depth_func=b);b=ra[0];n=ra[1];if(b!==w[0]||n!==w[1])c.depthRange(b,
n),w[0]=b,w[1]=n;b=K.depth_mask;b!==E.depth_mask&&(c.depthMask(b),E.depth_mask=b);b=P[0];n=P[1];y=P[2];p=P[3];if(b!==xa[0]||n!==xa[1]||y!==xa[2]||p!==xa[3])c.colorMask(b,n,y,p),xa[0]=b,xa[1]=n,xa[2]=y,xa[3]=p;b=K.cull_enable;b!==E.cull_enable&&(b?c.enable(2884):c.disable(2884),E.cull_enable=b);b=K.cull_face;b!==E.cull_face&&(c.cullFace(b),E.cull_face=b);b=K.frontFace;b!==E.frontFace&&(c.frontFace(b),E.frontFace=b);b=K.lineWidth;b!==E.lineWidth&&(c.lineWidth(b),E.lineWidth=b);b=K.polygonOffset_enable;
b!==E.polygonOffset_enable&&(b?c.enable(32823):c.disable(32823),E.polygonOffset_enable=b);b=I[0];n=I[1];if(b!==aa[0]||n!==aa[1])c.polygonOffset(b,n),aa[0]=b,aa[1]=n;b=K.sample_alpha;b!==E.sample_alpha&&(b?c.enable(32926):c.disable(32926),E.sample_alpha=b);b=K.sample_enable;b!==E.sample_enable&&(b?c.enable(32928):c.disable(32928),E.sample_enable=b);b=V[0];n=V[1];if(b!==na[0]||n!==na[1])c.sampleCoverage(b,n),na[0]=b,na[1]=n;b=K.stencil_enable;b!==E.stencil_enable&&(b?c.enable(2960):c.disable(2960),
E.stencil_enable=b);b=K.stencil_mask;b!==E.stencil_mask&&(c.stencilMask(b),E.stencil_mask=b);b=ya[0];n=ya[1];y=ya[2];if(b!==ea[0]||n!==ea[1]||y!==ea[2])c.stencilFunc(b,n,y),ea[0]=b,ea[1]=n,ea[2]=y;b=qa[0];n=qa[1];y=qa[2];p=qa[3];if(b!==Aa[0]||n!==Aa[1]||y!==Aa[2]||p!==Aa[3])c.stencilOpSeparate(b,n,y,p),Aa[0]=b,Aa[1]=n,Aa[2]=y,Aa[3]=p;b=Da[0];n=Da[1];y=Da[2];p=Da[3];if(b!==ja[0]||n!==ja[1]||y!==ja[2]||p!==ja[3])c.stencilOpSeparate(b,n,y,p),ja[0]=b,ja[1]=n,ja[2]=y,ja[3]=p;b=K.scissor_enable;b!==E.scissor_enable&&
(b?c.enable(3089):c.disable(3089),E.scissor_enable=b);b=sa[0];n=sa[1];y=sa[2];p=sa[3];if(b!==Ca[0]||n!==Ca[1]||y!==Ca[2]||p!==Ca[3])c.scissor(b,n,y,p),Ca[0]=b,Ca[1]=n,Ca[2]=y,Ca[3]=p;b=Qa[0];n=Qa[1];y=Qa[2];p=Qa[3];if(b!==la[0]||n!==la[1]||y!==la[2]||p!==la[3])c.viewport(b,n,y,p),la[0]=b,la[1]=n,la[2]=y,la[3]=p;E.dirty=!1}if(b=E.profile)f=performance.now(),t.count+=d;c.useProgram(Q.program);W.setVAO(null);n=Z.location;y=ga[n];y.buffer||c.enableVertexAttribArray(n);if(y.type!==g.dtype||3!==y.size||
y.buffer!==g||!1!==y.normalized||0!==y.offset||0!==y.stride)c.bindBuffer(34962,g.buffer),c.vertexAttribPointer(n,3,g.dtype,!1,0,0),y.type=g.dtype,y.size=3,y.buffer=g,y.normalized=!1,y.offset=0,y.stride=0;c.uniformMatrix4fv(k.location,!1,J);n=q.call(this,D,void 0,l);ia(n)&&16===n.length||z.commandRaise(L,v);c.uniformMatrix4fv(u.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(va[0]=n[0],va[1]=n[1],va[2]=n[2],va[3]=n[3],va[4]=n[4],va[5]=n[5],va[6]=n[6],va[7]=n[7],va[8]=n[8],va[9]=n[9],va[10]=
n[10],va[11]=n[11],va[12]=n[12],va[13]=n[13],va[14]=n[14],va[15]=n[15],va));l=ma.call(this,D,void 0,l);ia(l)&&16===l.length||z.commandRaise(e,v);c.uniformMatrix4fv(B.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Fa[0]=l[0],Fa[1]=l[1],Fa[2]=l[2],Fa[3]=l[3],Fa[4]=l[4],Fa[5]=l[5],Fa[6]=l[6],Fa[7]=l[7],Fa[8]=l[8],Fa[9]=l[9],Fa[10]=l[10],Fa[11]=l[11],Fa[12]=l[12],Fa[13]=l[13],Fa[14]=l[14],Fa[15]=l[15],Fa));C&&c.bindBuffer(34963,C.buffer.buffer);n=C.primType;y=C.vertCount-0;0<=y||z.commandRaise(U,
v);for(l=0;l<d;++l)y&&c.drawElements(n,y,C.type,0<<(C.type-5121>>1));W.setVAO(null);b&&(t.cpuTime+=performance.now()-f)}}},$20:function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,oa,p,Q,q,L,ma){var e,C,U,k,Z,B,u,ga,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca;e=a.context;C=a.current;U=a.framebuffer;k=a.gl;Z=a.next;B=a.shader;u=a.uniforms;ga=a.vao;D=Z.blend_color;E=C.blend_color;d=Z.blend_equation;R=C.blend_equation;c=Z.blend_func;ia=C.blend_func;K=Z.colorMask;ha=C.colorMask;Ba=Z.depth_range;W=
C.depth_range;ba=Z.polygonOffset_offset;S=C.polygonOffset_offset;M=Z.sample_coverage;N=C.sample_coverage;m=Z.scissor_box;O=C.scissor_box;P=Z.stencil_func;xa=C.stencil_func;ra=Z.stencil_opBack;w=C.stencil_opBack;I=Z.stencil_opFront;aa=C.stencil_opFront;V=Z.viewport;na=C.viewport;sa={};Ca={};return{draw:function(a){var q,p,z,u,h,r,la,A,L,y,n,J,Q;q=e.center;p=e.distance;z=e.eye;u=e.phi;h=e.projection;r=l.call(this,e,a,0);la=e.theta;A=e.up;L=e.view;e.center=f;e.distance=2.302585092994046;e.eye=g;e.phi=
0;e.projection=r;e.theta=0;e.up=b;e.view=G;r=U.next;r!==U.cur&&(r?k.bindFramebuffer(36160,r.framebuffer):k.bindFramebuffer(36160,null),U.cur=r);if(C.dirty){r=Z.dither;r!==C.dither&&(r?k.enable(3024):k.disable(3024),C.dither=r);r=Z.blend_enable;r!==C.blend_enable&&(r?k.enable(3042):k.disable(3042),C.blend_enable=r);r=D[0];n=D[1];J=D[2];Q=D[3];if(r!==E[0]||n!==E[1]||J!==E[2]||Q!==E[3])k.blendColor(r,n,J,Q),E[0]=r,E[1]=n,E[2]=J,E[3]=Q;r=d[0];n=d[1];if(r!==R[0]||n!==R[1])k.blendEquationSeparate(r,n),
R[0]=r,R[1]=n;r=c[0];n=c[1];J=c[2];Q=c[3];if(r!==ia[0]||n!==ia[1]||J!==ia[2]||Q!==ia[3])k.blendFuncSeparate(r,n,J,Q),ia[0]=r,ia[1]=n,ia[2]=J,ia[3]=Q;r=Z.depth_enable;r!==C.depth_enable&&(r?k.enable(2929):k.disable(2929),C.depth_enable=r);r=Z.depth_func;r!==C.depth_func&&(k.depthFunc(r),C.depth_func=r);r=Ba[0];n=Ba[1];if(r!==W[0]||n!==W[1])k.depthRange(r,n),W[0]=r,W[1]=n;r=Z.depth_mask;r!==C.depth_mask&&(k.depthMask(r),C.depth_mask=r);r=K[0];n=K[1];J=K[2];Q=K[3];if(r!==ha[0]||n!==ha[1]||J!==ha[2]||
Q!==ha[3])k.colorMask(r,n,J,Q),ha[0]=r,ha[1]=n,ha[2]=J,ha[3]=Q;r=Z.cull_enable;r!==C.cull_enable&&(r?k.enable(2884):k.disable(2884),C.cull_enable=r);r=Z.cull_face;r!==C.cull_face&&(k.cullFace(r),C.cull_face=r);r=Z.frontFace;r!==C.frontFace&&(k.frontFace(r),C.frontFace=r);r=Z.lineWidth;r!==C.lineWidth&&(k.lineWidth(r),C.lineWidth=r);r=Z.polygonOffset_enable;r!==C.polygonOffset_enable&&(r?k.enable(32823):k.disable(32823),C.polygonOffset_enable=r);r=ba[0];n=ba[1];if(r!==S[0]||n!==S[1])k.polygonOffset(r,
n),S[0]=r,S[1]=n;r=Z.sample_alpha;r!==C.sample_alpha&&(r?k.enable(32926):k.disable(32926),C.sample_alpha=r);r=Z.sample_enable;r!==C.sample_enable&&(r?k.enable(32928):k.disable(32928),C.sample_enable=r);r=M[0];n=M[1];if(r!==N[0]||n!==N[1])k.sampleCoverage(r,n),N[0]=r,N[1]=n;r=Z.stencil_enable;r!==C.stencil_enable&&(r?k.enable(2960):k.disable(2960),C.stencil_enable=r);r=Z.stencil_mask;r!==C.stencil_mask&&(k.stencilMask(r),C.stencil_mask=r);r=P[0];n=P[1];J=P[2];if(r!==xa[0]||n!==xa[1]||J!==xa[2])k.stencilFunc(r,
n,J),xa[0]=r,xa[1]=n,xa[2]=J;r=I[0];n=I[1];J=I[2];Q=I[3];if(r!==aa[0]||n!==aa[1]||J!==aa[2]||Q!==aa[3])k.stencilOpSeparate(r,n,J,Q),aa[0]=r,aa[1]=n,aa[2]=J,aa[3]=Q;r=ra[0];n=ra[1];J=ra[2];Q=ra[3];if(r!==w[0]||n!==w[1]||J!==w[2]||Q!==w[3])k.stencilOpSeparate(r,n,J,Q),w[0]=r,w[1]=n,w[2]=J,w[3]=Q;r=Z.scissor_enable;r!==C.scissor_enable&&(r?k.enable(3089):k.disable(3089),C.scissor_enable=r);r=m[0];n=m[1];J=m[2];Q=m[3];if(r!==O[0]||n!==O[1]||J!==O[2]||Q!==O[3])k.scissor(r,n,J,Q),O[0]=r,O[1]=n,O[2]=J,O[3]=
Q;r=V[0];n=V[1];J=V[2];Q=V[3];if(r!==na[0]||n!==na[1]||J!==na[2]||Q!==na[3])k.viewport(r,n,J,Q),na[0]=r,na[1]=n,na[2]=J,na[3]=Q;C.dirty=!1}if(r=C.profile)y=performance.now(),t.count++;n=B.program(B.vert,B.frag,v);k.useProgram(n.program);ga.setVAO(null);J=n.id;(Q=sa[J])||(Q=sa[J]=x(n));Q.call(this,a);ga.setVAO(null);e.center=q;e.distance=p;e.eye=z;e.phi=u;e.projection=h;e.theta=la;e.up=A;e.view=L;r&&(t.cpuTime+=performance.now()-y)},scope:function(a,b,c){var d,g,k,m,l,f,q,y,n,v,w,p,z,B,D,H,x,E,I;d=
e.center;g=e.distance;k=e.eye;m=e.phi;l=e.projection;f=A.call(this,e,a,c);q=e.theta;y=e.up;n=e.view;e.center=F;e.distance=2.302585092994046;e.eye=T;e.phi=0;e.projection=f;e.theta=0;e.up=h;e.view=r;if(f=C.profile)v=performance.now(),t.count++;w=e.center;p=u[1];u[1]=w;z=e.distance;w=u[2];u[2]=z;B=e.eye;z=u[3];u[3]=B;D=e.phi;B=u[4];u[4]=D;H=e.projection;D=u[5];u[5]=H;x=e.theta;H=u[6];u[6]=x;E=e.up;x=u[7];u[7]=E;E=e.view;I=u[8];u[8]=E;b(e,a,c);e.center=d;e.distance=g;e.eye=k;e.phi=m;e.projection=l;e.theta=
q;e.up=y;e.view=n;f&&(t.cpuTime+=performance.now()-v);u[1]=p;u[2]=w;u[3]=z;u[4]=B;u[5]=D;u[6]=H;u[7]=x;u[8]=I},batch:function(a,b){var g,l,f,z,u,h,r,x,y,n,J,A,F;g=e.center;l=e.distance;f=e.eye;z=e.phi;u=e.projection;h=Q.call(this,e,a,0);r=e.theta;x=e.up;y=e.view;e.center=oa;e.distance=2.302585092994046;e.eye=p;e.phi=0;e.projection=h;e.theta=0;e.up=q;e.view=L;h=U.next;h!==U.cur&&(h?k.bindFramebuffer(36160,h.framebuffer):k.bindFramebuffer(36160,null),U.cur=h);if(C.dirty){h=Z.dither;h!==C.dither&&(h?
k.enable(3024):k.disable(3024),C.dither=h);h=Z.blend_enable;h!==C.blend_enable&&(h?k.enable(3042):k.disable(3042),C.blend_enable=h);h=D[0];J=D[1];A=D[2];F=D[3];if(h!==E[0]||J!==E[1]||A!==E[2]||F!==E[3])k.blendColor(h,J,A,F),E[0]=h,E[1]=J,E[2]=A,E[3]=F;h=d[0];J=d[1];if(h!==R[0]||J!==R[1])k.blendEquationSeparate(h,J),R[0]=h,R[1]=J;h=c[0];J=c[1];A=c[2];F=c[3];if(h!==ia[0]||J!==ia[1]||A!==ia[2]||F!==ia[3])k.blendFuncSeparate(h,J,A,F),ia[0]=h,ia[1]=J,ia[2]=A,ia[3]=F;h=Z.depth_enable;h!==C.depth_enable&&
(h?k.enable(2929):k.disable(2929),C.depth_enable=h);h=Z.depth_func;h!==C.depth_func&&(k.depthFunc(h),C.depth_func=h);h=Ba[0];J=Ba[1];if(h!==W[0]||J!==W[1])k.depthRange(h,J),W[0]=h,W[1]=J;h=Z.depth_mask;h!==C.depth_mask&&(k.depthMask(h),C.depth_mask=h);h=K[0];J=K[1];A=K[2];F=K[3];if(h!==ha[0]||J!==ha[1]||A!==ha[2]||F!==ha[3])k.colorMask(h,J,A,F),ha[0]=h,ha[1]=J,ha[2]=A,ha[3]=F;h=Z.cull_enable;h!==C.cull_enable&&(h?k.enable(2884):k.disable(2884),C.cull_enable=h);h=Z.cull_face;h!==C.cull_face&&(k.cullFace(h),
C.cull_face=h);h=Z.frontFace;h!==C.frontFace&&(k.frontFace(h),C.frontFace=h);h=Z.lineWidth;h!==C.lineWidth&&(k.lineWidth(h),C.lineWidth=h);h=Z.polygonOffset_enable;h!==C.polygonOffset_enable&&(h?k.enable(32823):k.disable(32823),C.polygonOffset_enable=h);h=ba[0];J=ba[1];if(h!==S[0]||J!==S[1])k.polygonOffset(h,J),S[0]=h,S[1]=J;h=Z.sample_alpha;h!==C.sample_alpha&&(h?k.enable(32926):k.disable(32926),C.sample_alpha=h);h=Z.sample_enable;h!==C.sample_enable&&(h?k.enable(32928):k.disable(32928),C.sample_enable=
h);h=M[0];J=M[1];if(h!==N[0]||J!==N[1])k.sampleCoverage(h,J),N[0]=h,N[1]=J;h=Z.stencil_enable;h!==C.stencil_enable&&(h?k.enable(2960):k.disable(2960),C.stencil_enable=h);h=Z.stencil_mask;h!==C.stencil_mask&&(k.stencilMask(h),C.stencil_mask=h);h=P[0];J=P[1];A=P[2];if(h!==xa[0]||J!==xa[1]||A!==xa[2])k.stencilFunc(h,J,A),xa[0]=h,xa[1]=J,xa[2]=A;h=I[0];J=I[1];A=I[2];F=I[3];if(h!==aa[0]||J!==aa[1]||A!==aa[2]||F!==aa[3])k.stencilOpSeparate(h,J,A,F),aa[0]=h,aa[1]=J,aa[2]=A,aa[3]=F;h=ra[0];J=ra[1];A=ra[2];
F=ra[3];if(h!==w[0]||J!==w[1]||A!==w[2]||F!==w[3])k.stencilOpSeparate(h,J,A,F),w[0]=h,w[1]=J,w[2]=A,w[3]=F;h=Z.scissor_enable;h!==C.scissor_enable&&(h?k.enable(3089):k.disable(3089),C.scissor_enable=h);h=m[0];J=m[1];A=m[2];F=m[3];if(h!==O[0]||J!==O[1]||A!==O[2]||F!==O[3])k.scissor(h,J,A,F),O[0]=h,O[1]=J,O[2]=A,O[3]=F;h=V[0];J=V[1];A=V[2];F=V[3];if(h!==na[0]||J!==na[1]||A!==na[2]||F!==na[3])k.viewport(h,J,A,F),na[0]=h,na[1]=J,na[2]=A,na[3]=F;C.dirty=!1}if(h=C.profile)n=performance.now(),t.count+=b;
J=B.program(B.vert,B.frag,v);k.useProgram(J.program);ga.setVAO(null);A=J.id;(F=Ca[A])||(F=Ca[A]=ma(J));F.call(this,a,b);ga.setVAO(null);e.center=g;e.distance=l;e.eye=f;e.phi=z;e.projection=u;e.theta=r;e.up=x;e.view=y;h&&(t.cpuTime+=performance.now()-n)}}},"$27,position,projection,tex,uv,view":function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U,k,Z,B,u,ga,D,E,d,R){var c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la,dc,Ya,y,n,J,va,Fa,Yb,Gb;c=a.attributes;ia=a.context;
K=a.current;ha=a.draw;Ba=a.framebuffer;W=a.gl;ba=a.isArrayLike;S=a.next;M=a.shader;N=a.uniforms;m=a.vao;O=S.blend_color;P=K.blend_color;xa=S.blend_equation;ra=K.blend_equation;w=S.blend_func;I=K.blend_func;aa=S.colorMask;V=K.colorMask;na=S.depth_range;sa=K.depth_range;Ca=S.polygonOffset_offset;ya=K.polygonOffset_offset;ea=S.sample_coverage;Da=K.sample_coverage;ja=S.scissor_box;qa=K.scissor_box;Aa=S.stencil_func;Qa=K.stencil_func;la=S.stencil_opBack;dc=K.stencil_opBack;Ya=S.stencil_opFront;y=K.stencil_opFront;
n=S.viewport;J=K.viewport;va=new Float32Array(16);Fa=new Float32Array(16);Yb=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(a){var e,k,q,p;e=Ba.next;e!==Ba.cur&&(e?W.bindFramebuffer(36160,e.framebuffer):W.bindFramebuffer(36160,null),Ba.cur=e);if(K.dirty){var u;e=S.dither;e!==K.dither&&(e?W.enable(3024):W.disable(3024),K.dither=e);e=S.blend_enable;e!==K.blend_enable&&(e?W.enable(3042):W.disable(3042),K.blend_enable=e);e=O[0];q=O[1];p=O[2];u=O[3];if(e!==P[0]||q!==P[1]||p!==P[2]||
u!==P[3])W.blendColor(e,q,p,u),P[0]=e,P[1]=q,P[2]=p,P[3]=u;e=xa[0];q=xa[1];if(e!==ra[0]||q!==ra[1])W.blendEquationSeparate(e,q),ra[0]=e,ra[1]=q;e=w[0];q=w[1];p=w[2];u=w[3];if(e!==I[0]||q!==I[1]||p!==I[2]||u!==I[3])W.blendFuncSeparate(e,q,p,u),I[0]=e,I[1]=q,I[2]=p,I[3]=u;e=S.depth_enable;e!==K.depth_enable&&(e?W.enable(2929):W.disable(2929),K.depth_enable=e);e=S.depth_func;e!==K.depth_func&&(W.depthFunc(e),K.depth_func=e);e=na[0];q=na[1];if(e!==sa[0]||q!==sa[1])W.depthRange(e,q),sa[0]=e,sa[1]=q;e=
S.depth_mask;e!==K.depth_mask&&(W.depthMask(e),K.depth_mask=e);e=aa[0];q=aa[1];p=aa[2];u=aa[3];if(e!==V[0]||q!==V[1]||p!==V[2]||u!==V[3])W.colorMask(e,q,p,u),V[0]=e,V[1]=q,V[2]=p,V[3]=u;e=S.cull_enable;e!==K.cull_enable&&(e?W.enable(2884):W.disable(2884),K.cull_enable=e);e=S.cull_face;e!==K.cull_face&&(W.cullFace(e),K.cull_face=e);e=S.frontFace;e!==K.frontFace&&(W.frontFace(e),K.frontFace=e);e=S.lineWidth;e!==K.lineWidth&&(W.lineWidth(e),K.lineWidth=e);e=S.polygonOffset_enable;e!==K.polygonOffset_enable&&
(e?W.enable(32823):W.disable(32823),K.polygonOffset_enable=e);e=Ca[0];q=Ca[1];if(e!==ya[0]||q!==ya[1])W.polygonOffset(e,q),ya[0]=e,ya[1]=q;e=S.sample_alpha;e!==K.sample_alpha&&(e?W.enable(32926):W.disable(32926),K.sample_alpha=e);e=S.sample_enable;e!==K.sample_enable&&(e?W.enable(32928):W.disable(32928),K.sample_enable=e);e=ea[0];q=ea[1];if(e!==Da[0]||q!==Da[1])W.sampleCoverage(e,q),Da[0]=e,Da[1]=q;e=S.stencil_enable;e!==K.stencil_enable&&(e?W.enable(2960):W.disable(2960),K.stencil_enable=e);e=S.stencil_mask;
e!==K.stencil_mask&&(W.stencilMask(e),K.stencil_mask=e);e=Aa[0];q=Aa[1];p=Aa[2];if(e!==Qa[0]||q!==Qa[1]||p!==Qa[2])W.stencilFunc(e,q,p),Qa[0]=e,Qa[1]=q,Qa[2]=p;e=Ya[0];q=Ya[1];p=Ya[2];u=Ya[3];if(e!==y[0]||q!==y[1]||p!==y[2]||u!==y[3])W.stencilOpSeparate(e,q,p,u),y[0]=e,y[1]=q,y[2]=p,y[3]=u;e=la[0];q=la[1];p=la[2];u=la[3];if(e!==dc[0]||q!==dc[1]||p!==dc[2]||u!==dc[3])W.stencilOpSeparate(e,q,p,u),dc[0]=e,dc[1]=q,dc[2]=p,dc[3]=u;e=S.scissor_enable;e!==K.scissor_enable&&(e?W.enable(3089):W.disable(3089),
K.scissor_enable=e);e=ja[0];q=ja[1];p=ja[2];u=ja[3];if(e!==qa[0]||q!==qa[1]||p!==qa[2]||u!==qa[3])W.scissor(e,q,p,u),qa[0]=e,qa[1]=q,qa[2]=p,qa[3]=u;e=n[0];q=n[1];p=n[2];u=n[3];if(e!==J[0]||q!==J[1]||p!==J[2]||u!==J[3])W.viewport(e,q,p,u),J[0]=e,J[1]=q,J[2]=p,J[3]=u;K.dirty=!1}if(e=K.profile)k=performance.now(),t.count++;W.useProgram(f.program);m.setVAO(null);q=ga.location;p=c[q];p.buffer||W.enableVertexAttribArray(q);if(p.type!==g.dtype||3!==p.size||p.buffer!==g||!1!==p.normalized||0!==p.offset||
0!==p.stride)W.bindBuffer(34962,g.buffer),W.vertexAttribPointer(q,3,g.dtype,!1,0,0),p.type=g.dtype,p.size=3,p.buffer=g,p.normalized=!1,p.offset=0,p.stride=0;q=d.location;p=c[q];p.buffer||W.enableVertexAttribArray(q);if(p.type!==l.dtype||2!==p.size||p.buffer!==l||!1!==p.normalized||0!==p.offset||0!==p.stride)W.bindBuffer(34962,l.buffer),W.vertexAttribPointer(q,2,l.dtype,!1,0,0),p.type=l.dtype,p.size=2,p.buffer=l,p.normalized=!1,p.offset=0,p.stride=0;q=b.call(this,ia,a,0);ba(q)&&16===q.length||z.commandRaise(G,
v);W.uniformMatrix4fv(D.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(va[0]=q[0],va[1]=q[1],va[2]=q[2],va[3]=q[3],va[4]=q[4],va[5]=q[5],va[6]=q[6],va[7]=q[7],va[8]=q[8],va[9]=q[9],va[10]=q[10],va[11]=q[11],va[12]=q[12],va[13]=q[13],va[14]=q[14],va[15]=q[15],va));q=x.call(this,ia,a,0);ba(q)&&16===q.length||z.commandRaise(F,v);W.uniformMatrix4fv(R.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(Fa[0]=q[0],Fa[1]=q[1],Fa[2]=q[2],Fa[3]=q[3],Fa[4]=q[4],Fa[5]=q[5],Fa[6]=q[6],Fa[7]=
q[7],Fa[8]=q[8],Fa[9]=q[9],Fa[10]=q[10],Fa[11]=q[11],Fa[12]=q[12],Fa[13]=q[13],Fa[14]=q[14],Fa[15]=q[15],Fa));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||z.commandRaise(T,v);a=a._texture;W.uniform1i(E.location,a.bind());A&&W.bindBuffer(34963,A.buffer.buffer);q=A.primType;p=A.vertCount-0;0<=p||z.commandRaise(h,v);p&&(W.drawElements(q,p,A.type,0<<(A.type-5121>>1)),m.setVAO(null),e&&(t.cpuTime+=performance.now()-k),a.unbind())},scope:function(a,
b,c){var d,e,k,m,n,f,y,w,h,u,J,B,C,D,x,E,A,I,ea,V,O,F,P,R,S,G,la,T,dc,ya,sa,U,da,W,ja;if(d=K.profile)e=performance.now(),t.count++;k=ha.elements;ha.elements=r;m=ha.offset;ha.offset=0;n=r.vertCount-0;0<=n||z.commandRaise(oa,v);f=ha.count;ha.count=n;y=r.primType;n=ha.primitive;ha.primitive=y;w=p.call(this,ia,a,c);y=N[3];N[3]=w;h=a.texture;w=N[5];N[5]=h;u=Q.call(this,ia,a,c);h=N[4];N[4]=u;u=q.buffer;q.buffer=g;J=q.divisor;q.divisor=0;B=q.normalized;q.normalized=!1;C=q.offset;q.offset=0;D=q.size;q.size=
0;x=q.state;q.state=1;E=q.stride;q.stride=0;A=q.type;q.type=g.dtype;I=q.w;q.w=0;ea=q.x;q.x=0;V=q.y;q.y=0;O=q.z;q.z=0;F=L.buffer;L.buffer=l;P=L.divisor;L.divisor=0;R=L.normalized;L.normalized=!1;S=L.offset;L.offset=0;G=L.size;L.size=0;la=L.state;L.state=1;T=L.stride;L.stride=0;dc=L.type;L.type=l.dtype;ya=L.w;L.w=0;sa=L.x;L.x=0;U=L.y;L.y=0;da=L.z;L.z=0;W=M.vert;M.vert=2;ja=M.frag;M.frag=1;b(ia,a,c);d&&(t.cpuTime+=performance.now()-e);ha.elements=k;ha.offset=m;ha.count=f;ha.primitive=n;N[3]=y;N[5]=w;
N[4]=h;q.buffer=u;q.divisor=J;q.normalized=B;q.offset=C;q.size=D;q.state=x;q.stride=E;q.type=A;q.w=I;q.x=ea;q.y=V;q.z=O;L.buffer=F;L.divisor=P;L.normalized=R;L.offset=S;L.size=G;L.state=la;L.stride=T;L.type=dc;L.w=ya;L.x=sa;L.y=U;L.z=da;M.vert=W;M.frag=ja},batch:function(a,b){var f,q,p,h;f=Ba.next;f!==Ba.cur&&(f?W.bindFramebuffer(36160,f.framebuffer):W.bindFramebuffer(36160,null),Ba.cur=f);if(K.dirty){var r,x,A;f=S.dither;f!==K.dither&&(f?W.enable(3024):W.disable(3024),K.dither=f);f=S.blend_enable;
f!==K.blend_enable&&(f?W.enable(3042):W.disable(3042),K.blend_enable=f);f=O[0];r=O[1];x=O[2];A=O[3];if(f!==P[0]||r!==P[1]||x!==P[2]||A!==P[3])W.blendColor(f,r,x,A),P[0]=f,P[1]=r,P[2]=x,P[3]=A;f=xa[0];r=xa[1];if(f!==ra[0]||r!==ra[1])W.blendEquationSeparate(f,r),ra[0]=f,ra[1]=r;f=w[0];r=w[1];x=w[2];A=w[3];if(f!==I[0]||r!==I[1]||x!==I[2]||A!==I[3])W.blendFuncSeparate(f,r,x,A),I[0]=f,I[1]=r,I[2]=x,I[3]=A;f=S.depth_enable;f!==K.depth_enable&&(f?W.enable(2929):W.disable(2929),K.depth_enable=f);f=S.depth_func;
f!==K.depth_func&&(W.depthFunc(f),K.depth_func=f);f=na[0];r=na[1];if(f!==sa[0]||r!==sa[1])W.depthRange(f,r),sa[0]=f,sa[1]=r;f=S.depth_mask;f!==K.depth_mask&&(W.depthMask(f),K.depth_mask=f);f=aa[0];r=aa[1];x=aa[2];A=aa[3];if(f!==V[0]||r!==V[1]||x!==V[2]||A!==V[3])W.colorMask(f,r,x,A),V[0]=f,V[1]=r,V[2]=x,V[3]=A;f=S.cull_enable;f!==K.cull_enable&&(f?W.enable(2884):W.disable(2884),K.cull_enable=f);f=S.cull_face;f!==K.cull_face&&(W.cullFace(f),K.cull_face=f);f=S.frontFace;f!==K.frontFace&&(W.frontFace(f),
K.frontFace=f);f=S.lineWidth;f!==K.lineWidth&&(W.lineWidth(f),K.lineWidth=f);f=S.polygonOffset_enable;f!==K.polygonOffset_enable&&(f?W.enable(32823):W.disable(32823),K.polygonOffset_enable=f);f=Ca[0];r=Ca[1];if(f!==ya[0]||r!==ya[1])W.polygonOffset(f,r),ya[0]=f,ya[1]=r;f=S.sample_alpha;f!==K.sample_alpha&&(f?W.enable(32926):W.disable(32926),K.sample_alpha=f);f=S.sample_enable;f!==K.sample_enable&&(f?W.enable(32928):W.disable(32928),K.sample_enable=f);f=ea[0];r=ea[1];if(f!==Da[0]||r!==Da[1])W.sampleCoverage(f,
r),Da[0]=f,Da[1]=r;f=S.stencil_enable;f!==K.stencil_enable&&(f?W.enable(2960):W.disable(2960),K.stencil_enable=f);f=S.stencil_mask;f!==K.stencil_mask&&(W.stencilMask(f),K.stencil_mask=f);f=Aa[0];r=Aa[1];x=Aa[2];if(f!==Qa[0]||r!==Qa[1]||x!==Qa[2])W.stencilFunc(f,r,x),Qa[0]=f,Qa[1]=r,Qa[2]=x;f=Ya[0];r=Ya[1];x=Ya[2];A=Ya[3];if(f!==y[0]||r!==y[1]||x!==y[2]||A!==y[3])W.stencilOpSeparate(f,r,x,A),y[0]=f,y[1]=r,y[2]=x,y[3]=A;f=la[0];r=la[1];x=la[2];A=la[3];if(f!==dc[0]||r!==dc[1]||x!==dc[2]||A!==dc[3])W.stencilOpSeparate(f,
r,x,A),dc[0]=f,dc[1]=r,dc[2]=x,dc[3]=A;f=S.scissor_enable;f!==K.scissor_enable&&(f?W.enable(3089):W.disable(3089),K.scissor_enable=f);f=ja[0];r=ja[1];x=ja[2];A=ja[3];if(f!==qa[0]||r!==qa[1]||x!==qa[2]||A!==qa[3])W.scissor(f,r,x,A),qa[0]=f,qa[1]=r,qa[2]=x,qa[3]=A;f=n[0];r=n[1];x=n[2];A=n[3];if(f!==J[0]||r!==J[1]||x!==J[2]||A!==J[3])W.viewport(f,r,x,A),J[0]=f,J[1]=r,J[2]=x,J[3]=A;K.dirty=!1}if(f=K.profile)q=performance.now(),t.count+=b;W.useProgram(ma.program);m.setVAO(null);r=ga.location;x=c[r];x.buffer||
W.enableVertexAttribArray(r);if(x.type!==g.dtype||3!==x.size||x.buffer!==g||!1!==x.normalized||0!==x.offset||0!==x.stride)W.bindBuffer(34962,g.buffer),W.vertexAttribPointer(r,3,g.dtype,!1,0,0),x.type=g.dtype,x.size=3,x.buffer=g,x.normalized=!1,x.offset=0,x.stride=0;r=d.location;x=c[r];x.buffer||W.enableVertexAttribArray(r);if(x.type!==l.dtype||2!==x.size||x.buffer!==l||!1!==x.normalized||0!==x.offset||0!==x.stride)W.bindBuffer(34962,l.buffer),W.vertexAttribPointer(r,2,l.dtype,!1,0,0),x.type=l.dtype,
x.size=2,x.buffer=l,x.normalized=!1,x.offset=0,x.stride=0;r=e.call(this,ia,h,p);ba(r)&&16===r.length||z.commandRaise(C,v);W.uniformMatrix4fv(D.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Yb[0]=r[0],Yb[1]=r[1],Yb[2]=r[2],Yb[3]=r[3],Yb[4]=r[4],Yb[5]=r[5],Yb[6]=r[6],Yb[7]=r[7],Yb[8]=r[8],Yb[9]=r[9],Yb[10]=r[10],Yb[11]=r[11],Yb[12]=r[12],Yb[13]=r[13],Yb[14]=r[14],Yb[15]=r[15],Yb));p=U.call(this,ia,h,p);ba(p)&&16===p.length||z.commandRaise(k,v);W.uniformMatrix4fv(R.location,!1,Array.isArray(p)||
p instanceof Float32Array?p:(Gb[0]=p[0],Gb[1]=p[1],Gb[2]=p[2],Gb[3]=p[3],Gb[4]=p[4],Gb[5]=p[5],Gb[6]=p[6],Gb[7]=p[7],Gb[8]=p[8],Gb[9]=p[9],Gb[10]=p[10],Gb[11]=p[11],Gb[12]=p[12],Gb[13]=p[13],Gb[14]=p[14],Gb[15]=p[15],Gb));B&&W.bindBuffer(34963,B.buffer.buffer);r=B.primType;x=B.vertCount-0;0<=x||z.commandRaise(u,v);for(p=0;p<b;++p)h=a[p],(h=h.texture)&&"framebuffer"===h._reglType&&(h=h.color[0]),"function"===typeof h&&"texture2d"===h._reglType||z.commandRaise(Z,v),h=h._texture,W.uniform1i(E.location,
h.bind()),x&&(W.drawElements(r,x,B.type,0<<(B.type-5121>>1)),h.unbind());m.setVAO(null);f&&(t.cpuTime+=performance.now()-q)}}},"$19,normal,position,projection,view":function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,oa,p,Q,q,L,ma,e,C,U){var k,Z,B,u,ga,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa,Qa,la;k=a.attributes;Z=a.context;B=a.current;u=a.draw;ga=a.framebuffer;D=a.gl;E=a.isArrayLike;d=a.next;R=a.shader;c=a.uniforms;ia=a.vao;K=d.blend_color;ha=B.blend_color;Ba=d.blend_equation;
W=B.blend_equation;ba=d.blend_func;S=B.blend_func;M=d.colorMask;N=B.colorMask;m=d.depth_range;O=B.depth_range;P=d.polygonOffset_offset;xa=B.polygonOffset_offset;ra=d.sample_coverage;w=B.sample_coverage;I=d.scissor_box;aa=B.scissor_box;V=d.stencil_func;na=B.stencil_func;sa=d.stencil_opBack;Ca=B.stencil_opBack;ya=d.stencil_opFront;ea=B.stencil_opFront;Da=d.viewport;ja=B.viewport;qa=new Float32Array(16);Aa=new Float32Array(16);Qa=new Float32Array(16);la=new Float32Array(16);return{draw:function(a){var q,
y,n;a=ga.next;a!==ga.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),ga.cur=a);if(B.dirty){var p;a=d.dither;a!==B.dither&&(a?D.enable(3024):D.disable(3024),B.dither=a);a=d.blend_enable;a!==B.blend_enable&&(a?D.enable(3042):D.disable(3042),B.blend_enable=a);a=K[0];y=K[1];n=K[2];p=K[3];if(a!==ha[0]||y!==ha[1]||n!==ha[2]||p!==ha[3])D.blendColor(a,y,n,p),ha[0]=a,ha[1]=y,ha[2]=n,ha[3]=p;a=Ba[0];y=Ba[1];if(a!==W[0]||y!==W[1])D.blendEquationSeparate(a,y),W[0]=a,W[1]=y;a=ba[0];
y=ba[1];n=ba[2];p=ba[3];if(a!==S[0]||y!==S[1]||n!==S[2]||p!==S[3])D.blendFuncSeparate(a,y,n,p),S[0]=a,S[1]=y,S[2]=n,S[3]=p;a=d.depth_enable;a!==B.depth_enable&&(a?D.enable(2929):D.disable(2929),B.depth_enable=a);a=d.depth_func;a!==B.depth_func&&(D.depthFunc(a),B.depth_func=a);a=m[0];y=m[1];if(a!==O[0]||y!==O[1])D.depthRange(a,y),O[0]=a,O[1]=y;a=d.depth_mask;a!==B.depth_mask&&(D.depthMask(a),B.depth_mask=a);a=M[0];y=M[1];n=M[2];p=M[3];if(a!==N[0]||y!==N[1]||n!==N[2]||p!==N[3])D.colorMask(a,y,n,p),
N[0]=a,N[1]=y,N[2]=n,N[3]=p;a=d.cull_enable;a!==B.cull_enable&&(a?D.enable(2884):D.disable(2884),B.cull_enable=a);a=d.cull_face;a!==B.cull_face&&(D.cullFace(a),B.cull_face=a);a=d.frontFace;a!==B.frontFace&&(D.frontFace(a),B.frontFace=a);a=d.lineWidth;a!==B.lineWidth&&(D.lineWidth(a),B.lineWidth=a);a=d.polygonOffset_enable;a!==B.polygonOffset_enable&&(a?D.enable(32823):D.disable(32823),B.polygonOffset_enable=a);a=P[0];y=P[1];if(a!==xa[0]||y!==xa[1])D.polygonOffset(a,y),xa[0]=a,xa[1]=y;a=d.sample_alpha;
a!==B.sample_alpha&&(a?D.enable(32926):D.disable(32926),B.sample_alpha=a);a=d.sample_enable;a!==B.sample_enable&&(a?D.enable(32928):D.disable(32928),B.sample_enable=a);a=ra[0];y=ra[1];if(a!==w[0]||y!==w[1])D.sampleCoverage(a,y),w[0]=a,w[1]=y;a=d.stencil_enable;a!==B.stencil_enable&&(a?D.enable(2960):D.disable(2960),B.stencil_enable=a);a=d.stencil_mask;a!==B.stencil_mask&&(D.stencilMask(a),B.stencil_mask=a);a=V[0];y=V[1];n=V[2];if(a!==na[0]||y!==na[1]||n!==na[2])D.stencilFunc(a,y,n),na[0]=a,na[1]=
y,na[2]=n;a=ya[0];y=ya[1];n=ya[2];p=ya[3];if(a!==ea[0]||y!==ea[1]||n!==ea[2]||p!==ea[3])D.stencilOpSeparate(a,y,n,p),ea[0]=a,ea[1]=y,ea[2]=n,ea[3]=p;a=sa[0];y=sa[1];n=sa[2];p=sa[3];if(a!==Ca[0]||y!==Ca[1]||n!==Ca[2]||p!==Ca[3])D.stencilOpSeparate(a,y,n,p),Ca[0]=a,Ca[1]=y,Ca[2]=n,Ca[3]=p;a=d.scissor_enable;a!==B.scissor_enable&&(a?D.enable(3089):D.disable(3089),B.scissor_enable=a);a=I[0];y=I[1];n=I[2];p=I[3];if(a!==aa[0]||y!==aa[1]||n!==aa[2]||p!==aa[3])D.scissor(a,y,n,p),aa[0]=a,aa[1]=y,aa[2]=n,aa[3]=
p;a=Da[0];y=Da[1];n=Da[2];p=Da[3];if(a!==ja[0]||y!==ja[1]||n!==ja[2]||p!==ja[3])D.viewport(a,y,n,p),ja[0]=a,ja[1]=y,ja[2]=n,ja[3]=p;B.dirty=!1}if(a=B.profile)q=performance.now(),t.count++;D.useProgram(f.program);ia.setVAO(null);y=e.location;n=k[y];n.buffer||D.enableVertexAttribArray(y);if(n.type!==g.dtype||3!==n.size||n.buffer!==g||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,g.buffer),D.vertexAttribPointer(y,3,g.dtype,!1,0,0),n.type=g.dtype,n.size=3,n.buffer=g,n.normalized=!1,
n.offset=0,n.stride=0;y=ma.location;n=k[y];n.buffer||D.enableVertexAttribArray(y);if(n.type!==l.dtype||3!==n.size||n.buffer!==l||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(y,3,l.dtype,!1,0,0),n.type=l.dtype,n.size=3,n.buffer=l,n.normalized=!1,n.offset=0,n.stride=0;y=c[5];E(y)&&16===y.length||z.commandRaise(b,v);D.uniformMatrix4fv(C.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(qa[0]=y[0],qa[1]=y[1],qa[2]=y[2],qa[3]=y[3],qa[4]=y[4],
qa[5]=y[5],qa[6]=y[6],qa[7]=y[7],qa[8]=y[8],qa[9]=y[9],qa[10]=y[10],qa[11]=y[11],qa[12]=y[12],qa[13]=y[13],qa[14]=y[14],qa[15]=y[15],qa));y=c[8];E(y)&&16===y.length||z.commandRaise(G,v);D.uniformMatrix4fv(U.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(Aa[0]=y[0],Aa[1]=y[1],Aa[2]=y[2],Aa[3]=y[3],Aa[4]=y[4],Aa[5]=y[5],Aa[6]=y[6],Aa[7]=y[7],Aa[8]=y[8],Aa[9]=y[9],Aa[10]=y[10],Aa[11]=y[11],Aa[12]=y[12],Aa[13]=y[13],Aa[14]=y[14],Aa[15]=y[15],Aa));x&&D.bindBuffer(34963,x.buffer.buffer);y=x.primType;
n=x.vertCount-0;0<=n||z.commandRaise(F,v);n&&(D.drawElements(y,n,x.type,0<<(x.type-5121>>1)),ia.setVAO(null),a&&(t.cpuTime+=performance.now()-q))},scope:function(a,b,c){var d,e,f,k,m,q,p,w,x,C,D,E,I,K,ea,L,V,M,N,O,F,P,Q,S,G,la,ya,sa,U,da,W,ja;if(d=B.profile)e=performance.now(),t.count++;f=u.elements;u.elements=T;k=u.offset;u.offset=0;m=T.vertCount-0;0<=m||z.commandRaise(A,v);q=u.count;u.count=m;p=T.primType;m=u.primitive;u.primitive=p;p=h.buffer;h.buffer=l;w=h.divisor;h.divisor=0;x=h.normalized;h.normalized=
!1;C=h.offset;h.offset=0;D=h.size;h.size=0;E=h.state;h.state=1;I=h.stride;h.stride=0;K=h.type;h.type=l.dtype;ea=h.w;h.w=0;L=h.x;h.x=0;V=h.y;h.y=0;M=h.z;h.z=0;N=r.buffer;r.buffer=g;O=r.divisor;r.divisor=0;F=r.normalized;r.normalized=!1;P=r.offset;r.offset=0;Q=r.size;r.size=0;S=r.state;r.state=1;G=r.stride;r.stride=0;la=r.type;r.type=g.dtype;ya=r.w;r.w=0;sa=r.x;r.x=0;U=r.y;r.y=0;da=r.z;r.z=0;W=R.vert;R.vert=10;ja=R.frag;R.frag=9;b(Z,a,c);d&&(t.cpuTime+=performance.now()-e);u.elements=f;u.offset=k;u.count=
q;u.primitive=m;h.buffer=p;h.divisor=w;h.normalized=x;h.offset=C;h.size=D;h.state=E;h.stride=I;h.type=K;h.w=ea;h.x=L;h.y=V;h.z=M;r.buffer=N;r.divisor=O;r.normalized=F;r.offset=P;r.size=Q;r.state=S;r.stride=G;r.type=la;r.w=ya;r.x=sa;r.y=U;r.z=da;R.vert=W;R.frag=ja},batch:function(a,b){var f,n,h;f=ga.next;f!==ga.cur&&(f?D.bindFramebuffer(36160,f.framebuffer):D.bindFramebuffer(36160,null),ga.cur=f);if(B.dirty){var u,r;f=d.dither;f!==B.dither&&(f?D.enable(3024):D.disable(3024),B.dither=f);f=d.blend_enable;
f!==B.blend_enable&&(f?D.enable(3042):D.disable(3042),B.blend_enable=f);f=K[0];h=K[1];u=K[2];r=K[3];if(f!==ha[0]||h!==ha[1]||u!==ha[2]||r!==ha[3])D.blendColor(f,h,u,r),ha[0]=f,ha[1]=h,ha[2]=u,ha[3]=r;f=Ba[0];h=Ba[1];if(f!==W[0]||h!==W[1])D.blendEquationSeparate(f,h),W[0]=f,W[1]=h;f=ba[0];h=ba[1];u=ba[2];r=ba[3];if(f!==S[0]||h!==S[1]||u!==S[2]||r!==S[3])D.blendFuncSeparate(f,h,u,r),S[0]=f,S[1]=h,S[2]=u,S[3]=r;f=d.depth_enable;f!==B.depth_enable&&(f?D.enable(2929):D.disable(2929),B.depth_enable=f);
f=d.depth_func;f!==B.depth_func&&(D.depthFunc(f),B.depth_func=f);f=m[0];h=m[1];if(f!==O[0]||h!==O[1])D.depthRange(f,h),O[0]=f,O[1]=h;f=d.depth_mask;f!==B.depth_mask&&(D.depthMask(f),B.depth_mask=f);f=M[0];h=M[1];u=M[2];r=M[3];if(f!==N[0]||h!==N[1]||u!==N[2]||r!==N[3])D.colorMask(f,h,u,r),N[0]=f,N[1]=h,N[2]=u,N[3]=r;f=d.cull_enable;f!==B.cull_enable&&(f?D.enable(2884):D.disable(2884),B.cull_enable=f);f=d.cull_face;f!==B.cull_face&&(D.cullFace(f),B.cull_face=f);f=d.frontFace;f!==B.frontFace&&(D.frontFace(f),
B.frontFace=f);f=d.lineWidth;f!==B.lineWidth&&(D.lineWidth(f),B.lineWidth=f);f=d.polygonOffset_enable;f!==B.polygonOffset_enable&&(f?D.enable(32823):D.disable(32823),B.polygonOffset_enable=f);f=P[0];h=P[1];if(f!==xa[0]||h!==xa[1])D.polygonOffset(f,h),xa[0]=f,xa[1]=h;f=d.sample_alpha;f!==B.sample_alpha&&(f?D.enable(32926):D.disable(32926),B.sample_alpha=f);f=d.sample_enable;f!==B.sample_enable&&(f?D.enable(32928):D.disable(32928),B.sample_enable=f);f=ra[0];h=ra[1];if(f!==w[0]||h!==w[1])D.sampleCoverage(f,
h),w[0]=f,w[1]=h;f=d.stencil_enable;f!==B.stencil_enable&&(f?D.enable(2960):D.disable(2960),B.stencil_enable=f);f=d.stencil_mask;f!==B.stencil_mask&&(D.stencilMask(f),B.stencil_mask=f);f=V[0];h=V[1];u=V[2];if(f!==na[0]||h!==na[1]||u!==na[2])D.stencilFunc(f,h,u),na[0]=f,na[1]=h,na[2]=u;f=ya[0];h=ya[1];u=ya[2];r=ya[3];if(f!==ea[0]||h!==ea[1]||u!==ea[2]||r!==ea[3])D.stencilOpSeparate(f,h,u,r),ea[0]=f,ea[1]=h,ea[2]=u,ea[3]=r;f=sa[0];h=sa[1];u=sa[2];r=sa[3];if(f!==Ca[0]||h!==Ca[1]||u!==Ca[2]||r!==Ca[3])D.stencilOpSeparate(f,
h,u,r),Ca[0]=f,Ca[1]=h,Ca[2]=u,Ca[3]=r;f=d.scissor_enable;f!==B.scissor_enable&&(f?D.enable(3089):D.disable(3089),B.scissor_enable=f);f=I[0];h=I[1];u=I[2];r=I[3];if(f!==aa[0]||h!==aa[1]||u!==aa[2]||r!==aa[3])D.scissor(f,h,u,r),aa[0]=f,aa[1]=h,aa[2]=u,aa[3]=r;f=Da[0];h=Da[1];u=Da[2];r=Da[3];if(f!==ja[0]||h!==ja[1]||u!==ja[2]||r!==ja[3])D.viewport(f,h,u,r),ja[0]=f,ja[1]=h,ja[2]=u,ja[3]=r;B.dirty=!1}if(f=B.profile)n=performance.now(),t.count+=b;D.useProgram(oa.program);ia.setVAO(null);h=e.location;u=
k[h];u.buffer||D.enableVertexAttribArray(h);if(u.type!==g.dtype||3!==u.size||u.buffer!==g||!1!==u.normalized||0!==u.offset||0!==u.stride)D.bindBuffer(34962,g.buffer),D.vertexAttribPointer(h,3,g.dtype,!1,0,0),u.type=g.dtype,u.size=3,u.buffer=g,u.normalized=!1,u.offset=0,u.stride=0;h=ma.location;u=k[h];u.buffer||D.enableVertexAttribArray(h);if(u.type!==l.dtype||3!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(h,3,l.dtype,!1,0,
0),u.type=l.dtype,u.size=3,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;h=c[5];E(h)&&16===h.length||z.commandRaise(p,v);D.uniformMatrix4fv(C.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Qa[0]=h[0],Qa[1]=h[1],Qa[2]=h[2],Qa[3]=h[3],Qa[4]=h[4],Qa[5]=h[5],Qa[6]=h[6],Qa[7]=h[7],Qa[8]=h[8],Qa[9]=h[9],Qa[10]=h[10],Qa[11]=h[11],Qa[12]=h[12],Qa[13]=h[13],Qa[14]=h[14],Qa[15]=h[15],Qa));h=c[8];E(h)&&16===h.length||z.commandRaise(Q,v);D.uniformMatrix4fv(U.location,!1,Array.isArray(h)||h instanceof
Float32Array?h:(la[0]=h[0],la[1]=h[1],la[2]=h[2],la[3]=h[3],la[4]=h[4],la[5]=h[5],la[6]=h[6],la[7]=h[7],la[8]=h[8],la[9]=h[9],la[10]=h[10],la[11]=h[11],la[12]=h[12],la[13]=h[13],la[14]=h[14],la[15]=h[15],la));q&&D.bindBuffer(34963,q.buffer.buffer);u=q.primType;r=q.vertCount-0;0<=r||z.commandRaise(L,v);for(h=0;h<b;++h)r&&D.drawElements(u,r,q.type,0<<(q.type-5121>>1));ia.setVAO(null);f&&(t.cpuTime+=performance.now()-n)}}},"$14,angle,color,position":function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,oa,p,Q){var q,
L,ma,e,C,U,k,Z,B,u,ga,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa;q=a.attributes;L=a.context;ma=a.current;e=a.draw;C=a.elements;U=a.framebuffer;k=a.gl;Z=a.isArrayLike;B=a.next;u=a.shader;ga=a.uniforms;D=a.vao;E=B.blend_color;d=ma.blend_color;R=B.blend_equation;c=ma.blend_equation;ia=B.blend_func;K=ma.blend_func;ha=B.colorMask;Ba=ma.colorMask;W=B.depth_range;ba=ma.depth_range;S=B.polygonOffset_offset;M=ma.polygonOffset_offset;N=B.sample_coverage;m=ma.sample_coverage;O=B.scissor_box;
P=ma.scissor_box;xa=B.stencil_func;ra=ma.stencil_func;w=B.stencil_opBack;I=ma.stencil_opBack;aa=B.stencil_opFront;V=ma.stencil_opFront;na=B.viewport;sa=ma.viewport;return{draw:function(a){var h,u,r,x;h=U.next;h!==U.cur&&(h?k.bindFramebuffer(36160,h.framebuffer):k.bindFramebuffer(36160,null),U.cur=h);if(ma.dirty){var A;h=B.dither;h!==ma.dither&&(h?k.enable(3024):k.disable(3024),ma.dither=h);h=B.blend_enable;h!==ma.blend_enable&&(h?k.enable(3042):k.disable(3042),ma.blend_enable=h);h=E[0];r=E[1];x=E[2];
A=E[3];if(h!==d[0]||r!==d[1]||x!==d[2]||A!==d[3])k.blendColor(h,r,x,A),d[0]=h,d[1]=r,d[2]=x,d[3]=A;h=R[0];r=R[1];if(h!==c[0]||r!==c[1])k.blendEquationSeparate(h,r),c[0]=h,c[1]=r;h=ia[0];r=ia[1];x=ia[2];A=ia[3];if(h!==K[0]||r!==K[1]||x!==K[2]||A!==K[3])k.blendFuncSeparate(h,r,x,A),K[0]=h,K[1]=r,K[2]=x,K[3]=A;h=B.depth_func;h!==ma.depth_func&&(k.depthFunc(h),ma.depth_func=h);h=W[0];r=W[1];if(h!==ba[0]||r!==ba[1])k.depthRange(h,r),ba[0]=h,ba[1]=r;h=B.depth_mask;h!==ma.depth_mask&&(k.depthMask(h),ma.depth_mask=
h);h=ha[0];r=ha[1];x=ha[2];A=ha[3];if(h!==Ba[0]||r!==Ba[1]||x!==Ba[2]||A!==Ba[3])k.colorMask(h,r,x,A),Ba[0]=h,Ba[1]=r,Ba[2]=x,Ba[3]=A;h=B.cull_enable;h!==ma.cull_enable&&(h?k.enable(2884):k.disable(2884),ma.cull_enable=h);h=B.cull_face;h!==ma.cull_face&&(k.cullFace(h),ma.cull_face=h);h=B.frontFace;h!==ma.frontFace&&(k.frontFace(h),ma.frontFace=h);h=B.lineWidth;h!==ma.lineWidth&&(k.lineWidth(h),ma.lineWidth=h);h=B.polygonOffset_enable;h!==ma.polygonOffset_enable&&(h?k.enable(32823):k.disable(32823),
ma.polygonOffset_enable=h);h=S[0];r=S[1];if(h!==M[0]||r!==M[1])k.polygonOffset(h,r),M[0]=h,M[1]=r;h=B.sample_alpha;h!==ma.sample_alpha&&(h?k.enable(32926):k.disable(32926),ma.sample_alpha=h);h=B.sample_enable;h!==ma.sample_enable&&(h?k.enable(32928):k.disable(32928),ma.sample_enable=h);h=N[0];r=N[1];if(h!==m[0]||r!==m[1])k.sampleCoverage(h,r),m[0]=h,m[1]=r;h=B.stencil_enable;h!==ma.stencil_enable&&(h?k.enable(2960):k.disable(2960),ma.stencil_enable=h);h=B.stencil_mask;h!==ma.stencil_mask&&(k.stencilMask(h),
ma.stencil_mask=h);h=xa[0];r=xa[1];x=xa[2];if(h!==ra[0]||r!==ra[1]||x!==ra[2])k.stencilFunc(h,r,x),ra[0]=h,ra[1]=r,ra[2]=x;h=aa[0];r=aa[1];x=aa[2];A=aa[3];if(h!==V[0]||r!==V[1]||x!==V[2]||A!==V[3])k.stencilOpSeparate(h,r,x,A),V[0]=h,V[1]=r,V[2]=x,V[3]=A;h=w[0];r=w[1];x=w[2];A=w[3];if(h!==I[0]||r!==I[1]||x!==I[2]||A!==I[3])k.stencilOpSeparate(h,r,x,A),I[0]=h,I[1]=r,I[2]=x,I[3]=A;h=B.scissor_enable;h!==ma.scissor_enable&&(h?k.enable(3089):k.disable(3089),ma.scissor_enable=h);h=O[0];r=O[1];x=O[2];A=
O[3];if(h!==P[0]||r!==P[1]||x!==P[2]||A!==P[3])k.scissor(h,r,x,A),P[0]=h,P[1]=r,P[2]=x,P[3]=A;h=na[0];r=na[1];x=na[2];A=na[3];if(h!==sa[0]||r!==sa[1]||x!==sa[2]||A!==sa[3])k.viewport(h,r,x,A),sa[0]=h,sa[1]=r,sa[2]=x,sa[3]=A}k.disable(2929);ma.depth_enable=!1;if(h=ma.profile)u=performance.now(),t.count++;k.useProgram(f.program);D.setVAO(null);r=Q.location;x=q[r];x.buffer||k.enableVertexAttribArray(r);if(x.type!==g.dtype||2!==x.size||x.buffer!==g||!1!==x.normalized||0!==x.offset||0!==x.stride)k.bindBuffer(34962,
g.buffer),k.vertexAttribPointer(r,2,g.dtype,!1,0,0),x.type=g.dtype,x.size=2,x.buffer=g,x.normalized=!1,x.offset=0,x.stride=0;r=l.call(this,L,a,0);"number"!==typeof r&&z.commandRaise(b,v);k.uniform1f(oa.location,r);a=a.color;Z(a)&&4===a.length||z.commandRaise(G,v);k.uniform4f(p.location,a[0],a[1],a[2],a[3]);(a=e.elements)?k.bindBuffer(34963,a.buffer.buffer):D.currentVAO&&(a=C.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,a.buffer.buffer);r=e.primitive;x=e.offset;a?k.drawElements(r,3,a.type,
x<<(a.type-5121>>1)):k.drawArrays(r,x,3);ma.dirty=!0;D.setVAO(null);h&&(t.cpuTime+=performance.now()-u)},scope:function(a,b,c){var d,f,k,m,l,h,q,p,v,n,r,w,z,C,A,D,H,E,I,K;d=B.depth_enable;B.depth_enable=!1;if(f=ma.profile)k=performance.now(),t.count++;m=e.count;e.count=3;l=x.call(this,L,a,c);h=ga[3];ga[3]=l;q=a.color;l=ga[4];ga[4]=q;q=F.buffer;F.buffer=g;p=F.divisor;F.divisor=0;v=F.normalized;F.normalized=!1;n=F.offset;F.offset=0;r=F.size;F.size=0;w=F.state;F.state=1;z=F.stride;F.stride=0;C=F.type;
F.type=g.dtype;A=F.w;F.w=0;D=F.x;F.x=0;H=F.y;F.y=0;E=F.z;F.z=0;I=u.vert;u.vert=2;K=u.frag;u.frag=1;ma.dirty=!0;b(L,a,c);B.depth_enable=d;f&&(t.cpuTime+=performance.now()-k);e.count=m;ga[3]=h;ga[4]=l;F.buffer=q;F.divisor=p;F.normalized=v;F.offset=n;F.size=r;F.state=w;F.stride=z;F.type=C;F.w=A;F.x=D;F.y=H;F.z=E;u.vert=I;u.frag=K;ma.dirty=!0},batch:function(a,b){var f,l,u,x;f=U.next;f!==U.cur&&(f?k.bindFramebuffer(36160,f.framebuffer):k.bindFramebuffer(36160,null),U.cur=f);if(ma.dirty){var F,G,la;f=
B.dither;f!==ma.dither&&(f?k.enable(3024):k.disable(3024),ma.dither=f);f=B.blend_enable;f!==ma.blend_enable&&(f?k.enable(3042):k.disable(3042),ma.blend_enable=f);f=E[0];F=E[1];G=E[2];la=E[3];if(f!==d[0]||F!==d[1]||G!==d[2]||la!==d[3])k.blendColor(f,F,G,la),d[0]=f,d[1]=F,d[2]=G,d[3]=la;f=R[0];F=R[1];if(f!==c[0]||F!==c[1])k.blendEquationSeparate(f,F),c[0]=f,c[1]=F;f=ia[0];F=ia[1];G=ia[2];la=ia[3];if(f!==K[0]||F!==K[1]||G!==K[2]||la!==K[3])k.blendFuncSeparate(f,F,G,la),K[0]=f,K[1]=F,K[2]=G,K[3]=la;f=
B.depth_func;f!==ma.depth_func&&(k.depthFunc(f),ma.depth_func=f);f=W[0];F=W[1];if(f!==ba[0]||F!==ba[1])k.depthRange(f,F),ba[0]=f,ba[1]=F;f=B.depth_mask;f!==ma.depth_mask&&(k.depthMask(f),ma.depth_mask=f);f=ha[0];F=ha[1];G=ha[2];la=ha[3];if(f!==Ba[0]||F!==Ba[1]||G!==Ba[2]||la!==Ba[3])k.colorMask(f,F,G,la),Ba[0]=f,Ba[1]=F,Ba[2]=G,Ba[3]=la;f=B.cull_enable;f!==ma.cull_enable&&(f?k.enable(2884):k.disable(2884),ma.cull_enable=f);f=B.cull_face;f!==ma.cull_face&&(k.cullFace(f),ma.cull_face=f);f=B.frontFace;
f!==ma.frontFace&&(k.frontFace(f),ma.frontFace=f);f=B.lineWidth;f!==ma.lineWidth&&(k.lineWidth(f),ma.lineWidth=f);f=B.polygonOffset_enable;f!==ma.polygonOffset_enable&&(f?k.enable(32823):k.disable(32823),ma.polygonOffset_enable=f);f=S[0];F=S[1];if(f!==M[0]||F!==M[1])k.polygonOffset(f,F),M[0]=f,M[1]=F;f=B.sample_alpha;f!==ma.sample_alpha&&(f?k.enable(32926):k.disable(32926),ma.sample_alpha=f);f=B.sample_enable;f!==ma.sample_enable&&(f?k.enable(32928):k.disable(32928),ma.sample_enable=f);f=N[0];F=N[1];
if(f!==m[0]||F!==m[1])k.sampleCoverage(f,F),m[0]=f,m[1]=F;f=B.stencil_enable;f!==ma.stencil_enable&&(f?k.enable(2960):k.disable(2960),ma.stencil_enable=f);f=B.stencil_mask;f!==ma.stencil_mask&&(k.stencilMask(f),ma.stencil_mask=f);f=xa[0];F=xa[1];G=xa[2];if(f!==ra[0]||F!==ra[1]||G!==ra[2])k.stencilFunc(f,F,G),ra[0]=f,ra[1]=F,ra[2]=G;f=aa[0];F=aa[1];G=aa[2];la=aa[3];if(f!==V[0]||F!==V[1]||G!==V[2]||la!==V[3])k.stencilOpSeparate(f,F,G,la),V[0]=f,V[1]=F,V[2]=G,V[3]=la;f=w[0];F=w[1];G=w[2];la=w[3];if(f!==
I[0]||F!==I[1]||G!==I[2]||la!==I[3])k.stencilOpSeparate(f,F,G,la),I[0]=f,I[1]=F,I[2]=G,I[3]=la;f=B.scissor_enable;f!==ma.scissor_enable&&(f?k.enable(3089):k.disable(3089),ma.scissor_enable=f);f=O[0];F=O[1];G=O[2];la=O[3];if(f!==P[0]||F!==P[1]||G!==P[2]||la!==P[3])k.scissor(f,F,G,la),P[0]=f,P[1]=F,P[2]=G,P[3]=la;f=na[0];F=na[1];G=na[2];la=na[3];if(f!==sa[0]||F!==sa[1]||G!==sa[2]||la!==sa[3])k.viewport(f,F,G,la),sa[0]=f,sa[1]=F,sa[2]=G,sa[3]=la}k.disable(2929);ma.depth_enable=!1;if(f=ma.profile)l=performance.now(),
t.count+=b;k.useProgram(T.program);D.setVAO(null);F=Q.location;G=q[F];G.buffer||k.enableVertexAttribArray(F);if(G.type!==g.dtype||2!==G.size||G.buffer!==g||!1!==G.normalized||0!==G.offset||0!==G.stride)k.bindBuffer(34962,g.buffer),k.vertexAttribPointer(F,2,g.dtype,!1,0,0),G.type=g.dtype,G.size=2,G.buffer=g,G.normalized=!1,G.offset=0,G.stride=0;u=A.call(this,L,x,u);"number"!==typeof u&&z.commandRaise(h,v);k.uniform1f(oa.location,u);(F=e.elements)?k.bindBuffer(34963,F.buffer.buffer):D.currentVAO&&(F=
C.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,F.buffer.buffer);G=e.primitive;la=e.offset;for(u=0;u<b;++u){x=a[u];var da,ga,y,n,J,va,ua;da=x.color;Z(da)&&4===da.length||z.commandRaise(r,v);x=da[0];y=da[1];J=da[2];da=da[3];u&&ga===x&&n===y&&va===J&&ua===da||(ga=x,n=y,va=J,ua=da,k.uniform4f(p.location,x,y,J,da));F?k.drawElements(G,3,F.type,la<<(F.type-5121>>1)):k.drawArrays(G,la,3)}ma.dirty=!0;D.setVAO(null);f&&(t.cpuTime+=performance.now()-l)}}},"$13,color,position":function(a,z,v,t,f,g,
l,b,G,x,F,T,A,h,r,oa){var p,Q,q,L,ga,e,C,U,k,Z,B,u,ua,D,E,d,R,c,ia,K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa;p=a.attributes;Q=a.context;q=a.current;L=a.draw;ga=a.framebuffer;e=a.gl;C=a.next;U=a.shader;k=a.uniforms;Z=a.vao;B=C.blend_color;u=q.blend_color;ua=C.blend_equation;D=q.blend_equation;E=C.blend_func;d=q.blend_func;R=C.colorMask;c=q.colorMask;ia=C.depth_range;K=q.depth_range;ha=C.polygonOffset_offset;Ba=q.polygonOffset_offset;W=C.sample_coverage;ba=q.sample_coverage;S=C.scissor_box;M=q.scissor_box;
N=C.stencil_func;m=q.stencil_func;O=C.stencil_opBack;P=q.stencil_opBack;xa=C.stencil_opFront;ra=q.stencil_opFront;w=C.viewport;I=q.viewport;aa=[1,0,0,1];return{draw:function(a){var k,h,x;a=ga.next;a!==ga.cur&&(a?e.bindFramebuffer(36160,a.framebuffer):e.bindFramebuffer(36160,null),ga.cur=a);if(q.dirty){var A;a=C.dither;a!==q.dither&&(a?e.enable(3024):e.disable(3024),q.dither=a);a=C.blend_enable;a!==q.blend_enable&&(a?e.enable(3042):e.disable(3042),q.blend_enable=a);a=B[0];h=B[1];x=B[2];A=B[3];if(a!==
u[0]||h!==u[1]||x!==u[2]||A!==u[3])e.blendColor(a,h,x,A),u[0]=a,u[1]=h,u[2]=x,u[3]=A;a=ua[0];h=ua[1];if(a!==D[0]||h!==D[1])e.blendEquationSeparate(a,h),D[0]=a,D[1]=h;a=E[0];h=E[1];x=E[2];A=E[3];if(a!==d[0]||h!==d[1]||x!==d[2]||A!==d[3])e.blendFuncSeparate(a,h,x,A),d[0]=a,d[1]=h,d[2]=x,d[3]=A;a=C.depth_enable;a!==q.depth_enable&&(a?e.enable(2929):e.disable(2929),q.depth_enable=a);a=C.depth_func;a!==q.depth_func&&(e.depthFunc(a),q.depth_func=a);a=ia[0];h=ia[1];if(a!==K[0]||h!==K[1])e.depthRange(a,h),
K[0]=a,K[1]=h;a=C.depth_mask;a!==q.depth_mask&&(e.depthMask(a),q.depth_mask=a);a=R[0];h=R[1];x=R[2];A=R[3];if(a!==c[0]||h!==c[1]||x!==c[2]||A!==c[3])e.colorMask(a,h,x,A),c[0]=a,c[1]=h,c[2]=x,c[3]=A;a=C.cull_enable;a!==q.cull_enable&&(a?e.enable(2884):e.disable(2884),q.cull_enable=a);a=C.cull_face;a!==q.cull_face&&(e.cullFace(a),q.cull_face=a);a=C.frontFace;a!==q.frontFace&&(e.frontFace(a),q.frontFace=a);a=C.polygonOffset_enable;a!==q.polygonOffset_enable&&(a?e.enable(32823):e.disable(32823),q.polygonOffset_enable=
a);a=ha[0];h=ha[1];if(a!==Ba[0]||h!==Ba[1])e.polygonOffset(a,h),Ba[0]=a,Ba[1]=h;a=C.sample_alpha;a!==q.sample_alpha&&(a?e.enable(32926):e.disable(32926),q.sample_alpha=a);a=C.sample_enable;a!==q.sample_enable&&(a?e.enable(32928):e.disable(32928),q.sample_enable=a);a=W[0];h=W[1];if(a!==ba[0]||h!==ba[1])e.sampleCoverage(a,h),ba[0]=a,ba[1]=h;a=C.stencil_enable;a!==q.stencil_enable&&(a?e.enable(2960):e.disable(2960),q.stencil_enable=a);a=C.stencil_mask;a!==q.stencil_mask&&(e.stencilMask(a),q.stencil_mask=
a);a=N[0];h=N[1];x=N[2];if(a!==m[0]||h!==m[1]||x!==m[2])e.stencilFunc(a,h,x),m[0]=a,m[1]=h,m[2]=x;a=xa[0];h=xa[1];x=xa[2];A=xa[3];if(a!==ra[0]||h!==ra[1]||x!==ra[2]||A!==ra[3])e.stencilOpSeparate(a,h,x,A),ra[0]=a,ra[1]=h,ra[2]=x,ra[3]=A;a=O[0];h=O[1];x=O[2];A=O[3];if(a!==P[0]||h!==P[1]||x!==P[2]||A!==P[3])e.stencilOpSeparate(a,h,x,A),P[0]=a,P[1]=h,P[2]=x,P[3]=A;a=C.scissor_enable;a!==q.scissor_enable&&(a?e.enable(3089):e.disable(3089),q.scissor_enable=a);a=S[0];h=S[1];x=S[2];A=S[3];if(a!==M[0]||h!==
M[1]||x!==M[2]||A!==M[3])e.scissor(a,h,x,A),M[0]=a,M[1]=h,M[2]=x,M[3]=A;a=w[0];h=w[1];x=w[2];A=w[3];if(a!==I[0]||h!==I[1]||x!==I[2]||A!==I[3])e.viewport(a,h,x,A),I[0]=a,I[1]=h,I[2]=x,I[3]=A}e.lineWidth(1);q.lineWidth=1;if(a=q.profile)k=performance.now(),t.count++;e.useProgram(f.program);Z.setVAO(null);h=oa.location;x=p[h];x.buffer||e.enableVertexAttribArray(h);if(x.type!==g.dtype||2!==x.size||x.buffer!==g||!1!==x.normalized||0!==x.offset||0!==x.stride)e.bindBuffer(34962,g.buffer),e.vertexAttribPointer(h,
2,g.dtype,!1,0,0),x.type=g.dtype,x.size=2,x.buffer=g,x.normalized=!1,x.offset=0,x.stride=0;e.uniform4f(r.location,1,0,0,1);l&&e.bindBuffer(34963,l.buffer.buffer);h=l.primType;x=l.vertCount-0;0<=x||z.commandRaise(b,v);x&&(e.drawElements(h,x,l.type,0<<(l.type-5121>>1)),q.dirty=!0,Z.setVAO(null),a&&(t.cpuTime+=performance.now()-k))},scope:function(a,b,c){var d,e,f,m,l,h,p,u,r,w,A,y,n,B,D,E,I,K,M,H,N,O;d=C.lineWidth;C.lineWidth=1;if(e=q.profile)f=performance.now(),t.count++;m=L.elements;L.elements=G;
l=L.offset;L.offset=0;h=G.vertCount-0;0<=h||z.commandRaise(x,v);p=L.count;L.count=h;u=G.primType;h=L.primitive;L.primitive=u;u=k[3];k[3]=aa;r=F.buffer;F.buffer=g;w=F.divisor;F.divisor=0;A=F.normalized;F.normalized=!1;y=F.offset;F.offset=0;n=F.size;F.size=0;B=F.state;F.state=1;D=F.stride;F.stride=0;E=F.type;F.type=g.dtype;I=F.w;F.w=0;K=F.x;F.x=0;M=F.y;F.y=0;H=F.z;F.z=0;N=U.vert;U.vert=2;O=U.frag;U.frag=1;q.dirty=!0;b(Q,a,c);C.lineWidth=d;e&&(t.cpuTime+=performance.now()-f);L.elements=m;L.offset=l;
L.count=p;L.primitive=h;k[3]=u;F.buffer=r;F.divisor=w;F.normalized=A;F.offset=y;F.size=n;F.state=B;F.stride=D;F.type=E;F.w=I;F.x=K;F.y=M;F.z=H;U.vert=N;U.frag=O;q.dirty=!0},batch:function(a,b){var f,k,l;f=ga.next;f!==ga.cur&&(f?e.bindFramebuffer(36160,f.framebuffer):e.bindFramebuffer(36160,null),ga.cur=f);if(q.dirty){var x,F;f=C.dither;f!==q.dither&&(f?e.enable(3024):e.disable(3024),q.dither=f);f=C.blend_enable;f!==q.blend_enable&&(f?e.enable(3042):e.disable(3042),q.blend_enable=f);f=B[0];l=B[1];
x=B[2];F=B[3];if(f!==u[0]||l!==u[1]||x!==u[2]||F!==u[3])e.blendColor(f,l,x,F),u[0]=f,u[1]=l,u[2]=x,u[3]=F;f=ua[0];l=ua[1];if(f!==D[0]||l!==D[1])e.blendEquationSeparate(f,l),D[0]=f,D[1]=l;f=E[0];l=E[1];x=E[2];F=E[3];if(f!==d[0]||l!==d[1]||x!==d[2]||F!==d[3])e.blendFuncSeparate(f,l,x,F),d[0]=f,d[1]=l,d[2]=x,d[3]=F;f=C.depth_enable;f!==q.depth_enable&&(f?e.enable(2929):e.disable(2929),q.depth_enable=f);f=C.depth_func;f!==q.depth_func&&(e.depthFunc(f),q.depth_func=f);f=ia[0];l=ia[1];if(f!==K[0]||l!==
K[1])e.depthRange(f,l),K[0]=f,K[1]=l;f=C.depth_mask;f!==q.depth_mask&&(e.depthMask(f),q.depth_mask=f);f=R[0];l=R[1];x=R[2];F=R[3];if(f!==c[0]||l!==c[1]||x!==c[2]||F!==c[3])e.colorMask(f,l,x,F),c[0]=f,c[1]=l,c[2]=x,c[3]=F;f=C.cull_enable;f!==q.cull_enable&&(f?e.enable(2884):e.disable(2884),q.cull_enable=f);f=C.cull_face;f!==q.cull_face&&(e.cullFace(f),q.cull_face=f);f=C.frontFace;f!==q.frontFace&&(e.frontFace(f),q.frontFace=f);f=C.polygonOffset_enable;f!==q.polygonOffset_enable&&(f?e.enable(32823):
e.disable(32823),q.polygonOffset_enable=f);f=ha[0];l=ha[1];if(f!==Ba[0]||l!==Ba[1])e.polygonOffset(f,l),Ba[0]=f,Ba[1]=l;f=C.sample_alpha;f!==q.sample_alpha&&(f?e.enable(32926):e.disable(32926),q.sample_alpha=f);f=C.sample_enable;f!==q.sample_enable&&(f?e.enable(32928):e.disable(32928),q.sample_enable=f);f=W[0];l=W[1];if(f!==ba[0]||l!==ba[1])e.sampleCoverage(f,l),ba[0]=f,ba[1]=l;f=C.stencil_enable;f!==q.stencil_enable&&(f?e.enable(2960):e.disable(2960),q.stencil_enable=f);f=C.stencil_mask;f!==q.stencil_mask&&
(e.stencilMask(f),q.stencil_mask=f);f=N[0];l=N[1];x=N[2];if(f!==m[0]||l!==m[1]||x!==m[2])e.stencilFunc(f,l,x),m[0]=f,m[1]=l,m[2]=x;f=xa[0];l=xa[1];x=xa[2];F=xa[3];if(f!==ra[0]||l!==ra[1]||x!==ra[2]||F!==ra[3])e.stencilOpSeparate(f,l,x,F),ra[0]=f,ra[1]=l,ra[2]=x,ra[3]=F;f=O[0];l=O[1];x=O[2];F=O[3];if(f!==P[0]||l!==P[1]||x!==P[2]||F!==P[3])e.stencilOpSeparate(f,l,x,F),P[0]=f,P[1]=l,P[2]=x,P[3]=F;f=C.scissor_enable;f!==q.scissor_enable&&(f?e.enable(3089):e.disable(3089),q.scissor_enable=f);f=S[0];l=
S[1];x=S[2];F=S[3];if(f!==M[0]||l!==M[1]||x!==M[2]||F!==M[3])e.scissor(f,l,x,F),M[0]=f,M[1]=l,M[2]=x,M[3]=F;f=w[0];l=w[1];x=w[2];F=w[3];if(f!==I[0]||l!==I[1]||x!==I[2]||F!==I[3])e.viewport(f,l,x,F),I[0]=f,I[1]=l,I[2]=x,I[3]=F}e.lineWidth(1);q.lineWidth=1;if(f=q.profile)k=performance.now(),t.count+=b;e.useProgram(T.program);Z.setVAO(null);l=oa.location;x=p[l];x.buffer||e.enableVertexAttribArray(l);if(x.type!==g.dtype||2!==x.size||x.buffer!==g||!1!==x.normalized||0!==x.offset||0!==x.stride)e.bindBuffer(34962,
g.buffer),e.vertexAttribPointer(l,2,g.dtype,!1,0,0),x.type=g.dtype,x.size=2,x.buffer=g,x.normalized=!1,x.offset=0,x.stride=0;e.uniform4f(r.location,1,0,0,1);A&&e.bindBuffer(34963,A.buffer.buffer);x=A.primType;F=A.vertCount-0;0<=F||z.commandRaise(h,v);for(l=0;l<b;++l)F&&e.drawElements(x,F,A.type,0<<(A.type-5121>>1));q.dirty=!0;Z.setVAO(null);f&&(t.cpuTime+=performance.now()-k)}}},"$20,mouse,position,t,texture":function(a,z,v,t,f,g,l,b,G,x,F,T,A,h,r,ga,p,Q,q,L,ma,e,C,U,k){var Z,B,u,ua,D,E,d,R,c,ia,
K,ha,Ba,W,ba,S,M,N,m,O,P,xa,ra,w,I,aa,V,na,sa,Ca,ya,ea,Da,ja,qa,Aa;Z=a.attributes;B=a.context;u=a.current;ua=a.draw;D=a.elements;E=a.framebuffer;d=a.gl;R=a.isArrayLike;c=a.next;ia=a.shader;K=a.uniforms;ha=a.vao;Ba=c.blend_color;W=u.blend_color;ba=c.blend_equation;S=u.blend_equation;M=c.blend_func;N=u.blend_func;m=c.colorMask;O=u.colorMask;P=c.depth_range;xa=u.depth_range;ra=c.polygonOffset_offset;w=u.polygonOffset_offset;I=c.sample_coverage;aa=u.sample_coverage;V=c.scissor_box;na=u.scissor_box;sa=
c.stencil_func;Ca=u.stencil_func;ya=c.stencil_opBack;ea=u.stencil_opBack;Da=c.stencil_opFront;ja=u.stencil_opFront;qa=c.viewport;Aa=u.viewport;return{draw:function(a){var h,q,p,r;h=E.next;h!==E.cur&&(h?d.bindFramebuffer(36160,h.framebuffer):d.bindFramebuffer(36160,null),E.cur=h);if(u.dirty){var n;h=c.dither;h!==u.dither&&(h?d.enable(3024):d.disable(3024),u.dither=h);h=c.blend_enable;h!==u.blend_enable&&(h?d.enable(3042):d.disable(3042),u.blend_enable=h);h=Ba[0];p=Ba[1];r=Ba[2];n=Ba[3];if(h!==W[0]||
p!==W[1]||r!==W[2]||n!==W[3])d.blendColor(h,p,r,n),W[0]=h,W[1]=p,W[2]=r,W[3]=n;h=ba[0];p=ba[1];if(h!==S[0]||p!==S[1])d.blendEquationSeparate(h,p),S[0]=h,S[1]=p;h=M[0];p=M[1];r=M[2];n=M[3];if(h!==N[0]||p!==N[1]||r!==N[2]||n!==N[3])d.blendFuncSeparate(h,p,r,n),N[0]=h,N[1]=p,N[2]=r,N[3]=n;h=c.depth_enable;h!==u.depth_enable&&(h?d.enable(2929):d.disable(2929),u.depth_enable=h);h=c.depth_func;h!==u.depth_func&&(d.depthFunc(h),u.depth_func=h);h=P[0];p=P[1];if(h!==xa[0]||p!==xa[1])d.depthRange(h,p),xa[0]=
h,xa[1]=p;h=c.depth_mask;h!==u.depth_mask&&(d.depthMask(h),u.depth_mask=h);h=m[0];p=m[1];r=m[2];n=m[3];if(h!==O[0]||p!==O[1]||r!==O[2]||n!==O[3])d.colorMask(h,p,r,n),O[0]=h,O[1]=p,O[2]=r,O[3]=n;h=c.cull_enable;h!==u.cull_enable&&(h?d.enable(2884):d.disable(2884),u.cull_enable=h);h=c.cull_face;h!==u.cull_face&&(d.cullFace(h),u.cull_face=h);h=c.frontFace;h!==u.frontFace&&(d.frontFace(h),u.frontFace=h);h=c.lineWidth;h!==u.lineWidth&&(d.lineWidth(h),u.lineWidth=h);h=c.polygonOffset_enable;h!==u.polygonOffset_enable&&
(h?d.enable(32823):d.disable(32823),u.polygonOffset_enable=h);h=ra[0];p=ra[1];if(h!==w[0]||p!==w[1])d.polygonOffset(h,p),w[0]=h,w[1]=p;h=c.sample_alpha;h!==u.sample_alpha&&(h?d.enable(32926):d.disable(32926),u.sample_alpha=h);h=c.sample_enable;h!==u.sample_enable&&(h?d.enable(32928):d.disable(32928),u.sample_enable=h);h=I[0];p=I[1];if(h!==aa[0]||p!==aa[1])d.sampleCoverage(h,p),aa[0]=h,aa[1]=p;h=c.stencil_enable;h!==u.stencil_enable&&(h?d.enable(2960):d.disable(2960),u.stencil_enable=h);h=c.stencil_mask;
h!==u.stencil_mask&&(d.stencilMask(h),u.stencil_mask=h);h=sa[0];p=sa[1];r=sa[2];if(h!==Ca[0]||p!==Ca[1]||r!==Ca[2])d.stencilFunc(h,p,r),Ca[0]=h,Ca[1]=p,Ca[2]=r;h=Da[0];p=Da[1];r=Da[2];n=Da[3];if(h!==ja[0]||p!==ja[1]||r!==ja[2]||n!==ja[3])d.stencilOpSeparate(h,p,r,n),ja[0]=h,ja[1]=p,ja[2]=r,ja[3]=n;h=ya[0];p=ya[1];r=ya[2];n=ya[3];if(h!==ea[0]||p!==ea[1]||r!==ea[2]||n!==ea[3])d.stencilOpSeparate(h,p,r,n),ea[0]=h,ea[1]=p,ea[2]=r,ea[3]=n;h=c.scissor_enable;h!==u.scissor_enable&&(h?d.enable(3089):d.disable(3089),
u.scissor_enable=h);h=V[0];p=V[1];r=V[2];n=V[3];if(h!==na[0]||p!==na[1]||r!==na[2]||n!==na[3])d.scissor(h,p,r,n),na[0]=h,na[1]=p,na[2]=r,na[3]=n;h=qa[0];p=qa[1];r=qa[2];n=qa[3];if(h!==Aa[0]||p!==Aa[1]||r!==Aa[2]||n!==Aa[3])d.viewport(h,p,r,n),Aa[0]=h,Aa[1]=p,Aa[2]=r,Aa[3]=n;u.dirty=!1}if(h=u.profile)q=performance.now(),t.count++;d.useProgram(f.program);ha.setVAO(null);p=C.location;r=Z[p];r.buffer||d.enableVertexAttribArray(p);if(r.type!==g.dtype||2!==r.size||r.buffer!==g||!1!==r.normalized||0!==r.offset||
0!==r.stride)d.bindBuffer(34962,g.buffer),d.vertexAttribPointer(p,2,g.dtype,!1,0,0),r.type=g.dtype,r.size=2,r.buffer=g,r.normalized=!1,r.offset=0,r.stride=0;p=l.call(this,B,a,0);R(p)&&2===p.length||z.commandRaise(b,v);d.uniform2f(e.location,p[0],p[1]);a=G.call(this,B,a,0);"number"!==typeof a&&z.commandRaise(x,v);d.uniform1f(U.location,a);d.uniform1i(k.location,F.bind());(a=ua.elements)?d.bindBuffer(34963,a.buffer.buffer):ha.currentVAO&&(a=D.getElements(ha.currentVAO.elements))&&d.bindBuffer(34963,
a.buffer.buffer);p=ua.primitive;r=ua.offset;a?d.drawElements(p,3,a.type,r<<(a.type-5121>>1)):d.drawArrays(p,r,3);ha.setVAO(null);h&&(t.cpuTime+=performance.now()-q);F.unbind()},scope:function(a,b,c){var d,e,f,l,k,m,p,q,v,w,x,z,C,D,F,E,I,L,G,M;if(d=u.profile)e=performance.now(),t.count++;f=ua.count;ua.count=3;l=T.call(this,B,a,c);k=K[3];K[3]=l;m=A.call(this,B,a,c);l=K[4];K[4]=m;m=K[5];K[5]=h;p=r.buffer;r.buffer=g;q=r.divisor;r.divisor=0;v=r.normalized;r.normalized=!1;w=r.offset;r.offset=0;x=r.size;
r.size=0;z=r.state;r.state=1;C=r.stride;r.stride=0;D=r.type;r.type=g.dtype;F=r.w;r.w=0;E=r.x;r.x=0;I=r.y;r.y=0;L=r.z;r.z=0;G=ia.vert;ia.vert=2;M=ia.frag;ia.frag=1;b(B,a,c);d&&(t.cpuTime+=performance.now()-e);ua.count=f;K[3]=k;K[4]=l;K[5]=m;r.buffer=p;r.divisor=q;r.normalized=v;r.offset=w;r.size=x;r.state=z;r.stride=C;r.type=D;r.w=F;r.x=E;r.y=I;r.z=L;ia.vert=G;ia.frag=M},batch:function(a,b){var f,h,l;f=E.next;f!==E.cur&&(f?d.bindFramebuffer(36160,f.framebuffer):d.bindFramebuffer(36160,null),E.cur=
f);if(u.dirty){var n,r,x;f=c.dither;f!==u.dither&&(f?d.enable(3024):d.disable(3024),u.dither=f);f=c.blend_enable;f!==u.blend_enable&&(f?d.enable(3042):d.disable(3042),u.blend_enable=f);f=Ba[0];n=Ba[1];r=Ba[2];x=Ba[3];if(f!==W[0]||n!==W[1]||r!==W[2]||x!==W[3])d.blendColor(f,n,r,x),W[0]=f,W[1]=n,W[2]=r,W[3]=x;f=ba[0];n=ba[1];if(f!==S[0]||n!==S[1])d.blendEquationSeparate(f,n),S[0]=f,S[1]=n;f=M[0];n=M[1];r=M[2];x=M[3];if(f!==N[0]||n!==N[1]||r!==N[2]||x!==N[3])d.blendFuncSeparate(f,n,r,x),N[0]=f,N[1]=
n,N[2]=r,N[3]=x;f=c.depth_enable;f!==u.depth_enable&&(f?d.enable(2929):d.disable(2929),u.depth_enable=f);f=c.depth_func;f!==u.depth_func&&(d.depthFunc(f),u.depth_func=f);f=P[0];n=P[1];if(f!==xa[0]||n!==xa[1])d.depthRange(f,n),xa[0]=f,xa[1]=n;f=c.depth_mask;f!==u.depth_mask&&(d.depthMask(f),u.depth_mask=f);f=m[0];n=m[1];r=m[2];x=m[3];if(f!==O[0]||n!==O[1]||r!==O[2]||x!==O[3])d.colorMask(f,n,r,x),O[0]=f,O[1]=n,O[2]=r,O[3]=x;f=c.cull_enable;f!==u.cull_enable&&(f?d.enable(2884):d.disable(2884),u.cull_enable=
f);f=c.cull_face;f!==u.cull_face&&(d.cullFace(f),u.cull_face=f);f=c.frontFace;f!==u.frontFace&&(d.frontFace(f),u.frontFace=f);f=c.lineWidth;f!==u.lineWidth&&(d.lineWidth(f),u.lineWidth=f);f=c.polygonOffset_enable;f!==u.polygonOffset_enable&&(f?d.enable(32823):d.disable(32823),u.polygonOffset_enable=f);f=ra[0];n=ra[1];if(f!==w[0]||n!==w[1])d.polygonOffset(f,n),w[0]=f,w[1]=n;f=c.sample_alpha;f!==u.sample_alpha&&(f?d.enable(32926):d.disable(32926),u.sample_alpha=f);f=c.sample_enable;f!==u.sample_enable&&
(f?d.enable(32928):d.disable(32928),u.sample_enable=f);f=I[0];n=I[1];if(f!==aa[0]||n!==aa[1])d.sampleCoverage(f,n),aa[0]=f,aa[1]=n;f=c.stencil_enable;f!==u.stencil_enable&&(f?d.enable(2960):d.disable(2960),u.stencil_enable=f);f=c.stencil_mask;f!==u.stencil_mask&&(d.stencilMask(f),u.stencil_mask=f);f=sa[0];n=sa[1];r=sa[2];if(f!==Ca[0]||n!==Ca[1]||r!==Ca[2])d.stencilFunc(f,n,r),Ca[0]=f,Ca[1]=n,Ca[2]=r;f=Da[0];n=Da[1];r=Da[2];x=Da[3];if(f!==ja[0]||n!==ja[1]||r!==ja[2]||x!==ja[3])d.stencilOpSeparate(f,
n,r,x),ja[0]=f,ja[1]=n,ja[2]=r,ja[3]=x;f=ya[0];n=ya[1];r=ya[2];x=ya[3];if(f!==ea[0]||n!==ea[1]||r!==ea[2]||x!==ea[3])d.stencilOpSeparate(f,n,r,x),ea[0]=f,ea[1]=n,ea[2]=r,ea[3]=x;f=c.scissor_enable;f!==u.scissor_enable&&(f?d.enable(3089):d.disable(3089),u.scissor_enable=f);f=V[0];n=V[1];r=V[2];x=V[3];if(f!==na[0]||n!==na[1]||r!==na[2]||x!==na[3])d.scissor(f,n,r,x),na[0]=f,na[1]=n,na[2]=r,na[3]=x;f=qa[0];n=qa[1];r=qa[2];x=qa[3];if(f!==Aa[0]||n!==Aa[1]||r!==Aa[2]||x!==Aa[3])d.viewport(f,n,r,x),Aa[0]=
f,Aa[1]=n,Aa[2]=r,Aa[3]=x;u.dirty=!1}if(f=u.profile)h=performance.now(),t.count+=b;d.useProgram(ga.program);ha.setVAO(null);n=C.location;r=Z[n];r.buffer||d.enableVertexAttribArray(n);if(r.type!==g.dtype||2!==r.size||r.buffer!==g||!1!==r.normalized||0!==r.offset||0!==r.stride)d.bindBuffer(34962,g.buffer),d.vertexAttribPointer(n,2,g.dtype,!1,0,0),r.type=g.dtype,r.size=2,r.buffer=g,r.normalized=!1,r.offset=0,r.stride=0;n=p.call(this,B,void 0,l);R(n)&&2===n.length||z.commandRaise(Q,v);d.uniform2f(e.location,
n[0],n[1]);l=q.call(this,B,void 0,l);"number"!==typeof l&&z.commandRaise(L,v);d.uniform1f(U.location,l);d.uniform1i(k.location,ma.bind());(n=ua.elements)?d.bindBuffer(34963,n.buffer.buffer):ha.currentVAO&&(n=D.getElements(ha.currentVAO.elements))&&d.bindBuffer(34963,n.buffer.buffer);r=ua.primitive;x=ua.offset;for(l=0;l<b;++l)n?d.drawElements(r,3,n.type,x<<(n.type-5121>>1)):d.drawArrays(r,x,3);ma.unbind();ha.setVAO(null);f&&(t.cpuTime+=performance.now()-h)}}}}},{}],25:[function(t,G,ga){var a=t("./sorted-object-keys");
G.exports=function(z,v){for(var t=a(v),f=0;f<t.length;++f)z[t[f]]=v[t[f]];return z}},{"./sorted-object-keys":34}],26:[function(t,G,ga){function a(a,f,g,l,b,v){for(var x=0;x<f;++x)for(var z=a[x],t=0;t<g;++t)for(var A=z[t],h=0;h<l;++h)b[v++]=A[h]}function z(v,f,g,l,b){for(var t=1,x=g+1;x<f.length;++x)t*=f[x];var F=f[g];if(4===f.length-g){var G=f[g+1],A=f[g+2];f=f[g+3];for(x=0;x<F;++x)a(v[x],G,A,f,l,b),b+=t}else for(x=0;x<F;++x)z(v[x],f,g+1,l,b),b+=t}var v=t("./pool");G.exports={shape:function(a){for(var f=
[];a.length;a=a[0])f.push(a.length);return f},flatten:function(t,f,g,l){var b=1;if(f.length)for(var G=0;G<f.length;++G)b*=f[G];else b=0;g=l||v.allocType(g,b);switch(f.length){case 0:break;case 1:l=f[0];for(f=0;f<l;++f)g[f]=t[f];break;case 2:l=f[0];f=f[1];for(G=b=0;G<l;++G)for(var x=t[G],F=0;F<f;++F)g[b++]=x[F];break;case 3:a(t,f[0],f[1],f[2],g,0);break;default:z(t,f,0,g,0)}return g}}},{"./pool":32}],27:[function(t,G,ga){var a=t("./is-typed-array");G.exports=function(z){return Array.isArray(z)||a(z)}},
{"./is-typed-array":30}],28:[function(t,G,ga){var a=t("./is-typed-array");G.exports=function(z){return!!z&&"object"===typeof z&&Array.isArray(z.shape)&&Array.isArray(z.stride)&&"number"===typeof z.offset&&z.shape.length===z.stride.length&&(Array.isArray(z.data)||a(z.data))}},{"./is-typed-array":30}],29:[function(t,G,ga){G.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(t,G,ga){G.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof
Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(t,G,ga){G.exports=function(a,z){for(var v=Array(a),t=0;t<a;++t)v[t]=z(t);return v}},{}],32:[function(t,G,ga){function a(a){var f,g;f=(65535<a)<<4;a>>>=f;g=(255<a)<<3;a>>>=g;f|=g;g=(15<a)<<2;a>>>=g;f|=g;g=(3<a)<<1;return f|g|a>>>g>>1}function z(){function z(f){a:{for(var b=16;268435456>=b;b*=16)if(f<=b){f=b;break a}f=0}b=g[a(f)>>2];return 0<
b.length?b.pop():new ArrayBuffer(f)}function f(f){g[a(f.byteLength)>>2].push(f)}var g=v(8,function(){return[]});return{alloc:z,free:f,allocType:function(a,b){var f=null;switch(a){case 5120:f=new Int8Array(z(b),0,b);break;case 5121:f=new Uint8Array(z(b),0,b);break;case 5122:f=new Int16Array(z(2*b),0,b);break;case 5123:f=new Uint16Array(z(2*b),0,b);break;case 5124:f=new Int32Array(z(4*b),0,b);break;case 5125:f=new Uint32Array(z(4*b),0,b);break;case 5126:f=new Float32Array(z(4*b),0,b);break;default:return null}return f.length!==
b?f.subarray(0,b):f},freeType:function(a){f(a.buffer)}}}var v=t("./loop");t=z();t.zero=z();G.exports=t},{"./loop":31}],33:[function(t,G,ga){G.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(t,G,ga){G.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(t,G,ga){var a=t("./pool"),
z=new Float32Array(1),v=new Uint32Array(z.buffer);G.exports=function(t){for(var f=a.allocType(5123,t.length),g=0;g<t.length;++g)if(isNaN(t[g]))f[g]=65535;else if(Infinity===t[g])f[g]=31744;else if(-Infinity===t[g])f[g]=64512;else{z[0]=t[g];var l=v[0],b=l>>>31<<15,G=(l<<1>>>24)-127,l=l>>13&1023;f[g]=-24>G?b:-14>G?b+(l+1024>>-14-G):15<G?b+31744:b+(G+15<<10)+l}return f}},{"./pool":32}],36:[function(t,G,ga){var a=t("./sorted-object-keys");G.exports=function(z){return a(z).map(function(a){return z[a]})}},
{"./sorted-object-keys":34}],37:[function(t,G,ga){function a(a,b,f){function v(){var b=window.innerWidth,g=window.innerHeight;a!==document.body&&(g=z.getBoundingClientRect(),b=g.right-g.left,g=g.bottom-g.top);z.width=f*b;z.height=f*g}var z=document.createElement("canvas");g(z.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(z);a===document.body&&(z.style.position="absolute",g(a.style,{margin:0,padding:0}));var t;a!==document.body&&"function"===typeof ResizeObserver?
(t=new ResizeObserver(function(){setTimeout(v)}),t.observe(a)):window.addEventListener("resize",v,!1);v();return{canvas:z,onDestroy:function(){t?t.disconnect():window.removeEventListener("resize",v);a.removeChild(z)}}}function z(a,b){function f(g){try{return a.getContext(g,b)}catch(v){return null}}return f("webgl")||f("experimental-webgl")||f("webgl-experimental")}function v(a){if("string"===typeof a)return a.split();f(Array.isArray(a),"invalid extension array");return a}function Y(a){return"string"===
typeof a?(f("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var f=t("./util/check"),g=t("./util/extend");G.exports=function(g){var b=g||{},t,x,F,G;g={};var A=[],h=[],r="undefined"===typeof window?1:window.devicePixelRatio,ga=!1,p=function(a){a&&f.raise(a)},Q=function(){};"string"===typeof b?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),t=document.querySelector(b),f(t,"invalid query string for element")):"object"===
typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?t=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(G=b,F=G.canvas):(f.constructor(b),"gl"in b?G=b.gl:"canvas"in b?F=Y(b.canvas):"container"in b&&(x=Y(b.container)),"attributes"in b&&(g=b.attributes,f.type(g,"object","invalid context attributes")),"extensions"in b&&(A=v(b.extensions)),"optionalExtensions"in b&&(h=v(b.optionalExtensions)),"onDone"in b&&(f.type(b.onDone,
"function","invalid or missing onDone callback"),p=b.onDone),"profile"in b&&(ga=!!b.profile),"pixelRatio"in b&&(r=+b.pixelRatio,f(0<r,"invalid pixel ratio"))):f.raise("invalid arguments to regl");t&&("canvas"===t.nodeName.toLowerCase()?F=t:x=t);if(!G){if(!F){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");t=a(x||document.body,p,r);if(!t)return null;F=t.canvas;Q=t.onDestroy}void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!0);G=z(F,g)}return G?
{gl:G,canvas:F,container:x,extensions:A,optionalExtensions:h,pixelRatio:r,profile:ga,onDone:p,onDestroy:Q}:(Q(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(t,G,ga){G.exports=function(a,z,v){a[0]=z[0]+v[0];a[1]=z[1]+v[1];return a}},{}],39:[function(t,G,ga){G.exports=function(a,z){a[0]=Math.ceil(z[0]);a[1]=Math.ceil(z[1]);return a}},{}],40:[function(t,G,ga){G.exports=function(a){var z=new Float32Array(2);
z[0]=a[0];z[1]=a[1];return z}},{}],41:[function(t,G,ga){G.exports=function(a,z){a[0]=z[0];a[1]=z[1];return a}},{}],42:[function(t,G,ga){G.exports=function(){var a=new Float32Array(2);a[0]=0;a[1]=0;return a}},{}],43:[function(t,G,ga){G.exports=function(a,z,v){z=z[0]*v[1]-z[1]*v[0];a[0]=a[1]=0;a[2]=z;return a}},{}],44:[function(t,G,ga){G.exports=t("./distance")},{"./distance":45}],45:[function(t,G,ga){G.exports=function(a,z){var v=z[0]-a[0],t=z[1]-a[1];return Math.sqrt(v*v+t*t)}},{}],46:[function(t,
G,ga){G.exports=t("./divide")},{"./divide":47}],47:[function(t,G,ga){G.exports=function(a,z,v){a[0]=z[0]/v[0];a[1]=z[1]/v[1];return a}},{}],48:[function(t,G,ga){G.exports=function(a,z){return a[0]*z[0]+a[1]*z[1]}},{}],49:[function(t,G,ga){G.exports=1E-6},{}],50:[function(t,G,ga){G.exports=function(z,v){var t=z[0],f=z[1],g=v[0],l=v[1];return Math.abs(t-g)<=a*Math.max(1,Math.abs(t),Math.abs(g))&&Math.abs(f-l)<=a*Math.max(1,Math.abs(f),Math.abs(l))};var a=t("./epsilon")},{"./epsilon":49}],51:[function(t,
G,ga){G.exports=function(a,z){return a[0]===z[0]&&a[1]===z[1]}},{}],52:[function(t,G,ga){G.exports=function(a,z){a[0]=Math.floor(z[0]);a[1]=Math.floor(z[1]);return a}},{}],53:[function(t,G,ga){G.exports=function(z,v,t,f,g,l){v||(v=2);t||(t=0);for(f=f?Math.min(f*v+t,z.length):z.length;t<f;t+=v)a[0]=z[t],a[1]=z[t+1],g(a,a,l),z[t]=a[0],z[t+1]=a[1];return z};var a=t("./create")()},{"./create":42}],54:[function(t,G,ga){G.exports=function(a,z){var v=new Float32Array(2);v[0]=a;v[1]=z;return v}},{}],55:[function(t,
G,ga){G.exports={EPSILON:t("./epsilon"),create:t("./create"),clone:t("./clone"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),equals:t("./equals"),exactEquals:t("./exactEquals"),add:t("./add"),subtract:t("./subtract"),sub:t("./sub"),multiply:t("./multiply"),mul:t("./mul"),divide:t("./divide"),div:t("./div"),inverse:t("./inverse"),min:t("./min"),max:t("./max"),rotate:t("./rotate"),floor:t("./floor"),ceil:t("./ceil"),round:t("./round"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),
distance:t("./distance"),dist:t("./dist"),squaredDistance:t("./squaredDistance"),sqrDist:t("./sqrDist"),length:t("./length"),len:t("./len"),squaredLength:t("./squaredLength"),sqrLen:t("./sqrLen"),negate:t("./negate"),normalize:t("./normalize"),dot:t("./dot"),cross:t("./cross"),lerp:t("./lerp"),random:t("./random"),transformMat2:t("./transformMat2"),transformMat2d:t("./transformMat2d"),transformMat3:t("./transformMat3"),transformMat4:t("./transformMat4"),forEach:t("./forEach"),limit:t("./limit")}},
{"./add":38,"./ceil":39,"./clone":40,"./copy":41,"./create":42,"./cross":43,"./dist":44,"./distance":45,"./div":46,"./divide":47,"./dot":48,"./epsilon":49,"./equals":50,"./exactEquals":51,"./floor":52,"./forEach":53,"./fromValues":54,"./inverse":56,"./len":57,"./length":58,"./lerp":59,"./limit":60,"./max":61,"./min":62,"./mul":63,"./multiply":64,"./negate":65,"./normalize":66,"./random":67,"./rotate":68,"./round":69,"./scale":70,"./scaleAndAdd":71,"./set":72,"./sqrDist":73,"./sqrLen":74,"./squaredDistance":75,
"./squaredLength":76,"./sub":77,"./subtract":78,"./transformMat2":79,"./transformMat2d":80,"./transformMat3":81,"./transformMat4":82}],56:[function(t,G,ga){G.exports=function(a,z){a[0]=1/z[0];a[1]=1/z[1];return a}},{}],57:[function(t,G,ga){G.exports=t("./length")},{"./length":58}],58:[function(t,G,ga){G.exports=function(a){var z=a[0];a=a[1];return Math.sqrt(z*z+a*a)}},{}],59:[function(t,G,ga){G.exports=function(a,z,v,t){var f=z[0];z=z[1];a[0]=f+t*(v[0]-f);a[1]=z+t*(v[1]-z);return a}},{}],60:[function(t,
G,ga){G.exports=function(a,z,v){var t=z[0]*z[0]+z[1]*z[1];t>v*v?(t=Math.sqrt(t),a[0]=z[0]/t*v,a[1]=z[1]/t*v):(a[0]=z[0],a[1]=z[1]);return a}},{}],61:[function(t,G,ga){G.exports=function(a,z,v){a[0]=Math.max(z[0],v[0]);a[1]=Math.max(z[1],v[1]);return a}},{}],62:[function(t,G,ga){G.exports=function(a,z,v){a[0]=Math.min(z[0],v[0]);a[1]=Math.min(z[1],v[1]);return a}},{}],63:[function(t,G,ga){G.exports=t("./multiply")},{"./multiply":64}],64:[function(t,G,ga){G.exports=function(a,z,v){a[0]=z[0]*v[0];a[1]=
z[1]*v[1];return a}},{}],65:[function(t,G,ga){G.exports=function(a,z){a[0]=-z[0];a[1]=-z[1];return a}},{}],66:[function(t,G,ga){G.exports=function(a,z){var v=z[0],t=z[1],v=v*v+t*t;0<v&&(v=1/Math.sqrt(v),a[0]=z[0]*v,a[1]=z[1]*v);return a}},{}],67:[function(t,G,ga){G.exports=function(a,t){t=t||1;var v=2*Math.random()*Math.PI;a[0]=Math.cos(v)*t;a[1]=Math.sin(v)*t;return a}},{}],68:[function(t,G,ga){G.exports=function(a,t,v){var G=Math.cos(v);v=Math.sin(v);var f=t[0];t=t[1];a[0]=f*G-t*v;a[1]=f*v+t*G;
return a}},{}],69:[function(t,G,ga){G.exports=function(a,t){a[0]=Math.round(t[0]);a[1]=Math.round(t[1]);return a}},{}],70:[function(t,G,ga){G.exports=function(a,t,v){a[0]=t[0]*v;a[1]=t[1]*v;return a}},{}],71:[function(t,G,ga){G.exports=function(a,t,v,G){a[0]=t[0]+v[0]*G;a[1]=t[1]+v[1]*G;return a}},{}],72:[function(t,G,ga){G.exports=function(a,t,v){a[0]=t;a[1]=v;return a}},{}],73:[function(t,G,ga){G.exports=t("./squaredDistance")},{"./squaredDistance":75}],74:[function(t,G,ga){G.exports=t("./squaredLength")},
{"./squaredLength":76}],75:[function(t,G,ga){G.exports=function(a,t){var v=t[0]-a[0],G=t[1]-a[1];return v*v+G*G}},{}],76:[function(t,G,ga){G.exports=function(a){var t=a[0];a=a[1];return t*t+a*a}},{}],77:[function(t,G,ga){G.exports=t("./subtract")},{"./subtract":78}],78:[function(t,G,ga){G.exports=function(a,t,v){a[0]=t[0]-v[0];a[1]=t[1]-v[1];return a}},{}],79:[function(t,G,ga){G.exports=function(a,t,v){var G=t[0];t=t[1];a[0]=v[0]*G+v[2]*t;a[1]=v[1]*G+v[3]*t;return a}},{}],80:[function(t,G,ga){G.exports=
function(a,t,v){var G=t[0];t=t[1];a[0]=v[0]*G+v[2]*t+v[4];a[1]=v[1]*G+v[3]*t+v[5];return a}},{}],81:[function(t,G,ga){G.exports=function(a,t,v){var G=t[0];t=t[1];a[0]=v[0]*G+v[3]*t+v[6];a[1]=v[1]*G+v[4]*t+v[7];return a}},{}],82:[function(t,G,ga){G.exports=function(a,t,v){var G=t[0];t=t[1];a[0]=v[0]*G+v[4]*t+v[12];a[1]=v[1]*G+v[5]*t+v[13];return a}},{}],83:[function(t,G,ga){G.exports=function(t,v){function G(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==ga.alt,ga.alt=!!a.altKey);"shiftKey"in a&&(b=b||
a.shiftKey!==ga.shift,ga.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==ga.control,ga.control=!!a.ctrlKey);"metaKey"in a&&(b=b||a.metaKey!==ga.meta,ga.meta=!!a.metaKey);return b}function f(b,f){var g=a.x(f),e=a.y(f);"buttons"in f&&(b=f.buttons|0);if(b!==A||g!==h||e!==r||G(f))A=b|0,h=g||0,r=e||0,v&&v(A,h,r,ga)}function g(a){f(0,a)}function l(){if(A||h||r||ga.shift||ga.alt||ga.meta||ga.control)A=h=r=0,ga.shift=ga.alt=ga.control=ga.meta=!1,v&&v(0,0,0,ga)}function b(a){G(a)&&v&&v(A,h,r,ga)}function da(b){0===
a.buttons(b)?f(0,b):f(A,b)}function x(b){f(A|a.buttons(b),b)}function F(b){f(A&~a.buttons(b),b)}function T(){p||(p=!0,t.addEventListener("mousemove",da),t.addEventListener("mousedown",x),t.addEventListener("mouseup",F),t.addEventListener("mouseleave",g),t.addEventListener("mouseenter",g),t.addEventListener("mouseout",g),t.addEventListener("mouseover",g),t.addEventListener("blur",l),t.addEventListener("keyup",b),t.addEventListener("keydown",b),t.addEventListener("keypress",b),t!==window&&(window.addEventListener("blur",
l),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}v||(v=t,t=window);var A=0,h=0,r=0,ga={shift:!1,alt:!1,control:!1,meta:!1},p=!1;T();var Q={element:t};Object.defineProperties(Q,{enabled:{get:function(){return p},set:function(a){a?T():p&&(p=!1,t.removeEventListener("mousemove",da),t.removeEventListener("mousedown",x),t.removeEventListener("mouseup",F),t.removeEventListener("mouseleave",g),t.removeEventListener("mouseenter",g),t.removeEventListener("mouseout",
g),t.removeEventListener("mouseover",g),t.removeEventListener("blur",l),t.removeEventListener("keyup",b),t.removeEventListener("keydown",b),t.removeEventListener("keypress",b),t!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",b),window.removeEventListener("keydown",b),window.removeEventListener("keypress",b)))},enumerable:!0},buttons:{get:function(){return A},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return ga},
enumerable:!0}});return Q};var a=t("mouse-event")},{"mouse-event":84}],84:[function(t,G,ga){function a(a){return a.target||a.srcElement||window}ga.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};ga.element=a;ga.x=function(t){if("object"===typeof t){if("offsetX"in t)return t.offsetX;var v=
a(t).getBoundingClientRect();return t.clientX-v.left}return 0};ga.y=function(t){if("object"===typeof t){if("offsetY"in t)return t.offsetY;var v=a(t).getBoundingClientRect();return t.clientY-v.top}return 0}},{}],85:[function(t,G,ga){function a(a,b){for(var f=0;f<a.length;++f)if(a[f]===b)return f;return-1}var z=t("./lib/util/check"),v=t("./lib/util/extend"),Y=t("./lib/dynamic"),f=t("./lib/util/raf"),g=t("./lib/util/clock"),l=t("./lib/strings"),b=t("./lib/webgl"),da=t("./lib/extension"),x=t("./lib/limits"),
F=t("./lib/buffer"),T=t("./lib/elements"),A=t("./lib/texture"),h=t("./lib/renderbuffer"),r=t("./lib/framebuffer"),oa=t("./lib/attribute"),p=t("./lib/shader"),Q=t("./lib/read"),q=t("./lib/core"),L=t("./lib/stats"),ma=t("./lib/timer");G.exports=function(e){function t(){if(0===Da.length)M&&M.update(),Qa=null;else{Qa=f.next(t);d();for(var a=Da.length-1;0<=a;--a){var b=Da[a];b&&b(P,null,0)}ia.flush();M&&M.update()}}function G(){!Qa&&0<Da.length&&(Qa=f.next(t))}function k(){Qa&&(f.cancel(t),Qa=null)}function Z(a){a.preventDefault();
ha=!0;k();ja.forEach(function(a){a()})}function B(a){ia.getError();ha=!1;Ba.restore();aa.restore();ra.restore();V.restore();na.restore();sa.restore();I.restore();M&&M.restore();Ca.procs.refresh();G();qa.forEach(function(a){a()})}function u(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(Y.isDynamic(f))e[b]=Y.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(Y.isDynamic(f[g])){e[b]=Y.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<
a;)p.push(null);return p}z(!!a,"invalid args to regl({...})");z.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=v({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Ca.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,p=[];return v(function(a,b){var d;ha&&z.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);
else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function ga(a,b){var c=0;Ca.procs.poll();var d=b.color;d&&(ia.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ia.clearDepth(+b.depth),c|=256);"stencil"in b&&(ia.clearStencil(b.stencil|0),c|=1024);z(!!c,"called regl.clear with no buffer specified");ia.clear(c)}function D(b){z.type(b,
"function","regl.frame() callback must be a function");Da.push(b);G();return{cancel:function(){function c(){var b=a(Da,c);Da[b]=Da[Da.length-1];--Da.length;0>=Da.length&&k()}var d=a(Da,b);z(0<=d,"cannot cancel a frame twice");Da[d]=c}}}function E(){var a=ya.viewport,b=ya.scissor_box;a[0]=a[1]=b[0]=b[1]=0;P.viewportWidth=P.framebufferWidth=P.drawingBufferWidth=a[2]=b[2]=ia.drawingBufferWidth;P.viewportHeight=P.framebufferHeight=P.drawingBufferHeight=a[3]=b[3]=ia.drawingBufferHeight}function d(){P.tick+=
1;P.time=c();E();Ca.procs.poll()}function R(){V.refresh();E();Ca.procs.refresh();M&&M.update()}function c(){return(g()-N)/1E3}console.log("REGL args are:",e);e=b(e);console.log("REGL configs are:",e);if(!e)return null;var ia=e.gl,K=ia.getContextAttributes(),ha=ia.isContextLost(),Ba=da(ia,e);if(!Ba)return null;var W=l(),ba=L(),S=Ba.extensions,M=ma(ia,S),N=g(),m=ia.drawingBufferWidth,O=ia.drawingBufferHeight,P={tick:0,time:0,viewportWidth:m,viewportHeight:O,framebufferWidth:m,framebufferHeight:O,drawingBufferWidth:m,
drawingBufferHeight:O,pixelRatio:e.pixelRatio},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},xa=x(ia,S),ra=F(ia,ba,e,function(a){return I.destroyBuffer(a)}),w=T(ia,S,ra,ba),I=oa(ia,S,xa,ba,ra,w,m),aa=p(ia,W,ba,e),V=A(ia,S,xa,function(){Ca.procs.poll()},P,ba,e),na=h(ia,S,xa,ba,e),sa=r(ia,S,xa,V,na,ba),Ca=q(ia,W,S,xa,ra,w,V,sa,{},I,aa,m,P,M,e),W=Q(ia,sa,Ca.procs.poll,P,K,S,xa),ya=Ca.next,ea=ia.canvas,Da=[],ja=[],qa=[],Aa=[e.onDestroy],Qa=null;ea&&(ea.addEventListener("webglcontextlost",
Z,!1),ea.addEventListener("webglcontextrestored",B,!1));var la=sa.setFBO=u({framebuffer:Y.define.call(null,1,"framebuffer")});R();K=v(u,{clear:function(a){z("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)la(v({framebuffer:a.framebuffer.faces[b]},a),ga);else la(a,ga);else ga(null,a)},prop:Y.define.bind(null,1),context:Y.define.bind(null,2),"this":Y.define.bind(null,3),draw:u({}),buffer:function(a){return ra.create(a,
34962,!1,!1)},elements:function(a){return w.create(a,!1)},texture:V.create2D,cube:V.createCube,renderbuffer:na.create,framebuffer:sa.create,framebufferCube:sa.createCube,vao:I.createVAO,attributes:K,frame:D,on:function(a,b){z.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return D(b);case "lost":c=ja;break;case "restore":c=qa;break;case "destroy":c=Aa;break;default:z.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:xa,hasExtension:function(a){return 0<=xa.extensions.indexOf(a.toLowerCase())},read:W,destroy:function(){Da.length=0;k();ea&&(ea.removeEventListener("webglcontextlost",Z),ea.removeEventListener("webglcontextrestored",B));aa.clear();sa.clear();na.clear();I.clear();V.clear();w.clear();ra.clear();M&&M.clear();Aa.forEach(function(a){a()})},_gl:ia,_refresh:R,poll:function(){d();M&&M.update()},now:c,stats:ba});e.onDone(null,K);return K}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
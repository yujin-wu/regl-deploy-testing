<!DOCTYPE html>
      <html>
        <head>
          <title>example/sprites.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function C(ca,Ja,d){function y(f,c){if(!Ja[f]){if(!ca[f]){var x="function"==typeof require&&require;if(!c&&x)return x(f,!0);if(n)return n(f,!0);x=Error("Cannot find module '"+f+"'");throw x.code="MODULE_NOT_FOUND",x;}x=Ja[f]={exports:{}};ca[f][0].call(x.exports,function(b){return y(ca[f][1][b]||b)},x,x.exports,C,ca,Ja,d)}return Ja[f].exports}for(var n="function"==typeof require&&require,N=0;N<d.length;N++)y(d[N]);return y}return C})()({1:[function(C,ca,Ja){var d=C("../regl")({extensions:"OES_texture_float"}),
y=C("mouse-change")(),n=Array(2).fill().map(function(){return d.framebuffer({radius:512,colorType:"float",depthStencil:!1})}),N=d({vert:"\n  precision mediump float;\n  attribute vec2 position;\n  void main () {\n    gl_Position = vec4(position, 0, 1);\n  }\n  ",frag:"\n  precision highp float;\n\n  uniform sampler2D state;\n  uniform float shapeX, shapeY, deltaT, gravity;\n\n  void main () {\n    vec2 shape = vec2(shapeX, shapeY);\n    vec4 prevState = texture2D(state,\n      gl_FragCoord.xy / shape);\n\n    vec2 position = prevState.xy;\n    vec2 velocity = prevState.zw;\n\n    position += 0.5 * velocity * deltaT;\n    if (position.x < -1.0 || position.x > 1.0) {\n      velocity.x *= -1.0;\n    }\n    if (position.y < -1.0 || position.y > 1.0) {\n      velocity.y *= -1.0;\n    }\n    position += 0.5 * velocity * deltaT;\n\n    velocity.y = velocity.y + gravity * deltaT;\n\n    gl_FragColor = vec4(position, velocity);\n  }\n  ",
depth:{enable:!1},framebuffer:function(b){return n[(b.tick+1)%2]},uniforms:{state:function(b){return n[b.tick%2]},shapeX:d.context("viewportWidth"),shapeY:d.context("viewportHeight"),deltaT:.1,gravity:-.5},attributes:{position:[0,-4,4,4,-4,4]},primitive:"triangles",elements:null,offset:0,count:3}),f=d({vert:"\n  precision highp float;\n  attribute vec2 sprite;\n  uniform sampler2D state;\n  varying vec2 rg;\n  void main () {\n    vec2 position = texture2D(state, sprite).xy;\n    gl_PointSize = 16.0;\n    rg = sprite;\n    gl_Position = vec4(position, 0, 1);\n  }\n  ",
frag:"\n  precision highp float;\n  varying vec2 rg;\n  void main () {\n    gl_FragColor = vec4(rg, 1.0 - max(rg.x, rg.y), 1);\n  }\n  ",attributes:{sprite:Array(262144).fill().map(function(b,c){return[c%512/512,(c/512|0)/512]}).reverse()},uniforms:{state:function(b){return n[b.tick%2]}},primitive:"points",offset:function(b,c){return 262144-c.count},elements:null,count:d.prop("count")}),c=0,x={data:new Float32Array(256),width:64,height:1},b=document.createElement("div");Object.assign(b.style,{color:"white",
position:"absolute",left:"20px",top:"20px","z-index":20});document.body.appendChild(b);d.frame(function(v){var na=v.tick,T=v.pixelRatio,K=Math.min(Math.max(2*T*y.x/v.drawingBufferWidth-1,-.999),.999);v=-Math.min(Math.max(2*T*y.y/v.drawingBufferHeight-1,-.999),.999);if(y.buttons){for(T=0;64>T;++T)x.data[4*T]=K,x.data[4*T+1]=v,x.data[4*T+2]=.25*(Math.random()-.5),x.data[4*T+3]=Math.random();n[na%2].color[0].subimage(x,c%512,(c/512|0)%512);c+=64;b.innerText=Math.min(c,262144)}N();d.clear({color:[0,0,
0,1],depth:1});f({count:Math.min(c,262144)})})},{"../regl":40,"mouse-change":38}],2:[function(C,ca,Ja){function d(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var y=C("./util/sorted-object-keys"),n=C("./util/check"),N=C("./util/values"),f=C("./constants/dtypes.json"),c=C("./util/is-typed-array"),x=C("./util/is-ndarray"),b=C("./constants/primitives.json"),v="attributes elements offset count primitive instances".split(" ");
ca.exports=function(na,T,K,G,r,E,B){function D(b){if(b!==R.currentVAO){var c=T.oes_vertex_array_object;b?c.bindVertexArrayOES(b.vao):c.bindVertexArrayOES(null);R.currentVAO=b}}function Q(b){if(b!==R.currentVAO){if(b)b.bindAttrs();else{for(var c=T.angle_instanced_arrays,f=0;f<e.length;++f){var g=e[f];g.buffer?(na.enableVertexAttribArray(f),g.buffer.bind(),na.vertexAttribPointer(f,g.size,g.type,g.normalized,g.stride,g.offfset),c&&g.divisor&&c.vertexAttribDivisorANGLE(f,g.divisor)):(na.disableVertexAttribArray(f),
na.vertexAttrib4f(f,g.x,g.y,g.z,g.w))}B.elements?na.bindBuffer(34963,B.elements.buffer.buffer):na.bindBuffer(34963,null)}R.currentVAO=b}}function A(){N(l).forEach(function(b){b.destroy()})}function P(){this.id=++g;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=T.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;l[this.id]=this;this.buffers=[]}function C(){T.oes_vertex_array_object&&N(l).forEach(function(b){b.refresh()})}
var h=K.maxAttributes,e=Array(h);for(K=0;K<h;++K)e[K]=new d;var g=0,l={},R={Record:d,scope:{},state:e,currentVAO:null,targetVAO:null,restore:T.oes_vertex_array_object?C:function(){},createVAO:function(g){function m(g){var Z;if(Array.isArray(g))Z=g,e.elements&&e.ownsElements&&e.elements.destroy(),e.elements=null,e.ownsElements=!1,e.offset=0,e.count=0,e.instances=-1,e.primitive=4;else{n("object"===typeof g,"invalid arguments for create vao");n("attributes"in g,"must specify attributes for vao");if(g.elements){var a=
g.elements;e.ownsElements?("function"===typeof a&&"elements"===a._reglType?e.elements.destroy():e.elements(a),e.ownsElements=!1):E.getElements(g.elements)?(e.elements=g.elements,e.ownsElements=!1):(e.elements=E.create(g.elements),e.ownsElements=!0)}else e.elements=null,e.ownsElements=!1;Z=g.attributes;e.offset=0;e.count=-1;e.instances=-1;e.primitive=4;e.elements&&(e.count=e.elements._elements.vertCount,e.primitive=e.elements._elements.primType);"offset"in g&&(e.offset=g.offset|0);"count"in g&&(e.count=
g.count|0);"instances"in g&&(e.instances=g.instances|0);"primitive"in g&&(n(g.primitive in b,"bad primitive type: "+g.primitive),e.primitive=b[g.primitive]);n.optional(function(){for(var a=y(g),b=0;b<a.length;++b)n(0<=v.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+v)});n(Array.isArray(Z),"attributes must be an array")}n(Z.length<h,"too many attributes");n(0<Z.length,"must specify at least one attribute");var a={},p=e.attributes;p.length=Z.length;for(var aa=0;aa<Z.length;++aa){var A=
Z[aa],l=p[aa]=new d,B=A.data||A;if(Array.isArray(B)||c(B)||x(B)){var P;e.buffers[aa]&&(P=e.buffers[aa],c(B)&&P._buffer.byteLength>=B.byteLength?P.subdata(B):(P.destroy(),e.buffers[aa]=null));e.buffers[aa]||(P=e.buffers[aa]=r.create(A,34962,!1,!0));l.buffer=r.getBuffer(P);l.size=l.buffer.dimension|0;l.normalized=!1;l.type=l.buffer.dtype;l.offset=0;l.stride=0;l.divisor=0;l.state=1;a[aa]=1}else r.getBuffer(A)?(l.buffer=r.getBuffer(A),l.size=l.buffer.dimension|0,l.normalized=!1,l.type=l.buffer.dtype,
l.offset=0,l.stride=0,l.divisor=0,l.state=1):r.getBuffer(A.buffer)?(l.buffer=r.getBuffer(A.buffer),l.size=(+A.size||l.buffer.dimension)|0,l.normalized=!!A.normalized||!1,"type"in A?(n.parameter(A.type,f,"invalid buffer type"),l.type=f[A.type]):l.type=l.buffer.dtype,l.offset=(A.offset||0)|0,l.stride=(A.stride||0)|0,l.divisor=(A.divisor||0)|0,l.state=1,n(1<=l.size&&4>=l.size,"size must be between 1 and 4"),n(0<=l.offset,"invalid offset"),n(0<=l.stride&&255>=l.stride,"stride must be between 0 and 255"),
n(0<=l.divisor,"divisor must be positive"),n(!l.divisor||!!T.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in A?(n(0<aa,"first attribute must not be a constant"),l.x=+A.x||0,l.y=+A.y||0,l.z=+A.z||0,l.w=+A.w||0,l.state=2):n(!1,"invalid attribute spec for location "+aa)}for(P=0;P<e.buffers.length;++P)!a[P]&&e.buffers[P]&&(e.buffers[P].destroy(),e.buffers[P]=null);e.refresh();return m}var e=new P;G.vaoCount+=1;m.destroy=function(){for(var b=0;b<e.buffers.length;++b)e.buffers[b]&&
e.buffers[b].destroy();e.buffers.length=0;e.ownsElements&&(e.elements.destroy(),e.elements=null,e.ownsElements=!1);e.destroy()};m._vao=e;m._reglType="vao";return m(g)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var c=0;c<e.length;++c){var f=e[c];f.buffer===b&&(na.disableVertexAttribArray(c),f.buffer=null)}},setVAO:T.oes_vertex_array_object?D:Q,clear:T.oes_vertex_array_object?A:function(){}};P.prototype.bindAttrs=function(){for(var b=T.angle_instanced_arrays,
c=this.attributes,f=0;f<c.length;++f){var g=c[f];g.buffer?(na.enableVertexAttribArray(f),na.bindBuffer(34962,g.buffer.buffer),na.vertexAttribPointer(f,g.size,g.type,g.normalized,g.stride,g.offset),b&&g.divisor&&b.vertexAttribDivisorANGLE(f,g.divisor)):(na.disableVertexAttribArray(f),na.vertexAttrib4f(f,g.x,g.y,g.z,g.w))}for(b=c.length;b<h;++b)na.disableVertexAttribArray(b);(b=E.getElements(this.elements))?na.bindBuffer(34963,b.buffer.buffer):na.bindBuffer(34963,null)};P.prototype.refresh=function(){var b=
T.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),R.currentVAO=null,b.bindVertexArrayOES(null))};P.prototype.destroy=function(){if(this.vao){var b=T.oes_vertex_array_object;this===R.currentVAO&&(R.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);l[this.id]&&(delete l[this.id],--G.vaoCount)};return R}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(C,ca,Ja){function d(b){return K[Object.prototype.toString.call(b)]|0}function y(b,c){for(var f=0;f<c.length;++f)b[f]=c[f]}function n(b,c,f,d,x,v,h){for(var e=0,g=0;g<f;++g)for(var l=0;l<d;++l)b[e++]=c[x*g+v*l+h]}var N=C("./util/sorted-object-keys"),f=C("./util/check"),c=C("./util/is-typed-array"),x=C("./util/is-ndarray"),b=C("./util/values"),v=C("./util/pool");Ja=C("./util/flatten");
var na=Ja.flatten,T=Ja.shape,K=C("./constants/arraytypes.json"),G=C("./constants/dtypes.json"),r=C("./constants/usage.json"),E=[];E[5120]=1;E[5122]=2;E[5124]=4;E[5121]=1;E[5123]=2;E[5125]=4;E[5126]=4;ca.exports=function(B,D,K,A){function P(b){this.id=g++;this.buffer=B.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;K.profile&&(this.stats={size:0})}function C(b,c,f){b.byteLength=c.byteLength;B.bufferData(b.type,c,f)}function h(b,
g,e,h,l,a){b.usage=e;if(Array.isArray(g)){if(b.dtype=h||5126,0<g.length)if(Array.isArray(g[0])){l=T(g);for(var p=h=1;p<l.length;++p)h*=l[p];b.dimension=h;g=na(g,l,b.dtype);C(b,g,e);a?b.persistentData=g:v.freeType(g)}else"number"===typeof g[0]?(b.dimension=l,l=v.allocType(b.dtype,g.length),y(l,g),C(b,l,e),a?b.persistentData=l:v.freeType(l)):c(g[0])?(b.dimension=g[0].length,b.dtype=h||d(g[0])||5126,g=na(g,[g.length,g[0].length],b.dtype),C(b,g,e),a?b.persistentData=g:v.freeType(g)):f.raise("invalid buffer data")}else if(c(g))b.dtype=
h||d(g),b.dimension=l,C(b,g,e),a&&(b.persistentData=new Uint8Array(new Uint8Array(g.buffer)));else if(x(g)){l=g.shape;var aa=g.stride,p=g.offset,A=0,r=0,P=0,B=0;1===l.length?(A=l[0],r=1,P=aa[0],B=0):2===l.length?(A=l[0],r=l[1],P=aa[0],B=aa[1]):f.raise("invalid shape");b.dtype=h||d(g.data)||5126;b.dimension=r;l=v.allocType(b.dtype,A*r);n(l,g.data,A,r,P,B,p);C(b,l,e);a?b.persistentData=l:v.freeType(l)}else g instanceof ArrayBuffer?(b.dtype=5121,b.dimension=l,C(b,g,e),a&&(b.persistentData=new Uint8Array(new Uint8Array(g)))):
f.raise("invalid buffer data")}function e(b){D.bufferCount--;A(b);var c=b.buffer;f(c,"buffer must not be deleted already");B.deleteBuffer(c);b.buffer=null;delete l[b.id]}var g=0,l={};P.prototype.bind=function(){B.bindBuffer(this.type,this.buffer)};P.prototype.destroy=function(){e(this)};var R=[];K.profile&&(D.getTotalBufferSize=function(){var b=0;N(l).forEach(function(c){b+=l[c].stats.size});return b});return{create:function(b,g,A,L){function R(b){var a=35044,g=null,e=0,m=0,l=1;Array.isArray(b)||
c(b)||x(b)||b instanceof ArrayBuffer?g=b:"number"===typeof b?e=b|0:b&&(f.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(f(null===g||Array.isArray(g)||c(g)||x(g),"invalid data for buffer"),g=b.data),"usage"in b&&(f.parameter(b.usage,r,"invalid buffer usage"),a=r[b.usage]),"type"in b&&(f.parameter(b.type,G,"invalid buffer type"),m=G[b.type]),"dimension"in b&&(f.type(b.dimension,"number","invalid dimension"),l=b.dimension|0),"length"in b&&(f.nni(e,"buffer length must be a nonnegative integer"),
e=b.length|0));p.bind();g?h(p,g,a,m,l,L):(e&&B.bufferData(p.type,e,a),p.dtype=m||5121,p.usage=a,p.dimension=l,p.byteLength=e);K.profile&&(p.stats.size=p.byteLength*E[p.dtype]);return R}function a(b,a){f(a+b.byteLength<=p.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+a+" to a buffer of size "+p.byteLength);B.bufferSubData(p.type,a,b)}D.bufferCount++;var p=new P(g);l[p.id]=p;A||R(b);R._reglType="buffer";R._buffer=p;R.subdata=
function(b,g){var e=(g||0)|0,m;p.bind();if(c(b)||b instanceof ArrayBuffer)a(b,e);else if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var l=v.allocType(p.dtype,b.length);y(l,b);a(l,e);v.freeType(l)}else Array.isArray(b[0])||c(b[0])?(m=T(b),l=na(b,m,p.dtype),a(l,e),v.freeType(l)):f.raise("invalid buffer data")}else if(x(b)){m=b.shape;var h=b.stride,A=l=0,r=0,P=0;1===m.length?(l=m[0],A=1,r=h[0],P=0):2===m.length?(l=m[0],A=m[1],r=h[0],P=h[1]):f.raise("invalid shape");m=Array.isArray(b.data)?
p.dtype:d(b.data);m=v.allocType(m,l*A);n(m,b.data,l,A,r,P,b.offset);a(m,e);v.freeType(m)}else f.raise("invalid data for buffer subdata");return R};K.profile&&(R.stats=p.stats);R.destroy=function(){e(p)};return R},createStream:function(b,c){var g=R.pop();g||(g=new P(b));g.bind();h(g,c,35040,0,1,!1);return g},destroyStream:function(b){R.push(b)},clear:function(){b(l).forEach(e);R.forEach(e)},getBuffer:function(b){return b&&b._buffer instanceof P?b._buffer:null},restore:function(){b(l).forEach(function(b){b.buffer=
B.createBuffer();B.bindBuffer(b.type,b.buffer);B.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:h}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(C,ca,Ja){ca.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(C,ca,Ja){ca.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(C,ca,Ja){ca.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(C,ca,Ja){ca.exports=
{"static":35044,dynamic:35048,stream:35040}},{}],8:[function(C,ca,Ja){function d(b){return Array.isArray(b)||K(b)||G(b)}function y(b){return b.sort(function(b,c){return"viewport"===b?-1:"viewport"===c?1:b<c?-1:1})}function n(b,c,g,f){this.thisDep=b;this.contextDep=c;this.propDep=g;this.append=f}function N(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function f(b){return new n(!1,!1,!1,b)}function c(b,c){var g=b.type;if(0===g)return g=b.data.length,new n(!0,1<=g,2<=g,c);if(4===g)return g=b.data,
new n(g.thisDep,g.contextDep,g.propDep,c);if(5===g)return new n(!1,!1,!1,c);if(6===g){for(var f=g=!1,e=!1,a=0;a<b.data.length;++a){var p=b.data[a];1===p.type?e=!0:2===p.type?f=!0:3===p.type?g=!0:0===p.type?(g=!0,p=p.data,1<=p&&(f=!0),2<=p&&(e=!0)):4===p.type&&(g=g||p.data.thisDep,f=f||p.data.contextDep,e=e||p.data.propDep)}return new n(g,f,e,c)}return new n(3===g,2===g,1===g,c)}var x=C("./util/sorted-object-keys"),b=C("./util/check"),v=C("./util/extend"),na=C("./util/codegen"),T=C("./util/loop"),
K=C("./util/is-typed-array"),G=C("./util/is-ndarray"),r=C("./util/is-array-like"),E=C("./dynamic"),B=C("./constants/primitives.json"),D=C("./constants/dtypes.json"),Q=["x","y","z","w"],A="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),P={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ge="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),h={never:512,less:513,
"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},e={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},g={frag:35632,vert:35633},l={cw:2304,ccw:2305},R=new n(!1,!1,!1,function(){});ca.exports=function(K,m,G,L,fa,a,p,aa,la,La,Eb,Ld,oa,Oa,ba){function M(b){return b.replace(".","_")}function O(b,q,a){var c=M(b);da.push(b);t[c]=H[c]=
!!a;z[c]=q}function U(b,q,a){var c=M(b);da.push(b);Array.isArray(a)?(H[c]=a.slice(),t[c]=a.slice()):H[c]=t[c]=a;wa[c]=q}function C(){var a=na(),q=a.link,c=a.global;a.id=mc++;a.batchId="0";var g=q(ma),f=a.shared={props:"a0"};x(ma).forEach(function(b){f[b]=c.def(g,".",b)});b.optional(function(){a.CHECK=q(b);a.commandStr=b.guessCommand();a.command=q(a.commandStr);a.assert=function(b,a,c){b("if(!(",a,"))",this.CHECK,".commandRaise(",q(c),",",this.command,");")};k.invalidBlendCombinations=ge});var z=a.next=
{},p=a.current={};x(wa).forEach(function(b){Array.isArray(H[b])&&(z[b]=c.def(f.next,".",b),p[b]=c.def(f.current,".",b))});var e=a.constants={};x(k).forEach(function(b){e[b]=c.def(JSON.stringify(k[b]))});a.invoke=function(b,c){switch(c.type){case 0:var g=["this",f.context,f.props,a.batchId];return b.def(q(c.data),".call(",g.slice(0,Math.max(c.data.length+1,4)),")");case 1:return b.def(f.props,c.data);case 2:return b.def(f.context,c.data);case 3:return b.def("this",c.data);case 4:return c.data.append(a,
b),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(q){return a.invoke(b,q)})}};a.attribCache={};var Ed={};a.scopeAttrib=function(b){b=m.id(b);if(b in Ed)return Ed[b];var a=La.scope[b];a||(a=La.scope[b]=new ia);return Ed[b]=q(a)};return a}function I(b){var q=b["static"];b=b.dynamic;var a;if("profile"in q){var g=!!q.profile;a=f(function(b,q){return g});a.enable=g}else if("profile"in b){var k=b.profile;a=c(k,function(b,q){return b.invoke(q,k)})}return a}function Vb(a,q){var g=
a["static"],k=a.dynamic;if("framebuffer"in g){var z=g.framebuffer;return z?(z=aa.getFramebuffer(z),b.command(z,"invalid framebuffer object"),f(function(b,q){var a=b.link(z),c=b.shared;q.set(c.framebuffer,".next",a);c=c.context;q.set(c,".framebufferWidth",a+".width");q.set(c,".framebufferHeight",a+".height");return a})):f(function(b,q){var a=b.shared;q.set(a.framebuffer,".next","null");a=a.context;q.set(a,".framebufferWidth",a+".drawingBufferWidth");q.set(a,".framebufferHeight",a+".drawingBufferHeight");
return"null"})}if("framebuffer"in k){var p=k.framebuffer;return c(p,function(a,q){var c=a.invoke(q,p),g=a.shared,k=g.framebuffer,V=q.def(k,".getFramebuffer(",c,")");b.optional(function(){a.assert(q,"!"+c+"||"+V,"invalid framebuffer object")});q.set(k,".next",V);g=g.context;q.set(g,".framebufferWidth",V+"?"+V+".width:"+g+".drawingBufferWidth");q.set(g,".framebufferHeight",V+"?"+V+".height:"+g+".drawingBufferHeight");return V})}return null}function ab(a,q,g){function k(a){if(a in f){var V=f[a];b.commandType(V,
"object","invalid "+a,g.commandStr);var p=!0,md=V.x|0,e=V.y|0,l,m;"width"in V?(l=V.width|0,b.command(0<=l,"invalid "+a,g.commandStr)):p=!1;"height"in V?(m=V.height|0,b.command(0<=m,"invalid "+a,g.commandStr)):p=!1;return new n(!p&&q&&q.thisDep,!p&&q&&q.contextDep,!p&&q&&q.propDep,function(b,a){var q=b.shared.context,c=l;"width"in V||(c=a.def(q,".","framebufferWidth","-",md));var g=m;"height"in V||(g=a.def(q,".","framebufferHeight","-",e));return[md,e,c,g]})}if(a in z){var h=z[a],p=c(h,function(q,
c){var g=q.invoke(c,h);b.optional(function(){q.assert(c,g+"&&typeof "+g+'==="object"',"invalid "+a)});var k=q.shared.context,V=c.def(g,".x|0"),f=c.def(g,".y|0"),z=c.def('"width" in ',g,"?",g,".width|0:","(",k,".","framebufferWidth","-",V,")"),p=c.def('"height" in ',g,"?",g,".height|0:","(",k,".","framebufferHeight","-",f,")");b.optional(function(){q.assert(c,z+">=0&&"+p+">=0","invalid "+a)});return[V,f,z,p]});q&&(p.thisDep=p.thisDep||q.thisDep,p.contextDep=p.contextDep||q.contextDep,p.propDep=p.propDep||
q.propDep);return p}return q?new n(q.thisDep,q.contextDep,q.propDep,function(b,a){var q=b.shared.context;return[0,0,a.def(q,".","framebufferWidth"),a.def(q,".","framebufferHeight")]}):null}var f=a["static"],z=a.dynamic;if(a=k("viewport")){var p=a;a=new n(a.thisDep,a.contextDep,a.propDep,function(b,a){var q=p.append(b,a),c=b.shared.context;a.set(c,".viewportWidth",q[2]);a.set(c,".viewportHeight",q[3]);return q})}return{viewport:a,scissor_box:k("scissor.box")}}function S(a,q){var c=a["static"];if("string"===
typeof c.frag&&"string"===typeof c.vert){if(0<x(q.dynamic).length)return null;var c=q["static"],g=x(c);if(0<g.length&&"number"===typeof c[g[0]]){for(var k=[],f=0;f<g.length;++f)b("number"===typeof c[g[f]],"must specify all vertex attribute locations when using vaos"),k.push([c[g[f]]|0,g[f]]);return k}}return null}function u(a,q,k){function z(a){if(a in p){var q=m.id(p[a]);b.optional(function(){Eb.shader(g[a],q,b.guessCommand())});var k=f(function(){return q});k.id=q;return k}if(a in e){var V=e[a];
return c(V,function(q,c){var k=q.invoke(c,V),f=c.def(q.shared.strings,".id(",k,")");b.optional(function(){c(q.shared.shader,".shader(",g[a],",",f,",",q.command,");")});return f})}return null}var p=a["static"],e=a.dynamic,l=z("frag"),h=z("vert"),Ed=null;N(l)&&N(h)?(Ed=Eb.program(h.id,l.id,null,k),a=f(function(b,a){return b.link(Ed)})):a=new n(l&&l.thisDep||h&&h.thisDep,l&&l.contextDep||h&&h.contextDep,l&&l.propDep||h&&h.propDep,function(a,q){var c=a.shared.shader,g;g=l?l.append(a,q):q.def(c,".","frag");
var k;k=h?h.append(a,q):q.def(c,".","vert");var f=c+".program("+k+","+g;b.optional(function(){f+=","+a.command});return q.def(f+")")});return{frag:l,vert:h,progVar:a,program:Ed}}function ka(g,q){function k(a,g){if(a in z){var V=z[a]|0;g?e.offset=V:e.instances=V;b.command(!g||0<=V,"invalid "+a,q.commandStr);return f(function(b,a){g&&(b.OFFSET=V);return V})}if(a in p){var md=p[a];return c(md,function(q,c){var k=q.invoke(c,md);g&&(q.OFFSET=k,b.optional(function(){q.assert(c,k+">=0","invalid "+a)}));
return k})}if(g){if(Ed)return f(function(b,a){return b.OFFSET=0});if(l)return new n(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(l)return new n(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var z=g["static"],p=g.dynamic,e={},l=!1,m=function(){if("vao"in z){var b=z.vao;null!==b&&null===La.getVAO(b)&&(b=La.createVAO(b));
l=!0;e.vao=b;return f(function(a){var q=La.getVAO(b);return q?a.link(q):"null"})}if("vao"in p){l=!0;var a=p.vao;return c(a,function(b,q){var c=b.invoke(q,a);return q.def(b.shared.vao+".getVAO("+c+")")})}return null}(),Ed=!1,h=function(){if("elements"in z){var g=z.elements;e.elements=g;if(d(g)){var k=e.elements=a.create(g,!0),g=a.getElements(k);Ed=!0}else g&&(g=a.getElements(g),Ed=!0,b.command(g,"invalid elements",q.commandStr));k=f(function(b,a){if(g){var q=b.link(g);return b.ELEMENTS=q}return b.ELEMENTS=
null});k.value=g;return k}if("elements"in p){Ed=!0;var V=p.elements;return c(V,function(a,q){var c=a.shared,g=c.isBufferArgs,c=c.elements,k=a.invoke(q,V),f=q.def("null"),g=q.def(g,"(",k,")"),z=a.cond(g).then(f,"=",c,".createStream(",k,");")["else"](f,"=",c,".getElements(",k,");");b.optional(function(){a.assert(z["else"],"!"+k+"||"+f,"invalid elements")});q.entry(z);q.exit(a.cond(g).then(c,".destroyStream(",f,");"));return a.ELEMENTS=f})}return l?new n(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+
".currentVAO?"+b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),md=k("offset",!0),t=function(){if("primitive"in z){var a=z.primitive;e.primitive=a;b.commandParameter(a,B,"invalid primitve",q.commandStr);return f(function(b,q){return B[a]})}if("primitive"in p){var g=p.primitive;return c(g,function(a,q){var c=a.constants.primTypes,k=a.invoke(q,g);b.optional(function(){a.assert(q,k+" in "+c,"invalid primitive, must be one of "+x(B))});return q.def(c,"[",k,"]")})}return Ed?
N(h)?h.value?f(function(b,a){return a.def(b.ELEMENTS,".primType")}):f(function(){return 4}):new n(h.thisDep,h.contextDep,h.propDep,function(b,a){var q=b.ELEMENTS;return a.def(q,"?",q,".primType:",4)}):l?new n(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),u=function(){if("count"in z){var a=z.count|0;e.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",q.commandStr);return f(function(){return a})}if("count"in
p){var g=p.count;return c(g,function(a,q){var c=a.invoke(q,g);b.optional(function(){a.assert(q,"typeof "+c+'==="number"&&'+c+">=0&&"+c+"===("+c+"|0)","invalid vertex count")});return c})}if(Ed){if(N(h)){if(h)return md?new n(md.thisDep,md.contextDep,md.propDep,function(a,q){var c=q.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(q,c+">=0","invalid vertex offset/element buffer too small")});return c}):f(function(b,a){return a.def(b.ELEMENTS,".vertCount")});var k=f(function(){return-1});
b.optional(function(){k.MISSING=!0});return k}var V=new n(h.thisDep||md.thisDep,h.contextDep||md.contextDep,h.propDep||md.propDep,function(b,a){var q=b.ELEMENTS;return b.OFFSET?a.def(q,"?",q,".vertCount-",b.OFFSET,":-1"):a.def(q,"?",q,".vertCount:-1")});b.optional(function(){V.DYNAMIC=!0});return V}return l?new n(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),ma=k("instances",!1);return{elements:h,primitive:t,
count:u,instances:ma,offset:md,vao:m,vaoActive:l,elementsActive:Ed,"static":e}}function ea(a,q){var g=a["static"],k=a.dynamic,z={};da.forEach(function(a){function V(b,q){if(a in g){var e=b(g[a]);z[p]=f(function(){return e})}else if(a in k){var l=k[a];z[p]=c(l,function(b,a){return q(b,a,b.invoke(a,l))})}}var p=M(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return V(function(c){b.commandType(c,
"boolean",a,q.commandStr);return c},function(q,c,g){b.optional(function(){q.assert(c,"typeof "+g+'==="boolean"',"invalid flag "+a,q.commandStr)});return g});case "depth.func":return V(function(c){b.commandParameter(c,h,"invalid "+a,q.commandStr);return h[c]},function(q,c,g){var k=q.constants.compareFuncs;b.optional(function(){q.assert(c,g+" in "+k,"invalid "+a+", must be one of "+x(h))});return c.def(k,"[",g,"]")});case "depth.range":return V(function(a){b.command(r(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",q.commandStr);return a},function(a,q,c){b.optional(function(){a.assert(q,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var g=q.def("+",c,"[0]"),k=q.def("+",c,"[1]");return[g,k]});case "blend.func":return V(function(a){b.commandType(a,"object","blend.func",q.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,g="srcAlpha"in a?a.srcAlpha:
a.src,k="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(c,P,p+".srcRGB",q.commandStr);b.commandParameter(g,P,p+".srcAlpha",q.commandStr);b.commandParameter(k,P,p+".dstRGB",q.commandStr);b.commandParameter(a,P,p+".dstAlpha",q.commandStr);b.command(-1===ge.indexOf(c+", "+k),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+k+")",q.commandStr);return[P[c],P[k],P[g],P[a]]},function(q,c,g){function k(f,z){var p=c.def('"',f,z,'" in ',g,"?",g,".",f,z,":",g,".",
f);b.optional(function(){q.assert(c,p+" in "+V,"invalid "+a+"."+f+z+", must be one of "+x(P))});return p}var V=q.constants.blendFuncs;b.optional(function(){q.assert(c,g+"&&typeof "+g+'==="object"',"invalid blend func, must be an object")});var f=k("src","RGB"),z=k("dst","RGB");b.optional(function(){q.assert(c,q.constants.invalidBlendCombinations+".indexOf("+f+'+", "+'+z+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var p=c.def(V,"[",f,"]"),e=c.def(V,"[",k("src","Alpha"),"]"),
l=c.def(V,"[",z,"]"),m=c.def(V,"[",k("dst","Alpha"),"]");return[p,l,e,m]});case "blend.equation":return V(function(c){if("string"===typeof c)return b.commandParameter(c,va,"invalid "+a,q.commandStr),[va[c],va[c]];if("object"===typeof c)return b.commandParameter(c.rgb,va,a+".rgb",q.commandStr),b.commandParameter(c.alpha,va,a+".alpha",q.commandStr),[va[c.rgb],va[c.alpha]];b.commandRaise("invalid blend.equation",q.commandStr)},function(q,c,g){var k=q.constants.blendEquations,V=c.def(),f=c.def(),z=q.cond("typeof ",
g,'==="string"');b.optional(function(){function b(a,c,g){q.assert(a,g+" in "+k,"invalid "+c+", must be one of "+x(va))}b(z.then,a,g);q.assert(z["else"],g+"&&typeof "+g+'==="object"',"invalid "+a);b(z["else"],a+".rgb",g+".rgb");b(z["else"],a+".alpha",g+".alpha")});z.then(V,"=",f,"=",k,"[",g,"];");z["else"](V,"=",k,"[",g,".rgb];",f,"=",k,"[",g,".alpha];");c(z);return[V,f]});case "blend.color":return V(function(a){b.command(r(a)&&4===a.length,"blend.color must be a 4d array",q.commandStr);return T(4,
function(b){return+a[b]})},function(a,q,c){b.optional(function(){a.assert(q,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return T(4,function(b){return q.def("+",c,"[",b,"]")})});case "stencil.mask":return V(function(a){b.commandType(a,"number",p,q.commandStr);return a|0},function(a,q,c){b.optional(function(){a.assert(q,"typeof "+c+'==="number"',"invalid stencil.mask")});return q.def(c,"|0")});case "stencil.func":return V(function(c){b.commandType(c,"object",
p,q.commandStr);var g=c.cmp||"keep",k=c.ref||0;c="mask"in c?c.mask:-1;b.commandParameter(g,h,a+".cmp",q.commandStr);b.commandType(k,"number",a+".ref",q.commandStr);b.commandType(c,"number",a+".mask",q.commandStr);return[h[g],k,c]},function(a,q,c){var g=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(q,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(c+"&&typeof ",c,'==="object"');b('!("cmp" in ',c,")||(",c,".cmp in ",g,")")});var k=q.def('"cmp" in ',c,"?",g,"[",
c,".cmp]",":",7680),V=q.def(c,".ref|0"),z=q.def('"mask" in ',c,"?",c,".mask|0:-1");return[k,V,z]});case "stencil.opFront":case "stencil.opBack":return V(function(c){b.commandType(c,"object",p,q.commandStr);var g=c.fail||"keep",k=c.zfail||"keep";c=c.zpass||"keep";b.commandParameter(g,e,a+".fail",q.commandStr);b.commandParameter(k,e,a+".zfail",q.commandStr);b.commandParameter(c,e,a+".zpass",q.commandStr);return["stencil.opBack"===a?1029:1028,e[g],e[k],e[c]]},function(q,c,g){function k(z){b.optional(function(){q.assert(c,
'!("'+z+'" in '+g+")||("+g+"."+z+" in "+V+")","invalid "+a+"."+z+", must be one of "+x(e))});return c.def('"',z,'" in ',g,"?",V,"[",g,".",z,"]:",7680)}var V=q.constants.stencilOps;b.optional(function(){q.assert(c,g+"&&typeof "+g+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,k("fail"),k("zfail"),k("zpass")]});case "polygonOffset.offset":return V(function(a){b.commandType(a,"object",p,q.commandStr);var c=a.factor|0;a=a.units|0;b.commandType(c,"number",p+".factor",q.commandStr);
b.commandType(a,"number",p+".units",q.commandStr);return[c,a]},function(c,q,g){b.optional(function(){c.assert(q,g+"&&typeof "+g+'==="object"',"invalid "+a)});var k=q.def(g,".factor|0"),V=q.def(g,".units|0");return[k,V]});case "cull.face":return V(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);b.command(!!c,p,q.commandStr);return c},function(a,c,q){b.optional(function(){a.assert(c,q+'==="front"||'+q+'==="back"',"invalid cull.face")});return c.def(q,'==="front"?',1028,":",1029)});case "lineWidth":return V(function(a){b.command("number"===
typeof a&&a>=L.lineWidthDims[0]&&a<=L.lineWidthDims[1],"invalid line width, must be a positive number between "+L.lineWidthDims[0]+" and "+L.lineWidthDims[1],q.commandStr);return a},function(a,c,q){b.optional(function(){a.assert(c,"typeof "+q+'==="number"&&'+q+">="+L.lineWidthDims[0]+"&&"+q+"<="+L.lineWidthDims[1],"invalid line width")});return q});case "frontFace":return V(function(a){b.commandParameter(a,l,p,q.commandStr);return l[a]},function(a,c,q){b.optional(function(){a.assert(c,q+'==="cw"||'+
q+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return c.def(q+'==="cw"?2304:2305')});case "colorMask":return V(function(a){b.command(r(a)&&4===a.length,"color.mask must be length 4 array",q.commandStr);return a.map(function(a){return!!a})},function(a,q,c){b.optional(function(){a.assert(q,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return T(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return V(function(a){b.command("object"===typeof a&&a,
p,q.commandStr);var c="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",q.commandStr);return[c,a]},function(a,c,q){b.optional(function(){a.assert(c,q+"&&typeof "+q+'==="object"',"invalid sample.coverage")});var g=c.def('"value" in ',q,"?+",q,".value:1"),k=c.def("!!",q,".invert");return[g,k]})}});return z}function Ea(a,q){var g=a["static"],k=a.dynamic,z={};x(g).forEach(function(a){var c=g[a],k;if("number"===typeof c||
"boolean"===typeof c)k=f(function(){return c});else if("function"===typeof c){var V=c._reglType;"texture2d"===V||"textureCube"===V?k=f(function(a){return a.link(c)}):"framebuffer"===V||"framebufferCube"===V?(b.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',q.commandStr),k=f(function(a){return a.link(c.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',q.commandStr)}else r(c)?k=f(function(q){return q.global.def("[",T(c.length,function(g){b.command("number"===
typeof c[g]||"boolean"===typeof c[g],"invalid uniform "+a,q.commandStr);return c[g]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',q.commandStr);k.value=c;z[a]=k});x(k).forEach(function(a){var b=k[a];z[a]=c(b,function(a,c){return a.invoke(c,b)})});return z}function Pa(a,q){var g=a["static"],k=a.dynamic,z={};x(g).forEach(function(a){var c=g[a],k=m.id(a),V=new ia;if(d(c))V.state=1,V.buffer=fa.getBuffer(fa.create(c,34962,!1,!0)),V.type=0;else{var p=fa.getBuffer(c);if(p)V.state=
1,V.buffer=p,V.type=0;else if(b.command("object"===typeof c&&c,"invalid data for attribute "+a,q.commandStr),"constant"in c){var e=c.constant;V.buffer="null";V.state=2;"number"===typeof e?V.x=e:(b.command(r(e)&&0<e.length&&4>=e.length,"invalid constant for attribute "+a,q.commandStr),Q.forEach(function(a,b){b<e.length&&(V[a]=e[b])}))}else{p=d(c.buffer)?fa.getBuffer(fa.create(c.buffer,34962,!1,!0)):fa.getBuffer(c.buffer);b.command(!!p,'missing buffer for attribute "'+a+'"',q.commandStr);var l=c.offset|
0;b.command(0<=l,'invalid offset for attribute "'+a+'"',q.commandStr);var h=c.stride|0;b.command(0<=h&&256>h,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',q.commandStr);var t=c.size|0;b.command(!("size"in c)||0<t&&4>=t,'invalid size for attribute "'+a+'", must be 1,2,3,4',q.commandStr);var u=!!c.normalized,ma=0;"type"in c&&(b.commandParameter(c.type,D,"invalid type for attribute "+a,q.commandStr),ma=D[c.type]);var w=c.divisor|0;b.optional(function(){"divisor"in c&&(b.command(0===
w||X,'cannot specify divisor for attribute "'+a+'", instancing not supported',q.commandStr),b.command(0<=w,'invalid divisor for attribute "'+a+'"',q.commandStr));var g=q.commandStr,k="buffer offset divisor normalized type size stride".split(" ");x(c).forEach(function(c){b.command(0<=k.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+k+")",g)})});V.buffer=p;V.state=1;V.size=t;V.normalized=u;V.type=ma||p.dtype;V.offset=l;V.stride=h;V.divisor=w}}z[a]=f(function(a,
b){var c=a.attribCache;if(k in c)return c[k];var q={isStream:!1};x(V).forEach(function(a){q[a]=V[a]});V.buffer&&(q.buffer=a.link(V.buffer),q.type=q.type||q.buffer+".dtype");return c[k]=q})});x(k).forEach(function(a){var q=k[a];z[a]=c(q,function(c,g){function k(a){g(l[a],"=",V,".",a,"|0;")}var V=c.invoke(g,q),z=c.shared,f=c.constants,p=z.isBufferArgs,e=z.buffer;b.optional(function(){c.assert(g,V+"&&(typeof "+V+'==="object"||typeof '+V+'==="function")&&('+p+"("+V+")||"+e+".getBuffer("+V+")||"+e+".getBuffer("+
V+".buffer)||"+p+"("+V+'.buffer)||("constant" in '+V+"&&(typeof "+V+'.constant==="number"||'+z.isArrayLike+"("+V+".constant))))",'invalid dynamic attribute "'+a+'"')});var l={isStream:g.def(!1)},m=new ia;m.state=1;x(m).forEach(function(a){l[a]=g.def(""+m[a])});var h=l.buffer,t=l.type;g("if(",p,"(",V,")){",l.isStream,"=true;",h,"=",e,".createStream(",34962,",",V,");",t,"=",h,".dtype;","}else{",h,"=",e,".getBuffer(",V,");","if(",h,"){",t,"=",h,".dtype;",'}else if("constant" in ',V,"){",l.state,"=",
2,";","if(typeof "+V+'.constant === "number"){',l[Q[0]],"=",V,".constant;",Q.slice(1).map(function(a){return l[a]}).join("="),"=0;","}else{",Q.map(function(a,b){return l[a]+"="+V+".constant.length>"+b+"?"+V+".constant["+b+"]:0;"}).join(""),"}}else{","if(",p,"(",V,".buffer)){",h,"=",e,".createStream(",34962,",",V,".buffer);","}else{",h,"=",e,".getBuffer(",V,".buffer);","}",t,'="type" in ',V,"?",f.glTypes,"[",V,".type]:",h,".dtype;",l.normalized,"=!!",V,".normalized;");k("size");k("offset");k("stride");
k("divisor");g("}}");g.exit("if(",l.isStream,"){",e,".destroyStream(",h,");","}");return l})});return z}function tb(a){var b=a["static"],g=a.dynamic,k={};x(b).forEach(function(a){var c=b[a];k[a]=f(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});x(g).forEach(function(a){var b=g[a];k[a]=c(b,function(a,c){return a.invoke(c,b)})});return k}function Ha(a,c,g,k,z){function f(a){var b=h[a];b&&(ma[a]=b)}var p=a["static"],e=a.dynamic;b.optional(function(){function a(q){x(q).forEach(function(a){b.command(0<=
c.indexOf(a),'unknown parameter "'+a+'"',z.commandStr)})}var c="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(da);a(p);a(e)});var l=S(a,c),m=Vb(a,z),h=ab(a,m,z),t=ka(a,z),ma=ea(a,z),w=u(a,z,l);f("viewport");f(M("scissor.box"));var d=0<x(ma).length,m={framebuffer:m,draw:t,shader:w,state:ma,dirty:d,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=I(a,z);m.uniforms=Ea(g,z);m.drawVAO=m.scopeVAO=t.vao;if(!m.drawVAO&&w.program&&!l&&G.angle_instanced_arrays&&
t["static"].elements){var A=!0;a=w.program.attributes.map(function(a){a=c["static"][a];A=A&&!!a;return a});if(A&&0<a.length){var wa=La.getVAO(La.createVAO({attributes:a,elements:t["static"].elements}));m.drawVAO=new n(null,null,null,function(a,b){return a.link(wa)});m.useVAO=!0}}l?m.useVAO=!0:m.attributes=Pa(c,z);m.context=tb(k,z);return m}function W(a,b,c){var g=a.shared.context,k=a.scope();x(c).forEach(function(z){b.save(g,"."+z);var f=c[z].append(a,b);Array.isArray(f)?k(g,".",z,"=[",f.join(),"];"):
k(g,".",z,"=",f,";")});b(k)}function nb(a,b,c,g){var k=a.shared,z=k.gl,f=k.framebuffer,p;ha&&(p=b.def(k.extensions,".webgl_draw_buffers"));var e=a.constants,k=e.drawBuffer,e=e.backBuffer;a=c?c.append(a,b):b.def(f,".next");g||b("if(",a,"!==",f,".cur){");b("if(",a,"){",z,".bindFramebuffer(",36160,",",a,".framebuffer);");ha&&b(p,".drawBuffersWEBGL(",k,"[",a,".colorAttachments.length]);");b("}else{",z,".bindFramebuffer(",36160,",null);");ha&&b(p,".drawBuffersWEBGL(",e,");");b("}",f,".cur=",a,";");g||
b("}")}function ga(a,b,c){var g=a.shared,k=g.gl,f=a.current,p=a.next,e=g.current,l=g.next,m=a.cond(e,".dirty");da.forEach(function(b){b=M(b);if(!(b in c.state)){var q,g;if(b in p){q=p[b];g=f[b];var h=T(H[b].length,function(a){return m.def(q,"[",a,"]")});m(a.cond(h.map(function(a,b){return a+"!=="+g+"["+b+"]"}).join("||")).then(k,".",wa[b],"(",h,");",h.map(function(a,b){return g+"["+b+"]="+a}).join(";"),";"))}else q=m.def(l,".",b),h=a.cond(q,"!==",e,".",b),m(h),b in z?h(a.cond(q).then(k,".enable(",
z[b],");")["else"](k,".disable(",z[b],");"),e,".",b,"=",q,";"):h(k,".",wa[b],"(",q,");",e,".",b,"=",q,";")}});0===x(c.state).length&&m(e,".dirty=false;");b(m)}function pa(a,b,c,g){var k=a.shared,f=a.current,p=k.current,e=k.gl;y(x(c)).forEach(function(k){var l=c[k];if(!g||g(l)){var m=l.append(a,b);if(z[k]){var h=z[k];N(l)?m?b(e,".enable(",h,");"):b(e,".disable(",h,");"):b(a.cond(m).then(e,".enable(",h,");")["else"](e,".disable(",h,");"));b(p,".",k,"=",m,";")}else if(r(m)){var t=f[k];b(e,".",wa[k],
"(",m,");",m.map(function(a,b){return t+"["+b+"]="+a}).join(";"),";")}else b(e,".",wa[k],"(",m,");",p,".",k,"=",m,";")}})}function ac(a,b){X&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function pc(a,b,c,g,k){function z(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function f(a){u=b.def();a(u,"=",z(),";");"string"===typeof k?a(m,".count+=",k,";"):a(m,".count++;");Oa&&(g?(ma=b.def(),a(ma,"=",t,".getNumPendingQueries();")):a(t,".beginQuery(",m,");"))}
function p(a){a(m,".cpuTime+=",z(),"-",u,";");Oa&&(g?a(t,".pushScopeStats(",ma,",",t,".getNumPendingQueries(),",m,");"):a(t,".endQuery();"))}function e(a){var c=b.def(h,".profile");b(h,".profile=",a,";");b.exit(h,".profile=",c,";")}var l=a.shared,m=a.stats,h=l.current,t=l.timer;c=c.profile;var u,ma;if(c){if(N(c)){c.enable?(f(b),p(b.exit),e("true")):e("false");return}c=c.append(a,b);e(c)}else c=b.def(h,".profile");l=a.block();f(l);b("if(",c,"){",l,"}");a=a.block();p(a);b.exit("if(",c,"){",a,"}")}function ic(a,
c,g,k,z){function f(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function p(b,g,k){function z(){c("if(!",h,".buffer){",l,".enableVertexAttribArray(",m,");}");var b=k.type,f;f=k.size?c.def(k.size,"||",g):g;c("if(",h,".type!==",b,"||",h,".size!==",f,"||",ma.map(function(a){return h+"."+a+"!=="+k[a]}).join("||"),"){",l,".bindBuffer(",34962,",",t,".buffer);",l,".vertexAttribPointer(",[m,f,b,
k.normalized,k.stride,k.offset],");",h,".type=",b,";",h,".size=",f,";",ma.map(function(a){return h+"."+a+"="+k[a]+";"}).join(""),"}");X&&(b=k.divisor,c("if(",h,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,b],");",h,".divisor=",b,";}"))}function f(){c("if(",h,".buffer){",l,".disableVertexAttribArray(",m,");",h,".buffer=null;","}if(",Q.map(function(a,b){return h+"."+a+"!=="+u[b]}).join("||"),"){",l,".vertexAttrib4f(",m,",",u,");",Q.map(function(a,b){return h+"."+a+"="+u[b]+";"}).join(""),
"}")}var l=e.gl,m=c.def(b,".location"),h=c.def(e.attributes,"[",m,"]");b=k.state;var t=k.buffer,u=[k.x,k.y,k.z,k.w],ma=["buffer","normalized","offset","stride"];1===b?z():2===b?f():(c("if(",b,"===",1,"){"),z(),c("}else{"),f(),c("}"))}var e=a.shared;k.forEach(function(k){var e=k.name,m=g.attributes[e],l;if(m){if(!z(m))return;l=m.append(a,c)}else{if(!z(R))return;var h=a.scopeAttrib(e);b.optional(function(){a.assert(c,h+".state","missing attribute "+e)});l={};x(new ia).forEach(function(a){l[a]=c.def(h,
".",a)})}p(a.link(k),f(k.info.type),l)})}function rd(a,c,g,k,z,f){for(var p=a.shared,e=p.gl,l,h=0;h<k.length;++h){var t=k[h],u=t.name,ma=t.info.type,w=g.uniforms[u],t=a.link(t)+".location",d;if(w){if(!z(w))continue;if(N(w)){var A=w.value;b.command(null!==A&&"undefined"!==typeof A,'missing uniform "'+u+'"',a.commandStr);if(35678===ma||35680===ma)b.command("function"===typeof A&&(35678===ma&&("texture2d"===A._reglType||"framebuffer"===A._reglType)||35680===ma&&("textureCube"===A._reglType||"framebufferCube"===
A._reglType)),"invalid texture for uniform "+u,a.commandStr),w=a.link(A._texture||A.color[0]._texture),c(e,".uniform1i(",t,",",w+".bind());"),c.exit(w,".unbind();");else if(35674===ma||35675===ma||35676===ma){b.optional(function(){b.command(r(A),"invalid matrix for uniform "+u,a.commandStr);b.command(35674===ma&&4===A.length||35675===ma&&9===A.length||35676===ma&&16===A.length,"invalid length for matrix uniform "+u,a.commandStr)});var w=a.global.def("new Float32Array(["+Array.prototype.slice.call(A)+
"])"),x=2;35675===ma?x=3:35676===ma&&(x=4);c(e,".uniformMatrix",x,"fv(",t,",false,",w,");")}else{switch(ma){case 5126:b.commandType(A,"number","uniform "+u,a.commandStr);l="1f";break;case 35664:b.command(r(A)&&2===A.length,"uniform "+u,a.commandStr);l="2f";break;case 35665:b.command(r(A)&&3===A.length,"uniform "+u,a.commandStr);l="3f";break;case 35666:b.command(r(A)&&4===A.length,"uniform "+u,a.commandStr);l="4f";break;case 35670:b.commandType(A,"boolean","uniform "+u,a.commandStr);l="1i";break;case 5124:b.commandType(A,
"number","uniform "+u,a.commandStr);l="1i";break;case 35671:b.command(r(A)&&2===A.length,"uniform "+u,a.commandStr);l="2i";break;case 35667:b.command(r(A)&&2===A.length,"uniform "+u,a.commandStr);l="2i";break;case 35672:b.command(r(A)&&3===A.length,"uniform "+u,a.commandStr);l="3i";break;case 35668:b.command(r(A)&&3===A.length,"uniform "+u,a.commandStr);l="3i";break;case 35673:b.command(r(A)&&4===A.length,"uniform "+u,a.commandStr);l="4i";break;case 35669:b.command(r(A)&&4===A.length,"uniform "+u,
a.commandStr),l="4i"}c(e,".uniform",l,"(",t,",",r(A)?Array.prototype.slice.call(A):A,");")}continue}else d=w.append(a,c)}else{if(!z(R))continue;d=c.def(p.uniforms,"[",m.id(u),"]")}35678===ma?(b(!Array.isArray(d),"must specify a scalar prop for textures"),c("if(",d,"&&",d,'._reglType==="framebuffer"){',d,"=",d,".color[0];","}")):35680===ma&&(b(!Array.isArray(d),"must specify a scalar prop for cube maps"),c("if(",d,"&&",d,'._reglType==="framebufferCube"){',d,"=",d,".color[0];","}"));b.optional(function(){function g(b,
k){a.assert(c,b,'bad data or missing for uniform "'+u+'".  '+k)}function k(a){b(!Array.isArray(d),"must not specify an array type for uniform");g("typeof "+d+'==="'+a+'"',"invalid type, expected "+a)}function z(c,k){Array.isArray(d)?b(d.length===c,"must have length "+c):g(p.isArrayLike+"("+d+")&&"+d+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function f(c){b(!Array.isArray(d),"must not specify a value type");g("typeof "+d+'==="function"&&'+d+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(ma){case 5124:k("number");break;case 35667:z(2,"number");break;case 35668:z(3,"number");break;case 35669:z(4,"number");break;case 5126:k("number");break;case 35664:z(2,"number");break;case 35665:z(3,"number");break;case 35666:z(4,"number");break;case 35670:k("boolean");break;case 35671:z(2,"boolean");break;case 35672:z(3,"boolean");break;case 35673:z(4,"boolean");break;case 35674:z(4,"number");break;case 35675:z(9,"number");break;case 35676:z(16,
"number");break;case 35678:f(3553);break;case 35680:f(34067)}});w=1;switch(ma){case 35678:case 35680:w=c.def(d,"._texture");c(e,".uniform1i(",t,",",w,".bind());");c.exit(w,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";w=2;break;case 35668:case 35672:l="3i";w=3;break;case 35669:case 35673:l="4i";w=4;break;case 5126:l="1f";break;case 35664:l="2f";w=2;break;case 35665:l="3f";w=3;break;case 35666:l="4f";w=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";
break;case 35676:l="Matrix4fv"}if("M"===l.charAt(0)){c(e,".uniform",l,"(",t,",");var t=Math.pow(ma-35674+2,2),wa=a.global.def("new Float32Array(",t,")");Array.isArray(d)?c("false,(",T(t,function(a){return wa+"["+a+"]="+d[a]}),",",wa,")"):c("false,(Array.isArray(",d,")||",d," instanceof Float32Array)?",d,":(",T(t,function(a){return wa+"["+a+"]="+d+"["+a+"]"}),",",wa,")");c(");")}else{if(1<w){for(var x=[],J=[],v=0;v<w;++v)Array.isArray(d)?J.push(d[v]):J.push(c.def(d+"["+v+"]")),f&&x.push(c.def());f&&
c("if(!",a.batchId,"||",x.map(function(a,b){return a+"!=="+J[b]}).join("||"),"){",x.map(function(a,b){return a+"="+J[b]+";"}).join(""));c(e,".uniform",l,"(",t,",",J.join(","),");")}else b(!Array.isArray(d),"uniform value must not be an array"),f&&(w=c.def(),c("if(!",a.batchId,"||",w,"!==",d,"){",w,"=",d,";")),c(e,".uniform",l,"(",t,",",d,");");f&&c("}")}}}function tc(a,c,g,k){function z(b){var f=h[b];return f?f.contextDep&&k.contextDynamic||f.propDep?f.append(a,g):f.append(a,c):c.def(m,".",b)}function f(){function a(){g(A,
".drawElementsInstancedANGLE(",[u,d,x,ma+"<<(("+x+"-5121)>>1)",w],");")}function b(){g(A,".drawArraysInstancedANGLE(",[u,ma,d,w],");")}t&&"null"!==t?wa?a():(g("if(",t,"){"),a(),g("}else{"),b(),g("}")):b()}function p(){function a(){g(l+".drawElements("+[u,d,x,ma+"<<(("+x+"-5121)>>1)"]+");")}function b(){g(l+".drawArrays("+[u,ma,d]+");")}t&&"null"!==t?wa?a():(g("if(",t,"){"),a(),g("}else{"),b(),g("}")):b()}var e=a.shared,l=e.gl,m=e.draw,h=k.draw,t=function(){var b=h.elements,z=c;if(b){if(b.contextDep&&
k.contextDynamic||b.propDep)z=g;b=b.append(a,z);h.elementsActive&&z("if("+b+")"+l+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=z.def(),z(b,"=",m,".","elements",";","if(",b,"){",l,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",e.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+e.vao,".currentVAO.elements);",ra?"":"if("+b+")"+l+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),u=z("primitive"),ma=z("offset"),d=function(){var z=h.count,f,p=c;if(z){if(z.contextDep&&
k.contextDynamic||z.propDep)p=g;f=z.append(a,p);b.optional(function(){z.MISSING&&a.assert(c,"false","missing vertex count");z.DYNAMIC&&a.assert(p,f+">=0","missing vertex count")})}else f=p.def(m,".","count"),b.optional(function(){a.assert(p,f+">=0","missing vertex count")});return f}();if("number"===typeof d){if(0===d)return}else g("if(",d,"){"),g.exit("}");var w,A;X&&(w=z("instances"),A=a.instancing);var x=t+".type",wa=h.elements&&N(h.elements)&&!h.vaoActive;X&&("number"!==typeof w||0<=w)?"string"===
typeof w?(g("if(",w,">0){"),f(),g("}else if(",w,"<0){"),p(),g("}")):f():p()}function Y(a,c,g,k,z){var f=C();z=f.proc("body",z);b.optional(function(){f.commandStr=c.commandStr;f.command=f.link(c.commandStr)});X&&(f.instancing=z.def(f.shared.extensions,".angle_instanced_arrays"));a(f,z,g,k);return f.compile().body}function J(a,b,c,g){ac(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,".setVAO(null);"),
ic(a,b,c,g.attributes,function(){return!0}));rd(a,b,c,g.uniforms,function(){return!0},!1);tc(a,b,b,c)}function ja(a,b){var c=a.proc("draw",1);ac(a,c);W(a,c,b.context);nb(a,c,b.framebuffer);ga(a,c,b);pa(a,c,b.state);pc(a,c,b,!1,!0);var g=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",g,".program);");if(b.shader.program)J(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var k=a.global.def("{}"),z=c.def(g,".id"),f=c.def(k,"[",z,"]");c(a.cond(f).then(f,".call(this,a0);")["else"](f,
"=",k,"[",z,"]=",a.link(function(c){return Y(J,a,b,c,1)}),"(",g,");",f,".call(this,a0);"))}0<x(b.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Ca(a,b,c,g){function k(){return!0}a.batchId="a1";ac(a,b);ic(a,b,c,g.attributes,k);rd(a,b,c,g.uniforms,k,!1);tc(a,b,b,c)}function ub(a,b,c,g){function k(a){return a.contextDep&&f||a.propDep}function z(a){return!k(a)}ac(a,b);var f=c.contextDep,p=b.def(),e=b.def();a.shared.props=e;a.batchId=p;var l=a.scope(),
m=a.scope();b(l.entry,"for(",p,"=0;",p,"<","a1",";++",p,"){",e,"=","a0","[",p,"];",m,"}",l.exit);c.needsContext&&W(a,m,c.context);c.needsFramebuffer&&nb(a,m,c.framebuffer);pa(a,m,c.state,k);c.profile&&k(c.profile)&&pc(a,m,c,!1,!0);g?(c.useVAO?c.drawVAO?k(c.drawVAO)?m(a.shared.vao,".setVAO(",c.drawVAO.append(a,m),");"):l(a.shared.vao,".setVAO(",c.drawVAO.append(a,l),");"):l(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(l(a.shared.vao,".setVAO(null);"),ic(a,l,c,g.attributes,z),ic(a,m,c,g.attributes,
k)),rd(a,l,c,g.uniforms,z,!1),rd(a,m,c,g.uniforms,k,!0),tc(a,l,m,c)):(b=a.global.def("{}"),g=c.shader.progVar.append(a,m),e=m.def(g,".id"),l=m.def(b,"[",e,"]"),m(a.shared.gl,".useProgram(",g,".program);","if(!",l,"){",l,"=",b,"[",e,"]=",a.link(function(b){return Y(Ca,a,c,b,2)}),"(",g,");}",l,".call(this,a0[",p,"],",p,");"))}function Jc(a,b){function c(a){return a.contextDep&&k||a.propDep}var g=a.proc("batch",2);a.batchId="0";ac(a,g);var k=!1,z=!0;x(b.context).forEach(function(a){k=k||b.context[a].propDep});
k||(W(a,g,b.context),z=!1);var f=b.framebuffer,p=!1;f?(f.propDep?k=p=!0:f.contextDep&&k&&(p=!0),p||nb(a,g,f)):nb(a,g,null);b.state.viewport&&b.state.viewport.propDep&&(k=!0);ga(a,g,b);pa(a,g,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||pc(a,g,b,!1,"a1");b.contextDep=k;b.needsContext=z;b.needsFramebuffer=p;z=b.shader.progVar;if(z.contextDep&&k||z.propDep)ub(a,g,b,null);else if(z=z.append(a,g),g(a.shared.gl,".useProgram(",z,".program);"),b.shader.program)ub(a,g,b,b.shader.program);else{g(a.shared.vao,
".setVAO(null);");var f=a.global.def("{}"),p=g.def(z,".id"),e=g.def(f,"[",p,"]");g(a.cond(e).then(e,".call(this,a0,a1);")["else"](e,"=",f,"[",p,"]=",a.link(function(c){return Y(ub,a,b,c,2)}),"(",z,");",e,".call(this,a0,a1);"))}0<x(b.state).length&&g(a.shared.current,".dirty=true;");a.shared.vao&&g(a.shared.vao,".setVAO(null);")}function Uc(a,b){function c(z){var f=b.shader[z];f&&g.set(k.shader,"."+z,f.append(a,g))}var g=a.proc("scope",3);a.batchId="a2";var k=a.shared,z=k.current;W(a,g,b.context);
b.framebuffer&&b.framebuffer.append(a,g);y(x(b.state)).forEach(function(c){var z=b.state[c].append(a,g);r(z)?z.forEach(function(b,k){g.set(a.next[c],"["+k+"]",b)}):g.set(k.next,"."+c,z)});pc(a,g,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var z=b.draw[c];z&&g.set(k.draw,"."+c,""+z.append(a,g))});x(b.uniforms).forEach(function(c){var z=b.uniforms[c].append(a,g);Array.isArray(z)&&(z="["+z.join()+"]");g.set(k.uniforms,"["+m.id(c)+"]",z)});x(b.attributes).forEach(function(c){var k=
b.attributes[c].append(a,g),z=a.scopeAttrib(c);x(new ia).forEach(function(a){g.set(z,"."+a,k[a])})});b.scopeVAO&&g.set(k.vao,".targetVAO",b.scopeVAO.append(a,g));c("vert");c("frag");0<x(b.state).length&&(g(z,".dirty=true;"),g.exit(z,".dirty=true;"));g("a1(",a.shared.context,",a0,",a.batchId,");")}function F(a){if("object"===typeof a&&!r(a)){for(var b=x(a),c=0;c<b.length;++c)if(E.isDynamic(a[b[c]]))return!0;return!1}}function w(a,b,g){function k(a,b){p.forEach(function(c){var g=z[c];E.isDynamic(g)&&
(g=a.invoke(b,g),b(h,".",c,"=",g,";"))})}var z=b["static"][g];if(z&&F(z)){var f=a.global,p=x(z),e=!1,l=!1,m=!1,h=a.global.def("{}");p.forEach(function(b){var g=z[b];if(E.isDynamic(g))"function"===typeof g&&(g=z[b]=E.unbox(g)),b=c(g,null),e=e||b.thisDep,m=m||b.propDep,l=l||b.contextDep;else{f(h,".",b,"=");switch(typeof g){case "number":f(g);break;case "string":f('"',g,'"');break;case "object":Array.isArray(g)&&f("[",g.join(),"]");break;default:f(a.link(g))}f(";")}});b.dynamic[g]=new E.DynamicVariable(4,
{thisDep:e,contextDep:l,propDep:m,ref:h,append:k});delete b["static"][g]}}var ia=La.Record,va={add:32774,subtract:32778,"reverse subtract":32779};G.ext_blend_minmax&&(va.min=32775,va.max=32776);var X=G.angle_instanced_arrays,ha=G.webgl_draw_buffers,ra=G.oes_vertex_array_object,H={dirty:!0,profile:ba.profile},t={},da=[],z={},wa={};O("dither",3024);O("blend.enable",3042);U("blend.color","blendColor",[0,0,0,0]);U("blend.equation","blendEquationSeparate",[32774,32774]);U("blend.func","blendFuncSeparate",
[1,0,1,0]);O("depth.enable",2929,!0);U("depth.func","depthFunc",513);U("depth.range","depthRange",[0,1]);U("depth.mask","depthMask",!0);U("colorMask","colorMask",[!0,!0,!0,!0]);O("cull.enable",2884);U("cull.face","cullFace",1029);U("frontFace","frontFace",2305);U("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);U("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);U("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);U("stencil.mask",
"stencilMask",-1);U("stencil.func","stencilFunc",[519,0,-1]);U("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);U("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);O("scissor.enable",3089);U("scissor.box","scissor",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);U("viewport","viewport",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);var ma={gl:K,context:oa,strings:m,next:t,current:H,draw:Ld,elements:a,buffer:fa,shader:Eb,attributes:La.state,vao:La,uniforms:la,framebuffer:aa,
extensions:G,timer:Oa,isBufferArgs:d},k={primTypes:B,compareFuncs:h,blendFuncs:P,blendEquations:va,stencilOps:e,glTypes:D,orientationType:l};b.optional(function(){ma.isArrayLike=r});ha&&(k.backBuffer=[1029],k.drawBuffer=T(L.maxDrawbuffers,function(a){return 0===a?[0]:T(a,function(a){return 36064+a})}));var mc=0;return{next:t,current:H,procs:function(){var a=C(),b=a.proc("poll"),c=a.proc("refresh"),g=a.block();b(g);c(g);var k=a.shared,f=k.gl,p=k.next,e=k.current;g(e,".dirty=false;");nb(a,b);nb(a,c,
null,!0);var l;X&&(l=a.link(X));G.oes_vertex_array_object&&c(a.link(G.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<L.maxAttributes;++m){var h=c.def(k.attributes,"[",m,"]"),t=a.cond(h,".buffer");t.then(f,".enableVertexAttribArray(",m,");",f,".bindBuffer(",34962,",",h,".buffer.buffer);",f,".vertexAttribPointer(",m,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);")["else"](f,".disableVertexAttribArray(",m,");",f,".vertexAttrib4f(",m,",",h,".x,",h,".y,",h,".z,",
h,".w);",h,".buffer=null;");c(t);X&&c(l,".vertexAttribDivisorANGLE(",m,",",h,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");x(z).forEach(function(k){var l=z[k],m=g.def(p,".",k),h=a.block();h("if(",m,"){",f,".enable(",l,")}else{",f,".disable(",l,")}",e,".",k,"=",m,";");c(h);b("if(",m,"!==",e,".",k,"){",h,"}")});x(wa).forEach(function(k){var z=wa[k],l=H[k],m,h,t=a.block();t(f,".",z,"(");r(l)?(z=l.length,m=a.global.def(p,".",k),h=a.global.def(e,
".",k),t(T(z,function(a){return m+"["+a+"]"}),");",T(z,function(a){return h+"["+a+"]="+m+"["+a+"];"}).join("")),b("if(",T(z,function(a){return m+"["+a+"]!=="+h+"["+a+"]"}).join("||"),"){",t,"}")):(m=g.def(p,".",k),h=g.def(e,".",k),t(m,");",e,".",k,"=",m,";"),b("if(",m,"!==",h,"){",t,"}"));c(t)});return a.compile()}(),compile:function(a,b,c,g,k){var z=C();z.stats=z.link(k);x(b["static"]).forEach(function(a){w(z,b,a)});A.forEach(function(b){w(z,a,b)});var f=Ha(a,b,c,g,z);ja(z,f);Uc(z,f);Jc(z,f);return v(z.compile(),
{destroy:function(){f.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(C,ca,Ja){function d(f,b){this.id=c++;this.type=f;this.data=b}function y(c){if(0===c.length)return[];var b=c.charAt(0),f=c.charAt(c.length-1);if(1<c.length&&b===f&&('"'===b||"'"===
b))return['"'+c.substr(1,c.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c))return y(c.substr(0,b.index)).concat(y(b[1])).concat(y(c.substr(b.index+b[0].length)));b=c.split(".");if(1===b.length)return['"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];c=[];for(f=0;f<b.length;++f)c=c.concat(y(b[f]));return c}function n(c){return"["+y(c).join("][")+"]"}function N(c,b){if("function"===typeof c)return new d(0,c);if("number"===typeof c||
"boolean"===typeof c)return new d(5,c);if(Array.isArray(c))return new d(6,c.map(function(c,f){return N(c,b+"["+f+"]")}));if(c instanceof d)return c;f(!1,"invalid option type in uniform "+b)}var f=C("./util/check"),c=0;ca.exports={DynamicVariable:d,define:function(c,b){return new d(c,n(b+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof d},unbox:N,accessor:n}},{"./util/check":21}],10:[function(C,ca,Ja){var d=C("./util/check"),y=C("./util/is-typed-array"),n=C("./util/is-ndarray"),
N=C("./util/values"),f=C("./constants/primitives.json"),c=C("./constants/usage.json");ca.exports=function(x,b,v,na){function T(b){this.id=E++;r[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function K(c,f,r,B,h,e,g){c.buffer.bind();var l;f?((l=g)||y(f)&&(!n(f)||y(f.data))||(l=b.oes_element_index_uint?5125:5123),v._initBuffer(c.buffer,f,r,l,3)):(x.bufferData(34963,e,r),c.buffer.dtype=l||5121,c.buffer.usage=r,c.buffer.dimension=3,c.buffer.byteLength=e);l=g;if(!g){switch(c.buffer.dtype){case 5121:case 5120:l=
5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:d.raise("unsupported type for element array")}c.buffer.dtype=l}c.type=l;d(5125!==l||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=h;0>f&&(f=c.buffer.byteLength,5123===l?f>>=1:5125===l&&(f>>=2));c.vertCount=f;f=B;0>B&&(f=4,B=c.buffer.dimension,1===B&&(f=0),2===B&&(f=1),3===B&&(f=4));c.primType=f}function G(b){na.elementsCount--;d(null!==b.buffer,"must not double destroy elements");
delete r[b.id];b.buffer.destroy();b.buffer=null}var r={},E=0,B={uint8:5121,uint16:5123};b.oes_element_index_uint&&(B.uint32=5125);T.prototype.bind=function(){this.buffer.bind()};var D=[];return{create:function(b,A){function r(b){if(b)if("number"===typeof b)x(b),h.primType=4,h.vertCount=b|0,h.type=5121;else{var g=null,l=35044,A=-1,v=-1,m=0,D=0;if(Array.isArray(b)||y(b)||n(b))g=b;else if(d.type(b,"object","invalid arguments for elements"),"data"in b&&(g=b.data,d(Array.isArray(g)||y(g)||n(g),"invalid data for element buffer")),
"usage"in b&&(d.parameter(b.usage,c,"invalid element buffer usage"),l=c[b.usage]),"primitive"in b&&(d.parameter(b.primitive,f,"invalid element buffer primitive"),A=f[b.primitive]),"count"in b&&(d("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),v=b.count|0),"type"in b&&(d.parameter(b.type,B,"invalid buffer type"),D=B[b.type]),"length"in b)m=b.length|0;else if(m=v,5123===D||5122===D)m*=2;else if(5125===D||5124===D)m*=4;K(h,g,l,A,v,m,D)}else x(),h.primType=4,h.vertCount=0,
h.type=5121;return r}var x=v.create(null,34963,!0),h=new T(x._buffer);na.elementsCount++;r(b);r._reglType="elements";r._elements=h;r.subdata=function(b,c){x.subdata(b,c);return r};r.destroy=function(){G(h)};return r},createStream:function(b){var c=D.pop();c||(c=new T(v.create(null,34963,!0,!1)._buffer));K(c,b,35040,-1,-1,0,0);return c},destroyStream:function(b){D.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof T?b._elements:null},clear:function(){N(r).forEach(G)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(C,ca,Ja){var d=C("./util/sorted-object-keys"),y=C("./util/check");ca.exports=function(n,N){function f(b){y.type(b,"string","extension name must be string");b=b.toLowerCase();var f;try{f=c[b]=n.getExtension(b)}catch(d){}return!!f}for(var c={},x=0;x<N.extensions.length;++x){var b=N.extensions[x];if(!f(b))return N.onDestroy(),N.onDone('"'+b+
'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}N.optionalExtensions.forEach(f);return{extensions:c,restore:function(){d(c).forEach(function(b){if(c[b]&&!f(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(C,ca,Ja){var d=C("./util/check"),y=C("./util/values"),n=C("./util/extend"),N=[6407,6408],f=[];f[6408]=4;f[6407]=3;var c=[];c[5121]=1;c[5126]=4;c[36193]=
2;var x=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ca.exports=function(v,na,T,K,G,r){function E(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var g=a=0;b?(a=b.width,g=b.height):c&&(a=c.width,g=c.height);this.width=a;this.height=g}function B(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function D(a,
b,c){if(a){if(a.texture){a=a.texture._texture;var g=Math.max(1,a.height);d(Math.max(1,a.width)===b&&g===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,d(a.width===b&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function Q(a,b){b&&(b.texture?v.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):v.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function A(a){var b=3553,c=null,g=null,
f=a;"object"===typeof a&&(f=a.data,"target"in a&&(b=a.target|0));d.type(f,"function","invalid attachment data");a=f._reglType;"texture2d"===a?(c=f,d(3553===b)):"textureCube"===a?(c=f,d(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(g=f,b=36161):d.raise("invalid regl object for attachment");return new E(b,c,g)}function P(a,b,c,g,f){if(c)return a=K.create2D({width:a,height:b,format:g,type:f}),a._texture.refCount=0,new E(3553,a,null);a=G.create({width:a,height:b,format:g});a._renderbuffer.refCount=
0;return new E(36161,null,a)}function C(a){return a&&(a.texture||a.renderbuffer)}function h(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function e(){this.id=a++;p[this.id]=this;this.framebuffer=v.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function g(a){a.colorAttachments.forEach(B);B(a.depthAttachment);B(a.stencilAttachment);B(a.depthStencilAttachment)}
function l(a){var b=a.framebuffer;d(b,"must not double destroy framebuffer");v.deleteFramebuffer(b);a.framebuffer=null;r.framebufferCount--;delete p[a.id]}function R(a){var c;v.bindFramebuffer(36160,a.framebuffer);var g=a.colorAttachments;for(c=0;c<g.length;++c)Q(36064+c,g[c]);for(c=g.length;c<T.maxColorAttachments;++c)v.framebufferTexture2D(36160,36064+c,3553,null,0);v.framebufferTexture2D(36160,33306,3553,null,0);v.framebufferTexture2D(36160,36096,3553,null,0);v.framebufferTexture2D(36160,36128,
3553,null,0);Q(36096,a.depthAttachment);Q(36128,a.stencilAttachment);Q(33306,a.depthStencilAttachment);a=v.checkFramebufferStatus(36160);v.isContextLost()||36053===a||d.raise("framebuffer configuration not supported, status = "+b[a]);v.bindFramebuffer(36160,m.next?m.next.framebuffer:null);m.cur=m.next;v.getError()}function Z(a,b){function p(a,b){var l;d(m.next!==y,"can not update framebuffer which is currently in use");var e=0,h=0,r=!0,v=!0;l=null;var B=!0,n="rgba",K="uint8",E=1,G=null,u=null,aa=
null,Q=!1;if("number"===typeof a)e=a|0,h=b|0||e;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(h=a.shape,d(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),e=h[0],h=h[1]):("radius"in a&&(e=h=a.radius),"width"in a&&(e=a.width),"height"in a&&(h=a.height));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&d(1===l.length||na.webgl_draw_buffers,"multiple render targets not supported");if(!l){"colorCount"in a&&(E=a.colorCount|0,d(0<E,"invalid color buffer count"));
"colorTexture"in a&&(B=!!a.colorTexture,n="rgba4");if("colorType"in a){K=a.colorType;if(B)d(na.oes_texture_float||!("float"===K||"float32"===K),"you must enable OES_texture_float in order to use floating point framebuffer objects"),d(na.oes_texture_half_float||!("half float"===K||"float16"===K),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===K||"float16"===K)d(na.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
n="rgba16f";else if("float"===K||"float32"===K)d(na.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),n="rgba32f";d.oneOf(K,fa,"invalid color type")}"colorFormat"in a&&(n=a.colorFormat,0<=qa.indexOf(n)?B=!0:0<=L.indexOf(n)?B=!1:d.optional(function(){if(B)d.oneOf(a.colorFormat,qa,"invalid color format for texture");else d.oneOf(a.colorFormat,L,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in
a)Q=!(!a.depthTexture&&!a.depthStencilTexture),d(!Q||na.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?r=a.depth:(G=a.depth,v=!1));"stencil"in a&&("boolean"===typeof a.stencil?v=a.stencil:(u=a.stencil,r=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?r=v=a.depthStencil:(aa=a.depthStencil,v=r=!1))}else e=h=1;var Z=null,la=null,tb=null,Ha=null;if(Array.isArray(l))Z=l.map(A);else if(l)Z=[A(l)];else for(Z=Array(E),l=0;l<E;++l)Z[l]=
P(e,h,B,n,K);d(na.webgl_draw_buffers||1>=Z.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");d(Z.length<=T.maxColorAttachments,"too many color attachments, not supported");e=e||Z[0].width;h=h||Z[0].height;G?la=A(G):r&&!v&&(la=P(e,h,Q,"depth","uint32"));u?tb=A(u):v&&!r&&(tb=P(e,h,!1,"stencil","uint8"));aa?Ha=A(aa):!G&&!u&&v&&r&&(Ha=P(e,h,Q,"depth stencil","depth stencil"));d(1>=!!G+!!u+!!aa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
r=null;for(l=0;l<Z.length;++l)D(Z[l],e,h),d(!Z[l]||Z[l].texture&&0<=N.indexOf(Z[l].texture._texture.format)||Z[l].renderbuffer&&0<=x.indexOf(Z[l].renderbuffer._renderbuffer.format),"framebuffer color attachment "+l+" is invalid"),Z[l]&&Z[l].texture&&(v=f[Z[l].texture._texture.format]*c[Z[l].texture._texture.type],null===r?r=v:d(r===v,"all color attachments much have the same number of bits per pixel."));D(la,e,h);d(!la||la.texture&&6402===la.texture._texture.format||la.renderbuffer&&33189===la.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");D(tb,e,h);d(!tb||tb.renderbuffer&&36168===tb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");D(Ha,e,h);d(!Ha||Ha.texture&&34041===Ha.texture._texture.format||Ha.renderbuffer&&34041===Ha.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");g(y);y.width=e;y.height=h;y.colorAttachments=Z;y.depthAttachment=la;y.stencilAttachment=tb;y.depthStencilAttachment=Ha;p.color=Z.map(C);
p.depth=C(la);p.stencil=C(tb);p.depthStencil=C(Ha);p.width=y.width;p.height=y.height;R(y);return p}var y=new e;r.framebufferCount++;p(a,b);return n(p,{resize:function(a,b){d(m.next!==y,"can not resize a framebuffer which is currently in use");var c=Math.max(a|0,1),g=Math.max(b|0||c,1);if(c===y.width&&g===y.height)return p;for(var f=y.colorAttachments,l=0;l<f.length;++l)h(f[l],c,g);h(y.depthAttachment,c,g);h(y.stencilAttachment,c,g);h(y.depthStencilAttachment,c,g);y.width=p.width=c;y.height=p.height=
g;R(y);return p},_reglType:"framebuffer",_framebuffer:y,destroy:function(){l(y);g(y)},use:function(a){m.setFBO({framebuffer:p},a)}})}var m={cur:null,next:null,dirty:!1,setFBO:null},qa=["rgba"],L=["rgba4","rgb565","rgb5 a1"];na.ext_srgb&&L.push("srgba");na.ext_color_buffer_half_float&&L.push("rgba16f","rgb16f");na.webgl_color_buffer_float&&L.push("rgba32f");var fa=["uint8"];na.oes_texture_half_float&&fa.push("half float","float16");na.oes_texture_float&&fa.push("float","float32");var a=0,p={};return n(m,
{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof e)?a:null},create:Z,createCube:function(a){function b(a){var g;d(0>c.indexOf(m.next),"can not update framebuffer which is currently in use");var f={color:null},p=0,l=null;g="rgba";var e="uint8",h=1;if("number"===typeof a)p=a|0;else if(a){d.type(a,"object","invalid arguments for framebuffer");"shape"in a?(p=a.shape,d(Array.isArray(p)&&2<=p.length,"invalid shape for framebuffer"),d(p[0]===
p[1],"cube framebuffer must be square"),p=p[0]):("radius"in a&&(p=a.radius|0),"width"in a?(p=a.width|0,"height"in a&&d(a.height===p,"must be square")):"height"in a&&(p=a.height|0));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&d(1===l.length||na.webgl_draw_buffers,"multiple render targets not supported");l||("colorCount"in a&&(h=a.colorCount|0,d(0<h,"invalid color buffer count")),"colorType"in a&&(d.oneOf(a.colorType,fa,"invalid color type"),e=a.colorType),"colorFormat"in a&&
(g=a.colorFormat,d.oneOf(a.colorFormat,qa,"invalid color format for texture")));"depth"in a&&(f.depth=a.depth);"stencil"in a&&(f.stencil=a.stencil);"depthStencil"in a&&(f.depthStencil=a.depthStencil)}else p=1;if(l)if(Array.isArray(l))for(a=[],g=0;g<l.length;++g)a[g]=l[g];else a=[l];else for(a=Array(h),l={radius:p,format:g,type:e},g=0;g<h;++g)a[g]=K.createCube(l);f.color=Array(a.length);for(g=0;g<a.length;++g)h=a[g],d("function"===typeof h&&"textureCube"===h._reglType,"invalid cube map"),p=p||h.width,
d(h.width===p&&h.height===p,"invalid cube map shape"),f.color[g]={target:34069,data:a[g]};for(g=0;6>g;++g){for(h=0;h<a.length;++h)f.color[h].target=34069+g;0<g&&(f.depth=c[0].depth,f.stencil=c[0].stencil,f.depthStencil=c[0].depthStencil);if(c[g])c[g](f);else c[g]=Z(f)}return n(b,{width:p,height:p,color:a})}var c=Array(6);b(a);return n(b,{faces:c,resize:function(a){var g=a|0;d(0<g&&g<=T.maxCubeMapSize,"invalid radius for cube fbo");if(g===b.width)return b;var f=b.color;for(a=0;a<f.length;++a)f[a].resize(g);
for(a=0;6>a;++a)c[a].resize(g);b.width=b.height=g;return b},_reglType:"framebufferCube",destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){y(p).forEach(l)},restore:function(){m.cur=null;m.next=null;m.dirty=!0;y(p).forEach(function(a){a.framebuffer=v.createFramebuffer();R(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(C,ca,Ja){var d=C("./util/sorted-object-keys"),y=C("./util/pool");ca.exports=function(n,N){var f=1;N.ext_texture_filter_anisotropic&&
(f=n.getParameter(34047));var c=1,x=1;N.webgl_draw_buffers&&(c=n.getParameter(34852),x=n.getParameter(36063));var b=!!N.oes_texture_float;if(b){b=n.createTexture();n.bindTexture(3553,b);n.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var v=n.createFramebuffer();n.bindFramebuffer(36160,v);n.framebufferTexture2D(36160,36064,3553,b,0);n.bindTexture(3553,null);if(36053!==n.checkFramebufferStatus(36160))b=!1;else{n.viewport(0,0,1,1);n.clearColor(1,0,0,1);n.clear(16384);var na=y.allocType(5126,4);n.readPixels(0,
0,1,1,6408,5126,na);n.getError()?b=!1:(n.deleteFramebuffer(v),n.deleteTexture(b),b=1===na[0]);y.freeType(na)}}na=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(na=n.createTexture(),v=y.allocType(5121,36),n.activeTexture(33984),n.bindTexture(34067,na),n.texImage2D(34069,0,6408,3,3,0,6408,5121,v),y.freeType(v),n.bindTexture(34067,null),n.deleteTexture(na),na=!n.getError());return{colorBits:[n.getParameter(3410),
n.getParameter(3411),n.getParameter(3412),n.getParameter(3413)],depthBits:n.getParameter(3414),stencilBits:n.getParameter(3415),subpixelBits:n.getParameter(3408),extensions:d(N).filter(function(b){return!!N[b]}),maxAnisotropic:f,maxDrawbuffers:c,maxColorAttachments:x,pointSizeDims:n.getParameter(33901),lineWidthDims:n.getParameter(33902),maxViewportDims:n.getParameter(3386),maxCombinedTextureUnits:n.getParameter(35661),maxCubeMapSize:n.getParameter(34076),maxRenderbufferSize:n.getParameter(34024),
maxTextureUnits:n.getParameter(34930),maxTextureSize:n.getParameter(3379),maxAttributes:n.getParameter(34921),maxVertexUniforms:n.getParameter(36347),maxVertexTextureUnits:n.getParameter(35660),maxVaryingVectors:n.getParameter(36348),maxFragmentUniforms:n.getParameter(36349),glsl:n.getParameter(35724),renderer:n.getParameter(7937),vendor:n.getParameter(7936),version:n.getParameter(7938),readFloat:b,npotTextureCube:na}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(C,ca,Ja){var d=
C("./util/check"),y=C("./util/is-typed-array");ca.exports=function(n,N,f,c,x,b,v){function na(K){var G;null===N.next?(d(x.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),G=5121):(d(null!==N.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),G=N.next.colorAttachments[0].texture._texture.type,d.optional(function(){b.oes_texture_float?(d(5121===G||5126===G,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),
5126===G&&d(v.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):d(5121===G,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var r=0,E=0,B=c.framebufferWidth,D=c.framebufferHeight,T=null;y(K)?T=K:K&&(d.type(K,"object","invalid arguments to regl.read()"),r=K.x|0,E=K.y|0,d(0<=r&&r<c.framebufferWidth,"invalid x offset for regl.read"),d(0<=E&&E<c.framebufferHeight,"invalid y offset for regl.read"),
B=(K.width||c.framebufferWidth-r)|0,D=(K.height||c.framebufferHeight-E)|0,T=K.data||null);T&&(5121===G?d(T instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===G&&d(T instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));d(0<B&&B+r<=c.framebufferWidth,"invalid width for read pixels");d(0<D&&D+E<=c.framebufferHeight,"invalid height for read pixels");f();K=B*D*4;T||(5121===G?T=new Uint8Array(K):
5126===G&&(T=T||new Float32Array(K)));d.isTypedArray(T,"data buffer for regl.read() must be a typedarray");d(T.byteLength>=K,"data buffer for regl.read() too small");n.pixelStorei(3333,4);n.readPixels(r,E,B,D,6408,G,T);return T}function T(b){var c;N.setFBO({framebuffer:b.framebuffer},function(){c=na(b)});return c}return function(b){return b&&"framebuffer"in b?T(b):na(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(C,ca,Ja){var d=C("./util/sorted-object-keys"),y=C("./util/check"),
n=C("./util/values"),N=[];N[32854]=2;N[32855]=2;N[36194]=2;N[33189]=2;N[36168]=1;N[34041]=4;N[35907]=4;N[34836]=16;N[34842]=8;N[34843]=6;ca.exports=function(f,c,x,b,v){function na(b){this.id=r++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;v.profile&&(this.stats={size:0})}function T(c){var d=c.renderbuffer;y(d,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(d);c.renderbuffer=null;c.refCount=0;delete E[c.id];b.renderbufferCount--}
var K={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(K.srgba=35907);c.ext_color_buffer_half_float&&(K.rgba16f=34842,K.rgb16f=34843);c.webgl_color_buffer_float&&(K.rgba32f=34836);var G=[];d(K).forEach(function(b){G[K[b]]=b});var r=0,E={};na.prototype.decRef=function(){0>=--this.refCount&&T(this)};v.profile&&(b.getTotalRenderbufferSize=function(){var b=0;d(E).forEach(function(c){b+=E[c].stats.size});return b});return{create:function(c,d){function r(b,
c){var h=0,e=0,g=32854;"object"===typeof b&&b?("shape"in b?(e=b.shape,y(Array.isArray(e)&&2<=e.length,"invalid renderbuffer shape"),h=e[0]|0,e=e[1]|0):("radius"in b&&(h=e=b.radius|0),"width"in b&&(h=b.width|0),"height"in b&&(e=b.height|0)),"format"in b&&(y.parameter(b.format,K,"invalid renderbuffer format"),g=K[b.format])):"number"===typeof b?(h=b|0,e="number"===typeof c?c|0:h):b?y.raise("invalid arguments to renderbuffer constructor"):h=e=1;y(0<h&&0<e&&h<=x.maxRenderbufferSize&&e<=x.maxRenderbufferSize,
"invalid renderbuffer size");if(h!==A.width||e!==A.height||g!==A.format)return r.width=A.width=h,r.height=A.height=e,A.format=g,f.bindRenderbuffer(36161,A.renderbuffer),f.renderbufferStorage(36161,g,h,e),y(0===f.getError(),"invalid render buffer format"),v.profile&&(A.stats.size=N[A.format]*A.width*A.height),r.format=G[A.format],r}var A=new na(f.createRenderbuffer());E[A.id]=A;b.renderbufferCount++;r(c,d);r.resize=function(b,c){var h=b|0,e=c|0||h;if(h===A.width&&e===A.height)return r;y(0<h&&0<e&&
h<=x.maxRenderbufferSize&&e<=x.maxRenderbufferSize,"invalid renderbuffer size");r.width=A.width=h;r.height=A.height=e;f.bindRenderbuffer(36161,A.renderbuffer);f.renderbufferStorage(36161,A.format,h,e);y(0===f.getError(),"invalid render buffer format");v.profile&&(A.stats.size=N[A.format]*A.width*A.height);return r};r._reglType="renderbuffer";r._renderbuffer=A;v.profile&&(r.stats=A.stats);r.destroy=function(){A.decRef()};return r},clear:function(){n(E).forEach(T)},restore:function(){n(E).forEach(function(b){b.renderbuffer=
f.createRenderbuffer();f.bindRenderbuffer(36161,b.renderbuffer);f.renderbufferStorage(36161,b.format,b.width,b.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(C,ca,Ja){var d=C("./util/sorted-object-keys"),y=C("./util/check"),n=C("./util/extend"),N=C("./util/values");ca.exports=function(f,c,x,b){function v(b,c,f,h){this.name=b;this.id=c;this.location=f;this.info=h}function na(b,c){for(var f=0;f<b.length;++f)if(b[f].id===
c.id){b[f].location=c.location;return}b.push(c)}function T(b,d,v){var h=35632===b?r:E,e=h[d];if(!e){var g=c.str(d),e=f.createShader(b);f.shaderSource(e,g);f.compileShader(e);y.shaderError(f,e,g,b,v);h[d]=e}return e}function K(c,f){this.id=Q++;this.fragId=c;this.vertId=f;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function G(d,r,x){var h;h=T(35632,d.fragId);var e=T(35633,d.vertId),g=d.program=f.createProgram();f.attachShader(g,
h);f.attachShader(g,e);if(x)for(h=0;h<x.length;++h)e=x[h],f.bindAttribLocation(g,e[0],e[1]);f.linkProgram(g);y.linkError(f,g,c.str(d.fragId),c.str(d.vertId),r);x=f.getProgramParameter(g,35718);b.profile&&(d.stats.uniformsCount=x);e=d.uniforms;for(h=0;h<x;++h)if(r=f.getActiveUniform(g,h))if(1<r.size)for(var l=0;l<r.size;++l){var n=r.name.replace("[0]","["+l+"]");na(e,new v(n,c.id(n),f.getUniformLocation(g,n),r))}else na(e,new v(r.name,c.id(r.name),f.getUniformLocation(g,r.name),r));x=f.getProgramParameter(g,
35721);b.profile&&(d.stats.attributesCount=x);d=d.attributes;for(h=0;h<x;++h)(r=f.getActiveAttrib(g,h))&&na(d,new v(r.name,c.id(r.name),f.getAttribLocation(g,r.name),r))}var r={},E={},B={},D=[],Q=0;b.profile&&(x.getMaxUniformsCount=function(){var b=0;D.forEach(function(c){c.stats.uniformsCount>b&&(b=c.stats.uniformsCount)});return b},x.getMaxAttributesCount=function(){var b=0;D.forEach(function(c){c.stats.attributesCount>b&&(b=c.stats.attributesCount)});return b});return{clear:function(){var b=f.deleteShader.bind(f);
N(r).forEach(b);r={};N(E).forEach(b);E={};D.forEach(function(b){f.deleteProgram(b.program)});D.length=0;B={};x.shaderCount=0},program:function(b,c,v,h){y.command(0<=b,"missing vertex shader",v);y.command(0<=c,"missing fragment shader",v);var e=B[c];e||(e=B[c]={});var g=e[b];if(g&&(g.refCount++,!h))return g;var l=new K(c,b);x.shaderCount++;G(l,v,h);g||(e[b]=l);D.push(l);return n(l,{destroy:function(){l.refCount--;if(0>=l.refCount){f.deleteProgram(l.program);var b=D.indexOf(l);D.splice(b,1);x.shaderCount--}0>=
e[l.vertId].refCount&&(f.deleteShader(E[l.vertId]),delete E[l.vertId],delete B[l.fragId][l.vertId]);d(B[l.fragId]).length||(f.deleteShader(r[l.fragId]),delete r[l.fragId],delete B[l.fragId])}})},restore:function(){r={};E={};for(var b=0;b<D.length;++b)G(D[b],null,D[b].attributes.map(function(b){return[b.location,b.name]}))},shader:T,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(C,ca,Ja){ca.exports=function(){return{vaoCount:0,
bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(C,ca,Ja){ca.exports=function(){var d={"":0},y=[""];return{id:function(n){var N=d[n];if(N)return N;N=d[n]=y.length;y.push(n);return N},str:function(d){return y[d]}}}},{}],19:[function(C,ca,Ja){function d(a){return"[object "+a+"]"}function y(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function n(a){return Array.isArray(a)&&0!==a.length&&
B(a[0])?!0:!1}function N(a){return Object.prototype.toString.call(a)}function f(a){if(!a)return!1;var b=N(a);return 0<=qa.indexOf(b)?!0:y(a)||n(a)||G(a)}function c(a,b){36193===a.type?(a.data=E(b),r.freeType(b)):a.data=b}function x(a,b,c,g,f,l){a="undefined"!==typeof fa[a]?fa[a]:h[a]*L[b];l&&(a*=6);if(f){for(g=0;1<=c;)g+=a*c*c,c/=2;return g}return a*c*g}var b=C("./util/sorted-object-keys"),v=C("./util/check"),na=C("./util/extend"),T=C("./util/values"),K=C("./util/is-typed-array"),G=C("./util/is-ndarray"),
r=C("./util/pool"),E=C("./util/to-half-float"),B=C("./util/is-array-like"),D=C("./util/flatten"),Q=C("./util/is-pow2");Ja=C("./constants/arraytypes.json");var A=C("./constants/arraytypes.json"),P=[9984,9986,9985,9987],ge=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;h[6408]=h[35906]=4;var e=d("HTMLCanvasElement"),g=d("OffscreenCanvas"),l=d("CanvasRenderingContext2D"),R=d("ImageBitmap"),Z=d("HTMLImageElement"),m=d("HTMLVideoElement"),qa=b(Ja).concat([e,
g,l,R,Z,m]),L=[];L[5121]=1;L[5126]=4;L[36193]=2;L[5123]=2;L[5125]=4;var fa=[];fa[32854]=2;fa[32855]=2;fa[36194]=2;fa[34041]=4;fa[33776]=.5;fa[33777]=.5;fa[33778]=1;fa[33779]=1;fa[35986]=.5;fa[35987]=1;fa[34798]=1;fa[35840]=.5;fa[35841]=.25;fa[35842]=.5;fa[35843]=.25;fa[36196]=.5;ca.exports=function(a,p,d,L,fa,C,qa){function oa(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=
this.width=0}function Oa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function ba(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(v.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(v.type(b.flipY,"boolean",
"invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(v.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(v.parameter(b.colorSpace,tc,"invalid colorSpace"),a.colorSpace=tc[b.colorSpace]);if("type"in b){var c=b.type;v(p.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");v(p.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");
v(p.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");v.parameter(c,Y,"invalid texture type");a.type=Y[c]}var g=a.width,f=a.height,l=a.channels,c=!1;"shape"in b?(v(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),g=b.shape[0],f=b.shape[1],3===b.shape.length&&(l=b.shape[2],v(0<l&&4>=l,"invalid number of channels"),c=!0),v(0<=g&&g<=d.maxTextureSize,"invalid width"),v(0<=
f&&f<=d.maxTextureSize,"invalid height")):("radius"in b&&(g=f=b.radius,v(0<=g&&g<=d.maxTextureSize,"invalid radius")),"width"in b&&(g=b.width,v(0<=g&&g<=d.maxTextureSize,"invalid width")),"height"in b&&(f=b.height,v(0<=f&&f<=d.maxTextureSize,"invalid height")),"channels"in b&&(l=b.channels,v(0<l&&4>=l,"invalid number of channels"),c=!0));a.width=g|0;a.height=f|0;a.channels=l|0;g=!1;"format"in b&&(g=b.format,v(p.webgl_depth_texture||!("depth"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),
v.parameter(g,J,"invalid texture format"),f=a.internalformat=J[g],a.format=va[f],g in Y&&!("type"in b)&&(a.type=Y[g]),g in ja&&(a.compressed=!0),g=!0);!c&&g?a.channels=h[a.format]:c&&!g?a.channels!==ge[a.format]&&(a.format=a.internalformat=ge[a.channels]):g&&c&&v(a.channels===h[a.format],"number of channels inconsistent with specified format")}}function M(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}
function O(){oa.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function U(a,b){var p=null;f(b)?p=b:b&&(v.type(b,"object","invalid pixel data type"),ba(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),f(b.data)&&(p=b.data));v(!a.compressed||p instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){v(!p,"can not specify copy and data field for the same texture");var k=fa.viewportWidth,h=fa.viewportHeight;
a.width=a.width||k-a.xOffset;a.height=a.height||h-a.yOffset;a.needsCopy=!0;v(0<=a.xOffset&&a.xOffset<k&&0<=a.yOffset&&a.yOffset<h&&0<a.width&&a.width<=k&&0<a.height&&a.height<=h,"copy texture read out of bounds")}else if(!p)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(K(p))a.channels=a.channels||4,a.data=p,"type"in b||5121!==a.type||(a.type=A[Object.prototype.toString.call(p)]|0);else if(y(p)){a.channels=a.channels||4;k=p;h=k.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:h=
r.allocType(a.type,h);h.set(k);a.data=h;break;case 36193:a.data=E(k);break;default:v.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(G(p)){k=p.data;Array.isArray(k)||5121!==a.type||(a.type=A[Object.prototype.toString.call(k)]|0);var h=p.shape,t=p.stride,q,u,w,J;3===h.length?(w=h[2],J=t[2]):(v(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),J=w=1);q=h[0];u=h[1];h=t[0];t=t[1];a.alignment=1;a.width=q;a.height=u;a.channels=w;a.format=a.internalformat=
ge[w];a.needsFree=!0;q=J;p=p.offset;w=a.width;J=a.height;u=a.channels;for(var x=r.allocType(36193===a.type?5126:a.type,w*J*u),H=0,da=0;da<J;++da)for(var F=0;F<w;++F)for(var Y=0;Y<u;++Y)x[H++]=k[h*F+t*da+q*Y+p];c(a,x)}else if(N(p)===e||N(p)===g||N(p)===l)N(p)===e||N(p)===g?a.element=p:a.element=p.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(N(p)===R)a.element=p,a.width=p.width,a.height=p.height,a.channels=4;else if(N(p)===Z)a.element=p,a.width=p.naturalWidth,a.height=
p.naturalHeight,a.channels=4;else if(N(p)===m)a.element=p,a.width=p.videoWidth,a.height=p.videoHeight,a.channels=4;else if(n(p)){k=a.width||p[0].length;h=a.height||p.length;t=a.channels;t=B(p[0][0])?t||p[0][0].length:t||1;q=D.shape(p);w=1;for(J=0;J<q.length;++J)w*=q[J];w=r.allocType(36193===a.type?5126:a.type,w);D.flatten(p,q,"",w);c(a,w);a.alignment=1;a.width=k;a.height=h;a.channels=t;a.format=a.internalformat=ge[t];a.needsFree=!0}5126===a.type?v(0<=d.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):
36193===a.type&&v(0<=d.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function ta(b,c,g,k,f){var p=b.element,l=b.data,h=b.internalformat,e=b.format,m=b.type,t=b.width,d=b.height;M(b);p?a.texSubImage2D(c,f,g,k,e,m,p):b.compressed?a.compressedTexSubImage2D(c,f,g,k,h,t,d,l):b.needsCopy?(L(),a.copyTexSubImage2D(c,f,g,k,b.xOffset,b.yOffset,t,d)):a.texSubImage2D(c,f,g,k,t,d,e,m,l)}function I(){return X.pop()||new O}function Vb(a){a.needsFree&&r.freeType(a.data);
O.call(a);X.push(a)}function ab(){oa.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function S(a,b,c){var g=a.images[0]=I();a.mipmask=1;g.width=a.width=b;g.height=a.height=c;g.channels=a.channels=4}function u(a,b){var c=null;if(f(b))c=a.images[0]=I(),Oa(c,a),U(c,b),a.mipmask=1;else if(ba(a,b),Array.isArray(b.mipmap))for(var g=b.mipmap,p=0;p<g.length;++p)c=a.images[p]=I(),Oa(c,a),c.width>>=p,c.height>>=p,U(c,g[p]),a.mipmask|=1<<p;else c=a.images[0]=I(),Oa(c,
a),U(c,b),a.mipmask=1;Oa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||v(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ka(b,c){for(var g=b.images,k=0;k<g.length&&g[k];++k){var f=g[k],p=c,l=k,h=f.element,e=f.data,m=f.internalformat,t=f.format,d=f.type,u=f.width,w=f.height;M(f);h?a.texImage2D(p,l,t,t,d,h):f.compressed?
a.compressedTexImage2D(p,l,m,u,w,0,e):f.needsCopy?(L(),a.copyTexImage2D(p,l,t,f.xOffset,f.yOffset,u,w,0)):a.texImage2D(p,l,t,u,w,0,t,d,e||null)}}function ea(){var a=ha.pop()||new ab;oa.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Ea(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&Vb(b[c]),b[c]=null;ha.push(a)}function Pa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function tb(a,b){if("min"in
b){var c=b.min;v.parameter(c,rd);a.minFilter=rd[c];0<=P.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(c=b.mag,v.parameter(c,ic),a.magFilter=ic[c]);var c=a.wrapS,g=a.wrapT;if("wrap"in b){var f=b.wrap;"string"===typeof f?(v.parameter(f,pc),c=g=pc[f]):Array.isArray(f)&&(v.parameter(f[0],pc),v.parameter(f[1],pc),c=pc[f[0]],g=pc[f[1]])}else"wrapS"in b&&(c=b.wrapS,v.parameter(c,pc),c=pc[c]),"wrapT"in b&&(g=b.wrapT,v.parameter(g,pc),g=pc[g]);a.wrapS=c;a.wrapT=g;"anisotropic"in b&&(c=
b.anisotropic,v("number"===typeof c&&1<=c&&c<=d.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":v.parameter(b.mipmap,ac,"invalid mipmap hint");a.mipmapHint=ac[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":v(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;c=!0;break;default:v.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ha(b,
c){a.texParameteri(c,10241,b.minFilter);a.texParameteri(c,10240,b.magFilter);a.texParameteri(c,10242,b.wrapS);a.texParameteri(c,10243,b.wrapT);p.ext_texture_filter_anisotropic&&a.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(c))}function W(b){oa.call(this);this.mipmask=0;this.internalformat=6408;this.id=ra++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Pa;qa.profile&&(this.stats={size:0})}
function nb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=da[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function pa(b){var c=b.texture;v(c,"must not double destroy texture");var g=b.unit,f=b.target;0<=g&&(a.activeTexture(33984+g),a.bindTexture(f,null),da[g]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete H[b.id];C.textureCount--}var ac={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,
clamp:33071,mirror:33648},ic={nearest:9728,linear:9729},rd=na({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},ic),tc={none:0,browser:37444},Y={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},J={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ja={};p.ext_srgb&&(J.srgb=35904,J.srgba=35906);p.oes_texture_float&&(Y.float32=Y["float"]=5126);p.oes_texture_half_float&&
(Y.float16=Y["half float"]=36193);p.webgl_depth_texture&&(na(J,{depth:6402,"depth stencil":34041}),na(Y,{uint16:5123,uint32:5125,"depth stencil":34042}));p.webgl_compressed_texture_s3tc&&na(ja,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});p.webgl_compressed_texture_atc&&na(ja,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});p.webgl_compressed_texture_pvrtc&&na(ja,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,
"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});p.webgl_compressed_texture_etc1&&(ja["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(a.getParameter(34467));b(ja).forEach(function(a){var b=ja[a];0<=Ca.indexOf(b)&&(J[a]=b)});var ub=b(J);d.textureFormats=ub;var Jc=[];b(J).forEach(function(a){Jc[J[a]]=a});var Uc=[];b(Y).forEach(function(a){Uc[Y[a]]=a});var F=[];b(ic).forEach(function(a){F[ic[a]]=a});var w=[];b(rd).forEach(function(a){w[rd[a]]=a});var ia=[];b(pc).forEach(function(a){ia[pc[a]]=
a});var va=ub.reduce(function(a,b){var c=J[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||p.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),X=[],ha=[],ra=0,H={},t=d.maxTextureUnits,da=Array(t).map(function(){return null});na(W.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<t;++c){var g=da[c];if(g){if(0<g.bindCount)continue;g.unit=-1}da[c]=this;b=c;break}b>=t&&v.raise("insufficient number of texture units");
qa.profile&&C.maxTextureUnits<b+1&&(C.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&pa(this)}});qa.profile&&(C.getTotalTextureSize=function(){var a=0;b(H).forEach(function(b){a+=H[b].stats.size});return a});return{create2D:function(b,c){function g(a,b){var c=f.texInfo;Pa.call(c);var p=ea();"number"===typeof a?"number"===typeof b?S(p,a|0,b|0):S(p,a|0,a|0):a?(v.type(a,
"object","invalid arguments to regl.texture"),tb(c,a),u(p,a)):S(p,1,1);c.genMipmaps&&(p.mipmask=(p.width<<1)-1);f.mipmask=p.mipmask;Oa(f,p);v.texture2D(c,p,d);f.internalformat=p.internalformat;g.width=p.width;g.height=p.height;nb(f);ka(p,3553);Ha(c,3553);ga();Ea(p);qa.profile&&(f.stats.size=x(f.internalformat,f.type,p.width,p.height,c.genMipmaps,!1));g.format=Jc[f.internalformat];g.type=Uc[f.type];g.mag=F[c.magFilter];g.min=w[c.minFilter];g.wrapS=ia[c.wrapS];g.wrapT=ia[c.wrapT];return g}var f=new W(3553);
H[f.id]=f;C.textureCount++;g(b,c);g.subimage=function(a,b,c,p){v(!!a,"must specify image data");b|=0;c|=0;p|=0;var l=I();Oa(l,f);l.width=0;l.height=0;U(l,a);l.width=l.width||(f.width>>p)-b;l.height=l.height||(f.height>>p)-c;v(f.type===l.type&&f.format===l.format&&f.internalformat===l.internalformat,"incompatible format for texture.subimage");v(0<=b&&0<=c&&b+l.width<=f.width&&c+l.height<=f.height,"texture.subimage write out of bounds");v(f.mipmask&1<<p,"missing mipmap data");v(l.data||l.element||l.needsCopy,
"missing image data");nb(f);ta(l,3553,b,c,p);ga();Vb(l);return g};g.resize=function(b,c){var p=b|0,l=c|0||p;if(p===f.width&&l===f.height)return g;g.width=f.width=p;g.height=f.height=l;nb(f);for(var h=0;f.mipmask>>h;++h){var e=p>>h,m=l>>h;if(!e||!m)break;a.texImage2D(3553,h,f.format,e,m,0,f.format,f.type,null)}ga();qa.profile&&(f.stats.size=x(f.internalformat,f.type,p,l,!1,!1));return g};g._reglType="texture2d";g._texture=f;qa.profile&&(g.stats=f.stats);g.destroy=function(){f.decRef()};return g},createCube:function(b,
c,g,f,p,l){function h(a,b,c,g,f,p){var k,l=e.texInfo;Pa.call(l);for(k=0;6>k;++k)m[k]=ea();if("number"!==typeof a&&a)if("object"===typeof a)if(b)u(m[0],a),u(m[1],b),u(m[2],c),u(m[3],g),u(m[4],f),u(m[5],p);else if(tb(l,a),ba(e,a),"faces"in a)for(a=a.faces,v(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),k=0;6>k;++k)v("object"===typeof a[k]&&!!a[k],"invalid input for cube map face"),Oa(m[k],e),u(m[k],a[k]);else for(k=0;6>k;++k)u(m[k],a);else v.raise("invalid arguments to cube map");
else for(a=a|0||1,k=0;6>k;++k)S(m[k],a,a);Oa(e,m[0]);v.optional(function(){d.npotTextureCube||v(Q(e.width)&&Q(e.height),"your browser does not support non power or two texture dimensions")});e.mipmask=l.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;v.textureCube(e,l,m,d);e.internalformat=m[0].internalformat;h.width=m[0].width;h.height=m[0].height;nb(e);for(k=0;6>k;++k)ka(m[k],34069+k);Ha(l,34067);ga();qa.profile&&(e.stats.size=x(e.internalformat,e.type,h.width,h.height,l.genMipmaps,!0));h.format=Jc[e.internalformat];
h.type=Uc[e.type];h.mag=F[l.magFilter];h.min=w[l.minFilter];h.wrapS=ia[l.wrapS];h.wrapT=ia[l.wrapT];for(k=0;6>k;++k)Ea(m[k]);return h}var e=new W(34067);H[e.id]=e;C.cubeCount++;var m=Array(6);h(b,c,g,f,p,l);h.subimage=function(a,b,c,g,f){v(!!b,"must specify image data");v("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;g|=0;f|=0;var k=I();Oa(k,e);k.width=0;k.height=0;U(k,b);k.width=k.width||(e.width>>f)-c;k.height=k.height||(e.height>>f)-g;v(e.type===k.type&&e.format===k.format&&e.internalformat===
k.internalformat,"incompatible format for texture.subimage");v(0<=c&&0<=g&&c+k.width<=e.width&&g+k.height<=e.height,"texture.subimage write out of bounds");v(e.mipmask&1<<f,"missing mipmap data");v(k.data||k.element||k.needsCopy,"missing image data");nb(e);ta(k,34069+a,c,g,f);ga();Vb(k);return h};h.resize=function(b){b|=0;if(b!==e.width){h.width=e.width=b;h.height=e.height=b;nb(e);for(var c=0;6>c;++c)for(var g=0;e.mipmask>>g;++g)a.texImage2D(34069+c,g,e.format,b>>g,b>>g,0,e.format,e.type,null);ga();
qa.profile&&(e.stats.size=x(e.internalformat,e.type,h.width,h.height,!1,!0));return h}};h._reglType="textureCube";h._texture=e;qa.profile&&(h.stats=e.stats);h.destroy=function(){e.decRef()};return h},clear:function(){for(var b=0;b<t;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),da[b]=null;T(H).forEach(pa);C.cubeCount=0;C.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<t;++b){var c=da[b];c&&(c.bindCount=0,c.unit=-1,da[b]=null)}T(H).forEach(function(b){b.texture=
a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var g=0;6>g;++g)a.texImage2D(34069+g,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);Ha(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<t;++b){var c=da[b];c&&(c.bindCount=0,c.unit=-1,da[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,
null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(C,ca,Ja){ca.exports=function(d,y){function n(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function N(c,f,d){var r=x.pop()||new n;r.startQueryIndex=c;r.endQueryIndex=f;r.sum=
0;r.stats=d;b.push(r)}if(!y.ext_disjoint_timer_query)return null;var f=[],c=[],x=[],b=[],v=[],na=[];return{beginQuery:function(b){var d=f.pop()||y.ext_disjoint_timer_query.createQueryEXT();y.ext_disjoint_timer_query.beginQueryEXT(35007,d);c.push(d);N(c.length-1,c.length,b)},endQuery:function(){y.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:N,update:function(){var d,n;d=c.length;if(0!==d){na.length=Math.max(na.length,d+1);v.length=Math.max(v.length,d+1);v[0]=0;var G=na[0]=0;for(n=d=
0;n<c.length;++n){var r=c[n];y.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(G+=y.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),f.push(r)):c[d++]=r;v[n+1]=G;na[n+1]=d}c.length=d;for(n=d=0;n<b.length;++n){var G=b[n],E=G.startQueryIndex,r=G.endQueryIndex;G.sum+=v[r]-v[E];E=na[E];r=na[r];r===E?(G.stats.gpuTime+=G.sum/1E6,x.push(G)):(G.startQueryIndex=E,G.endQueryIndex=r,b[d++]=G)}b.length=d}},getNumPendingQueries:function(){return c.length},clear:function(){f.push.apply(f,c);for(var b=0;b<
f.length;b++)y.ext_disjoint_timer_query.deleteQueryEXT(f[b]);c.length=0;f.length=0},restore:function(){c.length=0;f.length=0}}}},{}],21:[function(C,ca,Ja){function d(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function y(b){b=Error("(regl) "+b);console.error(b);throw b;}function n(b,c){b||y(c)}function N(b){return b?": "+b:""}function f(b,c){switch(c){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===
typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function c(b,c,f){0>c.indexOf(b)&&y("invalid value"+N(f)+". must be one of: "+c)}function x(b,c){for(b+="";b.length<c;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function v(b,c){this.number=b;this.line=c;this.errors=[]}function na(b,c,f){this.file=b;this.line=c;this.message=f}function T(){var b=Error(),b=(b.stack||
b).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return c?c[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function K(){var b=Error(),b=(b.stack||b).toString(),c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return c?c[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function G(c,f){var h=c.split("\n"),e=1,m=0,r={unknown:new b,0:new b};r.unknown.name=r[0].name=f||T();r.unknown.lines.push(new v(0,""));for(var y=0;y<h.length;++y){var x=h[y],a=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(x);
if(a)switch(a[1]){case "line":if(a=/(\d+)(\s+\d+)?/.exec(a[2]))e=a[1]|0,a[2]&&(m=a[2]|0,m in r||(r[m]=new b));break;case "define":if(a=/SHADER_NAME(_B64)?\s+(.*)$/.exec(a[2]))r[m].name=a[1]?d(a[2]):a[2]}r[m].lines.push(new v(e++,x))}P(r).forEach(function(a){var b=r[a];b.lines.forEach(function(a){b.index[a.number]=a})});return r}function r(b){var c=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);g?c.push(new na(g[1]|0,g[2]|0,g[3].trim())):0<b.length&&
c.push(new na("unknown",0,b))}});return c}function E(b,c){c.forEach(function(c){var f=b[c.file];if(f){var l=f.index[c.line];if(l){l.errors.push(c);f.hasErrors=!0;return}}b.unknown.hasErrors=!0;b.unknown.lines[0].errors.push(c)})}function B(b){b._commandRef=T()}function D(b,c){var f=K();y(b+" in command "+(c||T())+("unknown"===f?"":" called from "+f))}function Q(b,c,h,e){f(b,c)||D("invalid parameter type"+N(h)+". expected "+c+", got "+typeof b,e||T())}function A(b,c){return 32820===b||32819===b||33635===
b?2:34042===b?4:e[b]*c}var P=C("./sorted-object-keys"),ge=C("./is-typed-array");C=C("./extend");var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),e={};e[5120]=e[5121]=1;e[5122]=e[5123]=e[36193]=e[33635]=e[32819]=e[32820]=2;e[5124]=e[5125]=e[5126]=e[34042]=4;ca.exports=C(n,{optional:function(b){b()},raise:y,commandRaise:D,command:function(b,c,f){b||D(c,f||T())},parameter:function(b,c,f){b in c||y("unknown parameter ("+b+")"+N(f)+". possible values: "+
P(c).join())},commandParameter:function(b,c,f,h){b in c||D("unknown parameter ("+b+")"+N(f)+". possible values: "+P(c).join(),h||T())},constructor:function(b){P(b).forEach(function(b){0>h.indexOf(b)&&y('invalid regl constructor argument "'+b+'". must be one of '+h)})},type:function(b,c,h){f(b,c)||y("invalid parameter type"+N(h)+". expected "+c+", got "+typeof b)},commandType:Q,isTypedArray:function(b,c){ge(b)||y("invalid parameter type"+N(c)+". must be a typed array")},nni:function(b,c){0<=b&&(b|
0)===b||y("invalid parameter type, ("+b+")"+N(c)+". must be a nonnegative integer")},oneOf:c,shaderError:function(b,c,f,h,e){if(!b.getShaderParameter(c,b.COMPILE_STATUS)){c=b.getShaderInfoLog(c);b=h===b.FRAGMENT_SHADER?"fragment":"vertex";Q(f,"string",b+" shader source must be a string",e);var d=G(f,e);f=r(c);E(d,f);P(d).forEach(function(b){function c(a,b){g.push(a);f.push(b||"")}var a=d[b];if(a.hasErrors){var g=[""],f=[""];c("file number "+b+": "+a.name+"\n","color:red;text-decoration:underline;font-weight:bold");
a.lines.forEach(function(a){if(0<a.errors.length){c(x(a.number,4)+"|  ","background-color:yellow; font-weight:bold");c(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var b=0;a.errors.forEach(function(g){g=g.message;var f=/^\s*'(.*)'\s*:\s*(.*)$/.exec(g);if(f){var p=f[1];g=f[2];switch(p){case "assign":p="="}b=Math.max(a.line.indexOf(p,b),0)}else b=0;c(x("| ",6));c(x("^^^",b+3)+"\n","font-weight:bold");c(x("| ",6));c(g+"\n","font-weight:bold")});c(x("| ",6)+"\n")}else c(x(a.number,
4)+"|  "),c(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(g.join("")):(f[0]=g.join("%c"),console.log.apply(console,f))}});n.raise("Error compiling "+b+" shader, "+d[0].name)}},linkError:function(b,c,f,h,e){b.getProgramParameter(c,b.LINK_STATUS)||(b=b.getProgramInfoLog(c),f=G(f,e),h='Error linking program with vertex shader, "'+G(h,e)[0].name+'", and fragment shader "'+f[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold",
"color:red"):console.log(h+"\n"+b),n.raise(h))},callSite:K,saveCommandRef:B,saveDrawInfo:function(b,c,f,h){function e(b){return b?h.id(b):0}function d(b,a){P(a).forEach(function(a){b[h.id(a)]=!0})}B(b);b._fragId=e(b["static"].frag);b._vertId=e(b["static"].vert);var r=b._uniformSet={};d(r,c["static"]);d(r,c.dynamic);c=b._attributeSet={};d(c,f["static"]);d(c,f.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,
f,h){b.texture?c(b.texture._texture.internalformat,f,"unsupported texture format for attachment"):c(b.renderbuffer._renderbuffer.format,h,"unsupported renderbuffer format for attachment")},guessCommand:T,texture2D:function(b,c,f){var h=c.width,e=c.height,d=c.channels;n(0<h&&h<=f.maxTextureSize&&0<e&&e<=f.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||n(!(h&h-1)&&!!h&&!(e&e-1)&&!!e,"incompatible wrap mode for texture, both width and height must be power of 2");1===c.mipmask?
1!==h&&1!==e&&n(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(n(!(h&h-1)&&!!h&&!(e&e-1)&&!!e,"texture must be a square power of 2 to support mipmapping"),n(c.mipmask===(h<<1)-1,"missing or incomplete mipmap data"));5126===c.type&&(0>f.extensions.indexOf("oes_texture_float_linear")&&n(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),n(!b.genMipmaps,"mipmap generation not supported with float textures"));
var r=c.images;for(f=0;16>f;++f)if(r[f]){var y=h>>f,a=e>>f;n(c.mipmask&1<<f,"missing mipmap data");var p=r[f];n(p.width===y&&p.height===a,"invalid shape for mip images");n(p.format===c.format&&p.internalformat===c.internalformat&&p.type===c.type,"incompatible type for mip image");!p.compressed&&p.data&&(y=Math.ceil(A(p.type,d)*y/p.unpackAlignment)*p.unpackAlignment,n(p.data.byteLength===y*a,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||n(0===(c.mipmask&
1<<f),"extra mipmap data");c.compressed&&n(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,c,f,h){var e=b.width,d=b.height,r=b.channels;n(0<e&&e<=h.maxTextureSize&&0<d&&d<=h.maxTextureSize,"invalid texture shape");n(e===d,"cube map must be square");n(33071===c.wrapS&&33071===c.wrapT,"wrap mode not supported by cube map");for(h=0;h<f.length;++h){var y=f[h];n(y.width===e&&y.height===d,"inconsistent cube map face shape");c.genMipmaps&&(n(!y.compressed,"can not generate mipmap for compressed textures"),
n(1===y.mipmask,"can not specify mipmaps and generate mipmaps"));for(var a=y.images,p=0;16>p;++p){var v=a[p];if(v){var x=e>>p,B=d>>p;n(y.mipmask&1<<p,"missing mipmap data");n(v.width===x&&v.height===B,"invalid shape for mip images");n(v.format===b.format&&v.internalformat===b.internalformat&&v.type===b.type,"incompatible type for mip image");v.compressed||v.data&&n(v.data.byteLength===x*B*Math.max(A(v.type,r),v.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},
{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(C,ca,Ja){ca.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(C,ca,Ja){function d(d){return Array.prototype.slice.call(d)}var y=C("./extend"),n=C("./compiled-fns");ca.exports=function(){function N(){var b=[],c=[];return y(function(){b.push.apply(b,d(arguments))},{def:function(){var f="v"+x;x++;c.push(f);0<arguments.length&&(b.push(f,
"="),b.push.apply(b,d(arguments)),b.push(";"));return f},toString:function(){return d([0<c.length?"var "+c.join(",")+";":"",d(b).join("")]).join("")}})}function f(){function b(d,r){f(d,r,"=",c.def(d,r),";")}var c=N(),f=N(),v=c.toString,r=f.toString;return y(function(){c.apply(c,d(arguments))},{def:c.def,entry:c,exit:f,save:b,set:function(f,d,r){b(f,d);c(f,d,"=",r,";")},toString:function(){return v()+r()}})}var c=0,x=0,b={},v={};return{global:N(),link:function(f){var d="$"+c,y=!1;"object"===typeof f&&
f.name&&(d=f.name.replace(/ /g,"_"),y=!0);if(d in b)return d;b[d]=f;y||c++;return d},block:N,proc:function(b,c){function x(){var b="a"+n.length;n.push(b);return b}var n=[];c=c||0;for(var r=0;r<c;++r)x();var r=f(),E=r.toString;return v[b]=y(r,{arg:x,toString:function(){return d(["function(",n.join(),"){",E(),"}"]).join("")}})},scope:f,cond:function(){var b=d(arguments).join(""),c=f(),v=f(),x=c.toString,r=v.toString;return y(c,{then:function(){c.apply(c,d(arguments));return this},"else":function(){v.apply(v,
d(arguments));return this},toString:function(){var c=r();c&&(c="else{"+c+"}");return d(["if(",b,"){",x(),"}",c]).join("")}})},compile:function(){var c=[],f=[];Object.keys(b).sort(function(b,c){var f="$"===b.charAt(0),d="$"===c.charAt(0);return f||d?f&&d?+b.slice(1)<+c.slice(1)?-1:1:f&&!d?-1:1:b.localeCompare(c)}).forEach(function(d){var y=b[d];c.push(d);f.push(y)});for(var d=0,y=c.length-1;-1<y;y--)if("$"===c[y].charAt(0)){d=y;break}d=c.slice(d).join();y=n[d];if(!y)throw Error("missing precompiled function with key: "+
d);return y.apply(null,f)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(C,ca,Ja){ca.exports={$0:function(d){var y,n,N,f,c,x,b,v,na,T,K,G,r,E,B,D,Q,A,P,C,h,e,g,l,R,Z,m,qa,L,fa;y=d.attributes;n=d.current;N=d.framebuffer;f=d.gl;c=d.next;x=d.vao;b=c.blend_color;v=n.blend_color;na=c.blend_equation;T=n.blend_equation;K=c.blend_func;G=n.blend_func;r=c.colorMask;E=n.colorMask;B=c.depth_range;D=n.depth_range;Q=c.polygonOffset_offset;A=n.polygonOffset_offset;P=c.sample_coverage;C=n.sample_coverage;
h=c.scissor_box;e=n.scissor_box;g=c.stencil_func;l=n.stencil_func;R=c.stencil_opBack;Z=n.stencil_opBack;m=c.stencil_opFront;qa=n.stencil_opFront;L=c.viewport;fa=n.viewport;return{poll:function(){var a,p,d,y,x,Eb,ca,oa,Oa,ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea;n.dirty=!1;p=c.blend_enable;d=c.cull_enable;y=c.depth_enable;x=c.dither;Eb=c.polygonOffset_enable;ca=c.sample_alpha;oa=c.sample_enable;Oa=c.scissor_enable;ba=c.stencil_enable;M=c.cull_face;O=n.cull_face;U=c.depth_func;ta=n.depth_func;I=c.depth_mask;
Vb=n.depth_mask;ab=c.frontFace;S=n.frontFace;u=c.lineWidth;ka=n.lineWidth;ea=c.stencil_mask;Ea=n.stencil_mask;a=N.next;a!==N.cur&&(a?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null),N.cur=a);p!==n.blend_enable&&(p?f.enable(3042):f.disable(3042),n.blend_enable=p);d!==n.cull_enable&&(d?f.enable(2884):f.disable(2884),n.cull_enable=d);y!==n.depth_enable&&(y?f.enable(2929):f.disable(2929),n.depth_enable=y);x!==n.dither&&(x?f.enable(3024):f.disable(3024),n.dither=x);Eb!==n.polygonOffset_enable&&
(Eb?f.enable(32823):f.disable(32823),n.polygonOffset_enable=Eb);ca!==n.sample_alpha&&(ca?f.enable(32926):f.disable(32926),n.sample_alpha=ca);oa!==n.sample_enable&&(oa?f.enable(32928):f.disable(32928),n.sample_enable=oa);Oa!==n.scissor_enable&&(Oa?f.enable(3089):f.disable(3089),n.scissor_enable=Oa);ba!==n.stencil_enable&&(ba?f.enable(2960):f.disable(2960),n.stencil_enable=ba);if(b[0]!==v[0]||b[1]!==v[1]||b[2]!==v[2]||b[3]!==v[3])f.blendColor(b[0],b[1],b[2],b[3]),v[0]=b[0],v[1]=b[1],v[2]=b[2],v[3]=
b[3];if(na[0]!==T[0]||na[1]!==T[1])f.blendEquationSeparate(na[0],na[1]),T[0]=na[0],T[1]=na[1];if(K[0]!==G[0]||K[1]!==G[1]||K[2]!==G[2]||K[3]!==G[3])f.blendFuncSeparate(K[0],K[1],K[2],K[3]),G[0]=K[0],G[1]=K[1],G[2]=K[2],G[3]=K[3];if(r[0]!==E[0]||r[1]!==E[1]||r[2]!==E[2]||r[3]!==E[3])f.colorMask(r[0],r[1],r[2],r[3]),E[0]=r[0],E[1]=r[1],E[2]=r[2],E[3]=r[3];M!==O&&(f.cullFace(M),n.cull_face=M);U!==ta&&(f.depthFunc(U),n.depth_func=U);I!==Vb&&(f.depthMask(I),n.depth_mask=I);if(B[0]!==D[0]||B[1]!==D[1])f.depthRange(B[0],
B[1]),D[0]=B[0],D[1]=B[1];ab!==S&&(f.frontFace(ab),n.frontFace=ab);u!==ka&&(f.lineWidth(u),n.lineWidth=u);if(Q[0]!==A[0]||Q[1]!==A[1])f.polygonOffset(Q[0],Q[1]),A[0]=Q[0],A[1]=Q[1];if(P[0]!==C[0]||P[1]!==C[1])f.sampleCoverage(P[0],P[1]),C[0]=P[0],C[1]=P[1];if(h[0]!==e[0]||h[1]!==e[1]||h[2]!==e[2]||h[3]!==e[3])f.scissor(h[0],h[1],h[2],h[3]),e[0]=h[0],e[1]=h[1],e[2]=h[2],e[3]=h[3];if(g[0]!==l[0]||g[1]!==l[1]||g[2]!==l[2])f.stencilFunc(g[0],g[1],g[2]),l[0]=g[0],l[1]=g[1],l[2]=g[2];ea!==Ea&&(f.stencilMask(ea),
n.stencil_mask=ea);if(R[0]!==Z[0]||R[1]!==Z[1]||R[2]!==Z[2]||R[3]!==Z[3])f.stencilOpSeparate(R[0],R[1],R[2],R[3]),Z[0]=R[0],Z[1]=R[1],Z[2]=R[2],Z[3]=R[3];if(m[0]!==qa[0]||m[1]!==qa[1]||m[2]!==qa[2]||m[3]!==qa[3])f.stencilOpSeparate(m[0],m[1],m[2],m[3]),qa[0]=m[0],qa[1]=m[1],qa[2]=m[2],qa[3]=m[3];if(L[0]!==fa[0]||L[1]!==fa[1]||L[2]!==fa[2]||L[3]!==fa[3])f.viewport(L[0],L[1],L[2],L[3]),fa[0]=L[0],fa[1]=L[1],fa[2]=L[2],fa[3]=L[3]},refresh:function(){var a,p,d,la,La,Eb,ca,oa,Oa,ba,M,O,U,ta,I,Vb;n.dirty=
!1;p=c.blend_enable;d=c.cull_enable;la=c.depth_enable;La=c.dither;Eb=c.polygonOffset_enable;ca=c.sample_alpha;oa=c.sample_enable;Oa=c.scissor_enable;ba=c.stencil_enable;M=c.cull_face;O=c.depth_func;U=c.depth_mask;ta=c.frontFace;I=c.lineWidth;Vb=c.stencil_mask;(a=N.next)?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);N.cur=a;a=y[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):
(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=y[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=y[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),
f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=y[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=y[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,a.x,a.y,a.z,
a.w),a.buffer=null);a=y[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=y[6];a.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=y[7];a.buffer?
(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=y[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=y[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,
a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=y[10];a.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=y[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,
a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=y[12];a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=y[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,
a.stride,a.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=y[14];a.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=y[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(15),
f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);x.currentVAO=null;x.setVAO(x.targetVAO);p?f.enable(3042):f.disable(3042);n.blend_enable=p;d?f.enable(2884):f.disable(2884);n.cull_enable=d;la?f.enable(2929):f.disable(2929);n.depth_enable=la;La?f.enable(3024):f.disable(3024);n.dither=La;Eb?f.enable(32823):f.disable(32823);n.polygonOffset_enable=Eb;ca?f.enable(32926):f.disable(32926);n.sample_alpha=ca;oa?f.enable(32928):f.disable(32928);n.sample_enable=oa;Oa?f.enable(3089):f.disable(3089);n.scissor_enable=
Oa;ba?f.enable(2960):f.disable(2960);n.stencil_enable=ba;f.blendColor(b[0],b[1],b[2],b[3]);v[0]=b[0];v[1]=b[1];v[2]=b[2];v[3]=b[3];f.blendEquationSeparate(na[0],na[1]);T[0]=na[0];T[1]=na[1];f.blendFuncSeparate(K[0],K[1],K[2],K[3]);G[0]=K[0];G[1]=K[1];G[2]=K[2];G[3]=K[3];f.colorMask(r[0],r[1],r[2],r[3]);E[0]=r[0];E[1]=r[1];E[2]=r[2];E[3]=r[3];f.cullFace(M);n.cull_face=M;f.depthFunc(O);n.depth_func=O;f.depthMask(U);n.depth_mask=U;f.depthRange(B[0],B[1]);D[0]=B[0];D[1]=B[1];f.frontFace(ta);n.frontFace=
ta;f.lineWidth(I);n.lineWidth=I;f.polygonOffset(Q[0],Q[1]);A[0]=Q[0];A[1]=Q[1];f.sampleCoverage(P[0],P[1]);C[0]=P[0];C[1]=P[1];f.scissor(h[0],h[1],h[2],h[3]);e[0]=h[0];e[1]=h[1];e[2]=h[2];e[3]=h[3];f.stencilFunc(g[0],g[1],g[2]);l[0]=g[0];l[1]=g[1];l[2]=g[2];f.stencilMask(Vb);n.stencil_mask=Vb;f.stencilOpSeparate(R[0],R[1],R[2],R[3]);Z[0]=R[0];Z[1]=R[1];Z[2]=R[2];Z[3]=R[3];f.stencilOpSeparate(m[0],m[1],m[2],m[3]);qa[0]=m[0];qa[1]=m[1];qa[2]=m[2];qa[3]=m[3];f.viewport(L[0],L[1],L[2],L[3]);fa[0]=L[0];
fa[1]=L[1];fa[2]=L[2];fa[3]=L[3]}}},$3:function(d,y,n,N){var f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Eb;f=d.context;c=d.current;x=d.framebuffer;b=d.gl;v=d.next;C=d.shader;T=d.vao;K=v.blend_color;G=c.blend_color;r=v.blend_equation;E=c.blend_equation;B=v.blend_func;D=c.blend_func;Q=v.colorMask;A=c.colorMask;P=v.depth_range;ca=c.depth_range;h=v.polygonOffset_offset;e=c.polygonOffset_offset;g=v.sample_coverage;l=c.sample_coverage;R=v.scissor_box;Z=c.scissor_box;m=v.stencil_func;
qa=c.stencil_func;L=v.stencil_opBack;fa=c.stencil_opBack;a=v.stencil_opFront;p=c.stencil_opFront;aa=v.viewport;la=c.viewport;La={};Eb={};return{batch:function(f,d){var n,ba,M,O,U;n=x.next;n!==x.cur&&(n?b.bindFramebuffer(36160,n.framebuffer):b.bindFramebuffer(36160,null),x.cur=n);if(c.dirty){n=v.dither;n!==c.dither&&(n?b.enable(3024):b.disable(3024),c.dither=n);n=v.blend_enable;n!==c.blend_enable&&(n?b.enable(3042):b.disable(3042),c.blend_enable=n);n=K[0];M=K[1];O=K[2];U=K[3];if(n!==G[0]||M!==G[1]||
O!==G[2]||U!==G[3])b.blendColor(n,M,O,U),G[0]=n,G[1]=M,G[2]=O,G[3]=U;n=r[0];M=r[1];if(n!==E[0]||M!==E[1])b.blendEquationSeparate(n,M),E[0]=n,E[1]=M;n=B[0];M=B[1];O=B[2];U=B[3];if(n!==D[0]||M!==D[1]||O!==D[2]||U!==D[3])b.blendFuncSeparate(n,M,O,U),D[0]=n,D[1]=M,D[2]=O,D[3]=U;n=v.depth_enable;n!==c.depth_enable&&(n?b.enable(2929):b.disable(2929),c.depth_enable=n);n=v.depth_func;n!==c.depth_func&&(b.depthFunc(n),c.depth_func=n);n=P[0];M=P[1];if(n!==ca[0]||M!==ca[1])b.depthRange(n,M),ca[0]=n,ca[1]=M;
n=v.depth_mask;n!==c.depth_mask&&(b.depthMask(n),c.depth_mask=n);n=Q[0];M=Q[1];O=Q[2];U=Q[3];if(n!==A[0]||M!==A[1]||O!==A[2]||U!==A[3])b.colorMask(n,M,O,U),A[0]=n,A[1]=M,A[2]=O,A[3]=U;n=v.cull_enable;n!==c.cull_enable&&(n?b.enable(2884):b.disable(2884),c.cull_enable=n);n=v.cull_face;n!==c.cull_face&&(b.cullFace(n),c.cull_face=n);n=v.frontFace;n!==c.frontFace&&(b.frontFace(n),c.frontFace=n);n=v.lineWidth;n!==c.lineWidth&&(b.lineWidth(n),c.lineWidth=n);n=v.polygonOffset_enable;n!==c.polygonOffset_enable&&
(n?b.enable(32823):b.disable(32823),c.polygonOffset_enable=n);n=h[0];M=h[1];if(n!==e[0]||M!==e[1])b.polygonOffset(n,M),e[0]=n,e[1]=M;n=v.sample_alpha;n!==c.sample_alpha&&(n?b.enable(32926):b.disable(32926),c.sample_alpha=n);n=v.sample_enable;n!==c.sample_enable&&(n?b.enable(32928):b.disable(32928),c.sample_enable=n);n=g[0];M=g[1];if(n!==l[0]||M!==l[1])b.sampleCoverage(n,M),l[0]=n,l[1]=M;n=v.stencil_enable;n!==c.stencil_enable&&(n?b.enable(2960):b.disable(2960),c.stencil_enable=n);n=v.stencil_mask;
n!==c.stencil_mask&&(b.stencilMask(n),c.stencil_mask=n);n=m[0];M=m[1];O=m[2];if(n!==qa[0]||M!==qa[1]||O!==qa[2])b.stencilFunc(n,M,O),qa[0]=n,qa[1]=M,qa[2]=O;n=a[0];M=a[1];O=a[2];U=a[3];if(n!==p[0]||M!==p[1]||O!==p[2]||U!==p[3])b.stencilOpSeparate(n,M,O,U),p[0]=n,p[1]=M,p[2]=O,p[3]=U;n=L[0];M=L[1];O=L[2];U=L[3];if(n!==fa[0]||M!==fa[1]||O!==fa[2]||U!==fa[3])b.stencilOpSeparate(n,M,O,U),fa[0]=n,fa[1]=M,fa[2]=O,fa[3]=U;n=v.scissor_enable;n!==c.scissor_enable&&(n?b.enable(3089):b.disable(3089),c.scissor_enable=
n);n=R[0];M=R[1];O=R[2];U=R[3];if(n!==Z[0]||M!==Z[1]||O!==Z[2]||U!==Z[3])b.scissor(n,M,O,U),Z[0]=n,Z[1]=M,Z[2]=O,Z[3]=U;n=aa[0];M=aa[1];O=aa[2];U=aa[3];if(n!==la[0]||M!==la[1]||O!==la[2]||U!==la[3])b.viewport(n,M,O,U),la[0]=n,la[1]=M,la[2]=O,la[3]=U;c.dirty=!1}if(n=c.profile)ba=performance.now(),y.count+=d;M=C.program(C.vert,C.frag);b.useProgram(M.program);T.setVAO(null);O=M.id;(U=Eb[O])||(U=Eb[O]=N(M));U.call(this,f,d);T.setVAO(null);n&&(y.cpuTime+=performance.now()-ba)},draw:function(f){var d,N,
ba,M,O;d=x.next;d!==x.cur&&(d?b.bindFramebuffer(36160,d.framebuffer):b.bindFramebuffer(36160,null),x.cur=d);if(c.dirty){d=v.dither;d!==c.dither&&(d?b.enable(3024):b.disable(3024),c.dither=d);d=v.blend_enable;d!==c.blend_enable&&(d?b.enable(3042):b.disable(3042),c.blend_enable=d);d=K[0];ba=K[1];M=K[2];O=K[3];if(d!==G[0]||ba!==G[1]||M!==G[2]||O!==G[3])b.blendColor(d,ba,M,O),G[0]=d,G[1]=ba,G[2]=M,G[3]=O;d=r[0];ba=r[1];if(d!==E[0]||ba!==E[1])b.blendEquationSeparate(d,ba),E[0]=d,E[1]=ba;d=B[0];ba=B[1];
M=B[2];O=B[3];if(d!==D[0]||ba!==D[1]||M!==D[2]||O!==D[3])b.blendFuncSeparate(d,ba,M,O),D[0]=d,D[1]=ba,D[2]=M,D[3]=O;d=v.depth_enable;d!==c.depth_enable&&(d?b.enable(2929):b.disable(2929),c.depth_enable=d);d=v.depth_func;d!==c.depth_func&&(b.depthFunc(d),c.depth_func=d);d=P[0];ba=P[1];if(d!==ca[0]||ba!==ca[1])b.depthRange(d,ba),ca[0]=d,ca[1]=ba;d=v.depth_mask;d!==c.depth_mask&&(b.depthMask(d),c.depth_mask=d);d=Q[0];ba=Q[1];M=Q[2];O=Q[3];if(d!==A[0]||ba!==A[1]||M!==A[2]||O!==A[3])b.colorMask(d,ba,M,
O),A[0]=d,A[1]=ba,A[2]=M,A[3]=O;d=v.cull_enable;d!==c.cull_enable&&(d?b.enable(2884):b.disable(2884),c.cull_enable=d);d=v.cull_face;d!==c.cull_face&&(b.cullFace(d),c.cull_face=d);d=v.frontFace;d!==c.frontFace&&(b.frontFace(d),c.frontFace=d);d=v.lineWidth;d!==c.lineWidth&&(b.lineWidth(d),c.lineWidth=d);d=v.polygonOffset_enable;d!==c.polygonOffset_enable&&(d?b.enable(32823):b.disable(32823),c.polygonOffset_enable=d);d=h[0];ba=h[1];if(d!==e[0]||ba!==e[1])b.polygonOffset(d,ba),e[0]=d,e[1]=ba;d=v.sample_alpha;
d!==c.sample_alpha&&(d?b.enable(32926):b.disable(32926),c.sample_alpha=d);d=v.sample_enable;d!==c.sample_enable&&(d?b.enable(32928):b.disable(32928),c.sample_enable=d);d=g[0];ba=g[1];if(d!==l[0]||ba!==l[1])b.sampleCoverage(d,ba),l[0]=d,l[1]=ba;d=v.stencil_enable;d!==c.stencil_enable&&(d?b.enable(2960):b.disable(2960),c.stencil_enable=d);d=v.stencil_mask;d!==c.stencil_mask&&(b.stencilMask(d),c.stencil_mask=d);d=m[0];ba=m[1];M=m[2];if(d!==qa[0]||ba!==qa[1]||M!==qa[2])b.stencilFunc(d,ba,M),qa[0]=d,qa[1]=
ba,qa[2]=M;d=a[0];ba=a[1];M=a[2];O=a[3];if(d!==p[0]||ba!==p[1]||M!==p[2]||O!==p[3])b.stencilOpSeparate(d,ba,M,O),p[0]=d,p[1]=ba,p[2]=M,p[3]=O;d=L[0];ba=L[1];M=L[2];O=L[3];if(d!==fa[0]||ba!==fa[1]||M!==fa[2]||O!==fa[3])b.stencilOpSeparate(d,ba,M,O),fa[0]=d,fa[1]=ba,fa[2]=M,fa[3]=O;d=v.scissor_enable;d!==c.scissor_enable&&(d?b.enable(3089):b.disable(3089),c.scissor_enable=d);d=R[0];ba=R[1];M=R[2];O=R[3];if(d!==Z[0]||ba!==Z[1]||M!==Z[2]||O!==Z[3])b.scissor(d,ba,M,O),Z[0]=d,Z[1]=ba,Z[2]=M,Z[3]=O;d=aa[0];
ba=aa[1];M=aa[2];O=aa[3];if(d!==la[0]||ba!==la[1]||M!==la[2]||O!==la[3])b.viewport(d,ba,M,O),la[0]=d,la[1]=ba,la[2]=M,la[3]=O;c.dirty=!1}if(d=c.profile)N=performance.now(),y.count++;ba=C.program(C.vert,C.frag);b.useProgram(ba.program);T.setVAO(null);M=ba.id;(O=La[M])||(O=La[M]=n(ba));O.call(this,f);T.setVAO(null);d&&(y.cpuTime+=performance.now()-N)},scope:function(a,b,g){var p,d;if(p=c.profile)d=performance.now(),y.count++;b(f,a,g);p&&(y.cpuTime+=performance.now()-d)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(d,
y,n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Eb,Ld,oa,Oa,ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa,tb,Ha,W,nb,ga,pa,ac,pc,ic,rd,tc,Y,J,ja,Ca,ub,Jc,Uc,F,w,ia,va,X,ha,ra){var H,t,da,z,wa,ma,k,mc,V,q,Jb,zb,Ue,te,ce,le,Ed,se,md,ie,ve,yd,Fd,Zd,Wd,Ye,yf,af,Bd,De,Td,Ud,ne,Xd,nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,Gd,Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb;H=d.attributes;t=d.context;da=d.current;z=d.draw;wa=d.elements;ma=d.framebuffer;k=d.gl;mc=d.next;V=d.shader;
q=d.uniforms;Jb=d.vao;zb=mc.blend_color;Ue=da.blend_color;te=mc.blend_equation;ce=da.blend_equation;le=mc.blend_func;Ed=da.blend_func;se=mc.colorMask;md=da.colorMask;ie=mc.depth_range;ve=da.depth_range;yd=mc.polygonOffset_offset;Fd=da.polygonOffset_offset;Zd=mc.sample_coverage;Wd=da.sample_coverage;Ye=mc.scissor_box;yf=da.scissor_box;af=mc.stencil_func;Bd=da.stencil_func;De=mc.stencil_opBack;Td=da.stencil_opBack;Ud=mc.stencil_opFront;ne=da.stencil_opFront;Xd=mc.viewport;nd=da.viewport;hd={};wd={};
Yc=new Float32Array(16);qd=new Float32Array(16);nc=new Float32Array(16);sd=new Float32Array(16);ed=new Float32Array(16);Kc=new Float32Array(16);qc=new Float32Array(16);bb=new Float32Array(16);Gc=new Float32Array(16);Fb=new Float32Array(16);oc=new Float32Array(16);Ua=new Float32Array(16);Hc=new Float32Array(16);bc=new Float32Array(16);rc=new Float32Array(16);Gd=new Float32Array(16);Cd=new Float32Array(16);yc=new Float32Array(16);Xb=new Float32Array(16);Dc=new Float32Array(16);Qc=new Float32Array(16);
Ma=new Float32Array(16);Gb=new Float32Array(16);Xa=new Float32Array(16);sa=new Float32Array(16);td=new Float32Array(16);Bb=new Float32Array(16);Ta=new Float32Array(16);Ib=new Float32Array(16);db=new Float32Array(16);Ec=new Float32Array(16);Rb=new Float32Array(16);return{batch:function(a,g){var p,d,h,e;p=ma.next;p!==ma.cur&&(p?k.bindFramebuffer(36160,p.framebuffer):k.bindFramebuffer(36160,null),ma.cur=p);if(da.dirty){var l,q,m,n,y,V,L,P,R,Z,aa,bb,Ua,ua,fa,xa,zb,Fb,Aa,bc,Ia,qa,Kc,Sa,ed;l=se[0];q=se[1];
m=se[2];n=se[3];if(l!==md[0]||q!==md[1]||m!==md[2]||n!==md[3])k.colorMask(l,q,m,n),md[0]=l,md[1]=q,md[2]=m,md[3]=n;y=mc.frontFace;y!==da.frontFace&&(k.frontFace(y),da.frontFace=y);V=mc.polygonOffset_enable;V!==da.polygonOffset_enable&&(V?k.enable(32823):k.disable(32823),da.polygonOffset_enable=V);L=yd[0];P=yd[1];if(L!==Fd[0]||P!==Fd[1])k.polygonOffset(L,P),Fd[0]=L,Fd[1]=P;R=mc.sample_alpha;R!==da.sample_alpha&&(R?k.enable(32926):k.disable(32926),da.sample_alpha=R);Z=mc.sample_enable;Z!==da.sample_enable&&
(Z?k.enable(32928):k.disable(32928),da.sample_enable=Z);aa=Zd[0];bb=Zd[1];if(aa!==Wd[0]||bb!==Wd[1])k.sampleCoverage(aa,bb),Wd[0]=aa,Wd[1]=bb;Ua=mc.stencil_enable;Ua!==da.stencil_enable&&(Ua?k.enable(2960):k.disable(2960),da.stencil_enable=Ua);ua=mc.stencil_mask;ua!==da.stencil_mask&&(k.stencilMask(ua),da.stencil_mask=ua);fa=af[0];xa=af[1];zb=af[2];if(fa!==Bd[0]||xa!==Bd[1]||zb!==Bd[2])k.stencilFunc(fa,xa,zb),Bd[0]=fa,Bd[1]=xa,Bd[2]=zb;Fb=Ud[0];Aa=Ud[1];bc=Ud[2];Ia=Ud[3];if(Fb!==ne[0]||Aa!==ne[1]||
bc!==ne[2]||Ia!==ne[3])k.stencilOpSeparate(Fb,Aa,bc,Ia),ne[0]=Fb,ne[1]=Aa,ne[2]=bc,ne[3]=Ia;qa=De[0];Kc=De[1];Sa=De[2];ed=De[3];if(qa!==Td[0]||Kc!==Td[1]||Sa!==Td[2]||ed!==Td[3])k.stencilOpSeparate(qa,Kc,Sa,ed),Td[0]=qa,Td[1]=Kc,Td[2]=Sa,Td[3]=ed}k.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;k.disable(3042);da.blend_enable=!1;k.blendEquationSeparate(32774,32774);ce[0]=32774;ce[1]=32774;k.blendFuncSeparate(770,771,1,1);Ed[0]=770;Ed[1]=771;Ed[2]=1;Ed[3]=1;k.enable(2884);da.cull_enable=!0;k.cullFace(1029);
da.cull_face=1029;k.enable(2929);da.depth_enable=!0;k.depthFunc(513);da.depth_func=513;k.depthMask(!0);da.depth_mask=!0;k.depthRange(0,1);ve[0]=0;ve[1]=1;k.disable(3024);da.dither=!1;k.lineWidth(2);da.lineWidth=2;k.enable(3089);da.scissor_enable=!0;d=da.profile;da.profile=!1;k.useProgram(Ld.program);var la,$a,qc,ya,Ye,Ka,nc,gb,ib,za,Hc,Da,qb,rb,Ya,Za,Gc,rc,qd,Wa,Mb,oc,Fa,Yc,Ra,Ba,lb,wb,Db,sb,sd,xb,le;Jb.setVAO(null);la=ac.location;$a=H[la];$a.buffer||k.enableVertexAttribArray(la);if($a.type!==N.dtype||
4!==$a.size||$a.buffer!==N||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)k.bindBuffer(34962,N.buffer),k.vertexAttribPointer(la,4,N.dtype,!1,0,0),$a.type=N.dtype,$a.size=4,$a.buffer=N,$a.normalized=!1,$a.offset=0,$a.stride=0;qc=pc.location;ya=H[qc];ya.buffer||k.enableVertexAttribArray(qc);if(ya.type!==f.dtype||4!==ya.size||ya.buffer!==f||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)k.bindBuffer(34962,f.buffer),k.vertexAttribPointer(qc,4,f.dtype,!1,0,0),ya.type=f.dtype,ya.size=4,ya.buffer=f,
ya.normalized=!1,ya.offset=0,ya.stride=0;Ye=ic.location;Ka=H[Ye];Ka.buffer||k.enableVertexAttribArray(Ye);if(Ka.type!==c.dtype||4!==Ka.size||Ka.buffer!==c||!1!==Ka.normalized||0!==Ka.offset||0!==Ka.stride)k.bindBuffer(34962,c.buffer),k.vertexAttribPointer(Ye,4,c.dtype,!1,0,0),Ka.type=c.dtype,Ka.size=4,Ka.buffer=c,Ka.normalized=!1,Ka.offset=0,Ka.stride=0;nc=rd.location;gb=H[nc];gb.buffer||k.enableVertexAttribArray(nc);if(gb.type!==x.dtype||4!==gb.size||gb.buffer!==x||!1!==gb.normalized||0!==gb.offset||
0!==gb.stride)k.bindBuffer(34962,x.buffer),k.vertexAttribPointer(nc,4,x.dtype,!1,0,0),gb.type=x.dtype,gb.size=4,gb.buffer=x,gb.normalized=!1,gb.offset=0,gb.stride=0;ib=tc.location;za=H[ib];za.buffer||k.enableVertexAttribArray(ib);if(za.type!==b.dtype||4!==za.size||za.buffer!==b||!1!==za.normalized||0!==za.offset||0!==za.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(ib,4,b.dtype,!1,0,0),za.type=b.dtype,za.size=4,za.buffer=b,za.normalized=!1,za.offset=0,za.stride=0;Hc=Y.location;Da=H[Hc];
Da.buffer||k.enableVertexAttribArray(Hc);if(Da.type!==v.dtype||4!==Da.size||Da.buffer!==v||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)k.bindBuffer(34962,v.buffer),k.vertexAttribPointer(Hc,4,v.dtype,!1,0,0),Da.type=v.dtype,Da.size=4,Da.buffer=v,Da.normalized=!1,Da.offset=0,Da.stride=0;qb=J.location;rb=H[qb];rb.buffer||k.enableVertexAttribArray(qb);if(rb.type!==C.dtype||4!==rb.size||rb.buffer!==C||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)k.bindBuffer(34962,C.buffer),k.vertexAttribPointer(qb,
4,C.dtype,!1,0,0),rb.type=C.dtype,rb.size=4,rb.buffer=C,rb.normalized=!1,rb.offset=0,rb.stride=0;Ya=ja.location;Za=H[Ya];Za.buffer||k.enableVertexAttribArray(Ya);if(Za.type!==T.dtype||4!==Za.size||Za.buffer!==T||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)k.bindBuffer(34962,T.buffer),k.vertexAttribPointer(Ya,4,T.dtype,!1,0,0),Za.type=T.dtype,Za.size=4,Za.buffer=T,Za.normalized=!1,Za.offset=0,Za.stride=0;Gc=Ca.location;rc=H[Gc];rc.buffer||k.enableVertexAttribArray(Gc);if(rc.type!==K.dtype||4!==
rc.size||rc.buffer!==K||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)k.bindBuffer(34962,K.buffer),k.vertexAttribPointer(Gc,4,K.dtype,!1,0,0),rc.type=K.dtype,rc.size=4,rc.buffer=K,rc.normalized=!1,rc.offset=0,rc.stride=0;qd=ub.location;Wa=H[qd];Wa.buffer||k.enableVertexAttribArray(qd);if(Wa.type!==G.dtype||4!==Wa.size||Wa.buffer!==G||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)k.bindBuffer(34962,G.buffer),k.vertexAttribPointer(qd,4,G.dtype,!1,0,0),Wa.type=G.dtype,Wa.size=4,Wa.buffer=G,Wa.normalized=
!1,Wa.offset=0,Wa.stride=0;Mb=Jc.location;oc=H[Mb];oc.buffer||k.enableVertexAttribArray(Mb);if(oc.type!==r.dtype||4!==oc.size||oc.buffer!==r||!1!==oc.normalized||0!==oc.offset||0!==oc.stride)k.bindBuffer(34962,r.buffer),k.vertexAttribPointer(Mb,4,r.dtype,!1,0,0),oc.type=r.dtype,oc.size=4,oc.buffer=r,oc.normalized=!1,oc.offset=0,oc.stride=0;Fa=Uc.location;Yc=H[Fa];Yc.buffer||k.enableVertexAttribArray(Fa);if(Yc.type!==E.dtype||4!==Yc.size||Yc.buffer!==E||!1!==Yc.normalized||0!==Yc.offset||0!==Yc.stride)k.bindBuffer(34962,
E.buffer),k.vertexAttribPointer(Fa,4,E.dtype,!1,0,0),Yc.type=E.dtype,Yc.size=4,Yc.buffer=E,Yc.normalized=!1,Yc.offset=0,Yc.stride=0;Ra=F.location;Ba=H[Ra];Ba.buffer||k.enableVertexAttribArray(Ra);if(Ba.type!==B.dtype||4!==Ba.size||Ba.buffer!==B||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)k.bindBuffer(34962,B.buffer),k.vertexAttribPointer(Ra,4,B.dtype,!1,0,0),Ba.type=B.dtype,Ba.size=4,Ba.buffer=B,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;lb=w.location;wb=H[lb];wb.buffer||k.enableVertexAttribArray(lb);
if(wb.type!==D.dtype||4!==wb.size||wb.buffer!==D||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)k.bindBuffer(34962,D.buffer),k.vertexAttribPointer(lb,4,D.dtype,!1,0,0),wb.type=D.dtype,wb.size=4,wb.buffer=D,wb.normalized=!1,wb.offset=0,wb.stride=0;Db=ia.location;sb=H[Db];sb.buffer||k.enableVertexAttribArray(Db);if(sb.type!==Q.dtype||4!==sb.size||sb.buffer!==Q||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)k.bindBuffer(34962,Q.buffer),k.vertexAttribPointer(Db,4,Q.dtype,!1,0,0),sb.type=Q.dtype,
sb.size=4,sb.buffer=Q,sb.normalized=!1,sb.offset=0,sb.stride=0;sd=Oa.location;xb=H[sd];xb.buffer||k.enableVertexAttribArray(sd);if(xb.type!==A.dtype||4!==xb.size||xb.buffer!==A||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(sd,4,A.dtype,!1,0,0),xb.type=A.dtype,xb.size=4,xb.buffer=A,xb.normalized=!1,xb.offset=0,xb.stride=0;k.uniform1i(va.location,oa.bind());(le=z.elements)?k.bindBuffer(34963,le.buffer.buffer):Jb.currentVAO&&(le=wa.getElements(Jb.currentVAO.elements))&&
k.bindBuffer(34963,le.buffer.buffer);for(h=0;h<g;++h){e=a[h];var ie,Xd,Gd,ca,te,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,La,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,Eb,fd,kd,Wc,ge,vd,cg,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ja,we,he,fe,de,pe,ae;hd.height=e.viewportHeight;hd.width=e.viewportWidth;hd.x=e.viewportX;hd.y=e.viewportY;ie=hd.x|0;Xd=hd.y|0;Gd="width"in hd?hd.width|0:t.framebufferWidth-ie;ca="height"in hd?hd.height|0:t.framebufferHeight-Xd;te=t.viewportWidth;t.viewportWidth=Gd;Wb=t.viewportHeight;
t.viewportHeight=ca;k.viewport(ie,Xd,Gd,ca);nd[0]=ie;nd[1]=Xd;nd[2]=Gd;nd[3]=ca;wd.height=e.scissorHeight;wd.width=e.scissorWidth;wd.x=e.scissorX;wd.y=e.scissorY;cc=wd.x|0;Pb=wd.y|0;Ga="width"in wd?wd.width|0:t.framebufferWidth-cc;Zb="height"in wd?wd.height|0:t.framebufferHeight-Pb;k.scissor(cc,Pb,Ga,Zb);yf[0]=cc;yf[1]=Pb;yf[2]=Ga;yf[3]=Zb;mb=e.dim0A;k.uniformMatrix4fv(M.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(Cd[0]=mb[0],Cd[1]=mb[1],Cd[2]=mb[2],Cd[3]=mb[3],Cd[4]=mb[4],Cd[5]=
mb[5],Cd[6]=mb[6],Cd[7]=mb[7],Cd[8]=mb[8],Cd[9]=mb[9],Cd[10]=mb[10],Cd[11]=mb[11],Cd[12]=mb[12],Cd[13]=mb[13],Cd[14]=mb[14],Cd[15]=mb[15],Cd));yb=e.dim1A;k.uniformMatrix4fv(I.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(yc[0]=yb[0],yc[1]=yb[1],yc[2]=yb[2],yc[3]=yb[3],yc[4]=yb[4],yc[5]=yb[5],yc[6]=yb[6],yc[7]=yb[7],yc[8]=yb[8],yc[9]=yb[9],yc[10]=yb[10],yc[11]=yb[11],yc[12]=yb[12],yc[13]=yb[13],yc[14]=yb[14],yc[15]=yb[15],yc));Nb=e.dim0B;k.uniformMatrix4fv(O.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(Xb[0]=Nb[0],Xb[1]=Nb[1],Xb[2]=Nb[2],Xb[3]=Nb[3],Xb[4]=Nb[4],Xb[5]=Nb[5],Xb[6]=Nb[6],Xb[7]=Nb[7],Xb[8]=Nb[8],Xb[9]=Nb[9],Xb[10]=Nb[10],Xb[11]=Nb[11],Xb[12]=Nb[12],Xb[13]=Nb[13],Xb[14]=Nb[14],Xb[15]=Nb[15],Xb));Qb=e.dim1B;k.uniformMatrix4fv(Vb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Dc[0]=Qb[0],Dc[1]=Qb[1],Dc[2]=Qb[2],Dc[3]=Qb[3],Dc[4]=Qb[4],Dc[5]=Qb[5],Dc[6]=Qb[6],Dc[7]=Qb[7],Dc[8]=Qb[8],Dc[9]=Qb[9],Dc[10]=Qb[10],Dc[11]=Qb[11],Dc[12]=Qb[12],Dc[13]=
Qb[13],Dc[14]=Qb[14],Dc[15]=Qb[15],Dc));ec=e.dim0C;k.uniformMatrix4fv(U.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(Qc[0]=ec[0],Qc[1]=ec[1],Qc[2]=ec[2],Qc[3]=ec[3],Qc[4]=ec[4],Qc[5]=ec[5],Qc[6]=ec[6],Qc[7]=ec[7],Qc[8]=ec[8],Qc[9]=ec[9],Qc[10]=ec[10],Qc[11]=ec[11],Qc[12]=ec[12],Qc[13]=ec[13],Qc[14]=ec[14],Qc[15]=ec[15],Qc));gc=e.dim1C;k.uniformMatrix4fv(ab.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Ma[0]=gc[0],Ma[1]=gc[1],Ma[2]=gc[2],Ma[3]=gc[3],Ma[4]=gc[4],Ma[5]=
gc[5],Ma[6]=gc[6],Ma[7]=gc[7],Ma[8]=gc[8],Ma[9]=gc[9],Ma[10]=gc[10],Ma[11]=gc[11],Ma[12]=gc[12],Ma[13]=gc[13],Ma[14]=gc[14],Ma[15]=gc[15],Ma));La=e.dim0D;k.uniformMatrix4fv(ta.location,!1,Array.isArray(La)||La instanceof Float32Array?La:(Gb[0]=La[0],Gb[1]=La[1],Gb[2]=La[2],Gb[3]=La[3],Gb[4]=La[4],Gb[5]=La[5],Gb[6]=La[6],Gb[7]=La[7],Gb[8]=La[8],Gb[9]=La[9],Gb[10]=La[10],Gb[11]=La[11],Gb[12]=La[12],Gb[13]=La[13],Gb[14]=La[14],Gb[15]=La[15],Gb));zc=e.dim1D;k.uniformMatrix4fv(S.location,!1,Array.isArray(zc)||
zc instanceof Float32Array?zc:(Xa[0]=zc[0],Xa[1]=zc[1],Xa[2]=zc[2],Xa[3]=zc[3],Xa[4]=zc[4],Xa[5]=zc[5],Xa[6]=zc[6],Xa[7]=zc[7],Xa[8]=zc[8],Xa[9]=zc[9],Xa[10]=zc[10],Xa[11]=zc[11],Xa[12]=zc[12],Xa[13]=zc[13],Xa[14]=zc[14],Xa[15]=zc[15],Xa));Ac=e.loA;k.uniformMatrix4fv(tb.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(sa[0]=Ac[0],sa[1]=Ac[1],sa[2]=Ac[2],sa[3]=Ac[3],sa[4]=Ac[4],sa[5]=Ac[5],sa[6]=Ac[6],sa[7]=Ac[7],sa[8]=Ac[8],sa[9]=Ac[9],sa[10]=Ac[10],sa[11]=Ac[11],sa[12]=Ac[12],sa[13]=
Ac[13],sa[14]=Ac[14],sa[15]=Ac[15],sa));Bc=e.hiA;k.uniformMatrix4fv(ka.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(td[0]=Bc[0],td[1]=Bc[1],td[2]=Bc[2],td[3]=Bc[3],td[4]=Bc[4],td[5]=Bc[5],td[6]=Bc[6],td[7]=Bc[7],td[8]=Bc[8],td[9]=Bc[9],td[10]=Bc[10],td[11]=Bc[11],td[12]=Bc[12],td[13]=Bc[13],td[14]=Bc[14],td[15]=Bc[15],td));Mc=e.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(Mc)||Mc instanceof Float32Array?Mc:(Bb[0]=Mc[0],Bb[1]=Mc[1],Bb[2]=Mc[2],Bb[3]=Mc[3],Bb[4]=Mc[4],Bb[5]=
Mc[5],Bb[6]=Mc[6],Bb[7]=Mc[7],Bb[8]=Mc[8],Bb[9]=Mc[9],Bb[10]=Mc[10],Bb[11]=Mc[11],Bb[12]=Mc[12],Bb[13]=Mc[13],Bb[14]=Mc[14],Bb[15]=Mc[15],Bb));Xc=e.hiB;k.uniformMatrix4fv(ea.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(Ta[0]=Xc[0],Ta[1]=Xc[1],Ta[2]=Xc[2],Ta[3]=Xc[3],Ta[4]=Xc[4],Ta[5]=Xc[5],Ta[6]=Xc[6],Ta[7]=Xc[7],Ta[8]=Xc[8],Ta[9]=Xc[9],Ta[10]=Xc[10],Ta[11]=Xc[11],Ta[12]=Xc[12],Ta[13]=Xc[13],Ta[14]=Xc[14],Ta[15]=Xc[15],Ta));Rc=e.loC;k.uniformMatrix4fv(W.location,!1,Array.isArray(Rc)||
Rc instanceof Float32Array?Rc:(Ib[0]=Rc[0],Ib[1]=Rc[1],Ib[2]=Rc[2],Ib[3]=Rc[3],Ib[4]=Rc[4],Ib[5]=Rc[5],Ib[6]=Rc[6],Ib[7]=Rc[7],Ib[8]=Rc[8],Ib[9]=Rc[9],Ib[10]=Rc[10],Ib[11]=Rc[11],Ib[12]=Rc[12],Ib[13]=Rc[13],Ib[14]=Rc[14],Ib[15]=Rc[15],Ib));Nc=e.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(db[0]=Nc[0],db[1]=Nc[1],db[2]=Nc[2],db[3]=Nc[3],db[4]=Nc[4],db[5]=Nc[5],db[6]=Nc[6],db[7]=Nc[7],db[8]=Nc[8],db[9]=Nc[9],db[10]=Nc[10],db[11]=Nc[11],db[12]=Nc[12],db[13]=
Nc[13],db[14]=Nc[14],db[15]=Nc[15],db));Lb=e.loD;k.uniformMatrix4fv(nb.location,!1,Array.isArray(Lb)||Lb instanceof Float32Array?Lb:(Ec[0]=Lb[0],Ec[1]=Lb[1],Ec[2]=Lb[2],Ec[3]=Lb[3],Ec[4]=Lb[4],Ec[5]=Lb[5],Ec[6]=Lb[6],Ec[7]=Lb[7],Ec[8]=Lb[8],Ec[9]=Lb[9],Ec[10]=Lb[10],Ec[11]=Lb[11],Ec[12]=Lb[12],Ec[13]=Lb[13],Ec[14]=Lb[14],Ec[15]=Lb[15],Ec));Hb=e.hiD;k.uniformMatrix4fv(Pa.location,!1,Array.isArray(Hb)||Hb instanceof Float32Array?Hb:(Rb[0]=Hb[0],Rb[1]=Hb[1],Rb[2]=Hb[2],Rb[3]=Hb[3],Rb[4]=Hb[4],Rb[5]=
Hb[5],Rb[6]=Hb[6],Rb[7]=Hb[7],Rb[8]=Hb[8],Rb[9]=Hb[9],Rb[10]=Hb[10],Rb[11]=Hb[11],Rb[12]=Hb[12],Rb[13]=Hb[13],Rb[14]=Hb[14],Rb[15]=Hb[15],Rb));Oc=e.resolution;Fc=Oc[0];fc=Oc[1];h&&Sc===Fc&&Vc===fc||(Sc=Fc,Vc=fc,k.uniform2f(X.location,Fc,fc));Eb=e.viewBoxPos;fd=Eb[0];Wc=Eb[1];h&&kd===fd&&ge===Wc||(kd=fd,ge=Wc,k.uniform2f(ha.location,fd,Wc));vd=e.viewBoxSize;cg=vd[0];ee=vd[1];h&&ue===cg&&Jd===ee||(ue=cg,Jd=ee,k.uniform2f(ra.location,cg,ee));Hd=e.maskHeight;h&&cd===Hd||(cd=Hd,k.uniform1f(ga.location,
Hd));Cc=e.drwLayer;h&&jd===Cc||(jd=Cc,k.uniform1f(u.location,Cc));gd=e.contextColor;$c=gd[0];zd=gd[1];xe=gd[2];we=gd[3];h&&ld===$c&&Ad===zd&&Ja===xe&&he===we||(ld=$c,Ad=zd,Ja=xe,he=we,k.uniform4f(ba.location,$c,zd,xe,we));(fe=e.maskTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);de=fe._texture;k.uniform1i(pa.location,de.bind());pe=e.offset;if(ae=e.count)le?k.drawElements(1,ae,le.type,pe<<(le.type-5121>>1)):k.drawArrays(1,pe,ae),t.viewportWidth=te,t.viewportHeight=Wb,de.unbind()}oa.unbind();
da.dirty=!0;Jb.setVAO(null);da.profile=d},draw:function(a){var g,p,e,d,h,l;g=ma.next;g!==ma.cur&&(g?k.bindFramebuffer(36160,g.framebuffer):k.bindFramebuffer(36160,null),ma.cur=g);if(da.dirty){g=se[0];l=se[1];p=se[2];e=se[3];if(g!==md[0]||l!==md[1]||p!==md[2]||e!==md[3])k.colorMask(g,l,p,e),md[0]=g,md[1]=l,md[2]=p,md[3]=e;g=mc.frontFace;g!==da.frontFace&&(k.frontFace(g),da.frontFace=g);g=mc.polygonOffset_enable;g!==da.polygonOffset_enable&&(g?k.enable(32823):k.disable(32823),da.polygonOffset_enable=
g);g=yd[0];l=yd[1];if(g!==Fd[0]||l!==Fd[1])k.polygonOffset(g,l),Fd[0]=g,Fd[1]=l;g=mc.sample_alpha;g!==da.sample_alpha&&(g?k.enable(32926):k.disable(32926),da.sample_alpha=g);g=mc.sample_enable;g!==da.sample_enable&&(g?k.enable(32928):k.disable(32928),da.sample_enable=g);g=Zd[0];l=Zd[1];if(g!==Wd[0]||l!==Wd[1])k.sampleCoverage(g,l),Wd[0]=g,Wd[1]=l;g=mc.stencil_enable;g!==da.stencil_enable&&(g?k.enable(2960):k.disable(2960),da.stencil_enable=g);g=mc.stencil_mask;g!==da.stencil_mask&&(k.stencilMask(g),
da.stencil_mask=g);g=af[0];l=af[1];p=af[2];if(g!==Bd[0]||l!==Bd[1]||p!==Bd[2])k.stencilFunc(g,l,p),Bd[0]=g,Bd[1]=l,Bd[2]=p;g=Ud[0];l=Ud[1];p=Ud[2];e=Ud[3];if(g!==ne[0]||l!==ne[1]||p!==ne[2]||e!==ne[3])k.stencilOpSeparate(g,l,p,e),ne[0]=g,ne[1]=l,ne[2]=p,ne[3]=e;g=De[0];l=De[1];p=De[2];e=De[3];if(g!==Td[0]||l!==Td[1]||p!==Td[2]||e!==Td[3])k.stencilOpSeparate(g,l,p,e),Td[0]=g,Td[1]=l,Td[2]=p,Td[3]=e}hd.height=a.viewportHeight;hd.width=a.viewportWidth;hd.x=a.viewportX;hd.y=a.viewportY;p=hd.x|0;e=hd.y|
0;d="width"in hd?hd.width|0:t.framebufferWidth-p;h="height"in hd?hd.height|0:t.framebufferHeight-e;g=t.viewportWidth;t.viewportWidth=d;l=t.viewportHeight;t.viewportHeight=h;k.viewport(p,e,d,h);nd[0]=p;nd[1]=e;nd[2]=d;nd[3]=h;k.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;k.disable(3042);da.blend_enable=!1;k.blendEquationSeparate(32774,32774);ce[0]=32774;ce[1]=32774;k.blendFuncSeparate(770,771,1,1);Ed[0]=770;Ed[1]=771;Ed[2]=1;Ed[3]=1;k.enable(2884);da.cull_enable=!0;k.cullFace(1029);da.cull_face=
1029;k.enable(2929);da.depth_enable=!0;k.depthFunc(513);da.depth_func=513;k.depthMask(!0);da.depth_mask=!0;k.depthRange(0,1);ve[0]=0;ve[1]=1;k.disable(3024);da.dither=!1;k.lineWidth(2);da.lineWidth=2;wd.height=a.scissorHeight;wd.width=a.scissorWidth;wd.x=a.scissorX;wd.y=a.scissorY;p=wd.x|0;e=wd.y|0;d="width"in wd?wd.width|0:t.framebufferWidth-p;h="height"in wd?wd.height|0:t.framebufferHeight-e;k.scissor(p,e,d,h);yf[0]=p;yf[1]=e;yf[2]=d;yf[3]=h;k.enable(3089);da.scissor_enable=!0;p=da.profile;da.profile=
!1;k.useProgram(n.program);Jb.setVAO(null);e=ac.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==N.dtype||4!==d.size||d.buffer!==N||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,N.buffer),k.vertexAttribPointer(e,4,N.dtype,!1,0,0),d.type=N.dtype,d.size=4,d.buffer=N,d.normalized=!1,d.offset=0,d.stride=0;e=pc.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==f.dtype||4!==d.size||d.buffer!==f||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,
f.buffer),k.vertexAttribPointer(e,4,f.dtype,!1,0,0),d.type=f.dtype,d.size=4,d.buffer=f,d.normalized=!1,d.offset=0,d.stride=0;e=ic.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==c.dtype||4!==d.size||d.buffer!==c||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,c.buffer),k.vertexAttribPointer(e,4,c.dtype,!1,0,0),d.type=c.dtype,d.size=4,d.buffer=c,d.normalized=!1,d.offset=0,d.stride=0;e=rd.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==x.dtype||
4!==d.size||d.buffer!==x||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,x.buffer),k.vertexAttribPointer(e,4,x.dtype,!1,0,0),d.type=x.dtype,d.size=4,d.buffer=x,d.normalized=!1,d.offset=0,d.stride=0;e=tc.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==b.dtype||4!==d.size||d.buffer!==b||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(e,4,b.dtype,!1,0,0),d.type=b.dtype,d.size=4,d.buffer=b,d.normalized=!1,d.offset=0,
d.stride=0;e=Y.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==v.dtype||4!==d.size||d.buffer!==v||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,v.buffer),k.vertexAttribPointer(e,4,v.dtype,!1,0,0),d.type=v.dtype,d.size=4,d.buffer=v,d.normalized=!1,d.offset=0,d.stride=0;e=J.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==C.dtype||4!==d.size||d.buffer!==C||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,C.buffer),k.vertexAttribPointer(e,
4,C.dtype,!1,0,0),d.type=C.dtype,d.size=4,d.buffer=C,d.normalized=!1,d.offset=0,d.stride=0;e=ja.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==T.dtype||4!==d.size||d.buffer!==T||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,T.buffer),k.vertexAttribPointer(e,4,T.dtype,!1,0,0),d.type=T.dtype,d.size=4,d.buffer=T,d.normalized=!1,d.offset=0,d.stride=0;e=Ca.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==K.dtype||4!==d.size||d.buffer!==K||!1!==d.normalized||
0!==d.offset||0!==d.stride)k.bindBuffer(34962,K.buffer),k.vertexAttribPointer(e,4,K.dtype,!1,0,0),d.type=K.dtype,d.size=4,d.buffer=K,d.normalized=!1,d.offset=0,d.stride=0;e=ub.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==G.dtype||4!==d.size||d.buffer!==G||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,G.buffer),k.vertexAttribPointer(e,4,G.dtype,!1,0,0),d.type=G.dtype,d.size=4,d.buffer=G,d.normalized=!1,d.offset=0,d.stride=0;e=Jc.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);
if(d.type!==r.dtype||4!==d.size||d.buffer!==r||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,r.buffer),k.vertexAttribPointer(e,4,r.dtype,!1,0,0),d.type=r.dtype,d.size=4,d.buffer=r,d.normalized=!1,d.offset=0,d.stride=0;e=Uc.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==E.dtype||4!==d.size||d.buffer!==E||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,E.buffer),k.vertexAttribPointer(e,4,E.dtype,!1,0,0),d.type=E.dtype,d.size=4,d.buffer=E,d.normalized=
!1,d.offset=0,d.stride=0;e=F.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==B.dtype||4!==d.size||d.buffer!==B||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,B.buffer),k.vertexAttribPointer(e,4,B.dtype,!1,0,0),d.type=B.dtype,d.size=4,d.buffer=B,d.normalized=!1,d.offset=0,d.stride=0;e=w.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==D.dtype||4!==d.size||d.buffer!==D||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,D.buffer),
k.vertexAttribPointer(e,4,D.dtype,!1,0,0),d.type=D.dtype,d.size=4,d.buffer=D,d.normalized=!1,d.offset=0,d.stride=0;e=ia.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==Q.dtype||4!==d.size||d.buffer!==Q||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,Q.buffer),k.vertexAttribPointer(e,4,Q.dtype,!1,0,0),d.type=Q.dtype,d.size=4,d.buffer=Q,d.normalized=!1,d.offset=0,d.stride=0;e=Oa.location;d=H[e];d.buffer||k.enableVertexAttribArray(e);if(d.type!==A.dtype||4!==d.size||
d.buffer!==A||!1!==d.normalized||0!==d.offset||0!==d.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(e,4,A.dtype,!1,0,0),d.type=A.dtype,d.size=4,d.buffer=A,d.normalized=!1,d.offset=0,d.stride=0;e=a.dim0A;k.uniformMatrix4fv(M.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Yc[0]=e[0],Yc[1]=e[1],Yc[2]=e[2],Yc[3]=e[3],Yc[4]=e[4],Yc[5]=e[5],Yc[6]=e[6],Yc[7]=e[7],Yc[8]=e[8],Yc[9]=e[9],Yc[10]=e[10],Yc[11]=e[11],Yc[12]=e[12],Yc[13]=e[13],Yc[14]=e[14],Yc[15]=e[15],Yc));e=a.dim1A;k.uniformMatrix4fv(I.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(qd[0]=e[0],qd[1]=e[1],qd[2]=e[2],qd[3]=e[3],qd[4]=e[4],qd[5]=e[5],qd[6]=e[6],qd[7]=e[7],qd[8]=e[8],qd[9]=e[9],qd[10]=e[10],qd[11]=e[11],qd[12]=e[12],qd[13]=e[13],qd[14]=e[14],qd[15]=e[15],qd));e=a.dim0B;k.uniformMatrix4fv(O.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(nc[0]=e[0],nc[1]=e[1],nc[2]=e[2],nc[3]=e[3],nc[4]=e[4],nc[5]=e[5],nc[6]=e[6],nc[7]=e[7],nc[8]=e[8],nc[9]=e[9],nc[10]=e[10],nc[11]=e[11],nc[12]=e[12],nc[13]=e[13],nc[14]=
e[14],nc[15]=e[15],nc));e=a.dim1B;k.uniformMatrix4fv(Vb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(sd[0]=e[0],sd[1]=e[1],sd[2]=e[2],sd[3]=e[3],sd[4]=e[4],sd[5]=e[5],sd[6]=e[6],sd[7]=e[7],sd[8]=e[8],sd[9]=e[9],sd[10]=e[10],sd[11]=e[11],sd[12]=e[12],sd[13]=e[13],sd[14]=e[14],sd[15]=e[15],sd));e=a.dim0C;k.uniformMatrix4fv(U.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ed[0]=e[0],ed[1]=e[1],ed[2]=e[2],ed[3]=e[3],ed[4]=e[4],ed[5]=e[5],ed[6]=e[6],ed[7]=e[7],ed[8]=e[8],ed[9]=
e[9],ed[10]=e[10],ed[11]=e[11],ed[12]=e[12],ed[13]=e[13],ed[14]=e[14],ed[15]=e[15],ed));e=a.dim1C;k.uniformMatrix4fv(ab.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Kc[0]=e[0],Kc[1]=e[1],Kc[2]=e[2],Kc[3]=e[3],Kc[4]=e[4],Kc[5]=e[5],Kc[6]=e[6],Kc[7]=e[7],Kc[8]=e[8],Kc[9]=e[9],Kc[10]=e[10],Kc[11]=e[11],Kc[12]=e[12],Kc[13]=e[13],Kc[14]=e[14],Kc[15]=e[15],Kc));e=a.dim0D;k.uniformMatrix4fv(ta.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(qc[0]=e[0],qc[1]=e[1],qc[2]=e[2],qc[3]=
e[3],qc[4]=e[4],qc[5]=e[5],qc[6]=e[6],qc[7]=e[7],qc[8]=e[8],qc[9]=e[9],qc[10]=e[10],qc[11]=e[11],qc[12]=e[12],qc[13]=e[13],qc[14]=e[14],qc[15]=e[15],qc));e=a.dim1D;k.uniformMatrix4fv(S.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(bb[0]=e[0],bb[1]=e[1],bb[2]=e[2],bb[3]=e[3],bb[4]=e[4],bb[5]=e[5],bb[6]=e[6],bb[7]=e[7],bb[8]=e[8],bb[9]=e[9],bb[10]=e[10],bb[11]=e[11],bb[12]=e[12],bb[13]=e[13],bb[14]=e[14],bb[15]=e[15],bb));e=a.loA;k.uniformMatrix4fv(tb.location,!1,Array.isArray(e)||e instanceof
Float32Array?e:(Gc[0]=e[0],Gc[1]=e[1],Gc[2]=e[2],Gc[3]=e[3],Gc[4]=e[4],Gc[5]=e[5],Gc[6]=e[6],Gc[7]=e[7],Gc[8]=e[8],Gc[9]=e[9],Gc[10]=e[10],Gc[11]=e[11],Gc[12]=e[12],Gc[13]=e[13],Gc[14]=e[14],Gc[15]=e[15],Gc));e=a.hiA;k.uniformMatrix4fv(ka.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fb[0]=e[0],Fb[1]=e[1],Fb[2]=e[2],Fb[3]=e[3],Fb[4]=e[4],Fb[5]=e[5],Fb[6]=e[6],Fb[7]=e[7],Fb[8]=e[8],Fb[9]=e[9],Fb[10]=e[10],Fb[11]=e[11],Fb[12]=e[12],Fb[13]=e[13],Fb[14]=e[14],Fb[15]=e[15],Fb));e=a.loB;k.uniformMatrix4fv(Ha.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(oc[0]=e[0],oc[1]=e[1],oc[2]=e[2],oc[3]=e[3],oc[4]=e[4],oc[5]=e[5],oc[6]=e[6],oc[7]=e[7],oc[8]=e[8],oc[9]=e[9],oc[10]=e[10],oc[11]=e[11],oc[12]=e[12],oc[13]=e[13],oc[14]=e[14],oc[15]=e[15],oc));e=a.hiB;k.uniformMatrix4fv(ea.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ua[0]=e[0],Ua[1]=e[1],Ua[2]=e[2],Ua[3]=e[3],Ua[4]=e[4],Ua[5]=e[5],Ua[6]=e[6],Ua[7]=e[7],Ua[8]=e[8],Ua[9]=e[9],Ua[10]=e[10],Ua[11]=e[11],Ua[12]=e[12],Ua[13]=e[13],Ua[14]=
e[14],Ua[15]=e[15],Ua));e=a.loC;k.uniformMatrix4fv(W.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Hc[0]=e[0],Hc[1]=e[1],Hc[2]=e[2],Hc[3]=e[3],Hc[4]=e[4],Hc[5]=e[5],Hc[6]=e[6],Hc[7]=e[7],Hc[8]=e[8],Hc[9]=e[9],Hc[10]=e[10],Hc[11]=e[11],Hc[12]=e[12],Hc[13]=e[13],Hc[14]=e[14],Hc[15]=e[15],Hc));e=a.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(bc[0]=e[0],bc[1]=e[1],bc[2]=e[2],bc[3]=e[3],bc[4]=e[4],bc[5]=e[5],bc[6]=e[6],bc[7]=e[7],bc[8]=e[8],bc[9]=e[9],
bc[10]=e[10],bc[11]=e[11],bc[12]=e[12],bc[13]=e[13],bc[14]=e[14],bc[15]=e[15],bc));e=a.loD;k.uniformMatrix4fv(nb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(rc[0]=e[0],rc[1]=e[1],rc[2]=e[2],rc[3]=e[3],rc[4]=e[4],rc[5]=e[5],rc[6]=e[6],rc[7]=e[7],rc[8]=e[8],rc[9]=e[9],rc[10]=e[10],rc[11]=e[11],rc[12]=e[12],rc[13]=e[13],rc[14]=e[14],rc[15]=e[15],rc));e=a.hiD;k.uniformMatrix4fv(Pa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Gd[0]=e[0],Gd[1]=e[1],Gd[2]=e[2],Gd[3]=e[3],Gd[4]=
e[4],Gd[5]=e[5],Gd[6]=e[6],Gd[7]=e[7],Gd[8]=e[8],Gd[9]=e[9],Gd[10]=e[10],Gd[11]=e[11],Gd[12]=e[12],Gd[13]=e[13],Gd[14]=e[14],Gd[15]=e[15],Gd));e=a.resolution;k.uniform2f(X.location,e[0],e[1]);e=a.viewBoxPos;k.uniform2f(ha.location,e[0],e[1]);e=a.viewBoxSize;k.uniform2f(ra.location,e[0],e[1]);k.uniform1f(ga.location,a.maskHeight);k.uniform1f(u.location,a.drwLayer);e=a.contextColor;k.uniform4f(ba.location,e[0],e[1],e[2],e[3]);(e=a.maskTexture)&&"framebuffer"===e._reglType&&(e=e.color[0]);e=e._texture;
k.uniform1i(pa.location,e.bind());k.uniform1i(va.location,P.bind());(d=z.elements)?k.bindBuffer(34963,d.buffer.buffer):Jb.currentVAO&&(d=wa.getElements(Jb.currentVAO.elements))&&k.bindBuffer(34963,d.buffer.buffer);h=a.offset;if(a=a.count)d?k.drawElements(1,a,d.type,h<<(d.type-5121>>1)):k.drawArrays(1,h,a),da.dirty=!0,Jb.setVAO(null),t.viewportWidth=g,t.viewportHeight=l,da.profile=p,e.unbind(),P.unbind()},scope:function(d,k,n){var u,w,y,J,H,F,Y,O,M,I,P,U,S,W,X,ha,ja,ma,ba,ia,wa,ea,ga,ka,va,sa,pc,bb,
ra,Ua,Ca,ya,Ma,Wd,Fb,Jb,Xa,za,Ud,Da,bc,Dc,Kc,ed,Xb,Ta,ta,Gb,qc,rc,Fa,Qc,Ra,Ba,rd,md,pa,Bb,db,oa,nc,oc,Bd,Td,Yc,Hc,Gc,yc,Ib,Ga,ub,mb,yb,nd,qd,ne,Jc,Rb,sd,tc,td,Ec,Ea,Cd,Ue,Lb,Hb,ce,Ed,yd,yf,De,Gd,ac,af,ab,Oa,ic,Zd,se,Pa,nb,Fd,Vb,Cc,ve,Ha,Uc,tb,zd,Ad,Ld,Ja,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,jf,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,pf,Xe,Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,qf,hf,bf,ef,ff,gf,nf,kf,of,Af,Bf,Ne,Ae,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf,bg,
Qf,Rf,pg,cf,Ze,Lf,Mf,dg,eg,fg,gg,hg,Uf,Sf,Vf,Wf,Xf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Nf,Of,jg,kg,lg,mg,ng,Yf,Tf,Zf,$f,ag,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;hd.height=d.viewportHeight;hd.width=d.viewportWidth;hd.x=d.viewportX;hd.y=d.viewportY;u=hd.x|0;w=hd.y|0;y="width"in hd?hd.width|0:t.framebufferWidth-u;J="height"in hd?hd.height|0:t.framebufferHeight-w;H=t.viewportWidth;t.viewportWidth=
y;F=t.viewportHeight;t.viewportHeight=J;Y=Xd[0];Xd[0]=u;O=Xd[1];Xd[1]=w;M=Xd[2];Xd[2]=y;I=Xd[3];Xd[3]=J;P=zb[0];zb[0]=0;U=zb[1];zb[1]=0;S=zb[2];zb[2]=0;W=zb[3];zb[3]=0;X=mc.blend_enable;mc.blend_enable=!1;ha=te[0];te[0]=32774;ja=te[1];te[1]=32774;ma=le[0];le[0]=770;ba=le[1];le[1]=771;ia=le[2];le[2]=1;wa=le[3];le[3]=1;ea=mc.cull_enable;mc.cull_enable=!0;ga=mc.cull_face;mc.cull_face=1029;ka=mc.depth_enable;mc.depth_enable=!0;va=mc.depth_func;mc.depth_func=513;sa=mc.depth_mask;mc.depth_mask=!0;pc=ie[0];
ie[0]=0;bb=ie[1];ie[1]=1;ra=mc.dither;mc.dither=!1;Ua=mc.lineWidth;mc.lineWidth=2;wd.height=d.scissorHeight;wd.width=d.scissorWidth;wd.x=d.scissorX;wd.y=d.scissorY;Ca=wd.x|0;ya=wd.y|0;Ma="width"in wd?wd.width|0:t.framebufferWidth-Ca;Wd="height"in wd?wd.height|0:t.framebufferHeight-ya;Fb=Ye[0];Ye[0]=Ca;Jb=Ye[1];Ye[1]=ya;Xa=Ye[2];Ye[2]=Ma;za=Ye[3];Ye[3]=Wd;Ud=mc.scissor_enable;mc.scissor_enable=!0;Da=da.profile;da.profile=!1;bc=d.offset;Dc=z.offset;z.offset=bc;Kc=d.count;ed=z.count;z.count=Kc;Xb=z.primitive;
z.primitive=1;Ta=d.contextColor;ta=q[24];q[24]=Ta;Gb=d.dim0A;qc=q[3];q[3]=Gb;rc=d.dim0B;Fa=q[5];q[5]=rc;Qc=d.dim0C;Ra=q[7];q[7]=Qc;Ba=d.dim0D;rd=q[9];q[9]=Ba;md=d.dim1A;pa=q[4];q[4]=md;Bb=d.dim1B;db=q[6];q[6]=Bb;oa=d.dim1C;nc=q[8];q[8]=oa;oc=d.dim1D;Bd=q[10];q[10]=oc;Td=d.drwLayer;Yc=q[23];q[23]=Td;Hc=d.hiA;Gc=q[12];q[12]=Hc;yc=d.hiB;Ib=q[14];q[14]=yc;Ga=d.hiC;ub=q[16];q[16]=Ga;mb=d.hiD;yb=q[18];q[18]=mb;nd=d.loA;qd=q[11];q[11]=nd;ne=d.loB;Jc=q[13];q[13]=ne;Rb=d.loC;sd=q[15];q[15]=Rb;tc=d.loD;td=
q[17];q[17]=tc;Ec=d.maskHeight;Ea=q[22];q[22]=Ec;Cd=d.maskTexture;Ue=q[25];q[25]=Cd;Lb=q[26];q[26]=ca;Hb=d.resolution;ce=q[19];q[19]=Hb;Ed=d.viewBoxPos;yd=q[20];q[20]=Ed;yf=d.viewBoxSize;De=q[21];q[21]=yf;Gd=h.buffer;h.buffer=A;ac=h.divisor;h.divisor=0;af=h.normalized;h.normalized=!1;ab=h.offset;h.offset=0;Oa=h.size;h.size=0;ic=h.state;h.state=1;Zd=h.stride;h.stride=0;se=h.type;h.type=A.dtype;Pa=h.w;h.w=0;nb=h.x;h.x=0;Fd=h.y;h.y=0;Vb=h.z;h.z=0;Cc=e.buffer;e.buffer=N;ve=e.divisor;e.divisor=0;Ha=e.normalized;
e.normalized=!1;Uc=e.offset;e.offset=0;tb=e.size;e.size=0;zd=e.state;e.state=1;Ad=e.stride;e.stride=0;Ld=e.type;e.type=N.dtype;Ja=e.w;e.w=0;we=e.x;e.x=0;he=e.y;e.y=0;fe=e.z;e.z=0;de=g.buffer;g.buffer=f;pe=g.divisor;g.divisor=0;ae=g.normalized;g.normalized=!1;je=g.offset;g.offset=0;xc=g.size;g.size=0;Tc=g.state;g.state=1;qe=g.stride;g.stride=0;me=g.type;g.type=f.dtype;Id=g.w;g.w=0;Nd=g.x;g.x=0;Od=g.y;g.y=0;Pd=g.z;g.z=0;ke=l.buffer;l.buffer=c;Ee=l.divisor;l.divisor=0;ye=l.normalized;l.normalized=!1;
oe=l.offset;l.offset=0;jf=l.size;l.size=0;Oe=l.state;l.state=1;Le=l.stride;l.stride=0;re=l.type;l.type=c.dtype;Be=l.w;l.w=0;Fe=l.x;l.x=0;Ge=l.y;l.y=0;He=l.z;l.z=0;Ce=R.buffer;R.buffer=x;Kd=R.divisor;R.divisor=0;Sd=R.normalized;R.normalized=!1;Yd=R.offset;R.offset=0;be=R.size;R.size=0;Ie=R.state;R.state=1;Dd=R.stride;R.stride=0;Qd=R.type;R.type=x.dtype;ze=R.w;R.w=0;Je=R.x;R.x=0;pf=R.y;R.y=0;Xe=R.z;R.z=0;Pe=Z.buffer;Z.buffer=b;Me=Z.divisor;Z.divisor=0;We=Z.normalized;Z.normalized=!1;Te=Z.offset;Z.offset=
0;Qe=Z.size;Z.size=0;Re=Z.state;Z.state=1;Rd=Z.stride;Z.stride=0;Vd=Z.type;Z.type=b.dtype;Se=Z.w;Z.w=0;qf=Z.x;Z.x=0;hf=Z.y;Z.y=0;bf=Z.z;Z.z=0;ef=m.buffer;m.buffer=v;ff=m.divisor;m.divisor=0;gf=m.normalized;m.normalized=!1;nf=m.offset;m.offset=0;kf=m.size;m.size=0;of=m.state;m.state=1;Af=m.stride;m.stride=0;Bf=m.type;m.type=v.dtype;Ne=m.w;m.w=0;Ae=m.x;m.x=0;lf=m.y;m.y=0;mf=m.z;m.z=0;Cf=qa.buffer;qa.buffer=C;Ff=qa.divisor;qa.divisor=0;zf=qa.normalized;qa.normalized=!1;Df=qa.offset;qa.offset=0;Ef=qa.size;
qa.size=0;uf=qa.state;qa.state=1;vf=qa.stride;qa.stride=0;tf=qa.type;qa.type=C.dtype;wf=qa.w;qa.w=0;xf=qa.x;qa.x=0;Hf=qa.y;qa.y=0;If=qa.z;qa.z=0;Jf=L.buffer;L.buffer=T;Kf=L.divisor;L.divisor=0;rf=L.normalized;L.normalized=!1;Pf=L.offset;L.offset=0;Gf=L.size;L.size=0;sf=L.state;L.state=1;bg=L.stride;L.stride=0;Qf=L.type;L.type=T.dtype;Rf=L.w;L.w=0;pg=L.x;L.x=0;cf=L.y;L.y=0;Ze=L.z;L.z=0;Lf=fa.buffer;fa.buffer=K;Mf=fa.divisor;fa.divisor=0;dg=fa.normalized;fa.normalized=!1;eg=fa.offset;fa.offset=0;fg=
fa.size;fa.size=0;gg=fa.state;fa.state=1;hg=fa.stride;fa.stride=0;Uf=fa.type;fa.type=K.dtype;Sf=fa.w;fa.w=0;Vf=fa.x;fa.x=0;Wf=fa.y;fa.y=0;Xf=fa.z;fa.z=0;ig=a.buffer;a.buffer=G;qg=a.divisor;a.divisor=0;rg=a.normalized;a.normalized=!1;sg=a.offset;a.offset=0;tg=a.size;a.size=0;ug=a.state;a.state=1;vg=a.stride;a.stride=0;wg=a.type;a.type=G.dtype;xg=a.w;a.w=0;yg=a.x;a.x=0;zg=a.y;a.y=0;Ag=a.z;a.z=0;df=p.buffer;p.buffer=r;$e=p.divisor;p.divisor=0;Nf=p.normalized;p.normalized=!1;Of=p.offset;p.offset=0;jg=
p.size;p.size=0;kg=p.state;p.state=1;lg=p.stride;p.stride=0;mg=p.type;p.type=r.dtype;ng=p.w;p.w=0;Yf=p.x;p.x=0;Tf=p.y;p.y=0;Zf=p.z;p.z=0;$f=aa.buffer;aa.buffer=E;ag=aa.divisor;aa.divisor=0;og=aa.normalized;aa.normalized=!1;Bg=aa.offset;aa.offset=0;Cg=aa.size;aa.size=0;Dg=aa.state;aa.state=1;Eg=aa.stride;aa.stride=0;Fg=aa.type;aa.type=E.dtype;Gg=aa.w;aa.w=0;Hg=aa.x;aa.x=0;Ig=aa.y;aa.y=0;Jg=aa.z;aa.z=0;Kg=la.buffer;la.buffer=B;Lg=la.divisor;la.divisor=0;Mg=la.normalized;la.normalized=!1;Ng=la.offset;
la.offset=0;Pg=la.size;la.size=0;Qg=la.state;la.state=1;Rg=la.stride;la.stride=0;Sg=la.type;la.type=B.dtype;Tg=la.w;la.w=0;Ug=la.x;la.x=0;Vg=la.y;la.y=0;Wg=la.z;la.z=0;Xg=La.buffer;La.buffer=D;Yg=La.divisor;La.divisor=0;Zg=La.normalized;La.normalized=!1;$g=La.offset;La.offset=0;ah=La.size;La.size=0;bh=La.state;La.state=1;ch=La.stride;La.stride=0;dh=La.type;La.type=D.dtype;eh=La.w;La.w=0;fh=La.x;La.x=0;gh=La.y;La.y=0;hh=La.z;La.z=0;ih=Eb.buffer;Eb.buffer=Q;jh=Eb.divisor;Eb.divisor=0;kh=Eb.normalized;
Eb.normalized=!1;lh=Eb.offset;Eb.offset=0;mh=Eb.size;Eb.size=0;nh=Eb.state;Eb.state=1;oh=Eb.stride;Eb.stride=0;ph=Eb.type;Eb.type=Q.dtype;qh=Eb.w;Eb.w=0;rh=Eb.x;Eb.x=0;sh=Eb.y;Eb.y=0;th=Eb.z;Eb.z=0;uh=V.vert;V.vert=2;vh=V.frag;V.frag=1;da.dirty=!0;k(t,d,n);t.viewportWidth=H;t.viewportHeight=F;Xd[0]=Y;Xd[1]=O;Xd[2]=M;Xd[3]=I;zb[0]=P;zb[1]=U;zb[2]=S;zb[3]=W;mc.blend_enable=X;te[0]=ha;te[1]=ja;le[0]=ma;le[1]=ba;le[2]=ia;le[3]=wa;mc.cull_enable=ea;mc.cull_face=ga;mc.depth_enable=ka;mc.depth_func=va;mc.depth_mask=
sa;ie[0]=pc;ie[1]=bb;mc.dither=ra;mc.lineWidth=Ua;Ye[0]=Fb;Ye[1]=Jb;Ye[2]=Xa;Ye[3]=za;mc.scissor_enable=Ud;da.profile=Da;z.offset=Dc;z.count=ed;z.primitive=Xb;q[24]=ta;q[3]=qc;q[5]=Fa;q[7]=Ra;q[9]=rd;q[4]=pa;q[6]=db;q[8]=nc;q[10]=Bd;q[23]=Yc;q[12]=Gc;q[14]=Ib;q[16]=ub;q[18]=yb;q[11]=qd;q[13]=Jc;q[15]=sd;q[17]=td;q[22]=Ea;q[25]=Ue;q[26]=Lb;q[19]=ce;q[20]=yd;q[21]=De;h.buffer=Gd;h.divisor=ac;h.normalized=af;h.offset=ab;h.size=Oa;h.state=ic;h.stride=Zd;h.type=se;h.w=Pa;h.x=nb;h.y=Fd;h.z=Vb;e.buffer=
Cc;e.divisor=ve;e.normalized=Ha;e.offset=Uc;e.size=tb;e.state=zd;e.stride=Ad;e.type=Ld;e.w=Ja;e.x=we;e.y=he;e.z=fe;g.buffer=de;g.divisor=pe;g.normalized=ae;g.offset=je;g.size=xc;g.state=Tc;g.stride=qe;g.type=me;g.w=Id;g.x=Nd;g.y=Od;g.z=Pd;l.buffer=ke;l.divisor=Ee;l.normalized=ye;l.offset=oe;l.size=jf;l.state=Oe;l.stride=Le;l.type=re;l.w=Be;l.x=Fe;l.y=Ge;l.z=He;R.buffer=Ce;R.divisor=Kd;R.normalized=Sd;R.offset=Yd;R.size=be;R.state=Ie;R.stride=Dd;R.type=Qd;R.w=ze;R.x=Je;R.y=pf;R.z=Xe;Z.buffer=Pe;Z.divisor=
Me;Z.normalized=We;Z.offset=Te;Z.size=Qe;Z.state=Re;Z.stride=Rd;Z.type=Vd;Z.w=Se;Z.x=qf;Z.y=hf;Z.z=bf;m.buffer=ef;m.divisor=ff;m.normalized=gf;m.offset=nf;m.size=kf;m.state=of;m.stride=Af;m.type=Bf;m.w=Ne;m.x=Ae;m.y=lf;m.z=mf;qa.buffer=Cf;qa.divisor=Ff;qa.normalized=zf;qa.offset=Df;qa.size=Ef;qa.state=uf;qa.stride=vf;qa.type=tf;qa.w=wf;qa.x=xf;qa.y=Hf;qa.z=If;L.buffer=Jf;L.divisor=Kf;L.normalized=rf;L.offset=Pf;L.size=Gf;L.state=sf;L.stride=bg;L.type=Qf;L.w=Rf;L.x=pg;L.y=cf;L.z=Ze;fa.buffer=Lf;fa.divisor=
Mf;fa.normalized=dg;fa.offset=eg;fa.size=fg;fa.state=gg;fa.stride=hg;fa.type=Uf;fa.w=Sf;fa.x=Vf;fa.y=Wf;fa.z=Xf;a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;p.buffer=df;p.divisor=$e;p.normalized=Nf;p.offset=Of;p.size=jg;p.state=kg;p.stride=lg;p.type=mg;p.w=ng;p.x=Yf;p.y=Tf;p.z=Zf;aa.buffer=$f;aa.divisor=ag;aa.normalized=og;aa.offset=Bg;aa.size=Cg;aa.state=Dg;aa.stride=Eg;aa.type=Fg;aa.w=Gg;aa.x=Hg;aa.y=Ig;aa.z=Jg;la.buffer=
Kg;la.divisor=Lg;la.normalized=Mg;la.offset=Ng;la.size=Pg;la.state=Qg;la.stride=Rg;la.type=Sg;la.w=Tg;la.x=Ug;la.y=Vg;la.z=Wg;La.buffer=Xg;La.divisor=Yg;La.normalized=Zg;La.offset=$g;La.size=ah;La.state=bh;La.stride=ch;La.type=dh;La.w=eh;La.x=fh;La.y=gh;La.z=hh;Eb.buffer=ih;Eb.divisor=jh;Eb.normalized=kh;Eb.offset=lh;Eb.size=mh;Eb.state=nh;Eb.stride=oh;Eb.type=ph;Eb.w=qh;Eb.x=rh;Eb.y=sh;Eb.z=th;V.vert=uh;V.frag=vh;da.dirty=!0}}},$1:function(d,y){var n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,
R,Z,m,qa,L,fa,a;n=d.attributes;N=d.current;f=d.framebuffer;c=d.gl;x=d.next;b=d.vao;v=x.blend_color;C=N.blend_color;T=x.blend_equation;K=N.blend_equation;G=x.blend_func;r=N.blend_func;E=x.colorMask;B=N.colorMask;D=x.depth_range;Q=N.depth_range;A=x.polygonOffset_offset;P=N.polygonOffset_offset;ca=x.sample_coverage;h=N.sample_coverage;e=x.scissor_box;g=N.scissor_box;l=x.stencil_func;R=N.stencil_func;Z=x.stencil_opBack;m=N.stencil_opBack;qa=x.stencil_opFront;L=N.stencil_opFront;fa=x.viewport;a=N.viewport;
return{poll:function(){var b,d,n,y,Eb,Ld,oa,Oa,ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa;N.dirty=!1;d=x.blend_enable;n=x.cull_enable;y=x.depth_enable;Eb=x.dither;Ld=x.polygonOffset_enable;oa=x.sample_alpha;Oa=x.sample_enable;ba=x.scissor_enable;M=x.stencil_enable;O=x.cull_face;U=N.cull_face;ta=x.depth_func;I=N.depth_func;Vb=x.depth_mask;ab=N.depth_mask;S=x.frontFace;u=N.frontFace;ka=x.lineWidth;ea=N.lineWidth;Ea=x.stencil_mask;Pa=N.stencil_mask;b=f.next;b!==f.cur&&(b?c.bindFramebuffer(36160,b.framebuffer):
c.bindFramebuffer(36160,null),f.cur=b);d!==N.blend_enable&&(d?c.enable(3042):c.disable(3042),N.blend_enable=d);n!==N.cull_enable&&(n?c.enable(2884):c.disable(2884),N.cull_enable=n);y!==N.depth_enable&&(y?c.enable(2929):c.disable(2929),N.depth_enable=y);Eb!==N.dither&&(Eb?c.enable(3024):c.disable(3024),N.dither=Eb);Ld!==N.polygonOffset_enable&&(Ld?c.enable(32823):c.disable(32823),N.polygonOffset_enable=Ld);oa!==N.sample_alpha&&(oa?c.enable(32926):c.disable(32926),N.sample_alpha=oa);Oa!==N.sample_enable&&
(Oa?c.enable(32928):c.disable(32928),N.sample_enable=Oa);ba!==N.scissor_enable&&(ba?c.enable(3089):c.disable(3089),N.scissor_enable=ba);M!==N.stencil_enable&&(M?c.enable(2960):c.disable(2960),N.stencil_enable=M);if(v[0]!==C[0]||v[1]!==C[1]||v[2]!==C[2]||v[3]!==C[3])c.blendColor(v[0],v[1],v[2],v[3]),C[0]=v[0],C[1]=v[1],C[2]=v[2],C[3]=v[3];if(T[0]!==K[0]||T[1]!==K[1])c.blendEquationSeparate(T[0],T[1]),K[0]=T[0],K[1]=T[1];if(G[0]!==r[0]||G[1]!==r[1]||G[2]!==r[2]||G[3]!==r[3])c.blendFuncSeparate(G[0],
G[1],G[2],G[3]),r[0]=G[0],r[1]=G[1],r[2]=G[2],r[3]=G[3];if(E[0]!==B[0]||E[1]!==B[1]||E[2]!==B[2]||E[3]!==B[3])c.colorMask(E[0],E[1],E[2],E[3]),B[0]=E[0],B[1]=E[1],B[2]=E[2],B[3]=E[3];O!==U&&(c.cullFace(O),N.cull_face=O);ta!==I&&(c.depthFunc(ta),N.depth_func=ta);Vb!==ab&&(c.depthMask(Vb),N.depth_mask=Vb);if(D[0]!==Q[0]||D[1]!==Q[1])c.depthRange(D[0],D[1]),Q[0]=D[0],Q[1]=D[1];S!==u&&(c.frontFace(S),N.frontFace=S);ka!==ea&&(c.lineWidth(ka),N.lineWidth=ka);if(A[0]!==P[0]||A[1]!==P[1])c.polygonOffset(A[0],
A[1]),P[0]=A[0],P[1]=A[1];if(ca[0]!==h[0]||ca[1]!==h[1])c.sampleCoverage(ca[0],ca[1]),h[0]=ca[0],h[1]=ca[1];if(e[0]!==g[0]||e[1]!==g[1]||e[2]!==g[2]||e[3]!==g[3])c.scissor(e[0],e[1],e[2],e[3]),g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=e[3];if(l[0]!==R[0]||l[1]!==R[1]||l[2]!==R[2])c.stencilFunc(l[0],l[1],l[2]),R[0]=l[0],R[1]=l[1],R[2]=l[2];Ea!==Pa&&(c.stencilMask(Ea),N.stencil_mask=Ea);if(Z[0]!==m[0]||Z[1]!==m[1]||Z[2]!==m[2]||Z[3]!==m[3])c.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]),m[0]=Z[0],m[1]=Z[1],m[2]=
Z[2],m[3]=Z[3];if(qa[0]!==L[0]||qa[1]!==L[1]||qa[2]!==L[2]||qa[3]!==L[3])c.stencilOpSeparate(qa[0],qa[1],qa[2],qa[3]),L[0]=qa[0],L[1]=qa[1],L[2]=qa[2],L[3]=qa[3];if(fa[0]!==a[0]||fa[1]!==a[1]||fa[2]!==a[2]||fa[3]!==a[3])c.viewport(fa[0],fa[1],fa[2],fa[3]),a[0]=fa[0],a[1]=fa[1],a[2]=fa[2],a[3]=fa[3]},refresh:function(){var d,aa,la,La,Eb,Ld,oa,Oa,ba,M,O,U,ta,I,Vb,ab;N.dirty=!1;aa=x.blend_enable;la=x.cull_enable;La=x.depth_enable;Eb=x.dither;Ld=x.polygonOffset_enable;oa=x.sample_alpha;Oa=x.sample_enable;
ba=x.scissor_enable;M=x.stencil_enable;O=x.cull_face;U=x.depth_func;ta=x.depth_mask;I=x.frontFace;Vb=x.lineWidth;ab=x.stencil_mask;(d=f.next)?c.bindFramebuffer(36160,d.framebuffer):c.bindFramebuffer(36160,null);f.cur=d;d=n[0];d.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(0,d.divisor);d=n[1];
d.buffer?(c.enableVertexAttribArray(1),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(1,d.divisor);d=n[2];d.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(2),c.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);
y.vertexAttribDivisorANGLE(2,d.divisor);d=n[3];d.buffer?(c.enableVertexAttribArray(3),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(3,d.divisor);d=n[4];d.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,
d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(4,d.divisor);d=n[5];d.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(5,d.divisor);d=n[6];d.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(6),
c.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(6,d.divisor);d=n[7];d.buffer?(c.enableVertexAttribArray(7),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(7,d.divisor);d=n[8];d.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,
d.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(8,d.divisor);d=n[9];d.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(9,d.divisor);d=n[10];d.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(10,
d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(10,d.divisor);d=n[11];d.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(11),c.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(11,d.divisor);d=n[12];d.buffer?(c.enableVertexAttribArray(12),
c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(12,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(12,d.divisor);d=n[13];d.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(13,
d.divisor);d=n[14];d.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(14,d.divisor);d=n[15];d.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,d.buffer.buffer),c.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(c.disableVertexAttribArray(15),c.vertexAttrib4f(15,d.x,
d.y,d.z,d.w),d.buffer=null);y.vertexAttribDivisorANGLE(15,d.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);aa?c.enable(3042):c.disable(3042);N.blend_enable=aa;la?c.enable(2884):c.disable(2884);N.cull_enable=la;La?c.enable(2929):c.disable(2929);N.depth_enable=La;Eb?c.enable(3024):c.disable(3024);N.dither=Eb;Ld?c.enable(32823):c.disable(32823);N.polygonOffset_enable=Ld;oa?c.enable(32926):c.disable(32926);N.sample_alpha=oa;Oa?c.enable(32928):c.disable(32928);N.sample_enable=Oa;ba?c.enable(3089):c.disable(3089);
N.scissor_enable=ba;M?c.enable(2960):c.disable(2960);N.stencil_enable=M;c.blendColor(v[0],v[1],v[2],v[3]);C[0]=v[0];C[1]=v[1];C[2]=v[2];C[3]=v[3];c.blendEquationSeparate(T[0],T[1]);K[0]=T[0];K[1]=T[1];c.blendFuncSeparate(G[0],G[1],G[2],G[3]);r[0]=G[0];r[1]=G[1];r[2]=G[2];r[3]=G[3];c.colorMask(E[0],E[1],E[2],E[3]);B[0]=E[0];B[1]=E[1];B[2]=E[2];B[3]=E[3];c.cullFace(O);N.cull_face=O;c.depthFunc(U);N.depth_func=U;c.depthMask(ta);N.depth_mask=ta;c.depthRange(D[0],D[1]);Q[0]=D[0];Q[1]=D[1];c.frontFace(I);
N.frontFace=I;c.lineWidth(Vb);N.lineWidth=Vb;c.polygonOffset(A[0],A[1]);P[0]=A[0];P[1]=A[1];c.sampleCoverage(ca[0],ca[1]);h[0]=ca[0];h[1]=ca[1];c.scissor(e[0],e[1],e[2],e[3]);g[0]=e[0];g[1]=e[1];g[2]=e[2];g[3]=e[3];c.stencilFunc(l[0],l[1],l[2]);R[0]=l[0];R[1]=l[1];R[2]=l[2];c.stencilMask(ab);N.stencil_mask=ab;c.stencilOpSeparate(Z[0],Z[1],Z[2],Z[3]);m[0]=Z[0];m[1]=Z[1];m[2]=Z[2];m[3]=Z[3];c.stencilOpSeparate(qa[0],qa[1],qa[2],qa[3]);L[0]=qa[0];L[1]=qa[1];L[2]=qa[2];L[3]=qa[3];c.viewport(fa[0],fa[1],
fa[2],fa[3]);a[0]=fa[0];a[1]=fa[1];a[2]=fa[2];a[3]=fa[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(d,y,n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Eb,Ld,oa,Oa,ba,M,O,U,ta,I,Vb,ab){var S,u,ka,ea,Ea,Pa,tb,Ha,W,nb,ga,pa,ac,pc,ic,rd,tc,Y,J,ja,Ca,ub,Jc,Uc,F,w,ia,va,X,ha,ra,H,t,da,z,wa,ma,k,mc,V,q,Jb,zb;S=d.attributes;u=d.buffer;ka=d.context;ea=d.current;Ea=
d.draw;Pa=d.elements;tb=d.extensions;Ha=d.framebuffer;W=d.gl;nb=d.isBufferArgs;ga=d.next;pa=d.shader;ac=d.uniforms;pc=d.vao;ic=ga.blend_color;rd=ea.blend_color;tc=ga.blend_equation;Y=ea.blend_equation;J=ga.blend_func;ja=ea.blend_func;Ca=ga.colorMask;ub=ea.colorMask;Jc=ga.depth_range;Uc=ea.depth_range;F=ga.polygonOffset_offset;w=ea.polygonOffset_offset;ia=ga.sample_coverage;va=ea.sample_coverage;X=ga.scissor_box;ha=ea.scissor_box;ra=ga.stencil_func;H=ea.stencil_func;t=ga.stencil_opBack;da=ea.stencil_opBack;
z=ga.stencil_opFront;wa=ea.stencil_opFront;ma=ga.viewport;k=ea.viewport;mc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V={};V.buffer=n;V.divisor=1;q={};q.buffer=N;q.divisor=1;Jb={};Jb.buffer=f;Jb.divisor=1;zb={};zb.buffer=c;zb.divisor=1;return{batch:function(b,c){var d,e,g,f,h,l;d=Ha.next;d!==Ha.cur&&(d?W.bindFramebuffer(36160,d.framebuffer):W.bindFramebuffer(36160,null),Ha.cur=d);if(ea.dirty){var n,v,J,x,A,B,D,N,E,P,C,X,ma,R,T,Q,Z,na,pa,nc,sd,ed,
Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,ca;n=ga.dither;n!==ea.dither&&(n?W.enable(3024):W.disable(3024),ea.dither=n);v=ga.depth_func;v!==ea.depth_func&&(W.depthFunc(v),ea.depth_func=v);J=Jc[0];x=Jc[1];if(J!==Uc[0]||x!==Uc[1])W.depthRange(J,x),Uc[0]=J,Uc[1]=x;A=ga.depth_mask;A!==ea.depth_mask&&(W.depthMask(A),ea.depth_mask=A);B=Ca[0];D=Ca[1];N=Ca[2];E=Ca[3];if(B!==ub[0]||D!==ub[1]||N!==ub[2]||E!==ub[3])W.colorMask(B,D,N,E),ub[0]=B,ub[1]=D,ub[2]=N,ub[3]=E;P=ga.cull_enable;P!==ea.cull_enable&&(P?W.enable(2884):
W.disable(2884),ea.cull_enable=P);C=ga.cull_face;C!==ea.cull_face&&(W.cullFace(C),ea.cull_face=C);X=ga.frontFace;X!==ea.frontFace&&(W.frontFace(X),ea.frontFace=X);ma=ga.lineWidth;ma!==ea.lineWidth&&(W.lineWidth(ma),ea.lineWidth=ma);R=ga.polygonOffset_enable;R!==ea.polygonOffset_enable&&(R?W.enable(32823):W.disable(32823),ea.polygonOffset_enable=R);T=F[0];Q=F[1];if(T!==w[0]||Q!==w[1])W.polygonOffset(T,Q),w[0]=T,w[1]=Q;Z=ga.sample_alpha;Z!==ea.sample_alpha&&(Z?W.enable(32926):W.disable(32926),ea.sample_alpha=
Z);na=ga.sample_enable;na!==ea.sample_enable&&(na?W.enable(32928):W.disable(32928),ea.sample_enable=na);pa=ia[0];nc=ia[1];if(pa!==va[0]||nc!==va[1])W.sampleCoverage(pa,nc),va[0]=pa,va[1]=nc;sd=ga.stencil_enable;sd!==ea.stencil_enable&&(sd?W.enable(2960):W.disable(2960),ea.stencil_enable=sd);ed=ga.stencil_mask;ed!==ea.stencil_mask&&(W.stencilMask(ed),ea.stencil_mask=ed);Kc=ra[0];qc=ra[1];bb=ra[2];if(Kc!==H[0]||qc!==H[1]||bb!==H[2])W.stencilFunc(Kc,qc,bb),H[0]=Kc,H[1]=qc,H[2]=bb;Gc=z[0];Fb=z[1];oc=
z[2];Ua=z[3];if(Gc!==wa[0]||Fb!==wa[1]||oc!==wa[2]||Ua!==wa[3])W.stencilOpSeparate(Gc,Fb,oc,Ua),wa[0]=Gc,wa[1]=Fb,wa[2]=oc,wa[3]=Ua;Hc=t[0];bc=t[1];rc=t[2];ca=t[3];if(Hc!==da[0]||bc!==da[1]||rc!==da[2]||ca!==da[3])W.stencilOpSeparate(Hc,bc,rc,ca),da[0]=Hc,da[1]=bc,da[2]=rc,da[3]=ca}W.blendColor(0,0,0,0);rd[0]=0;rd[1]=0;rd[2]=0;rd[3]=0;W.enable(3042);ea.blend_enable=!0;W.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;W.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=
1;W.disable(2929);ea.depth_enable=!1;W.enable(3089);ea.scissor_enable=!0;if(e=ea.profile)g=performance.now(),y.count+=c;W.useProgram(m.program);f=tb.angle_instanced_arrays;var tc,yc,Xb,Dc,Qc,Ma,Gb,Xa;pc.setVAO(null);tc=Eb.location;yc=S[tc];yc.buffer||W.enableVertexAttribArray(tc);if(5126!==yc.type||2!==yc.size||yc.buffer!==K||!1!==yc.normalized||0!==yc.offset||24!==yc.stride)W.bindBuffer(34962,K.buffer),W.vertexAttribPointer(tc,2,5126,!1,24,0),yc.type=5126,yc.size=2,yc.buffer=K,yc.normalized=!1,yc.offset=
0,yc.stride=24;0!==yc.divisor&&(f.vertexAttribDivisorANGLE(tc,0),yc.divisor=0);Xb=oa.location;Dc=S[Xb];Dc.buffer||W.enableVertexAttribArray(Xb);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==G||!1!==Dc.normalized||8!==Dc.offset||24!==Dc.stride)W.bindBuffer(34962,G.buffer),W.vertexAttribPointer(Xb,2,5126,!1,24,8),Dc.type=5126,Dc.size=2,Dc.buffer=G,Dc.normalized=!1,Dc.offset=8,Dc.stride=24;0!==Dc.divisor&&(f.vertexAttribDivisorANGLE(Xb,0),Dc.divisor=0);Qc=aa.location;Ma=S[Qc];Ma.buffer||W.enableVertexAttribArray(Qc);
if(5126!==Ma.type||2!==Ma.size||Ma.buffer!==r||!1!==Ma.normalized||16!==Ma.offset||24!==Ma.stride)W.bindBuffer(34962,r.buffer),W.vertexAttribPointer(Qc,2,5126,!1,24,16),Ma.type=5126,Ma.size=2,Ma.buffer=r,Ma.normalized=!1,Ma.offset=16,Ma.stride=24;0!==Ma.divisor&&(f.vertexAttribDivisorANGLE(Qc,0),Ma.divisor=0);(Gb=Ea.elements)?W.bindBuffer(34963,Gb.buffer.buffer):pc.currentVAO&&(Gb=Pa.getElements(pc.currentVAO.elements))&&W.bindBuffer(34963,Gb.buffer.buffer);Xa=Ea.offset;for(h=0;h<c;++h){l=b[h];var sa,
td,Bb,Ta,Ib,db,Ec,Rb,ac,$b,Sb,ic,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,ge,vd,Ja,ue,ee,Jd,Hd,cd,Cc;sa=l.viewport;td=sa.x|0;Bb=sa.y|0;Ta="width"in sa?sa.width|0:ka.framebufferWidth-td;Ib="height"in sa?sa.height|0:ka.framebufferHeight-Bb;db=ka.viewportWidth;
ka.viewportWidth=Ta;Ec=ka.viewportHeight;ka.viewportHeight=Ib;W.viewport(td,Bb,Ta,Ib);k[0]=td;k[1]=Bb;k[2]=Ta;k[3]=Ib;Rb=l.viewport;ac=Rb.x|0;$b=Rb.y|0;Sb="width"in Rb?Rb.width|0:ka.framebufferWidth-ac;ic="height"in Rb?Rb.height|0:ka.framebufferHeight-$b;W.scissor(ac,$b,Sb,ic);ha[0]=ac;ha[1]=$b;ha[2]=Sb;ha[3]=ic;Tb=qa.call(this,ka,l,h);Jb.offset=Tb;Na=!1;ob=null;vb=0;hb=!1;lc=Qa=0;Yb=1;Zc=0;eb=5126;jb=hc=dd=jc=0;nb(Jb)?(Na=!0,ob=u.createStream(34962,Jb),eb=ob.dtype):(ob=u.getBuffer(Jb))?eb=ob.dtype:
"constant"in Jb?(Yb=2,"number"===typeof Jb.constant?(dd=Jb.constant,hc=jb=jc=0):(dd=0<Jb.constant.length?Jb.constant[0]:0,hc=1<Jb.constant.length?Jb.constant[1]:0,jb=2<Jb.constant.length?Jb.constant[2]:0,jc=3<Jb.constant.length?Jb.constant[3]:0)):(ob=nb(Jb.buffer)?u.createStream(34962,Jb.buffer):u.getBuffer(Jb.buffer),eb="type"in Jb?mc[Jb.type]:ob.dtype,hb=!!Jb.normalized,lc=Jb.size|0,Qa=Jb.offset|0,Zc=Jb.stride|0,vb=Jb.divisor|0);kb=M.location;ua=S[kb];if(1===Yb){ua.buffer||W.enableVertexAttribArray(kb);
pb=lc||2;if(ua.type!==eb||ua.size!==pb||ua.buffer!==ob||ua.normalized!==hb||ua.offset!==Qa||ua.stride!==Zc)W.bindBuffer(34962,ob.buffer),W.vertexAttribPointer(kb,pb,eb,hb,Zc,Qa),ua.type=eb,ua.size=pb,ua.buffer=ob,ua.normalized=hb,ua.offset=Qa,ua.stride=Zc;ua.divisor!==vb&&(f.vertexAttribDivisorANGLE(kb,vb),ua.divisor=vb)}else if(ua.buffer&&(W.disableVertexAttribArray(kb),ua.buffer=null),ua.x!==dd||ua.y!==hc||ua.z!==jb||ua.w!==jc)W.vertexAttrib4f(kb,dd,hc,jb,jc),ua.x=dd,ua.y=hc,ua.z=jb,ua.w=jc;xa=
L.call(this,ka,l,h);zb.offset=xa;Va=!1;cb=null;Aa=0;fb=!1;Cb=Ia=0;Ab=1;Sa=0;Ic=5126;ya=Ub=$a=Kb=0;nb(zb)?(Va=!0,cb=u.createStream(34962,zb),Ic=cb.dtype):(cb=u.getBuffer(zb))?Ic=cb.dtype:"constant"in zb?(Ab=2,"number"===typeof zb.constant?($a=zb.constant,Ub=ya=Kb=0):($a=0<zb.constant.length?zb.constant[0]:0,Ub=1<zb.constant.length?zb.constant[1]:0,ya=2<zb.constant.length?zb.constant[2]:0,Kb=3<zb.constant.length?zb.constant[3]:0)):(cb=nb(zb.buffer)?u.createStream(34962,zb.buffer):u.getBuffer(zb.buffer),
Ic="type"in zb?mc[zb.type]:cb.dtype,fb=!!zb.normalized,Cb=zb.size|0,Ia=zb.offset|0,Sa=zb.stride|0,Aa=zb.divisor|0);ud=O.location;Ka=S[ud];if(1===Ab){Ka.buffer||W.enableVertexAttribArray(ud);Ob=Cb||2;if(Ka.type!==Ic||Ka.size!==Ob||Ka.buffer!==cb||Ka.normalized!==fb||Ka.offset!==Ia||Ka.stride!==Sa)W.bindBuffer(34962,cb.buffer),W.vertexAttribPointer(ud,Ob,Ic,fb,Sa,Ia),Ka.type=Ic,Ka.size=Ob,Ka.buffer=cb,Ka.normalized=fb,Ka.offset=Ia,Ka.stride=Sa;Ka.divisor!==Aa&&(f.vertexAttribDivisorANGLE(ud,Aa),Ka.divisor=
Aa)}else if(Ka.buffer&&(W.disableVertexAttribArray(ud),Ka.buffer=null),Ka.x!==$a||Ka.y!==Ub||Ka.z!==ya||Ka.w!==Kb)W.vertexAttrib4f(ud,$a,Ub,ya,Kb),Ka.x=$a,Ka.y=Ub,Ka.z=ya,Ka.w=Kb;gb=fa.call(this,ka,l,h);q.offset=gb;ib=!1;za=null;dc=0;Da=!1;rb=qb=0;Ya=1;Za=0;kc=5126;Mb=Wa=uc=ad=0;nb(q)?(ib=!0,za=u.createStream(34962,q),kc=za.dtype):(za=u.getBuffer(q))?kc=za.dtype:"constant"in q?(Ya=2,"number"===typeof q.constant?(uc=q.constant,Wa=Mb=ad=0):(uc=0<q.constant.length?q.constant[0]:0,Wa=1<q.constant.length?
q.constant[1]:0,Mb=2<q.constant.length?q.constant[2]:0,ad=3<q.constant.length?q.constant[3]:0)):(za=nb(q.buffer)?u.createStream(34962,q.buffer):u.getBuffer(q.buffer),kc="type"in q?mc[q.type]:za.dtype,Da=!!q.normalized,rb=q.size|0,qb=q.offset|0,Za=q.stride|0,dc=q.divisor|0);Pc=Ld.location;Fa=S[Pc];if(1===Ya){Fa.buffer||W.enableVertexAttribArray(Pc);wc=rb||4;if(Fa.type!==kc||Fa.size!==wc||Fa.buffer!==za||Fa.normalized!==Da||Fa.offset!==qb||Fa.stride!==Za)W.bindBuffer(34962,za.buffer),W.vertexAttribPointer(Pc,
wc,kc,Da,Za,qb),Fa.type=kc,Fa.size=wc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=qb,Fa.stride=Za;Fa.divisor!==dc&&(f.vertexAttribDivisorANGLE(Pc,dc),Fa.divisor=dc)}else if(Fa.buffer&&(W.disableVertexAttribArray(Pc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Wa||Fa.z!==Mb||Fa.w!==ad)W.vertexAttrib4f(Pc,uc,Wa,Mb,ad),Fa.x=uc,Fa.y=Wa,Fa.z=Mb,Fa.w=ad;Ra=a.call(this,ka,l,h);V.offset=Ra;Ba=!1;lb=null;wb=0;Db=!1;vc=sb=0;xb=1;xd=0;sc=5126;od=bd=Lc=Md=0;nb(V)?(Ba=!0,lb=u.createStream(34962,V),sc=lb.dtype):(lb=u.getBuffer(V))?
sc=lb.dtype:"constant"in V?(xb=2,"number"===typeof V.constant?(Lc=V.constant,bd=od=Md=0):(Lc=0<V.constant.length?V.constant[0]:0,bd=1<V.constant.length?V.constant[1]:0,od=2<V.constant.length?V.constant[2]:0,Md=3<V.constant.length?V.constant[3]:0)):(lb=nb(V.buffer)?u.createStream(34962,V.buffer):u.getBuffer(V.buffer),sc="type"in V?mc[V.type]:lb.dtype,Db=!!V.normalized,vc=V.size|0,sb=V.offset|0,xd=V.stride|0,wb=V.divisor|0);Wb=La.location;cc=S[Wb];if(1===xb){cc.buffer||W.enableVertexAttribArray(Wb);
Pb=vc||4;if(cc.type!==sc||cc.size!==Pb||cc.buffer!==lb||cc.normalized!==Db||cc.offset!==sb||cc.stride!==xd)W.bindBuffer(34962,lb.buffer),W.vertexAttribPointer(Wb,Pb,sc,Db,xd,sb),cc.type=sc,cc.size=Pb,cc.buffer=lb,cc.normalized=Db,cc.offset=sb,cc.stride=xd;cc.divisor!==wb&&(f.vertexAttribDivisorANGLE(Wb,wb),cc.divisor=wb)}else if(cc.buffer&&(W.disableVertexAttribArray(Wb),cc.buffer=null),cc.x!==Lc||cc.y!==bd||cc.z!==od||cc.w!==Md)W.vertexAttrib4f(Wb,Lc,bd,od,Md),cc.x=Lc,cc.y=bd,cc.z=od,cc.w=Md;Ga=
p.call(this,ka,l,h);Zb=Ga[0];yb=Ga[1];Qb=Ga[2];gc=Ga[3];h&&mb===Zb&&Nb===yb&&ec===Qb&&Ve===gc||(mb=Zb,Nb=yb,ec=Qb,Ve=gc,W.uniform4f(ab.location,Zb,yb,Qb,gc));zc=l.lineWidth;h&&Ac===zc||(Ac=zc,W.uniform1f(Oa.location,zc));Bc=l.capSize;h&&Mc===Bc||(Mc=Bc,W.uniform1f(la.location,Bc));Xc=l.scale;Rc=Xc[0];Lb=Xc[1];h&&Nc===Rc&&Hb===Lb||(Nc=Rc,Hb=Lb,W.uniform2f(U.location,Rc,Lb));Oc=l.scaleFract;Fc=Oc[0];fc=Oc[1];h&&Sc===Fc&&Vc===fc||(Sc=Fc,Vc=fc,W.uniform2f(ta.location,Fc,fc));id=l.translate;fd=id[0];Wc=
id[1];h&&kd===fd&&ge===Wc||(kd=fd,ge=Wc,W.uniform2f(I.location,fd,Wc));vd=l.translateFract;Ja=vd[0];ee=vd[1];h&&ue===Ja&&Jd===ee||(ue=Ja,Jd=ee,W.uniform2f(Vb.location,Ja,ee));Hd=l.opacity;h&&cd===Hd||(cd=Hd,W.uniform1f(ba.location,Hd));Cc=l.count;0<Cc?Gb?f.drawElementsInstancedANGLE(4,36,Gb.type,Xa<<(Gb.type-5121>>1),Cc):f.drawArraysInstancedANGLE(4,Xa,36,Cc):0>Cc&&(Gb?W.drawElements(4,36,Gb.type,Xa<<(Gb.type-5121>>1)):W.drawArrays(4,Xa,36));ka.viewportWidth=db;ka.viewportHeight=Ec;Na&&u.destroyStream(ob);
Va&&u.destroyStream(cb);ib&&u.destroyStream(za);Ba&&u.destroyStream(lb)}ea.dirty=!0;pc.setVAO(null);e&&(y.cpuTime+=performance.now()-g)},draw:function(a){var c,d,e,g,f,h,l,m,p,n,J,A,B,D,N,L,P,X,ma,R,Q,Z,fa,qa,pa,tc,nc,ca,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,ac,ic,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc;c=Ha.next;c!==Ha.cur&&(c?W.bindFramebuffer(36160,c.framebuffer):W.bindFramebuffer(36160,
null),Ha.cur=c);if(ea.dirty){var Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb;Da=ga.dither;Da!==ea.dither&&(Da?W.enable(3024):W.disable(3024),ea.dither=Da);qb=ga.depth_func;qb!==ea.depth_func&&(W.depthFunc(qb),ea.depth_func=qb);rb=Jc[0];Ya=Jc[1];if(rb!==Uc[0]||Ya!==Uc[1])W.depthRange(rb,Ya),Uc[0]=rb,Uc[1]=Ya;Za=ga.depth_mask;Za!==ea.depth_mask&&(W.depthMask(Za),ea.depth_mask=Za);kc=Ca[0];ad=Ca[1];uc=Ca[2];Wa=Ca[3];if(kc!==ub[0]||ad!==ub[1]||uc!==
ub[2]||Wa!==ub[3])W.colorMask(kc,ad,uc,Wa),ub[0]=kc,ub[1]=ad,ub[2]=uc,ub[3]=Wa;Mb=ga.cull_enable;Mb!==ea.cull_enable&&(Mb?W.enable(2884):W.disable(2884),ea.cull_enable=Mb);Pc=ga.cull_face;Pc!==ea.cull_face&&(W.cullFace(Pc),ea.cull_face=Pc);Fa=ga.frontFace;Fa!==ea.frontFace&&(W.frontFace(Fa),ea.frontFace=Fa);wc=ga.lineWidth;wc!==ea.lineWidth&&(W.lineWidth(wc),ea.lineWidth=wc);Ra=ga.polygonOffset_enable;Ra!==ea.polygonOffset_enable&&(Ra?W.enable(32823):W.disable(32823),ea.polygonOffset_enable=Ra);Ba=
F[0];lb=F[1];if(Ba!==w[0]||lb!==w[1])W.polygonOffset(Ba,lb),w[0]=Ba,w[1]=lb;wb=ga.sample_alpha;wb!==ea.sample_alpha&&(wb?W.enable(32926):W.disable(32926),ea.sample_alpha=wb);Db=ga.sample_enable;Db!==ea.sample_enable&&(Db?W.enable(32928):W.disable(32928),ea.sample_enable=Db);sb=ia[0];vc=ia[1];if(sb!==va[0]||vc!==va[1])W.sampleCoverage(sb,vc),va[0]=sb,va[1]=vc;xb=ga.stencil_enable;xb!==ea.stencil_enable&&(xb?W.enable(2960):W.disable(2960),ea.stencil_enable=xb);xd=ga.stencil_mask;xd!==ea.stencil_mask&&
(W.stencilMask(xd),ea.stencil_mask=xd);sc=ra[0];Md=ra[1];Lc=ra[2];if(sc!==H[0]||Md!==H[1]||Lc!==H[2])W.stencilFunc(sc,Md,Lc),H[0]=sc,H[1]=Md,H[2]=Lc;bd=z[0];od=z[1];Wb=z[2];cc=z[3];if(bd!==wa[0]||od!==wa[1]||Wb!==wa[2]||cc!==wa[3])W.stencilOpSeparate(bd,od,Wb,cc),wa[0]=bd,wa[1]=od,wa[2]=Wb,wa[3]=cc;Pb=t[0];Ga=t[1];Zb=t[2];mb=t[3];if(Pb!==da[0]||Ga!==da[1]||Zb!==da[2]||mb!==da[3])W.stencilOpSeparate(Pb,Ga,Zb,mb),da[0]=Pb,da[1]=Ga,da[2]=Zb,da[3]=mb}d=a.viewport;e=d.x|0;g=d.y|0;f="width"in d?d.width|
0:ka.framebufferWidth-e;h="height"in d?d.height|0:ka.framebufferHeight-g;l=ka.viewportWidth;ka.viewportWidth=f;m=ka.viewportHeight;ka.viewportHeight=h;W.viewport(e,g,f,h);k[0]=e;k[1]=g;k[2]=f;k[3]=h;W.blendColor(0,0,0,0);rd[0]=0;rd[1]=0;rd[2]=0;rd[3]=0;W.enable(3042);ea.blend_enable=!0;W.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;W.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;W.disable(2929);ea.depth_enable=!1;p=a.viewport;n=p.x|0;J=p.y|0;A="width"in p?p.width|
0:ka.framebufferWidth-n;B="height"in p?p.height|0:ka.framebufferHeight-J;W.scissor(n,J,A,B);ha[0]=n;ha[1]=J;ha[2]=A;ha[3]=B;W.enable(3089);ea.scissor_enable=!0;if(D=ea.profile)N=performance.now(),y.count++;W.useProgram(x.program);L=tb.angle_instanced_arrays;pc.setVAO(null);P=b.call(this,ka,a,0);Jb.offset=P;X=!1;ma=null;R=0;Q=!1;fa=Z=0;qa=1;pa=0;tc=5126;Kc=ed=ca=nc=0;nb(Jb)?(X=!0,ma=u.createStream(34962,Jb),tc=ma.dtype):(ma=u.getBuffer(Jb))?tc=ma.dtype:"constant"in Jb?(qa=2,"number"===typeof Jb.constant?
(ca=Jb.constant,ed=Kc=nc=0):(ca=0<Jb.constant.length?Jb.constant[0]:0,ed=1<Jb.constant.length?Jb.constant[1]:0,Kc=2<Jb.constant.length?Jb.constant[2]:0,nc=3<Jb.constant.length?Jb.constant[3]:0)):(ma=nb(Jb.buffer)?u.createStream(34962,Jb.buffer):u.getBuffer(Jb.buffer),tc="type"in Jb?mc[Jb.type]:ma.dtype,Q=!!Jb.normalized,fa=Jb.size|0,Z=Jb.offset|0,pa=Jb.stride|0,R=Jb.divisor|0);qc=M.location;bb=S[qc];if(1===qa){bb.buffer||W.enableVertexAttribArray(qc);Gc=fa||2;if(bb.type!==tc||bb.size!==Gc||bb.buffer!==
ma||bb.normalized!==Q||bb.offset!==Z||bb.stride!==pa)W.bindBuffer(34962,ma.buffer),W.vertexAttribPointer(qc,Gc,tc,Q,pa,Z),bb.type=tc,bb.size=Gc,bb.buffer=ma,bb.normalized=Q,bb.offset=Z,bb.stride=pa;bb.divisor!==R&&(L.vertexAttribDivisorANGLE(qc,R),bb.divisor=R)}else if(bb.buffer&&(W.disableVertexAttribArray(qc),bb.buffer=null),bb.x!==ca||bb.y!==ed||bb.z!==Kc||bb.w!==nc)W.vertexAttrib4f(qc,ca,ed,Kc,nc),bb.x=ca,bb.y=ed,bb.z=Kc,bb.w=nc;Fb=v.call(this,ka,a,0);zb.offset=Fb;oc=!1;Ua=null;Hc=0;bc=!1;ac=
rc=0;ic=1;yc=0;Xb=5126;Gb=Ma=Qc=Dc=0;nb(zb)?(oc=!0,Ua=u.createStream(34962,zb),Xb=Ua.dtype):(Ua=u.getBuffer(zb))?Xb=Ua.dtype:"constant"in zb?(ic=2,"number"===typeof zb.constant?(Qc=zb.constant,Ma=Gb=Dc=0):(Qc=0<zb.constant.length?zb.constant[0]:0,Ma=1<zb.constant.length?zb.constant[1]:0,Gb=2<zb.constant.length?zb.constant[2]:0,Dc=3<zb.constant.length?zb.constant[3]:0)):(Ua=nb(zb.buffer)?u.createStream(34962,zb.buffer):u.getBuffer(zb.buffer),Xb="type"in zb?mc[zb.type]:Ua.dtype,bc=!!zb.normalized,ac=
zb.size|0,rc=zb.offset|0,yc=zb.stride|0,Hc=zb.divisor|0);Xa=O.location;sa=S[Xa];if(1===ic){sa.buffer||W.enableVertexAttribArray(Xa);td=ac||2;if(sa.type!==Xb||sa.size!==td||sa.buffer!==Ua||sa.normalized!==bc||sa.offset!==rc||sa.stride!==yc)W.bindBuffer(34962,Ua.buffer),W.vertexAttribPointer(Xa,td,Xb,bc,yc,rc),sa.type=Xb,sa.size=td,sa.buffer=Ua,sa.normalized=bc,sa.offset=rc,sa.stride=yc;sa.divisor!==Hc&&(L.vertexAttribDivisorANGLE(Xa,Hc),sa.divisor=Hc)}else if(sa.buffer&&(W.disableVertexAttribArray(Xa),
sa.buffer=null),sa.x!==Qc||sa.y!==Ma||sa.z!==Gb||sa.w!==Dc)W.vertexAttrib4f(Xa,Qc,Ma,Gb,Dc),sa.x=Qc,sa.y=Ma,sa.z=Gb,sa.w=Dc;Bb=C.call(this,ka,a,0);q.offset=Bb;Ta=!1;Ib=null;db=0;Ec=!1;$d=Rb=0;$b=1;Sb=0;pd=5126;vb=ob=Na=Tb=0;nb(q)?(Ta=!0,Ib=u.createStream(34962,q),pd=Ib.dtype):(Ib=u.getBuffer(q))?pd=Ib.dtype:"constant"in q?($b=2,"number"===typeof q.constant?(Na=q.constant,ob=vb=Tb=0):(Na=0<q.constant.length?q.constant[0]:0,ob=1<q.constant.length?q.constant[1]:0,vb=2<q.constant.length?q.constant[2]:
0,Tb=3<q.constant.length?q.constant[3]:0)):(Ib=nb(q.buffer)?u.createStream(34962,q.buffer):u.getBuffer(q.buffer),pd="type"in q?mc[q.type]:Ib.dtype,Ec=!!q.normalized,$d=q.size|0,Rb=q.offset|0,Sb=q.stride|0,db=q.divisor|0);hb=Ld.location;Qa=S[hb];if(1===$b){Qa.buffer||W.enableVertexAttribArray(hb);lc=$d||4;if(Qa.type!==pd||Qa.size!==lc||Qa.buffer!==Ib||Qa.normalized!==Ec||Qa.offset!==Rb||Qa.stride!==Sb)W.bindBuffer(34962,Ib.buffer),W.vertexAttribPointer(hb,lc,pd,Ec,Sb,Rb),Qa.type=pd,Qa.size=lc,Qa.buffer=
Ib,Qa.normalized=Ec,Qa.offset=Rb,Qa.stride=Sb;Qa.divisor!==db&&(L.vertexAttribDivisorANGLE(hb,db),Qa.divisor=db)}else if(Qa.buffer&&(W.disableVertexAttribArray(hb),Qa.buffer=null),Qa.x!==Na||Qa.y!==ob||Qa.z!==vb||Qa.w!==Tb)W.vertexAttrib4f(hb,Na,ob,vb,Tb),Qa.x=Na,Qa.y=ob,Qa.z=vb,Qa.w=Tb;Yb=T.call(this,ka,a,0);V.offset=Yb;Zc=!1;eb=null;jc=0;dd=!1;jb=hc=0;kb=1;ua=0;pb=5126;Aa=cb=Va=xa=0;nb(V)?(Zc=!0,eb=u.createStream(34962,V),pb=eb.dtype):(eb=u.getBuffer(V))?pb=eb.dtype:"constant"in V?(kb=2,"number"===
typeof V.constant?(Va=V.constant,cb=Aa=xa=0):(Va=0<V.constant.length?V.constant[0]:0,cb=1<V.constant.length?V.constant[1]:0,Aa=2<V.constant.length?V.constant[2]:0,xa=3<V.constant.length?V.constant[3]:0)):(eb=nb(V.buffer)?u.createStream(34962,V.buffer):u.getBuffer(V.buffer),pb="type"in V?mc[V.type]:eb.dtype,dd=!!V.normalized,jb=V.size|0,hc=V.offset|0,ua=V.stride|0,jc=V.divisor|0);fb=La.location;Ia=S[fb];if(1===kb){Ia.buffer||W.enableVertexAttribArray(fb);Cb=jb||4;if(Ia.type!==pb||Ia.size!==Cb||Ia.buffer!==
eb||Ia.normalized!==dd||Ia.offset!==hc||Ia.stride!==ua)W.bindBuffer(34962,eb.buffer),W.vertexAttribPointer(fb,Cb,pb,dd,ua,hc),Ia.type=pb,Ia.size=Cb,Ia.buffer=eb,Ia.normalized=dd,Ia.offset=hc,Ia.stride=ua;Ia.divisor!==jc&&(L.vertexAttribDivisorANGLE(fb,jc),Ia.divisor=jc)}else if(Ia.buffer&&(W.disableVertexAttribArray(fb),Ia.buffer=null),Ia.x!==Va||Ia.y!==cb||Ia.z!==Aa||Ia.w!==xa)W.vertexAttrib4f(fb,Va,cb,Aa,xa),Ia.x=Va,Ia.y=cb,Ia.z=Aa,Ia.w=xa;Ab=Eb.location;Sa=S[Ab];Sa.buffer||W.enableVertexAttribArray(Ab);
if(5126!==Sa.type||2!==Sa.size||Sa.buffer!==K||!1!==Sa.normalized||0!==Sa.offset||24!==Sa.stride)W.bindBuffer(34962,K.buffer),W.vertexAttribPointer(Ab,2,5126,!1,24,0),Sa.type=5126,Sa.size=2,Sa.buffer=K,Sa.normalized=!1,Sa.offset=0,Sa.stride=24;0!==Sa.divisor&&(L.vertexAttribDivisorANGLE(Ab,0),Sa.divisor=0);Ic=oa.location;Kb=S[Ic];Kb.buffer||W.enableVertexAttribArray(Ic);if(5126!==Kb.type||2!==Kb.size||Kb.buffer!==G||!1!==Kb.normalized||8!==Kb.offset||24!==Kb.stride)W.bindBuffer(34962,G.buffer),W.vertexAttribPointer(Ic,
2,5126,!1,24,8),Kb.type=5126,Kb.size=2,Kb.buffer=G,Kb.normalized=!1,Kb.offset=8,Kb.stride=24;0!==Kb.divisor&&(L.vertexAttribDivisorANGLE(Ic,0),Kb.divisor=0);$a=aa.location;Ub=S[$a];Ub.buffer||W.enableVertexAttribArray($a);if(5126!==Ub.type||2!==Ub.size||Ub.buffer!==r||!1!==Ub.normalized||16!==Ub.offset||24!==Ub.stride)W.bindBuffer(34962,r.buffer),W.vertexAttribPointer($a,2,5126,!1,24,16),Ub.type=5126,Ub.size=2,Ub.buffer=r,Ub.normalized=!1,Ub.offset=16,Ub.stride=24;0!==Ub.divisor&&(L.vertexAttribDivisorANGLE($a,
0),Ub.divisor=0);ya=E.call(this,ka,a,0);W.uniform4f(ab.location,ya[0],ya[1],ya[2],ya[3]);W.uniform1f(Oa.location,a.lineWidth);W.uniform1f(la.location,a.capSize);ud=a.scale;W.uniform2f(U.location,ud[0],ud[1]);Ka=a.scaleFract;W.uniform2f(ta.location,Ka[0],Ka[1]);Ob=a.translate;W.uniform2f(I.location,Ob[0],Ob[1]);gb=a.translateFract;W.uniform2f(Vb.location,gb[0],gb[1]);W.uniform1f(ba.location,a.opacity);(ib=Ea.elements)?W.bindBuffer(34963,ib.buffer.buffer):pc.currentVAO&&(ib=Pa.getElements(pc.currentVAO.elements))&&
W.bindBuffer(34963,ib.buffer.buffer);za=Ea.offset;dc=a.count;0<dc?ib?L.drawElementsInstancedANGLE(4,36,ib.type,za<<(ib.type-5121>>1),dc):L.drawArraysInstancedANGLE(4,za,36,dc):0>dc&&(ib?W.drawElements(4,36,ib.type,za<<(ib.type-5121>>1)):W.drawArrays(4,za,36));ea.dirty=!0;pc.setVAO(null);ka.viewportWidth=l;ka.viewportHeight=m;D&&(y.cpuTime+=performance.now()-N);X&&u.destroyStream(ma);oc&&u.destroyStream(Ua);Ta&&u.destroyStream(Ib);Zc&&u.destroyStream(eb)},scope:function(a,b,c){var d,f,k,m,p,n,t,w,
z,v,x,H,F,da,Y,N,E,L,O,M,I,C,U,S,W,ha,ja,T,ba,ia,wa,aa,va,pc,ra,Ca,fa,qa,na,ta,Xb,Dc,Qc,Ma,Gb,Xa,sa,rd,Bb,Ta,oa,db,la,ub,Jc,$b,Sb,ab,Tb,Na,ob,vb,hb,Qa,Oa,Yb,La,eb,jc,Pa,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,Vb,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,Eb,sc,Ha,Lc,Uc,tb,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,Ja,vd,Ld,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,
Id,Nd,Od,Pd,ke,Ee,ye,oe,jf,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd;d=a.viewport;f=d.x|0;k=d.y|0;m="width"in d?d.width|0:ka.framebufferWidth-f;p="height"in d?d.height|0:ka.framebufferHeight-k;n=ka.viewportWidth;ka.viewportWidth=m;t=ka.viewportHeight;ka.viewportHeight=p;w=ma[0];ma[0]=f;z=ma[1];ma[1]=k;v=ma[2];ma[2]=m;x=ma[3];ma[3]=p;H=ic[0];ic[0]=0;F=ic[1];ic[1]=0;da=ic[2];ic[2]=0;Y=ic[3];ic[3]=0;N=ga.blend_enable;ga.blend_enable=!0;E=tc[0];tc[0]=32774;L=tc[1];tc[1]=32774;O=J[0];J[0]=770;M=J[1];J[1]=771;I=J[2];
J[2]=773;C=J[3];J[3]=1;U=ga.depth_enable;ga.depth_enable=!1;S=a.viewport;W=S.x|0;ha=S.y|0;ja="width"in S?S.width|0:ka.framebufferWidth-W;T="height"in S?S.height|0:ka.framebufferHeight-ha;ba=X[0];X[0]=W;ia=X[1];X[1]=ha;wa=X[2];X[2]=ja;aa=X[3];X[3]=T;va=ga.scissor_enable;ga.scissor_enable=!0;if(pc=ea.profile)ra=performance.now(),y.count++;Ca=Ea.count;Ea.count=36;fa=a.count;qa=Ea.instances;Ea.instances=fa;na=Ea.primitive;Ea.primitive=4;ta=a.capSize;Xb=ac[5];ac[5]=ta;Dc=a.lineWidth;Qc=ac[4];ac[4]=Dc;
Ma=a.opacity;Gb=ac[10];ac[10]=Ma;Xa=a.range;sa=ac[18];ac[18]=Xa;rd=a.scale;Bb=ac[6];ac[6]=rd;Ta=a.scaleFract;oa=ac[7];ac[7]=Ta;db=a.translate;la=ac[8];ac[8]=db;ub=a.translateFract;Jc=ac[9];ac[9]=ub;$b=B.call(this,ka,a,c);Sb=ac[3];ac[3]=$b;ab=D.buffer;D.buffer=r;Tb=D.divisor;D.divisor=0;Na=D.normalized;D.normalized=!1;ob=D.offset;D.offset=16;vb=D.size;D.size=0;hb=D.state;D.state=1;Qa=D.stride;D.stride=24;Oa=D.type;D.type=5126;Yb=D.w;D.w=0;La=D.x;D.x=0;eb=D.y;D.y=0;jc=D.z;D.z=0;Pa=Q.call(this,ka,a,
c);V.offset=Pa;hc=!1;jb=null;kb=0;ua=!1;xa=pb=0;Va=1;cb=0;Aa=5126;Ab=Cb=Ia=fb=0;nb(V)?(hc=!0,jb=u.createStream(34962,V),Aa=jb.dtype):(jb=u.getBuffer(V))?Aa=jb.dtype:"constant"in V?(Va=2,"number"===typeof V.constant?(Ia=V.constant,Cb=Ab=fb=0):(Ia=0<V.constant.length?V.constant[0]:0,Cb=1<V.constant.length?V.constant[1]:0,Ab=2<V.constant.length?V.constant[2]:0,fb=3<V.constant.length?V.constant[3]:0)):(jb=nb(V.buffer)?u.createStream(34962,V.buffer):u.getBuffer(V.buffer),Aa="type"in V?mc[V.type]:jb.dtype,
ua=!!V.normalized,xa=V.size|0,pb=V.offset|0,cb=V.stride|0,kb=V.divisor|0);Sa=A.buffer;A.buffer=jb;Ic=A.divisor;A.divisor=kb;Kb=A.normalized;A.normalized=ua;$a=A.offset;A.offset=pb;Ub=A.size;A.size=xa;ya=A.state;A.state=Va;Vb=A.stride;A.stride=cb;Ka=A.type;A.type=Aa;Ob=A.w;A.w=fb;gb=A.x;A.x=Ia;ib=A.y;A.y=Cb;za=A.z;A.z=Ab;dc=P.buffer;P.buffer=K;Da=P.divisor;P.divisor=0;qb=P.normalized;P.normalized=!1;rb=P.offset;P.offset=0;Ya=P.size;P.size=0;Za=P.state;P.state=1;kc=P.stride;P.stride=24;ad=P.type;P.type=
5126;uc=P.w;P.w=0;Wa=P.x;P.x=0;Mb=P.y;P.y=0;Pc=P.z;P.z=0;Fa=ca.call(this,ka,a,c);q.offset=Fa;wc=!1;Ra=null;Ba=0;lb=!1;Db=wb=0;sb=1;vc=0;xb=5126;Lc=Ha=sc=Eb=0;nb(q)?(wc=!0,Ra=u.createStream(34962,q),xb=Ra.dtype):(Ra=u.getBuffer(q))?xb=Ra.dtype:"constant"in q?(sb=2,"number"===typeof q.constant?(sc=q.constant,Ha=Lc=Eb=0):(sc=0<q.constant.length?q.constant[0]:0,Ha=1<q.constant.length?q.constant[1]:0,Lc=2<q.constant.length?q.constant[2]:0,Eb=3<q.constant.length?q.constant[3]:0)):(Ra=nb(q.buffer)?u.createStream(34962,
q.buffer):u.getBuffer(q.buffer),xb="type"in q?mc[q.type]:Ra.dtype,lb=!!q.normalized,Db=q.size|0,wb=q.offset|0,vc=q.stride|0,Ba=q.divisor|0);Uc=h.buffer;h.buffer=Ra;tb=h.divisor;h.divisor=Ba;Wb=h.normalized;h.normalized=lb;cc=h.offset;h.offset=wb;Pb=h.size;h.size=Db;Ga=h.state;h.state=sb;Zb=h.stride;h.stride=vc;mb=h.type;h.type=xb;yb=h.w;h.w=Eb;Nb=h.x;h.x=sc;Qb=h.y;h.y=Ha;ec=h.z;h.z=Lc;gc=e.buffer;e.buffer=G;Ve=e.divisor;e.divisor=0;zc=e.normalized;e.normalized=!1;Ac=e.offset;e.offset=8;Bc=e.size;
e.size=0;Mc=e.state;e.state=1;Xc=e.stride;e.stride=24;Rc=e.type;e.type=5126;Nc=e.w;e.w=0;Lb=e.x;e.x=0;Hb=e.y;e.y=0;Oc=e.z;e.z=0;Fc=g.call(this,ka,a,c);Jb.offset=Fc;Sc=!1;fc=null;Vc=0;id=!1;kd=fd=0;Wc=1;Ja=0;vd=5126;Jd=ee=ue=Ld=0;nb(Jb)?(Sc=!0,fc=u.createStream(34962,Jb),vd=fc.dtype):(fc=u.getBuffer(Jb))?vd=fc.dtype:"constant"in Jb?(Wc=2,"number"===typeof Jb.constant?(ue=Jb.constant,ee=Jd=Ld=0):(ue=0<Jb.constant.length?Jb.constant[0]:0,ee=1<Jb.constant.length?Jb.constant[1]:0,Jd=2<Jb.constant.length?
Jb.constant[2]:0,Ld=3<Jb.constant.length?Jb.constant[3]:0)):(fc=nb(Jb.buffer)?u.createStream(34962,Jb.buffer):u.getBuffer(Jb.buffer),vd="type"in Jb?mc[Jb.type]:fc.dtype,id=!!Jb.normalized,kd=Jb.size|0,fd=Jb.offset|0,Ja=Jb.stride|0,Vc=Jb.divisor|0);Hd=l.buffer;l.buffer=fc;cd=l.divisor;l.divisor=Vc;Cc=l.normalized;l.normalized=id;jd=l.offset;l.offset=fd;gd=l.size;l.size=kd;$c=l.state;l.state=Wc;ld=l.stride;l.stride=Ja;zd=l.type;l.type=vd;Ad=l.w;l.w=Ld;xe=l.x;l.x=ue;Ke=l.y;l.y=ee;we=l.z;l.z=Jd;he=R.call(this,
ka,a,c);zb.offset=he;fe=!1;de=null;pe=0;ae=!1;xc=je=0;Tc=1;qe=0;me=5126;Pd=Od=Nd=Id=0;nb(zb)?(fe=!0,de=u.createStream(34962,zb),me=de.dtype):(de=u.getBuffer(zb))?me=de.dtype:"constant"in zb?(Tc=2,"number"===typeof zb.constant?(Nd=zb.constant,Od=Pd=Id=0):(Nd=0<zb.constant.length?zb.constant[0]:0,Od=1<zb.constant.length?zb.constant[1]:0,Pd=2<zb.constant.length?zb.constant[2]:0,Id=3<zb.constant.length?zb.constant[3]:0)):(de=nb(zb.buffer)?u.createStream(34962,zb.buffer):u.getBuffer(zb.buffer),me="type"in
zb?mc[zb.type]:de.dtype,ae=!!zb.normalized,xc=zb.size|0,je=zb.offset|0,qe=zb.stride|0,pe=zb.divisor|0);ke=Z.buffer;Z.buffer=de;Ee=Z.divisor;Z.divisor=pe;ye=Z.normalized;Z.normalized=ae;oe=Z.offset;Z.offset=je;jf=Z.size;Z.size=xc;Oe=Z.state;Z.state=Tc;Le=Z.stride;Z.stride=qe;re=Z.type;Z.type=me;Be=Z.w;Z.w=Id;Fe=Z.x;Z.x=Nd;Ge=Z.y;Z.y=Od;He=Z.z;Z.z=Pd;Ce=pa.vert;pa.vert=2;Kd=pa.frag;pa.frag=1;ea.dirty=!0;b(ka,a,c);ka.viewportWidth=n;ka.viewportHeight=t;ma[0]=w;ma[1]=z;ma[2]=v;ma[3]=x;ic[0]=H;ic[1]=F;
ic[2]=da;ic[3]=Y;ga.blend_enable=N;tc[0]=E;tc[1]=L;J[0]=O;J[1]=M;J[2]=I;J[3]=C;ga.depth_enable=U;X[0]=ba;X[1]=ia;X[2]=wa;X[3]=aa;ga.scissor_enable=va;pc&&(y.cpuTime+=performance.now()-ra);Ea.count=Ca;Ea.instances=qa;Ea.primitive=na;ac[5]=Xb;ac[4]=Qc;ac[10]=Gb;ac[18]=sa;ac[6]=Bb;ac[7]=oa;ac[8]=la;ac[9]=Jc;ac[3]=Sb;D.buffer=ab;D.divisor=Tb;D.normalized=Na;D.offset=ob;D.size=vb;D.state=hb;D.stride=Qa;D.type=Oa;D.w=Yb;D.x=La;D.y=eb;D.z=jc;hc&&u.destroyStream(jb);A.buffer=Sa;A.divisor=Ic;A.normalized=
Kb;A.offset=$a;A.size=Ub;A.state=ya;A.stride=Vb;A.type=Ka;A.w=Ob;A.x=gb;A.y=ib;A.z=za;P.buffer=dc;P.divisor=Da;P.normalized=qb;P.offset=rb;P.size=Ya;P.state=Za;P.stride=kc;P.type=ad;P.w=uc;P.x=Wa;P.y=Mb;P.z=Pc;wc&&u.destroyStream(Ra);h.buffer=Uc;h.divisor=tb;h.normalized=Wb;h.offset=cc;h.size=Pb;h.state=Ga;h.stride=Zb;h.type=mb;h.w=yb;h.x=Nb;h.y=Qb;h.z=ec;e.buffer=gc;e.divisor=Ve;e.normalized=zc;e.offset=Ac;e.size=Bc;e.state=Mc;e.stride=Xc;e.type=Rc;e.w=Nc;e.x=Lb;e.y=Hb;e.z=Oc;Sc&&u.destroyStream(fc);
l.buffer=Hd;l.divisor=cd;l.normalized=Cc;l.offset=jd;l.size=gd;l.state=$c;l.stride=ld;l.type=zd;l.w=Ad;l.x=xe;l.y=Ke;l.z=we;fe&&u.destroyStream(de);Z.buffer=ke;Z.divisor=Ee;Z.normalized=ye;Z.offset=oe;Z.size=jf;Z.state=Oe;Z.stride=Le;Z.type=re;Z.w=Be;Z.x=Fe;Z.y=Ge;Z.z=He;pa.vert=Ce;pa.frag=Kd;ea.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(d,y,n,N,f,c,x,b,v,C,
T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Eb){var Ja,oa,Oa,ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa,tb,Ha,W,nb,ga,pa,ac,pc,ic,rd,tc,Y,J,ja,Ca,ub,Jc,Uc,F,w,ia,va,X,ha,ra,H,t;Ja=d.attributes;oa=d.buffer;Oa=d.context;ba=d.current;M=d.draw;O=d.elements;U=d.extensions;ta=d.framebuffer;I=d.gl;Vb=d.isBufferArgs;ab=d.next;S=d.shader;u=d.uniforms;ka=d.vao;ea=ab.blend_color;Ea=ba.blend_color;Pa=ab.blend_equation;tb=ba.blend_equation;Ha=ab.blend_func;W=ba.blend_func;nb=ab.colorMask;ga=ba.colorMask;
pa=ab.depth_range;ac=ba.depth_range;pc=ab.polygonOffset_offset;ic=ba.polygonOffset_offset;rd=ab.sample_coverage;tc=ba.sample_coverage;Y=ab.scissor_box;J=ba.scissor_box;ja=ab.stencil_func;Ca=ba.stencil_func;ub=ab.stencil_opBack;Jc=ba.stencil_opBack;Uc=ab.stencil_opFront;F=ba.stencil_opFront;w=ab.viewport;ia=ba.viewport;va={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={divisor:1,offset:8,stride:8};ha={divisor:1,offset:8,stride:8};ra={divisor:1,offset:16,
stride:8};H={divisor:1,offset:16,stride:8};t={divisor:1,offset:0,stride:4};return{batch:function(b,d){var n,w,k,u,r,q;n=ta.next;n!==ta.cur&&(n?I.bindFramebuffer(36160,n.framebuffer):I.bindFramebuffer(36160,null),ta.cur=n);if(ba.dirty){var v,x,Y,B,D,N,E,G,K,C,S,T,ea,na,Wd,Ye,Pa,af,Bd,De,Td,Ud,ne,Xd,nd,hd,wd,Yc,qd,nc,sd,ed;v=ab.dither;v!==ba.dither&&(v?I.enable(3024):I.disable(3024),ba.dither=v);x=ab.depth_func;x!==ba.depth_func&&(I.depthFunc(x),ba.depth_func=x);Y=pa[0];B=pa[1];if(Y!==ac[0]||B!==ac[1])I.depthRange(Y,
B),ac[0]=Y,ac[1]=B;D=ab.depth_mask;D!==ba.depth_mask&&(I.depthMask(D),ba.depth_mask=D);N=nb[0];E=nb[1];G=nb[2];K=nb[3];if(N!==ga[0]||E!==ga[1]||G!==ga[2]||K!==ga[3])I.colorMask(N,E,G,K),ga[0]=N,ga[1]=E,ga[2]=G,ga[3]=K;C=ab.cull_enable;C!==ba.cull_enable&&(C?I.enable(2884):I.disable(2884),ba.cull_enable=C);S=ab.cull_face;S!==ba.cull_face&&(I.cullFace(S),ba.cull_face=S);T=ab.frontFace;T!==ba.frontFace&&(I.frontFace(T),ba.frontFace=T);ea=ab.lineWidth;ea!==ba.lineWidth&&(I.lineWidth(ea),ba.lineWidth=
ea);na=ab.polygonOffset_enable;na!==ba.polygonOffset_enable&&(na?I.enable(32823):I.disable(32823),ba.polygonOffset_enable=na);Wd=pc[0];Ye=pc[1];if(Wd!==ic[0]||Ye!==ic[1])I.polygonOffset(Wd,Ye),ic[0]=Wd,ic[1]=Ye;Pa=ab.sample_alpha;Pa!==ba.sample_alpha&&(Pa?I.enable(32926):I.disable(32926),ba.sample_alpha=Pa);af=ab.sample_enable;af!==ba.sample_enable&&(af?I.enable(32928):I.disable(32928),ba.sample_enable=af);Bd=rd[0];De=rd[1];if(Bd!==tc[0]||De!==tc[1])I.sampleCoverage(Bd,De),tc[0]=Bd,tc[1]=De;Td=ab.stencil_mask;
Td!==ba.stencil_mask&&(I.stencilMask(Td),ba.stencil_mask=Td);Ud=ja[0];ne=ja[1];Xd=ja[2];if(Ud!==Ca[0]||ne!==Ca[1]||Xd!==Ca[2])I.stencilFunc(Ud,ne,Xd),Ca[0]=Ud,Ca[1]=ne,Ca[2]=Xd;nd=Uc[0];hd=Uc[1];wd=Uc[2];Yc=Uc[3];if(nd!==F[0]||hd!==F[1]||wd!==F[2]||Yc!==F[3])I.stencilOpSeparate(nd,hd,wd,Yc),F[0]=nd,F[1]=hd,F[2]=wd,F[3]=Yc;qd=ub[0];nc=ub[1];sd=ub[2];ed=ub[3];if(qd!==Jc[0]||nc!==Jc[1]||sd!==Jc[2]||ed!==Jc[3])I.stencilOpSeparate(qd,nc,sd,ed),Jc[0]=qd,Jc[1]=nc,Jc[2]=sd,Jc[3]=ed}I.blendColor(0,0,0,0);
Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;I.enable(3042);ba.blend_enable=!0;I.blendEquationSeparate(32774,32774);tb[0]=32774;tb[1]=32774;I.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;I.enable(3089);ba.scissor_enable=!0;I.disable(2960);ba.stencil_enable=!1;if(w=ba.profile)k=performance.now(),y.count+=d;I.useProgram(Q.program);u=U.angle_instanced_arrays;var Kc,qc,bb,Gc,Fb;ka.setVAO(null);Kc=qa.location;qc=Ja[Kc];qc.buffer||I.enableVertexAttribArray(Kc);if(5126!==qc.type||1!==qc.size||qc.buffer!==
f||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(Kc,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=f,qc.normalized=!1,qc.offset=0,qc.stride=8;0!==qc.divisor&&(u.vertexAttribDivisorANGLE(Kc,0),qc.divisor=0);bb=L.location;Gc=Ja[bb];Gc.buffer||I.enableVertexAttribArray(bb);if(5126!==Gc.type||1!==Gc.size||Gc.buffer!==c||!1!==Gc.normalized||4!==Gc.offset||8!==Gc.stride)I.bindBuffer(34962,c.buffer),I.vertexAttribPointer(bb,1,5126,!1,8,4),Gc.type=5126,
Gc.size=1,Gc.buffer=c,Gc.normalized=!1,Gc.offset=4,Gc.stride=8;0!==Gc.divisor&&(u.vertexAttribDivisorANGLE(bb,0),Gc.divisor=0);(Fb=M.elements)?I.bindBuffer(34963,Fb.buffer.buffer):ka.currentVAO&&(Fb=O.getElements(ka.currentVAO.elements))&&I.bindBuffer(34963,Fb.buffer.buffer);for(r=0;r<d;++r){q=b[r];var oc,Ua,Hc,bc,rc,Gd,Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,Ha,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,
rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,Og,vd,cg,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c;oc=q.viewport;Ua=oc.x|0;Hc=oc.y|0;bc="width"in oc?oc.width|0:Oa.framebufferWidth-Ua;rc="height"in oc?oc.height|0:Oa.framebufferHeight-Hc;Gd=Oa.viewportWidth;Oa.viewportWidth=bc;Cd=Oa.viewportHeight;Oa.viewportHeight=rc;I.viewport(Ua,Hc,bc,rc);ia[0]=Ua;ia[1]=Hc;ia[2]=bc;ia[3]=rc;(yc=A.call(this,Oa,q,
r))?I.enable(2929):I.disable(2929);ba.depth_enable=yc;Xb=q.viewport;Dc=Xb.x|0;Qc=Xb.y|0;Ma="width"in Xb?Xb.width|0:Oa.framebufferWidth-Dc;Gb="height"in Xb?Xb.height|0:Oa.framebufferHeight-Qc;I.scissor(Dc,Qc,Ma,Gb);J[0]=Dc;J[1]=Qc;J[2]=Ma;J[3]=Gb;X.buffer=q.positionBuffer;Xa=!1;sa=null;td=0;Bb=!1;Ib=Ta=0;db=1;Ec=0;Rb=5126;pd=Sb=$b=Ha=0;Vb(X)?(Xa=!0,sa=oa.createStream(34962,X),Rb=sa.dtype):(sa=oa.getBuffer(X))?Rb=sa.dtype:"constant"in X?(db=2,"number"===typeof X.constant?($b=X.constant,Sb=pd=Ha=0):
($b=0<X.constant.length?X.constant[0]:0,Sb=1<X.constant.length?X.constant[1]:0,pd=2<X.constant.length?X.constant[2]:0,Ha=3<X.constant.length?X.constant[3]:0)):(sa=Vb(X.buffer)?oa.createStream(34962,X.buffer):oa.getBuffer(X.buffer),Rb="type"in X?va[X.type]:sa.dtype,Bb=!!X.normalized,Ib=X.size|0,Ta=X.offset|0,Ec=X.stride|0,td=X.divisor|0);Tb=ca.location;Na=Ja[Tb];if(1===db){Na.buffer||I.enableVertexAttribArray(Tb);ob=Ib||2;if(Na.type!==Rb||Na.size!==ob||Na.buffer!==sa||Na.normalized!==Bb||Na.offset!==
Ta||Na.stride!==Ec)I.bindBuffer(34962,sa.buffer),I.vertexAttribPointer(Tb,ob,Rb,Bb,Ec,Ta),Na.type=Rb,Na.size=ob,Na.buffer=sa,Na.normalized=Bb,Na.offset=Ta,Na.stride=Ec;Na.divisor!==td&&(u.vertexAttribDivisorANGLE(Tb,td),Na.divisor=td)}else if(Na.buffer&&(I.disableVertexAttribArray(Tb),Na.buffer=null),Na.x!==$b||Na.y!==Sb||Na.z!==pd||Na.w!==Ha)I.vertexAttrib4f(Tb,$b,Sb,pd,Ha),Na.x=$b,Na.y=Sb,Na.z=pd,Na.w=Ha;ra.buffer=q.positionBuffer;vb=!1;hb=null;Qa=0;lc=!1;Zc=Yb=0;eb=1;jc=0;dd=5126;ua=kb=jb=hc=0;
Vb(ra)?(vb=!0,hb=oa.createStream(34962,ra),dd=hb.dtype):(hb=oa.getBuffer(ra))?dd=hb.dtype:"constant"in ra?(eb=2,"number"===typeof ra.constant?(jb=ra.constant,kb=ua=hc=0):(jb=0<ra.constant.length?ra.constant[0]:0,kb=1<ra.constant.length?ra.constant[1]:0,ua=2<ra.constant.length?ra.constant[2]:0,hc=3<ra.constant.length?ra.constant[3]:0)):(hb=Vb(ra.buffer)?oa.createStream(34962,ra.buffer):oa.getBuffer(ra.buffer),dd="type"in ra?va[ra.type]:hb.dtype,lc=!!ra.normalized,Zc=ra.size|0,Yb=ra.offset|0,jc=ra.stride|
0,Qa=ra.divisor|0);pb=e.location;xa=Ja[pb];if(1===eb){xa.buffer||I.enableVertexAttribArray(pb);Va=Zc||2;if(xa.type!==dd||xa.size!==Va||xa.buffer!==hb||xa.normalized!==lc||xa.offset!==Yb||xa.stride!==jc)I.bindBuffer(34962,hb.buffer),I.vertexAttribPointer(pb,Va,dd,lc,jc,Yb),xa.type=dd,xa.size=Va,xa.buffer=hb,xa.normalized=lc,xa.offset=Yb,xa.stride=jc;xa.divisor!==Qa&&(u.vertexAttribDivisorANGLE(pb,Qa),xa.divisor=Qa)}else if(xa.buffer&&(I.disableVertexAttribArray(pb),xa.buffer=null),xa.x!==jb||xa.y!==
kb||xa.z!==ua||xa.w!==hc)I.vertexAttrib4f(pb,jb,kb,ua,hc),xa.x=jb,xa.y=kb,xa.z=ua,xa.w=hc;ha.buffer=q.positionFractBuffer;cb=!1;Aa=null;fb=0;Ia=!1;Ab=Cb=0;Sa=1;Ic=0;Kb=5126;ud=ya=Ub=$a=0;Vb(ha)?(cb=!0,Aa=oa.createStream(34962,ha),Kb=Aa.dtype):(Aa=oa.getBuffer(ha))?Kb=Aa.dtype:"constant"in ha?(Sa=2,"number"===typeof ha.constant?(Ub=ha.constant,ya=ud=$a=0):(Ub=0<ha.constant.length?ha.constant[0]:0,ya=1<ha.constant.length?ha.constant[1]:0,ud=2<ha.constant.length?ha.constant[2]:0,$a=3<ha.constant.length?
ha.constant[3]:0)):(Aa=Vb(ha.buffer)?oa.createStream(34962,ha.buffer):oa.getBuffer(ha.buffer),Kb="type"in ha?va[ha.type]:Aa.dtype,Ia=!!ha.normalized,Ab=ha.size|0,Cb=ha.offset|0,Ic=ha.stride|0,fb=ha.divisor|0);Ka=h.location;Ob=Ja[Ka];if(1===Sa){Ob.buffer||I.enableVertexAttribArray(Ka);gb=Ab||2;if(Ob.type!==Kb||Ob.size!==gb||Ob.buffer!==Aa||Ob.normalized!==Ia||Ob.offset!==Cb||Ob.stride!==Ic)I.bindBuffer(34962,Aa.buffer),I.vertexAttribPointer(Ka,gb,Kb,Ia,Ic,Cb),Ob.type=Kb,Ob.size=gb,Ob.buffer=Aa,Ob.normalized=
Ia,Ob.offset=Cb,Ob.stride=Ic;Ob.divisor!==fb&&(u.vertexAttribDivisorANGLE(Ka,fb),Ob.divisor=fb)}else if(Ob.buffer&&(I.disableVertexAttribArray(Ka),Ob.buffer=null),Ob.x!==Ub||Ob.y!==ya||Ob.z!==ud||Ob.w!==$a)I.vertexAttrib4f(Ka,Ub,ya,ud,$a),Ob.x=Ub,Ob.y=ya,Ob.z=ud,Ob.w=$a;H.buffer=q.positionFractBuffer;ib=!1;za=null;dc=0;Da=!1;rb=qb=0;Ya=1;Za=0;kc=5126;Mb=Wa=uc=ad=0;Vb(H)?(ib=!0,za=oa.createStream(34962,H),kc=za.dtype):(za=oa.getBuffer(H))?kc=za.dtype:"constant"in H?(Ya=2,"number"===typeof H.constant?
(uc=H.constant,Wa=Mb=ad=0):(uc=0<H.constant.length?H.constant[0]:0,Wa=1<H.constant.length?H.constant[1]:0,Mb=2<H.constant.length?H.constant[2]:0,ad=3<H.constant.length?H.constant[3]:0)):(za=Vb(H.buffer)?oa.createStream(34962,H.buffer):oa.getBuffer(H.buffer),kc="type"in H?va[H.type]:za.dtype,Da=!!H.normalized,rb=H.size|0,qb=H.offset|0,Za=H.stride|0,dc=H.divisor|0);Pc=g.location;Fa=Ja[Pc];if(1===Ya){Fa.buffer||I.enableVertexAttribArray(Pc);wc=rb||2;if(Fa.type!==kc||Fa.size!==wc||Fa.buffer!==za||Fa.normalized!==
Da||Fa.offset!==qb||Fa.stride!==Za)I.bindBuffer(34962,za.buffer),I.vertexAttribPointer(Pc,wc,kc,Da,Za,qb),Fa.type=kc,Fa.size=wc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=qb,Fa.stride=Za;Fa.divisor!==dc&&(u.vertexAttribDivisorANGLE(Pc,dc),Fa.divisor=dc)}else if(Fa.buffer&&(I.disableVertexAttribArray(Pc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Wa||Fa.z!==Mb||Fa.w!==ad)I.vertexAttrib4f(Pc,uc,Wa,Mb,ad),Fa.x=uc,Fa.y=Wa,Fa.z=Mb,Fa.w=ad;t.buffer=q.colorBuffer;Ra=!1;Ba=null;lb=0;wb=!1;sb=Db=0;vc=1;xb=0;xd=5126;bd=
Lc=Md=sc=0;Vb(t)?(Ra=!0,Ba=oa.createStream(34962,t),xd=Ba.dtype):(Ba=oa.getBuffer(t))?xd=Ba.dtype:"constant"in t?(vc=2,"number"===typeof t.constant?(Md=t.constant,Lc=bd=sc=0):(Md=0<t.constant.length?t.constant[0]:0,Lc=1<t.constant.length?t.constant[1]:0,bd=2<t.constant.length?t.constant[2]:0,sc=3<t.constant.length?t.constant[3]:0)):(Ba=Vb(t.buffer)?oa.createStream(34962,t.buffer):oa.getBuffer(t.buffer),xd="type"in t?va[t.type]:Ba.dtype,wb=!!t.normalized,sb=t.size|0,Db=t.offset|0,xb=t.stride|0,lb=
t.divisor|0);od=l.location;Wb=Ja[od];if(1===vc){Wb.buffer||I.enableVertexAttribArray(od);cc=sb||4;if(Wb.type!==xd||Wb.size!==cc||Wb.buffer!==Ba||Wb.normalized!==wb||Wb.offset!==Db||Wb.stride!==xb)I.bindBuffer(34962,Ba.buffer),I.vertexAttribPointer(od,cc,xd,wb,xb,Db),Wb.type=xd,Wb.size=cc,Wb.buffer=Ba,Wb.normalized=wb,Wb.offset=Db,Wb.stride=xb;Wb.divisor!==lb&&(u.vertexAttribDivisorANGLE(od,lb),Wb.divisor=lb)}else if(Wb.buffer&&(I.disableVertexAttribArray(od),Wb.buffer=null),Wb.x!==Md||Wb.y!==Lc||
Wb.z!==bd||Wb.w!==sc)I.vertexAttrib4f(od,Md,Lc,bd,sc),Wb.x=Md,Wb.y=Lc,Wb.z=bd,Wb.w=sc;Pb=q.scale;Ga=Pb[0];mb=Pb[1];r&&Zb===Ga&&yb===mb||(Zb=Ga,yb=mb,I.uniform2f(a.location,Ga,mb));Nb=q.scaleFract;Qb=Nb[0];gc=Nb[1];r&&ec===Qb&&Ve===gc||(ec=Qb,Ve=gc,I.uniform2f(p.location,Qb,gc));zc=q.translate;Ac=zc[0];Mc=zc[1];r&&Bc===Ac&&Xc===Mc||(Bc=Ac,Xc=Mc,I.uniform2f(la.location,Ac,Mc));Rc=q.translateFract;Nc=Rc[0];Hb=Rc[1];r&&Lb===Nc&&Oc===Hb||(Lb=Nc,Oc=Hb,I.uniform2f(La.location,Nc,Hb));Fc=q.thickness;r&&Sc===
Fc||(Sc=Fc,I.uniform1f(aa.location,Fc));fc=q.depth;r&&Vc===fc||(Vc=fc,I.uniform1f(m.location,fc));id=P.call(this,Oa,q,r);fd=id[0];Wc=id[1];vd=id[2];ue=id[3];r&&kd===fd&&Og===Wc&&cg===vd&&ee===ue||(kd=fd,Og=Wc,cg=vd,ee=ue,I.uniform4f(Eb.location,fd,Wc,vd,ue));Jd=q.dashLength;r&&Hd===Jd||(Hd=Jd,I.uniform1f(R.location,Jd));cd=q.opacity;r&&Cc===cd||(Cc=cd,I.uniform1f(fa.location,cd));(jd=q.dashTexture)&&"framebuffer"===jd._reglType&&(jd=jd.color[0]);gd=jd._texture;I.uniform1i(Z.location,gd.bind());$c=
q.count;0<$c?Fb?u.drawElementsInstancedANGLE(5,4,Fb.type,0<<(Fb.type-5121>>1),$c):u.drawArraysInstancedANGLE(5,0,4,$c):0>$c&&(Fb?I.drawElements(5,4,Fb.type,0<<(Fb.type-5121>>1)):I.drawArrays(5,0,4));Oa.viewportWidth=Gd;Oa.viewportHeight=Cd;Xa&&oa.destroyStream(sa);vb&&oa.destroyStream(hb);cb&&oa.destroyStream(Aa);ib&&oa.destroyStream(za);Ra&&oa.destroyStream(Ba);gd.unbind()}ba.dirty=!0;ka.setVAO(null);w&&(y.cpuTime+=performance.now()-k)},draw:function(b){var d,u,w,k,r,v,q,A,Y,B,D,E,G,K,P,C,S,T,Q,
ea,na,Wd,Ye,Pa,Ha,Bd,De,Td,Ud,ne,Xd,nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,Gd,Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb;d=ta.next;d!==ta.cur&&(d?I.bindFramebuffer(36160,d.framebuffer):I.bindFramebuffer(36160,null),ta.cur=d);if(ba.dirty){var rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb;rb=ab.dither;
rb!==ba.dither&&(rb?I.enable(3024):I.disable(3024),ba.dither=rb);Ya=ab.depth_func;Ya!==ba.depth_func&&(I.depthFunc(Ya),ba.depth_func=Ya);Za=pa[0];kc=pa[1];if(Za!==ac[0]||kc!==ac[1])I.depthRange(Za,kc),ac[0]=Za,ac[1]=kc;ad=ab.depth_mask;ad!==ba.depth_mask&&(I.depthMask(ad),ba.depth_mask=ad);uc=nb[0];Wa=nb[1];Mb=nb[2];Pc=nb[3];if(uc!==ga[0]||Wa!==ga[1]||Mb!==ga[2]||Pc!==ga[3])I.colorMask(uc,Wa,Mb,Pc),ga[0]=uc,ga[1]=Wa,ga[2]=Mb,ga[3]=Pc;Fa=ab.cull_enable;Fa!==ba.cull_enable&&(Fa?I.enable(2884):I.disable(2884),
ba.cull_enable=Fa);wc=ab.cull_face;wc!==ba.cull_face&&(I.cullFace(wc),ba.cull_face=wc);Ra=ab.frontFace;Ra!==ba.frontFace&&(I.frontFace(Ra),ba.frontFace=Ra);Ba=ab.lineWidth;Ba!==ba.lineWidth&&(I.lineWidth(Ba),ba.lineWidth=Ba);lb=ab.polygonOffset_enable;lb!==ba.polygonOffset_enable&&(lb?I.enable(32823):I.disable(32823),ba.polygonOffset_enable=lb);wb=pc[0];Db=pc[1];if(wb!==ic[0]||Db!==ic[1])I.polygonOffset(wb,Db),ic[0]=wb,ic[1]=Db;sb=ab.sample_alpha;sb!==ba.sample_alpha&&(sb?I.enable(32926):I.disable(32926),
ba.sample_alpha=sb);vc=ab.sample_enable;vc!==ba.sample_enable&&(vc?I.enable(32928):I.disable(32928),ba.sample_enable=vc);xb=rd[0];xd=rd[1];if(xb!==tc[0]||xd!==tc[1])I.sampleCoverage(xb,xd),tc[0]=xb,tc[1]=xd;sc=ab.stencil_mask;sc!==ba.stencil_mask&&(I.stencilMask(sc),ba.stencil_mask=sc);Md=ja[0];Lc=ja[1];bd=ja[2];if(Md!==Ca[0]||Lc!==Ca[1]||bd!==Ca[2])I.stencilFunc(Md,Lc,bd),Ca[0]=Md,Ca[1]=Lc,Ca[2]=bd;od=Uc[0];Wb=Uc[1];cc=Uc[2];Pb=Uc[3];if(od!==F[0]||Wb!==F[1]||cc!==F[2]||Pb!==F[3])I.stencilOpSeparate(od,
Wb,cc,Pb),F[0]=od,F[1]=Wb,F[2]=cc,F[3]=Pb;Ga=ub[0];Zb=ub[1];mb=ub[2];yb=ub[3];if(Ga!==Jc[0]||Zb!==Jc[1]||mb!==Jc[2]||yb!==Jc[3])I.stencilOpSeparate(Ga,Zb,mb,yb),Jc[0]=Ga,Jc[1]=Zb,Jc[2]=mb,Jc[3]=yb}u=b.viewport;w=u.x|0;k=u.y|0;r="width"in u?u.width|0:Oa.framebufferWidth-w;v="height"in u?u.height|0:Oa.framebufferHeight-k;q=Oa.viewportWidth;Oa.viewportWidth=r;A=Oa.viewportHeight;Oa.viewportHeight=v;I.viewport(w,k,r,v);ia[0]=w;ia[1]=k;ia[2]=r;ia[3]=v;I.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=
0;I.enable(3042);ba.blend_enable=!0;I.blendEquationSeparate(32774,32774);tb[0]=32774;tb[1]=32774;I.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;(Y=n.call(this,Oa,b,0))?I.enable(2929):I.disable(2929);ba.depth_enable=Y;B=b.viewport;D=B.x|0;E=B.y|0;G="width"in B?B.width|0:Oa.framebufferWidth-D;K="height"in B?B.height|0:Oa.framebufferHeight-E;I.scissor(D,E,G,K);J[0]=D;J[1]=E;J[2]=G;J[3]=K;I.enable(3089);ba.scissor_enable=!0;I.disable(2960);ba.stencil_enable=!1;if(P=ba.profile)C=
performance.now(),y.count++;I.useProgram(N.program);S=U.angle_instanced_arrays;ka.setVAO(null);X.buffer=b.positionBuffer;T=!1;Q=null;ea=0;na=!1;Ye=Wd=0;Pa=1;Ha=0;Bd=5126;ne=Ud=Td=De=0;Vb(X)?(T=!0,Q=oa.createStream(34962,X),Bd=Q.dtype):(Q=oa.getBuffer(X))?Bd=Q.dtype:"constant"in X?(Pa=2,"number"===typeof X.constant?(Td=X.constant,Ud=ne=De=0):(Td=0<X.constant.length?X.constant[0]:0,Ud=1<X.constant.length?X.constant[1]:0,ne=2<X.constant.length?X.constant[2]:0,De=3<X.constant.length?X.constant[3]:0)):
(Q=Vb(X.buffer)?oa.createStream(34962,X.buffer):oa.getBuffer(X.buffer),Bd="type"in X?va[X.type]:Q.dtype,na=!!X.normalized,Ye=X.size|0,Wd=X.offset|0,Ha=X.stride|0,ea=X.divisor|0);Xd=ca.location;nd=Ja[Xd];if(1===Pa){nd.buffer||I.enableVertexAttribArray(Xd);hd=Ye||2;if(nd.type!==Bd||nd.size!==hd||nd.buffer!==Q||nd.normalized!==na||nd.offset!==Wd||nd.stride!==Ha)I.bindBuffer(34962,Q.buffer),I.vertexAttribPointer(Xd,hd,Bd,na,Ha,Wd),nd.type=Bd,nd.size=hd,nd.buffer=Q,nd.normalized=na,nd.offset=Wd,nd.stride=
Ha;nd.divisor!==ea&&(S.vertexAttribDivisorANGLE(Xd,ea),nd.divisor=ea)}else if(nd.buffer&&(I.disableVertexAttribArray(Xd),nd.buffer=null),nd.x!==Td||nd.y!==Ud||nd.z!==ne||nd.w!==De)I.vertexAttrib4f(Xd,Td,Ud,ne,De),nd.x=Td,nd.y=Ud,nd.z=ne,nd.w=De;ra.buffer=b.positionBuffer;wd=!1;Yc=null;qd=0;nc=!1;ed=sd=0;Kc=1;qc=0;bb=5126;Ua=oc=Fb=Gc=0;Vb(ra)?(wd=!0,Yc=oa.createStream(34962,ra),bb=Yc.dtype):(Yc=oa.getBuffer(ra))?bb=Yc.dtype:"constant"in ra?(Kc=2,"number"===typeof ra.constant?(Fb=ra.constant,oc=Ua=
Gc=0):(Fb=0<ra.constant.length?ra.constant[0]:0,oc=1<ra.constant.length?ra.constant[1]:0,Ua=2<ra.constant.length?ra.constant[2]:0,Gc=3<ra.constant.length?ra.constant[3]:0)):(Yc=Vb(ra.buffer)?oa.createStream(34962,ra.buffer):oa.getBuffer(ra.buffer),bb="type"in ra?va[ra.type]:Yc.dtype,nc=!!ra.normalized,ed=ra.size|0,sd=ra.offset|0,qc=ra.stride|0,qd=ra.divisor|0);Hc=e.location;bc=Ja[Hc];if(1===Kc){bc.buffer||I.enableVertexAttribArray(Hc);rc=ed||2;if(bc.type!==bb||bc.size!==rc||bc.buffer!==Yc||bc.normalized!==
nc||bc.offset!==sd||bc.stride!==qc)I.bindBuffer(34962,Yc.buffer),I.vertexAttribPointer(Hc,rc,bb,nc,qc,sd),bc.type=bb,bc.size=rc,bc.buffer=Yc,bc.normalized=nc,bc.offset=sd,bc.stride=qc;bc.divisor!==qd&&(S.vertexAttribDivisorANGLE(Hc,qd),bc.divisor=qd)}else if(bc.buffer&&(I.disableVertexAttribArray(Hc),bc.buffer=null),bc.x!==Fb||bc.y!==oc||bc.z!==Ua||bc.w!==Gc)I.vertexAttrib4f(Hc,Fb,oc,Ua,Gc),bc.x=Fb,bc.y=oc,bc.z=Ua,bc.w=Gc;ha.buffer=b.positionFractBuffer;Gd=!1;Cd=null;yc=0;Xb=!1;Qc=Dc=0;Ma=1;Gb=0;
Xa=5126;Ta=Bb=td=sa=0;Vb(ha)?(Gd=!0,Cd=oa.createStream(34962,ha),Xa=Cd.dtype):(Cd=oa.getBuffer(ha))?Xa=Cd.dtype:"constant"in ha?(Ma=2,"number"===typeof ha.constant?(td=ha.constant,Bb=Ta=sa=0):(td=0<ha.constant.length?ha.constant[0]:0,Bb=1<ha.constant.length?ha.constant[1]:0,Ta=2<ha.constant.length?ha.constant[2]:0,sa=3<ha.constant.length?ha.constant[3]:0)):(Cd=Vb(ha.buffer)?oa.createStream(34962,ha.buffer):oa.getBuffer(ha.buffer),Xa="type"in ha?va[ha.type]:Cd.dtype,Xb=!!ha.normalized,Qc=ha.size|0,
Dc=ha.offset|0,Gb=ha.stride|0,yc=ha.divisor|0);Ib=h.location;db=Ja[Ib];if(1===Ma){db.buffer||I.enableVertexAttribArray(Ib);Ec=Qc||2;if(db.type!==Xa||db.size!==Ec||db.buffer!==Cd||db.normalized!==Xb||db.offset!==Dc||db.stride!==Gb)I.bindBuffer(34962,Cd.buffer),I.vertexAttribPointer(Ib,Ec,Xa,Xb,Gb,Dc),db.type=Xa,db.size=Ec,db.buffer=Cd,db.normalized=Xb,db.offset=Dc,db.stride=Gb;db.divisor!==yc&&(S.vertexAttribDivisorANGLE(Ib,yc),db.divisor=yc)}else if(db.buffer&&(I.disableVertexAttribArray(Ib),db.buffer=
null),db.x!==td||db.y!==Bb||db.z!==Ta||db.w!==sa)I.vertexAttrib4f(Ib,td,Bb,Ta,sa),db.x=td,db.y=Bb,db.z=Ta,db.w=sa;H.buffer=b.positionFractBuffer;Rb=!1;$d=null;$b=0;Sb=!1;Tb=pd=0;Na=1;ob=0;vb=5126;Yb=lc=Qa=hb=0;Vb(H)?(Rb=!0,$d=oa.createStream(34962,H),vb=$d.dtype):($d=oa.getBuffer(H))?vb=$d.dtype:"constant"in H?(Na=2,"number"===typeof H.constant?(Qa=H.constant,lc=Yb=hb=0):(Qa=0<H.constant.length?H.constant[0]:0,lc=1<H.constant.length?H.constant[1]:0,Yb=2<H.constant.length?H.constant[2]:0,hb=3<H.constant.length?
H.constant[3]:0)):($d=Vb(H.buffer)?oa.createStream(34962,H.buffer):oa.getBuffer(H.buffer),vb="type"in H?va[H.type]:$d.dtype,Sb=!!H.normalized,Tb=H.size|0,pd=H.offset|0,ob=H.stride|0,$b=H.divisor|0);Zc=g.location;eb=Ja[Zc];if(1===Na){eb.buffer||I.enableVertexAttribArray(Zc);jc=Tb||2;if(eb.type!==vb||eb.size!==jc||eb.buffer!==$d||eb.normalized!==Sb||eb.offset!==pd||eb.stride!==ob)I.bindBuffer(34962,$d.buffer),I.vertexAttribPointer(Zc,jc,vb,Sb,ob,pd),eb.type=vb,eb.size=jc,eb.buffer=$d,eb.normalized=
Sb,eb.offset=pd,eb.stride=ob;eb.divisor!==$b&&(S.vertexAttribDivisorANGLE(Zc,$b),eb.divisor=$b)}else if(eb.buffer&&(I.disableVertexAttribArray(Zc),eb.buffer=null),eb.x!==Qa||eb.y!==lc||eb.z!==Yb||eb.w!==hb)I.vertexAttrib4f(Zc,Qa,lc,Yb,hb),eb.x=Qa,eb.y=lc,eb.z=Yb,eb.w=hb;t.buffer=b.colorBuffer;dd=!1;hc=null;jb=0;kb=!1;pb=ua=0;xa=1;Va=0;cb=5126;Cb=Ia=fb=Aa=0;Vb(t)?(dd=!0,hc=oa.createStream(34962,t),cb=hc.dtype):(hc=oa.getBuffer(t))?cb=hc.dtype:"constant"in t?(xa=2,"number"===typeof t.constant?(fb=t.constant,
Ia=Cb=Aa=0):(fb=0<t.constant.length?t.constant[0]:0,Ia=1<t.constant.length?t.constant[1]:0,Cb=2<t.constant.length?t.constant[2]:0,Aa=3<t.constant.length?t.constant[3]:0)):(hc=Vb(t.buffer)?oa.createStream(34962,t.buffer):oa.getBuffer(t.buffer),cb="type"in t?va[t.type]:hc.dtype,kb=!!t.normalized,pb=t.size|0,ua=t.offset|0,Va=t.stride|0,jb=t.divisor|0);Ab=l.location;Sa=Ja[Ab];if(1===xa){Sa.buffer||I.enableVertexAttribArray(Ab);Ic=pb||4;if(Sa.type!==cb||Sa.size!==Ic||Sa.buffer!==hc||Sa.normalized!==kb||
Sa.offset!==ua||Sa.stride!==Va)I.bindBuffer(34962,hc.buffer),I.vertexAttribPointer(Ab,Ic,cb,kb,Va,ua),Sa.type=cb,Sa.size=Ic,Sa.buffer=hc,Sa.normalized=kb,Sa.offset=ua,Sa.stride=Va;Sa.divisor!==jb&&(S.vertexAttribDivisorANGLE(Ab,jb),Sa.divisor=jb)}else if(Sa.buffer&&(I.disableVertexAttribArray(Ab),Sa.buffer=null),Sa.x!==fb||Sa.y!==Ia||Sa.z!==Cb||Sa.w!==Aa)I.vertexAttrib4f(Ab,fb,Ia,Cb,Aa),Sa.x=fb,Sa.y=Ia,Sa.z=Cb,Sa.w=Aa;Kb=qa.location;$a=Ja[Kb];$a.buffer||I.enableVertexAttribArray(Kb);if(5126!==$a.type||
1!==$a.size||$a.buffer!==f||!1!==$a.normalized||0!==$a.offset||8!==$a.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(Kb,1,5126,!1,8,0),$a.type=5126,$a.size=1,$a.buffer=f,$a.normalized=!1,$a.offset=0,$a.stride=8;0!==$a.divisor&&(S.vertexAttribDivisorANGLE(Kb,0),$a.divisor=0);Ub=L.location;ya=Ja[Ub];ya.buffer||I.enableVertexAttribArray(Ub);if(5126!==ya.type||1!==ya.size||ya.buffer!==c||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)I.bindBuffer(34962,c.buffer),I.vertexAttribPointer(Ub,
1,5126,!1,8,4),ya.type=5126,ya.size=1,ya.buffer=c,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&(S.vertexAttribDivisorANGLE(Ub,0),ya.divisor=0);ud=b.scale;I.uniform2f(a.location,ud[0],ud[1]);Ka=b.scaleFract;I.uniform2f(p.location,Ka[0],Ka[1]);Ob=b.translate;I.uniform2f(la.location,Ob[0],Ob[1]);gb=b.translateFract;I.uniform2f(La.location,gb[0],gb[1]);I.uniform1f(aa.location,b.thickness);I.uniform1f(m.location,b.depth);ib=x.call(this,Oa,b,0);I.uniform4f(Eb.location,ib[0],ib[1],ib[2],ib[3]);
I.uniform1f(R.location,b.dashLength);I.uniform1f(fa.location,b.opacity);(za=b.dashTexture)&&"framebuffer"===za._reglType&&(za=za.color[0]);dc=za._texture;I.uniform1i(Z.location,dc.bind());(Da=M.elements)?I.bindBuffer(34963,Da.buffer.buffer):ka.currentVAO&&(Da=O.getElements(ka.currentVAO.elements))&&I.bindBuffer(34963,Da.buffer.buffer);qb=b.count;0<qb?Da?S.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),qb):S.drawArraysInstancedANGLE(5,0,4,qb):0>qb&&(Da?I.drawElements(5,4,Da.type,0<<(Da.type-
5121>>1)):I.drawArrays(5,0,4));ba.dirty=!0;ka.setVAO(null);Oa.viewportWidth=q;Oa.viewportHeight=A;P&&(y.cpuTime+=performance.now()-C);T&&oa.destroyStream(Q);wd&&oa.destroyStream(Yc);Gd&&oa.destroyStream(Cd);Rb&&oa.destroyStream($d);dd&&oa.destroyStream(hc);dc.unbind()},scope:function(a,d,e){var g,k,h,l,q,m,p,n,J,x,A,F,N,L,O,P,I,U,Q,W,R,ja,Z,ia,aa,ga,ka,pc,Ca,fa,qa,pa,ta,rd,ca,la,ed,Kc,qc,bb,tc,Fb,oc,Ua,Hc,bc,rc,ub,Jc,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,ac,Bb,Ta,Ib,db,Ea,Rb,ic,$b,Sb,La,Tb,Na,ob,vb,hb,Qa,lc,Yb,
nb,eb,jc,Eb,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,Uc,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,tb,sc,Ja,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,ge,vd,Ld,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,jf,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,pf,Xe,Pe,Me;g=a.viewport;k=g.x|0;h=g.y|0;l="width"in g?g.width|0:Oa.framebufferWidth-
k;q="height"in g?g.height|0:Oa.framebufferHeight-h;m=Oa.viewportWidth;Oa.viewportWidth=l;p=Oa.viewportHeight;Oa.viewportHeight=q;n=w[0];w[0]=k;J=w[1];w[1]=h;x=w[2];w[2]=l;A=w[3];w[3]=q;F=ea[0];ea[0]=0;N=ea[1];ea[1]=0;L=ea[2];ea[2]=0;O=ea[3];ea[3]=0;P=ab.blend_enable;ab.blend_enable=!0;I=Pa[0];Pa[0]=32774;U=Pa[1];Pa[1]=32774;Q=Ha[0];Ha[0]=770;W=Ha[1];Ha[1]=771;R=Ha[2];Ha[2]=773;ja=Ha[3];Ha[3]=1;Z=b.call(this,Oa,a,e);ia=ab.depth_enable;ab.depth_enable=Z;aa=a.viewport;ga=aa.x|0;ka=aa.y|0;pc="width"in
aa?aa.width|0:Oa.framebufferWidth-ga;Ca="height"in aa?aa.height|0:Oa.framebufferHeight-ka;fa=Y[0];Y[0]=ga;qa=Y[1];Y[1]=ka;pa=Y[2];Y[2]=pc;ta=Y[3];Y[3]=Ca;rd=ab.scissor_enable;ab.scissor_enable=!0;ca=ab.stencil_enable;ab.stencil_enable=!1;if(la=ba.profile)ed=performance.now(),y.count++;Kc=M.offset;M.offset=0;qc=M.count;M.count=4;bb=a.count;tc=M.instances;M.instances=bb;Fb=M.primitive;M.primitive=5;oc=a.dashLength;Ua=u[23];u[23]=oc;Hc=a.dashTexture;bc=u[24];u[24]=Hc;rc=a.depth;ub=u[22];u[22]=rc;Jc=
a.id;yc=u[31];u[31]=Jc;Xb=a.miterLimit;Dc=u[32];u[32]=Xb;Qc=v.call(this,Oa,a,e);Ma=u[33];u[33]=Qc;Gb=a.opacity;Xa=u[10];u[10]=Gb;sa=Oa.pixelRatio;ac=u[34];u[34]=sa;Bb=a.scale;Ta=u[6];u[6]=Bb;Ib=a.scaleFract;db=u[7];u[7]=Ib;Ea=a.thickness;Rb=u[21];u[21]=Ea;ic=a.translate;$b=u[8];u[8]=ic;Sb=a.translateFract;La=u[9];u[9]=Sb;Tb=C.call(this,Oa,a,e);Na=u[3];u[3]=Tb;X.buffer=a.positionBuffer;ob=!1;vb=null;hb=0;Qa=!1;Yb=lc=0;nb=1;eb=0;jc=5126;kb=jb=hc=Eb=0;Vb(X)?(ob=!0,vb=oa.createStream(34962,X),jc=vb.dtype):
(vb=oa.getBuffer(X))?jc=vb.dtype:"constant"in X?(nb=2,"number"===typeof X.constant?(hc=X.constant,jb=kb=Eb=0):(hc=0<X.constant.length?X.constant[0]:0,jb=1<X.constant.length?X.constant[1]:0,kb=2<X.constant.length?X.constant[2]:0,Eb=3<X.constant.length?X.constant[3]:0)):(vb=Vb(X.buffer)?oa.createStream(34962,X.buffer):oa.getBuffer(X.buffer),jc="type"in X?va[X.type]:vb.dtype,Qa=!!X.normalized,Yb=X.size|0,lc=X.offset|0,eb=X.stride|0,hb=X.divisor|0);ua=T.buffer;T.buffer=vb;pb=T.divisor;T.divisor=hb;xa=
T.normalized;T.normalized=Qa;Va=T.offset;T.offset=lc;cb=T.size;T.size=Yb;Aa=T.state;T.state=nb;fb=T.stride;T.stride=eb;Ia=T.type;T.type=jc;Cb=T.w;T.w=Eb;Ab=T.x;T.x=hc;Sa=T.y;T.y=jb;Ic=T.z;T.z=kb;ha.buffer=a.positionFractBuffer;Kb=!1;$a=null;Ub=0;ya=!1;Ka=Uc=0;Ob=1;gb=0;ib=5126;qb=Da=dc=za=0;Vb(ha)?(Kb=!0,$a=oa.createStream(34962,ha),ib=$a.dtype):($a=oa.getBuffer(ha))?ib=$a.dtype:"constant"in ha?(Ob=2,"number"===typeof ha.constant?(dc=ha.constant,Da=qb=za=0):(dc=0<ha.constant.length?ha.constant[0]:
0,Da=1<ha.constant.length?ha.constant[1]:0,qb=2<ha.constant.length?ha.constant[2]:0,za=3<ha.constant.length?ha.constant[3]:0)):($a=Vb(ha.buffer)?oa.createStream(34962,ha.buffer):oa.getBuffer(ha.buffer),ib="type"in ha?va[ha.type]:$a.dtype,ya=!!ha.normalized,Ka=ha.size|0,Uc=ha.offset|0,gb=ha.stride|0,Ub=ha.divisor|0);rb=K.buffer;K.buffer=$a;Ya=K.divisor;K.divisor=Ub;Za=K.normalized;K.normalized=ya;kc=K.offset;K.offset=Uc;ad=K.size;K.size=Ka;uc=K.state;K.state=Ob;Wa=K.stride;K.stride=gb;Mb=K.type;K.type=
ib;Pc=K.w;K.w=za;Fa=K.x;K.x=dc;wc=K.y;K.y=Da;Ra=K.z;K.z=qb;ra.buffer=a.positionBuffer;Ba=!1;lb=null;wb=0;Db=!1;vc=sb=0;xb=1;tb=0;sc=5126;od=bd=Lc=Ja=0;Vb(ra)?(Ba=!0,lb=oa.createStream(34962,ra),sc=lb.dtype):(lb=oa.getBuffer(ra))?sc=lb.dtype:"constant"in ra?(xb=2,"number"===typeof ra.constant?(Lc=ra.constant,bd=od=Ja=0):(Lc=0<ra.constant.length?ra.constant[0]:0,bd=1<ra.constant.length?ra.constant[1]:0,od=2<ra.constant.length?ra.constant[2]:0,Ja=3<ra.constant.length?ra.constant[3]:0)):(lb=Vb(ra.buffer)?
oa.createStream(34962,ra.buffer):oa.getBuffer(ra.buffer),sc="type"in ra?va[ra.type]:lb.dtype,Db=!!ra.normalized,vc=ra.size|0,sb=ra.offset|0,tb=ra.stride|0,wb=ra.divisor|0);Wb=G.buffer;G.buffer=lb;cc=G.divisor;G.divisor=wb;Pb=G.normalized;G.normalized=Db;Ga=G.offset;G.offset=sb;Zb=G.size;G.size=vc;mb=G.state;G.state=xb;yb=G.stride;G.stride=tb;Nb=G.type;G.type=sc;Qb=G.w;G.w=Ja;ec=G.x;G.x=Lc;gc=G.y;G.y=bd;Ve=G.z;G.z=od;H.buffer=a.positionFractBuffer;zc=!1;Ac=null;Bc=0;Mc=!1;Rc=Xc=0;Nc=1;Lb=0;Hb=5126;
fc=Sc=Fc=Oc=0;Vb(H)?(zc=!0,Ac=oa.createStream(34962,H),Hb=Ac.dtype):(Ac=oa.getBuffer(H))?Hb=Ac.dtype:"constant"in H?(Nc=2,"number"===typeof H.constant?(Fc=H.constant,Sc=fc=Oc=0):(Fc=0<H.constant.length?H.constant[0]:0,Sc=1<H.constant.length?H.constant[1]:0,fc=2<H.constant.length?H.constant[2]:0,Oc=3<H.constant.length?H.constant[3]:0)):(Ac=Vb(H.buffer)?oa.createStream(34962,H.buffer):oa.getBuffer(H.buffer),Hb="type"in H?va[H.type]:Ac.dtype,Mc=!!H.normalized,Rc=H.size|0,Xc=H.offset|0,Lb=H.stride|0,
Bc=H.divisor|0);Vc=r.buffer;r.buffer=Ac;id=r.divisor;r.divisor=Bc;fd=r.normalized;r.normalized=Mc;kd=r.offset;r.offset=Xc;Wc=r.size;r.size=Rc;ge=r.state;r.state=Nc;vd=r.stride;r.stride=Lb;Ld=r.type;r.type=Hb;ue=r.w;r.w=Oc;ee=r.x;r.x=Fc;Jd=r.y;r.y=Sc;Hd=r.z;r.z=fc;t.buffer=a.colorBuffer;cd=!1;Cc=null;jd=0;gd=!1;ld=$c=0;zd=1;Ad=0;xe=5126;fe=he=we=Ke=0;Vb(t)?(cd=!0,Cc=oa.createStream(34962,t),xe=Cc.dtype):(Cc=oa.getBuffer(t))?xe=Cc.dtype:"constant"in t?(zd=2,"number"===typeof t.constant?(we=t.constant,
he=fe=Ke=0):(we=0<t.constant.length?t.constant[0]:0,he=1<t.constant.length?t.constant[1]:0,fe=2<t.constant.length?t.constant[2]:0,Ke=3<t.constant.length?t.constant[3]:0)):(Cc=Vb(t.buffer)?oa.createStream(34962,t.buffer):oa.getBuffer(t.buffer),xe="type"in t?va[t.type]:Cc.dtype,gd=!!t.normalized,ld=t.size|0,$c=t.offset|0,Ad=t.stride|0,jd=t.divisor|0);de=E.buffer;E.buffer=Cc;pe=E.divisor;E.divisor=jd;ae=E.normalized;E.normalized=gd;je=E.offset;E.offset=$c;xc=E.size;E.size=ld;Tc=E.state;E.state=zd;qe=
E.stride;E.stride=Ad;me=E.type;E.type=xe;Id=E.w;E.w=Ke;Nd=E.x;E.x=we;Od=E.y;E.y=he;Pd=E.z;E.z=fe;ke=B.buffer;B.buffer=f;Ee=B.divisor;B.divisor=0;ye=B.normalized;B.normalized=!1;oe=B.offset;B.offset=0;jf=B.size;B.size=0;Oe=B.state;B.state=1;Le=B.stride;B.stride=8;re=B.type;B.type=5126;Be=B.w;B.w=0;Fe=B.x;B.x=0;Ge=B.y;B.y=0;He=B.z;B.z=0;Ce=D.buffer;D.buffer=c;Kd=D.divisor;D.divisor=0;Sd=D.normalized;D.normalized=!1;Yd=D.offset;D.offset=4;be=D.size;D.size=0;Ie=D.state;D.state=1;Dd=D.stride;D.stride=
8;Qd=D.type;D.type=5126;ze=D.w;D.w=0;Je=D.x;D.x=0;pf=D.y;D.y=0;Xe=D.z;D.z=0;Pe=S.vert;S.vert=20;Me=S.frag;S.frag=19;ba.dirty=!0;d(Oa,a,e);Oa.viewportWidth=m;Oa.viewportHeight=p;w[0]=n;w[1]=J;w[2]=x;w[3]=A;ea[0]=F;ea[1]=N;ea[2]=L;ea[3]=O;ab.blend_enable=P;Pa[0]=I;Pa[1]=U;Ha[0]=Q;Ha[1]=W;Ha[2]=R;Ha[3]=ja;ab.depth_enable=ia;Y[0]=fa;Y[1]=qa;Y[2]=pa;Y[3]=ta;ab.scissor_enable=rd;ab.stencil_enable=ca;la&&(y.cpuTime+=performance.now()-ed);M.offset=Kc;M.count=qc;M.instances=tc;M.primitive=Fb;u[23]=Ua;u[24]=
bc;u[22]=ub;u[31]=yc;u[32]=Dc;u[33]=Ma;u[10]=Xa;u[34]=ac;u[6]=Ta;u[7]=db;u[21]=Rb;u[8]=$b;u[9]=La;u[3]=Na;ob&&oa.destroyStream(vb);T.buffer=ua;T.divisor=pb;T.normalized=xa;T.offset=Va;T.size=cb;T.state=Aa;T.stride=fb;T.type=Ia;T.w=Cb;T.x=Ab;T.y=Sa;T.z=Ic;Kb&&oa.destroyStream($a);K.buffer=rb;K.divisor=Ya;K.normalized=Za;K.offset=kc;K.size=ad;K.state=uc;K.stride=Wa;K.type=Mb;K.w=Pc;K.x=Fa;K.y=wc;K.z=Ra;Ba&&oa.destroyStream(lb);G.buffer=Wb;G.divisor=cc;G.normalized=Pb;G.offset=Ga;G.size=Zb;G.state=mb;
G.stride=yb;G.type=Nb;G.w=Qb;G.x=ec;G.y=gc;G.z=Ve;zc&&oa.destroyStream(Ac);r.buffer=Vc;r.divisor=id;r.normalized=fd;r.offset=kd;r.size=Wc;r.state=ge;r.stride=vd;r.type=Ld;r.w=ue;r.x=ee;r.y=Jd;r.z=Hd;cd&&oa.destroyStream(Cc);E.buffer=de;E.divisor=pe;E.normalized=ae;E.offset=je;E.size=xc;E.state=Tc;E.stride=qe;E.type=me;E.w=Id;E.x=Nd;E.y=Od;E.z=Pd;B.buffer=ke;B.divisor=Ee;B.normalized=ye;B.offset=oe;B.size=jf;B.state=Oe;B.stride=Le;B.type=re;B.w=Be;B.x=Fe;B.y=Ge;B.z=He;D.buffer=Ce;D.divisor=Kd;D.normalized=
Sd;D.offset=Yd;D.size=be;D.state=Ie;D.stride=Dd;D.type=Qd;D.w=ze;D.x=Je;D.y=pf;D.z=Xe;S.vert=Pe;S.frag=Me;ba.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(d,y,n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Eb,Ja,oa,Oa,ba){var M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa,tb,Ha,W,nb,ga,pa,ac,pc,ic,rd,tc,Y,J,ja,Ca,ub,Jc,Uc,F,w,ia,va,X,ha,ra,H,t,da,z,
wa,ma,k;M=d.attributes;O=d.buffer;U=d.context;ta=d.current;I=d.draw;Vb=d.elements;ab=d.extensions;S=d.framebuffer;u=d.gl;ka=d.isBufferArgs;ea=d.next;Ea=d.shader;Pa=d.uniforms;tb=d.vao;Ha=ea.blend_color;W=ta.blend_color;nb=ea.blend_equation;ga=ta.blend_equation;pa=ea.blend_func;ac=ta.blend_func;pc=ea.colorMask;ic=ta.colorMask;rd=ea.depth_range;tc=ta.depth_range;Y=ea.polygonOffset_offset;J=ta.polygonOffset_offset;ja=ea.sample_coverage;Ca=ta.sample_coverage;ub=ea.scissor_box;Jc=ta.scissor_box;Uc=ea.stencil_func;
F=ta.stencil_func;w=ea.stencil_opBack;ia=ta.stencil_opBack;va=ea.stencil_opFront;X=ta.stencil_opFront;ha=ea.viewport;ra=ta.viewport;H={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};t={divisor:1,offset:0,stride:4};da={divisor:1,offset:8,stride:8};z={divisor:1,offset:4,stride:4};wa={divisor:1,offset:16,stride:8};ma={divisor:1,offset:24,stride:8};k={divisor:1,offset:0,stride:8};return{batch:function(b,d){var q,n,r,v,x,A;q=S.next;q!==S.cur&&(q?u.bindFramebuffer(36160,
q.framebuffer):u.bindFramebuffer(36160,null),S.cur=q);if(ta.dirty){var B,D,N,E,G,K,C,Q,T,ha,na,pa,ub,Ea,Pa,Td,Ud,Ha,nb,nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb;B=ea.dither;B!==ta.dither&&(B?u.enable(3024):u.disable(3024),ta.dither=B);D=ea.depth_func;D!==ta.depth_func&&(u.depthFunc(D),ta.depth_func=D);N=rd[0];E=rd[1];if(N!==tc[0]||E!==tc[1])u.depthRange(N,E),tc[0]=N,tc[1]=E;G=ea.depth_mask;G!==ta.depth_mask&&(u.depthMask(G),ta.depth_mask=G);K=pc[0];C=pc[1];Q=pc[2];T=pc[3];if(K!==ic[0]||C!==ic[1]||Q!==ic[2]||
T!==ic[3])u.colorMask(K,C,Q,T),ic[0]=K,ic[1]=C,ic[2]=Q,ic[3]=T;ha=ea.frontFace;ha!==ta.frontFace&&(u.frontFace(ha),ta.frontFace=ha);na=ea.lineWidth;na!==ta.lineWidth&&(u.lineWidth(na),ta.lineWidth=na);pa=ea.polygonOffset_enable;pa!==ta.polygonOffset_enable&&(pa?u.enable(32823):u.disable(32823),ta.polygonOffset_enable=pa);ub=Y[0];Ea=Y[1];if(ub!==J[0]||Ea!==J[1])u.polygonOffset(ub,Ea),J[0]=ub,J[1]=Ea;Pa=ea.sample_alpha;Pa!==ta.sample_alpha&&(Pa?u.enable(32926):u.disable(32926),ta.sample_alpha=Pa);Td=
ea.sample_enable;Td!==ta.sample_enable&&(Td?u.enable(32928):u.disable(32928),ta.sample_enable=Td);Ud=ja[0];Ha=ja[1];if(Ud!==Ca[0]||Ha!==Ca[1])u.sampleCoverage(Ud,Ha),Ca[0]=Ud,Ca[1]=Ha;nb=ea.stencil_mask;nb!==ta.stencil_mask&&(u.stencilMask(nb),ta.stencil_mask=nb);nd=Uc[0];hd=Uc[1];wd=Uc[2];if(nd!==F[0]||hd!==F[1]||wd!==F[2])u.stencilFunc(nd,hd,wd),F[0]=nd,F[1]=hd,F[2]=wd;Yc=va[0];qd=va[1];nc=va[2];sd=va[3];if(Yc!==X[0]||qd!==X[1]||nc!==X[2]||sd!==X[3])u.stencilOpSeparate(Yc,qd,nc,sd),X[0]=Yc,X[1]=
qd,X[2]=nc,X[3]=sd;ed=w[0];Kc=w[1];qc=w[2];bb=w[3];if(ed!==ia[0]||Kc!==ia[1]||qc!==ia[2]||bb!==ia[3])u.stencilOpSeparate(ed,Kc,qc,bb),ia[0]=ed,ia[1]=Kc,ia[2]=qc,ia[3]=bb}u.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;u.enable(3042);ta.blend_enable=!0;u.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;u.blendFuncSeparate(770,771,773,1);ac[0]=770;ac[1]=771;ac[2]=773;ac[3]=1;u.enable(2884);ta.cull_enable=!0;u.cullFace(1029);ta.cull_face=1029;u.enable(3089);ta.scissor_enable=!0;u.disable(2960);
ta.stencil_enable=!1;if(n=ta.profile)r=performance.now(),y.count+=d;u.useProgram(P.program);v=ab.angle_instanced_arrays;var Gc,Fb,oc,Ua,Hc;tb.setVAO(null);Gc=fa.location;Fb=M[Gc];Fb.buffer||u.enableVertexAttribArray(Gc);if(5126!==Fb.type||1!==Fb.size||Fb.buffer!==f||!1!==Fb.normalized||0!==Fb.offset||8!==Fb.stride)u.bindBuffer(34962,f.buffer),u.vertexAttribPointer(Gc,1,5126,!1,8,0),Fb.type=5126,Fb.size=1,Fb.buffer=f,Fb.normalized=!1,Fb.offset=0,Fb.stride=8;0!==Fb.divisor&&(v.vertexAttribDivisorANGLE(Gc,
0),Fb.divisor=0);oc=a.location;Ua=M[oc];Ua.buffer||u.enableVertexAttribArray(oc);if(5126!==Ua.type||1!==Ua.size||Ua.buffer!==c||!1!==Ua.normalized||4!==Ua.offset||8!==Ua.stride)u.bindBuffer(34962,c.buffer),u.vertexAttribPointer(oc,1,5126,!1,8,4),Ua.type=5126,Ua.size=1,Ua.buffer=c,Ua.normalized=!1,Ua.offset=4,Ua.stride=8;0!==Ua.divisor&&(v.vertexAttribDivisorANGLE(oc,0),Ua.divisor=0);(Hc=I.elements)?u.bindBuffer(34963,Hc.buffer.buffer):tb.currentVAO&&(Hc=Vb.getElements(tb.currentVAO.elements))&&u.bindBuffer(34963,
Hc.buffer.buffer);for(x=0;x<d;++x){A=b[x];var bc,rc,Gd,Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,Og,vd,cg,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc;bc=A.viewport;rc=bc.x|0;Gd=
bc.y|0;Cd="width"in bc?bc.width|0:U.framebufferWidth-rc;yc="height"in bc?bc.height|0:U.framebufferHeight-Gd;Xb=U.viewportWidth;U.viewportWidth=Cd;Dc=U.viewportHeight;U.viewportHeight=yc;u.viewport(rc,Gd,Cd,yc);ra[0]=rc;ra[1]=Gd;ra[2]=Cd;ra[3]=yc;(Qc=ca.call(this,U,A,x))?u.enable(2929):u.disable(2929);ta.depth_enable=Qc;Ma=A.viewport;Gb=Ma.x|0;Xa=Ma.y|0;sa="width"in Ma?Ma.width|0:U.framebufferWidth-Gb;td="height"in Ma?Ma.height|0:U.framebufferHeight-Xa;u.scissor(Gb,Xa,sa,td);Jc[0]=Gb;Jc[1]=Xa;Jc[2]=
sa;Jc[3]=td;da.buffer=A.positionBuffer;Bb=!1;Ta=null;Ib=0;db=!1;Rb=Ec=0;$d=1;$b=0;Sb=5126;ob=Na=Tb=pd=0;ka(da)?(Bb=!0,Ta=O.createStream(34962,da),Sb=Ta.dtype):(Ta=O.getBuffer(da))?Sb=Ta.dtype:"constant"in da?($d=2,"number"===typeof da.constant?(Tb=da.constant,Na=ob=pd=0):(Tb=0<da.constant.length?da.constant[0]:0,Na=1<da.constant.length?da.constant[1]:0,ob=2<da.constant.length?da.constant[2]:0,pd=3<da.constant.length?da.constant[3]:0)):(Ta=ka(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),
Sb="type"in da?H[da.type]:Ta.dtype,db=!!da.normalized,Rb=da.size|0,Ec=da.offset|0,$b=da.stride|0,Ib=da.divisor|0);vb=l.location;hb=M[vb];if(1===$d){hb.buffer||u.enableVertexAttribArray(vb);Qa=Rb||2;if(hb.type!==Sb||hb.size!==Qa||hb.buffer!==Ta||hb.normalized!==db||hb.offset!==Ec||hb.stride!==$b)u.bindBuffer(34962,Ta.buffer),u.vertexAttribPointer(vb,Qa,Sb,db,$b,Ec),hb.type=Sb,hb.size=Qa,hb.buffer=Ta,hb.normalized=db,hb.offset=Ec,hb.stride=$b;hb.divisor!==Ib&&(v.vertexAttribDivisorANGLE(vb,Ib),hb.divisor=
Ib)}else if(hb.buffer&&(u.disableVertexAttribArray(vb),hb.buffer=null),hb.x!==Tb||hb.y!==Na||hb.z!==ob||hb.w!==pd)u.vertexAttrib4f(vb,Tb,Na,ob,pd),hb.x=Tb,hb.y=Na,hb.z=ob,hb.w=pd;wa.buffer=A.positionBuffer;lc=!1;Yb=null;Zc=0;eb=!1;dd=jc=0;hc=1;jb=0;kb=5126;Va=xa=pb=ua=0;ka(wa)?(lc=!0,Yb=O.createStream(34962,wa),kb=Yb.dtype):(Yb=O.getBuffer(wa))?kb=Yb.dtype:"constant"in wa?(hc=2,"number"===typeof wa.constant?(pb=wa.constant,xa=Va=ua=0):(pb=0<wa.constant.length?wa.constant[0]:0,xa=1<wa.constant.length?
wa.constant[1]:0,Va=2<wa.constant.length?wa.constant[2]:0,ua=3<wa.constant.length?wa.constant[3]:0)):(Yb=ka(wa.buffer)?O.createStream(34962,wa.buffer):O.getBuffer(wa.buffer),kb="type"in wa?H[wa.type]:Yb.dtype,eb=!!wa.normalized,dd=wa.size|0,jc=wa.offset|0,jb=wa.stride|0,Zc=wa.divisor|0);cb=Z.location;Aa=M[cb];if(1===hc){Aa.buffer||u.enableVertexAttribArray(cb);fb=dd||2;if(Aa.type!==kb||Aa.size!==fb||Aa.buffer!==Yb||Aa.normalized!==eb||Aa.offset!==jc||Aa.stride!==jb)u.bindBuffer(34962,Yb.buffer),u.vertexAttribPointer(cb,
fb,kb,eb,jb,jc),Aa.type=kb,Aa.size=fb,Aa.buffer=Yb,Aa.normalized=eb,Aa.offset=jc,Aa.stride=jb;Aa.divisor!==Zc&&(v.vertexAttribDivisorANGLE(cb,Zc),Aa.divisor=Zc)}else if(Aa.buffer&&(u.disableVertexAttribArray(cb),Aa.buffer=null),Aa.x!==pb||Aa.y!==xa||Aa.z!==Va||Aa.w!==ua)u.vertexAttrib4f(cb,pb,xa,Va,ua),Aa.x=pb,Aa.y=xa,Aa.z=Va,Aa.w=ua;ma.buffer=A.positionBuffer;Ia=!1;Cb=null;Ab=0;Sa=!1;Kb=Ic=0;$a=1;Ub=0;ya=5126;gb=Ob=Ka=ud=0;ka(ma)?(Ia=!0,Cb=O.createStream(34962,ma),ya=Cb.dtype):(Cb=O.getBuffer(ma))?
ya=Cb.dtype:"constant"in ma?($a=2,"number"===typeof ma.constant?(Ka=ma.constant,Ob=gb=ud=0):(Ka=0<ma.constant.length?ma.constant[0]:0,Ob=1<ma.constant.length?ma.constant[1]:0,gb=2<ma.constant.length?ma.constant[2]:0,ud=3<ma.constant.length?ma.constant[3]:0)):(Cb=ka(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),ya="type"in ma?H[ma.type]:Cb.dtype,Sa=!!ma.normalized,Kb=ma.size|0,Ic=ma.offset|0,Ub=ma.stride|0,Ab=ma.divisor|0);ib=la.location;za=M[ib];if(1===$a){za.buffer||u.enableVertexAttribArray(ib);
dc=Kb||2;if(za.type!==ya||za.size!==dc||za.buffer!==Cb||za.normalized!==Sa||za.offset!==Ic||za.stride!==Ub)u.bindBuffer(34962,Cb.buffer),u.vertexAttribPointer(ib,dc,ya,Sa,Ub,Ic),za.type=ya,za.size=dc,za.buffer=Cb,za.normalized=Sa,za.offset=Ic,za.stride=Ub;za.divisor!==Ab&&(v.vertexAttribDivisorANGLE(ib,Ab),za.divisor=Ab)}else if(za.buffer&&(u.disableVertexAttribArray(ib),za.buffer=null),za.x!==Ka||za.y!==Ob||za.z!==gb||za.w!==ud)u.vertexAttrib4f(ib,Ka,Ob,gb,ud),za.x=Ka,za.y=Ob,za.z=gb,za.w=ud;k.buffer=
A.positionBuffer;Da=!1;qb=null;rb=0;Ya=!1;kc=Za=0;ad=1;uc=0;Wa=5126;wc=Fa=Pc=Mb=0;ka(k)?(Da=!0,qb=O.createStream(34962,k),Wa=qb.dtype):(qb=O.getBuffer(k))?Wa=qb.dtype:"constant"in k?(ad=2,"number"===typeof k.constant?(Pc=k.constant,Fa=wc=Mb=0):(Pc=0<k.constant.length?k.constant[0]:0,Fa=1<k.constant.length?k.constant[1]:0,wc=2<k.constant.length?k.constant[2]:0,Mb=3<k.constant.length?k.constant[3]:0)):(qb=ka(k.buffer)?O.createStream(34962,k.buffer):O.getBuffer(k.buffer),Wa="type"in k?H[k.type]:qb.dtype,
Ya=!!k.normalized,kc=k.size|0,Za=k.offset|0,uc=k.stride|0,rb=k.divisor|0);Ra=Eb.location;Ba=M[Ra];if(1===ad){Ba.buffer||u.enableVertexAttribArray(Ra);lb=kc||2;if(Ba.type!==Wa||Ba.size!==lb||Ba.buffer!==qb||Ba.normalized!==Ya||Ba.offset!==Za||Ba.stride!==uc)u.bindBuffer(34962,qb.buffer),u.vertexAttribPointer(Ra,lb,Wa,Ya,uc,Za),Ba.type=Wa,Ba.size=lb,Ba.buffer=qb,Ba.normalized=Ya,Ba.offset=Za,Ba.stride=uc;Ba.divisor!==rb&&(v.vertexAttribDivisorANGLE(Ra,rb),Ba.divisor=rb)}else if(Ba.buffer&&(u.disableVertexAttribArray(Ra),
Ba.buffer=null),Ba.x!==Pc||Ba.y!==Fa||Ba.z!==wc||Ba.w!==Mb)u.vertexAttrib4f(Ra,Pc,Fa,wc,Mb),Ba.x=Pc,Ba.y=Fa,Ba.z=wc,Ba.w=Mb;t.buffer=A.colorBuffer;wb=!1;Db=null;sb=0;vc=!1;xd=xb=0;sc=1;Md=0;Lc=5126;cc=Wb=od=bd=0;ka(t)?(wb=!0,Db=O.createStream(34962,t),Lc=Db.dtype):(Db=O.getBuffer(t))?Lc=Db.dtype:"constant"in t?(sc=2,"number"===typeof t.constant?(od=t.constant,Wb=cc=bd=0):(od=0<t.constant.length?t.constant[0]:0,Wb=1<t.constant.length?t.constant[1]:0,cc=2<t.constant.length?t.constant[2]:0,bd=3<t.constant.length?
t.constant[3]:0)):(Db=ka(t.buffer)?O.createStream(34962,t.buffer):O.getBuffer(t.buffer),Lc="type"in t?H[t.type]:Db.dtype,vc=!!t.normalized,xd=t.size|0,xb=t.offset|0,Md=t.stride|0,sb=t.divisor|0);Pb=g.location;Ga=M[Pb];if(1===sc){Ga.buffer||u.enableVertexAttribArray(Pb);Zb=xd||4;if(Ga.type!==Lc||Ga.size!==Zb||Ga.buffer!==Db||Ga.normalized!==vc||Ga.offset!==xb||Ga.stride!==Md)u.bindBuffer(34962,Db.buffer),u.vertexAttribPointer(Pb,Zb,Lc,vc,Md,xb),Ga.type=Lc,Ga.size=Zb,Ga.buffer=Db,Ga.normalized=vc,Ga.offset=
xb,Ga.stride=Md;Ga.divisor!==sb&&(v.vertexAttribDivisorANGLE(Pb,sb),Ga.divisor=sb)}else if(Ga.buffer&&(u.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==od||Ga.y!==Wb||Ga.z!==cc||Ga.w!==bd)u.vertexAttrib4f(Pb,od,Wb,cc,bd),Ga.x=od,Ga.y=Wb,Ga.z=cc,Ga.w=bd;z.buffer=A.colorBuffer;mb=!1;yb=null;Nb=0;Qb=!1;gc=ec=0;Ve=1;zc=0;Ac=5126;Rc=Xc=Mc=Bc=0;ka(z)?(mb=!0,yb=O.createStream(34962,z),Ac=yb.dtype):(yb=O.getBuffer(z))?Ac=yb.dtype:"constant"in z?(Ve=2,"number"===typeof z.constant?(Mc=z.constant,Xc=Rc=
Bc=0):(Mc=0<z.constant.length?z.constant[0]:0,Xc=1<z.constant.length?z.constant[1]:0,Rc=2<z.constant.length?z.constant[2]:0,Bc=3<z.constant.length?z.constant[3]:0)):(yb=ka(z.buffer)?O.createStream(34962,z.buffer):O.getBuffer(z.buffer),Ac="type"in z?H[z.type]:yb.dtype,Qb=!!z.normalized,gc=z.size|0,ec=z.offset|0,zc=z.stride|0,Nb=z.divisor|0);Nc=R.location;Lb=M[Nc];if(1===Ve){Lb.buffer||u.enableVertexAttribArray(Nc);Hb=gc||4;if(Lb.type!==Ac||Lb.size!==Hb||Lb.buffer!==yb||Lb.normalized!==Qb||Lb.offset!==
ec||Lb.stride!==zc)u.bindBuffer(34962,yb.buffer),u.vertexAttribPointer(Nc,Hb,Ac,Qb,zc,ec),Lb.type=Ac,Lb.size=Hb,Lb.buffer=yb,Lb.normalized=Qb,Lb.offset=ec,Lb.stride=zc;Lb.divisor!==Nb&&(v.vertexAttribDivisorANGLE(Nc,Nb),Lb.divisor=Nb)}else if(Lb.buffer&&(u.disableVertexAttribArray(Nc),Lb.buffer=null),Lb.x!==Mc||Lb.y!==Xc||Lb.z!==Rc||Lb.w!==Bc)u.vertexAttrib4f(Nc,Mc,Xc,Rc,Bc),Lb.x=Mc,Lb.y=Xc,Lb.z=Rc,Lb.w=Bc;Oc=A.scale;Fc=Oc[0];fc=Oc[1];x&&Sc===Fc&&Vc===fc||(Sc=Fc,Vc=fc,u.uniform2f(Ja.location,Fc,fc));
id=A.translate;fd=id[0];Wc=id[1];x&&kd===fd&&Og===Wc||(kd=fd,Og=Wc,u.uniform2f(Oa.location,fd,Wc));vd=A.thickness;x&&cg===vd||(cg=vd,u.uniform1f(oa.location,vd));ue=A.depth;x&&ee===ue||(ee=ue,u.uniform1f(L.location,ue));Jd=h.call(this,U,A,x);Hd=Jd[0];Cc=Jd[1];gd=Jd[2];ld=Jd[3];x&&cd===Hd&&jd===Cc&&$c===gd&&zd===ld||(cd=Hd,jd=Cc,$c=gd,zd=ld,u.uniform4f(ba.location,Hd,Cc,gd,ld));Ad=A.miterLimit;x&&xe===Ad||(xe=Ad,u.uniform1f(p.location,Ad));Ke=e.call(this,U,A,x);x&&we===Ke||(we=Ke,u.uniform1f(aa.location,
Ke));he=A.dashLength;x&&fe===he||(fe=he,u.uniform1f(m.location,he));de=A.opacity;x&&pe===de||(pe=de,u.uniform1f(La.location,de));(ae=A.dashTexture)&&"framebuffer"===ae._reglType&&(ae=ae.color[0]);je=ae._texture;u.uniform1i(qa.location,je.bind());xc=A.count;0<xc?Hc?v.drawElementsInstancedANGLE(5,4,Hc.type,0<<(Hc.type-5121>>1),xc):v.drawArraysInstancedANGLE(5,0,4,xc):0>xc&&(Hc?u.drawElements(5,4,Hc.type,0<<(Hc.type-5121>>1)):u.drawArrays(5,0,4));U.viewportWidth=Xb;U.viewportHeight=Dc;Bb&&O.destroyStream(Ta);
lc&&O.destroyStream(Yb);Ia&&O.destroyStream(Cb);Da&&O.destroyStream(qb);wb&&O.destroyStream(Db);mb&&O.destroyStream(yb);je.unbind()}ta.dirty=!0;tb.setVAO(null);n&&(y.cpuTime+=performance.now()-r)},draw:function(d){var e,h,r,v,A,B,D,E,G,K,P,C,Q,T,ha,na,pa,ca,ub,Ea,Pa,Ha,Td,Ud,nb,Xd,nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,Gd,Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,
gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd;e=S.next;e!==S.cur&&(e?u.bindFramebuffer(36160,e.framebuffer):u.bindFramebuffer(36160,null),S.cur=e);if(ta.dirty){var sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc;sc=ea.dither;sc!==ta.dither&&(sc?u.enable(3024):u.disable(3024),ta.dither=sc);Md=ea.depth_func;Md!==ta.depth_func&&(u.depthFunc(Md),ta.depth_func=Md);Lc=rd[0];bd=rd[1];if(Lc!==tc[0]||bd!==tc[1])u.depthRange(Lc,bd),tc[0]=
Lc,tc[1]=bd;od=ea.depth_mask;od!==ta.depth_mask&&(u.depthMask(od),ta.depth_mask=od);Wb=pc[0];cc=pc[1];Pb=pc[2];Ga=pc[3];if(Wb!==ic[0]||cc!==ic[1]||Pb!==ic[2]||Ga!==ic[3])u.colorMask(Wb,cc,Pb,Ga),ic[0]=Wb,ic[1]=cc,ic[2]=Pb,ic[3]=Ga;Zb=ea.frontFace;Zb!==ta.frontFace&&(u.frontFace(Zb),ta.frontFace=Zb);mb=ea.lineWidth;mb!==ta.lineWidth&&(u.lineWidth(mb),ta.lineWidth=mb);yb=ea.polygonOffset_enable;yb!==ta.polygonOffset_enable&&(yb?u.enable(32823):u.disable(32823),ta.polygonOffset_enable=yb);Nb=Y[0];Qb=
Y[1];if(Nb!==J[0]||Qb!==J[1])u.polygonOffset(Nb,Qb),J[0]=Nb,J[1]=Qb;ec=ea.sample_alpha;ec!==ta.sample_alpha&&(ec?u.enable(32926):u.disable(32926),ta.sample_alpha=ec);gc=ea.sample_enable;gc!==ta.sample_enable&&(gc?u.enable(32928):u.disable(32928),ta.sample_enable=gc);Ve=ja[0];zc=ja[1];if(Ve!==Ca[0]||zc!==Ca[1])u.sampleCoverage(Ve,zc),Ca[0]=Ve,Ca[1]=zc;Ac=ea.stencil_mask;Ac!==ta.stencil_mask&&(u.stencilMask(Ac),ta.stencil_mask=Ac);Bc=Uc[0];Mc=Uc[1];Xc=Uc[2];if(Bc!==F[0]||Mc!==F[1]||Xc!==F[2])u.stencilFunc(Bc,
Mc,Xc),F[0]=Bc,F[1]=Mc,F[2]=Xc;Rc=va[0];Nc=va[1];Lb=va[2];Hb=va[3];if(Rc!==X[0]||Nc!==X[1]||Lb!==X[2]||Hb!==X[3])u.stencilOpSeparate(Rc,Nc,Lb,Hb),X[0]=Rc,X[1]=Nc,X[2]=Lb,X[3]=Hb;Oc=w[0];Fc=w[1];Sc=w[2];fc=w[3];if(Oc!==ia[0]||Fc!==ia[1]||Sc!==ia[2]||fc!==ia[3])u.stencilOpSeparate(Oc,Fc,Sc,fc),ia[0]=Oc,ia[1]=Fc,ia[2]=Sc,ia[3]=fc}h=d.viewport;r=h.x|0;v=h.y|0;A="width"in h?h.width|0:U.framebufferWidth-r;B="height"in h?h.height|0:U.framebufferHeight-v;D=U.viewportWidth;U.viewportWidth=A;E=U.viewportHeight;
U.viewportHeight=B;u.viewport(r,v,A,B);ra[0]=r;ra[1]=v;ra[2]=A;ra[3]=B;u.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;u.enable(3042);ta.blend_enable=!0;u.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;u.blendFuncSeparate(770,771,773,1);ac[0]=770;ac[1]=771;ac[2]=773;ac[3]=1;u.enable(2884);ta.cull_enable=!0;u.cullFace(1029);ta.cull_face=1029;(G=n.call(this,U,d,0))?u.enable(2929):u.disable(2929);ta.depth_enable=G;K=d.viewport;P=K.x|0;C=K.y|0;Q="width"in K?K.width|0:U.framebufferWidth-
P;T="height"in K?K.height|0:U.framebufferHeight-C;u.scissor(P,C,Q,T);Jc[0]=P;Jc[1]=C;Jc[2]=Q;Jc[3]=T;u.enable(3089);ta.scissor_enable=!0;u.disable(2960);ta.stencil_enable=!1;if(ha=ta.profile)na=performance.now(),y.count++;u.useProgram(N.program);pa=ab.angle_instanced_arrays;tb.setVAO(null);da.buffer=d.positionBuffer;ca=!1;ub=null;Ea=0;Pa=!1;Td=Ha=0;Ud=1;nb=0;Xd=5126;Yc=wd=hd=nd=0;ka(da)?(ca=!0,ub=O.createStream(34962,da),Xd=ub.dtype):(ub=O.getBuffer(da))?Xd=ub.dtype:"constant"in da?(Ud=2,"number"===
typeof da.constant?(hd=da.constant,wd=Yc=nd=0):(hd=0<da.constant.length?da.constant[0]:0,wd=1<da.constant.length?da.constant[1]:0,Yc=2<da.constant.length?da.constant[2]:0,nd=3<da.constant.length?da.constant[3]:0)):(ub=ka(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),Xd="type"in da?H[da.type]:ub.dtype,Pa=!!da.normalized,Td=da.size|0,Ha=da.offset|0,nb=da.stride|0,Ea=da.divisor|0);qd=l.location;nc=M[qd];if(1===Ud){nc.buffer||u.enableVertexAttribArray(qd);sd=Td||2;if(nc.type!==Xd||
nc.size!==sd||nc.buffer!==ub||nc.normalized!==Pa||nc.offset!==Ha||nc.stride!==nb)u.bindBuffer(34962,ub.buffer),u.vertexAttribPointer(qd,sd,Xd,Pa,nb,Ha),nc.type=Xd,nc.size=sd,nc.buffer=ub,nc.normalized=Pa,nc.offset=Ha,nc.stride=nb;nc.divisor!==Ea&&(pa.vertexAttribDivisorANGLE(qd,Ea),nc.divisor=Ea)}else if(nc.buffer&&(u.disableVertexAttribArray(qd),nc.buffer=null),nc.x!==hd||nc.y!==wd||nc.z!==Yc||nc.w!==nd)u.vertexAttrib4f(qd,hd,wd,Yc,nd),nc.x=hd,nc.y=wd,nc.z=Yc,nc.w=nd;wa.buffer=d.positionBuffer;ed=
!1;Kc=null;qc=0;bb=!1;Fb=Gc=0;oc=1;Ua=0;Hc=5126;Cd=Gd=rc=bc=0;ka(wa)?(ed=!0,Kc=O.createStream(34962,wa),Hc=Kc.dtype):(Kc=O.getBuffer(wa))?Hc=Kc.dtype:"constant"in wa?(oc=2,"number"===typeof wa.constant?(rc=wa.constant,Gd=Cd=bc=0):(rc=0<wa.constant.length?wa.constant[0]:0,Gd=1<wa.constant.length?wa.constant[1]:0,Cd=2<wa.constant.length?wa.constant[2]:0,bc=3<wa.constant.length?wa.constant[3]:0)):(Kc=ka(wa.buffer)?O.createStream(34962,wa.buffer):O.getBuffer(wa.buffer),Hc="type"in wa?H[wa.type]:Kc.dtype,
bb=!!wa.normalized,Fb=wa.size|0,Gc=wa.offset|0,Ua=wa.stride|0,qc=wa.divisor|0);yc=Z.location;Xb=M[yc];if(1===oc){Xb.buffer||u.enableVertexAttribArray(yc);Dc=Fb||2;if(Xb.type!==Hc||Xb.size!==Dc||Xb.buffer!==Kc||Xb.normalized!==bb||Xb.offset!==Gc||Xb.stride!==Ua)u.bindBuffer(34962,Kc.buffer),u.vertexAttribPointer(yc,Dc,Hc,bb,Ua,Gc),Xb.type=Hc,Xb.size=Dc,Xb.buffer=Kc,Xb.normalized=bb,Xb.offset=Gc,Xb.stride=Ua;Xb.divisor!==qc&&(pa.vertexAttribDivisorANGLE(yc,qc),Xb.divisor=qc)}else if(Xb.buffer&&(u.disableVertexAttribArray(yc),
Xb.buffer=null),Xb.x!==rc||Xb.y!==Gd||Xb.z!==Cd||Xb.w!==bc)u.vertexAttrib4f(yc,rc,Gd,Cd,bc),Xb.x=rc,Xb.y=Gd,Xb.z=Cd,Xb.w=bc;ma.buffer=d.positionBuffer;Qc=!1;Ma=null;Gb=0;Xa=!1;td=sa=0;Bb=1;Ta=0;Ib=5126;$d=Rb=Ec=db=0;ka(ma)?(Qc=!0,Ma=O.createStream(34962,ma),Ib=Ma.dtype):(Ma=O.getBuffer(ma))?Ib=Ma.dtype:"constant"in ma?(Bb=2,"number"===typeof ma.constant?(Ec=ma.constant,Rb=$d=db=0):(Ec=0<ma.constant.length?ma.constant[0]:0,Rb=1<ma.constant.length?ma.constant[1]:0,$d=2<ma.constant.length?ma.constant[2]:
0,db=3<ma.constant.length?ma.constant[3]:0)):(Ma=ka(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),Ib="type"in ma?H[ma.type]:Ma.dtype,Xa=!!ma.normalized,td=ma.size|0,sa=ma.offset|0,Ta=ma.stride|0,Gb=ma.divisor|0);$b=la.location;Sb=M[$b];if(1===Bb){Sb.buffer||u.enableVertexAttribArray($b);pd=td||2;if(Sb.type!==Ib||Sb.size!==pd||Sb.buffer!==Ma||Sb.normalized!==Xa||Sb.offset!==sa||Sb.stride!==Ta)u.bindBuffer(34962,Ma.buffer),u.vertexAttribPointer($b,pd,Ib,Xa,Ta,sa),Sb.type=Ib,Sb.size=
pd,Sb.buffer=Ma,Sb.normalized=Xa,Sb.offset=sa,Sb.stride=Ta;Sb.divisor!==Gb&&(pa.vertexAttribDivisorANGLE($b,Gb),Sb.divisor=Gb)}else if(Sb.buffer&&(u.disableVertexAttribArray($b),Sb.buffer=null),Sb.x!==Ec||Sb.y!==Rb||Sb.z!==$d||Sb.w!==db)u.vertexAttrib4f($b,Ec,Rb,$d,db),Sb.x=Ec,Sb.y=Rb,Sb.z=$d,Sb.w=db;k.buffer=d.positionBuffer;Tb=!1;Na=null;ob=0;vb=!1;Qa=hb=0;lc=1;Yb=0;Zc=5126;hc=dd=jc=eb=0;ka(k)?(Tb=!0,Na=O.createStream(34962,k),Zc=Na.dtype):(Na=O.getBuffer(k))?Zc=Na.dtype:"constant"in k?(lc=2,"number"===
typeof k.constant?(jc=k.constant,dd=hc=eb=0):(jc=0<k.constant.length?k.constant[0]:0,dd=1<k.constant.length?k.constant[1]:0,hc=2<k.constant.length?k.constant[2]:0,eb=3<k.constant.length?k.constant[3]:0)):(Na=ka(k.buffer)?O.createStream(34962,k.buffer):O.getBuffer(k.buffer),Zc="type"in k?H[k.type]:Na.dtype,vb=!!k.normalized,Qa=k.size|0,hb=k.offset|0,Yb=k.stride|0,ob=k.divisor|0);jb=Eb.location;kb=M[jb];if(1===lc){kb.buffer||u.enableVertexAttribArray(jb);ua=Qa||2;if(kb.type!==Zc||kb.size!==ua||kb.buffer!==
Na||kb.normalized!==vb||kb.offset!==hb||kb.stride!==Yb)u.bindBuffer(34962,Na.buffer),u.vertexAttribPointer(jb,ua,Zc,vb,Yb,hb),kb.type=Zc,kb.size=ua,kb.buffer=Na,kb.normalized=vb,kb.offset=hb,kb.stride=Yb;kb.divisor!==ob&&(pa.vertexAttribDivisorANGLE(jb,ob),kb.divisor=ob)}else if(kb.buffer&&(u.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==jc||kb.y!==dd||kb.z!==hc||kb.w!==eb)u.vertexAttrib4f(jb,jc,dd,hc,eb),kb.x=jc,kb.y=dd,kb.z=hc,kb.w=eb;t.buffer=d.colorBuffer;pb=!1;xa=null;Va=0;cb=!1;fb=Aa=
0;Ia=1;Cb=0;Ab=5126;$a=Kb=Ic=Sa=0;ka(t)?(pb=!0,xa=O.createStream(34962,t),Ab=xa.dtype):(xa=O.getBuffer(t))?Ab=xa.dtype:"constant"in t?(Ia=2,"number"===typeof t.constant?(Ic=t.constant,Kb=$a=Sa=0):(Ic=0<t.constant.length?t.constant[0]:0,Kb=1<t.constant.length?t.constant[1]:0,$a=2<t.constant.length?t.constant[2]:0,Sa=3<t.constant.length?t.constant[3]:0)):(xa=ka(t.buffer)?O.createStream(34962,t.buffer):O.getBuffer(t.buffer),Ab="type"in t?H[t.type]:xa.dtype,cb=!!t.normalized,fb=t.size|0,Aa=t.offset|0,
Cb=t.stride|0,Va=t.divisor|0);Ub=g.location;ya=M[Ub];if(1===Ia){ya.buffer||u.enableVertexAttribArray(Ub);ud=fb||4;if(ya.type!==Ab||ya.size!==ud||ya.buffer!==xa||ya.normalized!==cb||ya.offset!==Aa||ya.stride!==Cb)u.bindBuffer(34962,xa.buffer),u.vertexAttribPointer(Ub,ud,Ab,cb,Cb,Aa),ya.type=Ab,ya.size=ud,ya.buffer=xa,ya.normalized=cb,ya.offset=Aa,ya.stride=Cb;ya.divisor!==Va&&(pa.vertexAttribDivisorANGLE(Ub,Va),ya.divisor=Va)}else if(ya.buffer&&(u.disableVertexAttribArray(Ub),ya.buffer=null),ya.x!==
Ic||ya.y!==Kb||ya.z!==$a||ya.w!==Sa)u.vertexAttrib4f(Ub,Ic,Kb,$a,Sa),ya.x=Ic,ya.y=Kb,ya.z=$a,ya.w=Sa;z.buffer=d.colorBuffer;Ka=!1;Ob=null;gb=0;ib=!1;dc=za=0;Da=1;qb=0;rb=5126;ad=kc=Za=Ya=0;ka(z)?(Ka=!0,Ob=O.createStream(34962,z),rb=Ob.dtype):(Ob=O.getBuffer(z))?rb=Ob.dtype:"constant"in z?(Da=2,"number"===typeof z.constant?(Za=z.constant,kc=ad=Ya=0):(Za=0<z.constant.length?z.constant[0]:0,kc=1<z.constant.length?z.constant[1]:0,ad=2<z.constant.length?z.constant[2]:0,Ya=3<z.constant.length?z.constant[3]:
0)):(Ob=ka(z.buffer)?O.createStream(34962,z.buffer):O.getBuffer(z.buffer),rb="type"in z?H[z.type]:Ob.dtype,ib=!!z.normalized,dc=z.size|0,za=z.offset|0,qb=z.stride|0,gb=z.divisor|0);uc=R.location;Wa=M[uc];if(1===Da){Wa.buffer||u.enableVertexAttribArray(uc);Mb=dc||4;if(Wa.type!==rb||Wa.size!==Mb||Wa.buffer!==Ob||Wa.normalized!==ib||Wa.offset!==za||Wa.stride!==qb)u.bindBuffer(34962,Ob.buffer),u.vertexAttribPointer(uc,Mb,rb,ib,qb,za),Wa.type=rb,Wa.size=Mb,Wa.buffer=Ob,Wa.normalized=ib,Wa.offset=za,Wa.stride=
qb;Wa.divisor!==gb&&(pa.vertexAttribDivisorANGLE(uc,gb),Wa.divisor=gb)}else if(Wa.buffer&&(u.disableVertexAttribArray(uc),Wa.buffer=null),Wa.x!==Za||Wa.y!==kc||Wa.z!==ad||Wa.w!==Ya)u.vertexAttrib4f(uc,Za,kc,ad,Ya),Wa.x=Za,Wa.y=kc,Wa.z=ad,Wa.w=Ya;Pc=fa.location;Fa=M[Pc];Fa.buffer||u.enableVertexAttribArray(Pc);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==f||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)u.bindBuffer(34962,f.buffer),u.vertexAttribPointer(Pc,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=
f,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(pa.vertexAttribDivisorANGLE(Pc,0),Fa.divisor=0);wc=a.location;Ra=M[wc];Ra.buffer||u.enableVertexAttribArray(wc);if(5126!==Ra.type||1!==Ra.size||Ra.buffer!==c||!1!==Ra.normalized||4!==Ra.offset||8!==Ra.stride)u.bindBuffer(34962,c.buffer),u.vertexAttribPointer(wc,1,5126,!1,8,4),Ra.type=5126,Ra.size=1,Ra.buffer=c,Ra.normalized=!1,Ra.offset=4,Ra.stride=8;0!==Ra.divisor&&(pa.vertexAttribDivisorANGLE(wc,0),Ra.divisor=0);Ba=d.scale;u.uniform2f(Ja.location,
Ba[0],Ba[1]);lb=d.translate;u.uniform2f(Oa.location,lb[0],lb[1]);u.uniform1f(oa.location,d.thickness);u.uniform1f(L.location,d.depth);wb=x.call(this,U,d,0);u.uniform4f(ba.location,wb[0],wb[1],wb[2],wb[3]);u.uniform1f(p.location,d.miterLimit);Db=b.call(this,U,d,0);u.uniform1f(aa.location,Db);u.uniform1f(m.location,d.dashLength);u.uniform1f(La.location,d.opacity);(sb=d.dashTexture)&&"framebuffer"===sb._reglType&&(sb=sb.color[0]);vc=sb._texture;u.uniform1i(qa.location,vc.bind());(xb=I.elements)?u.bindBuffer(34963,
xb.buffer.buffer):tb.currentVAO&&(xb=Vb.getElements(tb.currentVAO.elements))&&u.bindBuffer(34963,xb.buffer.buffer);xd=d.count;0<xd?xb?pa.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),xd):pa.drawArraysInstancedANGLE(5,0,4,xd):0>xd&&(xb?u.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):u.drawArrays(5,0,4));ta.dirty=!0;tb.setVAO(null);U.viewportWidth=D;U.viewportHeight=E;ha&&(y.cpuTime+=performance.now()-na);ca&&O.destroyStream(ub);ed&&O.destroyStream(Kc);Qc&&O.destroyStream(Ma);Tb&&O.destroyStream(Na);
pb&&O.destroyStream(xa);Ka&&O.destroyStream(Ob);vc.unbind()},scope:function(a,b,d){var e,g,h,l,m,p,n,u,w,x,J,F,Y,N,L,P,M,S,W,R,X,ja,ba,Z,ia,aa,ga,va,pc,ra,Ca,fa,qa,ca,bb,rd,Fb,la,Ua,tc,bc,oa,Jc,ac,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,ic,Bb,Ta,Ib,db,La,Rb,ab,$b,Sb,Oa,Tb,Na,ob,vb,hb,Qa,lc,Yb,Eb,eb,jc,Vb,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,Uc,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,tb,sc,Ja,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,
Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,ge,vd,Ld,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,jf,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,pf,Xe,Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,qf,hf,bf,ef,ff,gf,nf,kf,of,Af,Bf,Ne,Ae,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf;e=a.viewport;g=e.x|0;h=e.y|0;l="width"in e?e.width|0:U.framebufferWidth-g;m="height"in e?e.height|0:U.framebufferHeight-h;p=U.viewportWidth;U.viewportWidth=l;n=U.viewportHeight;U.viewportHeight=m;
u=ha[0];ha[0]=g;w=ha[1];ha[1]=h;x=ha[2];ha[2]=l;J=ha[3];ha[3]=m;F=Ha[0];Ha[0]=0;Y=Ha[1];Ha[1]=0;N=Ha[2];Ha[2]=0;L=Ha[3];Ha[3]=0;P=ea.blend_enable;ea.blend_enable=!0;M=nb[0];nb[0]=32774;S=nb[1];nb[1]=32774;W=pa[0];pa[0]=770;R=pa[1];pa[1]=771;X=pa[2];pa[2]=773;ja=pa[3];pa[3]=1;ba=ea.cull_enable;ea.cull_enable=!0;Z=ea.cull_face;ea.cull_face=1029;ia=v.call(this,U,a,d);aa=ea.depth_enable;ea.depth_enable=ia;ga=a.viewport;va=ga.x|0;pc=ga.y|0;ra="width"in ga?ga.width|0:U.framebufferWidth-va;Ca="height"in
ga?ga.height|0:U.framebufferHeight-pc;fa=ub[0];ub[0]=va;qa=ub[1];ub[1]=pc;ca=ub[2];ub[2]=ra;bb=ub[3];ub[3]=Ca;rd=ea.scissor_enable;ea.scissor_enable=!0;Fb=ea.stencil_enable;ea.stencil_enable=!1;if(la=ta.profile)Ua=performance.now(),y.count++;tc=I.offset;I.offset=0;bc=I.count;I.count=4;oa=a.count;Jc=I.instances;I.instances=oa;ac=I.primitive;I.primitive=5;yc=a.dashLength;Xb=Pa[23];Pa[23]=yc;Dc=a.dashTexture;Qc=Pa[24];Pa[24]=Dc;Ma=a.depth;Gb=Pa[22];Pa[22]=Ma;Xa=a.id;sa=Pa[31];Pa[31]=Xa;ic=a.miterLimit;
Bb=Pa[32];Pa[32]=ic;Ta=C.call(this,U,a,d);Ib=Pa[33];Pa[33]=Ta;db=a.opacity;La=Pa[10];Pa[10]=db;Rb=U.pixelRatio;ab=Pa[34];Pa[34]=Rb;$b=a.scale;Sb=Pa[6];Pa[6]=$b;Oa=a.scaleFract;Tb=Pa[7];Pa[7]=Oa;Na=a.thickness;ob=Pa[21];Pa[21]=Na;vb=a.translate;hb=Pa[8];Pa[8]=vb;Qa=a.translateFract;lc=Pa[9];Pa[9]=Qa;Yb=T.call(this,U,a,d);Eb=Pa[3];Pa[3]=Yb;t.buffer=a.colorBuffer;eb=!1;jc=null;Vb=0;hc=!1;kb=jb=0;ua=1;pb=0;xa=5126;fb=Aa=cb=Va=0;ka(t)?(eb=!0,jc=O.createStream(34962,t),xa=jc.dtype):(jc=O.getBuffer(t))?
xa=jc.dtype:"constant"in t?(ua=2,"number"===typeof t.constant?(cb=t.constant,Aa=fb=Va=0):(cb=0<t.constant.length?t.constant[0]:0,Aa=1<t.constant.length?t.constant[1]:0,fb=2<t.constant.length?t.constant[2]:0,Va=3<t.constant.length?t.constant[3]:0)):(jc=ka(t.buffer)?O.createStream(34962,t.buffer):O.getBuffer(t.buffer),xa="type"in t?H[t.type]:jc.dtype,hc=!!t.normalized,kb=t.size|0,jb=t.offset|0,pb=t.stride|0,Vb=t.divisor|0);Ia=K.buffer;K.buffer=jc;Cb=K.divisor;K.divisor=Vb;Ab=K.normalized;K.normalized=
hc;Sa=K.offset;K.offset=jb;Ic=K.size;K.size=kb;Kb=K.state;K.state=ua;$a=K.stride;K.stride=pb;Ub=K.type;K.type=xa;ya=K.w;K.w=Va;Uc=K.x;K.x=cb;Ka=K.y;K.y=Aa;Ob=K.z;K.z=fb;da.buffer=a.positionBuffer;gb=!1;ib=null;za=0;dc=!1;qb=Da=0;rb=1;Ya=0;Za=5126;Wa=uc=ad=kc=0;ka(da)?(gb=!0,ib=O.createStream(34962,da),Za=ib.dtype):(ib=O.getBuffer(da))?Za=ib.dtype:"constant"in da?(rb=2,"number"===typeof da.constant?(ad=da.constant,uc=Wa=kc=0):(ad=0<da.constant.length?da.constant[0]:0,uc=1<da.constant.length?da.constant[1]:
0,Wa=2<da.constant.length?da.constant[2]:0,kc=3<da.constant.length?da.constant[3]:0)):(ib=ka(da.buffer)?O.createStream(34962,da.buffer):O.getBuffer(da.buffer),Za="type"in da?H[da.type]:ib.dtype,dc=!!da.normalized,qb=da.size|0,Da=da.offset|0,Ya=da.stride|0,za=da.divisor|0);Mb=G.buffer;G.buffer=ib;Pc=G.divisor;G.divisor=za;Fa=G.normalized;G.normalized=dc;wc=G.offset;G.offset=Da;Ra=G.size;G.size=qb;Ba=G.state;G.state=rb;lb=G.stride;G.stride=Ya;wb=G.type;G.type=Za;Db=G.w;G.w=kc;sb=G.x;G.x=ad;vc=G.y;G.y=
uc;xb=G.z;G.z=Wa;z.buffer=a.colorBuffer;tb=!1;sc=null;Ja=0;Lc=!1;od=bd=0;Wb=1;cc=0;Pb=5126;yb=mb=Zb=Ga=0;ka(z)?(tb=!0,sc=O.createStream(34962,z),Pb=sc.dtype):(sc=O.getBuffer(z))?Pb=sc.dtype:"constant"in z?(Wb=2,"number"===typeof z.constant?(Zb=z.constant,mb=yb=Ga=0):(Zb=0<z.constant.length?z.constant[0]:0,mb=1<z.constant.length?z.constant[1]:0,yb=2<z.constant.length?z.constant[2]:0,Ga=3<z.constant.length?z.constant[3]:0)):(sc=ka(z.buffer)?O.createStream(34962,z.buffer):O.getBuffer(z.buffer),Pb="type"in
z?H[z.type]:sc.dtype,Lc=!!z.normalized,od=z.size|0,bd=z.offset|0,cc=z.stride|0,Ja=z.divisor|0);Nb=r.buffer;r.buffer=sc;Qb=r.divisor;r.divisor=Ja;ec=r.normalized;r.normalized=Lc;gc=r.offset;r.offset=bd;Ve=r.size;r.size=od;zc=r.state;r.state=Wb;Ac=r.stride;r.stride=cc;Bc=r.type;r.type=Pb;Mc=r.w;r.w=Ga;Xc=r.x;r.x=Zb;Rc=r.y;r.y=mb;Nc=r.z;r.z=yb;wa.buffer=a.positionBuffer;Lb=!1;Hb=null;Oc=0;Fc=!1;fc=Sc=0;Vc=1;id=0;fd=5126;vd=ge=Wc=kd=0;ka(wa)?(Lb=!0,Hb=O.createStream(34962,wa),fd=Hb.dtype):(Hb=O.getBuffer(wa))?
fd=Hb.dtype:"constant"in wa?(Vc=2,"number"===typeof wa.constant?(Wc=wa.constant,ge=vd=kd=0):(Wc=0<wa.constant.length?wa.constant[0]:0,ge=1<wa.constant.length?wa.constant[1]:0,vd=2<wa.constant.length?wa.constant[2]:0,kd=3<wa.constant.length?wa.constant[3]:0)):(Hb=ka(wa.buffer)?O.createStream(34962,wa.buffer):O.getBuffer(wa.buffer),fd="type"in wa?H[wa.type]:Hb.dtype,Fc=!!wa.normalized,fc=wa.size|0,Sc=wa.offset|0,id=wa.stride|0,Oc=wa.divisor|0);Ld=E.buffer;E.buffer=Hb;ue=E.divisor;E.divisor=Oc;ee=E.normalized;
E.normalized=Fc;Jd=E.offset;E.offset=Sc;Hd=E.size;E.size=fc;cd=E.state;E.state=Vc;Cc=E.stride;E.stride=id;jd=E.type;E.type=fd;gd=E.w;E.w=kd;$c=E.x;E.x=Wc;ld=E.y;E.y=ge;zd=E.z;E.z=vd;Ad=B.buffer;B.buffer=f;xe=B.divisor;B.divisor=0;Ke=B.normalized;B.normalized=!1;we=B.offset;B.offset=0;he=B.size;B.size=0;fe=B.state;B.state=1;de=B.stride;B.stride=8;pe=B.type;B.type=5126;ae=B.w;B.w=0;je=B.x;B.x=0;xc=B.y;B.y=0;Tc=B.z;B.z=0;qe=D.buffer;D.buffer=c;me=D.divisor;D.divisor=0;Id=D.normalized;D.normalized=!1;
Nd=D.offset;D.offset=4;Od=D.size;D.size=0;Pd=D.state;D.state=1;ke=D.stride;D.stride=8;Ee=D.type;D.type=5126;ye=D.w;D.w=0;oe=D.x;D.x=0;jf=D.y;D.y=0;Oe=D.z;D.z=0;ma.buffer=a.positionBuffer;Le=!1;re=null;Be=0;Fe=!1;He=Ge=0;Ce=1;Kd=0;Sd=5126;Dd=Ie=be=Yd=0;ka(ma)?(Le=!0,re=O.createStream(34962,ma),Sd=re.dtype):(re=O.getBuffer(ma))?Sd=re.dtype:"constant"in ma?(Ce=2,"number"===typeof ma.constant?(be=ma.constant,Ie=Dd=Yd=0):(be=0<ma.constant.length?ma.constant[0]:0,Ie=1<ma.constant.length?ma.constant[1]:
0,Dd=2<ma.constant.length?ma.constant[2]:0,Yd=3<ma.constant.length?ma.constant[3]:0)):(re=ka(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),Sd="type"in ma?H[ma.type]:re.dtype,Fe=!!ma.normalized,He=ma.size|0,Ge=ma.offset|0,Kd=ma.stride|0,Be=ma.divisor|0);Qd=Q.buffer;Q.buffer=re;ze=Q.divisor;Q.divisor=Be;Je=Q.normalized;Q.normalized=Fe;pf=Q.offset;Q.offset=Ge;Xe=Q.size;Q.size=He;Pe=Q.state;Q.state=Ce;Me=Q.stride;Q.stride=Kd;We=Q.type;Q.type=Sd;Te=Q.w;Q.w=Yd;Qe=Q.x;Q.x=be;Re=Q.y;Q.y=
Ie;Rd=Q.z;Q.z=Dd;k.buffer=a.positionBuffer;Vd=!1;Se=null;qf=0;hf=!1;ef=bf=0;ff=1;gf=0;nf=5126;Bf=Af=of=kf=0;ka(k)?(Vd=!0,Se=O.createStream(34962,k),nf=Se.dtype):(Se=O.getBuffer(k))?nf=Se.dtype:"constant"in k?(ff=2,"number"===typeof k.constant?(of=k.constant,Af=Bf=kf=0):(of=0<k.constant.length?k.constant[0]:0,Af=1<k.constant.length?k.constant[1]:0,Bf=2<k.constant.length?k.constant[2]:0,kf=3<k.constant.length?k.constant[3]:0)):(Se=ka(k.buffer)?O.createStream(34962,k.buffer):O.getBuffer(k.buffer),nf=
"type"in k?H[k.type]:Se.dtype,hf=!!k.normalized,ef=k.size|0,bf=k.offset|0,gf=k.stride|0,qf=k.divisor|0);Ne=A.buffer;A.buffer=Se;Ae=A.divisor;A.divisor=qf;lf=A.normalized;A.normalized=hf;mf=A.offset;A.offset=bf;Cf=A.size;A.size=ef;Ff=A.state;A.state=ff;zf=A.stride;A.stride=gf;Df=A.type;A.type=nf;Ef=A.w;A.w=kf;uf=A.x;A.x=of;vf=A.y;A.y=Af;tf=A.z;A.z=Bf;wf=Ea.vert;Ea.vert=36;xf=Ea.frag;Ea.frag=35;ta.dirty=!0;b(U,a,d);U.viewportWidth=p;U.viewportHeight=n;ha[0]=u;ha[1]=w;ha[2]=x;ha[3]=J;Ha[0]=F;Ha[1]=Y;
Ha[2]=N;Ha[3]=L;ea.blend_enable=P;nb[0]=M;nb[1]=S;pa[0]=W;pa[1]=R;pa[2]=X;pa[3]=ja;ea.cull_enable=ba;ea.cull_face=Z;ea.depth_enable=aa;ub[0]=fa;ub[1]=qa;ub[2]=ca;ub[3]=bb;ea.scissor_enable=rd;ea.stencil_enable=Fb;la&&(y.cpuTime+=performance.now()-Ua);I.offset=tc;I.count=bc;I.instances=Jc;I.primitive=ac;Pa[23]=Xb;Pa[24]=Qc;Pa[22]=Gb;Pa[31]=sa;Pa[32]=Bb;Pa[33]=Ib;Pa[10]=La;Pa[34]=ab;Pa[6]=Sb;Pa[7]=Tb;Pa[21]=ob;Pa[8]=hb;Pa[9]=lc;Pa[3]=Eb;eb&&O.destroyStream(jc);K.buffer=Ia;K.divisor=Cb;K.normalized=
Ab;K.offset=Sa;K.size=Ic;K.state=Kb;K.stride=$a;K.type=Ub;K.w=ya;K.x=Uc;K.y=Ka;K.z=Ob;gb&&O.destroyStream(ib);G.buffer=Mb;G.divisor=Pc;G.normalized=Fa;G.offset=wc;G.size=Ra;G.state=Ba;G.stride=lb;G.type=wb;G.w=Db;G.x=sb;G.y=vc;G.z=xb;tb&&O.destroyStream(sc);r.buffer=Nb;r.divisor=Qb;r.normalized=ec;r.offset=gc;r.size=Ve;r.state=zc;r.stride=Ac;r.type=Bc;r.w=Mc;r.x=Xc;r.y=Rc;r.z=Nc;Lb&&O.destroyStream(Hb);E.buffer=Ld;E.divisor=ue;E.normalized=ee;E.offset=Jd;E.size=Hd;E.state=cd;E.stride=Cc;E.type=jd;
E.w=gd;E.x=$c;E.y=ld;E.z=zd;B.buffer=Ad;B.divisor=xe;B.normalized=Ke;B.offset=we;B.size=he;B.state=fe;B.stride=de;B.type=pe;B.w=ae;B.x=je;B.y=xc;B.z=Tc;D.buffer=qe;D.divisor=me;D.normalized=Id;D.offset=Nd;D.size=Od;D.state=Pd;D.stride=ke;D.type=Ee;D.w=ye;D.x=oe;D.y=jf;D.z=Oe;Le&&O.destroyStream(re);Q.buffer=Qd;Q.divisor=ze;Q.normalized=Je;Q.offset=pf;Q.size=Xe;Q.state=Pe;Q.stride=Me;Q.type=We;Q.w=Te;Q.x=Qe;Q.y=Re;Q.z=Rd;Vd&&O.destroyStream(Se);A.buffer=Ne;A.divisor=Ae;A.normalized=lf;A.offset=mf;
A.size=Cf;A.state=Ff;A.stride=zf;A.type=Df;A.w=Ef;A.x=uf;A.y=vf;A.z=tf;Ea.vert=wf;Ea.frag=xf;ta.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(d,y,n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A){var P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Eb,Ja,oa,Oa,ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa,tb,Ha,W,nb,ga,pa;P=d.attributes;ca=d.buffer;h=d.context;e=d.current;g=d.draw;l=d.elements;R=d.extensions;Z=d.framebuffer;m=d.gl;qa=d.isBufferArgs;L=d.next;fa=d.shader;
a=d.uniforms;p=d.vao;aa=L.blend_color;la=e.blend_color;La=L.blend_equation;Eb=e.blend_equation;Ja=L.blend_func;oa=e.blend_func;Oa=L.colorMask;ba=e.colorMask;M=L.depth_range;O=e.depth_range;U=L.polygonOffset_offset;ta=e.polygonOffset_offset;I=L.sample_coverage;Vb=e.sample_coverage;ab=L.scissor_box;S=e.scissor_box;u=L.stencil_func;ka=e.stencil_func;ea=L.stencil_opBack;Ea=e.stencil_opBack;Pa=L.stencil_opFront;tb=e.stencil_opFront;Ha=L.viewport;W=e.viewport;nb={int8:5120,int16:5122,int32:5124,uint8:5121,
uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,b){var c,d,f,n,x,N;c=Z.next;c!==Z.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null),Z.cur=c);if(e.dirty){var aa,fa,Jc,Ha,F,w,ia,va,X,ha,ra,H,t,da,z,wa,ma,k,La,V,q,Jb,zb,ab,Ja,ce,le,Ed,se,md,ie,ve;aa=L.dither;aa!==e.dither&&(aa?m.enable(3024):m.disable(3024),e.dither=aa);fa=L.depth_func;fa!==e.depth_func&&(m.depthFunc(fa),e.depth_func=fa);Jc=M[0];Ha=M[1];
if(Jc!==O[0]||Ha!==O[1])m.depthRange(Jc,Ha),O[0]=Jc,O[1]=Ha;F=L.depth_mask;F!==e.depth_mask&&(m.depthMask(F),e.depth_mask=F);w=Oa[0];ia=Oa[1];va=Oa[2];X=Oa[3];if(w!==ba[0]||ia!==ba[1]||va!==ba[2]||X!==ba[3])m.colorMask(w,ia,va,X),ba[0]=w,ba[1]=ia,ba[2]=va,ba[3]=X;ha=L.cull_enable;ha!==e.cull_enable&&(ha?m.enable(2884):m.disable(2884),e.cull_enable=ha);ra=L.cull_face;ra!==e.cull_face&&(m.cullFace(ra),e.cull_face=ra);H=L.frontFace;H!==e.frontFace&&(m.frontFace(H),e.frontFace=H);t=L.lineWidth;t!==e.lineWidth&&
(m.lineWidth(t),e.lineWidth=t);da=L.polygonOffset_enable;da!==e.polygonOffset_enable&&(da?m.enable(32823):m.disable(32823),e.polygonOffset_enable=da);z=U[0];wa=U[1];if(z!==ta[0]||wa!==ta[1])m.polygonOffset(z,wa),ta[0]=z,ta[1]=wa;ma=L.sample_alpha;ma!==e.sample_alpha&&(ma?m.enable(32926):m.disable(32926),e.sample_alpha=ma);k=L.sample_enable;k!==e.sample_enable&&(k?m.enable(32928):m.disable(32928),e.sample_enable=k);La=I[0];V=I[1];if(La!==Vb[0]||V!==Vb[1])m.sampleCoverage(La,V),Vb[0]=La,Vb[1]=V;q=L.stencil_mask;
q!==e.stencil_mask&&(m.stencilMask(q),e.stencil_mask=q);Jb=u[0];zb=u[1];ab=u[2];if(Jb!==ka[0]||zb!==ka[1]||ab!==ka[2])m.stencilFunc(Jb,zb,ab),ka[0]=Jb,ka[1]=zb,ka[2]=ab;Ja=Pa[0];ce=Pa[1];le=Pa[2];Ed=Pa[3];if(Ja!==tb[0]||ce!==tb[1]||le!==tb[2]||Ed!==tb[3])m.stencilOpSeparate(Ja,ce,le,Ed),tb[0]=Ja,tb[1]=ce,tb[2]=le,tb[3]=Ed;se=ea[0];md=ea[1];ie=ea[2];ve=ea[3];if(se!==Ea[0]||md!==Ea[1]||ie!==Ea[2]||ve!==Ea[3])m.stencilOpSeparate(se,md,ie,ve),Ea[0]=se,Ea[1]=md,Ea[2]=ie,Ea[3]=ve}m.blendColor(0,0,0,0);
la[0]=0;la[1]=0;la[2]=0;la[3]=0;m.enable(3042);e.blend_enable=!0;m.blendEquationSeparate(32774,32774);Eb[0]=32774;Eb[1]=32774;m.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;m.disable(2929);e.depth_enable=!1;m.enable(3089);e.scissor_enable=!0;m.disable(2960);e.stencil_enable=!1;if(d=e.profile)f=performance.now(),y.count+=b;m.useProgram(v.program);n=R.angle_instanced_arrays;var yd;p.setVAO(null);yd=g.instances;for(x=0;x<b;++x){N=a[x];var Fd,Zd,Wd,Ye,yf,af,Bd,De,Td,Ud,ne,Xd,
nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,Gd,Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub;Fd=N.viewport;Zd=Fd.x|0;Wd=Fd.y|0;Ye="width"in Fd?Fd.width|0:h.framebufferWidth-Zd;yf="height"in Fd?Fd.height|0:h.framebufferHeight-Wd;af=h.viewportWidth;h.viewportWidth=Ye;Bd=h.viewportHeight;h.viewportHeight=yf;m.viewport(Zd,Wd,Ye,yf);W[0]=Zd;W[1]=Wd;W[2]=Ye;W[3]=yf;De=N.viewport;Td=De.x|0;Ud=
De.y|0;ne="width"in De?De.width|0:h.framebufferWidth-Td;Xd="height"in De?De.height|0:h.framebufferHeight-Ud;m.scissor(Td,Ud,ne,Xd);S[0]=Td;S[1]=Ud;S[2]=ne;S[3]=Xd;ga.buffer=N.positionBuffer;nd=!1;hd=null;wd=0;Yc=!1;nc=qd=0;sd=1;ed=0;Kc=5126;Fb=Gc=bb=qc=0;qa(ga)?(nd=!0,hd=ca.createStream(34962,ga),Kc=hd.dtype):(hd=ca.getBuffer(ga))?Kc=hd.dtype:"constant"in ga?(sd=2,"number"===typeof ga.constant?(bb=ga.constant,Gc=Fb=qc=0):(bb=0<ga.constant.length?ga.constant[0]:0,Gc=1<ga.constant.length?ga.constant[1]:
0,Fb=2<ga.constant.length?ga.constant[2]:0,qc=3<ga.constant.length?ga.constant[3]:0)):(hd=qa(ga.buffer)?ca.createStream(34962,ga.buffer):ca.getBuffer(ga.buffer),Kc="type"in ga?nb[ga.type]:hd.dtype,Yc=!!ga.normalized,nc=ga.size|0,qd=ga.offset|0,ed=ga.stride|0,wd=ga.divisor|0);oc=r.location;Ua=P[oc];if(1===sd){Ua.buffer||m.enableVertexAttribArray(oc);Hc=nc||2;if(Ua.type!==Kc||Ua.size!==Hc||Ua.buffer!==hd||Ua.normalized!==Yc||Ua.offset!==qd||Ua.stride!==ed)m.bindBuffer(34962,hd.buffer),m.vertexAttribPointer(oc,
Hc,Kc,Yc,ed,qd),Ua.type=Kc,Ua.size=Hc,Ua.buffer=hd,Ua.normalized=Yc,Ua.offset=qd,Ua.stride=ed;Ua.divisor!==wd&&(n.vertexAttribDivisorANGLE(oc,wd),Ua.divisor=wd)}else if(Ua.buffer&&(m.disableVertexAttribArray(oc),Ua.buffer=null),Ua.x!==bb||Ua.y!==Gc||Ua.z!==Fb||Ua.w!==qc)m.vertexAttrib4f(oc,bb,Gc,Fb,qc),Ua.x=bb,Ua.y=Gc,Ua.z=Fb,Ua.w=qc;pa.buffer=N.positionFractBuffer;bc=!1;rc=null;Gd=0;Cd=!1;Xb=yc=0;Dc=1;Qc=0;Ma=5126;td=sa=Xa=Gb=0;qa(pa)?(bc=!0,rc=ca.createStream(34962,pa),Ma=rc.dtype):(rc=ca.getBuffer(pa))?
Ma=rc.dtype:"constant"in pa?(Dc=2,"number"===typeof pa.constant?(Xa=pa.constant,sa=td=Gb=0):(Xa=0<pa.constant.length?pa.constant[0]:0,sa=1<pa.constant.length?pa.constant[1]:0,td=2<pa.constant.length?pa.constant[2]:0,Gb=3<pa.constant.length?pa.constant[3]:0)):(rc=qa(pa.buffer)?ca.createStream(34962,pa.buffer):ca.getBuffer(pa.buffer),Ma="type"in pa?nb[pa.type]:rc.dtype,Cd=!!pa.normalized,Xb=pa.size|0,yc=pa.offset|0,Qc=pa.stride|0,Gd=pa.divisor|0);Bb=E.location;Ta=P[Bb];if(1===Dc){Ta.buffer||m.enableVertexAttribArray(Bb);
Ib=Xb||2;if(Ta.type!==Ma||Ta.size!==Ib||Ta.buffer!==rc||Ta.normalized!==Cd||Ta.offset!==yc||Ta.stride!==Qc)m.bindBuffer(34962,rc.buffer),m.vertexAttribPointer(Bb,Ib,Ma,Cd,Qc,yc),Ta.type=Ma,Ta.size=Ib,Ta.buffer=rc,Ta.normalized=Cd,Ta.offset=yc,Ta.stride=Qc;Ta.divisor!==Gd&&(n.vertexAttribDivisorANGLE(Bb,Gd),Ta.divisor=Gd)}else if(Ta.buffer&&(m.disableVertexAttribArray(Bb),Ta.buffer=null),Ta.x!==Xa||Ta.y!==sa||Ta.z!==td||Ta.w!==Gb)m.vertexAttrib4f(Bb,Xa,sa,td,Gb),Ta.x=Xa,Ta.y=sa,Ta.z=td,Ta.w=Gb;db=
N.fill;Ec=db[0];$d=db[1];Sb=db[2];Tb=db[3];x&&Rb===Ec&&$b===$d&&pd===Sb&&Na===Tb||(Rb=Ec,$b=$d,pd=Sb,Na=Tb,m.uniform4f(T.location,Ec,$d,Sb,Tb));ob=N.scale;vb=ob[0];Qa=ob[1];x&&hb===vb&&lc===Qa||(hb=vb,lc=Qa,m.uniform2f(B.location,vb,Qa));Yb=N.scaleFract;Zc=Yb[0];jc=Yb[1];x&&eb===Zc&&dd===jc||(eb=Zc,dd=jc,m.uniform2f(D.location,Zc,jc));hc=N.translate;jb=hc[0];ua=hc[1];x&&kb===jb&&pb===ua||(kb=jb,pb=ua,m.uniform2f(Q.location,jb,ua));xa=N.translateFract;Va=xa[0];Aa=xa[1];x&&cb===Va&&fb===Aa||(cb=Va,
fb=Aa,m.uniform2f(A.location,Va,Aa));Ia=N.id;x&&Cb===Ia||(Cb=Ia,m.uniform1f(K.location,Ia));Ab=N.opacity;x&&Sa===Ab||(Sa=Ab,m.uniform1f(G.location,Ab));Ic=C.call(this,h,N,x);Kb=null;(Kb=($a=qa(Ic))?l.createStream(Ic):l.getElements(Ic))&&m.bindBuffer(34963,Kb.buffer.buffer);if(Ub=Kb?Kb.vertCount:-1)0<yd?Kb?n.drawElementsInstancedANGLE(4,Ub,Kb.type,0<<(Kb.type-5121>>1),yd):n.drawArraysInstancedANGLE(4,0,Ub,yd):0>yd&&(Kb?m.drawElements(4,Ub,Kb.type,0<<(Kb.type-5121>>1)):m.drawArrays(4,0,Ub)),h.viewportWidth=
af,h.viewportHeight=Bd,nd&&ca.destroyStream(hd),bc&&ca.destroyStream(rc),$a&&l.destroyStream(Kb)}e.dirty=!0;p.setVAO(null);d&&(y.cpuTime+=performance.now()-f)},draw:function(a){var b,c,d,f,x,v,C,aa,fa,na,Ha,F,w,ia,va,X,ha,ra,H,t,da,z;b=Z.next;b!==Z.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),Z.cur=b);if(e.dirty){b=L.dither;b!==e.dither&&(b?m.enable(3024):m.disable(3024),e.dither=b);b=L.depth_func;b!==e.depth_func&&(m.depthFunc(b),e.depth_func=b);b=M[0];v=M[1];if(b!==
O[0]||v!==O[1])m.depthRange(b,v),O[0]=b,O[1]=v;b=L.depth_mask;b!==e.depth_mask&&(m.depthMask(b),e.depth_mask=b);b=Oa[0];v=Oa[1];c=Oa[2];d=Oa[3];if(b!==ba[0]||v!==ba[1]||c!==ba[2]||d!==ba[3])m.colorMask(b,v,c,d),ba[0]=b,ba[1]=v,ba[2]=c,ba[3]=d;b=L.cull_enable;b!==e.cull_enable&&(b?m.enable(2884):m.disable(2884),e.cull_enable=b);b=L.cull_face;b!==e.cull_face&&(m.cullFace(b),e.cull_face=b);b=L.frontFace;b!==e.frontFace&&(m.frontFace(b),e.frontFace=b);b=L.lineWidth;b!==e.lineWidth&&(m.lineWidth(b),e.lineWidth=
b);b=L.polygonOffset_enable;b!==e.polygonOffset_enable&&(b?m.enable(32823):m.disable(32823),e.polygonOffset_enable=b);b=U[0];v=U[1];if(b!==ta[0]||v!==ta[1])m.polygonOffset(b,v),ta[0]=b,ta[1]=v;b=L.sample_alpha;b!==e.sample_alpha&&(b?m.enable(32926):m.disable(32926),e.sample_alpha=b);b=L.sample_enable;b!==e.sample_enable&&(b?m.enable(32928):m.disable(32928),e.sample_enable=b);b=I[0];v=I[1];if(b!==Vb[0]||v!==Vb[1])m.sampleCoverage(b,v),Vb[0]=b,Vb[1]=v;b=L.stencil_mask;b!==e.stencil_mask&&(m.stencilMask(b),
e.stencil_mask=b);b=u[0];v=u[1];c=u[2];if(b!==ka[0]||v!==ka[1]||c!==ka[2])m.stencilFunc(b,v,c),ka[0]=b,ka[1]=v,ka[2]=c;b=Pa[0];v=Pa[1];c=Pa[2];d=Pa[3];if(b!==tb[0]||v!==tb[1]||c!==tb[2]||d!==tb[3])m.stencilOpSeparate(b,v,c,d),tb[0]=b,tb[1]=v,tb[2]=c,tb[3]=d;b=ea[0];v=ea[1];c=ea[2];d=ea[3];if(b!==Ea[0]||v!==Ea[1]||c!==Ea[2]||d!==Ea[3])m.stencilOpSeparate(b,v,c,d),Ea[0]=b,Ea[1]=v,Ea[2]=c,Ea[3]=d}b=a.viewport;c=b.x|0;d=b.y|0;f="width"in b?b.width|0:h.framebufferWidth-c;x="height"in b?b.height|0:h.framebufferHeight-
d;b=h.viewportWidth;h.viewportWidth=f;v=h.viewportHeight;h.viewportHeight=x;m.viewport(c,d,f,x);W[0]=c;W[1]=d;W[2]=f;W[3]=x;m.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;m.enable(3042);e.blend_enable=!0;m.blendEquationSeparate(32774,32774);Eb[0]=32774;Eb[1]=32774;m.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;m.disable(2929);e.depth_enable=!1;x=a.viewport;c=x.x|0;d=x.y|0;f="width"in x?x.width|0:h.framebufferWidth-c;x="height"in x?x.height|0:h.framebufferHeight-d;
m.scissor(c,d,f,x);S[0]=c;S[1]=d;S[2]=f;S[3]=x;m.enable(3089);e.scissor_enable=!0;m.disable(2960);e.stencil_enable=!1;if(c=e.profile)C=performance.now(),y.count++;m.useProgram(n.program);d=R.angle_instanced_arrays;p.setVAO(null);ga.buffer=a.positionBuffer;f=!1;aa=0;fa=!1;Ha=na=0;F=1;w=0;ia=5126;ra=ha=X=va=0;qa(ga)?(f=!0,x=ca.createStream(34962,ga),ia=x.dtype):(x=ca.getBuffer(ga))?ia=x.dtype:"constant"in ga?(F=2,"number"===typeof ga.constant?(X=ga.constant,ha=ra=va=0):(X=0<ga.constant.length?ga.constant[0]:
0,ha=1<ga.constant.length?ga.constant[1]:0,ra=2<ga.constant.length?ga.constant[2]:0,va=3<ga.constant.length?ga.constant[3]:0)):(x=qa(ga.buffer)?ca.createStream(34962,ga.buffer):ca.getBuffer(ga.buffer),ia="type"in ga?nb[ga.type]:x.dtype,fa=!!ga.normalized,Ha=ga.size|0,na=ga.offset|0,w=ga.stride|0,aa=ga.divisor|0);H=r.location;t=P[H];if(1===F){t.buffer||m.enableVertexAttribArray(H);Ha=Ha||2;if(t.type!==ia||t.size!==Ha||t.buffer!==x||t.normalized!==fa||t.offset!==na||t.stride!==w)m.bindBuffer(34962,
x.buffer),m.vertexAttribPointer(H,Ha,ia,fa,w,na),t.type=ia,t.size=Ha,t.buffer=x,t.normalized=fa,t.offset=na,t.stride=w;t.divisor!==aa&&(d.vertexAttribDivisorANGLE(H,aa),t.divisor=aa)}else if(t.buffer&&(m.disableVertexAttribArray(H),t.buffer=null),t.x!==X||t.y!==ha||t.z!==ra||t.w!==va)m.vertexAttrib4f(H,X,ha,ra,va),t.x=X,t.y=ha,t.z=ra,t.w=va;pa.buffer=a.positionFractBuffer;aa=!1;na=0;w=!1;va=ia=0;X=1;H=0;t=5126;z=da=ra=ha=0;qa(pa)?(aa=!0,fa=ca.createStream(34962,pa),t=fa.dtype):(fa=ca.getBuffer(pa))?
t=fa.dtype:"constant"in pa?(X=2,"number"===typeof pa.constant?(ra=pa.constant,da=z=ha=0):(ra=0<pa.constant.length?pa.constant[0]:0,da=1<pa.constant.length?pa.constant[1]:0,z=2<pa.constant.length?pa.constant[2]:0,ha=3<pa.constant.length?pa.constant[3]:0)):(fa=qa(pa.buffer)?ca.createStream(34962,pa.buffer):ca.getBuffer(pa.buffer),t="type"in pa?nb[pa.type]:fa.dtype,w=!!pa.normalized,va=pa.size|0,ia=pa.offset|0,H=pa.stride|0,na=pa.divisor|0);Ha=E.location;F=P[Ha];if(1===X){F.buffer||m.enableVertexAttribArray(Ha);
va=va||2;if(F.type!==t||F.size!==va||F.buffer!==fa||F.normalized!==w||F.offset!==ia||F.stride!==H)m.bindBuffer(34962,fa.buffer),m.vertexAttribPointer(Ha,va,t,w,H,ia),F.type=t,F.size=va,F.buffer=fa,F.normalized=w,F.offset=ia,F.stride=H;F.divisor!==na&&(d.vertexAttribDivisorANGLE(Ha,na),F.divisor=na)}else if(F.buffer&&(m.disableVertexAttribArray(Ha),F.buffer=null),F.x!==ra||F.y!==da||F.z!==z||F.w!==ha)m.vertexAttrib4f(Ha,ra,da,z,ha),F.x=ra,F.y=da,F.z=z,F.w=ha;na=a.fill;m.uniform4f(T.location,na[0],
na[1],na[2],na[3]);na=a.scale;m.uniform2f(B.location,na[0],na[1]);na=a.scaleFract;m.uniform2f(D.location,na[0],na[1]);na=a.translate;m.uniform2f(Q.location,na[0],na[1]);na=a.translateFract;m.uniform2f(A.location,na[0],na[1]);m.uniform1f(K.location,a.id);m.uniform1f(G.location,a.opacity);na=N.call(this,h,a,0);(na=(a=qa(na))?l.createStream(na):l.getElements(na))&&m.bindBuffer(34963,na.buffer.buffer);if(w=na?na.vertCount:-1)ia=g.instances,0<ia?na?d.drawElementsInstancedANGLE(4,w,na.type,0<<(na.type-
5121>>1),ia):d.drawArraysInstancedANGLE(4,0,w,ia):0>ia&&(na?m.drawElements(4,w,na.type,0<<(na.type-5121>>1)):m.drawArrays(4,0,w)),e.dirty=!0,p.setVAO(null),h.viewportWidth=b,h.viewportHeight=v,c&&(y.cpuTime+=performance.now()-C),f&&ca.destroyStream(x),aa&&ca.destroyStream(fa),a&&l.destroyStream(na)},scope:function(d,m,p){var n,u,r,v,A,B,N,D,E,F,w,G,O,K,C,P,H,t,da,z,M,S,k,I,V,q,Q,T,W,U,R,ba,Z,ea,na,ka,ta,la,oa,Ea,Pa,Oa,Eb,Vb,Bd,tb,Td,Ud,ne,Xd,nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,Gd,
Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab;n=d.viewport;u=n.x|0;r=n.y|0;v="width"in n?n.width|0:h.framebufferWidth-u;A="height"in n?n.height|0:h.framebufferHeight-r;B=h.viewportWidth;h.viewportWidth=v;N=h.viewportHeight;h.viewportHeight=A;D=Ha[0];Ha[0]=u;E=Ha[1];Ha[1]=r;F=Ha[2];Ha[2]=v;w=Ha[3];Ha[3]=A;G=aa[0];aa[0]=0;O=aa[1];aa[1]=0;K=aa[2];aa[2]=0;C=aa[3];aa[3]=0;P=L.blend_enable;L.blend_enable=!0;H=La[0];
La[0]=32774;t=La[1];La[1]=32774;da=Ja[0];Ja[0]=770;z=Ja[1];Ja[1]=771;M=Ja[2];Ja[2]=773;S=Ja[3];Ja[3]=1;k=L.depth_enable;L.depth_enable=!1;I=d.viewport;V=I.x|0;q=I.y|0;Q="width"in I?I.width|0:h.framebufferWidth-V;T="height"in I?I.height|0:h.framebufferHeight-q;W=ab[0];ab[0]=V;U=ab[1];ab[1]=q;R=ab[2];ab[2]=Q;ba=ab[3];ab[3]=T;Z=L.scissor_enable;L.scissor_enable=!0;ea=L.stencil_enable;L.stencil_enable=!1;if(na=e.profile)ka=performance.now(),y.count++;ta=f.call(this,h,d,p);la=null;la=(oa=qa(ta))?l.createStream(ta):
l.getElements(ta);Ea=g.elements;g.elements=la;Pa=g.offset;g.offset=0;Oa=la?la.vertCount:-1;Eb=g.count;g.count=Oa;Vb=g.primitive;g.primitive=4;Bd=d.fill;tb=a[14];a[14]=Bd;Td=d.id;Ud=a[31];a[31]=Td;ne=d.opacity;Xd=a[10];a[10]=ne;nd=h.pixelRatio;hd=a[34];a[34]=nd;wd=d.scale;Yc=a[6];a[6]=wd;qd=d.scaleFract;nc=a[7];a[7]=qd;sd=d.translate;ed=a[8];a[8]=sd;Kc=d.translateFract;qc=a[9];a[9]=Kc;bb=c.call(this,h,d,p);Gc=a[3];a[3]=bb;ga.buffer=d.positionBuffer;Fb=!1;oc=null;Ua=0;Hc=!1;rc=bc=0;Gd=1;Cd=0;yc=5126;
Ma=Qc=Dc=Xb=0;qa(ga)?(Fb=!0,oc=ca.createStream(34962,ga),yc=oc.dtype):(oc=ca.getBuffer(ga))?yc=oc.dtype:"constant"in ga?(Gd=2,"number"===typeof ga.constant?(Dc=ga.constant,Qc=Ma=Xb=0):(Dc=0<ga.constant.length?ga.constant[0]:0,Qc=1<ga.constant.length?ga.constant[1]:0,Ma=2<ga.constant.length?ga.constant[2]:0,Xb=3<ga.constant.length?ga.constant[3]:0)):(oc=qa(ga.buffer)?ca.createStream(34962,ga.buffer):ca.getBuffer(ga.buffer),yc="type"in ga?nb[ga.type]:oc.dtype,Hc=!!ga.normalized,rc=ga.size|0,bc=ga.offset|
0,Cd=ga.stride|0,Ua=ga.divisor|0);Gb=x.buffer;x.buffer=oc;Xa=x.divisor;x.divisor=Ua;sa=x.normalized;x.normalized=Hc;td=x.offset;x.offset=bc;Bb=x.size;x.size=rc;Ta=x.state;x.state=Gd;Ib=x.stride;x.stride=Cd;db=x.type;x.type=yc;Ec=x.w;x.w=Xb;Rb=x.x;x.x=Dc;$d=x.y;x.y=Qc;$b=x.z;x.z=Ma;pa.buffer=d.positionFractBuffer;Sb=!1;pd=null;Tb=0;Na=!1;vb=ob=0;hb=1;Qa=0;lc=5126;jc=eb=Zc=Yb=0;qa(pa)?(Sb=!0,pd=ca.createStream(34962,pa),lc=pd.dtype):(pd=ca.getBuffer(pa))?lc=pd.dtype:"constant"in pa?(hb=2,"number"===
typeof pa.constant?(Zc=pa.constant,eb=jc=Yb=0):(Zc=0<pa.constant.length?pa.constant[0]:0,eb=1<pa.constant.length?pa.constant[1]:0,jc=2<pa.constant.length?pa.constant[2]:0,Yb=3<pa.constant.length?pa.constant[3]:0)):(pd=qa(pa.buffer)?ca.createStream(34962,pa.buffer):ca.getBuffer(pa.buffer),lc="type"in pa?nb[pa.type]:pd.dtype,Na=!!pa.normalized,vb=pa.size|0,ob=pa.offset|0,Qa=pa.stride|0,Tb=pa.divisor|0);dd=b.buffer;b.buffer=pd;hc=b.divisor;b.divisor=Tb;jb=b.normalized;b.normalized=Na;kb=b.offset;b.offset=
ob;ua=b.size;b.size=vb;pb=b.state;b.state=hb;xa=b.stride;b.stride=Qa;Va=b.type;b.type=lc;cb=b.w;b.w=Yb;Aa=b.x;b.x=Zc;fb=b.y;b.y=eb;Ia=b.z;b.z=jc;Cb=fa.vert;fa.vert=42;Ab=fa.frag;fa.frag=41;e.dirty=!0;m(h,d,p);h.viewportWidth=B;h.viewportHeight=N;Ha[0]=D;Ha[1]=E;Ha[2]=F;Ha[3]=w;aa[0]=G;aa[1]=O;aa[2]=K;aa[3]=C;L.blend_enable=P;La[0]=H;La[1]=t;Ja[0]=da;Ja[1]=z;Ja[2]=M;Ja[3]=S;L.depth_enable=k;ab[0]=W;ab[1]=U;ab[2]=R;ab[3]=ba;L.scissor_enable=Z;L.stencil_enable=ea;na&&(y.cpuTime+=performance.now()-ka);
oa&&l.destroyStream(la);g.elements=Ea;g.offset=Pa;g.count=Eb;g.primitive=Vb;a[14]=tb;a[31]=Ud;a[10]=Xd;a[34]=hd;a[6]=Yc;a[7]=nc;a[8]=ed;a[9]=qc;a[3]=Gc;Fb&&ca.destroyStream(oc);x.buffer=Gb;x.divisor=Xa;x.normalized=sa;x.offset=td;x.size=Bb;x.state=Ta;x.stride=Ib;x.type=db;x.w=Ec;x.x=Rb;x.y=$d;x.z=$b;Sb&&ca.destroyStream(pd);b.buffer=dd;b.divisor=hc;b.normalized=jb;b.offset=kb;b.size=ua;b.state=pb;b.stride=xa;b.type=Va;b.w=cb;b.x=Aa;b.y=fb;b.z=Ia;fa.vert=Cb;fa.frag=Ab;e.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,
y,n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Ja,Ld,oa,Oa,ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa,tb,Ha,W,nb,ga,pa,ac,pc,ic,rd,tc){var Y,J,ja,Ca,ub,Jc,Uc,F,w,ia,va,X,ha,ra,H,t,da,z,wa,ma,k,mc,V,q,Jb,zb,Ue,te,ce,le,Ed,se,md,ie,ve,yd,Fd,Zd,Wd;Y=d.attributes;J=d.buffer;ja=d.context;Ca=d.current;ub=d.draw;Jc=d.elements;Uc=d.extensions;F=d.framebuffer;w=d.gl;ia=d.isBufferArgs;va=d.next;X=d.shader;ha=d.uniforms;ra=d.vao;H=va.blend_color;t=Ca.blend_color;da=va.blend_equation;z=
Ca.blend_equation;wa=va.blend_func;ma=Ca.blend_func;k=va.colorMask;mc=Ca.colorMask;V=va.depth_range;q=Ca.depth_range;Jb=va.polygonOffset_offset;zb=Ca.polygonOffset_offset;Ue=va.sample_coverage;te=Ca.sample_coverage;ce=va.scissor_box;le=Ca.scissor_box;Ed=va.stencil_func;se=Ca.stencil_func;md=va.stencil_opBack;ie=Ca.stencil_opBack;ve=va.stencil_opFront;yd=Ca.stencil_opFront;Fd=va.viewport;Zd=Ca.viewport;Wd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,b){var c,d,e,g,f,h;c=F.next;c!==F.cur&&(c?w.bindFramebuffer(36160,c.framebuffer):w.bindFramebuffer(36160,null),F.cur=c);if(Ca.dirty){var l,m,p,n,r,v,x,A,B,N,H,D,E,G,L,K,C,P,Q,T,R,X,ha,Z,aa,na,fa,ca,sa,wa,qa,Ta,Ib,db;l=va.dither;l!==Ca.dither&&(l?w.enable(3024):w.disable(3024),Ca.dither=l);m=da[0];p=da[1];if(m!==z[0]||p!==z[1])w.blendEquationSeparate(m,p),z[0]=m,z[1]=p;n=va.depth_func;n!==Ca.depth_func&&(w.depthFunc(n),Ca.depth_func=n);r=V[0];v=V[1];if(r!==q[0]||v!==q[1])w.depthRange(r,
v),q[0]=r,q[1]=v;x=va.depth_mask;x!==Ca.depth_mask&&(w.depthMask(x),Ca.depth_mask=x);A=k[0];B=k[1];N=k[2];H=k[3];if(A!==mc[0]||B!==mc[1]||N!==mc[2]||H!==mc[3])w.colorMask(A,B,N,H),mc[0]=A,mc[1]=B,mc[2]=N,mc[3]=H;D=va.cull_enable;D!==Ca.cull_enable&&(D?w.enable(2884):w.disable(2884),Ca.cull_enable=D);E=va.cull_face;E!==Ca.cull_face&&(w.cullFace(E),Ca.cull_face=E);G=va.frontFace;G!==Ca.frontFace&&(w.frontFace(G),Ca.frontFace=G);L=va.lineWidth;L!==Ca.lineWidth&&(w.lineWidth(L),Ca.lineWidth=L);K=va.polygonOffset_enable;
K!==Ca.polygonOffset_enable&&(K?w.enable(32823):w.disable(32823),Ca.polygonOffset_enable=K);C=Jb[0];P=Jb[1];if(C!==zb[0]||P!==zb[1])w.polygonOffset(C,P),zb[0]=C,zb[1]=P;Q=va.sample_alpha;Q!==Ca.sample_alpha&&(Q?w.enable(32926):w.disable(32926),Ca.sample_alpha=Q);T=va.sample_enable;T!==Ca.sample_enable&&(T?w.enable(32928):w.disable(32928),Ca.sample_enable=T);R=Ue[0];X=Ue[1];if(R!==te[0]||X!==te[1])w.sampleCoverage(R,X),te[0]=R,te[1]=X;ha=va.stencil_mask;ha!==Ca.stencil_mask&&(w.stencilMask(ha),Ca.stencil_mask=
ha);Z=Ed[0];aa=Ed[1];na=Ed[2];if(Z!==se[0]||aa!==se[1]||na!==se[2])w.stencilFunc(Z,aa,na),se[0]=Z,se[1]=aa,se[2]=na;fa=ve[0];ca=ve[1];sa=ve[2];wa=ve[3];if(fa!==yd[0]||ca!==yd[1]||sa!==yd[2]||wa!==yd[3])w.stencilOpSeparate(fa,ca,sa,wa),yd[0]=fa,yd[1]=ca,yd[2]=sa,yd[3]=wa;qa=md[0];Ta=md[1];Ib=md[2];db=md[3];if(qa!==ie[0]||Ta!==ie[1]||Ib!==ie[2]||db!==ie[3])w.stencilOpSeparate(qa,Ta,Ib,db),ie[0]=qa,ie[1]=Ta,ie[2]=Ib,ie[3]=db}w.blendColor(0,0,0,1);t[0]=0;t[1]=0;t[2]=0;t[3]=1;w.enable(3042);Ca.blend_enable=
!0;w.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;w.disable(2929);Ca.depth_enable=!1;w.enable(3089);Ca.scissor_enable=!0;w.disable(2960);Ca.stencil_enable=!1;if(d=Ca.profile)e=performance.now(),y.count+=b;w.useProgram(la.program);g=Uc.angle_instanced_arrays;var Ec;ra.setVAO(null);w.uniform1i(u.location,!1);w.uniform1i(tb.location,ta.bind());Ec=ub.instances;for(f=0;f<b;++f){h=a[f];var Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,
Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,Fd,vd,ce,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,jf,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,pf,Xe,Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,ge,hf,bf,ef,ff,gf,nf,kf,of,Af,Bf,Ne,Ae,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,
sf,bg,Qf,Rf;Rb=h.viewport;$d=Rb.x|0;$b=Rb.y|0;Sb="width"in Rb?Rb.width|0:ja.framebufferWidth-$d;pd="height"in Rb?Rb.height|0:ja.framebufferHeight-$b;Tb=ja.viewportWidth;ja.viewportWidth=Sb;Na=ja.viewportHeight;ja.viewportHeight=pd;w.viewport($d,$b,Sb,pd);Zd[0]=$d;Zd[1]=$b;Zd[2]=Sb;Zd[3]=pd;ob=h.viewport;vb=ob.x|0;hb=ob.y|0;Qa="width"in ob?ob.width|0:ja.framebufferWidth-vb;lc="height"in ob?ob.height|0:ja.framebufferHeight-hb;w.scissor(vb,hb,Qa,lc);le[0]=vb;le[1]=hb;le[2]=Qa;le[3]=lc;Yb=La.call(this,
ja,h,f);Zc=!1;eb=null;jc=0;dd=!1;jb=hc=0;kb=1;ua=0;pb=5126;Aa=cb=Va=xa=0;ia(Yb)?(Zc=!0,eb=J.createStream(34962,Yb),pb=eb.dtype):(eb=J.getBuffer(Yb))?pb=eb.dtype:"constant"in Yb?(kb=2,"number"===typeof Yb.constant?(Va=Yb.constant,cb=Aa=xa=0):(Va=0<Yb.constant.length?Yb.constant[0]:0,cb=1<Yb.constant.length?Yb.constant[1]:0,Aa=2<Yb.constant.length?Yb.constant[2]:0,xa=3<Yb.constant.length?Yb.constant[3]:0)):(eb=ia(Yb.buffer)?J.createStream(34962,Yb.buffer):J.getBuffer(Yb.buffer),pb="type"in Yb?Wd[Yb.type]:
eb.dtype,dd=!!Yb.normalized,jb=Yb.size|0,hc=Yb.offset|0,ua=Yb.stride|0,jc=Yb.divisor|0);fb=pc.location;Ia=Y[fb];if(1===kb){Ia.buffer||w.enableVertexAttribArray(fb);Cb=jb||1;if(Ia.type!==pb||Ia.size!==Cb||Ia.buffer!==eb||Ia.normalized!==dd||Ia.offset!==hc||Ia.stride!==ua)w.bindBuffer(34962,eb.buffer),w.vertexAttribPointer(fb,Cb,pb,dd,ua,hc),Ia.type=pb,Ia.size=Cb,Ia.buffer=eb,Ia.normalized=dd,Ia.offset=hc,Ia.stride=ua;Ia.divisor!==jc&&(g.vertexAttribDivisorANGLE(fb,jc),Ia.divisor=jc)}else if(Ia.buffer&&
(w.disableVertexAttribArray(fb),Ia.buffer=null),Ia.x!==Va||Ia.y!==cb||Ia.z!==Aa||Ia.w!==xa)w.vertexAttrib4f(fb,Va,cb,Aa,xa),Ia.x=Va,Ia.y=cb,Ia.z=Aa,Ia.w=xa;Ab=Ja.call(this,ja,h,f);Sa=!1;Ic=null;Kb=0;$a=!1;ya=Ub=0;ud=1;Ka=0;Ob=5126;dc=za=ib=gb=0;ia(Ab)?(Sa=!0,Ic=J.createStream(34962,Ab),Ob=Ic.dtype):(Ic=J.getBuffer(Ab))?Ob=Ic.dtype:"constant"in Ab?(ud=2,"number"===typeof Ab.constant?(ib=Ab.constant,za=dc=gb=0):(ib=0<Ab.constant.length?Ab.constant[0]:0,za=1<Ab.constant.length?Ab.constant[1]:0,dc=2<
Ab.constant.length?Ab.constant[2]:0,gb=3<Ab.constant.length?Ab.constant[3]:0)):(Ic=ia(Ab.buffer)?J.createStream(34962,Ab.buffer):J.getBuffer(Ab.buffer),Ob="type"in Ab?Wd[Ab.type]:Ic.dtype,$a=!!Ab.normalized,ya=Ab.size|0,Ub=Ab.offset|0,Ka=Ab.stride|0,Kb=Ab.divisor|0);Da=rd.location;qb=Y[Da];if(1===ud){qb.buffer||w.enableVertexAttribArray(Da);rb=ya||1;if(qb.type!==Ob||qb.size!==rb||qb.buffer!==Ic||qb.normalized!==$a||qb.offset!==Ub||qb.stride!==Ka)w.bindBuffer(34962,Ic.buffer),w.vertexAttribPointer(Da,
rb,Ob,$a,Ka,Ub),qb.type=Ob,qb.size=rb,qb.buffer=Ic,qb.normalized=$a,qb.offset=Ub,qb.stride=Ka;qb.divisor!==Kb&&(g.vertexAttribDivisorANGLE(Da,Kb),qb.divisor=Kb)}else if(qb.buffer&&(w.disableVertexAttribArray(Da),qb.buffer=null),qb.x!==ib||qb.y!==za||qb.z!==dc||qb.w!==gb)w.vertexAttrib4f(Da,ib,za,dc,gb),qb.x=ib,qb.y=za,qb.z=dc,qb.w=gb;Ya=Ld.call(this,ja,h,f);Za=!1;kc=null;ad=0;uc=!1;Mb=Wa=0;Pc=1;Fa=0;wc=5126;wb=lb=Ba=Ra=0;ia(Ya)?(Za=!0,kc=J.createStream(34962,Ya),wc=kc.dtype):(kc=J.getBuffer(Ya))?
wc=kc.dtype:"constant"in Ya?(Pc=2,"number"===typeof Ya.constant?(Ba=Ya.constant,lb=wb=Ra=0):(Ba=0<Ya.constant.length?Ya.constant[0]:0,lb=1<Ya.constant.length?Ya.constant[1]:0,wb=2<Ya.constant.length?Ya.constant[2]:0,Ra=3<Ya.constant.length?Ya.constant[3]:0)):(kc=ia(Ya.buffer)?J.createStream(34962,Ya.buffer):J.getBuffer(Ya.buffer),wc="type"in Ya?Wd[Ya.type]:kc.dtype,uc=!!Ya.normalized,Mb=Ya.size|0,Wa=Ya.offset|0,Fa=Ya.stride|0,ad=Ya.divisor|0);Db=ic.location;sb=Y[Db];if(1===Pc){sb.buffer||w.enableVertexAttribArray(Db);
vc=Mb||1;if(sb.type!==wc||sb.size!==vc||sb.buffer!==kc||sb.normalized!==uc||sb.offset!==Wa||sb.stride!==Fa)w.bindBuffer(34962,kc.buffer),w.vertexAttribPointer(Db,vc,wc,uc,Fa,Wa),sb.type=wc,sb.size=vc,sb.buffer=kc,sb.normalized=uc,sb.offset=Wa,sb.stride=Fa;sb.divisor!==ad&&(g.vertexAttribDivisorANGLE(Db,ad),sb.divisor=ad)}else if(sb.buffer&&(w.disableVertexAttribArray(Db),sb.buffer=null),sb.x!==Ba||sb.y!==lb||sb.z!==wb||sb.w!==Ra)w.vertexAttrib4f(Db,Ba,lb,wb,Ra),sb.x=Ba,sb.y=lb,sb.z=wb,sb.w=Ra;xb=
oa.call(this,ja,h,f);xd=!1;sc=null;Md=0;Lc=!1;od=bd=0;Wb=1;cc=0;Pb=5126;yb=mb=Zb=Ga=0;ia(xb)?(xd=!0,sc=J.createStream(34962,xb),Pb=sc.dtype):(sc=J.getBuffer(xb))?Pb=sc.dtype:"constant"in xb?(Wb=2,"number"===typeof xb.constant?(Zb=xb.constant,mb=yb=Ga=0):(Zb=0<xb.constant.length?xb.constant[0]:0,mb=1<xb.constant.length?xb.constant[1]:0,yb=2<xb.constant.length?xb.constant[2]:0,Ga=3<xb.constant.length?xb.constant[3]:0)):(sc=ia(xb.buffer)?J.createStream(34962,xb.buffer):J.getBuffer(xb.buffer),Pb="type"in
xb?Wd[xb.type]:sc.dtype,Lc=!!xb.normalized,od=xb.size|0,bd=xb.offset|0,cc=xb.stride|0,Md=xb.divisor|0);Nb=tc.location;Qb=Y[Nb];if(1===Wb){Qb.buffer||w.enableVertexAttribArray(Nb);ec=od||1;if(Qb.type!==Pb||Qb.size!==ec||Qb.buffer!==sc||Qb.normalized!==Lc||Qb.offset!==bd||Qb.stride!==cc)w.bindBuffer(34962,sc.buffer),w.vertexAttribPointer(Nb,ec,Pb,Lc,cc,bd),Qb.type=Pb,Qb.size=ec,Qb.buffer=sc,Qb.normalized=Lc,Qb.offset=bd,Qb.stride=cc;Qb.divisor!==Md&&(g.vertexAttribDivisorANGLE(Nb,Md),Qb.divisor=Md)}else if(Qb.buffer&&
(w.disableVertexAttribArray(Nb),Qb.buffer=null),Qb.x!==Zb||Qb.y!==mb||Qb.z!==yb||Qb.w!==Ga)w.vertexAttrib4f(Nb,Zb,mb,yb,Ga),Qb.x=Zb,Qb.y=mb,Qb.z=yb,Qb.w=Ga;gc=Oa.call(this,ja,h,f);Ve=!1;zc=null;Ac=0;Bc=!1;Xc=Mc=0;Rc=1;Nc=0;Lb=5126;Sc=Fc=Oc=Hb=0;ia(gc)?(Ve=!0,zc=J.createStream(34962,gc),Lb=zc.dtype):(zc=J.getBuffer(gc))?Lb=zc.dtype:"constant"in gc?(Rc=2,"number"===typeof gc.constant?(Oc=gc.constant,Fc=Sc=Hb=0):(Oc=0<gc.constant.length?gc.constant[0]:0,Fc=1<gc.constant.length?gc.constant[1]:0,Sc=2<
gc.constant.length?gc.constant[2]:0,Hb=3<gc.constant.length?gc.constant[3]:0)):(zc=ia(gc.buffer)?J.createStream(34962,gc.buffer):J.getBuffer(gc.buffer),Lb="type"in gc?Wd[gc.type]:zc.dtype,Bc=!!gc.normalized,Xc=gc.size|0,Mc=gc.offset|0,Nc=gc.stride|0,Ac=gc.divisor|0);fc=ga.location;Vc=Y[fc];if(1===Rc){Vc.buffer||w.enableVertexAttribArray(fc);id=Xc||1;if(Vc.type!==Lb||Vc.size!==id||Vc.buffer!==zc||Vc.normalized!==Bc||Vc.offset!==Mc||Vc.stride!==Nc)w.bindBuffer(34962,zc.buffer),w.vertexAttribPointer(fc,
id,Lb,Bc,Nc,Mc),Vc.type=Lb,Vc.size=id,Vc.buffer=zc,Vc.normalized=Bc,Vc.offset=Mc,Vc.stride=Nc;Vc.divisor!==Ac&&(g.vertexAttribDivisorANGLE(fc,Ac),Vc.divisor=Ac)}else if(Vc.buffer&&(w.disableVertexAttribArray(fc),Vc.buffer=null),Vc.x!==Oc||Vc.y!==Fc||Vc.z!==Sc||Vc.w!==Hb)w.vertexAttrib4f(fc,Oc,Fc,Sc,Hb),Vc.x=Oc,Vc.y=Fc,Vc.z=Sc,Vc.w=Hb;fd=ba.call(this,ja,h,f);kd=!1;Wc=null;Fd=0;vd=!1;ue=ce=0;ee=1;Jd=0;Hd=5126;gd=jd=Cc=cd=0;ia(fd)?(kd=!0,Wc=J.createStream(34962,fd),Hd=Wc.dtype):(Wc=J.getBuffer(fd))?
Hd=Wc.dtype:"constant"in fd?(ee=2,"number"===typeof fd.constant?(Cc=fd.constant,jd=gd=cd=0):(Cc=0<fd.constant.length?fd.constant[0]:0,jd=1<fd.constant.length?fd.constant[1]:0,gd=2<fd.constant.length?fd.constant[2]:0,cd=3<fd.constant.length?fd.constant[3]:0)):(Wc=ia(fd.buffer)?J.createStream(34962,fd.buffer):J.getBuffer(fd.buffer),Hd="type"in fd?Wd[fd.type]:Wc.dtype,vd=!!fd.normalized,ue=fd.size|0,ce=fd.offset|0,Jd=fd.stride|0,Fd=fd.divisor|0);$c=ab.location;ld=Y[$c];if(1===ee){ld.buffer||w.enableVertexAttribArray($c);
zd=ue||1;if(ld.type!==Hd||ld.size!==zd||ld.buffer!==Wc||ld.normalized!==vd||ld.offset!==ce||ld.stride!==Jd)w.bindBuffer(34962,Wc.buffer),w.vertexAttribPointer($c,zd,Hd,vd,Jd,ce),ld.type=Hd,ld.size=zd,ld.buffer=Wc,ld.normalized=vd,ld.offset=ce,ld.stride=Jd;ld.divisor!==Fd&&(g.vertexAttribDivisorANGLE($c,Fd),ld.divisor=Fd)}else if(ld.buffer&&(w.disableVertexAttribArray($c),ld.buffer=null),ld.x!==Cc||ld.y!==jd||ld.z!==gd||ld.w!==cd)w.vertexAttrib4f($c,Cc,jd,gd,cd),ld.x=Cc,ld.y=jd,ld.z=gd,ld.w=cd;Ad=
M.call(this,ja,h,f);xe=!1;Ke=null;we=0;he=!1;de=fe=0;pe=1;ae=0;je=5126;me=qe=Tc=xc=0;ia(Ad)?(xe=!0,Ke=J.createStream(34962,Ad),je=Ke.dtype):(Ke=J.getBuffer(Ad))?je=Ke.dtype:"constant"in Ad?(pe=2,"number"===typeof Ad.constant?(Tc=Ad.constant,qe=me=xc=0):(Tc=0<Ad.constant.length?Ad.constant[0]:0,qe=1<Ad.constant.length?Ad.constant[1]:0,me=2<Ad.constant.length?Ad.constant[2]:0,xc=3<Ad.constant.length?Ad.constant[3]:0)):(Ke=ia(Ad.buffer)?J.createStream(34962,Ad.buffer):J.getBuffer(Ad.buffer),je="type"in
Ad?Wd[Ad.type]:Ke.dtype,he=!!Ad.normalized,de=Ad.size|0,fe=Ad.offset|0,ae=Ad.stride|0,we=Ad.divisor|0);Id=S.location;Nd=Y[Id];if(1===pe){Nd.buffer||w.enableVertexAttribArray(Id);Od=de||4;if(Nd.type!==je||Nd.size!==Od||Nd.buffer!==Ke||Nd.normalized!==he||Nd.offset!==fe||Nd.stride!==ae)w.bindBuffer(34962,Ke.buffer),w.vertexAttribPointer(Id,Od,je,he,ae,fe),Nd.type=je,Nd.size=Od,Nd.buffer=Ke,Nd.normalized=he,Nd.offset=fe,Nd.stride=ae;Nd.divisor!==we&&(g.vertexAttribDivisorANGLE(Id,we),Nd.divisor=we)}else if(Nd.buffer&&
(w.disableVertexAttribArray(Id),Nd.buffer=null),Nd.x!==Tc||Nd.y!==qe||Nd.z!==me||Nd.w!==xc)w.vertexAttrib4f(Id,Tc,qe,me,xc),Nd.x=Tc,Nd.y=qe,Nd.z=me,Nd.w=xc;Pd=O.call(this,ja,h,f);ke=!1;Ee=null;ye=0;oe=!1;Oe=jf=0;Le=1;re=0;Be=5126;Ce=He=Ge=Fe=0;ia(Pd)?(ke=!0,Ee=J.createStream(34962,Pd),Be=Ee.dtype):(Ee=J.getBuffer(Pd))?Be=Ee.dtype:"constant"in Pd?(Le=2,"number"===typeof Pd.constant?(Ge=Pd.constant,He=Ce=Fe=0):(Ge=0<Pd.constant.length?Pd.constant[0]:0,He=1<Pd.constant.length?Pd.constant[1]:0,Ce=2<Pd.constant.length?
Pd.constant[2]:0,Fe=3<Pd.constant.length?Pd.constant[3]:0)):(Ee=ia(Pd.buffer)?J.createStream(34962,Pd.buffer):J.getBuffer(Pd.buffer),Be="type"in Pd?Wd[Pd.type]:Ee.dtype,oe=!!Pd.normalized,Oe=Pd.size|0,jf=Pd.offset|0,re=Pd.stride|0,ye=Pd.divisor|0);Kd=Vb.location;Sd=Y[Kd];if(1===Le){Sd.buffer||w.enableVertexAttribArray(Kd);Yd=Oe||4;if(Sd.type!==Be||Sd.size!==Yd||Sd.buffer!==Ee||Sd.normalized!==oe||Sd.offset!==jf||Sd.stride!==re)w.bindBuffer(34962,Ee.buffer),w.vertexAttribPointer(Kd,Yd,Be,oe,re,jf),
Sd.type=Be,Sd.size=Yd,Sd.buffer=Ee,Sd.normalized=oe,Sd.offset=jf,Sd.stride=re;Sd.divisor!==ye&&(g.vertexAttribDivisorANGLE(Kd,ye),Sd.divisor=ye)}else if(Sd.buffer&&(w.disableVertexAttribArray(Kd),Sd.buffer=null),Sd.x!==Ge||Sd.y!==He||Sd.z!==Ce||Sd.w!==Fe)w.vertexAttrib4f(Kd,Ge,He,Ce,Fe),Sd.x=Ge,Sd.y=He,Sd.z=Ce,Sd.w=Fe;be=U.call(this,ja,h,f);Ie=!1;Dd=null;Qd=0;ze=!1;pf=Je=0;Xe=1;Pe=0;Me=5126;Re=Qe=Te=We=0;ia(be)?(Ie=!0,Dd=J.createStream(34962,be),Me=Dd.dtype):(Dd=J.getBuffer(be))?Me=Dd.dtype:"constant"in
be?(Xe=2,"number"===typeof be.constant?(Te=be.constant,Qe=Re=We=0):(Te=0<be.constant.length?be.constant[0]:0,Qe=1<be.constant.length?be.constant[1]:0,Re=2<be.constant.length?be.constant[2]:0,We=3<be.constant.length?be.constant[3]:0)):(Dd=ia(be.buffer)?J.createStream(34962,be.buffer):J.getBuffer(be.buffer),Me="type"in be?Wd[be.type]:Dd.dtype,ze=!!be.normalized,pf=be.size|0,Je=be.offset|0,Pe=be.stride|0,Qd=be.divisor|0);Rd=ka.location;Vd=Y[Rd];if(1===Xe){Vd.buffer||w.enableVertexAttribArray(Rd);Se=
pf||1;if(Vd.type!==Me||Vd.size!==Se||Vd.buffer!==Dd||Vd.normalized!==ze||Vd.offset!==Je||Vd.stride!==Pe)w.bindBuffer(34962,Dd.buffer),w.vertexAttribPointer(Rd,Se,Me,ze,Pe,Je),Vd.type=Me,Vd.size=Se,Vd.buffer=Dd,Vd.normalized=ze,Vd.offset=Je,Vd.stride=Pe;Vd.divisor!==Qd&&(g.vertexAttribDivisorANGLE(Rd,Qd),Vd.divisor=Qd)}else if(Vd.buffer&&(w.disableVertexAttribArray(Rd),Vd.buffer=null),Vd.x!==Te||Vd.y!==Qe||Vd.z!==Re||Vd.w!==We)w.vertexAttrib4f(Rd,Te,Qe,Re,We),Vd.x=Te,Vd.y=Qe,Vd.z=Re,Vd.w=We;ge=ja.pixelRatio;
f&&hf===ge||(hf=ge,w.uniform1f(Ha.location,ge));bf=h.scale;ef=bf[0];gf=bf[1];f&&ff===ef&&nf===gf||(ff=ef,nf=gf,w.uniform2f(W.location,ef,gf));kf=h.scaleFract;of=kf[0];Bf=kf[1];f&&Af===of&&Ne===Bf||(Af=of,Ne=Bf,w.uniform2f(nb.location,of,Bf));Ae=h.translate;lf=Ae[0];Cf=Ae[1];f&&mf===lf&&Ff===Cf||(mf=lf,Ff=Cf,w.uniform2f(pa.location,lf,Cf));zf=h.translateFract;Df=zf[0];uf=zf[1];f&&Ef===Df&&vf===uf||(Ef=Df,vf=uf,w.uniform2f(ac.location,Df,uf));tf=I.call(this,ja,h,f);wf=tf[0];Hf=tf[1];f&&xf===wf&&If===
Hf||(xf=wf,If=Hf,w.uniform2f(Pa.location,wf,Hf));Jf=h.opacity;f&&Kf===Jf||(Kf=Jf,w.uniform1f(Ea.location,Jf));(rf=h.markerTexture)&&"framebuffer"===rf._reglType&&(rf=rf.color[0]);Pf=rf._texture;w.uniform1i(ea.location,Pf.bind());Gf=h.elements;sf=null;(sf=(bg=ia(Gf))?Jc.createStream(Gf):Jc.getElements(Gf))&&w.bindBuffer(34963,sf.buffer.buffer);Qf=h.offset;if(Rf=h.count)0<Ec?sf?g.drawElementsInstancedANGLE(0,Rf,sf.type,Qf<<(sf.type-5121>>1),Ec):g.drawArraysInstancedANGLE(0,Qf,Rf,Ec):0>Ec&&(sf?w.drawElements(0,
Rf,sf.type,Qf<<(sf.type-5121>>1)):w.drawArrays(0,Qf,Rf)),ja.viewportWidth=Tb,ja.viewportHeight=Na,Zc&&J.destroyStream(eb),Sa&&J.destroyStream(Ic),Za&&J.destroyStream(kc),xd&&J.destroyStream(sc),Ve&&J.destroyStream(zc),kd&&J.destroyStream(Wc),xe&&J.destroyStream(Ke),ke&&J.destroyStream(Ee),Ie&&J.destroyStream(Dd),Pf.unbind(),bg&&Jc.destroyStream(sf)}ta.unbind();Ca.dirty=!0;ra.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(a){var d,e,g,h,l,m,p,A,B,H,D,E,L,O,P,I,M,Q,R,U,X,ha,Z,ba,aa,
fa,ca,wa,qa,ta,la,oa,Ma,Gb,Xa,sa,La,Bb,Ta,Ib,db,Oa,Rb,Ja,$b,Sb,Eb,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,Fd,vd,ce,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,Ld,Oe,Le,re;d=F.next;d!==F.cur&&(d?w.bindFramebuffer(36160,
d.framebuffer):w.bindFramebuffer(36160,null),F.cur=d);if(Ca.dirty){var Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,ge,Xe,Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,qf,hf,bf,ef,ff,gf,nf,kf,of;Be=va.dither;Be!==Ca.dither&&(Be?w.enable(3024):w.disable(3024),Ca.dither=Be);Fe=da[0];Ge=da[1];if(Fe!==z[0]||Ge!==z[1])w.blendEquationSeparate(Fe,Ge),z[0]=Fe,z[1]=Ge;He=va.depth_func;He!==Ca.depth_func&&(w.depthFunc(He),Ca.depth_func=He);Ce=V[0];Kd=V[1];if(Ce!==q[0]||Kd!==q[1])w.depthRange(Ce,Kd),q[0]=Ce,q[1]=Kd;Sd=va.depth_mask;
Sd!==Ca.depth_mask&&(w.depthMask(Sd),Ca.depth_mask=Sd);Yd=k[0];be=k[1];Ie=k[2];Dd=k[3];if(Yd!==mc[0]||be!==mc[1]||Ie!==mc[2]||Dd!==mc[3])w.colorMask(Yd,be,Ie,Dd),mc[0]=Yd,mc[1]=be,mc[2]=Ie,mc[3]=Dd;Qd=va.cull_enable;Qd!==Ca.cull_enable&&(Qd?w.enable(2884):w.disable(2884),Ca.cull_enable=Qd);ze=va.cull_face;ze!==Ca.cull_face&&(w.cullFace(ze),Ca.cull_face=ze);Je=va.frontFace;Je!==Ca.frontFace&&(w.frontFace(Je),Ca.frontFace=Je);ge=va.lineWidth;ge!==Ca.lineWidth&&(w.lineWidth(ge),Ca.lineWidth=ge);Xe=va.polygonOffset_enable;
Xe!==Ca.polygonOffset_enable&&(Xe?w.enable(32823):w.disable(32823),Ca.polygonOffset_enable=Xe);Pe=Jb[0];Me=Jb[1];if(Pe!==zb[0]||Me!==zb[1])w.polygonOffset(Pe,Me),zb[0]=Pe,zb[1]=Me;We=va.sample_alpha;We!==Ca.sample_alpha&&(We?w.enable(32926):w.disable(32926),Ca.sample_alpha=We);Te=va.sample_enable;Te!==Ca.sample_enable&&(Te?w.enable(32928):w.disable(32928),Ca.sample_enable=Te);Qe=Ue[0];Re=Ue[1];if(Qe!==te[0]||Re!==te[1])w.sampleCoverage(Qe,Re),te[0]=Qe,te[1]=Re;Rd=va.stencil_mask;Rd!==Ca.stencil_mask&&
(w.stencilMask(Rd),Ca.stencil_mask=Rd);Vd=Ed[0];Se=Ed[1];qf=Ed[2];if(Vd!==se[0]||Se!==se[1]||qf!==se[2])w.stencilFunc(Vd,Se,qf),se[0]=Vd,se[1]=Se,se[2]=qf;hf=ve[0];bf=ve[1];ef=ve[2];ff=ve[3];if(hf!==yd[0]||bf!==yd[1]||ef!==yd[2]||ff!==yd[3])w.stencilOpSeparate(hf,bf,ef,ff),yd[0]=hf,yd[1]=bf,yd[2]=ef,yd[3]=ff;gf=md[0];nf=md[1];kf=md[2];of=md[3];if(gf!==ie[0]||nf!==ie[1]||kf!==ie[2]||of!==ie[3])w.stencilOpSeparate(gf,nf,kf,of),ie[0]=gf,ie[1]=nf,ie[2]=kf,ie[3]=of}e=a.viewport;g=e.x|0;h=e.y|0;l="width"in
e?e.width|0:ja.framebufferWidth-g;m="height"in e?e.height|0:ja.framebufferHeight-h;p=ja.viewportWidth;ja.viewportWidth=l;A=ja.viewportHeight;ja.viewportHeight=m;w.viewport(g,h,l,m);Zd[0]=g;Zd[1]=h;Zd[2]=l;Zd[3]=m;w.blendColor(0,0,0,1);t[0]=0;t[1]=0;t[2]=0;t[3]=1;w.enable(3042);Ca.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;w.disable(2929);Ca.depth_enable=!1;B=a.viewport;H=B.x|0;D=B.y|0;E="width"in B?B.width|0:ja.framebufferWidth-H;L="height"in B?B.height|
0:ja.framebufferHeight-D;w.scissor(H,D,E,L);le[0]=H;le[1]=D;le[2]=E;le[3]=L;w.enable(3089);Ca.scissor_enable=!0;w.disable(2960);Ca.stencil_enable=!1;if(O=Ca.profile)P=performance.now(),y.count++;w.useProgram(n.program);I=Uc.angle_instanced_arrays;ra.setVAO(null);M=N.call(this,ja,a,0);Q=!1;R=null;U=0;X=!1;Z=ha=0;ba=1;aa=0;fa=5126;ta=qa=wa=ca=0;ia(M)?(Q=!0,R=J.createStream(34962,M),fa=R.dtype):(R=J.getBuffer(M))?fa=R.dtype:"constant"in M?(ba=2,"number"===typeof M.constant?(wa=M.constant,qa=ta=ca=0):
(wa=0<M.constant.length?M.constant[0]:0,qa=1<M.constant.length?M.constant[1]:0,ta=2<M.constant.length?M.constant[2]:0,ca=3<M.constant.length?M.constant[3]:0)):(R=ia(M.buffer)?J.createStream(34962,M.buffer):J.getBuffer(M.buffer),fa="type"in M?Wd[M.type]:R.dtype,X=!!M.normalized,Z=M.size|0,ha=M.offset|0,aa=M.stride|0,U=M.divisor|0);la=pc.location;oa=Y[la];if(1===ba){oa.buffer||w.enableVertexAttribArray(la);Ma=Z||1;if(oa.type!==fa||oa.size!==Ma||oa.buffer!==R||oa.normalized!==X||oa.offset!==ha||oa.stride!==
aa)w.bindBuffer(34962,R.buffer),w.vertexAttribPointer(la,Ma,fa,X,aa,ha),oa.type=fa,oa.size=Ma,oa.buffer=R,oa.normalized=X,oa.offset=ha,oa.stride=aa;oa.divisor!==U&&(I.vertexAttribDivisorANGLE(la,U),oa.divisor=U)}else if(oa.buffer&&(w.disableVertexAttribArray(la),oa.buffer=null),oa.x!==wa||oa.y!==qa||oa.z!==ta||oa.w!==ca)w.vertexAttrib4f(la,wa,qa,ta,ca),oa.x=wa,oa.y=qa,oa.z=ta,oa.w=ca;Gb=f.call(this,ja,a,0);Xa=!1;sa=null;La=0;Bb=!1;Ib=Ta=0;db=1;Oa=0;Rb=5126;Eb=Sb=$b=Ja=0;ia(Gb)?(Xa=!0,sa=J.createStream(34962,
Gb),Rb=sa.dtype):(sa=J.getBuffer(Gb))?Rb=sa.dtype:"constant"in Gb?(db=2,"number"===typeof Gb.constant?($b=Gb.constant,Sb=Eb=Ja=0):($b=0<Gb.constant.length?Gb.constant[0]:0,Sb=1<Gb.constant.length?Gb.constant[1]:0,Eb=2<Gb.constant.length?Gb.constant[2]:0,Ja=3<Gb.constant.length?Gb.constant[3]:0)):(sa=ia(Gb.buffer)?J.createStream(34962,Gb.buffer):J.getBuffer(Gb.buffer),Rb="type"in Gb?Wd[Gb.type]:sa.dtype,Bb=!!Gb.normalized,Ib=Gb.size|0,Ta=Gb.offset|0,Oa=Gb.stride|0,La=Gb.divisor|0);Tb=rd.location;Na=
Y[Tb];if(1===db){Na.buffer||w.enableVertexAttribArray(Tb);ob=Ib||1;if(Na.type!==Rb||Na.size!==ob||Na.buffer!==sa||Na.normalized!==Bb||Na.offset!==Ta||Na.stride!==Oa)w.bindBuffer(34962,sa.buffer),w.vertexAttribPointer(Tb,ob,Rb,Bb,Oa,Ta),Na.type=Rb,Na.size=ob,Na.buffer=sa,Na.normalized=Bb,Na.offset=Ta,Na.stride=Oa;Na.divisor!==La&&(I.vertexAttribDivisorANGLE(Tb,La),Na.divisor=La)}else if(Na.buffer&&(w.disableVertexAttribArray(Tb),Na.buffer=null),Na.x!==$b||Na.y!==Sb||Na.z!==Eb||Na.w!==Ja)w.vertexAttrib4f(Tb,
$b,Sb,Eb,Ja),Na.x=$b,Na.y=Sb,Na.z=Eb,Na.w=Ja;vb=c.call(this,ja,a,0);hb=!1;Qa=null;lc=0;Yb=!1;eb=Zc=0;jc=1;dd=0;hc=5126;pb=ua=kb=jb=0;ia(vb)?(hb=!0,Qa=J.createStream(34962,vb),hc=Qa.dtype):(Qa=J.getBuffer(vb))?hc=Qa.dtype:"constant"in vb?(jc=2,"number"===typeof vb.constant?(kb=vb.constant,ua=pb=jb=0):(kb=0<vb.constant.length?vb.constant[0]:0,ua=1<vb.constant.length?vb.constant[1]:0,pb=2<vb.constant.length?vb.constant[2]:0,jb=3<vb.constant.length?vb.constant[3]:0)):(Qa=ia(vb.buffer)?J.createStream(34962,
vb.buffer):J.getBuffer(vb.buffer),hc="type"in vb?Wd[vb.type]:Qa.dtype,Yb=!!vb.normalized,eb=vb.size|0,Zc=vb.offset|0,dd=vb.stride|0,lc=vb.divisor|0);xa=ic.location;Va=Y[xa];if(1===jc){Va.buffer||w.enableVertexAttribArray(xa);cb=eb||1;if(Va.type!==hc||Va.size!==cb||Va.buffer!==Qa||Va.normalized!==Yb||Va.offset!==Zc||Va.stride!==dd)w.bindBuffer(34962,Qa.buffer),w.vertexAttribPointer(xa,cb,hc,Yb,dd,Zc),Va.type=hc,Va.size=cb,Va.buffer=Qa,Va.normalized=Yb,Va.offset=Zc,Va.stride=dd;Va.divisor!==lc&&(I.vertexAttribDivisorANGLE(xa,
lc),Va.divisor=lc)}else if(Va.buffer&&(w.disableVertexAttribArray(xa),Va.buffer=null),Va.x!==kb||Va.y!==ua||Va.z!==pb||Va.w!==jb)w.vertexAttrib4f(xa,kb,ua,pb,jb),Va.x=kb,Va.y=ua,Va.z=pb,Va.w=jb;Aa=x.call(this,ja,a,0);fb=!1;Ia=null;Cb=0;Ab=!1;Ic=Sa=0;Kb=1;$a=0;Ub=5126;Ob=Ka=ud=ya=0;ia(Aa)?(fb=!0,Ia=J.createStream(34962,Aa),Ub=Ia.dtype):(Ia=J.getBuffer(Aa))?Ub=Ia.dtype:"constant"in Aa?(Kb=2,"number"===typeof Aa.constant?(ud=Aa.constant,Ka=Ob=ya=0):(ud=0<Aa.constant.length?Aa.constant[0]:0,Ka=1<Aa.constant.length?
Aa.constant[1]:0,Ob=2<Aa.constant.length?Aa.constant[2]:0,ya=3<Aa.constant.length?Aa.constant[3]:0)):(Ia=ia(Aa.buffer)?J.createStream(34962,Aa.buffer):J.getBuffer(Aa.buffer),Ub="type"in Aa?Wd[Aa.type]:Ia.dtype,Ab=!!Aa.normalized,Ic=Aa.size|0,Sa=Aa.offset|0,$a=Aa.stride|0,Cb=Aa.divisor|0);gb=tc.location;ib=Y[gb];if(1===Kb){ib.buffer||w.enableVertexAttribArray(gb);za=Ic||1;if(ib.type!==Ub||ib.size!==za||ib.buffer!==Ia||ib.normalized!==Ab||ib.offset!==Sa||ib.stride!==$a)w.bindBuffer(34962,Ia.buffer),
w.vertexAttribPointer(gb,za,Ub,Ab,$a,Sa),ib.type=Ub,ib.size=za,ib.buffer=Ia,ib.normalized=Ab,ib.offset=Sa,ib.stride=$a;ib.divisor!==Cb&&(I.vertexAttribDivisorANGLE(gb,Cb),ib.divisor=Cb)}else if(ib.buffer&&(w.disableVertexAttribArray(gb),ib.buffer=null),ib.x!==ud||ib.y!==Ka||ib.z!==Ob||ib.w!==ya)w.vertexAttrib4f(gb,ud,Ka,Ob,ya),ib.x=ud,ib.y=Ka,ib.z=Ob,ib.w=ya;dc=b.call(this,ja,a,0);Da=!1;qb=null;rb=0;Ya=!1;kc=Za=0;ad=1;uc=0;Wa=5126;wc=Fa=Pc=Mb=0;ia(dc)?(Da=!0,qb=J.createStream(34962,dc),Wa=qb.dtype):
(qb=J.getBuffer(dc))?Wa=qb.dtype:"constant"in dc?(ad=2,"number"===typeof dc.constant?(Pc=dc.constant,Fa=wc=Mb=0):(Pc=0<dc.constant.length?dc.constant[0]:0,Fa=1<dc.constant.length?dc.constant[1]:0,wc=2<dc.constant.length?dc.constant[2]:0,Mb=3<dc.constant.length?dc.constant[3]:0)):(qb=ia(dc.buffer)?J.createStream(34962,dc.buffer):J.getBuffer(dc.buffer),Wa="type"in dc?Wd[dc.type]:qb.dtype,Ya=!!dc.normalized,kc=dc.size|0,Za=dc.offset|0,uc=dc.stride|0,rb=dc.divisor|0);Ra=ga.location;Ba=Y[Ra];if(1===ad){Ba.buffer||
w.enableVertexAttribArray(Ra);lb=kc||1;if(Ba.type!==Wa||Ba.size!==lb||Ba.buffer!==qb||Ba.normalized!==Ya||Ba.offset!==Za||Ba.stride!==uc)w.bindBuffer(34962,qb.buffer),w.vertexAttribPointer(Ra,lb,Wa,Ya,uc,Za),Ba.type=Wa,Ba.size=lb,Ba.buffer=qb,Ba.normalized=Ya,Ba.offset=Za,Ba.stride=uc;Ba.divisor!==rb&&(I.vertexAttribDivisorANGLE(Ra,rb),Ba.divisor=rb)}else if(Ba.buffer&&(w.disableVertexAttribArray(Ra),Ba.buffer=null),Ba.x!==Pc||Ba.y!==Fa||Ba.z!==wc||Ba.w!==Mb)w.vertexAttrib4f(Ra,Pc,Fa,wc,Mb),Ba.x=
Pc,Ba.y=Fa,Ba.z=wc,Ba.w=Mb;wb=v.call(this,ja,a,0);Db=!1;sb=null;vc=0;xb=!1;sc=xd=0;Md=1;Lc=0;bd=5126;Pb=cc=Wb=od=0;ia(wb)?(Db=!0,sb=J.createStream(34962,wb),bd=sb.dtype):(sb=J.getBuffer(wb))?bd=sb.dtype:"constant"in wb?(Md=2,"number"===typeof wb.constant?(Wb=wb.constant,cc=Pb=od=0):(Wb=0<wb.constant.length?wb.constant[0]:0,cc=1<wb.constant.length?wb.constant[1]:0,Pb=2<wb.constant.length?wb.constant[2]:0,od=3<wb.constant.length?wb.constant[3]:0)):(sb=ia(wb.buffer)?J.createStream(34962,wb.buffer):J.getBuffer(wb.buffer),
bd="type"in wb?Wd[wb.type]:sb.dtype,xb=!!wb.normalized,sc=wb.size|0,xd=wb.offset|0,Lc=wb.stride|0,vc=wb.divisor|0);Ga=ab.location;Zb=Y[Ga];if(1===Md){Zb.buffer||w.enableVertexAttribArray(Ga);mb=sc||1;if(Zb.type!==bd||Zb.size!==mb||Zb.buffer!==sb||Zb.normalized!==xb||Zb.offset!==xd||Zb.stride!==Lc)w.bindBuffer(34962,sb.buffer),w.vertexAttribPointer(Ga,mb,bd,xb,Lc,xd),Zb.type=bd,Zb.size=mb,Zb.buffer=sb,Zb.normalized=xb,Zb.offset=xd,Zb.stride=Lc;Zb.divisor!==vc&&(I.vertexAttribDivisorANGLE(Ga,vc),Zb.divisor=
vc)}else if(Zb.buffer&&(w.disableVertexAttribArray(Ga),Zb.buffer=null),Zb.x!==Wb||Zb.y!==cc||Zb.z!==Pb||Zb.w!==od)w.vertexAttrib4f(Ga,Wb,cc,Pb,od),Zb.x=Wb,Zb.y=cc,Zb.z=Pb,Zb.w=od;yb=C.call(this,ja,a,0);Nb=!1;Qb=null;ec=0;gc=!1;zc=Ve=0;Ac=1;Bc=0;Mc=5126;Lb=Nc=Rc=Xc=0;ia(yb)?(Nb=!0,Qb=J.createStream(34962,yb),Mc=Qb.dtype):(Qb=J.getBuffer(yb))?Mc=Qb.dtype:"constant"in yb?(Ac=2,"number"===typeof yb.constant?(Rc=yb.constant,Nc=Lb=Xc=0):(Rc=0<yb.constant.length?yb.constant[0]:0,Nc=1<yb.constant.length?
yb.constant[1]:0,Lb=2<yb.constant.length?yb.constant[2]:0,Xc=3<yb.constant.length?yb.constant[3]:0)):(Qb=ia(yb.buffer)?J.createStream(34962,yb.buffer):J.getBuffer(yb.buffer),Mc="type"in yb?Wd[yb.type]:Qb.dtype,gc=!!yb.normalized,zc=yb.size|0,Ve=yb.offset|0,Bc=yb.stride|0,ec=yb.divisor|0);Hb=S.location;Oc=Y[Hb];if(1===Ac){Oc.buffer||w.enableVertexAttribArray(Hb);Fc=zc||4;if(Oc.type!==Mc||Oc.size!==Fc||Oc.buffer!==Qb||Oc.normalized!==gc||Oc.offset!==Ve||Oc.stride!==Bc)w.bindBuffer(34962,Qb.buffer),
w.vertexAttribPointer(Hb,Fc,Mc,gc,Bc,Ve),Oc.type=Mc,Oc.size=Fc,Oc.buffer=Qb,Oc.normalized=gc,Oc.offset=Ve,Oc.stride=Bc;Oc.divisor!==ec&&(I.vertexAttribDivisorANGLE(Hb,ec),Oc.divisor=ec)}else if(Oc.buffer&&(w.disableVertexAttribArray(Hb),Oc.buffer=null),Oc.x!==Rc||Oc.y!==Nc||Oc.z!==Lb||Oc.w!==Xc)w.vertexAttrib4f(Hb,Rc,Nc,Lb,Xc),Oc.x=Rc,Oc.y=Nc,Oc.z=Lb,Oc.w=Xc;Sc=T.call(this,ja,a,0);fc=!1;Vc=null;id=0;fd=!1;Wc=kd=0;Fd=1;vd=0;ce=5126;Hd=Jd=ee=ue=0;ia(Sc)?(fc=!0,Vc=J.createStream(34962,Sc),ce=Vc.dtype):
(Vc=J.getBuffer(Sc))?ce=Vc.dtype:"constant"in Sc?(Fd=2,"number"===typeof Sc.constant?(ee=Sc.constant,Jd=Hd=ue=0):(ee=0<Sc.constant.length?Sc.constant[0]:0,Jd=1<Sc.constant.length?Sc.constant[1]:0,Hd=2<Sc.constant.length?Sc.constant[2]:0,ue=3<Sc.constant.length?Sc.constant[3]:0)):(Vc=ia(Sc.buffer)?J.createStream(34962,Sc.buffer):J.getBuffer(Sc.buffer),ce="type"in Sc?Wd[Sc.type]:Vc.dtype,fd=!!Sc.normalized,Wc=Sc.size|0,kd=Sc.offset|0,vd=Sc.stride|0,id=Sc.divisor|0);cd=Vb.location;Cc=Y[cd];if(1===Fd){Cc.buffer||
w.enableVertexAttribArray(cd);jd=Wc||4;if(Cc.type!==ce||Cc.size!==jd||Cc.buffer!==Vc||Cc.normalized!==fd||Cc.offset!==kd||Cc.stride!==vd)w.bindBuffer(34962,Vc.buffer),w.vertexAttribPointer(cd,jd,ce,fd,vd,kd),Cc.type=ce,Cc.size=jd,Cc.buffer=Vc,Cc.normalized=fd,Cc.offset=kd,Cc.stride=vd;Cc.divisor!==id&&(I.vertexAttribDivisorANGLE(cd,id),Cc.divisor=id)}else if(Cc.buffer&&(w.disableVertexAttribArray(cd),Cc.buffer=null),Cc.x!==ee||Cc.y!==Jd||Cc.z!==Hd||Cc.w!==ue)w.vertexAttrib4f(cd,ee,Jd,Hd,ue),Cc.x=
ee,Cc.y=Jd,Cc.z=Hd,Cc.w=ue;gd=K.call(this,ja,a,0);$c=!1;ld=null;zd=0;Ad=!1;Ke=xe=0;we=1;he=0;fe=5126;je=ae=pe=de=0;ia(gd)?($c=!0,ld=J.createStream(34962,gd),fe=ld.dtype):(ld=J.getBuffer(gd))?fe=ld.dtype:"constant"in gd?(we=2,"number"===typeof gd.constant?(pe=gd.constant,ae=je=de=0):(pe=0<gd.constant.length?gd.constant[0]:0,ae=1<gd.constant.length?gd.constant[1]:0,je=2<gd.constant.length?gd.constant[2]:0,de=3<gd.constant.length?gd.constant[3]:0)):(ld=ia(gd.buffer)?J.createStream(34962,gd.buffer):J.getBuffer(gd.buffer),
fe="type"in gd?Wd[gd.type]:ld.dtype,Ad=!!gd.normalized,Ke=gd.size|0,xe=gd.offset|0,he=gd.stride|0,zd=gd.divisor|0);xc=ka.location;Tc=Y[xc];if(1===we){Tc.buffer||w.enableVertexAttribArray(xc);qe=Ke||1;if(Tc.type!==fe||Tc.size!==qe||Tc.buffer!==ld||Tc.normalized!==Ad||Tc.offset!==xe||Tc.stride!==he)w.bindBuffer(34962,ld.buffer),w.vertexAttribPointer(xc,qe,fe,Ad,he,xe),Tc.type=fe,Tc.size=qe,Tc.buffer=ld,Tc.normalized=Ad,Tc.offset=xe,Tc.stride=he;Tc.divisor!==zd&&(I.vertexAttribDivisorANGLE(xc,zd),Tc.divisor=
zd)}else if(Tc.buffer&&(w.disableVertexAttribArray(xc),Tc.buffer=null),Tc.x!==pe||Tc.y!==ae||Tc.z!==je||Tc.w!==de)w.vertexAttrib4f(xc,pe,ae,je,de),Tc.x=pe,Tc.y=ae,Tc.z=je,Tc.w=de;w.uniform1i(u.location,!1);w.uniform1f(Ha.location,ja.pixelRatio);me=a.scale;w.uniform2f(W.location,me[0],me[1]);Id=a.scaleFract;w.uniform2f(nb.location,Id[0],Id[1]);Nd=a.translate;w.uniform2f(pa.location,Nd[0],Nd[1]);Od=a.translateFract;w.uniform2f(ac.location,Od[0],Od[1]);Pd=G.call(this,ja,a,0);w.uniform2f(Pa.location,
Pd[0],Pd[1]);w.uniform1f(Ea.location,a.opacity);w.uniform1i(tb.location,r.bind());(ke=a.markerTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);Ee=ke._texture;w.uniform1i(ea.location,Ee.bind());ye=a.elements;oe=null;(oe=(Ld=ia(ye))?Jc.createStream(ye):Jc.getElements(ye))&&w.bindBuffer(34963,oe.buffer.buffer);Oe=a.offset;if(Le=a.count)re=ub.instances,0<re?oe?I.drawElementsInstancedANGLE(0,Le,oe.type,Oe<<(oe.type-5121>>1),re):I.drawArraysInstancedANGLE(0,Oe,Le,re):0>re&&(oe?w.drawElements(0,
Le,oe.type,Oe<<(oe.type-5121>>1)):w.drawArrays(0,Oe,Le)),Ca.dirty=!0,ra.setVAO(null),ja.viewportWidth=p,ja.viewportHeight=A,O&&(y.cpuTime+=performance.now()-P),Q&&J.destroyStream(R),Xa&&J.destroyStream(sa),hb&&J.destroyStream(Qa),fb&&J.destroyStream(Ia),Da&&J.destroyStream(qb),Db&&J.destroyStream(sb),Nb&&J.destroyStream(Qb),fc&&J.destroyStream(Vc),$c&&J.destroyStream(ld),r.unbind(),Ee.unbind(),Ld&&Jc.destroyStream(oe)},scope:function(b,c,d){var f,k,q,n,t,u,r,v,x,w,z,N,F,M,G,O,K,I,C,Y,V,da,S,T,U,W,
ba,ma,na,ea,ga,ka,oa,sa,ra,pa,ta,la,Ha,Ea,La,Pa,zb,Oa,Ja,tc,Na,ob,vb,hb,Qa,ab,Jb,nb,eb,Eb,rd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,mc,Kb,$a,Ub,ya,Vb,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,tb,uc,Wa,Mb,ac,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,pc,sc,ic,Lc,bd,md,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,le,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,Ed,Wc,Uc,vd,Zd,yd,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,ie,se,ve,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,te,ye,oe,Ld,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,
Je,Ue,Xe,Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,qf,hf,bf,ef,ff,gf,nf,kf,of,Af,Bf,Ne,Ae,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf,bg,Qf,Rf,pg,cf,Ze,Lf,Mf,dg,eg,fg,gg,hg,Uf,Sf,Vf,Wf,Xf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Nf,Of,jg,kg,lg,mg,ng,Yf,Tf,Zf,$f,ag,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Pg;f=b.viewport;k=f.x|0;q=f.y|0;n="width"in f?f.width|0:ja.framebufferWidth-k;t="height"in f?f.height|0:ja.framebufferHeight-q;u=ja.viewportWidth;ja.viewportWidth=n;r=ja.viewportHeight;ja.viewportHeight=
t;v=Fd[0];Fd[0]=k;x=Fd[1];Fd[1]=q;w=Fd[2];Fd[2]=n;z=Fd[3];Fd[3]=t;N=H[0];H[0]=0;F=H[1];H[1]=0;M=H[2];H[2]=0;G=H[3];H[3]=1;O=va.blend_enable;va.blend_enable=!0;K=wa[0];wa[0]=770;I=wa[1];wa[1]=771;C=wa[2];wa[2]=773;Y=wa[3];wa[3]=1;V=va.depth_enable;va.depth_enable=!1;da=b.viewport;S=da.x|0;T=da.y|0;U="width"in da?da.width|0:ja.framebufferWidth-S;W="height"in da?da.height|0:ja.framebufferHeight-T;ba=ce[0];ce[0]=S;ma=ce[1];ce[1]=T;na=ce[2];ce[2]=U;ea=ce[3];ce[3]=W;ga=va.scissor_enable;va.scissor_enable=
!0;ka=va.stencil_enable;va.stencil_enable=!1;if(oa=Ca.profile)sa=performance.now(),y.count++;ra=b.elements;pa=null;pa=(ta=ia(ra))?Jc.createStream(ra):Jc.getElements(ra);la=ub.elements;ub.elements=pa;Ha=b.offset;Ea=ub.offset;ub.offset=Ha;La=b.count;Pa=ub.count;ub.count=La;zb=ub.primitive;ub.primitive=0;Oa=ha[45];ha[45]=!1;Ja=b.markerTexture;tc=ha[48];ha[48]=Ja;Na=b.opacity;ob=ha[10];ha[10]=Na;vb=E.call(this,ja,b,d);hb=ha[46];ha[46]=vb;Qa=ha[47];ha[47]=B;ab=ja.pixelRatio;Jb=ha[34];ha[34]=ab;nb=b.scale;
eb=ha[6];ha[6]=nb;Eb=b.scaleFract;rd=ha[7];ha[7]=Eb;hc=b.translate;jb=ha[8];ha[8]=hc;kb=b.translateFract;ua=ha[9];ha[9]=kb;pb=D.call(this,ja,b,d);xa=!1;Va=null;cb=0;Aa=!1;Ia=fb=0;Cb=1;Ab=0;Sa=5126;Ub=$a=Kb=mc=0;ia(pb)?(xa=!0,Va=J.createStream(34962,pb),Sa=Va.dtype):(Va=J.getBuffer(pb))?Sa=Va.dtype:"constant"in pb?(Cb=2,"number"===typeof pb.constant?(Kb=pb.constant,$a=Ub=mc=0):(Kb=0<pb.constant.length?pb.constant[0]:0,$a=1<pb.constant.length?pb.constant[1]:0,Ub=2<pb.constant.length?pb.constant[2]:
0,mc=3<pb.constant.length?pb.constant[3]:0)):(Va=ia(pb.buffer)?J.createStream(34962,pb.buffer):J.getBuffer(pb.buffer),Sa="type"in pb?Wd[pb.type]:Va.dtype,Aa=!!pb.normalized,Ia=pb.size|0,fb=pb.offset|0,Ab=pb.stride|0,cb=pb.divisor|0);ya=Q.buffer;Q.buffer=Va;Vb=Q.divisor;Q.divisor=cb;Ka=Q.normalized;Q.normalized=Aa;Ob=Q.offset;Q.offset=fb;gb=Q.size;Q.size=Ia;ib=Q.state;Q.state=Cb;za=Q.stride;Q.stride=Ab;dc=Q.type;Q.type=Sa;Da=Q.w;Q.w=mc;qb=Q.x;Q.x=Kb;rb=Q.y;Q.y=$a;Ya=Q.z;Q.z=Ub;Za=A.call(this,ja,b,
d);kc=!1;tb=null;uc=0;Wa=!1;ac=Mb=0;Fa=1;wc=0;Ra=5126;Db=wb=lb=Ba=0;ia(Za)?(kc=!0,tb=J.createStream(34962,Za),Ra=tb.dtype):(tb=J.getBuffer(Za))?Ra=tb.dtype:"constant"in Za?(Fa=2,"number"===typeof Za.constant?(lb=Za.constant,wb=Db=Ba=0):(lb=0<Za.constant.length?Za.constant[0]:0,wb=1<Za.constant.length?Za.constant[1]:0,Db=2<Za.constant.length?Za.constant[2]:0,Ba=3<Za.constant.length?Za.constant[3]:0)):(tb=ia(Za.buffer)?J.createStream(34962,Za.buffer):J.getBuffer(Za.buffer),Ra="type"in Za?Wd[Za.type]:
tb.dtype,Wa=!!Za.normalized,ac=Za.size|0,Mb=Za.offset|0,wc=Za.stride|0,uc=Za.divisor|0);sb=P.buffer;P.buffer=tb;vc=P.divisor;P.divisor=uc;xb=P.normalized;P.normalized=Wa;pc=P.offset;P.offset=Mb;sc=P.size;P.size=ac;ic=P.state;P.state=Fa;Lc=P.stride;P.stride=wc;bd=P.type;P.type=Ra;md=P.w;P.w=Ba;Wb=P.x;P.x=lb;cc=P.y;P.y=wb;Pb=P.z;P.z=Db;Ga=ca.call(this,ja,b,d);Zb=!1;mb=null;yb=0;Nb=!1;ec=Qb=0;gc=1;le=0;zc=5126;Xc=Mc=Bc=Ac=0;ia(Ga)?(Zb=!0,mb=J.createStream(34962,Ga),zc=mb.dtype):(mb=J.getBuffer(Ga))?
zc=mb.dtype:"constant"in Ga?(gc=2,"number"===typeof Ga.constant?(Bc=Ga.constant,Mc=Xc=Ac=0):(Bc=0<Ga.constant.length?Ga.constant[0]:0,Mc=1<Ga.constant.length?Ga.constant[1]:0,Xc=2<Ga.constant.length?Ga.constant[2]:0,Ac=3<Ga.constant.length?Ga.constant[3]:0)):(mb=ia(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),zc="type"in Ga?Wd[Ga.type]:mb.dtype,Nb=!!Ga.normalized,ec=Ga.size|0,Qb=Ga.offset|0,le=Ga.stride|0,yb=Ga.divisor|0);Rc=h.buffer;h.buffer=mb;Nc=h.divisor;h.divisor=yb;Lb=h.normalized;
h.normalized=Nb;Hb=h.offset;h.offset=Qb;Oc=h.size;h.size=ec;Fc=h.state;h.state=gc;Sc=h.stride;h.stride=le;fc=h.type;h.type=zc;Vc=h.w;h.w=Ac;id=h.x;h.x=Bc;fd=h.y;h.y=Mc;Ed=h.z;h.z=Xc;Wc=e.call(this,ja,b,d);Uc=!1;vd=null;Zd=0;yd=!1;Jd=ee=0;Hd=1;cd=0;Cc=5126;ld=$c=gd=jd=0;ia(Wc)?(Uc=!0,vd=J.createStream(34962,Wc),Cc=vd.dtype):(vd=J.getBuffer(Wc))?Cc=vd.dtype:"constant"in Wc?(Hd=2,"number"===typeof Wc.constant?(gd=Wc.constant,$c=ld=jd=0):(gd=0<Wc.constant.length?Wc.constant[0]:0,$c=1<Wc.constant.length?
Wc.constant[1]:0,ld=2<Wc.constant.length?Wc.constant[2]:0,jd=3<Wc.constant.length?Wc.constant[3]:0)):(vd=ia(Wc.buffer)?J.createStream(34962,Wc.buffer):J.getBuffer(Wc.buffer),Cc="type"in Wc?Wd[Wc.type]:vd.dtype,yd=!!Wc.normalized,Jd=Wc.size|0,ee=Wc.offset|0,cd=Wc.stride|0,Zd=Wc.divisor|0);zd=g.buffer;g.buffer=vd;Ad=g.divisor;g.divisor=Zd;ie=g.normalized;g.normalized=yd;se=g.offset;g.offset=ee;ve=g.size;g.size=Jd;he=g.state;g.state=Hd;fe=g.stride;g.stride=cd;de=g.type;g.type=Cc;pe=g.w;g.w=jd;ae=g.x;
g.x=gd;je=g.y;g.y=$c;xc=g.z;g.z=ld;Tc=l.call(this,ja,b,d);qe=!1;me=null;Id=0;Nd=!1;Pd=Od=0;ke=1;te=0;ye=5126;Le=Oe=Ld=oe=0;ia(Tc)?(qe=!0,me=J.createStream(34962,Tc),ye=me.dtype):(me=J.getBuffer(Tc))?ye=me.dtype:"constant"in Tc?(ke=2,"number"===typeof Tc.constant?(Ld=Tc.constant,Oe=Le=oe=0):(Ld=0<Tc.constant.length?Tc.constant[0]:0,Oe=1<Tc.constant.length?Tc.constant[1]:0,Le=2<Tc.constant.length?Tc.constant[2]:0,oe=3<Tc.constant.length?Tc.constant[3]:0)):(me=ia(Tc.buffer)?J.createStream(34962,Tc.buffer):
J.getBuffer(Tc.buffer),ye="type"in Tc?Wd[Tc.type]:me.dtype,Nd=!!Tc.normalized,Pd=Tc.size|0,Od=Tc.offset|0,te=Tc.stride|0,Id=Tc.divisor|0);re=R.buffer;R.buffer=me;Be=R.divisor;R.divisor=Id;Fe=R.normalized;R.normalized=Nd;Ge=R.offset;R.offset=Od;He=R.size;R.size=Pd;Ce=R.state;R.state=ke;Kd=R.stride;R.stride=te;Sd=R.type;R.type=ye;Yd=R.w;R.w=oe;be=R.x;R.x=Ld;Ie=R.y;R.y=Oe;Dd=R.z;R.z=Le;Qd=Z.call(this,ja,b,d);ze=!1;Je=null;Ue=0;Xe=!1;Me=Pe=0;We=1;Te=0;Qe=5126;Se=Vd=Rd=Re=0;ia(Qd)?(ze=!0,Je=J.createStream(34962,
Qd),Qe=Je.dtype):(Je=J.getBuffer(Qd))?Qe=Je.dtype:"constant"in Qd?(We=2,"number"===typeof Qd.constant?(Rd=Qd.constant,Vd=Se=Re=0):(Rd=0<Qd.constant.length?Qd.constant[0]:0,Vd=1<Qd.constant.length?Qd.constant[1]:0,Se=2<Qd.constant.length?Qd.constant[2]:0,Re=3<Qd.constant.length?Qd.constant[3]:0)):(Je=ia(Qd.buffer)?J.createStream(34962,Qd.buffer):J.getBuffer(Qd.buffer),Qe="type"in Qd?Wd[Qd.type]:Je.dtype,Xe=!!Qd.normalized,Me=Qd.size|0,Pe=Qd.offset|0,Te=Qd.stride|0,Ue=Qd.divisor|0);qf=m.buffer;m.buffer=
Je;hf=m.divisor;m.divisor=Ue;bf=m.normalized;m.normalized=Xe;ef=m.offset;m.offset=Pe;ff=m.size;m.size=Me;gf=m.state;m.state=We;nf=m.stride;m.stride=Te;kf=m.type;m.type=Qe;of=m.w;m.w=Re;Af=m.x;m.x=Rd;Bf=m.y;m.y=Vd;Ne=m.z;m.z=Se;Ae=qa.call(this,ja,b,d);lf=!1;mf=null;Cf=0;Ff=!1;Df=zf=0;Ef=1;uf=0;vf=5126;Hf=xf=wf=tf=0;ia(Ae)?(lf=!0,mf=J.createStream(34962,Ae),vf=mf.dtype):(mf=J.getBuffer(Ae))?vf=mf.dtype:"constant"in Ae?(Ef=2,"number"===typeof Ae.constant?(wf=Ae.constant,xf=Hf=tf=0):(wf=0<Ae.constant.length?
Ae.constant[0]:0,xf=1<Ae.constant.length?Ae.constant[1]:0,Hf=2<Ae.constant.length?Ae.constant[2]:0,tf=3<Ae.constant.length?Ae.constant[3]:0)):(mf=ia(Ae.buffer)?J.createStream(34962,Ae.buffer):J.getBuffer(Ae.buffer),vf="type"in Ae?Wd[Ae.type]:mf.dtype,Ff=!!Ae.normalized,Df=Ae.size|0,zf=Ae.offset|0,uf=Ae.stride|0,Cf=Ae.divisor|0);If=L.buffer;L.buffer=mf;Jf=L.divisor;L.divisor=Cf;Kf=L.normalized;L.normalized=Ff;rf=L.offset;L.offset=zf;Pf=L.size;L.size=Df;Gf=L.state;L.state=Ef;sf=L.stride;L.stride=uf;
bg=L.type;L.type=vf;Qf=L.w;L.w=tf;Rf=L.x;L.x=wf;pg=L.y;L.y=xf;cf=L.z;L.z=Hf;Ze=fa.call(this,ja,b,d);Lf=!1;Mf=null;dg=0;eg=!1;gg=fg=0;hg=1;Uf=0;Sf=5126;ig=Xf=Wf=Vf=0;ia(Ze)?(Lf=!0,Mf=J.createStream(34962,Ze),Sf=Mf.dtype):(Mf=J.getBuffer(Ze))?Sf=Mf.dtype:"constant"in Ze?(hg=2,"number"===typeof Ze.constant?(Wf=Ze.constant,Xf=ig=Vf=0):(Wf=0<Ze.constant.length?Ze.constant[0]:0,Xf=1<Ze.constant.length?Ze.constant[1]:0,ig=2<Ze.constant.length?Ze.constant[2]:0,Vf=3<Ze.constant.length?Ze.constant[3]:0)):(Mf=
ia(Ze.buffer)?J.createStream(34962,Ze.buffer):J.getBuffer(Ze.buffer),Sf="type"in Ze?Wd[Ze.type]:Mf.dtype,eg=!!Ze.normalized,gg=Ze.size|0,fg=Ze.offset|0,Uf=Ze.stride|0,dg=Ze.divisor|0);qg=a.buffer;a.buffer=Mf;rg=a.divisor;a.divisor=dg;sg=a.normalized;a.normalized=eg;tg=a.offset;a.offset=fg;ug=a.size;a.size=gg;vg=a.state;a.state=hg;wg=a.stride;a.stride=Uf;xg=a.type;a.type=Sf;yg=a.w;a.w=Vf;zg=a.x;a.x=Wf;Ag=a.y;a.y=Xf;df=a.z;a.z=ig;$e=p.call(this,ja,b,d);Nf=!1;Of=null;jg=0;kg=!1;mg=lg=0;ng=1;Yf=0;Tf=
5126;og=ag=$f=Zf=0;ia($e)?(Nf=!0,Of=J.createStream(34962,$e),Tf=Of.dtype):(Of=J.getBuffer($e))?Tf=Of.dtype:"constant"in $e?(ng=2,"number"===typeof $e.constant?($f=$e.constant,ag=og=Zf=0):($f=0<$e.constant.length?$e.constant[0]:0,ag=1<$e.constant.length?$e.constant[1]:0,og=2<$e.constant.length?$e.constant[2]:0,Zf=3<$e.constant.length?$e.constant[3]:0)):(Of=ia($e.buffer)?J.createStream(34962,$e.buffer):J.getBuffer($e.buffer),Tf="type"in $e?Wd[$e.type]:Of.dtype,kg=!!$e.normalized,mg=$e.size|0,lg=$e.offset|
0,Yf=$e.stride|0,jg=$e.divisor|0);Bg=aa.buffer;aa.buffer=Of;Cg=aa.divisor;aa.divisor=jg;Dg=aa.normalized;aa.normalized=kg;Eg=aa.offset;aa.offset=lg;Fg=aa.size;aa.size=mg;Gg=aa.state;aa.state=ng;Hg=aa.stride;aa.stride=Yf;Ig=aa.type;aa.type=Tf;Jg=aa.w;aa.w=Zf;Kg=aa.x;aa.x=$f;Lg=aa.y;aa.y=ag;Mg=aa.z;aa.z=og;Ng=X.vert;X.vert=44;Pg=X.frag;X.frag=43;Ca.dirty=!0;c(ja,b,d);ja.viewportWidth=u;ja.viewportHeight=r;Fd[0]=v;Fd[1]=x;Fd[2]=w;Fd[3]=z;H[0]=N;H[1]=F;H[2]=M;H[3]=G;va.blend_enable=O;wa[0]=K;wa[1]=I;
wa[2]=C;wa[3]=Y;va.depth_enable=V;ce[0]=ba;ce[1]=ma;ce[2]=na;ce[3]=ea;va.scissor_enable=ga;va.stencil_enable=ka;oa&&(y.cpuTime+=performance.now()-sa);ta&&Jc.destroyStream(pa);ub.elements=la;ub.offset=Ea;ub.count=Pa;ub.primitive=zb;ha[45]=Oa;ha[48]=tc;ha[10]=ob;ha[46]=hb;ha[47]=Qa;ha[34]=Jb;ha[6]=eb;ha[7]=rd;ha[8]=jb;ha[9]=ua;xa&&J.destroyStream(Va);Q.buffer=ya;Q.divisor=Vb;Q.normalized=Ka;Q.offset=Ob;Q.size=gb;Q.state=ib;Q.stride=za;Q.type=dc;Q.w=Da;Q.x=qb;Q.y=rb;Q.z=Ya;kc&&J.destroyStream(tb);P.buffer=
sb;P.divisor=vc;P.normalized=xb;P.offset=pc;P.size=sc;P.state=ic;P.stride=Lc;P.type=bd;P.w=md;P.x=Wb;P.y=cc;P.z=Pb;Zb&&J.destroyStream(mb);h.buffer=Rc;h.divisor=Nc;h.normalized=Lb;h.offset=Hb;h.size=Oc;h.state=Fc;h.stride=Sc;h.type=fc;h.w=Vc;h.x=id;h.y=fd;h.z=Ed;Uc&&J.destroyStream(vd);g.buffer=zd;g.divisor=Ad;g.normalized=ie;g.offset=se;g.size=ve;g.state=he;g.stride=fe;g.type=de;g.w=pe;g.x=ae;g.y=je;g.z=xc;qe&&J.destroyStream(me);R.buffer=re;R.divisor=Be;R.normalized=Fe;R.offset=Ge;R.size=He;R.state=
Ce;R.stride=Kd;R.type=Sd;R.w=Yd;R.x=be;R.y=Ie;R.z=Dd;ze&&J.destroyStream(Je);m.buffer=qf;m.divisor=hf;m.normalized=bf;m.offset=ef;m.size=ff;m.state=gf;m.stride=nf;m.type=kf;m.w=of;m.x=Af;m.y=Bf;m.z=Ne;lf&&J.destroyStream(mf);L.buffer=If;L.divisor=Jf;L.normalized=Kf;L.offset=rf;L.size=Pf;L.state=Gf;L.stride=sf;L.type=bg;L.w=Qf;L.x=Rf;L.y=pg;L.z=cf;Lf&&J.destroyStream(Mf);a.buffer=qg;a.divisor=rg;a.normalized=sg;a.offset=tg;a.size=ug;a.state=vg;a.stride=wg;a.type=xg;a.w=yg;a.x=zg;a.y=Ag;a.z=df;Nf&&
J.destroyStream(Of);aa.buffer=Bg;aa.divisor=Cg;aa.normalized=Dg;aa.offset=Eg;aa.size=Fg;aa.state=Gg;aa.stride=Hg;aa.type=Ig;aa.w=Jg;aa.x=Kg;aa.y=Lg;aa.z=Mg;X.vert=Ng;X.frag=Pg;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(d,y,n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Ja,Ld,oa,Oa,ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa,tb,
Ha,W,nb,ga,pa,ac,pc,ic,rd){var tc,Y,J,ja,Ca,ub,Jc,Uc,F,w,ia,va,X,ha,ra,H,t,da,z,wa,ma,k,mc,V,q,Jb,zb,Ue,te,ce,le,Ed,se,md,ie,ve,yd,Fd,Zd;tc=d.attributes;Y=d.buffer;J=d.context;ja=d.current;Ca=d.draw;ub=d.elements;Jc=d.extensions;Uc=d.framebuffer;F=d.gl;w=d.isBufferArgs;ia=d.next;va=d.shader;X=d.uniforms;ha=d.vao;ra=ia.blend_color;H=ja.blend_color;t=ia.blend_equation;da=ja.blend_equation;z=ia.blend_func;wa=ja.blend_func;ma=ia.colorMask;k=ja.colorMask;mc=ia.depth_range;V=ja.depth_range;q=ia.polygonOffset_offset;
Jb=ja.polygonOffset_offset;zb=ia.sample_coverage;Ue=ja.sample_coverage;te=ia.scissor_box;ce=ja.scissor_box;le=ia.stencil_func;Ed=ja.stencil_func;se=ia.stencil_opBack;md=ja.stencil_opBack;ie=ia.stencil_opFront;ve=ja.stencil_opFront;yd=ia.viewport;Fd=ja.viewport;Zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,e,g,f,h;c=Uc.next;c!==Uc.cur&&(c?F.bindFramebuffer(36160,c.framebuffer):F.bindFramebuffer(36160,null),Uc.cur=
c);if(ja.dirty){var l,m,n,p,r,v,x,z,A,B,N,D,E,G,L,K,C,P,Q,R,T,X,Z,aa,na,fa,ca,va,ra,sa,qa,Bb,Ta,Ib;l=ia.dither;l!==ja.dither&&(l?F.enable(3024):F.disable(3024),ja.dither=l);m=t[0];n=t[1];if(m!==da[0]||n!==da[1])F.blendEquationSeparate(m,n),da[0]=m,da[1]=n;p=ia.depth_func;p!==ja.depth_func&&(F.depthFunc(p),ja.depth_func=p);r=mc[0];v=mc[1];if(r!==V[0]||v!==V[1])F.depthRange(r,v),V[0]=r,V[1]=v;x=ia.depth_mask;x!==ja.depth_mask&&(F.depthMask(x),ja.depth_mask=x);z=ma[0];A=ma[1];B=ma[2];N=ma[3];if(z!==
k[0]||A!==k[1]||B!==k[2]||N!==k[3])F.colorMask(z,A,B,N),k[0]=z,k[1]=A,k[2]=B,k[3]=N;D=ia.cull_enable;D!==ja.cull_enable&&(D?F.enable(2884):F.disable(2884),ja.cull_enable=D);E=ia.cull_face;E!==ja.cull_face&&(F.cullFace(E),ja.cull_face=E);G=ia.frontFace;G!==ja.frontFace&&(F.frontFace(G),ja.frontFace=G);L=ia.lineWidth;L!==ja.lineWidth&&(F.lineWidth(L),ja.lineWidth=L);K=ia.polygonOffset_enable;K!==ja.polygonOffset_enable&&(K?F.enable(32823):F.disable(32823),ja.polygonOffset_enable=K);C=q[0];P=q[1];if(C!==
Jb[0]||P!==Jb[1])F.polygonOffset(C,P),Jb[0]=C,Jb[1]=P;Q=ia.sample_alpha;Q!==ja.sample_alpha&&(Q?F.enable(32926):F.disable(32926),ja.sample_alpha=Q);R=ia.sample_enable;R!==ja.sample_enable&&(R?F.enable(32928):F.disable(32928),ja.sample_enable=R);T=zb[0];X=zb[1];if(T!==Ue[0]||X!==Ue[1])F.sampleCoverage(T,X),Ue[0]=T,Ue[1]=X;Z=ia.stencil_mask;Z!==ja.stencil_mask&&(F.stencilMask(Z),ja.stencil_mask=Z);aa=le[0];na=le[1];fa=le[2];if(aa!==Ed[0]||na!==Ed[1]||fa!==Ed[2])F.stencilFunc(aa,na,fa),Ed[0]=aa,Ed[1]=
na,Ed[2]=fa;ca=ie[0];va=ie[1];ra=ie[2];sa=ie[3];if(ca!==ve[0]||va!==ve[1]||ra!==ve[2]||sa!==ve[3])F.stencilOpSeparate(ca,va,ra,sa),ve[0]=ca,ve[1]=va,ve[2]=ra,ve[3]=sa;qa=se[0];Bb=se[1];Ta=se[2];Ib=se[3];if(qa!==md[0]||Bb!==md[1]||Ta!==md[2]||Ib!==md[3])F.stencilOpSeparate(qa,Bb,Ta,Ib),md[0]=qa,md[1]=Bb,md[2]=Ta,md[3]=Ib}F.blendColor(0,0,0,1);H[0]=0;H[1]=0;H[2]=0;H[3]=1;F.enable(3042);ja.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;F.disable(2929);ja.depth_enable=
!1;F.enable(3089);ja.scissor_enable=!0;F.disable(2960);ja.stencil_enable=!1;if(d=ja.profile)e=performance.now(),y.count+=b;F.useProgram(la.program);g=Jc.angle_instanced_arrays;var db;ha.setVAO(null);F.uniform1i(u.location,!1);F.uniform1i(Pa.location,ta.bind());db=Ca.instances;for(f=0;f<b;++f){h=a[f];var Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,
sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,yd,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,te,vd,ge,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,jf,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,pf,Xe,Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,qf,hf,bf,ef,ff,gf,nf,kf,of,Af,Bf,Ne,Ae,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf;Ec=h.viewport;Rb=Ec.x|0;$d=Ec.y|0;$b="width"in Ec?Ec.width|0:J.framebufferWidth-Rb;Sb="height"in Ec?Ec.height|
0:J.framebufferHeight-$d;pd=J.viewportWidth;J.viewportWidth=$b;Tb=J.viewportHeight;J.viewportHeight=Sb;F.viewport(Rb,$d,$b,Sb);Fd[0]=Rb;Fd[1]=$d;Fd[2]=$b;Fd[3]=Sb;Na=h.viewport;ob=Na.x|0;vb=Na.y|0;hb="width"in Na?Na.width|0:J.framebufferWidth-ob;Qa="height"in Na?Na.height|0:J.framebufferHeight-vb;F.scissor(ob,vb,hb,Qa);ce[0]=ob;ce[1]=vb;ce[2]=hb;ce[3]=Qa;lc=La.call(this,J,h,f);Yb=!1;Zc=null;eb=0;jc=!1;hc=dd=0;jb=1;kb=0;ua=5126;cb=Va=xa=pb=0;w(lc)?(Yb=!0,Zc=Y.createStream(34962,lc),ua=Zc.dtype):(Zc=
Y.getBuffer(lc))?ua=Zc.dtype:"constant"in lc?(jb=2,"number"===typeof lc.constant?(xa=lc.constant,Va=cb=pb=0):(xa=0<lc.constant.length?lc.constant[0]:0,Va=1<lc.constant.length?lc.constant[1]:0,cb=2<lc.constant.length?lc.constant[2]:0,pb=3<lc.constant.length?lc.constant[3]:0)):(Zc=w(lc.buffer)?Y.createStream(34962,lc.buffer):Y.getBuffer(lc.buffer),ua="type"in lc?Zd[lc.type]:Zc.dtype,jc=!!lc.normalized,hc=lc.size|0,dd=lc.offset|0,kb=lc.stride|0,eb=lc.divisor|0);Aa=ac.location;fb=tc[Aa];if(1===jb){fb.buffer||
F.enableVertexAttribArray(Aa);Ia=hc||1;if(fb.type!==ua||fb.size!==Ia||fb.buffer!==Zc||fb.normalized!==jc||fb.offset!==dd||fb.stride!==kb)F.bindBuffer(34962,Zc.buffer),F.vertexAttribPointer(Aa,Ia,ua,jc,kb,dd),fb.type=ua,fb.size=Ia,fb.buffer=Zc,fb.normalized=jc,fb.offset=dd,fb.stride=kb;fb.divisor!==eb&&(g.vertexAttribDivisorANGLE(Aa,eb),fb.divisor=eb)}else if(fb.buffer&&(F.disableVertexAttribArray(Aa),fb.buffer=null),fb.x!==xa||fb.y!==Va||fb.z!==cb||fb.w!==pb)F.vertexAttrib4f(Aa,xa,Va,cb,pb),fb.x=
xa,fb.y=Va,fb.z=cb,fb.w=pb;Cb=Ja.call(this,J,h,f);Ab=!1;Sa=null;Ic=0;Kb=!1;Ub=$a=0;ya=1;ud=0;Ka=5126;za=ib=gb=Ob=0;w(Cb)?(Ab=!0,Sa=Y.createStream(34962,Cb),Ka=Sa.dtype):(Sa=Y.getBuffer(Cb))?Ka=Sa.dtype:"constant"in Cb?(ya=2,"number"===typeof Cb.constant?(gb=Cb.constant,ib=za=Ob=0):(gb=0<Cb.constant.length?Cb.constant[0]:0,ib=1<Cb.constant.length?Cb.constant[1]:0,za=2<Cb.constant.length?Cb.constant[2]:0,Ob=3<Cb.constant.length?Cb.constant[3]:0)):(Sa=w(Cb.buffer)?Y.createStream(34962,Cb.buffer):Y.getBuffer(Cb.buffer),
Ka="type"in Cb?Zd[Cb.type]:Sa.dtype,Kb=!!Cb.normalized,Ub=Cb.size|0,$a=Cb.offset|0,ud=Cb.stride|0,Ic=Cb.divisor|0);dc=ic.location;Da=tc[dc];if(1===ya){Da.buffer||F.enableVertexAttribArray(dc);qb=Ub||1;if(Da.type!==Ka||Da.size!==qb||Da.buffer!==Sa||Da.normalized!==Kb||Da.offset!==$a||Da.stride!==ud)F.bindBuffer(34962,Sa.buffer),F.vertexAttribPointer(dc,qb,Ka,Kb,ud,$a),Da.type=Ka,Da.size=qb,Da.buffer=Sa,Da.normalized=Kb,Da.offset=$a,Da.stride=ud;Da.divisor!==Ic&&(g.vertexAttribDivisorANGLE(dc,Ic),Da.divisor=
Ic)}else if(Da.buffer&&(F.disableVertexAttribArray(dc),Da.buffer=null),Da.x!==gb||Da.y!==ib||Da.z!==za||Da.w!==Ob)F.vertexAttrib4f(dc,gb,ib,za,Ob),Da.x=gb,Da.y=ib,Da.z=za,Da.w=Ob;rb=Ld.call(this,J,h,f);Ya=!1;Za=null;kc=0;ad=!1;Wa=uc=0;Mb=1;Pc=0;Fa=5126;lb=Ba=Ra=wc=0;w(rb)?(Ya=!0,Za=Y.createStream(34962,rb),Fa=Za.dtype):(Za=Y.getBuffer(rb))?Fa=Za.dtype:"constant"in rb?(Mb=2,"number"===typeof rb.constant?(Ra=rb.constant,Ba=lb=wc=0):(Ra=0<rb.constant.length?rb.constant[0]:0,Ba=1<rb.constant.length?rb.constant[1]:
0,lb=2<rb.constant.length?rb.constant[2]:0,wc=3<rb.constant.length?rb.constant[3]:0)):(Za=w(rb.buffer)?Y.createStream(34962,rb.buffer):Y.getBuffer(rb.buffer),Fa="type"in rb?Zd[rb.type]:Za.dtype,ad=!!rb.normalized,Wa=rb.size|0,uc=rb.offset|0,Pc=rb.stride|0,kc=rb.divisor|0);wb=pc.location;Db=tc[wb];if(1===Mb){Db.buffer||F.enableVertexAttribArray(wb);sb=Wa||1;if(Db.type!==Fa||Db.size!==sb||Db.buffer!==Za||Db.normalized!==ad||Db.offset!==uc||Db.stride!==Pc)F.bindBuffer(34962,Za.buffer),F.vertexAttribPointer(wb,
sb,Fa,ad,Pc,uc),Db.type=Fa,Db.size=sb,Db.buffer=Za,Db.normalized=ad,Db.offset=uc,Db.stride=Pc;Db.divisor!==kc&&(g.vertexAttribDivisorANGLE(wb,kc),Db.divisor=kc)}else if(Db.buffer&&(F.disableVertexAttribArray(wb),Db.buffer=null),Db.x!==Ra||Db.y!==Ba||Db.z!==lb||Db.w!==wc)F.vertexAttrib4f(wb,Ra,Ba,lb,wc),Db.x=Ra,Db.y=Ba,Db.z=lb,Db.w=wc;vc=oa.call(this,J,h,f);xb=!1;xd=null;sc=0;Md=!1;bd=Lc=0;od=1;Wb=0;cc=5126;mb=Zb=Ga=Pb=0;w(vc)?(xb=!0,xd=Y.createStream(34962,vc),cc=xd.dtype):(xd=Y.getBuffer(vc))?cc=
xd.dtype:"constant"in vc?(od=2,"number"===typeof vc.constant?(Ga=vc.constant,Zb=mb=Pb=0):(Ga=0<vc.constant.length?vc.constant[0]:0,Zb=1<vc.constant.length?vc.constant[1]:0,mb=2<vc.constant.length?vc.constant[2]:0,Pb=3<vc.constant.length?vc.constant[3]:0)):(xd=w(vc.buffer)?Y.createStream(34962,vc.buffer):Y.getBuffer(vc.buffer),cc="type"in vc?Zd[vc.type]:xd.dtype,Md=!!vc.normalized,bd=vc.size|0,Lc=vc.offset|0,Wb=vc.stride|0,sc=vc.divisor|0);yb=rd.location;Nb=tc[yb];if(1===od){Nb.buffer||F.enableVertexAttribArray(yb);
Qb=bd||1;if(Nb.type!==cc||Nb.size!==Qb||Nb.buffer!==xd||Nb.normalized!==Md||Nb.offset!==Lc||Nb.stride!==Wb)F.bindBuffer(34962,xd.buffer),F.vertexAttribPointer(yb,Qb,cc,Md,Wb,Lc),Nb.type=cc,Nb.size=Qb,Nb.buffer=xd,Nb.normalized=Md,Nb.offset=Lc,Nb.stride=Wb;Nb.divisor!==sc&&(g.vertexAttribDivisorANGLE(yb,sc),Nb.divisor=sc)}else if(Nb.buffer&&(F.disableVertexAttribArray(yb),Nb.buffer=null),Nb.x!==Ga||Nb.y!==Zb||Nb.z!==mb||Nb.w!==Pb)F.vertexAttrib4f(yb,Ga,Zb,mb,Pb),Nb.x=Ga,Nb.y=Zb,Nb.z=mb,Nb.w=Pb;ec=
Oa.call(this,J,h,f);gc=!1;yd=null;zc=0;Ac=!1;Mc=Bc=0;Xc=1;Rc=0;Nc=5126;Fc=Oc=Hb=Lb=0;w(ec)?(gc=!0,yd=Y.createStream(34962,ec),Nc=yd.dtype):(yd=Y.getBuffer(ec))?Nc=yd.dtype:"constant"in ec?(Xc=2,"number"===typeof ec.constant?(Hb=ec.constant,Oc=Fc=Lb=0):(Hb=0<ec.constant.length?ec.constant[0]:0,Oc=1<ec.constant.length?ec.constant[1]:0,Fc=2<ec.constant.length?ec.constant[2]:0,Lb=3<ec.constant.length?ec.constant[3]:0)):(yd=w(ec.buffer)?Y.createStream(34962,ec.buffer):Y.getBuffer(ec.buffer),Nc="type"in
ec?Zd[ec.type]:yd.dtype,Ac=!!ec.normalized,Mc=ec.size|0,Bc=ec.offset|0,Rc=ec.stride|0,zc=ec.divisor|0);Sc=nb.location;fc=tc[Sc];if(1===Xc){fc.buffer||F.enableVertexAttribArray(Sc);Vc=Mc||1;if(fc.type!==Nc||fc.size!==Vc||fc.buffer!==yd||fc.normalized!==Ac||fc.offset!==Bc||fc.stride!==Rc)F.bindBuffer(34962,yd.buffer),F.vertexAttribPointer(Sc,Vc,Nc,Ac,Rc,Bc),fc.type=Nc,fc.size=Vc,fc.buffer=yd,fc.normalized=Ac,fc.offset=Bc,fc.stride=Rc;fc.divisor!==zc&&(g.vertexAttribDivisorANGLE(Sc,zc),fc.divisor=zc)}else if(fc.buffer&&
(F.disableVertexAttribArray(Sc),fc.buffer=null),fc.x!==Hb||fc.y!==Oc||fc.z!==Fc||fc.w!==Lb)F.vertexAttrib4f(Sc,Hb,Oc,Fc,Lb),fc.x=Hb,fc.y=Oc,fc.z=Fc,fc.w=Lb;id=ba.call(this,J,h,f);fd=!1;kd=null;Wc=0;te=!1;ge=vd=0;ue=1;ee=0;Jd=5126;jd=Cc=cd=Hd=0;w(id)?(fd=!0,kd=Y.createStream(34962,id),Jd=kd.dtype):(kd=Y.getBuffer(id))?Jd=kd.dtype:"constant"in id?(ue=2,"number"===typeof id.constant?(cd=id.constant,Cc=jd=Hd=0):(cd=0<id.constant.length?id.constant[0]:0,Cc=1<id.constant.length?id.constant[1]:0,jd=2<id.constant.length?
id.constant[2]:0,Hd=3<id.constant.length?id.constant[3]:0)):(kd=w(id.buffer)?Y.createStream(34962,id.buffer):Y.getBuffer(id.buffer),Jd="type"in id?Zd[id.type]:kd.dtype,te=!!id.normalized,ge=id.size|0,vd=id.offset|0,ee=id.stride|0,Wc=id.divisor|0);gd=ab.location;$c=tc[gd];if(1===ue){$c.buffer||F.enableVertexAttribArray(gd);ld=ge||1;if($c.type!==Jd||$c.size!==ld||$c.buffer!==kd||$c.normalized!==te||$c.offset!==vd||$c.stride!==ee)F.bindBuffer(34962,kd.buffer),F.vertexAttribPointer(gd,ld,Jd,te,ee,vd),
$c.type=Jd,$c.size=ld,$c.buffer=kd,$c.normalized=te,$c.offset=vd,$c.stride=ee;$c.divisor!==Wc&&(g.vertexAttribDivisorANGLE(gd,Wc),$c.divisor=Wc)}else if($c.buffer&&(F.disableVertexAttribArray(gd),$c.buffer=null),$c.x!==cd||$c.y!==Cc||$c.z!==jd||$c.w!==Hd)F.vertexAttrib4f(gd,cd,Cc,jd,Hd),$c.x=cd,$c.y=Cc,$c.z=jd,$c.w=Hd;zd=M.call(this,J,h,f);Ad=!1;xe=null;Ke=0;we=!1;fe=he=0;de=1;pe=0;ae=5126;qe=Tc=xc=je=0;w(zd)?(Ad=!0,xe=Y.createStream(34962,zd),ae=xe.dtype):(xe=Y.getBuffer(zd))?ae=xe.dtype:"constant"in
zd?(de=2,"number"===typeof zd.constant?(xc=zd.constant,Tc=qe=je=0):(xc=0<zd.constant.length?zd.constant[0]:0,Tc=1<zd.constant.length?zd.constant[1]:0,qe=2<zd.constant.length?zd.constant[2]:0,je=3<zd.constant.length?zd.constant[3]:0)):(xe=w(zd.buffer)?Y.createStream(34962,zd.buffer):Y.getBuffer(zd.buffer),ae="type"in zd?Zd[zd.type]:xe.dtype,we=!!zd.normalized,fe=zd.size|0,he=zd.offset|0,pe=zd.stride|0,Ke=zd.divisor|0);me=S.location;Id=tc[me];if(1===de){Id.buffer||F.enableVertexAttribArray(me);Nd=fe||
4;if(Id.type!==ae||Id.size!==Nd||Id.buffer!==xe||Id.normalized!==we||Id.offset!==he||Id.stride!==pe)F.bindBuffer(34962,xe.buffer),F.vertexAttribPointer(me,Nd,ae,we,pe,he),Id.type=ae,Id.size=Nd,Id.buffer=xe,Id.normalized=we,Id.offset=he,Id.stride=pe;Id.divisor!==Ke&&(g.vertexAttribDivisorANGLE(me,Ke),Id.divisor=Ke)}else if(Id.buffer&&(F.disableVertexAttribArray(me),Id.buffer=null),Id.x!==xc||Id.y!==Tc||Id.z!==qe||Id.w!==je)F.vertexAttrib4f(me,xc,Tc,qe,je),Id.x=xc,Id.y=Tc,Id.z=qe,Id.w=je;Od=O.call(this,
J,h,f);Pd=!1;ke=null;Ee=0;ye=!1;jf=oe=0;Oe=1;Le=0;re=5126;He=Ge=Fe=Be=0;w(Od)?(Pd=!0,ke=Y.createStream(34962,Od),re=ke.dtype):(ke=Y.getBuffer(Od))?re=ke.dtype:"constant"in Od?(Oe=2,"number"===typeof Od.constant?(Fe=Od.constant,Ge=He=Be=0):(Fe=0<Od.constant.length?Od.constant[0]:0,Ge=1<Od.constant.length?Od.constant[1]:0,He=2<Od.constant.length?Od.constant[2]:0,Be=3<Od.constant.length?Od.constant[3]:0)):(ke=w(Od.buffer)?Y.createStream(34962,Od.buffer):Y.getBuffer(Od.buffer),re="type"in Od?Zd[Od.type]:
ke.dtype,ye=!!Od.normalized,jf=Od.size|0,oe=Od.offset|0,Le=Od.stride|0,Ee=Od.divisor|0);Ce=Vb.location;Kd=tc[Ce];if(1===Oe){Kd.buffer||F.enableVertexAttribArray(Ce);Sd=jf||4;if(Kd.type!==re||Kd.size!==Sd||Kd.buffer!==ke||Kd.normalized!==ye||Kd.offset!==oe||Kd.stride!==Le)F.bindBuffer(34962,ke.buffer),F.vertexAttribPointer(Ce,Sd,re,ye,Le,oe),Kd.type=re,Kd.size=Sd,Kd.buffer=ke,Kd.normalized=ye,Kd.offset=oe,Kd.stride=Le;Kd.divisor!==Ee&&(g.vertexAttribDivisorANGLE(Ce,Ee),Kd.divisor=Ee)}else if(Kd.buffer&&
(F.disableVertexAttribArray(Ce),Kd.buffer=null),Kd.x!==Fe||Kd.y!==Ge||Kd.z!==He||Kd.w!==Be)F.vertexAttrib4f(Ce,Fe,Ge,He,Be),Kd.x=Fe,Kd.y=Ge,Kd.z=He,Kd.w=Be;Yd=U.call(this,J,h,f);be=!1;Ie=null;Dd=0;Qd=!1;Je=ze=0;pf=1;Xe=0;Pe=5126;Qe=Te=We=Me=0;w(Yd)?(be=!0,Ie=Y.createStream(34962,Yd),Pe=Ie.dtype):(Ie=Y.getBuffer(Yd))?Pe=Ie.dtype:"constant"in Yd?(pf=2,"number"===typeof Yd.constant?(We=Yd.constant,Te=Qe=Me=0):(We=0<Yd.constant.length?Yd.constant[0]:0,Te=1<Yd.constant.length?Yd.constant[1]:0,Qe=2<Yd.constant.length?
Yd.constant[2]:0,Me=3<Yd.constant.length?Yd.constant[3]:0)):(Ie=w(Yd.buffer)?Y.createStream(34962,Yd.buffer):Y.getBuffer(Yd.buffer),Pe="type"in Yd?Zd[Yd.type]:Ie.dtype,Qd=!!Yd.normalized,Je=Yd.size|0,ze=Yd.offset|0,Xe=Yd.stride|0,Dd=Yd.divisor|0);Re=ka.location;Rd=tc[Re];if(1===pf){Rd.buffer||F.enableVertexAttribArray(Re);Vd=Je||1;if(Rd.type!==Pe||Rd.size!==Vd||Rd.buffer!==Ie||Rd.normalized!==Qd||Rd.offset!==ze||Rd.stride!==Xe)F.bindBuffer(34962,Ie.buffer),F.vertexAttribPointer(Re,Vd,Pe,Qd,Xe,ze),
Rd.type=Pe,Rd.size=Vd,Rd.buffer=Ie,Rd.normalized=Qd,Rd.offset=ze,Rd.stride=Xe;Rd.divisor!==Dd&&(g.vertexAttribDivisorANGLE(Re,Dd),Rd.divisor=Dd)}else if(Rd.buffer&&(F.disableVertexAttribArray(Re),Rd.buffer=null),Rd.x!==We||Rd.y!==Te||Rd.z!==Qe||Rd.w!==Me)F.vertexAttrib4f(Re,We,Te,Qe,Me),Rd.x=We,Rd.y=Te,Rd.z=Qe,Rd.w=Me;Se=J.pixelRatio;f&&qf===Se||(qf=Se,F.uniform1f(tb.location,Se));hf=I.call(this,J,h,f);bf=hf[0];ff=hf[1];f&&ef===bf&&gf===ff||(ef=bf,gf=ff,F.uniform2f(Ea.location,bf,ff));nf=h.scale;
kf=nf[0];Af=nf[1];f&&of===kf&&Bf===Af||(of=kf,Bf=Af,F.uniform2f(Ha.location,kf,Af));Ne=h.scaleFract;Ae=Ne[0];mf=Ne[1];f&&lf===Ae&&Cf===mf||(lf=Ae,Cf=mf,F.uniform2f(W.location,Ae,mf));Ff=h.translate;zf=Ff[0];Ef=Ff[1];f&&Df===zf&&uf===Ef||(Df=zf,uf=Ef,F.uniform2f(ga.location,zf,Ef));vf=h.translateFract;tf=vf[0];xf=vf[1];f&&wf===tf&&Hf===xf||(wf=tf,Hf=xf,F.uniform2f(pa.location,tf,xf));If=h.opacity;f&&Jf===If||(Jf=If,F.uniform1f(ea.location,If));Kf=h.elements;rf=null;(rf=(Pf=w(Kf))?ub.createStream(Kf):
ub.getElements(Kf))&&F.bindBuffer(34963,rf.buffer.buffer);Gf=h.offset;if(sf=h.count)0<db?rf?g.drawElementsInstancedANGLE(0,sf,rf.type,Gf<<(rf.type-5121>>1),db):g.drawArraysInstancedANGLE(0,Gf,sf,db):0>db&&(rf?F.drawElements(0,sf,rf.type,Gf<<(rf.type-5121>>1)):F.drawArrays(0,Gf,sf)),J.viewportWidth=pd,J.viewportHeight=Tb,Yb&&Y.destroyStream(Zc),Ab&&Y.destroyStream(Sa),Ya&&Y.destroyStream(Za),xb&&Y.destroyStream(xd),gc&&Y.destroyStream(yd),fd&&Y.destroyStream(kd),Ad&&Y.destroyStream(xe),Pd&&Y.destroyStream(ke),
be&&Y.destroyStream(Ie),Pf&&ub.destroyStream(rf)}ta.unbind();ja.dirty=!0;ha.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(a){var d,e,g,h,l,m,p,z,A,B,D,E,L,M,O,P,I,Q,R,U,X,Z,aa,ba,fa,ca,va,ra,oa,qa,ta,la,La,Ma,Ja,Xa,sa,Oa,Bb,Ta,Ib,db,Eb,Rb,yd,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,te,zc,
Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id,fd,kd,Wc,Ld,vd,ge,ue,ee,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,xe,Ke,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,jf;d=Uc.next;d!==Uc.cur&&(d?F.bindFramebuffer(36160,d.framebuffer):F.bindFramebuffer(36160,null),Uc.cur=d);if(ja.dirty){var Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,pf,Xe,Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,qf,hf,bf,ef,ff,gf;Oe=ia.dither;Oe!==ja.dither&&(Oe?F.enable(3024):F.disable(3024),ja.dither=Oe);Le=t[0];re=t[1];if(Le!==da[0]||re!==da[1])F.blendEquationSeparate(Le,
re),da[0]=Le,da[1]=re;Be=ia.depth_func;Be!==ja.depth_func&&(F.depthFunc(Be),ja.depth_func=Be);Fe=mc[0];Ge=mc[1];if(Fe!==V[0]||Ge!==V[1])F.depthRange(Fe,Ge),V[0]=Fe,V[1]=Ge;He=ia.depth_mask;He!==ja.depth_mask&&(F.depthMask(He),ja.depth_mask=He);Ce=ma[0];Kd=ma[1];Sd=ma[2];Yd=ma[3];if(Ce!==k[0]||Kd!==k[1]||Sd!==k[2]||Yd!==k[3])F.colorMask(Ce,Kd,Sd,Yd),k[0]=Ce,k[1]=Kd,k[2]=Sd,k[3]=Yd;be=ia.cull_enable;be!==ja.cull_enable&&(be?F.enable(2884):F.disable(2884),ja.cull_enable=be);Ie=ia.cull_face;Ie!==ja.cull_face&&
(F.cullFace(Ie),ja.cull_face=Ie);Dd=ia.frontFace;Dd!==ja.frontFace&&(F.frontFace(Dd),ja.frontFace=Dd);Qd=ia.lineWidth;Qd!==ja.lineWidth&&(F.lineWidth(Qd),ja.lineWidth=Qd);ze=ia.polygonOffset_enable;ze!==ja.polygonOffset_enable&&(ze?F.enable(32823):F.disable(32823),ja.polygonOffset_enable=ze);Je=q[0];pf=q[1];if(Je!==Jb[0]||pf!==Jb[1])F.polygonOffset(Je,pf),Jb[0]=Je,Jb[1]=pf;Xe=ia.sample_alpha;Xe!==ja.sample_alpha&&(Xe?F.enable(32926):F.disable(32926),ja.sample_alpha=Xe);Pe=ia.sample_enable;Pe!==ja.sample_enable&&
(Pe?F.enable(32928):F.disable(32928),ja.sample_enable=Pe);Me=zb[0];We=zb[1];if(Me!==Ue[0]||We!==Ue[1])F.sampleCoverage(Me,We),Ue[0]=Me,Ue[1]=We;Te=ia.stencil_mask;Te!==ja.stencil_mask&&(F.stencilMask(Te),ja.stencil_mask=Te);Qe=le[0];Re=le[1];Rd=le[2];if(Qe!==Ed[0]||Re!==Ed[1]||Rd!==Ed[2])F.stencilFunc(Qe,Re,Rd),Ed[0]=Qe,Ed[1]=Re,Ed[2]=Rd;Vd=ie[0];Se=ie[1];qf=ie[2];hf=ie[3];if(Vd!==ve[0]||Se!==ve[1]||qf!==ve[2]||hf!==ve[3])F.stencilOpSeparate(Vd,Se,qf,hf),ve[0]=Vd,ve[1]=Se,ve[2]=qf,ve[3]=hf;bf=se[0];
ef=se[1];ff=se[2];gf=se[3];if(bf!==md[0]||ef!==md[1]||ff!==md[2]||gf!==md[3])F.stencilOpSeparate(bf,ef,ff,gf),md[0]=bf,md[1]=ef,md[2]=ff,md[3]=gf}e=a.viewport;g=e.x|0;h=e.y|0;l="width"in e?e.width|0:J.framebufferWidth-g;m="height"in e?e.height|0:J.framebufferHeight-h;p=J.viewportWidth;J.viewportWidth=l;z=J.viewportHeight;J.viewportHeight=m;F.viewport(g,h,l,m);Fd[0]=g;Fd[1]=h;Fd[2]=l;Fd[3]=m;F.blendColor(0,0,0,1);H[0]=0;H[1]=0;H[2]=0;H[3]=1;F.enable(3042);ja.blend_enable=!0;F.blendFuncSeparate(770,
771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;F.disable(2929);ja.depth_enable=!1;A=a.viewport;B=A.x|0;D=A.y|0;E="width"in A?A.width|0:J.framebufferWidth-B;L="height"in A?A.height|0:J.framebufferHeight-D;F.scissor(B,D,E,L);ce[0]=B;ce[1]=D;ce[2]=E;ce[3]=L;F.enable(3089);ja.scissor_enable=!0;F.disable(2960);ja.stencil_enable=!1;if(M=ja.profile)O=performance.now(),y.count++;F.useProgram(n.program);P=Jc.angle_instanced_arrays;ha.setVAO(null);I=N.call(this,J,a,0);Q=!1;R=null;U=0;X=!1;aa=Z=0;ba=1;fa=
0;ca=5126;qa=oa=ra=va=0;w(I)?(Q=!0,R=Y.createStream(34962,I),ca=R.dtype):(R=Y.getBuffer(I))?ca=R.dtype:"constant"in I?(ba=2,"number"===typeof I.constant?(ra=I.constant,oa=qa=va=0):(ra=0<I.constant.length?I.constant[0]:0,oa=1<I.constant.length?I.constant[1]:0,qa=2<I.constant.length?I.constant[2]:0,va=3<I.constant.length?I.constant[3]:0)):(R=w(I.buffer)?Y.createStream(34962,I.buffer):Y.getBuffer(I.buffer),ca="type"in I?Zd[I.type]:R.dtype,X=!!I.normalized,aa=I.size|0,Z=I.offset|0,fa=I.stride|0,U=I.divisor|
0);ta=ac.location;la=tc[ta];if(1===ba){la.buffer||F.enableVertexAttribArray(ta);La=aa||1;if(la.type!==ca||la.size!==La||la.buffer!==R||la.normalized!==X||la.offset!==Z||la.stride!==fa)F.bindBuffer(34962,R.buffer),F.vertexAttribPointer(ta,La,ca,X,fa,Z),la.type=ca,la.size=La,la.buffer=R,la.normalized=X,la.offset=Z,la.stride=fa;la.divisor!==U&&(P.vertexAttribDivisorANGLE(ta,U),la.divisor=U)}else if(la.buffer&&(F.disableVertexAttribArray(ta),la.buffer=null),la.x!==ra||la.y!==oa||la.z!==qa||la.w!==va)F.vertexAttrib4f(ta,
ra,oa,qa,va),la.x=ra,la.y=oa,la.z=qa,la.w=va;Ma=f.call(this,J,a,0);Ja=!1;Xa=null;sa=0;Oa=!1;Ta=Bb=0;Ib=1;db=0;Eb=5126;Sb=$b=yd=Rb=0;w(Ma)?(Ja=!0,Xa=Y.createStream(34962,Ma),Eb=Xa.dtype):(Xa=Y.getBuffer(Ma))?Eb=Xa.dtype:"constant"in Ma?(Ib=2,"number"===typeof Ma.constant?(yd=Ma.constant,$b=Sb=Rb=0):(yd=0<Ma.constant.length?Ma.constant[0]:0,$b=1<Ma.constant.length?Ma.constant[1]:0,Sb=2<Ma.constant.length?Ma.constant[2]:0,Rb=3<Ma.constant.length?Ma.constant[3]:0)):(Xa=w(Ma.buffer)?Y.createStream(34962,
Ma.buffer):Y.getBuffer(Ma.buffer),Eb="type"in Ma?Zd[Ma.type]:Xa.dtype,Oa=!!Ma.normalized,Ta=Ma.size|0,Bb=Ma.offset|0,db=Ma.stride|0,sa=Ma.divisor|0);pd=ic.location;Tb=tc[pd];if(1===Ib){Tb.buffer||F.enableVertexAttribArray(pd);Na=Ta||1;if(Tb.type!==Eb||Tb.size!==Na||Tb.buffer!==Xa||Tb.normalized!==Oa||Tb.offset!==Bb||Tb.stride!==db)F.bindBuffer(34962,Xa.buffer),F.vertexAttribPointer(pd,Na,Eb,Oa,db,Bb),Tb.type=Eb,Tb.size=Na,Tb.buffer=Xa,Tb.normalized=Oa,Tb.offset=Bb,Tb.stride=db;Tb.divisor!==sa&&(P.vertexAttribDivisorANGLE(pd,
sa),Tb.divisor=sa)}else if(Tb.buffer&&(F.disableVertexAttribArray(pd),Tb.buffer=null),Tb.x!==yd||Tb.y!==$b||Tb.z!==Sb||Tb.w!==Rb)F.vertexAttrib4f(pd,yd,$b,Sb,Rb),Tb.x=yd,Tb.y=$b,Tb.z=Sb,Tb.w=Rb;ob=c.call(this,J,a,0);vb=!1;hb=null;Qa=0;lc=!1;Zc=Yb=0;eb=1;jc=0;dd=5126;ua=kb=jb=hc=0;w(ob)?(vb=!0,hb=Y.createStream(34962,ob),dd=hb.dtype):(hb=Y.getBuffer(ob))?dd=hb.dtype:"constant"in ob?(eb=2,"number"===typeof ob.constant?(jb=ob.constant,kb=ua=hc=0):(jb=0<ob.constant.length?ob.constant[0]:0,kb=1<ob.constant.length?
ob.constant[1]:0,ua=2<ob.constant.length?ob.constant[2]:0,hc=3<ob.constant.length?ob.constant[3]:0)):(hb=w(ob.buffer)?Y.createStream(34962,ob.buffer):Y.getBuffer(ob.buffer),dd="type"in ob?Zd[ob.type]:hb.dtype,lc=!!ob.normalized,Zc=ob.size|0,Yb=ob.offset|0,jc=ob.stride|0,Qa=ob.divisor|0);pb=pc.location;xa=tc[pb];if(1===eb){xa.buffer||F.enableVertexAttribArray(pb);Va=Zc||1;if(xa.type!==dd||xa.size!==Va||xa.buffer!==hb||xa.normalized!==lc||xa.offset!==Yb||xa.stride!==jc)F.bindBuffer(34962,hb.buffer),
F.vertexAttribPointer(pb,Va,dd,lc,jc,Yb),xa.type=dd,xa.size=Va,xa.buffer=hb,xa.normalized=lc,xa.offset=Yb,xa.stride=jc;xa.divisor!==Qa&&(P.vertexAttribDivisorANGLE(pb,Qa),xa.divisor=Qa)}else if(xa.buffer&&(F.disableVertexAttribArray(pb),xa.buffer=null),xa.x!==jb||xa.y!==kb||xa.z!==ua||xa.w!==hc)F.vertexAttrib4f(pb,jb,kb,ua,hc),xa.x=jb,xa.y=kb,xa.z=ua,xa.w=hc;cb=x.call(this,J,a,0);Aa=!1;fb=null;Ia=0;Cb=!1;Sa=Ab=0;Ic=1;Kb=0;$a=5126;Ka=ud=ya=Ub=0;w(cb)?(Aa=!0,fb=Y.createStream(34962,cb),$a=fb.dtype):
(fb=Y.getBuffer(cb))?$a=fb.dtype:"constant"in cb?(Ic=2,"number"===typeof cb.constant?(ya=cb.constant,ud=Ka=Ub=0):(ya=0<cb.constant.length?cb.constant[0]:0,ud=1<cb.constant.length?cb.constant[1]:0,Ka=2<cb.constant.length?cb.constant[2]:0,Ub=3<cb.constant.length?cb.constant[3]:0)):(fb=w(cb.buffer)?Y.createStream(34962,cb.buffer):Y.getBuffer(cb.buffer),$a="type"in cb?Zd[cb.type]:fb.dtype,Cb=!!cb.normalized,Sa=cb.size|0,Ab=cb.offset|0,Kb=cb.stride|0,Ia=cb.divisor|0);Ob=rd.location;gb=tc[Ob];if(1===Ic){gb.buffer||
F.enableVertexAttribArray(Ob);ib=Sa||1;if(gb.type!==$a||gb.size!==ib||gb.buffer!==fb||gb.normalized!==Cb||gb.offset!==Ab||gb.stride!==Kb)F.bindBuffer(34962,fb.buffer),F.vertexAttribPointer(Ob,ib,$a,Cb,Kb,Ab),gb.type=$a,gb.size=ib,gb.buffer=fb,gb.normalized=Cb,gb.offset=Ab,gb.stride=Kb;gb.divisor!==Ia&&(P.vertexAttribDivisorANGLE(Ob,Ia),gb.divisor=Ia)}else if(gb.buffer&&(F.disableVertexAttribArray(Ob),gb.buffer=null),gb.x!==ya||gb.y!==ud||gb.z!==Ka||gb.w!==Ub)F.vertexAttrib4f(Ob,ya,ud,Ka,Ub),gb.x=
ya,gb.y=ud,gb.z=Ka,gb.w=Ub;za=b.call(this,J,a,0);dc=!1;Da=null;qb=0;rb=!1;Za=Ya=0;kc=1;ad=0;uc=5126;Fa=Pc=Mb=Wa=0;w(za)?(dc=!0,Da=Y.createStream(34962,za),uc=Da.dtype):(Da=Y.getBuffer(za))?uc=Da.dtype:"constant"in za?(kc=2,"number"===typeof za.constant?(Mb=za.constant,Pc=Fa=Wa=0):(Mb=0<za.constant.length?za.constant[0]:0,Pc=1<za.constant.length?za.constant[1]:0,Fa=2<za.constant.length?za.constant[2]:0,Wa=3<za.constant.length?za.constant[3]:0)):(Da=w(za.buffer)?Y.createStream(34962,za.buffer):Y.getBuffer(za.buffer),
uc="type"in za?Zd[za.type]:Da.dtype,rb=!!za.normalized,Za=za.size|0,Ya=za.offset|0,ad=za.stride|0,qb=za.divisor|0);wc=nb.location;Ra=tc[wc];if(1===kc){Ra.buffer||F.enableVertexAttribArray(wc);Ba=Za||1;if(Ra.type!==uc||Ra.size!==Ba||Ra.buffer!==Da||Ra.normalized!==rb||Ra.offset!==Ya||Ra.stride!==ad)F.bindBuffer(34962,Da.buffer),F.vertexAttribPointer(wc,Ba,uc,rb,ad,Ya),Ra.type=uc,Ra.size=Ba,Ra.buffer=Da,Ra.normalized=rb,Ra.offset=Ya,Ra.stride=ad;Ra.divisor!==qb&&(P.vertexAttribDivisorANGLE(wc,qb),Ra.divisor=
qb)}else if(Ra.buffer&&(F.disableVertexAttribArray(wc),Ra.buffer=null),Ra.x!==Mb||Ra.y!==Pc||Ra.z!==Fa||Ra.w!==Wa)F.vertexAttrib4f(wc,Mb,Pc,Fa,Wa),Ra.x=Mb,Ra.y=Pc,Ra.z=Fa,Ra.w=Wa;lb=v.call(this,J,a,0);wb=!1;Db=null;sb=0;vc=!1;xd=xb=0;sc=1;Md=0;Lc=5126;cc=Wb=od=bd=0;w(lb)?(wb=!0,Db=Y.createStream(34962,lb),Lc=Db.dtype):(Db=Y.getBuffer(lb))?Lc=Db.dtype:"constant"in lb?(sc=2,"number"===typeof lb.constant?(od=lb.constant,Wb=cc=bd=0):(od=0<lb.constant.length?lb.constant[0]:0,Wb=1<lb.constant.length?lb.constant[1]:
0,cc=2<lb.constant.length?lb.constant[2]:0,bd=3<lb.constant.length?lb.constant[3]:0)):(Db=w(lb.buffer)?Y.createStream(34962,lb.buffer):Y.getBuffer(lb.buffer),Lc="type"in lb?Zd[lb.type]:Db.dtype,vc=!!lb.normalized,xd=lb.size|0,xb=lb.offset|0,Md=lb.stride|0,sb=lb.divisor|0);Pb=ab.location;Ga=tc[Pb];if(1===sc){Ga.buffer||F.enableVertexAttribArray(Pb);Zb=xd||1;if(Ga.type!==Lc||Ga.size!==Zb||Ga.buffer!==Db||Ga.normalized!==vc||Ga.offset!==xb||Ga.stride!==Md)F.bindBuffer(34962,Db.buffer),F.vertexAttribPointer(Pb,
Zb,Lc,vc,Md,xb),Ga.type=Lc,Ga.size=Zb,Ga.buffer=Db,Ga.normalized=vc,Ga.offset=xb,Ga.stride=Md;Ga.divisor!==sb&&(P.vertexAttribDivisorANGLE(Pb,sb),Ga.divisor=sb)}else if(Ga.buffer&&(F.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==od||Ga.y!==Wb||Ga.z!==cc||Ga.w!==bd)F.vertexAttrib4f(Pb,od,Wb,cc,bd),Ga.x=od,Ga.y=Wb,Ga.z=cc,Ga.w=bd;mb=C.call(this,J,a,0);yb=!1;Nb=null;Qb=0;ec=!1;te=gc=0;zc=1;Ac=0;Bc=5126;Nc=Rc=Xc=Mc=0;w(mb)?(yb=!0,Nb=Y.createStream(34962,mb),Bc=Nb.dtype):(Nb=Y.getBuffer(mb))?Bc=
Nb.dtype:"constant"in mb?(zc=2,"number"===typeof mb.constant?(Xc=mb.constant,Rc=Nc=Mc=0):(Xc=0<mb.constant.length?mb.constant[0]:0,Rc=1<mb.constant.length?mb.constant[1]:0,Nc=2<mb.constant.length?mb.constant[2]:0,Mc=3<mb.constant.length?mb.constant[3]:0)):(Nb=w(mb.buffer)?Y.createStream(34962,mb.buffer):Y.getBuffer(mb.buffer),Bc="type"in mb?Zd[mb.type]:Nb.dtype,ec=!!mb.normalized,te=mb.size|0,gc=mb.offset|0,Ac=mb.stride|0,Qb=mb.divisor|0);Lb=S.location;Hb=tc[Lb];if(1===zc){Hb.buffer||F.enableVertexAttribArray(Lb);
Oc=te||4;if(Hb.type!==Bc||Hb.size!==Oc||Hb.buffer!==Nb||Hb.normalized!==ec||Hb.offset!==gc||Hb.stride!==Ac)F.bindBuffer(34962,Nb.buffer),F.vertexAttribPointer(Lb,Oc,Bc,ec,Ac,gc),Hb.type=Bc,Hb.size=Oc,Hb.buffer=Nb,Hb.normalized=ec,Hb.offset=gc,Hb.stride=Ac;Hb.divisor!==Qb&&(P.vertexAttribDivisorANGLE(Lb,Qb),Hb.divisor=Qb)}else if(Hb.buffer&&(F.disableVertexAttribArray(Lb),Hb.buffer=null),Hb.x!==Xc||Hb.y!==Rc||Hb.z!==Nc||Hb.w!==Mc)F.vertexAttrib4f(Lb,Xc,Rc,Nc,Mc),Hb.x=Xc,Hb.y=Rc,Hb.z=Nc,Hb.w=Mc;Fc=
T.call(this,J,a,0);Sc=!1;fc=null;Vc=0;id=!1;kd=fd=0;Wc=1;Ld=0;vd=5126;Jd=ee=ue=ge=0;w(Fc)?(Sc=!0,fc=Y.createStream(34962,Fc),vd=fc.dtype):(fc=Y.getBuffer(Fc))?vd=fc.dtype:"constant"in Fc?(Wc=2,"number"===typeof Fc.constant?(ue=Fc.constant,ee=Jd=ge=0):(ue=0<Fc.constant.length?Fc.constant[0]:0,ee=1<Fc.constant.length?Fc.constant[1]:0,Jd=2<Fc.constant.length?Fc.constant[2]:0,ge=3<Fc.constant.length?Fc.constant[3]:0)):(fc=w(Fc.buffer)?Y.createStream(34962,Fc.buffer):Y.getBuffer(Fc.buffer),vd="type"in
Fc?Zd[Fc.type]:fc.dtype,id=!!Fc.normalized,kd=Fc.size|0,fd=Fc.offset|0,Ld=Fc.stride|0,Vc=Fc.divisor|0);Hd=Vb.location;cd=tc[Hd];if(1===Wc){cd.buffer||F.enableVertexAttribArray(Hd);Cc=kd||4;if(cd.type!==vd||cd.size!==Cc||cd.buffer!==fc||cd.normalized!==id||cd.offset!==fd||cd.stride!==Ld)F.bindBuffer(34962,fc.buffer),F.vertexAttribPointer(Hd,Cc,vd,id,Ld,fd),cd.type=vd,cd.size=Cc,cd.buffer=fc,cd.normalized=id,cd.offset=fd,cd.stride=Ld;cd.divisor!==Vc&&(P.vertexAttribDivisorANGLE(Hd,Vc),cd.divisor=Vc)}else if(cd.buffer&&
(F.disableVertexAttribArray(Hd),cd.buffer=null),cd.x!==ue||cd.y!==ee||cd.z!==Jd||cd.w!==ge)F.vertexAttrib4f(Hd,ue,ee,Jd,ge),cd.x=ue,cd.y=ee,cd.z=Jd,cd.w=ge;jd=K.call(this,J,a,0);gd=!1;$c=null;ld=0;zd=!1;xe=Ad=0;Ke=1;we=0;he=5126;ae=pe=de=fe=0;w(jd)?(gd=!0,$c=Y.createStream(34962,jd),he=$c.dtype):($c=Y.getBuffer(jd))?he=$c.dtype:"constant"in jd?(Ke=2,"number"===typeof jd.constant?(de=jd.constant,pe=ae=fe=0):(de=0<jd.constant.length?jd.constant[0]:0,pe=1<jd.constant.length?jd.constant[1]:0,ae=2<jd.constant.length?
jd.constant[2]:0,fe=3<jd.constant.length?jd.constant[3]:0)):($c=w(jd.buffer)?Y.createStream(34962,jd.buffer):Y.getBuffer(jd.buffer),he="type"in jd?Zd[jd.type]:$c.dtype,zd=!!jd.normalized,xe=jd.size|0,Ad=jd.offset|0,we=jd.stride|0,ld=jd.divisor|0);je=ka.location;xc=tc[je];if(1===Ke){xc.buffer||F.enableVertexAttribArray(je);Tc=xe||1;if(xc.type!==he||xc.size!==Tc||xc.buffer!==$c||xc.normalized!==zd||xc.offset!==Ad||xc.stride!==we)F.bindBuffer(34962,$c.buffer),F.vertexAttribPointer(je,Tc,he,zd,we,Ad),
xc.type=he,xc.size=Tc,xc.buffer=$c,xc.normalized=zd,xc.offset=Ad,xc.stride=we;xc.divisor!==ld&&(P.vertexAttribDivisorANGLE(je,ld),xc.divisor=ld)}else if(xc.buffer&&(F.disableVertexAttribArray(je),xc.buffer=null),xc.x!==de||xc.y!==pe||xc.z!==ae||xc.w!==fe)F.vertexAttrib4f(je,de,pe,ae,fe),xc.x=de,xc.y=pe,xc.z=ae,xc.w=fe;F.uniform1i(u.location,!1);F.uniform1f(tb.location,J.pixelRatio);qe=G.call(this,J,a,0);F.uniform2f(Ea.location,qe[0],qe[1]);me=a.scale;F.uniform2f(Ha.location,me[0],me[1]);Id=a.scaleFract;
F.uniform2f(W.location,Id[0],Id[1]);Nd=a.translate;F.uniform2f(ga.location,Nd[0],Nd[1]);Od=a.translateFract;F.uniform2f(pa.location,Od[0],Od[1]);F.uniform1f(ea.location,a.opacity);F.uniform1i(Pa.location,r.bind());Pd=a.elements;ke=null;(ke=(Ee=w(Pd))?ub.createStream(Pd):ub.getElements(Pd))&&F.bindBuffer(34963,ke.buffer.buffer);ye=a.offset;if(oe=a.count)jf=Ca.instances,0<jf?ke?P.drawElementsInstancedANGLE(0,oe,ke.type,ye<<(ke.type-5121>>1),jf):P.drawArraysInstancedANGLE(0,ye,oe,jf):0>jf&&(ke?F.drawElements(0,
oe,ke.type,ye<<(ke.type-5121>>1)):F.drawArrays(0,ye,oe)),ja.dirty=!0,ha.setVAO(null),J.viewportWidth=p,J.viewportHeight=z,M&&(y.cpuTime+=performance.now()-O),Q&&Y.destroyStream(R),Ja&&Y.destroyStream(Xa),vb&&Y.destroyStream(hb),Aa&&Y.destroyStream(fb),dc&&Y.destroyStream(Da),wb&&Y.destroyStream(Db),yb&&Y.destroyStream(Nb),Sc&&Y.destroyStream(fc),gd&&Y.destroyStream($c),r.unbind(),Ee&&ub.destroyStream(ke)},scope:function(b,c,d){var f,k,q,n,t,r,u,v,x,N,H,F,I,G,M,K,C,O,da,V,S,T,U,W,ha,ba,na,ma,ea,ga,
ka,la,wa,oa,sa,pa,ta,Ha,Ea,La,Oa,Ja,Pa,zb,tc,ab,Jb,Na,ob,vb,hb,Qa,Eb,nb,rd,eb,mc,tb,Vb,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,ac,Kb,$a,Ub,ya,pc,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ic,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,Jc,sc,md,Lc,bd,le,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ed,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,Uc,fd,kd,Wc,Fd,vd,ce,ie,se,Jd,Hd,cd,Cc,jd,gd,$c,ld,zd,Ad,ve,Ld,we,he,fe,de,pe,ae,je,xc,Tc,qe,me,Id,Nd,Od,Pd,ke,Ee,ye,oe,Ue,Oe,Le,re,Be,Fe,Ge,He,Ce,Kd,Sd,Yd,be,Ie,Dd,Qd,ze,Je,pf,Xe,
Pe,Me,We,Te,Qe,Re,Rd,Vd,Se,qf,hf,bf,ef,ff,gf,nf,kf,of,Af,Bf,Ne,Ae,lf,mf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf,bg,Qf,Rf,pg,cf,Ze,Lf,Mf,dg,eg,fg,gg,hg,Uf,Sf,Vf,Wf,Xf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Nf,Of,jg,kg,lg,mg,ng,Yf,Tf,Zf,$f,ag,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng;f=b.viewport;k=f.x|0;q=f.y|0;n="width"in f?f.width|0:J.framebufferWidth-k;t="height"in f?f.height|0:J.framebufferHeight-q;r=J.viewportWidth;J.viewportWidth=n;u=J.viewportHeight;J.viewportHeight=t;v=yd[0];
yd[0]=k;x=yd[1];yd[1]=q;N=yd[2];yd[2]=n;H=yd[3];yd[3]=t;F=ra[0];ra[0]=0;I=ra[1];ra[1]=0;G=ra[2];ra[2]=0;M=ra[3];ra[3]=1;K=ia.blend_enable;ia.blend_enable=!0;C=z[0];z[0]=770;O=z[1];z[1]=771;da=z[2];z[2]=773;V=z[3];z[3]=1;S=ia.depth_enable;ia.depth_enable=!1;T=b.viewport;U=T.x|0;W=T.y|0;ha="width"in T?T.width|0:J.framebufferWidth-U;ba="height"in T?T.height|0:J.framebufferHeight-W;na=te[0];te[0]=U;ma=te[1];te[1]=W;ea=te[2];te[2]=ha;ga=te[3];te[3]=ba;ka=ia.scissor_enable;ia.scissor_enable=!0;la=ia.stencil_enable;
ia.stencil_enable=!1;if(wa=ja.profile)oa=performance.now(),y.count++;sa=b.elements;pa=null;pa=(ta=w(sa))?ub.createStream(sa):ub.getElements(sa);Ha=Ca.elements;Ca.elements=pa;Ea=b.offset;La=Ca.offset;Ca.offset=Ea;Oa=b.count;Ja=Ca.count;Ca.count=Oa;Pa=Ca.primitive;Ca.primitive=0;zb=X[45];X[45]=!1;tc=b.markerTexture;ab=X[48];X[48]=tc;Jb=b.opacity;Na=X[10];X[10]=Jb;ob=E.call(this,J,b,d);vb=X[46];X[46]=ob;hb=X[47];X[47]=B;Qa=J.pixelRatio;Eb=X[34];X[34]=Qa;nb=b.scale;rd=X[6];X[6]=nb;eb=b.scaleFract;mc=
X[7];X[7]=eb;tb=b.translate;Vb=X[8];X[8]=tb;jb=b.translateFract;kb=X[9];X[9]=jb;ua=D.call(this,J,b,d);pb=!1;xa=null;Va=0;cb=!1;fb=Aa=0;Ia=1;Cb=0;Ab=5126;$a=Kb=ac=Sa=0;w(ua)?(pb=!0,xa=Y.createStream(34962,ua),Ab=xa.dtype):(xa=Y.getBuffer(ua))?Ab=xa.dtype:"constant"in ua?(Ia=2,"number"===typeof ua.constant?(ac=ua.constant,Kb=$a=Sa=0):(ac=0<ua.constant.length?ua.constant[0]:0,Kb=1<ua.constant.length?ua.constant[1]:0,$a=2<ua.constant.length?ua.constant[2]:0,Sa=3<ua.constant.length?ua.constant[3]:0)):
(xa=w(ua.buffer)?Y.createStream(34962,ua.buffer):Y.getBuffer(ua.buffer),Ab="type"in ua?Zd[ua.type]:xa.dtype,cb=!!ua.normalized,fb=ua.size|0,Aa=ua.offset|0,Cb=ua.stride|0,Va=ua.divisor|0);Ub=Q.buffer;Q.buffer=xa;ya=Q.divisor;Q.divisor=Va;pc=Q.normalized;Q.normalized=cb;Ka=Q.offset;Q.offset=Aa;Ob=Q.size;Q.size=fb;gb=Q.state;Q.state=Ia;ib=Q.stride;Q.stride=Cb;za=Q.type;Q.type=Ab;dc=Q.w;Q.w=Sa;Da=Q.x;Q.x=ac;qb=Q.y;Q.y=Kb;rb=Q.z;Q.z=$a;Ya=A.call(this,J,b,d);Za=!1;kc=null;ic=0;uc=!1;Mb=Wa=0;Pc=1;Fa=0;wc=
5126;wb=lb=Ba=Ra=0;w(Ya)?(Za=!0,kc=Y.createStream(34962,Ya),wc=kc.dtype):(kc=Y.getBuffer(Ya))?wc=kc.dtype:"constant"in Ya?(Pc=2,"number"===typeof Ya.constant?(Ba=Ya.constant,lb=wb=Ra=0):(Ba=0<Ya.constant.length?Ya.constant[0]:0,lb=1<Ya.constant.length?Ya.constant[1]:0,wb=2<Ya.constant.length?Ya.constant[2]:0,Ra=3<Ya.constant.length?Ya.constant[3]:0)):(kc=w(Ya.buffer)?Y.createStream(34962,Ya.buffer):Y.getBuffer(Ya.buffer),wc="type"in Ya?Zd[Ya.type]:kc.dtype,uc=!!Ya.normalized,Mb=Ya.size|0,Wa=Ya.offset|
0,Fa=Ya.stride|0,ic=Ya.divisor|0);Db=P.buffer;P.buffer=kc;sb=P.divisor;P.divisor=ic;vc=P.normalized;P.normalized=uc;xb=P.offset;P.offset=Wa;Jc=P.size;P.size=Mb;sc=P.state;P.state=Pc;md=P.stride;P.stride=Fa;Lc=P.type;P.type=wc;bd=P.w;P.w=Ra;le=P.x;P.x=Ba;Wb=P.y;P.y=lb;cc=P.z;P.z=wb;Pb=ca.call(this,J,b,d);Ga=!1;Zb=null;mb=0;yb=!1;Qb=Nb=0;ec=1;gc=0;Ed=5126;Mc=Bc=Ac=zc=0;w(Pb)?(Ga=!0,Zb=Y.createStream(34962,Pb),Ed=Zb.dtype):(Zb=Y.getBuffer(Pb))?Ed=Zb.dtype:"constant"in Pb?(ec=2,"number"===typeof Pb.constant?
(Ac=Pb.constant,Bc=Mc=zc=0):(Ac=0<Pb.constant.length?Pb.constant[0]:0,Bc=1<Pb.constant.length?Pb.constant[1]:0,Mc=2<Pb.constant.length?Pb.constant[2]:0,zc=3<Pb.constant.length?Pb.constant[3]:0)):(Zb=w(Pb.buffer)?Y.createStream(34962,Pb.buffer):Y.getBuffer(Pb.buffer),Ed="type"in Pb?Zd[Pb.type]:Zb.dtype,yb=!!Pb.normalized,Qb=Pb.size|0,Nb=Pb.offset|0,gc=Pb.stride|0,mb=Pb.divisor|0);Xc=h.buffer;h.buffer=Zb;Rc=h.divisor;h.divisor=mb;Nc=h.normalized;h.normalized=yb;Lb=h.offset;h.offset=Nb;Hb=h.size;h.size=
Qb;Oc=h.state;h.state=ec;Fc=h.stride;h.stride=gc;Sc=h.type;h.type=Ed;fc=h.w;h.w=zc;Vc=h.x;h.x=Ac;Uc=h.y;h.y=Bc;fd=h.z;h.z=Mc;kd=e.call(this,J,b,d);Wc=!1;Fd=null;vd=0;ce=!1;se=ie=0;Jd=1;Hd=0;cd=5126;$c=gd=jd=Cc=0;w(kd)?(Wc=!0,Fd=Y.createStream(34962,kd),cd=Fd.dtype):(Fd=Y.getBuffer(kd))?cd=Fd.dtype:"constant"in kd?(Jd=2,"number"===typeof kd.constant?(jd=kd.constant,gd=$c=Cc=0):(jd=0<kd.constant.length?kd.constant[0]:0,gd=1<kd.constant.length?kd.constant[1]:0,$c=2<kd.constant.length?kd.constant[2]:
0,Cc=3<kd.constant.length?kd.constant[3]:0)):(Fd=w(kd.buffer)?Y.createStream(34962,kd.buffer):Y.getBuffer(kd.buffer),cd="type"in kd?Zd[kd.type]:Fd.dtype,ce=!!kd.normalized,se=kd.size|0,ie=kd.offset|0,Hd=kd.stride|0,vd=kd.divisor|0);ld=g.buffer;g.buffer=Fd;zd=g.divisor;g.divisor=vd;Ad=g.normalized;g.normalized=ce;ve=g.offset;g.offset=ie;Ld=g.size;g.size=se;we=g.state;g.state=Jd;he=g.stride;g.stride=Hd;fe=g.type;g.type=cd;de=g.w;g.w=Cc;pe=g.x;g.x=jd;ae=g.y;g.y=gd;je=g.z;g.z=$c;xc=l.call(this,J,b,d);
Tc=!1;qe=null;me=0;Id=!1;Od=Nd=0;Pd=1;ke=0;Ee=5126;Oe=Ue=oe=ye=0;w(xc)?(Tc=!0,qe=Y.createStream(34962,xc),Ee=qe.dtype):(qe=Y.getBuffer(xc))?Ee=qe.dtype:"constant"in xc?(Pd=2,"number"===typeof xc.constant?(oe=xc.constant,Ue=Oe=ye=0):(oe=0<xc.constant.length?xc.constant[0]:0,Ue=1<xc.constant.length?xc.constant[1]:0,Oe=2<xc.constant.length?xc.constant[2]:0,ye=3<xc.constant.length?xc.constant[3]:0)):(qe=w(xc.buffer)?Y.createStream(34962,xc.buffer):Y.getBuffer(xc.buffer),Ee="type"in xc?Zd[xc.type]:qe.dtype,
Id=!!xc.normalized,Od=xc.size|0,Nd=xc.offset|0,ke=xc.stride|0,me=xc.divisor|0);Le=R.buffer;R.buffer=qe;re=R.divisor;R.divisor=me;Be=R.normalized;R.normalized=Id;Fe=R.offset;R.offset=Nd;Ge=R.size;R.size=Od;He=R.state;R.state=Pd;Ce=R.stride;R.stride=ke;Kd=R.type;R.type=Ee;Sd=R.w;R.w=ye;Yd=R.x;R.x=oe;be=R.y;R.y=Ue;Ie=R.z;R.z=Oe;Dd=Z.call(this,J,b,d);Qd=!1;ze=null;Je=0;pf=!1;Pe=Xe=0;Me=1;We=0;Te=5126;Vd=Rd=Re=Qe=0;w(Dd)?(Qd=!0,ze=Y.createStream(34962,Dd),Te=ze.dtype):(ze=Y.getBuffer(Dd))?Te=ze.dtype:
"constant"in Dd?(Me=2,"number"===typeof Dd.constant?(Re=Dd.constant,Rd=Vd=Qe=0):(Re=0<Dd.constant.length?Dd.constant[0]:0,Rd=1<Dd.constant.length?Dd.constant[1]:0,Vd=2<Dd.constant.length?Dd.constant[2]:0,Qe=3<Dd.constant.length?Dd.constant[3]:0)):(ze=w(Dd.buffer)?Y.createStream(34962,Dd.buffer):Y.getBuffer(Dd.buffer),Te="type"in Dd?Zd[Dd.type]:ze.dtype,pf=!!Dd.normalized,Pe=Dd.size|0,Xe=Dd.offset|0,We=Dd.stride|0,Je=Dd.divisor|0);Se=m.buffer;m.buffer=ze;qf=m.divisor;m.divisor=Je;hf=m.normalized;m.normalized=
pf;bf=m.offset;m.offset=Xe;ef=m.size;m.size=Pe;ff=m.state;m.state=Me;gf=m.stride;m.stride=We;nf=m.type;m.type=Te;kf=m.w;m.w=Qe;of=m.x;m.x=Re;Af=m.y;m.y=Rd;Bf=m.z;m.z=Vd;Ne=qa.call(this,J,b,d);Ae=!1;lf=null;mf=0;Cf=!1;zf=Ff=0;Df=1;Ef=0;uf=5126;xf=wf=tf=vf=0;w(Ne)?(Ae=!0,lf=Y.createStream(34962,Ne),uf=lf.dtype):(lf=Y.getBuffer(Ne))?uf=lf.dtype:"constant"in Ne?(Df=2,"number"===typeof Ne.constant?(tf=Ne.constant,wf=xf=vf=0):(tf=0<Ne.constant.length?Ne.constant[0]:0,wf=1<Ne.constant.length?Ne.constant[1]:
0,xf=2<Ne.constant.length?Ne.constant[2]:0,vf=3<Ne.constant.length?Ne.constant[3]:0)):(lf=w(Ne.buffer)?Y.createStream(34962,Ne.buffer):Y.getBuffer(Ne.buffer),uf="type"in Ne?Zd[Ne.type]:lf.dtype,Cf=!!Ne.normalized,zf=Ne.size|0,Ff=Ne.offset|0,Ef=Ne.stride|0,mf=Ne.divisor|0);Hf=L.buffer;L.buffer=lf;If=L.divisor;L.divisor=mf;Jf=L.normalized;L.normalized=Cf;Kf=L.offset;L.offset=Ff;rf=L.size;L.size=zf;Pf=L.state;L.state=Df;Gf=L.stride;L.stride=Ef;sf=L.type;L.type=uf;bg=L.w;L.w=vf;Qf=L.x;L.x=tf;Rf=L.y;L.y=
wf;pg=L.z;L.z=xf;cf=fa.call(this,J,b,d);Ze=!1;Lf=null;Mf=0;dg=!1;fg=eg=0;gg=1;hg=0;Uf=5126;Xf=Wf=Vf=Sf=0;w(cf)?(Ze=!0,Lf=Y.createStream(34962,cf),Uf=Lf.dtype):(Lf=Y.getBuffer(cf))?Uf=Lf.dtype:"constant"in cf?(gg=2,"number"===typeof cf.constant?(Vf=cf.constant,Wf=Xf=Sf=0):(Vf=0<cf.constant.length?cf.constant[0]:0,Wf=1<cf.constant.length?cf.constant[1]:0,Xf=2<cf.constant.length?cf.constant[2]:0,Sf=3<cf.constant.length?cf.constant[3]:0)):(Lf=w(cf.buffer)?Y.createStream(34962,cf.buffer):Y.getBuffer(cf.buffer),
Uf="type"in cf?Zd[cf.type]:Lf.dtype,dg=!!cf.normalized,fg=cf.size|0,eg=cf.offset|0,hg=cf.stride|0,Mf=cf.divisor|0);ig=a.buffer;a.buffer=Lf;qg=a.divisor;a.divisor=Mf;rg=a.normalized;a.normalized=dg;sg=a.offset;a.offset=eg;tg=a.size;a.size=fg;ug=a.state;a.state=gg;vg=a.stride;a.stride=hg;wg=a.type;a.type=Uf;xg=a.w;a.w=Sf;yg=a.x;a.x=Vf;zg=a.y;a.y=Wf;Ag=a.z;a.z=Xf;df=p.call(this,J,b,d);$e=!1;Nf=null;Of=0;jg=!1;lg=kg=0;mg=1;ng=0;Yf=5126;ag=$f=Zf=Tf=0;w(df)?($e=!0,Nf=Y.createStream(34962,df),Yf=Nf.dtype):
(Nf=Y.getBuffer(df))?Yf=Nf.dtype:"constant"in df?(mg=2,"number"===typeof df.constant?(Zf=df.constant,$f=ag=Tf=0):(Zf=0<df.constant.length?df.constant[0]:0,$f=1<df.constant.length?df.constant[1]:0,ag=2<df.constant.length?df.constant[2]:0,Tf=3<df.constant.length?df.constant[3]:0)):(Nf=w(df.buffer)?Y.createStream(34962,df.buffer):Y.getBuffer(df.buffer),Yf="type"in df?Zd[df.type]:Nf.dtype,jg=!!df.normalized,lg=df.size|0,kg=df.offset|0,ng=df.stride|0,Of=df.divisor|0);og=aa.buffer;aa.buffer=Nf;Bg=aa.divisor;
aa.divisor=Of;Cg=aa.normalized;aa.normalized=jg;Dg=aa.offset;aa.offset=kg;Eg=aa.size;aa.size=lg;Fg=aa.state;aa.state=mg;Gg=aa.stride;aa.stride=ng;Hg=aa.type;aa.type=Yf;Ig=aa.w;aa.w=Tf;Jg=aa.x;aa.x=Zf;Kg=aa.y;aa.y=$f;Lg=aa.z;aa.z=ag;Mg=va.vert;va.vert=59;Ng=va.frag;va.frag=58;ja.dirty=!0;c(J,b,d);J.viewportWidth=r;J.viewportHeight=u;yd[0]=v;yd[1]=x;yd[2]=N;yd[3]=H;ra[0]=F;ra[1]=I;ra[2]=G;ra[3]=M;ia.blend_enable=K;z[0]=C;z[1]=O;z[2]=da;z[3]=V;ia.depth_enable=S;te[0]=na;te[1]=ma;te[2]=ea;te[3]=ga;ia.scissor_enable=
ka;ia.stencil_enable=la;wa&&(y.cpuTime+=performance.now()-oa);ta&&ub.destroyStream(pa);Ca.elements=Ha;Ca.offset=La;Ca.count=Ja;Ca.primitive=Pa;X[45]=zb;X[48]=ab;X[10]=Na;X[46]=vb;X[47]=hb;X[34]=Eb;X[6]=rd;X[7]=mc;X[8]=Vb;X[9]=kb;pb&&Y.destroyStream(xa);Q.buffer=Ub;Q.divisor=ya;Q.normalized=pc;Q.offset=Ka;Q.size=Ob;Q.state=gb;Q.stride=ib;Q.type=za;Q.w=dc;Q.x=Da;Q.y=qb;Q.z=rb;Za&&Y.destroyStream(kc);P.buffer=Db;P.divisor=sb;P.normalized=vc;P.offset=xb;P.size=Jc;P.state=sc;P.stride=md;P.type=Lc;P.w=
bd;P.x=le;P.y=Wb;P.z=cc;Ga&&Y.destroyStream(Zb);h.buffer=Xc;h.divisor=Rc;h.normalized=Nc;h.offset=Lb;h.size=Hb;h.state=Oc;h.stride=Fc;h.type=Sc;h.w=fc;h.x=Vc;h.y=Uc;h.z=fd;Wc&&Y.destroyStream(Fd);g.buffer=ld;g.divisor=zd;g.normalized=Ad;g.offset=ve;g.size=Ld;g.state=we;g.stride=he;g.type=fe;g.w=de;g.x=pe;g.y=ae;g.z=je;Tc&&Y.destroyStream(qe);R.buffer=Le;R.divisor=re;R.normalized=Be;R.offset=Fe;R.size=Ge;R.state=He;R.stride=Ce;R.type=Kd;R.w=Sd;R.x=Yd;R.y=be;R.z=Ie;Qd&&Y.destroyStream(ze);m.buffer=
Se;m.divisor=qf;m.normalized=hf;m.offset=bf;m.size=ef;m.state=ff;m.stride=gf;m.type=nf;m.w=kf;m.x=of;m.y=Af;m.z=Bf;Ae&&Y.destroyStream(lf);L.buffer=Hf;L.divisor=If;L.normalized=Jf;L.offset=Kf;L.size=rf;L.state=Pf;L.stride=Gf;L.type=sf;L.w=bg;L.x=Qf;L.y=Rf;L.z=pg;Ze&&Y.destroyStream(Lf);a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;$e&&Y.destroyStream(Nf);aa.buffer=og;aa.divisor=Bg;aa.normalized=Cg;aa.offset=Dg;aa.size=Eg;
aa.state=Fg;aa.stride=Gg;aa.type=Hg;aa.w=Ig;aa.x=Jg;aa.y=Kg;aa.z=Lg;va.vert=Mg;va.frag=Ng;ja.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(d,y,n,N,f,c,x,b,v,C,T,K,G,r,E,B,D,Q,A,P,ca,h,e,g,l,R,Z,m,qa,L,fa,a,p,aa,la,La,Ja,Ld,oa,Oa){var ba,M,O,U,ta,I,Vb,ab,S,u,ka,ea,Ea,Pa,tb,Ha,W,nb,ga,pa,ac,pc,ic,rd,tc,Y,J,ja,Ca,ub,Jc,Uc,F,w,ia,va,X,ha,ra,H,t;ba=d.attributes;M=d.buffer;O=d.context;U=
d.current;ta=d.draw;I=d.elements;Vb=d.extensions;ab=d.framebuffer;S=d.gl;u=d.isBufferArgs;ka=d.next;ea=d.shader;Ea=d.uniforms;Pa=d.vao;tb=ka.blend_color;Ha=U.blend_color;W=ka.blend_equation;nb=U.blend_equation;ga=ka.blend_func;pa=U.blend_func;ac=ka.colorMask;pc=U.colorMask;ic=ka.depth_range;rd=U.depth_range;tc=ka.polygonOffset_offset;Y=U.polygonOffset_offset;J=ka.sample_coverage;ja=U.sample_coverage;Ca=ka.scissor_box;ub=U.scissor_box;Jc=ka.stencil_func;Uc=U.stencil_func;F=ka.stencil_opBack;w=U.stencil_opBack;
ia=ka.stencil_opFront;va=U.stencil_opFront;X=ka.viewport;ha=U.viewport;ra={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};H={offset:4,stride:8};t={offset:0,stride:8};return{batch:function(b,c){var d,f,k,n,r,q,v,x,B,N,D,E,G;d=ab.next;d!==ab.cur&&(d?S.bindFramebuffer(36160,d.framebuffer):S.bindFramebuffer(36160,null),ab.cur=d);if(U.dirty){var C,K,T,X,na,ea,ga,Ea,tb,yf,af,Bd,De,Td,Ud,ne,Xd,nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,Gd,Cd,yc,Xb;
C=ka.dither;C!==U.dither&&(C?S.enable(3024):S.disable(3024),U.dither=C);K=W[0];T=W[1];if(K!==nb[0]||T!==nb[1])S.blendEquationSeparate(K,T),nb[0]=K,nb[1]=T;X=ka.depth_func;X!==U.depth_func&&(S.depthFunc(X),U.depth_func=X);na=ic[0];ea=ic[1];if(na!==rd[0]||ea!==rd[1])S.depthRange(na,ea),rd[0]=na,rd[1]=ea;ga=ka.depth_mask;ga!==U.depth_mask&&(S.depthMask(ga),U.depth_mask=ga);Ea=ac[0];tb=ac[1];yf=ac[2];af=ac[3];if(Ea!==pc[0]||tb!==pc[1]||yf!==pc[2]||af!==pc[3])S.colorMask(Ea,tb,yf,af),pc[0]=Ea,pc[1]=tb,
pc[2]=yf,pc[3]=af;Bd=ka.cull_enable;Bd!==U.cull_enable&&(Bd?S.enable(2884):S.disable(2884),U.cull_enable=Bd);De=ka.cull_face;De!==U.cull_face&&(S.cullFace(De),U.cull_face=De);Td=ka.frontFace;Td!==U.frontFace&&(S.frontFace(Td),U.frontFace=Td);Ud=ka.lineWidth;Ud!==U.lineWidth&&(S.lineWidth(Ud),U.lineWidth=Ud);ne=ka.polygonOffset_enable;ne!==U.polygonOffset_enable&&(ne?S.enable(32823):S.disable(32823),U.polygonOffset_enable=ne);Xd=tc[0];nd=tc[1];if(Xd!==Y[0]||nd!==Y[1])S.polygonOffset(Xd,nd),Y[0]=Xd,
Y[1]=nd;hd=ka.sample_alpha;hd!==U.sample_alpha&&(hd?S.enable(32926):S.disable(32926),U.sample_alpha=hd);wd=ka.sample_enable;wd!==U.sample_enable&&(wd?S.enable(32928):S.disable(32928),U.sample_enable=wd);Yc=J[0];qd=J[1];if(Yc!==ja[0]||qd!==ja[1])S.sampleCoverage(Yc,qd),ja[0]=Yc,ja[1]=qd;nc=ka.stencil_mask;nc!==U.stencil_mask&&(S.stencilMask(nc),U.stencil_mask=nc);sd=Jc[0];ed=Jc[1];Kc=Jc[2];if(sd!==Uc[0]||ed!==Uc[1]||Kc!==Uc[2])S.stencilFunc(sd,ed,Kc),Uc[0]=sd,Uc[1]=ed,Uc[2]=Kc;qc=ia[0];bb=ia[1];Gc=
ia[2];Fb=ia[3];if(qc!==va[0]||bb!==va[1]||Gc!==va[2]||Fb!==va[3])S.stencilOpSeparate(qc,bb,Gc,Fb),va[0]=qc,va[1]=bb,va[2]=Gc,va[3]=Fb;oc=F[0];Ua=F[1];Hc=F[2];bc=F[3];if(oc!==w[0]||Ua!==w[1]||Hc!==w[2]||bc!==w[3])S.stencilOpSeparate(oc,Ua,Hc,bc),w[0]=oc,w[1]=Ua,w[2]=Hc,w[3]=bc;rc=ka.scissor_enable;rc!==U.scissor_enable&&(rc?S.enable(3089):S.disable(3089),U.scissor_enable=rc);Gd=Ca[0];Cd=Ca[1];yc=Ca[2];Xb=Ca[3];if(Gd!==ub[0]||Cd!==ub[1]||yc!==ub[2]||Xb!==ub[3])S.scissor(Gd,Cd,yc,Xb),ub[0]=Gd,ub[1]=
Cd,ub[2]=yc,ub[3]=Xb}f=this.viewport;k=f.x|0;n=f.y|0;r="width"in f?f.width|0:O.framebufferWidth-k;q="height"in f?f.height|0:O.framebufferHeight-n;v=O.viewportWidth;O.viewportWidth=r;x=O.viewportHeight;O.viewportHeight=q;S.viewport(k,n,r,q);ha[0]=k;ha[1]=n;ha[2]=r;ha[3]=q;S.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;S.enable(3042);U.blend_enable=!0;S.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;S.disable(2929);U.depth_enable=!1;S.disable(2960);U.stencil_enable=!1;
if(B=U.profile)N=performance.now(),y.count+=c;S.useProgram(Q.program);D=Vb.angle_instanced_arrays;var Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb;Pa.setVAO(null);t.buffer=this.sizeBuffer;Dc=!1;Qc=null;Ma=0;Gb=!1;sa=Xa=0;td=1;Bb=0;Ta=5126;Rb=Ec=db=Ib=0;u(t)?(Dc=!0,Qc=M.createStream(34962,t),Ta=Qc.dtype):(Qc=M.getBuffer(t))?Ta=Qc.dtype:
"constant"in t?(td=2,"number"===typeof t.constant?(db=t.constant,Ec=Rb=Ib=0):(db=0<t.constant.length?t.constant[0]:0,Ec=1<t.constant.length?t.constant[1]:0,Rb=2<t.constant.length?t.constant[2]:0,Ib=3<t.constant.length?t.constant[3]:0)):(Qc=u(t.buffer)?M.createStream(34962,t.buffer):M.getBuffer(t.buffer),Ta="type"in t?ra[t.type]:Qc.dtype,Gb=!!t.normalized,sa=t.size|0,Xa=t.offset|0,Bb=t.stride|0,Ma=t.divisor|0);$d=Oa.location;$b=ba[$d];if(1===td){$b.buffer||S.enableVertexAttribArray($d);Sb=sa||1;if($b.type!==
Ta||$b.size!==Sb||$b.buffer!==Qc||$b.normalized!==Gb||$b.offset!==Xa||$b.stride!==Bb)S.bindBuffer(34962,Qc.buffer),S.vertexAttribPointer($d,Sb,Ta,Gb,Bb,Xa),$b.type=Ta,$b.size=Sb,$b.buffer=Qc,$b.normalized=Gb,$b.offset=Xa,$b.stride=Bb;$b.divisor!==Ma&&(D.vertexAttribDivisorANGLE($d,Ma),$b.divisor=Ma)}else if($b.buffer&&(S.disableVertexAttribArray($d),$b.buffer=null),$b.x!==db||$b.y!==Ec||$b.z!==Rb||$b.w!==Ib)S.vertexAttrib4f($d,db,Ec,Rb,Ib),$b.x=db,$b.y=Ec,$b.z=Rb,$b.w=Ib;H.buffer=this.sizeBuffer;
pd=!1;Tb=null;Na=0;ob=!1;hb=vb=0;Qa=1;lc=0;Yb=5126;dd=jc=eb=Zc=0;u(H)?(pd=!0,Tb=M.createStream(34962,H),Yb=Tb.dtype):(Tb=M.getBuffer(H))?Yb=Tb.dtype:"constant"in H?(Qa=2,"number"===typeof H.constant?(eb=H.constant,jc=dd=Zc=0):(eb=0<H.constant.length?H.constant[0]:0,jc=1<H.constant.length?H.constant[1]:0,dd=2<H.constant.length?H.constant[2]:0,Zc=3<H.constant.length?H.constant[3]:0)):(Tb=u(H.buffer)?M.createStream(34962,H.buffer):M.getBuffer(H.buffer),Yb="type"in H?ra[H.type]:Tb.dtype,ob=!!H.normalized,
hb=H.size|0,vb=H.offset|0,lc=H.stride|0,Na=H.divisor|0);hc=L.location;jb=ba[hc];if(1===Qa){jb.buffer||S.enableVertexAttribArray(hc);kb=hb||1;if(jb.type!==Yb||jb.size!==kb||jb.buffer!==Tb||jb.normalized!==ob||jb.offset!==vb||jb.stride!==lc)S.bindBuffer(34962,Tb.buffer),S.vertexAttribPointer(hc,kb,Yb,ob,lc,vb),jb.type=Yb,jb.size=kb,jb.buffer=Tb,jb.normalized=ob,jb.offset=vb,jb.stride=lc;jb.divisor!==Na&&(D.vertexAttribDivisorANGLE(hc,Na),jb.divisor=Na)}else if(jb.buffer&&(S.disableVertexAttribArray(hc),
jb.buffer=null),jb.x!==eb||jb.y!==jc||jb.z!==dd||jb.w!==Zc)S.vertexAttrib4f(hc,eb,jc,dd,Zc),jb.x=eb,jb.y=jc,jb.z=dd,jb.w=Zc;ua=this.charBuffer;pb=!1;xa=null;Va=0;cb=!1;fb=Aa=0;Ia=1;Cb=0;Ab=5126;$a=Kb=Ic=Sa=0;u(ua)?(pb=!0,xa=M.createStream(34962,ua),Ab=xa.dtype):(xa=M.getBuffer(ua))?Ab=xa.dtype:"constant"in ua?(Ia=2,"number"===typeof ua.constant?(Ic=ua.constant,Kb=$a=Sa=0):(Ic=0<ua.constant.length?ua.constant[0]:0,Kb=1<ua.constant.length?ua.constant[1]:0,$a=2<ua.constant.length?ua.constant[2]:0,Sa=
3<ua.constant.length?ua.constant[3]:0)):(xa=u(ua.buffer)?M.createStream(34962,ua.buffer):M.getBuffer(ua.buffer),Ab="type"in ua?ra[ua.type]:xa.dtype,cb=!!ua.normalized,fb=ua.size|0,Aa=ua.offset|0,Cb=ua.stride|0,Va=ua.divisor|0);Ub=qa.location;ya=ba[Ub];if(1===Ia){ya.buffer||S.enableVertexAttribArray(Ub);ud=fb||1;if(ya.type!==Ab||ya.size!==ud||ya.buffer!==xa||ya.normalized!==cb||ya.offset!==Aa||ya.stride!==Cb)S.bindBuffer(34962,xa.buffer),S.vertexAttribPointer(Ub,ud,Ab,cb,Cb,Aa),ya.type=Ab,ya.size=
ud,ya.buffer=xa,ya.normalized=cb,ya.offset=Aa,ya.stride=Cb;ya.divisor!==Va&&(D.vertexAttribDivisorANGLE(Ub,Va),ya.divisor=Va)}else if(ya.buffer&&(S.disableVertexAttribArray(Ub),ya.buffer=null),ya.x!==Ic||ya.y!==Kb||ya.z!==$a||ya.w!==Sa)S.vertexAttrib4f(Ub,Ic,Kb,$a,Sa),ya.x=Ic,ya.y=Kb,ya.z=$a,ya.w=Sa;Ka=this.position;Ob=!1;gb=null;ib=0;za=!1;Da=dc=0;qb=1;rb=0;Ya=5126;uc=ad=kc=Za=0;u(Ka)?(Ob=!0,gb=M.createStream(34962,Ka),Ya=gb.dtype):(gb=M.getBuffer(Ka))?Ya=gb.dtype:"constant"in Ka?(qb=2,"number"===
typeof Ka.constant?(kc=Ka.constant,ad=uc=Za=0):(kc=0<Ka.constant.length?Ka.constant[0]:0,ad=1<Ka.constant.length?Ka.constant[1]:0,uc=2<Ka.constant.length?Ka.constant[2]:0,Za=3<Ka.constant.length?Ka.constant[3]:0)):(gb=u(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),Ya="type"in Ka?ra[Ka.type]:gb.dtype,za=!!Ka.normalized,Da=Ka.size|0,dc=Ka.offset|0,rb=Ka.stride|0,ib=Ka.divisor|0);Wa=la.location;Mb=ba[Wa];if(1===qb){Mb.buffer||S.enableVertexAttribArray(Wa);Pc=Da||2;if(Mb.type!==Ya||
Mb.size!==Pc||Mb.buffer!==gb||Mb.normalized!==za||Mb.offset!==dc||Mb.stride!==rb)S.bindBuffer(34962,gb.buffer),S.vertexAttribPointer(Wa,Pc,Ya,za,rb,dc),Mb.type=Ya,Mb.size=Pc,Mb.buffer=gb,Mb.normalized=za,Mb.offset=dc,Mb.stride=rb;Mb.divisor!==ib&&(D.vertexAttribDivisorANGLE(Wa,ib),Mb.divisor=ib)}else if(Mb.buffer&&(S.disableVertexAttribArray(Wa),Mb.buffer=null),Mb.x!==kc||Mb.y!==ad||Mb.z!==uc||Mb.w!==Za)S.vertexAttrib4f(Wa,kc,ad,uc,Za),Mb.x=kc,Mb.y=ad,Mb.z=uc,Mb.w=Za;Fa=this.viewportArray;S.uniform4f(oa.location,
Fa[0],Fa[1],Fa[2],Fa[3]);wc=this.scale;S.uniform2f(Ja.location,wc[0],wc[1]);Ra=this.translate;S.uniform2f(Ld.location,Ra[0],Ra[1]);(Ba=ta.elements)?S.bindBuffer(34963,Ba.buffer.buffer):Pa.currentVAO&&(Ba=I.getElements(Pa.currentVAO.elements))&&S.bindBuffer(34963,Ba.buffer.buffer);lb=ta.instances;for(E=0;E<c;++E){G=b[E];var wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ve,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc,id;wb=A.call(this,O,G,E);E&&Db===wb||(Db=wb,S.uniform1f(fa.location,
wb));sb=P.call(this,O,G,E);E&&vc===sb||(vc=sb,S.uniform1f(p.location,sb));xb=G.align;E&&xd===xb||(xd=xb,S.uniform1f(g.location,xb));sc=G.baseline;E&&Md===sc||(Md=sc,S.uniform1f(m.location,sc));Lc=G.color;bd=Lc[0];Wb=Lc[1];Pb=Lc[2];Zb=Lc[3];E&&od===bd&&cc===Wb&&Ga===Pb&&mb===Zb||(od=bd,cc=Wb,Ga=Pb,mb=Zb,S.uniform4f(a.location,bd,Wb,Pb,Zb));yb=ca.call(this,O,G,E);Nb=yb[0];ec=yb[1];E&&Qb===Nb&&gc===ec||(Qb=Nb,gc=ec,S.uniform2f(Z.location,Nb,ec));Ve=h.call(this,O,G,E);zc=Ve[0];Bc=Ve[1];E&&Ac===zc&&Mc===
Bc||(Ac=zc,Mc=Bc,S.uniform2f(R.location,zc,Bc));Xc=G.positionOffset;Rc=Xc[0];Lb=Xc[1];E&&Nc===Rc&&Hb===Lb||(Nc=Rc,Hb=Lb,S.uniform2f(La.location,Rc,Lb));Oc=G.opacity;E&&Fc===Oc||(Fc=Oc,S.uniform1f(aa.location,Oc));(Sc=e.call(this,O,G,E))&&"framebuffer"===Sc._reglType&&(Sc=Sc.color[0]);fc=Sc._texture;S.uniform1i(l.location,fc.bind());Vc=G.offset;if(id=G.count)0<lb?Ba?D.drawElementsInstancedANGLE(0,id,Ba.type,Vc<<(Ba.type-5121>>1),lb):D.drawArraysInstancedANGLE(0,Vc,id,lb):0>lb&&(Ba?S.drawElements(0,
id,Ba.type,Vc<<(Ba.type-5121>>1)):S.drawArrays(0,Vc,id)),fc.unbind()}Dc&&M.destroyStream(Qc);pd&&M.destroyStream(Tb);pb&&M.destroyStream(xa);Ob&&M.destroyStream(gb);U.dirty=!0;Pa.setVAO(null);O.viewportWidth=v;O.viewportHeight=x;B&&(y.cpuTime+=performance.now()-N)},draw:function(d){var e,h,r,k,v,A,q,B,D,E,G,C,K,P,T,Q,X,na,ea,ca,ga,Ea,tb,ge,af,Bd,De,Td,Ud,ne,Xd,nd,hd,wd,Yc,qd,nc,sd,ed,Kc,qc,bb,Gc,Fb,oc,Ua,Hc,bc,rc,Gd,Cd,yc,Xb,Dc,Qc,Ma,Gb,Xa,sa,td,Bb,Ta,Ib,db,Ec,Rb,$d,$b,Sb,pd,Tb,Na,ob,vb,hb,Qa,lc,
Yb,Zc,eb,jc,dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb;e=ab.next;e!==ab.cur&&(e?S.bindFramebuffer(36160,e.framebuffer):S.bindFramebuffer(36160,null),ab.cur=e);if(U.dirty){var Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc;Ia=ka.dither;Ia!==U.dither&&(Ia?S.enable(3024):S.disable(3024),U.dither=Ia);Cb=W[0];Ab=W[1];if(Cb!==nb[0]||Ab!==nb[1])S.blendEquationSeparate(Cb,Ab),nb[0]=Cb,nb[1]=Ab;Sa=ka.depth_func;Sa!==U.depth_func&&(S.depthFunc(Sa),
U.depth_func=Sa);Ic=ic[0];Kb=ic[1];if(Ic!==rd[0]||Kb!==rd[1])S.depthRange(Ic,Kb),rd[0]=Ic,rd[1]=Kb;$a=ka.depth_mask;$a!==U.depth_mask&&(S.depthMask($a),U.depth_mask=$a);Ub=ac[0];ya=ac[1];ud=ac[2];Ka=ac[3];if(Ub!==pc[0]||ya!==pc[1]||ud!==pc[2]||Ka!==pc[3])S.colorMask(Ub,ya,ud,Ka),pc[0]=Ub,pc[1]=ya,pc[2]=ud,pc[3]=Ka;Ob=ka.cull_enable;Ob!==U.cull_enable&&(Ob?S.enable(2884):S.disable(2884),U.cull_enable=Ob);gb=ka.cull_face;gb!==U.cull_face&&(S.cullFace(gb),U.cull_face=gb);ib=ka.frontFace;ib!==U.frontFace&&
(S.frontFace(ib),U.frontFace=ib);za=ka.lineWidth;za!==U.lineWidth&&(S.lineWidth(za),U.lineWidth=za);dc=ka.polygonOffset_enable;dc!==U.polygonOffset_enable&&(dc?S.enable(32823):S.disable(32823),U.polygonOffset_enable=dc);Da=tc[0];qb=tc[1];if(Da!==Y[0]||qb!==Y[1])S.polygonOffset(Da,qb),Y[0]=Da,Y[1]=qb;rb=ka.sample_alpha;rb!==U.sample_alpha&&(rb?S.enable(32926):S.disable(32926),U.sample_alpha=rb);Ya=ka.sample_enable;Ya!==U.sample_enable&&(Ya?S.enable(32928):S.disable(32928),U.sample_enable=Ya);Za=J[0];
kc=J[1];if(Za!==ja[0]||kc!==ja[1])S.sampleCoverage(Za,kc),ja[0]=Za,ja[1]=kc;ad=ka.stencil_mask;ad!==U.stencil_mask&&(S.stencilMask(ad),U.stencil_mask=ad);uc=Jc[0];Wa=Jc[1];Mb=Jc[2];if(uc!==Uc[0]||Wa!==Uc[1]||Mb!==Uc[2])S.stencilFunc(uc,Wa,Mb),Uc[0]=uc,Uc[1]=Wa,Uc[2]=Mb;Pc=ia[0];Fa=ia[1];wc=ia[2];Ra=ia[3];if(Pc!==va[0]||Fa!==va[1]||wc!==va[2]||Ra!==va[3])S.stencilOpSeparate(Pc,Fa,wc,Ra),va[0]=Pc,va[1]=Fa,va[2]=wc,va[3]=Ra;Ba=F[0];lb=F[1];wb=F[2];Db=F[3];if(Ba!==w[0]||lb!==w[1]||wb!==w[2]||Db!==w[3])S.stencilOpSeparate(Ba,
lb,wb,Db),w[0]=Ba,w[1]=lb,w[2]=wb,w[3]=Db;sb=ka.scissor_enable;sb!==U.scissor_enable&&(sb?S.enable(3089):S.disable(3089),U.scissor_enable=sb);vc=Ca[0];xb=Ca[1];xd=Ca[2];sc=Ca[3];if(vc!==ub[0]||xb!==ub[1]||xd!==ub[2]||sc!==ub[3])S.scissor(vc,xb,xd,sc),ub[0]=vc,ub[1]=xb,ub[2]=xd,ub[3]=sc}h=this.viewport;r=h.x|0;k=h.y|0;v="width"in h?h.width|0:O.framebufferWidth-r;A="height"in h?h.height|0:O.framebufferHeight-k;q=O.viewportWidth;O.viewportWidth=v;B=O.viewportHeight;O.viewportHeight=A;S.viewport(r,k,
v,A);ha[0]=r;ha[1]=k;ha[2]=v;ha[3]=A;S.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;S.enable(3042);U.blend_enable=!0;S.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;S.disable(2929);U.depth_enable=!1;S.disable(2960);U.stencil_enable=!1;if(D=U.profile)E=performance.now(),y.count++;S.useProgram(n.program);G=Vb.angle_instanced_arrays;Pa.setVAO(null);t.buffer=this.sizeBuffer;C=!1;K=null;P=0;T=!1;X=Q=0;na=1;ea=0;ca=5126;ge=tb=Ea=ga=0;u(t)?(C=!0,K=M.createStream(34962,t),
ca=K.dtype):(K=M.getBuffer(t))?ca=K.dtype:"constant"in t?(na=2,"number"===typeof t.constant?(Ea=t.constant,tb=ge=ga=0):(Ea=0<t.constant.length?t.constant[0]:0,tb=1<t.constant.length?t.constant[1]:0,ge=2<t.constant.length?t.constant[2]:0,ga=3<t.constant.length?t.constant[3]:0)):(K=u(t.buffer)?M.createStream(34962,t.buffer):M.getBuffer(t.buffer),ca="type"in t?ra[t.type]:K.dtype,T=!!t.normalized,X=t.size|0,Q=t.offset|0,ea=t.stride|0,P=t.divisor|0);af=Oa.location;Bd=ba[af];if(1===na){Bd.buffer||S.enableVertexAttribArray(af);
De=X||1;if(Bd.type!==ca||Bd.size!==De||Bd.buffer!==K||Bd.normalized!==T||Bd.offset!==Q||Bd.stride!==ea)S.bindBuffer(34962,K.buffer),S.vertexAttribPointer(af,De,ca,T,ea,Q),Bd.type=ca,Bd.size=De,Bd.buffer=K,Bd.normalized=T,Bd.offset=Q,Bd.stride=ea;Bd.divisor!==P&&(G.vertexAttribDivisorANGLE(af,P),Bd.divisor=P)}else if(Bd.buffer&&(S.disableVertexAttribArray(af),Bd.buffer=null),Bd.x!==Ea||Bd.y!==tb||Bd.z!==ge||Bd.w!==ga)S.vertexAttrib4f(af,Ea,tb,ge,ga),Bd.x=Ea,Bd.y=tb,Bd.z=ge,Bd.w=ga;H.buffer=this.sizeBuffer;
Td=!1;Ud=null;ne=0;Xd=!1;hd=nd=0;wd=1;Yc=0;qd=5126;Kc=ed=sd=nc=0;u(H)?(Td=!0,Ud=M.createStream(34962,H),qd=Ud.dtype):(Ud=M.getBuffer(H))?qd=Ud.dtype:"constant"in H?(wd=2,"number"===typeof H.constant?(sd=H.constant,ed=Kc=nc=0):(sd=0<H.constant.length?H.constant[0]:0,ed=1<H.constant.length?H.constant[1]:0,Kc=2<H.constant.length?H.constant[2]:0,nc=3<H.constant.length?H.constant[3]:0)):(Ud=u(H.buffer)?M.createStream(34962,H.buffer):M.getBuffer(H.buffer),qd="type"in H?ra[H.type]:Ud.dtype,Xd=!!H.normalized,
hd=H.size|0,nd=H.offset|0,Yc=H.stride|0,ne=H.divisor|0);qc=L.location;bb=ba[qc];if(1===wd){bb.buffer||S.enableVertexAttribArray(qc);Gc=hd||1;if(bb.type!==qd||bb.size!==Gc||bb.buffer!==Ud||bb.normalized!==Xd||bb.offset!==nd||bb.stride!==Yc)S.bindBuffer(34962,Ud.buffer),S.vertexAttribPointer(qc,Gc,qd,Xd,Yc,nd),bb.type=qd,bb.size=Gc,bb.buffer=Ud,bb.normalized=Xd,bb.offset=nd,bb.stride=Yc;bb.divisor!==ne&&(G.vertexAttribDivisorANGLE(qc,ne),bb.divisor=ne)}else if(bb.buffer&&(S.disableVertexAttribArray(qc),
bb.buffer=null),bb.x!==sd||bb.y!==ed||bb.z!==Kc||bb.w!==nc)S.vertexAttrib4f(qc,sd,ed,Kc,nc),bb.x=sd,bb.y=ed,bb.z=Kc,bb.w=nc;Fb=this.charBuffer;oc=!1;Ua=null;Hc=0;bc=!1;Gd=rc=0;Cd=1;yc=0;Xb=5126;Gb=Ma=Qc=Dc=0;u(Fb)?(oc=!0,Ua=M.createStream(34962,Fb),Xb=Ua.dtype):(Ua=M.getBuffer(Fb))?Xb=Ua.dtype:"constant"in Fb?(Cd=2,"number"===typeof Fb.constant?(Qc=Fb.constant,Ma=Gb=Dc=0):(Qc=0<Fb.constant.length?Fb.constant[0]:0,Ma=1<Fb.constant.length?Fb.constant[1]:0,Gb=2<Fb.constant.length?Fb.constant[2]:0,Dc=
3<Fb.constant.length?Fb.constant[3]:0)):(Ua=u(Fb.buffer)?M.createStream(34962,Fb.buffer):M.getBuffer(Fb.buffer),Xb="type"in Fb?ra[Fb.type]:Ua.dtype,bc=!!Fb.normalized,Gd=Fb.size|0,rc=Fb.offset|0,yc=Fb.stride|0,Hc=Fb.divisor|0);Xa=qa.location;sa=ba[Xa];if(1===Cd){sa.buffer||S.enableVertexAttribArray(Xa);td=Gd||1;if(sa.type!==Xb||sa.size!==td||sa.buffer!==Ua||sa.normalized!==bc||sa.offset!==rc||sa.stride!==yc)S.bindBuffer(34962,Ua.buffer),S.vertexAttribPointer(Xa,td,Xb,bc,yc,rc),sa.type=Xb,sa.size=
td,sa.buffer=Ua,sa.normalized=bc,sa.offset=rc,sa.stride=yc;sa.divisor!==Hc&&(G.vertexAttribDivisorANGLE(Xa,Hc),sa.divisor=Hc)}else if(sa.buffer&&(S.disableVertexAttribArray(Xa),sa.buffer=null),sa.x!==Qc||sa.y!==Ma||sa.z!==Gb||sa.w!==Dc)S.vertexAttrib4f(Xa,Qc,Ma,Gb,Dc),sa.x=Qc,sa.y=Ma,sa.z=Gb,sa.w=Dc;Bb=this.position;Ta=!1;Ib=null;db=0;Ec=!1;$d=Rb=0;$b=1;Sb=0;pd=5126;vb=ob=Na=Tb=0;u(Bb)?(Ta=!0,Ib=M.createStream(34962,Bb),pd=Ib.dtype):(Ib=M.getBuffer(Bb))?pd=Ib.dtype:"constant"in Bb?($b=2,"number"===
typeof Bb.constant?(Na=Bb.constant,ob=vb=Tb=0):(Na=0<Bb.constant.length?Bb.constant[0]:0,ob=1<Bb.constant.length?Bb.constant[1]:0,vb=2<Bb.constant.length?Bb.constant[2]:0,Tb=3<Bb.constant.length?Bb.constant[3]:0)):(Ib=u(Bb.buffer)?M.createStream(34962,Bb.buffer):M.getBuffer(Bb.buffer),pd="type"in Bb?ra[Bb.type]:Ib.dtype,Ec=!!Bb.normalized,$d=Bb.size|0,Rb=Bb.offset|0,Sb=Bb.stride|0,db=Bb.divisor|0);hb=la.location;Qa=ba[hb];if(1===$b){Qa.buffer||S.enableVertexAttribArray(hb);lc=$d||2;if(Qa.type!==pd||
Qa.size!==lc||Qa.buffer!==Ib||Qa.normalized!==Ec||Qa.offset!==Rb||Qa.stride!==Sb)S.bindBuffer(34962,Ib.buffer),S.vertexAttribPointer(hb,lc,pd,Ec,Sb,Rb),Qa.type=pd,Qa.size=lc,Qa.buffer=Ib,Qa.normalized=Ec,Qa.offset=Rb,Qa.stride=Sb;Qa.divisor!==db&&(G.vertexAttribDivisorANGLE(hb,db),Qa.divisor=db)}else if(Qa.buffer&&(S.disableVertexAttribArray(hb),Qa.buffer=null),Qa.x!==Na||Qa.y!==ob||Qa.z!==vb||Qa.w!==Tb)S.vertexAttrib4f(hb,Na,ob,vb,Tb),Qa.x=Na,Qa.y=ob,Qa.z=vb,Qa.w=Tb;Yb=N.call(this,O,d,0);S.uniform1f(fa.location,
Yb);Zc=f.call(this,O,d,0);S.uniform1f(p.location,Zc);S.uniform1f(g.location,d.align);S.uniform1f(m.location,d.baseline);eb=this.viewportArray;S.uniform4f(oa.location,eb[0],eb[1],eb[2],eb[3]);jc=d.color;S.uniform4f(a.location,jc[0],jc[1],jc[2],jc[3]);dd=c.call(this,O,d,0);S.uniform2f(Z.location,dd[0],dd[1]);hc=x.call(this,O,d,0);S.uniform2f(R.location,hc[0],hc[1]);jb=this.scale;S.uniform2f(Ja.location,jb[0],jb[1]);kb=this.translate;S.uniform2f(Ld.location,kb[0],kb[1]);ua=d.positionOffset;S.uniform2f(La.location,
ua[0],ua[1]);S.uniform1f(aa.location,d.opacity);(pb=b.call(this,O,d,0))&&"framebuffer"===pb._reglType&&(pb=pb.color[0]);xa=pb._texture;S.uniform1i(l.location,xa.bind());(Va=ta.elements)?S.bindBuffer(34963,Va.buffer.buffer):Pa.currentVAO&&(Va=I.getElements(Pa.currentVAO.elements))&&S.bindBuffer(34963,Va.buffer.buffer);cb=d.offset;if(Aa=d.count)fb=ta.instances,0<fb?Va?G.drawElementsInstancedANGLE(0,Aa,Va.type,cb<<(Va.type-5121>>1),fb):G.drawArraysInstancedANGLE(0,cb,Aa,fb):0>fb&&(Va?S.drawElements(0,
Aa,Va.type,cb<<(Va.type-5121>>1)):S.drawArrays(0,cb,Aa)),U.dirty=!0,Pa.setVAO(null),O.viewportWidth=q,O.viewportHeight=B,D&&(y.cpuTime+=performance.now()-E),C&&M.destroyStream(K),Td&&M.destroyStream(Ud),oc&&M.destroyStream(Ua),Ta&&M.destroyStream(Ib),xa.unbind()},scope:function(a,b,c){var d,e,g,f,h,l,m,n,p,x,w,A,N,F,J,I,P,L,R,Q,Y,S,W,ha,Z,aa,ba,ca,fa,ia,ja,va,la,oa,qa,pa,Ca,Ha,La,Ja,Oa,Pa,tc,Ua,ab,ub,nb,Eb,rd,Vb,Xb,ac,pc,Ma,Gb,Xa,sa,ic,Bb,Ta,Ib,db,Ec,Rb,Jc,$b,Sb,Uc,Tb,Na,ob,vb,hb,Qa,lc,Yb,Zc,eb,jc,
dd,hc,jb,kb,ua,pb,xa,Va,cb,Aa,fb,Ia,Cb,Ab,Sa,Ic,Kb,$a,Ub,ya,ud,Ka,Ob,gb,ib,za,dc,Da,qb,rb,Ya,Za,kc,ad,uc,Wa,Mb,Pc,Fa,wc,Ra,Ba,lb,wb,Db,sb,vc,xb,xd,sc,Md,Lc,bd,od,Wb,cc,Pb,Ga,Zb,mb,yb,Nb,Qb,ec,gc,Ld,zc,Ac,Bc,Mc,Xc,Rc,Nc,Lb,Hb,Oc,Fc,Sc,fc,Vc;d=this.viewport;e=d.x|0;g=d.y|0;f="width"in d?d.width|0:O.framebufferWidth-e;h="height"in d?d.height|0:O.framebufferHeight-g;l=O.viewportWidth;O.viewportWidth=f;m=O.viewportHeight;O.viewportHeight=h;n=X[0];X[0]=e;p=X[1];X[1]=g;x=X[2];X[2]=f;w=X[3];X[3]=h;A=tb[0];
tb[0]=0;N=tb[1];tb[1]=0;F=tb[2];tb[2]=0;J=tb[3];tb[3]=1;I=ka.blend_enable;ka.blend_enable=!0;P=ga[0];ga[0]=770;L=ga[1];ga[1]=771;R=ga[2];ga[2]=773;Q=ga[3];ga[3]=1;Y=ka.depth_enable;ka.depth_enable=!1;S=ka.stencil_enable;ka.stencil_enable=!1;if(W=U.profile)ha=performance.now(),y.count++;Z=a.offset;aa=ta.offset;ta.offset=Z;ba=a.count;ca=ta.count;ta.count=ba;fa=ta.primitive;ta.primitive=0;ia=a.align;ja=Ea[64];Ea[64]=ia;va=v.call(this,O,a,c);la=Ea[69];Ea[69]=va;oa=C.call(this,O,a,c);qa=Ea[67];Ea[67]=
oa;pa=T.call(this,O,a,c);Ca=Ea[66];Ea[66]=pa;Ha=a.baseline;La=Ea[65];Ea[65]=Ha;Ja=K.call(this,O,a,c);Oa=Ea[62];Ea[62]=Ja;Pa=a.color;tc=Ea[14];Ea[14]=Pa;Ua=G.call(this,O,a,c);ab=Ea[63];Ea[63]=Ua;ub=a.opacity;nb=Ea[10];Ea[10]=ub;Eb=a.positionOffset;rd=Ea[68];Ea[68]=Eb;Vb=this.scale;Xb=Ea[6];Ea[6]=Vb;ac=this.translate;pc=Ea[8];Ea[8]=ac;Ma=this.viewportArray;Gb=Ea[3];Ea[3]=Ma;Xa=this.charBuffer;sa=!1;ic=null;Bb=0;Ta=!1;db=Ib=0;Ec=1;Rb=0;Jc=5126;Tb=Uc=Sb=$b=0;u(Xa)?(sa=!0,ic=M.createStream(34962,Xa),Jc=
ic.dtype):(ic=M.getBuffer(Xa))?Jc=ic.dtype:"constant"in Xa?(Ec=2,"number"===typeof Xa.constant?(Sb=Xa.constant,Uc=Tb=$b=0):(Sb=0<Xa.constant.length?Xa.constant[0]:0,Uc=1<Xa.constant.length?Xa.constant[1]:0,Tb=2<Xa.constant.length?Xa.constant[2]:0,$b=3<Xa.constant.length?Xa.constant[3]:0)):(ic=u(Xa.buffer)?M.createStream(34962,Xa.buffer):M.getBuffer(Xa.buffer),Jc="type"in Xa?ra[Xa.type]:ic.dtype,Ta=!!Xa.normalized,db=Xa.size|0,Ib=Xa.offset|0,Rb=Xa.stride|0,Bb=Xa.divisor|0);Na=r.buffer;r.buffer=ic;
ob=r.divisor;r.divisor=Bb;vb=r.normalized;r.normalized=Ta;hb=r.offset;r.offset=Ib;Qa=r.size;r.size=db;lc=r.state;r.state=Ec;Yb=r.stride;r.stride=Rb;Zc=r.type;r.type=Jc;eb=r.w;r.w=$b;jc=r.x;r.x=Sb;dd=r.y;r.y=Uc;hc=r.z;r.z=Tb;H.buffer=this.sizeBuffer;jb=!1;kb=null;ua=0;pb=!1;Va=xa=0;cb=1;Aa=0;fb=5126;Sa=Ab=Cb=Ia=0;u(H)?(jb=!0,kb=M.createStream(34962,H),fb=kb.dtype):(kb=M.getBuffer(H))?fb=kb.dtype:"constant"in H?(cb=2,"number"===typeof H.constant?(Cb=H.constant,Ab=Sa=Ia=0):(Cb=0<H.constant.length?H.constant[0]:
0,Ab=1<H.constant.length?H.constant[1]:0,Sa=2<H.constant.length?H.constant[2]:0,Ia=3<H.constant.length?H.constant[3]:0)):(kb=u(H.buffer)?M.createStream(34962,H.buffer):M.getBuffer(H.buffer),fb="type"in H?ra[H.type]:kb.dtype,pb=!!H.normalized,Va=H.size|0,xa=H.offset|0,Aa=H.stride|0,ua=H.divisor|0);Ic=E.buffer;E.buffer=kb;Kb=E.divisor;E.divisor=ua;$a=E.normalized;E.normalized=pb;Ub=E.offset;E.offset=xa;ya=E.size;E.size=Va;ud=E.state;E.state=cb;Ka=E.stride;E.stride=Aa;Ob=E.type;E.type=fb;gb=E.w;E.w=
Ia;ib=E.x;E.x=Cb;za=E.y;E.y=Ab;dc=E.z;E.z=Sa;Da=this.position;qb=!1;rb=null;Ya=0;Za=!1;ad=kc=0;uc=1;Wa=0;Mb=5126;Ra=wc=Fa=Pc=0;u(Da)?(qb=!0,rb=M.createStream(34962,Da),Mb=rb.dtype):(rb=M.getBuffer(Da))?Mb=rb.dtype:"constant"in Da?(uc=2,"number"===typeof Da.constant?(Fa=Da.constant,wc=Ra=Pc=0):(Fa=0<Da.constant.length?Da.constant[0]:0,wc=1<Da.constant.length?Da.constant[1]:0,Ra=2<Da.constant.length?Da.constant[2]:0,Pc=3<Da.constant.length?Da.constant[3]:0)):(rb=u(Da.buffer)?M.createStream(34962,Da.buffer):
M.getBuffer(Da.buffer),Mb="type"in Da?ra[Da.type]:rb.dtype,Za=!!Da.normalized,ad=Da.size|0,kc=Da.offset|0,Wa=Da.stride|0,Ya=Da.divisor|0);Ba=B.buffer;B.buffer=rb;lb=B.divisor;B.divisor=Ya;wb=B.normalized;B.normalized=Za;Db=B.offset;B.offset=kc;sb=B.size;B.size=ad;vc=B.state;B.state=uc;xb=B.stride;B.stride=Wa;xd=B.type;B.type=Mb;sc=B.w;B.w=Pc;Md=B.x;B.x=Fa;Lc=B.y;B.y=wc;bd=B.z;B.z=Ra;t.buffer=this.sizeBuffer;od=!1;Wb=null;cc=0;Pb=!1;Zb=Ga=0;mb=1;yb=0;Nb=5126;Ld=gc=ec=Qb=0;u(t)?(od=!0,Wb=M.createStream(34962,
t),Nb=Wb.dtype):(Wb=M.getBuffer(t))?Nb=Wb.dtype:"constant"in t?(mb=2,"number"===typeof t.constant?(ec=t.constant,gc=Ld=Qb=0):(ec=0<t.constant.length?t.constant[0]:0,gc=1<t.constant.length?t.constant[1]:0,Ld=2<t.constant.length?t.constant[2]:0,Qb=3<t.constant.length?t.constant[3]:0)):(Wb=u(t.buffer)?M.createStream(34962,t.buffer):M.getBuffer(t.buffer),Nb="type"in t?ra[t.type]:Wb.dtype,Pb=!!t.normalized,Zb=t.size|0,Ga=t.offset|0,yb=t.stride|0,cc=t.divisor|0);zc=D.buffer;D.buffer=Wb;Ac=D.divisor;D.divisor=
cc;Bc=D.normalized;D.normalized=Pb;Mc=D.offset;D.offset=Ga;Xc=D.size;D.size=Zb;Rc=D.state;D.state=mb;Nc=D.stride;D.stride=yb;Lb=D.type;D.type=Nb;Hb=D.w;D.w=Qb;Oc=D.x;D.x=ec;Fc=D.y;D.y=gc;Sc=D.z;D.z=Ld;fc=ea.vert;ea.vert=61;Vc=ea.frag;ea.frag=60;U.dirty=!0;b(O,a,c);O.viewportWidth=l;O.viewportHeight=m;X[0]=n;X[1]=p;X[2]=x;X[3]=w;tb[0]=A;tb[1]=N;tb[2]=F;tb[3]=J;ka.blend_enable=I;ga[0]=P;ga[1]=L;ga[2]=R;ga[3]=Q;ka.depth_enable=Y;ka.stencil_enable=S;W&&(y.cpuTime+=performance.now()-ha);ta.offset=aa;ta.count=
ca;ta.primitive=fa;Ea[64]=ja;Ea[69]=la;Ea[67]=qa;Ea[66]=Ca;Ea[65]=La;Ea[62]=Oa;Ea[14]=tc;Ea[63]=ab;Ea[10]=nb;Ea[68]=rd;Ea[6]=Xb;Ea[8]=pc;Ea[3]=Gb;sa&&M.destroyStream(ic);r.buffer=Na;r.divisor=ob;r.normalized=vb;r.offset=hb;r.size=Qa;r.state=lc;r.stride=Yb;r.type=Zc;r.w=eb;r.x=jc;r.y=dd;r.z=hc;jb&&M.destroyStream(kb);E.buffer=Ic;E.divisor=Kb;E.normalized=$a;E.offset=Ub;E.size=ya;E.state=ud;E.stride=Ka;E.type=Ob;E.w=gb;E.x=ib;E.y=za;E.z=dc;qb&&M.destroyStream(rb);B.buffer=Ba;B.divisor=lb;B.normalized=
wb;B.offset=Db;B.size=sb;B.state=vc;B.stride=xb;B.type=xd;B.w=sc;B.x=Md;B.y=Lc;B.z=bd;od&&M.destroyStream(Wb);D.buffer=zc;D.divisor=Ac;D.normalized=Bc;D.offset=Mc;D.size=Xc;D.state=Rc;D.stride=Nc;D.type=Lb;D.w=Hb;D.x=Oc;D.y=Fc;D.z=Sc;ea.vert=fc;ea.frag=Vc;U.dirty=!0}}}}},{}],25:[function(C,ca,Ja){var d=C("./sorted-object-keys");ca.exports=function(y,n){for(var N=d(n),f=0;f<N.length;++f)y[N[f]]=n[N[f]];return y}},{"./sorted-object-keys":34}],26:[function(C,ca,Ja){function d(d,f,c,n,b,v){for(var y=
0;y<f;++y)for(var C=d[y],K=0;K<c;++K)for(var G=C[K],r=0;r<n;++r)b[v++]=G[r]}function y(n,f,c,x,b){for(var v=1,C=c+1;C<f.length;++C)v*=f[C];var T=f[c];if(4===f.length-c){var K=f[c+1],G=f[c+2];f=f[c+3];for(C=0;C<T;++C)d(n[C],K,G,f,x,b),b+=v}else for(C=0;C<T;++C)y(n[C],f,c+1,x,b),b+=v}var n=C("./pool");ca.exports={shape:function(d){for(var f=[];d.length;d=d[0])f.push(d.length);return f},flatten:function(N,f,c,x){var b=1;if(f.length)for(var v=0;v<f.length;++v)b*=f[v];else b=0;c=x||n.allocType(c,b);switch(f.length){case 0:break;
case 1:x=f[0];for(f=0;f<x;++f)c[f]=N[f];break;case 2:x=f[0];f=f[1];for(v=b=0;v<x;++v)for(var C=N[v],T=0;T<f;++T)c[b++]=C[T];break;case 3:d(N,f[0],f[1],f[2],c,0);break;default:y(N,f,0,c,0)}return c}}},{"./pool":32}],27:[function(C,ca,Ja){var d=C("./is-typed-array");ca.exports=function(y){return Array.isArray(y)||d(y)}},{"./is-typed-array":30}],28:[function(C,ca,Ja){var d=C("./is-typed-array");ca.exports=function(y){return!!y&&"object"===typeof y&&Array.isArray(y.shape)&&Array.isArray(y.stride)&&"number"===
typeof y.offset&&y.shape.length===y.stride.length&&(Array.isArray(y.data)||d(y.data))}},{"./is-typed-array":30}],29:[function(C,ca,Ja){ca.exports=function(d){return!(d&d-1)&&!!d}},{}],30:[function(C,ca,Ja){ca.exports=function(d){return d instanceof Uint8Array||d instanceof Uint16Array||d instanceof Uint32Array||d instanceof Int8Array||d instanceof Int16Array||d instanceof Int32Array||d instanceof Float32Array||d instanceof Float64Array||d instanceof Uint8ClampedArray}},{}],31:[function(C,ca,Ja){ca.exports=
function(d,y){for(var n=Array(d),N=0;N<d;++N)n[N]=y(N);return n}},{}],32:[function(C,ca,Ja){function d(d){var f,c;f=(65535<d)<<4;d>>>=f;c=(255<d)<<3;d>>>=c;f|=c;c=(15<d)<<2;d>>>=c;f|=c;c=(3<d)<<1;return f|c|d>>>c>>1}function y(){function y(f){a:{for(var b=16;268435456>=b;b*=16)if(f<=b){f=b;break a}f=0}b=c[d(f)>>2];return 0<b.length?b.pop():new ArrayBuffer(f)}function f(f){c[d(f.byteLength)>>2].push(f)}var c=n(8,function(){return[]});return{alloc:y,free:f,allocType:function(c,b){var d=null;switch(c){case 5120:d=
new Int8Array(y(b),0,b);break;case 5121:d=new Uint8Array(y(b),0,b);break;case 5122:d=new Int16Array(y(2*b),0,b);break;case 5123:d=new Uint16Array(y(2*b),0,b);break;case 5124:d=new Int32Array(y(4*b),0,b);break;case 5125:d=new Uint32Array(y(4*b),0,b);break;case 5126:d=new Float32Array(y(4*b),0,b);break;default:return null}return d.length!==b?d.subarray(0,b):d},freeType:function(c){f(c.buffer)}}}var n=C("./loop");C=y();C.zero=y();ca.exports=C},{"./loop":31}],33:[function(C,ca,Ja){ca.exports={next:"function"===
typeof requestAnimationFrame?function(d){return requestAnimationFrame(d)}:function(d){return setTimeout(d,16)},cancel:"function"===typeof cancelAnimationFrame?function(d){return cancelAnimationFrame(d)}:clearTimeout}},{}],34:[function(C,ca,Ja){ca.exports=function(d){return Object.keys(d).sort()}},{}],35:[function(C,ca,Ja){var d=C("./pool"),y=new Float32Array(1),n=new Uint32Array(y.buffer);ca.exports=function(C){for(var f=d.allocType(5123,C.length),c=0;c<C.length;++c)if(isNaN(C[c]))f[c]=65535;else if(Infinity===
C[c])f[c]=31744;else if(-Infinity===C[c])f[c]=64512;else{y[0]=C[c];var x=n[0],b=x>>>31<<15,v=(x<<1>>>24)-127,x=x>>13&1023;f[c]=-24>v?b:-14>v?b+(x+1024>>-14-v):15<v?b+31744:b+(v+15<<10)+x}return f}},{"./pool":32}],36:[function(C,ca,Ja){var d=C("./sorted-object-keys");ca.exports=function(y){return d(y).map(function(d){return y[d]})}},{"./sorted-object-keys":34}],37:[function(C,ca,Ja){function d(d,b,f){function n(){var b=window.innerWidth,c=window.innerHeight;d!==document.body&&(c=y.getBoundingClientRect(),
b=c.right-c.left,c=c.bottom-c.top);y.width=f*b;y.height=f*c}var y=document.createElement("canvas");c(y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});d.appendChild(y);d===document.body&&(y.style.position="absolute",c(d.style,{margin:0,padding:0}));var C;d!==document.body&&"function"===typeof ResizeObserver?(C=new ResizeObserver(function(){setTimeout(n)}),C.observe(d)):window.addEventListener("resize",n,!1);n();return{canvas:y,onDestroy:function(){C?C.disconnect():window.removeEventListener("resize",
n);d.removeChild(y)}}}function y(c,b){function d(f){try{return c.getContext(f,b)}catch(n){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function n(c){if("string"===typeof c)return c.split();f(Array.isArray(c),"invalid extension array");return c}function N(c){return"string"===typeof c?(f("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(c)):c}var f=C("./util/check"),c=C("./util/extend");ca.exports=function(c){var b=c||{},v,C,T,K;
c={};var G=[],r=[],E="undefined"===typeof window?1:window.devicePixelRatio,B=!1,D=function(b){b&&f.raise(b)},Q=function(){};"string"===typeof b?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),v=document.querySelector(b),f(v,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?v=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?
(K=b,T=K.canvas):(f.constructor(b),"gl"in b?K=b.gl:"canvas"in b?T=N(b.canvas):"container"in b&&(C=N(b.container)),"attributes"in b&&(c=b.attributes,f.type(c,"object","invalid context attributes")),"extensions"in b&&(G=n(b.extensions)),"optionalExtensions"in b&&(r=n(b.optionalExtensions)),"onDone"in b&&(f.type(b.onDone,"function","invalid or missing onDone callback"),D=b.onDone),"profile"in b&&(B=!!b.profile),"pixelRatio"in b&&(E=+b.pixelRatio,f(0<E,"invalid pixel ratio"))):f.raise("invalid arguments to regl");
v&&("canvas"===v.nodeName.toLowerCase()?T=v:C=v);if(!K){if(!T){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");v=d(C||document.body,D,E);if(!v)return null;T=v.canvas;Q=v.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);K=y(T,c)}return K?{gl:K,canvas:T,container:C,extensions:G,optionalExtensions:r,pixelRatio:E,profile:B,onDone:D,onDestroy:Q}:(Q(),D("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(C,ca,Ja){ca.exports=function(y,n){function C(b){var c=!1;"altKey"in b&&(c=c||b.altKey!==B.alt,B.alt=!!b.altKey);"shiftKey"in b&&(c=c||b.shiftKey!==B.shift,B.shift=!!b.shiftKey);"ctrlKey"in b&&(c=c||b.ctrlKey!==B.control,B.control=!!b.ctrlKey);"metaKey"in b&&(c=c||b.metaKey!==B.meta,B.meta=!!b.metaKey);return c}function f(b,c){var f=d.x(c),h=d.y(c);"buttons"in c&&(b=c.buttons|0);if(b!==G||f!==r||h!==E||C(c))G=b|0,r=f||0,E=h||0,n&&n(G,r,E,
B)}function c(b){f(0,b)}function x(){if(G||r||E||B.shift||B.alt||B.meta||B.control)G=r=E=0,B.shift=B.alt=B.control=B.meta=!1,n&&n(0,0,0,B)}function b(b){C(b)&&n&&n(G,r,E,B)}function v(b){0===d.buttons(b)?f(0,b):f(G,b)}function ca(b){f(G|d.buttons(b),b)}function T(b){f(G&~d.buttons(b),b)}function K(){D||(D=!0,y.addEventListener("mousemove",v),y.addEventListener("mousedown",ca),y.addEventListener("mouseup",T),y.addEventListener("mouseleave",c),y.addEventListener("mouseenter",c),y.addEventListener("mouseout",
c),y.addEventListener("mouseover",c),y.addEventListener("blur",x),y.addEventListener("keyup",b),y.addEventListener("keydown",b),y.addEventListener("keypress",b),y!==window&&(window.addEventListener("blur",x),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}n||(n=y,y=window);var G=0,r=0,E=0,B={shift:!1,alt:!1,control:!1,meta:!1},D=!1;K();var Q={element:y};Object.defineProperties(Q,{enabled:{get:function(){return D},set:function(d){d?K():
D&&(D=!1,y.removeEventListener("mousemove",v),y.removeEventListener("mousedown",ca),y.removeEventListener("mouseup",T),y.removeEventListener("mouseleave",c),y.removeEventListener("mouseenter",c),y.removeEventListener("mouseout",c),y.removeEventListener("mouseover",c),y.removeEventListener("blur",x),y.removeEventListener("keyup",b),y.removeEventListener("keydown",b),y.removeEventListener("keypress",b),y!==window&&(window.removeEventListener("blur",x),window.removeEventListener("keyup",b),window.removeEventListener("keydown",
b),window.removeEventListener("keypress",b)))},enumerable:!0},buttons:{get:function(){return G},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return E},enumerable:!0},mods:{get:function(){return B},enumerable:!0}});return Q};var d=C("mouse-event")},{"mouse-event":39}],39:[function(C,ca,Ja){function d(d){return d.target||d.srcElement||window}Ja.buttons=function(d){if("object"===typeof d){if("buttons"in d)return d.buttons;if("which"in d){d=d.which;if(2===d)return 4;if(3===
d)return 2;if(0<d)return 1<<d-1}else if("button"in d){d=d.button;if(1===d)return 4;if(2===d)return 2;if(0<=d)return 1<<d}}return 0};Ja.element=d;Ja.x=function(y){if("object"===typeof y){if("offsetX"in y)return y.offsetX;var n=d(y).getBoundingClientRect();return y.clientX-n.left}return 0};Ja.y=function(y){if("object"===typeof y){if("offsetY"in y)return y.offsetY;var n=d(y).getBoundingClientRect();return y.clientY-n.top}return 0}},{}],40:[function(C,ca,Ja){function d(b,c){for(var d=0;d<b.length;++d)if(b[d]===
c)return d;return-1}var y=C("./lib/util/check"),n=C("./lib/util/extend"),N=C("./lib/dynamic"),f=C("./lib/util/raf"),c=C("./lib/util/clock"),x=C("./lib/strings"),b=C("./lib/webgl"),v=C("./lib/extension"),na=C("./lib/limits"),T=C("./lib/buffer"),K=C("./lib/elements"),G=C("./lib/texture"),r=C("./lib/renderbuffer"),E=C("./lib/framebuffer"),B=C("./lib/attribute"),D=C("./lib/shader"),Q=C("./lib/read"),A=C("./lib/core"),P=C("./lib/stats"),ge=C("./lib/timer");ca.exports=function(h){function e(){if(0===nb.length)M&&
M.update(),pc=null;else{pc=f.next(e);a();for(var b=nb.length-1;0<=b;--b){var c=nb[b];c&&c(I,null,0)}la.flush();M&&M.update()}}function g(){!pc&&0<nb.length&&(pc=f.next(e))}function l(){pc&&(f.cancel(e),pc=null)}function C(a){a.preventDefault();Ja=!0;l();ga.forEach(function(a){a()})}function Z(a){la.getError();Ja=!1;Ld.restore();ka.restore();ab.restore();ea.restore();Ea.restore();Pa.restore();u.restore();M&&M.restore();tb.procs.refresh();g();pa.forEach(function(a){a()})}function m(a){function b(a,
c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(N.isDynamic(f))e[b]=N.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(N.isDynamic(f[g])){e[b]=N.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}y(!!a,"invalid args to regl({...})");y.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];
delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=tb.compile(a,f,e,d,g),l=h.draw,m=h.batch,p=h.scope,r=[];return n(function(a,b){var d;
Ja&&y.raise("context lost");if("function"===typeof a)return p.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)p.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)p.call(this,a[d],b,d);else return p.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function ca(a,b){var c=0;
tb.procs.poll();var d=b.color;d&&(la.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(la.clearDepth(+b.depth),c|=256);"stencil"in b&&(la.clearStencil(b.stencil|0),c|=1024);y(!!c,"called regl.clear with no buffer specified");la.clear(c)}function L(a){y.type(a,"function","regl.frame() callback must be a function");nb.push(a);g();return{cancel:function(){function b(){var a=d(nb,b);nb[a]=nb[nb.length-1];--nb.length;0>=nb.length&&l()}var c=d(nb,a);y(0<=c,"cannot cancel a frame twice");
nb[c]=b}}}function fa(){var a=Ha.viewport,b=Ha.scissor_box;a[0]=a[1]=b[0]=b[1]=0;I.viewportWidth=I.framebufferWidth=I.drawingBufferWidth=a[2]=b[2]=la.drawingBufferWidth;I.viewportHeight=I.framebufferHeight=I.drawingBufferHeight=a[3]=b[3]=la.drawingBufferHeight}function a(){I.tick+=1;I.time=aa();fa();tb.procs.poll()}function p(){ea.refresh();fa();tb.procs.refresh();M&&M.update()}function aa(){return(c()-O)/1E3}console.log("REGL args are:",h);h=b(h);if(!h)return null;var la=h.gl,La=la.getContextAttributes(),
Ja=la.isContextLost(),Ld=v(la,h);if(!Ld)return null;var oa=x(),Oa=P(),ba=Ld.extensions,M=ge(la,ba),O=c(),U=la.drawingBufferWidth,ta=la.drawingBufferHeight,I={tick:0,time:0,viewportWidth:U,viewportHeight:ta,framebufferWidth:U,framebufferHeight:ta,drawingBufferWidth:U,drawingBufferHeight:ta,pixelRatio:h.pixelRatio},U={elements:null,primitive:4,count:-1,offset:0,instances:-1},Vb=na(la,ba),ab=T(la,Oa,h,function(a){return u.destroyBuffer(a)}),S=K(la,ba,ab,Oa),u=B(la,ba,Vb,Oa,ab,S,U),ka=D(la,oa,Oa,h),ea=
G(la,ba,Vb,function(){tb.procs.poll()},I,Oa,h),Ea=r(la,ba,Vb,Oa,h),Pa=E(la,ba,Vb,ea,Ea,Oa),tb=A(la,oa,ba,Vb,ab,S,ea,Pa,{},u,ka,U,I,M,h),oa=Q(la,Pa,tb.procs.poll,I,La,ba,Vb),Ha=tb.next,W=la.canvas,nb=[],ga=[],pa=[],ac=[h.onDestroy],pc=null;W&&(W.addEventListener("webglcontextlost",C,!1),W.addEventListener("webglcontextrestored",Z,!1));var ic=Pa.setFBO=m({framebuffer:N.define.call(null,1,"framebuffer")});p();La=n(m,{clear:function(a){y("object"===typeof a&&a,"regl.clear() takes an object as input");
if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ic(n({framebuffer:a.framebuffer.faces[b]},a),ca);else ic(a,ca);else ca(null,a)},prop:N.define.bind(null,1),context:N.define.bind(null,2),"this":N.define.bind(null,3),draw:m({}),buffer:function(a){return ab.create(a,34962,!1,!1)},elements:function(a){return S.create(a,!1)},texture:ea.create2D,cube:ea.createCube,renderbuffer:Ea.create,framebuffer:Pa.create,framebufferCube:Pa.createCube,vao:u.createVAO,
attributes:La,frame:L,on:function(a,b){y.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return L(b);case "lost":c=ga;break;case "restore":c=pa;break;case "destroy":c=ac;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Vb,hasExtension:function(a){return 0<=Vb.extensions.indexOf(a.toLowerCase())},read:oa,destroy:function(){nb.length=
0;l();W&&(W.removeEventListener("webglcontextlost",C),W.removeEventListener("webglcontextrestored",Z));ka.clear();Pa.clear();Ea.clear();u.clear();ea.clear();S.clear();ab.clear();M&&M.clear();ac.forEach(function(a){a()})},_gl:la,_refresh:p,poll:function(){a();M&&M.update()},now:aa,stats:Oa});h.onDone(null,La);return La}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,
"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
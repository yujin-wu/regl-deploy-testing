<!DOCTYPE html>
      <html>
        <head>
          <title>example/sprites.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function X(ia,Fa,e){function S(g,h){if(!Fa[g]){if(!ia[g]){var p="function"==typeof require&&require;if(!h&&p)return p(g,!0);if(H)return H(g,!0);p=Error("Cannot find module '"+g+"'");throw p.code="MODULE_NOT_FOUND",p;}p=Fa[g]={exports:{}};ia[g][0].call(p.exports,function(d){return S(ia[g][1][d]||d)},p,p.exports,X,ia,Fa,e)}return Fa[g].exports}for(var H="function"==typeof require&&require,N=0;N<e.length;N++)S(e[N]);return S}return X})()({1:[function(X,ia,Fa){var e=X("../regl")({extensions:"OES_texture_float"}),
S=X("mouse-change")(),H=Array(2).fill().map(function(){return e.framebuffer({radius:512,colorType:"float",depthStencil:!1})}),N=e({vert:"\n  precision mediump float;\n  attribute vec2 position;\n  void main () {\n    gl_Position = vec4(position, 0, 1);\n  }\n  ",frag:"\n  precision highp float;\n\n  uniform sampler2D state;\n  uniform float shapeX, shapeY, deltaT, gravity;\n\n  void main () {\n    vec2 shape = vec2(shapeX, shapeY);\n    vec4 prevState = texture2D(state,\n      gl_FragCoord.xy / shape);\n\n    vec2 position = prevState.xy;\n    vec2 velocity = prevState.zw;\n\n    position += 0.5 * velocity * deltaT;\n    if (position.x < -1.0 || position.x > 1.0) {\n      velocity.x *= -1.0;\n    }\n    if (position.y < -1.0 || position.y > 1.0) {\n      velocity.y *= -1.0;\n    }\n    position += 0.5 * velocity * deltaT;\n\n    velocity.y = velocity.y + gravity * deltaT;\n\n    gl_FragColor = vec4(position, velocity);\n  }\n  ",
depth:{enable:!1},framebuffer:function(d){return H[(d.tick+1)%2]},uniforms:{state:function(d){return H[d.tick%2]},shapeX:e.context("viewportWidth"),shapeY:e.context("viewportHeight"),deltaT:.1,gravity:-.5},attributes:{position:[0,-4,4,4,-4,4]},primitive:"triangles",elements:null,offset:0,count:3}),g=e({vert:"\n  precision highp float;\n  attribute vec2 sprite;\n  uniform sampler2D state;\n  varying vec2 rg;\n  void main () {\n    vec2 position = texture2D(state, sprite).xy;\n    gl_PointSize = 16.0;\n    rg = sprite;\n    gl_Position = vec4(position, 0, 1);\n  }\n  ",
frag:"\n  precision highp float;\n  varying vec2 rg;\n  void main () {\n    gl_FragColor = vec4(rg, 1.0 - max(rg.x, rg.y), 1);\n  }\n  ",attributes:{sprite:Array(262144).fill().map(function(d,h){return[h%512/512,(h/512|0)/512]}).reverse()},uniforms:{state:function(d){return H[d.tick%2]}},primitive:"points",offset:function(d,h){return 262144-h.count},elements:null,count:e.prop("count")}),h=0,p={data:new Float32Array(256),width:64,height:1},d=document.createElement("div");Object.assign(d.style,{color:"white",
position:"absolute",left:"20px",top:"20px","z-index":20});document.body.appendChild(d);e.frame(function(E){var J=E.tick,M=E.pixelRatio,U=Math.min(Math.max(2*M*S.x/E.drawingBufferWidth-1,-.999),.999);E=-Math.min(Math.max(2*M*S.y/E.drawingBufferHeight-1,-.999),.999);if(S.buttons){for(M=0;64>M;++M)p.data[4*M]=U,p.data[4*M+1]=E,p.data[4*M+2]=.25*(Math.random()-.5),p.data[4*M+3]=Math.random();H[J%2].color[0].subimage(p,h%512,(h/512|0)%512);h+=64;d.innerText=Math.min(h,262144)}N();e.clear({color:[0,0,0,
1],depth:1});g({count:Math.min(h,262144)})})},{"../regl":40,"mouse-change":38}],2:[function(X,ia,Fa){function e(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var S=X("./util/sorted-object-keys"),H=X("./util/check"),N=X("./util/values"),g=X("./constants/dtypes.json"),h=X("./util/is-typed-array"),p=X("./util/is-ndarray"),d=X("./constants/primitives.json"),E="attributes elements offset count primitive instances".split(" ");
ia.exports=function(J,M,U,v,A,F,Z){function t(d){if(d!==ba.currentVAO){var q=M.oes_vertex_array_object;d?q.bindVertexArrayOES(d.vao):q.bindVertexArrayOES(null);ba.currentVAO=d}}function V(d){if(d!==ba.currentVAO){if(d)d.bindAttrs();else{for(var q=M.angle_instanced_arrays,h=0;h<z.length;++h){var b=z[h];b.buffer?(J.enableVertexAttribArray(h),b.buffer.bind(),J.vertexAttribPointer(h,b.size,b.type,b.normalized,b.stride,b.offfset),q&&b.divisor&&q.vertexAttribDivisorANGLE(h,b.divisor)):(J.disableVertexAttribArray(h),
J.vertexAttrib4f(h,b.x,b.y,b.z,b.w))}Z.elements?J.bindBuffer(34963,Z.elements.buffer.buffer):J.bindBuffer(34963,null)}ba.currentVAO=d}}function m(){N(f).forEach(function(d){d.destroy()})}function u(){this.id=++W;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var d=M.oes_vertex_array_object;this.vao=d?d.createVertexArrayOES():null;f[this.id]=this;this.buffers=[]}function ja(){M.oes_vertex_array_object&&N(f).forEach(function(d){d.refresh()})}
var b=U.maxAttributes,z=Array(b);for(U=0;U<b;++U)z[U]=new e;var W=0,f={},ba={Record:e,scope:{},state:z,currentVAO:null,targetVAO:null,restore:M.oes_vertex_array_object?ja:function(){},createVAO:function(G){function q(G){var z;if(Array.isArray(G))z=G,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{H("object"===typeof G,"invalid arguments for create vao");H("attributes"in G,"must specify attributes for vao");if(G.elements){var c=
G.elements;f.ownsElements?("function"===typeof c&&"elements"===c._reglType?f.elements.destroy():f.elements(c),f.ownsElements=!1):F.getElements(G.elements)?(f.elements=G.elements,f.ownsElements=!1):(f.elements=F.create(G.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;z=G.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in G&&(f.offset=G.offset|0);"count"in G&&(f.count=
G.count|0);"instances"in G&&(f.instances=G.instances|0);"primitive"in G&&(H(G.primitive in d,"bad primitive type: "+G.primitive),f.primitive=d[G.primitive]);H.optional(function(){for(var a=S(G),c=0;c<a.length;++c)H(0<=E.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+E)});H(Array.isArray(z),"attributes must be an array")}H(z.length<b,"too many attributes");H(0<z.length,"must specify at least one attribute");var c={},l=f.attributes;l.length=z.length;for(var a=0;a<z.length;++a){var m=
z[a],x=l[a]=new e,W=m.data||m;if(Array.isArray(W)||h(W)||p(W)){var t;f.buffers[a]&&(t=f.buffers[a],h(W)&&t._buffer.byteLength>=W.byteLength?t.subdata(W):(t.destroy(),f.buffers[a]=null));f.buffers[a]||(t=f.buffers[a]=A.create(m,34962,!1,!0));x.buffer=A.getBuffer(t);x.size=x.buffer.dimension|0;x.normalized=!1;x.type=x.buffer.dtype;x.offset=0;x.stride=0;x.divisor=0;x.state=1;c[a]=1}else A.getBuffer(m)?(x.buffer=A.getBuffer(m),x.size=x.buffer.dimension|0,x.normalized=!1,x.type=x.buffer.dtype,x.offset=
0,x.stride=0,x.divisor=0,x.state=1):A.getBuffer(m.buffer)?(x.buffer=A.getBuffer(m.buffer),x.size=(+m.size||x.buffer.dimension)|0,x.normalized=!!m.normalized||!1,"type"in m?(H.parameter(m.type,g,"invalid buffer type"),x.type=g[m.type]):x.type=x.buffer.dtype,x.offset=(m.offset||0)|0,x.stride=(m.stride||0)|0,x.divisor=(m.divisor||0)|0,x.state=1,H(1<=x.size&&4>=x.size,"size must be between 1 and 4"),H(0<=x.offset,"invalid offset"),H(0<=x.stride&&255>=x.stride,"stride must be between 0 and 255"),H(0<=
x.divisor,"divisor must be positive"),H(!x.divisor||!!M.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in m?(H(0<a,"first attribute must not be a constant"),x.x=+m.x||0,x.y=+m.y||0,x.z=+m.z||0,x.w=+m.w||0,x.state=2):H(!1,"invalid attribute spec for location "+a)}for(t=0;t<f.buffers.length;++t)!c[t]&&f.buffers[t]&&(f.buffers[t].destroy(),f.buffers[t]=null);f.refresh();return q}var f=new u;v.vaoCount+=1;q.destroy=function(){for(var d=0;d<f.buffers.length;++d)f.buffers[d]&&
f.buffers[d].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};q._vao=f;q._reglType="vao";return q(G)},getVAO:function(d){return"function"===typeof d&&d._vao?d._vao:null},destroyBuffer:function(d){for(var q=0;q<z.length;++q){var b=z[q];b.buffer===d&&(J.disableVertexAttribArray(q),b.buffer=null)}},setVAO:M.oes_vertex_array_object?t:V,clear:M.oes_vertex_array_object?m:function(){}};u.prototype.bindAttrs=function(){for(var d=M.angle_instanced_arrays,
q=this.attributes,h=0;h<q.length;++h){var f=q[h];f.buffer?(J.enableVertexAttribArray(h),J.bindBuffer(34962,f.buffer.buffer),J.vertexAttribPointer(h,f.size,f.type,f.normalized,f.stride,f.offset),d&&f.divisor&&d.vertexAttribDivisorANGLE(h,f.divisor)):(J.disableVertexAttribArray(h),J.vertexAttrib4f(h,f.x,f.y,f.z,f.w))}for(d=q.length;d<b;++d)J.disableVertexAttribArray(d);(d=F.getElements(this.elements))?J.bindBuffer(34963,d.buffer.buffer):J.bindBuffer(34963,null)};u.prototype.refresh=function(){var d=
M.oes_vertex_array_object;d&&(d.bindVertexArrayOES(this.vao),this.bindAttrs(),ba.currentVAO=null,d.bindVertexArrayOES(null))};u.prototype.destroy=function(){if(this.vao){var d=M.oes_vertex_array_object;this===ba.currentVAO&&(ba.currentVAO=null,d.bindVertexArrayOES(null));d.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);f[this.id]&&(delete f[this.id],--v.vaoCount)};return ba}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(X,ia,Fa){function e(d){return U[Object.prototype.toString.call(d)]|0}function S(d,h){for(var p=0;p<h.length;++p)d[p]=h[p]}function H(d,h,p,m,g,e,b){for(var z=0,W=0;W<p;++W)for(var f=0;f<m;++f)d[z++]=h[g*W+e*f+b]}var N=X("./util/sorted-object-keys"),g=X("./util/check"),h=X("./util/is-typed-array"),p=X("./util/is-ndarray"),d=X("./util/values"),E=X("./util/pool");Fa=X("./util/flatten");
var J=Fa.flatten,M=Fa.shape,U=X("./constants/arraytypes.json"),v=X("./constants/dtypes.json"),A=X("./constants/usage.json"),F=[];F[5120]=1;F[5122]=2;F[5124]=4;F[5121]=1;F[5123]=2;F[5125]=4;F[5126]=4;ia.exports=function(U,t,V,m){function u(d){this.id=W++;this.buffer=U.createBuffer();this.type=d;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;V.profile&&(this.stats={size:0})}function ja(d,h,b){d.byteLength=h.byteLength;U.bufferData(d.type,h,b)}function b(d,
b,f,z,m,c){d.usage=f;if(Array.isArray(b)){if(d.dtype=z||5126,0<b.length)if(Array.isArray(b[0])){m=M(b);for(var l=z=1;l<m.length;++l)z*=m[l];d.dimension=z;b=J(b,m,d.dtype);ja(d,b,f);c?d.persistentData=b:E.freeType(b)}else"number"===typeof b[0]?(d.dimension=m,m=E.allocType(d.dtype,b.length),S(m,b),ja(d,m,f),c?d.persistentData=m:E.freeType(m)):h(b[0])?(d.dimension=b[0].length,d.dtype=z||e(b[0])||5126,b=J(b,[b.length,b[0].length],d.dtype),ja(d,b,f),c?d.persistentData=b:E.freeType(b)):g.raise("invalid buffer data")}else if(h(b))d.dtype=
z||e(b),d.dimension=m,ja(d,b,f),c&&(d.persistentData=new Uint8Array(new Uint8Array(b.buffer)));else if(p(b)){m=b.shape;var a=b.stride,l=b.offset,W=0,x=0,t=0,u=0;1===m.length?(W=m[0],x=1,t=a[0],u=0):2===m.length?(W=m[0],x=m[1],t=a[0],u=a[1]):g.raise("invalid shape");d.dtype=z||e(b.data)||5126;d.dimension=x;m=E.allocType(d.dtype,W*x);H(m,b.data,W,x,t,u,l);ja(d,m,f);c?d.persistentData=m:E.freeType(m)}else b instanceof ArrayBuffer?(d.dtype=5121,d.dimension=m,ja(d,b,f),c&&(d.persistentData=new Uint8Array(new Uint8Array(b)))):
g.raise("invalid buffer data")}function z(d){t.bufferCount--;m(d);var b=d.buffer;g(b,"buffer must not be deleted already");U.deleteBuffer(b);d.buffer=null;delete f[d.id]}var W=0,f={};u.prototype.bind=function(){U.bindBuffer(this.type,this.buffer)};u.prototype.destroy=function(){z(this)};var ba=[];V.profile&&(t.getTotalBufferSize=function(){var d=0;N(f).forEach(function(b){d+=f[b].stats.size});return d});return{create:function(d,q,m,W){function C(a){var c=35044,d=null,f=0,q=0,G=1;Array.isArray(a)||
h(a)||p(a)||a instanceof ArrayBuffer?d=a:"number"===typeof a?f=a|0:a&&(g.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(g(null===d||Array.isArray(d)||h(d)||p(d),"invalid data for buffer"),d=a.data),"usage"in a&&(g.parameter(a.usage,A,"invalid buffer usage"),c=A[a.usage]),"type"in a&&(g.parameter(a.type,v,"invalid buffer type"),q=v[a.type]),"dimension"in a&&(g.type(a.dimension,"number","invalid dimension"),G=a.dimension|0),"length"in a&&(g.nni(f,"buffer length must be a nonnegative integer"),
f=a.length|0));l.bind();d?b(l,d,c,q,G,W):(f&&U.bufferData(l.type,f,c),l.dtype=q||5121,l.usage=c,l.dimension=G,l.byteLength=f);V.profile&&(l.stats.size=l.byteLength*F[l.dtype]);return C}function c(a,c){g(c+a.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+c+" to a buffer of size "+l.byteLength);U.bufferSubData(l.type,c,a)}t.bufferCount++;var l=new u(q);f[l.id]=l;m||C(d);C._reglType="buffer";C._buffer=l;C.subdata=
function(a,d){var b=(d||0)|0,f;l.bind();if(h(a)||a instanceof ArrayBuffer)c(a,b);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var q=E.allocType(l.dtype,a.length);S(q,a);c(q,b);E.freeType(q)}else Array.isArray(a[0])||h(a[0])?(f=M(a),q=J(a,f,l.dtype),c(q,b),E.freeType(q)):g.raise("invalid buffer data")}else if(p(a)){f=a.shape;var G=a.stride,m=q=0,z=0,I=0;1===f.length?(q=f[0],m=1,z=G[0],I=0):2===f.length?(q=f[0],m=f[1],z=G[0],I=G[1]):g.raise("invalid shape");f=Array.isArray(a.data)?
l.dtype:e(a.data);f=E.allocType(f,q*m);H(f,a.data,q,m,z,I,a.offset);c(f,b);E.freeType(f)}else g.raise("invalid data for buffer subdata");return C};V.profile&&(C.stats=l.stats);C.destroy=function(){z(l)};return C},createStream:function(d,h){var f=ba.pop();f||(f=new u(d));f.bind();b(f,h,35040,0,1,!1);return f},destroyStream:function(d){ba.push(d)},clear:function(){d(f).forEach(z);ba.forEach(z)},getBuffer:function(d){return d&&d._buffer instanceof u?d._buffer:null},restore:function(){d(f).forEach(function(d){d.buffer=
U.createBuffer();U.bindBuffer(d.type,d.buffer);U.bufferData(d.type,d.persistentData||d.byteLength,d.usage)})},_initBuffer:b}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(X,ia,Fa){ia.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(X,ia,Fa){ia.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(X,ia,Fa){ia.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(X,ia,Fa){ia.exports=
{"static":35044,dynamic:35048,stream:35040}},{}],8:[function(X,ia,Fa){function e(d){return Array.isArray(d)||U(d)||v(d)}function S(d){return d.sort(function(d,b){return"viewport"===d?-1:"viewport"===b?1:d<b?-1:1})}function H(d,b,h,f){this.thisDep=d;this.contextDep=b;this.propDep=h;this.append=f}function N(d){return d&&!(d.thisDep||d.contextDep||d.propDep)}function g(d){return new H(!1,!1,!1,d)}function h(d,b){var h=d.type;if(0===h)return h=d.data.length,new H(!0,1<=h,2<=h,b);if(4===h)return h=d.data,
new H(h.thisDep,h.contextDep,h.propDep,b);if(5===h)return new H(!1,!1,!1,b);if(6===h){for(var f=h=!1,p=!1,c=0;c<d.data.length;++c){var l=d.data[c];1===l.type?p=!0:2===l.type?f=!0:3===l.type?h=!0:0===l.type?(h=!0,l=l.data,1<=l&&(f=!0),2<=l&&(p=!0)):4===l.type&&(h=h||l.data.thisDep,f=f||l.data.contextDep,p=p||l.data.propDep)}return new H(h,f,p,b)}return new H(3===h,2===h,1===h,b)}var p=X("./util/sorted-object-keys"),d=X("./util/check"),E=X("./util/extend"),J=X("./util/codegen"),M=X("./util/loop"),U=
X("./util/is-typed-array"),v=X("./util/is-ndarray"),A=X("./util/is-array-like"),F=X("./dynamic"),Z=X("./constants/primitives.json"),t=X("./constants/dtypes.json"),V=["x","y","z","w"],m="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),u={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ja="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),b={never:512,less:513,
"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},W={frag:35632,vert:35633},f={cw:2304,ccw:2305},ba=new H(!1,!1,!1,function(){});ia.exports=function(G,q,v,D,C,c,l,a,U,x,na,Cc,Y,fa,R){function I(a){return a.replace(".","_")}function y(a,c,d){var b=I(a);ta.push(a);aa[b]=la[b]=!!d;
Ka[b]=c}function k(a,c,d){var b=I(a);ta.push(a);Array.isArray(d)?(la[b]=d.slice(),aa[b]=d.slice()):la[b]=aa[b]=d;Ba[b]=c}function P(){var a=J(),c=a.link,b=a.global;a.id=zd++;a.batchId="0";var h=c(lb),k=a.shared={props:"a0"};p(lb).forEach(function(a){k[a]=b.def(h,".",a)});d.optional(function(){a.CHECK=c(d);a.commandStr=d.guessCommand();a.command=c(a.commandStr);a.assert=function(a,d,b){a("if(!(",d,"))",this.CHECK,".commandRaise(",c(b),",",this.command,");")};ea.invalidBlendCombinations=ja});var w=
a.next={},r=a.current={};p(Ba).forEach(function(a){Array.isArray(la[a])&&(w[a]=b.def(k.next,".",a),r[a]=b.def(k.current,".",a))});var n=a.constants={};p(ea).forEach(function(a){n[a]=b.def(JSON.stringify(ea[a]))});a.invoke=function(d,b){switch(b.type){case 0:var h=["this",k.context,k.props,a.batchId];return d.def(c(b.data),".call(",h.slice(0,Math.max(b.data.length+1,4)),")");case 1:return d.def(k.props,b.data);case 2:return d.def(k.context,b.data);case 3:return d.def("this",b.data);case 4:return b.data.append(a,
d),b.data.ref;case 5:return b.data.toString();case 6:return b.data.map(function(c){return a.invoke(d,c)})}};a.attribCache={};var f={};a.scopeAttrib=function(a){a=q.id(a);if(a in f)return f[a];var d=x.scope[a];d||(d=x.scope[a]=new sa);return f[a]=c(d)};return a}function Q(a){var c=a["static"];a=a.dynamic;var d;if("profile"in c){var b=!!c.profile;d=g(function(a,c){return b});d.enable=b}else if("profile"in a){var k=a.profile;d=h(k,function(a,c){return a.invoke(c,k)})}return d}function za(c,b){var k=
c["static"],w=c.dynamic;if("framebuffer"in k){var r=k.framebuffer;return r?(r=a.getFramebuffer(r),d.command(r,"invalid framebuffer object"),g(function(a,c){var d=a.link(r),b=a.shared;c.set(b.framebuffer,".next",d);b=b.context;c.set(b,".framebufferWidth",d+".width");c.set(b,".framebufferHeight",d+".height");return d})):g(function(a,c){var d=a.shared;c.set(d.framebuffer,".next","null");d=d.context;c.set(d,".framebufferWidth",d+".drawingBufferWidth");c.set(d,".framebufferHeight",d+".drawingBufferHeight");
return"null"})}if("framebuffer"in w){var n=w.framebuffer;return h(n,function(a,c){var b=a.invoke(c,n),k=a.shared,h=k.framebuffer,r=c.def(h,".getFramebuffer(",b,")");d.optional(function(){a.assert(c,"!"+b+"||"+r,"invalid framebuffer object")});c.set(h,".next",r);k=k.context;c.set(k,".framebufferWidth",r+"?"+r+".width:"+k+".drawingBufferWidth");c.set(k,".framebufferHeight",r+"?"+r+".height:"+k+".drawingBufferHeight");return r})}return null}function oa(a,c,b){function k(a){if(a in r){var n=r[a];d.commandType(n,
"object","invalid "+a,b.commandStr);var f=!0,L=n.x|0,q=n.y|0,p,B;"width"in n?(p=n.width|0,d.command(0<=p,"invalid "+a,b.commandStr)):f=!1;"height"in n?(B=n.height|0,d.command(0<=B,"invalid "+a,b.commandStr)):f=!1;return new H(!f&&c&&c.thisDep,!f&&c&&c.contextDep,!f&&c&&c.propDep,function(a,c){var d=a.shared.context,b=p;"width"in n||(b=c.def(d,".","framebufferWidth","-",L));var k=B;"height"in n||(k=c.def(d,".","framebufferHeight","-",q));return[L,q,b,k]})}if(a in w){var O=w[a],f=h(O,function(c,b){var k=
c.invoke(b,O);d.optional(function(){c.assert(b,k+"&&typeof "+k+'==="object"',"invalid "+a)});var r=c.shared.context,h=b.def(k,".x|0"),n=b.def(k,".y|0"),w=b.def('"width" in ',k,"?",k,".width|0:","(",r,".","framebufferWidth","-",h,")"),f=b.def('"height" in ',k,"?",k,".height|0:","(",r,".","framebufferHeight","-",n,")");d.optional(function(){c.assert(b,w+">=0&&"+f+">=0","invalid "+a)});return[h,n,w,f]});c&&(f.thisDep=f.thisDep||c.thisDep,f.contextDep=f.contextDep||c.contextDep,f.propDep=f.propDep||c.propDep);
return f}return c?new H(c.thisDep,c.contextDep,c.propDep,function(a,c){var d=a.shared.context;return[0,0,c.def(d,".","framebufferWidth"),c.def(d,".","framebufferHeight")]}):null}var r=a["static"],w=a.dynamic;if(a=k("viewport")){var n=a;a=new H(a.thisDep,a.contextDep,a.propDep,function(a,c){var d=n.append(a,c),b=a.shared.context;c.set(b,".viewportWidth",d[2]);c.set(b,".viewportHeight",d[3]);return d})}return{viewport:a,scissor_box:k("scissor.box")}}function w(a,c){var b=a["static"];if("string"===typeof b.frag&&
"string"===typeof b.vert){if(0<p(c.dynamic).length)return null;var b=c["static"],k=p(b);if(0<k.length&&"number"===typeof b[k[0]]){for(var r=[],h=0;h<k.length;++h)d("number"===typeof b[k[h]],"must specify all vertex attribute locations when using vaos"),r.push([b[k[h]]|0,k[h]]);return r}}return null}function K(a,c,b){function k(a){if(a in r){var c=q.id(r[a]);d.optional(function(){na.shader(W[a],c,d.guessCommand())});var b=g(function(){return c});b.id=c;return b}if(a in n){var w=n[a];return h(w,function(c,
b){var k=c.invoke(b,w),r=b.def(c.shared.strings,".id(",k,")");d.optional(function(){b(c.shared.shader,".shader(",W[a],",",r,",",c.command,");")});return r})}return null}var r=a["static"],n=a.dynamic,w=k("frag"),f=k("vert"),L=null;N(w)&&N(f)?(L=na.program(f.id,w.id,null,b),a=g(function(a,c){return a.link(L)})):a=new H(w&&w.thisDep||f&&f.thisDep,w&&w.contextDep||f&&f.contextDep,w&&w.propDep||f&&f.propDep,function(a,c){var b=a.shared.shader,k;k=w?w.append(a,c):c.def(b,".","frag");var r;r=f?f.append(a,
c):c.def(b,".","vert");var h=b+".program("+r+","+k;d.optional(function(){h+=","+a.command});return c.def(h+")")});return{frag:w,vert:f,progVar:a,program:L}}function da(a,b){function k(a,c){if(a in r){var B=r[a]|0;c?n.offset=B:n.instances=B;d.command(!c||0<=B,"invalid "+a,b.commandStr);return g(function(a,d){c&&(a.OFFSET=B);return B})}if(a in w){var O=w[a];return h(O,function(b,k){var r=b.invoke(k,O);c&&(b.OFFSET=r,d.optional(function(){b.assert(k,r+">=0","invalid "+a)}));return r})}if(c){if(q)return g(function(a,
c){return a.OFFSET=0});if(f)return new H(L.thisDep,L.contextDep,L.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(f)return new H(L.thisDep,L.contextDep,L.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var r=a["static"],w=a.dynamic,n={},f=!1,L=function(){if("vao"in r){var a=r.vao;null!==a&&null===x.getVAO(a)&&(a=x.createVAO(a));f=!0;n.vao=a;return g(function(c){var d=
x.getVAO(a);return d?c.link(d):"null"})}if("vao"in w){f=!0;var c=w.vao;return h(c,function(a,d){var b=a.invoke(d,c);return d.def(a.shared.vao+".getVAO("+b+")")})}return null}(),q=!1,B=function(){if("elements"in r){var a=r.elements;n.elements=a;if(e(a)){var k=n.elements=c.create(a,!0),a=c.getElements(k);q=!0}else a&&(a=c.getElements(a),q=!0,d.command(a,"invalid elements",b.commandStr));k=g(function(c,d){if(a){var b=c.link(a);return c.ELEMENTS=b}return c.ELEMENTS=null});k.value=a;return k}if("elements"in
w){q=!0;var B=w.elements;return h(B,function(a,c){var b=a.shared,k=b.isBufferArgs,b=b.elements,r=a.invoke(c,B),w=c.def("null"),k=c.def(k,"(",r,")"),n=a.cond(k).then(w,"=",b,".createStream(",r,");")["else"](w,"=",b,".getElements(",r,");");d.optional(function(){a.assert(n["else"],"!"+r+"||"+w,"invalid elements")});c.entry(n);c.exit(a.cond(k).then(b,".destroyStream(",w,");"));return a.ELEMENTS=w})}return f?new H(L.thisDep,L.contextDep,L.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),O=k("offset",!0),l=function(){if("primitive"in r){var a=r.primitive;n.primitive=a;d.commandParameter(a,Z,"invalid primitve",b.commandStr);return g(function(c,d){return Z[a]})}if("primitive"in w){var c=w.primitive;return h(c,function(a,b){var k=a.constants.primTypes,r=a.invoke(b,c);d.optional(function(){a.assert(b,r+" in "+k,"invalid primitive, must be one of "+p(Z))});return b.def(k,"[",r,"]")})}return q?N(B)?B.value?
g(function(a,c){return c.def(a.ELEMENTS,".primType")}):g(function(){return 4}):new H(B.thisDep,B.contextDep,B.propDep,function(a,c){var d=a.ELEMENTS;return c.def(d,"?",d,".primType:",4)}):f?new H(L.thisDep,L.contextDep,L.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),m=function(){if("count"in r){var a=r.count|0;n.count=a;d.command("number"===typeof a&&0<=a,"invalid vertex count",b.commandStr);return g(function(){return a})}if("count"in
w){var c=w.count;return h(c,function(a,b){var k=a.invoke(b,c);d.optional(function(){a.assert(b,"typeof "+k+'==="number"&&'+k+">=0&&"+k+"===("+k+"|0)","invalid vertex count")});return k})}if(q){if(N(B)){if(B)return O?new H(O.thisDep,O.contextDep,O.propDep,function(a,c){var b=c.def(a.ELEMENTS,".vertCount-",a.OFFSET);d.optional(function(){a.assert(c,b+">=0","invalid vertex offset/element buffer too small")});return b}):g(function(a,c){return c.def(a.ELEMENTS,".vertCount")});var k=g(function(){return-1});
d.optional(function(){k.MISSING=!0});return k}var p=new H(B.thisDep||O.thisDep,B.contextDep||O.contextDep,B.propDep||O.propDep,function(a,c){var d=a.ELEMENTS;return a.OFFSET?c.def(d,"?",d,".vertCount-",a.OFFSET,":-1"):c.def(d,"?",d,".vertCount:-1")});d.optional(function(){p.DYNAMIC=!0});return p}return f?new H(L.thisDep,L.contextDep,L.propDep,function(a,c){return c.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),I=k("instances",!1);return{elements:B,primitive:l,count:m,
instances:I,offset:O,vao:L,vaoActive:f,elementsActive:q,"static":n}}function T(a,c){var k=a["static"],r=a.dynamic,w={};ta.forEach(function(a){function n(c,d){if(a in k){var b=c(k[a]);w[L]=g(function(){return b})}else if(a in r){var f=r[a];w[L]=h(f,function(a,c){return d(a,c,a.invoke(c,f))})}}var L=I(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return n(function(b){d.commandType(b,
"boolean",a,c.commandStr);return b},function(c,b,k){d.optional(function(){c.assert(b,"typeof "+k+'==="boolean"',"invalid flag "+a,c.commandStr)});return k});case "depth.func":return n(function(k){d.commandParameter(k,b,"invalid "+a,c.commandStr);return b[k]},function(c,k,r){var w=c.constants.compareFuncs;d.optional(function(){c.assert(k,r+" in "+w,"invalid "+a+", must be one of "+p(b))});return k.def(w,"[",r,"]")});case "depth.range":return n(function(a){d.command(A(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",c.commandStr);return a},function(a,c,b){d.optional(function(){a.assert(c,a.shared.isArrayLike+"("+b+")&&"+b+".length===2&&typeof "+b+'[0]==="number"&&typeof '+b+'[1]==="number"&&'+b+"[0]<="+b+"[1]","depth range must be a 2d array")});var k=c.def("+",b,"[0]"),r=c.def("+",b,"[1]");return[k,r]});case "blend.func":return n(function(a){d.commandType(a,"object","blend.func",c.commandStr);var b="srcRGB"in a?a.srcRGB:a.src,k="srcAlpha"in a?a.srcAlpha:
a.src,r="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;d.commandParameter(b,u,L+".srcRGB",c.commandStr);d.commandParameter(k,u,L+".srcAlpha",c.commandStr);d.commandParameter(r,u,L+".dstRGB",c.commandStr);d.commandParameter(a,u,L+".dstAlpha",c.commandStr);d.command(-1===ja.indexOf(b+", "+r),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+r+")",c.commandStr);return[u[b],u[r],u[k],u[a]]},function(c,b,k){function r(n,h){var f=b.def('"',n,h,'" in ',k,"?",k,".",n,h,":",k,".",
n);d.optional(function(){c.assert(b,f+" in "+w,"invalid "+a+"."+n+h+", must be one of "+p(u))});return f}var w=c.constants.blendFuncs;d.optional(function(){c.assert(b,k+"&&typeof "+k+'==="object"',"invalid blend func, must be an object")});var n=r("src","RGB"),h=r("dst","RGB");d.optional(function(){c.assert(b,c.constants.invalidBlendCombinations+".indexOf("+n+'+", "+'+h+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=b.def(w,"[",n,"]"),L=b.def(w,"[",r("src","Alpha"),"]"),
B=b.def(w,"[",h,"]"),q=b.def(w,"[",r("dst","Alpha"),"]");return[f,B,L,q]});case "blend.equation":return n(function(b){if("string"===typeof b)return d.commandParameter(b,Ea,"invalid "+a,c.commandStr),[Ea[b],Ea[b]];if("object"===typeof b)return d.commandParameter(b.rgb,Ea,a+".rgb",c.commandStr),d.commandParameter(b.alpha,Ea,a+".alpha",c.commandStr),[Ea[b.rgb],Ea[b.alpha]];d.commandRaise("invalid blend.equation",c.commandStr)},function(c,b,k){var r=c.constants.blendEquations,w=b.def(),n=b.def(),h=c.cond("typeof ",
k,'==="string"');d.optional(function(){function d(a,b,k){c.assert(a,k+" in "+r,"invalid "+b+", must be one of "+p(Ea))}d(h.then,a,k);c.assert(h["else"],k+"&&typeof "+k+'==="object"',"invalid "+a);d(h["else"],a+".rgb",k+".rgb");d(h["else"],a+".alpha",k+".alpha")});h.then(w,"=",n,"=",r,"[",k,"];");h["else"](w,"=",r,"[",k,".rgb];",n,"=",r,"[",k,".alpha];");b(h);return[w,n]});case "blend.color":return n(function(a){d.command(A(a)&&4===a.length,"blend.color must be a 4d array",c.commandStr);return M(4,
function(c){return+a[c]})},function(a,c,b){d.optional(function(){a.assert(c,a.shared.isArrayLike+"("+b+")&&"+b+".length===4","blend.color must be a 4d array")});return M(4,function(a){return c.def("+",b,"[",a,"]")})});case "stencil.mask":return n(function(a){d.commandType(a,"number",L,c.commandStr);return a|0},function(a,c,b){d.optional(function(){a.assert(c,"typeof "+b+'==="number"',"invalid stencil.mask")});return c.def(b,"|0")});case "stencil.func":return n(function(k){d.commandType(k,"object",
L,c.commandStr);var r=k.cmp||"keep",w=k.ref||0;k="mask"in k?k.mask:-1;d.commandParameter(r,b,a+".cmp",c.commandStr);d.commandType(w,"number",a+".ref",c.commandStr);d.commandType(k,"number",a+".mask",c.commandStr);return[b[r],w,k]},function(a,c,b){var k=a.constants.compareFuncs;d.optional(function(){function d(){a.assert(c,Array.prototype.join.call(arguments,""),"invalid stencil.func")}d(b+"&&typeof ",b,'==="object"');d('!("cmp" in ',b,")||(",b,".cmp in ",k,")")});var r=c.def('"cmp" in ',b,"?",k,"[",
b,".cmp]",":",7680),w=c.def(b,".ref|0"),n=c.def('"mask" in ',b,"?",b,".mask|0:-1");return[r,w,n]});case "stencil.opFront":case "stencil.opBack":return n(function(b){d.commandType(b,"object",L,c.commandStr);var k=b.fail||"keep",r=b.zfail||"keep";b=b.zpass||"keep";d.commandParameter(k,z,a+".fail",c.commandStr);d.commandParameter(r,z,a+".zfail",c.commandStr);d.commandParameter(b,z,a+".zpass",c.commandStr);return["stencil.opBack"===a?1029:1028,z[k],z[r],z[b]]},function(c,b,k){function r(n){d.optional(function(){c.assert(b,
'!("'+n+'" in '+k+")||("+k+"."+n+" in "+w+")","invalid "+a+"."+n+", must be one of "+p(z))});return b.def('"',n,'" in ',k,"?",w,"[",k,".",n,"]:",7680)}var w=c.constants.stencilOps;d.optional(function(){c.assert(b,k+"&&typeof "+k+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,r("fail"),r("zfail"),r("zpass")]});case "polygonOffset.offset":return n(function(a){d.commandType(a,"object",L,c.commandStr);var b=a.factor|0;a=a.units|0;d.commandType(b,"number",L+".factor",c.commandStr);
d.commandType(a,"number",L+".units",c.commandStr);return[b,a]},function(c,b,k){d.optional(function(){c.assert(b,k+"&&typeof "+k+'==="object"',"invalid "+a)});var r=b.def(k,".factor|0"),w=b.def(k,".units|0");return[r,w]});case "cull.face":return n(function(a){var b=0;"front"===a?b=1028:"back"===a&&(b=1029);d.command(!!b,L,c.commandStr);return b},function(a,c,b){d.optional(function(){a.assert(c,b+'==="front"||'+b+'==="back"',"invalid cull.face")});return c.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return n(function(a){d.command("number"===
typeof a&&a>=D.lineWidthDims[0]&&a<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+" and "+D.lineWidthDims[1],c.commandStr);return a},function(a,c,b){d.optional(function(){a.assert(c,"typeof "+b+'==="number"&&'+b+">="+D.lineWidthDims[0]+"&&"+b+"<="+D.lineWidthDims[1],"invalid line width")});return b});case "frontFace":return n(function(a){d.commandParameter(a,f,L,c.commandStr);return f[a]},function(a,c,b){d.optional(function(){a.assert(c,b+'==="cw"||'+
b+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return c.def(b+'==="cw"?2304:2305')});case "colorMask":return n(function(a){d.command(A(a)&&4===a.length,"color.mask must be length 4 array",c.commandStr);return a.map(function(a){return!!a})},function(a,c,b){d.optional(function(){a.assert(c,a.shared.isArrayLike+"("+b+")&&"+b+".length===4","invalid color.mask")});return M(4,function(a){return"!!"+b+"["+a+"]"})});case "sample.coverage":return n(function(a){d.command("object"===typeof a&&a,
L,c.commandStr);var b="value"in a?a.value:1;a=!!a.invert;d.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",c.commandStr);return[b,a]},function(a,c,b){d.optional(function(){a.assert(c,b+"&&typeof "+b+'==="object"',"invalid sample.coverage")});var k=c.def('"value" in ',b,"?+",b,".value:1"),r=c.def("!!",b,".invert");return[k,r]})}});return w}function ma(a,c){var b=a["static"],k=a.dynamic,r={};p(b).forEach(function(a){var k=b[a],w;if("number"===typeof k||
"boolean"===typeof k)w=g(function(){return k});else if("function"===typeof k){var n=k._reglType;"texture2d"===n||"textureCube"===n?w=g(function(a){return a.link(k)}):"framebuffer"===n||"framebufferCube"===n?(d.command(0<k.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',c.commandStr),w=g(function(a){return a.link(k.color[0])})):d.commandRaise('invalid data for uniform "'+a+'"',c.commandStr)}else A(k)?w=g(function(c){return c.global.def("[",M(k.length,function(b){d.command("number"===
typeof k[b]||"boolean"===typeof k[b],"invalid uniform "+a,c.commandStr);return k[b]}),"]")}):d.commandRaise('invalid or missing data for uniform "'+a+'"',c.commandStr);w.value=k;r[a]=w});p(k).forEach(function(a){var c=k[a];r[a]=h(c,function(a,b){return a.invoke(b,c)})});return r}function ra(a,c){var b=a["static"],k=a.dynamic,r={};p(b).forEach(function(a){var k=b[a],w=q.id(a),n=new sa;if(e(k))n.state=1,n.buffer=C.getBuffer(C.create(k,34962,!1,!0)),n.type=0;else{var h=C.getBuffer(k);if(h)n.state=1,
n.buffer=h,n.type=0;else if(d.command("object"===typeof k&&k,"invalid data for attribute "+a,c.commandStr),"constant"in k){var f=k.constant;n.buffer="null";n.state=2;"number"===typeof f?n.x=f:(d.command(A(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,c.commandStr),V.forEach(function(a,c){c<f.length&&(n[a]=f[c])}))}else{h=e(k.buffer)?C.getBuffer(C.create(k.buffer,34962,!1,!0)):C.getBuffer(k.buffer);d.command(!!h,'missing buffer for attribute "'+a+'"',c.commandStr);var L=k.offset|
0;d.command(0<=L,'invalid offset for attribute "'+a+'"',c.commandStr);var B=k.stride|0;d.command(0<=B&&256>B,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var O=k.size|0;d.command(!("size"in k)||0<O&&4>=O,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var l=!!k.normalized,m=0;"type"in k&&(d.commandParameter(k.type,t,"invalid type for attribute "+a,c.commandStr),m=t[k.type]);var I=k.divisor|0;d.optional(function(){"divisor"in k&&(d.command(0===
I||qa,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),d.command(0<=I,'invalid divisor for attribute "'+a+'"',c.commandStr));var b=c.commandStr,r="buffer offset divisor normalized type size stride".split(" ");p(k).forEach(function(c){d.command(0<=r.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+r+")",b)})});n.buffer=h;n.state=1;n.size=O;n.normalized=l;n.type=m||h.dtype;n.offset=L;n.stride=B;n.divisor=I}}r[a]=g(function(a,
c){var b=a.attribCache;if(w in b)return b[w];var k={isStream:!1};p(n).forEach(function(a){k[a]=n[a]});n.buffer&&(k.buffer=a.link(n.buffer),k.type=k.type||k.buffer+".dtype");return b[w]=k})});p(k).forEach(function(a){var c=k[a];r[a]=h(c,function(b,k){function r(a){k(B[a],"=",n,".",a,"|0;")}var n=b.invoke(k,c),w=b.shared,h=b.constants,f=w.isBufferArgs,L=w.buffer;d.optional(function(){b.assert(k,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+f+"("+n+")||"+L+".getBuffer("+n+")||"+L+".getBuffer("+
n+".buffer)||"+f+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+w.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+a+'"')});var B={isStream:k.def(!1)},q=new sa;q.state=1;p(q).forEach(function(a){B[a]=k.def(""+q[a])});var O=B.buffer,l=B.type;k("if(",f,"(",n,")){",B.isStream,"=true;",O,"=",L,".createStream(",34962,",",n,");",l,"=",O,".dtype;","}else{",O,"=",L,".getBuffer(",n,");","if(",O,"){",l,"=",O,".dtype;",'}else if("constant" in ',n,"){",B.state,"=",
2,";","if(typeof "+n+'.constant === "number"){',B[V[0]],"=",n,".constant;",V.slice(1).map(function(a){return B[a]}).join("="),"=0;","}else{",V.map(function(a,c){return B[a]+"="+n+".constant.length>"+c+"?"+n+".constant["+c+"]:0;"}).join(""),"}}else{","if(",f,"(",n,".buffer)){",O,"=",L,".createStream(",34962,",",n,".buffer);","}else{",O,"=",L,".getBuffer(",n,".buffer);","}",l,'="type" in ',n,"?",h.glTypes,"[",n,".type]:",O,".dtype;",B.normalized,"=!!",n,".normalized;");r("size");r("offset");r("stride");
r("divisor");k("}}");k.exit("if(",B.isStream,"){",L,".destroyStream(",O,");","}");return B})});return r}function Ca(a){var c=a["static"],b=a.dynamic,k={};p(c).forEach(function(a){var b=c[a];k[a]=g(function(a,c){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});p(b).forEach(function(a){var c=b[a];k[a]=h(c,function(a,b){return a.invoke(b,c)})});return k}function xa(a,c,b,k,n){function r(a){var c=O[a];c&&(l[a]=c)}var h=a["static"],f=a.dynamic;d.optional(function(){function a(b){p(b).forEach(function(a){d.command(0<=
c.indexOf(a),'unknown parameter "'+a+'"',n.commandStr)})}var c="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);a(h);a(f)});var L=w(a,c),B=za(a,n),O=oa(a,B,n),q=da(a,n),l=T(a,n),m=K(a,n,L);r("viewport");r(I("scissor.box"));var z=0<p(l).length,B={framebuffer:B,draw:q,shader:m,state:l,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};B.profile=Q(a,n);B.uniforms=ma(b,n);B.drawVAO=B.scopeVAO=q.vao;if(!B.drawVAO&&m.program&&!L&&v.angle_instanced_arrays&&
q["static"].elements){var sa=!0;a=m.program.attributes.map(function(a){a=c["static"][a];sa=sa&&!!a;return a});if(sa&&0<a.length){var Ha=x.getVAO(x.createVAO({attributes:a,elements:q["static"].elements}));B.drawVAO=new H(null,null,null,function(a,c){return a.link(Ha)});B.useVAO=!0}}L?B.useVAO=!0:B.attributes=ra(c,n);B.context=Ca(k,n);return B}function ga(a,c,b){var k=a.shared.context,d=a.scope();p(b).forEach(function(n){c.save(k,"."+n);var r=b[n].append(a,c);Array.isArray(r)?d(k,".",n,"=[",r.join(),
"];"):d(k,".",n,"=",r,";")});c(d)}function Da(a,c,b,k){var d=a.shared,n=d.gl,r=d.framebuffer,w;ya&&(w=c.def(d.extensions,".webgl_draw_buffers"));var h=a.constants,d=h.drawBuffer,h=h.backBuffer;a=b?b.append(a,c):c.def(r,".next");k||c("if(",a,"!==",r,".cur){");c("if(",a,"){",n,".bindFramebuffer(",36160,",",a,".framebuffer);");ya&&c(w,".drawBuffersWEBGL(",d,"[",a,".colorAttachments.length]);");c("}else{",n,".bindFramebuffer(",36160,",null);");ya&&c(w,".drawBuffersWEBGL(",h,");");c("}",r,".cur=",a,";");
k||c("}")}function ka(a,c,b){var k=a.shared,d=k.gl,n=a.current,r=a.next,w=k.current,h=k.next,f=a.cond(w,".dirty");ta.forEach(function(c){c=I(c);if(!(c in b.state)){var k,L;if(c in r){k=r[c];L=n[c];var B=M(la[c].length,function(a){return f.def(k,"[",a,"]")});f(a.cond(B.map(function(a,c){return a+"!=="+L+"["+c+"]"}).join("||")).then(d,".",Ba[c],"(",B,");",B.map(function(a,c){return L+"["+c+"]="+a}).join(";"),";"))}else k=f.def(h,".",c),B=a.cond(k,"!==",w,".",c),f(B),c in Ka?B(a.cond(k).then(d,".enable(",
Ka[c],");")["else"](d,".disable(",Ka[c],");"),w,".",c,"=",k,";"):B(d,".",Ba[c],"(",k,");",w,".",c,"=",k,";")}});0===p(b.state).length&&f(w,".dirty=false;");c(f)}function pa(a,c,b,k){var d=a.shared,n=a.current,r=d.current,w=d.gl;S(p(b)).forEach(function(d){var h=b[d];if(!k||k(h)){var f=h.append(a,c);if(Ka[d]){var L=Ka[d];N(h)?f?c(w,".enable(",L,");"):c(w,".disable(",L,");"):c(a.cond(f).then(w,".enable(",L,");")["else"](w,".disable(",L,");"));c(r,".",d,"=",f,";")}else if(A(f)){var B=n[d];c(w,".",Ba[d],
"(",f,");",f.map(function(a,c){return B+"["+c+"]="+a}).join(";"),";")}else c(w,".",Ba[d],"(",f,");",r,".",d,"=",f,";")}})}function Aa(a,c){qa&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function Ha(a,c,b,k,d){function n(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function r(a){O=c.def();a(O,"=",n(),";");"string"===typeof d?a(L,".count+=",d,";"):a(L,".count++;");fa&&(k?(p=c.def(),a(p,"=",q,".getNumPendingQueries();")):a(q,".beginQuery(",L,");"))}
function w(a){a(L,".cpuTime+=",n(),"-",O,";");fa&&(k?a(q,".pushScopeStats(",p,",",q,".getNumPendingQueries(),",L,");"):a(q,".endQuery();"))}function h(a){var b=c.def(B,".profile");c(B,".profile=",a,";");c.exit(B,".profile=",b,";")}var f=a.shared,L=a.stats,B=f.current,q=f.timer;b=b.profile;var O,p;if(b){if(N(b)){b.enable?(r(c),w(c.exit),h("true")):h("false");return}b=b.append(a,c);h(b)}else b=c.def(B,".profile");f=a.block();r(f);c("if(",b,"){",f,"}");a=a.block();w(a);c.exit("if(",b,"){",a,"}")}function O(a,
c,b,k,n){function r(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function w(b,k,d){function n(){c("if(!",B,".buffer){",f,".enableVertexAttribArray(",L,");}");var b=d.type,r;r=d.size?c.def(d.size,"||",k):k;c("if(",B,".type!==",b,"||",B,".size!==",r,"||",p.map(function(a){return B+"."+a+"!=="+d[a]}).join("||"),"){",f,".bindBuffer(",34962,",",q,".buffer);",f,".vertexAttribPointer(",[L,r,b,
d.normalized,d.stride,d.offset],");",B,".type=",b,";",B,".size=",r,";",p.map(function(a){return B+"."+a+"="+d[a]+";"}).join(""),"}");qa&&(b=d.divisor,c("if(",B,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[L,b],");",B,".divisor=",b,";}"))}function r(){c("if(",B,".buffer){",f,".disableVertexAttribArray(",L,");",B,".buffer=null;","}if(",V.map(function(a,c){return B+"."+a+"!=="+O[c]}).join("||"),"){",f,".vertexAttrib4f(",L,",",O,");",V.map(function(a,c){return B+"."+a+"="+O[c]+";"}).join(""),
"}")}var f=h.gl,L=c.def(b,".location"),B=c.def(h.attributes,"[",L,"]");b=d.state;var q=d.buffer,O=[d.x,d.y,d.z,d.w],p=["buffer","normalized","offset","stride"];1===b?n():2===b?r():(c("if(",b,"===",1,"){"),n(),c("}else{"),r(),c("}"))}var h=a.shared;k.forEach(function(k){var f=k.name,h=b.attributes[f],L;if(h){if(!n(h))return;L=h.append(a,c)}else{if(!n(ba))return;var B=a.scopeAttrib(f);d.optional(function(){a.assert(c,B+".state","missing attribute "+f)});L={};p(new sa).forEach(function(a){L[a]=c.def(B,
".",a)})}w(a.link(k),r(k.info.type),L)})}function ac(a,c,b,k,n,r){for(var w=a.shared,f=w.gl,h,L=0;L<k.length;++L){var B=k[L],O=B.name,p=B.info.type,l=b.uniforms[O],B=a.link(B)+".location",m;if(l){if(!n(l))continue;if(N(l)){var I=l.value;d.command(null!==I&&"undefined"!==typeof I,'missing uniform "'+O+'"',a.commandStr);if(35678===p||35680===p)d.command("function"===typeof I&&(35678===p&&("texture2d"===I._reglType||"framebuffer"===I._reglType)||35680===p&&("textureCube"===I._reglType||"framebufferCube"===
I._reglType)),"invalid texture for uniform "+O,a.commandStr),l=a.link(I._texture||I.color[0]._texture),c(f,".uniform1i(",B,",",l+".bind());"),c.exit(l,".unbind();");else if(35674===p||35675===p||35676===p){d.optional(function(){d.command(A(I),"invalid matrix for uniform "+O,a.commandStr);d.command(35674===p&&4===I.length||35675===p&&9===I.length||35676===p&&16===I.length,"invalid length for matrix uniform "+O,a.commandStr)});var l=a.global.def("new Float32Array(["+Array.prototype.slice.call(I)+"])"),
sa=2;35675===p?sa=3:35676===p&&(sa=4);c(f,".uniformMatrix",sa,"fv(",B,",false,",l,");")}else{switch(p){case 5126:d.commandType(I,"number","uniform "+O,a.commandStr);h="1f";break;case 35664:d.command(A(I)&&2===I.length,"uniform "+O,a.commandStr);h="2f";break;case 35665:d.command(A(I)&&3===I.length,"uniform "+O,a.commandStr);h="3f";break;case 35666:d.command(A(I)&&4===I.length,"uniform "+O,a.commandStr);h="4f";break;case 35670:d.commandType(I,"boolean","uniform "+O,a.commandStr);h="1i";break;case 5124:d.commandType(I,
"number","uniform "+O,a.commandStr);h="1i";break;case 35671:d.command(A(I)&&2===I.length,"uniform "+O,a.commandStr);h="2i";break;case 35667:d.command(A(I)&&2===I.length,"uniform "+O,a.commandStr);h="2i";break;case 35672:d.command(A(I)&&3===I.length,"uniform "+O,a.commandStr);h="3i";break;case 35668:d.command(A(I)&&3===I.length,"uniform "+O,a.commandStr);h="3i";break;case 35673:d.command(A(I)&&4===I.length,"uniform "+O,a.commandStr);h="4i";break;case 35669:d.command(A(I)&&4===I.length,"uniform "+O,
a.commandStr),h="4i"}c(f,".uniform",h,"(",B,",",A(I)?Array.prototype.slice.call(I):I,");")}continue}else m=l.append(a,c)}else{if(!n(ba))continue;m=c.def(w.uniforms,"[",q.id(O),"]")}35678===p?(d(!Array.isArray(m),"must specify a scalar prop for textures"),c("if(",m,"&&",m,'._reglType==="framebuffer"){',m,"=",m,".color[0];","}")):35680===p&&(d(!Array.isArray(m),"must specify a scalar prop for cube maps"),c("if(",m,"&&",m,'._reglType==="framebufferCube"){',m,"=",m,".color[0];","}"));d.optional(function(){function b(k,
d){a.assert(c,k,'bad data or missing for uniform "'+O+'".  '+d)}function k(a){d(!Array.isArray(m),"must not specify an array type for uniform");b("typeof "+m+'==="'+a+'"',"invalid type, expected "+a)}function n(c,k){Array.isArray(m)?d(m.length===c,"must have length "+c):b(w.isArrayLike+"("+m+")&&"+m+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function r(c){d(!Array.isArray(m),"must not specify a value type");b("typeof "+m+'==="function"&&'+m+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(p){case 5124:k("number");break;case 35667:n(2,"number");break;case 35668:n(3,"number");break;case 35669:n(4,"number");break;case 5126:k("number");break;case 35664:n(2,"number");break;case 35665:n(3,"number");break;case 35666:n(4,"number");break;case 35670:k("boolean");break;case 35671:n(2,"boolean");break;case 35672:n(3,"boolean");break;case 35673:n(4,"boolean");break;case 35674:n(4,"number");break;case 35675:n(9,"number");break;case 35676:n(16,
"number");break;case 35678:r(3553);break;case 35680:r(34067)}});l=1;switch(p){case 35678:case 35680:l=c.def(m,"._texture");c(f,".uniform1i(",B,",",l,".bind());");c.exit(l,".unbind();");continue;case 5124:case 35670:h="1i";break;case 35667:case 35671:h="2i";l=2;break;case 35668:case 35672:h="3i";l=3;break;case 35669:case 35673:h="4i";l=4;break;case 5126:h="1f";break;case 35664:h="2f";l=2;break;case 35665:h="3f";l=3;break;case 35666:h="4f";l=4;break;case 35674:h="Matrix2fv";break;case 35675:h="Matrix3fv";
break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){c(f,".uniform",h,"(",B,",");var B=Math.pow(p-35674+2,2),z=a.global.def("new Float32Array(",B,")");Array.isArray(m)?c("false,(",M(B,function(a){return z+"["+a+"]="+m[a]}),",",z,")"):c("false,(Array.isArray(",m,")||",m," instanceof Float32Array)?",m,":(",M(B,function(a){return z+"["+a+"]="+m+"["+a+"]"}),",",z,")");c(");")}else{if(1<l){for(var sa=[],Ha=[],Ea=0;Ea<l;++Ea)Array.isArray(m)?Ha.push(m[Ea]):Ha.push(c.def(m+"["+Ea+"]")),r&&sa.push(c.def());
r&&c("if(!",a.batchId,"||",sa.map(function(a,c){return a+"!=="+Ha[c]}).join("||"),"){",sa.map(function(a,c){return a+"="+Ha[c]+";"}).join(""));c(f,".uniform",h,"(",B,",",Ha.join(","),");")}else d(!Array.isArray(m),"uniform value must not be an array"),r&&(l=c.def(),c("if(!",a.batchId,"||",l,"!==",m,"){",l,"=",m,";")),c(f,".uniform",h,"(",B,",",m,");");r&&c("}")}}}function Ua(a,c,b,k){function n(d){var r=B[d];return r?r.contextDep&&k.contextDynamic||r.propDep?r.append(a,b):r.append(a,c):c.def(L,".",
d)}function r(){function a(){b(I,".drawElementsInstancedANGLE(",[q,m,sa,p+"<<(("+sa+"-5121)>>1)",l],");")}function c(){b(I,".drawArraysInstancedANGLE(",[q,p,m,l],");")}O&&"null"!==O?z?a():(b("if(",O,"){"),a(),b("}else{"),c(),b("}")):c()}function w(){function a(){b(f+".drawElements("+[q,m,sa,p+"<<(("+sa+"-5121)>>1)"]+");")}function c(){b(f+".drawArrays("+[q,p,m]+");")}O&&"null"!==O?z?a():(b("if(",O,"){"),a(),b("}else{"),c(),b("}")):c()}var h=a.shared,f=h.gl,L=h.draw,B=k.draw,O=function(){var d=B.elements,
n=c;if(d){if(d.contextDep&&k.contextDynamic||d.propDep)n=b;d=d.append(a,n);B.elementsActive&&n("if("+d+")"+f+".bindBuffer(34963,"+d+".buffer.buffer);")}else d=n.def(),n(d,"=",L,".","elements",";","if(",d,"){",f,".bindBuffer(",34963,",",d,".buffer.buffer);}","else if(",h.vao,".currentVAO){",d,"=",a.shared.elements+".getElements("+h.vao,".currentVAO.elements);",Ia?"":"if("+d+")"+f+".bindBuffer(34963,"+d+".buffer.buffer);","}");return d}(),q=n("primitive"),p=n("offset"),m=function(){var n=B.count,r,
w=c;if(n){if(n.contextDep&&k.contextDynamic||n.propDep)w=b;r=n.append(a,w);d.optional(function(){n.MISSING&&a.assert(c,"false","missing vertex count");n.DYNAMIC&&a.assert(w,r+">=0","missing vertex count")})}else r=w.def(L,".","count"),d.optional(function(){a.assert(w,r+">=0","missing vertex count")});return r}();if("number"===typeof m){if(0===m)return}else b("if(",m,"){"),b.exit("}");var l,I;qa&&(l=n("instances"),I=a.instancing);var sa=O+".type",z=B.elements&&N(B.elements)&&!B.vaoActive;qa&&("number"!==
typeof l||0<=l)?"string"===typeof l?(b("if(",l,">0){"),r(),b("}else if(",l,"<0){"),w(),b("}")):r():w()}function r(a,c,b,k,n){var r=P();n=r.proc("body",n);d.optional(function(){r.commandStr=c.commandStr;r.command=r.link(c.commandStr)});qa&&(r.instancing=n.def(r.shared.extensions,".angle_instanced_arrays"));a(r,n,b,k);return r.compile().body}function n(a,c,b,k){Aa(a,c);b.useVAO?b.drawVAO?c(a.shared.vao,".setVAO(",b.drawVAO.append(a,c),");"):c(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(c(a.shared.vao,
".setVAO(null);"),O(a,c,b,k.attributes,function(){return!0}));ac(a,c,b,k.uniforms,function(){return!0},!1);Ua(a,c,c,b)}function B(a,c){var b=a.proc("draw",1);Aa(a,b);ga(a,b,c.context);Da(a,b,c.framebuffer);ka(a,b,c);pa(a,b,c.state);Ha(a,b,c,!1,!0);var k=c.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",k,".program);");if(c.shader.program)n(a,b,c,c.shader.program);else{b(a.shared.vao,".setVAO(null);");var d=a.global.def("{}"),w=b.def(k,".id"),h=b.def(d,"[",w,"]");b(a.cond(h).then(h,".call(this,a0);")["else"](h,
"=",d,"[",w,"]=",a.link(function(b){return r(n,a,c,b,1)}),"(",k,");",h,".call(this,a0);"))}0<p(c.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function ua(a,c,b,k){function d(){return!0}a.batchId="a1";Aa(a,c);O(a,c,b,k.attributes,d);ac(a,c,b,k.uniforms,d,!1);Ua(a,c,c,b)}function va(a,c,b,k){function d(a){return a.contextDep&&w||a.propDep}function n(a){return!d(a)}Aa(a,c);var w=b.contextDep,h=c.def(),f=c.def();a.shared.props=f;a.batchId=h;var L=a.scope(),
B=a.scope();c(L.entry,"for(",h,"=0;",h,"<","a1",";++",h,"){",f,"=","a0","[",h,"];",B,"}",L.exit);b.needsContext&&ga(a,B,b.context);b.needsFramebuffer&&Da(a,B,b.framebuffer);pa(a,B,b.state,d);b.profile&&d(b.profile)&&Ha(a,B,b,!1,!0);k?(b.useVAO?b.drawVAO?d(b.drawVAO)?B(a.shared.vao,".setVAO(",b.drawVAO.append(a,B),");"):L(a.shared.vao,".setVAO(",b.drawVAO.append(a,L),");"):L(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(L(a.shared.vao,".setVAO(null);"),O(a,L,b,k.attributes,n),O(a,B,b,k.attributes,
d)),ac(a,L,b,k.uniforms,n,!1),ac(a,B,b,k.uniforms,d,!0),Ua(a,L,B,b)):(c=a.global.def("{}"),k=b.shader.progVar.append(a,B),f=B.def(k,".id"),L=B.def(c,"[",f,"]"),B(a.shared.gl,".useProgram(",k,".program);","if(!",L,"){",L,"=",c,"[",f,"]=",a.link(function(c){return r(ua,a,b,c,2)}),"(",k,");}",L,".call(this,a0[",h,"],",h,");"))}function td(a,c){function b(a){return a.contextDep&&d||a.propDep}var k=a.proc("batch",2);a.batchId="0";Aa(a,k);var d=!1,n=!0;p(c.context).forEach(function(a){d=d||c.context[a].propDep});
d||(ga(a,k,c.context),n=!1);var w=c.framebuffer,h=!1;w?(w.propDep?d=h=!0:w.contextDep&&d&&(h=!0),h||Da(a,k,w)):Da(a,k,null);c.state.viewport&&c.state.viewport.propDep&&(d=!0);ka(a,k,c);pa(a,k,c.state,function(a){return!b(a)});c.profile&&b(c.profile)||Ha(a,k,c,!1,"a1");c.contextDep=d;c.needsContext=n;c.needsFramebuffer=h;n=c.shader.progVar;if(n.contextDep&&d||n.propDep)va(a,k,c,null);else if(n=n.append(a,k),k(a.shared.gl,".useProgram(",n,".program);"),c.shader.program)va(a,k,c,c.shader.program);else{k(a.shared.vao,
".setVAO(null);");var w=a.global.def("{}"),h=k.def(n,".id"),f=k.def(w,"[",h,"]");k(a.cond(f).then(f,".call(this,a0,a1);")["else"](f,"=",w,"[",h,"]=",a.link(function(b){return r(va,a,c,b,2)}),"(",n,");",f,".call(this,a0,a1);"))}0<p(c.state).length&&k(a.shared.current,".dirty=true;");a.shared.vao&&k(a.shared.vao,".setVAO(null);")}function Gb(a,c){function b(n){var r=c.shader[n];r&&k.set(d.shader,"."+n,r.append(a,k))}var k=a.proc("scope",3);a.batchId="a2";var d=a.shared,n=d.current;ga(a,k,c.context);
c.framebuffer&&c.framebuffer.append(a,k);S(p(c.state)).forEach(function(b){var n=c.state[b].append(a,k);A(n)?n.forEach(function(c,d){k.set(a.next[b],"["+d+"]",c)}):k.set(d.next,"."+b,n)});Ha(a,k,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var n=c.draw[b];n&&k.set(d.draw,"."+b,""+n.append(a,k))});p(c.uniforms).forEach(function(b){var n=c.uniforms[b].append(a,k);Array.isArray(n)&&(n="["+n.join()+"]");k.set(d.uniforms,"["+q.id(b)+"]",n)});p(c.attributes).forEach(function(b){var d=
c.attributes[b].append(a,k),n=a.scopeAttrib(b);p(new sa).forEach(function(a){k.set(n,"."+a,d[a])})});c.scopeVAO&&k.set(d.vao,".targetVAO",c.scopeVAO.append(a,k));b("vert");b("frag");0<p(c.state).length&&(k(n,".dirty=true;"),k.exit(n,".dirty=true;"));k("a1(",a.shared.context,",a0,",a.batchId,");")}function ha(a){if("object"===typeof a&&!A(a)){for(var c=p(a),b=0;b<c.length;++b)if(F.isDynamic(a[c[b]]))return!0;return!1}}function L(a,c,b){function k(a,c){r.forEach(function(b){var k=d[b];F.isDynamic(k)&&
(k=a.invoke(c,k),c(B,".",b,"=",k,";"))})}var d=c["static"][b];if(d&&ha(d)){var n=a.global,r=p(d),w=!1,f=!1,L=!1,B=a.global.def("{}");r.forEach(function(c){var b=d[c];if(F.isDynamic(b))"function"===typeof b&&(b=d[c]=F.unbox(b)),c=h(b,null),w=w||c.thisDep,L=L||c.propDep,f=f||c.contextDep;else{n(B,".",c,"=");switch(typeof b){case "number":n(b);break;case "string":n('"',b,'"');break;case "object":Array.isArray(b)&&n("[",b.join(),"]");break;default:n(a.link(b))}n(";")}});c.dynamic[b]=new F.DynamicVariable(4,
{thisDep:w,contextDep:f,propDep:L,ref:B,append:k});delete c["static"][b]}}var sa=x.Record,Ea={add:32774,subtract:32778,"reverse subtract":32779};v.ext_blend_minmax&&(Ea.min=32775,Ea.max=32776);var qa=v.angle_instanced_arrays,ya=v.webgl_draw_buffers,Ia=v.oes_vertex_array_object,la={dirty:!0,profile:R.profile},aa={},ta=[],Ka={},Ba={};y("dither",3024);y("blend.enable",3042);k("blend.color","blendColor",[0,0,0,0]);k("blend.equation","blendEquationSeparate",[32774,32774]);k("blend.func","blendFuncSeparate",
[1,0,1,0]);y("depth.enable",2929,!0);k("depth.func","depthFunc",513);k("depth.range","depthRange",[0,1]);k("depth.mask","depthMask",!0);k("colorMask","colorMask",[!0,!0,!0,!0]);y("cull.enable",2884);k("cull.face","cullFace",1029);k("frontFace","frontFace",2305);k("lineWidth","lineWidth",1);y("polygonOffset.enable",32823);k("polygonOffset.offset","polygonOffset",[0,0]);y("sample.alpha",32926);y("sample.enable",32928);k("sample.coverage","sampleCoverage",[1,!1]);y("stencil.enable",2960);k("stencil.mask",
"stencilMask",-1);k("stencil.func","stencilFunc",[519,0,-1]);k("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);k("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);y("scissor.enable",3089);k("scissor.box","scissor",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);k("viewport","viewport",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);var lb={gl:G,context:Y,strings:q,next:aa,current:la,draw:Cc,elements:c,buffer:C,shader:na,attributes:x.state,vao:x,uniforms:U,framebuffer:a,
extensions:v,timer:fa,isBufferArgs:e},ea={primTypes:Z,compareFuncs:b,blendFuncs:u,blendEquations:Ea,stencilOps:z,glTypes:t,orientationType:f};d.optional(function(){lb.isArrayLike=A});ya&&(ea.backBuffer=[1029],ea.drawBuffer=M(D.maxDrawbuffers,function(a){return 0===a?[0]:M(a,function(a){return 36064+a})}));var zd=0;return{next:aa,current:la,procs:function(){var a=P(),c=a.proc("poll"),b=a.proc("refresh"),k=a.block();c(k);b(k);var d=a.shared,n=d.gl,r=d.next,w=d.current;k(w,".dirty=false;");Da(a,c);Da(a,
b,null,!0);var h;qa&&(h=a.link(qa));v.oes_vertex_array_object&&b(a.link(v.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<D.maxAttributes;++f){var L=b.def(d.attributes,"[",f,"]"),B=a.cond(L,".buffer");B.then(n,".enableVertexAttribArray(",f,");",n,".bindBuffer(",34962,",",L,".buffer.buffer);",n,".vertexAttribPointer(",f,",",L,".size,",L,".type,",L,".normalized,",L,".stride,",L,".offset);")["else"](n,".disableVertexAttribArray(",f,");",n,".vertexAttrib4f(",f,",",L,".x,",L,".y,",
L,".z,",L,".w);",L,".buffer=null;");b(B);qa&&b(h,".vertexAttribDivisorANGLE(",f,",",L,".divisor);")}b(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");p(Ka).forEach(function(d){var h=Ka[d],f=k.def(r,".",d),L=a.block();L("if(",f,"){",n,".enable(",h,")}else{",n,".disable(",h,")}",w,".",d,"=",f,";");b(L);c("if(",f,"!==",w,".",d,"){",L,"}")});p(Ba).forEach(function(d){var h=Ba[d],f=la[d],L,B,O=a.block();O(n,".",h,"(");A(f)?(h=f.length,L=a.global.def(r,".",d),B=a.global.def(w,
".",d),O(M(h,function(a){return L+"["+a+"]"}),");",M(h,function(a){return B+"["+a+"]="+L+"["+a+"];"}).join("")),c("if(",M(h,function(a){return L+"["+a+"]!=="+B+"["+a+"]"}).join("||"),"){",O,"}")):(L=k.def(r,".",d),B=k.def(w,".",d),O(L,");",w,".",d,"=",L,";"),c("if(",L,"!==",B,"){",O,"}"));b(O)});return a.compile()}(),compile:function(a,c,b,k,d){var n=P();n.stats=n.link(d);p(c["static"]).forEach(function(a){L(n,c,a)});m.forEach(function(c){L(n,a,c)});var r=xa(a,c,b,k,n);B(n,r);Gb(n,r);td(n,r);return E(n.compile(),
{destroy:function(){r.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(X,ia,Fa){function e(p,d){this.id=h++;this.type=p;this.data=d}function S(h){if(0===h.length)return[];var d=h.charAt(0),g=h.charAt(h.length-1);if(1<h.length&&d===g&&('"'===d||"'"===
d))return['"'+h.substr(1,h.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(d=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(h))return S(h.substr(0,d.index)).concat(S(d[1])).concat(S(h.substr(d.index+d[0].length)));d=h.split(".");if(1===d.length)return['"'+h.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];h=[];for(g=0;g<d.length;++g)h=h.concat(S(d[g]));return h}function H(h){return"["+S(h).join("][")+"]"}function N(h,d){if("function"===typeof h)return new e(0,h);if("number"===typeof h||
"boolean"===typeof h)return new e(5,h);if(Array.isArray(h))return new e(6,h.map(function(h,p){return N(h,d+"["+p+"]")}));if(h instanceof e)return h;g(!1,"invalid option type in uniform "+d)}var g=X("./util/check"),h=0;ia.exports={DynamicVariable:e,define:function(h,d){return new e(h,H(d+""))},isDynamic:function(h){return"function"===typeof h&&!h._reglType||h instanceof e},unbox:N,accessor:H}},{"./util/check":21}],10:[function(X,ia,Fa){var e=X("./util/check"),S=X("./util/is-typed-array"),H=X("./util/is-ndarray"),
N=X("./util/values"),g=X("./constants/primitives.json"),h=X("./constants/usage.json");ia.exports=function(p,d,E,J){function M(d){this.id=F++;A[this.id]=this;this.buffer=d;this.primType=4;this.type=this.vertCount=0}function U(h,m,g,t,b,z,W){h.buffer.bind();var f;m?((f=W)||S(m)&&(!H(m)||S(m.data))||(f=d.oes_element_index_uint?5125:5123),E._initBuffer(h.buffer,m,g,f,3)):(p.bufferData(34963,z,g),h.buffer.dtype=f||5121,h.buffer.usage=g,h.buffer.dimension=3,h.buffer.byteLength=z);f=W;if(!W){switch(h.buffer.dtype){case 5121:case 5120:f=
5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125;break;default:e.raise("unsupported type for element array")}h.buffer.dtype=f}h.type=f;e(5125!==f||!!d.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");m=b;0>m&&(m=h.buffer.byteLength,5123===f?m>>=1:5125===f&&(m>>=2));h.vertCount=m;m=t;0>t&&(m=4,t=h.buffer.dimension,1===t&&(m=0),2===t&&(m=1),3===t&&(m=4));h.primType=m}function v(d){J.elementsCount--;e(null!==d.buffer,"must not double destroy elements");
delete A[d.id];d.buffer.destroy();d.buffer=null}var A={},F=0,Z={uint8:5121,uint16:5123};d.oes_element_index_uint&&(Z.uint32=5125);M.prototype.bind=function(){this.buffer.bind()};var t=[];return{create:function(d,m){function p(d){if(d)if("number"===typeof d)t(d),b.primType=4,b.vertCount=d|0,b.type=5121;else{var m=null,f=35044,A=-1,G=-1,q=0,v=0;if(Array.isArray(d)||S(d)||H(d))m=d;else if(e.type(d,"object","invalid arguments for elements"),"data"in d&&(m=d.data,e(Array.isArray(m)||S(m)||H(m),"invalid data for element buffer")),
"usage"in d&&(e.parameter(d.usage,h,"invalid element buffer usage"),f=h[d.usage]),"primitive"in d&&(e.parameter(d.primitive,g,"invalid element buffer primitive"),A=g[d.primitive]),"count"in d&&(e("number"===typeof d.count&&0<=d.count,"invalid vertex count for elements"),G=d.count|0),"type"in d&&(e.parameter(d.type,Z,"invalid buffer type"),v=Z[d.type]),"length"in d)q=d.length|0;else if(q=G,5123===v||5122===v)q*=2;else if(5125===v||5124===v)q*=4;U(b,m,f,A,G,q,v)}else t(),b.primType=4,b.vertCount=0,
b.type=5121;return p}var t=E.create(null,34963,!0),b=new M(t._buffer);J.elementsCount++;p(d);p._reglType="elements";p._elements=b;p.subdata=function(b,d){t.subdata(b,d);return p};p.destroy=function(){v(b)};return p},createStream:function(d){var h=t.pop();h||(h=new M(E.create(null,34963,!0,!1)._buffer));U(h,d,35040,-1,-1,0,0);return h},destroyStream:function(d){t.push(d)},getElements:function(d){return"function"===typeof d&&d._elements instanceof M?d._elements:null},clear:function(){N(A).forEach(v)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(X,ia,Fa){var e=X("./util/sorted-object-keys"),S=X("./util/check");ia.exports=function(H,N){function g(d){S.type(d,"string","extension name must be string");d=d.toLowerCase();var p;try{p=h[d]=H.getExtension(d)}catch(g){}return!!p}for(var h={},p=0;p<N.extensions.length;++p){var d=N.extensions[p];if(!g(d))return N.onDestroy(),N.onDone('"'+d+
'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}N.optionalExtensions.forEach(g);return{extensions:h,restore:function(){e(h).forEach(function(d){if(h[d]&&!g(d))throw Error("(regl): error restoring extension "+d);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(X,ia,Fa){var e=X("./util/check"),S=X("./util/values"),H=X("./util/extend"),N=[6407,6408],g=[];g[6408]=4;g[6407]=3;var h=[];h[5121]=1;h[5126]=4;h[36193]=
2;var p=[32854,32855,36194,35907,34842,34843,34836],d={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ia.exports=function(E,J,M,U,v,A){function F(a,c,b){this.target=a;this.texture=c;this.renderbuffer=b;var d=a=0;c?(a=c.width,d=c.height):b&&(a=b.width,d=b.height);this.width=a;this.height=d}function Z(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function t(a,
c,b){if(a){if(a.texture){a=a.texture._texture;var d=Math.max(1,a.height);e(Math.max(1,a.width)===c&&d===b,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,e(a.width===c&&a.height===b,"inconsistent width/height for renderbuffer");a.refCount+=1}}function V(a,c){c&&(c.texture?E.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):E.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function m(a){var c=3553,b=null,d=null,
h=a;"object"===typeof a&&(h=a.data,"target"in a&&(c=a.target|0));e.type(h,"function","invalid attachment data");a=h._reglType;"texture2d"===a?(b=h,e(3553===c)):"textureCube"===a?(b=h,e(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===a?(d=h,c=36161):e.raise("invalid regl object for attachment");return new F(c,b,d)}function u(a,c,b,d,h){if(b)return a=U.create2D({width:a,height:c,format:d,type:h}),a._texture.refCount=0,new F(3553,a,null);a=v.create({width:a,height:c,format:d});a._renderbuffer.refCount=
0;return new F(36161,null,a)}function ja(a){return a&&(a.texture||a.renderbuffer)}function b(a,c,b){a&&(a.texture?a.texture.resize(c,b):a.renderbuffer&&a.renderbuffer.resize(c,b),a.width=c,a.height=b)}function z(){this.id=c++;l[this.id]=this;this.framebuffer=E.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function W(a){a.colorAttachments.forEach(Z);Z(a.depthAttachment);Z(a.stencilAttachment);Z(a.depthStencilAttachment)}
function f(a){var c=a.framebuffer;e(c,"must not double destroy framebuffer");E.deleteFramebuffer(c);a.framebuffer=null;A.framebufferCount--;delete l[a.id]}function ba(a){var c;E.bindFramebuffer(36160,a.framebuffer);var b=a.colorAttachments;for(c=0;c<b.length;++c)V(36064+c,b[c]);for(c=b.length;c<M.maxColorAttachments;++c)E.framebufferTexture2D(36160,36064+c,3553,null,0);E.framebufferTexture2D(36160,33306,3553,null,0);E.framebufferTexture2D(36160,36096,3553,null,0);E.framebufferTexture2D(36160,36128,
3553,null,0);V(36096,a.depthAttachment);V(36128,a.stencilAttachment);V(33306,a.depthStencilAttachment);a=E.checkFramebufferStatus(36160);E.isContextLost()||36053===a||e.raise("framebuffer configuration not supported, status = "+d[a]);E.bindFramebuffer(36160,q.next?q.next.framebuffer:null);q.cur=q.next;E.getError()}function G(a,c){function d(a,c){var b;e(q.next!==l,"can not update framebuffer which is currently in use");var f=0,I=0,y=!0,k=!0;b=null;var G=!0,z="rgba",v="uint8",A=1,w=null,K=null,da=
null,T=!1;if("number"===typeof a)f=a|0,I=c|0||f;else if(a){e.type(a,"object","invalid arguments for framebuffer");"shape"in a?(I=a.shape,e(Array.isArray(I)&&2<=I.length,"invalid shape for framebuffer"),f=I[0],I=I[1]):("radius"in a&&(f=I=a.radius),"width"in a&&(f=a.width),"height"in a&&(I=a.height));if("color"in a||"colors"in a)b=a.color||a.colors,Array.isArray(b)&&e(1===b.length||J.webgl_draw_buffers,"multiple render targets not supported");if(!b){"colorCount"in a&&(A=a.colorCount|0,e(0<A,"invalid color buffer count"));
"colorTexture"in a&&(G=!!a.colorTexture,z="rgba4");if("colorType"in a){v=a.colorType;if(G)e(J.oes_texture_float||!("float"===v||"float32"===v),"you must enable OES_texture_float in order to use floating point framebuffer objects"),e(J.oes_texture_half_float||!("half float"===v||"float16"===v),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===v||"float16"===v)e(J.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
z="rgba16f";else if("float"===v||"float32"===v)e(J.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),z="rgba32f";e.oneOf(v,C,"invalid color type")}"colorFormat"in a&&(z=a.colorFormat,0<=ca.indexOf(z)?G=!0:0<=D.indexOf(z)?G=!1:e.optional(function(){if(G)e.oneOf(a.colorFormat,ca,"invalid color format for texture");else e.oneOf(a.colorFormat,D,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in
a)T=!(!a.depthTexture&&!a.depthStencilTexture),e(!T||J.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?y=a.depth:(w=a.depth,k=!1));"stencil"in a&&("boolean"===typeof a.stencil?k=a.stencil:(K=a.stencil,y=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?y=k=a.depthStencil:(da=a.depthStencil,k=y=!1))}else f=I=1;var F=null,U=null,S=null,H=null;if(Array.isArray(b))F=b.map(m);else if(b)F=[m(b)];else for(F=Array(A),b=0;b<A;++b)F[b]=u(f,
I,G,z,v);e(J.webgl_draw_buffers||1>=F.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");e(F.length<=M.maxColorAttachments,"too many color attachments, not supported");f=f||F[0].width;I=I||F[0].height;w?U=m(w):y&&!k&&(U=u(f,I,T,"depth","uint32"));K?S=m(K):k&&!y&&(S=u(f,I,!1,"stencil","uint8"));da?H=m(da):!w&&!K&&k&&y&&(H=u(f,I,T,"depth stencil","depth stencil"));e(1>=!!w+!!K+!!da,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
y=null;for(b=0;b<F.length;++b)t(F[b],f,I),e(!F[b]||F[b].texture&&0<=N.indexOf(F[b].texture._texture.format)||F[b].renderbuffer&&0<=p.indexOf(F[b].renderbuffer._renderbuffer.format),"framebuffer color attachment "+b+" is invalid"),F[b]&&F[b].texture&&(k=g[F[b].texture._texture.format]*h[F[b].texture._texture.type],null===y?y=k:e(y===k,"all color attachments much have the same number of bits per pixel."));t(U,f,I);e(!U||U.texture&&6402===U.texture._texture.format||U.renderbuffer&&33189===U.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");t(S,f,I);e(!S||S.renderbuffer&&36168===S.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");t(H,f,I);e(!H||H.texture&&34041===H.texture._texture.format||H.renderbuffer&&34041===H.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");W(l);l.width=f;l.height=I;l.colorAttachments=F;l.depthAttachment=U;l.stencilAttachment=S;l.depthStencilAttachment=H;d.color=F.map(ja);d.depth=
ja(U);d.stencil=ja(S);d.depthStencil=ja(H);d.width=l.width;d.height=l.height;ba(l);return d}var l=new z;A.framebufferCount++;d(a,c);return H(d,{resize:function(a,c){e(q.next!==l,"can not resize a framebuffer which is currently in use");var h=Math.max(a|0,1),f=Math.max(c|0||h,1);if(h===l.width&&f===l.height)return d;for(var m=l.colorAttachments,p=0;p<m.length;++p)b(m[p],h,f);b(l.depthAttachment,h,f);b(l.stencilAttachment,h,f);b(l.depthStencilAttachment,h,f);l.width=d.width=h;l.height=d.height=f;ba(l);
return d},_reglType:"framebuffer",_framebuffer:l,destroy:function(){f(l);W(l)},use:function(a){q.setFBO({framebuffer:d},a)}})}var q={cur:null,next:null,dirty:!1,setFBO:null},ca=["rgba"],D=["rgba4","rgb565","rgb5 a1"];J.ext_srgb&&D.push("srgba");J.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");J.webgl_color_buffer_float&&D.push("rgba32f");var C=["uint8"];J.oes_texture_half_float&&C.push("half float","float16");J.oes_texture_float&&C.push("float","float32");var c=0,l={};return H(q,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof z)?a:null},create:G,createCube:function(a){function c(a){var d;e(0>b.indexOf(q.next),"can not update framebuffer which is currently in use");var h={color:null},f=0,l=null;d="rgba";var m="uint8",p=1;if("number"===typeof a)f=a|0;else if(a){e.type(a,"object","invalid arguments for framebuffer");"shape"in a?(f=a.shape,e(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),e(f[0]===f[1],"cube framebuffer must be square"),f=
f[0]):("radius"in a&&(f=a.radius|0),"width"in a?(f=a.width|0,"height"in a&&e(a.height===f,"must be square")):"height"in a&&(f=a.height|0));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&e(1===l.length||J.webgl_draw_buffers,"multiple render targets not supported");l||("colorCount"in a&&(p=a.colorCount|0,e(0<p,"invalid color buffer count")),"colorType"in a&&(e.oneOf(a.colorType,C,"invalid color type"),m=a.colorType),"colorFormat"in a&&(d=a.colorFormat,e.oneOf(a.colorFormat,ca,"invalid color format for texture")));
"depth"in a&&(h.depth=a.depth);"stencil"in a&&(h.stencil=a.stencil);"depthStencil"in a&&(h.depthStencil=a.depthStencil)}else f=1;if(l)if(Array.isArray(l))for(a=[],d=0;d<l.length;++d)a[d]=l[d];else a=[l];else for(a=Array(p),l={radius:f,format:d,type:m},d=0;d<p;++d)a[d]=U.createCube(l);h.color=Array(a.length);for(d=0;d<a.length;++d)p=a[d],e("function"===typeof p&&"textureCube"===p._reglType,"invalid cube map"),f=f||p.width,e(p.width===f&&p.height===f,"invalid cube map shape"),h.color[d]={target:34069,
data:a[d]};for(d=0;6>d;++d){for(p=0;p<a.length;++p)h.color[p].target=34069+d;0<d&&(h.depth=b[0].depth,h.stencil=b[0].stencil,h.depthStencil=b[0].depthStencil);if(b[d])b[d](h);else b[d]=G(h)}return H(c,{width:f,height:f,color:a})}var b=Array(6);c(a);return H(c,{faces:b,resize:function(a){var d=a|0;e(0<d&&d<=M.maxCubeMapSize,"invalid radius for cube fbo");if(d===c.width)return c;var h=c.color;for(a=0;a<h.length;++a)h[a].resize(d);for(a=0;6>a;++a)b[a].resize(d);c.width=c.height=d;return c},_reglType:"framebufferCube",
destroy:function(){b.forEach(function(a){a.destroy()})}})},clear:function(){S(l).forEach(f)},restore:function(){q.cur=null;q.next=null;q.dirty=!0;S(l).forEach(function(a){a.framebuffer=E.createFramebuffer();ba(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(X,ia,Fa){var e=X("./util/sorted-object-keys"),S=X("./util/pool");ia.exports=function(H,N){var g=1;N.ext_texture_filter_anisotropic&&(g=H.getParameter(34047));var h=1,p=1;N.webgl_draw_buffers&&(h=H.getParameter(34852),
p=H.getParameter(36063));var d=!!N.oes_texture_float;if(d){d=H.createTexture();H.bindTexture(3553,d);H.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var E=H.createFramebuffer();H.bindFramebuffer(36160,E);H.framebufferTexture2D(36160,36064,3553,d,0);H.bindTexture(3553,null);if(36053!==H.checkFramebufferStatus(36160))d=!1;else{H.viewport(0,0,1,1);H.clearColor(1,0,0,1);H.clear(16384);var J=S.allocType(5126,4);H.readPixels(0,0,1,1,6408,5126,J);H.getError()?d=!1:(H.deleteFramebuffer(E),H.deleteTexture(d),
d=1===J[0]);S.freeType(J)}}J=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(J=H.createTexture(),E=S.allocType(5121,36),H.activeTexture(33984),H.bindTexture(34067,J),H.texImage2D(34069,0,6408,3,3,0,6408,5121,E),S.freeType(E),H.bindTexture(34067,null),H.deleteTexture(J),J=!H.getError());return{colorBits:[H.getParameter(3410),H.getParameter(3411),H.getParameter(3412),H.getParameter(3413)],depthBits:H.getParameter(3414),
stencilBits:H.getParameter(3415),subpixelBits:H.getParameter(3408),extensions:e(N).filter(function(d){return!!N[d]}),maxAnisotropic:g,maxDrawbuffers:h,maxColorAttachments:p,pointSizeDims:H.getParameter(33901),lineWidthDims:H.getParameter(33902),maxViewportDims:H.getParameter(3386),maxCombinedTextureUnits:H.getParameter(35661),maxCubeMapSize:H.getParameter(34076),maxRenderbufferSize:H.getParameter(34024),maxTextureUnits:H.getParameter(34930),maxTextureSize:H.getParameter(3379),maxAttributes:H.getParameter(34921),
maxVertexUniforms:H.getParameter(36347),maxVertexTextureUnits:H.getParameter(35660),maxVaryingVectors:H.getParameter(36348),maxFragmentUniforms:H.getParameter(36349),glsl:H.getParameter(35724),renderer:H.getParameter(7937),vendor:H.getParameter(7936),version:H.getParameter(7938),readFloat:d,npotTextureCube:J}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(X,ia,Fa){var e=X("./util/check"),S=X("./util/is-typed-array");ia.exports=function(H,N,g,h,p,d,E){function J(U){var v;null===
N.next?(e(p.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),v=5121):(e(null!==N.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),v=N.next.colorAttachments[0].texture._texture.type,e.optional(function(){d.oes_texture_float?(e(5121===v||5126===v,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===v&&e(E.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
e(5121===v,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var A=0,F=0,J=h.framebufferWidth,t=h.framebufferHeight,M=null;S(U)?M=U:U&&(e.type(U,"object","invalid arguments to regl.read()"),A=U.x|0,F=U.y|0,e(0<=A&&A<h.framebufferWidth,"invalid x offset for regl.read"),e(0<=F&&F<h.framebufferHeight,"invalid y offset for regl.read"),J=(U.width||h.framebufferWidth-A)|0,t=(U.height||h.framebufferHeight-F)|0,M=U.data||null);M&&(5121===v?e(M instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===v&&e(M instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));e(0<J&&J+A<=h.framebufferWidth,"invalid width for read pixels");e(0<t&&t+F<=h.framebufferHeight,"invalid height for read pixels");g();U=J*t*4;M||(5121===v?M=new Uint8Array(U):5126===v&&(M=M||new Float32Array(U)));e.isTypedArray(M,"data buffer for regl.read() must be a typedarray");e(M.byteLength>=U,"data buffer for regl.read() too small");H.pixelStorei(3333,4);H.readPixels(A,F,J,
t,6408,v,M);return M}function M(d){var h;N.setFBO({framebuffer:d.framebuffer},function(){h=J(d)});return h}return function(d){return d&&"framebuffer"in d?M(d):J(d)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(X,ia,Fa){var e=X("./util/sorted-object-keys"),S=X("./util/check"),H=X("./util/values"),N=[];N[32854]=2;N[32855]=2;N[36194]=2;N[33189]=2;N[36168]=1;N[34041]=4;N[35907]=4;N[34836]=16;N[34842]=8;N[34843]=6;ia.exports=function(g,h,p,d,E){function J(d){this.id=A++;this.refCount=
1;this.renderbuffer=d;this.format=32854;this.height=this.width=0;E.profile&&(this.stats={size:0})}function M(h){var p=h.renderbuffer;S(p,"must not double destroy renderbuffer");g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(p);h.renderbuffer=null;h.refCount=0;delete F[h.id];d.renderbufferCount--}var U={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};h.ext_srgb&&(U.srgba=35907);h.ext_color_buffer_half_float&&(U.rgba16f=34842,U.rgb16f=34843);h.webgl_color_buffer_float&&
(U.rgba32f=34836);var v=[];e(U).forEach(function(d){v[U[d]]=d});var A=0,F={};J.prototype.decRef=function(){0>=--this.refCount&&M(this)};E.profile&&(d.getTotalRenderbufferSize=function(){var d=0;e(F).forEach(function(h){d+=F[h].stats.size});return d});return{create:function(h,t){function e(d,h){var b=0,z=0,t=32854;"object"===typeof d&&d?("shape"in d?(z=d.shape,S(Array.isArray(z)&&2<=z.length,"invalid renderbuffer shape"),b=z[0]|0,z=z[1]|0):("radius"in d&&(b=z=d.radius|0),"width"in d&&(b=d.width|0),
"height"in d&&(z=d.height|0)),"format"in d&&(S.parameter(d.format,U,"invalid renderbuffer format"),t=U[d.format])):"number"===typeof d?(b=d|0,z="number"===typeof h?h|0:b):d?S.raise("invalid arguments to renderbuffer constructor"):b=z=1;S(0<b&&0<z&&b<=p.maxRenderbufferSize&&z<=p.maxRenderbufferSize,"invalid renderbuffer size");if(b!==m.width||z!==m.height||t!==m.format)return e.width=m.width=b,e.height=m.height=z,m.format=t,g.bindRenderbuffer(36161,m.renderbuffer),g.renderbufferStorage(36161,t,b,z),
S(0===g.getError(),"invalid render buffer format"),E.profile&&(m.stats.size=N[m.format]*m.width*m.height),e.format=v[m.format],e}var m=new J(g.createRenderbuffer());F[m.id]=m;d.renderbufferCount++;e(h,t);e.resize=function(d,h){var b=d|0,z=h|0||b;if(b===m.width&&z===m.height)return e;S(0<b&&0<z&&b<=p.maxRenderbufferSize&&z<=p.maxRenderbufferSize,"invalid renderbuffer size");e.width=m.width=b;e.height=m.height=z;g.bindRenderbuffer(36161,m.renderbuffer);g.renderbufferStorage(36161,m.format,b,z);S(0===
g.getError(),"invalid render buffer format");E.profile&&(m.stats.size=N[m.format]*m.width*m.height);return e};e._reglType="renderbuffer";e._renderbuffer=m;E.profile&&(e.stats=m.stats);e.destroy=function(){m.decRef()};return e},clear:function(){H(F).forEach(M)},restore:function(){H(F).forEach(function(d){d.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,d.renderbuffer);g.renderbufferStorage(36161,d.format,d.width,d.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,
"./util/values":36}],16:[function(X,ia,Fa){var e=X("./util/sorted-object-keys"),S=X("./util/check"),H=X("./util/extend"),N=X("./util/values");ia.exports=function(g,h,p,d){function E(d,h,p,b){this.name=d;this.id=h;this.location=p;this.info=b}function J(d,h){for(var p=0;p<d.length;++p)if(d[p].id===h.id){d[p].location=h.location;return}d.push(h)}function M(d,p,t){var b=35632===d?A:F,z=b[p];if(!z){var e=h.str(p),z=g.createShader(d);g.shaderSource(z,e);g.compileShader(z);S.shaderError(g,z,e,d,t);b[p]=
z}return z}function U(h,p){this.id=V++;this.fragId=h;this.vertId=p;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function v(p,t,e){var b;b=M(35632,p.fragId);var z=M(35633,p.vertId),W=p.program=g.createProgram();g.attachShader(W,b);g.attachShader(W,z);if(e)for(b=0;b<e.length;++b)z=e[b],g.bindAttribLocation(W,z[0],z[1]);g.linkProgram(W);S.linkError(g,W,h.str(p.fragId),h.str(p.vertId),t);e=g.getProgramParameter(W,35718);
d.profile&&(p.stats.uniformsCount=e);z=p.uniforms;for(b=0;b<e;++b)if(t=g.getActiveUniform(W,b))if(1<t.size)for(var f=0;f<t.size;++f){var v=t.name.replace("[0]","["+f+"]");J(z,new E(v,h.id(v),g.getUniformLocation(W,v),t))}else J(z,new E(t.name,h.id(t.name),g.getUniformLocation(W,t.name),t));e=g.getProgramParameter(W,35721);d.profile&&(p.stats.attributesCount=e);p=p.attributes;for(b=0;b<e;++b)(t=g.getActiveAttrib(W,b))&&J(p,new E(t.name,h.id(t.name),g.getAttribLocation(W,t.name),t))}var A={},F={},Z=
{},t=[],V=0;d.profile&&(p.getMaxUniformsCount=function(){var d=0;t.forEach(function(h){h.stats.uniformsCount>d&&(d=h.stats.uniformsCount)});return d},p.getMaxAttributesCount=function(){var d=0;t.forEach(function(h){h.stats.attributesCount>d&&(d=h.stats.attributesCount)});return d});return{clear:function(){var d=g.deleteShader.bind(g);N(A).forEach(d);A={};N(F).forEach(d);F={};t.forEach(function(d){g.deleteProgram(d.program)});t.length=0;Z={};p.shaderCount=0},program:function(d,h,N,b){S.command(0<=
d,"missing vertex shader",N);S.command(0<=h,"missing fragment shader",N);var z=Z[h];z||(z=Z[h]={});var W=z[d];if(W&&(W.refCount++,!b))return W;var f=new U(h,d);p.shaderCount++;v(f,N,b);W||(z[d]=f);t.push(f);return H(f,{destroy:function(){f.refCount--;if(0>=f.refCount){g.deleteProgram(f.program);var b=t.indexOf(f);t.splice(b,1);p.shaderCount--}0>=z[f.vertId].refCount&&(g.deleteShader(F[f.vertId]),delete F[f.vertId],delete Z[f.fragId][f.vertId]);e(Z[f.fragId]).length||(g.deleteShader(A[f.fragId]),delete A[f.fragId],
delete Z[f.fragId])}})},restore:function(){A={};F={};for(var d=0;d<t.length;++d)v(t[d],null,t[d].attributes.map(function(d){return[d.location,d.name]}))},shader:M,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(X,ia,Fa){ia.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(X,ia,Fa){ia.exports=
function(){var e={"":0},S=[""];return{id:function(H){var N=e[H];if(N)return N;N=e[H]=S.length;S.push(H);return N},str:function(e){return S[e]}}}},{}],19:[function(X,ia,Fa){function e(c){return"[object "+c+"]"}function S(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function H(c){return Array.isArray(c)&&0!==c.length&&Z(c[0])?!0:!1}function N(c){return Object.prototype.toString.call(c)}function g(c){if(!c)return!1;var b=N(c);return 0<=ca.indexOf(b)?!0:S(c)||H(c)||v(c)}function h(c,
b){36193===c.type?(c.data=F(b),A.freeType(b)):c.data=b}function p(c,d,a,h,f,p){c="undefined"!==typeof C[c]?C[c]:b[c]*D[d];p&&(c*=6);if(f){for(h=0;1<=a;)h+=c*a*a,a/=2;return h}return c*a*h}var d=X("./util/sorted-object-keys"),E=X("./util/check"),J=X("./util/extend"),M=X("./util/values"),U=X("./util/is-typed-array"),v=X("./util/is-ndarray"),A=X("./util/pool"),F=X("./util/to-half-float"),Z=X("./util/is-array-like"),t=X("./util/flatten"),V=X("./util/is-pow2");Fa=X("./constants/arraytypes.json");var m=
X("./constants/arraytypes.json"),u=[9984,9986,9985,9987],ja=[0,6409,6410,6407,6408],b={};b[6409]=b[6406]=b[6402]=1;b[34041]=b[6410]=2;b[6407]=b[35904]=3;b[6408]=b[35906]=4;var z=e("HTMLCanvasElement"),W=e("OffscreenCanvas"),f=e("CanvasRenderingContext2D"),ba=e("ImageBitmap"),G=e("HTMLImageElement"),q=e("HTMLVideoElement"),ca=d(Fa).concat([z,W,f,ba,G,q]),D=[];D[5121]=1;D[5126]=4;D[36193]=2;D[5123]=2;D[5125]=4;var C=[];C[32854]=2;C[32855]=2;C[36194]=2;C[34041]=4;C[33776]=.5;C[33777]=.5;C[33778]=1;C[33779]=
1;C[35986]=.5;C[35987]=1;C[34798]=1;C[35840]=.5;C[35841]=.25;C[35842]=.5;C[35843]=.25;C[36196]=.5;ia.exports=function(c,l,a,e,x,C,D){function Y(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function fa(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=
c.unpackAlignment;a.colorSpace=c.colorSpace;a.width=c.width;a.height=c.height;a.channels=c.channels}function R(c,d){if("object"===typeof d&&d){"premultiplyAlpha"in d&&(E.type(d.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),c.premultiplyAlpha=d.premultiplyAlpha);"flipY"in d&&(E.type(d.flipY,"boolean","invalid texture flip"),c.flipY=d.flipY);"alignment"in d&&(E.oneOf(d.alignment,[1,2,4,8],"invalid texture unpack alignment"),c.unpackAlignment=d.alignment);"colorSpace"in d&&(E.parameter(d.colorSpace,
Ua,"invalid colorSpace"),c.colorSpace=Ua[d.colorSpace]);if("type"in d){var k=d.type;E(l.oes_texture_float||!("float"===k||"float32"===k),"you must enable the OES_texture_float extension in order to use floating point textures.");E(l.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");E(l.webgl_depth_texture||!("uint16"===k||"uint32"===k||"depth stencil"===k),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
E.parameter(k,r,"invalid texture type");c.type=r[k]}var h=c.width,f=c.height,w=c.channels,k=!1;"shape"in d?(E(Array.isArray(d.shape)&&2<=d.shape.length,"shape must be an array"),h=d.shape[0],f=d.shape[1],3===d.shape.length&&(w=d.shape[2],E(0<w&&4>=w,"invalid number of channels"),k=!0),E(0<=h&&h<=a.maxTextureSize,"invalid width"),E(0<=f&&f<=a.maxTextureSize,"invalid height")):("radius"in d&&(h=f=d.radius,E(0<=h&&h<=a.maxTextureSize,"invalid radius")),"width"in d&&(h=d.width,E(0<=h&&h<=a.maxTextureSize,
"invalid width")),"height"in d&&(f=d.height,E(0<=f&&f<=a.maxTextureSize,"invalid height")),"channels"in d&&(w=d.channels,E(0<w&&4>=w,"invalid number of channels"),k=!0));c.width=h|0;c.height=f|0;c.channels=w|0;h=!1;"format"in d&&(h=d.format,E(l.webgl_depth_texture||!("depth"===h||"depth stencil"===h),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(h,n,"invalid texture format"),f=c.internalformat=n[h],c.format=Ea[f],h in r&&!("type"in d)&&(c.type=
r[h]),h in B&&(c.compressed=!0),h=!0);!k&&h?c.channels=b[c.format]:k&&!h?c.channels!==ja[c.format]&&(c.format=c.internalformat=ja[c.channels]):h&&k&&E(c.channels===b[c.format],"number of channels inconsistent with specified format")}}function I(a){c.pixelStorei(37440,a.flipY);c.pixelStorei(37441,a.premultiplyAlpha);c.pixelStorei(37443,a.colorSpace);c.pixelStorei(3317,a.unpackAlignment)}function y(){Y.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function k(c,d){var b=null;g(d)?b=d:d&&(E.type(d,"object","invalid pixel data type"),R(c,d),"x"in d&&(c.xOffset=d.x|0),"y"in d&&(c.yOffset=d.y|0),g(d.data)&&(b=d.data));E(!c.compressed||b instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(d.copy){E(!b,"can not specify copy and data field for the same texture");var k=x.viewportWidth,n=x.viewportHeight;c.width=c.width||k-c.xOffset;c.height=c.height||n-c.yOffset;c.needsCopy=!0;E(0<=c.xOffset&&c.xOffset<k&&0<=c.yOffset&&
c.yOffset<n&&0<c.width&&c.width<=k&&0<c.height&&c.height<=n,"copy texture read out of bounds")}else if(!b)c.width=c.width||1,c.height=c.height||1,c.channels=c.channels||4;else if(U(b))c.channels=c.channels||4,c.data=b,"type"in d||5121!==c.type||(c.type=m[Object.prototype.toString.call(b)]|0);else if(S(b)){c.channels=c.channels||4;k=b;n=k.length;switch(c.type){case 5121:case 5123:case 5125:case 5126:n=A.allocType(c.type,n);n.set(k);c.data=n;break;case 36193:c.data=F(k);break;default:E.raise("unsupported texture type, must specify a typed array")}c.alignment=
1;c.needsFree=!0}else if(v(b)){k=b.data;Array.isArray(k)||5121!==c.type||(c.type=m[Object.prototype.toString.call(k)]|0);var n=b.shape,r=b.stride,w,L,B,O;3===n.length?(B=n[2],O=r[2]):(E(2===n.length,"invalid ndarray pixel data, must be 2 or 3D"),O=B=1);w=n[0];L=n[1];n=r[0];r=r[1];c.alignment=1;c.width=w;c.height=L;c.channels=B;c.format=c.internalformat=ja[B];c.needsFree=!0;w=O;b=b.offset;B=c.width;O=c.height;L=c.channels;for(var p=A.allocType(36193===c.type?5126:c.type,B*O*L),l=0,I=0;I<O;++I)for(var sa=
0;sa<B;++sa)for(var Ha=0;Ha<L;++Ha)p[l++]=k[n*sa+r*I+w*Ha+b];h(c,p)}else if(N(b)===z||N(b)===W||N(b)===f)N(b)===z||N(b)===W?c.element=b:c.element=b.canvas,c.width=c.element.width,c.height=c.element.height,c.channels=4;else if(N(b)===ba)c.element=b,c.width=b.width,c.height=b.height,c.channels=4;else if(N(b)===G)c.element=b,c.width=b.naturalWidth,c.height=b.naturalHeight,c.channels=4;else if(N(b)===q)c.element=b,c.width=b.videoWidth,c.height=b.videoHeight,c.channels=4;else if(H(b)){k=c.width||b[0].length;
n=c.height||b.length;r=c.channels;r=Z(b[0][0])?r||b[0][0].length:r||1;w=t.shape(b);B=1;for(O=0;O<w.length;++O)B*=w[O];B=A.allocType(36193===c.type?5126:c.type,B);t.flatten(b,w,"",B);h(c,B);c.alignment=1;c.width=k;c.height=n;c.channels=r;c.format=c.internalformat=ja[r];c.needsFree=!0}5126===c.type?E(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===c.type&&E(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function P(a,b,d,k,h){var n=a.element,r=a.data,f=a.internalformat,w=a.format,L=a.type,B=a.width,O=a.height;I(a);n?c.texSubImage2D(b,h,d,k,w,L,n):a.compressed?c.compressedTexSubImage2D(b,h,d,k,f,B,O,r):a.needsCopy?(e(),c.copyTexSubImage2D(b,h,d,k,a.xOffset,a.yOffset,B,O)):c.texSubImage2D(b,h,d,k,B,O,w,L,r)}function Q(){return qa.pop()||new y}function za(a){a.needsFree&&A.freeType(a.data);y.call(a);qa.push(a)}function oa(){Y.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function w(a,c,b){var d=a.images[0]=Q();a.mipmask=1;d.width=a.width=c;d.height=a.height=b;d.channels=a.channels=4}function K(a,c){var b=null;if(g(c))b=a.images[0]=Q(),fa(b,a),k(b,c),a.mipmask=1;else if(R(a,c),Array.isArray(c.mipmap))for(var d=c.mipmap,h=0;h<d.length;++h)b=a.images[h]=Q(),fa(b,a),b.width>>=h,b.height>>=h,k(b,d[h]),a.mipmask|=1<<h;else b=a.images[0]=Q(),fa(b,a),k(b,c),a.mipmask=1;fa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||E(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(a,b){for(var d=a.images,k=0;k<d.length&&d[k];++k){var h=d[k],n=b,r=k,f=h.element,w=h.data,L=h.internalformat,B=h.format,O=h.type,p=h.width,l=h.height;I(h);f?c.texImage2D(n,r,B,B,O,f):h.compressed?c.compressedTexImage2D(n,r,L,p,l,0,w):h.needsCopy?(e(),c.copyTexImage2D(n,r,B,h.xOffset,h.yOffset,p,l,0)):c.texImage2D(n,
r,B,p,l,0,B,O,w||null)}}function T(){var a=ya.pop()||new oa;Y.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function ma(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&za(c[b]),c[b]=null;ya.push(a)}function ra(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ca(c,b){if("min"in b){var d=b.min;E.parameter(d,ac);c.minFilter=ac[d];0<=u.indexOf(c.minFilter)&&!("faces"in b)&&(c.genMipmaps=!0)}"mag"in b&&
(d=b.mag,E.parameter(d,O),c.magFilter=O[d]);var d=c.wrapS,k=c.wrapT;if("wrap"in b){var h=b.wrap;"string"===typeof h?(E.parameter(h,Ha),d=k=Ha[h]):Array.isArray(h)&&(E.parameter(h[0],Ha),E.parameter(h[1],Ha),d=Ha[h[0]],k=Ha[h[1]])}else"wrapS"in b&&(d=b.wrapS,E.parameter(d,Ha),d=Ha[d]),"wrapT"in b&&(k=b.wrapT,E.parameter(k,Ha),k=Ha[k]);c.wrapS=d;c.wrapT=k;"anisotropic"in b&&(d=b.anisotropic,E("number"===typeof d&&1<=d&&d<=a.maxAnisotropic,"aniso samples must be between 1 and "),c.anisotropic=b.anisotropic);
if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":E.parameter(b.mipmap,Aa,"invalid mipmap hint");c.mipmapHint=Aa[b.mipmap];d=c.genMipmaps=!0;break;case "boolean":d=c.genMipmaps=b.mipmap;break;case "object":E(Array.isArray(b.mipmap),"invalid mipmap type");c.genMipmaps=!1;d=!0;break;default:E.raise("invalid mipmap type")}!d||"min"in b||(c.minFilter=9984)}}function xa(a,b){c.texParameteri(b,10241,a.minFilter);c.texParameteri(b,10240,a.magFilter);c.texParameteri(b,10242,a.wrapS);c.texParameteri(b,
10243,a.wrapT);l.ext_texture_filter_anisotropic&&c.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(b))}function ga(a){Y.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ia++;this.refCount=1;this.target=a;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ra;D.profile&&(this.stats={size:0})}function Da(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function ka(){var a=ta[0];a?c.bindTexture(a.target,a.texture):
c.bindTexture(3553,null)}function pa(a){var b=a.texture;E(b,"must not double destroy texture");var d=a.unit,k=a.target;0<=d&&(c.activeTexture(33984+d),c.bindTexture(k,null),ta[d]=null);c.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete la[a.id];C.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ha={repeat:10497,clamp:33071,mirror:33648},O={nearest:9728,linear:9729},ac=J({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},O),Ua={none:0,browser:37444},r={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},n={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},B={};l.ext_srgb&&(n.srgb=35904,n.srgba=35906);l.oes_texture_float&&(r.float32=r["float"]=5126);l.oes_texture_half_float&&(r.float16=r["half float"]=36193);l.webgl_depth_texture&&(J(n,{depth:6402,"depth stencil":34041}),J(r,{uint16:5123,uint32:5125,
"depth stencil":34042}));l.webgl_compressed_texture_s3tc&&J(B,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});l.webgl_compressed_texture_atc&&J(B,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});l.webgl_compressed_texture_pvrtc&&J(B,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});l.webgl_compressed_texture_etc1&&(B["rgb etc1"]=36196);var ua=Array.prototype.slice.call(c.getParameter(34467));
d(B).forEach(function(a){var c=B[a];0<=ua.indexOf(c)&&(n[a]=c)});var va=d(n);a.textureFormats=va;var td=[];d(n).forEach(function(a){td[n[a]]=a});var Gb=[];d(r).forEach(function(a){Gb[r[a]]=a});var ha=[];d(O).forEach(function(a){ha[O[a]]=a});var L=[];d(ac).forEach(function(a){L[ac[a]]=a});var sa=[];d(Ha).forEach(function(a){sa[Ha[a]]=a});var Ea=va.reduce(function(a,c){var b=n[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||l.ext_srgb&&(35904===b||35906===b)?a[b]=b:32855===b||0<=c.indexOf("rgba")?
a[b]=6408:a[b]=6407;return a},{}),qa=[],ya=[],Ia=0,la={},aa=a.maxTextureUnits,ta=Array(aa).map(function(){return null});J(ga.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<aa;++b){var d=ta[b];if(d){if(0<d.bindCount)continue;d.unit=-1}ta[b]=this;a=b;break}a>=aa&&E.raise("insufficient number of texture units");D.profile&&C.maxTextureUnits<a+1&&(C.maxTextureUnits=a+1);this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});D.profile&&(C.getTotalTextureSize=function(){var a=0;d(la).forEach(function(c){a+=la[c].stats.size});return a});return{create2D:function(b,d){function h(c,b){var d=n.texInfo;ra.call(d);var k=T();"number"===typeof c?"number"===typeof b?w(k,c|0,b|0):w(k,c|0,c|0):c?(E.type(c,"object","invalid arguments to regl.texture"),ca(d,c),K(k,c)):w(k,1,1);d.genMipmaps&&(k.mipmask=(k.width<<1)-1);n.mipmask=k.mipmask;fa(n,k);E.texture2D(d,k,a);n.internalformat=k.internalformat;
h.width=k.width;h.height=k.height;Da(n);da(k,3553);xa(d,3553);ka();ma(k);D.profile&&(n.stats.size=p(n.internalformat,n.type,k.width,k.height,d.genMipmaps,!1));h.format=td[n.internalformat];h.type=Gb[n.type];h.mag=ha[d.magFilter];h.min=L[d.minFilter];h.wrapS=sa[d.wrapS];h.wrapT=sa[d.wrapT];return h}var n=new ga(3553);la[n.id]=n;C.textureCount++;h(b,d);h.subimage=function(a,c,b,d){E(!!a,"must specify image data");c|=0;b|=0;d|=0;var r=Q();fa(r,n);r.width=0;r.height=0;k(r,a);r.width=r.width||(n.width>>
d)-c;r.height=r.height||(n.height>>d)-b;E(n.type===r.type&&n.format===r.format&&n.internalformat===r.internalformat,"incompatible format for texture.subimage");E(0<=c&&0<=b&&c+r.width<=n.width&&b+r.height<=n.height,"texture.subimage write out of bounds");E(n.mipmask&1<<d,"missing mipmap data");E(r.data||r.element||r.needsCopy,"missing image data");Da(n);P(r,3553,c,b,d);ka();za(r);return h};h.resize=function(a,b){var d=a|0,k=b|0||d;if(d===n.width&&k===n.height)return h;h.width=n.width=d;h.height=n.height=
k;Da(n);for(var r=0;n.mipmask>>r;++r){var f=d>>r,w=k>>r;if(!f||!w)break;c.texImage2D(3553,r,n.format,f,w,0,n.format,n.type,null)}ka();D.profile&&(n.stats.size=p(n.internalformat,n.type,d,k,!1,!1));return h};h._reglType="texture2d";h._texture=n;D.profile&&(h.stats=n.stats);h.destroy=function(){n.decRef()};return h},createCube:function(b,d,h,n,r,f){function B(c,b,d,k,h,n){var r,f=O.texInfo;ra.call(f);for(r=0;6>r;++r)l[r]=T();if("number"!==typeof c&&c)if("object"===typeof c)if(b)K(l[0],c),K(l[1],b),
K(l[2],d),K(l[3],k),K(l[4],h),K(l[5],n);else if(ca(f,c),R(O,c),"faces"in c)for(c=c.faces,E(Array.isArray(c)&&6===c.length,"cube faces must be a length 6 array"),r=0;6>r;++r)E("object"===typeof c[r]&&!!c[r],"invalid input for cube map face"),fa(l[r],O),K(l[r],c[r]);else for(r=0;6>r;++r)K(l[r],c);else E.raise("invalid arguments to cube map");else for(c=c|0||1,r=0;6>r;++r)w(l[r],c,c);fa(O,l[0]);E.optional(function(){a.npotTextureCube||E(V(O.width)&&V(O.height),"your browser does not support non power or two texture dimensions")});
O.mipmask=f.genMipmaps?(l[0].width<<1)-1:l[0].mipmask;E.textureCube(O,f,l,a);O.internalformat=l[0].internalformat;B.width=l[0].width;B.height=l[0].height;Da(O);for(r=0;6>r;++r)da(l[r],34069+r);xa(f,34067);ka();D.profile&&(O.stats.size=p(O.internalformat,O.type,B.width,B.height,f.genMipmaps,!0));B.format=td[O.internalformat];B.type=Gb[O.type];B.mag=ha[f.magFilter];B.min=L[f.minFilter];B.wrapS=sa[f.wrapS];B.wrapT=sa[f.wrapT];for(r=0;6>r;++r)ma(l[r]);return B}var O=new ga(34067);la[O.id]=O;C.cubeCount++;
var l=Array(6);B(b,d,h,n,r,f);B.subimage=function(a,c,b,d,h){E(!!c,"must specify image data");E("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");b|=0;d|=0;h|=0;var n=Q();fa(n,O);n.width=0;n.height=0;k(n,c);n.width=n.width||(O.width>>h)-b;n.height=n.height||(O.height>>h)-d;E(O.type===n.type&&O.format===n.format&&O.internalformat===n.internalformat,"incompatible format for texture.subimage");E(0<=b&&0<=d&&b+n.width<=O.width&&d+n.height<=O.height,"texture.subimage write out of bounds");E(O.mipmask&
1<<h,"missing mipmap data");E(n.data||n.element||n.needsCopy,"missing image data");Da(O);P(n,34069+a,b,d,h);ka();za(n);return B};B.resize=function(a){a|=0;if(a!==O.width){B.width=O.width=a;B.height=O.height=a;Da(O);for(var b=0;6>b;++b)for(var d=0;O.mipmask>>d;++d)c.texImage2D(34069+b,d,O.format,a>>d,a>>d,0,O.format,O.type,null);ka();D.profile&&(O.stats.size=p(O.internalformat,O.type,B.width,B.height,!1,!0));return B}};B._reglType="textureCube";B._texture=O;D.profile&&(B.stats=O.stats);B.destroy=function(){O.decRef()};
return B},clear:function(){for(var a=0;a<aa;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),ta[a]=null;M(la).forEach(pa);C.cubeCount=0;C.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<aa;++a){var b=ta[a];b&&(b.bindCount=0,b.unit=-1,ta[a]=null)}M(la).forEach(function(a){a.texture=c.createTexture();c.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)c.texImage2D(3553,b,a.internalformat,a.width>>b,a.height>>b,0,
a.internalformat,a.type,null);else for(var d=0;6>d;++d)c.texImage2D(34069+d,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);xa(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<aa;++a){var b=ta[a];b&&(b.bindCount=0,b.unit=-1,ta[a]=null);c.activeTexture(33984+a);c.bindTexture(3553,null);c.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,
"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(X,ia,Fa){ia.exports=function(e,S){function H(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function N(h,e,g){var A=p.pop()||new H;A.startQueryIndex=h;A.endQueryIndex=e;A.sum=0;A.stats=g;d.push(A)}if(!S.ext_disjoint_timer_query)return null;var g=[],h=[],p=[],d=[],E=[],J=[];return{beginQuery:function(d){var p=g.pop()||S.ext_disjoint_timer_query.createQueryEXT();
S.ext_disjoint_timer_query.beginQueryEXT(35007,p);h.push(p);N(h.length-1,h.length,d)},endQuery:function(){S.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:N,update:function(){var e,N;e=h.length;if(0!==e){J.length=Math.max(J.length,e+1);E.length=Math.max(E.length,e+1);E[0]=0;var v=J[0]=0;for(N=e=0;N<h.length;++N){var A=h[N];S.ext_disjoint_timer_query.getQueryObjectEXT(A,34919)?(v+=S.ext_disjoint_timer_query.getQueryObjectEXT(A,34918),g.push(A)):h[e++]=A;E[N+1]=v;J[N+1]=e}h.length=e;for(N=
e=0;N<d.length;++N){var v=d[N],F=v.startQueryIndex,A=v.endQueryIndex;v.sum+=E[A]-E[F];F=J[F];A=J[A];A===F?(v.stats.gpuTime+=v.sum/1E6,p.push(v)):(v.startQueryIndex=F,v.endQueryIndex=A,d[e++]=v)}d.length=e}},getNumPendingQueries:function(){return h.length},clear:function(){g.push.apply(g,h);for(var d=0;d<g.length;d++)S.ext_disjoint_timer_query.deleteQueryEXT(g[d]);h.length=0;g.length=0},restore:function(){h.length=0;g.length=0}}}},{}],21:[function(X,ia,Fa){function e(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function S(b){b=Error("(regl) "+b);console.error(b);throw b;}function H(b,d){b||S(d)}function N(b){return b?": "+b:""}function g(b,d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function h(b,d,h){0>d.indexOf(b)&&S("invalid value"+
N(h)+". must be one of: "+d)}function p(b,d){for(b+="";b.length<d;)b=" "+b;return b}function d(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function E(b,d){this.number=b;this.line=d;this.errors=[]}function J(b,d,h){this.file=b;this.line=d;this.message=h}function M(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function U(){var b=Error(),b=(b.stack||b).toString(),
d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function v(b,h){var p=b.split("\n"),m=1,q=0,z={unknown:new d,0:new d};z.unknown.name=z[0].name=h||M();z.unknown.lines.push(new E(0,""));for(var t=0;t<p.length;++t){var g=p[t],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(g);if(c)switch(c[1]){case "line":if(c=/(\d+)(\s+\d+)?/.exec(c[2]))m=c[1]|0,c[2]&&(q=c[2]|0,q in z||(z[q]=new d));break;case "define":if(c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]))z[q].name=
c[1]?e(c[2]):c[2]}z[q].lines.push(new E(m++,g))}u(z).forEach(function(c){var a=z[c];a.lines.forEach(function(c){a.index[c.number]=c})});return z}function A(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var h=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);h?d.push(new J(h[1]|0,h[2]|0,h[3].trim())):0<b.length&&d.push(new J("unknown",0,b))}});return d}function F(b,d){d.forEach(function(d){var h=b[d.file];if(h){var f=h.index[d.line];if(f){f.errors.push(d);h.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(d)})}function Z(b){b._commandRef=M()}function t(b,d){var h=U();S(b+" in command "+(d||M())+("unknown"===h?"":" called from "+h))}function V(b,d,h,p){g(b,d)||t("invalid parameter type"+N(h)+". expected "+d+", got "+typeof b,p||M())}function m(b,d){return 32820===b||32819===b||33635===b?2:34042===b?4:z[b]*d}var u=X("./sorted-object-keys"),ja=X("./is-typed-array");X=X("./extend");var b="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
z={};z[5120]=z[5121]=1;z[5122]=z[5123]=z[36193]=z[33635]=z[32819]=z[32820]=2;z[5124]=z[5125]=z[5126]=z[34042]=4;ia.exports=X(H,{optional:function(b){b()},raise:S,commandRaise:t,command:function(b,d,h){b||t(d,h||M())},parameter:function(b,d,h){b in d||S("unknown parameter ("+b+")"+N(h)+". possible values: "+u(d).join())},commandParameter:function(b,d,h,p){b in d||t("unknown parameter ("+b+")"+N(h)+". possible values: "+u(d).join(),p||M())},constructor:function(d){u(d).forEach(function(d){0>b.indexOf(d)&&
S('invalid regl constructor argument "'+d+'". must be one of '+b)})},type:function(b,d,h){g(b,d)||S("invalid parameter type"+N(h)+". expected "+d+", got "+typeof b)},commandType:V,isTypedArray:function(b,d){ja(b)||S("invalid parameter type"+N(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||S("invalid parameter type, ("+b+")"+N(d)+". must be a nonnegative integer")},oneOf:h,shaderError:function(b,d,h,m,q){if(!b.getShaderParameter(d,b.COMPILE_STATUS)){d=b.getShaderInfoLog(d);b=m===
b.FRAGMENT_SHADER?"fragment":"vertex";V(h,"string",b+" shader source must be a string",q);var z=v(h,q);h=A(d);F(z,h);u(z).forEach(function(b){function d(c,b){h.push(c);a.push(b||"")}var c=z[b];if(c.hasErrors){var h=[""],a=[""];d("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){d(p(a.number,4)+"|  ","background-color:yellow; font-weight:bold");d(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(b){b=b.message;var h=/^\s*'(.*)'\s*:\s*(.*)$/.exec(b);if(h){var f=h[1];b=h[2];switch(f){case "assign":f="="}c=Math.max(a.line.indexOf(f,c),0)}else c=0;d(p("| ",6));d(p("^^^",c+3)+"\n","font-weight:bold");d(p("| ",6));d(b+"\n","font-weight:bold")});d(p("| ",6)+"\n")}else d(p(a.number,4)+"|  "),d(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(h.join("")):(a[0]=h.join("%c"),console.log.apply(console,a))}});H.raise("Error compiling "+
b+" shader, "+z[0].name)}},linkError:function(b,d,h,p,q){b.getProgramParameter(d,b.LINK_STATUS)||(b=b.getProgramInfoLog(d),h=v(h,q),p='Error linking program with vertex shader, "'+v(p,q)[0].name+'", and fragment shader "'+h[0].name+'"',"undefined"!==typeof document?console.log("%c"+p+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(p+"\n"+b),H.raise(p))},callSite:U,saveCommandRef:Z,saveDrawInfo:function(b,d,h,p){function q(b){return b?p.id(b):0}function m(b,
c){u(c).forEach(function(c){b[p.id(c)]=!0})}Z(b);b._fragId=q(b["static"].frag);b._vertId=q(b["static"].vert);var z=b._uniformSet={};m(z,d["static"]);m(z,d.dynamic);d=b._attributeSet={};m(d,h["static"]);m(d,h.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,d,p){b.texture?h(b.texture._texture.internalformat,d,"unsupported texture format for attachment"):h(b.renderbuffer._renderbuffer.format,p,"unsupported renderbuffer format for attachment")},
guessCommand:M,texture2D:function(b,d,h){var p=d.width,q=d.height,z=d.channels;H(0<p&&p<=h.maxTextureSize&&0<q&&q<=h.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||H(!(p&p-1)&&!!p&&!(q&q-1)&&!!q,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==p&&1!==q&&H(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(H(!(p&p-1)&&!!p&&!(q&q-1)&&!!q,"texture must be a square power of 2 to support mipmapping"),
H(d.mipmask===(p<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>h.extensions.indexOf("oes_texture_float_linear")&&H(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),H(!b.genMipmaps,"mipmap generation not supported with float textures"));var e=d.images;for(h=0;16>h;++h)if(e[h]){var t=p>>h,c=q>>h;H(d.mipmask&1<<h,"missing mipmap data");var l=e[h];H(l.width===t&&l.height===c,"invalid shape for mip images");H(l.format===d.format&&l.internalformat===
d.internalformat&&l.type===d.type,"incompatible type for mip image");!l.compressed&&l.data&&(t=Math.ceil(m(l.type,z)*t/l.unpackAlignment)*l.unpackAlignment,H(l.data.byteLength===t*c,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||H(0===(d.mipmask&1<<h),"extra mipmap data");d.compressed&&H(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,d,h,p){var q=b.width,z=b.height,e=b.channels;H(0<q&&q<=p.maxTextureSize&&
0<z&&z<=p.maxTextureSize,"invalid texture shape");H(q===z,"cube map must be square");H(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(p=0;p<h.length;++p){var t=h[p];H(t.width===q&&t.height===z,"inconsistent cube map face shape");d.genMipmaps&&(H(!t.compressed,"can not generate mipmap for compressed textures"),H(1===t.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=t.images,l=0;16>l;++l){var a=c[l];if(a){var g=q>>l,x=z>>l;H(t.mipmask&1<<l,"missing mipmap data");
H(a.width===g&&a.height===x,"invalid shape for mip images");H(a.format===b.format&&a.internalformat===b.internalformat&&a.type===b.type,"incompatible type for mip image");a.compressed||a.data&&H(a.data.byteLength===g*x*Math.max(m(a.type,e),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(X,ia,Fa){ia.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(X,ia,Fa){function e(e){return Array.prototype.slice.call(e)}function S(g){return e(g).join("")}var H=X("./extend"),N=X("./compiled-fns");ia.exports=function(){function g(){var h=[],p=[];return H(function(){h.push.apply(h,e(arguments))},{def:function(){var g="v"+d;d++;p.push(g);0<arguments.length&&(h.push(g,"="),h.push.apply(h,e(arguments)),h.push(";"));return g},toString:function(){return S([0<p.length?"var "+p.join(",")+";":"",S(h)])}})}function h(){function d(t,
e){p(t,e,"=",h.def(t,e),";")}var h=g(),p=g(),N=h.toString,S=p.toString;return H(function(){h.apply(h,e(arguments))},{def:h.def,entry:h,exit:p,save:d,set:function(p,e,m){d(p,e);h(p,e,"=",m,";")},toString:function(){return N()+S()}})}var p=0,d=0,E={},J=g(),M={};return{global:J,link:function(d){var h="$"+p,e=!1;"object"===typeof d&&d.name&&(h=d.name.replace(/ /g,"_"),e=!0);if(h in E)return h;E[h]=d;e||p++;return h},block:g,proc:function(d,p){function e(){var d="a"+g.length;g.push(d);return d}var g=[];
p=p||0;for(var N=0;N<p;++N)e();var N=h(),t=N.toString;return M[d]=H(N,{arg:e,toString:function(){return S(["function(",g.join(),"){",t(),"}"])}})},scope:h,cond:function(){var d=S(arguments),p=h(),g=h(),N=p.toString,J=g.toString;return H(p,{then:function(){p.apply(p,e(arguments));return this},"else":function(){g.apply(g,e(arguments));return this},toString:function(){var h=J();h&&(h="else{"+h+"}");return S(["if(",d,"){",N(),"}",h])}})},compile:function(){var d=[],h=[];Object.keys(E).sort(function(d,
h){var p="$"===d.charAt(0),e="$"===h.charAt(0);return p||e?p&&e?+d.slice(1)<+h.slice(1)?-1:1:p&&!e?-1:1:d.localeCompare(h)}).forEach(function(p){var m=E[p];d.push(p);h.push(m)});for(var p=0,e=d.length-1;-1<e;e--)if("$"===d[e].charAt(0)){p=e;break}var g=['"use strict";',J,"return {"];Object.keys(M).forEach(function(d){g.push('"',d,'":',M[d].toString(),",")});g.push("}");var e=S(g).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),p=d.slice(p).join(),t=N[p];if(!t)throw console.log("src code is:"),
console.log(e),console.log("compiled values:",h),console.log("linked names:",d),console.log("Keys available:",Object.keys(N)),console.log("Key:",p),console.log('"'+p+'": function('+d.join(", ")+") \n{\n"+e+"\n},"),Error("missing precompiled function with key: "+p);return t.apply(null,h)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(X,ia,Fa){ia.exports={$0:function(e){var S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C;S=e.attributes;H=e.current;N=e.framebuffer;g=e.gl;h=e.next;
p=e.vao;d=h.blend_color;E=H.blend_color;J=h.blend_equation;M=H.blend_equation;U=h.blend_func;v=H.blend_func;A=h.colorMask;F=H.colorMask;Z=h.depth_range;t=H.depth_range;V=h.polygonOffset_offset;m=H.polygonOffset_offset;u=h.sample_coverage;ja=H.sample_coverage;b=h.scissor_box;z=H.scissor_box;W=h.stencil_func;f=H.stencil_func;ba=h.stencil_opBack;G=H.stencil_opBack;q=h.stencil_opFront;ca=H.stencil_opFront;D=h.viewport;C=H.viewport;return{poll:function(){var c,p,a,e,x,S,Cc,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,
T,ma;H.dirty=!1;p=h.blend_enable;a=h.cull_enable;e=h.depth_enable;x=h.dither;S=h.polygonOffset_enable;Cc=h.sample_alpha;Y=h.sample_enable;fa=h.scissor_enable;R=h.stencil_enable;I=h.cull_face;y=H.cull_face;k=h.depth_func;P=H.depth_func;Q=h.depth_mask;za=H.depth_mask;oa=h.frontFace;w=H.frontFace;K=h.lineWidth;da=H.lineWidth;T=h.stencil_mask;ma=H.stencil_mask;c=N.next;c!==N.cur&&(c?g.bindFramebuffer(36160,c.framebuffer):g.bindFramebuffer(36160,null),N.cur=c);p!==H.blend_enable&&(p?g.enable(3042):g.disable(3042),
H.blend_enable=p);a!==H.cull_enable&&(a?g.enable(2884):g.disable(2884),H.cull_enable=a);e!==H.depth_enable&&(e?g.enable(2929):g.disable(2929),H.depth_enable=e);x!==H.dither&&(x?g.enable(3024):g.disable(3024),H.dither=x);S!==H.polygonOffset_enable&&(S?g.enable(32823):g.disable(32823),H.polygonOffset_enable=S);Cc!==H.sample_alpha&&(Cc?g.enable(32926):g.disable(32926),H.sample_alpha=Cc);Y!==H.sample_enable&&(Y?g.enable(32928):g.disable(32928),H.sample_enable=Y);fa!==H.scissor_enable&&(fa?g.enable(3089):
g.disable(3089),H.scissor_enable=fa);R!==H.stencil_enable&&(R?g.enable(2960):g.disable(2960),H.stencil_enable=R);if(d[0]!==E[0]||d[1]!==E[1]||d[2]!==E[2]||d[3]!==E[3])g.blendColor(d[0],d[1],d[2],d[3]),E[0]=d[0],E[1]=d[1],E[2]=d[2],E[3]=d[3];if(J[0]!==M[0]||J[1]!==M[1])g.blendEquationSeparate(J[0],J[1]),M[0]=J[0],M[1]=J[1];if(U[0]!==v[0]||U[1]!==v[1]||U[2]!==v[2]||U[3]!==v[3])g.blendFuncSeparate(U[0],U[1],U[2],U[3]),v[0]=U[0],v[1]=U[1],v[2]=U[2],v[3]=U[3];if(A[0]!==F[0]||A[1]!==F[1]||A[2]!==F[2]||
A[3]!==F[3])g.colorMask(A[0],A[1],A[2],A[3]),F[0]=A[0],F[1]=A[1],F[2]=A[2],F[3]=A[3];I!==y&&(g.cullFace(I),H.cull_face=I);k!==P&&(g.depthFunc(k),H.depth_func=k);Q!==za&&(g.depthMask(Q),H.depth_mask=Q);if(Z[0]!==t[0]||Z[1]!==t[1])g.depthRange(Z[0],Z[1]),t[0]=Z[0],t[1]=Z[1];oa!==w&&(g.frontFace(oa),H.frontFace=oa);K!==da&&(g.lineWidth(K),H.lineWidth=K);if(V[0]!==m[0]||V[1]!==m[1])g.polygonOffset(V[0],V[1]),m[0]=V[0],m[1]=V[1];if(u[0]!==ja[0]||u[1]!==ja[1])g.sampleCoverage(u[0],u[1]),ja[0]=u[0],ja[1]=
u[1];if(b[0]!==z[0]||b[1]!==z[1]||b[2]!==z[2]||b[3]!==z[3])g.scissor(b[0],b[1],b[2],b[3]),z[0]=b[0],z[1]=b[1],z[2]=b[2],z[3]=b[3];if(W[0]!==f[0]||W[1]!==f[1]||W[2]!==f[2])g.stencilFunc(W[0],W[1],W[2]),f[0]=W[0],f[1]=W[1],f[2]=W[2];T!==ma&&(g.stencilMask(T),H.stencil_mask=T);if(ba[0]!==G[0]||ba[1]!==G[1]||ba[2]!==G[2]||ba[3]!==G[3])g.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]),G[0]=ba[0],G[1]=ba[1],G[2]=ba[2],G[3]=ba[3];if(q[0]!==ca[0]||q[1]!==ca[1]||q[2]!==ca[2]||q[3]!==ca[3])g.stencilOpSeparate(q[0],
q[1],q[2],q[3]),ca[0]=q[0],ca[1]=q[1],ca[2]=q[2],ca[3]=q[3];if(D[0]!==C[0]||D[1]!==C[1]||D[2]!==C[2]||D[3]!==C[3])g.viewport(D[0],D[1],D[2],D[3]),C[0]=D[0],C[1]=D[1],C[2]=D[2],C[3]=D[3]},refresh:function(){var c,l,a,e,x,na,Cc,Y,fa,R,I,y,k,P,Q,za;H.dirty=!1;l=h.blend_enable;a=h.cull_enable;e=h.depth_enable;x=h.dither;na=h.polygonOffset_enable;Cc=h.sample_alpha;Y=h.sample_enable;fa=h.scissor_enable;R=h.stencil_enable;I=h.cull_face;y=h.depth_func;k=h.depth_mask;P=h.frontFace;Q=h.lineWidth;za=h.stencil_mask;
(c=N.next)?g.bindFramebuffer(36160,c.framebuffer):g.bindFramebuffer(36160,null);N.cur=c;c=S[0];c.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);c=S[1];c.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(1),
g.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);c=S[2];c.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);c=S[3];c.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,c.x,c.y,c.z,
c.w),c.buffer=null);c=S[4];c.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);c=S[5];c.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);c=S[6];c.buffer?
(g.enableVertexAttribArray(6),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);c=S[7];c.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);c=S[8];c.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,
c.buffer.buffer),g.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);c=S[9];c.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);c=S[10];c.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(10,
c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);c=S[11];c.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);c=S[12];c.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(12,c.size,c.type,c.normalized,
c.stride,c.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);c=S[13];c.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);c=S[14];c.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(14),
g.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);c=S[15];c.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,c.buffer.buffer),g.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);p.currentVAO=null;p.setVAO(p.targetVAO);l?g.enable(3042):g.disable(3042);H.blend_enable=l;a?g.enable(2884):g.disable(2884);H.cull_enable=a;e?g.enable(2929):g.disable(2929);H.depth_enable=e;x?g.enable(3024):g.disable(3024);
H.dither=x;na?g.enable(32823):g.disable(32823);H.polygonOffset_enable=na;Cc?g.enable(32926):g.disable(32926);H.sample_alpha=Cc;Y?g.enable(32928):g.disable(32928);H.sample_enable=Y;fa?g.enable(3089):g.disable(3089);H.scissor_enable=fa;R?g.enable(2960):g.disable(2960);H.stencil_enable=R;g.blendColor(d[0],d[1],d[2],d[3]);E[0]=d[0];E[1]=d[1];E[2]=d[2];E[3]=d[3];g.blendEquationSeparate(J[0],J[1]);M[0]=J[0];M[1]=J[1];g.blendFuncSeparate(U[0],U[1],U[2],U[3]);v[0]=U[0];v[1]=U[1];v[2]=U[2];v[3]=U[3];g.colorMask(A[0],
A[1],A[2],A[3]);F[0]=A[0];F[1]=A[1];F[2]=A[2];F[3]=A[3];g.cullFace(I);H.cull_face=I;g.depthFunc(y);H.depth_func=y;g.depthMask(k);H.depth_mask=k;g.depthRange(Z[0],Z[1]);t[0]=Z[0];t[1]=Z[1];g.frontFace(P);H.frontFace=P;g.lineWidth(Q);H.lineWidth=Q;g.polygonOffset(V[0],V[1]);m[0]=V[0];m[1]=V[1];g.sampleCoverage(u[0],u[1]);ja[0]=u[0];ja[1]=u[1];g.scissor(b[0],b[1],b[2],b[3]);z[0]=b[0];z[1]=b[1];z[2]=b[2];z[3]=b[3];g.stencilFunc(W[0],W[1],W[2]);f[0]=W[0];f[1]=W[1];f[2]=W[2];g.stencilMask(za);H.stencil_mask=
za;g.stencilOpSeparate(ba[0],ba[1],ba[2],ba[3]);G[0]=ba[0];G[1]=ba[1];G[2]=ba[2];G[3]=ba[3];g.stencilOpSeparate(q[0],q[1],q[2],q[3]);ca[0]=q[0];ca[1]=q[1];ca[2]=q[2];ca[3]=q[3];g.viewport(D[0],D[1],D[2],D[3]);C[0]=D[0];C[1]=D[1];C[2]=D[2];C[3]=D[3]}}},$3:function(e,S,H,N){var g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na;g=e.context;h=e.current;p=e.framebuffer;d=e.gl;E=e.next;J=e.shader;M=e.vao;U=E.blend_color;v=h.blend_color;A=E.blend_equation;F=h.blend_equation;Z=E.blend_func;
t=h.blend_func;V=E.colorMask;m=h.colorMask;u=E.depth_range;ja=h.depth_range;b=E.polygonOffset_offset;z=h.polygonOffset_offset;W=E.sample_coverage;f=h.sample_coverage;ba=E.scissor_box;G=h.scissor_box;q=E.stencil_func;ca=h.stencil_func;D=E.stencil_opBack;C=h.stencil_opBack;c=E.stencil_opFront;l=h.stencil_opFront;a=E.viewport;wa=h.viewport;x={};na={};return{batch:function(e,g){var x,R,I,y,k;x=p.next;x!==p.cur&&(x?d.bindFramebuffer(36160,x.framebuffer):d.bindFramebuffer(36160,null),p.cur=x);if(h.dirty){x=
E.dither;x!==h.dither&&(x?d.enable(3024):d.disable(3024),h.dither=x);x=E.blend_enable;x!==h.blend_enable&&(x?d.enable(3042):d.disable(3042),h.blend_enable=x);x=U[0];I=U[1];y=U[2];k=U[3];if(x!==v[0]||I!==v[1]||y!==v[2]||k!==v[3])d.blendColor(x,I,y,k),v[0]=x,v[1]=I,v[2]=y,v[3]=k;x=A[0];I=A[1];if(x!==F[0]||I!==F[1])d.blendEquationSeparate(x,I),F[0]=x,F[1]=I;x=Z[0];I=Z[1];y=Z[2];k=Z[3];if(x!==t[0]||I!==t[1]||y!==t[2]||k!==t[3])d.blendFuncSeparate(x,I,y,k),t[0]=x,t[1]=I,t[2]=y,t[3]=k;x=E.depth_enable;
x!==h.depth_enable&&(x?d.enable(2929):d.disable(2929),h.depth_enable=x);x=E.depth_func;x!==h.depth_func&&(d.depthFunc(x),h.depth_func=x);x=u[0];I=u[1];if(x!==ja[0]||I!==ja[1])d.depthRange(x,I),ja[0]=x,ja[1]=I;x=E.depth_mask;x!==h.depth_mask&&(d.depthMask(x),h.depth_mask=x);x=V[0];I=V[1];y=V[2];k=V[3];if(x!==m[0]||I!==m[1]||y!==m[2]||k!==m[3])d.colorMask(x,I,y,k),m[0]=x,m[1]=I,m[2]=y,m[3]=k;x=E.cull_enable;x!==h.cull_enable&&(x?d.enable(2884):d.disable(2884),h.cull_enable=x);x=E.cull_face;x!==h.cull_face&&
(d.cullFace(x),h.cull_face=x);x=E.frontFace;x!==h.frontFace&&(d.frontFace(x),h.frontFace=x);x=E.lineWidth;x!==h.lineWidth&&(d.lineWidth(x),h.lineWidth=x);x=E.polygonOffset_enable;x!==h.polygonOffset_enable&&(x?d.enable(32823):d.disable(32823),h.polygonOffset_enable=x);x=b[0];I=b[1];if(x!==z[0]||I!==z[1])d.polygonOffset(x,I),z[0]=x,z[1]=I;x=E.sample_alpha;x!==h.sample_alpha&&(x?d.enable(32926):d.disable(32926),h.sample_alpha=x);x=E.sample_enable;x!==h.sample_enable&&(x?d.enable(32928):d.disable(32928),
h.sample_enable=x);x=W[0];I=W[1];if(x!==f[0]||I!==f[1])d.sampleCoverage(x,I),f[0]=x,f[1]=I;x=E.stencil_enable;x!==h.stencil_enable&&(x?d.enable(2960):d.disable(2960),h.stencil_enable=x);x=E.stencil_mask;x!==h.stencil_mask&&(d.stencilMask(x),h.stencil_mask=x);x=q[0];I=q[1];y=q[2];if(x!==ca[0]||I!==ca[1]||y!==ca[2])d.stencilFunc(x,I,y),ca[0]=x,ca[1]=I,ca[2]=y;x=c[0];I=c[1];y=c[2];k=c[3];if(x!==l[0]||I!==l[1]||y!==l[2]||k!==l[3])d.stencilOpSeparate(x,I,y,k),l[0]=x,l[1]=I,l[2]=y,l[3]=k;x=D[0];I=D[1];
y=D[2];k=D[3];if(x!==C[0]||I!==C[1]||y!==C[2]||k!==C[3])d.stencilOpSeparate(x,I,y,k),C[0]=x,C[1]=I,C[2]=y,C[3]=k;x=E.scissor_enable;x!==h.scissor_enable&&(x?d.enable(3089):d.disable(3089),h.scissor_enable=x);x=ba[0];I=ba[1];y=ba[2];k=ba[3];if(x!==G[0]||I!==G[1]||y!==G[2]||k!==G[3])d.scissor(x,I,y,k),G[0]=x,G[1]=I,G[2]=y,G[3]=k;x=a[0];I=a[1];y=a[2];k=a[3];if(x!==wa[0]||I!==wa[1]||y!==wa[2]||k!==wa[3])d.viewport(x,I,y,k),wa[0]=x,wa[1]=I,wa[2]=y,wa[3]=k;h.dirty=!1}if(x=h.profile)R=performance.now(),
S.count+=g;I=J.program(J.vert,J.frag);d.useProgram(I.program);M.setVAO(null);y=I.id;(k=na[y])||(k=na[y]=N(I));k.call(this,e,g);M.setVAO(null);x&&(S.cpuTime+=performance.now()-R)},draw:function(e){var g,N,R,I,y;g=p.next;g!==p.cur&&(g?d.bindFramebuffer(36160,g.framebuffer):d.bindFramebuffer(36160,null),p.cur=g);if(h.dirty){g=E.dither;g!==h.dither&&(g?d.enable(3024):d.disable(3024),h.dither=g);g=E.blend_enable;g!==h.blend_enable&&(g?d.enable(3042):d.disable(3042),h.blend_enable=g);g=U[0];R=U[1];I=U[2];
y=U[3];if(g!==v[0]||R!==v[1]||I!==v[2]||y!==v[3])d.blendColor(g,R,I,y),v[0]=g,v[1]=R,v[2]=I,v[3]=y;g=A[0];R=A[1];if(g!==F[0]||R!==F[1])d.blendEquationSeparate(g,R),F[0]=g,F[1]=R;g=Z[0];R=Z[1];I=Z[2];y=Z[3];if(g!==t[0]||R!==t[1]||I!==t[2]||y!==t[3])d.blendFuncSeparate(g,R,I,y),t[0]=g,t[1]=R,t[2]=I,t[3]=y;g=E.depth_enable;g!==h.depth_enable&&(g?d.enable(2929):d.disable(2929),h.depth_enable=g);g=E.depth_func;g!==h.depth_func&&(d.depthFunc(g),h.depth_func=g);g=u[0];R=u[1];if(g!==ja[0]||R!==ja[1])d.depthRange(g,
R),ja[0]=g,ja[1]=R;g=E.depth_mask;g!==h.depth_mask&&(d.depthMask(g),h.depth_mask=g);g=V[0];R=V[1];I=V[2];y=V[3];if(g!==m[0]||R!==m[1]||I!==m[2]||y!==m[3])d.colorMask(g,R,I,y),m[0]=g,m[1]=R,m[2]=I,m[3]=y;g=E.cull_enable;g!==h.cull_enable&&(g?d.enable(2884):d.disable(2884),h.cull_enable=g);g=E.cull_face;g!==h.cull_face&&(d.cullFace(g),h.cull_face=g);g=E.frontFace;g!==h.frontFace&&(d.frontFace(g),h.frontFace=g);g=E.lineWidth;g!==h.lineWidth&&(d.lineWidth(g),h.lineWidth=g);g=E.polygonOffset_enable;g!==
h.polygonOffset_enable&&(g?d.enable(32823):d.disable(32823),h.polygonOffset_enable=g);g=b[0];R=b[1];if(g!==z[0]||R!==z[1])d.polygonOffset(g,R),z[0]=g,z[1]=R;g=E.sample_alpha;g!==h.sample_alpha&&(g?d.enable(32926):d.disable(32926),h.sample_alpha=g);g=E.sample_enable;g!==h.sample_enable&&(g?d.enable(32928):d.disable(32928),h.sample_enable=g);g=W[0];R=W[1];if(g!==f[0]||R!==f[1])d.sampleCoverage(g,R),f[0]=g,f[1]=R;g=E.stencil_enable;g!==h.stencil_enable&&(g?d.enable(2960):d.disable(2960),h.stencil_enable=
g);g=E.stencil_mask;g!==h.stencil_mask&&(d.stencilMask(g),h.stencil_mask=g);g=q[0];R=q[1];I=q[2];if(g!==ca[0]||R!==ca[1]||I!==ca[2])d.stencilFunc(g,R,I),ca[0]=g,ca[1]=R,ca[2]=I;g=c[0];R=c[1];I=c[2];y=c[3];if(g!==l[0]||R!==l[1]||I!==l[2]||y!==l[3])d.stencilOpSeparate(g,R,I,y),l[0]=g,l[1]=R,l[2]=I,l[3]=y;g=D[0];R=D[1];I=D[2];y=D[3];if(g!==C[0]||R!==C[1]||I!==C[2]||y!==C[3])d.stencilOpSeparate(g,R,I,y),C[0]=g,C[1]=R,C[2]=I,C[3]=y;g=E.scissor_enable;g!==h.scissor_enable&&(g?d.enable(3089):d.disable(3089),
h.scissor_enable=g);g=ba[0];R=ba[1];I=ba[2];y=ba[3];if(g!==G[0]||R!==G[1]||I!==G[2]||y!==G[3])d.scissor(g,R,I,y),G[0]=g,G[1]=R,G[2]=I,G[3]=y;g=a[0];R=a[1];I=a[2];y=a[3];if(g!==wa[0]||R!==wa[1]||I!==wa[2]||y!==wa[3])d.viewport(g,R,I,y),wa[0]=g,wa[1]=R,wa[2]=I,wa[3]=y;h.dirty=!1}if(g=h.profile)N=performance.now(),S.count++;R=J.program(J.vert,J.frag);d.useProgram(R.program);M.setVAO(null);I=R.id;(y=x[I])||(y=x[I]=H(R));y.call(this,e);M.setVAO(null);g&&(S.cpuTime+=performance.now()-N)},scope:function(a,
c,b){var d,f;if(d=h.profile)f=performance.now(),S.count++;c(g,a,b);d&&(S.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,Cc,Y,fa,R,I,y,k,P,Q,za,
oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,td,Gb,ha,L,sa,Ea,qa,ya,Ia){var la,aa,ta,Ka,Ba,lb,ea,zd,Zb,Ga,$b,Rb,X,Gd,ke,Wd,ze,se,Vd,ne,Ad,Dd,qd,ge,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va;la=e.attributes;aa=e.context;ta=e.current;Ka=e.draw;Ba=e.elements;lb=e.framebuffer;ea=e.gl;zd=e.next;Zb=e.shader;Ga=e.uniforms;$b=e.vao;Rb=zd.blend_color;X=ta.blend_color;Gd=zd.blend_equation;ke=ta.blend_equation;
Wd=zd.blend_func;ze=ta.blend_func;se=zd.colorMask;Vd=ta.colorMask;ne=zd.depth_range;Ad=ta.depth_range;Dd=zd.polygonOffset_offset;qd=ta.polygonOffset_offset;ge=zd.sample_coverage;be=ta.sample_coverage;Ce=zd.scissor_box;Ze=ta.scissor_box;Re=zd.stencil_func;Hd=ta.stencil_func;Ae=zd.stencil_opBack;te=ta.stencil_opBack;Zd=zd.stencil_opFront;Bd=ta.stencil_opFront;$d=zd.viewport;ld=ta.viewport;$c={};rd={};Lc=new Float32Array(16);nd=new Float32Array(16);Gc=new Float32Array(16);dd=new Float32Array(16);Pc=
new Float32Array(16);kd=new Float32Array(16);Ab=new Float32Array(16);Eb=new Float32Array(16);tc=new Float32Array(16);wb=new Float32Array(16);wc=new Float32Array(16);Bb=new Float32Array(16);Jc=new Float32Array(16);lc=new Float32Array(16);Hc=new Float32Array(16);Wc=new Float32Array(16);Vc=new Float32Array(16);Dc=new Float32Array(16);dc=new Float32Array(16);Ic=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);mc=new Float32Array(16);ec=new Float32Array(16);$a=new Float32Array(16);
Fc=new Float32Array(16);xb=new Float32Array(16);cb=new Float32Array(16);Mb=new Float32Array(16);ab=new Float32Array(16);nb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,c){var b,f,l,q;b=lb.next;b!==lb.cur&&(b?ea.bindFramebuffer(36160,b.framebuffer):ea.bindFramebuffer(36160,null),lb.cur=b);if(ta.dirty){var x,e,z,G,D,C,S,H,u,W,ba,ja,Ga,wa,na,ca,Rb,Zb,Ma,Eb,Pc,Ab,Bb,Pa,Ce;x=se[0];e=se[1];z=se[2];G=se[3];if(x!==Vd[0]||e!==Vd[1]||z!==Vd[2]||G!==Vd[3])ea.colorMask(x,e,z,G),Vd[0]=
x,Vd[1]=e,Vd[2]=z,Vd[3]=G;D=zd.frontFace;D!==ta.frontFace&&(ea.frontFace(D),ta.frontFace=D);C=zd.polygonOffset_enable;C!==ta.polygonOffset_enable&&(C?ea.enable(32823):ea.disable(32823),ta.polygonOffset_enable=C);S=Dd[0];H=Dd[1];if(S!==qd[0]||H!==qd[1])ea.polygonOffset(S,H),qd[0]=S,qd[1]=H;u=zd.sample_alpha;u!==ta.sample_alpha&&(u?ea.enable(32926):ea.disable(32926),ta.sample_alpha=u);W=zd.sample_enable;W!==ta.sample_enable&&(W?ea.enable(32928):ea.disable(32928),ta.sample_enable=W);ba=ge[0];ja=ge[1];
if(ba!==be[0]||ja!==be[1])ea.sampleCoverage(ba,ja),be[0]=ba,be[1]=ja;Ga=zd.stencil_enable;Ga!==ta.stencil_enable&&(Ga?ea.enable(2960):ea.disable(2960),ta.stencil_enable=Ga);wa=zd.stencil_mask;wa!==ta.stencil_mask&&(ea.stencilMask(wa),ta.stencil_mask=wa);na=Re[0];ca=Re[1];Rb=Re[2];if(na!==Hd[0]||ca!==Hd[1]||Rb!==Hd[2])ea.stencilFunc(na,ca,Rb),Hd[0]=na,Hd[1]=ca,Hd[2]=Rb;Zb=Zd[0];Ma=Zd[1];Eb=Zd[2];Pc=Zd[3];if(Zb!==Bd[0]||Ma!==Bd[1]||Eb!==Bd[2]||Pc!==Bd[3])ea.stencilOpSeparate(Zb,Ma,Eb,Pc),Bd[0]=Zb,Bd[1]=
Ma,Bd[2]=Eb,Bd[3]=Pc;Ab=Ae[0];Bb=Ae[1];Pa=Ae[2];Ce=Ae[3];if(Ab!==te[0]||Bb!==te[1]||Pa!==te[2]||Ce!==te[3])ea.stencilOpSeparate(Ab,Bb,Pa,Ce),te[0]=Ab,te[1]=Bb,te[2]=Pa,te[3]=Ce}ea.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;ea.disable(3042);ta.blend_enable=!1;ea.blendEquationSeparate(32774,32774);ke[0]=32774;ke[1]=32774;ea.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);ta.cull_enable=!0;ea.cullFace(1029);ta.cull_face=1029;ea.enable(2929);ta.depth_enable=!0;
ea.depthFunc(513);ta.depth_func=513;ea.depthMask(!0);ta.depth_mask=!0;ea.depthRange(0,1);Ad[0]=0;Ad[1]=1;ea.disable(3024);ta.dither=!1;ea.lineWidth(2);ta.lineWidth=2;ea.enable(3089);ta.scissor_enable=!0;f=ta.profile;ta.profile=!1;ea.useProgram(Cc.program);var Ra,wb,kd,Na,lc,Ya,Gc,Wd,kb,Oa,tc,Qa,tb,ub,Ta,mb,nd,Gd,Hc,bb,Jc,dd,Xa,Lc,zb,Za,ne,wc,Vb,Pb,$d,Qb,Wc;$b.setVAO(null);Ra=Aa.location;wb=la[Ra];wb.buffer||ea.enableVertexAttribArray(Ra);if(wb.type!==N.dtype||4!==wb.size||wb.buffer!==N||!1!==wb.normalized||
0!==wb.offset||0!==wb.stride)ea.bindBuffer(34962,N.buffer),ea.vertexAttribPointer(Ra,4,N.dtype,!1,0,0),wb.type=N.dtype,wb.size=4,wb.buffer=N,wb.normalized=!1,wb.offset=0,wb.stride=0;kd=Ha.location;Na=la[kd];Na.buffer||ea.enableVertexAttribArray(kd);if(Na.type!==g.dtype||4!==Na.size||Na.buffer!==g||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(kd,4,g.dtype,!1,0,0),Na.type=g.dtype,Na.size=4,Na.buffer=g,Na.normalized=!1,Na.offset=0,Na.stride=0;
lc=O.location;Ya=la[lc];Ya.buffer||ea.enableVertexAttribArray(lc);if(Ya.type!==h.dtype||4!==Ya.size||Ya.buffer!==h||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ea.bindBuffer(34962,h.buffer),ea.vertexAttribPointer(lc,4,h.dtype,!1,0,0),Ya.type=h.dtype,Ya.size=4,Ya.buffer=h,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Gc=ac.location;Wd=la[Gc];Wd.buffer||ea.enableVertexAttribArray(Gc);if(Wd.type!==p.dtype||4!==Wd.size||Wd.buffer!==p||!1!==Wd.normalized||0!==Wd.offset||0!==Wd.stride)ea.bindBuffer(34962,
p.buffer),ea.vertexAttribPointer(Gc,4,p.dtype,!1,0,0),Wd.type=p.dtype,Wd.size=4,Wd.buffer=p,Wd.normalized=!1,Wd.offset=0,Wd.stride=0;kb=Ua.location;Oa=la[kb];Oa.buffer||ea.enableVertexAttribArray(kb);if(Oa.type!==d.dtype||4!==Oa.size||Oa.buffer!==d||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ea.bindBuffer(34962,d.buffer),ea.vertexAttribPointer(kb,4,d.dtype,!1,0,0),Oa.type=d.dtype,Oa.size=4,Oa.buffer=d,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;tc=r.location;Qa=la[tc];Qa.buffer||ea.enableVertexAttribArray(tc);
if(Qa.type!==E.dtype||4!==Qa.size||Qa.buffer!==E||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)ea.bindBuffer(34962,E.buffer),ea.vertexAttribPointer(tc,4,E.dtype,!1,0,0),Qa.type=E.dtype,Qa.size=4,Qa.buffer=E,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;tb=n.location;ub=la[tb];ub.buffer||ea.enableVertexAttribArray(tb);if(ub.type!==J.dtype||4!==ub.size||ub.buffer!==J||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)ea.bindBuffer(34962,J.buffer),ea.vertexAttribPointer(tb,4,J.dtype,!1,0,0),ub.type=J.dtype,
ub.size=4,ub.buffer=J,ub.normalized=!1,ub.offset=0,ub.stride=0;Ta=B.location;mb=la[Ta];mb.buffer||ea.enableVertexAttribArray(Ta);if(mb.type!==M.dtype||4!==mb.size||mb.buffer!==M||!1!==mb.normalized||0!==mb.offset||0!==mb.stride)ea.bindBuffer(34962,M.buffer),ea.vertexAttribPointer(Ta,4,M.dtype,!1,0,0),mb.type=M.dtype,mb.size=4,mb.buffer=M,mb.normalized=!1,mb.offset=0,mb.stride=0;nd=ua.location;Gd=la[nd];Gd.buffer||ea.enableVertexAttribArray(nd);if(Gd.type!==U.dtype||4!==Gd.size||Gd.buffer!==U||!1!==
Gd.normalized||0!==Gd.offset||0!==Gd.stride)ea.bindBuffer(34962,U.buffer),ea.vertexAttribPointer(nd,4,U.dtype,!1,0,0),Gd.type=U.dtype,Gd.size=4,Gd.buffer=U,Gd.normalized=!1,Gd.offset=0,Gd.stride=0;Hc=va.location;bb=la[Hc];bb.buffer||ea.enableVertexAttribArray(Hc);if(bb.type!==v.dtype||4!==bb.size||bb.buffer!==v||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ea.bindBuffer(34962,v.buffer),ea.vertexAttribPointer(Hc,4,v.dtype,!1,0,0),bb.type=v.dtype,bb.size=4,bb.buffer=v,bb.normalized=!1,bb.offset=
0,bb.stride=0;Jc=td.location;dd=la[Jc];dd.buffer||ea.enableVertexAttribArray(Jc);if(dd.type!==A.dtype||4!==dd.size||dd.buffer!==A||!1!==dd.normalized||0!==dd.offset||0!==dd.stride)ea.bindBuffer(34962,A.buffer),ea.vertexAttribPointer(Jc,4,A.dtype,!1,0,0),dd.type=A.dtype,dd.size=4,dd.buffer=A,dd.normalized=!1,dd.offset=0,dd.stride=0;Xa=Gb.location;Lc=la[Xa];Lc.buffer||ea.enableVertexAttribArray(Xa);if(Lc.type!==F.dtype||4!==Lc.size||Lc.buffer!==F||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ea.bindBuffer(34962,
F.buffer),ea.vertexAttribPointer(Xa,4,F.dtype,!1,0,0),Lc.type=F.dtype,Lc.size=4,Lc.buffer=F,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;zb=ha.location;Za=la[zb];Za.buffer||ea.enableVertexAttribArray(zb);if(Za.type!==Z.dtype||4!==Za.size||Za.buffer!==Z||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ea.bindBuffer(34962,Z.buffer),ea.vertexAttribPointer(zb,4,Z.dtype,!1,0,0),Za.type=Z.dtype,Za.size=4,Za.buffer=Z,Za.normalized=!1,Za.offset=0,Za.stride=0;ne=L.location;wc=la[ne];wc.buffer||ea.enableVertexAttribArray(ne);
if(wc.type!==t.dtype||4!==wc.size||wc.buffer!==t||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)ea.bindBuffer(34962,t.buffer),ea.vertexAttribPointer(ne,4,t.dtype,!1,0,0),wc.type=t.dtype,wc.size=4,wc.buffer=t,wc.normalized=!1,wc.offset=0,wc.stride=0;Vb=sa.location;Pb=la[Vb];Pb.buffer||ea.enableVertexAttribArray(Vb);if(Pb.type!==V.dtype||4!==Pb.size||Pb.buffer!==V||!1!==Pb.normalized||0!==Pb.offset||0!==Pb.stride)ea.bindBuffer(34962,V.buffer),ea.vertexAttribPointer(Vb,4,V.dtype,!1,0,0),Pb.type=V.dtype,
Pb.size=4,Pb.buffer=V,Pb.normalized=!1,Pb.offset=0,Pb.stride=0;$d=fa.location;Qb=la[$d];Qb.buffer||ea.enableVertexAttribArray($d);if(Qb.type!==m.dtype||4!==Qb.size||Qb.buffer!==m||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ea.bindBuffer(34962,m.buffer),ea.vertexAttribPointer($d,4,m.dtype,!1,0,0),Qb.type=m.dtype,Qb.size=4,Qb.buffer=m,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;ea.uniform1i(Ea.location,Y.bind());(Wc=Ka.elements)?ea.bindBuffer(34963,Wc.buffer.buffer):$b.currentVAO&&(Wc=Ba.getElements($b.currentVAO.elements))&&
ea.bindBuffer(34963,Wc.buffer.buffer);for(l=0;l<c;++l){q=a[l];var Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,ia,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,Fa,ue,je,ie,he,ve,ee;$c.height=q.viewportHeight;$c.width=q.viewportWidth;$c.x=q.viewportX;$c.y=q.viewportY;Ec=$c.x|0;Ed=$c.y|0;Nc="width"in $c?$c.width|0:aa.framebufferWidth-Ec;ed="height"in $c?$c.height|0:aa.framebufferHeight-Ed;od=aa.viewportWidth;aa.viewportWidth=Nc;nc=aa.viewportHeight;
aa.viewportHeight=ed;ea.viewport(Ec,Ed,Nc,ed);ld[0]=Ec;ld[1]=Ed;ld[2]=Nc;ld[3]=ed;rd.height=q.scissorHeight;rd.width=q.scissorWidth;rd.x=q.scissorX;rd.y=q.scissorY;vc=rd.x|0;gc=rd.y|0;db="width"in rd?rd.width|0:aa.framebufferWidth-vc;rc="height"in rd?rd.height|0:aa.framebufferHeight-gc;ea.scissor(vc,gc,db,rc);Ze[0]=vc;Ze[1]=gc;Ze[2]=db;Ze[3]=rc;Sb=q.dim0A;ea.uniformMatrix4fv(I.location,!1,Array.isArray(Sb)||Sb instanceof Float32Array?Sb:(Vc[0]=Sb[0],Vc[1]=Sb[1],Vc[2]=Sb[2],Vc[3]=Sb[3],Vc[4]=Sb[4],
Vc[5]=Sb[5],Vc[6]=Sb[6],Vc[7]=Sb[7],Vc[8]=Sb[8],Vc[9]=Sb[9],Vc[10]=Sb[10],Vc[11]=Sb[11],Vc[12]=Sb[12],Vc[13]=Sb[13],Vc[14]=Sb[14],Vc[15]=Sb[15],Vc));Wb=q.dim1A;ea.uniformMatrix4fv(Q.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:(Dc[0]=Wb[0],Dc[1]=Wb[1],Dc[2]=Wb[2],Dc[3]=Wb[3],Dc[4]=Wb[4],Dc[5]=Wb[5],Dc[6]=Wb[6],Dc[7]=Wb[7],Dc[8]=Wb[8],Dc[9]=Wb[9],Dc[10]=Wb[10],Dc[11]=Wb[11],Dc[12]=Wb[12],Dc[13]=Wb[13],Dc[14]=Wb[14],Dc[15]=Wb[15],Dc));cc=q.dim0B;ea.uniformMatrix4fv(y.location,!1,Array.isArray(cc)||
cc instanceof Float32Array?cc:(dc[0]=cc[0],dc[1]=cc[1],dc[2]=cc[2],dc[3]=cc[3],dc[4]=cc[4],dc[5]=cc[5],dc[6]=cc[6],dc[7]=cc[7],dc[8]=cc[8],dc[9]=cc[9],dc[10]=cc[10],dc[11]=cc[11],dc[12]=cc[12],dc[13]=cc[13],dc[14]=cc[14],dc[15]=cc[15],dc));hc=q.dim1B;ea.uniformMatrix4fv(za.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Ic[0]=hc[0],Ic[1]=hc[1],Ic[2]=hc[2],Ic[3]=hc[3],Ic[4]=hc[4],Ic[5]=hc[5],Ic[6]=hc[6],Ic[7]=hc[7],Ic[8]=hc[8],Ic[9]=hc[9],Ic[10]=hc[10],Ic[11]=hc[11],Ic[12]=hc[12],Ic[13]=
hc[13],Ic[14]=hc[14],Ic[15]=hc[15],Ic));xc=q.dim0C;ea.uniformMatrix4fv(k.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));Ac=q.dim1C;ea.uniformMatrix4fv(oa.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(pc[0]=Ac[0],pc[1]=Ac[1],pc[2]=Ac[2],pc[3]=Ac[3],pc[4]=Ac[4],pc[5]=
Ac[5],pc[6]=Ac[6],pc[7]=Ac[7],pc[8]=Ac[8],pc[9]=Ac[9],pc[10]=Ac[10],pc[11]=Ac[11],pc[12]=Ac[12],pc[13]=Ac[13],pc[14]=Ac[14],pc[15]=Ac[15],pc));ad=q.dim0D;ea.uniformMatrix4fv(P.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(mc[0]=ad[0],mc[1]=ad[1],mc[2]=ad[2],mc[3]=ad[3],mc[4]=ad[4],mc[5]=ad[5],mc[6]=ad[6],mc[7]=ad[7],mc[8]=ad[8],mc[9]=ad[9],mc[10]=ad[10],mc[11]=ad[11],mc[12]=ad[12],mc[13]=ad[13],mc[14]=ad[14],mc[15]=ad[15],mc));Qc=q.dim1D;ea.uniformMatrix4fv(w.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(ec[0]=Qc[0],ec[1]=Qc[1],ec[2]=Qc[2],ec[3]=Qc[3],ec[4]=Qc[4],ec[5]=Qc[5],ec[6]=Qc[6],ec[7]=Qc[7],ec[8]=Qc[8],ec[9]=Qc[9],ec[10]=Qc[10],ec[11]=Qc[11],ec[12]=Qc[12],ec[13]=Qc[13],ec[14]=Qc[14],ec[15]=Qc[15],ec));Rc=q.loA;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:($a[0]=Rc[0],$a[1]=Rc[1],$a[2]=Rc[2],$a[3]=Rc[3],$a[4]=Rc[4],$a[5]=Rc[5],$a[6]=Rc[6],$a[7]=Rc[7],$a[8]=Rc[8],$a[9]=Rc[9],$a[10]=Rc[10],$a[11]=Rc[11],$a[12]=Rc[12],$a[13]=
Rc[13],$a[14]=Rc[14],$a[15]=Rc[15],$a));Sc=q.hiA;ea.uniformMatrix4fv(da.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(Fc[0]=Sc[0],Fc[1]=Sc[1],Fc[2]=Sc[2],Fc[3]=Sc[3],Fc[4]=Sc[4],Fc[5]=Sc[5],Fc[6]=Sc[6],Fc[7]=Sc[7],Fc[8]=Sc[8],Fc[9]=Sc[9],Fc[10]=Sc[10],Fc[11]=Sc[11],Fc[12]=Sc[12],Fc[13]=Sc[13],Fc[14]=Sc[14],Fc[15]=Sc[15],Fc));Xc=q.loB;ea.uniformMatrix4fv(xa.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(xb[0]=Xc[0],xb[1]=Xc[1],xb[2]=Xc[2],xb[3]=Xc[3],xb[4]=Xc[4],xb[5]=
Xc[5],xb[6]=Xc[6],xb[7]=Xc[7],xb[8]=Xc[8],xb[9]=Xc[9],xb[10]=Xc[10],xb[11]=Xc[11],xb[12]=Xc[12],xb[13]=Xc[13],xb[14]=Xc[14],xb[15]=Xc[15],xb));wd=q.hiB;ea.uniformMatrix4fv(T.location,!1,Array.isArray(wd)||wd instanceof Float32Array?wd:(cb[0]=wd[0],cb[1]=wd[1],cb[2]=wd[2],cb[3]=wd[3],cb[4]=wd[4],cb[5]=wd[5],cb[6]=wd[6],cb[7]=wd[7],cb[8]=wd[8],cb[9]=wd[9],cb[10]=wd[10],cb[11]=wd[11],cb[12]=wd[12],cb[13]=wd[13],cb[14]=wd[14],cb[15]=wd[15],cb));bd=q.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(bd)||
bd instanceof Float32Array?bd:(Mb[0]=bd[0],Mb[1]=bd[1],Mb[2]=bd[2],Mb[3]=bd[3],Mb[4]=bd[4],Mb[5]=bd[5],Mb[6]=bd[6],Mb[7]=bd[7],Mb[8]=bd[8],Mb[9]=bd[9],Mb[10]=bd[10],Mb[11]=bd[11],Mb[12]=bd[12],Mb[13]=bd[13],Mb[14]=bd[14],Mb[15]=bd[15],Mb));Yc=q.hiC;ea.uniformMatrix4fv(ma.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(ab[0]=Yc[0],ab[1]=Yc[1],ab[2]=Yc[2],ab[3]=Yc[3],ab[4]=Yc[4],ab[5]=Yc[5],ab[6]=Yc[6],ab[7]=Yc[7],ab[8]=Yc[8],ab[9]=Yc[9],ab[10]=Yc[10],ab[11]=Yc[11],ab[12]=Yc[12],ab[13]=
Yc[13],ab[14]=Yc[14],ab[15]=Yc[15],ab));kc=q.loD;ea.uniformMatrix4fv(Da.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(nb[0]=kc[0],nb[1]=kc[1],nb[2]=kc[2],nb[3]=kc[3],nb[4]=kc[4],nb[5]=kc[5],nb[6]=kc[6],nb[7]=kc[7],nb[8]=kc[8],nb[9]=kc[9],nb[10]=kc[10],nb[11]=kc[11],nb[12]=kc[12],nb[13]=kc[13],nb[14]=kc[14],nb[15]=kc[15],nb));bc=q.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(bc)||bc instanceof Float32Array?bc:(Va[0]=bc[0],Va[1]=bc[1],Va[2]=bc[2],Va[3]=bc[3],Va[4]=bc[4],Va[5]=
bc[5],Va[6]=bc[6],Va[7]=bc[7],Va[8]=bc[8],Va[9]=bc[9],Va[10]=bc[10],Va[11]=bc[11],Va[12]=bc[12],Va[13]=bc[13],Va[14]=bc[14],Va[15]=bc[15],Va));Zc=q.resolution;Uc=Zc[0];yc=Zc[1];l&&cd===Uc&&hd===yc||(cd=Uc,hd=yc,ea.uniform2f(qa.location,Uc,yc));pd=q.viewBoxPos;ye=pd[0];id=pd[1];l&&ia===ye&&mf===id||(ia=ye,mf=id,ea.uniform2f(ya.location,ye,id));Nd=q.viewBoxSize;Xd=Nd[0];Od=Nd[1];l&&de===Xd&&Kd===Od||(de=Xd,Kd=Od,ea.uniform2f(Ia.location,Xd,Od));Id=q.maskHeight;l&&md===Id||(md=Id,ea.uniform1f(ka.location,
Id));Tc=q.drwLayer;l&&ud===Tc||(ud=Tc,ea.uniform1f(K.location,Tc));sd=q.contextColor;jd=sd[0];Cd=sd[1];oe=sd[2];ue=sd[3];l&&xd===jd&&Fd===Cd&&Fa===oe&&je===ue||(xd=jd,Fd=Cd,Fa=oe,je=ue,ea.uniform4f(R.location,jd,Cd,oe,ue));(ie=q.maskTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);he=ie._texture;ea.uniform1i(pa.location,he.bind());ve=q.offset;if(ee=q.count)Wc?ea.drawElements(1,ee,Wc.type,ve<<(Wc.type-5121>>1)):ea.drawArrays(1,ve,ee),aa.viewportWidth=od,aa.viewportHeight=nc,he.unbind()}Y.unbind();
ta.dirty=!0;$b.setVAO(null);ta.profile=f},draw:function(a){var c,b,f,l,q,x;c=lb.next;c!==lb.cur&&(c?ea.bindFramebuffer(36160,c.framebuffer):ea.bindFramebuffer(36160,null),lb.cur=c);if(ta.dirty){c=se[0];x=se[1];b=se[2];f=se[3];if(c!==Vd[0]||x!==Vd[1]||b!==Vd[2]||f!==Vd[3])ea.colorMask(c,x,b,f),Vd[0]=c,Vd[1]=x,Vd[2]=b,Vd[3]=f;c=zd.frontFace;c!==ta.frontFace&&(ea.frontFace(c),ta.frontFace=c);c=zd.polygonOffset_enable;c!==ta.polygonOffset_enable&&(c?ea.enable(32823):ea.disable(32823),ta.polygonOffset_enable=
c);c=Dd[0];x=Dd[1];if(c!==qd[0]||x!==qd[1])ea.polygonOffset(c,x),qd[0]=c,qd[1]=x;c=zd.sample_alpha;c!==ta.sample_alpha&&(c?ea.enable(32926):ea.disable(32926),ta.sample_alpha=c);c=zd.sample_enable;c!==ta.sample_enable&&(c?ea.enable(32928):ea.disable(32928),ta.sample_enable=c);c=ge[0];x=ge[1];if(c!==be[0]||x!==be[1])ea.sampleCoverage(c,x),be[0]=c,be[1]=x;c=zd.stencil_enable;c!==ta.stencil_enable&&(c?ea.enable(2960):ea.disable(2960),ta.stencil_enable=c);c=zd.stencil_mask;c!==ta.stencil_mask&&(ea.stencilMask(c),
ta.stencil_mask=c);c=Re[0];x=Re[1];b=Re[2];if(c!==Hd[0]||x!==Hd[1]||b!==Hd[2])ea.stencilFunc(c,x,b),Hd[0]=c,Hd[1]=x,Hd[2]=b;c=Zd[0];x=Zd[1];b=Zd[2];f=Zd[3];if(c!==Bd[0]||x!==Bd[1]||b!==Bd[2]||f!==Bd[3])ea.stencilOpSeparate(c,x,b,f),Bd[0]=c,Bd[1]=x,Bd[2]=b,Bd[3]=f;c=Ae[0];x=Ae[1];b=Ae[2];f=Ae[3];if(c!==te[0]||x!==te[1]||b!==te[2]||f!==te[3])ea.stencilOpSeparate(c,x,b,f),te[0]=c,te[1]=x,te[2]=b,te[3]=f}$c.height=a.viewportHeight;$c.width=a.viewportWidth;$c.x=a.viewportX;$c.y=a.viewportY;b=$c.x|0;f=
$c.y|0;l="width"in $c?$c.width|0:aa.framebufferWidth-b;q="height"in $c?$c.height|0:aa.framebufferHeight-f;c=aa.viewportWidth;aa.viewportWidth=l;x=aa.viewportHeight;aa.viewportHeight=q;ea.viewport(b,f,l,q);ld[0]=b;ld[1]=f;ld[2]=l;ld[3]=q;ea.blendColor(0,0,0,0);X[0]=0;X[1]=0;X[2]=0;X[3]=0;ea.disable(3042);ta.blend_enable=!1;ea.blendEquationSeparate(32774,32774);ke[0]=32774;ke[1]=32774;ea.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ea.enable(2884);ta.cull_enable=!0;ea.cullFace(1029);
ta.cull_face=1029;ea.enable(2929);ta.depth_enable=!0;ea.depthFunc(513);ta.depth_func=513;ea.depthMask(!0);ta.depth_mask=!0;ea.depthRange(0,1);Ad[0]=0;Ad[1]=1;ea.disable(3024);ta.dither=!1;ea.lineWidth(2);ta.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;b=rd.x|0;f=rd.y|0;l="width"in rd?rd.width|0:aa.framebufferWidth-b;q="height"in rd?rd.height|0:aa.framebufferHeight-f;ea.scissor(b,f,l,q);Ze[0]=b;Ze[1]=f;Ze[2]=l;Ze[3]=q;ea.enable(3089);ta.scissor_enable=
!0;b=ta.profile;ta.profile=!1;ea.useProgram(H.program);$b.setVAO(null);f=Aa.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==N.dtype||4!==l.size||l.buffer!==N||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,N.buffer),ea.vertexAttribPointer(f,4,N.dtype,!1,0,0),l.type=N.dtype,l.size=4,l.buffer=N,l.normalized=!1,l.offset=0,l.stride=0;f=Ha.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==g.dtype||4!==l.size||l.buffer!==g||!1!==l.normalized||0!==
l.offset||0!==l.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(f,4,g.dtype,!1,0,0),l.type=g.dtype,l.size=4,l.buffer=g,l.normalized=!1,l.offset=0,l.stride=0;f=O.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==h.dtype||4!==l.size||l.buffer!==h||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,h.buffer),ea.vertexAttribPointer(f,4,h.dtype,!1,0,0),l.type=h.dtype,l.size=4,l.buffer=h,l.normalized=!1,l.offset=0,l.stride=0;f=ac.location;l=la[f];l.buffer||
ea.enableVertexAttribArray(f);if(l.type!==p.dtype||4!==l.size||l.buffer!==p||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,p.buffer),ea.vertexAttribPointer(f,4,p.dtype,!1,0,0),l.type=p.dtype,l.size=4,l.buffer=p,l.normalized=!1,l.offset=0,l.stride=0;f=Ua.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==d.dtype||4!==l.size||l.buffer!==d||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,d.buffer),ea.vertexAttribPointer(f,4,d.dtype,!1,0,0),l.type=
d.dtype,l.size=4,l.buffer=d,l.normalized=!1,l.offset=0,l.stride=0;f=r.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==E.dtype||4!==l.size||l.buffer!==E||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,E.buffer),ea.vertexAttribPointer(f,4,E.dtype,!1,0,0),l.type=E.dtype,l.size=4,l.buffer=E,l.normalized=!1,l.offset=0,l.stride=0;f=n.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==J.dtype||4!==l.size||l.buffer!==J||!1!==l.normalized||0!==l.offset||
0!==l.stride)ea.bindBuffer(34962,J.buffer),ea.vertexAttribPointer(f,4,J.dtype,!1,0,0),l.type=J.dtype,l.size=4,l.buffer=J,l.normalized=!1,l.offset=0,l.stride=0;f=B.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==M.dtype||4!==l.size||l.buffer!==M||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,M.buffer),ea.vertexAttribPointer(f,4,M.dtype,!1,0,0),l.type=M.dtype,l.size=4,l.buffer=M,l.normalized=!1,l.offset=0,l.stride=0;f=ua.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);
if(l.type!==U.dtype||4!==l.size||l.buffer!==U||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,U.buffer),ea.vertexAttribPointer(f,4,U.dtype,!1,0,0),l.type=U.dtype,l.size=4,l.buffer=U,l.normalized=!1,l.offset=0,l.stride=0;f=va.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==v.dtype||4!==l.size||l.buffer!==v||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,v.buffer),ea.vertexAttribPointer(f,4,v.dtype,!1,0,0),l.type=v.dtype,l.size=4,l.buffer=v,
l.normalized=!1,l.offset=0,l.stride=0;f=td.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==A.dtype||4!==l.size||l.buffer!==A||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,A.buffer),ea.vertexAttribPointer(f,4,A.dtype,!1,0,0),l.type=A.dtype,l.size=4,l.buffer=A,l.normalized=!1,l.offset=0,l.stride=0;f=Gb.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==F.dtype||4!==l.size||l.buffer!==F||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,
F.buffer),ea.vertexAttribPointer(f,4,F.dtype,!1,0,0),l.type=F.dtype,l.size=4,l.buffer=F,l.normalized=!1,l.offset=0,l.stride=0;f=ha.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==Z.dtype||4!==l.size||l.buffer!==Z||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,Z.buffer),ea.vertexAttribPointer(f,4,Z.dtype,!1,0,0),l.type=Z.dtype,l.size=4,l.buffer=Z,l.normalized=!1,l.offset=0,l.stride=0;f=L.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==t.dtype||
4!==l.size||l.buffer!==t||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,t.buffer),ea.vertexAttribPointer(f,4,t.dtype,!1,0,0),l.type=t.dtype,l.size=4,l.buffer=t,l.normalized=!1,l.offset=0,l.stride=0;f=sa.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==V.dtype||4!==l.size||l.buffer!==V||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,V.buffer),ea.vertexAttribPointer(f,4,V.dtype,!1,0,0),l.type=V.dtype,l.size=4,l.buffer=V,l.normalized=!1,l.offset=
0,l.stride=0;f=fa.location;l=la[f];l.buffer||ea.enableVertexAttribArray(f);if(l.type!==m.dtype||4!==l.size||l.buffer!==m||!1!==l.normalized||0!==l.offset||0!==l.stride)ea.bindBuffer(34962,m.buffer),ea.vertexAttribPointer(f,4,m.dtype,!1,0,0),l.type=m.dtype,l.size=4,l.buffer=m,l.normalized=!1,l.offset=0,l.stride=0;f=a.dim0A;ea.uniformMatrix4fv(I.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],Lc[8]=f[8],
Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.dim1A;ea.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(nd[0]=f[0],nd[1]=f[1],nd[2]=f[2],nd[3]=f[3],nd[4]=f[4],nd[5]=f[5],nd[6]=f[6],nd[7]=f[7],nd[8]=f[8],nd[9]=f[9],nd[10]=f[10],nd[11]=f[11],nd[12]=f[12],nd[13]=f[13],nd[14]=f[14],nd[15]=f[15],nd));f=a.dim0B;ea.uniformMatrix4fv(y.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],Gc[2]=f[2],
Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=f[14],Gc[15]=f[15],Gc));f=a.dim1B;ea.uniformMatrix4fv(za.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(dd[0]=f[0],dd[1]=f[1],dd[2]=f[2],dd[3]=f[3],dd[4]=f[4],dd[5]=f[5],dd[6]=f[6],dd[7]=f[7],dd[8]=f[8],dd[9]=f[9],dd[10]=f[10],dd[11]=f[11],dd[12]=f[12],dd[13]=f[13],dd[14]=f[14],dd[15]=f[15],dd));f=a.dim0C;ea.uniformMatrix4fv(k.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Pc[0]=f[0],Pc[1]=f[1],Pc[2]=f[2],Pc[3]=f[3],Pc[4]=f[4],Pc[5]=f[5],Pc[6]=f[6],Pc[7]=f[7],Pc[8]=f[8],Pc[9]=f[9],Pc[10]=f[10],Pc[11]=f[11],Pc[12]=f[12],Pc[13]=f[13],Pc[14]=f[14],Pc[15]=f[15],Pc));f=a.dim1C;ea.uniformMatrix4fv(oa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(kd[0]=f[0],kd[1]=f[1],kd[2]=f[2],kd[3]=f[3],kd[4]=f[4],kd[5]=f[5],kd[6]=f[6],kd[7]=f[7],kd[8]=f[8],kd[9]=f[9],kd[10]=f[10],kd[11]=f[11],kd[12]=f[12],kd[13]=f[13],kd[14]=f[14],kd[15]=f[15],
kd));f=a.dim0D;ea.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ab[0]=f[0],Ab[1]=f[1],Ab[2]=f[2],Ab[3]=f[3],Ab[4]=f[4],Ab[5]=f[5],Ab[6]=f[6],Ab[7]=f[7],Ab[8]=f[8],Ab[9]=f[9],Ab[10]=f[10],Ab[11]=f[11],Ab[12]=f[12],Ab[13]=f[13],Ab[14]=f[14],Ab[15]=f[15],Ab));f=a.dim1D;ea.uniformMatrix4fv(w.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Eb[0]=f[0],Eb[1]=f[1],Eb[2]=f[2],Eb[3]=f[3],Eb[4]=f[4],Eb[5]=f[5],Eb[6]=f[6],Eb[7]=f[7],Eb[8]=f[8],Eb[9]=f[9],Eb[10]=f[10],
Eb[11]=f[11],Eb[12]=f[12],Eb[13]=f[13],Eb[14]=f[14],Eb[15]=f[15],Eb));f=a.loA;ea.uniformMatrix4fv(Ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(tc[0]=f[0],tc[1]=f[1],tc[2]=f[2],tc[3]=f[3],tc[4]=f[4],tc[5]=f[5],tc[6]=f[6],tc[7]=f[7],tc[8]=f[8],tc[9]=f[9],tc[10]=f[10],tc[11]=f[11],tc[12]=f[12],tc[13]=f[13],tc[14]=f[14],tc[15]=f[15],tc));f=a.hiA;ea.uniformMatrix4fv(da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wb[0]=f[0],wb[1]=f[1],wb[2]=f[2],wb[3]=f[3],wb[4]=f[4],wb[5]=
f[5],wb[6]=f[6],wb[7]=f[7],wb[8]=f[8],wb[9]=f[9],wb[10]=f[10],wb[11]=f[11],wb[12]=f[12],wb[13]=f[13],wb[14]=f[14],wb[15]=f[15],wb));f=a.loB;ea.uniformMatrix4fv(xa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wc[0]=f[0],wc[1]=f[1],wc[2]=f[2],wc[3]=f[3],wc[4]=f[4],wc[5]=f[5],wc[6]=f[6],wc[7]=f[7],wc[8]=f[8],wc[9]=f[9],wc[10]=f[10],wc[11]=f[11],wc[12]=f[12],wc[13]=f[13],wc[14]=f[14],wc[15]=f[15],wc));f=a.hiB;ea.uniformMatrix4fv(T.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.loC;ea.uniformMatrix4fv(ga.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;ea.uniformMatrix4fv(ma.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(lc[0]=f[0],lc[1]=f[1],lc[2]=f[2],lc[3]=f[3],lc[4]=f[4],lc[5]=f[5],lc[6]=f[6],lc[7]=f[7],lc[8]=f[8],lc[9]=f[9],lc[10]=f[10],lc[11]=f[11],lc[12]=f[12],lc[13]=f[13],lc[14]=f[14],lc[15]=f[15],lc));f=a.loD;ea.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=
f[14],Hc[15]=f[15],Hc));f=a.hiD;ea.uniformMatrix4fv(ra.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Wc[0]=f[0],Wc[1]=f[1],Wc[2]=f[2],Wc[3]=f[3],Wc[4]=f[4],Wc[5]=f[5],Wc[6]=f[6],Wc[7]=f[7],Wc[8]=f[8],Wc[9]=f[9],Wc[10]=f[10],Wc[11]=f[11],Wc[12]=f[12],Wc[13]=f[13],Wc[14]=f[14],Wc[15]=f[15],Wc));f=a.resolution;ea.uniform2f(qa.location,f[0],f[1]);f=a.viewBoxPos;ea.uniform2f(ya.location,f[0],f[1]);f=a.viewBoxSize;ea.uniform2f(Ia.location,f[0],f[1]);ea.uniform1f(ka.location,a.maskHeight);ea.uniform1f(K.location,
a.drwLayer);f=a.contextColor;ea.uniform4f(R.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;ea.uniform1i(pa.location,f.bind());ea.uniform1i(Ea.location,u.bind());(l=Ka.elements)?ea.bindBuffer(34963,l.buffer.buffer):$b.currentVAO&&(l=Ba.getElements($b.currentVAO.elements))&&ea.bindBuffer(34963,l.buffer.buffer);q=a.offset;if(a=a.count)l?ea.drawElements(1,a,l.type,q<<(l.type-5121>>1)):ea.drawArrays(1,q,a),ta.dirty=!0,$b.setVAO(null),aa.viewportWidth=
c,aa.viewportHeight=x,ta.profile=b,f.unbind(),u.unbind()},scope:function(k,n,r){var w,B,L,O,I,e,sa,Ha,Ea,K,y,T,ac,ga,qa,ha,R,la,Q,ua,P,da,ya,S,Ia,H,ea,za,u,ra,xa,ka,Y,Ua,fa,Aa,va,pa,Da,oa,ma,Gb,Ca,td,Ba,lb,Cc,$a,dc,Eb,Pc,Ab,ec,oc,wb,Bb,be,Ae,mc,$b,Zd,pc,cb,ab,Va,Ic,X,Re,kd,lc,nb,Gc,te,dd,Hd,Lc,tc,xb,wc,ke,nd,Hc,Dc,Jc,Vd,ld,Bd,Mb,Dd,Fc,Ze,Vc,Jf,Wc,ge,se,ze,qd,Ad,ia,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,Fa,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,
Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=k.viewportHeight;$c.width=k.viewportWidth;$c.x=k.viewportX;$c.y=k.viewportY;
w=$c.x|0;B=$c.y|0;L="width"in $c?$c.width|0:aa.framebufferWidth-w;O="height"in $c?$c.height|0:aa.framebufferHeight-B;I=aa.viewportWidth;aa.viewportWidth=L;e=aa.viewportHeight;aa.viewportHeight=O;sa=$d[0];$d[0]=w;Ha=$d[1];$d[1]=B;Ea=$d[2];$d[2]=L;K=$d[3];$d[3]=O;y=Rb[0];Rb[0]=0;T=Rb[1];Rb[1]=0;ac=Rb[2];Rb[2]=0;ga=Rb[3];Rb[3]=0;qa=zd.blend_enable;zd.blend_enable=!1;ha=Gd[0];Gd[0]=32774;R=Gd[1];Gd[1]=32774;la=Wd[0];Wd[0]=770;Q=Wd[1];Wd[1]=771;ua=Wd[2];Wd[2]=1;P=Wd[3];Wd[3]=1;da=zd.cull_enable;zd.cull_enable=
!0;ya=zd.cull_face;zd.cull_face=1029;S=zd.depth_enable;zd.depth_enable=!0;Ia=zd.depth_func;zd.depth_func=513;H=zd.depth_mask;zd.depth_mask=!0;ea=ne[0];ne[0]=0;za=ne[1];ne[1]=1;u=zd.dither;zd.dither=!1;ra=zd.lineWidth;zd.lineWidth=2;rd.height=k.scissorHeight;rd.width=k.scissorWidth;rd.x=k.scissorX;rd.y=k.scissorY;xa=rd.x|0;ka=rd.y|0;Y="width"in rd?rd.width|0:aa.framebufferWidth-xa;Ua="height"in rd?rd.height|0:aa.framebufferHeight-ka;fa=Ce[0];Ce[0]=xa;Aa=Ce[1];Ce[1]=ka;va=Ce[2];Ce[2]=Y;pa=Ce[3];Ce[3]=
Ua;Da=zd.scissor_enable;zd.scissor_enable=!0;oa=ta.profile;ta.profile=!1;ma=k.offset;Gb=Ka.offset;Ka.offset=ma;Ca=k.count;td=Ka.count;Ka.count=Ca;Ba=Ka.primitive;Ka.primitive=1;lb=k.contextColor;Cc=Ga[24];Ga[24]=lb;$a=k.dim0A;dc=Ga[3];Ga[3]=$a;Eb=k.dim0B;Pc=Ga[5];Ga[5]=Eb;Ab=k.dim0C;ec=Ga[7];Ga[7]=Ab;oc=k.dim0D;wb=Ga[9];Ga[9]=oc;Bb=k.dim1A;be=Ga[4];Ga[4]=Bb;Ae=k.dim1B;mc=Ga[6];Ga[6]=Ae;$b=k.dim1C;Zd=Ga[8];Ga[8]=$b;pc=k.dim1D;cb=Ga[10];Ga[10]=pc;ab=k.drwLayer;Va=Ga[23];Ga[23]=ab;Ic=k.hiA;X=Ga[12];
Ga[12]=Ic;Re=k.hiB;kd=Ga[14];Ga[14]=Re;lc=k.hiC;nb=Ga[16];Ga[16]=lc;Gc=k.hiD;te=Ga[18];Ga[18]=Gc;dd=k.loA;Hd=Ga[11];Ga[11]=dd;Lc=k.loB;tc=Ga[13];Ga[13]=Lc;xb=k.loC;wc=Ga[15];Ga[15]=xb;ke=k.loD;nd=Ga[17];Ga[17]=ke;Hc=k.maskHeight;Dc=Ga[22];Ga[22]=Hc;Jc=k.maskTexture;Vd=Ga[25];Ga[25]=Jc;ld=Ga[26];Ga[26]=ja;Bd=k.resolution;Mb=Ga[19];Ga[19]=Bd;Dd=k.viewBoxPos;Fc=Ga[20];Ga[20]=Dd;Ze=k.viewBoxSize;Vc=Ga[21];Ga[21]=Ze;Jf=b.buffer;b.buffer=m;Wc=b.divisor;b.divisor=0;ge=b.normalized;b.normalized=!1;se=b.offset;
b.offset=0;ze=b.size;b.size=0;qd=b.state;b.state=1;Ad=b.stride;b.stride=0;ia=b.type;b.type=m.dtype;Od=b.w;b.w=0;Kd=b.x;b.x=0;Id=b.y;b.y=0;md=b.z;b.z=0;Tc=z.buffer;z.buffer=N;ud=z.divisor;z.divisor=0;sd=z.normalized;z.normalized=!1;jd=z.offset;z.offset=0;xd=z.size;z.size=0;Cd=z.state;z.state=1;Fd=z.stride;z.stride=0;Fa=z.type;z.type=N.dtype;qe=z.w;z.w=0;ue=z.x;z.x=0;je=z.y;z.y=0;ie=z.z;z.z=0;he=W.buffer;W.buffer=g;ve=W.divisor;W.divisor=0;ee=W.normalized;W.normalized=!1;le=W.offset;W.offset=0;Oc=W.size;
W.size=0;fd=W.state;W.state=1;we=W.stride;W.stride=0;pe=W.type;W.type=g.dtype;Ld=W.w;W.w=0;Pd=W.x;W.x=0;Rd=W.y;W.y=0;Sd=W.z;W.z=0;me=f.buffer;f.buffer=h;He=f.divisor;f.divisor=0;Be=f.normalized;f.normalized=!1;re=f.offset;f.offset=0;Se=f.size;f.size=0;Te=f.state;f.state=1;Oe=f.stride;f.stride=0;xe=f.type;f.type=h.dtype;Fe=f.w;f.w=0;Ie=f.x;f.x=0;Je=f.y;f.y=0;Ke=f.z;f.z=0;Ge=ba.buffer;ba.buffer=p;Md=ba.divisor;ba.divisor=0;Yd=ba.normalized;ba.normalized=!1;ce=ba.offset;ba.offset=0;fe=ba.size;ba.size=
0;Le=ba.state;ba.state=1;Jd=ba.stride;ba.stride=0;Td=ba.type;ba.type=p.dtype;De=ba.w;ba.w=0;Me=ba.x;ba.x=0;bf=ba.y;ba.y=0;af=ba.z;ba.z=0;Ue=G.buffer;G.buffer=d;Pe=G.divisor;G.divisor=0;$e=G.normalized;G.normalized=!1;Ye=G.offset;G.offset=0;Ve=G.size;G.size=0;We=G.state;G.state=1;Ud=G.stride;G.stride=0;ae=G.type;G.type=d.dtype;Xe=G.w;G.w=0;hf=G.x;G.x=0;nf=G.y;G.y=0;ef=G.z;G.z=0;jf=q.buffer;q.buffer=E;kf=q.divisor;q.divisor=0;lf=q.normalized;q.normalized=!1;rf=q.offset;q.offset=0;of=q.size;q.size=0;
sf=q.state;q.state=1;Bf=q.stride;q.stride=0;Cf=q.type;q.type=E.dtype;Qe=q.w;q.w=0;Ee=q.x;q.x=0;pf=q.y;q.y=0;qf=q.z;q.z=0;Df=ca.buffer;ca.buffer=J;Gf=ca.divisor;ca.divisor=0;Af=ca.normalized;ca.normalized=!1;Ef=ca.offset;ca.offset=0;Ff=ca.size;ca.size=0;wf=ca.state;ca.state=1;xf=ca.stride;ca.stride=0;vf=ca.type;ca.type=J.dtype;yf=ca.w;ca.w=0;zf=ca.x;ca.x=0;If=ca.y;ca.y=0;Kf=ca.z;ca.z=0;Lf=D.buffer;D.buffer=M;Mf=D.divisor;D.divisor=0;tf=D.normalized;D.normalized=!1;Rf=D.offset;D.offset=0;Hf=D.size;
D.size=0;uf=D.state;D.state=1;dg=D.stride;D.stride=0;Sf=D.type;D.type=M.dtype;Tf=D.w;D.w=0;qg=D.x;D.x=0;ff=D.y;D.y=0;cf=D.z;D.z=0;Nf=C.buffer;C.buffer=U;Of=C.divisor;C.divisor=0;eg=C.normalized;C.normalized=!1;fg=C.offset;C.offset=0;gg=C.size;C.size=0;hg=C.state;C.state=1;ig=C.stride;C.stride=0;Wf=C.type;C.type=U.dtype;Uf=C.w;C.w=0;Xf=C.x;C.x=0;Yf=C.y;C.y=0;Zf=C.z;C.z=0;jg=c.buffer;c.buffer=v;rg=c.divisor;c.divisor=0;sg=c.normalized;c.normalized=!1;tg=c.offset;c.offset=0;ug=c.size;c.size=0;vg=c.state;
c.state=1;wg=c.stride;c.stride=0;xg=c.type;c.type=v.dtype;yg=c.w;c.w=0;zg=c.x;c.x=0;Ag=c.y;c.y=0;Bg=c.z;c.z=0;gf=l.buffer;l.buffer=A;df=l.divisor;l.divisor=0;Pf=l.normalized;l.normalized=!1;Qf=l.offset;l.offset=0;kg=l.size;l.size=0;lg=l.state;l.state=1;mg=l.stride;l.stride=0;ng=l.type;l.type=A.dtype;og=l.w;l.w=0;$f=l.x;l.x=0;Vf=l.y;l.y=0;ag=l.z;l.z=0;bg=a.buffer;a.buffer=F;cg=a.divisor;a.divisor=0;pg=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;
a.stride=0;Gg=a.type;a.type=F.dtype;Hg=a.w;a.w=0;Ig=a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=wa.buffer;wa.buffer=Z;Mg=wa.divisor;wa.divisor=0;Ng=wa.normalized;wa.normalized=!1;Og=wa.offset;wa.offset=0;Pg=wa.size;wa.size=0;Qg=wa.state;wa.state=1;Rg=wa.stride;wa.stride=0;Sg=wa.type;wa.type=Z.dtype;Tg=wa.w;wa.w=0;Ug=wa.x;wa.x=0;Vg=wa.y;wa.y=0;Wg=wa.z;wa.z=0;Xg=x.buffer;x.buffer=t;Yg=x.divisor;x.divisor=0;Zg=x.normalized;x.normalized=!1;$g=x.offset;x.offset=0;ah=x.size;x.size=0;bh=x.state;x.state=1;ch=
x.stride;x.stride=0;dh=x.type;x.type=t.dtype;eh=x.w;x.w=0;fh=x.x;x.x=0;gh=x.y;x.y=0;hh=x.z;x.z=0;ih=na.buffer;na.buffer=V;jh=na.divisor;na.divisor=0;kh=na.normalized;na.normalized=!1;lh=na.offset;na.offset=0;mh=na.size;na.size=0;nh=na.state;na.state=1;oh=na.stride;na.stride=0;ph=na.type;na.type=V.dtype;qh=na.w;na.w=0;rh=na.x;na.x=0;sh=na.y;na.y=0;th=na.z;na.z=0;uh=Zb.vert;Zb.vert=2;vh=Zb.frag;Zb.frag=1;ta.dirty=!0;n(aa,k,r);aa.viewportWidth=I;aa.viewportHeight=e;$d[0]=sa;$d[1]=Ha;$d[2]=Ea;$d[3]=K;
Rb[0]=y;Rb[1]=T;Rb[2]=ac;Rb[3]=ga;zd.blend_enable=qa;Gd[0]=ha;Gd[1]=R;Wd[0]=la;Wd[1]=Q;Wd[2]=ua;Wd[3]=P;zd.cull_enable=da;zd.cull_face=ya;zd.depth_enable=S;zd.depth_func=Ia;zd.depth_mask=H;ne[0]=ea;ne[1]=za;zd.dither=u;zd.lineWidth=ra;Ce[0]=fa;Ce[1]=Aa;Ce[2]=va;Ce[3]=pa;zd.scissor_enable=Da;ta.profile=oa;Ka.offset=Gb;Ka.count=td;Ka.primitive=Ba;Ga[24]=Cc;Ga[3]=dc;Ga[5]=Pc;Ga[7]=ec;Ga[9]=wb;Ga[4]=be;Ga[6]=mc;Ga[8]=Zd;Ga[10]=cb;Ga[23]=Va;Ga[12]=X;Ga[14]=kd;Ga[16]=nb;Ga[18]=te;Ga[11]=Hd;Ga[13]=tc;Ga[15]=
wc;Ga[17]=nd;Ga[22]=Dc;Ga[25]=Vd;Ga[26]=ld;Ga[19]=Mb;Ga[20]=Fc;Ga[21]=Vc;b.buffer=Jf;b.divisor=Wc;b.normalized=ge;b.offset=se;b.size=ze;b.state=qd;b.stride=Ad;b.type=ia;b.w=Od;b.x=Kd;b.y=Id;b.z=md;z.buffer=Tc;z.divisor=ud;z.normalized=sd;z.offset=jd;z.size=xd;z.state=Cd;z.stride=Fd;z.type=Fa;z.w=qe;z.x=ue;z.y=je;z.z=ie;W.buffer=he;W.divisor=ve;W.normalized=ee;W.offset=le;W.size=Oc;W.state=fd;W.stride=we;W.type=pe;W.w=Ld;W.x=Pd;W.y=Rd;W.z=Sd;f.buffer=me;f.divisor=He;f.normalized=Be;f.offset=re;f.size=
Se;f.state=Te;f.stride=Oe;f.type=xe;f.w=Fe;f.x=Ie;f.y=Je;f.z=Ke;ba.buffer=Ge;ba.divisor=Md;ba.normalized=Yd;ba.offset=ce;ba.size=fe;ba.state=Le;ba.stride=Jd;ba.type=Td;ba.w=De;ba.x=Me;ba.y=bf;ba.z=af;G.buffer=Ue;G.divisor=Pe;G.normalized=$e;G.offset=Ye;G.size=Ve;G.state=We;G.stride=Ud;G.type=ae;G.w=Xe;G.x=hf;G.y=nf;G.z=ef;q.buffer=jf;q.divisor=kf;q.normalized=lf;q.offset=rf;q.size=of;q.state=sf;q.stride=Bf;q.type=Cf;q.w=Qe;q.x=Ee;q.y=pf;q.z=qf;ca.buffer=Df;ca.divisor=Gf;ca.normalized=Af;ca.offset=
Ef;ca.size=Ff;ca.state=wf;ca.stride=xf;ca.type=vf;ca.w=yf;ca.x=zf;ca.y=If;ca.z=Kf;D.buffer=Lf;D.divisor=Mf;D.normalized=tf;D.offset=Rf;D.size=Hf;D.state=uf;D.stride=dg;D.type=Sf;D.w=Tf;D.x=qg;D.y=ff;D.z=cf;C.buffer=Nf;C.divisor=Of;C.normalized=eg;C.offset=fg;C.size=gg;C.state=hg;C.stride=ig;C.type=Wf;C.w=Uf;C.x=Xf;C.y=Yf;C.z=Zf;c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;l.buffer=gf;l.divisor=df;l.normalized=Pf;l.offset=
Qf;l.size=kg;l.state=lg;l.stride=mg;l.type=ng;l.w=og;l.x=$f;l.y=Vf;l.z=ag;a.buffer=bg;a.divisor=cg;a.normalized=pg;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;wa.buffer=Lg;wa.divisor=Mg;wa.normalized=Ng;wa.offset=Og;wa.size=Pg;wa.state=Qg;wa.stride=Rg;wa.type=Sg;wa.w=Tg;wa.x=Ug;wa.y=Vg;wa.z=Wg;x.buffer=Xg;x.divisor=Yg;x.normalized=Zg;x.offset=$g;x.size=ah;x.state=bh;x.stride=ch;x.type=dh;x.w=eh;x.x=fh;x.y=gh;x.z=hh;na.buffer=ih;na.divisor=jh;na.normalized=kh;
na.offset=lh;na.size=mh;na.state=nh;na.stride=oh;na.type=ph;na.w=qh;na.x=rh;na.y=sh;na.z=th;Zb.vert=uh;Zb.frag=vh;ta.dirty=!0}}},$1:function(e,S){var H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c;H=e.attributes;N=e.current;g=e.framebuffer;h=e.gl;p=e.next;d=e.vao;E=p.blend_color;J=N.blend_color;M=p.blend_equation;U=N.blend_equation;v=p.blend_func;A=N.blend_func;F=p.colorMask;Z=N.colorMask;t=p.depth_range;V=N.depth_range;m=p.polygonOffset_offset;u=N.polygonOffset_offset;ja=p.sample_coverage;
b=N.sample_coverage;z=p.scissor_box;W=N.scissor_box;f=p.stencil_func;ba=N.stencil_func;G=p.stencil_opBack;q=N.stencil_opBack;ca=p.stencil_opFront;D=N.stencil_opFront;C=p.viewport;c=N.viewport;return{poll:function(){var d,a,e,x,S,H,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra;N.dirty=!1;a=p.blend_enable;e=p.cull_enable;x=p.depth_enable;S=p.dither;H=p.polygonOffset_enable;Y=p.sample_alpha;fa=p.sample_enable;R=p.scissor_enable;I=p.stencil_enable;y=p.cull_face;k=N.cull_face;P=p.depth_func;Q=N.depth_func;za=
p.depth_mask;oa=N.depth_mask;w=p.frontFace;K=N.frontFace;da=p.lineWidth;T=N.lineWidth;ma=p.stencil_mask;ra=N.stencil_mask;d=g.next;d!==g.cur&&(d?h.bindFramebuffer(36160,d.framebuffer):h.bindFramebuffer(36160,null),g.cur=d);a!==N.blend_enable&&(a?h.enable(3042):h.disable(3042),N.blend_enable=a);e!==N.cull_enable&&(e?h.enable(2884):h.disable(2884),N.cull_enable=e);x!==N.depth_enable&&(x?h.enable(2929):h.disable(2929),N.depth_enable=x);S!==N.dither&&(S?h.enable(3024):h.disable(3024),N.dither=S);H!==
N.polygonOffset_enable&&(H?h.enable(32823):h.disable(32823),N.polygonOffset_enable=H);Y!==N.sample_alpha&&(Y?h.enable(32926):h.disable(32926),N.sample_alpha=Y);fa!==N.sample_enable&&(fa?h.enable(32928):h.disable(32928),N.sample_enable=fa);R!==N.scissor_enable&&(R?h.enable(3089):h.disable(3089),N.scissor_enable=R);I!==N.stencil_enable&&(I?h.enable(2960):h.disable(2960),N.stencil_enable=I);if(E[0]!==J[0]||E[1]!==J[1]||E[2]!==J[2]||E[3]!==J[3])h.blendColor(E[0],E[1],E[2],E[3]),J[0]=E[0],J[1]=E[1],J[2]=
E[2],J[3]=E[3];if(M[0]!==U[0]||M[1]!==U[1])h.blendEquationSeparate(M[0],M[1]),U[0]=M[0],U[1]=M[1];if(v[0]!==A[0]||v[1]!==A[1]||v[2]!==A[2]||v[3]!==A[3])h.blendFuncSeparate(v[0],v[1],v[2],v[3]),A[0]=v[0],A[1]=v[1],A[2]=v[2],A[3]=v[3];if(F[0]!==Z[0]||F[1]!==Z[1]||F[2]!==Z[2]||F[3]!==Z[3])h.colorMask(F[0],F[1],F[2],F[3]),Z[0]=F[0],Z[1]=F[1],Z[2]=F[2],Z[3]=F[3];y!==k&&(h.cullFace(y),N.cull_face=y);P!==Q&&(h.depthFunc(P),N.depth_func=P);za!==oa&&(h.depthMask(za),N.depth_mask=za);if(t[0]!==V[0]||t[1]!==
V[1])h.depthRange(t[0],t[1]),V[0]=t[0],V[1]=t[1];w!==K&&(h.frontFace(w),N.frontFace=w);da!==T&&(h.lineWidth(da),N.lineWidth=da);if(m[0]!==u[0]||m[1]!==u[1])h.polygonOffset(m[0],m[1]),u[0]=m[0],u[1]=m[1];if(ja[0]!==b[0]||ja[1]!==b[1])h.sampleCoverage(ja[0],ja[1]),b[0]=ja[0],b[1]=ja[1];if(z[0]!==W[0]||z[1]!==W[1]||z[2]!==W[2]||z[3]!==W[3])h.scissor(z[0],z[1],z[2],z[3]),W[0]=z[0],W[1]=z[1],W[2]=z[2],W[3]=z[3];if(f[0]!==ba[0]||f[1]!==ba[1]||f[2]!==ba[2])h.stencilFunc(f[0],f[1],f[2]),ba[0]=f[0],ba[1]=
f[1],ba[2]=f[2];ma!==ra&&(h.stencilMask(ma),N.stencil_mask=ma);if(G[0]!==q[0]||G[1]!==q[1]||G[2]!==q[2]||G[3]!==q[3])h.stencilOpSeparate(G[0],G[1],G[2],G[3]),q[0]=G[0],q[1]=G[1],q[2]=G[2],q[3]=G[3];if(ca[0]!==D[0]||ca[1]!==D[1]||ca[2]!==D[2]||ca[3]!==D[3])h.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]),D[0]=ca[0],D[1]=ca[1],D[2]=ca[2],D[3]=ca[3];if(C[0]!==c[0]||C[1]!==c[1]||C[2]!==c[2]||C[3]!==c[3])h.viewport(C[0],C[1],C[2],C[3]),c[0]=C[0],c[1]=C[1],c[2]=C[2],c[3]=C[3]},refresh:function(){var l,a,e,
x,na,Cc,Y,fa,R,I,y,k,P,Q,za,oa;N.dirty=!1;a=p.blend_enable;e=p.cull_enable;x=p.depth_enable;na=p.dither;Cc=p.polygonOffset_enable;Y=p.sample_alpha;fa=p.sample_enable;R=p.scissor_enable;I=p.stencil_enable;y=p.cull_face;k=p.depth_func;P=p.depth_mask;Q=p.frontFace;za=p.lineWidth;oa=p.stencil_mask;(l=g.next)?h.bindFramebuffer(36160,l.framebuffer):h.bindFramebuffer(36160,null);g.cur=l;l=H[0];l.buffer?(h.enableVertexAttribArray(0),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(0,l.size,l.type,
l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(0),h.vertexAttrib4f(0,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(0,l.divisor);l=H[1];l.buffer?(h.enableVertexAttribArray(1),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(1,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(1),h.vertexAttrib4f(1,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(1,l.divisor);l=H[2];l.buffer?(h.enableVertexAttribArray(2),h.bindBuffer(34962,l.buffer.buffer),
h.vertexAttribPointer(2,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(2),h.vertexAttrib4f(2,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(2,l.divisor);l=H[3];l.buffer?(h.enableVertexAttribArray(3),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(3,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(3),h.vertexAttrib4f(3,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(3,l.divisor);l=H[4];l.buffer?(h.enableVertexAttribArray(4),
h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(4,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(4),h.vertexAttrib4f(4,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(4,l.divisor);l=H[5];l.buffer?(h.enableVertexAttribArray(5),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(5,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(5),h.vertexAttrib4f(5,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(5,l.divisor);
l=H[6];l.buffer?(h.enableVertexAttribArray(6),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(6,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(6),h.vertexAttrib4f(6,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(6,l.divisor);l=H[7];l.buffer?(h.enableVertexAttribArray(7),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(7,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(7),h.vertexAttrib4f(7,l.x,l.y,l.z,l.w),l.buffer=
null);S.vertexAttribDivisorANGLE(7,l.divisor);l=H[8];l.buffer?(h.enableVertexAttribArray(8),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(8,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(8),h.vertexAttrib4f(8,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(8,l.divisor);l=H[9];l.buffer?(h.enableVertexAttribArray(9),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(9,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(9),
h.vertexAttrib4f(9,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(9,l.divisor);l=H[10];l.buffer?(h.enableVertexAttribArray(10),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(10,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(10),h.vertexAttrib4f(10,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(10,l.divisor);l=H[11];l.buffer?(h.enableVertexAttribArray(11),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(11,l.size,l.type,l.normalized,
l.stride,l.offset)):(h.disableVertexAttribArray(11),h.vertexAttrib4f(11,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(11,l.divisor);l=H[12];l.buffer?(h.enableVertexAttribArray(12),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(12,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(12),h.vertexAttrib4f(12,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(12,l.divisor);l=H[13];l.buffer?(h.enableVertexAttribArray(13),h.bindBuffer(34962,l.buffer.buffer),
h.vertexAttribPointer(13,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(13),h.vertexAttrib4f(13,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(13,l.divisor);l=H[14];l.buffer?(h.enableVertexAttribArray(14),h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(14,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(14),h.vertexAttrib4f(14,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(14,l.divisor);l=H[15];l.buffer?(h.enableVertexAttribArray(15),
h.bindBuffer(34962,l.buffer.buffer),h.vertexAttribPointer(15,l.size,l.type,l.normalized,l.stride,l.offset)):(h.disableVertexAttribArray(15),h.vertexAttrib4f(15,l.x,l.y,l.z,l.w),l.buffer=null);S.vertexAttribDivisorANGLE(15,l.divisor);d.currentVAO=null;d.setVAO(d.targetVAO);a?h.enable(3042):h.disable(3042);N.blend_enable=a;e?h.enable(2884):h.disable(2884);N.cull_enable=e;x?h.enable(2929):h.disable(2929);N.depth_enable=x;na?h.enable(3024):h.disable(3024);N.dither=na;Cc?h.enable(32823):h.disable(32823);
N.polygonOffset_enable=Cc;Y?h.enable(32926):h.disable(32926);N.sample_alpha=Y;fa?h.enable(32928):h.disable(32928);N.sample_enable=fa;R?h.enable(3089):h.disable(3089);N.scissor_enable=R;I?h.enable(2960):h.disable(2960);N.stencil_enable=I;h.blendColor(E[0],E[1],E[2],E[3]);J[0]=E[0];J[1]=E[1];J[2]=E[2];J[3]=E[3];h.blendEquationSeparate(M[0],M[1]);U[0]=M[0];U[1]=M[1];h.blendFuncSeparate(v[0],v[1],v[2],v[3]);A[0]=v[0];A[1]=v[1];A[2]=v[2];A[3]=v[3];h.colorMask(F[0],F[1],F[2],F[3]);Z[0]=F[0];Z[1]=F[1];Z[2]=
F[2];Z[3]=F[3];h.cullFace(y);N.cull_face=y;h.depthFunc(k);N.depth_func=k;h.depthMask(P);N.depth_mask=P;h.depthRange(t[0],t[1]);V[0]=t[0];V[1]=t[1];h.frontFace(Q);N.frontFace=Q;h.lineWidth(za);N.lineWidth=za;h.polygonOffset(m[0],m[1]);u[0]=m[0];u[1]=m[1];h.sampleCoverage(ja[0],ja[1]);b[0]=ja[0];b[1]=ja[1];h.scissor(z[0],z[1],z[2],z[3]);W[0]=z[0];W[1]=z[1];W[2]=z[2];W[3]=z[3];h.stencilFunc(f[0],f[1],f[2]);ba[0]=f[0];ba[1]=f[1];ba[2]=f[2];h.stencilMask(oa);N.stencil_mask=oa;h.stencilOpSeparate(G[0],
G[1],G[2],G[3]);q[0]=G[0];q[1]=G[1];q[2]=G[2];q[3]=G[3];h.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]);D[0]=ca[0];D[1]=ca[1];D[2]=ca[2];D[3]=ca[3];h.viewport(C[0],C[1],C[2],C[3]);c[0]=C[0];c[1]=C[1];c[2]=C[2];c[3]=C[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,Cc,Y,fa,R,I,y,k,P,Q,za,oa){var w,K,da,T,ma,ra,
Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,td,Gb,ha,L,sa,Ea,qa,ya,Ia,la,aa,ta,Ka,Ba,lb,ea,zd,Zb,Ga,$b,Rb;w=e.attributes;K=e.buffer;da=e.context;T=e.current;ma=e.draw;ra=e.elements;Ca=e.extensions;xa=e.framebuffer;ga=e.gl;Da=e.isBufferArgs;ka=e.next;pa=e.shader;Aa=e.uniforms;Ha=e.vao;O=ka.blend_color;ac=T.blend_color;Ua=ka.blend_equation;r=T.blend_equation;n=ka.blend_func;B=T.blend_func;ua=ka.colorMask;va=T.colorMask;td=ka.depth_range;Gb=T.depth_range;ha=ka.polygonOffset_offset;L=T.polygonOffset_offset;
sa=ka.sample_coverage;Ea=T.sample_coverage;qa=ka.scissor_box;ya=T.scissor_box;Ia=ka.stencil_func;la=T.stencil_func;aa=ka.stencil_opBack;ta=T.stencil_opBack;Ka=ka.stencil_opFront;Ba=T.stencil_opFront;lb=ka.viewport;ea=T.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Zb={};Zb.buffer=H;Zb.divisor=1;Ga={};Ga.buffer=N;Ga.divisor=1;$b={};$b.buffer=g;$b.divisor=1;Rb={};Rb.buffer=h;Rb.divisor=1;return{batch:function(b,d){var f,h,n,p,O,g;f=xa.next;
f!==xa.cur&&(f?ga.bindFramebuffer(36160,f.framebuffer):ga.bindFramebuffer(36160,null),xa.cur=f);if(T.dirty){var e,m,z,t,G,qa,N,F,H,J,u,E,M,W,Ua,V,ba,Aa,Z,pa,ja,lb,X,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc;e=ka.dither;e!==T.dither&&(e?ga.enable(3024):ga.disable(3024),T.dither=e);m=ka.depth_func;m!==T.depth_func&&(ga.depthFunc(m),T.depth_func=m);z=td[0];t=td[1];if(z!==Gb[0]||t!==Gb[1])ga.depthRange(z,t),Gb[0]=z,Gb[1]=t;G=ka.depth_mask;G!==T.depth_mask&&(ga.depthMask(G),T.depth_mask=G);qa=ua[0];N=ua[1];F=ua[2];
H=ua[3];if(qa!==va[0]||N!==va[1]||F!==va[2]||H!==va[3])ga.colorMask(qa,N,F,H),va[0]=qa,va[1]=N,va[2]=F,va[3]=H;J=ka.cull_enable;J!==T.cull_enable&&(J?ga.enable(2884):ga.disable(2884),T.cull_enable=J);u=ka.cull_face;u!==T.cull_face&&(ga.cullFace(u),T.cull_face=u);E=ka.frontFace;E!==T.frontFace&&(ga.frontFace(E),T.frontFace=E);M=ka.lineWidth;M!==T.lineWidth&&(ga.lineWidth(M),T.lineWidth=M);W=ka.polygonOffset_enable;W!==T.polygonOffset_enable&&(W?ga.enable(32823):ga.disable(32823),T.polygonOffset_enable=
W);Ua=ha[0];V=ha[1];if(Ua!==L[0]||V!==L[1])ga.polygonOffset(Ua,V),L[0]=Ua,L[1]=V;ba=ka.sample_alpha;ba!==T.sample_alpha&&(ba?ga.enable(32926):ga.disable(32926),T.sample_alpha=ba);Aa=ka.sample_enable;Aa!==T.sample_enable&&(Aa?ga.enable(32928):ga.disable(32928),T.sample_enable=Aa);Z=sa[0];pa=sa[1];if(Z!==Ea[0]||pa!==Ea[1])ga.sampleCoverage(Z,pa),Ea[0]=Z,Ea[1]=pa;ja=ka.stencil_enable;ja!==T.stencil_enable&&(ja?ga.enable(2960):ga.disable(2960),T.stencil_enable=ja);lb=ka.stencil_mask;lb!==T.stencil_mask&&
(ga.stencilMask(lb),T.stencil_mask=lb);X=Ia[0];Ab=Ia[1];Eb=Ia[2];if(X!==la[0]||Ab!==la[1]||Eb!==la[2])ga.stencilFunc(X,Ab,Eb),la[0]=X,la[1]=Ab,la[2]=Eb;tc=Ka[0];wb=Ka[1];wc=Ka[2];Bb=Ka[3];if(tc!==Ba[0]||wb!==Ba[1]||wc!==Ba[2]||Bb!==Ba[3])ga.stencilOpSeparate(tc,wb,wc,Bb),Ba[0]=tc,Ba[1]=wb,Ba[2]=wc,Ba[3]=Bb;Jc=aa[0];lc=aa[1];Hc=aa[2];Wc=aa[3];if(Jc!==ta[0]||lc!==ta[1]||Hc!==ta[2]||Wc!==ta[3])ga.stencilOpSeparate(Jc,lc,Hc,Wc),ta[0]=Jc,ta[1]=lc,ta[2]=Hc,ta[3]=Wc}ga.blendColor(0,0,0,0);ac[0]=0;ac[1]=
0;ac[2]=0;ac[3]=0;ga.enable(3042);T.blend_enable=!0;ga.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;ga.blendFuncSeparate(770,771,773,1);B[0]=770;B[1]=771;B[2]=773;B[3]=1;ga.disable(2929);T.depth_enable=!1;ga.enable(3089);T.scissor_enable=!0;if(h=T.profile)n=performance.now(),S.count+=d;ga.useProgram(q.program);p=Ca.angle_instanced_arrays;var Vc,Dc,dc,Ic,oc,pc,mc,ec;Ha.setVAO(null);Vc=na.location;Dc=w[Vc];Dc.buffer||ga.enableVertexAttribArray(Vc);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==
U||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)ga.bindBuffer(34962,U.buffer),ga.vertexAttribPointer(Vc,2,5126,!1,24,0),Dc.type=5126,Dc.size=2,Dc.buffer=U,Dc.normalized=!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(p.vertexAttribDivisorANGLE(Vc,0),Dc.divisor=0);dc=Y.location;Ic=w[dc];Ic.buffer||ga.enableVertexAttribArray(dc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==v||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)ga.bindBuffer(34962,v.buffer),ga.vertexAttribPointer(dc,2,5126,!1,24,8),Ic.type=
5126,Ic.size=2,Ic.buffer=v,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(p.vertexAttribDivisorANGLE(dc,0),Ic.divisor=0);oc=a.location;pc=w[oc];pc.buffer||ga.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==A||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)ga.bindBuffer(34962,A.buffer),ga.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=A,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(p.vertexAttribDivisorANGLE(oc,0),pc.divisor=
0);(mc=ma.elements)?ga.bindBuffer(34963,mc.buffer.buffer):Ha.currentVAO&&(mc=ra.getElements(Ha.currentVAO.elements))&&ga.bindBuffer(34963,mc.buffer.buffer);ec=ma.offset;for(O=0;O<d;++O){g=b[O];var $a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,ia,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,
hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc;$a=g.viewport;Fc=$a.x|0;xb=$a.y|0;cb="width"in $a?$a.width|0:da.framebufferWidth-Fc;Mb="height"in $a?$a.height|0:da.framebufferHeight-xb;ab=da.viewportWidth;da.viewportWidth=cb;nb=da.viewportHeight;da.viewportHeight=Mb;ga.viewport(Fc,xb,cb,Mb);ea[0]=Fc;ea[1]=xb;ea[2]=cb;ea[3]=Mb;Va=g.viewport;vd=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:da.framebufferWidth-vd;qc="height"in Va?Va.height|0:da.framebufferHeight-Hb;ga.scissor(vd,Hb,Ib,qc);ya[0]=vd;ya[1]=Hb;
ya[2]=Ib;ya[3]=qc;Nb=ca.call(this,da,g,O);$b.offset=Nb;ib=!1;Fb=null;Cb=0;vb=!1;Xb=gb=0;Ob=1;pb=0;Sa=5126;hb=ic=yb=Tb=0;Da($b)?(ib=!0,Fb=K.createStream(34962,$b),Sa=Fb.dtype):(Fb=K.getBuffer($b))?Sa=Fb.dtype:"constant"in $b?(Ob=2,"number"===typeof $b.constant?(yb=$b.constant,ic=hb=Tb=0):(yb=0<$b.constant.length?$b.constant[0]:0,ic=1<$b.constant.length?$b.constant[1]:0,hb=2<$b.constant.length?$b.constant[2]:0,Tb=3<$b.constant.length?$b.constant[3]:0)):(Fb=Da($b.buffer)?K.createStream(34962,$b.buffer):
K.getBuffer($b.buffer),Sa="type"in $b?zd[$b.type]:Fb.dtype,vb=!!$b.normalized,Xb=$b.size|0,gb=$b.offset|0,pb=$b.stride|0,Cb=$b.divisor|0);ob=I.location;Ja=w[ob];if(1===Ob){Ja.buffer||ga.enableVertexAttribArray(ob);qb=Xb||2;if(Ja.type!==Sa||Ja.size!==qb||Ja.buffer!==Fb||Ja.normalized!==vb||Ja.offset!==gb||Ja.stride!==pb)ga.bindBuffer(34962,Fb.buffer),ga.vertexAttribPointer(ob,qb,Sa,vb,pb,gb),Ja.type=Sa,Ja.size=qb,Ja.buffer=Fb,Ja.normalized=vb,Ja.offset=gb,Ja.stride=pb;Ja.divisor!==Cb&&(p.vertexAttribDivisorANGLE(ob,
Cb),Ja.divisor=Cb)}else if(Ja.buffer&&(ga.disableVertexAttribArray(ob),Ja.buffer=null),Ja.x!==yb||Ja.y!==ic||Ja.z!==hb||Ja.w!==Tb)ga.vertexAttrib4f(ob,yb,ic,hb,Tb),Ja.x=yb,Ja.y=ic,Ja.z=hb,Ja.w=Tb;La=D.call(this,da,g,O);Rb.offset=La;eb=!1;fb=null;Ma=0;jb=!1;sb=Wa=0;rb=1;Pa=0;Bc=5126;Na=Db=Jb=Ra=0;Da(Rb)?(eb=!0,fb=K.createStream(34962,Rb),Bc=fb.dtype):(fb=K.getBuffer(Rb))?Bc=fb.dtype:"constant"in Rb?(rb=2,"number"===typeof Rb.constant?(Jb=Rb.constant,Db=Na=Ra=0):(Jb=0<Rb.constant.length?Rb.constant[0]:
0,Db=1<Rb.constant.length?Rb.constant[1]:0,Na=2<Rb.constant.length?Rb.constant[2]:0,Ra=3<Rb.constant.length?Rb.constant[3]:0)):(fb=Da(Rb.buffer)?K.createStream(34962,Rb.buffer):K.getBuffer(Rb.buffer),Bc="type"in Rb?zd[Rb.type]:fb.dtype,jb=!!Rb.normalized,sb=Rb.size|0,Wa=Rb.offset|0,Pa=Rb.stride|0,Ma=Rb.divisor|0);yd=y.location;Ya=w[yd];if(1===rb){Ya.buffer||ga.enableVertexAttribArray(yd);Kb=sb||2;if(Ya.type!==Bc||Ya.size!==Kb||Ya.buffer!==fb||Ya.normalized!==jb||Ya.offset!==Wa||Ya.stride!==Pa)ga.bindBuffer(34962,
fb.buffer),ga.vertexAttribPointer(yd,Kb,Bc,jb,Pa,Wa),Ya.type=Bc,Ya.size=Kb,Ya.buffer=fb,Ya.normalized=jb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==Ma&&(p.vertexAttribDivisorANGLE(yd,Ma),Ya.divisor=Ma)}else if(Ya.buffer&&(ga.disableVertexAttribArray(yd),Ya.buffer=null),Ya.x!==Jb||Ya.y!==Db||Ya.z!==Na||Ya.w!==Ra)ga.vertexAttrib4f(yd,Jb,Db,Na,Ra),Ya.x=Jb,Ya.y=Db,Ya.z=Na,Ya.w=Ra;Lb=C.call(this,da,g,O);Ga.offset=Lb;kb=!1;Oa=null;Yb=0;Qa=!1;ub=tb=0;Ta=1;mb=0;fc=5126;jc=bb=uc=zc=0;Da(Ga)?(kb=!0,Oa=K.createStream(34962,
Ga),fc=Oa.dtype):(Oa=K.getBuffer(Ga))?fc=Oa.dtype:"constant"in Ga?(Ta=2,"number"===typeof Ga.constant?(uc=Ga.constant,bb=jc=zc=0):(uc=0<Ga.constant.length?Ga.constant[0]:0,bb=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,zc=3<Ga.constant.length?Ga.constant[3]:0)):(Oa=Da(Ga.buffer)?K.createStream(34962,Ga.buffer):K.getBuffer(Ga.buffer),fc="type"in Ga?zd[Ga.type]:Oa.dtype,Qa=!!Ga.normalized,ub=Ga.size|0,tb=Ga.offset|0,mb=Ga.stride|0,Yb=Ga.divisor|0);gd=Cc.location;Xa=
w[gd];if(1===Ta){Xa.buffer||ga.enableVertexAttribArray(gd);Mc=ub||4;if(Xa.type!==fc||Xa.size!==Mc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)ga.bindBuffer(34962,Oa.buffer),ga.vertexAttribPointer(gd,Mc,fc,Qa,mb,tb),Xa.type=fc,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Yb&&(p.vertexAttribDivisorANGLE(gd,Yb),Xa.divisor=Yb)}else if(Xa.buffer&&(ga.disableVertexAttribArray(gd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)ga.vertexAttrib4f(gd,
uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;zb=c.call(this,da,g,O);Zb.offset=zb;Za=!1;Ub=null;sc=0;Vb=!1;Kc=Pb=0;Qb=1;Qd=0;Ec=5126;od=ed=Nc=ia=0;Da(Zb)?(Za=!0,Ub=K.createStream(34962,Zb),Ec=Ub.dtype):(Ub=K.getBuffer(Zb))?Ec=Ub.dtype:"constant"in Zb?(Qb=2,"number"===typeof Zb.constant?(Nc=Zb.constant,ed=od=ia=0):(Nc=0<Zb.constant.length?Zb.constant[0]:0,ed=1<Zb.constant.length?Zb.constant[1]:0,od=2<Zb.constant.length?Zb.constant[2]:0,ia=3<Zb.constant.length?Zb.constant[3]:0)):(Ub=Da(Zb.buffer)?K.createStream(34962,
Zb.buffer):K.getBuffer(Zb.buffer),Ec="type"in Zb?zd[Zb.type]:Ub.dtype,Vb=!!Zb.normalized,Kc=Zb.size|0,Pb=Zb.offset|0,Qd=Zb.stride|0,sc=Zb.divisor|0);nc=x.location;vc=w[nc];if(1===Qb){vc.buffer||ga.enableVertexAttribArray(nc);gc=Kc||4;if(vc.type!==Ec||vc.size!==gc||vc.buffer!==Ub||vc.normalized!==Vb||vc.offset!==Pb||vc.stride!==Qd)ga.bindBuffer(34962,Ub.buffer),ga.vertexAttribPointer(nc,gc,Ec,Vb,Qd,Pb),vc.type=Ec,vc.size=gc,vc.buffer=Ub,vc.normalized=Vb,vc.offset=Pb,vc.stride=Qd;vc.divisor!==sc&&(p.vertexAttribDivisorANGLE(nc,
sc),vc.divisor=sc)}else if(vc.buffer&&(ga.disableVertexAttribArray(nc),vc.buffer=null),vc.x!==Nc||vc.y!==ed||vc.z!==od||vc.w!==ia)ga.vertexAttrib4f(nc,Nc,ed,od,ia),vc.x=Nc,vc.y=ed,vc.z=od,vc.w=ia;db=l.call(this,da,g,O);rc=db[0];Wb=db[1];hc=db[2];Ac=db[3];O&&Sb===rc&&cc===Wb&&xc===hc&&ad===Ac||(Sb=rc,cc=Wb,xc=hc,ad=Ac,ga.uniform4f(oa.location,rc,Wb,hc,Ac));Qc=g.lineWidth;O&&Rc===Qc||(Rc=Qc,ga.uniform1f(fa.location,Qc));Sc=g.capSize;O&&Xc===Sc||(Xc=Sc,ga.uniform1f(wa.location,Sc));wd=g.scale;bd=wd[0];
kc=wd[1];O&&Yc===bd&&bc===kc||(Yc=bd,bc=kc,ga.uniform2f(k.location,bd,kc));Zc=g.scaleFract;Uc=Zc[0];yc=Zc[1];O&&cd===Uc&&hd===yc||(cd=Uc,hd=yc,ga.uniform2f(P.location,Uc,yc));pd=g.translate;ye=pd[0];id=pd[1];O&&Ne===ye&&Fa===id||(Ne=ye,Fa=id,ga.uniform2f(Q.location,ye,id));Nd=g.translateFract;Xd=Nd[0];Od=Nd[1];O&&de===Xd&&Kd===Od||(de=Xd,Kd=Od,ga.uniform2f(za.location,Xd,Od));Id=g.opacity;O&&md===Id||(md=Id,ga.uniform1f(R.location,Id));Tc=g.count;0<Tc?mc?p.drawElementsInstancedANGLE(4,36,mc.type,
ec<<(mc.type-5121>>1),Tc):p.drawArraysInstancedANGLE(4,ec,36,Tc):0>Tc&&(mc?ga.drawElements(4,36,mc.type,ec<<(mc.type-5121>>1)):ga.drawArrays(4,ec,36));da.viewportWidth=ab;da.viewportHeight=nb;ib&&K.destroyStream(Fb);eb&&K.destroyStream(fb);kb&&K.destroyStream(Oa);Za&&K.destroyStream(Ub)}T.dirty=!0;Ha.setVAO(null);h&&(S.cpuTime+=performance.now()-n)},draw:function(c){var b,f,h,n,l,O,q,g,e,m,z,t,G,qa,D,C,N,H,u,W,Ua,V,ba,Aa,Z,pa,ja,ca,lb,X,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,
xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb;b=xa.next;b!==xa.cur&&(b?ga.bindFramebuffer(36160,b.framebuffer):ga.bindFramebuffer(36160,null),xa.cur=b);if(T.dirty){var Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,ia,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb;Qa=ka.dither;Qa!==T.dither&&(Qa?ga.enable(3024):ga.disable(3024),T.dither=Qa);tb=ka.depth_func;tb!==T.depth_func&&(ga.depthFunc(tb),T.depth_func=
tb);ub=td[0];Ta=td[1];if(ub!==Gb[0]||Ta!==Gb[1])ga.depthRange(ub,Ta),Gb[0]=ub,Gb[1]=Ta;mb=ka.depth_mask;mb!==T.depth_mask&&(ga.depthMask(mb),T.depth_mask=mb);fc=ua[0];zc=ua[1];uc=ua[2];bb=ua[3];if(fc!==va[0]||zc!==va[1]||uc!==va[2]||bb!==va[3])ga.colorMask(fc,zc,uc,bb),va[0]=fc,va[1]=zc,va[2]=uc,va[3]=bb;jc=ka.cull_enable;jc!==T.cull_enable&&(jc?ga.enable(2884):ga.disable(2884),T.cull_enable=jc);gd=ka.cull_face;gd!==T.cull_face&&(ga.cullFace(gd),T.cull_face=gd);Xa=ka.frontFace;Xa!==T.frontFace&&(ga.frontFace(Xa),
T.frontFace=Xa);Mc=ka.lineWidth;Mc!==T.lineWidth&&(ga.lineWidth(Mc),T.lineWidth=Mc);zb=ka.polygonOffset_enable;zb!==T.polygonOffset_enable&&(zb?ga.enable(32823):ga.disable(32823),T.polygonOffset_enable=zb);Za=ha[0];Ub=ha[1];if(Za!==L[0]||Ub!==L[1])ga.polygonOffset(Za,Ub),L[0]=Za,L[1]=Ub;sc=ka.sample_alpha;sc!==T.sample_alpha&&(sc?ga.enable(32926):ga.disable(32926),T.sample_alpha=sc);Vb=ka.sample_enable;Vb!==T.sample_enable&&(Vb?ga.enable(32928):ga.disable(32928),T.sample_enable=Vb);Pb=sa[0];Kc=sa[1];
if(Pb!==Ea[0]||Kc!==Ea[1])ga.sampleCoverage(Pb,Kc),Ea[0]=Pb,Ea[1]=Kc;Qb=ka.stencil_enable;Qb!==T.stencil_enable&&(Qb?ga.enable(2960):ga.disable(2960),T.stencil_enable=Qb);ia=ka.stencil_mask;ia!==T.stencil_mask&&(ga.stencilMask(ia),T.stencil_mask=ia);Ec=Ia[0];Ed=Ia[1];Nc=Ia[2];if(Ec!==la[0]||Ed!==la[1]||Nc!==la[2])ga.stencilFunc(Ec,Ed,Nc),la[0]=Ec,la[1]=Ed,la[2]=Nc;ed=Ka[0];od=Ka[1];nc=Ka[2];vc=Ka[3];if(ed!==Ba[0]||od!==Ba[1]||nc!==Ba[2]||vc!==Ba[3])ga.stencilOpSeparate(ed,od,nc,vc),Ba[0]=ed,Ba[1]=
od,Ba[2]=nc,Ba[3]=vc;gc=aa[0];db=aa[1];rc=aa[2];Sb=aa[3];if(gc!==ta[0]||db!==ta[1]||rc!==ta[2]||Sb!==ta[3])ga.stencilOpSeparate(gc,db,rc,Sb),ta[0]=gc,ta[1]=db,ta[2]=rc,ta[3]=Sb}f=c.viewport;h=f.x|0;n=f.y|0;l="width"in f?f.width|0:da.framebufferWidth-h;O="height"in f?f.height|0:da.framebufferHeight-n;q=da.viewportWidth;da.viewportWidth=l;g=da.viewportHeight;da.viewportHeight=O;ga.viewport(h,n,l,O);ea[0]=h;ea[1]=n;ea[2]=l;ea[3]=O;ga.blendColor(0,0,0,0);ac[0]=0;ac[1]=0;ac[2]=0;ac[3]=0;ga.enable(3042);
T.blend_enable=!0;ga.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;ga.blendFuncSeparate(770,771,773,1);B[0]=770;B[1]=771;B[2]=773;B[3]=1;ga.disable(2929);T.depth_enable=!1;e=c.viewport;m=e.x|0;z=e.y|0;t="width"in e?e.width|0:da.framebufferWidth-m;G="height"in e?e.height|0:da.framebufferHeight-z;ga.scissor(m,z,t,G);ya[0]=m;ya[1]=z;ya[2]=t;ya[3]=G;ga.enable(3089);T.scissor_enable=!0;if(qa=T.profile)D=performance.now(),S.count++;ga.useProgram(p.program);C=Ca.angle_instanced_arrays;Ha.setVAO(null);
N=d.call(this,da,c,0);$b.offset=N;H=!1;u=null;W=0;Ua=!1;ba=V=0;Aa=1;Z=0;pa=5126;X=lb=ca=ja=0;Da($b)?(H=!0,u=K.createStream(34962,$b),pa=u.dtype):(u=K.getBuffer($b))?pa=u.dtype:"constant"in $b?(Aa=2,"number"===typeof $b.constant?(ca=$b.constant,lb=X=ja=0):(ca=0<$b.constant.length?$b.constant[0]:0,lb=1<$b.constant.length?$b.constant[1]:0,X=2<$b.constant.length?$b.constant[2]:0,ja=3<$b.constant.length?$b.constant[3]:0)):(u=Da($b.buffer)?K.createStream(34962,$b.buffer):K.getBuffer($b.buffer),pa="type"in
$b?zd[$b.type]:u.dtype,Ua=!!$b.normalized,ba=$b.size|0,V=$b.offset|0,Z=$b.stride|0,W=$b.divisor|0);Ab=I.location;Eb=w[Ab];if(1===Aa){Eb.buffer||ga.enableVertexAttribArray(Ab);tc=ba||2;if(Eb.type!==pa||Eb.size!==tc||Eb.buffer!==u||Eb.normalized!==Ua||Eb.offset!==V||Eb.stride!==Z)ga.bindBuffer(34962,u.buffer),ga.vertexAttribPointer(Ab,tc,pa,Ua,Z,V),Eb.type=pa,Eb.size=tc,Eb.buffer=u,Eb.normalized=Ua,Eb.offset=V,Eb.stride=Z;Eb.divisor!==W&&(C.vertexAttribDivisorANGLE(Ab,W),Eb.divisor=W)}else if(Eb.buffer&&
(ga.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==ca||Eb.y!==lb||Eb.z!==X||Eb.w!==ja)ga.vertexAttrib4f(Ab,ca,lb,X,ja),Eb.x=ca,Eb.y=lb,Eb.z=X,Eb.w=ja;wb=E.call(this,da,c,0);Rb.offset=wb;wc=!1;Bb=null;Jc=0;lc=!1;Wc=Hc=0;Vc=1;Dc=0;dc=5126;mc=pc=oc=Ic=0;Da(Rb)?(wc=!0,Bb=K.createStream(34962,Rb),dc=Bb.dtype):(Bb=K.getBuffer(Rb))?dc=Bb.dtype:"constant"in Rb?(Vc=2,"number"===typeof Rb.constant?(oc=Rb.constant,pc=mc=Ic=0):(oc=0<Rb.constant.length?Rb.constant[0]:0,pc=1<Rb.constant.length?Rb.constant[1]:
0,mc=2<Rb.constant.length?Rb.constant[2]:0,Ic=3<Rb.constant.length?Rb.constant[3]:0)):(Bb=Da(Rb.buffer)?K.createStream(34962,Rb.buffer):K.getBuffer(Rb.buffer),dc="type"in Rb?zd[Rb.type]:Bb.dtype,lc=!!Rb.normalized,Wc=Rb.size|0,Hc=Rb.offset|0,Dc=Rb.stride|0,Jc=Rb.divisor|0);ec=y.location;$a=w[ec];if(1===Vc){$a.buffer||ga.enableVertexAttribArray(ec);Fc=Wc||2;if($a.type!==dc||$a.size!==Fc||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Hc||$a.stride!==Dc)ga.bindBuffer(34962,Bb.buffer),ga.vertexAttribPointer(ec,
Fc,dc,lc,Dc,Hc),$a.type=dc,$a.size=Fc,$a.buffer=Bb,$a.normalized=lc,$a.offset=Hc,$a.stride=Dc;$a.divisor!==Jc&&(C.vertexAttribDivisorANGLE(ec,Jc),$a.divisor=Jc)}else if($a.buffer&&(ga.disableVertexAttribArray(ec),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Ic)ga.vertexAttrib4f(ec,oc,pc,mc,Ic),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Ic;xb=J.call(this,da,c,0);Ga.offset=xb;cb=!1;Mb=null;ab=0;nb=!1;vd=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=ib=Nb=0;Da(Ga)?(cb=!0,Mb=K.createStream(34962,Ga),qc=Mb.dtype):(Mb=K.getBuffer(Ga))?
qc=Mb.dtype:"constant"in Ga?(Hb=2,"number"===typeof Ga.constant?(ib=Ga.constant,Fb=Cb=Nb=0):(ib=0<Ga.constant.length?Ga.constant[0]:0,Fb=1<Ga.constant.length?Ga.constant[1]:0,Cb=2<Ga.constant.length?Ga.constant[2]:0,Nb=3<Ga.constant.length?Ga.constant[3]:0)):(Mb=Da(Ga.buffer)?K.createStream(34962,Ga.buffer):K.getBuffer(Ga.buffer),qc="type"in Ga?zd[Ga.type]:Mb.dtype,nb=!!Ga.normalized,vd=Ga.size|0,Va=Ga.offset|0,Ib=Ga.stride|0,ab=Ga.divisor|0);vb=Cc.location;gb=w[vb];if(1===Hb){gb.buffer||ga.enableVertexAttribArray(vb);
Xb=vd||4;if(gb.type!==qc||gb.size!==Xb||gb.buffer!==Mb||gb.normalized!==nb||gb.offset!==Va||gb.stride!==Ib)ga.bindBuffer(34962,Mb.buffer),ga.vertexAttribPointer(vb,Xb,qc,nb,Ib,Va),gb.type=qc,gb.size=Xb,gb.buffer=Mb,gb.normalized=nb,gb.offset=Va,gb.stride=Ib;gb.divisor!==ab&&(C.vertexAttribDivisorANGLE(vb,ab),gb.divisor=ab)}else if(gb.buffer&&(ga.disableVertexAttribArray(vb),gb.buffer=null),gb.x!==ib||gb.y!==Fb||gb.z!==Cb||gb.w!==Nb)ga.vertexAttrib4f(vb,ib,Fb,Cb,Nb),gb.x=ib,gb.y=Fb,gb.z=Cb,gb.w=Nb;
Ob=M.call(this,da,c,0);Zb.offset=Ob;pb=!1;Sa=null;Tb=0;yb=!1;hb=ic=0;ob=1;Ja=0;qb=5126;Ma=fb=eb=La=0;Da(Zb)?(pb=!0,Sa=K.createStream(34962,Zb),qb=Sa.dtype):(Sa=K.getBuffer(Zb))?qb=Sa.dtype:"constant"in Zb?(ob=2,"number"===typeof Zb.constant?(eb=Zb.constant,fb=Ma=La=0):(eb=0<Zb.constant.length?Zb.constant[0]:0,fb=1<Zb.constant.length?Zb.constant[1]:0,Ma=2<Zb.constant.length?Zb.constant[2]:0,La=3<Zb.constant.length?Zb.constant[3]:0)):(Sa=Da(Zb.buffer)?K.createStream(34962,Zb.buffer):K.getBuffer(Zb.buffer),
qb="type"in Zb?zd[Zb.type]:Sa.dtype,yb=!!Zb.normalized,hb=Zb.size|0,ic=Zb.offset|0,Ja=Zb.stride|0,Tb=Zb.divisor|0);jb=x.location;Wa=w[jb];if(1===ob){Wa.buffer||ga.enableVertexAttribArray(jb);sb=hb||4;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Sa||Wa.normalized!==yb||Wa.offset!==ic||Wa.stride!==Ja)ga.bindBuffer(34962,Sa.buffer),ga.vertexAttribPointer(jb,sb,qb,yb,Ja,ic),Wa.type=qb,Wa.size=sb,Wa.buffer=Sa,Wa.normalized=yb,Wa.offset=ic,Wa.stride=Ja;Wa.divisor!==Tb&&(C.vertexAttribDivisorANGLE(jb,Tb),
Wa.divisor=Tb)}else if(Wa.buffer&&(ga.disableVertexAttribArray(jb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==Ma||Wa.w!==La)ga.vertexAttrib4f(jb,eb,fb,Ma,La),Wa.x=eb,Wa.y=fb,Wa.z=Ma,Wa.w=La;rb=na.location;Pa=w[rb];Pa.buffer||ga.enableVertexAttribArray(rb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==U||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ga.bindBuffer(34962,U.buffer),ga.vertexAttribPointer(rb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=U,Pa.normalized=!1,Pa.offset=0,Pa.stride=
24;0!==Pa.divisor&&(C.vertexAttribDivisorANGLE(rb,0),Pa.divisor=0);Bc=Y.location;Ra=w[Bc];Ra.buffer||ga.enableVertexAttribArray(Bc);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==v||!1!==Ra.normalized||8!==Ra.offset||24!==Ra.stride)ga.bindBuffer(34962,v.buffer),ga.vertexAttribPointer(Bc,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=v,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(C.vertexAttribDivisorANGLE(Bc,0),Ra.divisor=0);Jb=a.location;Db=w[Jb];Db.buffer||ga.enableVertexAttribArray(Jb);
if(5126!==Db.type||2!==Db.size||Db.buffer!==A||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)ga.bindBuffer(34962,A.buffer),ga.vertexAttribPointer(Jb,2,5126,!1,24,16),Db.type=5126,Db.size=2,Db.buffer=A,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(C.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Na=F.call(this,da,c,0);ga.uniform4f(oa.location,Na[0],Na[1],Na[2],Na[3]);ga.uniform1f(fa.location,c.lineWidth);ga.uniform1f(wa.location,c.capSize);yd=c.scale;ga.uniform2f(k.location,yd[0],
yd[1]);Ya=c.scaleFract;ga.uniform2f(P.location,Ya[0],Ya[1]);Kb=c.translate;ga.uniform2f(Q.location,Kb[0],Kb[1]);Lb=c.translateFract;ga.uniform2f(za.location,Lb[0],Lb[1]);ga.uniform1f(R.location,c.opacity);(kb=ma.elements)?ga.bindBuffer(34963,kb.buffer.buffer):Ha.currentVAO&&(kb=ra.getElements(Ha.currentVAO.elements))&&ga.bindBuffer(34963,kb.buffer.buffer);Oa=ma.offset;Yb=c.count;0<Yb?kb?C.drawElementsInstancedANGLE(4,36,kb.type,Oa<<(kb.type-5121>>1),Yb):C.drawArraysInstancedANGLE(4,Oa,36,Yb):0>Yb&&
(kb?ga.drawElements(4,36,kb.type,Oa<<(kb.type-5121>>1)):ga.drawArrays(4,Oa,36));T.dirty=!0;Ha.setVAO(null);da.viewportWidth=q;da.viewportHeight=g;qa&&(S.cpuTime+=performance.now()-D);H&&K.destroyStream(u);wc&&K.destroyStream(Bb);cb&&K.destroyStream(Mb);pb&&K.destroyStream(Sa)},scope:function(a,c,d){var h,k,r,l,w,B,L,p,q,g,x,e,I,sa,Ha,Ea,y,ac,ga,ha,R,la,D,C,Q,aa,N,ua,P,ya,H,F,Ia,J,ea,za,E,M,ra,xa,Y,ta,fa,va,oa,Gb,ca,wa,na,Ca,td,Ba,Ka,Cc,X,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,
La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,ia,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md;h=a.viewport;k=h.x|0;r=h.y|0;l="width"in h?h.width|0:da.framebufferWidth-k;w="height"in h?h.height|0:da.framebufferHeight-r;B=da.viewportWidth;
da.viewportWidth=l;L=da.viewportHeight;da.viewportHeight=w;p=lb[0];lb[0]=k;q=lb[1];lb[1]=r;g=lb[2];lb[2]=l;x=lb[3];lb[3]=w;e=O[0];O[0]=0;I=O[1];O[1]=0;sa=O[2];O[2]=0;Ha=O[3];O[3]=0;Ea=ka.blend_enable;ka.blend_enable=!0;y=Ua[0];Ua[0]=32774;ac=Ua[1];Ua[1]=32774;ga=n[0];n[0]=770;ha=n[1];n[1]=771;R=n[2];n[2]=773;la=n[3];n[3]=1;D=ka.depth_enable;ka.depth_enable=!1;C=a.viewport;Q=C.x|0;aa=C.y|0;N="width"in C?C.width|0:da.framebufferWidth-Q;ua="height"in C?C.height|0:da.framebufferHeight-aa;P=qa[0];qa[0]=
Q;ya=qa[1];qa[1]=aa;H=qa[2];qa[2]=N;F=qa[3];qa[3]=ua;Ia=ka.scissor_enable;ka.scissor_enable=!0;if(J=T.profile)ea=performance.now(),S.count++;za=ma.count;ma.count=36;E=a.count;M=ma.instances;ma.instances=E;ra=ma.primitive;ma.primitive=4;xa=a.capSize;Y=Aa[5];Aa[5]=xa;ta=a.lineWidth;fa=Aa[4];Aa[4]=ta;va=a.opacity;oa=Aa[10];Aa[10]=va;Gb=a.range;ca=Aa[18];Aa[18]=Gb;wa=a.scale;na=Aa[6];Aa[6]=wa;Ca=a.scaleFract;td=Aa[7];Aa[7]=Ca;Ba=a.translate;Ka=Aa[8];Aa[8]=Ba;Cc=a.translateFract;X=Aa[9];Aa[9]=Cc;Hb=Z.call(this,
da,a,d);Ib=Aa[3];Aa[3]=Hb;qc=t.buffer;t.buffer=A;Nb=t.divisor;t.divisor=0;ib=t.normalized;t.normalized=!1;Fb=t.offset;t.offset=16;Cb=t.size;t.size=0;vb=t.state;t.state=1;gb=t.stride;t.stride=24;Xb=t.type;t.type=5126;Ob=t.w;t.w=0;pb=t.x;t.x=0;Sa=t.y;t.y=0;Tb=t.z;t.z=0;yb=V.call(this,da,a,d);Zb.offset=yb;ic=!1;hb=null;ob=0;Ja=!1;La=qb=0;eb=1;fb=0;Ma=5126;rb=sb=Wa=jb=0;Da(Zb)?(ic=!0,hb=K.createStream(34962,Zb),Ma=hb.dtype):(hb=K.getBuffer(Zb))?Ma=hb.dtype:"constant"in Zb?(eb=2,"number"===typeof Zb.constant?
(Wa=Zb.constant,sb=rb=jb=0):(Wa=0<Zb.constant.length?Zb.constant[0]:0,sb=1<Zb.constant.length?Zb.constant[1]:0,rb=2<Zb.constant.length?Zb.constant[2]:0,jb=3<Zb.constant.length?Zb.constant[3]:0)):(hb=Da(Zb.buffer)?K.createStream(34962,Zb.buffer):K.getBuffer(Zb.buffer),Ma="type"in Zb?zd[Zb.type]:hb.dtype,Ja=!!Zb.normalized,La=Zb.size|0,qb=Zb.offset|0,fb=Zb.stride|0,ob=Zb.divisor|0);Pa=m.buffer;m.buffer=hb;Bc=m.divisor;m.divisor=ob;Ra=m.normalized;m.normalized=Ja;Jb=m.offset;m.offset=qb;Db=m.size;m.size=
La;Na=m.state;m.state=eb;yd=m.stride;m.stride=fb;Ya=m.type;m.type=Ma;Kb=m.w;m.w=jb;Lb=m.x;m.x=Wa;kb=m.y;m.y=sb;Oa=m.z;m.z=rb;Yb=u.buffer;u.buffer=U;Qa=u.divisor;u.divisor=0;tb=u.normalized;u.normalized=!1;ub=u.offset;u.offset=0;Ta=u.size;u.size=0;mb=u.state;u.state=1;fc=u.stride;u.stride=24;zc=u.type;u.type=5126;uc=u.w;u.w=0;bb=u.x;u.x=0;jc=u.y;u.y=0;ia=u.z;u.z=0;Xa=ja.call(this,da,a,d);Ga.offset=Xa;Mc=!1;zb=null;Za=0;Ub=!1;Vb=sc=0;Pb=1;Kc=0;Qb=5126;Nc=Ed=Ec=Qd=0;Da(Ga)?(Mc=!0,zb=K.createStream(34962,
Ga),Qb=zb.dtype):(zb=K.getBuffer(Ga))?Qb=zb.dtype:"constant"in Ga?(Pb=2,"number"===typeof Ga.constant?(Ec=Ga.constant,Ed=Nc=Qd=0):(Ec=0<Ga.constant.length?Ga.constant[0]:0,Ed=1<Ga.constant.length?Ga.constant[1]:0,Nc=2<Ga.constant.length?Ga.constant[2]:0,Qd=3<Ga.constant.length?Ga.constant[3]:0)):(zb=Da(Ga.buffer)?K.createStream(34962,Ga.buffer):K.getBuffer(Ga.buffer),Qb="type"in Ga?zd[Ga.type]:zb.dtype,Ub=!!Ga.normalized,Vb=Ga.size|0,sc=Ga.offset|0,Kc=Ga.stride|0,Za=Ga.divisor|0);ed=b.buffer;b.buffer=
zb;od=b.divisor;b.divisor=Za;nc=b.normalized;b.normalized=Ub;vc=b.offset;b.offset=sc;gc=b.size;b.size=Vb;db=b.state;b.state=Pb;rc=b.stride;b.stride=Kc;Sb=b.type;b.type=Qb;Wb=b.w;b.w=Qd;cc=b.x;b.x=Ec;hc=b.y;b.y=Ed;xc=b.z;b.z=Nc;Ac=z.buffer;z.buffer=v;ad=z.divisor;z.divisor=0;Qc=z.normalized;z.normalized=!1;Rc=z.offset;z.offset=8;Sc=z.size;z.size=0;Xc=z.state;z.state=1;wd=z.stride;z.stride=24;bd=z.type;z.type=5126;Yc=z.w;z.w=0;kc=z.x;z.x=0;bc=z.y;z.y=0;Zc=z.z;z.z=0;Uc=W.call(this,da,a,d);$b.offset=
Uc;cd=!1;yc=null;hd=0;pd=!1;Ne=ye=0;id=1;Fa=0;Nd=5126;Kd=Od=de=Xd=0;Da($b)?(cd=!0,yc=K.createStream(34962,$b),Nd=yc.dtype):(yc=K.getBuffer($b))?Nd=yc.dtype:"constant"in $b?(id=2,"number"===typeof $b.constant?(de=$b.constant,Od=Kd=Xd=0):(de=0<$b.constant.length?$b.constant[0]:0,Od=1<$b.constant.length?$b.constant[1]:0,Kd=2<$b.constant.length?$b.constant[2]:0,Xd=3<$b.constant.length?$b.constant[3]:0)):(yc=Da($b.buffer)?K.createStream(34962,$b.buffer):K.getBuffer($b.buffer),Nd="type"in $b?zd[$b.type]:
yc.dtype,pd=!!$b.normalized,Ne=$b.size|0,ye=$b.offset|0,Fa=$b.stride|0,hd=$b.divisor|0);Id=f.buffer;f.buffer=yc;md=f.divisor;f.divisor=hd;Tc=f.normalized;f.normalized=pd;ud=f.offset;f.offset=ye;sd=f.size;f.size=Ne;jd=f.state;f.state=id;xd=f.stride;f.stride=Fa;Cd=f.type;f.type=Nd;Fd=f.w;f.w=Xd;oe=f.x;f.x=de;qe=f.y;f.y=Od;ue=f.z;f.z=Kd;je=ba.call(this,da,a,d);Rb.offset=je;ie=!1;he=null;ve=0;ee=!1;Oc=le=0;fd=1;we=0;pe=5126;Sd=Rd=Pd=Ld=0;Da(Rb)?(ie=!0,he=K.createStream(34962,Rb),pe=he.dtype):(he=K.getBuffer(Rb))?
pe=he.dtype:"constant"in Rb?(fd=2,"number"===typeof Rb.constant?(Pd=Rb.constant,Rd=Sd=Ld=0):(Pd=0<Rb.constant.length?Rb.constant[0]:0,Rd=1<Rb.constant.length?Rb.constant[1]:0,Sd=2<Rb.constant.length?Rb.constant[2]:0,Ld=3<Rb.constant.length?Rb.constant[3]:0)):(he=Da(Rb.buffer)?K.createStream(34962,Rb.buffer):K.getBuffer(Rb.buffer),pe="type"in Rb?zd[Rb.type]:he.dtype,ee=!!Rb.normalized,Oc=Rb.size|0,le=Rb.offset|0,we=Rb.stride|0,ve=Rb.divisor|0);me=G.buffer;G.buffer=he;He=G.divisor;G.divisor=ve;Be=G.normalized;
G.normalized=ee;re=G.offset;G.offset=le;Se=G.size;G.size=Oc;Te=G.state;G.state=fd;Oe=G.stride;G.stride=we;xe=G.type;G.type=pe;Fe=G.w;G.w=Ld;Ie=G.x;G.x=Pd;Je=G.y;G.y=Rd;Ke=G.z;G.z=Sd;Ge=pa.vert;pa.vert=2;Md=pa.frag;pa.frag=1;T.dirty=!0;c(da,a,d);da.viewportWidth=B;da.viewportHeight=L;lb[0]=p;lb[1]=q;lb[2]=g;lb[3]=x;O[0]=e;O[1]=I;O[2]=sa;O[3]=Ha;ka.blend_enable=Ea;Ua[0]=y;Ua[1]=ac;n[0]=ga;n[1]=ha;n[2]=R;n[3]=la;ka.depth_enable=D;qa[0]=P;qa[1]=ya;qa[2]=H;qa[3]=F;ka.scissor_enable=Ia;J&&(S.cpuTime+=performance.now()-
ea);ma.count=za;ma.instances=M;ma.primitive=ra;Aa[5]=Y;Aa[4]=fa;Aa[10]=oa;Aa[18]=ca;Aa[6]=na;Aa[7]=td;Aa[8]=Ka;Aa[9]=X;Aa[3]=Ib;t.buffer=qc;t.divisor=Nb;t.normalized=ib;t.offset=Fb;t.size=Cb;t.state=vb;t.stride=gb;t.type=Xb;t.w=Ob;t.x=pb;t.y=Sa;t.z=Tb;ic&&K.destroyStream(hb);m.buffer=Pa;m.divisor=Bc;m.normalized=Ra;m.offset=Jb;m.size=Db;m.state=Na;m.stride=yd;m.type=Ya;m.w=Kb;m.x=Lb;m.y=kb;m.z=Oa;u.buffer=Yb;u.divisor=Qa;u.normalized=tb;u.offset=ub;u.size=Ta;u.state=mb;u.stride=fc;u.type=zc;u.w=uc;
u.x=bb;u.y=jc;u.z=ia;Mc&&K.destroyStream(zb);b.buffer=ed;b.divisor=od;b.normalized=nc;b.offset=vc;b.size=gc;b.state=db;b.stride=rc;b.type=Sb;b.w=Wb;b.x=cc;b.y=hc;b.z=xc;z.buffer=Ac;z.divisor=ad;z.normalized=Qc;z.offset=Rc;z.size=Sc;z.state=Xc;z.stride=wd;z.type=bd;z.w=Yc;z.x=kc;z.y=bc;z.z=Zc;cd&&K.destroyStream(yc);f.buffer=Id;f.divisor=md;f.normalized=Tc;f.offset=ud;f.size=sd;f.state=jd;f.stride=xd;f.type=Cd;f.w=Fd;f.x=oe;f.y=qe;f.z=ue;ie&&K.destroyStream(he);G.buffer=me;G.divisor=He;G.normalized=
Be;G.offset=re;G.size=Se;G.state=Te;G.stride=Oe;G.type=xe;G.w=Fe;G.x=Ie;G.y=Je;G.z=Ke;pa.vert=Ge;pa.frag=Md;T.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na){var Cc,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,td,Gb,ha,L,sa,Ea,qa,ya,Ia,la,aa;Cc=e.attributes;
Y=e.buffer;fa=e.context;R=e.current;I=e.draw;y=e.elements;k=e.extensions;P=e.framebuffer;Q=e.gl;za=e.isBufferArgs;oa=e.next;w=e.shader;K=e.uniforms;da=e.vao;T=oa.blend_color;ma=R.blend_color;ra=oa.blend_equation;Ca=R.blend_equation;xa=oa.blend_func;ga=R.blend_func;Da=oa.colorMask;ka=R.colorMask;pa=oa.depth_range;Aa=R.depth_range;Ha=oa.polygonOffset_offset;O=R.polygonOffset_offset;ac=oa.sample_coverage;Ua=R.sample_coverage;r=oa.scissor_box;n=R.scissor_box;B=oa.stencil_func;ua=R.stencil_func;va=oa.stencil_opBack;
td=R.stencil_opBack;Gb=oa.stencil_opFront;ha=R.stencil_opFront;L=oa.viewport;sa=R.viewport;Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};qa={divisor:1,offset:8,stride:8};ya={divisor:1,offset:8,stride:8};Ia={divisor:1,offset:16,stride:8};la={divisor:1,offset:16,stride:8};aa={divisor:1,offset:0,stride:4};return{batch:function(d,r){var w,L,p,e,t,K;w=P.next;w!==P.cur&&(w?Q.bindFramebuffer(36160,w.framebuffer):Q.bindFramebuffer(36160,null),P.cur=w);if(R.dirty){var T,
N,v,A,H,F,J,E,M,ra,xa,U,Z,X,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc;T=oa.dither;T!==R.dither&&(T?Q.enable(3024):Q.disable(3024),R.dither=T);N=oa.depth_func;N!==R.depth_func&&(Q.depthFunc(N),R.depth_func=N);v=pa[0];A=pa[1];if(v!==Aa[0]||A!==Aa[1])Q.depthRange(v,A),Aa[0]=v,Aa[1]=A;H=oa.depth_mask;H!==R.depth_mask&&(Q.depthMask(H),R.depth_mask=H);F=Da[0];J=Da[1];E=Da[2];M=Da[3];if(F!==ka[0]||J!==ka[1]||E!==ka[2]||M!==ka[3])Q.colorMask(F,J,E,M),ka[0]=F,ka[1]=J,ka[2]=E,ka[3]=M;ra=oa.cull_enable;
ra!==R.cull_enable&&(ra?Q.enable(2884):Q.disable(2884),R.cull_enable=ra);xa=oa.cull_face;xa!==R.cull_face&&(Q.cullFace(xa),R.cull_face=xa);U=oa.frontFace;U!==R.frontFace&&(Q.frontFace(U),R.frontFace=U);Z=oa.lineWidth;Z!==R.lineWidth&&(Q.lineWidth(Z),R.lineWidth=Z);X=oa.polygonOffset_enable;X!==R.polygonOffset_enable&&(X?Q.enable(32823):Q.disable(32823),R.polygonOffset_enable=X);be=Ha[0];Ce=Ha[1];if(be!==O[0]||Ce!==O[1])Q.polygonOffset(be,Ce),O[0]=be,O[1]=Ce;Ze=oa.sample_alpha;Ze!==R.sample_alpha&&
(Ze?Q.enable(32926):Q.disable(32926),R.sample_alpha=Ze);Re=oa.sample_enable;Re!==R.sample_enable&&(Re?Q.enable(32928):Q.disable(32928),R.sample_enable=Re);Hd=ac[0];Ae=ac[1];if(Hd!==Ua[0]||Ae!==Ua[1])Q.sampleCoverage(Hd,Ae),Ua[0]=Hd,Ua[1]=Ae;te=oa.stencil_mask;te!==R.stencil_mask&&(Q.stencilMask(te),R.stencil_mask=te);Zd=B[0];Bd=B[1];$d=B[2];if(Zd!==ua[0]||Bd!==ua[1]||$d!==ua[2])Q.stencilFunc(Zd,Bd,$d),ua[0]=Zd,ua[1]=Bd,ua[2]=$d;ld=Gb[0];$c=Gb[1];rd=Gb[2];Lc=Gb[3];if(ld!==ha[0]||$c!==ha[1]||rd!==ha[2]||
Lc!==ha[3])Q.stencilOpSeparate(ld,$c,rd,Lc),ha[0]=ld,ha[1]=$c,ha[2]=rd,ha[3]=Lc;nd=va[0];Gc=va[1];dd=va[2];Pc=va[3];if(nd!==td[0]||Gc!==td[1]||dd!==td[2]||Pc!==td[3])Q.stencilOpSeparate(nd,Gc,dd,Pc),td[0]=nd,td[1]=Gc,td[2]=dd,td[3]=Pc}Q.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;Q.enable(3042);R.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;Q.blendFuncSeparate(770,771,773,1);ga[0]=770;ga[1]=771;ga[2]=773;ga[3]=1;Q.enable(3089);R.scissor_enable=!0;Q.disable(2960);
R.stencil_enable=!1;if(L=R.profile)p=performance.now(),S.count+=r;Q.useProgram(V.program);e=k.angle_instanced_arrays;var kd,Ab,Eb,tc,wb;da.setVAO(null);kd=ca.location;Ab=Cc[kd];Ab.buffer||Q.enableVertexAttribArray(kd);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==g||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)Q.bindBuffer(34962,g.buffer),Q.vertexAttribPointer(kd,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=g,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(e.vertexAttribDivisorANGLE(kd,
0),Ab.divisor=0);Eb=D.location;tc=Cc[Eb];tc.buffer||Q.enableVertexAttribArray(Eb);if(5126!==tc.type||1!==tc.size||tc.buffer!==h||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)Q.bindBuffer(34962,h.buffer),Q.vertexAttribPointer(Eb,1,5126,!1,8,4),tc.type=5126,tc.size=1,tc.buffer=h,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(e.vertexAttribDivisorANGLE(Eb,0),tc.divisor=0);(wb=I.elements)?Q.bindBuffer(34963,wb.buffer.buffer):da.currentVAO&&(wb=y.getElements(da.currentVAO.elements))&&Q.bindBuffer(34963,
wb.buffer.buffer);for(t=0;t<r;++t){K=d[t];var wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd;wc=K.viewport;Bb=wc.x|0;Jc=wc.y|0;lc="width"in wc?wc.width|
0:fa.framebufferWidth-Bb;Hc="height"in wc?wc.height|0:fa.framebufferHeight-Jc;Wc=fa.viewportWidth;fa.viewportWidth=lc;Vc=fa.viewportHeight;fa.viewportHeight=Hc;Q.viewport(Bb,Jc,lc,Hc);sa[0]=Bb;sa[1]=Jc;sa[2]=lc;sa[3]=Hc;(Dc=m.call(this,fa,K,t))?Q.enable(2929):Q.disable(2929);R.depth_enable=Dc;dc=K.viewport;Ic=dc.x|0;oc=dc.y|0;pc="width"in dc?dc.width|0:fa.framebufferWidth-Ic;mc="height"in dc?dc.height|0:fa.framebufferHeight-oc;Q.scissor(Ic,oc,pc,mc);n[0]=Ic;n[1]=oc;n[2]=pc;n[3]=mc;qa.buffer=K.positionBuffer;
ec=!1;$a=null;Fc=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=vd=0;za(qa)?(ec=!0,$a=Y.createStream(34962,qa),Va=$a.dtype):($a=Y.getBuffer(qa))?Va=$a.dtype:"constant"in qa?(ab=2,"number"===typeof qa.constant?(Hb=qa.constant,Ib=qc=vd=0):(Hb=0<qa.constant.length?qa.constant[0]:0,Ib=1<qa.constant.length?qa.constant[1]:0,qc=2<qa.constant.length?qa.constant[2]:0,vd=3<qa.constant.length?qa.constant[3]:0)):($a=za(qa.buffer)?Y.createStream(34962,qa.buffer):Y.getBuffer(qa.buffer),Va="type"in qa?Ea[qa.type]:$a.dtype,
xb=!!qa.normalized,Mb=qa.size|0,cb=qa.offset|0,nb=qa.stride|0,Fc=qa.divisor|0);Nb=ja.location;ib=Cc[Nb];if(1===ab){ib.buffer||Q.enableVertexAttribArray(Nb);Fb=Mb||2;if(ib.type!==Va||ib.size!==Fb||ib.buffer!==$a||ib.normalized!==xb||ib.offset!==cb||ib.stride!==nb)Q.bindBuffer(34962,$a.buffer),Q.vertexAttribPointer(Nb,Fb,Va,xb,nb,cb),ib.type=Va,ib.size=Fb,ib.buffer=$a,ib.normalized=xb,ib.offset=cb,ib.stride=nb;ib.divisor!==Fc&&(e.vertexAttribDivisorANGLE(Nb,Fc),ib.divisor=Fc)}else if(ib.buffer&&(Q.disableVertexAttribArray(Nb),
ib.buffer=null),ib.x!==Hb||ib.y!==Ib||ib.z!==qc||ib.w!==vd)Q.vertexAttrib4f(Nb,Hb,Ib,qc,vd),ib.x=Hb,ib.y=Ib,ib.z=qc,ib.w=vd;Ia.buffer=K.positionBuffer;Cb=!1;vb=null;gb=0;Xb=!1;pb=Ob=0;Sa=1;Tb=0;yb=5126;Ja=ob=hb=ic=0;za(Ia)?(Cb=!0,vb=Y.createStream(34962,Ia),yb=vb.dtype):(vb=Y.getBuffer(Ia))?yb=vb.dtype:"constant"in Ia?(Sa=2,"number"===typeof Ia.constant?(hb=Ia.constant,ob=Ja=ic=0):(hb=0<Ia.constant.length?Ia.constant[0]:0,ob=1<Ia.constant.length?Ia.constant[1]:0,Ja=2<Ia.constant.length?Ia.constant[2]:
0,ic=3<Ia.constant.length?Ia.constant[3]:0)):(vb=za(Ia.buffer)?Y.createStream(34962,Ia.buffer):Y.getBuffer(Ia.buffer),yb="type"in Ia?Ea[Ia.type]:vb.dtype,Xb=!!Ia.normalized,pb=Ia.size|0,Ob=Ia.offset|0,Tb=Ia.stride|0,gb=Ia.divisor|0);qb=z.location;La=Cc[qb];if(1===Sa){La.buffer||Q.enableVertexAttribArray(qb);eb=pb||2;if(La.type!==yb||La.size!==eb||La.buffer!==vb||La.normalized!==Xb||La.offset!==Ob||La.stride!==Tb)Q.bindBuffer(34962,vb.buffer),Q.vertexAttribPointer(qb,eb,yb,Xb,Tb,Ob),La.type=yb,La.size=
eb,La.buffer=vb,La.normalized=Xb,La.offset=Ob,La.stride=Tb;La.divisor!==gb&&(e.vertexAttribDivisorANGLE(qb,gb),La.divisor=gb)}else if(La.buffer&&(Q.disableVertexAttribArray(qb),La.buffer=null),La.x!==hb||La.y!==ob||La.z!==Ja||La.w!==ic)Q.vertexAttrib4f(qb,hb,ob,Ja,ic),La.x=hb,La.y=ob,La.z=Ja,La.w=ic;ya.buffer=K.positionFractBuffer;fb=!1;Ma=null;jb=0;Wa=!1;rb=sb=0;Pa=1;Bc=0;Ra=5126;ia=Na=Db=Jb=0;za(ya)?(fb=!0,Ma=Y.createStream(34962,ya),Ra=Ma.dtype):(Ma=Y.getBuffer(ya))?Ra=Ma.dtype:"constant"in ya?
(Pa=2,"number"===typeof ya.constant?(Db=ya.constant,Na=ia=Jb=0):(Db=0<ya.constant.length?ya.constant[0]:0,Na=1<ya.constant.length?ya.constant[1]:0,ia=2<ya.constant.length?ya.constant[2]:0,Jb=3<ya.constant.length?ya.constant[3]:0)):(Ma=za(ya.buffer)?Y.createStream(34962,ya.buffer):Y.getBuffer(ya.buffer),Ra="type"in ya?Ea[ya.type]:Ma.dtype,Wa=!!ya.normalized,rb=ya.size|0,sb=ya.offset|0,Bc=ya.stride|0,jb=ya.divisor|0);Ya=b.location;Kb=Cc[Ya];if(1===Pa){Kb.buffer||Q.enableVertexAttribArray(Ya);Lb=rb||
2;if(Kb.type!==Ra||Kb.size!==Lb||Kb.buffer!==Ma||Kb.normalized!==Wa||Kb.offset!==sb||Kb.stride!==Bc)Q.bindBuffer(34962,Ma.buffer),Q.vertexAttribPointer(Ya,Lb,Ra,Wa,Bc,sb),Kb.type=Ra,Kb.size=Lb,Kb.buffer=Ma,Kb.normalized=Wa,Kb.offset=sb,Kb.stride=Bc;Kb.divisor!==jb&&(e.vertexAttribDivisorANGLE(Ya,jb),Kb.divisor=jb)}else if(Kb.buffer&&(Q.disableVertexAttribArray(Ya),Kb.buffer=null),Kb.x!==Db||Kb.y!==Na||Kb.z!==ia||Kb.w!==Jb)Q.vertexAttrib4f(Ya,Db,Na,ia,Jb),Kb.x=Db,Kb.y=Na,Kb.z=ia,Kb.w=Jb;la.buffer=
K.positionFractBuffer;kb=!1;Oa=null;Yb=0;Qa=!1;ub=tb=0;Ta=1;mb=0;fc=5126;jc=bb=uc=zc=0;za(la)?(kb=!0,Oa=Y.createStream(34962,la),fc=Oa.dtype):(Oa=Y.getBuffer(la))?fc=Oa.dtype:"constant"in la?(Ta=2,"number"===typeof la.constant?(uc=la.constant,bb=jc=zc=0):(uc=0<la.constant.length?la.constant[0]:0,bb=1<la.constant.length?la.constant[1]:0,jc=2<la.constant.length?la.constant[2]:0,zc=3<la.constant.length?la.constant[3]:0)):(Oa=za(la.buffer)?Y.createStream(34962,la.buffer):Y.getBuffer(la.buffer),fc="type"in
la?Ea[la.type]:Oa.dtype,Qa=!!la.normalized,ub=la.size|0,tb=la.offset|0,mb=la.stride|0,Yb=la.divisor|0);gd=W.location;Xa=Cc[gd];if(1===Ta){Xa.buffer||Q.enableVertexAttribArray(gd);Mc=ub||2;if(Xa.type!==fc||Xa.size!==Mc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)Q.bindBuffer(34962,Oa.buffer),Q.vertexAttribPointer(gd,Mc,fc,Qa,mb,tb),Xa.type=fc,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Yb&&(e.vertexAttribDivisorANGLE(gd,Yb),Xa.divisor=Yb)}else if(Xa.buffer&&
(Q.disableVertexAttribArray(gd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)Q.vertexAttrib4f(gd,uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;aa.buffer=K.colorBuffer;zb=!1;Za=null;Ub=0;sc=!1;Pb=Vb=0;Kc=1;Qb=0;Qd=5126;ed=Nc=Ed=Ec=0;za(aa)?(zb=!0,Za=Y.createStream(34962,aa),Qd=Za.dtype):(Za=Y.getBuffer(aa))?Qd=Za.dtype:"constant"in aa?(Kc=2,"number"===typeof aa.constant?(Ed=aa.constant,Nc=ed=Ec=0):(Ed=0<aa.constant.length?aa.constant[0]:0,Nc=1<aa.constant.length?aa.constant[1]:0,ed=2<
aa.constant.length?aa.constant[2]:0,Ec=3<aa.constant.length?aa.constant[3]:0)):(Za=za(aa.buffer)?Y.createStream(34962,aa.buffer):Y.getBuffer(aa.buffer),Qd="type"in aa?Ea[aa.type]:Za.dtype,sc=!!aa.normalized,Pb=aa.size|0,Vb=aa.offset|0,Qb=aa.stride|0,Ub=aa.divisor|0);od=f.location;nc=Cc[od];if(1===Kc){nc.buffer||Q.enableVertexAttribArray(od);vc=Pb||4;if(nc.type!==Qd||nc.size!==vc||nc.buffer!==Za||nc.normalized!==sc||nc.offset!==Vb||nc.stride!==Qb)Q.bindBuffer(34962,Za.buffer),Q.vertexAttribPointer(od,
vc,Qd,sc,Qb,Vb),nc.type=Qd,nc.size=vc,nc.buffer=Za,nc.normalized=sc,nc.offset=Vb,nc.stride=Qb;nc.divisor!==Ub&&(e.vertexAttribDivisorANGLE(od,Ub),nc.divisor=Ub)}else if(nc.buffer&&(Q.disableVertexAttribArray(od),nc.buffer=null),nc.x!==Ed||nc.y!==Nc||nc.z!==ed||nc.w!==Ec)Q.vertexAttrib4f(od,Ed,Nc,ed,Ec),nc.x=Ed,nc.y=Nc,nc.z=ed,nc.w=Ec;gc=K.scale;db=gc[0];Sb=gc[1];t&&rc===db&&Wb===Sb||(rc=db,Wb=Sb,Q.uniform2f(c.location,db,Sb));cc=K.scaleFract;hc=cc[0];Ac=cc[1];t&&xc===hc&&ad===Ac||(xc=hc,ad=Ac,Q.uniform2f(l.location,
hc,Ac));Qc=K.translate;Rc=Qc[0];Xc=Qc[1];t&&Sc===Rc&&wd===Xc||(Sc=Rc,wd=Xc,Q.uniform2f(wa.location,Rc,Xc));bd=K.translateFract;Yc=bd[0];bc=bd[1];t&&kc===Yc&&Zc===bc||(kc=Yc,Zc=bc,Q.uniform2f(x.location,Yc,bc));Uc=K.thickness;t&&cd===Uc||(cd=Uc,Q.uniform1f(a.location,Uc));yc=K.depth;t&&hd===yc||(hd=yc,Q.uniform1f(q.location,yc));pd=u.call(this,fa,K,t);ye=pd[0];id=pd[1];Nd=pd[2];de=pd[3];t&&Ne===ye&&Fa===id&&Xd===Nd&&Od===de||(Ne=ye,Fa=id,Xd=Nd,Od=de,Q.uniform4f(na.location,ye,id,Nd,de));Kd=K.dashLength;
t&&Id===Kd||(Id=Kd,Q.uniform1f(ba.location,Kd));md=K.opacity;t&&Tc===md||(Tc=md,Q.uniform1f(C.location,md));(ud=K.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);sd=ud._texture;Q.uniform1i(G.location,sd.bind());jd=K.count;0<jd?wb?e.drawElementsInstancedANGLE(5,4,wb.type,0<<(wb.type-5121>>1),jd):e.drawArraysInstancedANGLE(5,0,4,jd):0>jd&&(wb?Q.drawElements(5,4,wb.type,0<<(wb.type-5121>>1)):Q.drawArrays(5,0,4));fa.viewportWidth=Wc;fa.viewportHeight=Vc;ec&&Y.destroyStream($a);Cb&&Y.destroyStream(vb);
fb&&Y.destroyStream(Ma);kb&&Y.destroyStream(Oa);zb&&Y.destroyStream(Za);sd.unbind()}R.dirty=!0;da.setVAO(null);L&&(S.cpuTime+=performance.now()-p)},draw:function(d){var r,w,L,e,m,K,t,T,v,A,F,J,u,E,M,ra,xa,U,V,Z,X,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb;r=P.next;r!==P.cur&&(r?
Q.bindFramebuffer(36160,r.framebuffer):Q.bindFramebuffer(36160,null),P.cur=r);if(R.dirty){var ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb;ub=oa.dither;ub!==R.dither&&(ub?Q.enable(3024):Q.disable(3024),R.dither=ub);Ta=oa.depth_func;Ta!==R.depth_func&&(Q.depthFunc(Ta),R.depth_func=Ta);mb=pa[0];fc=pa[1];if(mb!==Aa[0]||fc!==Aa[1])Q.depthRange(mb,fc),Aa[0]=mb,Aa[1]=fc;zc=oa.depth_mask;zc!==R.depth_mask&&(Q.depthMask(zc),R.depth_mask=zc);uc=Da[0];bb=Da[1];
jc=Da[2];gd=Da[3];if(uc!==ka[0]||bb!==ka[1]||jc!==ka[2]||gd!==ka[3])Q.colorMask(uc,bb,jc,gd),ka[0]=uc,ka[1]=bb,ka[2]=jc,ka[3]=gd;Xa=oa.cull_enable;Xa!==R.cull_enable&&(Xa?Q.enable(2884):Q.disable(2884),R.cull_enable=Xa);Mc=oa.cull_face;Mc!==R.cull_face&&(Q.cullFace(Mc),R.cull_face=Mc);zb=oa.frontFace;zb!==R.frontFace&&(Q.frontFace(zb),R.frontFace=zb);Za=oa.lineWidth;Za!==R.lineWidth&&(Q.lineWidth(Za),R.lineWidth=Za);Ub=oa.polygonOffset_enable;Ub!==R.polygonOffset_enable&&(Ub?Q.enable(32823):Q.disable(32823),
R.polygonOffset_enable=Ub);sc=Ha[0];Vb=Ha[1];if(sc!==O[0]||Vb!==O[1])Q.polygonOffset(sc,Vb),O[0]=sc,O[1]=Vb;Pb=oa.sample_alpha;Pb!==R.sample_alpha&&(Pb?Q.enable(32926):Q.disable(32926),R.sample_alpha=Pb);Kc=oa.sample_enable;Kc!==R.sample_enable&&(Kc?Q.enable(32928):Q.disable(32928),R.sample_enable=Kc);Qb=ac[0];Qd=ac[1];if(Qb!==Ua[0]||Qd!==Ua[1])Q.sampleCoverage(Qb,Qd),Ua[0]=Qb,Ua[1]=Qd;Ec=oa.stencil_mask;Ec!==R.stencil_mask&&(Q.stencilMask(Ec),R.stencil_mask=Ec);Ed=B[0];Nc=B[1];ed=B[2];if(Ed!==ua[0]||
Nc!==ua[1]||ed!==ua[2])Q.stencilFunc(Ed,Nc,ed),ua[0]=Ed,ua[1]=Nc,ua[2]=ed;od=Gb[0];nc=Gb[1];vc=Gb[2];gc=Gb[3];if(od!==ha[0]||nc!==ha[1]||vc!==ha[2]||gc!==ha[3])Q.stencilOpSeparate(od,nc,vc,gc),ha[0]=od,ha[1]=nc,ha[2]=vc,ha[3]=gc;db=va[0];rc=va[1];Sb=va[2];Wb=va[3];if(db!==td[0]||rc!==td[1]||Sb!==td[2]||Wb!==td[3])Q.stencilOpSeparate(db,rc,Sb,Wb),td[0]=db,td[1]=rc,td[2]=Sb,td[3]=Wb}w=d.viewport;L=w.x|0;e=w.y|0;m="width"in w?w.width|0:fa.framebufferWidth-L;K="height"in w?w.height|0:fa.framebufferHeight-
e;t=fa.viewportWidth;fa.viewportWidth=m;T=fa.viewportHeight;fa.viewportHeight=K;Q.viewport(L,e,m,K);sa[0]=L;sa[1]=e;sa[2]=m;sa[3]=K;Q.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;Q.enable(3042);R.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;Q.blendFuncSeparate(770,771,773,1);ga[0]=770;ga[1]=771;ga[2]=773;ga[3]=1;(v=H.call(this,fa,d,0))?Q.enable(2929):Q.disable(2929);R.depth_enable=v;A=d.viewport;F=A.x|0;J=A.y|0;u="width"in A?A.width|0:fa.framebufferWidth-F;E=
"height"in A?A.height|0:fa.framebufferHeight-J;Q.scissor(F,J,u,E);n[0]=F;n[1]=J;n[2]=u;n[3]=E;Q.enable(3089);R.scissor_enable=!0;Q.disable(2960);R.stencil_enable=!1;if(M=R.profile)ra=performance.now(),S.count++;Q.useProgram(N.program);xa=k.angle_instanced_arrays;da.setVAO(null);qa.buffer=d.positionBuffer;U=!1;V=null;Z=0;X=!1;Ce=be=0;Ze=1;Re=0;Hd=5126;Bd=Zd=te=Ae=0;za(qa)?(U=!0,V=Y.createStream(34962,qa),Hd=V.dtype):(V=Y.getBuffer(qa))?Hd=V.dtype:"constant"in qa?(Ze=2,"number"===typeof qa.constant?
(te=qa.constant,Zd=Bd=Ae=0):(te=0<qa.constant.length?qa.constant[0]:0,Zd=1<qa.constant.length?qa.constant[1]:0,Bd=2<qa.constant.length?qa.constant[2]:0,Ae=3<qa.constant.length?qa.constant[3]:0)):(V=za(qa.buffer)?Y.createStream(34962,qa.buffer):Y.getBuffer(qa.buffer),Hd="type"in qa?Ea[qa.type]:V.dtype,X=!!qa.normalized,Ce=qa.size|0,be=qa.offset|0,Re=qa.stride|0,Z=qa.divisor|0);$d=ja.location;ld=Cc[$d];if(1===Ze){ld.buffer||Q.enableVertexAttribArray($d);$c=Ce||2;if(ld.type!==Hd||ld.size!==$c||ld.buffer!==
V||ld.normalized!==X||ld.offset!==be||ld.stride!==Re)Q.bindBuffer(34962,V.buffer),Q.vertexAttribPointer($d,$c,Hd,X,Re,be),ld.type=Hd,ld.size=$c,ld.buffer=V,ld.normalized=X,ld.offset=be,ld.stride=Re;ld.divisor!==Z&&(xa.vertexAttribDivisorANGLE($d,Z),ld.divisor=Z)}else if(ld.buffer&&(Q.disableVertexAttribArray($d),ld.buffer=null),ld.x!==te||ld.y!==Zd||ld.z!==Bd||ld.w!==Ae)Q.vertexAttrib4f($d,te,Zd,Bd,Ae),ld.x=te,ld.y=Zd,ld.z=Bd,ld.w=Ae;Ia.buffer=d.positionBuffer;rd=!1;Lc=null;nd=0;Gc=!1;Pc=dd=0;kd=
1;Ab=0;Eb=5126;Bb=wc=wb=tc=0;za(Ia)?(rd=!0,Lc=Y.createStream(34962,Ia),Eb=Lc.dtype):(Lc=Y.getBuffer(Ia))?Eb=Lc.dtype:"constant"in Ia?(kd=2,"number"===typeof Ia.constant?(wb=Ia.constant,wc=Bb=tc=0):(wb=0<Ia.constant.length?Ia.constant[0]:0,wc=1<Ia.constant.length?Ia.constant[1]:0,Bb=2<Ia.constant.length?Ia.constant[2]:0,tc=3<Ia.constant.length?Ia.constant[3]:0)):(Lc=za(Ia.buffer)?Y.createStream(34962,Ia.buffer):Y.getBuffer(Ia.buffer),Eb="type"in Ia?Ea[Ia.type]:Lc.dtype,Gc=!!Ia.normalized,Pc=Ia.size|
0,dd=Ia.offset|0,Ab=Ia.stride|0,nd=Ia.divisor|0);Jc=z.location;lc=Cc[Jc];if(1===kd){lc.buffer||Q.enableVertexAttribArray(Jc);Hc=Pc||2;if(lc.type!==Eb||lc.size!==Hc||lc.buffer!==Lc||lc.normalized!==Gc||lc.offset!==dd||lc.stride!==Ab)Q.bindBuffer(34962,Lc.buffer),Q.vertexAttribPointer(Jc,Hc,Eb,Gc,Ab,dd),lc.type=Eb,lc.size=Hc,lc.buffer=Lc,lc.normalized=Gc,lc.offset=dd,lc.stride=Ab;lc.divisor!==nd&&(xa.vertexAttribDivisorANGLE(Jc,nd),lc.divisor=nd)}else if(lc.buffer&&(Q.disableVertexAttribArray(Jc),lc.buffer=
null),lc.x!==wb||lc.y!==wc||lc.z!==Bb||lc.w!==tc)Q.vertexAttrib4f(Jc,wb,wc,Bb,tc),lc.x=wb,lc.y=wc,lc.z=Bb,lc.w=tc;ya.buffer=d.positionFractBuffer;Wc=!1;Vc=null;Dc=0;dc=!1;oc=Ic=0;pc=1;mc=0;ec=5126;cb=xb=Fc=$a=0;za(ya)?(Wc=!0,Vc=Y.createStream(34962,ya),ec=Vc.dtype):(Vc=Y.getBuffer(ya))?ec=Vc.dtype:"constant"in ya?(pc=2,"number"===typeof ya.constant?(Fc=ya.constant,xb=cb=$a=0):(Fc=0<ya.constant.length?ya.constant[0]:0,xb=1<ya.constant.length?ya.constant[1]:0,cb=2<ya.constant.length?ya.constant[2]:
0,$a=3<ya.constant.length?ya.constant[3]:0)):(Vc=za(ya.buffer)?Y.createStream(34962,ya.buffer):Y.getBuffer(ya.buffer),ec="type"in ya?Ea[ya.type]:Vc.dtype,dc=!!ya.normalized,oc=ya.size|0,Ic=ya.offset|0,mc=ya.stride|0,Dc=ya.divisor|0);Mb=b.location;ab=Cc[Mb];if(1===pc){ab.buffer||Q.enableVertexAttribArray(Mb);nb=oc||2;if(ab.type!==ec||ab.size!==nb||ab.buffer!==Vc||ab.normalized!==dc||ab.offset!==Ic||ab.stride!==mc)Q.bindBuffer(34962,Vc.buffer),Q.vertexAttribPointer(Mb,nb,ec,dc,mc,Ic),ab.type=ec,ab.size=
nb,ab.buffer=Vc,ab.normalized=dc,ab.offset=Ic,ab.stride=mc;ab.divisor!==Dc&&(xa.vertexAttribDivisorANGLE(Mb,Dc),ab.divisor=Dc)}else if(ab.buffer&&(Q.disableVertexAttribArray(Mb),ab.buffer=null),ab.x!==Fc||ab.y!==xb||ab.z!==cb||ab.w!==$a)Q.vertexAttrib4f(Mb,Fc,xb,cb,$a),ab.x=Fc,ab.y=xb,ab.z=cb,ab.w=$a;la.buffer=d.positionFractBuffer;Va=!1;vd=null;Hb=0;Ib=!1;Nb=qc=0;ib=1;Fb=0;Cb=5126;Ob=Xb=gb=vb=0;za(la)?(Va=!0,vd=Y.createStream(34962,la),Cb=vd.dtype):(vd=Y.getBuffer(la))?Cb=vd.dtype:"constant"in la?
(ib=2,"number"===typeof la.constant?(gb=la.constant,Xb=Ob=vb=0):(gb=0<la.constant.length?la.constant[0]:0,Xb=1<la.constant.length?la.constant[1]:0,Ob=2<la.constant.length?la.constant[2]:0,vb=3<la.constant.length?la.constant[3]:0)):(vd=za(la.buffer)?Y.createStream(34962,la.buffer):Y.getBuffer(la.buffer),Cb="type"in la?Ea[la.type]:vd.dtype,Ib=!!la.normalized,Nb=la.size|0,qc=la.offset|0,Fb=la.stride|0,Hb=la.divisor|0);pb=W.location;Sa=Cc[pb];if(1===ib){Sa.buffer||Q.enableVertexAttribArray(pb);Tb=Nb||
2;if(Sa.type!==Cb||Sa.size!==Tb||Sa.buffer!==vd||Sa.normalized!==Ib||Sa.offset!==qc||Sa.stride!==Fb)Q.bindBuffer(34962,vd.buffer),Q.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Sa.type=Cb,Sa.size=Tb,Sa.buffer=vd,Sa.normalized=Ib,Sa.offset=qc,Sa.stride=Fb;Sa.divisor!==Hb&&(xa.vertexAttribDivisorANGLE(pb,Hb),Sa.divisor=Hb)}else if(Sa.buffer&&(Q.disableVertexAttribArray(pb),Sa.buffer=null),Sa.x!==gb||Sa.y!==Xb||Sa.z!==Ob||Sa.w!==vb)Q.vertexAttrib4f(pb,gb,Xb,Ob,vb),Sa.x=gb,Sa.y=Xb,Sa.z=Ob,Sa.w=vb;aa.buffer=
d.colorBuffer;yb=!1;ic=null;hb=0;ob=!1;qb=Ja=0;La=1;eb=0;fb=5126;sb=Wa=jb=Ma=0;za(aa)?(yb=!0,ic=Y.createStream(34962,aa),fb=ic.dtype):(ic=Y.getBuffer(aa))?fb=ic.dtype:"constant"in aa?(La=2,"number"===typeof aa.constant?(jb=aa.constant,Wa=sb=Ma=0):(jb=0<aa.constant.length?aa.constant[0]:0,Wa=1<aa.constant.length?aa.constant[1]:0,sb=2<aa.constant.length?aa.constant[2]:0,Ma=3<aa.constant.length?aa.constant[3]:0)):(ic=za(aa.buffer)?Y.createStream(34962,aa.buffer):Y.getBuffer(aa.buffer),fb="type"in aa?
Ea[aa.type]:ic.dtype,ob=!!aa.normalized,qb=aa.size|0,Ja=aa.offset|0,eb=aa.stride|0,hb=aa.divisor|0);rb=f.location;Pa=Cc[rb];if(1===La){Pa.buffer||Q.enableVertexAttribArray(rb);Bc=qb||4;if(Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==ic||Pa.normalized!==ob||Pa.offset!==Ja||Pa.stride!==eb)Q.bindBuffer(34962,ic.buffer),Q.vertexAttribPointer(rb,Bc,fb,ob,eb,Ja),Pa.type=fb,Pa.size=Bc,Pa.buffer=ic,Pa.normalized=ob,Pa.offset=Ja,Pa.stride=eb;Pa.divisor!==hb&&(xa.vertexAttribDivisorANGLE(rb,hb),Pa.divisor=hb)}else if(Pa.buffer&&
(Q.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==jb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==Ma)Q.vertexAttrib4f(rb,jb,Wa,sb,Ma),Pa.x=jb,Pa.y=Wa,Pa.z=sb,Pa.w=Ma;Ra=ca.location;Jb=Cc[Ra];Jb.buffer||Q.enableVertexAttribArray(Ra);if(5126!==Jb.type||1!==Jb.size||Jb.buffer!==g||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)Q.bindBuffer(34962,g.buffer),Q.vertexAttribPointer(Ra,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=g,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(xa.vertexAttribDivisorANGLE(Ra,
0),Jb.divisor=0);Db=D.location;Na=Cc[Db];Na.buffer||Q.enableVertexAttribArray(Db);if(5126!==Na.type||1!==Na.size||Na.buffer!==h||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)Q.bindBuffer(34962,h.buffer),Q.vertexAttribPointer(Db,1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=h,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(xa.vertexAttribDivisorANGLE(Db,0),Na.divisor=0);ia=d.scale;Q.uniform2f(c.location,ia[0],ia[1]);Ya=d.scaleFract;Q.uniform2f(l.location,Ya[0],Ya[1]);Kb=d.translate;
Q.uniform2f(wa.location,Kb[0],Kb[1]);Lb=d.translateFract;Q.uniform2f(x.location,Lb[0],Lb[1]);Q.uniform1f(a.location,d.thickness);Q.uniform1f(q.location,d.depth);kb=p.call(this,fa,d,0);Q.uniform4f(na.location,kb[0],kb[1],kb[2],kb[3]);Q.uniform1f(ba.location,d.dashLength);Q.uniform1f(C.location,d.opacity);(Oa=d.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);Yb=Oa._texture;Q.uniform1i(G.location,Yb.bind());(Qa=I.elements)?Q.bindBuffer(34963,Qa.buffer.buffer):da.currentVAO&&(Qa=y.getElements(da.currentVAO.elements))&&
Q.bindBuffer(34963,Qa.buffer.buffer);tb=d.count;0<tb?Qa?xa.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),tb):xa.drawArraysInstancedANGLE(5,0,4,tb):0>tb&&(Qa?Q.drawElements(5,4,Qa.type,0<<(Qa.type-5121>>1)):Q.drawArrays(5,0,4));R.dirty=!0;da.setVAO(null);fa.viewportWidth=t;fa.viewportHeight=T;M&&(S.cpuTime+=performance.now()-ra);U&&Y.destroyStream(V);rd&&Y.destroyStream(Lc);Wc&&Y.destroyStream(Vc);Va&&Y.destroyStream(vd);yb&&Y.destroyStream(ic);Yb.unbind()},scope:function(a,c,b){var f,
k,n,l,B,p,O,q,e,x,m,z,sa,Ha,y,ac,G,ga,ha,C,D,Q,N,ua,P,da,H,u,W,ka,V,Ua,ba,Aa,pa,va,Da,ja,Gb,ma,ca,wa,na,Ca,td,Cc,X,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,ia,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,
Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe;f=a.viewport;k=f.x|0;n=f.y|0;l="width"in f?f.width|0:fa.framebufferWidth-k;B="height"in f?f.height|0:fa.framebufferHeight-n;p=fa.viewportWidth;fa.viewportWidth=l;O=fa.viewportHeight;fa.viewportHeight=B;q=L[0];L[0]=k;e=L[1];L[1]=n;x=L[2];L[2]=l;m=L[3];L[3]=B;z=T[0];T[0]=0;sa=T[1];T[1]=0;Ha=T[2];T[2]=0;y=T[3];T[3]=0;ac=oa.blend_enable;oa.blend_enable=!0;G=ra[0];ra[0]=
32774;ga=ra[1];ra[1]=32774;ha=xa[0];xa[0]=770;C=xa[1];xa[1]=771;D=xa[2];xa[2]=773;Q=xa[3];xa[3]=1;N=d.call(this,fa,a,b);ua=oa.depth_enable;oa.depth_enable=N;P=a.viewport;da=P.x|0;H=P.y|0;u="width"in P?P.width|0:fa.framebufferWidth-da;W="height"in P?P.height|0:fa.framebufferHeight-H;ka=r[0];r[0]=da;V=r[1];r[1]=H;Ua=r[2];r[2]=u;ba=r[3];r[3]=W;Aa=oa.scissor_enable;oa.scissor_enable=!0;pa=oa.stencil_enable;oa.stencil_enable=!1;if(va=R.profile)Da=performance.now(),S.count++;ja=I.offset;I.offset=0;Gb=I.count;
I.count=4;ma=a.count;ca=I.instances;I.instances=ma;wa=I.primitive;I.primitive=5;na=a.dashLength;Ca=K[23];K[23]=na;td=a.dashTexture;Cc=K[24];K[24]=td;X=a.depth;Wc=K[22];K[22]=X;Vc=a.id;Dc=K[31];K[31]=Vc;dc=a.miterLimit;Ic=K[32];K[32]=dc;oc=E.call(this,fa,a,b);pc=K[33];K[33]=oc;mc=a.opacity;ec=K[10];K[10]=mc;$a=fa.pixelRatio;Fc=K[34];K[34]=$a;xb=a.scale;cb=K[6];K[6]=xb;Mb=a.scaleFract;ab=K[7];K[7]=Mb;nb=a.thickness;Va=K[21];K[21]=nb;ia=a.translate;Hb=K[8];K[8]=ia;Ib=a.translateFract;qc=K[9];K[9]=Ib;
Nb=J.call(this,fa,a,b);ib=K[3];K[3]=Nb;qa.buffer=a.positionBuffer;Fb=!1;Cb=null;vb=0;gb=!1;Ob=Xb=0;pb=1;Sa=0;Tb=5126;ob=hb=ic=yb=0;za(qa)?(Fb=!0,Cb=Y.createStream(34962,qa),Tb=Cb.dtype):(Cb=Y.getBuffer(qa))?Tb=Cb.dtype:"constant"in qa?(pb=2,"number"===typeof qa.constant?(ic=qa.constant,hb=ob=yb=0):(ic=0<qa.constant.length?qa.constant[0]:0,hb=1<qa.constant.length?qa.constant[1]:0,ob=2<qa.constant.length?qa.constant[2]:0,yb=3<qa.constant.length?qa.constant[3]:0)):(Cb=za(qa.buffer)?Y.createStream(34962,
qa.buffer):Y.getBuffer(qa.buffer),Tb="type"in qa?Ea[qa.type]:Cb.dtype,gb=!!qa.normalized,Ob=qa.size|0,Xb=qa.offset|0,Sa=qa.stride|0,vb=qa.divisor|0);Ja=M.buffer;M.buffer=Cb;qb=M.divisor;M.divisor=vb;La=M.normalized;M.normalized=gb;eb=M.offset;M.offset=Xb;fb=M.size;M.size=Ob;Ma=M.state;M.state=pb;jb=M.stride;M.stride=Sa;Wa=M.type;M.type=Tb;sb=M.w;M.w=yb;rb=M.x;M.x=ic;Pa=M.y;M.y=hb;Bc=M.z;M.z=ob;ya.buffer=a.positionFractBuffer;Ra=!1;Jb=null;Db=0;Na=!1;Ya=yd=0;Kb=1;Lb=0;kb=5126;tb=Qa=Yb=Oa=0;za(ya)?
(Ra=!0,Jb=Y.createStream(34962,ya),kb=Jb.dtype):(Jb=Y.getBuffer(ya))?kb=Jb.dtype:"constant"in ya?(Kb=2,"number"===typeof ya.constant?(Yb=ya.constant,Qa=tb=Oa=0):(Yb=0<ya.constant.length?ya.constant[0]:0,Qa=1<ya.constant.length?ya.constant[1]:0,tb=2<ya.constant.length?ya.constant[2]:0,Oa=3<ya.constant.length?ya.constant[3]:0)):(Jb=za(ya.buffer)?Y.createStream(34962,ya.buffer):Y.getBuffer(ya.buffer),kb="type"in ya?Ea[ya.type]:Jb.dtype,Na=!!ya.normalized,Ya=ya.size|0,yd=ya.offset|0,Lb=ya.stride|0,Db=
ya.divisor|0);ub=U.buffer;U.buffer=Jb;Ta=U.divisor;U.divisor=Db;mb=U.normalized;U.normalized=Na;fc=U.offset;U.offset=yd;zc=U.size;U.size=Ya;uc=U.state;U.state=Kb;bb=U.stride;U.stride=Lb;jc=U.type;U.type=kb;gd=U.w;U.w=Oa;Xa=U.x;U.x=Yb;Mc=U.y;U.y=Qa;zb=U.z;U.z=tb;Ia.buffer=a.positionBuffer;Za=!1;Ub=null;sc=0;Vb=!1;Kc=Pb=0;Qb=1;Qd=0;Ec=5126;od=ed=Nc=Ed=0;za(Ia)?(Za=!0,Ub=Y.createStream(34962,Ia),Ec=Ub.dtype):(Ub=Y.getBuffer(Ia))?Ec=Ub.dtype:"constant"in Ia?(Qb=2,"number"===typeof Ia.constant?(Nc=Ia.constant,
ed=od=Ed=0):(Nc=0<Ia.constant.length?Ia.constant[0]:0,ed=1<Ia.constant.length?Ia.constant[1]:0,od=2<Ia.constant.length?Ia.constant[2]:0,Ed=3<Ia.constant.length?Ia.constant[3]:0)):(Ub=za(Ia.buffer)?Y.createStream(34962,Ia.buffer):Y.getBuffer(Ia.buffer),Ec="type"in Ia?Ea[Ia.type]:Ub.dtype,Vb=!!Ia.normalized,Kc=Ia.size|0,Pb=Ia.offset|0,Qd=Ia.stride|0,sc=Ia.divisor|0);nc=v.buffer;v.buffer=Ub;vc=v.divisor;v.divisor=sc;gc=v.normalized;v.normalized=Vb;db=v.offset;v.offset=Pb;rc=v.size;v.size=Kc;Sb=v.state;
v.state=Qb;Wb=v.stride;v.stride=Qd;cc=v.type;v.type=Ec;hc=v.w;v.w=Ed;xc=v.x;v.x=Nc;Ac=v.y;v.y=ed;ad=v.z;v.z=od;la.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Sc=0;Xc=!1;bd=wd=0;Yc=1;kc=0;bc=5126;yc=cd=Uc=Zc=0;za(la)?(Qc=!0,Rc=Y.createStream(34962,la),bc=Rc.dtype):(Rc=Y.getBuffer(la))?bc=Rc.dtype:"constant"in la?(Yc=2,"number"===typeof la.constant?(Uc=la.constant,cd=yc=Zc=0):(Uc=0<la.constant.length?la.constant[0]:0,cd=1<la.constant.length?la.constant[1]:0,yc=2<la.constant.length?la.constant[2]:0,Zc=
3<la.constant.length?la.constant[3]:0)):(Rc=za(la.buffer)?Y.createStream(34962,la.buffer):Y.getBuffer(la.buffer),bc="type"in la?Ea[la.type]:Rc.dtype,Xc=!!la.normalized,bd=la.size|0,wd=la.offset|0,kc=la.stride|0,Sc=la.divisor|0);hd=A.buffer;A.buffer=Rc;pd=A.divisor;A.divisor=Sc;ye=A.normalized;A.normalized=Xc;Ne=A.offset;A.offset=wd;id=A.size;A.size=bd;Fa=A.state;A.state=Yc;Nd=A.stride;A.stride=kc;Xd=A.type;A.type=bc;de=A.w;A.w=Zc;Od=A.x;A.x=Uc;Kd=A.y;A.y=cd;Id=A.z;A.z=yc;aa.buffer=a.colorBuffer;md=
!1;Tc=null;ud=0;sd=!1;xd=jd=0;Cd=1;Fd=0;oe=5126;ie=je=ue=qe=0;za(aa)?(md=!0,Tc=Y.createStream(34962,aa),oe=Tc.dtype):(Tc=Y.getBuffer(aa))?oe=Tc.dtype:"constant"in aa?(Cd=2,"number"===typeof aa.constant?(ue=aa.constant,je=ie=qe=0):(ue=0<aa.constant.length?aa.constant[0]:0,je=1<aa.constant.length?aa.constant[1]:0,ie=2<aa.constant.length?aa.constant[2]:0,qe=3<aa.constant.length?aa.constant[3]:0)):(Tc=za(aa.buffer)?Y.createStream(34962,aa.buffer):Y.getBuffer(aa.buffer),oe="type"in aa?Ea[aa.type]:Tc.dtype,
sd=!!aa.normalized,xd=aa.size|0,jd=aa.offset|0,Fd=aa.stride|0,ud=aa.divisor|0);he=F.buffer;F.buffer=Tc;ve=F.divisor;F.divisor=ud;ee=F.normalized;F.normalized=sd;le=F.offset;F.offset=jd;Oc=F.size;F.size=xd;fd=F.state;F.state=Cd;we=F.stride;F.stride=Fd;pe=F.type;F.type=oe;Ld=F.w;F.w=qe;Pd=F.x;F.x=ue;Rd=F.y;F.y=je;Sd=F.z;F.z=ie;me=Z.buffer;Z.buffer=g;He=Z.divisor;Z.divisor=0;Be=Z.normalized;Z.normalized=!1;re=Z.offset;Z.offset=0;Se=Z.size;Z.size=0;Te=Z.state;Z.state=1;Oe=Z.stride;Z.stride=8;xe=Z.type;
Z.type=5126;Fe=Z.w;Z.w=0;Ie=Z.x;Z.x=0;Je=Z.y;Z.y=0;Ke=Z.z;Z.z=0;Ge=t.buffer;t.buffer=h;Md=t.divisor;t.divisor=0;Yd=t.normalized;t.normalized=!1;ce=t.offset;t.offset=4;fe=t.size;t.size=0;Le=t.state;t.state=1;Jd=t.stride;t.stride=8;Td=t.type;t.type=5126;De=t.w;t.w=0;Me=t.x;t.x=0;bf=t.y;t.y=0;af=t.z;t.z=0;Ue=w.vert;w.vert=20;Pe=w.frag;w.frag=19;R.dirty=!0;c(fa,a,b);fa.viewportWidth=p;fa.viewportHeight=O;L[0]=q;L[1]=e;L[2]=x;L[3]=m;T[0]=z;T[1]=sa;T[2]=Ha;T[3]=y;oa.blend_enable=ac;ra[0]=G;ra[1]=ga;xa[0]=
ha;xa[1]=C;xa[2]=D;xa[3]=Q;oa.depth_enable=ua;r[0]=ka;r[1]=V;r[2]=Ua;r[3]=ba;oa.scissor_enable=Aa;oa.stencil_enable=pa;va&&(S.cpuTime+=performance.now()-Da);I.offset=ja;I.count=Gb;I.instances=ca;I.primitive=wa;K[23]=Ca;K[24]=Cc;K[22]=Wc;K[31]=Dc;K[32]=Ic;K[33]=pc;K[10]=ec;K[34]=Fc;K[6]=cb;K[7]=ab;K[21]=Va;K[8]=Hb;K[9]=qc;K[3]=ib;Fb&&Y.destroyStream(Cb);M.buffer=Ja;M.divisor=qb;M.normalized=La;M.offset=eb;M.size=fb;M.state=Ma;M.stride=jb;M.type=Wa;M.w=sb;M.x=rb;M.y=Pa;M.z=Bc;Ra&&Y.destroyStream(Jb);
U.buffer=ub;U.divisor=Ta;U.normalized=mb;U.offset=fc;U.size=zc;U.state=uc;U.stride=bb;U.type=jc;U.w=gd;U.x=Xa;U.y=Mc;U.z=zb;Za&&Y.destroyStream(Ub);v.buffer=nc;v.divisor=vc;v.normalized=gc;v.offset=db;v.size=rc;v.state=Sb;v.stride=Wb;v.type=cc;v.w=hc;v.x=xc;v.y=Ac;v.z=ad;Qc&&Y.destroyStream(Rc);A.buffer=hd;A.divisor=pd;A.normalized=ye;A.offset=Ne;A.size=id;A.state=Fa;A.stride=Nd;A.type=Xd;A.w=de;A.x=Od;A.y=Kd;A.z=Id;md&&Y.destroyStream(Tc);F.buffer=he;F.divisor=ve;F.normalized=ee;F.offset=le;F.size=
Oc;F.state=fd;F.stride=we;F.type=pe;F.w=Ld;F.x=Pd;F.y=Rd;F.z=Sd;Z.buffer=me;Z.divisor=He;Z.normalized=Be;Z.offset=re;Z.size=Se;Z.state=Te;Z.stride=Oe;Z.type=xe;Z.w=Fe;Z.x=Ie;Z.y=Je;Z.z=Ke;t.buffer=Ge;t.divisor=Md;t.normalized=Yd;t.offset=ce;t.size=fe;t.state=Le;t.stride=Jd;t.type=Td;t.w=De;t.x=Me;t.y=bf;t.z=af;w.vert=Ue;w.frag=Pe;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(e,
S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,Cc,Y,fa,R){var I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,td,Gb,ha,L,sa,Ea,qa,ya,Ia,la,aa,ta,Ka,Ba,lb,ea;I=e.attributes;y=e.buffer;k=e.context;P=e.current;Q=e.draw;za=e.elements;oa=e.extensions;w=e.framebuffer;K=e.gl;da=e.isBufferArgs;T=e.next;ma=e.shader;ra=e.uniforms;Ca=e.vao;xa=T.blend_color;ga=P.blend_color;Da=T.blend_equation;ka=P.blend_equation;pa=T.blend_func;Aa=P.blend_func;Ha=T.colorMask;
O=P.colorMask;ac=T.depth_range;Ua=P.depth_range;r=T.polygonOffset_offset;n=P.polygonOffset_offset;B=T.sample_coverage;ua=P.sample_coverage;va=T.scissor_box;td=P.scissor_box;Gb=T.stencil_func;ha=P.stencil_func;L=T.stencil_opBack;sa=P.stencil_opBack;Ea=T.stencil_opFront;qa=P.stencil_opFront;ya=T.viewport;Ia=P.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};Ka={divisor:1,offset:4,
stride:4};Ba={divisor:1,offset:16,stride:8};lb={divisor:1,offset:24,stride:8};ea={divisor:1,offset:0,stride:8};return{batch:function(d,p){var e,m,t,N,A,v;e=w.next;e!==w.cur&&(e?K.bindFramebuffer(36160,e.framebuffer):K.bindFramebuffer(36160,null),w.cur=e);if(P.dirty){var F,ya,H,J,E,xa,M,ra,U,V,Z,pa,va,Da,ma,X,Zd,Bd,ia,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb;F=T.dither;F!==P.dither&&(F?K.enable(3024):K.disable(3024),P.dither=F);ya=T.depth_func;ya!==P.depth_func&&(K.depthFunc(ya),P.depth_func=ya);H=ac[0];J=
ac[1];if(H!==Ua[0]||J!==Ua[1])K.depthRange(H,J),Ua[0]=H,Ua[1]=J;E=T.depth_mask;E!==P.depth_mask&&(K.depthMask(E),P.depth_mask=E);xa=Ha[0];M=Ha[1];ra=Ha[2];U=Ha[3];if(xa!==O[0]||M!==O[1]||ra!==O[2]||U!==O[3])K.colorMask(xa,M,ra,U),O[0]=xa,O[1]=M,O[2]=ra,O[3]=U;V=T.frontFace;V!==P.frontFace&&(K.frontFace(V),P.frontFace=V);Z=T.lineWidth;Z!==P.lineWidth&&(K.lineWidth(Z),P.lineWidth=Z);pa=T.polygonOffset_enable;pa!==P.polygonOffset_enable&&(pa?K.enable(32823):K.disable(32823),P.polygonOffset_enable=pa);
va=r[0];Da=r[1];if(va!==n[0]||Da!==n[1])K.polygonOffset(va,Da),n[0]=va,n[1]=Da;ma=T.sample_alpha;ma!==P.sample_alpha&&(ma?K.enable(32926):K.disable(32926),P.sample_alpha=ma);X=T.sample_enable;X!==P.sample_enable&&(X?K.enable(32928):K.disable(32928),P.sample_enable=X);Zd=B[0];Bd=B[1];if(Zd!==ua[0]||Bd!==ua[1])K.sampleCoverage(Zd,Bd),ua[0]=Zd,ua[1]=Bd;ia=T.stencil_mask;ia!==P.stencil_mask&&(K.stencilMask(ia),P.stencil_mask=ia);ld=Gb[0];$c=Gb[1];rd=Gb[2];if(ld!==ha[0]||$c!==ha[1]||rd!==ha[2])K.stencilFunc(ld,
$c,rd),ha[0]=ld,ha[1]=$c,ha[2]=rd;Lc=Ea[0];nd=Ea[1];Gc=Ea[2];dd=Ea[3];if(Lc!==qa[0]||nd!==qa[1]||Gc!==qa[2]||dd!==qa[3])K.stencilOpSeparate(Lc,nd,Gc,dd),qa[0]=Lc,qa[1]=nd,qa[2]=Gc,qa[3]=dd;Pc=L[0];kd=L[1];Ab=L[2];Eb=L[3];if(Pc!==sa[0]||kd!==sa[1]||Ab!==sa[2]||Eb!==sa[3])K.stencilOpSeparate(Pc,kd,Ab,Eb),sa[0]=Pc,sa[1]=kd,sa[2]=Ab,sa[3]=Eb}K.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;K.enable(3042);P.blend_enable=!0;K.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;K.blendFuncSeparate(770,
771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;K.enable(2884);P.cull_enable=!0;K.cullFace(1029);P.cull_face=1029;K.enable(3089);P.scissor_enable=!0;K.disable(2960);P.stencil_enable=!1;if(m=P.profile)t=performance.now(),S.count+=p;K.useProgram(u.program);N=oa.angle_instanced_arrays;var tc,wb,wc,Bb,Jc;Ca.setVAO(null);tc=C.location;wb=I[tc];wb.buffer||K.enableVertexAttribArray(tc);if(5126!==wb.type||1!==wb.size||wb.buffer!==g||!1!==wb.normalized||0!==wb.offset||8!==wb.stride)K.bindBuffer(34962,g.buffer),
K.vertexAttribPointer(tc,1,5126,!1,8,0),wb.type=5126,wb.size=1,wb.buffer=g,wb.normalized=!1,wb.offset=0,wb.stride=8;0!==wb.divisor&&(N.vertexAttribDivisorANGLE(tc,0),wb.divisor=0);wc=c.location;Bb=I[wc];Bb.buffer||K.enableVertexAttribArray(wc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==h||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)K.bindBuffer(34962,h.buffer),K.vertexAttribPointer(wc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=h,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&
(N.vertexAttribDivisorANGLE(wc,0),Bb.divisor=0);(Jc=Q.elements)?K.bindBuffer(34963,Jc.buffer.buffer):Ca.currentVAO&&(Jc=za.getElements(Ca.currentVAO.elements))&&K.bindBuffer(34963,Jc.buffer.buffer);for(A=0;A<p;++A){v=d[A];var lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,
rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,Fa,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc;lc=v.viewport;Hc=lc.x|0;Wc=lc.y|0;Vc="width"in lc?lc.width|0:k.framebufferWidth-Hc;Dc="height"in lc?lc.height|0:k.framebufferHeight-Wc;dc=k.viewportWidth;k.viewportWidth=Vc;Ic=k.viewportHeight;k.viewportHeight=Dc;K.viewport(Hc,Wc,Vc,Dc);Ia[0]=Hc;Ia[1]=Wc;Ia[2]=Vc;Ia[3]=Dc;(oc=ja.call(this,k,v,A))?K.enable(2929):K.disable(2929);P.depth_enable=oc;pc=
v.viewport;mc=pc.x|0;ec=pc.y|0;$a="width"in pc?pc.width|0:k.framebufferWidth-mc;Fc="height"in pc?pc.height|0:k.framebufferHeight-ec;K.scissor(mc,ec,$a,Fc);td[0]=mc;td[1]=ec;td[2]=$a;td[3]=Fc;ta.buffer=v.positionBuffer;xb=!1;cb=null;Mb=0;ab=!1;Va=nb=0;vd=1;Hb=0;Ib=5126;Fb=ib=Nb=qc=0;da(ta)?(xb=!0,cb=y.createStream(34962,ta),Ib=cb.dtype):(cb=y.getBuffer(ta))?Ib=cb.dtype:"constant"in ta?(vd=2,"number"===typeof ta.constant?(Nb=ta.constant,ib=Fb=qc=0):(Nb=0<ta.constant.length?ta.constant[0]:0,ib=1<ta.constant.length?
ta.constant[1]:0,Fb=2<ta.constant.length?ta.constant[2]:0,qc=3<ta.constant.length?ta.constant[3]:0)):(cb=da(ta.buffer)?y.createStream(34962,ta.buffer):y.getBuffer(ta.buffer),Ib="type"in ta?la[ta.type]:cb.dtype,ab=!!ta.normalized,Va=ta.size|0,nb=ta.offset|0,Hb=ta.stride|0,Mb=ta.divisor|0);Cb=f.location;vb=I[Cb];if(1===vd){vb.buffer||K.enableVertexAttribArray(Cb);gb=Va||2;if(vb.type!==Ib||vb.size!==gb||vb.buffer!==cb||vb.normalized!==ab||vb.offset!==nb||vb.stride!==Hb)K.bindBuffer(34962,cb.buffer),
K.vertexAttribPointer(Cb,gb,Ib,ab,Hb,nb),vb.type=Ib,vb.size=gb,vb.buffer=cb,vb.normalized=ab,vb.offset=nb,vb.stride=Hb;vb.divisor!==Mb&&(N.vertexAttribDivisorANGLE(Cb,Mb),vb.divisor=Mb)}else if(vb.buffer&&(K.disableVertexAttribArray(Cb),vb.buffer=null),vb.x!==Nb||vb.y!==ib||vb.z!==Fb||vb.w!==qc)K.vertexAttrib4f(Cb,Nb,ib,Fb,qc),vb.x=Nb,vb.y=ib,vb.z=Fb,vb.w=qc;Ba.buffer=v.positionBuffer;Xb=!1;Ob=null;pb=0;Sa=!1;yb=Tb=0;ic=1;hb=0;ob=5126;eb=La=qb=Ja=0;da(Ba)?(Xb=!0,Ob=y.createStream(34962,Ba),ob=Ob.dtype):
(Ob=y.getBuffer(Ba))?ob=Ob.dtype:"constant"in Ba?(ic=2,"number"===typeof Ba.constant?(qb=Ba.constant,La=eb=Ja=0):(qb=0<Ba.constant.length?Ba.constant[0]:0,La=1<Ba.constant.length?Ba.constant[1]:0,eb=2<Ba.constant.length?Ba.constant[2]:0,Ja=3<Ba.constant.length?Ba.constant[3]:0)):(Ob=da(Ba.buffer)?y.createStream(34962,Ba.buffer):y.getBuffer(Ba.buffer),ob="type"in Ba?la[Ba.type]:Ob.dtype,Sa=!!Ba.normalized,yb=Ba.size|0,Tb=Ba.offset|0,hb=Ba.stride|0,pb=Ba.divisor|0);fb=G.location;Ma=I[fb];if(1===ic){Ma.buffer||
K.enableVertexAttribArray(fb);jb=yb||2;if(Ma.type!==ob||Ma.size!==jb||Ma.buffer!==Ob||Ma.normalized!==Sa||Ma.offset!==Tb||Ma.stride!==hb)K.bindBuffer(34962,Ob.buffer),K.vertexAttribPointer(fb,jb,ob,Sa,hb,Tb),Ma.type=ob,Ma.size=jb,Ma.buffer=Ob,Ma.normalized=Sa,Ma.offset=Tb,Ma.stride=hb;Ma.divisor!==pb&&(N.vertexAttribDivisorANGLE(fb,pb),Ma.divisor=pb)}else if(Ma.buffer&&(K.disableVertexAttribArray(fb),Ma.buffer=null),Ma.x!==qb||Ma.y!==La||Ma.z!==eb||Ma.w!==Ja)K.vertexAttrib4f(fb,qb,La,eb,Ja),Ma.x=
qb,Ma.y=La,Ma.z=eb,Ma.w=Ja;lb.buffer=v.positionBuffer;Wa=!1;sb=null;rb=0;Pa=!1;Ra=Bc=0;Jb=1;Db=0;Na=5126;Lb=Kb=Ya=yd=0;da(lb)?(Wa=!0,sb=y.createStream(34962,lb),Na=sb.dtype):(sb=y.getBuffer(lb))?Na=sb.dtype:"constant"in lb?(Jb=2,"number"===typeof lb.constant?(Ya=lb.constant,Kb=Lb=yd=0):(Ya=0<lb.constant.length?lb.constant[0]:0,Kb=1<lb.constant.length?lb.constant[1]:0,Lb=2<lb.constant.length?lb.constant[2]:0,yd=3<lb.constant.length?lb.constant[3]:0)):(sb=da(lb.buffer)?y.createStream(34962,lb.buffer):
y.getBuffer(lb.buffer),Na="type"in lb?la[lb.type]:sb.dtype,Pa=!!lb.normalized,Ra=lb.size|0,Bc=lb.offset|0,Db=lb.stride|0,rb=lb.divisor|0);kb=wa.location;Oa=I[kb];if(1===Jb){Oa.buffer||K.enableVertexAttribArray(kb);Yb=Ra||2;if(Oa.type!==Na||Oa.size!==Yb||Oa.buffer!==sb||Oa.normalized!==Pa||Oa.offset!==Bc||Oa.stride!==Db)K.bindBuffer(34962,sb.buffer),K.vertexAttribPointer(kb,Yb,Na,Pa,Db,Bc),Oa.type=Na,Oa.size=Yb,Oa.buffer=sb,Oa.normalized=Pa,Oa.offset=Bc,Oa.stride=Db;Oa.divisor!==rb&&(N.vertexAttribDivisorANGLE(kb,
rb),Oa.divisor=rb)}else if(Oa.buffer&&(K.disableVertexAttribArray(kb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==yd)K.vertexAttrib4f(kb,Ya,Kb,Lb,yd),Oa.x=Ya,Oa.y=Kb,Oa.z=Lb,Oa.w=yd;ea.buffer=v.positionBuffer;Qa=!1;tb=null;ub=0;Ta=!1;fc=mb=0;zc=1;uc=0;bb=5126;Mc=Xa=gd=jc=0;da(ea)?(Qa=!0,tb=y.createStream(34962,ea),bb=tb.dtype):(tb=y.getBuffer(ea))?bb=tb.dtype:"constant"in ea?(zc=2,"number"===typeof ea.constant?(gd=ea.constant,Xa=Mc=jc=0):(gd=0<ea.constant.length?ea.constant[0]:0,Xa=1<
ea.constant.length?ea.constant[1]:0,Mc=2<ea.constant.length?ea.constant[2]:0,jc=3<ea.constant.length?ea.constant[3]:0)):(tb=da(ea.buffer)?y.createStream(34962,ea.buffer):y.getBuffer(ea.buffer),bb="type"in ea?la[ea.type]:tb.dtype,Ta=!!ea.normalized,fc=ea.size|0,mb=ea.offset|0,uc=ea.stride|0,ub=ea.divisor|0);zb=na.location;Za=I[zb];if(1===zc){Za.buffer||K.enableVertexAttribArray(zb);Ub=fc||2;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Ta||Za.offset!==mb||Za.stride!==uc)K.bindBuffer(34962,
tb.buffer),K.vertexAttribPointer(zb,Ub,bb,Ta,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=Ta,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(N.vertexAttribDivisorANGLE(zb,ub),Za.divisor=ub)}else if(Za.buffer&&(K.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==gd||Za.y!==Xa||Za.z!==Mc||Za.w!==jc)K.vertexAttrib4f(zb,gd,Xa,Mc,jc),Za.x=gd,Za.y=Xa,Za.z=Mc,Za.w=jc;aa.buffer=v.colorBuffer;sc=!1;Vb=null;Pb=0;Kc=!1;Qd=Qb=0;Ec=1;Ed=0;Nc=5126;vc=nc=od=ed=0;da(aa)?(sc=!0,Vb=y.createStream(34962,aa),
Nc=Vb.dtype):(Vb=y.getBuffer(aa))?Nc=Vb.dtype:"constant"in aa?(Ec=2,"number"===typeof aa.constant?(od=aa.constant,nc=vc=ed=0):(od=0<aa.constant.length?aa.constant[0]:0,nc=1<aa.constant.length?aa.constant[1]:0,vc=2<aa.constant.length?aa.constant[2]:0,ed=3<aa.constant.length?aa.constant[3]:0)):(Vb=da(aa.buffer)?y.createStream(34962,aa.buffer):y.getBuffer(aa.buffer),Nc="type"in aa?la[aa.type]:Vb.dtype,Kc=!!aa.normalized,Qd=aa.size|0,Qb=aa.offset|0,Ed=aa.stride|0,Pb=aa.divisor|0);gc=W.location;db=I[gc];
if(1===Ec){db.buffer||K.enableVertexAttribArray(gc);rc=Qd||4;if(db.type!==Nc||db.size!==rc||db.buffer!==Vb||db.normalized!==Kc||db.offset!==Qb||db.stride!==Ed)K.bindBuffer(34962,Vb.buffer),K.vertexAttribPointer(gc,rc,Nc,Kc,Ed,Qb),db.type=Nc,db.size=rc,db.buffer=Vb,db.normalized=Kc,db.offset=Qb,db.stride=Ed;db.divisor!==Pb&&(N.vertexAttribDivisorANGLE(gc,Pb),db.divisor=Pb)}else if(db.buffer&&(K.disableVertexAttribArray(gc),db.buffer=null),db.x!==od||db.y!==nc||db.z!==vc||db.w!==ed)K.vertexAttrib4f(gc,
od,nc,vc,ed),db.x=od,db.y=nc,db.z=vc,db.w=ed;Ka.buffer=v.colorBuffer;Sb=!1;Wb=null;cc=0;hc=!1;Ac=xc=0;ad=1;Qc=0;Rc=5126;bd=wd=Xc=Sc=0;da(Ka)?(Sb=!0,Wb=y.createStream(34962,Ka),Rc=Wb.dtype):(Wb=y.getBuffer(Ka))?Rc=Wb.dtype:"constant"in Ka?(ad=2,"number"===typeof Ka.constant?(Xc=Ka.constant,wd=bd=Sc=0):(Xc=0<Ka.constant.length?Ka.constant[0]:0,wd=1<Ka.constant.length?Ka.constant[1]:0,bd=2<Ka.constant.length?Ka.constant[2]:0,Sc=3<Ka.constant.length?Ka.constant[3]:0)):(Wb=da(Ka.buffer)?y.createStream(34962,
Ka.buffer):y.getBuffer(Ka.buffer),Rc="type"in Ka?la[Ka.type]:Wb.dtype,hc=!!Ka.normalized,Ac=Ka.size|0,xc=Ka.offset|0,Qc=Ka.stride|0,cc=Ka.divisor|0);Yc=ba.location;kc=I[Yc];if(1===ad){kc.buffer||K.enableVertexAttribArray(Yc);bc=Ac||4;if(kc.type!==Rc||kc.size!==bc||kc.buffer!==Wb||kc.normalized!==hc||kc.offset!==xc||kc.stride!==Qc)K.bindBuffer(34962,Wb.buffer),K.vertexAttribPointer(Yc,bc,Rc,hc,Qc,xc),kc.type=Rc,kc.size=bc,kc.buffer=Wb,kc.normalized=hc,kc.offset=xc,kc.stride=Qc;kc.divisor!==cc&&(N.vertexAttribDivisorANGLE(Yc,
cc),kc.divisor=cc)}else if(kc.buffer&&(K.disableVertexAttribArray(Yc),kc.buffer=null),kc.x!==Xc||kc.y!==wd||kc.z!==bd||kc.w!==Sc)K.vertexAttrib4f(Yc,Xc,wd,bd,Sc),kc.x=Xc,kc.y=wd,kc.z=bd,kc.w=Sc;Zc=v.scale;Uc=Zc[0];yc=Zc[1];A&&cd===Uc&&hd===yc||(cd=Uc,hd=yc,K.uniform2f(Cc.location,Uc,yc));pd=v.translate;ye=pd[0];id=pd[1];A&&Ne===ye&&Fa===id||(Ne=ye,Fa=id,K.uniform2f(fa.location,ye,id));Nd=v.thickness;A&&Xd===Nd||(Xd=Nd,K.uniform1f(Y.location,Nd));de=v.depth;A&&Od===de||(Od=de,K.uniform1f(D.location,
de));Kd=b.call(this,k,v,A);Id=Kd[0];Tc=Kd[1];sd=Kd[2];xd=Kd[3];A&&md===Id&&ud===Tc&&jd===sd&&Cd===xd||(md=Id,ud=Tc,jd=sd,Cd=xd,K.uniform4f(R.location,Id,Tc,sd,xd));Fd=v.miterLimit;A&&oe===Fd||(oe=Fd,K.uniform1f(l.location,Fd));qe=z.call(this,k,v,A);A&&ue===qe||(ue=qe,K.uniform1f(a.location,qe));je=v.dashLength;A&&ie===je||(ie=je,K.uniform1f(q.location,je));he=v.opacity;A&&ve===he||(ve=he,K.uniform1f(x.location,he));(ee=v.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);le=ee._texture;
K.uniform1i(ca.location,le.bind());Oc=v.count;0<Oc?Jc?N.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):N.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?K.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):K.drawArrays(5,0,4));k.viewportWidth=dc;k.viewportHeight=Ic;xb&&y.destroyStream(cb);Xb&&y.destroyStream(Ob);Wa&&y.destroyStream(sb);Qa&&y.destroyStream(tb);sc&&y.destroyStream(Vb);Sb&&y.destroyStream(Wb);le.unbind()}P.dirty=!0;Ca.setVAO(null);m&&(S.cpuTime+=performance.now()-t)},draw:function(b){var e,
m,z,t,v,A,F,ya,J,u,E,xa,M,ra,U,V,Z,pa,va,Da,ma,ja,X,Zd,Bd,ia,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd;e=w.next;e!==w.cur&&(e?K.bindFramebuffer(36160,e.framebuffer):K.bindFramebuffer(36160,null),w.cur=e);if(P.dirty){var Ec,Ed,Nc,ed,od,nc,vc,gc,db,
rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc;Ec=T.dither;Ec!==P.dither&&(Ec?K.enable(3024):K.disable(3024),P.dither=Ec);Ed=T.depth_func;Ed!==P.depth_func&&(K.depthFunc(Ed),P.depth_func=Ed);Nc=ac[0];ed=ac[1];if(Nc!==Ua[0]||ed!==Ua[1])K.depthRange(Nc,ed),Ua[0]=Nc,Ua[1]=ed;od=T.depth_mask;od!==P.depth_mask&&(K.depthMask(od),P.depth_mask=od);nc=Ha[0];vc=Ha[1];gc=Ha[2];db=Ha[3];if(nc!==O[0]||vc!==O[1]||gc!==O[2]||db!==O[3])K.colorMask(nc,vc,gc,db),O[0]=nc,O[1]=vc,O[2]=gc,O[3]=db;rc=T.frontFace;
rc!==P.frontFace&&(K.frontFace(rc),P.frontFace=rc);Sb=T.lineWidth;Sb!==P.lineWidth&&(K.lineWidth(Sb),P.lineWidth=Sb);Wb=T.polygonOffset_enable;Wb!==P.polygonOffset_enable&&(Wb?K.enable(32823):K.disable(32823),P.polygonOffset_enable=Wb);cc=r[0];hc=r[1];if(cc!==n[0]||hc!==n[1])K.polygonOffset(cc,hc),n[0]=cc,n[1]=hc;xc=T.sample_alpha;xc!==P.sample_alpha&&(xc?K.enable(32926):K.disable(32926),P.sample_alpha=xc);Ac=T.sample_enable;Ac!==P.sample_enable&&(Ac?K.enable(32928):K.disable(32928),P.sample_enable=
Ac);ad=B[0];Qc=B[1];if(ad!==ua[0]||Qc!==ua[1])K.sampleCoverage(ad,Qc),ua[0]=ad,ua[1]=Qc;Rc=T.stencil_mask;Rc!==P.stencil_mask&&(K.stencilMask(Rc),P.stencil_mask=Rc);Sc=Gb[0];Xc=Gb[1];wd=Gb[2];if(Sc!==ha[0]||Xc!==ha[1]||wd!==ha[2])K.stencilFunc(Sc,Xc,wd),ha[0]=Sc,ha[1]=Xc,ha[2]=wd;bd=Ea[0];Yc=Ea[1];kc=Ea[2];bc=Ea[3];if(bd!==qa[0]||Yc!==qa[1]||kc!==qa[2]||bc!==qa[3])K.stencilOpSeparate(bd,Yc,kc,bc),qa[0]=bd,qa[1]=Yc,qa[2]=kc,qa[3]=bc;Zc=L[0];Uc=L[1];cd=L[2];yc=L[3];if(Zc!==sa[0]||Uc!==sa[1]||cd!==sa[2]||
yc!==sa[3])K.stencilOpSeparate(Zc,Uc,cd,yc),sa[0]=Zc,sa[1]=Uc,sa[2]=cd,sa[3]=yc}m=b.viewport;z=m.x|0;t=m.y|0;v="width"in m?m.width|0:k.framebufferWidth-z;A="height"in m?m.height|0:k.framebufferHeight-t;F=k.viewportWidth;k.viewportWidth=v;ya=k.viewportHeight;k.viewportHeight=A;K.viewport(z,t,v,A);Ia[0]=z;Ia[1]=t;Ia[2]=v;Ia[3]=A;K.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;K.enable(3042);P.blend_enable=!0;K.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;K.blendFuncSeparate(770,
771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;K.enable(2884);P.cull_enable=!0;K.cullFace(1029);P.cull_face=1029;(J=H.call(this,k,b,0))?K.enable(2929):K.disable(2929);P.depth_enable=J;u=b.viewport;E=u.x|0;xa=u.y|0;M="width"in u?u.width|0:k.framebufferWidth-E;ra="height"in u?u.height|0:k.framebufferHeight-xa;K.scissor(E,xa,M,ra);td[0]=E;td[1]=xa;td[2]=M;td[3]=ra;K.enable(3089);P.scissor_enable=!0;K.disable(2960);P.stencil_enable=!1;if(U=P.profile)V=performance.now(),S.count++;K.useProgram(N.program);
Z=oa.angle_instanced_arrays;Ca.setVAO(null);ta.buffer=b.positionBuffer;pa=!1;va=null;Da=0;ma=!1;X=ja=0;Zd=1;Bd=0;ia=5126;Lc=rd=$c=ld=0;da(ta)?(pa=!0,va=y.createStream(34962,ta),ia=va.dtype):(va=y.getBuffer(ta))?ia=va.dtype:"constant"in ta?(Zd=2,"number"===typeof ta.constant?($c=ta.constant,rd=Lc=ld=0):($c=0<ta.constant.length?ta.constant[0]:0,rd=1<ta.constant.length?ta.constant[1]:0,Lc=2<ta.constant.length?ta.constant[2]:0,ld=3<ta.constant.length?ta.constant[3]:0)):(va=da(ta.buffer)?y.createStream(34962,
ta.buffer):y.getBuffer(ta.buffer),ia="type"in ta?la[ta.type]:va.dtype,ma=!!ta.normalized,X=ta.size|0,ja=ta.offset|0,Bd=ta.stride|0,Da=ta.divisor|0);nd=f.location;Gc=I[nd];if(1===Zd){Gc.buffer||K.enableVertexAttribArray(nd);dd=X||2;if(Gc.type!==ia||Gc.size!==dd||Gc.buffer!==va||Gc.normalized!==ma||Gc.offset!==ja||Gc.stride!==Bd)K.bindBuffer(34962,va.buffer),K.vertexAttribPointer(nd,dd,ia,ma,Bd,ja),Gc.type=ia,Gc.size=dd,Gc.buffer=va,Gc.normalized=ma,Gc.offset=ja,Gc.stride=Bd;Gc.divisor!==Da&&(Z.vertexAttribDivisorANGLE(nd,
Da),Gc.divisor=Da)}else if(Gc.buffer&&(K.disableVertexAttribArray(nd),Gc.buffer=null),Gc.x!==$c||Gc.y!==rd||Gc.z!==Lc||Gc.w!==ld)K.vertexAttrib4f(nd,$c,rd,Lc,ld),Gc.x=$c,Gc.y=rd,Gc.z=Lc,Gc.w=ld;Ba.buffer=b.positionBuffer;Pc=!1;kd=null;Ab=0;Eb=!1;wb=tc=0;wc=1;Bb=0;Jc=5126;Vc=Wc=Hc=lc=0;da(Ba)?(Pc=!0,kd=y.createStream(34962,Ba),Jc=kd.dtype):(kd=y.getBuffer(Ba))?Jc=kd.dtype:"constant"in Ba?(wc=2,"number"===typeof Ba.constant?(Hc=Ba.constant,Wc=Vc=lc=0):(Hc=0<Ba.constant.length?Ba.constant[0]:0,Wc=1<
Ba.constant.length?Ba.constant[1]:0,Vc=2<Ba.constant.length?Ba.constant[2]:0,lc=3<Ba.constant.length?Ba.constant[3]:0)):(kd=da(Ba.buffer)?y.createStream(34962,Ba.buffer):y.getBuffer(Ba.buffer),Jc="type"in Ba?la[Ba.type]:kd.dtype,Eb=!!Ba.normalized,wb=Ba.size|0,tc=Ba.offset|0,Bb=Ba.stride|0,Ab=Ba.divisor|0);Dc=G.location;dc=I[Dc];if(1===wc){dc.buffer||K.enableVertexAttribArray(Dc);Ic=wb||2;if(dc.type!==Jc||dc.size!==Ic||dc.buffer!==kd||dc.normalized!==Eb||dc.offset!==tc||dc.stride!==Bb)K.bindBuffer(34962,
kd.buffer),K.vertexAttribPointer(Dc,Ic,Jc,Eb,Bb,tc),dc.type=Jc,dc.size=Ic,dc.buffer=kd,dc.normalized=Eb,dc.offset=tc,dc.stride=Bb;dc.divisor!==Ab&&(Z.vertexAttribDivisorANGLE(Dc,Ab),dc.divisor=Ab)}else if(dc.buffer&&(K.disableVertexAttribArray(Dc),dc.buffer=null),dc.x!==Hc||dc.y!==Wc||dc.z!==Vc||dc.w!==lc)K.vertexAttrib4f(Dc,Hc,Wc,Vc,lc),dc.x=Hc,dc.y=Wc,dc.z=Vc,dc.w=lc;lb.buffer=b.positionBuffer;oc=!1;pc=null;mc=0;ec=!1;Fc=$a=0;xb=1;cb=0;Mb=5126;vd=Va=nb=ab=0;da(lb)?(oc=!0,pc=y.createStream(34962,
lb),Mb=pc.dtype):(pc=y.getBuffer(lb))?Mb=pc.dtype:"constant"in lb?(xb=2,"number"===typeof lb.constant?(nb=lb.constant,Va=vd=ab=0):(nb=0<lb.constant.length?lb.constant[0]:0,Va=1<lb.constant.length?lb.constant[1]:0,vd=2<lb.constant.length?lb.constant[2]:0,ab=3<lb.constant.length?lb.constant[3]:0)):(pc=da(lb.buffer)?y.createStream(34962,lb.buffer):y.getBuffer(lb.buffer),Mb="type"in lb?la[lb.type]:pc.dtype,ec=!!lb.normalized,Fc=lb.size|0,$a=lb.offset|0,cb=lb.stride|0,mc=lb.divisor|0);Hb=wa.location;Ib=
I[Hb];if(1===xb){Ib.buffer||K.enableVertexAttribArray(Hb);qc=Fc||2;if(Ib.type!==Mb||Ib.size!==qc||Ib.buffer!==pc||Ib.normalized!==ec||Ib.offset!==$a||Ib.stride!==cb)K.bindBuffer(34962,pc.buffer),K.vertexAttribPointer(Hb,qc,Mb,ec,cb,$a),Ib.type=Mb,Ib.size=qc,Ib.buffer=pc,Ib.normalized=ec,Ib.offset=$a,Ib.stride=cb;Ib.divisor!==mc&&(Z.vertexAttribDivisorANGLE(Hb,mc),Ib.divisor=mc)}else if(Ib.buffer&&(K.disableVertexAttribArray(Hb),Ib.buffer=null),Ib.x!==nb||Ib.y!==Va||Ib.z!==vd||Ib.w!==ab)K.vertexAttrib4f(Hb,
nb,Va,vd,ab),Ib.x=nb,Ib.y=Va,Ib.z=vd,Ib.w=ab;ea.buffer=b.positionBuffer;Nb=!1;ib=null;Fb=0;Cb=!1;gb=vb=0;Xb=1;Ob=0;pb=5126;ic=yb=Tb=Sa=0;da(ea)?(Nb=!0,ib=y.createStream(34962,ea),pb=ib.dtype):(ib=y.getBuffer(ea))?pb=ib.dtype:"constant"in ea?(Xb=2,"number"===typeof ea.constant?(Tb=ea.constant,yb=ic=Sa=0):(Tb=0<ea.constant.length?ea.constant[0]:0,yb=1<ea.constant.length?ea.constant[1]:0,ic=2<ea.constant.length?ea.constant[2]:0,Sa=3<ea.constant.length?ea.constant[3]:0)):(ib=da(ea.buffer)?y.createStream(34962,
ea.buffer):y.getBuffer(ea.buffer),pb="type"in ea?la[ea.type]:ib.dtype,Cb=!!ea.normalized,gb=ea.size|0,vb=ea.offset|0,Ob=ea.stride|0,Fb=ea.divisor|0);hb=na.location;ob=I[hb];if(1===Xb){ob.buffer||K.enableVertexAttribArray(hb);Ja=gb||2;if(ob.type!==pb||ob.size!==Ja||ob.buffer!==ib||ob.normalized!==Cb||ob.offset!==vb||ob.stride!==Ob)K.bindBuffer(34962,ib.buffer),K.vertexAttribPointer(hb,Ja,pb,Cb,Ob,vb),ob.type=pb,ob.size=Ja,ob.buffer=ib,ob.normalized=Cb,ob.offset=vb,ob.stride=Ob;ob.divisor!==Fb&&(Z.vertexAttribDivisorANGLE(hb,
Fb),ob.divisor=Fb)}else if(ob.buffer&&(K.disableVertexAttribArray(hb),ob.buffer=null),ob.x!==Tb||ob.y!==yb||ob.z!==ic||ob.w!==Sa)K.vertexAttrib4f(hb,Tb,yb,ic,Sa),ob.x=Tb,ob.y=yb,ob.z=ic,ob.w=Sa;aa.buffer=b.colorBuffer;qb=!1;La=null;eb=0;fb=!1;jb=Ma=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=Pa=0;da(aa)?(qb=!0,La=y.createStream(34962,aa),rb=La.dtype):(La=y.getBuffer(aa))?rb=La.dtype:"constant"in aa?(Wa=2,"number"===typeof aa.constant?(Bc=aa.constant,Ra=Jb=Pa=0):(Bc=0<aa.constant.length?aa.constant[0]:0,Ra=1<aa.constant.length?
aa.constant[1]:0,Jb=2<aa.constant.length?aa.constant[2]:0,Pa=3<aa.constant.length?aa.constant[3]:0)):(La=da(aa.buffer)?y.createStream(34962,aa.buffer):y.getBuffer(aa.buffer),rb="type"in aa?la[aa.type]:La.dtype,fb=!!aa.normalized,jb=aa.size|0,Ma=aa.offset|0,sb=aa.stride|0,eb=aa.divisor|0);Db=W.location;Na=I[Db];if(1===Wa){Na.buffer||K.enableVertexAttribArray(Db);yd=jb||4;if(Na.type!==rb||Na.size!==yd||Na.buffer!==La||Na.normalized!==fb||Na.offset!==Ma||Na.stride!==sb)K.bindBuffer(34962,La.buffer),
K.vertexAttribPointer(Db,yd,rb,fb,sb,Ma),Na.type=rb,Na.size=yd,Na.buffer=La,Na.normalized=fb,Na.offset=Ma,Na.stride=sb;Na.divisor!==eb&&(Z.vertexAttribDivisorANGLE(Db,eb),Na.divisor=eb)}else if(Na.buffer&&(K.disableVertexAttribArray(Db),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)K.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ka.buffer=b.colorBuffer;Ya=!1;Kb=null;Lb=0;kb=!1;Yb=Oa=0;Qa=1;tb=0;ub=5126;zc=fc=mb=Ta=0;da(Ka)?(Ya=!0,Kb=y.createStream(34962,Ka),ub=Kb.dtype):
(Kb=y.getBuffer(Ka))?ub=Kb.dtype:"constant"in Ka?(Qa=2,"number"===typeof Ka.constant?(mb=Ka.constant,fc=zc=Ta=0):(mb=0<Ka.constant.length?Ka.constant[0]:0,fc=1<Ka.constant.length?Ka.constant[1]:0,zc=2<Ka.constant.length?Ka.constant[2]:0,Ta=3<Ka.constant.length?Ka.constant[3]:0)):(Kb=da(Ka.buffer)?y.createStream(34962,Ka.buffer):y.getBuffer(Ka.buffer),ub="type"in Ka?la[Ka.type]:Kb.dtype,kb=!!Ka.normalized,Yb=Ka.size|0,Oa=Ka.offset|0,tb=Ka.stride|0,Lb=Ka.divisor|0);uc=ba.location;bb=I[uc];if(1===Qa){bb.buffer||
K.enableVertexAttribArray(uc);jc=Yb||4;if(bb.type!==ub||bb.size!==jc||bb.buffer!==Kb||bb.normalized!==kb||bb.offset!==Oa||bb.stride!==tb)K.bindBuffer(34962,Kb.buffer),K.vertexAttribPointer(uc,jc,ub,kb,tb,Oa),bb.type=ub,bb.size=jc,bb.buffer=Kb,bb.normalized=kb,bb.offset=Oa,bb.stride=tb;bb.divisor!==Lb&&(Z.vertexAttribDivisorANGLE(uc,Lb),bb.divisor=Lb)}else if(bb.buffer&&(K.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==mb||bb.y!==fc||bb.z!==zc||bb.w!==Ta)K.vertexAttrib4f(uc,mb,fc,zc,Ta),bb.x=
mb,bb.y=fc,bb.z=zc,bb.w=Ta;gd=C.location;Xa=I[gd];Xa.buffer||K.enableVertexAttribArray(gd);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==g||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)K.bindBuffer(34962,g.buffer),K.vertexAttribPointer(gd,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=g,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(Z.vertexAttribDivisorANGLE(gd,0),Xa.divisor=0);Mc=c.location;zb=I[Mc];zb.buffer||K.enableVertexAttribArray(Mc);if(5126!==zb.type||1!==zb.size||zb.buffer!==
h||!1!==zb.normalized||4!==zb.offset||8!==zb.stride)K.bindBuffer(34962,h.buffer),K.vertexAttribPointer(Mc,1,5126,!1,8,4),zb.type=5126,zb.size=1,zb.buffer=h,zb.normalized=!1,zb.offset=4,zb.stride=8;0!==zb.divisor&&(Z.vertexAttribDivisorANGLE(Mc,0),zb.divisor=0);Za=b.scale;K.uniform2f(Cc.location,Za[0],Za[1]);Ub=b.translate;K.uniform2f(fa.location,Ub[0],Ub[1]);K.uniform1f(Y.location,b.thickness);K.uniform1f(D.location,b.depth);sc=p.call(this,k,b,0);K.uniform4f(R.location,sc[0],sc[1],sc[2],sc[3]);K.uniform1f(l.location,
b.miterLimit);Vb=d.call(this,k,b,0);K.uniform1f(a.location,Vb);K.uniform1f(q.location,b.dashLength);K.uniform1f(x.location,b.opacity);(Pb=b.dashTexture)&&"framebuffer"===Pb._reglType&&(Pb=Pb.color[0]);Kc=Pb._texture;K.uniform1i(ca.location,Kc.bind());(Qb=Q.elements)?K.bindBuffer(34963,Qb.buffer.buffer):Ca.currentVAO&&(Qb=za.getElements(Ca.currentVAO.elements))&&K.bindBuffer(34963,Qb.buffer.buffer);Qd=b.count;0<Qd?Qb?Z.drawElementsInstancedANGLE(5,4,Qb.type,0<<(Qb.type-5121>>1),Qd):Z.drawArraysInstancedANGLE(5,
0,4,Qd):0>Qd&&(Qb?K.drawElements(5,4,Qb.type,0<<(Qb.type-5121>>1)):K.drawArrays(5,0,4));P.dirty=!0;Ca.setVAO(null);k.viewportWidth=F;k.viewportHeight=ya;U&&(S.cpuTime+=performance.now()-V);pa&&y.destroyStream(va);Pc&&y.destroyStream(kd);oc&&y.destroyStream(pc);Nb&&y.destroyStream(ib);qb&&y.destroyStream(La);Ya&&y.destroyStream(Kb);Kc.unbind()},scope:function(a,c,b){var d,f,n,r,l,w,B,L,p,O,q,e,x,I,z,sa,Ha,K,Ea,ac,G,qa,ga,ha,R,C,N,D,ua,H,u,Ia,za,W,ka,Ua,Y,ba,Aa,fa,ja,Gb,oa,ca,wa,na,Ca,td,Cc,X,ec,$a,
Fc,xb,cb,Mb,ab,nb,Va,ia,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Fa,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,
We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;d=a.viewport;f=d.x|0;n=d.y|0;r="width"in d?d.width|0:k.framebufferWidth-f;l="height"in d?d.height|0:k.framebufferHeight-n;w=k.viewportWidth;k.viewportWidth=r;B=k.viewportHeight;k.viewportHeight=l;L=ya[0];ya[0]=f;p=ya[1];ya[1]=n;O=ya[2];ya[2]=r;q=ya[3];ya[3]=l;e=xa[0];xa[0]=0;x=xa[1];xa[1]=0;I=xa[2];xa[2]=0;z=xa[3];xa[3]=0;sa=T.blend_enable;T.blend_enable=!0;Ha=Da[0];Da[0]=32774;K=Da[1];Da[1]=32774;Ea=pa[0];pa[0]=
770;ac=pa[1];pa[1]=771;G=pa[2];pa[2]=773;qa=pa[3];pa[3]=1;ga=T.cull_enable;T.cull_enable=!0;ha=T.cull_face;T.cull_face=1029;R=E.call(this,k,a,b);C=T.depth_enable;T.depth_enable=R;N=a.viewport;D=N.x|0;ua=N.y|0;H="width"in N?N.width|0:k.framebufferWidth-D;u="height"in N?N.height|0:k.framebufferHeight-ua;Ia=va[0];va[0]=D;za=va[1];va[1]=ua;W=va[2];va[2]=H;ka=va[3];va[3]=u;Ua=T.scissor_enable;T.scissor_enable=!0;Y=T.stencil_enable;T.stencil_enable=!1;if(ba=P.profile)Aa=performance.now(),S.count++;fa=Q.offset;
Q.offset=0;ja=Q.count;Q.count=4;Gb=a.count;oa=Q.instances;Q.instances=Gb;ca=Q.primitive;Q.primitive=5;wa=a.dashLength;na=ra[23];ra[23]=wa;Ca=a.dashTexture;td=ra[24];ra[24]=Ca;Cc=a.depth;X=ra[22];ra[22]=Cc;ec=a.id;$a=ra[31];ra[31]=ec;Fc=a.miterLimit;xb=ra[32];ra[32]=Fc;cb=J.call(this,k,a,b);Mb=ra[33];ra[33]=cb;ab=a.opacity;nb=ra[10];ra[10]=ab;Va=k.pixelRatio;ia=ra[34];ra[34]=Va;Hb=a.scale;Ib=ra[6];ra[6]=Hb;qc=a.scaleFract;Nb=ra[7];ra[7]=qc;ib=a.thickness;Fb=ra[21];ra[21]=ib;Cb=a.translate;vb=ra[8];
ra[8]=Cb;gb=a.translateFract;Xb=ra[9];ra[9]=gb;Ob=M.call(this,k,a,b);pb=ra[3];ra[3]=Ob;aa.buffer=a.colorBuffer;Sa=!1;Tb=null;yb=0;ic=!1;ob=hb=0;Ja=1;qb=0;La=5126;jb=Ma=fb=eb=0;da(aa)?(Sa=!0,Tb=y.createStream(34962,aa),La=Tb.dtype):(Tb=y.getBuffer(aa))?La=Tb.dtype:"constant"in aa?(Ja=2,"number"===typeof aa.constant?(fb=aa.constant,Ma=jb=eb=0):(fb=0<aa.constant.length?aa.constant[0]:0,Ma=1<aa.constant.length?aa.constant[1]:0,jb=2<aa.constant.length?aa.constant[2]:0,eb=3<aa.constant.length?aa.constant[3]:
0)):(Tb=da(aa.buffer)?y.createStream(34962,aa.buffer):y.getBuffer(aa.buffer),La="type"in aa?la[aa.type]:Tb.dtype,ic=!!aa.normalized,ob=aa.size|0,hb=aa.offset|0,qb=aa.stride|0,yb=aa.divisor|0);Wa=U.buffer;U.buffer=Tb;sb=U.divisor;U.divisor=yb;rb=U.normalized;U.normalized=ic;Pa=U.offset;U.offset=hb;Bc=U.size;U.size=ob;Ra=U.state;U.state=Ja;Jb=U.stride;U.stride=qb;Db=U.type;U.type=La;Na=U.w;U.w=eb;yd=U.x;U.x=fb;Ya=U.y;U.y=Ma;Kb=U.z;U.z=jb;ta.buffer=a.positionBuffer;Lb=!1;kb=null;Oa=0;Yb=!1;tb=Qa=0;ub=
1;Ta=0;mb=5126;bb=uc=zc=fc=0;da(ta)?(Lb=!0,kb=y.createStream(34962,ta),mb=kb.dtype):(kb=y.getBuffer(ta))?mb=kb.dtype:"constant"in ta?(ub=2,"number"===typeof ta.constant?(zc=ta.constant,uc=bb=fc=0):(zc=0<ta.constant.length?ta.constant[0]:0,uc=1<ta.constant.length?ta.constant[1]:0,bb=2<ta.constant.length?ta.constant[2]:0,fc=3<ta.constant.length?ta.constant[3]:0)):(kb=da(ta.buffer)?y.createStream(34962,ta.buffer):y.getBuffer(ta.buffer),mb="type"in ta?la[ta.type]:kb.dtype,Yb=!!ta.normalized,tb=ta.size|
0,Qa=ta.offset|0,Ta=ta.stride|0,Oa=ta.divisor|0);jc=v.buffer;v.buffer=kb;gd=v.divisor;v.divisor=Oa;Xa=v.normalized;v.normalized=Yb;Mc=v.offset;v.offset=Qa;zb=v.size;v.size=tb;Za=v.state;v.state=ub;Ub=v.stride;v.stride=Ta;sc=v.type;v.type=mb;Vb=v.w;v.w=fc;Pb=v.x;v.x=zc;Kc=v.y;v.y=uc;Qb=v.z;v.z=bb;Ka.buffer=a.colorBuffer;Qd=!1;Ec=null;Ed=0;Nc=!1;od=ed=0;nc=1;vc=0;gc=5126;Wb=Sb=rc=db=0;da(Ka)?(Qd=!0,Ec=y.createStream(34962,Ka),gc=Ec.dtype):(Ec=y.getBuffer(Ka))?gc=Ec.dtype:"constant"in Ka?(nc=2,"number"===
typeof Ka.constant?(rc=Ka.constant,Sb=Wb=db=0):(rc=0<Ka.constant.length?Ka.constant[0]:0,Sb=1<Ka.constant.length?Ka.constant[1]:0,Wb=2<Ka.constant.length?Ka.constant[2]:0,db=3<Ka.constant.length?Ka.constant[3]:0)):(Ec=da(Ka.buffer)?y.createStream(34962,Ka.buffer):y.getBuffer(Ka.buffer),gc="type"in Ka?la[Ka.type]:Ec.dtype,Nc=!!Ka.normalized,od=Ka.size|0,ed=Ka.offset|0,vc=Ka.stride|0,Ed=Ka.divisor|0);cc=A.buffer;A.buffer=Ec;hc=A.divisor;A.divisor=Ed;xc=A.normalized;A.normalized=Nc;Ac=A.offset;A.offset=
ed;ad=A.size;A.size=od;Qc=A.state;A.state=nc;Rc=A.stride;A.stride=vc;Sc=A.type;A.type=gc;Xc=A.w;A.w=db;wd=A.x;A.x=rc;bd=A.y;A.y=Sb;Yc=A.z;A.z=Wb;Ba.buffer=a.positionBuffer;kc=!1;bc=null;Zc=0;Uc=!1;yc=cd=0;hd=1;pd=0;ye=5126;Nd=mf=id=Fa=0;da(Ba)?(kc=!0,bc=y.createStream(34962,Ba),ye=bc.dtype):(bc=y.getBuffer(Ba))?ye=bc.dtype:"constant"in Ba?(hd=2,"number"===typeof Ba.constant?(id=Ba.constant,mf=Nd=Fa=0):(id=0<Ba.constant.length?Ba.constant[0]:0,mf=1<Ba.constant.length?Ba.constant[1]:0,Nd=2<Ba.constant.length?
Ba.constant[2]:0,Fa=3<Ba.constant.length?Ba.constant[3]:0)):(bc=da(Ba.buffer)?y.createStream(34962,Ba.buffer):y.getBuffer(Ba.buffer),ye="type"in Ba?la[Ba.type]:bc.dtype,Uc=!!Ba.normalized,yc=Ba.size|0,cd=Ba.offset|0,pd=Ba.stride|0,Zc=Ba.divisor|0);Xd=F.buffer;F.buffer=bc;de=F.divisor;F.divisor=Zc;Od=F.normalized;F.normalized=Uc;Kd=F.offset;F.offset=cd;Id=F.size;F.size=yc;md=F.state;F.state=hd;Tc=F.stride;F.stride=pd;ud=F.type;F.type=ye;sd=F.w;F.w=Fa;jd=F.x;F.x=id;xd=F.y;F.y=mf;Cd=F.z;F.z=Nd;Fd=Z.buffer;
Z.buffer=g;oe=Z.divisor;Z.divisor=0;qe=Z.normalized;Z.normalized=!1;ue=Z.offset;Z.offset=0;je=Z.size;Z.size=0;ie=Z.state;Z.state=1;he=Z.stride;Z.stride=8;ve=Z.type;Z.type=5126;ee=Z.w;Z.w=0;le=Z.x;Z.x=0;Oc=Z.y;Z.y=0;fd=Z.z;Z.z=0;we=t.buffer;t.buffer=h;pe=t.divisor;t.divisor=0;Ld=t.normalized;t.normalized=!1;Pd=t.offset;t.offset=4;Rd=t.size;t.size=0;Sd=t.state;t.state=1;me=t.stride;t.stride=8;He=t.type;t.type=5126;Be=t.w;t.w=0;re=t.x;t.x=0;Se=t.y;t.y=0;Te=t.z;t.z=0;lb.buffer=a.positionBuffer;Oe=!1;
xe=null;Fe=0;Ie=!1;Ke=Je=0;Ge=1;Md=0;Yd=5126;Jd=Le=fe=ce=0;da(lb)?(Oe=!0,xe=y.createStream(34962,lb),Yd=xe.dtype):(xe=y.getBuffer(lb))?Yd=xe.dtype:"constant"in lb?(Ge=2,"number"===typeof lb.constant?(fe=lb.constant,Le=Jd=ce=0):(fe=0<lb.constant.length?lb.constant[0]:0,Le=1<lb.constant.length?lb.constant[1]:0,Jd=2<lb.constant.length?lb.constant[2]:0,ce=3<lb.constant.length?lb.constant[3]:0)):(xe=da(lb.buffer)?y.createStream(34962,lb.buffer):y.getBuffer(lb.buffer),Yd="type"in lb?la[lb.type]:xe.dtype,
Ie=!!lb.normalized,Ke=lb.size|0,Je=lb.offset|0,Md=lb.stride|0,Fe=lb.divisor|0);Td=V.buffer;V.buffer=xe;De=V.divisor;V.divisor=Fe;Me=V.normalized;V.normalized=Ie;bf=V.offset;V.offset=Je;af=V.size;V.size=Ke;Ue=V.state;V.state=Ge;Pe=V.stride;V.stride=Md;$e=V.type;V.type=Yd;Ye=V.w;V.w=ce;Ve=V.x;V.x=fe;We=V.y;V.y=Le;Ud=V.z;V.z=Jd;ea.buffer=a.positionBuffer;ae=!1;Xe=null;hf=0;nf=!1;jf=ef=0;kf=1;lf=0;rf=5126;Cf=Bf=sf=of=0;da(ea)?(ae=!0,Xe=y.createStream(34962,ea),rf=Xe.dtype):(Xe=y.getBuffer(ea))?rf=Xe.dtype:
"constant"in ea?(kf=2,"number"===typeof ea.constant?(sf=ea.constant,Bf=Cf=of=0):(sf=0<ea.constant.length?ea.constant[0]:0,Bf=1<ea.constant.length?ea.constant[1]:0,Cf=2<ea.constant.length?ea.constant[2]:0,of=3<ea.constant.length?ea.constant[3]:0)):(Xe=da(ea.buffer)?y.createStream(34962,ea.buffer):y.getBuffer(ea.buffer),rf="type"in ea?la[ea.type]:Xe.dtype,nf=!!ea.normalized,jf=ea.size|0,ef=ea.offset|0,lf=ea.stride|0,hf=ea.divisor|0);Qe=m.buffer;m.buffer=Xe;Ee=m.divisor;m.divisor=hf;pf=m.normalized;
m.normalized=nf;qf=m.offset;m.offset=ef;Df=m.size;m.size=jf;Gf=m.state;m.state=kf;Af=m.stride;m.stride=lf;Ef=m.type;m.type=rf;Ff=m.w;m.w=of;wf=m.x;m.x=sf;xf=m.y;m.y=Bf;vf=m.z;m.z=Cf;yf=ma.vert;ma.vert=36;zf=ma.frag;ma.frag=35;P.dirty=!0;c(k,a,b);k.viewportWidth=w;k.viewportHeight=B;ya[0]=L;ya[1]=p;ya[2]=O;ya[3]=q;xa[0]=e;xa[1]=x;xa[2]=I;xa[3]=z;T.blend_enable=sa;Da[0]=Ha;Da[1]=K;pa[0]=Ea;pa[1]=ac;pa[2]=G;pa[3]=qa;T.cull_enable=ga;T.cull_face=ha;T.depth_enable=C;va[0]=Ia;va[1]=za;va[2]=W;va[3]=ka;
T.scissor_enable=Ua;T.stencil_enable=Y;ba&&(S.cpuTime+=performance.now()-Aa);Q.offset=fa;Q.count=ja;Q.instances=oa;Q.primitive=ca;ra[23]=na;ra[24]=td;ra[22]=X;ra[31]=$a;ra[32]=xb;ra[33]=Mb;ra[10]=nb;ra[34]=ia;ra[6]=Ib;ra[7]=Nb;ra[21]=Fb;ra[8]=vb;ra[9]=Xb;ra[3]=pb;Sa&&y.destroyStream(Tb);U.buffer=Wa;U.divisor=sb;U.normalized=rb;U.offset=Pa;U.size=Bc;U.state=Ra;U.stride=Jb;U.type=Db;U.w=Na;U.x=yd;U.y=Ya;U.z=Kb;Lb&&y.destroyStream(kb);v.buffer=jc;v.divisor=gd;v.normalized=Xa;v.offset=Mc;v.size=zb;v.state=
Za;v.stride=Ub;v.type=sc;v.w=Vb;v.x=Pb;v.y=Kc;v.z=Qb;Qd&&y.destroyStream(Ec);A.buffer=cc;A.divisor=hc;A.normalized=xc;A.offset=Ac;A.size=ad;A.state=Qc;A.stride=Rc;A.type=Sc;A.w=Xc;A.x=wd;A.y=bd;A.z=Yc;kc&&y.destroyStream(bc);F.buffer=Xd;F.divisor=de;F.normalized=Od;F.offset=Kd;F.size=Id;F.state=md;F.stride=Tc;F.type=ud;F.w=sd;F.x=jd;F.y=xd;F.z=Cd;Z.buffer=Fd;Z.divisor=oe;Z.normalized=qe;Z.offset=ue;Z.size=je;Z.state=ie;Z.stride=he;Z.type=ve;Z.w=ee;Z.x=le;Z.y=Oc;Z.z=fd;t.buffer=we;t.divisor=pe;t.normalized=
Ld;t.offset=Pd;t.size=Rd;t.state=Sd;t.stride=me;t.type=He;t.w=Be;t.x=re;t.y=Se;t.z=Te;Oe&&y.destroyStream(xe);V.buffer=Td;V.divisor=De;V.normalized=Me;V.offset=bf;V.size=af;V.state=Ue;V.stride=Pe;V.type=$e;V.w=Ye;V.x=Ve;V.y=We;V.z=Ud;ae&&y.destroyStream(Xe);m.buffer=Qe;m.divisor=Ee;m.normalized=pf;m.offset=qf;m.size=Df;m.state=Gf;m.stride=Af;m.type=Ef;m.w=Ff;m.x=wf;m.y=xf;m.z=vf;ma.vert=yf;ma.frag=zf;P.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(e,
S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m){var u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,Cc,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa;u=e.attributes;ja=e.buffer;b=e.context;z=e.current;W=e.draw;f=e.elements;ba=e.extensions;G=e.framebuffer;q=e.gl;ca=e.isBufferArgs;D=e.next;C=e.shader;c=e.uniforms;l=e.vao;a=D.blend_color;wa=z.blend_color;x=D.blend_equation;na=z.blend_equation;Cc=D.blend_func;Y=z.blend_func;fa=D.colorMask;R=z.colorMask;I=D.depth_range;y=z.depth_range;k=D.polygonOffset_offset;
P=z.polygonOffset_offset;Q=D.sample_coverage;za=z.sample_coverage;oa=D.scissor_box;w=z.scissor_box;K=D.stencil_func;da=z.stencil_func;T=D.stencil_opBack;ma=z.stencil_opBack;ra=D.stencil_opFront;Ca=z.stencil_opFront;xa=D.viewport;ga=z.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,c){var d,h,p,r,n,B;d=G.next;d!==G.cur&&(d?q.bindFramebuffer(36160,d.framebuffer):q.bindFramebuffer(36160,
null),G.cur=d);if(z.dirty){var g,e,x,N,ha,L,sa,Ea,qa,C,H,la,aa,xa,oa,Ba,Cc,ea,X,Zb,Ga,$b,Rb,ia,Gd,ke,Wd,ze,Fa,Vd,ne,Ad;g=D.dither;g!==z.dither&&(g?q.enable(3024):q.disable(3024),z.dither=g);e=D.depth_func;e!==z.depth_func&&(q.depthFunc(e),z.depth_func=e);x=I[0];N=I[1];if(x!==y[0]||N!==y[1])q.depthRange(x,N),y[0]=x,y[1]=N;ha=D.depth_mask;ha!==z.depth_mask&&(q.depthMask(ha),z.depth_mask=ha);L=fa[0];sa=fa[1];Ea=fa[2];qa=fa[3];if(L!==R[0]||sa!==R[1]||Ea!==R[2]||qa!==R[3])q.colorMask(L,sa,Ea,qa),R[0]=
L,R[1]=sa,R[2]=Ea,R[3]=qa;C=D.cull_enable;C!==z.cull_enable&&(C?q.enable(2884):q.disable(2884),z.cull_enable=C);H=D.cull_face;H!==z.cull_face&&(q.cullFace(H),z.cull_face=H);la=D.frontFace;la!==z.frontFace&&(q.frontFace(la),z.frontFace=la);aa=D.lineWidth;aa!==z.lineWidth&&(q.lineWidth(aa),z.lineWidth=aa);xa=D.polygonOffset_enable;xa!==z.polygonOffset_enable&&(xa?q.enable(32823):q.disable(32823),z.polygonOffset_enable=xa);oa=k[0];Ba=k[1];if(oa!==P[0]||Ba!==P[1])q.polygonOffset(oa,Ba),P[0]=oa,P[1]=Ba;
Cc=D.sample_alpha;Cc!==z.sample_alpha&&(Cc?q.enable(32926):q.disable(32926),z.sample_alpha=Cc);ea=D.sample_enable;ea!==z.sample_enable&&(ea?q.enable(32928):q.disable(32928),z.sample_enable=ea);X=Q[0];Zb=Q[1];if(X!==za[0]||Zb!==za[1])q.sampleCoverage(X,Zb),za[0]=X,za[1]=Zb;Ga=D.stencil_mask;Ga!==z.stencil_mask&&(q.stencilMask(Ga),z.stencil_mask=Ga);$b=K[0];Rb=K[1];ia=K[2];if($b!==da[0]||Rb!==da[1]||ia!==da[2])q.stencilFunc($b,Rb,ia),da[0]=$b,da[1]=Rb,da[2]=ia;Gd=ra[0];ke=ra[1];Wd=ra[2];ze=ra[3];if(Gd!==
Ca[0]||ke!==Ca[1]||Wd!==Ca[2]||ze!==Ca[3])q.stencilOpSeparate(Gd,ke,Wd,ze),Ca[0]=Gd,Ca[1]=ke,Ca[2]=Wd,Ca[3]=ze;Fa=T[0];Vd=T[1];ne=T[2];Ad=T[3];if(Fa!==ma[0]||Vd!==ma[1]||ne!==ma[2]||Ad!==ma[3])q.stencilOpSeparate(Fa,Vd,ne,Ad),ma[0]=Fa,ma[1]=Vd,ma[2]=ne,ma[3]=Ad}q.blendColor(0,0,0,0);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=0;q.enable(3042);z.blend_enable=!0;q.blendEquationSeparate(32774,32774);na[0]=32774;na[1]=32774;q.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;q.disable(2929);z.depth_enable=
!1;q.enable(3089);z.scissor_enable=!0;q.disable(2960);z.stencil_enable=!1;if(h=z.profile)p=performance.now(),S.count+=c;q.useProgram(E.program);r=ba.angle_instanced_arrays;var Dd;l.setVAO(null);Dd=W.instances;for(n=0;n<c;++n){B=a[n];var qd,ge,be,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db;qd=B.viewport;ge=qd.x|
0;be=qd.y|0;Ce="width"in qd?qd.width|0:b.framebufferWidth-ge;Ze="height"in qd?qd.height|0:b.framebufferHeight-be;Re=b.viewportWidth;b.viewportWidth=Ce;Hd=b.viewportHeight;b.viewportHeight=Ze;q.viewport(ge,be,Ce,Ze);ga[0]=ge;ga[1]=be;ga[2]=Ce;ga[3]=Ze;Ae=B.viewport;te=Ae.x|0;Zd=Ae.y|0;Bd="width"in Ae?Ae.width|0:b.framebufferWidth-te;$d="height"in Ae?Ae.height|0:b.framebufferHeight-Zd;q.scissor(te,Zd,Bd,$d);w[0]=te;w[1]=Zd;w[2]=Bd;w[3]=$d;ka.buffer=B.positionBuffer;ld=!1;$c=null;rd=0;Lc=!1;Gc=nd=0;
dd=1;Pc=0;kd=5126;wb=tc=Eb=Ab=0;ca(ka)?(ld=!0,$c=ja.createStream(34962,ka),kd=$c.dtype):($c=ja.getBuffer(ka))?kd=$c.dtype:"constant"in ka?(dd=2,"number"===typeof ka.constant?(Eb=ka.constant,tc=wb=Ab=0):(Eb=0<ka.constant.length?ka.constant[0]:0,tc=1<ka.constant.length?ka.constant[1]:0,wb=2<ka.constant.length?ka.constant[2]:0,Ab=3<ka.constant.length?ka.constant[3]:0)):($c=ca(ka.buffer)?ja.createStream(34962,ka.buffer):ja.getBuffer(ka.buffer),kd="type"in ka?Da[ka.type]:$c.dtype,Lc=!!ka.normalized,Gc=
ka.size|0,nd=ka.offset|0,Pc=ka.stride|0,rd=ka.divisor|0);wc=A.location;Bb=u[wc];if(1===dd){Bb.buffer||q.enableVertexAttribArray(wc);Jc=Gc||2;if(Bb.type!==kd||Bb.size!==Jc||Bb.buffer!==$c||Bb.normalized!==Lc||Bb.offset!==nd||Bb.stride!==Pc)q.bindBuffer(34962,$c.buffer),q.vertexAttribPointer(wc,Jc,kd,Lc,Pc,nd),Bb.type=kd,Bb.size=Jc,Bb.buffer=$c,Bb.normalized=Lc,Bb.offset=nd,Bb.stride=Pc;Bb.divisor!==rd&&(r.vertexAttribDivisorANGLE(wc,rd),Bb.divisor=rd)}else if(Bb.buffer&&(q.disableVertexAttribArray(wc),
Bb.buffer=null),Bb.x!==Eb||Bb.y!==tc||Bb.z!==wb||Bb.w!==Ab)q.vertexAttrib4f(wc,Eb,tc,wb,Ab),Bb.x=Eb,Bb.y=tc,Bb.z=wb,Bb.w=Ab;pa.buffer=B.positionFractBuffer;lc=!1;Hc=null;Wc=0;Vc=!1;dc=Dc=0;Ic=1;oc=0;pc=5126;Fc=$a=ec=mc=0;ca(pa)?(lc=!0,Hc=ja.createStream(34962,pa),pc=Hc.dtype):(Hc=ja.getBuffer(pa))?pc=Hc.dtype:"constant"in pa?(Ic=2,"number"===typeof pa.constant?(ec=pa.constant,$a=Fc=mc=0):(ec=0<pa.constant.length?pa.constant[0]:0,$a=1<pa.constant.length?pa.constant[1]:0,Fc=2<pa.constant.length?pa.constant[2]:
0,mc=3<pa.constant.length?pa.constant[3]:0)):(Hc=ca(pa.buffer)?ja.createStream(34962,pa.buffer):ja.getBuffer(pa.buffer),pc="type"in pa?Da[pa.type]:Hc.dtype,Vc=!!pa.normalized,dc=pa.size|0,Dc=pa.offset|0,oc=pa.stride|0,Wc=pa.divisor|0);xb=F.location;cb=u[xb];if(1===Ic){cb.buffer||q.enableVertexAttribArray(xb);Mb=dc||2;if(cb.type!==pc||cb.size!==Mb||cb.buffer!==Hc||cb.normalized!==Vc||cb.offset!==Dc||cb.stride!==oc)q.bindBuffer(34962,Hc.buffer),q.vertexAttribPointer(xb,Mb,pc,Vc,oc,Dc),cb.type=pc,cb.size=
Mb,cb.buffer=Hc,cb.normalized=Vc,cb.offset=Dc,cb.stride=oc;cb.divisor!==Wc&&(r.vertexAttribDivisorANGLE(xb,Wc),cb.divisor=Wc)}else if(cb.buffer&&(q.disableVertexAttribArray(xb),cb.buffer=null),cb.x!==ec||cb.y!==$a||cb.z!==Fc||cb.w!==mc)q.vertexAttrib4f(xb,ec,$a,Fc,mc),cb.x=ec,cb.y=$a,cb.z=Fc,cb.w=mc;ab=B.fill;nb=ab[0];vd=ab[1];Ib=ab[2];Nb=ab[3];n&&Va===nb&&Hb===vd&&qc===Ib&&ib===Nb||(Va=nb,Hb=vd,qc=Ib,ib=Nb,q.uniform4f(M.location,nb,vd,Ib,Nb));Fb=B.scale;Cb=Fb[0];gb=Fb[1];n&&vb===Cb&&Xb===gb||(vb=
Cb,Xb=gb,q.uniform2f(Z.location,Cb,gb));Ob=B.scaleFract;pb=Ob[0];Tb=Ob[1];n&&Sa===pb&&yb===Tb||(Sa=pb,yb=Tb,q.uniform2f(t.location,pb,Tb));ic=B.translate;hb=ic[0];Ja=ic[1];n&&ob===hb&&qb===Ja||(ob=hb,qb=Ja,q.uniform2f(V.location,hb,Ja));La=B.translateFract;eb=La[0];Ma=La[1];n&&fb===eb&&jb===Ma||(fb=eb,jb=Ma,q.uniform2f(m.location,eb,Ma));Wa=B.id;n&&sb===Wa||(sb=Wa,q.uniform1f(U.location,Wa));rb=B.opacity;n&&Pa===rb||(Pa=rb,q.uniform1f(v.location,rb));Bc=J.call(this,b,B,n);Ra=null;(Ra=(Jb=ca(Bc))?
f.createStream(Bc):f.getElements(Bc))&&q.bindBuffer(34963,Ra.buffer.buffer);if(Db=Ra?Ra.vertCount:-1)0<Dd?Ra?r.drawElementsInstancedANGLE(4,Db,Ra.type,0<<(Ra.type-5121>>1),Dd):r.drawArraysInstancedANGLE(4,0,Db,Dd):0>Dd&&(Ra?q.drawElements(4,Db,Ra.type,0<<(Ra.type-5121>>1)):q.drawArrays(4,0,Db)),b.viewportWidth=Re,b.viewportHeight=Hd,ld&&ja.destroyStream($c),lc&&ja.destroyStream(Hc),Jb&&f.destroyStream(Ra)}z.dirty=!0;l.setVAO(null);h&&(S.cpuTime+=performance.now()-p)},draw:function(a){var c,d,h,p,
r,n,B,g,e,x,C,ha,L,sa,Ea,qa,ya,J,la,aa,xa,E;c=G.next;c!==G.cur&&(c?q.bindFramebuffer(36160,c.framebuffer):q.bindFramebuffer(36160,null),G.cur=c);if(z.dirty){c=D.dither;c!==z.dither&&(c?q.enable(3024):q.disable(3024),z.dither=c);c=D.depth_func;c!==z.depth_func&&(q.depthFunc(c),z.depth_func=c);c=I[0];n=I[1];if(c!==y[0]||n!==y[1])q.depthRange(c,n),y[0]=c,y[1]=n;c=D.depth_mask;c!==z.depth_mask&&(q.depthMask(c),z.depth_mask=c);c=fa[0];n=fa[1];d=fa[2];h=fa[3];if(c!==R[0]||n!==R[1]||d!==R[2]||h!==R[3])q.colorMask(c,
n,d,h),R[0]=c,R[1]=n,R[2]=d,R[3]=h;c=D.cull_enable;c!==z.cull_enable&&(c?q.enable(2884):q.disable(2884),z.cull_enable=c);c=D.cull_face;c!==z.cull_face&&(q.cullFace(c),z.cull_face=c);c=D.frontFace;c!==z.frontFace&&(q.frontFace(c),z.frontFace=c);c=D.lineWidth;c!==z.lineWidth&&(q.lineWidth(c),z.lineWidth=c);c=D.polygonOffset_enable;c!==z.polygonOffset_enable&&(c?q.enable(32823):q.disable(32823),z.polygonOffset_enable=c);c=k[0];n=k[1];if(c!==P[0]||n!==P[1])q.polygonOffset(c,n),P[0]=c,P[1]=n;c=D.sample_alpha;
c!==z.sample_alpha&&(c?q.enable(32926):q.disable(32926),z.sample_alpha=c);c=D.sample_enable;c!==z.sample_enable&&(c?q.enable(32928):q.disable(32928),z.sample_enable=c);c=Q[0];n=Q[1];if(c!==za[0]||n!==za[1])q.sampleCoverage(c,n),za[0]=c,za[1]=n;c=D.stencil_mask;c!==z.stencil_mask&&(q.stencilMask(c),z.stencil_mask=c);c=K[0];n=K[1];d=K[2];if(c!==da[0]||n!==da[1]||d!==da[2])q.stencilFunc(c,n,d),da[0]=c,da[1]=n,da[2]=d;c=ra[0];n=ra[1];d=ra[2];h=ra[3];if(c!==Ca[0]||n!==Ca[1]||d!==Ca[2]||h!==Ca[3])q.stencilOpSeparate(c,
n,d,h),Ca[0]=c,Ca[1]=n,Ca[2]=d,Ca[3]=h;c=T[0];n=T[1];d=T[2];h=T[3];if(c!==ma[0]||n!==ma[1]||d!==ma[2]||h!==ma[3])q.stencilOpSeparate(c,n,d,h),ma[0]=c,ma[1]=n,ma[2]=d,ma[3]=h}c=a.viewport;d=c.x|0;h=c.y|0;p="width"in c?c.width|0:b.framebufferWidth-d;r="height"in c?c.height|0:b.framebufferHeight-h;c=b.viewportWidth;b.viewportWidth=p;n=b.viewportHeight;b.viewportHeight=r;q.viewport(d,h,p,r);ga[0]=d;ga[1]=h;ga[2]=p;ga[3]=r;q.blendColor(0,0,0,0);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=0;q.enable(3042);z.blend_enable=
!0;q.blendEquationSeparate(32774,32774);na[0]=32774;na[1]=32774;q.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;q.disable(2929);z.depth_enable=!1;r=a.viewport;d=r.x|0;h=r.y|0;p="width"in r?r.width|0:b.framebufferWidth-d;r="height"in r?r.height|0:b.framebufferHeight-h;q.scissor(d,h,p,r);w[0]=d;w[1]=h;w[2]=p;w[3]=r;q.enable(3089);z.scissor_enable=!0;q.disable(2960);z.stencil_enable=!1;if(d=z.profile)B=performance.now(),S.count++;q.useProgram(H.program);h=ba.angle_instanced_arrays;
l.setVAO(null);ka.buffer=a.positionBuffer;p=!1;g=0;e=!1;C=x=0;ha=1;L=0;sa=5126;J=ya=qa=Ea=0;ca(ka)?(p=!0,r=ja.createStream(34962,ka),sa=r.dtype):(r=ja.getBuffer(ka))?sa=r.dtype:"constant"in ka?(ha=2,"number"===typeof ka.constant?(qa=ka.constant,ya=J=Ea=0):(qa=0<ka.constant.length?ka.constant[0]:0,ya=1<ka.constant.length?ka.constant[1]:0,J=2<ka.constant.length?ka.constant[2]:0,Ea=3<ka.constant.length?ka.constant[3]:0)):(r=ca(ka.buffer)?ja.createStream(34962,ka.buffer):ja.getBuffer(ka.buffer),sa="type"in
ka?Da[ka.type]:r.dtype,e=!!ka.normalized,C=ka.size|0,x=ka.offset|0,L=ka.stride|0,g=ka.divisor|0);la=A.location;aa=u[la];if(1===ha){aa.buffer||q.enableVertexAttribArray(la);C=C||2;if(aa.type!==sa||aa.size!==C||aa.buffer!==r||aa.normalized!==e||aa.offset!==x||aa.stride!==L)q.bindBuffer(34962,r.buffer),q.vertexAttribPointer(la,C,sa,e,L,x),aa.type=sa,aa.size=C,aa.buffer=r,aa.normalized=e,aa.offset=x,aa.stride=L;aa.divisor!==g&&(h.vertexAttribDivisorANGLE(la,g),aa.divisor=g)}else if(aa.buffer&&(q.disableVertexAttribArray(la),
aa.buffer=null),aa.x!==qa||aa.y!==ya||aa.z!==J||aa.w!==Ea)q.vertexAttrib4f(la,qa,ya,J,Ea),aa.x=qa,aa.y=ya,aa.z=J,aa.w=Ea;pa.buffer=a.positionFractBuffer;g=!1;x=0;L=!1;Ea=sa=0;qa=1;la=0;aa=5126;E=xa=J=ya=0;ca(pa)?(g=!0,e=ja.createStream(34962,pa),aa=e.dtype):(e=ja.getBuffer(pa))?aa=e.dtype:"constant"in pa?(qa=2,"number"===typeof pa.constant?(J=pa.constant,xa=E=ya=0):(J=0<pa.constant.length?pa.constant[0]:0,xa=1<pa.constant.length?pa.constant[1]:0,E=2<pa.constant.length?pa.constant[2]:0,ya=3<pa.constant.length?
pa.constant[3]:0)):(e=ca(pa.buffer)?ja.createStream(34962,pa.buffer):ja.getBuffer(pa.buffer),aa="type"in pa?Da[pa.type]:e.dtype,L=!!pa.normalized,Ea=pa.size|0,sa=pa.offset|0,la=pa.stride|0,x=pa.divisor|0);C=F.location;ha=u[C];if(1===qa){ha.buffer||q.enableVertexAttribArray(C);Ea=Ea||2;if(ha.type!==aa||ha.size!==Ea||ha.buffer!==e||ha.normalized!==L||ha.offset!==sa||ha.stride!==la)q.bindBuffer(34962,e.buffer),q.vertexAttribPointer(C,Ea,aa,L,la,sa),ha.type=aa,ha.size=Ea,ha.buffer=e,ha.normalized=L,ha.offset=
sa,ha.stride=la;ha.divisor!==x&&(h.vertexAttribDivisorANGLE(C,x),ha.divisor=x)}else if(ha.buffer&&(q.disableVertexAttribArray(C),ha.buffer=null),ha.x!==J||ha.y!==xa||ha.z!==E||ha.w!==ya)q.vertexAttrib4f(C,J,xa,E,ya),ha.x=J,ha.y=xa,ha.z=E,ha.w=ya;x=a.fill;q.uniform4f(M.location,x[0],x[1],x[2],x[3]);x=a.scale;q.uniform2f(Z.location,x[0],x[1]);x=a.scaleFract;q.uniform2f(t.location,x[0],x[1]);x=a.translate;q.uniform2f(V.location,x[0],x[1]);x=a.translateFract;q.uniform2f(m.location,x[0],x[1]);q.uniform1f(U.location,
a.id);q.uniform1f(v.location,a.opacity);x=N.call(this,b,a,0);(x=(a=ca(x))?f.createStream(x):f.getElements(x))&&q.bindBuffer(34963,x.buffer.buffer);if(L=x?x.vertCount:-1)sa=W.instances,0<sa?x?h.drawElementsInstancedANGLE(4,L,x.type,0<<(x.type-5121>>1),sa):h.drawArraysInstancedANGLE(4,0,L,sa):0>sa&&(x?q.drawElements(4,L,x.type,0<<(x.type-5121>>1)):q.drawArrays(4,0,L)),z.dirty=!0,l.setVAO(null),b.viewportWidth=c,b.viewportHeight=n,d&&(S.cpuTime+=performance.now()-B),p&&ja.destroyStream(r),g&&ja.destroyStream(e),
a&&f.destroyStream(x)},scope:function(k,l,w){var q,e,r,n,B,m,I,K,t,y,L,sa,Ea,T,G,ga,R,N,v,A,Q,P,da,H,J,F,u,E,za,M,ra,U,V,Y,Z,ba,fa,ma,wa,na,Ca,X,ia,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb;q=k.viewport;e=q.x|0;r=q.y|0;n="width"in q?q.width|0:b.framebufferWidth-e;B="height"in q?q.height|0:b.framebufferHeight-r;m=b.viewportWidth;
b.viewportWidth=n;I=b.viewportHeight;b.viewportHeight=B;K=xa[0];xa[0]=e;t=xa[1];xa[1]=r;y=xa[2];xa[2]=n;L=xa[3];xa[3]=B;sa=a[0];a[0]=0;Ea=a[1];a[1]=0;T=a[2];a[2]=0;G=a[3];a[3]=0;ga=D.blend_enable;D.blend_enable=!0;R=x[0];x[0]=32774;N=x[1];x[1]=32774;v=Cc[0];Cc[0]=770;A=Cc[1];Cc[1]=771;Q=Cc[2];Cc[2]=773;P=Cc[3];Cc[3]=1;da=D.depth_enable;D.depth_enable=!1;H=k.viewport;J=H.x|0;F=H.y|0;u="width"in H?H.width|0:b.framebufferWidth-J;E="height"in H?H.height|0:b.framebufferHeight-F;za=oa[0];oa[0]=J;M=oa[1];
oa[1]=F;ra=oa[2];oa[2]=u;U=oa[3];oa[3]=E;V=D.scissor_enable;D.scissor_enable=!0;Y=D.stencil_enable;D.stencil_enable=!1;if(Z=z.profile)ba=performance.now(),S.count++;fa=g.call(this,b,k,w);ma=null;ma=(wa=ca(fa))?f.createStream(fa):f.getElements(fa);na=W.elements;W.elements=ma;Ca=W.offset;W.offset=0;X=ma?ma.vertCount:-1;ia=W.count;W.count=X;Re=W.primitive;W.primitive=4;Hd=k.fill;Ae=c[14];c[14]=Hd;te=k.id;Zd=c[31];c[31]=te;Bd=k.opacity;$d=c[10];c[10]=Bd;ld=b.pixelRatio;$c=c[34];c[34]=ld;rd=k.scale;Lc=
c[6];c[6]=rd;nd=k.scaleFract;Gc=c[7];c[7]=nd;dd=k.translate;Pc=c[8];c[8]=dd;kd=k.translateFract;Ab=c[9];c[9]=kd;Eb=h.call(this,b,k,w);tc=c[3];c[3]=Eb;ka.buffer=k.positionBuffer;wb=!1;wc=null;Bb=0;Jc=!1;Hc=lc=0;Wc=1;Vc=0;Dc=5126;pc=oc=Ic=dc=0;ca(ka)?(wb=!0,wc=ja.createStream(34962,ka),Dc=wc.dtype):(wc=ja.getBuffer(ka))?Dc=wc.dtype:"constant"in ka?(Wc=2,"number"===typeof ka.constant?(Ic=ka.constant,oc=pc=dc=0):(Ic=0<ka.constant.length?ka.constant[0]:0,oc=1<ka.constant.length?ka.constant[1]:0,pc=2<ka.constant.length?
ka.constant[2]:0,dc=3<ka.constant.length?ka.constant[3]:0)):(wc=ca(ka.buffer)?ja.createStream(34962,ka.buffer):ja.getBuffer(ka.buffer),Dc="type"in ka?Da[ka.type]:wc.dtype,Jc=!!ka.normalized,Hc=ka.size|0,lc=ka.offset|0,Vc=ka.stride|0,Bb=ka.divisor|0);mc=p.buffer;p.buffer=wc;ec=p.divisor;p.divisor=Bb;$a=p.normalized;p.normalized=Jc;Fc=p.offset;p.offset=lc;xb=p.size;p.size=Hc;cb=p.state;p.state=Wc;Mb=p.stride;p.stride=Vc;ab=p.type;p.type=Dc;nb=p.w;p.w=dc;Va=p.x;p.x=Ic;vd=p.y;p.y=oc;Hb=p.z;p.z=pc;pa.buffer=
k.positionFractBuffer;Ib=!1;qc=null;Nb=0;ib=!1;Cb=Fb=0;vb=1;gb=0;Xb=5126;Tb=Sa=pb=Ob=0;ca(pa)?(Ib=!0,qc=ja.createStream(34962,pa),Xb=qc.dtype):(qc=ja.getBuffer(pa))?Xb=qc.dtype:"constant"in pa?(vb=2,"number"===typeof pa.constant?(pb=pa.constant,Sa=Tb=Ob=0):(pb=0<pa.constant.length?pa.constant[0]:0,Sa=1<pa.constant.length?pa.constant[1]:0,Tb=2<pa.constant.length?pa.constant[2]:0,Ob=3<pa.constant.length?pa.constant[3]:0)):(qc=ca(pa.buffer)?ja.createStream(34962,pa.buffer):ja.getBuffer(pa.buffer),Xb=
"type"in pa?Da[pa.type]:qc.dtype,ib=!!pa.normalized,Cb=pa.size|0,Fb=pa.offset|0,gb=pa.stride|0,Nb=pa.divisor|0);yb=d.buffer;d.buffer=qc;ic=d.divisor;d.divisor=Nb;hb=d.normalized;d.normalized=ib;ob=d.offset;d.offset=Fb;Ja=d.size;d.size=Cb;qb=d.state;d.state=vb;La=d.stride;d.stride=gb;eb=d.type;d.type=Xb;fb=d.w;d.w=Ob;Ma=d.x;d.x=pb;jb=d.y;d.y=Sa;Wa=d.z;d.z=Tb;sb=C.vert;C.vert=42;rb=C.frag;C.frag=41;z.dirty=!0;l(b,k,w);b.viewportWidth=m;b.viewportHeight=I;xa[0]=K;xa[1]=t;xa[2]=y;xa[3]=L;a[0]=sa;a[1]=
Ea;a[2]=T;a[3]=G;D.blend_enable=ga;x[0]=R;x[1]=N;Cc[0]=v;Cc[1]=A;Cc[2]=Q;Cc[3]=P;D.depth_enable=da;oa[0]=za;oa[1]=M;oa[2]=ra;oa[3]=U;D.scissor_enable=V;D.stencil_enable=Y;Z&&(S.cpuTime+=performance.now()-ba);wa&&f.destroyStream(ma);W.elements=na;W.offset=Ca;W.count=ia;W.primitive=Re;c[14]=Ae;c[31]=Zd;c[10]=$d;c[34]=$c;c[6]=Lc;c[7]=Gc;c[8]=Pc;c[9]=Ab;c[3]=tc;wb&&ja.destroyStream(wc);p.buffer=mc;p.divisor=ec;p.normalized=$a;p.offset=Fc;p.size=xb;p.state=cb;p.stride=Mb;p.type=ab;p.w=nb;p.x=Va;p.y=vd;
p.z=Hb;Ib&&ja.destroyStream(qc);d.buffer=yb;d.divisor=ic;d.normalized=hb;d.offset=ob;d.size=Ja;d.state=qb;d.stride=La;d.type=eb;d.w=fb;d.x=Ma;d.y=jb;d.z=Wa;C.vert=sb;C.frag=rb;z.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,X,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,
ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua){var r,n,B,ua,va,td,Gb,ha,L,sa,Ea,qa,ya,Ia,la,aa,ta,Ka,Ba,lb,ea,ia,Zb,Ga,$b,Rb,Fa,Gd,ke,Wd,ze,se,Vd,ne,Ad,Dd,qd,ge,be;r=e.attributes;n=e.buffer;B=e.context;ua=e.current;va=e.draw;td=e.elements;Gb=e.extensions;ha=e.framebuffer;L=e.gl;sa=e.isBufferArgs;Ea=e.next;qa=e.shader;ya=e.uniforms;Ia=e.vao;la=Ea.blend_color;aa=ua.blend_color;ta=Ea.blend_equation;Ka=ua.blend_equation;Ba=Ea.blend_func;lb=ua.blend_func;ea=Ea.colorMask;ia=ua.colorMask;Zb=Ea.depth_range;Ga=ua.depth_range;
$b=Ea.polygonOffset_offset;Rb=ua.polygonOffset_offset;Fa=Ea.sample_coverage;Gd=ua.sample_coverage;ke=Ea.scissor_box;Wd=ua.scissor_box;ze=Ea.stencil_func;se=ua.stencil_func;Vd=Ea.stencil_opBack;ne=ua.stencil_opBack;Ad=Ea.stencil_opFront;Dd=ua.stencil_opFront;qd=Ea.viewport;ge=ua.viewport;be={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,d,f,h,l,p;b=ha.next;b!==ha.cur&&(b?L.bindFramebuffer(36160,b.framebuffer):L.bindFramebuffer(36160,
null),ha.cur=b);if(ua.dirty){var q,g,e,m,z,t,G,qa,C,N,v,D,A,la,H,J,F,u,ya,E,M,U,W,V,Z,ba,ja,ca,Ba,Fc,xb,cb,Mb,ab;q=Ea.dither;q!==ua.dither&&(q?L.enable(3024):L.disable(3024),ua.dither=q);g=ta[0];e=ta[1];if(g!==Ka[0]||e!==Ka[1])L.blendEquationSeparate(g,e),Ka[0]=g,Ka[1]=e;m=Ea.depth_func;m!==ua.depth_func&&(L.depthFunc(m),ua.depth_func=m);z=Zb[0];t=Zb[1];if(z!==Ga[0]||t!==Ga[1])L.depthRange(z,t),Ga[0]=z,Ga[1]=t;G=Ea.depth_mask;G!==ua.depth_mask&&(L.depthMask(G),ua.depth_mask=G);qa=ea[0];C=ea[1];N=
ea[2];v=ea[3];if(qa!==ia[0]||C!==ia[1]||N!==ia[2]||v!==ia[3])L.colorMask(qa,C,N,v),ia[0]=qa,ia[1]=C,ia[2]=N,ia[3]=v;D=Ea.cull_enable;D!==ua.cull_enable&&(D?L.enable(2884):L.disable(2884),ua.cull_enable=D);A=Ea.cull_face;A!==ua.cull_face&&(L.cullFace(A),ua.cull_face=A);la=Ea.frontFace;la!==ua.frontFace&&(L.frontFace(la),ua.frontFace=la);H=Ea.lineWidth;H!==ua.lineWidth&&(L.lineWidth(H),ua.lineWidth=H);J=Ea.polygonOffset_enable;J!==ua.polygonOffset_enable&&(J?L.enable(32823):L.disable(32823),ua.polygonOffset_enable=
J);F=$b[0];u=$b[1];if(F!==Rb[0]||u!==Rb[1])L.polygonOffset(F,u),Rb[0]=F,Rb[1]=u;ya=Ea.sample_alpha;ya!==ua.sample_alpha&&(ya?L.enable(32926):L.disable(32926),ua.sample_alpha=ya);E=Ea.sample_enable;E!==ua.sample_enable&&(E?L.enable(32928):L.disable(32928),ua.sample_enable=E);M=Fa[0];U=Fa[1];if(M!==Gd[0]||U!==Gd[1])L.sampleCoverage(M,U),Gd[0]=M,Gd[1]=U;W=Ea.stencil_mask;W!==ua.stencil_mask&&(L.stencilMask(W),ua.stencil_mask=W);V=ze[0];Z=ze[1];ba=ze[2];if(V!==se[0]||Z!==se[1]||ba!==se[2])L.stencilFunc(V,
Z,ba),se[0]=V,se[1]=Z,se[2]=ba;ja=Ad[0];ca=Ad[1];Ba=Ad[2];Fc=Ad[3];if(ja!==Dd[0]||ca!==Dd[1]||Ba!==Dd[2]||Fc!==Dd[3])L.stencilOpSeparate(ja,ca,Ba,Fc),Dd[0]=ja,Dd[1]=ca,Dd[2]=Ba,Dd[3]=Fc;xb=Vd[0];cb=Vd[1];Mb=Vd[2];ab=Vd[3];if(xb!==ne[0]||cb!==ne[1]||Mb!==ne[2]||ab!==ne[3])L.stencilOpSeparate(xb,cb,Mb,ab),ne[0]=xb,ne[1]=cb,ne[2]=Mb,ne[3]=ab}L.blendColor(0,0,0,1);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=1;L.enable(3042);ua.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);lb[0]=770;lb[1]=771;lb[2]=773;lb[3]=1;
L.disable(2929);ua.depth_enable=!1;L.enable(3089);ua.scissor_enable=!0;L.disable(2960);ua.stencil_enable=!1;if(d=ua.profile)f=performance.now(),S.count+=c;L.useProgram(wa.program);h=Gb.angle_instanced_arrays;var nb;Ia.setVAO(null);L.uniform1i(K.location,!1);L.uniform1i(Ca.location,P.bind());nb=va.instances;for(l=0;l<c;++l){p=a[l];var Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,
Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,ke,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,qd,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf;Va=p.viewport;vd=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:B.framebufferWidth-
vd;qc="height"in Va?Va.height|0:B.framebufferHeight-Hb;Nb=B.viewportWidth;B.viewportWidth=Ib;ib=B.viewportHeight;B.viewportHeight=qc;L.viewport(vd,Hb,Ib,qc);ge[0]=vd;ge[1]=Hb;ge[2]=Ib;ge[3]=qc;Fb=p.viewport;Cb=Fb.x|0;vb=Fb.y|0;gb="width"in Fb?Fb.width|0:B.framebufferWidth-Cb;Xb="height"in Fb?Fb.height|0:B.framebufferHeight-vb;L.scissor(Cb,vb,gb,Xb);Wd[0]=Cb;Wd[1]=vb;Wd[2]=gb;Wd[3]=Xb;Ob=x.call(this,B,p,l);pb=!1;Sa=null;Tb=0;yb=!1;hb=ic=0;ob=1;Ja=0;qb=5126;Ma=fb=eb=La=0;sa(Ob)?(pb=!0,Sa=n.createStream(34962,
Ob),qb=Sa.dtype):(Sa=n.getBuffer(Ob))?qb=Sa.dtype:"constant"in Ob?(ob=2,"number"===typeof Ob.constant?(eb=Ob.constant,fb=Ma=La=0):(eb=0<Ob.constant.length?Ob.constant[0]:0,fb=1<Ob.constant.length?Ob.constant[1]:0,Ma=2<Ob.constant.length?Ob.constant[2]:0,La=3<Ob.constant.length?Ob.constant[3]:0)):(Sa=sa(Ob.buffer)?n.createStream(34962,Ob.buffer):n.getBuffer(Ob.buffer),qb="type"in Ob?be[Ob.type]:Sa.dtype,yb=!!Ob.normalized,hb=Ob.size|0,ic=Ob.offset|0,Ja=Ob.stride|0,Tb=Ob.divisor|0);jb=Ha.location;Wa=
r[jb];if(1===ob){Wa.buffer||L.enableVertexAttribArray(jb);sb=hb||1;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Sa||Wa.normalized!==yb||Wa.offset!==ic||Wa.stride!==Ja)L.bindBuffer(34962,Sa.buffer),L.vertexAttribPointer(jb,sb,qb,yb,Ja,ic),Wa.type=qb,Wa.size=sb,Wa.buffer=Sa,Wa.normalized=yb,Wa.offset=ic,Wa.stride=Ja;Wa.divisor!==Tb&&(h.vertexAttribDivisorANGLE(jb,Tb),Wa.divisor=Tb)}else if(Wa.buffer&&(L.disableVertexAttribArray(jb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==Ma||Wa.w!==La)L.vertexAttrib4f(jb,
eb,fb,Ma,La),Wa.x=eb,Wa.y=fb,Wa.z=Ma,Wa.w=La;rb=na.call(this,B,p,l);Pa=!1;Bc=null;Ra=0;Jb=!1;Na=Db=0;yd=1;Ya=0;Kb=5126;Yb=Oa=kb=Lb=0;sa(rb)?(Pa=!0,Bc=n.createStream(34962,rb),Kb=Bc.dtype):(Bc=n.getBuffer(rb))?Kb=Bc.dtype:"constant"in rb?(yd=2,"number"===typeof rb.constant?(kb=rb.constant,Oa=Yb=Lb=0):(kb=0<rb.constant.length?rb.constant[0]:0,Oa=1<rb.constant.length?rb.constant[1]:0,Yb=2<rb.constant.length?rb.constant[2]:0,Lb=3<rb.constant.length?rb.constant[3]:0)):(Bc=sa(rb.buffer)?n.createStream(34962,
rb.buffer):n.getBuffer(rb.buffer),Kb="type"in rb?be[rb.type]:Bc.dtype,Jb=!!rb.normalized,Na=rb.size|0,Db=rb.offset|0,Ya=rb.stride|0,Ra=rb.divisor|0);Qa=ac.location;tb=r[Qa];if(1===yd){tb.buffer||L.enableVertexAttribArray(Qa);ub=Na||1;if(tb.type!==Kb||tb.size!==ub||tb.buffer!==Bc||tb.normalized!==Jb||tb.offset!==Db||tb.stride!==Ya)L.bindBuffer(34962,Bc.buffer),L.vertexAttribPointer(Qa,ub,Kb,Jb,Ya,Db),tb.type=Kb,tb.size=ub,tb.buffer=Bc,tb.normalized=Jb,tb.offset=Db,tb.stride=Ya;tb.divisor!==Ra&&(h.vertexAttribDivisorANGLE(Qa,
Ra),tb.divisor=Ra)}else if(tb.buffer&&(L.disableVertexAttribArray(Qa),tb.buffer=null),tb.x!==kb||tb.y!==Oa||tb.z!==Yb||tb.w!==Lb)L.vertexAttrib4f(Qa,kb,Oa,Yb,Lb),tb.x=kb,tb.y=Oa,tb.z=Yb,tb.w=Lb;Ta=X.call(this,B,p,l);mb=!1;fc=null;zc=0;uc=!1;jc=bb=0;gd=1;Xa=0;Mc=5126;sc=Ub=Za=zb=0;sa(Ta)?(mb=!0,fc=n.createStream(34962,Ta),Mc=fc.dtype):(fc=n.getBuffer(Ta))?Mc=fc.dtype:"constant"in Ta?(gd=2,"number"===typeof Ta.constant?(Za=Ta.constant,Ub=sc=zb=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Ub=1<Ta.constant.length?
Ta.constant[1]:0,sc=2<Ta.constant.length?Ta.constant[2]:0,zb=3<Ta.constant.length?Ta.constant[3]:0)):(fc=sa(Ta.buffer)?n.createStream(34962,Ta.buffer):n.getBuffer(Ta.buffer),Mc="type"in Ta?be[Ta.type]:fc.dtype,uc=!!Ta.normalized,jc=Ta.size|0,bb=Ta.offset|0,Xa=Ta.stride|0,zc=Ta.divisor|0);Vb=O.location;Pb=r[Vb];if(1===gd){Pb.buffer||L.enableVertexAttribArray(Vb);Kc=jc||1;if(Pb.type!==Mc||Pb.size!==Kc||Pb.buffer!==fc||Pb.normalized!==uc||Pb.offset!==bb||Pb.stride!==Xa)L.bindBuffer(34962,fc.buffer),
L.vertexAttribPointer(Vb,Kc,Mc,uc,Xa,bb),Pb.type=Mc,Pb.size=Kc,Pb.buffer=fc,Pb.normalized=uc,Pb.offset=bb,Pb.stride=Xa;Pb.divisor!==zc&&(h.vertexAttribDivisorANGLE(Vb,zc),Pb.divisor=zc)}else if(Pb.buffer&&(L.disableVertexAttribArray(Vb),Pb.buffer=null),Pb.x!==Za||Pb.y!==Ub||Pb.z!==sc||Pb.w!==zb)L.vertexAttrib4f(Vb,Za,Ub,sc,zb),Pb.x=Za,Pb.y=Ub,Pb.z=sc,Pb.w=zb;Qb=Y.call(this,B,p,l);Qd=!1;Ec=null;ke=0;Nc=!1;od=ed=0;nc=1;vc=0;gc=5126;Wb=Sb=rc=db=0;sa(Qb)?(Qd=!0,Ec=n.createStream(34962,Qb),gc=Ec.dtype):
(Ec=n.getBuffer(Qb))?gc=Ec.dtype:"constant"in Qb?(nc=2,"number"===typeof Qb.constant?(rc=Qb.constant,Sb=Wb=db=0):(rc=0<Qb.constant.length?Qb.constant[0]:0,Sb=1<Qb.constant.length?Qb.constant[1]:0,Wb=2<Qb.constant.length?Qb.constant[2]:0,db=3<Qb.constant.length?Qb.constant[3]:0)):(Ec=sa(Qb.buffer)?n.createStream(34962,Qb.buffer):n.getBuffer(Qb.buffer),gc="type"in Qb?be[Qb.type]:Ec.dtype,Nc=!!Qb.normalized,od=Qb.size|0,ed=Qb.offset|0,vc=Qb.stride|0,ke=Qb.divisor|0);cc=Ua.location;hc=r[cc];if(1===nc){hc.buffer||
L.enableVertexAttribArray(cc);xc=od||1;if(hc.type!==gc||hc.size!==xc||hc.buffer!==Ec||hc.normalized!==Nc||hc.offset!==ed||hc.stride!==vc)L.bindBuffer(34962,Ec.buffer),L.vertexAttribPointer(cc,xc,gc,Nc,vc,ed),hc.type=gc,hc.size=xc,hc.buffer=Ec,hc.normalized=Nc,hc.offset=ed,hc.stride=vc;hc.divisor!==ke&&(h.vertexAttribDivisorANGLE(cc,ke),hc.divisor=ke)}else if(hc.buffer&&(L.disableVertexAttribArray(cc),hc.buffer=null),hc.x!==rc||hc.y!==Sb||hc.z!==Wb||hc.w!==db)L.vertexAttrib4f(cc,rc,Sb,Wb,db),hc.x=
rc,hc.y=Sb,hc.z=Wb,hc.w=db;Ac=fa.call(this,B,p,l);ad=!1;Qc=null;Rc=0;Sc=!1;wd=Xc=0;bd=1;Yc=0;kc=5126;cd=Uc=Zc=bc=0;sa(Ac)?(ad=!0,Qc=n.createStream(34962,Ac),kc=Qc.dtype):(Qc=n.getBuffer(Ac))?kc=Qc.dtype:"constant"in Ac?(bd=2,"number"===typeof Ac.constant?(Zc=Ac.constant,Uc=cd=bc=0):(Zc=0<Ac.constant.length?Ac.constant[0]:0,Uc=1<Ac.constant.length?Ac.constant[1]:0,cd=2<Ac.constant.length?Ac.constant[2]:0,bc=3<Ac.constant.length?Ac.constant[3]:0)):(Qc=sa(Ac.buffer)?n.createStream(34962,Ac.buffer):n.getBuffer(Ac.buffer),
kc="type"in Ac?be[Ac.type]:Qc.dtype,Sc=!!Ac.normalized,wd=Ac.size|0,Xc=Ac.offset|0,Yc=Ac.stride|0,Rc=Ac.divisor|0);yc=ka.location;hd=r[yc];if(1===bd){hd.buffer||L.enableVertexAttribArray(yc);pd=wd||1;if(hd.type!==kc||hd.size!==pd||hd.buffer!==Qc||hd.normalized!==Sc||hd.offset!==Xc||hd.stride!==Yc)L.bindBuffer(34962,Qc.buffer),L.vertexAttribPointer(yc,pd,kc,Sc,Yc,Xc),hd.type=kc,hd.size=pd,hd.buffer=Qc,hd.normalized=Sc,hd.offset=Xc,hd.stride=Yc;hd.divisor!==Rc&&(h.vertexAttribDivisorANGLE(yc,Rc),hd.divisor=
Rc)}else if(hd.buffer&&(L.disableVertexAttribArray(yc),hd.buffer=null),hd.x!==Zc||hd.y!==Uc||hd.z!==cd||hd.w!==bc)L.vertexAttrib4f(yc,Zc,Uc,cd,bc),hd.x=Zc,hd.y=Uc,hd.z=cd,hd.w=bc;qd=R.call(this,B,p,l);Ne=!1;id=null;mf=0;Nd=!1;de=Xd=0;Od=1;Kd=0;Id=5126;sd=ud=Tc=md=0;sa(qd)?(Ne=!0,id=n.createStream(34962,qd),Id=id.dtype):(id=n.getBuffer(qd))?Id=id.dtype:"constant"in qd?(Od=2,"number"===typeof qd.constant?(Tc=qd.constant,ud=sd=md=0):(Tc=0<qd.constant.length?qd.constant[0]:0,ud=1<qd.constant.length?qd.constant[1]:
0,sd=2<qd.constant.length?qd.constant[2]:0,md=3<qd.constant.length?qd.constant[3]:0)):(id=sa(qd.buffer)?n.createStream(34962,qd.buffer):n.getBuffer(qd.buffer),Id="type"in qd?be[qd.type]:id.dtype,Nd=!!qd.normalized,de=qd.size|0,Xd=qd.offset|0,Kd=qd.stride|0,mf=qd.divisor|0);jd=oa.location;xd=r[jd];if(1===Od){xd.buffer||L.enableVertexAttribArray(jd);Cd=de||1;if(xd.type!==Id||xd.size!==Cd||xd.buffer!==id||xd.normalized!==Nd||xd.offset!==Xd||xd.stride!==Kd)L.bindBuffer(34962,id.buffer),L.vertexAttribPointer(jd,
Cd,Id,Nd,Kd,Xd),xd.type=Id,xd.size=Cd,xd.buffer=id,xd.normalized=Nd,xd.offset=Xd,xd.stride=Kd;xd.divisor!==mf&&(h.vertexAttribDivisorANGLE(jd,mf),xd.divisor=mf)}else if(xd.buffer&&(L.disableVertexAttribArray(jd),xd.buffer=null),xd.x!==Tc||xd.y!==ud||xd.z!==sd||xd.w!==md)L.vertexAttrib4f(jd,Tc,ud,sd,md),xd.x=Tc,xd.y=ud,xd.z=sd,xd.w=md;Fd=I.call(this,B,p,l);oe=!1;qe=null;ue=0;je=!1;he=ie=0;ve=1;ee=0;le=5126;pe=we=fd=Oc=0;sa(Fd)?(oe=!0,qe=n.createStream(34962,Fd),le=qe.dtype):(qe=n.getBuffer(Fd))?le=
qe.dtype:"constant"in Fd?(ve=2,"number"===typeof Fd.constant?(fd=Fd.constant,we=pe=Oc=0):(fd=0<Fd.constant.length?Fd.constant[0]:0,we=1<Fd.constant.length?Fd.constant[1]:0,pe=2<Fd.constant.length?Fd.constant[2]:0,Oc=3<Fd.constant.length?Fd.constant[3]:0)):(qe=sa(Fd.buffer)?n.createStream(34962,Fd.buffer):n.getBuffer(Fd.buffer),le="type"in Fd?be[Fd.type]:qe.dtype,je=!!Fd.normalized,he=Fd.size|0,ie=Fd.offset|0,ee=Fd.stride|0,ue=Fd.divisor|0);Ld=w.location;Pd=r[Ld];if(1===ve){Pd.buffer||L.enableVertexAttribArray(Ld);
Rd=he||4;if(Pd.type!==le||Pd.size!==Rd||Pd.buffer!==qe||Pd.normalized!==je||Pd.offset!==ie||Pd.stride!==ee)L.bindBuffer(34962,qe.buffer),L.vertexAttribPointer(Ld,Rd,le,je,ee,ie),Pd.type=le,Pd.size=Rd,Pd.buffer=qe,Pd.normalized=je,Pd.offset=ie,Pd.stride=ee;Pd.divisor!==ue&&(h.vertexAttribDivisorANGLE(Ld,ue),Pd.divisor=ue)}else if(Pd.buffer&&(L.disableVertexAttribArray(Ld),Pd.buffer=null),Pd.x!==fd||Pd.y!==we||Pd.z!==pe||Pd.w!==Oc)L.vertexAttrib4f(Ld,fd,we,pe,Oc),Pd.x=fd,Pd.y=we,Pd.z=pe,Pd.w=Oc;Sd=
y.call(this,B,p,l);me=!1;He=null;Be=0;re=!1;Te=Se=0;Oe=1;xe=0;Fe=5126;Ge=Ke=Je=Ie=0;sa(Sd)?(me=!0,He=n.createStream(34962,Sd),Fe=He.dtype):(He=n.getBuffer(Sd))?Fe=He.dtype:"constant"in Sd?(Oe=2,"number"===typeof Sd.constant?(Je=Sd.constant,Ke=Ge=Ie=0):(Je=0<Sd.constant.length?Sd.constant[0]:0,Ke=1<Sd.constant.length?Sd.constant[1]:0,Ge=2<Sd.constant.length?Sd.constant[2]:0,Ie=3<Sd.constant.length?Sd.constant[3]:0)):(He=sa(Sd.buffer)?n.createStream(34962,Sd.buffer):n.getBuffer(Sd.buffer),Fe="type"in
Sd?be[Sd.type]:He.dtype,re=!!Sd.normalized,Te=Sd.size|0,Se=Sd.offset|0,xe=Sd.stride|0,Be=Sd.divisor|0);Md=za.location;Yd=r[Md];if(1===Oe){Yd.buffer||L.enableVertexAttribArray(Md);ce=Te||4;if(Yd.type!==Fe||Yd.size!==ce||Yd.buffer!==He||Yd.normalized!==re||Yd.offset!==Se||Yd.stride!==xe)L.bindBuffer(34962,He.buffer),L.vertexAttribPointer(Md,ce,Fe,re,xe,Se),Yd.type=Fe,Yd.size=ce,Yd.buffer=He,Yd.normalized=re,Yd.offset=Se,Yd.stride=xe;Yd.divisor!==Be&&(h.vertexAttribDivisorANGLE(Md,Be),Yd.divisor=Be)}else if(Yd.buffer&&
(L.disableVertexAttribArray(Md),Yd.buffer=null),Yd.x!==Je||Yd.y!==Ke||Yd.z!==Ge||Yd.w!==Ie)L.vertexAttrib4f(Md,Je,Ke,Ge,Ie),Yd.x=Je,Yd.y=Ke,Yd.z=Ge,Yd.w=Ie;fe=k.call(this,B,p,l);Le=!1;Jd=null;Td=0;De=!1;bf=Me=0;af=1;Ue=0;Pe=5126;We=Ve=Ye=$e=0;sa(fe)?(Le=!0,Jd=n.createStream(34962,fe),Pe=Jd.dtype):(Jd=n.getBuffer(fe))?Pe=Jd.dtype:"constant"in fe?(af=2,"number"===typeof fe.constant?(Ye=fe.constant,Ve=We=$e=0):(Ye=0<fe.constant.length?fe.constant[0]:0,Ve=1<fe.constant.length?fe.constant[1]:0,We=2<fe.constant.length?
fe.constant[2]:0,$e=3<fe.constant.length?fe.constant[3]:0)):(Jd=sa(fe.buffer)?n.createStream(34962,fe.buffer):n.getBuffer(fe.buffer),Pe="type"in fe?be[fe.type]:Jd.dtype,De=!!fe.normalized,bf=fe.size|0,Me=fe.offset|0,Ue=fe.stride|0,Td=fe.divisor|0);Ud=da.location;ae=r[Ud];if(1===af){ae.buffer||L.enableVertexAttribArray(Ud);Xe=bf||1;if(ae.type!==Pe||ae.size!==Xe||ae.buffer!==Jd||ae.normalized!==De||ae.offset!==Me||ae.stride!==Ue)L.bindBuffer(34962,Jd.buffer),L.vertexAttribPointer(Ud,Xe,Pe,De,Ue,Me),
ae.type=Pe,ae.size=Xe,ae.buffer=Jd,ae.normalized=De,ae.offset=Me,ae.stride=Ue;ae.divisor!==Td&&(h.vertexAttribDivisorANGLE(Ud,Td),ae.divisor=Td)}else if(ae.buffer&&(L.disableVertexAttribArray(Ud),ae.buffer=null),ae.x!==Ye||ae.y!==Ve||ae.z!==We||ae.w!==$e)L.vertexAttrib4f(Ud,Ye,Ve,We,$e),ae.x=Ye,ae.y=Ve,ae.z=We,ae.w=$e;hf=B.pixelRatio;l&&nf===hf||(nf=hf,L.uniform1f(xa.location,hf));ef=p.scale;jf=ef[0];lf=ef[1];l&&kf===jf&&rf===lf||(kf=jf,rf=lf,L.uniform2f(ga.location,jf,lf));of=p.scaleFract;sf=of[0];
Cf=of[1];l&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,L.uniform2f(Da.location,sf,Cf));Ee=p.translate;pf=Ee[0];Df=Ee[1];l&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,L.uniform2f(pa.location,pf,Df));Af=p.translateFract;Ef=Af[0];wf=Af[1];l&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,L.uniform2f(Aa.location,Ef,wf));vf=Q.call(this,B,p,l);yf=vf[0];If=vf[1];l&&zf===yf&&Kf===If||(zf=yf,Kf=If,L.uniform2f(ra.location,yf,If));Lf=p.opacity;l&&Mf===Lf||(Mf=Lf,L.uniform1f(ma.location,Lf));(tf=p.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Rf=tf._texture;L.uniform1i(T.location,Rf.bind());Hf=p.elements;uf=null;(uf=(dg=sa(Hf))?td.createStream(Hf):td.getElements(Hf))&&L.bindBuffer(34963,uf.buffer.buffer);Sf=p.offset;if(Tf=p.count)0<nb?uf?h.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),nb):h.drawArraysInstancedANGLE(0,Sf,Tf,nb):0>nb&&(uf?L.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):L.drawArrays(0,Sf,Tf)),B.viewportWidth=Nb,B.viewportHeight=ib,pb&&n.destroyStream(Sa),Pa&&n.destroyStream(Bc),mb&&n.destroyStream(fc),
Qd&&n.destroyStream(Ec),ad&&n.destroyStream(Qc),Ne&&n.destroyStream(id),oe&&n.destroyStream(qe),me&&n.destroyStream(He),Le&&n.destroyStream(Jd),Rf.unbind(),dg&&td.destroyStream(uf)}P.unbind();ua.dirty=!0;Ia.setVAO(null);d&&(S.cpuTime+=performance.now()-f)},draw:function(a){var c,b,f,k,l,q,e,x,m,I,z,t,y,G,qa,C,R,D,la,Q,P,F,u,ya,W,V,Y,Z,ba,fa,ja,ca,wa,na,X,Ba,Cc,xb,cb,Mb,ab,nb,Va,qd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,
Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,ke,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe;c=ha.next;c!==ha.cur&&(c?L.bindFramebuffer(36160,c.framebuffer):L.bindFramebuffer(36160,null),ha.cur=c);if(ua.dirty){var Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,
jf,kf,lf,rf,of,sf;Fe=Ea.dither;Fe!==ua.dither&&(Fe?L.enable(3024):L.disable(3024),ua.dither=Fe);Ie=ta[0];Je=ta[1];if(Ie!==Ka[0]||Je!==Ka[1])L.blendEquationSeparate(Ie,Je),Ka[0]=Ie,Ka[1]=Je;Ke=Ea.depth_func;Ke!==ua.depth_func&&(L.depthFunc(Ke),ua.depth_func=Ke);Ge=Zb[0];Md=Zb[1];if(Ge!==Ga[0]||Md!==Ga[1])L.depthRange(Ge,Md),Ga[0]=Ge,Ga[1]=Md;Yd=Ea.depth_mask;Yd!==ua.depth_mask&&(L.depthMask(Yd),ua.depth_mask=Yd);ce=ea[0];fe=ea[1];Le=ea[2];Jd=ea[3];if(ce!==ia[0]||fe!==ia[1]||Le!==ia[2]||Jd!==ia[3])L.colorMask(ce,
fe,Le,Jd),ia[0]=ce,ia[1]=fe,ia[2]=Le,ia[3]=Jd;Td=Ea.cull_enable;Td!==ua.cull_enable&&(Td?L.enable(2884):L.disable(2884),ua.cull_enable=Td);De=Ea.cull_face;De!==ua.cull_face&&(L.cullFace(De),ua.cull_face=De);Me=Ea.frontFace;Me!==ua.frontFace&&(L.frontFace(Me),ua.frontFace=Me);bf=Ea.lineWidth;bf!==ua.lineWidth&&(L.lineWidth(bf),ua.lineWidth=bf);af=Ea.polygonOffset_enable;af!==ua.polygonOffset_enable&&(af?L.enable(32823):L.disable(32823),ua.polygonOffset_enable=af);Ue=$b[0];Pe=$b[1];if(Ue!==Rb[0]||Pe!==
Rb[1])L.polygonOffset(Ue,Pe),Rb[0]=Ue,Rb[1]=Pe;$e=Ea.sample_alpha;$e!==ua.sample_alpha&&($e?L.enable(32926):L.disable(32926),ua.sample_alpha=$e);Ye=Ea.sample_enable;Ye!==ua.sample_enable&&(Ye?L.enable(32928):L.disable(32928),ua.sample_enable=Ye);Ve=Fa[0];We=Fa[1];if(Ve!==Gd[0]||We!==Gd[1])L.sampleCoverage(Ve,We),Gd[0]=Ve,Gd[1]=We;Ud=Ea.stencil_mask;Ud!==ua.stencil_mask&&(L.stencilMask(Ud),ua.stencil_mask=Ud);ae=ze[0];Xe=ze[1];hf=ze[2];if(ae!==se[0]||Xe!==se[1]||hf!==se[2])L.stencilFunc(ae,Xe,hf),
se[0]=ae,se[1]=Xe,se[2]=hf;nf=Ad[0];ef=Ad[1];jf=Ad[2];kf=Ad[3];if(nf!==Dd[0]||ef!==Dd[1]||jf!==Dd[2]||kf!==Dd[3])L.stencilOpSeparate(nf,ef,jf,kf),Dd[0]=nf,Dd[1]=ef,Dd[2]=jf,Dd[3]=kf;lf=Vd[0];rf=Vd[1];of=Vd[2];sf=Vd[3];if(lf!==ne[0]||rf!==ne[1]||of!==ne[2]||sf!==ne[3])L.stencilOpSeparate(lf,rf,of,sf),ne[0]=lf,ne[1]=rf,ne[2]=of,ne[3]=sf}b=a.viewport;f=b.x|0;k=b.y|0;l="width"in b?b.width|0:B.framebufferWidth-f;q="height"in b?b.height|0:B.framebufferHeight-k;e=B.viewportWidth;B.viewportWidth=l;x=B.viewportHeight;
B.viewportHeight=q;L.viewport(f,k,l,q);ge[0]=f;ge[1]=k;ge[2]=l;ge[3]=q;L.blendColor(0,0,0,1);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=1;L.enable(3042);ua.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);lb[0]=770;lb[1]=771;lb[2]=773;lb[3]=1;L.disable(2929);ua.depth_enable=!1;m=a.viewport;I=m.x|0;z=m.y|0;t="width"in m?m.width|0:B.framebufferWidth-I;y="height"in m?m.height|0:B.framebufferHeight-z;L.scissor(I,z,t,y);Wd[0]=I;Wd[1]=z;Wd[2]=t;Wd[3]=y;L.enable(3089);ua.scissor_enable=!0;L.disable(2960);ua.stencil_enable=
!1;if(G=ua.profile)qa=performance.now(),S.count++;L.useProgram(H.program);C=Gb.angle_instanced_arrays;Ia.setVAO(null);R=N.call(this,B,a,0);D=!1;la=null;Q=0;P=!1;u=F=0;ya=1;W=0;V=5126;fa=ba=Z=Y=0;sa(R)?(D=!0,la=n.createStream(34962,R),V=la.dtype):(la=n.getBuffer(R))?V=la.dtype:"constant"in R?(ya=2,"number"===typeof R.constant?(Z=R.constant,ba=fa=Y=0):(Z=0<R.constant.length?R.constant[0]:0,ba=1<R.constant.length?R.constant[1]:0,fa=2<R.constant.length?R.constant[2]:0,Y=3<R.constant.length?R.constant[3]:
0)):(la=sa(R.buffer)?n.createStream(34962,R.buffer):n.getBuffer(R.buffer),V="type"in R?be[R.type]:la.dtype,P=!!R.normalized,u=R.size|0,F=R.offset|0,W=R.stride|0,Q=R.divisor|0);ja=Ha.location;ca=r[ja];if(1===ya){ca.buffer||L.enableVertexAttribArray(ja);wa=u||1;if(ca.type!==V||ca.size!==wa||ca.buffer!==la||ca.normalized!==P||ca.offset!==F||ca.stride!==W)L.bindBuffer(34962,la.buffer),L.vertexAttribPointer(ja,wa,V,P,W,F),ca.type=V,ca.size=wa,ca.buffer=la,ca.normalized=P,ca.offset=F,ca.stride=W;ca.divisor!==
Q&&(C.vertexAttribDivisorANGLE(ja,Q),ca.divisor=Q)}else if(ca.buffer&&(L.disableVertexAttribArray(ja),ca.buffer=null),ca.x!==Z||ca.y!==ba||ca.z!==fa||ca.w!==Y)L.vertexAttrib4f(ja,Z,ba,fa,Y),ca.x=Z,ca.y=ba,ca.z=fa,ca.w=Y;na=g.call(this,B,a,0);X=!1;Ba=null;Cc=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=qd=0;sa(na)?(X=!0,Ba=n.createStream(34962,na),Va=Ba.dtype):(Ba=n.getBuffer(na))?Va=Ba.dtype:"constant"in na?(ab=2,"number"===typeof na.constant?(Hb=na.constant,Ib=qc=qd=0):(Hb=0<na.constant.length?na.constant[0]:
0,Ib=1<na.constant.length?na.constant[1]:0,qc=2<na.constant.length?na.constant[2]:0,qd=3<na.constant.length?na.constant[3]:0)):(Ba=sa(na.buffer)?n.createStream(34962,na.buffer):n.getBuffer(na.buffer),Va="type"in na?be[na.type]:Ba.dtype,xb=!!na.normalized,Mb=na.size|0,cb=na.offset|0,nb=na.stride|0,Cc=na.divisor|0);Nb=ac.location;ib=r[Nb];if(1===ab){ib.buffer||L.enableVertexAttribArray(Nb);Fb=Mb||1;if(ib.type!==Va||ib.size!==Fb||ib.buffer!==Ba||ib.normalized!==xb||ib.offset!==cb||ib.stride!==nb)L.bindBuffer(34962,
Ba.buffer),L.vertexAttribPointer(Nb,Fb,Va,xb,nb,cb),ib.type=Va,ib.size=Fb,ib.buffer=Ba,ib.normalized=xb,ib.offset=cb,ib.stride=nb;ib.divisor!==Cc&&(C.vertexAttribDivisorANGLE(Nb,Cc),ib.divisor=Cc)}else if(ib.buffer&&(L.disableVertexAttribArray(Nb),ib.buffer=null),ib.x!==Hb||ib.y!==Ib||ib.z!==qc||ib.w!==qd)L.vertexAttrib4f(Nb,Hb,Ib,qc,qd),ib.x=Hb,ib.y=Ib,ib.z=qc,ib.w=qd;Cb=h.call(this,B,a,0);vb=!1;gb=null;Xb=0;Ob=!1;Sa=pb=0;Tb=1;yb=0;ic=5126;qb=Ja=ob=hb=0;sa(Cb)?(vb=!0,gb=n.createStream(34962,Cb),
ic=gb.dtype):(gb=n.getBuffer(Cb))?ic=gb.dtype:"constant"in Cb?(Tb=2,"number"===typeof Cb.constant?(ob=Cb.constant,Ja=qb=hb=0):(ob=0<Cb.constant.length?Cb.constant[0]:0,Ja=1<Cb.constant.length?Cb.constant[1]:0,qb=2<Cb.constant.length?Cb.constant[2]:0,hb=3<Cb.constant.length?Cb.constant[3]:0)):(gb=sa(Cb.buffer)?n.createStream(34962,Cb.buffer):n.getBuffer(Cb.buffer),ic="type"in Cb?be[Cb.type]:gb.dtype,Ob=!!Cb.normalized,Sa=Cb.size|0,pb=Cb.offset|0,yb=Cb.stride|0,Xb=Cb.divisor|0);La=O.location;eb=r[La];
if(1===Tb){eb.buffer||L.enableVertexAttribArray(La);fb=Sa||1;if(eb.type!==ic||eb.size!==fb||eb.buffer!==gb||eb.normalized!==Ob||eb.offset!==pb||eb.stride!==yb)L.bindBuffer(34962,gb.buffer),L.vertexAttribPointer(La,fb,ic,Ob,yb,pb),eb.type=ic,eb.size=fb,eb.buffer=gb,eb.normalized=Ob,eb.offset=pb,eb.stride=yb;eb.divisor!==Xb&&(C.vertexAttribDivisorANGLE(La,Xb),eb.divisor=Xb)}else if(eb.buffer&&(L.disableVertexAttribArray(La),eb.buffer=null),eb.x!==ob||eb.y!==Ja||eb.z!==qb||eb.w!==hb)L.vertexAttrib4f(La,
ob,Ja,qb,hb),eb.x=ob,eb.y=Ja,eb.z=qb,eb.w=hb;Ma=p.call(this,B,a,0);jb=!1;Wa=null;sb=0;rb=!1;Bc=Pa=0;Ra=1;Jb=0;Db=5126;Kb=Ya=yd=Na=0;sa(Ma)?(jb=!0,Wa=n.createStream(34962,Ma),Db=Wa.dtype):(Wa=n.getBuffer(Ma))?Db=Wa.dtype:"constant"in Ma?(Ra=2,"number"===typeof Ma.constant?(yd=Ma.constant,Ya=Kb=Na=0):(yd=0<Ma.constant.length?Ma.constant[0]:0,Ya=1<Ma.constant.length?Ma.constant[1]:0,Kb=2<Ma.constant.length?Ma.constant[2]:0,Na=3<Ma.constant.length?Ma.constant[3]:0)):(Wa=sa(Ma.buffer)?n.createStream(34962,
Ma.buffer):n.getBuffer(Ma.buffer),Db="type"in Ma?be[Ma.type]:Wa.dtype,rb=!!Ma.normalized,Bc=Ma.size|0,Pa=Ma.offset|0,Jb=Ma.stride|0,sb=Ma.divisor|0);Lb=Ua.location;kb=r[Lb];if(1===Ra){kb.buffer||L.enableVertexAttribArray(Lb);Oa=Bc||1;if(kb.type!==Db||kb.size!==Oa||kb.buffer!==Wa||kb.normalized!==rb||kb.offset!==Pa||kb.stride!==Jb)L.bindBuffer(34962,Wa.buffer),L.vertexAttribPointer(Lb,Oa,Db,rb,Jb,Pa),kb.type=Db,kb.size=Oa,kb.buffer=Wa,kb.normalized=rb,kb.offset=Pa,kb.stride=Jb;kb.divisor!==sb&&(C.vertexAttribDivisorANGLE(Lb,
sb),kb.divisor=sb)}else if(kb.buffer&&(L.disableVertexAttribArray(Lb),kb.buffer=null),kb.x!==yd||kb.y!==Ya||kb.z!==Kb||kb.w!==Na)L.vertexAttrib4f(Lb,yd,Ya,Kb,Na),kb.x=yd,kb.y=Ya,kb.z=Kb,kb.w=Na;Yb=d.call(this,B,a,0);Qa=!1;tb=null;ub=0;Ta=!1;fc=mb=0;zc=1;uc=0;bb=5126;Mc=Xa=gd=jc=0;sa(Yb)?(Qa=!0,tb=n.createStream(34962,Yb),bb=tb.dtype):(tb=n.getBuffer(Yb))?bb=tb.dtype:"constant"in Yb?(zc=2,"number"===typeof Yb.constant?(gd=Yb.constant,Xa=Mc=jc=0):(gd=0<Yb.constant.length?Yb.constant[0]:0,Xa=1<Yb.constant.length?
Yb.constant[1]:0,Mc=2<Yb.constant.length?Yb.constant[2]:0,jc=3<Yb.constant.length?Yb.constant[3]:0)):(tb=sa(Yb.buffer)?n.createStream(34962,Yb.buffer):n.getBuffer(Yb.buffer),bb="type"in Yb?be[Yb.type]:tb.dtype,Ta=!!Yb.normalized,fc=Yb.size|0,mb=Yb.offset|0,uc=Yb.stride|0,ub=Yb.divisor|0);zb=ka.location;Za=r[zb];if(1===zc){Za.buffer||L.enableVertexAttribArray(zb);Ub=fc||1;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Ta||Za.offset!==mb||Za.stride!==uc)L.bindBuffer(34962,tb.buffer),
L.vertexAttribPointer(zb,Ub,bb,Ta,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=Ta,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(C.vertexAttribDivisorANGLE(zb,ub),Za.divisor=ub)}else if(Za.buffer&&(L.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==gd||Za.y!==Xa||Za.z!==Mc||Za.w!==jc)L.vertexAttrib4f(zb,gd,Xa,Mc,jc),Za.x=gd,Za.y=Xa,Za.z=Mc,Za.w=jc;sc=E.call(this,B,a,0);Vb=!1;Pb=null;Kc=0;Qb=!1;Ec=ke=0;Ed=1;Nc=0;ed=5126;gc=vc=nc=od=0;sa(sc)?(Vb=!0,Pb=n.createStream(34962,sc),ed=Pb.dtype):
(Pb=n.getBuffer(sc))?ed=Pb.dtype:"constant"in sc?(Ed=2,"number"===typeof sc.constant?(nc=sc.constant,vc=gc=od=0):(nc=0<sc.constant.length?sc.constant[0]:0,vc=1<sc.constant.length?sc.constant[1]:0,gc=2<sc.constant.length?sc.constant[2]:0,od=3<sc.constant.length?sc.constant[3]:0)):(Pb=sa(sc.buffer)?n.createStream(34962,sc.buffer):n.getBuffer(sc.buffer),ed="type"in sc?be[sc.type]:Pb.dtype,Qb=!!sc.normalized,Ec=sc.size|0,ke=sc.offset|0,Nc=sc.stride|0,Kc=sc.divisor|0);db=oa.location;rc=r[db];if(1===Ed){rc.buffer||
L.enableVertexAttribArray(db);Sb=Ec||1;if(rc.type!==ed||rc.size!==Sb||rc.buffer!==Pb||rc.normalized!==Qb||rc.offset!==ke||rc.stride!==Nc)L.bindBuffer(34962,Pb.buffer),L.vertexAttribPointer(db,Sb,ed,Qb,Nc,ke),rc.type=ed,rc.size=Sb,rc.buffer=Pb,rc.normalized=Qb,rc.offset=ke,rc.stride=Nc;rc.divisor!==Kc&&(C.vertexAttribDivisorANGLE(db,Kc),rc.divisor=Kc)}else if(rc.buffer&&(L.disableVertexAttribArray(db),rc.buffer=null),rc.x!==nc||rc.y!==vc||rc.z!==gc||rc.w!==od)L.vertexAttrib4f(db,nc,vc,gc,od),rc.x=
nc,rc.y=vc,rc.z=gc,rc.w=od;Wb=J.call(this,B,a,0);cc=!1;hc=null;xc=0;Ac=!1;Qc=ad=0;Rc=1;Sc=0;Xc=5126;kc=Yc=bd=wd=0;sa(Wb)?(cc=!0,hc=n.createStream(34962,Wb),Xc=hc.dtype):(hc=n.getBuffer(Wb))?Xc=hc.dtype:"constant"in Wb?(Rc=2,"number"===typeof Wb.constant?(bd=Wb.constant,Yc=kc=wd=0):(bd=0<Wb.constant.length?Wb.constant[0]:0,Yc=1<Wb.constant.length?Wb.constant[1]:0,kc=2<Wb.constant.length?Wb.constant[2]:0,wd=3<Wb.constant.length?Wb.constant[3]:0)):(hc=sa(Wb.buffer)?n.createStream(34962,Wb.buffer):n.getBuffer(Wb.buffer),
Xc="type"in Wb?be[Wb.type]:hc.dtype,Ac=!!Wb.normalized,Qc=Wb.size|0,ad=Wb.offset|0,Sc=Wb.stride|0,xc=Wb.divisor|0);bc=w.location;Zc=r[bc];if(1===Rc){Zc.buffer||L.enableVertexAttribArray(bc);Uc=Qc||4;if(Zc.type!==Xc||Zc.size!==Uc||Zc.buffer!==hc||Zc.normalized!==Ac||Zc.offset!==ad||Zc.stride!==Sc)L.bindBuffer(34962,hc.buffer),L.vertexAttribPointer(bc,Uc,Xc,Ac,Sc,ad),Zc.type=Xc,Zc.size=Uc,Zc.buffer=hc,Zc.normalized=Ac,Zc.offset=ad,Zc.stride=Sc;Zc.divisor!==xc&&(C.vertexAttribDivisorANGLE(bc,xc),Zc.divisor=
xc)}else if(Zc.buffer&&(L.disableVertexAttribArray(bc),Zc.buffer=null),Zc.x!==bd||Zc.y!==Yc||Zc.z!==kc||Zc.w!==wd)L.vertexAttrib4f(bc,bd,Yc,kc,wd),Zc.x=bd,Zc.y=Yc,Zc.z=kc,Zc.w=wd;cd=M.call(this,B,a,0);yc=!1;hd=null;pd=0;ye=!1;id=Ne=0;mf=1;Nd=0;Xd=5126;Id=Kd=Od=de=0;sa(cd)?(yc=!0,hd=n.createStream(34962,cd),Xd=hd.dtype):(hd=n.getBuffer(cd))?Xd=hd.dtype:"constant"in cd?(mf=2,"number"===typeof cd.constant?(Od=cd.constant,Kd=Id=de=0):(Od=0<cd.constant.length?cd.constant[0]:0,Kd=1<cd.constant.length?cd.constant[1]:
0,Id=2<cd.constant.length?cd.constant[2]:0,de=3<cd.constant.length?cd.constant[3]:0)):(hd=sa(cd.buffer)?n.createStream(34962,cd.buffer):n.getBuffer(cd.buffer),Xd="type"in cd?be[cd.type]:hd.dtype,ye=!!cd.normalized,id=cd.size|0,Ne=cd.offset|0,Nd=cd.stride|0,pd=cd.divisor|0);md=za.location;Tc=r[md];if(1===mf){Tc.buffer||L.enableVertexAttribArray(md);ud=id||4;if(Tc.type!==Xd||Tc.size!==ud||Tc.buffer!==hd||Tc.normalized!==ye||Tc.offset!==Ne||Tc.stride!==Nd)L.bindBuffer(34962,hd.buffer),L.vertexAttribPointer(md,
ud,Xd,ye,Nd,Ne),Tc.type=Xd,Tc.size=ud,Tc.buffer=hd,Tc.normalized=ye,Tc.offset=Ne,Tc.stride=Nd;Tc.divisor!==pd&&(C.vertexAttribDivisorANGLE(md,pd),Tc.divisor=pd)}else if(Tc.buffer&&(L.disableVertexAttribArray(md),Tc.buffer=null),Tc.x!==Od||Tc.y!==Kd||Tc.z!==Id||Tc.w!==de)L.vertexAttrib4f(md,Od,Kd,Id,de),Tc.x=Od,Tc.y=Kd,Tc.z=Id,Tc.w=de;sd=U.call(this,B,a,0);jd=!1;xd=null;Cd=0;Fd=!1;qe=oe=0;ue=1;je=0;ie=5126;le=ee=ve=he=0;sa(sd)?(jd=!0,xd=n.createStream(34962,sd),ie=xd.dtype):(xd=n.getBuffer(sd))?ie=
xd.dtype:"constant"in sd?(ue=2,"number"===typeof sd.constant?(ve=sd.constant,ee=le=he=0):(ve=0<sd.constant.length?sd.constant[0]:0,ee=1<sd.constant.length?sd.constant[1]:0,le=2<sd.constant.length?sd.constant[2]:0,he=3<sd.constant.length?sd.constant[3]:0)):(xd=sa(sd.buffer)?n.createStream(34962,sd.buffer):n.getBuffer(sd.buffer),ie="type"in sd?be[sd.type]:xd.dtype,Fd=!!sd.normalized,qe=sd.size|0,oe=sd.offset|0,je=sd.stride|0,Cd=sd.divisor|0);Oc=da.location;fd=r[Oc];if(1===ue){fd.buffer||L.enableVertexAttribArray(Oc);
we=qe||1;if(fd.type!==ie||fd.size!==we||fd.buffer!==xd||fd.normalized!==Fd||fd.offset!==oe||fd.stride!==je)L.bindBuffer(34962,xd.buffer),L.vertexAttribPointer(Oc,we,ie,Fd,je,oe),fd.type=ie,fd.size=we,fd.buffer=xd,fd.normalized=Fd,fd.offset=oe,fd.stride=je;fd.divisor!==Cd&&(C.vertexAttribDivisorANGLE(Oc,Cd),fd.divisor=Cd)}else if(fd.buffer&&(L.disableVertexAttribArray(Oc),fd.buffer=null),fd.x!==ve||fd.y!==ee||fd.z!==le||fd.w!==he)L.vertexAttrib4f(Oc,ve,ee,le,he),fd.x=ve,fd.y=ee,fd.z=le,fd.w=he;L.uniform1i(K.location,
!1);L.uniform1f(xa.location,B.pixelRatio);pe=a.scale;L.uniform2f(ga.location,pe[0],pe[1]);Ld=a.scaleFract;L.uniform2f(Da.location,Ld[0],Ld[1]);Pd=a.translate;L.uniform2f(pa.location,Pd[0],Pd[1]);Rd=a.translateFract;L.uniform2f(Aa.location,Rd[0],Rd[1]);Sd=v.call(this,B,a,0);L.uniform2f(ra.location,Sd[0],Sd[1]);L.uniform1f(ma.location,a.opacity);L.uniform1i(Ca.location,A.bind());(me=a.markerTexture)&&"framebuffer"===me._reglType&&(me=me.color[0]);He=me._texture;L.uniform1i(T.location,He.bind());Be=
a.elements;re=null;(re=(Se=sa(Be))?td.createStream(Be):td.getElements(Be))&&L.bindBuffer(34963,re.buffer.buffer);Te=a.offset;if(Oe=a.count)xe=va.instances,0<xe?re?C.drawElementsInstancedANGLE(0,Oe,re.type,Te<<(re.type-5121>>1),xe):C.drawArraysInstancedANGLE(0,Te,Oe,xe):0>xe&&(re?L.drawElements(0,Oe,re.type,Te<<(re.type-5121>>1)):L.drawArrays(0,Te,Oe)),ua.dirty=!0,Ia.setVAO(null),B.viewportWidth=e,B.viewportHeight=x,G&&(S.cpuTime+=performance.now()-qa),D&&n.destroyStream(la),X&&n.destroyStream(Ba),
vb&&n.destroyStream(gb),jb&&n.destroyStream(Wa),Qa&&n.destroyStream(tb),Vb&&n.destroyStream(Pb),cc&&n.destroyStream(hc),yc&&n.destroyStream(hd),jd&&n.destroyStream(xd),A.unbind(),He.unbind(),Se&&td.destroyStream(re)},scope:function(d,h,k){var r,w,p,L,O,g,e,x,I,K,y,T,R,ga,ha,N,ac,Ha,v,A,Q,P,aa,H,J,da,E,xa,M,za,ra,Ia,ea,U,ka,Y,fa,Ua,pa,Da,ma,Aa,na,oa,wa,ta,Gb,Ca,X,Ga,Cc,lb,Ka,Rb,Sa,ia,Zb,$b,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Wd,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,Gd,Xa,
Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Fa,Ec,Vd,Nc,ed,ge,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,ze,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,Dd,ne,id,Ad,se,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,Jf,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;r=d.viewport;w=r.x|0;p=r.y|0;L="width"in r?r.width|0:B.framebufferWidth-w;O="height"in r?r.height|0:B.framebufferHeight-p;g=B.viewportWidth;B.viewportWidth=L;e=B.viewportHeight;B.viewportHeight=O;x=qd[0];qd[0]=w;I=qd[1];qd[1]=p;K=qd[2];qd[2]=L;y=qd[3];qd[3]=O;T=la[0];la[0]=0;R=la[1];la[1]=0;ga=la[2];la[2]=0;ha=la[3];la[3]=1;N=Ea.blend_enable;Ea.blend_enable=!0;ac=Ba[0];Ba[0]=770;Ha=Ba[1];Ba[1]=
771;v=Ba[2];Ba[2]=773;A=Ba[3];Ba[3]=1;Q=Ea.depth_enable;Ea.depth_enable=!1;P=d.viewport;aa=P.x|0;H=P.y|0;J="width"in P?P.width|0:B.framebufferWidth-aa;da="height"in P?P.height|0:B.framebufferHeight-H;E=ke[0];ke[0]=aa;xa=ke[1];ke[1]=H;M=ke[2];ke[2]=J;za=ke[3];ke[3]=da;ra=Ea.scissor_enable;Ea.scissor_enable=!0;Ia=Ea.stencil_enable;Ea.stencil_enable=!1;if(ea=ua.profile)U=performance.now(),S.count++;ka=d.elements;Y=null;Y=(fa=sa(ka))?td.createStream(ka):td.getElements(ka);Ua=va.elements;va.elements=Y;
pa=d.offset;Da=va.offset;va.offset=pa;ma=d.count;Aa=va.count;va.count=ma;na=va.primitive;va.primitive=0;oa=ya[45];ya[45]=!1;wa=d.markerTexture;ta=ya[48];ya[48]=wa;Gb=d.opacity;Ca=ya[10];ya[10]=Gb;X=F.call(this,B,d,k);Ga=ya[46];ya[46]=X;Cc=ya[47];ya[47]=Z;lb=B.pixelRatio;Ka=ya[34];ya[34]=lb;Rb=d.scale;Sa=ya[6];ya[6]=Rb;ia=d.scaleFract;Zb=ya[7];ya[7]=ia;$b=d.translate;hb=ya[8];ya[8]=$b;ob=d.translateFract;Ja=ya[9];ya[9]=ob;qb=t.call(this,B,d,k);La=!1;eb=null;fb=0;Ma=!1;Wa=jb=0;sb=1;rb=0;Pa=5126;Db=
Jb=Ra=Wd=0;sa(qb)?(La=!0,eb=n.createStream(34962,qb),Pa=eb.dtype):(eb=n.getBuffer(qb))?Pa=eb.dtype:"constant"in qb?(sb=2,"number"===typeof qb.constant?(Ra=qb.constant,Jb=Db=Wd=0):(Ra=0<qb.constant.length?qb.constant[0]:0,Jb=1<qb.constant.length?qb.constant[1]:0,Db=2<qb.constant.length?qb.constant[2]:0,Wd=3<qb.constant.length?qb.constant[3]:0)):(eb=sa(qb.buffer)?n.createStream(34962,qb.buffer):n.getBuffer(qb.buffer),Pa="type"in qb?be[qb.type]:eb.dtype,Ma=!!qb.normalized,Wa=qb.size|0,jb=qb.offset|0,
rb=qb.stride|0,fb=qb.divisor|0);Na=V.buffer;V.buffer=eb;zd=V.divisor;V.divisor=fb;Ya=V.normalized;V.normalized=Ma;Kb=V.offset;V.offset=jb;Lb=V.size;V.size=Wa;kb=V.state;V.state=sb;Oa=V.stride;V.stride=rb;Yb=V.type;V.type=Pa;Qa=V.w;V.w=Wd;tb=V.x;V.x=Ra;ub=V.y;V.y=Jb;Ta=V.z;V.z=Db;mb=m.call(this,B,d,k);fc=!1;zc=null;uc=0;bb=!1;Gd=jc=0;Xa=1;Mc=0;zb=5126;Vb=sc=Ub=Za=0;sa(mb)?(fc=!0,zc=n.createStream(34962,mb),zb=zc.dtype):(zc=n.getBuffer(mb))?zb=zc.dtype:"constant"in mb?(Xa=2,"number"===typeof mb.constant?
(Ub=mb.constant,sc=Vb=Za=0):(Ub=0<mb.constant.length?mb.constant[0]:0,sc=1<mb.constant.length?mb.constant[1]:0,Vb=2<mb.constant.length?mb.constant[2]:0,Za=3<mb.constant.length?mb.constant[3]:0)):(zc=sa(mb.buffer)?n.createStream(34962,mb.buffer):n.getBuffer(mb.buffer),zb="type"in mb?be[mb.type]:zc.dtype,bb=!!mb.normalized,Gd=mb.size|0,jc=mb.offset|0,Mc=mb.stride|0,uc=mb.divisor|0);Pb=u.buffer;u.buffer=zc;Kc=u.divisor;u.divisor=uc;Qb=u.normalized;u.normalized=bb;Fa=u.offset;u.offset=jc;Ec=u.size;u.size=
Gd;Vd=u.state;u.state=Xa;Nc=u.stride;u.stride=Mc;ed=u.type;u.type=zb;ge=u.w;u.w=Za;nc=u.x;u.x=Ub;vc=u.y;u.y=sc;gc=u.z;u.z=Vb;db=ja.call(this,B,d,k);rc=!1;Sb=null;Wb=0;cc=!1;xc=hc=0;Ac=1;ad=0;Qc=5126;ze=Xc=Sc=Rc=0;sa(db)?(rc=!0,Sb=n.createStream(34962,db),Qc=Sb.dtype):(Sb=n.getBuffer(db))?Qc=Sb.dtype:"constant"in db?(Ac=2,"number"===typeof db.constant?(Sc=db.constant,Xc=ze=Rc=0):(Sc=0<db.constant.length?db.constant[0]:0,Xc=1<db.constant.length?db.constant[1]:0,ze=2<db.constant.length?db.constant[2]:
0,Rc=3<db.constant.length?db.constant[3]:0)):(Sb=sa(db.buffer)?n.createStream(34962,db.buffer):n.getBuffer(db.buffer),Qc="type"in db?be[db.type]:Sb.dtype,cc=!!db.normalized,xc=db.size|0,hc=db.offset|0,ad=db.stride|0,Wb=db.divisor|0);bd=b.buffer;b.buffer=Sb;Yc=b.divisor;b.divisor=Wb;kc=b.normalized;b.normalized=cc;bc=b.offset;b.offset=hc;Zc=b.size;b.size=xc;Uc=b.state;b.state=Ac;cd=b.stride;b.stride=ad;yc=b.type;b.type=Qc;hd=b.w;b.w=Rc;pd=b.x;b.x=Sc;Dd=b.y;b.y=Xc;ne=b.z;b.z=ze;id=z.call(this,B,d,k);
Ad=!1;se=null;Xd=0;de=!1;Kd=Od=0;Id=1;md=0;Tc=5126;xd=jd=sd=ud=0;sa(id)?(Ad=!0,se=n.createStream(34962,id),Tc=se.dtype):(se=n.getBuffer(id))?Tc=se.dtype:"constant"in id?(Id=2,"number"===typeof id.constant?(sd=id.constant,jd=xd=ud=0):(sd=0<id.constant.length?id.constant[0]:0,jd=1<id.constant.length?id.constant[1]:0,xd=2<id.constant.length?id.constant[2]:0,ud=3<id.constant.length?id.constant[3]:0)):(se=sa(id.buffer)?n.createStream(34962,id.buffer):n.getBuffer(id.buffer),Tc="type"in id?be[id.type]:se.dtype,
de=!!id.normalized,Kd=id.size|0,Od=id.offset|0,md=id.stride|0,Xd=id.divisor|0);Cd=W.buffer;W.buffer=se;Fd=W.divisor;W.divisor=Xd;oe=W.normalized;W.normalized=de;qe=W.offset;W.offset=Od;ue=W.size;W.size=Kd;je=W.state;W.state=Id;ie=W.stride;W.stride=md;he=W.type;W.type=Tc;ve=W.w;W.w=ud;ee=W.x;W.x=sd;le=W.y;W.y=jd;Oc=W.z;W.z=xd;fd=f.call(this,B,d,k);we=!1;pe=null;Ld=0;Pd=!1;Sd=Rd=0;me=1;Jf=0;Be=5126;Oe=Te=Se=re=0;sa(fd)?(we=!0,pe=n.createStream(34962,fd),Be=pe.dtype):(pe=n.getBuffer(fd))?Be=pe.dtype:
"constant"in fd?(me=2,"number"===typeof fd.constant?(Se=fd.constant,Te=Oe=re=0):(Se=0<fd.constant.length?fd.constant[0]:0,Te=1<fd.constant.length?fd.constant[1]:0,Oe=2<fd.constant.length?fd.constant[2]:0,re=3<fd.constant.length?fd.constant[3]:0)):(pe=sa(fd.buffer)?n.createStream(34962,fd.buffer):n.getBuffer(fd.buffer),Be="type"in fd?be[fd.type]:pe.dtype,Pd=!!fd.normalized,Sd=fd.size|0,Rd=fd.offset|0,Jf=fd.stride|0,Ld=fd.divisor|0);xe=ba.buffer;ba.buffer=pe;Fe=ba.divisor;ba.divisor=Ld;Ie=ba.normalized;
ba.normalized=Pd;Je=ba.offset;ba.offset=Rd;Ke=ba.size;ba.size=Sd;Ge=ba.state;ba.state=me;Md=ba.stride;ba.stride=Jf;Yd=ba.type;ba.type=Be;ce=ba.w;ba.w=re;fe=ba.x;ba.x=Se;Le=ba.y;ba.y=Te;Jd=ba.z;ba.z=Oe;Td=G.call(this,B,d,k);De=!1;Me=null;bf=0;af=!1;Pe=Ue=0;$e=1;Ye=0;Ve=5126;Xe=ae=Ud=We=0;sa(Td)?(De=!0,Me=n.createStream(34962,Td),Ve=Me.dtype):(Me=n.getBuffer(Td))?Ve=Me.dtype:"constant"in Td?($e=2,"number"===typeof Td.constant?(Ud=Td.constant,ae=Xe=We=0):(Ud=0<Td.constant.length?Td.constant[0]:0,ae=
1<Td.constant.length?Td.constant[1]:0,Xe=2<Td.constant.length?Td.constant[2]:0,We=3<Td.constant.length?Td.constant[3]:0)):(Me=sa(Td.buffer)?n.createStream(34962,Td.buffer):n.getBuffer(Td.buffer),Ve="type"in Td?be[Td.type]:Me.dtype,af=!!Td.normalized,Pe=Td.size|0,Ue=Td.offset|0,Ye=Td.stride|0,bf=Td.divisor|0);hf=q.buffer;q.buffer=Me;nf=q.divisor;q.divisor=bf;ef=q.normalized;q.normalized=af;jf=q.offset;q.offset=Ue;kf=q.size;q.size=Pe;lf=q.state;q.state=$e;rf=q.stride;q.stride=Ye;of=q.type;q.type=Ve;
sf=q.w;q.w=We;Bf=q.x;q.x=Ud;Cf=q.y;q.y=ae;Qe=q.z;q.z=Xe;Ee=ca.call(this,B,d,k);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Ee)?(pf=!0,qf=n.createStream(34962,Ee),xf=qf.dtype):(qf=n.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=sa(Ee.buffer)?n.createStream(34962,
Ee.buffer):n.getBuffer(Ee.buffer),xf="type"in Ee?be[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Kf=D.buffer;D.buffer=qf;Lf=D.divisor;D.divisor=Df;Mf=D.normalized;D.normalized=Gf;tf=D.offset;D.offset=Af;Rf=D.size;D.size=Ef;Hf=D.state;D.state=Ff;uf=D.stride;D.stride=wf;dg=D.type;D.type=xf;Sf=D.w;D.w=vf;Tf=D.x;D.x=yf;qg=D.y;D.y=zf;ff=D.z;D.z=If;cf=C.call(this,B,d,k);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;sa(cf)?(Nf=!0,Of=
n.createStream(34962,cf),Uf=Of.dtype):(Of=n.getBuffer(cf))?Uf=Of.dtype:"constant"in cf?(ig=2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Of=sa(cf.buffer)?n.createStream(34962,cf.buffer):n.getBuffer(cf.buffer),Uf="type"in cf?be[cf.type]:Of.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|
0);rg=c.buffer;c.buffer=Of;sg=c.divisor;c.divisor=eg;tg=c.normalized;c.normalized=fg;ug=c.offset;c.offset=gg;vg=c.size;c.size=hg;wg=c.state;c.state=ig;xg=c.stride;c.stride=Wf;yg=c.type;c.type=Uf;zg=c.w;c.w=Xf;Ag=c.x;c.x=Yf;Bg=c.y;c.y=Zf;gf=c.z;c.z=jg;df=l.call(this,B,d,k);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;sa(df)?(Pf=!0,Qf=n.createStream(34962,df),Vf=Qf.dtype):(Qf=n.getBuffer(df))?Vf=Qf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=
0):(bg=0<df.constant.length?df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Qf=sa(df.buffer)?n.createStream(34962,df.buffer):n.getBuffer(df.buffer),Vf="type"in df?be[df.type]:Qf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=a.buffer;a.buffer=Qf;Dg=a.divisor;a.divisor=kg;Eg=a.normalized;a.normalized=lg;Fg=a.offset;a.offset=mg;Gg=a.size;a.size=ng;Hg=a.state;a.state=
og;Ig=a.stride;a.stride=$f;Jg=a.type;a.type=Vf;Kg=a.w;a.w=ag;Lg=a.x;a.x=bg;Mg=a.y;a.y=cg;Ng=a.z;a.z=pg;Og=qa.vert;qa.vert=44;Pg=qa.frag;qa.frag=43;ua.dirty=!0;h(B,d,k);B.viewportWidth=g;B.viewportHeight=e;qd[0]=x;qd[1]=I;qd[2]=K;qd[3]=y;la[0]=T;la[1]=R;la[2]=ga;la[3]=ha;Ea.blend_enable=N;Ba[0]=ac;Ba[1]=Ha;Ba[2]=v;Ba[3]=A;Ea.depth_enable=Q;ke[0]=E;ke[1]=xa;ke[2]=M;ke[3]=za;Ea.scissor_enable=ra;Ea.stencil_enable=Ia;ea&&(S.cpuTime+=performance.now()-U);fa&&td.destroyStream(Y);va.elements=Ua;va.offset=
Da;va.count=Aa;va.primitive=na;ya[45]=oa;ya[48]=ta;ya[10]=Ca;ya[46]=Ga;ya[47]=Cc;ya[34]=Ka;ya[6]=Sa;ya[7]=Zb;ya[8]=hb;ya[9]=Ja;La&&n.destroyStream(eb);V.buffer=Na;V.divisor=zd;V.normalized=Ya;V.offset=Kb;V.size=Lb;V.state=kb;V.stride=Oa;V.type=Yb;V.w=Qa;V.x=tb;V.y=ub;V.z=Ta;fc&&n.destroyStream(zc);u.buffer=Pb;u.divisor=Kc;u.normalized=Qb;u.offset=Fa;u.size=Ec;u.state=Vd;u.stride=Nc;u.type=ed;u.w=ge;u.x=nc;u.y=vc;u.z=gc;rc&&n.destroyStream(Sb);b.buffer=bd;b.divisor=Yc;b.normalized=kc;b.offset=bc;b.size=
Zc;b.state=Uc;b.stride=cd;b.type=yc;b.w=hd;b.x=pd;b.y=Dd;b.z=ne;Ad&&n.destroyStream(se);W.buffer=Cd;W.divisor=Fd;W.normalized=oe;W.offset=qe;W.size=ue;W.state=je;W.stride=ie;W.type=he;W.w=ve;W.x=ee;W.y=le;W.z=Oc;we&&n.destroyStream(pe);ba.buffer=xe;ba.divisor=Fe;ba.normalized=Ie;ba.offset=Je;ba.size=Ke;ba.state=Ge;ba.stride=Md;ba.type=Yd;ba.w=ce;ba.x=fe;ba.y=Le;ba.z=Jd;De&&n.destroyStream(Me);q.buffer=hf;q.divisor=nf;q.normalized=ef;q.offset=jf;q.size=kf;q.state=lf;q.stride=rf;q.type=of;q.w=sf;q.x=
Bf;q.y=Cf;q.z=Qe;pf&&n.destroyStream(qf);D.buffer=Kf;D.divisor=Lf;D.normalized=Mf;D.offset=tf;D.size=Rf;D.state=Hf;D.stride=uf;D.type=dg;D.w=Sf;D.x=Tf;D.y=qg;D.z=ff;Nf&&n.destroyStream(Of);c.buffer=rg;c.divisor=sg;c.normalized=tg;c.offset=ug;c.size=vg;c.state=wg;c.stride=xg;c.type=yg;c.w=zg;c.x=Ag;c.y=Bg;c.z=gf;Pf&&n.destroyStream(Qf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;qa.vert=Og;qa.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,
S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,X,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac){var Ua,r,n,B,ua,va,td,Gb,ha,L,sa,Ea,qa,ya,Ia,la,aa,ta,Ka,Ba,lb,ea,ia,Zb,Ga,$b,Rb,Fa,Gd,ke,Wd,ze,se,Vd,ne,Ad,Dd,qd,ge;Ua=e.attributes;r=e.buffer;n=e.context;B=e.current;ua=e.draw;va=e.elements;td=e.extensions;Gb=e.framebuffer;ha=e.gl;L=e.isBufferArgs;sa=e.next;Ea=e.shader;qa=e.uniforms;ya=e.vao;Ia=sa.blend_color;la=B.blend_color;aa=sa.blend_equation;ta=
B.blend_equation;Ka=sa.blend_func;Ba=B.blend_func;lb=sa.colorMask;ea=B.colorMask;ia=sa.depth_range;Zb=B.depth_range;Ga=sa.polygonOffset_offset;$b=B.polygonOffset_offset;Rb=sa.sample_coverage;Fa=B.sample_coverage;Gd=sa.scissor_box;ke=B.scissor_box;Wd=sa.stencil_func;ze=B.stencil_func;se=sa.stencil_opBack;Vd=B.stencil_opBack;ne=sa.stencil_opFront;Ad=B.stencil_opFront;Dd=sa.viewport;qd=B.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
c){var b,d,f,h,l,p;b=Gb.next;b!==Gb.cur&&(b?ha.bindFramebuffer(36160,b.framebuffer):ha.bindFramebuffer(36160,null),Gb.cur=b);if(B.dirty){var q,g,e,m,z,t,Ea,G,C,qa,N,v,D,A,H,J,F,u,E,M,Ia,U,W,V,Z,ba,ja,ca,Ka,$a,Fc,xb,cb,Mb;q=sa.dither;q!==B.dither&&(q?ha.enable(3024):ha.disable(3024),B.dither=q);g=aa[0];e=aa[1];if(g!==ta[0]||e!==ta[1])ha.blendEquationSeparate(g,e),ta[0]=g,ta[1]=e;m=sa.depth_func;m!==B.depth_func&&(ha.depthFunc(m),B.depth_func=m);z=ia[0];t=ia[1];if(z!==Zb[0]||t!==Zb[1])ha.depthRange(z,
t),Zb[0]=z,Zb[1]=t;Ea=sa.depth_mask;Ea!==B.depth_mask&&(ha.depthMask(Ea),B.depth_mask=Ea);G=lb[0];C=lb[1];qa=lb[2];N=lb[3];if(G!==ea[0]||C!==ea[1]||qa!==ea[2]||N!==ea[3])ha.colorMask(G,C,qa,N),ea[0]=G,ea[1]=C,ea[2]=qa,ea[3]=N;v=sa.cull_enable;v!==B.cull_enable&&(v?ha.enable(2884):ha.disable(2884),B.cull_enable=v);D=sa.cull_face;D!==B.cull_face&&(ha.cullFace(D),B.cull_face=D);A=sa.frontFace;A!==B.frontFace&&(ha.frontFace(A),B.frontFace=A);H=sa.lineWidth;H!==B.lineWidth&&(ha.lineWidth(H),B.lineWidth=
H);J=sa.polygonOffset_enable;J!==B.polygonOffset_enable&&(J?ha.enable(32823):ha.disable(32823),B.polygonOffset_enable=J);F=Ga[0];u=Ga[1];if(F!==$b[0]||u!==$b[1])ha.polygonOffset(F,u),$b[0]=F,$b[1]=u;E=sa.sample_alpha;E!==B.sample_alpha&&(E?ha.enable(32926):ha.disable(32926),B.sample_alpha=E);M=sa.sample_enable;M!==B.sample_enable&&(M?ha.enable(32928):ha.disable(32928),B.sample_enable=M);Ia=Rb[0];U=Rb[1];if(Ia!==Fa[0]||U!==Fa[1])ha.sampleCoverage(Ia,U),Fa[0]=Ia,Fa[1]=U;W=sa.stencil_mask;W!==B.stencil_mask&&
(ha.stencilMask(W),B.stencil_mask=W);V=Wd[0];Z=Wd[1];ba=Wd[2];if(V!==ze[0]||Z!==ze[1]||ba!==ze[2])ha.stencilFunc(V,Z,ba),ze[0]=V,ze[1]=Z,ze[2]=ba;ja=ne[0];ca=ne[1];Ka=ne[2];$a=ne[3];if(ja!==Ad[0]||ca!==Ad[1]||Ka!==Ad[2]||$a!==Ad[3])ha.stencilOpSeparate(ja,ca,Ka,$a),Ad[0]=ja,Ad[1]=ca,Ad[2]=Ka,Ad[3]=$a;Fc=se[0];xb=se[1];cb=se[2];Mb=se[3];if(Fc!==Vd[0]||xb!==Vd[1]||cb!==Vd[2]||Mb!==Vd[3])ha.stencilOpSeparate(Fc,xb,cb,Mb),Vd[0]=Fc,Vd[1]=xb,Vd[2]=cb,Vd[3]=Mb}ha.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=
0;la[3]=1;ha.enable(3042);B.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;ha.disable(2929);B.depth_enable=!1;ha.enable(3089);B.scissor_enable=!0;ha.disable(2960);B.stencil_enable=!1;if(d=B.profile)f=performance.now(),S.count+=c;ha.useProgram(wa.program);h=td.angle_instanced_arrays;var ab;ya.setVAO(null);ha.uniform1i(K.location,!1);ha.uniform1i(ra.location,P.bind());ab=ua.instances;for(l=0;l<c;++l){p=a[l];var nb,Va,Gd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,
Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Dd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,
Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf;nb=p.viewport;Va=nb.x|0;Gd=nb.y|0;Hb="width"in nb?nb.width|0:n.framebufferWidth-Va;Ib="height"in nb?nb.height|0:n.framebufferHeight-Gd;qc=n.viewportWidth;n.viewportWidth=Hb;Nb=n.viewportHeight;n.viewportHeight=Ib;ha.viewport(Va,Gd,Hb,Ib);qd[0]=Va;qd[1]=Gd;qd[2]=Hb;qd[3]=Ib;ib=p.viewport;Fb=ib.x|0;Cb=ib.y|0;vb="width"in ib?ib.width|0:n.framebufferWidth-Fb;gb="height"in ib?ib.height|0:n.framebufferHeight-Cb;ha.scissor(Fb,Cb,vb,gb);ke[0]=Fb;ke[1]=Cb;
ke[2]=vb;ke[3]=gb;Xb=x.call(this,n,p,l);Ob=!1;pb=null;Sa=0;Tb=!1;ic=yb=0;hb=1;ob=0;Ja=5126;fb=eb=La=qb=0;L(Xb)?(Ob=!0,pb=r.createStream(34962,Xb),Ja=pb.dtype):(pb=r.getBuffer(Xb))?Ja=pb.dtype:"constant"in Xb?(hb=2,"number"===typeof Xb.constant?(La=Xb.constant,eb=fb=qb=0):(La=0<Xb.constant.length?Xb.constant[0]:0,eb=1<Xb.constant.length?Xb.constant[1]:0,fb=2<Xb.constant.length?Xb.constant[2]:0,qb=3<Xb.constant.length?Xb.constant[3]:0)):(pb=L(Xb.buffer)?r.createStream(34962,Xb.buffer):r.getBuffer(Xb.buffer),
Ja="type"in Xb?ge[Xb.type]:pb.dtype,Tb=!!Xb.normalized,ic=Xb.size|0,yb=Xb.offset|0,ob=Xb.stride|0,Sa=Xb.divisor|0);Ma=Aa.location;jb=Ua[Ma];if(1===hb){jb.buffer||ha.enableVertexAttribArray(Ma);Wa=ic||1;if(jb.type!==Ja||jb.size!==Wa||jb.buffer!==pb||jb.normalized!==Tb||jb.offset!==yb||jb.stride!==ob)ha.bindBuffer(34962,pb.buffer),ha.vertexAttribPointer(Ma,Wa,Ja,Tb,ob,yb),jb.type=Ja,jb.size=Wa,jb.buffer=pb,jb.normalized=Tb,jb.offset=yb,jb.stride=ob;jb.divisor!==Sa&&(h.vertexAttribDivisorANGLE(Ma,Sa),
jb.divisor=Sa)}else if(jb.buffer&&(ha.disableVertexAttribArray(Ma),jb.buffer=null),jb.x!==La||jb.y!==eb||jb.z!==fb||jb.w!==qb)ha.vertexAttrib4f(Ma,La,eb,fb,qb),jb.x=La,jb.y=eb,jb.z=fb,jb.w=qb;sb=na.call(this,n,p,l);rb=!1;Pa=null;Bc=0;Ra=!1;Db=Jb=0;Na=1;yd=0;Ya=5126;Oa=kb=Lb=Kb=0;L(sb)?(rb=!0,Pa=r.createStream(34962,sb),Ya=Pa.dtype):(Pa=r.getBuffer(sb))?Ya=Pa.dtype:"constant"in sb?(Na=2,"number"===typeof sb.constant?(Lb=sb.constant,kb=Oa=Kb=0):(Lb=0<sb.constant.length?sb.constant[0]:0,kb=1<sb.constant.length?
sb.constant[1]:0,Oa=2<sb.constant.length?sb.constant[2]:0,Kb=3<sb.constant.length?sb.constant[3]:0)):(Pa=L(sb.buffer)?r.createStream(34962,sb.buffer):r.getBuffer(sb.buffer),Ya="type"in sb?ge[sb.type]:Pa.dtype,Ra=!!sb.normalized,Db=sb.size|0,Jb=sb.offset|0,yd=sb.stride|0,Bc=sb.divisor|0);Yb=O.location;Qa=Ua[Yb];if(1===Na){Qa.buffer||ha.enableVertexAttribArray(Yb);tb=Db||1;if(Qa.type!==Ya||Qa.size!==tb||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Jb||Qa.stride!==yd)ha.bindBuffer(34962,Pa.buffer),
ha.vertexAttribPointer(Yb,tb,Ya,Ra,yd,Jb),Qa.type=Ya,Qa.size=tb,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Jb,Qa.stride=yd;Qa.divisor!==Bc&&(h.vertexAttribDivisorANGLE(Yb,Bc),Qa.divisor=Bc)}else if(Qa.buffer&&(ha.disableVertexAttribArray(Yb),Qa.buffer=null),Qa.x!==Lb||Qa.y!==kb||Qa.z!==Oa||Qa.w!==Kb)ha.vertexAttrib4f(Yb,Lb,kb,Oa,Kb),Qa.x=Lb,Qa.y=kb,Qa.z=Oa,Qa.w=Kb;ub=X.call(this,n,p,l);Ta=!1;mb=null;fc=0;zc=!1;bb=uc=0;jc=1;gd=0;Xa=5126;Ub=Za=zb=Mc=0;L(ub)?(Ta=!0,mb=r.createStream(34962,ub),Xa=mb.dtype):
(mb=r.getBuffer(ub))?Xa=mb.dtype:"constant"in ub?(jc=2,"number"===typeof ub.constant?(zb=ub.constant,Za=Ub=Mc=0):(zb=0<ub.constant.length?ub.constant[0]:0,Za=1<ub.constant.length?ub.constant[1]:0,Ub=2<ub.constant.length?ub.constant[2]:0,Mc=3<ub.constant.length?ub.constant[3]:0)):(mb=L(ub.buffer)?r.createStream(34962,ub.buffer):r.getBuffer(ub.buffer),Xa="type"in ub?ge[ub.type]:mb.dtype,zc=!!ub.normalized,bb=ub.size|0,uc=ub.offset|0,gd=ub.stride|0,fc=ub.divisor|0);sc=Ha.location;Vb=Ua[sc];if(1===jc){Vb.buffer||
ha.enableVertexAttribArray(sc);Pb=bb||1;if(Vb.type!==Xa||Vb.size!==Pb||Vb.buffer!==mb||Vb.normalized!==zc||Vb.offset!==uc||Vb.stride!==gd)ha.bindBuffer(34962,mb.buffer),ha.vertexAttribPointer(sc,Pb,Xa,zc,gd,uc),Vb.type=Xa,Vb.size=Pb,Vb.buffer=mb,Vb.normalized=zc,Vb.offset=uc,Vb.stride=gd;Vb.divisor!==fc&&(h.vertexAttribDivisorANGLE(sc,fc),Vb.divisor=fc)}else if(Vb.buffer&&(ha.disableVertexAttribArray(sc),Vb.buffer=null),Vb.x!==zb||Vb.y!==Za||Vb.z!==Ub||Vb.w!==Mc)ha.vertexAttrib4f(sc,zb,Za,Ub,Mc),
Vb.x=zb,Vb.y=Za,Vb.z=Ub,Vb.w=Mc;Kc=Y.call(this,n,p,l);Qb=!1;Dd=null;Ec=0;Ed=!1;ed=Nc=0;od=1;nc=0;vc=5126;Sb=rc=db=gc=0;L(Kc)?(Qb=!0,Dd=r.createStream(34962,Kc),vc=Dd.dtype):(Dd=r.getBuffer(Kc))?vc=Dd.dtype:"constant"in Kc?(od=2,"number"===typeof Kc.constant?(db=Kc.constant,rc=Sb=gc=0):(db=0<Kc.constant.length?Kc.constant[0]:0,rc=1<Kc.constant.length?Kc.constant[1]:0,Sb=2<Kc.constant.length?Kc.constant[2]:0,gc=3<Kc.constant.length?Kc.constant[3]:0)):(Dd=L(Kc.buffer)?r.createStream(34962,Kc.buffer):
r.getBuffer(Kc.buffer),vc="type"in Kc?ge[Kc.type]:Dd.dtype,Ed=!!Kc.normalized,ed=Kc.size|0,Nc=Kc.offset|0,nc=Kc.stride|0,Ec=Kc.divisor|0);Wb=ac.location;cc=Ua[Wb];if(1===od){cc.buffer||ha.enableVertexAttribArray(Wb);hc=ed||1;if(cc.type!==vc||cc.size!==hc||cc.buffer!==Dd||cc.normalized!==Ed||cc.offset!==Nc||cc.stride!==nc)ha.bindBuffer(34962,Dd.buffer),ha.vertexAttribPointer(Wb,hc,vc,Ed,nc,Nc),cc.type=vc,cc.size=hc,cc.buffer=Dd,cc.normalized=Ed,cc.offset=Nc,cc.stride=nc;cc.divisor!==Ec&&(h.vertexAttribDivisorANGLE(Wb,
Ec),cc.divisor=Ec)}else if(cc.buffer&&(ha.disableVertexAttribArray(Wb),cc.buffer=null),cc.x!==db||cc.y!==rc||cc.z!==Sb||cc.w!==gc)ha.vertexAttrib4f(Wb,db,rc,Sb,gc),cc.x=db,cc.y=rc,cc.z=Sb,cc.w=gc;xc=fa.call(this,n,p,l);Ac=!1;ad=null;Qc=0;Rc=!1;Xc=Sc=0;wd=1;bd=0;Yc=5126;Uc=Zc=bc=kc=0;L(xc)?(Ac=!0,ad=r.createStream(34962,xc),Yc=ad.dtype):(ad=r.getBuffer(xc))?Yc=ad.dtype:"constant"in xc?(wd=2,"number"===typeof xc.constant?(bc=xc.constant,Zc=Uc=kc=0):(bc=0<xc.constant.length?xc.constant[0]:0,Zc=1<xc.constant.length?
xc.constant[1]:0,Uc=2<xc.constant.length?xc.constant[2]:0,kc=3<xc.constant.length?xc.constant[3]:0)):(ad=L(xc.buffer)?r.createStream(34962,xc.buffer):r.getBuffer(xc.buffer),Yc="type"in xc?ge[xc.type]:ad.dtype,Rc=!!xc.normalized,Xc=xc.size|0,Sc=xc.offset|0,bd=xc.stride|0,Qc=xc.divisor|0);cd=Da.location;yc=Ua[cd];if(1===wd){yc.buffer||ha.enableVertexAttribArray(cd);hd=Xc||1;if(yc.type!==Yc||yc.size!==hd||yc.buffer!==ad||yc.normalized!==Rc||yc.offset!==Sc||yc.stride!==bd)ha.bindBuffer(34962,ad.buffer),
ha.vertexAttribPointer(cd,hd,Yc,Rc,bd,Sc),yc.type=Yc,yc.size=hd,yc.buffer=ad,yc.normalized=Rc,yc.offset=Sc,yc.stride=bd;yc.divisor!==Qc&&(h.vertexAttribDivisorANGLE(cd,Qc),yc.divisor=Qc)}else if(yc.buffer&&(ha.disableVertexAttribArray(cd),yc.buffer=null),yc.x!==bc||yc.y!==Zc||yc.z!==Uc||yc.w!==kc)ha.vertexAttrib4f(cd,bc,Zc,Uc,kc),yc.x=bc,yc.y=Zc,yc.z=Uc,yc.w=kc;pd=R.call(this,n,p,l);ye=!1;Ne=null;id=0;mf=!1;Xd=Nd=0;de=1;Od=0;Kd=5126;ud=Tc=md=Id=0;L(pd)?(ye=!0,Ne=r.createStream(34962,pd),Kd=Ne.dtype):
(Ne=r.getBuffer(pd))?Kd=Ne.dtype:"constant"in pd?(de=2,"number"===typeof pd.constant?(md=pd.constant,Tc=ud=Id=0):(md=0<pd.constant.length?pd.constant[0]:0,Tc=1<pd.constant.length?pd.constant[1]:0,ud=2<pd.constant.length?pd.constant[2]:0,Id=3<pd.constant.length?pd.constant[3]:0)):(Ne=L(pd.buffer)?r.createStream(34962,pd.buffer):r.getBuffer(pd.buffer),Kd="type"in pd?ge[pd.type]:Ne.dtype,mf=!!pd.normalized,Xd=pd.size|0,Nd=pd.offset|0,Od=pd.stride|0,id=pd.divisor|0);sd=oa.location;jd=Ua[sd];if(1===de){jd.buffer||
ha.enableVertexAttribArray(sd);xd=Xd||1;if(jd.type!==Kd||jd.size!==xd||jd.buffer!==Ne||jd.normalized!==mf||jd.offset!==Nd||jd.stride!==Od)ha.bindBuffer(34962,Ne.buffer),ha.vertexAttribPointer(sd,xd,Kd,mf,Od,Nd),jd.type=Kd,jd.size=xd,jd.buffer=Ne,jd.normalized=mf,jd.offset=Nd,jd.stride=Od;jd.divisor!==id&&(h.vertexAttribDivisorANGLE(sd,id),jd.divisor=id)}else if(jd.buffer&&(ha.disableVertexAttribArray(sd),jd.buffer=null),jd.x!==md||jd.y!==Tc||jd.z!==ud||jd.w!==Id)ha.vertexAttrib4f(sd,md,Tc,ud,Id),
jd.x=md,jd.y=Tc,jd.z=ud,jd.w=Id;Cd=I.call(this,n,p,l);Fd=!1;oe=null;qe=0;ue=!1;ie=je=0;he=1;ve=0;ee=5126;we=fd=Oc=le=0;L(Cd)?(Fd=!0,oe=r.createStream(34962,Cd),ee=oe.dtype):(oe=r.getBuffer(Cd))?ee=oe.dtype:"constant"in Cd?(he=2,"number"===typeof Cd.constant?(Oc=Cd.constant,fd=we=le=0):(Oc=0<Cd.constant.length?Cd.constant[0]:0,fd=1<Cd.constant.length?Cd.constant[1]:0,we=2<Cd.constant.length?Cd.constant[2]:0,le=3<Cd.constant.length?Cd.constant[3]:0)):(oe=L(Cd.buffer)?r.createStream(34962,Cd.buffer):
r.getBuffer(Cd.buffer),ee="type"in Cd?ge[Cd.type]:oe.dtype,ue=!!Cd.normalized,ie=Cd.size|0,je=Cd.offset|0,ve=Cd.stride|0,qe=Cd.divisor|0);pe=w.location;Ld=Ua[pe];if(1===he){Ld.buffer||ha.enableVertexAttribArray(pe);Pd=ie||4;if(Ld.type!==ee||Ld.size!==Pd||Ld.buffer!==oe||Ld.normalized!==ue||Ld.offset!==je||Ld.stride!==ve)ha.bindBuffer(34962,oe.buffer),ha.vertexAttribPointer(pe,Pd,ee,ue,ve,je),Ld.type=ee,Ld.size=Pd,Ld.buffer=oe,Ld.normalized=ue,Ld.offset=je,Ld.stride=ve;Ld.divisor!==qe&&(h.vertexAttribDivisorANGLE(pe,
qe),Ld.divisor=qe)}else if(Ld.buffer&&(ha.disableVertexAttribArray(pe),Ld.buffer=null),Ld.x!==Oc||Ld.y!==fd||Ld.z!==we||Ld.w!==le)ha.vertexAttrib4f(pe,Oc,fd,we,le),Ld.x=Oc,Ld.y=fd,Ld.z=we,Ld.w=le;Rd=y.call(this,n,p,l);Sd=!1;me=null;He=0;Be=!1;Se=re=0;Te=1;Oe=0;xe=5126;Ke=Je=Ie=Fe=0;L(Rd)?(Sd=!0,me=r.createStream(34962,Rd),xe=me.dtype):(me=r.getBuffer(Rd))?xe=me.dtype:"constant"in Rd?(Te=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ke=Fe=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?
Rd.constant[1]:0,Ke=2<Rd.constant.length?Rd.constant[2]:0,Fe=3<Rd.constant.length?Rd.constant[3]:0)):(me=L(Rd.buffer)?r.createStream(34962,Rd.buffer):r.getBuffer(Rd.buffer),xe="type"in Rd?ge[Rd.type]:me.dtype,Be=!!Rd.normalized,Se=Rd.size|0,re=Rd.offset|0,Oe=Rd.stride|0,He=Rd.divisor|0);Ge=za.location;Md=Ua[Ge];if(1===Te){Md.buffer||ha.enableVertexAttribArray(Ge);Yd=Se||4;if(Md.type!==xe||Md.size!==Yd||Md.buffer!==me||Md.normalized!==Be||Md.offset!==re||Md.stride!==Oe)ha.bindBuffer(34962,me.buffer),
ha.vertexAttribPointer(Ge,Yd,xe,Be,Oe,re),Md.type=xe,Md.size=Yd,Md.buffer=me,Md.normalized=Be,Md.offset=re,Md.stride=Oe;Md.divisor!==He&&(h.vertexAttribDivisorANGLE(Ge,He),Md.divisor=He)}else if(Md.buffer&&(ha.disableVertexAttribArray(Ge),Md.buffer=null),Md.x!==Ie||Md.y!==Je||Md.z!==Ke||Md.w!==Fe)ha.vertexAttrib4f(Ge,Ie,Je,Ke,Fe),Md.x=Ie,Md.y=Je,Md.z=Ke,Md.w=Fe;ce=k.call(this,n,p,l);fe=!1;Le=null;Jd=0;Td=!1;Me=De=0;bf=1;af=0;Ue=5126;Ve=Ye=$e=Pe=0;L(ce)?(fe=!0,Le=r.createStream(34962,ce),Ue=Le.dtype):
(Le=r.getBuffer(ce))?Ue=Le.dtype:"constant"in ce?(bf=2,"number"===typeof ce.constant?($e=ce.constant,Ye=Ve=Pe=0):($e=0<ce.constant.length?ce.constant[0]:0,Ye=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,Pe=3<ce.constant.length?ce.constant[3]:0)):(Le=L(ce.buffer)?r.createStream(34962,ce.buffer):r.getBuffer(ce.buffer),Ue="type"in ce?ge[ce.type]:Le.dtype,Td=!!ce.normalized,Me=ce.size|0,De=ce.offset|0,af=ce.stride|0,Jd=ce.divisor|0);We=da.location;Ud=Ua[We];if(1===bf){Ud.buffer||
ha.enableVertexAttribArray(We);ae=Me||1;if(Ud.type!==Ue||Ud.size!==ae||Ud.buffer!==Le||Ud.normalized!==Td||Ud.offset!==De||Ud.stride!==af)ha.bindBuffer(34962,Le.buffer),ha.vertexAttribPointer(We,ae,Ue,Td,af,De),Ud.type=Ue,Ud.size=ae,Ud.buffer=Le,Ud.normalized=Td,Ud.offset=De,Ud.stride=af;Ud.divisor!==Jd&&(h.vertexAttribDivisorANGLE(We,Jd),Ud.divisor=Jd)}else if(Ud.buffer&&(ha.disableVertexAttribArray(We),Ud.buffer=null),Ud.x!==$e||Ud.y!==Ye||Ud.z!==Ve||Ud.w!==Pe)ha.vertexAttrib4f(We,$e,Ye,Ve,Pe),
Ud.x=$e,Ud.y=Ye,Ud.z=Ve,Ud.w=Pe;Xe=n.pixelRatio;l&&hf===Xe||(hf=Xe,ha.uniform1f(Ca.location,Xe));nf=Q.call(this,n,p,l);ef=nf[0];kf=nf[1];l&&jf===ef&&lf===kf||(jf=ef,lf=kf,ha.uniform2f(ma.location,ef,kf));rf=p.scale;of=rf[0];Bf=rf[1];l&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ha.uniform2f(xa.location,of,Bf));Qe=p.scaleFract;Ee=Qe[0];qf=Qe[1];l&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ha.uniform2f(ga.location,Ee,qf));Gf=p.translate;Af=Gf[0];Ff=Gf[1];l&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ha.uniform2f(ka.location,Af,Ff));
xf=p.translateFract;vf=xf[0];zf=xf[1];l&&yf===vf&&If===zf||(yf=vf,If=zf,ha.uniform2f(pa.location,vf,zf));Kf=p.opacity;l&&Lf===Kf||(Lf=Kf,ha.uniform1f(T.location,Kf));Mf=p.elements;tf=null;(tf=(Rf=L(Mf))?va.createStream(Mf):va.getElements(Mf))&&ha.bindBuffer(34963,tf.buffer.buffer);Hf=p.offset;if(uf=p.count)0<ab?tf?h.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),ab):h.drawArraysInstancedANGLE(0,Hf,uf,ab):0>ab&&(tf?ha.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ha.drawArrays(0,
Hf,uf)),n.viewportWidth=qc,n.viewportHeight=Nb,Ob&&r.destroyStream(pb),rb&&r.destroyStream(Pa),Ta&&r.destroyStream(mb),Qb&&r.destroyStream(Dd),Ac&&r.destroyStream(ad),ye&&r.destroyStream(Ne),Fd&&r.destroyStream(oe),Sd&&r.destroyStream(me),fe&&r.destroyStream(Le),Rf&&va.destroyStream(tf)}P.unbind();B.dirty=!0;ya.setVAO(null);d&&(S.cpuTime+=performance.now()-f)},draw:function(a){var c,b,f,k,l,q,e,x,m,I,z,t,Ea,y,G,R,C,qa,D,Q,P,F,u,Ia,W,V,Y,Z,ba,fa,ja,ca,na,wa,X,Cc,Ka,Fc,xb,cb,Mb,ab,nb,Va,Gd,Hb,Ib,qc,
Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Dd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,ye,Ne,id,mf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se;c=Gb.next;c!==Gb.cur&&(c?ha.bindFramebuffer(36160,c.framebuffer):ha.bindFramebuffer(36160,null),Gb.cur=c);
if(B.dirty){var Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf;Te=sa.dither;Te!==B.dither&&(Te?ha.enable(3024):ha.disable(3024),B.dither=Te);Oe=aa[0];xe=aa[1];if(Oe!==ta[0]||xe!==ta[1])ha.blendEquationSeparate(Oe,xe),ta[0]=Oe,ta[1]=xe;Fe=sa.depth_func;Fe!==B.depth_func&&(ha.depthFunc(Fe),B.depth_func=Fe);Ie=ia[0];Je=ia[1];if(Ie!==Zb[0]||Je!==Zb[1])ha.depthRange(Ie,Je),Zb[0]=Ie,Zb[1]=Je;Ke=sa.depth_mask;Ke!==B.depth_mask&&(ha.depthMask(Ke),B.depth_mask=
Ke);Ge=lb[0];Md=lb[1];Yd=lb[2];ce=lb[3];if(Ge!==ea[0]||Md!==ea[1]||Yd!==ea[2]||ce!==ea[3])ha.colorMask(Ge,Md,Yd,ce),ea[0]=Ge,ea[1]=Md,ea[2]=Yd,ea[3]=ce;fe=sa.cull_enable;fe!==B.cull_enable&&(fe?ha.enable(2884):ha.disable(2884),B.cull_enable=fe);Le=sa.cull_face;Le!==B.cull_face&&(ha.cullFace(Le),B.cull_face=Le);Jd=sa.frontFace;Jd!==B.frontFace&&(ha.frontFace(Jd),B.frontFace=Jd);Td=sa.lineWidth;Td!==B.lineWidth&&(ha.lineWidth(Td),B.lineWidth=Td);De=sa.polygonOffset_enable;De!==B.polygonOffset_enable&&
(De?ha.enable(32823):ha.disable(32823),B.polygonOffset_enable=De);Me=Ga[0];bf=Ga[1];if(Me!==$b[0]||bf!==$b[1])ha.polygonOffset(Me,bf),$b[0]=Me,$b[1]=bf;af=sa.sample_alpha;af!==B.sample_alpha&&(af?ha.enable(32926):ha.disable(32926),B.sample_alpha=af);Ue=sa.sample_enable;Ue!==B.sample_enable&&(Ue?ha.enable(32928):ha.disable(32928),B.sample_enable=Ue);Pe=Rb[0];$e=Rb[1];if(Pe!==Fa[0]||$e!==Fa[1])ha.sampleCoverage(Pe,$e),Fa[0]=Pe,Fa[1]=$e;Ye=sa.stencil_mask;Ye!==B.stencil_mask&&(ha.stencilMask(Ye),B.stencil_mask=
Ye);Ve=Wd[0];We=Wd[1];Ud=Wd[2];if(Ve!==ze[0]||We!==ze[1]||Ud!==ze[2])ha.stencilFunc(Ve,We,Ud),ze[0]=Ve,ze[1]=We,ze[2]=Ud;ae=ne[0];Xe=ne[1];hf=ne[2];nf=ne[3];if(ae!==Ad[0]||Xe!==Ad[1]||hf!==Ad[2]||nf!==Ad[3])ha.stencilOpSeparate(ae,Xe,hf,nf),Ad[0]=ae,Ad[1]=Xe,Ad[2]=hf,Ad[3]=nf;ef=se[0];jf=se[1];kf=se[2];lf=se[3];if(ef!==Vd[0]||jf!==Vd[1]||kf!==Vd[2]||lf!==Vd[3])ha.stencilOpSeparate(ef,jf,kf,lf),Vd[0]=ef,Vd[1]=jf,Vd[2]=kf,Vd[3]=lf}b=a.viewport;f=b.x|0;k=b.y|0;l="width"in b?b.width|0:n.framebufferWidth-
f;q="height"in b?b.height|0:n.framebufferHeight-k;e=n.viewportWidth;n.viewportWidth=l;x=n.viewportHeight;n.viewportHeight=q;ha.viewport(f,k,l,q);qd[0]=f;qd[1]=k;qd[2]=l;qd[3]=q;ha.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ha.enable(3042);B.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;ha.disable(2929);B.depth_enable=!1;m=a.viewport;I=m.x|0;z=m.y|0;t="width"in m?m.width|0:n.framebufferWidth-I;Ea="height"in m?m.height|0:n.framebufferHeight-z;ha.scissor(I,
z,t,Ea);ke[0]=I;ke[1]=z;ke[2]=t;ke[3]=Ea;ha.enable(3089);B.scissor_enable=!0;ha.disable(2960);B.stencil_enable=!1;if(y=B.profile)G=performance.now(),S.count++;ha.useProgram(H.program);R=td.angle_instanced_arrays;ya.setVAO(null);C=N.call(this,n,a,0);qa=!1;D=null;Q=0;P=!1;u=F=0;Ia=1;W=0;V=5126;fa=ba=Z=Y=0;L(C)?(qa=!0,D=r.createStream(34962,C),V=D.dtype):(D=r.getBuffer(C))?V=D.dtype:"constant"in C?(Ia=2,"number"===typeof C.constant?(Z=C.constant,ba=fa=Y=0):(Z=0<C.constant.length?C.constant[0]:0,ba=1<
C.constant.length?C.constant[1]:0,fa=2<C.constant.length?C.constant[2]:0,Y=3<C.constant.length?C.constant[3]:0)):(D=L(C.buffer)?r.createStream(34962,C.buffer):r.getBuffer(C.buffer),V="type"in C?ge[C.type]:D.dtype,P=!!C.normalized,u=C.size|0,F=C.offset|0,W=C.stride|0,Q=C.divisor|0);ja=Aa.location;ca=Ua[ja];if(1===Ia){ca.buffer||ha.enableVertexAttribArray(ja);na=u||1;if(ca.type!==V||ca.size!==na||ca.buffer!==D||ca.normalized!==P||ca.offset!==F||ca.stride!==W)ha.bindBuffer(34962,D.buffer),ha.vertexAttribPointer(ja,
na,V,P,W,F),ca.type=V,ca.size=na,ca.buffer=D,ca.normalized=P,ca.offset=F,ca.stride=W;ca.divisor!==Q&&(R.vertexAttribDivisorANGLE(ja,Q),ca.divisor=Q)}else if(ca.buffer&&(ha.disableVertexAttribArray(ja),ca.buffer=null),ca.x!==Z||ca.y!==ba||ca.z!==fa||ca.w!==Y)ha.vertexAttrib4f(ja,Z,ba,fa,Y),ca.x=Z,ca.y=ba,ca.z=fa,ca.w=Y;wa=g.call(this,n,a,0);X=!1;Cc=null;Ka=0;Fc=!1;cb=xb=0;Mb=1;ab=0;nb=5126;Ib=Hb=Gd=Va=0;L(wa)?(X=!0,Cc=r.createStream(34962,wa),nb=Cc.dtype):(Cc=r.getBuffer(wa))?nb=Cc.dtype:"constant"in
wa?(Mb=2,"number"===typeof wa.constant?(Gd=wa.constant,Hb=Ib=Va=0):(Gd=0<wa.constant.length?wa.constant[0]:0,Hb=1<wa.constant.length?wa.constant[1]:0,Ib=2<wa.constant.length?wa.constant[2]:0,Va=3<wa.constant.length?wa.constant[3]:0)):(Cc=L(wa.buffer)?r.createStream(34962,wa.buffer):r.getBuffer(wa.buffer),nb="type"in wa?ge[wa.type]:Cc.dtype,Fc=!!wa.normalized,cb=wa.size|0,xb=wa.offset|0,ab=wa.stride|0,Ka=wa.divisor|0);qc=O.location;Nb=Ua[qc];if(1===Mb){Nb.buffer||ha.enableVertexAttribArray(qc);ib=
cb||1;if(Nb.type!==nb||Nb.size!==ib||Nb.buffer!==Cc||Nb.normalized!==Fc||Nb.offset!==xb||Nb.stride!==ab)ha.bindBuffer(34962,Cc.buffer),ha.vertexAttribPointer(qc,ib,nb,Fc,ab,xb),Nb.type=nb,Nb.size=ib,Nb.buffer=Cc,Nb.normalized=Fc,Nb.offset=xb,Nb.stride=ab;Nb.divisor!==Ka&&(R.vertexAttribDivisorANGLE(qc,Ka),Nb.divisor=Ka)}else if(Nb.buffer&&(ha.disableVertexAttribArray(qc),Nb.buffer=null),Nb.x!==Gd||Nb.y!==Hb||Nb.z!==Ib||Nb.w!==Va)ha.vertexAttrib4f(qc,Gd,Hb,Ib,Va),Nb.x=Gd,Nb.y=Hb,Nb.z=Ib,Nb.w=Va;Fb=
h.call(this,n,a,0);Cb=!1;vb=null;gb=0;Xb=!1;pb=Ob=0;Sa=1;Tb=0;yb=5126;Ja=ob=hb=ic=0;L(Fb)?(Cb=!0,vb=r.createStream(34962,Fb),yb=vb.dtype):(vb=r.getBuffer(Fb))?yb=vb.dtype:"constant"in Fb?(Sa=2,"number"===typeof Fb.constant?(hb=Fb.constant,ob=Ja=ic=0):(hb=0<Fb.constant.length?Fb.constant[0]:0,ob=1<Fb.constant.length?Fb.constant[1]:0,Ja=2<Fb.constant.length?Fb.constant[2]:0,ic=3<Fb.constant.length?Fb.constant[3]:0)):(vb=L(Fb.buffer)?r.createStream(34962,Fb.buffer):r.getBuffer(Fb.buffer),yb="type"in
Fb?ge[Fb.type]:vb.dtype,Xb=!!Fb.normalized,pb=Fb.size|0,Ob=Fb.offset|0,Tb=Fb.stride|0,gb=Fb.divisor|0);qb=Ha.location;La=Ua[qb];if(1===Sa){La.buffer||ha.enableVertexAttribArray(qb);eb=pb||1;if(La.type!==yb||La.size!==eb||La.buffer!==vb||La.normalized!==Xb||La.offset!==Ob||La.stride!==Tb)ha.bindBuffer(34962,vb.buffer),ha.vertexAttribPointer(qb,eb,yb,Xb,Tb,Ob),La.type=yb,La.size=eb,La.buffer=vb,La.normalized=Xb,La.offset=Ob,La.stride=Tb;La.divisor!==gb&&(R.vertexAttribDivisorANGLE(qb,gb),La.divisor=
gb)}else if(La.buffer&&(ha.disableVertexAttribArray(qb),La.buffer=null),La.x!==hb||La.y!==ob||La.z!==Ja||La.w!==ic)ha.vertexAttrib4f(qb,hb,ob,Ja,ic),La.x=hb,La.y=ob,La.z=Ja,La.w=ic;fb=p.call(this,n,a,0);Ma=!1;jb=null;Wa=0;sb=!1;Pa=rb=0;Bc=1;Ra=0;Jb=5126;Ya=Dd=Na=Db=0;L(fb)?(Ma=!0,jb=r.createStream(34962,fb),Jb=jb.dtype):(jb=r.getBuffer(fb))?Jb=jb.dtype:"constant"in fb?(Bc=2,"number"===typeof fb.constant?(Na=fb.constant,Dd=Ya=Db=0):(Na=0<fb.constant.length?fb.constant[0]:0,Dd=1<fb.constant.length?
fb.constant[1]:0,Ya=2<fb.constant.length?fb.constant[2]:0,Db=3<fb.constant.length?fb.constant[3]:0)):(jb=L(fb.buffer)?r.createStream(34962,fb.buffer):r.getBuffer(fb.buffer),Jb="type"in fb?ge[fb.type]:jb.dtype,sb=!!fb.normalized,Pa=fb.size|0,rb=fb.offset|0,Ra=fb.stride|0,Wa=fb.divisor|0);Kb=ac.location;Lb=Ua[Kb];if(1===Bc){Lb.buffer||ha.enableVertexAttribArray(Kb);kb=Pa||1;if(Lb.type!==Jb||Lb.size!==kb||Lb.buffer!==jb||Lb.normalized!==sb||Lb.offset!==rb||Lb.stride!==Ra)ha.bindBuffer(34962,jb.buffer),
ha.vertexAttribPointer(Kb,kb,Jb,sb,Ra,rb),Lb.type=Jb,Lb.size=kb,Lb.buffer=jb,Lb.normalized=sb,Lb.offset=rb,Lb.stride=Ra;Lb.divisor!==Wa&&(R.vertexAttribDivisorANGLE(Kb,Wa),Lb.divisor=Wa)}else if(Lb.buffer&&(ha.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Na||Lb.y!==Dd||Lb.z!==Ya||Lb.w!==Db)ha.vertexAttrib4f(Kb,Na,Dd,Ya,Db),Lb.x=Na,Lb.y=Dd,Lb.z=Ya,Lb.w=Db;Oa=d.call(this,n,a,0);Yb=!1;Qa=null;tb=0;ub=!1;mb=Ta=0;fc=1;zc=0;uc=5126;Xa=gd=jc=bb=0;L(Oa)?(Yb=!0,Qa=r.createStream(34962,Oa),uc=Qa.dtype):
(Qa=r.getBuffer(Oa))?uc=Qa.dtype:"constant"in Oa?(fc=2,"number"===typeof Oa.constant?(jc=Oa.constant,gd=Xa=bb=0):(jc=0<Oa.constant.length?Oa.constant[0]:0,gd=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=L(Oa.buffer)?r.createStream(34962,Oa.buffer):r.getBuffer(Oa.buffer),uc="type"in Oa?ge[Oa.type]:Qa.dtype,ub=!!Oa.normalized,mb=Oa.size|0,Ta=Oa.offset|0,zc=Oa.stride|0,tb=Oa.divisor|0);Mc=Da.location;zb=Ua[Mc];if(1===fc){zb.buffer||
ha.enableVertexAttribArray(Mc);Za=mb||1;if(zb.type!==uc||zb.size!==Za||zb.buffer!==Qa||zb.normalized!==ub||zb.offset!==Ta||zb.stride!==zc)ha.bindBuffer(34962,Qa.buffer),ha.vertexAttribPointer(Mc,Za,uc,ub,zc,Ta),zb.type=uc,zb.size=Za,zb.buffer=Qa,zb.normalized=ub,zb.offset=Ta,zb.stride=zc;zb.divisor!==tb&&(R.vertexAttribDivisorANGLE(Mc,tb),zb.divisor=tb)}else if(zb.buffer&&(ha.disableVertexAttribArray(Mc),zb.buffer=null),zb.x!==jc||zb.y!==gd||zb.z!==Xa||zb.w!==bb)ha.vertexAttrib4f(Mc,jc,gd,Xa,bb),
zb.x=jc,zb.y=gd,zb.z=Xa,zb.w=bb;Ub=E.call(this,n,a,0);sc=!1;Vb=null;Pb=0;Kc=!1;Qd=Qb=0;Ec=1;Ed=0;Nc=5126;vc=nc=od=ed=0;L(Ub)?(sc=!0,Vb=r.createStream(34962,Ub),Nc=Vb.dtype):(Vb=r.getBuffer(Ub))?Nc=Vb.dtype:"constant"in Ub?(Ec=2,"number"===typeof Ub.constant?(od=Ub.constant,nc=vc=ed=0):(od=0<Ub.constant.length?Ub.constant[0]:0,nc=1<Ub.constant.length?Ub.constant[1]:0,vc=2<Ub.constant.length?Ub.constant[2]:0,ed=3<Ub.constant.length?Ub.constant[3]:0)):(Vb=L(Ub.buffer)?r.createStream(34962,Ub.buffer):
r.getBuffer(Ub.buffer),Nc="type"in Ub?ge[Ub.type]:Vb.dtype,Kc=!!Ub.normalized,Qd=Ub.size|0,Qb=Ub.offset|0,Ed=Ub.stride|0,Pb=Ub.divisor|0);gc=oa.location;db=Ua[gc];if(1===Ec){db.buffer||ha.enableVertexAttribArray(gc);rc=Qd||1;if(db.type!==Nc||db.size!==rc||db.buffer!==Vb||db.normalized!==Kc||db.offset!==Qb||db.stride!==Ed)ha.bindBuffer(34962,Vb.buffer),ha.vertexAttribPointer(gc,rc,Nc,Kc,Ed,Qb),db.type=Nc,db.size=rc,db.buffer=Vb,db.normalized=Kc,db.offset=Qb,db.stride=Ed;db.divisor!==Pb&&(R.vertexAttribDivisorANGLE(gc,
Pb),db.divisor=Pb)}else if(db.buffer&&(ha.disableVertexAttribArray(gc),db.buffer=null),db.x!==od||db.y!==nc||db.z!==vc||db.w!==ed)ha.vertexAttrib4f(gc,od,nc,vc,ed),db.x=od,db.y=nc,db.z=vc,db.w=ed;Sb=J.call(this,n,a,0);Wb=!1;cc=null;hc=0;xc=!1;ad=Ac=0;Qc=1;Rc=0;Sc=5126;Yc=bd=wd=Xc=0;L(Sb)?(Wb=!0,cc=r.createStream(34962,Sb),Sc=cc.dtype):(cc=r.getBuffer(Sb))?Sc=cc.dtype:"constant"in Sb?(Qc=2,"number"===typeof Sb.constant?(wd=Sb.constant,bd=Yc=Xc=0):(wd=0<Sb.constant.length?Sb.constant[0]:0,bd=1<Sb.constant.length?
Sb.constant[1]:0,Yc=2<Sb.constant.length?Sb.constant[2]:0,Xc=3<Sb.constant.length?Sb.constant[3]:0)):(cc=L(Sb.buffer)?r.createStream(34962,Sb.buffer):r.getBuffer(Sb.buffer),Sc="type"in Sb?ge[Sb.type]:cc.dtype,xc=!!Sb.normalized,ad=Sb.size|0,Ac=Sb.offset|0,Rc=Sb.stride|0,hc=Sb.divisor|0);kc=w.location;bc=Ua[kc];if(1===Qc){bc.buffer||ha.enableVertexAttribArray(kc);Zc=ad||4;if(bc.type!==Sc||bc.size!==Zc||bc.buffer!==cc||bc.normalized!==xc||bc.offset!==Ac||bc.stride!==Rc)ha.bindBuffer(34962,cc.buffer),
ha.vertexAttribPointer(kc,Zc,Sc,xc,Rc,Ac),bc.type=Sc,bc.size=Zc,bc.buffer=cc,bc.normalized=xc,bc.offset=Ac,bc.stride=Rc;bc.divisor!==hc&&(R.vertexAttribDivisorANGLE(kc,hc),bc.divisor=hc)}else if(bc.buffer&&(ha.disableVertexAttribArray(kc),bc.buffer=null),bc.x!==wd||bc.y!==bd||bc.z!==Yc||bc.w!==Xc)ha.vertexAttrib4f(kc,wd,bd,Yc,Xc),bc.x=wd,bc.y=bd,bc.z=Yc,bc.w=Xc;Uc=M.call(this,n,a,0);cd=!1;yc=null;hd=0;pd=!1;Ne=ye=0;id=1;mf=0;Nd=5126;Kd=Od=de=Xd=0;L(Uc)?(cd=!0,yc=r.createStream(34962,Uc),Nd=yc.dtype):
(yc=r.getBuffer(Uc))?Nd=yc.dtype:"constant"in Uc?(id=2,"number"===typeof Uc.constant?(de=Uc.constant,Od=Kd=Xd=0):(de=0<Uc.constant.length?Uc.constant[0]:0,Od=1<Uc.constant.length?Uc.constant[1]:0,Kd=2<Uc.constant.length?Uc.constant[2]:0,Xd=3<Uc.constant.length?Uc.constant[3]:0)):(yc=L(Uc.buffer)?r.createStream(34962,Uc.buffer):r.getBuffer(Uc.buffer),Nd="type"in Uc?ge[Uc.type]:yc.dtype,pd=!!Uc.normalized,Ne=Uc.size|0,ye=Uc.offset|0,mf=Uc.stride|0,hd=Uc.divisor|0);Id=za.location;md=Ua[Id];if(1===id){md.buffer||
ha.enableVertexAttribArray(Id);Tc=Ne||4;if(md.type!==Nd||md.size!==Tc||md.buffer!==yc||md.normalized!==pd||md.offset!==ye||md.stride!==mf)ha.bindBuffer(34962,yc.buffer),ha.vertexAttribPointer(Id,Tc,Nd,pd,mf,ye),md.type=Nd,md.size=Tc,md.buffer=yc,md.normalized=pd,md.offset=ye,md.stride=mf;md.divisor!==hd&&(R.vertexAttribDivisorANGLE(Id,hd),md.divisor=hd)}else if(md.buffer&&(ha.disableVertexAttribArray(Id),md.buffer=null),md.x!==de||md.y!==Od||md.z!==Kd||md.w!==Xd)ha.vertexAttrib4f(Id,de,Od,Kd,Xd),
md.x=de,md.y=Od,md.z=Kd,md.w=Xd;ud=U.call(this,n,a,0);sd=!1;jd=null;xd=0;Cd=!1;oe=Fd=0;qe=1;ue=0;je=5126;ee=ve=he=ie=0;L(ud)?(sd=!0,jd=r.createStream(34962,ud),je=jd.dtype):(jd=r.getBuffer(ud))?je=jd.dtype:"constant"in ud?(qe=2,"number"===typeof ud.constant?(he=ud.constant,ve=ee=ie=0):(he=0<ud.constant.length?ud.constant[0]:0,ve=1<ud.constant.length?ud.constant[1]:0,ee=2<ud.constant.length?ud.constant[2]:0,ie=3<ud.constant.length?ud.constant[3]:0)):(jd=L(ud.buffer)?r.createStream(34962,ud.buffer):
r.getBuffer(ud.buffer),je="type"in ud?ge[ud.type]:jd.dtype,Cd=!!ud.normalized,oe=ud.size|0,Fd=ud.offset|0,ue=ud.stride|0,xd=ud.divisor|0);le=da.location;Oc=Ua[le];if(1===qe){Oc.buffer||ha.enableVertexAttribArray(le);fd=oe||1;if(Oc.type!==je||Oc.size!==fd||Oc.buffer!==jd||Oc.normalized!==Cd||Oc.offset!==Fd||Oc.stride!==ue)ha.bindBuffer(34962,jd.buffer),ha.vertexAttribPointer(le,fd,je,Cd,ue,Fd),Oc.type=je,Oc.size=fd,Oc.buffer=jd,Oc.normalized=Cd,Oc.offset=Fd,Oc.stride=ue;Oc.divisor!==xd&&(R.vertexAttribDivisorANGLE(le,
xd),Oc.divisor=xd)}else if(Oc.buffer&&(ha.disableVertexAttribArray(le),Oc.buffer=null),Oc.x!==he||Oc.y!==ve||Oc.z!==ee||Oc.w!==ie)ha.vertexAttrib4f(le,he,ve,ee,ie),Oc.x=he,Oc.y=ve,Oc.z=ee,Oc.w=ie;ha.uniform1i(K.location,!1);ha.uniform1f(Ca.location,n.pixelRatio);we=v.call(this,n,a,0);ha.uniform2f(ma.location,we[0],we[1]);pe=a.scale;ha.uniform2f(xa.location,pe[0],pe[1]);Ld=a.scaleFract;ha.uniform2f(ga.location,Ld[0],Ld[1]);Pd=a.translate;ha.uniform2f(ka.location,Pd[0],Pd[1]);Rd=a.translateFract;ha.uniform2f(pa.location,
Rd[0],Rd[1]);ha.uniform1f(T.location,a.opacity);ha.uniform1i(ra.location,A.bind());Sd=a.elements;me=null;(me=(He=L(Sd))?va.createStream(Sd):va.getElements(Sd))&&ha.bindBuffer(34963,me.buffer.buffer);Be=a.offset;if(re=a.count)Se=ua.instances,0<Se?me?R.drawElementsInstancedANGLE(0,re,me.type,Be<<(me.type-5121>>1),Se):R.drawArraysInstancedANGLE(0,Be,re,Se):0>Se&&(me?ha.drawElements(0,re,me.type,Be<<(me.type-5121>>1)):ha.drawArrays(0,Be,re)),B.dirty=!0,ya.setVAO(null),n.viewportWidth=e,n.viewportHeight=
x,y&&(S.cpuTime+=performance.now()-G),qa&&r.destroyStream(D),X&&r.destroyStream(Cc),Cb&&r.destroyStream(vb),Ma&&r.destroyStream(jb),Yb&&r.destroyStream(Qa),sc&&r.destroyStream(Vb),Wb&&r.destroyStream(cc),cd&&r.destroyStream(yc),sd&&r.destroyStream(jd),A.unbind(),He&&va.destroyStream(me)},scope:function(d,h,k){var w,p,O,g,e,x,I,K,y,R,T,ga,ha,N,ac,v,la,A,Ha,Q,P,H,aa,J,da,ya,E,xa,M,za,ra,U,ea,ka,Y,fa,Ua,pa,Da,ma,Aa,wa,na,oa,ta,Gb,Ca,Cc,X,Ba,Ga,td,lb,Rb,ia,Sa,Zb,$b,Wd,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,
rb,Pa,qd,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,Fa,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Vd,Ec,ke,Nc,ze,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,ne,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd,se,Ad,id,Jf,Nd,Xd,de,Od,Kd,Id,md,Tc,ud,sd,jd,xd,Cd,Fd,oe,qe,ue,je,ie,he,ve,ee,le,Oc,fd,we,pe,Ld,Pd,Rd,Sd,me,He,Be,re,Se,Te,Oe,xe,Fe,Ie,Je,Ke,Ge,Md,Yd,ce,fe,Le,Jd,Td,De,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,
Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;w=d.viewport;p=w.x|0;O=w.y|0;g="width"in w?w.width|0:n.framebufferWidth-p;e="height"in w?w.height|0:n.framebufferHeight-O;x=n.viewportWidth;n.viewportWidth=g;I=n.viewportHeight;n.viewportHeight=e;K=Dd[0];Dd[0]=p;y=Dd[1];Dd[1]=O;R=Dd[2];Dd[2]=g;T=Dd[3];Dd[3]=e;ga=Ia[0];Ia[0]=0;ha=Ia[1];Ia[1]=0;N=Ia[2];Ia[2]=0;ac=Ia[3];Ia[3]=
1;v=sa.blend_enable;sa.blend_enable=!0;la=Ka[0];Ka[0]=770;A=Ka[1];Ka[1]=771;Ha=Ka[2];Ka[2]=773;Q=Ka[3];Ka[3]=1;P=sa.depth_enable;sa.depth_enable=!1;H=d.viewport;aa=H.x|0;J=H.y|0;da="width"in H?H.width|0:n.framebufferWidth-aa;ya="height"in H?H.height|0:n.framebufferHeight-J;E=Gd[0];Gd[0]=aa;xa=Gd[1];Gd[1]=J;M=Gd[2];Gd[2]=da;za=Gd[3];Gd[3]=ya;ra=sa.scissor_enable;sa.scissor_enable=!0;U=sa.stencil_enable;sa.stencil_enable=!1;if(ea=B.profile)ka=performance.now(),S.count++;Y=d.elements;fa=null;fa=(Ua=
L(Y))?va.createStream(Y):va.getElements(Y);pa=ua.elements;ua.elements=fa;Da=d.offset;ma=ua.offset;ua.offset=Da;Aa=d.count;wa=ua.count;ua.count=Aa;na=ua.primitive;ua.primitive=0;oa=qa[45];qa[45]=!1;ta=d.markerTexture;Gb=qa[48];qa[48]=ta;Ca=d.opacity;Cc=qa[10];qa[10]=Ca;X=F.call(this,n,d,k);Ba=qa[46];qa[46]=X;Ga=qa[47];qa[47]=Z;td=n.pixelRatio;lb=qa[34];qa[34]=td;Rb=d.scale;ia=qa[6];qa[6]=Rb;Sa=d.scaleFract;Zb=qa[7];qa[7]=Sa;$b=d.translate;Wd=qa[8];qa[8]=$b;hb=d.translateFract;ob=qa[9];qa[9]=hb;Ja=
t.call(this,n,d,k);qb=!1;La=null;eb=0;fb=!1;jb=Ma=0;Wa=1;sb=0;rb=5126;Jb=Ra=qd=Pa=0;L(Ja)?(qb=!0,La=r.createStream(34962,Ja),rb=La.dtype):(La=r.getBuffer(Ja))?rb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(qd=Ja.constant,Ra=Jb=Pa=0):(qd=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=L(Ja.buffer)?r.createStream(34962,Ja.buffer):r.getBuffer(Ja.buffer),rb="type"in
Ja?ge[Ja.type]:La.dtype,fb=!!Ja.normalized,jb=Ja.size|0,Ma=Ja.offset|0,sb=Ja.stride|0,eb=Ja.divisor|0);Db=V.buffer;V.buffer=La;Na=V.divisor;V.divisor=eb;zd=V.normalized;V.normalized=fb;Ya=V.offset;V.offset=Ma;Kb=V.size;V.size=jb;Lb=V.state;V.state=Wa;kb=V.stride;V.stride=sb;Oa=V.type;V.type=rb;Yb=V.w;V.w=Pa;Qa=V.x;V.x=qd;tb=V.y;V.y=Ra;ub=V.z;V.z=Jb;Ta=m.call(this,n,d,k);mb=!1;fc=null;zc=0;uc=!1;jc=bb=0;Fa=1;Xa=0;Mc=5126;sc=Ub=Za=zb=0;L(Ta)?(mb=!0,fc=r.createStream(34962,Ta),Mc=fc.dtype):(fc=r.getBuffer(Ta))?
Mc=fc.dtype:"constant"in Ta?(Fa=2,"number"===typeof Ta.constant?(Za=Ta.constant,Ub=sc=zb=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Ub=1<Ta.constant.length?Ta.constant[1]:0,sc=2<Ta.constant.length?Ta.constant[2]:0,zb=3<Ta.constant.length?Ta.constant[3]:0)):(fc=L(Ta.buffer)?r.createStream(34962,Ta.buffer):r.getBuffer(Ta.buffer),Mc="type"in Ta?ge[Ta.type]:fc.dtype,uc=!!Ta.normalized,jc=Ta.size|0,bb=Ta.offset|0,Xa=Ta.stride|0,zc=Ta.divisor|0);Vb=u.buffer;u.buffer=fc;Pb=u.divisor;u.divisor=zc;Kc=u.normalized;
u.normalized=uc;Qb=u.offset;u.offset=bb;Vd=u.size;u.size=jc;Ec=u.state;u.state=Fa;ke=u.stride;u.stride=Xa;Nc=u.type;u.type=Mc;ze=u.w;u.w=zb;od=u.x;u.x=Za;nc=u.y;u.y=Ub;vc=u.z;u.z=sc;gc=ja.call(this,n,d,k);db=!1;rc=null;Sb=0;Wb=!1;hc=cc=0;xc=1;Ac=0;ad=5126;Xc=Sc=Rc=Qc=0;L(gc)?(db=!0,rc=r.createStream(34962,gc),ad=rc.dtype):(rc=r.getBuffer(gc))?ad=rc.dtype:"constant"in gc?(xc=2,"number"===typeof gc.constant?(Rc=gc.constant,Sc=Xc=Qc=0):(Rc=0<gc.constant.length?gc.constant[0]:0,Sc=1<gc.constant.length?
gc.constant[1]:0,Xc=2<gc.constant.length?gc.constant[2]:0,Qc=3<gc.constant.length?gc.constant[3]:0)):(rc=L(gc.buffer)?r.createStream(34962,gc.buffer):r.getBuffer(gc.buffer),ad="type"in gc?ge[gc.type]:rc.dtype,Wb=!!gc.normalized,hc=gc.size|0,cc=gc.offset|0,Ac=gc.stride|0,Sb=gc.divisor|0);ne=b.buffer;b.buffer=rc;bd=b.divisor;b.divisor=Sb;Yc=b.normalized;b.normalized=Wb;kc=b.offset;b.offset=cc;bc=b.size;b.size=hc;Zc=b.state;b.state=xc;Uc=b.stride;b.stride=Ac;cd=b.type;b.type=ad;yc=b.w;b.w=Qc;hd=b.x;
b.x=Rc;pd=b.y;b.y=Sc;se=b.z;b.z=Xc;Ad=z.call(this,n,d,k);id=!1;Jf=null;Nd=0;Xd=!1;Od=de=0;Kd=1;Id=0;md=5126;jd=sd=ud=Tc=0;L(Ad)?(id=!0,Jf=r.createStream(34962,Ad),md=Jf.dtype):(Jf=r.getBuffer(Ad))?md=Jf.dtype:"constant"in Ad?(Kd=2,"number"===typeof Ad.constant?(ud=Ad.constant,sd=jd=Tc=0):(ud=0<Ad.constant.length?Ad.constant[0]:0,sd=1<Ad.constant.length?Ad.constant[1]:0,jd=2<Ad.constant.length?Ad.constant[2]:0,Tc=3<Ad.constant.length?Ad.constant[3]:0)):(Jf=L(Ad.buffer)?r.createStream(34962,Ad.buffer):
r.getBuffer(Ad.buffer),md="type"in Ad?ge[Ad.type]:Jf.dtype,Xd=!!Ad.normalized,Od=Ad.size|0,de=Ad.offset|0,Id=Ad.stride|0,Nd=Ad.divisor|0);xd=W.buffer;W.buffer=Jf;Cd=W.divisor;W.divisor=Nd;Fd=W.normalized;W.normalized=Xd;oe=W.offset;W.offset=de;qe=W.size;W.size=Od;ue=W.state;W.state=Kd;je=W.stride;W.stride=Id;ie=W.type;W.type=md;he=W.w;W.w=Tc;ve=W.x;W.x=ud;ee=W.y;W.y=sd;le=W.z;W.z=jd;Oc=f.call(this,n,d,k);fd=!1;we=null;pe=0;Ld=!1;Rd=Pd=0;Sd=1;me=0;He=5126;Te=Se=re=Be=0;L(Oc)?(fd=!0,we=r.createStream(34962,
Oc),He=we.dtype):(we=r.getBuffer(Oc))?He=we.dtype:"constant"in Oc?(Sd=2,"number"===typeof Oc.constant?(re=Oc.constant,Se=Te=Be=0):(re=0<Oc.constant.length?Oc.constant[0]:0,Se=1<Oc.constant.length?Oc.constant[1]:0,Te=2<Oc.constant.length?Oc.constant[2]:0,Be=3<Oc.constant.length?Oc.constant[3]:0)):(we=L(Oc.buffer)?r.createStream(34962,Oc.buffer):r.getBuffer(Oc.buffer),He="type"in Oc?ge[Oc.type]:we.dtype,Ld=!!Oc.normalized,Rd=Oc.size|0,Pd=Oc.offset|0,me=Oc.stride|0,pe=Oc.divisor|0);Oe=ba.buffer;ba.buffer=
we;xe=ba.divisor;ba.divisor=pe;Fe=ba.normalized;ba.normalized=Ld;Ie=ba.offset;ba.offset=Pd;Je=ba.size;ba.size=Rd;Ke=ba.state;ba.state=Sd;Ge=ba.stride;ba.stride=me;Md=ba.type;ba.type=He;Yd=ba.w;ba.w=Be;ce=ba.x;ba.x=re;fe=ba.y;ba.y=Se;Le=ba.z;ba.z=Te;Jd=G.call(this,n,d,k);Td=!1;De=null;Me=0;bf=!1;Ue=af=0;Pe=1;$e=0;Ye=5126;ae=Ud=We=Ve=0;L(Jd)?(Td=!0,De=r.createStream(34962,Jd),Ye=De.dtype):(De=r.getBuffer(Jd))?Ye=De.dtype:"constant"in Jd?(Pe=2,"number"===typeof Jd.constant?(We=Jd.constant,Ud=ae=Ve=0):
(We=0<Jd.constant.length?Jd.constant[0]:0,Ud=1<Jd.constant.length?Jd.constant[1]:0,ae=2<Jd.constant.length?Jd.constant[2]:0,Ve=3<Jd.constant.length?Jd.constant[3]:0)):(De=L(Jd.buffer)?r.createStream(34962,Jd.buffer):r.getBuffer(Jd.buffer),Ye="type"in Jd?ge[Jd.type]:De.dtype,bf=!!Jd.normalized,Ue=Jd.size|0,af=Jd.offset|0,$e=Jd.stride|0,Me=Jd.divisor|0);Xe=q.buffer;q.buffer=De;hf=q.divisor;q.divisor=Me;nf=q.normalized;q.normalized=bf;ef=q.offset;q.offset=af;jf=q.size;q.size=Ue;kf=q.state;q.state=Pe;
lf=q.stride;q.stride=$e;rf=q.type;q.type=Ye;of=q.w;q.w=Ve;sf=q.x;q.x=We;Bf=q.y;q.y=Ud;Cf=q.z;q.z=ae;Qe=ca.call(this,n,d,k);Ee=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;L(Qe)?(Ee=!0,pf=r.createStream(34962,Qe),wf=pf.dtype):(pf=r.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?
Qe.constant[3]:0)):(pf=L(Qe.buffer)?r.createStream(34962,Qe.buffer):r.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:pf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=D.buffer;D.buffer=pf;Kf=D.divisor;D.divisor=qf;Lf=D.normalized;D.normalized=Df;Mf=D.offset;D.offset=Gf;tf=D.size;D.size=Af;Rf=D.state;D.state=Ef;Hf=D.stride;D.stride=Ff;uf=D.type;D.type=wf;dg=D.w;D.w=xf;Sf=D.x;D.x=vf;Tf=D.y;D.y=yf;qg=D.z;D.z=zf;ff=C.call(this,n,d,k);cf=!1;Nf=null;Of=0;eg=!1;
gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;L(ff)?(cf=!0,Nf=r.createStream(34962,ff),Wf=Nf.dtype):(Nf=r.getBuffer(ff))?Wf=Nf.dtype:"constant"in ff?(hg=2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Nf=L(ff.buffer)?r.createStream(34962,ff.buffer):r.getBuffer(ff.buffer),Wf="type"in ff?ge[ff.type]:Nf.dtype,eg=!!ff.normalized,
gg=ff.size|0,fg=ff.offset|0,ig=ff.stride|0,Of=ff.divisor|0);jg=c.buffer;c.buffer=Nf;rg=c.divisor;c.divisor=Of;sg=c.normalized;c.normalized=eg;tg=c.offset;c.offset=fg;ug=c.size;c.size=gg;vg=c.state;c.state=hg;wg=c.stride;c.stride=ig;xg=c.type;c.type=Wf;yg=c.w;c.w=Uf;zg=c.x;c.x=Xf;Ag=c.y;c.y=Yf;Bg=c.z;c.z=Zf;gf=l.call(this,n,d,k);df=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;L(gf)?(df=!0,Pf=r.createStream(34962,gf),$f=Pf.dtype):(Pf=r.getBuffer(gf))?$f=Pf.dtype:"constant"in gf?(ng=
2,"number"===typeof gf.constant?(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Pf=L(gf.buffer)?r.createStream(34962,gf.buffer):r.getBuffer(gf.buffer),$f="type"in gf?ge[gf.type]:Pf.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Qf=gf.divisor|0);pg=a.buffer;a.buffer=Pf;Cg=a.divisor;a.divisor=Qf;Dg=a.normalized;a.normalized=kg;Eg=a.offset;
a.offset=lg;Fg=a.size;a.size=mg;Gg=a.state;a.state=ng;Hg=a.stride;a.stride=og;Ig=a.type;a.type=$f;Jg=a.w;a.w=Vf;Kg=a.x;a.x=ag;Lg=a.y;a.y=bg;Mg=a.z;a.z=cg;Ng=Ea.vert;Ea.vert=59;Og=Ea.frag;Ea.frag=58;B.dirty=!0;h(n,d,k);n.viewportWidth=x;n.viewportHeight=I;Dd[0]=K;Dd[1]=y;Dd[2]=R;Dd[3]=T;Ia[0]=ga;Ia[1]=ha;Ia[2]=N;Ia[3]=ac;sa.blend_enable=v;Ka[0]=la;Ka[1]=A;Ka[2]=Ha;Ka[3]=Q;sa.depth_enable=P;Gd[0]=E;Gd[1]=xa;Gd[2]=M;Gd[3]=za;sa.scissor_enable=ra;sa.stencil_enable=U;ea&&(S.cpuTime+=performance.now()-
ka);Ua&&va.destroyStream(fa);ua.elements=pa;ua.offset=ma;ua.count=wa;ua.primitive=na;qa[45]=oa;qa[48]=Gb;qa[10]=Cc;qa[46]=Ba;qa[47]=Ga;qa[34]=lb;qa[6]=ia;qa[7]=Zb;qa[8]=Wd;qa[9]=ob;qb&&r.destroyStream(La);V.buffer=Db;V.divisor=Na;V.normalized=zd;V.offset=Ya;V.size=Kb;V.state=Lb;V.stride=kb;V.type=Oa;V.w=Yb;V.x=Qa;V.y=tb;V.z=ub;mb&&r.destroyStream(fc);u.buffer=Vb;u.divisor=Pb;u.normalized=Kc;u.offset=Qb;u.size=Vd;u.state=Ec;u.stride=ke;u.type=Nc;u.w=ze;u.x=od;u.y=nc;u.z=vc;db&&r.destroyStream(rc);
b.buffer=ne;b.divisor=bd;b.normalized=Yc;b.offset=kc;b.size=bc;b.state=Zc;b.stride=Uc;b.type=cd;b.w=yc;b.x=hd;b.y=pd;b.z=se;id&&r.destroyStream(Jf);W.buffer=xd;W.divisor=Cd;W.normalized=Fd;W.offset=oe;W.size=qe;W.state=ue;W.stride=je;W.type=ie;W.w=he;W.x=ve;W.y=ee;W.z=le;fd&&r.destroyStream(we);ba.buffer=Oe;ba.divisor=xe;ba.normalized=Fe;ba.offset=Ie;ba.size=Je;ba.state=Ke;ba.stride=Ge;ba.type=Md;ba.w=Yd;ba.x=ce;ba.y=fe;ba.z=Le;Td&&r.destroyStream(De);q.buffer=Xe;q.divisor=hf;q.normalized=nf;q.offset=
ef;q.size=jf;q.state=kf;q.stride=lf;q.type=rf;q.w=of;q.x=sf;q.y=Bf;q.z=Cf;Ee&&r.destroyStream(pf);D.buffer=If;D.divisor=Kf;D.normalized=Lf;D.offset=Mf;D.size=tf;D.state=Rf;D.stride=Hf;D.type=uf;D.w=dg;D.x=Sf;D.y=Tf;D.z=qg;cf&&r.destroyStream(Nf);c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;df&&r.destroyStream(Pf);a.buffer=pg;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=
Kg;a.y=Lg;a.z=Mg;Ea.vert=Ng;Ea.frag=Og;B.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,Cc,Y,fa){var R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,X,Gb,ha,L,sa,Ea,qa,ya,Ia,la,aa;R=e.attributes;I=e.buffer;y=e.context;k=e.current;P=e.draw;Q=e.elements;za=e.extensions;oa=e.framebuffer;
w=e.gl;K=e.isBufferArgs;da=e.next;T=e.shader;ma=e.uniforms;ra=e.vao;Ca=da.blend_color;xa=k.blend_color;ga=da.blend_equation;Da=k.blend_equation;ka=da.blend_func;pa=k.blend_func;Aa=da.colorMask;Ha=k.colorMask;O=da.depth_range;ac=k.depth_range;Ua=da.polygonOffset_offset;r=k.polygonOffset_offset;n=da.sample_coverage;B=k.sample_coverage;ua=da.scissor_box;va=k.scissor_box;X=da.stencil_func;Gb=k.stencil_func;ha=da.stencil_opBack;L=k.stencil_opBack;sa=da.stencil_opFront;Ea=k.stencil_opFront;qa=da.viewport;
ya=k.viewport;Ia={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:4,stride:8};aa={offset:0,stride:8};return{batch:function(d,h){var p,g,e,t,T,qa,N,v,A,H,F,J,E;p=oa.next;p!==oa.cur&&(p?w.bindFramebuffer(36160,p.framebuffer):w.bindFramebuffer(36160,null),oa.cur=p);if(k.dirty){var M,U,ka,Z,ma,Ca,ia,Fa,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc;M=da.dither;M!==k.dither&&(M?w.enable(3024):w.disable(3024),
k.dither=M);U=ga[0];ka=ga[1];if(U!==Da[0]||ka!==Da[1])w.blendEquationSeparate(U,ka),Da[0]=U,Da[1]=ka;Z=da.depth_func;Z!==k.depth_func&&(w.depthFunc(Z),k.depth_func=Z);ma=O[0];Ca=O[1];if(ma!==ac[0]||Ca!==ac[1])w.depthRange(ma,Ca),ac[0]=ma,ac[1]=Ca;ia=da.depth_mask;ia!==k.depth_mask&&(w.depthMask(ia),k.depth_mask=ia);Fa=Aa[0];Ce=Aa[1];Ze=Aa[2];Re=Aa[3];if(Fa!==Ha[0]||Ce!==Ha[1]||Ze!==Ha[2]||Re!==Ha[3])w.colorMask(Fa,Ce,Ze,Re),Ha[0]=Fa,Ha[1]=Ce,Ha[2]=Ze,Ha[3]=Re;Hd=da.cull_enable;Hd!==k.cull_enable&&
(Hd?w.enable(2884):w.disable(2884),k.cull_enable=Hd);Ae=da.cull_face;Ae!==k.cull_face&&(w.cullFace(Ae),k.cull_face=Ae);te=da.frontFace;te!==k.frontFace&&(w.frontFace(te),k.frontFace=te);Zd=da.lineWidth;Zd!==k.lineWidth&&(w.lineWidth(Zd),k.lineWidth=Zd);Bd=da.polygonOffset_enable;Bd!==k.polygonOffset_enable&&(Bd?w.enable(32823):w.disable(32823),k.polygonOffset_enable=Bd);$d=Ua[0];ld=Ua[1];if($d!==r[0]||ld!==r[1])w.polygonOffset($d,ld),r[0]=$d,r[1]=ld;$c=da.sample_alpha;$c!==k.sample_alpha&&($c?w.enable(32926):
w.disable(32926),k.sample_alpha=$c);rd=da.sample_enable;rd!==k.sample_enable&&(rd?w.enable(32928):w.disable(32928),k.sample_enable=rd);Lc=n[0];nd=n[1];if(Lc!==B[0]||nd!==B[1])w.sampleCoverage(Lc,nd),B[0]=Lc,B[1]=nd;Gc=da.stencil_mask;Gc!==k.stencil_mask&&(w.stencilMask(Gc),k.stencil_mask=Gc);dd=X[0];Pc=X[1];kd=X[2];if(dd!==Gb[0]||Pc!==Gb[1]||kd!==Gb[2])w.stencilFunc(dd,Pc,kd),Gb[0]=dd,Gb[1]=Pc,Gb[2]=kd;Ab=sa[0];Eb=sa[1];tc=sa[2];wb=sa[3];if(Ab!==Ea[0]||Eb!==Ea[1]||tc!==Ea[2]||wb!==Ea[3])w.stencilOpSeparate(Ab,
Eb,tc,wb),Ea[0]=Ab,Ea[1]=Eb,Ea[2]=tc,Ea[3]=wb;wc=ha[0];Bb=ha[1];Jc=ha[2];lc=ha[3];if(wc!==L[0]||Bb!==L[1]||Jc!==L[2]||lc!==L[3])w.stencilOpSeparate(wc,Bb,Jc,lc),L[0]=wc,L[1]=Bb,L[2]=Jc,L[3]=lc;Hc=da.scissor_enable;Hc!==k.scissor_enable&&(Hc?w.enable(3089):w.disable(3089),k.scissor_enable=Hc);Wc=ua[0];Vc=ua[1];Dc=ua[2];dc=ua[3];if(Wc!==va[0]||Vc!==va[1]||Dc!==va[2]||dc!==va[3])w.scissor(Wc,Vc,Dc,dc),va[0]=Wc,va[1]=Vc,va[2]=Dc,va[3]=dc}g=this.viewport;e=g.x|0;t=g.y|0;T="width"in g?g.width|0:y.framebufferWidth-
e;qa="height"in g?g.height|0:y.framebufferHeight-t;N=y.viewportWidth;y.viewportWidth=T;v=y.viewportHeight;y.viewportHeight=qa;w.viewport(e,t,T,qa);ya[0]=e;ya[1]=t;ya[2]=T;ya[3]=qa;w.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;w.enable(3042);k.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;w.disable(2929);k.depth_enable=!1;w.disable(2960);k.stencil_enable=!1;if(A=k.profile)H=performance.now(),S.count+=h;w.useProgram(V.program);F=za.angle_instanced_arrays;
var Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub;ra.setVAO(null);aa.buffer=this.sizeBuffer;Ic=!1;oc=null;pc=0;mc=!1;$a=ec=0;Fc=1;xb=0;cb=5126;Va=nb=ab=Mb=0;K(aa)?(Ic=!0,oc=I.createStream(34962,aa),cb=oc.dtype):(oc=I.getBuffer(aa))?cb=oc.dtype:"constant"in aa?(Fc=2,"number"===typeof aa.constant?(ab=aa.constant,nb=Va=Mb=0):(ab=0<aa.constant.length?
aa.constant[0]:0,nb=1<aa.constant.length?aa.constant[1]:0,Va=2<aa.constant.length?aa.constant[2]:0,Mb=3<aa.constant.length?aa.constant[3]:0)):(oc=K(aa.buffer)?I.createStream(34962,aa.buffer):I.getBuffer(aa.buffer),cb="type"in aa?Ia[aa.type]:oc.dtype,mc=!!aa.normalized,$a=aa.size|0,ec=aa.offset|0,xb=aa.stride|0,pc=aa.divisor|0);vd=fa.location;Hb=R[vd];if(1===Fc){Hb.buffer||w.enableVertexAttribArray(vd);Ib=$a||1;if(Hb.type!==cb||Hb.size!==Ib||Hb.buffer!==oc||Hb.normalized!==mc||Hb.offset!==ec||Hb.stride!==
xb)w.bindBuffer(34962,oc.buffer),w.vertexAttribPointer(vd,Ib,cb,mc,xb,ec),Hb.type=cb,Hb.size=Ib,Hb.buffer=oc,Hb.normalized=mc,Hb.offset=ec,Hb.stride=xb;Hb.divisor!==pc&&(F.vertexAttribDivisorANGLE(vd,pc),Hb.divisor=pc)}else if(Hb.buffer&&(w.disableVertexAttribArray(vd),Hb.buffer=null),Hb.x!==ab||Hb.y!==nb||Hb.z!==Va||Hb.w!==Mb)w.vertexAttrib4f(vd,ab,nb,Va,Mb),Hb.x=ab,Hb.y=nb,Hb.z=Va,Hb.w=Mb;la.buffer=this.sizeBuffer;qc=!1;Nb=null;ib=0;Fb=!1;vb=Cb=0;gb=1;Xb=0;Ob=5126;yb=Tb=Sa=pb=0;K(la)?(qc=!0,Nb=
I.createStream(34962,la),Ob=Nb.dtype):(Nb=I.getBuffer(la))?Ob=Nb.dtype:"constant"in la?(gb=2,"number"===typeof la.constant?(Sa=la.constant,Tb=yb=pb=0):(Sa=0<la.constant.length?la.constant[0]:0,Tb=1<la.constant.length?la.constant[1]:0,yb=2<la.constant.length?la.constant[2]:0,pb=3<la.constant.length?la.constant[3]:0)):(Nb=K(la.buffer)?I.createStream(34962,la.buffer):I.getBuffer(la.buffer),Ob="type"in la?Ia[la.type]:Nb.dtype,Fb=!!la.normalized,vb=la.size|0,Cb=la.offset|0,Xb=la.stride|0,ib=la.divisor|
0);ic=D.location;hb=R[ic];if(1===gb){hb.buffer||w.enableVertexAttribArray(ic);ob=vb||1;if(hb.type!==Ob||hb.size!==ob||hb.buffer!==Nb||hb.normalized!==Fb||hb.offset!==Cb||hb.stride!==Xb)w.bindBuffer(34962,Nb.buffer),w.vertexAttribPointer(ic,ob,Ob,Fb,Xb,Cb),hb.type=Ob,hb.size=ob,hb.buffer=Nb,hb.normalized=Fb,hb.offset=Cb,hb.stride=Xb;hb.divisor!==ib&&(F.vertexAttribDivisorANGLE(ic,ib),hb.divisor=ib)}else if(hb.buffer&&(w.disableVertexAttribArray(ic),hb.buffer=null),hb.x!==Sa||hb.y!==Tb||hb.z!==yb||
hb.w!==pb)w.vertexAttrib4f(ic,Sa,Tb,yb,pb),hb.x=Sa,hb.y=Tb,hb.z=yb,hb.w=pb;Ja=this.charBuffer;qb=!1;La=null;eb=0;fb=!1;jb=Ma=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=Pa=0;K(Ja)?(qb=!0,La=I.createStream(34962,Ja),rb=La.dtype):(La=I.getBuffer(Ja))?rb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Bc=Ja.constant,Ra=Jb=Pa=0):(Bc=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=K(Ja.buffer)?
I.createStream(34962,Ja.buffer):I.getBuffer(Ja.buffer),rb="type"in Ja?Ia[Ja.type]:La.dtype,fb=!!Ja.normalized,jb=Ja.size|0,Ma=Ja.offset|0,sb=Ja.stride|0,eb=Ja.divisor|0);Db=ca.location;Na=R[Db];if(1===Wa){Na.buffer||w.enableVertexAttribArray(Db);yd=jb||1;if(Na.type!==rb||Na.size!==yd||Na.buffer!==La||Na.normalized!==fb||Na.offset!==Ma||Na.stride!==sb)w.bindBuffer(34962,La.buffer),w.vertexAttribPointer(Db,yd,rb,fb,sb,Ma),Na.type=rb,Na.size=yd,Na.buffer=La,Na.normalized=fb,Na.offset=Ma,Na.stride=sb;
Na.divisor!==eb&&(F.vertexAttribDivisorANGLE(Db,eb),Na.divisor=eb)}else if(Na.buffer&&(w.disableVertexAttribArray(Db),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)w.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ya=this.position;Kb=!1;Lb=null;kb=0;Oa=!1;Qa=Yb=0;tb=1;ub=0;Ta=5126;uc=zc=fc=mb=0;K(Ya)?(Kb=!0,Lb=I.createStream(34962,Ya),Ta=Lb.dtype):(Lb=I.getBuffer(Ya))?Ta=Lb.dtype:"constant"in Ya?(tb=2,"number"===typeof Ya.constant?(fc=Ya.constant,zc=uc=mb=0):(fc=0<Ya.constant.length?
Ya.constant[0]:0,zc=1<Ya.constant.length?Ya.constant[1]:0,uc=2<Ya.constant.length?Ya.constant[2]:0,mb=3<Ya.constant.length?Ya.constant[3]:0)):(Lb=K(Ya.buffer)?I.createStream(34962,Ya.buffer):I.getBuffer(Ya.buffer),Ta="type"in Ya?Ia[Ya.type]:Lb.dtype,Oa=!!Ya.normalized,Qa=Ya.size|0,Yb=Ya.offset|0,ub=Ya.stride|0,kb=Ya.divisor|0);bb=wa.location;jc=R[bb];if(1===tb){jc.buffer||w.enableVertexAttribArray(bb);gd=Qa||2;if(jc.type!==Ta||jc.size!==gd||jc.buffer!==Lb||jc.normalized!==Oa||jc.offset!==Yb||jc.stride!==
ub)w.bindBuffer(34962,Lb.buffer),w.vertexAttribPointer(bb,gd,Ta,Oa,ub,Yb),jc.type=Ta,jc.size=gd,jc.buffer=Lb,jc.normalized=Oa,jc.offset=Yb,jc.stride=ub;jc.divisor!==kb&&(F.vertexAttribDivisorANGLE(bb,kb),jc.divisor=kb)}else if(jc.buffer&&(w.disableVertexAttribArray(bb),jc.buffer=null),jc.x!==fc||jc.y!==zc||jc.z!==uc||jc.w!==mb)w.vertexAttrib4f(bb,fc,zc,uc,mb),jc.x=fc,jc.y=zc,jc.z=uc,jc.w=mb;Xa=this.viewportArray;w.uniform4f(Y.location,Xa[0],Xa[1],Xa[2],Xa[3]);Mc=this.scale;w.uniform2f(na.location,
Mc[0],Mc[1]);zb=this.translate;w.uniform2f(Cc.location,zb[0],zb[1]);(Za=P.elements)?w.bindBuffer(34963,Za.buffer.buffer):ra.currentVAO&&(Za=Q.getElements(ra.currentVAO.elements))&&w.bindBuffer(34963,Za.buffer.buffer);Ub=P.instances;for(J=0;J<h;++J){E=d[J];var sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd,pd;sc=m.call(this,y,E,J);J&&Vb===sc||(Vb=sc,w.uniform1f(C.location,sc));Pb=u.call(this,y,E,J);J&&Kc===Pb||(Kc=Pb,w.uniform1f(l.location,
Pb));Qb=E.align;J&&Qd===Qb||(Qd=Qb,w.uniform1f(W.location,Qb));Ec=E.baseline;J&&Ed===Ec||(Ed=Ec,w.uniform1f(q.location,Ec));Nc=E.color;ed=Nc[0];nc=Nc[1];gc=Nc[2];rc=Nc[3];J&&od===ed&&vc===nc&&db===gc&&Sb===rc||(od=ed,vc=nc,db=gc,Sb=rc,w.uniform4f(c.location,ed,nc,gc,rc));Wb=ja.call(this,y,E,J);cc=Wb[0];xc=Wb[1];J&&hc===cc&&Ac===xc||(hc=cc,Ac=xc,w.uniform2f(G.location,cc,xc));ad=b.call(this,y,E,J);Qc=ad[0];Sc=ad[1];J&&Rc===Qc&&Xc===Sc||(Rc=Qc,Xc=Sc,w.uniform2f(ba.location,Qc,Sc));wd=E.positionOffset;
bd=wd[0];kc=wd[1];J&&Yc===bd&&bc===kc||(Yc=bd,bc=kc,w.uniform2f(x.location,bd,kc));Zc=E.opacity;J&&Uc===Zc||(Uc=Zc,w.uniform1f(a.location,Zc));(cd=z.call(this,y,E,J))&&"framebuffer"===cd._reglType&&(cd=cd.color[0]);yc=cd._texture;w.uniform1i(f.location,yc.bind());hd=E.offset;if(pd=E.count)0<Ub?Za?F.drawElementsInstancedANGLE(0,pd,Za.type,hd<<(Za.type-5121>>1),Ub):F.drawArraysInstancedANGLE(0,hd,pd,Ub):0>Ub&&(Za?w.drawElements(0,pd,Za.type,hd<<(Za.type-5121>>1)):w.drawArrays(0,hd,pd)),yc.unbind()}Ic&&
I.destroyStream(oc);qc&&I.destroyStream(Nb);qb&&I.destroyStream(La);Kb&&I.destroyStream(Lb);k.dirty=!0;ra.setVAO(null);y.viewportWidth=N;y.viewportHeight=v;A&&(S.cpuTime+=performance.now()-H)},draw:function(b){var e,m,z,t,T,qa,v,A,J,F,u,E,M,U,V,ka,Z,ja,ma,Ca,ia,Fa,Ce,Ze,Re,Hd,Ae,te,Zd,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb;e=oa.next;e!==oa.cur&&(e?w.bindFramebuffer(36160,
e.framebuffer):w.bindFramebuffer(36160,null),oa.cur=e);if(k.dirty){var Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec;Wa=da.dither;Wa!==k.dither&&(Wa?w.enable(3024):w.disable(3024),k.dither=Wa);sb=ga[0];rb=ga[1];if(sb!==Da[0]||rb!==Da[1])w.blendEquationSeparate(sb,rb),Da[0]=sb,Da[1]=rb;Pa=da.depth_func;Pa!==k.depth_func&&(w.depthFunc(Pa),k.depth_func=Pa);Bc=O[0];Ra=O[1];if(Bc!==ac[0]||Ra!==ac[1])w.depthRange(Bc,Ra),ac[0]=Bc,ac[1]=
Ra;Jb=da.depth_mask;Jb!==k.depth_mask&&(w.depthMask(Jb),k.depth_mask=Jb);Db=Aa[0];Na=Aa[1];yd=Aa[2];Ya=Aa[3];if(Db!==Ha[0]||Na!==Ha[1]||yd!==Ha[2]||Ya!==Ha[3])w.colorMask(Db,Na,yd,Ya),Ha[0]=Db,Ha[1]=Na,Ha[2]=yd,Ha[3]=Ya;Kb=da.cull_enable;Kb!==k.cull_enable&&(Kb?w.enable(2884):w.disable(2884),k.cull_enable=Kb);Lb=da.cull_face;Lb!==k.cull_face&&(w.cullFace(Lb),k.cull_face=Lb);kb=da.frontFace;kb!==k.frontFace&&(w.frontFace(kb),k.frontFace=kb);Oa=da.lineWidth;Oa!==k.lineWidth&&(w.lineWidth(Oa),k.lineWidth=
Oa);Yb=da.polygonOffset_enable;Yb!==k.polygonOffset_enable&&(Yb?w.enable(32823):w.disable(32823),k.polygonOffset_enable=Yb);Qa=Ua[0];tb=Ua[1];if(Qa!==r[0]||tb!==r[1])w.polygonOffset(Qa,tb),r[0]=Qa,r[1]=tb;ub=da.sample_alpha;ub!==k.sample_alpha&&(ub?w.enable(32926):w.disable(32926),k.sample_alpha=ub);Ta=da.sample_enable;Ta!==k.sample_enable&&(Ta?w.enable(32928):w.disable(32928),k.sample_enable=Ta);mb=n[0];fc=n[1];if(mb!==B[0]||fc!==B[1])w.sampleCoverage(mb,fc),B[0]=mb,B[1]=fc;zc=da.stencil_mask;zc!==
k.stencil_mask&&(w.stencilMask(zc),k.stencil_mask=zc);uc=X[0];bb=X[1];jc=X[2];if(uc!==Gb[0]||bb!==Gb[1]||jc!==Gb[2])w.stencilFunc(uc,bb,jc),Gb[0]=uc,Gb[1]=bb,Gb[2]=jc;gd=sa[0];Xa=sa[1];Mc=sa[2];zb=sa[3];if(gd!==Ea[0]||Xa!==Ea[1]||Mc!==Ea[2]||zb!==Ea[3])w.stencilOpSeparate(gd,Xa,Mc,zb),Ea[0]=gd,Ea[1]=Xa,Ea[2]=Mc,Ea[3]=zb;Za=ha[0];Ub=ha[1];sc=ha[2];Vb=ha[3];if(Za!==L[0]||Ub!==L[1]||sc!==L[2]||Vb!==L[3])w.stencilOpSeparate(Za,Ub,sc,Vb),L[0]=Za,L[1]=Ub,L[2]=sc,L[3]=Vb;Pb=da.scissor_enable;Pb!==k.scissor_enable&&
(Pb?w.enable(3089):w.disable(3089),k.scissor_enable=Pb);Kc=ua[0];Qb=ua[1];Qd=ua[2];Ec=ua[3];if(Kc!==va[0]||Qb!==va[1]||Qd!==va[2]||Ec!==va[3])w.scissor(Kc,Qb,Qd,Ec),va[0]=Kc,va[1]=Qb,va[2]=Qd,va[3]=Ec}m=this.viewport;z=m.x|0;t=m.y|0;T="width"in m?m.width|0:y.framebufferWidth-z;qa="height"in m?m.height|0:y.framebufferHeight-t;v=y.viewportWidth;y.viewportWidth=T;A=y.viewportHeight;y.viewportHeight=qa;w.viewport(z,t,T,qa);ya[0]=z;ya[1]=t;ya[2]=T;ya[3]=qa;w.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;
xa[3]=1;w.enable(3042);k.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;w.disable(2929);k.depth_enable=!1;w.disable(2960);k.stencil_enable=!1;if(J=k.profile)F=performance.now(),S.count++;w.useProgram(H.program);u=za.angle_instanced_arrays;ra.setVAO(null);aa.buffer=this.sizeBuffer;E=!1;M=null;U=0;V=!1;Z=ka=0;ja=1;ma=0;Ca=5126;Ze=Ce=Fa=ia=0;K(aa)?(E=!0,M=I.createStream(34962,aa),Ca=M.dtype):(M=I.getBuffer(aa))?Ca=M.dtype:"constant"in aa?(ja=2,"number"===typeof aa.constant?
(Fa=aa.constant,Ce=Ze=ia=0):(Fa=0<aa.constant.length?aa.constant[0]:0,Ce=1<aa.constant.length?aa.constant[1]:0,Ze=2<aa.constant.length?aa.constant[2]:0,ia=3<aa.constant.length?aa.constant[3]:0)):(M=K(aa.buffer)?I.createStream(34962,aa.buffer):I.getBuffer(aa.buffer),Ca="type"in aa?Ia[aa.type]:M.dtype,V=!!aa.normalized,Z=aa.size|0,ka=aa.offset|0,ma=aa.stride|0,U=aa.divisor|0);Re=fa.location;Hd=R[Re];if(1===ja){Hd.buffer||w.enableVertexAttribArray(Re);Ae=Z||1;if(Hd.type!==Ca||Hd.size!==Ae||Hd.buffer!==
M||Hd.normalized!==V||Hd.offset!==ka||Hd.stride!==ma)w.bindBuffer(34962,M.buffer),w.vertexAttribPointer(Re,Ae,Ca,V,ma,ka),Hd.type=Ca,Hd.size=Ae,Hd.buffer=M,Hd.normalized=V,Hd.offset=ka,Hd.stride=ma;Hd.divisor!==U&&(u.vertexAttribDivisorANGLE(Re,U),Hd.divisor=U)}else if(Hd.buffer&&(w.disableVertexAttribArray(Re),Hd.buffer=null),Hd.x!==Fa||Hd.y!==Ce||Hd.z!==Ze||Hd.w!==ia)w.vertexAttrib4f(Re,Fa,Ce,Ze,ia),Hd.x=Fa,Hd.y=Ce,Hd.z=Ze,Hd.w=ia;la.buffer=this.sizeBuffer;te=!1;Zd=null;Bd=0;$d=!1;$c=ld=0;rd=1;
Lc=0;nd=5126;kd=Pc=dd=Gc=0;K(la)?(te=!0,Zd=I.createStream(34962,la),nd=Zd.dtype):(Zd=I.getBuffer(la))?nd=Zd.dtype:"constant"in la?(rd=2,"number"===typeof la.constant?(dd=la.constant,Pc=kd=Gc=0):(dd=0<la.constant.length?la.constant[0]:0,Pc=1<la.constant.length?la.constant[1]:0,kd=2<la.constant.length?la.constant[2]:0,Gc=3<la.constant.length?la.constant[3]:0)):(Zd=K(la.buffer)?I.createStream(34962,la.buffer):I.getBuffer(la.buffer),nd="type"in la?Ia[la.type]:Zd.dtype,$d=!!la.normalized,$c=la.size|0,
ld=la.offset|0,Lc=la.stride|0,Bd=la.divisor|0);Ab=D.location;Eb=R[Ab];if(1===rd){Eb.buffer||w.enableVertexAttribArray(Ab);tc=$c||1;if(Eb.type!==nd||Eb.size!==tc||Eb.buffer!==Zd||Eb.normalized!==$d||Eb.offset!==ld||Eb.stride!==Lc)w.bindBuffer(34962,Zd.buffer),w.vertexAttribPointer(Ab,tc,nd,$d,Lc,ld),Eb.type=nd,Eb.size=tc,Eb.buffer=Zd,Eb.normalized=$d,Eb.offset=ld,Eb.stride=Lc;Eb.divisor!==Bd&&(u.vertexAttribDivisorANGLE(Ab,Bd),Eb.divisor=Bd)}else if(Eb.buffer&&(w.disableVertexAttribArray(Ab),Eb.buffer=
null),Eb.x!==dd||Eb.y!==Pc||Eb.z!==kd||Eb.w!==Gc)w.vertexAttrib4f(Ab,dd,Pc,kd,Gc),Eb.x=dd,Eb.y=Pc,Eb.z=kd,Eb.w=Gc;wb=this.charBuffer;wc=!1;Bb=null;Jc=0;lc=!1;Wc=Hc=0;Vc=1;Dc=0;dc=5126;mc=pc=oc=Ic=0;K(wb)?(wc=!0,Bb=I.createStream(34962,wb),dc=Bb.dtype):(Bb=I.getBuffer(wb))?dc=Bb.dtype:"constant"in wb?(Vc=2,"number"===typeof wb.constant?(oc=wb.constant,pc=mc=Ic=0):(oc=0<wb.constant.length?wb.constant[0]:0,pc=1<wb.constant.length?wb.constant[1]:0,mc=2<wb.constant.length?wb.constant[2]:0,Ic=3<wb.constant.length?
wb.constant[3]:0)):(Bb=K(wb.buffer)?I.createStream(34962,wb.buffer):I.getBuffer(wb.buffer),dc="type"in wb?Ia[wb.type]:Bb.dtype,lc=!!wb.normalized,Wc=wb.size|0,Hc=wb.offset|0,Dc=wb.stride|0,Jc=wb.divisor|0);ec=ca.location;$a=R[ec];if(1===Vc){$a.buffer||w.enableVertexAttribArray(ec);Fc=Wc||1;if($a.type!==dc||$a.size!==Fc||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Hc||$a.stride!==Dc)w.bindBuffer(34962,Bb.buffer),w.vertexAttribPointer(ec,Fc,dc,lc,Dc,Hc),$a.type=dc,$a.size=Fc,$a.buffer=Bb,$a.normalized=
lc,$a.offset=Hc,$a.stride=Dc;$a.divisor!==Jc&&(u.vertexAttribDivisorANGLE(ec,Jc),$a.divisor=Jc)}else if($a.buffer&&(w.disableVertexAttribArray(ec),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Ic)w.vertexAttrib4f(ec,oc,pc,mc,Ic),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Ic;xb=this.position;cb=!1;Mb=null;ab=0;nb=!1;vd=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=ib=Nb=0;K(xb)?(cb=!0,Mb=I.createStream(34962,xb),qc=Mb.dtype):(Mb=I.getBuffer(xb))?qc=Mb.dtype:"constant"in xb?(Hb=2,"number"===typeof xb.constant?(ib=xb.constant,
Fb=Cb=Nb=0):(ib=0<xb.constant.length?xb.constant[0]:0,Fb=1<xb.constant.length?xb.constant[1]:0,Cb=2<xb.constant.length?xb.constant[2]:0,Nb=3<xb.constant.length?xb.constant[3]:0)):(Mb=K(xb.buffer)?I.createStream(34962,xb.buffer):I.getBuffer(xb.buffer),qc="type"in xb?Ia[xb.type]:Mb.dtype,nb=!!xb.normalized,vd=xb.size|0,Va=xb.offset|0,Ib=xb.stride|0,ab=xb.divisor|0);vb=wa.location;gb=R[vb];if(1===Hb){gb.buffer||w.enableVertexAttribArray(vb);Xb=vd||2;if(gb.type!==qc||gb.size!==Xb||gb.buffer!==Mb||gb.normalized!==
nb||gb.offset!==Va||gb.stride!==Ib)w.bindBuffer(34962,Mb.buffer),w.vertexAttribPointer(vb,Xb,qc,nb,Ib,Va),gb.type=qc,gb.size=Xb,gb.buffer=Mb,gb.normalized=nb,gb.offset=Va,gb.stride=Ib;gb.divisor!==ab&&(u.vertexAttribDivisorANGLE(vb,ab),gb.divisor=ab)}else if(gb.buffer&&(w.disableVertexAttribArray(vb),gb.buffer=null),gb.x!==ib||gb.y!==Fb||gb.z!==Cb||gb.w!==Nb)w.vertexAttrib4f(vb,ib,Fb,Cb,Nb),gb.x=ib,gb.y=Fb,gb.z=Cb,gb.w=Nb;Ob=N.call(this,y,b,0);w.uniform1f(C.location,Ob);pb=g.call(this,y,b,0);w.uniform1f(l.location,
pb);w.uniform1f(W.location,b.align);w.uniform1f(q.location,b.baseline);Sa=this.viewportArray;w.uniform4f(Y.location,Sa[0],Sa[1],Sa[2],Sa[3]);Tb=b.color;w.uniform4f(c.location,Tb[0],Tb[1],Tb[2],Tb[3]);yb=h.call(this,y,b,0);w.uniform2f(G.location,yb[0],yb[1]);ic=p.call(this,y,b,0);w.uniform2f(ba.location,ic[0],ic[1]);hb=this.scale;w.uniform2f(na.location,hb[0],hb[1]);ob=this.translate;w.uniform2f(Cc.location,ob[0],ob[1]);Ja=b.positionOffset;w.uniform2f(x.location,Ja[0],Ja[1]);w.uniform1f(a.location,
b.opacity);(qb=d.call(this,y,b,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);La=qb._texture;w.uniform1i(f.location,La.bind());(eb=P.elements)?w.bindBuffer(34963,eb.buffer.buffer):ra.currentVAO&&(eb=Q.getElements(ra.currentVAO.elements))&&w.bindBuffer(34963,eb.buffer.buffer);fb=b.offset;if(Ma=b.count)jb=P.instances,0<jb?eb?u.drawElementsInstancedANGLE(0,Ma,eb.type,fb<<(eb.type-5121>>1),jb):u.drawArraysInstancedANGLE(0,fb,Ma,jb):0>jb&&(eb?w.drawElements(0,Ma,eb.type,fb<<(eb.type-5121>>1)):w.drawArrays(0,
fb,Ma)),k.dirty=!0,ra.setVAO(null),y.viewportWidth=v,y.viewportHeight=A,J&&(S.cpuTime+=performance.now()-F),E&&I.destroyStream(M),te&&I.destroyStream(Zd),wc&&I.destroyStream(Bb),cb&&I.destroyStream(Mb),La.unbind()},scope:function(a,c,b){var d,f,h,n,l,r,w,p,B,L,O,g,q,e,x,m,z,sa,Ea,C,R,G,ga,N,ha,D,ac,Ha,Q,H,u,ua,ya,xa,za,ra,V,W,Y,ba,fa,Ua,ca,ja,pa,Da,Aa,wa,na,oa,va,Gb,X,Cc,td,ia,$a,Fa,xb,cb,Mb,ab,nb,Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,
Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Kc,Qb,Qd,Ec,Ed,Nc,ed,od,nc,vc,gc,db,rc,Sb,Wb,cc,hc,xc,Ac,ad,Qc,Rc,Sc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,hd;d=this.viewport;f=d.x|0;h=d.y|0;n="width"in d?d.width|0:y.framebufferWidth-f;l="height"in d?d.height|0:y.framebufferHeight-h;r=y.viewportWidth;y.viewportWidth=n;w=y.viewportHeight;y.viewportHeight=l;p=qa[0];qa[0]=f;B=qa[1];qa[1]=h;L=qa[2];qa[2]=n;O=qa[3];qa[3]=l;g=Ca[0];Ca[0]=0;q=Ca[1];Ca[1]=0;e=Ca[2];Ca[2]=0;x=Ca[3];
Ca[3]=1;m=da.blend_enable;da.blend_enable=!0;z=ka[0];ka[0]=770;sa=ka[1];ka[1]=771;Ea=ka[2];ka[2]=773;C=ka[3];ka[3]=1;R=da.depth_enable;da.depth_enable=!1;G=da.stencil_enable;da.stencil_enable=!1;if(ga=k.profile)N=performance.now(),S.count++;ha=a.offset;D=P.offset;P.offset=ha;ac=a.count;Ha=P.count;P.count=ac;Q=P.primitive;P.primitive=0;H=a.align;u=ma[64];ma[64]=H;ua=E.call(this,y,a,b);ya=ma[69];ma[69]=ua;xa=J.call(this,y,a,b);za=ma[67];ma[67]=xa;ra=M.call(this,y,a,b);V=ma[66];ma[66]=ra;W=a.baseline;
Y=ma[65];ma[65]=W;ba=U.call(this,y,a,b);fa=ma[62];ma[62]=ba;Ua=a.color;ca=ma[14];ma[14]=Ua;ja=v.call(this,y,a,b);pa=ma[63];ma[63]=ja;Da=a.opacity;Aa=ma[10];ma[10]=Da;wa=a.positionOffset;na=ma[68];ma[68]=wa;oa=this.scale;va=ma[6];ma[6]=oa;Gb=this.translate;X=ma[8];ma[8]=Gb;Cc=this.viewportArray;td=ma[3];ma[3]=Cc;ia=this.charBuffer;$a=!1;Fa=null;xb=0;cb=!1;ab=Mb=0;nb=1;Va=0;vd=5126;Nb=qc=Ib=Hb=0;K(ia)?($a=!0,Fa=I.createStream(34962,ia),vd=Fa.dtype):(Fa=I.getBuffer(ia))?vd=Fa.dtype:"constant"in ia?(nb=
2,"number"===typeof ia.constant?(Ib=ia.constant,qc=Nb=Hb=0):(Ib=0<ia.constant.length?ia.constant[0]:0,qc=1<ia.constant.length?ia.constant[1]:0,Nb=2<ia.constant.length?ia.constant[2]:0,Hb=3<ia.constant.length?ia.constant[3]:0)):(Fa=K(ia.buffer)?I.createStream(34962,ia.buffer):I.getBuffer(ia.buffer),vd="type"in ia?Ia[ia.type]:Fa.dtype,cb=!!ia.normalized,ab=ia.size|0,Mb=ia.offset|0,Va=ia.stride|0,xb=ia.divisor|0);ib=A.buffer;A.buffer=Fa;Fb=A.divisor;A.divisor=xb;Cb=A.normalized;A.normalized=cb;vb=A.offset;
A.offset=Mb;gb=A.size;A.size=ab;Xb=A.state;A.state=nb;Ob=A.stride;A.stride=Va;pb=A.type;A.type=vd;Sa=A.w;A.w=Hb;Tb=A.x;A.x=Ib;yb=A.y;A.y=qc;ic=A.z;A.z=Nb;la.buffer=this.sizeBuffer;hb=!1;ob=null;Ja=0;qb=!1;eb=La=0;fb=1;Ma=0;jb=5126;Pa=rb=sb=Wa=0;K(la)?(hb=!0,ob=I.createStream(34962,la),jb=ob.dtype):(ob=I.getBuffer(la))?jb=ob.dtype:"constant"in la?(fb=2,"number"===typeof la.constant?(sb=la.constant,rb=Pa=Wa=0):(sb=0<la.constant.length?la.constant[0]:0,rb=1<la.constant.length?la.constant[1]:0,Pa=2<la.constant.length?
la.constant[2]:0,Wa=3<la.constant.length?la.constant[3]:0)):(ob=K(la.buffer)?I.createStream(34962,la.buffer):I.getBuffer(la.buffer),jb="type"in la?Ia[la.type]:ob.dtype,qb=!!la.normalized,eb=la.size|0,La=la.offset|0,Ma=la.stride|0,Ja=la.divisor|0);Bc=F.buffer;F.buffer=ob;Ra=F.divisor;F.divisor=Ja;Jb=F.normalized;F.normalized=qb;Db=F.offset;F.offset=La;Na=F.size;F.size=eb;yd=F.state;F.state=fb;Ya=F.stride;F.stride=Ma;Kb=F.type;F.type=jb;Lb=F.w;F.w=Wa;kb=F.x;F.x=sb;Oa=F.y;F.y=rb;Yb=F.z;F.z=Pa;Qa=this.position;
tb=!1;ub=null;Ta=0;mb=!1;zc=fc=0;uc=1;bb=0;jc=5126;zb=Mc=Xa=gd=0;K(Qa)?(tb=!0,ub=I.createStream(34962,Qa),jc=ub.dtype):(ub=I.getBuffer(Qa))?jc=ub.dtype:"constant"in Qa?(uc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,Mc=zb=gd=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,Mc=1<Qa.constant.length?Qa.constant[1]:0,zb=2<Qa.constant.length?Qa.constant[2]:0,gd=3<Qa.constant.length?Qa.constant[3]:0)):(ub=K(Qa.buffer)?I.createStream(34962,Qa.buffer):I.getBuffer(Qa.buffer),jc="type"in Qa?Ia[Qa.type]:ub.dtype,
mb=!!Qa.normalized,zc=Qa.size|0,fc=Qa.offset|0,bb=Qa.stride|0,Ta=Qa.divisor|0);Za=Z.buffer;Z.buffer=ub;Ub=Z.divisor;Z.divisor=Ta;sc=Z.normalized;Z.normalized=mb;Vb=Z.offset;Z.offset=fc;Pb=Z.size;Z.size=zc;Kc=Z.state;Z.state=uc;Qb=Z.stride;Z.stride=bb;Qd=Z.type;Z.type=jc;Ec=Z.w;Z.w=gd;Ed=Z.x;Z.x=Xa;Nc=Z.y;Z.y=Mc;ed=Z.z;Z.z=zb;aa.buffer=this.sizeBuffer;od=!1;nc=null;vc=0;gc=!1;rc=db=0;Sb=1;Wb=0;cc=5126;ad=Ac=xc=hc=0;K(aa)?(od=!0,nc=I.createStream(34962,aa),cc=nc.dtype):(nc=I.getBuffer(aa))?cc=nc.dtype:
"constant"in aa?(Sb=2,"number"===typeof aa.constant?(xc=aa.constant,Ac=ad=hc=0):(xc=0<aa.constant.length?aa.constant[0]:0,Ac=1<aa.constant.length?aa.constant[1]:0,ad=2<aa.constant.length?aa.constant[2]:0,hc=3<aa.constant.length?aa.constant[3]:0)):(nc=K(aa.buffer)?I.createStream(34962,aa.buffer):I.getBuffer(aa.buffer),cc="type"in aa?Ia[aa.type]:nc.dtype,gc=!!aa.normalized,rc=aa.size|0,db=aa.offset|0,Wb=aa.stride|0,vc=aa.divisor|0);Qc=t.buffer;t.buffer=nc;Rc=t.divisor;t.divisor=vc;Sc=t.normalized;t.normalized=
gc;Xc=t.offset;t.offset=db;wd=t.size;t.size=rc;bd=t.state;t.state=Sb;Yc=t.stride;t.stride=Wb;kc=t.type;t.type=cc;bc=t.w;t.w=hc;Zc=t.x;t.x=xc;Uc=t.y;t.y=Ac;cd=t.z;t.z=ad;yc=T.vert;T.vert=61;hd=T.frag;T.frag=60;k.dirty=!0;c(y,a,b);y.viewportWidth=r;y.viewportHeight=w;qa[0]=p;qa[1]=B;qa[2]=L;qa[3]=O;Ca[0]=g;Ca[1]=q;Ca[2]=e;Ca[3]=x;da.blend_enable=m;ka[0]=z;ka[1]=sa;ka[2]=Ea;ka[3]=C;da.depth_enable=R;da.stencil_enable=G;ga&&(S.cpuTime+=performance.now()-N);P.offset=D;P.count=Ha;P.primitive=Q;ma[64]=u;
ma[69]=ya;ma[67]=za;ma[66]=V;ma[65]=Y;ma[62]=fa;ma[14]=ca;ma[63]=pa;ma[10]=Aa;ma[68]=na;ma[6]=va;ma[8]=X;ma[3]=td;$a&&I.destroyStream(Fa);A.buffer=ib;A.divisor=Fb;A.normalized=Cb;A.offset=vb;A.size=gb;A.state=Xb;A.stride=Ob;A.type=pb;A.w=Sa;A.x=Tb;A.y=yb;A.z=ic;hb&&I.destroyStream(ob);F.buffer=Bc;F.divisor=Ra;F.normalized=Jb;F.offset=Db;F.size=Na;F.state=yd;F.stride=Ya;F.type=Kb;F.w=Lb;F.x=kb;F.y=Oa;F.z=Yb;tb&&I.destroyStream(ub);Z.buffer=Za;Z.divisor=Ub;Z.normalized=sc;Z.offset=Vb;Z.size=Pb;Z.state=
Kc;Z.stride=Qb;Z.type=Qd;Z.w=Ec;Z.x=Ed;Z.y=Nc;Z.z=ed;od&&I.destroyStream(nc);t.buffer=Qc;t.divisor=Rc;t.normalized=Sc;t.offset=Xc;t.size=wd;t.state=bd;t.stride=Yc;t.type=kc;t.w=bc;t.x=Zc;t.y=Uc;t.z=cd;T.vert=yc;T.frag=hd;k.dirty=!0}}},$2:function(e,S,H){var N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l;N=e.attributes;g=e.current;h=e.framebuffer;p=e.gl;d=e.next;E=e.vao;J=d.blend_color;M=g.blend_color;U=d.blend_equation;v=g.blend_equation;A=d.blend_func;F=g.blend_func;Z=d.colorMask;
t=g.colorMask;V=d.depth_range;m=g.depth_range;u=d.polygonOffset_offset;ja=g.polygonOffset_offset;b=d.sample_coverage;z=g.sample_coverage;W=d.scissor_box;f=g.scissor_box;ba=d.stencil_func;G=g.stencil_func;q=d.stencil_opBack;ca=g.stencil_opBack;D=d.stencil_opFront;C=g.stencil_opFront;c=d.viewport;l=g.viewport;return{poll:function(){var a,e,x,N,H,E,S,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca;g.dirty=!1;e=d.blend_enable;x=d.cull_enable;N=d.depth_enable;H=d.dither;E=d.polygonOffset_enable;S=d.sample_alpha;R=
d.sample_enable;I=d.scissor_enable;y=d.stencil_enable;k=d.cull_face;P=g.cull_face;Q=d.depth_func;za=g.depth_func;oa=d.depth_mask;w=g.depth_mask;K=d.frontFace;da=g.frontFace;T=d.lineWidth;ma=g.lineWidth;ra=d.stencil_mask;Ca=g.stencil_mask;a=h.next;a!==h.cur&&(a?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null),h.cur=a);e!==g.blend_enable&&(e?p.enable(3042):p.disable(3042),g.blend_enable=e);x!==g.cull_enable&&(x?p.enable(2884):p.disable(2884),g.cull_enable=x);N!==g.depth_enable&&
(N?p.enable(2929):p.disable(2929),g.depth_enable=N);H!==g.dither&&(H?p.enable(3024):p.disable(3024),g.dither=H);E!==g.polygonOffset_enable&&(E?p.enable(32823):p.disable(32823),g.polygonOffset_enable=E);S!==g.sample_alpha&&(S?p.enable(32926):p.disable(32926),g.sample_alpha=S);R!==g.sample_enable&&(R?p.enable(32928):p.disable(32928),g.sample_enable=R);I!==g.scissor_enable&&(I?p.enable(3089):p.disable(3089),g.scissor_enable=I);y!==g.stencil_enable&&(y?p.enable(2960):p.disable(2960),g.stencil_enable=
y);if(J[0]!==M[0]||J[1]!==M[1]||J[2]!==M[2]||J[3]!==M[3])p.blendColor(J[0],J[1],J[2],J[3]),M[0]=J[0],M[1]=J[1],M[2]=J[2],M[3]=J[3];if(U[0]!==v[0]||U[1]!==v[1])p.blendEquationSeparate(U[0],U[1]),v[0]=U[0],v[1]=U[1];if(A[0]!==F[0]||A[1]!==F[1]||A[2]!==F[2]||A[3]!==F[3])p.blendFuncSeparate(A[0],A[1],A[2],A[3]),F[0]=A[0],F[1]=A[1],F[2]=A[2],F[3]=A[3];if(Z[0]!==t[0]||Z[1]!==t[1]||Z[2]!==t[2]||Z[3]!==t[3])p.colorMask(Z[0],Z[1],Z[2],Z[3]),t[0]=Z[0],t[1]=Z[1],t[2]=Z[2],t[3]=Z[3];k!==P&&(p.cullFace(k),g.cull_face=
k);Q!==za&&(p.depthFunc(Q),g.depth_func=Q);oa!==w&&(p.depthMask(oa),g.depth_mask=oa);if(V[0]!==m[0]||V[1]!==m[1])p.depthRange(V[0],V[1]),m[0]=V[0],m[1]=V[1];K!==da&&(p.frontFace(K),g.frontFace=K);T!==ma&&(p.lineWidth(T),g.lineWidth=T);if(u[0]!==ja[0]||u[1]!==ja[1])p.polygonOffset(u[0],u[1]),ja[0]=u[0],ja[1]=u[1];if(b[0]!==z[0]||b[1]!==z[1])p.sampleCoverage(b[0],b[1]),z[0]=b[0],z[1]=b[1];if(W[0]!==f[0]||W[1]!==f[1]||W[2]!==f[2]||W[3]!==f[3])p.scissor(W[0],W[1],W[2],W[3]),f[0]=W[0],f[1]=W[1],f[2]=W[2],
f[3]=W[3];if(ba[0]!==G[0]||ba[1]!==G[1]||ba[2]!==G[2])p.stencilFunc(ba[0],ba[1],ba[2]),G[0]=ba[0],G[1]=ba[1],G[2]=ba[2];ra!==Ca&&(p.stencilMask(ra),g.stencil_mask=ra);if(q[0]!==ca[0]||q[1]!==ca[1]||q[2]!==ca[2]||q[3]!==ca[3])p.stencilOpSeparate(q[0],q[1],q[2],q[3]),ca[0]=q[0],ca[1]=q[1],ca[2]=q[2],ca[3]=q[3];if(D[0]!==C[0]||D[1]!==C[1]||D[2]!==C[2]||D[3]!==C[3])p.stencilOpSeparate(D[0],D[1],D[2],D[3]),C[0]=D[0],C[1]=D[1],C[2]=D[2],C[3]=D[3];if(c[0]!==l[0]||c[1]!==l[1]||c[2]!==l[2]||c[3]!==l[3])p.viewport(c[0],
c[1],c[2],c[3]),l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3]},refresh:function(){var a,e,x,H,S,Y,fa,R,I,y,k,P,Q,za,oa,w;g.dirty=!1;e=d.blend_enable;x=d.cull_enable;H=d.depth_enable;S=d.dither;Y=d.polygonOffset_enable;fa=d.sample_alpha;R=d.sample_enable;I=d.scissor_enable;y=d.stencil_enable;k=d.cull_face;P=d.depth_func;Q=d.depth_mask;za=d.frontFace;oa=d.lineWidth;w=d.stencil_mask;(a=h.next)?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null);h.cur=a;a=N[0];a.buffer?(p.enableVertexAttribArray(0),
p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(0),p.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=N[1];a.buffer?(p.enableVertexAttribArray(1),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(1),p.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=N[2];a.buffer?(p.enableVertexAttribArray(2),p.bindBuffer(34962,a.buffer.buffer),
p.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(2),p.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=N[3];a.buffer?(p.enableVertexAttribArray(3),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(3),p.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=N[4];a.buffer?(p.enableVertexAttribArray(4),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(4,a.size,
a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(4),p.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=N[5];a.buffer?(p.enableVertexAttribArray(5),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(5),p.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=N[6];a.buffer?(p.enableVertexAttribArray(6),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):
(p.disableVertexAttribArray(6),p.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=N[7];a.buffer?(p.enableVertexAttribArray(7),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(7),p.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=N[8];a.buffer?(p.enableVertexAttribArray(8),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(8),
p.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=N[9];a.buffer?(p.enableVertexAttribArray(9),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(9),p.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=N[10];a.buffer?(p.enableVertexAttribArray(10),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(10),p.vertexAttrib4f(10,a.x,a.y,
a.z,a.w),a.buffer=null);a=N[11];a.buffer?(p.enableVertexAttribArray(11),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(11),p.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=N[12];a.buffer?(p.enableVertexAttribArray(12),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(12),p.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);
a=N[13];a.buffer?(p.enableVertexAttribArray(13),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(13),p.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=N[14];a.buffer?(p.enableVertexAttribArray(14),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(14),p.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=N[15];a.buffer?(p.enableVertexAttribArray(15),
p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(15),p.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);E.currentVAO=null;E.setVAO(E.targetVAO);e?p.enable(3042):p.disable(3042);g.blend_enable=e;x?p.enable(2884):p.disable(2884);g.cull_enable=x;H?p.enable(2929):p.disable(2929);g.depth_enable=H;S?p.enable(3024):p.disable(3024);g.dither=S;Y?p.enable(32823):p.disable(32823);g.polygonOffset_enable=Y;fa?p.enable(32926):
p.disable(32926);g.sample_alpha=fa;R?p.enable(32928):p.disable(32928);g.sample_enable=R;I?p.enable(3089):p.disable(3089);g.scissor_enable=I;y?p.enable(2960):p.disable(2960);g.stencil_enable=y;p.blendColor(J[0],J[1],J[2],J[3]);M[0]=J[0];M[1]=J[1];M[2]=J[2];M[3]=J[3];p.blendEquationSeparate(U[0],U[1]);v[0]=U[0];v[1]=U[1];p.blendFuncSeparate(A[0],A[1],A[2],A[3]);F[0]=A[0];F[1]=A[1];F[2]=A[2];F[3]=A[3];p.colorMask(Z[0],Z[1],Z[2],Z[3]);t[0]=Z[0];t[1]=Z[1];t[2]=Z[2];t[3]=Z[3];p.cullFace(k);g.cull_face=
k;p.depthFunc(P);g.depth_func=P;p.depthMask(Q);g.depth_mask=Q;p.depthRange(V[0],V[1]);m[0]=V[0];m[1]=V[1];p.frontFace(za);g.frontFace=za;p.lineWidth(oa);g.lineWidth=oa;p.polygonOffset(u[0],u[1]);ja[0]=u[0];ja[1]=u[1];p.sampleCoverage(b[0],b[1]);z[0]=b[0];z[1]=b[1];p.scissor(W[0],W[1],W[2],W[3]);f[0]=W[0];f[1]=W[1];f[2]=W[2];f[3]=W[3];p.stencilFunc(ba[0],ba[1],ba[2]);G[0]=ba[0];G[1]=ba[1];G[2]=ba[2];p.stencilMask(w);g.stencil_mask=w;p.stencilOpSeparate(q[0],q[1],q[2],q[3]);ca[0]=q[0];ca[1]=q[1];ca[2]=
q[2];ca[3]=q[3];p.stencilOpSeparate(D[0],D[1],D[2],D[3]);C[0]=D[0];C[1]=D[1];C[2]=D[2];C[3]=D[3];p.viewport(c[0],c[1],c[2],c[3]);l[0]=c[0];l[1]=c[1];l[2]=c[2];l[3]=c[3]}}},$7:function(e,S,H,N,g,h,p,d){var E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,X,Y,fa,R;E=e.context;J=e.current;M=e.framebuffer;U=e.gl;v=e.next;A=e.shader;F=e.vao;Z=v.blend_color;t=J.blend_color;V=v.blend_equation;m=J.blend_equation;u=v.blend_func;ja=J.blend_func;b=v.colorMask;z=J.colorMask;W=v.depth_range;f=J.depth_range;
ba=v.polygonOffset_offset;G=J.polygonOffset_offset;q=v.sample_coverage;ca=J.sample_coverage;D=v.scissor_box;C=J.scissor_box;c=v.stencil_func;l=J.stencil_func;a=v.stencil_opBack;wa=J.stencil_opBack;x=v.stencil_opFront;na=J.stencil_opFront;X=v.viewport;Y=J.viewport;fa={};R={};return{draw:function(d){var p,k,e,R,D,oa,w,K,da,T;p=d.framebuffer;k=M.getFramebuffer(p);p&&!k&&S.commandRaise(g,H);p=M.next;M.next=k;e=E.framebufferWidth;E.framebufferWidth=k?k.width:E.drawingBufferWidth;R=E.framebufferHeight;
E.framebufferHeight=k?k.height:E.drawingBufferHeight;k!==M.cur&&(k?U.bindFramebuffer(36160,k.framebuffer):U.bindFramebuffer(36160,null),M.cur=k);if(J.dirty){k=v.dither;k!==J.dither&&(k?U.enable(3024):U.disable(3024),J.dither=k);k=v.blend_enable;k!==J.blend_enable&&(k?U.enable(3042):U.disable(3042),J.blend_enable=k);k=Z[0];w=Z[1];D=Z[2];oa=Z[3];if(k!==t[0]||w!==t[1]||D!==t[2]||oa!==t[3])U.blendColor(k,w,D,oa),t[0]=k,t[1]=w,t[2]=D,t[3]=oa;k=V[0];w=V[1];if(k!==m[0]||w!==m[1])U.blendEquationSeparate(k,
w),m[0]=k,m[1]=w;k=u[0];w=u[1];D=u[2];oa=u[3];if(k!==ja[0]||w!==ja[1]||D!==ja[2]||oa!==ja[3])U.blendFuncSeparate(k,w,D,oa),ja[0]=k,ja[1]=w,ja[2]=D,ja[3]=oa;k=v.depth_enable;k!==J.depth_enable&&(k?U.enable(2929):U.disable(2929),J.depth_enable=k);k=v.depth_func;k!==J.depth_func&&(U.depthFunc(k),J.depth_func=k);k=W[0];w=W[1];if(k!==f[0]||w!==f[1])U.depthRange(k,w),f[0]=k,f[1]=w;k=v.depth_mask;k!==J.depth_mask&&(U.depthMask(k),J.depth_mask=k);k=b[0];w=b[1];D=b[2];oa=b[3];if(k!==z[0]||w!==z[1]||D!==z[2]||
oa!==z[3])U.colorMask(k,w,D,oa),z[0]=k,z[1]=w,z[2]=D,z[3]=oa;k=v.cull_enable;k!==J.cull_enable&&(k?U.enable(2884):U.disable(2884),J.cull_enable=k);k=v.cull_face;k!==J.cull_face&&(U.cullFace(k),J.cull_face=k);k=v.frontFace;k!==J.frontFace&&(U.frontFace(k),J.frontFace=k);k=v.lineWidth;k!==J.lineWidth&&(U.lineWidth(k),J.lineWidth=k);k=v.polygonOffset_enable;k!==J.polygonOffset_enable&&(k?U.enable(32823):U.disable(32823),J.polygonOffset_enable=k);k=ba[0];w=ba[1];if(k!==G[0]||w!==G[1])U.polygonOffset(k,
w),G[0]=k,G[1]=w;k=v.sample_alpha;k!==J.sample_alpha&&(k?U.enable(32926):U.disable(32926),J.sample_alpha=k);k=v.sample_enable;k!==J.sample_enable&&(k?U.enable(32928):U.disable(32928),J.sample_enable=k);k=q[0];w=q[1];if(k!==ca[0]||w!==ca[1])U.sampleCoverage(k,w),ca[0]=k,ca[1]=w;k=v.stencil_enable;k!==J.stencil_enable&&(k?U.enable(2960):U.disable(2960),J.stencil_enable=k);k=v.stencil_mask;k!==J.stencil_mask&&(U.stencilMask(k),J.stencil_mask=k);k=c[0];w=c[1];D=c[2];if(k!==l[0]||w!==l[1]||D!==l[2])U.stencilFunc(k,
w,D),l[0]=k,l[1]=w,l[2]=D;k=x[0];w=x[1];D=x[2];oa=x[3];if(k!==na[0]||w!==na[1]||D!==na[2]||oa!==na[3])U.stencilOpSeparate(k,w,D,oa),na[0]=k,na[1]=w,na[2]=D,na[3]=oa;k=a[0];w=a[1];D=a[2];oa=a[3];if(k!==wa[0]||w!==wa[1]||D!==wa[2]||oa!==wa[3])U.stencilOpSeparate(k,w,D,oa),wa[0]=k,wa[1]=w,wa[2]=D,wa[3]=oa;k=v.scissor_enable;k!==J.scissor_enable&&(k?U.enable(3089):U.disable(3089),J.scissor_enable=k)}D=E.framebufferWidth;oa=E.framebufferHeight;k=E.viewportWidth;E.viewportWidth=D;w=E.viewportHeight;E.viewportHeight=
oa;U.viewport(0,0,D,oa);Y[0]=0;Y[1]=0;Y[2]=D;Y[3]=oa;D=E.framebufferWidth;oa=E.framebufferHeight;U.scissor(0,0,D,oa);C[0]=0;C[1]=0;C[2]=D;C[3]=oa;if(D=J.profile)K=performance.now(),N.count++;oa=A.program(A.vert,A.frag,H);U.useProgram(oa.program);F.setVAO(null);da=oa.id;(T=fa[da])||(T=fa[da]=h(oa));T.call(this,d);J.dirty=!0;F.setVAO(null);M.next=p;E.framebufferWidth=e;E.framebufferHeight=R;E.viewportWidth=k;E.viewportHeight=w;D&&(N.cpuTime+=performance.now()-K)},scope:function(a,c,b){var d,f,h,l,w,
g,q,e,x,m,z,t,R,C,G;d=a.framebuffer;f=M.getFramebuffer(d);d&&!f&&S.commandRaise(p,H);d=M.next;M.next=f;h=E.framebufferWidth;E.framebufferWidth=f?f.width:E.drawingBufferWidth;l=E.framebufferHeight;E.framebufferHeight=f?f.height:E.drawingBufferHeight;w=E.framebufferWidth;g=E.framebufferHeight;f=E.viewportWidth;E.viewportWidth=w;q=E.viewportHeight;E.viewportHeight=g;e=X[0];X[0]=0;x=X[1];X[1]=0;m=X[2];X[2]=w;w=X[3];X[3]=g;z=E.framebufferWidth;t=E.framebufferHeight;g=D[0];D[0]=0;R=D[1];D[1]=0;C=D[2];D[2]=
z;z=D[3];D[3]=t;if(t=J.profile)G=performance.now(),N.count++;J.dirty=!0;c(E,a,b);M.next=d;E.framebufferWidth=h;E.framebufferHeight=l;E.viewportWidth=f;E.viewportHeight=q;X[0]=e;X[1]=x;X[2]=m;X[3]=w;D[0]=g;D[1]=R;D[2]=C;D[3]=z;t&&(N.cpuTime+=performance.now()-G);J.dirty=!0},batch:function(h,p){var k,g,e,C,D;if(J.dirty){k=v.dither;k!==J.dither&&(k?U.enable(3024):U.disable(3024),J.dither=k);k=v.blend_enable;k!==J.blend_enable&&(k?U.enable(3042):U.disable(3042),J.blend_enable=k);k=Z[0];e=Z[1];C=Z[2];
D=Z[3];if(k!==t[0]||e!==t[1]||C!==t[2]||D!==t[3])U.blendColor(k,e,C,D),t[0]=k,t[1]=e,t[2]=C,t[3]=D;k=V[0];e=V[1];if(k!==m[0]||e!==m[1])U.blendEquationSeparate(k,e),m[0]=k,m[1]=e;k=u[0];e=u[1];C=u[2];D=u[3];if(k!==ja[0]||e!==ja[1]||C!==ja[2]||D!==ja[3])U.blendFuncSeparate(k,e,C,D),ja[0]=k,ja[1]=e,ja[2]=C,ja[3]=D;k=v.depth_enable;k!==J.depth_enable&&(k?U.enable(2929):U.disable(2929),J.depth_enable=k);k=v.depth_func;k!==J.depth_func&&(U.depthFunc(k),J.depth_func=k);k=W[0];e=W[1];if(k!==f[0]||e!==f[1])U.depthRange(k,
e),f[0]=k,f[1]=e;k=v.depth_mask;k!==J.depth_mask&&(U.depthMask(k),J.depth_mask=k);k=b[0];e=b[1];C=b[2];D=b[3];if(k!==z[0]||e!==z[1]||C!==z[2]||D!==z[3])U.colorMask(k,e,C,D),z[0]=k,z[1]=e,z[2]=C,z[3]=D;k=v.cull_enable;k!==J.cull_enable&&(k?U.enable(2884):U.disable(2884),J.cull_enable=k);k=v.cull_face;k!==J.cull_face&&(U.cullFace(k),J.cull_face=k);k=v.frontFace;k!==J.frontFace&&(U.frontFace(k),J.frontFace=k);k=v.lineWidth;k!==J.lineWidth&&(U.lineWidth(k),J.lineWidth=k);k=v.polygonOffset_enable;k!==
J.polygonOffset_enable&&(k?U.enable(32823):U.disable(32823),J.polygonOffset_enable=k);k=ba[0];e=ba[1];if(k!==G[0]||e!==G[1])U.polygonOffset(k,e),G[0]=k,G[1]=e;k=v.sample_alpha;k!==J.sample_alpha&&(k?U.enable(32926):U.disable(32926),J.sample_alpha=k);k=v.sample_enable;k!==J.sample_enable&&(k?U.enable(32928):U.disable(32928),J.sample_enable=k);k=q[0];e=q[1];if(k!==ca[0]||e!==ca[1])U.sampleCoverage(k,e),ca[0]=k,ca[1]=e;k=v.stencil_enable;k!==J.stencil_enable&&(k?U.enable(2960):U.disable(2960),J.stencil_enable=
k);k=v.stencil_mask;k!==J.stencil_mask&&(U.stencilMask(k),J.stencil_mask=k);k=c[0];e=c[1];C=c[2];if(k!==l[0]||e!==l[1]||C!==l[2])U.stencilFunc(k,e,C),l[0]=k,l[1]=e,l[2]=C;k=x[0];e=x[1];C=x[2];D=x[3];if(k!==na[0]||e!==na[1]||C!==na[2]||D!==na[3])U.stencilOpSeparate(k,e,C,D),na[0]=k,na[1]=e,na[2]=C,na[3]=D;k=a[0];e=a[1];C=a[2];D=a[3];if(k!==wa[0]||e!==wa[1]||C!==wa[2]||D!==wa[3])U.stencilOpSeparate(k,e,C,D),wa[0]=k,wa[1]=e,wa[2]=C,wa[3]=D;k=v.scissor_enable;k!==J.scissor_enable&&(k?U.enable(3089):U.disable(3089),
J.scissor_enable=k)}if(k=J.profile)g=performance.now(),N.count+=p;e=A.program(A.vert,A.frag,H);U.useProgram(e.program);F.setVAO(null);C=e.id;(D=R[C])||(D=R[C]=d(e));D.call(this,h,p);J.dirty=!0;F.setVAO(null);k&&(N.cpuTime+=performance.now()-g)}}},$5:function(e,S,H,N,g,h){var p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,X,Y;p=e.context;d=e.current;E=e.framebuffer;J=e.gl;M=e.next;U=e.shader;v=e.vao;A=M.blend_color;F=d.blend_color;Z=M.blend_equation;t=d.blend_equation;V=M.blend_func;
m=d.blend_func;u=M.colorMask;ja=d.colorMask;b=M.depth_range;z=d.depth_range;W=M.polygonOffset_offset;f=d.polygonOffset_offset;ba=M.sample_coverage;G=d.sample_coverage;q=M.scissor_box;ca=d.scissor_box;D=M.stencil_func;C=d.stencil_func;c=M.stencil_opBack;l=d.stencil_opBack;a=M.stencil_opFront;wa=d.stencil_opFront;x=M.viewport;na=d.viewport;X={};Y={};return{draw:function(h){var p,e,y,k,P;p=E.next;p!==E.cur&&(p?J.bindFramebuffer(36160,p.framebuffer):J.bindFramebuffer(36160,null),E.cur=p);if(d.dirty){p=
M.dither;p!==d.dither&&(p?J.enable(3024):J.disable(3024),d.dither=p);p=M.blend_enable;p!==d.blend_enable&&(p?J.enable(3042):J.disable(3042),d.blend_enable=p);p=A[0];y=A[1];k=A[2];P=A[3];if(p!==F[0]||y!==F[1]||k!==F[2]||P!==F[3])J.blendColor(p,y,k,P),F[0]=p,F[1]=y,F[2]=k,F[3]=P;p=Z[0];y=Z[1];if(p!==t[0]||y!==t[1])J.blendEquationSeparate(p,y),t[0]=p,t[1]=y;p=V[0];y=V[1];k=V[2];P=V[3];if(p!==m[0]||y!==m[1]||k!==m[2]||P!==m[3])J.blendFuncSeparate(p,y,k,P),m[0]=p,m[1]=y,m[2]=k,m[3]=P;p=M.depth_enable;
p!==d.depth_enable&&(p?J.enable(2929):J.disable(2929),d.depth_enable=p);p=M.depth_func;p!==d.depth_func&&(J.depthFunc(p),d.depth_func=p);p=b[0];y=b[1];if(p!==z[0]||y!==z[1])J.depthRange(p,y),z[0]=p,z[1]=y;p=M.depth_mask;p!==d.depth_mask&&(J.depthMask(p),d.depth_mask=p);p=u[0];y=u[1];k=u[2];P=u[3];if(p!==ja[0]||y!==ja[1]||k!==ja[2]||P!==ja[3])J.colorMask(p,y,k,P),ja[0]=p,ja[1]=y,ja[2]=k,ja[3]=P;p=M.cull_enable;p!==d.cull_enable&&(p?J.enable(2884):J.disable(2884),d.cull_enable=p);p=M.cull_face;p!==
d.cull_face&&(J.cullFace(p),d.cull_face=p);p=M.frontFace;p!==d.frontFace&&(J.frontFace(p),d.frontFace=p);p=M.lineWidth;p!==d.lineWidth&&(J.lineWidth(p),d.lineWidth=p);p=M.polygonOffset_enable;p!==d.polygonOffset_enable&&(p?J.enable(32823):J.disable(32823),d.polygonOffset_enable=p);p=W[0];y=W[1];if(p!==f[0]||y!==f[1])J.polygonOffset(p,y),f[0]=p,f[1]=y;p=M.sample_alpha;p!==d.sample_alpha&&(p?J.enable(32926):J.disable(32926),d.sample_alpha=p);p=M.sample_enable;p!==d.sample_enable&&(p?J.enable(32928):
J.disable(32928),d.sample_enable=p);p=ba[0];y=ba[1];if(p!==G[0]||y!==G[1])J.sampleCoverage(p,y),G[0]=p,G[1]=y;p=M.stencil_enable;p!==d.stencil_enable&&(p?J.enable(2960):J.disable(2960),d.stencil_enable=p);p=M.stencil_mask;p!==d.stencil_mask&&(J.stencilMask(p),d.stencil_mask=p);p=D[0];y=D[1];k=D[2];if(p!==C[0]||y!==C[1]||k!==C[2])J.stencilFunc(p,y,k),C[0]=p,C[1]=y,C[2]=k;p=a[0];y=a[1];k=a[2];P=a[3];if(p!==wa[0]||y!==wa[1]||k!==wa[2]||P!==wa[3])J.stencilOpSeparate(p,y,k,P),wa[0]=p,wa[1]=y,wa[2]=k,wa[3]=
P;p=c[0];y=c[1];k=c[2];P=c[3];if(p!==l[0]||y!==l[1]||k!==l[2]||P!==l[3])J.stencilOpSeparate(p,y,k,P),l[0]=p,l[1]=y,l[2]=k,l[3]=P;p=M.scissor_enable;p!==d.scissor_enable&&(p?J.enable(3089):J.disable(3089),d.scissor_enable=p);p=q[0];y=q[1];k=q[2];P=q[3];if(p!==ca[0]||y!==ca[1]||k!==ca[2]||P!==ca[3])J.scissor(p,y,k,P),ca[0]=p,ca[1]=y,ca[2]=k,ca[3]=P;p=x[0];y=x[1];k=x[2];P=x[3];if(p!==na[0]||y!==na[1]||k!==na[2]||P!==na[3])J.viewport(p,y,k,P),na[0]=p,na[1]=y,na[2]=k,na[3]=P;d.dirty=!1}if(p=d.profile)e=
performance.now(),N.count++;y=U.program(U.vert,U.frag,H);J.useProgram(y.program);v.setVAO(null);k=y.id;(P=X[k])||(P=X[k]=g(y));P.call(this,h);v.setVAO(null);p&&(N.cpuTime+=performance.now()-e)},scope:function(a,c,b){var f,h;if(f=d.profile)h=performance.now(),N.count++;c(p,a,b);f&&(N.cpuTime+=performance.now()-h)},batch:function(p,e){var g,y,k,P,Q;g=E.next;g!==E.cur&&(g?J.bindFramebuffer(36160,g.framebuffer):J.bindFramebuffer(36160,null),E.cur=g);if(d.dirty){g=M.dither;g!==d.dither&&(g?J.enable(3024):
J.disable(3024),d.dither=g);g=M.blend_enable;g!==d.blend_enable&&(g?J.enable(3042):J.disable(3042),d.blend_enable=g);g=A[0];k=A[1];P=A[2];Q=A[3];if(g!==F[0]||k!==F[1]||P!==F[2]||Q!==F[3])J.blendColor(g,k,P,Q),F[0]=g,F[1]=k,F[2]=P,F[3]=Q;g=Z[0];k=Z[1];if(g!==t[0]||k!==t[1])J.blendEquationSeparate(g,k),t[0]=g,t[1]=k;g=V[0];k=V[1];P=V[2];Q=V[3];if(g!==m[0]||k!==m[1]||P!==m[2]||Q!==m[3])J.blendFuncSeparate(g,k,P,Q),m[0]=g,m[1]=k,m[2]=P,m[3]=Q;g=M.depth_enable;g!==d.depth_enable&&(g?J.enable(2929):J.disable(2929),
d.depth_enable=g);g=M.depth_func;g!==d.depth_func&&(J.depthFunc(g),d.depth_func=g);g=b[0];k=b[1];if(g!==z[0]||k!==z[1])J.depthRange(g,k),z[0]=g,z[1]=k;g=M.depth_mask;g!==d.depth_mask&&(J.depthMask(g),d.depth_mask=g);g=u[0];k=u[1];P=u[2];Q=u[3];if(g!==ja[0]||k!==ja[1]||P!==ja[2]||Q!==ja[3])J.colorMask(g,k,P,Q),ja[0]=g,ja[1]=k,ja[2]=P,ja[3]=Q;g=M.cull_enable;g!==d.cull_enable&&(g?J.enable(2884):J.disable(2884),d.cull_enable=g);g=M.cull_face;g!==d.cull_face&&(J.cullFace(g),d.cull_face=g);g=M.frontFace;
g!==d.frontFace&&(J.frontFace(g),d.frontFace=g);g=M.lineWidth;g!==d.lineWidth&&(J.lineWidth(g),d.lineWidth=g);g=M.polygonOffset_enable;g!==d.polygonOffset_enable&&(g?J.enable(32823):J.disable(32823),d.polygonOffset_enable=g);g=W[0];k=W[1];if(g!==f[0]||k!==f[1])J.polygonOffset(g,k),f[0]=g,f[1]=k;g=M.sample_alpha;g!==d.sample_alpha&&(g?J.enable(32926):J.disable(32926),d.sample_alpha=g);g=M.sample_enable;g!==d.sample_enable&&(g?J.enable(32928):J.disable(32928),d.sample_enable=g);g=ba[0];k=ba[1];if(g!==
G[0]||k!==G[1])J.sampleCoverage(g,k),G[0]=g,G[1]=k;g=M.stencil_enable;g!==d.stencil_enable&&(g?J.enable(2960):J.disable(2960),d.stencil_enable=g);g=M.stencil_mask;g!==d.stencil_mask&&(J.stencilMask(g),d.stencil_mask=g);g=D[0];k=D[1];P=D[2];if(g!==C[0]||k!==C[1]||P!==C[2])J.stencilFunc(g,k,P),C[0]=g,C[1]=k,C[2]=P;g=a[0];k=a[1];P=a[2];Q=a[3];if(g!==wa[0]||k!==wa[1]||P!==wa[2]||Q!==wa[3])J.stencilOpSeparate(g,k,P,Q),wa[0]=g,wa[1]=k,wa[2]=P,wa[3]=Q;g=c[0];k=c[1];P=c[2];Q=c[3];if(g!==l[0]||k!==l[1]||P!==
l[2]||Q!==l[3])J.stencilOpSeparate(g,k,P,Q),l[0]=g,l[1]=k,l[2]=P,l[3]=Q;g=M.scissor_enable;g!==d.scissor_enable&&(g?J.enable(3089):J.disable(3089),d.scissor_enable=g);g=q[0];k=q[1];P=q[2];Q=q[3];if(g!==ca[0]||k!==ca[1]||P!==ca[2]||Q!==ca[3])J.scissor(g,k,P,Q),ca[0]=g,ca[1]=k,ca[2]=P,ca[3]=Q;g=x[0];k=x[1];P=x[2];Q=x[3];if(g!==na[0]||k!==na[1]||P!==na[2]||Q!==na[3])J.viewport(g,k,P,Q),na[0]=g,na[1]=k,na[2]=P,na[3]=Q;d.dirty=!1}if(g=d.profile)y=performance.now(),N.count+=e;k=U.program(U.vert,U.frag,
H);J.useProgram(k.program);v.setVAO(null);P=k.id;(Q=Y[P])||(Q=Y[P]=h(k));Q.call(this,p,e);v.setVAO(null);g&&(N.cpuTime+=performance.now()-y)}}},"$26,color,freq,phase,projection,time,view":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l){var a,wa,x,na,X,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,ia,Gb,ha;a=e.attributes;wa=e.context;x=e.current;na=e.draw;X=e.elements;Y=e.framebuffer;fa=e.gl;R=e.isArrayLike;I=e.next;y=e.shader;k=e.uniforms;
P=e.vao;Q=I.blend_color;za=x.blend_color;oa=I.blend_equation;w=x.blend_equation;K=I.blend_func;da=x.blend_func;T=I.colorMask;ma=x.colorMask;ra=I.depth_range;Ca=x.depth_range;xa=I.polygonOffset_offset;ga=x.polygonOffset_offset;Da=I.sample_coverage;ka=x.sample_coverage;pa=I.scissor_box;Aa=x.scissor_box;Ha=I.stencil_func;O=x.stencil_func;ac=I.stencil_opBack;Ua=x.stencil_opBack;r=I.stencil_opFront;n=x.stencil_opFront;B=I.viewport;ua=x.viewport;va=new Float32Array(16);ia=new Float32Array(16);Gb=new Float32Array(16);
ha=new Float32Array(16);return{draw:function(b){var f,k,e,m;f=Y.next;f!==Y.cur&&(f?fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),Y.cur=f);if(x.dirty){var z;f=I.dither;f!==x.dither&&(f?fa.enable(3024):fa.disable(3024),x.dither=f);f=I.blend_enable;f!==x.blend_enable&&(f?fa.enable(3042):fa.disable(3042),x.blend_enable=f);f=Q[0];e=Q[1];m=Q[2];z=Q[3];if(f!==za[0]||e!==za[1]||m!==za[2]||z!==za[3])fa.blendColor(f,e,m,z),za[0]=f,za[1]=e,za[2]=m,za[3]=z;f=oa[0];e=oa[1];if(f!==w[0]||
e!==w[1])fa.blendEquationSeparate(f,e),w[0]=f,w[1]=e;f=K[0];e=K[1];m=K[2];z=K[3];if(f!==da[0]||e!==da[1]||m!==da[2]||z!==da[3])fa.blendFuncSeparate(f,e,m,z),da[0]=f,da[1]=e,da[2]=m,da[3]=z;f=I.depth_enable;f!==x.depth_enable&&(f?fa.enable(2929):fa.disable(2929),x.depth_enable=f);f=I.depth_func;f!==x.depth_func&&(fa.depthFunc(f),x.depth_func=f);f=ra[0];e=ra[1];if(f!==Ca[0]||e!==Ca[1])fa.depthRange(f,e),Ca[0]=f,Ca[1]=e;f=I.depth_mask;f!==x.depth_mask&&(fa.depthMask(f),x.depth_mask=f);f=T[0];e=T[1];
m=T[2];z=T[3];if(f!==ma[0]||e!==ma[1]||m!==ma[2]||z!==ma[3])fa.colorMask(f,e,m,z),ma[0]=f,ma[1]=e,ma[2]=m,ma[3]=z;f=I.cull_enable;f!==x.cull_enable&&(f?fa.enable(2884):fa.disable(2884),x.cull_enable=f);f=I.cull_face;f!==x.cull_face&&(fa.cullFace(f),x.cull_face=f);f=I.frontFace;f!==x.frontFace&&(fa.frontFace(f),x.frontFace=f);f=I.lineWidth;f!==x.lineWidth&&(fa.lineWidth(f),x.lineWidth=f);f=I.polygonOffset_enable;f!==x.polygonOffset_enable&&(f?fa.enable(32823):fa.disable(32823),x.polygonOffset_enable=
f);f=xa[0];e=xa[1];if(f!==ga[0]||e!==ga[1])fa.polygonOffset(f,e),ga[0]=f,ga[1]=e;f=I.sample_alpha;f!==x.sample_alpha&&(f?fa.enable(32926):fa.disable(32926),x.sample_alpha=f);f=I.sample_enable;f!==x.sample_enable&&(f?fa.enable(32928):fa.disable(32928),x.sample_enable=f);f=Da[0];e=Da[1];if(f!==ka[0]||e!==ka[1])fa.sampleCoverage(f,e),ka[0]=f,ka[1]=e;f=I.stencil_enable;f!==x.stencil_enable&&(f?fa.enable(2960):fa.disable(2960),x.stencil_enable=f);f=I.stencil_mask;f!==x.stencil_mask&&(fa.stencilMask(f),
x.stencil_mask=f);f=Ha[0];e=Ha[1];m=Ha[2];if(f!==O[0]||e!==O[1]||m!==O[2])fa.stencilFunc(f,e,m),O[0]=f,O[1]=e,O[2]=m;f=r[0];e=r[1];m=r[2];z=r[3];if(f!==n[0]||e!==n[1]||m!==n[2]||z!==n[3])fa.stencilOpSeparate(f,e,m,z),n[0]=f,n[1]=e,n[2]=m,n[3]=z;f=ac[0];e=ac[1];m=ac[2];z=ac[3];if(f!==Ua[0]||e!==Ua[1]||m!==Ua[2]||z!==Ua[3])fa.stencilOpSeparate(f,e,m,z),Ua[0]=f,Ua[1]=e,Ua[2]=m,Ua[3]=z;f=I.scissor_enable;f!==x.scissor_enable&&(f?fa.enable(3089):fa.disable(3089),x.scissor_enable=f);f=pa[0];e=pa[1];m=pa[2];
z=pa[3];if(f!==Aa[0]||e!==Aa[1]||m!==Aa[2]||z!==Aa[3])fa.scissor(f,e,m,z),Aa[0]=f,Aa[1]=e,Aa[2]=m,Aa[3]=z;f=B[0];e=B[1];m=B[2];z=B[3];if(f!==ua[0]||e!==ua[1]||m!==ua[2]||z!==ua[3])fa.viewport(f,e,m,z),ua[0]=f,ua[1]=e,ua[2]=m,ua[3]=z;x.dirty=!1}if(f=x.profile)k=performance.now(),N.count++;fa.useProgram(g.program);P.setVAO(null);e=ca.location;m=a[e];m.buffer||fa.enableVertexAttribArray(e);if(5126!==m.type||4!==m.size||m.buffer!==h||!1!==m.normalized||0!==m.offset||44!==m.stride)fa.bindBuffer(34962,
h.buffer),fa.vertexAttribPointer(e,4,5126,!1,44,0),m.type=5126,m.size=4,m.buffer=h,m.normalized=!1,m.offset=0,m.stride=44;e=D.location;m=a[e];m.buffer||fa.enableVertexAttribArray(e);if(5126!==m.type||4!==m.size||m.buffer!==p||!1!==m.normalized||16!==m.offset||44!==m.stride)fa.bindBuffer(34962,p.buffer),fa.vertexAttribPointer(e,4,5126,!1,44,16),m.type=5126,m.size=4,m.buffer=p,m.normalized=!1,m.offset=16,m.stride=44;e=q.location;m=a[e];m.buffer||fa.enableVertexAttribArray(e);if(5126!==m.type||3!==m.size||
m.buffer!==d||!1!==m.normalized||32!==m.offset||44!==m.stride)fa.bindBuffer(34962,d.buffer),fa.vertexAttribPointer(e,3,5126,!1,44,32),m.type=5126,m.size=3,m.buffer=d,m.normalized=!1,m.offset=32,m.stride=44;e=E.call(this,wa,b,0);"number"!==typeof e&&S.commandRaise(J,H);fa.uniform1f(c.location,e);e=M.call(this,wa,b,0);R(e)&&16===e.length||S.commandRaise(U,H);fa.uniformMatrix4fv(l.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(va[0]=e[0],va[1]=e[1],va[2]=e[2],va[3]=e[3],va[4]=e[4],va[5]=
e[5],va[6]=e[6],va[7]=e[7],va[8]=e[8],va[9]=e[9],va[10]=e[10],va[11]=e[11],va[12]=e[12],va[13]=e[13],va[14]=e[14],va[15]=e[15],va));b=v.call(this,wa,b,0);R(b)&&16===b.length||S.commandRaise(A,H);fa.uniformMatrix4fv(C.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(ia[0]=b[0],ia[1]=b[1],ia[2]=b[2],ia[3]=b[3],ia[4]=b[4],ia[5]=b[5],ia[6]=b[6],ia[7]=b[7],ia[8]=b[8],ia[9]=b[9],ia[10]=b[10],ia[11]=b[11],ia[12]=b[12],ia[13]=b[13],ia[14]=b[14],ia[15]=b[15],ia));(b=na.elements)?fa.bindBuffer(34963,
b.buffer.buffer):P.currentVAO&&(b=X.getElements(P.currentVAO.elements))&&fa.bindBuffer(34963,b.buffer.buffer);e=na.offset;b?fa.drawElements(0,1E4,b.type,e<<(b.type-5121>>1)):fa.drawArrays(0,e,1E4);P.setVAO(null);f&&(N.cpuTime+=performance.now()-k)},scope:function(a,c,b){var f,n,l,r,w,e,g,B,O,q,z,C,K,D,G,T,ga,ha,I,ac,v,A,Ha,H,J,P,E,da,ua,M,R,Q,S,xa,U,ra,W,ka,Y,ba,za,Ua,fa,ca,ja;if(f=x.profile)n=performance.now(),N.count++;l=na.count;na.count=1E4;r=na.primitive;na.primitive=0;w=F.call(this,wa,a,b);
e=k[5];k[5]=w;g=Z.call(this,wa,a,b);w=k[3];k[3]=g;B=t.call(this,wa,a,b);g=k[4];k[4]=B;B=V.buffer;V.buffer=d;O=V.divisor;V.divisor=0;q=V.normalized;V.normalized=!1;z=V.offset;V.offset=32;C=V.size;V.size=0;K=V.state;V.state=1;D=V.stride;V.stride=44;G=V.type;V.type=5126;T=V.w;V.w=0;ga=V.x;V.x=0;ha=V.y;V.y=0;I=V.z;V.z=0;ac=m.buffer;m.buffer=h;v=m.divisor;m.divisor=0;A=m.normalized;m.normalized=!1;Ha=m.offset;m.offset=0;H=m.size;m.size=0;J=m.state;m.state=1;P=m.stride;m.stride=44;E=m.type;m.type=5126;
da=m.w;m.w=0;ua=m.x;m.x=0;M=m.y;m.y=0;R=m.z;m.z=0;Q=u.buffer;u.buffer=p;S=u.divisor;u.divisor=0;xa=u.normalized;u.normalized=!1;U=u.offset;u.offset=16;ra=u.size;u.size=0;W=u.state;u.state=1;ka=u.stride;u.stride=44;Y=u.type;u.type=5126;ba=u.w;u.w=0;za=u.x;u.x=0;Ua=u.y;u.y=0;fa=u.z;u.z=0;ca=y.vert;y.vert=2;ja=y.frag;y.frag=1;c(wa,a,b);f&&(N.cpuTime+=performance.now()-n);na.count=l;na.primitive=r;k[5]=e;k[3]=w;k[4]=g;V.buffer=B;V.divisor=O;V.normalized=q;V.offset=z;V.size=C;V.state=K;V.stride=D;V.type=
G;V.w=T;V.x=ga;V.y=ha;V.z=I;m.buffer=ac;m.divisor=v;m.normalized=A;m.offset=Ha;m.size=H;m.state=J;m.stride=P;m.type=E;m.w=da;m.x=ua;m.y=M;m.z=R;u.buffer=Q;u.divisor=S;u.normalized=xa;u.offset=U;u.size=ra;u.state=W;u.stride=ka;u.type=Y;u.w=ba;u.x=za;u.y=Ua;u.z=fa;y.vert=ca;y.frag=ja},batch:function(k,e){var g,m,t;g=Y.next;g!==Y.cur&&(g?fa.bindFramebuffer(36160,g.framebuffer):fa.bindFramebuffer(36160,null),Y.cur=g);if(x.dirty){var y,v,A;g=I.dither;g!==x.dither&&(g?fa.enable(3024):fa.disable(3024),x.dither=
g);g=I.blend_enable;g!==x.blend_enable&&(g?fa.enable(3042):fa.disable(3042),x.blend_enable=g);g=Q[0];y=Q[1];v=Q[2];A=Q[3];if(g!==za[0]||y!==za[1]||v!==za[2]||A!==za[3])fa.blendColor(g,y,v,A),za[0]=g,za[1]=y,za[2]=v,za[3]=A;g=oa[0];y=oa[1];if(g!==w[0]||y!==w[1])fa.blendEquationSeparate(g,y),w[0]=g,w[1]=y;g=K[0];y=K[1];v=K[2];A=K[3];if(g!==da[0]||y!==da[1]||v!==da[2]||A!==da[3])fa.blendFuncSeparate(g,y,v,A),da[0]=g,da[1]=y,da[2]=v,da[3]=A;g=I.depth_enable;g!==x.depth_enable&&(g?fa.enable(2929):fa.disable(2929),
x.depth_enable=g);g=I.depth_func;g!==x.depth_func&&(fa.depthFunc(g),x.depth_func=g);g=ra[0];y=ra[1];if(g!==Ca[0]||y!==Ca[1])fa.depthRange(g,y),Ca[0]=g,Ca[1]=y;g=I.depth_mask;g!==x.depth_mask&&(fa.depthMask(g),x.depth_mask=g);g=T[0];y=T[1];v=T[2];A=T[3];if(g!==ma[0]||y!==ma[1]||v!==ma[2]||A!==ma[3])fa.colorMask(g,y,v,A),ma[0]=g,ma[1]=y,ma[2]=v,ma[3]=A;g=I.cull_enable;g!==x.cull_enable&&(g?fa.enable(2884):fa.disable(2884),x.cull_enable=g);g=I.cull_face;g!==x.cull_face&&(fa.cullFace(g),x.cull_face=g);
g=I.frontFace;g!==x.frontFace&&(fa.frontFace(g),x.frontFace=g);g=I.lineWidth;g!==x.lineWidth&&(fa.lineWidth(g),x.lineWidth=g);g=I.polygonOffset_enable;g!==x.polygonOffset_enable&&(g?fa.enable(32823):fa.disable(32823),x.polygonOffset_enable=g);g=xa[0];y=xa[1];if(g!==ga[0]||y!==ga[1])fa.polygonOffset(g,y),ga[0]=g,ga[1]=y;g=I.sample_alpha;g!==x.sample_alpha&&(g?fa.enable(32926):fa.disable(32926),x.sample_alpha=g);g=I.sample_enable;g!==x.sample_enable&&(g?fa.enable(32928):fa.disable(32928),x.sample_enable=
g);g=Da[0];y=Da[1];if(g!==ka[0]||y!==ka[1])fa.sampleCoverage(g,y),ka[0]=g,ka[1]=y;g=I.stencil_enable;g!==x.stencil_enable&&(g?fa.enable(2960):fa.disable(2960),x.stencil_enable=g);g=I.stencil_mask;g!==x.stencil_mask&&(fa.stencilMask(g),x.stencil_mask=g);g=Ha[0];y=Ha[1];v=Ha[2];if(g!==O[0]||y!==O[1]||v!==O[2])fa.stencilFunc(g,y,v),O[0]=g,O[1]=y,O[2]=v;g=r[0];y=r[1];v=r[2];A=r[3];if(g!==n[0]||y!==n[1]||v!==n[2]||A!==n[3])fa.stencilOpSeparate(g,y,v,A),n[0]=g,n[1]=y,n[2]=v,n[3]=A;g=ac[0];y=ac[1];v=ac[2];
A=ac[3];if(g!==Ua[0]||y!==Ua[1]||v!==Ua[2]||A!==Ua[3])fa.stencilOpSeparate(g,y,v,A),Ua[0]=g,Ua[1]=y,Ua[2]=v,Ua[3]=A;g=I.scissor_enable;g!==x.scissor_enable&&(g?fa.enable(3089):fa.disable(3089),x.scissor_enable=g);g=pa[0];y=pa[1];v=pa[2];A=pa[3];if(g!==Aa[0]||y!==Aa[1]||v!==Aa[2]||A!==Aa[3])fa.scissor(g,y,v,A),Aa[0]=g,Aa[1]=y,Aa[2]=v,Aa[3]=A;g=B[0];y=B[1];v=B[2];A=B[3];if(g!==ua[0]||y!==ua[1]||v!==ua[2]||A!==ua[3])fa.viewport(g,y,v,A),ua[0]=g,ua[1]=y,ua[2]=v,ua[3]=A;x.dirty=!1}if(g=x.profile)m=performance.now(),
N.count+=e;fa.useProgram(ja.program);P.setVAO(null);y=ca.location;v=a[y];v.buffer||fa.enableVertexAttribArray(y);if(5126!==v.type||4!==v.size||v.buffer!==h||!1!==v.normalized||0!==v.offset||44!==v.stride)fa.bindBuffer(34962,h.buffer),fa.vertexAttribPointer(y,4,5126,!1,44,0),v.type=5126,v.size=4,v.buffer=h,v.normalized=!1,v.offset=0,v.stride=44;y=D.location;v=a[y];v.buffer||fa.enableVertexAttribArray(y);if(5126!==v.type||4!==v.size||v.buffer!==p||!1!==v.normalized||16!==v.offset||44!==v.stride)fa.bindBuffer(34962,
p.buffer),fa.vertexAttribPointer(y,4,5126,!1,44,16),v.type=5126,v.size=4,v.buffer=p,v.normalized=!1,v.offset=16,v.stride=44;y=q.location;v=a[y];v.buffer||fa.enableVertexAttribArray(y);if(5126!==v.type||3!==v.size||v.buffer!==d||!1!==v.normalized||32!==v.offset||44!==v.stride)fa.bindBuffer(34962,d.buffer),fa.vertexAttribPointer(y,3,5126,!1,44,32),v.type=5126,v.size=3,v.buffer=d,v.normalized=!1,v.offset=32,v.stride=44;y=b.call(this,wa,void 0,t);"number"!==typeof y&&S.commandRaise(z,H);fa.uniform1f(c.location,
y);y=W.call(this,wa,void 0,t);R(y)&&16===y.length||S.commandRaise(f,H);fa.uniformMatrix4fv(l.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(Gb[0]=y[0],Gb[1]=y[1],Gb[2]=y[2],Gb[3]=y[3],Gb[4]=y[4],Gb[5]=y[5],Gb[6]=y[6],Gb[7]=y[7],Gb[8]=y[8],Gb[9]=y[9],Gb[10]=y[10],Gb[11]=y[11],Gb[12]=y[12],Gb[13]=y[13],Gb[14]=y[14],Gb[15]=y[15],Gb));t=ba.call(this,wa,void 0,t);R(t)&&16===t.length||S.commandRaise(G,H);fa.uniformMatrix4fv(C.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(ha[0]=
t[0],ha[1]=t[1],ha[2]=t[2],ha[3]=t[3],ha[4]=t[4],ha[5]=t[5],ha[6]=t[6],ha[7]=t[7],ha[8]=t[8],ha[9]=t[9],ha[10]=t[10],ha[11]=t[11],ha[12]=t[12],ha[13]=t[13],ha[14]=t[14],ha[15]=t[15],ha));(y=na.elements)?fa.bindBuffer(34963,y.buffer.buffer):P.currentVAO&&(y=X.getElements(P.currentVAO.elements))&&fa.bindBuffer(34963,y.buffer.buffer);v=na.offset;for(t=0;t<e;++t)y?fa.drawElements(0,1E4,y.type,v<<(y.type-5121>>1)):fa.drawArrays(0,v,1E4);P.setVAO(null);g&&(N.cpuTime+=performance.now()-m)}}},"$34,atlas,normal,position,projection,uv,view":function(e,
S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,X,Y,fa,R){var I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,ia,Gb,ha,L,sa,Ea,qa,ya,Ia,la,aa,ta,Ka,Ba;I=e.attributes;y=e.buffer;k=e.context;P=e.current;Q=e.draw;za=e.elements;oa=e.framebuffer;w=e.gl;K=e.isArrayLike;da=e.isBufferArgs;T=e.next;ma=e.shader;ra=e.uniforms;Ca=e.vao;xa=T.blend_color;ga=P.blend_color;Da=T.blend_equation;ka=P.blend_equation;pa=T.blend_func;Aa=P.blend_func;Ha=T.colorMask;
O=P.colorMask;ac=T.depth_range;Ua=P.depth_range;r=T.polygonOffset_offset;n=P.polygonOffset_offset;B=T.sample_coverage;ua=P.sample_coverage;va=T.scissor_box;ia=P.scissor_box;Gb=T.stencil_func;ha=P.stencil_func;L=T.stencil_opBack;sa=P.stencil_opBack;Ea=T.stencil_opFront;qa=P.stencil_opFront;ya=T.viewport;Ia=P.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa=new Float32Array(16);ta=new Float32Array(16);Ka=new Float32Array(16);Ba=new Float32Array(16);
return{draw:function(a){var c,b,f,l,e,m,q,z,t,C,D,G,u,Q,ra,W,V,Z,ba,ca,ja,ma,wa,Ba,Ka,Fa,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb,ab,nb;c=k.view;b=g.call(this,k,a,0);k.view=b;f=oa.next;f!==oa.cur&&(f?w.bindFramebuffer(36160,f.framebuffer):w.bindFramebuffer(36160,null),oa.cur=f);if(P.dirty){var Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,
zc,uc,bb;Va=T.dither;Va!==P.dither&&(Va?w.enable(3024):w.disable(3024),P.dither=Va);vd=T.blend_enable;vd!==P.blend_enable&&(vd?w.enable(3042):w.disable(3042),P.blend_enable=vd);Hb=xa[0];Ib=xa[1];qc=xa[2];Nb=xa[3];if(Hb!==ga[0]||Ib!==ga[1]||qc!==ga[2]||Nb!==ga[3])w.blendColor(Hb,Ib,qc,Nb),ga[0]=Hb,ga[1]=Ib,ga[2]=qc,ga[3]=Nb;ib=Da[0];Fb=Da[1];if(ib!==ka[0]||Fb!==ka[1])w.blendEquationSeparate(ib,Fb),ka[0]=ib,ka[1]=Fb;Cb=pa[0];vb=pa[1];gb=pa[2];Xb=pa[3];if(Cb!==Aa[0]||vb!==Aa[1]||gb!==Aa[2]||Xb!==Aa[3])w.blendFuncSeparate(Cb,
vb,gb,Xb),Aa[0]=Cb,Aa[1]=vb,Aa[2]=gb,Aa[3]=Xb;Ob=T.depth_enable;Ob!==P.depth_enable&&(Ob?w.enable(2929):w.disable(2929),P.depth_enable=Ob);pb=T.depth_func;pb!==P.depth_func&&(w.depthFunc(pb),P.depth_func=pb);Sa=ac[0];Tb=ac[1];if(Sa!==Ua[0]||Tb!==Ua[1])w.depthRange(Sa,Tb),Ua[0]=Sa,Ua[1]=Tb;yb=T.depth_mask;yb!==P.depth_mask&&(w.depthMask(yb),P.depth_mask=yb);ic=Ha[0];hb=Ha[1];ob=Ha[2];Ja=Ha[3];if(ic!==O[0]||hb!==O[1]||ob!==O[2]||Ja!==O[3])w.colorMask(ic,hb,ob,Ja),O[0]=ic,O[1]=hb,O[2]=ob,O[3]=Ja;qb=
T.frontFace;qb!==P.frontFace&&(w.frontFace(qb),P.frontFace=qb);La=T.lineWidth;La!==P.lineWidth&&(w.lineWidth(La),P.lineWidth=La);eb=T.polygonOffset_enable;eb!==P.polygonOffset_enable&&(eb?w.enable(32823):w.disable(32823),P.polygonOffset_enable=eb);fb=r[0];Ma=r[1];if(fb!==n[0]||Ma!==n[1])w.polygonOffset(fb,Ma),n[0]=fb,n[1]=Ma;jb=T.sample_alpha;jb!==P.sample_alpha&&(jb?w.enable(32926):w.disable(32926),P.sample_alpha=jb);Wa=T.sample_enable;Wa!==P.sample_enable&&(Wa?w.enable(32928):w.disable(32928),P.sample_enable=
Wa);sb=B[0];rb=B[1];if(sb!==ua[0]||rb!==ua[1])w.sampleCoverage(sb,rb),ua[0]=sb,ua[1]=rb;Pa=T.stencil_enable;Pa!==P.stencil_enable&&(Pa?w.enable(2960):w.disable(2960),P.stencil_enable=Pa);Bc=T.stencil_mask;Bc!==P.stencil_mask&&(w.stencilMask(Bc),P.stencil_mask=Bc);Ra=Gb[0];Jb=Gb[1];Db=Gb[2];if(Ra!==ha[0]||Jb!==ha[1]||Db!==ha[2])w.stencilFunc(Ra,Jb,Db),ha[0]=Ra,ha[1]=Jb,ha[2]=Db;Na=Ea[0];yd=Ea[1];Ya=Ea[2];Kb=Ea[3];if(Na!==qa[0]||yd!==qa[1]||Ya!==qa[2]||Kb!==qa[3])w.stencilOpSeparate(Na,yd,Ya,Kb),qa[0]=
Na,qa[1]=yd,qa[2]=Ya,qa[3]=Kb;Lb=L[0];kb=L[1];Oa=L[2];Yb=L[3];if(Lb!==sa[0]||kb!==sa[1]||Oa!==sa[2]||Yb!==sa[3])w.stencilOpSeparate(Lb,kb,Oa,Yb),sa[0]=Lb,sa[1]=kb,sa[2]=Oa,sa[3]=Yb;Qa=T.scissor_enable;Qa!==P.scissor_enable&&(Qa?w.enable(3089):w.disable(3089),P.scissor_enable=Qa);tb=va[0];ub=va[1];Ta=va[2];mb=va[3];if(tb!==ia[0]||ub!==ia[1]||Ta!==ia[2]||mb!==ia[3])w.scissor(tb,ub,Ta,mb),ia[0]=tb,ia[1]=ub,ia[2]=Ta,ia[3]=mb;fc=ya[0];zc=ya[1];uc=ya[2];bb=ya[3];if(fc!==Ia[0]||zc!==Ia[1]||uc!==Ia[2]||bb!==
Ia[3])w.viewport(fc,zc,uc,bb),Ia[0]=fc,Ia[1]=zc,Ia[2]=uc,Ia[3]=bb}w.enable(2884);P.cull_enable=!0;w.cullFace(1029);P.cull_face=1029;if(l=P.profile)e=performance.now(),N.count++;w.useProgram(h.program);Ca.setVAO(null);(m=a.position)&&("object"===typeof m||"function"===typeof m)&&(da(m)||y.getBuffer(m)||y.getBuffer(m.buffer)||da(m.buffer)||"constant"in m&&("number"===typeof m.constant||K(m.constant)))||S.commandRaise(p,H);q=!1;z=null;t=!1;D=C=0;G=1;u=0;Q=5126;Z=V=W=ra=0;da(m)?(q=!0,z=y.createStream(34962,
m),Q=z.dtype):(z=y.getBuffer(m))?Q=z.dtype:"constant"in m?(G=2,"number"===typeof m.constant?(W=m.constant,V=Z=ra=0):(W=0<m.constant.length?m.constant[0]:0,V=1<m.constant.length?m.constant[1]:0,Z=2<m.constant.length?m.constant[2]:0,ra=3<m.constant.length?m.constant[3]:0)):(z=da(m.buffer)?y.createStream(34962,m.buffer):y.getBuffer(m.buffer),Q="type"in m?la[m.type]:z.dtype,t=!!m.normalized,D=m.size|0,C=m.offset|0,u=m.stride|0);ba=X.location;ca=I[ba];if(1===G){if(ca.buffer||w.enableVertexAttribArray(ba),
ja=D||3,ca.type!==Q||ca.size!==ja||ca.buffer!==z||ca.normalized!==t||ca.offset!==C||ca.stride!==u)w.bindBuffer(34962,z.buffer),w.vertexAttribPointer(ba,ja,Q,t,u,C),ca.type=Q,ca.size=ja,ca.buffer=z,ca.normalized=t,ca.offset=C,ca.stride=u}else if(ca.buffer&&(w.disableVertexAttribArray(ba),ca.buffer=null),ca.x!==W||ca.y!==V||ca.z!==Z||ca.w!==ra)w.vertexAttrib4f(ba,W,V,Z,ra),ca.x=W,ca.y=V,ca.z=Z,ca.w=ra;(ma=a.normal)&&("object"===typeof ma||"function"===typeof ma)&&(da(ma)||y.getBuffer(ma)||y.getBuffer(ma.buffer)||
da(ma.buffer)||"constant"in ma&&("number"===typeof ma.constant||K(ma.constant)))||S.commandRaise(d,H);wa=!1;Ba=null;Ka=!1;Bd=Fa=0;$d=1;ld=0;$c=5126;Gc=nd=Lc=rd=0;da(ma)?(wa=!0,Ba=y.createStream(34962,ma),$c=Ba.dtype):(Ba=y.getBuffer(ma))?$c=Ba.dtype:"constant"in ma?($d=2,"number"===typeof ma.constant?(Lc=ma.constant,nd=Gc=rd=0):(Lc=0<ma.constant.length?ma.constant[0]:0,nd=1<ma.constant.length?ma.constant[1]:0,Gc=2<ma.constant.length?ma.constant[2]:0,rd=3<ma.constant.length?ma.constant[3]:0)):(Ba=
da(ma.buffer)?y.createStream(34962,ma.buffer):y.getBuffer(ma.buffer),$c="type"in ma?la[ma.type]:Ba.dtype,Ka=!!ma.normalized,Bd=ma.size|0,Fa=ma.offset|0,ld=ma.stride|0);dd=na.location;Pc=I[dd];if(1===$d){if(Pc.buffer||w.enableVertexAttribArray(dd),kd=Bd||3,Pc.type!==$c||Pc.size!==kd||Pc.buffer!==Ba||Pc.normalized!==Ka||Pc.offset!==Fa||Pc.stride!==ld)w.bindBuffer(34962,Ba.buffer),w.vertexAttribPointer(dd,kd,$c,Ka,ld,Fa),Pc.type=$c,Pc.size=kd,Pc.buffer=Ba,Pc.normalized=Ka,Pc.offset=Fa,Pc.stride=ld}else if(Pc.buffer&&
(w.disableVertexAttribArray(dd),Pc.buffer=null),Pc.x!==Lc||Pc.y!==nd||Pc.z!==Gc||Pc.w!==rd)w.vertexAttrib4f(dd,Lc,nd,Gc,rd),Pc.x=Lc,Pc.y=nd,Pc.z=Gc,Pc.w=rd;(Ab=a.uv)&&("object"===typeof Ab||"function"===typeof Ab)&&(da(Ab)||y.getBuffer(Ab)||y.getBuffer(Ab.buffer)||da(Ab.buffer)||"constant"in Ab&&("number"===typeof Ab.constant||K(Ab.constant)))||S.commandRaise(E,H);Eb=!1;tc=null;wb=!1;Bb=wc=0;Jc=1;lc=0;Hc=5126;dc=Dc=Vc=Wc=0;da(Ab)?(Eb=!0,tc=y.createStream(34962,Ab),Hc=tc.dtype):(tc=y.getBuffer(Ab))?
Hc=tc.dtype:"constant"in Ab?(Jc=2,"number"===typeof Ab.constant?(Vc=Ab.constant,Dc=dc=Wc=0):(Vc=0<Ab.constant.length?Ab.constant[0]:0,Dc=1<Ab.constant.length?Ab.constant[1]:0,dc=2<Ab.constant.length?Ab.constant[2]:0,Wc=3<Ab.constant.length?Ab.constant[3]:0)):(tc=da(Ab.buffer)?y.createStream(34962,Ab.buffer):y.getBuffer(Ab.buffer),Hc="type"in Ab?la[Ab.type]:tc.dtype,wb=!!Ab.normalized,Bb=Ab.size|0,wc=Ab.offset|0,lc=Ab.stride|0);Ic=fa.location;oc=I[Ic];if(1===Jc){if(oc.buffer||w.enableVertexAttribArray(Ic),
pc=Bb||2,oc.type!==Hc||oc.size!==pc||oc.buffer!==tc||oc.normalized!==wb||oc.offset!==wc||oc.stride!==lc)w.bindBuffer(34962,tc.buffer),w.vertexAttribPointer(Ic,pc,Hc,wb,lc,wc),oc.type=Hc,oc.size=pc,oc.buffer=tc,oc.normalized=wb,oc.offset=wc,oc.stride=lc}else if(oc.buffer&&(w.disableVertexAttribArray(Ic),oc.buffer=null),oc.x!==Vc||oc.y!==Dc||oc.z!==dc||oc.w!==Wc)w.vertexAttrib4f(Ic,Vc,Dc,dc,Wc),oc.x=Vc,oc.y=Dc,oc.z=dc,oc.w=Wc;mc=J.call(this,k,a,0);K(mc)&&16===mc.length||S.commandRaise(M,H);w.uniformMatrix4fv(Y.location,
!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(aa[0]=mc[0],aa[1]=mc[1],aa[2]=mc[2],aa[3]=mc[3],aa[4]=mc[4],aa[5]=mc[5],aa[6]=mc[6],aa[7]=mc[7],aa[8]=mc[8],aa[9]=mc[9],aa[10]=mc[10],aa[11]=mc[11],aa[12]=mc[12],aa[13]=mc[13],aa[14]=mc[14],aa[15]=mc[15],aa));ec=k.view;K(ec)&&16===ec.length||S.commandRaise(U,H);w.uniformMatrix4fv(R.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(ta[0]=ec[0],ta[1]=ec[1],ta[2]=ec[2],ta[3]=ec[3],ta[4]=ec[4],ta[5]=ec[5],ta[6]=ec[6],ta[7]=ec[7],ta[8]=ec[8],
ta[9]=ec[9],ta[10]=ec[10],ta[11]=ec[11],ta[12]=ec[12],ta[13]=ec[13],ta[14]=ec[14],ta[15]=ec[15],ta));($a=a.atlas)&&"framebuffer"===$a._reglType&&($a=$a.color[0]);"function"===typeof $a&&"texture2d"===$a._reglType||S.commandRaise(v,H);Fc=$a._texture;w.uniform1i(x.location,Fc.bind());xb=a.elements;cb=null;(Mb=da(xb))?cb=za.createStream(xb):(cb=za.getElements(xb),xb&&!cb&&S.commandRaise(A,H));cb&&w.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;nb=cb?cb.vertCount:-1;0<=nb||S.commandRaise(F,H);
nb&&(cb?w.drawElements(ab,nb,cb.type,0<<(cb.type-5121>>1)):w.drawArrays(ab,0,nb),P.dirty=!0,Ca.setVAO(null),k.view=c,l&&(N.cpuTime+=performance.now()-e),q&&y.destroyStream(z),wa&&y.destroyStream(Ba),Eb&&y.destroyStream(tc),Fc.unbind(),Mb&&za.destroyStream(cb))},scope:function(a,c,d){var f,h,n,l,p,g,r,w,e,B,L,O,q,x,C,v,D,G,A,ga,ha,I,ac,Ha,J,sa,F,E,Ea,ua,M,R,qa,aa,xa,U,ka,Y,ba,ca,Ua,fa,ya,pa,Da,Aa,wa,va,na,Ia,Ca,Gb,oa,X,ia,ta,Ba,Cc,Ka,td,Va,Fa,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,
qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb;f=k.view;h=Z.call(this,k,a,d);k.view=h;n=T.cull_enable;T.cull_enable=!0;l=T.cull_face;T.cull_face=1029;if(p=P.profile)g=performance.now(),N.count++;r=a.elements;w=null;(e=da(r))?w=za.createStream(r):(w=za.getElements(r),r&&!w&&S.commandRaise(t,H));B=Q.elements;Q.elements=w;L=Q.offset;Q.offset=0;O=w?w.vertCount:-1;q=Q.count;Q.count=O;x=w?w.primType:4;C=Q.primitive;Q.primitive=x;v=a.atlas;D=ra[5];ra[5]=v;G=V.call(this,k,a,d);A=ra[3];ra[3]=
G;ga=k.view;ha=ra[4];ra[4]=ga;(I=a.normal)&&("object"===typeof I||"function"===typeof I)&&(da(I)||y.getBuffer(I)||y.getBuffer(I.buffer)||da(I.buffer)||"constant"in I&&("number"===typeof I.constant||K(I.constant)))||S.commandRaise(m,H);ac=!1;Ha=null;J=0;sa=!1;E=F=0;Ea=1;ua=0;M=5126;xa=aa=qa=R=0;da(I)?(ac=!0,Ha=y.createStream(34962,I),M=Ha.dtype):(Ha=y.getBuffer(I))?M=Ha.dtype:"constant"in I?(Ea=2,"number"===typeof I.constant?(qa=I.constant,aa=xa=R=0):(qa=0<I.constant.length?I.constant[0]:0,aa=1<I.constant.length?
I.constant[1]:0,xa=2<I.constant.length?I.constant[2]:0,R=3<I.constant.length?I.constant[3]:0)):(Ha=da(I.buffer)?y.createStream(34962,I.buffer):y.getBuffer(I.buffer),M="type"in I?la[I.type]:Ha.dtype,sa=!!I.normalized,E=I.size|0,F=I.offset|0,ua=I.stride|0,J=I.divisor|0);U=u.buffer;u.buffer=Ha;ka=u.divisor;u.divisor=J;Y=u.normalized;u.normalized=sa;ba=u.offset;u.offset=F;ca=u.size;u.size=E;Ua=u.state;u.state=Ea;fa=u.stride;u.stride=ua;ya=u.type;u.type=M;pa=u.w;u.w=R;Da=u.x;u.x=qa;Aa=u.y;u.y=aa;wa=u.z;
u.z=xa;(va=a.position)&&("object"===typeof va||"function"===typeof va)&&(da(va)||y.getBuffer(va)||y.getBuffer(va.buffer)||da(va.buffer)||"constant"in va&&("number"===typeof va.constant||K(va.constant)))||S.commandRaise(ja,H);na=!1;Ia=null;Ca=0;Gb=!1;X=oa=0;ia=1;ta=0;Ba=5126;Va=td=Ka=Cc=0;da(va)?(na=!0,Ia=y.createStream(34962,va),Ba=Ia.dtype):(Ia=y.getBuffer(va))?Ba=Ia.dtype:"constant"in va?(ia=2,"number"===typeof va.constant?(Ka=va.constant,td=Va=Cc=0):(Ka=0<va.constant.length?va.constant[0]:0,td=
1<va.constant.length?va.constant[1]:0,Va=2<va.constant.length?va.constant[2]:0,Cc=3<va.constant.length?va.constant[3]:0)):(Ia=da(va.buffer)?y.createStream(34962,va.buffer):y.getBuffer(va.buffer),Ba="type"in va?la[va.type]:Ia.dtype,Gb=!!va.normalized,X=va.size|0,oa=va.offset|0,ta=va.stride|0,Ca=va.divisor|0);Fa=b.buffer;b.buffer=Ia;Hb=b.divisor;b.divisor=Ca;Ib=b.normalized;b.normalized=Gb;qc=b.offset;b.offset=oa;Nb=b.size;b.size=X;ib=b.state;b.state=ia;Fb=b.stride;b.stride=ta;Cb=b.type;b.type=Ba;vb=
b.w;b.w=Cc;gb=b.x;b.x=Ka;Xb=b.y;b.y=td;Ob=b.z;b.z=Va;(pb=a.uv)&&("object"===typeof pb||"function"===typeof pb)&&(da(pb)||y.getBuffer(pb)||y.getBuffer(pb.buffer)||da(pb.buffer)||"constant"in pb&&("number"===typeof pb.constant||K(pb.constant)))||S.commandRaise(z,H);Sa=!1;Tb=null;yb=0;ic=!1;ob=hb=0;Ja=1;qb=0;La=5126;jb=Ma=fb=eb=0;da(pb)?(Sa=!0,Tb=y.createStream(34962,pb),La=Tb.dtype):(Tb=y.getBuffer(pb))?La=Tb.dtype:"constant"in pb?(Ja=2,"number"===typeof pb.constant?(fb=pb.constant,Ma=jb=eb=0):(fb=
0<pb.constant.length?pb.constant[0]:0,Ma=1<pb.constant.length?pb.constant[1]:0,jb=2<pb.constant.length?pb.constant[2]:0,eb=3<pb.constant.length?pb.constant[3]:0)):(Tb=da(pb.buffer)?y.createStream(34962,pb.buffer):y.getBuffer(pb.buffer),La="type"in pb?la[pb.type]:Tb.dtype,ic=!!pb.normalized,ob=pb.size|0,hb=pb.offset|0,qb=pb.stride|0,yb=pb.divisor|0);Wa=W.buffer;W.buffer=Tb;sb=W.divisor;W.divisor=yb;rb=W.normalized;W.normalized=ic;Pa=W.offset;W.offset=hb;Bc=W.size;W.size=ob;Ra=W.state;W.state=Ja;Jb=
W.stride;W.stride=qb;Db=W.type;W.type=La;Na=W.w;W.w=eb;yd=W.x;W.x=fb;Ya=W.y;W.y=Ma;Kb=W.z;W.z=jb;Lb=ma.vert;ma.vert=2;kb=ma.frag;ma.frag=1;P.dirty=!0;c(k,a,d);k.view=f;T.cull_enable=n;T.cull_face=l;p&&(N.cpuTime+=performance.now()-g);e&&za.destroyStream(w);Q.elements=B;Q.offset=L;Q.count=q;Q.primitive=C;ra[5]=D;ra[3]=A;ra[4]=ha;ac&&y.destroyStream(Ha);u.buffer=U;u.divisor=ka;u.normalized=Y;u.offset=ba;u.size=ca;u.state=Ua;u.stride=fa;u.type=ya;u.w=pa;u.x=Da;u.y=Aa;u.z=wa;na&&y.destroyStream(Ia);b.buffer=
Fa;b.divisor=Hb;b.normalized=Ib;b.offset=qc;b.size=Nb;b.state=ib;b.stride=Fb;b.type=Cb;b.w=vb;b.x=gb;b.y=Xb;b.z=Ob;Sa&&y.destroyStream(Tb);W.buffer=Wa;W.divisor=sb;W.normalized=rb;W.offset=Pa;W.size=Bc;W.state=Ra;W.stride=Jb;W.type=Db;W.w=Na;W.x=yd;W.y=Ya;W.z=Kb;ma.vert=Lb;ma.frag=kb;P.dirty=!0},batch:function(b,d){var h,p,g,e,m,z,t;h=k.view;p=f.call(this,k,b,0);k.view=p;g=oa.next;g!==oa.cur&&(g?w.bindFramebuffer(36160,g.framebuffer):w.bindFramebuffer(36160,null),oa.cur=g);if(P.dirty){var v,A,J,F,
u,E,M,Q,aa,ra,U,W,V,Z,ma,ja,ta,Fa,Bd,$d,ld,$c,rd,Lc,nd,Gc,dd,Pc,kd,Ab,Eb,tc,wb,wc,Bb,Jc,lc,Hc,Wc,Vc,Dc,dc,Ic,oc,pc,mc,ec,$a,Fc,xb,cb,Mb;v=T.dither;v!==P.dither&&(v?w.enable(3024):w.disable(3024),P.dither=v);A=T.blend_enable;A!==P.blend_enable&&(A?w.enable(3042):w.disable(3042),P.blend_enable=A);J=xa[0];F=xa[1];u=xa[2];E=xa[3];if(J!==ga[0]||F!==ga[1]||u!==ga[2]||E!==ga[3])w.blendColor(J,F,u,E),ga[0]=J,ga[1]=F,ga[2]=u,ga[3]=E;M=Da[0];Q=Da[1];if(M!==ka[0]||Q!==ka[1])w.blendEquationSeparate(M,Q),ka[0]=
M,ka[1]=Q;aa=pa[0];ra=pa[1];U=pa[2];W=pa[3];if(aa!==Aa[0]||ra!==Aa[1]||U!==Aa[2]||W!==Aa[3])w.blendFuncSeparate(aa,ra,U,W),Aa[0]=aa,Aa[1]=ra,Aa[2]=U,Aa[3]=W;V=T.depth_enable;V!==P.depth_enable&&(V?w.enable(2929):w.disable(2929),P.depth_enable=V);Z=T.depth_func;Z!==P.depth_func&&(w.depthFunc(Z),P.depth_func=Z);ma=ac[0];ja=ac[1];if(ma!==Ua[0]||ja!==Ua[1])w.depthRange(ma,ja),Ua[0]=ma,Ua[1]=ja;ta=T.depth_mask;ta!==P.depth_mask&&(w.depthMask(ta),P.depth_mask=ta);Fa=Ha[0];Bd=Ha[1];$d=Ha[2];ld=Ha[3];if(Fa!==
O[0]||Bd!==O[1]||$d!==O[2]||ld!==O[3])w.colorMask(Fa,Bd,$d,ld),O[0]=Fa,O[1]=Bd,O[2]=$d,O[3]=ld;$c=T.frontFace;$c!==P.frontFace&&(w.frontFace($c),P.frontFace=$c);rd=T.lineWidth;rd!==P.lineWidth&&(w.lineWidth(rd),P.lineWidth=rd);Lc=T.polygonOffset_enable;Lc!==P.polygonOffset_enable&&(Lc?w.enable(32823):w.disable(32823),P.polygonOffset_enable=Lc);nd=r[0];Gc=r[1];if(nd!==n[0]||Gc!==n[1])w.polygonOffset(nd,Gc),n[0]=nd,n[1]=Gc;dd=T.sample_alpha;dd!==P.sample_alpha&&(dd?w.enable(32926):w.disable(32926),
P.sample_alpha=dd);Pc=T.sample_enable;Pc!==P.sample_enable&&(Pc?w.enable(32928):w.disable(32928),P.sample_enable=Pc);kd=B[0];Ab=B[1];if(kd!==ua[0]||Ab!==ua[1])w.sampleCoverage(kd,Ab),ua[0]=kd,ua[1]=Ab;Eb=T.stencil_enable;Eb!==P.stencil_enable&&(Eb?w.enable(2960):w.disable(2960),P.stencil_enable=Eb);tc=T.stencil_mask;tc!==P.stencil_mask&&(w.stencilMask(tc),P.stencil_mask=tc);wb=Gb[0];wc=Gb[1];Bb=Gb[2];if(wb!==ha[0]||wc!==ha[1]||Bb!==ha[2])w.stencilFunc(wb,wc,Bb),ha[0]=wb,ha[1]=wc,ha[2]=Bb;Jc=Ea[0];
lc=Ea[1];Hc=Ea[2];Wc=Ea[3];if(Jc!==qa[0]||lc!==qa[1]||Hc!==qa[2]||Wc!==qa[3])w.stencilOpSeparate(Jc,lc,Hc,Wc),qa[0]=Jc,qa[1]=lc,qa[2]=Hc,qa[3]=Wc;Vc=L[0];Dc=L[1];dc=L[2];Ic=L[3];if(Vc!==sa[0]||Dc!==sa[1]||dc!==sa[2]||Ic!==sa[3])w.stencilOpSeparate(Vc,Dc,dc,Ic),sa[0]=Vc,sa[1]=Dc,sa[2]=dc,sa[3]=Ic;oc=T.scissor_enable;oc!==P.scissor_enable&&(oc?w.enable(3089):w.disable(3089),P.scissor_enable=oc);pc=va[0];mc=va[1];ec=va[2];$a=va[3];if(pc!==ia[0]||mc!==ia[1]||ec!==ia[2]||$a!==ia[3])w.scissor(pc,mc,ec,
$a),ia[0]=pc,ia[1]=mc,ia[2]=ec,ia[3]=$a;Fc=ya[0];xb=ya[1];cb=ya[2];Mb=ya[3];if(Fc!==Ia[0]||xb!==Ia[1]||cb!==Ia[2]||Mb!==Ia[3])w.viewport(Fc,xb,cb,Mb),Ia[0]=Fc,Ia[1]=xb,Ia[2]=cb,Ia[3]=Mb}w.enable(2884);P.cull_enable=!0;w.cullFace(1029);P.cull_face=1029;if(e=P.profile)m=performance.now(),N.count+=d;w.useProgram(ba.program);var ab,nb;Ca.setVAO(null);ab=D.call(this,k,t,z);K(ab)&&16===ab.length||S.commandRaise(C,H);w.uniformMatrix4fv(Y.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ka[0]=
ab[0],Ka[1]=ab[1],Ka[2]=ab[2],Ka[3]=ab[3],Ka[4]=ab[4],Ka[5]=ab[5],Ka[6]=ab[6],Ka[7]=ab[7],Ka[8]=ab[8],Ka[9]=ab[9],Ka[10]=ab[10],Ka[11]=ab[11],Ka[12]=ab[12],Ka[13]=ab[13],Ka[14]=ab[14],Ka[15]=ab[15],Ka));nb=k.view;K(nb)&&16===nb.length||S.commandRaise(c,H);w.uniformMatrix4fv(R.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(Ba[0]=nb[0],Ba[1]=nb[1],Ba[2]=nb[2],Ba[3]=nb[3],Ba[4]=nb[4],Ba[5]=nb[5],Ba[6]=nb[6],Ba[7]=nb[7],Ba[8]=nb[8],Ba[9]=nb[9],Ba[10]=nb[10],Ba[11]=nb[11],Ba[12]=nb[12],
Ba[13]=nb[13],Ba[14]=nb[14],Ba[15]=nb[15],Ba));for(z=0;z<d;++z){t=b[z];var Va,vd,Hb,Ib,qc,Nb,ib,Fb,Cb,vb,gb,Xb,Ob,pb,Sa,Tb,yb,ic,hb,ob,Ja,qb,La,eb,fb,Ma,jb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,kb,Oa,Yb,Qa,tb,ub,Ta,mb,fc,zc,uc,bb,jc,gd,Xa;(Va=t.position)&&("object"===typeof Va||"function"===typeof Va)&&(da(Va)||y.getBuffer(Va)||y.getBuffer(Va.buffer)||da(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||K(Va.constant)))||S.commandRaise(G,H);vd=!1;Hb=null;Ib=!1;Nb=qc=0;ib=1;Fb=0;Cb=5126;
Ob=Xb=gb=vb=0;da(Va)?(vd=!0,Hb=y.createStream(34962,Va),Cb=Hb.dtype):(Hb=y.getBuffer(Va))?Cb=Hb.dtype:"constant"in Va?(ib=2,"number"===typeof Va.constant?(gb=Va.constant,Xb=Ob=vb=0):(gb=0<Va.constant.length?Va.constant[0]:0,Xb=1<Va.constant.length?Va.constant[1]:0,Ob=2<Va.constant.length?Va.constant[2]:0,vb=3<Va.constant.length?Va.constant[3]:0)):(Hb=da(Va.buffer)?y.createStream(34962,Va.buffer):y.getBuffer(Va.buffer),Cb="type"in Va?la[Va.type]:Hb.dtype,Ib=!!Va.normalized,Nb=Va.size|0,qc=Va.offset|
0,Fb=Va.stride|0);pb=X.location;Sa=I[pb];if(1===ib){if(Sa.buffer||w.enableVertexAttribArray(pb),Tb=Nb||3,Sa.type!==Cb||Sa.size!==Tb||Sa.buffer!==Hb||Sa.normalized!==Ib||Sa.offset!==qc||Sa.stride!==Fb)w.bindBuffer(34962,Hb.buffer),w.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Sa.type=Cb,Sa.size=Tb,Sa.buffer=Hb,Sa.normalized=Ib,Sa.offset=qc,Sa.stride=Fb}else if(Sa.buffer&&(w.disableVertexAttribArray(pb),Sa.buffer=null),Sa.x!==gb||Sa.y!==Xb||Sa.z!==Ob||Sa.w!==vb)w.vertexAttrib4f(pb,gb,Xb,Ob,vb),Sa.x=gb,Sa.y=
Xb,Sa.z=Ob,Sa.w=vb;(yb=t.normal)&&("object"===typeof yb||"function"===typeof yb)&&(da(yb)||y.getBuffer(yb)||y.getBuffer(yb.buffer)||da(yb.buffer)||"constant"in yb&&("number"===typeof yb.constant||K(yb.constant)))||S.commandRaise(q,H);ic=!1;hb=null;ob=!1;qb=Ja=0;La=1;eb=0;fb=5126;sb=Wa=jb=Ma=0;da(yb)?(ic=!0,hb=y.createStream(34962,yb),fb=hb.dtype):(hb=y.getBuffer(yb))?fb=hb.dtype:"constant"in yb?(La=2,"number"===typeof yb.constant?(jb=yb.constant,Wa=sb=Ma=0):(jb=0<yb.constant.length?yb.constant[0]:
0,Wa=1<yb.constant.length?yb.constant[1]:0,sb=2<yb.constant.length?yb.constant[2]:0,Ma=3<yb.constant.length?yb.constant[3]:0)):(hb=da(yb.buffer)?y.createStream(34962,yb.buffer):y.getBuffer(yb.buffer),fb="type"in yb?la[yb.type]:hb.dtype,ob=!!yb.normalized,qb=yb.size|0,Ja=yb.offset|0,eb=yb.stride|0);rb=na.location;Pa=I[rb];if(1===La){if(Pa.buffer||w.enableVertexAttribArray(rb),Bc=qb||3,Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==hb||Pa.normalized!==ob||Pa.offset!==Ja||Pa.stride!==eb)w.bindBuffer(34962,
hb.buffer),w.vertexAttribPointer(rb,Bc,fb,ob,eb,Ja),Pa.type=fb,Pa.size=Bc,Pa.buffer=hb,Pa.normalized=ob,Pa.offset=Ja,Pa.stride=eb}else if(Pa.buffer&&(w.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==jb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==Ma)w.vertexAttrib4f(rb,jb,Wa,sb,Ma),Pa.x=jb,Pa.y=Wa,Pa.z=sb,Pa.w=Ma;(Ra=t.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(da(Ra)||y.getBuffer(Ra)||y.getBuffer(Ra.buffer)||da(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||K(Ra.constant)))||S.commandRaise(ca,
H);Jb=!1;Db=null;Na=!1;Ya=yd=0;Kb=1;Lb=0;kb=5126;tb=Qa=Yb=Oa=0;da(Ra)?(Jb=!0,Db=y.createStream(34962,Ra),kb=Db.dtype):(Db=y.getBuffer(Ra))?kb=Db.dtype:"constant"in Ra?(Kb=2,"number"===typeof Ra.constant?(Yb=Ra.constant,Qa=tb=Oa=0):(Yb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,tb=2<Ra.constant.length?Ra.constant[2]:0,Oa=3<Ra.constant.length?Ra.constant[3]:0)):(Db=da(Ra.buffer)?y.createStream(34962,Ra.buffer):y.getBuffer(Ra.buffer),kb="type"in Ra?la[Ra.type]:Db.dtype,
Na=!!Ra.normalized,Ya=Ra.size|0,yd=Ra.offset|0,Lb=Ra.stride|0);ub=fa.location;Ta=I[ub];if(1===Kb){if(Ta.buffer||w.enableVertexAttribArray(ub),mb=Ya||2,Ta.type!==kb||Ta.size!==mb||Ta.buffer!==Db||Ta.normalized!==Na||Ta.offset!==yd||Ta.stride!==Lb)w.bindBuffer(34962,Db.buffer),w.vertexAttribPointer(ub,mb,kb,Na,Lb,yd),Ta.type=kb,Ta.size=mb,Ta.buffer=Db,Ta.normalized=Na,Ta.offset=yd,Ta.stride=Lb}else if(Ta.buffer&&(w.disableVertexAttribArray(ub),Ta.buffer=null),Ta.x!==Yb||Ta.y!==Qa||Ta.z!==tb||Ta.w!==
Oa)w.vertexAttrib4f(ub,Yb,Qa,tb,Oa),Ta.x=Yb,Ta.y=Qa,Ta.z=tb,Ta.w=Oa;(fc=t.atlas)&&"framebuffer"===fc._reglType&&(fc=fc.color[0]);"function"===typeof fc&&"texture2d"===fc._reglType||S.commandRaise(l,H);zc=fc._texture;w.uniform1i(x.location,zc.bind());uc=t.elements;bb=null;(jc=da(uc))?bb=za.createStream(uc):(bb=za.getElements(uc),uc&&!bb&&S.commandRaise(a,H));bb&&w.bindBuffer(34963,bb.buffer.buffer);gd=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||S.commandRaise(wa,H);Xa&&(bb?w.drawElements(gd,Xa,bb.type,
0<<(bb.type-5121>>1)):w.drawArrays(gd,0,Xa),vd&&y.destroyStream(Hb),ic&&y.destroyStream(hb),Jb&&y.destroyStream(Db),zc.unbind(),jc&&za.destroyStream(bb))}P.dirty=!0;Ca.setVAO(null);k.view=h;e&&(N.cpuTime+=performance.now()-m)}}},"$7,color,position":function(e,S,H,N,g,h,p,d,E,J){var M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l,a,wa,x,na,X,Y,fa,R,I,y,k,P,Q;M=e.attributes;U=e.context;v=e.current;A=e.draw;F=e.elements;Z=e.framebuffer;t=e.gl;V=e.next;m=e.shader;u=e.uniforms;ja=e.vao;b=V.blend_color;
z=v.blend_color;W=V.blend_equation;f=v.blend_equation;ba=V.blend_func;G=v.blend_func;q=V.colorMask;ca=v.colorMask;D=V.depth_range;C=v.depth_range;c=V.polygonOffset_offset;l=v.polygonOffset_offset;a=V.sample_coverage;wa=v.sample_coverage;x=V.scissor_box;na=v.scissor_box;X=V.stencil_func;Y=v.stencil_func;fa=V.stencil_opBack;R=v.stencil_opBack;I=V.stencil_opFront;y=v.stencil_opFront;k=V.viewport;P=v.viewport;Q=[1,0,0,1];return{draw:function(d){var p,w,e,m;d=Z.next;d!==Z.cur&&(d?t.bindFramebuffer(36160,
d.framebuffer):t.bindFramebuffer(36160,null),Z.cur=d);if(v.dirty){d=V.dither;d!==v.dither&&(d?t.enable(3024):t.disable(3024),v.dither=d);d=V.blend_enable;d!==v.blend_enable&&(d?t.enable(3042):t.disable(3042),v.blend_enable=d);d=b[0];w=b[1];e=b[2];m=b[3];if(d!==z[0]||w!==z[1]||e!==z[2]||m!==z[3])t.blendColor(d,w,e,m),z[0]=d,z[1]=w,z[2]=e,z[3]=m;d=W[0];w=W[1];if(d!==f[0]||w!==f[1])t.blendEquationSeparate(d,w),f[0]=d,f[1]=w;d=ba[0];w=ba[1];e=ba[2];m=ba[3];if(d!==G[0]||w!==G[1]||e!==G[2]||m!==G[3])t.blendFuncSeparate(d,
w,e,m),G[0]=d,G[1]=w,G[2]=e,G[3]=m;d=V.depth_enable;d!==v.depth_enable&&(d?t.enable(2929):t.disable(2929),v.depth_enable=d);d=V.depth_func;d!==v.depth_func&&(t.depthFunc(d),v.depth_func=d);d=D[0];w=D[1];if(d!==C[0]||w!==C[1])t.depthRange(d,w),C[0]=d,C[1]=w;d=V.depth_mask;d!==v.depth_mask&&(t.depthMask(d),v.depth_mask=d);d=q[0];w=q[1];e=q[2];m=q[3];if(d!==ca[0]||w!==ca[1]||e!==ca[2]||m!==ca[3])t.colorMask(d,w,e,m),ca[0]=d,ca[1]=w,ca[2]=e,ca[3]=m;d=V.cull_enable;d!==v.cull_enable&&(d?t.enable(2884):
t.disable(2884),v.cull_enable=d);d=V.cull_face;d!==v.cull_face&&(t.cullFace(d),v.cull_face=d);d=V.frontFace;d!==v.frontFace&&(t.frontFace(d),v.frontFace=d);d=V.lineWidth;d!==v.lineWidth&&(t.lineWidth(d),v.lineWidth=d);d=V.polygonOffset_enable;d!==v.polygonOffset_enable&&(d?t.enable(32823):t.disable(32823),v.polygonOffset_enable=d);d=c[0];w=c[1];if(d!==l[0]||w!==l[1])t.polygonOffset(d,w),l[0]=d,l[1]=w;d=V.sample_alpha;d!==v.sample_alpha&&(d?t.enable(32926):t.disable(32926),v.sample_alpha=d);d=V.sample_enable;
d!==v.sample_enable&&(d?t.enable(32928):t.disable(32928),v.sample_enable=d);d=a[0];w=a[1];if(d!==wa[0]||w!==wa[1])t.sampleCoverage(d,w),wa[0]=d,wa[1]=w;d=V.stencil_enable;d!==v.stencil_enable&&(d?t.enable(2960):t.disable(2960),v.stencil_enable=d);d=V.stencil_mask;d!==v.stencil_mask&&(t.stencilMask(d),v.stencil_mask=d);d=X[0];w=X[1];e=X[2];if(d!==Y[0]||w!==Y[1]||e!==Y[2])t.stencilFunc(d,w,e),Y[0]=d,Y[1]=w,Y[2]=e;d=I[0];w=I[1];e=I[2];m=I[3];if(d!==y[0]||w!==y[1]||e!==y[2]||m!==y[3])t.stencilOpSeparate(d,
w,e,m),y[0]=d,y[1]=w,y[2]=e,y[3]=m;d=fa[0];w=fa[1];e=fa[2];m=fa[3];if(d!==R[0]||w!==R[1]||e!==R[2]||m!==R[3])t.stencilOpSeparate(d,w,e,m),R[0]=d,R[1]=w,R[2]=e,R[3]=m;d=V.scissor_enable;d!==v.scissor_enable&&(d?t.enable(3089):t.disable(3089),v.scissor_enable=d);d=x[0];w=x[1];e=x[2];m=x[3];if(d!==na[0]||w!==na[1]||e!==na[2]||m!==na[3])t.scissor(d,w,e,m),na[0]=d,na[1]=w,na[2]=e,na[3]=m;d=k[0];w=k[1];e=k[2];m=k[3];if(d!==P[0]||w!==P[1]||e!==P[2]||m!==P[3])t.viewport(d,w,e,m),P[0]=d,P[1]=w,P[2]=e,P[3]=
m;v.dirty=!1}if(d=v.profile)p=performance.now(),N.count++;t.useProgram(g.program);ja.setVAO(null);w=J.location;e=M[w];e.buffer||t.enableVertexAttribArray(w);if(e.type!==h.dtype||2!==e.size||e.buffer!==h||!1!==e.normalized||0!==e.offset||0!==e.stride)t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(w,2,h.dtype,!1,0,0),e.type=h.dtype,e.size=2,e.buffer=h,e.normalized=!1,e.offset=0,e.stride=0;t.uniform4f(E.location,1,0,0,1);(w=A.elements)?t.bindBuffer(34963,w.buffer.buffer):ja.currentVAO&&(w=F.getElements(ja.currentVAO.elements))&&
t.bindBuffer(34963,w.buffer.buffer);e=A.primitive;m=A.offset;w?t.drawElements(e,3,w.type,m<<(w.type-5121>>1)):t.drawArrays(e,m,3);ja.setVAO(null);d&&(N.cpuTime+=performance.now()-p)},scope:function(a,c,d){var b,f,k,l,g,e,q,x,z,t,y,C,D,O,G,I,r,n;if(b=v.profile)f=performance.now(),N.count++;k=A.count;A.count=3;l=u[3];u[3]=Q;g=p.buffer;p.buffer=h;e=p.divisor;p.divisor=0;q=p.normalized;p.normalized=!1;x=p.offset;p.offset=0;z=p.size;p.size=0;t=p.state;p.state=1;y=p.stride;p.stride=0;C=p.type;p.type=h.dtype;
D=p.w;p.w=0;O=p.x;p.x=0;G=p.y;p.y=0;I=p.z;p.z=0;r=m.vert;m.vert=2;n=m.frag;m.frag=1;c(U,a,d);b&&(N.cpuTime+=performance.now()-f);A.count=k;u[3]=l;p.buffer=g;p.divisor=e;p.normalized=q;p.offset=x;p.size=z;p.state=t;p.stride=y;p.type=C;p.w=D;p.x=O;p.y=G;p.z=I;m.vert=r;m.frag=n},batch:function(p,g){var e,m,H;e=Z.next;e!==Z.cur&&(e?t.bindFramebuffer(36160,e.framebuffer):t.bindFramebuffer(36160,null),Z.cur=e);if(v.dirty){var T,u;e=V.dither;e!==v.dither&&(e?t.enable(3024):t.disable(3024),v.dither=e);e=
V.blend_enable;e!==v.blend_enable&&(e?t.enable(3042):t.disable(3042),v.blend_enable=e);e=b[0];H=b[1];T=b[2];u=b[3];if(e!==z[0]||H!==z[1]||T!==z[2]||u!==z[3])t.blendColor(e,H,T,u),z[0]=e,z[1]=H,z[2]=T,z[3]=u;e=W[0];H=W[1];if(e!==f[0]||H!==f[1])t.blendEquationSeparate(e,H),f[0]=e,f[1]=H;e=ba[0];H=ba[1];T=ba[2];u=ba[3];if(e!==G[0]||H!==G[1]||T!==G[2]||u!==G[3])t.blendFuncSeparate(e,H,T,u),G[0]=e,G[1]=H,G[2]=T,G[3]=u;e=V.depth_enable;e!==v.depth_enable&&(e?t.enable(2929):t.disable(2929),v.depth_enable=
e);e=V.depth_func;e!==v.depth_func&&(t.depthFunc(e),v.depth_func=e);e=D[0];H=D[1];if(e!==C[0]||H!==C[1])t.depthRange(e,H),C[0]=e,C[1]=H;e=V.depth_mask;e!==v.depth_mask&&(t.depthMask(e),v.depth_mask=e);e=q[0];H=q[1];T=q[2];u=q[3];if(e!==ca[0]||H!==ca[1]||T!==ca[2]||u!==ca[3])t.colorMask(e,H,T,u),ca[0]=e,ca[1]=H,ca[2]=T,ca[3]=u;e=V.cull_enable;e!==v.cull_enable&&(e?t.enable(2884):t.disable(2884),v.cull_enable=e);e=V.cull_face;e!==v.cull_face&&(t.cullFace(e),v.cull_face=e);e=V.frontFace;e!==v.frontFace&&
(t.frontFace(e),v.frontFace=e);e=V.lineWidth;e!==v.lineWidth&&(t.lineWidth(e),v.lineWidth=e);e=V.polygonOffset_enable;e!==v.polygonOffset_enable&&(e?t.enable(32823):t.disable(32823),v.polygonOffset_enable=e);e=c[0];H=c[1];if(e!==l[0]||H!==l[1])t.polygonOffset(e,H),l[0]=e,l[1]=H;e=V.sample_alpha;e!==v.sample_alpha&&(e?t.enable(32926):t.disable(32926),v.sample_alpha=e);e=V.sample_enable;e!==v.sample_enable&&(e?t.enable(32928):t.disable(32928),v.sample_enable=e);e=a[0];H=a[1];if(e!==wa[0]||H!==wa[1])t.sampleCoverage(e,
H),wa[0]=e,wa[1]=H;e=V.stencil_enable;e!==v.stencil_enable&&(e?t.enable(2960):t.disable(2960),v.stencil_enable=e);e=V.stencil_mask;e!==v.stencil_mask&&(t.stencilMask(e),v.stencil_mask=e);e=X[0];H=X[1];T=X[2];if(e!==Y[0]||H!==Y[1]||T!==Y[2])t.stencilFunc(e,H,T),Y[0]=e,Y[1]=H,Y[2]=T;e=I[0];H=I[1];T=I[2];u=I[3];if(e!==y[0]||H!==y[1]||T!==y[2]||u!==y[3])t.stencilOpSeparate(e,H,T,u),y[0]=e,y[1]=H,y[2]=T,y[3]=u;e=fa[0];H=fa[1];T=fa[2];u=fa[3];if(e!==R[0]||H!==R[1]||T!==R[2]||u!==R[3])t.stencilOpSeparate(e,
H,T,u),R[0]=e,R[1]=H,R[2]=T,R[3]=u;e=V.scissor_enable;e!==v.scissor_enable&&(e?t.enable(3089):t.disable(3089),v.scissor_enable=e);e=x[0];H=x[1];T=x[2];u=x[3];if(e!==na[0]||H!==na[1]||T!==na[2]||u!==na[3])t.scissor(e,H,T,u),na[0]=e,na[1]=H,na[2]=T,na[3]=u;e=k[0];H=k[1];T=k[2];u=k[3];if(e!==P[0]||H!==P[1]||T!==P[2]||u!==P[3])t.viewport(e,H,T,u),P[0]=e,P[1]=H,P[2]=T,P[3]=u;v.dirty=!1}if(e=v.profile)m=performance.now(),N.count+=g;t.useProgram(d.program);var Q;ja.setVAO(null);H=J.location;T=M[H];T.buffer||
t.enableVertexAttribArray(H);if(T.type!==h.dtype||2!==T.size||T.buffer!==h||!1!==T.normalized||0!==T.offset||0!==T.stride)t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(H,2,h.dtype,!1,0,0),T.type=h.dtype,T.size=2,T.buffer=h,T.normalized=!1,T.offset=0,T.stride=0;t.uniform4f(E.location,1,0,0,1);(T=A.elements)?t.bindBuffer(34963,T.buffer.buffer):ja.currentVAO&&(T=F.getElements(ja.currentVAO.elements))&&t.bindBuffer(34963,T.buffer.buffer);u=A.primitive;Q=A.offset;for(H=0;H<g;++H)T?t.drawElements(u,
3,T.type,Q<<(T.type-5121>>1)):t.drawArrays(u,Q,3);ja.setVAO(null);e&&(N.cpuTime+=performance.now()-m)}}},"$19,angle,color,offset,position":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W){var f,ba,G,q,ca,D,C,c,l,a,wa,x,na,X,Y,fa,R,I,y,k,P,Q,ia,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa;f=e.attributes;ba=e.context;G=e.current;q=e.draw;ca=e.elements;D=e.framebuffer;C=e.gl;c=e.isArrayLike;l=e.next;a=e.shader;wa=e.uniforms;x=e.vao;na=l.blend_color;X=G.blend_color;Y=l.blend_equation;fa=G.blend_equation;
R=l.blend_func;I=G.blend_func;y=l.colorMask;k=G.colorMask;P=l.depth_range;Q=G.depth_range;ia=l.polygonOffset_offset;oa=G.polygonOffset_offset;w=l.sample_coverage;K=G.sample_coverage;da=l.scissor_box;T=G.scissor_box;ma=l.stencil_func;ra=G.stencil_func;Ca=l.stencil_opBack;xa=G.stencil_opBack;ga=l.stencil_opFront;Da=G.stencil_opFront;ka=l.viewport;pa=G.viewport;return{draw:function(a){var e,m,t,v;e=D.next;e!==D.cur&&(e?C.bindFramebuffer(36160,e.framebuffer):C.bindFramebuffer(36160,null),D.cur=e);if(G.dirty){var r;
e=l.dither;e!==G.dither&&(e?C.enable(3024):C.disable(3024),G.dither=e);e=l.blend_enable;e!==G.blend_enable&&(e?C.enable(3042):C.disable(3042),G.blend_enable=e);e=na[0];t=na[1];v=na[2];r=na[3];if(e!==X[0]||t!==X[1]||v!==X[2]||r!==X[3])C.blendColor(e,t,v,r),X[0]=e,X[1]=t,X[2]=v,X[3]=r;e=Y[0];t=Y[1];if(e!==fa[0]||t!==fa[1])C.blendEquationSeparate(e,t),fa[0]=e,fa[1]=t;e=R[0];t=R[1];v=R[2];r=R[3];if(e!==I[0]||t!==I[1]||v!==I[2]||r!==I[3])C.blendFuncSeparate(e,t,v,r),I[0]=e,I[1]=t,I[2]=v,I[3]=r;e=l.depth_func;
e!==G.depth_func&&(C.depthFunc(e),G.depth_func=e);e=P[0];t=P[1];if(e!==Q[0]||t!==Q[1])C.depthRange(e,t),Q[0]=e,Q[1]=t;e=l.depth_mask;e!==G.depth_mask&&(C.depthMask(e),G.depth_mask=e);e=y[0];t=y[1];v=y[2];r=y[3];if(e!==k[0]||t!==k[1]||v!==k[2]||r!==k[3])C.colorMask(e,t,v,r),k[0]=e,k[1]=t,k[2]=v,k[3]=r;e=l.cull_enable;e!==G.cull_enable&&(e?C.enable(2884):C.disable(2884),G.cull_enable=e);e=l.cull_face;e!==G.cull_face&&(C.cullFace(e),G.cull_face=e);e=l.frontFace;e!==G.frontFace&&(C.frontFace(e),G.frontFace=
e);e=l.lineWidth;e!==G.lineWidth&&(C.lineWidth(e),G.lineWidth=e);e=l.polygonOffset_enable;e!==G.polygonOffset_enable&&(e?C.enable(32823):C.disable(32823),G.polygonOffset_enable=e);e=ia[0];t=ia[1];if(e!==oa[0]||t!==oa[1])C.polygonOffset(e,t),oa[0]=e,oa[1]=t;e=l.sample_alpha;e!==G.sample_alpha&&(e?C.enable(32926):C.disable(32926),G.sample_alpha=e);e=l.sample_enable;e!==G.sample_enable&&(e?C.enable(32928):C.disable(32928),G.sample_enable=e);e=w[0];t=w[1];if(e!==K[0]||t!==K[1])C.sampleCoverage(e,t),K[0]=
e,K[1]=t;e=l.stencil_enable;e!==G.stencil_enable&&(e?C.enable(2960):C.disable(2960),G.stencil_enable=e);e=l.stencil_mask;e!==G.stencil_mask&&(C.stencilMask(e),G.stencil_mask=e);e=ma[0];t=ma[1];v=ma[2];if(e!==ra[0]||t!==ra[1]||v!==ra[2])C.stencilFunc(e,t,v),ra[0]=e,ra[1]=t,ra[2]=v;e=ga[0];t=ga[1];v=ga[2];r=ga[3];if(e!==Da[0]||t!==Da[1]||v!==Da[2]||r!==Da[3])C.stencilOpSeparate(e,t,v,r),Da[0]=e,Da[1]=t,Da[2]=v,Da[3]=r;e=Ca[0];t=Ca[1];v=Ca[2];r=Ca[3];if(e!==xa[0]||t!==xa[1]||v!==xa[2]||r!==xa[3])C.stencilOpSeparate(e,
t,v,r),xa[0]=e,xa[1]=t,xa[2]=v,xa[3]=r;e=l.scissor_enable;e!==G.scissor_enable&&(e?C.enable(3089):C.disable(3089),G.scissor_enable=e);e=da[0];t=da[1];v=da[2];r=da[3];if(e!==T[0]||t!==T[1]||v!==T[2]||r!==T[3])C.scissor(e,t,v,r),T[0]=e,T[1]=t,T[2]=v,T[3]=r;e=ka[0];t=ka[1];v=ka[2];r=ka[3];if(e!==pa[0]||t!==pa[1]||v!==pa[2]||r!==pa[3])C.viewport(e,t,v,r),pa[0]=e,pa[1]=t,pa[2]=v,pa[3]=r}C.disable(2929);G.depth_enable=!1;if(e=G.profile)m=performance.now(),N.count++;C.useProgram(g.program);x.setVAO(null);
t=W.location;v=f[t];v.buffer||C.enableVertexAttribArray(t);if(v.type!==h.dtype||2!==v.size||v.buffer!==h||!1!==v.normalized||0!==v.offset||0!==v.stride)C.bindBuffer(34962,h.buffer),C.vertexAttribPointer(t,2,h.dtype,!1,0,0),v.type=h.dtype,v.size=2,v.buffer=h,v.normalized=!1,v.offset=0,v.stride=0;t=p.call(this,ba,a,0);"number"!==typeof t&&S.commandRaise(d,H);C.uniform1f(ja.location,t);t=a.offset;c(t)&&2===t.length||S.commandRaise(E,H);C.uniform2f(z.location,t[0],t[1]);a=J.call(this,ba,a,0);c(a)&&4===
a.length||S.commandRaise(M,H);C.uniform4f(b.location,a[0],a[1],a[2],a[3]);(a=q.elements)?C.bindBuffer(34963,a.buffer.buffer):x.currentVAO&&(a=ca.getElements(x.currentVAO.elements))&&C.bindBuffer(34963,a.buffer.buffer);t=q.primitive;v=q.offset;a?C.drawElements(t,3,a.type,v<<(a.type-5121>>1)):C.drawArrays(t,v,3);G.dirty=!0;x.setVAO(null);e&&(N.cpuTime+=performance.now()-m)},scope:function(c,d,b){var f,k,e,n,g,p,m,w,t,x,L,z,y,C,D,T,I,H,K,ga,u;f=l.depth_enable;l.depth_enable=!1;if(k=G.profile)e=performance.now(),
N.count++;n=q.count;q.count=3;g=U.call(this,ba,c,b);p=wa[3];wa[3]=g;m=v.call(this,ba,c,b);g=wa[5];wa[5]=m;w=c.offset;m=wa[4];wa[4]=w;w=A.buffer;A.buffer=h;t=A.divisor;A.divisor=0;x=A.normalized;A.normalized=!1;L=A.offset;A.offset=0;z=A.size;A.size=0;y=A.state;A.state=1;C=A.stride;A.stride=0;D=A.type;A.type=h.dtype;T=A.w;A.w=0;I=A.x;A.x=0;H=A.y;A.y=0;K=A.z;A.z=0;ga=a.vert;a.vert=2;u=a.frag;a.frag=1;G.dirty=!0;d(ba,c,b);l.depth_enable=f;k&&(N.cpuTime+=performance.now()-e);q.count=n;wa[3]=p;wa[5]=g;
wa[4]=m;A.buffer=w;A.divisor=t;A.normalized=x;A.offset=L;A.size=z;A.state=y;A.stride=C;A.type=D;A.w=T;A.x=I;A.y=H;A.z=K;a.vert=ga;a.frag=u;G.dirty=!0},batch:function(a,d){var e,g,p,r;e=D.next;e!==D.cur&&(e?C.bindFramebuffer(36160,e.framebuffer):C.bindFramebuffer(36160,null),D.cur=e);if(G.dirty){var n,B,v;e=l.dither;e!==G.dither&&(e?C.enable(3024):C.disable(3024),G.dither=e);e=l.blend_enable;e!==G.blend_enable&&(e?C.enable(3042):C.disable(3042),G.blend_enable=e);e=na[0];n=na[1];B=na[2];v=na[3];if(e!==
X[0]||n!==X[1]||B!==X[2]||v!==X[3])C.blendColor(e,n,B,v),X[0]=e,X[1]=n,X[2]=B,X[3]=v;e=Y[0];n=Y[1];if(e!==fa[0]||n!==fa[1])C.blendEquationSeparate(e,n),fa[0]=e,fa[1]=n;e=R[0];n=R[1];B=R[2];v=R[3];if(e!==I[0]||n!==I[1]||B!==I[2]||v!==I[3])C.blendFuncSeparate(e,n,B,v),I[0]=e,I[1]=n,I[2]=B,I[3]=v;e=l.depth_func;e!==G.depth_func&&(C.depthFunc(e),G.depth_func=e);e=P[0];n=P[1];if(e!==Q[0]||n!==Q[1])C.depthRange(e,n),Q[0]=e,Q[1]=n;e=l.depth_mask;e!==G.depth_mask&&(C.depthMask(e),G.depth_mask=e);e=y[0];n=
y[1];B=y[2];v=y[3];if(e!==k[0]||n!==k[1]||B!==k[2]||v!==k[3])C.colorMask(e,n,B,v),k[0]=e,k[1]=n,k[2]=B,k[3]=v;e=l.cull_enable;e!==G.cull_enable&&(e?C.enable(2884):C.disable(2884),G.cull_enable=e);e=l.cull_face;e!==G.cull_face&&(C.cullFace(e),G.cull_face=e);e=l.frontFace;e!==G.frontFace&&(C.frontFace(e),G.frontFace=e);e=l.lineWidth;e!==G.lineWidth&&(C.lineWidth(e),G.lineWidth=e);e=l.polygonOffset_enable;e!==G.polygonOffset_enable&&(e?C.enable(32823):C.disable(32823),G.polygonOffset_enable=e);e=ia[0];
n=ia[1];if(e!==oa[0]||n!==oa[1])C.polygonOffset(e,n),oa[0]=e,oa[1]=n;e=l.sample_alpha;e!==G.sample_alpha&&(e?C.enable(32926):C.disable(32926),G.sample_alpha=e);e=l.sample_enable;e!==G.sample_enable&&(e?C.enable(32928):C.disable(32928),G.sample_enable=e);e=w[0];n=w[1];if(e!==K[0]||n!==K[1])C.sampleCoverage(e,n),K[0]=e,K[1]=n;e=l.stencil_enable;e!==G.stencil_enable&&(e?C.enable(2960):C.disable(2960),G.stencil_enable=e);e=l.stencil_mask;e!==G.stencil_mask&&(C.stencilMask(e),G.stencil_mask=e);e=ma[0];
n=ma[1];B=ma[2];if(e!==ra[0]||n!==ra[1]||B!==ra[2])C.stencilFunc(e,n,B),ra[0]=e,ra[1]=n,ra[2]=B;e=ga[0];n=ga[1];B=ga[2];v=ga[3];if(e!==Da[0]||n!==Da[1]||B!==Da[2]||v!==Da[3])C.stencilOpSeparate(e,n,B,v),Da[0]=e,Da[1]=n,Da[2]=B,Da[3]=v;e=Ca[0];n=Ca[1];B=Ca[2];v=Ca[3];if(e!==xa[0]||n!==xa[1]||B!==xa[2]||v!==xa[3])C.stencilOpSeparate(e,n,B,v),xa[0]=e,xa[1]=n,xa[2]=B,xa[3]=v;e=l.scissor_enable;e!==G.scissor_enable&&(e?C.enable(3089):C.disable(3089),G.scissor_enable=e);e=da[0];n=da[1];B=da[2];v=da[3];
if(e!==T[0]||n!==T[1]||B!==T[2]||v!==T[3])C.scissor(e,n,B,v),T[0]=e,T[1]=n,T[2]=B,T[3]=v;e=ka[0];n=ka[1];B=ka[2];v=ka[3];if(e!==pa[0]||n!==pa[1]||B!==pa[2]||v!==pa[3])C.viewport(e,n,B,v),pa[0]=e,pa[1]=n,pa[2]=B,pa[3]=v}C.disable(2929);G.depth_enable=!1;if(e=G.profile)g=performance.now(),N.count+=d;C.useProgram(F.program);x.setVAO(null);n=W.location;B=f[n];B.buffer||C.enableVertexAttribArray(n);if(B.type!==h.dtype||2!==B.size||B.buffer!==h||!1!==B.normalized||0!==B.offset||0!==B.stride)C.bindBuffer(34962,
h.buffer),C.vertexAttribPointer(n,2,h.dtype,!1,0,0),B.type=h.dtype,B.size=2,B.buffer=h,B.normalized=!1,B.offset=0,B.stride=0;p=Z.call(this,ba,r,p);"number"!==typeof p&&S.commandRaise(t,H);C.uniform1f(ja.location,p);(n=q.elements)?C.bindBuffer(34963,n.buffer.buffer):x.currentVAO&&(n=ca.getElements(x.currentVAO.elements))&&C.bindBuffer(34963,n.buffer.buffer);B=q.primitive;v=q.offset;for(p=0;p<d;++p){r=a[p];var A,J,E,ha,L,sa,Ea,M,U;A=r.offset;c(A)&&2===A.length||S.commandRaise(V,H);J=A[0];A=A[1];p&&
E===J&&ha===A||(E=J,ha=A,C.uniform2f(z.location,J,A));L=m.call(this,ba,r,p);c(L)&&4===L.length||S.commandRaise(u,H);r=L[0];J=L[1];A=L[2];L=L[3];p&&sa===r&&Ea===J&&M===A&&U===L||(sa=r,Ea=J,M=A,U=L,C.uniform4f(b.location,r,J,A,L));n?C.drawElements(B,3,n.type,v<<(n.type-5121>>1)):C.drawArrays(B,v,3)}G.dirty=!0;x.setVAO(null);e&&(N.cpuTime+=performance.now()-g)}}},"$23,model,position,projection,view":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q){var ca,D,C,c,l,a,wa,x,na,X,Y,fa,R,
I,y,k,P,Q,ia,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va;ca=e.attributes;D=e.context;C=e.current;c=e.draw;l=e.framebuffer;a=e.gl;wa=e.isArrayLike;x=e.next;na=e.shader;X=e.uniforms;Y=e.vao;fa=x.blend_color;R=C.blend_color;I=x.blend_equation;y=C.blend_equation;k=x.blend_func;P=C.blend_func;Q=x.colorMask;ia=C.colorMask;oa=x.depth_range;w=C.depth_range;K=x.polygonOffset_offset;da=C.polygonOffset_offset;T=x.sample_coverage;ma=C.sample_coverage;ra=x.scissor_box;Ca=C.scissor_box;xa=x.stencil_func;
ga=C.stencil_func;Da=x.stencil_opBack;ka=C.stencil_opBack;pa=x.stencil_opFront;Aa=C.stencil_opFront;Ha=x.viewport;O=C.viewport;ac=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ua=new Float32Array(16);r=new Float32Array(16);n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];B=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);va=new Float32Array(16);return{draw:function(c){var b,e,n,m;b=l.next;b!==l.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),l.cur=
b);if(C.dirty){var B;b=x.dither;b!==C.dither&&(b?a.enable(3024):a.disable(3024),C.dither=b);b=x.blend_enable;b!==C.blend_enable&&(b?a.enable(3042):a.disable(3042),C.blend_enable=b);b=fa[0];n=fa[1];m=fa[2];B=fa[3];if(b!==R[0]||n!==R[1]||m!==R[2]||B!==R[3])a.blendColor(b,n,m,B),R[0]=b,R[1]=n,R[2]=m,R[3]=B;b=I[0];n=I[1];if(b!==y[0]||n!==y[1])a.blendEquationSeparate(b,n),y[0]=b,y[1]=n;b=k[0];n=k[1];m=k[2];B=k[3];if(b!==P[0]||n!==P[1]||m!==P[2]||B!==P[3])a.blendFuncSeparate(b,n,m,B),P[0]=b,P[1]=n,P[2]=
m,P[3]=B;b=x.depth_enable;b!==C.depth_enable&&(b?a.enable(2929):a.disable(2929),C.depth_enable=b);b=x.depth_func;b!==C.depth_func&&(a.depthFunc(b),C.depth_func=b);b=oa[0];n=oa[1];if(b!==w[0]||n!==w[1])a.depthRange(b,n),w[0]=b,w[1]=n;b=x.depth_mask;b!==C.depth_mask&&(a.depthMask(b),C.depth_mask=b);b=Q[0];n=Q[1];m=Q[2];B=Q[3];if(b!==ia[0]||n!==ia[1]||m!==ia[2]||B!==ia[3])a.colorMask(b,n,m,B),ia[0]=b,ia[1]=n,ia[2]=m,ia[3]=B;b=x.cull_enable;b!==C.cull_enable&&(b?a.enable(2884):a.disable(2884),C.cull_enable=
b);b=x.cull_face;b!==C.cull_face&&(a.cullFace(b),C.cull_face=b);b=x.frontFace;b!==C.frontFace&&(a.frontFace(b),C.frontFace=b);b=x.lineWidth;b!==C.lineWidth&&(a.lineWidth(b),C.lineWidth=b);b=x.polygonOffset_enable;b!==C.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),C.polygonOffset_enable=b);b=K[0];n=K[1];if(b!==da[0]||n!==da[1])a.polygonOffset(b,n),da[0]=b,da[1]=n;b=x.sample_alpha;b!==C.sample_alpha&&(b?a.enable(32926):a.disable(32926),C.sample_alpha=b);b=x.sample_enable;b!==C.sample_enable&&
(b?a.enable(32928):a.disable(32928),C.sample_enable=b);b=T[0];n=T[1];if(b!==ma[0]||n!==ma[1])a.sampleCoverage(b,n),ma[0]=b,ma[1]=n;b=x.stencil_enable;b!==C.stencil_enable&&(b?a.enable(2960):a.disable(2960),C.stencil_enable=b);b=x.stencil_mask;b!==C.stencil_mask&&(a.stencilMask(b),C.stencil_mask=b);b=xa[0];n=xa[1];m=xa[2];if(b!==ga[0]||n!==ga[1]||m!==ga[2])a.stencilFunc(b,n,m),ga[0]=b,ga[1]=n,ga[2]=m;b=pa[0];n=pa[1];m=pa[2];B=pa[3];if(b!==Aa[0]||n!==Aa[1]||m!==Aa[2]||B!==Aa[3])a.stencilOpSeparate(b,
n,m,B),Aa[0]=b,Aa[1]=n,Aa[2]=m,Aa[3]=B;b=Da[0];n=Da[1];m=Da[2];B=Da[3];if(b!==ka[0]||n!==ka[1]||m!==ka[2]||B!==ka[3])a.stencilOpSeparate(b,n,m,B),ka[0]=b,ka[1]=n,ka[2]=m,ka[3]=B;b=x.scissor_enable;b!==C.scissor_enable&&(b?a.enable(3089):a.disable(3089),C.scissor_enable=b);b=ra[0];n=ra[1];m=ra[2];B=ra[3];if(b!==Ca[0]||n!==Ca[1]||m!==Ca[2]||B!==Ca[3])a.scissor(b,n,m,B),Ca[0]=b,Ca[1]=n,Ca[2]=m,Ca[3]=B;b=Ha[0];n=Ha[1];m=Ha[2];B=Ha[3];if(b!==O[0]||n!==O[1]||m!==O[2]||B!==O[3])a.viewport(b,n,m,B),O[0]=
b,O[1]=n,O[2]=m,O[3]=B;C.dirty=!1}if(b=C.profile)e=performance.now(),N.count++;a.useProgram(g.program);Y.setVAO(null);n=ba.location;m=ca[n];m.buffer||a.enableVertexAttribArray(n);if(m.type!==h.dtype||3!==m.size||m.buffer!==h||!1!==m.normalized||0!==m.offset||0!==m.stride)a.bindBuffer(34962,h.buffer),a.vertexAttribPointer(n,3,h.dtype,!1,0,0),m.type=h.dtype,m.size=3,m.buffer=h,m.normalized=!1,m.offset=0,m.stride=0;a.uniformMatrix4fv(f.location,!1,ac);n=p.call(this,D,c,0);wa(n)&&16===n.length||S.commandRaise(d,
H);a.uniformMatrix4fv(q.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ua[0]=n[0],Ua[1]=n[1],Ua[2]=n[2],Ua[3]=n[3],Ua[4]=n[4],Ua[5]=n[5],Ua[6]=n[6],Ua[7]=n[7],Ua[8]=n[8],Ua[9]=n[9],Ua[10]=n[10],Ua[11]=n[11],Ua[12]=n[12],Ua[13]=n[13],Ua[14]=n[14],Ua[15]=n[15],Ua));c=E.call(this,D,c,0);wa(c)&&16===c.length||S.commandRaise(J,H);a.uniformMatrix4fv(G.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(r[0]=c[0],r[1]=c[1],r[2]=c[2],r[3]=c[3],r[4]=c[4],r[5]=c[5],r[6]=c[6],r[7]=c[7],r[8]=
c[8],r[9]=c[9],r[10]=c[10],r[11]=c[11],r[12]=c[12],r[13]=c[13],r[14]=c[14],r[15]=c[15],r));M&&a.bindBuffer(34963,M.buffer.buffer);c=M.primType;n=M.vertCount-0;0<=n||S.commandRaise(U,H);n&&(a.drawElements(c,n,M.type,0<<(M.type-5121>>1)),Y.setVAO(null),b&&(N.cpuTime+=performance.now()-e))},scope:function(a,b,d){var f,e,k,p,l,g,r,m,B,w,q,x,z,y,O,G,T,I,K,ga,u,J,E;if(f=C.profile)e=performance.now(),N.count++;k=c.elements;c.elements=v;p=c.offset;c.offset=0;l=v.vertCount-0;0<=l||S.commandRaise(A,H);g=c.count;
c.count=l;r=v.primType;l=c.primitive;c.primitive=r;r=X[3];X[3]=n;m=F.call(this,D,a,d);B=X[5];X[5]=m;w=Z.call(this,D,a,d);m=X[4];X[4]=w;w=t.buffer;t.buffer=h;q=t.divisor;t.divisor=0;x=t.normalized;t.normalized=!1;z=t.offset;t.offset=0;y=t.size;t.size=0;O=t.state;t.state=1;G=t.stride;t.stride=0;T=t.type;t.type=h.dtype;I=t.w;t.w=0;K=t.x;t.x=0;ga=t.y;t.y=0;u=t.z;t.z=0;J=na.vert;na.vert=2;E=na.frag;na.frag=1;b(D,a,d);f&&(N.cpuTime+=performance.now()-e);c.elements=k;c.offset=p;c.count=g;c.primitive=l;X[3]=
r;X[5]=B;X[4]=m;t.buffer=w;t.divisor=q;t.normalized=x;t.offset=z;t.size=y;t.state=O;t.stride=G;t.type=T;t.w=I;t.x=K;t.y=ga;t.z=u;na.vert=J;na.frag=E},batch:function(c,d){var e,n,p;e=l.next;e!==l.cur&&(e?a.bindFramebuffer(36160,e.framebuffer):a.bindFramebuffer(36160,null),l.cur=e);if(C.dirty){var g,r,t;e=x.dither;e!==C.dither&&(e?a.enable(3024):a.disable(3024),C.dither=e);e=x.blend_enable;e!==C.blend_enable&&(e?a.enable(3042):a.disable(3042),C.blend_enable=e);e=fa[0];g=fa[1];r=fa[2];t=fa[3];if(e!==
R[0]||g!==R[1]||r!==R[2]||t!==R[3])a.blendColor(e,g,r,t),R[0]=e,R[1]=g,R[2]=r,R[3]=t;e=I[0];g=I[1];if(e!==y[0]||g!==y[1])a.blendEquationSeparate(e,g),y[0]=e,y[1]=g;e=k[0];g=k[1];r=k[2];t=k[3];if(e!==P[0]||g!==P[1]||r!==P[2]||t!==P[3])a.blendFuncSeparate(e,g,r,t),P[0]=e,P[1]=g,P[2]=r,P[3]=t;e=x.depth_enable;e!==C.depth_enable&&(e?a.enable(2929):a.disable(2929),C.depth_enable=e);e=x.depth_func;e!==C.depth_func&&(a.depthFunc(e),C.depth_func=e);e=oa[0];g=oa[1];if(e!==w[0]||g!==w[1])a.depthRange(e,g),
w[0]=e,w[1]=g;e=x.depth_mask;e!==C.depth_mask&&(a.depthMask(e),C.depth_mask=e);e=Q[0];g=Q[1];r=Q[2];t=Q[3];if(e!==ia[0]||g!==ia[1]||r!==ia[2]||t!==ia[3])a.colorMask(e,g,r,t),ia[0]=e,ia[1]=g,ia[2]=r,ia[3]=t;e=x.cull_enable;e!==C.cull_enable&&(e?a.enable(2884):a.disable(2884),C.cull_enable=e);e=x.cull_face;e!==C.cull_face&&(a.cullFace(e),C.cull_face=e);e=x.frontFace;e!==C.frontFace&&(a.frontFace(e),C.frontFace=e);e=x.lineWidth;e!==C.lineWidth&&(a.lineWidth(e),C.lineWidth=e);e=x.polygonOffset_enable;
e!==C.polygonOffset_enable&&(e?a.enable(32823):a.disable(32823),C.polygonOffset_enable=e);e=K[0];g=K[1];if(e!==da[0]||g!==da[1])a.polygonOffset(e,g),da[0]=e,da[1]=g;e=x.sample_alpha;e!==C.sample_alpha&&(e?a.enable(32926):a.disable(32926),C.sample_alpha=e);e=x.sample_enable;e!==C.sample_enable&&(e?a.enable(32928):a.disable(32928),C.sample_enable=e);e=T[0];g=T[1];if(e!==ma[0]||g!==ma[1])a.sampleCoverage(e,g),ma[0]=e,ma[1]=g;e=x.stencil_enable;e!==C.stencil_enable&&(e?a.enable(2960):a.disable(2960),
C.stencil_enable=e);e=x.stencil_mask;e!==C.stencil_mask&&(a.stencilMask(e),C.stencil_mask=e);e=xa[0];g=xa[1];r=xa[2];if(e!==ga[0]||g!==ga[1]||r!==ga[2])a.stencilFunc(e,g,r),ga[0]=e,ga[1]=g,ga[2]=r;e=pa[0];g=pa[1];r=pa[2];t=pa[3];if(e!==Aa[0]||g!==Aa[1]||r!==Aa[2]||t!==Aa[3])a.stencilOpSeparate(e,g,r,t),Aa[0]=e,Aa[1]=g,Aa[2]=r,Aa[3]=t;e=Da[0];g=Da[1];r=Da[2];t=Da[3];if(e!==ka[0]||g!==ka[1]||r!==ka[2]||t!==ka[3])a.stencilOpSeparate(e,g,r,t),ka[0]=e,ka[1]=g,ka[2]=r,ka[3]=t;e=x.scissor_enable;e!==C.scissor_enable&&
(e?a.enable(3089):a.disable(3089),C.scissor_enable=e);e=ra[0];g=ra[1];r=ra[2];t=ra[3];if(e!==Ca[0]||g!==Ca[1]||r!==Ca[2]||t!==Ca[3])a.scissor(e,g,r,t),Ca[0]=e,Ca[1]=g,Ca[2]=r,Ca[3]=t;e=Ha[0];g=Ha[1];r=Ha[2];t=Ha[3];if(e!==O[0]||g!==O[1]||r!==O[2]||t!==O[3])a.viewport(e,g,r,t),O[0]=e,O[1]=g,O[2]=r,O[3]=t;C.dirty=!1}if(e=C.profile)n=performance.now(),N.count+=d;a.useProgram(V.program);Y.setVAO(null);g=ba.location;r=ca[g];r.buffer||a.enableVertexAttribArray(g);if(r.type!==h.dtype||3!==r.size||r.buffer!==
h||!1!==r.normalized||0!==r.offset||0!==r.stride)a.bindBuffer(34962,h.buffer),a.vertexAttribPointer(g,3,h.dtype,!1,0,0),r.type=h.dtype,r.size=3,r.buffer=h,r.normalized=!1,r.offset=0,r.stride=0;a.uniformMatrix4fv(f.location,!1,B);g=m.call(this,D,void 0,p);wa(g)&&16===g.length||S.commandRaise(u,H);a.uniformMatrix4fv(q.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(ua[0]=g[0],ua[1]=g[1],ua[2]=g[2],ua[3]=g[3],ua[4]=g[4],ua[5]=g[5],ua[6]=g[6],ua[7]=g[7],ua[8]=g[8],ua[9]=g[9],ua[10]=g[10],ua[11]=
g[11],ua[12]=g[12],ua[13]=g[13],ua[14]=g[14],ua[15]=g[15],ua));p=ja.call(this,D,void 0,p);wa(p)&&16===p.length||S.commandRaise(b,H);a.uniformMatrix4fv(G.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(va[0]=p[0],va[1]=p[1],va[2]=p[2],va[3]=p[3],va[4]=p[4],va[5]=p[5],va[6]=p[6],va[7]=p[7],va[8]=p[8],va[9]=p[9],va[10]=p[10],va[11]=p[11],va[12]=p[12],va[13]=p[13],va[14]=p[14],va[15]=p[15],va));z&&a.bindBuffer(34963,z.buffer.buffer);g=z.primType;r=z.vertCount-0;0<=r||S.commandRaise(W,H);for(p=
0;p<d;++p)r&&a.drawElements(g,r,z.type,0<<(z.type-5121>>1));Y.setVAO(null);e&&(N.cpuTime+=performance.now()-n)}}},$20:function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja){var b,z,W,f,ba,G,q,ca,D,C,c,l,a,X,x,na,ia,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca;b=e.context;z=e.current;W=e.framebuffer;f=e.gl;ba=e.next;G=e.shader;q=e.uniforms;ca=e.vao;D=ba.blend_color;C=z.blend_color;c=ba.blend_equation;l=z.blend_equation;a=ba.blend_func;X=z.blend_func;x=ba.colorMask;na=z.colorMask;ia=ba.depth_range;Y=z.depth_range;
fa=ba.polygonOffset_offset;R=z.polygonOffset_offset;I=ba.sample_coverage;y=z.sample_coverage;k=ba.scissor_box;P=z.scissor_box;Q=ba.stencil_func;za=z.stencil_func;oa=ba.stencil_opBack;w=z.stencil_opBack;K=ba.stencil_opFront;da=z.stencil_opFront;T=ba.viewport;ma=z.viewport;ra={};Ca={};return{draw:function(e){var m,t,q,v,A,u,O,F,M,r,n,B,S;m=b.center;t=b.distance;q=b.eye;v=b.phi;A=b.projection;u=p.call(this,b,e,0);O=b.theta;F=b.up;M=b.view;b.center=g;b.distance=2.302585092994046;b.eye=h;b.phi=0;b.projection=
u;b.theta=0;b.up=d;b.view=E;u=W.next;u!==W.cur&&(u?f.bindFramebuffer(36160,u.framebuffer):f.bindFramebuffer(36160,null),W.cur=u);if(z.dirty){u=ba.dither;u!==z.dither&&(u?f.enable(3024):f.disable(3024),z.dither=u);u=ba.blend_enable;u!==z.blend_enable&&(u?f.enable(3042):f.disable(3042),z.blend_enable=u);u=D[0];n=D[1];B=D[2];S=D[3];if(u!==C[0]||n!==C[1]||B!==C[2]||S!==C[3])f.blendColor(u,n,B,S),C[0]=u,C[1]=n,C[2]=B,C[3]=S;u=c[0];n=c[1];if(u!==l[0]||n!==l[1])f.blendEquationSeparate(u,n),l[0]=u,l[1]=n;
u=a[0];n=a[1];B=a[2];S=a[3];if(u!==X[0]||n!==X[1]||B!==X[2]||S!==X[3])f.blendFuncSeparate(u,n,B,S),X[0]=u,X[1]=n,X[2]=B,X[3]=S;u=ba.depth_enable;u!==z.depth_enable&&(u?f.enable(2929):f.disable(2929),z.depth_enable=u);u=ba.depth_func;u!==z.depth_func&&(f.depthFunc(u),z.depth_func=u);u=ia[0];n=ia[1];if(u!==Y[0]||n!==Y[1])f.depthRange(u,n),Y[0]=u,Y[1]=n;u=ba.depth_mask;u!==z.depth_mask&&(f.depthMask(u),z.depth_mask=u);u=x[0];n=x[1];B=x[2];S=x[3];if(u!==na[0]||n!==na[1]||B!==na[2]||S!==na[3])f.colorMask(u,
n,B,S),na[0]=u,na[1]=n,na[2]=B,na[3]=S;u=ba.cull_enable;u!==z.cull_enable&&(u?f.enable(2884):f.disable(2884),z.cull_enable=u);u=ba.cull_face;u!==z.cull_face&&(f.cullFace(u),z.cull_face=u);u=ba.frontFace;u!==z.frontFace&&(f.frontFace(u),z.frontFace=u);u=ba.lineWidth;u!==z.lineWidth&&(f.lineWidth(u),z.lineWidth=u);u=ba.polygonOffset_enable;u!==z.polygonOffset_enable&&(u?f.enable(32823):f.disable(32823),z.polygonOffset_enable=u);u=fa[0];n=fa[1];if(u!==R[0]||n!==R[1])f.polygonOffset(u,n),R[0]=u,R[1]=
n;u=ba.sample_alpha;u!==z.sample_alpha&&(u?f.enable(32926):f.disable(32926),z.sample_alpha=u);u=ba.sample_enable;u!==z.sample_enable&&(u?f.enable(32928):f.disable(32928),z.sample_enable=u);u=I[0];n=I[1];if(u!==y[0]||n!==y[1])f.sampleCoverage(u,n),y[0]=u,y[1]=n;u=ba.stencil_enable;u!==z.stencil_enable&&(u?f.enable(2960):f.disable(2960),z.stencil_enable=u);u=ba.stencil_mask;u!==z.stencil_mask&&(f.stencilMask(u),z.stencil_mask=u);u=Q[0];n=Q[1];B=Q[2];if(u!==za[0]||n!==za[1]||B!==za[2])f.stencilFunc(u,
n,B),za[0]=u,za[1]=n,za[2]=B;u=K[0];n=K[1];B=K[2];S=K[3];if(u!==da[0]||n!==da[1]||B!==da[2]||S!==da[3])f.stencilOpSeparate(u,n,B,S),da[0]=u,da[1]=n,da[2]=B,da[3]=S;u=oa[0];n=oa[1];B=oa[2];S=oa[3];if(u!==w[0]||n!==w[1]||B!==w[2]||S!==w[3])f.stencilOpSeparate(u,n,B,S),w[0]=u,w[1]=n,w[2]=B,w[3]=S;u=ba.scissor_enable;u!==z.scissor_enable&&(u?f.enable(3089):f.disable(3089),z.scissor_enable=u);u=k[0];n=k[1];B=k[2];S=k[3];if(u!==P[0]||n!==P[1]||B!==P[2]||S!==P[3])f.scissor(u,n,B,S),P[0]=u,P[1]=n,P[2]=B,
P[3]=S;u=T[0];n=T[1];B=T[2];S=T[3];if(u!==ma[0]||n!==ma[1]||B!==ma[2]||S!==ma[3])f.viewport(u,n,B,S),ma[0]=u,ma[1]=n,ma[2]=B,ma[3]=S;z.dirty=!1}if(u=z.profile)r=performance.now(),N.count++;n=G.program(G.vert,G.frag,H);f.useProgram(n.program);ca.setVAO(null);B=n.id;(S=ra[B])||(S=ra[B]=J(n));S.call(this,e);ca.setVAO(null);b.center=m;b.distance=t;b.eye=q;b.phi=v;b.projection=A;b.theta=O;b.up=F;b.view=M;u&&(N.cpuTime+=performance.now()-r)},scope:function(a,c,d){var f,e,h,k,g,p,l,r,n,m,w,t,x,y,u,L,C,D,
G;f=b.center;e=b.distance;h=b.eye;k=b.phi;g=b.projection;p=v.call(this,b,a,d);l=b.theta;r=b.up;n=b.view;b.center=M;b.distance=2.302585092994046;b.eye=U;b.phi=0;b.projection=p;b.theta=0;b.up=A;b.view=F;if(p=z.profile)m=performance.now(),N.count++;w=b.center;t=q[1];q[1]=w;x=b.distance;w=q[2];q[2]=x;y=b.eye;x=q[3];q[3]=y;u=b.phi;y=q[4];q[4]=u;L=b.projection;u=q[5];q[5]=L;C=b.theta;L=q[6];q[6]=C;D=b.up;C=q[7];q[7]=D;D=b.view;G=q[8];q[8]=D;c(b,a,d);b.center=f;b.distance=e;b.eye=h;b.phi=k;b.projection=
g;b.theta=l;b.up=r;b.view=n;p&&(N.cpuTime+=performance.now()-m);q[1]=t;q[2]=w;q[3]=x;q[4]=y;q[5]=u;q[6]=L;q[7]=C;q[8]=G},batch:function(d,e){var h,g,p,q,v,O,A,J,r,n,B,F,E;h=b.center;g=b.distance;p=b.eye;q=b.phi;v=b.projection;O=V.call(this,b,d,0);A=b.theta;J=b.up;r=b.view;b.center=Z;b.distance=2.302585092994046;b.eye=t;b.phi=0;b.projection=O;b.theta=0;b.up=m;b.view=u;O=W.next;O!==W.cur&&(O?f.bindFramebuffer(36160,O.framebuffer):f.bindFramebuffer(36160,null),W.cur=O);if(z.dirty){O=ba.dither;O!==z.dither&&
(O?f.enable(3024):f.disable(3024),z.dither=O);O=ba.blend_enable;O!==z.blend_enable&&(O?f.enable(3042):f.disable(3042),z.blend_enable=O);O=D[0];B=D[1];F=D[2];E=D[3];if(O!==C[0]||B!==C[1]||F!==C[2]||E!==C[3])f.blendColor(O,B,F,E),C[0]=O,C[1]=B,C[2]=F,C[3]=E;O=c[0];B=c[1];if(O!==l[0]||B!==l[1])f.blendEquationSeparate(O,B),l[0]=O,l[1]=B;O=a[0];B=a[1];F=a[2];E=a[3];if(O!==X[0]||B!==X[1]||F!==X[2]||E!==X[3])f.blendFuncSeparate(O,B,F,E),X[0]=O,X[1]=B,X[2]=F,X[3]=E;O=ba.depth_enable;O!==z.depth_enable&&(O?
f.enable(2929):f.disable(2929),z.depth_enable=O);O=ba.depth_func;O!==z.depth_func&&(f.depthFunc(O),z.depth_func=O);O=ia[0];B=ia[1];if(O!==Y[0]||B!==Y[1])f.depthRange(O,B),Y[0]=O,Y[1]=B;O=ba.depth_mask;O!==z.depth_mask&&(f.depthMask(O),z.depth_mask=O);O=x[0];B=x[1];F=x[2];E=x[3];if(O!==na[0]||B!==na[1]||F!==na[2]||E!==na[3])f.colorMask(O,B,F,E),na[0]=O,na[1]=B,na[2]=F,na[3]=E;O=ba.cull_enable;O!==z.cull_enable&&(O?f.enable(2884):f.disable(2884),z.cull_enable=O);O=ba.cull_face;O!==z.cull_face&&(f.cullFace(O),
z.cull_face=O);O=ba.frontFace;O!==z.frontFace&&(f.frontFace(O),z.frontFace=O);O=ba.lineWidth;O!==z.lineWidth&&(f.lineWidth(O),z.lineWidth=O);O=ba.polygonOffset_enable;O!==z.polygonOffset_enable&&(O?f.enable(32823):f.disable(32823),z.polygonOffset_enable=O);O=fa[0];B=fa[1];if(O!==R[0]||B!==R[1])f.polygonOffset(O,B),R[0]=O,R[1]=B;O=ba.sample_alpha;O!==z.sample_alpha&&(O?f.enable(32926):f.disable(32926),z.sample_alpha=O);O=ba.sample_enable;O!==z.sample_enable&&(O?f.enable(32928):f.disable(32928),z.sample_enable=
O);O=I[0];B=I[1];if(O!==y[0]||B!==y[1])f.sampleCoverage(O,B),y[0]=O,y[1]=B;O=ba.stencil_enable;O!==z.stencil_enable&&(O?f.enable(2960):f.disable(2960),z.stencil_enable=O);O=ba.stencil_mask;O!==z.stencil_mask&&(f.stencilMask(O),z.stencil_mask=O);O=Q[0];B=Q[1];F=Q[2];if(O!==za[0]||B!==za[1]||F!==za[2])f.stencilFunc(O,B,F),za[0]=O,za[1]=B,za[2]=F;O=K[0];B=K[1];F=K[2];E=K[3];if(O!==da[0]||B!==da[1]||F!==da[2]||E!==da[3])f.stencilOpSeparate(O,B,F,E),da[0]=O,da[1]=B,da[2]=F,da[3]=E;O=oa[0];B=oa[1];F=oa[2];
E=oa[3];if(O!==w[0]||B!==w[1]||F!==w[2]||E!==w[3])f.stencilOpSeparate(O,B,F,E),w[0]=O,w[1]=B,w[2]=F,w[3]=E;O=ba.scissor_enable;O!==z.scissor_enable&&(O?f.enable(3089):f.disable(3089),z.scissor_enable=O);O=k[0];B=k[1];F=k[2];E=k[3];if(O!==P[0]||B!==P[1]||F!==P[2]||E!==P[3])f.scissor(O,B,F,E),P[0]=O,P[1]=B,P[2]=F,P[3]=E;O=T[0];B=T[1];F=T[2];E=T[3];if(O!==ma[0]||B!==ma[1]||F!==ma[2]||E!==ma[3])f.viewport(O,B,F,E),ma[0]=O,ma[1]=B,ma[2]=F,ma[3]=E;z.dirty=!1}if(O=z.profile)n=performance.now(),N.count+=
e;B=G.program(G.vert,G.frag,H);f.useProgram(B.program);ca.setVAO(null);F=B.id;(E=Ca[F])||(E=Ca[F]=ja(B));E.call(this,d,e);ca.setVAO(null);b.center=h;b.distance=g;b.eye=p;b.phi=q;b.projection=v;b.theta=A;b.up=J;b.view=r;O&&(N.cpuTime+=performance.now()-n)}}},"$27,position,projection,tex,uv,view":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,l){var a,X,x,na,ia,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O,ac,Ua,r,n,B,ua,va,Fa,Gb;a=e.attributes;X=e.context;
x=e.current;na=e.draw;ia=e.framebuffer;Y=e.gl;fa=e.isArrayLike;R=e.next;I=e.shader;y=e.uniforms;k=e.vao;P=R.blend_color;Q=x.blend_color;za=R.blend_equation;oa=x.blend_equation;w=R.blend_func;K=x.blend_func;da=R.colorMask;T=x.colorMask;ma=R.depth_range;ra=x.depth_range;Ca=R.polygonOffset_offset;xa=x.polygonOffset_offset;ga=R.sample_coverage;Da=x.sample_coverage;ka=R.scissor_box;pa=x.scissor_box;Aa=R.stencil_func;Ha=x.stencil_func;O=R.stencil_opBack;ac=x.stencil_opBack;Ua=R.stencil_opFront;r=x.stencil_opFront;
n=R.viewport;B=x.viewport;ua=new Float32Array(16);va=new Float32Array(16);Fa=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(b){var f,e,m,t;f=ia.next;f!==ia.cur&&(f?Y.bindFramebuffer(36160,f.framebuffer):Y.bindFramebuffer(36160,null),ia.cur=f);if(x.dirty){var q;f=R.dither;f!==x.dither&&(f?Y.enable(3024):Y.disable(3024),x.dither=f);f=R.blend_enable;f!==x.blend_enable&&(f?Y.enable(3042):Y.disable(3042),x.blend_enable=f);f=P[0];m=P[1];t=P[2];q=P[3];if(f!==Q[0]||m!==Q[1]||t!==Q[2]||
q!==Q[3])Y.blendColor(f,m,t,q),Q[0]=f,Q[1]=m,Q[2]=t,Q[3]=q;f=za[0];m=za[1];if(f!==oa[0]||m!==oa[1])Y.blendEquationSeparate(f,m),oa[0]=f,oa[1]=m;f=w[0];m=w[1];t=w[2];q=w[3];if(f!==K[0]||m!==K[1]||t!==K[2]||q!==K[3])Y.blendFuncSeparate(f,m,t,q),K[0]=f,K[1]=m,K[2]=t,K[3]=q;f=R.depth_enable;f!==x.depth_enable&&(f?Y.enable(2929):Y.disable(2929),x.depth_enable=f);f=R.depth_func;f!==x.depth_func&&(Y.depthFunc(f),x.depth_func=f);f=ma[0];m=ma[1];if(f!==ra[0]||m!==ra[1])Y.depthRange(f,m),ra[0]=f,ra[1]=m;f=
R.depth_mask;f!==x.depth_mask&&(Y.depthMask(f),x.depth_mask=f);f=da[0];m=da[1];t=da[2];q=da[3];if(f!==T[0]||m!==T[1]||t!==T[2]||q!==T[3])Y.colorMask(f,m,t,q),T[0]=f,T[1]=m,T[2]=t,T[3]=q;f=R.cull_enable;f!==x.cull_enable&&(f?Y.enable(2884):Y.disable(2884),x.cull_enable=f);f=R.cull_face;f!==x.cull_face&&(Y.cullFace(f),x.cull_face=f);f=R.frontFace;f!==x.frontFace&&(Y.frontFace(f),x.frontFace=f);f=R.lineWidth;f!==x.lineWidth&&(Y.lineWidth(f),x.lineWidth=f);f=R.polygonOffset_enable;f!==x.polygonOffset_enable&&
(f?Y.enable(32823):Y.disable(32823),x.polygonOffset_enable=f);f=Ca[0];m=Ca[1];if(f!==xa[0]||m!==xa[1])Y.polygonOffset(f,m),xa[0]=f,xa[1]=m;f=R.sample_alpha;f!==x.sample_alpha&&(f?Y.enable(32926):Y.disable(32926),x.sample_alpha=f);f=R.sample_enable;f!==x.sample_enable&&(f?Y.enable(32928):Y.disable(32928),x.sample_enable=f);f=ga[0];m=ga[1];if(f!==Da[0]||m!==Da[1])Y.sampleCoverage(f,m),Da[0]=f,Da[1]=m;f=R.stencil_enable;f!==x.stencil_enable&&(f?Y.enable(2960):Y.disable(2960),x.stencil_enable=f);f=R.stencil_mask;
f!==x.stencil_mask&&(Y.stencilMask(f),x.stencil_mask=f);f=Aa[0];m=Aa[1];t=Aa[2];if(f!==Ha[0]||m!==Ha[1]||t!==Ha[2])Y.stencilFunc(f,m,t),Ha[0]=f,Ha[1]=m,Ha[2]=t;f=Ua[0];m=Ua[1];t=Ua[2];q=Ua[3];if(f!==r[0]||m!==r[1]||t!==r[2]||q!==r[3])Y.stencilOpSeparate(f,m,t,q),r[0]=f,r[1]=m,r[2]=t,r[3]=q;f=O[0];m=O[1];t=O[2];q=O[3];if(f!==ac[0]||m!==ac[1]||t!==ac[2]||q!==ac[3])Y.stencilOpSeparate(f,m,t,q),ac[0]=f,ac[1]=m,ac[2]=t,ac[3]=q;f=R.scissor_enable;f!==x.scissor_enable&&(f?Y.enable(3089):Y.disable(3089),
x.scissor_enable=f);f=ka[0];m=ka[1];t=ka[2];q=ka[3];if(f!==pa[0]||m!==pa[1]||t!==pa[2]||q!==pa[3])Y.scissor(f,m,t,q),pa[0]=f,pa[1]=m,pa[2]=t,pa[3]=q;f=n[0];m=n[1];t=n[2];q=n[3];if(f!==B[0]||m!==B[1]||t!==B[2]||q!==B[3])Y.viewport(f,m,t,q),B[0]=f,B[1]=m,B[2]=t,B[3]=q;x.dirty=!1}if(f=x.profile)e=performance.now(),N.count++;Y.useProgram(g.program);k.setVAO(null);m=ca.location;t=a[m];t.buffer||Y.enableVertexAttribArray(m);if(t.type!==h.dtype||3!==t.size||t.buffer!==h||!1!==t.normalized||0!==t.offset||
0!==t.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(m,3,h.dtype,!1,0,0),t.type=h.dtype,t.size=3,t.buffer=h,t.normalized=!1,t.offset=0,t.stride=0;m=c.location;t=a[m];t.buffer||Y.enableVertexAttribArray(m);if(t.type!==p.dtype||2!==t.size||t.buffer!==p||!1!==t.normalized||0!==t.offset||0!==t.stride)Y.bindBuffer(34962,p.buffer),Y.vertexAttribPointer(m,2,p.dtype,!1,0,0),t.type=p.dtype,t.size=2,t.buffer=p,t.normalized=!1,t.offset=0,t.stride=0;m=d.call(this,X,b,0);fa(m)&&16===m.length||S.commandRaise(E,
H);Y.uniformMatrix4fv(D.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(ua[0]=m[0],ua[1]=m[1],ua[2]=m[2],ua[3]=m[3],ua[4]=m[4],ua[5]=m[5],ua[6]=m[6],ua[7]=m[7],ua[8]=m[8],ua[9]=m[9],ua[10]=m[10],ua[11]=m[11],ua[12]=m[12],ua[13]=m[13],ua[14]=m[14],ua[15]=m[15],ua));m=J.call(this,X,b,0);fa(m)&&16===m.length||S.commandRaise(M,H);Y.uniformMatrix4fv(l.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(va[0]=m[0],va[1]=m[1],va[2]=m[2],va[3]=m[3],va[4]=m[4],va[5]=m[5],va[6]=m[6],va[7]=
m[7],va[8]=m[8],va[9]=m[9],va[10]=m[10],va[11]=m[11],va[12]=m[12],va[13]=m[13],va[14]=m[14],va[15]=m[15],va));(b=b.texture)&&"framebuffer"===b._reglType&&(b=b.color[0]);"function"===typeof b&&"texture2d"===b._reglType||S.commandRaise(U,H);b=b._texture;Y.uniform1i(C.location,b.bind());v&&Y.bindBuffer(34963,v.buffer.buffer);m=v.primType;t=v.vertCount-0;0<=t||S.commandRaise(A,H);t&&(Y.drawElements(m,t,v.type,0<<(v.type-5121>>1)),k.setVAO(null),f&&(N.cpuTime+=performance.now()-e),b.unbind())},scope:function(a,
b,c){var d,f,e,k,n,g,r,l,B,w,q,z,v,O,C,D,G,A,T,K,ga,J,E,P,M,Q,R,ac,U,ra,xa,W,Y,ka,ba;if(d=x.profile)f=performance.now(),N.count++;e=na.elements;na.elements=F;k=na.offset;na.offset=0;n=F.vertCount-0;0<=n||S.commandRaise(Z,H);g=na.count;na.count=n;r=F.primType;n=na.primitive;na.primitive=r;l=t.call(this,X,a,c);r=y[3];y[3]=l;B=a.texture;l=y[5];y[5]=B;w=V.call(this,X,a,c);B=y[4];y[4]=w;w=m.buffer;m.buffer=h;q=m.divisor;m.divisor=0;z=m.normalized;m.normalized=!1;v=m.offset;m.offset=0;O=m.size;m.size=0;
C=m.state;m.state=1;D=m.stride;m.stride=0;G=m.type;m.type=h.dtype;A=m.w;m.w=0;T=m.x;m.x=0;K=m.y;m.y=0;ga=m.z;m.z=0;J=u.buffer;u.buffer=p;E=u.divisor;u.divisor=0;P=u.normalized;u.normalized=!1;M=u.offset;u.offset=0;Q=u.size;u.size=0;R=u.state;u.state=1;ac=u.stride;u.stride=0;U=u.type;u.type=p.dtype;ra=u.w;u.w=0;xa=u.x;u.x=0;W=u.y;u.y=0;Y=u.z;u.z=0;ka=I.vert;I.vert=2;ba=I.frag;I.frag=1;b(X,a,c);d&&(N.cpuTime+=performance.now()-f);na.elements=e;na.offset=k;na.count=g;na.primitive=n;y[3]=r;y[5]=l;y[4]=
B;m.buffer=w;m.divisor=q;m.normalized=z;m.offset=v;m.size=O;m.state=C;m.stride=D;m.type=G;m.w=A;m.x=T;m.y=K;m.z=ga;u.buffer=J;u.divisor=E;u.normalized=P;u.offset=M;u.size=Q;u.state=R;u.stride=ac;u.type=U;u.w=ra;u.x=xa;u.y=W;u.z=Y;I.vert=ka;I.frag=ba},batch:function(d,e){var g,m,t,v;g=ia.next;g!==ia.cur&&(g?Y.bindFramebuffer(36160,g.framebuffer):Y.bindFramebuffer(36160,null),ia.cur=g);if(x.dirty){var y,u,A;g=R.dither;g!==x.dither&&(g?Y.enable(3024):Y.disable(3024),x.dither=g);g=R.blend_enable;g!==
x.blend_enable&&(g?Y.enable(3042):Y.disable(3042),x.blend_enable=g);g=P[0];y=P[1];u=P[2];A=P[3];if(g!==Q[0]||y!==Q[1]||u!==Q[2]||A!==Q[3])Y.blendColor(g,y,u,A),Q[0]=g,Q[1]=y,Q[2]=u,Q[3]=A;g=za[0];y=za[1];if(g!==oa[0]||y!==oa[1])Y.blendEquationSeparate(g,y),oa[0]=g,oa[1]=y;g=w[0];y=w[1];u=w[2];A=w[3];if(g!==K[0]||y!==K[1]||u!==K[2]||A!==K[3])Y.blendFuncSeparate(g,y,u,A),K[0]=g,K[1]=y,K[2]=u,K[3]=A;g=R.depth_enable;g!==x.depth_enable&&(g?Y.enable(2929):Y.disable(2929),x.depth_enable=g);g=R.depth_func;
g!==x.depth_func&&(Y.depthFunc(g),x.depth_func=g);g=ma[0];y=ma[1];if(g!==ra[0]||y!==ra[1])Y.depthRange(g,y),ra[0]=g,ra[1]=y;g=R.depth_mask;g!==x.depth_mask&&(Y.depthMask(g),x.depth_mask=g);g=da[0];y=da[1];u=da[2];A=da[3];if(g!==T[0]||y!==T[1]||u!==T[2]||A!==T[3])Y.colorMask(g,y,u,A),T[0]=g,T[1]=y,T[2]=u,T[3]=A;g=R.cull_enable;g!==x.cull_enable&&(g?Y.enable(2884):Y.disable(2884),x.cull_enable=g);g=R.cull_face;g!==x.cull_face&&(Y.cullFace(g),x.cull_face=g);g=R.frontFace;g!==x.frontFace&&(Y.frontFace(g),
x.frontFace=g);g=R.lineWidth;g!==x.lineWidth&&(Y.lineWidth(g),x.lineWidth=g);g=R.polygonOffset_enable;g!==x.polygonOffset_enable&&(g?Y.enable(32823):Y.disable(32823),x.polygonOffset_enable=g);g=Ca[0];y=Ca[1];if(g!==xa[0]||y!==xa[1])Y.polygonOffset(g,y),xa[0]=g,xa[1]=y;g=R.sample_alpha;g!==x.sample_alpha&&(g?Y.enable(32926):Y.disable(32926),x.sample_alpha=g);g=R.sample_enable;g!==x.sample_enable&&(g?Y.enable(32928):Y.disable(32928),x.sample_enable=g);g=ga[0];y=ga[1];if(g!==Da[0]||y!==Da[1])Y.sampleCoverage(g,
y),Da[0]=g,Da[1]=y;g=R.stencil_enable;g!==x.stencil_enable&&(g?Y.enable(2960):Y.disable(2960),x.stencil_enable=g);g=R.stencil_mask;g!==x.stencil_mask&&(Y.stencilMask(g),x.stencil_mask=g);g=Aa[0];y=Aa[1];u=Aa[2];if(g!==Ha[0]||y!==Ha[1]||u!==Ha[2])Y.stencilFunc(g,y,u),Ha[0]=g,Ha[1]=y,Ha[2]=u;g=Ua[0];y=Ua[1];u=Ua[2];A=Ua[3];if(g!==r[0]||y!==r[1]||u!==r[2]||A!==r[3])Y.stencilOpSeparate(g,y,u,A),r[0]=g,r[1]=y,r[2]=u,r[3]=A;g=O[0];y=O[1];u=O[2];A=O[3];if(g!==ac[0]||y!==ac[1]||u!==ac[2]||A!==ac[3])Y.stencilOpSeparate(g,
y,u,A),ac[0]=g,ac[1]=y,ac[2]=u,ac[3]=A;g=R.scissor_enable;g!==x.scissor_enable&&(g?Y.enable(3089):Y.disable(3089),x.scissor_enable=g);g=ka[0];y=ka[1];u=ka[2];A=ka[3];if(g!==pa[0]||y!==pa[1]||u!==pa[2]||A!==pa[3])Y.scissor(g,y,u,A),pa[0]=g,pa[1]=y,pa[2]=u,pa[3]=A;g=n[0];y=n[1];u=n[2];A=n[3];if(g!==B[0]||y!==B[1]||u!==B[2]||A!==B[3])Y.viewport(g,y,u,A),B[0]=g,B[1]=y,B[2]=u,B[3]=A;x.dirty=!1}if(g=x.profile)m=performance.now(),N.count+=e;Y.useProgram(ja.program);k.setVAO(null);y=ca.location;u=a[y];u.buffer||
Y.enableVertexAttribArray(y);if(u.type!==h.dtype||3!==u.size||u.buffer!==h||!1!==u.normalized||0!==u.offset||0!==u.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(y,3,h.dtype,!1,0,0),u.type=h.dtype,u.size=3,u.buffer=h,u.normalized=!1,u.offset=0,u.stride=0;y=c.location;u=a[y];u.buffer||Y.enableVertexAttribArray(y);if(u.type!==p.dtype||2!==u.size||u.buffer!==p||!1!==u.normalized||0!==u.offset||0!==u.stride)Y.bindBuffer(34962,p.buffer),Y.vertexAttribPointer(y,2,p.dtype,!1,0,0),u.type=p.dtype,
u.size=2,u.buffer=p,u.normalized=!1,u.offset=0,u.stride=0;y=b.call(this,X,v,t);fa(y)&&16===y.length||S.commandRaise(z,H);Y.uniformMatrix4fv(D.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(Fa[0]=y[0],Fa[1]=y[1],Fa[2]=y[2],Fa[3]=y[3],Fa[4]=y[4],Fa[5]=y[5],Fa[6]=y[6],Fa[7]=y[7],Fa[8]=y[8],Fa[9]=y[9],Fa[10]=y[10],Fa[11]=y[11],Fa[12]=y[12],Fa[13]=y[13],Fa[14]=y[14],Fa[15]=y[15],Fa));t=W.call(this,X,v,t);fa(t)&&16===t.length||S.commandRaise(f,H);Y.uniformMatrix4fv(l.location,!1,Array.isArray(t)||
t instanceof Float32Array?t:(Gb[0]=t[0],Gb[1]=t[1],Gb[2]=t[2],Gb[3]=t[3],Gb[4]=t[4],Gb[5]=t[5],Gb[6]=t[6],Gb[7]=t[7],Gb[8]=t[8],Gb[9]=t[9],Gb[10]=t[10],Gb[11]=t[11],Gb[12]=t[12],Gb[13]=t[13],Gb[14]=t[14],Gb[15]=t[15],Gb));G&&Y.bindBuffer(34963,G.buffer.buffer);y=G.primType;u=G.vertCount-0;0<=u||S.commandRaise(q,H);for(t=0;t<e;++t)v=d[t],(v=v.texture)&&"framebuffer"===v._reglType&&(v=v.color[0]),"function"===typeof v&&"texture2d"===v._reglType||S.commandRaise(ba,H),v=v._texture,Y.uniform1i(C.location,
v.bind()),u&&(Y.drawElements(y,u,G.type,0<<(G.type-5121>>1)),v.unbind());k.setVAO(null);g&&(N.cpuTime+=performance.now()-m)}}},"$19,normal,position,projection,view":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,ja,b,z,W){var f,ba,G,q,ca,D,C,c,l,a,X,x,na,ia,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa,Ha,O;f=e.attributes;ba=e.context;G=e.current;q=e.draw;ca=e.framebuffer;D=e.gl;C=e.isArrayLike;c=e.next;l=e.shader;a=e.uniforms;X=e.vao;x=c.blend_color;na=G.blend_color;ia=c.blend_equation;
Y=G.blend_equation;fa=c.blend_func;R=G.blend_func;I=c.colorMask;y=G.colorMask;k=c.depth_range;P=G.depth_range;Q=c.polygonOffset_offset;za=G.polygonOffset_offset;oa=c.sample_coverage;w=G.sample_coverage;K=c.scissor_box;da=G.scissor_box;T=c.stencil_func;ma=G.stencil_func;ra=c.stencil_opBack;Ca=G.stencil_opBack;xa=c.stencil_opFront;ga=G.stencil_opFront;Da=c.viewport;ka=G.viewport;pa=new Float32Array(16);Aa=new Float32Array(16);Ha=new Float32Array(16);O=new Float32Array(16);return{draw:function(e){var l,
r,n;e=ca.next;e!==ca.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),ca.cur=e);if(G.dirty){var m;e=c.dither;e!==G.dither&&(e?D.enable(3024):D.disable(3024),G.dither=e);e=c.blend_enable;e!==G.blend_enable&&(e?D.enable(3042):D.disable(3042),G.blend_enable=e);e=x[0];r=x[1];n=x[2];m=x[3];if(e!==na[0]||r!==na[1]||n!==na[2]||m!==na[3])D.blendColor(e,r,n,m),na[0]=e,na[1]=r,na[2]=n,na[3]=m;e=ia[0];r=ia[1];if(e!==Y[0]||r!==Y[1])D.blendEquationSeparate(e,r),Y[0]=e,Y[1]=r;e=fa[0];
r=fa[1];n=fa[2];m=fa[3];if(e!==R[0]||r!==R[1]||n!==R[2]||m!==R[3])D.blendFuncSeparate(e,r,n,m),R[0]=e,R[1]=r,R[2]=n,R[3]=m;e=c.depth_enable;e!==G.depth_enable&&(e?D.enable(2929):D.disable(2929),G.depth_enable=e);e=c.depth_func;e!==G.depth_func&&(D.depthFunc(e),G.depth_func=e);e=k[0];r=k[1];if(e!==P[0]||r!==P[1])D.depthRange(e,r),P[0]=e,P[1]=r;e=c.depth_mask;e!==G.depth_mask&&(D.depthMask(e),G.depth_mask=e);e=I[0];r=I[1];n=I[2];m=I[3];if(e!==y[0]||r!==y[1]||n!==y[2]||m!==y[3])D.colorMask(e,r,n,m),
y[0]=e,y[1]=r,y[2]=n,y[3]=m;e=c.cull_enable;e!==G.cull_enable&&(e?D.enable(2884):D.disable(2884),G.cull_enable=e);e=c.cull_face;e!==G.cull_face&&(D.cullFace(e),G.cull_face=e);e=c.frontFace;e!==G.frontFace&&(D.frontFace(e),G.frontFace=e);e=c.lineWidth;e!==G.lineWidth&&(D.lineWidth(e),G.lineWidth=e);e=c.polygonOffset_enable;e!==G.polygonOffset_enable&&(e?D.enable(32823):D.disable(32823),G.polygonOffset_enable=e);e=Q[0];r=Q[1];if(e!==za[0]||r!==za[1])D.polygonOffset(e,r),za[0]=e,za[1]=r;e=c.sample_alpha;
e!==G.sample_alpha&&(e?D.enable(32926):D.disable(32926),G.sample_alpha=e);e=c.sample_enable;e!==G.sample_enable&&(e?D.enable(32928):D.disable(32928),G.sample_enable=e);e=oa[0];r=oa[1];if(e!==w[0]||r!==w[1])D.sampleCoverage(e,r),w[0]=e,w[1]=r;e=c.stencil_enable;e!==G.stencil_enable&&(e?D.enable(2960):D.disable(2960),G.stencil_enable=e);e=c.stencil_mask;e!==G.stencil_mask&&(D.stencilMask(e),G.stencil_mask=e);e=T[0];r=T[1];n=T[2];if(e!==ma[0]||r!==ma[1]||n!==ma[2])D.stencilFunc(e,r,n),ma[0]=e,ma[1]=
r,ma[2]=n;e=xa[0];r=xa[1];n=xa[2];m=xa[3];if(e!==ga[0]||r!==ga[1]||n!==ga[2]||m!==ga[3])D.stencilOpSeparate(e,r,n,m),ga[0]=e,ga[1]=r,ga[2]=n,ga[3]=m;e=ra[0];r=ra[1];n=ra[2];m=ra[3];if(e!==Ca[0]||r!==Ca[1]||n!==Ca[2]||m!==Ca[3])D.stencilOpSeparate(e,r,n,m),Ca[0]=e,Ca[1]=r,Ca[2]=n,Ca[3]=m;e=c.scissor_enable;e!==G.scissor_enable&&(e?D.enable(3089):D.disable(3089),G.scissor_enable=e);e=K[0];r=K[1];n=K[2];m=K[3];if(e!==da[0]||r!==da[1]||n!==da[2]||m!==da[3])D.scissor(e,r,n,m),da[0]=e,da[1]=r,da[2]=n,da[3]=
m;e=Da[0];r=Da[1];n=Da[2];m=Da[3];if(e!==ka[0]||r!==ka[1]||n!==ka[2]||m!==ka[3])D.viewport(e,r,n,m),ka[0]=e,ka[1]=r,ka[2]=n,ka[3]=m;G.dirty=!1}if(e=G.profile)l=performance.now(),N.count++;D.useProgram(g.program);X.setVAO(null);r=b.location;n=f[r];n.buffer||D.enableVertexAttribArray(r);if(n.type!==h.dtype||3!==n.size||n.buffer!==h||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,h.buffer),D.vertexAttribPointer(r,3,h.dtype,!1,0,0),n.type=h.dtype,n.size=3,n.buffer=h,n.normalized=!1,
n.offset=0,n.stride=0;r=ja.location;n=f[r];n.buffer||D.enableVertexAttribArray(r);if(n.type!==p.dtype||3!==n.size||n.buffer!==p||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,p.buffer),D.vertexAttribPointer(r,3,p.dtype,!1,0,0),n.type=p.dtype,n.size=3,n.buffer=p,n.normalized=!1,n.offset=0,n.stride=0;r=a[5];C(r)&&16===r.length||S.commandRaise(d,H);D.uniformMatrix4fv(z.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(pa[0]=r[0],pa[1]=r[1],pa[2]=r[2],pa[3]=r[3],pa[4]=r[4],
pa[5]=r[5],pa[6]=r[6],pa[7]=r[7],pa[8]=r[8],pa[9]=r[9],pa[10]=r[10],pa[11]=r[11],pa[12]=r[12],pa[13]=r[13],pa[14]=r[14],pa[15]=r[15],pa));r=a[8];C(r)&&16===r.length||S.commandRaise(E,H);D.uniformMatrix4fv(W.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Aa[0]=r[0],Aa[1]=r[1],Aa[2]=r[2],Aa[3]=r[3],Aa[4]=r[4],Aa[5]=r[5],Aa[6]=r[6],Aa[7]=r[7],Aa[8]=r[8],Aa[9]=r[9],Aa[10]=r[10],Aa[11]=r[11],Aa[12]=r[12],Aa[13]=r[13],Aa[14]=r[14],Aa[15]=r[15],Aa));J&&D.bindBuffer(34963,J.buffer.buffer);r=J.primType;
n=J.vertCount-0;0<=n||S.commandRaise(M,H);n&&(D.drawElements(r,n,J.type,0<<(J.type-5121>>1)),X.setVAO(null),e&&(N.cpuTime+=performance.now()-l))},scope:function(a,b,c){var d,f,e,g,k,m,t,w,y,x,u,z,O,C,D,T,I,K,ga,J,E,P,M,Q,R,ra,xa,W,V,Y,Z,ka;if(d=G.profile)f=performance.now(),N.count++;e=q.elements;q.elements=U;g=q.offset;q.offset=0;k=U.vertCount-0;0<=k||S.commandRaise(v,H);m=q.count;q.count=k;t=U.primType;k=q.primitive;q.primitive=t;t=A.buffer;A.buffer=p;w=A.divisor;A.divisor=0;y=A.normalized;A.normalized=
!1;x=A.offset;A.offset=0;u=A.size;A.size=0;z=A.state;A.state=1;O=A.stride;A.stride=0;C=A.type;A.type=p.dtype;D=A.w;A.w=0;T=A.x;A.x=0;I=A.y;A.y=0;K=A.z;A.z=0;ga=F.buffer;F.buffer=h;J=F.divisor;F.divisor=0;E=F.normalized;F.normalized=!1;P=F.offset;F.offset=0;M=F.size;F.size=0;Q=F.state;F.state=1;R=F.stride;F.stride=0;ra=F.type;F.type=h.dtype;xa=F.w;F.w=0;W=F.x;F.x=0;V=F.y;F.y=0;Y=F.z;F.z=0;Z=l.vert;l.vert=10;ka=l.frag;l.frag=9;b(ba,a,c);d&&(N.cpuTime+=performance.now()-f);q.elements=e;q.offset=g;q.count=
m;q.primitive=k;A.buffer=t;A.divisor=w;A.normalized=y;A.offset=x;A.size=u;A.state=z;A.stride=O;A.type=C;A.w=D;A.x=T;A.y=I;A.z=K;F.buffer=ga;F.divisor=J;F.normalized=E;F.offset=P;F.size=M;F.state=Q;F.stride=R;F.type=ra;F.w=xa;F.x=W;F.y=V;F.z=Y;l.vert=Z;l.frag=ka},batch:function(d,e){var g,n,l;g=ca.next;g!==ca.cur&&(g?D.bindFramebuffer(36160,g.framebuffer):D.bindFramebuffer(36160,null),ca.cur=g);if(G.dirty){var q,v;g=c.dither;g!==G.dither&&(g?D.enable(3024):D.disable(3024),G.dither=g);g=c.blend_enable;
g!==G.blend_enable&&(g?D.enable(3042):D.disable(3042),G.blend_enable=g);g=x[0];l=x[1];q=x[2];v=x[3];if(g!==na[0]||l!==na[1]||q!==na[2]||v!==na[3])D.blendColor(g,l,q,v),na[0]=g,na[1]=l,na[2]=q,na[3]=v;g=ia[0];l=ia[1];if(g!==Y[0]||l!==Y[1])D.blendEquationSeparate(g,l),Y[0]=g,Y[1]=l;g=fa[0];l=fa[1];q=fa[2];v=fa[3];if(g!==R[0]||l!==R[1]||q!==R[2]||v!==R[3])D.blendFuncSeparate(g,l,q,v),R[0]=g,R[1]=l,R[2]=q,R[3]=v;g=c.depth_enable;g!==G.depth_enable&&(g?D.enable(2929):D.disable(2929),G.depth_enable=g);
g=c.depth_func;g!==G.depth_func&&(D.depthFunc(g),G.depth_func=g);g=k[0];l=k[1];if(g!==P[0]||l!==P[1])D.depthRange(g,l),P[0]=g,P[1]=l;g=c.depth_mask;g!==G.depth_mask&&(D.depthMask(g),G.depth_mask=g);g=I[0];l=I[1];q=I[2];v=I[3];if(g!==y[0]||l!==y[1]||q!==y[2]||v!==y[3])D.colorMask(g,l,q,v),y[0]=g,y[1]=l,y[2]=q,y[3]=v;g=c.cull_enable;g!==G.cull_enable&&(g?D.enable(2884):D.disable(2884),G.cull_enable=g);g=c.cull_face;g!==G.cull_face&&(D.cullFace(g),G.cull_face=g);g=c.frontFace;g!==G.frontFace&&(D.frontFace(g),
G.frontFace=g);g=c.lineWidth;g!==G.lineWidth&&(D.lineWidth(g),G.lineWidth=g);g=c.polygonOffset_enable;g!==G.polygonOffset_enable&&(g?D.enable(32823):D.disable(32823),G.polygonOffset_enable=g);g=Q[0];l=Q[1];if(g!==za[0]||l!==za[1])D.polygonOffset(g,l),za[0]=g,za[1]=l;g=c.sample_alpha;g!==G.sample_alpha&&(g?D.enable(32926):D.disable(32926),G.sample_alpha=g);g=c.sample_enable;g!==G.sample_enable&&(g?D.enable(32928):D.disable(32928),G.sample_enable=g);g=oa[0];l=oa[1];if(g!==w[0]||l!==w[1])D.sampleCoverage(g,
l),w[0]=g,w[1]=l;g=c.stencil_enable;g!==G.stencil_enable&&(g?D.enable(2960):D.disable(2960),G.stencil_enable=g);g=c.stencil_mask;g!==G.stencil_mask&&(D.stencilMask(g),G.stencil_mask=g);g=T[0];l=T[1];q=T[2];if(g!==ma[0]||l!==ma[1]||q!==ma[2])D.stencilFunc(g,l,q),ma[0]=g,ma[1]=l,ma[2]=q;g=xa[0];l=xa[1];q=xa[2];v=xa[3];if(g!==ga[0]||l!==ga[1]||q!==ga[2]||v!==ga[3])D.stencilOpSeparate(g,l,q,v),ga[0]=g,ga[1]=l,ga[2]=q,ga[3]=v;g=ra[0];l=ra[1];q=ra[2];v=ra[3];if(g!==Ca[0]||l!==Ca[1]||q!==Ca[2]||v!==Ca[3])D.stencilOpSeparate(g,
l,q,v),Ca[0]=g,Ca[1]=l,Ca[2]=q,Ca[3]=v;g=c.scissor_enable;g!==G.scissor_enable&&(g?D.enable(3089):D.disable(3089),G.scissor_enable=g);g=K[0];l=K[1];q=K[2];v=K[3];if(g!==da[0]||l!==da[1]||q!==da[2]||v!==da[3])D.scissor(g,l,q,v),da[0]=g,da[1]=l,da[2]=q,da[3]=v;g=Da[0];l=Da[1];q=Da[2];v=Da[3];if(g!==ka[0]||l!==ka[1]||q!==ka[2]||v!==ka[3])D.viewport(g,l,q,v),ka[0]=g,ka[1]=l,ka[2]=q,ka[3]=v;G.dirty=!1}if(g=G.profile)n=performance.now(),N.count+=e;D.useProgram(Z.program);X.setVAO(null);l=b.location;q=f[l];
q.buffer||D.enableVertexAttribArray(l);if(q.type!==h.dtype||3!==q.size||q.buffer!==h||!1!==q.normalized||0!==q.offset||0!==q.stride)D.bindBuffer(34962,h.buffer),D.vertexAttribPointer(l,3,h.dtype,!1,0,0),q.type=h.dtype,q.size=3,q.buffer=h,q.normalized=!1,q.offset=0,q.stride=0;l=ja.location;q=f[l];q.buffer||D.enableVertexAttribArray(l);if(q.type!==p.dtype||3!==q.size||q.buffer!==p||!1!==q.normalized||0!==q.offset||0!==q.stride)D.bindBuffer(34962,p.buffer),D.vertexAttribPointer(l,3,p.dtype,!1,0,0),q.type=
p.dtype,q.size=3,q.buffer=p,q.normalized=!1,q.offset=0,q.stride=0;l=a[5];C(l)&&16===l.length||S.commandRaise(t,H);D.uniformMatrix4fv(z.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ha[0]=l[0],Ha[1]=l[1],Ha[2]=l[2],Ha[3]=l[3],Ha[4]=l[4],Ha[5]=l[5],Ha[6]=l[6],Ha[7]=l[7],Ha[8]=l[8],Ha[9]=l[9],Ha[10]=l[10],Ha[11]=l[11],Ha[12]=l[12],Ha[13]=l[13],Ha[14]=l[14],Ha[15]=l[15],Ha));l=a[8];C(l)&&16===l.length||S.commandRaise(V,H);D.uniformMatrix4fv(W.location,!1,Array.isArray(l)||l instanceof Float32Array?
l:(O[0]=l[0],O[1]=l[1],O[2]=l[2],O[3]=l[3],O[4]=l[4],O[5]=l[5],O[6]=l[6],O[7]=l[7],O[8]=l[8],O[9]=l[9],O[10]=l[10],O[11]=l[11],O[12]=l[12],O[13]=l[13],O[14]=l[14],O[15]=l[15],O));m&&D.bindBuffer(34963,m.buffer.buffer);q=m.primType;v=m.vertCount-0;0<=v||S.commandRaise(u,H);for(l=0;l<e;++l)v&&D.drawElements(q,v,m.type,0<<(m.type-5121>>1));X.setVAO(null);g&&(N.cpuTime+=performance.now()-n)}}},"$14,angle,color,position":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V){var m,u,ja,b,z,W,f,ba,G,q,ca,D,C,c,
l,a,X,x,na,ia,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra;m=e.attributes;u=e.context;ja=e.current;b=e.draw;z=e.elements;W=e.framebuffer;f=e.gl;ba=e.isArrayLike;G=e.next;q=e.shader;ca=e.uniforms;D=e.vao;C=G.blend_color;c=ja.blend_color;l=G.blend_equation;a=ja.blend_equation;X=G.blend_func;x=ja.blend_func;na=G.colorMask;ia=ja.colorMask;Y=G.depth_range;fa=ja.depth_range;R=G.polygonOffset_offset;I=ja.polygonOffset_offset;y=G.sample_coverage;k=ja.sample_coverage;P=G.scissor_box;Q=ja.scissor_box;za=G.stencil_func;
oa=ja.stencil_func;w=G.stencil_opBack;K=ja.stencil_opBack;da=G.stencil_opFront;T=ja.stencil_opFront;ma=G.viewport;ra=ja.viewport;return{draw:function(e){var q,v,A,F;q=W.next;q!==W.cur&&(q?f.bindFramebuffer(36160,q.framebuffer):f.bindFramebuffer(36160,null),W.cur=q);if(ja.dirty){var J;q=G.dither;q!==ja.dither&&(q?f.enable(3024):f.disable(3024),ja.dither=q);q=G.blend_enable;q!==ja.blend_enable&&(q?f.enable(3042):f.disable(3042),ja.blend_enable=q);q=C[0];A=C[1];F=C[2];J=C[3];if(q!==c[0]||A!==c[1]||F!==
c[2]||J!==c[3])f.blendColor(q,A,F,J),c[0]=q,c[1]=A,c[2]=F,c[3]=J;q=l[0];A=l[1];if(q!==a[0]||A!==a[1])f.blendEquationSeparate(q,A),a[0]=q,a[1]=A;q=X[0];A=X[1];F=X[2];J=X[3];if(q!==x[0]||A!==x[1]||F!==x[2]||J!==x[3])f.blendFuncSeparate(q,A,F,J),x[0]=q,x[1]=A,x[2]=F,x[3]=J;q=G.depth_func;q!==ja.depth_func&&(f.depthFunc(q),ja.depth_func=q);q=Y[0];A=Y[1];if(q!==fa[0]||A!==fa[1])f.depthRange(q,A),fa[0]=q,fa[1]=A;q=G.depth_mask;q!==ja.depth_mask&&(f.depthMask(q),ja.depth_mask=q);q=na[0];A=na[1];F=na[2];
J=na[3];if(q!==ia[0]||A!==ia[1]||F!==ia[2]||J!==ia[3])f.colorMask(q,A,F,J),ia[0]=q,ia[1]=A,ia[2]=F,ia[3]=J;q=G.cull_enable;q!==ja.cull_enable&&(q?f.enable(2884):f.disable(2884),ja.cull_enable=q);q=G.cull_face;q!==ja.cull_face&&(f.cullFace(q),ja.cull_face=q);q=G.frontFace;q!==ja.frontFace&&(f.frontFace(q),ja.frontFace=q);q=G.lineWidth;q!==ja.lineWidth&&(f.lineWidth(q),ja.lineWidth=q);q=G.polygonOffset_enable;q!==ja.polygonOffset_enable&&(q?f.enable(32823):f.disable(32823),ja.polygonOffset_enable=q);
q=R[0];A=R[1];if(q!==I[0]||A!==I[1])f.polygonOffset(q,A),I[0]=q,I[1]=A;q=G.sample_alpha;q!==ja.sample_alpha&&(q?f.enable(32926):f.disable(32926),ja.sample_alpha=q);q=G.sample_enable;q!==ja.sample_enable&&(q?f.enable(32928):f.disable(32928),ja.sample_enable=q);q=y[0];A=y[1];if(q!==k[0]||A!==k[1])f.sampleCoverage(q,A),k[0]=q,k[1]=A;q=G.stencil_enable;q!==ja.stencil_enable&&(q?f.enable(2960):f.disable(2960),ja.stencil_enable=q);q=G.stencil_mask;q!==ja.stencil_mask&&(f.stencilMask(q),ja.stencil_mask=
q);q=za[0];A=za[1];F=za[2];if(q!==oa[0]||A!==oa[1]||F!==oa[2])f.stencilFunc(q,A,F),oa[0]=q,oa[1]=A,oa[2]=F;q=da[0];A=da[1];F=da[2];J=da[3];if(q!==T[0]||A!==T[1]||F!==T[2]||J!==T[3])f.stencilOpSeparate(q,A,F,J),T[0]=q,T[1]=A,T[2]=F,T[3]=J;q=w[0];A=w[1];F=w[2];J=w[3];if(q!==K[0]||A!==K[1]||F!==K[2]||J!==K[3])f.stencilOpSeparate(q,A,F,J),K[0]=q,K[1]=A,K[2]=F,K[3]=J;q=G.scissor_enable;q!==ja.scissor_enable&&(q?f.enable(3089):f.disable(3089),ja.scissor_enable=q);q=P[0];A=P[1];F=P[2];J=P[3];if(q!==Q[0]||
A!==Q[1]||F!==Q[2]||J!==Q[3])f.scissor(q,A,F,J),Q[0]=q,Q[1]=A,Q[2]=F,Q[3]=J;q=ma[0];A=ma[1];F=ma[2];J=ma[3];if(q!==ra[0]||A!==ra[1]||F!==ra[2]||J!==ra[3])f.viewport(q,A,F,J),ra[0]=q,ra[1]=A,ra[2]=F,ra[3]=J}f.disable(2929);ja.depth_enable=!1;if(q=ja.profile)v=performance.now(),N.count++;f.useProgram(g.program);D.setVAO(null);A=V.location;F=m[A];F.buffer||f.enableVertexAttribArray(A);if(F.type!==h.dtype||2!==F.size||F.buffer!==h||!1!==F.normalized||0!==F.offset||0!==F.stride)f.bindBuffer(34962,h.buffer),
f.vertexAttribPointer(A,2,h.dtype,!1,0,0),F.type=h.dtype,F.size=2,F.buffer=h,F.normalized=!1,F.offset=0,F.stride=0;A=p.call(this,u,e,0);"number"!==typeof A&&S.commandRaise(d,H);f.uniform1f(Z.location,A);e=e.color;ba(e)&&4===e.length||S.commandRaise(E,H);f.uniform4f(t.location,e[0],e[1],e[2],e[3]);(e=b.elements)?f.bindBuffer(34963,e.buffer.buffer):D.currentVAO&&(e=z.getElements(D.currentVAO.elements))&&f.bindBuffer(34963,e.buffer.buffer);A=b.primitive;F=b.offset;e?f.drawElements(A,3,e.type,F<<(e.type-
5121>>1)):f.drawArrays(A,F,3);ja.dirty=!0;D.setVAO(null);q&&(N.cpuTime+=performance.now()-v)},scope:function(a,c,d){var e,f,g,k,l,p,m,t,r,n,w,v,y,x,z,A,C,D,F,T;e=G.depth_enable;G.depth_enable=!1;if(f=ja.profile)g=performance.now(),N.count++;k=b.count;b.count=3;l=J.call(this,u,a,d);p=ca[3];ca[3]=l;m=a.color;l=ca[4];ca[4]=m;m=M.buffer;M.buffer=h;t=M.divisor;M.divisor=0;r=M.normalized;M.normalized=!1;n=M.offset;M.offset=0;w=M.size;M.size=0;v=M.state;M.state=1;y=M.stride;M.stride=0;x=M.type;M.type=h.dtype;
z=M.w;M.w=0;A=M.x;M.x=0;C=M.y;M.y=0;D=M.z;M.z=0;F=q.vert;q.vert=2;T=q.frag;q.frag=1;ja.dirty=!0;c(u,a,d);G.depth_enable=e;f&&(N.cpuTime+=performance.now()-g);b.count=k;ca[3]=p;ca[4]=l;M.buffer=m;M.divisor=t;M.normalized=r;M.offset=n;M.size=w;M.state=v;M.stride=y;M.type=x;M.w=z;M.x=A;M.y=C;M.z=D;q.vert=F;q.frag=T;ja.dirty=!0},batch:function(d,e){var g,p,q,J;g=W.next;g!==W.cur&&(g?f.bindFramebuffer(36160,g.framebuffer):f.bindFramebuffer(36160,null),W.cur=g);if(ja.dirty){var E,M,O;g=G.dither;g!==ja.dither&&
(g?f.enable(3024):f.disable(3024),ja.dither=g);g=G.blend_enable;g!==ja.blend_enable&&(g?f.enable(3042):f.disable(3042),ja.blend_enable=g);g=C[0];E=C[1];M=C[2];O=C[3];if(g!==c[0]||E!==c[1]||M!==c[2]||O!==c[3])f.blendColor(g,E,M,O),c[0]=g,c[1]=E,c[2]=M,c[3]=O;g=l[0];E=l[1];if(g!==a[0]||E!==a[1])f.blendEquationSeparate(g,E),a[0]=g,a[1]=E;g=X[0];E=X[1];M=X[2];O=X[3];if(g!==x[0]||E!==x[1]||M!==x[2]||O!==x[3])f.blendFuncSeparate(g,E,M,O),x[0]=g,x[1]=E,x[2]=M,x[3]=O;g=G.depth_func;g!==ja.depth_func&&(f.depthFunc(g),
ja.depth_func=g);g=Y[0];E=Y[1];if(g!==fa[0]||E!==fa[1])f.depthRange(g,E),fa[0]=g,fa[1]=E;g=G.depth_mask;g!==ja.depth_mask&&(f.depthMask(g),ja.depth_mask=g);g=na[0];E=na[1];M=na[2];O=na[3];if(g!==ia[0]||E!==ia[1]||M!==ia[2]||O!==ia[3])f.colorMask(g,E,M,O),ia[0]=g,ia[1]=E,ia[2]=M,ia[3]=O;g=G.cull_enable;g!==ja.cull_enable&&(g?f.enable(2884):f.disable(2884),ja.cull_enable=g);g=G.cull_face;g!==ja.cull_face&&(f.cullFace(g),ja.cull_face=g);g=G.frontFace;g!==ja.frontFace&&(f.frontFace(g),ja.frontFace=g);
g=G.lineWidth;g!==ja.lineWidth&&(f.lineWidth(g),ja.lineWidth=g);g=G.polygonOffset_enable;g!==ja.polygonOffset_enable&&(g?f.enable(32823):f.disable(32823),ja.polygonOffset_enable=g);g=R[0];E=R[1];if(g!==I[0]||E!==I[1])f.polygonOffset(g,E),I[0]=g,I[1]=E;g=G.sample_alpha;g!==ja.sample_alpha&&(g?f.enable(32926):f.disable(32926),ja.sample_alpha=g);g=G.sample_enable;g!==ja.sample_enable&&(g?f.enable(32928):f.disable(32928),ja.sample_enable=g);g=y[0];E=y[1];if(g!==k[0]||E!==k[1])f.sampleCoverage(g,E),k[0]=
g,k[1]=E;g=G.stencil_enable;g!==ja.stencil_enable&&(g?f.enable(2960):f.disable(2960),ja.stencil_enable=g);g=G.stencil_mask;g!==ja.stencil_mask&&(f.stencilMask(g),ja.stencil_mask=g);g=za[0];E=za[1];M=za[2];if(g!==oa[0]||E!==oa[1]||M!==oa[2])f.stencilFunc(g,E,M),oa[0]=g,oa[1]=E,oa[2]=M;g=da[0];E=da[1];M=da[2];O=da[3];if(g!==T[0]||E!==T[1]||M!==T[2]||O!==T[3])f.stencilOpSeparate(g,E,M,O),T[0]=g,T[1]=E,T[2]=M,T[3]=O;g=w[0];E=w[1];M=w[2];O=w[3];if(g!==K[0]||E!==K[1]||M!==K[2]||O!==K[3])f.stencilOpSeparate(g,
E,M,O),K[0]=g,K[1]=E,K[2]=M,K[3]=O;g=G.scissor_enable;g!==ja.scissor_enable&&(g?f.enable(3089):f.disable(3089),ja.scissor_enable=g);g=P[0];E=P[1];M=P[2];O=P[3];if(g!==Q[0]||E!==Q[1]||M!==Q[2]||O!==Q[3])f.scissor(g,E,M,O),Q[0]=g,Q[1]=E,Q[2]=M,Q[3]=O;g=ma[0];E=ma[1];M=ma[2];O=ma[3];if(g!==ra[0]||E!==ra[1]||M!==ra[2]||O!==ra[3])f.viewport(g,E,M,O),ra[0]=g,ra[1]=E,ra[2]=M,ra[3]=O}f.disable(2929);ja.depth_enable=!1;if(g=ja.profile)p=performance.now(),N.count+=e;f.useProgram(U.program);D.setVAO(null);E=
V.location;M=m[E];M.buffer||f.enableVertexAttribArray(E);if(M.type!==h.dtype||2!==M.size||M.buffer!==h||!1!==M.normalized||0!==M.offset||0!==M.stride)f.bindBuffer(34962,h.buffer),f.vertexAttribPointer(E,2,h.dtype,!1,0,0),M.type=h.dtype,M.size=2,M.buffer=h,M.normalized=!1,M.offset=0,M.stride=0;q=v.call(this,u,J,q);"number"!==typeof q&&S.commandRaise(A,H);f.uniform1f(Z.location,q);(E=b.elements)?f.bindBuffer(34963,E.buffer.buffer):D.currentVAO&&(E=z.getElements(D.currentVAO.elements))&&f.bindBuffer(34963,
E.buffer.buffer);M=b.primitive;O=b.offset;for(q=0;q<e;++q){J=d[q];var ca,Ua,r,n,B,ua,va;ca=J.color;ba(ca)&&4===ca.length||S.commandRaise(F,H);J=ca[0];r=ca[1];B=ca[2];ca=ca[3];q&&Ua===J&&n===r&&ua===B&&va===ca||(Ua=J,n=r,ua=B,va=ca,f.uniform4f(t.location,J,r,B,ca));E?f.drawElements(M,3,E.type,O<<(E.type-5121>>1)):f.drawArrays(M,O,3)}ja.dirty=!0;D.setVAO(null);g&&(N.cpuTime+=performance.now()-p)}}},"$13,color,position":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z){var t,V,m,u,X,b,z,W,f,ba,G,q,ca,D,C,c,
l,a,ia,x,na,Fa,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da;t=e.attributes;V=e.context;m=e.current;u=e.draw;X=e.framebuffer;b=e.gl;z=e.next;W=e.shader;f=e.uniforms;ba=e.vao;G=z.blend_color;q=m.blend_color;ca=z.blend_equation;D=m.blend_equation;C=z.blend_func;c=m.blend_func;l=z.colorMask;a=m.colorMask;ia=z.depth_range;x=m.depth_range;na=z.polygonOffset_offset;Fa=m.polygonOffset_offset;Y=z.sample_coverage;fa=m.sample_coverage;R=z.scissor_box;I=m.scissor_box;y=z.stencil_func;k=m.stencil_func;P=z.stencil_opBack;Q=m.stencil_opBack;
za=z.stencil_opFront;oa=m.stencil_opFront;w=z.viewport;K=m.viewport;da=[1,0,0,1];return{draw:function(e){var f,v,u;e=X.next;e!==X.cur&&(e?b.bindFramebuffer(36160,e.framebuffer):b.bindFramebuffer(36160,null),X.cur=e);if(m.dirty){var A;e=z.dither;e!==m.dither&&(e?b.enable(3024):b.disable(3024),m.dither=e);e=z.blend_enable;e!==m.blend_enable&&(e?b.enable(3042):b.disable(3042),m.blend_enable=e);e=G[0];v=G[1];u=G[2];A=G[3];if(e!==q[0]||v!==q[1]||u!==q[2]||A!==q[3])b.blendColor(e,v,u,A),q[0]=e,q[1]=v,q[2]=
u,q[3]=A;e=ca[0];v=ca[1];if(e!==D[0]||v!==D[1])b.blendEquationSeparate(e,v),D[0]=e,D[1]=v;e=C[0];v=C[1];u=C[2];A=C[3];if(e!==c[0]||v!==c[1]||u!==c[2]||A!==c[3])b.blendFuncSeparate(e,v,u,A),c[0]=e,c[1]=v,c[2]=u,c[3]=A;e=z.depth_enable;e!==m.depth_enable&&(e?b.enable(2929):b.disable(2929),m.depth_enable=e);e=z.depth_func;e!==m.depth_func&&(b.depthFunc(e),m.depth_func=e);e=ia[0];v=ia[1];if(e!==x[0]||v!==x[1])b.depthRange(e,v),x[0]=e,x[1]=v;e=z.depth_mask;e!==m.depth_mask&&(b.depthMask(e),m.depth_mask=
e);e=l[0];v=l[1];u=l[2];A=l[3];if(e!==a[0]||v!==a[1]||u!==a[2]||A!==a[3])b.colorMask(e,v,u,A),a[0]=e,a[1]=v,a[2]=u,a[3]=A;e=z.cull_enable;e!==m.cull_enable&&(e?b.enable(2884):b.disable(2884),m.cull_enable=e);e=z.cull_face;e!==m.cull_face&&(b.cullFace(e),m.cull_face=e);e=z.frontFace;e!==m.frontFace&&(b.frontFace(e),m.frontFace=e);e=z.polygonOffset_enable;e!==m.polygonOffset_enable&&(e?b.enable(32823):b.disable(32823),m.polygonOffset_enable=e);e=na[0];v=na[1];if(e!==Fa[0]||v!==Fa[1])b.polygonOffset(e,
v),Fa[0]=e,Fa[1]=v;e=z.sample_alpha;e!==m.sample_alpha&&(e?b.enable(32926):b.disable(32926),m.sample_alpha=e);e=z.sample_enable;e!==m.sample_enable&&(e?b.enable(32928):b.disable(32928),m.sample_enable=e);e=Y[0];v=Y[1];if(e!==fa[0]||v!==fa[1])b.sampleCoverage(e,v),fa[0]=e,fa[1]=v;e=z.stencil_enable;e!==m.stencil_enable&&(e?b.enable(2960):b.disable(2960),m.stencil_enable=e);e=z.stencil_mask;e!==m.stencil_mask&&(b.stencilMask(e),m.stencil_mask=e);e=y[0];v=y[1];u=y[2];if(e!==k[0]||v!==k[1]||u!==k[2])b.stencilFunc(e,
v,u),k[0]=e,k[1]=v,k[2]=u;e=za[0];v=za[1];u=za[2];A=za[3];if(e!==oa[0]||v!==oa[1]||u!==oa[2]||A!==oa[3])b.stencilOpSeparate(e,v,u,A),oa[0]=e,oa[1]=v,oa[2]=u,oa[3]=A;e=P[0];v=P[1];u=P[2];A=P[3];if(e!==Q[0]||v!==Q[1]||u!==Q[2]||A!==Q[3])b.stencilOpSeparate(e,v,u,A),Q[0]=e,Q[1]=v,Q[2]=u,Q[3]=A;e=z.scissor_enable;e!==m.scissor_enable&&(e?b.enable(3089):b.disable(3089),m.scissor_enable=e);e=R[0];v=R[1];u=R[2];A=R[3];if(e!==I[0]||v!==I[1]||u!==I[2]||A!==I[3])b.scissor(e,v,u,A),I[0]=e,I[1]=v,I[2]=u,I[3]=
A;e=w[0];v=w[1];u=w[2];A=w[3];if(e!==K[0]||v!==K[1]||u!==K[2]||A!==K[3])b.viewport(e,v,u,A),K[0]=e,K[1]=v,K[2]=u,K[3]=A}b.lineWidth(1);m.lineWidth=1;if(e=m.profile)f=performance.now(),N.count++;b.useProgram(g.program);ba.setVAO(null);v=Z.location;u=t[v];u.buffer||b.enableVertexAttribArray(v);if(u.type!==h.dtype||2!==u.size||u.buffer!==h||!1!==u.normalized||0!==u.offset||0!==u.stride)b.bindBuffer(34962,h.buffer),b.vertexAttribPointer(v,2,h.dtype,!1,0,0),u.type=h.dtype,u.size=2,u.buffer=h,u.normalized=
!1,u.offset=0,u.stride=0;b.uniform4f(F.location,1,0,0,1);p&&b.bindBuffer(34963,p.buffer.buffer);v=p.primType;u=p.vertCount-0;0<=u||S.commandRaise(d,H);u&&(b.drawElements(v,u,p.type,0<<(p.type-5121>>1)),m.dirty=!0,ba.setVAO(null),e&&(N.cpuTime+=performance.now()-f))},scope:function(a,b,c){var d,e,g,k,l,p,q,t,w,v,y,r,n,x,A,C,D,F,G,I,K,P;d=z.lineWidth;z.lineWidth=1;if(e=m.profile)g=performance.now(),N.count++;k=u.elements;u.elements=E;l=u.offset;u.offset=0;p=E.vertCount-0;0<=p||S.commandRaise(J,H);q=
u.count;u.count=p;t=E.primType;p=u.primitive;u.primitive=t;t=f[3];f[3]=da;w=M.buffer;M.buffer=h;v=M.divisor;M.divisor=0;y=M.normalized;M.normalized=!1;r=M.offset;M.offset=0;n=M.size;M.size=0;x=M.state;M.state=1;A=M.stride;M.stride=0;C=M.type;M.type=h.dtype;D=M.w;M.w=0;F=M.x;M.x=0;G=M.y;M.y=0;I=M.z;M.z=0;K=W.vert;W.vert=2;P=W.frag;W.frag=1;m.dirty=!0;b(V,a,c);z.lineWidth=d;e&&(N.cpuTime+=performance.now()-g);u.elements=k;u.offset=l;u.count=q;u.primitive=p;f[3]=t;M.buffer=w;M.divisor=v;M.normalized=
y;M.offset=r;M.size=n;M.state=x;M.stride=A;M.type=C;M.w=D;M.x=F;M.y=G;M.z=I;W.vert=K;W.frag=P;m.dirty=!0},batch:function(d,e){var f,g,p;f=X.next;f!==X.cur&&(f?b.bindFramebuffer(36160,f.framebuffer):b.bindFramebuffer(36160,null),X.cur=f);if(m.dirty){var u,E;f=z.dither;f!==m.dither&&(f?b.enable(3024):b.disable(3024),m.dither=f);f=z.blend_enable;f!==m.blend_enable&&(f?b.enable(3042):b.disable(3042),m.blend_enable=f);f=G[0];p=G[1];u=G[2];E=G[3];if(f!==q[0]||p!==q[1]||u!==q[2]||E!==q[3])b.blendColor(f,
p,u,E),q[0]=f,q[1]=p,q[2]=u,q[3]=E;f=ca[0];p=ca[1];if(f!==D[0]||p!==D[1])b.blendEquationSeparate(f,p),D[0]=f,D[1]=p;f=C[0];p=C[1];u=C[2];E=C[3];if(f!==c[0]||p!==c[1]||u!==c[2]||E!==c[3])b.blendFuncSeparate(f,p,u,E),c[0]=f,c[1]=p,c[2]=u,c[3]=E;f=z.depth_enable;f!==m.depth_enable&&(f?b.enable(2929):b.disable(2929),m.depth_enable=f);f=z.depth_func;f!==m.depth_func&&(b.depthFunc(f),m.depth_func=f);f=ia[0];p=ia[1];if(f!==x[0]||p!==x[1])b.depthRange(f,p),x[0]=f,x[1]=p;f=z.depth_mask;f!==m.depth_mask&&(b.depthMask(f),
m.depth_mask=f);f=l[0];p=l[1];u=l[2];E=l[3];if(f!==a[0]||p!==a[1]||u!==a[2]||E!==a[3])b.colorMask(f,p,u,E),a[0]=f,a[1]=p,a[2]=u,a[3]=E;f=z.cull_enable;f!==m.cull_enable&&(f?b.enable(2884):b.disable(2884),m.cull_enable=f);f=z.cull_face;f!==m.cull_face&&(b.cullFace(f),m.cull_face=f);f=z.frontFace;f!==m.frontFace&&(b.frontFace(f),m.frontFace=f);f=z.polygonOffset_enable;f!==m.polygonOffset_enable&&(f?b.enable(32823):b.disable(32823),m.polygonOffset_enable=f);f=na[0];p=na[1];if(f!==Fa[0]||p!==Fa[1])b.polygonOffset(f,
p),Fa[0]=f,Fa[1]=p;f=z.sample_alpha;f!==m.sample_alpha&&(f?b.enable(32926):b.disable(32926),m.sample_alpha=f);f=z.sample_enable;f!==m.sample_enable&&(f?b.enable(32928):b.disable(32928),m.sample_enable=f);f=Y[0];p=Y[1];if(f!==fa[0]||p!==fa[1])b.sampleCoverage(f,p),fa[0]=f,fa[1]=p;f=z.stencil_enable;f!==m.stencil_enable&&(f?b.enable(2960):b.disable(2960),m.stencil_enable=f);f=z.stencil_mask;f!==m.stencil_mask&&(b.stencilMask(f),m.stencil_mask=f);f=y[0];p=y[1];u=y[2];if(f!==k[0]||p!==k[1]||u!==k[2])b.stencilFunc(f,
p,u),k[0]=f,k[1]=p,k[2]=u;f=za[0];p=za[1];u=za[2];E=za[3];if(f!==oa[0]||p!==oa[1]||u!==oa[2]||E!==oa[3])b.stencilOpSeparate(f,p,u,E),oa[0]=f,oa[1]=p,oa[2]=u,oa[3]=E;f=P[0];p=P[1];u=P[2];E=P[3];if(f!==Q[0]||p!==Q[1]||u!==Q[2]||E!==Q[3])b.stencilOpSeparate(f,p,u,E),Q[0]=f,Q[1]=p,Q[2]=u,Q[3]=E;f=z.scissor_enable;f!==m.scissor_enable&&(f?b.enable(3089):b.disable(3089),m.scissor_enable=f);f=R[0];p=R[1];u=R[2];E=R[3];if(f!==I[0]||p!==I[1]||u!==I[2]||E!==I[3])b.scissor(f,p,u,E),I[0]=f,I[1]=p,I[2]=u,I[3]=
E;f=w[0];p=w[1];u=w[2];E=w[3];if(f!==K[0]||p!==K[1]||u!==K[2]||E!==K[3])b.viewport(f,p,u,E),K[0]=f,K[1]=p,K[2]=u,K[3]=E}b.lineWidth(1);m.lineWidth=1;if(f=m.profile)g=performance.now(),N.count+=e;b.useProgram(U.program);ba.setVAO(null);p=Z.location;u=t[p];u.buffer||b.enableVertexAttribArray(p);if(u.type!==h.dtype||2!==u.size||u.buffer!==h||!1!==u.normalized||0!==u.offset||0!==u.stride)b.bindBuffer(34962,h.buffer),b.vertexAttribPointer(p,2,h.dtype,!1,0,0),u.type=h.dtype,u.size=2,u.buffer=h,u.normalized=
!1,u.offset=0,u.stride=0;b.uniform4f(F.location,1,0,0,1);v&&b.bindBuffer(34963,v.buffer.buffer);u=v.primType;E=v.vertCount-0;0<=E||S.commandRaise(A,H);for(p=0;p<e;++p)E&&b.drawElements(u,E,v.type,0<<(v.type-5121>>1));m.dirty=!0;ba.setVAO(null);f&&(N.cpuTime+=performance.now()-g)}}},"$20,mouse,position,t,texture":function(e,S,H,N,g,h,p,d,E,J,M,U,v,A,F,Z,t,V,m,u,X,b,z,W,f){var ba,G,q,ca,D,C,c,l,a,ia,x,na,Fa,Y,fa,R,I,y,k,P,Q,za,oa,w,K,da,T,ma,ra,Ca,xa,ga,Da,ka,pa,Aa;ba=e.attributes;G=e.context;q=e.current;
ca=e.draw;D=e.elements;C=e.framebuffer;c=e.gl;l=e.isArrayLike;a=e.next;ia=e.shader;x=e.uniforms;na=e.vao;Fa=a.blend_color;Y=q.blend_color;fa=a.blend_equation;R=q.blend_equation;I=a.blend_func;y=q.blend_func;k=a.colorMask;P=q.colorMask;Q=a.depth_range;za=q.depth_range;oa=a.polygonOffset_offset;w=q.polygonOffset_offset;K=a.sample_coverage;da=q.sample_coverage;T=a.scissor_box;ma=q.scissor_box;ra=a.stencil_func;Ca=q.stencil_func;xa=a.stencil_opBack;ga=q.stencil_opBack;Da=a.stencil_opFront;ka=q.stencil_opFront;
pa=a.viewport;Aa=q.viewport;return{draw:function(e){var m,t,u,r;m=C.next;m!==C.cur&&(m?c.bindFramebuffer(36160,m.framebuffer):c.bindFramebuffer(36160,null),C.cur=m);if(q.dirty){var n;m=a.dither;m!==q.dither&&(m?c.enable(3024):c.disable(3024),q.dither=m);m=a.blend_enable;m!==q.blend_enable&&(m?c.enable(3042):c.disable(3042),q.blend_enable=m);m=Fa[0];u=Fa[1];r=Fa[2];n=Fa[3];if(m!==Y[0]||u!==Y[1]||r!==Y[2]||n!==Y[3])c.blendColor(m,u,r,n),Y[0]=m,Y[1]=u,Y[2]=r,Y[3]=n;m=fa[0];u=fa[1];if(m!==R[0]||u!==R[1])c.blendEquationSeparate(m,
u),R[0]=m,R[1]=u;m=I[0];u=I[1];r=I[2];n=I[3];if(m!==y[0]||u!==y[1]||r!==y[2]||n!==y[3])c.blendFuncSeparate(m,u,r,n),y[0]=m,y[1]=u,y[2]=r,y[3]=n;m=a.depth_enable;m!==q.depth_enable&&(m?c.enable(2929):c.disable(2929),q.depth_enable=m);m=a.depth_func;m!==q.depth_func&&(c.depthFunc(m),q.depth_func=m);m=Q[0];u=Q[1];if(m!==za[0]||u!==za[1])c.depthRange(m,u),za[0]=m,za[1]=u;m=a.depth_mask;m!==q.depth_mask&&(c.depthMask(m),q.depth_mask=m);m=k[0];u=k[1];r=k[2];n=k[3];if(m!==P[0]||u!==P[1]||r!==P[2]||n!==P[3])c.colorMask(m,
u,r,n),P[0]=m,P[1]=u,P[2]=r,P[3]=n;m=a.cull_enable;m!==q.cull_enable&&(m?c.enable(2884):c.disable(2884),q.cull_enable=m);m=a.cull_face;m!==q.cull_face&&(c.cullFace(m),q.cull_face=m);m=a.frontFace;m!==q.frontFace&&(c.frontFace(m),q.frontFace=m);m=a.lineWidth;m!==q.lineWidth&&(c.lineWidth(m),q.lineWidth=m);m=a.polygonOffset_enable;m!==q.polygonOffset_enable&&(m?c.enable(32823):c.disable(32823),q.polygonOffset_enable=m);m=oa[0];u=oa[1];if(m!==w[0]||u!==w[1])c.polygonOffset(m,u),w[0]=m,w[1]=u;m=a.sample_alpha;
m!==q.sample_alpha&&(m?c.enable(32926):c.disable(32926),q.sample_alpha=m);m=a.sample_enable;m!==q.sample_enable&&(m?c.enable(32928):c.disable(32928),q.sample_enable=m);m=K[0];u=K[1];if(m!==da[0]||u!==da[1])c.sampleCoverage(m,u),da[0]=m,da[1]=u;m=a.stencil_enable;m!==q.stencil_enable&&(m?c.enable(2960):c.disable(2960),q.stencil_enable=m);m=a.stencil_mask;m!==q.stencil_mask&&(c.stencilMask(m),q.stencil_mask=m);m=ra[0];u=ra[1];r=ra[2];if(m!==Ca[0]||u!==Ca[1]||r!==Ca[2])c.stencilFunc(m,u,r),Ca[0]=m,Ca[1]=
u,Ca[2]=r;m=Da[0];u=Da[1];r=Da[2];n=Da[3];if(m!==ka[0]||u!==ka[1]||r!==ka[2]||n!==ka[3])c.stencilOpSeparate(m,u,r,n),ka[0]=m,ka[1]=u,ka[2]=r,ka[3]=n;m=xa[0];u=xa[1];r=xa[2];n=xa[3];if(m!==ga[0]||u!==ga[1]||r!==ga[2]||n!==ga[3])c.stencilOpSeparate(m,u,r,n),ga[0]=m,ga[1]=u,ga[2]=r,ga[3]=n;m=a.scissor_enable;m!==q.scissor_enable&&(m?c.enable(3089):c.disable(3089),q.scissor_enable=m);m=T[0];u=T[1];r=T[2];n=T[3];if(m!==ma[0]||u!==ma[1]||r!==ma[2]||n!==ma[3])c.scissor(m,u,r,n),ma[0]=m,ma[1]=u,ma[2]=r,ma[3]=
n;m=pa[0];u=pa[1];r=pa[2];n=pa[3];if(m!==Aa[0]||u!==Aa[1]||r!==Aa[2]||n!==Aa[3])c.viewport(m,u,r,n),Aa[0]=m,Aa[1]=u,Aa[2]=r,Aa[3]=n;q.dirty=!1}if(m=q.profile)t=performance.now(),N.count++;c.useProgram(g.program);na.setVAO(null);u=z.location;r=ba[u];r.buffer||c.enableVertexAttribArray(u);if(r.type!==h.dtype||2!==r.size||r.buffer!==h||!1!==r.normalized||0!==r.offset||0!==r.stride)c.bindBuffer(34962,h.buffer),c.vertexAttribPointer(u,2,h.dtype,!1,0,0),r.type=h.dtype,r.size=2,r.buffer=h,r.normalized=!1,
r.offset=0,r.stride=0;u=p.call(this,G,e,0);l(u)&&2===u.length||S.commandRaise(d,H);c.uniform2f(b.location,u[0],u[1]);e=E.call(this,G,e,0);"number"!==typeof e&&S.commandRaise(J,H);c.uniform1f(W.location,e);c.uniform1i(f.location,M.bind());(e=ca.elements)?c.bindBuffer(34963,e.buffer.buffer):na.currentVAO&&(e=D.getElements(na.currentVAO.elements))&&c.bindBuffer(34963,e.buffer.buffer);u=ca.primitive;r=ca.offset;e?c.drawElements(u,3,e.type,r<<(e.type-5121>>1)):c.drawArrays(u,r,3);na.setVAO(null);m&&(N.cpuTime+=
performance.now()-t);M.unbind()},scope:function(a,b,c){var d,e,f,g,k,m,l,p,t,u,w,y,z,C,E,D,I,J,H,K;if(d=q.profile)e=performance.now(),N.count++;f=ca.count;ca.count=3;g=U.call(this,G,a,c);k=x[3];x[3]=g;m=v.call(this,G,a,c);g=x[4];x[4]=m;m=x[5];x[5]=A;l=F.buffer;F.buffer=h;p=F.divisor;F.divisor=0;t=F.normalized;F.normalized=!1;u=F.offset;F.offset=0;w=F.size;F.size=0;y=F.state;F.state=1;z=F.stride;F.stride=0;C=F.type;F.type=h.dtype;E=F.w;F.w=0;D=F.x;F.x=0;I=F.y;F.y=0;J=F.z;F.z=0;H=ia.vert;ia.vert=2;
K=ia.frag;ia.frag=1;b(G,a,c);d&&(N.cpuTime+=performance.now()-e);ca.count=f;x[3]=k;x[4]=g;x[5]=m;F.buffer=l;F.divisor=p;F.normalized=t;F.offset=u;F.size=w;F.state=y;F.stride=z;F.type=C;F.w=E;F.x=D;F.y=I;F.z=J;ia.vert=H;ia.frag=K},batch:function(d,e){var g,p,r;g=C.next;g!==C.cur&&(g?c.bindFramebuffer(36160,g.framebuffer):c.bindFramebuffer(36160,null),C.cur=g);if(q.dirty){var n,v,x;g=a.dither;g!==q.dither&&(g?c.enable(3024):c.disable(3024),q.dither=g);g=a.blend_enable;g!==q.blend_enable&&(g?c.enable(3042):
c.disable(3042),q.blend_enable=g);g=Fa[0];n=Fa[1];v=Fa[2];x=Fa[3];if(g!==Y[0]||n!==Y[1]||v!==Y[2]||x!==Y[3])c.blendColor(g,n,v,x),Y[0]=g,Y[1]=n,Y[2]=v,Y[3]=x;g=fa[0];n=fa[1];if(g!==R[0]||n!==R[1])c.blendEquationSeparate(g,n),R[0]=g,R[1]=n;g=I[0];n=I[1];v=I[2];x=I[3];if(g!==y[0]||n!==y[1]||v!==y[2]||x!==y[3])c.blendFuncSeparate(g,n,v,x),y[0]=g,y[1]=n,y[2]=v,y[3]=x;g=a.depth_enable;g!==q.depth_enable&&(g?c.enable(2929):c.disable(2929),q.depth_enable=g);g=a.depth_func;g!==q.depth_func&&(c.depthFunc(g),
q.depth_func=g);g=Q[0];n=Q[1];if(g!==za[0]||n!==za[1])c.depthRange(g,n),za[0]=g,za[1]=n;g=a.depth_mask;g!==q.depth_mask&&(c.depthMask(g),q.depth_mask=g);g=k[0];n=k[1];v=k[2];x=k[3];if(g!==P[0]||n!==P[1]||v!==P[2]||x!==P[3])c.colorMask(g,n,v,x),P[0]=g,P[1]=n,P[2]=v,P[3]=x;g=a.cull_enable;g!==q.cull_enable&&(g?c.enable(2884):c.disable(2884),q.cull_enable=g);g=a.cull_face;g!==q.cull_face&&(c.cullFace(g),q.cull_face=g);g=a.frontFace;g!==q.frontFace&&(c.frontFace(g),q.frontFace=g);g=a.lineWidth;g!==q.lineWidth&&
(c.lineWidth(g),q.lineWidth=g);g=a.polygonOffset_enable;g!==q.polygonOffset_enable&&(g?c.enable(32823):c.disable(32823),q.polygonOffset_enable=g);g=oa[0];n=oa[1];if(g!==w[0]||n!==w[1])c.polygonOffset(g,n),w[0]=g,w[1]=n;g=a.sample_alpha;g!==q.sample_alpha&&(g?c.enable(32926):c.disable(32926),q.sample_alpha=g);g=a.sample_enable;g!==q.sample_enable&&(g?c.enable(32928):c.disable(32928),q.sample_enable=g);g=K[0];n=K[1];if(g!==da[0]||n!==da[1])c.sampleCoverage(g,n),da[0]=g,da[1]=n;g=a.stencil_enable;g!==
q.stencil_enable&&(g?c.enable(2960):c.disable(2960),q.stencil_enable=g);g=a.stencil_mask;g!==q.stencil_mask&&(c.stencilMask(g),q.stencil_mask=g);g=ra[0];n=ra[1];v=ra[2];if(g!==Ca[0]||n!==Ca[1]||v!==Ca[2])c.stencilFunc(g,n,v),Ca[0]=g,Ca[1]=n,Ca[2]=v;g=Da[0];n=Da[1];v=Da[2];x=Da[3];if(g!==ka[0]||n!==ka[1]||v!==ka[2]||x!==ka[3])c.stencilOpSeparate(g,n,v,x),ka[0]=g,ka[1]=n,ka[2]=v,ka[3]=x;g=xa[0];n=xa[1];v=xa[2];x=xa[3];if(g!==ga[0]||n!==ga[1]||v!==ga[2]||x!==ga[3])c.stencilOpSeparate(g,n,v,x),ga[0]=
g,ga[1]=n,ga[2]=v,ga[3]=x;g=a.scissor_enable;g!==q.scissor_enable&&(g?c.enable(3089):c.disable(3089),q.scissor_enable=g);g=T[0];n=T[1];v=T[2];x=T[3];if(g!==ma[0]||n!==ma[1]||v!==ma[2]||x!==ma[3])c.scissor(g,n,v,x),ma[0]=g,ma[1]=n,ma[2]=v,ma[3]=x;g=pa[0];n=pa[1];v=pa[2];x=pa[3];if(g!==Aa[0]||n!==Aa[1]||v!==Aa[2]||x!==Aa[3])c.viewport(g,n,v,x),Aa[0]=g,Aa[1]=n,Aa[2]=v,Aa[3]=x;q.dirty=!1}if(g=q.profile)p=performance.now(),N.count+=e;c.useProgram(Z.program);na.setVAO(null);n=z.location;v=ba[n];v.buffer||
c.enableVertexAttribArray(n);if(v.type!==h.dtype||2!==v.size||v.buffer!==h||!1!==v.normalized||0!==v.offset||0!==v.stride)c.bindBuffer(34962,h.buffer),c.vertexAttribPointer(n,2,h.dtype,!1,0,0),v.type=h.dtype,v.size=2,v.buffer=h,v.normalized=!1,v.offset=0,v.stride=0;n=t.call(this,G,void 0,r);l(n)&&2===n.length||S.commandRaise(V,H);c.uniform2f(b.location,n[0],n[1]);r=m.call(this,G,void 0,r);"number"!==typeof r&&S.commandRaise(u,H);c.uniform1f(W.location,r);c.uniform1i(f.location,X.bind());(n=ca.elements)?
c.bindBuffer(34963,n.buffer.buffer):na.currentVAO&&(n=D.getElements(na.currentVAO.elements))&&c.bindBuffer(34963,n.buffer.buffer);v=ca.primitive;x=ca.offset;for(r=0;r<e;++r)n?c.drawElements(v,3,n.type,x<<(n.type-5121>>1)):c.drawArrays(v,x,3);X.unbind();na.setVAO(null);g&&(N.cpuTime+=performance.now()-p)}}}}},{}],25:[function(X,ia,Fa){var e=X("./sorted-object-keys");ia.exports=function(S,H){for(var N=e(H),g=0;g<N.length;++g)S[N[g]]=H[N[g]];return S}},{"./sorted-object-keys":34}],26:[function(X,ia,
Fa){function e(e,g,h,p,d,E){for(var J=0;J<g;++J)for(var H=e[J],S=0;S<h;++S)for(var v=H[S],A=0;A<p;++A)d[E++]=v[A]}function S(H,g,h,p,d){for(var E=1,J=h+1;J<g.length;++J)E*=g[J];var M=g[h];if(4===g.length-h){var U=g[h+1],v=g[h+2];g=g[h+3];for(J=0;J<M;++J)e(H[J],U,v,g,p,d),d+=E}else for(J=0;J<M;++J)S(H[J],g,h+1,p,d),d+=E}var H=X("./pool");ia.exports={shape:function(e){for(var g=[];e.length;e=e[0])g.push(e.length);return g},flatten:function(N,g,h,p){var d=1;if(g.length)for(var E=0;E<g.length;++E)d*=
g[E];else d=0;h=p||H.allocType(h,d);switch(g.length){case 0:break;case 1:p=g[0];for(g=0;g<p;++g)h[g]=N[g];break;case 2:p=g[0];g=g[1];for(E=d=0;E<p;++E)for(var J=N[E],M=0;M<g;++M)h[d++]=J[M];break;case 3:e(N,g[0],g[1],g[2],h,0);break;default:S(N,g,0,h,0)}return h}}},{"./pool":32}],27:[function(X,ia,Fa){var e=X("./is-typed-array");ia.exports=function(S){return Array.isArray(S)||e(S)}},{"./is-typed-array":30}],28:[function(X,ia,Fa){var e=X("./is-typed-array");ia.exports=function(S){return!!S&&"object"===
typeof S&&Array.isArray(S.shape)&&Array.isArray(S.stride)&&"number"===typeof S.offset&&S.shape.length===S.stride.length&&(Array.isArray(S.data)||e(S.data))}},{"./is-typed-array":30}],29:[function(X,ia,Fa){ia.exports=function(e){return!(e&e-1)&&!!e}},{}],30:[function(X,ia,Fa){ia.exports=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||
e instanceof Uint8ClampedArray}},{}],31:[function(X,ia,Fa){ia.exports=function(e,S){for(var H=Array(e),N=0;N<e;++N)H[N]=S(N);return H}},{}],32:[function(X,ia,Fa){function e(e){var g,h;g=(65535<e)<<4;e>>>=g;h=(255<e)<<3;e>>>=h;g|=h;h=(15<e)<<2;e>>>=h;g|=h;h=(3<e)<<1;return g|h|e>>>h>>1}function S(){function N(g){a:{for(var d=16;268435456>=d;d*=16)if(g<=d){g=d;break a}g=0}d=h[e(g)>>2];return 0<d.length?d.pop():new ArrayBuffer(g)}function g(g){h[e(g.byteLength)>>2].push(g)}var h=H(8,function(){return[]});
return{alloc:N,free:g,allocType:function(e,d){var g=null;switch(e){case 5120:g=new Int8Array(N(d),0,d);break;case 5121:g=new Uint8Array(N(d),0,d);break;case 5122:g=new Int16Array(N(2*d),0,d);break;case 5123:g=new Uint16Array(N(2*d),0,d);break;case 5124:g=new Int32Array(N(4*d),0,d);break;case 5125:g=new Uint32Array(N(4*d),0,d);break;case 5126:g=new Float32Array(N(4*d),0,d);break;default:return null}return g.length!==d?g.subarray(0,d):g},freeType:function(e){g(e.buffer)}}}var H=X("./loop");X=S();X.zero=
S();ia.exports=X},{"./loop":31}],33:[function(X,ia,Fa){ia.exports={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout}},{}],34:[function(X,ia,Fa){ia.exports=function(e){return Object.keys(e).sort()}},{}],35:[function(X,ia,Fa){var e=X("./pool"),S=new Float32Array(1),H=new Uint32Array(S.buffer);ia.exports=function(N){for(var g=
e.allocType(5123,N.length),h=0;h<N.length;++h)if(isNaN(N[h]))g[h]=65535;else if(Infinity===N[h])g[h]=31744;else if(-Infinity===N[h])g[h]=64512;else{S[0]=N[h];var p=H[0],d=p>>>31<<15,E=(p<<1>>>24)-127,p=p>>13&1023;g[h]=-24>E?d:-14>E?d+(p+1024>>-14-E):15<E?d+31744:d+(E+15<<10)+p}return g}},{"./pool":32}],36:[function(X,ia,Fa){var e=X("./sorted-object-keys");ia.exports=function(S){return e(S).map(function(e){return S[e]})}},{"./sorted-object-keys":34}],37:[function(X,ia,Fa){function e(e,d,g){function J(){var d=
window.innerWidth,h=window.innerHeight;e!==document.body&&(h=H.getBoundingClientRect(),d=h.right-h.left,h=h.bottom-h.top);H.width=g*d;H.height=g*h}var H=document.createElement("canvas");h(H.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});e.appendChild(H);e===document.body&&(H.style.position="absolute",h(e.style,{margin:0,padding:0}));var N;e!==document.body&&"function"===typeof ResizeObserver?(N=new ResizeObserver(function(){setTimeout(J)}),N.observe(e)):window.addEventListener("resize",
J,!1);J();return{canvas:H,onDestroy:function(){N?N.disconnect():window.removeEventListener("resize",J);e.removeChild(H)}}}function S(e,d){function g(h){try{return e.getContext(h,d)}catch(E){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}function H(e){if("string"===typeof e)return e.split();g(Array.isArray(e),"invalid extension array");return e}function N(e){return"string"===typeof e?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(e)):
e}var g=X("./util/check"),h=X("./util/extend");ia.exports=function(h){var d=h||{},E,J,M,U;h={};var v=[],A=[],F="undefined"===typeof window?1:window.devicePixelRatio,Z=!1,t=function(d){d&&g.raise(d)},V=function(){};"string"===typeof d?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),E=document.querySelector(d),g(E,"invalid query string for element")):"object"===typeof d?"string"===typeof d.nodeName&&"function"===typeof d.appendChild&&"function"===typeof d.getBoundingClientRect?
E=d:"function"===typeof d.drawArrays||"function"===typeof d.drawElements?(U=d,M=U.canvas):(g.constructor(d),"gl"in d?U=d.gl:"canvas"in d?M=N(d.canvas):"container"in d&&(J=N(d.container)),"attributes"in d&&(h=d.attributes,g.type(h,"object","invalid context attributes")),"extensions"in d&&(v=H(d.extensions)),"optionalExtensions"in d&&(A=H(d.optionalExtensions)),"onDone"in d&&(g.type(d.onDone,"function","invalid or missing onDone callback"),t=d.onDone),"profile"in d&&(Z=!!d.profile),"pixelRatio"in d&&
(F=+d.pixelRatio,g(0<F,"invalid pixel ratio"))):g.raise("invalid arguments to regl");E&&("canvas"===E.nodeName.toLowerCase()?M=E:J=E);if(!U){if(!M){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");E=e(J||document.body,t,F);if(!E)return null;M=E.canvas;V=E.onDestroy}void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!0);U=S(M,h)}return U?{gl:U,canvas:M,container:J,extensions:v,optionalExtensions:A,pixelRatio:F,profile:Z,onDone:t,onDestroy:V}:(V(),
t("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(X,ia,Fa){ia.exports=function(S,H){function N(d){var e=!1;"altKey"in d&&(e=e||d.altKey!==Z.alt,Z.alt=!!d.altKey);"shiftKey"in d&&(e=e||d.shiftKey!==Z.shift,Z.shift=!!d.shiftKey);"ctrlKey"in d&&(e=e||d.ctrlKey!==Z.control,Z.control=!!d.ctrlKey);"metaKey"in d&&(e=e||d.metaKey!==Z.meta,Z.meta=!!d.metaKey);return e}function g(d,g){var h=e.x(g),b=e.y(g);
"buttons"in g&&(d=g.buttons|0);if(d!==v||h!==A||b!==F||N(g))v=d|0,A=h||0,F=b||0,H&&H(v,A,F,Z)}function h(d){g(0,d)}function p(){if(v||A||F||Z.shift||Z.alt||Z.meta||Z.control)v=A=F=0,Z.shift=Z.alt=Z.control=Z.meta=!1,H&&H(0,0,0,Z)}function d(d){N(d)&&H&&H(v,A,F,Z)}function E(d){0===e.buttons(d)?g(0,d):g(v,d)}function J(d){g(v|e.buttons(d),d)}function M(d){g(v&~e.buttons(d),d)}function U(){t||(t=!0,S.addEventListener("mousemove",E),S.addEventListener("mousedown",J),S.addEventListener("mouseup",M),S.addEventListener("mouseleave",
h),S.addEventListener("mouseenter",h),S.addEventListener("mouseout",h),S.addEventListener("mouseover",h),S.addEventListener("blur",p),S.addEventListener("keyup",d),S.addEventListener("keydown",d),S.addEventListener("keypress",d),S!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}H||(H=S,S=window);var v=0,A=0,F=0,Z={shift:!1,alt:!1,control:!1,meta:!1},t=!1;U();var V={element:S};Object.defineProperties(V,
{enabled:{get:function(){return t},set:function(e){e?U():t&&(t=!1,S.removeEventListener("mousemove",E),S.removeEventListener("mousedown",J),S.removeEventListener("mouseup",M),S.removeEventListener("mouseleave",h),S.removeEventListener("mouseenter",h),S.removeEventListener("mouseout",h),S.removeEventListener("mouseover",h),S.removeEventListener("blur",p),S.removeEventListener("keyup",d),S.removeEventListener("keydown",d),S.removeEventListener("keypress",d),S!==window&&(window.removeEventListener("blur",
p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return v},enumerable:!0},x:{get:function(){return A},enumerable:!0},y:{get:function(){return F},enumerable:!0},mods:{get:function(){return Z},enumerable:!0}});return V};var e=X("mouse-event")},{"mouse-event":39}],39:[function(X,ia,Fa){function e(e){return e.target||e.srcElement||window}Fa.buttons=function(e){if("object"===typeof e){if("buttons"in
e)return e.buttons;if("which"in e){e=e.which;if(2===e)return 4;if(3===e)return 2;if(0<e)return 1<<e-1}else if("button"in e){e=e.button;if(1===e)return 4;if(2===e)return 2;if(0<=e)return 1<<e}}return 0};Fa.element=e;Fa.x=function(S){if("object"===typeof S){if("offsetX"in S)return S.offsetX;var H=e(S).getBoundingClientRect();return S.clientX-H.left}return 0};Fa.y=function(S){if("object"===typeof S){if("offsetY"in S)return S.offsetY;var H=e(S).getBoundingClientRect();return S.clientY-H.top}return 0}},
{}],40:[function(X,ia,Fa){function e(b,d){for(var e=0;e<b.length;++e)if(b[e]===d)return e;return-1}var S=X("./lib/util/check"),H=X("./lib/util/extend"),N=X("./lib/dynamic"),g=X("./lib/util/raf"),h=X("./lib/util/clock"),p=X("./lib/strings"),d=X("./lib/webgl"),E=X("./lib/extension"),J=X("./lib/limits"),M=X("./lib/buffer"),U=X("./lib/elements"),v=X("./lib/texture"),A=X("./lib/renderbuffer"),F=X("./lib/framebuffer"),Z=X("./lib/attribute"),t=X("./lib/shader"),V=X("./lib/read"),m=X("./lib/core"),u=X("./lib/stats"),
ja=X("./lib/timer");ia.exports=function(b){function z(){if(0===Da.length)I&&I.update(),Ha=null;else{Ha=g.next(z);c();for(var a=Da.length-1;0<=a;--a){var b=Da[a];b&&b(Q,null,0)}X.flush();I&&I.update()}}function W(){!Ha&&0<Da.length&&(Ha=g.next(z))}function f(){Ha&&(g.cancel(z),Ha=null)}function ba(a){a.preventDefault();ia=!0;f();ka.forEach(function(a){a()})}function G(a){X.getError();ia=!1;Fa.restore();da.restore();oa.restore();T.restore();ma.restore();ra.restore();K.restore();I&&I.restore();Ca.procs.refresh();
W();pa.forEach(function(a){a()})}function q(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(N.isDynamic(f))e[b]=N.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(N.isDynamic(f[g])){e[b]=N.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}S(!!a,"invalid args to regl({...})");S.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||
{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=H({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Ca.compile(a,f,e,d,g),k=h.draw,
l=h.batch,m=h.scope,p=[];return H(function(a,b){var d;ia&&S.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}
function ca(a,b){var c=0;Ca.procs.poll();var d=b.color;d&&(X.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(X.clearDepth(+b.depth),c|=256);"stencil"in b&&(X.clearStencil(b.stencil|0),c|=1024);S(!!c,"called regl.clear with no buffer specified");X.clear(c)}function D(a){S.type(a,"function","regl.frame() callback must be a function");Da.push(a);W();return{cancel:function(){function b(){var a=e(Da,b);Da[a]=Da[Da.length-1];--Da.length;0>=Da.length&&f()}var c=e(Da,a);S(0<=c,"cannot cancel a frame twice");
Da[c]=b}}}function C(){var a=xa.viewport,b=xa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=X.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=X.drawingBufferHeight}function c(){Q.tick+=1;Q.time=a();C();Ca.procs.poll()}function l(){T.refresh();C();Ca.procs.refresh();I&&I.update()}function a(){return(h()-y)/1E3}console.log("REGL args are:",b);b=d(b);console.log("REGL configs are:",b);if(!b)return null;var X=
b.gl,x=X.getContextAttributes(),ia=X.isContextLost(),Fa=E(X,b);if(!Fa)return null;var Y=p(),fa=u(),R=Fa.extensions,I=ja(X,R),y=h(),k=X.drawingBufferWidth,P=X.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:k,viewportHeight:P,framebufferWidth:k,framebufferHeight:P,drawingBufferWidth:k,drawingBufferHeight:P,pixelRatio:b.pixelRatio},k={elements:null,primitive:4,count:-1,offset:0,instances:-1},za=J(X,R),oa=M(X,fa,b,function(a){return K.destroyBuffer(a)}),w=U(X,R,oa,fa),K=Z(X,R,za,fa,oa,w,k),da=t(X,
Y,fa,b),T=v(X,R,za,function(){Ca.procs.poll()},Q,fa,b),ma=A(X,R,za,fa,b),ra=F(X,R,za,T,ma,fa),Ca=m(X,Y,R,za,oa,w,T,ra,{},K,da,k,Q,I,b),Y=V(X,ra,Ca.procs.poll,Q,x,R,za),xa=Ca.next,ga=X.canvas,Da=[],ka=[],pa=[],Aa=[b.onDestroy],Ha=null;ga&&(ga.addEventListener("webglcontextlost",ba,!1),ga.addEventListener("webglcontextrestored",G,!1));var O=ra.setFBO=q({framebuffer:N.define.call(null,1,"framebuffer")});l();x=H(q,{clear:function(a){S("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in
a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)O(H({framebuffer:a.framebuffer.faces[b]},a),ca);else O(a,ca);else ca(null,a)},prop:N.define.bind(null,1),context:N.define.bind(null,2),"this":N.define.bind(null,3),draw:q({}),buffer:function(a){return oa.create(a,34962,!1,!1)},elements:function(a){return w.create(a,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:ma.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:K.createVAO,attributes:x,frame:D,
on:function(a,b){S.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return D(b);case "lost":c=ka;break;case "restore":c=pa;break;case "destroy":c=Aa;break;default:S.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:za,hasExtension:function(a){return 0<=za.extensions.indexOf(a.toLowerCase())},read:Y,destroy:function(){Da.length=
0;f();ga&&(ga.removeEventListener("webglcontextlost",ba),ga.removeEventListener("webglcontextrestored",G));da.clear();ra.clear();ma.clear();K.clear();T.clear();w.clear();oa.clear();I&&I.clear();Aa.forEach(function(a){a()})},_gl:X,_refresh:l,poll:function(){c();I&&I.update()},now:a,stats:fa});b.onDone(null,x);return x}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,
"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
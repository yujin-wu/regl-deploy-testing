(function(){function B(Y,Za,c){function y(g,d){if(!Za[g]){if(!Y[g]){var z="function"==typeof require&&require;if(!d&&z)return z(g,!0);if(p)return p(g,!0);z=Error("Cannot find module '"+g+"'");throw z.code="MODULE_NOT_FOUND",z;}z=Za[g]={exports:{}};Y[g][0].call(z.exports,function(b){return y(Y[g][1][b]||b)},z,z.exports,B,Y,Za,c)}return Za[g].exports}for(var p="function"==typeof require&&require,P=0;P<c.length;P++)y(c[P]);return y}return B})()({1:[function(B,Y,Za){var c=B("../regl")(),y=B("mouse-change")(),
p=c.texture(),P=c({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform vec2 mouse;\n  uniform float t;\n  varying vec2 uv;\n  void main () {\n    float dist = length(gl_FragCoord.xy - mouse);\n    gl_FragColor = vec4(0.98 * texture2D(texture,\n      uv + cos(t) * vec2(0.5 - uv.y, uv.x - 0.5) - sin(2.0 * t) * (uv - 0.5)).rgb, 1) +\n      exp(-0.01 * dist) * vec4(\n        1.0 + cos(2.0 * t),\n        1.0 + cos(2.0 * t + 1.5),\n        1.0 + cos(2.0 * t + 3.0),\n        0.0);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(2.0 * position - 1.0, 0, 1);\n  }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{texture:p,mouse:function(g){var d=g.pixelRatio;return[y.x*d,g.viewportHeight-y.y*d]},t:function(g){return.01*g.tick}},count:3});c.frame(function(){c.clear({color:[0,0,0,1]});P();p({copy:!0})})},{"../regl":40,"mouse-change":38}],2:[function(B,Y,Za){function c(){this.w=this.z=
this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var y=B("./util/sorted-object-keys"),p=B("./util/check"),P=B("./util/values"),g=B("./constants/dtypes.json"),d=B("./util/is-typed-array"),z=B("./util/is-ndarray"),b=B("./constants/primitives.json"),w="attributes elements offset count primitive instances".split(" ");Y.exports=function(na,fa,M,H,r,D,C){function E(b){if(b!==T.currentVAO){var d=fa.oes_vertex_array_object;b?
d.bindVertexArrayOES(b.vao):d.bindVertexArrayOES(null);T.currentVAO=b}}function Q(b){if(b!==T.currentVAO){if(b)b.bindAttrs();else{for(var d=fa.angle_instanced_arrays,g=0;g<f.length;++g){var e=f[g];e.buffer?(na.enableVertexAttribArray(g),e.buffer.bind(),na.vertexAttribPointer(g,e.size,e.type,e.normalized,e.stride,e.offfset),d&&e.divisor&&d.vertexAttribDivisorANGLE(g,e.divisor)):(na.disableVertexAttribArray(g),na.vertexAttrib4f(g,e.x,e.y,e.z,e.w))}C.elements?na.bindBuffer(34963,C.elements.buffer.buffer):
na.bindBuffer(34963,null)}T.currentVAO=b}}function A(){P(l).forEach(function(b){b.destroy()})}function N(){this.id=++e;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=fa.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;l[this.id]=this;this.buffers=[]}function B(){fa.oes_vertex_array_object&&P(l).forEach(function(b){b.refresh()})}var h=M.maxAttributes,f=Array(h);for(M=0;M<h;++M)f[M]=new c;var e=0,l={},T={Record:c,
scope:{},state:f,currentVAO:null,targetVAO:null,restore:fa.oes_vertex_array_object?B:function(){},createVAO:function(e){function m(e){var aa;if(Array.isArray(e))aa=e,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{p("object"===typeof e,"invalid arguments for create vao");p("attributes"in e,"must specify attributes for vao");if(e.elements){var a=e.elements;f.ownsElements?("function"===typeof a&&"elements"===a._reglType?
f.elements.destroy():f.elements(a),f.ownsElements=!1):D.getElements(e.elements)?(f.elements=e.elements,f.ownsElements=!1):(f.elements=D.create(e.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;aa=e.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in e&&(f.offset=e.offset|0);"count"in e&&(f.count=e.count|0);"instances"in e&&(f.instances=e.instances|0);"primitive"in
e&&(p(e.primitive in b,"bad primitive type: "+e.primitive),f.primitive=b[e.primitive]);p.optional(function(){for(var a=y(e),b=0;b<a.length;++b)p(0<=w.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+w)});p(Array.isArray(aa),"attributes must be an array")}p(aa.length<h,"too many attributes");p(0<aa.length,"must specify at least one attribute");var a={},n=f.attributes;n.length=aa.length;for(var W=0;W<aa.length;++W){var A=aa[W],l=n[W]=new c,C=A.data||A;if(Array.isArray(C)||d(C)||
z(C)){var N;f.buffers[W]&&(N=f.buffers[W],d(C)&&N._buffer.byteLength>=C.byteLength?N.subdata(C):(N.destroy(),f.buffers[W]=null));f.buffers[W]||(N=f.buffers[W]=r.create(A,34962,!1,!0));l.buffer=r.getBuffer(N);l.size=l.buffer.dimension|0;l.normalized=!1;l.type=l.buffer.dtype;l.offset=0;l.stride=0;l.divisor=0;l.state=1;a[W]=1}else r.getBuffer(A)?(l.buffer=r.getBuffer(A),l.size=l.buffer.dimension|0,l.normalized=!1,l.type=l.buffer.dtype,l.offset=0,l.stride=0,l.divisor=0,l.state=1):r.getBuffer(A.buffer)?
(l.buffer=r.getBuffer(A.buffer),l.size=(+A.size||l.buffer.dimension)|0,l.normalized=!!A.normalized||!1,"type"in A?(p.parameter(A.type,g,"invalid buffer type"),l.type=g[A.type]):l.type=l.buffer.dtype,l.offset=(A.offset||0)|0,l.stride=(A.stride||0)|0,l.divisor=(A.divisor||0)|0,l.state=1,p(1<=l.size&&4>=l.size,"size must be between 1 and 4"),p(0<=l.offset,"invalid offset"),p(0<=l.stride&&255>=l.stride,"stride must be between 0 and 255"),p(0<=l.divisor,"divisor must be positive"),p(!l.divisor||!!fa.angle_instanced_arrays,
"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in A?(p(0<W,"first attribute must not be a constant"),l.x=+A.x||0,l.y=+A.y||0,l.z=+A.z||0,l.w=+A.w||0,l.state=2):p(!1,"invalid attribute spec for location "+W)}for(N=0;N<f.buffers.length;++N)!a[N]&&f.buffers[N]&&(f.buffers[N].destroy(),f.buffers[N]=null);f.refresh();return m}var f=new N;H.vaoCount+=1;m.destroy=function(){for(var b=0;b<f.buffers.length;++b)f.buffers[b]&&f.buffers[b].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),
f.elements=null,f.ownsElements=!1);f.destroy()};m._vao=f;m._reglType="vao";return m(e)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var d=0;d<f.length;++d){var g=f[d];g.buffer===b&&(na.disableVertexAttribArray(d),g.buffer=null)}},setVAO:fa.oes_vertex_array_object?E:Q,clear:fa.oes_vertex_array_object?A:function(){}};N.prototype.bindAttrs=function(){for(var b=fa.angle_instanced_arrays,d=this.attributes,g=0;g<d.length;++g){var e=d[g];e.buffer?(na.enableVertexAttribArray(g),
na.bindBuffer(34962,e.buffer.buffer),na.vertexAttribPointer(g,e.size,e.type,e.normalized,e.stride,e.offset),b&&e.divisor&&b.vertexAttribDivisorANGLE(g,e.divisor)):(na.disableVertexAttribArray(g),na.vertexAttrib4f(g,e.x,e.y,e.z,e.w))}for(b=d.length;b<h;++b)na.disableVertexAttribArray(b);(b=D.getElements(this.elements))?na.bindBuffer(34963,b.buffer.buffer):na.bindBuffer(34963,null)};N.prototype.refresh=function(){var b=fa.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),T.currentVAO=
null,b.bindVertexArrayOES(null))};N.prototype.destroy=function(){if(this.vao){var b=fa.oes_vertex_array_object;this===T.currentVAO&&(T.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);l[this.id]&&(delete l[this.id],--H.vaoCount)};return T}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,
"./util/values":36}],3:[function(B,Y,Za){function c(b){return M[Object.prototype.toString.call(b)]|0}function y(b,d){for(var g=0;g<d.length;++g)b[g]=d[g]}function p(b,d,g,c,z,w,h){for(var f=0,e=0;e<g;++e)for(var l=0;l<c;++l)b[f++]=d[z*e+w*l+h]}var P=B("./util/sorted-object-keys"),g=B("./util/check"),d=B("./util/is-typed-array"),z=B("./util/is-ndarray"),b=B("./util/values"),w=B("./util/pool");Za=B("./util/flatten");var na=Za.flatten,fa=Za.shape,M=B("./constants/arraytypes.json"),H=B("./constants/dtypes.json"),
r=B("./constants/usage.json"),D=[];D[5120]=1;D[5122]=2;D[5124]=4;D[5121]=1;D[5123]=2;D[5125]=4;D[5126]=4;Y.exports=function(C,E,M,A){function N(b){this.id=e++;this.buffer=C.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;M.profile&&(this.stats={size:0})}function B(b,d,g){b.byteLength=d.byteLength;C.bufferData(b.type,d,g)}function h(b,e,f,h,l,a){b.usage=f;if(Array.isArray(e)){if(b.dtype=h||5126,0<e.length)if(Array.isArray(e[0])){l=
fa(e);for(var n=h=1;n<l.length;++n)h*=l[n];b.dimension=h;e=na(e,l,b.dtype);B(b,e,f);a?b.persistentData=e:w.freeType(e)}else"number"===typeof e[0]?(b.dimension=l,l=w.allocType(b.dtype,e.length),y(l,e),B(b,l,f),a?b.persistentData=l:w.freeType(l)):d(e[0])?(b.dimension=e[0].length,b.dtype=h||c(e[0])||5126,e=na(e,[e.length,e[0].length],b.dtype),B(b,e,f),a?b.persistentData=e:w.freeType(e)):g.raise("invalid buffer data")}else if(d(e))b.dtype=h||c(e),b.dimension=l,B(b,e,f),a&&(b.persistentData=new Uint8Array(new Uint8Array(e.buffer)));
else if(z(e)){l=e.shape;var W=e.stride,n=e.offset,A=0,r=0,N=0,C=0;1===l.length?(A=l[0],r=1,N=W[0],C=0):2===l.length?(A=l[0],r=l[1],N=W[0],C=W[1]):g.raise("invalid shape");b.dtype=h||c(e.data)||5126;b.dimension=r;l=w.allocType(b.dtype,A*r);p(l,e.data,A,r,N,C,n);B(b,l,f);a?b.persistentData=l:w.freeType(l)}else e instanceof ArrayBuffer?(b.dtype=5121,b.dimension=l,B(b,e,f),a&&(b.persistentData=new Uint8Array(new Uint8Array(e)))):g.raise("invalid buffer data")}function f(b){E.bufferCount--;A(b);var d=
b.buffer;g(d,"buffer must not be deleted already");C.deleteBuffer(d);b.buffer=null;delete l[b.id]}var e=0,l={};N.prototype.bind=function(){C.bindBuffer(this.type,this.buffer)};N.prototype.destroy=function(){f(this)};var T=[];M.profile&&(E.getTotalBufferSize=function(){var b=0;P(l).forEach(function(d){b+=l[d].stats.size});return b});return{create:function(b,e,A,K){function T(b){var a=35044,e=null,f=0,m=0,l=1;Array.isArray(b)||d(b)||z(b)||b instanceof ArrayBuffer?e=b:"number"===typeof b?f=b|0:b&&(g.type(b,
"object","buffer arguments must be an object, a number or an array"),"data"in b&&(g(null===e||Array.isArray(e)||d(e)||z(e),"invalid data for buffer"),e=b.data),"usage"in b&&(g.parameter(b.usage,r,"invalid buffer usage"),a=r[b.usage]),"type"in b&&(g.parameter(b.type,H,"invalid buffer type"),m=H[b.type]),"dimension"in b&&(g.type(b.dimension,"number","invalid dimension"),l=b.dimension|0),"length"in b&&(g.nni(f,"buffer length must be a nonnegative integer"),f=b.length|0));n.bind();e?h(n,e,a,m,l,K):(f&&
C.bufferData(n.type,f,a),n.dtype=m||5121,n.usage=a,n.dimension=l,n.byteLength=f);M.profile&&(n.stats.size=n.byteLength*D[n.dtype]);return T}function a(b,a){g(a+b.byteLength<=n.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+a+" to a buffer of size "+n.byteLength);C.bufferSubData(n.type,a,b)}E.bufferCount++;var n=new N(e);l[n.id]=n;A||T(b);T._reglType="buffer";T._buffer=n;T.subdata=function(b,e){var f=(e||0)|0,m;n.bind();
if(d(b)||b instanceof ArrayBuffer)a(b,f);else if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var l=w.allocType(n.dtype,b.length);y(l,b);a(l,f);w.freeType(l)}else Array.isArray(b[0])||d(b[0])?(m=fa(b),l=na(b,m,n.dtype),a(l,f),w.freeType(l)):g.raise("invalid buffer data")}else if(z(b)){m=b.shape;var h=b.stride,A=l=0,r=0,N=0;1===m.length?(l=m[0],A=1,r=h[0],N=0):2===m.length?(l=m[0],A=m[1],r=h[0],N=h[1]):g.raise("invalid shape");m=Array.isArray(b.data)?n.dtype:c(b.data);m=w.allocType(m,
l*A);p(m,b.data,l,A,r,N,b.offset);a(m,f);w.freeType(m)}else g.raise("invalid data for buffer subdata");return T};M.profile&&(T.stats=n.stats);T.destroy=function(){f(n)};return T},createStream:function(b,d){var e=T.pop();e||(e=new N(b));e.bind();h(e,d,35040,0,1,!1);return e},destroyStream:function(b){T.push(b)},clear:function(){b(l).forEach(f);T.forEach(f)},getBuffer:function(b){return b&&b._buffer instanceof N?b._buffer:null},restore:function(){b(l).forEach(function(b){b.buffer=C.createBuffer();C.bindBuffer(b.type,
b.buffer);C.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:h}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(B,Y,Za){Y.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(B,Y,Za){Y.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(B,Y,Za){Y.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(B,Y,Za){Y.exports={"static":35044,dynamic:35048,stream:35040}},
{}],8:[function(B,Y,Za){function c(b){return Array.isArray(b)||M(b)||H(b)}function y(b){return b.sort(function(b,d){return"viewport"===b?-1:"viewport"===d?1:b<d?-1:1})}function p(b,d,e,g){this.thisDep=b;this.contextDep=d;this.propDep=e;this.append=g}function P(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function g(b){return new p(!1,!1,!1,b)}function d(b,d){var e=b.type;if(0===e)return e=b.data.length,new p(!0,1<=e,2<=e,d);if(4===e)return e=b.data,new p(e.thisDep,e.contextDep,e.propDep,d);
if(5===e)return new p(!1,!1,!1,d);if(6===e){for(var g=e=!1,f=!1,a=0;a<b.data.length;++a){var n=b.data[a];1===n.type?f=!0:2===n.type?g=!0:3===n.type?e=!0:0===n.type?(e=!0,n=n.data,1<=n&&(g=!0),2<=n&&(f=!0)):4===n.type&&(e=e||n.data.thisDep,g=g||n.data.contextDep,f=f||n.data.propDep)}return new p(e,g,f,d)}return new p(3===e,2===e,1===e,d)}var z=B("./util/sorted-object-keys"),b=B("./util/check"),w=B("./util/extend"),na=B("./util/codegen"),fa=B("./util/loop"),M=B("./util/is-typed-array"),H=B("./util/is-ndarray"),
r=B("./util/is-array-like"),D=B("./dynamic"),C=B("./constants/primitives.json"),E=B("./constants/dtypes.json"),Q=["x","y","z","w"],A="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),N={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,
"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},sd="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),h={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,
"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},f={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},e={frag:35632,vert:35633},l={cw:2304,ccw:2305},T=new p(!1,!1,!1,function(){});Y.exports=function(M,m,H,K,da,a,n,W,ma,Ka,db,xd,la,Qa,Z){function L(b){return b.replace(".","_")}function O(b,q,a){var e=L(b);ca.push(b);t[e]=I[e]=!!a;x[e]=q}function U(b,q,a){var e=L(b);ca.push(b);Array.isArray(a)?
(I[e]=a.slice(),t[e]=a.slice()):I[e]=t[e]=a;sa[e]=q}function B(){var a=na(),q=a.link,e=a.global;a.id=mc++;a.batchId="0";var d=q(oa),g=a.shared={props:"a0"};z(oa).forEach(function(b){g[b]=e.def(d,".",b)});b.optional(function(){a.CHECK=q(b);a.commandStr=b.guessCommand();a.command=q(a.commandStr);a.assert=function(b,a,e){b("if(!(",a,"))",this.CHECK,".commandRaise(",q(e),",",this.command,");")};k.invalidBlendCombinations=sd});var x=a.next={},n=a.current={};z(sa).forEach(function(b){Array.isArray(I[b])&&
(x[b]=e.def(g.next,".",b),n[b]=e.def(g.current,".",b))});var f=a.constants={};z(k).forEach(function(b){f[b]=e.def(JSON.stringify(k[b]))});a.invoke=function(b,e){switch(e.type){case 0:var d=["this",g.context,g.props,a.batchId];return b.def(q(e.data),".call(",d.slice(0,Math.max(e.data.length+1,4)),")");case 1:return b.def(g.props,e.data);case 2:return b.def(g.context,e.data);case 3:return b.def("this",e.data);case 4:return e.data.append(a,b),e.data.ref;case 5:return e.data.toString();case 6:return e.data.map(function(q){return a.invoke(b,
q)})}};a.attribCache={};var Hd={};a.scopeAttrib=function(b){b=m.id(b);if(b in Hd)return Hd[b];var a=Ka.scope[b];a||(a=Ka.scope[b]=new ha);return Hd[b]=q(a)};return a}function J(b){var q=b["static"];b=b.dynamic;var a;if("profile"in q){var e=!!q.profile;a=g(function(b,q){return e});a.enable=e}else if("profile"in b){var k=b.profile;a=d(k,function(b,q){return b.invoke(q,k)})}return a}function Wb(a,q){var e=a["static"],k=a.dynamic;if("framebuffer"in e){var x=e.framebuffer;return x?(x=W.getFramebuffer(x),
b.command(x,"invalid framebuffer object"),g(function(b,q){var a=b.link(x),e=b.shared;q.set(e.framebuffer,".next",a);e=e.context;q.set(e,".framebufferWidth",a+".width");q.set(e,".framebufferHeight",a+".height");return a})):g(function(b,q){var a=b.shared;q.set(a.framebuffer,".next","null");a=a.context;q.set(a,".framebufferWidth",a+".drawingBufferWidth");q.set(a,".framebufferHeight",a+".drawingBufferHeight");return"null"})}if("framebuffer"in k){var n=k.framebuffer;return d(n,function(a,q){var e=a.invoke(q,
n),d=a.shared,k=d.framebuffer,ia=q.def(k,".getFramebuffer(",e,")");b.optional(function(){a.assert(q,"!"+e+"||"+ia,"invalid framebuffer object")});q.set(k,".next",ia);d=d.context;q.set(d,".framebufferWidth",ia+"?"+ia+".width:"+d+".drawingBufferWidth");q.set(d,".framebufferHeight",ia+"?"+ia+".height:"+d+".drawingBufferHeight");return ia})}return null}function ab(a,q,e){function k(a){if(a in g){var ia=g[a];b.commandType(ia,"object","invalid "+a,e.commandStr);var n=!0,od=ia.x|0,f=ia.y|0,l,m;"width"in
ia?(l=ia.width|0,b.command(0<=l,"invalid "+a,e.commandStr)):n=!1;"height"in ia?(m=ia.height|0,b.command(0<=m,"invalid "+a,e.commandStr)):n=!1;return new p(!n&&q&&q.thisDep,!n&&q&&q.contextDep,!n&&q&&q.propDep,function(b,a){var q=b.shared.context,e=l;"width"in ia||(e=a.def(q,".","framebufferWidth","-",od));var d=m;"height"in ia||(d=a.def(q,".","framebufferHeight","-",f));return[od,f,e,d]})}if(a in x){var h=x[a],n=d(h,function(q,e){var d=q.invoke(e,h);b.optional(function(){q.assert(e,d+"&&typeof "+
d+'==="object"',"invalid "+a)});var k=q.shared.context,ia=e.def(d,".x|0"),g=e.def(d,".y|0"),x=e.def('"width" in ',d,"?",d,".width|0:","(",k,".","framebufferWidth","-",ia,")"),n=e.def('"height" in ',d,"?",d,".height|0:","(",k,".","framebufferHeight","-",g,")");b.optional(function(){q.assert(e,x+">=0&&"+n+">=0","invalid "+a)});return[ia,g,x,n]});q&&(n.thisDep=n.thisDep||q.thisDep,n.contextDep=n.contextDep||q.contextDep,n.propDep=n.propDep||q.propDep);return n}return q?new p(q.thisDep,q.contextDep,q.propDep,
function(b,a){var q=b.shared.context;return[0,0,a.def(q,".","framebufferWidth"),a.def(q,".","framebufferHeight")]}):null}var g=a["static"],x=a.dynamic;if(a=k("viewport")){var n=a;a=new p(a.thisDep,a.contextDep,a.propDep,function(b,a){var q=n.append(b,a),e=b.shared.context;a.set(e,".viewportWidth",q[2]);a.set(e,".viewportHeight",q[3]);return q})}return{viewport:a,scissor_box:k("scissor.box")}}function R(a,q){var e=a["static"];if("string"===typeof e.frag&&"string"===typeof e.vert){if(0<z(q.dynamic).length)return null;
var e=q["static"],d=z(e);if(0<d.length&&"number"===typeof e[d[0]]){for(var k=[],g=0;g<d.length;++g)b("number"===typeof e[d[g]],"must specify all vertex attribute locations when using vaos"),k.push([e[d[g]]|0,d[g]]);return k}}return null}function u(a,q,k){function x(a){if(a in n){var q=m.id(n[a]);b.optional(function(){db.shader(e[a],q,b.guessCommand())});var k=g(function(){return q});k.id=q;return k}if(a in f){var ia=f[a];return d(ia,function(q,d){var k=q.invoke(d,ia),g=d.def(q.shared.strings,".id(",
k,")");b.optional(function(){d(q.shared.shader,".shader(",e[a],",",g,",",q.command,");")});return g})}return null}var n=a["static"],f=a.dynamic,l=x("frag"),h=x("vert"),Hd=null;P(l)&&P(h)?(Hd=db.program(h.id,l.id,null,k),a=g(function(b,a){return b.link(Hd)})):a=new p(l&&l.thisDep||h&&h.thisDep,l&&l.contextDep||h&&h.contextDep,l&&l.propDep||h&&h.propDep,function(a,q){var e=a.shared.shader,d;d=l?l.append(a,q):q.def(e,".","frag");var k;k=h?h.append(a,q):q.def(e,".","vert");var g=e+".program("+k+","+d;
b.optional(function(){g+=","+a.command});return q.def(g+")")});return{frag:l,vert:h,progVar:a,program:Hd}}function ka(e,q){function k(a,e){if(a in x){var ia=x[a]|0;e?f.offset=ia:f.instances=ia;b.command(!e||0<=ia,"invalid "+a,q.commandStr);return g(function(b,a){e&&(b.OFFSET=ia);return ia})}if(a in n){var od=n[a];return d(od,function(q,d){var k=q.invoke(d,od);e&&(q.OFFSET=k,b.optional(function(){q.assert(d,k+">=0","invalid "+a)}));return k})}if(e){if(Hd)return g(function(b,a){return b.OFFSET=0});
if(l)return new p(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(l)return new p(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var x=e["static"],n=e.dynamic,f={},l=!1,m=function(){if("vao"in x){var b=x.vao;null!==b&&null===Ka.getVAO(b)&&(b=Ka.createVAO(b));l=!0;f.vao=b;return g(function(a){var q=Ka.getVAO(b);return q?
a.link(q):"null"})}if("vao"in n){l=!0;var a=n.vao;return d(a,function(b,q){var e=b.invoke(q,a);return q.def(b.shared.vao+".getVAO("+e+")")})}return null}(),Hd=!1,h=function(){if("elements"in x){var e=x.elements;f.elements=e;if(c(e)){var k=f.elements=a.create(e,!0),e=a.getElements(k);Hd=!0}else e&&(e=a.getElements(e),Hd=!0,b.command(e,"invalid elements",q.commandStr));k=g(function(b,a){if(e){var q=b.link(e);return b.ELEMENTS=q}return b.ELEMENTS=null});k.value=e;return k}if("elements"in n){Hd=!0;var ia=
n.elements;return d(ia,function(a,q){var e=a.shared,d=e.isBufferArgs,e=e.elements,k=a.invoke(q,ia),g=q.def("null"),d=q.def(d,"(",k,")"),x=a.cond(d).then(g,"=",e,".createStream(",k,");")["else"](g,"=",e,".getElements(",k,");");b.optional(function(){a.assert(x["else"],"!"+k+"||"+g,"invalid elements")});q.entry(x);q.exit(a.cond(d).then(e,".destroyStream(",g,");"));return a.ELEMENTS=g})}return l?new p(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.elements+
".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),od=k("offset",!0),t=function(){if("primitive"in x){var a=x.primitive;f.primitive=a;b.commandParameter(a,C,"invalid primitve",q.commandStr);return g(function(b,q){return C[a]})}if("primitive"in n){var e=n.primitive;return d(e,function(a,q){var d=a.constants.primTypes,k=a.invoke(q,e);b.optional(function(){a.assert(q,k+" in "+d,"invalid primitive, must be one of "+z(C))});return q.def(d,"[",k,"]")})}return Hd?P(h)?h.value?g(function(b,
a){return a.def(b.ELEMENTS,".primType")}):g(function(){return 4}):new p(h.thisDep,h.contextDep,h.propDep,function(b,a){var q=b.ELEMENTS;return a.def(q,"?",q,".primType:",4)}):l?new p(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),u=function(){if("count"in x){var a=x.count|0;f.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",q.commandStr);return g(function(){return a})}if("count"in n){var e=
n.count;return d(e,function(a,q){var d=a.invoke(q,e);b.optional(function(){a.assert(q,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(Hd){if(P(h)){if(h)return od?new p(od.thisDep,od.contextDep,od.propDep,function(a,q){var e=q.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(q,e+">=0","invalid vertex offset/element buffer too small")});return e}):g(function(b,a){return a.def(b.ELEMENTS,".vertCount")});var k=g(function(){return-1});
b.optional(function(){k.MISSING=!0});return k}var ia=new p(h.thisDep||od.thisDep,h.contextDep||od.contextDep,h.propDep||od.propDep,function(b,a){var q=b.ELEMENTS;return b.OFFSET?a.def(q,"?",q,".vertCount-",b.OFFSET,":-1"):a.def(q,"?",q,".vertCount:-1")});b.optional(function(){ia.DYNAMIC=!0});return ia}return l?new p(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),oa=k("instances",!1);return{elements:h,primitive:t,
count:u,instances:oa,offset:od,vao:m,vaoActive:l,elementsActive:Hd,"static":f}}function ba(a,q){var e=a["static"],k=a.dynamic,x={};ca.forEach(function(a){function ia(b,q){if(a in e){var f=b(e[a]);x[n]=g(function(){return f})}else if(a in k){var l=k[a];x[n]=d(l,function(b,a){return q(b,a,b.invoke(a,l))})}}var n=L(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return ia(function(e){b.commandType(e,
"boolean",a,q.commandStr);return e},function(q,e,d){b.optional(function(){q.assert(e,"typeof "+d+'==="boolean"',"invalid flag "+a,q.commandStr)});return d});case "depth.func":return ia(function(e){b.commandParameter(e,h,"invalid "+a,q.commandStr);return h[e]},function(q,e,d){var k=q.constants.compareFuncs;b.optional(function(){q.assert(e,d+" in "+k,"invalid "+a+", must be one of "+z(h))});return e.def(k,"[",d,"]")});case "depth.range":return ia(function(a){b.command(r(a)&&2===a.length&&"number"===
typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",q.commandStr);return a},function(a,q,e){b.optional(function(){a.assert(q,a.shared.isArrayLike+"("+e+")&&"+e+".length===2&&typeof "+e+'[0]==="number"&&typeof '+e+'[1]==="number"&&'+e+"[0]<="+e+"[1]","depth range must be a 2d array")});var d=q.def("+",e,"[0]"),k=q.def("+",e,"[1]");return[d,k]});case "blend.func":return ia(function(a){b.commandType(a,"object","blend.func",q.commandStr);var e="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in
a?a.srcAlpha:a.src,k="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(e,N,n+".srcRGB",q.commandStr);b.commandParameter(d,N,n+".srcAlpha",q.commandStr);b.commandParameter(k,N,n+".dstRGB",q.commandStr);b.commandParameter(a,N,n+".dstAlpha",q.commandStr);b.command(-1===sd.indexOf(e+", "+k),"unallowed blending combination (srcRGB, dstRGB) = ("+e+", "+k+")",q.commandStr);return[N[e],N[k],N[d],N[a]]},function(q,e,d){function k(g,x){var n=e.def('"',g,x,'" in ',d,"?",d,".",
g,x,":",d,".",g);b.optional(function(){q.assert(e,n+" in "+ia,"invalid "+a+"."+g+x+", must be one of "+z(N))});return n}var ia=q.constants.blendFuncs;b.optional(function(){q.assert(e,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=k("src","RGB"),x=k("dst","RGB");b.optional(function(){q.assert(e,q.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+x+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var n=e.def(ia,"[",g,"]"),f=e.def(ia,"[",k("src",
"Alpha"),"]"),l=e.def(ia,"[",x,"]"),m=e.def(ia,"[",k("dst","Alpha"),"]");return[n,l,f,m]});case "blend.equation":return ia(function(e){if("string"===typeof e)return b.commandParameter(e,ua,"invalid "+a,q.commandStr),[ua[e],ua[e]];if("object"===typeof e)return b.commandParameter(e.rgb,ua,a+".rgb",q.commandStr),b.commandParameter(e.alpha,ua,a+".alpha",q.commandStr),[ua[e.rgb],ua[e.alpha]];b.commandRaise("invalid blend.equation",q.commandStr)},function(q,e,d){var k=q.constants.blendEquations,ia=e.def(),
g=e.def(),x=q.cond("typeof ",d,'==="string"');b.optional(function(){function b(a,e,d){q.assert(a,d+" in "+k,"invalid "+e+", must be one of "+z(ua))}b(x.then,a,d);q.assert(x["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);b(x["else"],a+".rgb",d+".rgb");b(x["else"],a+".alpha",d+".alpha")});x.then(ia,"=",g,"=",k,"[",d,"];");x["else"](ia,"=",k,"[",d,".rgb];",g,"=",k,"[",d,".alpha];");e(x);return[ia,g]});case "blend.color":return ia(function(a){b.command(r(a)&&4===a.length,"blend.color must be a 4d array",
q.commandStr);return fa(4,function(b){return+a[b]})},function(a,q,e){b.optional(function(){a.assert(q,a.shared.isArrayLike+"("+e+")&&"+e+".length===4","blend.color must be a 4d array")});return fa(4,function(a){return q.def("+",e,"[",a,"]")})});case "stencil.mask":return ia(function(a){b.commandType(a,"number",n,q.commandStr);return a|0},function(a,q,e){b.optional(function(){a.assert(q,"typeof "+e+'==="number"',"invalid stencil.mask")});return q.def(e,"|0")});case "stencil.func":return ia(function(e){b.commandType(e,
"object",n,q.commandStr);var d=e.cmp||"keep",k=e.ref||0;e="mask"in e?e.mask:-1;b.commandParameter(d,h,a+".cmp",q.commandStr);b.commandType(k,"number",a+".ref",q.commandStr);b.commandType(e,"number",a+".mask",q.commandStr);return[h[d],k,e]},function(a,e,q){var d=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(q+"&&typeof ",q,'==="object"');b('!("cmp" in ',q,")||(",q,".cmp in ",d,")")});var k=e.def('"cmp" in ',
q,"?",d,"[",q,".cmp]",":",7680),ia=e.def(q,".ref|0"),g=e.def('"mask" in ',q,"?",q,".mask|0:-1");return[k,ia,g]});case "stencil.opFront":case "stencil.opBack":return ia(function(e){b.commandType(e,"object",n,q.commandStr);var d=e.fail||"keep",k=e.zfail||"keep";e=e.zpass||"keep";b.commandParameter(d,f,a+".fail",q.commandStr);b.commandParameter(k,f,a+".zfail",q.commandStr);b.commandParameter(e,f,a+".zpass",q.commandStr);return["stencil.opBack"===a?1029:1028,f[d],f[k],f[e]]},function(e,q,d){function k(g){b.optional(function(){e.assert(q,
'!("'+g+'" in '+d+")||("+d+"."+g+" in "+ia+")","invalid "+a+"."+g+", must be one of "+z(f))});return q.def('"',g,'" in ',d,"?",ia,"[",d,".",g,"]:",7680)}var ia=e.constants.stencilOps;b.optional(function(){e.assert(q,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,k("fail"),k("zfail"),k("zpass")]});case "polygonOffset.offset":return ia(function(a){b.commandType(a,"object",n,q.commandStr);var e=a.factor|0;a=a.units|0;b.commandType(e,"number",n+".factor",q.commandStr);
b.commandType(a,"number",n+".units",q.commandStr);return[e,a]},function(e,q,d){b.optional(function(){e.assert(q,d+"&&typeof "+d+'==="object"',"invalid "+a)});var k=q.def(d,".factor|0"),ia=q.def(d,".units|0");return[k,ia]});case "cull.face":return ia(function(a){var e=0;"front"===a?e=1028:"back"===a&&(e=1029);b.command(!!e,n,q.commandStr);return e},function(a,e,q){b.optional(function(){a.assert(e,q+'==="front"||'+q+'==="back"',"invalid cull.face")});return e.def(q,'==="front"?',1028,":",1029)});case "lineWidth":return ia(function(a){b.command("number"===
typeof a&&a>=K.lineWidthDims[0]&&a<=K.lineWidthDims[1],"invalid line width, must be a positive number between "+K.lineWidthDims[0]+" and "+K.lineWidthDims[1],q.commandStr);return a},function(a,e,q){b.optional(function(){a.assert(e,"typeof "+q+'==="number"&&'+q+">="+K.lineWidthDims[0]+"&&"+q+"<="+K.lineWidthDims[1],"invalid line width")});return q});case "frontFace":return ia(function(a){b.commandParameter(a,l,n,q.commandStr);return l[a]},function(a,e,q){b.optional(function(){a.assert(e,q+'==="cw"||'+
q+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(q+'==="cw"?2304:2305')});case "colorMask":return ia(function(a){b.command(r(a)&&4===a.length,"color.mask must be length 4 array",q.commandStr);return a.map(function(a){return!!a})},function(a,e,q){b.optional(function(){a.assert(e,a.shared.isArrayLike+"("+q+")&&"+q+".length===4","invalid color.mask")});return fa(4,function(a){return"!!"+q+"["+a+"]"})});case "sample.coverage":return ia(function(a){b.command("object"===typeof a&&
a,n,q.commandStr);var e="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof e&&0<=e&&1>=e,"sample.coverage.value must be a number between 0 and 1",q.commandStr);return[e,a]},function(a,e,q){b.optional(function(){a.assert(e,q+"&&typeof "+q+'==="object"',"invalid sample.coverage")});var d=e.def('"value" in ',q,"?+",q,".value:1"),k=e.def("!!",q,".invert");return[d,k]})}});return x}function Ea(a,e){var k=a["static"],x=a.dynamic,n={};z(k).forEach(function(a){var d=k[a],ia;if("number"===typeof d||
"boolean"===typeof d)ia=g(function(){return d});else if("function"===typeof d){var x=d._reglType;"texture2d"===x||"textureCube"===x?ia=g(function(a){return a.link(d)}):"framebuffer"===x||"framebufferCube"===x?(b.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',e.commandStr),ia=g(function(a){return a.link(d.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',e.commandStr)}else r(d)?ia=g(function(e){return e.global.def("[",fa(d.length,function(q){b.command("number"===
typeof d[q]||"boolean"===typeof d[q],"invalid uniform "+a,e.commandStr);return d[q]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',e.commandStr);ia.value=d;n[a]=ia});z(x).forEach(function(a){var b=x[a];n[a]=d(b,function(a,e){return a.invoke(e,b)})});return n}function Na(a,e){var k=a["static"],x=a.dynamic,n={};z(k).forEach(function(a){var d=k[a],ia=m.id(a),x=new ha;if(c(d))x.state=1,x.buffer=da.getBuffer(da.create(d,34962,!1,!0)),x.type=0;else{var f=da.getBuffer(d);if(f)x.state=
1,x.buffer=f,x.type=0;else if(b.command("object"===typeof d&&d,"invalid data for attribute "+a,e.commandStr),"constant"in d){var l=d.constant;x.buffer="null";x.state=2;"number"===typeof l?x.x=l:(b.command(r(l)&&0<l.length&&4>=l.length,"invalid constant for attribute "+a,e.commandStr),Q.forEach(function(a,b){b<l.length&&(x[a]=l[b])}))}else{f=c(d.buffer)?da.getBuffer(da.create(d.buffer,34962,!1,!0)):da.getBuffer(d.buffer);b.command(!!f,'missing buffer for attribute "'+a+'"',e.commandStr);var h=d.offset|
0;b.command(0<=h,'invalid offset for attribute "'+a+'"',e.commandStr);var t=d.stride|0;b.command(0<=t&&256>t,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',e.commandStr);var u=d.size|0;b.command(!("size"in d)||0<u&&4>=u,'invalid size for attribute "'+a+'", must be 1,2,3,4',e.commandStr);var oa=!!d.normalized,v=0;"type"in d&&(b.commandParameter(d.type,E,"invalid type for attribute "+a,e.commandStr),v=E[d.type]);var A=d.divisor|0;b.optional(function(){"divisor"in d&&(b.command(0===
A||S,'cannot specify divisor for attribute "'+a+'", instancing not supported',e.commandStr),b.command(0<=A,'invalid divisor for attribute "'+a+'"',e.commandStr));var k=e.commandStr,x="buffer offset divisor normalized type size stride".split(" ");z(d).forEach(function(e){b.command(0<=x.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+a+'" (valid parameters are '+x+")",k)})});x.buffer=f;x.state=1;x.size=u;x.normalized=oa;x.type=v||f.dtype;x.offset=h;x.stride=t;x.divisor=A}}n[a]=g(function(a,
b){var e=a.attribCache;if(ia in e)return e[ia];var q={isStream:!1};z(x).forEach(function(a){q[a]=x[a]});x.buffer&&(q.buffer=a.link(x.buffer),q.type=q.type||q.buffer+".dtype");return e[ia]=q})});z(x).forEach(function(a){var e=x[a];n[a]=d(e,function(q,d){function k(a){d(l[a],"=",x,".",a,"|0;")}var x=q.invoke(d,e),ia=q.shared,g=q.constants,n=ia.isBufferArgs,f=ia.buffer;b.optional(function(){q.assert(d,x+"&&(typeof "+x+'==="object"||typeof '+x+'==="function")&&('+n+"("+x+")||"+f+".getBuffer("+x+")||"+
f+".getBuffer("+x+".buffer)||"+n+"("+x+'.buffer)||("constant" in '+x+"&&(typeof "+x+'.constant==="number"||'+ia.isArrayLike+"("+x+".constant))))",'invalid dynamic attribute "'+a+'"')});var l={isStream:d.def(!1)},m=new ha;m.state=1;z(m).forEach(function(a){l[a]=d.def(""+m[a])});var h=l.buffer,t=l.type;d("if(",n,"(",x,")){",l.isStream,"=true;",h,"=",f,".createStream(",34962,",",x,");",t,"=",h,".dtype;","}else{",h,"=",f,".getBuffer(",x,");","if(",h,"){",t,"=",h,".dtype;",'}else if("constant" in ',x,
"){",l.state,"=",2,";","if(typeof "+x+'.constant === "number"){',l[Q[0]],"=",x,".constant;",Q.slice(1).map(function(a){return l[a]}).join("="),"=0;","}else{",Q.map(function(a,b){return l[a]+"="+x+".constant.length>"+b+"?"+x+".constant["+b+"]:0;"}).join(""),"}}else{","if(",n,"(",x,".buffer)){",h,"=",f,".createStream(",34962,",",x,".buffer);","}else{",h,"=",f,".getBuffer(",x,".buffer);","}",t,'="type" in ',x,"?",g.glTypes,"[",x,".type]:",h,".dtype;",l.normalized,"=!!",x,".normalized;");k("size");k("offset");
k("stride");k("divisor");d("}}");d.exit("if(",l.isStream,"){",f,".destroyStream(",h,");","}");return l})});return n}function vb(a){var b=a["static"],e=a.dynamic,k={};z(b).forEach(function(a){var e=b[a];k[a]=g(function(a,b){return"number"===typeof e||"boolean"===typeof e?""+e:a.link(e)})});z(e).forEach(function(a){var b=e[a];k[a]=d(b,function(a,e){return a.invoke(e,b)})});return k}function Ha(a,e,d,k,x){function g(a){var b=h[a];b&&(oa[a]=b)}var n=a["static"],f=a.dynamic;b.optional(function(){function a(q){z(q).forEach(function(a){b.command(0<=
e.indexOf(a),'unknown parameter "'+a+'"',x.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ca);a(n);a(f)});var l=R(a,e),m=Wb(a,x),h=ab(a,m,x),t=ka(a,x),oa=ba(a,x),v=u(a,x,l);g("viewport");g(L("scissor.box"));var c=0<z(oa).length,m={framebuffer:m,draw:t,shader:v,state:oa,dirty:c,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=J(a,x);m.uniforms=Ea(d,x);m.drawVAO=m.scopeVAO=t.vao;if(!m.drawVAO&&v.program&&!l&&H.angle_instanced_arrays&&
t["static"].elements){var A=!0;a=v.program.attributes.map(function(a){a=e["static"][a];A=A&&!!a;return a});if(A&&0<a.length){var sa=Ka.getVAO(Ka.createVAO({attributes:a,elements:t["static"].elements}));m.drawVAO=new p(null,null,null,function(a,b){return a.link(sa)});m.useVAO=!0}}l?m.useVAO=!0:m.attributes=Na(e,x);m.context=vb(k,x);return m}function V(a,b,e){var d=a.shared.context,k=a.scope();z(e).forEach(function(x){b.save(d,"."+x);var g=e[x].append(a,b);Array.isArray(g)?k(d,".",x,"=[",g.join(),"];"):
k(d,".",x,"=",g,";")});b(k)}function pb(a,b,e,d){var k=a.shared,x=k.gl,g=k.framebuffer,n;ga&&(n=b.def(k.extensions,".webgl_draw_buffers"));var f=a.constants,k=f.drawBuffer,f=f.backBuffer;a=e?e.append(a,b):b.def(g,".next");d||b("if(",a,"!==",g,".cur){");b("if(",a,"){",x,".bindFramebuffer(",36160,",",a,".framebuffer);");ga&&b(n,".drawBuffersWEBGL(",k,"[",a,".colorAttachments.length]);");b("}else{",x,".bindFramebuffer(",36160,",null);");ga&&b(n,".drawBuffersWEBGL(",f,");");b("}",g,".cur=",a,";");d||
b("}")}function ea(a,b,e){var d=a.shared,k=d.gl,g=a.current,n=a.next,f=d.current,l=d.next,m=a.cond(f,".dirty");ca.forEach(function(b){b=L(b);if(!(b in e.state)){var q,d;if(b in n){q=n[b];d=g[b];var h=fa(I[b].length,function(a){return m.def(q,"[",a,"]")});m(a.cond(h.map(function(a,b){return a+"!=="+d+"["+b+"]"}).join("||")).then(k,".",sa[b],"(",h,");",h.map(function(a,b){return d+"["+b+"]="+a}).join(";"),";"))}else q=m.def(l,".",b),h=a.cond(q,"!==",f,".",b),m(h),b in x?h(a.cond(q).then(k,".enable(",
x[b],");")["else"](k,".disable(",x[b],");"),f,".",b,"=",q,";"):h(k,".",sa[b],"(",q,");",f,".",b,"=",q,";")}});0===z(e.state).length&&m(f,".dirty=false;");b(m)}function va(a,b,e,d){var k=a.shared,g=a.current,n=k.current,f=k.gl;y(z(e)).forEach(function(k){var l=e[k];if(!d||d(l)){var m=l.append(a,b);if(x[k]){var h=x[k];P(l)?m?b(f,".enable(",h,");"):b(f,".disable(",h,");"):b(a.cond(m).then(f,".enable(",h,");")["else"](f,".disable(",h,");"));b(n,".",k,"=",m,";")}else if(r(m)){var t=g[k];b(f,".",sa[k],
"(",m,");",m.map(function(a,b){return t+"["+b+"]="+a}).join(";"),";")}else b(f,".",sa[k],"(",m,");",n,".",k,"=",m,";")}})}function ac(a,b){S&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function pc(a,b,e,d,k){function x(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(a){u=b.def();a(u,"=",x(),";");"string"===typeof k?a(m,".count+=",k,";"):a(m,".count++;");Qa&&(d?(oa=b.def(),a(oa,"=",t,".getNumPendingQueries();")):a(t,".beginQuery(",m,");"))}
function n(a){a(m,".cpuTime+=",x(),"-",u,";");Qa&&(d?a(t,".pushScopeStats(",oa,",",t,".getNumPendingQueries(),",m,");"):a(t,".endQuery();"))}function f(a){var e=b.def(h,".profile");b(h,".profile=",a,";");b.exit(h,".profile=",e,";")}var l=a.shared,m=a.stats,h=l.current,t=l.timer;e=e.profile;var u,oa;if(e){if(P(e)){e.enable?(g(b),n(b.exit),f("true")):f("false");return}e=e.append(a,b);f(e)}else e=b.def(h,".profile");l=a.block();g(l);b("if(",e,"){",l,"}");a=a.block();n(a);b.exit("if(",e,"){",a,"}")}function ic(a,
e,d,k,x){function g(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function n(b,d,k){function x(){e("if(!",h,".buffer){",l,".enableVertexAttribArray(",m,");}");var b=k.type,g;g=k.size?e.def(k.size,"||",d):d;e("if(",h,".type!==",b,"||",h,".size!==",g,"||",oa.map(function(a){return h+"."+a+"!=="+k[a]}).join("||"),"){",l,".bindBuffer(",34962,",",t,".buffer);",l,".vertexAttribPointer(",[m,g,b,
k.normalized,k.stride,k.offset],");",h,".type=",b,";",h,".size=",g,";",oa.map(function(a){return h+"."+a+"="+k[a]+";"}).join(""),"}");S&&(b=k.divisor,e("if(",h,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[m,b],");",h,".divisor=",b,";}"))}function g(){e("if(",h,".buffer){",l,".disableVertexAttribArray(",m,");",h,".buffer=null;","}if(",Q.map(function(a,b){return h+"."+a+"!=="+u[b]}).join("||"),"){",l,".vertexAttrib4f(",m,",",u,");",Q.map(function(a,b){return h+"."+a+"="+u[b]+";"}).join(""),
"}")}var l=f.gl,m=e.def(b,".location"),h=e.def(f.attributes,"[",m,"]");b=k.state;var t=k.buffer,u=[k.x,k.y,k.z,k.w],oa=["buffer","normalized","offset","stride"];1===b?x():2===b?g():(e("if(",b,"===",1,"){"),x(),e("}else{"),g(),e("}"))}var f=a.shared;k.forEach(function(k){var f=k.name,l=d.attributes[f],m;if(l){if(!x(l))return;m=l.append(a,e)}else{if(!x(T))return;var h=a.scopeAttrib(f);b.optional(function(){a.assert(e,h+".state","missing attribute "+f)});m={};z(new ha).forEach(function(a){m[a]=e.def(h,
".",a)})}n(a.link(k),g(k.info.type),m)})}function td(a,e,d,k,x,g){for(var n=a.shared,f=n.gl,l,h=0;h<k.length;++h){var t=k[h],u=t.name,oa=t.info.type,v=d.uniforms[u],t=a.link(t)+".location",A;if(v){if(!x(v))continue;if(P(v)){var c=v.value;b.command(null!==c&&"undefined"!==typeof c,'missing uniform "'+u+'"',a.commandStr);if(35678===oa||35680===oa)b.command("function"===typeof c&&(35678===oa&&("texture2d"===c._reglType||"framebuffer"===c._reglType)||35680===oa&&("textureCube"===c._reglType||"framebufferCube"===
c._reglType)),"invalid texture for uniform "+u,a.commandStr),v=a.link(c._texture||c.color[0]._texture),e(f,".uniform1i(",t,",",v+".bind());"),e.exit(v,".unbind();");else if(35674===oa||35675===oa||35676===oa){b.optional(function(){b.command(r(c),"invalid matrix for uniform "+u,a.commandStr);b.command(35674===oa&&4===c.length||35675===oa&&9===c.length||35676===oa&&16===c.length,"invalid length for matrix uniform "+u,a.commandStr)});var v=a.global.def("new Float32Array(["+Array.prototype.slice.call(c)+
"])"),sa=2;35675===oa?sa=3:35676===oa&&(sa=4);e(f,".uniformMatrix",sa,"fv(",t,",false,",v,");")}else{switch(oa){case 5126:b.commandType(c,"number","uniform "+u,a.commandStr);l="1f";break;case 35664:b.command(r(c)&&2===c.length,"uniform "+u,a.commandStr);l="2f";break;case 35665:b.command(r(c)&&3===c.length,"uniform "+u,a.commandStr);l="3f";break;case 35666:b.command(r(c)&&4===c.length,"uniform "+u,a.commandStr);l="4f";break;case 35670:b.commandType(c,"boolean","uniform "+u,a.commandStr);l="1i";break;
case 5124:b.commandType(c,"number","uniform "+u,a.commandStr);l="1i";break;case 35671:b.command(r(c)&&2===c.length,"uniform "+u,a.commandStr);l="2i";break;case 35667:b.command(r(c)&&2===c.length,"uniform "+u,a.commandStr);l="2i";break;case 35672:b.command(r(c)&&3===c.length,"uniform "+u,a.commandStr);l="3i";break;case 35668:b.command(r(c)&&3===c.length,"uniform "+u,a.commandStr);l="3i";break;case 35673:b.command(r(c)&&4===c.length,"uniform "+u,a.commandStr);l="4i";break;case 35669:b.command(r(c)&&
4===c.length,"uniform "+u,a.commandStr),l="4i"}e(f,".uniform",l,"(",t,",",r(c)?Array.prototype.slice.call(c):c,");")}continue}else A=v.append(a,e)}else{if(!x(T))continue;A=e.def(n.uniforms,"[",m.id(u),"]")}35678===oa?(b(!Array.isArray(A),"must specify a scalar prop for textures"),e("if(",A,"&&",A,'._reglType==="framebuffer"){',A,"=",A,".color[0];","}")):35680===oa&&(b(!Array.isArray(A),"must specify a scalar prop for cube maps"),e("if(",A,"&&",A,'._reglType==="framebufferCube"){',A,"=",A,".color[0];",
"}"));b.optional(function(){function d(b,k){a.assert(e,b,'bad data or missing for uniform "'+u+'".  '+k)}function k(a){b(!Array.isArray(A),"must not specify an array type for uniform");d("typeof "+A+'==="'+a+'"',"invalid type, expected "+a)}function x(e,k){Array.isArray(A)?b(A.length===e,"must have length "+e):d(n.isArrayLike+"("+A+")&&"+A+".length==="+e,"invalid vector, should have length "+e,a.commandStr)}function g(e){b(!Array.isArray(A),"must not specify a value type");d("typeof "+A+'==="function"&&'+
A+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(oa){case 5124:k("number");break;case 35667:x(2,"number");break;case 35668:x(3,"number");break;case 35669:x(4,"number");break;case 5126:k("number");break;case 35664:x(2,"number");break;case 35665:x(3,"number");break;case 35666:x(4,"number");break;case 35670:k("boolean");break;case 35671:x(2,"boolean");break;case 35672:x(3,"boolean");break;case 35673:x(4,"boolean");break;case 35674:x(4,"number");break;case 35675:x(9,
"number");break;case 35676:x(16,"number");break;case 35678:g(3553);break;case 35680:g(34067)}});v=1;switch(oa){case 35678:case 35680:v=e.def(A,"._texture");e(f,".uniform1i(",t,",",v,".bind());");e.exit(v,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";v=2;break;case 35668:case 35672:l="3i";v=3;break;case 35669:case 35673:l="4i";v=4;break;case 5126:l="1f";break;case 35664:l="2f";v=2;break;case 35665:l="3f";v=3;break;case 35666:l="4f";v=4;break;case 35674:l="Matrix2fv";
break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}if("M"===l.charAt(0)){e(f,".uniform",l,"(",t,",");var t=Math.pow(oa-35674+2,2),z=a.global.def("new Float32Array(",t,")");Array.isArray(A)?e("false,(",fa(t,function(a){return z+"["+a+"]="+A[a]}),",",z,")"):e("false,(Array.isArray(",A,")||",A," instanceof Float32Array)?",A,":(",fa(t,function(a){return z+"["+a+"]="+A+"["+a+"]"}),",",z,")");e(");")}else{if(1<v){for(var sa=[],F=[],W=0;W<v;++W)Array.isArray(A)?F.push(A[W]):F.push(e.def(A+"["+
W+"]")),g&&sa.push(e.def());g&&e("if(!",a.batchId,"||",sa.map(function(a,b){return a+"!=="+F[b]}).join("||"),"){",sa.map(function(a,b){return a+"="+F[b]+";"}).join(""));e(f,".uniform",l,"(",t,",",F.join(","),");")}else b(!Array.isArray(A),"uniform value must not be an array"),g&&(v=e.def(),e("if(!",a.batchId,"||",v,"!==",A,"){",v,"=",A,";")),e(f,".uniform",l,"(",t,",",A,");");g&&e("}")}}}function tc(a,e,d,k){function x(b){var g=h[b];return g?g.contextDep&&k.contextDynamic||g.propDep?g.append(a,d):
g.append(a,e):e.def(m,".",b)}function g(){function a(){d(v,".drawElementsInstancedANGLE(",[u,c,sa,oa+"<<(("+sa+"-5121)>>1)",A],");")}function b(){d(v,".drawArraysInstancedANGLE(",[u,oa,c,A],");")}t&&"null"!==t?F?a():(d("if(",t,"){"),a(),d("}else{"),b(),d("}")):b()}function n(){function a(){d(l+".drawElements("+[u,c,sa,oa+"<<(("+sa+"-5121)>>1)"]+");")}function b(){d(l+".drawArrays("+[u,oa,c]+");")}t&&"null"!==t?F?a():(d("if(",t,"){"),a(),d("}else{"),b(),d("}")):b()}var f=a.shared,l=f.gl,m=f.draw,h=
k.draw,t=function(){var b=h.elements,x=e;if(b){if(b.contextDep&&k.contextDynamic||b.propDep)x=d;b=b.append(a,x);h.elementsActive&&x("if("+b+")"+l+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=x.def(),x(b,"=",m,".","elements",";","if(",b,"){",l,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",f.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+f.vao,".currentVAO.elements);",qa?"":"if("+b+")"+l+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),u=x("primitive"),oa=x("offset"),
c=function(){var x=h.count,g,n=e;if(x){if(x.contextDep&&k.contextDynamic||x.propDep)n=d;g=x.append(a,n);b.optional(function(){x.MISSING&&a.assert(e,"false","missing vertex count");x.DYNAMIC&&a.assert(n,g+">=0","missing vertex count")})}else g=n.def(m,".","count"),b.optional(function(){a.assert(n,g+">=0","missing vertex count")});return g}();if("number"===typeof c){if(0===c)return}else d("if(",c,"){"),d.exit("}");var A,v;S&&(A=x("instances"),v=a.instancing);var sa=t+".type",F=h.elements&&P(h.elements)&&
!h.vaoActive;S&&("number"!==typeof A||0<=A)?"string"===typeof A?(d("if(",A,">0){"),g(),d("}else if(",A,"<0){"),n(),d("}")):g():n()}function X(a,e,d,k,x){var g=B();x=g.proc("body",x);b.optional(function(){g.commandStr=e.commandStr;g.command=g.link(e.commandStr)});S&&(g.instancing=x.def(g.shared.extensions,".angle_instanced_arrays"));a(g,x,d,k);return g.compile().body}function F(a,b,e,d){ac(a,b);e.useVAO?e.drawVAO?b(a.shared.vao,".setVAO(",e.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,
".targetVAO);"):(b(a.shared.vao,".setVAO(null);"),ic(a,b,e,d.attributes,function(){return!0}));td(a,b,e,d.uniforms,function(){return!0},!1);tc(a,b,b,e)}function ja(a,b){var e=a.proc("draw",1);ac(a,e);V(a,e,b.context);pb(a,e,b.framebuffer);ea(a,e,b);va(a,e,b.state);pc(a,e,b,!1,!0);var d=b.shader.progVar.append(a,e);e(a.shared.gl,".useProgram(",d,".program);");if(b.shader.program)F(a,e,b,b.shader.program);else{e(a.shared.vao,".setVAO(null);");var k=a.global.def("{}"),x=e.def(d,".id"),g=e.def(k,"[",
x,"]");e(a.cond(g).then(g,".call(this,a0);")["else"](g,"=",k,"[",x,"]=",a.link(function(e){return X(F,a,b,e,1)}),"(",d,");",g,".call(this,a0);"))}0<z(b.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function Ba(a,b,e,d){function k(){return!0}a.batchId="a1";ac(a,b);ic(a,b,e,d.attributes,k);td(a,b,e,d.uniforms,k,!1);tc(a,b,b,e)}function wb(a,b,e,d){function k(a){return a.contextDep&&g||a.propDep}function x(a){return!k(a)}ac(a,b);var g=e.contextDep,n=
b.def(),f=b.def();a.shared.props=f;a.batchId=n;var l=a.scope(),m=a.scope();b(l.entry,"for(",n,"=0;",n,"<","a1",";++",n,"){",f,"=","a0","[",n,"];",m,"}",l.exit);e.needsContext&&V(a,m,e.context);e.needsFramebuffer&&pb(a,m,e.framebuffer);va(a,m,e.state,k);e.profile&&k(e.profile)&&pc(a,m,e,!1,!0);d?(e.useVAO?e.drawVAO?k(e.drawVAO)?m(a.shared.vao,".setVAO(",e.drawVAO.append(a,m),");"):l(a.shared.vao,".setVAO(",e.drawVAO.append(a,l),");"):l(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(l(a.shared.vao,
".setVAO(null);"),ic(a,l,e,d.attributes,x),ic(a,m,e,d.attributes,k)),td(a,l,e,d.uniforms,x,!1),td(a,m,e,d.uniforms,k,!0),tc(a,l,m,e)):(b=a.global.def("{}"),d=e.shader.progVar.append(a,m),f=m.def(d,".id"),l=m.def(b,"[",f,"]"),m(a.shared.gl,".useProgram(",d,".program);","if(!",l,"){",l,"=",b,"[",f,"]=",a.link(function(b){return X(Ba,a,e,b,2)}),"(",d,");}",l,".call(this,a0[",n,"],",n,");"))}function Wc(a,b){function e(a){return a.contextDep&&k||a.propDep}var d=a.proc("batch",2);a.batchId="0";ac(a,d);
var k=!1,x=!0;z(b.context).forEach(function(a){k=k||b.context[a].propDep});k||(V(a,d,b.context),x=!1);var g=b.framebuffer,n=!1;g?(g.propDep?k=n=!0:g.contextDep&&k&&(n=!0),n||pb(a,d,g)):pb(a,d,null);b.state.viewport&&b.state.viewport.propDep&&(k=!0);ea(a,d,b);va(a,d,b.state,function(a){return!e(a)});b.profile&&e(b.profile)||pc(a,d,b,!1,"a1");b.contextDep=k;b.needsContext=x;b.needsFramebuffer=n;x=b.shader.progVar;if(x.contextDep&&k||x.propDep)wb(a,d,b,null);else if(x=x.append(a,d),d(a.shared.gl,".useProgram(",
x,".program);"),b.shader.program)wb(a,d,b,b.shader.program);else{d(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),n=d.def(x,".id"),l=d.def(g,"[",n,"]");d(a.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",g,"[",n,"]=",a.link(function(e){return X(wb,a,b,e,2)}),"(",x,");",l,".call(this,a0,a1);"))}0<z(b.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function Tc(a,b){function e(x){var g=b.shader[x];g&&d.set(k.shader,"."+x,g.append(a,d))}var d=
a.proc("scope",3);a.batchId="a2";var k=a.shared,x=k.current;V(a,d,b.context);b.framebuffer&&b.framebuffer.append(a,d);y(z(b.state)).forEach(function(e){var x=b.state[e].append(a,d);r(x)?x.forEach(function(b,k){d.set(a.next[e],"["+k+"]",b)}):d.set(k.next,"."+e,x)});pc(a,d,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(e){var x=b.draw[e];x&&d.set(k.draw,"."+e,""+x.append(a,d))});z(b.uniforms).forEach(function(e){var x=b.uniforms[e].append(a,d);Array.isArray(x)&&(x="["+
x.join()+"]");d.set(k.uniforms,"["+m.id(e)+"]",x)});z(b.attributes).forEach(function(e){var k=b.attributes[e].append(a,d),x=a.scopeAttrib(e);z(new ha).forEach(function(a){d.set(x,"."+a,k[a])})});b.scopeVAO&&d.set(k.vao,".targetVAO",b.scopeVAO.append(a,d));e("vert");e("frag");0<z(b.state).length&&(d(x,".dirty=true;"),d.exit(x,".dirty=true;"));d("a1(",a.shared.context,",a0,",a.batchId,");")}function G(a){if("object"===typeof a&&!r(a)){for(var b=z(a),e=0;e<b.length;++e)if(D.isDynamic(a[b[e]]))return!0;
return!1}}function v(a,b,e){function k(a,b){n.forEach(function(e){var d=x[e];D.isDynamic(d)&&(d=a.invoke(b,d),b(h,".",e,"=",d,";"))})}var x=b["static"][e];if(x&&G(x)){var g=a.global,n=z(x),l=!1,f=!1,m=!1,h=a.global.def("{}");n.forEach(function(b){var e=x[b];if(D.isDynamic(e))"function"===typeof e&&(e=x[b]=D.unbox(e)),b=d(e,null),l=l||b.thisDep,m=m||b.propDep,f=f||b.contextDep;else{g(h,".",b,"=");switch(typeof e){case "number":g(e);break;case "string":g('"',e,'"');break;case "object":Array.isArray(e)&&
g("[",e.join(),"]");break;default:g(a.link(e))}g(";")}});b.dynamic[e]=new D.DynamicVariable(4,{thisDep:l,contextDep:f,propDep:m,ref:h,append:k});delete b["static"][e]}}var ha=Ka.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};H.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var S=H.angle_instanced_arrays,ga=H.webgl_draw_buffers,qa=H.oes_vertex_array_object,I={dirty:!0,profile:Z.profile},t={},ca=[],x={},sa={};O("dither",3024);O("blend.enable",3042);U("blend.color","blendColor",[0,0,0,
0]);U("blend.equation","blendEquationSeparate",[32774,32774]);U("blend.func","blendFuncSeparate",[1,0,1,0]);O("depth.enable",2929,!0);U("depth.func","depthFunc",513);U("depth.range","depthRange",[0,1]);U("depth.mask","depthMask",!0);U("colorMask","colorMask",[!0,!0,!0,!0]);O("cull.enable",2884);U("cull.face","cullFace",1029);U("frontFace","frontFace",2305);U("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);U("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",
32928);U("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);U("stencil.mask","stencilMask",-1);U("stencil.func","stencilFunc",[519,0,-1]);U("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);U("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);O("scissor.enable",3089);U("scissor.box","scissor",[0,0,M.drawingBufferWidth,M.drawingBufferHeight]);U("viewport","viewport",[0,0,M.drawingBufferWidth,M.drawingBufferHeight]);var oa={gl:M,context:la,strings:m,next:t,current:I,
draw:xd,elements:a,buffer:da,shader:db,attributes:Ka.state,vao:Ka,uniforms:ma,framebuffer:W,extensions:H,timer:Qa,isBufferArgs:c},k={primTypes:C,compareFuncs:h,blendFuncs:N,blendEquations:ua,stencilOps:f,glTypes:E,orientationType:l};b.optional(function(){oa.isArrayLike=r});ga&&(k.backBuffer=[1029],k.drawBuffer=fa(K.maxDrawbuffers,function(a){return 0===a?[0]:fa(a,function(a){return 36064+a})}));var mc=0;return{next:t,current:I,procs:function(){var a=B(),b=a.proc("poll"),e=a.proc("refresh"),d=a.block();
b(d);e(d);var k=a.shared,g=k.gl,n=k.next,l=k.current;d(l,".dirty=false;");pb(a,b);pb(a,e,null,!0);var f;S&&(f=a.link(S));H.oes_vertex_array_object&&e(a.link(H.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<K.maxAttributes;++m){var h=e.def(k.attributes,"[",m,"]"),t=a.cond(h,".buffer");t.then(g,".enableVertexAttribArray(",m,");",g,".bindBuffer(",34962,",",h,".buffer.buffer);",g,".vertexAttribPointer(",m,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);")["else"](g,
".disableVertexAttribArray(",m,");",g,".vertexAttrib4f(",m,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;");e(t);S&&e(f,".vertexAttribDivisorANGLE(",m,",",h,".divisor);")}e(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");z(x).forEach(function(k){var f=x[k],m=d.def(n,".",k),h=a.block();h("if(",m,"){",g,".enable(",f,")}else{",g,".disable(",f,")}",l,".",k,"=",m,";");e(h);b("if(",m,"!==",l,".",k,"){",h,"}")});z(sa).forEach(function(k){var x=sa[k],f=I[k],m,
h,t=a.block();t(g,".",x,"(");r(f)?(x=f.length,m=a.global.def(n,".",k),h=a.global.def(l,".",k),t(fa(x,function(a){return m+"["+a+"]"}),");",fa(x,function(a){return h+"["+a+"]="+m+"["+a+"];"}).join("")),b("if(",fa(x,function(a){return m+"["+a+"]!=="+h+"["+a+"]"}).join("||"),"){",t,"}")):(m=d.def(n,".",k),h=d.def(l,".",k),t(m,");",l,".",k,"=",m,";"),b("if(",m,"!==",h,"){",t,"}"));e(t)});return a.compile()}(),compile:function(a,b,e,d,k){var x=B();x.stats=x.link(k);z(b["static"]).forEach(function(a){v(x,
b,a)});A.forEach(function(b){v(x,a,b)});var g=Ha(a,b,e,d,x);ja(x,g);Tc(x,g);Wc(x,g);return w(x.compile(),{destroy:function(){g.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(B,Y,Za){function c(g,b){this.id=d++;this.type=g;this.data=b}function y(d){if(0===
d.length)return[];var b=d.charAt(0),g=d.charAt(d.length-1);if(1<d.length&&b===g&&('"'===b||"'"===b))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return y(d.substr(0,b.index)).concat(y(b[1])).concat(y(d.substr(b.index+b[0].length)));b=d.split(".");if(1===b.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(g=0;g<b.length;++g)d=d.concat(y(b[g]));return d}function p(d){return"["+y(d).join("][")+
"]"}function P(d,b){if("function"===typeof d)return new c(0,d);if("number"===typeof d||"boolean"===typeof d)return new c(5,d);if(Array.isArray(d))return new c(6,d.map(function(d,g){return P(d,b+"["+g+"]")}));if(d instanceof c)return d;g(!1,"invalid option type in uniform "+b)}var g=B("./util/check"),d=0;Y.exports={DynamicVariable:c,define:function(d,b){return new c(d,p(b+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof c},unbox:P,accessor:p}},{"./util/check":21}],
10:[function(B,Y,Za){var c=B("./util/check"),y=B("./util/is-typed-array"),p=B("./util/is-ndarray"),P=B("./util/values"),g=B("./constants/primitives.json"),d=B("./constants/usage.json");Y.exports=function(z,b,w,na){function fa(b){this.id=D++;r[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function M(d,g,r,C,h,f,e){d.buffer.bind();var l;g?((l=e)||y(g)&&(!p(g)||y(g.data))||(l=b.oes_element_index_uint?5125:5123),w._initBuffer(d.buffer,g,r,l,3)):(z.bufferData(34963,f,r),d.buffer.dtype=
l||5121,d.buffer.usage=r,d.buffer.dimension=3,d.buffer.byteLength=f);l=e;if(!e){switch(d.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:c.raise("unsupported type for element array")}d.buffer.dtype=l}d.type=l;c(5125!==l||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=h;0>g&&(g=d.buffer.byteLength,5123===l?g>>=1:5125===l&&(g>>=2));d.vertCount=g;g=C;0>C&&(g=4,C=d.buffer.dimension,
1===C&&(g=0),2===C&&(g=1),3===C&&(g=4));d.primType=g}function H(b){na.elementsCount--;c(null!==b.buffer,"must not double destroy elements");delete r[b.id];b.buffer.destroy();b.buffer=null}var r={},D=0,C={uint8:5121,uint16:5123};b.oes_element_index_uint&&(C.uint32=5125);fa.prototype.bind=function(){this.buffer.bind()};var E=[];return{create:function(b,A){function r(b){if(b)if("number"===typeof b)z(b),h.primType=4,h.vertCount=b|0,h.type=5121;else{var e=null,l=35044,A=-1,w=-1,m=0,E=0;if(Array.isArray(b)||
y(b)||p(b))e=b;else if(c.type(b,"object","invalid arguments for elements"),"data"in b&&(e=b.data,c(Array.isArray(e)||y(e)||p(e),"invalid data for element buffer")),"usage"in b&&(c.parameter(b.usage,d,"invalid element buffer usage"),l=d[b.usage]),"primitive"in b&&(c.parameter(b.primitive,g,"invalid element buffer primitive"),A=g[b.primitive]),"count"in b&&(c("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),w=b.count|0),"type"in b&&(c.parameter(b.type,C,"invalid buffer type"),
E=C[b.type]),"length"in b)m=b.length|0;else if(m=w,5123===E||5122===E)m*=2;else if(5125===E||5124===E)m*=4;M(h,e,l,A,w,m,E)}else z(),h.primType=4,h.vertCount=0,h.type=5121;return r}var z=w.create(null,34963,!0),h=new fa(z._buffer);na.elementsCount++;r(b);r._reglType="elements";r._elements=h;r.subdata=function(b,e){z.subdata(b,e);return r};r.destroy=function(){H(h)};return r},createStream:function(b){var d=E.pop();d||(d=new fa(w.create(null,34963,!0,!1)._buffer));M(d,b,35040,-1,-1,0,0);return d},destroyStream:function(b){E.push(b)},
getElements:function(b){return"function"===typeof b&&b._elements instanceof fa?b._elements:null},clear:function(){P(r).forEach(H)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(B,Y,Za){var c=B("./util/sorted-object-keys"),y=B("./util/check");Y.exports=function(p,P){function g(b){y.type(b,"string","extension name must be string");b=b.toLowerCase();var g;try{g=d[b]=p.getExtension(b)}catch(c){}return!!g}
for(var d={},z=0;z<P.extensions.length;++z){var b=P.extensions[z];if(!g(b))return P.onDestroy(),P.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}P.optionalExtensions.forEach(g);return{extensions:d,restore:function(){c(d).forEach(function(b){if(d[b]&&!g(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(B,Y,Za){var c=B("./util/check"),y=B("./util/values"),
p=B("./util/extend"),P=[6407,6408],g=[];g[6408]=4;g[6407]=3;var d=[];d[5121]=1;d[5126]=4;d[36193]=2;var z=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};Y.exports=function(w,na,fa,M,H,r){function D(a,b,e){this.target=a;this.texture=b;this.renderbuffer=e;var d=a=0;b?(a=b.width,d=b.height):e&&(a=e.width,d=e.height);this.width=a;this.height=d}function C(a){a&&(a.texture&&
a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function E(a,b,e){if(a){if(a.texture){a=a.texture._texture;var d=Math.max(1,a.height);c(Math.max(1,a.width)===b&&d===e,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,c(a.width===b&&a.height===e,"inconsistent width/height for renderbuffer");a.refCount+=1}}function Q(a,b){b&&(b.texture?w.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):w.framebufferRenderbuffer(36160,
a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function A(a){var b=3553,e=null,d=null,g=a;"object"===typeof a&&(g=a.data,"target"in a&&(b=a.target|0));c.type(g,"function","invalid attachment data");a=g._reglType;"texture2d"===a?(e=g,c(3553===b)):"textureCube"===a?(e=g,c(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(d=g,b=36161):c.raise("invalid regl object for attachment");return new D(b,e,d)}function N(a,b,e,d,g){if(e)return a=M.create2D({width:a,height:b,format:d,type:g}),
a._texture.refCount=0,new D(3553,a,null);a=H.create({width:a,height:b,format:d});a._renderbuffer.refCount=0;return new D(36161,null,a)}function B(a){return a&&(a.texture||a.renderbuffer)}function h(a,b,e){a&&(a.texture?a.texture.resize(b,e):a.renderbuffer&&a.renderbuffer.resize(b,e),a.width=b,a.height=e)}function f(){this.id=a++;n[this.id]=this;this.framebuffer=w.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function e(a){a.colorAttachments.forEach(C);C(a.depthAttachment);C(a.stencilAttachment);C(a.depthStencilAttachment)}function l(a){var b=a.framebuffer;c(b,"must not double destroy framebuffer");w.deleteFramebuffer(b);a.framebuffer=null;r.framebufferCount--;delete n[a.id]}function T(a){var e;w.bindFramebuffer(36160,a.framebuffer);var d=a.colorAttachments;for(e=0;e<d.length;++e)Q(36064+e,d[e]);for(e=d.length;e<fa.maxColorAttachments;++e)w.framebufferTexture2D(36160,36064+e,3553,null,0);w.framebufferTexture2D(36160,
33306,3553,null,0);w.framebufferTexture2D(36160,36096,3553,null,0);w.framebufferTexture2D(36160,36128,3553,null,0);Q(36096,a.depthAttachment);Q(36128,a.stencilAttachment);Q(33306,a.depthStencilAttachment);a=w.checkFramebufferStatus(36160);w.isContextLost()||36053===a||c.raise("framebuffer configuration not supported, status = "+b[a]);w.bindFramebuffer(36160,m.next?m.next.framebuffer:null);m.cur=m.next;w.getError()}function aa(a,b){function n(a,b){var l;c(m.next!==y,"can not update framebuffer which is currently in use");
var f=0,h=0,r=!0,w=!0;l=null;var C=!0,p="rgba",M="uint8",D=1,H=null,u=null,W=null,Q=!1;if("number"===typeof a)f=a|0,h=b|0||f;else if(a){c.type(a,"object","invalid arguments for framebuffer");"shape"in a?(h=a.shape,c(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),f=h[0],h=h[1]):("radius"in a&&(f=h=a.radius),"width"in a&&(f=a.width),"height"in a&&(h=a.height));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&c(1===l.length||na.webgl_draw_buffers,"multiple render targets not supported");
if(!l){"colorCount"in a&&(D=a.colorCount|0,c(0<D,"invalid color buffer count"));"colorTexture"in a&&(C=!!a.colorTexture,p="rgba4");if("colorType"in a){M=a.colorType;if(C)c(na.oes_texture_float||!("float"===M||"float32"===M),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(na.oes_texture_half_float||!("half float"===M||"float16"===M),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===M||
"float16"===M)c(na.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),p="rgba16f";else if("float"===M||"float32"===M)c(na.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),p="rgba32f";c.oneOf(M,da,"invalid color type")}"colorFormat"in a&&(p=a.colorFormat,0<=pa.indexOf(p)?C=!0:0<=K.indexOf(p)?C=!1:c.optional(function(){if(C)c.oneOf(a.colorFormat,pa,"invalid color format for texture");
else c.oneOf(a.colorFormat,K,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)Q=!(!a.depthTexture&&!a.depthStencilTexture),c(!Q||na.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?r=a.depth:(H=a.depth,w=!1));"stencil"in a&&("boolean"===typeof a.stencil?w=a.stencil:(u=a.stencil,r=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?r=w=a.depthStencil:(W=a.depthStencil,w=r=!1))}else f=h=1;
var aa=null,ma=null,vb=null,Ha=null;if(Array.isArray(l))aa=l.map(A);else if(l)aa=[A(l)];else for(aa=Array(D),l=0;l<D;++l)aa[l]=N(f,h,C,p,M);c(na.webgl_draw_buffers||1>=aa.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");c(aa.length<=fa.maxColorAttachments,"too many color attachments, not supported");f=f||aa[0].width;h=h||aa[0].height;H?ma=A(H):r&&!w&&(ma=N(f,h,Q,"depth","uint32"));u?vb=A(u):w&&!r&&(vb=N(f,h,!1,"stencil","uint8"));W?Ha=A(W):!H&&!u&&
w&&r&&(Ha=N(f,h,Q,"depth stencil","depth stencil"));c(1>=!!H+!!u+!!W,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");r=null;for(l=0;l<aa.length;++l)E(aa[l],f,h),c(!aa[l]||aa[l].texture&&0<=P.indexOf(aa[l].texture._texture.format)||aa[l].renderbuffer&&0<=z.indexOf(aa[l].renderbuffer._renderbuffer.format),"framebuffer color attachment "+l+" is invalid"),aa[l]&&aa[l].texture&&(w=g[aa[l].texture._texture.format]*d[aa[l].texture._texture.type],null===r?r=w:c(r===
w,"all color attachments much have the same number of bits per pixel."));E(ma,f,h);c(!ma||ma.texture&&6402===ma.texture._texture.format||ma.renderbuffer&&33189===ma.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");E(vb,f,h);c(!vb||vb.renderbuffer&&36168===vb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");E(Ha,f,h);c(!Ha||Ha.texture&&34041===Ha.texture._texture.format||Ha.renderbuffer&&34041===Ha.renderbuffer._renderbuffer.format,
"invalid depth-stencil attachment for framebuffer object");e(y);y.width=f;y.height=h;y.colorAttachments=aa;y.depthAttachment=ma;y.stencilAttachment=vb;y.depthStencilAttachment=Ha;n.color=aa.map(B);n.depth=B(ma);n.stencil=B(vb);n.depthStencil=B(Ha);n.width=y.width;n.height=y.height;T(y);return n}var y=new f;r.framebufferCount++;n(a,b);return p(n,{resize:function(a,b){c(m.next!==y,"can not resize a framebuffer which is currently in use");var e=Math.max(a|0,1),d=Math.max(b|0||e,1);if(e===y.width&&d===
y.height)return n;for(var g=y.colorAttachments,l=0;l<g.length;++l)h(g[l],e,d);h(y.depthAttachment,e,d);h(y.stencilAttachment,e,d);h(y.depthStencilAttachment,e,d);y.width=n.width=e;y.height=n.height=d;T(y);return n},_reglType:"framebuffer",_framebuffer:y,destroy:function(){l(y);e(y)},use:function(a){m.setFBO({framebuffer:n},a)}})}var m={cur:null,next:null,dirty:!1,setFBO:null},pa=["rgba"],K=["rgba4","rgb565","rgb5 a1"];na.ext_srgb&&K.push("srgba");na.ext_color_buffer_half_float&&K.push("rgba16f","rgb16f");
na.webgl_color_buffer_float&&K.push("rgba32f");var da=["uint8"];na.oes_texture_half_float&&da.push("half float","float16");na.oes_texture_float&&da.push("float","float32");var a=0,n={};return p(m,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof f)?a:null},create:aa,createCube:function(a){function b(a){var d;c(0>e.indexOf(m.next),"can not update framebuffer which is currently in use");var g={color:null},n=0,l=null;d="rgba";var f="uint8",
h=1;if("number"===typeof a)n=a|0;else if(a){c.type(a,"object","invalid arguments for framebuffer");"shape"in a?(n=a.shape,c(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),c(n[0]===n[1],"cube framebuffer must be square"),n=n[0]):("radius"in a&&(n=a.radius|0),"width"in a?(n=a.width|0,"height"in a&&c(a.height===n,"must be square")):"height"in a&&(n=a.height|0));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&c(1===l.length||na.webgl_draw_buffers,"multiple render targets not supported");
l||("colorCount"in a&&(h=a.colorCount|0,c(0<h,"invalid color buffer count")),"colorType"in a&&(c.oneOf(a.colorType,da,"invalid color type"),f=a.colorType),"colorFormat"in a&&(d=a.colorFormat,c.oneOf(a.colorFormat,pa,"invalid color format for texture")));"depth"in a&&(g.depth=a.depth);"stencil"in a&&(g.stencil=a.stencil);"depthStencil"in a&&(g.depthStencil=a.depthStencil)}else n=1;if(l)if(Array.isArray(l))for(a=[],d=0;d<l.length;++d)a[d]=l[d];else a=[l];else for(a=Array(h),l={radius:n,format:d,type:f},
d=0;d<h;++d)a[d]=M.createCube(l);g.color=Array(a.length);for(d=0;d<a.length;++d)h=a[d],c("function"===typeof h&&"textureCube"===h._reglType,"invalid cube map"),n=n||h.width,c(h.width===n&&h.height===n,"invalid cube map shape"),g.color[d]={target:34069,data:a[d]};for(d=0;6>d;++d){for(h=0;h<a.length;++h)g.color[h].target=34069+d;0<d&&(g.depth=e[0].depth,g.stencil=e[0].stencil,g.depthStencil=e[0].depthStencil);if(e[d])e[d](g);else e[d]=aa(g)}return p(b,{width:n,height:n,color:a})}var e=Array(6);b(a);
return p(b,{faces:e,resize:function(a){var d=a|0;c(0<d&&d<=fa.maxCubeMapSize,"invalid radius for cube fbo");if(d===b.width)return b;var g=b.color;for(a=0;a<g.length;++a)g[a].resize(d);for(a=0;6>a;++a)e[a].resize(d);b.width=b.height=d;return b},_reglType:"framebufferCube",destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){y(n).forEach(l)},restore:function(){m.cur=null;m.next=null;m.dirty=!0;y(n).forEach(function(a){a.framebuffer=w.createFramebuffer();T(a)})}})}},{"./util/check":21,
"./util/extend":25,"./util/values":36}],13:[function(B,Y,Za){var c=B("./util/sorted-object-keys"),y=B("./util/pool");Y.exports=function(p,P){var g=1;P.ext_texture_filter_anisotropic&&(g=p.getParameter(34047));var d=1,z=1;P.webgl_draw_buffers&&(d=p.getParameter(34852),z=p.getParameter(36063));var b=!!P.oes_texture_float;if(b){b=p.createTexture();p.bindTexture(3553,b);p.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var w=p.createFramebuffer();p.bindFramebuffer(36160,w);p.framebufferTexture2D(36160,36064,
3553,b,0);p.bindTexture(3553,null);if(36053!==p.checkFramebufferStatus(36160))b=!1;else{p.viewport(0,0,1,1);p.clearColor(1,0,0,1);p.clear(16384);var na=y.allocType(5126,4);p.readPixels(0,0,1,1,6408,5126,na);p.getError()?b=!1:(p.deleteFramebuffer(w),p.deleteTexture(b),b=1===na[0]);y.freeType(na)}}na=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(na=p.createTexture(),w=y.allocType(5121,36),p.activeTexture(33984),
p.bindTexture(34067,na),p.texImage2D(34069,0,6408,3,3,0,6408,5121,w),y.freeType(w),p.bindTexture(34067,null),p.deleteTexture(na),na=!p.getError());return{colorBits:[p.getParameter(3410),p.getParameter(3411),p.getParameter(3412),p.getParameter(3413)],depthBits:p.getParameter(3414),stencilBits:p.getParameter(3415),subpixelBits:p.getParameter(3408),extensions:c(P).filter(function(b){return!!P[b]}),maxAnisotropic:g,maxDrawbuffers:d,maxColorAttachments:z,pointSizeDims:p.getParameter(33901),lineWidthDims:p.getParameter(33902),
maxViewportDims:p.getParameter(3386),maxCombinedTextureUnits:p.getParameter(35661),maxCubeMapSize:p.getParameter(34076),maxRenderbufferSize:p.getParameter(34024),maxTextureUnits:p.getParameter(34930),maxTextureSize:p.getParameter(3379),maxAttributes:p.getParameter(34921),maxVertexUniforms:p.getParameter(36347),maxVertexTextureUnits:p.getParameter(35660),maxVaryingVectors:p.getParameter(36348),maxFragmentUniforms:p.getParameter(36349),glsl:p.getParameter(35724),renderer:p.getParameter(7937),vendor:p.getParameter(7936),
version:p.getParameter(7938),readFloat:b,npotTextureCube:na}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(B,Y,Za){var c=B("./util/check"),y=B("./util/is-typed-array");Y.exports=function(p,P,g,d,z,b,w){function na(M){var H;null===P.next?(c(z.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),H=5121):(c(null!==P.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),H=P.next.colorAttachments[0].texture._texture.type,
c.optional(function(){b.oes_texture_float?(c(5121===H||5126===H,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===H&&c(w.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(5121===H,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var r=0,D=0,C=d.framebufferWidth,E=d.framebufferHeight,Q=null;y(M)?Q=M:M&&(c.type(M,"object","invalid arguments to regl.read()"),
r=M.x|0,D=M.y|0,c(0<=r&&r<d.framebufferWidth,"invalid x offset for regl.read"),c(0<=D&&D<d.framebufferHeight,"invalid y offset for regl.read"),C=(M.width||d.framebufferWidth-r)|0,E=(M.height||d.framebufferHeight-D)|0,Q=M.data||null);Q&&(5121===H?c(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===H&&c(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));c(0<C&&C+r<=d.framebufferWidth,
"invalid width for read pixels");c(0<E&&E+D<=d.framebufferHeight,"invalid height for read pixels");g();M=C*E*4;Q||(5121===H?Q=new Uint8Array(M):5126===H&&(Q=Q||new Float32Array(M)));c.isTypedArray(Q,"data buffer for regl.read() must be a typedarray");c(Q.byteLength>=M,"data buffer for regl.read() too small");p.pixelStorei(3333,4);p.readPixels(r,D,C,E,6408,H,Q);return Q}function fa(b){var d;P.setFBO({framebuffer:b.framebuffer},function(){d=na(b)});return d}return function(b){return b&&"framebuffer"in
b?fa(b):na(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(B,Y,Za){var c=B("./util/sorted-object-keys"),y=B("./util/check"),p=B("./util/values"),P=[];P[32854]=2;P[32855]=2;P[36194]=2;P[33189]=2;P[36168]=1;P[34041]=4;P[35907]=4;P[34836]=16;P[34842]=8;P[34843]=6;Y.exports=function(g,d,z,b,w){function na(b){this.id=r++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;w.profile&&(this.stats={size:0})}function fa(d){var c=d.renderbuffer;y(c,"must not double destroy renderbuffer");
g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(c);d.renderbuffer=null;d.refCount=0;delete D[d.id];b.renderbufferCount--}var M={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(M.srgba=35907);d.ext_color_buffer_half_float&&(M.rgba16f=34842,M.rgb16f=34843);d.webgl_color_buffer_float&&(M.rgba32f=34836);var H=[];c(M).forEach(function(b){H[M[b]]=b});var r=0,D={};na.prototype.decRef=function(){0>=--this.refCount&&fa(this)};w.profile&&(b.getTotalRenderbufferSize=
function(){var b=0;c(D).forEach(function(d){b+=D[d].stats.size});return b});return{create:function(d,c){function r(b,d){var h=0,f=0,e=32854;"object"===typeof b&&b?("shape"in b?(f=b.shape,y(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),h=f[0]|0,f=f[1]|0):("radius"in b&&(h=f=b.radius|0),"width"in b&&(h=b.width|0),"height"in b&&(f=b.height|0)),"format"in b&&(y.parameter(b.format,M,"invalid renderbuffer format"),e=M[b.format])):"number"===typeof b?(h=b|0,f="number"===typeof d?d|0:h):b?y.raise("invalid arguments to renderbuffer constructor"):
h=f=1;y(0<h&&0<f&&h<=z.maxRenderbufferSize&&f<=z.maxRenderbufferSize,"invalid renderbuffer size");if(h!==A.width||f!==A.height||e!==A.format)return r.width=A.width=h,r.height=A.height=f,A.format=e,g.bindRenderbuffer(36161,A.renderbuffer),g.renderbufferStorage(36161,e,h,f),y(0===g.getError(),"invalid render buffer format"),w.profile&&(A.stats.size=P[A.format]*A.width*A.height),r.format=H[A.format],r}var A=new na(g.createRenderbuffer());D[A.id]=A;b.renderbufferCount++;r(d,c);r.resize=function(b,d){var h=
b|0,f=d|0||h;if(h===A.width&&f===A.height)return r;y(0<h&&0<f&&h<=z.maxRenderbufferSize&&f<=z.maxRenderbufferSize,"invalid renderbuffer size");r.width=A.width=h;r.height=A.height=f;g.bindRenderbuffer(36161,A.renderbuffer);g.renderbufferStorage(36161,A.format,h,f);y(0===g.getError(),"invalid render buffer format");w.profile&&(A.stats.size=P[A.format]*A.width*A.height);return r};r._reglType="renderbuffer";r._renderbuffer=A;w.profile&&(r.stats=A.stats);r.destroy=function(){A.decRef()};return r},clear:function(){p(D).forEach(fa)},
restore:function(){p(D).forEach(function(b){b.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,b.renderbuffer);g.renderbufferStorage(36161,b.format,b.width,b.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(B,Y,Za){var c=B("./util/sorted-object-keys"),y=B("./util/check"),p=B("./util/extend"),P=B("./util/values");Y.exports=function(g,d,z,b){function w(b,d,g,h){this.name=b;this.id=d;this.location=g;this.info=
h}function na(b,d){for(var g=0;g<b.length;++g)if(b[g].id===d.id){b[g].location=d.location;return}b.push(d)}function fa(b,c,w){var h=35632===b?r:D,f=h[c];if(!f){var e=d.str(c),f=g.createShader(b);g.shaderSource(f,e);g.compileShader(f);y.shaderError(g,f,e,b,w);h[c]=f}return f}function M(d,g){this.id=Q++;this.fragId=d;this.vertId=g;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function H(c,r,p){var h;h=fa(35632,c.fragId);
var f=fa(35633,c.vertId),e=c.program=g.createProgram();g.attachShader(e,h);g.attachShader(e,f);if(p)for(h=0;h<p.length;++h)f=p[h],g.bindAttribLocation(e,f[0],f[1]);g.linkProgram(e);y.linkError(g,e,d.str(c.fragId),d.str(c.vertId),r);p=g.getProgramParameter(e,35718);b.profile&&(c.stats.uniformsCount=p);f=c.uniforms;for(h=0;h<p;++h)if(r=g.getActiveUniform(e,h))if(1<r.size)for(var l=0;l<r.size;++l){var z=r.name.replace("[0]","["+l+"]");na(f,new w(z,d.id(z),g.getUniformLocation(e,z),r))}else na(f,new w(r.name,
d.id(r.name),g.getUniformLocation(e,r.name),r));p=g.getProgramParameter(e,35721);b.profile&&(c.stats.attributesCount=p);c=c.attributes;for(h=0;h<p;++h)(r=g.getActiveAttrib(e,h))&&na(c,new w(r.name,d.id(r.name),g.getAttribLocation(e,r.name),r))}var r={},D={},C={},E=[],Q=0;b.profile&&(z.getMaxUniformsCount=function(){var b=0;E.forEach(function(d){d.stats.uniformsCount>b&&(b=d.stats.uniformsCount)});return b},z.getMaxAttributesCount=function(){var b=0;E.forEach(function(d){d.stats.attributesCount>b&&
(b=d.stats.attributesCount)});return b});return{clear:function(){var b=g.deleteShader.bind(g);P(r).forEach(b);r={};P(D).forEach(b);D={};E.forEach(function(b){g.deleteProgram(b.program)});E.length=0;C={};z.shaderCount=0},program:function(b,d,w,h){y.command(0<=b,"missing vertex shader",w);y.command(0<=d,"missing fragment shader",w);var f=C[d];f||(f=C[d]={});var e=f[b];if(e&&(e.refCount++,!h))return e;var l=new M(d,b);z.shaderCount++;H(l,w,h);e||(f[b]=l);E.push(l);return p(l,{destroy:function(){l.refCount--;
if(0>=l.refCount){g.deleteProgram(l.program);var b=E.indexOf(l);E.splice(b,1);z.shaderCount--}0>=f[l.vertId].refCount&&(g.deleteShader(D[l.vertId]),delete D[l.vertId],delete C[l.fragId][l.vertId]);c(C[l.fragId]).length||(g.deleteShader(r[l.fragId]),delete r[l.fragId],delete C[l.fragId])}})},restore:function(){r={};D={};for(var b=0;b<E.length;++b)H(E[b],null,E[b].attributes.map(function(b){return[b.location,b.name]}))},shader:fa,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,
"./util/values":36}],17:[function(B,Y,Za){Y.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(B,Y,Za){Y.exports=function(){var c={"":0},y=[""];return{id:function(p){var P=c[p];if(P)return P;P=c[p]=y.length;y.push(p);return P},str:function(c){return y[c]}}}},{}],19:[function(B,Y,Za){function c(a){return"[object "+a+"]"}function y(a){return Array.isArray(a)&&(0===a.length||
"number"===typeof a[0])}function p(a){return Array.isArray(a)&&0!==a.length&&C(a[0])?!0:!1}function P(a){return Object.prototype.toString.call(a)}function g(a){if(!a)return!1;var b=P(a);return 0<=pa.indexOf(b)?!0:y(a)||p(a)||H(a)}function d(a,b){36193===a.type?(a.data=D(b),r.freeType(b)):a.data=b}function z(a,b,e,d,g,l){a="undefined"!==typeof da[a]?da[a]:h[a]*K[b];l&&(a*=6);if(g){for(d=0;1<=e;)d+=a*e*e,e/=2;return d}return a*e*d}var b=B("./util/sorted-object-keys"),w=B("./util/check"),na=B("./util/extend"),
fa=B("./util/values"),M=B("./util/is-typed-array"),H=B("./util/is-ndarray"),r=B("./util/pool"),D=B("./util/to-half-float"),C=B("./util/is-array-like"),E=B("./util/flatten"),Q=B("./util/is-pow2");Za=B("./constants/arraytypes.json");var A=B("./constants/arraytypes.json"),N=[9984,9986,9985,9987],sd=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;h[6408]=h[35906]=4;var f=c("HTMLCanvasElement"),e=c("OffscreenCanvas"),l=c("CanvasRenderingContext2D"),T=c("ImageBitmap"),
aa=c("HTMLImageElement"),m=c("HTMLVideoElement"),pa=b(Za).concat([f,e,l,T,aa,m]),K=[];K[5121]=1;K[5126]=4;K[36193]=2;K[5123]=2;K[5125]=4;var da=[];da[32854]=2;da[32855]=2;da[36194]=2;da[34041]=4;da[33776]=.5;da[33777]=.5;da[33778]=1;da[33779]=1;da[35986]=.5;da[35987]=1;da[34798]=1;da[35840]=.5;da[35841]=.25;da[35842]=.5;da[35843]=.25;da[36196]=.5;Y.exports=function(a,n,c,K,da,B,pa){function la(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;
this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Qa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Z(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(w.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=
b.premultiplyAlpha);"flipY"in b&&(w.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(w.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(w.parameter(b.colorSpace,tc,"invalid colorSpace"),a.colorSpace=tc[b.colorSpace]);if("type"in b){var e=b.type;w(n.oes_texture_float||!("float"===e||"float32"===e),"you must enable the OES_texture_float extension in order to use floating point textures.");w(n.oes_texture_half_float||
!("half float"===e||"float16"===e),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");w(n.webgl_depth_texture||!("uint16"===e||"uint32"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");w.parameter(e,X,"invalid texture type");a.type=X[e]}var d=a.width,g=a.height,l=a.channels,e=!1;"shape"in b?(w(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),d=b.shape[0],g=
b.shape[1],3===b.shape.length&&(l=b.shape[2],w(0<l&&4>=l,"invalid number of channels"),e=!0),w(0<=d&&d<=c.maxTextureSize,"invalid width"),w(0<=g&&g<=c.maxTextureSize,"invalid height")):("radius"in b&&(d=g=b.radius,w(0<=d&&d<=c.maxTextureSize,"invalid radius")),"width"in b&&(d=b.width,w(0<=d&&d<=c.maxTextureSize,"invalid width")),"height"in b&&(g=b.height,w(0<=g&&g<=c.maxTextureSize,"invalid height")),"channels"in b&&(l=b.channels,w(0<l&&4>=l,"invalid number of channels"),e=!0));a.width=d|0;a.height=
g|0;a.channels=l|0;d=!1;"format"in b&&(d=b.format,w(n.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(d,F,"invalid texture format"),g=a.internalformat=F[d],a.format=ua[g],d in X&&!("type"in b)&&(a.type=X[d]),d in ja&&(a.compressed=!0),d=!0);!e&&d?a.channels=h[a.format]:e&&!d?a.channels!==sd[a.format]&&(a.format=a.internalformat=sd[a.channels]):d&&e&&w(a.channels===h[a.format],"number of channels inconsistent with specified format")}}
function L(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function O(){la.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function U(a,b){var n=null;g(b)?n=b:b&&(w.type(b,"object","invalid pixel data type"),Z(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),g(b.data)&&(n=b.data));w(!a.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(b.copy){w(!n,"can not specify copy and data field for the same texture");var k=da.viewportWidth,h=da.viewportHeight;a.width=a.width||k-a.xOffset;a.height=a.height||h-a.yOffset;a.needsCopy=!0;w(0<=a.xOffset&&a.xOffset<k&&0<=a.yOffset&&a.yOffset<h&&0<a.width&&a.width<=k&&0<a.height&&a.height<=h,"copy texture read out of bounds")}else if(!n)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(M(n))a.channels=a.channels||4,a.data=n,"type"in b||5121!==a.type||(a.type=A[Object.prototype.toString.call(n)]|
0);else if(y(n)){a.channels=a.channels||4;k=n;h=k.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:h=r.allocType(a.type,h);h.set(k);a.data=h;break;case 36193:a.data=D(k);break;default:w.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(H(n)){k=n.data;Array.isArray(k)||5121!==a.type||(a.type=A[Object.prototype.toString.call(k)]|0);var h=n.shape,t=n.stride,q,u,v,F;3===h.length?(v=h[2],F=t[2]):(w(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),
F=v=1);q=h[0];u=h[1];h=t[0];t=t[1];a.alignment=1;a.width=q;a.height=u;a.channels=v;a.format=a.internalformat=sd[v];a.needsFree=!0;q=F;n=n.offset;v=a.width;F=a.height;u=a.channels;for(var z=r.allocType(36193===a.type?5126:a.type,v*F*u),I=0,ca=0;ca<F;++ca)for(var G=0;G<v;++G)for(var X=0;X<u;++X)z[I++]=k[h*G+t*ca+q*X+n];d(a,z)}else if(P(n)===f||P(n)===e||P(n)===l)P(n)===f||P(n)===e?a.element=n:a.element=n.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(P(n)===T)a.element=
n,a.width=n.width,a.height=n.height,a.channels=4;else if(P(n)===aa)a.element=n,a.width=n.naturalWidth,a.height=n.naturalHeight,a.channels=4;else if(P(n)===m)a.element=n,a.width=n.videoWidth,a.height=n.videoHeight,a.channels=4;else if(p(n)){k=a.width||n[0].length;h=a.height||n.length;t=a.channels;t=C(n[0][0])?t||n[0][0].length:t||1;q=E.shape(n);v=1;for(F=0;F<q.length;++F)v*=q[F];v=r.allocType(36193===a.type?5126:a.type,v);E.flatten(n,q,"",v);d(a,v);a.alignment=1;a.width=k;a.height=h;a.channels=t;a.format=
a.internalformat=sd[t];a.needsFree=!0}5126===a.type?w(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&w(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function ra(b,e,d,k,g){var n=b.element,l=b.data,h=b.internalformat,f=b.format,m=b.type,t=b.width,c=b.height;L(b);n?a.texSubImage2D(e,g,d,k,f,m,n):b.compressed?a.compressedTexSubImage2D(e,g,d,k,h,t,c,l):b.needsCopy?(K(),a.copyTexSubImage2D(e,g,
d,k,b.xOffset,b.yOffset,t,c)):a.texSubImage2D(e,g,d,k,t,c,f,m,l)}function J(){return S.pop()||new O}function Wb(a){a.needsFree&&r.freeType(a.data);O.call(a);S.push(a)}function ab(){la.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function R(a,b,e){var d=a.images[0]=J();a.mipmask=1;d.width=a.width=b;d.height=a.height=e;d.channels=a.channels=4}function u(a,b){var e=null;if(g(b))e=a.images[0]=J(),Qa(e,a),U(e,b),a.mipmask=1;else if(Z(a,b),Array.isArray(b.mipmap))for(var d=
b.mipmap,n=0;n<d.length;++n)e=a.images[n]=J(),Qa(e,a),e.width>>=n,e.height>>=n,U(e,d[n]),a.mipmask|=1<<n;else e=a.images[0]=J(),Qa(e,a),U(e,b),a.mipmask=1;Qa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||w(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ka(b,e){for(var d=b.images,g=0;g<d.length&&d[g];++g){var n=d[g],l=
e,q=g,h=n.element,f=n.data,m=n.internalformat,t=n.format,c=n.type,u=n.width,v=n.height;L(n);h?a.texImage2D(l,q,t,t,c,h):n.compressed?a.compressedTexImage2D(l,q,m,u,v,0,f):n.needsCopy?(K(),a.copyTexImage2D(l,q,t,n.xOffset,n.yOffset,u,v,0)):a.texImage2D(l,q,t,u,v,0,t,c,f||null)}}function ba(){var a=ga.pop()||new ab;la.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Ea(a){for(var b=a.images,e=0;e<b.length;++e)b[e]&&Wb(b[e]),b[e]=null;ga.push(a)}function Na(){this.magFilter=
this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function vb(a,b){if("min"in b){var e=b.min;w.parameter(e,td);a.minFilter=td[e];0<=N.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(e=b.mag,w.parameter(e,ic),a.magFilter=ic[e]);var e=a.wrapS,d=a.wrapT;if("wrap"in b){var g=b.wrap;"string"===typeof g?(w.parameter(g,pc),e=d=pc[g]):Array.isArray(g)&&(w.parameter(g[0],pc),w.parameter(g[1],pc),e=pc[g[0]],d=pc[g[1]])}else"wrapS"in
b&&(e=b.wrapS,w.parameter(e,pc),e=pc[e]),"wrapT"in b&&(d=b.wrapT,w.parameter(d,pc),d=pc[d]);a.wrapS=e;a.wrapT=d;"anisotropic"in b&&(e=b.anisotropic,w("number"===typeof e&&1<=e&&e<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){e=!1;switch(typeof b.mipmap){case "string":w.parameter(b.mipmap,ac,"invalid mipmap hint");a.mipmapHint=ac[b.mipmap];e=a.genMipmaps=!0;break;case "boolean":e=a.genMipmaps=b.mipmap;break;case "object":w(Array.isArray(b.mipmap),
"invalid mipmap type");a.genMipmaps=!1;e=!0;break;default:w.raise("invalid mipmap type")}!e||"min"in b||(a.minFilter=9984)}}function Ha(b,e){a.texParameteri(e,10241,b.minFilter);a.texParameteri(e,10240,b.magFilter);a.texParameteri(e,10242,b.wrapS);a.texParameteri(e,10243,b.wrapT);n.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(e))}function V(b){la.call(this);this.mipmask=0;this.internalformat=6408;this.id=qa++;this.refCount=
1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Na;pa.profile&&(this.stats={size:0})}function pb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ea(){var b=ca[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function va(b){var e=b.texture;w(e,"must not double destroy texture");var d=b.unit,g=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(g,null),ca[d]=null);a.deleteTexture(e);b.texture=null;b.params=null;b.pixels=
null;b.refCount=0;delete I[b.id];B.textureCount--}var ac={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,clamp:33071,mirror:33648},ic={nearest:9728,linear:9729},td=na({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},ic),tc={none:0,browser:37444},X={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},F={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,
rgb565:36194},ja={};n.ext_srgb&&(F.srgb=35904,F.srgba=35906);n.oes_texture_float&&(X.float32=X["float"]=5126);n.oes_texture_half_float&&(X.float16=X["half float"]=36193);n.webgl_depth_texture&&(na(F,{depth:6402,"depth stencil":34041}),na(X,{uint16:5123,uint32:5125,"depth stencil":34042}));n.webgl_compressed_texture_s3tc&&na(ja,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});n.webgl_compressed_texture_atc&&na(ja,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});n.webgl_compressed_texture_pvrtc&&na(ja,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});n.webgl_compressed_texture_etc1&&(ja["rgb etc1"]=36196);var Ba=Array.prototype.slice.call(a.getParameter(34467));b(ja).forEach(function(a){var b=ja[a];0<=Ba.indexOf(b)&&(F[a]=b)});var wb=b(F);c.textureFormats=wb;var Wc=[];b(F).forEach(function(a){Wc[F[a]]=a});var Tc=[];b(X).forEach(function(a){Tc[X[a]]=a});var G=[];b(ic).forEach(function(a){G[ic[a]]=
a});var v=[];b(td).forEach(function(a){v[td[a]]=a});var ha=[];b(pc).forEach(function(a){ha[pc[a]]=a});var ua=wb.reduce(function(a,b){var e=F[b];6409===e||6406===e||6409===e||6410===e||6402===e||34041===e||n.ext_srgb&&(35904===e||35906===e)?a[e]=e:32855===e||0<=b.indexOf("rgba")?a[e]=6408:a[e]=6407;return a},{}),S=[],ga=[],qa=0,I={},t=c.maxTextureUnits,ca=Array(t).map(function(){return null});na(V.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var e=0;e<t;++e){var d=ca[e];
if(d){if(0<d.bindCount)continue;d.unit=-1}ca[e]=this;b=e;break}b>=t&&w.raise("insufficient number of texture units");pa.profile&&B.maxTextureUnits<b+1&&(B.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&va(this)}});pa.profile&&(B.getTotalTextureSize=function(){var a=0;b(I).forEach(function(b){a+=I[b].stats.size});return a});return{create2D:function(b,e){function d(a,
b){var e=g.texInfo;Na.call(e);var n=ba();"number"===typeof a?"number"===typeof b?R(n,a|0,b|0):R(n,a|0,a|0):a?(w.type(a,"object","invalid arguments to regl.texture"),vb(e,a),u(n,a)):R(n,1,1);e.genMipmaps&&(n.mipmask=(n.width<<1)-1);g.mipmask=n.mipmask;Qa(g,n);w.texture2D(e,n,c);g.internalformat=n.internalformat;d.width=n.width;d.height=n.height;pb(g);ka(n,3553);Ha(e,3553);ea();Ea(n);pa.profile&&(g.stats.size=z(g.internalformat,g.type,n.width,n.height,e.genMipmaps,!1));d.format=Wc[g.internalformat];
d.type=Tc[g.type];d.mag=G[e.magFilter];d.min=v[e.minFilter];d.wrapS=ha[e.wrapS];d.wrapT=ha[e.wrapT];return d}var g=new V(3553);I[g.id]=g;B.textureCount++;d(b,e);d.subimage=function(a,b,e,n){w(!!a,"must specify image data");b|=0;e|=0;n|=0;var l=J();Qa(l,g);l.width=0;l.height=0;U(l,a);l.width=l.width||(g.width>>n)-b;l.height=l.height||(g.height>>n)-e;w(g.type===l.type&&g.format===l.format&&g.internalformat===l.internalformat,"incompatible format for texture.subimage");w(0<=b&&0<=e&&b+l.width<=g.width&&
e+l.height<=g.height,"texture.subimage write out of bounds");w(g.mipmask&1<<n,"missing mipmap data");w(l.data||l.element||l.needsCopy,"missing image data");pb(g);ra(l,3553,b,e,n);ea();Wb(l);return d};d.resize=function(b,e){var n=b|0,l=e|0||n;if(n===g.width&&l===g.height)return d;d.width=g.width=n;d.height=g.height=l;pb(g);for(var h=0;g.mipmask>>h;++h){var f=n>>h,m=l>>h;if(!f||!m)break;a.texImage2D(3553,h,g.format,f,m,0,g.format,g.type,null)}ea();pa.profile&&(g.stats.size=z(g.internalformat,g.type,
n,l,!1,!1));return d};d._reglType="texture2d";d._texture=g;pa.profile&&(d.stats=g.stats);d.destroy=function(){g.decRef()};return d},createCube:function(b,e,d,g,n,l){function h(a,b,e,d,g,n){var k,l=f.texInfo;Na.call(l);for(k=0;6>k;++k)m[k]=ba();if("number"!==typeof a&&a)if("object"===typeof a)if(b)u(m[0],a),u(m[1],b),u(m[2],e),u(m[3],d),u(m[4],g),u(m[5],n);else if(vb(l,a),Z(f,a),"faces"in a)for(a=a.faces,w(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),k=0;6>k;++k)w("object"===
typeof a[k]&&!!a[k],"invalid input for cube map face"),Qa(m[k],f),u(m[k],a[k]);else for(k=0;6>k;++k)u(m[k],a);else w.raise("invalid arguments to cube map");else for(a=a|0||1,k=0;6>k;++k)R(m[k],a,a);Qa(f,m[0]);w.optional(function(){c.npotTextureCube||w(Q(f.width)&&Q(f.height),"your browser does not support non power or two texture dimensions")});f.mipmask=l.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;w.textureCube(f,l,m,c);f.internalformat=m[0].internalformat;h.width=m[0].width;h.height=m[0].height;
pb(f);for(k=0;6>k;++k)ka(m[k],34069+k);Ha(l,34067);ea();pa.profile&&(f.stats.size=z(f.internalformat,f.type,h.width,h.height,l.genMipmaps,!0));h.format=Wc[f.internalformat];h.type=Tc[f.type];h.mag=G[l.magFilter];h.min=v[l.minFilter];h.wrapS=ha[l.wrapS];h.wrapT=ha[l.wrapT];for(k=0;6>k;++k)Ea(m[k]);return h}var f=new V(34067);I[f.id]=f;B.cubeCount++;var m=Array(6);h(b,e,d,g,n,l);h.subimage=function(a,b,e,d,g){w(!!b,"must specify image data");w("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");
e|=0;d|=0;g|=0;var n=J();Qa(n,f);n.width=0;n.height=0;U(n,b);n.width=n.width||(f.width>>g)-e;n.height=n.height||(f.height>>g)-d;w(f.type===n.type&&f.format===n.format&&f.internalformat===n.internalformat,"incompatible format for texture.subimage");w(0<=e&&0<=d&&e+n.width<=f.width&&d+n.height<=f.height,"texture.subimage write out of bounds");w(f.mipmask&1<<g,"missing mipmap data");w(n.data||n.element||n.needsCopy,"missing image data");pb(f);ra(n,34069+a,e,d,g);ea();Wb(n);return h};h.resize=function(b){b|=
0;if(b!==f.width){h.width=f.width=b;h.height=f.height=b;pb(f);for(var e=0;6>e;++e)for(var d=0;f.mipmask>>d;++d)a.texImage2D(34069+e,d,f.format,b>>d,b>>d,0,f.format,f.type,null);ea();pa.profile&&(f.stats.size=z(f.internalformat,f.type,h.width,h.height,!1,!0));return h}};h._reglType="textureCube";h._texture=f;pa.profile&&(h.stats=f.stats);h.destroy=function(){f.decRef()};return h},clear:function(){for(var b=0;b<t;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ca[b]=null;fa(I).forEach(va);B.cubeCount=
0;B.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<t;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null)}fa(I).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var e=0;32>e;++e)if(0!==(b.mipmask&1<<e))if(3553===b.target)a.texImage2D(3553,e,b.internalformat,b.width>>e,b.height>>e,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,e,b.internalformat,b.width>>e,b.height>>e,0,b.internalformat,b.type,
null);Ha(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<t;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(B,
Y,Za){Y.exports=function(c,y){function p(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function P(d,g,c){var r=z.pop()||new p;r.startQueryIndex=d;r.endQueryIndex=g;r.sum=0;r.stats=c;b.push(r)}if(!y.ext_disjoint_timer_query)return null;var g=[],d=[],z=[],b=[],w=[],na=[];return{beginQuery:function(b){var c=g.pop()||y.ext_disjoint_timer_query.createQueryEXT();y.ext_disjoint_timer_query.beginQueryEXT(35007,c);d.push(c);P(d.length-1,d.length,b)},endQuery:function(){y.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:P,update:function(){var c,p;c=d.length;if(0!==c){na.length=Math.max(na.length,c+1);w.length=Math.max(w.length,c+1);w[0]=0;var H=na[0]=0;for(p=c=0;p<d.length;++p){var r=d[p];y.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(H+=y.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),g.push(r)):d[c++]=r;w[p+1]=H;na[p+1]=c}d.length=c;for(p=c=0;p<b.length;++p){var H=b[p],D=H.startQueryIndex,r=H.endQueryIndex;H.sum+=w[r]-w[D];D=na[D];r=na[r];r===D?(H.stats.gpuTime+=H.sum/1E6,z.push(H)):
(H.startQueryIndex=D,H.endQueryIndex=r,b[c++]=H)}b.length=c}},getNumPendingQueries:function(){return d.length},clear:function(){g.push.apply(g,d);for(var b=0;b<g.length;b++)y.ext_disjoint_timer_query.deleteQueryEXT(g[b]);d.length=0;g.length=0},restore:function(){d.length=0;g.length=0}}}},{}],21:[function(B,Y,Za){function c(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function y(b){b=Error("(regl) "+b);console.error(b);throw b;}function p(b,d){b||y(d)}function P(b){return b?": "+b:""}function g(b,
d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function d(b,d,g){0>d.indexOf(b)&&y("invalid value"+P(g)+". must be one of: "+d)}function z(b,d){for(b+="";b.length<d;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};
this.hasErrors=!1}function w(b,d){this.number=b;this.line=d;this.errors=[]}function na(b,d,g){this.file=b;this.line=d;this.message=g}function fa(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function M(){var b=Error(),b=(b.stack||b).toString(),d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function H(e,
d){var g=e.split("\n"),h=1,f=0,r={unknown:new b,0:new b};r.unknown.name=r[0].name=d||fa();r.unknown.lines.push(new w(0,""));for(var y=0;y<g.length;++y){var p=g[y],a=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(p);if(a)switch(a[1]){case "line":if(a=/(\d+)(\s+\d+)?/.exec(a[2]))h=a[1]|0,a[2]&&(f=a[2]|0,f in r||(r[f]=new b));break;case "define":if(a=/SHADER_NAME(_B64)?\s+(.*)$/.exec(a[2]))r[f].name=a[1]?c(a[2]):a[2]}r[f].lines.push(new w(h++,p))}N(r).forEach(function(a){var b=r[a];b.lines.forEach(function(a){b.index[a.number]=
a})});return r}function r(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);e?d.push(new na(e[1]|0,e[2]|0,e[3].trim())):0<b.length&&d.push(new na("unknown",0,b))}});return d}function D(b,d){d.forEach(function(d){var g=b[d.file];if(g){var l=g.index[d.line];if(l){l.errors.push(d);g.hasErrors=!0;return}}b.unknown.hasErrors=!0;b.unknown.lines[0].errors.push(d)})}function C(b){b._commandRef=fa()}function E(b,d){var g=M();y(b+" in command "+(d||
fa())+("unknown"===g?"":" called from "+g))}function Q(b,d,h,f){g(b,d)||E("invalid parameter type"+P(h)+". expected "+d+", got "+typeof b,f||fa())}function A(b,d){return 32820===b||32819===b||33635===b?2:34042===b?4:f[b]*d}var N=B("./sorted-object-keys"),sd=B("./is-typed-array");B=B("./extend");var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),f={};f[5120]=f[5121]=1;f[5122]=f[5123]=f[36193]=f[33635]=f[32819]=f[32820]=2;f[5124]=f[5125]=f[5126]=
f[34042]=4;Y.exports=B(p,{optional:function(b){b()},raise:y,commandRaise:E,command:function(b,d,g){b||E(d,g||fa())},parameter:function(b,d,g){b in d||y("unknown parameter ("+b+")"+P(g)+". possible values: "+N(d).join())},commandParameter:function(b,d,g,h){b in d||E("unknown parameter ("+b+")"+P(g)+". possible values: "+N(d).join(),h||fa())},constructor:function(b){N(b).forEach(function(b){0>h.indexOf(b)&&y('invalid regl constructor argument "'+b+'". must be one of '+h)})},type:function(b,d,h){g(b,
d)||y("invalid parameter type"+P(h)+". expected "+d+", got "+typeof b)},commandType:Q,isTypedArray:function(b,d){sd(b)||y("invalid parameter type"+P(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||y("invalid parameter type, ("+b+")"+P(d)+". must be a nonnegative integer")},oneOf:d,shaderError:function(b,d,g,h,f){if(!b.getShaderParameter(d,b.COMPILE_STATUS)){d=b.getShaderInfoLog(d);b=h===b.FRAGMENT_SHADER?"fragment":"vertex";Q(g,"string",b+" shader source must be a string",f);var c=
H(g,f);g=r(d);D(c,g);N(c).forEach(function(b){function d(a,b){e.push(a);g.push(b||"")}var a=c[b];if(a.hasErrors){var e=[""],g=[""];d("file number "+b+": "+a.name+"\n","color:red;text-decoration:underline;font-weight:bold");a.lines.forEach(function(a){if(0<a.errors.length){d(z(a.number,4)+"|  ","background-color:yellow; font-weight:bold");d(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var b=0;a.errors.forEach(function(e){e=e.message;var g=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);if(g){var n=
g[1];e=g[2];switch(n){case "assign":n="="}b=Math.max(a.line.indexOf(n,b),0)}else b=0;d(z("| ",6));d(z("^^^",b+3)+"\n","font-weight:bold");d(z("| ",6));d(e+"\n","font-weight:bold")});d(z("| ",6)+"\n")}else d(z(a.number,4)+"|  "),d(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(e.join("")):(g[0]=e.join("%c"),console.log.apply(console,g))}});p.raise("Error compiling "+b+" shader, "+c[0].name)}},linkError:function(b,d,g,h,f){b.getProgramParameter(d,b.LINK_STATUS)||
(b=b.getProgramInfoLog(d),g=H(g,f),h='Error linking program with vertex shader, "'+H(h,f)[0].name+'", and fragment shader "'+g[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(h+"\n"+b),p.raise(h))},callSite:M,saveCommandRef:C,saveDrawInfo:function(b,d,g,h){function f(b){return b?h.id(b):0}function c(b,a){N(a).forEach(function(a){b[h.id(a)]=!0})}C(b);b._fragId=f(b["static"].frag);b._vertId=f(b["static"].vert);
var r=b._uniformSet={};c(r,d["static"]);c(r,d.dynamic);d=b._attributeSet={};c(d,g["static"]);c(d,g.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,g,h){b.texture?d(b.texture._texture.internalformat,g,"unsupported texture format for attachment"):d(b.renderbuffer._renderbuffer.format,h,"unsupported renderbuffer format for attachment")},guessCommand:fa,texture2D:function(b,d,g){var h=d.width,f=d.height,c=
d.channels;p(0<h&&h<=g.maxTextureSize&&0<f&&f<=g.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||p(!(h&h-1)&&!!h&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==h&&1!==f&&p(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(p(!(h&h-1)&&!!h&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),p(d.mipmask===(h<<1)-1,"missing or incomplete mipmap data"));
5126===d.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&p(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),p(!b.genMipmaps,"mipmap generation not supported with float textures"));var r=d.images;for(g=0;16>g;++g)if(r[g]){var y=h>>g,a=f>>g;p(d.mipmask&1<<g,"missing mipmap data");var n=r[g];p(n.width===y&&n.height===a,"invalid shape for mip images");p(n.format===d.format&&n.internalformat===d.internalformat&&n.type===d.type,"incompatible type for mip image");
!n.compressed&&n.data&&(y=Math.ceil(A(n.type,c)*y/n.unpackAlignment)*n.unpackAlignment,p(n.data.byteLength===y*a,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||p(0===(d.mipmask&1<<g),"extra mipmap data");d.compressed&&p(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,d,g,h){var f=b.width,c=b.height,r=b.channels;p(0<f&&f<=h.maxTextureSize&&0<c&&c<=h.maxTextureSize,"invalid texture shape");p(f===c,"cube map must be square");
p(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(h=0;h<g.length;++h){var y=g[h];p(y.width===f&&y.height===c,"inconsistent cube map face shape");d.genMipmaps&&(p(!y.compressed,"can not generate mipmap for compressed textures"),p(1===y.mipmask,"can not specify mipmaps and generate mipmaps"));for(var a=y.images,n=0;16>n;++n){var w=a[n];if(w){var z=f>>n,C=c>>n;p(y.mipmask&1<<n,"missing mipmap data");p(w.width===z&&w.height===C,"invalid shape for mip images");p(w.format===
b.format&&w.internalformat===b.internalformat&&w.type===b.type,"incompatible type for mip image");w.compressed||w.data&&p(w.data.byteLength===z*C*Math.max(A(w.type,r),w.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(B,Y,Za){Y.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(B,Y,Za){function c(c){return Array.prototype.slice.call(c)}
var y=B("./extend"),p=B("./compiled-fns");Y.exports=function(){function P(){var b=[],d=[];return y(function(){b.push.apply(b,c(arguments))},{def:function(){var g="v"+z;z++;d.push(g);0<arguments.length&&(b.push(g,"="),b.push.apply(b,c(arguments)),b.push(";"));return g},toString:function(){return c([0<d.length?"var "+d.join(",")+";":"",c(b).join("")]).join("")}})}function g(){function b(c,r){g(c,r,"=",d.def(c,r),";")}var d=P(),g=P(),w=d.toString,r=g.toString;return y(function(){d.apply(d,c(arguments))},
{def:d.def,entry:d,exit:g,save:b,set:function(g,c,r){b(g,c);d(g,c,"=",r,";")},toString:function(){return w()+r()}})}var d=0,z=0,b={},w={};return{global:P(),link:function(g){var c="$"+d,y=!1;"object"===typeof g&&g.name&&(c=g.name.replace(/ /g,"_"),y=!0);if(c in b)return c;b[c]=g;y||d++;return c},block:P,proc:function(b,d){function p(){var b="a"+z.length;z.push(b);return b}var z=[];d=d||0;for(var r=0;r<d;++r)p();var r=g(),D=r.toString;return w[b]=y(r,{arg:p,toString:function(){return c(["function(",
z.join(),"){",D(),"}"]).join("")}})},scope:g,cond:function(){var b=c(arguments).join(""),d=g(),w=g(),p=d.toString,r=w.toString;return y(d,{then:function(){d.apply(d,c(arguments));return this},"else":function(){w.apply(w,c(arguments));return this},toString:function(){var d=r();d&&(d="else{"+d+"}");return c(["if(",b,"){",p(),"}",d]).join("")}})},compile:function(){var d=[],g=[];Object.keys(b).sort(function(b,d){var g="$"===b.charAt(0),c="$"===d.charAt(0);return g||c?g&&c?+b.slice(1)<+d.slice(1)?-1:
1:g&&!c?-1:1:b.localeCompare(d)}).forEach(function(c){var y=b[c];d.push(c);g.push(y)});for(var c=0,y=d.length-1;-1<y;y--)if("$"===d[y].charAt(0)){c=y;break}c=d.slice(c).join();y=p[c];if(!y)throw Error("missing precompiled function with key: "+c);return y.apply(null,g)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(B,Y,Za){Y.exports={$0:function(c){var y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,sd,h,f,e,l,T,aa,m,pa,K,da;y=c.attributes;p=c.current;P=c.framebuffer;g=c.gl;d=c.next;z=c.vao;b=d.blend_color;
w=p.blend_color;B=d.blend_equation;fa=p.blend_equation;M=d.blend_func;H=p.blend_func;r=d.colorMask;D=p.colorMask;C=d.depth_range;E=p.depth_range;Q=d.polygonOffset_offset;A=p.polygonOffset_offset;N=d.sample_coverage;sd=p.sample_coverage;h=d.scissor_box;f=p.scissor_box;e=d.stencil_func;l=p.stencil_func;T=d.stencil_opBack;aa=p.stencil_opBack;m=d.stencil_opFront;pa=p.stencil_opFront;K=d.viewport;da=p.viewport;return{poll:function(){var a,n,c,y,z,db,Y,la,Qa,Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea;p.dirty=!1;n=
d.blend_enable;c=d.cull_enable;y=d.depth_enable;z=d.dither;db=d.polygonOffset_enable;Y=d.sample_alpha;la=d.sample_enable;Qa=d.scissor_enable;Z=d.stencil_enable;L=d.cull_face;O=p.cull_face;U=d.depth_func;ra=p.depth_func;J=d.depth_mask;Wb=p.depth_mask;ab=d.frontFace;R=p.frontFace;u=d.lineWidth;ka=p.lineWidth;ba=d.stencil_mask;Ea=p.stencil_mask;a=P.next;a!==P.cur&&(a?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null),P.cur=a);n!==p.blend_enable&&(n?g.enable(3042):g.disable(3042),p.blend_enable=
n);c!==p.cull_enable&&(c?g.enable(2884):g.disable(2884),p.cull_enable=c);y!==p.depth_enable&&(y?g.enable(2929):g.disable(2929),p.depth_enable=y);z!==p.dither&&(z?g.enable(3024):g.disable(3024),p.dither=z);db!==p.polygonOffset_enable&&(db?g.enable(32823):g.disable(32823),p.polygonOffset_enable=db);Y!==p.sample_alpha&&(Y?g.enable(32926):g.disable(32926),p.sample_alpha=Y);la!==p.sample_enable&&(la?g.enable(32928):g.disable(32928),p.sample_enable=la);Qa!==p.scissor_enable&&(Qa?g.enable(3089):g.disable(3089),
p.scissor_enable=Qa);Z!==p.stencil_enable&&(Z?g.enable(2960):g.disable(2960),p.stencil_enable=Z);if(b[0]!==w[0]||b[1]!==w[1]||b[2]!==w[2]||b[3]!==w[3])g.blendColor(b[0],b[1],b[2],b[3]),w[0]=b[0],w[1]=b[1],w[2]=b[2],w[3]=b[3];if(B[0]!==fa[0]||B[1]!==fa[1])g.blendEquationSeparate(B[0],B[1]),fa[0]=B[0],fa[1]=B[1];if(M[0]!==H[0]||M[1]!==H[1]||M[2]!==H[2]||M[3]!==H[3])g.blendFuncSeparate(M[0],M[1],M[2],M[3]),H[0]=M[0],H[1]=M[1],H[2]=M[2],H[3]=M[3];if(r[0]!==D[0]||r[1]!==D[1]||r[2]!==D[2]||r[3]!==D[3])g.colorMask(r[0],
r[1],r[2],r[3]),D[0]=r[0],D[1]=r[1],D[2]=r[2],D[3]=r[3];L!==O&&(g.cullFace(L),p.cull_face=L);U!==ra&&(g.depthFunc(U),p.depth_func=U);J!==Wb&&(g.depthMask(J),p.depth_mask=J);if(C[0]!==E[0]||C[1]!==E[1])g.depthRange(C[0],C[1]),E[0]=C[0],E[1]=C[1];ab!==R&&(g.frontFace(ab),p.frontFace=ab);u!==ka&&(g.lineWidth(u),p.lineWidth=u);if(Q[0]!==A[0]||Q[1]!==A[1])g.polygonOffset(Q[0],Q[1]),A[0]=Q[0],A[1]=Q[1];if(N[0]!==sd[0]||N[1]!==sd[1])g.sampleCoverage(N[0],N[1]),sd[0]=N[0],sd[1]=N[1];if(h[0]!==f[0]||h[1]!==
f[1]||h[2]!==f[2]||h[3]!==f[3])g.scissor(h[0],h[1],h[2],h[3]),f[0]=h[0],f[1]=h[1],f[2]=h[2],f[3]=h[3];if(e[0]!==l[0]||e[1]!==l[1]||e[2]!==l[2])g.stencilFunc(e[0],e[1],e[2]),l[0]=e[0],l[1]=e[1],l[2]=e[2];ba!==Ea&&(g.stencilMask(ba),p.stencil_mask=ba);if(T[0]!==aa[0]||T[1]!==aa[1]||T[2]!==aa[2]||T[3]!==aa[3])g.stencilOpSeparate(T[0],T[1],T[2],T[3]),aa[0]=T[0],aa[1]=T[1],aa[2]=T[2],aa[3]=T[3];if(m[0]!==pa[0]||m[1]!==pa[1]||m[2]!==pa[2]||m[3]!==pa[3])g.stencilOpSeparate(m[0],m[1],m[2],m[3]),pa[0]=m[0],
pa[1]=m[1],pa[2]=m[2],pa[3]=m[3];if(K[0]!==da[0]||K[1]!==da[1]||K[2]!==da[2]||K[3]!==da[3])g.viewport(K[0],K[1],K[2],K[3]),da[0]=K[0],da[1]=K[1],da[2]=K[2],da[3]=K[3]},refresh:function(){var a,n,c,ma,Ka,db,Y,la,Qa,Z,L,O,U,ra,J,Wb;p.dirty=!1;n=d.blend_enable;c=d.cull_enable;ma=d.depth_enable;Ka=d.dither;db=d.polygonOffset_enable;Y=d.sample_alpha;la=d.sample_enable;Qa=d.scissor_enable;Z=d.stencil_enable;L=d.cull_face;O=d.depth_func;U=d.depth_mask;ra=d.frontFace;J=d.lineWidth;Wb=d.stencil_mask;(a=P.next)?
g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null);P.cur=a;a=y[0];a.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=y[1];a.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,
a.x,a.y,a.z,a.w),a.buffer=null);a=y[2];a.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=y[3];a.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);
a=y[4];a.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=y[5];a.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=y[6];a.buffer?(g.enableVertexAttribArray(6),
g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=y[7];a.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=y[8];a.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,a.buffer.buffer),
g.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=y[9];a.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=y[10];a.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(10,a.size,
a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=y[11];a.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=y[12];a.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,
a.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=y[13];a.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=y[14];a.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(14),
g.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=y[15];a.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);z.currentVAO=null;z.setVAO(z.targetVAO);n?g.enable(3042):g.disable(3042);p.blend_enable=n;c?g.enable(2884):g.disable(2884);p.cull_enable=c;ma?g.enable(2929):g.disable(2929);p.depth_enable=ma;Ka?g.enable(3024):
g.disable(3024);p.dither=Ka;db?g.enable(32823):g.disable(32823);p.polygonOffset_enable=db;Y?g.enable(32926):g.disable(32926);p.sample_alpha=Y;la?g.enable(32928):g.disable(32928);p.sample_enable=la;Qa?g.enable(3089):g.disable(3089);p.scissor_enable=Qa;Z?g.enable(2960):g.disable(2960);p.stencil_enable=Z;g.blendColor(b[0],b[1],b[2],b[3]);w[0]=b[0];w[1]=b[1];w[2]=b[2];w[3]=b[3];g.blendEquationSeparate(B[0],B[1]);fa[0]=B[0];fa[1]=B[1];g.blendFuncSeparate(M[0],M[1],M[2],M[3]);H[0]=M[0];H[1]=M[1];H[2]=M[2];
H[3]=M[3];g.colorMask(r[0],r[1],r[2],r[3]);D[0]=r[0];D[1]=r[1];D[2]=r[2];D[3]=r[3];g.cullFace(L);p.cull_face=L;g.depthFunc(O);p.depth_func=O;g.depthMask(U);p.depth_mask=U;g.depthRange(C[0],C[1]);E[0]=C[0];E[1]=C[1];g.frontFace(ra);p.frontFace=ra;g.lineWidth(J);p.lineWidth=J;g.polygonOffset(Q[0],Q[1]);A[0]=Q[0];A[1]=Q[1];g.sampleCoverage(N[0],N[1]);sd[0]=N[0];sd[1]=N[1];g.scissor(h[0],h[1],h[2],h[3]);f[0]=h[0];f[1]=h[1];f[2]=h[2];f[3]=h[3];g.stencilFunc(e[0],e[1],e[2]);l[0]=e[0];l[1]=e[1];l[2]=e[2];
g.stencilMask(Wb);p.stencil_mask=Wb;g.stencilOpSeparate(T[0],T[1],T[2],T[3]);aa[0]=T[0];aa[1]=T[1];aa[2]=T[2];aa[3]=T[3];g.stencilOpSeparate(m[0],m[1],m[2],m[3]);pa[0]=m[0];pa[1]=m[1];pa[2]=m[2];pa[3]=m[3];g.viewport(K[0],K[1],K[2],K[3]);da[0]=K[0];da[1]=K[1];da[2]=K[2];da[3]=K[3]}}},$3:function(c,y,p,P){var g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db;g=c.context;d=c.current;z=c.framebuffer;b=c.gl;w=c.next;B=c.shader;fa=c.vao;M=w.blend_color;H=d.blend_color;r=w.blend_equation;
D=d.blend_equation;C=w.blend_func;E=d.blend_func;Q=w.colorMask;A=d.colorMask;N=w.depth_range;Y=d.depth_range;h=w.polygonOffset_offset;f=d.polygonOffset_offset;e=w.sample_coverage;l=d.sample_coverage;T=w.scissor_box;aa=d.scissor_box;m=w.stencil_func;pa=d.stencil_func;K=w.stencil_opBack;da=d.stencil_opBack;a=w.stencil_opFront;n=d.stencil_opFront;W=w.viewport;ma=d.viewport;Ka={};db={};return{batch:function(g,c){var p,Z,L,O,U;p=z.next;p!==z.cur&&(p?b.bindFramebuffer(36160,p.framebuffer):b.bindFramebuffer(36160,
null),z.cur=p);if(d.dirty){p=w.dither;p!==d.dither&&(p?b.enable(3024):b.disable(3024),d.dither=p);p=w.blend_enable;p!==d.blend_enable&&(p?b.enable(3042):b.disable(3042),d.blend_enable=p);p=M[0];L=M[1];O=M[2];U=M[3];if(p!==H[0]||L!==H[1]||O!==H[2]||U!==H[3])b.blendColor(p,L,O,U),H[0]=p,H[1]=L,H[2]=O,H[3]=U;p=r[0];L=r[1];if(p!==D[0]||L!==D[1])b.blendEquationSeparate(p,L),D[0]=p,D[1]=L;p=C[0];L=C[1];O=C[2];U=C[3];if(p!==E[0]||L!==E[1]||O!==E[2]||U!==E[3])b.blendFuncSeparate(p,L,O,U),E[0]=p,E[1]=L,E[2]=
O,E[3]=U;p=w.depth_enable;p!==d.depth_enable&&(p?b.enable(2929):b.disable(2929),d.depth_enable=p);p=w.depth_func;p!==d.depth_func&&(b.depthFunc(p),d.depth_func=p);p=N[0];L=N[1];if(p!==Y[0]||L!==Y[1])b.depthRange(p,L),Y[0]=p,Y[1]=L;p=w.depth_mask;p!==d.depth_mask&&(b.depthMask(p),d.depth_mask=p);p=Q[0];L=Q[1];O=Q[2];U=Q[3];if(p!==A[0]||L!==A[1]||O!==A[2]||U!==A[3])b.colorMask(p,L,O,U),A[0]=p,A[1]=L,A[2]=O,A[3]=U;p=w.cull_enable;p!==d.cull_enable&&(p?b.enable(2884):b.disable(2884),d.cull_enable=p);
p=w.cull_face;p!==d.cull_face&&(b.cullFace(p),d.cull_face=p);p=w.frontFace;p!==d.frontFace&&(b.frontFace(p),d.frontFace=p);p=w.lineWidth;p!==d.lineWidth&&(b.lineWidth(p),d.lineWidth=p);p=w.polygonOffset_enable;p!==d.polygonOffset_enable&&(p?b.enable(32823):b.disable(32823),d.polygonOffset_enable=p);p=h[0];L=h[1];if(p!==f[0]||L!==f[1])b.polygonOffset(p,L),f[0]=p,f[1]=L;p=w.sample_alpha;p!==d.sample_alpha&&(p?b.enable(32926):b.disable(32926),d.sample_alpha=p);p=w.sample_enable;p!==d.sample_enable&&
(p?b.enable(32928):b.disable(32928),d.sample_enable=p);p=e[0];L=e[1];if(p!==l[0]||L!==l[1])b.sampleCoverage(p,L),l[0]=p,l[1]=L;p=w.stencil_enable;p!==d.stencil_enable&&(p?b.enable(2960):b.disable(2960),d.stencil_enable=p);p=w.stencil_mask;p!==d.stencil_mask&&(b.stencilMask(p),d.stencil_mask=p);p=m[0];L=m[1];O=m[2];if(p!==pa[0]||L!==pa[1]||O!==pa[2])b.stencilFunc(p,L,O),pa[0]=p,pa[1]=L,pa[2]=O;p=a[0];L=a[1];O=a[2];U=a[3];if(p!==n[0]||L!==n[1]||O!==n[2]||U!==n[3])b.stencilOpSeparate(p,L,O,U),n[0]=p,
n[1]=L,n[2]=O,n[3]=U;p=K[0];L=K[1];O=K[2];U=K[3];if(p!==da[0]||L!==da[1]||O!==da[2]||U!==da[3])b.stencilOpSeparate(p,L,O,U),da[0]=p,da[1]=L,da[2]=O,da[3]=U;p=w.scissor_enable;p!==d.scissor_enable&&(p?b.enable(3089):b.disable(3089),d.scissor_enable=p);p=T[0];L=T[1];O=T[2];U=T[3];if(p!==aa[0]||L!==aa[1]||O!==aa[2]||U!==aa[3])b.scissor(p,L,O,U),aa[0]=p,aa[1]=L,aa[2]=O,aa[3]=U;p=W[0];L=W[1];O=W[2];U=W[3];if(p!==ma[0]||L!==ma[1]||O!==ma[2]||U!==ma[3])b.viewport(p,L,O,U),ma[0]=p,ma[1]=L,ma[2]=O,ma[3]=U;
d.dirty=!1}if(p=d.profile)Z=performance.now(),y.count+=c;L=B.program(B.vert,B.frag);b.useProgram(L.program);fa.setVAO(null);O=L.id;(U=db[O])||(U=db[O]=P(L));U.call(this,g,c);fa.setVAO(null);p&&(y.cpuTime+=performance.now()-Z)},draw:function(g){var c,P,Z,L,O;c=z.next;c!==z.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),z.cur=c);if(d.dirty){c=w.dither;c!==d.dither&&(c?b.enable(3024):b.disable(3024),d.dither=c);c=w.blend_enable;c!==d.blend_enable&&(c?b.enable(3042):b.disable(3042),
d.blend_enable=c);c=M[0];Z=M[1];L=M[2];O=M[3];if(c!==H[0]||Z!==H[1]||L!==H[2]||O!==H[3])b.blendColor(c,Z,L,O),H[0]=c,H[1]=Z,H[2]=L,H[3]=O;c=r[0];Z=r[1];if(c!==D[0]||Z!==D[1])b.blendEquationSeparate(c,Z),D[0]=c,D[1]=Z;c=C[0];Z=C[1];L=C[2];O=C[3];if(c!==E[0]||Z!==E[1]||L!==E[2]||O!==E[3])b.blendFuncSeparate(c,Z,L,O),E[0]=c,E[1]=Z,E[2]=L,E[3]=O;c=w.depth_enable;c!==d.depth_enable&&(c?b.enable(2929):b.disable(2929),d.depth_enable=c);c=w.depth_func;c!==d.depth_func&&(b.depthFunc(c),d.depth_func=c);c=N[0];
Z=N[1];if(c!==Y[0]||Z!==Y[1])b.depthRange(c,Z),Y[0]=c,Y[1]=Z;c=w.depth_mask;c!==d.depth_mask&&(b.depthMask(c),d.depth_mask=c);c=Q[0];Z=Q[1];L=Q[2];O=Q[3];if(c!==A[0]||Z!==A[1]||L!==A[2]||O!==A[3])b.colorMask(c,Z,L,O),A[0]=c,A[1]=Z,A[2]=L,A[3]=O;c=w.cull_enable;c!==d.cull_enable&&(c?b.enable(2884):b.disable(2884),d.cull_enable=c);c=w.cull_face;c!==d.cull_face&&(b.cullFace(c),d.cull_face=c);c=w.frontFace;c!==d.frontFace&&(b.frontFace(c),d.frontFace=c);c=w.lineWidth;c!==d.lineWidth&&(b.lineWidth(c),
d.lineWidth=c);c=w.polygonOffset_enable;c!==d.polygonOffset_enable&&(c?b.enable(32823):b.disable(32823),d.polygonOffset_enable=c);c=h[0];Z=h[1];if(c!==f[0]||Z!==f[1])b.polygonOffset(c,Z),f[0]=c,f[1]=Z;c=w.sample_alpha;c!==d.sample_alpha&&(c?b.enable(32926):b.disable(32926),d.sample_alpha=c);c=w.sample_enable;c!==d.sample_enable&&(c?b.enable(32928):b.disable(32928),d.sample_enable=c);c=e[0];Z=e[1];if(c!==l[0]||Z!==l[1])b.sampleCoverage(c,Z),l[0]=c,l[1]=Z;c=w.stencil_enable;c!==d.stencil_enable&&(c?
b.enable(2960):b.disable(2960),d.stencil_enable=c);c=w.stencil_mask;c!==d.stencil_mask&&(b.stencilMask(c),d.stencil_mask=c);c=m[0];Z=m[1];L=m[2];if(c!==pa[0]||Z!==pa[1]||L!==pa[2])b.stencilFunc(c,Z,L),pa[0]=c,pa[1]=Z,pa[2]=L;c=a[0];Z=a[1];L=a[2];O=a[3];if(c!==n[0]||Z!==n[1]||L!==n[2]||O!==n[3])b.stencilOpSeparate(c,Z,L,O),n[0]=c,n[1]=Z,n[2]=L,n[3]=O;c=K[0];Z=K[1];L=K[2];O=K[3];if(c!==da[0]||Z!==da[1]||L!==da[2]||O!==da[3])b.stencilOpSeparate(c,Z,L,O),da[0]=c,da[1]=Z,da[2]=L,da[3]=O;c=w.scissor_enable;
c!==d.scissor_enable&&(c?b.enable(3089):b.disable(3089),d.scissor_enable=c);c=T[0];Z=T[1];L=T[2];O=T[3];if(c!==aa[0]||Z!==aa[1]||L!==aa[2]||O!==aa[3])b.scissor(c,Z,L,O),aa[0]=c,aa[1]=Z,aa[2]=L,aa[3]=O;c=W[0];Z=W[1];L=W[2];O=W[3];if(c!==ma[0]||Z!==ma[1]||L!==ma[2]||O!==ma[3])b.viewport(c,Z,L,O),ma[0]=c,ma[1]=Z,ma[2]=L,ma[3]=O;d.dirty=!1}if(c=d.profile)P=performance.now(),y.count++;Z=B.program(B.vert,B.frag);b.useProgram(Z.program);fa.setVAO(null);L=Z.id;(O=Ka[L])||(O=Ka[L]=p(Z));O.call(this,g);fa.setVAO(null);
c&&(y.cpuTime+=performance.now()-P)},scope:function(a,b,e){var n,c;if(n=d.profile)c=performance.now(),y.count++;b(g,a,e);n&&(y.cpuTime+=performance.now()-c)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(c,y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,
e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db,xd,la,Qa,Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va,ac,pc,ic,td,tc,X,F,ja,Ba,wb,Wc,Tc,G,v,ha,ua,S,ga,qa){var I,t,ca,x,sa,oa,k,mc,ia,q,Jb,Bb,Ue,pe,le,je,Hd,ue,od,ge,ve,yd,Id,$d,Pd,Ye,xf,af,Cd,Be,Vd,Wd,me,Yd,pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb;I=c.attributes;t=c.context;ca=c.current;x=c.draw;sa=c.elements;oa=c.framebuffer;k=c.gl;mc=c.next;ia=c.shader;q=c.uniforms;Jb=c.vao;Bb=mc.blend_color;
Ue=ca.blend_color;pe=mc.blend_equation;le=ca.blend_equation;je=mc.blend_func;Hd=ca.blend_func;ue=mc.colorMask;od=ca.colorMask;ge=mc.depth_range;ve=ca.depth_range;yd=mc.polygonOffset_offset;Id=ca.polygonOffset_offset;$d=mc.sample_coverage;Pd=ca.sample_coverage;Ye=mc.scissor_box;xf=ca.scissor_box;af=mc.stencil_func;Cd=ca.stencil_func;Be=mc.stencil_opBack;Vd=ca.stencil_opBack;Wd=mc.stencil_opFront;me=ca.stencil_opFront;Yd=mc.viewport;pd=ca.viewport;hd={};wd={};Yc=new Float32Array(16);id=new Float32Array(16);
nc=new Float32Array(16);Gd=new Float32Array(16);ed=new Float32Array(16);Jc=new Float32Array(16);qc=new Float32Array(16);bb=new Float32Array(16);Gc=new Float32Array(16);Fb=new Float32Array(16);oc=new Float32Array(16);Ta=new Float32Array(16);Hc=new Float32Array(16);bc=new Float32Array(16);rc=new Float32Array(16);Jd=new Float32Array(16);Dd=new Float32Array(16);yc=new Float32Array(16);Yb=new Float32Array(16);Dc=new Float32Array(16);Pc=new Float32Array(16);La=new Float32Array(16);Gb=new Float32Array(16);
Wa=new Float32Array(16);Ca=new Float32Array(16);jd=new Float32Array(16);ib=new Float32Array(16);Sa=new Float32Array(16);Ib=new Float32Array(16);eb=new Float32Array(16);Ec=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(a,e){var n,c,h,f;n=oa.next;n!==oa.cur&&(n?k.bindFramebuffer(36160,n.framebuffer):k.bindFramebuffer(36160,null),oa.cur=n);if(ca.dirty){var l,q,m,p,y,K,ia,N,T,aa,W,bb,Ta,ta,da,wa,Bb,Fb,za,bc,Ia,pa,Jc,Ra,ed;l=ue[0];q=ue[1];m=ue[2];p=ue[3];if(l!==od[0]||q!==od[1]||m!==
od[2]||p!==od[3])k.colorMask(l,q,m,p),od[0]=l,od[1]=q,od[2]=m,od[3]=p;y=mc.frontFace;y!==ca.frontFace&&(k.frontFace(y),ca.frontFace=y);K=mc.polygonOffset_enable;K!==ca.polygonOffset_enable&&(K?k.enable(32823):k.disable(32823),ca.polygonOffset_enable=K);ia=yd[0];N=yd[1];if(ia!==Id[0]||N!==Id[1])k.polygonOffset(ia,N),Id[0]=ia,Id[1]=N;T=mc.sample_alpha;T!==ca.sample_alpha&&(T?k.enable(32926):k.disable(32926),ca.sample_alpha=T);aa=mc.sample_enable;aa!==ca.sample_enable&&(aa?k.enable(32928):k.disable(32928),
ca.sample_enable=aa);W=$d[0];bb=$d[1];if(W!==Pd[0]||bb!==Pd[1])k.sampleCoverage(W,bb),Pd[0]=W,Pd[1]=bb;Ta=mc.stencil_enable;Ta!==ca.stencil_enable&&(Ta?k.enable(2960):k.disable(2960),ca.stencil_enable=Ta);ta=mc.stencil_mask;ta!==ca.stencil_mask&&(k.stencilMask(ta),ca.stencil_mask=ta);da=af[0];wa=af[1];Bb=af[2];if(da!==Cd[0]||wa!==Cd[1]||Bb!==Cd[2])k.stencilFunc(da,wa,Bb),Cd[0]=da,Cd[1]=wa,Cd[2]=Bb;Fb=Wd[0];za=Wd[1];bc=Wd[2];Ia=Wd[3];if(Fb!==me[0]||za!==me[1]||bc!==me[2]||Ia!==me[3])k.stencilOpSeparate(Fb,
za,bc,Ia),me[0]=Fb,me[1]=za,me[2]=bc,me[3]=Ia;pa=Be[0];Jc=Be[1];Ra=Be[2];ed=Be[3];if(pa!==Vd[0]||Jc!==Vd[1]||Ra!==Vd[2]||ed!==Vd[3])k.stencilOpSeparate(pa,Jc,Ra,ed),Vd[0]=pa,Vd[1]=Jc,Vd[2]=Ra,Vd[3]=ed}k.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;k.disable(3042);ca.blend_enable=!1;k.blendEquationSeparate(32774,32774);le[0]=32774;le[1]=32774;k.blendFuncSeparate(770,771,1,1);Hd[0]=770;Hd[1]=771;Hd[2]=1;Hd[3]=1;k.enable(2884);ca.cull_enable=!0;k.cullFace(1029);ca.cull_face=1029;k.enable(2929);
ca.depth_enable=!0;k.depthFunc(513);ca.depth_func=513;k.depthMask(!0);ca.depth_mask=!0;k.depthRange(0,1);ve[0]=0;ve[1]=1;k.disable(3024);ca.dither=!1;k.lineWidth(2);ca.lineWidth=2;k.enable(3089);ca.scissor_enable=!0;c=ca.profile;ca.profile=!1;k.useProgram(xd.program);var ma,$a,qc,xa,Ye,Ja,nc,hb,kb,ya,Hc,Da,sb,tb,Xa,Ya,Gc,rc,id,Va,Nb,oc,Fa,Yc,Pa,Aa,nb,yb,Eb,ub,Gd,zb,je;Jb.setVAO(null);ma=ac.location;$a=I[ma];$a.buffer||k.enableVertexAttribArray(ma);if($a.type!==P.dtype||4!==$a.size||$a.buffer!==P||
!1!==$a.normalized||0!==$a.offset||0!==$a.stride)k.bindBuffer(34962,P.buffer),k.vertexAttribPointer(ma,4,P.dtype,!1,0,0),$a.type=P.dtype,$a.size=4,$a.buffer=P,$a.normalized=!1,$a.offset=0,$a.stride=0;qc=pc.location;xa=I[qc];xa.buffer||k.enableVertexAttribArray(qc);if(xa.type!==g.dtype||4!==xa.size||xa.buffer!==g||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)k.bindBuffer(34962,g.buffer),k.vertexAttribPointer(qc,4,g.dtype,!1,0,0),xa.type=g.dtype,xa.size=4,xa.buffer=g,xa.normalized=!1,xa.offset=
0,xa.stride=0;Ye=ic.location;Ja=I[Ye];Ja.buffer||k.enableVertexAttribArray(Ye);if(Ja.type!==d.dtype||4!==Ja.size||Ja.buffer!==d||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)k.bindBuffer(34962,d.buffer),k.vertexAttribPointer(Ye,4,d.dtype,!1,0,0),Ja.type=d.dtype,Ja.size=4,Ja.buffer=d,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;nc=td.location;hb=I[nc];hb.buffer||k.enableVertexAttribArray(nc);if(hb.type!==z.dtype||4!==hb.size||hb.buffer!==z||!1!==hb.normalized||0!==hb.offset||0!==hb.stride)k.bindBuffer(34962,
z.buffer),k.vertexAttribPointer(nc,4,z.dtype,!1,0,0),hb.type=z.dtype,hb.size=4,hb.buffer=z,hb.normalized=!1,hb.offset=0,hb.stride=0;kb=tc.location;ya=I[kb];ya.buffer||k.enableVertexAttribArray(kb);if(ya.type!==b.dtype||4!==ya.size||ya.buffer!==b||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(kb,4,b.dtype,!1,0,0),ya.type=b.dtype,ya.size=4,ya.buffer=b,ya.normalized=!1,ya.offset=0,ya.stride=0;Hc=X.location;Da=I[Hc];Da.buffer||k.enableVertexAttribArray(Hc);
if(Da.type!==w.dtype||4!==Da.size||Da.buffer!==w||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)k.bindBuffer(34962,w.buffer),k.vertexAttribPointer(Hc,4,w.dtype,!1,0,0),Da.type=w.dtype,Da.size=4,Da.buffer=w,Da.normalized=!1,Da.offset=0,Da.stride=0;sb=F.location;tb=I[sb];tb.buffer||k.enableVertexAttribArray(sb);if(tb.type!==B.dtype||4!==tb.size||tb.buffer!==B||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)k.bindBuffer(34962,B.buffer),k.vertexAttribPointer(sb,4,B.dtype,!1,0,0),tb.type=B.dtype,
tb.size=4,tb.buffer=B,tb.normalized=!1,tb.offset=0,tb.stride=0;Xa=ja.location;Ya=I[Xa];Ya.buffer||k.enableVertexAttribArray(Xa);if(Ya.type!==fa.dtype||4!==Ya.size||Ya.buffer!==fa||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)k.bindBuffer(34962,fa.buffer),k.vertexAttribPointer(Xa,4,fa.dtype,!1,0,0),Ya.type=fa.dtype,Ya.size=4,Ya.buffer=fa,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Gc=Ba.location;rc=I[Gc];rc.buffer||k.enableVertexAttribArray(Gc);if(rc.type!==M.dtype||4!==rc.size||rc.buffer!==M||!1!==
rc.normalized||0!==rc.offset||0!==rc.stride)k.bindBuffer(34962,M.buffer),k.vertexAttribPointer(Gc,4,M.dtype,!1,0,0),rc.type=M.dtype,rc.size=4,rc.buffer=M,rc.normalized=!1,rc.offset=0,rc.stride=0;id=wb.location;Va=I[id];Va.buffer||k.enableVertexAttribArray(id);if(Va.type!==H.dtype||4!==Va.size||Va.buffer!==H||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)k.bindBuffer(34962,H.buffer),k.vertexAttribPointer(id,4,H.dtype,!1,0,0),Va.type=H.dtype,Va.size=4,Va.buffer=H,Va.normalized=!1,Va.offset=0,Va.stride=
0;Nb=Wc.location;oc=I[Nb];oc.buffer||k.enableVertexAttribArray(Nb);if(oc.type!==r.dtype||4!==oc.size||oc.buffer!==r||!1!==oc.normalized||0!==oc.offset||0!==oc.stride)k.bindBuffer(34962,r.buffer),k.vertexAttribPointer(Nb,4,r.dtype,!1,0,0),oc.type=r.dtype,oc.size=4,oc.buffer=r,oc.normalized=!1,oc.offset=0,oc.stride=0;Fa=Tc.location;Yc=I[Fa];Yc.buffer||k.enableVertexAttribArray(Fa);if(Yc.type!==D.dtype||4!==Yc.size||Yc.buffer!==D||!1!==Yc.normalized||0!==Yc.offset||0!==Yc.stride)k.bindBuffer(34962,D.buffer),
k.vertexAttribPointer(Fa,4,D.dtype,!1,0,0),Yc.type=D.dtype,Yc.size=4,Yc.buffer=D,Yc.normalized=!1,Yc.offset=0,Yc.stride=0;Pa=G.location;Aa=I[Pa];Aa.buffer||k.enableVertexAttribArray(Pa);if(Aa.type!==C.dtype||4!==Aa.size||Aa.buffer!==C||!1!==Aa.normalized||0!==Aa.offset||0!==Aa.stride)k.bindBuffer(34962,C.buffer),k.vertexAttribPointer(Pa,4,C.dtype,!1,0,0),Aa.type=C.dtype,Aa.size=4,Aa.buffer=C,Aa.normalized=!1,Aa.offset=0,Aa.stride=0;nb=v.location;yb=I[nb];yb.buffer||k.enableVertexAttribArray(nb);if(yb.type!==
E.dtype||4!==yb.size||yb.buffer!==E||!1!==yb.normalized||0!==yb.offset||0!==yb.stride)k.bindBuffer(34962,E.buffer),k.vertexAttribPointer(nb,4,E.dtype,!1,0,0),yb.type=E.dtype,yb.size=4,yb.buffer=E,yb.normalized=!1,yb.offset=0,yb.stride=0;Eb=ha.location;ub=I[Eb];ub.buffer||k.enableVertexAttribArray(Eb);if(ub.type!==Q.dtype||4!==ub.size||ub.buffer!==Q||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)k.bindBuffer(34962,Q.buffer),k.vertexAttribPointer(Eb,4,Q.dtype,!1,0,0),ub.type=Q.dtype,ub.size=4,ub.buffer=
Q,ub.normalized=!1,ub.offset=0,ub.stride=0;Gd=Qa.location;zb=I[Gd];zb.buffer||k.enableVertexAttribArray(Gd);if(zb.type!==A.dtype||4!==zb.size||zb.buffer!==A||!1!==zb.normalized||0!==zb.offset||0!==zb.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(Gd,4,A.dtype,!1,0,0),zb.type=A.dtype,zb.size=4,zb.buffer=A,zb.normalized=!1,zb.offset=0,zb.stride=0;k.uniform1i(ua.location,la.bind());(je=x.elements)?k.bindBuffer(34963,je.buffer.buffer):Jb.currentVAO&&(je=sa.getElements(Jb.currentVAO.elements))&&
k.bindBuffer(34963,je.buffer.buffer);for(h=0;h<e;++h){f=a[h];var ge,Yd,Jd,Y,pe,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Ka,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,db,fd,md,Vc,sd,vd,zf,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,Se,Za,we,fe,ee,de,qe,be;hd.height=f.viewportHeight;hd.width=f.viewportWidth;hd.x=f.viewportX;hd.y=f.viewportY;ge=hd.x|0;Yd=hd.y|0;Jd="width"in hd?hd.width|0:t.framebufferWidth-ge;Y="height"in hd?hd.height|0:t.framebufferHeight-Yd;pe=t.viewportWidth;t.viewportWidth=Jd;Xb=t.viewportHeight;
t.viewportHeight=Y;k.viewport(ge,Yd,Jd,Y);pd[0]=ge;pd[1]=Yd;pd[2]=Jd;pd[3]=Y;wd.height=f.scissorHeight;wd.width=f.scissorWidth;wd.x=f.scissorX;wd.y=f.scissorY;cc=wd.x|0;Qb=wd.y|0;Ga="width"in wd?wd.width|0:t.framebufferWidth-cc;Zb="height"in wd?wd.height|0:t.framebufferHeight-Qb;k.scissor(cc,Qb,Ga,Zb);xf[0]=cc;xf[1]=Qb;xf[2]=Ga;xf[3]=Zb;ob=f.dim0A;k.uniformMatrix4fv(L.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Dd[0]=ob[0],Dd[1]=ob[1],Dd[2]=ob[2],Dd[3]=ob[3],Dd[4]=ob[4],Dd[5]=ob[5],
Dd[6]=ob[6],Dd[7]=ob[7],Dd[8]=ob[8],Dd[9]=ob[9],Dd[10]=ob[10],Dd[11]=ob[11],Dd[12]=ob[12],Dd[13]=ob[13],Dd[14]=ob[14],Dd[15]=ob[15],Dd));Ab=f.dim1A;k.uniformMatrix4fv(J.location,!1,Array.isArray(Ab)||Ab instanceof Float32Array?Ab:(yc[0]=Ab[0],yc[1]=Ab[1],yc[2]=Ab[2],yc[3]=Ab[3],yc[4]=Ab[4],yc[5]=Ab[5],yc[6]=Ab[6],yc[7]=Ab[7],yc[8]=Ab[8],yc[9]=Ab[9],yc[10]=Ab[10],yc[11]=Ab[11],yc[12]=Ab[12],yc[13]=Ab[13],yc[14]=Ab[14],yc[15]=Ab[15],yc));Ob=f.dim0B;k.uniformMatrix4fv(O.location,!1,Array.isArray(Ob)||
Ob instanceof Float32Array?Ob:(Yb[0]=Ob[0],Yb[1]=Ob[1],Yb[2]=Ob[2],Yb[3]=Ob[3],Yb[4]=Ob[4],Yb[5]=Ob[5],Yb[6]=Ob[6],Yb[7]=Ob[7],Yb[8]=Ob[8],Yb[9]=Ob[9],Yb[10]=Ob[10],Yb[11]=Ob[11],Yb[12]=Ob[12],Yb[13]=Ob[13],Yb[14]=Ob[14],Yb[15]=Ob[15],Yb));Rb=f.dim1B;k.uniformMatrix4fv(Wb.location,!1,Array.isArray(Rb)||Rb instanceof Float32Array?Rb:(Dc[0]=Rb[0],Dc[1]=Rb[1],Dc[2]=Rb[2],Dc[3]=Rb[3],Dc[4]=Rb[4],Dc[5]=Rb[5],Dc[6]=Rb[6],Dc[7]=Rb[7],Dc[8]=Rb[8],Dc[9]=Rb[9],Dc[10]=Rb[10],Dc[11]=Rb[11],Dc[12]=Rb[12],Dc[13]=
Rb[13],Dc[14]=Rb[14],Dc[15]=Rb[15],Dc));ec=f.dim0C;k.uniformMatrix4fv(U.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(Pc[0]=ec[0],Pc[1]=ec[1],Pc[2]=ec[2],Pc[3]=ec[3],Pc[4]=ec[4],Pc[5]=ec[5],Pc[6]=ec[6],Pc[7]=ec[7],Pc[8]=ec[8],Pc[9]=ec[9],Pc[10]=ec[10],Pc[11]=ec[11],Pc[12]=ec[12],Pc[13]=ec[13],Pc[14]=ec[14],Pc[15]=ec[15],Pc));gc=f.dim1C;k.uniformMatrix4fv(ab.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(La[0]=gc[0],La[1]=gc[1],La[2]=gc[2],La[3]=gc[3],La[4]=gc[4],La[5]=
gc[5],La[6]=gc[6],La[7]=gc[7],La[8]=gc[8],La[9]=gc[9],La[10]=gc[10],La[11]=gc[11],La[12]=gc[12],La[13]=gc[13],La[14]=gc[14],La[15]=gc[15],La));Ka=f.dim0D;k.uniformMatrix4fv(ra.location,!1,Array.isArray(Ka)||Ka instanceof Float32Array?Ka:(Gb[0]=Ka[0],Gb[1]=Ka[1],Gb[2]=Ka[2],Gb[3]=Ka[3],Gb[4]=Ka[4],Gb[5]=Ka[5],Gb[6]=Ka[6],Gb[7]=Ka[7],Gb[8]=Ka[8],Gb[9]=Ka[9],Gb[10]=Ka[10],Gb[11]=Ka[11],Gb[12]=Ka[12],Gb[13]=Ka[13],Gb[14]=Ka[14],Gb[15]=Ka[15],Gb));zc=f.dim1D;k.uniformMatrix4fv(R.location,!1,Array.isArray(zc)||
zc instanceof Float32Array?zc:(Wa[0]=zc[0],Wa[1]=zc[1],Wa[2]=zc[2],Wa[3]=zc[3],Wa[4]=zc[4],Wa[5]=zc[5],Wa[6]=zc[6],Wa[7]=zc[7],Wa[8]=zc[8],Wa[9]=zc[9],Wa[10]=zc[10],Wa[11]=zc[11],Wa[12]=zc[12],Wa[13]=zc[13],Wa[14]=zc[14],Wa[15]=zc[15],Wa));Ac=f.loA;k.uniformMatrix4fv(vb.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(Ca[0]=Ac[0],Ca[1]=Ac[1],Ca[2]=Ac[2],Ca[3]=Ac[3],Ca[4]=Ac[4],Ca[5]=Ac[5],Ca[6]=Ac[6],Ca[7]=Ac[7],Ca[8]=Ac[8],Ca[9]=Ac[9],Ca[10]=Ac[10],Ca[11]=Ac[11],Ca[12]=Ac[12],Ca[13]=
Ac[13],Ca[14]=Ac[14],Ca[15]=Ac[15],Ca));Bc=f.hiA;k.uniformMatrix4fv(ka.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(jd[0]=Bc[0],jd[1]=Bc[1],jd[2]=Bc[2],jd[3]=Bc[3],jd[4]=Bc[4],jd[5]=Bc[5],jd[6]=Bc[6],jd[7]=Bc[7],jd[8]=Bc[8],jd[9]=Bc[9],jd[10]=Bc[10],jd[11]=Bc[11],jd[12]=Bc[12],jd[13]=Bc[13],jd[14]=Bc[14],jd[15]=Bc[15],jd));Lc=f.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(Lc)||Lc instanceof Float32Array?Lc:(ib[0]=Lc[0],ib[1]=Lc[1],ib[2]=Lc[2],ib[3]=Lc[3],ib[4]=Lc[4],ib[5]=
Lc[5],ib[6]=Lc[6],ib[7]=Lc[7],ib[8]=Lc[8],ib[9]=Lc[9],ib[10]=Lc[10],ib[11]=Lc[11],ib[12]=Lc[12],ib[13]=Lc[13],ib[14]=Lc[14],ib[15]=Lc[15],ib));Xc=f.hiB;k.uniformMatrix4fv(ba.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(Sa[0]=Xc[0],Sa[1]=Xc[1],Sa[2]=Xc[2],Sa[3]=Xc[3],Sa[4]=Xc[4],Sa[5]=Xc[5],Sa[6]=Xc[6],Sa[7]=Xc[7],Sa[8]=Xc[8],Sa[9]=Xc[9],Sa[10]=Xc[10],Sa[11]=Xc[11],Sa[12]=Xc[12],Sa[13]=Xc[13],Sa[14]=Xc[14],Sa[15]=Xc[15],Sa));Qc=f.loC;k.uniformMatrix4fv(V.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(Ib[0]=Qc[0],Ib[1]=Qc[1],Ib[2]=Qc[2],Ib[3]=Qc[3],Ib[4]=Qc[4],Ib[5]=Qc[5],Ib[6]=Qc[6],Ib[7]=Qc[7],Ib[8]=Qc[8],Ib[9]=Qc[9],Ib[10]=Qc[10],Ib[11]=Qc[11],Ib[12]=Qc[12],Ib[13]=Qc[13],Ib[14]=Qc[14],Ib[15]=Qc[15],Ib));Mc=f.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(Mc)||Mc instanceof Float32Array?Mc:(eb[0]=Mc[0],eb[1]=Mc[1],eb[2]=Mc[2],eb[3]=Mc[3],eb[4]=Mc[4],eb[5]=Mc[5],eb[6]=Mc[6],eb[7]=Mc[7],eb[8]=Mc[8],eb[9]=Mc[9],eb[10]=Mc[10],eb[11]=Mc[11],eb[12]=Mc[12],eb[13]=
Mc[13],eb[14]=Mc[14],eb[15]=Mc[15],eb));Mb=f.loD;k.uniformMatrix4fv(pb.location,!1,Array.isArray(Mb)||Mb instanceof Float32Array?Mb:(Ec[0]=Mb[0],Ec[1]=Mb[1],Ec[2]=Mb[2],Ec[3]=Mb[3],Ec[4]=Mb[4],Ec[5]=Mb[5],Ec[6]=Mb[6],Ec[7]=Mb[7],Ec[8]=Mb[8],Ec[9]=Mb[9],Ec[10]=Mb[10],Ec[11]=Mb[11],Ec[12]=Mb[12],Ec[13]=Mb[13],Ec[14]=Mb[14],Ec[15]=Mb[15],Ec));Hb=f.hiD;k.uniformMatrix4fv(Na.location,!1,Array.isArray(Hb)||Hb instanceof Float32Array?Hb:(Sb[0]=Hb[0],Sb[1]=Hb[1],Sb[2]=Hb[2],Sb[3]=Hb[3],Sb[4]=Hb[4],Sb[5]=
Hb[5],Sb[6]=Hb[6],Sb[7]=Hb[7],Sb[8]=Hb[8],Sb[9]=Hb[9],Sb[10]=Hb[10],Sb[11]=Hb[11],Sb[12]=Hb[12],Sb[13]=Hb[13],Sb[14]=Hb[14],Sb[15]=Hb[15],Sb));Nc=f.resolution;Fc=Nc[0];fc=Nc[1];h&&Rc===Fc&&Uc===fc||(Rc=Fc,Uc=fc,k.uniform2f(S.location,Fc,fc));db=f.viewBoxPos;fd=db[0];Vc=db[1];h&&md===fd&&sd===Vc||(md=fd,sd=Vc,k.uniform2f(ga.location,fd,Vc));vd=f.viewBoxSize;zf=vd[0];ne=vd[1];h&&te===zf&&Md===ne||(te=zf,Md=ne,k.uniform2f(qa.location,zf,ne));Kd=f.maskHeight;h&&cd===Kd||(cd=Kd,k.uniform1f(ea.location,
Kd));Cc=f.drwLayer;h&&ld===Cc||(ld=Cc,k.uniform1f(u.location,Cc));gd=f.contextColor;$c=gd[0];zd=gd[1];Se=gd[2];we=gd[3];h&&nd===$c&&Bd===zd&&Za===Se&&fe===we||(nd=$c,Bd=zd,Za=Se,fe=we,k.uniform4f(Z.location,$c,zd,Se,we));(ee=f.maskTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);de=ee._texture;k.uniform1i(va.location,de.bind());qe=f.offset;if(be=f.count)je?k.drawElements(1,be,je.type,qe<<(je.type-5121>>1)):k.drawArrays(1,qe,be),t.viewportWidth=pe,t.viewportHeight=Xb,de.unbind()}la.unbind();
ca.dirty=!0;Jb.setVAO(null);ca.profile=c},draw:function(a){var e,n,f,c,h,l;e=oa.next;e!==oa.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),oa.cur=e);if(ca.dirty){e=ue[0];l=ue[1];n=ue[2];f=ue[3];if(e!==od[0]||l!==od[1]||n!==od[2]||f!==od[3])k.colorMask(e,l,n,f),od[0]=e,od[1]=l,od[2]=n,od[3]=f;e=mc.frontFace;e!==ca.frontFace&&(k.frontFace(e),ca.frontFace=e);e=mc.polygonOffset_enable;e!==ca.polygonOffset_enable&&(e?k.enable(32823):k.disable(32823),ca.polygonOffset_enable=
e);e=yd[0];l=yd[1];if(e!==Id[0]||l!==Id[1])k.polygonOffset(e,l),Id[0]=e,Id[1]=l;e=mc.sample_alpha;e!==ca.sample_alpha&&(e?k.enable(32926):k.disable(32926),ca.sample_alpha=e);e=mc.sample_enable;e!==ca.sample_enable&&(e?k.enable(32928):k.disable(32928),ca.sample_enable=e);e=$d[0];l=$d[1];if(e!==Pd[0]||l!==Pd[1])k.sampleCoverage(e,l),Pd[0]=e,Pd[1]=l;e=mc.stencil_enable;e!==ca.stencil_enable&&(e?k.enable(2960):k.disable(2960),ca.stencil_enable=e);e=mc.stencil_mask;e!==ca.stencil_mask&&(k.stencilMask(e),
ca.stencil_mask=e);e=af[0];l=af[1];n=af[2];if(e!==Cd[0]||l!==Cd[1]||n!==Cd[2])k.stencilFunc(e,l,n),Cd[0]=e,Cd[1]=l,Cd[2]=n;e=Wd[0];l=Wd[1];n=Wd[2];f=Wd[3];if(e!==me[0]||l!==me[1]||n!==me[2]||f!==me[3])k.stencilOpSeparate(e,l,n,f),me[0]=e,me[1]=l,me[2]=n,me[3]=f;e=Be[0];l=Be[1];n=Be[2];f=Be[3];if(e!==Vd[0]||l!==Vd[1]||n!==Vd[2]||f!==Vd[3])k.stencilOpSeparate(e,l,n,f),Vd[0]=e,Vd[1]=l,Vd[2]=n,Vd[3]=f}hd.height=a.viewportHeight;hd.width=a.viewportWidth;hd.x=a.viewportX;hd.y=a.viewportY;n=hd.x|0;f=hd.y|
0;c="width"in hd?hd.width|0:t.framebufferWidth-n;h="height"in hd?hd.height|0:t.framebufferHeight-f;e=t.viewportWidth;t.viewportWidth=c;l=t.viewportHeight;t.viewportHeight=h;k.viewport(n,f,c,h);pd[0]=n;pd[1]=f;pd[2]=c;pd[3]=h;k.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;k.disable(3042);ca.blend_enable=!1;k.blendEquationSeparate(32774,32774);le[0]=32774;le[1]=32774;k.blendFuncSeparate(770,771,1,1);Hd[0]=770;Hd[1]=771;Hd[2]=1;Hd[3]=1;k.enable(2884);ca.cull_enable=!0;k.cullFace(1029);ca.cull_face=
1029;k.enable(2929);ca.depth_enable=!0;k.depthFunc(513);ca.depth_func=513;k.depthMask(!0);ca.depth_mask=!0;k.depthRange(0,1);ve[0]=0;ve[1]=1;k.disable(3024);ca.dither=!1;k.lineWidth(2);ca.lineWidth=2;wd.height=a.scissorHeight;wd.width=a.scissorWidth;wd.x=a.scissorX;wd.y=a.scissorY;n=wd.x|0;f=wd.y|0;c="width"in wd?wd.width|0:t.framebufferWidth-n;h="height"in wd?wd.height|0:t.framebufferHeight-f;k.scissor(n,f,c,h);xf[0]=n;xf[1]=f;xf[2]=c;xf[3]=h;k.enable(3089);ca.scissor_enable=!0;n=ca.profile;ca.profile=
!1;k.useProgram(p.program);Jb.setVAO(null);f=ac.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==P.dtype||4!==c.size||c.buffer!==P||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,P.buffer),k.vertexAttribPointer(f,4,P.dtype,!1,0,0),c.type=P.dtype,c.size=4,c.buffer=P,c.normalized=!1,c.offset=0,c.stride=0;f=pc.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==g.dtype||4!==c.size||c.buffer!==g||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,
g.buffer),k.vertexAttribPointer(f,4,g.dtype,!1,0,0),c.type=g.dtype,c.size=4,c.buffer=g,c.normalized=!1,c.offset=0,c.stride=0;f=ic.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==d.dtype||4!==c.size||c.buffer!==d||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,d.buffer),k.vertexAttribPointer(f,4,d.dtype,!1,0,0),c.type=d.dtype,c.size=4,c.buffer=d,c.normalized=!1,c.offset=0,c.stride=0;f=td.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==z.dtype||
4!==c.size||c.buffer!==z||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,z.buffer),k.vertexAttribPointer(f,4,z.dtype,!1,0,0),c.type=z.dtype,c.size=4,c.buffer=z,c.normalized=!1,c.offset=0,c.stride=0;f=tc.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==b.dtype||4!==c.size||c.buffer!==b||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(f,4,b.dtype,!1,0,0),c.type=b.dtype,c.size=4,c.buffer=b,c.normalized=!1,c.offset=0,
c.stride=0;f=X.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==w.dtype||4!==c.size||c.buffer!==w||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,w.buffer),k.vertexAttribPointer(f,4,w.dtype,!1,0,0),c.type=w.dtype,c.size=4,c.buffer=w,c.normalized=!1,c.offset=0,c.stride=0;f=F.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==B.dtype||4!==c.size||c.buffer!==B||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,B.buffer),k.vertexAttribPointer(f,
4,B.dtype,!1,0,0),c.type=B.dtype,c.size=4,c.buffer=B,c.normalized=!1,c.offset=0,c.stride=0;f=ja.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==fa.dtype||4!==c.size||c.buffer!==fa||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,fa.buffer),k.vertexAttribPointer(f,4,fa.dtype,!1,0,0),c.type=fa.dtype,c.size=4,c.buffer=fa,c.normalized=!1,c.offset=0,c.stride=0;f=Ba.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==M.dtype||4!==c.size||c.buffer!==M||
!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,M.buffer),k.vertexAttribPointer(f,4,M.dtype,!1,0,0),c.type=M.dtype,c.size=4,c.buffer=M,c.normalized=!1,c.offset=0,c.stride=0;f=wb.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==H.dtype||4!==c.size||c.buffer!==H||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,H.buffer),k.vertexAttribPointer(f,4,H.dtype,!1,0,0),c.type=H.dtype,c.size=4,c.buffer=H,c.normalized=!1,c.offset=0,c.stride=0;f=Wc.location;
c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==r.dtype||4!==c.size||c.buffer!==r||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,r.buffer),k.vertexAttribPointer(f,4,r.dtype,!1,0,0),c.type=r.dtype,c.size=4,c.buffer=r,c.normalized=!1,c.offset=0,c.stride=0;f=Tc.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==D.dtype||4!==c.size||c.buffer!==D||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,D.buffer),k.vertexAttribPointer(f,4,D.dtype,!1,
0,0),c.type=D.dtype,c.size=4,c.buffer=D,c.normalized=!1,c.offset=0,c.stride=0;f=G.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==C.dtype||4!==c.size||c.buffer!==C||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,C.buffer),k.vertexAttribPointer(f,4,C.dtype,!1,0,0),c.type=C.dtype,c.size=4,c.buffer=C,c.normalized=!1,c.offset=0,c.stride=0;f=v.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==E.dtype||4!==c.size||c.buffer!==E||!1!==c.normalized||0!==
c.offset||0!==c.stride)k.bindBuffer(34962,E.buffer),k.vertexAttribPointer(f,4,E.dtype,!1,0,0),c.type=E.dtype,c.size=4,c.buffer=E,c.normalized=!1,c.offset=0,c.stride=0;f=ha.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==Q.dtype||4!==c.size||c.buffer!==Q||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,Q.buffer),k.vertexAttribPointer(f,4,Q.dtype,!1,0,0),c.type=Q.dtype,c.size=4,c.buffer=Q,c.normalized=!1,c.offset=0,c.stride=0;f=Qa.location;c=I[f];c.buffer||k.enableVertexAttribArray(f);
if(c.type!==A.dtype||4!==c.size||c.buffer!==A||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(f,4,A.dtype,!1,0,0),c.type=A.dtype,c.size=4,c.buffer=A,c.normalized=!1,c.offset=0,c.stride=0;f=a.dim0A;k.uniformMatrix4fv(L.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Yc[0]=f[0],Yc[1]=f[1],Yc[2]=f[2],Yc[3]=f[3],Yc[4]=f[4],Yc[5]=f[5],Yc[6]=f[6],Yc[7]=f[7],Yc[8]=f[8],Yc[9]=f[9],Yc[10]=f[10],Yc[11]=f[11],Yc[12]=f[12],Yc[13]=f[13],Yc[14]=f[14],
Yc[15]=f[15],Yc));f=a.dim1A;k.uniformMatrix4fv(J.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(id[0]=f[0],id[1]=f[1],id[2]=f[2],id[3]=f[3],id[4]=f[4],id[5]=f[5],id[6]=f[6],id[7]=f[7],id[8]=f[8],id[9]=f[9],id[10]=f[10],id[11]=f[11],id[12]=f[12],id[13]=f[13],id[14]=f[14],id[15]=f[15],id));f=a.dim0B;k.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(nc[0]=f[0],nc[1]=f[1],nc[2]=f[2],nc[3]=f[3],nc[4]=f[4],nc[5]=f[5],nc[6]=f[6],nc[7]=f[7],nc[8]=f[8],nc[9]=f[9],
nc[10]=f[10],nc[11]=f[11],nc[12]=f[12],nc[13]=f[13],nc[14]=f[14],nc[15]=f[15],nc));f=a.dim1B;k.uniformMatrix4fv(Wb.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gd[0]=f[0],Gd[1]=f[1],Gd[2]=f[2],Gd[3]=f[3],Gd[4]=f[4],Gd[5]=f[5],Gd[6]=f[6],Gd[7]=f[7],Gd[8]=f[8],Gd[9]=f[9],Gd[10]=f[10],Gd[11]=f[11],Gd[12]=f[12],Gd[13]=f[13],Gd[14]=f[14],Gd[15]=f[15],Gd));f=a.dim0C;k.uniformMatrix4fv(U.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ed[0]=f[0],ed[1]=f[1],ed[2]=f[2],ed[3]=f[3],
ed[4]=f[4],ed[5]=f[5],ed[6]=f[6],ed[7]=f[7],ed[8]=f[8],ed[9]=f[9],ed[10]=f[10],ed[11]=f[11],ed[12]=f[12],ed[13]=f[13],ed[14]=f[14],ed[15]=f[15],ed));f=a.dim1C;k.uniformMatrix4fv(ab.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.dim0D;k.uniformMatrix4fv(ra.location,!1,Array.isArray(f)||f instanceof
Float32Array?f:(qc[0]=f[0],qc[1]=f[1],qc[2]=f[2],qc[3]=f[3],qc[4]=f[4],qc[5]=f[5],qc[6]=f[6],qc[7]=f[7],qc[8]=f[8],qc[9]=f[9],qc[10]=f[10],qc[11]=f[11],qc[12]=f[12],qc[13]=f[13],qc[14]=f[14],qc[15]=f[15],qc));f=a.dim1D;k.uniformMatrix4fv(R.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(bb[0]=f[0],bb[1]=f[1],bb[2]=f[2],bb[3]=f[3],bb[4]=f[4],bb[5]=f[5],bb[6]=f[6],bb[7]=f[7],bb[8]=f[8],bb[9]=f[9],bb[10]=f[10],bb[11]=f[11],bb[12]=f[12],bb[13]=f[13],bb[14]=f[14],bb[15]=f[15],bb));f=a.loA;k.uniformMatrix4fv(vb.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],Gc[2]=f[2],Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=f[14],Gc[15]=f[15],Gc));f=a.hiA;k.uniformMatrix4fv(ka.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fb[0]=f[0],Fb[1]=f[1],Fb[2]=f[2],Fb[3]=f[3],Fb[4]=f[4],Fb[5]=f[5],Fb[6]=f[6],Fb[7]=f[7],Fb[8]=f[8],Fb[9]=f[9],Fb[10]=f[10],Fb[11]=f[11],Fb[12]=f[12],Fb[13]=f[13],Fb[14]=
f[14],Fb[15]=f[15],Fb));f=a.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(oc[0]=f[0],oc[1]=f[1],oc[2]=f[2],oc[3]=f[3],oc[4]=f[4],oc[5]=f[5],oc[6]=f[6],oc[7]=f[7],oc[8]=f[8],oc[9]=f[9],oc[10]=f[10],oc[11]=f[11],oc[12]=f[12],oc[13]=f[13],oc[14]=f[14],oc[15]=f[15],oc));f=a.hiB;k.uniformMatrix4fv(ba.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ta[0]=f[0],Ta[1]=f[1],Ta[2]=f[2],Ta[3]=f[3],Ta[4]=f[4],Ta[5]=f[5],Ta[6]=f[6],Ta[7]=f[7],Ta[8]=f[8],Ta[9]=f[9],
Ta[10]=f[10],Ta[11]=f[11],Ta[12]=f[12],Ta[13]=f[13],Ta[14]=f[14],Ta[15]=f[15],Ta));f=a.loC;k.uniformMatrix4fv(V.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=f[14],Hc[15]=f[15],Hc));f=a.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(bc[0]=f[0],bc[1]=f[1],bc[2]=f[2],bc[3]=f[3],bc[4]=
f[4],bc[5]=f[5],bc[6]=f[6],bc[7]=f[7],bc[8]=f[8],bc[9]=f[9],bc[10]=f[10],bc[11]=f[11],bc[12]=f[12],bc[13]=f[13],bc[14]=f[14],bc[15]=f[15],bc));f=a.loD;k.uniformMatrix4fv(pb.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(rc[0]=f[0],rc[1]=f[1],rc[2]=f[2],rc[3]=f[3],rc[4]=f[4],rc[5]=f[5],rc[6]=f[6],rc[7]=f[7],rc[8]=f[8],rc[9]=f[9],rc[10]=f[10],rc[11]=f[11],rc[12]=f[12],rc[13]=f[13],rc[14]=f[14],rc[15]=f[15],rc));f=a.hiD;k.uniformMatrix4fv(Na.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Jd[0]=f[0],Jd[1]=f[1],Jd[2]=f[2],Jd[3]=f[3],Jd[4]=f[4],Jd[5]=f[5],Jd[6]=f[6],Jd[7]=f[7],Jd[8]=f[8],Jd[9]=f[9],Jd[10]=f[10],Jd[11]=f[11],Jd[12]=f[12],Jd[13]=f[13],Jd[14]=f[14],Jd[15]=f[15],Jd));f=a.resolution;k.uniform2f(S.location,f[0],f[1]);f=a.viewBoxPos;k.uniform2f(ga.location,f[0],f[1]);f=a.viewBoxSize;k.uniform2f(qa.location,f[0],f[1]);k.uniform1f(ea.location,a.maskHeight);k.uniform1f(u.location,a.drwLayer);f=a.contextColor;k.uniform4f(Z.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===
f._reglType&&(f=f.color[0]);f=f._texture;k.uniform1i(va.location,f.bind());k.uniform1i(ua.location,N.bind());(c=x.elements)?k.bindBuffer(34963,c.buffer.buffer):Jb.currentVAO&&(c=sa.getElements(Jb.currentVAO.elements))&&k.bindBuffer(34963,c.buffer.buffer);h=a.offset;if(a=a.count)c?k.drawElements(1,a,c.type,h<<(c.type-5121>>1)):k.drawArrays(1,h,a),ca.dirty=!0,Jb.setVAO(null),t.viewportWidth=e,t.viewportHeight=l,ca.profile=n,f.unbind(),N.unbind()},scope:function(c,k,p){var u,v,y,F,I,G,X,O,L,J,N,U,R,
V,S,ga,ja,oa,Z,ha,sa,ba,ea,ka,ua,Ca,pc,bb,qa,Ta,Ba,xa,La,Pd,Fb,Jb,Wa,ya,Wd,Da,bc,Dc,Jc,ed,Yb,Sa,ra,Gb,qc,rc,Fa,Pc,Pa,Aa,td,od,va,ib,eb,la,nc,oc,Cd,Vd,Yc,Hc,Gc,yc,Ib,Ga,wb,ob,Ab,pd,id,me,Wc,Sb,Gd,tc,jd,Ec,Ea,Dd,Ue,Mb,Hb,le,Hd,yd,xf,Be,Jd,ac,af,ab,Qa,ic,$d,ue,Na,pb,Id,Wb,Cc,ve,Ha,Tc,vb,zd,Bd,xd,Za,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Xe,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf,of,lf,pf,Af,Bf,Le,ye,mf,nf,Cf,Ff,yf,Df,Ef,
tf,uf,sf,vf,wf,Hf,If,Jf,Kf,qf,Qf,Gf,rf,cg,Rf,Sf,pg,cf,Ze,Lf,Mf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Nf,Of,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;hd.height=c.viewportHeight;hd.width=c.viewportWidth;hd.x=c.viewportX;hd.y=c.viewportY;u=hd.x|0;v=hd.y|0;y="width"in hd?hd.width|0:t.framebufferWidth-u;F="height"in hd?hd.height|0:t.framebufferHeight-
v;I=t.viewportWidth;t.viewportWidth=y;G=t.viewportHeight;t.viewportHeight=F;X=Yd[0];Yd[0]=u;O=Yd[1];Yd[1]=v;L=Yd[2];Yd[2]=y;J=Yd[3];Yd[3]=F;N=Bb[0];Bb[0]=0;U=Bb[1];Bb[1]=0;R=Bb[2];Bb[2]=0;V=Bb[3];Bb[3]=0;S=mc.blend_enable;mc.blend_enable=!1;ga=pe[0];pe[0]=32774;ja=pe[1];pe[1]=32774;oa=je[0];je[0]=770;Z=je[1];je[1]=771;ha=je[2];je[2]=1;sa=je[3];je[3]=1;ba=mc.cull_enable;mc.cull_enable=!0;ea=mc.cull_face;mc.cull_face=1029;ka=mc.depth_enable;mc.depth_enable=!0;ua=mc.depth_func;mc.depth_func=513;Ca=mc.depth_mask;
mc.depth_mask=!0;pc=ge[0];ge[0]=0;bb=ge[1];ge[1]=1;qa=mc.dither;mc.dither=!1;Ta=mc.lineWidth;mc.lineWidth=2;wd.height=c.scissorHeight;wd.width=c.scissorWidth;wd.x=c.scissorX;wd.y=c.scissorY;Ba=wd.x|0;xa=wd.y|0;La="width"in wd?wd.width|0:t.framebufferWidth-Ba;Pd="height"in wd?wd.height|0:t.framebufferHeight-xa;Fb=Ye[0];Ye[0]=Ba;Jb=Ye[1];Ye[1]=xa;Wa=Ye[2];Ye[2]=La;ya=Ye[3];Ye[3]=Pd;Wd=mc.scissor_enable;mc.scissor_enable=!0;Da=ca.profile;ca.profile=!1;bc=c.offset;Dc=x.offset;x.offset=bc;Jc=c.count;ed=
x.count;x.count=Jc;Yb=x.primitive;x.primitive=1;Sa=c.contextColor;ra=q[24];q[24]=Sa;Gb=c.dim0A;qc=q[3];q[3]=Gb;rc=c.dim0B;Fa=q[5];q[5]=rc;Pc=c.dim0C;Pa=q[7];q[7]=Pc;Aa=c.dim0D;td=q[9];q[9]=Aa;od=c.dim1A;va=q[4];q[4]=od;ib=c.dim1B;eb=q[6];q[6]=ib;la=c.dim1C;nc=q[8];q[8]=la;oc=c.dim1D;Cd=q[10];q[10]=oc;Vd=c.drwLayer;Yc=q[23];q[23]=Vd;Hc=c.hiA;Gc=q[12];q[12]=Hc;yc=c.hiB;Ib=q[14];q[14]=yc;Ga=c.hiC;wb=q[16];q[16]=Ga;ob=c.hiD;Ab=q[18];q[18]=ob;pd=c.loA;id=q[11];q[11]=pd;me=c.loB;Wc=q[13];q[13]=me;Sb=c.loC;
Gd=q[15];q[15]=Sb;tc=c.loD;jd=q[17];q[17]=tc;Ec=c.maskHeight;Ea=q[22];q[22]=Ec;Dd=c.maskTexture;Ue=q[25];q[25]=Dd;Mb=q[26];q[26]=Y;Hb=c.resolution;le=q[19];q[19]=Hb;Hd=c.viewBoxPos;yd=q[20];q[20]=Hd;xf=c.viewBoxSize;Be=q[21];q[21]=xf;Jd=h.buffer;h.buffer=A;ac=h.divisor;h.divisor=0;af=h.normalized;h.normalized=!1;ab=h.offset;h.offset=0;Qa=h.size;h.size=0;ic=h.state;h.state=1;$d=h.stride;h.stride=0;ue=h.type;h.type=A.dtype;Na=h.w;h.w=0;pb=h.x;h.x=0;Id=h.y;h.y=0;Wb=h.z;h.z=0;Cc=f.buffer;f.buffer=P;ve=
f.divisor;f.divisor=0;Ha=f.normalized;f.normalized=!1;Tc=f.offset;f.offset=0;vb=f.size;f.size=0;zd=f.state;f.state=1;Bd=f.stride;f.stride=0;xd=f.type;f.type=P.dtype;Za=f.w;f.w=0;we=f.x;f.x=0;fe=f.y;f.y=0;ee=f.z;f.z=0;de=e.buffer;e.buffer=g;qe=e.divisor;e.divisor=0;be=e.normalized;e.normalized=!1;he=e.offset;e.offset=0;xc=e.size;e.size=0;Sc=e.state;e.state=1;re=e.stride;e.stride=0;ke=e.type;e.type=g.dtype;Ld=e.w;e.w=0;Od=e.x;e.x=0;Qd=e.y;e.y=0;Rd=e.z;e.z=0;ie=l.buffer;l.buffer=d;Ce=l.divisor;l.divisor=
0;Xe=l.normalized;l.normalized=!1;oe=l.offset;l.offset=0;Me=l.size;l.size=0;Ne=l.state;l.state=1;Je=l.stride;l.stride=0;se=l.type;l.type=d.dtype;ze=l.w;l.w=0;De=l.x;l.x=0;Ee=l.y;l.y=0;Fe=l.z;l.z=0;Ae=T.buffer;T.buffer=z;Nd=T.divisor;T.divisor=0;Ud=T.normalized;T.normalized=!1;Zd=T.offset;T.offset=0;ce=T.size;T.size=0;Ge=T.state;T.state=1;Fd=T.stride;T.stride=0;Sd=T.type;T.type=z.dtype;xe=T.w;T.w=0;He=T.x;T.x=0;ef=T.y;T.y=0;We=T.z;T.z=0;Oe=aa.buffer;aa.buffer=b;Ke=aa.divisor;aa.divisor=0;Ve=aa.normalized;
aa.normalized=!1;Te=aa.offset;aa.offset=0;Pe=aa.size;aa.size=0;Qe=aa.state;aa.state=1;Td=aa.stride;aa.stride=0;Xd=aa.type;aa.type=b.dtype;Re=aa.w;aa.w=0;ff=aa.x;aa.x=0;kf=aa.y;aa.y=0;bf=aa.z;aa.z=0;gf=m.buffer;m.buffer=w;hf=m.divisor;m.divisor=0;jf=m.normalized;m.normalized=!1;of=m.offset;m.offset=0;lf=m.size;m.size=0;pf=m.state;m.state=1;Af=m.stride;m.stride=0;Bf=m.type;m.type=w.dtype;Le=m.w;m.w=0;ye=m.x;m.x=0;mf=m.y;m.y=0;nf=m.z;m.z=0;Cf=pa.buffer;pa.buffer=B;Ff=pa.divisor;pa.divisor=0;yf=pa.normalized;
pa.normalized=!1;Df=pa.offset;pa.offset=0;Ef=pa.size;pa.size=0;tf=pa.state;pa.state=1;uf=pa.stride;pa.stride=0;sf=pa.type;pa.type=B.dtype;vf=pa.w;pa.w=0;wf=pa.x;pa.x=0;Hf=pa.y;pa.y=0;If=pa.z;pa.z=0;Jf=K.buffer;K.buffer=fa;Kf=K.divisor;K.divisor=0;qf=K.normalized;K.normalized=!1;Qf=K.offset;K.offset=0;Gf=K.size;K.size=0;rf=K.state;K.state=1;cg=K.stride;K.stride=0;Rf=K.type;K.type=fa.dtype;Sf=K.w;K.w=0;pg=K.x;K.x=0;cf=K.y;K.y=0;Ze=K.z;K.z=0;Lf=da.buffer;da.buffer=M;Mf=da.divisor;da.divisor=0;dg=da.normalized;
da.normalized=!1;eg=da.offset;da.offset=0;fg=da.size;da.size=0;gg=da.state;da.state=1;hg=da.stride;da.stride=0;Vf=da.type;da.type=M.dtype;Tf=da.w;da.w=0;Wf=da.x;da.x=0;Xf=da.y;da.y=0;Yf=da.z;da.z=0;ig=a.buffer;a.buffer=H;qg=a.divisor;a.divisor=0;rg=a.normalized;a.normalized=!1;sg=a.offset;a.offset=0;tg=a.size;a.size=0;ug=a.state;a.state=1;vg=a.stride;a.stride=0;wg=a.type;a.type=H.dtype;xg=a.w;a.w=0;yg=a.x;a.x=0;zg=a.y;a.y=0;Ag=a.z;a.z=0;df=n.buffer;n.buffer=r;$e=n.divisor;n.divisor=0;Nf=n.normalized;
n.normalized=!1;Of=n.offset;n.offset=0;jg=n.size;n.size=0;kg=n.state;n.state=1;lg=n.stride;n.stride=0;mg=n.type;n.type=r.dtype;ng=n.w;n.w=0;Zf=n.x;n.x=0;Uf=n.y;n.y=0;$f=n.z;n.z=0;ag=W.buffer;W.buffer=D;bg=W.divisor;W.divisor=0;og=W.normalized;W.normalized=!1;Bg=W.offset;W.offset=0;Cg=W.size;W.size=0;Dg=W.state;W.state=1;Eg=W.stride;W.stride=0;Fg=W.type;W.type=D.dtype;Gg=W.w;W.w=0;Hg=W.x;W.x=0;Ig=W.y;W.y=0;Jg=W.z;W.z=0;Kg=ma.buffer;ma.buffer=C;Lg=ma.divisor;ma.divisor=0;Mg=ma.normalized;ma.normalized=
!1;Ng=ma.offset;ma.offset=0;Pg=ma.size;ma.size=0;Qg=ma.state;ma.state=1;Rg=ma.stride;ma.stride=0;Sg=ma.type;ma.type=C.dtype;Tg=ma.w;ma.w=0;Ug=ma.x;ma.x=0;Vg=ma.y;ma.y=0;Wg=ma.z;ma.z=0;Xg=Ka.buffer;Ka.buffer=E;Yg=Ka.divisor;Ka.divisor=0;Zg=Ka.normalized;Ka.normalized=!1;$g=Ka.offset;Ka.offset=0;ah=Ka.size;Ka.size=0;bh=Ka.state;Ka.state=1;ch=Ka.stride;Ka.stride=0;dh=Ka.type;Ka.type=E.dtype;eh=Ka.w;Ka.w=0;fh=Ka.x;Ka.x=0;gh=Ka.y;Ka.y=0;hh=Ka.z;Ka.z=0;ih=db.buffer;db.buffer=Q;jh=db.divisor;db.divisor=
0;kh=db.normalized;db.normalized=!1;lh=db.offset;db.offset=0;mh=db.size;db.size=0;nh=db.state;db.state=1;oh=db.stride;db.stride=0;ph=db.type;db.type=Q.dtype;qh=db.w;db.w=0;rh=db.x;db.x=0;sh=db.y;db.y=0;th=db.z;db.z=0;uh=ia.vert;ia.vert=2;vh=ia.frag;ia.frag=1;ca.dirty=!0;k(t,c,p);t.viewportWidth=I;t.viewportHeight=G;Yd[0]=X;Yd[1]=O;Yd[2]=L;Yd[3]=J;Bb[0]=N;Bb[1]=U;Bb[2]=R;Bb[3]=V;mc.blend_enable=S;pe[0]=ga;pe[1]=ja;je[0]=oa;je[1]=Z;je[2]=ha;je[3]=sa;mc.cull_enable=ba;mc.cull_face=ea;mc.depth_enable=
ka;mc.depth_func=ua;mc.depth_mask=Ca;ge[0]=pc;ge[1]=bb;mc.dither=qa;mc.lineWidth=Ta;Ye[0]=Fb;Ye[1]=Jb;Ye[2]=Wa;Ye[3]=ya;mc.scissor_enable=Wd;ca.profile=Da;x.offset=Dc;x.count=ed;x.primitive=Yb;q[24]=ra;q[3]=qc;q[5]=Fa;q[7]=Pa;q[9]=td;q[4]=va;q[6]=eb;q[8]=nc;q[10]=Cd;q[23]=Yc;q[12]=Gc;q[14]=Ib;q[16]=wb;q[18]=Ab;q[11]=id;q[13]=Wc;q[15]=Gd;q[17]=jd;q[22]=Ea;q[25]=Ue;q[26]=Mb;q[19]=le;q[20]=yd;q[21]=Be;h.buffer=Jd;h.divisor=ac;h.normalized=af;h.offset=ab;h.size=Qa;h.state=ic;h.stride=$d;h.type=ue;h.w=
Na;h.x=pb;h.y=Id;h.z=Wb;f.buffer=Cc;f.divisor=ve;f.normalized=Ha;f.offset=Tc;f.size=vb;f.state=zd;f.stride=Bd;f.type=xd;f.w=Za;f.x=we;f.y=fe;f.z=ee;e.buffer=de;e.divisor=qe;e.normalized=be;e.offset=he;e.size=xc;e.state=Sc;e.stride=re;e.type=ke;e.w=Ld;e.x=Od;e.y=Qd;e.z=Rd;l.buffer=ie;l.divisor=Ce;l.normalized=Xe;l.offset=oe;l.size=Me;l.state=Ne;l.stride=Je;l.type=se;l.w=ze;l.x=De;l.y=Ee;l.z=Fe;T.buffer=Ae;T.divisor=Nd;T.normalized=Ud;T.offset=Zd;T.size=ce;T.state=Ge;T.stride=Fd;T.type=Sd;T.w=xe;T.x=
He;T.y=ef;T.z=We;aa.buffer=Oe;aa.divisor=Ke;aa.normalized=Ve;aa.offset=Te;aa.size=Pe;aa.state=Qe;aa.stride=Td;aa.type=Xd;aa.w=Re;aa.x=ff;aa.y=kf;aa.z=bf;m.buffer=gf;m.divisor=hf;m.normalized=jf;m.offset=of;m.size=lf;m.state=pf;m.stride=Af;m.type=Bf;m.w=Le;m.x=ye;m.y=mf;m.z=nf;pa.buffer=Cf;pa.divisor=Ff;pa.normalized=yf;pa.offset=Df;pa.size=Ef;pa.state=tf;pa.stride=uf;pa.type=sf;pa.w=vf;pa.x=wf;pa.y=Hf;pa.z=If;K.buffer=Jf;K.divisor=Kf;K.normalized=qf;K.offset=Qf;K.size=Gf;K.state=rf;K.stride=cg;K.type=
Rf;K.w=Sf;K.x=pg;K.y=cf;K.z=Ze;da.buffer=Lf;da.divisor=Mf;da.normalized=dg;da.offset=eg;da.size=fg;da.state=gg;da.stride=hg;da.type=Vf;da.w=Tf;da.x=Wf;da.y=Xf;da.z=Yf;a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;n.buffer=df;n.divisor=$e;n.normalized=Nf;n.offset=Of;n.size=jg;n.state=kg;n.stride=lg;n.type=mg;n.w=ng;n.x=Zf;n.y=Uf;n.z=$f;W.buffer=ag;W.divisor=bg;W.normalized=og;W.offset=Bg;W.size=Cg;W.state=Dg;W.stride=Eg;
W.type=Fg;W.w=Gg;W.x=Hg;W.y=Ig;W.z=Jg;ma.buffer=Kg;ma.divisor=Lg;ma.normalized=Mg;ma.offset=Ng;ma.size=Pg;ma.state=Qg;ma.stride=Rg;ma.type=Sg;ma.w=Tg;ma.x=Ug;ma.y=Vg;ma.z=Wg;Ka.buffer=Xg;Ka.divisor=Yg;Ka.normalized=Zg;Ka.offset=$g;Ka.size=ah;Ka.state=bh;Ka.stride=ch;Ka.type=dh;Ka.w=eh;Ka.x=fh;Ka.y=gh;Ka.z=hh;db.buffer=ih;db.divisor=jh;db.normalized=kh;db.offset=lh;db.size=mh;db.state=nh;db.stride=oh;db.type=ph;db.w=qh;db.x=rh;db.y=sh;db.z=th;ia.vert=uh;ia.frag=vh;ca.dirty=!0}}},$1:function(c,y){var p,
P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a;p=c.attributes;P=c.current;g=c.framebuffer;d=c.gl;z=c.next;b=c.vao;w=z.blend_color;B=P.blend_color;fa=z.blend_equation;M=P.blend_equation;H=z.blend_func;r=P.blend_func;D=z.colorMask;C=P.colorMask;E=z.depth_range;Q=P.depth_range;A=z.polygonOffset_offset;N=P.polygonOffset_offset;Y=z.sample_coverage;h=P.sample_coverage;f=z.scissor_box;e=P.scissor_box;l=z.stencil_func;T=P.stencil_func;aa=z.stencil_opBack;m=P.stencil_opBack;pa=z.stencil_opFront;
K=P.stencil_opFront;da=z.viewport;a=P.viewport;return{poll:function(){var b,c,p,y,db,xd,la,Qa,Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na;P.dirty=!1;c=z.blend_enable;p=z.cull_enable;y=z.depth_enable;db=z.dither;xd=z.polygonOffset_enable;la=z.sample_alpha;Qa=z.sample_enable;Z=z.scissor_enable;L=z.stencil_enable;O=z.cull_face;U=P.cull_face;ra=z.depth_func;J=P.depth_func;Wb=z.depth_mask;ab=P.depth_mask;R=z.frontFace;u=P.frontFace;ka=z.lineWidth;ba=P.lineWidth;Ea=z.stencil_mask;Na=P.stencil_mask;b=g.next;b!==
g.cur&&(b?d.bindFramebuffer(36160,b.framebuffer):d.bindFramebuffer(36160,null),g.cur=b);c!==P.blend_enable&&(c?d.enable(3042):d.disable(3042),P.blend_enable=c);p!==P.cull_enable&&(p?d.enable(2884):d.disable(2884),P.cull_enable=p);y!==P.depth_enable&&(y?d.enable(2929):d.disable(2929),P.depth_enable=y);db!==P.dither&&(db?d.enable(3024):d.disable(3024),P.dither=db);xd!==P.polygonOffset_enable&&(xd?d.enable(32823):d.disable(32823),P.polygonOffset_enable=xd);la!==P.sample_alpha&&(la?d.enable(32926):d.disable(32926),
P.sample_alpha=la);Qa!==P.sample_enable&&(Qa?d.enable(32928):d.disable(32928),P.sample_enable=Qa);Z!==P.scissor_enable&&(Z?d.enable(3089):d.disable(3089),P.scissor_enable=Z);L!==P.stencil_enable&&(L?d.enable(2960):d.disable(2960),P.stencil_enable=L);if(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3])d.blendColor(w[0],w[1],w[2],w[3]),B[0]=w[0],B[1]=w[1],B[2]=w[2],B[3]=w[3];if(fa[0]!==M[0]||fa[1]!==M[1])d.blendEquationSeparate(fa[0],fa[1]),M[0]=fa[0],M[1]=fa[1];if(H[0]!==r[0]||H[1]!==r[1]||H[2]!==
r[2]||H[3]!==r[3])d.blendFuncSeparate(H[0],H[1],H[2],H[3]),r[0]=H[0],r[1]=H[1],r[2]=H[2],r[3]=H[3];if(D[0]!==C[0]||D[1]!==C[1]||D[2]!==C[2]||D[3]!==C[3])d.colorMask(D[0],D[1],D[2],D[3]),C[0]=D[0],C[1]=D[1],C[2]=D[2],C[3]=D[3];O!==U&&(d.cullFace(O),P.cull_face=O);ra!==J&&(d.depthFunc(ra),P.depth_func=ra);Wb!==ab&&(d.depthMask(Wb),P.depth_mask=Wb);if(E[0]!==Q[0]||E[1]!==Q[1])d.depthRange(E[0],E[1]),Q[0]=E[0],Q[1]=E[1];R!==u&&(d.frontFace(R),P.frontFace=R);ka!==ba&&(d.lineWidth(ka),P.lineWidth=ka);if(A[0]!==
N[0]||A[1]!==N[1])d.polygonOffset(A[0],A[1]),N[0]=A[0],N[1]=A[1];if(Y[0]!==h[0]||Y[1]!==h[1])d.sampleCoverage(Y[0],Y[1]),h[0]=Y[0],h[1]=Y[1];if(f[0]!==e[0]||f[1]!==e[1]||f[2]!==e[2]||f[3]!==e[3])d.scissor(f[0],f[1],f[2],f[3]),e[0]=f[0],e[1]=f[1],e[2]=f[2],e[3]=f[3];if(l[0]!==T[0]||l[1]!==T[1]||l[2]!==T[2])d.stencilFunc(l[0],l[1],l[2]),T[0]=l[0],T[1]=l[1],T[2]=l[2];Ea!==Na&&(d.stencilMask(Ea),P.stencil_mask=Ea);if(aa[0]!==m[0]||aa[1]!==m[1]||aa[2]!==m[2]||aa[3]!==m[3])d.stencilOpSeparate(aa[0],aa[1],
aa[2],aa[3]),m[0]=aa[0],m[1]=aa[1],m[2]=aa[2],m[3]=aa[3];if(pa[0]!==K[0]||pa[1]!==K[1]||pa[2]!==K[2]||pa[3]!==K[3])d.stencilOpSeparate(pa[0],pa[1],pa[2],pa[3]),K[0]=pa[0],K[1]=pa[1],K[2]=pa[2],K[3]=pa[3];if(da[0]!==a[0]||da[1]!==a[1]||da[2]!==a[2]||da[3]!==a[3])d.viewport(da[0],da[1],da[2],da[3]),a[0]=da[0],a[1]=da[1],a[2]=da[2],a[3]=da[3]},refresh:function(){var c,W,ma,Ka,db,xd,la,Qa,Z,L,O,U,ra,J,Wb,ab;P.dirty=!1;W=z.blend_enable;ma=z.cull_enable;Ka=z.depth_enable;db=z.dither;xd=z.polygonOffset_enable;
la=z.sample_alpha;Qa=z.sample_enable;Z=z.scissor_enable;L=z.stencil_enable;O=z.cull_face;U=z.depth_func;ra=z.depth_mask;J=z.frontFace;Wb=z.lineWidth;ab=z.stencil_mask;(c=g.next)?d.bindFramebuffer(36160,c.framebuffer):d.bindFramebuffer(36160,null);g.cur=c;c=p[0];c.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(0,
c.divisor);c=p[1];c.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(1,c.divisor);c=p[2];c.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,c.x,c.y,c.z,
c.w),c.buffer=null);y.vertexAttribDivisorANGLE(2,c.divisor);c=p[3];c.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(3,c.divisor);c=p[4];c.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(4),
d.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(4,c.divisor);c=p[5];c.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(5,c.divisor);c=p[6];c.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,
c.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(6,c.divisor);c=p[7];c.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(7,c.divisor);c=p[8];c.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(8,
c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(8,c.divisor);c=p[9];c.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(9,c.divisor);c=p[10];c.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,
c.buffer.buffer),d.vertexAttribPointer(10,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(10,c.divisor);c=p[11];c.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(11,c.divisor);c=p[12];
c.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(12,c.divisor);c=p[13];c.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=
null);y.vertexAttribDivisorANGLE(13,c.divisor);c=p[14];c.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(14,c.divisor);c=p[15];c.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(15),
d.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);y.vertexAttribDivisorANGLE(15,c.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);W?d.enable(3042):d.disable(3042);P.blend_enable=W;ma?d.enable(2884):d.disable(2884);P.cull_enable=ma;Ka?d.enable(2929):d.disable(2929);P.depth_enable=Ka;db?d.enable(3024):d.disable(3024);P.dither=db;xd?d.enable(32823):d.disable(32823);P.polygonOffset_enable=xd;la?d.enable(32926):d.disable(32926);P.sample_alpha=la;Qa?d.enable(32928):d.disable(32928);P.sample_enable=Qa;
Z?d.enable(3089):d.disable(3089);P.scissor_enable=Z;L?d.enable(2960):d.disable(2960);P.stencil_enable=L;d.blendColor(w[0],w[1],w[2],w[3]);B[0]=w[0];B[1]=w[1];B[2]=w[2];B[3]=w[3];d.blendEquationSeparate(fa[0],fa[1]);M[0]=fa[0];M[1]=fa[1];d.blendFuncSeparate(H[0],H[1],H[2],H[3]);r[0]=H[0];r[1]=H[1];r[2]=H[2];r[3]=H[3];d.colorMask(D[0],D[1],D[2],D[3]);C[0]=D[0];C[1]=D[1];C[2]=D[2];C[3]=D[3];d.cullFace(O);P.cull_face=O;d.depthFunc(U);P.depth_func=U;d.depthMask(ra);P.depth_mask=ra;d.depthRange(E[0],E[1]);
Q[0]=E[0];Q[1]=E[1];d.frontFace(J);P.frontFace=J;d.lineWidth(Wb);P.lineWidth=Wb;d.polygonOffset(A[0],A[1]);N[0]=A[0];N[1]=A[1];d.sampleCoverage(Y[0],Y[1]);h[0]=Y[0];h[1]=Y[1];d.scissor(f[0],f[1],f[2],f[3]);e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];d.stencilFunc(l[0],l[1],l[2]);T[0]=l[0];T[1]=l[1];T[2]=l[2];d.stencilMask(ab);P.stencil_mask=ab;d.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]);m[0]=aa[0];m[1]=aa[1];m[2]=aa[2];m[3]=aa[3];d.stencilOpSeparate(pa[0],pa[1],pa[2],pa[3]);K[0]=pa[0];K[1]=pa[1];K[2]=
pa[2];K[3]=pa[3];d.viewport(da[0],da[1],da[2],da[3]);a[0]=da[0];a[1]=da[1];a[2]=da[2];a[3]=da[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(c,y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db,xd,la,Qa,Z,L,O,U,ra,J,Wb,ab){var R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va,ac,pc,ic,td,tc,X,F,ja,Ba,wb,Wc,Tc,G,v,ha,ua,S,ga,qa,I,t,ca,x,sa,oa,k,mc,ia,q,Jb,Bb;R=c.attributes;
u=c.buffer;ka=c.context;ba=c.current;Ea=c.draw;Na=c.elements;vb=c.extensions;Ha=c.framebuffer;V=c.gl;pb=c.isBufferArgs;ea=c.next;va=c.shader;ac=c.uniforms;pc=c.vao;ic=ea.blend_color;td=ba.blend_color;tc=ea.blend_equation;X=ba.blend_equation;F=ea.blend_func;ja=ba.blend_func;Ba=ea.colorMask;wb=ba.colorMask;Wc=ea.depth_range;Tc=ba.depth_range;G=ea.polygonOffset_offset;v=ba.polygonOffset_offset;ha=ea.sample_coverage;ua=ba.sample_coverage;S=ea.scissor_box;ga=ba.scissor_box;qa=ea.stencil_func;I=ba.stencil_func;
t=ea.stencil_opBack;ca=ba.stencil_opBack;x=ea.stencil_opFront;sa=ba.stencil_opFront;oa=ea.viewport;k=ba.viewport;mc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ia={};ia.buffer=p;ia.divisor=1;q={};q.buffer=P;q.divisor=1;Jb={};Jb.buffer=g;Jb.divisor=1;Bb={};Bb.buffer=d;Bb.divisor=1;return{batch:function(b,d){var c,e,f,g,h,l;c=Ha.next;c!==Ha.cur&&(c?V.bindFramebuffer(36160,c.framebuffer):V.bindFramebuffer(36160,null),Ha.cur=c);if(ba.dirty){var p,F,w,
z,A,C,E,P,D,N,B,Q,S,T,oa,aa,fa,va,id,nc,na,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Y;p=ea.dither;p!==ba.dither&&(p?V.enable(3024):V.disable(3024),ba.dither=p);F=ea.depth_func;F!==ba.depth_func&&(V.depthFunc(F),ba.depth_func=F);w=Wc[0];z=Wc[1];if(w!==Tc[0]||z!==Tc[1])V.depthRange(w,z),Tc[0]=w,Tc[1]=z;A=ea.depth_mask;A!==ba.depth_mask&&(V.depthMask(A),ba.depth_mask=A);C=Ba[0];E=Ba[1];P=Ba[2];D=Ba[3];if(C!==wb[0]||E!==wb[1]||P!==wb[2]||D!==wb[3])V.colorMask(C,E,P,D),wb[0]=C,wb[1]=E,wb[2]=P,wb[3]=D;N=ea.cull_enable;
N!==ba.cull_enable&&(N?V.enable(2884):V.disable(2884),ba.cull_enable=N);B=ea.cull_face;B!==ba.cull_face&&(V.cullFace(B),ba.cull_face=B);Q=ea.frontFace;Q!==ba.frontFace&&(V.frontFace(Q),ba.frontFace=Q);S=ea.lineWidth;S!==ba.lineWidth&&(V.lineWidth(S),ba.lineWidth=S);T=ea.polygonOffset_enable;T!==ba.polygonOffset_enable&&(T?V.enable(32823):V.disable(32823),ba.polygonOffset_enable=T);oa=G[0];aa=G[1];if(oa!==v[0]||aa!==v[1])V.polygonOffset(oa,aa),v[0]=oa,v[1]=aa;fa=ea.sample_alpha;fa!==ba.sample_alpha&&
(fa?V.enable(32926):V.disable(32926),ba.sample_alpha=fa);va=ea.sample_enable;va!==ba.sample_enable&&(va?V.enable(32928):V.disable(32928),ba.sample_enable=va);id=ha[0];nc=ha[1];if(id!==ua[0]||nc!==ua[1])V.sampleCoverage(id,nc),ua[0]=id,ua[1]=nc;na=ea.stencil_enable;na!==ba.stencil_enable&&(na?V.enable(2960):V.disable(2960),ba.stencil_enable=na);ed=ea.stencil_mask;ed!==ba.stencil_mask&&(V.stencilMask(ed),ba.stencil_mask=ed);Jc=qa[0];qc=qa[1];bb=qa[2];if(Jc!==I[0]||qc!==I[1]||bb!==I[2])V.stencilFunc(Jc,
qc,bb),I[0]=Jc,I[1]=qc,I[2]=bb;Gc=x[0];Fb=x[1];oc=x[2];Ta=x[3];if(Gc!==sa[0]||Fb!==sa[1]||oc!==sa[2]||Ta!==sa[3])V.stencilOpSeparate(Gc,Fb,oc,Ta),sa[0]=Gc,sa[1]=Fb,sa[2]=oc,sa[3]=Ta;Hc=t[0];bc=t[1];rc=t[2];Y=t[3];if(Hc!==ca[0]||bc!==ca[1]||rc!==ca[2]||Y!==ca[3])V.stencilOpSeparate(Hc,bc,rc,Y),ca[0]=Hc,ca[1]=bc,ca[2]=rc,ca[3]=Y}V.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;V.enable(3042);ba.blend_enable=!0;V.blendEquationSeparate(32774,32774);X[0]=32774;X[1]=32774;V.blendFuncSeparate(770,771,
773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;V.disable(2929);ba.depth_enable=!1;V.enable(3089);ba.scissor_enable=!0;if(e=ba.profile)f=performance.now(),y.count+=d;V.useProgram(m.program);g=vb.angle_instanced_arrays;var tc,yc,Yb,Dc,Pc,La,Gb,Wa;pc.setVAO(null);tc=db.location;yc=R[tc];yc.buffer||V.enableVertexAttribArray(tc);if(5126!==yc.type||2!==yc.size||yc.buffer!==M||!1!==yc.normalized||0!==yc.offset||24!==yc.stride)V.bindBuffer(34962,M.buffer),V.vertexAttribPointer(tc,2,5126,!1,24,0),yc.type=5126,
yc.size=2,yc.buffer=M,yc.normalized=!1,yc.offset=0,yc.stride=24;0!==yc.divisor&&(g.vertexAttribDivisorANGLE(tc,0),yc.divisor=0);Yb=la.location;Dc=R[Yb];Dc.buffer||V.enableVertexAttribArray(Yb);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==H||!1!==Dc.normalized||8!==Dc.offset||24!==Dc.stride)V.bindBuffer(34962,H.buffer),V.vertexAttribPointer(Yb,2,5126,!1,24,8),Dc.type=5126,Dc.size=2,Dc.buffer=H,Dc.normalized=!1,Dc.offset=8,Dc.stride=24;0!==Dc.divisor&&(g.vertexAttribDivisorANGLE(Yb,0),Dc.divisor=0);
Pc=W.location;La=R[Pc];La.buffer||V.enableVertexAttribArray(Pc);if(5126!==La.type||2!==La.size||La.buffer!==r||!1!==La.normalized||16!==La.offset||24!==La.stride)V.bindBuffer(34962,r.buffer),V.vertexAttribPointer(Pc,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=r,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(g.vertexAttribDivisorANGLE(Pc,0),La.divisor=0);(Gb=Ea.elements)?V.bindBuffer(34963,Gb.buffer.buffer):pc.currentVAO&&(Gb=Na.getElements(pc.currentVAO.elements))&&V.bindBuffer(34963,
Gb.buffer.buffer);Wa=Ea.offset;for(h=0;h<d;++h){l=b[h];var Ca,jd,ib,Sa,Ib,eb,Ec,Sb,ac,$b,Tb,ic,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,sd,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,Za,vd,zf,te,ne,Md,Kd,cd,Cc;Ca=l.viewport;jd=Ca.x|0;ib=Ca.y|0;Sa="width"in Ca?Ca.width|0:ka.framebufferWidth-jd;Ib="height"in
Ca?Ca.height|0:ka.framebufferHeight-ib;eb=ka.viewportWidth;ka.viewportWidth=Sa;Ec=ka.viewportHeight;ka.viewportHeight=Ib;V.viewport(jd,ib,Sa,Ib);k[0]=jd;k[1]=ib;k[2]=Sa;k[3]=Ib;Sb=l.viewport;ac=Sb.x|0;$b=Sb.y|0;Tb="width"in Sb?Sb.width|0:ka.framebufferWidth-ac;ic="height"in Sb?Sb.height|0:ka.framebufferHeight-$b;V.scissor(ac,$b,Tb,ic);ga[0]=ac;ga[1]=$b;ga[2]=Tb;ga[3]=ic;Ub=pa.call(this,ka,l,h);Jb.offset=Ub;Ma=!1;qb=null;xb=0;jb=!1;lc=Oa=0;Kb=1;Zc=0;fb=5126;lb=hc=dd=jc=0;pb(Jb)?(Ma=!0,qb=u.createStream(34962,
Jb),fb=qb.dtype):(qb=u.getBuffer(Jb))?fb=qb.dtype:"constant"in Jb?(Kb=2,"number"===typeof Jb.constant?(dd=Jb.constant,hc=lb=jc=0):(dd=0<Jb.constant.length?Jb.constant[0]:0,hc=1<Jb.constant.length?Jb.constant[1]:0,lb=2<Jb.constant.length?Jb.constant[2]:0,jc=3<Jb.constant.length?Jb.constant[3]:0)):(qb=pb(Jb.buffer)?u.createStream(34962,Jb.buffer):u.getBuffer(Jb.buffer),fb="type"in Jb?mc[Jb.type]:qb.dtype,jb=!!Jb.normalized,lc=Jb.size|0,Oa=Jb.offset|0,Zc=Jb.stride|0,xb=Jb.divisor|0);mb=L.location;ta=
R[mb];if(1===Kb){ta.buffer||V.enableVertexAttribArray(mb);rb=lc||2;if(ta.type!==fb||ta.size!==rb||ta.buffer!==qb||ta.normalized!==jb||ta.offset!==Oa||ta.stride!==Zc)V.bindBuffer(34962,qb.buffer),V.vertexAttribPointer(mb,rb,fb,jb,Zc,Oa),ta.type=fb,ta.size=rb,ta.buffer=qb,ta.normalized=jb,ta.offset=Oa,ta.stride=Zc;ta.divisor!==xb&&(g.vertexAttribDivisorANGLE(mb,xb),ta.divisor=xb)}else if(ta.buffer&&(V.disableVertexAttribArray(mb),ta.buffer=null),ta.x!==dd||ta.y!==hc||ta.z!==lb||ta.w!==jc)V.vertexAttrib4f(mb,
dd,hc,lb,jc),ta.x=dd,ta.y=hc,ta.z=lb,ta.w=jc;wa=K.call(this,ka,l,h);Bb.offset=wa;Ua=!1;cb=null;za=0;gb=!1;Db=Ia=0;Cb=1;Ra=0;Ic=5126;xa=Vb=$a=Lb=0;pb(Bb)?(Ua=!0,cb=u.createStream(34962,Bb),Ic=cb.dtype):(cb=u.getBuffer(Bb))?Ic=cb.dtype:"constant"in Bb?(Cb=2,"number"===typeof Bb.constant?($a=Bb.constant,Vb=xa=Lb=0):($a=0<Bb.constant.length?Bb.constant[0]:0,Vb=1<Bb.constant.length?Bb.constant[1]:0,xa=2<Bb.constant.length?Bb.constant[2]:0,Lb=3<Bb.constant.length?Bb.constant[3]:0)):(cb=pb(Bb.buffer)?u.createStream(34962,
Bb.buffer):u.getBuffer(Bb.buffer),Ic="type"in Bb?mc[Bb.type]:cb.dtype,gb=!!Bb.normalized,Db=Bb.size|0,Ia=Bb.offset|0,Ra=Bb.stride|0,za=Bb.divisor|0);Ad=O.location;Ja=R[Ad];if(1===Cb){Ja.buffer||V.enableVertexAttribArray(Ad);Pb=Db||2;if(Ja.type!==Ic||Ja.size!==Pb||Ja.buffer!==cb||Ja.normalized!==gb||Ja.offset!==Ia||Ja.stride!==Ra)V.bindBuffer(34962,cb.buffer),V.vertexAttribPointer(Ad,Pb,Ic,gb,Ra,Ia),Ja.type=Ic,Ja.size=Pb,Ja.buffer=cb,Ja.normalized=gb,Ja.offset=Ia,Ja.stride=Ra;Ja.divisor!==za&&(g.vertexAttribDivisorANGLE(Ad,
za),Ja.divisor=za)}else if(Ja.buffer&&(V.disableVertexAttribArray(Ad),Ja.buffer=null),Ja.x!==$a||Ja.y!==Vb||Ja.z!==xa||Ja.w!==Lb)V.vertexAttrib4f(Ad,$a,Vb,xa,Lb),Ja.x=$a,Ja.y=Vb,Ja.z=xa,Ja.w=Lb;hb=da.call(this,ka,l,h);q.offset=hb;kb=!1;ya=null;dc=0;Da=!1;tb=sb=0;Xa=1;Ya=0;kc=5126;Nb=Va=uc=ad=0;pb(q)?(kb=!0,ya=u.createStream(34962,q),kc=ya.dtype):(ya=u.getBuffer(q))?kc=ya.dtype:"constant"in q?(Xa=2,"number"===typeof q.constant?(uc=q.constant,Va=Nb=ad=0):(uc=0<q.constant.length?q.constant[0]:0,Va=1<
q.constant.length?q.constant[1]:0,Nb=2<q.constant.length?q.constant[2]:0,ad=3<q.constant.length?q.constant[3]:0)):(ya=pb(q.buffer)?u.createStream(34962,q.buffer):u.getBuffer(q.buffer),kc="type"in q?mc[q.type]:ya.dtype,Da=!!q.normalized,tb=q.size|0,sb=q.offset|0,Ya=q.stride|0,dc=q.divisor|0);Oc=xd.location;Fa=R[Oc];if(1===Xa){Fa.buffer||V.enableVertexAttribArray(Oc);wc=tb||4;if(Fa.type!==kc||Fa.size!==wc||Fa.buffer!==ya||Fa.normalized!==Da||Fa.offset!==sb||Fa.stride!==Ya)V.bindBuffer(34962,ya.buffer),
V.vertexAttribPointer(Oc,wc,kc,Da,Ya,sb),Fa.type=kc,Fa.size=wc,Fa.buffer=ya,Fa.normalized=Da,Fa.offset=sb,Fa.stride=Ya;Fa.divisor!==dc&&(g.vertexAttribDivisorANGLE(Oc,dc),Fa.divisor=dc)}else if(Fa.buffer&&(V.disableVertexAttribArray(Oc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Nb||Fa.w!==ad)V.vertexAttrib4f(Oc,uc,Va,Nb,ad),Fa.x=uc,Fa.y=Va,Fa.z=Nb,Fa.w=ad;Pa=a.call(this,ka,l,h);ia.offset=Pa;Aa=!1;nb=null;yb=0;Eb=!1;vc=ub=0;zb=1;Ed=0;sc=5126;qd=bd=Kc=ud=0;pb(ia)?(Aa=!0,nb=u.createStream(34962,ia),
sc=nb.dtype):(nb=u.getBuffer(ia))?sc=nb.dtype:"constant"in ia?(zb=2,"number"===typeof ia.constant?(Kc=ia.constant,bd=qd=ud=0):(Kc=0<ia.constant.length?ia.constant[0]:0,bd=1<ia.constant.length?ia.constant[1]:0,qd=2<ia.constant.length?ia.constant[2]:0,ud=3<ia.constant.length?ia.constant[3]:0)):(nb=pb(ia.buffer)?u.createStream(34962,ia.buffer):u.getBuffer(ia.buffer),sc="type"in ia?mc[ia.type]:nb.dtype,Eb=!!ia.normalized,vc=ia.size|0,ub=ia.offset|0,Ed=ia.stride|0,yb=ia.divisor|0);Xb=Ka.location;cc=R[Xb];
if(1===zb){cc.buffer||V.enableVertexAttribArray(Xb);Qb=vc||4;if(cc.type!==sc||cc.size!==Qb||cc.buffer!==nb||cc.normalized!==Eb||cc.offset!==ub||cc.stride!==Ed)V.bindBuffer(34962,nb.buffer),V.vertexAttribPointer(Xb,Qb,sc,Eb,Ed,ub),cc.type=sc,cc.size=Qb,cc.buffer=nb,cc.normalized=Eb,cc.offset=ub,cc.stride=Ed;cc.divisor!==yb&&(g.vertexAttribDivisorANGLE(Xb,yb),cc.divisor=yb)}else if(cc.buffer&&(V.disableVertexAttribArray(Xb),cc.buffer=null),cc.x!==Kc||cc.y!==bd||cc.z!==qd||cc.w!==ud)V.vertexAttrib4f(Xb,
Kc,bd,qd,ud),cc.x=Kc,cc.y=bd,cc.z=qd,cc.w=ud;Ga=n.call(this,ka,l,h);Zb=Ga[0];Ab=Ga[1];Rb=Ga[2];gc=Ga[3];h&&ob===Zb&&Ob===Ab&&ec===Rb&&sd===gc||(ob=Zb,Ob=Ab,ec=Rb,sd=gc,V.uniform4f(ab.location,Zb,Ab,Rb,gc));zc=l.lineWidth;h&&Ac===zc||(Ac=zc,V.uniform1f(Qa.location,zc));Bc=l.capSize;h&&Lc===Bc||(Lc=Bc,V.uniform1f(ma.location,Bc));Xc=l.scale;Qc=Xc[0];Mb=Xc[1];h&&Mc===Qc&&Hb===Mb||(Mc=Qc,Hb=Mb,V.uniform2f(U.location,Qc,Mb));Nc=l.scaleFract;Fc=Nc[0];fc=Nc[1];h&&Rc===Fc&&Uc===fc||(Rc=Fc,Uc=fc,V.uniform2f(ra.location,
Fc,fc));kd=l.translate;fd=kd[0];Vc=kd[1];h&&md===fd&&Za===Vc||(md=fd,Za=Vc,V.uniform2f(J.location,fd,Vc));vd=l.translateFract;zf=vd[0];ne=vd[1];h&&te===zf&&Md===ne||(te=zf,Md=ne,V.uniform2f(Wb.location,zf,ne));Kd=l.opacity;h&&cd===Kd||(cd=Kd,V.uniform1f(Z.location,Kd));Cc=l.count;0<Cc?Gb?g.drawElementsInstancedANGLE(4,36,Gb.type,Wa<<(Gb.type-5121>>1),Cc):g.drawArraysInstancedANGLE(4,Wa,36,Cc):0>Cc&&(Gb?V.drawElements(4,36,Gb.type,Wa<<(Gb.type-5121>>1)):V.drawArrays(4,Wa,36));ka.viewportWidth=eb;ka.viewportHeight=
Ec;Ma&&u.destroyStream(qb);Ua&&u.destroyStream(cb);kb&&u.destroyStream(ya);Aa&&u.destroyStream(nb)}ba.dirty=!0;pc.setVAO(null);e&&(y.cpuTime+=performance.now()-f)},draw:function(a){var d,c,e,f,g,h,l,n,m,p,F,A,C,E,P,K,N,Q,S,T,oa,aa,da,pa,va,tc,nc,Y,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,ac,ic,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc;d=Ha.next;d!==Ha.cur&&(d?V.bindFramebuffer(36160,
d.framebuffer):V.bindFramebuffer(36160,null),Ha.cur=d);if(ba.dirty){var Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob;Da=ea.dither;Da!==ba.dither&&(Da?V.enable(3024):V.disable(3024),ba.dither=Da);sb=ea.depth_func;sb!==ba.depth_func&&(V.depthFunc(sb),ba.depth_func=sb);tb=Wc[0];Xa=Wc[1];if(tb!==Tc[0]||Xa!==Tc[1])V.depthRange(tb,Xa),Tc[0]=tb,Tc[1]=Xa;Ya=ea.depth_mask;Ya!==ba.depth_mask&&(V.depthMask(Ya),ba.depth_mask=Ya);kc=Ba[0];ad=Ba[1];uc=Ba[2];
Va=Ba[3];if(kc!==wb[0]||ad!==wb[1]||uc!==wb[2]||Va!==wb[3])V.colorMask(kc,ad,uc,Va),wb[0]=kc,wb[1]=ad,wb[2]=uc,wb[3]=Va;Nb=ea.cull_enable;Nb!==ba.cull_enable&&(Nb?V.enable(2884):V.disable(2884),ba.cull_enable=Nb);Oc=ea.cull_face;Oc!==ba.cull_face&&(V.cullFace(Oc),ba.cull_face=Oc);Fa=ea.frontFace;Fa!==ba.frontFace&&(V.frontFace(Fa),ba.frontFace=Fa);wc=ea.lineWidth;wc!==ba.lineWidth&&(V.lineWidth(wc),ba.lineWidth=wc);Pa=ea.polygonOffset_enable;Pa!==ba.polygonOffset_enable&&(Pa?V.enable(32823):V.disable(32823),
ba.polygonOffset_enable=Pa);Aa=G[0];nb=G[1];if(Aa!==v[0]||nb!==v[1])V.polygonOffset(Aa,nb),v[0]=Aa,v[1]=nb;yb=ea.sample_alpha;yb!==ba.sample_alpha&&(yb?V.enable(32926):V.disable(32926),ba.sample_alpha=yb);Eb=ea.sample_enable;Eb!==ba.sample_enable&&(Eb?V.enable(32928):V.disable(32928),ba.sample_enable=Eb);ub=ha[0];vc=ha[1];if(ub!==ua[0]||vc!==ua[1])V.sampleCoverage(ub,vc),ua[0]=ub,ua[1]=vc;zb=ea.stencil_enable;zb!==ba.stencil_enable&&(zb?V.enable(2960):V.disable(2960),ba.stencil_enable=zb);Ed=ea.stencil_mask;
Ed!==ba.stencil_mask&&(V.stencilMask(Ed),ba.stencil_mask=Ed);sc=qa[0];ud=qa[1];Kc=qa[2];if(sc!==I[0]||ud!==I[1]||Kc!==I[2])V.stencilFunc(sc,ud,Kc),I[0]=sc,I[1]=ud,I[2]=Kc;bd=x[0];qd=x[1];Xb=x[2];cc=x[3];if(bd!==sa[0]||qd!==sa[1]||Xb!==sa[2]||cc!==sa[3])V.stencilOpSeparate(bd,qd,Xb,cc),sa[0]=bd,sa[1]=qd,sa[2]=Xb,sa[3]=cc;Qb=t[0];Ga=t[1];Zb=t[2];ob=t[3];if(Qb!==ca[0]||Ga!==ca[1]||Zb!==ca[2]||ob!==ca[3])V.stencilOpSeparate(Qb,Ga,Zb,ob),ca[0]=Qb,ca[1]=Ga,ca[2]=Zb,ca[3]=ob}c=a.viewport;e=c.x|0;f=c.y|0;
g="width"in c?c.width|0:ka.framebufferWidth-e;h="height"in c?c.height|0:ka.framebufferHeight-f;l=ka.viewportWidth;ka.viewportWidth=g;n=ka.viewportHeight;ka.viewportHeight=h;V.viewport(e,f,g,h);k[0]=e;k[1]=f;k[2]=g;k[3]=h;V.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;V.enable(3042);ba.blend_enable=!0;V.blendEquationSeparate(32774,32774);X[0]=32774;X[1]=32774;V.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;V.disable(2929);ba.depth_enable=!1;m=a.viewport;p=m.x|0;F=m.y|
0;A="width"in m?m.width|0:ka.framebufferWidth-p;C="height"in m?m.height|0:ka.framebufferHeight-F;V.scissor(p,F,A,C);ga[0]=p;ga[1]=F;ga[2]=A;ga[3]=C;V.enable(3089);ba.scissor_enable=!0;if(E=ba.profile)P=performance.now(),y.count++;V.useProgram(z.program);K=vb.angle_instanced_arrays;pc.setVAO(null);N=b.call(this,ka,a,0);Jb.offset=N;Q=!1;S=null;T=0;oa=!1;da=aa=0;pa=1;va=0;tc=5126;Jc=ed=Y=nc=0;pb(Jb)?(Q=!0,S=u.createStream(34962,Jb),tc=S.dtype):(S=u.getBuffer(Jb))?tc=S.dtype:"constant"in Jb?(pa=2,"number"===
typeof Jb.constant?(Y=Jb.constant,ed=Jc=nc=0):(Y=0<Jb.constant.length?Jb.constant[0]:0,ed=1<Jb.constant.length?Jb.constant[1]:0,Jc=2<Jb.constant.length?Jb.constant[2]:0,nc=3<Jb.constant.length?Jb.constant[3]:0)):(S=pb(Jb.buffer)?u.createStream(34962,Jb.buffer):u.getBuffer(Jb.buffer),tc="type"in Jb?mc[Jb.type]:S.dtype,oa=!!Jb.normalized,da=Jb.size|0,aa=Jb.offset|0,va=Jb.stride|0,T=Jb.divisor|0);qc=L.location;bb=R[qc];if(1===pa){bb.buffer||V.enableVertexAttribArray(qc);Gc=da||2;if(bb.type!==tc||bb.size!==
Gc||bb.buffer!==S||bb.normalized!==oa||bb.offset!==aa||bb.stride!==va)V.bindBuffer(34962,S.buffer),V.vertexAttribPointer(qc,Gc,tc,oa,va,aa),bb.type=tc,bb.size=Gc,bb.buffer=S,bb.normalized=oa,bb.offset=aa,bb.stride=va;bb.divisor!==T&&(K.vertexAttribDivisorANGLE(qc,T),bb.divisor=T)}else if(bb.buffer&&(V.disableVertexAttribArray(qc),bb.buffer=null),bb.x!==Y||bb.y!==ed||bb.z!==Jc||bb.w!==nc)V.vertexAttrib4f(qc,Y,ed,Jc,nc),bb.x=Y,bb.y=ed,bb.z=Jc,bb.w=nc;Fb=w.call(this,ka,a,0);Bb.offset=Fb;oc=!1;Ta=null;
Hc=0;bc=!1;ac=rc=0;ic=1;yc=0;Yb=5126;Gb=La=Pc=Dc=0;pb(Bb)?(oc=!0,Ta=u.createStream(34962,Bb),Yb=Ta.dtype):(Ta=u.getBuffer(Bb))?Yb=Ta.dtype:"constant"in Bb?(ic=2,"number"===typeof Bb.constant?(Pc=Bb.constant,La=Gb=Dc=0):(Pc=0<Bb.constant.length?Bb.constant[0]:0,La=1<Bb.constant.length?Bb.constant[1]:0,Gb=2<Bb.constant.length?Bb.constant[2]:0,Dc=3<Bb.constant.length?Bb.constant[3]:0)):(Ta=pb(Bb.buffer)?u.createStream(34962,Bb.buffer):u.getBuffer(Bb.buffer),Yb="type"in Bb?mc[Bb.type]:Ta.dtype,bc=!!Bb.normalized,
ac=Bb.size|0,rc=Bb.offset|0,yc=Bb.stride|0,Hc=Bb.divisor|0);Wa=O.location;Ca=R[Wa];if(1===ic){Ca.buffer||V.enableVertexAttribArray(Wa);jd=ac||2;if(Ca.type!==Yb||Ca.size!==jd||Ca.buffer!==Ta||Ca.normalized!==bc||Ca.offset!==rc||Ca.stride!==yc)V.bindBuffer(34962,Ta.buffer),V.vertexAttribPointer(Wa,jd,Yb,bc,yc,rc),Ca.type=Yb,Ca.size=jd,Ca.buffer=Ta,Ca.normalized=bc,Ca.offset=rc,Ca.stride=yc;Ca.divisor!==Hc&&(K.vertexAttribDivisorANGLE(Wa,Hc),Ca.divisor=Hc)}else if(Ca.buffer&&(V.disableVertexAttribArray(Wa),
Ca.buffer=null),Ca.x!==Pc||Ca.y!==La||Ca.z!==Gb||Ca.w!==Dc)V.vertexAttrib4f(Wa,Pc,La,Gb,Dc),Ca.x=Pc,Ca.y=La,Ca.z=Gb,Ca.w=Dc;ib=B.call(this,ka,a,0);q.offset=ib;Sa=!1;Ib=null;eb=0;Ec=!1;ae=Sb=0;$b=1;Tb=0;rd=5126;xb=qb=Ma=Ub=0;pb(q)?(Sa=!0,Ib=u.createStream(34962,q),rd=Ib.dtype):(Ib=u.getBuffer(q))?rd=Ib.dtype:"constant"in q?($b=2,"number"===typeof q.constant?(Ma=q.constant,qb=xb=Ub=0):(Ma=0<q.constant.length?q.constant[0]:0,qb=1<q.constant.length?q.constant[1]:0,xb=2<q.constant.length?q.constant[2]:
0,Ub=3<q.constant.length?q.constant[3]:0)):(Ib=pb(q.buffer)?u.createStream(34962,q.buffer):u.getBuffer(q.buffer),rd="type"in q?mc[q.type]:Ib.dtype,Ec=!!q.normalized,ae=q.size|0,Sb=q.offset|0,Tb=q.stride|0,eb=q.divisor|0);jb=xd.location;Oa=R[jb];if(1===$b){Oa.buffer||V.enableVertexAttribArray(jb);lc=ae||4;if(Oa.type!==rd||Oa.size!==lc||Oa.buffer!==Ib||Oa.normalized!==Ec||Oa.offset!==Sb||Oa.stride!==Tb)V.bindBuffer(34962,Ib.buffer),V.vertexAttribPointer(jb,lc,rd,Ec,Tb,Sb),Oa.type=rd,Oa.size=lc,Oa.buffer=
Ib,Oa.normalized=Ec,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==eb&&(K.vertexAttribDivisorANGLE(jb,eb),Oa.divisor=eb)}else if(Oa.buffer&&(V.disableVertexAttribArray(jb),Oa.buffer=null),Oa.x!==Ma||Oa.y!==qb||Oa.z!==xb||Oa.w!==Ub)V.vertexAttrib4f(jb,Ma,qb,xb,Ub),Oa.x=Ma,Oa.y=qb,Oa.z=xb,Oa.w=Ub;Kb=fa.call(this,ka,a,0);ia.offset=Kb;Zc=!1;fb=null;jc=0;dd=!1;lb=hc=0;mb=1;ta=0;rb=5126;za=cb=Ua=wa=0;pb(ia)?(Zc=!0,fb=u.createStream(34962,ia),rb=fb.dtype):(fb=u.getBuffer(ia))?rb=fb.dtype:"constant"in ia?(mb=2,"number"===
typeof ia.constant?(Ua=ia.constant,cb=za=wa=0):(Ua=0<ia.constant.length?ia.constant[0]:0,cb=1<ia.constant.length?ia.constant[1]:0,za=2<ia.constant.length?ia.constant[2]:0,wa=3<ia.constant.length?ia.constant[3]:0)):(fb=pb(ia.buffer)?u.createStream(34962,ia.buffer):u.getBuffer(ia.buffer),rb="type"in ia?mc[ia.type]:fb.dtype,dd=!!ia.normalized,lb=ia.size|0,hc=ia.offset|0,ta=ia.stride|0,jc=ia.divisor|0);gb=Ka.location;Ia=R[gb];if(1===mb){Ia.buffer||V.enableVertexAttribArray(gb);Db=lb||4;if(Ia.type!==rb||
Ia.size!==Db||Ia.buffer!==fb||Ia.normalized!==dd||Ia.offset!==hc||Ia.stride!==ta)V.bindBuffer(34962,fb.buffer),V.vertexAttribPointer(gb,Db,rb,dd,ta,hc),Ia.type=rb,Ia.size=Db,Ia.buffer=fb,Ia.normalized=dd,Ia.offset=hc,Ia.stride=ta;Ia.divisor!==jc&&(K.vertexAttribDivisorANGLE(gb,jc),Ia.divisor=jc)}else if(Ia.buffer&&(V.disableVertexAttribArray(gb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==cb||Ia.z!==za||Ia.w!==wa)V.vertexAttrib4f(gb,Ua,cb,za,wa),Ia.x=Ua,Ia.y=cb,Ia.z=za,Ia.w=wa;Cb=db.location;Ra=R[Cb];Ra.buffer||
V.enableVertexAttribArray(Cb);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==M||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)V.bindBuffer(34962,M.buffer),V.vertexAttribPointer(Cb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=M,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(K.vertexAttribDivisorANGLE(Cb,0),Ra.divisor=0);Ic=la.location;Lb=R[Ic];Lb.buffer||V.enableVertexAttribArray(Ic);if(5126!==Lb.type||2!==Lb.size||Lb.buffer!==H||!1!==Lb.normalized||8!==Lb.offset||24!==Lb.stride)V.bindBuffer(34962,
H.buffer),V.vertexAttribPointer(Ic,2,5126,!1,24,8),Lb.type=5126,Lb.size=2,Lb.buffer=H,Lb.normalized=!1,Lb.offset=8,Lb.stride=24;0!==Lb.divisor&&(K.vertexAttribDivisorANGLE(Ic,0),Lb.divisor=0);$a=W.location;Vb=R[$a];Vb.buffer||V.enableVertexAttribArray($a);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==r||!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)V.bindBuffer(34962,r.buffer),V.vertexAttribPointer($a,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=r,Vb.normalized=!1,Vb.offset=16,Vb.stride=24;
0!==Vb.divisor&&(K.vertexAttribDivisorANGLE($a,0),Vb.divisor=0);xa=D.call(this,ka,a,0);V.uniform4f(ab.location,xa[0],xa[1],xa[2],xa[3]);V.uniform1f(Qa.location,a.lineWidth);V.uniform1f(ma.location,a.capSize);Ad=a.scale;V.uniform2f(U.location,Ad[0],Ad[1]);Ja=a.scaleFract;V.uniform2f(ra.location,Ja[0],Ja[1]);Pb=a.translate;V.uniform2f(J.location,Pb[0],Pb[1]);hb=a.translateFract;V.uniform2f(Wb.location,hb[0],hb[1]);V.uniform1f(Z.location,a.opacity);(kb=Ea.elements)?V.bindBuffer(34963,kb.buffer.buffer):
pc.currentVAO&&(kb=Na.getElements(pc.currentVAO.elements))&&V.bindBuffer(34963,kb.buffer.buffer);ya=Ea.offset;dc=a.count;0<dc?kb?K.drawElementsInstancedANGLE(4,36,kb.type,ya<<(kb.type-5121>>1),dc):K.drawArraysInstancedANGLE(4,ya,36,dc):0>dc&&(kb?V.drawElements(4,36,kb.type,ya<<(kb.type-5121>>1)):V.drawArrays(4,ya,36));ba.dirty=!0;pc.setVAO(null);ka.viewportWidth=l;ka.viewportHeight=n;E&&(y.cpuTime+=performance.now()-P);Q&&u.destroyStream(S);oc&&u.destroyStream(Ta);Sa&&u.destroyStream(Ib);Zc&&u.destroyStream(fb)},
scope:function(a,b,d){var c,g,k,m,n,p,t,x,v,w,z,I,G,ca,X,P,D,K,O,L,J,B,U,R,V,ga,ja,Z,ha,sa,W,fa,ua,pc,qa,Ba,da,pa,ra,td,Yb,Dc,Pc,La,Gb,Wa,Ca,la,ib,Sa,ma,eb,na,wb,Wc,$b,Tb,ab,Ub,Ma,qb,xb,jb,Oa,Qa,Kb,Ka,fb,jc,Na,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Wb,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,db,sc,Ha,Kc,Tc,vb,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Pf,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,Za,vd,xd,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,
Bd,Se,Ie,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Xe,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd;c=a.viewport;g=c.x|0;k=c.y|0;m="width"in c?c.width|0:ka.framebufferWidth-g;n="height"in c?c.height|0:ka.framebufferHeight-k;p=ka.viewportWidth;ka.viewportWidth=m;t=ka.viewportHeight;ka.viewportHeight=n;x=oa[0];oa[0]=g;v=oa[1];oa[1]=k;w=oa[2];oa[2]=m;z=oa[3];oa[3]=n;I=ic[0];ic[0]=0;G=ic[1];ic[1]=0;ca=ic[2];ic[2]=0;X=ic[3];ic[3]=0;P=ea.blend_enable;ea.blend_enable=!0;D=tc[0];tc[0]=32774;K=tc[1];tc[1]=32774;
O=F[0];F[0]=770;L=F[1];F[1]=771;J=F[2];F[2]=773;B=F[3];F[3]=1;U=ea.depth_enable;ea.depth_enable=!1;R=a.viewport;V=R.x|0;ga=R.y|0;ja="width"in R?R.width|0:ka.framebufferWidth-V;Z="height"in R?R.height|0:ka.framebufferHeight-ga;ha=S[0];S[0]=V;sa=S[1];S[1]=ga;W=S[2];S[2]=ja;fa=S[3];S[3]=Z;ua=ea.scissor_enable;ea.scissor_enable=!0;if(pc=ba.profile)qa=performance.now(),y.count++;Ba=Ea.count;Ea.count=36;da=a.count;pa=Ea.instances;Ea.instances=da;ra=Ea.primitive;Ea.primitive=4;td=a.capSize;Yb=ac[5];ac[5]=
td;Dc=a.lineWidth;Pc=ac[4];ac[4]=Dc;La=a.opacity;Gb=ac[10];ac[10]=La;Wa=a.range;Ca=ac[18];ac[18]=Wa;la=a.scale;ib=ac[6];ac[6]=la;Sa=a.scaleFract;ma=ac[7];ac[7]=Sa;eb=a.translate;na=ac[8];ac[8]=eb;wb=a.translateFract;Wc=ac[9];ac[9]=wb;$b=C.call(this,ka,a,d);Tb=ac[3];ac[3]=$b;ab=E.buffer;E.buffer=r;Ub=E.divisor;E.divisor=0;Ma=E.normalized;E.normalized=!1;qb=E.offset;E.offset=16;xb=E.size;E.size=0;jb=E.state;E.state=1;Oa=E.stride;E.stride=24;Qa=E.type;E.type=5126;Kb=E.w;E.w=0;Ka=E.x;E.x=0;fb=E.y;E.y=
0;jc=E.z;E.z=0;Na=Q.call(this,ka,a,d);ia.offset=Na;hc=!1;lb=null;mb=0;ta=!1;wa=rb=0;Ua=1;cb=0;za=5126;Cb=Db=Ia=gb=0;pb(ia)?(hc=!0,lb=u.createStream(34962,ia),za=lb.dtype):(lb=u.getBuffer(ia))?za=lb.dtype:"constant"in ia?(Ua=2,"number"===typeof ia.constant?(Ia=ia.constant,Db=Cb=gb=0):(Ia=0<ia.constant.length?ia.constant[0]:0,Db=1<ia.constant.length?ia.constant[1]:0,Cb=2<ia.constant.length?ia.constant[2]:0,gb=3<ia.constant.length?ia.constant[3]:0)):(lb=pb(ia.buffer)?u.createStream(34962,ia.buffer):
u.getBuffer(ia.buffer),za="type"in ia?mc[ia.type]:lb.dtype,ta=!!ia.normalized,wa=ia.size|0,rb=ia.offset|0,cb=ia.stride|0,mb=ia.divisor|0);Ra=A.buffer;A.buffer=lb;Ic=A.divisor;A.divisor=mb;Lb=A.normalized;A.normalized=ta;$a=A.offset;A.offset=rb;Vb=A.size;A.size=wa;xa=A.state;A.state=Ua;Wb=A.stride;A.stride=cb;Ja=A.type;A.type=za;Pb=A.w;A.w=gb;hb=A.x;A.x=Ia;kb=A.y;A.y=Db;ya=A.z;A.z=Cb;dc=N.buffer;N.buffer=M;Da=N.divisor;N.divisor=0;sb=N.normalized;N.normalized=!1;tb=N.offset;N.offset=0;Xa=N.size;N.size=
0;Ya=N.state;N.state=1;kc=N.stride;N.stride=24;ad=N.type;N.type=5126;uc=N.w;N.w=0;Va=N.x;N.x=0;Nb=N.y;N.y=0;Oc=N.z;N.z=0;Fa=Y.call(this,ka,a,d);q.offset=Fa;wc=!1;Pa=null;Aa=0;nb=!1;Eb=yb=0;ub=1;vc=0;zb=5126;Kc=Ha=sc=db=0;pb(q)?(wc=!0,Pa=u.createStream(34962,q),zb=Pa.dtype):(Pa=u.getBuffer(q))?zb=Pa.dtype:"constant"in q?(ub=2,"number"===typeof q.constant?(sc=q.constant,Ha=Kc=db=0):(sc=0<q.constant.length?q.constant[0]:0,Ha=1<q.constant.length?q.constant[1]:0,Kc=2<q.constant.length?q.constant[2]:0,
db=3<q.constant.length?q.constant[3]:0)):(Pa=pb(q.buffer)?u.createStream(34962,q.buffer):u.getBuffer(q.buffer),zb="type"in q?mc[q.type]:Pa.dtype,nb=!!q.normalized,Eb=q.size|0,yb=q.offset|0,vc=q.stride|0,Aa=q.divisor|0);Tc=h.buffer;h.buffer=Pa;vb=h.divisor;h.divisor=Aa;Xb=h.normalized;h.normalized=nb;cc=h.offset;h.offset=yb;Qb=h.size;h.size=Eb;Ga=h.state;h.state=ub;Zb=h.stride;h.stride=vc;ob=h.type;h.type=zb;Ab=h.w;h.w=db;Ob=h.x;h.x=sc;Rb=h.y;h.y=Ha;ec=h.z;h.z=Kc;gc=f.buffer;f.buffer=H;Pf=f.divisor;
f.divisor=0;zc=f.normalized;f.normalized=!1;Ac=f.offset;f.offset=8;Bc=f.size;f.size=0;Lc=f.state;f.state=1;Xc=f.stride;f.stride=24;Qc=f.type;f.type=5126;Mc=f.w;f.w=0;Mb=f.x;f.x=0;Hb=f.y;f.y=0;Nc=f.z;f.z=0;Fc=e.call(this,ka,a,d);Jb.offset=Fc;Rc=!1;fc=null;Uc=0;kd=!1;md=fd=0;Vc=1;Za=0;vd=5126;Md=ne=te=xd=0;pb(Jb)?(Rc=!0,fc=u.createStream(34962,Jb),vd=fc.dtype):(fc=u.getBuffer(Jb))?vd=fc.dtype:"constant"in Jb?(Vc=2,"number"===typeof Jb.constant?(te=Jb.constant,ne=Md=xd=0):(te=0<Jb.constant.length?Jb.constant[0]:
0,ne=1<Jb.constant.length?Jb.constant[1]:0,Md=2<Jb.constant.length?Jb.constant[2]:0,xd=3<Jb.constant.length?Jb.constant[3]:0)):(fc=pb(Jb.buffer)?u.createStream(34962,Jb.buffer):u.getBuffer(Jb.buffer),vd="type"in Jb?mc[Jb.type]:fc.dtype,kd=!!Jb.normalized,md=Jb.size|0,fd=Jb.offset|0,Za=Jb.stride|0,Uc=Jb.divisor|0);Kd=l.buffer;l.buffer=fc;cd=l.divisor;l.divisor=Uc;Cc=l.normalized;l.normalized=kd;ld=l.offset;l.offset=fd;gd=l.size;l.size=md;$c=l.state;l.state=Vc;nd=l.stride;l.stride=Za;zd=l.type;l.type=
vd;Bd=l.w;l.w=xd;Se=l.x;l.x=te;Ie=l.y;l.y=ne;we=l.z;l.z=Md;fe=T.call(this,ka,a,d);Bb.offset=fe;ee=!1;de=null;qe=0;be=!1;xc=he=0;Sc=1;re=0;ke=5126;Rd=Qd=Od=Ld=0;pb(Bb)?(ee=!0,de=u.createStream(34962,Bb),ke=de.dtype):(de=u.getBuffer(Bb))?ke=de.dtype:"constant"in Bb?(Sc=2,"number"===typeof Bb.constant?(Od=Bb.constant,Qd=Rd=Ld=0):(Od=0<Bb.constant.length?Bb.constant[0]:0,Qd=1<Bb.constant.length?Bb.constant[1]:0,Rd=2<Bb.constant.length?Bb.constant[2]:0,Ld=3<Bb.constant.length?Bb.constant[3]:0)):(de=pb(Bb.buffer)?
u.createStream(34962,Bb.buffer):u.getBuffer(Bb.buffer),ke="type"in Bb?mc[Bb.type]:de.dtype,be=!!Bb.normalized,xc=Bb.size|0,he=Bb.offset|0,re=Bb.stride|0,qe=Bb.divisor|0);ie=aa.buffer;aa.buffer=de;Ce=aa.divisor;aa.divisor=qe;Xe=aa.normalized;aa.normalized=be;oe=aa.offset;aa.offset=he;Me=aa.size;aa.size=xc;Ne=aa.state;aa.state=Sc;Je=aa.stride;aa.stride=re;se=aa.type;aa.type=ke;ze=aa.w;aa.w=Ld;De=aa.x;aa.x=Od;Ee=aa.y;aa.y=Qd;Fe=aa.z;aa.z=Rd;Ae=va.vert;va.vert=2;Nd=va.frag;va.frag=1;ba.dirty=!0;b(ka,
a,d);ka.viewportWidth=p;ka.viewportHeight=t;oa[0]=x;oa[1]=v;oa[2]=w;oa[3]=z;ic[0]=I;ic[1]=G;ic[2]=ca;ic[3]=X;ea.blend_enable=P;tc[0]=D;tc[1]=K;F[0]=O;F[1]=L;F[2]=J;F[3]=B;ea.depth_enable=U;S[0]=ha;S[1]=sa;S[2]=W;S[3]=fa;ea.scissor_enable=ua;pc&&(y.cpuTime+=performance.now()-qa);Ea.count=Ba;Ea.instances=pa;Ea.primitive=ra;ac[5]=Yb;ac[4]=Pc;ac[10]=Gb;ac[18]=Ca;ac[6]=ib;ac[7]=ma;ac[8]=na;ac[9]=Wc;ac[3]=Tb;E.buffer=ab;E.divisor=Ub;E.normalized=Ma;E.offset=qb;E.size=xb;E.state=jb;E.stride=Oa;E.type=Qa;
E.w=Kb;E.x=Ka;E.y=fb;E.z=jc;hc&&u.destroyStream(lb);A.buffer=Ra;A.divisor=Ic;A.normalized=Lb;A.offset=$a;A.size=Vb;A.state=xa;A.stride=Wb;A.type=Ja;A.w=Pb;A.x=hb;A.y=kb;A.z=ya;N.buffer=dc;N.divisor=Da;N.normalized=sb;N.offset=tb;N.size=Xa;N.state=Ya;N.stride=kc;N.type=ad;N.w=uc;N.x=Va;N.y=Nb;N.z=Oc;wc&&u.destroyStream(Pa);h.buffer=Tc;h.divisor=vb;h.normalized=Xb;h.offset=cc;h.size=Qb;h.state=Ga;h.stride=Zb;h.type=ob;h.w=Ab;h.x=Ob;h.y=Rb;h.z=ec;f.buffer=gc;f.divisor=Pf;f.normalized=zc;f.offset=Ac;
f.size=Bc;f.state=Lc;f.stride=Xc;f.type=Qc;f.w=Mc;f.x=Mb;f.y=Hb;f.z=Nc;Rc&&u.destroyStream(fc);l.buffer=Kd;l.divisor=cd;l.normalized=Cc;l.offset=ld;l.size=gd;l.state=$c;l.stride=nd;l.type=zd;l.w=Bd;l.x=Se;l.y=Ie;l.z=we;ee&&u.destroyStream(de);aa.buffer=ie;aa.divisor=Ce;aa.normalized=Xe;aa.offset=oe;aa.size=Me;aa.state=Ne;aa.stride=Je;aa.type=se;aa.w=ze;aa.x=De;aa.y=Ee;aa.z=Fe;va.vert=Ae;va.frag=Nd;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(c,
y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db){var xd,la,Qa,Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va,ac,pc,ic,td,tc,X,F,ja,Ba,wb,Wc,Tc,G,v,ha,ua,S,ga,qa,I,t;xd=c.attributes;la=c.buffer;Qa=c.context;Z=c.current;L=c.draw;O=c.elements;U=c.extensions;ra=c.framebuffer;J=c.gl;Wb=c.isBufferArgs;ab=c.next;R=c.shader;u=c.uniforms;ka=c.vao;ba=ab.blend_color;Ea=Z.blend_color;Na=ab.blend_equation;vb=Z.blend_equation;Ha=ab.blend_func;V=Z.blend_func;pb=ab.colorMask;ea=
Z.colorMask;va=ab.depth_range;ac=Z.depth_range;pc=ab.polygonOffset_offset;ic=Z.polygonOffset_offset;td=ab.sample_coverage;tc=Z.sample_coverage;X=ab.scissor_box;F=Z.scissor_box;ja=ab.stencil_func;Ba=Z.stencil_func;wb=ab.stencil_opBack;Wc=Z.stencil_opBack;Tc=ab.stencil_opFront;G=Z.stencil_opFront;v=ab.viewport;ha=Z.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};S={divisor:1,offset:8,stride:8};ga={divisor:1,offset:8,stride:8};qa={divisor:1,
offset:16,stride:8};I={divisor:1,offset:16,stride:8};t={divisor:1,offset:0,stride:4};return{batch:function(b,c){var p,u,k,v,r,q;p=ra.next;p!==ra.cur&&(p?J.bindFramebuffer(36160,p.framebuffer):J.bindFramebuffer(36160,null),ra.cur=p);if(Z.dirty){var w,z,X,C,E,P,D,H,M,B,R,ba,fa,na,Pd,Ye,Na,af,Cd,Be,Vd,Wd,me,Yd,pd,hd,wd,Yc,id,nc,Gd,ed;w=ab.dither;w!==Z.dither&&(w?J.enable(3024):J.disable(3024),Z.dither=w);z=ab.depth_func;z!==Z.depth_func&&(J.depthFunc(z),Z.depth_func=z);X=va[0];C=va[1];if(X!==ac[0]||
C!==ac[1])J.depthRange(X,C),ac[0]=X,ac[1]=C;E=ab.depth_mask;E!==Z.depth_mask&&(J.depthMask(E),Z.depth_mask=E);P=pb[0];D=pb[1];H=pb[2];M=pb[3];if(P!==ea[0]||D!==ea[1]||H!==ea[2]||M!==ea[3])J.colorMask(P,D,H,M),ea[0]=P,ea[1]=D,ea[2]=H,ea[3]=M;B=ab.cull_enable;B!==Z.cull_enable&&(B?J.enable(2884):J.disable(2884),Z.cull_enable=B);R=ab.cull_face;R!==Z.cull_face&&(J.cullFace(R),Z.cull_face=R);ba=ab.frontFace;ba!==Z.frontFace&&(J.frontFace(ba),Z.frontFace=ba);fa=ab.lineWidth;fa!==Z.lineWidth&&(J.lineWidth(fa),
Z.lineWidth=fa);na=ab.polygonOffset_enable;na!==Z.polygonOffset_enable&&(na?J.enable(32823):J.disable(32823),Z.polygonOffset_enable=na);Pd=pc[0];Ye=pc[1];if(Pd!==ic[0]||Ye!==ic[1])J.polygonOffset(Pd,Ye),ic[0]=Pd,ic[1]=Ye;Na=ab.sample_alpha;Na!==Z.sample_alpha&&(Na?J.enable(32926):J.disable(32926),Z.sample_alpha=Na);af=ab.sample_enable;af!==Z.sample_enable&&(af?J.enable(32928):J.disable(32928),Z.sample_enable=af);Cd=td[0];Be=td[1];if(Cd!==tc[0]||Be!==tc[1])J.sampleCoverage(Cd,Be),tc[0]=Cd,tc[1]=Be;
Vd=ab.stencil_mask;Vd!==Z.stencil_mask&&(J.stencilMask(Vd),Z.stencil_mask=Vd);Wd=ja[0];me=ja[1];Yd=ja[2];if(Wd!==Ba[0]||me!==Ba[1]||Yd!==Ba[2])J.stencilFunc(Wd,me,Yd),Ba[0]=Wd,Ba[1]=me,Ba[2]=Yd;pd=Tc[0];hd=Tc[1];wd=Tc[2];Yc=Tc[3];if(pd!==G[0]||hd!==G[1]||wd!==G[2]||Yc!==G[3])J.stencilOpSeparate(pd,hd,wd,Yc),G[0]=pd,G[1]=hd,G[2]=wd,G[3]=Yc;id=wb[0];nc=wb[1];Gd=wb[2];ed=wb[3];if(id!==Wc[0]||nc!==Wc[1]||Gd!==Wc[2]||ed!==Wc[3])J.stencilOpSeparate(id,nc,Gd,ed),Wc[0]=id,Wc[1]=nc,Wc[2]=Gd,Wc[3]=ed}J.blendColor(0,
0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;J.enable(3042);Z.blend_enable=!0;J.blendEquationSeparate(32774,32774);vb[0]=32774;vb[1]=32774;J.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;J.enable(3089);Z.scissor_enable=!0;J.disable(2960);Z.stencil_enable=!1;if(u=Z.profile)k=performance.now(),y.count+=c;J.useProgram(Q.program);v=U.angle_instanced_arrays;var Jc,qc,bb,Gc,Fb;ka.setVAO(null);Jc=pa.location;qc=xd[Jc];qc.buffer||J.enableVertexAttribArray(Jc);if(5126!==qc.type||1!==qc.size||
qc.buffer!==g||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)J.bindBuffer(34962,g.buffer),J.vertexAttribPointer(Jc,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=g,qc.normalized=!1,qc.offset=0,qc.stride=8;0!==qc.divisor&&(v.vertexAttribDivisorANGLE(Jc,0),qc.divisor=0);bb=K.location;Gc=xd[bb];Gc.buffer||J.enableVertexAttribArray(bb);if(5126!==Gc.type||1!==Gc.size||Gc.buffer!==d||!1!==Gc.normalized||4!==Gc.offset||8!==Gc.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer(bb,1,5126,!1,8,4),
Gc.type=5126,Gc.size=1,Gc.buffer=d,Gc.normalized=!1,Gc.offset=4,Gc.stride=8;0!==Gc.divisor&&(v.vertexAttribDivisorANGLE(bb,0),Gc.divisor=0);(Fb=L.elements)?J.bindBuffer(34963,Fb.buffer.buffer):ka.currentVAO&&(Fb=O.getElements(ka.currentVAO.elements))&&J.bindBuffer(34963,Fb.buffer.buffer);for(r=0;r<c;++r){q=b[r];var oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb,Ha,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,
ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Za,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,Og,vd,zf,te,ne,Md,Kd,cd,Cc,ld,gd,$c;oc=q.viewport;Ta=oc.x|0;Hc=oc.y|0;bc="width"in oc?oc.width|0:Qa.framebufferWidth-Ta;rc="height"in oc?oc.height|0:Qa.framebufferHeight-Hc;Jd=Qa.viewportWidth;Qa.viewportWidth=bc;Dd=Qa.viewportHeight;Qa.viewportHeight=rc;J.viewport(Ta,Hc,bc,rc);ha[0]=Ta;ha[1]=Hc;ha[2]=bc;ha[3]=rc;(yc=A.call(this,
Qa,q,r))?J.enable(2929):J.disable(2929);Z.depth_enable=yc;Yb=q.viewport;Dc=Yb.x|0;Pc=Yb.y|0;La="width"in Yb?Yb.width|0:Qa.framebufferWidth-Dc;Gb="height"in Yb?Yb.height|0:Qa.framebufferHeight-Pc;J.scissor(Dc,Pc,La,Gb);F[0]=Dc;F[1]=Pc;F[2]=La;F[3]=Gb;S.buffer=q.positionBuffer;Wa=!1;Ca=null;jd=0;ib=!1;Ib=Sa=0;eb=1;Ec=0;Sb=5126;rd=Tb=$b=Ha=0;Wb(S)?(Wa=!0,Ca=la.createStream(34962,S),Sb=Ca.dtype):(Ca=la.getBuffer(S))?Sb=Ca.dtype:"constant"in S?(eb=2,"number"===typeof S.constant?($b=S.constant,Tb=rd=Ha=
0):($b=0<S.constant.length?S.constant[0]:0,Tb=1<S.constant.length?S.constant[1]:0,rd=2<S.constant.length?S.constant[2]:0,Ha=3<S.constant.length?S.constant[3]:0)):(Ca=Wb(S.buffer)?la.createStream(34962,S.buffer):la.getBuffer(S.buffer),Sb="type"in S?ua[S.type]:Ca.dtype,ib=!!S.normalized,Ib=S.size|0,Sa=S.offset|0,Ec=S.stride|0,jd=S.divisor|0);Ub=Y.location;Ma=xd[Ub];if(1===eb){Ma.buffer||J.enableVertexAttribArray(Ub);qb=Ib||2;if(Ma.type!==Sb||Ma.size!==qb||Ma.buffer!==Ca||Ma.normalized!==ib||Ma.offset!==
Sa||Ma.stride!==Ec)J.bindBuffer(34962,Ca.buffer),J.vertexAttribPointer(Ub,qb,Sb,ib,Ec,Sa),Ma.type=Sb,Ma.size=qb,Ma.buffer=Ca,Ma.normalized=ib,Ma.offset=Sa,Ma.stride=Ec;Ma.divisor!==jd&&(v.vertexAttribDivisorANGLE(Ub,jd),Ma.divisor=jd)}else if(Ma.buffer&&(J.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==$b||Ma.y!==Tb||Ma.z!==rd||Ma.w!==Ha)J.vertexAttrib4f(Ub,$b,Tb,rd,Ha),Ma.x=$b,Ma.y=Tb,Ma.z=rd,Ma.w=Ha;qa.buffer=q.positionBuffer;xb=!1;jb=null;Oa=0;lc=!1;Zc=Kb=0;fb=1;jc=0;dd=5126;ta=mb=lb=hc=0;
Wb(qa)?(xb=!0,jb=la.createStream(34962,qa),dd=jb.dtype):(jb=la.getBuffer(qa))?dd=jb.dtype:"constant"in qa?(fb=2,"number"===typeof qa.constant?(lb=qa.constant,mb=ta=hc=0):(lb=0<qa.constant.length?qa.constant[0]:0,mb=1<qa.constant.length?qa.constant[1]:0,ta=2<qa.constant.length?qa.constant[2]:0,hc=3<qa.constant.length?qa.constant[3]:0)):(jb=Wb(qa.buffer)?la.createStream(34962,qa.buffer):la.getBuffer(qa.buffer),dd="type"in qa?ua[qa.type]:jb.dtype,lc=!!qa.normalized,Zc=qa.size|0,Kb=qa.offset|0,jc=qa.stride|
0,Oa=qa.divisor|0);rb=f.location;wa=xd[rb];if(1===fb){wa.buffer||J.enableVertexAttribArray(rb);Ua=Zc||2;if(wa.type!==dd||wa.size!==Ua||wa.buffer!==jb||wa.normalized!==lc||wa.offset!==Kb||wa.stride!==jc)J.bindBuffer(34962,jb.buffer),J.vertexAttribPointer(rb,Ua,dd,lc,jc,Kb),wa.type=dd,wa.size=Ua,wa.buffer=jb,wa.normalized=lc,wa.offset=Kb,wa.stride=jc;wa.divisor!==Oa&&(v.vertexAttribDivisorANGLE(rb,Oa),wa.divisor=Oa)}else if(wa.buffer&&(J.disableVertexAttribArray(rb),wa.buffer=null),wa.x!==lb||wa.y!==
mb||wa.z!==ta||wa.w!==hc)J.vertexAttrib4f(rb,lb,mb,ta,hc),wa.x=lb,wa.y=mb,wa.z=ta,wa.w=hc;ga.buffer=q.positionFractBuffer;cb=!1;za=null;gb=0;Ia=!1;Cb=Db=0;Ra=1;Ic=0;Lb=5126;Ad=xa=Vb=$a=0;Wb(ga)?(cb=!0,za=la.createStream(34962,ga),Lb=za.dtype):(za=la.getBuffer(ga))?Lb=za.dtype:"constant"in ga?(Ra=2,"number"===typeof ga.constant?(Vb=ga.constant,xa=Ad=$a=0):(Vb=0<ga.constant.length?ga.constant[0]:0,xa=1<ga.constant.length?ga.constant[1]:0,Ad=2<ga.constant.length?ga.constant[2]:0,$a=3<ga.constant.length?
ga.constant[3]:0)):(za=Wb(ga.buffer)?la.createStream(34962,ga.buffer):la.getBuffer(ga.buffer),Lb="type"in ga?ua[ga.type]:za.dtype,Ia=!!ga.normalized,Cb=ga.size|0,Db=ga.offset|0,Ic=ga.stride|0,gb=ga.divisor|0);Ja=h.location;Pb=xd[Ja];if(1===Ra){Pb.buffer||J.enableVertexAttribArray(Ja);hb=Cb||2;if(Pb.type!==Lb||Pb.size!==hb||Pb.buffer!==za||Pb.normalized!==Ia||Pb.offset!==Db||Pb.stride!==Ic)J.bindBuffer(34962,za.buffer),J.vertexAttribPointer(Ja,hb,Lb,Ia,Ic,Db),Pb.type=Lb,Pb.size=hb,Pb.buffer=za,Pb.normalized=
Ia,Pb.offset=Db,Pb.stride=Ic;Pb.divisor!==gb&&(v.vertexAttribDivisorANGLE(Ja,gb),Pb.divisor=gb)}else if(Pb.buffer&&(J.disableVertexAttribArray(Ja),Pb.buffer=null),Pb.x!==Vb||Pb.y!==xa||Pb.z!==Ad||Pb.w!==$a)J.vertexAttrib4f(Ja,Vb,xa,Ad,$a),Pb.x=Vb,Pb.y=xa,Pb.z=Ad,Pb.w=$a;I.buffer=q.positionFractBuffer;kb=!1;ya=null;dc=0;Da=!1;tb=sb=0;Xa=1;Ya=0;kc=5126;Nb=Va=uc=ad=0;Wb(I)?(kb=!0,ya=la.createStream(34962,I),kc=ya.dtype):(ya=la.getBuffer(I))?kc=ya.dtype:"constant"in I?(Xa=2,"number"===typeof I.constant?
(uc=I.constant,Va=Nb=ad=0):(uc=0<I.constant.length?I.constant[0]:0,Va=1<I.constant.length?I.constant[1]:0,Nb=2<I.constant.length?I.constant[2]:0,ad=3<I.constant.length?I.constant[3]:0)):(ya=Wb(I.buffer)?la.createStream(34962,I.buffer):la.getBuffer(I.buffer),kc="type"in I?ua[I.type]:ya.dtype,Da=!!I.normalized,tb=I.size|0,sb=I.offset|0,Ya=I.stride|0,dc=I.divisor|0);Oc=e.location;Fa=xd[Oc];if(1===Xa){Fa.buffer||J.enableVertexAttribArray(Oc);wc=tb||2;if(Fa.type!==kc||Fa.size!==wc||Fa.buffer!==ya||Fa.normalized!==
Da||Fa.offset!==sb||Fa.stride!==Ya)J.bindBuffer(34962,ya.buffer),J.vertexAttribPointer(Oc,wc,kc,Da,Ya,sb),Fa.type=kc,Fa.size=wc,Fa.buffer=ya,Fa.normalized=Da,Fa.offset=sb,Fa.stride=Ya;Fa.divisor!==dc&&(v.vertexAttribDivisorANGLE(Oc,dc),Fa.divisor=dc)}else if(Fa.buffer&&(J.disableVertexAttribArray(Oc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Nb||Fa.w!==ad)J.vertexAttrib4f(Oc,uc,Va,Nb,ad),Fa.x=uc,Fa.y=Va,Fa.z=Nb,Fa.w=ad;t.buffer=q.colorBuffer;Pa=!1;Aa=null;nb=0;yb=!1;ub=Eb=0;vc=1;zb=0;Ed=5126;bd=
Kc=ud=sc=0;Wb(t)?(Pa=!0,Aa=la.createStream(34962,t),Ed=Aa.dtype):(Aa=la.getBuffer(t))?Ed=Aa.dtype:"constant"in t?(vc=2,"number"===typeof t.constant?(ud=t.constant,Kc=bd=sc=0):(ud=0<t.constant.length?t.constant[0]:0,Kc=1<t.constant.length?t.constant[1]:0,bd=2<t.constant.length?t.constant[2]:0,sc=3<t.constant.length?t.constant[3]:0)):(Aa=Wb(t.buffer)?la.createStream(34962,t.buffer):la.getBuffer(t.buffer),Ed="type"in t?ua[t.type]:Aa.dtype,yb=!!t.normalized,ub=t.size|0,Eb=t.offset|0,zb=t.stride|0,nb=
t.divisor|0);qd=l.location;Xb=xd[qd];if(1===vc){Xb.buffer||J.enableVertexAttribArray(qd);cc=ub||4;if(Xb.type!==Ed||Xb.size!==cc||Xb.buffer!==Aa||Xb.normalized!==yb||Xb.offset!==Eb||Xb.stride!==zb)J.bindBuffer(34962,Aa.buffer),J.vertexAttribPointer(qd,cc,Ed,yb,zb,Eb),Xb.type=Ed,Xb.size=cc,Xb.buffer=Aa,Xb.normalized=yb,Xb.offset=Eb,Xb.stride=zb;Xb.divisor!==nb&&(v.vertexAttribDivisorANGLE(qd,nb),Xb.divisor=nb)}else if(Xb.buffer&&(J.disableVertexAttribArray(qd),Xb.buffer=null),Xb.x!==ud||Xb.y!==Kc||
Xb.z!==bd||Xb.w!==sc)J.vertexAttrib4f(qd,ud,Kc,bd,sc),Xb.x=ud,Xb.y=Kc,Xb.z=bd,Xb.w=sc;Qb=q.scale;Ga=Qb[0];ob=Qb[1];r&&Zb===Ga&&Ab===ob||(Zb=Ga,Ab=ob,J.uniform2f(a.location,Ga,ob));Ob=q.scaleFract;Rb=Ob[0];gc=Ob[1];r&&ec===Rb&&Za===gc||(ec=Rb,Za=gc,J.uniform2f(n.location,Rb,gc));zc=q.translate;Ac=zc[0];Lc=zc[1];r&&Bc===Ac&&Xc===Lc||(Bc=Ac,Xc=Lc,J.uniform2f(ma.location,Ac,Lc));Qc=q.translateFract;Mc=Qc[0];Hb=Qc[1];r&&Mb===Mc&&Nc===Hb||(Mb=Mc,Nc=Hb,J.uniform2f(Ka.location,Mc,Hb));Fc=q.thickness;r&&Rc===
Fc||(Rc=Fc,J.uniform1f(W.location,Fc));fc=q.depth;r&&Uc===fc||(Uc=fc,J.uniform1f(m.location,fc));kd=N.call(this,Qa,q,r);fd=kd[0];Vc=kd[1];vd=kd[2];te=kd[3];r&&md===fd&&Og===Vc&&zf===vd&&ne===te||(md=fd,Og=Vc,zf=vd,ne=te,J.uniform4f(db.location,fd,Vc,vd,te));Md=q.dashLength;r&&Kd===Md||(Kd=Md,J.uniform1f(T.location,Md));cd=q.opacity;r&&Cc===cd||(Cc=cd,J.uniform1f(da.location,cd));(ld=q.dashTexture)&&"framebuffer"===ld._reglType&&(ld=ld.color[0]);gd=ld._texture;J.uniform1i(aa.location,gd.bind());$c=
q.count;0<$c?Fb?v.drawElementsInstancedANGLE(5,4,Fb.type,0<<(Fb.type-5121>>1),$c):v.drawArraysInstancedANGLE(5,0,4,$c):0>$c&&(Fb?J.drawElements(5,4,Fb.type,0<<(Fb.type-5121>>1)):J.drawArrays(5,0,4));Qa.viewportWidth=Jd;Qa.viewportHeight=Dd;Wa&&la.destroyStream(Ca);xb&&la.destroyStream(jb);cb&&la.destroyStream(za);kb&&la.destroyStream(ya);Pa&&la.destroyStream(Aa);gd.unbind()}Z.dirty=!0;ka.setVAO(null);u&&(y.cpuTime+=performance.now()-k)},draw:function(b){var c,v,u,k,r,w,q,A,X,C,E,D,H,M,N,B,R,Q,ba,
fa,na,Pd,Ye,Na,Ha,Cd,Be,Vd,Wd,me,Yd,pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb;c=ra.next;c!==ra.cur&&(c?J.bindFramebuffer(36160,c.framebuffer):J.bindFramebuffer(36160,null),ra.cur=c);if(Z.dirty){var tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab;tb=ab.dither;
tb!==Z.dither&&(tb?J.enable(3024):J.disable(3024),Z.dither=tb);Xa=ab.depth_func;Xa!==Z.depth_func&&(J.depthFunc(Xa),Z.depth_func=Xa);Ya=va[0];kc=va[1];if(Ya!==ac[0]||kc!==ac[1])J.depthRange(Ya,kc),ac[0]=Ya,ac[1]=kc;ad=ab.depth_mask;ad!==Z.depth_mask&&(J.depthMask(ad),Z.depth_mask=ad);uc=pb[0];Va=pb[1];Nb=pb[2];Oc=pb[3];if(uc!==ea[0]||Va!==ea[1]||Nb!==ea[2]||Oc!==ea[3])J.colorMask(uc,Va,Nb,Oc),ea[0]=uc,ea[1]=Va,ea[2]=Nb,ea[3]=Oc;Fa=ab.cull_enable;Fa!==Z.cull_enable&&(Fa?J.enable(2884):J.disable(2884),
Z.cull_enable=Fa);wc=ab.cull_face;wc!==Z.cull_face&&(J.cullFace(wc),Z.cull_face=wc);Pa=ab.frontFace;Pa!==Z.frontFace&&(J.frontFace(Pa),Z.frontFace=Pa);Aa=ab.lineWidth;Aa!==Z.lineWidth&&(J.lineWidth(Aa),Z.lineWidth=Aa);nb=ab.polygonOffset_enable;nb!==Z.polygonOffset_enable&&(nb?J.enable(32823):J.disable(32823),Z.polygonOffset_enable=nb);yb=pc[0];Eb=pc[1];if(yb!==ic[0]||Eb!==ic[1])J.polygonOffset(yb,Eb),ic[0]=yb,ic[1]=Eb;ub=ab.sample_alpha;ub!==Z.sample_alpha&&(ub?J.enable(32926):J.disable(32926),Z.sample_alpha=
ub);vc=ab.sample_enable;vc!==Z.sample_enable&&(vc?J.enable(32928):J.disable(32928),Z.sample_enable=vc);zb=td[0];Ed=td[1];if(zb!==tc[0]||Ed!==tc[1])J.sampleCoverage(zb,Ed),tc[0]=zb,tc[1]=Ed;sc=ab.stencil_mask;sc!==Z.stencil_mask&&(J.stencilMask(sc),Z.stencil_mask=sc);ud=ja[0];Kc=ja[1];bd=ja[2];if(ud!==Ba[0]||Kc!==Ba[1]||bd!==Ba[2])J.stencilFunc(ud,Kc,bd),Ba[0]=ud,Ba[1]=Kc,Ba[2]=bd;qd=Tc[0];Xb=Tc[1];cc=Tc[2];Qb=Tc[3];if(qd!==G[0]||Xb!==G[1]||cc!==G[2]||Qb!==G[3])J.stencilOpSeparate(qd,Xb,cc,Qb),G[0]=
qd,G[1]=Xb,G[2]=cc,G[3]=Qb;Ga=wb[0];Zb=wb[1];ob=wb[2];Ab=wb[3];if(Ga!==Wc[0]||Zb!==Wc[1]||ob!==Wc[2]||Ab!==Wc[3])J.stencilOpSeparate(Ga,Zb,ob,Ab),Wc[0]=Ga,Wc[1]=Zb,Wc[2]=ob,Wc[3]=Ab}v=b.viewport;u=v.x|0;k=v.y|0;r="width"in v?v.width|0:Qa.framebufferWidth-u;w="height"in v?v.height|0:Qa.framebufferHeight-k;q=Qa.viewportWidth;Qa.viewportWidth=r;A=Qa.viewportHeight;Qa.viewportHeight=w;J.viewport(u,k,r,w);ha[0]=u;ha[1]=k;ha[2]=r;ha[3]=w;J.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;J.enable(3042);
Z.blend_enable=!0;J.blendEquationSeparate(32774,32774);vb[0]=32774;vb[1]=32774;J.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;(X=p.call(this,Qa,b,0))?J.enable(2929):J.disable(2929);Z.depth_enable=X;C=b.viewport;E=C.x|0;D=C.y|0;H="width"in C?C.width|0:Qa.framebufferWidth-E;M="height"in C?C.height|0:Qa.framebufferHeight-D;J.scissor(E,D,H,M);F[0]=E;F[1]=D;F[2]=H;F[3]=M;J.enable(3089);Z.scissor_enable=!0;J.disable(2960);Z.stencil_enable=!1;if(N=Z.profile)B=performance.now(),y.count++;
J.useProgram(P.program);R=U.angle_instanced_arrays;ka.setVAO(null);S.buffer=b.positionBuffer;Q=!1;ba=null;fa=0;na=!1;Ye=Pd=0;Na=1;Ha=0;Cd=5126;me=Wd=Vd=Be=0;Wb(S)?(Q=!0,ba=la.createStream(34962,S),Cd=ba.dtype):(ba=la.getBuffer(S))?Cd=ba.dtype:"constant"in S?(Na=2,"number"===typeof S.constant?(Vd=S.constant,Wd=me=Be=0):(Vd=0<S.constant.length?S.constant[0]:0,Wd=1<S.constant.length?S.constant[1]:0,me=2<S.constant.length?S.constant[2]:0,Be=3<S.constant.length?S.constant[3]:0)):(ba=Wb(S.buffer)?la.createStream(34962,
S.buffer):la.getBuffer(S.buffer),Cd="type"in S?ua[S.type]:ba.dtype,na=!!S.normalized,Ye=S.size|0,Pd=S.offset|0,Ha=S.stride|0,fa=S.divisor|0);Yd=Y.location;pd=xd[Yd];if(1===Na){pd.buffer||J.enableVertexAttribArray(Yd);hd=Ye||2;if(pd.type!==Cd||pd.size!==hd||pd.buffer!==ba||pd.normalized!==na||pd.offset!==Pd||pd.stride!==Ha)J.bindBuffer(34962,ba.buffer),J.vertexAttribPointer(Yd,hd,Cd,na,Ha,Pd),pd.type=Cd,pd.size=hd,pd.buffer=ba,pd.normalized=na,pd.offset=Pd,pd.stride=Ha;pd.divisor!==fa&&(R.vertexAttribDivisorANGLE(Yd,
fa),pd.divisor=fa)}else if(pd.buffer&&(J.disableVertexAttribArray(Yd),pd.buffer=null),pd.x!==Vd||pd.y!==Wd||pd.z!==me||pd.w!==Be)J.vertexAttrib4f(Yd,Vd,Wd,me,Be),pd.x=Vd,pd.y=Wd,pd.z=me,pd.w=Be;qa.buffer=b.positionBuffer;wd=!1;Yc=null;id=0;nc=!1;ed=Gd=0;Jc=1;qc=0;bb=5126;Ta=oc=Fb=Gc=0;Wb(qa)?(wd=!0,Yc=la.createStream(34962,qa),bb=Yc.dtype):(Yc=la.getBuffer(qa))?bb=Yc.dtype:"constant"in qa?(Jc=2,"number"===typeof qa.constant?(Fb=qa.constant,oc=Ta=Gc=0):(Fb=0<qa.constant.length?qa.constant[0]:0,oc=
1<qa.constant.length?qa.constant[1]:0,Ta=2<qa.constant.length?qa.constant[2]:0,Gc=3<qa.constant.length?qa.constant[3]:0)):(Yc=Wb(qa.buffer)?la.createStream(34962,qa.buffer):la.getBuffer(qa.buffer),bb="type"in qa?ua[qa.type]:Yc.dtype,nc=!!qa.normalized,ed=qa.size|0,Gd=qa.offset|0,qc=qa.stride|0,id=qa.divisor|0);Hc=f.location;bc=xd[Hc];if(1===Jc){bc.buffer||J.enableVertexAttribArray(Hc);rc=ed||2;if(bc.type!==bb||bc.size!==rc||bc.buffer!==Yc||bc.normalized!==nc||bc.offset!==Gd||bc.stride!==qc)J.bindBuffer(34962,
Yc.buffer),J.vertexAttribPointer(Hc,rc,bb,nc,qc,Gd),bc.type=bb,bc.size=rc,bc.buffer=Yc,bc.normalized=nc,bc.offset=Gd,bc.stride=qc;bc.divisor!==id&&(R.vertexAttribDivisorANGLE(Hc,id),bc.divisor=id)}else if(bc.buffer&&(J.disableVertexAttribArray(Hc),bc.buffer=null),bc.x!==Fb||bc.y!==oc||bc.z!==Ta||bc.w!==Gc)J.vertexAttrib4f(Hc,Fb,oc,Ta,Gc),bc.x=Fb,bc.y=oc,bc.z=Ta,bc.w=Gc;ga.buffer=b.positionFractBuffer;Jd=!1;Dd=null;yc=0;Yb=!1;Pc=Dc=0;La=1;Gb=0;Wa=5126;Sa=ib=jd=Ca=0;Wb(ga)?(Jd=!0,Dd=la.createStream(34962,
ga),Wa=Dd.dtype):(Dd=la.getBuffer(ga))?Wa=Dd.dtype:"constant"in ga?(La=2,"number"===typeof ga.constant?(jd=ga.constant,ib=Sa=Ca=0):(jd=0<ga.constant.length?ga.constant[0]:0,ib=1<ga.constant.length?ga.constant[1]:0,Sa=2<ga.constant.length?ga.constant[2]:0,Ca=3<ga.constant.length?ga.constant[3]:0)):(Dd=Wb(ga.buffer)?la.createStream(34962,ga.buffer):la.getBuffer(ga.buffer),Wa="type"in ga?ua[ga.type]:Dd.dtype,Yb=!!ga.normalized,Pc=ga.size|0,Dc=ga.offset|0,Gb=ga.stride|0,yc=ga.divisor|0);Ib=h.location;
eb=xd[Ib];if(1===La){eb.buffer||J.enableVertexAttribArray(Ib);Ec=Pc||2;if(eb.type!==Wa||eb.size!==Ec||eb.buffer!==Dd||eb.normalized!==Yb||eb.offset!==Dc||eb.stride!==Gb)J.bindBuffer(34962,Dd.buffer),J.vertexAttribPointer(Ib,Ec,Wa,Yb,Gb,Dc),eb.type=Wa,eb.size=Ec,eb.buffer=Dd,eb.normalized=Yb,eb.offset=Dc,eb.stride=Gb;eb.divisor!==yc&&(R.vertexAttribDivisorANGLE(Ib,yc),eb.divisor=yc)}else if(eb.buffer&&(J.disableVertexAttribArray(Ib),eb.buffer=null),eb.x!==jd||eb.y!==ib||eb.z!==Sa||eb.w!==Ca)J.vertexAttrib4f(Ib,
jd,ib,Sa,Ca),eb.x=jd,eb.y=ib,eb.z=Sa,eb.w=Ca;I.buffer=b.positionFractBuffer;Sb=!1;ae=null;$b=0;Tb=!1;Ub=rd=0;Ma=1;qb=0;xb=5126;Kb=lc=Oa=jb=0;Wb(I)?(Sb=!0,ae=la.createStream(34962,I),xb=ae.dtype):(ae=la.getBuffer(I))?xb=ae.dtype:"constant"in I?(Ma=2,"number"===typeof I.constant?(Oa=I.constant,lc=Kb=jb=0):(Oa=0<I.constant.length?I.constant[0]:0,lc=1<I.constant.length?I.constant[1]:0,Kb=2<I.constant.length?I.constant[2]:0,jb=3<I.constant.length?I.constant[3]:0)):(ae=Wb(I.buffer)?la.createStream(34962,
I.buffer):la.getBuffer(I.buffer),xb="type"in I?ua[I.type]:ae.dtype,Tb=!!I.normalized,Ub=I.size|0,rd=I.offset|0,qb=I.stride|0,$b=I.divisor|0);Zc=e.location;fb=xd[Zc];if(1===Ma){fb.buffer||J.enableVertexAttribArray(Zc);jc=Ub||2;if(fb.type!==xb||fb.size!==jc||fb.buffer!==ae||fb.normalized!==Tb||fb.offset!==rd||fb.stride!==qb)J.bindBuffer(34962,ae.buffer),J.vertexAttribPointer(Zc,jc,xb,Tb,qb,rd),fb.type=xb,fb.size=jc,fb.buffer=ae,fb.normalized=Tb,fb.offset=rd,fb.stride=qb;fb.divisor!==$b&&(R.vertexAttribDivisorANGLE(Zc,
$b),fb.divisor=$b)}else if(fb.buffer&&(J.disableVertexAttribArray(Zc),fb.buffer=null),fb.x!==Oa||fb.y!==lc||fb.z!==Kb||fb.w!==jb)J.vertexAttrib4f(Zc,Oa,lc,Kb,jb),fb.x=Oa,fb.y=lc,fb.z=Kb,fb.w=jb;t.buffer=b.colorBuffer;dd=!1;hc=null;lb=0;mb=!1;rb=ta=0;wa=1;Ua=0;cb=5126;Db=Ia=gb=za=0;Wb(t)?(dd=!0,hc=la.createStream(34962,t),cb=hc.dtype):(hc=la.getBuffer(t))?cb=hc.dtype:"constant"in t?(wa=2,"number"===typeof t.constant?(gb=t.constant,Ia=Db=za=0):(gb=0<t.constant.length?t.constant[0]:0,Ia=1<t.constant.length?
t.constant[1]:0,Db=2<t.constant.length?t.constant[2]:0,za=3<t.constant.length?t.constant[3]:0)):(hc=Wb(t.buffer)?la.createStream(34962,t.buffer):la.getBuffer(t.buffer),cb="type"in t?ua[t.type]:hc.dtype,mb=!!t.normalized,rb=t.size|0,ta=t.offset|0,Ua=t.stride|0,lb=t.divisor|0);Cb=l.location;Ra=xd[Cb];if(1===wa){Ra.buffer||J.enableVertexAttribArray(Cb);Ic=rb||4;if(Ra.type!==cb||Ra.size!==Ic||Ra.buffer!==hc||Ra.normalized!==mb||Ra.offset!==ta||Ra.stride!==Ua)J.bindBuffer(34962,hc.buffer),J.vertexAttribPointer(Cb,
Ic,cb,mb,Ua,ta),Ra.type=cb,Ra.size=Ic,Ra.buffer=hc,Ra.normalized=mb,Ra.offset=ta,Ra.stride=Ua;Ra.divisor!==lb&&(R.vertexAttribDivisorANGLE(Cb,lb),Ra.divisor=lb)}else if(Ra.buffer&&(J.disableVertexAttribArray(Cb),Ra.buffer=null),Ra.x!==gb||Ra.y!==Ia||Ra.z!==Db||Ra.w!==za)J.vertexAttrib4f(Cb,gb,Ia,Db,za),Ra.x=gb,Ra.y=Ia,Ra.z=Db,Ra.w=za;Lb=pa.location;$a=xd[Lb];$a.buffer||J.enableVertexAttribArray(Lb);if(5126!==$a.type||1!==$a.size||$a.buffer!==g||!1!==$a.normalized||0!==$a.offset||8!==$a.stride)J.bindBuffer(34962,
g.buffer),J.vertexAttribPointer(Lb,1,5126,!1,8,0),$a.type=5126,$a.size=1,$a.buffer=g,$a.normalized=!1,$a.offset=0,$a.stride=8;0!==$a.divisor&&(R.vertexAttribDivisorANGLE(Lb,0),$a.divisor=0);Vb=K.location;xa=xd[Vb];xa.buffer||J.enableVertexAttribArray(Vb);if(5126!==xa.type||1!==xa.size||xa.buffer!==d||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer(Vb,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=d,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&
(R.vertexAttribDivisorANGLE(Vb,0),xa.divisor=0);Ad=b.scale;J.uniform2f(a.location,Ad[0],Ad[1]);Ja=b.scaleFract;J.uniform2f(n.location,Ja[0],Ja[1]);Pb=b.translate;J.uniform2f(ma.location,Pb[0],Pb[1]);hb=b.translateFract;J.uniform2f(Ka.location,hb[0],hb[1]);J.uniform1f(W.location,b.thickness);J.uniform1f(m.location,b.depth);kb=z.call(this,Qa,b,0);J.uniform4f(db.location,kb[0],kb[1],kb[2],kb[3]);J.uniform1f(T.location,b.dashLength);J.uniform1f(da.location,b.opacity);(ya=b.dashTexture)&&"framebuffer"===
ya._reglType&&(ya=ya.color[0]);dc=ya._texture;J.uniform1i(aa.location,dc.bind());(Da=L.elements)?J.bindBuffer(34963,Da.buffer.buffer):ka.currentVAO&&(Da=O.getElements(ka.currentVAO.elements))&&J.bindBuffer(34963,Da.buffer.buffer);sb=b.count;0<sb?Da?R.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),sb):R.drawArraysInstancedANGLE(5,0,4,sb):0>sb&&(Da?J.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):J.drawArrays(5,0,4));Z.dirty=!0;ka.setVAO(null);Qa.viewportWidth=q;Qa.viewportHeight=A;N&&
(y.cpuTime+=performance.now()-B);Q&&la.destroyStream(ba);wd&&la.destroyStream(Yc);Jd&&la.destroyStream(Dd);Sb&&la.destroyStream(ae);dd&&la.destroyStream(hc);dc.unbind()},scope:function(a,c,e){var f,k,h,l,q,m,n,p,F,z,A,G,P,K,O,N,J,Q,U,V,T,ja,aa,ha,W,ea,ka,pc,Ba,da,pa,va,ra,td,Y,ma,ed,Jc,qc,bb,tc,Fb,oc,Ta,Hc,bc,rc,wb,Wc,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,ac,ib,Sa,Ib,eb,Ea,Sb,ic,$b,Tb,Ka,Ub,Ma,qb,xb,jb,Oa,lc,Kb,pb,fb,jc,db,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Tc,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,
Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,vb,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Za,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,sd,vd,xd,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,Se,Ie,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Xe,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,Oe,Ke;f=a.viewport;k=f.x|0;h=f.y|0;l="width"in f?f.width|0:Qa.framebufferWidth-k;q="height"in f?f.height|0:Qa.framebufferHeight-h;m=Qa.viewportWidth;Qa.viewportWidth=l;n=Qa.viewportHeight;
Qa.viewportHeight=q;p=v[0];v[0]=k;F=v[1];v[1]=h;z=v[2];v[2]=l;A=v[3];v[3]=q;G=ba[0];ba[0]=0;P=ba[1];ba[1]=0;K=ba[2];ba[2]=0;O=ba[3];ba[3]=0;N=ab.blend_enable;ab.blend_enable=!0;J=Na[0];Na[0]=32774;Q=Na[1];Na[1]=32774;U=Ha[0];Ha[0]=770;V=Ha[1];Ha[1]=771;T=Ha[2];Ha[2]=773;ja=Ha[3];Ha[3]=1;aa=b.call(this,Qa,a,e);ha=ab.depth_enable;ab.depth_enable=aa;W=a.viewport;ea=W.x|0;ka=W.y|0;pc="width"in W?W.width|0:Qa.framebufferWidth-ea;Ba="height"in W?W.height|0:Qa.framebufferHeight-ka;da=X[0];X[0]=ea;pa=X[1];
X[1]=ka;va=X[2];X[2]=pc;ra=X[3];X[3]=Ba;td=ab.scissor_enable;ab.scissor_enable=!0;Y=ab.stencil_enable;ab.stencil_enable=!1;if(ma=Z.profile)ed=performance.now(),y.count++;Jc=L.offset;L.offset=0;qc=L.count;L.count=4;bb=a.count;tc=L.instances;L.instances=bb;Fb=L.primitive;L.primitive=5;oc=a.dashLength;Ta=u[23];u[23]=oc;Hc=a.dashTexture;bc=u[24];u[24]=Hc;rc=a.depth;wb=u[22];u[22]=rc;Wc=a.id;yc=u[31];u[31]=Wc;Yb=a.miterLimit;Dc=u[32];u[32]=Yb;Pc=w.call(this,Qa,a,e);La=u[33];u[33]=Pc;Gb=a.opacity;Wa=u[10];
u[10]=Gb;Ca=Qa.pixelRatio;ac=u[34];u[34]=Ca;ib=a.scale;Sa=u[6];u[6]=ib;Ib=a.scaleFract;eb=u[7];u[7]=Ib;Ea=a.thickness;Sb=u[21];u[21]=Ea;ic=a.translate;$b=u[8];u[8]=ic;Tb=a.translateFract;Ka=u[9];u[9]=Tb;Ub=B.call(this,Qa,a,e);Ma=u[3];u[3]=Ub;S.buffer=a.positionBuffer;qb=!1;xb=null;jb=0;Oa=!1;Kb=lc=0;pb=1;fb=0;jc=5126;mb=lb=hc=db=0;Wb(S)?(qb=!0,xb=la.createStream(34962,S),jc=xb.dtype):(xb=la.getBuffer(S))?jc=xb.dtype:"constant"in S?(pb=2,"number"===typeof S.constant?(hc=S.constant,lb=mb=db=0):(hc=
0<S.constant.length?S.constant[0]:0,lb=1<S.constant.length?S.constant[1]:0,mb=2<S.constant.length?S.constant[2]:0,db=3<S.constant.length?S.constant[3]:0)):(xb=Wb(S.buffer)?la.createStream(34962,S.buffer):la.getBuffer(S.buffer),jc="type"in S?ua[S.type]:xb.dtype,Oa=!!S.normalized,Kb=S.size|0,lc=S.offset|0,fb=S.stride|0,jb=S.divisor|0);ta=fa.buffer;fa.buffer=xb;rb=fa.divisor;fa.divisor=jb;wa=fa.normalized;fa.normalized=Oa;Ua=fa.offset;fa.offset=lc;cb=fa.size;fa.size=Kb;za=fa.state;fa.state=pb;gb=fa.stride;
fa.stride=fb;Ia=fa.type;fa.type=jc;Db=fa.w;fa.w=db;Cb=fa.x;fa.x=hc;Ra=fa.y;fa.y=lb;Ic=fa.z;fa.z=mb;ga.buffer=a.positionFractBuffer;Lb=!1;$a=null;Vb=0;xa=!1;Ja=Tc=0;Pb=1;hb=0;kb=5126;sb=Da=dc=ya=0;Wb(ga)?(Lb=!0,$a=la.createStream(34962,ga),kb=$a.dtype):($a=la.getBuffer(ga))?kb=$a.dtype:"constant"in ga?(Pb=2,"number"===typeof ga.constant?(dc=ga.constant,Da=sb=ya=0):(dc=0<ga.constant.length?ga.constant[0]:0,Da=1<ga.constant.length?ga.constant[1]:0,sb=2<ga.constant.length?ga.constant[2]:0,ya=3<ga.constant.length?
ga.constant[3]:0)):($a=Wb(ga.buffer)?la.createStream(34962,ga.buffer):la.getBuffer(ga.buffer),kb="type"in ga?ua[ga.type]:$a.dtype,xa=!!ga.normalized,Ja=ga.size|0,Tc=ga.offset|0,hb=ga.stride|0,Vb=ga.divisor|0);tb=M.buffer;M.buffer=$a;Xa=M.divisor;M.divisor=Vb;Ya=M.normalized;M.normalized=xa;kc=M.offset;M.offset=Tc;ad=M.size;M.size=Ja;uc=M.state;M.state=Pb;Va=M.stride;M.stride=hb;Nb=M.type;M.type=kb;Oc=M.w;M.w=ya;Fa=M.x;M.x=dc;wc=M.y;M.y=Da;Pa=M.z;M.z=sb;qa.buffer=a.positionBuffer;Aa=!1;nb=null;yb=
0;Eb=!1;vc=ub=0;zb=1;vb=0;sc=5126;qd=bd=Kc=ud=0;Wb(qa)?(Aa=!0,nb=la.createStream(34962,qa),sc=nb.dtype):(nb=la.getBuffer(qa))?sc=nb.dtype:"constant"in qa?(zb=2,"number"===typeof qa.constant?(Kc=qa.constant,bd=qd=ud=0):(Kc=0<qa.constant.length?qa.constant[0]:0,bd=1<qa.constant.length?qa.constant[1]:0,qd=2<qa.constant.length?qa.constant[2]:0,ud=3<qa.constant.length?qa.constant[3]:0)):(nb=Wb(qa.buffer)?la.createStream(34962,qa.buffer):la.getBuffer(qa.buffer),sc="type"in qa?ua[qa.type]:nb.dtype,Eb=!!qa.normalized,
vc=qa.size|0,ub=qa.offset|0,vb=qa.stride|0,yb=qa.divisor|0);Xb=H.buffer;H.buffer=nb;cc=H.divisor;H.divisor=yb;Qb=H.normalized;H.normalized=Eb;Ga=H.offset;H.offset=ub;Zb=H.size;H.size=vc;ob=H.state;H.state=zb;Ab=H.stride;H.stride=vb;Ob=H.type;H.type=sc;Rb=H.w;H.w=ud;ec=H.x;H.x=Kc;gc=H.y;H.y=bd;Za=H.z;H.z=qd;I.buffer=a.positionFractBuffer;zc=!1;Ac=null;Bc=0;Lc=!1;Qc=Xc=0;Mc=1;Mb=0;Hb=5126;fc=Rc=Fc=Nc=0;Wb(I)?(zc=!0,Ac=la.createStream(34962,I),Hb=Ac.dtype):(Ac=la.getBuffer(I))?Hb=Ac.dtype:"constant"in
I?(Mc=2,"number"===typeof I.constant?(Fc=I.constant,Rc=fc=Nc=0):(Fc=0<I.constant.length?I.constant[0]:0,Rc=1<I.constant.length?I.constant[1]:0,fc=2<I.constant.length?I.constant[2]:0,Nc=3<I.constant.length?I.constant[3]:0)):(Ac=Wb(I.buffer)?la.createStream(34962,I.buffer):la.getBuffer(I.buffer),Hb="type"in I?ua[I.type]:Ac.dtype,Lc=!!I.normalized,Qc=I.size|0,Xc=I.offset|0,Mb=I.stride|0,Bc=I.divisor|0);Uc=r.buffer;r.buffer=Ac;kd=r.divisor;r.divisor=Bc;fd=r.normalized;r.normalized=Lc;md=r.offset;r.offset=
Xc;Vc=r.size;r.size=Qc;sd=r.state;r.state=Mc;vd=r.stride;r.stride=Mb;xd=r.type;r.type=Hb;te=r.w;r.w=Nc;ne=r.x;r.x=Fc;Md=r.y;r.y=Rc;Kd=r.z;r.z=fc;t.buffer=a.colorBuffer;cd=!1;Cc=null;ld=0;gd=!1;nd=$c=0;zd=1;Bd=0;Se=5126;ee=fe=we=Ie=0;Wb(t)?(cd=!0,Cc=la.createStream(34962,t),Se=Cc.dtype):(Cc=la.getBuffer(t))?Se=Cc.dtype:"constant"in t?(zd=2,"number"===typeof t.constant?(we=t.constant,fe=ee=Ie=0):(we=0<t.constant.length?t.constant[0]:0,fe=1<t.constant.length?t.constant[1]:0,ee=2<t.constant.length?t.constant[2]:
0,Ie=3<t.constant.length?t.constant[3]:0)):(Cc=Wb(t.buffer)?la.createStream(34962,t.buffer):la.getBuffer(t.buffer),Se="type"in t?ua[t.type]:Cc.dtype,gd=!!t.normalized,nd=t.size|0,$c=t.offset|0,Bd=t.stride|0,ld=t.divisor|0);de=D.buffer;D.buffer=Cc;qe=D.divisor;D.divisor=ld;be=D.normalized;D.normalized=gd;he=D.offset;D.offset=$c;xc=D.size;D.size=nd;Sc=D.state;D.state=zd;re=D.stride;D.stride=Bd;ke=D.type;D.type=Se;Ld=D.w;D.w=Ie;Od=D.x;D.x=we;Qd=D.y;D.y=fe;Rd=D.z;D.z=ee;ie=C.buffer;C.buffer=g;Ce=C.divisor;
C.divisor=0;Xe=C.normalized;C.normalized=!1;oe=C.offset;C.offset=0;Me=C.size;C.size=0;Ne=C.state;C.state=1;Je=C.stride;C.stride=8;se=C.type;C.type=5126;ze=C.w;C.w=0;De=C.x;C.x=0;Ee=C.y;C.y=0;Fe=C.z;C.z=0;Ae=E.buffer;E.buffer=d;Nd=E.divisor;E.divisor=0;Ud=E.normalized;E.normalized=!1;Zd=E.offset;E.offset=4;ce=E.size;E.size=0;Ge=E.state;E.state=1;Fd=E.stride;E.stride=8;Sd=E.type;E.type=5126;xe=E.w;E.w=0;He=E.x;E.x=0;ef=E.y;E.y=0;We=E.z;E.z=0;Oe=R.vert;R.vert=20;Ke=R.frag;R.frag=19;Z.dirty=!0;c(Qa,a,
e);Qa.viewportWidth=m;Qa.viewportHeight=n;v[0]=p;v[1]=F;v[2]=z;v[3]=A;ba[0]=G;ba[1]=P;ba[2]=K;ba[3]=O;ab.blend_enable=N;Na[0]=J;Na[1]=Q;Ha[0]=U;Ha[1]=V;Ha[2]=T;Ha[3]=ja;ab.depth_enable=ha;X[0]=da;X[1]=pa;X[2]=va;X[3]=ra;ab.scissor_enable=td;ab.stencil_enable=Y;ma&&(y.cpuTime+=performance.now()-ed);L.offset=Jc;L.count=qc;L.instances=tc;L.primitive=Fb;u[23]=Ta;u[24]=bc;u[22]=wb;u[31]=yc;u[32]=Dc;u[33]=La;u[10]=Wa;u[34]=ac;u[6]=Sa;u[7]=eb;u[21]=Sb;u[8]=$b;u[9]=Ka;u[3]=Ma;qb&&la.destroyStream(xb);fa.buffer=
ta;fa.divisor=rb;fa.normalized=wa;fa.offset=Ua;fa.size=cb;fa.state=za;fa.stride=gb;fa.type=Ia;fa.w=Db;fa.x=Cb;fa.y=Ra;fa.z=Ic;Lb&&la.destroyStream($a);M.buffer=tb;M.divisor=Xa;M.normalized=Ya;M.offset=kc;M.size=ad;M.state=uc;M.stride=Va;M.type=Nb;M.w=Oc;M.x=Fa;M.y=wc;M.z=Pa;Aa&&la.destroyStream(nb);H.buffer=Xb;H.divisor=cc;H.normalized=Qb;H.offset=Ga;H.size=Zb;H.state=ob;H.stride=Ab;H.type=Ob;H.w=Rb;H.x=ec;H.y=gc;H.z=Za;zc&&la.destroyStream(Ac);r.buffer=Uc;r.divisor=kd;r.normalized=fd;r.offset=md;
r.size=Vc;r.state=sd;r.stride=vd;r.type=xd;r.w=te;r.x=ne;r.y=Md;r.z=Kd;cd&&la.destroyStream(Cc);D.buffer=de;D.divisor=qe;D.normalized=be;D.offset=he;D.size=xc;D.state=Sc;D.stride=re;D.type=ke;D.w=Ld;D.x=Od;D.y=Qd;D.z=Rd;C.buffer=ie;C.divisor=Ce;C.normalized=Xe;C.offset=oe;C.size=Me;C.state=Ne;C.stride=Je;C.type=se;C.w=ze;C.x=De;C.y=Ee;C.z=Fe;E.buffer=Ae;E.divisor=Nd;E.normalized=Ud;E.offset=Zd;E.size=ce;E.state=Ge;E.stride=Fd;E.type=Sd;E.w=xe;E.x=He;E.y=ef;E.z=We;R.vert=Oe;R.frag=Ke;Z.dirty=!0}}},
"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(c,y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db,Za,la,Qa,Z){var L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va,ac,pc,ic,td,tc,X,F,ja,Ba,wb,Wc,Tc,G,v,ha,ua,S,ga,qa,I,t,ca,x,sa,oa,k;L=c.attributes;O=c.buffer;U=c.context;ra=c.current;J=c.draw;Wb=c.elements;ab=c.extensions;R=c.framebuffer;u=c.gl;
ka=c.isBufferArgs;ba=c.next;Ea=c.shader;Na=c.uniforms;vb=c.vao;Ha=ba.blend_color;V=ra.blend_color;pb=ba.blend_equation;ea=ra.blend_equation;va=ba.blend_func;ac=ra.blend_func;pc=ba.colorMask;ic=ra.colorMask;td=ba.depth_range;tc=ra.depth_range;X=ba.polygonOffset_offset;F=ra.polygonOffset_offset;ja=ba.sample_coverage;Ba=ra.sample_coverage;wb=ba.scissor_box;Wc=ra.scissor_box;Tc=ba.stencil_func;G=ra.stencil_func;v=ba.stencil_opBack;ha=ra.stencil_opBack;ua=ba.stencil_opFront;S=ra.stencil_opFront;ga=ba.viewport;
qa=ra.viewport;I={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};t={divisor:1,offset:0,stride:4};ca={divisor:1,offset:8,stride:8};x={divisor:1,offset:4,stride:4};sa={divisor:1,offset:16,stride:8};oa={divisor:1,offset:24,stride:8};k={divisor:1,offset:0,stride:8};return{batch:function(b,c){var q,p,r,w,z,A;q=R.next;q!==R.cur&&(q?u.bindFramebuffer(36160,q.framebuffer):u.bindFramebuffer(36160,null),R.cur=q);if(ra.dirty){var C,E,P,D,H,M,B,Q,ga,fa,va,na,wb,
Ea,Na,Vd,Wd,Ha,pb,pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb;C=ba.dither;C!==ra.dither&&(C?u.enable(3024):u.disable(3024),ra.dither=C);E=ba.depth_func;E!==ra.depth_func&&(u.depthFunc(E),ra.depth_func=E);P=td[0];D=td[1];if(P!==tc[0]||D!==tc[1])u.depthRange(P,D),tc[0]=P,tc[1]=D;H=ba.depth_mask;H!==ra.depth_mask&&(u.depthMask(H),ra.depth_mask=H);M=pc[0];B=pc[1];Q=pc[2];ga=pc[3];if(M!==ic[0]||B!==ic[1]||Q!==ic[2]||ga!==ic[3])u.colorMask(M,B,Q,ga),ic[0]=M,ic[1]=B,ic[2]=Q,ic[3]=ga;fa=ba.frontFace;fa!==ra.frontFace&&
(u.frontFace(fa),ra.frontFace=fa);va=ba.lineWidth;va!==ra.lineWidth&&(u.lineWidth(va),ra.lineWidth=va);na=ba.polygonOffset_enable;na!==ra.polygonOffset_enable&&(na?u.enable(32823):u.disable(32823),ra.polygonOffset_enable=na);wb=X[0];Ea=X[1];if(wb!==F[0]||Ea!==F[1])u.polygonOffset(wb,Ea),F[0]=wb,F[1]=Ea;Na=ba.sample_alpha;Na!==ra.sample_alpha&&(Na?u.enable(32926):u.disable(32926),ra.sample_alpha=Na);Vd=ba.sample_enable;Vd!==ra.sample_enable&&(Vd?u.enable(32928):u.disable(32928),ra.sample_enable=Vd);
Wd=ja[0];Ha=ja[1];if(Wd!==Ba[0]||Ha!==Ba[1])u.sampleCoverage(Wd,Ha),Ba[0]=Wd,Ba[1]=Ha;pb=ba.stencil_mask;pb!==ra.stencil_mask&&(u.stencilMask(pb),ra.stencil_mask=pb);pd=Tc[0];hd=Tc[1];wd=Tc[2];if(pd!==G[0]||hd!==G[1]||wd!==G[2])u.stencilFunc(pd,hd,wd),G[0]=pd,G[1]=hd,G[2]=wd;Yc=ua[0];id=ua[1];nc=ua[2];Gd=ua[3];if(Yc!==S[0]||id!==S[1]||nc!==S[2]||Gd!==S[3])u.stencilOpSeparate(Yc,id,nc,Gd),S[0]=Yc,S[1]=id,S[2]=nc,S[3]=Gd;ed=v[0];Jc=v[1];qc=v[2];bb=v[3];if(ed!==ha[0]||Jc!==ha[1]||qc!==ha[2]||bb!==ha[3])u.stencilOpSeparate(ed,
Jc,qc,bb),ha[0]=ed,ha[1]=Jc,ha[2]=qc,ha[3]=bb}u.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;u.enable(3042);ra.blend_enable=!0;u.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;u.blendFuncSeparate(770,771,773,1);ac[0]=770;ac[1]=771;ac[2]=773;ac[3]=1;u.enable(2884);ra.cull_enable=!0;u.cullFace(1029);ra.cull_face=1029;u.enable(3089);ra.scissor_enable=!0;u.disable(2960);ra.stencil_enable=!1;if(p=ra.profile)r=performance.now(),y.count+=c;u.useProgram(N.program);w=ab.angle_instanced_arrays;
var Gc,Fb,oc,Ta,Hc;vb.setVAO(null);Gc=da.location;Fb=L[Gc];Fb.buffer||u.enableVertexAttribArray(Gc);if(5126!==Fb.type||1!==Fb.size||Fb.buffer!==g||!1!==Fb.normalized||0!==Fb.offset||8!==Fb.stride)u.bindBuffer(34962,g.buffer),u.vertexAttribPointer(Gc,1,5126,!1,8,0),Fb.type=5126,Fb.size=1,Fb.buffer=g,Fb.normalized=!1,Fb.offset=0,Fb.stride=8;0!==Fb.divisor&&(w.vertexAttribDivisorANGLE(Gc,0),Fb.divisor=0);oc=a.location;Ta=L[oc];Ta.buffer||u.enableVertexAttribArray(oc);if(5126!==Ta.type||1!==Ta.size||
Ta.buffer!==d||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)u.bindBuffer(34962,d.buffer),u.vertexAttribPointer(oc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=d,Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(w.vertexAttribDivisorANGLE(oc,0),Ta.divisor=0);(Hc=J.elements)?u.bindBuffer(34963,Hc.buffer.buffer):vb.currentVAO&&(Hc=Wb.getElements(vb.currentVAO.elements))&&u.bindBuffer(34963,Hc.buffer.buffer);for(z=0;z<c;++z){A=b[z];var bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,
Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Pf,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,Og,vd,zf,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,Se,Ie,we,fe,ee,de,qe,be,he,xc;bc=A.viewport;rc=bc.x|0;Jd=bc.y|0;Dd="width"in bc?bc.width|0:U.framebufferWidth-rc;yc="height"in bc?bc.height|0:U.framebufferHeight-
Jd;Yb=U.viewportWidth;U.viewportWidth=Dd;Dc=U.viewportHeight;U.viewportHeight=yc;u.viewport(rc,Jd,Dd,yc);qa[0]=rc;qa[1]=Jd;qa[2]=Dd;qa[3]=yc;(Pc=Y.call(this,U,A,z))?u.enable(2929):u.disable(2929);ra.depth_enable=Pc;La=A.viewport;Gb=La.x|0;Wa=La.y|0;Ca="width"in La?La.width|0:U.framebufferWidth-Gb;jd="height"in La?La.height|0:U.framebufferHeight-Wa;u.scissor(Gb,Wa,Ca,jd);Wc[0]=Gb;Wc[1]=Wa;Wc[2]=Ca;Wc[3]=jd;ca.buffer=A.positionBuffer;ib=!1;Sa=null;Ib=0;eb=!1;Sb=Ec=0;ae=1;$b=0;Tb=5126;qb=Ma=Ub=rd=0;
ka(ca)?(ib=!0,Sa=O.createStream(34962,ca),Tb=Sa.dtype):(Sa=O.getBuffer(ca))?Tb=Sa.dtype:"constant"in ca?(ae=2,"number"===typeof ca.constant?(Ub=ca.constant,Ma=qb=rd=0):(Ub=0<ca.constant.length?ca.constant[0]:0,Ma=1<ca.constant.length?ca.constant[1]:0,qb=2<ca.constant.length?ca.constant[2]:0,rd=3<ca.constant.length?ca.constant[3]:0)):(Sa=ka(ca.buffer)?O.createStream(34962,ca.buffer):O.getBuffer(ca.buffer),Tb="type"in ca?I[ca.type]:Sa.dtype,eb=!!ca.normalized,Sb=ca.size|0,Ec=ca.offset|0,$b=ca.stride|
0,Ib=ca.divisor|0);xb=l.location;jb=L[xb];if(1===ae){jb.buffer||u.enableVertexAttribArray(xb);Oa=Sb||2;if(jb.type!==Tb||jb.size!==Oa||jb.buffer!==Sa||jb.normalized!==eb||jb.offset!==Ec||jb.stride!==$b)u.bindBuffer(34962,Sa.buffer),u.vertexAttribPointer(xb,Oa,Tb,eb,$b,Ec),jb.type=Tb,jb.size=Oa,jb.buffer=Sa,jb.normalized=eb,jb.offset=Ec,jb.stride=$b;jb.divisor!==Ib&&(w.vertexAttribDivisorANGLE(xb,Ib),jb.divisor=Ib)}else if(jb.buffer&&(u.disableVertexAttribArray(xb),jb.buffer=null),jb.x!==Ub||jb.y!==
Ma||jb.z!==qb||jb.w!==rd)u.vertexAttrib4f(xb,Ub,Ma,qb,rd),jb.x=Ub,jb.y=Ma,jb.z=qb,jb.w=rd;sa.buffer=A.positionBuffer;lc=!1;Kb=null;Zc=0;fb=!1;dd=jc=0;hc=1;lb=0;mb=5126;Ua=wa=rb=ta=0;ka(sa)?(lc=!0,Kb=O.createStream(34962,sa),mb=Kb.dtype):(Kb=O.getBuffer(sa))?mb=Kb.dtype:"constant"in sa?(hc=2,"number"===typeof sa.constant?(rb=sa.constant,wa=Ua=ta=0):(rb=0<sa.constant.length?sa.constant[0]:0,wa=1<sa.constant.length?sa.constant[1]:0,Ua=2<sa.constant.length?sa.constant[2]:0,ta=3<sa.constant.length?sa.constant[3]:
0)):(Kb=ka(sa.buffer)?O.createStream(34962,sa.buffer):O.getBuffer(sa.buffer),mb="type"in sa?I[sa.type]:Kb.dtype,fb=!!sa.normalized,dd=sa.size|0,jc=sa.offset|0,lb=sa.stride|0,Zc=sa.divisor|0);cb=aa.location;za=L[cb];if(1===hc){za.buffer||u.enableVertexAttribArray(cb);gb=dd||2;if(za.type!==mb||za.size!==gb||za.buffer!==Kb||za.normalized!==fb||za.offset!==jc||za.stride!==lb)u.bindBuffer(34962,Kb.buffer),u.vertexAttribPointer(cb,gb,mb,fb,lb,jc),za.type=mb,za.size=gb,za.buffer=Kb,za.normalized=fb,za.offset=
jc,za.stride=lb;za.divisor!==Zc&&(w.vertexAttribDivisorANGLE(cb,Zc),za.divisor=Zc)}else if(za.buffer&&(u.disableVertexAttribArray(cb),za.buffer=null),za.x!==rb||za.y!==wa||za.z!==Ua||za.w!==ta)u.vertexAttrib4f(cb,rb,wa,Ua,ta),za.x=rb,za.y=wa,za.z=Ua,za.w=ta;oa.buffer=A.positionBuffer;Ia=!1;Db=null;Cb=0;Ra=!1;Lb=Ic=0;$a=1;Vb=0;xa=5126;hb=Pb=Ja=Ad=0;ka(oa)?(Ia=!0,Db=O.createStream(34962,oa),xa=Db.dtype):(Db=O.getBuffer(oa))?xa=Db.dtype:"constant"in oa?($a=2,"number"===typeof oa.constant?(Ja=oa.constant,
Pb=hb=Ad=0):(Ja=0<oa.constant.length?oa.constant[0]:0,Pb=1<oa.constant.length?oa.constant[1]:0,hb=2<oa.constant.length?oa.constant[2]:0,Ad=3<oa.constant.length?oa.constant[3]:0)):(Db=ka(oa.buffer)?O.createStream(34962,oa.buffer):O.getBuffer(oa.buffer),xa="type"in oa?I[oa.type]:Db.dtype,Ra=!!oa.normalized,Lb=oa.size|0,Ic=oa.offset|0,Vb=oa.stride|0,Cb=oa.divisor|0);kb=ma.location;ya=L[kb];if(1===$a){ya.buffer||u.enableVertexAttribArray(kb);dc=Lb||2;if(ya.type!==xa||ya.size!==dc||ya.buffer!==Db||ya.normalized!==
Ra||ya.offset!==Ic||ya.stride!==Vb)u.bindBuffer(34962,Db.buffer),u.vertexAttribPointer(kb,dc,xa,Ra,Vb,Ic),ya.type=xa,ya.size=dc,ya.buffer=Db,ya.normalized=Ra,ya.offset=Ic,ya.stride=Vb;ya.divisor!==Cb&&(w.vertexAttribDivisorANGLE(kb,Cb),ya.divisor=Cb)}else if(ya.buffer&&(u.disableVertexAttribArray(kb),ya.buffer=null),ya.x!==Ja||ya.y!==Pb||ya.z!==hb||ya.w!==Ad)u.vertexAttrib4f(kb,Ja,Pb,hb,Ad),ya.x=Ja,ya.y=Pb,ya.z=hb,ya.w=Ad;k.buffer=A.positionBuffer;Da=!1;sb=null;tb=0;Xa=!1;kc=Ya=0;ad=1;uc=0;Va=5126;
wc=Fa=Oc=Nb=0;ka(k)?(Da=!0,sb=O.createStream(34962,k),Va=sb.dtype):(sb=O.getBuffer(k))?Va=sb.dtype:"constant"in k?(ad=2,"number"===typeof k.constant?(Oc=k.constant,Fa=wc=Nb=0):(Oc=0<k.constant.length?k.constant[0]:0,Fa=1<k.constant.length?k.constant[1]:0,wc=2<k.constant.length?k.constant[2]:0,Nb=3<k.constant.length?k.constant[3]:0)):(sb=ka(k.buffer)?O.createStream(34962,k.buffer):O.getBuffer(k.buffer),Va="type"in k?I[k.type]:sb.dtype,Xa=!!k.normalized,kc=k.size|0,Ya=k.offset|0,uc=k.stride|0,tb=k.divisor|
0);Pa=db.location;Aa=L[Pa];if(1===ad){Aa.buffer||u.enableVertexAttribArray(Pa);nb=kc||2;if(Aa.type!==Va||Aa.size!==nb||Aa.buffer!==sb||Aa.normalized!==Xa||Aa.offset!==Ya||Aa.stride!==uc)u.bindBuffer(34962,sb.buffer),u.vertexAttribPointer(Pa,nb,Va,Xa,uc,Ya),Aa.type=Va,Aa.size=nb,Aa.buffer=sb,Aa.normalized=Xa,Aa.offset=Ya,Aa.stride=uc;Aa.divisor!==tb&&(w.vertexAttribDivisorANGLE(Pa,tb),Aa.divisor=tb)}else if(Aa.buffer&&(u.disableVertexAttribArray(Pa),Aa.buffer=null),Aa.x!==Oc||Aa.y!==Fa||Aa.z!==wc||
Aa.w!==Nb)u.vertexAttrib4f(Pa,Oc,Fa,wc,Nb),Aa.x=Oc,Aa.y=Fa,Aa.z=wc,Aa.w=Nb;t.buffer=A.colorBuffer;yb=!1;Eb=null;ub=0;vc=!1;Ed=zb=0;sc=1;ud=0;Kc=5126;cc=Xb=qd=bd=0;ka(t)?(yb=!0,Eb=O.createStream(34962,t),Kc=Eb.dtype):(Eb=O.getBuffer(t))?Kc=Eb.dtype:"constant"in t?(sc=2,"number"===typeof t.constant?(qd=t.constant,Xb=cc=bd=0):(qd=0<t.constant.length?t.constant[0]:0,Xb=1<t.constant.length?t.constant[1]:0,cc=2<t.constant.length?t.constant[2]:0,bd=3<t.constant.length?t.constant[3]:0)):(Eb=ka(t.buffer)?
O.createStream(34962,t.buffer):O.getBuffer(t.buffer),Kc="type"in t?I[t.type]:Eb.dtype,vc=!!t.normalized,Ed=t.size|0,zb=t.offset|0,ud=t.stride|0,ub=t.divisor|0);Qb=e.location;Ga=L[Qb];if(1===sc){Ga.buffer||u.enableVertexAttribArray(Qb);Zb=Ed||4;if(Ga.type!==Kc||Ga.size!==Zb||Ga.buffer!==Eb||Ga.normalized!==vc||Ga.offset!==zb||Ga.stride!==ud)u.bindBuffer(34962,Eb.buffer),u.vertexAttribPointer(Qb,Zb,Kc,vc,ud,zb),Ga.type=Kc,Ga.size=Zb,Ga.buffer=Eb,Ga.normalized=vc,Ga.offset=zb,Ga.stride=ud;Ga.divisor!==
ub&&(w.vertexAttribDivisorANGLE(Qb,ub),Ga.divisor=ub)}else if(Ga.buffer&&(u.disableVertexAttribArray(Qb),Ga.buffer=null),Ga.x!==qd||Ga.y!==Xb||Ga.z!==cc||Ga.w!==bd)u.vertexAttrib4f(Qb,qd,Xb,cc,bd),Ga.x=qd,Ga.y=Xb,Ga.z=cc,Ga.w=bd;x.buffer=A.colorBuffer;ob=!1;Ab=null;Ob=0;Rb=!1;gc=ec=0;Pf=1;zc=0;Ac=5126;Qc=Xc=Lc=Bc=0;ka(x)?(ob=!0,Ab=O.createStream(34962,x),Ac=Ab.dtype):(Ab=O.getBuffer(x))?Ac=Ab.dtype:"constant"in x?(Pf=2,"number"===typeof x.constant?(Lc=x.constant,Xc=Qc=Bc=0):(Lc=0<x.constant.length?
x.constant[0]:0,Xc=1<x.constant.length?x.constant[1]:0,Qc=2<x.constant.length?x.constant[2]:0,Bc=3<x.constant.length?x.constant[3]:0)):(Ab=ka(x.buffer)?O.createStream(34962,x.buffer):O.getBuffer(x.buffer),Ac="type"in x?I[x.type]:Ab.dtype,Rb=!!x.normalized,gc=x.size|0,ec=x.offset|0,zc=x.stride|0,Ob=x.divisor|0);Mc=T.location;Mb=L[Mc];if(1===Pf){Mb.buffer||u.enableVertexAttribArray(Mc);Hb=gc||4;if(Mb.type!==Ac||Mb.size!==Hb||Mb.buffer!==Ab||Mb.normalized!==Rb||Mb.offset!==ec||Mb.stride!==zc)u.bindBuffer(34962,
Ab.buffer),u.vertexAttribPointer(Mc,Hb,Ac,Rb,zc,ec),Mb.type=Ac,Mb.size=Hb,Mb.buffer=Ab,Mb.normalized=Rb,Mb.offset=ec,Mb.stride=zc;Mb.divisor!==Ob&&(w.vertexAttribDivisorANGLE(Mc,Ob),Mb.divisor=Ob)}else if(Mb.buffer&&(u.disableVertexAttribArray(Mc),Mb.buffer=null),Mb.x!==Lc||Mb.y!==Xc||Mb.z!==Qc||Mb.w!==Bc)u.vertexAttrib4f(Mc,Lc,Xc,Qc,Bc),Mb.x=Lc,Mb.y=Xc,Mb.z=Qc,Mb.w=Bc;Nc=A.scale;Fc=Nc[0];fc=Nc[1];z&&Rc===Fc&&Uc===fc||(Rc=Fc,Uc=fc,u.uniform2f(Za.location,Fc,fc));kd=A.translate;fd=kd[0];Vc=kd[1];z&&
md===fd&&Og===Vc||(md=fd,Og=Vc,u.uniform2f(Qa.location,fd,Vc));vd=A.thickness;z&&zf===vd||(zf=vd,u.uniform1f(la.location,vd));te=A.depth;z&&ne===te||(ne=te,u.uniform1f(K.location,te));Md=h.call(this,U,A,z);Kd=Md[0];Cc=Md[1];gd=Md[2];nd=Md[3];z&&cd===Kd&&ld===Cc&&$c===gd&&zd===nd||(cd=Kd,ld=Cc,$c=gd,zd=nd,u.uniform4f(Z.location,Kd,Cc,gd,nd));Bd=A.miterLimit;z&&Se===Bd||(Se=Bd,u.uniform1f(n.location,Bd));Ie=f.call(this,U,A,z);z&&we===Ie||(we=Ie,u.uniform1f(W.location,Ie));fe=A.dashLength;z&&ee===fe||
(ee=fe,u.uniform1f(m.location,fe));de=A.opacity;z&&qe===de||(qe=de,u.uniform1f(Ka.location,de));(be=A.dashTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);he=be._texture;u.uniform1i(pa.location,he.bind());xc=A.count;0<xc?Hc?w.drawElementsInstancedANGLE(5,4,Hc.type,0<<(Hc.type-5121>>1),xc):w.drawArraysInstancedANGLE(5,0,4,xc):0>xc&&(Hc?u.drawElements(5,4,Hc.type,0<<(Hc.type-5121>>1)):u.drawArrays(5,0,4));U.viewportWidth=Yb;U.viewportHeight=Dc;ib&&O.destroyStream(Sa);lc&&O.destroyStream(Kb);
Ia&&O.destroyStream(Db);Da&&O.destroyStream(sb);yb&&O.destroyStream(Eb);ob&&O.destroyStream(Ab);he.unbind()}ra.dirty=!0;vb.setVAO(null);p&&(y.cpuTime+=performance.now()-r)},draw:function(c){var f,h,r,w,A,C,E,D,H,M,B,N,Q,ga,fa,va,na,Y,wb,Ea,Na,Ha,Vd,Wd,pb,Yd,pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,
Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed;f=R.next;f!==R.cur&&(f?u.bindFramebuffer(36160,f.framebuffer):u.bindFramebuffer(36160,null),R.cur=f);if(ra.dirty){var sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,sd,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc;sc=ba.dither;sc!==ra.dither&&(sc?u.enable(3024):u.disable(3024),ra.dither=sc);ud=ba.depth_func;ud!==ra.depth_func&&(u.depthFunc(ud),ra.depth_func=ud);Kc=td[0];bd=td[1];if(Kc!==tc[0]||bd!==tc[1])u.depthRange(Kc,bd),tc[0]=Kc,tc[1]=bd;qd=ba.depth_mask;
qd!==ra.depth_mask&&(u.depthMask(qd),ra.depth_mask=qd);Xb=pc[0];cc=pc[1];Qb=pc[2];Ga=pc[3];if(Xb!==ic[0]||cc!==ic[1]||Qb!==ic[2]||Ga!==ic[3])u.colorMask(Xb,cc,Qb,Ga),ic[0]=Xb,ic[1]=cc,ic[2]=Qb,ic[3]=Ga;Zb=ba.frontFace;Zb!==ra.frontFace&&(u.frontFace(Zb),ra.frontFace=Zb);ob=ba.lineWidth;ob!==ra.lineWidth&&(u.lineWidth(ob),ra.lineWidth=ob);Ab=ba.polygonOffset_enable;Ab!==ra.polygonOffset_enable&&(Ab?u.enable(32823):u.disable(32823),ra.polygonOffset_enable=Ab);Ob=X[0];Rb=X[1];if(Ob!==F[0]||Rb!==F[1])u.polygonOffset(Ob,
Rb),F[0]=Ob,F[1]=Rb;ec=ba.sample_alpha;ec!==ra.sample_alpha&&(ec?u.enable(32926):u.disable(32926),ra.sample_alpha=ec);gc=ba.sample_enable;gc!==ra.sample_enable&&(gc?u.enable(32928):u.disable(32928),ra.sample_enable=gc);sd=ja[0];zc=ja[1];if(sd!==Ba[0]||zc!==Ba[1])u.sampleCoverage(sd,zc),Ba[0]=sd,Ba[1]=zc;Ac=ba.stencil_mask;Ac!==ra.stencil_mask&&(u.stencilMask(Ac),ra.stencil_mask=Ac);Bc=Tc[0];Lc=Tc[1];Xc=Tc[2];if(Bc!==G[0]||Lc!==G[1]||Xc!==G[2])u.stencilFunc(Bc,Lc,Xc),G[0]=Bc,G[1]=Lc,G[2]=Xc;Qc=ua[0];
Mc=ua[1];Mb=ua[2];Hb=ua[3];if(Qc!==S[0]||Mc!==S[1]||Mb!==S[2]||Hb!==S[3])u.stencilOpSeparate(Qc,Mc,Mb,Hb),S[0]=Qc,S[1]=Mc,S[2]=Mb,S[3]=Hb;Nc=v[0];Fc=v[1];Rc=v[2];fc=v[3];if(Nc!==ha[0]||Fc!==ha[1]||Rc!==ha[2]||fc!==ha[3])u.stencilOpSeparate(Nc,Fc,Rc,fc),ha[0]=Nc,ha[1]=Fc,ha[2]=Rc,ha[3]=fc}h=c.viewport;r=h.x|0;w=h.y|0;A="width"in h?h.width|0:U.framebufferWidth-r;C="height"in h?h.height|0:U.framebufferHeight-w;E=U.viewportWidth;U.viewportWidth=A;D=U.viewportHeight;U.viewportHeight=C;u.viewport(r,w,A,
C);qa[0]=r;qa[1]=w;qa[2]=A;qa[3]=C;u.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;u.enable(3042);ra.blend_enable=!0;u.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;u.blendFuncSeparate(770,771,773,1);ac[0]=770;ac[1]=771;ac[2]=773;ac[3]=1;u.enable(2884);ra.cull_enable=!0;u.cullFace(1029);ra.cull_face=1029;(H=p.call(this,U,c,0))?u.enable(2929):u.disable(2929);ra.depth_enable=H;M=c.viewport;B=M.x|0;N=M.y|0;Q="width"in M?M.width|0:U.framebufferWidth-B;ga="height"in M?M.height|0:U.framebufferHeight-
N;u.scissor(B,N,Q,ga);Wc[0]=B;Wc[1]=N;Wc[2]=Q;Wc[3]=ga;u.enable(3089);ra.scissor_enable=!0;u.disable(2960);ra.stencil_enable=!1;if(fa=ra.profile)va=performance.now(),y.count++;u.useProgram(P.program);na=ab.angle_instanced_arrays;vb.setVAO(null);ca.buffer=c.positionBuffer;Y=!1;wb=null;Ea=0;Na=!1;Vd=Ha=0;Wd=1;pb=0;Yd=5126;Yc=wd=hd=pd=0;ka(ca)?(Y=!0,wb=O.createStream(34962,ca),Yd=wb.dtype):(wb=O.getBuffer(ca))?Yd=wb.dtype:"constant"in ca?(Wd=2,"number"===typeof ca.constant?(hd=ca.constant,wd=Yc=pd=0):
(hd=0<ca.constant.length?ca.constant[0]:0,wd=1<ca.constant.length?ca.constant[1]:0,Yc=2<ca.constant.length?ca.constant[2]:0,pd=3<ca.constant.length?ca.constant[3]:0)):(wb=ka(ca.buffer)?O.createStream(34962,ca.buffer):O.getBuffer(ca.buffer),Yd="type"in ca?I[ca.type]:wb.dtype,Na=!!ca.normalized,Vd=ca.size|0,Ha=ca.offset|0,pb=ca.stride|0,Ea=ca.divisor|0);id=l.location;nc=L[id];if(1===Wd){nc.buffer||u.enableVertexAttribArray(id);Gd=Vd||2;if(nc.type!==Yd||nc.size!==Gd||nc.buffer!==wb||nc.normalized!==
Na||nc.offset!==Ha||nc.stride!==pb)u.bindBuffer(34962,wb.buffer),u.vertexAttribPointer(id,Gd,Yd,Na,pb,Ha),nc.type=Yd,nc.size=Gd,nc.buffer=wb,nc.normalized=Na,nc.offset=Ha,nc.stride=pb;nc.divisor!==Ea&&(na.vertexAttribDivisorANGLE(id,Ea),nc.divisor=Ea)}else if(nc.buffer&&(u.disableVertexAttribArray(id),nc.buffer=null),nc.x!==hd||nc.y!==wd||nc.z!==Yc||nc.w!==pd)u.vertexAttrib4f(id,hd,wd,Yc,pd),nc.x=hd,nc.y=wd,nc.z=Yc,nc.w=pd;sa.buffer=c.positionBuffer;ed=!1;Jc=null;qc=0;bb=!1;Fb=Gc=0;oc=1;Ta=0;Hc=5126;
Dd=Jd=rc=bc=0;ka(sa)?(ed=!0,Jc=O.createStream(34962,sa),Hc=Jc.dtype):(Jc=O.getBuffer(sa))?Hc=Jc.dtype:"constant"in sa?(oc=2,"number"===typeof sa.constant?(rc=sa.constant,Jd=Dd=bc=0):(rc=0<sa.constant.length?sa.constant[0]:0,Jd=1<sa.constant.length?sa.constant[1]:0,Dd=2<sa.constant.length?sa.constant[2]:0,bc=3<sa.constant.length?sa.constant[3]:0)):(Jc=ka(sa.buffer)?O.createStream(34962,sa.buffer):O.getBuffer(sa.buffer),Hc="type"in sa?I[sa.type]:Jc.dtype,bb=!!sa.normalized,Fb=sa.size|0,Gc=sa.offset|
0,Ta=sa.stride|0,qc=sa.divisor|0);yc=aa.location;Yb=L[yc];if(1===oc){Yb.buffer||u.enableVertexAttribArray(yc);Dc=Fb||2;if(Yb.type!==Hc||Yb.size!==Dc||Yb.buffer!==Jc||Yb.normalized!==bb||Yb.offset!==Gc||Yb.stride!==Ta)u.bindBuffer(34962,Jc.buffer),u.vertexAttribPointer(yc,Dc,Hc,bb,Ta,Gc),Yb.type=Hc,Yb.size=Dc,Yb.buffer=Jc,Yb.normalized=bb,Yb.offset=Gc,Yb.stride=Ta;Yb.divisor!==qc&&(na.vertexAttribDivisorANGLE(yc,qc),Yb.divisor=qc)}else if(Yb.buffer&&(u.disableVertexAttribArray(yc),Yb.buffer=null),
Yb.x!==rc||Yb.y!==Jd||Yb.z!==Dd||Yb.w!==bc)u.vertexAttrib4f(yc,rc,Jd,Dd,bc),Yb.x=rc,Yb.y=Jd,Yb.z=Dd,Yb.w=bc;oa.buffer=c.positionBuffer;Pc=!1;La=null;Gb=0;Wa=!1;jd=Ca=0;ib=1;Sa=0;Ib=5126;ae=Sb=Ec=eb=0;ka(oa)?(Pc=!0,La=O.createStream(34962,oa),Ib=La.dtype):(La=O.getBuffer(oa))?Ib=La.dtype:"constant"in oa?(ib=2,"number"===typeof oa.constant?(Ec=oa.constant,Sb=ae=eb=0):(Ec=0<oa.constant.length?oa.constant[0]:0,Sb=1<oa.constant.length?oa.constant[1]:0,ae=2<oa.constant.length?oa.constant[2]:0,eb=3<oa.constant.length?
oa.constant[3]:0)):(La=ka(oa.buffer)?O.createStream(34962,oa.buffer):O.getBuffer(oa.buffer),Ib="type"in oa?I[oa.type]:La.dtype,Wa=!!oa.normalized,jd=oa.size|0,Ca=oa.offset|0,Sa=oa.stride|0,Gb=oa.divisor|0);$b=ma.location;Tb=L[$b];if(1===ib){Tb.buffer||u.enableVertexAttribArray($b);rd=jd||2;if(Tb.type!==Ib||Tb.size!==rd||Tb.buffer!==La||Tb.normalized!==Wa||Tb.offset!==Ca||Tb.stride!==Sa)u.bindBuffer(34962,La.buffer),u.vertexAttribPointer($b,rd,Ib,Wa,Sa,Ca),Tb.type=Ib,Tb.size=rd,Tb.buffer=La,Tb.normalized=
Wa,Tb.offset=Ca,Tb.stride=Sa;Tb.divisor!==Gb&&(na.vertexAttribDivisorANGLE($b,Gb),Tb.divisor=Gb)}else if(Tb.buffer&&(u.disableVertexAttribArray($b),Tb.buffer=null),Tb.x!==Ec||Tb.y!==Sb||Tb.z!==ae||Tb.w!==eb)u.vertexAttrib4f($b,Ec,Sb,ae,eb),Tb.x=Ec,Tb.y=Sb,Tb.z=ae,Tb.w=eb;k.buffer=c.positionBuffer;Ub=!1;Ma=null;qb=0;xb=!1;Oa=jb=0;lc=1;Kb=0;Zc=5126;hc=dd=jc=fb=0;ka(k)?(Ub=!0,Ma=O.createStream(34962,k),Zc=Ma.dtype):(Ma=O.getBuffer(k))?Zc=Ma.dtype:"constant"in k?(lc=2,"number"===typeof k.constant?(jc=
k.constant,dd=hc=fb=0):(jc=0<k.constant.length?k.constant[0]:0,dd=1<k.constant.length?k.constant[1]:0,hc=2<k.constant.length?k.constant[2]:0,fb=3<k.constant.length?k.constant[3]:0)):(Ma=ka(k.buffer)?O.createStream(34962,k.buffer):O.getBuffer(k.buffer),Zc="type"in k?I[k.type]:Ma.dtype,xb=!!k.normalized,Oa=k.size|0,jb=k.offset|0,Kb=k.stride|0,qb=k.divisor|0);lb=db.location;mb=L[lb];if(1===lc){mb.buffer||u.enableVertexAttribArray(lb);ta=Oa||2;if(mb.type!==Zc||mb.size!==ta||mb.buffer!==Ma||mb.normalized!==
xb||mb.offset!==jb||mb.stride!==Kb)u.bindBuffer(34962,Ma.buffer),u.vertexAttribPointer(lb,ta,Zc,xb,Kb,jb),mb.type=Zc,mb.size=ta,mb.buffer=Ma,mb.normalized=xb,mb.offset=jb,mb.stride=Kb;mb.divisor!==qb&&(na.vertexAttribDivisorANGLE(lb,qb),mb.divisor=qb)}else if(mb.buffer&&(u.disableVertexAttribArray(lb),mb.buffer=null),mb.x!==jc||mb.y!==dd||mb.z!==hc||mb.w!==fb)u.vertexAttrib4f(lb,jc,dd,hc,fb),mb.x=jc,mb.y=dd,mb.z=hc,mb.w=fb;t.buffer=c.colorBuffer;rb=!1;wa=null;Ua=0;cb=!1;gb=za=0;Ia=1;Db=0;Cb=5126;
$a=Lb=Ic=Ra=0;ka(t)?(rb=!0,wa=O.createStream(34962,t),Cb=wa.dtype):(wa=O.getBuffer(t))?Cb=wa.dtype:"constant"in t?(Ia=2,"number"===typeof t.constant?(Ic=t.constant,Lb=$a=Ra=0):(Ic=0<t.constant.length?t.constant[0]:0,Lb=1<t.constant.length?t.constant[1]:0,$a=2<t.constant.length?t.constant[2]:0,Ra=3<t.constant.length?t.constant[3]:0)):(wa=ka(t.buffer)?O.createStream(34962,t.buffer):O.getBuffer(t.buffer),Cb="type"in t?I[t.type]:wa.dtype,cb=!!t.normalized,gb=t.size|0,za=t.offset|0,Db=t.stride|0,Ua=t.divisor|
0);Vb=e.location;xa=L[Vb];if(1===Ia){xa.buffer||u.enableVertexAttribArray(Vb);Ad=gb||4;if(xa.type!==Cb||xa.size!==Ad||xa.buffer!==wa||xa.normalized!==cb||xa.offset!==za||xa.stride!==Db)u.bindBuffer(34962,wa.buffer),u.vertexAttribPointer(Vb,Ad,Cb,cb,Db,za),xa.type=Cb,xa.size=Ad,xa.buffer=wa,xa.normalized=cb,xa.offset=za,xa.stride=Db;xa.divisor!==Ua&&(na.vertexAttribDivisorANGLE(Vb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(u.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Ic||xa.y!==Lb||xa.z!==$a||
xa.w!==Ra)u.vertexAttrib4f(Vb,Ic,Lb,$a,Ra),xa.x=Ic,xa.y=Lb,xa.z=$a,xa.w=Ra;x.buffer=c.colorBuffer;Ja=!1;Pb=null;hb=0;kb=!1;dc=ya=0;Da=1;sb=0;tb=5126;ad=kc=Ya=Xa=0;ka(x)?(Ja=!0,Pb=O.createStream(34962,x),tb=Pb.dtype):(Pb=O.getBuffer(x))?tb=Pb.dtype:"constant"in x?(Da=2,"number"===typeof x.constant?(Ya=x.constant,kc=ad=Xa=0):(Ya=0<x.constant.length?x.constant[0]:0,kc=1<x.constant.length?x.constant[1]:0,ad=2<x.constant.length?x.constant[2]:0,Xa=3<x.constant.length?x.constant[3]:0)):(Pb=ka(x.buffer)?
O.createStream(34962,x.buffer):O.getBuffer(x.buffer),tb="type"in x?I[x.type]:Pb.dtype,kb=!!x.normalized,dc=x.size|0,ya=x.offset|0,sb=x.stride|0,hb=x.divisor|0);uc=T.location;Va=L[uc];if(1===Da){Va.buffer||u.enableVertexAttribArray(uc);Nb=dc||4;if(Va.type!==tb||Va.size!==Nb||Va.buffer!==Pb||Va.normalized!==kb||Va.offset!==ya||Va.stride!==sb)u.bindBuffer(34962,Pb.buffer),u.vertexAttribPointer(uc,Nb,tb,kb,sb,ya),Va.type=tb,Va.size=Nb,Va.buffer=Pb,Va.normalized=kb,Va.offset=ya,Va.stride=sb;Va.divisor!==
hb&&(na.vertexAttribDivisorANGLE(uc,hb),Va.divisor=hb)}else if(Va.buffer&&(u.disableVertexAttribArray(uc),Va.buffer=null),Va.x!==Ya||Va.y!==kc||Va.z!==ad||Va.w!==Xa)u.vertexAttrib4f(uc,Ya,kc,ad,Xa),Va.x=Ya,Va.y=kc,Va.z=ad,Va.w=Xa;Oc=da.location;Fa=L[Oc];Fa.buffer||u.enableVertexAttribArray(Oc);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==g||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)u.bindBuffer(34962,g.buffer),u.vertexAttribPointer(Oc,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=g,Fa.normalized=
!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(na.vertexAttribDivisorANGLE(Oc,0),Fa.divisor=0);wc=a.location;Pa=L[wc];Pa.buffer||u.enableVertexAttribArray(wc);if(5126!==Pa.type||1!==Pa.size||Pa.buffer!==d||!1!==Pa.normalized||4!==Pa.offset||8!==Pa.stride)u.bindBuffer(34962,d.buffer),u.vertexAttribPointer(wc,1,5126,!1,8,4),Pa.type=5126,Pa.size=1,Pa.buffer=d,Pa.normalized=!1,Pa.offset=4,Pa.stride=8;0!==Pa.divisor&&(na.vertexAttribDivisorANGLE(wc,0),Pa.divisor=0);Aa=c.scale;u.uniform2f(Za.location,Aa[0],
Aa[1]);nb=c.translate;u.uniform2f(Qa.location,nb[0],nb[1]);u.uniform1f(la.location,c.thickness);u.uniform1f(K.location,c.depth);yb=z.call(this,U,c,0);u.uniform4f(Z.location,yb[0],yb[1],yb[2],yb[3]);u.uniform1f(n.location,c.miterLimit);Eb=b.call(this,U,c,0);u.uniform1f(W.location,Eb);u.uniform1f(m.location,c.dashLength);u.uniform1f(Ka.location,c.opacity);(ub=c.dashTexture)&&"framebuffer"===ub._reglType&&(ub=ub.color[0]);vc=ub._texture;u.uniform1i(pa.location,vc.bind());(zb=J.elements)?u.bindBuffer(34963,
zb.buffer.buffer):vb.currentVAO&&(zb=Wb.getElements(vb.currentVAO.elements))&&u.bindBuffer(34963,zb.buffer.buffer);Ed=c.count;0<Ed?zb?na.drawElementsInstancedANGLE(5,4,zb.type,0<<(zb.type-5121>>1),Ed):na.drawArraysInstancedANGLE(5,0,4,Ed):0>Ed&&(zb?u.drawElements(5,4,zb.type,0<<(zb.type-5121>>1)):u.drawArrays(5,0,4));ra.dirty=!0;vb.setVAO(null);U.viewportWidth=E;U.viewportHeight=D;fa&&(y.cpuTime+=performance.now()-va);Y&&O.destroyStream(wb);ed&&O.destroyStream(Jc);Pc&&O.destroyStream(La);Ub&&O.destroyStream(Ma);
rb&&O.destroyStream(wa);Ja&&O.destroyStream(Pb);vc.unbind()},scope:function(a,b,c){var e,f,h,l,m,n,p,v,u,F,z,G,X,P,K,N,L,R,S,V,T,ja,Z,aa,ha,W,ea,ua,pc,qa,Ba,da,pa,Y,bb,td,Fb,ma,Ta,tc,bc,la,Wc,ac,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,ic,ib,Sa,Ib,eb,Ka,Sb,ab,$b,Tb,Qa,Ub,Ma,qb,xb,jb,Oa,lc,Kb,db,fb,jc,Wb,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Tc,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,vb,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Za,zc,Ac,Bc,Lc,Xc,Qc,
Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,sd,vd,xd,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,Se,Ie,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Xe,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf,of,lf,pf,Af,Bf,Le,ye,mf,nf,Cf,Ff,yf,Df,Ef,tf,uf,sf,vf,wf;e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:U.framebufferWidth-f;m="height"in e?e.height|0:U.framebufferHeight-h;n=U.viewportWidth;U.viewportWidth=l;p=U.viewportHeight;U.viewportHeight=m;
v=ga[0];ga[0]=f;u=ga[1];ga[1]=h;F=ga[2];ga[2]=l;z=ga[3];ga[3]=m;G=Ha[0];Ha[0]=0;X=Ha[1];Ha[1]=0;P=Ha[2];Ha[2]=0;K=Ha[3];Ha[3]=0;N=ba.blend_enable;ba.blend_enable=!0;L=pb[0];pb[0]=32774;R=pb[1];pb[1]=32774;S=va[0];va[0]=770;V=va[1];va[1]=771;T=va[2];va[2]=773;ja=va[3];va[3]=1;Z=ba.cull_enable;ba.cull_enable=!0;aa=ba.cull_face;ba.cull_face=1029;ha=w.call(this,U,a,c);W=ba.depth_enable;ba.depth_enable=ha;ea=a.viewport;ua=ea.x|0;pc=ea.y|0;qa="width"in ea?ea.width|0:U.framebufferWidth-ua;Ba="height"in ea?
ea.height|0:U.framebufferHeight-pc;da=wb[0];wb[0]=ua;pa=wb[1];wb[1]=pc;Y=wb[2];wb[2]=qa;bb=wb[3];wb[3]=Ba;td=ba.scissor_enable;ba.scissor_enable=!0;Fb=ba.stencil_enable;ba.stencil_enable=!1;if(ma=ra.profile)Ta=performance.now(),y.count++;tc=J.offset;J.offset=0;bc=J.count;J.count=4;la=a.count;Wc=J.instances;J.instances=la;ac=J.primitive;J.primitive=5;yc=a.dashLength;Yb=Na[23];Na[23]=yc;Dc=a.dashTexture;Pc=Na[24];Na[24]=Dc;La=a.depth;Gb=Na[22];Na[22]=La;Wa=a.id;Ca=Na[31];Na[31]=Wa;ic=a.miterLimit;ib=
Na[32];Na[32]=ic;Sa=B.call(this,U,a,c);Ib=Na[33];Na[33]=Sa;eb=a.opacity;Ka=Na[10];Na[10]=eb;Sb=U.pixelRatio;ab=Na[34];Na[34]=Sb;$b=a.scale;Tb=Na[6];Na[6]=$b;Qa=a.scaleFract;Ub=Na[7];Na[7]=Qa;Ma=a.thickness;qb=Na[21];Na[21]=Ma;xb=a.translate;jb=Na[8];Na[8]=xb;Oa=a.translateFract;lc=Na[9];Na[9]=Oa;Kb=fa.call(this,U,a,c);db=Na[3];Na[3]=Kb;t.buffer=a.colorBuffer;fb=!1;jc=null;Wb=0;hc=!1;mb=lb=0;ta=1;rb=0;wa=5126;gb=za=cb=Ua=0;ka(t)?(fb=!0,jc=O.createStream(34962,t),wa=jc.dtype):(jc=O.getBuffer(t))?wa=
jc.dtype:"constant"in t?(ta=2,"number"===typeof t.constant?(cb=t.constant,za=gb=Ua=0):(cb=0<t.constant.length?t.constant[0]:0,za=1<t.constant.length?t.constant[1]:0,gb=2<t.constant.length?t.constant[2]:0,Ua=3<t.constant.length?t.constant[3]:0)):(jc=ka(t.buffer)?O.createStream(34962,t.buffer):O.getBuffer(t.buffer),wa="type"in t?I[t.type]:jc.dtype,hc=!!t.normalized,mb=t.size|0,lb=t.offset|0,rb=t.stride|0,Wb=t.divisor|0);Ia=M.buffer;M.buffer=jc;Db=M.divisor;M.divisor=Wb;Cb=M.normalized;M.normalized=
hc;Ra=M.offset;M.offset=lb;Ic=M.size;M.size=mb;Lb=M.state;M.state=ta;$a=M.stride;M.stride=rb;Vb=M.type;M.type=wa;xa=M.w;M.w=Ua;Tc=M.x;M.x=cb;Ja=M.y;M.y=za;Pb=M.z;M.z=gb;ca.buffer=a.positionBuffer;hb=!1;kb=null;ya=0;dc=!1;sb=Da=0;tb=1;Xa=0;Ya=5126;Va=uc=ad=kc=0;ka(ca)?(hb=!0,kb=O.createStream(34962,ca),Ya=kb.dtype):(kb=O.getBuffer(ca))?Ya=kb.dtype:"constant"in ca?(tb=2,"number"===typeof ca.constant?(ad=ca.constant,uc=Va=kc=0):(ad=0<ca.constant.length?ca.constant[0]:0,uc=1<ca.constant.length?ca.constant[1]:
0,Va=2<ca.constant.length?ca.constant[2]:0,kc=3<ca.constant.length?ca.constant[3]:0)):(kb=ka(ca.buffer)?O.createStream(34962,ca.buffer):O.getBuffer(ca.buffer),Ya="type"in ca?I[ca.type]:kb.dtype,dc=!!ca.normalized,sb=ca.size|0,Da=ca.offset|0,Xa=ca.stride|0,ya=ca.divisor|0);Nb=H.buffer;H.buffer=kb;Oc=H.divisor;H.divisor=ya;Fa=H.normalized;H.normalized=dc;wc=H.offset;H.offset=Da;Pa=H.size;H.size=sb;Aa=H.state;H.state=tb;nb=H.stride;H.stride=Xa;yb=H.type;H.type=Ya;Eb=H.w;H.w=kc;ub=H.x;H.x=ad;vc=H.y;H.y=
uc;zb=H.z;H.z=Va;x.buffer=a.colorBuffer;vb=!1;sc=null;ud=0;Kc=!1;qd=bd=0;Xb=1;cc=0;Qb=5126;Ab=ob=Zb=Ga=0;ka(x)?(vb=!0,sc=O.createStream(34962,x),Qb=sc.dtype):(sc=O.getBuffer(x))?Qb=sc.dtype:"constant"in x?(Xb=2,"number"===typeof x.constant?(Zb=x.constant,ob=Ab=Ga=0):(Zb=0<x.constant.length?x.constant[0]:0,ob=1<x.constant.length?x.constant[1]:0,Ab=2<x.constant.length?x.constant[2]:0,Ga=3<x.constant.length?x.constant[3]:0)):(sc=ka(x.buffer)?O.createStream(34962,x.buffer):O.getBuffer(x.buffer),Qb="type"in
x?I[x.type]:sc.dtype,Kc=!!x.normalized,qd=x.size|0,bd=x.offset|0,cc=x.stride|0,ud=x.divisor|0);Ob=r.buffer;r.buffer=sc;Rb=r.divisor;r.divisor=ud;ec=r.normalized;r.normalized=Kc;gc=r.offset;r.offset=bd;Za=r.size;r.size=qd;zc=r.state;r.state=Xb;Ac=r.stride;r.stride=cc;Bc=r.type;r.type=Qb;Lc=r.w;r.w=Ga;Xc=r.x;r.x=Zb;Qc=r.y;r.y=ob;Mc=r.z;r.z=Ab;sa.buffer=a.positionBuffer;Mb=!1;Hb=null;Nc=0;Fc=!1;fc=Rc=0;Uc=1;kd=0;fd=5126;vd=sd=Vc=md=0;ka(sa)?(Mb=!0,Hb=O.createStream(34962,sa),fd=Hb.dtype):(Hb=O.getBuffer(sa))?
fd=Hb.dtype:"constant"in sa?(Uc=2,"number"===typeof sa.constant?(Vc=sa.constant,sd=vd=md=0):(Vc=0<sa.constant.length?sa.constant[0]:0,sd=1<sa.constant.length?sa.constant[1]:0,vd=2<sa.constant.length?sa.constant[2]:0,md=3<sa.constant.length?sa.constant[3]:0)):(Hb=ka(sa.buffer)?O.createStream(34962,sa.buffer):O.getBuffer(sa.buffer),fd="type"in sa?I[sa.type]:Hb.dtype,Fc=!!sa.normalized,fc=sa.size|0,Rc=sa.offset|0,kd=sa.stride|0,Nc=sa.divisor|0);xd=D.buffer;D.buffer=Hb;te=D.divisor;D.divisor=Nc;ne=D.normalized;
D.normalized=Fc;Md=D.offset;D.offset=Rc;Kd=D.size;D.size=fc;cd=D.state;D.state=Uc;Cc=D.stride;D.stride=kd;ld=D.type;D.type=fd;gd=D.w;D.w=md;$c=D.x;D.x=Vc;nd=D.y;D.y=sd;zd=D.z;D.z=vd;Bd=C.buffer;C.buffer=g;Se=C.divisor;C.divisor=0;Ie=C.normalized;C.normalized=!1;we=C.offset;C.offset=0;fe=C.size;C.size=0;ee=C.state;C.state=1;de=C.stride;C.stride=8;qe=C.type;C.type=5126;be=C.w;C.w=0;he=C.x;C.x=0;xc=C.y;C.y=0;Sc=C.z;C.z=0;re=E.buffer;E.buffer=d;ke=E.divisor;E.divisor=0;Ld=E.normalized;E.normalized=!1;
Od=E.offset;E.offset=4;Qd=E.size;E.size=0;Rd=E.state;E.state=1;ie=E.stride;E.stride=8;Ce=E.type;E.type=5126;Xe=E.w;E.w=0;oe=E.x;E.x=0;Me=E.y;E.y=0;Ne=E.z;E.z=0;oa.buffer=a.positionBuffer;Je=!1;se=null;ze=0;De=!1;Fe=Ee=0;Ae=1;Nd=0;Ud=5126;Fd=Ge=ce=Zd=0;ka(oa)?(Je=!0,se=O.createStream(34962,oa),Ud=se.dtype):(se=O.getBuffer(oa))?Ud=se.dtype:"constant"in oa?(Ae=2,"number"===typeof oa.constant?(ce=oa.constant,Ge=Fd=Zd=0):(ce=0<oa.constant.length?oa.constant[0]:0,Ge=1<oa.constant.length?oa.constant[1]:
0,Fd=2<oa.constant.length?oa.constant[2]:0,Zd=3<oa.constant.length?oa.constant[3]:0)):(se=ka(oa.buffer)?O.createStream(34962,oa.buffer):O.getBuffer(oa.buffer),Ud="type"in oa?I[oa.type]:se.dtype,De=!!oa.normalized,Fe=oa.size|0,Ee=oa.offset|0,Nd=oa.stride|0,ze=oa.divisor|0);Sd=Q.buffer;Q.buffer=se;xe=Q.divisor;Q.divisor=ze;He=Q.normalized;Q.normalized=De;ef=Q.offset;Q.offset=Ee;We=Q.size;Q.size=Fe;Oe=Q.state;Q.state=Ae;Ke=Q.stride;Q.stride=Nd;Ve=Q.type;Q.type=Ud;Te=Q.w;Q.w=Zd;Pe=Q.x;Q.x=ce;Qe=Q.y;Q.y=
Ge;Td=Q.z;Q.z=Fd;k.buffer=a.positionBuffer;Xd=!1;Re=null;ff=0;kf=!1;gf=bf=0;hf=1;jf=0;of=5126;Bf=Af=pf=lf=0;ka(k)?(Xd=!0,Re=O.createStream(34962,k),of=Re.dtype):(Re=O.getBuffer(k))?of=Re.dtype:"constant"in k?(hf=2,"number"===typeof k.constant?(pf=k.constant,Af=Bf=lf=0):(pf=0<k.constant.length?k.constant[0]:0,Af=1<k.constant.length?k.constant[1]:0,Bf=2<k.constant.length?k.constant[2]:0,lf=3<k.constant.length?k.constant[3]:0)):(Re=ka(k.buffer)?O.createStream(34962,k.buffer):O.getBuffer(k.buffer),of=
"type"in k?I[k.type]:Re.dtype,kf=!!k.normalized,gf=k.size|0,bf=k.offset|0,jf=k.stride|0,ff=k.divisor|0);Le=A.buffer;A.buffer=Re;ye=A.divisor;A.divisor=ff;mf=A.normalized;A.normalized=kf;nf=A.offset;A.offset=bf;Cf=A.size;A.size=gf;Ff=A.state;A.state=hf;yf=A.stride;A.stride=jf;Df=A.type;A.type=of;Ef=A.w;A.w=lf;tf=A.x;A.x=pf;uf=A.y;A.y=Af;sf=A.z;A.z=Bf;vf=Ea.vert;Ea.vert=36;wf=Ea.frag;Ea.frag=35;ra.dirty=!0;b(U,a,c);U.viewportWidth=n;U.viewportHeight=p;ga[0]=v;ga[1]=u;ga[2]=F;ga[3]=z;Ha[0]=G;Ha[1]=X;
Ha[2]=P;Ha[3]=K;ba.blend_enable=N;pb[0]=L;pb[1]=R;va[0]=S;va[1]=V;va[2]=T;va[3]=ja;ba.cull_enable=Z;ba.cull_face=aa;ba.depth_enable=W;wb[0]=da;wb[1]=pa;wb[2]=Y;wb[3]=bb;ba.scissor_enable=td;ba.stencil_enable=Fb;ma&&(y.cpuTime+=performance.now()-Ta);J.offset=tc;J.count=bc;J.instances=Wc;J.primitive=ac;Na[23]=Yb;Na[24]=Pc;Na[22]=Gb;Na[31]=Ca;Na[32]=ib;Na[33]=Ib;Na[10]=Ka;Na[34]=ab;Na[6]=Tb;Na[7]=Ub;Na[21]=qb;Na[8]=jb;Na[9]=lc;Na[3]=db;fb&&O.destroyStream(jc);M.buffer=Ia;M.divisor=Db;M.normalized=Cb;
M.offset=Ra;M.size=Ic;M.state=Lb;M.stride=$a;M.type=Vb;M.w=xa;M.x=Tc;M.y=Ja;M.z=Pb;hb&&O.destroyStream(kb);H.buffer=Nb;H.divisor=Oc;H.normalized=Fa;H.offset=wc;H.size=Pa;H.state=Aa;H.stride=nb;H.type=yb;H.w=Eb;H.x=ub;H.y=vc;H.z=zb;vb&&O.destroyStream(sc);r.buffer=Ob;r.divisor=Rb;r.normalized=ec;r.offset=gc;r.size=Za;r.state=zc;r.stride=Ac;r.type=Bc;r.w=Lc;r.x=Xc;r.y=Qc;r.z=Mc;Mb&&O.destroyStream(Hb);D.buffer=xd;D.divisor=te;D.normalized=ne;D.offset=Md;D.size=Kd;D.state=cd;D.stride=Cc;D.type=ld;D.w=
gd;D.x=$c;D.y=nd;D.z=zd;C.buffer=Bd;C.divisor=Se;C.normalized=Ie;C.offset=we;C.size=fe;C.state=ee;C.stride=de;C.type=qe;C.w=be;C.x=he;C.y=xc;C.z=Sc;E.buffer=re;E.divisor=ke;E.normalized=Ld;E.offset=Od;E.size=Qd;E.state=Rd;E.stride=ie;E.type=Ce;E.w=Xe;E.x=oe;E.y=Me;E.z=Ne;Je&&O.destroyStream(se);Q.buffer=Sd;Q.divisor=xe;Q.normalized=He;Q.offset=ef;Q.size=We;Q.state=Oe;Q.stride=Ke;Q.type=Ve;Q.w=Te;Q.x=Pe;Q.y=Qe;Q.z=Td;Xd&&O.destroyStream(Re);A.buffer=Le;A.divisor=ye;A.normalized=mf;A.offset=nf;A.size=
Cf;A.state=Ff;A.stride=yf;A.type=Df;A.w=Ef;A.x=tf;A.y=uf;A.z=sf;Ea.vert=vf;Ea.frag=wf;ra.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(c,y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A){var N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db,Za,la,Qa,Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va;N=c.attributes;Y=c.buffer;h=c.context;f=c.current;e=c.draw;l=c.elements;T=c.extensions;aa=c.framebuffer;m=c.gl;pa=c.isBufferArgs;K=c.next;da=c.shader;a=c.uniforms;
n=c.vao;W=K.blend_color;ma=f.blend_color;Ka=K.blend_equation;db=f.blend_equation;Za=K.blend_func;la=f.blend_func;Qa=K.colorMask;Z=f.colorMask;L=K.depth_range;O=f.depth_range;U=K.polygonOffset_offset;ra=f.polygonOffset_offset;J=K.sample_coverage;Wb=f.sample_coverage;ab=K.scissor_box;R=f.scissor_box;u=K.stencil_func;ka=f.stencil_func;ba=K.stencil_opBack;Ea=f.stencil_opBack;Na=K.stencil_opFront;vb=f.stencil_opFront;Ha=K.viewport;V=f.viewport;pb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,
uint32:5125,"float":5126,float32:5126};ea={offset:8,stride:8};va={offset:8,stride:8};return{batch:function(a,b){var d,c,g,p,F,z;d=aa.next;d!==aa.cur&&(d?m.bindFramebuffer(36160,d.framebuffer):m.bindFramebuffer(36160,null),aa.cur=d);if(f.dirty){var P,W,da,Ha,G,v,ha,ua,S,ga,qa,I,t,ca,x,sa,oa,k,Ka,ia,q,Jb,Bb,ab,Za,xd,je,Hd,ue,od,ge,ve;P=K.dither;P!==f.dither&&(P?m.enable(3024):m.disable(3024),f.dither=P);W=K.depth_func;W!==f.depth_func&&(m.depthFunc(W),f.depth_func=W);da=L[0];Ha=L[1];if(da!==O[0]||Ha!==
O[1])m.depthRange(da,Ha),O[0]=da,O[1]=Ha;G=K.depth_mask;G!==f.depth_mask&&(m.depthMask(G),f.depth_mask=G);v=Qa[0];ha=Qa[1];ua=Qa[2];S=Qa[3];if(v!==Z[0]||ha!==Z[1]||ua!==Z[2]||S!==Z[3])m.colorMask(v,ha,ua,S),Z[0]=v,Z[1]=ha,Z[2]=ua,Z[3]=S;ga=K.cull_enable;ga!==f.cull_enable&&(ga?m.enable(2884):m.disable(2884),f.cull_enable=ga);qa=K.cull_face;qa!==f.cull_face&&(m.cullFace(qa),f.cull_face=qa);I=K.frontFace;I!==f.frontFace&&(m.frontFace(I),f.frontFace=I);t=K.lineWidth;t!==f.lineWidth&&(m.lineWidth(t),
f.lineWidth=t);ca=K.polygonOffset_enable;ca!==f.polygonOffset_enable&&(ca?m.enable(32823):m.disable(32823),f.polygonOffset_enable=ca);x=U[0];sa=U[1];if(x!==ra[0]||sa!==ra[1])m.polygonOffset(x,sa),ra[0]=x,ra[1]=sa;oa=K.sample_alpha;oa!==f.sample_alpha&&(oa?m.enable(32926):m.disable(32926),f.sample_alpha=oa);k=K.sample_enable;k!==f.sample_enable&&(k?m.enable(32928):m.disable(32928),f.sample_enable=k);Ka=J[0];ia=J[1];if(Ka!==Wb[0]||ia!==Wb[1])m.sampleCoverage(Ka,ia),Wb[0]=Ka,Wb[1]=ia;q=K.stencil_mask;
q!==f.stencil_mask&&(m.stencilMask(q),f.stencil_mask=q);Jb=u[0];Bb=u[1];ab=u[2];if(Jb!==ka[0]||Bb!==ka[1]||ab!==ka[2])m.stencilFunc(Jb,Bb,ab),ka[0]=Jb,ka[1]=Bb,ka[2]=ab;Za=Na[0];xd=Na[1];je=Na[2];Hd=Na[3];if(Za!==vb[0]||xd!==vb[1]||je!==vb[2]||Hd!==vb[3])m.stencilOpSeparate(Za,xd,je,Hd),vb[0]=Za,vb[1]=xd,vb[2]=je,vb[3]=Hd;ue=ba[0];od=ba[1];ge=ba[2];ve=ba[3];if(ue!==Ea[0]||od!==Ea[1]||ge!==Ea[2]||ve!==Ea[3])m.stencilOpSeparate(ue,od,ge,ve),Ea[0]=ue,Ea[1]=od,Ea[2]=ge,Ea[3]=ve}m.blendColor(0,0,0,0);
ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;m.enable(3042);f.blend_enable=!0;m.blendEquationSeparate(32774,32774);db[0]=32774;db[1]=32774;m.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;m.disable(2929);f.depth_enable=!1;m.enable(3089);f.scissor_enable=!0;m.disable(2960);f.stencil_enable=!1;if(c=f.profile)g=performance.now(),y.count+=b;m.useProgram(w.program);p=T.angle_instanced_arrays;var yd;n.setVAO(null);yd=e.instances;for(F=0;F<b;++F){z=a[F];var Id,$d,Pd,Ye,xf,af,Cd,Be,Vd,Wd,me,Yd,
pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb;Id=z.viewport;$d=Id.x|0;Pd=Id.y|0;Ye="width"in Id?Id.width|0:h.framebufferWidth-$d;xf="height"in Id?Id.height|0:h.framebufferHeight-Pd;af=h.viewportWidth;h.viewportWidth=Ye;Cd=h.viewportHeight;h.viewportHeight=xf;m.viewport($d,Pd,Ye,xf);V[0]=$d;V[1]=Pd;V[2]=Ye;V[3]=xf;Be=z.viewport;Vd=Be.x|0;Wd=
Be.y|0;me="width"in Be?Be.width|0:h.framebufferWidth-Vd;Yd="height"in Be?Be.height|0:h.framebufferHeight-Wd;m.scissor(Vd,Wd,me,Yd);R[0]=Vd;R[1]=Wd;R[2]=me;R[3]=Yd;ea.buffer=z.positionBuffer;pd=!1;hd=null;wd=0;Yc=!1;nc=id=0;Gd=1;ed=0;Jc=5126;Fb=Gc=bb=qc=0;pa(ea)?(pd=!0,hd=Y.createStream(34962,ea),Jc=hd.dtype):(hd=Y.getBuffer(ea))?Jc=hd.dtype:"constant"in ea?(Gd=2,"number"===typeof ea.constant?(bb=ea.constant,Gc=Fb=qc=0):(bb=0<ea.constant.length?ea.constant[0]:0,Gc=1<ea.constant.length?ea.constant[1]:
0,Fb=2<ea.constant.length?ea.constant[2]:0,qc=3<ea.constant.length?ea.constant[3]:0)):(hd=pa(ea.buffer)?Y.createStream(34962,ea.buffer):Y.getBuffer(ea.buffer),Jc="type"in ea?pb[ea.type]:hd.dtype,Yc=!!ea.normalized,nc=ea.size|0,id=ea.offset|0,ed=ea.stride|0,wd=ea.divisor|0);oc=r.location;Ta=N[oc];if(1===Gd){Ta.buffer||m.enableVertexAttribArray(oc);Hc=nc||2;if(Ta.type!==Jc||Ta.size!==Hc||Ta.buffer!==hd||Ta.normalized!==Yc||Ta.offset!==id||Ta.stride!==ed)m.bindBuffer(34962,hd.buffer),m.vertexAttribPointer(oc,
Hc,Jc,Yc,ed,id),Ta.type=Jc,Ta.size=Hc,Ta.buffer=hd,Ta.normalized=Yc,Ta.offset=id,Ta.stride=ed;Ta.divisor!==wd&&(p.vertexAttribDivisorANGLE(oc,wd),Ta.divisor=wd)}else if(Ta.buffer&&(m.disableVertexAttribArray(oc),Ta.buffer=null),Ta.x!==bb||Ta.y!==Gc||Ta.z!==Fb||Ta.w!==qc)m.vertexAttrib4f(oc,bb,Gc,Fb,qc),Ta.x=bb,Ta.y=Gc,Ta.z=Fb,Ta.w=qc;va.buffer=z.positionFractBuffer;bc=!1;rc=null;Jd=0;Dd=!1;Yb=yc=0;Dc=1;Pc=0;La=5126;jd=Ca=Wa=Gb=0;pa(va)?(bc=!0,rc=Y.createStream(34962,va),La=rc.dtype):(rc=Y.getBuffer(va))?
La=rc.dtype:"constant"in va?(Dc=2,"number"===typeof va.constant?(Wa=va.constant,Ca=jd=Gb=0):(Wa=0<va.constant.length?va.constant[0]:0,Ca=1<va.constant.length?va.constant[1]:0,jd=2<va.constant.length?va.constant[2]:0,Gb=3<va.constant.length?va.constant[3]:0)):(rc=pa(va.buffer)?Y.createStream(34962,va.buffer):Y.getBuffer(va.buffer),La="type"in va?pb[va.type]:rc.dtype,Dd=!!va.normalized,Yb=va.size|0,yc=va.offset|0,Pc=va.stride|0,Jd=va.divisor|0);ib=D.location;Sa=N[ib];if(1===Dc){Sa.buffer||m.enableVertexAttribArray(ib);
Ib=Yb||2;if(Sa.type!==La||Sa.size!==Ib||Sa.buffer!==rc||Sa.normalized!==Dd||Sa.offset!==yc||Sa.stride!==Pc)m.bindBuffer(34962,rc.buffer),m.vertexAttribPointer(ib,Ib,La,Dd,Pc,yc),Sa.type=La,Sa.size=Ib,Sa.buffer=rc,Sa.normalized=Dd,Sa.offset=yc,Sa.stride=Pc;Sa.divisor!==Jd&&(p.vertexAttribDivisorANGLE(ib,Jd),Sa.divisor=Jd)}else if(Sa.buffer&&(m.disableVertexAttribArray(ib),Sa.buffer=null),Sa.x!==Wa||Sa.y!==Ca||Sa.z!==jd||Sa.w!==Gb)m.vertexAttrib4f(ib,Wa,Ca,jd,Gb),Sa.x=Wa,Sa.y=Ca,Sa.z=jd,Sa.w=Gb;eb=
z.fill;Ec=eb[0];ae=eb[1];Tb=eb[2];Ub=eb[3];F&&Sb===Ec&&$b===ae&&rd===Tb&&Ma===Ub||(Sb=Ec,$b=ae,rd=Tb,Ma=Ub,m.uniform4f(fa.location,Ec,ae,Tb,Ub));qb=z.scale;xb=qb[0];Oa=qb[1];F&&jb===xb&&lc===Oa||(jb=xb,lc=Oa,m.uniform2f(C.location,xb,Oa));Kb=z.scaleFract;Zc=Kb[0];jc=Kb[1];F&&fb===Zc&&dd===jc||(fb=Zc,dd=jc,m.uniform2f(E.location,Zc,jc));hc=z.translate;lb=hc[0];ta=hc[1];F&&mb===lb&&rb===ta||(mb=lb,rb=ta,m.uniform2f(Q.location,lb,ta));wa=z.translateFract;Ua=wa[0];za=wa[1];F&&cb===Ua&&gb===za||(cb=Ua,
gb=za,m.uniform2f(A.location,Ua,za));Ia=z.id;F&&Db===Ia||(Db=Ia,m.uniform1f(M.location,Ia));Cb=z.opacity;F&&Ra===Cb||(Ra=Cb,m.uniform1f(H.location,Cb));Ic=B.call(this,h,z,F);Lb=null;(Lb=($a=pa(Ic))?l.createStream(Ic):l.getElements(Ic))&&m.bindBuffer(34963,Lb.buffer.buffer);if(Vb=Lb?Lb.vertCount:-1)0<yd?Lb?p.drawElementsInstancedANGLE(4,Vb,Lb.type,0<<(Lb.type-5121>>1),yd):p.drawArraysInstancedANGLE(4,0,Vb,yd):0>yd&&(Lb?m.drawElements(4,Vb,Lb.type,0<<(Lb.type-5121>>1)):m.drawArrays(4,0,Vb)),h.viewportWidth=
af,h.viewportHeight=Cd,pd&&Y.destroyStream(hd),bc&&Y.destroyStream(rc),$a&&l.destroyStream(Lb)}f.dirty=!0;n.setVAO(null);c&&(y.cpuTime+=performance.now()-g)},draw:function(a){var b,d,c,g,w,z,B,W,da,na,Ha,G,v,ha,ua,S,ga,qa,I,t,ca,x;b=aa.next;b!==aa.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),aa.cur=b);if(f.dirty){b=K.dither;b!==f.dither&&(b?m.enable(3024):m.disable(3024),f.dither=b);b=K.depth_func;b!==f.depth_func&&(m.depthFunc(b),f.depth_func=b);b=L[0];z=L[1];if(b!==
O[0]||z!==O[1])m.depthRange(b,z),O[0]=b,O[1]=z;b=K.depth_mask;b!==f.depth_mask&&(m.depthMask(b),f.depth_mask=b);b=Qa[0];z=Qa[1];d=Qa[2];c=Qa[3];if(b!==Z[0]||z!==Z[1]||d!==Z[2]||c!==Z[3])m.colorMask(b,z,d,c),Z[0]=b,Z[1]=z,Z[2]=d,Z[3]=c;b=K.cull_enable;b!==f.cull_enable&&(b?m.enable(2884):m.disable(2884),f.cull_enable=b);b=K.cull_face;b!==f.cull_face&&(m.cullFace(b),f.cull_face=b);b=K.frontFace;b!==f.frontFace&&(m.frontFace(b),f.frontFace=b);b=K.lineWidth;b!==f.lineWidth&&(m.lineWidth(b),f.lineWidth=
b);b=K.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?m.enable(32823):m.disable(32823),f.polygonOffset_enable=b);b=U[0];z=U[1];if(b!==ra[0]||z!==ra[1])m.polygonOffset(b,z),ra[0]=b,ra[1]=z;b=K.sample_alpha;b!==f.sample_alpha&&(b?m.enable(32926):m.disable(32926),f.sample_alpha=b);b=K.sample_enable;b!==f.sample_enable&&(b?m.enable(32928):m.disable(32928),f.sample_enable=b);b=J[0];z=J[1];if(b!==Wb[0]||z!==Wb[1])m.sampleCoverage(b,z),Wb[0]=b,Wb[1]=z;b=K.stencil_mask;b!==f.stencil_mask&&(m.stencilMask(b),
f.stencil_mask=b);b=u[0];z=u[1];d=u[2];if(b!==ka[0]||z!==ka[1]||d!==ka[2])m.stencilFunc(b,z,d),ka[0]=b,ka[1]=z,ka[2]=d;b=Na[0];z=Na[1];d=Na[2];c=Na[3];if(b!==vb[0]||z!==vb[1]||d!==vb[2]||c!==vb[3])m.stencilOpSeparate(b,z,d,c),vb[0]=b,vb[1]=z,vb[2]=d,vb[3]=c;b=ba[0];z=ba[1];d=ba[2];c=ba[3];if(b!==Ea[0]||z!==Ea[1]||d!==Ea[2]||c!==Ea[3])m.stencilOpSeparate(b,z,d,c),Ea[0]=b,Ea[1]=z,Ea[2]=d,Ea[3]=c}b=a.viewport;d=b.x|0;c=b.y|0;g="width"in b?b.width|0:h.framebufferWidth-d;w="height"in b?b.height|0:h.framebufferHeight-
c;b=h.viewportWidth;h.viewportWidth=g;z=h.viewportHeight;h.viewportHeight=w;m.viewport(d,c,g,w);V[0]=d;V[1]=c;V[2]=g;V[3]=w;m.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;m.enable(3042);f.blend_enable=!0;m.blendEquationSeparate(32774,32774);db[0]=32774;db[1]=32774;m.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;m.disable(2929);f.depth_enable=!1;w=a.viewport;d=w.x|0;c=w.y|0;g="width"in w?w.width|0:h.framebufferWidth-d;w="height"in w?w.height|0:h.framebufferHeight-c;
m.scissor(d,c,g,w);R[0]=d;R[1]=c;R[2]=g;R[3]=w;m.enable(3089);f.scissor_enable=!0;m.disable(2960);f.stencil_enable=!1;if(d=f.profile)B=performance.now(),y.count++;m.useProgram(p.program);c=T.angle_instanced_arrays;n.setVAO(null);ea.buffer=a.positionBuffer;g=!1;W=0;da=!1;Ha=na=0;G=1;v=0;ha=5126;qa=ga=S=ua=0;pa(ea)?(g=!0,w=Y.createStream(34962,ea),ha=w.dtype):(w=Y.getBuffer(ea))?ha=w.dtype:"constant"in ea?(G=2,"number"===typeof ea.constant?(S=ea.constant,ga=qa=ua=0):(S=0<ea.constant.length?ea.constant[0]:
0,ga=1<ea.constant.length?ea.constant[1]:0,qa=2<ea.constant.length?ea.constant[2]:0,ua=3<ea.constant.length?ea.constant[3]:0)):(w=pa(ea.buffer)?Y.createStream(34962,ea.buffer):Y.getBuffer(ea.buffer),ha="type"in ea?pb[ea.type]:w.dtype,da=!!ea.normalized,Ha=ea.size|0,na=ea.offset|0,v=ea.stride|0,W=ea.divisor|0);I=r.location;t=N[I];if(1===G){t.buffer||m.enableVertexAttribArray(I);Ha=Ha||2;if(t.type!==ha||t.size!==Ha||t.buffer!==w||t.normalized!==da||t.offset!==na||t.stride!==v)m.bindBuffer(34962,w.buffer),
m.vertexAttribPointer(I,Ha,ha,da,v,na),t.type=ha,t.size=Ha,t.buffer=w,t.normalized=da,t.offset=na,t.stride=v;t.divisor!==W&&(c.vertexAttribDivisorANGLE(I,W),t.divisor=W)}else if(t.buffer&&(m.disableVertexAttribArray(I),t.buffer=null),t.x!==S||t.y!==ga||t.z!==qa||t.w!==ua)m.vertexAttrib4f(I,S,ga,qa,ua),t.x=S,t.y=ga,t.z=qa,t.w=ua;va.buffer=a.positionFractBuffer;W=!1;na=0;v=!1;ua=ha=0;S=1;I=0;t=5126;x=ca=qa=ga=0;pa(va)?(W=!0,da=Y.createStream(34962,va),t=da.dtype):(da=Y.getBuffer(va))?t=da.dtype:"constant"in
va?(S=2,"number"===typeof va.constant?(qa=va.constant,ca=x=ga=0):(qa=0<va.constant.length?va.constant[0]:0,ca=1<va.constant.length?va.constant[1]:0,x=2<va.constant.length?va.constant[2]:0,ga=3<va.constant.length?va.constant[3]:0)):(da=pa(va.buffer)?Y.createStream(34962,va.buffer):Y.getBuffer(va.buffer),t="type"in va?pb[va.type]:da.dtype,v=!!va.normalized,ua=va.size|0,ha=va.offset|0,I=va.stride|0,na=va.divisor|0);Ha=D.location;G=N[Ha];if(1===S){G.buffer||m.enableVertexAttribArray(Ha);ua=ua||2;if(G.type!==
t||G.size!==ua||G.buffer!==da||G.normalized!==v||G.offset!==ha||G.stride!==I)m.bindBuffer(34962,da.buffer),m.vertexAttribPointer(Ha,ua,t,v,I,ha),G.type=t,G.size=ua,G.buffer=da,G.normalized=v,G.offset=ha,G.stride=I;G.divisor!==na&&(c.vertexAttribDivisorANGLE(Ha,na),G.divisor=na)}else if(G.buffer&&(m.disableVertexAttribArray(Ha),G.buffer=null),G.x!==qa||G.y!==ca||G.z!==x||G.w!==ga)m.vertexAttrib4f(Ha,qa,ca,x,ga),G.x=qa,G.y=ca,G.z=x,G.w=ga;na=a.fill;m.uniform4f(fa.location,na[0],na[1],na[2],na[3]);na=
a.scale;m.uniform2f(C.location,na[0],na[1]);na=a.scaleFract;m.uniform2f(E.location,na[0],na[1]);na=a.translate;m.uniform2f(Q.location,na[0],na[1]);na=a.translateFract;m.uniform2f(A.location,na[0],na[1]);m.uniform1f(M.location,a.id);m.uniform1f(H.location,a.opacity);na=P.call(this,h,a,0);(na=(a=pa(na))?l.createStream(na):l.getElements(na))&&m.bindBuffer(34963,na.buffer.buffer);if(v=na?na.vertCount:-1)ha=e.instances,0<ha?na?c.drawElementsInstancedANGLE(4,v,na.type,0<<(na.type-5121>>1),ha):c.drawArraysInstancedANGLE(4,
0,v,ha):0>ha&&(na?m.drawElements(4,v,na.type,0<<(na.type-5121>>1)):m.drawArrays(4,0,v)),f.dirty=!0,n.setVAO(null),h.viewportWidth=b,h.viewportHeight=z,d&&(y.cpuTime+=performance.now()-B),g&&Y.destroyStream(w),W&&Y.destroyStream(da),a&&l.destroyStream(na)},scope:function(c,m,n){var p,r,u,w,A,C,E,P,D,G,v,H,O,B,M,N,I,t,ca,x,L,R,k,J,Q,q,V,U,T,Z,aa,ba,fa,na,ka,ra,ma,la,Ea,Na,Pd,Qa,db,Wb,Cd,vb,Vd,Wd,me,Yd,pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,
Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb;p=c.viewport;r=p.x|0;u=p.y|0;w="width"in p?p.width|0:h.framebufferWidth-r;A="height"in p?p.height|0:h.framebufferHeight-u;C=h.viewportWidth;h.viewportWidth=w;E=h.viewportHeight;h.viewportHeight=A;P=Ha[0];Ha[0]=r;D=Ha[1];Ha[1]=u;G=Ha[2];Ha[2]=w;v=Ha[3];Ha[3]=A;H=W[0];W[0]=0;O=W[1];W[1]=0;B=W[2];W[2]=0;M=W[3];W[3]=0;N=K.blend_enable;K.blend_enable=!0;I=Ka[0];Ka[0]=32774;t=Ka[1];Ka[1]=32774;ca=Za[0];Za[0]=770;
x=Za[1];Za[1]=771;L=Za[2];Za[2]=773;R=Za[3];Za[3]=1;k=K.depth_enable;K.depth_enable=!1;J=c.viewport;Q=J.x|0;q=J.y|0;V="width"in J?J.width|0:h.framebufferWidth-Q;U="height"in J?J.height|0:h.framebufferHeight-q;T=ab[0];ab[0]=Q;Z=ab[1];ab[1]=q;aa=ab[2];ab[2]=V;ba=ab[3];ab[3]=U;fa=K.scissor_enable;K.scissor_enable=!0;na=K.stencil_enable;K.stencil_enable=!1;if(ka=f.profile)ra=performance.now(),y.count++;ma=g.call(this,h,c,n);la=null;la=(Ea=pa(ma))?l.createStream(ma):l.getElements(ma);Na=e.elements;e.elements=
la;Pd=e.offset;e.offset=0;Qa=la?la.vertCount:-1;db=e.count;e.count=Qa;Wb=e.primitive;e.primitive=4;Cd=c.fill;vb=a[14];a[14]=Cd;Vd=c.id;Wd=a[31];a[31]=Vd;me=c.opacity;Yd=a[10];a[10]=me;pd=h.pixelRatio;hd=a[34];a[34]=pd;wd=c.scale;Yc=a[6];a[6]=wd;id=c.scaleFract;nc=a[7];a[7]=id;Gd=c.translate;ed=a[8];a[8]=Gd;Jc=c.translateFract;qc=a[9];a[9]=Jc;bb=d.call(this,h,c,n);Gc=a[3];a[3]=bb;ea.buffer=c.positionBuffer;Fb=!1;oc=null;Ta=0;Hc=!1;rc=bc=0;Jd=1;Dd=0;yc=5126;La=Pc=Dc=Yb=0;pa(ea)?(Fb=!0,oc=Y.createStream(34962,
ea),yc=oc.dtype):(oc=Y.getBuffer(ea))?yc=oc.dtype:"constant"in ea?(Jd=2,"number"===typeof ea.constant?(Dc=ea.constant,Pc=La=Yb=0):(Dc=0<ea.constant.length?ea.constant[0]:0,Pc=1<ea.constant.length?ea.constant[1]:0,La=2<ea.constant.length?ea.constant[2]:0,Yb=3<ea.constant.length?ea.constant[3]:0)):(oc=pa(ea.buffer)?Y.createStream(34962,ea.buffer):Y.getBuffer(ea.buffer),yc="type"in ea?pb[ea.type]:oc.dtype,Hc=!!ea.normalized,rc=ea.size|0,bc=ea.offset|0,Dd=ea.stride|0,Ta=ea.divisor|0);Gb=z.buffer;z.buffer=
oc;Wa=z.divisor;z.divisor=Ta;Ca=z.normalized;z.normalized=Hc;jd=z.offset;z.offset=bc;ib=z.size;z.size=rc;Sa=z.state;z.state=Jd;Ib=z.stride;z.stride=Dd;eb=z.type;z.type=yc;Ec=z.w;z.w=Yb;Sb=z.x;z.x=Dc;ae=z.y;z.y=Pc;$b=z.z;z.z=La;va.buffer=c.positionFractBuffer;Tb=!1;rd=null;Ub=0;Ma=!1;xb=qb=0;jb=1;Oa=0;lc=5126;jc=fb=Zc=Kb=0;pa(va)?(Tb=!0,rd=Y.createStream(34962,va),lc=rd.dtype):(rd=Y.getBuffer(va))?lc=rd.dtype:"constant"in va?(jb=2,"number"===typeof va.constant?(Zc=va.constant,fb=jc=Kb=0):(Zc=0<va.constant.length?
va.constant[0]:0,fb=1<va.constant.length?va.constant[1]:0,jc=2<va.constant.length?va.constant[2]:0,Kb=3<va.constant.length?va.constant[3]:0)):(rd=pa(va.buffer)?Y.createStream(34962,va.buffer):Y.getBuffer(va.buffer),lc="type"in va?pb[va.type]:rd.dtype,Ma=!!va.normalized,xb=va.size|0,qb=va.offset|0,Oa=va.stride|0,Ub=va.divisor|0);dd=b.buffer;b.buffer=rd;hc=b.divisor;b.divisor=Ub;lb=b.normalized;b.normalized=Ma;mb=b.offset;b.offset=qb;ta=b.size;b.size=xb;rb=b.state;b.state=jb;wa=b.stride;b.stride=Oa;
Ua=b.type;b.type=lc;cb=b.w;b.w=Kb;za=b.x;b.x=Zc;gb=b.y;b.y=fb;Ia=b.z;b.z=jc;Db=da.vert;da.vert=42;Cb=da.frag;da.frag=41;f.dirty=!0;m(h,c,n);h.viewportWidth=C;h.viewportHeight=E;Ha[0]=P;Ha[1]=D;Ha[2]=G;Ha[3]=v;W[0]=H;W[1]=O;W[2]=B;W[3]=M;K.blend_enable=N;Ka[0]=I;Ka[1]=t;Za[0]=ca;Za[1]=x;Za[2]=L;Za[3]=R;K.depth_enable=k;ab[0]=T;ab[1]=Z;ab[2]=aa;ab[3]=ba;K.scissor_enable=fa;K.stencil_enable=na;ka&&(y.cpuTime+=performance.now()-ra);Ea&&l.destroyStream(la);e.elements=Na;e.offset=Pd;e.count=db;e.primitive=
Wb;a[14]=vb;a[31]=Wd;a[10]=Yd;a[34]=hd;a[6]=Yc;a[7]=nc;a[8]=ed;a[9]=qc;a[3]=Gc;Fb&&Y.destroyStream(oc);z.buffer=Gb;z.divisor=Wa;z.normalized=Ca;z.offset=jd;z.size=ib;z.state=Sa;z.stride=Ib;z.type=eb;z.w=Ec;z.x=Sb;z.y=ae;z.z=$b;Tb&&Y.destroyStream(rd);b.buffer=dd;b.divisor=hc;b.normalized=lb;b.offset=mb;b.size=ta;b.state=rb;b.stride=wa;b.type=Ua;b.w=cb;b.x=za;b.y=gb;b.z=Ia;da.vert=Db;da.frag=Cb;f.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,
y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db,Za,la,Qa,Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va,ac,pc,ic,td,tc){var X,F,ja,Ba,wb,Wc,Tc,G,v,ha,ua,S,ga,qa,I,t,ca,x,sa,oa,k,mc,ia,q,Jb,Bb,Ue,pe,le,je,Hd,ue,od,ge,ve,yd,Id,$d,Pd;X=c.attributes;F=c.buffer;ja=c.context;Ba=c.current;wb=c.draw;Wc=c.elements;Tc=c.extensions;G=c.framebuffer;v=c.gl;ha=c.isBufferArgs;ua=c.next;S=c.shader;ga=c.uniforms;qa=c.vao;I=ua.blend_color;t=Ba.blend_color;ca=ua.blend_equation;x=
Ba.blend_equation;sa=ua.blend_func;oa=Ba.blend_func;k=ua.colorMask;mc=Ba.colorMask;ia=ua.depth_range;q=Ba.depth_range;Jb=ua.polygonOffset_offset;Bb=Ba.polygonOffset_offset;Ue=ua.sample_coverage;pe=Ba.sample_coverage;le=ua.scissor_box;je=Ba.scissor_box;Hd=ua.stencil_func;ue=Ba.stencil_func;od=ua.stencil_opBack;ge=Ba.stencil_opBack;ve=ua.stencil_opFront;yd=Ba.stencil_opFront;Id=ua.viewport;$d=Ba.viewport;Pd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,b){var c,d,e,f,g,h;c=G.next;c!==G.cur&&(c?v.bindFramebuffer(36160,c.framebuffer):v.bindFramebuffer(36160,null),G.cur=c);if(Ba.dirty){var l,m,n,p,r,w,z,A,C,I,E,P,D,H,K,B,M,N,Q,S,T,ga,W,aa,fa,na,da,Y,sa,pa,ib,Sa,Ib,eb;l=ua.dither;l!==Ba.dither&&(l?v.enable(3024):v.disable(3024),Ba.dither=l);m=ca[0];n=ca[1];if(m!==x[0]||n!==x[1])v.blendEquationSeparate(m,n),x[0]=m,x[1]=n;p=ua.depth_func;p!==Ba.depth_func&&(v.depthFunc(p),Ba.depth_func=p);r=ia[0];w=ia[1];if(r!==q[0]||w!==q[1])v.depthRange(r,
w),q[0]=r,q[1]=w;z=ua.depth_mask;z!==Ba.depth_mask&&(v.depthMask(z),Ba.depth_mask=z);A=k[0];C=k[1];I=k[2];E=k[3];if(A!==mc[0]||C!==mc[1]||I!==mc[2]||E!==mc[3])v.colorMask(A,C,I,E),mc[0]=A,mc[1]=C,mc[2]=I,mc[3]=E;P=ua.cull_enable;P!==Ba.cull_enable&&(P?v.enable(2884):v.disable(2884),Ba.cull_enable=P);D=ua.cull_face;D!==Ba.cull_face&&(v.cullFace(D),Ba.cull_face=D);H=ua.frontFace;H!==Ba.frontFace&&(v.frontFace(H),Ba.frontFace=H);K=ua.lineWidth;K!==Ba.lineWidth&&(v.lineWidth(K),Ba.lineWidth=K);B=ua.polygonOffset_enable;
B!==Ba.polygonOffset_enable&&(B?v.enable(32823):v.disable(32823),Ba.polygonOffset_enable=B);M=Jb[0];N=Jb[1];if(M!==Bb[0]||N!==Bb[1])v.polygonOffset(M,N),Bb[0]=M,Bb[1]=N;Q=ua.sample_alpha;Q!==Ba.sample_alpha&&(Q?v.enable(32926):v.disable(32926),Ba.sample_alpha=Q);S=ua.sample_enable;S!==Ba.sample_enable&&(S?v.enable(32928):v.disable(32928),Ba.sample_enable=S);T=Ue[0];ga=Ue[1];if(T!==pe[0]||ga!==pe[1])v.sampleCoverage(T,ga),pe[0]=T,pe[1]=ga;W=ua.stencil_mask;W!==Ba.stencil_mask&&(v.stencilMask(W),Ba.stencil_mask=
W);aa=Hd[0];fa=Hd[1];na=Hd[2];if(aa!==ue[0]||fa!==ue[1]||na!==ue[2])v.stencilFunc(aa,fa,na),ue[0]=aa,ue[1]=fa,ue[2]=na;da=ve[0];Y=ve[1];sa=ve[2];pa=ve[3];if(da!==yd[0]||Y!==yd[1]||sa!==yd[2]||pa!==yd[3])v.stencilOpSeparate(da,Y,sa,pa),yd[0]=da,yd[1]=Y,yd[2]=sa,yd[3]=pa;ib=od[0];Sa=od[1];Ib=od[2];eb=od[3];if(ib!==ge[0]||Sa!==ge[1]||Ib!==ge[2]||eb!==ge[3])v.stencilOpSeparate(ib,Sa,Ib,eb),ge[0]=ib,ge[1]=Sa,ge[2]=Ib,ge[3]=eb}v.blendColor(0,0,0,1);t[0]=0;t[1]=0;t[2]=0;t[3]=1;v.enable(3042);Ba.blend_enable=
!0;v.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;v.disable(2929);Ba.depth_enable=!1;v.enable(3089);Ba.scissor_enable=!0;v.disable(2960);Ba.stencil_enable=!1;if(d=Ba.profile)e=performance.now(),y.count+=b;v.useProgram(ma.program);f=Tc.angle_instanced_arrays;var Ec;qa.setVAO(null);v.uniform1i(u.location,!1);v.uniform1i(vb.location,ra.bind());Ec=wb.instances;for(g=0;g<b;++g){h=a[g];var Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,
Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Id,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,le,vd,zf,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,Se,Ie,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,sd,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf,of,lf,pf,Af,Bf,Le,ye,mf,nf,Cf,Ff,yf,Df,Ef,tf,uf,sf,vf,wf,Hf,If,Jf,Kf,qf,Qf,Gf,
rf,cg,Rf,Sf;Sb=h.viewport;ae=Sb.x|0;$b=Sb.y|0;Tb="width"in Sb?Sb.width|0:ja.framebufferWidth-ae;rd="height"in Sb?Sb.height|0:ja.framebufferHeight-$b;Ub=ja.viewportWidth;ja.viewportWidth=Tb;Ma=ja.viewportHeight;ja.viewportHeight=rd;v.viewport(ae,$b,Tb,rd);$d[0]=ae;$d[1]=$b;$d[2]=Tb;$d[3]=rd;qb=h.viewport;xb=qb.x|0;jb=qb.y|0;Oa="width"in qb?qb.width|0:ja.framebufferWidth-xb;lc="height"in qb?qb.height|0:ja.framebufferHeight-jb;v.scissor(xb,jb,Oa,lc);je[0]=xb;je[1]=jb;je[2]=Oa;je[3]=lc;Kb=Ka.call(this,
ja,h,g);Zc=!1;fb=null;jc=0;dd=!1;lb=hc=0;mb=1;ta=0;rb=5126;za=cb=Ua=wa=0;ha(Kb)?(Zc=!0,fb=F.createStream(34962,Kb),rb=fb.dtype):(fb=F.getBuffer(Kb))?rb=fb.dtype:"constant"in Kb?(mb=2,"number"===typeof Kb.constant?(Ua=Kb.constant,cb=za=wa=0):(Ua=0<Kb.constant.length?Kb.constant[0]:0,cb=1<Kb.constant.length?Kb.constant[1]:0,za=2<Kb.constant.length?Kb.constant[2]:0,wa=3<Kb.constant.length?Kb.constant[3]:0)):(fb=ha(Kb.buffer)?F.createStream(34962,Kb.buffer):F.getBuffer(Kb.buffer),rb="type"in Kb?Pd[Kb.type]:
fb.dtype,dd=!!Kb.normalized,lb=Kb.size|0,hc=Kb.offset|0,ta=Kb.stride|0,jc=Kb.divisor|0);gb=pc.location;Ia=X[gb];if(1===mb){Ia.buffer||v.enableVertexAttribArray(gb);Db=lb||1;if(Ia.type!==rb||Ia.size!==Db||Ia.buffer!==fb||Ia.normalized!==dd||Ia.offset!==hc||Ia.stride!==ta)v.bindBuffer(34962,fb.buffer),v.vertexAttribPointer(gb,Db,rb,dd,ta,hc),Ia.type=rb,Ia.size=Db,Ia.buffer=fb,Ia.normalized=dd,Ia.offset=hc,Ia.stride=ta;Ia.divisor!==jc&&(f.vertexAttribDivisorANGLE(gb,jc),Ia.divisor=jc)}else if(Ia.buffer&&
(v.disableVertexAttribArray(gb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==cb||Ia.z!==za||Ia.w!==wa)v.vertexAttrib4f(gb,Ua,cb,za,wa),Ia.x=Ua,Ia.y=cb,Ia.z=za,Ia.w=wa;Cb=db.call(this,ja,h,g);Ra=!1;Ic=null;Lb=0;$a=!1;xa=Vb=0;Ad=1;Ja=0;Pb=5126;dc=ya=kb=hb=0;ha(Cb)?(Ra=!0,Ic=F.createStream(34962,Cb),Pb=Ic.dtype):(Ic=F.getBuffer(Cb))?Pb=Ic.dtype:"constant"in Cb?(Ad=2,"number"===typeof Cb.constant?(kb=Cb.constant,ya=dc=hb=0):(kb=0<Cb.constant.length?Cb.constant[0]:0,ya=1<Cb.constant.length?Cb.constant[1]:0,dc=2<
Cb.constant.length?Cb.constant[2]:0,hb=3<Cb.constant.length?Cb.constant[3]:0)):(Ic=ha(Cb.buffer)?F.createStream(34962,Cb.buffer):F.getBuffer(Cb.buffer),Pb="type"in Cb?Pd[Cb.type]:Ic.dtype,$a=!!Cb.normalized,xa=Cb.size|0,Vb=Cb.offset|0,Ja=Cb.stride|0,Lb=Cb.divisor|0);Da=td.location;sb=X[Da];if(1===Ad){sb.buffer||v.enableVertexAttribArray(Da);tb=xa||1;if(sb.type!==Pb||sb.size!==tb||sb.buffer!==Ic||sb.normalized!==$a||sb.offset!==Vb||sb.stride!==Ja)v.bindBuffer(34962,Ic.buffer),v.vertexAttribPointer(Da,
tb,Pb,$a,Ja,Vb),sb.type=Pb,sb.size=tb,sb.buffer=Ic,sb.normalized=$a,sb.offset=Vb,sb.stride=Ja;sb.divisor!==Lb&&(f.vertexAttribDivisorANGLE(Da,Lb),sb.divisor=Lb)}else if(sb.buffer&&(v.disableVertexAttribArray(Da),sb.buffer=null),sb.x!==kb||sb.y!==ya||sb.z!==dc||sb.w!==hb)v.vertexAttrib4f(Da,kb,ya,dc,hb),sb.x=kb,sb.y=ya,sb.z=dc,sb.w=hb;Xa=Za.call(this,ja,h,g);Ya=!1;kc=null;ad=0;uc=!1;Nb=Va=0;Oc=1;Fa=0;wc=5126;yb=nb=Aa=Pa=0;ha(Xa)?(Ya=!0,kc=F.createStream(34962,Xa),wc=kc.dtype):(kc=F.getBuffer(Xa))?
wc=kc.dtype:"constant"in Xa?(Oc=2,"number"===typeof Xa.constant?(Aa=Xa.constant,nb=yb=Pa=0):(Aa=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,yb=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:0)):(kc=ha(Xa.buffer)?F.createStream(34962,Xa.buffer):F.getBuffer(Xa.buffer),wc="type"in Xa?Pd[Xa.type]:kc.dtype,uc=!!Xa.normalized,Nb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,ad=Xa.divisor|0);Eb=ic.location;ub=X[Eb];if(1===Oc){ub.buffer||v.enableVertexAttribArray(Eb);
vc=Nb||1;if(ub.type!==wc||ub.size!==vc||ub.buffer!==kc||ub.normalized!==uc||ub.offset!==Va||ub.stride!==Fa)v.bindBuffer(34962,kc.buffer),v.vertexAttribPointer(Eb,vc,wc,uc,Fa,Va),ub.type=wc,ub.size=vc,ub.buffer=kc,ub.normalized=uc,ub.offset=Va,ub.stride=Fa;ub.divisor!==ad&&(f.vertexAttribDivisorANGLE(Eb,ad),ub.divisor=ad)}else if(ub.buffer&&(v.disableVertexAttribArray(Eb),ub.buffer=null),ub.x!==Aa||ub.y!==nb||ub.z!==yb||ub.w!==Pa)v.vertexAttrib4f(Eb,Aa,nb,yb,Pa),ub.x=Aa,ub.y=nb,ub.z=yb,ub.w=Pa;zb=
la.call(this,ja,h,g);Ed=!1;sc=null;ud=0;Kc=!1;qd=bd=0;Xb=1;cc=0;Qb=5126;Ab=ob=Zb=Ga=0;ha(zb)?(Ed=!0,sc=F.createStream(34962,zb),Qb=sc.dtype):(sc=F.getBuffer(zb))?Qb=sc.dtype:"constant"in zb?(Xb=2,"number"===typeof zb.constant?(Zb=zb.constant,ob=Ab=Ga=0):(Zb=0<zb.constant.length?zb.constant[0]:0,ob=1<zb.constant.length?zb.constant[1]:0,Ab=2<zb.constant.length?zb.constant[2]:0,Ga=3<zb.constant.length?zb.constant[3]:0)):(sc=ha(zb.buffer)?F.createStream(34962,zb.buffer):F.getBuffer(zb.buffer),Qb="type"in
zb?Pd[zb.type]:sc.dtype,Kc=!!zb.normalized,qd=zb.size|0,bd=zb.offset|0,cc=zb.stride|0,ud=zb.divisor|0);Ob=tc.location;Rb=X[Ob];if(1===Xb){Rb.buffer||v.enableVertexAttribArray(Ob);ec=qd||1;if(Rb.type!==Qb||Rb.size!==ec||Rb.buffer!==sc||Rb.normalized!==Kc||Rb.offset!==bd||Rb.stride!==cc)v.bindBuffer(34962,sc.buffer),v.vertexAttribPointer(Ob,ec,Qb,Kc,cc,bd),Rb.type=Qb,Rb.size=ec,Rb.buffer=sc,Rb.normalized=Kc,Rb.offset=bd,Rb.stride=cc;Rb.divisor!==ud&&(f.vertexAttribDivisorANGLE(Ob,ud),Rb.divisor=ud)}else if(Rb.buffer&&
(v.disableVertexAttribArray(Ob),Rb.buffer=null),Rb.x!==Zb||Rb.y!==ob||Rb.z!==Ab||Rb.w!==Ga)v.vertexAttrib4f(Ob,Zb,ob,Ab,Ga),Rb.x=Zb,Rb.y=ob,Rb.z=Ab,Rb.w=Ga;gc=Qa.call(this,ja,h,g);Id=!1;zc=null;Ac=0;Bc=!1;Xc=Lc=0;Qc=1;Mc=0;Mb=5126;Rc=Fc=Nc=Hb=0;ha(gc)?(Id=!0,zc=F.createStream(34962,gc),Mb=zc.dtype):(zc=F.getBuffer(gc))?Mb=zc.dtype:"constant"in gc?(Qc=2,"number"===typeof gc.constant?(Nc=gc.constant,Fc=Rc=Hb=0):(Nc=0<gc.constant.length?gc.constant[0]:0,Fc=1<gc.constant.length?gc.constant[1]:0,Rc=2<
gc.constant.length?gc.constant[2]:0,Hb=3<gc.constant.length?gc.constant[3]:0)):(zc=ha(gc.buffer)?F.createStream(34962,gc.buffer):F.getBuffer(gc.buffer),Mb="type"in gc?Pd[gc.type]:zc.dtype,Bc=!!gc.normalized,Xc=gc.size|0,Lc=gc.offset|0,Mc=gc.stride|0,Ac=gc.divisor|0);fc=ea.location;Uc=X[fc];if(1===Qc){Uc.buffer||v.enableVertexAttribArray(fc);kd=Xc||1;if(Uc.type!==Mb||Uc.size!==kd||Uc.buffer!==zc||Uc.normalized!==Bc||Uc.offset!==Lc||Uc.stride!==Mc)v.bindBuffer(34962,zc.buffer),v.vertexAttribPointer(fc,
kd,Mb,Bc,Mc,Lc),Uc.type=Mb,Uc.size=kd,Uc.buffer=zc,Uc.normalized=Bc,Uc.offset=Lc,Uc.stride=Mc;Uc.divisor!==Ac&&(f.vertexAttribDivisorANGLE(fc,Ac),Uc.divisor=Ac)}else if(Uc.buffer&&(v.disableVertexAttribArray(fc),Uc.buffer=null),Uc.x!==Nc||Uc.y!==Fc||Uc.z!==Rc||Uc.w!==Hb)v.vertexAttrib4f(fc,Nc,Fc,Rc,Hb),Uc.x=Nc,Uc.y=Fc,Uc.z=Rc,Uc.w=Hb;fd=Z.call(this,ja,h,g);md=!1;Vc=null;le=0;vd=!1;te=zf=0;ne=1;Md=0;Kd=5126;gd=ld=Cc=cd=0;ha(fd)?(md=!0,Vc=F.createStream(34962,fd),Kd=Vc.dtype):(Vc=F.getBuffer(fd))?Kd=
Vc.dtype:"constant"in fd?(ne=2,"number"===typeof fd.constant?(Cc=fd.constant,ld=gd=cd=0):(Cc=0<fd.constant.length?fd.constant[0]:0,ld=1<fd.constant.length?fd.constant[1]:0,gd=2<fd.constant.length?fd.constant[2]:0,cd=3<fd.constant.length?fd.constant[3]:0)):(Vc=ha(fd.buffer)?F.createStream(34962,fd.buffer):F.getBuffer(fd.buffer),Kd="type"in fd?Pd[fd.type]:Vc.dtype,vd=!!fd.normalized,te=fd.size|0,zf=fd.offset|0,Md=fd.stride|0,le=fd.divisor|0);$c=ab.location;nd=X[$c];if(1===ne){nd.buffer||v.enableVertexAttribArray($c);
zd=te||1;if(nd.type!==Kd||nd.size!==zd||nd.buffer!==Vc||nd.normalized!==vd||nd.offset!==zf||nd.stride!==Md)v.bindBuffer(34962,Vc.buffer),v.vertexAttribPointer($c,zd,Kd,vd,Md,zf),nd.type=Kd,nd.size=zd,nd.buffer=Vc,nd.normalized=vd,nd.offset=zf,nd.stride=Md;nd.divisor!==le&&(f.vertexAttribDivisorANGLE($c,le),nd.divisor=le)}else if(nd.buffer&&(v.disableVertexAttribArray($c),nd.buffer=null),nd.x!==Cc||nd.y!==ld||nd.z!==gd||nd.w!==cd)v.vertexAttrib4f($c,Cc,ld,gd,cd),nd.x=Cc,nd.y=ld,nd.z=gd,nd.w=cd;Bd=
L.call(this,ja,h,g);Se=!1;Ie=null;we=0;fe=!1;de=ee=0;qe=1;be=0;he=5126;ke=re=Sc=xc=0;ha(Bd)?(Se=!0,Ie=F.createStream(34962,Bd),he=Ie.dtype):(Ie=F.getBuffer(Bd))?he=Ie.dtype:"constant"in Bd?(qe=2,"number"===typeof Bd.constant?(Sc=Bd.constant,re=ke=xc=0):(Sc=0<Bd.constant.length?Bd.constant[0]:0,re=1<Bd.constant.length?Bd.constant[1]:0,ke=2<Bd.constant.length?Bd.constant[2]:0,xc=3<Bd.constant.length?Bd.constant[3]:0)):(Ie=ha(Bd.buffer)?F.createStream(34962,Bd.buffer):F.getBuffer(Bd.buffer),he="type"in
Bd?Pd[Bd.type]:Ie.dtype,fe=!!Bd.normalized,de=Bd.size|0,ee=Bd.offset|0,be=Bd.stride|0,we=Bd.divisor|0);Ld=R.location;Od=X[Ld];if(1===qe){Od.buffer||v.enableVertexAttribArray(Ld);Qd=de||4;if(Od.type!==he||Od.size!==Qd||Od.buffer!==Ie||Od.normalized!==fe||Od.offset!==ee||Od.stride!==be)v.bindBuffer(34962,Ie.buffer),v.vertexAttribPointer(Ld,Qd,he,fe,be,ee),Od.type=he,Od.size=Qd,Od.buffer=Ie,Od.normalized=fe,Od.offset=ee,Od.stride=be;Od.divisor!==we&&(f.vertexAttribDivisorANGLE(Ld,we),Od.divisor=we)}else if(Od.buffer&&
(v.disableVertexAttribArray(Ld),Od.buffer=null),Od.x!==Sc||Od.y!==re||Od.z!==ke||Od.w!==xc)v.vertexAttrib4f(Ld,Sc,re,ke,xc),Od.x=Sc,Od.y=re,Od.z=ke,Od.w=xc;Rd=O.call(this,ja,h,g);ie=!1;Ce=null;sd=0;oe=!1;Ne=Me=0;Je=1;se=0;ze=5126;Ae=Fe=Ee=De=0;ha(Rd)?(ie=!0,Ce=F.createStream(34962,Rd),ze=Ce.dtype):(Ce=F.getBuffer(Rd))?ze=Ce.dtype:"constant"in Rd?(Je=2,"number"===typeof Rd.constant?(Ee=Rd.constant,Fe=Ae=De=0):(Ee=0<Rd.constant.length?Rd.constant[0]:0,Fe=1<Rd.constant.length?Rd.constant[1]:0,Ae=2<Rd.constant.length?
Rd.constant[2]:0,De=3<Rd.constant.length?Rd.constant[3]:0)):(Ce=ha(Rd.buffer)?F.createStream(34962,Rd.buffer):F.getBuffer(Rd.buffer),ze="type"in Rd?Pd[Rd.type]:Ce.dtype,oe=!!Rd.normalized,Ne=Rd.size|0,Me=Rd.offset|0,se=Rd.stride|0,sd=Rd.divisor|0);Nd=Wb.location;Ud=X[Nd];if(1===Je){Ud.buffer||v.enableVertexAttribArray(Nd);Zd=Ne||4;if(Ud.type!==ze||Ud.size!==Zd||Ud.buffer!==Ce||Ud.normalized!==oe||Ud.offset!==Me||Ud.stride!==se)v.bindBuffer(34962,Ce.buffer),v.vertexAttribPointer(Nd,Zd,ze,oe,se,Me),
Ud.type=ze,Ud.size=Zd,Ud.buffer=Ce,Ud.normalized=oe,Ud.offset=Me,Ud.stride=se;Ud.divisor!==sd&&(f.vertexAttribDivisorANGLE(Nd,sd),Ud.divisor=sd)}else if(Ud.buffer&&(v.disableVertexAttribArray(Nd),Ud.buffer=null),Ud.x!==Ee||Ud.y!==Fe||Ud.z!==Ae||Ud.w!==De)v.vertexAttrib4f(Nd,Ee,Fe,Ae,De),Ud.x=Ee,Ud.y=Fe,Ud.z=Ae,Ud.w=De;ce=U.call(this,ja,h,g);Ge=!1;Fd=null;Sd=0;xe=!1;ef=He=0;We=1;Oe=0;Ke=5126;Qe=Pe=Te=Ve=0;ha(ce)?(Ge=!0,Fd=F.createStream(34962,ce),Ke=Fd.dtype):(Fd=F.getBuffer(ce))?Ke=Fd.dtype:"constant"in
ce?(We=2,"number"===typeof ce.constant?(Te=ce.constant,Pe=Qe=Ve=0):(Te=0<ce.constant.length?ce.constant[0]:0,Pe=1<ce.constant.length?ce.constant[1]:0,Qe=2<ce.constant.length?ce.constant[2]:0,Ve=3<ce.constant.length?ce.constant[3]:0)):(Fd=ha(ce.buffer)?F.createStream(34962,ce.buffer):F.getBuffer(ce.buffer),Ke="type"in ce?Pd[ce.type]:Fd.dtype,xe=!!ce.normalized,ef=ce.size|0,He=ce.offset|0,Oe=ce.stride|0,Sd=ce.divisor|0);Td=ka.location;Xd=X[Td];if(1===We){Xd.buffer||v.enableVertexAttribArray(Td);Re=
ef||1;if(Xd.type!==Ke||Xd.size!==Re||Xd.buffer!==Fd||Xd.normalized!==xe||Xd.offset!==He||Xd.stride!==Oe)v.bindBuffer(34962,Fd.buffer),v.vertexAttribPointer(Td,Re,Ke,xe,Oe,He),Xd.type=Ke,Xd.size=Re,Xd.buffer=Fd,Xd.normalized=xe,Xd.offset=He,Xd.stride=Oe;Xd.divisor!==Sd&&(f.vertexAttribDivisorANGLE(Td,Sd),Xd.divisor=Sd)}else if(Xd.buffer&&(v.disableVertexAttribArray(Td),Xd.buffer=null),Xd.x!==Te||Xd.y!==Pe||Xd.z!==Qe||Xd.w!==Ve)v.vertexAttrib4f(Td,Te,Pe,Qe,Ve),Xd.x=Te,Xd.y=Pe,Xd.z=Qe,Xd.w=Ve;ff=ja.pixelRatio;
g&&kf===ff||(kf=ff,v.uniform1f(Ha.location,ff));bf=h.scale;gf=bf[0];jf=bf[1];g&&hf===gf&&of===jf||(hf=gf,of=jf,v.uniform2f(V.location,gf,jf));lf=h.scaleFract;pf=lf[0];Bf=lf[1];g&&Af===pf&&Le===Bf||(Af=pf,Le=Bf,v.uniform2f(pb.location,pf,Bf));ye=h.translate;mf=ye[0];Cf=ye[1];g&&nf===mf&&Ff===Cf||(nf=mf,Ff=Cf,v.uniform2f(va.location,mf,Cf));yf=h.translateFract;Df=yf[0];tf=yf[1];g&&Ef===Df&&uf===tf||(Ef=Df,uf=tf,v.uniform2f(ac.location,Df,tf));sf=J.call(this,ja,h,g);vf=sf[0];Hf=sf[1];g&&wf===vf&&If===
Hf||(wf=vf,If=Hf,v.uniform2f(Na.location,vf,Hf));Jf=h.opacity;g&&Kf===Jf||(Kf=Jf,v.uniform1f(Ea.location,Jf));(qf=h.markerTexture)&&"framebuffer"===qf._reglType&&(qf=qf.color[0]);Qf=qf._texture;v.uniform1i(ba.location,Qf.bind());Gf=h.elements;rf=null;(rf=(cg=ha(Gf))?Wc.createStream(Gf):Wc.getElements(Gf))&&v.bindBuffer(34963,rf.buffer.buffer);Rf=h.offset;if(Sf=h.count)0<Ec?rf?f.drawElementsInstancedANGLE(0,Sf,rf.type,Rf<<(rf.type-5121>>1),Ec):f.drawArraysInstancedANGLE(0,Rf,Sf,Ec):0>Ec&&(rf?v.drawElements(0,
Sf,rf.type,Rf<<(rf.type-5121>>1)):v.drawArrays(0,Rf,Sf)),ja.viewportWidth=Ub,ja.viewportHeight=Ma,Zc&&F.destroyStream(fb),Ra&&F.destroyStream(Ic),Ya&&F.destroyStream(kc),Ed&&F.destroyStream(sc),Id&&F.destroyStream(zc),md&&F.destroyStream(Vc),Se&&F.destroyStream(Ie),ie&&F.destroyStream(Ce),Ge&&F.destroyStream(Fd),Qf.unbind(),cg&&Wc.destroyStream(rf)}ra.unbind();Ba.dirty=!0;qa.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(a){var c,e,f,h,l,m,n,A,C,I,E,D,K,O,N,J,L,Q,S,T,U,ga,W,aa,Z,
da,Y,sa,pa,ra,la,ma,La,Gb,Wa,Ca,Ka,ib,Sa,Ib,eb,Qa,Sb,db,$b,Tb,Za,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Id,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,xd,vd,le,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,sd,Ie,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Xe,oe,Me,Ne,Je,se;c=G.next;c!==G.cur&&(c?v.bindFramebuffer(36160,
c.framebuffer):v.bindFramebuffer(36160,null),G.cur=c);if(Ba.dirty){var ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf,of,lf,pf;ze=ua.dither;ze!==Ba.dither&&(ze?v.enable(3024):v.disable(3024),Ba.dither=ze);De=ca[0];Ee=ca[1];if(De!==x[0]||Ee!==x[1])v.blendEquationSeparate(De,Ee),x[0]=De,x[1]=Ee;Fe=ua.depth_func;Fe!==Ba.depth_func&&(v.depthFunc(Fe),Ba.depth_func=Fe);Ae=ia[0];Nd=ia[1];if(Ae!==q[0]||Nd!==q[1])v.depthRange(Ae,Nd),q[0]=Ae,q[1]=Nd;Ud=ua.depth_mask;
Ud!==Ba.depth_mask&&(v.depthMask(Ud),Ba.depth_mask=Ud);Zd=k[0];ce=k[1];Ge=k[2];Fd=k[3];if(Zd!==mc[0]||ce!==mc[1]||Ge!==mc[2]||Fd!==mc[3])v.colorMask(Zd,ce,Ge,Fd),mc[0]=Zd,mc[1]=ce,mc[2]=Ge,mc[3]=Fd;Sd=ua.cull_enable;Sd!==Ba.cull_enable&&(Sd?v.enable(2884):v.disable(2884),Ba.cull_enable=Sd);xe=ua.cull_face;xe!==Ba.cull_face&&(v.cullFace(xe),Ba.cull_face=xe);He=ua.frontFace;He!==Ba.frontFace&&(v.frontFace(He),Ba.frontFace=He);ef=ua.lineWidth;ef!==Ba.lineWidth&&(v.lineWidth(ef),Ba.lineWidth=ef);We=ua.polygonOffset_enable;
We!==Ba.polygonOffset_enable&&(We?v.enable(32823):v.disable(32823),Ba.polygonOffset_enable=We);Oe=Jb[0];Ke=Jb[1];if(Oe!==Bb[0]||Ke!==Bb[1])v.polygonOffset(Oe,Ke),Bb[0]=Oe,Bb[1]=Ke;Ve=ua.sample_alpha;Ve!==Ba.sample_alpha&&(Ve?v.enable(32926):v.disable(32926),Ba.sample_alpha=Ve);Te=ua.sample_enable;Te!==Ba.sample_enable&&(Te?v.enable(32928):v.disable(32928),Ba.sample_enable=Te);Pe=Ue[0];Qe=Ue[1];if(Pe!==pe[0]||Qe!==pe[1])v.sampleCoverage(Pe,Qe),pe[0]=Pe,pe[1]=Qe;Td=ua.stencil_mask;Td!==Ba.stencil_mask&&
(v.stencilMask(Td),Ba.stencil_mask=Td);Xd=Hd[0];Re=Hd[1];ff=Hd[2];if(Xd!==ue[0]||Re!==ue[1]||ff!==ue[2])v.stencilFunc(Xd,Re,ff),ue[0]=Xd,ue[1]=Re,ue[2]=ff;kf=ve[0];bf=ve[1];gf=ve[2];hf=ve[3];if(kf!==yd[0]||bf!==yd[1]||gf!==yd[2]||hf!==yd[3])v.stencilOpSeparate(kf,bf,gf,hf),yd[0]=kf,yd[1]=bf,yd[2]=gf,yd[3]=hf;jf=od[0];of=od[1];lf=od[2];pf=od[3];if(jf!==ge[0]||of!==ge[1]||lf!==ge[2]||pf!==ge[3])v.stencilOpSeparate(jf,of,lf,pf),ge[0]=jf,ge[1]=of,ge[2]=lf,ge[3]=pf}e=a.viewport;f=e.x|0;h=e.y|0;l="width"in
e?e.width|0:ja.framebufferWidth-f;m="height"in e?e.height|0:ja.framebufferHeight-h;n=ja.viewportWidth;ja.viewportWidth=l;A=ja.viewportHeight;ja.viewportHeight=m;v.viewport(f,h,l,m);$d[0]=f;$d[1]=h;$d[2]=l;$d[3]=m;v.blendColor(0,0,0,1);t[0]=0;t[1]=0;t[2]=0;t[3]=1;v.enable(3042);Ba.blend_enable=!0;v.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;v.disable(2929);Ba.depth_enable=!1;C=a.viewport;I=C.x|0;E=C.y|0;D="width"in C?C.width|0:ja.framebufferWidth-I;K="height"in C?C.height|
0:ja.framebufferHeight-E;v.scissor(I,E,D,K);je[0]=I;je[1]=E;je[2]=D;je[3]=K;v.enable(3089);Ba.scissor_enable=!0;v.disable(2960);Ba.stencil_enable=!1;if(O=Ba.profile)N=performance.now(),y.count++;v.useProgram(p.program);J=Tc.angle_instanced_arrays;qa.setVAO(null);L=P.call(this,ja,a,0);Q=!1;S=null;T=0;U=!1;W=ga=0;aa=1;Z=0;da=5126;ra=pa=sa=Y=0;ha(L)?(Q=!0,S=F.createStream(34962,L),da=S.dtype):(S=F.getBuffer(L))?da=S.dtype:"constant"in L?(aa=2,"number"===typeof L.constant?(sa=L.constant,pa=ra=Y=0):(sa=
0<L.constant.length?L.constant[0]:0,pa=1<L.constant.length?L.constant[1]:0,ra=2<L.constant.length?L.constant[2]:0,Y=3<L.constant.length?L.constant[3]:0)):(S=ha(L.buffer)?F.createStream(34962,L.buffer):F.getBuffer(L.buffer),da="type"in L?Pd[L.type]:S.dtype,U=!!L.normalized,W=L.size|0,ga=L.offset|0,Z=L.stride|0,T=L.divisor|0);la=pc.location;ma=X[la];if(1===aa){ma.buffer||v.enableVertexAttribArray(la);La=W||1;if(ma.type!==da||ma.size!==La||ma.buffer!==S||ma.normalized!==U||ma.offset!==ga||ma.stride!==
Z)v.bindBuffer(34962,S.buffer),v.vertexAttribPointer(la,La,da,U,Z,ga),ma.type=da,ma.size=La,ma.buffer=S,ma.normalized=U,ma.offset=ga,ma.stride=Z;ma.divisor!==T&&(J.vertexAttribDivisorANGLE(la,T),ma.divisor=T)}else if(ma.buffer&&(v.disableVertexAttribArray(la),ma.buffer=null),ma.x!==sa||ma.y!==pa||ma.z!==ra||ma.w!==Y)v.vertexAttrib4f(la,sa,pa,ra,Y),ma.x=sa,ma.y=pa,ma.z=ra,ma.w=Y;Gb=g.call(this,ja,a,0);Wa=!1;Ca=null;Ka=0;ib=!1;Ib=Sa=0;eb=1;Qa=0;Sb=5126;Za=Tb=$b=db=0;ha(Gb)?(Wa=!0,Ca=F.createStream(34962,
Gb),Sb=Ca.dtype):(Ca=F.getBuffer(Gb))?Sb=Ca.dtype:"constant"in Gb?(eb=2,"number"===typeof Gb.constant?($b=Gb.constant,Tb=Za=db=0):($b=0<Gb.constant.length?Gb.constant[0]:0,Tb=1<Gb.constant.length?Gb.constant[1]:0,Za=2<Gb.constant.length?Gb.constant[2]:0,db=3<Gb.constant.length?Gb.constant[3]:0)):(Ca=ha(Gb.buffer)?F.createStream(34962,Gb.buffer):F.getBuffer(Gb.buffer),Sb="type"in Gb?Pd[Gb.type]:Ca.dtype,ib=!!Gb.normalized,Ib=Gb.size|0,Sa=Gb.offset|0,Qa=Gb.stride|0,Ka=Gb.divisor|0);Ub=td.location;Ma=
X[Ub];if(1===eb){Ma.buffer||v.enableVertexAttribArray(Ub);qb=Ib||1;if(Ma.type!==Sb||Ma.size!==qb||Ma.buffer!==Ca||Ma.normalized!==ib||Ma.offset!==Sa||Ma.stride!==Qa)v.bindBuffer(34962,Ca.buffer),v.vertexAttribPointer(Ub,qb,Sb,ib,Qa,Sa),Ma.type=Sb,Ma.size=qb,Ma.buffer=Ca,Ma.normalized=ib,Ma.offset=Sa,Ma.stride=Qa;Ma.divisor!==Ka&&(J.vertexAttribDivisorANGLE(Ub,Ka),Ma.divisor=Ka)}else if(Ma.buffer&&(v.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==$b||Ma.y!==Tb||Ma.z!==Za||Ma.w!==db)v.vertexAttrib4f(Ub,
$b,Tb,Za,db),Ma.x=$b,Ma.y=Tb,Ma.z=Za,Ma.w=db;xb=d.call(this,ja,a,0);jb=!1;Oa=null;lc=0;Kb=!1;fb=Zc=0;jc=1;dd=0;hc=5126;rb=ta=mb=lb=0;ha(xb)?(jb=!0,Oa=F.createStream(34962,xb),hc=Oa.dtype):(Oa=F.getBuffer(xb))?hc=Oa.dtype:"constant"in xb?(jc=2,"number"===typeof xb.constant?(mb=xb.constant,ta=rb=lb=0):(mb=0<xb.constant.length?xb.constant[0]:0,ta=1<xb.constant.length?xb.constant[1]:0,rb=2<xb.constant.length?xb.constant[2]:0,lb=3<xb.constant.length?xb.constant[3]:0)):(Oa=ha(xb.buffer)?F.createStream(34962,
xb.buffer):F.getBuffer(xb.buffer),hc="type"in xb?Pd[xb.type]:Oa.dtype,Kb=!!xb.normalized,fb=xb.size|0,Zc=xb.offset|0,dd=xb.stride|0,lc=xb.divisor|0);wa=ic.location;Ua=X[wa];if(1===jc){Ua.buffer||v.enableVertexAttribArray(wa);cb=fb||1;if(Ua.type!==hc||Ua.size!==cb||Ua.buffer!==Oa||Ua.normalized!==Kb||Ua.offset!==Zc||Ua.stride!==dd)v.bindBuffer(34962,Oa.buffer),v.vertexAttribPointer(wa,cb,hc,Kb,dd,Zc),Ua.type=hc,Ua.size=cb,Ua.buffer=Oa,Ua.normalized=Kb,Ua.offset=Zc,Ua.stride=dd;Ua.divisor!==lc&&(J.vertexAttribDivisorANGLE(wa,
lc),Ua.divisor=lc)}else if(Ua.buffer&&(v.disableVertexAttribArray(wa),Ua.buffer=null),Ua.x!==mb||Ua.y!==ta||Ua.z!==rb||Ua.w!==lb)v.vertexAttrib4f(wa,mb,ta,rb,lb),Ua.x=mb,Ua.y=ta,Ua.z=rb,Ua.w=lb;za=z.call(this,ja,a,0);gb=!1;Ia=null;Db=0;Cb=!1;Ic=Ra=0;Lb=1;$a=0;Vb=5126;Pb=Ja=Ad=xa=0;ha(za)?(gb=!0,Ia=F.createStream(34962,za),Vb=Ia.dtype):(Ia=F.getBuffer(za))?Vb=Ia.dtype:"constant"in za?(Lb=2,"number"===typeof za.constant?(Ad=za.constant,Ja=Pb=xa=0):(Ad=0<za.constant.length?za.constant[0]:0,Ja=1<za.constant.length?
za.constant[1]:0,Pb=2<za.constant.length?za.constant[2]:0,xa=3<za.constant.length?za.constant[3]:0)):(Ia=ha(za.buffer)?F.createStream(34962,za.buffer):F.getBuffer(za.buffer),Vb="type"in za?Pd[za.type]:Ia.dtype,Cb=!!za.normalized,Ic=za.size|0,Ra=za.offset|0,$a=za.stride|0,Db=za.divisor|0);hb=tc.location;kb=X[hb];if(1===Lb){kb.buffer||v.enableVertexAttribArray(hb);ya=Ic||1;if(kb.type!==Vb||kb.size!==ya||kb.buffer!==Ia||kb.normalized!==Cb||kb.offset!==Ra||kb.stride!==$a)v.bindBuffer(34962,Ia.buffer),
v.vertexAttribPointer(hb,ya,Vb,Cb,$a,Ra),kb.type=Vb,kb.size=ya,kb.buffer=Ia,kb.normalized=Cb,kb.offset=Ra,kb.stride=$a;kb.divisor!==Db&&(J.vertexAttribDivisorANGLE(hb,Db),kb.divisor=Db)}else if(kb.buffer&&(v.disableVertexAttribArray(hb),kb.buffer=null),kb.x!==Ad||kb.y!==Ja||kb.z!==Pb||kb.w!==xa)v.vertexAttrib4f(hb,Ad,Ja,Pb,xa),kb.x=Ad,kb.y=Ja,kb.z=Pb,kb.w=xa;dc=b.call(this,ja,a,0);Da=!1;sb=null;tb=0;Xa=!1;kc=Ya=0;ad=1;uc=0;Va=5126;wc=Fa=Oc=Nb=0;ha(dc)?(Da=!0,sb=F.createStream(34962,dc),Va=sb.dtype):
(sb=F.getBuffer(dc))?Va=sb.dtype:"constant"in dc?(ad=2,"number"===typeof dc.constant?(Oc=dc.constant,Fa=wc=Nb=0):(Oc=0<dc.constant.length?dc.constant[0]:0,Fa=1<dc.constant.length?dc.constant[1]:0,wc=2<dc.constant.length?dc.constant[2]:0,Nb=3<dc.constant.length?dc.constant[3]:0)):(sb=ha(dc.buffer)?F.createStream(34962,dc.buffer):F.getBuffer(dc.buffer),Va="type"in dc?Pd[dc.type]:sb.dtype,Xa=!!dc.normalized,kc=dc.size|0,Ya=dc.offset|0,uc=dc.stride|0,tb=dc.divisor|0);Pa=ea.location;Aa=X[Pa];if(1===ad){Aa.buffer||
v.enableVertexAttribArray(Pa);nb=kc||1;if(Aa.type!==Va||Aa.size!==nb||Aa.buffer!==sb||Aa.normalized!==Xa||Aa.offset!==Ya||Aa.stride!==uc)v.bindBuffer(34962,sb.buffer),v.vertexAttribPointer(Pa,nb,Va,Xa,uc,Ya),Aa.type=Va,Aa.size=nb,Aa.buffer=sb,Aa.normalized=Xa,Aa.offset=Ya,Aa.stride=uc;Aa.divisor!==tb&&(J.vertexAttribDivisorANGLE(Pa,tb),Aa.divisor=tb)}else if(Aa.buffer&&(v.disableVertexAttribArray(Pa),Aa.buffer=null),Aa.x!==Oc||Aa.y!==Fa||Aa.z!==wc||Aa.w!==Nb)v.vertexAttrib4f(Pa,Oc,Fa,wc,Nb),Aa.x=
Oc,Aa.y=Fa,Aa.z=wc,Aa.w=Nb;yb=w.call(this,ja,a,0);Eb=!1;ub=null;vc=0;zb=!1;sc=Ed=0;ud=1;Kc=0;bd=5126;Qb=cc=Xb=qd=0;ha(yb)?(Eb=!0,ub=F.createStream(34962,yb),bd=ub.dtype):(ub=F.getBuffer(yb))?bd=ub.dtype:"constant"in yb?(ud=2,"number"===typeof yb.constant?(Xb=yb.constant,cc=Qb=qd=0):(Xb=0<yb.constant.length?yb.constant[0]:0,cc=1<yb.constant.length?yb.constant[1]:0,Qb=2<yb.constant.length?yb.constant[2]:0,qd=3<yb.constant.length?yb.constant[3]:0)):(ub=ha(yb.buffer)?F.createStream(34962,yb.buffer):F.getBuffer(yb.buffer),
bd="type"in yb?Pd[yb.type]:ub.dtype,zb=!!yb.normalized,sc=yb.size|0,Ed=yb.offset|0,Kc=yb.stride|0,vc=yb.divisor|0);Ga=ab.location;Zb=X[Ga];if(1===ud){Zb.buffer||v.enableVertexAttribArray(Ga);ob=sc||1;if(Zb.type!==bd||Zb.size!==ob||Zb.buffer!==ub||Zb.normalized!==zb||Zb.offset!==Ed||Zb.stride!==Kc)v.bindBuffer(34962,ub.buffer),v.vertexAttribPointer(Ga,ob,bd,zb,Kc,Ed),Zb.type=bd,Zb.size=ob,Zb.buffer=ub,Zb.normalized=zb,Zb.offset=Ed,Zb.stride=Kc;Zb.divisor!==vc&&(J.vertexAttribDivisorANGLE(Ga,vc),Zb.divisor=
vc)}else if(Zb.buffer&&(v.disableVertexAttribArray(Ga),Zb.buffer=null),Zb.x!==Xb||Zb.y!==cc||Zb.z!==Qb||Zb.w!==qd)v.vertexAttrib4f(Ga,Xb,cc,Qb,qd),Zb.x=Xb,Zb.y=cc,Zb.z=Qb,Zb.w=qd;Ab=B.call(this,ja,a,0);Ob=!1;Rb=null;ec=0;gc=!1;zc=Id=0;Ac=1;Bc=0;Lc=5126;Mb=Mc=Qc=Xc=0;ha(Ab)?(Ob=!0,Rb=F.createStream(34962,Ab),Lc=Rb.dtype):(Rb=F.getBuffer(Ab))?Lc=Rb.dtype:"constant"in Ab?(Ac=2,"number"===typeof Ab.constant?(Qc=Ab.constant,Mc=Mb=Xc=0):(Qc=0<Ab.constant.length?Ab.constant[0]:0,Mc=1<Ab.constant.length?
Ab.constant[1]:0,Mb=2<Ab.constant.length?Ab.constant[2]:0,Xc=3<Ab.constant.length?Ab.constant[3]:0)):(Rb=ha(Ab.buffer)?F.createStream(34962,Ab.buffer):F.getBuffer(Ab.buffer),Lc="type"in Ab?Pd[Ab.type]:Rb.dtype,gc=!!Ab.normalized,zc=Ab.size|0,Id=Ab.offset|0,Bc=Ab.stride|0,ec=Ab.divisor|0);Hb=R.location;Nc=X[Hb];if(1===Ac){Nc.buffer||v.enableVertexAttribArray(Hb);Fc=zc||4;if(Nc.type!==Lc||Nc.size!==Fc||Nc.buffer!==Rb||Nc.normalized!==gc||Nc.offset!==Id||Nc.stride!==Bc)v.bindBuffer(34962,Rb.buffer),
v.vertexAttribPointer(Hb,Fc,Lc,gc,Bc,Id),Nc.type=Lc,Nc.size=Fc,Nc.buffer=Rb,Nc.normalized=gc,Nc.offset=Id,Nc.stride=Bc;Nc.divisor!==ec&&(J.vertexAttribDivisorANGLE(Hb,ec),Nc.divisor=ec)}else if(Nc.buffer&&(v.disableVertexAttribArray(Hb),Nc.buffer=null),Nc.x!==Qc||Nc.y!==Mc||Nc.z!==Mb||Nc.w!==Xc)v.vertexAttrib4f(Hb,Qc,Mc,Mb,Xc),Nc.x=Qc,Nc.y=Mc,Nc.z=Mb,Nc.w=Xc;Rc=fa.call(this,ja,a,0);fc=!1;Uc=null;kd=0;fd=!1;Vc=md=0;xd=1;vd=0;le=5126;Kd=Md=ne=te=0;ha(Rc)?(fc=!0,Uc=F.createStream(34962,Rc),le=Uc.dtype):
(Uc=F.getBuffer(Rc))?le=Uc.dtype:"constant"in Rc?(xd=2,"number"===typeof Rc.constant?(ne=Rc.constant,Md=Kd=te=0):(ne=0<Rc.constant.length?Rc.constant[0]:0,Md=1<Rc.constant.length?Rc.constant[1]:0,Kd=2<Rc.constant.length?Rc.constant[2]:0,te=3<Rc.constant.length?Rc.constant[3]:0)):(Uc=ha(Rc.buffer)?F.createStream(34962,Rc.buffer):F.getBuffer(Rc.buffer),le="type"in Rc?Pd[Rc.type]:Uc.dtype,fd=!!Rc.normalized,Vc=Rc.size|0,md=Rc.offset|0,vd=Rc.stride|0,kd=Rc.divisor|0);cd=Wb.location;Cc=X[cd];if(1===xd){Cc.buffer||
v.enableVertexAttribArray(cd);ld=Vc||4;if(Cc.type!==le||Cc.size!==ld||Cc.buffer!==Uc||Cc.normalized!==fd||Cc.offset!==md||Cc.stride!==vd)v.bindBuffer(34962,Uc.buffer),v.vertexAttribPointer(cd,ld,le,fd,vd,md),Cc.type=le,Cc.size=ld,Cc.buffer=Uc,Cc.normalized=fd,Cc.offset=md,Cc.stride=vd;Cc.divisor!==kd&&(J.vertexAttribDivisorANGLE(cd,kd),Cc.divisor=kd)}else if(Cc.buffer&&(v.disableVertexAttribArray(cd),Cc.buffer=null),Cc.x!==ne||Cc.y!==Md||Cc.z!==Kd||Cc.w!==te)v.vertexAttrib4f(cd,ne,Md,Kd,te),Cc.x=
ne,Cc.y=Md,Cc.z=Kd,Cc.w=te;gd=M.call(this,ja,a,0);$c=!1;nd=null;zd=0;Bd=!1;Ie=sd=0;we=1;fe=0;ee=5126;he=be=qe=de=0;ha(gd)?($c=!0,nd=F.createStream(34962,gd),ee=nd.dtype):(nd=F.getBuffer(gd))?ee=nd.dtype:"constant"in gd?(we=2,"number"===typeof gd.constant?(qe=gd.constant,be=he=de=0):(qe=0<gd.constant.length?gd.constant[0]:0,be=1<gd.constant.length?gd.constant[1]:0,he=2<gd.constant.length?gd.constant[2]:0,de=3<gd.constant.length?gd.constant[3]:0)):(nd=ha(gd.buffer)?F.createStream(34962,gd.buffer):F.getBuffer(gd.buffer),
ee="type"in gd?Pd[gd.type]:nd.dtype,Bd=!!gd.normalized,Ie=gd.size|0,sd=gd.offset|0,fe=gd.stride|0,zd=gd.divisor|0);xc=ka.location;Sc=X[xc];if(1===we){Sc.buffer||v.enableVertexAttribArray(xc);re=Ie||1;if(Sc.type!==ee||Sc.size!==re||Sc.buffer!==nd||Sc.normalized!==Bd||Sc.offset!==sd||Sc.stride!==fe)v.bindBuffer(34962,nd.buffer),v.vertexAttribPointer(xc,re,ee,Bd,fe,sd),Sc.type=ee,Sc.size=re,Sc.buffer=nd,Sc.normalized=Bd,Sc.offset=sd,Sc.stride=fe;Sc.divisor!==zd&&(J.vertexAttribDivisorANGLE(xc,zd),Sc.divisor=
zd)}else if(Sc.buffer&&(v.disableVertexAttribArray(xc),Sc.buffer=null),Sc.x!==qe||Sc.y!==be||Sc.z!==he||Sc.w!==de)v.vertexAttrib4f(xc,qe,be,he,de),Sc.x=qe,Sc.y=be,Sc.z=he,Sc.w=de;v.uniform1i(u.location,!1);v.uniform1f(Ha.location,ja.pixelRatio);ke=a.scale;v.uniform2f(V.location,ke[0],ke[1]);Ld=a.scaleFract;v.uniform2f(pb.location,Ld[0],Ld[1]);Od=a.translate;v.uniform2f(va.location,Od[0],Od[1]);Qd=a.translateFract;v.uniform2f(ac.location,Qd[0],Qd[1]);Rd=H.call(this,ja,a,0);v.uniform2f(Na.location,
Rd[0],Rd[1]);v.uniform1f(Ea.location,a.opacity);v.uniform1i(vb.location,r.bind());(ie=a.markerTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);Ce=ie._texture;v.uniform1i(ba.location,Ce.bind());Xe=a.elements;oe=null;(oe=(Me=ha(Xe))?Wc.createStream(Xe):Wc.getElements(Xe))&&v.bindBuffer(34963,oe.buffer.buffer);Ne=a.offset;if(Je=a.count)se=wb.instances,0<se?oe?J.drawElementsInstancedANGLE(0,Je,oe.type,Ne<<(oe.type-5121>>1),se):J.drawArraysInstancedANGLE(0,Ne,Je,se):0>se&&(oe?v.drawElements(0,
Je,oe.type,Ne<<(oe.type-5121>>1)):v.drawArrays(0,Ne,Je)),Ba.dirty=!0,qa.setVAO(null),ja.viewportWidth=n,ja.viewportHeight=A,O&&(y.cpuTime+=performance.now()-N),Q&&F.destroyStream(S),Wa&&F.destroyStream(Ca),jb&&F.destroyStream(Oa),gb&&F.destroyStream(Ia),Da&&F.destroyStream(sb),Eb&&F.destroyStream(ub),Ob&&F.destroyStream(Rb),fc&&F.destroyStream(Uc),$c&&F.destroyStream(nd),r.unbind(),Ce.unbind(),Me&&Wc.destroyStream(oe)},scope:function(b,c,d){var g,k,p,q,t,r,v,u,w,z,x,G,P,L,H,B,O,M,J,X,ca,R,U,V,Z,fa,
ba,ia,na,oa,ea,ka,ma,qa,va,ra,la,Ha,Ea,Ka,Na,Bb,Qa,tc,ab,Jb,Ma,qb,xb,jb,Oa,pb,Kb,db,fb,td,Za,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,mc,Lb,$a,Vb,xa,Wb,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,vb,uc,Va,Nb,ac,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,pc,sc,ic,Kc,bd,od,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,je,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,Hd,Vc,Tc,vd,$d,xd,yd,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,ge,ue,ve,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,pe,Xe,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,
He,Ue,We,Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf,of,lf,pf,Af,Bf,Le,ye,mf,nf,Cf,Ff,yf,Df,Ef,tf,uf,sf,vf,wf,Hf,If,Jf,Kf,qf,Qf,Gf,rf,cg,Rf,Sf,pg,cf,Ze,Lf,Mf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Nf,Of,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Pg;g=b.viewport;k=g.x|0;p=g.y|0;q="width"in g?g.width|0:ja.framebufferWidth-k;t="height"in g?g.height|0:ja.framebufferHeight-p;r=ja.viewportWidth;ja.viewportWidth=q;v=ja.viewportHeight;ja.viewportHeight=
t;u=Id[0];Id[0]=k;w=Id[1];Id[1]=p;z=Id[2];Id[2]=q;x=Id[3];Id[3]=t;G=I[0];I[0]=0;P=I[1];I[1]=0;L=I[2];I[2]=0;H=I[3];I[3]=1;B=ua.blend_enable;ua.blend_enable=!0;O=sa[0];sa[0]=770;M=sa[1];sa[1]=771;J=sa[2];sa[2]=773;X=sa[3];sa[3]=1;ca=ua.depth_enable;ua.depth_enable=!1;R=b.viewport;U=R.x|0;V=R.y|0;Z="width"in R?R.width|0:ja.framebufferWidth-U;fa="height"in R?R.height|0:ja.framebufferHeight-V;ba=le[0];le[0]=U;ia=le[1];le[1]=V;na=le[2];le[2]=Z;oa=le[3];le[3]=fa;ea=ua.scissor_enable;ua.scissor_enable=!0;
ka=ua.stencil_enable;ua.stencil_enable=!1;if(ma=Ba.profile)qa=performance.now(),y.count++;va=b.elements;ra=null;ra=(la=ha(va))?Wc.createStream(va):Wc.getElements(va);Ha=wb.elements;wb.elements=ra;Ea=b.offset;Ka=wb.offset;wb.offset=Ea;Na=b.count;Bb=wb.count;wb.count=Na;Qa=wb.primitive;wb.primitive=0;tc=ga[45];ga[45]=!1;ab=b.markerTexture;Jb=ga[48];ga[48]=ab;Ma=b.opacity;qb=ga[10];ga[10]=Ma;xb=D.call(this,ja,b,d);jb=ga[46];ga[46]=xb;Oa=ga[47];ga[47]=C;pb=ja.pixelRatio;Kb=ga[34];ga[34]=pb;db=b.scale;
fb=ga[6];ga[6]=db;td=b.scaleFract;Za=ga[7];ga[7]=td;hc=b.translate;lb=ga[8];ga[8]=hc;mb=b.translateFract;ta=ga[9];ga[9]=mb;rb=E.call(this,ja,b,d);wa=!1;Ua=null;cb=0;za=!1;Ia=gb=0;Db=1;Cb=0;Ra=5126;Vb=$a=Lb=mc=0;ha(rb)?(wa=!0,Ua=F.createStream(34962,rb),Ra=Ua.dtype):(Ua=F.getBuffer(rb))?Ra=Ua.dtype:"constant"in rb?(Db=2,"number"===typeof rb.constant?(Lb=rb.constant,$a=Vb=mc=0):(Lb=0<rb.constant.length?rb.constant[0]:0,$a=1<rb.constant.length?rb.constant[1]:0,Vb=2<rb.constant.length?rb.constant[2]:
0,mc=3<rb.constant.length?rb.constant[3]:0)):(Ua=ha(rb.buffer)?F.createStream(34962,rb.buffer):F.getBuffer(rb.buffer),Ra="type"in rb?Pd[rb.type]:Ua.dtype,za=!!rb.normalized,Ia=rb.size|0,gb=rb.offset|0,Cb=rb.stride|0,cb=rb.divisor|0);xa=Q.buffer;Q.buffer=Ua;Wb=Q.divisor;Q.divisor=cb;Ja=Q.normalized;Q.normalized=za;Pb=Q.offset;Q.offset=gb;hb=Q.size;Q.size=Ia;kb=Q.state;Q.state=Db;ya=Q.stride;Q.stride=Cb;dc=Q.type;Q.type=Ra;Da=Q.w;Q.w=mc;sb=Q.x;Q.x=Lb;tb=Q.y;Q.y=$a;Xa=Q.z;Q.z=Vb;Ya=A.call(this,ja,b,
d);kc=!1;vb=null;uc=0;Va=!1;ac=Nb=0;Fa=1;wc=0;Pa=5126;Eb=yb=nb=Aa=0;ha(Ya)?(kc=!0,vb=F.createStream(34962,Ya),Pa=vb.dtype):(vb=F.getBuffer(Ya))?Pa=vb.dtype:"constant"in Ya?(Fa=2,"number"===typeof Ya.constant?(nb=Ya.constant,yb=Eb=Aa=0):(nb=0<Ya.constant.length?Ya.constant[0]:0,yb=1<Ya.constant.length?Ya.constant[1]:0,Eb=2<Ya.constant.length?Ya.constant[2]:0,Aa=3<Ya.constant.length?Ya.constant[3]:0)):(vb=ha(Ya.buffer)?F.createStream(34962,Ya.buffer):F.getBuffer(Ya.buffer),Pa="type"in Ya?Pd[Ya.type]:
vb.dtype,Va=!!Ya.normalized,ac=Ya.size|0,Nb=Ya.offset|0,wc=Ya.stride|0,uc=Ya.divisor|0);ub=N.buffer;N.buffer=vb;vc=N.divisor;N.divisor=uc;zb=N.normalized;N.normalized=Va;pc=N.offset;N.offset=Nb;sc=N.size;N.size=ac;ic=N.state;N.state=Fa;Kc=N.stride;N.stride=wc;bd=N.type;N.type=Pa;od=N.w;N.w=Aa;Xb=N.x;N.x=nb;cc=N.y;N.y=yb;Qb=N.z;N.z=Eb;Ga=Y.call(this,ja,b,d);Zb=!1;ob=null;Ab=0;Ob=!1;ec=Rb=0;gc=1;je=0;zc=5126;Xc=Lc=Bc=Ac=0;ha(Ga)?(Zb=!0,ob=F.createStream(34962,Ga),zc=ob.dtype):(ob=F.getBuffer(Ga))?zc=
ob.dtype:"constant"in Ga?(gc=2,"number"===typeof Ga.constant?(Bc=Ga.constant,Lc=Xc=Ac=0):(Bc=0<Ga.constant.length?Ga.constant[0]:0,Lc=1<Ga.constant.length?Ga.constant[1]:0,Xc=2<Ga.constant.length?Ga.constant[2]:0,Ac=3<Ga.constant.length?Ga.constant[3]:0)):(ob=ha(Ga.buffer)?F.createStream(34962,Ga.buffer):F.getBuffer(Ga.buffer),zc="type"in Ga?Pd[Ga.type]:ob.dtype,Ob=!!Ga.normalized,ec=Ga.size|0,Rb=Ga.offset|0,je=Ga.stride|0,Ab=Ga.divisor|0);Qc=h.buffer;h.buffer=ob;Mc=h.divisor;h.divisor=Ab;Mb=h.normalized;
h.normalized=Ob;Hb=h.offset;h.offset=Rb;Nc=h.size;h.size=ec;Fc=h.state;h.state=gc;Rc=h.stride;h.stride=je;fc=h.type;h.type=zc;Uc=h.w;h.w=Ac;kd=h.x;h.x=Bc;fd=h.y;h.y=Lc;Hd=h.z;h.z=Xc;Vc=f.call(this,ja,b,d);Tc=!1;vd=null;$d=0;xd=!1;Md=yd=0;Kd=1;cd=0;Cc=5126;nd=$c=gd=ld=0;ha(Vc)?(Tc=!0,vd=F.createStream(34962,Vc),Cc=vd.dtype):(vd=F.getBuffer(Vc))?Cc=vd.dtype:"constant"in Vc?(Kd=2,"number"===typeof Vc.constant?(gd=Vc.constant,$c=nd=ld=0):(gd=0<Vc.constant.length?Vc.constant[0]:0,$c=1<Vc.constant.length?
Vc.constant[1]:0,nd=2<Vc.constant.length?Vc.constant[2]:0,ld=3<Vc.constant.length?Vc.constant[3]:0)):(vd=ha(Vc.buffer)?F.createStream(34962,Vc.buffer):F.getBuffer(Vc.buffer),Cc="type"in Vc?Pd[Vc.type]:vd.dtype,xd=!!Vc.normalized,Md=Vc.size|0,yd=Vc.offset|0,cd=Vc.stride|0,$d=Vc.divisor|0);zd=e.buffer;e.buffer=vd;Bd=e.divisor;e.divisor=$d;ge=e.normalized;e.normalized=xd;ue=e.offset;e.offset=yd;ve=e.size;e.size=Md;fe=e.state;e.state=Kd;ee=e.stride;e.stride=cd;de=e.type;e.type=Cc;qe=e.w;e.w=ld;be=e.x;
e.x=gd;he=e.y;e.y=$c;xc=e.z;e.z=nd;Sc=l.call(this,ja,b,d);re=!1;ke=null;Ld=0;Od=!1;Rd=Qd=0;ie=1;pe=0;Xe=5126;Je=Ne=Me=oe=0;ha(Sc)?(re=!0,ke=F.createStream(34962,Sc),Xe=ke.dtype):(ke=F.getBuffer(Sc))?Xe=ke.dtype:"constant"in Sc?(ie=2,"number"===typeof Sc.constant?(Me=Sc.constant,Ne=Je=oe=0):(Me=0<Sc.constant.length?Sc.constant[0]:0,Ne=1<Sc.constant.length?Sc.constant[1]:0,Je=2<Sc.constant.length?Sc.constant[2]:0,oe=3<Sc.constant.length?Sc.constant[3]:0)):(ke=ha(Sc.buffer)?F.createStream(34962,Sc.buffer):
F.getBuffer(Sc.buffer),Xe="type"in Sc?Pd[Sc.type]:ke.dtype,Od=!!Sc.normalized,Rd=Sc.size|0,Qd=Sc.offset|0,pe=Sc.stride|0,Ld=Sc.divisor|0);se=T.buffer;T.buffer=ke;ze=T.divisor;T.divisor=Ld;De=T.normalized;T.normalized=Od;Ee=T.offset;T.offset=Qd;Fe=T.size;T.size=Rd;Ae=T.state;T.state=ie;Nd=T.stride;T.stride=pe;Ud=T.type;T.type=Xe;Zd=T.w;T.w=oe;ce=T.x;T.x=Me;Ge=T.y;T.y=Ne;Fd=T.z;T.z=Je;Sd=aa.call(this,ja,b,d);xe=!1;He=null;Ue=0;We=!1;Ke=Oe=0;Ve=1;Te=0;Pe=5126;Re=Xd=Td=Qe=0;ha(Sd)?(xe=!0,He=F.createStream(34962,
Sd),Pe=He.dtype):(He=F.getBuffer(Sd))?Pe=He.dtype:"constant"in Sd?(Ve=2,"number"===typeof Sd.constant?(Td=Sd.constant,Xd=Re=Qe=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,Xd=1<Sd.constant.length?Sd.constant[1]:0,Re=2<Sd.constant.length?Sd.constant[2]:0,Qe=3<Sd.constant.length?Sd.constant[3]:0)):(He=ha(Sd.buffer)?F.createStream(34962,Sd.buffer):F.getBuffer(Sd.buffer),Pe="type"in Sd?Pd[Sd.type]:He.dtype,We=!!Sd.normalized,Ke=Sd.size|0,Oe=Sd.offset|0,Te=Sd.stride|0,Ue=Sd.divisor|0);ff=m.buffer;m.buffer=
He;kf=m.divisor;m.divisor=Ue;bf=m.normalized;m.normalized=We;gf=m.offset;m.offset=Oe;hf=m.size;m.size=Ke;jf=m.state;m.state=Ve;of=m.stride;m.stride=Te;lf=m.type;m.type=Pe;pf=m.w;m.w=Qe;Af=m.x;m.x=Td;Bf=m.y;m.y=Xd;Le=m.z;m.z=Re;ye=pa.call(this,ja,b,d);mf=!1;nf=null;Cf=0;Ff=!1;Df=yf=0;Ef=1;tf=0;uf=5126;Hf=wf=vf=sf=0;ha(ye)?(mf=!0,nf=F.createStream(34962,ye),uf=nf.dtype):(nf=F.getBuffer(ye))?uf=nf.dtype:"constant"in ye?(Ef=2,"number"===typeof ye.constant?(vf=ye.constant,wf=Hf=sf=0):(vf=0<ye.constant.length?
ye.constant[0]:0,wf=1<ye.constant.length?ye.constant[1]:0,Hf=2<ye.constant.length?ye.constant[2]:0,sf=3<ye.constant.length?ye.constant[3]:0)):(nf=ha(ye.buffer)?F.createStream(34962,ye.buffer):F.getBuffer(ye.buffer),uf="type"in ye?Pd[ye.type]:nf.dtype,Ff=!!ye.normalized,Df=ye.size|0,yf=ye.offset|0,tf=ye.stride|0,Cf=ye.divisor|0);If=K.buffer;K.buffer=nf;Jf=K.divisor;K.divisor=Cf;Kf=K.normalized;K.normalized=Ff;qf=K.offset;K.offset=yf;Qf=K.size;K.size=Df;Gf=K.state;K.state=Ef;rf=K.stride;K.stride=tf;
cg=K.type;K.type=uf;Rf=K.w;K.w=sf;Sf=K.x;K.x=vf;pg=K.y;K.y=wf;cf=K.z;K.z=Hf;Ze=da.call(this,ja,b,d);Lf=!1;Mf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ha(Ze)?(Lf=!0,Mf=F.createStream(34962,Ze),Tf=Mf.dtype):(Mf=F.getBuffer(Ze))?Tf=Mf.dtype:"constant"in Ze?(hg=2,"number"===typeof Ze.constant?(Xf=Ze.constant,Yf=ig=Wf=0):(Xf=0<Ze.constant.length?Ze.constant[0]:0,Yf=1<Ze.constant.length?Ze.constant[1]:0,ig=2<Ze.constant.length?Ze.constant[2]:0,Wf=3<Ze.constant.length?Ze.constant[3]:0)):(Mf=
ha(Ze.buffer)?F.createStream(34962,Ze.buffer):F.getBuffer(Ze.buffer),Tf="type"in Ze?Pd[Ze.type]:Mf.dtype,eg=!!Ze.normalized,gg=Ze.size|0,fg=Ze.offset|0,Vf=Ze.stride|0,dg=Ze.divisor|0);qg=a.buffer;a.buffer=Mf;rg=a.divisor;a.divisor=dg;sg=a.normalized;a.normalized=eg;tg=a.offset;a.offset=fg;ug=a.size;a.size=gg;vg=a.state;a.state=hg;wg=a.stride;a.stride=Vf;xg=a.type;a.type=Tf;yg=a.w;a.w=Wf;zg=a.x;a.x=Xf;Ag=a.y;a.y=Yf;df=a.z;a.z=ig;$e=n.call(this,ja,b,d);Nf=!1;Of=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=
5126;og=bg=ag=$f=0;ha($e)?(Nf=!0,Of=F.createStream(34962,$e),Uf=Of.dtype):(Of=F.getBuffer($e))?Uf=Of.dtype:"constant"in $e?(ng=2,"number"===typeof $e.constant?(ag=$e.constant,bg=og=$f=0):(ag=0<$e.constant.length?$e.constant[0]:0,bg=1<$e.constant.length?$e.constant[1]:0,og=2<$e.constant.length?$e.constant[2]:0,$f=3<$e.constant.length?$e.constant[3]:0)):(Of=ha($e.buffer)?F.createStream(34962,$e.buffer):F.getBuffer($e.buffer),Uf="type"in $e?Pd[$e.type]:Of.dtype,kg=!!$e.normalized,mg=$e.size|0,lg=$e.offset|
0,Zf=$e.stride|0,jg=$e.divisor|0);Bg=W.buffer;W.buffer=Of;Cg=W.divisor;W.divisor=jg;Dg=W.normalized;W.normalized=kg;Eg=W.offset;W.offset=lg;Fg=W.size;W.size=mg;Gg=W.state;W.state=ng;Hg=W.stride;W.stride=Zf;Ig=W.type;W.type=Uf;Jg=W.w;W.w=$f;Kg=W.x;W.x=ag;Lg=W.y;W.y=bg;Mg=W.z;W.z=og;Ng=S.vert;S.vert=44;Pg=S.frag;S.frag=43;Ba.dirty=!0;c(ja,b,d);ja.viewportWidth=r;ja.viewportHeight=v;Id[0]=u;Id[1]=w;Id[2]=z;Id[3]=x;I[0]=G;I[1]=P;I[2]=L;I[3]=H;ua.blend_enable=B;sa[0]=O;sa[1]=M;sa[2]=J;sa[3]=X;ua.depth_enable=
ca;le[0]=ba;le[1]=ia;le[2]=na;le[3]=oa;ua.scissor_enable=ea;ua.stencil_enable=ka;ma&&(y.cpuTime+=performance.now()-qa);la&&Wc.destroyStream(ra);wb.elements=Ha;wb.offset=Ka;wb.count=Bb;wb.primitive=Qa;ga[45]=tc;ga[48]=Jb;ga[10]=qb;ga[46]=jb;ga[47]=Oa;ga[34]=Kb;ga[6]=fb;ga[7]=Za;ga[8]=lb;ga[9]=ta;wa&&F.destroyStream(Ua);Q.buffer=xa;Q.divisor=Wb;Q.normalized=Ja;Q.offset=Pb;Q.size=hb;Q.state=kb;Q.stride=ya;Q.type=dc;Q.w=Da;Q.x=sb;Q.y=tb;Q.z=Xa;kc&&F.destroyStream(vb);N.buffer=ub;N.divisor=vc;N.normalized=
zb;N.offset=pc;N.size=sc;N.state=ic;N.stride=Kc;N.type=bd;N.w=od;N.x=Xb;N.y=cc;N.z=Qb;Zb&&F.destroyStream(ob);h.buffer=Qc;h.divisor=Mc;h.normalized=Mb;h.offset=Hb;h.size=Nc;h.state=Fc;h.stride=Rc;h.type=fc;h.w=Uc;h.x=kd;h.y=fd;h.z=Hd;Tc&&F.destroyStream(vd);e.buffer=zd;e.divisor=Bd;e.normalized=ge;e.offset=ue;e.size=ve;e.state=fe;e.stride=ee;e.type=de;e.w=qe;e.x=be;e.y=he;e.z=xc;re&&F.destroyStream(ke);T.buffer=se;T.divisor=ze;T.normalized=De;T.offset=Ee;T.size=Fe;T.state=Ae;T.stride=Nd;T.type=Ud;
T.w=Zd;T.x=ce;T.y=Ge;T.z=Fd;xe&&F.destroyStream(He);m.buffer=ff;m.divisor=kf;m.normalized=bf;m.offset=gf;m.size=hf;m.state=jf;m.stride=of;m.type=lf;m.w=pf;m.x=Af;m.y=Bf;m.z=Le;mf&&F.destroyStream(nf);K.buffer=If;K.divisor=Jf;K.normalized=Kf;K.offset=qf;K.size=Qf;K.state=Gf;K.stride=rf;K.type=cg;K.w=Rf;K.x=Sf;K.y=pg;K.z=cf;Lf&&F.destroyStream(Mf);a.buffer=qg;a.divisor=rg;a.normalized=sg;a.offset=tg;a.size=ug;a.state=vg;a.stride=wg;a.type=xg;a.w=yg;a.x=zg;a.y=Ag;a.z=df;Nf&&F.destroyStream(Of);W.buffer=
Bg;W.divisor=Cg;W.normalized=Dg;W.offset=Eg;W.size=Fg;W.state=Gg;W.stride=Hg;W.type=Ig;W.w=Jg;W.x=Kg;W.y=Lg;W.z=Mg;S.vert=Ng;S.frag=Pg;Ba.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db,Za,la,Qa,Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va,ac,pc,ic,td){var tc,X,F,ja,
Ba,wb,Wc,Tc,G,v,ha,ua,S,ga,qa,I,t,ca,x,sa,oa,k,mc,ia,q,Jb,Bb,Ue,pe,le,je,Hd,ue,od,ge,ve,yd,Id,$d;tc=c.attributes;X=c.buffer;F=c.context;ja=c.current;Ba=c.draw;wb=c.elements;Wc=c.extensions;Tc=c.framebuffer;G=c.gl;v=c.isBufferArgs;ha=c.next;ua=c.shader;S=c.uniforms;ga=c.vao;qa=ha.blend_color;I=ja.blend_color;t=ha.blend_equation;ca=ja.blend_equation;x=ha.blend_func;sa=ja.blend_func;oa=ha.colorMask;k=ja.colorMask;mc=ha.depth_range;ia=ja.depth_range;q=ha.polygonOffset_offset;Jb=ja.polygonOffset_offset;
Bb=ha.sample_coverage;Ue=ja.sample_coverage;pe=ha.scissor_box;le=ja.scissor_box;je=ha.stencil_func;Hd=ja.stencil_func;ue=ha.stencil_opBack;od=ja.stencil_opBack;ge=ha.stencil_opFront;ve=ja.stencil_opFront;yd=ha.viewport;Id=ja.viewport;$d={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,e,f,g,h;c=Tc.next;c!==Tc.cur&&(c?G.bindFramebuffer(36160,c.framebuffer):G.bindFramebuffer(36160,null),Tc.cur=c);if(ja.dirty){var l,m,n,
p,r,w,z,x,A,C,E,P,D,H,K,B,M,N,Q,S,T,W,aa,fa,na,da,Y,ua,qa,pa,jd,ib,Sa,Ib;l=ha.dither;l!==ja.dither&&(l?G.enable(3024):G.disable(3024),ja.dither=l);m=t[0];n=t[1];if(m!==ca[0]||n!==ca[1])G.blendEquationSeparate(m,n),ca[0]=m,ca[1]=n;p=ha.depth_func;p!==ja.depth_func&&(G.depthFunc(p),ja.depth_func=p);r=mc[0];w=mc[1];if(r!==ia[0]||w!==ia[1])G.depthRange(r,w),ia[0]=r,ia[1]=w;z=ha.depth_mask;z!==ja.depth_mask&&(G.depthMask(z),ja.depth_mask=z);x=oa[0];A=oa[1];C=oa[2];E=oa[3];if(x!==k[0]||A!==k[1]||C!==k[2]||
E!==k[3])G.colorMask(x,A,C,E),k[0]=x,k[1]=A,k[2]=C,k[3]=E;P=ha.cull_enable;P!==ja.cull_enable&&(P?G.enable(2884):G.disable(2884),ja.cull_enable=P);D=ha.cull_face;D!==ja.cull_face&&(G.cullFace(D),ja.cull_face=D);H=ha.frontFace;H!==ja.frontFace&&(G.frontFace(H),ja.frontFace=H);K=ha.lineWidth;K!==ja.lineWidth&&(G.lineWidth(K),ja.lineWidth=K);B=ha.polygonOffset_enable;B!==ja.polygonOffset_enable&&(B?G.enable(32823):G.disable(32823),ja.polygonOffset_enable=B);M=q[0];N=q[1];if(M!==Jb[0]||N!==Jb[1])G.polygonOffset(M,
N),Jb[0]=M,Jb[1]=N;Q=ha.sample_alpha;Q!==ja.sample_alpha&&(Q?G.enable(32926):G.disable(32926),ja.sample_alpha=Q);S=ha.sample_enable;S!==ja.sample_enable&&(S?G.enable(32928):G.disable(32928),ja.sample_enable=S);T=Bb[0];W=Bb[1];if(T!==Ue[0]||W!==Ue[1])G.sampleCoverage(T,W),Ue[0]=T,Ue[1]=W;aa=ha.stencil_mask;aa!==ja.stencil_mask&&(G.stencilMask(aa),ja.stencil_mask=aa);fa=je[0];na=je[1];da=je[2];if(fa!==Hd[0]||na!==Hd[1]||da!==Hd[2])G.stencilFunc(fa,na,da),Hd[0]=fa,Hd[1]=na,Hd[2]=da;Y=ge[0];ua=ge[1];
qa=ge[2];pa=ge[3];if(Y!==ve[0]||ua!==ve[1]||qa!==ve[2]||pa!==ve[3])G.stencilOpSeparate(Y,ua,qa,pa),ve[0]=Y,ve[1]=ua,ve[2]=qa,ve[3]=pa;jd=ue[0];ib=ue[1];Sa=ue[2];Ib=ue[3];if(jd!==od[0]||ib!==od[1]||Sa!==od[2]||Ib!==od[3])G.stencilOpSeparate(jd,ib,Sa,Ib),od[0]=jd,od[1]=ib,od[2]=Sa,od[3]=Ib}G.blendColor(0,0,0,1);I[0]=0;I[1]=0;I[2]=0;I[3]=1;G.enable(3042);ja.blend_enable=!0;G.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;G.disable(2929);ja.depth_enable=!1;G.enable(3089);ja.scissor_enable=
!0;G.disable(2960);ja.stencil_enable=!1;if(d=ja.profile)e=performance.now(),y.count+=b;G.useProgram(ma.program);f=Wc.angle_instanced_arrays;var eb;ga.setVAO(null);G.uniform1i(u.location,!1);G.uniform1i(Na.location,ra.bind());eb=Ba.instances;for(g=0;g<b;++g){h=a[g];var Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,
Ob,Rb,ec,gc,yd,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,sd,vd,pe,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,Se,Ie,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Xe,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf,of,lf,pf,Af,Bf,Le,ye,mf,nf,Cf,Ff,yf,Df,Ef,tf,uf,sf,vf,wf,Hf,If,Jf,Kf,qf,Qf,Gf,rf;Ec=h.viewport;Sb=Ec.x|0;ae=Ec.y|0;$b="width"in Ec?Ec.width|0:F.framebufferWidth-Sb;Tb="height"in Ec?Ec.height|0:F.framebufferHeight-ae;rd=
F.viewportWidth;F.viewportWidth=$b;Ub=F.viewportHeight;F.viewportHeight=Tb;G.viewport(Sb,ae,$b,Tb);Id[0]=Sb;Id[1]=ae;Id[2]=$b;Id[3]=Tb;Ma=h.viewport;qb=Ma.x|0;xb=Ma.y|0;jb="width"in Ma?Ma.width|0:F.framebufferWidth-qb;Oa="height"in Ma?Ma.height|0:F.framebufferHeight-xb;G.scissor(qb,xb,jb,Oa);le[0]=qb;le[1]=xb;le[2]=jb;le[3]=Oa;lc=Ka.call(this,F,h,g);Kb=!1;Zc=null;fb=0;jc=!1;hc=dd=0;lb=1;mb=0;ta=5126;cb=Ua=wa=rb=0;v(lc)?(Kb=!0,Zc=X.createStream(34962,lc),ta=Zc.dtype):(Zc=X.getBuffer(lc))?ta=Zc.dtype:
"constant"in lc?(lb=2,"number"===typeof lc.constant?(wa=lc.constant,Ua=cb=rb=0):(wa=0<lc.constant.length?lc.constant[0]:0,Ua=1<lc.constant.length?lc.constant[1]:0,cb=2<lc.constant.length?lc.constant[2]:0,rb=3<lc.constant.length?lc.constant[3]:0)):(Zc=v(lc.buffer)?X.createStream(34962,lc.buffer):X.getBuffer(lc.buffer),ta="type"in lc?$d[lc.type]:Zc.dtype,jc=!!lc.normalized,hc=lc.size|0,dd=lc.offset|0,mb=lc.stride|0,fb=lc.divisor|0);za=ac.location;gb=tc[za];if(1===lb){gb.buffer||G.enableVertexAttribArray(za);
Ia=hc||1;if(gb.type!==ta||gb.size!==Ia||gb.buffer!==Zc||gb.normalized!==jc||gb.offset!==dd||gb.stride!==mb)G.bindBuffer(34962,Zc.buffer),G.vertexAttribPointer(za,Ia,ta,jc,mb,dd),gb.type=ta,gb.size=Ia,gb.buffer=Zc,gb.normalized=jc,gb.offset=dd,gb.stride=mb;gb.divisor!==fb&&(f.vertexAttribDivisorANGLE(za,fb),gb.divisor=fb)}else if(gb.buffer&&(G.disableVertexAttribArray(za),gb.buffer=null),gb.x!==wa||gb.y!==Ua||gb.z!==cb||gb.w!==rb)G.vertexAttrib4f(za,wa,Ua,cb,rb),gb.x=wa,gb.y=Ua,gb.z=cb,gb.w=rb;Db=
db.call(this,F,h,g);Cb=!1;Ra=null;Ic=0;Lb=!1;Vb=$a=0;xa=1;Ad=0;Ja=5126;ya=kb=hb=Pb=0;v(Db)?(Cb=!0,Ra=X.createStream(34962,Db),Ja=Ra.dtype):(Ra=X.getBuffer(Db))?Ja=Ra.dtype:"constant"in Db?(xa=2,"number"===typeof Db.constant?(hb=Db.constant,kb=ya=Pb=0):(hb=0<Db.constant.length?Db.constant[0]:0,kb=1<Db.constant.length?Db.constant[1]:0,ya=2<Db.constant.length?Db.constant[2]:0,Pb=3<Db.constant.length?Db.constant[3]:0)):(Ra=v(Db.buffer)?X.createStream(34962,Db.buffer):X.getBuffer(Db.buffer),Ja="type"in
Db?$d[Db.type]:Ra.dtype,Lb=!!Db.normalized,Vb=Db.size|0,$a=Db.offset|0,Ad=Db.stride|0,Ic=Db.divisor|0);dc=ic.location;Da=tc[dc];if(1===xa){Da.buffer||G.enableVertexAttribArray(dc);sb=Vb||1;if(Da.type!==Ja||Da.size!==sb||Da.buffer!==Ra||Da.normalized!==Lb||Da.offset!==$a||Da.stride!==Ad)G.bindBuffer(34962,Ra.buffer),G.vertexAttribPointer(dc,sb,Ja,Lb,Ad,$a),Da.type=Ja,Da.size=sb,Da.buffer=Ra,Da.normalized=Lb,Da.offset=$a,Da.stride=Ad;Da.divisor!==Ic&&(f.vertexAttribDivisorANGLE(dc,Ic),Da.divisor=Ic)}else if(Da.buffer&&
(G.disableVertexAttribArray(dc),Da.buffer=null),Da.x!==hb||Da.y!==kb||Da.z!==ya||Da.w!==Pb)G.vertexAttrib4f(dc,hb,kb,ya,Pb),Da.x=hb,Da.y=kb,Da.z=ya,Da.w=Pb;tb=Za.call(this,F,h,g);Xa=!1;Ya=null;kc=0;ad=!1;Va=uc=0;Nb=1;Oc=0;Fa=5126;nb=Aa=Pa=wc=0;v(tb)?(Xa=!0,Ya=X.createStream(34962,tb),Fa=Ya.dtype):(Ya=X.getBuffer(tb))?Fa=Ya.dtype:"constant"in tb?(Nb=2,"number"===typeof tb.constant?(Pa=tb.constant,Aa=nb=wc=0):(Pa=0<tb.constant.length?tb.constant[0]:0,Aa=1<tb.constant.length?tb.constant[1]:0,nb=2<tb.constant.length?
tb.constant[2]:0,wc=3<tb.constant.length?tb.constant[3]:0)):(Ya=v(tb.buffer)?X.createStream(34962,tb.buffer):X.getBuffer(tb.buffer),Fa="type"in tb?$d[tb.type]:Ya.dtype,ad=!!tb.normalized,Va=tb.size|0,uc=tb.offset|0,Oc=tb.stride|0,kc=tb.divisor|0);yb=pc.location;Eb=tc[yb];if(1===Nb){Eb.buffer||G.enableVertexAttribArray(yb);ub=Va||1;if(Eb.type!==Fa||Eb.size!==ub||Eb.buffer!==Ya||Eb.normalized!==ad||Eb.offset!==uc||Eb.stride!==Oc)G.bindBuffer(34962,Ya.buffer),G.vertexAttribPointer(yb,ub,Fa,ad,Oc,uc),
Eb.type=Fa,Eb.size=ub,Eb.buffer=Ya,Eb.normalized=ad,Eb.offset=uc,Eb.stride=Oc;Eb.divisor!==kc&&(f.vertexAttribDivisorANGLE(yb,kc),Eb.divisor=kc)}else if(Eb.buffer&&(G.disableVertexAttribArray(yb),Eb.buffer=null),Eb.x!==Pa||Eb.y!==Aa||Eb.z!==nb||Eb.w!==wc)G.vertexAttrib4f(yb,Pa,Aa,nb,wc),Eb.x=Pa,Eb.y=Aa,Eb.z=nb,Eb.w=wc;vc=la.call(this,F,h,g);zb=!1;Ed=null;sc=0;ud=!1;bd=Kc=0;qd=1;Xb=0;cc=5126;ob=Zb=Ga=Qb=0;v(vc)?(zb=!0,Ed=X.createStream(34962,vc),cc=Ed.dtype):(Ed=X.getBuffer(vc))?cc=Ed.dtype:"constant"in
vc?(qd=2,"number"===typeof vc.constant?(Ga=vc.constant,Zb=ob=Qb=0):(Ga=0<vc.constant.length?vc.constant[0]:0,Zb=1<vc.constant.length?vc.constant[1]:0,ob=2<vc.constant.length?vc.constant[2]:0,Qb=3<vc.constant.length?vc.constant[3]:0)):(Ed=v(vc.buffer)?X.createStream(34962,vc.buffer):X.getBuffer(vc.buffer),cc="type"in vc?$d[vc.type]:Ed.dtype,ud=!!vc.normalized,bd=vc.size|0,Kc=vc.offset|0,Xb=vc.stride|0,sc=vc.divisor|0);Ab=td.location;Ob=tc[Ab];if(1===qd){Ob.buffer||G.enableVertexAttribArray(Ab);Rb=
bd||1;if(Ob.type!==cc||Ob.size!==Rb||Ob.buffer!==Ed||Ob.normalized!==ud||Ob.offset!==Kc||Ob.stride!==Xb)G.bindBuffer(34962,Ed.buffer),G.vertexAttribPointer(Ab,Rb,cc,ud,Xb,Kc),Ob.type=cc,Ob.size=Rb,Ob.buffer=Ed,Ob.normalized=ud,Ob.offset=Kc,Ob.stride=Xb;Ob.divisor!==sc&&(f.vertexAttribDivisorANGLE(Ab,sc),Ob.divisor=sc)}else if(Ob.buffer&&(G.disableVertexAttribArray(Ab),Ob.buffer=null),Ob.x!==Ga||Ob.y!==Zb||Ob.z!==ob||Ob.w!==Qb)G.vertexAttrib4f(Ab,Ga,Zb,ob,Qb),Ob.x=Ga,Ob.y=Zb,Ob.z=ob,Ob.w=Qb;ec=Qa.call(this,
F,h,g);gc=!1;yd=null;zc=0;Ac=!1;Lc=Bc=0;Xc=1;Qc=0;Mc=5126;Fc=Nc=Hb=Mb=0;v(ec)?(gc=!0,yd=X.createStream(34962,ec),Mc=yd.dtype):(yd=X.getBuffer(ec))?Mc=yd.dtype:"constant"in ec?(Xc=2,"number"===typeof ec.constant?(Hb=ec.constant,Nc=Fc=Mb=0):(Hb=0<ec.constant.length?ec.constant[0]:0,Nc=1<ec.constant.length?ec.constant[1]:0,Fc=2<ec.constant.length?ec.constant[2]:0,Mb=3<ec.constant.length?ec.constant[3]:0)):(yd=v(ec.buffer)?X.createStream(34962,ec.buffer):X.getBuffer(ec.buffer),Mc="type"in ec?$d[ec.type]:
yd.dtype,Ac=!!ec.normalized,Lc=ec.size|0,Bc=ec.offset|0,Qc=ec.stride|0,zc=ec.divisor|0);Rc=pb.location;fc=tc[Rc];if(1===Xc){fc.buffer||G.enableVertexAttribArray(Rc);Uc=Lc||1;if(fc.type!==Mc||fc.size!==Uc||fc.buffer!==yd||fc.normalized!==Ac||fc.offset!==Bc||fc.stride!==Qc)G.bindBuffer(34962,yd.buffer),G.vertexAttribPointer(Rc,Uc,Mc,Ac,Qc,Bc),fc.type=Mc,fc.size=Uc,fc.buffer=yd,fc.normalized=Ac,fc.offset=Bc,fc.stride=Qc;fc.divisor!==zc&&(f.vertexAttribDivisorANGLE(Rc,zc),fc.divisor=zc)}else if(fc.buffer&&
(G.disableVertexAttribArray(Rc),fc.buffer=null),fc.x!==Hb||fc.y!==Nc||fc.z!==Fc||fc.w!==Mb)G.vertexAttrib4f(Rc,Hb,Nc,Fc,Mb),fc.x=Hb,fc.y=Nc,fc.z=Fc,fc.w=Mb;kd=Z.call(this,F,h,g);fd=!1;md=null;Vc=0;sd=!1;pe=vd=0;te=1;ne=0;Md=5126;ld=Cc=cd=Kd=0;v(kd)?(fd=!0,md=X.createStream(34962,kd),Md=md.dtype):(md=X.getBuffer(kd))?Md=md.dtype:"constant"in kd?(te=2,"number"===typeof kd.constant?(cd=kd.constant,Cc=ld=Kd=0):(cd=0<kd.constant.length?kd.constant[0]:0,Cc=1<kd.constant.length?kd.constant[1]:0,ld=2<kd.constant.length?
kd.constant[2]:0,Kd=3<kd.constant.length?kd.constant[3]:0)):(md=v(kd.buffer)?X.createStream(34962,kd.buffer):X.getBuffer(kd.buffer),Md="type"in kd?$d[kd.type]:md.dtype,sd=!!kd.normalized,pe=kd.size|0,vd=kd.offset|0,ne=kd.stride|0,Vc=kd.divisor|0);gd=ab.location;$c=tc[gd];if(1===te){$c.buffer||G.enableVertexAttribArray(gd);nd=pe||1;if($c.type!==Md||$c.size!==nd||$c.buffer!==md||$c.normalized!==sd||$c.offset!==vd||$c.stride!==ne)G.bindBuffer(34962,md.buffer),G.vertexAttribPointer(gd,nd,Md,sd,ne,vd),
$c.type=Md,$c.size=nd,$c.buffer=md,$c.normalized=sd,$c.offset=vd,$c.stride=ne;$c.divisor!==Vc&&(f.vertexAttribDivisorANGLE(gd,Vc),$c.divisor=Vc)}else if($c.buffer&&(G.disableVertexAttribArray(gd),$c.buffer=null),$c.x!==cd||$c.y!==Cc||$c.z!==ld||$c.w!==Kd)G.vertexAttrib4f(gd,cd,Cc,ld,Kd),$c.x=cd,$c.y=Cc,$c.z=ld,$c.w=Kd;zd=L.call(this,F,h,g);Bd=!1;Se=null;Ie=0;we=!1;ee=fe=0;de=1;qe=0;be=5126;re=Sc=xc=he=0;v(zd)?(Bd=!0,Se=X.createStream(34962,zd),be=Se.dtype):(Se=X.getBuffer(zd))?be=Se.dtype:"constant"in
zd?(de=2,"number"===typeof zd.constant?(xc=zd.constant,Sc=re=he=0):(xc=0<zd.constant.length?zd.constant[0]:0,Sc=1<zd.constant.length?zd.constant[1]:0,re=2<zd.constant.length?zd.constant[2]:0,he=3<zd.constant.length?zd.constant[3]:0)):(Se=v(zd.buffer)?X.createStream(34962,zd.buffer):X.getBuffer(zd.buffer),be="type"in zd?$d[zd.type]:Se.dtype,we=!!zd.normalized,ee=zd.size|0,fe=zd.offset|0,qe=zd.stride|0,Ie=zd.divisor|0);ke=R.location;Ld=tc[ke];if(1===de){Ld.buffer||G.enableVertexAttribArray(ke);Od=ee||
4;if(Ld.type!==be||Ld.size!==Od||Ld.buffer!==Se||Ld.normalized!==we||Ld.offset!==fe||Ld.stride!==qe)G.bindBuffer(34962,Se.buffer),G.vertexAttribPointer(ke,Od,be,we,qe,fe),Ld.type=be,Ld.size=Od,Ld.buffer=Se,Ld.normalized=we,Ld.offset=fe,Ld.stride=qe;Ld.divisor!==Ie&&(f.vertexAttribDivisorANGLE(ke,Ie),Ld.divisor=Ie)}else if(Ld.buffer&&(G.disableVertexAttribArray(ke),Ld.buffer=null),Ld.x!==xc||Ld.y!==Sc||Ld.z!==re||Ld.w!==he)G.vertexAttrib4f(ke,xc,Sc,re,he),Ld.x=xc,Ld.y=Sc,Ld.z=re,Ld.w=he;Qd=O.call(this,
F,h,g);Rd=!1;ie=null;Ce=0;Xe=!1;Me=oe=0;Ne=1;Je=0;se=5126;Fe=Ee=De=ze=0;v(Qd)?(Rd=!0,ie=X.createStream(34962,Qd),se=ie.dtype):(ie=X.getBuffer(Qd))?se=ie.dtype:"constant"in Qd?(Ne=2,"number"===typeof Qd.constant?(De=Qd.constant,Ee=Fe=ze=0):(De=0<Qd.constant.length?Qd.constant[0]:0,Ee=1<Qd.constant.length?Qd.constant[1]:0,Fe=2<Qd.constant.length?Qd.constant[2]:0,ze=3<Qd.constant.length?Qd.constant[3]:0)):(ie=v(Qd.buffer)?X.createStream(34962,Qd.buffer):X.getBuffer(Qd.buffer),se="type"in Qd?$d[Qd.type]:
ie.dtype,Xe=!!Qd.normalized,Me=Qd.size|0,oe=Qd.offset|0,Je=Qd.stride|0,Ce=Qd.divisor|0);Ae=Wb.location;Nd=tc[Ae];if(1===Ne){Nd.buffer||G.enableVertexAttribArray(Ae);Ud=Me||4;if(Nd.type!==se||Nd.size!==Ud||Nd.buffer!==ie||Nd.normalized!==Xe||Nd.offset!==oe||Nd.stride!==Je)G.bindBuffer(34962,ie.buffer),G.vertexAttribPointer(Ae,Ud,se,Xe,Je,oe),Nd.type=se,Nd.size=Ud,Nd.buffer=ie,Nd.normalized=Xe,Nd.offset=oe,Nd.stride=Je;Nd.divisor!==Ce&&(f.vertexAttribDivisorANGLE(Ae,Ce),Nd.divisor=Ce)}else if(Nd.buffer&&
(G.disableVertexAttribArray(Ae),Nd.buffer=null),Nd.x!==De||Nd.y!==Ee||Nd.z!==Fe||Nd.w!==ze)G.vertexAttrib4f(Ae,De,Ee,Fe,ze),Nd.x=De,Nd.y=Ee,Nd.z=Fe,Nd.w=ze;Zd=U.call(this,F,h,g);ce=!1;Ge=null;Fd=0;Sd=!1;He=xe=0;ef=1;We=0;Oe=5126;Pe=Te=Ve=Ke=0;v(Zd)?(ce=!0,Ge=X.createStream(34962,Zd),Oe=Ge.dtype):(Ge=X.getBuffer(Zd))?Oe=Ge.dtype:"constant"in Zd?(ef=2,"number"===typeof Zd.constant?(Ve=Zd.constant,Te=Pe=Ke=0):(Ve=0<Zd.constant.length?Zd.constant[0]:0,Te=1<Zd.constant.length?Zd.constant[1]:0,Pe=2<Zd.constant.length?
Zd.constant[2]:0,Ke=3<Zd.constant.length?Zd.constant[3]:0)):(Ge=v(Zd.buffer)?X.createStream(34962,Zd.buffer):X.getBuffer(Zd.buffer),Oe="type"in Zd?$d[Zd.type]:Ge.dtype,Sd=!!Zd.normalized,He=Zd.size|0,xe=Zd.offset|0,We=Zd.stride|0,Fd=Zd.divisor|0);Qe=ka.location;Td=tc[Qe];if(1===ef){Td.buffer||G.enableVertexAttribArray(Qe);Xd=He||1;if(Td.type!==Oe||Td.size!==Xd||Td.buffer!==Ge||Td.normalized!==Sd||Td.offset!==xe||Td.stride!==We)G.bindBuffer(34962,Ge.buffer),G.vertexAttribPointer(Qe,Xd,Oe,Sd,We,xe),
Td.type=Oe,Td.size=Xd,Td.buffer=Ge,Td.normalized=Sd,Td.offset=xe,Td.stride=We;Td.divisor!==Fd&&(f.vertexAttribDivisorANGLE(Qe,Fd),Td.divisor=Fd)}else if(Td.buffer&&(G.disableVertexAttribArray(Qe),Td.buffer=null),Td.x!==Ve||Td.y!==Te||Td.z!==Pe||Td.w!==Ke)G.vertexAttrib4f(Qe,Ve,Te,Pe,Ke),Td.x=Ve,Td.y=Te,Td.z=Pe,Td.w=Ke;Re=F.pixelRatio;g&&ff===Re||(ff=Re,G.uniform1f(vb.location,Re));kf=J.call(this,F,h,g);bf=kf[0];hf=kf[1];g&&gf===bf&&jf===hf||(gf=bf,jf=hf,G.uniform2f(Ea.location,bf,hf));of=h.scale;
lf=of[0];Af=of[1];g&&pf===lf&&Bf===Af||(pf=lf,Bf=Af,G.uniform2f(Ha.location,lf,Af));Le=h.scaleFract;ye=Le[0];nf=Le[1];g&&mf===ye&&Cf===nf||(mf=ye,Cf=nf,G.uniform2f(V.location,ye,nf));Ff=h.translate;yf=Ff[0];Ef=Ff[1];g&&Df===yf&&tf===Ef||(Df=yf,tf=Ef,G.uniform2f(ea.location,yf,Ef));uf=h.translateFract;sf=uf[0];wf=uf[1];g&&vf===sf&&Hf===wf||(vf=sf,Hf=wf,G.uniform2f(va.location,sf,wf));If=h.opacity;g&&Jf===If||(Jf=If,G.uniform1f(ba.location,If));Kf=h.elements;qf=null;(qf=(Qf=v(Kf))?wb.createStream(Kf):
wb.getElements(Kf))&&G.bindBuffer(34963,qf.buffer.buffer);Gf=h.offset;if(rf=h.count)0<eb?qf?f.drawElementsInstancedANGLE(0,rf,qf.type,Gf<<(qf.type-5121>>1),eb):f.drawArraysInstancedANGLE(0,Gf,rf,eb):0>eb&&(qf?G.drawElements(0,rf,qf.type,Gf<<(qf.type-5121>>1)):G.drawArrays(0,Gf,rf)),F.viewportWidth=rd,F.viewportHeight=Ub,Kb&&X.destroyStream(Zc),Cb&&X.destroyStream(Ra),Xa&&X.destroyStream(Ya),zb&&X.destroyStream(Ed),gc&&X.destroyStream(yd),fd&&X.destroyStream(md),Bd&&X.destroyStream(Se),Rd&&X.destroyStream(ie),
ce&&X.destroyStream(Ge),Qf&&wb.destroyStream(qf)}ra.unbind();ja.dirty=!0;ga.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(a){var c,e,f,h,l,m,n,x,A,C,E,D,K,L,O,N,J,Q,S,T,U,W,aa,Z,da,Y,ua,qa,ma,pa,ra,la,Ka,La,Qa,Wa,Ca,db,ib,Sa,Ib,eb,Za,Sb,yd,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,xd,zc,
Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd,fd,md,Vc,sd,vd,pe,te,ne,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,Se,Ie,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Xe,oe,Me;c=Tc.next;c!==Tc.cur&&(c?G.bindFramebuffer(36160,c.framebuffer):G.bindFramebuffer(36160,null),Tc.cur=c);if(ja.dirty){var Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf;Ne=ha.dither;Ne!==ja.dither&&(Ne?G.enable(3024):G.disable(3024),ja.dither=Ne);Je=t[0];se=t[1];if(Je!==ca[0]||se!==ca[1])G.blendEquationSeparate(Je,
se),ca[0]=Je,ca[1]=se;ze=ha.depth_func;ze!==ja.depth_func&&(G.depthFunc(ze),ja.depth_func=ze);De=mc[0];Ee=mc[1];if(De!==ia[0]||Ee!==ia[1])G.depthRange(De,Ee),ia[0]=De,ia[1]=Ee;Fe=ha.depth_mask;Fe!==ja.depth_mask&&(G.depthMask(Fe),ja.depth_mask=Fe);Ae=oa[0];Nd=oa[1];Ud=oa[2];Zd=oa[3];if(Ae!==k[0]||Nd!==k[1]||Ud!==k[2]||Zd!==k[3])G.colorMask(Ae,Nd,Ud,Zd),k[0]=Ae,k[1]=Nd,k[2]=Ud,k[3]=Zd;ce=ha.cull_enable;ce!==ja.cull_enable&&(ce?G.enable(2884):G.disable(2884),ja.cull_enable=ce);Ge=ha.cull_face;Ge!==
ja.cull_face&&(G.cullFace(Ge),ja.cull_face=Ge);Fd=ha.frontFace;Fd!==ja.frontFace&&(G.frontFace(Fd),ja.frontFace=Fd);Sd=ha.lineWidth;Sd!==ja.lineWidth&&(G.lineWidth(Sd),ja.lineWidth=Sd);xe=ha.polygonOffset_enable;xe!==ja.polygonOffset_enable&&(xe?G.enable(32823):G.disable(32823),ja.polygonOffset_enable=xe);He=q[0];ef=q[1];if(He!==Jb[0]||ef!==Jb[1])G.polygonOffset(He,ef),Jb[0]=He,Jb[1]=ef;We=ha.sample_alpha;We!==ja.sample_alpha&&(We?G.enable(32926):G.disable(32926),ja.sample_alpha=We);Oe=ha.sample_enable;
Oe!==ja.sample_enable&&(Oe?G.enable(32928):G.disable(32928),ja.sample_enable=Oe);Ke=Bb[0];Ve=Bb[1];if(Ke!==Ue[0]||Ve!==Ue[1])G.sampleCoverage(Ke,Ve),Ue[0]=Ke,Ue[1]=Ve;Te=ha.stencil_mask;Te!==ja.stencil_mask&&(G.stencilMask(Te),ja.stencil_mask=Te);Pe=je[0];Qe=je[1];Td=je[2];if(Pe!==Hd[0]||Qe!==Hd[1]||Td!==Hd[2])G.stencilFunc(Pe,Qe,Td),Hd[0]=Pe,Hd[1]=Qe,Hd[2]=Td;Xd=ge[0];Re=ge[1];ff=ge[2];kf=ge[3];if(Xd!==ve[0]||Re!==ve[1]||ff!==ve[2]||kf!==ve[3])G.stencilOpSeparate(Xd,Re,ff,kf),ve[0]=Xd,ve[1]=Re,ve[2]=
ff,ve[3]=kf;bf=ue[0];gf=ue[1];hf=ue[2];jf=ue[3];if(bf!==od[0]||gf!==od[1]||hf!==od[2]||jf!==od[3])G.stencilOpSeparate(bf,gf,hf,jf),od[0]=bf,od[1]=gf,od[2]=hf,od[3]=jf}e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:F.framebufferWidth-f;m="height"in e?e.height|0:F.framebufferHeight-h;n=F.viewportWidth;F.viewportWidth=l;x=F.viewportHeight;F.viewportHeight=m;G.viewport(f,h,l,m);Id[0]=f;Id[1]=h;Id[2]=l;Id[3]=m;G.blendColor(0,0,0,1);I[0]=0;I[1]=0;I[2]=0;I[3]=1;G.enable(3042);ja.blend_enable=!0;G.blendFuncSeparate(770,
771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;G.disable(2929);ja.depth_enable=!1;A=a.viewport;C=A.x|0;E=A.y|0;D="width"in A?A.width|0:F.framebufferWidth-C;K="height"in A?A.height|0:F.framebufferHeight-E;G.scissor(C,E,D,K);le[0]=C;le[1]=E;le[2]=D;le[3]=K;G.enable(3089);ja.scissor_enable=!0;G.disable(2960);ja.stencil_enable=!1;if(L=ja.profile)O=performance.now(),y.count++;G.useProgram(p.program);N=Wc.angle_instanced_arrays;ga.setVAO(null);J=P.call(this,F,a,0);Q=!1;S=null;T=0;U=!1;aa=W=0;Z=1;da=0;
Y=5126;pa=ma=qa=ua=0;v(J)?(Q=!0,S=X.createStream(34962,J),Y=S.dtype):(S=X.getBuffer(J))?Y=S.dtype:"constant"in J?(Z=2,"number"===typeof J.constant?(qa=J.constant,ma=pa=ua=0):(qa=0<J.constant.length?J.constant[0]:0,ma=1<J.constant.length?J.constant[1]:0,pa=2<J.constant.length?J.constant[2]:0,ua=3<J.constant.length?J.constant[3]:0)):(S=v(J.buffer)?X.createStream(34962,J.buffer):X.getBuffer(J.buffer),Y="type"in J?$d[J.type]:S.dtype,U=!!J.normalized,aa=J.size|0,W=J.offset|0,da=J.stride|0,T=J.divisor|
0);ra=ac.location;la=tc[ra];if(1===Z){la.buffer||G.enableVertexAttribArray(ra);Ka=aa||1;if(la.type!==Y||la.size!==Ka||la.buffer!==S||la.normalized!==U||la.offset!==W||la.stride!==da)G.bindBuffer(34962,S.buffer),G.vertexAttribPointer(ra,Ka,Y,U,da,W),la.type=Y,la.size=Ka,la.buffer=S,la.normalized=U,la.offset=W,la.stride=da;la.divisor!==T&&(N.vertexAttribDivisorANGLE(ra,T),la.divisor=T)}else if(la.buffer&&(G.disableVertexAttribArray(ra),la.buffer=null),la.x!==qa||la.y!==ma||la.z!==pa||la.w!==ua)G.vertexAttrib4f(ra,
qa,ma,pa,ua),la.x=qa,la.y=ma,la.z=pa,la.w=ua;La=g.call(this,F,a,0);Qa=!1;Wa=null;Ca=0;db=!1;Sa=ib=0;Ib=1;eb=0;Za=5126;Tb=$b=yd=Sb=0;v(La)?(Qa=!0,Wa=X.createStream(34962,La),Za=Wa.dtype):(Wa=X.getBuffer(La))?Za=Wa.dtype:"constant"in La?(Ib=2,"number"===typeof La.constant?(yd=La.constant,$b=Tb=Sb=0):(yd=0<La.constant.length?La.constant[0]:0,$b=1<La.constant.length?La.constant[1]:0,Tb=2<La.constant.length?La.constant[2]:0,Sb=3<La.constant.length?La.constant[3]:0)):(Wa=v(La.buffer)?X.createStream(34962,
La.buffer):X.getBuffer(La.buffer),Za="type"in La?$d[La.type]:Wa.dtype,db=!!La.normalized,Sa=La.size|0,ib=La.offset|0,eb=La.stride|0,Ca=La.divisor|0);rd=ic.location;Ub=tc[rd];if(1===Ib){Ub.buffer||G.enableVertexAttribArray(rd);Ma=Sa||1;if(Ub.type!==Za||Ub.size!==Ma||Ub.buffer!==Wa||Ub.normalized!==db||Ub.offset!==ib||Ub.stride!==eb)G.bindBuffer(34962,Wa.buffer),G.vertexAttribPointer(rd,Ma,Za,db,eb,ib),Ub.type=Za,Ub.size=Ma,Ub.buffer=Wa,Ub.normalized=db,Ub.offset=ib,Ub.stride=eb;Ub.divisor!==Ca&&(N.vertexAttribDivisorANGLE(rd,
Ca),Ub.divisor=Ca)}else if(Ub.buffer&&(G.disableVertexAttribArray(rd),Ub.buffer=null),Ub.x!==yd||Ub.y!==$b||Ub.z!==Tb||Ub.w!==Sb)G.vertexAttrib4f(rd,yd,$b,Tb,Sb),Ub.x=yd,Ub.y=$b,Ub.z=Tb,Ub.w=Sb;qb=d.call(this,F,a,0);xb=!1;jb=null;Oa=0;lc=!1;Zc=Kb=0;fb=1;jc=0;dd=5126;ta=mb=lb=hc=0;v(qb)?(xb=!0,jb=X.createStream(34962,qb),dd=jb.dtype):(jb=X.getBuffer(qb))?dd=jb.dtype:"constant"in qb?(fb=2,"number"===typeof qb.constant?(lb=qb.constant,mb=ta=hc=0):(lb=0<qb.constant.length?qb.constant[0]:0,mb=1<qb.constant.length?
qb.constant[1]:0,ta=2<qb.constant.length?qb.constant[2]:0,hc=3<qb.constant.length?qb.constant[3]:0)):(jb=v(qb.buffer)?X.createStream(34962,qb.buffer):X.getBuffer(qb.buffer),dd="type"in qb?$d[qb.type]:jb.dtype,lc=!!qb.normalized,Zc=qb.size|0,Kb=qb.offset|0,jc=qb.stride|0,Oa=qb.divisor|0);rb=pc.location;wa=tc[rb];if(1===fb){wa.buffer||G.enableVertexAttribArray(rb);Ua=Zc||1;if(wa.type!==dd||wa.size!==Ua||wa.buffer!==jb||wa.normalized!==lc||wa.offset!==Kb||wa.stride!==jc)G.bindBuffer(34962,jb.buffer),
G.vertexAttribPointer(rb,Ua,dd,lc,jc,Kb),wa.type=dd,wa.size=Ua,wa.buffer=jb,wa.normalized=lc,wa.offset=Kb,wa.stride=jc;wa.divisor!==Oa&&(N.vertexAttribDivisorANGLE(rb,Oa),wa.divisor=Oa)}else if(wa.buffer&&(G.disableVertexAttribArray(rb),wa.buffer=null),wa.x!==lb||wa.y!==mb||wa.z!==ta||wa.w!==hc)G.vertexAttrib4f(rb,lb,mb,ta,hc),wa.x=lb,wa.y=mb,wa.z=ta,wa.w=hc;cb=z.call(this,F,a,0);za=!1;gb=null;Ia=0;Db=!1;Ra=Cb=0;Ic=1;Lb=0;$a=5126;Ja=Ad=xa=Vb=0;v(cb)?(za=!0,gb=X.createStream(34962,cb),$a=gb.dtype):
(gb=X.getBuffer(cb))?$a=gb.dtype:"constant"in cb?(Ic=2,"number"===typeof cb.constant?(xa=cb.constant,Ad=Ja=Vb=0):(xa=0<cb.constant.length?cb.constant[0]:0,Ad=1<cb.constant.length?cb.constant[1]:0,Ja=2<cb.constant.length?cb.constant[2]:0,Vb=3<cb.constant.length?cb.constant[3]:0)):(gb=v(cb.buffer)?X.createStream(34962,cb.buffer):X.getBuffer(cb.buffer),$a="type"in cb?$d[cb.type]:gb.dtype,Db=!!cb.normalized,Ra=cb.size|0,Cb=cb.offset|0,Lb=cb.stride|0,Ia=cb.divisor|0);Pb=td.location;hb=tc[Pb];if(1===Ic){hb.buffer||
G.enableVertexAttribArray(Pb);kb=Ra||1;if(hb.type!==$a||hb.size!==kb||hb.buffer!==gb||hb.normalized!==Db||hb.offset!==Cb||hb.stride!==Lb)G.bindBuffer(34962,gb.buffer),G.vertexAttribPointer(Pb,kb,$a,Db,Lb,Cb),hb.type=$a,hb.size=kb,hb.buffer=gb,hb.normalized=Db,hb.offset=Cb,hb.stride=Lb;hb.divisor!==Ia&&(N.vertexAttribDivisorANGLE(Pb,Ia),hb.divisor=Ia)}else if(hb.buffer&&(G.disableVertexAttribArray(Pb),hb.buffer=null),hb.x!==xa||hb.y!==Ad||hb.z!==Ja||hb.w!==Vb)G.vertexAttrib4f(Pb,xa,Ad,Ja,Vb),hb.x=
xa,hb.y=Ad,hb.z=Ja,hb.w=Vb;ya=b.call(this,F,a,0);dc=!1;Da=null;sb=0;tb=!1;Ya=Xa=0;kc=1;ad=0;uc=5126;Fa=Oc=Nb=Va=0;v(ya)?(dc=!0,Da=X.createStream(34962,ya),uc=Da.dtype):(Da=X.getBuffer(ya))?uc=Da.dtype:"constant"in ya?(kc=2,"number"===typeof ya.constant?(Nb=ya.constant,Oc=Fa=Va=0):(Nb=0<ya.constant.length?ya.constant[0]:0,Oc=1<ya.constant.length?ya.constant[1]:0,Fa=2<ya.constant.length?ya.constant[2]:0,Va=3<ya.constant.length?ya.constant[3]:0)):(Da=v(ya.buffer)?X.createStream(34962,ya.buffer):X.getBuffer(ya.buffer),
uc="type"in ya?$d[ya.type]:Da.dtype,tb=!!ya.normalized,Ya=ya.size|0,Xa=ya.offset|0,ad=ya.stride|0,sb=ya.divisor|0);wc=pb.location;Pa=tc[wc];if(1===kc){Pa.buffer||G.enableVertexAttribArray(wc);Aa=Ya||1;if(Pa.type!==uc||Pa.size!==Aa||Pa.buffer!==Da||Pa.normalized!==tb||Pa.offset!==Xa||Pa.stride!==ad)G.bindBuffer(34962,Da.buffer),G.vertexAttribPointer(wc,Aa,uc,tb,ad,Xa),Pa.type=uc,Pa.size=Aa,Pa.buffer=Da,Pa.normalized=tb,Pa.offset=Xa,Pa.stride=ad;Pa.divisor!==sb&&(N.vertexAttribDivisorANGLE(wc,sb),Pa.divisor=
sb)}else if(Pa.buffer&&(G.disableVertexAttribArray(wc),Pa.buffer=null),Pa.x!==Nb||Pa.y!==Oc||Pa.z!==Fa||Pa.w!==Va)G.vertexAttrib4f(wc,Nb,Oc,Fa,Va),Pa.x=Nb,Pa.y=Oc,Pa.z=Fa,Pa.w=Va;nb=w.call(this,F,a,0);yb=!1;Eb=null;ub=0;vc=!1;Ed=zb=0;sc=1;ud=0;Kc=5126;cc=Xb=qd=bd=0;v(nb)?(yb=!0,Eb=X.createStream(34962,nb),Kc=Eb.dtype):(Eb=X.getBuffer(nb))?Kc=Eb.dtype:"constant"in nb?(sc=2,"number"===typeof nb.constant?(qd=nb.constant,Xb=cc=bd=0):(qd=0<nb.constant.length?nb.constant[0]:0,Xb=1<nb.constant.length?nb.constant[1]:
0,cc=2<nb.constant.length?nb.constant[2]:0,bd=3<nb.constant.length?nb.constant[3]:0)):(Eb=v(nb.buffer)?X.createStream(34962,nb.buffer):X.getBuffer(nb.buffer),Kc="type"in nb?$d[nb.type]:Eb.dtype,vc=!!nb.normalized,Ed=nb.size|0,zb=nb.offset|0,ud=nb.stride|0,ub=nb.divisor|0);Qb=ab.location;Ga=tc[Qb];if(1===sc){Ga.buffer||G.enableVertexAttribArray(Qb);Zb=Ed||1;if(Ga.type!==Kc||Ga.size!==Zb||Ga.buffer!==Eb||Ga.normalized!==vc||Ga.offset!==zb||Ga.stride!==ud)G.bindBuffer(34962,Eb.buffer),G.vertexAttribPointer(Qb,
Zb,Kc,vc,ud,zb),Ga.type=Kc,Ga.size=Zb,Ga.buffer=Eb,Ga.normalized=vc,Ga.offset=zb,Ga.stride=ud;Ga.divisor!==ub&&(N.vertexAttribDivisorANGLE(Qb,ub),Ga.divisor=ub)}else if(Ga.buffer&&(G.disableVertexAttribArray(Qb),Ga.buffer=null),Ga.x!==qd||Ga.y!==Xb||Ga.z!==cc||Ga.w!==bd)G.vertexAttrib4f(Qb,qd,Xb,cc,bd),Ga.x=qd,Ga.y=Xb,Ga.z=cc,Ga.w=bd;ob=B.call(this,F,a,0);Ab=!1;Ob=null;Rb=0;ec=!1;xd=gc=0;zc=1;Ac=0;Bc=5126;Mc=Qc=Xc=Lc=0;v(ob)?(Ab=!0,Ob=X.createStream(34962,ob),Bc=Ob.dtype):(Ob=X.getBuffer(ob))?Bc=
Ob.dtype:"constant"in ob?(zc=2,"number"===typeof ob.constant?(Xc=ob.constant,Qc=Mc=Lc=0):(Xc=0<ob.constant.length?ob.constant[0]:0,Qc=1<ob.constant.length?ob.constant[1]:0,Mc=2<ob.constant.length?ob.constant[2]:0,Lc=3<ob.constant.length?ob.constant[3]:0)):(Ob=v(ob.buffer)?X.createStream(34962,ob.buffer):X.getBuffer(ob.buffer),Bc="type"in ob?$d[ob.type]:Ob.dtype,ec=!!ob.normalized,xd=ob.size|0,gc=ob.offset|0,Ac=ob.stride|0,Rb=ob.divisor|0);Mb=R.location;Hb=tc[Mb];if(1===zc){Hb.buffer||G.enableVertexAttribArray(Mb);
Nc=xd||4;if(Hb.type!==Bc||Hb.size!==Nc||Hb.buffer!==Ob||Hb.normalized!==ec||Hb.offset!==gc||Hb.stride!==Ac)G.bindBuffer(34962,Ob.buffer),G.vertexAttribPointer(Mb,Nc,Bc,ec,Ac,gc),Hb.type=Bc,Hb.size=Nc,Hb.buffer=Ob,Hb.normalized=ec,Hb.offset=gc,Hb.stride=Ac;Hb.divisor!==Rb&&(N.vertexAttribDivisorANGLE(Mb,Rb),Hb.divisor=Rb)}else if(Hb.buffer&&(G.disableVertexAttribArray(Mb),Hb.buffer=null),Hb.x!==Xc||Hb.y!==Qc||Hb.z!==Mc||Hb.w!==Lc)G.vertexAttrib4f(Mb,Xc,Qc,Mc,Lc),Hb.x=Xc,Hb.y=Qc,Hb.z=Mc,Hb.w=Lc;Fc=
fa.call(this,F,a,0);Rc=!1;fc=null;Uc=0;kd=!1;md=fd=0;Vc=1;sd=0;vd=5126;Md=ne=te=pe=0;v(Fc)?(Rc=!0,fc=X.createStream(34962,Fc),vd=fc.dtype):(fc=X.getBuffer(Fc))?vd=fc.dtype:"constant"in Fc?(Vc=2,"number"===typeof Fc.constant?(te=Fc.constant,ne=Md=pe=0):(te=0<Fc.constant.length?Fc.constant[0]:0,ne=1<Fc.constant.length?Fc.constant[1]:0,Md=2<Fc.constant.length?Fc.constant[2]:0,pe=3<Fc.constant.length?Fc.constant[3]:0)):(fc=v(Fc.buffer)?X.createStream(34962,Fc.buffer):X.getBuffer(Fc.buffer),vd="type"in
Fc?$d[Fc.type]:fc.dtype,kd=!!Fc.normalized,md=Fc.size|0,fd=Fc.offset|0,sd=Fc.stride|0,Uc=Fc.divisor|0);Kd=Wb.location;cd=tc[Kd];if(1===Vc){cd.buffer||G.enableVertexAttribArray(Kd);Cc=md||4;if(cd.type!==vd||cd.size!==Cc||cd.buffer!==fc||cd.normalized!==kd||cd.offset!==fd||cd.stride!==sd)G.bindBuffer(34962,fc.buffer),G.vertexAttribPointer(Kd,Cc,vd,kd,sd,fd),cd.type=vd,cd.size=Cc,cd.buffer=fc,cd.normalized=kd,cd.offset=fd,cd.stride=sd;cd.divisor!==Uc&&(N.vertexAttribDivisorANGLE(Kd,Uc),cd.divisor=Uc)}else if(cd.buffer&&
(G.disableVertexAttribArray(Kd),cd.buffer=null),cd.x!==te||cd.y!==ne||cd.z!==Md||cd.w!==pe)G.vertexAttrib4f(Kd,te,ne,Md,pe),cd.x=te,cd.y=ne,cd.z=Md,cd.w=pe;ld=M.call(this,F,a,0);gd=!1;$c=null;nd=0;zd=!1;Se=Bd=0;Ie=1;we=0;fe=5126;be=qe=de=ee=0;v(ld)?(gd=!0,$c=X.createStream(34962,ld),fe=$c.dtype):($c=X.getBuffer(ld))?fe=$c.dtype:"constant"in ld?(Ie=2,"number"===typeof ld.constant?(de=ld.constant,qe=be=ee=0):(de=0<ld.constant.length?ld.constant[0]:0,qe=1<ld.constant.length?ld.constant[1]:0,be=2<ld.constant.length?
ld.constant[2]:0,ee=3<ld.constant.length?ld.constant[3]:0)):($c=v(ld.buffer)?X.createStream(34962,ld.buffer):X.getBuffer(ld.buffer),fe="type"in ld?$d[ld.type]:$c.dtype,zd=!!ld.normalized,Se=ld.size|0,Bd=ld.offset|0,we=ld.stride|0,nd=ld.divisor|0);he=ka.location;xc=tc[he];if(1===Ie){xc.buffer||G.enableVertexAttribArray(he);Sc=Se||1;if(xc.type!==fe||xc.size!==Sc||xc.buffer!==$c||xc.normalized!==zd||xc.offset!==Bd||xc.stride!==we)G.bindBuffer(34962,$c.buffer),G.vertexAttribPointer(he,Sc,fe,zd,we,Bd),
xc.type=fe,xc.size=Sc,xc.buffer=$c,xc.normalized=zd,xc.offset=Bd,xc.stride=we;xc.divisor!==nd&&(N.vertexAttribDivisorANGLE(he,nd),xc.divisor=nd)}else if(xc.buffer&&(G.disableVertexAttribArray(he),xc.buffer=null),xc.x!==de||xc.y!==qe||xc.z!==be||xc.w!==ee)G.vertexAttrib4f(he,de,qe,be,ee),xc.x=de,xc.y=qe,xc.z=be,xc.w=ee;G.uniform1i(u.location,!1);G.uniform1f(vb.location,F.pixelRatio);re=H.call(this,F,a,0);G.uniform2f(Ea.location,re[0],re[1]);ke=a.scale;G.uniform2f(Ha.location,ke[0],ke[1]);Ld=a.scaleFract;
G.uniform2f(V.location,Ld[0],Ld[1]);Od=a.translate;G.uniform2f(ea.location,Od[0],Od[1]);Qd=a.translateFract;G.uniform2f(va.location,Qd[0],Qd[1]);G.uniform1f(ba.location,a.opacity);G.uniform1i(Na.location,r.bind());Rd=a.elements;ie=null;(ie=(Ce=v(Rd))?wb.createStream(Rd):wb.getElements(Rd))&&G.bindBuffer(34963,ie.buffer.buffer);Xe=a.offset;if(oe=a.count)Me=Ba.instances,0<Me?ie?N.drawElementsInstancedANGLE(0,oe,ie.type,Xe<<(ie.type-5121>>1),Me):N.drawArraysInstancedANGLE(0,Xe,oe,Me):0>Me&&(ie?G.drawElements(0,
oe,ie.type,Xe<<(ie.type-5121>>1)):G.drawArrays(0,Xe,oe)),ja.dirty=!0,ga.setVAO(null),F.viewportWidth=n,F.viewportHeight=x,L&&(y.cpuTime+=performance.now()-O),Q&&X.destroyStream(S),Qa&&X.destroyStream(Wa),xb&&X.destroyStream(jb),za&&X.destroyStream(gb),dc&&X.destroyStream(Da),yb&&X.destroyStream(Eb),Ab&&X.destroyStream(Ob),Rc&&X.destroyStream(fc),gd&&X.destroyStream($c),r.unbind(),Ce&&wb.destroyStream(ie)},scope:function(b,c,d){var g,k,p,q,t,r,u,w,z,I,G,P,J,H,L,B,O,M,R,ca,U,V,ga,Z,fa,ba,ia,na,oa,ea,
ka,sa,la,ma,ra,va,Ha,Ea,Ka,Na,Qa,Bb,tc,ab,db,Jb,pb,Ma,qb,xb,jb,Oa,Za,Kb,td,fb,mc,vb,Wb,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,ac,Lb,$a,Vb,xa,pc,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ic,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,od,sc,je,Kc,bd,Wc,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Hd,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,Tc,fd,md,Vc,Id,vd,xd,le,ge,Md,Kd,cd,Cc,ld,gd,$c,nd,zd,Bd,ue,ve,we,fe,ee,de,qe,be,he,xc,Sc,re,ke,Ld,Od,Qd,Rd,ie,Ce,Ue,oe,Me,Ne,Je,se,ze,De,Ee,Fe,Ae,Nd,Ud,Zd,ce,Ge,Fd,Sd,xe,He,ef,We,
Oe,Ke,Ve,Te,Pe,Qe,Td,Xd,Re,ff,kf,bf,gf,hf,jf,of,lf,pf,Af,Bf,Le,ye,mf,nf,Cf,Ff,yf,Df,Ef,tf,uf,sf,vf,wf,Hf,If,Jf,Kf,qf,Qf,Gf,rf,cg,Rf,Sf,pg,cf,Ze,Lf,Mf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Nf,Of,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng;g=b.viewport;k=g.x|0;p=g.y|0;q="width"in g?g.width|0:F.framebufferWidth-k;t="height"in g?g.height|0:F.framebufferHeight-p;r=F.viewportWidth;F.viewportWidth=q;u=F.viewportHeight;F.viewportHeight=t;w=yd[0];
yd[0]=k;z=yd[1];yd[1]=p;I=yd[2];yd[2]=q;G=yd[3];yd[3]=t;P=qa[0];qa[0]=0;J=qa[1];qa[1]=0;H=qa[2];qa[2]=0;L=qa[3];qa[3]=1;B=ha.blend_enable;ha.blend_enable=!0;O=x[0];x[0]=770;M=x[1];x[1]=771;R=x[2];x[2]=773;ca=x[3];x[3]=1;U=ha.depth_enable;ha.depth_enable=!1;V=b.viewport;ga=V.x|0;Z=V.y|0;fa="width"in V?V.width|0:F.framebufferWidth-ga;ba="height"in V?V.height|0:F.framebufferHeight-Z;ia=pe[0];pe[0]=ga;na=pe[1];pe[1]=Z;oa=pe[2];pe[2]=fa;ea=pe[3];pe[3]=ba;ka=ha.scissor_enable;ha.scissor_enable=!0;sa=ha.stencil_enable;
ha.stencil_enable=!1;if(la=ja.profile)ma=performance.now(),y.count++;ra=b.elements;va=null;va=(Ha=v(ra))?wb.createStream(ra):wb.getElements(ra);Ea=Ba.elements;Ba.elements=va;Ka=b.offset;Na=Ba.offset;Ba.offset=Ka;Qa=b.count;Bb=Ba.count;Ba.count=Qa;tc=Ba.primitive;Ba.primitive=0;ab=S[45];S[45]=!1;db=b.markerTexture;Jb=S[48];S[48]=db;pb=b.opacity;Ma=S[10];S[10]=pb;qb=D.call(this,F,b,d);xb=S[46];S[46]=qb;jb=S[47];S[47]=C;Oa=F.pixelRatio;Za=S[34];S[34]=Oa;Kb=b.scale;td=S[6];S[6]=Kb;fb=b.scaleFract;mc=
S[7];S[7]=fb;vb=b.translate;Wb=S[8];S[8]=vb;lb=b.translateFract;mb=S[9];S[9]=lb;ta=E.call(this,F,b,d);rb=!1;wa=null;Ua=0;cb=!1;gb=za=0;Ia=1;Db=0;Cb=5126;$a=Lb=ac=Ra=0;v(ta)?(rb=!0,wa=X.createStream(34962,ta),Cb=wa.dtype):(wa=X.getBuffer(ta))?Cb=wa.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(ac=ta.constant,Lb=$a=Ra=0):(ac=0<ta.constant.length?ta.constant[0]:0,Lb=1<ta.constant.length?ta.constant[1]:0,$a=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?ta.constant[3]:0)):
(wa=v(ta.buffer)?X.createStream(34962,ta.buffer):X.getBuffer(ta.buffer),Cb="type"in ta?$d[ta.type]:wa.dtype,cb=!!ta.normalized,gb=ta.size|0,za=ta.offset|0,Db=ta.stride|0,Ua=ta.divisor|0);Vb=Q.buffer;Q.buffer=wa;xa=Q.divisor;Q.divisor=Ua;pc=Q.normalized;Q.normalized=cb;Ja=Q.offset;Q.offset=za;Pb=Q.size;Q.size=gb;hb=Q.state;Q.state=Ia;kb=Q.stride;Q.stride=Db;ya=Q.type;Q.type=Cb;dc=Q.w;Q.w=Ra;Da=Q.x;Q.x=ac;sb=Q.y;Q.y=Lb;tb=Q.z;Q.z=$a;Xa=A.call(this,F,b,d);Ya=!1;kc=null;ic=0;uc=!1;Nb=Va=0;Oc=1;Fa=0;wc=
5126;yb=nb=Aa=Pa=0;v(Xa)?(Ya=!0,kc=X.createStream(34962,Xa),wc=kc.dtype):(kc=X.getBuffer(Xa))?wc=kc.dtype:"constant"in Xa?(Oc=2,"number"===typeof Xa.constant?(Aa=Xa.constant,nb=yb=Pa=0):(Aa=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,yb=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:0)):(kc=v(Xa.buffer)?X.createStream(34962,Xa.buffer):X.getBuffer(Xa.buffer),wc="type"in Xa?$d[Xa.type]:kc.dtype,uc=!!Xa.normalized,Nb=Xa.size|0,Va=Xa.offset|
0,Fa=Xa.stride|0,ic=Xa.divisor|0);Eb=N.buffer;N.buffer=kc;ub=N.divisor;N.divisor=ic;vc=N.normalized;N.normalized=uc;zb=N.offset;N.offset=Va;od=N.size;N.size=Nb;sc=N.state;N.state=Oc;je=N.stride;N.stride=Fa;Kc=N.type;N.type=wc;bd=N.w;N.w=Pa;Wc=N.x;N.x=Aa;Xb=N.y;N.y=nb;cc=N.z;N.z=yb;Qb=Y.call(this,F,b,d);Ga=!1;Zb=null;ob=0;Ab=!1;Rb=Ob=0;ec=1;gc=0;Hd=5126;Lc=Bc=Ac=zc=0;v(Qb)?(Ga=!0,Zb=X.createStream(34962,Qb),Hd=Zb.dtype):(Zb=X.getBuffer(Qb))?Hd=Zb.dtype:"constant"in Qb?(ec=2,"number"===typeof Qb.constant?
(Ac=Qb.constant,Bc=Lc=zc=0):(Ac=0<Qb.constant.length?Qb.constant[0]:0,Bc=1<Qb.constant.length?Qb.constant[1]:0,Lc=2<Qb.constant.length?Qb.constant[2]:0,zc=3<Qb.constant.length?Qb.constant[3]:0)):(Zb=v(Qb.buffer)?X.createStream(34962,Qb.buffer):X.getBuffer(Qb.buffer),Hd="type"in Qb?$d[Qb.type]:Zb.dtype,Ab=!!Qb.normalized,Rb=Qb.size|0,Ob=Qb.offset|0,gc=Qb.stride|0,ob=Qb.divisor|0);Xc=h.buffer;h.buffer=Zb;Qc=h.divisor;h.divisor=ob;Mc=h.normalized;h.normalized=Ab;Mb=h.offset;h.offset=Ob;Hb=h.size;h.size=
Rb;Nc=h.state;h.state=ec;Fc=h.stride;h.stride=gc;Rc=h.type;h.type=Hd;fc=h.w;h.w=zc;Uc=h.x;h.x=Ac;Tc=h.y;h.y=Bc;fd=h.z;h.z=Lc;md=f.call(this,F,b,d);Vc=!1;Id=null;vd=0;xd=!1;ge=le=0;Md=1;Kd=0;cd=5126;$c=gd=ld=Cc=0;v(md)?(Vc=!0,Id=X.createStream(34962,md),cd=Id.dtype):(Id=X.getBuffer(md))?cd=Id.dtype:"constant"in md?(Md=2,"number"===typeof md.constant?(ld=md.constant,gd=$c=Cc=0):(ld=0<md.constant.length?md.constant[0]:0,gd=1<md.constant.length?md.constant[1]:0,$c=2<md.constant.length?md.constant[2]:
0,Cc=3<md.constant.length?md.constant[3]:0)):(Id=v(md.buffer)?X.createStream(34962,md.buffer):X.getBuffer(md.buffer),cd="type"in md?$d[md.type]:Id.dtype,xd=!!md.normalized,ge=md.size|0,le=md.offset|0,Kd=md.stride|0,vd=md.divisor|0);nd=e.buffer;e.buffer=Id;zd=e.divisor;e.divisor=vd;Bd=e.normalized;e.normalized=xd;ue=e.offset;e.offset=le;ve=e.size;e.size=ge;we=e.state;e.state=Md;fe=e.stride;e.stride=Kd;ee=e.type;e.type=cd;de=e.w;e.w=Cc;qe=e.x;e.x=ld;be=e.y;e.y=gd;he=e.z;e.z=$c;xc=l.call(this,F,b,d);
Sc=!1;re=null;ke=0;Ld=!1;Qd=Od=0;Rd=1;ie=0;Ce=5126;Ne=Me=oe=Ue=0;v(xc)?(Sc=!0,re=X.createStream(34962,xc),Ce=re.dtype):(re=X.getBuffer(xc))?Ce=re.dtype:"constant"in xc?(Rd=2,"number"===typeof xc.constant?(oe=xc.constant,Me=Ne=Ue=0):(oe=0<xc.constant.length?xc.constant[0]:0,Me=1<xc.constant.length?xc.constant[1]:0,Ne=2<xc.constant.length?xc.constant[2]:0,Ue=3<xc.constant.length?xc.constant[3]:0)):(re=v(xc.buffer)?X.createStream(34962,xc.buffer):X.getBuffer(xc.buffer),Ce="type"in xc?$d[xc.type]:re.dtype,
Ld=!!xc.normalized,Qd=xc.size|0,Od=xc.offset|0,ie=xc.stride|0,ke=xc.divisor|0);Je=T.buffer;T.buffer=re;se=T.divisor;T.divisor=ke;ze=T.normalized;T.normalized=Ld;De=T.offset;T.offset=Od;Ee=T.size;T.size=Qd;Fe=T.state;T.state=Rd;Ae=T.stride;T.stride=ie;Nd=T.type;T.type=Ce;Ud=T.w;T.w=Ue;Zd=T.x;T.x=oe;ce=T.y;T.y=Me;Ge=T.z;T.z=Ne;Fd=aa.call(this,F,b,d);Sd=!1;xe=null;He=0;ef=!1;Oe=We=0;Ke=1;Ve=0;Te=5126;Xd=Td=Qe=Pe=0;v(Fd)?(Sd=!0,xe=X.createStream(34962,Fd),Te=xe.dtype):(xe=X.getBuffer(Fd))?Te=xe.dtype:
"constant"in Fd?(Ke=2,"number"===typeof Fd.constant?(Qe=Fd.constant,Td=Xd=Pe=0):(Qe=0<Fd.constant.length?Fd.constant[0]:0,Td=1<Fd.constant.length?Fd.constant[1]:0,Xd=2<Fd.constant.length?Fd.constant[2]:0,Pe=3<Fd.constant.length?Fd.constant[3]:0)):(xe=v(Fd.buffer)?X.createStream(34962,Fd.buffer):X.getBuffer(Fd.buffer),Te="type"in Fd?$d[Fd.type]:xe.dtype,ef=!!Fd.normalized,Oe=Fd.size|0,We=Fd.offset|0,Ve=Fd.stride|0,He=Fd.divisor|0);Re=m.buffer;m.buffer=xe;ff=m.divisor;m.divisor=He;kf=m.normalized;m.normalized=
ef;bf=m.offset;m.offset=We;gf=m.size;m.size=Oe;hf=m.state;m.state=Ke;jf=m.stride;m.stride=Ve;of=m.type;m.type=Te;lf=m.w;m.w=Pe;pf=m.x;m.x=Qe;Af=m.y;m.y=Td;Bf=m.z;m.z=Xd;Le=pa.call(this,F,b,d);ye=!1;mf=null;nf=0;Cf=!1;yf=Ff=0;Df=1;Ef=0;tf=5126;wf=vf=sf=uf=0;v(Le)?(ye=!0,mf=X.createStream(34962,Le),tf=mf.dtype):(mf=X.getBuffer(Le))?tf=mf.dtype:"constant"in Le?(Df=2,"number"===typeof Le.constant?(sf=Le.constant,vf=wf=uf=0):(sf=0<Le.constant.length?Le.constant[0]:0,vf=1<Le.constant.length?Le.constant[1]:
0,wf=2<Le.constant.length?Le.constant[2]:0,uf=3<Le.constant.length?Le.constant[3]:0)):(mf=v(Le.buffer)?X.createStream(34962,Le.buffer):X.getBuffer(Le.buffer),tf="type"in Le?$d[Le.type]:mf.dtype,Cf=!!Le.normalized,yf=Le.size|0,Ff=Le.offset|0,Ef=Le.stride|0,nf=Le.divisor|0);Hf=K.buffer;K.buffer=mf;If=K.divisor;K.divisor=nf;Jf=K.normalized;K.normalized=Cf;Kf=K.offset;K.offset=Ff;qf=K.size;K.size=yf;Qf=K.state;K.state=Df;Gf=K.stride;K.stride=Ef;rf=K.type;K.type=tf;cg=K.w;K.w=uf;Rf=K.x;K.x=sf;Sf=K.y;K.y=
vf;pg=K.z;K.z=wf;cf=da.call(this,F,b,d);Ze=!1;Lf=null;Mf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;Yf=Xf=Wf=Tf=0;v(cf)?(Ze=!0,Lf=X.createStream(34962,cf),Vf=Lf.dtype):(Lf=X.getBuffer(cf))?Vf=Lf.dtype:"constant"in cf?(gg=2,"number"===typeof cf.constant?(Wf=cf.constant,Xf=Yf=Tf=0):(Wf=0<cf.constant.length?cf.constant[0]:0,Xf=1<cf.constant.length?cf.constant[1]:0,Yf=2<cf.constant.length?cf.constant[2]:0,Tf=3<cf.constant.length?cf.constant[3]:0)):(Lf=v(cf.buffer)?X.createStream(34962,cf.buffer):X.getBuffer(cf.buffer),
Vf="type"in cf?$d[cf.type]:Lf.dtype,dg=!!cf.normalized,fg=cf.size|0,eg=cf.offset|0,hg=cf.stride|0,Mf=cf.divisor|0);ig=a.buffer;a.buffer=Lf;qg=a.divisor;a.divisor=Mf;rg=a.normalized;a.normalized=dg;sg=a.offset;a.offset=eg;tg=a.size;a.size=fg;ug=a.state;a.state=gg;vg=a.stride;a.stride=hg;wg=a.type;a.type=Vf;xg=a.w;a.w=Tf;yg=a.x;a.x=Wf;zg=a.y;a.y=Xf;Ag=a.z;a.z=Yf;df=n.call(this,F,b,d);$e=!1;Nf=null;Of=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;v(df)?($e=!0,Nf=X.createStream(34962,df),Zf=Nf.dtype):
(Nf=X.getBuffer(df))?Zf=Nf.dtype:"constant"in df?(mg=2,"number"===typeof df.constant?($f=df.constant,ag=bg=Uf=0):($f=0<df.constant.length?df.constant[0]:0,ag=1<df.constant.length?df.constant[1]:0,bg=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Nf=v(df.buffer)?X.createStream(34962,df.buffer):X.getBuffer(df.buffer),Zf="type"in df?$d[df.type]:Nf.dtype,jg=!!df.normalized,lg=df.size|0,kg=df.offset|0,ng=df.stride|0,Of=df.divisor|0);og=W.buffer;W.buffer=Nf;Bg=W.divisor;
W.divisor=Of;Cg=W.normalized;W.normalized=jg;Dg=W.offset;W.offset=kg;Eg=W.size;W.size=lg;Fg=W.state;W.state=mg;Gg=W.stride;W.stride=ng;Hg=W.type;W.type=Zf;Ig=W.w;W.w=Uf;Jg=W.x;W.x=$f;Kg=W.y;W.y=ag;Lg=W.z;W.z=bg;Mg=ua.vert;ua.vert=59;Ng=ua.frag;ua.frag=58;ja.dirty=!0;c(F,b,d);F.viewportWidth=r;F.viewportHeight=u;yd[0]=w;yd[1]=z;yd[2]=I;yd[3]=G;qa[0]=P;qa[1]=J;qa[2]=H;qa[3]=L;ha.blend_enable=B;x[0]=O;x[1]=M;x[2]=R;x[3]=ca;ha.depth_enable=U;pe[0]=ia;pe[1]=na;pe[2]=oa;pe[3]=ea;ha.scissor_enable=ka;ha.stencil_enable=
sa;la&&(y.cpuTime+=performance.now()-ma);Ha&&wb.destroyStream(va);Ba.elements=Ea;Ba.offset=Na;Ba.count=Bb;Ba.primitive=tc;S[45]=ab;S[48]=Jb;S[10]=Ma;S[46]=xb;S[47]=jb;S[34]=Za;S[6]=td;S[7]=mc;S[8]=Wb;S[9]=mb;rb&&X.destroyStream(wa);Q.buffer=Vb;Q.divisor=xa;Q.normalized=pc;Q.offset=Ja;Q.size=Pb;Q.state=hb;Q.stride=kb;Q.type=ya;Q.w=dc;Q.x=Da;Q.y=sb;Q.z=tb;Ya&&X.destroyStream(kc);N.buffer=Eb;N.divisor=ub;N.normalized=vc;N.offset=zb;N.size=od;N.state=sc;N.stride=je;N.type=Kc;N.w=bd;N.x=Wc;N.y=Xb;N.z=
cc;Ga&&X.destroyStream(Zb);h.buffer=Xc;h.divisor=Qc;h.normalized=Mc;h.offset=Mb;h.size=Hb;h.state=Nc;h.stride=Fc;h.type=Rc;h.w=fc;h.x=Uc;h.y=Tc;h.z=fd;Vc&&X.destroyStream(Id);e.buffer=nd;e.divisor=zd;e.normalized=Bd;e.offset=ue;e.size=ve;e.state=we;e.stride=fe;e.type=ee;e.w=de;e.x=qe;e.y=be;e.z=he;Sc&&X.destroyStream(re);T.buffer=Je;T.divisor=se;T.normalized=ze;T.offset=De;T.size=Ee;T.state=Fe;T.stride=Ae;T.type=Nd;T.w=Ud;T.x=Zd;T.y=ce;T.z=Ge;Sd&&X.destroyStream(xe);m.buffer=Re;m.divisor=ff;m.normalized=
kf;m.offset=bf;m.size=gf;m.state=hf;m.stride=jf;m.type=of;m.w=lf;m.x=pf;m.y=Af;m.z=Bf;ye&&X.destroyStream(mf);K.buffer=Hf;K.divisor=If;K.normalized=Jf;K.offset=Kf;K.size=qf;K.state=Qf;K.stride=Gf;K.type=rf;K.w=cg;K.x=Rf;K.y=Sf;K.z=pg;Ze&&X.destroyStream(Lf);a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;$e&&X.destroyStream(Nf);W.buffer=og;W.divisor=Bg;W.normalized=Cg;W.offset=Dg;W.size=Eg;W.state=Fg;W.stride=Gg;W.type=Hg;
W.w=Ig;W.x=Jg;W.y=Kg;W.z=Lg;ua.vert=Mg;ua.frag=Ng;ja.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(c,y,p,P,g,d,z,b,w,B,fa,M,H,r,D,C,E,Q,A,N,Y,h,f,e,l,T,aa,m,pa,K,da,a,n,W,ma,Ka,db,Za,la,Qa){var Z,L,O,U,ra,J,Wb,ab,R,u,ka,ba,Ea,Na,vb,Ha,V,pb,ea,va,ac,pc,ic,td,tc,X,F,ja,Ba,wb,Wc,Tc,G,v,ha,ua,S,ga,qa,I,t;Z=c.attributes;L=c.buffer;O=c.context;U=c.current;ra=c.draw;J=c.elements;Wb=c.extensions;
ab=c.framebuffer;R=c.gl;u=c.isBufferArgs;ka=c.next;ba=c.shader;Ea=c.uniforms;Na=c.vao;vb=ka.blend_color;Ha=U.blend_color;V=ka.blend_equation;pb=U.blend_equation;ea=ka.blend_func;va=U.blend_func;ac=ka.colorMask;pc=U.colorMask;ic=ka.depth_range;td=U.depth_range;tc=ka.polygonOffset_offset;X=U.polygonOffset_offset;F=ka.sample_coverage;ja=U.sample_coverage;Ba=ka.scissor_box;wb=U.scissor_box;Wc=ka.stencil_func;Tc=U.stencil_func;G=ka.stencil_opBack;v=U.stencil_opBack;ha=ka.stencil_opFront;ua=U.stencil_opFront;
S=ka.viewport;ga=U.viewport;qa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};I={offset:4,stride:8};t={offset:0,stride:8};return{batch:function(b,c){var d,g,k,p,r,q,w,z,C,E,P,D,H;d=ab.next;d!==ab.cur&&(d?R.bindFramebuffer(36160,d.framebuffer):R.bindFramebuffer(36160,null),ab.cur=d);if(U.dirty){var B,M,S,fa,ba,na,ea,Ea,vb,xf,af,Cd,Be,Vd,Wd,me,Yd,pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb;B=ka.dither;B!==U.dither&&(B?R.enable(3024):
R.disable(3024),U.dither=B);M=V[0];S=V[1];if(M!==pb[0]||S!==pb[1])R.blendEquationSeparate(M,S),pb[0]=M,pb[1]=S;fa=ka.depth_func;fa!==U.depth_func&&(R.depthFunc(fa),U.depth_func=fa);ba=ic[0];na=ic[1];if(ba!==td[0]||na!==td[1])R.depthRange(ba,na),td[0]=ba,td[1]=na;ea=ka.depth_mask;ea!==U.depth_mask&&(R.depthMask(ea),U.depth_mask=ea);Ea=ac[0];vb=ac[1];xf=ac[2];af=ac[3];if(Ea!==pc[0]||vb!==pc[1]||xf!==pc[2]||af!==pc[3])R.colorMask(Ea,vb,xf,af),pc[0]=Ea,pc[1]=vb,pc[2]=xf,pc[3]=af;Cd=ka.cull_enable;Cd!==
U.cull_enable&&(Cd?R.enable(2884):R.disable(2884),U.cull_enable=Cd);Be=ka.cull_face;Be!==U.cull_face&&(R.cullFace(Be),U.cull_face=Be);Vd=ka.frontFace;Vd!==U.frontFace&&(R.frontFace(Vd),U.frontFace=Vd);Wd=ka.lineWidth;Wd!==U.lineWidth&&(R.lineWidth(Wd),U.lineWidth=Wd);me=ka.polygonOffset_enable;me!==U.polygonOffset_enable&&(me?R.enable(32823):R.disable(32823),U.polygonOffset_enable=me);Yd=tc[0];pd=tc[1];if(Yd!==X[0]||pd!==X[1])R.polygonOffset(Yd,pd),X[0]=Yd,X[1]=pd;hd=ka.sample_alpha;hd!==U.sample_alpha&&
(hd?R.enable(32926):R.disable(32926),U.sample_alpha=hd);wd=ka.sample_enable;wd!==U.sample_enable&&(wd?R.enable(32928):R.disable(32928),U.sample_enable=wd);Yc=F[0];id=F[1];if(Yc!==ja[0]||id!==ja[1])R.sampleCoverage(Yc,id),ja[0]=Yc,ja[1]=id;nc=ka.stencil_mask;nc!==U.stencil_mask&&(R.stencilMask(nc),U.stencil_mask=nc);Gd=Wc[0];ed=Wc[1];Jc=Wc[2];if(Gd!==Tc[0]||ed!==Tc[1]||Jc!==Tc[2])R.stencilFunc(Gd,ed,Jc),Tc[0]=Gd,Tc[1]=ed,Tc[2]=Jc;qc=ha[0];bb=ha[1];Gc=ha[2];Fb=ha[3];if(qc!==ua[0]||bb!==ua[1]||Gc!==
ua[2]||Fb!==ua[3])R.stencilOpSeparate(qc,bb,Gc,Fb),ua[0]=qc,ua[1]=bb,ua[2]=Gc,ua[3]=Fb;oc=G[0];Ta=G[1];Hc=G[2];bc=G[3];if(oc!==v[0]||Ta!==v[1]||Hc!==v[2]||bc!==v[3])R.stencilOpSeparate(oc,Ta,Hc,bc),v[0]=oc,v[1]=Ta,v[2]=Hc,v[3]=bc;rc=ka.scissor_enable;rc!==U.scissor_enable&&(rc?R.enable(3089):R.disable(3089),U.scissor_enable=rc);Jd=Ba[0];Dd=Ba[1];yc=Ba[2];Yb=Ba[3];if(Jd!==wb[0]||Dd!==wb[1]||yc!==wb[2]||Yb!==wb[3])R.scissor(Jd,Dd,yc,Yb),wb[0]=Jd,wb[1]=Dd,wb[2]=yc,wb[3]=Yb}g=this.viewport;k=g.x|0;p=
g.y|0;r="width"in g?g.width|0:O.framebufferWidth-k;q="height"in g?g.height|0:O.framebufferHeight-p;w=O.viewportWidth;O.viewportWidth=r;z=O.viewportHeight;O.viewportHeight=q;R.viewport(k,p,r,q);ga[0]=k;ga[1]=p;ga[2]=r;ga[3]=q;R.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;R.enable(3042);U.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;R.disable(2929);U.depth_enable=!1;R.disable(2960);U.stencil_enable=!1;if(C=U.profile)E=performance.now(),y.count+=c;
R.useProgram(Q.program);P=Wb.angle_instanced_arrays;var Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb;Na.setVAO(null);t.buffer=this.sizeBuffer;Dc=!1;Pc=null;La=0;Gb=!1;Ca=Wa=0;jd=1;ib=0;Sa=5126;Sb=Ec=eb=Ib=0;u(t)?(Dc=!0,Pc=L.createStream(34962,t),Sa=Pc.dtype):(Pc=L.getBuffer(t))?Sa=Pc.dtype:"constant"in t?(jd=2,"number"===typeof t.constant?
(eb=t.constant,Ec=Sb=Ib=0):(eb=0<t.constant.length?t.constant[0]:0,Ec=1<t.constant.length?t.constant[1]:0,Sb=2<t.constant.length?t.constant[2]:0,Ib=3<t.constant.length?t.constant[3]:0)):(Pc=u(t.buffer)?L.createStream(34962,t.buffer):L.getBuffer(t.buffer),Sa="type"in t?qa[t.type]:Pc.dtype,Gb=!!t.normalized,Ca=t.size|0,Wa=t.offset|0,ib=t.stride|0,La=t.divisor|0);ae=Qa.location;$b=Z[ae];if(1===jd){$b.buffer||R.enableVertexAttribArray(ae);Tb=Ca||1;if($b.type!==Sa||$b.size!==Tb||$b.buffer!==Pc||$b.normalized!==
Gb||$b.offset!==Wa||$b.stride!==ib)R.bindBuffer(34962,Pc.buffer),R.vertexAttribPointer(ae,Tb,Sa,Gb,ib,Wa),$b.type=Sa,$b.size=Tb,$b.buffer=Pc,$b.normalized=Gb,$b.offset=Wa,$b.stride=ib;$b.divisor!==La&&(P.vertexAttribDivisorANGLE(ae,La),$b.divisor=La)}else if($b.buffer&&(R.disableVertexAttribArray(ae),$b.buffer=null),$b.x!==eb||$b.y!==Ec||$b.z!==Sb||$b.w!==Ib)R.vertexAttrib4f(ae,eb,Ec,Sb,Ib),$b.x=eb,$b.y=Ec,$b.z=Sb,$b.w=Ib;I.buffer=this.sizeBuffer;rd=!1;Ub=null;Ma=0;qb=!1;jb=xb=0;Oa=1;lc=0;Kb=5126;
dd=jc=fb=Zc=0;u(I)?(rd=!0,Ub=L.createStream(34962,I),Kb=Ub.dtype):(Ub=L.getBuffer(I))?Kb=Ub.dtype:"constant"in I?(Oa=2,"number"===typeof I.constant?(fb=I.constant,jc=dd=Zc=0):(fb=0<I.constant.length?I.constant[0]:0,jc=1<I.constant.length?I.constant[1]:0,dd=2<I.constant.length?I.constant[2]:0,Zc=3<I.constant.length?I.constant[3]:0)):(Ub=u(I.buffer)?L.createStream(34962,I.buffer):L.getBuffer(I.buffer),Kb="type"in I?qa[I.type]:Ub.dtype,qb=!!I.normalized,jb=I.size|0,xb=I.offset|0,lc=I.stride|0,Ma=I.divisor|
0);hc=K.location;lb=Z[hc];if(1===Oa){lb.buffer||R.enableVertexAttribArray(hc);mb=jb||1;if(lb.type!==Kb||lb.size!==mb||lb.buffer!==Ub||lb.normalized!==qb||lb.offset!==xb||lb.stride!==lc)R.bindBuffer(34962,Ub.buffer),R.vertexAttribPointer(hc,mb,Kb,qb,lc,xb),lb.type=Kb,lb.size=mb,lb.buffer=Ub,lb.normalized=qb,lb.offset=xb,lb.stride=lc;lb.divisor!==Ma&&(P.vertexAttribDivisorANGLE(hc,Ma),lb.divisor=Ma)}else if(lb.buffer&&(R.disableVertexAttribArray(hc),lb.buffer=null),lb.x!==fb||lb.y!==jc||lb.z!==dd||
lb.w!==Zc)R.vertexAttrib4f(hc,fb,jc,dd,Zc),lb.x=fb,lb.y=jc,lb.z=dd,lb.w=Zc;ta=this.charBuffer;rb=!1;wa=null;Ua=0;cb=!1;gb=za=0;Ia=1;Db=0;Cb=5126;$a=Lb=Ic=Ra=0;u(ta)?(rb=!0,wa=L.createStream(34962,ta),Cb=wa.dtype):(wa=L.getBuffer(ta))?Cb=wa.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(Ic=ta.constant,Lb=$a=Ra=0):(Ic=0<ta.constant.length?ta.constant[0]:0,Lb=1<ta.constant.length?ta.constant[1]:0,$a=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?ta.constant[3]:0)):(wa=u(ta.buffer)?
L.createStream(34962,ta.buffer):L.getBuffer(ta.buffer),Cb="type"in ta?qa[ta.type]:wa.dtype,cb=!!ta.normalized,gb=ta.size|0,za=ta.offset|0,Db=ta.stride|0,Ua=ta.divisor|0);Vb=pa.location;xa=Z[Vb];if(1===Ia){xa.buffer||R.enableVertexAttribArray(Vb);Ad=gb||1;if(xa.type!==Cb||xa.size!==Ad||xa.buffer!==wa||xa.normalized!==cb||xa.offset!==za||xa.stride!==Db)R.bindBuffer(34962,wa.buffer),R.vertexAttribPointer(Vb,Ad,Cb,cb,Db,za),xa.type=Cb,xa.size=Ad,xa.buffer=wa,xa.normalized=cb,xa.offset=za,xa.stride=Db;
xa.divisor!==Ua&&(P.vertexAttribDivisorANGLE(Vb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(R.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Ic||xa.y!==Lb||xa.z!==$a||xa.w!==Ra)R.vertexAttrib4f(Vb,Ic,Lb,$a,Ra),xa.x=Ic,xa.y=Lb,xa.z=$a,xa.w=Ra;Ja=this.position;Pb=!1;hb=null;kb=0;ya=!1;Da=dc=0;sb=1;tb=0;Xa=5126;uc=ad=kc=Ya=0;u(Ja)?(Pb=!0,hb=L.createStream(34962,Ja),Xa=hb.dtype):(hb=L.getBuffer(Ja))?Xa=hb.dtype:"constant"in Ja?(sb=2,"number"===typeof Ja.constant?(kc=Ja.constant,ad=uc=Ya=0):(kc=0<Ja.constant.length?
Ja.constant[0]:0,ad=1<Ja.constant.length?Ja.constant[1]:0,uc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(hb=u(Ja.buffer)?L.createStream(34962,Ja.buffer):L.getBuffer(Ja.buffer),Xa="type"in Ja?qa[Ja.type]:hb.dtype,ya=!!Ja.normalized,Da=Ja.size|0,dc=Ja.offset|0,tb=Ja.stride|0,kb=Ja.divisor|0);Va=ma.location;Nb=Z[Va];if(1===sb){Nb.buffer||R.enableVertexAttribArray(Va);Oc=Da||2;if(Nb.type!==Xa||Nb.size!==Oc||Nb.buffer!==hb||Nb.normalized!==ya||Nb.offset!==dc||Nb.stride!==
tb)R.bindBuffer(34962,hb.buffer),R.vertexAttribPointer(Va,Oc,Xa,ya,tb,dc),Nb.type=Xa,Nb.size=Oc,Nb.buffer=hb,Nb.normalized=ya,Nb.offset=dc,Nb.stride=tb;Nb.divisor!==kb&&(P.vertexAttribDivisorANGLE(Va,kb),Nb.divisor=kb)}else if(Nb.buffer&&(R.disableVertexAttribArray(Va),Nb.buffer=null),Nb.x!==kc||Nb.y!==ad||Nb.z!==uc||Nb.w!==Ya)R.vertexAttrib4f(Va,kc,ad,uc,Ya),Nb.x=kc,Nb.y=ad,Nb.z=uc,Nb.w=Ya;Fa=this.viewportArray;R.uniform4f(la.location,Fa[0],Fa[1],Fa[2],Fa[3]);wc=this.scale;R.uniform2f(db.location,
wc[0],wc[1]);Pa=this.translate;R.uniform2f(Za.location,Pa[0],Pa[1]);(Aa=ra.elements)?R.bindBuffer(34963,Aa.buffer.buffer):Na.currentVAO&&(Aa=J.getElements(Na.currentVAO.elements))&&R.bindBuffer(34963,Aa.buffer.buffer);nb=ra.instances;for(D=0;D<c;++D){H=b[D];var yb,Eb,ub,vc,zb,Ed,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Pf,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc,kd;yb=A.call(this,O,H,D);D&&Eb===yb||(Eb=yb,R.uniform1f(da.location,yb));ub=N.call(this,O,H,D);D&&vc===ub||(vc=ub,R.uniform1f(n.location,
ub));zb=H.align;D&&Ed===zb||(Ed=zb,R.uniform1f(e.location,zb));sc=H.baseline;D&&ud===sc||(ud=sc,R.uniform1f(m.location,sc));Kc=H.color;bd=Kc[0];Xb=Kc[1];Qb=Kc[2];Zb=Kc[3];D&&qd===bd&&cc===Xb&&Ga===Qb&&ob===Zb||(qd=bd,cc=Xb,Ga=Qb,ob=Zb,R.uniform4f(a.location,bd,Xb,Qb,Zb));Ab=Y.call(this,O,H,D);Ob=Ab[0];ec=Ab[1];D&&Rb===Ob&&gc===ec||(Rb=Ob,gc=ec,R.uniform2f(aa.location,Ob,ec));Pf=h.call(this,O,H,D);zc=Pf[0];Bc=Pf[1];D&&Ac===zc&&Lc===Bc||(Ac=zc,Lc=Bc,R.uniform2f(T.location,zc,Bc));Xc=H.positionOffset;
Qc=Xc[0];Mb=Xc[1];D&&Mc===Qc&&Hb===Mb||(Mc=Qc,Hb=Mb,R.uniform2f(Ka.location,Qc,Mb));Nc=H.opacity;D&&Fc===Nc||(Fc=Nc,R.uniform1f(W.location,Nc));(Rc=f.call(this,O,H,D))&&"framebuffer"===Rc._reglType&&(Rc=Rc.color[0]);fc=Rc._texture;R.uniform1i(l.location,fc.bind());Uc=H.offset;if(kd=H.count)0<nb?Aa?P.drawElementsInstancedANGLE(0,kd,Aa.type,Uc<<(Aa.type-5121>>1),nb):P.drawArraysInstancedANGLE(0,Uc,kd,nb):0>nb&&(Aa?R.drawElements(0,kd,Aa.type,Uc<<(Aa.type-5121>>1)):R.drawArrays(0,Uc,kd)),fc.unbind()}Dc&&
L.destroyStream(Pc);rd&&L.destroyStream(Ub);rb&&L.destroyStream(wa);Pb&&L.destroyStream(hb);U.dirty=!0;Na.setVAO(null);O.viewportWidth=w;O.viewportHeight=z;C&&(y.cpuTime+=performance.now()-E)},draw:function(c){var f,h,r,k,w,A,q,C,D,E,H,B,N,M,S,Q,fa,ba,na,Y,ea,Ea,vb,sd,af,Cd,Be,Vd,Wd,me,Yd,pd,hd,wd,Yc,id,nc,Gd,ed,Jc,qc,bb,Gc,Fb,oc,Ta,Hc,bc,rc,Jd,Dd,yc,Yb,Dc,Pc,La,Gb,Wa,Ca,jd,ib,Sa,Ib,eb,Ec,Sb,ae,$b,Tb,rd,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb;f=ab.next;f!==ab.cur&&(f?R.bindFramebuffer(36160,
f.framebuffer):R.bindFramebuffer(36160,null),ab.cur=f);if(U.dirty){var Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,Ad,Ja,Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,Ed,sc;Ia=ka.dither;Ia!==U.dither&&(Ia?R.enable(3024):R.disable(3024),U.dither=Ia);Db=V[0];Cb=V[1];if(Db!==pb[0]||Cb!==pb[1])R.blendEquationSeparate(Db,Cb),pb[0]=Db,pb[1]=Cb;Ra=ka.depth_func;Ra!==U.depth_func&&(R.depthFunc(Ra),U.depth_func=Ra);Ic=ic[0];Lb=ic[1];if(Ic!==td[0]||Lb!==td[1])R.depthRange(Ic,Lb),td[0]=Ic,td[1]=
Lb;$a=ka.depth_mask;$a!==U.depth_mask&&(R.depthMask($a),U.depth_mask=$a);Vb=ac[0];xa=ac[1];Ad=ac[2];Ja=ac[3];if(Vb!==pc[0]||xa!==pc[1]||Ad!==pc[2]||Ja!==pc[3])R.colorMask(Vb,xa,Ad,Ja),pc[0]=Vb,pc[1]=xa,pc[2]=Ad,pc[3]=Ja;Pb=ka.cull_enable;Pb!==U.cull_enable&&(Pb?R.enable(2884):R.disable(2884),U.cull_enable=Pb);hb=ka.cull_face;hb!==U.cull_face&&(R.cullFace(hb),U.cull_face=hb);kb=ka.frontFace;kb!==U.frontFace&&(R.frontFace(kb),U.frontFace=kb);ya=ka.lineWidth;ya!==U.lineWidth&&(R.lineWidth(ya),U.lineWidth=
ya);dc=ka.polygonOffset_enable;dc!==U.polygonOffset_enable&&(dc?R.enable(32823):R.disable(32823),U.polygonOffset_enable=dc);Da=tc[0];sb=tc[1];if(Da!==X[0]||sb!==X[1])R.polygonOffset(Da,sb),X[0]=Da,X[1]=sb;tb=ka.sample_alpha;tb!==U.sample_alpha&&(tb?R.enable(32926):R.disable(32926),U.sample_alpha=tb);Xa=ka.sample_enable;Xa!==U.sample_enable&&(Xa?R.enable(32928):R.disable(32928),U.sample_enable=Xa);Ya=F[0];kc=F[1];if(Ya!==ja[0]||kc!==ja[1])R.sampleCoverage(Ya,kc),ja[0]=Ya,ja[1]=kc;ad=ka.stencil_mask;
ad!==U.stencil_mask&&(R.stencilMask(ad),U.stencil_mask=ad);uc=Wc[0];Va=Wc[1];Nb=Wc[2];if(uc!==Tc[0]||Va!==Tc[1]||Nb!==Tc[2])R.stencilFunc(uc,Va,Nb),Tc[0]=uc,Tc[1]=Va,Tc[2]=Nb;Oc=ha[0];Fa=ha[1];wc=ha[2];Pa=ha[3];if(Oc!==ua[0]||Fa!==ua[1]||wc!==ua[2]||Pa!==ua[3])R.stencilOpSeparate(Oc,Fa,wc,Pa),ua[0]=Oc,ua[1]=Fa,ua[2]=wc,ua[3]=Pa;Aa=G[0];nb=G[1];yb=G[2];Eb=G[3];if(Aa!==v[0]||nb!==v[1]||yb!==v[2]||Eb!==v[3])R.stencilOpSeparate(Aa,nb,yb,Eb),v[0]=Aa,v[1]=nb,v[2]=yb,v[3]=Eb;ub=ka.scissor_enable;ub!==U.scissor_enable&&
(ub?R.enable(3089):R.disable(3089),U.scissor_enable=ub);vc=Ba[0];zb=Ba[1];Ed=Ba[2];sc=Ba[3];if(vc!==wb[0]||zb!==wb[1]||Ed!==wb[2]||sc!==wb[3])R.scissor(vc,zb,Ed,sc),wb[0]=vc,wb[1]=zb,wb[2]=Ed,wb[3]=sc}h=this.viewport;r=h.x|0;k=h.y|0;w="width"in h?h.width|0:O.framebufferWidth-r;A="height"in h?h.height|0:O.framebufferHeight-k;q=O.viewportWidth;O.viewportWidth=w;C=O.viewportHeight;O.viewportHeight=A;R.viewport(r,k,w,A);ga[0]=r;ga[1]=k;ga[2]=w;ga[3]=A;R.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=
1;R.enable(3042);U.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;R.disable(2929);U.depth_enable=!1;R.disable(2960);U.stencil_enable=!1;if(D=U.profile)E=performance.now(),y.count++;R.useProgram(p.program);H=Wb.angle_instanced_arrays;Na.setVAO(null);t.buffer=this.sizeBuffer;B=!1;N=null;M=0;S=!1;fa=Q=0;ba=1;na=0;Y=5126;sd=vb=Ea=ea=0;u(t)?(B=!0,N=L.createStream(34962,t),Y=N.dtype):(N=L.getBuffer(t))?Y=N.dtype:"constant"in t?(ba=2,"number"===typeof t.constant?
(Ea=t.constant,vb=sd=ea=0):(Ea=0<t.constant.length?t.constant[0]:0,vb=1<t.constant.length?t.constant[1]:0,sd=2<t.constant.length?t.constant[2]:0,ea=3<t.constant.length?t.constant[3]:0)):(N=u(t.buffer)?L.createStream(34962,t.buffer):L.getBuffer(t.buffer),Y="type"in t?qa[t.type]:N.dtype,S=!!t.normalized,fa=t.size|0,Q=t.offset|0,na=t.stride|0,M=t.divisor|0);af=Qa.location;Cd=Z[af];if(1===ba){Cd.buffer||R.enableVertexAttribArray(af);Be=fa||1;if(Cd.type!==Y||Cd.size!==Be||Cd.buffer!==N||Cd.normalized!==
S||Cd.offset!==Q||Cd.stride!==na)R.bindBuffer(34962,N.buffer),R.vertexAttribPointer(af,Be,Y,S,na,Q),Cd.type=Y,Cd.size=Be,Cd.buffer=N,Cd.normalized=S,Cd.offset=Q,Cd.stride=na;Cd.divisor!==M&&(H.vertexAttribDivisorANGLE(af,M),Cd.divisor=M)}else if(Cd.buffer&&(R.disableVertexAttribArray(af),Cd.buffer=null),Cd.x!==Ea||Cd.y!==vb||Cd.z!==sd||Cd.w!==ea)R.vertexAttrib4f(af,Ea,vb,sd,ea),Cd.x=Ea,Cd.y=vb,Cd.z=sd,Cd.w=ea;I.buffer=this.sizeBuffer;Vd=!1;Wd=null;me=0;Yd=!1;hd=pd=0;wd=1;Yc=0;id=5126;Jc=ed=Gd=nc=
0;u(I)?(Vd=!0,Wd=L.createStream(34962,I),id=Wd.dtype):(Wd=L.getBuffer(I))?id=Wd.dtype:"constant"in I?(wd=2,"number"===typeof I.constant?(Gd=I.constant,ed=Jc=nc=0):(Gd=0<I.constant.length?I.constant[0]:0,ed=1<I.constant.length?I.constant[1]:0,Jc=2<I.constant.length?I.constant[2]:0,nc=3<I.constant.length?I.constant[3]:0)):(Wd=u(I.buffer)?L.createStream(34962,I.buffer):L.getBuffer(I.buffer),id="type"in I?qa[I.type]:Wd.dtype,Yd=!!I.normalized,hd=I.size|0,pd=I.offset|0,Yc=I.stride|0,me=I.divisor|0);qc=
K.location;bb=Z[qc];if(1===wd){bb.buffer||R.enableVertexAttribArray(qc);Gc=hd||1;if(bb.type!==id||bb.size!==Gc||bb.buffer!==Wd||bb.normalized!==Yd||bb.offset!==pd||bb.stride!==Yc)R.bindBuffer(34962,Wd.buffer),R.vertexAttribPointer(qc,Gc,id,Yd,Yc,pd),bb.type=id,bb.size=Gc,bb.buffer=Wd,bb.normalized=Yd,bb.offset=pd,bb.stride=Yc;bb.divisor!==me&&(H.vertexAttribDivisorANGLE(qc,me),bb.divisor=me)}else if(bb.buffer&&(R.disableVertexAttribArray(qc),bb.buffer=null),bb.x!==Gd||bb.y!==ed||bb.z!==Jc||bb.w!==
nc)R.vertexAttrib4f(qc,Gd,ed,Jc,nc),bb.x=Gd,bb.y=ed,bb.z=Jc,bb.w=nc;Fb=this.charBuffer;oc=!1;Ta=null;Hc=0;bc=!1;Jd=rc=0;Dd=1;yc=0;Yb=5126;Gb=La=Pc=Dc=0;u(Fb)?(oc=!0,Ta=L.createStream(34962,Fb),Yb=Ta.dtype):(Ta=L.getBuffer(Fb))?Yb=Ta.dtype:"constant"in Fb?(Dd=2,"number"===typeof Fb.constant?(Pc=Fb.constant,La=Gb=Dc=0):(Pc=0<Fb.constant.length?Fb.constant[0]:0,La=1<Fb.constant.length?Fb.constant[1]:0,Gb=2<Fb.constant.length?Fb.constant[2]:0,Dc=3<Fb.constant.length?Fb.constant[3]:0)):(Ta=u(Fb.buffer)?
L.createStream(34962,Fb.buffer):L.getBuffer(Fb.buffer),Yb="type"in Fb?qa[Fb.type]:Ta.dtype,bc=!!Fb.normalized,Jd=Fb.size|0,rc=Fb.offset|0,yc=Fb.stride|0,Hc=Fb.divisor|0);Wa=pa.location;Ca=Z[Wa];if(1===Dd){Ca.buffer||R.enableVertexAttribArray(Wa);jd=Jd||1;if(Ca.type!==Yb||Ca.size!==jd||Ca.buffer!==Ta||Ca.normalized!==bc||Ca.offset!==rc||Ca.stride!==yc)R.bindBuffer(34962,Ta.buffer),R.vertexAttribPointer(Wa,jd,Yb,bc,yc,rc),Ca.type=Yb,Ca.size=jd,Ca.buffer=Ta,Ca.normalized=bc,Ca.offset=rc,Ca.stride=yc;
Ca.divisor!==Hc&&(H.vertexAttribDivisorANGLE(Wa,Hc),Ca.divisor=Hc)}else if(Ca.buffer&&(R.disableVertexAttribArray(Wa),Ca.buffer=null),Ca.x!==Pc||Ca.y!==La||Ca.z!==Gb||Ca.w!==Dc)R.vertexAttrib4f(Wa,Pc,La,Gb,Dc),Ca.x=Pc,Ca.y=La,Ca.z=Gb,Ca.w=Dc;ib=this.position;Sa=!1;Ib=null;eb=0;Ec=!1;ae=Sb=0;$b=1;Tb=0;rd=5126;xb=qb=Ma=Ub=0;u(ib)?(Sa=!0,Ib=L.createStream(34962,ib),rd=Ib.dtype):(Ib=L.getBuffer(ib))?rd=Ib.dtype:"constant"in ib?($b=2,"number"===typeof ib.constant?(Ma=ib.constant,qb=xb=Ub=0):(Ma=0<ib.constant.length?
ib.constant[0]:0,qb=1<ib.constant.length?ib.constant[1]:0,xb=2<ib.constant.length?ib.constant[2]:0,Ub=3<ib.constant.length?ib.constant[3]:0)):(Ib=u(ib.buffer)?L.createStream(34962,ib.buffer):L.getBuffer(ib.buffer),rd="type"in ib?qa[ib.type]:Ib.dtype,Ec=!!ib.normalized,ae=ib.size|0,Sb=ib.offset|0,Tb=ib.stride|0,eb=ib.divisor|0);jb=ma.location;Oa=Z[jb];if(1===$b){Oa.buffer||R.enableVertexAttribArray(jb);lc=ae||2;if(Oa.type!==rd||Oa.size!==lc||Oa.buffer!==Ib||Oa.normalized!==Ec||Oa.offset!==Sb||Oa.stride!==
Tb)R.bindBuffer(34962,Ib.buffer),R.vertexAttribPointer(jb,lc,rd,Ec,Tb,Sb),Oa.type=rd,Oa.size=lc,Oa.buffer=Ib,Oa.normalized=Ec,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==eb&&(H.vertexAttribDivisorANGLE(jb,eb),Oa.divisor=eb)}else if(Oa.buffer&&(R.disableVertexAttribArray(jb),Oa.buffer=null),Oa.x!==Ma||Oa.y!==qb||Oa.z!==xb||Oa.w!==Ub)R.vertexAttrib4f(jb,Ma,qb,xb,Ub),Oa.x=Ma,Oa.y=qb,Oa.z=xb,Oa.w=Ub;Kb=P.call(this,O,c,0);R.uniform1f(da.location,Kb);Zc=g.call(this,O,c,0);R.uniform1f(n.location,Zc);R.uniform1f(e.location,
c.align);R.uniform1f(m.location,c.baseline);fb=this.viewportArray;R.uniform4f(la.location,fb[0],fb[1],fb[2],fb[3]);jc=c.color;R.uniform4f(a.location,jc[0],jc[1],jc[2],jc[3]);dd=d.call(this,O,c,0);R.uniform2f(aa.location,dd[0],dd[1]);hc=z.call(this,O,c,0);R.uniform2f(T.location,hc[0],hc[1]);lb=this.scale;R.uniform2f(db.location,lb[0],lb[1]);mb=this.translate;R.uniform2f(Za.location,mb[0],mb[1]);ta=c.positionOffset;R.uniform2f(Ka.location,ta[0],ta[1]);R.uniform1f(W.location,c.opacity);(rb=b.call(this,
O,c,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);wa=rb._texture;R.uniform1i(l.location,wa.bind());(Ua=ra.elements)?R.bindBuffer(34963,Ua.buffer.buffer):Na.currentVAO&&(Ua=J.getElements(Na.currentVAO.elements))&&R.bindBuffer(34963,Ua.buffer.buffer);cb=c.offset;if(za=c.count)gb=ra.instances,0<gb?Ua?H.drawElementsInstancedANGLE(0,za,Ua.type,cb<<(Ua.type-5121>>1),gb):H.drawArraysInstancedANGLE(0,cb,za,gb):0>gb&&(Ua?R.drawElements(0,za,Ua.type,cb<<(Ua.type-5121>>1)):R.drawArrays(0,cb,za)),U.dirty=
!0,Na.setVAO(null),O.viewportWidth=q,O.viewportHeight=C,D&&(y.cpuTime+=performance.now()-E),B&&L.destroyStream(N),Vd&&L.destroyStream(Wd),oc&&L.destroyStream(Ta),Sa&&L.destroyStream(Ib),wa.unbind()},scope:function(a,b,c){var d,e,f,g,h,l,m,n,p,v,z,A,F,P,G,J,N,K,Q,R,X,T,V,ga,W,Z,aa,Y,da,ha,ja,ua,la,ma,pa,va,Ba,Ha,Ka,Na,Qa,tc,ab,Ta,db,Za,wb,pb,td,Wb,Yb,ac,pc,La,Gb,Wa,Ca,ic,ib,Sa,Ib,eb,Ec,Sb,Wc,$b,Tb,Tc,Ub,Ma,qb,xb,jb,Oa,lc,Kb,Zc,fb,jc,dd,hc,lb,mb,ta,rb,wa,Ua,cb,za,gb,Ia,Db,Cb,Ra,Ic,Lb,$a,Vb,xa,sd,Ja,
Pb,hb,kb,ya,dc,Da,sb,tb,Xa,Ya,kc,ad,uc,Va,Nb,Oc,Fa,wc,Pa,Aa,nb,yb,Eb,ub,vc,zb,xd,sc,ud,Kc,bd,qd,Xb,cc,Qb,Ga,Zb,ob,Ab,Ob,Rb,ec,gc,Pf,zc,Ac,Bc,Lc,Xc,Qc,Mc,Mb,Hb,Nc,Fc,Rc,fc,Uc;d=this.viewport;e=d.x|0;f=d.y|0;g="width"in d?d.width|0:O.framebufferWidth-e;h="height"in d?d.height|0:O.framebufferHeight-f;l=O.viewportWidth;O.viewportWidth=g;m=O.viewportHeight;O.viewportHeight=h;n=S[0];S[0]=e;p=S[1];S[1]=f;v=S[2];S[2]=g;z=S[3];S[3]=h;A=vb[0];vb[0]=0;F=vb[1];vb[1]=0;P=vb[2];vb[2]=0;G=vb[3];vb[3]=1;J=ka.blend_enable;
ka.blend_enable=!0;N=ea[0];ea[0]=770;K=ea[1];ea[1]=771;Q=ea[2];ea[2]=773;R=ea[3];ea[3]=1;X=ka.depth_enable;ka.depth_enable=!1;T=ka.stencil_enable;ka.stencil_enable=!1;if(V=U.profile)ga=performance.now(),y.count++;W=a.offset;Z=ra.offset;ra.offset=W;aa=a.count;Y=ra.count;ra.count=aa;da=ra.primitive;ra.primitive=0;ha=a.align;ja=Ea[64];Ea[64]=ha;ua=w.call(this,O,a,c);la=Ea[69];Ea[69]=ua;ma=B.call(this,O,a,c);pa=Ea[67];Ea[67]=ma;va=fa.call(this,O,a,c);Ba=Ea[66];Ea[66]=va;Ha=a.baseline;Ka=Ea[65];Ea[65]=
Ha;Na=M.call(this,O,a,c);Qa=Ea[62];Ea[62]=Na;tc=a.color;ab=Ea[14];Ea[14]=tc;Ta=H.call(this,O,a,c);db=Ea[63];Ea[63]=Ta;Za=a.opacity;wb=Ea[10];Ea[10]=Za;pb=a.positionOffset;td=Ea[68];Ea[68]=pb;Wb=this.scale;Yb=Ea[6];Ea[6]=Wb;ac=this.translate;pc=Ea[8];Ea[8]=ac;La=this.viewportArray;Gb=Ea[3];Ea[3]=La;Wa=this.charBuffer;Ca=!1;ic=null;ib=0;Sa=!1;eb=Ib=0;Ec=1;Sb=0;Wc=5126;Ub=Tc=Tb=$b=0;u(Wa)?(Ca=!0,ic=L.createStream(34962,Wa),Wc=ic.dtype):(ic=L.getBuffer(Wa))?Wc=ic.dtype:"constant"in Wa?(Ec=2,"number"===
typeof Wa.constant?(Tb=Wa.constant,Tc=Ub=$b=0):(Tb=0<Wa.constant.length?Wa.constant[0]:0,Tc=1<Wa.constant.length?Wa.constant[1]:0,Ub=2<Wa.constant.length?Wa.constant[2]:0,$b=3<Wa.constant.length?Wa.constant[3]:0)):(ic=u(Wa.buffer)?L.createStream(34962,Wa.buffer):L.getBuffer(Wa.buffer),Wc="type"in Wa?qa[Wa.type]:ic.dtype,Sa=!!Wa.normalized,eb=Wa.size|0,Ib=Wa.offset|0,Sb=Wa.stride|0,ib=Wa.divisor|0);Ma=r.buffer;r.buffer=ic;qb=r.divisor;r.divisor=ib;xb=r.normalized;r.normalized=Sa;jb=r.offset;r.offset=
Ib;Oa=r.size;r.size=eb;lc=r.state;r.state=Ec;Kb=r.stride;r.stride=Sb;Zc=r.type;r.type=Wc;fb=r.w;r.w=$b;jc=r.x;r.x=Tb;dd=r.y;r.y=Tc;hc=r.z;r.z=Ub;I.buffer=this.sizeBuffer;lb=!1;mb=null;ta=0;rb=!1;Ua=wa=0;cb=1;za=0;gb=5126;Ra=Cb=Db=Ia=0;u(I)?(lb=!0,mb=L.createStream(34962,I),gb=mb.dtype):(mb=L.getBuffer(I))?gb=mb.dtype:"constant"in I?(cb=2,"number"===typeof I.constant?(Db=I.constant,Cb=Ra=Ia=0):(Db=0<I.constant.length?I.constant[0]:0,Cb=1<I.constant.length?I.constant[1]:0,Ra=2<I.constant.length?I.constant[2]:
0,Ia=3<I.constant.length?I.constant[3]:0)):(mb=u(I.buffer)?L.createStream(34962,I.buffer):L.getBuffer(I.buffer),gb="type"in I?qa[I.type]:mb.dtype,rb=!!I.normalized,Ua=I.size|0,wa=I.offset|0,za=I.stride|0,ta=I.divisor|0);Ic=D.buffer;D.buffer=mb;Lb=D.divisor;D.divisor=ta;$a=D.normalized;D.normalized=rb;Vb=D.offset;D.offset=wa;xa=D.size;D.size=Ua;sd=D.state;D.state=cb;Ja=D.stride;D.stride=za;Pb=D.type;D.type=gb;hb=D.w;D.w=Ia;kb=D.x;D.x=Db;ya=D.y;D.y=Cb;dc=D.z;D.z=Ra;Da=this.position;sb=!1;tb=null;Xa=
0;Ya=!1;ad=kc=0;uc=1;Va=0;Nb=5126;Pa=wc=Fa=Oc=0;u(Da)?(sb=!0,tb=L.createStream(34962,Da),Nb=tb.dtype):(tb=L.getBuffer(Da))?Nb=tb.dtype:"constant"in Da?(uc=2,"number"===typeof Da.constant?(Fa=Da.constant,wc=Pa=Oc=0):(Fa=0<Da.constant.length?Da.constant[0]:0,wc=1<Da.constant.length?Da.constant[1]:0,Pa=2<Da.constant.length?Da.constant[2]:0,Oc=3<Da.constant.length?Da.constant[3]:0)):(tb=u(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),Nb="type"in Da?qa[Da.type]:tb.dtype,Ya=!!Da.normalized,
ad=Da.size|0,kc=Da.offset|0,Va=Da.stride|0,Xa=Da.divisor|0);Aa=C.buffer;C.buffer=tb;nb=C.divisor;C.divisor=Xa;yb=C.normalized;C.normalized=Ya;Eb=C.offset;C.offset=kc;ub=C.size;C.size=ad;vc=C.state;C.state=uc;zb=C.stride;C.stride=Va;xd=C.type;C.type=Nb;sc=C.w;C.w=Oc;ud=C.x;C.x=Fa;Kc=C.y;C.y=wc;bd=C.z;C.z=Pa;t.buffer=this.sizeBuffer;qd=!1;Xb=null;cc=0;Qb=!1;Zb=Ga=0;ob=1;Ab=0;Ob=5126;Pf=gc=ec=Rb=0;u(t)?(qd=!0,Xb=L.createStream(34962,t),Ob=Xb.dtype):(Xb=L.getBuffer(t))?Ob=Xb.dtype:"constant"in t?(ob=
2,"number"===typeof t.constant?(ec=t.constant,gc=Pf=Rb=0):(ec=0<t.constant.length?t.constant[0]:0,gc=1<t.constant.length?t.constant[1]:0,Pf=2<t.constant.length?t.constant[2]:0,Rb=3<t.constant.length?t.constant[3]:0)):(Xb=u(t.buffer)?L.createStream(34962,t.buffer):L.getBuffer(t.buffer),Ob="type"in t?qa[t.type]:Xb.dtype,Qb=!!t.normalized,Zb=t.size|0,Ga=t.offset|0,Ab=t.stride|0,cc=t.divisor|0);zc=E.buffer;E.buffer=Xb;Ac=E.divisor;E.divisor=cc;Bc=E.normalized;E.normalized=Qb;Lc=E.offset;E.offset=Ga;Xc=
E.size;E.size=Zb;Qc=E.state;E.state=ob;Mc=E.stride;E.stride=Ab;Mb=E.type;E.type=Ob;Hb=E.w;E.w=Rb;Nc=E.x;E.x=ec;Fc=E.y;E.y=gc;Rc=E.z;E.z=Pf;fc=ba.vert;ba.vert=61;Uc=ba.frag;ba.frag=60;U.dirty=!0;b(O,a,c);O.viewportWidth=l;O.viewportHeight=m;S[0]=n;S[1]=p;S[2]=v;S[3]=z;vb[0]=A;vb[1]=F;vb[2]=P;vb[3]=G;ka.blend_enable=J;ea[0]=N;ea[1]=K;ea[2]=Q;ea[3]=R;ka.depth_enable=X;ka.stencil_enable=T;V&&(y.cpuTime+=performance.now()-ga);ra.offset=Z;ra.count=Y;ra.primitive=da;Ea[64]=ja;Ea[69]=la;Ea[67]=pa;Ea[66]=
Ba;Ea[65]=Ka;Ea[62]=Qa;Ea[14]=ab;Ea[63]=db;Ea[10]=wb;Ea[68]=td;Ea[6]=Yb;Ea[8]=pc;Ea[3]=Gb;Ca&&L.destroyStream(ic);r.buffer=Ma;r.divisor=qb;r.normalized=xb;r.offset=jb;r.size=Oa;r.state=lc;r.stride=Kb;r.type=Zc;r.w=fb;r.x=jc;r.y=dd;r.z=hc;lb&&L.destroyStream(mb);D.buffer=Ic;D.divisor=Lb;D.normalized=$a;D.offset=Vb;D.size=xa;D.state=sd;D.stride=Ja;D.type=Pb;D.w=hb;D.x=kb;D.y=ya;D.z=dc;sb&&L.destroyStream(tb);C.buffer=Aa;C.divisor=nb;C.normalized=yb;C.offset=Eb;C.size=ub;C.state=vc;C.stride=zb;C.type=
xd;C.w=sc;C.x=ud;C.y=Kc;C.z=bd;qd&&L.destroyStream(Xb);E.buffer=zc;E.divisor=Ac;E.normalized=Bc;E.offset=Lc;E.size=Xc;E.state=Qc;E.stride=Mc;E.type=Mb;E.w=Hb;E.x=Nc;E.y=Fc;E.z=Rc;ba.vert=fc;ba.frag=Uc;U.dirty=!0}}}}},{}],25:[function(B,Y,Za){var c=B("./sorted-object-keys");Y.exports=function(y,p){for(var P=c(p),g=0;g<P.length;++g)y[P[g]]=p[P[g]];return y}},{"./sorted-object-keys":34}],26:[function(B,Y,Za){function c(c,g,d,p,b,w){for(var y=0;y<g;++y)for(var B=c[y],M=0;M<d;++M)for(var H=B[M],r=0;r<
p;++r)b[w++]=H[r]}function y(p,g,d,z,b){for(var w=1,B=d+1;B<g.length;++B)w*=g[B];var fa=g[d];if(4===g.length-d){var M=g[d+1],H=g[d+2];g=g[d+3];for(B=0;B<fa;++B)c(p[B],M,H,g,z,b),b+=w}else for(B=0;B<fa;++B)y(p[B],g,d+1,z,b),b+=w}var p=B("./pool");Y.exports={shape:function(c){for(var g=[];c.length;c=c[0])g.push(c.length);return g},flatten:function(P,g,d,z){var b=1;if(g.length)for(var w=0;w<g.length;++w)b*=g[w];else b=0;d=z||p.allocType(d,b);switch(g.length){case 0:break;case 1:z=g[0];for(g=0;g<z;++g)d[g]=
P[g];break;case 2:z=g[0];g=g[1];for(w=b=0;w<z;++w)for(var B=P[w],fa=0;fa<g;++fa)d[b++]=B[fa];break;case 3:c(P,g[0],g[1],g[2],d,0);break;default:y(P,g,0,d,0)}return d}}},{"./pool":32}],27:[function(B,Y,Za){var c=B("./is-typed-array");Y.exports=function(y){return Array.isArray(y)||c(y)}},{"./is-typed-array":30}],28:[function(B,Y,Za){var c=B("./is-typed-array");Y.exports=function(y){return!!y&&"object"===typeof y&&Array.isArray(y.shape)&&Array.isArray(y.stride)&&"number"===typeof y.offset&&y.shape.length===
y.stride.length&&(Array.isArray(y.data)||c(y.data))}},{"./is-typed-array":30}],29:[function(B,Y,Za){Y.exports=function(c){return!(c&c-1)&&!!c}},{}],30:[function(B,Y,Za){Y.exports=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray}},{}],31:[function(B,Y,Za){Y.exports=function(c,y){for(var p=Array(c),
B=0;B<c;++B)p[B]=y(B);return p}},{}],32:[function(B,Y,Za){function c(c){var g,d;g=(65535<c)<<4;c>>>=g;d=(255<c)<<3;c>>>=d;g|=d;d=(15<c)<<2;c>>>=d;g|=d;d=(3<c)<<1;return g|d|c>>>d>>1}function y(){function y(g){a:{for(var b=16;268435456>=b;b*=16)if(g<=b){g=b;break a}g=0}b=d[c(g)>>2];return 0<b.length?b.pop():new ArrayBuffer(g)}function g(g){d[c(g.byteLength)>>2].push(g)}var d=p(8,function(){return[]});return{alloc:y,free:g,allocType:function(c,b){var d=null;switch(c){case 5120:d=new Int8Array(y(b),
0,b);break;case 5121:d=new Uint8Array(y(b),0,b);break;case 5122:d=new Int16Array(y(2*b),0,b);break;case 5123:d=new Uint16Array(y(2*b),0,b);break;case 5124:d=new Int32Array(y(4*b),0,b);break;case 5125:d=new Uint32Array(y(4*b),0,b);break;case 5126:d=new Float32Array(y(4*b),0,b);break;default:return null}return d.length!==b?d.subarray(0,b):d},freeType:function(c){g(c.buffer)}}}var p=B("./loop");B=y();B.zero=y();Y.exports=B},{"./loop":31}],33:[function(B,Y,Za){Y.exports={next:"function"===typeof requestAnimationFrame?
function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:"function"===typeof cancelAnimationFrame?function(c){return cancelAnimationFrame(c)}:clearTimeout}},{}],34:[function(B,Y,Za){Y.exports=function(c){return Object.keys(c).sort()}},{}],35:[function(B,Y,Za){var c=B("./pool"),y=new Float32Array(1),p=new Uint32Array(y.buffer);Y.exports=function(B){for(var g=c.allocType(5123,B.length),d=0;d<B.length;++d)if(isNaN(B[d]))g[d]=65535;else if(Infinity===B[d])g[d]=31744;else if(-Infinity===
B[d])g[d]=64512;else{y[0]=B[d];var z=p[0],b=z>>>31<<15,w=(z<<1>>>24)-127,z=z>>13&1023;g[d]=-24>w?b:-14>w?b+(z+1024>>-14-w):15<w?b+31744:b+(w+15<<10)+z}return g}},{"./pool":32}],36:[function(B,Y,Za){var c=B("./sorted-object-keys");Y.exports=function(y){return c(y).map(function(c){return y[c]})}},{"./sorted-object-keys":34}],37:[function(B,Y,Za){function c(c,b,g){function p(){var b=window.innerWidth,d=window.innerHeight;c!==document.body&&(d=y.getBoundingClientRect(),b=d.right-d.left,d=d.bottom-d.top);
y.width=g*b;y.height=g*d}var y=document.createElement("canvas");d(y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});c.appendChild(y);c===document.body&&(y.style.position="absolute",d(c.style,{margin:0,padding:0}));var B;c!==document.body&&"function"===typeof ResizeObserver?(B=new ResizeObserver(function(){setTimeout(p)}),B.observe(c)):window.addEventListener("resize",p,!1);p();return{canvas:y,onDestroy:function(){B?B.disconnect():window.removeEventListener("resize",p);
c.removeChild(y)}}}function y(c,b){function d(g){try{return c.getContext(g,b)}catch(p){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function p(c){if("string"===typeof c)return c.split();g(Array.isArray(c),"invalid extension array");return c}function P(c){return"string"===typeof c?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(c)):c}var g=B("./util/check"),d=B("./util/extend");Y.exports=function(d){var b=d||{},w,B,Y,M;d={};
var H=[],r=[],D="undefined"===typeof window?1:window.devicePixelRatio,C=!1,E=function(b){b&&g.raise(b)},Q=function(){};"string"===typeof b?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),w=document.querySelector(b),g(w,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?w=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(M=
b,Y=M.canvas):(g.constructor(b),"gl"in b?M=b.gl:"canvas"in b?Y=P(b.canvas):"container"in b&&(B=P(b.container)),"attributes"in b&&(d=b.attributes,g.type(d,"object","invalid context attributes")),"extensions"in b&&(H=p(b.extensions)),"optionalExtensions"in b&&(r=p(b.optionalExtensions)),"onDone"in b&&(g.type(b.onDone,"function","invalid or missing onDone callback"),E=b.onDone),"profile"in b&&(C=!!b.profile),"pixelRatio"in b&&(D=+b.pixelRatio,g(0<D,"invalid pixel ratio"))):g.raise("invalid arguments to regl");
w&&("canvas"===w.nodeName.toLowerCase()?Y=w:B=w);if(!M){if(!Y){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");w=c(B||document.body,E,D);if(!w)return null;Y=w.canvas;Q=w.onDestroy}void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!0);M=y(Y,d)}return M?{gl:M,canvas:Y,container:B,extensions:H,optionalExtensions:r,pixelRatio:D,profile:C,onDone:E,onDestroy:Q}:(Q(),E("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(B,Y,Za){Y.exports=function(y,p){function B(b){var c=!1;"altKey"in b&&(c=c||b.altKey!==C.alt,C.alt=!!b.altKey);"shiftKey"in b&&(c=c||b.shiftKey!==C.shift,C.shift=!!b.shiftKey);"ctrlKey"in b&&(c=c||b.ctrlKey!==C.control,C.control=!!b.ctrlKey);"metaKey"in b&&(c=c||b.metaKey!==C.meta,C.meta=!!b.metaKey);return c}function g(b,d){var g=c.x(d),h=c.y(d);"buttons"in d&&(b=d.buttons|0);if(b!==H||g!==r||h!==D||B(d))H=b|0,r=g||0,D=h||0,p&&p(H,r,D,C)}
function d(b){g(0,b)}function z(){if(H||r||D||C.shift||C.alt||C.meta||C.control)H=r=D=0,C.shift=C.alt=C.control=C.meta=!1,p&&p(0,0,0,C)}function b(b){B(b)&&p&&p(H,r,D,C)}function w(b){0===c.buttons(b)?g(0,b):g(H,b)}function Y(b){g(H|c.buttons(b),b)}function fa(b){g(H&~c.buttons(b),b)}function M(){E||(E=!0,y.addEventListener("mousemove",w),y.addEventListener("mousedown",Y),y.addEventListener("mouseup",fa),y.addEventListener("mouseleave",d),y.addEventListener("mouseenter",d),y.addEventListener("mouseout",
d),y.addEventListener("mouseover",d),y.addEventListener("blur",z),y.addEventListener("keyup",b),y.addEventListener("keydown",b),y.addEventListener("keypress",b),y!==window&&(window.addEventListener("blur",z),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}p||(p=y,y=window);var H=0,r=0,D=0,C={shift:!1,alt:!1,control:!1,meta:!1},E=!1;M();var Q={element:y};Object.defineProperties(Q,{enabled:{get:function(){return E},set:function(c){c?M():
E&&(E=!1,y.removeEventListener("mousemove",w),y.removeEventListener("mousedown",Y),y.removeEventListener("mouseup",fa),y.removeEventListener("mouseleave",d),y.removeEventListener("mouseenter",d),y.removeEventListener("mouseout",d),y.removeEventListener("mouseover",d),y.removeEventListener("blur",z),y.removeEventListener("keyup",b),y.removeEventListener("keydown",b),y.removeEventListener("keypress",b),y!==window&&(window.removeEventListener("blur",z),window.removeEventListener("keyup",b),window.removeEventListener("keydown",
b),window.removeEventListener("keypress",b)))},enumerable:!0},buttons:{get:function(){return H},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return D},enumerable:!0},mods:{get:function(){return C},enumerable:!0}});return Q};var c=B("mouse-event")},{"mouse-event":39}],39:[function(B,Y,Za){function c(c){return c.target||c.srcElement||window}Za.buttons=function(c){if("object"===typeof c){if("buttons"in c)return c.buttons;if("which"in c){c=c.which;if(2===c)return 4;if(3===
c)return 2;if(0<c)return 1<<c-1}else if("button"in c){c=c.button;if(1===c)return 4;if(2===c)return 2;if(0<=c)return 1<<c}}return 0};Za.element=c;Za.x=function(y){if("object"===typeof y){if("offsetX"in y)return y.offsetX;var p=c(y).getBoundingClientRect();return y.clientX-p.left}return 0};Za.y=function(y){if("object"===typeof y){if("offsetY"in y)return y.offsetY;var p=c(y).getBoundingClientRect();return y.clientY-p.top}return 0}},{}],40:[function(B,Y,Za){function c(b,c){for(var d=0;d<b.length;++d)if(b[d]===
c)return d;return-1}var y=B("./lib/util/check"),p=B("./lib/util/extend"),P=B("./lib/dynamic"),g=B("./lib/util/raf"),d=B("./lib/util/clock"),z=B("./lib/strings"),b=B("./lib/webgl"),w=B("./lib/extension"),na=B("./lib/limits"),fa=B("./lib/buffer"),M=B("./lib/elements"),H=B("./lib/texture"),r=B("./lib/renderbuffer"),D=B("./lib/framebuffer"),C=B("./lib/attribute"),E=B("./lib/shader"),Q=B("./lib/read"),A=B("./lib/core"),N=B("./lib/stats"),sd=B("./lib/timer");Y.exports=function(h){function f(){if(0===pb.length)L&&
L.update(),pc=null;else{pc=g.next(f);a();for(var b=pb.length-1;0<=b;--b){var c=pb[b];c&&c(J,null,0)}ma.flush();L&&L.update()}}function e(){!pc&&0<pb.length&&(pc=g.next(f))}function l(){pc&&(g.cancel(f),pc=null)}function B(a){a.preventDefault();db=!0;l();ea.forEach(function(a){a()})}function Y(a){ma.getError();db=!1;Za.restore();ka.restore();ab.restore();ba.restore();Ea.restore();Na.restore();u.restore();L&&L.restore();vb.procs.refresh();e();va.forEach(function(a){a()})}function m(a){function b(a,
c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(P.isDynamic(f))e[b]=P.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(P.isDynamic(f[g])){e[b]=P.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}y(!!a,"invalid args to regl({...})");y.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];
delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=p({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=vb.compile(a,f,e,d,g),l=h.draw,m=h.batch,n=h.scope,r=[];return p(function(a,b){var d;
db&&y.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function pa(a,b){var c=0;
vb.procs.poll();var d=b.color;d&&(ma.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ma.clearDepth(+b.depth),c|=256);"stencil"in b&&(ma.clearStencil(b.stencil|0),c|=1024);y(!!c,"called regl.clear with no buffer specified");ma.clear(c)}function K(a){y.type(a,"function","regl.frame() callback must be a function");pb.push(a);e();return{cancel:function(){function b(){var a=c(pb,b);pb[a]=pb[pb.length-1];--pb.length;0>=pb.length&&l()}var d=c(pb,a);y(0<=d,"cannot cancel a frame twice");
pb[d]=b}}}function da(){var a=Ha.viewport,b=Ha.scissor_box;a[0]=a[1]=b[0]=b[1]=0;J.viewportWidth=J.framebufferWidth=J.drawingBufferWidth=a[2]=b[2]=ma.drawingBufferWidth;J.viewportHeight=J.framebufferHeight=J.drawingBufferHeight=a[3]=b[3]=ma.drawingBufferHeight}function a(){J.tick+=1;J.time=W();da();vb.procs.poll()}function n(){ba.refresh();da();vb.procs.refresh();L&&L.update()}function W(){return(d()-O)/1E3}console.log("REGL args are:",h);h=b(h);if(!h)return null;var ma=h.gl,Ka=ma.getContextAttributes(),
db=ma.isContextLost(),Za=w(ma,h);if(!Za)return null;var la=z(),Qa=N(),Z=Za.extensions,L=sd(ma,Z),O=d(),U=ma.drawingBufferWidth,ra=ma.drawingBufferHeight,J={tick:0,time:0,viewportWidth:U,viewportHeight:ra,framebufferWidth:U,framebufferHeight:ra,drawingBufferWidth:U,drawingBufferHeight:ra,pixelRatio:h.pixelRatio},U={elements:null,primitive:4,count:-1,offset:0,instances:-1},Wb=na(ma,Z),ab=fa(ma,Qa,h,function(a){return u.destroyBuffer(a)}),R=M(ma,Z,ab,Qa),u=C(ma,Z,Wb,Qa,ab,R,U),ka=E(ma,la,Qa,h),ba=H(ma,
Z,Wb,function(){vb.procs.poll()},J,Qa,h),Ea=r(ma,Z,Wb,Qa,h),Na=D(ma,Z,Wb,ba,Ea,Qa),vb=A(ma,la,Z,Wb,ab,R,ba,Na,{},u,ka,U,J,L,h),la=Q(ma,Na,vb.procs.poll,J,Ka,Z,Wb),Ha=vb.next,V=ma.canvas,pb=[],ea=[],va=[],ac=[h.onDestroy],pc=null;V&&(V.addEventListener("webglcontextlost",B,!1),V.addEventListener("webglcontextrestored",Y,!1));var ic=Na.setFBO=m({framebuffer:P.define.call(null,1,"framebuffer")});n();Ka=p(m,{clear:function(a){y("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in
a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ic(p({framebuffer:a.framebuffer.faces[b]},a),pa);else ic(a,pa);else pa(null,a)},prop:P.define.bind(null,1),context:P.define.bind(null,2),"this":P.define.bind(null,3),draw:m({}),buffer:function(a){return ab.create(a,34962,!1,!1)},elements:function(a){return R.create(a,!1)},texture:ba.create2D,cube:ba.createCube,renderbuffer:Ea.create,framebuffer:Na.create,framebufferCube:Na.createCube,vao:u.createVAO,attributes:Ka,frame:K,
on:function(a,b){y.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return K(b);case "lost":c=ea;break;case "restore":c=va;break;case "destroy":c=ac;break;default:y.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Wb,hasExtension:function(a){return 0<=Wb.extensions.indexOf(a.toLowerCase())},read:la,destroy:function(){pb.length=
0;l();V&&(V.removeEventListener("webglcontextlost",B),V.removeEventListener("webglcontextrestored",Y));ka.clear();Na.clear();Ea.clear();u.clear();ba.clear();R.clear();ab.clear();L&&L.clear();ac.forEach(function(a){a()})},_gl:ma,_refresh:n,poll:function(){a();L&&L.update()},now:W,stats:Qa});h.onDone(null,Ka);return Ka}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,
"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

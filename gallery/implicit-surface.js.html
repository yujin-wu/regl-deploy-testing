<!DOCTYPE html>
      <html>
        <head>
          <title>example/implicit-surface.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function A(S,Ka,e){function p(f,b){if(!Ka[f]){if(!S[f]){var r="function"==typeof require&&require;if(!b&&r)return r(f,!0);if(n)return n(f,!0);r=Error("Cannot find module '"+f+"'");throw r.code="MODULE_NOT_FOUND",r;}r=Ka[f]={exports:{}};S[f][0].call(r.exports,function(a){return p(S[f][1][a]||a)},r,r.exports,A,S,Ka,e)}return Ka[f].exports}for(var n="function"==typeof require&&require,I=0;I<e.length;I++)p(e[I]);return p}return A})()({1:[function(A,S,Ka){S=A("../regl")();var e=A("./util/camera")(S,
{center:[-12,5,1],phi:-.2}),p=S({vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main () {\n      gl_Position = vec4(position, 0, 1);\n    }",frag:"\n    precision mediump float;\n    uniform float width, height, timestep;\n    uniform vec3 eye, center;\n    vec2 resolution = vec2(width, height);\n\n    float torus(vec3 p, vec2 t)\n    {\n      vec2 q = vec2(length(p.xz)-t.x,p.y);\n      return length(q)-t.y;\n    }\n\n    float sphere(vec3 p, float s)\n    {\n      return length(p)-s;\n    }\n\n    vec2 opU(vec2 d1, vec2 d2)\n    {\n      return (d1.x < d2.x) ? d1 : d2;\n    }\n\n    vec3 opRep(vec3 p, vec3 c)\n    {\n      return vec3(mod(p.yz, c.yz)-0.5*c.yz, p.x);\n    }\n\n    float plane(vec3 p, vec4 n)\n    {\n      return dot(p, n.xyz) + n.w;\n    }\n\n    vec2 distanceEstimate(vec3 pos)\n    {\n      float cellSize = 5.;\n      float cellNumber = floor(pos.y/cellSize)+1.;\n      float period = 50./cellNumber;\n      float s = sin(timestep/period);\n      float c = cos(timestep/period);\n      mat3 r = mat3(c,  -s,  0.,\n                    s,   c,  0.,\n                    0.,  0., 1.);\n      vec2 ball = vec2(sphere(opRep(pos-vec3(0, 0, s*2.0), vec3(cellSize)), 0.5), 45.);\n      vec2 tor = vec2(torus(opRep(pos, vec3(cellSize))*r, vec2(1.0, 0.25)), 15.);\n      vec2 floor = vec2(plane(pos, vec4(0, 1, 0, -1)), 0.);\n      vec2 objects = opU(tor, ball);\n      return opU(floor, objects);\n    }\n\n    vec3 getNormal(vec3 pos)\n    {\n      const vec2 delta = vec2(0.01, 0);\n\n      vec3 n;\n      n.x = distanceEstimate(pos + delta.xyy).x - distanceEstimate(pos - delta.xyy).x;\n      n.y = distanceEstimate(pos + delta.yxy).x - distanceEstimate(pos - delta.yxy).x;\n      n.z = distanceEstimate(pos + delta.yyx).x - distanceEstimate(pos - delta.yyx).x;\n\n      return normalize(n);\n    }\n\n    float softshadow(in vec3 ro, in vec3 rd, in float mint, in float tmax)\n    {\n      float res = 1.0;\n      float t = mint;\n      for (int i=0; i<16; i++)\n      {\n        float h = distanceEstimate(ro + rd*t).x;\n        res = min(res, 8.0*h/t);\n        t += clamp(h, 0.02, 0.11);\n        if( h<0.001 || t>tmax ) break;\n      }\n      return clamp(res, 0., 1.);\n    }\n\n    float calcAO(in vec3 pos, in vec3 nor)\n    {\n      float occ = 0.0;\n      float sca = 1.0;\n      for (int i=0; i<5; i++)\n      {\n        float hr = 0.01 + 0.12*float(i)/4.0;\n        vec3 aopos =  nor * hr + pos;\n        float dd = distanceEstimate(aopos).x;\n        occ += -(dd-hr)*sca;\n        sca *= 0.95;\n      }\n      return clamp(1.0 - 3.0*occ, 0., 1.);\n    }\n\n    vec3 sunLight  = normalize(vec3(-0.6, 0.7, 0.5));\n    vec3 sunColour = vec3(1.0, .75, .6);\n    vec3 Sky(in vec3 rayDir)\n    {\n      float sunAmount = max(dot(rayDir, sunLight), 0.0);\n      float v = pow(1.0 - max(rayDir.y, 0.0), 6.);\n      vec3  sky = mix(vec3(.1, .2, .3), vec3(.32, .32, .32), v);\n      sky = sky + sunColour * sunAmount * sunAmount * .25;\n      sky = sky + sunColour * min(pow(sunAmount, 800.0)*1.5, .3);\n\n      return clamp(sky, 0., 1.);\n    }\n\n    const float horizonLength = 100.;\n    const float surfacePrecision = 0.01;\n    const int maxIterations = 128;\n    vec2 castRay(vec3 rayOrigin, vec3 rayDir)\n    {\n      float t = 0.;\n      for (int i=0; i<maxIterations; i++)\n      {\n        vec3 p = rayOrigin + rayDir * t;\n        vec2 d = distanceEstimate(p);\n        if (abs(d.x) < surfacePrecision)\n        {\n          return vec2(t, d.y);\n        }\n        t += d.x;\n        if (t >= horizonLength) break;\n      }\n      return vec2(t, -1.);\n    }\n\n    vec3 getRay(vec3 dir, vec2 pos) {\n      pos = pos - 0.5;\n      pos.x *= resolution.x/resolution.y;\n\n      dir = normalize(dir);\n      vec3 right = normalize(cross(vec3(0., 1., 0.), dir));\n      vec3 up = normalize(cross(dir, right));\n\n      return dir + right*pos.x + up*pos.y;\n    }\n\n    vec3 render(in vec3 ro, in vec3 rd)\n    {\n      vec3 skyColor = Sky(rd);\n      vec3 color = skyColor;\n      vec2 res = castRay(ro, rd);\n      float t = res.x;\n      float material = res.y;\n      if (t < horizonLength)\n      {\n        vec3 pos = ro + t*rd;\n        vec3 normal = getNormal(pos);\n        vec3 reflectionDir = reflect(rd, normal);\n\n        // material\n        color = 0.45 + 0.3*sin(vec3(0.05, 0.08, 0.10)) * material;\n\n        if (material == 0.0)\n        {\n          float f = mod(floor(2.*pos.z) + floor(2.*pos.x), 2.);\n          color = 0.4 + 0.1*f*vec3(1.);\n        }\n\n        // lighting\n        float occ = calcAO(pos, normal);\n        float amb = clamp(0.5+0.5*normal.y, 0., 1.);\n        float dif = clamp(dot(normal, sunLight), 0., 1.);\n        float bac = clamp(dot(normal, normalize(vec3(-sunLight.x, 0., -sunLight.z))), 0., 1.) * clamp(1.0-pos.y, 0., 1.);\n        float dom = smoothstep(-0.1, 0.1, reflectionDir.y);\n        float fre = pow(clamp(1.0+dot(normal, rd), 0., 1.), 2.);\n        float spe = pow(clamp(dot(reflectionDir, sunLight), 0., 1.), 16.);\n\n        dif *= softshadow(pos, sunLight, 0.02, 2.5);\n        dom *= softshadow(pos, reflectionDir, 0.02, 2.5);\n\n        vec3 lin = vec3(0.);\n        lin += 1.20 * dif * vec3(1.00, 0.85, 0.55);\n        lin += 1.20 * spe * vec3(1.00, 0.85, 0.55) * dif;\n        lin += 0.20 * amb * vec3(0.50, 0.70, 1.00) * occ;\n        lin += 0.30 * dom * vec3(0.50, 0.70, 1.00) * occ;\n        lin += 0.30 * bac * vec3(0.25, 0.25, 0.25) * occ;\n        lin += 0.40 * fre * vec3(1.00, 1.00, 1.00) * occ;\n        color = color * lin;\n\n        color = mix(color, skyColor, 1.0-exp(-0.001*t*t));\n      }\n      return vec3(clamp(color, 0., 1.));\n    }\n\n    void main () {\n      vec2 p = gl_FragCoord.xy / resolution.xy;\n      vec3 rayDir = normalize(getRay(eye-center, p));\n      vec3 res = render(center, rayDir);\n      gl_FragColor = vec4(res.rgb, 1.);\n    }",
attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{height:S.context("viewportHeight"),width:S.context("viewportWidth"),timestep:S.context("tick")},count:3});S.frame(function(){e(function(){p()})})},{"../regl":47,"./util/camera":2}],2:[function(A,S,Ka){var e=A("mouse-change"),p=A("mouse-wheel"),n=A("gl-mat4/identity"),I=A("gl-mat4/perspective"),f=A("gl-mat4/lookAt");S.exports=function(b,r){function a(a){a*=.9;return.1>Math.abs(a)?0:a}function u(b){var e=ma.center,r=ma.eye,g=ma.up;ma.theta+=C;ma.phi=
Math.min(Math.max(ma.phi+B,-Math.PI/2),Math.PI/2);ma.distance=Math.min(Math.max(ma.distance+z,D),w);C=a(C);B=a(B);z=a(z);for(var p=ma.theta,u=ma.phi,X=Math.exp(ma.distance),q=X*Math.sin(p)*Math.cos(u),p=X*Math.cos(p)*Math.cos(u),u=X*Math.sin(u),X=0;3>X;++X)r[X]=e[X]+q*G[X]+p*Q[X]+u*g[X];f(ma.view,r,e,g);W(b)}var ma={view:n(new Float32Array(16)),projection:n(new Float32Array(16)),center:new Float32Array(r.center||3),theta:r.theta||0,phi:r.phi||0,distance:Math.log(r.distance||10),eye:new Float32Array(3),
up:new Float32Array(r.up||[0,1,0])},Q=new Float32Array([1,0,0]),G=new Float32Array([0,0,1]),D=Math.log("minDistance"in r?r.minDistance:.1),w=Math.log("maxDistance"in r?r.maxDistance:1E3),C=0,B=0,z=0,J=0,P=0;e(function(a,b,f){if(a&1){a=(f-P)/window.innerHeight;var g=Math.max(ma.distance,.5);C+=(b-J)/window.innerWidth*g;B+=g*a}J=b;P=f});p(function(a,b){z+=b/window.innerHeight});var W=b({context:Object.assign({},ma,{projection:function(a){return I(ma.projection,Math.PI/4,a.viewportWidth/a.viewportHeight,
.01,1E3)}}),uniforms:Object.keys(ma).reduce(function(a,f){a[f]=b.context(f);return a},{})});Object.keys(ma).forEach(function(a){u[a]=ma[a]});return u}},{"gl-mat4/identity":39,"gl-mat4/lookAt":40,"gl-mat4/perspective":41,"mouse-change":42,"mouse-wheel":44}],3:[function(A,S,Ka){function e(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var p=A("./util/sorted-object-keys"),n=A("./util/check"),I=A("./util/values"),
f=A("./constants/dtypes.json"),b=A("./util/is-typed-array"),r=A("./util/is-ndarray"),a=A("./constants/primitives.json"),u="attributes elements offset count primitive instances".split(" ");S.exports=function(ma,Q,G,D,w,C,B){function z(a){if(a!==V.currentVAO){var b=Q.oes_vertex_array_object;a?b.bindVertexArrayOES(a.vao):b.bindVertexArrayOES(null);V.currentVAO=a}}function J(a){if(a!==V.currentVAO){if(a)a.bindAttrs();else{for(var b=Q.angle_instanced_arrays,f=0;f<h.length;++f){var g=h[f];g.buffer?(ma.enableVertexAttribArray(f),
g.buffer.bind(),ma.vertexAttribPointer(f,g.size,g.type,g.normalized,g.stride,g.offfset),b&&g.divisor&&b.vertexAttribDivisorANGLE(f,g.divisor)):(ma.disableVertexAttribArray(f),ma.vertexAttrib4f(f,g.x,g.y,g.z,g.w))}B.elements?ma.bindBuffer(34963,B.elements.buffer.buffer):ma.bindBuffer(34963,null)}V.currentVAO=a}}function P(){I(l).forEach(function(a){a.destroy()})}function W(){this.id=++g;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=
4;var a=Q.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;l[this.id]=this;this.buffers=[]}function A(){Q.oes_vertex_array_object&&I(l).forEach(function(a){a.refresh()})}var t=G.maxAttributes,h=Array(t);for(G=0;G<t;++G)h[G]=new e;var g=0,l={},V={Record:e,scope:{},state:h,currentVAO:null,targetVAO:null,restore:Q.oes_vertex_array_object?A:function(){},createVAO:function(g){function q(g){var X;if(Array.isArray(g))X=g,h.elements&&h.ownsElements&&h.elements.destroy(),h.elements=null,h.ownsElements=
!1,h.offset=0,h.count=0,h.instances=-1,h.primitive=4;else{n("object"===typeof g,"invalid arguments for create vao");n("attributes"in g,"must specify attributes for vao");if(g.elements){var c=g.elements;h.ownsElements?("function"===typeof c&&"elements"===c._reglType?h.elements.destroy():h.elements(c),h.ownsElements=!1):C.getElements(g.elements)?(h.elements=g.elements,h.ownsElements=!1):(h.elements=C.create(g.elements),h.ownsElements=!0)}else h.elements=null,h.ownsElements=!1;X=g.attributes;h.offset=
0;h.count=-1;h.instances=-1;h.primitive=4;h.elements&&(h.count=h.elements._elements.vertCount,h.primitive=h.elements._elements.primType);"offset"in g&&(h.offset=g.offset|0);"count"in g&&(h.count=g.count|0);"instances"in g&&(h.instances=g.instances|0);"primitive"in g&&(n(g.primitive in a,"bad primitive type: "+g.primitive),h.primitive=a[g.primitive]);n.optional(function(){for(var a=p(g),c=0;c<a.length;++c)n(0<=u.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+u)});n(Array.isArray(X),
"attributes must be an array")}n(X.length<t,"too many attributes");n(0<X.length,"must specify at least one attribute");var c={},d=h.attributes;d.length=X.length;for(var ba=0;ba<X.length;++ba){var P=X[ba],l=d[ba]=new e,B=P.data||P;if(Array.isArray(B)||b(B)||r(B)){var z;h.buffers[ba]&&(z=h.buffers[ba],b(B)&&z._buffer.byteLength>=B.byteLength?z.subdata(B):(z.destroy(),h.buffers[ba]=null));h.buffers[ba]||(z=h.buffers[ba]=w.create(P,34962,!1,!0));l.buffer=w.getBuffer(z);l.size=l.buffer.dimension|0;l.normalized=
!1;l.type=l.buffer.dtype;l.offset=0;l.stride=0;l.divisor=0;l.state=1;c[ba]=1}else w.getBuffer(P)?(l.buffer=w.getBuffer(P),l.size=l.buffer.dimension|0,l.normalized=!1,l.type=l.buffer.dtype,l.offset=0,l.stride=0,l.divisor=0,l.state=1):w.getBuffer(P.buffer)?(l.buffer=w.getBuffer(P.buffer),l.size=(+P.size||l.buffer.dimension)|0,l.normalized=!!P.normalized||!1,"type"in P?(n.parameter(P.type,f,"invalid buffer type"),l.type=f[P.type]):l.type=l.buffer.dtype,l.offset=(P.offset||0)|0,l.stride=(P.stride||0)|
0,l.divisor=(P.divisor||0)|0,l.state=1,n(1<=l.size&&4>=l.size,"size must be between 1 and 4"),n(0<=l.offset,"invalid offset"),n(0<=l.stride&&255>=l.stride,"stride must be between 0 and 255"),n(0<=l.divisor,"divisor must be positive"),n(!l.divisor||!!Q.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in P?(n(0<ba,"first attribute must not be a constant"),l.x=+P.x||0,l.y=+P.y||0,l.z=+P.z||0,l.w=+P.w||0,l.state=2):n(!1,"invalid attribute spec for location "+ba)}for(z=
0;z<h.buffers.length;++z)!c[z]&&h.buffers[z]&&(h.buffers[z].destroy(),h.buffers[z]=null);h.refresh();return q}var h=new W;D.vaoCount+=1;q.destroy=function(){for(var a=0;a<h.buffers.length;++a)h.buffers[a]&&h.buffers[a].destroy();h.buffers.length=0;h.ownsElements&&(h.elements.destroy(),h.elements=null,h.ownsElements=!1);h.destroy()};q._vao=h;q._reglType="vao";return q(g)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var b=0;b<h.length;++b){var f=
h[b];f.buffer===a&&(ma.disableVertexAttribArray(b),f.buffer=null)}},setVAO:Q.oes_vertex_array_object?z:J,clear:Q.oes_vertex_array_object?P:function(){}};W.prototype.bindAttrs=function(){for(var a=Q.angle_instanced_arrays,b=this.attributes,f=0;f<b.length;++f){var g=b[f];g.buffer?(ma.enableVertexAttribArray(f),ma.bindBuffer(34962,g.buffer.buffer),ma.vertexAttribPointer(f,g.size,g.type,g.normalized,g.stride,g.offset),a&&g.divisor&&a.vertexAttribDivisorANGLE(f,g.divisor)):(ma.disableVertexAttribArray(f),
ma.vertexAttrib4f(f,g.x,g.y,g.z,g.w))}for(a=b.length;a<t;++a)ma.disableVertexAttribArray(a);(a=C.getElements(this.elements))?ma.bindBuffer(34963,a.buffer.buffer):ma.bindBuffer(34963,null)};W.prototype.refresh=function(){var a=Q.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),V.currentVAO=null,a.bindVertexArrayOES(null))};W.prototype.destroy=function(){if(this.vao){var a=Q.oes_vertex_array_object;this===V.currentVAO&&(V.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);
this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);l[this.id]&&(delete l[this.id],--D.vaoCount)};return V}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./util/check":22,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/sorted-object-keys":35,"./util/values":37}],4:[function(A,S,Ka){function e(a){return G[Object.prototype.toString.call(a)]|0}function p(a,b){for(var f=0;f<b.length;++f)a[f]=b[f]}function n(a,b,f,e,r,p,t){for(var h=
0,g=0;g<f;++g)for(var u=0;u<e;++u)a[h++]=b[r*g+p*u+t]}var I=A("./util/sorted-object-keys"),f=A("./util/check"),b=A("./util/is-typed-array"),r=A("./util/is-ndarray"),a=A("./util/values"),u=A("./util/pool");Ka=A("./util/flatten");var ma=Ka.flatten,Q=Ka.shape,G=A("./constants/arraytypes.json"),D=A("./constants/dtypes.json"),w=A("./constants/usage.json"),C=[];C[5120]=1;C[5122]=2;C[5124]=4;C[5121]=1;C[5123]=2;C[5125]=4;C[5126]=4;S.exports=function(B,z,G,P){function W(a){this.id=g++;this.buffer=B.createBuffer();
this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;G.profile&&(this.stats={size:0})}function A(a,b,f){a.byteLength=b.byteLength;B.bufferData(a.type,b,f)}function t(a,g,h,t,l,c){a.usage=h;if(Array.isArray(g)){if(a.dtype=t||5126,0<g.length)if(Array.isArray(g[0])){l=Q(g);for(var d=t=1;d<l.length;++d)t*=l[d];a.dimension=t;g=ma(g,l,a.dtype);A(a,g,h);c?a.persistentData=g:u.freeType(g)}else"number"===typeof g[0]?(a.dimension=l,l=u.allocType(a.dtype,g.length),
p(l,g),A(a,l,h),c?a.persistentData=l:u.freeType(l)):b(g[0])?(a.dimension=g[0].length,a.dtype=t||e(g[0])||5126,g=ma(g,[g.length,g[0].length],a.dtype),A(a,g,h),c?a.persistentData=g:u.freeType(g)):f.raise("invalid buffer data")}else if(b(g))a.dtype=t||e(g),a.dimension=l,A(a,g,h),c&&(a.persistentData=new Uint8Array(new Uint8Array(g.buffer)));else if(r(g)){l=g.shape;var ba=g.stride,d=g.offset,P=0,w=0,z=0,B=0;1===l.length?(P=l[0],w=1,z=ba[0],B=0):2===l.length?(P=l[0],w=l[1],z=ba[0],B=ba[1]):f.raise("invalid shape");
a.dtype=t||e(g.data)||5126;a.dimension=w;l=u.allocType(a.dtype,P*w);n(l,g.data,P,w,z,B,d);A(a,l,h);c?a.persistentData=l:u.freeType(l)}else g instanceof ArrayBuffer?(a.dtype=5121,a.dimension=l,A(a,g,h),c&&(a.persistentData=new Uint8Array(new Uint8Array(g)))):f.raise("invalid buffer data")}function h(a){z.bufferCount--;P(a);var b=a.buffer;f(b,"buffer must not be deleted already");B.deleteBuffer(b);a.buffer=null;delete l[a.id]}var g=0,l={};W.prototype.bind=function(){B.bindBuffer(this.type,this.buffer)};
W.prototype.destroy=function(){h(this)};var V=[];G.profile&&(z.getTotalBufferSize=function(){var a=0;I(l).forEach(function(b){a+=l[b].stats.size});return a});return{create:function(a,g,P,I){function V(a){var c=35044,g=null,h=0,e=0,q=1;Array.isArray(a)||b(a)||r(a)||a instanceof ArrayBuffer?g=a:"number"===typeof a?h=a|0:a&&(f.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(f(null===g||Array.isArray(g)||b(g)||r(g),"invalid data for buffer"),g=a.data),"usage"in
a&&(f.parameter(a.usage,w,"invalid buffer usage"),c=w[a.usage]),"type"in a&&(f.parameter(a.type,D,"invalid buffer type"),e=D[a.type]),"dimension"in a&&(f.type(a.dimension,"number","invalid dimension"),q=a.dimension|0),"length"in a&&(f.nni(h,"buffer length must be a nonnegative integer"),h=a.length|0));d.bind();g?t(d,g,c,e,q,I):(h&&B.bufferData(d.type,h,c),d.dtype=e||5121,d.usage=c,d.dimension=q,d.byteLength=h);G.profile&&(d.stats.size=d.byteLength*C[d.dtype]);return V}function c(a,b){f(b+a.byteLength<=
d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+b+" to a buffer of size "+d.byteLength);B.bufferSubData(d.type,b,a)}z.bufferCount++;var d=new W(g);l[d.id]=d;P||V(a);V._reglType="buffer";V._buffer=d;V.subdata=function(a,g){var h=(g||0)|0,q;d.bind();if(b(a)||a instanceof ArrayBuffer)c(a,h);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var l=u.allocType(d.dtype,a.length);p(l,a);c(l,h);u.freeType(l)}else Array.isArray(a[0])||
b(a[0])?(q=Q(a),l=ma(a,q,d.dtype),c(l,h),u.freeType(l)):f.raise("invalid buffer data")}else if(r(a)){q=a.shape;var t=a.stride,P=l=0,w=0,z=0;1===q.length?(l=q[0],P=1,w=t[0],z=0):2===q.length?(l=q[0],P=q[1],w=t[0],z=t[1]):f.raise("invalid shape");q=Array.isArray(a.data)?d.dtype:e(a.data);q=u.allocType(q,l*P);n(q,a.data,l,P,w,z,a.offset);c(q,h);u.freeType(q)}else f.raise("invalid data for buffer subdata");return V};G.profile&&(V.stats=d.stats);V.destroy=function(){h(d)};return V},createStream:function(a,
b){var g=V.pop();g||(g=new W(a));g.bind();t(g,b,35040,0,1,!1);return g},destroyStream:function(a){V.push(a)},clear:function(){a(l).forEach(h);V.forEach(h)},getBuffer:function(a){return a&&a._buffer instanceof W?a._buffer:null},restore:function(){a(l).forEach(function(a){a.buffer=B.createBuffer();B.bindBuffer(a.type,a.buffer);B.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:t}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,"./constants/usage.json":8,"./util/check":22,
"./util/flatten":27,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/pool":33,"./util/sorted-object-keys":35,"./util/values":37}],5:[function(A,S,Ka){S.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(A,S,Ka){S.exports={int8:5120,int16:5122,
int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],7:[function(A,S,Ka){S.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(A,S,Ka){S.exports={"static":35044,dynamic:35048,stream:35040}},{}],9:[function(A,S,Ka){function e(a){return Array.isArray(a)||G(a)||D(a)}function p(a){return a.sort(function(a,b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function n(a,b,g,f){this.thisDep=
a;this.contextDep=b;this.propDep=g;this.append=f}function I(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function f(a){return new n(!1,!1,!1,a)}function b(a,b){var g=a.type;if(0===g)return g=a.data.length,new n(!0,1<=g,2<=g,b);if(4===g)return g=a.data,new n(g.thisDep,g.contextDep,g.propDep,b);if(5===g)return new n(!1,!1,!1,b);if(6===g){for(var f=g=!1,h=!1,c=0;c<a.data.length;++c){var d=a.data[c];1===d.type?h=!0:2===d.type?f=!0:3===d.type?g=!0:0===d.type?(g=!0,d=d.data,1<=d&&(f=!0),2<=d&&(h=
!0)):4===d.type&&(g=g||d.data.thisDep,f=f||d.data.contextDep,h=h||d.data.propDep)}return new n(g,f,h,b)}return new n(3===g,2===g,1===g,b)}var r=A("./util/sorted-object-keys"),a=A("./util/check"),u=A("./util/extend"),ma=A("./util/codegen"),Q=A("./util/loop"),G=A("./util/is-typed-array"),D=A("./util/is-ndarray"),w=A("./util/is-array-like"),C=A("./dynamic"),B=A("./constants/primitives.json"),z=A("./constants/dtypes.json"),J=["x","y","z","w"],P="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),
W={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qd="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},h={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},g={frag:35632,vert:35633},l={cw:2304,ccw:2305},V=new n(!1,!1,!1,function(){});S.exports=function(G,q,D,O,Y,c,d,ba,oa,A,xb,Cb,na,Na,Z){function K(a){return a.replace(".","_")}function N(a,m,b){var c=K(a);da.push(a);
x[c]=H[c]=!!b;E[c]=m}function U(a,m,b){var c=K(a);da.push(a);Array.isArray(b)?(H[c]=b.slice(),x[c]=b.slice()):H[c]=x[c]=b;za[c]=m}function sa(){var b=ma(),m=b.link,c=b.global;b.id=kc++;b.batchId="0";var g=m(la),f=b.shared={props:"a0"};r(la).forEach(function(a){f[a]=c.def(g,".",a)});a.optional(function(){b.CHECK=m(a);b.commandStr=a.guessCommand();b.command=m(b.commandStr);b.assert=function(a,b,c){a("if(!(",b,"))",this.CHECK,".commandRaise(",m(c),",",this.command,");")};k.invalidBlendCombinations=Qd});
var E=b.next={},d=b.current={};r(za).forEach(function(a){Array.isArray(H[a])&&(E[a]=c.def(f.next,".",a),d[a]=c.def(f.current,".",a))});var h=b.constants={};r(k).forEach(function(a){h[a]=c.def(JSON.stringify(k[a]))});b.invoke=function(a,c){switch(c.type){case 0:var g=["this",f.context,f.props,b.batchId];return a.def(m(c.data),".call(",g.slice(0,Math.max(c.data.length+1,4)),")");case 1:return a.def(f.props,c.data);case 2:return a.def(f.context,c.data);case 3:return a.def("this",c.data);case 4:return c.data.append(b,
a),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(m){return b.invoke(a,m)})}};b.attribCache={};var xd={};b.scopeAttrib=function(a){a=q.id(a);if(a in xd)return xd[a];var b=A.scope[a];b||(b=A.scope[a]=new ia);return xd[a]=m(b)};return b}function L(a){var m=a["static"];a=a.dynamic;var c;if("profile"in m){var g=!!m.profile;c=f(function(a,b){return g});c.enable=g}else if("profile"in a){var k=a.profile;c=b(k,function(a,b){return a.invoke(b,k)})}return c}function $b(c,m){var g=
c["static"],k=c.dynamic;if("framebuffer"in g){var E=g.framebuffer;return E?(E=ba.getFramebuffer(E),a.command(E,"invalid framebuffer object"),f(function(a,b){var m=a.link(E),c=a.shared;b.set(c.framebuffer,".next",m);c=c.context;b.set(c,".framebufferWidth",m+".width");b.set(c,".framebufferHeight",m+".height");return m})):f(function(a,b){var m=a.shared;b.set(m.framebuffer,".next","null");m=m.context;b.set(m,".framebufferWidth",m+".drawingBufferWidth");b.set(m,".framebufferHeight",m+".drawingBufferHeight");
return"null"})}if("framebuffer"in k){var d=k.framebuffer;return b(d,function(b,m){var c=b.invoke(m,d),g=b.shared,f=g.framebuffer,k=m.def(f,".getFramebuffer(",c,")");a.optional(function(){b.assert(m,"!"+c+"||"+k,"invalid framebuffer object")});m.set(f,".next",k);g=g.context;m.set(g,".framebufferWidth",k+"?"+k+".width:"+g+".drawingBufferWidth");m.set(g,".framebufferHeight",k+"?"+k+".height:"+g+".drawingBufferHeight");return k})}return null}function $a(c,m,g){function k(c){if(c in f){var fa=f[c];a.commandType(fa,
"object","invalid "+c,g.commandStr);var d=!0,qd=fa.x|0,h=fa.y|0,e,q;"width"in fa?(e=fa.width|0,a.command(0<=e,"invalid "+c,g.commandStr)):d=!1;"height"in fa?(q=fa.height|0,a.command(0<=q,"invalid "+c,g.commandStr)):d=!1;return new n(!d&&m&&m.thisDep,!d&&m&&m.contextDep,!d&&m&&m.propDep,function(a,b){var m=a.shared.context,c=e;"width"in fa||(c=b.def(m,".","framebufferWidth","-",qd));var g=q;"height"in fa||(g=b.def(m,".","framebufferHeight","-",h));return[qd,h,c,g]})}if(c in E){var r=E[c],d=b(r,function(b,
m){var g=b.invoke(m,r);a.optional(function(){b.assert(m,g+"&&typeof "+g+'==="object"',"invalid "+c)});var k=b.shared.context,f=m.def(g,".x|0"),fa=m.def(g,".y|0"),E=m.def('"width" in ',g,"?",g,".width|0:","(",k,".","framebufferWidth","-",f,")"),d=m.def('"height" in ',g,"?",g,".height|0:","(",k,".","framebufferHeight","-",fa,")");a.optional(function(){b.assert(m,E+">=0&&"+d+">=0","invalid "+c)});return[f,fa,E,d]});m&&(d.thisDep=d.thisDep||m.thisDep,d.contextDep=d.contextDep||m.contextDep,d.propDep=
d.propDep||m.propDep);return d}return m?new n(m.thisDep,m.contextDep,m.propDep,function(a,b){var m=a.shared.context;return[0,0,b.def(m,".","framebufferWidth"),b.def(m,".","framebufferHeight")]}):null}var f=c["static"],E=c.dynamic;if(c=k("viewport")){var d=c;c=new n(c.thisDep,c.contextDep,c.propDep,function(a,b){var m=d.append(a,b),c=a.shared.context;b.set(c,".viewportWidth",m[2]);b.set(c,".viewportHeight",m[3]);return m})}return{viewport:c,scissor_box:k("scissor.box")}}function T(b,m){var c=b["static"];
if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<r(m.dynamic).length)return null;var c=m["static"],g=r(c);if(0<g.length&&"number"===typeof c[g[0]]){for(var k=[],f=0;f<g.length;++f)a("number"===typeof c[g[f]],"must specify all vertex attribute locations when using vaos"),k.push([c[g[f]]|0,g[f]]);return k}}return null}function v(c,m,k){function E(c){if(c in d){var m=q.id(d[c]);a.optional(function(){xb.shader(g[c],m,a.guessCommand())});var k=f(function(){return m});k.id=m;return k}if(c in
h){var fa=h[c];return b(fa,function(b,m){var k=b.invoke(m,fa),f=m.def(b.shared.strings,".id(",k,")");a.optional(function(){m(b.shared.shader,".shader(",g[c],",",f,",",b.command,");")});return f})}return null}var d=c["static"],h=c.dynamic,e=E("frag"),r=E("vert"),xd=null;I(e)&&I(r)?(xd=xb.program(r.id,e.id,null,k),c=f(function(a,b){return a.link(xd)})):c=new n(e&&e.thisDep||r&&r.thisDep,e&&e.contextDep||r&&r.contextDep,e&&e.propDep||r&&r.propDep,function(b,m){var c=b.shared.shader,g;g=e?e.append(b,
m):m.def(c,".","frag");var k;k=r?r.append(b,m):m.def(c,".","vert");var f=c+".program("+k+","+g;a.optional(function(){f+=","+b.command});return m.def(f+")")});return{frag:e,vert:r,progVar:c,program:xd}}function ja(g,m){function k(c,g){if(c in E){var fa=E[c]|0;g?h.offset=fa:h.instances=fa;a.command(!g||0<=fa,"invalid "+c,m.commandStr);return f(function(a,c){g&&(a.OFFSET=fa);return fa})}if(c in d){var qd=d[c];return b(qd,function(b,m){var k=b.invoke(m,qd);g&&(b.OFFSET=k,a.optional(function(){b.assert(m,
k+">=0","invalid "+c)}));return k})}if(g){if(xd)return f(function(a,b){return a.OFFSET=0});if(q)return new n(l.thisDep,l.contextDep,l.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(q)return new n(l.thisDep,l.contextDep,l.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var E=g["static"],d=g.dynamic,h={},q=!1,l=function(){if("vao"in E){var a=E.vao;null!==a&&null===A.getVAO(a)&&
(a=A.createVAO(a));q=!0;h.vao=a;return f(function(b){var c=A.getVAO(a);return c?b.link(c):"null"})}if("vao"in d){q=!0;var c=d.vao;return b(c,function(a,b){var m=a.invoke(b,c);return b.def(a.shared.vao+".getVAO("+m+")")})}return null}(),xd=!1,p=function(){if("elements"in E){var g=E.elements;h.elements=g;if(e(g)){var k=h.elements=c.create(g,!0),g=c.getElements(k);xd=!0}else g&&(g=c.getElements(g),xd=!0,a.command(g,"invalid elements",m.commandStr));k=f(function(a,b){if(g){var c=a.link(g);return a.ELEMENTS=
c}return a.ELEMENTS=null});k.value=g;return k}if("elements"in d){xd=!0;var fa=d.elements;return b(fa,function(b,c){var m=b.shared,g=m.isBufferArgs,m=m.elements,k=b.invoke(c,fa),f=c.def("null"),g=c.def(g,"(",k,")"),E=b.cond(g).then(f,"=",m,".createStream(",k,");")["else"](f,"=",m,".getElements(",k,");");a.optional(function(){b.assert(E["else"],"!"+k+"||"+f,"invalid elements")});c.entry(E);c.exit(b.cond(g).then(m,".destroyStream(",f,");"));return b.ELEMENTS=f})}return q?new n(l.thisDep,l.contextDep,
l.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),qd=k("offset",!0),t=function(){if("primitive"in E){var c=E.primitive;h.primitive=c;a.commandParameter(c,B,"invalid primitve",m.commandStr);return f(function(a,b){return B[c]})}if("primitive"in d){var g=d.primitive;return b(g,function(b,c){var m=b.constants.primTypes,k=b.invoke(c,g);a.optional(function(){b.assert(c,k+" in "+m,"invalid primitive, must be one of "+
r(B))});return c.def(m,"[",k,"]")})}return xd?I(p)?p.value?f(function(a,b){return b.def(a.ELEMENTS,".primType")}):f(function(){return 4}):new n(p.thisDep,p.contextDep,p.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",4)}):q?new n(l.thisDep,l.contextDep,l.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),x=function(){if("count"in E){var c=E.count|0;h.count=c;a.command("number"===typeof c&&0<=c,"invalid vertex count",
m.commandStr);return f(function(){return c})}if("count"in d){var g=d.count;return b(g,function(b,c){var m=b.invoke(c,g);a.optional(function(){b.assert(c,"typeof "+m+'==="number"&&'+m+">=0&&"+m+"===("+m+"|0)","invalid vertex count")});return m})}if(xd){if(I(p)){if(p)return qd?new n(qd.thisDep,qd.contextDep,qd.propDep,function(b,c){var m=c.def(b.ELEMENTS,".vertCount-",b.OFFSET);a.optional(function(){b.assert(c,m+">=0","invalid vertex offset/element buffer too small")});return m}):f(function(a,b){return b.def(a.ELEMENTS,
".vertCount")});var k=f(function(){return-1});a.optional(function(){k.MISSING=!0});return k}var fa=new n(p.thisDep||qd.thisDep,p.contextDep||qd.contextDep,p.propDep||qd.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")});a.optional(function(){fa.DYNAMIC=!0});return fa}return q?new n(l.thisDep,l.contextDep,l.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),v=
k("instances",!1);return{elements:p,primitive:t,count:x,instances:v,offset:qd,vao:l,vaoActive:q,elementsActive:xd,"static":h}}function ea(c,m){var g=c["static"],k=c.dynamic,E={};da.forEach(function(c){function fa(a,m){if(c in g){var h=a(g[c]);E[d]=f(function(){return h})}else if(c in k){var e=k[c];E[d]=b(e,function(a,c){return m(a,c,a.invoke(c,e))})}}var d=K(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return fa(function(b){a.commandType(b,
"boolean",c,m.commandStr);return b},function(b,m,g){a.optional(function(){b.assert(m,"typeof "+g+'==="boolean"',"invalid flag "+c,b.commandStr)});return g});case "depth.func":return fa(function(b){a.commandParameter(b,t,"invalid "+c,m.commandStr);return t[b]},function(b,m,g){var k=b.constants.compareFuncs;a.optional(function(){b.assert(m,g+" in "+k,"invalid "+c+", must be one of "+r(t))});return m.def(k,"[",g,"]")});case "depth.range":return fa(function(c){a.command(w(c)&&2===c.length&&"number"===
typeof c[0]&&"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",m.commandStr);return c},function(c,b,m){a.optional(function(){c.assert(b,c.shared.isArrayLike+"("+m+")&&"+m+".length===2&&typeof "+m+'[0]==="number"&&typeof '+m+'[1]==="number"&&'+m+"[0]<="+m+"[1]","depth range must be a 2d array")});var g=b.def("+",m,"[0]"),k=b.def("+",m,"[1]");return[g,k]});case "blend.func":return fa(function(c){a.commandType(c,"object","blend.func",m.commandStr);var b="srcRGB"in c?c.srcRGB:c.src,g="srcAlpha"in
c?c.srcAlpha:c.src,k="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;a.commandParameter(b,W,d+".srcRGB",m.commandStr);a.commandParameter(g,W,d+".srcAlpha",m.commandStr);a.commandParameter(k,W,d+".dstRGB",m.commandStr);a.commandParameter(c,W,d+".dstAlpha",m.commandStr);a.command(-1===Qd.indexOf(b+", "+k),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+k+")",m.commandStr);return[W[b],W[k],W[g],W[c]]},function(b,m,g){function k(fa,E){var d=m.def('"',fa,E,'" in ',g,"?",g,".",
fa,E,":",g,".",fa);a.optional(function(){b.assert(m,d+" in "+f,"invalid "+c+"."+fa+E+", must be one of "+r(W))});return d}var f=b.constants.blendFuncs;a.optional(function(){b.assert(m,g+"&&typeof "+g+'==="object"',"invalid blend func, must be an object")});var fa=k("src","RGB"),E=k("dst","RGB");a.optional(function(){b.assert(m,b.constants.invalidBlendCombinations+".indexOf("+fa+'+", "+'+E+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var d=m.def(f,"[",fa,"]"),h=m.def(f,"[",
k("src","Alpha"),"]"),e=m.def(f,"[",E,"]"),q=m.def(f,"[",k("dst","Alpha"),"]");return[d,e,h,q]});case "blend.equation":return fa(function(b){if("string"===typeof b)return a.commandParameter(b,va,"invalid "+c,m.commandStr),[va[b],va[b]];if("object"===typeof b)return a.commandParameter(b.rgb,va,c+".rgb",m.commandStr),a.commandParameter(b.alpha,va,c+".alpha",m.commandStr),[va[b.rgb],va[b.alpha]];a.commandRaise("invalid blend.equation",m.commandStr)},function(b,m,g){var k=b.constants.blendEquations,f=
m.def(),fa=m.def(),E=b.cond("typeof ",g,'==="string"');a.optional(function(){function a(c,m,g){b.assert(c,g+" in "+k,"invalid "+m+", must be one of "+r(va))}a(E.then,c,g);b.assert(E["else"],g+"&&typeof "+g+'==="object"',"invalid "+c);a(E["else"],c+".rgb",g+".rgb");a(E["else"],c+".alpha",g+".alpha")});E.then(f,"=",fa,"=",k,"[",g,"];");E["else"](f,"=",k,"[",g,".rgb];",fa,"=",k,"[",g,".alpha];");m(E);return[f,fa]});case "blend.color":return fa(function(c){a.command(w(c)&&4===c.length,"blend.color must be a 4d array",
m.commandStr);return Q(4,function(a){return+c[a]})},function(c,b,m){a.optional(function(){c.assert(b,c.shared.isArrayLike+"("+m+")&&"+m+".length===4","blend.color must be a 4d array")});return Q(4,function(a){return b.def("+",m,"[",a,"]")})});case "stencil.mask":return fa(function(c){a.commandType(c,"number",d,m.commandStr);return c|0},function(c,b,m){a.optional(function(){c.assert(b,"typeof "+m+'==="number"',"invalid stencil.mask")});return b.def(m,"|0")});case "stencil.func":return fa(function(b){a.commandType(b,
"object",d,m.commandStr);var g=b.cmp||"keep",k=b.ref||0;b="mask"in b?b.mask:-1;a.commandParameter(g,t,c+".cmp",m.commandStr);a.commandType(k,"number",c+".ref",m.commandStr);a.commandType(b,"number",c+".mask",m.commandStr);return[t[g],k,b]},function(c,b,m){var g=c.constants.compareFuncs;a.optional(function(){function a(){c.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(m+"&&typeof ",m,'==="object"');a('!("cmp" in ',m,")||(",m,".cmp in ",g,")")});var k=b.def('"cmp" in ',
m,"?",g,"[",m,".cmp]",":",7680),f=b.def(m,".ref|0"),fa=b.def('"mask" in ',m,"?",m,".mask|0:-1");return[k,f,fa]});case "stencil.opFront":case "stencil.opBack":return fa(function(b){a.commandType(b,"object",d,m.commandStr);var g=b.fail||"keep",k=b.zfail||"keep";b=b.zpass||"keep";a.commandParameter(g,h,c+".fail",m.commandStr);a.commandParameter(k,h,c+".zfail",m.commandStr);a.commandParameter(b,h,c+".zpass",m.commandStr);return["stencil.opBack"===c?1029:1028,h[g],h[k],h[b]]},function(b,m,g){function k(fa){a.optional(function(){b.assert(m,
'!("'+fa+'" in '+g+")||("+g+"."+fa+" in "+f+")","invalid "+c+"."+fa+", must be one of "+r(h))});return m.def('"',fa,'" in ',g,"?",f,"[",g,".",fa,"]:",7680)}var f=b.constants.stencilOps;a.optional(function(){b.assert(m,g+"&&typeof "+g+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,k("fail"),k("zfail"),k("zpass")]});case "polygonOffset.offset":return fa(function(c){a.commandType(c,"object",d,m.commandStr);var b=c.factor|0;c=c.units|0;a.commandType(b,"number",d+".factor",m.commandStr);
a.commandType(c,"number",d+".units",m.commandStr);return[b,c]},function(b,m,g){a.optional(function(){b.assert(m,g+"&&typeof "+g+'==="object"',"invalid "+c)});var k=m.def(g,".factor|0"),f=m.def(g,".units|0");return[k,f]});case "cull.face":return fa(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);a.command(!!b,d,m.commandStr);return b},function(c,b,m){a.optional(function(){c.assert(b,m+'==="front"||'+m+'==="back"',"invalid cull.face")});return b.def(m,'==="front"?',1028,":",1029)});case "lineWidth":return fa(function(c){a.command("number"===
typeof c&&c>=O.lineWidthDims[0]&&c<=O.lineWidthDims[1],"invalid line width, must be a positive number between "+O.lineWidthDims[0]+" and "+O.lineWidthDims[1],m.commandStr);return c},function(c,b,m){a.optional(function(){c.assert(b,"typeof "+m+'==="number"&&'+m+">="+O.lineWidthDims[0]+"&&"+m+"<="+O.lineWidthDims[1],"invalid line width")});return m});case "frontFace":return fa(function(c){a.commandParameter(c,l,d,m.commandStr);return l[c]},function(c,b,m){a.optional(function(){c.assert(b,m+'==="cw"||'+
m+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(m+'==="cw"?2304:2305')});case "colorMask":return fa(function(c){a.command(w(c)&&4===c.length,"color.mask must be length 4 array",m.commandStr);return c.map(function(a){return!!a})},function(c,b,m){a.optional(function(){c.assert(b,c.shared.isArrayLike+"("+m+")&&"+m+".length===4","invalid color.mask")});return Q(4,function(a){return"!!"+m+"["+a+"]"})});case "sample.coverage":return fa(function(c){a.command("object"===typeof c&&
c,d,m.commandStr);var b="value"in c?c.value:1;c=!!c.invert;a.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",m.commandStr);return[b,c]},function(c,b,m){a.optional(function(){c.assert(b,m+"&&typeof "+m+'==="object"',"invalid sample.coverage")});var g=b.def('"value" in ',m,"?+",m,".value:1"),k=b.def("!!",m,".invert");return[g,k]})}});return E}function Ea(c,m){var g=c["static"],k=c.dynamic,E={};r(g).forEach(function(c){var b=g[c],k;if("number"===typeof b||
"boolean"===typeof b)k=f(function(){return b});else if("function"===typeof b){var fa=b._reglType;"texture2d"===fa||"textureCube"===fa?k=f(function(a){return a.link(b)}):"framebuffer"===fa||"framebufferCube"===fa?(a.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',m.commandStr),k=f(function(a){return a.link(b.color[0])})):a.commandRaise('invalid data for uniform "'+c+'"',m.commandStr)}else w(b)?k=f(function(m){return m.global.def("[",Q(b.length,function(g){a.command("number"===
typeof b[g]||"boolean"===typeof b[g],"invalid uniform "+c,m.commandStr);return b[g]}),"]")}):a.commandRaise('invalid or missing data for uniform "'+c+'"',m.commandStr);k.value=b;E[c]=k});r(k).forEach(function(a){var c=k[a];E[a]=b(c,function(a,b){return a.invoke(b,c)})});return E}function Oa(c,m){var g=c["static"],k=c.dynamic,E={};r(g).forEach(function(c){var b=g[c],k=q.id(c),fa=new ia;if(e(b))fa.state=1,fa.buffer=Y.getBuffer(Y.create(b,34962,!1,!0)),fa.type=0;else{var d=Y.getBuffer(b);if(d)fa.state=
1,fa.buffer=d,fa.type=0;else if(a.command("object"===typeof b&&b,"invalid data for attribute "+c,m.commandStr),"constant"in b){var h=b.constant;fa.buffer="null";fa.state=2;"number"===typeof h?fa.x=h:(a.command(w(h)&&0<h.length&&4>=h.length,"invalid constant for attribute "+c,m.commandStr),J.forEach(function(a,c){c<h.length&&(fa[a]=h[c])}))}else{d=e(b.buffer)?Y.getBuffer(Y.create(b.buffer,34962,!1,!0)):Y.getBuffer(b.buffer);a.command(!!d,'missing buffer for attribute "'+c+'"',m.commandStr);var l=b.offset|
0;a.command(0<=l,'invalid offset for attribute "'+c+'"',m.commandStr);var p=b.stride|0;a.command(0<=p&&256>p,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',m.commandStr);var t=b.size|0;a.command(!("size"in b)||0<t&&4>=t,'invalid size for attribute "'+c+'", must be 1,2,3,4',m.commandStr);var x=!!b.normalized,v=0;"type"in b&&(a.commandParameter(b.type,z,"invalid type for attribute "+c,m.commandStr),v=z[b.type]);var la=b.divisor|0;a.optional(function(){"divisor"in b&&(a.command(0===
la||R,'cannot specify divisor for attribute "'+c+'", instancing not supported',m.commandStr),a.command(0<=la,'invalid divisor for attribute "'+c+'"',m.commandStr));var g=m.commandStr,k="buffer offset divisor normalized type size stride".split(" ");r(b).forEach(function(b){a.command(0<=k.indexOf(b),'unknown parameter "'+b+'" for attribute pointer "'+c+'" (valid parameters are '+k+")",g)})});fa.buffer=d;fa.state=1;fa.size=t;fa.normalized=x;fa.type=v||d.dtype;fa.offset=l;fa.stride=p;fa.divisor=la}}E[c]=
f(function(a,c){var b=a.attribCache;if(k in b)return b[k];var m={isStream:!1};r(fa).forEach(function(a){m[a]=fa[a]});fa.buffer&&(m.buffer=a.link(fa.buffer),m.type=m.type||m.buffer+".dtype");return b[k]=m})});r(k).forEach(function(c){var m=k[c];E[c]=b(m,function(b,g){function k(a){g(e[a],"=",f,".",a,"|0;")}var f=b.invoke(g,m),fa=b.shared,E=b.constants,d=fa.isBufferArgs,h=fa.buffer;a.optional(function(){b.assert(g,f+"&&(typeof "+f+'==="object"||typeof '+f+'==="function")&&('+d+"("+f+")||"+h+".getBuffer("+
f+")||"+h+".getBuffer("+f+".buffer)||"+d+"("+f+'.buffer)||("constant" in '+f+"&&(typeof "+f+'.constant==="number"||'+fa.isArrayLike+"("+f+".constant))))",'invalid dynamic attribute "'+c+'"')});var e={isStream:g.def(!1)},q=new ia;q.state=1;r(q).forEach(function(a){e[a]=g.def(""+q[a])});var l=e.buffer,p=e.type;g("if(",d,"(",f,")){",e.isStream,"=true;",l,"=",h,".createStream(",34962,",",f,");",p,"=",l,".dtype;","}else{",l,"=",h,".getBuffer(",f,");","if(",l,"){",p,"=",l,".dtype;",'}else if("constant" in ',
f,"){",e.state,"=",2,";","if(typeof "+f+'.constant === "number"){',e[J[0]],"=",f,".constant;",J.slice(1).map(function(a){return e[a]}).join("="),"=0;","}else{",J.map(function(a,c){return e[a]+"="+f+".constant.length>"+c+"?"+f+".constant["+c+"]:0;"}).join(""),"}}else{","if(",d,"(",f,".buffer)){",l,"=",h,".createStream(",34962,",",f,".buffer);","}else{",l,"=",h,".getBuffer(",f,".buffer);","}",p,'="type" in ',f,"?",E.glTypes,"[",f,".type]:",l,".dtype;",e.normalized,"=!!",f,".normalized;");k("size");
k("offset");k("stride");k("divisor");g("}}");g.exit("if(",e.isStream,"){",h,".destroyStream(",l,");","}");return e})});return E}function S(a){var c=a["static"],g=a.dynamic,k={};r(c).forEach(function(a){var b=c[a];k[a]=f(function(a,c){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});r(g).forEach(function(a){var c=g[a];k[a]=b(c,function(a,b){return a.invoke(b,c)})});return k}function Ha(c,b,g,k,f){function E(a){var c=q[a];c&&(t[a]=c)}var d=c["static"],h=c.dynamic;a.optional(function(){function c(m){r(m).forEach(function(c){a.command(0<=
b.indexOf(c),'unknown parameter "'+c+'"',f.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(da);c(d);c(h)});var e=T(c,b),l=$b(c,f),q=$a(c,l,f),p=ja(c,f),t=ea(c,f),x=v(c,f,e);E("viewport");E(K("scissor.box"));var la=0<r(t).length,l={framebuffer:l,draw:p,shader:x,state:t,dirty:la,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};l.profile=L(c,f);l.uniforms=Ea(g,f);l.drawVAO=l.scopeVAO=p.vao;if(!l.drawVAO&&x.program&&!e&&D.angle_instanced_arrays&&
p["static"].elements){var u=!0;c=x.program.attributes.map(function(a){a=b["static"][a];u=u&&!!a;return a});if(u&&0<c.length){var y=A.getVAO(A.createVAO({attributes:c,elements:p["static"].elements}));l.drawVAO=new n(null,null,null,function(a,c){return a.link(y)});l.useVAO=!0}}e?l.useVAO=!0:l.attributes=Oa(b,f);l.context=S(k,f);return l}function aa(a,c,b){var g=a.shared.context,k=a.scope();r(b).forEach(function(f){c.save(g,"."+f);var E=b[f].append(a,c);Array.isArray(E)?k(g,".",f,"=[",E.join(),"];"):
k(g,".",f,"=",E,";")});c(k)}function ib(a,c,b,g){var k=a.shared,f=k.gl,E=k.framebuffer,d;ha&&(d=c.def(k.extensions,".webgl_draw_buffers"));var h=a.constants,k=h.drawBuffer,h=h.backBuffer;a=b?b.append(a,c):c.def(E,".next");g||c("if(",a,"!==",E,".cur){");c("if(",a,"){",f,".bindFramebuffer(",36160,",",a,".framebuffer);");ha&&c(d,".drawBuffersWEBGL(",k,"[",a,".colorAttachments.length]);");c("}else{",f,".bindFramebuffer(",36160,",null);");ha&&c(d,".drawBuffersWEBGL(",h,");");c("}",E,".cur=",a,";");g||
c("}")}function ga(a,c,b){var g=a.shared,k=g.gl,f=a.current,d=a.next,h=g.current,e=g.next,l=a.cond(h,".dirty");da.forEach(function(c){c=K(c);if(!(c in b.state)){var m,g;if(c in d){m=d[c];g=f[c];var q=Q(H[c].length,function(a){return l.def(m,"[",a,"]")});l(a.cond(q.map(function(a,c){return a+"!=="+g+"["+c+"]"}).join("||")).then(k,".",za[c],"(",q,");",q.map(function(a,c){return g+"["+c+"]="+a}).join(";"),";"))}else m=l.def(e,".",c),q=a.cond(m,"!==",h,".",c),l(q),c in E?q(a.cond(m).then(k,".enable(",
E[c],");")["else"](k,".disable(",E[c],");"),h,".",c,"=",m,";"):q(k,".",za[c],"(",m,");",h,".",c,"=",m,";")}});0===r(b.state).length&&l(h,".dirty=false;");c(l)}function qa(a,c,b,g){var k=a.shared,f=a.current,d=k.current,h=k.gl;p(r(b)).forEach(function(k){var e=b[k];if(!g||g(e)){var l=e.append(a,c);if(E[k]){var q=E[k];I(e)?l?c(h,".enable(",q,");"):c(h,".disable(",q,");"):c(a.cond(l).then(h,".enable(",q,");")["else"](h,".disable(",q,");"));c(d,".",k,"=",l,";")}else if(w(l)){var r=f[k];c(h,".",za[k],
"(",l,");",l.map(function(a,c){return r+"["+c+"]="+a}).join(";"),";")}else c(h,".",za[k],"(",l,");",d,".",k,"=",l,";")}})}function ec(a,c){R&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function pc(a,c,b,g,k){function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function E(a){p=c.def();a(p,"=",f(),";");"string"===typeof k?a(l,".count+=",k,";"):a(l,".count++;");Na&&(g?(t=c.def(),a(t,"=",r,".getNumPendingQueries();")):a(r,".beginQuery(",l,");"))}
function d(a){a(l,".cpuTime+=",f(),"-",p,";");Na&&(g?a(r,".pushScopeStats(",t,",",r,".getNumPendingQueries(),",l,");"):a(r,".endQuery();"))}function h(a){var b=c.def(q,".profile");c(q,".profile=",a,";");c.exit(q,".profile=",b,";")}var e=a.shared,l=a.stats,q=e.current,r=e.timer;b=b.profile;var p,t;if(b){if(I(b)){b.enable?(E(c),d(c.exit),h("true")):h("false");return}b=b.append(a,c);h(b)}else b=c.def(q,".profile");e=a.block();E(e);c("if(",b,"){",e,"}");a=a.block();d(a);c.exit("if(",b,"){",a,"}")}function lc(c,
b,g,k,f){function E(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function d(a,g,k){function f(){b("if(!",q,".buffer){",e,".enableVertexAttribArray(",l,");}");var a=k.type,E;E=k.size?b.def(k.size,"||",g):g;b("if(",q,".type!==",a,"||",q,".size!==",E,"||",t.map(function(a){return q+"."+a+"!=="+k[a]}).join("||"),"){",e,".bindBuffer(",34962,",",r,".buffer);",e,".vertexAttribPointer(",[l,E,a,
k.normalized,k.stride,k.offset],");",q,".type=",a,";",q,".size=",E,";",t.map(function(a){return q+"."+a+"="+k[a]+";"}).join(""),"}");R&&(a=k.divisor,b("if(",q,".divisor!==",a,"){",c.instancing,".vertexAttribDivisorANGLE(",[l,a],");",q,".divisor=",a,";}"))}function E(){b("if(",q,".buffer){",e,".disableVertexAttribArray(",l,");",q,".buffer=null;","}if(",J.map(function(a,c){return q+"."+a+"!=="+p[c]}).join("||"),"){",e,".vertexAttrib4f(",l,",",p,");",J.map(function(a,c){return q+"."+a+"="+p[c]+";"}).join(""),
"}")}var e=h.gl,l=b.def(a,".location"),q=b.def(h.attributes,"[",l,"]");a=k.state;var r=k.buffer,p=[k.x,k.y,k.z,k.w],t=["buffer","normalized","offset","stride"];1===a?f():2===a?E():(b("if(",a,"===",1,"){"),f(),b("}else{"),E(),b("}"))}var h=c.shared;k.forEach(function(k){var h=k.name,e=g.attributes[h],l;if(e){if(!f(e))return;l=e.append(c,b)}else{if(!f(V))return;var q=c.scopeAttrib(h);a.optional(function(){c.assert(b,q+".state","missing attribute "+h)});l={};r(new ia).forEach(function(a){l[a]=b.def(q,
".",a)})}d(c.link(k),E(k.info.type),l)})}function ud(c,b,g,k,f,E){for(var d=c.shared,h=d.gl,l,e=0;e<k.length;++e){var r=k[e],p=r.name,t=r.info.type,x=g.uniforms[p],r=c.link(r)+".location",v;if(x){if(!f(x))continue;if(I(x)){var la=x.value;a.command(null!==la&&"undefined"!==typeof la,'missing uniform "'+p+'"',c.commandStr);if(35678===t||35680===t)a.command("function"===typeof la&&(35678===t&&("texture2d"===la._reglType||"framebuffer"===la._reglType)||35680===t&&("textureCube"===la._reglType||"framebufferCube"===
la._reglType)),"invalid texture for uniform "+p,c.commandStr),x=c.link(la._texture||la.color[0]._texture),b(h,".uniform1i(",r,",",x+".bind());"),b.exit(x,".unbind();");else if(35674===t||35675===t||35676===t){a.optional(function(){a.command(w(la),"invalid matrix for uniform "+p,c.commandStr);a.command(35674===t&&4===la.length||35675===t&&9===la.length||35676===t&&16===la.length,"invalid length for matrix uniform "+p,c.commandStr)});var x=c.global.def("new Float32Array(["+Array.prototype.slice.call(la)+
"])"),u=2;35675===t?u=3:35676===t&&(u=4);b(h,".uniformMatrix",u,"fv(",r,",false,",x,");")}else{switch(t){case 5126:a.commandType(la,"number","uniform "+p,c.commandStr);l="1f";break;case 35664:a.command(w(la)&&2===la.length,"uniform "+p,c.commandStr);l="2f";break;case 35665:a.command(w(la)&&3===la.length,"uniform "+p,c.commandStr);l="3f";break;case 35666:a.command(w(la)&&4===la.length,"uniform "+p,c.commandStr);l="4f";break;case 35670:a.commandType(la,"boolean","uniform "+p,c.commandStr);l="1i";break;
case 5124:a.commandType(la,"number","uniform "+p,c.commandStr);l="1i";break;case 35671:a.command(w(la)&&2===la.length,"uniform "+p,c.commandStr);l="2i";break;case 35667:a.command(w(la)&&2===la.length,"uniform "+p,c.commandStr);l="2i";break;case 35672:a.command(w(la)&&3===la.length,"uniform "+p,c.commandStr);l="3i";break;case 35668:a.command(w(la)&&3===la.length,"uniform "+p,c.commandStr);l="3i";break;case 35673:a.command(w(la)&&4===la.length,"uniform "+p,c.commandStr);l="4i";break;case 35669:a.command(w(la)&&
4===la.length,"uniform "+p,c.commandStr),l="4i"}b(h,".uniform",l,"(",r,",",w(la)?Array.prototype.slice.call(la):la,");")}continue}else v=x.append(c,b)}else{if(!f(V))continue;v=b.def(d.uniforms,"[",q.id(p),"]")}35678===t?(a(!Array.isArray(v),"must specify a scalar prop for textures"),b("if(",v,"&&",v,'._reglType==="framebuffer"){',v,"=",v,".color[0];","}")):35680===t&&(a(!Array.isArray(v),"must specify a scalar prop for cube maps"),b("if(",v,"&&",v,'._reglType==="framebufferCube"){',v,"=",v,".color[0];",
"}"));a.optional(function(){function g(a,k){c.assert(b,a,'bad data or missing for uniform "'+p+'".  '+k)}function k(c){a(!Array.isArray(v),"must not specify an array type for uniform");g("typeof "+v+'==="'+c+'"',"invalid type, expected "+c)}function f(b,k){Array.isArray(v)?a(v.length===b,"must have length "+b):g(d.isArrayLike+"("+v+")&&"+v+".length==="+b,"invalid vector, should have length "+b,c.commandStr)}function E(b){a(!Array.isArray(v),"must not specify a value type");g("typeof "+v+'==="function"&&'+
v+'._reglType==="texture'+(3553===b?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(t){case 5124:k("number");break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;case 35669:f(4,"number");break;case 5126:k("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:k("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,
"number");break;case 35676:f(16,"number");break;case 35678:E(3553);break;case 35680:E(34067)}});x=1;switch(t){case 35678:case 35680:x=b.def(v,"._texture");b(h,".uniform1i(",r,",",x,".bind());");b.exit(x,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";x=2;break;case 35668:case 35672:l="3i";x=3;break;case 35669:case 35673:l="4i";x=4;break;case 5126:l="1f";break;case 35664:l="2f";x=2;break;case 35665:l="3f";x=3;break;case 35666:l="4f";x=4;break;case 35674:l="Matrix2fv";
break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}if("M"===l.charAt(0)){b(h,".uniform",l,"(",r,",");var r=Math.pow(t-35674+2,2),y=c.global.def("new Float32Array(",r,")");Array.isArray(v)?b("false,(",Q(r,function(a){return y+"["+a+"]="+v[a]}),",",y,")"):b("false,(Array.isArray(",v,")||",v," instanceof Float32Array)?",v,":(",Q(r,function(a){return y+"["+a+"]="+v+"["+a+"]"}),",",y,")");b(");")}else{if(1<x){for(var u=[],P=[],za=0;za<x;++za)Array.isArray(v)?P.push(v[za]):P.push(b.def(v+"["+
za+"]")),E&&u.push(b.def());E&&b("if(!",c.batchId,"||",u.map(function(a,c){return a+"!=="+P[c]}).join("||"),"){",u.map(function(a,c){return a+"="+P[c]+";"}).join(""));b(h,".uniform",l,"(",r,",",P.join(","),");")}else a(!Array.isArray(v),"uniform value must not be an array"),E&&(x=b.def(),b("if(!",c.batchId,"||",x,"!==",v,"){",x,"=",v,";")),b(h,".uniform",l,"(",r,",",v,");");E&&b("}")}}}function wc(c,b,g,k){function f(a){var E=q[a];return E?E.contextDep&&k.contextDynamic||E.propDep?E.append(c,g):E.append(c,
b):b.def(e,".",a)}function E(){function a(){g(x,".drawElementsInstancedANGLE(",[p,t,u,v+"<<(("+u+"-5121)>>1)",la],");")}function c(){g(x,".drawArraysInstancedANGLE(",[p,v,t,la],");")}r&&"null"!==r?y?a():(g("if(",r,"){"),a(),g("}else{"),c(),g("}")):c()}function d(){function a(){g(l+".drawElements("+[p,t,u,v+"<<(("+u+"-5121)>>1)"]+");")}function c(){g(l+".drawArrays("+[p,v,t]+");")}r&&"null"!==r?y?a():(g("if(",r,"){"),a(),g("}else{"),c(),g("}")):c()}var h=c.shared,l=h.gl,e=h.draw,q=k.draw,r=function(){var a=
q.elements,f=b;if(a){if(a.contextDep&&k.contextDynamic||a.propDep)f=g;a=a.append(c,f);q.elementsActive&&f("if("+a+")"+l+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=f.def(),f(a,"=",e,".","elements",";","if(",a,"){",l,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",h.vao,".currentVAO){",a,"=",c.shared.elements+".getElements("+h.vao,".currentVAO.elements);",ra?"":"if("+a+")"+l+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),p=f("primitive"),v=f("offset"),t=function(){var f=
q.count,E,d=b;if(f){if(f.contextDep&&k.contextDynamic||f.propDep)d=g;E=f.append(c,d);a.optional(function(){f.MISSING&&c.assert(b,"false","missing vertex count");f.DYNAMIC&&c.assert(d,E+">=0","missing vertex count")})}else E=d.def(e,".","count"),a.optional(function(){c.assert(d,E+">=0","missing vertex count")});return E}();if("number"===typeof t){if(0===t)return}else g("if(",t,"){"),g.exit("}");var la,x;R&&(la=f("instances"),x=c.instancing);var u=r+".type",y=q.elements&&I(q.elements)&&!q.vaoActive;
R&&("number"!==typeof la||0<=la)?"string"===typeof la?(g("if(",la,">0){"),E(),g("}else if(",la,"<0){"),d(),g("}")):E():d()}function ca(c,b,g,k,f){var E=sa();f=E.proc("body",f);a.optional(function(){E.commandStr=b.commandStr;E.command=E.link(b.commandStr)});R&&(E.instancing=f.def(E.shared.extensions,".angle_instanced_arrays"));c(E,f,g,k);return E.compile().body}function M(a,c,b,g){ec(a,c);b.useVAO?b.drawVAO?c(a.shared.vao,".setVAO(",b.drawVAO.append(a,c),");"):c(a.shared.vao,".setVAO(",a.shared.vao,
".targetVAO);"):(c(a.shared.vao,".setVAO(null);"),lc(a,c,b,g.attributes,function(){return!0}));ud(a,c,b,g.uniforms,function(){return!0},!1);wc(a,c,c,b)}function ka(a,c){var b=a.proc("draw",1);ec(a,b);aa(a,b,c.context);ib(a,b,c.framebuffer);ga(a,b,c);qa(a,b,c.state);pc(a,b,c,!1,!0);var g=c.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",g,".program);");if(c.shader.program)M(a,b,c,c.shader.program);else{b(a.shared.vao,".setVAO(null);");var k=a.global.def("{}"),f=b.def(g,".id"),E=b.def(k,"[",
f,"]");b(a.cond(E).then(E,".call(this,a0);")["else"](E,"=",k,"[",f,"]=",a.link(function(b){return ca(M,a,c,b,1)}),"(",g,");",E,".call(this,a0);"))}0<r(c.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function Ca(a,c,b,g){function k(){return!0}a.batchId="a1";ec(a,c);lc(a,c,b,g.attributes,k);ud(a,c,b,g.uniforms,k,!1);wc(a,c,c,b)}function Gb(a,c,b,g){function k(a){return a.contextDep&&E||a.propDep}function f(a){return!k(a)}ec(a,c);var E=b.contextDep,
d=c.def(),h=c.def();a.shared.props=h;a.batchId=d;var l=a.scope(),e=a.scope();c(l.entry,"for(",d,"=0;",d,"<","a1",";++",d,"){",h,"=","a0","[",d,"];",e,"}",l.exit);b.needsContext&&aa(a,e,b.context);b.needsFramebuffer&&ib(a,e,b.framebuffer);qa(a,e,b.state,k);b.profile&&k(b.profile)&&pc(a,e,b,!1,!0);g?(b.useVAO?b.drawVAO?k(b.drawVAO)?e(a.shared.vao,".setVAO(",b.drawVAO.append(a,e),");"):l(a.shared.vao,".setVAO(",b.drawVAO.append(a,l),");"):l(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(l(a.shared.vao,
".setVAO(null);"),lc(a,l,b,g.attributes,f),lc(a,e,b,g.attributes,k)),ud(a,l,b,g.uniforms,f,!1),ud(a,e,b,g.uniforms,k,!0),wc(a,l,e,b)):(c=a.global.def("{}"),g=b.shader.progVar.append(a,e),h=e.def(g,".id"),l=e.def(c,"[",h,"]"),e(a.shared.gl,".useProgram(",g,".program);","if(!",l,"){",l,"=",c,"[",h,"]=",a.link(function(c){return ca(Ca,a,b,c,2)}),"(",g,");}",l,".call(this,a0[",d,"],",d,");"))}function Jc(a,c){function b(a){return a.contextDep&&k||a.propDep}var g=a.proc("batch",2);a.batchId="0";ec(a,g);
var k=!1,f=!0;r(c.context).forEach(function(a){k=k||c.context[a].propDep});k||(aa(a,g,c.context),f=!1);var E=c.framebuffer,d=!1;E?(E.propDep?k=d=!0:E.contextDep&&k&&(d=!0),d||ib(a,g,E)):ib(a,g,null);c.state.viewport&&c.state.viewport.propDep&&(k=!0);ga(a,g,c);qa(a,g,c.state,function(a){return!b(a)});c.profile&&b(c.profile)||pc(a,g,c,!1,"a1");c.contextDep=k;c.needsContext=f;c.needsFramebuffer=d;f=c.shader.progVar;if(f.contextDep&&k||f.propDep)Gb(a,g,c,null);else if(f=f.append(a,g),g(a.shared.gl,".useProgram(",
f,".program);"),c.shader.program)Gb(a,g,c,c.shader.program);else{g(a.shared.vao,".setVAO(null);");var E=a.global.def("{}"),d=g.def(f,".id"),h=g.def(E,"[",d,"]");g(a.cond(h).then(h,".call(this,a0,a1);")["else"](h,"=",E,"[",d,"]=",a.link(function(b){return ca(Gb,a,c,b,2)}),"(",f,");",h,".call(this,a0,a1);"))}0<r(c.state).length&&g(a.shared.current,".dirty=true;");a.shared.vao&&g(a.shared.vao,".setVAO(null);")}function Wc(a,c){function b(f){var E=c.shader[f];E&&g.set(k.shader,"."+f,E.append(a,g))}var g=
a.proc("scope",3);a.batchId="a2";var k=a.shared,f=k.current;aa(a,g,c.context);c.framebuffer&&c.framebuffer.append(a,g);p(r(c.state)).forEach(function(b){var f=c.state[b].append(a,g);w(f)?f.forEach(function(c,k){g.set(a.next[b],"["+k+"]",c)}):g.set(k.next,"."+b,f)});pc(a,g,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var f=c.draw[b];f&&g.set(k.draw,"."+b,""+f.append(a,g))});r(c.uniforms).forEach(function(b){var f=c.uniforms[b].append(a,g);Array.isArray(f)&&(f=
"["+f.join()+"]");g.set(k.uniforms,"["+q.id(b)+"]",f)});r(c.attributes).forEach(function(b){var k=c.attributes[b].append(a,g),f=a.scopeAttrib(b);r(new ia).forEach(function(a){g.set(f,"."+a,k[a])})});c.scopeVAO&&g.set(k.vao,".targetVAO",c.scopeVAO.append(a,g));b("vert");b("frag");0<r(c.state).length&&(g(f,".dirty=true;"),g.exit(f,".dirty=true;"));g("a1(",a.shared.context,",a0,",a.batchId,");")}function F(a){if("object"===typeof a&&!w(a)){for(var c=r(a),b=0;b<c.length;++b)if(C.isDynamic(a[c[b]]))return!0;
return!1}}function y(a,c,g){function k(a,c){d.forEach(function(b){var g=f[b];C.isDynamic(g)&&(g=a.invoke(c,g),c(q,".",b,"=",g,";"))})}var f=c["static"][g];if(f&&F(f)){var E=a.global,d=r(f),h=!1,l=!1,e=!1,q=a.global.def("{}");d.forEach(function(c){var g=f[c];if(C.isDynamic(g))"function"===typeof g&&(g=f[c]=C.unbox(g)),c=b(g,null),h=h||c.thisDep,e=e||c.propDep,l=l||c.contextDep;else{E(q,".",c,"=");switch(typeof g){case "number":E(g);break;case "string":E('"',g,'"');break;case "object":Array.isArray(g)&&
E("[",g.join(),"]");break;default:E(a.link(g))}E(";")}});c.dynamic[g]=new C.DynamicVariable(4,{thisDep:h,contextDep:l,propDep:e,ref:q,append:k});delete c["static"][g]}}var ia=A.Record,va={add:32774,subtract:32778,"reverse subtract":32779};D.ext_blend_minmax&&(va.min=32775,va.max=32776);var R=D.angle_instanced_arrays,ha=D.webgl_draw_buffers,ra=D.oes_vertex_array_object,H={dirty:!0,profile:Z.profile},x={},da=[],E={},za={};N("dither",3024);N("blend.enable",3042);U("blend.color","blendColor",[0,0,0,0]);
U("blend.equation","blendEquationSeparate",[32774,32774]);U("blend.func","blendFuncSeparate",[1,0,1,0]);N("depth.enable",2929,!0);U("depth.func","depthFunc",513);U("depth.range","depthRange",[0,1]);U("depth.mask","depthMask",!0);U("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);U("cull.face","cullFace",1029);U("frontFace","frontFace",2305);U("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);U("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",
32928);U("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);U("stencil.mask","stencilMask",-1);U("stencil.func","stencilFunc",[519,0,-1]);U("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);U("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);U("scissor.box","scissor",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);U("viewport","viewport",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);var la={gl:G,context:na,strings:q,next:x,current:H,
draw:Cb,elements:c,buffer:Y,shader:xb,attributes:A.state,vao:A,uniforms:oa,framebuffer:ba,extensions:D,timer:Na,isBufferArgs:e},k={primTypes:B,compareFuncs:t,blendFuncs:W,blendEquations:va,stencilOps:h,glTypes:z,orientationType:l};a.optional(function(){la.isArrayLike=w});ha&&(k.backBuffer=[1029],k.drawBuffer=Q(O.maxDrawbuffers,function(a){return 0===a?[0]:Q(a,function(a){return 36064+a})}));var kc=0;return{next:x,current:H,procs:function(){var a=sa(),c=a.proc("poll"),b=a.proc("refresh"),g=a.block();
c(g);b(g);var k=a.shared,f=k.gl,d=k.next,h=k.current;g(h,".dirty=false;");ib(a,c);ib(a,b,null,!0);var l;R&&(l=a.link(R));D.oes_vertex_array_object&&b(a.link(D.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var e=0;e<O.maxAttributes;++e){var q=b.def(k.attributes,"[",e,"]"),p=a.cond(q,".buffer");p.then(f,".enableVertexAttribArray(",e,");",f,".bindBuffer(",34962,",",q,".buffer.buffer);",f,".vertexAttribPointer(",e,",",q,".size,",q,".type,",q,".normalized,",q,".stride,",q,".offset);")["else"](f,
".disableVertexAttribArray(",e,");",f,".vertexAttrib4f(",e,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer=null;");b(p);R&&b(l,".vertexAttribDivisorANGLE(",e,",",q,".divisor);")}b(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");r(E).forEach(function(k){var l=E[k],e=g.def(d,".",k),q=a.block();q("if(",e,"){",f,".enable(",l,")}else{",f,".disable(",l,")}",h,".",k,"=",e,";");b(q);c("if(",e,"!==",h,".",k,"){",q,"}")});r(za).forEach(function(k){var E=za[k],l=H[k],e,
q,r=a.block();r(f,".",E,"(");w(l)?(E=l.length,e=a.global.def(d,".",k),q=a.global.def(h,".",k),r(Q(E,function(a){return e+"["+a+"]"}),");",Q(E,function(a){return q+"["+a+"]="+e+"["+a+"];"}).join("")),c("if(",Q(E,function(a){return e+"["+a+"]!=="+q+"["+a+"]"}).join("||"),"){",r,"}")):(e=g.def(d,".",k),q=g.def(h,".",k),r(e,");",h,".",k,"=",e,";"),c("if(",e,"!==",q,"){",r,"}"));b(r)});return a.compile()}(),compile:function(a,c,b,g,k){var f=sa();f.stats=f.link(k);r(c["static"]).forEach(function(a){y(f,
c,a)});P.forEach(function(c){y(f,a,c)});var E=Ha(a,c,b,g,f);ka(f,E);Wc(f,E);Jc(f,E);return u(f.compile(),{destroy:function(){E.shader.program.destroy()}})}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./dynamic":10,"./util/check":22,"./util/codegen":24,"./util/extend":26,"./util/is-array-like":28,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/loop":32,"./util/sorted-object-keys":35}],10:[function(A,S,Ka){function e(f,a){this.id=b++;this.type=f;this.data=a}function p(b){if(0===
b.length)return[];var a=b.charAt(0),f=b.charAt(b.length-1);if(1<b.length&&a===f&&('"'===a||"'"===a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return p(b.substr(0,a.index)).concat(p(a[1])).concat(p(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(f=0;f<a.length;++f)b=b.concat(p(a[f]));return b}function n(b){return"["+p(b).join("][")+
"]"}function I(b,a){if("function"===typeof b)return new e(0,b);if("number"===typeof b||"boolean"===typeof b)return new e(5,b);if(Array.isArray(b))return new e(6,b.map(function(b,f){return I(b,a+"["+f+"]")}));if(b instanceof e)return b;f(!1,"invalid option type in uniform "+a)}var f=A("./util/check"),b=0;S.exports={DynamicVariable:e,define:function(b,a){return new e(b,n(a+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof e},unbox:I,accessor:n}},{"./util/check":22}],
11:[function(A,S,Ka){var e=A("./util/check"),p=A("./util/is-typed-array"),n=A("./util/is-ndarray"),I=A("./util/values"),f=A("./constants/primitives.json"),b=A("./constants/usage.json");S.exports=function(r,a,u,ma){function Q(a){this.id=C++;w[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function G(b,f,w,z,t,h,g){b.buffer.bind();var l;f?((l=g)||p(f)&&(!n(f)||p(f.data))||(l=a.oes_element_index_uint?5125:5123),u._initBuffer(b.buffer,f,w,l,3)):(r.bufferData(34963,h,w),b.buffer.dtype=
l||5121,b.buffer.usage=w,b.buffer.dimension=3,b.buffer.byteLength=h);l=g;if(!g){switch(b.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:e.raise("unsupported type for element array")}b.buffer.dtype=l}b.type=l;e(5125!==l||!!a.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=t;0>f&&(f=b.buffer.byteLength,5123===l?f>>=1:5125===l&&(f>>=2));b.vertCount=f;f=z;0>z&&(f=4,z=b.buffer.dimension,
1===z&&(f=0),2===z&&(f=1),3===z&&(f=4));b.primType=f}function D(a){ma.elementsCount--;e(null!==a.buffer,"must not double destroy elements");delete w[a.id];a.buffer.destroy();a.buffer=null}var w={},C=0,B={uint8:5121,uint16:5123};a.oes_element_index_uint&&(B.uint32=5125);Q.prototype.bind=function(){this.buffer.bind()};var z=[];return{create:function(a,r){function w(a){if(a)if("number"===typeof a)z(a),t.primType=4,t.vertCount=a|0,t.type=5121;else{var g=null,l=35044,r=-1,u=-1,q=0,P=0;if(Array.isArray(a)||
p(a)||n(a))g=a;else if(e.type(a,"object","invalid arguments for elements"),"data"in a&&(g=a.data,e(Array.isArray(g)||p(g)||n(g),"invalid data for element buffer")),"usage"in a&&(e.parameter(a.usage,b,"invalid element buffer usage"),l=b[a.usage]),"primitive"in a&&(e.parameter(a.primitive,f,"invalid element buffer primitive"),r=f[a.primitive]),"count"in a&&(e("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),u=a.count|0),"type"in a&&(e.parameter(a.type,B,"invalid buffer type"),
P=B[a.type]),"length"in a)q=a.length|0;else if(q=u,5123===P||5122===P)q*=2;else if(5125===P||5124===P)q*=4;G(t,g,l,r,u,q,P)}else z(),t.primType=4,t.vertCount=0,t.type=5121;return w}var z=u.create(null,34963,!0),t=new Q(z._buffer);ma.elementsCount++;w(a);w._reglType="elements";w._elements=t;w.subdata=function(a,b){z.subdata(a,b);return w};w.destroy=function(){D(t)};return w},createStream:function(a){var b=z.pop();b||(b=new Q(u.create(null,34963,!0,!1)._buffer));G(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){z.push(a)},
getElements:function(a){return"function"===typeof a&&a._elements instanceof Q?a._elements:null},clear:function(){I(w).forEach(D)}}}},{"./constants/primitives.json":7,"./constants/usage.json":8,"./util/check":22,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/values":37}],12:[function(A,S,Ka){var e=A("./util/sorted-object-keys"),p=A("./util/check");S.exports=function(n,I){function f(a){p.type(a,"string","extension name must be string");a=a.toLowerCase();var f;try{f=b[a]=n.getExtension(a)}catch(e){}return!!f}
for(var b={},r=0;r<I.extensions.length;++r){var a=I.extensions[r];if(!f(a))return I.onDestroy(),I.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}I.optionalExtensions.forEach(f);return{extensions:b,restore:function(){e(b).forEach(function(a){if(b[a]&&!f(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":22,"./util/sorted-object-keys":35}],13:[function(A,S,Ka){var e=A("./util/check"),p=A("./util/values"),
n=A("./util/extend"),I=[6407,6408],f=[];f[6408]=4;f[6407]=3;var b=[];b[5121]=1;b[5126]=4;b[36193]=2;var r=[32854,32855,36194,35907,34842,34843,34836],a={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};S.exports=function(u,ma,Q,G,D,w){function C(a,c,b){this.target=a;this.texture=c;this.renderbuffer=b;var g=a=0;c?(a=c.width,g=c.height):b&&(a=b.width,g=b.height);this.width=a;this.height=g}function B(a){a&&(a.texture&&
a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function z(a,c,b){if(a){if(a.texture){a=a.texture._texture;var g=Math.max(1,a.height);e(Math.max(1,a.width)===c&&g===b,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,e(a.width===c&&a.height===b,"inconsistent width/height for renderbuffer");a.refCount+=1}}function J(a,c){c&&(c.texture?u.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):u.framebufferRenderbuffer(36160,
a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function P(a){var c=3553,b=null,g=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(c=a.target|0));e.type(f,"function","invalid attachment data");a=f._reglType;"texture2d"===a?(b=f,e(3553===c)):"textureCube"===a?(b=f,e(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===a?(g=f,c=36161):e.raise("invalid regl object for attachment");return new C(c,b,g)}function W(a,c,b,g,f){if(b)return a=G.create2D({width:a,height:c,format:g,type:f}),
a._texture.refCount=0,new C(3553,a,null);a=D.create({width:a,height:c,format:g});a._renderbuffer.refCount=0;return new C(36161,null,a)}function A(a){return a&&(a.texture||a.renderbuffer)}function t(a,c,b){a&&(a.texture?a.texture.resize(c,b):a.renderbuffer&&a.renderbuffer.resize(c,b),a.width=c,a.height=b)}function h(){this.id=c++;d[this.id]=this;this.framebuffer=u.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function g(a){a.colorAttachments.forEach(B);B(a.depthAttachment);B(a.stencilAttachment);B(a.depthStencilAttachment)}function l(a){var c=a.framebuffer;e(c,"must not double destroy framebuffer");u.deleteFramebuffer(c);a.framebuffer=null;w.framebufferCount--;delete d[a.id]}function V(c){var b;u.bindFramebuffer(36160,c.framebuffer);var g=c.colorAttachments;for(b=0;b<g.length;++b)J(36064+b,g[b]);for(b=g.length;b<Q.maxColorAttachments;++b)u.framebufferTexture2D(36160,36064+b,3553,null,0);u.framebufferTexture2D(36160,
33306,3553,null,0);u.framebufferTexture2D(36160,36096,3553,null,0);u.framebufferTexture2D(36160,36128,3553,null,0);J(36096,c.depthAttachment);J(36128,c.stencilAttachment);J(33306,c.depthStencilAttachment);c=u.checkFramebufferStatus(36160);u.isContextLost()||36053===c||e.raise("framebuffer configuration not supported, status = "+a[c]);u.bindFramebuffer(36160,q.next?q.next.framebuffer:null);q.cur=q.next;u.getError()}function X(a,c){function d(a,c){var l;e(q.next!==p,"can not update framebuffer which is currently in use");
var h=0,t=0,u=!0,w=!0;l=null;var n=!0,B="rgba",G="uint8",D=1,C=null,v=null,ba=null,J=!1;if("number"===typeof a)h=a|0,t=c|0||h;else if(a){e.type(a,"object","invalid arguments for framebuffer");"shape"in a?(t=a.shape,e(Array.isArray(t)&&2<=t.length,"invalid shape for framebuffer"),h=t[0],t=t[1]):("radius"in a&&(h=t=a.radius),"width"in a&&(h=a.width),"height"in a&&(t=a.height));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&e(1===l.length||ma.webgl_draw_buffers,"multiple render targets not supported");
if(!l){"colorCount"in a&&(D=a.colorCount|0,e(0<D,"invalid color buffer count"));"colorTexture"in a&&(n=!!a.colorTexture,B="rgba4");if("colorType"in a){G=a.colorType;if(n)e(ma.oes_texture_float||!("float"===G||"float32"===G),"you must enable OES_texture_float in order to use floating point framebuffer objects"),e(ma.oes_texture_half_float||!("half float"===G||"float16"===G),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===G||
"float16"===G)e(ma.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),B="rgba16f";else if("float"===G||"float32"===G)e(ma.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),B="rgba32f";e.oneOf(G,Y,"invalid color type")}"colorFormat"in a&&(B=a.colorFormat,0<=pa.indexOf(B)?n=!0:0<=O.indexOf(B)?n=!1:e.optional(function(){if(n)e.oneOf(a.colorFormat,pa,"invalid color format for texture");
else e.oneOf(a.colorFormat,O,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)J=!(!a.depthTexture&&!a.depthStencilTexture),e(!J||ma.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?u=a.depth:(C=a.depth,w=!1));"stencil"in a&&("boolean"===typeof a.stencil?w=a.stencil:(v=a.stencil,u=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?u=w=a.depthStencil:(ba=a.depthStencil,w=u=!1))}else h=t=1;
var X=null,oa=null,S=null,Ha=null;if(Array.isArray(l))X=l.map(P);else if(l)X=[P(l)];else for(X=Array(D),l=0;l<D;++l)X[l]=W(h,t,n,B,G);e(ma.webgl_draw_buffers||1>=X.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");e(X.length<=Q.maxColorAttachments,"too many color attachments, not supported");h=h||X[0].width;t=t||X[0].height;C?oa=P(C):u&&!w&&(oa=W(h,t,J,"depth","uint32"));v?S=P(v):w&&!u&&(S=W(h,t,!1,"stencil","uint8"));ba?Ha=P(ba):!C&&!v&&w&&u&&(Ha=
W(h,t,J,"depth stencil","depth stencil"));e(1>=!!C+!!v+!!ba,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");u=null;for(l=0;l<X.length;++l)z(X[l],h,t),e(!X[l]||X[l].texture&&0<=I.indexOf(X[l].texture._texture.format)||X[l].renderbuffer&&0<=r.indexOf(X[l].renderbuffer._renderbuffer.format),"framebuffer color attachment "+l+" is invalid"),X[l]&&X[l].texture&&(w=f[X[l].texture._texture.format]*b[X[l].texture._texture.type],null===u?u=w:e(u===w,"all color attachments much have the same number of bits per pixel."));
z(oa,h,t);e(!oa||oa.texture&&6402===oa.texture._texture.format||oa.renderbuffer&&33189===oa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");z(S,h,t);e(!S||S.renderbuffer&&36168===S.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");z(Ha,h,t);e(!Ha||Ha.texture&&34041===Ha.texture._texture.format||Ha.renderbuffer&&34041===Ha.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");g(p);p.width=
h;p.height=t;p.colorAttachments=X;p.depthAttachment=oa;p.stencilAttachment=S;p.depthStencilAttachment=Ha;d.color=X.map(A);d.depth=A(oa);d.stencil=A(S);d.depthStencil=A(Ha);d.width=p.width;d.height=p.height;V(p);return d}var p=new h;w.framebufferCount++;d(a,c);return n(d,{resize:function(a,c){e(q.next!==p,"can not resize a framebuffer which is currently in use");var b=Math.max(a|0,1),g=Math.max(c|0||b,1);if(b===p.width&&g===p.height)return d;for(var f=p.colorAttachments,l=0;l<f.length;++l)t(f[l],b,
g);t(p.depthAttachment,b,g);t(p.stencilAttachment,b,g);t(p.depthStencilAttachment,b,g);p.width=d.width=b;p.height=d.height=g;V(p);return d},_reglType:"framebuffer",_framebuffer:p,destroy:function(){l(p);g(p)},use:function(a){q.setFBO({framebuffer:d},a)}})}var q={cur:null,next:null,dirty:!1,setFBO:null},pa=["rgba"],O=["rgba4","rgb565","rgb5 a1"];ma.ext_srgb&&O.push("srgba");ma.ext_color_buffer_half_float&&O.push("rgba16f","rgb16f");ma.webgl_color_buffer_float&&O.push("rgba32f");var Y=["uint8"];ma.oes_texture_half_float&&
Y.push("half float","float16");ma.oes_texture_float&&Y.push("float","float32");var c=0,d={};return n(q,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof h)?a:null},create:X,createCube:function(a){function c(a){var g;e(0>b.indexOf(q.next),"can not update framebuffer which is currently in use");var f={color:null},d=0,l=null;g="rgba";var h="uint8",p=1;if("number"===typeof a)d=a|0;else if(a){e.type(a,"object","invalid arguments for framebuffer");
"shape"in a?(d=a.shape,e(Array.isArray(d)&&2<=d.length,"invalid shape for framebuffer"),e(d[0]===d[1],"cube framebuffer must be square"),d=d[0]):("radius"in a&&(d=a.radius|0),"width"in a?(d=a.width|0,"height"in a&&e(a.height===d,"must be square")):"height"in a&&(d=a.height|0));if("color"in a||"colors"in a)l=a.color||a.colors,Array.isArray(l)&&e(1===l.length||ma.webgl_draw_buffers,"multiple render targets not supported");l||("colorCount"in a&&(p=a.colorCount|0,e(0<p,"invalid color buffer count")),
"colorType"in a&&(e.oneOf(a.colorType,Y,"invalid color type"),h=a.colorType),"colorFormat"in a&&(g=a.colorFormat,e.oneOf(a.colorFormat,pa,"invalid color format for texture")));"depth"in a&&(f.depth=a.depth);"stencil"in a&&(f.stencil=a.stencil);"depthStencil"in a&&(f.depthStencil=a.depthStencil)}else d=1;if(l)if(Array.isArray(l))for(a=[],g=0;g<l.length;++g)a[g]=l[g];else a=[l];else for(a=Array(p),l={radius:d,format:g,type:h},g=0;g<p;++g)a[g]=G.createCube(l);f.color=Array(a.length);for(g=0;g<a.length;++g)p=
a[g],e("function"===typeof p&&"textureCube"===p._reglType,"invalid cube map"),d=d||p.width,e(p.width===d&&p.height===d,"invalid cube map shape"),f.color[g]={target:34069,data:a[g]};for(g=0;6>g;++g){for(p=0;p<a.length;++p)f.color[p].target=34069+g;0<g&&(f.depth=b[0].depth,f.stencil=b[0].stencil,f.depthStencil=b[0].depthStencil);if(b[g])b[g](f);else b[g]=X(f)}return n(c,{width:d,height:d,color:a})}var b=Array(6);c(a);return n(c,{faces:b,resize:function(a){var g=a|0;e(0<g&&g<=Q.maxCubeMapSize,"invalid radius for cube fbo");
if(g===c.width)return c;var f=c.color;for(a=0;a<f.length;++a)f[a].resize(g);for(a=0;6>a;++a)b[a].resize(g);c.width=c.height=g;return c},_reglType:"framebufferCube",destroy:function(){b.forEach(function(a){a.destroy()})}})},clear:function(){p(d).forEach(l)},restore:function(){q.cur=null;q.next=null;q.dirty=!0;p(d).forEach(function(a){a.framebuffer=u.createFramebuffer();V(a)})}})}},{"./util/check":22,"./util/extend":26,"./util/values":37}],14:[function(A,S,Ka){var e=A("./util/sorted-object-keys"),p=
A("./util/pool");S.exports=function(n,I){var f=1;I.ext_texture_filter_anisotropic&&(f=n.getParameter(34047));var b=1,r=1;I.webgl_draw_buffers&&(b=n.getParameter(34852),r=n.getParameter(36063));var a=!!I.oes_texture_float;if(a){a=n.createTexture();n.bindTexture(3553,a);n.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=n.createFramebuffer();n.bindFramebuffer(36160,u);n.framebufferTexture2D(36160,36064,3553,a,0);n.bindTexture(3553,null);if(36053!==n.checkFramebufferStatus(36160))a=!1;else{n.viewport(0,
0,1,1);n.clearColor(1,0,0,1);n.clear(16384);var ma=p.allocType(5126,4);n.readPixels(0,0,1,1,6408,5126,ma);n.getError()?a=!1:(n.deleteFramebuffer(u),n.deleteTexture(a),a=1===ma[0]);p.freeType(ma)}}ma=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ma=n.createTexture(),u=p.allocType(5121,36),n.activeTexture(33984),n.bindTexture(34067,ma),n.texImage2D(34069,0,6408,3,3,0,6408,5121,u),p.freeType(u),n.bindTexture(34067,
null),n.deleteTexture(ma),ma=!n.getError());return{colorBits:[n.getParameter(3410),n.getParameter(3411),n.getParameter(3412),n.getParameter(3413)],depthBits:n.getParameter(3414),stencilBits:n.getParameter(3415),subpixelBits:n.getParameter(3408),extensions:e(I).filter(function(a){return!!I[a]}),maxAnisotropic:f,maxDrawbuffers:b,maxColorAttachments:r,pointSizeDims:n.getParameter(33901),lineWidthDims:n.getParameter(33902),maxViewportDims:n.getParameter(3386),maxCombinedTextureUnits:n.getParameter(35661),
maxCubeMapSize:n.getParameter(34076),maxRenderbufferSize:n.getParameter(34024),maxTextureUnits:n.getParameter(34930),maxTextureSize:n.getParameter(3379),maxAttributes:n.getParameter(34921),maxVertexUniforms:n.getParameter(36347),maxVertexTextureUnits:n.getParameter(35660),maxVaryingVectors:n.getParameter(36348),maxFragmentUniforms:n.getParameter(36349),glsl:n.getParameter(35724),renderer:n.getParameter(7937),vendor:n.getParameter(7936),version:n.getParameter(7938),readFloat:a,npotTextureCube:ma}}},
{"./util/pool":33,"./util/sorted-object-keys":35}],15:[function(A,S,Ka){var e=A("./util/check"),p=A("./util/is-typed-array");S.exports=function(n,I,f,b,r,a,u){function ma(G){var D;null===I.next?(e(r.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),D=5121):(e(null!==I.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),D=I.next.colorAttachments[0].texture._texture.type,e.optional(function(){a.oes_texture_float?
(e(5121===D||5126===D,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===D&&e(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):e(5121===D,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var w=0,C=0,B=b.framebufferWidth,z=b.framebufferHeight,Q=null;p(G)?Q=G:G&&(e.type(G,"object","invalid arguments to regl.read()"),w=G.x|0,C=G.y|0,e(0<=w&&w<b.framebufferWidth,
"invalid x offset for regl.read"),e(0<=C&&C<b.framebufferHeight,"invalid y offset for regl.read"),B=(G.width||b.framebufferWidth-w)|0,z=(G.height||b.framebufferHeight-C)|0,Q=G.data||null);Q&&(5121===D?e(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===D&&e(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));e(0<B&&B+w<=b.framebufferWidth,"invalid width for read pixels");e(0<z&&z+C<=
b.framebufferHeight,"invalid height for read pixels");f();G=B*z*4;Q||(5121===D?Q=new Uint8Array(G):5126===D&&(Q=Q||new Float32Array(G)));e.isTypedArray(Q,"data buffer for regl.read() must be a typedarray");e(Q.byteLength>=G,"data buffer for regl.read() too small");n.pixelStorei(3333,4);n.readPixels(w,C,B,z,6408,D,Q);return Q}function Q(a){var b;I.setFBO({framebuffer:a.framebuffer},function(){b=ma(a)});return b}return function(a){return a&&"framebuffer"in a?Q(a):ma(a)}}},{"./util/check":22,"./util/is-typed-array":31}],
16:[function(A,S,Ka){var e=A("./util/sorted-object-keys"),p=A("./util/check"),n=A("./util/values"),I=[];I[32854]=2;I[32855]=2;I[36194]=2;I[33189]=2;I[36168]=1;I[34041]=4;I[35907]=4;I[34836]=16;I[34842]=8;I[34843]=6;S.exports=function(f,b,r,a,u){function ma(a){this.id=w++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;u.profile&&(this.stats={size:0})}function Q(b){var e=b.renderbuffer;p(e,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(e);
b.renderbuffer=null;b.refCount=0;delete C[b.id];a.renderbufferCount--}var G={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(G.srgba=35907);b.ext_color_buffer_half_float&&(G.rgba16f=34842,G.rgb16f=34843);b.webgl_color_buffer_float&&(G.rgba32f=34836);var D=[];e(G).forEach(function(a){D[G[a]]=a});var w=0,C={};ma.prototype.decRef=function(){0>=--this.refCount&&Q(this)};u.profile&&(a.getTotalRenderbufferSize=function(){var a=0;e(C).forEach(function(b){a+=
C[b].stats.size});return a});return{create:function(b,e){function w(a,b){var e=0,h=0,g=32854;"object"===typeof a&&a?("shape"in a?(h=a.shape,p(Array.isArray(h)&&2<=h.length,"invalid renderbuffer shape"),e=h[0]|0,h=h[1]|0):("radius"in a&&(e=h=a.radius|0),"width"in a&&(e=a.width|0),"height"in a&&(h=a.height|0)),"format"in a&&(p.parameter(a.format,G,"invalid renderbuffer format"),g=G[a.format])):"number"===typeof a?(e=a|0,h="number"===typeof b?b|0:e):a?p.raise("invalid arguments to renderbuffer constructor"):
e=h=1;p(0<e&&0<h&&e<=r.maxRenderbufferSize&&h<=r.maxRenderbufferSize,"invalid renderbuffer size");if(e!==n.width||h!==n.height||g!==n.format)return w.width=n.width=e,w.height=n.height=h,n.format=g,f.bindRenderbuffer(36161,n.renderbuffer),f.renderbufferStorage(36161,g,e,h),p(0===f.getError(),"invalid render buffer format"),u.profile&&(n.stats.size=I[n.format]*n.width*n.height),w.format=D[n.format],w}var n=new ma(f.createRenderbuffer());C[n.id]=n;a.renderbufferCount++;w(b,e);w.resize=function(a,b){var e=
a|0,h=b|0||e;if(e===n.width&&h===n.height)return w;p(0<e&&0<h&&e<=r.maxRenderbufferSize&&h<=r.maxRenderbufferSize,"invalid renderbuffer size");w.width=n.width=e;w.height=n.height=h;f.bindRenderbuffer(36161,n.renderbuffer);f.renderbufferStorage(36161,n.format,e,h);p(0===f.getError(),"invalid render buffer format");u.profile&&(n.stats.size=I[n.format]*n.width*n.height);return w};w._reglType="renderbuffer";w._renderbuffer=n;u.profile&&(w.stats=n.stats);w.destroy=function(){n.decRef()};return w},clear:function(){n(C).forEach(Q)},
restore:function(){n(C).forEach(function(a){a.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,a.renderbuffer);f.renderbufferStorage(36161,a.format,a.width,a.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":22,"./util/sorted-object-keys":35,"./util/values":37}],17:[function(A,S,Ka){var e=A("./util/sorted-object-keys"),p=A("./util/check"),n=A("./util/extend"),I=A("./util/values");S.exports=function(f,b,r,a){function u(a,b,f,e){this.name=a;this.id=b;this.location=f;this.info=
e}function ma(a,b){for(var f=0;f<a.length;++f)if(a[f].id===b.id){a[f].location=b.location;return}a.push(b)}function Q(a,e,r){var t=35632===a?w:C,h=t[e];if(!h){var g=b.str(e),h=f.createShader(a);f.shaderSource(h,g);f.compileShader(h);p.shaderError(f,h,g,a,r);t[e]=h}return h}function G(b,f){this.id=J++;this.fragId=b;this.vertId=f;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function D(e,r,w){var t;t=Q(35632,e.fragId);
var h=Q(35633,e.vertId),g=e.program=f.createProgram();f.attachShader(g,t);f.attachShader(g,h);if(w)for(t=0;t<w.length;++t)h=w[t],f.bindAttribLocation(g,h[0],h[1]);f.linkProgram(g);p.linkError(f,g,b.str(e.fragId),b.str(e.vertId),r);w=f.getProgramParameter(g,35718);a.profile&&(e.stats.uniformsCount=w);h=e.uniforms;for(t=0;t<w;++t)if(r=f.getActiveUniform(g,t))if(1<r.size)for(var l=0;l<r.size;++l){var n=r.name.replace("[0]","["+l+"]");ma(h,new u(n,b.id(n),f.getUniformLocation(g,n),r))}else ma(h,new u(r.name,
b.id(r.name),f.getUniformLocation(g,r.name),r));w=f.getProgramParameter(g,35721);a.profile&&(e.stats.attributesCount=w);e=e.attributes;for(t=0;t<w;++t)(r=f.getActiveAttrib(g,t))&&ma(e,new u(r.name,b.id(r.name),f.getAttribLocation(g,r.name),r))}var w={},C={},B={},z=[],J=0;a.profile&&(r.getMaxUniformsCount=function(){var a=0;z.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},r.getMaxAttributesCount=function(){var a=0;z.forEach(function(b){b.stats.attributesCount>a&&
(a=b.stats.attributesCount)});return a});return{clear:function(){var a=f.deleteShader.bind(f);I(w).forEach(a);w={};I(C).forEach(a);C={};z.forEach(function(a){f.deleteProgram(a.program)});z.length=0;B={};r.shaderCount=0},program:function(a,b,u,t){p.command(0<=a,"missing vertex shader",u);p.command(0<=b,"missing fragment shader",u);var h=B[b];h||(h=B[b]={});var g=h[a];if(g&&(g.refCount++,!t))return g;var l=new G(b,a);r.shaderCount++;D(l,u,t);g||(h[a]=l);z.push(l);return n(l,{destroy:function(){l.refCount--;
if(0>=l.refCount){f.deleteProgram(l.program);var a=z.indexOf(l);z.splice(a,1);r.shaderCount--}0>=h[l.vertId].refCount&&(f.deleteShader(C[l.vertId]),delete C[l.vertId],delete B[l.fragId][l.vertId]);e(B[l.fragId]).length||(f.deleteShader(w[l.fragId]),delete w[l.fragId],delete B[l.fragId])}})},restore:function(){w={};C={};for(var a=0;a<z.length;++a)D(z[a],null,z[a].attributes.map(function(a){return[a.location,a.name]}))},shader:Q,frag:-1,vert:-1}}},{"./util/check":22,"./util/extend":26,"./util/sorted-object-keys":35,
"./util/values":37}],18:[function(A,S,Ka){S.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],19:[function(A,S,Ka){S.exports=function(){var e={"":0},p=[""];return{id:function(n){var I=e[n];if(I)return I;I=e[n]=p.length;p.push(n);return I},str:function(e){return p[e]}}}},{}],20:[function(A,S,Ka){function e(a){return"[object "+a+"]"}function p(a){return Array.isArray(a)&&(0===a.length||
"number"===typeof a[0])}function n(a){return Array.isArray(a)&&0!==a.length&&B(a[0])?!0:!1}function I(a){return Object.prototype.toString.call(a)}function f(a){if(!a)return!1;var b=I(a);return 0<=pa.indexOf(b)?!0:p(a)||n(a)||D(a)}function b(a,b){36193===a.type?(a.data=C(b),w.freeType(b)):a.data=b}function r(a,b,g,f,l,e){a="undefined"!==typeof Y[a]?Y[a]:t[a]*O[b];e&&(a*=6);if(l){for(f=0;1<=g;)f+=a*g*g,g/=2;return f}return a*g*f}var a=A("./util/sorted-object-keys"),u=A("./util/check"),ma=A("./util/extend"),
Q=A("./util/values"),G=A("./util/is-typed-array"),D=A("./util/is-ndarray"),w=A("./util/pool"),C=A("./util/to-half-float"),B=A("./util/is-array-like"),z=A("./util/flatten"),J=A("./util/is-pow2");Ka=A("./constants/arraytypes.json");var P=A("./constants/arraytypes.json"),W=[9984,9986,9985,9987],Qd=[0,6409,6410,6407,6408],t={};t[6409]=t[6406]=t[6402]=1;t[34041]=t[6410]=2;t[6407]=t[35904]=3;t[6408]=t[35906]=4;var h=e("HTMLCanvasElement"),g=e("OffscreenCanvas"),l=e("CanvasRenderingContext2D"),V=e("ImageBitmap"),
X=e("HTMLImageElement"),q=e("HTMLVideoElement"),pa=a(Ka).concat([h,g,l,V,X,q]),O=[];O[5121]=1;O[5126]=4;O[36193]=2;O[5123]=2;O[5125]=4;var Y=[];Y[32854]=2;Y[32855]=2;Y[36194]=2;Y[34041]=4;Y[33776]=.5;Y[33777]=.5;Y[33778]=1;Y[33779]=1;Y[35986]=.5;Y[35987]=1;Y[34798]=1;Y[35840]=.5;Y[35841]=.25;Y[35842]=.5;Y[35843]=.25;Y[36196]=.5;S.exports=function(c,d,e,O,A,Y,pa){function na(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=
1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Na(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Z(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(u.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);
"flipY"in b&&(u.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(u.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(u.parameter(b.colorSpace,wc,"invalid colorSpace"),a.colorSpace=wc[b.colorSpace]);if("type"in b){var c=b.type;u(d.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");u(d.oes_texture_half_float||!("half float"===
c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");u(d.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");u.parameter(c,ca,"invalid texture type");a.type=ca[c]}var g=a.width,f=a.height,l=a.channels,c=!1;"shape"in b?(u(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),g=b.shape[0],f=b.shape[1],3===
b.shape.length&&(l=b.shape[2],u(0<l&&4>=l,"invalid number of channels"),c=!0),u(0<=g&&g<=e.maxTextureSize,"invalid width"),u(0<=f&&f<=e.maxTextureSize,"invalid height")):("radius"in b&&(g=f=b.radius,u(0<=g&&g<=e.maxTextureSize,"invalid radius")),"width"in b&&(g=b.width,u(0<=g&&g<=e.maxTextureSize,"invalid width")),"height"in b&&(f=b.height,u(0<=f&&f<=e.maxTextureSize,"invalid height")),"channels"in b&&(l=b.channels,u(0<l&&4>=l,"invalid number of channels"),c=!0));a.width=g|0;a.height=f|0;a.channels=
l|0;g=!1;"format"in b&&(g=b.format,u(d.webgl_depth_texture||!("depth"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),u.parameter(g,M,"invalid texture format"),f=a.internalformat=M[g],a.format=va[f],g in ca&&!("type"in b)&&(a.type=ca[g]),g in ka&&(a.compressed=!0),g=!0);!c&&g?a.channels=t[a.format]:c&&!g?a.channels!==Qd[a.format]&&(a.format=a.internalformat=Qd[a.channels]):g&&c&&u(a.channels===t[a.format],"number of channels inconsistent with specified format")}}
function K(a){c.pixelStorei(37440,a.flipY);c.pixelStorei(37441,a.premultiplyAlpha);c.pixelStorei(37443,a.colorSpace);c.pixelStorei(3317,a.unpackAlignment)}function N(){na.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function U(a,c){var d=null;f(c)?d=c:c&&(u.type(c,"object","invalid pixel data type"),Z(a,c),"x"in c&&(a.xOffset=c.x|0),"y"in c&&(a.yOffset=c.y|0),f(c.data)&&(d=c.data));u(!a.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(c.copy){u(!d,"can not specify copy and data field for the same texture");var k=A.viewportWidth,r=A.viewportHeight;a.width=a.width||k-a.xOffset;a.height=a.height||r-a.yOffset;a.needsCopy=!0;u(0<=a.xOffset&&a.xOffset<k&&0<=a.yOffset&&a.yOffset<r&&0<a.width&&a.width<=k&&0<a.height&&a.height<=r,"copy texture read out of bounds")}else if(!d)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(G(d))a.channels=a.channels||4,a.data=d,"type"in c||5121!==a.type||(a.type=P[Object.prototype.toString.call(d)]|
0);else if(p(d)){a.channels=a.channels||4;k=d;r=k.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:r=w.allocType(a.type,r);r.set(k);a.data=r;break;case 36193:a.data=C(k);break;default:u.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(D(d)){k=d.data;Array.isArray(k)||5121!==a.type||(a.type=P[Object.prototype.toString.call(k)]|0);var r=d.shape,t=d.stride,m,v,x,y;3===r.length?(x=r[2],y=t[2]):(u(2===r.length,"invalid ndarray pixel data, must be 2 or 3D"),
y=x=1);m=r[0];v=r[1];r=t[0];t=t[1];a.alignment=1;a.width=m;a.height=v;a.channels=x;a.format=a.internalformat=Qd[x];a.needsFree=!0;m=y;d=d.offset;x=a.width;y=a.height;v=a.channels;for(var M=w.allocType(36193===a.type?5126:a.type,x*y*v),H=0,da=0;da<y;++da)for(var F=0;F<x;++F)for(var ca=0;ca<v;++ca)M[H++]=k[r*F+t*da+m*ca+d];b(a,M)}else if(I(d)===h||I(d)===g||I(d)===l)I(d)===h||I(d)===g?a.element=d:a.element=d.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(I(d)===V)a.element=
d,a.width=d.width,a.height=d.height,a.channels=4;else if(I(d)===X)a.element=d,a.width=d.naturalWidth,a.height=d.naturalHeight,a.channels=4;else if(I(d)===q)a.element=d,a.width=d.videoWidth,a.height=d.videoHeight,a.channels=4;else if(n(d)){k=a.width||d[0].length;r=a.height||d.length;t=a.channels;t=B(d[0][0])?t||d[0][0].length:t||1;m=z.shape(d);x=1;for(y=0;y<m.length;++y)x*=m[y];x=w.allocType(36193===a.type?5126:a.type,x);z.flatten(d,m,"",x);b(a,x);a.alignment=1;a.width=k;a.height=r;a.channels=t;a.format=
a.internalformat=Qd[t];a.needsFree=!0}5126===a.type?u(0<=e.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&u(0<=e.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function sa(a,b,g,f,d){var l=a.element,m=a.data,e=a.internalformat,h=a.format,q=a.type,p=a.width,r=a.height;K(a);l?c.texSubImage2D(b,d,g,f,h,q,l):a.compressed?c.compressedTexSubImage2D(b,d,g,f,e,p,r,m):a.needsCopy?(O(),c.copyTexSubImage2D(b,d,
g,f,a.xOffset,a.yOffset,p,r)):c.texSubImage2D(b,d,g,f,p,r,h,q,m)}function L(){return R.pop()||new N}function S(a){a.needsFree&&w.freeType(a.data);N.call(a);R.push(a)}function $a(){na.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function T(a,b,c){var g=a.images[0]=L();a.mipmask=1;g.width=a.width=b;g.height=a.height=c;g.channels=a.channels=4}function v(a,b){var c=null;if(f(b))c=a.images[0]=L(),Na(c,a),U(c,b),a.mipmask=1;else if(Z(a,b),Array.isArray(b.mipmap))for(var g=
b.mipmap,d=0;d<g.length;++d)c=a.images[d]=L(),Na(c,a),c.width>>=d,c.height>>=d,U(c,g[d]),a.mipmask|=1<<d;else c=a.images[0]=L(),Na(c,a),U(c,b),a.mipmask=1;Na(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||u(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ja(a,b){for(var g=a.images,f=0;f<g.length&&g[f];++f){var d=g[f],l=
b,m=f,e=d.element,h=d.data,q=d.internalformat,p=d.format,r=d.type,t=d.width,x=d.height;K(d);e?c.texImage2D(l,m,p,p,r,e):d.compressed?c.compressedTexImage2D(l,m,q,t,x,0,h):d.needsCopy?(O(),c.copyTexImage2D(l,m,p,d.xOffset,d.yOffset,t,x,0)):c.texImage2D(l,m,p,t,x,0,p,r,h||null)}}function ea(){var a=ha.pop()||new $a;na.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Ea(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&S(b[c]),b[c]=null;ha.push(a)}function Oa(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function dc(a,b){if("min"in b){var c=b.min;u.parameter(c,ud);a.minFilter=ud[c];0<=W.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(c=b.mag,u.parameter(c,lc),a.magFilter=lc[c]);var c=a.wrapS,g=a.wrapT;if("wrap"in b){var f=b.wrap;"string"===typeof f?(u.parameter(f,pc),c=g=pc[f]):Array.isArray(f)&&(u.parameter(f[0],pc),u.parameter(f[1],pc),c=pc[f[0]],g=pc[f[1]])}else"wrapS"in b&&(c=b.wrapS,
u.parameter(c,pc),c=pc[c]),"wrapT"in b&&(g=b.wrapT,u.parameter(g,pc),g=pc[g]);a.wrapS=c;a.wrapT=g;"anisotropic"in b&&(c=b.anisotropic,u("number"===typeof c&&1<=c&&c<=e.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":u.parameter(b.mipmap,ec,"invalid mipmap hint");a.mipmapHint=ec[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":u(Array.isArray(b.mipmap),"invalid mipmap type");
a.genMipmaps=!1;c=!0;break;default:u.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ha(a,b){c.texParameteri(b,10241,a.minFilter);c.texParameteri(b,10240,a.magFilter);c.texParameteri(b,10242,a.wrapS);c.texParameteri(b,10243,a.wrapT);d.ext_texture_filter_anisotropic&&c.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(b))}function aa(a){na.call(this);this.mipmask=0;this.internalformat=6408;this.id=ra++;this.refCount=1;this.target=
a;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Oa;pa.profile&&(this.stats={size:0})}function ib(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function ga(){var a=da[0];a?c.bindTexture(a.target,a.texture):c.bindTexture(3553,null)}function qa(a){var b=a.texture;u(b,"must not double destroy texture");var g=a.unit,f=a.target;0<=g&&(c.activeTexture(33984+g),c.bindTexture(f,null),da[g]=null);c.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=
0;delete H[a.id];Y.textureCount--}var ec={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,clamp:33071,mirror:33648},lc={nearest:9728,linear:9729},ud=ma({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},lc),wc={none:0,browser:37444},ca={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},M={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},
ka={};d.ext_srgb&&(M.srgb=35904,M.srgba=35906);d.oes_texture_float&&(ca.float32=ca["float"]=5126);d.oes_texture_half_float&&(ca.float16=ca["half float"]=36193);d.webgl_depth_texture&&(ma(M,{depth:6402,"depth stencil":34041}),ma(ca,{uint16:5123,uint32:5125,"depth stencil":34042}));d.webgl_compressed_texture_s3tc&&ma(ka,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});d.webgl_compressed_texture_atc&&ma(ka,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});d.webgl_compressed_texture_pvrtc&&ma(ka,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});d.webgl_compressed_texture_etc1&&(ka["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(c.getParameter(34467));a(ka).forEach(function(a){var b=ka[a];0<=Ca.indexOf(b)&&(M[a]=b)});var Gb=a(M);e.textureFormats=Gb;var Jc=[];a(M).forEach(function(a){Jc[M[a]]=a});var Wc=[];a(ca).forEach(function(a){Wc[ca[a]]=a});var F=[];
a(lc).forEach(function(a){F[lc[a]]=a});var y=[];a(ud).forEach(function(a){y[ud[a]]=a});var ia=[];a(pc).forEach(function(a){ia[pc[a]]=a});var va=Gb.reduce(function(a,b){var c=M[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||d.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),R=[],ha=[],ra=0,H={},x=e.maxTextureUnits,da=Array(x).map(function(){return null});ma(aa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>
a){for(var b=0;b<x;++b){var g=da[b];if(g){if(0<g.bindCount)continue;g.unit=-1}da[b]=this;a=b;break}a>=x&&u.raise("insufficient number of texture units");pa.profile&&Y.maxTextureUnits<a+1&&(Y.maxTextureUnits=a+1);this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&qa(this)}});pa.profile&&(Y.getTotalTextureSize=function(){var b=0;a(H).forEach(function(a){b+=H[a].stats.size});return b});return{create2D:function(a,
b){function g(a,b){var c=f.texInfo;Oa.call(c);var d=ea();"number"===typeof a?"number"===typeof b?T(d,a|0,b|0):T(d,a|0,a|0):a?(u.type(a,"object","invalid arguments to regl.texture"),dc(c,a),v(d,a)):T(d,1,1);c.genMipmaps&&(d.mipmask=(d.width<<1)-1);f.mipmask=d.mipmask;Na(f,d);u.texture2D(c,d,e);f.internalformat=d.internalformat;g.width=d.width;g.height=d.height;ib(f);ja(d,3553);Ha(c,3553);ga();Ea(d);pa.profile&&(f.stats.size=r(f.internalformat,f.type,d.width,d.height,c.genMipmaps,!1));g.format=Jc[f.internalformat];
g.type=Wc[f.type];g.mag=F[c.magFilter];g.min=y[c.minFilter];g.wrapS=ia[c.wrapS];g.wrapT=ia[c.wrapT];return g}var f=new aa(3553);H[f.id]=f;Y.textureCount++;g(a,b);g.subimage=function(a,b,c,d){u(!!a,"must specify image data");b|=0;c|=0;d|=0;var l=L();Na(l,f);l.width=0;l.height=0;U(l,a);l.width=l.width||(f.width>>d)-b;l.height=l.height||(f.height>>d)-c;u(f.type===l.type&&f.format===l.format&&f.internalformat===l.internalformat,"incompatible format for texture.subimage");u(0<=b&&0<=c&&b+l.width<=f.width&&
c+l.height<=f.height,"texture.subimage write out of bounds");u(f.mipmask&1<<d,"missing mipmap data");u(l.data||l.element||l.needsCopy,"missing image data");ib(f);sa(l,3553,b,c,d);ga();S(l);return g};g.resize=function(a,b){var d=a|0,l=b|0||d;if(d===f.width&&l===f.height)return g;g.width=f.width=d;g.height=f.height=l;ib(f);for(var e=0;f.mipmask>>e;++e){var h=d>>e,q=l>>e;if(!h||!q)break;c.texImage2D(3553,e,f.format,h,q,0,f.format,f.type,null)}ga();pa.profile&&(f.stats.size=r(f.internalformat,f.type,
d,l,!1,!1));return g};g._reglType="texture2d";g._texture=f;pa.profile&&(g.stats=f.stats);g.destroy=function(){f.decRef()};return g},createCube:function(a,b,g,f,d,l){function m(a,b,c,g,f,d){var k,l=h.texInfo;Oa.call(l);for(k=0;6>k;++k)q[k]=ea();if("number"!==typeof a&&a)if("object"===typeof a)if(b)v(q[0],a),v(q[1],b),v(q[2],c),v(q[3],g),v(q[4],f),v(q[5],d);else if(dc(l,a),Z(h,a),"faces"in a)for(a=a.faces,u(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),k=0;6>k;++k)u("object"===
typeof a[k]&&!!a[k],"invalid input for cube map face"),Na(q[k],h),v(q[k],a[k]);else for(k=0;6>k;++k)v(q[k],a);else u.raise("invalid arguments to cube map");else for(a=a|0||1,k=0;6>k;++k)T(q[k],a,a);Na(h,q[0]);u.optional(function(){e.npotTextureCube||u(J(h.width)&&J(h.height),"your browser does not support non power or two texture dimensions")});h.mipmask=l.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;u.textureCube(h,l,q,e);h.internalformat=q[0].internalformat;m.width=q[0].width;m.height=q[0].height;
ib(h);for(k=0;6>k;++k)ja(q[k],34069+k);Ha(l,34067);ga();pa.profile&&(h.stats.size=r(h.internalformat,h.type,m.width,m.height,l.genMipmaps,!0));m.format=Jc[h.internalformat];m.type=Wc[h.type];m.mag=F[l.magFilter];m.min=y[l.minFilter];m.wrapS=ia[l.wrapS];m.wrapT=ia[l.wrapT];for(k=0;6>k;++k)Ea(q[k]);return m}var h=new aa(34067);H[h.id]=h;Y.cubeCount++;var q=Array(6);m(a,b,g,f,d,l);m.subimage=function(a,b,c,g,f){u(!!b,"must specify image data");u("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");
c|=0;g|=0;f|=0;var k=L();Na(k,h);k.width=0;k.height=0;U(k,b);k.width=k.width||(h.width>>f)-c;k.height=k.height||(h.height>>f)-g;u(h.type===k.type&&h.format===k.format&&h.internalformat===k.internalformat,"incompatible format for texture.subimage");u(0<=c&&0<=g&&c+k.width<=h.width&&g+k.height<=h.height,"texture.subimage write out of bounds");u(h.mipmask&1<<f,"missing mipmap data");u(k.data||k.element||k.needsCopy,"missing image data");ib(h);sa(k,34069+a,c,g,f);ga();S(k);return m};m.resize=function(a){a|=
0;if(a!==h.width){m.width=h.width=a;m.height=h.height=a;ib(h);for(var b=0;6>b;++b)for(var g=0;h.mipmask>>g;++g)c.texImage2D(34069+b,g,h.format,a>>g,a>>g,0,h.format,h.type,null);ga();pa.profile&&(h.stats.size=r(h.internalformat,h.type,m.width,m.height,!1,!0));return m}};m._reglType="textureCube";m._texture=h;pa.profile&&(m.stats=h.stats);m.destroy=function(){h.decRef()};return m},clear:function(){for(var a=0;a<x;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),da[a]=null;Q(H).forEach(qa);Y.cubeCount=
0;Y.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<x;++a){var b=da[a];b&&(b.bindCount=0,b.unit=-1,da[a]=null)}Q(H).forEach(function(a){a.texture=c.createTexture();c.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)c.texImage2D(3553,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);else for(var g=0;6>g;++g)c.texImage2D(34069+g,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,
null);Ha(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<x;++a){var b=da[a];b&&(b.bindCount=0,b.unit=-1,da[a]=null);c.activeTexture(33984+a);c.bindTexture(3553,null);c.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":5,"./util/check":22,"./util/extend":26,"./util/flatten":27,"./util/is-array-like":28,"./util/is-ndarray":29,"./util/is-pow2":30,"./util/is-typed-array":31,"./util/pool":33,"./util/sorted-object-keys":35,"./util/to-half-float":36,"./util/values":37}],21:[function(A,
S,Ka){S.exports=function(e,p){function n(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function I(b,f,e){var p=r.pop()||new n;p.startQueryIndex=b;p.endQueryIndex=f;p.sum=0;p.stats=e;a.push(p)}if(!p.ext_disjoint_timer_query)return null;var f=[],b=[],r=[],a=[],u=[],ma=[];return{beginQuery:function(a){var e=f.pop()||p.ext_disjoint_timer_query.createQueryEXT();p.ext_disjoint_timer_query.beginQueryEXT(35007,e);b.push(e);I(b.length-1,b.length,a)},endQuery:function(){p.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:I,update:function(){var e,n;e=b.length;if(0!==e){ma.length=Math.max(ma.length,e+1);u.length=Math.max(u.length,e+1);u[0]=0;var D=ma[0]=0;for(n=e=0;n<b.length;++n){var w=b[n];p.ext_disjoint_timer_query.getQueryObjectEXT(w,34919)?(D+=p.ext_disjoint_timer_query.getQueryObjectEXT(w,34918),f.push(w)):b[e++]=w;u[n+1]=D;ma[n+1]=e}b.length=e;for(n=e=0;n<a.length;++n){var D=a[n],C=D.startQueryIndex,w=D.endQueryIndex;D.sum+=u[w]-u[C];C=ma[C];w=ma[w];w===C?(D.stats.gpuTime+=D.sum/1E6,r.push(D)):
(D.startQueryIndex=C,D.endQueryIndex=w,a[e++]=D)}a.length=e}},getNumPendingQueries:function(){return b.length},clear:function(){f.push.apply(f,b);for(var a=0;a<f.length;a++)p.ext_disjoint_timer_query.deleteQueryEXT(f[a]);b.length=0;f.length=0},restore:function(){b.length=0;f.length=0}}}},{}],22:[function(A,S,Ka){function e(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function p(a){a=Error("(regl) "+a);console.error(a);throw a;}function n(a,b){a||p(b)}function I(a){return a?": "+a:""}function f(a,
b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function b(a,b,f){0>b.indexOf(a)&&p("invalid value"+I(f)+". must be one of: "+b)}function r(a,b){for(a+="";a.length<b;)a=" "+a;return a}function a(){this.name="unknown";this.lines=[];this.index={};
this.hasErrors=!1}function u(a,b){this.number=a;this.line=b;this.errors=[]}function ma(a,b,f){this.file=a;this.line=b;this.message=f}function Q(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function G(){var a=Error(),a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function D(b,
f){var h=b.split("\n"),p=1,q=0,r={unknown:new a,0:new a};r.unknown.name=r[0].name=f||Q();r.unknown.lines.push(new u(0,""));for(var t=0;t<h.length;++t){var w=h[t],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(w);if(c)switch(c[1]){case "line":if(c=/(\d+)(\s+\d+)?/.exec(c[2]))p=c[1]|0,c[2]&&(q=c[2]|0,q in r||(r[q]=new a));break;case "define":if(c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]))r[q].name=c[1]?e(c[2]):c[2]}r[q].lines.push(new u(p++,w))}W(r).forEach(function(a){var b=r[a];b.lines.forEach(function(a){b.index[a.number]=
a})});return r}function w(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);g?b.push(new ma(g[1]|0,g[2]|0,g[3].trim())):0<a.length&&b.push(new ma("unknown",0,a))}});return b}function C(a,b){b.forEach(function(b){var f=a[b.file];if(f){var e=f.index[b.line];if(e){e.errors.push(b);f.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(b)})}function B(a){a._commandRef=Q()}function z(a,b){var f=G();p(a+" in command "+(b||
Q())+("unknown"===f?"":" called from "+f))}function J(a,b,e,h){f(a,b)||z("invalid parameter type"+I(e)+". expected "+b+", got "+typeof a,h||Q())}function P(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:h[a]*b}var W=A("./sorted-object-keys"),Qd=A("./is-typed-array");A=A("./extend");var t="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),h={};h[5120]=h[5121]=1;h[5122]=h[5123]=h[36193]=h[33635]=h[32819]=h[32820]=2;h[5124]=h[5125]=h[5126]=
h[34042]=4;S.exports=A(n,{optional:function(a){a()},raise:p,commandRaise:z,command:function(a,b,f){a||z(b,f||Q())},parameter:function(a,b,f){a in b||p("unknown parameter ("+a+")"+I(f)+". possible values: "+W(b).join())},commandParameter:function(a,b,f,e){a in b||z("unknown parameter ("+a+")"+I(f)+". possible values: "+W(b).join(),e||Q())},constructor:function(a){W(a).forEach(function(a){0>t.indexOf(a)&&p('invalid regl constructor argument "'+a+'". must be one of '+t)})},type:function(a,b,e){f(a,b)||
p("invalid parameter type"+I(e)+". expected "+b+", got "+typeof a)},commandType:J,isTypedArray:function(a,b){Qd(a)||p("invalid parameter type"+I(b)+". must be a typed array")},nni:function(a,b){0<=a&&(a|0)===a||p("invalid parameter type, ("+a+")"+I(b)+". must be a nonnegative integer")},oneOf:b,shaderError:function(a,b,f,e,h){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=e===a.FRAGMENT_SHADER?"fragment":"vertex";J(f,"string",a+" shader source must be a string",h);var p=D(f,
h);f=w(b);C(p,f);W(p).forEach(function(a){function b(a,c){f.push(a);g.push(c||"")}var c=p[a];if(c.hasErrors){var f=[""],g=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(r(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var c=0;a.errors.forEach(function(f){f=f.message;var g=/^\s*'(.*)'\s*:\s*(.*)$/.exec(f);if(g){var d=
g[1];f=g[2];switch(d){case "assign":d="="}c=Math.max(a.line.indexOf(d,c),0)}else c=0;b(r("| ",6));b(r("^^^",c+3)+"\n","font-weight:bold");b(r("| ",6));b(f+"\n","font-weight:bold")});b(r("| ",6)+"\n")}else b(r(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(f.join("")):(g[0]=f.join("%c"),console.log.apply(console,g))}});n.raise("Error compiling "+a+" shader, "+p[0].name)}},linkError:function(a,b,f,e,h){a.getProgramParameter(b,a.LINK_STATUS)||
(a=a.getProgramInfoLog(b),f=D(f,h),e='Error linking program with vertex shader, "'+D(e,h)[0].name+'", and fragment shader "'+f[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(e+"\n"+a),n.raise(e))},callSite:G,saveCommandRef:B,saveDrawInfo:function(a,b,f,e){function h(a){return a?e.id(a):0}function p(a,b){W(b).forEach(function(b){a[e.id(b)]=!0})}B(a);a._fragId=h(a["static"].frag);a._vertId=h(a["static"].vert);
var r=a._uniformSet={};p(r,b["static"]);p(r,b.dynamic);b=a._attributeSet={};p(b,f["static"]);p(b,f.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,f,e){a.texture?b(a.texture._texture.internalformat,f,"unsupported texture format for attachment"):b(a.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},guessCommand:Q,texture2D:function(a,b,f){var e=b.width,h=b.height,p=b.channels;
n(0<e&&e<=f.maxTextureSize&&0<h&&h<=f.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||n(!(e&e-1)&&!!e&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==e&&1!==h&&n(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(n(!(e&e-1)&&!!e&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),n(b.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));
5126===b.type&&(0>f.extensions.indexOf("oes_texture_float_linear")&&n(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),n(!a.genMipmaps,"mipmap generation not supported with float textures"));var r=b.images;for(f=0;16>f;++f)if(r[f]){var t=e>>f,c=h>>f;n(b.mipmask&1<<f,"missing mipmap data");var d=r[f];n(d.width===t&&d.height===c,"invalid shape for mip images");n(d.format===b.format&&d.internalformat===b.internalformat&&d.type===b.type,"incompatible type for mip image");
!d.compressed&&d.data&&(t=Math.ceil(P(d.type,p)*t/d.unpackAlignment)*d.unpackAlignment,n(d.data.byteLength===t*c,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||n(0===(b.mipmask&1<<f),"extra mipmap data");b.compressed&&n(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,f,e){var h=a.width,p=a.height,r=a.channels;n(0<h&&h<=e.maxTextureSize&&0<p&&p<=e.maxTextureSize,"invalid texture shape");n(h===p,"cube map must be square");
n(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(e=0;e<f.length;++e){var t=f[e];n(t.width===h&&t.height===p,"inconsistent cube map face shape");b.genMipmaps&&(n(!t.compressed,"can not generate mipmap for compressed textures"),n(1===t.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=t.images,d=0;16>d;++d){var w=c[d];if(w){var u=h>>d,z=p>>d;n(t.mipmask&1<<d,"missing mipmap data");n(w.width===u&&w.height===z,"invalid shape for mip images");n(w.format===
a.format&&w.internalformat===a.internalformat&&w.type===a.type,"incompatible type for mip image");w.compressed||w.data&&n(w.data.byteLength===u*z*Math.max(P(w.type,r),w.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":26,"./is-typed-array":31,"./sorted-object-keys":35}],23:[function(A,S,Ka){S.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],24:[function(A,S,Ka){function e(e){return Array.prototype.slice.call(e)}
var p=A("./extend"),n=A("./compiled-fns");S.exports=function(){function I(){var a=[],b=[];return p(function(){a.push.apply(a,e(arguments))},{def:function(){var f="v"+r;r++;b.push(f);0<arguments.length&&(a.push(f,"="),a.push.apply(a,e(arguments)),a.push(";"));return f},toString:function(){return e([0<b.length?"var "+b.join(",")+";":"",e(a).join("")]).join("")}})}function f(){function a(e,p){f(e,p,"=",b.def(e,p),";")}var b=I(),f=I(),r=b.toString,w=f.toString;return p(function(){b.apply(b,e(arguments))},
{def:b.def,entry:b,exit:f,save:a,set:function(f,e,p){a(f,e);b(f,e,"=",p,";")},toString:function(){return r()+w()}})}var b=0,r=0,a={},u={};return{global:I(),link:function(f){var e="$"+b,p=!1;"object"===typeof f&&f.name&&(e=f.name.replace(/ /g,"_"),p=!0);if(e in a)return e;a[e]=f;p||b++;return e},block:I,proc:function(a,b){function r(){var a="a"+n.length;n.push(a);return a}var n=[];b=b||0;for(var w=0;w<b;++w)r();var w=f(),I=w.toString;return u[a]=p(w,{arg:r,toString:function(){return e(["function(",
n.join(),"){",I(),"}"]).join("")}})},scope:f,cond:function(){var a=e(arguments).join(""),b=f(),r=f(),u=b.toString,w=r.toString;return p(b,{then:function(){b.apply(b,e(arguments));return this},"else":function(){r.apply(r,e(arguments));return this},toString:function(){var b=w();b&&(b="else{"+b+"}");return e(["if(",a,"){",u(),"}",b]).join("")}})},compile:function(){var b=[],f=[];Object.keys(a).sort(function(a,b){var f="$"===a.charAt(0),e="$"===b.charAt(0);return f||e?f&&e?+a.slice(1)<+b.slice(1)?-1:
1:f&&!e?-1:1:a.localeCompare(b)}).forEach(function(e){var p=a[e];b.push(e);f.push(p)});for(var e=0,p=b.length-1;-1<p;p--)if("$"===b[p].charAt(0)){e=p;break}e=b.slice(e).join();p=n[e];if(!p)throw Error("missing precompiled function with key: "+e);return p.apply(null,f)}}}},{"./compiled-fns":25,"./extend":26}],25:[function(A,S,Ka){S.exports={$0:function(e){var p,n,I,f,b,r,a,u,ma,Q,G,D,w,C,B,z,J,P,W,A,t,h,g,l,V,X,q,pa,O,Y;p=e.attributes;n=e.current;I=e.framebuffer;f=e.gl;b=e.next;r=e.vao;a=b.blend_color;
u=n.blend_color;ma=b.blend_equation;Q=n.blend_equation;G=b.blend_func;D=n.blend_func;w=b.colorMask;C=n.colorMask;B=b.depth_range;z=n.depth_range;J=b.polygonOffset_offset;P=n.polygonOffset_offset;W=b.sample_coverage;A=n.sample_coverage;t=b.scissor_box;h=n.scissor_box;g=b.stencil_func;l=n.stencil_func;V=b.stencil_opBack;X=n.stencil_opBack;q=b.stencil_opFront;pa=n.stencil_opFront;O=b.viewport;Y=n.viewport;return{poll:function(){var c,d,e,p,r,S,Cb,na,Na,Z,K,N,U,sa,L,$b,$a,T,v,ja,ea,Ea;n.dirty=!1;d=b.blend_enable;
e=b.cull_enable;p=b.depth_enable;r=b.dither;S=b.polygonOffset_enable;Cb=b.sample_alpha;na=b.sample_enable;Na=b.scissor_enable;Z=b.stencil_enable;K=b.cull_face;N=n.cull_face;U=b.depth_func;sa=n.depth_func;L=b.depth_mask;$b=n.depth_mask;$a=b.frontFace;T=n.frontFace;v=b.lineWidth;ja=n.lineWidth;ea=b.stencil_mask;Ea=n.stencil_mask;c=I.next;c!==I.cur&&(c?f.bindFramebuffer(36160,c.framebuffer):f.bindFramebuffer(36160,null),I.cur=c);d!==n.blend_enable&&(d?f.enable(3042):f.disable(3042),n.blend_enable=d);
e!==n.cull_enable&&(e?f.enable(2884):f.disable(2884),n.cull_enable=e);p!==n.depth_enable&&(p?f.enable(2929):f.disable(2929),n.depth_enable=p);r!==n.dither&&(r?f.enable(3024):f.disable(3024),n.dither=r);S!==n.polygonOffset_enable&&(S?f.enable(32823):f.disable(32823),n.polygonOffset_enable=S);Cb!==n.sample_alpha&&(Cb?f.enable(32926):f.disable(32926),n.sample_alpha=Cb);na!==n.sample_enable&&(na?f.enable(32928):f.disable(32928),n.sample_enable=na);Na!==n.scissor_enable&&(Na?f.enable(3089):f.disable(3089),
n.scissor_enable=Na);Z!==n.stencil_enable&&(Z?f.enable(2960):f.disable(2960),n.stencil_enable=Z);if(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3])f.blendColor(a[0],a[1],a[2],a[3]),u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3];if(ma[0]!==Q[0]||ma[1]!==Q[1])f.blendEquationSeparate(ma[0],ma[1]),Q[0]=ma[0],Q[1]=ma[1];if(G[0]!==D[0]||G[1]!==D[1]||G[2]!==D[2]||G[3]!==D[3])f.blendFuncSeparate(G[0],G[1],G[2],G[3]),D[0]=G[0],D[1]=G[1],D[2]=G[2],D[3]=G[3];if(w[0]!==C[0]||w[1]!==C[1]||w[2]!==C[2]||w[3]!==C[3])f.colorMask(w[0],
w[1],w[2],w[3]),C[0]=w[0],C[1]=w[1],C[2]=w[2],C[3]=w[3];K!==N&&(f.cullFace(K),n.cull_face=K);U!==sa&&(f.depthFunc(U),n.depth_func=U);L!==$b&&(f.depthMask(L),n.depth_mask=L);if(B[0]!==z[0]||B[1]!==z[1])f.depthRange(B[0],B[1]),z[0]=B[0],z[1]=B[1];$a!==T&&(f.frontFace($a),n.frontFace=$a);v!==ja&&(f.lineWidth(v),n.lineWidth=v);if(J[0]!==P[0]||J[1]!==P[1])f.polygonOffset(J[0],J[1]),P[0]=J[0],P[1]=J[1];if(W[0]!==A[0]||W[1]!==A[1])f.sampleCoverage(W[0],W[1]),A[0]=W[0],A[1]=W[1];if(t[0]!==h[0]||t[1]!==h[1]||
t[2]!==h[2]||t[3]!==h[3])f.scissor(t[0],t[1],t[2],t[3]),h[0]=t[0],h[1]=t[1],h[2]=t[2],h[3]=t[3];if(g[0]!==l[0]||g[1]!==l[1]||g[2]!==l[2])f.stencilFunc(g[0],g[1],g[2]),l[0]=g[0],l[1]=g[1],l[2]=g[2];ea!==Ea&&(f.stencilMask(ea),n.stencil_mask=ea);if(V[0]!==X[0]||V[1]!==X[1]||V[2]!==X[2]||V[3]!==X[3])f.stencilOpSeparate(V[0],V[1],V[2],V[3]),X[0]=V[0],X[1]=V[1],X[2]=V[2],X[3]=V[3];if(q[0]!==pa[0]||q[1]!==pa[1]||q[2]!==pa[2]||q[3]!==pa[3])f.stencilOpSeparate(q[0],q[1],q[2],q[3]),pa[0]=q[0],pa[1]=q[1],pa[2]=
q[2],pa[3]=q[3];if(O[0]!==Y[0]||O[1]!==Y[1]||O[2]!==Y[2]||O[3]!==Y[3])f.viewport(O[0],O[1],O[2],O[3]),Y[0]=O[0],Y[1]=O[1],Y[2]=O[2],Y[3]=O[3]},refresh:function(){var c,d,e,oa,S,xb,Cb,na,Na,Z,K,N,U,sa,L,$b;n.dirty=!1;d=b.blend_enable;e=b.cull_enable;oa=b.depth_enable;S=b.dither;xb=b.polygonOffset_enable;Cb=b.sample_alpha;na=b.sample_enable;Na=b.scissor_enable;Z=b.stencil_enable;K=b.cull_face;N=b.depth_func;U=b.depth_mask;sa=b.frontFace;L=b.lineWidth;$b=b.stencil_mask;(c=I.next)?f.bindFramebuffer(36160,
c.framebuffer):f.bindFramebuffer(36160,null);I.cur=c;c=p[0];c.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);c=p[1];c.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,c.x,c.y,c.z,
c.w),c.buffer=null);c=p[2];c.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);c=p[3];c.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);c=p[4];c.buffer?
(f.enableVertexAttribArray(4),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);c=p[5];c.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);c=p[6];c.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,
c.buffer.buffer),f.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);c=p[7];c.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);c=p[8];c.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(8,
c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);c=p[9];c.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);c=p[10];c.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(10,c.size,c.type,c.normalized,c.stride,
c.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);c=p[11];c.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);c=p[12];c.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(12),
f.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);c=p[13];c.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);c=p[14];c.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,c.x,
c.y,c.z,c.w),c.buffer=null);c=p[15];c.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);r.currentVAO=null;r.setVAO(r.targetVAO);d?f.enable(3042):f.disable(3042);n.blend_enable=d;e?f.enable(2884):f.disable(2884);n.cull_enable=e;oa?f.enable(2929):f.disable(2929);n.depth_enable=oa;S?f.enable(3024):f.disable(3024);n.dither=
S;xb?f.enable(32823):f.disable(32823);n.polygonOffset_enable=xb;Cb?f.enable(32926):f.disable(32926);n.sample_alpha=Cb;na?f.enable(32928):f.disable(32928);n.sample_enable=na;Na?f.enable(3089):f.disable(3089);n.scissor_enable=Na;Z?f.enable(2960):f.disable(2960);n.stencil_enable=Z;f.blendColor(a[0],a[1],a[2],a[3]);u[0]=a[0];u[1]=a[1];u[2]=a[2];u[3]=a[3];f.blendEquationSeparate(ma[0],ma[1]);Q[0]=ma[0];Q[1]=ma[1];f.blendFuncSeparate(G[0],G[1],G[2],G[3]);D[0]=G[0];D[1]=G[1];D[2]=G[2];D[3]=G[3];f.colorMask(w[0],
w[1],w[2],w[3]);C[0]=w[0];C[1]=w[1];C[2]=w[2];C[3]=w[3];f.cullFace(K);n.cull_face=K;f.depthFunc(N);n.depth_func=N;f.depthMask(U);n.depth_mask=U;f.depthRange(B[0],B[1]);z[0]=B[0];z[1]=B[1];f.frontFace(sa);n.frontFace=sa;f.lineWidth(L);n.lineWidth=L;f.polygonOffset(J[0],J[1]);P[0]=J[0];P[1]=J[1];f.sampleCoverage(W[0],W[1]);A[0]=W[0];A[1]=W[1];f.scissor(t[0],t[1],t[2],t[3]);h[0]=t[0];h[1]=t[1];h[2]=t[2];h[3]=t[3];f.stencilFunc(g[0],g[1],g[2]);l[0]=g[0];l[1]=g[1];l[2]=g[2];f.stencilMask($b);n.stencil_mask=
$b;f.stencilOpSeparate(V[0],V[1],V[2],V[3]);X[0]=V[0];X[1]=V[1];X[2]=V[2];X[3]=V[3];f.stencilOpSeparate(q[0],q[1],q[2],q[3]);pa[0]=q[0];pa[1]=q[1];pa[2]=q[2];pa[3]=q[3];f.viewport(O[0],O[1],O[2],O[3]);Y[0]=O[0];Y[1]=O[1];Y[2]=O[2];Y[3]=O[3]}}},$3:function(e,p,n,I){var f,b,r,a,u,ma,Q,G,D,w,C,B,z,J,P,W,A,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,S,xb;f=e.context;b=e.current;r=e.framebuffer;a=e.gl;u=e.next;ma=e.shader;Q=e.vao;G=u.blend_color;D=b.blend_color;w=u.blend_equation;C=b.blend_equation;B=u.blend_func;
z=b.blend_func;J=u.colorMask;P=b.colorMask;W=u.depth_range;A=b.depth_range;t=u.polygonOffset_offset;h=b.polygonOffset_offset;g=u.sample_coverage;l=b.sample_coverage;V=u.scissor_box;X=b.scissor_box;q=u.stencil_func;pa=b.stencil_func;O=u.stencil_opBack;Y=b.stencil_opBack;c=u.stencil_opFront;d=b.stencil_opFront;ba=u.viewport;oa=b.viewport;S={};xb={};return{batch:function(f,e){var n,Z,K,N,U;n=r.next;n!==r.cur&&(n?a.bindFramebuffer(36160,n.framebuffer):a.bindFramebuffer(36160,null),r.cur=n);if(b.dirty){n=
u.dither;n!==b.dither&&(n?a.enable(3024):a.disable(3024),b.dither=n);n=u.blend_enable;n!==b.blend_enable&&(n?a.enable(3042):a.disable(3042),b.blend_enable=n);n=G[0];K=G[1];N=G[2];U=G[3];if(n!==D[0]||K!==D[1]||N!==D[2]||U!==D[3])a.blendColor(n,K,N,U),D[0]=n,D[1]=K,D[2]=N,D[3]=U;n=w[0];K=w[1];if(n!==C[0]||K!==C[1])a.blendEquationSeparate(n,K),C[0]=n,C[1]=K;n=B[0];K=B[1];N=B[2];U=B[3];if(n!==z[0]||K!==z[1]||N!==z[2]||U!==z[3])a.blendFuncSeparate(n,K,N,U),z[0]=n,z[1]=K,z[2]=N,z[3]=U;n=u.depth_enable;
n!==b.depth_enable&&(n?a.enable(2929):a.disable(2929),b.depth_enable=n);n=u.depth_func;n!==b.depth_func&&(a.depthFunc(n),b.depth_func=n);n=W[0];K=W[1];if(n!==A[0]||K!==A[1])a.depthRange(n,K),A[0]=n,A[1]=K;n=u.depth_mask;n!==b.depth_mask&&(a.depthMask(n),b.depth_mask=n);n=J[0];K=J[1];N=J[2];U=J[3];if(n!==P[0]||K!==P[1]||N!==P[2]||U!==P[3])a.colorMask(n,K,N,U),P[0]=n,P[1]=K,P[2]=N,P[3]=U;n=u.cull_enable;n!==b.cull_enable&&(n?a.enable(2884):a.disable(2884),b.cull_enable=n);n=u.cull_face;n!==b.cull_face&&
(a.cullFace(n),b.cull_face=n);n=u.frontFace;n!==b.frontFace&&(a.frontFace(n),b.frontFace=n);n=u.lineWidth;n!==b.lineWidth&&(a.lineWidth(n),b.lineWidth=n);n=u.polygonOffset_enable;n!==b.polygonOffset_enable&&(n?a.enable(32823):a.disable(32823),b.polygonOffset_enable=n);n=t[0];K=t[1];if(n!==h[0]||K!==h[1])a.polygonOffset(n,K),h[0]=n,h[1]=K;n=u.sample_alpha;n!==b.sample_alpha&&(n?a.enable(32926):a.disable(32926),b.sample_alpha=n);n=u.sample_enable;n!==b.sample_enable&&(n?a.enable(32928):a.disable(32928),
b.sample_enable=n);n=g[0];K=g[1];if(n!==l[0]||K!==l[1])a.sampleCoverage(n,K),l[0]=n,l[1]=K;n=u.stencil_enable;n!==b.stencil_enable&&(n?a.enable(2960):a.disable(2960),b.stencil_enable=n);n=u.stencil_mask;n!==b.stencil_mask&&(a.stencilMask(n),b.stencil_mask=n);n=q[0];K=q[1];N=q[2];if(n!==pa[0]||K!==pa[1]||N!==pa[2])a.stencilFunc(n,K,N),pa[0]=n,pa[1]=K,pa[2]=N;n=c[0];K=c[1];N=c[2];U=c[3];if(n!==d[0]||K!==d[1]||N!==d[2]||U!==d[3])a.stencilOpSeparate(n,K,N,U),d[0]=n,d[1]=K,d[2]=N,d[3]=U;n=O[0];K=O[1];
N=O[2];U=O[3];if(n!==Y[0]||K!==Y[1]||N!==Y[2]||U!==Y[3])a.stencilOpSeparate(n,K,N,U),Y[0]=n,Y[1]=K,Y[2]=N,Y[3]=U;n=u.scissor_enable;n!==b.scissor_enable&&(n?a.enable(3089):a.disable(3089),b.scissor_enable=n);n=V[0];K=V[1];N=V[2];U=V[3];if(n!==X[0]||K!==X[1]||N!==X[2]||U!==X[3])a.scissor(n,K,N,U),X[0]=n,X[1]=K,X[2]=N,X[3]=U;n=ba[0];K=ba[1];N=ba[2];U=ba[3];if(n!==oa[0]||K!==oa[1]||N!==oa[2]||U!==oa[3])a.viewport(n,K,N,U),oa[0]=n,oa[1]=K,oa[2]=N,oa[3]=U;b.dirty=!1}if(n=b.profile)Z=performance.now(),
p.count+=e;K=ma.program(ma.vert,ma.frag);a.useProgram(K.program);Q.setVAO(null);N=K.id;(U=xb[N])||(U=xb[N]=I(K));U.call(this,f,e);Q.setVAO(null);n&&(p.cpuTime+=performance.now()-Z)},draw:function(f){var e,I,Z,K,N;e=r.next;e!==r.cur&&(e?a.bindFramebuffer(36160,e.framebuffer):a.bindFramebuffer(36160,null),r.cur=e);if(b.dirty){e=u.dither;e!==b.dither&&(e?a.enable(3024):a.disable(3024),b.dither=e);e=u.blend_enable;e!==b.blend_enable&&(e?a.enable(3042):a.disable(3042),b.blend_enable=e);e=G[0];Z=G[1];K=
G[2];N=G[3];if(e!==D[0]||Z!==D[1]||K!==D[2]||N!==D[3])a.blendColor(e,Z,K,N),D[0]=e,D[1]=Z,D[2]=K,D[3]=N;e=w[0];Z=w[1];if(e!==C[0]||Z!==C[1])a.blendEquationSeparate(e,Z),C[0]=e,C[1]=Z;e=B[0];Z=B[1];K=B[2];N=B[3];if(e!==z[0]||Z!==z[1]||K!==z[2]||N!==z[3])a.blendFuncSeparate(e,Z,K,N),z[0]=e,z[1]=Z,z[2]=K,z[3]=N;e=u.depth_enable;e!==b.depth_enable&&(e?a.enable(2929):a.disable(2929),b.depth_enable=e);e=u.depth_func;e!==b.depth_func&&(a.depthFunc(e),b.depth_func=e);e=W[0];Z=W[1];if(e!==A[0]||Z!==A[1])a.depthRange(e,
Z),A[0]=e,A[1]=Z;e=u.depth_mask;e!==b.depth_mask&&(a.depthMask(e),b.depth_mask=e);e=J[0];Z=J[1];K=J[2];N=J[3];if(e!==P[0]||Z!==P[1]||K!==P[2]||N!==P[3])a.colorMask(e,Z,K,N),P[0]=e,P[1]=Z,P[2]=K,P[3]=N;e=u.cull_enable;e!==b.cull_enable&&(e?a.enable(2884):a.disable(2884),b.cull_enable=e);e=u.cull_face;e!==b.cull_face&&(a.cullFace(e),b.cull_face=e);e=u.frontFace;e!==b.frontFace&&(a.frontFace(e),b.frontFace=e);e=u.lineWidth;e!==b.lineWidth&&(a.lineWidth(e),b.lineWidth=e);e=u.polygonOffset_enable;e!==
b.polygonOffset_enable&&(e?a.enable(32823):a.disable(32823),b.polygonOffset_enable=e);e=t[0];Z=t[1];if(e!==h[0]||Z!==h[1])a.polygonOffset(e,Z),h[0]=e,h[1]=Z;e=u.sample_alpha;e!==b.sample_alpha&&(e?a.enable(32926):a.disable(32926),b.sample_alpha=e);e=u.sample_enable;e!==b.sample_enable&&(e?a.enable(32928):a.disable(32928),b.sample_enable=e);e=g[0];Z=g[1];if(e!==l[0]||Z!==l[1])a.sampleCoverage(e,Z),l[0]=e,l[1]=Z;e=u.stencil_enable;e!==b.stencil_enable&&(e?a.enable(2960):a.disable(2960),b.stencil_enable=
e);e=u.stencil_mask;e!==b.stencil_mask&&(a.stencilMask(e),b.stencil_mask=e);e=q[0];Z=q[1];K=q[2];if(e!==pa[0]||Z!==pa[1]||K!==pa[2])a.stencilFunc(e,Z,K),pa[0]=e,pa[1]=Z,pa[2]=K;e=c[0];Z=c[1];K=c[2];N=c[3];if(e!==d[0]||Z!==d[1]||K!==d[2]||N!==d[3])a.stencilOpSeparate(e,Z,K,N),d[0]=e,d[1]=Z,d[2]=K,d[3]=N;e=O[0];Z=O[1];K=O[2];N=O[3];if(e!==Y[0]||Z!==Y[1]||K!==Y[2]||N!==Y[3])a.stencilOpSeparate(e,Z,K,N),Y[0]=e,Y[1]=Z,Y[2]=K,Y[3]=N;e=u.scissor_enable;e!==b.scissor_enable&&(e?a.enable(3089):a.disable(3089),
b.scissor_enable=e);e=V[0];Z=V[1];K=V[2];N=V[3];if(e!==X[0]||Z!==X[1]||K!==X[2]||N!==X[3])a.scissor(e,Z,K,N),X[0]=e,X[1]=Z,X[2]=K,X[3]=N;e=ba[0];Z=ba[1];K=ba[2];N=ba[3];if(e!==oa[0]||Z!==oa[1]||K!==oa[2]||N!==oa[3])a.viewport(e,Z,K,N),oa[0]=e,oa[1]=Z,oa[2]=K,oa[3]=N;b.dirty=!1}if(e=b.profile)I=performance.now(),p.count++;Z=ma.program(ma.vert,ma.frag);a.useProgram(Z.program);Q.setVAO(null);K=Z.id;(N=S[K])||(N=S[K]=n(Z));N.call(this,f);Q.setVAO(null);e&&(p.cpuTime+=performance.now()-I)},scope:function(a,
c,g){var e,d;if(e=b.profile)d=performance.now(),p.count++;c(f,a,g);e&&(p.cpuTime+=performance.now()-d)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(e,p,n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,Tc,xb,Cb,na,Na,Z,K,N,U,sa,L,
$b,$a,T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa,ec,pc,lc,ud,wc,ca,M,ka,Ca,Gb,Jc,Wc,F,y,ia,va,R,ha,ra){var H,x,da,E,za,la,k,kc,fa,m,Ib,yb,Ue,qe,re,td,xd,ze,qd,Sd,se,Jd,fd,Xd,Kd,Ze,yf,bf,yd,De,Td,Ud,ie,le,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb;H=e.attributes;x=e.context;da=e.current;E=e.draw;za=e.elements;la=e.framebuffer;k=e.gl;kc=e.next;fa=e.shader;m=e.uniforms;Ib=e.vao;yb=kc.blend_color;Ue=da.blend_color;qe=kc.blend_equation;re=da.blend_equation;
td=kc.blend_func;xd=da.blend_func;ze=kc.colorMask;qd=da.colorMask;Sd=kc.depth_range;se=da.depth_range;Jd=kc.polygonOffset_offset;fd=da.polygonOffset_offset;Xd=kc.sample_coverage;Kd=da.sample_coverage;Ze=kc.scissor_box;yf=da.scissor_box;bf=kc.stencil_func;yd=da.stencil_func;De=kc.stencil_opBack;Td=da.stencil_opBack;Ud=kc.stencil_opFront;ie=da.stencil_opFront;le=kc.viewport;rd=da.viewport;ld={};wd={};pd=new Float32Array(16);dd=new Float32Array(16);zc=new Float32Array(16);sd=new Float32Array(16);gd=
new Float32Array(16);Kc=new Float32Array(16);sc=new Float32Array(16);ab=new Float32Array(16);jc=new Float32Array(16);Eb=new Float32Array(16);rc=new Float32Array(16);Ta=new Float32Array(16);Ic=new Float32Array(16);ac=new Float32Array(16);Zc=new Float32Array(16);Dd=new Float32Array(16);md=new Float32Array(16);Ac=new Float32Array(16);Vb=new Float32Array(16);Fc=new Float32Array(16);Pc=new Float32Array(16);La=new Float32Array(16);sb=new Float32Array(16);Wa=new Float32Array(16);ta=new Float32Array(16);
vd=new Float32Array(16);Ab=new Float32Array(16);Sa=new Float32Array(16);Hb=new Float32Array(16);cb=new Float32Array(16);Wb=new Float32Array(16);Qb=new Float32Array(16);return{batch:function(c,g){var e,d,h,m;e=la.next;e!==la.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),la.cur=e);if(da.dirty){var l,p,n,q,t,fa,O,W,V,X,ba,ab,Ta,ua,Y,wa,yb,Eb,Aa,ac,Ia,pa,Kc,Ra,gd;l=ze[0];p=ze[1];n=ze[2];q=ze[3];if(l!==qd[0]||p!==qd[1]||n!==qd[2]||q!==qd[3])k.colorMask(l,p,n,q),qd[0]=l,qd[1]=
p,qd[2]=n,qd[3]=q;t=kc.frontFace;t!==da.frontFace&&(k.frontFace(t),da.frontFace=t);fa=kc.polygonOffset_enable;fa!==da.polygonOffset_enable&&(fa?k.enable(32823):k.disable(32823),da.polygonOffset_enable=fa);O=Jd[0];W=Jd[1];if(O!==fd[0]||W!==fd[1])k.polygonOffset(O,W),fd[0]=O,fd[1]=W;V=kc.sample_alpha;V!==da.sample_alpha&&(V?k.enable(32926):k.disable(32926),da.sample_alpha=V);X=kc.sample_enable;X!==da.sample_enable&&(X?k.enable(32928):k.disable(32928),da.sample_enable=X);ba=Xd[0];ab=Xd[1];if(ba!==Kd[0]||
ab!==Kd[1])k.sampleCoverage(ba,ab),Kd[0]=ba,Kd[1]=ab;Ta=kc.stencil_enable;Ta!==da.stencil_enable&&(Ta?k.enable(2960):k.disable(2960),da.stencil_enable=Ta);ua=kc.stencil_mask;ua!==da.stencil_mask&&(k.stencilMask(ua),da.stencil_mask=ua);Y=bf[0];wa=bf[1];yb=bf[2];if(Y!==yd[0]||wa!==yd[1]||yb!==yd[2])k.stencilFunc(Y,wa,yb),yd[0]=Y,yd[1]=wa,yd[2]=yb;Eb=Ud[0];Aa=Ud[1];ac=Ud[2];Ia=Ud[3];if(Eb!==ie[0]||Aa!==ie[1]||ac!==ie[2]||Ia!==ie[3])k.stencilOpSeparate(Eb,Aa,ac,Ia),ie[0]=Eb,ie[1]=Aa,ie[2]=ac,ie[3]=Ia;
pa=De[0];Kc=De[1];Ra=De[2];gd=De[3];if(pa!==Td[0]||Kc!==Td[1]||Ra!==Td[2]||gd!==Td[3])k.stencilOpSeparate(pa,Kc,Ra,gd),Td[0]=pa,Td[1]=Kc,Td[2]=Ra,Td[3]=gd}k.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;k.disable(3042);da.blend_enable=!1;k.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;k.blendFuncSeparate(770,771,1,1);xd[0]=770;xd[1]=771;xd[2]=1;xd[3]=1;k.enable(2884);da.cull_enable=!0;k.cullFace(1029);da.cull_face=1029;k.enable(2929);da.depth_enable=!0;k.depthFunc(513);da.depth_func=
513;k.depthMask(!0);da.depth_mask=!0;k.depthRange(0,1);se[0]=0;se[1]=1;k.disable(3024);da.dither=!1;k.lineWidth(2);da.lineWidth=2;k.enable(3089);da.scissor_enable=!0;d=da.profile;da.profile=!1;k.useProgram(Cb.program);var S,Za,oa,xa,sc,Ja,Ze,fb,hb,ya,zc,Da,pb,qb,Xa,Ya,Ic,jc,Zc,Va,Lb,dd,Fa,rc,Qa,Ba,lb,ub,Db,rb,pd,vb,sd;Ib.setVAO(null);S=ec.location;Za=H[S];Za.buffer||k.enableVertexAttribArray(S);if(Za.type!==I.dtype||4!==Za.size||Za.buffer!==I||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)k.bindBuffer(34962,
I.buffer),k.vertexAttribPointer(S,4,I.dtype,!1,0,0),Za.type=I.dtype,Za.size=4,Za.buffer=I,Za.normalized=!1,Za.offset=0,Za.stride=0;oa=pc.location;xa=H[oa];xa.buffer||k.enableVertexAttribArray(oa);if(xa.type!==f.dtype||4!==xa.size||xa.buffer!==f||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)k.bindBuffer(34962,f.buffer),k.vertexAttribPointer(oa,4,f.dtype,!1,0,0),xa.type=f.dtype,xa.size=4,xa.buffer=f,xa.normalized=!1,xa.offset=0,xa.stride=0;sc=lc.location;Ja=H[sc];Ja.buffer||k.enableVertexAttribArray(sc);
if(Ja.type!==b.dtype||4!==Ja.size||Ja.buffer!==b||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(sc,4,b.dtype,!1,0,0),Ja.type=b.dtype,Ja.size=4,Ja.buffer=b,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;Ze=ud.location;fb=H[Ze];fb.buffer||k.enableVertexAttribArray(Ze);if(fb.type!==r.dtype||4!==fb.size||fb.buffer!==r||!1!==fb.normalized||0!==fb.offset||0!==fb.stride)k.bindBuffer(34962,r.buffer),k.vertexAttribPointer(Ze,4,r.dtype,!1,0,0),fb.type=r.dtype,
fb.size=4,fb.buffer=r,fb.normalized=!1,fb.offset=0,fb.stride=0;hb=wc.location;ya=H[hb];ya.buffer||k.enableVertexAttribArray(hb);if(ya.type!==a.dtype||4!==ya.size||ya.buffer!==a||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)k.bindBuffer(34962,a.buffer),k.vertexAttribPointer(hb,4,a.dtype,!1,0,0),ya.type=a.dtype,ya.size=4,ya.buffer=a,ya.normalized=!1,ya.offset=0,ya.stride=0;zc=ca.location;Da=H[zc];Da.buffer||k.enableVertexAttribArray(zc);if(Da.type!==u.dtype||4!==Da.size||Da.buffer!==u||!1!==Da.normalized||
0!==Da.offset||0!==Da.stride)k.bindBuffer(34962,u.buffer),k.vertexAttribPointer(zc,4,u.dtype,!1,0,0),Da.type=u.dtype,Da.size=4,Da.buffer=u,Da.normalized=!1,Da.offset=0,Da.stride=0;pb=M.location;qb=H[pb];qb.buffer||k.enableVertexAttribArray(pb);if(qb.type!==A.dtype||4!==qb.size||qb.buffer!==A||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(pb,4,A.dtype,!1,0,0),qb.type=A.dtype,qb.size=4,qb.buffer=A,qb.normalized=!1,qb.offset=0,qb.stride=0;Xa=ka.location;
Ya=H[Xa];Ya.buffer||k.enableVertexAttribArray(Xa);if(Ya.type!==Q.dtype||4!==Ya.size||Ya.buffer!==Q||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)k.bindBuffer(34962,Q.buffer),k.vertexAttribPointer(Xa,4,Q.dtype,!1,0,0),Ya.type=Q.dtype,Ya.size=4,Ya.buffer=Q,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ic=Ca.location;jc=H[Ic];jc.buffer||k.enableVertexAttribArray(Ic);if(jc.type!==G.dtype||4!==jc.size||jc.buffer!==G||!1!==jc.normalized||0!==jc.offset||0!==jc.stride)k.bindBuffer(34962,G.buffer),k.vertexAttribPointer(Ic,
4,G.dtype,!1,0,0),jc.type=G.dtype,jc.size=4,jc.buffer=G,jc.normalized=!1,jc.offset=0,jc.stride=0;Zc=Gb.location;Va=H[Zc];Va.buffer||k.enableVertexAttribArray(Zc);if(Va.type!==D.dtype||4!==Va.size||Va.buffer!==D||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)k.bindBuffer(34962,D.buffer),k.vertexAttribPointer(Zc,4,D.dtype,!1,0,0),Va.type=D.dtype,Va.size=4,Va.buffer=D,Va.normalized=!1,Va.offset=0,Va.stride=0;Lb=Jc.location;dd=H[Lb];dd.buffer||k.enableVertexAttribArray(Lb);if(dd.type!==w.dtype||4!==
dd.size||dd.buffer!==w||!1!==dd.normalized||0!==dd.offset||0!==dd.stride)k.bindBuffer(34962,w.buffer),k.vertexAttribPointer(Lb,4,w.dtype,!1,0,0),dd.type=w.dtype,dd.size=4,dd.buffer=w,dd.normalized=!1,dd.offset=0,dd.stride=0;Fa=Wc.location;rc=H[Fa];rc.buffer||k.enableVertexAttribArray(Fa);if(rc.type!==C.dtype||4!==rc.size||rc.buffer!==C||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)k.bindBuffer(34962,C.buffer),k.vertexAttribPointer(Fa,4,C.dtype,!1,0,0),rc.type=C.dtype,rc.size=4,rc.buffer=C,rc.normalized=
!1,rc.offset=0,rc.stride=0;Qa=F.location;Ba=H[Qa];Ba.buffer||k.enableVertexAttribArray(Qa);if(Ba.type!==B.dtype||4!==Ba.size||Ba.buffer!==B||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)k.bindBuffer(34962,B.buffer),k.vertexAttribPointer(Qa,4,B.dtype,!1,0,0),Ba.type=B.dtype,Ba.size=4,Ba.buffer=B,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;lb=y.location;ub=H[lb];ub.buffer||k.enableVertexAttribArray(lb);if(ub.type!==z.dtype||4!==ub.size||ub.buffer!==z||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)k.bindBuffer(34962,
z.buffer),k.vertexAttribPointer(lb,4,z.dtype,!1,0,0),ub.type=z.dtype,ub.size=4,ub.buffer=z,ub.normalized=!1,ub.offset=0,ub.stride=0;Db=ia.location;rb=H[Db];rb.buffer||k.enableVertexAttribArray(Db);if(rb.type!==J.dtype||4!==rb.size||rb.buffer!==J||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)k.bindBuffer(34962,J.buffer),k.vertexAttribPointer(Db,4,J.dtype,!1,0,0),rb.type=J.dtype,rb.size=4,rb.buffer=J,rb.normalized=!1,rb.offset=0,rb.stride=0;pd=Na.location;vb=H[pd];vb.buffer||k.enableVertexAttribArray(pd);
if(vb.type!==P.dtype||4!==vb.size||vb.buffer!==P||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)k.bindBuffer(34962,P.buffer),k.vertexAttribPointer(pd,4,P.dtype,!1,0,0),vb.type=P.dtype,vb.size=4,vb.buffer=P,vb.normalized=!1,vb.offset=0,vb.stride=0;k.uniform1i(va.location,na.bind());(sd=E.elements)?k.bindBuffer(34963,sd.buffer.buffer):Ib.currentVAO&&(sd=za.getElements(Ib.currentVAO.elements))&&k.bindBuffer(34963,sd.buffer.buffer);for(h=0;h<g;++h){m=c[h];var td,Sd,le,Dd,qe,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,
Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,xb,me,Yc,Tc,Ae,Qd,Ka,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd;ld.height=m.viewportHeight;ld.width=m.viewportWidth;ld.x=m.viewportX;ld.y=m.viewportY;td=ld.x|0;Sd=ld.y|0;le="width"in ld?ld.width|0:x.framebufferWidth-td;Dd="height"in ld?ld.height|0:x.framebufferHeight-Sd;qe=x.viewportWidth;x.viewportWidth=le;Ub=x.viewportHeight;x.viewportHeight=Dd;k.viewport(td,Sd,le,Dd);rd[0]=td;rd[1]=Sd;rd[2]=le;rd[3]=Dd;wd.height=m.scissorHeight;
wd.width=m.scissorWidth;wd.x=m.scissorX;wd.y=m.scissorY;bc=wd.x|0;Ob=wd.y|0;Ga="width"in wd?wd.width|0:x.framebufferWidth-bc;Yb="height"in wd?wd.height|0:x.framebufferHeight-Ob;k.scissor(bc,Ob,Ga,Yb);yf[0]=bc;yf[1]=Ob;yf[2]=Ga;yf[3]=Yb;mb=m.dim0A;k.uniformMatrix4fv(K.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(md[0]=mb[0],md[1]=mb[1],md[2]=mb[2],md[3]=mb[3],md[4]=mb[4],md[5]=mb[5],md[6]=mb[6],md[7]=mb[7],md[8]=mb[8],md[9]=mb[9],md[10]=mb[10],md[11]=mb[11],md[12]=mb[12],md[13]=mb[13],
md[14]=mb[14],md[15]=mb[15],md));wb=m.dim1A;k.uniformMatrix4fv(L.location,!1,Array.isArray(wb)||wb instanceof Float32Array?wb:(Ac[0]=wb[0],Ac[1]=wb[1],Ac[2]=wb[2],Ac[3]=wb[3],Ac[4]=wb[4],Ac[5]=wb[5],Ac[6]=wb[6],Ac[7]=wb[7],Ac[8]=wb[8],Ac[9]=wb[9],Ac[10]=wb[10],Ac[11]=wb[11],Ac[12]=wb[12],Ac[13]=wb[13],Ac[14]=wb[14],Ac[15]=wb[15],Ac));Mb=m.dim0B;k.uniformMatrix4fv(N.location,!1,Array.isArray(Mb)||Mb instanceof Float32Array?Mb:(Vb[0]=Mb[0],Vb[1]=Mb[1],Vb[2]=Mb[2],Vb[3]=Mb[3],Vb[4]=Mb[4],Vb[5]=Mb[5],
Vb[6]=Mb[6],Vb[7]=Mb[7],Vb[8]=Mb[8],Vb[9]=Mb[9],Vb[10]=Mb[10],Vb[11]=Mb[11],Vb[12]=Mb[12],Vb[13]=Mb[13],Vb[14]=Mb[14],Vb[15]=Mb[15],Vb));Pb=m.dim1B;k.uniformMatrix4fv($b.location,!1,Array.isArray(Pb)||Pb instanceof Float32Array?Pb:(Fc[0]=Pb[0],Fc[1]=Pb[1],Fc[2]=Pb[2],Fc[3]=Pb[3],Fc[4]=Pb[4],Fc[5]=Pb[5],Fc[6]=Pb[6],Fc[7]=Pb[7],Fc[8]=Pb[8],Fc[9]=Pb[9],Fc[10]=Pb[10],Fc[11]=Pb[11],Fc[12]=Pb[12],Fc[13]=Pb[13],Fc[14]=Pb[14],Fc[15]=Pb[15],Fc));gc=m.dim0C;k.uniformMatrix4fv(U.location,!1,Array.isArray(gc)||
gc instanceof Float32Array?gc:(Pc[0]=gc[0],Pc[1]=gc[1],Pc[2]=gc[2],Pc[3]=gc[3],Pc[4]=gc[4],Pc[5]=gc[5],Pc[6]=gc[6],Pc[7]=gc[7],Pc[8]=gc[8],Pc[9]=gc[9],Pc[10]=gc[10],Pc[11]=gc[11],Pc[12]=gc[12],Pc[13]=gc[13],Pc[14]=gc[14],Pc[15]=gc[15],Pc));ic=m.dim1C;k.uniformMatrix4fv($a.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(La[0]=ic[0],La[1]=ic[1],La[2]=ic[2],La[3]=ic[3],La[4]=ic[4],La[5]=ic[5],La[6]=ic[6],La[7]=ic[7],La[8]=ic[8],La[9]=ic[9],La[10]=ic[10],La[11]=ic[11],La[12]=ic[12],La[13]=
ic[13],La[14]=ic[14],La[15]=ic[15],La));Qc=m.dim0D;k.uniformMatrix4fv(sa.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:(sb[0]=Qc[0],sb[1]=Qc[1],sb[2]=Qc[2],sb[3]=Qc[3],sb[4]=Qc[4],sb[5]=Qc[5],sb[6]=Qc[6],sb[7]=Qc[7],sb[8]=Qc[8],sb[9]=Qc[9],sb[10]=Qc[10],sb[11]=Qc[11],sb[12]=Qc[12],sb[13]=Qc[13],sb[14]=Qc[14],sb[15]=Qc[15],sb));Bc=m.dim1D;k.uniformMatrix4fv(T.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(Wa[0]=Bc[0],Wa[1]=Bc[1],Wa[2]=Bc[2],Wa[3]=Bc[3],Wa[4]=Bc[4],Wa[5]=
Bc[5],Wa[6]=Bc[6],Wa[7]=Bc[7],Wa[8]=Bc[8],Wa[9]=Bc[9],Wa[10]=Bc[10],Wa[11]=Bc[11],Wa[12]=Bc[12],Wa[13]=Bc[13],Wa[14]=Bc[14],Wa[15]=Bc[15],Wa));Cc=m.loA;k.uniformMatrix4fv(dc.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(ta[0]=Cc[0],ta[1]=Cc[1],ta[2]=Cc[2],ta[3]=Cc[3],ta[4]=Cc[4],ta[5]=Cc[5],ta[6]=Cc[6],ta[7]=Cc[7],ta[8]=Cc[8],ta[9]=Cc[9],ta[10]=Cc[10],ta[11]=Cc[11],ta[12]=Cc[12],ta[13]=Cc[13],ta[14]=Cc[14],ta[15]=Cc[15],ta));Dc=m.hiA;k.uniformMatrix4fv(ja.location,!1,Array.isArray(Dc)||
Dc instanceof Float32Array?Dc:(vd[0]=Dc[0],vd[1]=Dc[1],vd[2]=Dc[2],vd[3]=Dc[3],vd[4]=Dc[4],vd[5]=Dc[5],vd[6]=Dc[6],vd[7]=Dc[7],vd[8]=Dc[8],vd[9]=Dc[9],vd[10]=Dc[10],vd[11]=Dc[11],vd[12]=Dc[12],vd[13]=Dc[13],vd[14]=Dc[14],vd[15]=Dc[15],vd));Mc=m.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(Mc)||Mc instanceof Float32Array?Mc:(Ab[0]=Mc[0],Ab[1]=Mc[1],Ab[2]=Mc[2],Ab[3]=Mc[3],Ab[4]=Mc[4],Ab[5]=Mc[5],Ab[6]=Mc[6],Ab[7]=Mc[7],Ab[8]=Mc[8],Ab[9]=Mc[9],Ab[10]=Mc[10],Ab[11]=Mc[11],Ab[12]=Mc[12],Ab[13]=
Mc[13],Ab[14]=Mc[14],Ab[15]=Mc[15],Ab));cd=m.hiB;k.uniformMatrix4fv(ea.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(Sa[0]=cd[0],Sa[1]=cd[1],Sa[2]=cd[2],Sa[3]=cd[3],Sa[4]=cd[4],Sa[5]=cd[5],Sa[6]=cd[6],Sa[7]=cd[7],Sa[8]=cd[8],Sa[9]=cd[9],Sa[10]=cd[10],Sa[11]=cd[11],Sa[12]=cd[12],Sa[13]=cd[13],Sa[14]=cd[14],Sa[15]=cd[15],Sa));Rc=m.loC;k.uniformMatrix4fv(aa.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(Hb[0]=Rc[0],Hb[1]=Rc[1],Hb[2]=Rc[2],Hb[3]=Rc[3],Hb[4]=Rc[4],Hb[5]=
Rc[5],Hb[6]=Rc[6],Hb[7]=Rc[7],Hb[8]=Rc[8],Hb[9]=Rc[9],Hb[10]=Rc[10],Hb[11]=Rc[11],Hb[12]=Rc[12],Hb[13]=Rc[13],Hb[14]=Rc[14],Hb[15]=Rc[15],Hb));Nc=m.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(cb[0]=Nc[0],cb[1]=Nc[1],cb[2]=Nc[2],cb[3]=Nc[3],cb[4]=Nc[4],cb[5]=Nc[5],cb[6]=Nc[6],cb[7]=Nc[7],cb[8]=Nc[8],cb[9]=Nc[9],cb[10]=Nc[10],cb[11]=Nc[11],cb[12]=Nc[12],cb[13]=Nc[13],cb[14]=Nc[14],cb[15]=Nc[15],cb));Kb=m.loD;k.uniformMatrix4fv(ib.location,!1,Array.isArray(Kb)||
Kb instanceof Float32Array?Kb:(Wb[0]=Kb[0],Wb[1]=Kb[1],Wb[2]=Kb[2],Wb[3]=Kb[3],Wb[4]=Kb[4],Wb[5]=Kb[5],Wb[6]=Kb[6],Wb[7]=Kb[7],Wb[8]=Kb[8],Wb[9]=Kb[9],Wb[10]=Kb[10],Wb[11]=Kb[11],Wb[12]=Kb[12],Wb[13]=Kb[13],Wb[14]=Kb[14],Wb[15]=Kb[15],Wb));Fb=m.hiD;k.uniformMatrix4fv(Oa.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Qb[0]=Fb[0],Qb[1]=Fb[1],Qb[2]=Fb[2],Qb[3]=Fb[3],Qb[4]=Fb[4],Qb[5]=Fb[5],Qb[6]=Fb[6],Qb[7]=Fb[7],Qb[8]=Fb[8],Qb[9]=Fb[9],Qb[10]=Fb[10],Qb[11]=Fb[11],Qb[12]=Fb[12],Qb[13]=
Fb[13],Qb[14]=Fb[14],Qb[15]=Fb[15],Qb));Oc=m.resolution;Hc=Oc[0];hc=Oc[1];h&&Sc===Hc&&Xc===hc||(Sc=Hc,Xc=hc,k.uniform2f(R.location,Hc,hc));id=m.viewBoxPos;xb=id[0];Yc=id[1];h&&me===xb&&Tc===Yc||(me=xb,Tc=Yc,k.uniform2f(ha.location,xb,Yc));Ae=m.viewBoxSize;Qd=Ae[0];be=Ae[1];h&&Ka===Qd&&Gd===be||(Ka=Qd,Gd=be,k.uniform2f(ra.location,Qd,be));Ed=m.maskHeight;h&&ed===Ed||(ed=Ed,k.uniform1f(ga.location,Ed));Ec=m.drwLayer;h&&od===Ec||(od=Ec,k.uniform1f(v.location,Ec));jd=m.contextColor;$c=jd[0];Ad=jd[1];
te=jd[2];ue=jd[3];h&&kd===$c&&Cd===Ad&&je===te&&de===ue||(kd=$c,Cd=Ad,je=te,de=ue,k.uniform4f(Z.location,$c,Ad,te,ue));(ce=m.maskTexture)&&"framebuffer"===ce._reglType&&(ce=ce.color[0]);$d=ce._texture;k.uniform1i(qa.location,$d.bind());ne=m.offset;if(Yd=m.count)sd?k.drawElements(1,Yd,sd.type,ne<<(sd.type-5121>>1)):k.drawArrays(1,ne,Yd),x.viewportWidth=qe,x.viewportHeight=Ub,$d.unbind()}na.unbind();da.dirty=!0;Ib.setVAO(null);da.profile=d},draw:function(c){var g,e,d,h,m,l;g=la.next;g!==la.cur&&(g?
k.bindFramebuffer(36160,g.framebuffer):k.bindFramebuffer(36160,null),la.cur=g);if(da.dirty){g=ze[0];l=ze[1];e=ze[2];d=ze[3];if(g!==qd[0]||l!==qd[1]||e!==qd[2]||d!==qd[3])k.colorMask(g,l,e,d),qd[0]=g,qd[1]=l,qd[2]=e,qd[3]=d;g=kc.frontFace;g!==da.frontFace&&(k.frontFace(g),da.frontFace=g);g=kc.polygonOffset_enable;g!==da.polygonOffset_enable&&(g?k.enable(32823):k.disable(32823),da.polygonOffset_enable=g);g=Jd[0];l=Jd[1];if(g!==fd[0]||l!==fd[1])k.polygonOffset(g,l),fd[0]=g,fd[1]=l;g=kc.sample_alpha;
g!==da.sample_alpha&&(g?k.enable(32926):k.disable(32926),da.sample_alpha=g);g=kc.sample_enable;g!==da.sample_enable&&(g?k.enable(32928):k.disable(32928),da.sample_enable=g);g=Xd[0];l=Xd[1];if(g!==Kd[0]||l!==Kd[1])k.sampleCoverage(g,l),Kd[0]=g,Kd[1]=l;g=kc.stencil_enable;g!==da.stencil_enable&&(g?k.enable(2960):k.disable(2960),da.stencil_enable=g);g=kc.stencil_mask;g!==da.stencil_mask&&(k.stencilMask(g),da.stencil_mask=g);g=bf[0];l=bf[1];e=bf[2];if(g!==yd[0]||l!==yd[1]||e!==yd[2])k.stencilFunc(g,l,
e),yd[0]=g,yd[1]=l,yd[2]=e;g=Ud[0];l=Ud[1];e=Ud[2];d=Ud[3];if(g!==ie[0]||l!==ie[1]||e!==ie[2]||d!==ie[3])k.stencilOpSeparate(g,l,e,d),ie[0]=g,ie[1]=l,ie[2]=e,ie[3]=d;g=De[0];l=De[1];e=De[2];d=De[3];if(g!==Td[0]||l!==Td[1]||e!==Td[2]||d!==Td[3])k.stencilOpSeparate(g,l,e,d),Td[0]=g,Td[1]=l,Td[2]=e,Td[3]=d}ld.height=c.viewportHeight;ld.width=c.viewportWidth;ld.x=c.viewportX;ld.y=c.viewportY;e=ld.x|0;d=ld.y|0;h="width"in ld?ld.width|0:x.framebufferWidth-e;m="height"in ld?ld.height|0:x.framebufferHeight-
d;g=x.viewportWidth;x.viewportWidth=h;l=x.viewportHeight;x.viewportHeight=m;k.viewport(e,d,h,m);rd[0]=e;rd[1]=d;rd[2]=h;rd[3]=m;k.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;k.disable(3042);da.blend_enable=!1;k.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;k.blendFuncSeparate(770,771,1,1);xd[0]=770;xd[1]=771;xd[2]=1;xd[3]=1;k.enable(2884);da.cull_enable=!0;k.cullFace(1029);da.cull_face=1029;k.enable(2929);da.depth_enable=!0;k.depthFunc(513);da.depth_func=513;k.depthMask(!0);da.depth_mask=
!0;k.depthRange(0,1);se[0]=0;se[1]=1;k.disable(3024);da.dither=!1;k.lineWidth(2);da.lineWidth=2;wd.height=c.scissorHeight;wd.width=c.scissorWidth;wd.x=c.scissorX;wd.y=c.scissorY;e=wd.x|0;d=wd.y|0;h="width"in wd?wd.width|0:x.framebufferWidth-e;m="height"in wd?wd.height|0:x.framebufferHeight-d;k.scissor(e,d,h,m);yf[0]=e;yf[1]=d;yf[2]=h;yf[3]=m;k.enable(3089);da.scissor_enable=!0;e=da.profile;da.profile=!1;k.useProgram(n.program);Ib.setVAO(null);d=ec.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);
if(h.type!==I.dtype||4!==h.size||h.buffer!==I||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,I.buffer),k.vertexAttribPointer(d,4,I.dtype,!1,0,0),h.type=I.dtype,h.size=4,h.buffer=I,h.normalized=!1,h.offset=0,h.stride=0;d=pc.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==f.dtype||4!==h.size||h.buffer!==f||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,f.buffer),k.vertexAttribPointer(d,4,f.dtype,!1,0,0),h.type=f.dtype,h.size=4,h.buffer=f,h.normalized=
!1,h.offset=0,h.stride=0;d=lc.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==b.dtype||4!==h.size||h.buffer!==b||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(d,4,b.dtype,!1,0,0),h.type=b.dtype,h.size=4,h.buffer=b,h.normalized=!1,h.offset=0,h.stride=0;d=ud.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==r.dtype||4!==h.size||h.buffer!==r||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,r.buffer),
k.vertexAttribPointer(d,4,r.dtype,!1,0,0),h.type=r.dtype,h.size=4,h.buffer=r,h.normalized=!1,h.offset=0,h.stride=0;d=wc.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==a.dtype||4!==h.size||h.buffer!==a||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,a.buffer),k.vertexAttribPointer(d,4,a.dtype,!1,0,0),h.type=a.dtype,h.size=4,h.buffer=a,h.normalized=!1,h.offset=0,h.stride=0;d=ca.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==u.dtype||4!==h.size||
h.buffer!==u||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,u.buffer),k.vertexAttribPointer(d,4,u.dtype,!1,0,0),h.type=u.dtype,h.size=4,h.buffer=u,h.normalized=!1,h.offset=0,h.stride=0;d=M.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==A.dtype||4!==h.size||h.buffer!==A||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(d,4,A.dtype,!1,0,0),h.type=A.dtype,h.size=4,h.buffer=A,h.normalized=!1,h.offset=0,h.stride=0;d=
ka.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==Q.dtype||4!==h.size||h.buffer!==Q||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,Q.buffer),k.vertexAttribPointer(d,4,Q.dtype,!1,0,0),h.type=Q.dtype,h.size=4,h.buffer=Q,h.normalized=!1,h.offset=0,h.stride=0;d=Ca.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==G.dtype||4!==h.size||h.buffer!==G||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,G.buffer),k.vertexAttribPointer(d,
4,G.dtype,!1,0,0),h.type=G.dtype,h.size=4,h.buffer=G,h.normalized=!1,h.offset=0,h.stride=0;d=Gb.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==D.dtype||4!==h.size||h.buffer!==D||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,D.buffer),k.vertexAttribPointer(d,4,D.dtype,!1,0,0),h.type=D.dtype,h.size=4,h.buffer=D,h.normalized=!1,h.offset=0,h.stride=0;d=Jc.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==w.dtype||4!==h.size||h.buffer!==w||!1!==h.normalized||
0!==h.offset||0!==h.stride)k.bindBuffer(34962,w.buffer),k.vertexAttribPointer(d,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;d=Wc.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==C.dtype||4!==h.size||h.buffer!==C||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,C.buffer),k.vertexAttribPointer(d,4,C.dtype,!1,0,0),h.type=C.dtype,h.size=4,h.buffer=C,h.normalized=!1,h.offset=0,h.stride=0;d=F.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);
if(h.type!==B.dtype||4!==h.size||h.buffer!==B||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,B.buffer),k.vertexAttribPointer(d,4,B.dtype,!1,0,0),h.type=B.dtype,h.size=4,h.buffer=B,h.normalized=!1,h.offset=0,h.stride=0;d=y.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==z.dtype||4!==h.size||h.buffer!==z||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,z.buffer),k.vertexAttribPointer(d,4,z.dtype,!1,0,0),h.type=z.dtype,h.size=4,h.buffer=z,h.normalized=
!1,h.offset=0,h.stride=0;d=ia.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==J.dtype||4!==h.size||h.buffer!==J||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,J.buffer),k.vertexAttribPointer(d,4,J.dtype,!1,0,0),h.type=J.dtype,h.size=4,h.buffer=J,h.normalized=!1,h.offset=0,h.stride=0;d=Na.location;h=H[d];h.buffer||k.enableVertexAttribArray(d);if(h.type!==P.dtype||4!==h.size||h.buffer!==P||!1!==h.normalized||0!==h.offset||0!==h.stride)k.bindBuffer(34962,P.buffer),
k.vertexAttribPointer(d,4,P.dtype,!1,0,0),h.type=P.dtype,h.size=4,h.buffer=P,h.normalized=!1,h.offset=0,h.stride=0;d=c.dim0A;k.uniformMatrix4fv(K.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(pd[0]=d[0],pd[1]=d[1],pd[2]=d[2],pd[3]=d[3],pd[4]=d[4],pd[5]=d[5],pd[6]=d[6],pd[7]=d[7],pd[8]=d[8],pd[9]=d[9],pd[10]=d[10],pd[11]=d[11],pd[12]=d[12],pd[13]=d[13],pd[14]=d[14],pd[15]=d[15],pd));d=c.dim1A;k.uniformMatrix4fv(L.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(dd[0]=d[0],dd[1]=
d[1],dd[2]=d[2],dd[3]=d[3],dd[4]=d[4],dd[5]=d[5],dd[6]=d[6],dd[7]=d[7],dd[8]=d[8],dd[9]=d[9],dd[10]=d[10],dd[11]=d[11],dd[12]=d[12],dd[13]=d[13],dd[14]=d[14],dd[15]=d[15],dd));d=c.dim0B;k.uniformMatrix4fv(N.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(zc[0]=d[0],zc[1]=d[1],zc[2]=d[2],zc[3]=d[3],zc[4]=d[4],zc[5]=d[5],zc[6]=d[6],zc[7]=d[7],zc[8]=d[8],zc[9]=d[9],zc[10]=d[10],zc[11]=d[11],zc[12]=d[12],zc[13]=d[13],zc[14]=d[14],zc[15]=d[15],zc));d=c.dim1B;k.uniformMatrix4fv($b.location,!1,
Array.isArray(d)||d instanceof Float32Array?d:(sd[0]=d[0],sd[1]=d[1],sd[2]=d[2],sd[3]=d[3],sd[4]=d[4],sd[5]=d[5],sd[6]=d[6],sd[7]=d[7],sd[8]=d[8],sd[9]=d[9],sd[10]=d[10],sd[11]=d[11],sd[12]=d[12],sd[13]=d[13],sd[14]=d[14],sd[15]=d[15],sd));d=c.dim0C;k.uniformMatrix4fv(U.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(gd[0]=d[0],gd[1]=d[1],gd[2]=d[2],gd[3]=d[3],gd[4]=d[4],gd[5]=d[5],gd[6]=d[6],gd[7]=d[7],gd[8]=d[8],gd[9]=d[9],gd[10]=d[10],gd[11]=d[11],gd[12]=d[12],gd[13]=d[13],gd[14]=d[14],
gd[15]=d[15],gd));d=c.dim1C;k.uniformMatrix4fv($a.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Kc[0]=d[0],Kc[1]=d[1],Kc[2]=d[2],Kc[3]=d[3],Kc[4]=d[4],Kc[5]=d[5],Kc[6]=d[6],Kc[7]=d[7],Kc[8]=d[8],Kc[9]=d[9],Kc[10]=d[10],Kc[11]=d[11],Kc[12]=d[12],Kc[13]=d[13],Kc[14]=d[14],Kc[15]=d[15],Kc));d=c.dim0D;k.uniformMatrix4fv(sa.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(sc[0]=d[0],sc[1]=d[1],sc[2]=d[2],sc[3]=d[3],sc[4]=d[4],sc[5]=d[5],sc[6]=d[6],sc[7]=d[7],sc[8]=d[8],sc[9]=d[9],
sc[10]=d[10],sc[11]=d[11],sc[12]=d[12],sc[13]=d[13],sc[14]=d[14],sc[15]=d[15],sc));d=c.dim1D;k.uniformMatrix4fv(T.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(ab[0]=d[0],ab[1]=d[1],ab[2]=d[2],ab[3]=d[3],ab[4]=d[4],ab[5]=d[5],ab[6]=d[6],ab[7]=d[7],ab[8]=d[8],ab[9]=d[9],ab[10]=d[10],ab[11]=d[11],ab[12]=d[12],ab[13]=d[13],ab[14]=d[14],ab[15]=d[15],ab));d=c.loA;k.uniformMatrix4fv(dc.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(jc[0]=d[0],jc[1]=d[1],jc[2]=d[2],jc[3]=d[3],jc[4]=
d[4],jc[5]=d[5],jc[6]=d[6],jc[7]=d[7],jc[8]=d[8],jc[9]=d[9],jc[10]=d[10],jc[11]=d[11],jc[12]=d[12],jc[13]=d[13],jc[14]=d[14],jc[15]=d[15],jc));d=c.hiA;k.uniformMatrix4fv(ja.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Eb[0]=d[0],Eb[1]=d[1],Eb[2]=d[2],Eb[3]=d[3],Eb[4]=d[4],Eb[5]=d[5],Eb[6]=d[6],Eb[7]=d[7],Eb[8]=d[8],Eb[9]=d[9],Eb[10]=d[10],Eb[11]=d[11],Eb[12]=d[12],Eb[13]=d[13],Eb[14]=d[14],Eb[15]=d[15],Eb));d=c.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(d)||d instanceof Float32Array?
d:(rc[0]=d[0],rc[1]=d[1],rc[2]=d[2],rc[3]=d[3],rc[4]=d[4],rc[5]=d[5],rc[6]=d[6],rc[7]=d[7],rc[8]=d[8],rc[9]=d[9],rc[10]=d[10],rc[11]=d[11],rc[12]=d[12],rc[13]=d[13],rc[14]=d[14],rc[15]=d[15],rc));d=c.hiB;k.uniformMatrix4fv(ea.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Ta[0]=d[0],Ta[1]=d[1],Ta[2]=d[2],Ta[3]=d[3],Ta[4]=d[4],Ta[5]=d[5],Ta[6]=d[6],Ta[7]=d[7],Ta[8]=d[8],Ta[9]=d[9],Ta[10]=d[10],Ta[11]=d[11],Ta[12]=d[12],Ta[13]=d[13],Ta[14]=d[14],Ta[15]=d[15],Ta));d=c.loC;k.uniformMatrix4fv(aa.location,
!1,Array.isArray(d)||d instanceof Float32Array?d:(Ic[0]=d[0],Ic[1]=d[1],Ic[2]=d[2],Ic[3]=d[3],Ic[4]=d[4],Ic[5]=d[5],Ic[6]=d[6],Ic[7]=d[7],Ic[8]=d[8],Ic[9]=d[9],Ic[10]=d[10],Ic[11]=d[11],Ic[12]=d[12],Ic[13]=d[13],Ic[14]=d[14],Ic[15]=d[15],Ic));d=c.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(ac[0]=d[0],ac[1]=d[1],ac[2]=d[2],ac[3]=d[3],ac[4]=d[4],ac[5]=d[5],ac[6]=d[6],ac[7]=d[7],ac[8]=d[8],ac[9]=d[9],ac[10]=d[10],ac[11]=d[11],ac[12]=d[12],ac[13]=d[13],ac[14]=
d[14],ac[15]=d[15],ac));d=c.loD;k.uniformMatrix4fv(ib.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Zc[0]=d[0],Zc[1]=d[1],Zc[2]=d[2],Zc[3]=d[3],Zc[4]=d[4],Zc[5]=d[5],Zc[6]=d[6],Zc[7]=d[7],Zc[8]=d[8],Zc[9]=d[9],Zc[10]=d[10],Zc[11]=d[11],Zc[12]=d[12],Zc[13]=d[13],Zc[14]=d[14],Zc[15]=d[15],Zc));d=c.hiD;k.uniformMatrix4fv(Oa.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(Dd[0]=d[0],Dd[1]=d[1],Dd[2]=d[2],Dd[3]=d[3],Dd[4]=d[4],Dd[5]=d[5],Dd[6]=d[6],Dd[7]=d[7],Dd[8]=d[8],Dd[9]=d[9],
Dd[10]=d[10],Dd[11]=d[11],Dd[12]=d[12],Dd[13]=d[13],Dd[14]=d[14],Dd[15]=d[15],Dd));d=c.resolution;k.uniform2f(R.location,d[0],d[1]);d=c.viewBoxPos;k.uniform2f(ha.location,d[0],d[1]);d=c.viewBoxSize;k.uniform2f(ra.location,d[0],d[1]);k.uniform1f(ga.location,c.maskHeight);k.uniform1f(v.location,c.drwLayer);d=c.contextColor;k.uniform4f(Z.location,d[0],d[1],d[2],d[3]);(d=c.maskTexture)&&"framebuffer"===d._reglType&&(d=d.color[0]);d=d._texture;k.uniform1i(qa.location,d.bind());k.uniform1i(va.location,
W.bind());(h=E.elements)?k.bindBuffer(34963,h.buffer.buffer):Ib.currentVAO&&(h=za.getElements(Ib.currentVAO.elements))&&k.bindBuffer(34963,h.buffer.buffer);m=c.offset;if(c=c.count)h?k.drawElements(1,c,h.type,m<<(h.type-5121>>1)):k.drawArrays(1,m,c),da.dirty=!0,Ib.setVAO(null),x.viewportWidth=g,x.viewportHeight=l,da.profile=e,d.unbind(),W.unbind()},scope:function(e,k,p){var n,v,y,M,H,F,ca,N,K,L,la,U,T,aa,W,R,ha,ka,Z,ia,ea,za,ga,ja,va,ta,pc,ab,ra,Ta,Ca,xa,La,Kd,Eb,Ib,Wa,ya,Ud,Da,ac,Fc,Kc,sa,gd,Vb,jc,
Sa,sb,sc,Fa,Pc,Qa,Ba,ud,qd,qa,dd,Ab,cb,na,zc,rc,yd,Td,Ic,Ac,Zc,Hb,Ga,Gb,mb,wb,rd,sd,ie,Jc,Qb,pd,wc,vd,Wb,Ea,md,Ue,Kb,Fb,re,xd,Jd,yf,De,Dd,ec,bf,$a,Na,lc,Xd,ze,Oa,ib,fd,se,Ec,$b,Ha,Wc,kd,dc,Cb,Ka,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe,Ne,Ke,pe,Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,of,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf,pf,lf,qf,Af,Bf,Me,ye,mf,nf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf,cg,Qf,Rf,qg,df,$e,Lf,Mf,dg,eg,fg,gg,hg,Uf,Sf,Vf,Wf,Xf,ig,rg,
sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Nf,Of,jg,kg,lg,mg,ng,Yf,Tf,Zf,$f,ag,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ld.height=e.viewportHeight;ld.width=e.viewportWidth;ld.x=e.viewportX;ld.y=e.viewportY;n=ld.x|0;v=ld.y|0;y="width"in ld?ld.width|0:x.framebufferWidth-n;M="height"in ld?ld.height|0:x.framebufferHeight-v;H=x.viewportWidth;x.viewportWidth=y;F=x.viewportHeight;x.viewportHeight=M;ca=le[0];le[0]=
n;N=le[1];le[1]=v;K=le[2];le[2]=y;L=le[3];le[3]=M;la=yb[0];yb[0]=0;U=yb[1];yb[1]=0;T=yb[2];yb[2]=0;aa=yb[3];yb[3]=0;W=kc.blend_enable;kc.blend_enable=!1;R=qe[0];qe[0]=32774;ha=qe[1];qe[1]=32774;ka=td[0];td[0]=770;Z=td[1];td[1]=771;ia=td[2];td[2]=1;ea=td[3];td[3]=1;za=kc.cull_enable;kc.cull_enable=!0;ga=kc.cull_face;kc.cull_face=1029;ja=kc.depth_enable;kc.depth_enable=!0;va=kc.depth_func;kc.depth_func=513;ta=kc.depth_mask;kc.depth_mask=!0;pc=Sd[0];Sd[0]=0;ab=Sd[1];Sd[1]=1;ra=kc.dither;kc.dither=!1;
Ta=kc.lineWidth;kc.lineWidth=2;wd.height=e.scissorHeight;wd.width=e.scissorWidth;wd.x=e.scissorX;wd.y=e.scissorY;Ca=wd.x|0;xa=wd.y|0;La="width"in wd?wd.width|0:x.framebufferWidth-Ca;Kd="height"in wd?wd.height|0:x.framebufferHeight-xa;Eb=Ze[0];Ze[0]=Ca;Ib=Ze[1];Ze[1]=xa;Wa=Ze[2];Ze[2]=La;ya=Ze[3];Ze[3]=Kd;Ud=kc.scissor_enable;kc.scissor_enable=!0;Da=da.profile;da.profile=!1;ac=e.offset;Fc=E.offset;E.offset=ac;Kc=e.count;sa=E.count;E.count=Kc;gd=E.primitive;E.primitive=1;Vb=e.contextColor;jc=m[24];
m[24]=Vb;Sa=e.dim0A;sb=m[3];m[3]=Sa;sc=e.dim0B;Fa=m[5];m[5]=sc;Pc=e.dim0C;Qa=m[7];m[7]=Pc;Ba=e.dim0D;ud=m[9];m[9]=Ba;qd=e.dim1A;qa=m[4];m[4]=qd;dd=e.dim1B;Ab=m[6];m[6]=dd;cb=e.dim1C;na=m[8];m[8]=cb;zc=e.dim1D;rc=m[10];m[10]=zc;yd=e.drwLayer;Td=m[23];m[23]=yd;Ic=e.hiA;Ac=m[12];m[12]=Ic;Zc=e.hiB;Hb=m[14];m[14]=Zc;Ga=e.hiC;Gb=m[16];m[16]=Ga;mb=e.hiD;wb=m[18];m[18]=mb;rd=e.loA;sd=m[11];m[11]=rd;ie=e.loB;Jc=m[13];m[13]=ie;Qb=e.loC;pd=m[15];m[15]=Qb;wc=e.loD;vd=m[17];m[17]=wc;Wb=e.maskHeight;Ea=m[22];m[22]=
Wb;md=e.maskTexture;Ue=m[25];m[25]=md;Kb=m[26];m[26]=S;Fb=e.resolution;re=m[19];m[19]=Fb;xd=e.viewBoxPos;Jd=m[20];m[20]=xd;yf=e.viewBoxSize;De=m[21];m[21]=yf;Dd=t.buffer;t.buffer=P;ec=t.divisor;t.divisor=0;bf=t.normalized;t.normalized=!1;$a=t.offset;t.offset=0;Na=t.size;t.size=0;lc=t.state;t.state=1;Xd=t.stride;t.stride=0;ze=t.type;t.type=P.dtype;Oa=t.w;t.w=0;ib=t.x;t.x=0;fd=t.y;t.y=0;se=t.z;t.z=0;Ec=h.buffer;h.buffer=I;$b=h.divisor;h.divisor=0;Ha=h.normalized;h.normalized=!1;Wc=h.offset;h.offset=
0;kd=h.size;h.size=0;dc=h.state;h.state=1;Cb=h.stride;h.stride=0;Ka=h.type;h.type=I.dtype;je=h.w;h.w=0;ue=h.x;h.x=0;de=h.y;h.y=0;ce=h.z;h.z=0;$d=g.buffer;g.buffer=f;ne=g.divisor;g.divisor=0;Yd=g.normalized;g.normalized=!1;fe=g.offset;g.offset=0;yc=g.size;g.size=0;Vc=g.state;g.state=1;oe=g.stride;g.stride=0;he=g.type;g.type=f.dtype;Fd=g.w;g.w=0;Id=g.x;g.x=0;Md=g.y;g.y=0;Nd=g.z;g.z=0;ge=l.buffer;l.buffer=b;Ee=l.divisor;l.divisor=0;we=l.normalized;l.normalized=!1;ke=l.offset;l.offset=0;Xe=l.size;l.size=
0;Ne=l.state;l.state=1;Ke=l.stride;l.stride=0;pe=l.type;l.type=b.dtype;Be=l.w;l.w=0;Fe=l.x;l.x=0;Ge=l.y;l.y=0;He=l.z;l.z=0;Ce=V.buffer;V.buffer=r;Hd=V.divisor;V.divisor=0;Rd=V.normalized;V.normalized=!1;Wd=V.offset;V.offset=0;Zd=V.size;V.size=0;Ie=V.state;V.state=1;zd=V.stride;V.stride=0;Od=V.type;V.type=r.dtype;xe=V.w;V.w=0;Je=V.x;V.x=0;of=V.y;V.y=0;We=V.z;V.z=0;Oe=X.buffer;X.buffer=a;Le=X.divisor;X.divisor=0;Ve=X.normalized;X.normalized=!1;Se=X.offset;X.offset=0;Pe=X.size;X.size=0;Qe=X.state;X.state=
1;Pd=X.stride;X.stride=0;Vd=X.type;X.type=a.dtype;Re=X.w;X.w=0;ff=X.x;X.x=0;kf=X.y;X.y=0;cf=X.z;X.z=0;gf=q.buffer;q.buffer=u;hf=q.divisor;q.divisor=0;jf=q.normalized;q.normalized=!1;pf=q.offset;q.offset=0;lf=q.size;q.size=0;qf=q.state;q.state=1;Af=q.stride;q.stride=0;Bf=q.type;q.type=u.dtype;Me=q.w;q.w=0;ye=q.x;q.x=0;mf=q.y;q.y=0;nf=q.z;q.z=0;Cf=pa.buffer;pa.buffer=A;Ff=pa.divisor;pa.divisor=0;zf=pa.normalized;pa.normalized=!1;Df=pa.offset;pa.offset=0;Ef=pa.size;pa.size=0;uf=pa.state;pa.state=1;vf=
pa.stride;pa.stride=0;tf=pa.type;pa.type=A.dtype;wf=pa.w;pa.w=0;xf=pa.x;pa.x=0;Hf=pa.y;pa.y=0;If=pa.z;pa.z=0;Jf=O.buffer;O.buffer=Q;Kf=O.divisor;O.divisor=0;rf=O.normalized;O.normalized=!1;Pf=O.offset;O.offset=0;Gf=O.size;O.size=0;sf=O.state;O.state=1;cg=O.stride;O.stride=0;Qf=O.type;O.type=Q.dtype;Rf=O.w;O.w=0;qg=O.x;O.x=0;df=O.y;O.y=0;$e=O.z;O.z=0;Lf=Y.buffer;Y.buffer=G;Mf=Y.divisor;Y.divisor=0;dg=Y.normalized;Y.normalized=!1;eg=Y.offset;Y.offset=0;fg=Y.size;Y.size=0;gg=Y.state;Y.state=1;hg=Y.stride;
Y.stride=0;Uf=Y.type;Y.type=G.dtype;Sf=Y.w;Y.w=0;Vf=Y.x;Y.x=0;Wf=Y.y;Y.y=0;Xf=Y.z;Y.z=0;ig=c.buffer;c.buffer=D;rg=c.divisor;c.divisor=0;sg=c.normalized;c.normalized=!1;tg=c.offset;c.offset=0;ug=c.size;c.size=0;vg=c.state;c.state=1;wg=c.stride;c.stride=0;xg=c.type;c.type=D.dtype;yg=c.w;c.w=0;zg=c.x;c.x=0;Ag=c.y;c.y=0;Bg=c.z;c.z=0;ef=d.buffer;d.buffer=w;af=d.divisor;d.divisor=0;Nf=d.normalized;d.normalized=!1;Of=d.offset;d.offset=0;jg=d.size;d.size=0;kg=d.state;d.state=1;lg=d.stride;d.stride=0;mg=d.type;
d.type=w.dtype;ng=d.w;d.w=0;Yf=d.x;d.x=0;Tf=d.y;d.y=0;Zf=d.z;d.z=0;$f=ba.buffer;ba.buffer=C;ag=ba.divisor;ba.divisor=0;og=ba.normalized;ba.normalized=!1;Cg=ba.offset;ba.offset=0;Dg=ba.size;ba.size=0;Eg=ba.state;ba.state=1;Fg=ba.stride;ba.stride=0;Gg=ba.type;ba.type=C.dtype;Hg=ba.w;ba.w=0;Ig=ba.x;ba.x=0;Jg=ba.y;ba.y=0;Kg=ba.z;ba.z=0;Lg=oa.buffer;oa.buffer=B;Mg=oa.divisor;oa.divisor=0;Ng=oa.normalized;oa.normalized=!1;Og=oa.offset;oa.offset=0;Pg=oa.size;oa.size=0;Qg=oa.state;oa.state=1;Rg=oa.stride;
oa.stride=0;Sg=oa.type;oa.type=B.dtype;Tg=oa.w;oa.w=0;Ug=oa.x;oa.x=0;Vg=oa.y;oa.y=0;Wg=oa.z;oa.z=0;Xg=Tc.buffer;Tc.buffer=z;Yg=Tc.divisor;Tc.divisor=0;Zg=Tc.normalized;Tc.normalized=!1;$g=Tc.offset;Tc.offset=0;ah=Tc.size;Tc.size=0;bh=Tc.state;Tc.state=1;ch=Tc.stride;Tc.stride=0;dh=Tc.type;Tc.type=z.dtype;eh=Tc.w;Tc.w=0;fh=Tc.x;Tc.x=0;gh=Tc.y;Tc.y=0;hh=Tc.z;Tc.z=0;ih=xb.buffer;xb.buffer=J;jh=xb.divisor;xb.divisor=0;kh=xb.normalized;xb.normalized=!1;lh=xb.offset;xb.offset=0;mh=xb.size;xb.size=0;nh=
xb.state;xb.state=1;oh=xb.stride;xb.stride=0;ph=xb.type;xb.type=J.dtype;qh=xb.w;xb.w=0;rh=xb.x;xb.x=0;sh=xb.y;xb.y=0;th=xb.z;xb.z=0;uh=fa.vert;fa.vert=2;vh=fa.frag;fa.frag=1;da.dirty=!0;k(x,e,p);x.viewportWidth=H;x.viewportHeight=F;le[0]=ca;le[1]=N;le[2]=K;le[3]=L;yb[0]=la;yb[1]=U;yb[2]=T;yb[3]=aa;kc.blend_enable=W;qe[0]=R;qe[1]=ha;td[0]=ka;td[1]=Z;td[2]=ia;td[3]=ea;kc.cull_enable=za;kc.cull_face=ga;kc.depth_enable=ja;kc.depth_func=va;kc.depth_mask=ta;Sd[0]=pc;Sd[1]=ab;kc.dither=ra;kc.lineWidth=Ta;
Ze[0]=Eb;Ze[1]=Ib;Ze[2]=Wa;Ze[3]=ya;kc.scissor_enable=Ud;da.profile=Da;E.offset=Fc;E.count=sa;E.primitive=gd;m[24]=jc;m[3]=sb;m[5]=Fa;m[7]=Qa;m[9]=ud;m[4]=qa;m[6]=Ab;m[8]=na;m[10]=rc;m[23]=Td;m[12]=Ac;m[14]=Hb;m[16]=Gb;m[18]=wb;m[11]=sd;m[13]=Jc;m[15]=pd;m[17]=vd;m[22]=Ea;m[25]=Ue;m[26]=Kb;m[19]=re;m[20]=Jd;m[21]=De;t.buffer=Dd;t.divisor=ec;t.normalized=bf;t.offset=$a;t.size=Na;t.state=lc;t.stride=Xd;t.type=ze;t.w=Oa;t.x=ib;t.y=fd;t.z=se;h.buffer=Ec;h.divisor=$b;h.normalized=Ha;h.offset=Wc;h.size=
kd;h.state=dc;h.stride=Cb;h.type=Ka;h.w=je;h.x=ue;h.y=de;h.z=ce;g.buffer=$d;g.divisor=ne;g.normalized=Yd;g.offset=fe;g.size=yc;g.state=Vc;g.stride=oe;g.type=he;g.w=Fd;g.x=Id;g.y=Md;g.z=Nd;l.buffer=ge;l.divisor=Ee;l.normalized=we;l.offset=ke;l.size=Xe;l.state=Ne;l.stride=Ke;l.type=pe;l.w=Be;l.x=Fe;l.y=Ge;l.z=He;V.buffer=Ce;V.divisor=Hd;V.normalized=Rd;V.offset=Wd;V.size=Zd;V.state=Ie;V.stride=zd;V.type=Od;V.w=xe;V.x=Je;V.y=of;V.z=We;X.buffer=Oe;X.divisor=Le;X.normalized=Ve;X.offset=Se;X.size=Pe;X.state=
Qe;X.stride=Pd;X.type=Vd;X.w=Re;X.x=ff;X.y=kf;X.z=cf;q.buffer=gf;q.divisor=hf;q.normalized=jf;q.offset=pf;q.size=lf;q.state=qf;q.stride=Af;q.type=Bf;q.w=Me;q.x=ye;q.y=mf;q.z=nf;pa.buffer=Cf;pa.divisor=Ff;pa.normalized=zf;pa.offset=Df;pa.size=Ef;pa.state=uf;pa.stride=vf;pa.type=tf;pa.w=wf;pa.x=xf;pa.y=Hf;pa.z=If;O.buffer=Jf;O.divisor=Kf;O.normalized=rf;O.offset=Pf;O.size=Gf;O.state=sf;O.stride=cg;O.type=Qf;O.w=Rf;O.x=qg;O.y=df;O.z=$e;Y.buffer=Lf;Y.divisor=Mf;Y.normalized=dg;Y.offset=eg;Y.size=fg;Y.state=
gg;Y.stride=hg;Y.type=Uf;Y.w=Sf;Y.x=Vf;Y.y=Wf;Y.z=Xf;c.buffer=ig;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;d.buffer=ef;d.divisor=af;d.normalized=Nf;d.offset=Of;d.size=jg;d.state=kg;d.stride=lg;d.type=mg;d.w=ng;d.x=Yf;d.y=Tf;d.z=Zf;ba.buffer=$f;ba.divisor=ag;ba.normalized=og;ba.offset=Cg;ba.size=Dg;ba.state=Eg;ba.stride=Fg;ba.type=Gg;ba.w=Hg;ba.x=Ig;ba.y=Jg;ba.z=Kg;oa.buffer=Lg;oa.divisor=Mg;oa.normalized=Ng;oa.offset=Og;oa.size=
Pg;oa.state=Qg;oa.stride=Rg;oa.type=Sg;oa.w=Tg;oa.x=Ug;oa.y=Vg;oa.z=Wg;Tc.buffer=Xg;Tc.divisor=Yg;Tc.normalized=Zg;Tc.offset=$g;Tc.size=ah;Tc.state=bh;Tc.stride=ch;Tc.type=dh;Tc.w=eh;Tc.x=fh;Tc.y=gh;Tc.z=hh;xb.buffer=ih;xb.divisor=jh;xb.normalized=kh;xb.offset=lh;xb.size=mh;xb.state=nh;xb.stride=oh;xb.type=ph;xb.w=qh;xb.x=rh;xb.y=sh;xb.z=th;fa.vert=uh;fa.frag=vh;da.dirty=!0}}},$1:function(e,p){var n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,Y,c;n=e.attributes;I=e.current;f=e.framebuffer;
b=e.gl;r=e.next;a=e.vao;u=r.blend_color;A=I.blend_color;Q=r.blend_equation;G=I.blend_equation;D=r.blend_func;w=I.blend_func;C=r.colorMask;B=I.colorMask;z=r.depth_range;J=I.depth_range;P=r.polygonOffset_offset;W=I.polygonOffset_offset;S=r.sample_coverage;t=I.sample_coverage;h=r.scissor_box;g=I.scissor_box;l=r.stencil_func;V=I.stencil_func;X=r.stencil_opBack;q=I.stencil_opBack;pa=r.stencil_opFront;O=I.stencil_opFront;Y=r.viewport;c=I.viewport;return{poll:function(){var a,e,p,n,xb,Cb,na,Na,Z,K,N,U,sa,
L,$b,$a,T,v,ja,ea,Ea,Oa;I.dirty=!1;e=r.blend_enable;p=r.cull_enable;n=r.depth_enable;xb=r.dither;Cb=r.polygonOffset_enable;na=r.sample_alpha;Na=r.sample_enable;Z=r.scissor_enable;K=r.stencil_enable;N=r.cull_face;U=I.cull_face;sa=r.depth_func;L=I.depth_func;$b=r.depth_mask;$a=I.depth_mask;T=r.frontFace;v=I.frontFace;ja=r.lineWidth;ea=I.lineWidth;Ea=r.stencil_mask;Oa=I.stencil_mask;a=f.next;a!==f.cur&&(a?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null),f.cur=a);e!==I.blend_enable&&
(e?b.enable(3042):b.disable(3042),I.blend_enable=e);p!==I.cull_enable&&(p?b.enable(2884):b.disable(2884),I.cull_enable=p);n!==I.depth_enable&&(n?b.enable(2929):b.disable(2929),I.depth_enable=n);xb!==I.dither&&(xb?b.enable(3024):b.disable(3024),I.dither=xb);Cb!==I.polygonOffset_enable&&(Cb?b.enable(32823):b.disable(32823),I.polygonOffset_enable=Cb);na!==I.sample_alpha&&(na?b.enable(32926):b.disable(32926),I.sample_alpha=na);Na!==I.sample_enable&&(Na?b.enable(32928):b.disable(32928),I.sample_enable=
Na);Z!==I.scissor_enable&&(Z?b.enable(3089):b.disable(3089),I.scissor_enable=Z);K!==I.stencil_enable&&(K?b.enable(2960):b.disable(2960),I.stencil_enable=K);if(u[0]!==A[0]||u[1]!==A[1]||u[2]!==A[2]||u[3]!==A[3])b.blendColor(u[0],u[1],u[2],u[3]),A[0]=u[0],A[1]=u[1],A[2]=u[2],A[3]=u[3];if(Q[0]!==G[0]||Q[1]!==G[1])b.blendEquationSeparate(Q[0],Q[1]),G[0]=Q[0],G[1]=Q[1];if(D[0]!==w[0]||D[1]!==w[1]||D[2]!==w[2]||D[3]!==w[3])b.blendFuncSeparate(D[0],D[1],D[2],D[3]),w[0]=D[0],w[1]=D[1],w[2]=D[2],w[3]=D[3];
if(C[0]!==B[0]||C[1]!==B[1]||C[2]!==B[2]||C[3]!==B[3])b.colorMask(C[0],C[1],C[2],C[3]),B[0]=C[0],B[1]=C[1],B[2]=C[2],B[3]=C[3];N!==U&&(b.cullFace(N),I.cull_face=N);sa!==L&&(b.depthFunc(sa),I.depth_func=sa);$b!==$a&&(b.depthMask($b),I.depth_mask=$b);if(z[0]!==J[0]||z[1]!==J[1])b.depthRange(z[0],z[1]),J[0]=z[0],J[1]=z[1];T!==v&&(b.frontFace(T),I.frontFace=T);ja!==ea&&(b.lineWidth(ja),I.lineWidth=ja);if(P[0]!==W[0]||P[1]!==W[1])b.polygonOffset(P[0],P[1]),W[0]=P[0],W[1]=P[1];if(S[0]!==t[0]||S[1]!==t[1])b.sampleCoverage(S[0],
S[1]),t[0]=S[0],t[1]=S[1];if(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3])b.scissor(h[0],h[1],h[2],h[3]),g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3];if(l[0]!==V[0]||l[1]!==V[1]||l[2]!==V[2])b.stencilFunc(l[0],l[1],l[2]),V[0]=l[0],V[1]=l[1],V[2]=l[2];Ea!==Oa&&(b.stencilMask(Ea),I.stencil_mask=Ea);if(X[0]!==q[0]||X[1]!==q[1]||X[2]!==q[2]||X[3]!==q[3])b.stencilOpSeparate(X[0],X[1],X[2],X[3]),q[0]=X[0],q[1]=X[1],q[2]=X[2],q[3]=X[3];if(pa[0]!==O[0]||pa[1]!==O[1]||pa[2]!==O[2]||pa[3]!==O[3])b.stencilOpSeparate(pa[0],
pa[1],pa[2],pa[3]),O[0]=pa[0],O[1]=pa[1],O[2]=pa[2],O[3]=pa[3];if(Y[0]!==c[0]||Y[1]!==c[1]||Y[2]!==c[2]||Y[3]!==c[3])b.viewport(Y[0],Y[1],Y[2],Y[3]),c[0]=Y[0],c[1]=Y[1],c[2]=Y[2],c[3]=Y[3]},refresh:function(){var d,e,oa,Tc,xb,Cb,na,Na,Z,K,N,U,sa,L,$b,$a;I.dirty=!1;e=r.blend_enable;oa=r.cull_enable;Tc=r.depth_enable;xb=r.dither;Cb=r.polygonOffset_enable;na=r.sample_alpha;Na=r.sample_enable;Z=r.scissor_enable;K=r.stencil_enable;N=r.cull_face;U=r.depth_func;sa=r.depth_mask;L=r.frontFace;$b=r.lineWidth;
$a=r.stencil_mask;(d=f.next)?b.bindFramebuffer(36160,d.framebuffer):b.bindFramebuffer(36160,null);f.cur=d;d=n[0];d.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(0,d.divisor);d=n[1];d.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(1,d.size,d.type,
d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(1,d.divisor);d=n[2];d.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(2),b.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(2,d.divisor);d=n[3];d.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,d.buffer.buffer),
b.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(3,d.divisor);d=n[4];d.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(4),b.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(4,d.divisor);d=n[5];d.buffer?(b.enableVertexAttribArray(5),
b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(5,d.divisor);d=n[6];d.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(6,d.divisor);
d=n[7];d.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(7,d.divisor);d=n[8];d.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=
null);p.vertexAttribDivisorANGLE(8,d.divisor);d=n[9];d.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(9,d.divisor);d=n[10];d.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(10,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(10),
b.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(10,d.divisor);d=n[11];d.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(11,d.divisor);d=n[12];d.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(12,d.divisor);d=n[13];d.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(13,d.divisor);d=n[14];d.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,d.buffer.buffer),
b.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(14,d.divisor);d=n[15];d.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,d.buffer.buffer),b.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(b.disableVertexAttribArray(15),b.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);p.vertexAttribDivisorANGLE(15,d.divisor);a.currentVAO=null;a.setVAO(a.targetVAO);
e?b.enable(3042):b.disable(3042);I.blend_enable=e;oa?b.enable(2884):b.disable(2884);I.cull_enable=oa;Tc?b.enable(2929):b.disable(2929);I.depth_enable=Tc;xb?b.enable(3024):b.disable(3024);I.dither=xb;Cb?b.enable(32823):b.disable(32823);I.polygonOffset_enable=Cb;na?b.enable(32926):b.disable(32926);I.sample_alpha=na;Na?b.enable(32928):b.disable(32928);I.sample_enable=Na;Z?b.enable(3089):b.disable(3089);I.scissor_enable=Z;K?b.enable(2960):b.disable(2960);I.stencil_enable=K;b.blendColor(u[0],u[1],u[2],
u[3]);A[0]=u[0];A[1]=u[1];A[2]=u[2];A[3]=u[3];b.blendEquationSeparate(Q[0],Q[1]);G[0]=Q[0];G[1]=Q[1];b.blendFuncSeparate(D[0],D[1],D[2],D[3]);w[0]=D[0];w[1]=D[1];w[2]=D[2];w[3]=D[3];b.colorMask(C[0],C[1],C[2],C[3]);B[0]=C[0];B[1]=C[1];B[2]=C[2];B[3]=C[3];b.cullFace(N);I.cull_face=N;b.depthFunc(U);I.depth_func=U;b.depthMask(sa);I.depth_mask=sa;b.depthRange(z[0],z[1]);J[0]=z[0];J[1]=z[1];b.frontFace(L);I.frontFace=L;b.lineWidth($b);I.lineWidth=$b;b.polygonOffset(P[0],P[1]);W[0]=P[0];W[1]=P[1];b.sampleCoverage(S[0],
S[1]);t[0]=S[0];t[1]=S[1];b.scissor(h[0],h[1],h[2],h[3]);g[0]=h[0];g[1]=h[1];g[2]=h[2];g[3]=h[3];b.stencilFunc(l[0],l[1],l[2]);V[0]=l[0];V[1]=l[1];V[2]=l[2];b.stencilMask($a);I.stencil_mask=$a;b.stencilOpSeparate(X[0],X[1],X[2],X[3]);q[0]=X[0];q[1]=X[1];q[2]=X[2];q[3]=X[3];b.stencilOpSeparate(pa[0],pa[1],pa[2],pa[3]);O[0]=pa[0];O[1]=pa[1];O[2]=pa[2];O[3]=pa[3];b.viewport(Y[0],Y[1],Y[2],Y[3]);c[0]=Y[0];c[1]=Y[1];c[2]=Y[2];c[3]=Y[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(e,
p,n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,Tc,xb,Cb,na,Na,Z,K,N,U,sa,L,$b,$a){var T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa,ec,pc,lc,ud,wc,ca,M,ka,Ca,Gb,Jc,Wc,F,y,ia,va,R,ha,ra,H,x,da,E,za,la,k,kc,fa,m,Ib,yb;T=e.attributes;v=e.buffer;ja=e.context;ea=e.current;Ea=e.draw;Oa=e.elements;dc=e.extensions;Ha=e.framebuffer;aa=e.gl;ib=e.isBufferArgs;ga=e.next;qa=e.shader;ec=e.uniforms;pc=e.vao;lc=ga.blend_color;ud=ea.blend_color;wc=ga.blend_equation;ca=ea.blend_equation;M=ga.blend_func;
ka=ea.blend_func;Ca=ga.colorMask;Gb=ea.colorMask;Jc=ga.depth_range;Wc=ea.depth_range;F=ga.polygonOffset_offset;y=ea.polygonOffset_offset;ia=ga.sample_coverage;va=ea.sample_coverage;R=ga.scissor_box;ha=ea.scissor_box;ra=ga.stencil_func;H=ea.stencil_func;x=ga.stencil_opBack;da=ea.stencil_opBack;E=ga.stencil_opFront;za=ea.stencil_opFront;la=ga.viewport;k=ea.viewport;kc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};fa={};fa.buffer=n;fa.divisor=1;m={};m.buffer=
I;m.divisor=1;Ib={};Ib.buffer=f;Ib.divisor=1;yb={};yb.buffer=b;yb.divisor=1;return{batch:function(a,b){var f,g,e,h,l,n;f=Ha.next;f!==Ha.cur&&(f?aa.bindFramebuffer(36160,f.framebuffer):aa.bindFramebuffer(36160,null),Ha.cur=f);if(ea.dirty){var r,t,u,M,z,I,C,B,P,A,la,W,R,Q,V,X,J,ma,S,qa,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,wc;r=ga.dither;r!==ea.dither&&(r?aa.enable(3024):aa.disable(3024),ea.dither=r);t=ga.depth_func;t!==ea.depth_func&&(aa.depthFunc(t),ea.depth_func=t);u=Jc[0];M=Jc[1];if(u!==Wc[0]||M!==
Wc[1])aa.depthRange(u,M),Wc[0]=u,Wc[1]=M;z=ga.depth_mask;z!==ea.depth_mask&&(aa.depthMask(z),ea.depth_mask=z);I=Ca[0];C=Ca[1];B=Ca[2];P=Ca[3];if(I!==Gb[0]||C!==Gb[1]||B!==Gb[2]||P!==Gb[3])aa.colorMask(I,C,B,P),Gb[0]=I,Gb[1]=C,Gb[2]=B,Gb[3]=P;A=ga.cull_enable;A!==ea.cull_enable&&(A?aa.enable(2884):aa.disable(2884),ea.cull_enable=A);la=ga.cull_face;la!==ea.cull_face&&(aa.cullFace(la),ea.cull_face=la);W=ga.frontFace;W!==ea.frontFace&&(aa.frontFace(W),ea.frontFace=W);R=ga.lineWidth;R!==ea.lineWidth&&
(aa.lineWidth(R),ea.lineWidth=R);Q=ga.polygonOffset_enable;Q!==ea.polygonOffset_enable&&(Q?aa.enable(32823):aa.disable(32823),ea.polygonOffset_enable=Q);V=F[0];X=F[1];if(V!==y[0]||X!==y[1])aa.polygonOffset(V,X),y[0]=V,y[1]=X;J=ga.sample_alpha;J!==ea.sample_alpha&&(J?aa.enable(32926):aa.disable(32926),ea.sample_alpha=J);ma=ga.sample_enable;ma!==ea.sample_enable&&(ma?aa.enable(32928):aa.disable(32928),ea.sample_enable=ma);S=ia[0];qa=ia[1];if(S!==va[0]||qa!==va[1])aa.sampleCoverage(S,qa),va[0]=S,va[1]=
qa;sd=ga.stencil_enable;sd!==ea.stencil_enable&&(sd?aa.enable(2960):aa.disable(2960),ea.stencil_enable=sd);gd=ga.stencil_mask;gd!==ea.stencil_mask&&(aa.stencilMask(gd),ea.stencil_mask=gd);Kc=ra[0];sc=ra[1];ab=ra[2];if(Kc!==H[0]||sc!==H[1]||ab!==H[2])aa.stencilFunc(Kc,sc,ab),H[0]=Kc,H[1]=sc,H[2]=ab;jc=E[0];Eb=E[1];rc=E[2];Ta=E[3];if(jc!==za[0]||Eb!==za[1]||rc!==za[2]||Ta!==za[3])aa.stencilOpSeparate(jc,Eb,rc,Ta),za[0]=jc,za[1]=Eb,za[2]=rc,za[3]=Ta;Ic=x[0];ac=x[1];Zc=x[2];wc=x[3];if(Ic!==da[0]||ac!==
da[1]||Zc!==da[2]||wc!==da[3])aa.stencilOpSeparate(Ic,ac,Zc,wc),da[0]=Ic,da[1]=ac,da[2]=Zc,da[3]=wc}aa.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;aa.enable(3042);ea.blend_enable=!0;aa.blendEquationSeparate(32774,32774);ca[0]=32774;ca[1]=32774;aa.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;aa.disable(2929);ea.depth_enable=!1;aa.enable(3089);ea.scissor_enable=!0;if(g=ea.profile)e=performance.now(),p.count+=b;aa.useProgram(q.program);h=dc.angle_instanced_arrays;var md,
Ac,Vb,Fc,Pc,La,sb,Wa;pc.setVAO(null);md=xb.location;Ac=T[md];Ac.buffer||aa.enableVertexAttribArray(md);if(5126!==Ac.type||2!==Ac.size||Ac.buffer!==G||!1!==Ac.normalized||0!==Ac.offset||24!==Ac.stride)aa.bindBuffer(34962,G.buffer),aa.vertexAttribPointer(md,2,5126,!1,24,0),Ac.type=5126,Ac.size=2,Ac.buffer=G,Ac.normalized=!1,Ac.offset=0,Ac.stride=24;0!==Ac.divisor&&(h.vertexAttribDivisorANGLE(md,0),Ac.divisor=0);Vb=na.location;Fc=T[Vb];Fc.buffer||aa.enableVertexAttribArray(Vb);if(5126!==Fc.type||2!==
Fc.size||Fc.buffer!==D||!1!==Fc.normalized||8!==Fc.offset||24!==Fc.stride)aa.bindBuffer(34962,D.buffer),aa.vertexAttribPointer(Vb,2,5126,!1,24,8),Fc.type=5126,Fc.size=2,Fc.buffer=D,Fc.normalized=!1,Fc.offset=8,Fc.stride=24;0!==Fc.divisor&&(h.vertexAttribDivisorANGLE(Vb,0),Fc.divisor=0);Pc=ba.location;La=T[Pc];La.buffer||aa.enableVertexAttribArray(Pc);if(5126!==La.type||2!==La.size||La.buffer!==w||!1!==La.normalized||16!==La.offset||24!==La.stride)aa.bindBuffer(34962,w.buffer),aa.vertexAttribPointer(Pc,
2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=w,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(h.vertexAttribDivisorANGLE(Pc,0),La.divisor=0);(sb=Ea.elements)?aa.bindBuffer(34963,sb.buffer.buffer):pc.currentVAO&&(sb=Oa.getElements(pc.currentVAO.elements))&&aa.bindBuffer(34963,sb.buffer.buffer);Wa=Ea.offset;for(l=0;l<b;++l){n=a[l];var ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ec,Zb,Rb,lc,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,
Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc,Te,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,pg,me,Yc,Ka,Ae,Qd,ve,be,Gd,Ed,ed,Ec;ta=n.viewport;vd=ta.x|0;Ab=ta.y|0;Sa="width"in ta?ta.width|0:ja.framebufferWidth-vd;Hb="height"in ta?ta.height|0:ja.framebufferHeight-Ab;cb=ja.viewportWidth;ja.viewportWidth=Sa;Wb=ja.viewportHeight;ja.viewportHeight=Hb;aa.viewport(vd,Ab,Sa,Hb);k[0]=vd;k[1]=Ab;k[2]=Sa;k[3]=Hb;Qb=n.viewport;ec=Qb.x|0;Zb=
Qb.y|0;Rb="width"in Qb?Qb.width|0:ja.framebufferWidth-ec;lc="height"in Qb?Qb.height|0:ja.framebufferHeight-Zb;aa.scissor(ec,Zb,Rb,lc);ha[0]=ec;ha[1]=Zb;ha[2]=Rb;ha[3]=lc;Sb=pa.call(this,ja,n,l);Ib.offset=Sb;Ma=!1;nb=null;tb=0;gb=!1;qc=Pa=0;Xb=1;Uc=0;db=5126;jb=cc=Gc=mc=0;ib(Ib)?(Ma=!0,nb=v.createStream(34962,Ib),db=nb.dtype):(nb=v.getBuffer(Ib))?db=nb.dtype:"constant"in Ib?(Xb=2,"number"===typeof Ib.constant?(Gc=Ib.constant,cc=jb=mc=0):(Gc=0<Ib.constant.length?Ib.constant[0]:0,cc=1<Ib.constant.length?
Ib.constant[1]:0,jb=2<Ib.constant.length?Ib.constant[2]:0,mc=3<Ib.constant.length?Ib.constant[3]:0)):(nb=ib(Ib.buffer)?v.createStream(34962,Ib.buffer):v.getBuffer(Ib.buffer),db="type"in Ib?kc[Ib.type]:nb.dtype,gb=!!Ib.normalized,qc=Ib.size|0,Pa=Ib.offset|0,Uc=Ib.stride|0,tb=Ib.divisor|0);kb=K.location;ua=T[kb];if(1===Xb){ua.buffer||aa.enableVertexAttribArray(kb);ob=qc||2;if(ua.type!==db||ua.size!==ob||ua.buffer!==nb||ua.normalized!==gb||ua.offset!==Pa||ua.stride!==Uc)aa.bindBuffer(34962,nb.buffer),
aa.vertexAttribPointer(kb,ob,db,gb,Uc,Pa),ua.type=db,ua.size=ob,ua.buffer=nb,ua.normalized=gb,ua.offset=Pa,ua.stride=Uc;ua.divisor!==tb&&(h.vertexAttribDivisorANGLE(kb,tb),ua.divisor=tb)}else if(ua.buffer&&(aa.disableVertexAttribArray(kb),ua.buffer=null),ua.x!==Gc||ua.y!==cc||ua.z!==jb||ua.w!==mc)aa.vertexAttrib4f(kb,Gc,cc,jb,mc),ua.x=Gc,ua.y=cc,ua.z=jb,ua.w=mc;wa=O.call(this,ja,n,l);yb.offset=wa;Ua=!1;bb=null;Aa=0;eb=!1;Bb=Ia=0;zb=1;Ra=0;oc=5126;xa=Tb=Za=Jb=0;ib(yb)?(Ua=!0,bb=v.createStream(34962,
yb),oc=bb.dtype):(bb=v.getBuffer(yb))?oc=bb.dtype:"constant"in yb?(zb=2,"number"===typeof yb.constant?(Za=yb.constant,Tb=xa=Jb=0):(Za=0<yb.constant.length?yb.constant[0]:0,Tb=1<yb.constant.length?yb.constant[1]:0,xa=2<yb.constant.length?yb.constant[2]:0,Jb=3<yb.constant.length?yb.constant[3]:0)):(bb=ib(yb.buffer)?v.createStream(34962,yb.buffer):v.getBuffer(yb.buffer),oc="type"in yb?kc[yb.type]:bb.dtype,eb=!!yb.normalized,Bb=yb.size|0,Ia=yb.offset|0,Ra=yb.stride|0,Aa=yb.divisor|0);ae=N.location;Ja=
T[ae];if(1===zb){Ja.buffer||aa.enableVertexAttribArray(ae);Nb=Bb||2;if(Ja.type!==oc||Ja.size!==Nb||Ja.buffer!==bb||Ja.normalized!==eb||Ja.offset!==Ia||Ja.stride!==Ra)aa.bindBuffer(34962,bb.buffer),aa.vertexAttribPointer(ae,Nb,oc,eb,Ra,Ia),Ja.type=oc,Ja.size=Nb,Ja.buffer=bb,Ja.normalized=eb,Ja.offset=Ia,Ja.stride=Ra;Ja.divisor!==Aa&&(h.vertexAttribDivisorANGLE(ae,Aa),Ja.divisor=Aa)}else if(Ja.buffer&&(aa.disableVertexAttribArray(ae),Ja.buffer=null),Ja.x!==Za||Ja.y!==Tb||Ja.z!==xa||Ja.w!==Jb)aa.vertexAttrib4f(ae,
Za,Tb,xa,Jb),Ja.x=Za,Ja.y=Tb,Ja.z=xa,Ja.w=Jb;fb=Y.call(this,ja,n,l);m.offset=fb;hb=!1;ya=null;fc=0;Da=!1;qb=pb=0;Xa=1;Ya=0;nc=5126;Lb=Va=uc=ad=0;ib(m)?(hb=!0,ya=v.createStream(34962,m),nc=ya.dtype):(ya=v.getBuffer(m))?nc=ya.dtype:"constant"in m?(Xa=2,"number"===typeof m.constant?(uc=m.constant,Va=Lb=ad=0):(uc=0<m.constant.length?m.constant[0]:0,Va=1<m.constant.length?m.constant[1]:0,Lb=2<m.constant.length?m.constant[2]:0,ad=3<m.constant.length?m.constant[3]:0)):(ya=ib(m.buffer)?v.createStream(34962,
m.buffer):v.getBuffer(m.buffer),nc="type"in m?kc[m.type]:ya.dtype,Da=!!m.normalized,qb=m.size|0,pb=m.offset|0,Ya=m.stride|0,fc=m.divisor|0);bd=Cb.location;Fa=T[bd];if(1===Xa){Fa.buffer||aa.enableVertexAttribArray(bd);xc=qb||4;if(Fa.type!==nc||Fa.size!==xc||Fa.buffer!==ya||Fa.normalized!==Da||Fa.offset!==pb||Fa.stride!==Ya)aa.bindBuffer(34962,ya.buffer),aa.vertexAttribPointer(bd,xc,nc,Da,Ya,pb),Fa.type=nc,Fa.size=xc,Fa.buffer=ya,Fa.normalized=Da,Fa.offset=pb,Fa.stride=Ya;Fa.divisor!==fc&&(h.vertexAttribDivisorANGLE(bd,
fc),Fa.divisor=fc)}else if(Fa.buffer&&(aa.disableVertexAttribArray(bd),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Lb||Fa.w!==ad)aa.vertexAttrib4f(bd,uc,Va,Lb,ad),Fa.x=uc,Fa.y=Va,Fa.z=Lb,Fa.w=ad;Qa=c.call(this,ja,n,l);fa.offset=Qa;Ba=!1;lb=null;ub=0;Db=!1;vc=rb=0;vb=1;Ld=0;tc=5126;hd=nd=Lc=Te=0;ib(fa)?(Ba=!0,lb=v.createStream(34962,fa),tc=lb.dtype):(lb=v.getBuffer(fa))?tc=lb.dtype:"constant"in fa?(vb=2,"number"===typeof fa.constant?(Lc=fa.constant,nd=hd=Te=0):(Lc=0<fa.constant.length?fa.constant[0]:
0,nd=1<fa.constant.length?fa.constant[1]:0,hd=2<fa.constant.length?fa.constant[2]:0,Te=3<fa.constant.length?fa.constant[3]:0)):(lb=ib(fa.buffer)?v.createStream(34962,fa.buffer):v.getBuffer(fa.buffer),tc="type"in fa?kc[fa.type]:lb.dtype,Db=!!fa.normalized,vc=fa.size|0,rb=fa.offset|0,Ld=fa.stride|0,ub=fa.divisor|0);Ub=Tc.location;bc=T[Ub];if(1===vb){bc.buffer||aa.enableVertexAttribArray(Ub);Ob=vc||4;if(bc.type!==tc||bc.size!==Ob||bc.buffer!==lb||bc.normalized!==Db||bc.offset!==rb||bc.stride!==Ld)aa.bindBuffer(34962,
lb.buffer),aa.vertexAttribPointer(Ub,Ob,tc,Db,Ld,rb),bc.type=tc,bc.size=Ob,bc.buffer=lb,bc.normalized=Db,bc.offset=rb,bc.stride=Ld;bc.divisor!==ub&&(h.vertexAttribDivisorANGLE(Ub,ub),bc.divisor=ub)}else if(bc.buffer&&(aa.disableVertexAttribArray(Ub),bc.buffer=null),bc.x!==Lc||bc.y!==nd||bc.z!==hd||bc.w!==Te)aa.vertexAttrib4f(Ub,Lc,nd,hd,Te),bc.x=Lc,bc.y=nd,bc.z=hd,bc.w=Te;Ga=d.call(this,ja,n,l);Yb=Ga[0];wb=Ga[1];Pb=Ga[2];ic=Ga[3];l&&mb===Yb&&Mb===wb&&gc===Pb&&Qc===ic||(mb=Yb,Mb=wb,gc=Pb,Qc=ic,aa.uniform4f($a.location,
Yb,wb,Pb,ic));Bc=n.lineWidth;l&&Cc===Bc||(Cc=Bc,aa.uniform1f(Na.location,Bc));Dc=n.capSize;l&&Mc===Dc||(Mc=Dc,aa.uniform1f(oa.location,Dc));cd=n.scale;Rc=cd[0];Kb=cd[1];l&&Nc===Rc&&Fb===Kb||(Nc=Rc,Fb=Kb,aa.uniform2f(U.location,Rc,Kb));Oc=n.scaleFract;Hc=Oc[0];hc=Oc[1];l&&Sc===Hc&&Xc===hc||(Sc=Hc,Xc=hc,aa.uniform2f(sa.location,Hc,hc));id=n.translate;pg=id[0];Yc=id[1];l&&me===pg&&Ka===Yc||(me=pg,Ka=Yc,aa.uniform2f(L.location,pg,Yc));Ae=n.translateFract;Qd=Ae[0];be=Ae[1];l&&ve===Qd&&Gd===be||(ve=Qd,
Gd=be,aa.uniform2f($b.location,Qd,be));Ed=n.opacity;l&&ed===Ed||(ed=Ed,aa.uniform1f(Z.location,Ed));Ec=n.count;0<Ec?sb?h.drawElementsInstancedANGLE(4,36,sb.type,Wa<<(sb.type-5121>>1),Ec):h.drawArraysInstancedANGLE(4,Wa,36,Ec):0>Ec&&(sb?aa.drawElements(4,36,sb.type,Wa<<(sb.type-5121>>1)):aa.drawArrays(4,Wa,36));ja.viewportWidth=cb;ja.viewportHeight=Wb;Ma&&v.destroyStream(nb);Ua&&v.destroyStream(bb);hb&&v.destroyStream(ya);Ba&&v.destroyStream(lb)}ea.dirty=!0;pc.setVAO(null);g&&(p.cpuTime+=performance.now()-
e)},draw:function(b){var c,d,f,g,e,h,l,n,q,t,M,z,I,B,O,P,la,W,R,V,X,J,Y,S,pa,qa,zc,wc,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,ec,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,lc,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc;c=Ha.next;c!==Ha.cur&&(c?aa.bindFramebuffer(36160,c.framebuffer):aa.bindFramebuffer(36160,null),Ha.cur=c);if(ea.dirty){var Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc,Te,Lc,nd,hd,Ub,
bc,Ob,Ga,Yb,mb;Da=ga.dither;Da!==ea.dither&&(Da?aa.enable(3024):aa.disable(3024),ea.dither=Da);pb=ga.depth_func;pb!==ea.depth_func&&(aa.depthFunc(pb),ea.depth_func=pb);qb=Jc[0];Xa=Jc[1];if(qb!==Wc[0]||Xa!==Wc[1])aa.depthRange(qb,Xa),Wc[0]=qb,Wc[1]=Xa;Ya=ga.depth_mask;Ya!==ea.depth_mask&&(aa.depthMask(Ya),ea.depth_mask=Ya);nc=Ca[0];ad=Ca[1];uc=Ca[2];Va=Ca[3];if(nc!==Gb[0]||ad!==Gb[1]||uc!==Gb[2]||Va!==Gb[3])aa.colorMask(nc,ad,uc,Va),Gb[0]=nc,Gb[1]=ad,Gb[2]=uc,Gb[3]=Va;Lb=ga.cull_enable;Lb!==ea.cull_enable&&
(Lb?aa.enable(2884):aa.disable(2884),ea.cull_enable=Lb);bd=ga.cull_face;bd!==ea.cull_face&&(aa.cullFace(bd),ea.cull_face=bd);Fa=ga.frontFace;Fa!==ea.frontFace&&(aa.frontFace(Fa),ea.frontFace=Fa);xc=ga.lineWidth;xc!==ea.lineWidth&&(aa.lineWidth(xc),ea.lineWidth=xc);Qa=ga.polygonOffset_enable;Qa!==ea.polygonOffset_enable&&(Qa?aa.enable(32823):aa.disable(32823),ea.polygonOffset_enable=Qa);Ba=F[0];lb=F[1];if(Ba!==y[0]||lb!==y[1])aa.polygonOffset(Ba,lb),y[0]=Ba,y[1]=lb;ub=ga.sample_alpha;ub!==ea.sample_alpha&&
(ub?aa.enable(32926):aa.disable(32926),ea.sample_alpha=ub);Db=ga.sample_enable;Db!==ea.sample_enable&&(Db?aa.enable(32928):aa.disable(32928),ea.sample_enable=Db);rb=ia[0];vc=ia[1];if(rb!==va[0]||vc!==va[1])aa.sampleCoverage(rb,vc),va[0]=rb,va[1]=vc;vb=ga.stencil_enable;vb!==ea.stencil_enable&&(vb?aa.enable(2960):aa.disable(2960),ea.stencil_enable=vb);Ld=ga.stencil_mask;Ld!==ea.stencil_mask&&(aa.stencilMask(Ld),ea.stencil_mask=Ld);tc=ra[0];Te=ra[1];Lc=ra[2];if(tc!==H[0]||Te!==H[1]||Lc!==H[2])aa.stencilFunc(tc,
Te,Lc),H[0]=tc,H[1]=Te,H[2]=Lc;nd=E[0];hd=E[1];Ub=E[2];bc=E[3];if(nd!==za[0]||hd!==za[1]||Ub!==za[2]||bc!==za[3])aa.stencilOpSeparate(nd,hd,Ub,bc),za[0]=nd,za[1]=hd,za[2]=Ub,za[3]=bc;Ob=x[0];Ga=x[1];Yb=x[2];mb=x[3];if(Ob!==da[0]||Ga!==da[1]||Yb!==da[2]||mb!==da[3])aa.stencilOpSeparate(Ob,Ga,Yb,mb),da[0]=Ob,da[1]=Ga,da[2]=Yb,da[3]=mb}d=b.viewport;f=d.x|0;g=d.y|0;e="width"in d?d.width|0:ja.framebufferWidth-f;h="height"in d?d.height|0:ja.framebufferHeight-g;l=ja.viewportWidth;ja.viewportWidth=e;n=ja.viewportHeight;
ja.viewportHeight=h;aa.viewport(f,g,e,h);k[0]=f;k[1]=g;k[2]=e;k[3]=h;aa.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;aa.enable(3042);ea.blend_enable=!0;aa.blendEquationSeparate(32774,32774);ca[0]=32774;ca[1]=32774;aa.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;aa.disable(2929);ea.depth_enable=!1;q=b.viewport;t=q.x|0;M=q.y|0;z="width"in q?q.width|0:ja.framebufferWidth-t;I="height"in q?q.height|0:ja.framebufferHeight-M;aa.scissor(t,M,z,I);ha[0]=t;ha[1]=M;ha[2]=z;ha[3]=
I;aa.enable(3089);ea.scissor_enable=!0;if(B=ea.profile)O=performance.now(),p.count++;aa.useProgram(r.program);P=dc.angle_instanced_arrays;pc.setVAO(null);la=a.call(this,ja,b,0);Ib.offset=la;W=!1;R=null;V=0;X=!1;Y=J=0;S=1;pa=0;qa=5126;Kc=gd=wc=zc=0;ib(Ib)?(W=!0,R=v.createStream(34962,Ib),qa=R.dtype):(R=v.getBuffer(Ib))?qa=R.dtype:"constant"in Ib?(S=2,"number"===typeof Ib.constant?(wc=Ib.constant,gd=Kc=zc=0):(wc=0<Ib.constant.length?Ib.constant[0]:0,gd=1<Ib.constant.length?Ib.constant[1]:0,Kc=2<Ib.constant.length?
Ib.constant[2]:0,zc=3<Ib.constant.length?Ib.constant[3]:0)):(R=ib(Ib.buffer)?v.createStream(34962,Ib.buffer):v.getBuffer(Ib.buffer),qa="type"in Ib?kc[Ib.type]:R.dtype,X=!!Ib.normalized,Y=Ib.size|0,J=Ib.offset|0,pa=Ib.stride|0,V=Ib.divisor|0);sc=K.location;ab=T[sc];if(1===S){ab.buffer||aa.enableVertexAttribArray(sc);jc=Y||2;if(ab.type!==qa||ab.size!==jc||ab.buffer!==R||ab.normalized!==X||ab.offset!==J||ab.stride!==pa)aa.bindBuffer(34962,R.buffer),aa.vertexAttribPointer(sc,jc,qa,X,pa,J),ab.type=qa,
ab.size=jc,ab.buffer=R,ab.normalized=X,ab.offset=J,ab.stride=pa;ab.divisor!==V&&(P.vertexAttribDivisorANGLE(sc,V),ab.divisor=V)}else if(ab.buffer&&(aa.disableVertexAttribArray(sc),ab.buffer=null),ab.x!==wc||ab.y!==gd||ab.z!==Kc||ab.w!==zc)aa.vertexAttrib4f(sc,wc,gd,Kc,zc),ab.x=wc,ab.y=gd,ab.z=Kc,ab.w=zc;Eb=u.call(this,ja,b,0);yb.offset=Eb;rc=!1;Ta=null;Ic=0;ac=!1;ec=Zc=0;md=1;Ac=0;Vb=5126;sb=La=Pc=Fc=0;ib(yb)?(rc=!0,Ta=v.createStream(34962,yb),Vb=Ta.dtype):(Ta=v.getBuffer(yb))?Vb=Ta.dtype:"constant"in
yb?(md=2,"number"===typeof yb.constant?(Pc=yb.constant,La=sb=Fc=0):(Pc=0<yb.constant.length?yb.constant[0]:0,La=1<yb.constant.length?yb.constant[1]:0,sb=2<yb.constant.length?yb.constant[2]:0,Fc=3<yb.constant.length?yb.constant[3]:0)):(Ta=ib(yb.buffer)?v.createStream(34962,yb.buffer):v.getBuffer(yb.buffer),Vb="type"in yb?kc[yb.type]:Ta.dtype,ac=!!yb.normalized,ec=yb.size|0,Zc=yb.offset|0,Ac=yb.stride|0,Ic=yb.divisor|0);Wa=N.location;ta=T[Wa];if(1===md){ta.buffer||aa.enableVertexAttribArray(Wa);vd=
ec||2;if(ta.type!==Vb||ta.size!==vd||ta.buffer!==Ta||ta.normalized!==ac||ta.offset!==Zc||ta.stride!==Ac)aa.bindBuffer(34962,Ta.buffer),aa.vertexAttribPointer(Wa,vd,Vb,ac,Ac,Zc),ta.type=Vb,ta.size=vd,ta.buffer=Ta,ta.normalized=ac,ta.offset=Zc,ta.stride=Ac;ta.divisor!==Ic&&(P.vertexAttribDivisorANGLE(Wa,Ic),ta.divisor=Ic)}else if(ta.buffer&&(aa.disableVertexAttribArray(Wa),ta.buffer=null),ta.x!==Pc||ta.y!==La||ta.z!==sb||ta.w!==Fc)aa.vertexAttrib4f(Wa,Pc,La,sb,Fc),ta.x=Pc,ta.y=La,ta.z=sb,ta.w=Fc;Ab=
A.call(this,ja,b,0);m.offset=Ab;Sa=!1;Hb=null;cb=0;Wb=!1;lc=Qb=0;Zb=1;Rb=0;Bd=5126;tb=nb=Ma=Sb=0;ib(m)?(Sa=!0,Hb=v.createStream(34962,m),Bd=Hb.dtype):(Hb=v.getBuffer(m))?Bd=Hb.dtype:"constant"in m?(Zb=2,"number"===typeof m.constant?(Ma=m.constant,nb=tb=Sb=0):(Ma=0<m.constant.length?m.constant[0]:0,nb=1<m.constant.length?m.constant[1]:0,tb=2<m.constant.length?m.constant[2]:0,Sb=3<m.constant.length?m.constant[3]:0)):(Hb=ib(m.buffer)?v.createStream(34962,m.buffer):v.getBuffer(m.buffer),Bd="type"in m?
kc[m.type]:Hb.dtype,Wb=!!m.normalized,lc=m.size|0,Qb=m.offset|0,Rb=m.stride|0,cb=m.divisor|0);gb=Cb.location;Pa=T[gb];if(1===Zb){Pa.buffer||aa.enableVertexAttribArray(gb);qc=lc||4;if(Pa.type!==Bd||Pa.size!==qc||Pa.buffer!==Hb||Pa.normalized!==Wb||Pa.offset!==Qb||Pa.stride!==Rb)aa.bindBuffer(34962,Hb.buffer),aa.vertexAttribPointer(gb,qc,Bd,Wb,Rb,Qb),Pa.type=Bd,Pa.size=qc,Pa.buffer=Hb,Pa.normalized=Wb,Pa.offset=Qb,Pa.stride=Rb;Pa.divisor!==cb&&(P.vertexAttribDivisorANGLE(gb,cb),Pa.divisor=cb)}else if(Pa.buffer&&
(aa.disableVertexAttribArray(gb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==nb||Pa.z!==tb||Pa.w!==Sb)aa.vertexAttrib4f(gb,Ma,nb,tb,Sb),Pa.x=Ma,Pa.y=nb,Pa.z=tb,Pa.w=Sb;Xb=Q.call(this,ja,b,0);fa.offset=Xb;Uc=!1;db=null;mc=0;Gc=!1;jb=cc=0;kb=1;ua=0;ob=5126;Aa=bb=Ua=wa=0;ib(fa)?(Uc=!0,db=v.createStream(34962,fa),ob=db.dtype):(db=v.getBuffer(fa))?ob=db.dtype:"constant"in fa?(kb=2,"number"===typeof fa.constant?(Ua=fa.constant,bb=Aa=wa=0):(Ua=0<fa.constant.length?fa.constant[0]:0,bb=1<fa.constant.length?fa.constant[1]:
0,Aa=2<fa.constant.length?fa.constant[2]:0,wa=3<fa.constant.length?fa.constant[3]:0)):(db=ib(fa.buffer)?v.createStream(34962,fa.buffer):v.getBuffer(fa.buffer),ob="type"in fa?kc[fa.type]:db.dtype,Gc=!!fa.normalized,jb=fa.size|0,cc=fa.offset|0,ua=fa.stride|0,mc=fa.divisor|0);eb=Tc.location;Ia=T[eb];if(1===kb){Ia.buffer||aa.enableVertexAttribArray(eb);Bb=jb||4;if(Ia.type!==ob||Ia.size!==Bb||Ia.buffer!==db||Ia.normalized!==Gc||Ia.offset!==cc||Ia.stride!==ua)aa.bindBuffer(34962,db.buffer),aa.vertexAttribPointer(eb,
Bb,ob,Gc,ua,cc),Ia.type=ob,Ia.size=Bb,Ia.buffer=db,Ia.normalized=Gc,Ia.offset=cc,Ia.stride=ua;Ia.divisor!==mc&&(P.vertexAttribDivisorANGLE(eb,mc),Ia.divisor=mc)}else if(Ia.buffer&&(aa.disableVertexAttribArray(eb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==bb||Ia.z!==Aa||Ia.w!==wa)aa.vertexAttrib4f(eb,Ua,bb,Aa,wa),Ia.x=Ua,Ia.y=bb,Ia.z=Aa,Ia.w=wa;zb=xb.location;Ra=T[zb];Ra.buffer||aa.enableVertexAttribArray(zb);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==G||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)aa.bindBuffer(34962,
G.buffer),aa.vertexAttribPointer(zb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=G,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(P.vertexAttribDivisorANGLE(zb,0),Ra.divisor=0);oc=na.location;Jb=T[oc];Jb.buffer||aa.enableVertexAttribArray(oc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==D||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)aa.bindBuffer(34962,D.buffer),aa.vertexAttribPointer(oc,2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=D,Jb.normalized=!1,Jb.offset=8,Jb.stride=
24;0!==Jb.divisor&&(P.vertexAttribDivisorANGLE(oc,0),Jb.divisor=0);Za=ba.location;Tb=T[Za];Tb.buffer||aa.enableVertexAttribArray(Za);if(5126!==Tb.type||2!==Tb.size||Tb.buffer!==w||!1!==Tb.normalized||16!==Tb.offset||24!==Tb.stride)aa.bindBuffer(34962,w.buffer),aa.vertexAttribPointer(Za,2,5126,!1,24,16),Tb.type=5126,Tb.size=2,Tb.buffer=w,Tb.normalized=!1,Tb.offset=16,Tb.stride=24;0!==Tb.divisor&&(P.vertexAttribDivisorANGLE(Za,0),Tb.divisor=0);xa=C.call(this,ja,b,0);aa.uniform4f($a.location,xa[0],xa[1],
xa[2],xa[3]);aa.uniform1f(Na.location,b.lineWidth);aa.uniform1f(oa.location,b.capSize);ae=b.scale;aa.uniform2f(U.location,ae[0],ae[1]);Ja=b.scaleFract;aa.uniform2f(sa.location,Ja[0],Ja[1]);Nb=b.translate;aa.uniform2f(L.location,Nb[0],Nb[1]);fb=b.translateFract;aa.uniform2f($b.location,fb[0],fb[1]);aa.uniform1f(Z.location,b.opacity);(hb=Ea.elements)?aa.bindBuffer(34963,hb.buffer.buffer):pc.currentVAO&&(hb=Oa.getElements(pc.currentVAO.elements))&&aa.bindBuffer(34963,hb.buffer.buffer);ya=Ea.offset;fc=
b.count;0<fc?hb?P.drawElementsInstancedANGLE(4,36,hb.type,ya<<(hb.type-5121>>1),fc):P.drawArraysInstancedANGLE(4,ya,36,fc):0>fc&&(hb?aa.drawElements(4,36,hb.type,ya<<(hb.type-5121>>1)):aa.drawArrays(4,ya,36));ea.dirty=!0;pc.setVAO(null);ja.viewportWidth=l;ja.viewportHeight=n;B&&(p.cpuTime+=performance.now()-O);W&&v.destroyStream(R);rc&&v.destroyStream(Ta);Sa&&v.destroyStream(Hb);Uc&&v.destroyStream(db)},scope:function(a,b,c){var d,f,e,k,n,q,r,x,u,y,E,H,F,I,da,ca,C,N,O,A,K,L,U,T,aa,Q,ha,ka,Z,ia,za,
ma,ba,va,pc,ra,Y,Ca,pa,sa,Vb,Fc,Pc,La,sb,Wa,ta,ud,Ab,Sa,na,cb,oa,Gb,Jc,Zb,Rb,$a,Sb,Ma,nb,tb,gb,Pa,Na,Xb,Oa,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,$b,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ha,tc,Wc,Lc,xb,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,dc,me,Yc,Tc,Cb,Ka,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe,Ne,Ke,pe,Be,Fe,Ge,He,Ce,Hd;
d=a.viewport;f=d.x|0;e=d.y|0;k="width"in d?d.width|0:ja.framebufferWidth-f;n="height"in d?d.height|0:ja.framebufferHeight-e;q=ja.viewportWidth;ja.viewportWidth=k;r=ja.viewportHeight;ja.viewportHeight=n;x=la[0];la[0]=f;u=la[1];la[1]=e;y=la[2];la[2]=k;E=la[3];la[3]=n;H=lc[0];lc[0]=0;F=lc[1];lc[1]=0;I=lc[2];lc[2]=0;da=lc[3];lc[3]=0;ca=ga.blend_enable;ga.blend_enable=!0;C=wc[0];wc[0]=32774;N=wc[1];wc[1]=32774;O=M[0];M[0]=770;A=M[1];M[1]=771;K=M[2];M[2]=773;L=M[3];M[3]=1;U=ga.depth_enable;ga.depth_enable=
!1;T=a.viewport;aa=T.x|0;Q=T.y|0;ha="width"in T?T.width|0:ja.framebufferWidth-aa;ka="height"in T?T.height|0:ja.framebufferHeight-Q;Z=R[0];R[0]=aa;ia=R[1];R[1]=Q;za=R[2];R[2]=ha;ma=R[3];R[3]=ka;ba=ga.scissor_enable;ga.scissor_enable=!0;if(va=ea.profile)pc=performance.now(),p.count++;ra=Ea.count;Ea.count=36;Y=a.count;Ca=Ea.instances;Ea.instances=Y;pa=Ea.primitive;Ea.primitive=4;sa=a.capSize;Vb=ec[5];ec[5]=sa;Fc=a.lineWidth;Pc=ec[4];ec[4]=Fc;La=a.opacity;sb=ec[10];ec[10]=La;Wa=a.range;ta=ec[18];ec[18]=
Wa;ud=a.scale;Ab=ec[6];ec[6]=ud;Sa=a.scaleFract;na=ec[7];ec[7]=Sa;cb=a.translate;oa=ec[8];ec[8]=cb;Gb=a.translateFract;Jc=ec[9];ec[9]=Gb;Zb=B.call(this,ja,a,c);Rb=ec[3];ec[3]=Zb;$a=z.buffer;z.buffer=w;Sb=z.divisor;z.divisor=0;Ma=z.normalized;z.normalized=!1;nb=z.offset;z.offset=16;tb=z.size;z.size=0;gb=z.state;z.state=1;Pa=z.stride;z.stride=24;Na=z.type;z.type=5126;Xb=z.w;z.w=0;Oa=z.x;z.x=0;db=z.y;z.y=0;mc=z.z;z.z=0;Gc=J.call(this,ja,a,c);fa.offset=Gc;cc=!1;jb=null;kb=0;ua=!1;wa=ob=0;Ua=1;bb=0;Aa=
5126;zb=Bb=Ia=eb=0;ib(fa)?(cc=!0,jb=v.createStream(34962,fa),Aa=jb.dtype):(jb=v.getBuffer(fa))?Aa=jb.dtype:"constant"in fa?(Ua=2,"number"===typeof fa.constant?(Ia=fa.constant,Bb=zb=eb=0):(Ia=0<fa.constant.length?fa.constant[0]:0,Bb=1<fa.constant.length?fa.constant[1]:0,zb=2<fa.constant.length?fa.constant[2]:0,eb=3<fa.constant.length?fa.constant[3]:0)):(jb=ib(fa.buffer)?v.createStream(34962,fa.buffer):v.getBuffer(fa.buffer),Aa="type"in fa?kc[fa.type]:jb.dtype,ua=!!fa.normalized,wa=fa.size|0,ob=fa.offset|
0,bb=fa.stride|0,kb=fa.divisor|0);Ra=P.buffer;P.buffer=jb;oc=P.divisor;P.divisor=kb;Jb=P.normalized;P.normalized=ua;Za=P.offset;P.offset=ob;Tb=P.size;P.size=wa;xa=P.state;P.state=Ua;$b=P.stride;P.stride=bb;Ja=P.type;P.type=Aa;Nb=P.w;P.w=eb;fb=P.x;P.x=Ia;hb=P.y;P.y=Bb;ya=P.z;P.z=zb;fc=W.buffer;W.buffer=G;Da=W.divisor;W.divisor=0;pb=W.normalized;W.normalized=!1;qb=W.offset;W.offset=0;Xa=W.size;W.size=0;Ya=W.state;W.state=1;nc=W.stride;W.stride=24;ad=W.type;W.type=5126;uc=W.w;W.w=0;Va=W.x;W.x=0;Lb=W.y;
W.y=0;bd=W.z;W.z=0;Fa=S.call(this,ja,a,c);m.offset=Fa;xc=!1;Qa=null;Ba=0;lb=!1;Db=ub=0;rb=1;vc=0;vb=5126;Lc=Wc=tc=Ha=0;ib(m)?(xc=!0,Qa=v.createStream(34962,m),vb=Qa.dtype):(Qa=v.getBuffer(m))?vb=Qa.dtype:"constant"in m?(rb=2,"number"===typeof m.constant?(tc=m.constant,Wc=Lc=Ha=0):(tc=0<m.constant.length?m.constant[0]:0,Wc=1<m.constant.length?m.constant[1]:0,Lc=2<m.constant.length?m.constant[2]:0,Ha=3<m.constant.length?m.constant[3]:0)):(Qa=ib(m.buffer)?v.createStream(34962,m.buffer):v.getBuffer(m.buffer),
vb="type"in m?kc[m.type]:Qa.dtype,lb=!!m.normalized,Db=m.size|0,ub=m.offset|0,vc=m.stride|0,Ba=m.divisor|0);xb=t.buffer;t.buffer=Qa;hd=t.divisor;t.divisor=Ba;Ub=t.normalized;t.normalized=lb;bc=t.offset;t.offset=ub;Ob=t.size;t.size=Db;Ga=t.state;t.state=rb;Yb=t.stride;t.stride=vc;mb=t.type;t.type=vb;wb=t.w;t.w=Ha;Mb=t.x;t.x=tc;Pb=t.y;t.y=Wc;gc=t.z;t.z=Lc;ic=h.buffer;h.buffer=D;Qc=h.divisor;h.divisor=0;Bc=h.normalized;h.normalized=!1;Cc=h.offset;h.offset=8;Dc=h.size;h.size=0;Mc=h.state;h.state=1;cd=
h.stride;h.stride=24;Rc=h.type;h.type=5126;Nc=h.w;h.w=0;Kb=h.x;h.x=0;Fb=h.y;h.y=0;Oc=h.z;h.z=0;Hc=g.call(this,ja,a,c);Ib.offset=Hc;Sc=!1;hc=null;Xc=0;id=!1;me=dc=0;Yc=1;Tc=0;Cb=5126;Gd=be=ve=Ka=0;ib(Ib)?(Sc=!0,hc=v.createStream(34962,Ib),Cb=hc.dtype):(hc=v.getBuffer(Ib))?Cb=hc.dtype:"constant"in Ib?(Yc=2,"number"===typeof Ib.constant?(ve=Ib.constant,be=Gd=Ka=0):(ve=0<Ib.constant.length?Ib.constant[0]:0,be=1<Ib.constant.length?Ib.constant[1]:0,Gd=2<Ib.constant.length?Ib.constant[2]:0,Ka=3<Ib.constant.length?
Ib.constant[3]:0)):(hc=ib(Ib.buffer)?v.createStream(34962,Ib.buffer):v.getBuffer(Ib.buffer),Cb="type"in Ib?kc[Ib.type]:hc.dtype,id=!!Ib.normalized,me=Ib.size|0,dc=Ib.offset|0,Tc=Ib.stride|0,Xc=Ib.divisor|0);Ed=l.buffer;l.buffer=hc;ed=l.divisor;l.divisor=Xc;Ec=l.normalized;l.normalized=id;od=l.offset;l.offset=dc;jd=l.size;l.size=me;$c=l.state;l.state=Yc;kd=l.stride;l.stride=Tc;Ad=l.type;l.type=Cb;Cd=l.w;l.w=Ka;te=l.x;l.x=ve;je=l.y;l.y=be;ue=l.z;l.z=Gd;de=V.call(this,ja,a,c);yb.offset=de;ce=!1;$d=null;
ne=0;Yd=!1;yc=fe=0;Vc=1;oe=0;he=5126;Nd=Md=Id=Fd=0;ib(yb)?(ce=!0,$d=v.createStream(34962,yb),he=$d.dtype):($d=v.getBuffer(yb))?he=$d.dtype:"constant"in yb?(Vc=2,"number"===typeof yb.constant?(Id=yb.constant,Md=Nd=Fd=0):(Id=0<yb.constant.length?yb.constant[0]:0,Md=1<yb.constant.length?yb.constant[1]:0,Nd=2<yb.constant.length?yb.constant[2]:0,Fd=3<yb.constant.length?yb.constant[3]:0)):($d=ib(yb.buffer)?v.createStream(34962,yb.buffer):v.getBuffer(yb.buffer),he="type"in yb?kc[yb.type]:$d.dtype,Yd=!!yb.normalized,
yc=yb.size|0,fe=yb.offset|0,oe=yb.stride|0,ne=yb.divisor|0);ge=X.buffer;X.buffer=$d;Ee=X.divisor;X.divisor=ne;we=X.normalized;X.normalized=Yd;ke=X.offset;X.offset=fe;Xe=X.size;X.size=yc;Ne=X.state;X.state=Vc;Ke=X.stride;X.stride=oe;pe=X.type;X.type=he;Be=X.w;X.w=Fd;Fe=X.x;X.x=Id;Ge=X.y;X.y=Md;He=X.z;X.z=Nd;Ce=qa.vert;qa.vert=2;Hd=qa.frag;qa.frag=1;ea.dirty=!0;b(ja,a,c);ja.viewportWidth=q;ja.viewportHeight=r;la[0]=x;la[1]=u;la[2]=y;la[3]=E;lc[0]=H;lc[1]=F;lc[2]=I;lc[3]=da;ga.blend_enable=ca;wc[0]=
C;wc[1]=N;M[0]=O;M[1]=A;M[2]=K;M[3]=L;ga.depth_enable=U;R[0]=Z;R[1]=ia;R[2]=za;R[3]=ma;ga.scissor_enable=ba;va&&(p.cpuTime+=performance.now()-pc);Ea.count=ra;Ea.instances=Ca;Ea.primitive=pa;ec[5]=Vb;ec[4]=Pc;ec[10]=sb;ec[18]=ta;ec[6]=Ab;ec[7]=na;ec[8]=oa;ec[9]=Jc;ec[3]=Rb;z.buffer=$a;z.divisor=Sb;z.normalized=Ma;z.offset=nb;z.size=tb;z.state=gb;z.stride=Pa;z.type=Na;z.w=Xb;z.x=Oa;z.y=db;z.z=mc;cc&&v.destroyStream(jb);P.buffer=Ra;P.divisor=oc;P.normalized=Jb;P.offset=Za;P.size=Tb;P.state=xa;P.stride=
$b;P.type=Ja;P.w=Nb;P.x=fb;P.y=hb;P.z=ya;W.buffer=fc;W.divisor=Da;W.normalized=pb;W.offset=qb;W.size=Xa;W.state=Ya;W.stride=nc;W.type=ad;W.w=uc;W.x=Va;W.y=Lb;W.z=bd;xc&&v.destroyStream(Qa);t.buffer=xb;t.divisor=hd;t.normalized=Ub;t.offset=bc;t.size=Ob;t.state=Ga;t.stride=Yb;t.type=mb;t.w=wb;t.x=Mb;t.y=Pb;t.z=gc;h.buffer=ic;h.divisor=Qc;h.normalized=Bc;h.offset=Cc;h.size=Dc;h.state=Mc;h.stride=cd;h.type=Rc;h.w=Nc;h.x=Kb;h.y=Fb;h.z=Oc;Sc&&v.destroyStream(hc);l.buffer=Ed;l.divisor=ed;l.normalized=Ec;
l.offset=od;l.size=jd;l.state=$c;l.stride=kd;l.type=Ad;l.w=Cd;l.x=te;l.y=je;l.z=ue;ce&&v.destroyStream($d);X.buffer=ge;X.divisor=Ee;X.normalized=we;X.offset=ke;X.size=Xe;X.state=Ne;X.stride=Ke;X.type=pe;X.w=Be;X.x=Fe;X.y=Ge;X.z=He;qa.vert=Ce;qa.frag=Hd;ea.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(e,p,n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,
Y,c,d,ba,oa,Tc,xb){var Cb,na,Na,Z,K,N,U,sa,L,$b,$a,T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa,ec,pc,lc,ud,wc,ca,M,ka,Ca,Gb,Jc,Wc,F,y,ia,va,R,ha,ra,H,x;Cb=e.attributes;na=e.buffer;Na=e.context;Z=e.current;K=e.draw;N=e.elements;U=e.extensions;sa=e.framebuffer;L=e.gl;$b=e.isBufferArgs;$a=e.next;T=e.shader;v=e.uniforms;ja=e.vao;ea=$a.blend_color;Ea=Z.blend_color;Oa=$a.blend_equation;dc=Z.blend_equation;Ha=$a.blend_func;aa=Z.blend_func;ib=$a.colorMask;ga=Z.colorMask;qa=$a.depth_range;ec=Z.depth_range;pc=$a.polygonOffset_offset;
lc=Z.polygonOffset_offset;ud=$a.sample_coverage;wc=Z.sample_coverage;ca=$a.scissor_box;M=Z.scissor_box;ka=$a.stencil_func;Ca=Z.stencil_func;Gb=$a.stencil_opBack;Jc=Z.stencil_opBack;Wc=$a.stencil_opFront;F=Z.stencil_opFront;y=$a.viewport;ia=Z.viewport;va={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};R={divisor:1,offset:8,stride:8};ha={divisor:1,offset:8,stride:8};ra={divisor:1,offset:16,stride:8};H={divisor:1,offset:16,stride:8};x={divisor:1,offset:0,
stride:4};return{batch:function(a,e){var n,r,k,v,u,m;n=sa.next;n!==sa.cur&&(n?L.bindFramebuffer(36160,n.framebuffer):L.bindFramebuffer(36160,null),sa.cur=n);if(Z.dirty){var w,y,z,I,ca,C,B,D,G,A,T,Q,ea,ma,Kd,Ze,Oa,bf,yd,De,Td,Ud,ie,le,rd,ld,wd,pd,dd,zc,sd,gd;w=$a.dither;w!==Z.dither&&(w?L.enable(3024):L.disable(3024),Z.dither=w);y=$a.depth_func;y!==Z.depth_func&&(L.depthFunc(y),Z.depth_func=y);z=qa[0];I=qa[1];if(z!==ec[0]||I!==ec[1])L.depthRange(z,I),ec[0]=z,ec[1]=I;ca=$a.depth_mask;ca!==Z.depth_mask&&
(L.depthMask(ca),Z.depth_mask=ca);C=ib[0];B=ib[1];D=ib[2];G=ib[3];if(C!==ga[0]||B!==ga[1]||D!==ga[2]||G!==ga[3])L.colorMask(C,B,D,G),ga[0]=C,ga[1]=B,ga[2]=D,ga[3]=G;A=$a.cull_enable;A!==Z.cull_enable&&(A?L.enable(2884):L.disable(2884),Z.cull_enable=A);T=$a.cull_face;T!==Z.cull_face&&(L.cullFace(T),Z.cull_face=T);Q=$a.frontFace;Q!==Z.frontFace&&(L.frontFace(Q),Z.frontFace=Q);ea=$a.lineWidth;ea!==Z.lineWidth&&(L.lineWidth(ea),Z.lineWidth=ea);ma=$a.polygonOffset_enable;ma!==Z.polygonOffset_enable&&(ma?
L.enable(32823):L.disable(32823),Z.polygonOffset_enable=ma);Kd=pc[0];Ze=pc[1];if(Kd!==lc[0]||Ze!==lc[1])L.polygonOffset(Kd,Ze),lc[0]=Kd,lc[1]=Ze;Oa=$a.sample_alpha;Oa!==Z.sample_alpha&&(Oa?L.enable(32926):L.disable(32926),Z.sample_alpha=Oa);bf=$a.sample_enable;bf!==Z.sample_enable&&(bf?L.enable(32928):L.disable(32928),Z.sample_enable=bf);yd=ud[0];De=ud[1];if(yd!==wc[0]||De!==wc[1])L.sampleCoverage(yd,De),wc[0]=yd,wc[1]=De;Td=$a.stencil_mask;Td!==Z.stencil_mask&&(L.stencilMask(Td),Z.stencil_mask=Td);
Ud=ka[0];ie=ka[1];le=ka[2];if(Ud!==Ca[0]||ie!==Ca[1]||le!==Ca[2])L.stencilFunc(Ud,ie,le),Ca[0]=Ud,Ca[1]=ie,Ca[2]=le;rd=Wc[0];ld=Wc[1];wd=Wc[2];pd=Wc[3];if(rd!==F[0]||ld!==F[1]||wd!==F[2]||pd!==F[3])L.stencilOpSeparate(rd,ld,wd,pd),F[0]=rd,F[1]=ld,F[2]=wd,F[3]=pd;dd=Gb[0];zc=Gb[1];sd=Gb[2];gd=Gb[3];if(dd!==Jc[0]||zc!==Jc[1]||sd!==Jc[2]||gd!==Jc[3])L.stencilOpSeparate(dd,zc,sd,gd),Jc[0]=dd,Jc[1]=zc,Jc[2]=sd,Jc[3]=gd}L.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;L.enable(3042);Z.blend_enable=
!0;L.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;L.blendFuncSeparate(770,771,773,1);aa[0]=770;aa[1]=771;aa[2]=773;aa[3]=1;L.enable(3089);Z.scissor_enable=!0;L.disable(2960);Z.stencil_enable=!1;if(r=Z.profile)k=performance.now(),p.count+=e;L.useProgram(J.program);v=U.angle_instanced_arrays;var Kc,sc,ab,jc,Eb;ja.setVAO(null);Kc=pa.location;sc=Cb[Kc];sc.buffer||L.enableVertexAttribArray(Kc);if(5126!==sc.type||1!==sc.size||sc.buffer!==f||!1!==sc.normalized||0!==sc.offset||8!==sc.stride)L.bindBuffer(34962,
f.buffer),L.vertexAttribPointer(Kc,1,5126,!1,8,0),sc.type=5126,sc.size=1,sc.buffer=f,sc.normalized=!1,sc.offset=0,sc.stride=8;0!==sc.divisor&&(v.vertexAttribDivisorANGLE(Kc,0),sc.divisor=0);ab=O.location;jc=Cb[ab];jc.buffer||L.enableVertexAttribArray(ab);if(5126!==jc.type||1!==jc.size||jc.buffer!==b||!1!==jc.normalized||4!==jc.offset||8!==jc.stride)L.bindBuffer(34962,b.buffer),L.vertexAttribPointer(ab,1,5126,!1,8,4),jc.type=5126,jc.size=1,jc.buffer=b,jc.normalized=!1,jc.offset=4,jc.stride=8;0!==jc.divisor&&
(v.vertexAttribDivisorANGLE(ab,0),jc.divisor=0);(Eb=K.elements)?L.bindBuffer(34963,Eb.buffer.buffer):ja.currentVAO&&(Eb=N.getElements(ja.currentVAO.elements))&&L.bindBuffer(34963,Eb.buffer.buffer);for(u=0;u<e;++u){m=a[u];var rc,Ta,Ic,ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,Ha,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc,Te,Lc,nd,hd,Ub,
bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,Ka,me,Yc,bg,Ae,Ye,ve,be,Gd,Ed,ed,Ec,od,jd,$c;rc=m.viewport;Ta=rc.x|0;Ic=rc.y|0;ac="width"in rc?rc.width|0:Na.framebufferWidth-Ta;Zc="height"in rc?rc.height|0:Na.framebufferHeight-Ic;Dd=Na.viewportWidth;Na.viewportWidth=ac;md=Na.viewportHeight;Na.viewportHeight=Zc;L.viewport(Ta,Ic,ac,Zc);ia[0]=Ta;ia[1]=Ic;ia[2]=ac;ia[3]=Zc;(Ac=P.call(this,Na,m,u))?L.enable(2929):L.disable(2929);Z.depth_enable=Ac;Vb=m.viewport;Fc=Vb.x|0;Pc=
Vb.y|0;La="width"in Vb?Vb.width|0:Na.framebufferWidth-Fc;sb="height"in Vb?Vb.height|0:Na.framebufferHeight-Pc;L.scissor(Fc,Pc,La,sb);M[0]=Fc;M[1]=Pc;M[2]=La;M[3]=sb;R.buffer=m.positionBuffer;Wa=!1;ta=null;vd=0;Ab=!1;Hb=Sa=0;cb=1;Wb=0;Qb=5126;Bd=Rb=Zb=Ha=0;$b(R)?(Wa=!0,ta=na.createStream(34962,R),Qb=ta.dtype):(ta=na.getBuffer(R))?Qb=ta.dtype:"constant"in R?(cb=2,"number"===typeof R.constant?(Zb=R.constant,Rb=Bd=Ha=0):(Zb=0<R.constant.length?R.constant[0]:0,Rb=1<R.constant.length?R.constant[1]:0,Bd=
2<R.constant.length?R.constant[2]:0,Ha=3<R.constant.length?R.constant[3]:0)):(ta=$b(R.buffer)?na.createStream(34962,R.buffer):na.getBuffer(R.buffer),Qb="type"in R?va[R.type]:ta.dtype,Ab=!!R.normalized,Hb=R.size|0,Sa=R.offset|0,Wb=R.stride|0,vd=R.divisor|0);Sb=S.location;Ma=Cb[Sb];if(1===cb){Ma.buffer||L.enableVertexAttribArray(Sb);nb=Hb||2;if(Ma.type!==Qb||Ma.size!==nb||Ma.buffer!==ta||Ma.normalized!==Ab||Ma.offset!==Sa||Ma.stride!==Wb)L.bindBuffer(34962,ta.buffer),L.vertexAttribPointer(Sb,nb,Qb,
Ab,Wb,Sa),Ma.type=Qb,Ma.size=nb,Ma.buffer=ta,Ma.normalized=Ab,Ma.offset=Sa,Ma.stride=Wb;Ma.divisor!==vd&&(v.vertexAttribDivisorANGLE(Sb,vd),Ma.divisor=vd)}else if(Ma.buffer&&(L.disableVertexAttribArray(Sb),Ma.buffer=null),Ma.x!==Zb||Ma.y!==Rb||Ma.z!==Bd||Ma.w!==Ha)L.vertexAttrib4f(Sb,Zb,Rb,Bd,Ha),Ma.x=Zb,Ma.y=Rb,Ma.z=Bd,Ma.w=Ha;ra.buffer=m.positionBuffer;tb=!1;gb=null;Pa=0;qc=!1;Uc=Xb=0;db=1;mc=0;Gc=5126;ua=kb=jb=cc=0;$b(ra)?(tb=!0,gb=na.createStream(34962,ra),Gc=gb.dtype):(gb=na.getBuffer(ra))?Gc=
gb.dtype:"constant"in ra?(db=2,"number"===typeof ra.constant?(jb=ra.constant,kb=ua=cc=0):(jb=0<ra.constant.length?ra.constant[0]:0,kb=1<ra.constant.length?ra.constant[1]:0,ua=2<ra.constant.length?ra.constant[2]:0,cc=3<ra.constant.length?ra.constant[3]:0)):(gb=$b(ra.buffer)?na.createStream(34962,ra.buffer):na.getBuffer(ra.buffer),Gc="type"in ra?va[ra.type]:gb.dtype,qc=!!ra.normalized,Uc=ra.size|0,Xb=ra.offset|0,mc=ra.stride|0,Pa=ra.divisor|0);ob=h.location;wa=Cb[ob];if(1===db){wa.buffer||L.enableVertexAttribArray(ob);
Ua=Uc||2;if(wa.type!==Gc||wa.size!==Ua||wa.buffer!==gb||wa.normalized!==qc||wa.offset!==Xb||wa.stride!==mc)L.bindBuffer(34962,gb.buffer),L.vertexAttribPointer(ob,Ua,Gc,qc,mc,Xb),wa.type=Gc,wa.size=Ua,wa.buffer=gb,wa.normalized=qc,wa.offset=Xb,wa.stride=mc;wa.divisor!==Pa&&(v.vertexAttribDivisorANGLE(ob,Pa),wa.divisor=Pa)}else if(wa.buffer&&(L.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==kb||wa.z!==ua||wa.w!==cc)L.vertexAttrib4f(ob,jb,kb,ua,cc),wa.x=jb,wa.y=kb,wa.z=ua,wa.w=cc;ha.buffer=
m.positionFractBuffer;bb=!1;Aa=null;eb=0;Ia=!1;zb=Bb=0;Ra=1;oc=0;Jb=5126;ae=xa=Tb=Za=0;$b(ha)?(bb=!0,Aa=na.createStream(34962,ha),Jb=Aa.dtype):(Aa=na.getBuffer(ha))?Jb=Aa.dtype:"constant"in ha?(Ra=2,"number"===typeof ha.constant?(Tb=ha.constant,xa=ae=Za=0):(Tb=0<ha.constant.length?ha.constant[0]:0,xa=1<ha.constant.length?ha.constant[1]:0,ae=2<ha.constant.length?ha.constant[2]:0,Za=3<ha.constant.length?ha.constant[3]:0)):(Aa=$b(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),Jb=
"type"in ha?va[ha.type]:Aa.dtype,Ia=!!ha.normalized,zb=ha.size|0,Bb=ha.offset|0,oc=ha.stride|0,eb=ha.divisor|0);Ja=t.location;Nb=Cb[Ja];if(1===Ra){Nb.buffer||L.enableVertexAttribArray(Ja);fb=zb||2;if(Nb.type!==Jb||Nb.size!==fb||Nb.buffer!==Aa||Nb.normalized!==Ia||Nb.offset!==Bb||Nb.stride!==oc)L.bindBuffer(34962,Aa.buffer),L.vertexAttribPointer(Ja,fb,Jb,Ia,oc,Bb),Nb.type=Jb,Nb.size=fb,Nb.buffer=Aa,Nb.normalized=Ia,Nb.offset=Bb,Nb.stride=oc;Nb.divisor!==eb&&(v.vertexAttribDivisorANGLE(Ja,eb),Nb.divisor=
eb)}else if(Nb.buffer&&(L.disableVertexAttribArray(Ja),Nb.buffer=null),Nb.x!==Tb||Nb.y!==xa||Nb.z!==ae||Nb.w!==Za)L.vertexAttrib4f(Ja,Tb,xa,ae,Za),Nb.x=Tb,Nb.y=xa,Nb.z=ae,Nb.w=Za;H.buffer=m.positionFractBuffer;hb=!1;ya=null;fc=0;Da=!1;qb=pb=0;Xa=1;Ya=0;nc=5126;Lb=Va=uc=ad=0;$b(H)?(hb=!0,ya=na.createStream(34962,H),nc=ya.dtype):(ya=na.getBuffer(H))?nc=ya.dtype:"constant"in H?(Xa=2,"number"===typeof H.constant?(uc=H.constant,Va=Lb=ad=0):(uc=0<H.constant.length?H.constant[0]:0,Va=1<H.constant.length?
H.constant[1]:0,Lb=2<H.constant.length?H.constant[2]:0,ad=3<H.constant.length?H.constant[3]:0)):(ya=$b(H.buffer)?na.createStream(34962,H.buffer):na.getBuffer(H.buffer),nc="type"in H?va[H.type]:ya.dtype,Da=!!H.normalized,qb=H.size|0,pb=H.offset|0,Ya=H.stride|0,fc=H.divisor|0);bd=g.location;Fa=Cb[bd];if(1===Xa){Fa.buffer||L.enableVertexAttribArray(bd);xc=qb||2;if(Fa.type!==nc||Fa.size!==xc||Fa.buffer!==ya||Fa.normalized!==Da||Fa.offset!==pb||Fa.stride!==Ya)L.bindBuffer(34962,ya.buffer),L.vertexAttribPointer(bd,
xc,nc,Da,Ya,pb),Fa.type=nc,Fa.size=xc,Fa.buffer=ya,Fa.normalized=Da,Fa.offset=pb,Fa.stride=Ya;Fa.divisor!==fc&&(v.vertexAttribDivisorANGLE(bd,fc),Fa.divisor=fc)}else if(Fa.buffer&&(L.disableVertexAttribArray(bd),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Lb||Fa.w!==ad)L.vertexAttrib4f(bd,uc,Va,Lb,ad),Fa.x=uc,Fa.y=Va,Fa.z=Lb,Fa.w=ad;x.buffer=m.colorBuffer;Qa=!1;Ba=null;lb=0;ub=!1;rb=Db=0;vc=1;vb=0;Ld=5126;nd=Lc=Te=tc=0;$b(x)?(Qa=!0,Ba=na.createStream(34962,x),Ld=Ba.dtype):(Ba=na.getBuffer(x))?Ld=
Ba.dtype:"constant"in x?(vc=2,"number"===typeof x.constant?(Te=x.constant,Lc=nd=tc=0):(Te=0<x.constant.length?x.constant[0]:0,Lc=1<x.constant.length?x.constant[1]:0,nd=2<x.constant.length?x.constant[2]:0,tc=3<x.constant.length?x.constant[3]:0)):(Ba=$b(x.buffer)?na.createStream(34962,x.buffer):na.getBuffer(x.buffer),Ld="type"in x?va[x.type]:Ba.dtype,ub=!!x.normalized,rb=x.size|0,Db=x.offset|0,vb=x.stride|0,lb=x.divisor|0);hd=l.location;Ub=Cb[hd];if(1===vc){Ub.buffer||L.enableVertexAttribArray(hd);
bc=rb||4;if(Ub.type!==Ld||Ub.size!==bc||Ub.buffer!==Ba||Ub.normalized!==ub||Ub.offset!==Db||Ub.stride!==vb)L.bindBuffer(34962,Ba.buffer),L.vertexAttribPointer(hd,bc,Ld,ub,vb,Db),Ub.type=Ld,Ub.size=bc,Ub.buffer=Ba,Ub.normalized=ub,Ub.offset=Db,Ub.stride=vb;Ub.divisor!==lb&&(v.vertexAttribDivisorANGLE(hd,lb),Ub.divisor=lb)}else if(Ub.buffer&&(L.disableVertexAttribArray(hd),Ub.buffer=null),Ub.x!==Te||Ub.y!==Lc||Ub.z!==nd||Ub.w!==tc)L.vertexAttrib4f(hd,Te,Lc,nd,tc),Ub.x=Te,Ub.y=Lc,Ub.z=nd,Ub.w=tc;Ob=
m.scale;Ga=Ob[0];mb=Ob[1];u&&Yb===Ga&&wb===mb||(Yb=Ga,wb=mb,L.uniform2f(c.location,Ga,mb));Mb=m.scaleFract;Pb=Mb[0];ic=Mb[1];u&&gc===Pb&&Qc===ic||(gc=Pb,Qc=ic,L.uniform2f(d.location,Pb,ic));Bc=m.translate;Cc=Bc[0];Mc=Bc[1];u&&Dc===Cc&&cd===Mc||(Dc=Cc,cd=Mc,L.uniform2f(oa.location,Cc,Mc));Rc=m.translateFract;Nc=Rc[0];Fb=Rc[1];u&&Kb===Nc&&Oc===Fb||(Kb=Nc,Oc=Fb,L.uniform2f(Tc.location,Nc,Fb));Hc=m.thickness;u&&Sc===Hc||(Sc=Hc,L.uniform1f(ba.location,Hc));hc=m.depth;u&&Xc===hc||(Xc=hc,L.uniform1f(q.location,
hc));id=W.call(this,Na,m,u);Ka=id[0];Yc=id[1];Ae=id[2];ve=id[3];u&&me===Ka&&bg===Yc&&Ye===Ae&&be===ve||(me=Ka,bg=Yc,Ye=Ae,be=ve,L.uniform4f(xb.location,Ka,Yc,Ae,ve));Gd=m.dashLength;u&&Ed===Gd||(Ed=Gd,L.uniform1f(V.location,Gd));ed=m.opacity;u&&Ec===ed||(Ec=ed,L.uniform1f(Y.location,ed));(od=m.dashTexture)&&"framebuffer"===od._reglType&&(od=od.color[0]);jd=od._texture;L.uniform1i(X.location,jd.bind());$c=m.count;0<$c?Eb?v.drawElementsInstancedANGLE(5,4,Eb.type,0<<(Eb.type-5121>>1),$c):v.drawArraysInstancedANGLE(5,
0,4,$c):0>$c&&(Eb?L.drawElements(5,4,Eb.type,0<<(Eb.type-5121>>1)):L.drawArrays(5,0,4));Na.viewportWidth=Dd;Na.viewportHeight=md;Wa&&na.destroyStream(ta);tb&&na.destroyStream(gb);bb&&na.destroyStream(Aa);hb&&na.destroyStream(ya);Qa&&na.destroyStream(Ba);jd.unbind()}Z.dirty=!0;ja.setVAO(null);r&&(p.cpuTime+=performance.now()-k)},draw:function(a){var e,v,u,k,w,y,m,z,ca,C,B,D,G,P,A,T,Q,W,J,ea,ma,Kd,Ze,Oa,Ha,yd,De,Td,Ud,ie,le,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,
sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb;e=sa.next;e!==sa.cur&&(e?L.bindFramebuffer(36160,e.framebuffer):L.bindFramebuffer(36160,null),sa.cur=e);if(Z.dirty){var qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc,Ka,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb;qb=$a.dither;qb!==Z.dither&&(qb?L.enable(3024):L.disable(3024),Z.dither=qb);Xa=$a.depth_func;Xa!==Z.depth_func&&(L.depthFunc(Xa),
Z.depth_func=Xa);Ya=qa[0];nc=qa[1];if(Ya!==ec[0]||nc!==ec[1])L.depthRange(Ya,nc),ec[0]=Ya,ec[1]=nc;ad=$a.depth_mask;ad!==Z.depth_mask&&(L.depthMask(ad),Z.depth_mask=ad);uc=ib[0];Va=ib[1];Lb=ib[2];bd=ib[3];if(uc!==ga[0]||Va!==ga[1]||Lb!==ga[2]||bd!==ga[3])L.colorMask(uc,Va,Lb,bd),ga[0]=uc,ga[1]=Va,ga[2]=Lb,ga[3]=bd;Fa=$a.cull_enable;Fa!==Z.cull_enable&&(Fa?L.enable(2884):L.disable(2884),Z.cull_enable=Fa);xc=$a.cull_face;xc!==Z.cull_face&&(L.cullFace(xc),Z.cull_face=xc);Qa=$a.frontFace;Qa!==Z.frontFace&&
(L.frontFace(Qa),Z.frontFace=Qa);Ba=$a.lineWidth;Ba!==Z.lineWidth&&(L.lineWidth(Ba),Z.lineWidth=Ba);lb=$a.polygonOffset_enable;lb!==Z.polygonOffset_enable&&(lb?L.enable(32823):L.disable(32823),Z.polygonOffset_enable=lb);ub=pc[0];Db=pc[1];if(ub!==lc[0]||Db!==lc[1])L.polygonOffset(ub,Db),lc[0]=ub,lc[1]=Db;rb=$a.sample_alpha;rb!==Z.sample_alpha&&(rb?L.enable(32926):L.disable(32926),Z.sample_alpha=rb);vc=$a.sample_enable;vc!==Z.sample_enable&&(vc?L.enable(32928):L.disable(32928),Z.sample_enable=vc);vb=
ud[0];Ld=ud[1];if(vb!==wc[0]||Ld!==wc[1])L.sampleCoverage(vb,Ld),wc[0]=vb,wc[1]=Ld;tc=$a.stencil_mask;tc!==Z.stencil_mask&&(L.stencilMask(tc),Z.stencil_mask=tc);Ka=ka[0];Lc=ka[1];nd=ka[2];if(Ka!==Ca[0]||Lc!==Ca[1]||nd!==Ca[2])L.stencilFunc(Ka,Lc,nd),Ca[0]=Ka,Ca[1]=Lc,Ca[2]=nd;hd=Wc[0];Ub=Wc[1];bc=Wc[2];Ob=Wc[3];if(hd!==F[0]||Ub!==F[1]||bc!==F[2]||Ob!==F[3])L.stencilOpSeparate(hd,Ub,bc,Ob),F[0]=hd,F[1]=Ub,F[2]=bc,F[3]=Ob;Ga=Gb[0];Yb=Gb[1];mb=Gb[2];wb=Gb[3];if(Ga!==Jc[0]||Yb!==Jc[1]||mb!==Jc[2]||wb!==
Jc[3])L.stencilOpSeparate(Ga,Yb,mb,wb),Jc[0]=Ga,Jc[1]=Yb,Jc[2]=mb,Jc[3]=wb}v=a.viewport;u=v.x|0;k=v.y|0;w="width"in v?v.width|0:Na.framebufferWidth-u;y="height"in v?v.height|0:Na.framebufferHeight-k;m=Na.viewportWidth;Na.viewportWidth=w;z=Na.viewportHeight;Na.viewportHeight=y;L.viewport(u,k,w,y);ia[0]=u;ia[1]=k;ia[2]=w;ia[3]=y;L.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;L.enable(3042);Z.blend_enable=!0;L.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;L.blendFuncSeparate(770,
771,773,1);aa[0]=770;aa[1]=771;aa[2]=773;aa[3]=1;(ca=n.call(this,Na,a,0))?L.enable(2929):L.disable(2929);Z.depth_enable=ca;C=a.viewport;B=C.x|0;D=C.y|0;G="width"in C?C.width|0:Na.framebufferWidth-B;P="height"in C?C.height|0:Na.framebufferHeight-D;L.scissor(B,D,G,P);M[0]=B;M[1]=D;M[2]=G;M[3]=P;L.enable(3089);Z.scissor_enable=!0;L.disable(2960);Z.stencil_enable=!1;if(A=Z.profile)T=performance.now(),p.count++;L.useProgram(I.program);Q=U.angle_instanced_arrays;ja.setVAO(null);R.buffer=a.positionBuffer;
W=!1;J=null;ea=0;ma=!1;Ze=Kd=0;Oa=1;Ha=0;yd=5126;ie=Ud=Td=De=0;$b(R)?(W=!0,J=na.createStream(34962,R),yd=J.dtype):(J=na.getBuffer(R))?yd=J.dtype:"constant"in R?(Oa=2,"number"===typeof R.constant?(Td=R.constant,Ud=ie=De=0):(Td=0<R.constant.length?R.constant[0]:0,Ud=1<R.constant.length?R.constant[1]:0,ie=2<R.constant.length?R.constant[2]:0,De=3<R.constant.length?R.constant[3]:0)):(J=$b(R.buffer)?na.createStream(34962,R.buffer):na.getBuffer(R.buffer),yd="type"in R?va[R.type]:J.dtype,ma=!!R.normalized,
Ze=R.size|0,Kd=R.offset|0,Ha=R.stride|0,ea=R.divisor|0);le=S.location;rd=Cb[le];if(1===Oa){rd.buffer||L.enableVertexAttribArray(le);ld=Ze||2;if(rd.type!==yd||rd.size!==ld||rd.buffer!==J||rd.normalized!==ma||rd.offset!==Kd||rd.stride!==Ha)L.bindBuffer(34962,J.buffer),L.vertexAttribPointer(le,ld,yd,ma,Ha,Kd),rd.type=yd,rd.size=ld,rd.buffer=J,rd.normalized=ma,rd.offset=Kd,rd.stride=Ha;rd.divisor!==ea&&(Q.vertexAttribDivisorANGLE(le,ea),rd.divisor=ea)}else if(rd.buffer&&(L.disableVertexAttribArray(le),
rd.buffer=null),rd.x!==Td||rd.y!==Ud||rd.z!==ie||rd.w!==De)L.vertexAttrib4f(le,Td,Ud,ie,De),rd.x=Td,rd.y=Ud,rd.z=ie,rd.w=De;ra.buffer=a.positionBuffer;wd=!1;pd=null;dd=0;zc=!1;gd=sd=0;Kc=1;sc=0;ab=5126;Ta=rc=Eb=jc=0;$b(ra)?(wd=!0,pd=na.createStream(34962,ra),ab=pd.dtype):(pd=na.getBuffer(ra))?ab=pd.dtype:"constant"in ra?(Kc=2,"number"===typeof ra.constant?(Eb=ra.constant,rc=Ta=jc=0):(Eb=0<ra.constant.length?ra.constant[0]:0,rc=1<ra.constant.length?ra.constant[1]:0,Ta=2<ra.constant.length?ra.constant[2]:
0,jc=3<ra.constant.length?ra.constant[3]:0)):(pd=$b(ra.buffer)?na.createStream(34962,ra.buffer):na.getBuffer(ra.buffer),ab="type"in ra?va[ra.type]:pd.dtype,zc=!!ra.normalized,gd=ra.size|0,sd=ra.offset|0,sc=ra.stride|0,dd=ra.divisor|0);Ic=h.location;ac=Cb[Ic];if(1===Kc){ac.buffer||L.enableVertexAttribArray(Ic);Zc=gd||2;if(ac.type!==ab||ac.size!==Zc||ac.buffer!==pd||ac.normalized!==zc||ac.offset!==sd||ac.stride!==sc)L.bindBuffer(34962,pd.buffer),L.vertexAttribPointer(Ic,Zc,ab,zc,sc,sd),ac.type=ab,ac.size=
Zc,ac.buffer=pd,ac.normalized=zc,ac.offset=sd,ac.stride=sc;ac.divisor!==dd&&(Q.vertexAttribDivisorANGLE(Ic,dd),ac.divisor=dd)}else if(ac.buffer&&(L.disableVertexAttribArray(Ic),ac.buffer=null),ac.x!==Eb||ac.y!==rc||ac.z!==Ta||ac.w!==jc)L.vertexAttrib4f(Ic,Eb,rc,Ta,jc),ac.x=Eb,ac.y=rc,ac.z=Ta,ac.w=jc;ha.buffer=a.positionFractBuffer;Dd=!1;md=null;Ac=0;Vb=!1;Pc=Fc=0;La=1;sb=0;Wa=5126;Sa=Ab=vd=ta=0;$b(ha)?(Dd=!0,md=na.createStream(34962,ha),Wa=md.dtype):(md=na.getBuffer(ha))?Wa=md.dtype:"constant"in ha?
(La=2,"number"===typeof ha.constant?(vd=ha.constant,Ab=Sa=ta=0):(vd=0<ha.constant.length?ha.constant[0]:0,Ab=1<ha.constant.length?ha.constant[1]:0,Sa=2<ha.constant.length?ha.constant[2]:0,ta=3<ha.constant.length?ha.constant[3]:0)):(md=$b(ha.buffer)?na.createStream(34962,ha.buffer):na.getBuffer(ha.buffer),Wa="type"in ha?va[ha.type]:md.dtype,Vb=!!ha.normalized,Pc=ha.size|0,Fc=ha.offset|0,sb=ha.stride|0,Ac=ha.divisor|0);Hb=t.location;cb=Cb[Hb];if(1===La){cb.buffer||L.enableVertexAttribArray(Hb);Wb=Pc||
2;if(cb.type!==Wa||cb.size!==Wb||cb.buffer!==md||cb.normalized!==Vb||cb.offset!==Fc||cb.stride!==sb)L.bindBuffer(34962,md.buffer),L.vertexAttribPointer(Hb,Wb,Wa,Vb,sb,Fc),cb.type=Wa,cb.size=Wb,cb.buffer=md,cb.normalized=Vb,cb.offset=Fc,cb.stride=sb;cb.divisor!==Ac&&(Q.vertexAttribDivisorANGLE(Hb,Ac),cb.divisor=Ac)}else if(cb.buffer&&(L.disableVertexAttribArray(Hb),cb.buffer=null),cb.x!==vd||cb.y!==Ab||cb.z!==Sa||cb.w!==ta)L.vertexAttrib4f(Hb,vd,Ab,Sa,ta),cb.x=vd,cb.y=Ab,cb.z=Sa,cb.w=ta;H.buffer=a.positionFractBuffer;
Qb=!1;ee=null;Zb=0;Rb=!1;Sb=Bd=0;Ma=1;nb=0;tb=5126;Xb=qc=Pa=gb=0;$b(H)?(Qb=!0,ee=na.createStream(34962,H),tb=ee.dtype):(ee=na.getBuffer(H))?tb=ee.dtype:"constant"in H?(Ma=2,"number"===typeof H.constant?(Pa=H.constant,qc=Xb=gb=0):(Pa=0<H.constant.length?H.constant[0]:0,qc=1<H.constant.length?H.constant[1]:0,Xb=2<H.constant.length?H.constant[2]:0,gb=3<H.constant.length?H.constant[3]:0)):(ee=$b(H.buffer)?na.createStream(34962,H.buffer):na.getBuffer(H.buffer),tb="type"in H?va[H.type]:ee.dtype,Rb=!!H.normalized,
Sb=H.size|0,Bd=H.offset|0,nb=H.stride|0,Zb=H.divisor|0);Uc=g.location;db=Cb[Uc];if(1===Ma){db.buffer||L.enableVertexAttribArray(Uc);mc=Sb||2;if(db.type!==tb||db.size!==mc||db.buffer!==ee||db.normalized!==Rb||db.offset!==Bd||db.stride!==nb)L.bindBuffer(34962,ee.buffer),L.vertexAttribPointer(Uc,mc,tb,Rb,nb,Bd),db.type=tb,db.size=mc,db.buffer=ee,db.normalized=Rb,db.offset=Bd,db.stride=nb;db.divisor!==Zb&&(Q.vertexAttribDivisorANGLE(Uc,Zb),db.divisor=Zb)}else if(db.buffer&&(L.disableVertexAttribArray(Uc),
db.buffer=null),db.x!==Pa||db.y!==qc||db.z!==Xb||db.w!==gb)L.vertexAttrib4f(Uc,Pa,qc,Xb,gb),db.x=Pa,db.y=qc,db.z=Xb,db.w=gb;x.buffer=a.colorBuffer;Gc=!1;cc=null;jb=0;kb=!1;ob=ua=0;wa=1;Ua=0;bb=5126;Bb=Ia=eb=Aa=0;$b(x)?(Gc=!0,cc=na.createStream(34962,x),bb=cc.dtype):(cc=na.getBuffer(x))?bb=cc.dtype:"constant"in x?(wa=2,"number"===typeof x.constant?(eb=x.constant,Ia=Bb=Aa=0):(eb=0<x.constant.length?x.constant[0]:0,Ia=1<x.constant.length?x.constant[1]:0,Bb=2<x.constant.length?x.constant[2]:0,Aa=3<x.constant.length?
x.constant[3]:0)):(cc=$b(x.buffer)?na.createStream(34962,x.buffer):na.getBuffer(x.buffer),bb="type"in x?va[x.type]:cc.dtype,kb=!!x.normalized,ob=x.size|0,ua=x.offset|0,Ua=x.stride|0,jb=x.divisor|0);zb=l.location;Ra=Cb[zb];if(1===wa){Ra.buffer||L.enableVertexAttribArray(zb);oc=ob||4;if(Ra.type!==bb||Ra.size!==oc||Ra.buffer!==cc||Ra.normalized!==kb||Ra.offset!==ua||Ra.stride!==Ua)L.bindBuffer(34962,cc.buffer),L.vertexAttribPointer(zb,oc,bb,kb,Ua,ua),Ra.type=bb,Ra.size=oc,Ra.buffer=cc,Ra.normalized=
kb,Ra.offset=ua,Ra.stride=Ua;Ra.divisor!==jb&&(Q.vertexAttribDivisorANGLE(zb,jb),Ra.divisor=jb)}else if(Ra.buffer&&(L.disableVertexAttribArray(zb),Ra.buffer=null),Ra.x!==eb||Ra.y!==Ia||Ra.z!==Bb||Ra.w!==Aa)L.vertexAttrib4f(zb,eb,Ia,Bb,Aa),Ra.x=eb,Ra.y=Ia,Ra.z=Bb,Ra.w=Aa;Jb=pa.location;Za=Cb[Jb];Za.buffer||L.enableVertexAttribArray(Jb);if(5126!==Za.type||1!==Za.size||Za.buffer!==f||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)L.bindBuffer(34962,f.buffer),L.vertexAttribPointer(Jb,1,5126,!1,8,0),
Za.type=5126,Za.size=1,Za.buffer=f,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(Q.vertexAttribDivisorANGLE(Jb,0),Za.divisor=0);Tb=O.location;xa=Cb[Tb];xa.buffer||L.enableVertexAttribArray(Tb);if(5126!==xa.type||1!==xa.size||xa.buffer!==b||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)L.bindBuffer(34962,b.buffer),L.vertexAttribPointer(Tb,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=b,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&(Q.vertexAttribDivisorANGLE(Tb,0),xa.divisor=
0);ae=a.scale;L.uniform2f(c.location,ae[0],ae[1]);Ja=a.scaleFract;L.uniform2f(d.location,Ja[0],Ja[1]);Nb=a.translate;L.uniform2f(oa.location,Nb[0],Nb[1]);fb=a.translateFract;L.uniform2f(Tc.location,fb[0],fb[1]);L.uniform1f(ba.location,a.thickness);L.uniform1f(q.location,a.depth);hb=r.call(this,Na,a,0);L.uniform4f(xb.location,hb[0],hb[1],hb[2],hb[3]);L.uniform1f(V.location,a.dashLength);L.uniform1f(Y.location,a.opacity);(ya=a.dashTexture)&&"framebuffer"===ya._reglType&&(ya=ya.color[0]);fc=ya._texture;
L.uniform1i(X.location,fc.bind());(Da=K.elements)?L.bindBuffer(34963,Da.buffer.buffer):ja.currentVAO&&(Da=N.getElements(ja.currentVAO.elements))&&L.bindBuffer(34963,Da.buffer.buffer);pb=a.count;0<pb?Da?Q.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),pb):Q.drawArraysInstancedANGLE(5,0,4,pb):0>pb&&(Da?L.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):L.drawArrays(5,0,4));Z.dirty=!0;ja.setVAO(null);Na.viewportWidth=m;Na.viewportHeight=z;A&&(p.cpuTime+=performance.now()-T);W&&na.destroyStream(J);
wd&&na.destroyStream(pd);Dd&&na.destroyStream(md);Qb&&na.destroyStream(ee);Gc&&na.destroyStream(cc);fc.unbind()},scope:function(c,d,g){var e,h,l,n,m,r,q,t,M,I,F,P,N,O,L,W,J,U,aa,V,X,ka,ia,ga,ja,ba,pc,Y,Ca,S,pa,qa,sa,ud,oa,wc,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Gb,Jc,ec,Ac,Vb,Fc,Pc,La,sb,Wa,ta,Ea,Ab,Sa,Hb,cb,Wb,Qb,lc,Zb,Rb,ib,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,Wc,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,xb,
tc,Ka,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,dc,me,Yc,Tc,Cb,Qd,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe,Ne,Ke,pe,Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,of,We,Oe,Le;e=c.viewport;h=e.x|0;l=e.y|0;n="width"in e?e.width|0:Na.framebufferWidth-h;m="height"in e?e.height|0:Na.framebufferHeight-l;r=Na.viewportWidth;Na.viewportWidth=n;q=Na.viewportHeight;Na.viewportHeight=m;t=y[0];y[0]=h;M=y[1];
y[1]=l;I=y[2];y[2]=n;F=y[3];y[3]=m;P=ea[0];ea[0]=0;N=ea[1];ea[1]=0;O=ea[2];ea[2]=0;L=ea[3];ea[3]=0;W=$a.blend_enable;$a.blend_enable=!0;J=Oa[0];Oa[0]=32774;U=Oa[1];Oa[1]=32774;aa=Ha[0];Ha[0]=770;V=Ha[1];Ha[1]=771;X=Ha[2];Ha[2]=773;ka=Ha[3];Ha[3]=1;ia=a.call(this,Na,c,g);ga=$a.depth_enable;$a.depth_enable=ia;ja=c.viewport;ba=ja.x|0;pc=ja.y|0;Y="width"in ja?ja.width|0:Na.framebufferWidth-ba;Ca="height"in ja?ja.height|0:Na.framebufferHeight-pc;S=ca[0];ca[0]=ba;pa=ca[1];ca[1]=pc;qa=ca[2];ca[2]=Y;sa=ca[3];
ca[3]=Ca;ud=$a.scissor_enable;$a.scissor_enable=!0;oa=$a.stencil_enable;$a.stencil_enable=!1;if(wc=Z.profile)gd=performance.now(),p.count++;Kc=K.offset;K.offset=0;sc=K.count;K.count=4;ab=c.count;jc=K.instances;K.instances=ab;Eb=K.primitive;K.primitive=5;rc=c.dashLength;Ta=v[23];v[23]=rc;Ic=c.dashTexture;ac=v[24];v[24]=Ic;Gb=c.depth;Jc=v[22];v[22]=Gb;ec=c.id;Ac=v[31];v[31]=ec;Vb=c.miterLimit;Fc=v[32];v[32]=Vb;Pc=u.call(this,Na,c,g);La=v[33];v[33]=Pc;sb=c.opacity;Wa=v[10];v[10]=sb;ta=Na.pixelRatio;
Ea=v[34];v[34]=ta;Ab=c.scale;Sa=v[6];v[6]=Ab;Hb=c.scaleFract;cb=v[7];v[7]=Hb;Wb=c.thickness;Qb=v[21];v[21]=Wb;lc=c.translate;Zb=v[8];v[8]=lc;Rb=c.translateFract;ib=v[9];v[9]=Rb;Sb=A.call(this,Na,c,g);Ma=v[3];v[3]=Sb;R.buffer=c.positionBuffer;nb=!1;tb=null;gb=0;Pa=!1;Xb=qc=0;Uc=1;db=0;mc=5126;kb=jb=cc=Gc=0;$b(R)?(nb=!0,tb=na.createStream(34962,R),mc=tb.dtype):(tb=na.getBuffer(R))?mc=tb.dtype:"constant"in R?(Uc=2,"number"===typeof R.constant?(cc=R.constant,jb=kb=Gc=0):(cc=0<R.constant.length?R.constant[0]:
0,jb=1<R.constant.length?R.constant[1]:0,kb=2<R.constant.length?R.constant[2]:0,Gc=3<R.constant.length?R.constant[3]:0)):(tb=$b(R.buffer)?na.createStream(34962,R.buffer):na.getBuffer(R.buffer),mc="type"in R?va[R.type]:tb.dtype,Pa=!!R.normalized,Xb=R.size|0,qc=R.offset|0,db=R.stride|0,gb=R.divisor|0);ua=Q.buffer;Q.buffer=tb;ob=Q.divisor;Q.divisor=gb;wa=Q.normalized;Q.normalized=Pa;Ua=Q.offset;Q.offset=qc;bb=Q.size;Q.size=Xb;Aa=Q.state;Q.state=Uc;eb=Q.stride;Q.stride=db;Ia=Q.type;Q.type=mc;Bb=Q.w;Q.w=
Gc;zb=Q.x;Q.x=cc;Ra=Q.y;Q.y=jb;oc=Q.z;Q.z=kb;ha.buffer=c.positionFractBuffer;Jb=!1;Za=null;Tb=0;xa=!1;Ja=Wc=0;Nb=1;fb=0;hb=5126;pb=Da=fc=ya=0;$b(ha)?(Jb=!0,Za=na.createStream(34962,ha),hb=Za.dtype):(Za=na.getBuffer(ha))?hb=Za.dtype:"constant"in ha?(Nb=2,"number"===typeof ha.constant?(fc=ha.constant,Da=pb=ya=0):(fc=0<ha.constant.length?ha.constant[0]:0,Da=1<ha.constant.length?ha.constant[1]:0,pb=2<ha.constant.length?ha.constant[2]:0,ya=3<ha.constant.length?ha.constant[3]:0)):(Za=$b(ha.buffer)?na.createStream(34962,
ha.buffer):na.getBuffer(ha.buffer),hb="type"in ha?va[ha.type]:Za.dtype,xa=!!ha.normalized,Ja=ha.size|0,Wc=ha.offset|0,fb=ha.stride|0,Tb=ha.divisor|0);qb=G.buffer;G.buffer=Za;Xa=G.divisor;G.divisor=Tb;Ya=G.normalized;G.normalized=xa;nc=G.offset;G.offset=Wc;ad=G.size;G.size=Ja;uc=G.state;G.state=Nb;Va=G.stride;G.stride=fb;Lb=G.type;G.type=hb;bd=G.w;G.w=ya;Fa=G.x;G.x=fc;xc=G.y;G.y=Da;Qa=G.z;G.z=pb;ra.buffer=c.positionBuffer;Ba=!1;lb=null;ub=0;Db=!1;vc=rb=0;vb=1;xb=0;tc=5126;hd=nd=Lc=Ka=0;$b(ra)?(Ba=
!0,lb=na.createStream(34962,ra),tc=lb.dtype):(lb=na.getBuffer(ra))?tc=lb.dtype:"constant"in ra?(vb=2,"number"===typeof ra.constant?(Lc=ra.constant,nd=hd=Ka=0):(Lc=0<ra.constant.length?ra.constant[0]:0,nd=1<ra.constant.length?ra.constant[1]:0,hd=2<ra.constant.length?ra.constant[2]:0,Ka=3<ra.constant.length?ra.constant[3]:0)):(lb=$b(ra.buffer)?na.createStream(34962,ra.buffer):na.getBuffer(ra.buffer),tc="type"in ra?va[ra.type]:lb.dtype,Db=!!ra.normalized,vc=ra.size|0,rb=ra.offset|0,xb=ra.stride|0,ub=
ra.divisor|0);Ub=D.buffer;D.buffer=lb;bc=D.divisor;D.divisor=ub;Ob=D.normalized;D.normalized=Db;Ga=D.offset;D.offset=rb;Yb=D.size;D.size=vc;mb=D.state;D.state=vb;wb=D.stride;D.stride=xb;Mb=D.type;D.type=tc;Pb=D.w;D.w=Ka;gc=D.x;D.x=Lc;ic=D.y;D.y=nd;Qc=D.z;D.z=hd;H.buffer=c.positionFractBuffer;Bc=!1;Cc=null;Dc=0;Mc=!1;Rc=cd=0;Nc=1;Kb=0;Fb=5126;hc=Sc=Hc=Oc=0;$b(H)?(Bc=!0,Cc=na.createStream(34962,H),Fb=Cc.dtype):(Cc=na.getBuffer(H))?Fb=Cc.dtype:"constant"in H?(Nc=2,"number"===typeof H.constant?(Hc=H.constant,
Sc=hc=Oc=0):(Hc=0<H.constant.length?H.constant[0]:0,Sc=1<H.constant.length?H.constant[1]:0,hc=2<H.constant.length?H.constant[2]:0,Oc=3<H.constant.length?H.constant[3]:0)):(Cc=$b(H.buffer)?na.createStream(34962,H.buffer):na.getBuffer(H.buffer),Fb="type"in H?va[H.type]:Cc.dtype,Mc=!!H.normalized,Rc=H.size|0,cd=H.offset|0,Kb=H.stride|0,Dc=H.divisor|0);Xc=w.buffer;w.buffer=Cc;id=w.divisor;w.divisor=Dc;dc=w.normalized;w.normalized=Mc;me=w.offset;w.offset=cd;Yc=w.size;w.size=Rc;Tc=w.state;w.state=Nc;Cb=
w.stride;w.stride=Kb;Qd=w.type;w.type=Fb;ve=w.w;w.w=Oc;be=w.x;w.x=Hc;Gd=w.y;w.y=Sc;Ed=w.z;w.z=hc;x.buffer=c.colorBuffer;ed=!1;Ec=null;od=0;jd=!1;kd=$c=0;Ad=1;Cd=0;te=5126;ce=de=ue=je=0;$b(x)?(ed=!0,Ec=na.createStream(34962,x),te=Ec.dtype):(Ec=na.getBuffer(x))?te=Ec.dtype:"constant"in x?(Ad=2,"number"===typeof x.constant?(ue=x.constant,de=ce=je=0):(ue=0<x.constant.length?x.constant[0]:0,de=1<x.constant.length?x.constant[1]:0,ce=2<x.constant.length?x.constant[2]:0,je=3<x.constant.length?x.constant[3]:
0)):(Ec=$b(x.buffer)?na.createStream(34962,x.buffer):na.getBuffer(x.buffer),te="type"in x?va[x.type]:Ec.dtype,jd=!!x.normalized,kd=x.size|0,$c=x.offset|0,Cd=x.stride|0,od=x.divisor|0);$d=C.buffer;C.buffer=Ec;ne=C.divisor;C.divisor=od;Yd=C.normalized;C.normalized=jd;fe=C.offset;C.offset=$c;yc=C.size;C.size=kd;Vc=C.state;C.state=Ad;oe=C.stride;C.stride=Cd;he=C.type;C.type=te;Fd=C.w;C.w=je;Id=C.x;C.x=ue;Md=C.y;C.y=de;Nd=C.z;C.z=ce;ge=B.buffer;B.buffer=f;Ee=B.divisor;B.divisor=0;we=B.normalized;B.normalized=
!1;ke=B.offset;B.offset=0;Xe=B.size;B.size=0;Ne=B.state;B.state=1;Ke=B.stride;B.stride=8;pe=B.type;B.type=5126;Be=B.w;B.w=0;Fe=B.x;B.x=0;Ge=B.y;B.y=0;He=B.z;B.z=0;Ce=z.buffer;z.buffer=b;Hd=z.divisor;z.divisor=0;Rd=z.normalized;z.normalized=!1;Wd=z.offset;z.offset=4;Zd=z.size;z.size=0;Ie=z.state;z.state=1;zd=z.stride;z.stride=8;Od=z.type;z.type=5126;xe=z.w;z.w=0;Je=z.x;z.x=0;of=z.y;z.y=0;We=z.z;z.z=0;Oe=T.vert;T.vert=20;Le=T.frag;T.frag=19;Z.dirty=!0;d(Na,c,g);Na.viewportWidth=r;Na.viewportHeight=
q;y[0]=t;y[1]=M;y[2]=I;y[3]=F;ea[0]=P;ea[1]=N;ea[2]=O;ea[3]=L;$a.blend_enable=W;Oa[0]=J;Oa[1]=U;Ha[0]=aa;Ha[1]=V;Ha[2]=X;Ha[3]=ka;$a.depth_enable=ga;ca[0]=S;ca[1]=pa;ca[2]=qa;ca[3]=sa;$a.scissor_enable=ud;$a.stencil_enable=oa;wc&&(p.cpuTime+=performance.now()-gd);K.offset=Kc;K.count=sc;K.instances=jc;K.primitive=Eb;v[23]=Ta;v[24]=ac;v[22]=Jc;v[31]=Ac;v[32]=Fc;v[33]=La;v[10]=Wa;v[34]=Ea;v[6]=Sa;v[7]=cb;v[21]=Qb;v[8]=Zb;v[9]=ib;v[3]=Ma;nb&&na.destroyStream(tb);Q.buffer=ua;Q.divisor=ob;Q.normalized=
wa;Q.offset=Ua;Q.size=bb;Q.state=Aa;Q.stride=eb;Q.type=Ia;Q.w=Bb;Q.x=zb;Q.y=Ra;Q.z=oc;Jb&&na.destroyStream(Za);G.buffer=qb;G.divisor=Xa;G.normalized=Ya;G.offset=nc;G.size=ad;G.state=uc;G.stride=Va;G.type=Lb;G.w=bd;G.x=Fa;G.y=xc;G.z=Qa;Ba&&na.destroyStream(lb);D.buffer=Ub;D.divisor=bc;D.normalized=Ob;D.offset=Ga;D.size=Yb;D.state=mb;D.stride=wb;D.type=Mb;D.w=Pb;D.x=gc;D.y=ic;D.z=Qc;Bc&&na.destroyStream(Cc);w.buffer=Xc;w.divisor=id;w.normalized=dc;w.offset=me;w.size=Yc;w.state=Tc;w.stride=Cb;w.type=
Qd;w.w=ve;w.x=be;w.y=Gd;w.z=Ed;ed&&na.destroyStream(Ec);C.buffer=$d;C.divisor=ne;C.normalized=Yd;C.offset=fe;C.size=yc;C.state=Vc;C.stride=oe;C.type=he;C.w=Fd;C.x=Id;C.y=Md;C.z=Nd;B.buffer=ge;B.divisor=Ee;B.normalized=we;B.offset=ke;B.size=Xe;B.state=Ne;B.stride=Ke;B.type=pe;B.w=Be;B.x=Fe;B.y=Ge;B.z=He;z.buffer=Ce;z.divisor=Hd;z.normalized=Rd;z.offset=Wd;z.size=Zd;z.state=Ie;z.stride=zd;z.type=Od;z.w=xe;z.x=Je;z.y=of;z.z=We;T.vert=Oe;T.frag=Le;Z.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(e,
p,n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,Ka,xb,Cb,na,Na,Z){var K,N,U,sa,L,$b,$a,T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa,ec,pc,lc,ud,wc,ca,M,ka,Ca,Gb,Jc,Wc,F,y,ia,va,R,ha,ra,H,x,da,E,za,la,k;K=e.attributes;N=e.buffer;U=e.context;sa=e.current;L=e.draw;$b=e.elements;$a=e.extensions;T=e.framebuffer;v=e.gl;ja=e.isBufferArgs;ea=e.next;Ea=e.shader;Oa=e.uniforms;dc=e.vao;Ha=ea.blend_color;aa=sa.blend_color;ib=ea.blend_equation;ga=sa.blend_equation;qa=ea.blend_func;ec=sa.blend_func;
pc=ea.colorMask;lc=sa.colorMask;ud=ea.depth_range;wc=sa.depth_range;ca=ea.polygonOffset_offset;M=sa.polygonOffset_offset;ka=ea.sample_coverage;Ca=sa.sample_coverage;Gb=ea.scissor_box;Jc=sa.scissor_box;Wc=ea.stencil_func;F=sa.stencil_func;y=ea.stencil_opBack;ia=sa.stencil_opBack;va=ea.stencil_opFront;R=sa.stencil_opFront;ha=ea.viewport;ra=sa.viewport;H={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};x={divisor:1,offset:0,stride:4};da={divisor:1,offset:8,
stride:8};E={divisor:1,offset:4,stride:4};za={divisor:1,offset:16,stride:8};la={divisor:1,offset:24,stride:8};k={divisor:1,offset:0,stride:8};return{batch:function(a,e){var m,n,r,u,w,z;m=T.next;m!==T.cur&&(m?v.bindFramebuffer(36160,m.framebuffer):v.bindFramebuffer(36160,null),T.cur=m);if(sa.dirty){var I,C,B,D,P,G,A,Q,J,ha,ma,qa,Gb,Ea,Oa,Td,Ud,Ha,ib,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab;I=ea.dither;I!==sa.dither&&(I?v.enable(3024):v.disable(3024),sa.dither=I);C=ea.depth_func;C!==sa.depth_func&&(v.depthFunc(C),
sa.depth_func=C);B=ud[0];D=ud[1];if(B!==wc[0]||D!==wc[1])v.depthRange(B,D),wc[0]=B,wc[1]=D;P=ea.depth_mask;P!==sa.depth_mask&&(v.depthMask(P),sa.depth_mask=P);G=pc[0];A=pc[1];Q=pc[2];J=pc[3];if(G!==lc[0]||A!==lc[1]||Q!==lc[2]||J!==lc[3])v.colorMask(G,A,Q,J),lc[0]=G,lc[1]=A,lc[2]=Q,lc[3]=J;ha=ea.frontFace;ha!==sa.frontFace&&(v.frontFace(ha),sa.frontFace=ha);ma=ea.lineWidth;ma!==sa.lineWidth&&(v.lineWidth(ma),sa.lineWidth=ma);qa=ea.polygonOffset_enable;qa!==sa.polygonOffset_enable&&(qa?v.enable(32823):
v.disable(32823),sa.polygonOffset_enable=qa);Gb=ca[0];Ea=ca[1];if(Gb!==M[0]||Ea!==M[1])v.polygonOffset(Gb,Ea),M[0]=Gb,M[1]=Ea;Oa=ea.sample_alpha;Oa!==sa.sample_alpha&&(Oa?v.enable(32926):v.disable(32926),sa.sample_alpha=Oa);Td=ea.sample_enable;Td!==sa.sample_enable&&(Td?v.enable(32928):v.disable(32928),sa.sample_enable=Td);Ud=ka[0];Ha=ka[1];if(Ud!==Ca[0]||Ha!==Ca[1])v.sampleCoverage(Ud,Ha),Ca[0]=Ud,Ca[1]=Ha;ib=ea.stencil_mask;ib!==sa.stencil_mask&&(v.stencilMask(ib),sa.stencil_mask=ib);rd=Wc[0];ld=
Wc[1];wd=Wc[2];if(rd!==F[0]||ld!==F[1]||wd!==F[2])v.stencilFunc(rd,ld,wd),F[0]=rd,F[1]=ld,F[2]=wd;pd=va[0];dd=va[1];zc=va[2];sd=va[3];if(pd!==R[0]||dd!==R[1]||zc!==R[2]||sd!==R[3])v.stencilOpSeparate(pd,dd,zc,sd),R[0]=pd,R[1]=dd,R[2]=zc,R[3]=sd;gd=y[0];Kc=y[1];sc=y[2];ab=y[3];if(gd!==ia[0]||Kc!==ia[1]||sc!==ia[2]||ab!==ia[3])v.stencilOpSeparate(gd,Kc,sc,ab),ia[0]=gd,ia[1]=Kc,ia[2]=sc,ia[3]=ab}v.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;v.enable(3042);sa.blend_enable=!0;v.blendEquationSeparate(32774,
32774);ga[0]=32774;ga[1]=32774;v.blendFuncSeparate(770,771,773,1);ec[0]=770;ec[1]=771;ec[2]=773;ec[3]=1;v.enable(2884);sa.cull_enable=!0;v.cullFace(1029);sa.cull_face=1029;v.enable(3089);sa.scissor_enable=!0;v.disable(2960);sa.stencil_enable=!1;if(n=sa.profile)r=performance.now(),p.count+=e;v.useProgram(W.program);u=$a.angle_instanced_arrays;var jc,Eb,rc,Ta,Ic;dc.setVAO(null);jc=Y.location;Eb=K[jc];Eb.buffer||v.enableVertexAttribArray(jc);if(5126!==Eb.type||1!==Eb.size||Eb.buffer!==f||!1!==Eb.normalized||
0!==Eb.offset||8!==Eb.stride)v.bindBuffer(34962,f.buffer),v.vertexAttribPointer(jc,1,5126,!1,8,0),Eb.type=5126,Eb.size=1,Eb.buffer=f,Eb.normalized=!1,Eb.offset=0,Eb.stride=8;0!==Eb.divisor&&(u.vertexAttribDivisorANGLE(jc,0),Eb.divisor=0);rc=c.location;Ta=K[rc];Ta.buffer||v.enableVertexAttribArray(rc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==b||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)v.bindBuffer(34962,b.buffer),v.vertexAttribPointer(rc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=b,
Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(u.vertexAttribDivisorANGLE(rc,0),Ta.divisor=0);(Ic=L.elements)?v.bindBuffer(34963,Ic.buffer.buffer):dc.currentVAO&&(Ic=$b.getElements(dc.currentVAO.elements))&&v.bindBuffer(34963,Ic.buffer.buffer);for(w=0;w<e;++w){z=a[w];var ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,
xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc,Te,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,pg,me,Yc,bg,Ae,Ye,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc;ac=z.viewport;Zc=ac.x|0;Dd=ac.y|0;md="width"in ac?ac.width|0:U.framebufferWidth-Zc;Ac="height"in ac?ac.height|0:U.framebufferHeight-Dd;Vb=U.viewportWidth;U.viewportWidth=md;Fc=U.viewportHeight;U.viewportHeight=Ac;v.viewport(Zc,Dd,md,Ac);ra[0]=Zc;ra[1]=Dd;ra[2]=md;ra[3]=Ac;(Pc=S.call(this,U,
z,w))?v.enable(2929):v.disable(2929);sa.depth_enable=Pc;La=z.viewport;sb=La.x|0;Wa=La.y|0;ta="width"in La?La.width|0:U.framebufferWidth-sb;vd="height"in La?La.height|0:U.framebufferHeight-Wa;v.scissor(sb,Wa,ta,vd);Jc[0]=sb;Jc[1]=Wa;Jc[2]=ta;Jc[3]=vd;da.buffer=z.positionBuffer;Ab=!1;Sa=null;Hb=0;cb=!1;Qb=Wb=0;ee=1;Zb=0;Rb=5126;nb=Ma=Sb=Bd=0;ja(da)?(Ab=!0,Sa=N.createStream(34962,da),Rb=Sa.dtype):(Sa=N.getBuffer(da))?Rb=Sa.dtype:"constant"in da?(ee=2,"number"===typeof da.constant?(Sb=da.constant,Ma=
nb=Bd=0):(Sb=0<da.constant.length?da.constant[0]:0,Ma=1<da.constant.length?da.constant[1]:0,nb=2<da.constant.length?da.constant[2]:0,Bd=3<da.constant.length?da.constant[3]:0)):(Sa=ja(da.buffer)?N.createStream(34962,da.buffer):N.getBuffer(da.buffer),Rb="type"in da?H[da.type]:Sa.dtype,cb=!!da.normalized,Qb=da.size|0,Wb=da.offset|0,Zb=da.stride|0,Hb=da.divisor|0);tb=l.location;gb=K[tb];if(1===ee){gb.buffer||v.enableVertexAttribArray(tb);Pa=Qb||2;if(gb.type!==Rb||gb.size!==Pa||gb.buffer!==Sa||gb.normalized!==
cb||gb.offset!==Wb||gb.stride!==Zb)v.bindBuffer(34962,Sa.buffer),v.vertexAttribPointer(tb,Pa,Rb,cb,Zb,Wb),gb.type=Rb,gb.size=Pa,gb.buffer=Sa,gb.normalized=cb,gb.offset=Wb,gb.stride=Zb;gb.divisor!==Hb&&(u.vertexAttribDivisorANGLE(tb,Hb),gb.divisor=Hb)}else if(gb.buffer&&(v.disableVertexAttribArray(tb),gb.buffer=null),gb.x!==Sb||gb.y!==Ma||gb.z!==nb||gb.w!==Bd)v.vertexAttrib4f(tb,Sb,Ma,nb,Bd),gb.x=Sb,gb.y=Ma,gb.z=nb,gb.w=Bd;za.buffer=z.positionBuffer;qc=!1;Xb=null;Uc=0;db=!1;Gc=mc=0;cc=1;jb=0;kb=5126;
Ua=wa=ob=ua=0;ja(za)?(qc=!0,Xb=N.createStream(34962,za),kb=Xb.dtype):(Xb=N.getBuffer(za))?kb=Xb.dtype:"constant"in za?(cc=2,"number"===typeof za.constant?(ob=za.constant,wa=Ua=ua=0):(ob=0<za.constant.length?za.constant[0]:0,wa=1<za.constant.length?za.constant[1]:0,Ua=2<za.constant.length?za.constant[2]:0,ua=3<za.constant.length?za.constant[3]:0)):(Xb=ja(za.buffer)?N.createStream(34962,za.buffer):N.getBuffer(za.buffer),kb="type"in za?H[za.type]:Xb.dtype,db=!!za.normalized,Gc=za.size|0,mc=za.offset|
0,jb=za.stride|0,Uc=za.divisor|0);bb=X.location;Aa=K[bb];if(1===cc){Aa.buffer||v.enableVertexAttribArray(bb);eb=Gc||2;if(Aa.type!==kb||Aa.size!==eb||Aa.buffer!==Xb||Aa.normalized!==db||Aa.offset!==mc||Aa.stride!==jb)v.bindBuffer(34962,Xb.buffer),v.vertexAttribPointer(bb,eb,kb,db,jb,mc),Aa.type=kb,Aa.size=eb,Aa.buffer=Xb,Aa.normalized=db,Aa.offset=mc,Aa.stride=jb;Aa.divisor!==Uc&&(u.vertexAttribDivisorANGLE(bb,Uc),Aa.divisor=Uc)}else if(Aa.buffer&&(v.disableVertexAttribArray(bb),Aa.buffer=null),Aa.x!==
ob||Aa.y!==wa||Aa.z!==Ua||Aa.w!==ua)v.vertexAttrib4f(bb,ob,wa,Ua,ua),Aa.x=ob,Aa.y=wa,Aa.z=Ua,Aa.w=ua;la.buffer=z.positionBuffer;Ia=!1;Bb=null;zb=0;Ra=!1;Jb=oc=0;Za=1;Tb=0;xa=5126;fb=Nb=Ja=ae=0;ja(la)?(Ia=!0,Bb=N.createStream(34962,la),xa=Bb.dtype):(Bb=N.getBuffer(la))?xa=Bb.dtype:"constant"in la?(Za=2,"number"===typeof la.constant?(Ja=la.constant,Nb=fb=ae=0):(Ja=0<la.constant.length?la.constant[0]:0,Nb=1<la.constant.length?la.constant[1]:0,fb=2<la.constant.length?la.constant[2]:0,ae=3<la.constant.length?
la.constant[3]:0)):(Bb=ja(la.buffer)?N.createStream(34962,la.buffer):N.getBuffer(la.buffer),xa="type"in la?H[la.type]:Bb.dtype,Ra=!!la.normalized,Jb=la.size|0,oc=la.offset|0,Tb=la.stride|0,zb=la.divisor|0);hb=oa.location;ya=K[hb];if(1===Za){ya.buffer||v.enableVertexAttribArray(hb);fc=Jb||2;if(ya.type!==xa||ya.size!==fc||ya.buffer!==Bb||ya.normalized!==Ra||ya.offset!==oc||ya.stride!==Tb)v.bindBuffer(34962,Bb.buffer),v.vertexAttribPointer(hb,fc,xa,Ra,Tb,oc),ya.type=xa,ya.size=fc,ya.buffer=Bb,ya.normalized=
Ra,ya.offset=oc,ya.stride=Tb;ya.divisor!==zb&&(u.vertexAttribDivisorANGLE(hb,zb),ya.divisor=zb)}else if(ya.buffer&&(v.disableVertexAttribArray(hb),ya.buffer=null),ya.x!==Ja||ya.y!==Nb||ya.z!==fb||ya.w!==ae)v.vertexAttrib4f(hb,Ja,Nb,fb,ae),ya.x=Ja,ya.y=Nb,ya.z=fb,ya.w=ae;k.buffer=z.positionBuffer;Da=!1;pb=null;qb=0;Xa=!1;nc=Ya=0;ad=1;uc=0;Va=5126;xc=Fa=bd=Lb=0;ja(k)?(Da=!0,pb=N.createStream(34962,k),Va=pb.dtype):(pb=N.getBuffer(k))?Va=pb.dtype:"constant"in k?(ad=2,"number"===typeof k.constant?(bd=
k.constant,Fa=xc=Lb=0):(bd=0<k.constant.length?k.constant[0]:0,Fa=1<k.constant.length?k.constant[1]:0,xc=2<k.constant.length?k.constant[2]:0,Lb=3<k.constant.length?k.constant[3]:0)):(pb=ja(k.buffer)?N.createStream(34962,k.buffer):N.getBuffer(k.buffer),Va="type"in k?H[k.type]:pb.dtype,Xa=!!k.normalized,nc=k.size|0,Ya=k.offset|0,uc=k.stride|0,qb=k.divisor|0);Qa=xb.location;Ba=K[Qa];if(1===ad){Ba.buffer||v.enableVertexAttribArray(Qa);lb=nc||2;if(Ba.type!==Va||Ba.size!==lb||Ba.buffer!==pb||Ba.normalized!==
Xa||Ba.offset!==Ya||Ba.stride!==uc)v.bindBuffer(34962,pb.buffer),v.vertexAttribPointer(Qa,lb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=lb,Ba.buffer=pb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==qb&&(u.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(v.disableVertexAttribArray(Qa),Ba.buffer=null),Ba.x!==bd||Ba.y!==Fa||Ba.z!==xc||Ba.w!==Lb)v.vertexAttrib4f(Qa,bd,Fa,xc,Lb),Ba.x=bd,Ba.y=Fa,Ba.z=xc,Ba.w=Lb;x.buffer=z.colorBuffer;ub=!1;Db=null;rb=0;vc=!1;Ld=vb=0;tc=1;Te=0;Lc=5126;bc=
Ub=hd=nd=0;ja(x)?(ub=!0,Db=N.createStream(34962,x),Lc=Db.dtype):(Db=N.getBuffer(x))?Lc=Db.dtype:"constant"in x?(tc=2,"number"===typeof x.constant?(hd=x.constant,Ub=bc=nd=0):(hd=0<x.constant.length?x.constant[0]:0,Ub=1<x.constant.length?x.constant[1]:0,bc=2<x.constant.length?x.constant[2]:0,nd=3<x.constant.length?x.constant[3]:0)):(Db=ja(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),Lc="type"in x?H[x.type]:Db.dtype,vc=!!x.normalized,Ld=x.size|0,vb=x.offset|0,Te=x.stride|0,rb=x.divisor|
0);Ob=g.location;Ga=K[Ob];if(1===tc){Ga.buffer||v.enableVertexAttribArray(Ob);Yb=Ld||4;if(Ga.type!==Lc||Ga.size!==Yb||Ga.buffer!==Db||Ga.normalized!==vc||Ga.offset!==vb||Ga.stride!==Te)v.bindBuffer(34962,Db.buffer),v.vertexAttribPointer(Ob,Yb,Lc,vc,Te,vb),Ga.type=Lc,Ga.size=Yb,Ga.buffer=Db,Ga.normalized=vc,Ga.offset=vb,Ga.stride=Te;Ga.divisor!==rb&&(u.vertexAttribDivisorANGLE(Ob,rb),Ga.divisor=rb)}else if(Ga.buffer&&(v.disableVertexAttribArray(Ob),Ga.buffer=null),Ga.x!==hd||Ga.y!==Ub||Ga.z!==bc||
Ga.w!==nd)v.vertexAttrib4f(Ob,hd,Ub,bc,nd),Ga.x=hd,Ga.y=Ub,Ga.z=bc,Ga.w=nd;E.buffer=z.colorBuffer;mb=!1;wb=null;Mb=0;Pb=!1;ic=gc=0;Qc=1;Bc=0;Cc=5126;Rc=cd=Mc=Dc=0;ja(E)?(mb=!0,wb=N.createStream(34962,E),Cc=wb.dtype):(wb=N.getBuffer(E))?Cc=wb.dtype:"constant"in E?(Qc=2,"number"===typeof E.constant?(Mc=E.constant,cd=Rc=Dc=0):(Mc=0<E.constant.length?E.constant[0]:0,cd=1<E.constant.length?E.constant[1]:0,Rc=2<E.constant.length?E.constant[2]:0,Dc=3<E.constant.length?E.constant[3]:0)):(wb=ja(E.buffer)?
N.createStream(34962,E.buffer):N.getBuffer(E.buffer),Cc="type"in E?H[E.type]:wb.dtype,Pb=!!E.normalized,ic=E.size|0,gc=E.offset|0,Bc=E.stride|0,Mb=E.divisor|0);Nc=V.location;Kb=K[Nc];if(1===Qc){Kb.buffer||v.enableVertexAttribArray(Nc);Fb=ic||4;if(Kb.type!==Cc||Kb.size!==Fb||Kb.buffer!==wb||Kb.normalized!==Pb||Kb.offset!==gc||Kb.stride!==Bc)v.bindBuffer(34962,wb.buffer),v.vertexAttribPointer(Nc,Fb,Cc,Pb,Bc,gc),Kb.type=Cc,Kb.size=Fb,Kb.buffer=wb,Kb.normalized=Pb,Kb.offset=gc,Kb.stride=Bc;Kb.divisor!==
Mb&&(u.vertexAttribDivisorANGLE(Nc,Mb),Kb.divisor=Mb)}else if(Kb.buffer&&(v.disableVertexAttribArray(Nc),Kb.buffer=null),Kb.x!==Mc||Kb.y!==cd||Kb.z!==Rc||Kb.w!==Dc)v.vertexAttrib4f(Nc,Mc,cd,Rc,Dc),Kb.x=Mc,Kb.y=cd,Kb.z=Rc,Kb.w=Dc;Oc=z.scale;Hc=Oc[0];hc=Oc[1];w&&Sc===Hc&&Xc===hc||(Sc=Hc,Xc=hc,v.uniform2f(Cb.location,Hc,hc));id=z.translate;pg=id[0];Yc=id[1];w&&me===pg&&bg===Yc||(me=pg,bg=Yc,v.uniform2f(Na.location,pg,Yc));Ae=z.thickness;w&&Ye===Ae||(Ye=Ae,v.uniform1f(na.location,Ae));ve=z.depth;w&&be===
ve||(be=ve,v.uniform1f(O.location,ve));Gd=t.call(this,U,z,w);Ed=Gd[0];Ec=Gd[1];jd=Gd[2];kd=Gd[3];w&&ed===Ed&&od===Ec&&$c===jd&&Ad===kd||(ed=Ed,od=Ec,$c=jd,Ad=kd,v.uniform4f(Z.location,Ed,Ec,jd,kd));Cd=z.miterLimit;w&&te===Cd||(te=Cd,v.uniform1f(d.location,Cd));je=h.call(this,U,z,w);w&&ue===je||(ue=je,v.uniform1f(ba.location,je));de=z.dashLength;w&&ce===de||(ce=de,v.uniform1f(q.location,de));$d=z.opacity;w&&ne===$d||(ne=$d,v.uniform1f(Ka.location,$d));(Yd=z.dashTexture)&&"framebuffer"===Yd._reglType&&
(Yd=Yd.color[0]);fe=Yd._texture;v.uniform1i(pa.location,fe.bind());yc=z.count;0<yc?Ic?u.drawElementsInstancedANGLE(5,4,Ic.type,0<<(Ic.type-5121>>1),yc):u.drawArraysInstancedANGLE(5,0,4,yc):0>yc&&(Ic?v.drawElements(5,4,Ic.type,0<<(Ic.type-5121>>1)):v.drawArrays(5,0,4));U.viewportWidth=Vb;U.viewportHeight=Fc;Ab&&N.destroyStream(Sa);qc&&N.destroyStream(Xb);Ia&&N.destroyStream(Bb);Da&&N.destroyStream(pb);ub&&N.destroyStream(Db);mb&&N.destroyStream(wb);fe.unbind()}sa.dirty=!0;dc.setVAO(null);n&&(p.cpuTime+=
performance.now()-r)},draw:function(e){var h,m,t,u,w,z,C,B,D,P,G,A,Q,J,W,ha,ma,S,qa,Gb,Ea,Oa,Td,Ud,Ha,ib,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld;h=T.next;h!==T.cur&&(h?v.bindFramebuffer(36160,h.framebuffer):v.bindFramebuffer(36160,null),T.cur=h);
if(sa.dirty){var tc,Te,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc;tc=ea.dither;tc!==sa.dither&&(tc?v.enable(3024):v.disable(3024),sa.dither=tc);Te=ea.depth_func;Te!==sa.depth_func&&(v.depthFunc(Te),sa.depth_func=Te);Lc=ud[0];nd=ud[1];if(Lc!==wc[0]||nd!==wc[1])v.depthRange(Lc,nd),wc[0]=Lc,wc[1]=nd;hd=ea.depth_mask;hd!==sa.depth_mask&&(v.depthMask(hd),sa.depth_mask=hd);Ub=pc[0];bc=pc[1];Ob=pc[2];Ga=pc[3];if(Ub!==lc[0]||bc!==lc[1]||Ob!==lc[2]||Ga!==lc[3])v.colorMask(Ub,
bc,Ob,Ga),lc[0]=Ub,lc[1]=bc,lc[2]=Ob,lc[3]=Ga;Yb=ea.frontFace;Yb!==sa.frontFace&&(v.frontFace(Yb),sa.frontFace=Yb);mb=ea.lineWidth;mb!==sa.lineWidth&&(v.lineWidth(mb),sa.lineWidth=mb);wb=ea.polygonOffset_enable;wb!==sa.polygonOffset_enable&&(wb?v.enable(32823):v.disable(32823),sa.polygonOffset_enable=wb);Mb=ca[0];Pb=ca[1];if(Mb!==M[0]||Pb!==M[1])v.polygonOffset(Mb,Pb),M[0]=Mb,M[1]=Pb;gc=ea.sample_alpha;gc!==sa.sample_alpha&&(gc?v.enable(32926):v.disable(32926),sa.sample_alpha=gc);ic=ea.sample_enable;
ic!==sa.sample_enable&&(ic?v.enable(32928):v.disable(32928),sa.sample_enable=ic);Qc=ka[0];Bc=ka[1];if(Qc!==Ca[0]||Bc!==Ca[1])v.sampleCoverage(Qc,Bc),Ca[0]=Qc,Ca[1]=Bc;Cc=ea.stencil_mask;Cc!==sa.stencil_mask&&(v.stencilMask(Cc),sa.stencil_mask=Cc);Dc=Wc[0];Mc=Wc[1];cd=Wc[2];if(Dc!==F[0]||Mc!==F[1]||cd!==F[2])v.stencilFunc(Dc,Mc,cd),F[0]=Dc,F[1]=Mc,F[2]=cd;Rc=va[0];Nc=va[1];Kb=va[2];Fb=va[3];if(Rc!==R[0]||Nc!==R[1]||Kb!==R[2]||Fb!==R[3])v.stencilOpSeparate(Rc,Nc,Kb,Fb),R[0]=Rc,R[1]=Nc,R[2]=Kb,R[3]=
Fb;Oc=y[0];Hc=y[1];Sc=y[2];hc=y[3];if(Oc!==ia[0]||Hc!==ia[1]||Sc!==ia[2]||hc!==ia[3])v.stencilOpSeparate(Oc,Hc,Sc,hc),ia[0]=Oc,ia[1]=Hc,ia[2]=Sc,ia[3]=hc}m=e.viewport;t=m.x|0;u=m.y|0;w="width"in m?m.width|0:U.framebufferWidth-t;z="height"in m?m.height|0:U.framebufferHeight-u;C=U.viewportWidth;U.viewportWidth=w;B=U.viewportHeight;U.viewportHeight=z;v.viewport(t,u,w,z);ra[0]=t;ra[1]=u;ra[2]=w;ra[3]=z;v.blendColor(0,0,0,0);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=0;v.enable(3042);sa.blend_enable=!0;v.blendEquationSeparate(32774,
32774);ga[0]=32774;ga[1]=32774;v.blendFuncSeparate(770,771,773,1);ec[0]=770;ec[1]=771;ec[2]=773;ec[3]=1;v.enable(2884);sa.cull_enable=!0;v.cullFace(1029);sa.cull_face=1029;(D=n.call(this,U,e,0))?v.enable(2929):v.disable(2929);sa.depth_enable=D;P=e.viewport;G=P.x|0;A=P.y|0;Q="width"in P?P.width|0:U.framebufferWidth-G;J="height"in P?P.height|0:U.framebufferHeight-A;v.scissor(G,A,Q,J);Jc[0]=G;Jc[1]=A;Jc[2]=Q;Jc[3]=J;v.enable(3089);sa.scissor_enable=!0;v.disable(2960);sa.stencil_enable=!1;if(W=sa.profile)ha=
performance.now(),p.count++;v.useProgram(I.program);ma=$a.angle_instanced_arrays;dc.setVAO(null);da.buffer=e.positionBuffer;S=!1;qa=null;Gb=0;Ea=!1;Td=Oa=0;Ud=1;Ha=0;ib=5126;pd=wd=ld=rd=0;ja(da)?(S=!0,qa=N.createStream(34962,da),ib=qa.dtype):(qa=N.getBuffer(da))?ib=qa.dtype:"constant"in da?(Ud=2,"number"===typeof da.constant?(ld=da.constant,wd=pd=rd=0):(ld=0<da.constant.length?da.constant[0]:0,wd=1<da.constant.length?da.constant[1]:0,pd=2<da.constant.length?da.constant[2]:0,rd=3<da.constant.length?
da.constant[3]:0)):(qa=ja(da.buffer)?N.createStream(34962,da.buffer):N.getBuffer(da.buffer),ib="type"in da?H[da.type]:qa.dtype,Ea=!!da.normalized,Td=da.size|0,Oa=da.offset|0,Ha=da.stride|0,Gb=da.divisor|0);dd=l.location;zc=K[dd];if(1===Ud){zc.buffer||v.enableVertexAttribArray(dd);sd=Td||2;if(zc.type!==ib||zc.size!==sd||zc.buffer!==qa||zc.normalized!==Ea||zc.offset!==Oa||zc.stride!==Ha)v.bindBuffer(34962,qa.buffer),v.vertexAttribPointer(dd,sd,ib,Ea,Ha,Oa),zc.type=ib,zc.size=sd,zc.buffer=qa,zc.normalized=
Ea,zc.offset=Oa,zc.stride=Ha;zc.divisor!==Gb&&(ma.vertexAttribDivisorANGLE(dd,Gb),zc.divisor=Gb)}else if(zc.buffer&&(v.disableVertexAttribArray(dd),zc.buffer=null),zc.x!==ld||zc.y!==wd||zc.z!==pd||zc.w!==rd)v.vertexAttrib4f(dd,ld,wd,pd,rd),zc.x=ld,zc.y=wd,zc.z=pd,zc.w=rd;za.buffer=e.positionBuffer;gd=!1;Kc=null;sc=0;ab=!1;Eb=jc=0;rc=1;Ta=0;Ic=5126;md=Dd=Zc=ac=0;ja(za)?(gd=!0,Kc=N.createStream(34962,za),Ic=Kc.dtype):(Kc=N.getBuffer(za))?Ic=Kc.dtype:"constant"in za?(rc=2,"number"===typeof za.constant?
(Zc=za.constant,Dd=md=ac=0):(Zc=0<za.constant.length?za.constant[0]:0,Dd=1<za.constant.length?za.constant[1]:0,md=2<za.constant.length?za.constant[2]:0,ac=3<za.constant.length?za.constant[3]:0)):(Kc=ja(za.buffer)?N.createStream(34962,za.buffer):N.getBuffer(za.buffer),Ic="type"in za?H[za.type]:Kc.dtype,ab=!!za.normalized,Eb=za.size|0,jc=za.offset|0,Ta=za.stride|0,sc=za.divisor|0);Ac=X.location;Vb=K[Ac];if(1===rc){Vb.buffer||v.enableVertexAttribArray(Ac);Fc=Eb||2;if(Vb.type!==Ic||Vb.size!==Fc||Vb.buffer!==
Kc||Vb.normalized!==ab||Vb.offset!==jc||Vb.stride!==Ta)v.bindBuffer(34962,Kc.buffer),v.vertexAttribPointer(Ac,Fc,Ic,ab,Ta,jc),Vb.type=Ic,Vb.size=Fc,Vb.buffer=Kc,Vb.normalized=ab,Vb.offset=jc,Vb.stride=Ta;Vb.divisor!==sc&&(ma.vertexAttribDivisorANGLE(Ac,sc),Vb.divisor=sc)}else if(Vb.buffer&&(v.disableVertexAttribArray(Ac),Vb.buffer=null),Vb.x!==Zc||Vb.y!==Dd||Vb.z!==md||Vb.w!==ac)v.vertexAttrib4f(Ac,Zc,Dd,md,ac),Vb.x=Zc,Vb.y=Dd,Vb.z=md,Vb.w=ac;la.buffer=e.positionBuffer;Pc=!1;La=null;sb=0;Wa=!1;vd=
ta=0;Ab=1;Sa=0;Hb=5126;ee=Qb=Wb=cb=0;ja(la)?(Pc=!0,La=N.createStream(34962,la),Hb=La.dtype):(La=N.getBuffer(la))?Hb=La.dtype:"constant"in la?(Ab=2,"number"===typeof la.constant?(Wb=la.constant,Qb=ee=cb=0):(Wb=0<la.constant.length?la.constant[0]:0,Qb=1<la.constant.length?la.constant[1]:0,ee=2<la.constant.length?la.constant[2]:0,cb=3<la.constant.length?la.constant[3]:0)):(La=ja(la.buffer)?N.createStream(34962,la.buffer):N.getBuffer(la.buffer),Hb="type"in la?H[la.type]:La.dtype,Wa=!!la.normalized,vd=
la.size|0,ta=la.offset|0,Sa=la.stride|0,sb=la.divisor|0);Zb=oa.location;Rb=K[Zb];if(1===Ab){Rb.buffer||v.enableVertexAttribArray(Zb);Bd=vd||2;if(Rb.type!==Hb||Rb.size!==Bd||Rb.buffer!==La||Rb.normalized!==Wa||Rb.offset!==ta||Rb.stride!==Sa)v.bindBuffer(34962,La.buffer),v.vertexAttribPointer(Zb,Bd,Hb,Wa,Sa,ta),Rb.type=Hb,Rb.size=Bd,Rb.buffer=La,Rb.normalized=Wa,Rb.offset=ta,Rb.stride=Sa;Rb.divisor!==sb&&(ma.vertexAttribDivisorANGLE(Zb,sb),Rb.divisor=sb)}else if(Rb.buffer&&(v.disableVertexAttribArray(Zb),
Rb.buffer=null),Rb.x!==Wb||Rb.y!==Qb||Rb.z!==ee||Rb.w!==cb)v.vertexAttrib4f(Zb,Wb,Qb,ee,cb),Rb.x=Wb,Rb.y=Qb,Rb.z=ee,Rb.w=cb;k.buffer=e.positionBuffer;Sb=!1;Ma=null;nb=0;tb=!1;Pa=gb=0;qc=1;Xb=0;Uc=5126;cc=Gc=mc=db=0;ja(k)?(Sb=!0,Ma=N.createStream(34962,k),Uc=Ma.dtype):(Ma=N.getBuffer(k))?Uc=Ma.dtype:"constant"in k?(qc=2,"number"===typeof k.constant?(mc=k.constant,Gc=cc=db=0):(mc=0<k.constant.length?k.constant[0]:0,Gc=1<k.constant.length?k.constant[1]:0,cc=2<k.constant.length?k.constant[2]:0,db=3<k.constant.length?
k.constant[3]:0)):(Ma=ja(k.buffer)?N.createStream(34962,k.buffer):N.getBuffer(k.buffer),Uc="type"in k?H[k.type]:Ma.dtype,tb=!!k.normalized,Pa=k.size|0,gb=k.offset|0,Xb=k.stride|0,nb=k.divisor|0);jb=xb.location;kb=K[jb];if(1===qc){kb.buffer||v.enableVertexAttribArray(jb);ua=Pa||2;if(kb.type!==Uc||kb.size!==ua||kb.buffer!==Ma||kb.normalized!==tb||kb.offset!==gb||kb.stride!==Xb)v.bindBuffer(34962,Ma.buffer),v.vertexAttribPointer(jb,ua,Uc,tb,Xb,gb),kb.type=Uc,kb.size=ua,kb.buffer=Ma,kb.normalized=tb,
kb.offset=gb,kb.stride=Xb;kb.divisor!==nb&&(ma.vertexAttribDivisorANGLE(jb,nb),kb.divisor=nb)}else if(kb.buffer&&(v.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==mc||kb.y!==Gc||kb.z!==cc||kb.w!==db)v.vertexAttrib4f(jb,mc,Gc,cc,db),kb.x=mc,kb.y=Gc,kb.z=cc,kb.w=db;x.buffer=e.colorBuffer;ob=!1;wa=null;Ua=0;bb=!1;eb=Aa=0;Ia=1;Bb=0;zb=5126;Za=Jb=oc=Ra=0;ja(x)?(ob=!0,wa=N.createStream(34962,x),zb=wa.dtype):(wa=N.getBuffer(x))?zb=wa.dtype:"constant"in x?(Ia=2,"number"===typeof x.constant?(oc=x.constant,
Jb=Za=Ra=0):(oc=0<x.constant.length?x.constant[0]:0,Jb=1<x.constant.length?x.constant[1]:0,Za=2<x.constant.length?x.constant[2]:0,Ra=3<x.constant.length?x.constant[3]:0)):(wa=ja(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),zb="type"in x?H[x.type]:wa.dtype,bb=!!x.normalized,eb=x.size|0,Aa=x.offset|0,Bb=x.stride|0,Ua=x.divisor|0);Tb=g.location;xa=K[Tb];if(1===Ia){xa.buffer||v.enableVertexAttribArray(Tb);ae=eb||4;if(xa.type!==zb||xa.size!==ae||xa.buffer!==wa||xa.normalized!==bb||xa.offset!==
Aa||xa.stride!==Bb)v.bindBuffer(34962,wa.buffer),v.vertexAttribPointer(Tb,ae,zb,bb,Bb,Aa),xa.type=zb,xa.size=ae,xa.buffer=wa,xa.normalized=bb,xa.offset=Aa,xa.stride=Bb;xa.divisor!==Ua&&(ma.vertexAttribDivisorANGLE(Tb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(v.disableVertexAttribArray(Tb),xa.buffer=null),xa.x!==oc||xa.y!==Jb||xa.z!==Za||xa.w!==Ra)v.vertexAttrib4f(Tb,oc,Jb,Za,Ra),xa.x=oc,xa.y=Jb,xa.z=Za,xa.w=Ra;E.buffer=e.colorBuffer;Ja=!1;Nb=null;fb=0;hb=!1;fc=ya=0;Da=1;pb=0;qb=5126;ad=nc=Ya=Xa=0;ja(E)?
(Ja=!0,Nb=N.createStream(34962,E),qb=Nb.dtype):(Nb=N.getBuffer(E))?qb=Nb.dtype:"constant"in E?(Da=2,"number"===typeof E.constant?(Ya=E.constant,nc=ad=Xa=0):(Ya=0<E.constant.length?E.constant[0]:0,nc=1<E.constant.length?E.constant[1]:0,ad=2<E.constant.length?E.constant[2]:0,Xa=3<E.constant.length?E.constant[3]:0)):(Nb=ja(E.buffer)?N.createStream(34962,E.buffer):N.getBuffer(E.buffer),qb="type"in E?H[E.type]:Nb.dtype,hb=!!E.normalized,fc=E.size|0,ya=E.offset|0,pb=E.stride|0,fb=E.divisor|0);uc=V.location;
Va=K[uc];if(1===Da){Va.buffer||v.enableVertexAttribArray(uc);Lb=fc||4;if(Va.type!==qb||Va.size!==Lb||Va.buffer!==Nb||Va.normalized!==hb||Va.offset!==ya||Va.stride!==pb)v.bindBuffer(34962,Nb.buffer),v.vertexAttribPointer(uc,Lb,qb,hb,pb,ya),Va.type=qb,Va.size=Lb,Va.buffer=Nb,Va.normalized=hb,Va.offset=ya,Va.stride=pb;Va.divisor!==fb&&(ma.vertexAttribDivisorANGLE(uc,fb),Va.divisor=fb)}else if(Va.buffer&&(v.disableVertexAttribArray(uc),Va.buffer=null),Va.x!==Ya||Va.y!==nc||Va.z!==ad||Va.w!==Xa)v.vertexAttrib4f(uc,
Ya,nc,ad,Xa),Va.x=Ya,Va.y=nc,Va.z=ad,Va.w=Xa;bd=Y.location;Fa=K[bd];Fa.buffer||v.enableVertexAttribArray(bd);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==f||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)v.bindBuffer(34962,f.buffer),v.vertexAttribPointer(bd,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=f,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(ma.vertexAttribDivisorANGLE(bd,0),Fa.divisor=0);xc=c.location;Qa=K[xc];Qa.buffer||v.enableVertexAttribArray(xc);if(5126!==Qa.type||1!==
Qa.size||Qa.buffer!==b||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)v.bindBuffer(34962,b.buffer),v.vertexAttribPointer(xc,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=b,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(ma.vertexAttribDivisorANGLE(xc,0),Qa.divisor=0);Ba=e.scale;v.uniform2f(Cb.location,Ba[0],Ba[1]);lb=e.translate;v.uniform2f(Na.location,lb[0],lb[1]);v.uniform1f(na.location,e.thickness);v.uniform1f(O.location,e.depth);ub=r.call(this,U,e,0);v.uniform4f(Z.location,ub[0],
ub[1],ub[2],ub[3]);v.uniform1f(d.location,e.miterLimit);Db=a.call(this,U,e,0);v.uniform1f(ba.location,Db);v.uniform1f(q.location,e.dashLength);v.uniform1f(Ka.location,e.opacity);(rb=e.dashTexture)&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);vc=rb._texture;v.uniform1i(pa.location,vc.bind());(vb=L.elements)?v.bindBuffer(34963,vb.buffer.buffer):dc.currentVAO&&(vb=$b.getElements(dc.currentVAO.elements))&&v.bindBuffer(34963,vb.buffer.buffer);Ld=e.count;0<Ld?vb?ma.drawElementsInstancedANGLE(5,4,vb.type,
0<<(vb.type-5121>>1),Ld):ma.drawArraysInstancedANGLE(5,0,4,Ld):0>Ld&&(vb?v.drawElements(5,4,vb.type,0<<(vb.type-5121>>1)):v.drawArrays(5,0,4));sa.dirty=!0;dc.setVAO(null);U.viewportWidth=C;U.viewportHeight=B;W&&(p.cpuTime+=performance.now()-ha);S&&N.destroyStream(qa);gd&&N.destroyStream(Kc);Pc&&N.destroyStream(La);Sb&&N.destroyStream(Ma);ob&&N.destroyStream(wa);Ja&&N.destroyStream(Nb);vc.unbind()},scope:function(a,c,d){var g,e,h,l,n,r,q,t,v,y,M,I,F,ca,O,K,T,W,R,aa,V,X,ka,Z,ia,ga,ba,va,pc,S,Y,ra,Ca,
pa,ab,ud,Eb,oa,Ta,na,ac,wc,Jc,ec,Ac,Vb,Fc,Pc,La,sb,Wa,ta,lc,Ab,Sa,Hb,cb,Wb,Qb,$a,Zb,Rb,Na,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Wc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,xb,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,$b,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ka,tc,dc,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,Cb,me,Yc,Tc,Qd,Ye,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe,Ne,Ke,pe,Be,Fe,
Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,of,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf,pf,lf,qf,Af,Bf,Me,ye,mf,nf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf;g=a.viewport;e=g.x|0;h=g.y|0;l="width"in g?g.width|0:U.framebufferWidth-e;n="height"in g?g.height|0:U.framebufferHeight-h;r=U.viewportWidth;U.viewportWidth=l;q=U.viewportHeight;U.viewportHeight=n;t=ha[0];ha[0]=e;v=ha[1];ha[1]=h;y=ha[2];ha[2]=l;M=ha[3];ha[3]=n;I=Ha[0];Ha[0]=0;F=Ha[1];Ha[1]=0;ca=Ha[2];Ha[2]=0;O=Ha[3];Ha[3]=0;K=ea.blend_enable;ea.blend_enable=
!0;T=ib[0];ib[0]=32774;W=ib[1];ib[1]=32774;R=qa[0];qa[0]=770;aa=qa[1];qa[1]=771;V=qa[2];qa[2]=773;X=qa[3];qa[3]=1;ka=ea.cull_enable;ea.cull_enable=!0;Z=ea.cull_face;ea.cull_face=1029;ia=u.call(this,U,a,d);ga=ea.depth_enable;ea.depth_enable=ia;ba=a.viewport;va=ba.x|0;pc=ba.y|0;S="width"in ba?ba.width|0:U.framebufferWidth-va;Y="height"in ba?ba.height|0:U.framebufferHeight-pc;ra=Gb[0];Gb[0]=va;Ca=Gb[1];Gb[1]=pc;pa=Gb[2];Gb[2]=S;ab=Gb[3];Gb[3]=Y;ud=ea.scissor_enable;ea.scissor_enable=!0;Eb=ea.stencil_enable;
ea.stencil_enable=!1;if(oa=sa.profile)Ta=performance.now(),p.count++;na=L.offset;L.offset=0;ac=L.count;L.count=4;wc=a.count;Jc=L.instances;L.instances=wc;ec=L.primitive;L.primitive=5;Ac=a.dashLength;Vb=Oa[23];Oa[23]=Ac;Fc=a.dashTexture;Pc=Oa[24];Oa[24]=Fc;La=a.depth;sb=Oa[22];Oa[22]=La;Wa=a.id;ta=Oa[31];Oa[31]=Wa;lc=a.miterLimit;Ab=Oa[32];Oa[32]=lc;Sa=A.call(this,U,a,d);Hb=Oa[33];Oa[33]=Sa;cb=a.opacity;Wb=Oa[10];Oa[10]=cb;Qb=U.pixelRatio;$a=Oa[34];Oa[34]=Qb;Zb=a.scale;Rb=Oa[6];Oa[6]=Zb;Na=a.scaleFract;
Sb=Oa[7];Oa[7]=Na;Ma=a.thickness;nb=Oa[21];Oa[21]=Ma;tb=a.translate;gb=Oa[8];Oa[8]=tb;Pa=a.translateFract;qc=Oa[9];Oa[9]=Pa;Xb=Q.call(this,U,a,d);Wc=Oa[3];Oa[3]=Xb;x.buffer=a.colorBuffer;db=!1;mc=null;Gc=0;cc=!1;kb=jb=0;ua=1;ob=0;wa=5126;eb=Aa=bb=Ua=0;ja(x)?(db=!0,mc=N.createStream(34962,x),wa=mc.dtype):(mc=N.getBuffer(x))?wa=mc.dtype:"constant"in x?(ua=2,"number"===typeof x.constant?(bb=x.constant,Aa=eb=Ua=0):(bb=0<x.constant.length?x.constant[0]:0,Aa=1<x.constant.length?x.constant[1]:0,eb=2<x.constant.length?
x.constant[2]:0,Ua=3<x.constant.length?x.constant[3]:0)):(mc=ja(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),wa="type"in x?H[x.type]:mc.dtype,cc=!!x.normalized,kb=x.size|0,jb=x.offset|0,ob=x.stride|0,Gc=x.divisor|0);Ia=G.buffer;G.buffer=mc;Bb=G.divisor;G.divisor=Gc;zb=G.normalized;G.normalized=cc;Ra=G.offset;G.offset=jb;oc=G.size;G.size=kb;Jb=G.state;G.state=ua;Za=G.stride;G.stride=ob;Tb=G.type;G.type=wa;xa=G.w;G.w=Ua;xb=G.x;G.x=bb;Ja=G.y;G.y=Aa;Nb=G.z;G.z=eb;da.buffer=a.positionBuffer;
fb=!1;hb=null;ya=0;fc=!1;pb=Da=0;qb=1;Xa=0;Ya=5126;Va=uc=ad=nc=0;ja(da)?(fb=!0,hb=N.createStream(34962,da),Ya=hb.dtype):(hb=N.getBuffer(da))?Ya=hb.dtype:"constant"in da?(qb=2,"number"===typeof da.constant?(ad=da.constant,uc=Va=nc=0):(ad=0<da.constant.length?da.constant[0]:0,uc=1<da.constant.length?da.constant[1]:0,Va=2<da.constant.length?da.constant[2]:0,nc=3<da.constant.length?da.constant[3]:0)):(hb=ja(da.buffer)?N.createStream(34962,da.buffer):N.getBuffer(da.buffer),Ya="type"in da?H[da.type]:hb.dtype,
fc=!!da.normalized,pb=da.size|0,Da=da.offset|0,Xa=da.stride|0,ya=da.divisor|0);Lb=D.buffer;D.buffer=hb;$b=D.divisor;D.divisor=ya;Fa=D.normalized;D.normalized=fc;xc=D.offset;D.offset=Da;Qa=D.size;D.size=pb;Ba=D.state;D.state=qb;lb=D.stride;D.stride=Xa;ub=D.type;D.type=Ya;Db=D.w;D.w=nc;rb=D.x;D.x=ad;vc=D.y;D.y=uc;vb=D.z;D.z=Va;E.buffer=a.colorBuffer;Ka=!1;tc=null;dc=0;Lc=!1;hd=nd=0;Ub=1;bc=0;Ob=5126;wb=mb=Yb=Ga=0;ja(E)?(Ka=!0,tc=N.createStream(34962,E),Ob=tc.dtype):(tc=N.getBuffer(E))?Ob=tc.dtype:"constant"in
E?(Ub=2,"number"===typeof E.constant?(Yb=E.constant,mb=wb=Ga=0):(Yb=0<E.constant.length?E.constant[0]:0,mb=1<E.constant.length?E.constant[1]:0,wb=2<E.constant.length?E.constant[2]:0,Ga=3<E.constant.length?E.constant[3]:0)):(tc=ja(E.buffer)?N.createStream(34962,E.buffer):N.getBuffer(E.buffer),Ob="type"in E?H[E.type]:tc.dtype,Lc=!!E.normalized,hd=E.size|0,nd=E.offset|0,bc=E.stride|0,dc=E.divisor|0);Mb=w.buffer;w.buffer=tc;Pb=w.divisor;w.divisor=dc;gc=w.normalized;w.normalized=Lc;ic=w.offset;w.offset=
nd;Qc=w.size;w.size=hd;Bc=w.state;w.state=Ub;Cc=w.stride;w.stride=bc;Dc=w.type;w.type=Ob;Mc=w.w;w.w=Ga;cd=w.x;w.x=Yb;Rc=w.y;w.y=mb;Nc=w.z;w.z=wb;za.buffer=a.positionBuffer;Kb=!1;Fb=null;Oc=0;Hc=!1;hc=Sc=0;Xc=1;id=0;Cb=5126;Qd=Tc=Yc=me=0;ja(za)?(Kb=!0,Fb=N.createStream(34962,za),Cb=Fb.dtype):(Fb=N.getBuffer(za))?Cb=Fb.dtype:"constant"in za?(Xc=2,"number"===typeof za.constant?(Yc=za.constant,Tc=Qd=me=0):(Yc=0<za.constant.length?za.constant[0]:0,Tc=1<za.constant.length?za.constant[1]:0,Qd=2<za.constant.length?
za.constant[2]:0,me=3<za.constant.length?za.constant[3]:0)):(Fb=ja(za.buffer)?N.createStream(34962,za.buffer):N.getBuffer(za.buffer),Cb="type"in za?H[za.type]:Fb.dtype,Hc=!!za.normalized,hc=za.size|0,Sc=za.offset|0,id=za.stride|0,Oc=za.divisor|0);Ye=C.buffer;C.buffer=Fb;ve=C.divisor;C.divisor=Oc;be=C.normalized;C.normalized=Hc;Gd=C.offset;C.offset=Sc;Ed=C.size;C.size=hc;ed=C.state;C.state=Xc;Ec=C.stride;C.stride=id;od=C.type;C.type=Cb;jd=C.w;C.w=me;$c=C.x;C.x=Yc;kd=C.y;C.y=Tc;Ad=C.z;C.z=Qd;Cd=B.buffer;
B.buffer=f;te=B.divisor;B.divisor=0;je=B.normalized;B.normalized=!1;ue=B.offset;B.offset=0;de=B.size;B.size=0;ce=B.state;B.state=1;$d=B.stride;B.stride=8;ne=B.type;B.type=5126;Yd=B.w;B.w=0;fe=B.x;B.x=0;yc=B.y;B.y=0;Vc=B.z;B.z=0;oe=z.buffer;z.buffer=b;he=z.divisor;z.divisor=0;Fd=z.normalized;z.normalized=!1;Id=z.offset;z.offset=4;Md=z.size;z.size=0;Nd=z.state;z.state=1;ge=z.stride;z.stride=8;Ee=z.type;z.type=5126;we=z.w;z.w=0;ke=z.x;z.x=0;Xe=z.y;z.y=0;Ne=z.z;z.z=0;la.buffer=a.positionBuffer;Ke=!1;
pe=null;Be=0;Fe=!1;He=Ge=0;Ce=1;Hd=0;Rd=5126;zd=Ie=Zd=Wd=0;ja(la)?(Ke=!0,pe=N.createStream(34962,la),Rd=pe.dtype):(pe=N.getBuffer(la))?Rd=pe.dtype:"constant"in la?(Ce=2,"number"===typeof la.constant?(Zd=la.constant,Ie=zd=Wd=0):(Zd=0<la.constant.length?la.constant[0]:0,Ie=1<la.constant.length?la.constant[1]:0,zd=2<la.constant.length?la.constant[2]:0,Wd=3<la.constant.length?la.constant[3]:0)):(pe=ja(la.buffer)?N.createStream(34962,la.buffer):N.getBuffer(la.buffer),Rd="type"in la?H[la.type]:pe.dtype,
Fe=!!la.normalized,He=la.size|0,Ge=la.offset|0,Hd=la.stride|0,Be=la.divisor|0);Od=J.buffer;J.buffer=pe;xe=J.divisor;J.divisor=Be;Je=J.normalized;J.normalized=Fe;of=J.offset;J.offset=Ge;We=J.size;J.size=He;Oe=J.state;J.state=Ce;Le=J.stride;J.stride=Hd;Ve=J.type;J.type=Rd;Se=J.w;J.w=Wd;Pe=J.x;J.x=Zd;Qe=J.y;J.y=Ie;Pd=J.z;J.z=zd;k.buffer=a.positionBuffer;Vd=!1;Re=null;ff=0;kf=!1;gf=cf=0;hf=1;jf=0;pf=5126;Bf=Af=qf=lf=0;ja(k)?(Vd=!0,Re=N.createStream(34962,k),pf=Re.dtype):(Re=N.getBuffer(k))?pf=Re.dtype:
"constant"in k?(hf=2,"number"===typeof k.constant?(qf=k.constant,Af=Bf=lf=0):(qf=0<k.constant.length?k.constant[0]:0,Af=1<k.constant.length?k.constant[1]:0,Bf=2<k.constant.length?k.constant[2]:0,lf=3<k.constant.length?k.constant[3]:0)):(Re=ja(k.buffer)?N.createStream(34962,k.buffer):N.getBuffer(k.buffer),pf="type"in k?H[k.type]:Re.dtype,kf=!!k.normalized,gf=k.size|0,cf=k.offset|0,jf=k.stride|0,ff=k.divisor|0);Me=P.buffer;P.buffer=Re;ye=P.divisor;P.divisor=ff;mf=P.normalized;P.normalized=kf;nf=P.offset;
P.offset=cf;Cf=P.size;P.size=gf;Ff=P.state;P.state=hf;zf=P.stride;P.stride=jf;Df=P.type;P.type=pf;Ef=P.w;P.w=lf;uf=P.x;P.x=qf;vf=P.y;P.y=Af;tf=P.z;P.z=Bf;wf=Ea.vert;Ea.vert=36;xf=Ea.frag;Ea.frag=35;sa.dirty=!0;c(U,a,d);U.viewportWidth=r;U.viewportHeight=q;ha[0]=t;ha[1]=v;ha[2]=y;ha[3]=M;Ha[0]=I;Ha[1]=F;Ha[2]=ca;Ha[3]=O;ea.blend_enable=K;ib[0]=T;ib[1]=W;qa[0]=R;qa[1]=aa;qa[2]=V;qa[3]=X;ea.cull_enable=ka;ea.cull_face=Z;ea.depth_enable=ga;Gb[0]=ra;Gb[1]=Ca;Gb[2]=pa;Gb[3]=ab;ea.scissor_enable=ud;ea.stencil_enable=
Eb;oa&&(p.cpuTime+=performance.now()-Ta);L.offset=na;L.count=ac;L.instances=Jc;L.primitive=ec;Oa[23]=Vb;Oa[24]=Pc;Oa[22]=sb;Oa[31]=ta;Oa[32]=Ab;Oa[33]=Hb;Oa[10]=Wb;Oa[34]=$a;Oa[6]=Rb;Oa[7]=Sb;Oa[21]=nb;Oa[8]=gb;Oa[9]=qc;Oa[3]=Wc;db&&N.destroyStream(mc);G.buffer=Ia;G.divisor=Bb;G.normalized=zb;G.offset=Ra;G.size=oc;G.state=Jb;G.stride=Za;G.type=Tb;G.w=xa;G.x=xb;G.y=Ja;G.z=Nb;fb&&N.destroyStream(hb);D.buffer=Lb;D.divisor=$b;D.normalized=Fa;D.offset=xc;D.size=Qa;D.state=Ba;D.stride=lb;D.type=ub;D.w=
Db;D.x=rb;D.y=vc;D.z=vb;Ka&&N.destroyStream(tc);w.buffer=Mb;w.divisor=Pb;w.normalized=gc;w.offset=ic;w.size=Qc;w.state=Bc;w.stride=Cc;w.type=Dc;w.w=Mc;w.x=cd;w.y=Rc;w.z=Nc;Kb&&N.destroyStream(Fb);C.buffer=Ye;C.divisor=ve;C.normalized=be;C.offset=Gd;C.size=Ed;C.state=ed;C.stride=Ec;C.type=od;C.w=jd;C.x=$c;C.y=kd;C.z=Ad;B.buffer=Cd;B.divisor=te;B.normalized=je;B.offset=ue;B.size=de;B.state=ce;B.stride=$d;B.type=ne;B.w=Yd;B.x=fe;B.y=yc;B.z=Vc;z.buffer=oe;z.divisor=he;z.normalized=Fd;z.offset=Id;z.size=
Md;z.state=Nd;z.stride=ge;z.type=Ee;z.w=we;z.x=ke;z.y=Xe;z.z=Ne;Ke&&N.destroyStream(pe);J.buffer=Od;J.divisor=xe;J.normalized=Je;J.offset=of;J.size=We;J.state=Oe;J.stride=Le;J.type=Ve;J.w=Se;J.x=Pe;J.y=Qe;J.z=Pd;Vd&&N.destroyStream(Re);P.buffer=Me;P.divisor=ye;P.normalized=mf;P.offset=nf;P.size=Cf;P.state=Ff;P.stride=zf;P.type=Df;P.w=Ef;P.x=uf;P.y=vf;P.z=tf;Ea.vert=wf;Ea.frag=xf;sa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(e,p,n,I,
f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P){var W,S,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,Ka,xb,Cb,na,Na,Z,K,N,U,sa,L,$b,$a,T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa;W=e.attributes;S=e.buffer;t=e.context;h=e.current;g=e.draw;l=e.elements;V=e.extensions;X=e.framebuffer;q=e.gl;pa=e.isBufferArgs;O=e.next;Y=e.shader;c=e.uniforms;d=e.vao;ba=O.blend_color;oa=h.blend_color;Ka=O.blend_equation;xb=h.blend_equation;Cb=O.blend_func;na=h.blend_func;Na=O.colorMask;Z=h.colorMask;K=O.depth_range;N=h.depth_range;U=O.polygonOffset_offset;sa=
h.polygonOffset_offset;L=O.sample_coverage;$b=h.sample_coverage;$a=O.scissor_box;T=h.scissor_box;v=O.stencil_func;ja=h.stencil_func;ea=O.stencil_opBack;Ea=h.stencil_opBack;Oa=O.stencil_opFront;dc=h.stencil_opFront;Ha=O.viewport;aa=h.viewport;ib={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};qa={offset:8,stride:8};return{batch:function(a,b){var c,f,e,n,r,I;c=X.next;c!==X.cur&&(c?q.bindFramebuffer(36160,c.framebuffer):q.bindFramebuffer(36160,
null),X.cur=c);if(h.dirty){var ba,Y,Jc,Ha,F,y,ia,va,R,ha,ra,H,x,da,E,za,la,k,kc,fa,m,Ib,yb,$a,Ka,Cb,td,xd,Tc,qd,Sd,se;ba=O.dither;ba!==h.dither&&(ba?q.enable(3024):q.disable(3024),h.dither=ba);Y=O.depth_func;Y!==h.depth_func&&(q.depthFunc(Y),h.depth_func=Y);Jc=K[0];Ha=K[1];if(Jc!==N[0]||Ha!==N[1])q.depthRange(Jc,Ha),N[0]=Jc,N[1]=Ha;F=O.depth_mask;F!==h.depth_mask&&(q.depthMask(F),h.depth_mask=F);y=Na[0];ia=Na[1];va=Na[2];R=Na[3];if(y!==Z[0]||ia!==Z[1]||va!==Z[2]||R!==Z[3])q.colorMask(y,ia,va,R),Z[0]=
y,Z[1]=ia,Z[2]=va,Z[3]=R;ha=O.cull_enable;ha!==h.cull_enable&&(ha?q.enable(2884):q.disable(2884),h.cull_enable=ha);ra=O.cull_face;ra!==h.cull_face&&(q.cullFace(ra),h.cull_face=ra);H=O.frontFace;H!==h.frontFace&&(q.frontFace(H),h.frontFace=H);x=O.lineWidth;x!==h.lineWidth&&(q.lineWidth(x),h.lineWidth=x);da=O.polygonOffset_enable;da!==h.polygonOffset_enable&&(da?q.enable(32823):q.disable(32823),h.polygonOffset_enable=da);E=U[0];za=U[1];if(E!==sa[0]||za!==sa[1])q.polygonOffset(E,za),sa[0]=E,sa[1]=za;
la=O.sample_alpha;la!==h.sample_alpha&&(la?q.enable(32926):q.disable(32926),h.sample_alpha=la);k=O.sample_enable;k!==h.sample_enable&&(k?q.enable(32928):q.disable(32928),h.sample_enable=k);kc=L[0];fa=L[1];if(kc!==$b[0]||fa!==$b[1])q.sampleCoverage(kc,fa),$b[0]=kc,$b[1]=fa;m=O.stencil_mask;m!==h.stencil_mask&&(q.stencilMask(m),h.stencil_mask=m);Ib=v[0];yb=v[1];$a=v[2];if(Ib!==ja[0]||yb!==ja[1]||$a!==ja[2])q.stencilFunc(Ib,yb,$a),ja[0]=Ib,ja[1]=yb,ja[2]=$a;Ka=Oa[0];Cb=Oa[1];td=Oa[2];xd=Oa[3];if(Ka!==
dc[0]||Cb!==dc[1]||td!==dc[2]||xd!==dc[3])q.stencilOpSeparate(Ka,Cb,td,xd),dc[0]=Ka,dc[1]=Cb,dc[2]=td,dc[3]=xd;Tc=ea[0];qd=ea[1];Sd=ea[2];se=ea[3];if(Tc!==Ea[0]||qd!==Ea[1]||Sd!==Ea[2]||se!==Ea[3])q.stencilOpSeparate(Tc,qd,Sd,se),Ea[0]=Tc,Ea[1]=qd,Ea[2]=Sd,Ea[3]=se}q.blendColor(0,0,0,0);oa[0]=0;oa[1]=0;oa[2]=0;oa[3]=0;q.enable(3042);h.blend_enable=!0;q.blendEquationSeparate(32774,32774);xb[0]=32774;xb[1]=32774;q.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;q.disable(2929);
h.depth_enable=!1;q.enable(3089);h.scissor_enable=!0;q.disable(2960);h.stencil_enable=!1;if(f=h.profile)e=performance.now(),p.count+=b;q.useProgram(u.program);n=V.angle_instanced_arrays;var Jd;d.setVAO(null);Jd=g.instances;for(r=0;r<b;++r){I=a[r];var fd,Xd,Kd,Ze,yf,bf,yd,De,Td,Ud,ie,le,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb;fd=I.viewport;
Xd=fd.x|0;Kd=fd.y|0;Ze="width"in fd?fd.width|0:t.framebufferWidth-Xd;yf="height"in fd?fd.height|0:t.framebufferHeight-Kd;bf=t.viewportWidth;t.viewportWidth=Ze;yd=t.viewportHeight;t.viewportHeight=yf;q.viewport(Xd,Kd,Ze,yf);aa[0]=Xd;aa[1]=Kd;aa[2]=Ze;aa[3]=yf;De=I.viewport;Td=De.x|0;Ud=De.y|0;ie="width"in De?De.width|0:t.framebufferWidth-Td;le="height"in De?De.height|0:t.framebufferHeight-Ud;q.scissor(Td,Ud,ie,le);T[0]=Td;T[1]=Ud;T[2]=ie;T[3]=le;ga.buffer=I.positionBuffer;rd=!1;ld=null;wd=0;pd=!1;
zc=dd=0;sd=1;gd=0;Kc=5126;Eb=jc=ab=sc=0;pa(ga)?(rd=!0,ld=S.createStream(34962,ga),Kc=ld.dtype):(ld=S.getBuffer(ga))?Kc=ld.dtype:"constant"in ga?(sd=2,"number"===typeof ga.constant?(ab=ga.constant,jc=Eb=sc=0):(ab=0<ga.constant.length?ga.constant[0]:0,jc=1<ga.constant.length?ga.constant[1]:0,Eb=2<ga.constant.length?ga.constant[2]:0,sc=3<ga.constant.length?ga.constant[3]:0)):(ld=pa(ga.buffer)?S.createStream(34962,ga.buffer):S.getBuffer(ga.buffer),Kc="type"in ga?ib[ga.type]:ld.dtype,pd=!!ga.normalized,
zc=ga.size|0,dd=ga.offset|0,gd=ga.stride|0,wd=ga.divisor|0);rc=w.location;Ta=W[rc];if(1===sd){Ta.buffer||q.enableVertexAttribArray(rc);Ic=zc||2;if(Ta.type!==Kc||Ta.size!==Ic||Ta.buffer!==ld||Ta.normalized!==pd||Ta.offset!==dd||Ta.stride!==gd)q.bindBuffer(34962,ld.buffer),q.vertexAttribPointer(rc,Ic,Kc,pd,gd,dd),Ta.type=Kc,Ta.size=Ic,Ta.buffer=ld,Ta.normalized=pd,Ta.offset=dd,Ta.stride=gd;Ta.divisor!==wd&&(n.vertexAttribDivisorANGLE(rc,wd),Ta.divisor=wd)}else if(Ta.buffer&&(q.disableVertexAttribArray(rc),
Ta.buffer=null),Ta.x!==ab||Ta.y!==jc||Ta.z!==Eb||Ta.w!==sc)q.vertexAttrib4f(rc,ab,jc,Eb,sc),Ta.x=ab,Ta.y=jc,Ta.z=Eb,Ta.w=sc;qa.buffer=I.positionFractBuffer;ac=!1;Zc=null;Dd=0;md=!1;Vb=Ac=0;Fc=1;Pc=0;La=5126;vd=ta=Wa=sb=0;pa(qa)?(ac=!0,Zc=S.createStream(34962,qa),La=Zc.dtype):(Zc=S.getBuffer(qa))?La=Zc.dtype:"constant"in qa?(Fc=2,"number"===typeof qa.constant?(Wa=qa.constant,ta=vd=sb=0):(Wa=0<qa.constant.length?qa.constant[0]:0,ta=1<qa.constant.length?qa.constant[1]:0,vd=2<qa.constant.length?qa.constant[2]:
0,sb=3<qa.constant.length?qa.constant[3]:0)):(Zc=pa(qa.buffer)?S.createStream(34962,qa.buffer):S.getBuffer(qa.buffer),La="type"in qa?ib[qa.type]:Zc.dtype,md=!!qa.normalized,Vb=qa.size|0,Ac=qa.offset|0,Pc=qa.stride|0,Dd=qa.divisor|0);Ab=C.location;Sa=W[Ab];if(1===Fc){Sa.buffer||q.enableVertexAttribArray(Ab);Hb=Vb||2;if(Sa.type!==La||Sa.size!==Hb||Sa.buffer!==Zc||Sa.normalized!==md||Sa.offset!==Ac||Sa.stride!==Pc)q.bindBuffer(34962,Zc.buffer),q.vertexAttribPointer(Ab,Hb,La,md,Pc,Ac),Sa.type=La,Sa.size=
Hb,Sa.buffer=Zc,Sa.normalized=md,Sa.offset=Ac,Sa.stride=Pc;Sa.divisor!==Dd&&(n.vertexAttribDivisorANGLE(Ab,Dd),Sa.divisor=Dd)}else if(Sa.buffer&&(q.disableVertexAttribArray(Ab),Sa.buffer=null),Sa.x!==Wa||Sa.y!==ta||Sa.z!==vd||Sa.w!==sb)q.vertexAttrib4f(Ab,Wa,ta,vd,sb),Sa.x=Wa,Sa.y=ta,Sa.z=vd,Sa.w=sb;cb=I.fill;Wb=cb[0];ee=cb[1];Rb=cb[2];Sb=cb[3];r&&Qb===Wb&&Zb===ee&&Bd===Rb&&Ma===Sb||(Qb=Wb,Zb=ee,Bd=Rb,Ma=Sb,q.uniform4f(Q.location,Wb,ee,Rb,Sb));nb=I.scale;tb=nb[0];Pa=nb[1];r&&gb===tb&&qc===Pa||(gb=
tb,qc=Pa,q.uniform2f(B.location,tb,Pa));Xb=I.scaleFract;Uc=Xb[0];mc=Xb[1];r&&db===Uc&&Gc===mc||(db=Uc,Gc=mc,q.uniform2f(z.location,Uc,mc));cc=I.translate;jb=cc[0];ua=cc[1];r&&kb===jb&&ob===ua||(kb=jb,ob=ua,q.uniform2f(J.location,jb,ua));wa=I.translateFract;Ua=wa[0];Aa=wa[1];r&&bb===Ua&&eb===Aa||(bb=Ua,eb=Aa,q.uniform2f(P.location,Ua,Aa));Ia=I.id;r&&Bb===Ia||(Bb=Ia,q.uniform1f(G.location,Ia));zb=I.opacity;r&&Ra===zb||(Ra=zb,q.uniform1f(D.location,zb));oc=A.call(this,t,I,r);Jb=null;(Jb=(Za=pa(oc))?
l.createStream(oc):l.getElements(oc))&&q.bindBuffer(34963,Jb.buffer.buffer);if(Tb=Jb?Jb.vertCount:-1)0<Jd?Jb?n.drawElementsInstancedANGLE(4,Tb,Jb.type,0<<(Jb.type-5121>>1),Jd):n.drawArraysInstancedANGLE(4,0,Tb,Jd):0>Jd&&(Jb?q.drawElements(4,Tb,Jb.type,0<<(Jb.type-5121>>1)):q.drawArrays(4,0,Tb)),t.viewportWidth=bf,t.viewportHeight=yd,rd&&S.destroyStream(ld),ac&&S.destroyStream(Zc),Za&&l.destroyStream(Jb)}h.dirty=!0;d.setVAO(null);f&&(p.cpuTime+=performance.now()-e)},draw:function(a){var b,c,f,e,r,
u,A,ma,ba,Y,Ha,F,y,ia,va,R,ha,ra,H,x,da,E;b=X.next;b!==X.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),X.cur=b);if(h.dirty){b=O.dither;b!==h.dither&&(b?q.enable(3024):q.disable(3024),h.dither=b);b=O.depth_func;b!==h.depth_func&&(q.depthFunc(b),h.depth_func=b);b=K[0];u=K[1];if(b!==N[0]||u!==N[1])q.depthRange(b,u),N[0]=b,N[1]=u;b=O.depth_mask;b!==h.depth_mask&&(q.depthMask(b),h.depth_mask=b);b=Na[0];u=Na[1];c=Na[2];f=Na[3];if(b!==Z[0]||u!==Z[1]||c!==Z[2]||f!==Z[3])q.colorMask(b,
u,c,f),Z[0]=b,Z[1]=u,Z[2]=c,Z[3]=f;b=O.cull_enable;b!==h.cull_enable&&(b?q.enable(2884):q.disable(2884),h.cull_enable=b);b=O.cull_face;b!==h.cull_face&&(q.cullFace(b),h.cull_face=b);b=O.frontFace;b!==h.frontFace&&(q.frontFace(b),h.frontFace=b);b=O.lineWidth;b!==h.lineWidth&&(q.lineWidth(b),h.lineWidth=b);b=O.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?q.enable(32823):q.disable(32823),h.polygonOffset_enable=b);b=U[0];u=U[1];if(b!==sa[0]||u!==sa[1])q.polygonOffset(b,u),sa[0]=b,sa[1]=u;b=O.sample_alpha;
b!==h.sample_alpha&&(b?q.enable(32926):q.disable(32926),h.sample_alpha=b);b=O.sample_enable;b!==h.sample_enable&&(b?q.enable(32928):q.disable(32928),h.sample_enable=b);b=L[0];u=L[1];if(b!==$b[0]||u!==$b[1])q.sampleCoverage(b,u),$b[0]=b,$b[1]=u;b=O.stencil_mask;b!==h.stencil_mask&&(q.stencilMask(b),h.stencil_mask=b);b=v[0];u=v[1];c=v[2];if(b!==ja[0]||u!==ja[1]||c!==ja[2])q.stencilFunc(b,u,c),ja[0]=b,ja[1]=u,ja[2]=c;b=Oa[0];u=Oa[1];c=Oa[2];f=Oa[3];if(b!==dc[0]||u!==dc[1]||c!==dc[2]||f!==dc[3])q.stencilOpSeparate(b,
u,c,f),dc[0]=b,dc[1]=u,dc[2]=c,dc[3]=f;b=ea[0];u=ea[1];c=ea[2];f=ea[3];if(b!==Ea[0]||u!==Ea[1]||c!==Ea[2]||f!==Ea[3])q.stencilOpSeparate(b,u,c,f),Ea[0]=b,Ea[1]=u,Ea[2]=c,Ea[3]=f}b=a.viewport;c=b.x|0;f=b.y|0;e="width"in b?b.width|0:t.framebufferWidth-c;r="height"in b?b.height|0:t.framebufferHeight-f;b=t.viewportWidth;t.viewportWidth=e;u=t.viewportHeight;t.viewportHeight=r;q.viewport(c,f,e,r);aa[0]=c;aa[1]=f;aa[2]=e;aa[3]=r;q.blendColor(0,0,0,0);oa[0]=0;oa[1]=0;oa[2]=0;oa[3]=0;q.enable(3042);h.blend_enable=
!0;q.blendEquationSeparate(32774,32774);xb[0]=32774;xb[1]=32774;q.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;q.disable(2929);h.depth_enable=!1;r=a.viewport;c=r.x|0;f=r.y|0;e="width"in r?r.width|0:t.framebufferWidth-c;r="height"in r?r.height|0:t.framebufferHeight-f;q.scissor(c,f,e,r);T[0]=c;T[1]=f;T[2]=e;T[3]=r;q.enable(3089);h.scissor_enable=!0;q.disable(2960);h.stencil_enable=!1;if(c=h.profile)A=performance.now(),p.count++;q.useProgram(n.program);f=V.angle_instanced_arrays;
d.setVAO(null);ga.buffer=a.positionBuffer;e=!1;ma=0;ba=!1;Ha=Y=0;F=1;y=0;ia=5126;ra=ha=R=va=0;pa(ga)?(e=!0,r=S.createStream(34962,ga),ia=r.dtype):(r=S.getBuffer(ga))?ia=r.dtype:"constant"in ga?(F=2,"number"===typeof ga.constant?(R=ga.constant,ha=ra=va=0):(R=0<ga.constant.length?ga.constant[0]:0,ha=1<ga.constant.length?ga.constant[1]:0,ra=2<ga.constant.length?ga.constant[2]:0,va=3<ga.constant.length?ga.constant[3]:0)):(r=pa(ga.buffer)?S.createStream(34962,ga.buffer):S.getBuffer(ga.buffer),ia="type"in
ga?ib[ga.type]:r.dtype,ba=!!ga.normalized,Ha=ga.size|0,Y=ga.offset|0,y=ga.stride|0,ma=ga.divisor|0);H=w.location;x=W[H];if(1===F){x.buffer||q.enableVertexAttribArray(H);Ha=Ha||2;if(x.type!==ia||x.size!==Ha||x.buffer!==r||x.normalized!==ba||x.offset!==Y||x.stride!==y)q.bindBuffer(34962,r.buffer),q.vertexAttribPointer(H,Ha,ia,ba,y,Y),x.type=ia,x.size=Ha,x.buffer=r,x.normalized=ba,x.offset=Y,x.stride=y;x.divisor!==ma&&(f.vertexAttribDivisorANGLE(H,ma),x.divisor=ma)}else if(x.buffer&&(q.disableVertexAttribArray(H),
x.buffer=null),x.x!==R||x.y!==ha||x.z!==ra||x.w!==va)q.vertexAttrib4f(H,R,ha,ra,va),x.x=R,x.y=ha,x.z=ra,x.w=va;qa.buffer=a.positionFractBuffer;ma=!1;Y=0;y=!1;va=ia=0;R=1;H=0;x=5126;E=da=ra=ha=0;pa(qa)?(ma=!0,ba=S.createStream(34962,qa),x=ba.dtype):(ba=S.getBuffer(qa))?x=ba.dtype:"constant"in qa?(R=2,"number"===typeof qa.constant?(ra=qa.constant,da=E=ha=0):(ra=0<qa.constant.length?qa.constant[0]:0,da=1<qa.constant.length?qa.constant[1]:0,E=2<qa.constant.length?qa.constant[2]:0,ha=3<qa.constant.length?
qa.constant[3]:0)):(ba=pa(qa.buffer)?S.createStream(34962,qa.buffer):S.getBuffer(qa.buffer),x="type"in qa?ib[qa.type]:ba.dtype,y=!!qa.normalized,va=qa.size|0,ia=qa.offset|0,H=qa.stride|0,Y=qa.divisor|0);Ha=C.location;F=W[Ha];if(1===R){F.buffer||q.enableVertexAttribArray(Ha);va=va||2;if(F.type!==x||F.size!==va||F.buffer!==ba||F.normalized!==y||F.offset!==ia||F.stride!==H)q.bindBuffer(34962,ba.buffer),q.vertexAttribPointer(Ha,va,x,y,H,ia),F.type=x,F.size=va,F.buffer=ba,F.normalized=y,F.offset=ia,F.stride=
H;F.divisor!==Y&&(f.vertexAttribDivisorANGLE(Ha,Y),F.divisor=Y)}else if(F.buffer&&(q.disableVertexAttribArray(Ha),F.buffer=null),F.x!==ra||F.y!==da||F.z!==E||F.w!==ha)q.vertexAttrib4f(Ha,ra,da,E,ha),F.x=ra,F.y=da,F.z=E,F.w=ha;Y=a.fill;q.uniform4f(Q.location,Y[0],Y[1],Y[2],Y[3]);Y=a.scale;q.uniform2f(B.location,Y[0],Y[1]);Y=a.scaleFract;q.uniform2f(z.location,Y[0],Y[1]);Y=a.translate;q.uniform2f(J.location,Y[0],Y[1]);Y=a.translateFract;q.uniform2f(P.location,Y[0],Y[1]);q.uniform1f(G.location,a.id);
q.uniform1f(D.location,a.opacity);Y=I.call(this,t,a,0);(Y=(a=pa(Y))?l.createStream(Y):l.getElements(Y))&&q.bindBuffer(34963,Y.buffer.buffer);if(y=Y?Y.vertCount:-1)ia=g.instances,0<ia?Y?f.drawElementsInstancedANGLE(4,y,Y.type,0<<(Y.type-5121>>1),ia):f.drawArraysInstancedANGLE(4,0,y,ia):0>ia&&(Y?q.drawElements(4,y,Y.type,0<<(Y.type-5121>>1)):q.drawArrays(4,0,y)),h.dirty=!0,d.setVAO(null),t.viewportWidth=b,t.viewportHeight=u,c&&(p.cpuTime+=performance.now()-A),e&&S.destroyStream(r),ma&&S.destroyStream(ba),
a&&l.destroyStream(Y)},scope:function(d,e,n){var q,u,v,w,z,I,C,B,D,F,y,P,A,G,N,K,H,x,da,E,L,Q,k,T,J,m,W,aa,U,V,X,ma,Z,ea,ja,sa,oa,na,Ea,Oa,Kd,Na,xb,$b,yd,dc,Td,Ud,ie,le,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb;q=d.viewport;u=q.x|0;v=q.y|0;w="width"in q?q.width|0:t.framebufferWidth-u;z="height"in q?q.height|0:t.framebufferHeight-v;I=t.viewportWidth;
t.viewportWidth=w;C=t.viewportHeight;t.viewportHeight=z;B=Ha[0];Ha[0]=u;D=Ha[1];Ha[1]=v;F=Ha[2];Ha[2]=w;y=Ha[3];Ha[3]=z;P=ba[0];ba[0]=0;A=ba[1];ba[1]=0;G=ba[2];ba[2]=0;N=ba[3];ba[3]=0;K=O.blend_enable;O.blend_enable=!0;H=Ka[0];Ka[0]=32774;x=Ka[1];Ka[1]=32774;da=Cb[0];Cb[0]=770;E=Cb[1];Cb[1]=771;L=Cb[2];Cb[2]=773;Q=Cb[3];Cb[3]=1;k=O.depth_enable;O.depth_enable=!1;T=d.viewport;J=T.x|0;m=T.y|0;W="width"in T?T.width|0:t.framebufferWidth-J;aa="height"in T?T.height|0:t.framebufferHeight-m;U=$a[0];$a[0]=
J;V=$a[1];$a[1]=m;X=$a[2];$a[2]=W;ma=$a[3];$a[3]=aa;Z=O.scissor_enable;O.scissor_enable=!0;ea=O.stencil_enable;O.stencil_enable=!1;if(ja=h.profile)sa=performance.now(),p.count++;oa=f.call(this,t,d,n);na=null;na=(Ea=pa(oa))?l.createStream(oa):l.getElements(oa);Oa=g.elements;g.elements=na;Kd=g.offset;g.offset=0;Na=na?na.vertCount:-1;xb=g.count;g.count=Na;$b=g.primitive;g.primitive=4;yd=d.fill;dc=c[14];c[14]=yd;Td=d.id;Ud=c[31];c[31]=Td;ie=d.opacity;le=c[10];c[10]=ie;rd=t.pixelRatio;ld=c[34];c[34]=rd;
wd=d.scale;pd=c[6];c[6]=wd;dd=d.scaleFract;zc=c[7];c[7]=dd;sd=d.translate;gd=c[8];c[8]=sd;Kc=d.translateFract;sc=c[9];c[9]=Kc;ab=b.call(this,t,d,n);jc=c[3];c[3]=ab;ga.buffer=d.positionBuffer;Eb=!1;rc=null;Ta=0;Ic=!1;Zc=ac=0;Dd=1;md=0;Ac=5126;La=Pc=Fc=Vb=0;pa(ga)?(Eb=!0,rc=S.createStream(34962,ga),Ac=rc.dtype):(rc=S.getBuffer(ga))?Ac=rc.dtype:"constant"in ga?(Dd=2,"number"===typeof ga.constant?(Fc=ga.constant,Pc=La=Vb=0):(Fc=0<ga.constant.length?ga.constant[0]:0,Pc=1<ga.constant.length?ga.constant[1]:
0,La=2<ga.constant.length?ga.constant[2]:0,Vb=3<ga.constant.length?ga.constant[3]:0)):(rc=pa(ga.buffer)?S.createStream(34962,ga.buffer):S.getBuffer(ga.buffer),Ac="type"in ga?ib[ga.type]:rc.dtype,Ic=!!ga.normalized,Zc=ga.size|0,ac=ga.offset|0,md=ga.stride|0,Ta=ga.divisor|0);sb=r.buffer;r.buffer=rc;Wa=r.divisor;r.divisor=Ta;ta=r.normalized;r.normalized=Ic;vd=r.offset;r.offset=ac;Ab=r.size;r.size=Zc;Sa=r.state;r.state=Dd;Hb=r.stride;r.stride=md;cb=r.type;r.type=Ac;Wb=r.w;r.w=Vb;Qb=r.x;r.x=Fc;ee=r.y;
r.y=Pc;Zb=r.z;r.z=La;qa.buffer=d.positionFractBuffer;Rb=!1;Bd=null;Sb=0;Ma=!1;tb=nb=0;gb=1;Pa=0;qc=5126;mc=db=Uc=Xb=0;pa(qa)?(Rb=!0,Bd=S.createStream(34962,qa),qc=Bd.dtype):(Bd=S.getBuffer(qa))?qc=Bd.dtype:"constant"in qa?(gb=2,"number"===typeof qa.constant?(Uc=qa.constant,db=mc=Xb=0):(Uc=0<qa.constant.length?qa.constant[0]:0,db=1<qa.constant.length?qa.constant[1]:0,mc=2<qa.constant.length?qa.constant[2]:0,Xb=3<qa.constant.length?qa.constant[3]:0)):(Bd=pa(qa.buffer)?S.createStream(34962,qa.buffer):
S.getBuffer(qa.buffer),qc="type"in qa?ib[qa.type]:Bd.dtype,Ma=!!qa.normalized,tb=qa.size|0,nb=qa.offset|0,Pa=qa.stride|0,Sb=qa.divisor|0);Gc=a.buffer;a.buffer=Bd;cc=a.divisor;a.divisor=Sb;jb=a.normalized;a.normalized=Ma;kb=a.offset;a.offset=nb;ua=a.size;a.size=tb;ob=a.state;a.state=gb;wa=a.stride;a.stride=Pa;Ua=a.type;a.type=qc;bb=a.w;a.w=Xb;Aa=a.x;a.x=Uc;eb=a.y;a.y=db;Ia=a.z;a.z=mc;Bb=Y.vert;Y.vert=42;zb=Y.frag;Y.frag=41;h.dirty=!0;e(t,d,n);t.viewportWidth=I;t.viewportHeight=C;Ha[0]=B;Ha[1]=D;Ha[2]=
F;Ha[3]=y;ba[0]=P;ba[1]=A;ba[2]=G;ba[3]=N;O.blend_enable=K;Ka[0]=H;Ka[1]=x;Cb[0]=da;Cb[1]=E;Cb[2]=L;Cb[3]=Q;O.depth_enable=k;$a[0]=U;$a[1]=V;$a[2]=X;$a[3]=ma;O.scissor_enable=Z;O.stencil_enable=ea;ja&&(p.cpuTime+=performance.now()-sa);Ea&&l.destroyStream(na);g.elements=Oa;g.offset=Kd;g.count=xb;g.primitive=$b;c[14]=dc;c[31]=Ud;c[10]=le;c[34]=ld;c[6]=pd;c[7]=zc;c[8]=gd;c[9]=sc;c[3]=jc;Eb&&S.destroyStream(rc);r.buffer=sb;r.divisor=Wa;r.normalized=ta;r.offset=vd;r.size=Ab;r.state=Sa;r.stride=Hb;r.type=
cb;r.w=Wb;r.x=Qb;r.y=ee;r.z=Zb;Rb&&S.destroyStream(Bd);a.buffer=Gc;a.divisor=cc;a.normalized=jb;a.offset=kb;a.size=ua;a.state=ob;a.stride=wa;a.type=Ua;a.w=bb;a.x=Aa;a.y=eb;a.z=Ia;Y.vert=Bb;Y.frag=zb;h.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,p,n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,Ka,xb,Cb,na,Na,Z,K,
N,U,sa,L,$b,$a,T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa,ec,pc,lc,ud,wc){var ca,M,ka,Ca,Gb,Jc,Wc,F,y,ia,va,R,ha,ra,H,x,da,E,za,la,k,kc,fa,m,Ib,yb,Ue,qe,re,td,xd,ze,qd,Sd,se,Jd,fd,Xd,Kd;ca=e.attributes;M=e.buffer;ka=e.context;Ca=e.current;Gb=e.draw;Jc=e.elements;Wc=e.extensions;F=e.framebuffer;y=e.gl;ia=e.isBufferArgs;va=e.next;R=e.shader;ha=e.uniforms;ra=e.vao;H=va.blend_color;x=Ca.blend_color;da=va.blend_equation;E=Ca.blend_equation;za=va.blend_func;la=Ca.blend_func;k=va.colorMask;kc=Ca.colorMask;fa=va.depth_range;
m=Ca.depth_range;Ib=va.polygonOffset_offset;yb=Ca.polygonOffset_offset;Ue=va.sample_coverage;qe=Ca.sample_coverage;re=va.scissor_box;td=Ca.scissor_box;xd=va.stencil_func;ze=Ca.stencil_func;qd=va.stencil_opBack;Sd=Ca.stencil_opBack;se=va.stencil_opFront;Jd=Ca.stencil_opFront;fd=va.viewport;Xd=Ca.viewport;Kd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,f,e,g,h;c=F.next;c!==F.cur&&(c?y.bindFramebuffer(36160,c.framebuffer):
y.bindFramebuffer(36160,null),F.cur=c);if(Ca.dirty){var l,n,r,q,t,u,w,z,I,C,H,B,D,P,A,G,O,Q,J,W,R,V,X,Y,ha,ma,ba,S,ta,za,pa,Sa,Hb,cb;l=va.dither;l!==Ca.dither&&(l?y.enable(3024):y.disable(3024),Ca.dither=l);n=da[0];r=da[1];if(n!==E[0]||r!==E[1])y.blendEquationSeparate(n,r),E[0]=n,E[1]=r;q=va.depth_func;q!==Ca.depth_func&&(y.depthFunc(q),Ca.depth_func=q);t=fa[0];u=fa[1];if(t!==m[0]||u!==m[1])y.depthRange(t,u),m[0]=t,m[1]=u;w=va.depth_mask;w!==Ca.depth_mask&&(y.depthMask(w),Ca.depth_mask=w);z=k[0];
I=k[1];C=k[2];H=k[3];if(z!==kc[0]||I!==kc[1]||C!==kc[2]||H!==kc[3])y.colorMask(z,I,C,H),kc[0]=z,kc[1]=I,kc[2]=C,kc[3]=H;B=va.cull_enable;B!==Ca.cull_enable&&(B?y.enable(2884):y.disable(2884),Ca.cull_enable=B);D=va.cull_face;D!==Ca.cull_face&&(y.cullFace(D),Ca.cull_face=D);P=va.frontFace;P!==Ca.frontFace&&(y.frontFace(P),Ca.frontFace=P);A=va.lineWidth;A!==Ca.lineWidth&&(y.lineWidth(A),Ca.lineWidth=A);G=va.polygonOffset_enable;G!==Ca.polygonOffset_enable&&(G?y.enable(32823):y.disable(32823),Ca.polygonOffset_enable=
G);O=Ib[0];Q=Ib[1];if(O!==yb[0]||Q!==yb[1])y.polygonOffset(O,Q),yb[0]=O,yb[1]=Q;J=va.sample_alpha;J!==Ca.sample_alpha&&(J?y.enable(32926):y.disable(32926),Ca.sample_alpha=J);W=va.sample_enable;W!==Ca.sample_enable&&(W?y.enable(32928):y.disable(32928),Ca.sample_enable=W);R=Ue[0];V=Ue[1];if(R!==qe[0]||V!==qe[1])y.sampleCoverage(R,V),qe[0]=R,qe[1]=V;X=va.stencil_mask;X!==Ca.stencil_mask&&(y.stencilMask(X),Ca.stencil_mask=X);Y=xd[0];ha=xd[1];ma=xd[2];if(Y!==ze[0]||ha!==ze[1]||ma!==ze[2])y.stencilFunc(Y,
ha,ma),ze[0]=Y,ze[1]=ha,ze[2]=ma;ba=se[0];S=se[1];ta=se[2];za=se[3];if(ba!==Jd[0]||S!==Jd[1]||ta!==Jd[2]||za!==Jd[3])y.stencilOpSeparate(ba,S,ta,za),Jd[0]=ba,Jd[1]=S,Jd[2]=ta,Jd[3]=za;pa=qd[0];Sa=qd[1];Hb=qd[2];cb=qd[3];if(pa!==Sd[0]||Sa!==Sd[1]||Hb!==Sd[2]||cb!==Sd[3])y.stencilOpSeparate(pa,Sa,Hb,cb),Sd[0]=pa,Sd[1]=Sa,Sd[2]=Hb,Sd[3]=cb}y.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;y.enable(3042);Ca.blend_enable=!0;y.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;y.disable(2929);
Ca.depth_enable=!1;y.enable(3089);Ca.scissor_enable=!0;y.disable(2960);Ca.stencil_enable=!1;if(d=Ca.profile)f=performance.now(),p.count+=b;y.useProgram(oa.program);e=Wc.angle_instanced_arrays;var Wb;ra.setVAO(null);y.uniform1i(v.location,!1);y.uniform1i(dc.location,sa.bind());Wb=Gb.instances;for(g=0;g<b;++g){h=a[g];var Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,
Db,rb,vc,vb,Ld,tc,Te,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,fd,me,Yc,re,Ae,Ye,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe,Ne,Ke,pe,Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,Qd,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf,pf,lf,qf,Af,Bf,Me,ye,mf,nf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf,cg,Qf,Rf;Qb=h.viewport;ee=Qb.x|0;Zb=Qb.y|0;Rb="width"in Qb?Qb.width|0:ka.framebufferWidth-
ee;Bd="height"in Qb?Qb.height|0:ka.framebufferHeight-Zb;Sb=ka.viewportWidth;ka.viewportWidth=Rb;Ma=ka.viewportHeight;ka.viewportHeight=Bd;y.viewport(ee,Zb,Rb,Bd);Xd[0]=ee;Xd[1]=Zb;Xd[2]=Rb;Xd[3]=Bd;nb=h.viewport;tb=nb.x|0;gb=nb.y|0;Pa="width"in nb?nb.width|0:ka.framebufferWidth-tb;qc="height"in nb?nb.height|0:ka.framebufferHeight-gb;y.scissor(tb,gb,Pa,qc);td[0]=tb;td[1]=gb;td[2]=Pa;td[3]=qc;Xb=Ka.call(this,ka,h,g);Uc=!1;db=null;mc=0;Gc=!1;jb=cc=0;kb=1;ua=0;ob=5126;Aa=bb=Ua=wa=0;ia(Xb)?(Uc=!0,db=M.createStream(34962,
Xb),ob=db.dtype):(db=M.getBuffer(Xb))?ob=db.dtype:"constant"in Xb?(kb=2,"number"===typeof Xb.constant?(Ua=Xb.constant,bb=Aa=wa=0):(Ua=0<Xb.constant.length?Xb.constant[0]:0,bb=1<Xb.constant.length?Xb.constant[1]:0,Aa=2<Xb.constant.length?Xb.constant[2]:0,wa=3<Xb.constant.length?Xb.constant[3]:0)):(db=ia(Xb.buffer)?M.createStream(34962,Xb.buffer):M.getBuffer(Xb.buffer),ob="type"in Xb?Kd[Xb.type]:db.dtype,Gc=!!Xb.normalized,jb=Xb.size|0,cc=Xb.offset|0,ua=Xb.stride|0,mc=Xb.divisor|0);eb=pc.location;Ia=
ca[eb];if(1===kb){Ia.buffer||y.enableVertexAttribArray(eb);Bb=jb||1;if(Ia.type!==ob||Ia.size!==Bb||Ia.buffer!==db||Ia.normalized!==Gc||Ia.offset!==cc||Ia.stride!==ua)y.bindBuffer(34962,db.buffer),y.vertexAttribPointer(eb,Bb,ob,Gc,ua,cc),Ia.type=ob,Ia.size=Bb,Ia.buffer=db,Ia.normalized=Gc,Ia.offset=cc,Ia.stride=ua;Ia.divisor!==mc&&(e.vertexAttribDivisorANGLE(eb,mc),Ia.divisor=mc)}else if(Ia.buffer&&(y.disableVertexAttribArray(eb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==bb||Ia.z!==Aa||Ia.w!==wa)y.vertexAttrib4f(eb,
Ua,bb,Aa,wa),Ia.x=Ua,Ia.y=bb,Ia.z=Aa,Ia.w=wa;zb=xb.call(this,ka,h,g);Ra=!1;oc=null;Jb=0;Za=!1;xa=Tb=0;ae=1;Ja=0;Nb=5126;fc=ya=hb=fb=0;ia(zb)?(Ra=!0,oc=M.createStream(34962,zb),Nb=oc.dtype):(oc=M.getBuffer(zb))?Nb=oc.dtype:"constant"in zb?(ae=2,"number"===typeof zb.constant?(hb=zb.constant,ya=fc=fb=0):(hb=0<zb.constant.length?zb.constant[0]:0,ya=1<zb.constant.length?zb.constant[1]:0,fc=2<zb.constant.length?zb.constant[2]:0,fb=3<zb.constant.length?zb.constant[3]:0)):(oc=ia(zb.buffer)?M.createStream(34962,
zb.buffer):M.getBuffer(zb.buffer),Nb="type"in zb?Kd[zb.type]:oc.dtype,Za=!!zb.normalized,xa=zb.size|0,Tb=zb.offset|0,Ja=zb.stride|0,Jb=zb.divisor|0);Da=ud.location;pb=ca[Da];if(1===ae){pb.buffer||y.enableVertexAttribArray(Da);qb=xa||1;if(pb.type!==Nb||pb.size!==qb||pb.buffer!==oc||pb.normalized!==Za||pb.offset!==Tb||pb.stride!==Ja)y.bindBuffer(34962,oc.buffer),y.vertexAttribPointer(Da,qb,Nb,Za,Ja,Tb),pb.type=Nb,pb.size=qb,pb.buffer=oc,pb.normalized=Za,pb.offset=Tb,pb.stride=Ja;pb.divisor!==Jb&&(e.vertexAttribDivisorANGLE(Da,
Jb),pb.divisor=Jb)}else if(pb.buffer&&(y.disableVertexAttribArray(Da),pb.buffer=null),pb.x!==hb||pb.y!==ya||pb.z!==fc||pb.w!==fb)y.vertexAttrib4f(Da,hb,ya,fc,fb),pb.x=hb,pb.y=ya,pb.z=fc,pb.w=fb;Xa=Cb.call(this,ka,h,g);Ya=!1;nc=null;ad=0;uc=!1;Lb=Va=0;bd=1;Fa=0;xc=5126;ub=lb=Ba=Qa=0;ia(Xa)?(Ya=!0,nc=M.createStream(34962,Xa),xc=nc.dtype):(nc=M.getBuffer(Xa))?xc=nc.dtype:"constant"in Xa?(bd=2,"number"===typeof Xa.constant?(Ba=Xa.constant,lb=ub=Qa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?
Xa.constant[1]:0,ub=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=ia(Xa.buffer)?M.createStream(34962,Xa.buffer):M.getBuffer(Xa.buffer),xc="type"in Xa?Kd[Xa.type]:nc.dtype,uc=!!Xa.normalized,Lb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,ad=Xa.divisor|0);Db=lc.location;rb=ca[Db];if(1===bd){rb.buffer||y.enableVertexAttribArray(Db);vc=Lb||1;if(rb.type!==xc||rb.size!==vc||rb.buffer!==nc||rb.normalized!==uc||rb.offset!==Va||rb.stride!==Fa)y.bindBuffer(34962,nc.buffer),
y.vertexAttribPointer(Db,vc,xc,uc,Fa,Va),rb.type=xc,rb.size=vc,rb.buffer=nc,rb.normalized=uc,rb.offset=Va,rb.stride=Fa;rb.divisor!==ad&&(e.vertexAttribDivisorANGLE(Db,ad),rb.divisor=ad)}else if(rb.buffer&&(y.disableVertexAttribArray(Db),rb.buffer=null),rb.x!==Ba||rb.y!==lb||rb.z!==ub||rb.w!==Qa)y.vertexAttrib4f(Db,Ba,lb,ub,Qa),rb.x=Ba,rb.y=lb,rb.z=ub,rb.w=Qa;vb=na.call(this,ka,h,g);Ld=!1;tc=null;Te=0;Lc=!1;hd=nd=0;Ub=1;bc=0;Ob=5126;wb=mb=Yb=Ga=0;ia(vb)?(Ld=!0,tc=M.createStream(34962,vb),Ob=tc.dtype):
(tc=M.getBuffer(vb))?Ob=tc.dtype:"constant"in vb?(Ub=2,"number"===typeof vb.constant?(Yb=vb.constant,mb=wb=Ga=0):(Yb=0<vb.constant.length?vb.constant[0]:0,mb=1<vb.constant.length?vb.constant[1]:0,wb=2<vb.constant.length?vb.constant[2]:0,Ga=3<vb.constant.length?vb.constant[3]:0)):(tc=ia(vb.buffer)?M.createStream(34962,vb.buffer):M.getBuffer(vb.buffer),Ob="type"in vb?Kd[vb.type]:tc.dtype,Lc=!!vb.normalized,hd=vb.size|0,nd=vb.offset|0,bc=vb.stride|0,Te=vb.divisor|0);Mb=wc.location;Pb=ca[Mb];if(1===Ub){Pb.buffer||
y.enableVertexAttribArray(Mb);gc=hd||1;if(Pb.type!==Ob||Pb.size!==gc||Pb.buffer!==tc||Pb.normalized!==Lc||Pb.offset!==nd||Pb.stride!==bc)y.bindBuffer(34962,tc.buffer),y.vertexAttribPointer(Mb,gc,Ob,Lc,bc,nd),Pb.type=Ob,Pb.size=gc,Pb.buffer=tc,Pb.normalized=Lc,Pb.offset=nd,Pb.stride=bc;Pb.divisor!==Te&&(e.vertexAttribDivisorANGLE(Mb,Te),Pb.divisor=Te)}else if(Pb.buffer&&(y.disableVertexAttribArray(Mb),Pb.buffer=null),Pb.x!==Yb||Pb.y!==mb||Pb.z!==wb||Pb.w!==Ga)y.vertexAttrib4f(Mb,Yb,mb,wb,Ga),Pb.x=
Yb,Pb.y=mb,Pb.z=wb,Pb.w=Ga;ic=Na.call(this,ka,h,g);Qc=!1;Bc=null;Cc=0;Dc=!1;cd=Mc=0;Rc=1;Nc=0;Kb=5126;Sc=Hc=Oc=Fb=0;ia(ic)?(Qc=!0,Bc=M.createStream(34962,ic),Kb=Bc.dtype):(Bc=M.getBuffer(ic))?Kb=Bc.dtype:"constant"in ic?(Rc=2,"number"===typeof ic.constant?(Oc=ic.constant,Hc=Sc=Fb=0):(Oc=0<ic.constant.length?ic.constant[0]:0,Hc=1<ic.constant.length?ic.constant[1]:0,Sc=2<ic.constant.length?ic.constant[2]:0,Fb=3<ic.constant.length?ic.constant[3]:0)):(Bc=ia(ic.buffer)?M.createStream(34962,ic.buffer):
M.getBuffer(ic.buffer),Kb="type"in ic?Kd[ic.type]:Bc.dtype,Dc=!!ic.normalized,cd=ic.size|0,Mc=ic.offset|0,Nc=ic.stride|0,Cc=ic.divisor|0);hc=ga.location;Xc=ca[hc];if(1===Rc){Xc.buffer||y.enableVertexAttribArray(hc);id=cd||1;if(Xc.type!==Kb||Xc.size!==id||Xc.buffer!==Bc||Xc.normalized!==Dc||Xc.offset!==Mc||Xc.stride!==Nc)y.bindBuffer(34962,Bc.buffer),y.vertexAttribPointer(hc,id,Kb,Dc,Nc,Mc),Xc.type=Kb,Xc.size=id,Xc.buffer=Bc,Xc.normalized=Dc,Xc.offset=Mc,Xc.stride=Nc;Xc.divisor!==Cc&&(e.vertexAttribDivisorANGLE(hc,
Cc),Xc.divisor=Cc)}else if(Xc.buffer&&(y.disableVertexAttribArray(hc),Xc.buffer=null),Xc.x!==Oc||Xc.y!==Hc||Xc.z!==Sc||Xc.w!==Fb)y.vertexAttrib4f(hc,Oc,Hc,Sc,Fb),Xc.x=Oc,Xc.y=Hc,Xc.z=Sc,Xc.w=Fb;fd=Z.call(this,ka,h,g);me=!1;Yc=null;re=0;Ae=!1;ve=Ye=0;be=1;Gd=0;Ed=5126;jd=od=Ec=ed=0;ia(fd)?(me=!0,Yc=M.createStream(34962,fd),Ed=Yc.dtype):(Yc=M.getBuffer(fd))?Ed=Yc.dtype:"constant"in fd?(be=2,"number"===typeof fd.constant?(Ec=fd.constant,od=jd=ed=0):(Ec=0<fd.constant.length?fd.constant[0]:0,od=1<fd.constant.length?
fd.constant[1]:0,jd=2<fd.constant.length?fd.constant[2]:0,ed=3<fd.constant.length?fd.constant[3]:0)):(Yc=ia(fd.buffer)?M.createStream(34962,fd.buffer):M.getBuffer(fd.buffer),Ed="type"in fd?Kd[fd.type]:Yc.dtype,Ae=!!fd.normalized,ve=fd.size|0,Ye=fd.offset|0,Gd=fd.stride|0,re=fd.divisor|0);$c=$a.location;kd=ca[$c];if(1===be){kd.buffer||y.enableVertexAttribArray($c);Ad=ve||1;if(kd.type!==Ed||kd.size!==Ad||kd.buffer!==Yc||kd.normalized!==Ae||kd.offset!==Ye||kd.stride!==Gd)y.bindBuffer(34962,Yc.buffer),
y.vertexAttribPointer($c,Ad,Ed,Ae,Gd,Ye),kd.type=Ed,kd.size=Ad,kd.buffer=Yc,kd.normalized=Ae,kd.offset=Ye,kd.stride=Gd;kd.divisor!==re&&(e.vertexAttribDivisorANGLE($c,re),kd.divisor=re)}else if(kd.buffer&&(y.disableVertexAttribArray($c),kd.buffer=null),kd.x!==Ec||kd.y!==od||kd.z!==jd||kd.w!==ed)y.vertexAttrib4f($c,Ec,od,jd,ed),kd.x=Ec,kd.y=od,kd.z=jd,kd.w=ed;Cd=K.call(this,ka,h,g);te=!1;je=null;ue=0;de=!1;$d=ce=0;ne=1;Yd=0;fe=5126;he=oe=Vc=yc=0;ia(Cd)?(te=!0,je=M.createStream(34962,Cd),fe=je.dtype):
(je=M.getBuffer(Cd))?fe=je.dtype:"constant"in Cd?(ne=2,"number"===typeof Cd.constant?(Vc=Cd.constant,oe=he=yc=0):(Vc=0<Cd.constant.length?Cd.constant[0]:0,oe=1<Cd.constant.length?Cd.constant[1]:0,he=2<Cd.constant.length?Cd.constant[2]:0,yc=3<Cd.constant.length?Cd.constant[3]:0)):(je=ia(Cd.buffer)?M.createStream(34962,Cd.buffer):M.getBuffer(Cd.buffer),fe="type"in Cd?Kd[Cd.type]:je.dtype,de=!!Cd.normalized,$d=Cd.size|0,ce=Cd.offset|0,Yd=Cd.stride|0,ue=Cd.divisor|0);Fd=T.location;Id=ca[Fd];if(1===ne){Id.buffer||
y.enableVertexAttribArray(Fd);Md=$d||4;if(Id.type!==fe||Id.size!==Md||Id.buffer!==je||Id.normalized!==de||Id.offset!==ce||Id.stride!==Yd)y.bindBuffer(34962,je.buffer),y.vertexAttribPointer(Fd,Md,fe,de,Yd,ce),Id.type=fe,Id.size=Md,Id.buffer=je,Id.normalized=de,Id.offset=ce,Id.stride=Yd;Id.divisor!==ue&&(e.vertexAttribDivisorANGLE(Fd,ue),Id.divisor=ue)}else if(Id.buffer&&(y.disableVertexAttribArray(Fd),Id.buffer=null),Id.x!==Vc||Id.y!==oe||Id.z!==he||Id.w!==yc)y.vertexAttrib4f(Fd,Vc,oe,he,yc),Id.x=
Vc,Id.y=oe,Id.z=he,Id.w=yc;Nd=N.call(this,ka,h,g);ge=!1;Ee=null;we=0;ke=!1;Ne=Xe=0;Ke=1;pe=0;Be=5126;Ce=He=Ge=Fe=0;ia(Nd)?(ge=!0,Ee=M.createStream(34962,Nd),Be=Ee.dtype):(Ee=M.getBuffer(Nd))?Be=Ee.dtype:"constant"in Nd?(Ke=2,"number"===typeof Nd.constant?(Ge=Nd.constant,He=Ce=Fe=0):(Ge=0<Nd.constant.length?Nd.constant[0]:0,He=1<Nd.constant.length?Nd.constant[1]:0,Ce=2<Nd.constant.length?Nd.constant[2]:0,Fe=3<Nd.constant.length?Nd.constant[3]:0)):(Ee=ia(Nd.buffer)?M.createStream(34962,Nd.buffer):M.getBuffer(Nd.buffer),
Be="type"in Nd?Kd[Nd.type]:Ee.dtype,ke=!!Nd.normalized,Ne=Nd.size|0,Xe=Nd.offset|0,pe=Nd.stride|0,we=Nd.divisor|0);Hd=$b.location;Rd=ca[Hd];if(1===Ke){Rd.buffer||y.enableVertexAttribArray(Hd);Wd=Ne||4;if(Rd.type!==Be||Rd.size!==Wd||Rd.buffer!==Ee||Rd.normalized!==ke||Rd.offset!==Xe||Rd.stride!==pe)y.bindBuffer(34962,Ee.buffer),y.vertexAttribPointer(Hd,Wd,Be,ke,pe,Xe),Rd.type=Be,Rd.size=Wd,Rd.buffer=Ee,Rd.normalized=ke,Rd.offset=Xe,Rd.stride=pe;Rd.divisor!==we&&(e.vertexAttribDivisorANGLE(Hd,we),Rd.divisor=
we)}else if(Rd.buffer&&(y.disableVertexAttribArray(Hd),Rd.buffer=null),Rd.x!==Ge||Rd.y!==He||Rd.z!==Ce||Rd.w!==Fe)y.vertexAttrib4f(Hd,Ge,He,Ce,Fe),Rd.x=Ge,Rd.y=He,Rd.z=Ce,Rd.w=Fe;Zd=U.call(this,ka,h,g);Ie=!1;zd=null;Od=0;xe=!1;Qd=Je=0;We=1;Oe=0;Le=5126;Qe=Pe=Se=Ve=0;ia(Zd)?(Ie=!0,zd=M.createStream(34962,Zd),Le=zd.dtype):(zd=M.getBuffer(Zd))?Le=zd.dtype:"constant"in Zd?(We=2,"number"===typeof Zd.constant?(Se=Zd.constant,Pe=Qe=Ve=0):(Se=0<Zd.constant.length?Zd.constant[0]:0,Pe=1<Zd.constant.length?
Zd.constant[1]:0,Qe=2<Zd.constant.length?Zd.constant[2]:0,Ve=3<Zd.constant.length?Zd.constant[3]:0)):(zd=ia(Zd.buffer)?M.createStream(34962,Zd.buffer):M.getBuffer(Zd.buffer),Le="type"in Zd?Kd[Zd.type]:zd.dtype,xe=!!Zd.normalized,Qd=Zd.size|0,Je=Zd.offset|0,Oe=Zd.stride|0,Od=Zd.divisor|0);Pd=ja.location;Vd=ca[Pd];if(1===We){Vd.buffer||y.enableVertexAttribArray(Pd);Re=Qd||1;if(Vd.type!==Le||Vd.size!==Re||Vd.buffer!==zd||Vd.normalized!==xe||Vd.offset!==Je||Vd.stride!==Oe)y.bindBuffer(34962,zd.buffer),
y.vertexAttribPointer(Pd,Re,Le,xe,Oe,Je),Vd.type=Le,Vd.size=Re,Vd.buffer=zd,Vd.normalized=xe,Vd.offset=Je,Vd.stride=Oe;Vd.divisor!==Od&&(e.vertexAttribDivisorANGLE(Pd,Od),Vd.divisor=Od)}else if(Vd.buffer&&(y.disableVertexAttribArray(Pd),Vd.buffer=null),Vd.x!==Se||Vd.y!==Pe||Vd.z!==Qe||Vd.w!==Ve)y.vertexAttrib4f(Pd,Se,Pe,Qe,Ve),Vd.x=Se,Vd.y=Pe,Vd.z=Qe,Vd.w=Ve;ff=ka.pixelRatio;g&&kf===ff||(kf=ff,y.uniform1f(Ha.location,ff));cf=h.scale;gf=cf[0];jf=cf[1];g&&hf===gf&&pf===jf||(hf=gf,pf=jf,y.uniform2f(aa.location,
gf,jf));lf=h.scaleFract;qf=lf[0];Bf=lf[1];g&&Af===qf&&Me===Bf||(Af=qf,Me=Bf,y.uniform2f(ib.location,qf,Bf));ye=h.translate;mf=ye[0];Cf=ye[1];g&&nf===mf&&Ff===Cf||(nf=mf,Ff=Cf,y.uniform2f(qa.location,mf,Cf));zf=h.translateFract;Df=zf[0];uf=zf[1];g&&Ef===Df&&vf===uf||(Ef=Df,vf=uf,y.uniform2f(ec.location,Df,uf));tf=L.call(this,ka,h,g);wf=tf[0];Hf=tf[1];g&&xf===wf&&If===Hf||(xf=wf,If=Hf,y.uniform2f(Oa.location,wf,Hf));Jf=h.opacity;g&&Kf===Jf||(Kf=Jf,y.uniform1f(Ea.location,Jf));(rf=h.markerTexture)&&
"framebuffer"===rf._reglType&&(rf=rf.color[0]);Pf=rf._texture;y.uniform1i(ea.location,Pf.bind());Gf=h.elements;sf=null;(sf=(cg=ia(Gf))?Jc.createStream(Gf):Jc.getElements(Gf))&&y.bindBuffer(34963,sf.buffer.buffer);Qf=h.offset;if(Rf=h.count)0<Wb?sf?e.drawElementsInstancedANGLE(0,Rf,sf.type,Qf<<(sf.type-5121>>1),Wb):e.drawArraysInstancedANGLE(0,Qf,Rf,Wb):0>Wb&&(sf?y.drawElements(0,Rf,sf.type,Qf<<(sf.type-5121>>1)):y.drawArrays(0,Qf,Rf)),ka.viewportWidth=Sb,ka.viewportHeight=Ma,Uc&&M.destroyStream(db),
Ra&&M.destroyStream(oc),Ya&&M.destroyStream(nc),Ld&&M.destroyStream(tc),Qc&&M.destroyStream(Bc),me&&M.destroyStream(Yc),te&&M.destroyStream(je),ge&&M.destroyStream(Ee),Ie&&M.destroyStream(zd),Pf.unbind(),cg&&Jc.destroyStream(sf)}sa.unbind();Ca.dirty=!0;ra.setVAO(null);d&&(p.cpuTime+=performance.now()-f)},draw:function(c){var d,g,e,h,l,q,t,z,C,H,B,P,N,O,K,L,J,W,R,V,U,X,Y,ha,ba,Z,S,za,pa,sa,na,oa,La,sb,Wa,ta,Na,Ab,Sa,Hb,cb,Wb,Qb,Ka,Zb,Rb,xb,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,
Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,Cb,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,fd,tc,Tc,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,re,me,Yc,Qd,Ae,Ye,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe,Ne,Ke,pe;d=F.next;d!==F.cur&&(d?y.bindFramebuffer(36160,d.framebuffer):y.bindFramebuffer(36160,null),F.cur=d);if(Ca.dirty){var Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,
Je,of,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf,pf,lf,qf;Be=va.dither;Be!==Ca.dither&&(Be?y.enable(3024):y.disable(3024),Ca.dither=Be);Fe=da[0];Ge=da[1];if(Fe!==E[0]||Ge!==E[1])y.blendEquationSeparate(Fe,Ge),E[0]=Fe,E[1]=Ge;He=va.depth_func;He!==Ca.depth_func&&(y.depthFunc(He),Ca.depth_func=He);Ce=fa[0];Hd=fa[1];if(Ce!==m[0]||Hd!==m[1])y.depthRange(Ce,Hd),m[0]=Ce,m[1]=Hd;Rd=va.depth_mask;Rd!==Ca.depth_mask&&(y.depthMask(Rd),Ca.depth_mask=Rd);Wd=k[0];Zd=k[1];Ie=k[2];zd=k[3];if(Wd!==kc[0]||Zd!==
kc[1]||Ie!==kc[2]||zd!==kc[3])y.colorMask(Wd,Zd,Ie,zd),kc[0]=Wd,kc[1]=Zd,kc[2]=Ie,kc[3]=zd;Od=va.cull_enable;Od!==Ca.cull_enable&&(Od?y.enable(2884):y.disable(2884),Ca.cull_enable=Od);xe=va.cull_face;xe!==Ca.cull_face&&(y.cullFace(xe),Ca.cull_face=xe);Je=va.frontFace;Je!==Ca.frontFace&&(y.frontFace(Je),Ca.frontFace=Je);of=va.lineWidth;of!==Ca.lineWidth&&(y.lineWidth(of),Ca.lineWidth=of);We=va.polygonOffset_enable;We!==Ca.polygonOffset_enable&&(We?y.enable(32823):y.disable(32823),Ca.polygonOffset_enable=
We);Oe=Ib[0];Le=Ib[1];if(Oe!==yb[0]||Le!==yb[1])y.polygonOffset(Oe,Le),yb[0]=Oe,yb[1]=Le;Ve=va.sample_alpha;Ve!==Ca.sample_alpha&&(Ve?y.enable(32926):y.disable(32926),Ca.sample_alpha=Ve);Se=va.sample_enable;Se!==Ca.sample_enable&&(Se?y.enable(32928):y.disable(32928),Ca.sample_enable=Se);Pe=Ue[0];Qe=Ue[1];if(Pe!==qe[0]||Qe!==qe[1])y.sampleCoverage(Pe,Qe),qe[0]=Pe,qe[1]=Qe;Pd=va.stencil_mask;Pd!==Ca.stencil_mask&&(y.stencilMask(Pd),Ca.stencil_mask=Pd);Vd=xd[0];Re=xd[1];ff=xd[2];if(Vd!==ze[0]||Re!==
ze[1]||ff!==ze[2])y.stencilFunc(Vd,Re,ff),ze[0]=Vd,ze[1]=Re,ze[2]=ff;kf=se[0];cf=se[1];gf=se[2];hf=se[3];if(kf!==Jd[0]||cf!==Jd[1]||gf!==Jd[2]||hf!==Jd[3])y.stencilOpSeparate(kf,cf,gf,hf),Jd[0]=kf,Jd[1]=cf,Jd[2]=gf,Jd[3]=hf;jf=qd[0];pf=qd[1];lf=qd[2];qf=qd[3];if(jf!==Sd[0]||pf!==Sd[1]||lf!==Sd[2]||qf!==Sd[3])y.stencilOpSeparate(jf,pf,lf,qf),Sd[0]=jf,Sd[1]=pf,Sd[2]=lf,Sd[3]=qf}g=c.viewport;e=g.x|0;h=g.y|0;l="width"in g?g.width|0:ka.framebufferWidth-e;q="height"in g?g.height|0:ka.framebufferHeight-
h;t=ka.viewportWidth;ka.viewportWidth=l;z=ka.viewportHeight;ka.viewportHeight=q;y.viewport(e,h,l,q);Xd[0]=e;Xd[1]=h;Xd[2]=l;Xd[3]=q;y.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;y.enable(3042);Ca.blend_enable=!0;y.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;y.disable(2929);Ca.depth_enable=!1;C=c.viewport;H=C.x|0;B=C.y|0;P="width"in C?C.width|0:ka.framebufferWidth-H;N="height"in C?C.height|0:ka.framebufferHeight-B;y.scissor(H,B,P,N);td[0]=H;td[1]=B;td[2]=P;td[3]=N;y.enable(3089);
Ca.scissor_enable=!0;y.disable(2960);Ca.stencil_enable=!1;if(O=Ca.profile)K=performance.now(),p.count++;y.useProgram(n.program);L=Wc.angle_instanced_arrays;ra.setVAO(null);J=I.call(this,ka,c,0);W=!1;R=null;V=0;U=!1;Y=X=0;ha=1;ba=0;Z=5126;sa=pa=za=S=0;ia(J)?(W=!0,R=M.createStream(34962,J),Z=R.dtype):(R=M.getBuffer(J))?Z=R.dtype:"constant"in J?(ha=2,"number"===typeof J.constant?(za=J.constant,pa=sa=S=0):(za=0<J.constant.length?J.constant[0]:0,pa=1<J.constant.length?J.constant[1]:0,sa=2<J.constant.length?
J.constant[2]:0,S=3<J.constant.length?J.constant[3]:0)):(R=ia(J.buffer)?M.createStream(34962,J.buffer):M.getBuffer(J.buffer),Z="type"in J?Kd[J.type]:R.dtype,U=!!J.normalized,Y=J.size|0,X=J.offset|0,ba=J.stride|0,V=J.divisor|0);na=pc.location;oa=ca[na];if(1===ha){oa.buffer||y.enableVertexAttribArray(na);La=Y||1;if(oa.type!==Z||oa.size!==La||oa.buffer!==R||oa.normalized!==U||oa.offset!==X||oa.stride!==ba)y.bindBuffer(34962,R.buffer),y.vertexAttribPointer(na,La,Z,U,ba,X),oa.type=Z,oa.size=La,oa.buffer=
R,oa.normalized=U,oa.offset=X,oa.stride=ba;oa.divisor!==V&&(L.vertexAttribDivisorANGLE(na,V),oa.divisor=V)}else if(oa.buffer&&(y.disableVertexAttribArray(na),oa.buffer=null),oa.x!==za||oa.y!==pa||oa.z!==sa||oa.w!==S)y.vertexAttrib4f(na,za,pa,sa,S),oa.x=za,oa.y=pa,oa.z=sa,oa.w=S;sb=f.call(this,ka,c,0);Wa=!1;ta=null;Na=0;Ab=!1;Hb=Sa=0;cb=1;Wb=0;Qb=5126;xb=Rb=Zb=Ka=0;ia(sb)?(Wa=!0,ta=M.createStream(34962,sb),Qb=ta.dtype):(ta=M.getBuffer(sb))?Qb=ta.dtype:"constant"in sb?(cb=2,"number"===typeof sb.constant?
(Zb=sb.constant,Rb=xb=Ka=0):(Zb=0<sb.constant.length?sb.constant[0]:0,Rb=1<sb.constant.length?sb.constant[1]:0,xb=2<sb.constant.length?sb.constant[2]:0,Ka=3<sb.constant.length?sb.constant[3]:0)):(ta=ia(sb.buffer)?M.createStream(34962,sb.buffer):M.getBuffer(sb.buffer),Qb="type"in sb?Kd[sb.type]:ta.dtype,Ab=!!sb.normalized,Hb=sb.size|0,Sa=sb.offset|0,Wb=sb.stride|0,Na=sb.divisor|0);Sb=ud.location;Ma=ca[Sb];if(1===cb){Ma.buffer||y.enableVertexAttribArray(Sb);nb=Hb||1;if(Ma.type!==Qb||Ma.size!==nb||Ma.buffer!==
ta||Ma.normalized!==Ab||Ma.offset!==Sa||Ma.stride!==Wb)y.bindBuffer(34962,ta.buffer),y.vertexAttribPointer(Sb,nb,Qb,Ab,Wb,Sa),Ma.type=Qb,Ma.size=nb,Ma.buffer=ta,Ma.normalized=Ab,Ma.offset=Sa,Ma.stride=Wb;Ma.divisor!==Na&&(L.vertexAttribDivisorANGLE(Sb,Na),Ma.divisor=Na)}else if(Ma.buffer&&(y.disableVertexAttribArray(Sb),Ma.buffer=null),Ma.x!==Zb||Ma.y!==Rb||Ma.z!==xb||Ma.w!==Ka)y.vertexAttrib4f(Sb,Zb,Rb,xb,Ka),Ma.x=Zb,Ma.y=Rb,Ma.z=xb,Ma.w=Ka;tb=b.call(this,ka,c,0);gb=!1;Pa=null;qc=0;Xb=!1;db=Uc=0;
mc=1;Gc=0;cc=5126;ob=ua=kb=jb=0;ia(tb)?(gb=!0,Pa=M.createStream(34962,tb),cc=Pa.dtype):(Pa=M.getBuffer(tb))?cc=Pa.dtype:"constant"in tb?(mc=2,"number"===typeof tb.constant?(kb=tb.constant,ua=ob=jb=0):(kb=0<tb.constant.length?tb.constant[0]:0,ua=1<tb.constant.length?tb.constant[1]:0,ob=2<tb.constant.length?tb.constant[2]:0,jb=3<tb.constant.length?tb.constant[3]:0)):(Pa=ia(tb.buffer)?M.createStream(34962,tb.buffer):M.getBuffer(tb.buffer),cc="type"in tb?Kd[tb.type]:Pa.dtype,Xb=!!tb.normalized,db=tb.size|
0,Uc=tb.offset|0,Gc=tb.stride|0,qc=tb.divisor|0);wa=lc.location;Ua=ca[wa];if(1===mc){Ua.buffer||y.enableVertexAttribArray(wa);bb=db||1;if(Ua.type!==cc||Ua.size!==bb||Ua.buffer!==Pa||Ua.normalized!==Xb||Ua.offset!==Uc||Ua.stride!==Gc)y.bindBuffer(34962,Pa.buffer),y.vertexAttribPointer(wa,bb,cc,Xb,Gc,Uc),Ua.type=cc,Ua.size=bb,Ua.buffer=Pa,Ua.normalized=Xb,Ua.offset=Uc,Ua.stride=Gc;Ua.divisor!==qc&&(L.vertexAttribDivisorANGLE(wa,qc),Ua.divisor=qc)}else if(Ua.buffer&&(y.disableVertexAttribArray(wa),Ua.buffer=
null),Ua.x!==kb||Ua.y!==ua||Ua.z!==ob||Ua.w!==jb)y.vertexAttrib4f(wa,kb,ua,ob,jb),Ua.x=kb,Ua.y=ua,Ua.z=ob,Ua.w=jb;Aa=r.call(this,ka,c,0);eb=!1;Ia=null;Bb=0;zb=!1;oc=Ra=0;Jb=1;Za=0;Tb=5126;Nb=Ja=Cb=xa=0;ia(Aa)?(eb=!0,Ia=M.createStream(34962,Aa),Tb=Ia.dtype):(Ia=M.getBuffer(Aa))?Tb=Ia.dtype:"constant"in Aa?(Jb=2,"number"===typeof Aa.constant?(Cb=Aa.constant,Ja=Nb=xa=0):(Cb=0<Aa.constant.length?Aa.constant[0]:0,Ja=1<Aa.constant.length?Aa.constant[1]:0,Nb=2<Aa.constant.length?Aa.constant[2]:0,xa=3<Aa.constant.length?
Aa.constant[3]:0)):(Ia=ia(Aa.buffer)?M.createStream(34962,Aa.buffer):M.getBuffer(Aa.buffer),Tb="type"in Aa?Kd[Aa.type]:Ia.dtype,zb=!!Aa.normalized,oc=Aa.size|0,Ra=Aa.offset|0,Za=Aa.stride|0,Bb=Aa.divisor|0);fb=wc.location;hb=ca[fb];if(1===Jb){hb.buffer||y.enableVertexAttribArray(fb);ya=oc||1;if(hb.type!==Tb||hb.size!==ya||hb.buffer!==Ia||hb.normalized!==zb||hb.offset!==Ra||hb.stride!==Za)y.bindBuffer(34962,Ia.buffer),y.vertexAttribPointer(fb,ya,Tb,zb,Za,Ra),hb.type=Tb,hb.size=ya,hb.buffer=Ia,hb.normalized=
zb,hb.offset=Ra,hb.stride=Za;hb.divisor!==Bb&&(L.vertexAttribDivisorANGLE(fb,Bb),hb.divisor=Bb)}else if(hb.buffer&&(y.disableVertexAttribArray(fb),hb.buffer=null),hb.x!==Cb||hb.y!==Ja||hb.z!==Nb||hb.w!==xa)y.vertexAttrib4f(fb,Cb,Ja,Nb,xa),hb.x=Cb,hb.y=Ja,hb.z=Nb,hb.w=xa;fc=a.call(this,ka,c,0);Da=!1;pb=null;qb=0;Xa=!1;nc=Ya=0;ad=1;uc=0;Va=5126;xc=Fa=bd=Lb=0;ia(fc)?(Da=!0,pb=M.createStream(34962,fc),Va=pb.dtype):(pb=M.getBuffer(fc))?Va=pb.dtype:"constant"in fc?(ad=2,"number"===typeof fc.constant?(bd=
fc.constant,Fa=xc=Lb=0):(bd=0<fc.constant.length?fc.constant[0]:0,Fa=1<fc.constant.length?fc.constant[1]:0,xc=2<fc.constant.length?fc.constant[2]:0,Lb=3<fc.constant.length?fc.constant[3]:0)):(pb=ia(fc.buffer)?M.createStream(34962,fc.buffer):M.getBuffer(fc.buffer),Va="type"in fc?Kd[fc.type]:pb.dtype,Xa=!!fc.normalized,nc=fc.size|0,Ya=fc.offset|0,uc=fc.stride|0,qb=fc.divisor|0);Qa=ga.location;Ba=ca[Qa];if(1===ad){Ba.buffer||y.enableVertexAttribArray(Qa);lb=nc||1;if(Ba.type!==Va||Ba.size!==lb||Ba.buffer!==
pb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==uc)y.bindBuffer(34962,pb.buffer),y.vertexAttribPointer(Qa,lb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=lb,Ba.buffer=pb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==qb&&(L.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(y.disableVertexAttribArray(Qa),Ba.buffer=null),Ba.x!==bd||Ba.y!==Fa||Ba.z!==xc||Ba.w!==Lb)y.vertexAttrib4f(Qa,bd,Fa,xc,Lb),Ba.x=bd,Ba.y=Fa,Ba.z=xc,Ba.w=Lb;ub=u.call(this,ka,c,0);Db=!1;rb=null;vc=0;vb=!1;tc=fd=0;
Tc=1;Lc=0;nd=5126;Ob=bc=Ub=hd=0;ia(ub)?(Db=!0,rb=M.createStream(34962,ub),nd=rb.dtype):(rb=M.getBuffer(ub))?nd=rb.dtype:"constant"in ub?(Tc=2,"number"===typeof ub.constant?(Ub=ub.constant,bc=Ob=hd=0):(Ub=0<ub.constant.length?ub.constant[0]:0,bc=1<ub.constant.length?ub.constant[1]:0,Ob=2<ub.constant.length?ub.constant[2]:0,hd=3<ub.constant.length?ub.constant[3]:0)):(rb=ia(ub.buffer)?M.createStream(34962,ub.buffer):M.getBuffer(ub.buffer),nd="type"in ub?Kd[ub.type]:rb.dtype,vb=!!ub.normalized,tc=ub.size|
0,fd=ub.offset|0,Lc=ub.stride|0,vc=ub.divisor|0);Ga=$a.location;Yb=ca[Ga];if(1===Tc){Yb.buffer||y.enableVertexAttribArray(Ga);mb=tc||1;if(Yb.type!==nd||Yb.size!==mb||Yb.buffer!==rb||Yb.normalized!==vb||Yb.offset!==fd||Yb.stride!==Lc)y.bindBuffer(34962,rb.buffer),y.vertexAttribPointer(Ga,mb,nd,vb,Lc,fd),Yb.type=nd,Yb.size=mb,Yb.buffer=rb,Yb.normalized=vb,Yb.offset=fd,Yb.stride=Lc;Yb.divisor!==vc&&(L.vertexAttribDivisorANGLE(Ga,vc),Yb.divisor=vc)}else if(Yb.buffer&&(y.disableVertexAttribArray(Ga),Yb.buffer=
null),Yb.x!==Ub||Yb.y!==bc||Yb.z!==Ob||Yb.w!==hd)y.vertexAttrib4f(Ga,Ub,bc,Ob,hd),Yb.x=Ub,Yb.y=bc,Yb.z=Ob,Yb.w=hd;wb=A.call(this,ka,c,0);Mb=!1;Pb=null;gc=0;ic=!1;Bc=Qc=0;Cc=1;Dc=0;Mc=5126;Kb=Nc=Rc=cd=0;ia(wb)?(Mb=!0,Pb=M.createStream(34962,wb),Mc=Pb.dtype):(Pb=M.getBuffer(wb))?Mc=Pb.dtype:"constant"in wb?(Cc=2,"number"===typeof wb.constant?(Rc=wb.constant,Nc=Kb=cd=0):(Rc=0<wb.constant.length?wb.constant[0]:0,Nc=1<wb.constant.length?wb.constant[1]:0,Kb=2<wb.constant.length?wb.constant[2]:0,cd=3<wb.constant.length?
wb.constant[3]:0)):(Pb=ia(wb.buffer)?M.createStream(34962,wb.buffer):M.getBuffer(wb.buffer),Mc="type"in wb?Kd[wb.type]:Pb.dtype,ic=!!wb.normalized,Bc=wb.size|0,Qc=wb.offset|0,Dc=wb.stride|0,gc=wb.divisor|0);Fb=T.location;Oc=ca[Fb];if(1===Cc){Oc.buffer||y.enableVertexAttribArray(Fb);Hc=Bc||4;if(Oc.type!==Mc||Oc.size!==Hc||Oc.buffer!==Pb||Oc.normalized!==ic||Oc.offset!==Qc||Oc.stride!==Dc)y.bindBuffer(34962,Pb.buffer),y.vertexAttribPointer(Fb,Hc,Mc,ic,Dc,Qc),Oc.type=Mc,Oc.size=Hc,Oc.buffer=Pb,Oc.normalized=
ic,Oc.offset=Qc,Oc.stride=Dc;Oc.divisor!==gc&&(L.vertexAttribDivisorANGLE(Fb,gc),Oc.divisor=gc)}else if(Oc.buffer&&(y.disableVertexAttribArray(Fb),Oc.buffer=null),Oc.x!==Rc||Oc.y!==Nc||Oc.z!==Kb||Oc.w!==cd)y.vertexAttrib4f(Fb,Rc,Nc,Kb,cd),Oc.x=Rc,Oc.y=Nc,Oc.z=Kb,Oc.w=cd;Sc=Q.call(this,ka,c,0);hc=!1;Xc=null;id=0;re=!1;Yc=me=0;Qd=1;Ae=0;Ye=5126;Ed=Gd=be=ve=0;ia(Sc)?(hc=!0,Xc=M.createStream(34962,Sc),Ye=Xc.dtype):(Xc=M.getBuffer(Sc))?Ye=Xc.dtype:"constant"in Sc?(Qd=2,"number"===typeof Sc.constant?(be=
Sc.constant,Gd=Ed=ve=0):(be=0<Sc.constant.length?Sc.constant[0]:0,Gd=1<Sc.constant.length?Sc.constant[1]:0,Ed=2<Sc.constant.length?Sc.constant[2]:0,ve=3<Sc.constant.length?Sc.constant[3]:0)):(Xc=ia(Sc.buffer)?M.createStream(34962,Sc.buffer):M.getBuffer(Sc.buffer),Ye="type"in Sc?Kd[Sc.type]:Xc.dtype,re=!!Sc.normalized,Yc=Sc.size|0,me=Sc.offset|0,Ae=Sc.stride|0,id=Sc.divisor|0);ed=$b.location;Ec=ca[ed];if(1===Qd){Ec.buffer||y.enableVertexAttribArray(ed);od=Yc||4;if(Ec.type!==Ye||Ec.size!==od||Ec.buffer!==
Xc||Ec.normalized!==re||Ec.offset!==me||Ec.stride!==Ae)y.bindBuffer(34962,Xc.buffer),y.vertexAttribPointer(ed,od,Ye,re,Ae,me),Ec.type=Ye,Ec.size=od,Ec.buffer=Xc,Ec.normalized=re,Ec.offset=me,Ec.stride=Ae;Ec.divisor!==id&&(L.vertexAttribDivisorANGLE(ed,id),Ec.divisor=id)}else if(Ec.buffer&&(y.disableVertexAttribArray(ed),Ec.buffer=null),Ec.x!==be||Ec.y!==Gd||Ec.z!==Ed||Ec.w!==ve)y.vertexAttrib4f(ed,be,Gd,Ed,ve),Ec.x=be,Ec.y=Gd,Ec.z=Ed,Ec.w=ve;jd=G.call(this,ka,c,0);$c=!1;kd=null;Ad=0;Cd=!1;je=te=0;
ue=1;de=0;ce=5126;fe=Yd=ne=$d=0;ia(jd)?($c=!0,kd=M.createStream(34962,jd),ce=kd.dtype):(kd=M.getBuffer(jd))?ce=kd.dtype:"constant"in jd?(ue=2,"number"===typeof jd.constant?(ne=jd.constant,Yd=fe=$d=0):(ne=0<jd.constant.length?jd.constant[0]:0,Yd=1<jd.constant.length?jd.constant[1]:0,fe=2<jd.constant.length?jd.constant[2]:0,$d=3<jd.constant.length?jd.constant[3]:0)):(kd=ia(jd.buffer)?M.createStream(34962,jd.buffer):M.getBuffer(jd.buffer),ce="type"in jd?Kd[jd.type]:kd.dtype,Cd=!!jd.normalized,je=jd.size|
0,te=jd.offset|0,de=jd.stride|0,Ad=jd.divisor|0);yc=ja.location;Vc=ca[yc];if(1===ue){Vc.buffer||y.enableVertexAttribArray(yc);oe=je||1;if(Vc.type!==ce||Vc.size!==oe||Vc.buffer!==kd||Vc.normalized!==Cd||Vc.offset!==te||Vc.stride!==de)y.bindBuffer(34962,kd.buffer),y.vertexAttribPointer(yc,oe,ce,Cd,de,te),Vc.type=ce,Vc.size=oe,Vc.buffer=kd,Vc.normalized=Cd,Vc.offset=te,Vc.stride=de;Vc.divisor!==Ad&&(L.vertexAttribDivisorANGLE(yc,Ad),Vc.divisor=Ad)}else if(Vc.buffer&&(y.disableVertexAttribArray(yc),Vc.buffer=
null),Vc.x!==ne||Vc.y!==Yd||Vc.z!==fe||Vc.w!==$d)y.vertexAttrib4f(yc,ne,Yd,fe,$d),Vc.x=ne,Vc.y=Yd,Vc.z=fe,Vc.w=$d;y.uniform1i(v.location,!1);y.uniform1f(Ha.location,ka.pixelRatio);he=c.scale;y.uniform2f(aa.location,he[0],he[1]);Fd=c.scaleFract;y.uniform2f(ib.location,Fd[0],Fd[1]);Id=c.translate;y.uniform2f(qa.location,Id[0],Id[1]);Md=c.translateFract;y.uniform2f(ec.location,Md[0],Md[1]);Nd=D.call(this,ka,c,0);y.uniform2f(Oa.location,Nd[0],Nd[1]);y.uniform1f(Ea.location,c.opacity);y.uniform1i(dc.location,
w.bind());(ge=c.markerTexture)&&"framebuffer"===ge._reglType&&(ge=ge.color[0]);Ee=ge._texture;y.uniform1i(ea.location,Ee.bind());we=c.elements;ke=null;(ke=(Xe=ia(we))?Jc.createStream(we):Jc.getElements(we))&&y.bindBuffer(34963,ke.buffer.buffer);Ne=c.offset;if(Ke=c.count)pe=Gb.instances,0<pe?ke?L.drawElementsInstancedANGLE(0,Ke,ke.type,Ne<<(ke.type-5121>>1),pe):L.drawArraysInstancedANGLE(0,Ne,Ke,pe):0>pe&&(ke?y.drawElements(0,Ke,ke.type,Ne<<(ke.type-5121>>1)):y.drawArrays(0,Ne,Ke)),Ca.dirty=!0,ra.setVAO(null),
ka.viewportWidth=t,ka.viewportHeight=z,O&&(p.cpuTime+=performance.now()-K),W&&M.destroyStream(R),Wa&&M.destroyStream(ta),gb&&M.destroyStream(Pa),eb&&M.destroyStream(Ia),Da&&M.destroyStream(pb),Db&&M.destroyStream(rb),Mb&&M.destroyStream(Pb),hc&&M.destroyStream(Xc),$c&&M.destroyStream(kd),w.unbind(),Ee.unbind(),Xe&&Jc.destroyStream(ke)},scope:function(a,b,f){var e,k,m,n,r,u,v,w,x,y,I,E,F,D,A,G,N,L,ca,K,Q,da,T,U,aa,Z,ma,fa,la,ea,ja,ga,oa,ta,ra,qa,sa,na,Ha,Ea,Oa,yb,Na,$a,wc,Ib,Ma,nb,tb,gb,Pa,Ka,ib,kc,
db,ud,xb,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,$b,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,Cb,uc,Va,Lb,ec,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,pc,tc,dc,Lc,lc,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,qd,Tc,Yc,Wc,xd,td,Xd,Jd,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,Sd,se,ze,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,qe,we,ke,Xe,Ne,Ke,pe,Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,Ue,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf,pf,lf,qf,Af,Bf,Me,ye,mf,nf,Cf,
Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf,cg,Qf,Rf,qg,df,$e,Lf,Mf,dg,eg,fg,gg,hg,Uf,Sf,Vf,Wf,Xf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Nf,Of,jg,kg,lg,mg,ng,Yf,Tf,Zf,$f,ag,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;e=a.viewport;k=e.x|0;m=e.y|0;n="width"in e?e.width|0:ka.framebufferWidth-k;r="height"in e?e.height|0:ka.framebufferHeight-m;u=ka.viewportWidth;ka.viewportWidth=n;v=ka.viewportHeight;ka.viewportHeight=r;w=fd[0];fd[0]=k;x=fd[1];fd[1]=m;y=fd[2];fd[2]=n;I=fd[3];fd[3]=r;E=H[0];
H[0]=0;F=H[1];H[1]=0;D=H[2];H[2]=0;A=H[3];H[3]=1;G=va.blend_enable;va.blend_enable=!0;N=za[0];za[0]=770;L=za[1];za[1]=771;ca=za[2];za[2]=773;K=za[3];za[3]=1;Q=va.depth_enable;va.depth_enable=!1;da=a.viewport;T=da.x|0;U=da.y|0;aa="width"in da?da.width|0:ka.framebufferWidth-T;Z="height"in da?da.height|0:ka.framebufferHeight-U;ma=re[0];re[0]=T;fa=re[1];re[1]=U;la=re[2];re[2]=aa;ea=re[3];re[3]=Z;ja=va.scissor_enable;va.scissor_enable=!0;ga=va.stencil_enable;va.stencil_enable=!1;if(oa=Ca.profile)ta=performance.now(),
p.count++;ra=a.elements;qa=null;qa=(sa=ia(ra))?Jc.createStream(ra):Jc.getElements(ra);na=Gb.elements;Gb.elements=qa;Ha=a.offset;Ea=Gb.offset;Gb.offset=Ha;Oa=a.count;yb=Gb.count;Gb.count=Oa;Na=Gb.primitive;Gb.primitive=0;$a=ha[45];ha[45]=!1;wc=a.markerTexture;Ib=ha[48];ha[48]=wc;Ma=a.opacity;nb=ha[10];ha[10]=Ma;tb=C.call(this,ka,a,f);gb=ha[46];ha[46]=tb;Pa=ha[47];ha[47]=B;Ka=ka.pixelRatio;ib=ha[34];ha[34]=Ka;kc=a.scale;db=ha[6];ha[6]=kc;ud=a.scaleFract;xb=ha[7];ha[7]=ud;cc=a.translate;jb=ha[8];ha[8]=
cc;kb=a.translateFract;ua=ha[9];ha[9]=kb;ob=z.call(this,ka,a,f);wa=!1;Ua=null;bb=0;Aa=!1;Ia=eb=0;Bb=1;zb=0;Ra=5126;Tb=Za=Jb=oc=0;ia(ob)?(wa=!0,Ua=M.createStream(34962,ob),Ra=Ua.dtype):(Ua=M.getBuffer(ob))?Ra=Ua.dtype:"constant"in ob?(Bb=2,"number"===typeof ob.constant?(Jb=ob.constant,Za=Tb=oc=0):(Jb=0<ob.constant.length?ob.constant[0]:0,Za=1<ob.constant.length?ob.constant[1]:0,Tb=2<ob.constant.length?ob.constant[2]:0,oc=3<ob.constant.length?ob.constant[3]:0)):(Ua=ia(ob.buffer)?M.createStream(34962,
ob.buffer):M.getBuffer(ob.buffer),Ra="type"in ob?Kd[ob.type]:Ua.dtype,Aa=!!ob.normalized,Ia=ob.size|0,eb=ob.offset|0,zb=ob.stride|0,bb=ob.divisor|0);xa=J.buffer;J.buffer=Ua;$b=J.divisor;J.divisor=bb;Ja=J.normalized;J.normalized=Aa;Nb=J.offset;J.offset=eb;fb=J.size;J.size=Ia;hb=J.state;J.state=Bb;ya=J.stride;J.stride=zb;fc=J.type;J.type=Ra;Da=J.w;J.w=oc;pb=J.x;J.x=Jb;qb=J.y;J.y=Za;Xa=J.z;J.z=Tb;Ya=P.call(this,ka,a,f);nc=!1;Cb=null;uc=0;Va=!1;ec=Lb=0;Fa=1;xc=0;Qa=5126;Db=ub=lb=Ba=0;ia(Ya)?(nc=!0,Cb=
M.createStream(34962,Ya),Qa=Cb.dtype):(Cb=M.getBuffer(Ya))?Qa=Cb.dtype:"constant"in Ya?(Fa=2,"number"===typeof Ya.constant?(lb=Ya.constant,ub=Db=Ba=0):(lb=0<Ya.constant.length?Ya.constant[0]:0,ub=1<Ya.constant.length?Ya.constant[1]:0,Db=2<Ya.constant.length?Ya.constant[2]:0,Ba=3<Ya.constant.length?Ya.constant[3]:0)):(Cb=ia(Ya.buffer)?M.createStream(34962,Ya.buffer):M.getBuffer(Ya.buffer),Qa="type"in Ya?Kd[Ya.type]:Cb.dtype,Va=!!Ya.normalized,ec=Ya.size|0,Lb=Ya.offset|0,xc=Ya.stride|0,uc=Ya.divisor|
0);rb=W.buffer;W.buffer=Cb;vc=W.divisor;W.divisor=uc;vb=W.normalized;W.normalized=Va;pc=W.offset;W.offset=Lb;tc=W.size;W.size=ec;dc=W.state;W.state=Fa;Lc=W.stride;W.stride=xc;lc=W.type;W.type=Qa;hd=W.w;W.w=Ba;Ub=W.x;W.x=lb;bc=W.y;W.y=ub;Ob=W.z;W.z=Db;Ga=S.call(this,ka,a,f);Yb=!1;mb=null;wb=0;Mb=!1;gc=Pb=0;ic=1;Qc=0;Bc=5126;cd=Mc=Dc=Cc=0;ia(Ga)?(Yb=!0,mb=M.createStream(34962,Ga),Bc=mb.dtype):(mb=M.getBuffer(Ga))?Bc=mb.dtype:"constant"in Ga?(ic=2,"number"===typeof Ga.constant?(Dc=Ga.constant,Mc=cd=
Cc=0):(Dc=0<Ga.constant.length?Ga.constant[0]:0,Mc=1<Ga.constant.length?Ga.constant[1]:0,cd=2<Ga.constant.length?Ga.constant[2]:0,Cc=3<Ga.constant.length?Ga.constant[3]:0)):(mb=ia(Ga.buffer)?M.createStream(34962,Ga.buffer):M.getBuffer(Ga.buffer),Bc="type"in Ga?Kd[Ga.type]:mb.dtype,Mb=!!Ga.normalized,gc=Ga.size|0,Pb=Ga.offset|0,Qc=Ga.stride|0,wb=Ga.divisor|0);Rc=t.buffer;t.buffer=mb;Nc=t.divisor;t.divisor=wb;Kb=t.normalized;t.normalized=Mb;Fb=t.offset;t.offset=Pb;Oc=t.size;t.size=gc;Hc=t.state;t.state=
ic;Sc=t.stride;t.stride=Qc;hc=t.type;t.type=Bc;Xc=t.w;t.w=Cc;id=t.x;t.x=Dc;qd=t.y;t.y=Mc;Tc=t.z;t.z=cd;Yc=h.call(this,ka,a,f);Wc=!1;xd=null;td=0;Xd=!1;Gd=Jd=0;Ed=1;ed=0;Ec=5126;kd=$c=jd=od=0;ia(Yc)?(Wc=!0,xd=M.createStream(34962,Yc),Ec=xd.dtype):(xd=M.getBuffer(Yc))?Ec=xd.dtype:"constant"in Yc?(Ed=2,"number"===typeof Yc.constant?(jd=Yc.constant,$c=kd=od=0):(jd=0<Yc.constant.length?Yc.constant[0]:0,$c=1<Yc.constant.length?Yc.constant[1]:0,kd=2<Yc.constant.length?Yc.constant[2]:0,od=3<Yc.constant.length?
Yc.constant[3]:0)):(xd=ia(Yc.buffer)?M.createStream(34962,Yc.buffer):M.getBuffer(Yc.buffer),Ec="type"in Yc?Kd[Yc.type]:xd.dtype,Xd=!!Yc.normalized,Gd=Yc.size|0,Jd=Yc.offset|0,ed=Yc.stride|0,td=Yc.divisor|0);Ad=g.buffer;g.buffer=xd;Cd=g.divisor;g.divisor=td;Sd=g.normalized;g.normalized=Xd;se=g.offset;g.offset=Jd;ze=g.size;g.size=Gd;de=g.state;g.state=Ed;ce=g.stride;g.stride=ed;$d=g.type;g.type=Ec;ne=g.w;g.w=od;Yd=g.x;g.x=jd;fe=g.y;g.y=$c;yc=g.z;g.z=kd;Vc=l.call(this,ka,a,f);oe=!1;he=null;Fd=0;Id=!1;
Nd=Md=0;ge=1;qe=0;we=5126;Ke=Ne=Xe=ke=0;ia(Vc)?(oe=!0,he=M.createStream(34962,Vc),we=he.dtype):(he=M.getBuffer(Vc))?we=he.dtype:"constant"in Vc?(ge=2,"number"===typeof Vc.constant?(Xe=Vc.constant,Ne=Ke=ke=0):(Xe=0<Vc.constant.length?Vc.constant[0]:0,Ne=1<Vc.constant.length?Vc.constant[1]:0,Ke=2<Vc.constant.length?Vc.constant[2]:0,ke=3<Vc.constant.length?Vc.constant[3]:0)):(he=ia(Vc.buffer)?M.createStream(34962,Vc.buffer):M.getBuffer(Vc.buffer),we="type"in Vc?Kd[Vc.type]:he.dtype,Id=!!Vc.normalized,
Nd=Vc.size|0,Md=Vc.offset|0,qe=Vc.stride|0,Fd=Vc.divisor|0);pe=V.buffer;V.buffer=he;Be=V.divisor;V.divisor=Fd;Fe=V.normalized;V.normalized=Id;Ge=V.offset;V.offset=Md;He=V.size;V.size=Nd;Ce=V.state;V.state=ge;Hd=V.stride;V.stride=qe;Rd=V.type;V.type=we;Wd=V.w;V.w=ke;Zd=V.x;V.x=Xe;Ie=V.y;V.y=Ne;zd=V.z;V.z=Ke;Od=X.call(this,ka,a,f);xe=!1;Je=null;Ue=0;We=!1;Le=Oe=0;Ve=1;Se=0;Pe=5126;Re=Vd=Pd=Qe=0;ia(Od)?(xe=!0,Je=M.createStream(34962,Od),Pe=Je.dtype):(Je=M.getBuffer(Od))?Pe=Je.dtype:"constant"in Od?(Ve=
2,"number"===typeof Od.constant?(Pd=Od.constant,Vd=Re=Qe=0):(Pd=0<Od.constant.length?Od.constant[0]:0,Vd=1<Od.constant.length?Od.constant[1]:0,Re=2<Od.constant.length?Od.constant[2]:0,Qe=3<Od.constant.length?Od.constant[3]:0)):(Je=ia(Od.buffer)?M.createStream(34962,Od.buffer):M.getBuffer(Od.buffer),Pe="type"in Od?Kd[Od.type]:Je.dtype,We=!!Od.normalized,Le=Od.size|0,Oe=Od.offset|0,Se=Od.stride|0,Ue=Od.divisor|0);ff=q.buffer;q.buffer=Je;kf=q.divisor;q.divisor=Ue;cf=q.normalized;q.normalized=We;gf=q.offset;
q.offset=Oe;hf=q.size;q.size=Le;jf=q.state;q.state=Ve;pf=q.stride;q.stride=Se;lf=q.type;q.type=Pe;qf=q.w;q.w=Qe;Af=q.x;q.x=Pd;Bf=q.y;q.y=Vd;Me=q.z;q.z=Re;ye=pa.call(this,ka,a,f);mf=!1;nf=null;Cf=0;Ff=!1;Df=zf=0;Ef=1;uf=0;vf=5126;Hf=xf=wf=tf=0;ia(ye)?(mf=!0,nf=M.createStream(34962,ye),vf=nf.dtype):(nf=M.getBuffer(ye))?vf=nf.dtype:"constant"in ye?(Ef=2,"number"===typeof ye.constant?(wf=ye.constant,xf=Hf=tf=0):(wf=0<ye.constant.length?ye.constant[0]:0,xf=1<ye.constant.length?ye.constant[1]:0,Hf=2<ye.constant.length?
ye.constant[2]:0,tf=3<ye.constant.length?ye.constant[3]:0)):(nf=ia(ye.buffer)?M.createStream(34962,ye.buffer):M.getBuffer(ye.buffer),vf="type"in ye?Kd[ye.type]:nf.dtype,Ff=!!ye.normalized,Df=ye.size|0,zf=ye.offset|0,uf=ye.stride|0,Cf=ye.divisor|0);If=O.buffer;O.buffer=nf;Jf=O.divisor;O.divisor=Cf;Kf=O.normalized;O.normalized=Ff;rf=O.offset;O.offset=zf;Pf=O.size;O.size=Df;Gf=O.state;O.state=Ef;sf=O.stride;O.stride=uf;cg=O.type;O.type=vf;Qf=O.w;O.w=tf;Rf=O.x;O.x=wf;qg=O.y;O.y=xf;df=O.z;O.z=Hf;$e=Y.call(this,
ka,a,f);Lf=!1;Mf=null;dg=0;eg=!1;gg=fg=0;hg=1;Uf=0;Sf=5126;ig=Xf=Wf=Vf=0;ia($e)?(Lf=!0,Mf=M.createStream(34962,$e),Sf=Mf.dtype):(Mf=M.getBuffer($e))?Sf=Mf.dtype:"constant"in $e?(hg=2,"number"===typeof $e.constant?(Wf=$e.constant,Xf=ig=Vf=0):(Wf=0<$e.constant.length?$e.constant[0]:0,Xf=1<$e.constant.length?$e.constant[1]:0,ig=2<$e.constant.length?$e.constant[2]:0,Vf=3<$e.constant.length?$e.constant[3]:0)):(Mf=ia($e.buffer)?M.createStream(34962,$e.buffer):M.getBuffer($e.buffer),Sf="type"in $e?Kd[$e.type]:
Mf.dtype,eg=!!$e.normalized,gg=$e.size|0,fg=$e.offset|0,Uf=$e.stride|0,dg=$e.divisor|0);rg=c.buffer;c.buffer=Mf;sg=c.divisor;c.divisor=dg;tg=c.normalized;c.normalized=eg;ug=c.offset;c.offset=fg;vg=c.size;c.size=gg;wg=c.state;c.state=hg;xg=c.stride;c.stride=Uf;yg=c.type;c.type=Sf;zg=c.w;c.w=Vf;Ag=c.x;c.x=Wf;Bg=c.y;c.y=Xf;ef=c.z;c.z=ig;af=d.call(this,ka,a,f);Nf=!1;Of=null;jg=0;kg=!1;mg=lg=0;ng=1;Yf=0;Tf=5126;og=ag=$f=Zf=0;ia(af)?(Nf=!0,Of=M.createStream(34962,af),Tf=Of.dtype):(Of=M.getBuffer(af))?Tf=
Of.dtype:"constant"in af?(ng=2,"number"===typeof af.constant?($f=af.constant,ag=og=Zf=0):($f=0<af.constant.length?af.constant[0]:0,ag=1<af.constant.length?af.constant[1]:0,og=2<af.constant.length?af.constant[2]:0,Zf=3<af.constant.length?af.constant[3]:0)):(Of=ia(af.buffer)?M.createStream(34962,af.buffer):M.getBuffer(af.buffer),Tf="type"in af?Kd[af.type]:Of.dtype,kg=!!af.normalized,mg=af.size|0,lg=af.offset|0,Yf=af.stride|0,jg=af.divisor|0);Cg=ba.buffer;ba.buffer=Of;Dg=ba.divisor;ba.divisor=jg;Eg=
ba.normalized;ba.normalized=kg;Fg=ba.offset;ba.offset=lg;Gg=ba.size;ba.size=mg;Hg=ba.state;ba.state=ng;Ig=ba.stride;ba.stride=Yf;Jg=ba.type;ba.type=Tf;Kg=ba.w;ba.w=Zf;Lg=ba.x;ba.x=$f;Mg=ba.y;ba.y=ag;Ng=ba.z;ba.z=og;Og=R.vert;R.vert=44;Pg=R.frag;R.frag=43;Ca.dirty=!0;b(ka,a,f);ka.viewportWidth=u;ka.viewportHeight=v;fd[0]=w;fd[1]=x;fd[2]=y;fd[3]=I;H[0]=E;H[1]=F;H[2]=D;H[3]=A;va.blend_enable=G;za[0]=N;za[1]=L;za[2]=ca;za[3]=K;va.depth_enable=Q;re[0]=ma;re[1]=fa;re[2]=la;re[3]=ea;va.scissor_enable=ja;
va.stencil_enable=ga;oa&&(p.cpuTime+=performance.now()-ta);sa&&Jc.destroyStream(qa);Gb.elements=na;Gb.offset=Ea;Gb.count=yb;Gb.primitive=Na;ha[45]=$a;ha[48]=Ib;ha[10]=nb;ha[46]=gb;ha[47]=Pa;ha[34]=ib;ha[6]=db;ha[7]=xb;ha[8]=jb;ha[9]=ua;wa&&M.destroyStream(Ua);J.buffer=xa;J.divisor=$b;J.normalized=Ja;J.offset=Nb;J.size=fb;J.state=hb;J.stride=ya;J.type=fc;J.w=Da;J.x=pb;J.y=qb;J.z=Xa;nc&&M.destroyStream(Cb);W.buffer=rb;W.divisor=vc;W.normalized=vb;W.offset=pc;W.size=tc;W.state=dc;W.stride=Lc;W.type=
lc;W.w=hd;W.x=Ub;W.y=bc;W.z=Ob;Yb&&M.destroyStream(mb);t.buffer=Rc;t.divisor=Nc;t.normalized=Kb;t.offset=Fb;t.size=Oc;t.state=Hc;t.stride=Sc;t.type=hc;t.w=Xc;t.x=id;t.y=qd;t.z=Tc;Wc&&M.destroyStream(xd);g.buffer=Ad;g.divisor=Cd;g.normalized=Sd;g.offset=se;g.size=ze;g.state=de;g.stride=ce;g.type=$d;g.w=ne;g.x=Yd;g.y=fe;g.z=yc;oe&&M.destroyStream(he);V.buffer=pe;V.divisor=Be;V.normalized=Fe;V.offset=Ge;V.size=He;V.state=Ce;V.stride=Hd;V.type=Rd;V.w=Wd;V.x=Zd;V.y=Ie;V.z=zd;xe&&M.destroyStream(Je);q.buffer=
ff;q.divisor=kf;q.normalized=cf;q.offset=gf;q.size=hf;q.state=jf;q.stride=pf;q.type=lf;q.w=qf;q.x=Af;q.y=Bf;q.z=Me;mf&&M.destroyStream(nf);O.buffer=If;O.divisor=Jf;O.normalized=Kf;O.offset=rf;O.size=Pf;O.state=Gf;O.stride=sf;O.type=cg;O.w=Qf;O.x=Rf;O.y=qg;O.z=df;Lf&&M.destroyStream(Mf);c.buffer=rg;c.divisor=sg;c.normalized=tg;c.offset=ug;c.size=vg;c.state=wg;c.stride=xg;c.type=yg;c.w=zg;c.x=Ag;c.y=Bg;c.z=ef;Nf&&M.destroyStream(Of);ba.buffer=Cg;ba.divisor=Dg;ba.normalized=Eg;ba.offset=Fg;ba.size=Gg;
ba.state=Hg;ba.stride=Ig;ba.type=Jg;ba.w=Kg;ba.x=Lg;ba.y=Mg;ba.z=Ng;R.vert=Og;R.frag=Pg;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,p,n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,Ka,xb,Cb,na,Na,Z,K,N,U,sa,L,$b,$a,T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa,ec,pc,lc,ud){var wc,ca,M,ka,Ca,Gb,Jc,Wc,F,y,ia,va,R,ha,ra,H,x,da,E,za,la,k,
kc,fa,m,Ib,yb,Ue,qe,re,td,xd,ze,qd,Sd,se,Jd,fd,Xd;wc=e.attributes;ca=e.buffer;M=e.context;ka=e.current;Ca=e.draw;Gb=e.elements;Jc=e.extensions;Wc=e.framebuffer;F=e.gl;y=e.isBufferArgs;ia=e.next;va=e.shader;R=e.uniforms;ha=e.vao;ra=ia.blend_color;H=ka.blend_color;x=ia.blend_equation;da=ka.blend_equation;E=ia.blend_func;za=ka.blend_func;la=ia.colorMask;k=ka.colorMask;kc=ia.depth_range;fa=ka.depth_range;m=ia.polygonOffset_offset;Ib=ka.polygonOffset_offset;yb=ia.sample_coverage;Ue=ka.sample_coverage;
qe=ia.scissor_box;re=ka.scissor_box;td=ia.stencil_func;xd=ka.stencil_func;ze=ia.stencil_opBack;qd=ka.stencil_opBack;Sd=ia.stencil_opFront;se=ka.stencil_opFront;Jd=ia.viewport;fd=ka.viewport;Xd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,f,g,e,h;c=Wc.next;c!==Wc.cur&&(c?F.bindFramebuffer(36160,c.framebuffer):F.bindFramebuffer(36160,null),Wc.cur=c);if(ka.dirty){var l,n,r,q,t,u,w,z,I,E,C,B,D,A,P,G,J,O,Q,W,R,V,X,Y,ba,
S,ma,va,ra,ta,pa,Ab,Sa,Hb;l=ia.dither;l!==ka.dither&&(l?F.enable(3024):F.disable(3024),ka.dither=l);n=x[0];r=x[1];if(n!==da[0]||r!==da[1])F.blendEquationSeparate(n,r),da[0]=n,da[1]=r;q=ia.depth_func;q!==ka.depth_func&&(F.depthFunc(q),ka.depth_func=q);t=kc[0];u=kc[1];if(t!==fa[0]||u!==fa[1])F.depthRange(t,u),fa[0]=t,fa[1]=u;w=ia.depth_mask;w!==ka.depth_mask&&(F.depthMask(w),ka.depth_mask=w);z=la[0];I=la[1];E=la[2];C=la[3];if(z!==k[0]||I!==k[1]||E!==k[2]||C!==k[3])F.colorMask(z,I,E,C),k[0]=z,k[1]=I,
k[2]=E,k[3]=C;B=ia.cull_enable;B!==ka.cull_enable&&(B?F.enable(2884):F.disable(2884),ka.cull_enable=B);D=ia.cull_face;D!==ka.cull_face&&(F.cullFace(D),ka.cull_face=D);A=ia.frontFace;A!==ka.frontFace&&(F.frontFace(A),ka.frontFace=A);P=ia.lineWidth;P!==ka.lineWidth&&(F.lineWidth(P),ka.lineWidth=P);G=ia.polygonOffset_enable;G!==ka.polygonOffset_enable&&(G?F.enable(32823):F.disable(32823),ka.polygonOffset_enable=G);J=m[0];O=m[1];if(J!==Ib[0]||O!==Ib[1])F.polygonOffset(J,O),Ib[0]=J,Ib[1]=O;Q=ia.sample_alpha;
Q!==ka.sample_alpha&&(Q?F.enable(32926):F.disable(32926),ka.sample_alpha=Q);W=ia.sample_enable;W!==ka.sample_enable&&(W?F.enable(32928):F.disable(32928),ka.sample_enable=W);R=yb[0];V=yb[1];if(R!==Ue[0]||V!==Ue[1])F.sampleCoverage(R,V),Ue[0]=R,Ue[1]=V;X=ia.stencil_mask;X!==ka.stencil_mask&&(F.stencilMask(X),ka.stencil_mask=X);Y=td[0];ba=td[1];S=td[2];if(Y!==xd[0]||ba!==xd[1]||S!==xd[2])F.stencilFunc(Y,ba,S),xd[0]=Y,xd[1]=ba,xd[2]=S;ma=Sd[0];va=Sd[1];ra=Sd[2];ta=Sd[3];if(ma!==se[0]||va!==se[1]||ra!==
se[2]||ta!==se[3])F.stencilOpSeparate(ma,va,ra,ta),se[0]=ma,se[1]=va,se[2]=ra,se[3]=ta;pa=ze[0];Ab=ze[1];Sa=ze[2];Hb=ze[3];if(pa!==qd[0]||Ab!==qd[1]||Sa!==qd[2]||Hb!==qd[3])F.stencilOpSeparate(pa,Ab,Sa,Hb),qd[0]=pa,qd[1]=Ab,qd[2]=Sa,qd[3]=Hb}F.blendColor(0,0,0,1);H[0]=0;H[1]=0;H[2]=0;H[3]=1;F.enable(3042);ka.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;F.disable(2929);ka.depth_enable=!1;F.enable(3089);ka.scissor_enable=!0;F.disable(2960);ka.stencil_enable=
!1;if(d=ka.profile)f=performance.now(),p.count+=b;F.useProgram(oa.program);g=Jc.angle_instanced_arrays;var cb;ha.setVAO(null);F.uniform1i(v.location,!1);F.uniform1i(Oa.location,sa.bind());cb=Ca.instances;for(e=0;e<b;++e){h=a[e];var Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc,Jd,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,
Kb,Fb,Oc,Hc,Sc,hc,Xc,id,qe,me,Yc,Qd,Ae,Ye,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe,Ne,Ke,pe,Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,of,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf,pf,lf,qf,Af,Bf,Me,ye,mf,nf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf;Wb=h.viewport;Qb=Wb.x|0;ee=Wb.y|0;Zb="width"in Wb?Wb.width|0:M.framebufferWidth-Qb;Rb="height"in Wb?Wb.height|0:M.framebufferHeight-ee;Bd=M.viewportWidth;M.viewportWidth=Zb;Sb=
M.viewportHeight;M.viewportHeight=Rb;F.viewport(Qb,ee,Zb,Rb);fd[0]=Qb;fd[1]=ee;fd[2]=Zb;fd[3]=Rb;Ma=h.viewport;nb=Ma.x|0;tb=Ma.y|0;gb="width"in Ma?Ma.width|0:M.framebufferWidth-nb;Pa="height"in Ma?Ma.height|0:M.framebufferHeight-tb;F.scissor(nb,tb,gb,Pa);re[0]=nb;re[1]=tb;re[2]=gb;re[3]=Pa;qc=Ka.call(this,M,h,e);Xb=!1;Uc=null;db=0;mc=!1;cc=Gc=0;jb=1;kb=0;ua=5126;bb=Ua=wa=ob=0;y(qc)?(Xb=!0,Uc=ca.createStream(34962,qc),ua=Uc.dtype):(Uc=ca.getBuffer(qc))?ua=Uc.dtype:"constant"in qc?(jb=2,"number"===
typeof qc.constant?(wa=qc.constant,Ua=bb=ob=0):(wa=0<qc.constant.length?qc.constant[0]:0,Ua=1<qc.constant.length?qc.constant[1]:0,bb=2<qc.constant.length?qc.constant[2]:0,ob=3<qc.constant.length?qc.constant[3]:0)):(Uc=y(qc.buffer)?ca.createStream(34962,qc.buffer):ca.getBuffer(qc.buffer),ua="type"in qc?Xd[qc.type]:Uc.dtype,mc=!!qc.normalized,cc=qc.size|0,Gc=qc.offset|0,kb=qc.stride|0,db=qc.divisor|0);Aa=ec.location;eb=wc[Aa];if(1===jb){eb.buffer||F.enableVertexAttribArray(Aa);Ia=cc||1;if(eb.type!==
ua||eb.size!==Ia||eb.buffer!==Uc||eb.normalized!==mc||eb.offset!==Gc||eb.stride!==kb)F.bindBuffer(34962,Uc.buffer),F.vertexAttribPointer(Aa,Ia,ua,mc,kb,Gc),eb.type=ua,eb.size=Ia,eb.buffer=Uc,eb.normalized=mc,eb.offset=Gc,eb.stride=kb;eb.divisor!==db&&(g.vertexAttribDivisorANGLE(Aa,db),eb.divisor=db)}else if(eb.buffer&&(F.disableVertexAttribArray(Aa),eb.buffer=null),eb.x!==wa||eb.y!==Ua||eb.z!==bb||eb.w!==ob)F.vertexAttrib4f(Aa,wa,Ua,bb,ob),eb.x=wa,eb.y=Ua,eb.z=bb,eb.w=ob;Bb=xb.call(this,M,h,e);zb=
!1;Ra=null;oc=0;Jb=!1;Tb=Za=0;xa=1;ae=0;Ja=5126;ya=hb=fb=Nb=0;y(Bb)?(zb=!0,Ra=ca.createStream(34962,Bb),Ja=Ra.dtype):(Ra=ca.getBuffer(Bb))?Ja=Ra.dtype:"constant"in Bb?(xa=2,"number"===typeof Bb.constant?(fb=Bb.constant,hb=ya=Nb=0):(fb=0<Bb.constant.length?Bb.constant[0]:0,hb=1<Bb.constant.length?Bb.constant[1]:0,ya=2<Bb.constant.length?Bb.constant[2]:0,Nb=3<Bb.constant.length?Bb.constant[3]:0)):(Ra=y(Bb.buffer)?ca.createStream(34962,Bb.buffer):ca.getBuffer(Bb.buffer),Ja="type"in Bb?Xd[Bb.type]:Ra.dtype,
Jb=!!Bb.normalized,Tb=Bb.size|0,Za=Bb.offset|0,ae=Bb.stride|0,oc=Bb.divisor|0);fc=lc.location;Da=wc[fc];if(1===xa){Da.buffer||F.enableVertexAttribArray(fc);pb=Tb||1;if(Da.type!==Ja||Da.size!==pb||Da.buffer!==Ra||Da.normalized!==Jb||Da.offset!==Za||Da.stride!==ae)F.bindBuffer(34962,Ra.buffer),F.vertexAttribPointer(fc,pb,Ja,Jb,ae,Za),Da.type=Ja,Da.size=pb,Da.buffer=Ra,Da.normalized=Jb,Da.offset=Za,Da.stride=ae;Da.divisor!==oc&&(g.vertexAttribDivisorANGLE(fc,oc),Da.divisor=oc)}else if(Da.buffer&&(F.disableVertexAttribArray(fc),
Da.buffer=null),Da.x!==fb||Da.y!==hb||Da.z!==ya||Da.w!==Nb)F.vertexAttrib4f(fc,fb,hb,ya,Nb),Da.x=fb,Da.y=hb,Da.z=ya,Da.w=Nb;qb=Cb.call(this,M,h,e);Xa=!1;Ya=null;nc=0;ad=!1;Va=uc=0;Lb=1;bd=0;Fa=5126;lb=Ba=Qa=xc=0;y(qb)?(Xa=!0,Ya=ca.createStream(34962,qb),Fa=Ya.dtype):(Ya=ca.getBuffer(qb))?Fa=Ya.dtype:"constant"in qb?(Lb=2,"number"===typeof qb.constant?(Qa=qb.constant,Ba=lb=xc=0):(Qa=0<qb.constant.length?qb.constant[0]:0,Ba=1<qb.constant.length?qb.constant[1]:0,lb=2<qb.constant.length?qb.constant[2]:
0,xc=3<qb.constant.length?qb.constant[3]:0)):(Ya=y(qb.buffer)?ca.createStream(34962,qb.buffer):ca.getBuffer(qb.buffer),Fa="type"in qb?Xd[qb.type]:Ya.dtype,ad=!!qb.normalized,Va=qb.size|0,uc=qb.offset|0,bd=qb.stride|0,nc=qb.divisor|0);ub=pc.location;Db=wc[ub];if(1===Lb){Db.buffer||F.enableVertexAttribArray(ub);rb=Va||1;if(Db.type!==Fa||Db.size!==rb||Db.buffer!==Ya||Db.normalized!==ad||Db.offset!==uc||Db.stride!==bd)F.bindBuffer(34962,Ya.buffer),F.vertexAttribPointer(ub,rb,Fa,ad,bd,uc),Db.type=Fa,Db.size=
rb,Db.buffer=Ya,Db.normalized=ad,Db.offset=uc,Db.stride=bd;Db.divisor!==nc&&(g.vertexAttribDivisorANGLE(ub,nc),Db.divisor=nc)}else if(Db.buffer&&(F.disableVertexAttribArray(ub),Db.buffer=null),Db.x!==Qa||Db.y!==Ba||Db.z!==lb||Db.w!==xc)F.vertexAttrib4f(ub,Qa,Ba,lb,xc),Db.x=Qa,Db.y=Ba,Db.z=lb,Db.w=xc;vc=na.call(this,M,h,e);vb=!1;Ld=null;tc=0;Jd=!1;nd=Lc=0;hd=1;Ub=0;bc=5126;mb=Yb=Ga=Ob=0;y(vc)?(vb=!0,Ld=ca.createStream(34962,vc),bc=Ld.dtype):(Ld=ca.getBuffer(vc))?bc=Ld.dtype:"constant"in vc?(hd=2,"number"===
typeof vc.constant?(Ga=vc.constant,Yb=mb=Ob=0):(Ga=0<vc.constant.length?vc.constant[0]:0,Yb=1<vc.constant.length?vc.constant[1]:0,mb=2<vc.constant.length?vc.constant[2]:0,Ob=3<vc.constant.length?vc.constant[3]:0)):(Ld=y(vc.buffer)?ca.createStream(34962,vc.buffer):ca.getBuffer(vc.buffer),bc="type"in vc?Xd[vc.type]:Ld.dtype,Jd=!!vc.normalized,nd=vc.size|0,Lc=vc.offset|0,Ub=vc.stride|0,tc=vc.divisor|0);wb=ud.location;Mb=wc[wb];if(1===hd){Mb.buffer||F.enableVertexAttribArray(wb);Pb=nd||1;if(Mb.type!==
bc||Mb.size!==Pb||Mb.buffer!==Ld||Mb.normalized!==Jd||Mb.offset!==Lc||Mb.stride!==Ub)F.bindBuffer(34962,Ld.buffer),F.vertexAttribPointer(wb,Pb,bc,Jd,Ub,Lc),Mb.type=bc,Mb.size=Pb,Mb.buffer=Ld,Mb.normalized=Jd,Mb.offset=Lc,Mb.stride=Ub;Mb.divisor!==tc&&(g.vertexAttribDivisorANGLE(wb,tc),Mb.divisor=tc)}else if(Mb.buffer&&(F.disableVertexAttribArray(wb),Mb.buffer=null),Mb.x!==Ga||Mb.y!==Yb||Mb.z!==mb||Mb.w!==Ob)F.vertexAttrib4f(wb,Ga,Yb,mb,Ob),Mb.x=Ga,Mb.y=Yb,Mb.z=mb,Mb.w=Ob;gc=Na.call(this,M,h,e);ic=
!1;Qc=null;Bc=0;Cc=!1;Mc=Dc=0;cd=1;Rc=0;Nc=5126;Hc=Oc=Fb=Kb=0;y(gc)?(ic=!0,Qc=ca.createStream(34962,gc),Nc=Qc.dtype):(Qc=ca.getBuffer(gc))?Nc=Qc.dtype:"constant"in gc?(cd=2,"number"===typeof gc.constant?(Fb=gc.constant,Oc=Hc=Kb=0):(Fb=0<gc.constant.length?gc.constant[0]:0,Oc=1<gc.constant.length?gc.constant[1]:0,Hc=2<gc.constant.length?gc.constant[2]:0,Kb=3<gc.constant.length?gc.constant[3]:0)):(Qc=y(gc.buffer)?ca.createStream(34962,gc.buffer):ca.getBuffer(gc.buffer),Nc="type"in gc?Xd[gc.type]:Qc.dtype,
Cc=!!gc.normalized,Mc=gc.size|0,Dc=gc.offset|0,Rc=gc.stride|0,Bc=gc.divisor|0);Sc=ib.location;hc=wc[Sc];if(1===cd){hc.buffer||F.enableVertexAttribArray(Sc);Xc=Mc||1;if(hc.type!==Nc||hc.size!==Xc||hc.buffer!==Qc||hc.normalized!==Cc||hc.offset!==Dc||hc.stride!==Rc)F.bindBuffer(34962,Qc.buffer),F.vertexAttribPointer(Sc,Xc,Nc,Cc,Rc,Dc),hc.type=Nc,hc.size=Xc,hc.buffer=Qc,hc.normalized=Cc,hc.offset=Dc,hc.stride=Rc;hc.divisor!==Bc&&(g.vertexAttribDivisorANGLE(Sc,Bc),hc.divisor=Bc)}else if(hc.buffer&&(F.disableVertexAttribArray(Sc),
hc.buffer=null),hc.x!==Fb||hc.y!==Oc||hc.z!==Hc||hc.w!==Kb)F.vertexAttrib4f(Sc,Fb,Oc,Hc,Kb),hc.x=Fb,hc.y=Oc,hc.z=Hc,hc.w=Kb;id=Z.call(this,M,h,e);qe=!1;me=null;Yc=0;Qd=!1;Ye=Ae=0;ve=1;be=0;Gd=5126;od=Ec=ed=Ed=0;y(id)?(qe=!0,me=ca.createStream(34962,id),Gd=me.dtype):(me=ca.getBuffer(id))?Gd=me.dtype:"constant"in id?(ve=2,"number"===typeof id.constant?(ed=id.constant,Ec=od=Ed=0):(ed=0<id.constant.length?id.constant[0]:0,Ec=1<id.constant.length?id.constant[1]:0,od=2<id.constant.length?id.constant[2]:
0,Ed=3<id.constant.length?id.constant[3]:0)):(me=y(id.buffer)?ca.createStream(34962,id.buffer):ca.getBuffer(id.buffer),Gd="type"in id?Xd[id.type]:me.dtype,Qd=!!id.normalized,Ye=id.size|0,Ae=id.offset|0,be=id.stride|0,Yc=id.divisor|0);jd=$a.location;$c=wc[jd];if(1===ve){$c.buffer||F.enableVertexAttribArray(jd);kd=Ye||1;if($c.type!==Gd||$c.size!==kd||$c.buffer!==me||$c.normalized!==Qd||$c.offset!==Ae||$c.stride!==be)F.bindBuffer(34962,me.buffer),F.vertexAttribPointer(jd,kd,Gd,Qd,be,Ae),$c.type=Gd,$c.size=
kd,$c.buffer=me,$c.normalized=Qd,$c.offset=Ae,$c.stride=be;$c.divisor!==Yc&&(g.vertexAttribDivisorANGLE(jd,Yc),$c.divisor=Yc)}else if($c.buffer&&(F.disableVertexAttribArray(jd),$c.buffer=null),$c.x!==ed||$c.y!==Ec||$c.z!==od||$c.w!==Ed)F.vertexAttrib4f(jd,ed,Ec,od,Ed),$c.x=ed,$c.y=Ec,$c.z=od,$c.w=Ed;Ad=K.call(this,M,h,e);Cd=!1;te=null;je=0;ue=!1;ce=de=0;$d=1;ne=0;Yd=5126;oe=Vc=yc=fe=0;y(Ad)?(Cd=!0,te=ca.createStream(34962,Ad),Yd=te.dtype):(te=ca.getBuffer(Ad))?Yd=te.dtype:"constant"in Ad?($d=2,"number"===
typeof Ad.constant?(yc=Ad.constant,Vc=oe=fe=0):(yc=0<Ad.constant.length?Ad.constant[0]:0,Vc=1<Ad.constant.length?Ad.constant[1]:0,oe=2<Ad.constant.length?Ad.constant[2]:0,fe=3<Ad.constant.length?Ad.constant[3]:0)):(te=y(Ad.buffer)?ca.createStream(34962,Ad.buffer):ca.getBuffer(Ad.buffer),Yd="type"in Ad?Xd[Ad.type]:te.dtype,ue=!!Ad.normalized,ce=Ad.size|0,de=Ad.offset|0,ne=Ad.stride|0,je=Ad.divisor|0);he=T.location;Fd=wc[he];if(1===$d){Fd.buffer||F.enableVertexAttribArray(he);Id=ce||4;if(Fd.type!==
Yd||Fd.size!==Id||Fd.buffer!==te||Fd.normalized!==ue||Fd.offset!==de||Fd.stride!==ne)F.bindBuffer(34962,te.buffer),F.vertexAttribPointer(he,Id,Yd,ue,ne,de),Fd.type=Yd,Fd.size=Id,Fd.buffer=te,Fd.normalized=ue,Fd.offset=de,Fd.stride=ne;Fd.divisor!==je&&(g.vertexAttribDivisorANGLE(he,je),Fd.divisor=je)}else if(Fd.buffer&&(F.disableVertexAttribArray(he),Fd.buffer=null),Fd.x!==yc||Fd.y!==Vc||Fd.z!==oe||Fd.w!==fe)F.vertexAttrib4f(he,yc,Vc,oe,fe),Fd.x=yc,Fd.y=Vc,Fd.z=oe,Fd.w=fe;Md=N.call(this,M,h,e);Nd=
!1;ge=null;Ee=0;we=!1;Xe=ke=0;Ne=1;Ke=0;pe=5126;He=Ge=Fe=Be=0;y(Md)?(Nd=!0,ge=ca.createStream(34962,Md),pe=ge.dtype):(ge=ca.getBuffer(Md))?pe=ge.dtype:"constant"in Md?(Ne=2,"number"===typeof Md.constant?(Fe=Md.constant,Ge=He=Be=0):(Fe=0<Md.constant.length?Md.constant[0]:0,Ge=1<Md.constant.length?Md.constant[1]:0,He=2<Md.constant.length?Md.constant[2]:0,Be=3<Md.constant.length?Md.constant[3]:0)):(ge=y(Md.buffer)?ca.createStream(34962,Md.buffer):ca.getBuffer(Md.buffer),pe="type"in Md?Xd[Md.type]:ge.dtype,
we=!!Md.normalized,Xe=Md.size|0,ke=Md.offset|0,Ke=Md.stride|0,Ee=Md.divisor|0);Ce=$b.location;Hd=wc[Ce];if(1===Ne){Hd.buffer||F.enableVertexAttribArray(Ce);Rd=Xe||4;if(Hd.type!==pe||Hd.size!==Rd||Hd.buffer!==ge||Hd.normalized!==we||Hd.offset!==ke||Hd.stride!==Ke)F.bindBuffer(34962,ge.buffer),F.vertexAttribPointer(Ce,Rd,pe,we,Ke,ke),Hd.type=pe,Hd.size=Rd,Hd.buffer=ge,Hd.normalized=we,Hd.offset=ke,Hd.stride=Ke;Hd.divisor!==Ee&&(g.vertexAttribDivisorANGLE(Ce,Ee),Hd.divisor=Ee)}else if(Hd.buffer&&(F.disableVertexAttribArray(Ce),
Hd.buffer=null),Hd.x!==Fe||Hd.y!==Ge||Hd.z!==He||Hd.w!==Be)F.vertexAttrib4f(Ce,Fe,Ge,He,Be),Hd.x=Fe,Hd.y=Ge,Hd.z=He,Hd.w=Be;Wd=U.call(this,M,h,e);Zd=!1;Ie=null;zd=0;Od=!1;Je=xe=0;of=1;We=0;Oe=5126;Pe=Se=Ve=Le=0;y(Wd)?(Zd=!0,Ie=ca.createStream(34962,Wd),Oe=Ie.dtype):(Ie=ca.getBuffer(Wd))?Oe=Ie.dtype:"constant"in Wd?(of=2,"number"===typeof Wd.constant?(Ve=Wd.constant,Se=Pe=Le=0):(Ve=0<Wd.constant.length?Wd.constant[0]:0,Se=1<Wd.constant.length?Wd.constant[1]:0,Pe=2<Wd.constant.length?Wd.constant[2]:
0,Le=3<Wd.constant.length?Wd.constant[3]:0)):(Ie=y(Wd.buffer)?ca.createStream(34962,Wd.buffer):ca.getBuffer(Wd.buffer),Oe="type"in Wd?Xd[Wd.type]:Ie.dtype,Od=!!Wd.normalized,Je=Wd.size|0,xe=Wd.offset|0,We=Wd.stride|0,zd=Wd.divisor|0);Qe=ja.location;Pd=wc[Qe];if(1===of){Pd.buffer||F.enableVertexAttribArray(Qe);Vd=Je||1;if(Pd.type!==Oe||Pd.size!==Vd||Pd.buffer!==Ie||Pd.normalized!==Od||Pd.offset!==xe||Pd.stride!==We)F.bindBuffer(34962,Ie.buffer),F.vertexAttribPointer(Qe,Vd,Oe,Od,We,xe),Pd.type=Oe,Pd.size=
Vd,Pd.buffer=Ie,Pd.normalized=Od,Pd.offset=xe,Pd.stride=We;Pd.divisor!==zd&&(g.vertexAttribDivisorANGLE(Qe,zd),Pd.divisor=zd)}else if(Pd.buffer&&(F.disableVertexAttribArray(Qe),Pd.buffer=null),Pd.x!==Ve||Pd.y!==Se||Pd.z!==Pe||Pd.w!==Le)F.vertexAttrib4f(Qe,Ve,Se,Pe,Le),Pd.x=Ve,Pd.y=Se,Pd.z=Pe,Pd.w=Le;Re=M.pixelRatio;e&&ff===Re||(ff=Re,F.uniform1f(dc.location,Re));kf=L.call(this,M,h,e);cf=kf[0];hf=kf[1];e&&gf===cf&&jf===hf||(gf=cf,jf=hf,F.uniform2f(Ea.location,cf,hf));pf=h.scale;lf=pf[0];Af=pf[1];e&&
qf===lf&&Bf===Af||(qf=lf,Bf=Af,F.uniform2f(Ha.location,lf,Af));Me=h.scaleFract;ye=Me[0];nf=Me[1];e&&mf===ye&&Cf===nf||(mf=ye,Cf=nf,F.uniform2f(aa.location,ye,nf));Ff=h.translate;zf=Ff[0];Ef=Ff[1];e&&Df===zf&&uf===Ef||(Df=zf,uf=Ef,F.uniform2f(ga.location,zf,Ef));vf=h.translateFract;tf=vf[0];xf=vf[1];e&&wf===tf&&Hf===xf||(wf=tf,Hf=xf,F.uniform2f(qa.location,tf,xf));If=h.opacity;e&&Jf===If||(Jf=If,F.uniform1f(ea.location,If));Kf=h.elements;rf=null;(rf=(Pf=y(Kf))?Gb.createStream(Kf):Gb.getElements(Kf))&&
F.bindBuffer(34963,rf.buffer.buffer);Gf=h.offset;if(sf=h.count)0<cb?rf?g.drawElementsInstancedANGLE(0,sf,rf.type,Gf<<(rf.type-5121>>1),cb):g.drawArraysInstancedANGLE(0,Gf,sf,cb):0>cb&&(rf?F.drawElements(0,sf,rf.type,Gf<<(rf.type-5121>>1)):F.drawArrays(0,Gf,sf)),M.viewportWidth=Bd,M.viewportHeight=Sb,Xb&&ca.destroyStream(Uc),zb&&ca.destroyStream(Ra),Xa&&ca.destroyStream(Ya),vb&&ca.destroyStream(Ld),ic&&ca.destroyStream(Qc),qe&&ca.destroyStream(me),Cd&&ca.destroyStream(te),Nd&&ca.destroyStream(ge),
Zd&&ca.destroyStream(Ie),Pf&&Gb.destroyStream(rf)}sa.unbind();ka.dirty=!0;ha.setVAO(null);d&&(p.cpuTime+=performance.now()-f)},draw:function(c){var d,e,g,h,l,q,t,z,E,C,B,P,J,N,O,L,K,W,R,V,X,U,Y,ba,S,Z,va,ra,oa,pa,sa,na,Na,La,sb,Wa,ta,Ka,Ab,Sa,Hb,cb,Wb,Qb,xb,Zb,Rb,Cb,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,Tc,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Jd,tc,qe,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,
Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id,Qd,me,Yc,bg,Ae,Ye,ve,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Xe;d=Wc.next;d!==Wc.cur&&(d?F.bindFramebuffer(36160,d.framebuffer):F.bindFramebuffer(36160,null),Wc.cur=d);if(ka.dirty){var Ne,Ke,pe,Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,of,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf;Ne=ia.dither;Ne!==ka.dither&&(Ne?F.enable(3024):F.disable(3024),ka.dither=Ne);Ke=x[0];pe=x[1];if(Ke!==da[0]||pe!==da[1])F.blendEquationSeparate(Ke,
pe),da[0]=Ke,da[1]=pe;Be=ia.depth_func;Be!==ka.depth_func&&(F.depthFunc(Be),ka.depth_func=Be);Fe=kc[0];Ge=kc[1];if(Fe!==fa[0]||Ge!==fa[1])F.depthRange(Fe,Ge),fa[0]=Fe,fa[1]=Ge;He=ia.depth_mask;He!==ka.depth_mask&&(F.depthMask(He),ka.depth_mask=He);Ce=la[0];Hd=la[1];Rd=la[2];Wd=la[3];if(Ce!==k[0]||Hd!==k[1]||Rd!==k[2]||Wd!==k[3])F.colorMask(Ce,Hd,Rd,Wd),k[0]=Ce,k[1]=Hd,k[2]=Rd,k[3]=Wd;Zd=ia.cull_enable;Zd!==ka.cull_enable&&(Zd?F.enable(2884):F.disable(2884),ka.cull_enable=Zd);Ie=ia.cull_face;Ie!==
ka.cull_face&&(F.cullFace(Ie),ka.cull_face=Ie);zd=ia.frontFace;zd!==ka.frontFace&&(F.frontFace(zd),ka.frontFace=zd);Od=ia.lineWidth;Od!==ka.lineWidth&&(F.lineWidth(Od),ka.lineWidth=Od);xe=ia.polygonOffset_enable;xe!==ka.polygonOffset_enable&&(xe?F.enable(32823):F.disable(32823),ka.polygonOffset_enable=xe);Je=m[0];of=m[1];if(Je!==Ib[0]||of!==Ib[1])F.polygonOffset(Je,of),Ib[0]=Je,Ib[1]=of;We=ia.sample_alpha;We!==ka.sample_alpha&&(We?F.enable(32926):F.disable(32926),ka.sample_alpha=We);Oe=ia.sample_enable;
Oe!==ka.sample_enable&&(Oe?F.enable(32928):F.disable(32928),ka.sample_enable=Oe);Le=yb[0];Ve=yb[1];if(Le!==Ue[0]||Ve!==Ue[1])F.sampleCoverage(Le,Ve),Ue[0]=Le,Ue[1]=Ve;Se=ia.stencil_mask;Se!==ka.stencil_mask&&(F.stencilMask(Se),ka.stencil_mask=Se);Pe=td[0];Qe=td[1];Pd=td[2];if(Pe!==xd[0]||Qe!==xd[1]||Pd!==xd[2])F.stencilFunc(Pe,Qe,Pd),xd[0]=Pe,xd[1]=Qe,xd[2]=Pd;Vd=Sd[0];Re=Sd[1];ff=Sd[2];kf=Sd[3];if(Vd!==se[0]||Re!==se[1]||ff!==se[2]||kf!==se[3])F.stencilOpSeparate(Vd,Re,ff,kf),se[0]=Vd,se[1]=Re,se[2]=
ff,se[3]=kf;cf=ze[0];gf=ze[1];hf=ze[2];jf=ze[3];if(cf!==qd[0]||gf!==qd[1]||hf!==qd[2]||jf!==qd[3])F.stencilOpSeparate(cf,gf,hf,jf),qd[0]=cf,qd[1]=gf,qd[2]=hf,qd[3]=jf}e=c.viewport;g=e.x|0;h=e.y|0;l="width"in e?e.width|0:M.framebufferWidth-g;q="height"in e?e.height|0:M.framebufferHeight-h;t=M.viewportWidth;M.viewportWidth=l;z=M.viewportHeight;M.viewportHeight=q;F.viewport(g,h,l,q);fd[0]=g;fd[1]=h;fd[2]=l;fd[3]=q;F.blendColor(0,0,0,1);H[0]=0;H[1]=0;H[2]=0;H[3]=1;F.enable(3042);ka.blend_enable=!0;F.blendFuncSeparate(770,
771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;F.disable(2929);ka.depth_enable=!1;E=c.viewport;C=E.x|0;B=E.y|0;P="width"in E?E.width|0:M.framebufferWidth-C;J="height"in E?E.height|0:M.framebufferHeight-B;F.scissor(C,B,P,J);re[0]=C;re[1]=B;re[2]=P;re[3]=J;F.enable(3089);ka.scissor_enable=!0;F.disable(2960);ka.stencil_enable=!1;if(N=ka.profile)O=performance.now(),p.count++;F.useProgram(n.program);L=Jc.angle_instanced_arrays;ha.setVAO(null);K=I.call(this,M,c,0);W=!1;R=null;V=0;X=!1;Y=U=0;ba=1;S=0;
Z=5126;pa=oa=ra=va=0;y(K)?(W=!0,R=ca.createStream(34962,K),Z=R.dtype):(R=ca.getBuffer(K))?Z=R.dtype:"constant"in K?(ba=2,"number"===typeof K.constant?(ra=K.constant,oa=pa=va=0):(ra=0<K.constant.length?K.constant[0]:0,oa=1<K.constant.length?K.constant[1]:0,pa=2<K.constant.length?K.constant[2]:0,va=3<K.constant.length?K.constant[3]:0)):(R=y(K.buffer)?ca.createStream(34962,K.buffer):ca.getBuffer(K.buffer),Z="type"in K?Xd[K.type]:R.dtype,X=!!K.normalized,Y=K.size|0,U=K.offset|0,S=K.stride|0,V=K.divisor|
0);sa=ec.location;na=wc[sa];if(1===ba){na.buffer||F.enableVertexAttribArray(sa);Na=Y||1;if(na.type!==Z||na.size!==Na||na.buffer!==R||na.normalized!==X||na.offset!==U||na.stride!==S)F.bindBuffer(34962,R.buffer),F.vertexAttribPointer(sa,Na,Z,X,S,U),na.type=Z,na.size=Na,na.buffer=R,na.normalized=X,na.offset=U,na.stride=S;na.divisor!==V&&(L.vertexAttribDivisorANGLE(sa,V),na.divisor=V)}else if(na.buffer&&(F.disableVertexAttribArray(sa),na.buffer=null),na.x!==ra||na.y!==oa||na.z!==pa||na.w!==va)F.vertexAttrib4f(sa,
ra,oa,pa,va),na.x=ra,na.y=oa,na.z=pa,na.w=va;La=f.call(this,M,c,0);sb=!1;Wa=null;ta=0;Ka=!1;Sa=Ab=0;Hb=1;cb=0;Wb=5126;Rb=Zb=xb=Qb=0;y(La)?(sb=!0,Wa=ca.createStream(34962,La),Wb=Wa.dtype):(Wa=ca.getBuffer(La))?Wb=Wa.dtype:"constant"in La?(Hb=2,"number"===typeof La.constant?(xb=La.constant,Zb=Rb=Qb=0):(xb=0<La.constant.length?La.constant[0]:0,Zb=1<La.constant.length?La.constant[1]:0,Rb=2<La.constant.length?La.constant[2]:0,Qb=3<La.constant.length?La.constant[3]:0)):(Wa=y(La.buffer)?ca.createStream(34962,
La.buffer):ca.getBuffer(La.buffer),Wb="type"in La?Xd[La.type]:Wa.dtype,Ka=!!La.normalized,Sa=La.size|0,Ab=La.offset|0,cb=La.stride|0,ta=La.divisor|0);Cb=lc.location;Sb=wc[Cb];if(1===Hb){Sb.buffer||F.enableVertexAttribArray(Cb);Ma=Sa||1;if(Sb.type!==Wb||Sb.size!==Ma||Sb.buffer!==Wa||Sb.normalized!==Ka||Sb.offset!==Ab||Sb.stride!==cb)F.bindBuffer(34962,Wa.buffer),F.vertexAttribPointer(Cb,Ma,Wb,Ka,cb,Ab),Sb.type=Wb,Sb.size=Ma,Sb.buffer=Wa,Sb.normalized=Ka,Sb.offset=Ab,Sb.stride=cb;Sb.divisor!==ta&&(L.vertexAttribDivisorANGLE(Cb,
ta),Sb.divisor=ta)}else if(Sb.buffer&&(F.disableVertexAttribArray(Cb),Sb.buffer=null),Sb.x!==xb||Sb.y!==Zb||Sb.z!==Rb||Sb.w!==Qb)F.vertexAttrib4f(Cb,xb,Zb,Rb,Qb),Sb.x=xb,Sb.y=Zb,Sb.z=Rb,Sb.w=Qb;nb=b.call(this,M,c,0);tb=!1;gb=null;Pa=0;qc=!1;Uc=Xb=0;db=1;mc=0;Gc=5126;ua=kb=jb=cc=0;y(nb)?(tb=!0,gb=ca.createStream(34962,nb),Gc=gb.dtype):(gb=ca.getBuffer(nb))?Gc=gb.dtype:"constant"in nb?(db=2,"number"===typeof nb.constant?(jb=nb.constant,kb=ua=cc=0):(jb=0<nb.constant.length?nb.constant[0]:0,kb=1<nb.constant.length?
nb.constant[1]:0,ua=2<nb.constant.length?nb.constant[2]:0,cc=3<nb.constant.length?nb.constant[3]:0)):(gb=y(nb.buffer)?ca.createStream(34962,nb.buffer):ca.getBuffer(nb.buffer),Gc="type"in nb?Xd[nb.type]:gb.dtype,qc=!!nb.normalized,Uc=nb.size|0,Xb=nb.offset|0,mc=nb.stride|0,Pa=nb.divisor|0);ob=pc.location;wa=wc[ob];if(1===db){wa.buffer||F.enableVertexAttribArray(ob);Ua=Uc||1;if(wa.type!==Gc||wa.size!==Ua||wa.buffer!==gb||wa.normalized!==qc||wa.offset!==Xb||wa.stride!==mc)F.bindBuffer(34962,gb.buffer),
F.vertexAttribPointer(ob,Ua,Gc,qc,mc,Xb),wa.type=Gc,wa.size=Ua,wa.buffer=gb,wa.normalized=qc,wa.offset=Xb,wa.stride=mc;wa.divisor!==Pa&&(L.vertexAttribDivisorANGLE(ob,Pa),wa.divisor=Pa)}else if(wa.buffer&&(F.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==kb||wa.z!==ua||wa.w!==cc)F.vertexAttrib4f(ob,jb,kb,ua,cc),wa.x=jb,wa.y=kb,wa.z=ua,wa.w=cc;bb=r.call(this,M,c,0);Aa=!1;eb=null;Ia=0;Bb=!1;Ra=zb=0;oc=1;Jb=0;Za=5126;Ja=Tc=xa=Tb=0;y(bb)?(Aa=!0,eb=ca.createStream(34962,bb),Za=eb.dtype):
(eb=ca.getBuffer(bb))?Za=eb.dtype:"constant"in bb?(oc=2,"number"===typeof bb.constant?(xa=bb.constant,Tc=Ja=Tb=0):(xa=0<bb.constant.length?bb.constant[0]:0,Tc=1<bb.constant.length?bb.constant[1]:0,Ja=2<bb.constant.length?bb.constant[2]:0,Tb=3<bb.constant.length?bb.constant[3]:0)):(eb=y(bb.buffer)?ca.createStream(34962,bb.buffer):ca.getBuffer(bb.buffer),Za="type"in bb?Xd[bb.type]:eb.dtype,Bb=!!bb.normalized,Ra=bb.size|0,zb=bb.offset|0,Jb=bb.stride|0,Ia=bb.divisor|0);Nb=ud.location;fb=wc[Nb];if(1===
oc){fb.buffer||F.enableVertexAttribArray(Nb);hb=Ra||1;if(fb.type!==Za||fb.size!==hb||fb.buffer!==eb||fb.normalized!==Bb||fb.offset!==zb||fb.stride!==Jb)F.bindBuffer(34962,eb.buffer),F.vertexAttribPointer(Nb,hb,Za,Bb,Jb,zb),fb.type=Za,fb.size=hb,fb.buffer=eb,fb.normalized=Bb,fb.offset=zb,fb.stride=Jb;fb.divisor!==Ia&&(L.vertexAttribDivisorANGLE(Nb,Ia),fb.divisor=Ia)}else if(fb.buffer&&(F.disableVertexAttribArray(Nb),fb.buffer=null),fb.x!==xa||fb.y!==Tc||fb.z!==Ja||fb.w!==Tb)F.vertexAttrib4f(Nb,xa,
Tc,Ja,Tb),fb.x=xa,fb.y=Tc,fb.z=Ja,fb.w=Tb;ya=a.call(this,M,c,0);fc=!1;Da=null;pb=0;qb=!1;Ya=Xa=0;nc=1;ad=0;uc=5126;Fa=bd=Lb=Va=0;y(ya)?(fc=!0,Da=ca.createStream(34962,ya),uc=Da.dtype):(Da=ca.getBuffer(ya))?uc=Da.dtype:"constant"in ya?(nc=2,"number"===typeof ya.constant?(Lb=ya.constant,bd=Fa=Va=0):(Lb=0<ya.constant.length?ya.constant[0]:0,bd=1<ya.constant.length?ya.constant[1]:0,Fa=2<ya.constant.length?ya.constant[2]:0,Va=3<ya.constant.length?ya.constant[3]:0)):(Da=y(ya.buffer)?ca.createStream(34962,
ya.buffer):ca.getBuffer(ya.buffer),uc="type"in ya?Xd[ya.type]:Da.dtype,qb=!!ya.normalized,Ya=ya.size|0,Xa=ya.offset|0,ad=ya.stride|0,pb=ya.divisor|0);xc=ib.location;Qa=wc[xc];if(1===nc){Qa.buffer||F.enableVertexAttribArray(xc);Ba=Ya||1;if(Qa.type!==uc||Qa.size!==Ba||Qa.buffer!==Da||Qa.normalized!==qb||Qa.offset!==Xa||Qa.stride!==ad)F.bindBuffer(34962,Da.buffer),F.vertexAttribPointer(xc,Ba,uc,qb,ad,Xa),Qa.type=uc,Qa.size=Ba,Qa.buffer=Da,Qa.normalized=qb,Qa.offset=Xa,Qa.stride=ad;Qa.divisor!==pb&&(L.vertexAttribDivisorANGLE(xc,
pb),Qa.divisor=pb)}else if(Qa.buffer&&(F.disableVertexAttribArray(xc),Qa.buffer=null),Qa.x!==Lb||Qa.y!==bd||Qa.z!==Fa||Qa.w!==Va)F.vertexAttrib4f(xc,Lb,bd,Fa,Va),Qa.x=Lb,Qa.y=bd,Qa.z=Fa,Qa.w=Va;lb=u.call(this,M,c,0);ub=!1;Db=null;rb=0;vc=!1;Jd=vb=0;tc=1;qe=0;Lc=5126;bc=Ub=hd=nd=0;y(lb)?(ub=!0,Db=ca.createStream(34962,lb),Lc=Db.dtype):(Db=ca.getBuffer(lb))?Lc=Db.dtype:"constant"in lb?(tc=2,"number"===typeof lb.constant?(hd=lb.constant,Ub=bc=nd=0):(hd=0<lb.constant.length?lb.constant[0]:0,Ub=1<lb.constant.length?
lb.constant[1]:0,bc=2<lb.constant.length?lb.constant[2]:0,nd=3<lb.constant.length?lb.constant[3]:0)):(Db=y(lb.buffer)?ca.createStream(34962,lb.buffer):ca.getBuffer(lb.buffer),Lc="type"in lb?Xd[lb.type]:Db.dtype,vc=!!lb.normalized,Jd=lb.size|0,vb=lb.offset|0,qe=lb.stride|0,rb=lb.divisor|0);Ob=$a.location;Ga=wc[Ob];if(1===tc){Ga.buffer||F.enableVertexAttribArray(Ob);Yb=Jd||1;if(Ga.type!==Lc||Ga.size!==Yb||Ga.buffer!==Db||Ga.normalized!==vc||Ga.offset!==vb||Ga.stride!==qe)F.bindBuffer(34962,Db.buffer),
F.vertexAttribPointer(Ob,Yb,Lc,vc,qe,vb),Ga.type=Lc,Ga.size=Yb,Ga.buffer=Db,Ga.normalized=vc,Ga.offset=vb,Ga.stride=qe;Ga.divisor!==rb&&(L.vertexAttribDivisorANGLE(Ob,rb),Ga.divisor=rb)}else if(Ga.buffer&&(F.disableVertexAttribArray(Ob),Ga.buffer=null),Ga.x!==hd||Ga.y!==Ub||Ga.z!==bc||Ga.w!==nd)F.vertexAttrib4f(Ob,hd,Ub,bc,nd),Ga.x=hd,Ga.y=Ub,Ga.z=bc,Ga.w=nd;mb=A.call(this,M,c,0);wb=!1;Mb=null;Pb=0;gc=!1;Qc=ic=0;Bc=1;Cc=0;Dc=5126;Nc=Rc=cd=Mc=0;y(mb)?(wb=!0,Mb=ca.createStream(34962,mb),Dc=Mb.dtype):
(Mb=ca.getBuffer(mb))?Dc=Mb.dtype:"constant"in mb?(Bc=2,"number"===typeof mb.constant?(cd=mb.constant,Rc=Nc=Mc=0):(cd=0<mb.constant.length?mb.constant[0]:0,Rc=1<mb.constant.length?mb.constant[1]:0,Nc=2<mb.constant.length?mb.constant[2]:0,Mc=3<mb.constant.length?mb.constant[3]:0)):(Mb=y(mb.buffer)?ca.createStream(34962,mb.buffer):ca.getBuffer(mb.buffer),Dc="type"in mb?Xd[mb.type]:Mb.dtype,gc=!!mb.normalized,Qc=mb.size|0,ic=mb.offset|0,Cc=mb.stride|0,Pb=mb.divisor|0);Kb=T.location;Fb=wc[Kb];if(1===
Bc){Fb.buffer||F.enableVertexAttribArray(Kb);Oc=Qc||4;if(Fb.type!==Dc||Fb.size!==Oc||Fb.buffer!==Mb||Fb.normalized!==gc||Fb.offset!==ic||Fb.stride!==Cc)F.bindBuffer(34962,Mb.buffer),F.vertexAttribPointer(Kb,Oc,Dc,gc,Cc,ic),Fb.type=Dc,Fb.size=Oc,Fb.buffer=Mb,Fb.normalized=gc,Fb.offset=ic,Fb.stride=Cc;Fb.divisor!==Pb&&(L.vertexAttribDivisorANGLE(Kb,Pb),Fb.divisor=Pb)}else if(Fb.buffer&&(F.disableVertexAttribArray(Kb),Fb.buffer=null),Fb.x!==cd||Fb.y!==Rc||Fb.z!==Nc||Fb.w!==Mc)F.vertexAttrib4f(Kb,cd,
Rc,Nc,Mc),Fb.x=cd,Fb.y=Rc,Fb.z=Nc,Fb.w=Mc;Hc=Q.call(this,M,c,0);Sc=!1;hc=null;Xc=0;id=!1;me=Qd=0;Yc=1;bg=0;Ae=5126;Gd=be=ve=Ye=0;y(Hc)?(Sc=!0,hc=ca.createStream(34962,Hc),Ae=hc.dtype):(hc=ca.getBuffer(Hc))?Ae=hc.dtype:"constant"in Hc?(Yc=2,"number"===typeof Hc.constant?(ve=Hc.constant,be=Gd=Ye=0):(ve=0<Hc.constant.length?Hc.constant[0]:0,be=1<Hc.constant.length?Hc.constant[1]:0,Gd=2<Hc.constant.length?Hc.constant[2]:0,Ye=3<Hc.constant.length?Hc.constant[3]:0)):(hc=y(Hc.buffer)?ca.createStream(34962,
Hc.buffer):ca.getBuffer(Hc.buffer),Ae="type"in Hc?Xd[Hc.type]:hc.dtype,id=!!Hc.normalized,me=Hc.size|0,Qd=Hc.offset|0,bg=Hc.stride|0,Xc=Hc.divisor|0);Ed=$b.location;ed=wc[Ed];if(1===Yc){ed.buffer||F.enableVertexAttribArray(Ed);Ec=me||4;if(ed.type!==Ae||ed.size!==Ec||ed.buffer!==hc||ed.normalized!==id||ed.offset!==Qd||ed.stride!==bg)F.bindBuffer(34962,hc.buffer),F.vertexAttribPointer(Ed,Ec,Ae,id,bg,Qd),ed.type=Ae,ed.size=Ec,ed.buffer=hc,ed.normalized=id,ed.offset=Qd,ed.stride=bg;ed.divisor!==Xc&&(L.vertexAttribDivisorANGLE(Ed,
Xc),ed.divisor=Xc)}else if(ed.buffer&&(F.disableVertexAttribArray(Ed),ed.buffer=null),ed.x!==ve||ed.y!==be||ed.z!==Gd||ed.w!==Ye)F.vertexAttrib4f(Ed,ve,be,Gd,Ye),ed.x=ve,ed.y=be,ed.z=Gd,ed.w=Ye;od=G.call(this,M,c,0);jd=!1;$c=null;kd=0;Ad=!1;te=Cd=0;je=1;ue=0;de=5126;Yd=ne=$d=ce=0;y(od)?(jd=!0,$c=ca.createStream(34962,od),de=$c.dtype):($c=ca.getBuffer(od))?de=$c.dtype:"constant"in od?(je=2,"number"===typeof od.constant?($d=od.constant,ne=Yd=ce=0):($d=0<od.constant.length?od.constant[0]:0,ne=1<od.constant.length?
od.constant[1]:0,Yd=2<od.constant.length?od.constant[2]:0,ce=3<od.constant.length?od.constant[3]:0)):($c=y(od.buffer)?ca.createStream(34962,od.buffer):ca.getBuffer(od.buffer),de="type"in od?Xd[od.type]:$c.dtype,Ad=!!od.normalized,te=od.size|0,Cd=od.offset|0,ue=od.stride|0,kd=od.divisor|0);fe=ja.location;yc=wc[fe];if(1===je){yc.buffer||F.enableVertexAttribArray(fe);Vc=te||1;if(yc.type!==de||yc.size!==Vc||yc.buffer!==$c||yc.normalized!==Ad||yc.offset!==Cd||yc.stride!==ue)F.bindBuffer(34962,$c.buffer),
F.vertexAttribPointer(fe,Vc,de,Ad,ue,Cd),yc.type=de,yc.size=Vc,yc.buffer=$c,yc.normalized=Ad,yc.offset=Cd,yc.stride=ue;yc.divisor!==kd&&(L.vertexAttribDivisorANGLE(fe,kd),yc.divisor=kd)}else if(yc.buffer&&(F.disableVertexAttribArray(fe),yc.buffer=null),yc.x!==$d||yc.y!==ne||yc.z!==Yd||yc.w!==ce)F.vertexAttrib4f(fe,$d,ne,Yd,ce),yc.x=$d,yc.y=ne,yc.z=Yd,yc.w=ce;F.uniform1i(v.location,!1);F.uniform1f(dc.location,M.pixelRatio);oe=D.call(this,M,c,0);F.uniform2f(Ea.location,oe[0],oe[1]);he=c.scale;F.uniform2f(Ha.location,
he[0],he[1]);Fd=c.scaleFract;F.uniform2f(aa.location,Fd[0],Fd[1]);Id=c.translate;F.uniform2f(ga.location,Id[0],Id[1]);Md=c.translateFract;F.uniform2f(qa.location,Md[0],Md[1]);F.uniform1f(ea.location,c.opacity);F.uniform1i(Oa.location,w.bind());Nd=c.elements;ge=null;(ge=(Ee=y(Nd))?Gb.createStream(Nd):Gb.getElements(Nd))&&F.bindBuffer(34963,ge.buffer.buffer);we=c.offset;if(ke=c.count)Xe=Ca.instances,0<Xe?ge?L.drawElementsInstancedANGLE(0,ke,ge.type,we<<(ge.type-5121>>1),Xe):L.drawArraysInstancedANGLE(0,
we,ke,Xe):0>Xe&&(ge?F.drawElements(0,ke,ge.type,we<<(ge.type-5121>>1)):F.drawArrays(0,we,ke)),ka.dirty=!0,ha.setVAO(null),M.viewportWidth=t,M.viewportHeight=z,N&&(p.cpuTime+=performance.now()-O),W&&ca.destroyStream(R),sb&&ca.destroyStream(Wa),tb&&ca.destroyStream(gb),Aa&&ca.destroyStream(eb),fc&&ca.destroyStream(Da),ub&&ca.destroyStream(Db),wb&&ca.destroyStream(Mb),Sc&&ca.destroyStream(hc),jd&&ca.destroyStream($c),w.unbind(),Ee&&Gb.destroyStream(ge)},scope:function(a,b,f){var e,k,m,n,r,u,v,w,x,I,
H,F,D,A,G,K,L,N,Q,da,T,U,Z,aa,ha,ma,fa,la,ea,ja,ga,na,oa,za,ta,qa,sa,Ha,Ea,Na,Oa,yb,Ka,$a,wc,Ib,ib,Ma,nb,tb,gb,Pa,xb,Cb,kc,db,ud,$b,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ec,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,pc,uc,Va,Lb,fd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,dc,tc,lc,Lc,Tc,xd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,Jc,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,qd,Wc,td,Yc,Sd,re,se,ze,be,Gd,Ed,ed,Ec,od,jd,$c,kd,Ad,Cd,te,je,ue,de,ce,$d,ne,Yd,fe,yc,Vc,oe,he,Fd,Id,Md,Nd,ge,Ee,we,ke,Ue,Ne,Ke,pe,
Be,Fe,Ge,He,Ce,Hd,Rd,Wd,Zd,Ie,zd,Od,xe,Je,of,We,Oe,Le,Ve,Se,Pe,Qe,Pd,Vd,Re,ff,kf,cf,gf,hf,jf,pf,lf,qf,Af,Bf,Me,ye,mf,nf,Cf,Ff,zf,Df,Ef,uf,vf,tf,wf,xf,Hf,If,Jf,Kf,rf,Pf,Gf,sf,cg,Qf,Rf,qg,df,$e,Lf,Mf,dg,eg,fg,gg,hg,Uf,Sf,Vf,Wf,Xf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Nf,Of,jg,kg,lg,mg,ng,Yf,Tf,Zf,$f,ag,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;e=a.viewport;k=e.x|0;m=e.y|0;n="width"in e?e.width|0:M.framebufferWidth-k;r="height"in e?e.height|0:M.framebufferHeight-m;u=M.viewportWidth;M.viewportWidth=
n;v=M.viewportHeight;M.viewportHeight=r;w=Jd[0];Jd[0]=k;x=Jd[1];Jd[1]=m;I=Jd[2];Jd[2]=n;H=Jd[3];Jd[3]=r;F=ra[0];ra[0]=0;D=ra[1];ra[1]=0;A=ra[2];ra[2]=0;G=ra[3];ra[3]=1;K=ia.blend_enable;ia.blend_enable=!0;L=E[0];E[0]=770;N=E[1];E[1]=771;Q=E[2];E[2]=773;da=E[3];E[3]=1;T=ia.depth_enable;ia.depth_enable=!1;U=a.viewport;Z=U.x|0;aa=U.y|0;ha="width"in U?U.width|0:M.framebufferWidth-Z;ma="height"in U?U.height|0:M.framebufferHeight-aa;fa=qe[0];qe[0]=Z;la=qe[1];qe[1]=aa;ea=qe[2];qe[2]=ha;ja=qe[3];qe[3]=ma;
ga=ia.scissor_enable;ia.scissor_enable=!0;na=ia.stencil_enable;ia.stencil_enable=!1;if(oa=ka.profile)za=performance.now(),p.count++;ta=a.elements;qa=null;qa=(sa=y(ta))?Gb.createStream(ta):Gb.getElements(ta);Ha=Ca.elements;Ca.elements=qa;Ea=a.offset;Na=Ca.offset;Ca.offset=Ea;Oa=a.count;yb=Ca.count;Ca.count=Oa;Ka=Ca.primitive;Ca.primitive=0;$a=R[45];R[45]=!1;wc=a.markerTexture;Ib=R[48];R[48]=wc;ib=a.opacity;Ma=R[10];R[10]=ib;nb=C.call(this,M,a,f);tb=R[46];R[46]=nb;gb=R[47];R[47]=B;Pa=M.pixelRatio;xb=
R[34];R[34]=Pa;Cb=a.scale;kc=R[6];R[6]=Cb;db=a.scaleFract;ud=R[7];R[7]=db;$b=a.translate;cc=R[8];R[8]=$b;jb=a.translateFract;kb=R[9];R[9]=jb;ua=z.call(this,M,a,f);ob=!1;wa=null;Ua=0;bb=!1;eb=Aa=0;Ia=1;Bb=0;zb=5126;Za=Jb=oc=Ra=0;y(ua)?(ob=!0,wa=ca.createStream(34962,ua),zb=wa.dtype):(wa=ca.getBuffer(ua))?zb=wa.dtype:"constant"in ua?(Ia=2,"number"===typeof ua.constant?(oc=ua.constant,Jb=Za=Ra=0):(oc=0<ua.constant.length?ua.constant[0]:0,Jb=1<ua.constant.length?ua.constant[1]:0,Za=2<ua.constant.length?
ua.constant[2]:0,Ra=3<ua.constant.length?ua.constant[3]:0)):(wa=y(ua.buffer)?ca.createStream(34962,ua.buffer):ca.getBuffer(ua.buffer),zb="type"in ua?Xd[ua.type]:wa.dtype,bb=!!ua.normalized,eb=ua.size|0,Aa=ua.offset|0,Bb=ua.stride|0,Ua=ua.divisor|0);Tb=J.buffer;J.buffer=wa;xa=J.divisor;J.divisor=Ua;ec=J.normalized;J.normalized=bb;Ja=J.offset;J.offset=Aa;Nb=J.size;J.size=eb;fb=J.state;J.state=Ia;hb=J.stride;J.stride=Bb;ya=J.type;J.type=zb;fc=J.w;J.w=Ra;Da=J.x;J.x=oc;pb=J.y;J.y=Jb;qb=J.z;J.z=Za;Xa=P.call(this,
M,a,f);Ya=!1;nc=null;pc=0;uc=!1;Lb=Va=0;fd=1;Fa=0;xc=5126;ub=lb=Ba=Qa=0;y(Xa)?(Ya=!0,nc=ca.createStream(34962,Xa),xc=nc.dtype):(nc=ca.getBuffer(Xa))?xc=nc.dtype:"constant"in Xa?(fd=2,"number"===typeof Xa.constant?(Ba=Xa.constant,lb=ub=Qa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,lb=1<Xa.constant.length?Xa.constant[1]:0,ub=2<Xa.constant.length?Xa.constant[2]:0,Qa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=y(Xa.buffer)?ca.createStream(34962,Xa.buffer):ca.getBuffer(Xa.buffer),xc="type"in Xa?Xd[Xa.type]:
nc.dtype,uc=!!Xa.normalized,Lb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,pc=Xa.divisor|0);Db=W.buffer;W.buffer=nc;rb=W.divisor;W.divisor=pc;vc=W.normalized;W.normalized=uc;vb=W.offset;W.offset=Va;dc=W.size;W.size=Lb;tc=W.state;W.state=fd;lc=W.stride;W.stride=Fa;Lc=W.type;W.type=xc;Tc=W.w;W.w=Qa;xd=W.x;W.x=Ba;Ub=W.y;W.y=lb;bc=W.z;W.z=ub;Ob=S.call(this,M,a,f);Ga=!1;Yb=null;mb=0;wb=!1;Pb=Mb=0;gc=1;ic=0;Qc=5126;Mc=Dc=Cc=Bc=0;y(Ob)?(Ga=!0,Yb=ca.createStream(34962,Ob),Qc=Yb.dtype):(Yb=ca.getBuffer(Ob))?Qc=
Yb.dtype:"constant"in Ob?(gc=2,"number"===typeof Ob.constant?(Cc=Ob.constant,Dc=Mc=Bc=0):(Cc=0<Ob.constant.length?Ob.constant[0]:0,Dc=1<Ob.constant.length?Ob.constant[1]:0,Mc=2<Ob.constant.length?Ob.constant[2]:0,Bc=3<Ob.constant.length?Ob.constant[3]:0)):(Yb=y(Ob.buffer)?ca.createStream(34962,Ob.buffer):ca.getBuffer(Ob.buffer),Qc="type"in Ob?Xd[Ob.type]:Yb.dtype,wb=!!Ob.normalized,Pb=Ob.size|0,Mb=Ob.offset|0,ic=Ob.stride|0,mb=Ob.divisor|0);Jc=t.buffer;t.buffer=Yb;Rc=t.divisor;t.divisor=mb;Nc=t.normalized;
t.normalized=wb;Kb=t.offset;t.offset=Mb;Fb=t.size;t.size=Pb;Oc=t.state;t.state=gc;Hc=t.stride;t.stride=ic;Sc=t.type;t.type=Qc;hc=t.w;t.w=Bc;Xc=t.x;t.x=Cc;qd=t.y;t.y=Dc;Wc=t.z;t.z=Mc;td=h.call(this,M,a,f);Yc=!1;Sd=null;re=0;se=!1;be=ze=0;Gd=1;Ed=0;ed=5126;$c=jd=od=Ec=0;y(td)?(Yc=!0,Sd=ca.createStream(34962,td),ed=Sd.dtype):(Sd=ca.getBuffer(td))?ed=Sd.dtype:"constant"in td?(Gd=2,"number"===typeof td.constant?(od=td.constant,jd=$c=Ec=0):(od=0<td.constant.length?td.constant[0]:0,jd=1<td.constant.length?
td.constant[1]:0,$c=2<td.constant.length?td.constant[2]:0,Ec=3<td.constant.length?td.constant[3]:0)):(Sd=y(td.buffer)?ca.createStream(34962,td.buffer):ca.getBuffer(td.buffer),ed="type"in td?Xd[td.type]:Sd.dtype,se=!!td.normalized,be=td.size|0,ze=td.offset|0,Ed=td.stride|0,re=td.divisor|0);kd=g.buffer;g.buffer=Sd;Ad=g.divisor;g.divisor=re;Cd=g.normalized;g.normalized=se;te=g.offset;g.offset=ze;je=g.size;g.size=be;ue=g.state;g.state=Gd;de=g.stride;g.stride=Ed;ce=g.type;g.type=ed;$d=g.w;g.w=Ec;ne=g.x;
g.x=od;Yd=g.y;g.y=jd;fe=g.z;g.z=$c;yc=l.call(this,M,a,f);Vc=!1;oe=null;he=0;Fd=!1;Md=Id=0;Nd=1;ge=0;Ee=5126;Ne=Ue=ke=we=0;y(yc)?(Vc=!0,oe=ca.createStream(34962,yc),Ee=oe.dtype):(oe=ca.getBuffer(yc))?Ee=oe.dtype:"constant"in yc?(Nd=2,"number"===typeof yc.constant?(ke=yc.constant,Ue=Ne=we=0):(ke=0<yc.constant.length?yc.constant[0]:0,Ue=1<yc.constant.length?yc.constant[1]:0,Ne=2<yc.constant.length?yc.constant[2]:0,we=3<yc.constant.length?yc.constant[3]:0)):(oe=y(yc.buffer)?ca.createStream(34962,yc.buffer):
ca.getBuffer(yc.buffer),Ee="type"in yc?Xd[yc.type]:oe.dtype,Fd=!!yc.normalized,Md=yc.size|0,Id=yc.offset|0,ge=yc.stride|0,he=yc.divisor|0);Ke=V.buffer;V.buffer=oe;pe=V.divisor;V.divisor=he;Be=V.normalized;V.normalized=Fd;Fe=V.offset;V.offset=Id;Ge=V.size;V.size=Md;He=V.state;V.state=Nd;Ce=V.stride;V.stride=ge;Hd=V.type;V.type=Ee;Rd=V.w;V.w=we;Wd=V.x;V.x=ke;Zd=V.y;V.y=Ue;Ie=V.z;V.z=Ne;zd=X.call(this,M,a,f);Od=!1;xe=null;Je=0;of=!1;Oe=We=0;Le=1;Ve=0;Se=5126;Vd=Pd=Qe=Pe=0;y(zd)?(Od=!0,xe=ca.createStream(34962,
zd),Se=xe.dtype):(xe=ca.getBuffer(zd))?Se=xe.dtype:"constant"in zd?(Le=2,"number"===typeof zd.constant?(Qe=zd.constant,Pd=Vd=Pe=0):(Qe=0<zd.constant.length?zd.constant[0]:0,Pd=1<zd.constant.length?zd.constant[1]:0,Vd=2<zd.constant.length?zd.constant[2]:0,Pe=3<zd.constant.length?zd.constant[3]:0)):(xe=y(zd.buffer)?ca.createStream(34962,zd.buffer):ca.getBuffer(zd.buffer),Se="type"in zd?Xd[zd.type]:xe.dtype,of=!!zd.normalized,Oe=zd.size|0,We=zd.offset|0,Ve=zd.stride|0,Je=zd.divisor|0);Re=q.buffer;q.buffer=
xe;ff=q.divisor;q.divisor=Je;kf=q.normalized;q.normalized=of;cf=q.offset;q.offset=We;gf=q.size;q.size=Oe;hf=q.state;q.state=Le;jf=q.stride;q.stride=Ve;pf=q.type;q.type=Se;lf=q.w;q.w=Pe;qf=q.x;q.x=Qe;Af=q.y;q.y=Pd;Bf=q.z;q.z=Vd;Me=pa.call(this,M,a,f);ye=!1;mf=null;nf=0;Cf=!1;zf=Ff=0;Df=1;Ef=0;uf=5126;xf=wf=tf=vf=0;y(Me)?(ye=!0,mf=ca.createStream(34962,Me),uf=mf.dtype):(mf=ca.getBuffer(Me))?uf=mf.dtype:"constant"in Me?(Df=2,"number"===typeof Me.constant?(tf=Me.constant,wf=xf=vf=0):(tf=0<Me.constant.length?
Me.constant[0]:0,wf=1<Me.constant.length?Me.constant[1]:0,xf=2<Me.constant.length?Me.constant[2]:0,vf=3<Me.constant.length?Me.constant[3]:0)):(mf=y(Me.buffer)?ca.createStream(34962,Me.buffer):ca.getBuffer(Me.buffer),uf="type"in Me?Xd[Me.type]:mf.dtype,Cf=!!Me.normalized,zf=Me.size|0,Ff=Me.offset|0,Ef=Me.stride|0,nf=Me.divisor|0);Hf=O.buffer;O.buffer=mf;If=O.divisor;O.divisor=nf;Jf=O.normalized;O.normalized=Cf;Kf=O.offset;O.offset=Ff;rf=O.size;O.size=zf;Pf=O.state;O.state=Df;Gf=O.stride;O.stride=Ef;
sf=O.type;O.type=uf;cg=O.w;O.w=vf;Qf=O.x;O.x=tf;Rf=O.y;O.y=wf;qg=O.z;O.z=xf;df=Y.call(this,M,a,f);$e=!1;Lf=null;Mf=0;dg=!1;fg=eg=0;gg=1;hg=0;Uf=5126;Xf=Wf=Vf=Sf=0;y(df)?($e=!0,Lf=ca.createStream(34962,df),Uf=Lf.dtype):(Lf=ca.getBuffer(df))?Uf=Lf.dtype:"constant"in df?(gg=2,"number"===typeof df.constant?(Vf=df.constant,Wf=Xf=Sf=0):(Vf=0<df.constant.length?df.constant[0]:0,Wf=1<df.constant.length?df.constant[1]:0,Xf=2<df.constant.length?df.constant[2]:0,Sf=3<df.constant.length?df.constant[3]:0)):(Lf=
y(df.buffer)?ca.createStream(34962,df.buffer):ca.getBuffer(df.buffer),Uf="type"in df?Xd[df.type]:Lf.dtype,dg=!!df.normalized,fg=df.size|0,eg=df.offset|0,hg=df.stride|0,Mf=df.divisor|0);ig=c.buffer;c.buffer=Lf;rg=c.divisor;c.divisor=Mf;sg=c.normalized;c.normalized=dg;tg=c.offset;c.offset=eg;ug=c.size;c.size=fg;vg=c.state;c.state=gg;wg=c.stride;c.stride=hg;xg=c.type;c.type=Uf;yg=c.w;c.w=Sf;zg=c.x;c.x=Vf;Ag=c.y;c.y=Wf;Bg=c.z;c.z=Xf;ef=d.call(this,M,a,f);af=!1;Nf=null;Of=0;jg=!1;lg=kg=0;mg=1;ng=0;Yf=
5126;ag=$f=Zf=Tf=0;y(ef)?(af=!0,Nf=ca.createStream(34962,ef),Yf=Nf.dtype):(Nf=ca.getBuffer(ef))?Yf=Nf.dtype:"constant"in ef?(mg=2,"number"===typeof ef.constant?(Zf=ef.constant,$f=ag=Tf=0):(Zf=0<ef.constant.length?ef.constant[0]:0,$f=1<ef.constant.length?ef.constant[1]:0,ag=2<ef.constant.length?ef.constant[2]:0,Tf=3<ef.constant.length?ef.constant[3]:0)):(Nf=y(ef.buffer)?ca.createStream(34962,ef.buffer):ca.getBuffer(ef.buffer),Yf="type"in ef?Xd[ef.type]:Nf.dtype,jg=!!ef.normalized,lg=ef.size|0,kg=ef.offset|
0,ng=ef.stride|0,Of=ef.divisor|0);og=ba.buffer;ba.buffer=Nf;Cg=ba.divisor;ba.divisor=Of;Dg=ba.normalized;ba.normalized=jg;Eg=ba.offset;ba.offset=kg;Fg=ba.size;ba.size=lg;Gg=ba.state;ba.state=mg;Hg=ba.stride;ba.stride=ng;Ig=ba.type;ba.type=Yf;Jg=ba.w;ba.w=Tf;Kg=ba.x;ba.x=Zf;Lg=ba.y;ba.y=$f;Mg=ba.z;ba.z=ag;Ng=va.vert;va.vert=59;Og=va.frag;va.frag=58;ka.dirty=!0;b(M,a,f);M.viewportWidth=u;M.viewportHeight=v;Jd[0]=w;Jd[1]=x;Jd[2]=I;Jd[3]=H;ra[0]=F;ra[1]=D;ra[2]=A;ra[3]=G;ia.blend_enable=K;E[0]=L;E[1]=
N;E[2]=Q;E[3]=da;ia.depth_enable=T;qe[0]=fa;qe[1]=la;qe[2]=ea;qe[3]=ja;ia.scissor_enable=ga;ia.stencil_enable=na;oa&&(p.cpuTime+=performance.now()-za);sa&&Gb.destroyStream(qa);Ca.elements=Ha;Ca.offset=Na;Ca.count=yb;Ca.primitive=Ka;R[45]=$a;R[48]=Ib;R[10]=Ma;R[46]=tb;R[47]=gb;R[34]=xb;R[6]=kc;R[7]=ud;R[8]=cc;R[9]=kb;ob&&ca.destroyStream(wa);J.buffer=Tb;J.divisor=xa;J.normalized=ec;J.offset=Ja;J.size=Nb;J.state=fb;J.stride=hb;J.type=ya;J.w=fc;J.x=Da;J.y=pb;J.z=qb;Ya&&ca.destroyStream(nc);W.buffer=
Db;W.divisor=rb;W.normalized=vc;W.offset=vb;W.size=dc;W.state=tc;W.stride=lc;W.type=Lc;W.w=Tc;W.x=xd;W.y=Ub;W.z=bc;Ga&&ca.destroyStream(Yb);t.buffer=Jc;t.divisor=Rc;t.normalized=Nc;t.offset=Kb;t.size=Fb;t.state=Oc;t.stride=Hc;t.type=Sc;t.w=hc;t.x=Xc;t.y=qd;t.z=Wc;Yc&&ca.destroyStream(Sd);g.buffer=kd;g.divisor=Ad;g.normalized=Cd;g.offset=te;g.size=je;g.state=ue;g.stride=de;g.type=ce;g.w=$d;g.x=ne;g.y=Yd;g.z=fe;Vc&&ca.destroyStream(oe);V.buffer=Ke;V.divisor=pe;V.normalized=Be;V.offset=Fe;V.size=Ge;
V.state=He;V.stride=Ce;V.type=Hd;V.w=Rd;V.x=Wd;V.y=Zd;V.z=Ie;Od&&ca.destroyStream(xe);q.buffer=Re;q.divisor=ff;q.normalized=kf;q.offset=cf;q.size=gf;q.state=hf;q.stride=jf;q.type=pf;q.w=lf;q.x=qf;q.y=Af;q.z=Bf;ye&&ca.destroyStream(mf);O.buffer=Hf;O.divisor=If;O.normalized=Jf;O.offset=Kf;O.size=rf;O.state=Pf;O.stride=Gf;O.type=sf;O.w=cg;O.x=Qf;O.y=Rf;O.z=qg;$e&&ca.destroyStream(Lf);c.buffer=ig;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;
c.z=Bg;af&&ca.destroyStream(Nf);ba.buffer=og;ba.divisor=Cg;ba.normalized=Dg;ba.offset=Eg;ba.size=Fg;ba.state=Gg;ba.stride=Hg;ba.type=Ig;ba.w=Jg;ba.x=Kg;ba.y=Lg;ba.z=Mg;va.vert=Ng;va.frag=Og;ka.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(e,p,n,I,f,b,r,a,u,A,Q,G,D,w,C,B,z,J,P,W,S,t,h,g,l,V,X,q,pa,O,Y,c,d,ba,oa,Ka,xb,Cb,na,Na){var Z,K,N,U,sa,L,$b,$a,T,v,ja,ea,Ea,Oa,dc,Ha,aa,ib,ga,qa,
ec,pc,lc,ud,wc,ca,M,ka,Ca,Gb,Jc,Wc,F,y,ia,va,R,ha,ra,H,x;Z=e.attributes;K=e.buffer;N=e.context;U=e.current;sa=e.draw;L=e.elements;$b=e.extensions;$a=e.framebuffer;T=e.gl;v=e.isBufferArgs;ja=e.next;ea=e.shader;Ea=e.uniforms;Oa=e.vao;dc=ja.blend_color;Ha=U.blend_color;aa=ja.blend_equation;ib=U.blend_equation;ga=ja.blend_func;qa=U.blend_func;ec=ja.colorMask;pc=U.colorMask;lc=ja.depth_range;ud=U.depth_range;wc=ja.polygonOffset_offset;ca=U.polygonOffset_offset;M=ja.sample_coverage;ka=U.sample_coverage;
Ca=ja.scissor_box;Gb=U.scissor_box;Jc=ja.stencil_func;Wc=U.stencil_func;F=ja.stencil_opBack;y=U.stencil_opBack;ia=ja.stencil_opFront;va=U.stencil_opFront;R=ja.viewport;ha=U.viewport;ra={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};H={offset:4,stride:8};x={offset:0,stride:8};return{batch:function(a,b){var f,e,k,n,r,m,u,w,z,I,C,B,D;f=$a.next;f!==$a.cur&&(f?T.bindFramebuffer(36160,f.framebuffer):T.bindFramebuffer(36160,null),$a.cur=f);if(U.dirty){var A,
G,R,Q,ma,ea,ga,Ea,dc,yf,bf,yd,De,Td,Ud,ie,le,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,ac,Zc,Dd,md,Ac,Vb;A=ja.dither;A!==U.dither&&(A?T.enable(3024):T.disable(3024),U.dither=A);G=aa[0];R=aa[1];if(G!==ib[0]||R!==ib[1])T.blendEquationSeparate(G,R),ib[0]=G,ib[1]=R;Q=ja.depth_func;Q!==U.depth_func&&(T.depthFunc(Q),U.depth_func=Q);ma=lc[0];ea=lc[1];if(ma!==ud[0]||ea!==ud[1])T.depthRange(ma,ea),ud[0]=ma,ud[1]=ea;ga=ja.depth_mask;ga!==U.depth_mask&&(T.depthMask(ga),U.depth_mask=ga);Ea=ec[0];dc=ec[1];
yf=ec[2];bf=ec[3];if(Ea!==pc[0]||dc!==pc[1]||yf!==pc[2]||bf!==pc[3])T.colorMask(Ea,dc,yf,bf),pc[0]=Ea,pc[1]=dc,pc[2]=yf,pc[3]=bf;yd=ja.cull_enable;yd!==U.cull_enable&&(yd?T.enable(2884):T.disable(2884),U.cull_enable=yd);De=ja.cull_face;De!==U.cull_face&&(T.cullFace(De),U.cull_face=De);Td=ja.frontFace;Td!==U.frontFace&&(T.frontFace(Td),U.frontFace=Td);Ud=ja.lineWidth;Ud!==U.lineWidth&&(T.lineWidth(Ud),U.lineWidth=Ud);ie=ja.polygonOffset_enable;ie!==U.polygonOffset_enable&&(ie?T.enable(32823):T.disable(32823),
U.polygonOffset_enable=ie);le=wc[0];rd=wc[1];if(le!==ca[0]||rd!==ca[1])T.polygonOffset(le,rd),ca[0]=le,ca[1]=rd;ld=ja.sample_alpha;ld!==U.sample_alpha&&(ld?T.enable(32926):T.disable(32926),U.sample_alpha=ld);wd=ja.sample_enable;wd!==U.sample_enable&&(wd?T.enable(32928):T.disable(32928),U.sample_enable=wd);pd=M[0];dd=M[1];if(pd!==ka[0]||dd!==ka[1])T.sampleCoverage(pd,dd),ka[0]=pd,ka[1]=dd;zc=ja.stencil_mask;zc!==U.stencil_mask&&(T.stencilMask(zc),U.stencil_mask=zc);sd=Jc[0];gd=Jc[1];Kc=Jc[2];if(sd!==
Wc[0]||gd!==Wc[1]||Kc!==Wc[2])T.stencilFunc(sd,gd,Kc),Wc[0]=sd,Wc[1]=gd,Wc[2]=Kc;sc=ia[0];ab=ia[1];jc=ia[2];Eb=ia[3];if(sc!==va[0]||ab!==va[1]||jc!==va[2]||Eb!==va[3])T.stencilOpSeparate(sc,ab,jc,Eb),va[0]=sc,va[1]=ab,va[2]=jc,va[3]=Eb;rc=F[0];Ta=F[1];Ic=F[2];ac=F[3];if(rc!==y[0]||Ta!==y[1]||Ic!==y[2]||ac!==y[3])T.stencilOpSeparate(rc,Ta,Ic,ac),y[0]=rc,y[1]=Ta,y[2]=Ic,y[3]=ac;Zc=ja.scissor_enable;Zc!==U.scissor_enable&&(Zc?T.enable(3089):T.disable(3089),U.scissor_enable=Zc);Dd=Ca[0];md=Ca[1];Ac=Ca[2];
Vb=Ca[3];if(Dd!==Gb[0]||md!==Gb[1]||Ac!==Gb[2]||Vb!==Gb[3])T.scissor(Dd,md,Ac,Vb),Gb[0]=Dd,Gb[1]=md,Gb[2]=Ac,Gb[3]=Vb}e=this.viewport;k=e.x|0;n=e.y|0;r="width"in e?e.width|0:N.framebufferWidth-k;m="height"in e?e.height|0:N.framebufferHeight-n;u=N.viewportWidth;N.viewportWidth=r;w=N.viewportHeight;N.viewportHeight=m;T.viewport(k,n,r,m);ha[0]=k;ha[1]=n;ha[2]=r;ha[3]=m;T.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;T.enable(3042);U.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);qa[0]=770;
qa[1]=771;qa[2]=773;qa[3]=1;T.disable(2929);U.depth_enable=!1;T.disable(2960);U.stencil_enable=!1;if(z=U.profile)I=performance.now(),p.count+=b;T.useProgram(J.program);C=$b.angle_instanced_arrays;var Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb;Oa.setVAO(null);x.buffer=this.sizeBuffer;Fc=!1;Pc=null;La=0;sb=!1;ta=Wa=0;vd=1;Ab=0;Sa=5126;
Qb=Wb=cb=Hb=0;v(x)?(Fc=!0,Pc=K.createStream(34962,x),Sa=Pc.dtype):(Pc=K.getBuffer(x))?Sa=Pc.dtype:"constant"in x?(vd=2,"number"===typeof x.constant?(cb=x.constant,Wb=Qb=Hb=0):(cb=0<x.constant.length?x.constant[0]:0,Wb=1<x.constant.length?x.constant[1]:0,Qb=2<x.constant.length?x.constant[2]:0,Hb=3<x.constant.length?x.constant[3]:0)):(Pc=v(x.buffer)?K.createStream(34962,x.buffer):K.getBuffer(x.buffer),Sa="type"in x?ra[x.type]:Pc.dtype,sb=!!x.normalized,ta=x.size|0,Wa=x.offset|0,Ab=x.stride|0,La=x.divisor|
0);ee=Na.location;Zb=Z[ee];if(1===vd){Zb.buffer||T.enableVertexAttribArray(ee);Rb=ta||1;if(Zb.type!==Sa||Zb.size!==Rb||Zb.buffer!==Pc||Zb.normalized!==sb||Zb.offset!==Wa||Zb.stride!==Ab)T.bindBuffer(34962,Pc.buffer),T.vertexAttribPointer(ee,Rb,Sa,sb,Ab,Wa),Zb.type=Sa,Zb.size=Rb,Zb.buffer=Pc,Zb.normalized=sb,Zb.offset=Wa,Zb.stride=Ab;Zb.divisor!==La&&(C.vertexAttribDivisorANGLE(ee,La),Zb.divisor=La)}else if(Zb.buffer&&(T.disableVertexAttribArray(ee),Zb.buffer=null),Zb.x!==cb||Zb.y!==Wb||Zb.z!==Qb||
Zb.w!==Hb)T.vertexAttrib4f(ee,cb,Wb,Qb,Hb),Zb.x=cb,Zb.y=Wb,Zb.z=Qb,Zb.w=Hb;H.buffer=this.sizeBuffer;Bd=!1;Sb=null;Ma=0;nb=!1;gb=tb=0;Pa=1;qc=0;Xb=5126;Gc=mc=db=Uc=0;v(H)?(Bd=!0,Sb=K.createStream(34962,H),Xb=Sb.dtype):(Sb=K.getBuffer(H))?Xb=Sb.dtype:"constant"in H?(Pa=2,"number"===typeof H.constant?(db=H.constant,mc=Gc=Uc=0):(db=0<H.constant.length?H.constant[0]:0,mc=1<H.constant.length?H.constant[1]:0,Gc=2<H.constant.length?H.constant[2]:0,Uc=3<H.constant.length?H.constant[3]:0)):(Sb=v(H.buffer)?
K.createStream(34962,H.buffer):K.getBuffer(H.buffer),Xb="type"in H?ra[H.type]:Sb.dtype,nb=!!H.normalized,gb=H.size|0,tb=H.offset|0,qc=H.stride|0,Ma=H.divisor|0);cc=O.location;jb=Z[cc];if(1===Pa){jb.buffer||T.enableVertexAttribArray(cc);kb=gb||1;if(jb.type!==Xb||jb.size!==kb||jb.buffer!==Sb||jb.normalized!==nb||jb.offset!==tb||jb.stride!==qc)T.bindBuffer(34962,Sb.buffer),T.vertexAttribPointer(cc,kb,Xb,nb,qc,tb),jb.type=Xb,jb.size=kb,jb.buffer=Sb,jb.normalized=nb,jb.offset=tb,jb.stride=qc;jb.divisor!==
Ma&&(C.vertexAttribDivisorANGLE(cc,Ma),jb.divisor=Ma)}else if(jb.buffer&&(T.disableVertexAttribArray(cc),jb.buffer=null),jb.x!==db||jb.y!==mc||jb.z!==Gc||jb.w!==Uc)T.vertexAttrib4f(cc,db,mc,Gc,Uc),jb.x=db,jb.y=mc,jb.z=Gc,jb.w=Uc;ua=this.charBuffer;ob=!1;wa=null;Ua=0;bb=!1;eb=Aa=0;Ia=1;Bb=0;zb=5126;Za=Jb=oc=Ra=0;v(ua)?(ob=!0,wa=K.createStream(34962,ua),zb=wa.dtype):(wa=K.getBuffer(ua))?zb=wa.dtype:"constant"in ua?(Ia=2,"number"===typeof ua.constant?(oc=ua.constant,Jb=Za=Ra=0):(oc=0<ua.constant.length?
ua.constant[0]:0,Jb=1<ua.constant.length?ua.constant[1]:0,Za=2<ua.constant.length?ua.constant[2]:0,Ra=3<ua.constant.length?ua.constant[3]:0)):(wa=v(ua.buffer)?K.createStream(34962,ua.buffer):K.getBuffer(ua.buffer),zb="type"in ua?ra[ua.type]:wa.dtype,bb=!!ua.normalized,eb=ua.size|0,Aa=ua.offset|0,Bb=ua.stride|0,Ua=ua.divisor|0);Tb=pa.location;xa=Z[Tb];if(1===Ia){xa.buffer||T.enableVertexAttribArray(Tb);ae=eb||1;if(xa.type!==zb||xa.size!==ae||xa.buffer!==wa||xa.normalized!==bb||xa.offset!==Aa||xa.stride!==
Bb)T.bindBuffer(34962,wa.buffer),T.vertexAttribPointer(Tb,ae,zb,bb,Bb,Aa),xa.type=zb,xa.size=ae,xa.buffer=wa,xa.normalized=bb,xa.offset=Aa,xa.stride=Bb;xa.divisor!==Ua&&(C.vertexAttribDivisorANGLE(Tb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(T.disableVertexAttribArray(Tb),xa.buffer=null),xa.x!==oc||xa.y!==Jb||xa.z!==Za||xa.w!==Ra)T.vertexAttrib4f(Tb,oc,Jb,Za,Ra),xa.x=oc,xa.y=Jb,xa.z=Za,xa.w=Ra;Ja=this.position;Nb=!1;fb=null;hb=0;ya=!1;Da=fc=0;pb=1;qb=0;Xa=5126;uc=ad=nc=Ya=0;v(Ja)?(Nb=!0,fb=K.createStream(34962,
Ja),Xa=fb.dtype):(fb=K.getBuffer(Ja))?Xa=fb.dtype:"constant"in Ja?(pb=2,"number"===typeof Ja.constant?(nc=Ja.constant,ad=uc=Ya=0):(nc=0<Ja.constant.length?Ja.constant[0]:0,ad=1<Ja.constant.length?Ja.constant[1]:0,uc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(fb=v(Ja.buffer)?K.createStream(34962,Ja.buffer):K.getBuffer(Ja.buffer),Xa="type"in Ja?ra[Ja.type]:fb.dtype,ya=!!Ja.normalized,Da=Ja.size|0,fc=Ja.offset|0,qb=Ja.stride|0,hb=Ja.divisor|0);Va=oa.location;Lb=
Z[Va];if(1===pb){Lb.buffer||T.enableVertexAttribArray(Va);bd=Da||2;if(Lb.type!==Xa||Lb.size!==bd||Lb.buffer!==fb||Lb.normalized!==ya||Lb.offset!==fc||Lb.stride!==qb)T.bindBuffer(34962,fb.buffer),T.vertexAttribPointer(Va,bd,Xa,ya,qb,fc),Lb.type=Xa,Lb.size=bd,Lb.buffer=fb,Lb.normalized=ya,Lb.offset=fc,Lb.stride=qb;Lb.divisor!==hb&&(C.vertexAttribDivisorANGLE(Va,hb),Lb.divisor=hb)}else if(Lb.buffer&&(T.disableVertexAttribArray(Va),Lb.buffer=null),Lb.x!==nc||Lb.y!==ad||Lb.z!==uc||Lb.w!==Ya)T.vertexAttrib4f(Va,
nc,ad,uc,Ya),Lb.x=nc,Lb.y=ad,Lb.z=uc,Lb.w=Ya;Fa=this.viewportArray;T.uniform4f(na.location,Fa[0],Fa[1],Fa[2],Fa[3]);xc=this.scale;T.uniform2f(xb.location,xc[0],xc[1]);Qa=this.translate;T.uniform2f(Cb.location,Qa[0],Qa[1]);(Ba=sa.elements)?T.bindBuffer(34963,Ba.buffer.buffer):Oa.currentVAO&&(Ba=L.getElements(Oa.currentVAO.elements))&&T.bindBuffer(34963,Ba.buffer.buffer);lb=sa.instances;for(B=0;B<b;++B){D=a[B];var ub,Db,rb,vc,vb,Ld,tc,Te,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,
Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc,id;ub=P.call(this,N,D,B);B&&Db===ub||(Db=ub,T.uniform1f(Y.location,ub));rb=W.call(this,N,D,B);B&&vc===rb||(vc=rb,T.uniform1f(d.location,rb));vb=D.align;B&&Ld===vb||(Ld=vb,T.uniform1f(g.location,vb));tc=D.baseline;B&&Te===tc||(Te=tc,T.uniform1f(q.location,tc));Lc=D.color;nd=Lc[0];Ub=Lc[1];Ob=Lc[2];Yb=Lc[3];B&&hd===nd&&bc===Ub&&Ga===Ob&&mb===Yb||(hd=nd,bc=Ub,Ga=Ob,mb=Yb,T.uniform4f(c.location,nd,Ub,Ob,Yb));wb=S.call(this,N,D,B);Mb=wb[0];gc=wb[1];B&&Pb===Mb&&ic===gc||(Pb=Mb,ic=
gc,T.uniform2f(X.location,Mb,gc));Qc=t.call(this,N,D,B);Bc=Qc[0];Dc=Qc[1];B&&Cc===Bc&&Mc===Dc||(Cc=Bc,Mc=Dc,T.uniform2f(V.location,Bc,Dc));cd=D.positionOffset;Rc=cd[0];Kb=cd[1];B&&Nc===Rc&&Fb===Kb||(Nc=Rc,Fb=Kb,T.uniform2f(Ka.location,Rc,Kb));Oc=D.opacity;B&&Hc===Oc||(Hc=Oc,T.uniform1f(ba.location,Oc));(Sc=h.call(this,N,D,B))&&"framebuffer"===Sc._reglType&&(Sc=Sc.color[0]);hc=Sc._texture;T.uniform1i(l.location,hc.bind());Xc=D.offset;if(id=D.count)0<lb?Ba?C.drawElementsInstancedANGLE(0,id,Ba.type,
Xc<<(Ba.type-5121>>1),lb):C.drawArraysInstancedANGLE(0,Xc,id,lb):0>lb&&(Ba?T.drawElements(0,id,Ba.type,Xc<<(Ba.type-5121>>1)):T.drawArrays(0,Xc,id)),hc.unbind()}Fc&&K.destroyStream(Pc);Bd&&K.destroyStream(Sb);ob&&K.destroyStream(wa);Nb&&K.destroyStream(fb);U.dirty=!0;Oa.setVAO(null);N.viewportWidth=u;N.viewportHeight=w;z&&(p.cpuTime+=performance.now()-I)},draw:function(e){var h,t,u,k,w,z,m,B,C,D,A,P,G,J,R,Q,W,S,ma,ea,ga,Ea,dc,Qd,bf,yd,De,Td,Ud,ie,le,rd,ld,wd,pd,dd,zc,sd,gd,Kc,sc,ab,jc,Eb,rc,Ta,Ic,
ac,Zc,Dd,md,Ac,Vb,Fc,Pc,La,sb,Wa,ta,vd,Ab,Sa,Hb,cb,Wb,Qb,ee,Zb,Rb,Bd,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb;h=$a.next;h!==$a.cur&&(h?T.bindFramebuffer(36160,h.framebuffer):T.bindFramebuffer(36160,null),$a.cur=h);if(U.dirty){var Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,ae,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc;Ia=ja.dither;Ia!==U.dither&&(Ia?T.enable(3024):T.disable(3024),U.dither=Ia);Bb=aa[0];zb=aa[1];if(Bb!==ib[0]||zb!==ib[1])T.blendEquationSeparate(Bb,
zb),ib[0]=Bb,ib[1]=zb;Ra=ja.depth_func;Ra!==U.depth_func&&(T.depthFunc(Ra),U.depth_func=Ra);oc=lc[0];Jb=lc[1];if(oc!==ud[0]||Jb!==ud[1])T.depthRange(oc,Jb),ud[0]=oc,ud[1]=Jb;Za=ja.depth_mask;Za!==U.depth_mask&&(T.depthMask(Za),U.depth_mask=Za);Tb=ec[0];xa=ec[1];ae=ec[2];Ja=ec[3];if(Tb!==pc[0]||xa!==pc[1]||ae!==pc[2]||Ja!==pc[3])T.colorMask(Tb,xa,ae,Ja),pc[0]=Tb,pc[1]=xa,pc[2]=ae,pc[3]=Ja;Nb=ja.cull_enable;Nb!==U.cull_enable&&(Nb?T.enable(2884):T.disable(2884),U.cull_enable=Nb);fb=ja.cull_face;fb!==
U.cull_face&&(T.cullFace(fb),U.cull_face=fb);hb=ja.frontFace;hb!==U.frontFace&&(T.frontFace(hb),U.frontFace=hb);ya=ja.lineWidth;ya!==U.lineWidth&&(T.lineWidth(ya),U.lineWidth=ya);fc=ja.polygonOffset_enable;fc!==U.polygonOffset_enable&&(fc?T.enable(32823):T.disable(32823),U.polygonOffset_enable=fc);Da=wc[0];pb=wc[1];if(Da!==ca[0]||pb!==ca[1])T.polygonOffset(Da,pb),ca[0]=Da,ca[1]=pb;qb=ja.sample_alpha;qb!==U.sample_alpha&&(qb?T.enable(32926):T.disable(32926),U.sample_alpha=qb);Xa=ja.sample_enable;Xa!==
U.sample_enable&&(Xa?T.enable(32928):T.disable(32928),U.sample_enable=Xa);Ya=M[0];nc=M[1];if(Ya!==ka[0]||nc!==ka[1])T.sampleCoverage(Ya,nc),ka[0]=Ya,ka[1]=nc;ad=ja.stencil_mask;ad!==U.stencil_mask&&(T.stencilMask(ad),U.stencil_mask=ad);uc=Jc[0];Va=Jc[1];Lb=Jc[2];if(uc!==Wc[0]||Va!==Wc[1]||Lb!==Wc[2])T.stencilFunc(uc,Va,Lb),Wc[0]=uc,Wc[1]=Va,Wc[2]=Lb;bd=ia[0];Fa=ia[1];xc=ia[2];Qa=ia[3];if(bd!==va[0]||Fa!==va[1]||xc!==va[2]||Qa!==va[3])T.stencilOpSeparate(bd,Fa,xc,Qa),va[0]=bd,va[1]=Fa,va[2]=xc,va[3]=
Qa;Ba=F[0];lb=F[1];ub=F[2];Db=F[3];if(Ba!==y[0]||lb!==y[1]||ub!==y[2]||Db!==y[3])T.stencilOpSeparate(Ba,lb,ub,Db),y[0]=Ba,y[1]=lb,y[2]=ub,y[3]=Db;rb=ja.scissor_enable;rb!==U.scissor_enable&&(rb?T.enable(3089):T.disable(3089),U.scissor_enable=rb);vc=Ca[0];vb=Ca[1];Ld=Ca[2];tc=Ca[3];if(vc!==Gb[0]||vb!==Gb[1]||Ld!==Gb[2]||tc!==Gb[3])T.scissor(vc,vb,Ld,tc),Gb[0]=vc,Gb[1]=vb,Gb[2]=Ld,Gb[3]=tc}t=this.viewport;u=t.x|0;k=t.y|0;w="width"in t?t.width|0:N.framebufferWidth-u;z="height"in t?t.height|0:N.framebufferHeight-
k;m=N.viewportWidth;N.viewportWidth=w;B=N.viewportHeight;N.viewportHeight=z;T.viewport(u,k,w,z);ha[0]=u;ha[1]=k;ha[2]=w;ha[3]=z;T.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;T.enable(3042);U.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;T.disable(2929);U.depth_enable=!1;T.disable(2960);U.stencil_enable=!1;if(C=U.profile)D=performance.now(),p.count++;T.useProgram(n.program);A=$b.angle_instanced_arrays;Oa.setVAO(null);x.buffer=this.sizeBuffer;P=!1;
G=null;J=0;R=!1;W=Q=0;S=1;ma=0;ea=5126;Qd=dc=Ea=ga=0;v(x)?(P=!0,G=K.createStream(34962,x),ea=G.dtype):(G=K.getBuffer(x))?ea=G.dtype:"constant"in x?(S=2,"number"===typeof x.constant?(Ea=x.constant,dc=Qd=ga=0):(Ea=0<x.constant.length?x.constant[0]:0,dc=1<x.constant.length?x.constant[1]:0,Qd=2<x.constant.length?x.constant[2]:0,ga=3<x.constant.length?x.constant[3]:0)):(G=v(x.buffer)?K.createStream(34962,x.buffer):K.getBuffer(x.buffer),ea="type"in x?ra[x.type]:G.dtype,R=!!x.normalized,W=x.size|0,Q=x.offset|
0,ma=x.stride|0,J=x.divisor|0);bf=Na.location;yd=Z[bf];if(1===S){yd.buffer||T.enableVertexAttribArray(bf);De=W||1;if(yd.type!==ea||yd.size!==De||yd.buffer!==G||yd.normalized!==R||yd.offset!==Q||yd.stride!==ma)T.bindBuffer(34962,G.buffer),T.vertexAttribPointer(bf,De,ea,R,ma,Q),yd.type=ea,yd.size=De,yd.buffer=G,yd.normalized=R,yd.offset=Q,yd.stride=ma;yd.divisor!==J&&(A.vertexAttribDivisorANGLE(bf,J),yd.divisor=J)}else if(yd.buffer&&(T.disableVertexAttribArray(bf),yd.buffer=null),yd.x!==Ea||yd.y!==
dc||yd.z!==Qd||yd.w!==ga)T.vertexAttrib4f(bf,Ea,dc,Qd,ga),yd.x=Ea,yd.y=dc,yd.z=Qd,yd.w=ga;H.buffer=this.sizeBuffer;Td=!1;Ud=null;ie=0;le=!1;ld=rd=0;wd=1;pd=0;dd=5126;Kc=gd=sd=zc=0;v(H)?(Td=!0,Ud=K.createStream(34962,H),dd=Ud.dtype):(Ud=K.getBuffer(H))?dd=Ud.dtype:"constant"in H?(wd=2,"number"===typeof H.constant?(sd=H.constant,gd=Kc=zc=0):(sd=0<H.constant.length?H.constant[0]:0,gd=1<H.constant.length?H.constant[1]:0,Kc=2<H.constant.length?H.constant[2]:0,zc=3<H.constant.length?H.constant[3]:0)):(Ud=
v(H.buffer)?K.createStream(34962,H.buffer):K.getBuffer(H.buffer),dd="type"in H?ra[H.type]:Ud.dtype,le=!!H.normalized,ld=H.size|0,rd=H.offset|0,pd=H.stride|0,ie=H.divisor|0);sc=O.location;ab=Z[sc];if(1===wd){ab.buffer||T.enableVertexAttribArray(sc);jc=ld||1;if(ab.type!==dd||ab.size!==jc||ab.buffer!==Ud||ab.normalized!==le||ab.offset!==rd||ab.stride!==pd)T.bindBuffer(34962,Ud.buffer),T.vertexAttribPointer(sc,jc,dd,le,pd,rd),ab.type=dd,ab.size=jc,ab.buffer=Ud,ab.normalized=le,ab.offset=rd,ab.stride=
pd;ab.divisor!==ie&&(A.vertexAttribDivisorANGLE(sc,ie),ab.divisor=ie)}else if(ab.buffer&&(T.disableVertexAttribArray(sc),ab.buffer=null),ab.x!==sd||ab.y!==gd||ab.z!==Kc||ab.w!==zc)T.vertexAttrib4f(sc,sd,gd,Kc,zc),ab.x=sd,ab.y=gd,ab.z=Kc,ab.w=zc;Eb=this.charBuffer;rc=!1;Ta=null;Ic=0;ac=!1;Dd=Zc=0;md=1;Ac=0;Vb=5126;sb=La=Pc=Fc=0;v(Eb)?(rc=!0,Ta=K.createStream(34962,Eb),Vb=Ta.dtype):(Ta=K.getBuffer(Eb))?Vb=Ta.dtype:"constant"in Eb?(md=2,"number"===typeof Eb.constant?(Pc=Eb.constant,La=sb=Fc=0):(Pc=0<
Eb.constant.length?Eb.constant[0]:0,La=1<Eb.constant.length?Eb.constant[1]:0,sb=2<Eb.constant.length?Eb.constant[2]:0,Fc=3<Eb.constant.length?Eb.constant[3]:0)):(Ta=v(Eb.buffer)?K.createStream(34962,Eb.buffer):K.getBuffer(Eb.buffer),Vb="type"in Eb?ra[Eb.type]:Ta.dtype,ac=!!Eb.normalized,Dd=Eb.size|0,Zc=Eb.offset|0,Ac=Eb.stride|0,Ic=Eb.divisor|0);Wa=pa.location;ta=Z[Wa];if(1===md){ta.buffer||T.enableVertexAttribArray(Wa);vd=Dd||1;if(ta.type!==Vb||ta.size!==vd||ta.buffer!==Ta||ta.normalized!==ac||ta.offset!==
Zc||ta.stride!==Ac)T.bindBuffer(34962,Ta.buffer),T.vertexAttribPointer(Wa,vd,Vb,ac,Ac,Zc),ta.type=Vb,ta.size=vd,ta.buffer=Ta,ta.normalized=ac,ta.offset=Zc,ta.stride=Ac;ta.divisor!==Ic&&(A.vertexAttribDivisorANGLE(Wa,Ic),ta.divisor=Ic)}else if(ta.buffer&&(T.disableVertexAttribArray(Wa),ta.buffer=null),ta.x!==Pc||ta.y!==La||ta.z!==sb||ta.w!==Fc)T.vertexAttrib4f(Wa,Pc,La,sb,Fc),ta.x=Pc,ta.y=La,ta.z=sb,ta.w=Fc;Ab=this.position;Sa=!1;Hb=null;cb=0;Wb=!1;ee=Qb=0;Zb=1;Rb=0;Bd=5126;tb=nb=Ma=Sb=0;v(Ab)?(Sa=
!0,Hb=K.createStream(34962,Ab),Bd=Hb.dtype):(Hb=K.getBuffer(Ab))?Bd=Hb.dtype:"constant"in Ab?(Zb=2,"number"===typeof Ab.constant?(Ma=Ab.constant,nb=tb=Sb=0):(Ma=0<Ab.constant.length?Ab.constant[0]:0,nb=1<Ab.constant.length?Ab.constant[1]:0,tb=2<Ab.constant.length?Ab.constant[2]:0,Sb=3<Ab.constant.length?Ab.constant[3]:0)):(Hb=v(Ab.buffer)?K.createStream(34962,Ab.buffer):K.getBuffer(Ab.buffer),Bd="type"in Ab?ra[Ab.type]:Hb.dtype,Wb=!!Ab.normalized,ee=Ab.size|0,Qb=Ab.offset|0,Rb=Ab.stride|0,cb=Ab.divisor|
0);gb=oa.location;Pa=Z[gb];if(1===Zb){Pa.buffer||T.enableVertexAttribArray(gb);qc=ee||2;if(Pa.type!==Bd||Pa.size!==qc||Pa.buffer!==Hb||Pa.normalized!==Wb||Pa.offset!==Qb||Pa.stride!==Rb)T.bindBuffer(34962,Hb.buffer),T.vertexAttribPointer(gb,qc,Bd,Wb,Rb,Qb),Pa.type=Bd,Pa.size=qc,Pa.buffer=Hb,Pa.normalized=Wb,Pa.offset=Qb,Pa.stride=Rb;Pa.divisor!==cb&&(A.vertexAttribDivisorANGLE(gb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(T.disableVertexAttribArray(gb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==nb||Pa.z!==tb||
Pa.w!==Sb)T.vertexAttrib4f(gb,Ma,nb,tb,Sb),Pa.x=Ma,Pa.y=nb,Pa.z=tb,Pa.w=Sb;Xb=I.call(this,N,e,0);T.uniform1f(Y.location,Xb);Uc=f.call(this,N,e,0);T.uniform1f(d.location,Uc);T.uniform1f(g.location,e.align);T.uniform1f(q.location,e.baseline);db=this.viewportArray;T.uniform4f(na.location,db[0],db[1],db[2],db[3]);mc=e.color;T.uniform4f(c.location,mc[0],mc[1],mc[2],mc[3]);Gc=b.call(this,N,e,0);T.uniform2f(X.location,Gc[0],Gc[1]);cc=r.call(this,N,e,0);T.uniform2f(V.location,cc[0],cc[1]);jb=this.scale;T.uniform2f(xb.location,
jb[0],jb[1]);kb=this.translate;T.uniform2f(Cb.location,kb[0],kb[1]);ua=e.positionOffset;T.uniform2f(Ka.location,ua[0],ua[1]);T.uniform1f(ba.location,e.opacity);(ob=a.call(this,N,e,0))&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);wa=ob._texture;T.uniform1i(l.location,wa.bind());(Ua=sa.elements)?T.bindBuffer(34963,Ua.buffer.buffer):Oa.currentVAO&&(Ua=L.getElements(Oa.currentVAO.elements))&&T.bindBuffer(34963,Ua.buffer.buffer);bb=e.offset;if(Aa=e.count)eb=sa.instances,0<eb?Ua?A.drawElementsInstancedANGLE(0,
Aa,Ua.type,bb<<(Ua.type-5121>>1),eb):A.drawArraysInstancedANGLE(0,bb,Aa,eb):0>eb&&(Ua?T.drawElements(0,Aa,Ua.type,bb<<(Ua.type-5121>>1)):T.drawArrays(0,bb,Aa)),U.dirty=!0,Oa.setVAO(null),N.viewportWidth=m,N.viewportHeight=B,C&&(p.cpuTime+=performance.now()-D),P&&K.destroyStream(G),Td&&K.destroyStream(Ud),rc&&K.destroyStream(Ta),Sa&&K.destroyStream(Hb),wa.unbind()},scope:function(a,b,c){var d,f,e,g,h,l,n,r,q,t,y,I,F,P,M,J,L,O,W,ca,T,V,X,S,Y,Z,aa,ba,ha,ia,ka,va,na,oa,pa,qa,Ca,Ha,Na,Oa,Ka,$a,wc,Ta,ib,
xb,Cb,Gb,ud,$b,Vb,ec,pc,La,sb,Wa,ta,lc,Ab,Sa,Hb,cb,Wb,Qb,Jc,Zb,Rb,Tc,Sb,Ma,nb,tb,gb,Pa,qc,Xb,Uc,db,mc,Gc,cc,jb,kb,ua,ob,wa,Ua,bb,Aa,eb,Ia,Bb,zb,Ra,oc,Jb,Za,Tb,xa,Wc,Ja,Nb,fb,hb,ya,fc,Da,pb,qb,Xa,Ya,nc,ad,uc,Va,Lb,bd,Fa,xc,Qa,Ba,lb,ub,Db,rb,vc,vb,Ld,tc,Qd,Lc,nd,hd,Ub,bc,Ob,Ga,Yb,mb,wb,Mb,Pb,gc,ic,Qc,Bc,Cc,Dc,Mc,cd,Rc,Nc,Kb,Fb,Oc,Hc,Sc,hc,Xc;d=this.viewport;f=d.x|0;e=d.y|0;g="width"in d?d.width|0:N.framebufferWidth-f;h="height"in d?d.height|0:N.framebufferHeight-e;l=N.viewportWidth;N.viewportWidth=
g;n=N.viewportHeight;N.viewportHeight=h;r=R[0];R[0]=f;q=R[1];R[1]=e;t=R[2];R[2]=g;y=R[3];R[3]=h;I=dc[0];dc[0]=0;F=dc[1];dc[1]=0;P=dc[2];dc[2]=0;M=dc[3];dc[3]=1;J=ja.blend_enable;ja.blend_enable=!0;L=ga[0];ga[0]=770;O=ga[1];ga[1]=771;W=ga[2];ga[2]=773;ca=ga[3];ga[3]=1;T=ja.depth_enable;ja.depth_enable=!1;V=ja.stencil_enable;ja.stencil_enable=!1;if(X=U.profile)S=performance.now(),p.count++;Y=a.offset;Z=sa.offset;sa.offset=Y;aa=a.count;ba=sa.count;sa.count=aa;ha=sa.primitive;sa.primitive=0;ia=a.align;
ka=Ea[64];Ea[64]=ia;va=u.call(this,N,a,c);na=Ea[69];Ea[69]=va;oa=A.call(this,N,a,c);pa=Ea[67];Ea[67]=oa;qa=Q.call(this,N,a,c);Ca=Ea[66];Ea[66]=qa;Ha=a.baseline;Na=Ea[65];Ea[65]=Ha;Oa=G.call(this,N,a,c);Ka=Ea[62];Ea[62]=Oa;$a=a.color;wc=Ea[14];Ea[14]=$a;Ta=D.call(this,N,a,c);ib=Ea[63];Ea[63]=Ta;xb=a.opacity;Cb=Ea[10];Ea[10]=xb;Gb=a.positionOffset;ud=Ea[68];Ea[68]=Gb;$b=this.scale;Vb=Ea[6];Ea[6]=$b;ec=this.translate;pc=Ea[8];Ea[8]=ec;La=this.viewportArray;sb=Ea[3];Ea[3]=La;Wa=this.charBuffer;ta=!1;
lc=null;Ab=0;Sa=!1;cb=Hb=0;Wb=1;Qb=0;Jc=5126;Sb=Tc=Rb=Zb=0;v(Wa)?(ta=!0,lc=K.createStream(34962,Wa),Jc=lc.dtype):(lc=K.getBuffer(Wa))?Jc=lc.dtype:"constant"in Wa?(Wb=2,"number"===typeof Wa.constant?(Rb=Wa.constant,Tc=Sb=Zb=0):(Rb=0<Wa.constant.length?Wa.constant[0]:0,Tc=1<Wa.constant.length?Wa.constant[1]:0,Sb=2<Wa.constant.length?Wa.constant[2]:0,Zb=3<Wa.constant.length?Wa.constant[3]:0)):(lc=v(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),Jc="type"in Wa?ra[Wa.type]:lc.dtype,
Sa=!!Wa.normalized,cb=Wa.size|0,Hb=Wa.offset|0,Qb=Wa.stride|0,Ab=Wa.divisor|0);Ma=w.buffer;w.buffer=lc;nb=w.divisor;w.divisor=Ab;tb=w.normalized;w.normalized=Sa;gb=w.offset;w.offset=Hb;Pa=w.size;w.size=cb;qc=w.state;w.state=Wb;Xb=w.stride;w.stride=Qb;Uc=w.type;w.type=Jc;db=w.w;w.w=Zb;mc=w.x;w.x=Rb;Gc=w.y;w.y=Tc;cc=w.z;w.z=Sb;H.buffer=this.sizeBuffer;jb=!1;kb=null;ua=0;ob=!1;Ua=wa=0;bb=1;Aa=0;eb=5126;Ra=zb=Bb=Ia=0;v(H)?(jb=!0,kb=K.createStream(34962,H),eb=kb.dtype):(kb=K.getBuffer(H))?eb=kb.dtype:
"constant"in H?(bb=2,"number"===typeof H.constant?(Bb=H.constant,zb=Ra=Ia=0):(Bb=0<H.constant.length?H.constant[0]:0,zb=1<H.constant.length?H.constant[1]:0,Ra=2<H.constant.length?H.constant[2]:0,Ia=3<H.constant.length?H.constant[3]:0)):(kb=v(H.buffer)?K.createStream(34962,H.buffer):K.getBuffer(H.buffer),eb="type"in H?ra[H.type]:kb.dtype,ob=!!H.normalized,Ua=H.size|0,wa=H.offset|0,Aa=H.stride|0,ua=H.divisor|0);oc=C.buffer;C.buffer=kb;Jb=C.divisor;C.divisor=ua;Za=C.normalized;C.normalized=ob;Tb=C.offset;
C.offset=wa;xa=C.size;C.size=Ua;Wc=C.state;C.state=bb;Ja=C.stride;C.stride=Aa;Nb=C.type;C.type=eb;fb=C.w;C.w=Ia;hb=C.x;C.x=Bb;ya=C.y;C.y=zb;fc=C.z;C.z=Ra;Da=this.position;pb=!1;qb=null;Xa=0;Ya=!1;ad=nc=0;uc=1;Va=0;Lb=5126;Qa=xc=Fa=bd=0;v(Da)?(pb=!0,qb=K.createStream(34962,Da),Lb=qb.dtype):(qb=K.getBuffer(Da))?Lb=qb.dtype:"constant"in Da?(uc=2,"number"===typeof Da.constant?(Fa=Da.constant,xc=Qa=bd=0):(Fa=0<Da.constant.length?Da.constant[0]:0,xc=1<Da.constant.length?Da.constant[1]:0,Qa=2<Da.constant.length?
Da.constant[2]:0,bd=3<Da.constant.length?Da.constant[3]:0)):(qb=v(Da.buffer)?K.createStream(34962,Da.buffer):K.getBuffer(Da.buffer),Lb="type"in Da?ra[Da.type]:qb.dtype,Ya=!!Da.normalized,ad=Da.size|0,nc=Da.offset|0,Va=Da.stride|0,Xa=Da.divisor|0);Ba=B.buffer;B.buffer=qb;lb=B.divisor;B.divisor=Xa;ub=B.normalized;B.normalized=Ya;Db=B.offset;B.offset=nc;rb=B.size;B.size=ad;vc=B.state;B.state=uc;vb=B.stride;B.stride=Va;Ld=B.type;B.type=Lb;tc=B.w;B.w=bd;Qd=B.x;B.x=Fa;Lc=B.y;B.y=xc;nd=B.z;B.z=Qa;x.buffer=
this.sizeBuffer;hd=!1;Ub=null;bc=0;Ob=!1;Yb=Ga=0;mb=1;wb=0;Mb=5126;Qc=ic=gc=Pb=0;v(x)?(hd=!0,Ub=K.createStream(34962,x),Mb=Ub.dtype):(Ub=K.getBuffer(x))?Mb=Ub.dtype:"constant"in x?(mb=2,"number"===typeof x.constant?(gc=x.constant,ic=Qc=Pb=0):(gc=0<x.constant.length?x.constant[0]:0,ic=1<x.constant.length?x.constant[1]:0,Qc=2<x.constant.length?x.constant[2]:0,Pb=3<x.constant.length?x.constant[3]:0)):(Ub=v(x.buffer)?K.createStream(34962,x.buffer):K.getBuffer(x.buffer),Mb="type"in x?ra[x.type]:Ub.dtype,
Ob=!!x.normalized,Yb=x.size|0,Ga=x.offset|0,wb=x.stride|0,bc=x.divisor|0);Bc=z.buffer;z.buffer=Ub;Cc=z.divisor;z.divisor=bc;Dc=z.normalized;z.normalized=Ob;Mc=z.offset;z.offset=Ga;cd=z.size;z.size=Yb;Rc=z.state;z.state=mb;Nc=z.stride;z.stride=wb;Kb=z.type;z.type=Mb;Fb=z.w;z.w=Pb;Oc=z.x;z.x=gc;Hc=z.y;z.y=ic;Sc=z.z;z.z=Qc;hc=ea.vert;ea.vert=61;Xc=ea.frag;ea.frag=60;U.dirty=!0;b(N,a,c);N.viewportWidth=l;N.viewportHeight=n;R[0]=r;R[1]=q;R[2]=t;R[3]=y;dc[0]=I;dc[1]=F;dc[2]=P;dc[3]=M;ja.blend_enable=J;
ga[0]=L;ga[1]=O;ga[2]=W;ga[3]=ca;ja.depth_enable=T;ja.stencil_enable=V;X&&(p.cpuTime+=performance.now()-S);sa.offset=Z;sa.count=ba;sa.primitive=ha;Ea[64]=ka;Ea[69]=na;Ea[67]=pa;Ea[66]=Ca;Ea[65]=Na;Ea[62]=Ka;Ea[14]=wc;Ea[63]=ib;Ea[10]=Cb;Ea[68]=ud;Ea[6]=Vb;Ea[8]=pc;Ea[3]=sb;ta&&K.destroyStream(lc);w.buffer=Ma;w.divisor=nb;w.normalized=tb;w.offset=gb;w.size=Pa;w.state=qc;w.stride=Xb;w.type=Uc;w.w=db;w.x=mc;w.y=Gc;w.z=cc;jb&&K.destroyStream(kb);C.buffer=oc;C.divisor=Jb;C.normalized=Za;C.offset=Tb;C.size=
xa;C.state=Wc;C.stride=Ja;C.type=Nb;C.w=fb;C.x=hb;C.y=ya;C.z=fc;pb&&K.destroyStream(qb);B.buffer=Ba;B.divisor=lb;B.normalized=ub;B.offset=Db;B.size=rb;B.state=vc;B.stride=vb;B.type=Ld;B.w=tc;B.x=Qd;B.y=Lc;B.z=nd;hd&&K.destroyStream(Ub);z.buffer=Bc;z.divisor=Cc;z.normalized=Dc;z.offset=Mc;z.size=cd;z.state=Rc;z.stride=Nc;z.type=Kb;z.w=Fb;z.x=Oc;z.y=Hc;z.z=Sc;ea.vert=hc;ea.frag=Xc;U.dirty=!0}}}}},{}],26:[function(A,S,Ka){var e=A("./sorted-object-keys");S.exports=function(p,n){for(var I=e(n),f=0;f<I.length;++f)p[I[f]]=
n[I[f]];return p}},{"./sorted-object-keys":35}],27:[function(A,S,Ka){function e(e,f,b,n,a,p){for(var A=0;A<f;++A)for(var Q=e[A],G=0;G<b;++G)for(var D=Q[G],w=0;w<n;++w)a[p++]=D[w]}function p(n,f,b,r,a){for(var u=1,A=b+1;A<f.length;++A)u*=f[A];var Q=f[b];if(4===f.length-b){var G=f[b+1],D=f[b+2];f=f[b+3];for(A=0;A<Q;++A)e(n[A],G,D,f,r,a),a+=u}else for(A=0;A<Q;++A)p(n[A],f,b+1,r,a),a+=u}var n=A("./pool");S.exports={shape:function(e){for(var f=[];e.length;e=e[0])f.push(e.length);return f},flatten:function(I,
f,b,r){var a=1;if(f.length)for(var u=0;u<f.length;++u)a*=f[u];else a=0;b=r||n.allocType(b,a);switch(f.length){case 0:break;case 1:r=f[0];for(f=0;f<r;++f)b[f]=I[f];break;case 2:r=f[0];f=f[1];for(u=a=0;u<r;++u)for(var A=I[u],Q=0;Q<f;++Q)b[a++]=A[Q];break;case 3:e(I,f[0],f[1],f[2],b,0);break;default:p(I,f,0,b,0)}return b}}},{"./pool":33}],28:[function(A,S,Ka){var e=A("./is-typed-array");S.exports=function(p){return Array.isArray(p)||e(p)}},{"./is-typed-array":31}],29:[function(A,S,Ka){var e=A("./is-typed-array");
S.exports=function(p){return!!p&&"object"===typeof p&&Array.isArray(p.shape)&&Array.isArray(p.stride)&&"number"===typeof p.offset&&p.shape.length===p.stride.length&&(Array.isArray(p.data)||e(p.data))}},{"./is-typed-array":31}],30:[function(A,S,Ka){S.exports=function(e){return!(e&e-1)&&!!e}},{}],31:[function(A,S,Ka){S.exports=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof
Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray}},{}],32:[function(A,S,Ka){S.exports=function(e,p){for(var n=Array(e),I=0;I<e;++I)n[I]=p(I);return n}},{}],33:[function(A,S,Ka){function e(e){var f,b;f=(65535<e)<<4;e>>>=f;b=(255<e)<<3;e>>>=b;f|=b;b=(15<e)<<2;e>>>=b;f|=b;b=(3<e)<<1;return f|b|e>>>b>>1}function p(){function p(f){a:{for(var a=16;268435456>=a;a*=16)if(f<=a){f=a;break a}f=0}a=b[e(f)>>2];return 0<a.length?a.pop():new ArrayBuffer(f)}function f(f){b[e(f.byteLength)>>
2].push(f)}var b=n(8,function(){return[]});return{alloc:p,free:f,allocType:function(b,a){var f=null;switch(b){case 5120:f=new Int8Array(p(a),0,a);break;case 5121:f=new Uint8Array(p(a),0,a);break;case 5122:f=new Int16Array(p(2*a),0,a);break;case 5123:f=new Uint16Array(p(2*a),0,a);break;case 5124:f=new Int32Array(p(4*a),0,a);break;case 5125:f=new Uint32Array(p(4*a),0,a);break;case 5126:f=new Float32Array(p(4*a),0,a);break;default:return null}return f.length!==a?f.subarray(0,a):f},freeType:function(b){f(b.buffer)}}}
var n=A("./loop");A=p();A.zero=p();S.exports=A},{"./loop":32}],34:[function(A,S,Ka){S.exports={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout}},{}],35:[function(A,S,Ka){S.exports=function(e){return Object.keys(e).sort()}},{}],36:[function(A,S,Ka){var e=A("./pool"),p=new Float32Array(1),n=new Uint32Array(p.buffer);
S.exports=function(A){for(var f=e.allocType(5123,A.length),b=0;b<A.length;++b)if(isNaN(A[b]))f[b]=65535;else if(Infinity===A[b])f[b]=31744;else if(-Infinity===A[b])f[b]=64512;else{p[0]=A[b];var r=n[0],a=r>>>31<<15,u=(r<<1>>>24)-127,r=r>>13&1023;f[b]=-24>u?a:-14>u?a+(r+1024>>-14-u):15<u?a+31744:a+(u+15<<10)+r}return f}},{"./pool":33}],37:[function(A,S,Ka){var e=A("./sorted-object-keys");S.exports=function(p){return e(p).map(function(e){return p[e]})}},{"./sorted-object-keys":35}],38:[function(A,S,
Ka){function e(f,a,e){function n(){var a=window.innerWidth,b=window.innerHeight;f!==document.body&&(b=p.getBoundingClientRect(),a=b.right-b.left,b=b.bottom-b.top);p.width=e*a;p.height=e*b}var p=document.createElement("canvas");b(p.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});f.appendChild(p);f===document.body&&(p.style.position="absolute",b(f.style,{margin:0,padding:0}));var A;f!==document.body&&"function"===typeof ResizeObserver?(A=new ResizeObserver(function(){setTimeout(n)}),
A.observe(f)):window.addEventListener("resize",n,!1);n();return{canvas:p,onDestroy:function(){A?A.disconnect():window.removeEventListener("resize",n);f.removeChild(p)}}}function p(b,a){function f(e){try{return b.getContext(e,a)}catch(n){return null}}return f("webgl")||f("experimental-webgl")||f("webgl-experimental")}function n(b){if("string"===typeof b)return b.split();f(Array.isArray(b),"invalid extension array");return b}function I(b){return"string"===typeof b?(f("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(b)):b}var f=A("./util/check"),b=A("./util/extend");S.exports=function(b){var a=b||{},u,A,Q,G;b={};var D=[],w=[],C="undefined"===typeof window?1:window.devicePixelRatio,B=!1,z=function(a){a&&f.raise(a)},J=function(){};"string"===typeof a?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),u=document.querySelector(a),f(u,"invalid query string for element")):"object"===typeof a?"string"===typeof a.nodeName&&"function"===typeof a.appendChild&&
"function"===typeof a.getBoundingClientRect?u=a:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?(G=a,Q=G.canvas):(f.constructor(a),"gl"in a?G=a.gl:"canvas"in a?Q=I(a.canvas):"container"in a&&(A=I(a.container)),"attributes"in a&&(b=a.attributes,f.type(b,"object","invalid context attributes")),"extensions"in a&&(D=n(a.extensions)),"optionalExtensions"in a&&(w=n(a.optionalExtensions)),"onDone"in a&&(f.type(a.onDone,"function","invalid or missing onDone callback"),z=a.onDone),"profile"in
a&&(B=!!a.profile),"pixelRatio"in a&&(C=+a.pixelRatio,f(0<C,"invalid pixel ratio"))):f.raise("invalid arguments to regl");u&&("canvas"===u.nodeName.toLowerCase()?Q=u:A=u);if(!G){if(!Q){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");u=e(A||document.body,z,C);if(!u)return null;Q=u.canvas;J=u.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);G=p(Q,b)}return G?{gl:G,canvas:Q,container:A,extensions:D,optionalExtensions:w,pixelRatio:C,
profile:B,onDone:z,onDestroy:J}:(J(),z("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":22,"./util/extend":26}],39:[function(A,S,Ka){S.exports=function(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],40:[function(A,S,Ka){var e=A("./identity");S.exports=function(p,n,A,f){var b,r,a,u,S,Q,G,D,w=n[0],C=n[1];n=n[2];a=f[0];u=f[1];r=f[2];G=A[0];f=A[1];
b=A[2];if(1E-6>Math.abs(w-G)&&1E-6>Math.abs(C-f)&&1E-6>Math.abs(n-b))return e(p);A=w-G;f=C-f;G=n-b;D=1/Math.sqrt(A*A+f*f+G*G);A*=D;f*=D;G*=D;b=u*G-r*f;r=r*A-a*G;a=a*f-u*A;(D=Math.sqrt(b*b+r*r+a*a))?(D=1/D,b*=D,r*=D,a*=D):a=r=b=0;u=f*a-G*r;S=G*b-A*a;Q=A*r-f*b;(D=Math.sqrt(u*u+S*S+Q*Q))?(D=1/D,u*=D,S*=D,Q*=D):Q=S=u=0;p[0]=b;p[1]=u;p[2]=A;p[3]=0;p[4]=r;p[5]=S;p[6]=f;p[7]=0;p[8]=a;p[9]=Q;p[10]=G;p[11]=0;p[12]=-(b*w+r*C+a*n);p[13]=-(u*w+S*C+Q*n);p[14]=-(A*w+f*C+G*n);p[15]=1;return p}},{"./identity":39}],
41:[function(A,S,Ka){S.exports=function(e,p,n,A,f){p=1/Math.tan(p/2);var b=1/(A-f);e[0]=p/n;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=p;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(f+A)*b;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*f*A*b;e[15]=0;return e}},{}],42:[function(A,S,Ka){S.exports=function(p,n){function A(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==B.alt,B.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==B.shift,B.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==B.control,B.control=!!a.ctrlKey);"metaKey"in a&&(b=
b||a.metaKey!==B.meta,B.meta=!!a.metaKey);return b}function f(a,b){var f=e.x(b),p=e.y(b);"buttons"in b&&(a=b.buttons|0);if(a!==D||f!==w||p!==C||A(b))D=a|0,w=f||0,C=p||0,n&&n(D,w,C,B)}function b(a){f(0,a)}function r(){if(D||w||C||B.shift||B.alt||B.meta||B.control)D=w=C=0,B.shift=B.alt=B.control=B.meta=!1,n&&n(0,0,0,B)}function a(a){A(a)&&n&&n(D,w,C,B)}function u(a){0===e.buttons(a)?f(0,a):f(D,a)}function S(a){f(D|e.buttons(a),a)}function Q(a){f(D&~e.buttons(a),a)}function G(){z||(z=!0,p.addEventListener("mousemove",
u),p.addEventListener("mousedown",S),p.addEventListener("mouseup",Q),p.addEventListener("mouseleave",b),p.addEventListener("mouseenter",b),p.addEventListener("mouseout",b),p.addEventListener("mouseover",b),p.addEventListener("blur",r),p.addEventListener("keyup",a),p.addEventListener("keydown",a),p.addEventListener("keypress",a),p!==window&&(window.addEventListener("blur",r),window.addEventListener("keyup",a),window.addEventListener("keydown",a),window.addEventListener("keypress",a)))}n||(n=p,p=window);
var D=0,w=0,C=0,B={shift:!1,alt:!1,control:!1,meta:!1},z=!1;G();var J={element:p};Object.defineProperties(J,{enabled:{get:function(){return z},set:function(f){f?G():z&&(z=!1,p.removeEventListener("mousemove",u),p.removeEventListener("mousedown",S),p.removeEventListener("mouseup",Q),p.removeEventListener("mouseleave",b),p.removeEventListener("mouseenter",b),p.removeEventListener("mouseout",b),p.removeEventListener("mouseover",b),p.removeEventListener("blur",r),p.removeEventListener("keyup",a),p.removeEventListener("keydown",
a),p.removeEventListener("keypress",a),p!==window&&(window.removeEventListener("blur",r),window.removeEventListener("keyup",a),window.removeEventListener("keydown",a),window.removeEventListener("keypress",a)))},enumerable:!0},buttons:{get:function(){return D},enumerable:!0},x:{get:function(){return w},enumerable:!0},y:{get:function(){return C},enumerable:!0},mods:{get:function(){return B},enumerable:!0}});return J};var e=A("mouse-event")},{"mouse-event":43}],43:[function(A,S,Ka){function e(e){return e.target||
e.srcElement||window}Ka.buttons=function(e){if("object"===typeof e){if("buttons"in e)return e.buttons;if("which"in e){e=e.which;if(2===e)return 4;if(3===e)return 2;if(0<e)return 1<<e-1}else if("button"in e){e=e.button;if(1===e)return 4;if(2===e)return 2;if(0<=e)return 1<<e}}return 0};Ka.element=e;Ka.x=function(p){if("object"===typeof p){if("offsetX"in p)return p.offsetX;var n=e(p).getBoundingClientRect();return p.clientX-n.left}return 0};Ka.y=function(p){if("object"===typeof p){if("offsetY"in p)return p.offsetY;
var n=e(p).getBoundingClientRect();return p.clientY-n.top}return 0}},{}],44:[function(A,S,Ka){var e=A("to-px");S.exports=function(p,n,A){"function"===typeof p&&(A=!!n,n=p,p=window);var f=e("ex",p),b=function(b){A&&b.preventDefault();var a=b.deltaX||0,e=b.deltaY||0,p=b.deltaZ||0,Q=1;switch(b.deltaMode){case 1:Q=f;break;case 2:Q=window.innerHeight}a*=Q;e*=Q;p*=Q;if(a||e||p)return n(a,e,p,b)};p.addEventListener("wheel",b);return b}},{"to-px":46}],45:[function(A,S,Ka){S.exports=function(e,p){p||(p=[0,
""]);e=String(e);var n=parseFloat(e,10);p[0]=n;p[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return p}},{}],46:[function(A,S,Ka){function e(b,e){var a=I(getComputedStyle(b).getPropertyValue(e));return a[0]*n(a[1],b)}function p(b,f){var a=document.createElement("div");a.style.height="128"+b;f.appendChild(a);var n=e(a,"height")/128;f.removeChild(a);return n}function n(b,r){if(!b)return null;r=r||document.body;b=(b+""||"px").trim().toLowerCase();if(r===window||r===document)r=document.body;switch(b){case "%":return r.clientHeight/
100;case "ch":case "ex":return p(b,r);case "em":return e(r,"font-size");case "rem":return e(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return f;case "cm":return f/2.54;case "mm":return f/25.4;case "pt":return f/72;case "pc":return f/6;case "px":return 1}var a=I(b);if(!isNaN(a[0])&&a[1]){var u=
n(a[1],r);return"number"===typeof u?a[0]*u:null}return null}var I=A("parse-unit");S.exports=n;var f=p("in",document.body)},{"parse-unit":45}],47:[function(A,S,Ka){function e(a,b){for(var e=0;e<a.length;++e)if(a[e]===b)return e;return-1}var p=A("./lib/util/check"),n=A("./lib/util/extend"),I=A("./lib/dynamic"),f=A("./lib/util/raf"),b=A("./lib/util/clock"),r=A("./lib/strings"),a=A("./lib/webgl"),u=A("./lib/extension"),ma=A("./lib/limits"),Q=A("./lib/buffer"),G=A("./lib/elements"),D=A("./lib/texture"),
w=A("./lib/renderbuffer"),C=A("./lib/framebuffer"),B=A("./lib/attribute"),z=A("./lib/shader"),J=A("./lib/read"),P=A("./lib/core"),W=A("./lib/stats"),Qd=A("./lib/timer");S.exports=function(t){function h(){if(0===ib.length)K&&K.update(),pc=null;else{pc=f.next(h);c();for(var a=ib.length-1;0<=a;--a){var b=ib[a];b&&b(L,null,0)}oa.flush();K&&K.update()}}function g(){!pc&&0<ib.length&&(pc=f.next(h))}function l(){pc&&(f.cancel(h),pc=null)}function A(a){a.preventDefault();xb=!0;l();ga.forEach(function(a){a()})}
function S(a){oa.getError();xb=!1;Cb.restore();ja.restore();$a.restore();ea.restore();Ea.restore();Oa.restore();v.restore();K&&K.restore();dc.procs.refresh();g();qa.forEach(function(a){a()})}function q(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(I.isDynamic(f))e[b]=I.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(I.isDynamic(f[g])){e[b]=I.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;t.length<a;)t.push(null);
return t}p(!!a,"invalid args to regl({...})");p.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");
b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=dc.compile(a,f,e,d,g),l=h.draw,q=h.batch,r=h.scope,t=[];return n(function(a,b){var d;xb&&p.raise("context lost");if("function"===typeof a)return r.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)r.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)r.call(this,a[d],b,d);else return r.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return q.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return q.call(this,a,a.length)}else return l.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function pa(a,b){var c=0;dc.procs.poll();var d=b.color;d&&(oa.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(oa.clearDepth(+b.depth),c|=256);"stencil"in b&&(oa.clearStencil(b.stencil|0),c|=1024);p(!!c,"called regl.clear with no buffer specified");oa.clear(c)}function O(a){p.type(a,"function","regl.frame() callback must be a function");
ib.push(a);g();return{cancel:function(){function b(){var a=e(ib,b);ib[a]=ib[ib.length-1];--ib.length;0>=ib.length&&l()}var c=e(ib,a);p(0<=c,"cannot cancel a frame twice");ib[c]=b}}}function Y(){var a=Ha.viewport,b=Ha.scissor_box;a[0]=a[1]=b[0]=b[1]=0;L.viewportWidth=L.framebufferWidth=L.drawingBufferWidth=a[2]=b[2]=oa.drawingBufferWidth;L.viewportHeight=L.framebufferHeight=L.drawingBufferHeight=a[3]=b[3]=oa.drawingBufferHeight}function c(){L.tick+=1;L.time=ba();Y();dc.procs.poll()}function d(){ea.refresh();
Y();dc.procs.refresh();K&&K.update()}function ba(){return(b()-N)/1E3}console.log("REGL args are:",t);t=a(t);if(!t)return null;var oa=t.gl,Ka=oa.getContextAttributes(),xb=oa.isContextLost(),Cb=u(oa,t);if(!Cb)return null;var na=r(),Na=W(),Z=Cb.extensions,K=Qd(oa,Z),N=b(),U=oa.drawingBufferWidth,sa=oa.drawingBufferHeight,L={tick:0,time:0,viewportWidth:U,viewportHeight:sa,framebufferWidth:U,framebufferHeight:sa,drawingBufferWidth:U,drawingBufferHeight:sa,pixelRatio:t.pixelRatio},U={elements:null,primitive:4,
count:-1,offset:0,instances:-1},$b=ma(oa,Z),$a=Q(oa,Na,t,function(a){return v.destroyBuffer(a)}),T=G(oa,Z,$a,Na),v=B(oa,Z,$b,Na,$a,T,U),ja=z(oa,na,Na,t),ea=D(oa,Z,$b,function(){dc.procs.poll()},L,Na,t),Ea=w(oa,Z,$b,Na,t),Oa=C(oa,Z,$b,ea,Ea,Na),dc=P(oa,na,Z,$b,$a,T,ea,Oa,{},v,ja,U,L,K,t),na=J(oa,Oa,dc.procs.poll,L,Ka,Z,$b),Ha=dc.next,aa=oa.canvas,ib=[],ga=[],qa=[],ec=[t.onDestroy],pc=null;aa&&(aa.addEventListener("webglcontextlost",A,!1),aa.addEventListener("webglcontextrestored",S,!1));var lc=Oa.setFBO=
q({framebuffer:I.define.call(null,1,"framebuffer")});d();Ka=n(q,{clear:function(a){p("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)lc(n({framebuffer:a.framebuffer.faces[b]},a),pa);else lc(a,pa);else pa(null,a)},prop:I.define.bind(null,1),context:I.define.bind(null,2),"this":I.define.bind(null,3),draw:q({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return T.create(a,
!1)},texture:ea.create2D,cube:ea.createCube,renderbuffer:Ea.create,framebuffer:Oa.create,framebufferCube:Oa.createCube,vao:v.createVAO,attributes:Ka,frame:O,on:function(a,b){p.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return O(b);case "lost":c=ga;break;case "restore":c=qa;break;case "destroy":c=ec;break;default:p.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=
c[c.length-1];c.pop();break}}}},limits:$b,hasExtension:function(a){return 0<=$b.extensions.indexOf(a.toLowerCase())},read:na,destroy:function(){ib.length=0;l();aa&&(aa.removeEventListener("webglcontextlost",A),aa.removeEventListener("webglcontextrestored",S));ja.clear();Oa.clear();Ea.clear();v.clear();ea.clear();T.clear();$a.clear();K&&K.clear();ec.forEach(function(a){a()})},_gl:oa,_refresh:d,poll:function(){c();K&&K.update()},now:ba,stats:Na});t.onDone(null,Ka);return Ka}},{"./lib/attribute":3,"./lib/buffer":4,
"./lib/core":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/stats":18,"./lib/strings":19,"./lib/texture":20,"./lib/timer":21,"./lib/util/check":22,"./lib/util/clock":23,"./lib/util/extend":26,"./lib/util/raf":34,"./lib/webgl":38}]},{},[1]);

        </script>
        </body>
      </html>
<!DOCTYPE html>
      <html>
        <head>
          <title>example/implicit-surface.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function O(ha,xa,k){function F(f,h){if(!xa[f]){if(!ha[f]){var g="function"==typeof require&&require;if(!h&&g)return g(f,!0);if(J)return J(f,!0);g=Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g;}g=xa[f]={exports:{}};ha[f][0].call(g.exports,function(b){return F(ha[f][1][b]||b)},g,g.exports,O,ha,xa,k)}return xa[f].exports}for(var J="function"==typeof require&&require,L=0;L<k.length;L++)F(k[L]);return F}return O})()({1:[function(O,ha,xa){ha=O("../regl")();var k=O("./util/camera")(ha,
{center:[-12,5,1],phi:-.2}),F=ha({vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main () {\n      gl_Position = vec4(position, 0, 1);\n    }",frag:"\n    precision mediump float;\n    uniform float width, height, timestep;\n    uniform vec3 eye, center;\n    vec2 resolution = vec2(width, height);\n\n    float torus(vec3 p, vec2 t)\n    {\n      vec2 q = vec2(length(p.xz)-t.x,p.y);\n      return length(q)-t.y;\n    }\n\n    float sphere(vec3 p, float s)\n    {\n      return length(p)-s;\n    }\n\n    vec2 opU(vec2 d1, vec2 d2)\n    {\n      return (d1.x < d2.x) ? d1 : d2;\n    }\n\n    vec3 opRep(vec3 p, vec3 c)\n    {\n      return vec3(mod(p.yz, c.yz)-0.5*c.yz, p.x);\n    }\n\n    float plane(vec3 p, vec4 n)\n    {\n      return dot(p, n.xyz) + n.w;\n    }\n\n    vec2 distanceEstimate(vec3 pos)\n    {\n      float cellSize = 5.;\n      float cellNumber = floor(pos.y/cellSize)+1.;\n      float period = 50./cellNumber;\n      float s = sin(timestep/period);\n      float c = cos(timestep/period);\n      mat3 r = mat3(c,  -s,  0.,\n                    s,   c,  0.,\n                    0.,  0., 1.);\n      vec2 ball = vec2(sphere(opRep(pos-vec3(0, 0, s*2.0), vec3(cellSize)), 0.5), 45.);\n      vec2 tor = vec2(torus(opRep(pos, vec3(cellSize))*r, vec2(1.0, 0.25)), 15.);\n      vec2 floor = vec2(plane(pos, vec4(0, 1, 0, -1)), 0.);\n      vec2 objects = opU(tor, ball);\n      return opU(floor, objects);\n    }\n\n    vec3 getNormal(vec3 pos)\n    {\n      const vec2 delta = vec2(0.01, 0);\n\n      vec3 n;\n      n.x = distanceEstimate(pos + delta.xyy).x - distanceEstimate(pos - delta.xyy).x;\n      n.y = distanceEstimate(pos + delta.yxy).x - distanceEstimate(pos - delta.yxy).x;\n      n.z = distanceEstimate(pos + delta.yyx).x - distanceEstimate(pos - delta.yyx).x;\n\n      return normalize(n);\n    }\n\n    float softshadow(in vec3 ro, in vec3 rd, in float mint, in float tmax)\n    {\n      float res = 1.0;\n      float t = mint;\n      for (int i=0; i<16; i++)\n      {\n        float h = distanceEstimate(ro + rd*t).x;\n        res = min(res, 8.0*h/t);\n        t += clamp(h, 0.02, 0.11);\n        if( h<0.001 || t>tmax ) break;\n      }\n      return clamp(res, 0., 1.);\n    }\n\n    float calcAO(in vec3 pos, in vec3 nor)\n    {\n      float occ = 0.0;\n      float sca = 1.0;\n      for (int i=0; i<5; i++)\n      {\n        float hr = 0.01 + 0.12*float(i)/4.0;\n        vec3 aopos =  nor * hr + pos;\n        float dd = distanceEstimate(aopos).x;\n        occ += -(dd-hr)*sca;\n        sca *= 0.95;\n      }\n      return clamp(1.0 - 3.0*occ, 0., 1.);\n    }\n\n    vec3 sunLight  = normalize(vec3(-0.6, 0.7, 0.5));\n    vec3 sunColour = vec3(1.0, .75, .6);\n    vec3 Sky(in vec3 rayDir)\n    {\n      float sunAmount = max(dot(rayDir, sunLight), 0.0);\n      float v = pow(1.0 - max(rayDir.y, 0.0), 6.);\n      vec3  sky = mix(vec3(.1, .2, .3), vec3(.32, .32, .32), v);\n      sky = sky + sunColour * sunAmount * sunAmount * .25;\n      sky = sky + sunColour * min(pow(sunAmount, 800.0)*1.5, .3);\n\n      return clamp(sky, 0., 1.);\n    }\n\n    const float horizonLength = 100.;\n    const float surfacePrecision = 0.01;\n    const int maxIterations = 128;\n    vec2 castRay(vec3 rayOrigin, vec3 rayDir)\n    {\n      float t = 0.;\n      for (int i=0; i<maxIterations; i++)\n      {\n        vec3 p = rayOrigin + rayDir * t;\n        vec2 d = distanceEstimate(p);\n        if (abs(d.x) < surfacePrecision)\n        {\n          return vec2(t, d.y);\n        }\n        t += d.x;\n        if (t >= horizonLength) break;\n      }\n      return vec2(t, -1.);\n    }\n\n    vec3 getRay(vec3 dir, vec2 pos) {\n      pos = pos - 0.5;\n      pos.x *= resolution.x/resolution.y;\n\n      dir = normalize(dir);\n      vec3 right = normalize(cross(vec3(0., 1., 0.), dir));\n      vec3 up = normalize(cross(dir, right));\n\n      return dir + right*pos.x + up*pos.y;\n    }\n\n    vec3 render(in vec3 ro, in vec3 rd)\n    {\n      vec3 skyColor = Sky(rd);\n      vec3 color = skyColor;\n      vec2 res = castRay(ro, rd);\n      float t = res.x;\n      float material = res.y;\n      if (t < horizonLength)\n      {\n        vec3 pos = ro + t*rd;\n        vec3 normal = getNormal(pos);\n        vec3 reflectionDir = reflect(rd, normal);\n\n        // material\n        color = 0.45 + 0.3*sin(vec3(0.05, 0.08, 0.10)) * material;\n\n        if (material == 0.0)\n        {\n          float f = mod(floor(2.*pos.z) + floor(2.*pos.x), 2.);\n          color = 0.4 + 0.1*f*vec3(1.);\n        }\n\n        // lighting\n        float occ = calcAO(pos, normal);\n        float amb = clamp(0.5+0.5*normal.y, 0., 1.);\n        float dif = clamp(dot(normal, sunLight), 0., 1.);\n        float bac = clamp(dot(normal, normalize(vec3(-sunLight.x, 0., -sunLight.z))), 0., 1.) * clamp(1.0-pos.y, 0., 1.);\n        float dom = smoothstep(-0.1, 0.1, reflectionDir.y);\n        float fre = pow(clamp(1.0+dot(normal, rd), 0., 1.), 2.);\n        float spe = pow(clamp(dot(reflectionDir, sunLight), 0., 1.), 16.);\n\n        dif *= softshadow(pos, sunLight, 0.02, 2.5);\n        dom *= softshadow(pos, reflectionDir, 0.02, 2.5);\n\n        vec3 lin = vec3(0.);\n        lin += 1.20 * dif * vec3(1.00, 0.85, 0.55);\n        lin += 1.20 * spe * vec3(1.00, 0.85, 0.55) * dif;\n        lin += 0.20 * amb * vec3(0.50, 0.70, 1.00) * occ;\n        lin += 0.30 * dom * vec3(0.50, 0.70, 1.00) * occ;\n        lin += 0.30 * bac * vec3(0.25, 0.25, 0.25) * occ;\n        lin += 0.40 * fre * vec3(1.00, 1.00, 1.00) * occ;\n        color = color * lin;\n\n        color = mix(color, skyColor, 1.0-exp(-0.001*t*t));\n      }\n      return vec3(clamp(color, 0., 1.));\n    }\n\n    void main () {\n      vec2 p = gl_FragCoord.xy / resolution.xy;\n      vec3 rayDir = normalize(getRay(eye-center, p));\n      vec3 res = render(center, rayDir);\n      gl_FragColor = vec4(res.rgb, 1.);\n    }",
attributes:{position:[-4,-4,4,-4,0,4]},uniforms:{height:ha.context("viewportHeight"),width:ha.context("viewportWidth"),timestep:ha.context("tick")},count:3});ha.frame(function(){k(function(){F()})})},{"../regl":47,"./util/camera":2}],2:[function(O,ha,xa){var k=O("mouse-change"),F=O("mouse-wheel"),J=O("gl-mat4/identity"),L=O("gl-mat4/perspective"),f=O("gl-mat4/lookAt");ha.exports=function(h,g){function b(b){b*=.9;return.1>Math.abs(b)?0:b}function B(h){var d=y.center,g=y.eye,k=y.up;y.theta+=G;y.phi=
Math.min(Math.max(y.phi+ba,-Math.PI/2),Math.PI/2);y.distance=Math.min(Math.max(y.distance+x,t),u);G=b(G);ba=b(ba);x=b(x);for(var e=y.theta,r=y.phi,E=Math.exp(y.distance),p=E*Math.sin(e)*Math.cos(r),e=E*Math.cos(e)*Math.cos(r),r=E*Math.sin(r),E=0;3>E;++E)g[E]=d[E]+p*aa[E]+e*K[E]+r*k[E];f(y.view,g,d,k);P(h)}var y={view:J(new Float32Array(16)),projection:J(new Float32Array(16)),center:new Float32Array(g.center||3),theta:g.theta||0,phi:g.phi||0,distance:Math.log(g.distance||10),eye:new Float32Array(3),
up:new Float32Array(g.up||[0,1,0])},K=new Float32Array([1,0,0]),aa=new Float32Array([0,0,1]),t=Math.log("minDistance"in g?g.minDistance:.1),u=Math.log("maxDistance"in g?g.maxDistance:1E3),G=0,ba=0,x=0,T=0,r=0;k(function(b,h,g){if(b&1){b=(g-r)/window.innerHeight;var f=Math.max(y.distance,.5);G+=(h-T)/window.innerWidth*f;ba+=f*b}T=h;r=g});F(function(b,h){x+=h/window.innerHeight});var P=h({context:Object.assign({},y,{projection:function(b){return L(y.projection,Math.PI/4,b.viewportWidth/b.viewportHeight,
.01,1E3)}}),uniforms:Object.keys(y).reduce(function(b,g){b[g]=h.context(g);return b},{})});Object.keys(y).forEach(function(b){B[b]=y[b]});return B}},{"gl-mat4/identity":39,"gl-mat4/lookAt":40,"gl-mat4/perspective":41,"mouse-change":42,"mouse-wheel":44}],3:[function(O,ha,xa){function k(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var F=O("./util/sorted-object-keys"),J=O("./util/check"),L=O("./util/values"),
f=O("./constants/dtypes.json"),h=O("./util/is-typed-array"),g=O("./util/is-ndarray"),b=O("./constants/primitives.json"),B="attributes elements offset count primitive instances".split(" ");ha.exports=function(y,K,aa,t,u,G,ba){function x(b){if(b!==W.currentVAO){var h=K.oes_vertex_array_object;b?h.bindVertexArrayOES(b.vao):h.bindVertexArrayOES(null);W.currentVAO=b}}function T(b){if(b!==W.currentVAO){if(b)b.bindAttrs();else{for(var h=K.angle_instanced_arrays,g=0;g<n.length;++g){var d=n[g];d.buffer?(y.enableVertexAttribArray(g),
d.buffer.bind(),y.vertexAttribPointer(g,d.size,d.type,d.normalized,d.stride,d.offfset),h&&d.divisor&&h.vertexAttribDivisorANGLE(g,d.divisor)):(y.disableVertexAttribArray(g),y.vertexAttrib4f(g,d.x,d.y,d.z,d.w))}ba.elements?y.bindBuffer(34963,ba.elements.buffer.buffer):y.bindBuffer(34963,null)}W.currentVAO=b}}function r(){L(e).forEach(function(b){b.destroy()})}function P(){this.id=++U;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=
4;var b=K.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;e[this.id]=this;this.buffers=[]}function ja(){K.oes_vertex_array_object&&L(e).forEach(function(b){b.refresh()})}var d=aa.maxAttributes,n=Array(d);for(aa=0;aa<d;++aa)n[aa]=new k;var U=0,e={},W={Record:k,scope:{},state:n,currentVAO:null,targetVAO:null,restore:K.oes_vertex_array_object?ja:function(){},createVAO:function(E){function p(E){var n;if(Array.isArray(E))n=E,e.elements&&e.ownsElements&&e.elements.destroy(),e.elements=
null,e.ownsElements=!1,e.offset=0,e.count=0,e.instances=-1,e.primitive=4;else{J("object"===typeof E,"invalid arguments for create vao");J("attributes"in E,"must specify attributes for vao");if(E.elements){var c=E.elements;e.ownsElements?("function"===typeof c&&"elements"===c._reglType?e.elements.destroy():e.elements(c),e.ownsElements=!1):G.getElements(E.elements)?(e.elements=E.elements,e.ownsElements=!1):(e.elements=G.create(E.elements),e.ownsElements=!0)}else e.elements=null,e.ownsElements=!1;n=
E.attributes;e.offset=0;e.count=-1;e.instances=-1;e.primitive=4;e.elements&&(e.count=e.elements._elements.vertCount,e.primitive=e.elements._elements.primType);"offset"in E&&(e.offset=E.offset|0);"count"in E&&(e.count=E.count|0);"instances"in E&&(e.instances=E.instances|0);"primitive"in E&&(J(E.primitive in b,"bad primitive type: "+E.primitive),e.primitive=b[E.primitive]);J.optional(function(){for(var a=F(E),c=0;c<a.length;++c)J(0<=B.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+
B)});J(Array.isArray(n),"attributes must be an array")}J(n.length<d,"too many attributes");J(0<n.length,"must specify at least one attribute");var c={},q=e.attributes;q.length=n.length;for(var a=0;a<n.length;++a){var r=n[a],A=q[a]=new k,U=r.data||r;if(Array.isArray(U)||h(U)||g(U)){var x;e.buffers[a]&&(x=e.buffers[a],h(U)&&x._buffer.byteLength>=U.byteLength?x.subdata(U):(x.destroy(),e.buffers[a]=null));e.buffers[a]||(x=e.buffers[a]=u.create(r,34962,!1,!0));A.buffer=u.getBuffer(x);A.size=A.buffer.dimension|
0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;c[a]=1}else u.getBuffer(r)?(A.buffer=u.getBuffer(r),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=0,A.stride=0,A.divisor=0,A.state=1):u.getBuffer(r.buffer)?(A.buffer=u.getBuffer(r.buffer),A.size=(+r.size||A.buffer.dimension)|0,A.normalized=!!r.normalized||!1,"type"in r?(J.parameter(r.type,f,"invalid buffer type"),A.type=f[r.type]):A.type=A.buffer.dtype,A.offset=(r.offset||0)|0,A.stride=
(r.stride||0)|0,A.divisor=(r.divisor||0)|0,A.state=1,J(1<=A.size&&4>=A.size,"size must be between 1 and 4"),J(0<=A.offset,"invalid offset"),J(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),J(0<=A.divisor,"divisor must be positive"),J(!A.divisor||!!K.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in r?(J(0<a,"first attribute must not be a constant"),A.x=+r.x||0,A.y=+r.y||0,A.z=+r.z||0,A.w=+r.w||0,A.state=2):J(!1,"invalid attribute spec for location "+
a)}for(x=0;x<e.buffers.length;++x)!c[x]&&e.buffers[x]&&(e.buffers[x].destroy(),e.buffers[x]=null);e.refresh();return p}var e=new P;t.vaoCount+=1;p.destroy=function(){for(var b=0;b<e.buffers.length;++b)e.buffers[b]&&e.buffers[b].destroy();e.buffers.length=0;e.ownsElements&&(e.elements.destroy(),e.elements=null,e.ownsElements=!1);e.destroy()};p._vao=e;p._reglType="vao";return p(E)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var h=0;h<n.length;++h){var g=
n[h];g.buffer===b&&(y.disableVertexAttribArray(h),g.buffer=null)}},setVAO:K.oes_vertex_array_object?x:T,clear:K.oes_vertex_array_object?r:function(){}};P.prototype.bindAttrs=function(){for(var b=K.angle_instanced_arrays,h=this.attributes,g=0;g<h.length;++g){var e=h[g];e.buffer?(y.enableVertexAttribArray(g),y.bindBuffer(34962,e.buffer.buffer),y.vertexAttribPointer(g,e.size,e.type,e.normalized,e.stride,e.offset),b&&e.divisor&&b.vertexAttribDivisorANGLE(g,e.divisor)):(y.disableVertexAttribArray(g),y.vertexAttrib4f(g,
e.x,e.y,e.z,e.w))}for(b=h.length;b<d;++b)y.disableVertexAttribArray(b);(b=G.getElements(this.elements))?y.bindBuffer(34963,b.buffer.buffer):y.bindBuffer(34963,null)};P.prototype.refresh=function(){var b=K.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),W.currentVAO=null,b.bindVertexArrayOES(null))};P.prototype.destroy=function(){if(this.vao){var b=K.oes_vertex_array_object;this===W.currentVAO&&(W.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);
this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);e[this.id]&&(delete e[this.id],--t.vaoCount)};return W}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./util/check":22,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/sorted-object-keys":35,"./util/values":37}],4:[function(O,ha,xa){function k(b){return aa[Object.prototype.toString.call(b)]|0}function F(b,h){for(var g=0;g<h.length;++g)b[g]=h[g]}function J(b,h,g,r,f,k,d){for(var n=
0,U=0;U<g;++U)for(var e=0;e<r;++e)b[n++]=h[f*U+k*e+d]}var L=O("./util/sorted-object-keys"),f=O("./util/check"),h=O("./util/is-typed-array"),g=O("./util/is-ndarray"),b=O("./util/values"),B=O("./util/pool");xa=O("./util/flatten");var y=xa.flatten,K=xa.shape,aa=O("./constants/arraytypes.json"),t=O("./constants/dtypes.json"),u=O("./constants/usage.json"),G=[];G[5120]=1;G[5122]=2;G[5124]=4;G[5121]=1;G[5123]=2;G[5125]=4;G[5126]=4;ha.exports=function(aa,x,T,r){function P(b){this.id=U++;this.buffer=aa.createBuffer();
this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;T.profile&&(this.stats={size:0})}function ja(b,h,g){b.byteLength=h.byteLength;aa.bufferData(b.type,h,g)}function d(b,d,e,r,n,c){b.usage=e;if(Array.isArray(d)){if(b.dtype=r||5126,0<d.length)if(Array.isArray(d[0])){n=K(d);for(var q=r=1;q<n.length;++q)r*=n[q];b.dimension=r;d=y(d,n,b.dtype);ja(b,d,e);c?b.persistentData=d:B.freeType(d)}else"number"===typeof d[0]?(b.dimension=n,n=B.allocType(b.dtype,
d.length),F(n,d),ja(b,n,e),c?b.persistentData=n:B.freeType(n)):h(d[0])?(b.dimension=d[0].length,b.dtype=r||k(d[0])||5126,d=y(d,[d.length,d[0].length],b.dtype),ja(b,d,e),c?b.persistentData=d:B.freeType(d)):f.raise("invalid buffer data")}else if(h(d))b.dtype=r||k(d),b.dimension=n,ja(b,d,e),c&&(b.persistentData=new Uint8Array(new Uint8Array(d.buffer)));else if(g(d)){n=d.shape;var a=d.stride,q=d.offset,U=0,A=0,x=0,P=0;1===n.length?(U=n[0],A=1,x=a[0],P=0):2===n.length?(U=n[0],A=n[1],x=a[0],P=a[1]):f.raise("invalid shape");
b.dtype=r||k(d.data)||5126;b.dimension=A;n=B.allocType(b.dtype,U*A);J(n,d.data,U,A,x,P,q);ja(b,n,e);c?b.persistentData=n:B.freeType(n)}else d instanceof ArrayBuffer?(b.dtype=5121,b.dimension=n,ja(b,d,e),c&&(b.persistentData=new Uint8Array(new Uint8Array(d)))):f.raise("invalid buffer data")}function n(b){x.bufferCount--;r(b);var h=b.buffer;f(h,"buffer must not be deleted already");aa.deleteBuffer(h);b.buffer=null;delete e[b.id]}var U=0,e={};P.prototype.bind=function(){aa.bindBuffer(this.type,this.buffer)};
P.prototype.destroy=function(){n(this)};var W=[];T.profile&&(x.getTotalBufferSize=function(){var b=0;L(e).forEach(function(h){b+=e[h].stats.size});return b});return{create:function(b,p,r,U){function C(a){var c=35044,b=null,e=0,p=0,E=1;Array.isArray(a)||h(a)||g(a)||a instanceof ArrayBuffer?b=a:"number"===typeof a?e=a|0:a&&(f.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(f(null===b||Array.isArray(b)||h(b)||g(b),"invalid data for buffer"),b=a.data),"usage"in
a&&(f.parameter(a.usage,u,"invalid buffer usage"),c=u[a.usage]),"type"in a&&(f.parameter(a.type,t,"invalid buffer type"),p=t[a.type]),"dimension"in a&&(f.type(a.dimension,"number","invalid dimension"),E=a.dimension|0),"length"in a&&(f.nni(e,"buffer length must be a nonnegative integer"),e=a.length|0));q.bind();b?d(q,b,c,p,E,U):(e&&aa.bufferData(q.type,e,c),q.dtype=p||5121,q.usage=c,q.dimension=E,q.byteLength=e);T.profile&&(q.stats.size=q.byteLength*G[q.dtype]);return C}function c(a,c){f(c+a.byteLength<=
q.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+c+" to a buffer of size "+q.byteLength);aa.bufferSubData(q.type,c,a)}x.bufferCount++;var q=new P(p);e[q.id]=q;r||C(b);C._reglType="buffer";C._buffer=q;C.subdata=function(a,b){var d=(b||0)|0,e;q.bind();if(h(a)||a instanceof ArrayBuffer)c(a,d);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var p=B.allocType(q.dtype,a.length);F(p,a);c(p,d);B.freeType(p)}else Array.isArray(a[0])||
h(a[0])?(e=K(a),p=y(a,e,q.dtype),c(p,d),B.freeType(p)):f.raise("invalid buffer data")}else if(g(a)){e=a.shape;var E=a.stride,n=p=0,r=0,Q=0;1===e.length?(p=e[0],n=1,r=E[0],Q=0):2===e.length?(p=e[0],n=e[1],r=E[0],Q=E[1]):f.raise("invalid shape");e=Array.isArray(a.data)?q.dtype:k(a.data);e=B.allocType(e,p*n);J(e,a.data,p,n,r,Q,a.offset);c(e,d);B.freeType(e)}else f.raise("invalid data for buffer subdata");return C};T.profile&&(C.stats=q.stats);C.destroy=function(){n(q)};return C},createStream:function(b,
h){var g=W.pop();g||(g=new P(b));g.bind();d(g,h,35040,0,1,!1);return g},destroyStream:function(b){W.push(b)},clear:function(){b(e).forEach(n);W.forEach(n)},getBuffer:function(b){return b&&b._buffer instanceof P?b._buffer:null},restore:function(){b(e).forEach(function(b){b.buffer=aa.createBuffer();aa.bindBuffer(b.type,b.buffer);aa.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:d}}},{"./constants/arraytypes.json":5,"./constants/dtypes.json":6,"./constants/usage.json":8,"./util/check":22,
"./util/flatten":27,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/pool":33,"./util/sorted-object-keys":35,"./util/values":37}],5:[function(O,ha,xa){ha.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],6:[function(O,ha,xa){ha.exports={int8:5120,
int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],7:[function(O,ha,xa){ha.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],8:[function(O,ha,xa){ha.exports={"static":35044,dynamic:35048,stream:35040}},{}],9:[function(O,ha,xa){function k(b){return Array.isArray(b)||aa(b)||t(b)}function F(b){return b.sort(function(b,h){return"viewport"===b?-1:"viewport"===h?1:b<h?-1:1})}function J(b,
h,d,g){this.thisDep=b;this.contextDep=h;this.propDep=d;this.append=g}function L(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function f(b){return new J(!1,!1,!1,b)}function h(b,h){var d=b.type;if(0===d)return d=b.data.length,new J(!0,1<=d,2<=d,h);if(4===d)return d=b.data,new J(d.thisDep,d.contextDep,d.propDep,h);if(5===d)return new J(!1,!1,!1,h);if(6===d){for(var g=d=!1,e=!1,c=0;c<b.data.length;++c){var q=b.data[c];1===q.type?e=!0:2===q.type?g=!0:3===q.type?d=!0:0===q.type?(d=!0,q=q.data,1<=
q&&(g=!0),2<=q&&(e=!0)):4===q.type&&(d=d||q.data.thisDep,g=g||q.data.contextDep,e=e||q.data.propDep)}return new J(d,g,e,h)}return new J(3===d,2===d,1===d,h)}var g=O("./util/sorted-object-keys"),b=O("./util/check"),B=O("./util/extend"),y=O("./util/codegen"),K=O("./util/loop"),aa=O("./util/is-typed-array"),t=O("./util/is-ndarray"),u=O("./util/is-array-like"),G=O("./dynamic"),ba=O("./constants/primitives.json"),x=O("./constants/dtypes.json"),T=["x","y","z","w"],r="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),
P={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ja="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
d={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},n={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},U={frag:35632,vert:35633},e={cw:2304,ccw:2305},W=new J(!1,!1,!1,function(){});ha.exports=function(E,p,t,D,C,c,q,a,aa,A,ia,cc,Y,ea,R){function Q(b){return b.replace(".","_")}function z(b,a,c){var d=Q(b);ua.push(b);
Z[d]=ka[d]=!!c;Ja[d]=a}function m(b,a,c){var d=Q(b);ua.push(b);Array.isArray(c)?(ka[d]=c.slice(),Z[d]=c.slice()):ka[d]=Z[d]=c;Fa[d]=a}function V(){var a=y(),c=a.link,d=a.global;a.id=yd++;a.batchId="0";var h=c(gb),m=a.shared={props:"a0"};g(gb).forEach(function(a){m[a]=d.def(h,".",a)});b.optional(function(){a.CHECK=c(b);a.commandStr=b.guessCommand();a.command=c(a.commandStr);a.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",c(d),",",this.command,");")};da.invalidBlendCombinations=
ja});var l=a.next={},w=a.current={};g(Fa).forEach(function(a){Array.isArray(ka[a])&&(l[a]=d.def(m.next,".",a),w[a]=d.def(m.current,".",a))});var v=a.constants={};g(da).forEach(function(a){v[a]=d.def(JSON.stringify(da[a]))});a.invoke=function(b,d){switch(d.type){case 0:var h=["this",m.context,m.props,a.batchId];return b.def(c(d.data),".call(",h.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(m.props,d.data);case 2:return b.def(m.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,
b),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(c){return a.invoke(b,c)})}};a.attribCache={};var e={};a.scopeAttrib=function(a){a=p.id(a);if(a in e)return e[a];var b=A.scope[a];b||(b=A.scope[a]=new sa);return e[a]=c(b)};return a}function N(a){var b=a["static"];a=a.dynamic;var c;if("profile"in b){var d=!!b.profile;c=f(function(a,b){return d});c.enable=d}else if("profile"in a){var m=a.profile;c=h(m,function(a,b){return a.invoke(b,m)})}return c}function va(c,d){var m=
c["static"],g=c.dynamic;if("framebuffer"in m){var l=m.framebuffer;return l?(l=a.getFramebuffer(l),b.command(l,"invalid framebuffer object"),f(function(a,b){var c=a.link(l),d=a.shared;b.set(d.framebuffer,".next",c);d=d.context;b.set(d,".framebufferWidth",c+".width");b.set(d,".framebufferHeight",c+".height");return c})):f(function(a,b){var c=a.shared;b.set(c.framebuffer,".next","null");c=c.context;b.set(c,".framebufferWidth",c+".drawingBufferWidth");b.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in g){var w=g.framebuffer;return h(w,function(a,c){var d=a.invoke(c,w),h=a.shared,m=h.framebuffer,l=c.def(m,".getFramebuffer(",d,")");b.optional(function(){a.assert(c,"!"+d+"||"+l,"invalid framebuffer object")});c.set(m,".next",l);h=h.context;c.set(h,".framebufferWidth",l+"?"+l+".width:"+h+".drawingBufferWidth");c.set(h,".framebufferHeight",l+"?"+l+".height:"+h+".drawingBufferHeight");return l})}return null}function oa(a,c,d){function m(a){if(a in l){var w=l[a];b.commandType(w,
"object","invalid "+a,d.commandStr);var v=!0,e=w.x|0,H=w.y|0,M,X;"width"in w?(M=w.width|0,b.command(0<=M,"invalid "+a,d.commandStr)):v=!1;"height"in w?(X=w.height|0,b.command(0<=X,"invalid "+a,d.commandStr)):v=!1;return new J(!v&&c&&c.thisDep,!v&&c&&c.contextDep,!v&&c&&c.propDep,function(a,b){var c=a.shared.context,d=M;"width"in w||(d=b.def(c,".","framebufferWidth","-",e));var h=X;"height"in w||(h=b.def(c,".","framebufferHeight","-",H));return[e,H,d,h]})}if(a in g){var p=g[a],v=h(p,function(c,d){var h=
c.invoke(d,p);b.optional(function(){c.assert(d,h+"&&typeof "+h+'==="object"',"invalid "+a)});var m=c.shared.context,l=d.def(h,".x|0"),w=d.def(h,".y|0"),g=d.def('"width" in ',h,"?",h,".width|0:","(",m,".","framebufferWidth","-",l,")"),v=d.def('"height" in ',h,"?",h,".height|0:","(",m,".","framebufferHeight","-",w,")");b.optional(function(){c.assert(d,g+">=0&&"+v+">=0","invalid "+a)});return[l,w,g,v]});c&&(v.thisDep=v.thisDep||c.thisDep,v.contextDep=v.contextDep||c.contextDep,v.propDep=v.propDep||c.propDep);
return v}return c?new J(c.thisDep,c.contextDep,c.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".","framebufferWidth"),b.def(c,".","framebufferHeight")]}):null}var l=a["static"],g=a.dynamic;if(a=m("viewport")){var w=a;a=new J(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=w.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",c[2]);b.set(d,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:m("scissor.box")}}function l(a,c){var d=a["static"];if("string"===typeof d.frag&&
"string"===typeof d.vert){if(0<g(c.dynamic).length)return null;var d=c["static"],h=g(d);if(0<h.length&&"number"===typeof d[h[0]]){for(var m=[],l=0;l<h.length;++l)b("number"===typeof d[h[l]],"must specify all vertex attribute locations when using vaos"),m.push([d[h[l]]|0,h[l]]);return m}}return null}function I(a,c,d){function m(a){if(a in l){var c=p.id(l[a]);b.optional(function(){ia.shader(U[a],c,b.guessCommand())});var d=f(function(){return c});d.id=c;return d}if(a in w){var g=w[a];return h(g,function(c,
d){var h=c.invoke(d,g),m=d.def(c.shared.strings,".id(",h,")");b.optional(function(){d(c.shared.shader,".shader(",U[a],",",m,",",c.command,");")});return m})}return null}var l=a["static"],w=a.dynamic,g=m("frag"),v=m("vert"),e=null;L(g)&&L(v)?(e=ia.program(v.id,g.id,null,d),a=f(function(a,c){return a.link(e)})):a=new J(g&&g.thisDep||v&&v.thisDep,g&&g.contextDep||v&&v.contextDep,g&&g.propDep||v&&v.propDep,function(a,c){var d=a.shared.shader,h;h=g?g.append(a,c):c.def(d,".","frag");var m;m=v?v.append(a,
c):c.def(d,".","vert");var l=d+".program("+m+","+h;b.optional(function(){l+=","+a.command});return c.def(l+")")});return{frag:g,vert:v,progVar:a,program:e}}function ca(a,d){function m(a,c){if(a in l){var g=l[a]|0;c?w.offset=g:w.instances=g;b.command(!c||0<=g,"invalid "+a,d.commandStr);return f(function(a,b){c&&(a.OFFSET=g);return g})}if(a in v){var X=v[a];return h(X,function(d,h){var l=d.invoke(h,X);c&&(d.OFFSET=l,b.optional(function(){d.assert(h,l+">=0","invalid "+a)}));return l})}if(c){if(M)return f(function(a,
c){return a.OFFSET=0});if(e)return new J(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(e)return new J(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var l=a["static"],v=a.dynamic,w={},e=!1,H=function(){if("vao"in l){var a=l.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));e=!0;w.vao=a;return f(function(c){var b=
A.getVAO(a);return b?c.link(b):"null"})}if("vao"in v){e=!0;var c=v.vao;return h(c,function(a,b){var d=a.invoke(b,c);return b.def(a.shared.vao+".getVAO("+d+")")})}return null}(),M=!1,X=function(){if("elements"in l){var a=l.elements;w.elements=a;if(k(a)){var m=w.elements=c.create(a,!0),a=c.getElements(m);M=!0}else a&&(a=c.getElements(a),M=!0,b.command(a,"invalid elements",d.commandStr));m=f(function(c,b){if(a){var d=c.link(a);return c.ELEMENTS=d}return c.ELEMENTS=null});m.value=a;return m}if("elements"in
v){M=!0;var g=v.elements;return h(g,function(a,c){var d=a.shared,h=d.isBufferArgs,d=d.elements,l=a.invoke(c,g),m=c.def("null"),h=c.def(h,"(",l,")"),v=a.cond(h).then(m,"=",d,".createStream(",l,");")["else"](m,"=",d,".getElements(",l,");");b.optional(function(){a.assert(v["else"],"!"+l+"||"+m,"invalid elements")});c.entry(v);c.exit(a.cond(h).then(d,".destroyStream(",m,");"));return a.ELEMENTS=m})}return e?new J(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),p=m("offset",!0),q=function(){if("primitive"in l){var a=l.primitive;w.primitive=a;b.commandParameter(a,ba,"invalid primitve",d.commandStr);return f(function(c,b){return ba[a]})}if("primitive"in v){var c=v.primitive;return h(c,function(a,d){var h=a.constants.primTypes,l=a.invoke(d,c);b.optional(function(){a.assert(d,l+" in "+h,"invalid primitive, must be one of "+g(ba))});return d.def(h,"[",l,"]")})}return M?L(X)?
X.value?f(function(a,c){return c.def(a.ELEMENTS,".primType")}):f(function(){return 4}):new J(X.thisDep,X.contextDep,X.propDep,function(a,c){var b=a.ELEMENTS;return c.def(b,"?",b,".primType:",4)}):e?new J(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),n=function(){if("count"in l){var a=l.count|0;w.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",d.commandStr);return f(function(){return a})}if("count"in
v){var c=v.count;return h(c,function(a,d){var h=a.invoke(d,c);b.optional(function(){a.assert(d,"typeof "+h+'==="number"&&'+h+">=0&&"+h+"===("+h+"|0)","invalid vertex count")});return h})}if(M){if(L(X)){if(X)return p?new J(p.thisDep,p.contextDep,p.propDep,function(a,c){var d=c.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(c,d+">=0","invalid vertex offset/element buffer too small")});return d}):f(function(a,c){return c.def(a.ELEMENTS,".vertCount")});var m=f(function(){return-1});
b.optional(function(){m.MISSING=!0});return m}var g=new J(X.thisDep||p.thisDep,X.contextDep||p.contextDep,X.propDep||p.propDep,function(a,c){var b=a.ELEMENTS;return a.OFFSET?c.def(b,"?",b,".vertCount-",a.OFFSET,":-1"):c.def(b,"?",b,".vertCount:-1")});b.optional(function(){g.DYNAMIC=!0});return g}return e?new J(H.thisDep,H.contextDep,H.propDep,function(a,c){return c.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),r=m("instances",!1);return{elements:X,primitive:q,count:n,
instances:r,offset:p,vao:H,vaoActive:e,elementsActive:M,"static":w}}function S(a,c){var l=a["static"],m=a.dynamic,v={};ua.forEach(function(a){function w(c,b){if(a in l){var d=c(l[a]);v[H]=f(function(){return d})}else if(a in m){var g=m[a];v[H]=h(g,function(a,c){return b(a,c,a.invoke(c,g))})}}var H=Q(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return w(function(d){b.commandType(d,
"boolean",a,c.commandStr);return d},function(c,d,h){b.optional(function(){c.assert(d,"typeof "+h+'==="boolean"',"invalid flag "+a,c.commandStr)});return h});case "depth.func":return w(function(h){b.commandParameter(h,d,"invalid "+a,c.commandStr);return d[h]},function(c,h,l){var m=c.constants.compareFuncs;b.optional(function(){c.assert(h,l+" in "+m,"invalid "+a+", must be one of "+g(d))});return h.def(m,"[",l,"]")});case "depth.range":return w(function(a){b.command(u(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",c.commandStr);return a},function(a,c,d){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var h=c.def("+",d,"[0]"),l=c.def("+",d,"[1]");return[h,l]});case "blend.func":return w(function(a){b.commandType(a,"object","blend.func",c.commandStr);var d="srcRGB"in a?a.srcRGB:a.src,h="srcAlpha"in a?a.srcAlpha:
a.src,l="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(d,P,H+".srcRGB",c.commandStr);b.commandParameter(h,P,H+".srcAlpha",c.commandStr);b.commandParameter(l,P,H+".dstRGB",c.commandStr);b.commandParameter(a,P,H+".dstAlpha",c.commandStr);b.command(-1===ja.indexOf(d+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+l+")",c.commandStr);return[P[d],P[l],P[h],P[a]]},function(c,d,h){function l(w,v){var e=d.def('"',w,v,'" in ',h,"?",h,".",w,v,":",h,".",
w);b.optional(function(){c.assert(d,e+" in "+m,"invalid "+a+"."+w+v+", must be one of "+g(P))});return e}var m=c.constants.blendFuncs;b.optional(function(){c.assert(d,h+"&&typeof "+h+'==="object"',"invalid blend func, must be an object")});var w=l("src","RGB"),v=l("dst","RGB");b.optional(function(){c.assert(d,c.constants.invalidBlendCombinations+".indexOf("+w+'+", "+'+v+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var e=d.def(m,"[",w,"]"),H=d.def(m,"[",l("src","Alpha"),"]"),
X=d.def(m,"[",v,"]"),M=d.def(m,"[",l("dst","Alpha"),"]");return[e,X,H,M]});case "blend.equation":return w(function(d){if("string"===typeof d)return b.commandParameter(d,Ha,"invalid "+a,c.commandStr),[Ha[d],Ha[d]];if("object"===typeof d)return b.commandParameter(d.rgb,Ha,a+".rgb",c.commandStr),b.commandParameter(d.alpha,Ha,a+".alpha",c.commandStr),[Ha[d.rgb],Ha[d.alpha]];b.commandRaise("invalid blend.equation",c.commandStr)},function(c,d,h){var l=c.constants.blendEquations,m=d.def(),w=d.def(),v=c.cond("typeof ",
h,'==="string"');b.optional(function(){function b(a,d,h){c.assert(a,h+" in "+l,"invalid "+d+", must be one of "+g(Ha))}b(v.then,a,h);c.assert(v["else"],h+"&&typeof "+h+'==="object"',"invalid "+a);b(v["else"],a+".rgb",h+".rgb");b(v["else"],a+".alpha",h+".alpha")});v.then(m,"=",w,"=",l,"[",h,"];");v["else"](m,"=",l,"[",h,".rgb];",w,"=",l,"[",h,".alpha];");d(v);return[m,w]});case "blend.color":return w(function(a){b.command(u(a)&&4===a.length,"blend.color must be a 4d array",c.commandStr);return K(4,
function(c){return+a[c]})},function(a,c,d){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+d+")&&"+d+".length===4","blend.color must be a 4d array")});return K(4,function(a){return c.def("+",d,"[",a,"]")})});case "stencil.mask":return w(function(a){b.commandType(a,"number",H,c.commandStr);return a|0},function(a,c,d){b.optional(function(){a.assert(c,"typeof "+d+'==="number"',"invalid stencil.mask")});return c.def(d,"|0")});case "stencil.func":return w(function(h){b.commandType(h,"object",
H,c.commandStr);var l=h.cmp||"keep",m=h.ref||0;h="mask"in h?h.mask:-1;b.commandParameter(l,d,a+".cmp",c.commandStr);b.commandType(m,"number",a+".ref",c.commandStr);b.commandType(h,"number",a+".mask",c.commandStr);return[d[l],m,h]},function(a,c,d){var h=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(c,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(d+"&&typeof ",d,'==="object"');b('!("cmp" in ',d,")||(",d,".cmp in ",h,")")});var l=c.def('"cmp" in ',d,"?",h,"[",
d,".cmp]",":",7680),m=c.def(d,".ref|0"),w=c.def('"mask" in ',d,"?",d,".mask|0:-1");return[l,m,w]});case "stencil.opFront":case "stencil.opBack":return w(function(d){b.commandType(d,"object",H,c.commandStr);var h=d.fail||"keep",l=d.zfail||"keep";d=d.zpass||"keep";b.commandParameter(h,n,a+".fail",c.commandStr);b.commandParameter(l,n,a+".zfail",c.commandStr);b.commandParameter(d,n,a+".zpass",c.commandStr);return["stencil.opBack"===a?1029:1028,n[h],n[l],n[d]]},function(c,d,h){function l(w){b.optional(function(){c.assert(d,
'!("'+w+'" in '+h+")||("+h+"."+w+" in "+m+")","invalid "+a+"."+w+", must be one of "+g(n))});return d.def('"',w,'" in ',h,"?",m,"[",h,".",w,"]:",7680)}var m=c.constants.stencilOps;b.optional(function(){c.assert(d,h+"&&typeof "+h+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return w(function(a){b.commandType(a,"object",H,c.commandStr);var d=a.factor|0;a=a.units|0;b.commandType(d,"number",H+".factor",c.commandStr);
b.commandType(a,"number",H+".units",c.commandStr);return[d,a]},function(c,d,h){b.optional(function(){c.assert(d,h+"&&typeof "+h+'==="object"',"invalid "+a)});var l=d.def(h,".factor|0"),m=d.def(h,".units|0");return[l,m]});case "cull.face":return w(function(a){var d=0;"front"===a?d=1028:"back"===a&&(d=1029);b.command(!!d,H,c.commandStr);return d},function(a,c,d){b.optional(function(){a.assert(c,d+'==="front"||'+d+'==="back"',"invalid cull.face")});return c.def(d,'==="front"?',1028,":",1029)});case "lineWidth":return w(function(a){b.command("number"===
typeof a&&a>=D.lineWidthDims[0]&&a<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+" and "+D.lineWidthDims[1],c.commandStr);return a},function(a,c,d){b.optional(function(){a.assert(c,"typeof "+d+'==="number"&&'+d+">="+D.lineWidthDims[0]+"&&"+d+"<="+D.lineWidthDims[1],"invalid line width")});return d});case "frontFace":return w(function(a){b.commandParameter(a,e,H,c.commandStr);return e[a]},function(a,c,d){b.optional(function(){a.assert(c,d+'==="cw"||'+
d+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return c.def(d+'==="cw"?2304:2305')});case "colorMask":return w(function(a){b.command(u(a)&&4===a.length,"color.mask must be length 4 array",c.commandStr);return a.map(function(a){return!!a})},function(a,c,d){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+d+")&&"+d+".length===4","invalid color.mask")});return K(4,function(a){return"!!"+d+"["+a+"]"})});case "sample.coverage":return w(function(a){b.command("object"===typeof a&&a,
H,c.commandStr);var d="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",c.commandStr);return[d,a]},function(a,c,d){b.optional(function(){a.assert(c,d+"&&typeof "+d+'==="object"',"invalid sample.coverage")});var h=c.def('"value" in ',d,"?+",d,".value:1"),l=c.def("!!",d,".invert");return[h,l]})}});return v}function ma(a,c){var d=a["static"],l=a.dynamic,m={};g(d).forEach(function(a){var h=d[a],l;if("number"===typeof h||
"boolean"===typeof h)l=f(function(){return h});else if("function"===typeof h){var w=h._reglType;"texture2d"===w||"textureCube"===w?l=f(function(a){return a.link(h)}):"framebuffer"===w||"framebufferCube"===w?(b.command(0<h.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',c.commandStr),l=f(function(a){return a.link(h.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',c.commandStr)}else u(h)?l=f(function(c){return c.global.def("[",K(h.length,function(d){b.command("number"===
typeof h[d]||"boolean"===typeof h[d],"invalid uniform "+a,c.commandStr);return h[d]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',c.commandStr);l.value=h;m[a]=l});g(l).forEach(function(a){var c=l[a];m[a]=h(c,function(a,d){return a.invoke(d,c)})});return m}function ra(a,c){var d=a["static"],l=a.dynamic,m={};g(d).forEach(function(a){var h=d[a],l=p.id(a),w=new sa;if(k(h))w.state=1,w.buffer=C.getBuffer(C.create(h,34962,!1,!0)),w.type=0;else{var v=C.getBuffer(h);if(v)w.state=1,
w.buffer=v,w.type=0;else if(b.command("object"===typeof h&&h,"invalid data for attribute "+a,c.commandStr),"constant"in h){var e=h.constant;w.buffer="null";w.state=2;"number"===typeof e?w.x=e:(b.command(u(e)&&0<e.length&&4>=e.length,"invalid constant for attribute "+a,c.commandStr),T.forEach(function(a,c){c<e.length&&(w[a]=e[c])}))}else{v=k(h.buffer)?C.getBuffer(C.create(h.buffer,34962,!1,!0)):C.getBuffer(h.buffer);b.command(!!v,'missing buffer for attribute "'+a+'"',c.commandStr);var H=h.offset|
0;b.command(0<=H,'invalid offset for attribute "'+a+'"',c.commandStr);var X=h.stride|0;b.command(0<=X&&256>X,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var M=h.size|0;b.command(!("size"in h)||0<M&&4>=M,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var q=!!h.normalized,n=0;"type"in h&&(b.commandParameter(h.type,x,"invalid type for attribute "+a,c.commandStr),n=x[h.type]);var r=h.divisor|0;b.optional(function(){"divisor"in h&&(b.command(0===
r||qa,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),b.command(0<=r,'invalid divisor for attribute "'+a+'"',c.commandStr));var d=c.commandStr,l="buffer offset divisor normalized type size stride".split(" ");g(h).forEach(function(c){b.command(0<=l.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+l+")",d)})});w.buffer=v;w.state=1;w.size=M;w.normalized=q;w.type=n||v.dtype;w.offset=H;w.stride=X;w.divisor=r}}m[a]=f(function(a,
c){var d=a.attribCache;if(l in d)return d[l];var b={isStream:!1};g(w).forEach(function(a){b[a]=w[a]});w.buffer&&(b.buffer=a.link(w.buffer),b.type=b.type||b.buffer+".dtype");return d[l]=b})});g(l).forEach(function(a){var c=l[a];m[a]=h(c,function(d,h){function l(a){h(X[a],"=",w,".",a,"|0;")}var w=d.invoke(h,c),m=d.shared,v=d.constants,e=m.isBufferArgs,H=m.buffer;b.optional(function(){d.assert(h,w+"&&(typeof "+w+'==="object"||typeof '+w+'==="function")&&('+e+"("+w+")||"+H+".getBuffer("+w+")||"+H+".getBuffer("+
w+".buffer)||"+e+"("+w+'.buffer)||("constant" in '+w+"&&(typeof "+w+'.constant==="number"||'+m.isArrayLike+"("+w+".constant))))",'invalid dynamic attribute "'+a+'"')});var X={isStream:h.def(!1)},M=new sa;M.state=1;g(M).forEach(function(a){X[a]=h.def(""+M[a])});var p=X.buffer,q=X.type;h("if(",e,"(",w,")){",X.isStream,"=true;",p,"=",H,".createStream(",34962,",",w,");",q,"=",p,".dtype;","}else{",p,"=",H,".getBuffer(",w,");","if(",p,"){",q,"=",p,".dtype;",'}else if("constant" in ',w,"){",X.state,"=",
2,";","if(typeof "+w+'.constant === "number"){',X[T[0]],"=",w,".constant;",T.slice(1).map(function(a){return X[a]}).join("="),"=0;","}else{",T.map(function(a,c){return X[a]+"="+w+".constant.length>"+c+"?"+w+".constant["+c+"]:0;"}).join(""),"}}else{","if(",e,"(",w,".buffer)){",p,"=",H,".createStream(",34962,",",w,".buffer);","}else{",p,"=",H,".getBuffer(",w,".buffer);","}",q,'="type" in ',w,"?",v.glTypes,"[",w,".type]:",p,".dtype;",X.normalized,"=!!",w,".normalized;");l("size");l("offset");l("stride");
l("divisor");h("}}");h.exit("if(",X.isStream,"){",H,".destroyStream(",p,");","}");return X})});return m}function Ca(a){var c=a["static"],d=a.dynamic,b={};g(c).forEach(function(a){var d=c[a];b[a]=f(function(a,c){return"number"===typeof d||"boolean"===typeof d?""+d:a.link(d)})});g(d).forEach(function(a){var c=d[a];b[a]=h(c,function(a,d){return a.invoke(d,c)})});return b}function ya(a,c,d,h,w){function m(a){var c=M[a];c&&(q[a]=c)}var v=a["static"],e=a.dynamic;b.optional(function(){function a(d){g(d).forEach(function(a){b.command(0<=
c.indexOf(a),'unknown parameter "'+a+'"',w.commandStr)})}var c="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);a(v);a(e)});var H=l(a,c),X=va(a,w),M=oa(a,X,w),p=ca(a,w),q=S(a,w),n=I(a,w,H);m("viewport");m(Q("scissor.box"));var r=0<g(q).length,X={framebuffer:X,draw:p,shader:n,state:q,dirty:r,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};X.profile=N(a,w);X.uniforms=ma(d,w);X.drawVAO=X.scopeVAO=p.vao;if(!X.drawVAO&&n.program&&!H&&t.angle_instanced_arrays&&
p["static"].elements){var sa=!0;a=n.program.attributes.map(function(a){a=c["static"][a];sa=sa&&!!a;return a});if(sa&&0<a.length){var E=A.getVAO(A.createVAO({attributes:a,elements:p["static"].elements}));X.drawVAO=new J(null,null,null,function(a,c){return a.link(E)});X.useVAO=!0}}H?X.useVAO=!0:X.attributes=ra(c,w);X.context=Ca(h,w);return X}function fa(a,c,d){var b=a.shared.context,h=a.scope();g(d).forEach(function(w){c.save(b,"."+w);var l=d[w].append(a,c);Array.isArray(l)?h(b,".",w,"=[",l.join(),
"];"):h(b,".",w,"=",l,";")});c(h)}function Ba(a,c,d,b){var h=a.shared,w=h.gl,l=h.framebuffer,m;Aa&&(m=c.def(h.extensions,".webgl_draw_buffers"));var v=a.constants,h=v.drawBuffer,v=v.backBuffer;a=d?d.append(a,c):c.def(l,".next");b||c("if(",a,"!==",l,".cur){");c("if(",a,"){",w,".bindFramebuffer(",36160,",",a,".framebuffer);");Aa&&c(m,".drawBuffersWEBGL(",h,"[",a,".colorAttachments.length]);");c("}else{",w,".bindFramebuffer(",36160,",null);");Aa&&c(m,".drawBuffersWEBGL(",v,");");c("}",l,".cur=",a,";");
b||c("}")}function la(a,c,d){var b=a.shared,h=b.gl,w=a.current,l=a.next,m=b.current,v=b.next,e=a.cond(m,".dirty");ua.forEach(function(c){c=Q(c);if(!(c in d.state)){var b,g;if(c in l){b=l[c];g=w[c];var H=K(ka[c].length,function(a){return e.def(b,"[",a,"]")});e(a.cond(H.map(function(a,c){return a+"!=="+g+"["+c+"]"}).join("||")).then(h,".",Fa[c],"(",H,");",H.map(function(a,c){return g+"["+c+"]="+a}).join(";"),";"))}else b=e.def(v,".",c),H=a.cond(b,"!==",m,".",c),e(H),c in Ja?H(a.cond(b).then(h,".enable(",
Ja[c],");")["else"](h,".disable(",Ja[c],");"),m,".",c,"=",b,";"):H(h,".",Fa[c],"(",b,");",m,".",c,"=",b,";")}});0===g(d.state).length&&e(m,".dirty=false;");c(e)}function pa(a,c,d,b){var h=a.shared,w=a.current,l=h.current,m=h.gl;F(g(d)).forEach(function(h){var v=d[h];if(!b||b(v)){var g=v.append(a,c);if(Ja[h]){var e=Ja[h];L(v)?g?c(m,".enable(",e,");"):c(m,".disable(",e,");"):c(a.cond(g).then(m,".enable(",e,");")["else"](m,".disable(",e,");"));c(l,".",h,"=",g,";")}else if(u(g)){var H=w[h];c(m,".",Fa[h],
"(",g,");",g.map(function(a,c){return H+"["+c+"]="+a}).join(";"),";")}else c(m,".",Fa[h],"(",g,");",l,".",h,"=",g,";")}})}function za(a,c){qa&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function Ma(a,c,d,b,h){function w(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function l(a){M=c.def();a(M,"=",w(),";");"string"===typeof h?a(e,".count+=",h,";"):a(e,".count++;");ea&&(b?(p=c.def(),a(p,"=",X,".getNumPendingQueries();")):a(X,".beginQuery(",e,");"))}
function m(a){a(e,".cpuTime+=",w(),"-",M,";");ea&&(b?a(X,".pushScopeStats(",p,",",X,".getNumPendingQueries(),",e,");"):a(X,".endQuery();"))}function v(a){var d=c.def(H,".profile");c(H,".profile=",a,";");c.exit(H,".profile=",d,";")}var g=a.shared,e=a.stats,H=g.current,X=g.timer;d=d.profile;var M,p;if(d){if(L(d)){d.enable?(l(c),m(c.exit),v("true")):v("false");return}d=d.append(a,c);v(d)}else d=c.def(H,".profile");g=a.block();l(g);c("if(",d,"){",g,"}");a=a.block();m(a);c.exit("if(",d,"){",a,"}")}function X(a,
c,d,h,w){function l(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function m(d,b,h){function w(){c("if(!",H,".buffer){",g,".enableVertexAttribArray(",e,");}");var d=h.type,l;l=h.size?c.def(h.size,"||",b):b;c("if(",H,".type!==",d,"||",H,".size!==",l,"||",p.map(function(a){return H+"."+a+"!=="+h[a]}).join("||"),"){",g,".bindBuffer(",34962,",",X,".buffer);",g,".vertexAttribPointer(",[e,l,d,
h.normalized,h.stride,h.offset],");",H,".type=",d,";",H,".size=",l,";",p.map(function(a){return H+"."+a+"="+h[a]+";"}).join(""),"}");qa&&(d=h.divisor,c("if(",H,".divisor!==",d,"){",a.instancing,".vertexAttribDivisorANGLE(",[e,d],");",H,".divisor=",d,";}"))}function l(){c("if(",H,".buffer){",g,".disableVertexAttribArray(",e,");",H,".buffer=null;","}if(",T.map(function(a,c){return H+"."+a+"!=="+M[c]}).join("||"),"){",g,".vertexAttrib4f(",e,",",M,");",T.map(function(a,c){return H+"."+a+"="+M[c]+";"}).join(""),
"}")}var g=v.gl,e=c.def(d,".location"),H=c.def(v.attributes,"[",e,"]");d=h.state;var X=h.buffer,M=[h.x,h.y,h.z,h.w],p=["buffer","normalized","offset","stride"];1===d?w():2===d?l():(c("if(",d,"===",1,"){"),w(),c("}else{"),l(),c("}"))}var v=a.shared;h.forEach(function(h){var v=h.name,e=d.attributes[v],H;if(e){if(!w(e))return;H=e.append(a,c)}else{if(!w(W))return;var X=a.scopeAttrib(v);b.optional(function(){a.assert(c,X+".state","missing attribute "+v)});H={};g(new sa).forEach(function(a){H[a]=c.def(X,
".",a)})}m(a.link(h),l(h.info.type),H)})}function $b(a,c,d,h,w,l){for(var m=a.shared,v=m.gl,g,e=0;e<h.length;++e){var H=h[e],X=H.name,M=H.info.type,q=d.uniforms[X],H=a.link(H)+".location",n;if(q){if(!w(q))continue;if(L(q)){var r=q.value;b.command(null!==r&&"undefined"!==typeof r,'missing uniform "'+X+'"',a.commandStr);if(35678===M||35680===M)b.command("function"===typeof r&&(35678===M&&("texture2d"===r._reglType||"framebuffer"===r._reglType)||35680===M&&("textureCube"===r._reglType||"framebufferCube"===
r._reglType)),"invalid texture for uniform "+X,a.commandStr),q=a.link(r._texture||r.color[0]._texture),c(v,".uniform1i(",H,",",q+".bind());"),c.exit(q,".unbind();");else if(35674===M||35675===M||35676===M){b.optional(function(){b.command(u(r),"invalid matrix for uniform "+X,a.commandStr);b.command(35674===M&&4===r.length||35675===M&&9===r.length||35676===M&&16===r.length,"invalid length for matrix uniform "+X,a.commandStr)});var q=a.global.def("new Float32Array(["+Array.prototype.slice.call(r)+"])"),
Q=2;35675===M?Q=3:35676===M&&(Q=4);c(v,".uniformMatrix",Q,"fv(",H,",false,",q,");")}else{switch(M){case 5126:b.commandType(r,"number","uniform "+X,a.commandStr);g="1f";break;case 35664:b.command(u(r)&&2===r.length,"uniform "+X,a.commandStr);g="2f";break;case 35665:b.command(u(r)&&3===r.length,"uniform "+X,a.commandStr);g="3f";break;case 35666:b.command(u(r)&&4===r.length,"uniform "+X,a.commandStr);g="4f";break;case 35670:b.commandType(r,"boolean","uniform "+X,a.commandStr);g="1i";break;case 5124:b.commandType(r,
"number","uniform "+X,a.commandStr);g="1i";break;case 35671:b.command(u(r)&&2===r.length,"uniform "+X,a.commandStr);g="2i";break;case 35667:b.command(u(r)&&2===r.length,"uniform "+X,a.commandStr);g="2i";break;case 35672:b.command(u(r)&&3===r.length,"uniform "+X,a.commandStr);g="3i";break;case 35668:b.command(u(r)&&3===r.length,"uniform "+X,a.commandStr);g="3i";break;case 35673:b.command(u(r)&&4===r.length,"uniform "+X,a.commandStr);g="4i";break;case 35669:b.command(u(r)&&4===r.length,"uniform "+X,
a.commandStr),g="4i"}c(v,".uniform",g,"(",H,",",u(r)?Array.prototype.slice.call(r):r,");")}continue}else n=q.append(a,c)}else{if(!w(W))continue;n=c.def(m.uniforms,"[",p.id(X),"]")}35678===M?(b(!Array.isArray(n),"must specify a scalar prop for textures"),c("if(",n,"&&",n,'._reglType==="framebuffer"){',n,"=",n,".color[0];","}")):35680===M&&(b(!Array.isArray(n),"must specify a scalar prop for cube maps"),c("if(",n,"&&",n,'._reglType==="framebufferCube"){',n,"=",n,".color[0];","}"));b.optional(function(){function d(b,
h){a.assert(c,b,'bad data or missing for uniform "'+X+'".  '+h)}function h(a){b(!Array.isArray(n),"must not specify an array type for uniform");d("typeof "+n+'==="'+a+'"',"invalid type, expected "+a)}function w(c,h){Array.isArray(n)?b(n.length===c,"must have length "+c):d(m.isArrayLike+"("+n+")&&"+n+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function l(c){b(!Array.isArray(n),"must not specify a value type");d("typeof "+n+'==="function"&&'+n+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(M){case 5124:h("number");break;case 35667:w(2,"number");break;case 35668:w(3,"number");break;case 35669:w(4,"number");break;case 5126:h("number");break;case 35664:w(2,"number");break;case 35665:w(3,"number");break;case 35666:w(4,"number");break;case 35670:h("boolean");break;case 35671:w(2,"boolean");break;case 35672:w(3,"boolean");break;case 35673:w(4,"boolean");break;case 35674:w(4,"number");break;case 35675:w(9,"number");break;case 35676:w(16,
"number");break;case 35678:l(3553);break;case 35680:l(34067)}});q=1;switch(M){case 35678:case 35680:q=c.def(n,"._texture");c(v,".uniform1i(",H,",",q,".bind());");c.exit(q,".unbind();");continue;case 5124:case 35670:g="1i";break;case 35667:case 35671:g="2i";q=2;break;case 35668:case 35672:g="3i";q=3;break;case 35669:case 35673:g="4i";q=4;break;case 5126:g="1f";break;case 35664:g="2f";q=2;break;case 35665:g="3f";q=3;break;case 35666:g="4f";q=4;break;case 35674:g="Matrix2fv";break;case 35675:g="Matrix3fv";
break;case 35676:g="Matrix4fv"}if("M"===g.charAt(0)){c(v,".uniform",g,"(",H,",");var H=Math.pow(M-35674+2,2),sa=a.global.def("new Float32Array(",H,")");Array.isArray(n)?c("false,(",K(H,function(a){return sa+"["+a+"]="+n[a]}),",",sa,")"):c("false,(Array.isArray(",n,")||",n," instanceof Float32Array)?",n,":(",K(H,function(a){return sa+"["+a+"]="+n+"["+a+"]"}),",",sa,")");c(");")}else{if(1<q){for(var Q=[],E=[],Ma=0;Ma<q;++Ma)Array.isArray(n)?E.push(n[Ma]):E.push(c.def(n+"["+Ma+"]")),l&&Q.push(c.def());
l&&c("if(!",a.batchId,"||",Q.map(function(a,c){return a+"!=="+E[c]}).join("||"),"){",Q.map(function(a,c){return a+"="+E[c]+";"}).join(""));c(v,".uniform",g,"(",H,",",E.join(","),");")}else b(!Array.isArray(n),"uniform value must not be an array"),l&&(q=c.def(),c("if(!",a.batchId,"||",q,"!==",n,"){",q,"=",n,";")),c(v,".uniform",g,"(",H,",",n,");");l&&c("}")}}}function Ua(a,c,d,h){function w(b){var l=e[b];return l?l.contextDep&&h.contextDynamic||l.propDep?l.append(a,d):l.append(a,c):c.def(H,".",b)}
function l(){function a(){d(q,".drawElementsInstancedANGLE(",[M,n,Q,p+"<<(("+Q+"-5121)>>1)",r],");")}function c(){d(q,".drawArraysInstancedANGLE(",[M,p,n,r],");")}X&&"null"!==X?sa?a():(d("if(",X,"){"),a(),d("}else{"),c(),d("}")):c()}function m(){function a(){d(g+".drawElements("+[M,n,Q,p+"<<(("+Q+"-5121)>>1)"]+");")}function c(){d(g+".drawArrays("+[M,p,n]+");")}X&&"null"!==X?sa?a():(d("if(",X,"){"),a(),d("}else{"),c(),d("}")):c()}var v=a.shared,g=v.gl,H=v.draw,e=h.draw,X=function(){var b=e.elements,
w=c;if(b){if(b.contextDep&&h.contextDynamic||b.propDep)w=d;b=b.append(a,w);e.elementsActive&&w("if("+b+")"+g+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=w.def(),w(b,"=",H,".","elements",";","if(",b,"){",g,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",v.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+v.vao,".currentVAO.elements);",Da?"":"if("+b+")"+g+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),M=w("primitive"),p=w("offset"),n=function(){var w=e.count,l,
m=c;if(w){if(w.contextDep&&h.contextDynamic||w.propDep)m=d;l=w.append(a,m);b.optional(function(){w.MISSING&&a.assert(c,"false","missing vertex count");w.DYNAMIC&&a.assert(m,l+">=0","missing vertex count")})}else l=m.def(H,".","count"),b.optional(function(){a.assert(m,l+">=0","missing vertex count")});return l}();if("number"===typeof n){if(0===n)return}else d("if(",n,"){"),d.exit("}");var r,q;qa&&(r=w("instances"),q=a.instancing);var Q=X+".type",sa=e.elements&&L(e.elements)&&!e.vaoActive;qa&&("number"!==
typeof r||0<=r)?"string"===typeof r?(d("if(",r,">0){"),l(),d("}else if(",r,"<0){"),m(),d("}")):l():m()}function w(a,c,d,h,w){var l=V();w=l.proc("body",w);b.optional(function(){l.commandStr=c.commandStr;l.command=l.link(c.commandStr)});qa&&(l.instancing=w.def(l.shared.extensions,".angle_instanced_arrays"));a(l,w,d,h);return l.compile().body}function v(a,c,d,b){za(a,c);d.useVAO?d.drawVAO?c(a.shared.vao,".setVAO(",d.drawVAO.append(a,c),");"):c(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(c(a.shared.vao,
".setVAO(null);"),X(a,c,d,b.attributes,function(){return!0}));$b(a,c,d,b.uniforms,function(){return!0},!1);Ua(a,c,c,d)}function M(a,c){var d=a.proc("draw",1);za(a,d);fa(a,d,c.context);Ba(a,d,c.framebuffer);la(a,d,c);pa(a,d,c.state);Ma(a,d,c,!1,!0);var b=c.shader.progVar.append(a,d);d(a.shared.gl,".useProgram(",b,".program);");if(c.shader.program)v(a,d,c,c.shader.program);else{d(a.shared.vao,".setVAO(null);");var h=a.global.def("{}"),l=d.def(b,".id"),m=d.def(h,"[",l,"]");d(a.cond(m).then(m,".call(this,a0);")["else"](m,
"=",h,"[",l,"]=",a.link(function(d){return w(v,a,c,d,1)}),"(",b,");",m,".call(this,a0);"))}0<g(c.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function wa(a,c,d,b){function h(){return!0}a.batchId="a1";za(a,c);X(a,c,d,b.attributes,h);$b(a,c,d,b.uniforms,h,!1);Ua(a,c,c,d)}function Ea(a,c,d,b){function h(a){return a.contextDep&&m||a.propDep}function l(a){return!h(a)}za(a,c);var m=d.contextDep,g=c.def(),v=c.def();a.shared.props=v;a.batchId=g;var H=a.scope(),
e=a.scope();c(H.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",v,"=","a0","[",g,"];",e,"}",H.exit);d.needsContext&&fa(a,e,d.context);d.needsFramebuffer&&Ba(a,e,d.framebuffer);pa(a,e,d.state,h);d.profile&&h(d.profile)&&Ma(a,e,d,!1,!0);b?(d.useVAO?d.drawVAO?h(d.drawVAO)?e(a.shared.vao,".setVAO(",d.drawVAO.append(a,e),");"):H(a.shared.vao,".setVAO(",d.drawVAO.append(a,H),");"):H(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(H(a.shared.vao,".setVAO(null);"),X(a,H,d,b.attributes,l),X(a,e,d,b.attributes,
h)),$b(a,H,d,b.uniforms,l,!1),$b(a,e,d,b.uniforms,h,!0),Ua(a,H,e,d)):(c=a.global.def("{}"),b=d.shader.progVar.append(a,e),v=e.def(b,".id"),H=e.def(c,"[",v,"]"),e(a.shared.gl,".useProgram(",b,".program);","if(!",H,"){",H,"=",c,"[",v,"]=",a.link(function(c){return w(wa,a,d,c,2)}),"(",b,");}",H,".call(this,a0[",g,"],",g,");"))}function mb(a,c){function d(a){return a.contextDep&&h||a.propDep}var b=a.proc("batch",2);a.batchId="0";za(a,b);var h=!1,l=!0;g(c.context).forEach(function(a){h=h||c.context[a].propDep});
h||(fa(a,b,c.context),l=!1);var m=c.framebuffer,v=!1;m?(m.propDep?h=v=!0:m.contextDep&&h&&(v=!0),v||Ba(a,b,m)):Ba(a,b,null);c.state.viewport&&c.state.viewport.propDep&&(h=!0);la(a,b,c);pa(a,b,c.state,function(a){return!d(a)});c.profile&&d(c.profile)||Ma(a,b,c,!1,"a1");c.contextDep=h;c.needsContext=l;c.needsFramebuffer=v;l=c.shader.progVar;if(l.contextDep&&h||l.propDep)Ea(a,b,c,null);else if(l=l.append(a,b),b(a.shared.gl,".useProgram(",l,".program);"),c.shader.program)Ea(a,b,c,c.shader.program);else{b(a.shared.vao,
".setVAO(null);");var m=a.global.def("{}"),v=b.def(l,".id"),H=b.def(m,"[",v,"]");b(a.cond(H).then(H,".call(this,a0,a1);")["else"](H,"=",m,"[",v,"]=",a.link(function(d){return w(Ea,a,c,d,2)}),"(",l,");",H,".call(this,a0,a1);"))}0<g(c.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function lc(a,c){function d(l){var w=c.shader[l];w&&b.set(h.shader,"."+l,w.append(a,b))}var b=a.proc("scope",3);a.batchId="a2";var h=a.shared,l=h.current;fa(a,b,c.context);
c.framebuffer&&c.framebuffer.append(a,b);F(g(c.state)).forEach(function(d){var l=c.state[d].append(a,b);u(l)?l.forEach(function(c,h){b.set(a.next[d],"["+h+"]",c)}):b.set(h.next,"."+d,l)});Ma(a,b,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var l=c.draw[d];l&&b.set(h.draw,"."+d,""+l.append(a,b))});g(c.uniforms).forEach(function(d){var l=c.uniforms[d].append(a,b);Array.isArray(l)&&(l="["+l.join()+"]");b.set(h.uniforms,"["+p.id(d)+"]",l)});g(c.attributes).forEach(function(d){var h=
c.attributes[d].append(a,b),l=a.scopeAttrib(d);g(new sa).forEach(function(a){b.set(l,"."+a,h[a])})});c.scopeVAO&&b.set(h.vao,".targetVAO",c.scopeVAO.append(a,b));d("vert");d("frag");0<g(c.state).length&&(b(l,".dirty=true;"),b.exit(l,".dirty=true;"));b("a1(",a.shared.context,",a0,",a.batchId,");")}function ga(a){if("object"===typeof a&&!u(a)){for(var c=g(a),d=0;d<c.length;++d)if(G.isDynamic(a[c[d]]))return!0;return!1}}function H(a,c,d){function b(a,c){m.forEach(function(d){var b=l[d];G.isDynamic(b)&&
(b=a.invoke(c,b),c(X,".",d,"=",b,";"))})}var l=c["static"][d];if(l&&ga(l)){var w=a.global,m=g(l),v=!1,H=!1,e=!1,X=a.global.def("{}");m.forEach(function(c){var d=l[c];if(G.isDynamic(d))"function"===typeof d&&(d=l[c]=G.unbox(d)),c=h(d,null),v=v||c.thisDep,e=e||c.propDep,H=H||c.contextDep;else{w(X,".",c,"=");switch(typeof d){case "number":w(d);break;case "string":w('"',d,'"');break;case "object":Array.isArray(d)&&w("[",d.join(),"]");break;default:w(a.link(d))}w(";")}});c.dynamic[d]=new G.DynamicVariable(4,
{thisDep:v,contextDep:H,propDep:e,ref:X,append:b});delete c["static"][d]}}var sa=A.Record,Ha={add:32774,subtract:32778,"reverse subtract":32779};t.ext_blend_minmax&&(Ha.min=32775,Ha.max=32776);var qa=t.angle_instanced_arrays,Aa=t.webgl_draw_buffers,Da=t.oes_vertex_array_object,ka={dirty:!0,profile:R.profile},Z={},ua=[],Ja={},Fa={};z("dither",3024);z("blend.enable",3042);m("blend.color","blendColor",[0,0,0,0]);m("blend.equation","blendEquationSeparate",[32774,32774]);m("blend.func","blendFuncSeparate",
[1,0,1,0]);z("depth.enable",2929,!0);m("depth.func","depthFunc",513);m("depth.range","depthRange",[0,1]);m("depth.mask","depthMask",!0);m("colorMask","colorMask",[!0,!0,!0,!0]);z("cull.enable",2884);m("cull.face","cullFace",1029);m("frontFace","frontFace",2305);m("lineWidth","lineWidth",1);z("polygonOffset.enable",32823);m("polygonOffset.offset","polygonOffset",[0,0]);z("sample.alpha",32926);z("sample.enable",32928);m("sample.coverage","sampleCoverage",[1,!1]);z("stencil.enable",2960);m("stencil.mask",
"stencilMask",-1);m("stencil.func","stencilFunc",[519,0,-1]);m("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);m("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);z("scissor.enable",3089);m("scissor.box","scissor",[0,0,E.drawingBufferWidth,E.drawingBufferHeight]);m("viewport","viewport",[0,0,E.drawingBufferWidth,E.drawingBufferHeight]);var gb={gl:E,context:Y,strings:p,next:Z,current:ka,draw:cc,elements:c,buffer:C,shader:ia,attributes:A.state,vao:A,uniforms:aa,framebuffer:a,
extensions:t,timer:ea,isBufferArgs:k},da={primTypes:ba,compareFuncs:d,blendFuncs:P,blendEquations:Ha,stencilOps:n,glTypes:x,orientationType:e};b.optional(function(){gb.isArrayLike=u});Aa&&(da.backBuffer=[1029],da.drawBuffer=K(D.maxDrawbuffers,function(a){return 0===a?[0]:K(a,function(a){return 36064+a})}));var yd=0;return{next:Z,current:ka,procs:function(){var a=V(),c=a.proc("poll"),d=a.proc("refresh"),b=a.block();c(b);d(b);var h=a.shared,l=h.gl,w=h.next,m=h.current;b(m,".dirty=false;");Ba(a,c);Ba(a,
d,null,!0);var v;qa&&(v=a.link(qa));t.oes_vertex_array_object&&d(a.link(t.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var H=0;H<D.maxAttributes;++H){var e=d.def(h.attributes,"[",H,"]"),X=a.cond(e,".buffer");X.then(l,".enableVertexAttribArray(",H,");",l,".bindBuffer(",34962,",",e,".buffer.buffer);",l,".vertexAttribPointer(",H,",",e,".size,",e,".type,",e,".normalized,",e,".stride,",e,".offset);")["else"](l,".disableVertexAttribArray(",H,");",l,".vertexAttrib4f(",H,",",e,".x,",e,".y,",
e,".z,",e,".w);",e,".buffer=null;");d(X);qa&&d(v,".vertexAttribDivisorANGLE(",H,",",e,".divisor);")}d(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");g(Ja).forEach(function(h){var v=Ja[h],g=b.def(w,".",h),H=a.block();H("if(",g,"){",l,".enable(",v,")}else{",l,".disable(",v,")}",m,".",h,"=",g,";");d(H);c("if(",g,"!==",m,".",h,"){",H,"}")});g(Fa).forEach(function(h){var v=Fa[h],g=ka[h],H,e,X=a.block();X(l,".",v,"(");u(g)?(v=g.length,H=a.global.def(w,".",h),e=a.global.def(m,
".",h),X(K(v,function(a){return H+"["+a+"]"}),");",K(v,function(a){return e+"["+a+"]="+H+"["+a+"];"}).join("")),c("if(",K(v,function(a){return H+"["+a+"]!=="+e+"["+a+"]"}).join("||"),"){",X,"}")):(H=b.def(w,".",h),e=b.def(m,".",h),X(H,");",m,".",h,"=",H,";"),c("if(",H,"!==",e,"){",X,"}"));d(X)});return a.compile()}(),compile:function(a,c,d,b,h){var l=V();l.stats=l.link(h);g(c["static"]).forEach(function(a){H(l,c,a)});r.forEach(function(c){H(l,a,c)});var w=ya(a,c,d,b,l);M(l,w);lc(l,w);mb(l,w);return B(l.compile(),
{destroy:function(){w.shader.program.destroy()}})}}}},{"./constants/dtypes.json":6,"./constants/primitives.json":7,"./dynamic":10,"./util/check":22,"./util/codegen":24,"./util/extend":26,"./util/is-array-like":28,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/loop":32,"./util/sorted-object-keys":35}],10:[function(O,ha,xa){function k(g,b){this.id=h++;this.type=g;this.data=b}function F(h){if(0===h.length)return[];var b=h.charAt(0),f=h.charAt(h.length-1);if(1<h.length&&b===f&&('"'===b||"'"===
b))return['"'+h.substr(1,h.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(h))return F(h.substr(0,b.index)).concat(F(b[1])).concat(F(h.substr(b.index+b[0].length)));b=h.split(".");if(1===b.length)return['"'+h.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];h=[];for(f=0;f<b.length;++f)h=h.concat(F(b[f]));return h}function J(h){return"["+F(h).join("][")+"]"}function L(h,b){if("function"===typeof h)return new k(0,h);if("number"===typeof h||
"boolean"===typeof h)return new k(5,h);if(Array.isArray(h))return new k(6,h.map(function(h,g){return L(h,b+"["+g+"]")}));if(h instanceof k)return h;f(!1,"invalid option type in uniform "+b)}var f=O("./util/check"),h=0;ha.exports={DynamicVariable:k,define:function(h,b){return new k(h,J(b+""))},isDynamic:function(h){return"function"===typeof h&&!h._reglType||h instanceof k},unbox:L,accessor:J}},{"./util/check":22}],11:[function(O,ha,xa){var k=O("./util/check"),F=O("./util/is-typed-array"),J=O("./util/is-ndarray"),
L=O("./util/values"),f=O("./constants/primitives.json"),h=O("./constants/usage.json");ha.exports=function(g,b,B,y){function K(b){this.id=G++;u[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function aa(h,r,f,x,d,n,U){h.buffer.bind();var e;r?((e=U)||F(r)&&(!J(r)||F(r.data))||(e=b.oes_element_index_uint?5125:5123),B._initBuffer(h.buffer,r,f,e,3)):(g.bufferData(34963,n,f),h.buffer.dtype=e||5121,h.buffer.usage=f,h.buffer.dimension=3,h.buffer.byteLength=n);e=U;if(!U){switch(h.buffer.dtype){case 5121:case 5120:e=
5121;break;case 5123:case 5122:e=5123;break;case 5125:case 5124:e=5125;break;default:k.raise("unsupported type for element array")}h.buffer.dtype=e}h.type=e;k(5125!==e||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");r=d;0>r&&(r=h.buffer.byteLength,5123===e?r>>=1:5125===e&&(r>>=2));h.vertCount=r;r=x;0>x&&(r=4,x=h.buffer.dimension,1===x&&(r=0),2===x&&(r=1),3===x&&(r=4));h.primType=r}function t(b){y.elementsCount--;k(null!==b.buffer,"must not double destroy elements");
delete u[b.id];b.buffer.destroy();b.buffer=null}var u={},G=0,ba={uint8:5121,uint16:5123};b.oes_element_index_uint&&(ba.uint32=5125);K.prototype.bind=function(){this.buffer.bind()};var x=[];return{create:function(b,g){function x(b){if(b)if("number"===typeof b)u(b),d.primType=4,d.vertCount=b|0,d.type=5121;else{var g=null,e=35044,r=-1,E=-1,p=0,t=0;if(Array.isArray(b)||F(b)||J(b))g=b;else if(k.type(b,"object","invalid arguments for elements"),"data"in b&&(g=b.data,k(Array.isArray(g)||F(g)||J(g),"invalid data for element buffer")),
"usage"in b&&(k.parameter(b.usage,h,"invalid element buffer usage"),e=h[b.usage]),"primitive"in b&&(k.parameter(b.primitive,f,"invalid element buffer primitive"),r=f[b.primitive]),"count"in b&&(k("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),E=b.count|0),"type"in b&&(k.parameter(b.type,ba,"invalid buffer type"),t=ba[b.type]),"length"in b)p=b.length|0;else if(p=E,5123===t||5122===t)p*=2;else if(5125===t||5124===t)p*=4;aa(d,g,e,r,E,p,t)}else u(),d.primType=4,d.vertCount=
0,d.type=5121;return x}var u=B.create(null,34963,!0),d=new K(u._buffer);y.elementsCount++;x(b);x._reglType="elements";x._elements=d;x.subdata=function(d,b){u.subdata(d,b);return x};x.destroy=function(){t(d)};return x},createStream:function(b){var h=x.pop();h||(h=new K(B.create(null,34963,!0,!1)._buffer));aa(h,b,35040,-1,-1,0,0);return h},destroyStream:function(b){x.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof K?b._elements:null},clear:function(){L(u).forEach(t)}}}},
{"./constants/primitives.json":7,"./constants/usage.json":8,"./util/check":22,"./util/is-ndarray":29,"./util/is-typed-array":31,"./util/values":37}],12:[function(O,ha,xa){var k=O("./util/sorted-object-keys"),F=O("./util/check");ha.exports=function(J,L){function f(b){F.type(b,"string","extension name must be string");b=b.toLowerCase();var g;try{g=h[b]=J.getExtension(b)}catch(f){}return!!g}for(var h={},g=0;g<L.extensions.length;++g){var b=L.extensions[g];if(!f(b))return L.onDestroy(),L.onDone('"'+b+
'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}L.optionalExtensions.forEach(f);return{extensions:h,restore:function(){k(h).forEach(function(b){if(h[b]&&!f(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":22,"./util/sorted-object-keys":35}],13:[function(O,ha,xa){var k=O("./util/check"),F=O("./util/values"),J=O("./util/extend"),L=[6407,6408],f=[];f[6408]=4;f[6407]=3;var h=[];h[5121]=1;h[5126]=4;h[36193]=
2;var g=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ha.exports=function(B,y,K,aa,t,u){function G(a,c,d){this.target=a;this.texture=c;this.renderbuffer=d;var b=a=0;c?(a=c.width,b=c.height):d&&(a=d.width,b=d.height);this.width=a;this.height=b}function ba(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function x(a,
c,d){if(a){if(a.texture){a=a.texture._texture;var b=Math.max(1,a.height);k(Math.max(1,a.width)===c&&b===d,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,k(a.width===c&&a.height===d,"inconsistent width/height for renderbuffer");a.refCount+=1}}function T(a,c){c&&(c.texture?B.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):B.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function r(a){var c=3553,d=null,b=null,
h=a;"object"===typeof a&&(h=a.data,"target"in a&&(c=a.target|0));k.type(h,"function","invalid attachment data");a=h._reglType;"texture2d"===a?(d=h,k(3553===c)):"textureCube"===a?(d=h,k(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===a?(b=h,c=36161):k.raise("invalid regl object for attachment");return new G(c,d,b)}function P(a,c,d,b,h){if(d)return a=aa.create2D({width:a,height:c,format:b,type:h}),a._texture.refCount=0,new G(3553,a,null);a=t.create({width:a,height:c,format:b});a._renderbuffer.refCount=
0;return new G(36161,null,a)}function ja(a){return a&&(a.texture||a.renderbuffer)}function d(a,c,d){a&&(a.texture?a.texture.resize(c,d):a.renderbuffer&&a.renderbuffer.resize(c,d),a.width=c,a.height=d)}function n(){this.id=c++;q[this.id]=this;this.framebuffer=B.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function U(a){a.colorAttachments.forEach(ba);ba(a.depthAttachment);ba(a.stencilAttachment);ba(a.depthStencilAttachment)}
function e(a){var c=a.framebuffer;k(c,"must not double destroy framebuffer");B.deleteFramebuffer(c);a.framebuffer=null;u.framebufferCount--;delete q[a.id]}function W(a){var c;B.bindFramebuffer(36160,a.framebuffer);var d=a.colorAttachments;for(c=0;c<d.length;++c)T(36064+c,d[c]);for(c=d.length;c<K.maxColorAttachments;++c)B.framebufferTexture2D(36160,36064+c,3553,null,0);B.framebufferTexture2D(36160,33306,3553,null,0);B.framebufferTexture2D(36160,36096,3553,null,0);B.framebufferTexture2D(36160,36128,
3553,null,0);T(36096,a.depthAttachment);T(36128,a.stencilAttachment);T(33306,a.depthStencilAttachment);a=B.checkFramebufferStatus(36160);B.isContextLost()||36053===a||k.raise("framebuffer configuration not supported, status = "+b[a]);B.bindFramebuffer(36160,p.next?p.next.framebuffer:null);p.cur=p.next;B.getError()}function E(a,c){function b(a,c){var d;k(p.next!==q,"can not update framebuffer which is currently in use");var e=0,n=0,E=!0,m=!0;d=null;var t=!0,u="rgba",F="uint8",aa=1,l=null,I=null,ca=
null,S=!1;if("number"===typeof a)e=a|0,n=c|0||e;else if(a){k.type(a,"object","invalid arguments for framebuffer");"shape"in a?(n=a.shape,k(Array.isArray(n)&&2<=n.length,"invalid shape for framebuffer"),e=n[0],n=n[1]):("radius"in a&&(e=n=a.radius),"width"in a&&(e=a.width),"height"in a&&(n=a.height));if("color"in a||"colors"in a)d=a.color||a.colors,Array.isArray(d)&&k(1===d.length||y.webgl_draw_buffers,"multiple render targets not supported");if(!d){"colorCount"in a&&(aa=a.colorCount|0,k(0<aa,"invalid color buffer count"));
"colorTexture"in a&&(t=!!a.colorTexture,u="rgba4");if("colorType"in a){F=a.colorType;if(t)k(y.oes_texture_float||!("float"===F||"float32"===F),"you must enable OES_texture_float in order to use floating point framebuffer objects"),k(y.oes_texture_half_float||!("half float"===F||"float16"===F),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===F||"float16"===F)k(y.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
u="rgba16f";else if("float"===F||"float32"===F)k(y.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),u="rgba32f";k.oneOf(F,C,"invalid color type")}"colorFormat"in a&&(u=a.colorFormat,0<=ta.indexOf(u)?t=!0:0<=D.indexOf(u)?t=!1:k.optional(function(){if(t)k.oneOf(a.colorFormat,ta,"invalid color format for texture");else k.oneOf(a.colorFormat,D,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in
a)S=!(!a.depthTexture&&!a.depthStencilTexture),k(!S||y.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?E=a.depth:(l=a.depth,m=!1));"stencil"in a&&("boolean"===typeof a.stencil?m=a.stencil:(I=a.stencil,E=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?E=m=a.depthStencil:(ca=a.depthStencil,m=E=!1))}else e=n=1;var G=null,J=null,B=null,ya=null;if(Array.isArray(d))G=d.map(r);else if(d)G=[r(d)];else for(G=Array(aa),d=0;d<aa;++d)G[d]=
P(e,n,t,u,F);k(y.webgl_draw_buffers||1>=G.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");k(G.length<=K.maxColorAttachments,"too many color attachments, not supported");e=e||G[0].width;n=n||G[0].height;l?J=r(l):E&&!m&&(J=P(e,n,S,"depth","uint32"));I?B=r(I):m&&!E&&(B=P(e,n,!1,"stencil","uint8"));ca?ya=r(ca):!l&&!I&&m&&E&&(ya=P(e,n,S,"depth stencil","depth stencil"));k(1>=!!l+!!I+!!ca,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
E=null;for(d=0;d<G.length;++d)x(G[d],e,n),k(!G[d]||G[d].texture&&0<=L.indexOf(G[d].texture._texture.format)||G[d].renderbuffer&&0<=g.indexOf(G[d].renderbuffer._renderbuffer.format),"framebuffer color attachment "+d+" is invalid"),G[d]&&G[d].texture&&(m=f[G[d].texture._texture.format]*h[G[d].texture._texture.type],null===E?E=m:k(E===m,"all color attachments much have the same number of bits per pixel."));x(J,e,n);k(!J||J.texture&&6402===J.texture._texture.format||J.renderbuffer&&33189===J.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");x(B,e,n);k(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");x(ya,e,n);k(!ya||ya.texture&&34041===ya.texture._texture.format||ya.renderbuffer&&34041===ya.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");U(q);q.width=e;q.height=n;q.colorAttachments=G;q.depthAttachment=J;q.stencilAttachment=B;q.depthStencilAttachment=ya;b.color=G.map(ja);b.depth=
ja(J);b.stencil=ja(B);b.depthStencil=ja(ya);b.width=q.width;b.height=q.height;W(q);return b}var q=new n;u.framebufferCount++;b(a,c);return J(b,{resize:function(a,c){k(p.next!==q,"can not resize a framebuffer which is currently in use");var h=Math.max(a|0,1),e=Math.max(c|0||h,1);if(h===q.width&&e===q.height)return b;for(var g=q.colorAttachments,n=0;n<g.length;++n)d(g[n],h,e);d(q.depthAttachment,h,e);d(q.stencilAttachment,h,e);d(q.depthStencilAttachment,h,e);q.width=b.width=h;q.height=b.height=e;W(q);
return b},_reglType:"framebuffer",_framebuffer:q,destroy:function(){e(q);U(q)},use:function(a){p.setFBO({framebuffer:b},a)}})}var p={cur:null,next:null,dirty:!1,setFBO:null},ta=["rgba"],D=["rgba4","rgb565","rgb5 a1"];y.ext_srgb&&D.push("srgba");y.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");y.webgl_color_buffer_float&&D.push("rgba32f");var C=["uint8"];y.oes_texture_half_float&&C.push("half float","float16");y.oes_texture_float&&C.push("float","float32");var c=0,q={};return J(p,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof n)?a:null},create:E,createCube:function(a){function c(a){var b;k(0>d.indexOf(p.next),"can not update framebuffer which is currently in use");var h={color:null},e=0,g=null;b="rgba";var q="uint8",n=1;if("number"===typeof a)e=a|0;else if(a){k.type(a,"object","invalid arguments for framebuffer");"shape"in a?(e=a.shape,k(Array.isArray(e)&&2<=e.length,"invalid shape for framebuffer"),k(e[0]===e[1],"cube framebuffer must be square"),e=
e[0]):("radius"in a&&(e=a.radius|0),"width"in a?(e=a.width|0,"height"in a&&k(a.height===e,"must be square")):"height"in a&&(e=a.height|0));if("color"in a||"colors"in a)g=a.color||a.colors,Array.isArray(g)&&k(1===g.length||y.webgl_draw_buffers,"multiple render targets not supported");g||("colorCount"in a&&(n=a.colorCount|0,k(0<n,"invalid color buffer count")),"colorType"in a&&(k.oneOf(a.colorType,C,"invalid color type"),q=a.colorType),"colorFormat"in a&&(b=a.colorFormat,k.oneOf(a.colorFormat,ta,"invalid color format for texture")));
"depth"in a&&(h.depth=a.depth);"stencil"in a&&(h.stencil=a.stencil);"depthStencil"in a&&(h.depthStencil=a.depthStencil)}else e=1;if(g)if(Array.isArray(g))for(a=[],b=0;b<g.length;++b)a[b]=g[b];else a=[g];else for(a=Array(n),g={radius:e,format:b,type:q},b=0;b<n;++b)a[b]=aa.createCube(g);h.color=Array(a.length);for(b=0;b<a.length;++b)n=a[b],k("function"===typeof n&&"textureCube"===n._reglType,"invalid cube map"),e=e||n.width,k(n.width===e&&n.height===e,"invalid cube map shape"),h.color[b]={target:34069,
data:a[b]};for(b=0;6>b;++b){for(n=0;n<a.length;++n)h.color[n].target=34069+b;0<b&&(h.depth=d[0].depth,h.stencil=d[0].stencil,h.depthStencil=d[0].depthStencil);if(d[b])d[b](h);else d[b]=E(h)}return J(c,{width:e,height:e,color:a})}var d=Array(6);c(a);return J(c,{faces:d,resize:function(a){var b=a|0;k(0<b&&b<=K.maxCubeMapSize,"invalid radius for cube fbo");if(b===c.width)return c;var h=c.color;for(a=0;a<h.length;++a)h[a].resize(b);for(a=0;6>a;++a)d[a].resize(b);c.width=c.height=b;return c},_reglType:"framebufferCube",
destroy:function(){d.forEach(function(a){a.destroy()})}})},clear:function(){F(q).forEach(e)},restore:function(){p.cur=null;p.next=null;p.dirty=!0;F(q).forEach(function(a){a.framebuffer=B.createFramebuffer();W(a)})}})}},{"./util/check":22,"./util/extend":26,"./util/values":37}],14:[function(O,ha,xa){var k=O("./util/sorted-object-keys"),F=O("./util/pool");ha.exports=function(J,L){var f=1;L.ext_texture_filter_anisotropic&&(f=J.getParameter(34047));var h=1,g=1;L.webgl_draw_buffers&&(h=J.getParameter(34852),
g=J.getParameter(36063));var b=!!L.oes_texture_float;if(b){b=J.createTexture();J.bindTexture(3553,b);J.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var B=J.createFramebuffer();J.bindFramebuffer(36160,B);J.framebufferTexture2D(36160,36064,3553,b,0);J.bindTexture(3553,null);if(36053!==J.checkFramebufferStatus(36160))b=!1;else{J.viewport(0,0,1,1);J.clearColor(1,0,0,1);J.clear(16384);var y=F.allocType(5126,4);J.readPixels(0,0,1,1,6408,5126,y);J.getError()?b=!1:(J.deleteFramebuffer(B),J.deleteTexture(b),
b=1===y[0]);F.freeType(y)}}y=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(y=J.createTexture(),B=F.allocType(5121,36),J.activeTexture(33984),J.bindTexture(34067,y),J.texImage2D(34069,0,6408,3,3,0,6408,5121,B),F.freeType(B),J.bindTexture(34067,null),J.deleteTexture(y),y=!J.getError());return{colorBits:[J.getParameter(3410),J.getParameter(3411),J.getParameter(3412),J.getParameter(3413)],depthBits:J.getParameter(3414),
stencilBits:J.getParameter(3415),subpixelBits:J.getParameter(3408),extensions:k(L).filter(function(b){return!!L[b]}),maxAnisotropic:f,maxDrawbuffers:h,maxColorAttachments:g,pointSizeDims:J.getParameter(33901),lineWidthDims:J.getParameter(33902),maxViewportDims:J.getParameter(3386),maxCombinedTextureUnits:J.getParameter(35661),maxCubeMapSize:J.getParameter(34076),maxRenderbufferSize:J.getParameter(34024),maxTextureUnits:J.getParameter(34930),maxTextureSize:J.getParameter(3379),maxAttributes:J.getParameter(34921),
maxVertexUniforms:J.getParameter(36347),maxVertexTextureUnits:J.getParameter(35660),maxVaryingVectors:J.getParameter(36348),maxFragmentUniforms:J.getParameter(36349),glsl:J.getParameter(35724),renderer:J.getParameter(7937),vendor:J.getParameter(7936),version:J.getParameter(7938),readFloat:b,npotTextureCube:y}}},{"./util/pool":33,"./util/sorted-object-keys":35}],15:[function(O,ha,xa){var k=O("./util/check"),F=O("./util/is-typed-array");ha.exports=function(J,L,f,h,g,b,B){function y(y){var t;null===
L.next?(k(g.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),t=5121):(k(null!==L.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),t=L.next.colorAttachments[0].texture._texture.type,k.optional(function(){b.oes_texture_float?(k(5121===t||5126===t,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===t&&k(B.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
k(5121===t,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var u=0,G=0,K=h.framebufferWidth,x=h.framebufferHeight,T=null;F(y)?T=y:y&&(k.type(y,"object","invalid arguments to regl.read()"),u=y.x|0,G=y.y|0,k(0<=u&&u<h.framebufferWidth,"invalid x offset for regl.read"),k(0<=G&&G<h.framebufferHeight,"invalid y offset for regl.read"),K=(y.width||h.framebufferWidth-u)|0,x=(y.height||h.framebufferHeight-G)|0,T=y.data||null);T&&(5121===t?k(T instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===t&&k(T instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));k(0<K&&K+u<=h.framebufferWidth,"invalid width for read pixels");k(0<x&&x+G<=h.framebufferHeight,"invalid height for read pixels");f();y=K*x*4;T||(5121===t?T=new Uint8Array(y):5126===t&&(T=T||new Float32Array(y)));k.isTypedArray(T,"data buffer for regl.read() must be a typedarray");k(T.byteLength>=y,"data buffer for regl.read() too small");J.pixelStorei(3333,4);J.readPixels(u,G,K,
x,6408,t,T);return T}function K(b){var h;L.setFBO({framebuffer:b.framebuffer},function(){h=y(b)});return h}return function(b){return b&&"framebuffer"in b?K(b):y(b)}}},{"./util/check":22,"./util/is-typed-array":31}],16:[function(O,ha,xa){var k=O("./util/sorted-object-keys"),F=O("./util/check"),J=O("./util/values"),L=[];L[32854]=2;L[32855]=2;L[36194]=2;L[33189]=2;L[36168]=1;L[34041]=4;L[35907]=4;L[34836]=16;L[34842]=8;L[34843]=6;ha.exports=function(f,h,g,b,B){function y(b){this.id=u++;this.refCount=
1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;B.profile&&(this.stats={size:0})}function K(h){var g=h.renderbuffer;F(g,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(g);h.renderbuffer=null;h.refCount=0;delete G[h.id];b.renderbufferCount--}var aa={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};h.ext_srgb&&(aa.srgba=35907);h.ext_color_buffer_half_float&&(aa.rgba16f=34842,aa.rgb16f=34843);h.webgl_color_buffer_float&&
(aa.rgba32f=34836);var t=[];k(aa).forEach(function(b){t[aa[b]]=b});var u=0,G={};y.prototype.decRef=function(){0>=--this.refCount&&K(this)};B.profile&&(b.getTotalRenderbufferSize=function(){var b=0;k(G).forEach(function(h){b+=G[h].stats.size});return b});return{create:function(h,k){function u(b,h){var d=0,n=0,k=32854;"object"===typeof b&&b?("shape"in b?(n=b.shape,F(Array.isArray(n)&&2<=n.length,"invalid renderbuffer shape"),d=n[0]|0,n=n[1]|0):("radius"in b&&(d=n=b.radius|0),"width"in b&&(d=b.width|
0),"height"in b&&(n=b.height|0)),"format"in b&&(F.parameter(b.format,aa,"invalid renderbuffer format"),k=aa[b.format])):"number"===typeof b?(d=b|0,n="number"===typeof h?h|0:d):b?F.raise("invalid arguments to renderbuffer constructor"):d=n=1;F(0<d&&0<n&&d<=g.maxRenderbufferSize&&n<=g.maxRenderbufferSize,"invalid renderbuffer size");if(d!==r.width||n!==r.height||k!==r.format)return u.width=r.width=d,u.height=r.height=n,r.format=k,f.bindRenderbuffer(36161,r.renderbuffer),f.renderbufferStorage(36161,
k,d,n),F(0===f.getError(),"invalid render buffer format"),B.profile&&(r.stats.size=L[r.format]*r.width*r.height),u.format=t[r.format],u}var r=new y(f.createRenderbuffer());G[r.id]=r;b.renderbufferCount++;u(h,k);u.resize=function(b,h){var d=b|0,n=h|0||d;if(d===r.width&&n===r.height)return u;F(0<d&&0<n&&d<=g.maxRenderbufferSize&&n<=g.maxRenderbufferSize,"invalid renderbuffer size");u.width=r.width=d;u.height=r.height=n;f.bindRenderbuffer(36161,r.renderbuffer);f.renderbufferStorage(36161,r.format,d,
n);F(0===f.getError(),"invalid render buffer format");B.profile&&(r.stats.size=L[r.format]*r.width*r.height);return u};u._reglType="renderbuffer";u._renderbuffer=r;B.profile&&(u.stats=r.stats);u.destroy=function(){r.decRef()};return u},clear:function(){J(G).forEach(K)},restore:function(){J(G).forEach(function(b){b.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,b.renderbuffer);f.renderbufferStorage(36161,b.format,b.width,b.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":22,
"./util/sorted-object-keys":35,"./util/values":37}],17:[function(O,ha,xa){var k=O("./util/sorted-object-keys"),F=O("./util/check"),J=O("./util/extend"),L=O("./util/values");ha.exports=function(f,h,g,b){function B(b,h,g,d){this.name=b;this.id=h;this.location=g;this.info=d}function y(b,h){for(var g=0;g<b.length;++g)if(b[g].id===h.id){b[g].location=h.location;return}b.push(h)}function K(b,g,k){var d=35632===b?u:G,n=d[g];if(!n){var x=h.str(g),n=f.createShader(b);f.shaderSource(n,x);f.compileShader(n);
F.shaderError(f,n,x,b,k);d[g]=n}return n}function aa(h,g){this.id=T++;this.fragId=h;this.vertId=g;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function t(g,k,x){var d;d=K(35632,g.fragId);var n=K(35633,g.vertId),U=g.program=f.createProgram();f.attachShader(U,d);f.attachShader(U,n);if(x)for(d=0;d<x.length;++d)n=x[d],f.bindAttribLocation(U,n[0],n[1]);f.linkProgram(U);F.linkError(f,U,h.str(g.fragId),h.str(g.vertId),k);
x=f.getProgramParameter(U,35718);b.profile&&(g.stats.uniformsCount=x);n=g.uniforms;for(d=0;d<x;++d)if(k=f.getActiveUniform(U,d))if(1<k.size)for(var e=0;e<k.size;++e){var u=k.name.replace("[0]","["+e+"]");y(n,new B(u,h.id(u),f.getUniformLocation(U,u),k))}else y(n,new B(k.name,h.id(k.name),f.getUniformLocation(U,k.name),k));x=f.getProgramParameter(U,35721);b.profile&&(g.stats.attributesCount=x);g=g.attributes;for(d=0;d<x;++d)(k=f.getActiveAttrib(U,d))&&y(g,new B(k.name,h.id(k.name),f.getAttribLocation(U,
k.name),k))}var u={},G={},ba={},x=[],T=0;b.profile&&(g.getMaxUniformsCount=function(){var b=0;x.forEach(function(h){h.stats.uniformsCount>b&&(b=h.stats.uniformsCount)});return b},g.getMaxAttributesCount=function(){var b=0;x.forEach(function(h){h.stats.attributesCount>b&&(b=h.stats.attributesCount)});return b});return{clear:function(){var b=f.deleteShader.bind(f);L(u).forEach(b);u={};L(G).forEach(b);G={};x.forEach(function(b){f.deleteProgram(b.program)});x.length=0;ba={};g.shaderCount=0},program:function(b,
h,L,d){F.command(0<=b,"missing vertex shader",L);F.command(0<=h,"missing fragment shader",L);var n=ba[h];n||(n=ba[h]={});var U=n[b];if(U&&(U.refCount++,!d))return U;var e=new aa(h,b);g.shaderCount++;t(e,L,d);U||(n[b]=e);x.push(e);return J(e,{destroy:function(){e.refCount--;if(0>=e.refCount){f.deleteProgram(e.program);var b=x.indexOf(e);x.splice(b,1);g.shaderCount--}0>=n[e.vertId].refCount&&(f.deleteShader(G[e.vertId]),delete G[e.vertId],delete ba[e.fragId][e.vertId]);k(ba[e.fragId]).length||(f.deleteShader(u[e.fragId]),
delete u[e.fragId],delete ba[e.fragId])}})},restore:function(){u={};G={};for(var b=0;b<x.length;++b)t(x[b],null,x[b].attributes.map(function(b){return[b.location,b.name]}))},shader:K,frag:-1,vert:-1}}},{"./util/check":22,"./util/extend":26,"./util/sorted-object-keys":35,"./util/values":37}],18:[function(O,ha,xa){ha.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],19:[function(O,
ha,xa){ha.exports=function(){var k={"":0},F=[""];return{id:function(J){var L=k[J];if(L)return L;L=k[J]=F.length;F.push(J);return L},str:function(k){return F[k]}}}},{}],20:[function(O,ha,xa){function k(c){return"[object "+c+"]"}function F(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function J(c){return Array.isArray(c)&&0!==c.length&&ba(c[0])?!0:!1}function L(c){return Object.prototype.toString.call(c)}function f(c){if(!c)return!1;var b=L(c);return 0<=ta.indexOf(b)?!0:F(c)||
J(c)||t(c)}function h(c,b){36193===c.type?(c.data=G(b),u.freeType(b)):c.data=b}function g(c,b,a,h,e,g){c="undefined"!==typeof C[c]?C[c]:d[c]*D[b];g&&(c*=6);if(e){for(h=0;1<=a;)h+=c*a*a,a/=2;return h}return c*a*h}var b=O("./util/sorted-object-keys"),B=O("./util/check"),y=O("./util/extend"),K=O("./util/values"),aa=O("./util/is-typed-array"),t=O("./util/is-ndarray"),u=O("./util/pool"),G=O("./util/to-half-float"),ba=O("./util/is-array-like"),x=O("./util/flatten"),T=O("./util/is-pow2");xa=O("./constants/arraytypes.json");
var r=O("./constants/arraytypes.json"),P=[9984,9986,9985,9987],ja=[0,6409,6410,6407,6408],d={};d[6409]=d[6406]=d[6402]=1;d[34041]=d[6410]=2;d[6407]=d[35904]=3;d[6408]=d[35906]=4;var n=k("HTMLCanvasElement"),U=k("OffscreenCanvas"),e=k("CanvasRenderingContext2D"),W=k("ImageBitmap"),E=k("HTMLImageElement"),p=k("HTMLVideoElement"),ta=b(xa).concat([n,U,e,W,E,p]),D=[];D[5121]=1;D[5126]=4;D[36193]=2;D[5123]=2;D[5125]=4;var C=[];C[32854]=2;C[32855]=2;C[36194]=2;C[34041]=4;C[33776]=.5;C[33777]=.5;C[33778]=
1;C[33779]=1;C[35986]=.5;C[35987]=1;C[34798]=1;C[35840]=.5;C[35841]=.25;C[35842]=.5;C[35843]=.25;C[36196]=.5;ha.exports=function(c,q,a,k,A,C,D){function Y(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;
a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;a.width=c.width;a.height=c.height;a.channels=c.channels}function R(c,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(B.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),c.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(B.type(b.flipY,"boolean","invalid texture flip"),c.flipY=b.flipY);"alignment"in b&&(B.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),c.unpackAlignment=b.alignment);"colorSpace"in b&&
(B.parameter(b.colorSpace,Ua,"invalid colorSpace"),c.colorSpace=Ua[b.colorSpace]);if("type"in b){var h=b.type;B(q.oes_texture_float||!("float"===h||"float32"===h),"you must enable the OES_texture_float extension in order to use floating point textures.");B(q.oes_texture_half_float||!("half float"===h||"float16"===h),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");B(q.webgl_depth_texture||!("uint16"===h||"uint32"===h||"depth stencil"===h),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
B.parameter(h,w,"invalid texture type");c.type=w[h]}var l=c.width,m=c.height,e=c.channels,h=!1;"shape"in b?(B(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),l=b.shape[0],m=b.shape[1],3===b.shape.length&&(e=b.shape[2],B(0<e&&4>=e,"invalid number of channels"),h=!0),B(0<=l&&l<=a.maxTextureSize,"invalid width"),B(0<=m&&m<=a.maxTextureSize,"invalid height")):("radius"in b&&(l=m=b.radius,B(0<=l&&l<=a.maxTextureSize,"invalid radius")),"width"in b&&(l=b.width,B(0<=l&&l<=a.maxTextureSize,
"invalid width")),"height"in b&&(m=b.height,B(0<=m&&m<=a.maxTextureSize,"invalid height")),"channels"in b&&(e=b.channels,B(0<e&&4>=e,"invalid number of channels"),h=!0));c.width=l|0;c.height=m|0;c.channels=e|0;l=!1;"format"in b&&(l=b.format,B(q.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),B.parameter(l,v,"invalid texture format"),m=c.internalformat=v[l],c.format=Ha[m],l in w&&!("type"in b)&&(c.type=
w[l]),l in M&&(c.compressed=!0),l=!0);!h&&l?c.channels=d[c.format]:h&&!l?c.channels!==ja[c.format]&&(c.format=c.internalformat=ja[c.channels]):l&&h&&B(c.channels===d[c.format],"number of channels inconsistent with specified format")}}function Q(a){c.pixelStorei(37440,a.flipY);c.pixelStorei(37441,a.premultiplyAlpha);c.pixelStorei(37443,a.colorSpace);c.pixelStorei(3317,a.unpackAlignment)}function z(){Y.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function m(c,b){var d=null;f(b)?d=b:b&&(B.type(b,"object","invalid pixel data type"),R(c,b),"x"in b&&(c.xOffset=b.x|0),"y"in b&&(c.yOffset=b.y|0),f(b.data)&&(d=b.data));B(!c.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){B(!d,"can not specify copy and data field for the same texture");var l=A.viewportWidth,w=A.viewportHeight;c.width=c.width||l-c.xOffset;c.height=c.height||w-c.yOffset;c.needsCopy=!0;B(0<=c.xOffset&&c.xOffset<l&&0<=c.yOffset&&
c.yOffset<w&&0<c.width&&c.width<=l&&0<c.height&&c.height<=w,"copy texture read out of bounds")}else if(!d)c.width=c.width||1,c.height=c.height||1,c.channels=c.channels||4;else if(aa(d))c.channels=c.channels||4,c.data=d,"type"in b||5121!==c.type||(c.type=r[Object.prototype.toString.call(d)]|0);else if(F(d)){c.channels=c.channels||4;l=d;w=l.length;switch(c.type){case 5121:case 5123:case 5125:case 5126:w=u.allocType(c.type,w);w.set(l);c.data=w;break;case 36193:c.data=G(l);break;default:B.raise("unsupported texture type, must specify a typed array")}c.alignment=
1;c.needsFree=!0}else if(t(d)){l=d.data;Array.isArray(l)||5121!==c.type||(c.type=r[Object.prototype.toString.call(l)]|0);var w=d.shape,m=d.stride,g,v,H,X;3===w.length?(H=w[2],X=m[2]):(B(2===w.length,"invalid ndarray pixel data, must be 2 or 3D"),X=H=1);g=w[0];v=w[1];w=m[0];m=m[1];c.alignment=1;c.width=g;c.height=v;c.channels=H;c.format=c.internalformat=ja[H];c.needsFree=!0;g=X;d=d.offset;H=c.width;X=c.height;v=c.channels;for(var M=u.allocType(36193===c.type?5126:c.type,H*X*v),q=0,sa=0;sa<X;++sa)for(var k=
0;k<H;++k)for(var Ma=0;Ma<v;++Ma)M[q++]=l[w*k+m*sa+g*Ma+d];h(c,M)}else if(L(d)===n||L(d)===U||L(d)===e)L(d)===n||L(d)===U?c.element=d:c.element=d.canvas,c.width=c.element.width,c.height=c.element.height,c.channels=4;else if(L(d)===W)c.element=d,c.width=d.width,c.height=d.height,c.channels=4;else if(L(d)===E)c.element=d,c.width=d.naturalWidth,c.height=d.naturalHeight,c.channels=4;else if(L(d)===p)c.element=d,c.width=d.videoWidth,c.height=d.videoHeight,c.channels=4;else if(J(d)){l=c.width||d[0].length;
w=c.height||d.length;m=c.channels;m=ba(d[0][0])?m||d[0][0].length:m||1;g=x.shape(d);H=1;for(X=0;X<g.length;++X)H*=g[X];H=u.allocType(36193===c.type?5126:c.type,H);x.flatten(d,g,"",H);h(c,H);c.alignment=1;c.width=l;c.height=w;c.channels=m;c.format=c.internalformat=ja[m];c.needsFree=!0}5126===c.type?B(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===c.type&&B(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function V(a,b,d,h,l){var w=a.element,m=a.data,e=a.internalformat,g=a.format,v=a.type,H=a.width,X=a.height;Q(a);w?c.texSubImage2D(b,l,d,h,g,v,w):a.compressed?c.compressedTexSubImage2D(b,l,d,h,e,H,X,m):a.needsCopy?(k(),c.copyTexSubImage2D(b,l,d,h,a.xOffset,a.yOffset,H,X)):c.texSubImage2D(b,l,d,h,H,X,g,v,m)}function N(){return qa.pop()||new z}function va(a){a.needsFree&&u.freeType(a.data);z.call(a);qa.push(a)}function oa(){Y.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function l(a,c,b){var d=a.images[0]=N();a.mipmask=1;d.width=a.width=c;d.height=a.height=b;d.channels=a.channels=4}function I(a,c){var b=null;if(f(c))b=a.images[0]=N(),ea(b,a),m(b,c),a.mipmask=1;else if(R(a,c),Array.isArray(c.mipmap))for(var d=c.mipmap,h=0;h<d.length;++h)b=a.images[h]=N(),ea(b,a),b.width>>=h,b.height>>=h,m(b,d[h]),a.mipmask|=1<<h;else b=a.images[0]=N(),ea(b,a),m(b,c),a.mipmask=1;ea(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||B(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ca(a,b){for(var d=a.images,h=0;h<d.length&&d[h];++h){var l=d[h],w=b,m=h,g=l.element,e=l.data,v=l.internalformat,H=l.format,X=l.type,M=l.width,q=l.height;Q(l);g?c.texImage2D(w,m,H,H,X,g):l.compressed?c.compressedTexImage2D(w,m,v,M,q,0,e):l.needsCopy?(k(),c.copyTexImage2D(w,m,H,l.xOffset,l.yOffset,M,q,0)):c.texImage2D(w,
m,H,M,q,0,H,X,e||null)}}function S(){var a=Aa.pop()||new oa;Y.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function ma(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&va(c[b]),c[b]=null;Aa.push(a)}function ra(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ta(c,b){if("min"in b){var d=b.min;B.parameter(d,$b);c.minFilter=$b[d];0<=P.indexOf(c.minFilter)&&!("faces"in b)&&(c.genMipmaps=!0)}"mag"in b&&
(d=b.mag,B.parameter(d,X),c.magFilter=X[d]);var d=c.wrapS,h=c.wrapT;if("wrap"in b){var l=b.wrap;"string"===typeof l?(B.parameter(l,Ma),d=h=Ma[l]):Array.isArray(l)&&(B.parameter(l[0],Ma),B.parameter(l[1],Ma),d=Ma[l[0]],h=Ma[l[1]])}else"wrapS"in b&&(d=b.wrapS,B.parameter(d,Ma),d=Ma[d]),"wrapT"in b&&(h=b.wrapT,B.parameter(h,Ma),h=Ma[h]);c.wrapS=d;c.wrapT=h;"anisotropic"in b&&(d=b.anisotropic,B("number"===typeof d&&1<=d&&d<=a.maxAnisotropic,"aniso samples must be between 1 and "),c.anisotropic=b.anisotropic);
if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":B.parameter(b.mipmap,za,"invalid mipmap hint");c.mipmapHint=za[b.mipmap];d=c.genMipmaps=!0;break;case "boolean":d=c.genMipmaps=b.mipmap;break;case "object":B(Array.isArray(b.mipmap),"invalid mipmap type");c.genMipmaps=!1;d=!0;break;default:B.raise("invalid mipmap type")}!d||"min"in b||(c.minFilter=9984)}}function ya(a,b){c.texParameteri(b,10241,a.minFilter);c.texParameteri(b,10240,a.magFilter);c.texParameteri(b,10242,a.wrapS);c.texParameteri(b,
10243,a.wrapT);q.ext_texture_filter_anisotropic&&c.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(b))}function fa(a){Y.call(this);this.mipmask=0;this.internalformat=6408;this.id=Da++;this.refCount=1;this.target=a;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ra;D.profile&&(this.stats={size:0})}function Ba(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function la(){var a=ua[0];a?c.bindTexture(a.target,a.texture):
c.bindTexture(3553,null)}function pa(a){var b=a.texture;B(b,"must not double destroy texture");var d=a.unit,h=a.target;0<=d&&(c.activeTexture(33984+d),c.bindTexture(h,null),ua[d]=null);c.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete ka[a.id];C.textureCount--}var za={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ma={repeat:10497,clamp:33071,mirror:33648},X={nearest:9728,linear:9729},$b=y({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},X),Ua={none:0,browser:37444},w={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},v={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},M={};q.ext_srgb&&(v.srgb=35904,v.srgba=35906);q.oes_texture_float&&(w.float32=w["float"]=5126);q.oes_texture_half_float&&(w.float16=w["half float"]=36193);q.webgl_depth_texture&&(y(v,{depth:6402,"depth stencil":34041}),y(w,{uint16:5123,uint32:5125,
"depth stencil":34042}));q.webgl_compressed_texture_s3tc&&y(M,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});q.webgl_compressed_texture_atc&&y(M,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});q.webgl_compressed_texture_pvrtc&&y(M,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});q.webgl_compressed_texture_etc1&&(M["rgb etc1"]=36196);var wa=Array.prototype.slice.call(c.getParameter(34467));
b(M).forEach(function(a){var c=M[a];0<=wa.indexOf(c)&&(v[a]=c)});var Ea=b(v);a.textureFormats=Ea;var mb=[];b(v).forEach(function(a){mb[v[a]]=a});var lc=[];b(w).forEach(function(a){lc[w[a]]=a});var ga=[];b(X).forEach(function(a){ga[X[a]]=a});var H=[];b($b).forEach(function(a){H[$b[a]]=a});var sa=[];b(Ma).forEach(function(a){sa[Ma[a]]=a});var Ha=Ea.reduce(function(a,c){var b=v[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||q.ext_srgb&&(35904===b||35906===b)?a[b]=b:32855===b||0<=c.indexOf("rgba")?
a[b]=6408:a[b]=6407;return a},{}),qa=[],Aa=[],Da=0,ka={},Z=a.maxTextureUnits,ua=Array(Z).map(function(){return null});y(fa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<Z;++b){var d=ua[b];if(d){if(0<d.bindCount)continue;d.unit=-1}ua[b]=this;a=b;break}a>=Z&&B.raise("insufficient number of texture units");D.profile&&C.maxTextureUnits<a+1&&(C.maxTextureUnits=a+1);this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});D.profile&&(C.getTotalTextureSize=function(){var a=0;b(ka).forEach(function(c){a+=ka[c].stats.size});return a});return{create2D:function(b,d){function h(c,b){var d=w.texInfo;ra.call(d);var m=S();"number"===typeof c?"number"===typeof b?l(m,c|0,b|0):l(m,c|0,c|0):c?(B.type(c,"object","invalid arguments to regl.texture"),ta(d,c),I(m,c)):l(m,1,1);d.genMipmaps&&(m.mipmask=(m.width<<1)-1);w.mipmask=m.mipmask;ea(w,m);B.texture2D(d,m,a);w.internalformat=m.internalformat;
h.width=m.width;h.height=m.height;Ba(w);ca(m,3553);ya(d,3553);la();ma(m);D.profile&&(w.stats.size=g(w.internalformat,w.type,m.width,m.height,d.genMipmaps,!1));h.format=mb[w.internalformat];h.type=lc[w.type];h.mag=ga[d.magFilter];h.min=H[d.minFilter];h.wrapS=sa[d.wrapS];h.wrapT=sa[d.wrapT];return h}var w=new fa(3553);ka[w.id]=w;C.textureCount++;h(b,d);h.subimage=function(a,c,b,d){B(!!a,"must specify image data");c|=0;b|=0;d|=0;var l=N();ea(l,w);l.width=0;l.height=0;m(l,a);l.width=l.width||(w.width>>
d)-c;l.height=l.height||(w.height>>d)-b;B(w.type===l.type&&w.format===l.format&&w.internalformat===l.internalformat,"incompatible format for texture.subimage");B(0<=c&&0<=b&&c+l.width<=w.width&&b+l.height<=w.height,"texture.subimage write out of bounds");B(w.mipmask&1<<d,"missing mipmap data");B(l.data||l.element||l.needsCopy,"missing image data");Ba(w);V(l,3553,c,b,d);la();va(l);return h};h.resize=function(a,b){var d=a|0,l=b|0||d;if(d===w.width&&l===w.height)return h;h.width=w.width=d;h.height=w.height=
l;Ba(w);for(var m=0;w.mipmask>>m;++m){var e=d>>m,v=l>>m;if(!e||!v)break;c.texImage2D(3553,m,w.format,e,v,0,w.format,w.type,null)}la();D.profile&&(w.stats.size=g(w.internalformat,w.type,d,l,!1,!1));return h};h._reglType="texture2d";h._texture=w;D.profile&&(h.stats=w.stats);h.destroy=function(){w.decRef()};return h},createCube:function(b,d,h,w,e,v){function X(c,b,d,h,w,m){var e,v=M.texInfo;ra.call(v);for(e=0;6>e;++e)q[e]=S();if("number"!==typeof c&&c)if("object"===typeof c)if(b)I(q[0],c),I(q[1],b),
I(q[2],d),I(q[3],h),I(q[4],w),I(q[5],m);else if(ta(v,c),R(M,c),"faces"in c)for(c=c.faces,B(Array.isArray(c)&&6===c.length,"cube faces must be a length 6 array"),e=0;6>e;++e)B("object"===typeof c[e]&&!!c[e],"invalid input for cube map face"),ea(q[e],M),I(q[e],c[e]);else for(e=0;6>e;++e)I(q[e],c);else B.raise("invalid arguments to cube map");else for(c=c|0||1,e=0;6>e;++e)l(q[e],c,c);ea(M,q[0]);B.optional(function(){a.npotTextureCube||B(T(M.width)&&T(M.height),"your browser does not support non power or two texture dimensions")});
M.mipmask=v.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;B.textureCube(M,v,q,a);M.internalformat=q[0].internalformat;X.width=q[0].width;X.height=q[0].height;Ba(M);for(e=0;6>e;++e)ca(q[e],34069+e);ya(v,34067);la();D.profile&&(M.stats.size=g(M.internalformat,M.type,X.width,X.height,v.genMipmaps,!0));X.format=mb[M.internalformat];X.type=lc[M.type];X.mag=ga[v.magFilter];X.min=H[v.minFilter];X.wrapS=sa[v.wrapS];X.wrapT=sa[v.wrapT];for(e=0;6>e;++e)ma(q[e]);return X}var M=new fa(34067);ka[M.id]=M;C.cubeCount++;
var q=Array(6);X(b,d,h,w,e,v);X.subimage=function(a,c,b,d,h){B(!!c,"must specify image data");B("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");b|=0;d|=0;h|=0;var l=N();ea(l,M);l.width=0;l.height=0;m(l,c);l.width=l.width||(M.width>>h)-b;l.height=l.height||(M.height>>h)-d;B(M.type===l.type&&M.format===l.format&&M.internalformat===l.internalformat,"incompatible format for texture.subimage");B(0<=b&&0<=d&&b+l.width<=M.width&&d+l.height<=M.height,"texture.subimage write out of bounds");B(M.mipmask&
1<<h,"missing mipmap data");B(l.data||l.element||l.needsCopy,"missing image data");Ba(M);V(l,34069+a,b,d,h);la();va(l);return X};X.resize=function(a){a|=0;if(a!==M.width){X.width=M.width=a;X.height=M.height=a;Ba(M);for(var b=0;6>b;++b)for(var d=0;M.mipmask>>d;++d)c.texImage2D(34069+b,d,M.format,a>>d,a>>d,0,M.format,M.type,null);la();D.profile&&(M.stats.size=g(M.internalformat,M.type,X.width,X.height,!1,!0));return X}};X._reglType="textureCube";X._texture=M;D.profile&&(X.stats=M.stats);X.destroy=function(){M.decRef()};
return X},clear:function(){for(var a=0;a<Z;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),ua[a]=null;K(ka).forEach(pa);C.cubeCount=0;C.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<Z;++a){var b=ua[a];b&&(b.bindCount=0,b.unit=-1,ua[a]=null)}K(ka).forEach(function(a){a.texture=c.createTexture();c.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)c.texImage2D(3553,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,
a.type,null);else for(var d=0;6>d;++d)c.texImage2D(34069+d,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);ya(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<Z;++a){var b=ua[a];b&&(b.bindCount=0,b.unit=-1,ua[a]=null);c.activeTexture(33984+a);c.bindTexture(3553,null);c.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":5,"./util/check":22,"./util/extend":26,"./util/flatten":27,"./util/is-array-like":28,"./util/is-ndarray":29,"./util/is-pow2":30,"./util/is-typed-array":31,
"./util/pool":33,"./util/sorted-object-keys":35,"./util/to-half-float":36,"./util/values":37}],21:[function(O,ha,xa){ha.exports=function(k,F){function J(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function L(h,k,f){var u=g.pop()||new J;u.startQueryIndex=h;u.endQueryIndex=k;u.sum=0;u.stats=f;b.push(u)}if(!F.ext_disjoint_timer_query)return null;var f=[],h=[],g=[],b=[],B=[],y=[];return{beginQuery:function(b){var g=f.pop()||F.ext_disjoint_timer_query.createQueryEXT();F.ext_disjoint_timer_query.beginQueryEXT(35007,
g);h.push(g);L(h.length-1,h.length,b)},endQuery:function(){F.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:L,update:function(){var k,L;k=h.length;if(0!==k){y.length=Math.max(y.length,k+1);B.length=Math.max(B.length,k+1);B[0]=0;var t=y[0]=0;for(L=k=0;L<h.length;++L){var u=h[L];F.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(t+=F.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),f.push(u)):h[k++]=u;B[L+1]=t;y[L+1]=k}h.length=k;for(L=k=0;L<b.length;++L){var t=b[L],G=t.startQueryIndex,
u=t.endQueryIndex;t.sum+=B[u]-B[G];G=y[G];u=y[u];u===G?(t.stats.gpuTime+=t.sum/1E6,g.push(t)):(t.startQueryIndex=G,t.endQueryIndex=u,b[k++]=t)}b.length=k}},getNumPendingQueries:function(){return h.length},clear:function(){f.push.apply(f,h);for(var b=0;b<f.length;b++)F.ext_disjoint_timer_query.deleteQueryEXT(f[b]);h.length=0;f.length=0},restore:function(){h.length=0;f.length=0}}}},{}],22:[function(O,ha,xa){function k(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function F(b){b=Error("(regl) "+
b);console.error(b);throw b;}function J(b,d){b||F(d)}function L(b){return b?": "+b:""}function f(b,d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function h(b,d,h){0>d.indexOf(b)&&F("invalid value"+L(h)+". must be one of: "+d)}function g(b,d){for(b+=
"";b.length<d;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function B(b,d){this.number=b;this.line=d;this.errors=[]}function y(b,d,h){this.file=b;this.line=d;this.message=h}function K(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function aa(){var b=Error(),b=(b.stack||b).toString(),d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);
return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function t(d,h){var g=d.split("\n"),n=1,p=0,r={unknown:new b,0:new b};r.unknown.name=r[0].name=h||K();r.unknown.lines.push(new B(0,""));for(var f=0;f<g.length;++f){var x=g[f],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(x);if(c)switch(c[1]){case "line":if(c=/(\d+)(\s+\d+)?/.exec(c[2]))n=c[1]|0,c[2]&&(p=c[2]|0,p in r||(r[p]=new b));break;case "define":if(c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]))r[p].name=c[1]?k(c[2]):c[2]}r[p].lines.push(new B(n++,
x))}P(r).forEach(function(c){var a=r[c];a.lines.forEach(function(c){a.index[c.number]=c})});return r}function u(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var h=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);h?d.push(new y(h[1]|0,h[2]|0,h[3].trim())):0<b.length&&d.push(new y("unknown",0,b))}});return d}function G(b,d){d.forEach(function(d){var h=b[d.file];if(h){var e=h.index[d.line];if(e){e.errors.push(d);h.hasErrors=!0;return}}b.unknown.hasErrors=!0;b.unknown.lines[0].errors.push(d)})}
function ba(b){b._commandRef=K()}function x(b,d){var h=aa();F(b+" in command "+(d||K())+("unknown"===h?"":" called from "+h))}function T(b,d,h,g){f(b,d)||x("invalid parameter type"+L(h)+". expected "+d+", got "+typeof b,g||K())}function r(b,d){return 32820===b||32819===b||33635===b?2:34042===b?4:n[b]*d}var P=O("./sorted-object-keys"),ja=O("./is-typed-array");O=O("./extend");var d="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),n={};n[5120]=n[5121]=
1;n[5122]=n[5123]=n[36193]=n[33635]=n[32819]=n[32820]=2;n[5124]=n[5125]=n[5126]=n[34042]=4;ha.exports=O(J,{optional:function(b){b()},raise:F,commandRaise:x,command:function(b,d,h){b||x(d,h||K())},parameter:function(b,d,h){b in d||F("unknown parameter ("+b+")"+L(h)+". possible values: "+P(d).join())},commandParameter:function(b,d,h,g){b in d||x("unknown parameter ("+b+")"+L(h)+". possible values: "+P(d).join(),g||K())},constructor:function(b){P(b).forEach(function(b){0>d.indexOf(b)&&F('invalid regl constructor argument "'+
b+'". must be one of '+d)})},type:function(b,d,h){f(b,d)||F("invalid parameter type"+L(h)+". expected "+d+", got "+typeof b)},commandType:T,isTypedArray:function(b,d){ja(b)||F("invalid parameter type"+L(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||F("invalid parameter type, ("+b+")"+L(d)+". must be a nonnegative integer")},oneOf:h,shaderError:function(b,d,h,n,p){if(!b.getShaderParameter(d,b.COMPILE_STATUS)){d=b.getShaderInfoLog(d);b=n===b.FRAGMENT_SHADER?"fragment":"vertex";T(h,
"string",b+" shader source must be a string",p);var r=t(h,p);h=u(d);G(r,h);P(r).forEach(function(b){function d(c,b){h.push(c);a.push(b||"")}var c=r[b];if(c.hasErrors){var h=[""],a=[""];d("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){d(g(a.number,4)+"|  ","background-color:yellow; font-weight:bold");d(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var c=0;a.errors.forEach(function(b){b=
b.message;var h=/^\s*'(.*)'\s*:\s*(.*)$/.exec(b);if(h){var e=h[1];b=h[2];switch(e){case "assign":e="="}c=Math.max(a.line.indexOf(e,c),0)}else c=0;d(g("| ",6));d(g("^^^",c+3)+"\n","font-weight:bold");d(g("| ",6));d(b+"\n","font-weight:bold")});d(g("| ",6)+"\n")}else d(g(a.number,4)+"|  "),d(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(h.join("")):(a[0]=h.join("%c"),console.log.apply(console,a))}});J.raise("Error compiling "+b+" shader, "+r[0].name)}},linkError:function(b,
d,h,g,n){b.getProgramParameter(d,b.LINK_STATUS)||(b=b.getProgramInfoLog(d),h=t(h,n),g='Error linking program with vertex shader, "'+t(g,n)[0].name+'", and fragment shader "'+h[0].name+'"',"undefined"!==typeof document?console.log("%c"+g+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(g+"\n"+b),J.raise(g))},callSite:aa,saveCommandRef:ba,saveDrawInfo:function(b,d,h,g){function n(b){return b?g.id(b):0}function r(b,c){P(c).forEach(function(c){b[g.id(c)]=!0})}ba(b);
b._fragId=n(b["static"].frag);b._vertId=n(b["static"].vert);var k=b._uniformSet={};r(k,d["static"]);r(k,d.dynamic);d=b._attributeSet={};r(d,h["static"]);r(d,h.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,d,g){b.texture?h(b.texture._texture.internalformat,d,"unsupported texture format for attachment"):h(b.renderbuffer._renderbuffer.format,g,"unsupported renderbuffer format for attachment")},guessCommand:K,
texture2D:function(b,d,h){var g=d.width,n=d.height,k=d.channels;J(0<g&&g<=h.maxTextureSize&&0<n&&n<=h.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||J(!(g&g-1)&&!!g&&!(n&n-1)&&!!n,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==g&&1!==n&&J(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(J(!(g&g-1)&&!!g&&!(n&n-1)&&!!n,"texture must be a square power of 2 to support mipmapping"),
J(d.mipmask===(g<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>h.extensions.indexOf("oes_texture_float_linear")&&J(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),J(!b.genMipmaps,"mipmap generation not supported with float textures"));var f=d.images;for(h=0;16>h;++h)if(f[h]){var x=g>>h,c=n>>h;J(d.mipmask&1<<h,"missing mipmap data");var q=f[h];J(q.width===x&&q.height===c,"invalid shape for mip images");J(q.format===d.format&&q.internalformat===
d.internalformat&&q.type===d.type,"incompatible type for mip image");!q.compressed&&q.data&&(x=Math.ceil(r(q.type,k)*x/q.unpackAlignment)*q.unpackAlignment,J(q.data.byteLength===x*c,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||J(0===(d.mipmask&1<<h),"extra mipmap data");d.compressed&&J(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,d,h,g){var n=b.width,k=b.height,f=b.channels;J(0<n&&n<=g.maxTextureSize&&
0<k&&k<=g.maxTextureSize,"invalid texture shape");J(n===k,"cube map must be square");J(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(g=0;g<h.length;++g){var x=h[g];J(x.width===n&&x.height===k,"inconsistent cube map face shape");d.genMipmaps&&(J(!x.compressed,"can not generate mipmap for compressed textures"),J(1===x.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=x.images,q=0;16>q;++q){var a=c[q];if(a){var u=n>>q,t=k>>q;J(x.mipmask&1<<q,"missing mipmap data");
J(a.width===u&&a.height===t,"invalid shape for mip images");J(a.format===b.format&&a.internalformat===b.internalformat&&a.type===b.type,"incompatible type for mip image");a.compressed||a.data&&J(a.data.byteLength===u*t*Math.max(r(a.type,f),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":26,"./is-typed-array":31,"./sorted-object-keys":35}],23:[function(O,ha,xa){ha.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],24:[function(O,ha,xa){function k(k){return Array.prototype.slice.call(k)}function F(f){return k(f).join("")}var J=O("./extend"),L=O("./compiled-fns");ha.exports=function(){function f(){var h=[],g=[];return J(function(){h.push.apply(h,k(arguments))},{def:function(){var f="v"+b;b++;g.push(f);0<arguments.length&&(h.push(f,"="),h.push.apply(h,k(arguments)),h.push(";"));return f},toString:function(){return F([0<g.length?"var "+g.join(",")+";":"",F(h)])}})}function h(){function b(k,
f){g(k,f,"=",h.def(k,f),";")}var h=f(),g=f(),L=h.toString,F=g.toString;return J(function(){h.apply(h,k(arguments))},{def:h.def,entry:h,exit:g,save:b,set:function(g,k,r){b(g,k);h(g,k,"=",r,";")},toString:function(){return L()+F()}})}var g=0,b=0,B={},y=f(),K={};return{global:y,link:function(b){var h="$"+g,k=!1;"object"===typeof b&&b.name&&(h=b.name.replace(/ /g,"_"),k=!0);if(h in B)return h;B[h]=b;k||g++;return h},block:f,proc:function(b,g){function k(){var b="a"+f.length;f.push(b);return b}var f=[];
g=g||0;for(var L=0;L<g;++L)k();var L=h(),x=L.toString;return K[b]=J(L,{arg:k,toString:function(){return F(["function(",f.join(),"){",x(),"}"])}})},scope:h,cond:function(){var b=F(arguments),g=h(),f=h(),L=g.toString,y=f.toString;return J(g,{then:function(){g.apply(g,k(arguments));return this},"else":function(){f.apply(f,k(arguments));return this},toString:function(){var h=y();h&&(h="else{"+h+"}");return F(["if(",b,"){",L(),"}",h])}})},compile:function(){var b=[],h=[];Object.keys(B).sort(function(b,
h){var g="$"===b.charAt(0),k="$"===h.charAt(0);return g||k?g&&k?+b.slice(1)<+h.slice(1)?-1:1:g&&!k?-1:1:b.localeCompare(h)}).forEach(function(g){var k=B[g];b.push(g);h.push(k)});for(var g=0,k=b.length-1;-1<k;k--)if("$"===b[k].charAt(0)){g=k;break}var f=['"use strict";',y,"return {"];Object.keys(K).forEach(function(b){f.push('"',b,'":',K[b].toString(),",")});f.push("}");var k=F(f).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),g=b.slice(g).join(),x=L[g];if(!x)throw console.log("src code is:"),
console.log(k),console.log("compiled values:",h),console.log("linked names:",b),console.log("Keys available:",Object.keys(L)),console.log("Key:",g),console.log('"'+g+'": function('+b.join(", ")+") \n{\n"+k+"\n},"),Error("missing precompiled function with key: "+g);return x.apply(null,h)}}}},{"./compiled-fns":25,"./extend":26}],25:[function(O,ha,xa){ha.exports={$0:function(k){var F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C;F=k.attributes;J=k.current;L=k.framebuffer;f=k.gl;h=k.next;
g=k.vao;b=h.blend_color;B=J.blend_color;y=h.blend_equation;K=J.blend_equation;aa=h.blend_func;t=J.blend_func;u=h.colorMask;G=J.colorMask;ba=h.depth_range;x=J.depth_range;T=h.polygonOffset_offset;r=J.polygonOffset_offset;P=h.sample_coverage;ja=J.sample_coverage;d=h.scissor_box;n=J.scissor_box;U=h.stencil_func;e=J.stencil_func;W=h.stencil_opBack;E=J.stencil_opBack;p=h.stencil_opFront;ta=J.stencil_opFront;D=h.viewport;C=J.viewport;return{poll:function(){var c,g,a,k,A,F,cc,Y,ea,R,Q,z,m,V,N,va,oa,l,I,
ca,S,ma;J.dirty=!1;g=h.blend_enable;a=h.cull_enable;k=h.depth_enable;A=h.dither;F=h.polygonOffset_enable;cc=h.sample_alpha;Y=h.sample_enable;ea=h.scissor_enable;R=h.stencil_enable;Q=h.cull_face;z=J.cull_face;m=h.depth_func;V=J.depth_func;N=h.depth_mask;va=J.depth_mask;oa=h.frontFace;l=J.frontFace;I=h.lineWidth;ca=J.lineWidth;S=h.stencil_mask;ma=J.stencil_mask;c=L.next;c!==L.cur&&(c?f.bindFramebuffer(36160,c.framebuffer):f.bindFramebuffer(36160,null),L.cur=c);g!==J.blend_enable&&(g?f.enable(3042):
f.disable(3042),J.blend_enable=g);a!==J.cull_enable&&(a?f.enable(2884):f.disable(2884),J.cull_enable=a);k!==J.depth_enable&&(k?f.enable(2929):f.disable(2929),J.depth_enable=k);A!==J.dither&&(A?f.enable(3024):f.disable(3024),J.dither=A);F!==J.polygonOffset_enable&&(F?f.enable(32823):f.disable(32823),J.polygonOffset_enable=F);cc!==J.sample_alpha&&(cc?f.enable(32926):f.disable(32926),J.sample_alpha=cc);Y!==J.sample_enable&&(Y?f.enable(32928):f.disable(32928),J.sample_enable=Y);ea!==J.scissor_enable&&
(ea?f.enable(3089):f.disable(3089),J.scissor_enable=ea);R!==J.stencil_enable&&(R?f.enable(2960):f.disable(2960),J.stencil_enable=R);if(b[0]!==B[0]||b[1]!==B[1]||b[2]!==B[2]||b[3]!==B[3])f.blendColor(b[0],b[1],b[2],b[3]),B[0]=b[0],B[1]=b[1],B[2]=b[2],B[3]=b[3];if(y[0]!==K[0]||y[1]!==K[1])f.blendEquationSeparate(y[0],y[1]),K[0]=y[0],K[1]=y[1];if(aa[0]!==t[0]||aa[1]!==t[1]||aa[2]!==t[2]||aa[3]!==t[3])f.blendFuncSeparate(aa[0],aa[1],aa[2],aa[3]),t[0]=aa[0],t[1]=aa[1],t[2]=aa[2],t[3]=aa[3];if(u[0]!==G[0]||
u[1]!==G[1]||u[2]!==G[2]||u[3]!==G[3])f.colorMask(u[0],u[1],u[2],u[3]),G[0]=u[0],G[1]=u[1],G[2]=u[2],G[3]=u[3];Q!==z&&(f.cullFace(Q),J.cull_face=Q);m!==V&&(f.depthFunc(m),J.depth_func=m);N!==va&&(f.depthMask(N),J.depth_mask=N);if(ba[0]!==x[0]||ba[1]!==x[1])f.depthRange(ba[0],ba[1]),x[0]=ba[0],x[1]=ba[1];oa!==l&&(f.frontFace(oa),J.frontFace=oa);I!==ca&&(f.lineWidth(I),J.lineWidth=I);if(T[0]!==r[0]||T[1]!==r[1])f.polygonOffset(T[0],T[1]),r[0]=T[0],r[1]=T[1];if(P[0]!==ja[0]||P[1]!==ja[1])f.sampleCoverage(P[0],
P[1]),ja[0]=P[0],ja[1]=P[1];if(d[0]!==n[0]||d[1]!==n[1]||d[2]!==n[2]||d[3]!==n[3])f.scissor(d[0],d[1],d[2],d[3]),n[0]=d[0],n[1]=d[1],n[2]=d[2],n[3]=d[3];if(U[0]!==e[0]||U[1]!==e[1]||U[2]!==e[2])f.stencilFunc(U[0],U[1],U[2]),e[0]=U[0],e[1]=U[1],e[2]=U[2];S!==ma&&(f.stencilMask(S),J.stencil_mask=S);if(W[0]!==E[0]||W[1]!==E[1]||W[2]!==E[2]||W[3]!==E[3])f.stencilOpSeparate(W[0],W[1],W[2],W[3]),E[0]=W[0],E[1]=W[1],E[2]=W[2],E[3]=W[3];if(p[0]!==ta[0]||p[1]!==ta[1]||p[2]!==ta[2]||p[3]!==ta[3])f.stencilOpSeparate(p[0],
p[1],p[2],p[3]),ta[0]=p[0],ta[1]=p[1],ta[2]=p[2],ta[3]=p[3];if(D[0]!==C[0]||D[1]!==C[1]||D[2]!==C[2]||D[3]!==C[3])f.viewport(D[0],D[1],D[2],D[3]),C[0]=D[0],C[1]=D[1],C[2]=D[2],C[3]=D[3]},refresh:function(){var c,q,a,k,A,ia,cc,Y,ea,R,Q,z,m,V,N,va;J.dirty=!1;q=h.blend_enable;a=h.cull_enable;k=h.depth_enable;A=h.dither;ia=h.polygonOffset_enable;cc=h.sample_alpha;Y=h.sample_enable;ea=h.scissor_enable;R=h.stencil_enable;Q=h.cull_face;z=h.depth_func;m=h.depth_mask;V=h.frontFace;N=h.lineWidth;va=h.stencil_mask;
(c=L.next)?f.bindFramebuffer(36160,c.framebuffer):f.bindFramebuffer(36160,null);L.cur=c;c=F[0];c.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);c=F[1];c.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(1),
f.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);c=F[2];c.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);c=F[3];c.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,c.x,c.y,c.z,
c.w),c.buffer=null);c=F[4];c.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);c=F[5];c.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);c=F[6];c.buffer?
(f.enableVertexAttribArray(6),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);c=F[7];c.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);c=F[8];c.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,
c.buffer.buffer),f.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);c=F[9];c.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);c=F[10];c.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(10,
c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);c=F[11];c.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);c=F[12];c.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(12,c.size,c.type,c.normalized,
c.stride,c.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);c=F[13];c.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);c=F[14];c.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(14),
f.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);c=F[15];c.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,c.buffer.buffer),f.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);g.currentVAO=null;g.setVAO(g.targetVAO);q?f.enable(3042):f.disable(3042);J.blend_enable=q;a?f.enable(2884):f.disable(2884);J.cull_enable=a;k?f.enable(2929):f.disable(2929);J.depth_enable=k;A?f.enable(3024):f.disable(3024);
J.dither=A;ia?f.enable(32823):f.disable(32823);J.polygonOffset_enable=ia;cc?f.enable(32926):f.disable(32926);J.sample_alpha=cc;Y?f.enable(32928):f.disable(32928);J.sample_enable=Y;ea?f.enable(3089):f.disable(3089);J.scissor_enable=ea;R?f.enable(2960):f.disable(2960);J.stencil_enable=R;f.blendColor(b[0],b[1],b[2],b[3]);B[0]=b[0];B[1]=b[1];B[2]=b[2];B[3]=b[3];f.blendEquationSeparate(y[0],y[1]);K[0]=y[0];K[1]=y[1];f.blendFuncSeparate(aa[0],aa[1],aa[2],aa[3]);t[0]=aa[0];t[1]=aa[1];t[2]=aa[2];t[3]=aa[3];
f.colorMask(u[0],u[1],u[2],u[3]);G[0]=u[0];G[1]=u[1];G[2]=u[2];G[3]=u[3];f.cullFace(Q);J.cull_face=Q;f.depthFunc(z);J.depth_func=z;f.depthMask(m);J.depth_mask=m;f.depthRange(ba[0],ba[1]);x[0]=ba[0];x[1]=ba[1];f.frontFace(V);J.frontFace=V;f.lineWidth(N);J.lineWidth=N;f.polygonOffset(T[0],T[1]);r[0]=T[0];r[1]=T[1];f.sampleCoverage(P[0],P[1]);ja[0]=P[0];ja[1]=P[1];f.scissor(d[0],d[1],d[2],d[3]);n[0]=d[0];n[1]=d[1];n[2]=d[2];n[3]=d[3];f.stencilFunc(U[0],U[1],U[2]);e[0]=U[0];e[1]=U[1];e[2]=U[2];f.stencilMask(va);
J.stencil_mask=va;f.stencilOpSeparate(W[0],W[1],W[2],W[3]);E[0]=W[0];E[1]=W[1];E[2]=W[2];E[3]=W[3];f.stencilOpSeparate(p[0],p[1],p[2],p[3]);ta[0]=p[0];ta[1]=p[1];ta[2]=p[2];ta[3]=p[3];f.viewport(D[0],D[1],D[2],D[3]);C[0]=D[0];C[1]=D[1];C[2]=D[2];C[3]=D[3]}}},$3:function(k,F,J,L){var f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia;f=k.context;h=k.current;g=k.framebuffer;b=k.gl;B=k.next;y=k.shader;K=k.vao;aa=B.blend_color;t=h.blend_color;u=B.blend_equation;G=h.blend_equation;
ba=B.blend_func;x=h.blend_func;T=B.colorMask;r=h.colorMask;P=B.depth_range;ja=h.depth_range;d=B.polygonOffset_offset;n=h.polygonOffset_offset;U=B.sample_coverage;e=h.sample_coverage;W=B.scissor_box;E=h.scissor_box;p=B.stencil_func;ta=h.stencil_func;D=B.stencil_opBack;C=h.stencil_opBack;c=B.stencil_opFront;q=h.stencil_opFront;a=B.viewport;na=h.viewport;A={};ia={};return{batch:function(k,f){var A,R,Q,z,m;A=g.next;A!==g.cur&&(A?b.bindFramebuffer(36160,A.framebuffer):b.bindFramebuffer(36160,null),g.cur=
A);if(h.dirty){A=B.dither;A!==h.dither&&(A?b.enable(3024):b.disable(3024),h.dither=A);A=B.blend_enable;A!==h.blend_enable&&(A?b.enable(3042):b.disable(3042),h.blend_enable=A);A=aa[0];Q=aa[1];z=aa[2];m=aa[3];if(A!==t[0]||Q!==t[1]||z!==t[2]||m!==t[3])b.blendColor(A,Q,z,m),t[0]=A,t[1]=Q,t[2]=z,t[3]=m;A=u[0];Q=u[1];if(A!==G[0]||Q!==G[1])b.blendEquationSeparate(A,Q),G[0]=A,G[1]=Q;A=ba[0];Q=ba[1];z=ba[2];m=ba[3];if(A!==x[0]||Q!==x[1]||z!==x[2]||m!==x[3])b.blendFuncSeparate(A,Q,z,m),x[0]=A,x[1]=Q,x[2]=z,
x[3]=m;A=B.depth_enable;A!==h.depth_enable&&(A?b.enable(2929):b.disable(2929),h.depth_enable=A);A=B.depth_func;A!==h.depth_func&&(b.depthFunc(A),h.depth_func=A);A=P[0];Q=P[1];if(A!==ja[0]||Q!==ja[1])b.depthRange(A,Q),ja[0]=A,ja[1]=Q;A=B.depth_mask;A!==h.depth_mask&&(b.depthMask(A),h.depth_mask=A);A=T[0];Q=T[1];z=T[2];m=T[3];if(A!==r[0]||Q!==r[1]||z!==r[2]||m!==r[3])b.colorMask(A,Q,z,m),r[0]=A,r[1]=Q,r[2]=z,r[3]=m;A=B.cull_enable;A!==h.cull_enable&&(A?b.enable(2884):b.disable(2884),h.cull_enable=A);
A=B.cull_face;A!==h.cull_face&&(b.cullFace(A),h.cull_face=A);A=B.frontFace;A!==h.frontFace&&(b.frontFace(A),h.frontFace=A);A=B.lineWidth;A!==h.lineWidth&&(b.lineWidth(A),h.lineWidth=A);A=B.polygonOffset_enable;A!==h.polygonOffset_enable&&(A?b.enable(32823):b.disable(32823),h.polygonOffset_enable=A);A=d[0];Q=d[1];if(A!==n[0]||Q!==n[1])b.polygonOffset(A,Q),n[0]=A,n[1]=Q;A=B.sample_alpha;A!==h.sample_alpha&&(A?b.enable(32926):b.disable(32926),h.sample_alpha=A);A=B.sample_enable;A!==h.sample_enable&&
(A?b.enable(32928):b.disable(32928),h.sample_enable=A);A=U[0];Q=U[1];if(A!==e[0]||Q!==e[1])b.sampleCoverage(A,Q),e[0]=A,e[1]=Q;A=B.stencil_enable;A!==h.stencil_enable&&(A?b.enable(2960):b.disable(2960),h.stencil_enable=A);A=B.stencil_mask;A!==h.stencil_mask&&(b.stencilMask(A),h.stencil_mask=A);A=p[0];Q=p[1];z=p[2];if(A!==ta[0]||Q!==ta[1]||z!==ta[2])b.stencilFunc(A,Q,z),ta[0]=A,ta[1]=Q,ta[2]=z;A=c[0];Q=c[1];z=c[2];m=c[3];if(A!==q[0]||Q!==q[1]||z!==q[2]||m!==q[3])b.stencilOpSeparate(A,Q,z,m),q[0]=A,
q[1]=Q,q[2]=z,q[3]=m;A=D[0];Q=D[1];z=D[2];m=D[3];if(A!==C[0]||Q!==C[1]||z!==C[2]||m!==C[3])b.stencilOpSeparate(A,Q,z,m),C[0]=A,C[1]=Q,C[2]=z,C[3]=m;A=B.scissor_enable;A!==h.scissor_enable&&(A?b.enable(3089):b.disable(3089),h.scissor_enable=A);A=W[0];Q=W[1];z=W[2];m=W[3];if(A!==E[0]||Q!==E[1]||z!==E[2]||m!==E[3])b.scissor(A,Q,z,m),E[0]=A,E[1]=Q,E[2]=z,E[3]=m;A=a[0];Q=a[1];z=a[2];m=a[3];if(A!==na[0]||Q!==na[1]||z!==na[2]||m!==na[3])b.viewport(A,Q,z,m),na[0]=A,na[1]=Q,na[2]=z,na[3]=m;h.dirty=!1}if(A=
h.profile)R=performance.now(),F.count+=f;Q=y.program(y.vert,y.frag);b.useProgram(Q.program);K.setVAO(null);z=Q.id;(m=ia[z])||(m=ia[z]=L(Q));m.call(this,k,f);K.setVAO(null);A&&(F.cpuTime+=performance.now()-R)},draw:function(k){var f,L,R,Q,z;f=g.next;f!==g.cur&&(f?b.bindFramebuffer(36160,f.framebuffer):b.bindFramebuffer(36160,null),g.cur=f);if(h.dirty){f=B.dither;f!==h.dither&&(f?b.enable(3024):b.disable(3024),h.dither=f);f=B.blend_enable;f!==h.blend_enable&&(f?b.enable(3042):b.disable(3042),h.blend_enable=
f);f=aa[0];R=aa[1];Q=aa[2];z=aa[3];if(f!==t[0]||R!==t[1]||Q!==t[2]||z!==t[3])b.blendColor(f,R,Q,z),t[0]=f,t[1]=R,t[2]=Q,t[3]=z;f=u[0];R=u[1];if(f!==G[0]||R!==G[1])b.blendEquationSeparate(f,R),G[0]=f,G[1]=R;f=ba[0];R=ba[1];Q=ba[2];z=ba[3];if(f!==x[0]||R!==x[1]||Q!==x[2]||z!==x[3])b.blendFuncSeparate(f,R,Q,z),x[0]=f,x[1]=R,x[2]=Q,x[3]=z;f=B.depth_enable;f!==h.depth_enable&&(f?b.enable(2929):b.disable(2929),h.depth_enable=f);f=B.depth_func;f!==h.depth_func&&(b.depthFunc(f),h.depth_func=f);f=P[0];R=P[1];
if(f!==ja[0]||R!==ja[1])b.depthRange(f,R),ja[0]=f,ja[1]=R;f=B.depth_mask;f!==h.depth_mask&&(b.depthMask(f),h.depth_mask=f);f=T[0];R=T[1];Q=T[2];z=T[3];if(f!==r[0]||R!==r[1]||Q!==r[2]||z!==r[3])b.colorMask(f,R,Q,z),r[0]=f,r[1]=R,r[2]=Q,r[3]=z;f=B.cull_enable;f!==h.cull_enable&&(f?b.enable(2884):b.disable(2884),h.cull_enable=f);f=B.cull_face;f!==h.cull_face&&(b.cullFace(f),h.cull_face=f);f=B.frontFace;f!==h.frontFace&&(b.frontFace(f),h.frontFace=f);f=B.lineWidth;f!==h.lineWidth&&(b.lineWidth(f),h.lineWidth=
f);f=B.polygonOffset_enable;f!==h.polygonOffset_enable&&(f?b.enable(32823):b.disable(32823),h.polygonOffset_enable=f);f=d[0];R=d[1];if(f!==n[0]||R!==n[1])b.polygonOffset(f,R),n[0]=f,n[1]=R;f=B.sample_alpha;f!==h.sample_alpha&&(f?b.enable(32926):b.disable(32926),h.sample_alpha=f);f=B.sample_enable;f!==h.sample_enable&&(f?b.enable(32928):b.disable(32928),h.sample_enable=f);f=U[0];R=U[1];if(f!==e[0]||R!==e[1])b.sampleCoverage(f,R),e[0]=f,e[1]=R;f=B.stencil_enable;f!==h.stencil_enable&&(f?b.enable(2960):
b.disable(2960),h.stencil_enable=f);f=B.stencil_mask;f!==h.stencil_mask&&(b.stencilMask(f),h.stencil_mask=f);f=p[0];R=p[1];Q=p[2];if(f!==ta[0]||R!==ta[1]||Q!==ta[2])b.stencilFunc(f,R,Q),ta[0]=f,ta[1]=R,ta[2]=Q;f=c[0];R=c[1];Q=c[2];z=c[3];if(f!==q[0]||R!==q[1]||Q!==q[2]||z!==q[3])b.stencilOpSeparate(f,R,Q,z),q[0]=f,q[1]=R,q[2]=Q,q[3]=z;f=D[0];R=D[1];Q=D[2];z=D[3];if(f!==C[0]||R!==C[1]||Q!==C[2]||z!==C[3])b.stencilOpSeparate(f,R,Q,z),C[0]=f,C[1]=R,C[2]=Q,C[3]=z;f=B.scissor_enable;f!==h.scissor_enable&&
(f?b.enable(3089):b.disable(3089),h.scissor_enable=f);f=W[0];R=W[1];Q=W[2];z=W[3];if(f!==E[0]||R!==E[1]||Q!==E[2]||z!==E[3])b.scissor(f,R,Q,z),E[0]=f,E[1]=R,E[2]=Q,E[3]=z;f=a[0];R=a[1];Q=a[2];z=a[3];if(f!==na[0]||R!==na[1]||Q!==na[2]||z!==na[3])b.viewport(f,R,Q,z),na[0]=f,na[1]=R,na[2]=Q,na[3]=z;h.dirty=!1}if(f=h.profile)L=performance.now(),F.count++;R=y.program(y.vert,y.frag);b.useProgram(R.program);K.setVAO(null);Q=R.id;(z=A[Q])||(z=A[Q]=J(R));z.call(this,k);K.setVAO(null);f&&(F.cpuTime+=performance.now()-
L)},scope:function(a,b,c){var d,g;if(d=h.profile)g=performance.now(),F.count++;b(f,a,c);d&&(F.cpuTime+=performance.now()-g)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,
cc,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,mb,lc,ga,H,sa,Ha,qa,Aa,Da){var ka,Z,ua,Ja,Fa,gb,da,yd,Zb,Ga,Gf,Sb,O,Cd,qe,Ud,Ae,zd,Ld,ne,fe,Md,ud,de,$d,Ye,Le,Pe,Ed,Be,se,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va;ka=k.attributes;Z=k.context;ua=k.current;Ja=k.draw;Fa=k.elements;gb=k.framebuffer;da=k.gl;yd=k.next;Zb=k.shader;Ga=k.uniforms;Gf=k.vao;Sb=yd.blend_color;O=ua.blend_color;Cd=yd.blend_equation;
qe=ua.blend_equation;Ud=yd.blend_func;Ae=ua.blend_func;zd=yd.colorMask;Ld=ua.colorMask;ne=yd.depth_range;fe=ua.depth_range;Md=yd.polygonOffset_offset;ud=ua.polygonOffset_offset;de=yd.sample_coverage;$d=ua.sample_coverage;Ye=yd.scissor_box;Le=ua.scissor_box;Pe=yd.stencil_func;Ed=ua.stencil_func;Be=yd.stencil_opBack;se=ua.stencil_opBack;Xd=yd.stencil_opFront;Nd=ua.stencil_opFront;Ad=yd.viewport;nd=ua.viewport;bd={};sd={};Lc=new Float32Array(16);pd=new Float32Array(16);Fc=new Float32Array(16);fd=new Float32Array(16);
Oc=new Float32Array(16);Ic=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);uc=new Float32Array(16);yb=new Float32Array(16);xc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);mc=new Float32Array(16);Gc=new Float32Array(16);gd=new Float32Array(16);Xc=new Float32Array(16);Cc=new Float32Array(16);ec=new Float32Array(16);Hc=new Float32Array(16);pc=new Float32Array(16);qc=new Float32Array(16);nc=new Float32Array(16);fc=new Float32Array(16);eb=new Float32Array(16);
Sc=new Float32Array(16);zb=new Float32Array(16);bb=new Float32Array(16);Mb=new Float32Array(16);$a=new Float32Array(16);ob=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,c){var d,e,n,q;d=gb.next;d!==gb.cur&&(d?da.bindFramebuffer(36160,d.framebuffer):da.bindFramebuffer(36160,null),gb.cur=d);if(ua.dirty){var k,p,A,E,D,F,C,J,P,U,W,ja,Ga,na,ia,ta,Sb,Zb,La,Fb,Oc,Bb,Cb,Pa,Ye;k=zd[0];p=zd[1];A=zd[2];E=zd[3];if(k!==Ld[0]||p!==Ld[1]||A!==Ld[2]||E!==Ld[3])da.colorMask(k,p,A,E),Ld[0]=k,
Ld[1]=p,Ld[2]=A,Ld[3]=E;D=yd.frontFace;D!==ua.frontFace&&(da.frontFace(D),ua.frontFace=D);F=yd.polygonOffset_enable;F!==ua.polygonOffset_enable&&(F?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=F);C=Md[0];J=Md[1];if(C!==ud[0]||J!==ud[1])da.polygonOffset(C,J),ud[0]=C,ud[1]=J;P=yd.sample_alpha;P!==ua.sample_alpha&&(P?da.enable(32926):da.disable(32926),ua.sample_alpha=P);U=yd.sample_enable;U!==ua.sample_enable&&(U?da.enable(32928):da.disable(32928),ua.sample_enable=U);W=de[0];ja=de[1];if(W!==
$d[0]||ja!==$d[1])da.sampleCoverage(W,ja),$d[0]=W,$d[1]=ja;Ga=yd.stencil_enable;Ga!==ua.stencil_enable&&(Ga?da.enable(2960):da.disable(2960),ua.stencil_enable=Ga);na=yd.stencil_mask;na!==ua.stencil_mask&&(da.stencilMask(na),ua.stencil_mask=na);ia=Pe[0];ta=Pe[1];Sb=Pe[2];if(ia!==Ed[0]||ta!==Ed[1]||Sb!==Ed[2])da.stencilFunc(ia,ta,Sb),Ed[0]=ia,Ed[1]=ta,Ed[2]=Sb;Zb=Xd[0];La=Xd[1];Fb=Xd[2];Oc=Xd[3];if(Zb!==Nd[0]||La!==Nd[1]||Fb!==Nd[2]||Oc!==Nd[3])da.stencilOpSeparate(Zb,La,Fb,Oc),Nd[0]=Zb,Nd[1]=La,Nd[2]=
Fb,Nd[3]=Oc;Bb=Be[0];Cb=Be[1];Pa=Be[2];Ye=Be[3];if(Bb!==se[0]||Cb!==se[1]||Pa!==se[2]||Ye!==se[3])da.stencilOpSeparate(Bb,Cb,Pa,Ye),se[0]=Bb,se[1]=Cb,se[2]=Pa,se[3]=Ye}da.blendColor(0,0,0,0);O[0]=0;O[1]=0;O[2]=0;O[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);qe[0]=32774;qe[1]=32774;da.blendFuncSeparate(770,771,1,1);Ae[0]=770;Ae[1]=771;Ae[2]=1;Ae[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;da.depthFunc(513);
ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);fe[0]=0;fe[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;da.enable(3089);ua.scissor_enable=!0;e=ua.profile;ua.profile=!1;da.useProgram(cc.program);var Ra,yb,Ic,Na,mc,Ya,Fc,Ud,lb,Oa,uc,Qa,vb,wb,Ta,nb,pd,Cd,Gc,ab,Jc,fd,Xa,Lc,Ab,Za,ne,xc,Vb,Qb,Ad,Rb,gd;Gf.setVAO(null);Ra=za.location;yb=ka[Ra];yb.buffer||da.enableVertexAttribArray(Ra);if(yb.type!==L.dtype||4!==yb.size||yb.buffer!==L||!1!==yb.normalized||0!==yb.offset||
0!==yb.stride)da.bindBuffer(34962,L.buffer),da.vertexAttribPointer(Ra,4,L.dtype,!1,0,0),yb.type=L.dtype,yb.size=4,yb.buffer=L,yb.normalized=!1,yb.offset=0,yb.stride=0;Ic=Ma.location;Na=ka[Ic];Na.buffer||da.enableVertexAttribArray(Ic);if(Na.type!==f.dtype||4!==Na.size||Na.buffer!==f||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)da.bindBuffer(34962,f.buffer),da.vertexAttribPointer(Ic,4,f.dtype,!1,0,0),Na.type=f.dtype,Na.size=4,Na.buffer=f,Na.normalized=!1,Na.offset=0,Na.stride=0;mc=X.location;Ya=
ka[mc];Ya.buffer||da.enableVertexAttribArray(mc);if(Ya.type!==h.dtype||4!==Ya.size||Ya.buffer!==h||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)da.bindBuffer(34962,h.buffer),da.vertexAttribPointer(mc,4,h.dtype,!1,0,0),Ya.type=h.dtype,Ya.size=4,Ya.buffer=h,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Fc=$b.location;Ud=ka[Fc];Ud.buffer||da.enableVertexAttribArray(Fc);if(Ud.type!==g.dtype||4!==Ud.size||Ud.buffer!==g||!1!==Ud.normalized||0!==Ud.offset||0!==Ud.stride)da.bindBuffer(34962,g.buffer),da.vertexAttribPointer(Fc,
4,g.dtype,!1,0,0),Ud.type=g.dtype,Ud.size=4,Ud.buffer=g,Ud.normalized=!1,Ud.offset=0,Ud.stride=0;lb=Ua.location;Oa=ka[lb];Oa.buffer||da.enableVertexAttribArray(lb);if(Oa.type!==b.dtype||4!==Oa.size||Oa.buffer!==b||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)da.bindBuffer(34962,b.buffer),da.vertexAttribPointer(lb,4,b.dtype,!1,0,0),Oa.type=b.dtype,Oa.size=4,Oa.buffer=b,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;uc=w.location;Qa=ka[uc];Qa.buffer||da.enableVertexAttribArray(uc);if(Qa.type!==B.dtype||
4!==Qa.size||Qa.buffer!==B||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(uc,4,B.dtype,!1,0,0),Qa.type=B.dtype,Qa.size=4,Qa.buffer=B,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;vb=v.location;wb=ka[vb];wb.buffer||da.enableVertexAttribArray(vb);if(wb.type!==y.dtype||4!==wb.size||wb.buffer!==y||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)da.bindBuffer(34962,y.buffer),da.vertexAttribPointer(vb,4,y.dtype,!1,0,0),wb.type=y.dtype,wb.size=4,wb.buffer=
y,wb.normalized=!1,wb.offset=0,wb.stride=0;Ta=M.location;nb=ka[Ta];nb.buffer||da.enableVertexAttribArray(Ta);if(nb.type!==K.dtype||4!==nb.size||nb.buffer!==K||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)da.bindBuffer(34962,K.buffer),da.vertexAttribPointer(Ta,4,K.dtype,!1,0,0),nb.type=K.dtype,nb.size=4,nb.buffer=K,nb.normalized=!1,nb.offset=0,nb.stride=0;pd=wa.location;Cd=ka[pd];Cd.buffer||da.enableVertexAttribArray(pd);if(Cd.type!==aa.dtype||4!==Cd.size||Cd.buffer!==aa||!1!==Cd.normalized||0!==
Cd.offset||0!==Cd.stride)da.bindBuffer(34962,aa.buffer),da.vertexAttribPointer(pd,4,aa.dtype,!1,0,0),Cd.type=aa.dtype,Cd.size=4,Cd.buffer=aa,Cd.normalized=!1,Cd.offset=0,Cd.stride=0;Gc=Ea.location;ab=ka[Gc];ab.buffer||da.enableVertexAttribArray(Gc);if(ab.type!==t.dtype||4!==ab.size||ab.buffer!==t||!1!==ab.normalized||0!==ab.offset||0!==ab.stride)da.bindBuffer(34962,t.buffer),da.vertexAttribPointer(Gc,4,t.dtype,!1,0,0),ab.type=t.dtype,ab.size=4,ab.buffer=t,ab.normalized=!1,ab.offset=0,ab.stride=0;
Jc=mb.location;fd=ka[Jc];fd.buffer||da.enableVertexAttribArray(Jc);if(fd.type!==u.dtype||4!==fd.size||fd.buffer!==u||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(Jc,4,u.dtype,!1,0,0),fd.type=u.dtype,fd.size=4,fd.buffer=u,fd.normalized=!1,fd.offset=0,fd.stride=0;Xa=lc.location;Lc=ka[Xa];Lc.buffer||da.enableVertexAttribArray(Xa);if(Lc.type!==G.dtype||4!==Lc.size||Lc.buffer!==G||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)da.bindBuffer(34962,
G.buffer),da.vertexAttribPointer(Xa,4,G.dtype,!1,0,0),Lc.type=G.dtype,Lc.size=4,Lc.buffer=G,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=ga.location;Za=ka[Ab];Za.buffer||da.enableVertexAttribArray(Ab);if(Za.type!==ba.dtype||4!==Za.size||Za.buffer!==ba||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)da.bindBuffer(34962,ba.buffer),da.vertexAttribPointer(Ab,4,ba.dtype,!1,0,0),Za.type=ba.dtype,Za.size=4,Za.buffer=ba,Za.normalized=!1,Za.offset=0,Za.stride=0;ne=H.location;xc=ka[ne];xc.buffer||da.enableVertexAttribArray(ne);
if(xc.type!==x.dtype||4!==xc.size||xc.buffer!==x||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)da.bindBuffer(34962,x.buffer),da.vertexAttribPointer(ne,4,x.dtype,!1,0,0),xc.type=x.dtype,xc.size=4,xc.buffer=x,xc.normalized=!1,xc.offset=0,xc.stride=0;Vb=sa.location;Qb=ka[Vb];Qb.buffer||da.enableVertexAttribArray(Vb);if(Qb.type!==T.dtype||4!==Qb.size||Qb.buffer!==T||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(Vb,4,T.dtype,!1,0,0),Qb.type=T.dtype,
Qb.size=4,Qb.buffer=T,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Ad=ea.location;Rb=ka[Ad];Rb.buffer||da.enableVertexAttribArray(Ad);if(Rb.type!==r.dtype||4!==Rb.size||Rb.buffer!==r||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)da.bindBuffer(34962,r.buffer),da.vertexAttribPointer(Ad,4,r.dtype,!1,0,0),Rb.type=r.dtype,Rb.size=4,Rb.buffer=r,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;da.uniform1i(Ha.location,Y.bind());(gd=Ja.elements)?da.bindBuffer(34963,gd.buffer.buffer):Gf.currentVAO&&(gd=Fa.getElements(Gf.currentVAO.elements))&&
da.bindBuffer(34963,gd.buffer.buffer);for(n=0;n<c;++n){q=a[n];var Dc,ha,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,bf,Od,Vd,xa,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be;bd.height=q.viewportHeight;bd.width=q.viewportWidth;bd.x=q.viewportX;bd.y=q.viewportY;Dc=bd.x|0;ha=bd.y|0;Mc="width"in bd?bd.width|0:Z.framebufferWidth-Dc;Yc="height"in bd?bd.height|0:Z.framebufferHeight-ha;vd=Z.viewportWidth;Z.viewportWidth=Mc;oc=Z.viewportHeight;
Z.viewportHeight=Yc;da.viewport(Dc,ha,Mc,Yc);nd[0]=Dc;nd[1]=ha;nd[2]=Mc;nd[3]=Yc;sd.height=q.scissorHeight;sd.width=q.scissorWidth;sd.x=q.scissorX;sd.y=q.scissorY;wc=sd.x|0;hc=sd.y|0;cb="width"in sd?sd.width|0:Z.framebufferWidth-wc;sc="height"in sd?sd.height|0:Z.framebufferHeight-hc;da.scissor(wc,hc,cb,sc);Le[0]=wc;Le[1]=hc;Le[2]=cb;Le[3]=sc;Tb=q.dim0A;da.uniformMatrix4fv(Q.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(Xc[0]=Tb[0],Xc[1]=Tb[1],Xc[2]=Tb[2],Xc[3]=Tb[3],Xc[4]=Tb[4],Xc[5]=
Tb[5],Xc[6]=Tb[6],Xc[7]=Tb[7],Xc[8]=Tb[8],Xc[9]=Tb[9],Xc[10]=Tb[10],Xc[11]=Tb[11],Xc[12]=Tb[12],Xc[13]=Tb[13],Xc[14]=Tb[14],Xc[15]=Tb[15],Xc));Wb=q.dim1A;da.uniformMatrix4fv(N.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:(Cc[0]=Wb[0],Cc[1]=Wb[1],Cc[2]=Wb[2],Cc[3]=Wb[3],Cc[4]=Wb[4],Cc[5]=Wb[5],Cc[6]=Wb[6],Cc[7]=Wb[7],Cc[8]=Wb[8],Cc[9]=Wb[9],Cc[10]=Wb[10],Cc[11]=Wb[11],Cc[12]=Wb[12],Cc[13]=Wb[13],Cc[14]=Wb[14],Cc[15]=Wb[15],Cc));dc=q.dim0B;da.uniformMatrix4fv(z.location,!1,Array.isArray(dc)||
dc instanceof Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));ic=q.dim1B;da.uniformMatrix4fv(va.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Hc[0]=ic[0],Hc[1]=ic[1],Hc[2]=ic[2],Hc[3]=ic[3],Hc[4]=ic[4],Hc[5]=ic[5],Hc[6]=ic[6],Hc[7]=ic[7],Hc[8]=ic[8],Hc[9]=ic[9],Hc[10]=ic[10],Hc[11]=ic[11],Hc[12]=ic[12],Hc[13]=
ic[13],Hc[14]=ic[14],Hc[15]=ic[15],Hc));yc=q.dim0C;da.uniformMatrix4fv(m.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(pc[0]=yc[0],pc[1]=yc[1],pc[2]=yc[2],pc[3]=yc[3],pc[4]=yc[4],pc[5]=yc[5],pc[6]=yc[6],pc[7]=yc[7],pc[8]=yc[8],pc[9]=yc[9],pc[10]=yc[10],pc[11]=yc[11],pc[12]=yc[12],pc[13]=yc[13],pc[14]=yc[14],pc[15]=yc[15],pc));Ac=q.dim1C;da.uniformMatrix4fv(oa.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(qc[0]=Ac[0],qc[1]=Ac[1],qc[2]=Ac[2],qc[3]=Ac[3],qc[4]=Ac[4],qc[5]=
Ac[5],qc[6]=Ac[6],qc[7]=Ac[7],qc[8]=Ac[8],qc[9]=Ac[9],qc[10]=Ac[10],qc[11]=Ac[11],qc[12]=Ac[12],qc[13]=Ac[13],qc[14]=Ac[14],qc[15]=Ac[15],qc));cd=q.dim0D;da.uniformMatrix4fv(V.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(nc[0]=cd[0],nc[1]=cd[1],nc[2]=cd[2],nc[3]=cd[3],nc[4]=cd[4],nc[5]=cd[5],nc[6]=cd[6],nc[7]=cd[7],nc[8]=cd[8],nc[9]=cd[9],nc[10]=cd[10],nc[11]=cd[11],nc[12]=cd[12],nc[13]=cd[13],nc[14]=cd[14],nc[15]=cd[15],nc));Qc=q.dim1D;da.uniformMatrix4fv(l.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(fc[0]=Qc[0],fc[1]=Qc[1],fc[2]=Qc[2],fc[3]=Qc[3],fc[4]=Qc[4],fc[5]=Qc[5],fc[6]=Qc[6],fc[7]=Qc[7],fc[8]=Qc[8],fc[9]=Qc[9],fc[10]=Qc[10],fc[11]=Qc[11],fc[12]=Qc[12],fc[13]=Qc[13],fc[14]=Qc[14],fc[15]=Qc[15],fc));Rc=q.loA;da.uniformMatrix4fv(Ca.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(eb[0]=Rc[0],eb[1]=Rc[1],eb[2]=Rc[2],eb[3]=Rc[3],eb[4]=Rc[4],eb[5]=Rc[5],eb[6]=Rc[6],eb[7]=Rc[7],eb[8]=Rc[8],eb[9]=Rc[9],eb[10]=Rc[10],eb[11]=Rc[11],eb[12]=Rc[12],eb[13]=
Rc[13],eb[14]=Rc[14],eb[15]=Rc[15],eb));Uc=q.hiA;da.uniformMatrix4fv(ca.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(Sc[0]=Uc[0],Sc[1]=Uc[1],Sc[2]=Uc[2],Sc[3]=Uc[3],Sc[4]=Uc[4],Sc[5]=Uc[5],Sc[6]=Uc[6],Sc[7]=Uc[7],Sc[8]=Uc[8],Sc[9]=Uc[9],Sc[10]=Uc[10],Sc[11]=Uc[11],Sc[12]=Uc[12],Sc[13]=Uc[13],Sc[14]=Uc[14],Sc[15]=Uc[15],Sc));Zc=q.loB;da.uniformMatrix4fv(ya.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(zb[0]=Zc[0],zb[1]=Zc[1],zb[2]=Zc[2],zb[3]=Zc[3],zb[4]=Zc[4],zb[5]=
Zc[5],zb[6]=Zc[6],zb[7]=Zc[7],zb[8]=Zc[8],zb[9]=Zc[9],zb[10]=Zc[10],zb[11]=Zc[11],zb[12]=Zc[12],zb[13]=Zc[13],zb[14]=Zc[14],zb[15]=Zc[15],zb));md=q.hiB;da.uniformMatrix4fv(S.location,!1,Array.isArray(md)||md instanceof Float32Array?md:(bb[0]=md[0],bb[1]=md[1],bb[2]=md[2],bb[3]=md[3],bb[4]=md[4],bb[5]=md[5],bb[6]=md[6],bb[7]=md[7],bb[8]=md[8],bb[9]=md[9],bb[10]=md[10],bb[11]=md[11],bb[12]=md[12],bb[13]=md[13],bb[14]=md[14],bb[15]=md[15],bb));dd=q.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(dd)||
dd instanceof Float32Array?dd:(Mb[0]=dd[0],Mb[1]=dd[1],Mb[2]=dd[2],Mb[3]=dd[3],Mb[4]=dd[4],Mb[5]=dd[5],Mb[6]=dd[6],Mb[7]=dd[7],Mb[8]=dd[8],Mb[9]=dd[9],Mb[10]=dd[10],Mb[11]=dd[11],Mb[12]=dd[12],Mb[13]=dd[13],Mb[14]=dd[14],Mb[15]=dd[15],Mb));$c=q.hiC;da.uniformMatrix4fv(ma.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:($a[0]=$c[0],$a[1]=$c[1],$a[2]=$c[2],$a[3]=$c[3],$a[4]=$c[4],$a[5]=$c[5],$a[6]=$c[6],$a[7]=$c[7],$a[8]=$c[8],$a[9]=$c[9],$a[10]=$c[10],$a[11]=$c[11],$a[12]=$c[12],$a[13]=
$c[13],$a[14]=$c[14],$a[15]=$c[15],$a));kc=q.loD;da.uniformMatrix4fv(Ba.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(ob[0]=kc[0],ob[1]=kc[1],ob[2]=kc[2],ob[3]=kc[3],ob[4]=kc[4],ob[5]=kc[5],ob[6]=kc[6],ob[7]=kc[7],ob[8]=kc[8],ob[9]=kc[9],ob[10]=kc[10],ob[11]=kc[11],ob[12]=kc[12],ob[13]=kc[13],ob[14]=kc[14],ob[15]=kc[15],ob));bc=q.hiD;da.uniformMatrix4fv(ra.location,!1,Array.isArray(bc)||bc instanceof Float32Array?bc:(Va[0]=bc[0],Va[1]=bc[1],Va[2]=bc[2],Va[3]=bc[3],Va[4]=bc[4],Va[5]=
bc[5],Va[6]=bc[6],Va[7]=bc[7],Va[8]=bc[8],Va[9]=bc[9],Va[10]=bc[10],Va[11]=bc[11],Va[12]=bc[12],Va[13]=bc[13],Va[14]=bc[14],Va[15]=bc[15],Va));ad=q.resolution;Wc=ad[0];zc=ad[1];n&&ed===Wc&&id===zc||(ed=Wc,id=zc,da.uniform2f(qa.location,Wc,zc));rd=q.viewBoxPos;ve=rd[0];jd=rd[1];n&&we===ve&&bf===jd||(we=ve,bf=jd,da.uniform2f(Aa.location,ve,jd));Od=q.viewBoxSize;Vd=Od[0];Yd=Od[1];n&&xa===Vd&&Id===Yd||(xa=Vd,Id=Yd,da.uniform2f(Da.location,Vd,Yd));Gd=q.maskHeight;n&&od===Gd||(od=Gd,da.uniform1f(la.location,
Gd));Vc=q.drwLayer;n&&wd===Vc||(wd=Vc,da.uniform1f(I.location,Vc));td=q.contextColor;kd=td[0];Bd=td[1];ge=td[2];xe=td[3];n&&xd===kd&&Dd===Bd&&je===ge&&ke===xe||(xd=kd,Dd=Bd,je=ge,ke=xe,da.uniform4f(R.location,kd,Bd,ge,xe));(he=q.maskTexture)&&"framebuffer"===he._reglType&&(he=he.color[0]);ee=he._texture;da.uniform1i(pa.location,ee.bind());ye=q.offset;if(be=q.count)gd?da.drawElements(1,be,gd.type,ye<<(gd.type-5121>>1)):da.drawArrays(1,ye,be),Z.viewportWidth=vd,Z.viewportHeight=oc,ee.unbind()}Y.unbind();
ua.dirty=!0;Gf.setVAO(null);ua.profile=e},draw:function(a){var c,d,e,q,n,k;c=gb.next;c!==gb.cur&&(c?da.bindFramebuffer(36160,c.framebuffer):da.bindFramebuffer(36160,null),gb.cur=c);if(ua.dirty){c=zd[0];k=zd[1];d=zd[2];e=zd[3];if(c!==Ld[0]||k!==Ld[1]||d!==Ld[2]||e!==Ld[3])da.colorMask(c,k,d,e),Ld[0]=c,Ld[1]=k,Ld[2]=d,Ld[3]=e;c=yd.frontFace;c!==ua.frontFace&&(da.frontFace(c),ua.frontFace=c);c=yd.polygonOffset_enable;c!==ua.polygonOffset_enable&&(c?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=
c);c=Md[0];k=Md[1];if(c!==ud[0]||k!==ud[1])da.polygonOffset(c,k),ud[0]=c,ud[1]=k;c=yd.sample_alpha;c!==ua.sample_alpha&&(c?da.enable(32926):da.disable(32926),ua.sample_alpha=c);c=yd.sample_enable;c!==ua.sample_enable&&(c?da.enable(32928):da.disable(32928),ua.sample_enable=c);c=de[0];k=de[1];if(c!==$d[0]||k!==$d[1])da.sampleCoverage(c,k),$d[0]=c,$d[1]=k;c=yd.stencil_enable;c!==ua.stencil_enable&&(c?da.enable(2960):da.disable(2960),ua.stencil_enable=c);c=yd.stencil_mask;c!==ua.stencil_mask&&(da.stencilMask(c),
ua.stencil_mask=c);c=Pe[0];k=Pe[1];d=Pe[2];if(c!==Ed[0]||k!==Ed[1]||d!==Ed[2])da.stencilFunc(c,k,d),Ed[0]=c,Ed[1]=k,Ed[2]=d;c=Xd[0];k=Xd[1];d=Xd[2];e=Xd[3];if(c!==Nd[0]||k!==Nd[1]||d!==Nd[2]||e!==Nd[3])da.stencilOpSeparate(c,k,d,e),Nd[0]=c,Nd[1]=k,Nd[2]=d,Nd[3]=e;c=Be[0];k=Be[1];d=Be[2];e=Be[3];if(c!==se[0]||k!==se[1]||d!==se[2]||e!==se[3])da.stencilOpSeparate(c,k,d,e),se[0]=c,se[1]=k,se[2]=d,se[3]=e}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;d=bd.x|0;e=
bd.y|0;q="width"in bd?bd.width|0:Z.framebufferWidth-d;n="height"in bd?bd.height|0:Z.framebufferHeight-e;c=Z.viewportWidth;Z.viewportWidth=q;k=Z.viewportHeight;Z.viewportHeight=n;da.viewport(d,e,q,n);nd[0]=d;nd[1]=e;nd[2]=q;nd[3]=n;da.blendColor(0,0,0,0);O[0]=0;O[1]=0;O[2]=0;O[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);qe[0]=32774;qe[1]=32774;da.blendFuncSeparate(770,771,1,1);Ae[0]=770;Ae[1]=771;Ae[2]=1;Ae[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);
ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;da.depthFunc(513);ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);fe[0]=0;fe[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;sd.height=a.scissorHeight;sd.width=a.scissorWidth;sd.x=a.scissorX;sd.y=a.scissorY;d=sd.x|0;e=sd.y|0;q="width"in sd?sd.width|0:Z.framebufferWidth-d;n="height"in sd?sd.height|0:Z.framebufferHeight-e;da.scissor(d,e,q,n);Le[0]=d;Le[1]=e;Le[2]=q;Le[3]=n;da.enable(3089);ua.scissor_enable=
!0;d=ua.profile;ua.profile=!1;da.useProgram(J.program);Gf.setVAO(null);e=za.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==L.dtype||4!==q.size||q.buffer!==L||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,L.buffer),da.vertexAttribPointer(e,4,L.dtype,!1,0,0),q.type=L.dtype,q.size=4,q.buffer=L,q.normalized=!1,q.offset=0,q.stride=0;e=Ma.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==f.dtype||4!==q.size||q.buffer!==f||!1!==q.normalized||0!==
q.offset||0!==q.stride)da.bindBuffer(34962,f.buffer),da.vertexAttribPointer(e,4,f.dtype,!1,0,0),q.type=f.dtype,q.size=4,q.buffer=f,q.normalized=!1,q.offset=0,q.stride=0;e=X.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==h.dtype||4!==q.size||q.buffer!==h||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,h.buffer),da.vertexAttribPointer(e,4,h.dtype,!1,0,0),q.type=h.dtype,q.size=4,q.buffer=h,q.normalized=!1,q.offset=0,q.stride=0;e=$b.location;q=ka[e];q.buffer||
da.enableVertexAttribArray(e);if(q.type!==g.dtype||4!==q.size||q.buffer!==g||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,g.buffer),da.vertexAttribPointer(e,4,g.dtype,!1,0,0),q.type=g.dtype,q.size=4,q.buffer=g,q.normalized=!1,q.offset=0,q.stride=0;e=Ua.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==b.dtype||4!==q.size||q.buffer!==b||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,b.buffer),da.vertexAttribPointer(e,4,b.dtype,!1,0,0),q.type=
b.dtype,q.size=4,q.buffer=b,q.normalized=!1,q.offset=0,q.stride=0;e=w.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==B.dtype||4!==q.size||q.buffer!==B||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(e,4,B.dtype,!1,0,0),q.type=B.dtype,q.size=4,q.buffer=B,q.normalized=!1,q.offset=0,q.stride=0;e=v.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==y.dtype||4!==q.size||q.buffer!==y||!1!==q.normalized||0!==q.offset||
0!==q.stride)da.bindBuffer(34962,y.buffer),da.vertexAttribPointer(e,4,y.dtype,!1,0,0),q.type=y.dtype,q.size=4,q.buffer=y,q.normalized=!1,q.offset=0,q.stride=0;e=M.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==K.dtype||4!==q.size||q.buffer!==K||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,K.buffer),da.vertexAttribPointer(e,4,K.dtype,!1,0,0),q.type=K.dtype,q.size=4,q.buffer=K,q.normalized=!1,q.offset=0,q.stride=0;e=wa.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);
if(q.type!==aa.dtype||4!==q.size||q.buffer!==aa||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,aa.buffer),da.vertexAttribPointer(e,4,aa.dtype,!1,0,0),q.type=aa.dtype,q.size=4,q.buffer=aa,q.normalized=!1,q.offset=0,q.stride=0;e=Ea.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==t.dtype||4!==q.size||q.buffer!==t||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,t.buffer),da.vertexAttribPointer(e,4,t.dtype,!1,0,0),q.type=t.dtype,q.size=4,q.buffer=
t,q.normalized=!1,q.offset=0,q.stride=0;e=mb.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==u.dtype||4!==q.size||q.buffer!==u||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(e,4,u.dtype,!1,0,0),q.type=u.dtype,q.size=4,q.buffer=u,q.normalized=!1,q.offset=0,q.stride=0;e=lc.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==G.dtype||4!==q.size||q.buffer!==G||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,
G.buffer),da.vertexAttribPointer(e,4,G.dtype,!1,0,0),q.type=G.dtype,q.size=4,q.buffer=G,q.normalized=!1,q.offset=0,q.stride=0;e=ga.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==ba.dtype||4!==q.size||q.buffer!==ba||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,ba.buffer),da.vertexAttribPointer(e,4,ba.dtype,!1,0,0),q.type=ba.dtype,q.size=4,q.buffer=ba,q.normalized=!1,q.offset=0,q.stride=0;e=H.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==
x.dtype||4!==q.size||q.buffer!==x||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,x.buffer),da.vertexAttribPointer(e,4,x.dtype,!1,0,0),q.type=x.dtype,q.size=4,q.buffer=x,q.normalized=!1,q.offset=0,q.stride=0;e=sa.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==T.dtype||4!==q.size||q.buffer!==T||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(e,4,T.dtype,!1,0,0),q.type=T.dtype,q.size=4,q.buffer=T,q.normalized=
!1,q.offset=0,q.stride=0;e=ea.location;q=ka[e];q.buffer||da.enableVertexAttribArray(e);if(q.type!==r.dtype||4!==q.size||q.buffer!==r||!1!==q.normalized||0!==q.offset||0!==q.stride)da.bindBuffer(34962,r.buffer),da.vertexAttribPointer(e,4,r.dtype,!1,0,0),q.type=r.dtype,q.size=4,q.buffer=r,q.normalized=!1,q.offset=0,q.stride=0;e=a.dim0A;da.uniformMatrix4fv(Q.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Lc[0]=e[0],Lc[1]=e[1],Lc[2]=e[2],Lc[3]=e[3],Lc[4]=e[4],Lc[5]=e[5],Lc[6]=e[6],Lc[7]=e[7],
Lc[8]=e[8],Lc[9]=e[9],Lc[10]=e[10],Lc[11]=e[11],Lc[12]=e[12],Lc[13]=e[13],Lc[14]=e[14],Lc[15]=e[15],Lc));e=a.dim1A;da.uniformMatrix4fv(N.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(pd[0]=e[0],pd[1]=e[1],pd[2]=e[2],pd[3]=e[3],pd[4]=e[4],pd[5]=e[5],pd[6]=e[6],pd[7]=e[7],pd[8]=e[8],pd[9]=e[9],pd[10]=e[10],pd[11]=e[11],pd[12]=e[12],pd[13]=e[13],pd[14]=e[14],pd[15]=e[15],pd));e=a.dim0B;da.uniformMatrix4fv(z.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fc[0]=e[0],Fc[1]=e[1],
Fc[2]=e[2],Fc[3]=e[3],Fc[4]=e[4],Fc[5]=e[5],Fc[6]=e[6],Fc[7]=e[7],Fc[8]=e[8],Fc[9]=e[9],Fc[10]=e[10],Fc[11]=e[11],Fc[12]=e[12],Fc[13]=e[13],Fc[14]=e[14],Fc[15]=e[15],Fc));e=a.dim1B;da.uniformMatrix4fv(va.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(fd[0]=e[0],fd[1]=e[1],fd[2]=e[2],fd[3]=e[3],fd[4]=e[4],fd[5]=e[5],fd[6]=e[6],fd[7]=e[7],fd[8]=e[8],fd[9]=e[9],fd[10]=e[10],fd[11]=e[11],fd[12]=e[12],fd[13]=e[13],fd[14]=e[14],fd[15]=e[15],fd));e=a.dim0C;da.uniformMatrix4fv(m.location,!1,Array.isArray(e)||
e instanceof Float32Array?e:(Oc[0]=e[0],Oc[1]=e[1],Oc[2]=e[2],Oc[3]=e[3],Oc[4]=e[4],Oc[5]=e[5],Oc[6]=e[6],Oc[7]=e[7],Oc[8]=e[8],Oc[9]=e[9],Oc[10]=e[10],Oc[11]=e[11],Oc[12]=e[12],Oc[13]=e[13],Oc[14]=e[14],Oc[15]=e[15],Oc));e=a.dim1C;da.uniformMatrix4fv(oa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ic[0]=e[0],Ic[1]=e[1],Ic[2]=e[2],Ic[3]=e[3],Ic[4]=e[4],Ic[5]=e[5],Ic[6]=e[6],Ic[7]=e[7],Ic[8]=e[8],Ic[9]=e[9],Ic[10]=e[10],Ic[11]=e[11],Ic[12]=e[12],Ic[13]=e[13],Ic[14]=e[14],Ic[15]=e[15],
Ic));e=a.dim0D;da.uniformMatrix4fv(V.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Bb[0]=e[0],Bb[1]=e[1],Bb[2]=e[2],Bb[3]=e[3],Bb[4]=e[4],Bb[5]=e[5],Bb[6]=e[6],Bb[7]=e[7],Bb[8]=e[8],Bb[9]=e[9],Bb[10]=e[10],Bb[11]=e[11],Bb[12]=e[12],Bb[13]=e[13],Bb[14]=e[14],Bb[15]=e[15],Bb));e=a.dim1D;da.uniformMatrix4fv(l.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fb[0]=e[0],Fb[1]=e[1],Fb[2]=e[2],Fb[3]=e[3],Fb[4]=e[4],Fb[5]=e[5],Fb[6]=e[6],Fb[7]=e[7],Fb[8]=e[8],Fb[9]=e[9],Fb[10]=e[10],
Fb[11]=e[11],Fb[12]=e[12],Fb[13]=e[13],Fb[14]=e[14],Fb[15]=e[15],Fb));e=a.loA;da.uniformMatrix4fv(Ca.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(uc[0]=e[0],uc[1]=e[1],uc[2]=e[2],uc[3]=e[3],uc[4]=e[4],uc[5]=e[5],uc[6]=e[6],uc[7]=e[7],uc[8]=e[8],uc[9]=e[9],uc[10]=e[10],uc[11]=e[11],uc[12]=e[12],uc[13]=e[13],uc[14]=e[14],uc[15]=e[15],uc));e=a.hiA;da.uniformMatrix4fv(ca.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(yb[0]=e[0],yb[1]=e[1],yb[2]=e[2],yb[3]=e[3],yb[4]=e[4],yb[5]=
e[5],yb[6]=e[6],yb[7]=e[7],yb[8]=e[8],yb[9]=e[9],yb[10]=e[10],yb[11]=e[11],yb[12]=e[12],yb[13]=e[13],yb[14]=e[14],yb[15]=e[15],yb));e=a.loB;da.uniformMatrix4fv(ya.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(xc[0]=e[0],xc[1]=e[1],xc[2]=e[2],xc[3]=e[3],xc[4]=e[4],xc[5]=e[5],xc[6]=e[6],xc[7]=e[7],xc[8]=e[8],xc[9]=e[9],xc[10]=e[10],xc[11]=e[11],xc[12]=e[12],xc[13]=e[13],xc[14]=e[14],xc[15]=e[15],xc));e=a.hiB;da.uniformMatrix4fv(S.location,!1,Array.isArray(e)||e instanceof Float32Array?
e:(Cb[0]=e[0],Cb[1]=e[1],Cb[2]=e[2],Cb[3]=e[3],Cb[4]=e[4],Cb[5]=e[5],Cb[6]=e[6],Cb[7]=e[7],Cb[8]=e[8],Cb[9]=e[9],Cb[10]=e[10],Cb[11]=e[11],Cb[12]=e[12],Cb[13]=e[13],Cb[14]=e[14],Cb[15]=e[15],Cb));e=a.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Jc[0]=e[0],Jc[1]=e[1],Jc[2]=e[2],Jc[3]=e[3],Jc[4]=e[4],Jc[5]=e[5],Jc[6]=e[6],Jc[7]=e[7],Jc[8]=e[8],Jc[9]=e[9],Jc[10]=e[10],Jc[11]=e[11],Jc[12]=e[12],Jc[13]=e[13],Jc[14]=e[14],Jc[15]=e[15],Jc));e=a.hiC;da.uniformMatrix4fv(ma.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(mc[0]=e[0],mc[1]=e[1],mc[2]=e[2],mc[3]=e[3],mc[4]=e[4],mc[5]=e[5],mc[6]=e[6],mc[7]=e[7],mc[8]=e[8],mc[9]=e[9],mc[10]=e[10],mc[11]=e[11],mc[12]=e[12],mc[13]=e[13],mc[14]=e[14],mc[15]=e[15],mc));e=a.loD;da.uniformMatrix4fv(Ba.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Gc[0]=e[0],Gc[1]=e[1],Gc[2]=e[2],Gc[3]=e[3],Gc[4]=e[4],Gc[5]=e[5],Gc[6]=e[6],Gc[7]=e[7],Gc[8]=e[8],Gc[9]=e[9],Gc[10]=e[10],Gc[11]=e[11],Gc[12]=e[12],Gc[13]=e[13],Gc[14]=
e[14],Gc[15]=e[15],Gc));e=a.hiD;da.uniformMatrix4fv(ra.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(gd[0]=e[0],gd[1]=e[1],gd[2]=e[2],gd[3]=e[3],gd[4]=e[4],gd[5]=e[5],gd[6]=e[6],gd[7]=e[7],gd[8]=e[8],gd[9]=e[9],gd[10]=e[10],gd[11]=e[11],gd[12]=e[12],gd[13]=e[13],gd[14]=e[14],gd[15]=e[15],gd));e=a.resolution;da.uniform2f(qa.location,e[0],e[1]);e=a.viewBoxPos;da.uniform2f(Aa.location,e[0],e[1]);e=a.viewBoxSize;da.uniform2f(Da.location,e[0],e[1]);da.uniform1f(la.location,a.maskHeight);da.uniform1f(I.location,
a.drwLayer);e=a.contextColor;da.uniform4f(R.location,e[0],e[1],e[2],e[3]);(e=a.maskTexture)&&"framebuffer"===e._reglType&&(e=e.color[0]);e=e._texture;da.uniform1i(pa.location,e.bind());da.uniform1i(Ha.location,P.bind());(q=Ja.elements)?da.bindBuffer(34963,q.buffer.buffer):Gf.currentVAO&&(q=Fa.getElements(Gf.currentVAO.elements))&&da.bindBuffer(34963,q.buffer.buffer);n=a.offset;if(a=a.count)q?da.drawElements(1,a,q.type,n<<(q.type-5121>>1)):da.drawArrays(1,n,a),ua.dirty=!0,Gf.setVAO(null),Z.viewportWidth=
c,Z.viewportHeight=k,ua.profile=d,e.unbind(),P.unbind()},scope:function(l,w,m){var v,H,X,M,k,sa,Ma,Ha,Q,I,S,$b,z,fa,qa,ga,R,ka,N,F,wa,V,ca,Aa,J,Da,da,P,va,ya,ra,la,Y,Ua,ea,za,Ea,pa,Ba,oa,ma,lc,Ca,mb,Fa,gb,cc,eb,ec,Fb,Oc,Bb,fc,pc,yb,Cb,$d,O,Be,nc,Gf,Xd,qc,bb,$a,Va,Hc,Pe,Ic,mc,ob,Fc,se,fd,Ed,Lc,uc,zb,xc,qe,pd,Gc,Cc,Jc,Ld,nd,Nd,Mb,Md,Sc,Le,Xc,ef,gd,de,zd,Ae,ud,fe,ha,xa,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,
Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=l.viewportHeight;bd.width=l.viewportWidth;bd.x=l.viewportX;bd.y=l.viewportY;
v=bd.x|0;H=bd.y|0;X="width"in bd?bd.width|0:Z.framebufferWidth-v;M="height"in bd?bd.height|0:Z.framebufferHeight-H;k=Z.viewportWidth;Z.viewportWidth=X;sa=Z.viewportHeight;Z.viewportHeight=M;Ma=Ad[0];Ad[0]=v;Ha=Ad[1];Ad[1]=H;Q=Ad[2];Ad[2]=X;I=Ad[3];Ad[3]=M;S=Sb[0];Sb[0]=0;$b=Sb[1];Sb[1]=0;z=Sb[2];Sb[2]=0;fa=Sb[3];Sb[3]=0;qa=yd.blend_enable;yd.blend_enable=!1;ga=Cd[0];Cd[0]=32774;R=Cd[1];Cd[1]=32774;ka=Ud[0];Ud[0]=770;N=Ud[1];Ud[1]=771;F=Ud[2];Ud[2]=1;wa=Ud[3];Ud[3]=1;V=yd.cull_enable;yd.cull_enable=
!0;ca=yd.cull_face;yd.cull_face=1029;Aa=yd.depth_enable;yd.depth_enable=!0;J=yd.depth_func;yd.depth_func=513;Da=yd.depth_mask;yd.depth_mask=!0;da=ne[0];ne[0]=0;P=ne[1];ne[1]=1;va=yd.dither;yd.dither=!1;ya=yd.lineWidth;yd.lineWidth=2;sd.height=l.scissorHeight;sd.width=l.scissorWidth;sd.x=l.scissorX;sd.y=l.scissorY;ra=sd.x|0;la=sd.y|0;Y="width"in sd?sd.width|0:Z.framebufferWidth-ra;Ua="height"in sd?sd.height|0:Z.framebufferHeight-la;ea=Ye[0];Ye[0]=ra;za=Ye[1];Ye[1]=la;Ea=Ye[2];Ye[2]=Y;pa=Ye[3];Ye[3]=
Ua;Ba=yd.scissor_enable;yd.scissor_enable=!0;oa=ua.profile;ua.profile=!1;ma=l.offset;lc=Ja.offset;Ja.offset=ma;Ca=l.count;mb=Ja.count;Ja.count=Ca;Fa=Ja.primitive;Ja.primitive=1;gb=l.contextColor;cc=Ga[24];Ga[24]=gb;eb=l.dim0A;ec=Ga[3];Ga[3]=eb;Fb=l.dim0B;Oc=Ga[5];Ga[5]=Fb;Bb=l.dim0C;fc=Ga[7];Ga[7]=Bb;pc=l.dim0D;yb=Ga[9];Ga[9]=pc;Cb=l.dim1A;$d=Ga[4];Ga[4]=Cb;O=l.dim1B;Be=Ga[6];Ga[6]=O;nc=l.dim1C;Gf=Ga[8];Ga[8]=nc;Xd=l.dim1D;qc=Ga[10];Ga[10]=Xd;bb=l.drwLayer;$a=Ga[23];Ga[23]=bb;Va=l.hiA;Hc=Ga[12];Ga[12]=
Va;Pe=l.hiB;Ic=Ga[14];Ga[14]=Pe;mc=l.hiC;ob=Ga[16];Ga[16]=mc;Fc=l.hiD;se=Ga[18];Ga[18]=Fc;fd=l.loA;Ed=Ga[11];Ga[11]=fd;Lc=l.loB;uc=Ga[13];Ga[13]=Lc;zb=l.loC;xc=Ga[15];Ga[15]=zb;qe=l.loD;pd=Ga[17];Ga[17]=qe;Gc=l.maskHeight;Cc=Ga[22];Ga[22]=Gc;Jc=l.maskTexture;Ld=Ga[25];Ga[25]=Jc;nd=Ga[26];Ga[26]=ja;Nd=l.resolution;Mb=Ga[19];Ga[19]=Nd;Md=l.viewBoxPos;Sc=Ga[20];Ga[20]=Md;Le=l.viewBoxSize;Xc=Ga[21];Ga[21]=Le;ef=d.buffer;d.buffer=r;gd=d.divisor;d.divisor=0;de=d.normalized;d.normalized=!1;zd=d.offset;d.offset=
0;Ae=d.size;d.size=0;ud=d.state;d.state=1;fe=d.stride;d.stride=0;ha=d.type;d.type=r.dtype;xa=d.w;d.w=0;Id=d.x;d.x=0;Gd=d.y;d.y=0;od=d.z;d.z=0;Vc=n.buffer;n.buffer=L;wd=n.divisor;n.divisor=0;td=n.normalized;n.normalized=!1;kd=n.offset;n.offset=0;xd=n.size;n.size=0;Bd=n.state;n.state=1;Dd=n.stride;n.stride=0;ge=n.type;n.type=L.dtype;je=n.w;n.w=0;xe=n.x;n.x=0;ke=n.y;n.y=0;he=n.z;n.z=0;ee=U.buffer;U.buffer=f;ye=U.divisor;U.divisor=0;be=U.normalized;U.normalized=!1;le=U.offset;U.offset=0;Nc=U.size;U.size=
0;hd=U.state;U.state=1;te=U.stride;U.stride=0;pe=U.type;U.type=f.dtype;Jd=U.w;U.w=0;Pd=U.x;U.x=0;Qd=U.y;U.y=0;Rd=U.z;U.z=0;me=e.buffer;e.buffer=h;ze=e.divisor;e.divisor=0;Qe=e.normalized;e.normalized=!1;re=e.offset;e.offset=0;Re=e.size;e.size=0;Se=e.state;e.state=1;Me=e.stride;e.stride=0;ue=e.type;e.type=h.dtype;Ee=e.w;e.w=0;Ge=e.x;e.x=0;He=e.y;e.y=0;Ie=e.z;e.z=0;Fe=W.buffer;W.buffer=g;Kd=W.divisor;W.divisor=0;Wd=W.normalized;W.normalized=!1;ae=W.offset;W.offset=0;ce=W.size;W.size=0;Je=W.state;W.state=
1;Hd=W.stride;W.stride=0;Sd=W.type;W.type=g.dtype;Ce=W.w;W.w=0;Ke=W.x;W.x=0;af=W.y;W.y=0;$e=W.z;W.z=0;Te=E.buffer;E.buffer=b;Ne=E.divisor;E.divisor=0;Ze=E.normalized;E.normalized=!1;Xe=E.offset;E.offset=0;Ue=E.size;E.size=0;Ve=E.state;E.state=1;Td=E.stride;E.stride=0;Zd=E.type;E.type=b.dtype;We=E.w;E.w=0;jf=E.x;E.x=0;nf=E.y;E.y=0;ff=E.z;E.z=0;kf=p.buffer;p.buffer=B;lf=p.divisor;p.divisor=0;mf=p.normalized;p.normalized=!1;rf=p.offset;p.offset=0;of=p.size;p.size=0;sf=p.state;p.state=1;Bf=p.stride;p.stride=
0;Cf=p.type;p.type=B.dtype;Oe=p.w;p.w=0;De=p.x;p.x=0;pf=p.y;p.y=0;qf=p.z;p.z=0;Df=ta.buffer;ta.buffer=y;Hf=ta.divisor;ta.divisor=0;Af=ta.normalized;ta.normalized=!1;Ef=ta.offset;ta.offset=0;Ff=ta.size;ta.size=0;wf=ta.state;ta.state=1;xf=ta.stride;ta.stride=0;vf=ta.type;ta.type=y.dtype;yf=ta.w;ta.w=0;zf=ta.x;ta.x=0;Jf=ta.y;ta.y=0;Kf=ta.z;ta.z=0;Lf=D.buffer;D.buffer=K;Mf=D.divisor;D.divisor=0;tf=D.normalized;D.normalized=!1;Rf=D.offset;D.offset=0;If=D.size;D.size=0;uf=D.state;D.state=1;dg=D.stride;
D.stride=0;Sf=D.type;D.type=K.dtype;Tf=D.w;D.w=0;qg=D.x;D.x=0;gf=D.y;D.y=0;cf=D.z;D.z=0;Nf=C.buffer;C.buffer=aa;Of=C.divisor;C.divisor=0;eg=C.normalized;C.normalized=!1;fg=C.offset;C.offset=0;gg=C.size;C.size=0;hg=C.state;C.state=1;ig=C.stride;C.stride=0;Wf=C.type;C.type=aa.dtype;Uf=C.w;C.w=0;Xf=C.x;C.x=0;Yf=C.y;C.y=0;Zf=C.z;C.z=0;jg=c.buffer;c.buffer=t;rg=c.divisor;c.divisor=0;sg=c.normalized;c.normalized=!1;tg=c.offset;c.offset=0;ug=c.size;c.size=0;vg=c.state;c.state=1;wg=c.stride;c.stride=0;xg=
c.type;c.type=t.dtype;yg=c.w;c.w=0;zg=c.x;c.x=0;Ag=c.y;c.y=0;Bg=c.z;c.z=0;hf=q.buffer;q.buffer=u;df=q.divisor;q.divisor=0;Pf=q.normalized;q.normalized=!1;Qf=q.offset;q.offset=0;kg=q.size;q.size=0;lg=q.state;q.state=1;mg=q.stride;q.stride=0;ng=q.type;q.type=u.dtype;og=q.w;q.w=0;$f=q.x;q.x=0;Vf=q.y;q.y=0;ag=q.z;q.z=0;bg=a.buffer;a.buffer=G;cg=a.divisor;a.divisor=0;pg=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=G.dtype;
Hg=a.w;a.w=0;Ig=a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=na.buffer;na.buffer=ba;Mg=na.divisor;na.divisor=0;Ng=na.normalized;na.normalized=!1;Og=na.offset;na.offset=0;Pg=na.size;na.size=0;Qg=na.state;na.state=1;Rg=na.stride;na.stride=0;Sg=na.type;na.type=ba.dtype;Tg=na.w;na.w=0;Ug=na.x;na.x=0;Vg=na.y;na.y=0;Wg=na.z;na.z=0;Xg=A.buffer;A.buffer=x;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=
x.dtype;eh=A.w;A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ia.buffer;ia.buffer=T;jh=ia.divisor;ia.divisor=0;kh=ia.normalized;ia.normalized=!1;lh=ia.offset;ia.offset=0;mh=ia.size;ia.size=0;nh=ia.state;ia.state=1;oh=ia.stride;ia.stride=0;ph=ia.type;ia.type=T.dtype;qh=ia.w;ia.w=0;rh=ia.x;ia.x=0;sh=ia.y;ia.y=0;th=ia.z;ia.z=0;uh=Zb.vert;Zb.vert=2;vh=Zb.frag;Zb.frag=1;ua.dirty=!0;w(Z,l,m);Z.viewportWidth=k;Z.viewportHeight=sa;Ad[0]=Ma;Ad[1]=Ha;Ad[2]=Q;Ad[3]=I;Sb[0]=S;Sb[1]=$b;Sb[2]=z;Sb[3]=fa;yd.blend_enable=
qa;Cd[0]=ga;Cd[1]=R;Ud[0]=ka;Ud[1]=N;Ud[2]=F;Ud[3]=wa;yd.cull_enable=V;yd.cull_face=ca;yd.depth_enable=Aa;yd.depth_func=J;yd.depth_mask=Da;ne[0]=da;ne[1]=P;yd.dither=va;yd.lineWidth=ya;Ye[0]=ea;Ye[1]=za;Ye[2]=Ea;Ye[3]=pa;yd.scissor_enable=Ba;ua.profile=oa;Ja.offset=lc;Ja.count=mb;Ja.primitive=Fa;Ga[24]=cc;Ga[3]=ec;Ga[5]=Oc;Ga[7]=fc;Ga[9]=yb;Ga[4]=$d;Ga[6]=Be;Ga[8]=Gf;Ga[10]=qc;Ga[23]=$a;Ga[12]=Hc;Ga[14]=Ic;Ga[16]=ob;Ga[18]=se;Ga[11]=Ed;Ga[13]=uc;Ga[15]=xc;Ga[17]=pd;Ga[22]=Cc;Ga[25]=Ld;Ga[26]=nd;Ga[19]=
Mb;Ga[20]=Sc;Ga[21]=Xc;d.buffer=ef;d.divisor=gd;d.normalized=de;d.offset=zd;d.size=Ae;d.state=ud;d.stride=fe;d.type=ha;d.w=xa;d.x=Id;d.y=Gd;d.z=od;n.buffer=Vc;n.divisor=wd;n.normalized=td;n.offset=kd;n.size=xd;n.state=Bd;n.stride=Dd;n.type=ge;n.w=je;n.x=xe;n.y=ke;n.z=he;U.buffer=ee;U.divisor=ye;U.normalized=be;U.offset=le;U.size=Nc;U.state=hd;U.stride=te;U.type=pe;U.w=Jd;U.x=Pd;U.y=Qd;U.z=Rd;e.buffer=me;e.divisor=ze;e.normalized=Qe;e.offset=re;e.size=Re;e.state=Se;e.stride=Me;e.type=ue;e.w=Ee;e.x=
Ge;e.y=He;e.z=Ie;W.buffer=Fe;W.divisor=Kd;W.normalized=Wd;W.offset=ae;W.size=ce;W.state=Je;W.stride=Hd;W.type=Sd;W.w=Ce;W.x=Ke;W.y=af;W.z=$e;E.buffer=Te;E.divisor=Ne;E.normalized=Ze;E.offset=Xe;E.size=Ue;E.state=Ve;E.stride=Td;E.type=Zd;E.w=We;E.x=jf;E.y=nf;E.z=ff;p.buffer=kf;p.divisor=lf;p.normalized=mf;p.offset=rf;p.size=of;p.state=sf;p.stride=Bf;p.type=Cf;p.w=Oe;p.x=De;p.y=pf;p.z=qf;ta.buffer=Df;ta.divisor=Hf;ta.normalized=Af;ta.offset=Ef;ta.size=Ff;ta.state=wf;ta.stride=xf;ta.type=vf;ta.w=yf;
ta.x=zf;ta.y=Jf;ta.z=Kf;D.buffer=Lf;D.divisor=Mf;D.normalized=tf;D.offset=Rf;D.size=If;D.state=uf;D.stride=dg;D.type=Sf;D.w=Tf;D.x=qg;D.y=gf;D.z=cf;C.buffer=Nf;C.divisor=Of;C.normalized=eg;C.offset=fg;C.size=gg;C.state=hg;C.stride=ig;C.type=Wf;C.w=Uf;C.x=Xf;C.y=Yf;C.z=Zf;c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;q.buffer=hf;q.divisor=df;q.normalized=Pf;q.offset=Qf;q.size=kg;q.state=lg;q.stride=mg;q.type=ng;q.w=og;q.x=
$f;q.y=Vf;q.z=ag;a.buffer=bg;a.divisor=cg;a.normalized=pg;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;na.buffer=Lg;na.divisor=Mg;na.normalized=Ng;na.offset=Og;na.size=Pg;na.state=Qg;na.stride=Rg;na.type=Sg;na.w=Tg;na.x=Ug;na.y=Vg;na.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ia.buffer=ih;ia.divisor=jh;ia.normalized=kh;ia.offset=lh;ia.size=mh;ia.state=nh;ia.stride=oh;ia.type=
ph;ia.w=qh;ia.x=rh;ia.y=sh;ia.z=th;Zb.vert=uh;Zb.frag=vh;ua.dirty=!0}}},$1:function(k,F){var J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c;J=k.attributes;L=k.current;f=k.framebuffer;h=k.gl;g=k.next;b=k.vao;B=g.blend_color;y=L.blend_color;K=g.blend_equation;aa=L.blend_equation;t=g.blend_func;u=L.blend_func;G=g.colorMask;ba=L.colorMask;x=g.depth_range;T=L.depth_range;r=g.polygonOffset_offset;P=L.polygonOffset_offset;ja=g.sample_coverage;d=L.sample_coverage;n=g.scissor_box;U=L.scissor_box;
e=g.stencil_func;W=L.stencil_func;E=g.stencil_opBack;p=L.stencil_opBack;ta=g.stencil_opFront;D=L.stencil_opFront;C=g.viewport;c=L.viewport;return{poll:function(){var b,a,k,A,F,J,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra;L.dirty=!1;a=g.blend_enable;k=g.cull_enable;A=g.depth_enable;F=g.dither;J=g.polygonOffset_enable;Y=g.sample_alpha;ea=g.sample_enable;R=g.scissor_enable;Q=g.stencil_enable;z=g.cull_face;m=L.cull_face;V=g.depth_func;N=L.depth_func;va=g.depth_mask;oa=L.depth_mask;l=g.frontFace;I=L.frontFace;
ca=g.lineWidth;S=L.lineWidth;ma=g.stencil_mask;ra=L.stencil_mask;b=f.next;b!==f.cur&&(b?h.bindFramebuffer(36160,b.framebuffer):h.bindFramebuffer(36160,null),f.cur=b);a!==L.blend_enable&&(a?h.enable(3042):h.disable(3042),L.blend_enable=a);k!==L.cull_enable&&(k?h.enable(2884):h.disable(2884),L.cull_enable=k);A!==L.depth_enable&&(A?h.enable(2929):h.disable(2929),L.depth_enable=A);F!==L.dither&&(F?h.enable(3024):h.disable(3024),L.dither=F);J!==L.polygonOffset_enable&&(J?h.enable(32823):h.disable(32823),
L.polygonOffset_enable=J);Y!==L.sample_alpha&&(Y?h.enable(32926):h.disable(32926),L.sample_alpha=Y);ea!==L.sample_enable&&(ea?h.enable(32928):h.disable(32928),L.sample_enable=ea);R!==L.scissor_enable&&(R?h.enable(3089):h.disable(3089),L.scissor_enable=R);Q!==L.stencil_enable&&(Q?h.enable(2960):h.disable(2960),L.stencil_enable=Q);if(B[0]!==y[0]||B[1]!==y[1]||B[2]!==y[2]||B[3]!==y[3])h.blendColor(B[0],B[1],B[2],B[3]),y[0]=B[0],y[1]=B[1],y[2]=B[2],y[3]=B[3];if(K[0]!==aa[0]||K[1]!==aa[1])h.blendEquationSeparate(K[0],
K[1]),aa[0]=K[0],aa[1]=K[1];if(t[0]!==u[0]||t[1]!==u[1]||t[2]!==u[2]||t[3]!==u[3])h.blendFuncSeparate(t[0],t[1],t[2],t[3]),u[0]=t[0],u[1]=t[1],u[2]=t[2],u[3]=t[3];if(G[0]!==ba[0]||G[1]!==ba[1]||G[2]!==ba[2]||G[3]!==ba[3])h.colorMask(G[0],G[1],G[2],G[3]),ba[0]=G[0],ba[1]=G[1],ba[2]=G[2],ba[3]=G[3];z!==m&&(h.cullFace(z),L.cull_face=z);V!==N&&(h.depthFunc(V),L.depth_func=V);va!==oa&&(h.depthMask(va),L.depth_mask=va);if(x[0]!==T[0]||x[1]!==T[1])h.depthRange(x[0],x[1]),T[0]=x[0],T[1]=x[1];l!==I&&(h.frontFace(l),
L.frontFace=l);ca!==S&&(h.lineWidth(ca),L.lineWidth=ca);if(r[0]!==P[0]||r[1]!==P[1])h.polygonOffset(r[0],r[1]),P[0]=r[0],P[1]=r[1];if(ja[0]!==d[0]||ja[1]!==d[1])h.sampleCoverage(ja[0],ja[1]),d[0]=ja[0],d[1]=ja[1];if(n[0]!==U[0]||n[1]!==U[1]||n[2]!==U[2]||n[3]!==U[3])h.scissor(n[0],n[1],n[2],n[3]),U[0]=n[0],U[1]=n[1],U[2]=n[2],U[3]=n[3];if(e[0]!==W[0]||e[1]!==W[1]||e[2]!==W[2])h.stencilFunc(e[0],e[1],e[2]),W[0]=e[0],W[1]=e[1],W[2]=e[2];ma!==ra&&(h.stencilMask(ma),L.stencil_mask=ma);if(E[0]!==p[0]||
E[1]!==p[1]||E[2]!==p[2]||E[3]!==p[3])h.stencilOpSeparate(E[0],E[1],E[2],E[3]),p[0]=E[0],p[1]=E[1],p[2]=E[2],p[3]=E[3];if(ta[0]!==D[0]||ta[1]!==D[1]||ta[2]!==D[2]||ta[3]!==D[3])h.stencilOpSeparate(ta[0],ta[1],ta[2],ta[3]),D[0]=ta[0],D[1]=ta[1],D[2]=ta[2],D[3]=ta[3];if(C[0]!==c[0]||C[1]!==c[1]||C[2]!==c[2]||C[3]!==c[3])h.viewport(C[0],C[1],C[2],C[3]),c[0]=C[0],c[1]=C[1],c[2]=C[2],c[3]=C[3]},refresh:function(){var q,a,k,A,ia,cc,Y,ea,R,Q,z,m,V,N,va,oa;L.dirty=!1;a=g.blend_enable;k=g.cull_enable;A=g.depth_enable;
ia=g.dither;cc=g.polygonOffset_enable;Y=g.sample_alpha;ea=g.sample_enable;R=g.scissor_enable;Q=g.stencil_enable;z=g.cull_face;m=g.depth_func;V=g.depth_mask;N=g.frontFace;va=g.lineWidth;oa=g.stencil_mask;(q=f.next)?h.bindFramebuffer(36160,q.framebuffer):h.bindFramebuffer(36160,null);f.cur=q;q=J[0];q.buffer?(h.enableVertexAttribArray(0),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(0,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(0),h.vertexAttrib4f(0,q.x,q.y,
q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(0,q.divisor);q=J[1];q.buffer?(h.enableVertexAttribArray(1),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(1,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(1),h.vertexAttrib4f(1,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(1,q.divisor);q=J[2];q.buffer?(h.enableVertexAttribArray(2),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(2,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(2),
h.vertexAttrib4f(2,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(2,q.divisor);q=J[3];q.buffer?(h.enableVertexAttribArray(3),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(3,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(3),h.vertexAttrib4f(3,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(3,q.divisor);q=J[4];q.buffer?(h.enableVertexAttribArray(4),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(4,q.size,q.type,q.normalized,q.stride,
q.offset)):(h.disableVertexAttribArray(4),h.vertexAttrib4f(4,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(4,q.divisor);q=J[5];q.buffer?(h.enableVertexAttribArray(5),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(5,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(5),h.vertexAttrib4f(5,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(5,q.divisor);q=J[6];q.buffer?(h.enableVertexAttribArray(6),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(6,
q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(6),h.vertexAttrib4f(6,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(6,q.divisor);q=J[7];q.buffer?(h.enableVertexAttribArray(7),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(7,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(7),h.vertexAttrib4f(7,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(7,q.divisor);q=J[8];q.buffer?(h.enableVertexAttribArray(8),h.bindBuffer(34962,
q.buffer.buffer),h.vertexAttribPointer(8,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(8),h.vertexAttrib4f(8,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(8,q.divisor);q=J[9];q.buffer?(h.enableVertexAttribArray(9),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(9,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(9),h.vertexAttrib4f(9,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(9,q.divisor);q=J[10];q.buffer?
(h.enableVertexAttribArray(10),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(10,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(10),h.vertexAttrib4f(10,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(10,q.divisor);q=J[11];q.buffer?(h.enableVertexAttribArray(11),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(11,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(11),h.vertexAttrib4f(11,q.x,q.y,q.z,q.w),q.buffer=null);
F.vertexAttribDivisorANGLE(11,q.divisor);q=J[12];q.buffer?(h.enableVertexAttribArray(12),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(12,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(12),h.vertexAttrib4f(12,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(12,q.divisor);q=J[13];q.buffer?(h.enableVertexAttribArray(13),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(13,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(13),
h.vertexAttrib4f(13,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(13,q.divisor);q=J[14];q.buffer?(h.enableVertexAttribArray(14),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(14,q.size,q.type,q.normalized,q.stride,q.offset)):(h.disableVertexAttribArray(14),h.vertexAttrib4f(14,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(14,q.divisor);q=J[15];q.buffer?(h.enableVertexAttribArray(15),h.bindBuffer(34962,q.buffer.buffer),h.vertexAttribPointer(15,q.size,q.type,q.normalized,
q.stride,q.offset)):(h.disableVertexAttribArray(15),h.vertexAttrib4f(15,q.x,q.y,q.z,q.w),q.buffer=null);F.vertexAttribDivisorANGLE(15,q.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);a?h.enable(3042):h.disable(3042);L.blend_enable=a;k?h.enable(2884):h.disable(2884);L.cull_enable=k;A?h.enable(2929):h.disable(2929);L.depth_enable=A;ia?h.enable(3024):h.disable(3024);L.dither=ia;cc?h.enable(32823):h.disable(32823);L.polygonOffset_enable=cc;Y?h.enable(32926):h.disable(32926);L.sample_alpha=Y;ea?h.enable(32928):
h.disable(32928);L.sample_enable=ea;R?h.enable(3089):h.disable(3089);L.scissor_enable=R;Q?h.enable(2960):h.disable(2960);L.stencil_enable=Q;h.blendColor(B[0],B[1],B[2],B[3]);y[0]=B[0];y[1]=B[1];y[2]=B[2];y[3]=B[3];h.blendEquationSeparate(K[0],K[1]);aa[0]=K[0];aa[1]=K[1];h.blendFuncSeparate(t[0],t[1],t[2],t[3]);u[0]=t[0];u[1]=t[1];u[2]=t[2];u[3]=t[3];h.colorMask(G[0],G[1],G[2],G[3]);ba[0]=G[0];ba[1]=G[1];ba[2]=G[2];ba[3]=G[3];h.cullFace(z);L.cull_face=z;h.depthFunc(m);L.depth_func=m;h.depthMask(V);
L.depth_mask=V;h.depthRange(x[0],x[1]);T[0]=x[0];T[1]=x[1];h.frontFace(N);L.frontFace=N;h.lineWidth(va);L.lineWidth=va;h.polygonOffset(r[0],r[1]);P[0]=r[0];P[1]=r[1];h.sampleCoverage(ja[0],ja[1]);d[0]=ja[0];d[1]=ja[1];h.scissor(n[0],n[1],n[2],n[3]);U[0]=n[0];U[1]=n[1];U[2]=n[2];U[3]=n[3];h.stencilFunc(e[0],e[1],e[2]);W[0]=e[0];W[1]=e[1];W[2]=e[2];h.stencilMask(oa);L.stencil_mask=oa;h.stencilOpSeparate(E[0],E[1],E[2],E[3]);p[0]=E[0];p[1]=E[1];p[2]=E[2];p[3]=E[3];h.stencilOpSeparate(ta[0],ta[1],ta[2],
ta[3]);D[0]=ta[0];D[1]=ta[1];D[2]=ta[2];D[3]=ta[3];h.viewport(C[0],C[1],C[2],C[3]);c[0]=C[0];c[1]=C[1];c[2]=C[2];c[3]=C[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,cc,Y,ea,R,Q,z,m,V,N,va,oa){var l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,mb,lc,ga,H,sa,Ha,qa,Aa,Da,ka,Z,ua,Ja,Fa,gb,da,yd,
Zb,Ga,O,Sb;l=k.attributes;I=k.buffer;ca=k.context;S=k.current;ma=k.draw;ra=k.elements;Ca=k.extensions;ya=k.framebuffer;fa=k.gl;Ba=k.isBufferArgs;la=k.next;pa=k.shader;za=k.uniforms;Ma=k.vao;X=la.blend_color;$b=S.blend_color;Ua=la.blend_equation;w=S.blend_equation;v=la.blend_func;M=S.blend_func;wa=la.colorMask;Ea=S.colorMask;mb=la.depth_range;lc=S.depth_range;ga=la.polygonOffset_offset;H=S.polygonOffset_offset;sa=la.sample_coverage;Ha=S.sample_coverage;qa=la.scissor_box;Aa=S.scissor_box;Da=la.stencil_func;
ka=S.stencil_func;Z=la.stencil_opBack;ua=S.stencil_opBack;Ja=la.stencil_opFront;Fa=S.stencil_opFront;gb=la.viewport;da=S.viewport;yd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Zb={};Zb.buffer=J;Zb.divisor=1;Ga={};Ga.buffer=L;Ga.divisor=1;O={};O.buffer=f;O.divisor=1;Sb={};Sb.buffer=h;Sb.divisor=1;return{batch:function(b,d){var h,e,g,v,X,f;h=ya.next;h!==ya.cur&&(h?fa.bindFramebuffer(36160,h.framebuffer):fa.bindFramebuffer(36160,null),ya.cur=h);if(S.dirty){var n,
k,r,E,x,qa,L,y,J,G,B,P,K,U,T,Ua,W,za,ba,pa,ja,gb,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd;n=la.dither;n!==S.dither&&(n?fa.enable(3024):fa.disable(3024),S.dither=n);k=la.depth_func;k!==S.depth_func&&(fa.depthFunc(k),S.depth_func=k);r=mb[0];E=mb[1];if(r!==lc[0]||E!==lc[1])fa.depthRange(r,E),lc[0]=r,lc[1]=E;x=la.depth_mask;x!==S.depth_mask&&(fa.depthMask(x),S.depth_mask=x);qa=wa[0];L=wa[1];y=wa[2];J=wa[3];if(qa!==Ea[0]||L!==Ea[1]||y!==Ea[2]||J!==Ea[3])fa.colorMask(qa,L,y,J),Ea[0]=qa,Ea[1]=L,Ea[2]=y,Ea[3]=J;
G=la.cull_enable;G!==S.cull_enable&&(G?fa.enable(2884):fa.disable(2884),S.cull_enable=G);B=la.cull_face;B!==S.cull_face&&(fa.cullFace(B),S.cull_face=B);P=la.frontFace;P!==S.frontFace&&(fa.frontFace(P),S.frontFace=P);K=la.lineWidth;K!==S.lineWidth&&(fa.lineWidth(K),S.lineWidth=K);U=la.polygonOffset_enable;U!==S.polygonOffset_enable&&(U?fa.enable(32823):fa.disable(32823),S.polygonOffset_enable=U);T=ga[0];Ua=ga[1];if(T!==H[0]||Ua!==H[1])fa.polygonOffset(T,Ua),H[0]=T,H[1]=Ua;W=la.sample_alpha;W!==S.sample_alpha&&
(W?fa.enable(32926):fa.disable(32926),S.sample_alpha=W);za=la.sample_enable;za!==S.sample_enable&&(za?fa.enable(32928):fa.disable(32928),S.sample_enable=za);ba=sa[0];pa=sa[1];if(ba!==Ha[0]||pa!==Ha[1])fa.sampleCoverage(ba,pa),Ha[0]=ba,Ha[1]=pa;ja=la.stencil_enable;ja!==S.stencil_enable&&(ja?fa.enable(2960):fa.disable(2960),S.stencil_enable=ja);gb=la.stencil_mask;gb!==S.stencil_mask&&(fa.stencilMask(gb),S.stencil_mask=gb);Ic=Da[0];Bb=Da[1];Fb=Da[2];if(Ic!==ka[0]||Bb!==ka[1]||Fb!==ka[2])fa.stencilFunc(Ic,
Bb,Fb),ka[0]=Ic,ka[1]=Bb,ka[2]=Fb;uc=Ja[0];yb=Ja[1];xc=Ja[2];Cb=Ja[3];if(uc!==Fa[0]||yb!==Fa[1]||xc!==Fa[2]||Cb!==Fa[3])fa.stencilOpSeparate(uc,yb,xc,Cb),Fa[0]=uc,Fa[1]=yb,Fa[2]=xc,Fa[3]=Cb;Jc=Z[0];mc=Z[1];Gc=Z[2];gd=Z[3];if(Jc!==ua[0]||mc!==ua[1]||Gc!==ua[2]||gd!==ua[3])fa.stencilOpSeparate(Jc,mc,Gc,gd),ua[0]=Jc,ua[1]=mc,ua[2]=Gc,ua[3]=gd}fa.blendColor(0,0,0,0);$b[0]=0;$b[1]=0;$b[2]=0;$b[3]=0;fa.enable(3042);S.blend_enable=!0;fa.blendEquationSeparate(32774,32774);w[0]=32774;w[1]=32774;fa.blendFuncSeparate(770,
771,773,1);M[0]=770;M[1]=771;M[2]=773;M[3]=1;fa.disable(2929);S.depth_enable=!1;fa.enable(3089);S.scissor_enable=!0;if(e=S.profile)g=performance.now(),F.count+=d;fa.useProgram(p.program);v=Ca.angle_instanced_arrays;var Xc,Cc,ec,Hc,pc,qc,nc,fc;Ma.setVAO(null);Xc=ia.location;Cc=l[Xc];Cc.buffer||fa.enableVertexAttribArray(Xc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==aa||!1!==Cc.normalized||0!==Cc.offset||24!==Cc.stride)fa.bindBuffer(34962,aa.buffer),fa.vertexAttribPointer(Xc,2,5126,!1,24,0),Cc.type=
5126,Cc.size=2,Cc.buffer=aa,Cc.normalized=!1,Cc.offset=0,Cc.stride=24;0!==Cc.divisor&&(v.vertexAttribDivisorANGLE(Xc,0),Cc.divisor=0);ec=Y.location;Hc=l[ec];Hc.buffer||fa.enableVertexAttribArray(ec);if(5126!==Hc.type||2!==Hc.size||Hc.buffer!==t||!1!==Hc.normalized||8!==Hc.offset||24!==Hc.stride)fa.bindBuffer(34962,t.buffer),fa.vertexAttribPointer(ec,2,5126,!1,24,8),Hc.type=5126,Hc.size=2,Hc.buffer=t,Hc.normalized=!1,Hc.offset=8,Hc.stride=24;0!==Hc.divisor&&(v.vertexAttribDivisorANGLE(ec,0),Hc.divisor=
0);pc=a.location;qc=l[pc];qc.buffer||fa.enableVertexAttribArray(pc);if(5126!==qc.type||2!==qc.size||qc.buffer!==u||!1!==qc.normalized||16!==qc.offset||24!==qc.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(pc,2,5126,!1,24,16),qc.type=5126,qc.size=2,qc.buffer=u,qc.normalized=!1,qc.offset=16,qc.stride=24;0!==qc.divisor&&(v.vertexAttribDivisorANGLE(pc,0),qc.divisor=0);(nc=ma.elements)?fa.bindBuffer(34963,nc.buffer.buffer):Ma.currentVAO&&(nc=ra.getElements(Ma.currentVAO.elements))&&fa.bindBuffer(34963,
nc.buffer.buffer);fc=ma.offset;for(X=0;X<d;++X){f=b[X];var eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,ha,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,xa,Od,Vd,ie,Yd,Id,Gd,od,Vc;eb=f.viewport;Sc=eb.x|0;zb=eb.y|0;bb="width"in eb?eb.width|0:ca.framebufferWidth-Sc;Mb="height"in
eb?eb.height|0:ca.framebufferHeight-zb;$a=ca.viewportWidth;ca.viewportWidth=bb;ob=ca.viewportHeight;ca.viewportHeight=Mb;fa.viewport(Sc,zb,bb,Mb);da[0]=Sc;da[1]=zb;da[2]=bb;da[3]=Mb;Va=f.viewport;Pc=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:ca.framebufferWidth-Pc;rc="height"in Va?Va.height|0:ca.framebufferHeight-Hb;fa.scissor(Pc,Hb,Ib,rc);Aa[0]=Pc;Aa[1]=Hb;Aa[2]=Ib;Aa[3]=rc;Nb=ta.call(this,ca,f,X);O.offset=Nb;jb=!1;Gb=null;Db=0;xb=!1;Xb=hb=0;Ob=1;rb=0;Sa=5126;ib=ac=pb=Pb=0;Ba(O)?(jb=!0,Gb=I.createStream(34962,
O),Sa=Gb.dtype):(Gb=I.getBuffer(O))?Sa=Gb.dtype:"constant"in O?(Ob=2,"number"===typeof O.constant?(pb=O.constant,ac=ib=Pb=0):(pb=0<O.constant.length?O.constant[0]:0,ac=1<O.constant.length?O.constant[1]:0,ib=2<O.constant.length?O.constant[2]:0,Pb=3<O.constant.length?O.constant[3]:0)):(Gb=Ba(O.buffer)?I.createStream(34962,O.buffer):I.getBuffer(O.buffer),Sa="type"in O?yd[O.type]:Gb.dtype,xb=!!O.normalized,Xb=O.size|0,hb=O.offset|0,rb=O.stride|0,Db=O.divisor|0);qb=Q.location;Ia=l[qb];if(1===Ob){Ia.buffer||
fa.enableVertexAttribArray(qb);sb=Xb||2;if(Ia.type!==Sa||Ia.size!==sb||Ia.buffer!==Gb||Ia.normalized!==xb||Ia.offset!==hb||Ia.stride!==rb)fa.bindBuffer(34962,Gb.buffer),fa.vertexAttribPointer(qb,sb,Sa,xb,rb,hb),Ia.type=Sa,Ia.size=sb,Ia.buffer=Gb,Ia.normalized=xb,Ia.offset=hb,Ia.stride=rb;Ia.divisor!==Db&&(v.vertexAttribDivisorANGLE(qb,Db),Ia.divisor=Db)}else if(Ia.buffer&&(fa.disableVertexAttribArray(qb),Ia.buffer=null),Ia.x!==pb||Ia.y!==ac||Ia.z!==ib||Ia.w!==Pb)fa.vertexAttrib4f(qb,pb,ac,ib,Pb),
Ia.x=pb,Ia.y=ac,Ia.z=ib,Ia.w=Pb;Ka=D.call(this,ca,f,X);Sb.offset=Ka;db=!1;fb=null;La=0;kb=!1;ub=Wa=0;tb=1;Pa=0;Bc=5126;Na=Eb=Jb=Ra=0;Ba(Sb)?(db=!0,fb=I.createStream(34962,Sb),Bc=fb.dtype):(fb=I.getBuffer(Sb))?Bc=fb.dtype:"constant"in Sb?(tb=2,"number"===typeof Sb.constant?(Jb=Sb.constant,Eb=Na=Ra=0):(Jb=0<Sb.constant.length?Sb.constant[0]:0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Na=2<Sb.constant.length?Sb.constant[2]:0,Ra=3<Sb.constant.length?Sb.constant[3]:0)):(fb=Ba(Sb.buffer)?I.createStream(34962,
Sb.buffer):I.getBuffer(Sb.buffer),Bc="type"in Sb?yd[Sb.type]:fb.dtype,kb=!!Sb.normalized,ub=Sb.size|0,Wa=Sb.offset|0,Pa=Sb.stride|0,La=Sb.divisor|0);ha=z.location;Ya=l[ha];if(1===tb){Ya.buffer||fa.enableVertexAttribArray(ha);Kb=ub||2;if(Ya.type!==Bc||Ya.size!==Kb||Ya.buffer!==fb||Ya.normalized!==kb||Ya.offset!==Wa||Ya.stride!==Pa)fa.bindBuffer(34962,fb.buffer),fa.vertexAttribPointer(ha,Kb,Bc,kb,Pa,Wa),Ya.type=Bc,Ya.size=Kb,Ya.buffer=fb,Ya.normalized=kb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==La&&(v.vertexAttribDivisorANGLE(ha,
La),Ya.divisor=La)}else if(Ya.buffer&&(fa.disableVertexAttribArray(ha),Ya.buffer=null),Ya.x!==Jb||Ya.y!==Eb||Ya.z!==Na||Ya.w!==Ra)fa.vertexAttrib4f(ha,Jb,Eb,Na,Ra),Ya.x=Jb,Ya.y=Eb,Ya.z=Na,Ya.w=Ra;Lb=C.call(this,ca,f,X);Ga.offset=Lb;lb=!1;Oa=null;Yb=0;Qa=!1;wb=vb=0;Ta=1;nb=0;gc=5126;jc=ab=vc=Ec=0;Ba(Ga)?(lb=!0,Oa=I.createStream(34962,Ga),gc=Oa.dtype):(Oa=I.getBuffer(Ga))?gc=Oa.dtype:"constant"in Ga?(Ta=2,"number"===typeof Ga.constant?(vc=Ga.constant,ab=jc=Ec=0):(vc=0<Ga.constant.length?Ga.constant[0]:
0,ab=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,Ec=3<Ga.constant.length?Ga.constant[3]:0)):(Oa=Ba(Ga.buffer)?I.createStream(34962,Ga.buffer):I.getBuffer(Ga.buffer),gc="type"in Ga?yd[Ga.type]:Oa.dtype,Qa=!!Ga.normalized,wb=Ga.size|0,vb=Ga.offset|0,nb=Ga.stride|0,Yb=Ga.divisor|0);Tc=cc.location;Xa=l[Tc];if(1===Ta){Xa.buffer||fa.enableVertexAttribArray(Tc);ld=wb||4;if(Xa.type!==gc||Xa.size!==ld||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==vb||Xa.stride!==nb)fa.bindBuffer(34962,
Oa.buffer),fa.vertexAttribPointer(Tc,ld,gc,Qa,nb,vb),Xa.type=gc,Xa.size=ld,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=vb,Xa.stride=nb;Xa.divisor!==Yb&&(v.vertexAttribDivisorANGLE(Tc,Yb),Xa.divisor=Yb)}else if(Xa.buffer&&(fa.disableVertexAttribArray(Tc),Xa.buffer=null),Xa.x!==vc||Xa.y!==ab||Xa.z!==jc||Xa.w!==Ec)fa.vertexAttrib4f(Tc,vc,ab,jc,Ec),Xa.x=vc,Xa.y=ab,Xa.z=jc,Xa.w=Ec;Ab=c.call(this,ca,f,X);Zb.offset=Ab;Za=!1;Ub=null;tc=0;Vb=!1;Kc=Qb=0;Rb=1;qd=0;Dc=5126;vd=Yc=Mc=oe=0;Ba(Zb)?(Za=!0,Ub=I.createStream(34962,
Zb),Dc=Ub.dtype):(Ub=I.getBuffer(Zb))?Dc=Ub.dtype:"constant"in Zb?(Rb=2,"number"===typeof Zb.constant?(Mc=Zb.constant,Yc=vd=oe=0):(Mc=0<Zb.constant.length?Zb.constant[0]:0,Yc=1<Zb.constant.length?Zb.constant[1]:0,vd=2<Zb.constant.length?Zb.constant[2]:0,oe=3<Zb.constant.length?Zb.constant[3]:0)):(Ub=Ba(Zb.buffer)?I.createStream(34962,Zb.buffer):I.getBuffer(Zb.buffer),Dc="type"in Zb?yd[Zb.type]:Ub.dtype,Vb=!!Zb.normalized,Kc=Zb.size|0,Qb=Zb.offset|0,qd=Zb.stride|0,tc=Zb.divisor|0);oc=A.location;wc=
l[oc];if(1===Rb){wc.buffer||fa.enableVertexAttribArray(oc);hc=Kc||4;if(wc.type!==Dc||wc.size!==hc||wc.buffer!==Ub||wc.normalized!==Vb||wc.offset!==Qb||wc.stride!==qd)fa.bindBuffer(34962,Ub.buffer),fa.vertexAttribPointer(oc,hc,Dc,Vb,qd,Qb),wc.type=Dc,wc.size=hc,wc.buffer=Ub,wc.normalized=Vb,wc.offset=Qb,wc.stride=qd;wc.divisor!==tc&&(v.vertexAttribDivisorANGLE(oc,tc),wc.divisor=tc)}else if(wc.buffer&&(fa.disableVertexAttribArray(oc),wc.buffer=null),wc.x!==Mc||wc.y!==Yc||wc.z!==vd||wc.w!==oe)fa.vertexAttrib4f(oc,
Mc,Yc,vd,oe),wc.x=Mc,wc.y=Yc,wc.z=vd,wc.w=oe;cb=q.call(this,ca,f,X);sc=cb[0];Wb=cb[1];ic=cb[2];Ac=cb[3];X&&Tb===sc&&dc===Wb&&yc===ic&&cd===Ac||(Tb=sc,dc=Wb,yc=ic,cd=Ac,fa.uniform4f(oa.location,sc,Wb,ic,Ac));Qc=f.lineWidth;X&&Rc===Qc||(Rc=Qc,fa.uniform1f(ea.location,Qc));Uc=f.capSize;X&&Zc===Uc||(Zc=Uc,fa.uniform1f(na.location,Uc));md=f.scale;dd=md[0];kc=md[1];X&&$c===dd&&bc===kc||($c=dd,bc=kc,fa.uniform2f(m.location,dd,kc));ad=f.scaleFract;Wc=ad[0];zc=ad[1];X&&ed===Wc&&id===zc||(ed=Wc,id=zc,fa.uniform2f(V.location,
Wc,zc));rd=f.translate;ve=rd[0];jd=rd[1];X&&we===ve&&xa===jd||(we=ve,xa=jd,fa.uniform2f(N.location,ve,jd));Od=f.translateFract;Vd=Od[0];Yd=Od[1];X&&ie===Vd&&Id===Yd||(ie=Vd,Id=Yd,fa.uniform2f(va.location,Vd,Yd));Gd=f.opacity;X&&od===Gd||(od=Gd,fa.uniform1f(R.location,Gd));Vc=f.count;0<Vc?nc?v.drawElementsInstancedANGLE(4,36,nc.type,fc<<(nc.type-5121>>1),Vc):v.drawArraysInstancedANGLE(4,fc,36,Vc):0>Vc&&(nc?fa.drawElements(4,36,nc.type,fc<<(nc.type-5121>>1)):fa.drawArrays(4,fc,36));ca.viewportWidth=
$a;ca.viewportHeight=ob;jb&&I.destroyStream(Gb);db&&I.destroyStream(fb);lb&&I.destroyStream(Oa);Za&&I.destroyStream(Ub)}S.dirty=!0;Ma.setVAO(null);e&&(F.cpuTime+=performance.now()-g)},draw:function(c){var d,h,e,q,v,X,f,n,k,p,r,E,x,qa,L,D,C,J,P,U,T,Ua,W,za,ba,pa,ja,ta,gb,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,ha,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb;d=ya.next;d!==ya.cur&&(d?
fa.bindFramebuffer(36160,d.framebuffer):fa.bindFramebuffer(36160,null),ya.cur=d);if(S.dirty){var Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb;Qa=la.dither;Qa!==S.dither&&(Qa?fa.enable(3024):fa.disable(3024),S.dither=Qa);vb=la.depth_func;vb!==S.depth_func&&(fa.depthFunc(vb),S.depth_func=vb);wb=mb[0];Ta=mb[1];if(wb!==lc[0]||Ta!==lc[1])fa.depthRange(wb,Ta),lc[0]=wb,lc[1]=Ta;nb=la.depth_mask;nb!==S.depth_mask&&(fa.depthMask(nb),S.depth_mask=nb);gc=
wa[0];Ec=wa[1];vc=wa[2];ab=wa[3];if(gc!==Ea[0]||Ec!==Ea[1]||vc!==Ea[2]||ab!==Ea[3])fa.colorMask(gc,Ec,vc,ab),Ea[0]=gc,Ea[1]=Ec,Ea[2]=vc,Ea[3]=ab;jc=la.cull_enable;jc!==S.cull_enable&&(jc?fa.enable(2884):fa.disable(2884),S.cull_enable=jc);Tc=la.cull_face;Tc!==S.cull_face&&(fa.cullFace(Tc),S.cull_face=Tc);Xa=la.frontFace;Xa!==S.frontFace&&(fa.frontFace(Xa),S.frontFace=Xa);ld=la.lineWidth;ld!==S.lineWidth&&(fa.lineWidth(ld),S.lineWidth=ld);Ab=la.polygonOffset_enable;Ab!==S.polygonOffset_enable&&(Ab?
fa.enable(32823):fa.disable(32823),S.polygonOffset_enable=Ab);Za=ga[0];Ub=ga[1];if(Za!==H[0]||Ub!==H[1])fa.polygonOffset(Za,Ub),H[0]=Za,H[1]=Ub;tc=la.sample_alpha;tc!==S.sample_alpha&&(tc?fa.enable(32926):fa.disable(32926),S.sample_alpha=tc);Vb=la.sample_enable;Vb!==S.sample_enable&&(Vb?fa.enable(32928):fa.disable(32928),S.sample_enable=Vb);Qb=sa[0];Kc=sa[1];if(Qb!==Ha[0]||Kc!==Ha[1])fa.sampleCoverage(Qb,Kc),Ha[0]=Qb,Ha[1]=Kc;Rb=la.stencil_enable;Rb!==S.stencil_enable&&(Rb?fa.enable(2960):fa.disable(2960),
S.stencil_enable=Rb);qd=la.stencil_mask;qd!==S.stencil_mask&&(fa.stencilMask(qd),S.stencil_mask=qd);Dc=Da[0];oe=Da[1];Mc=Da[2];if(Dc!==ka[0]||oe!==ka[1]||Mc!==ka[2])fa.stencilFunc(Dc,oe,Mc),ka[0]=Dc,ka[1]=oe,ka[2]=Mc;Yc=Ja[0];vd=Ja[1];oc=Ja[2];wc=Ja[3];if(Yc!==Fa[0]||vd!==Fa[1]||oc!==Fa[2]||wc!==Fa[3])fa.stencilOpSeparate(Yc,vd,oc,wc),Fa[0]=Yc,Fa[1]=vd,Fa[2]=oc,Fa[3]=wc;hc=Z[0];cb=Z[1];sc=Z[2];Tb=Z[3];if(hc!==ua[0]||cb!==ua[1]||sc!==ua[2]||Tb!==ua[3])fa.stencilOpSeparate(hc,cb,sc,Tb),ua[0]=hc,ua[1]=
cb,ua[2]=sc,ua[3]=Tb}h=c.viewport;e=h.x|0;q=h.y|0;v="width"in h?h.width|0:ca.framebufferWidth-e;X="height"in h?h.height|0:ca.framebufferHeight-q;f=ca.viewportWidth;ca.viewportWidth=v;n=ca.viewportHeight;ca.viewportHeight=X;fa.viewport(e,q,v,X);da[0]=e;da[1]=q;da[2]=v;da[3]=X;fa.blendColor(0,0,0,0);$b[0]=0;$b[1]=0;$b[2]=0;$b[3]=0;fa.enable(3042);S.blend_enable=!0;fa.blendEquationSeparate(32774,32774);w[0]=32774;w[1]=32774;fa.blendFuncSeparate(770,771,773,1);M[0]=770;M[1]=771;M[2]=773;M[3]=1;fa.disable(2929);
S.depth_enable=!1;k=c.viewport;p=k.x|0;r=k.y|0;E="width"in k?k.width|0:ca.framebufferWidth-p;x="height"in k?k.height|0:ca.framebufferHeight-r;fa.scissor(p,r,E,x);Aa[0]=p;Aa[1]=r;Aa[2]=E;Aa[3]=x;fa.enable(3089);S.scissor_enable=!0;if(qa=S.profile)L=performance.now(),F.count++;fa.useProgram(g.program);D=Ca.angle_instanced_arrays;Ma.setVAO(null);C=b.call(this,ca,c,0);O.offset=C;J=!1;P=null;U=0;T=!1;W=Ua=0;za=1;ba=0;pa=5126;Ic=gb=ta=ja=0;Ba(O)?(J=!0,P=I.createStream(34962,O),pa=P.dtype):(P=I.getBuffer(O))?
pa=P.dtype:"constant"in O?(za=2,"number"===typeof O.constant?(ta=O.constant,gb=Ic=ja=0):(ta=0<O.constant.length?O.constant[0]:0,gb=1<O.constant.length?O.constant[1]:0,Ic=2<O.constant.length?O.constant[2]:0,ja=3<O.constant.length?O.constant[3]:0)):(P=Ba(O.buffer)?I.createStream(34962,O.buffer):I.getBuffer(O.buffer),pa="type"in O?yd[O.type]:P.dtype,T=!!O.normalized,W=O.size|0,Ua=O.offset|0,ba=O.stride|0,U=O.divisor|0);Bb=Q.location;Fb=l[Bb];if(1===za){Fb.buffer||fa.enableVertexAttribArray(Bb);uc=W||
2;if(Fb.type!==pa||Fb.size!==uc||Fb.buffer!==P||Fb.normalized!==T||Fb.offset!==Ua||Fb.stride!==ba)fa.bindBuffer(34962,P.buffer),fa.vertexAttribPointer(Bb,uc,pa,T,ba,Ua),Fb.type=pa,Fb.size=uc,Fb.buffer=P,Fb.normalized=T,Fb.offset=Ua,Fb.stride=ba;Fb.divisor!==U&&(D.vertexAttribDivisorANGLE(Bb,U),Fb.divisor=U)}else if(Fb.buffer&&(fa.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==ta||Fb.y!==gb||Fb.z!==Ic||Fb.w!==ja)fa.vertexAttrib4f(Bb,ta,gb,Ic,ja),Fb.x=ta,Fb.y=gb,Fb.z=Ic,Fb.w=ja;yb=B.call(this,
ca,c,0);Sb.offset=yb;xc=!1;Cb=null;Jc=0;mc=!1;gd=Gc=0;Xc=1;Cc=0;ec=5126;nc=qc=pc=Hc=0;Ba(Sb)?(xc=!0,Cb=I.createStream(34962,Sb),ec=Cb.dtype):(Cb=I.getBuffer(Sb))?ec=Cb.dtype:"constant"in Sb?(Xc=2,"number"===typeof Sb.constant?(pc=Sb.constant,qc=nc=Hc=0):(pc=0<Sb.constant.length?Sb.constant[0]:0,qc=1<Sb.constant.length?Sb.constant[1]:0,nc=2<Sb.constant.length?Sb.constant[2]:0,Hc=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Ba(Sb.buffer)?I.createStream(34962,Sb.buffer):I.getBuffer(Sb.buffer),ec="type"in
Sb?yd[Sb.type]:Cb.dtype,mc=!!Sb.normalized,gd=Sb.size|0,Gc=Sb.offset|0,Cc=Sb.stride|0,Jc=Sb.divisor|0);fc=z.location;eb=l[fc];if(1===Xc){eb.buffer||fa.enableVertexAttribArray(fc);Sc=gd||2;if(eb.type!==ec||eb.size!==Sc||eb.buffer!==Cb||eb.normalized!==mc||eb.offset!==Gc||eb.stride!==Cc)fa.bindBuffer(34962,Cb.buffer),fa.vertexAttribPointer(fc,Sc,ec,mc,Cc,Gc),eb.type=ec,eb.size=Sc,eb.buffer=Cb,eb.normalized=mc,eb.offset=Gc,eb.stride=Cc;eb.divisor!==Jc&&(D.vertexAttribDivisorANGLE(fc,Jc),eb.divisor=Jc)}else if(eb.buffer&&
(fa.disableVertexAttribArray(fc),eb.buffer=null),eb.x!==pc||eb.y!==qc||eb.z!==nc||eb.w!==Hc)fa.vertexAttrib4f(fc,pc,qc,nc,Hc),eb.x=pc,eb.y=qc,eb.z=nc,eb.w=Hc;zb=y.call(this,ca,c,0);Ga.offset=zb;bb=!1;Mb=null;$a=0;ob=!1;ha=Va=0;Hb=1;Ib=0;rc=5126;Db=Gb=jb=Nb=0;Ba(Ga)?(bb=!0,Mb=I.createStream(34962,Ga),rc=Mb.dtype):(Mb=I.getBuffer(Ga))?rc=Mb.dtype:"constant"in Ga?(Hb=2,"number"===typeof Ga.constant?(jb=Ga.constant,Gb=Db=Nb=0):(jb=0<Ga.constant.length?Ga.constant[0]:0,Gb=1<Ga.constant.length?Ga.constant[1]:
0,Db=2<Ga.constant.length?Ga.constant[2]:0,Nb=3<Ga.constant.length?Ga.constant[3]:0)):(Mb=Ba(Ga.buffer)?I.createStream(34962,Ga.buffer):I.getBuffer(Ga.buffer),rc="type"in Ga?yd[Ga.type]:Mb.dtype,ob=!!Ga.normalized,ha=Ga.size|0,Va=Ga.offset|0,Ib=Ga.stride|0,$a=Ga.divisor|0);xb=cc.location;hb=l[xb];if(1===Hb){hb.buffer||fa.enableVertexAttribArray(xb);Xb=ha||4;if(hb.type!==rc||hb.size!==Xb||hb.buffer!==Mb||hb.normalized!==ob||hb.offset!==Va||hb.stride!==Ib)fa.bindBuffer(34962,Mb.buffer),fa.vertexAttribPointer(xb,
Xb,rc,ob,Ib,Va),hb.type=rc,hb.size=Xb,hb.buffer=Mb,hb.normalized=ob,hb.offset=Va,hb.stride=Ib;hb.divisor!==$a&&(D.vertexAttribDivisorANGLE(xb,$a),hb.divisor=$a)}else if(hb.buffer&&(fa.disableVertexAttribArray(xb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Nb)fa.vertexAttrib4f(xb,jb,Gb,Db,Nb),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Nb;Ob=K.call(this,ca,c,0);Zb.offset=Ob;rb=!1;Sa=null;Pb=0;pb=!1;ib=ac=0;qb=1;Ia=0;sb=5126;La=fb=db=Ka=0;Ba(Zb)?(rb=!0,Sa=I.createStream(34962,Zb),sb=Sa.dtype):(Sa=I.getBuffer(Zb))?
sb=Sa.dtype:"constant"in Zb?(qb=2,"number"===typeof Zb.constant?(db=Zb.constant,fb=La=Ka=0):(db=0<Zb.constant.length?Zb.constant[0]:0,fb=1<Zb.constant.length?Zb.constant[1]:0,La=2<Zb.constant.length?Zb.constant[2]:0,Ka=3<Zb.constant.length?Zb.constant[3]:0)):(Sa=Ba(Zb.buffer)?I.createStream(34962,Zb.buffer):I.getBuffer(Zb.buffer),sb="type"in Zb?yd[Zb.type]:Sa.dtype,pb=!!Zb.normalized,ib=Zb.size|0,ac=Zb.offset|0,Ia=Zb.stride|0,Pb=Zb.divisor|0);kb=A.location;Wa=l[kb];if(1===qb){Wa.buffer||fa.enableVertexAttribArray(kb);
ub=ib||4;if(Wa.type!==sb||Wa.size!==ub||Wa.buffer!==Sa||Wa.normalized!==pb||Wa.offset!==ac||Wa.stride!==Ia)fa.bindBuffer(34962,Sa.buffer),fa.vertexAttribPointer(kb,ub,sb,pb,Ia,ac),Wa.type=sb,Wa.size=ub,Wa.buffer=Sa,Wa.normalized=pb,Wa.offset=ac,Wa.stride=Ia;Wa.divisor!==Pb&&(D.vertexAttribDivisorANGLE(kb,Pb),Wa.divisor=Pb)}else if(Wa.buffer&&(fa.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==db||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)fa.vertexAttrib4f(kb,db,fb,La,Ka),Wa.x=db,Wa.y=fb,Wa.z=La,Wa.w=Ka;
tb=ia.location;Pa=l[tb];Pa.buffer||fa.enableVertexAttribArray(tb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==aa||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)fa.bindBuffer(34962,aa.buffer),fa.vertexAttribPointer(tb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=aa,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(D.vertexAttribDivisorANGLE(tb,0),Pa.divisor=0);Bc=Y.location;Ra=l[Bc];Ra.buffer||fa.enableVertexAttribArray(Bc);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==t||!1!==Ra.normalized||
8!==Ra.offset||24!==Ra.stride)fa.bindBuffer(34962,t.buffer),fa.vertexAttribPointer(Bc,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=t,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(D.vertexAttribDivisorANGLE(Bc,0),Ra.divisor=0);Jb=a.location;Eb=l[Jb];Eb.buffer||fa.enableVertexAttribArray(Jb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==u||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(Jb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,
Eb.buffer=u,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(D.vertexAttribDivisorANGLE(Jb,0),Eb.divisor=0);Na=G.call(this,ca,c,0);fa.uniform4f(oa.location,Na[0],Na[1],Na[2],Na[3]);fa.uniform1f(ea.location,c.lineWidth);fa.uniform1f(na.location,c.capSize);Fd=c.scale;fa.uniform2f(m.location,Fd[0],Fd[1]);Ya=c.scaleFract;fa.uniform2f(V.location,Ya[0],Ya[1]);Kb=c.translate;fa.uniform2f(N.location,Kb[0],Kb[1]);Lb=c.translateFract;fa.uniform2f(va.location,Lb[0],Lb[1]);fa.uniform1f(R.location,
c.opacity);(lb=ma.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ma.currentVAO&&(lb=ra.getElements(Ma.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Oa=ma.offset;Yb=c.count;0<Yb?lb?D.drawElementsInstancedANGLE(4,36,lb.type,Oa<<(lb.type-5121>>1),Yb):D.drawArraysInstancedANGLE(4,Oa,36,Yb):0>Yb&&(lb?fa.drawElements(4,36,lb.type,Oa<<(lb.type-5121>>1)):fa.drawArrays(4,Oa,36));S.dirty=!0;Ma.setVAO(null);ca.viewportWidth=f;ca.viewportHeight=n;qa&&(F.cpuTime+=performance.now()-L);J&&I.destroyStream(P);
xc&&I.destroyStream(Cb);bb&&I.destroyStream(Mb);rb&&I.destroyStream(Sa)},scope:function(a,c,b){var h,l,w,q,g,m,H,f,M,k,p,A,sa,Ma,Ha,Q,$b,z,fa,ga,R,L,D,ka,N,C,Z,wa,y,V,J,G,Aa,B,Da,da,va,ya,K,ra,Y,ua,ea,Ea,oa,lc,ta,na,ia,Ca,mb,Fa,Ja,cc,ha,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,
bc,ad,Wc,ed,zc,id,rd,ve,we,jd,xa,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd;h=a.viewport;l=h.x|0;w=h.y|0;q="width"in h?h.width|0:ca.framebufferWidth-l;g="height"in h?h.height|0:ca.framebufferHeight-w;m=ca.viewportWidth;ca.viewportWidth=q;H=ca.viewportHeight;ca.viewportHeight=g;f=gb[0];gb[0]=l;M=gb[1];gb[1]=w;k=gb[2];gb[2]=q;p=gb[3];gb[3]=g;A=X[0];X[0]=0;sa=X[1];X[1]=0;Ma=X[2];X[2]=0;Ha=X[3];X[3]=0;Q=la.blend_enable;
la.blend_enable=!0;$b=Ua[0];Ua[0]=32774;z=Ua[1];Ua[1]=32774;fa=v[0];v[0]=770;ga=v[1];v[1]=771;R=v[2];v[2]=773;L=v[3];v[3]=1;D=la.depth_enable;la.depth_enable=!1;ka=a.viewport;N=ka.x|0;C=ka.y|0;Z="width"in ka?ka.width|0:ca.framebufferWidth-N;wa="height"in ka?ka.height|0:ca.framebufferHeight-C;y=qa[0];qa[0]=N;V=qa[1];qa[1]=C;J=qa[2];qa[2]=Z;G=qa[3];qa[3]=wa;Aa=la.scissor_enable;la.scissor_enable=!0;if(B=S.profile)Da=performance.now(),F.count++;da=ma.count;ma.count=36;va=a.count;ya=ma.instances;ma.instances=
va;K=ma.primitive;ma.primitive=4;ra=a.capSize;Y=za[5];za[5]=ra;ua=a.lineWidth;ea=za[4];za[4]=ua;Ea=a.opacity;oa=za[10];za[10]=Ea;lc=a.range;ta=za[18];za[18]=lc;na=a.scale;ia=za[6];za[6]=na;Ca=a.scaleFract;mb=za[7];za[7]=Ca;Fa=a.translate;Ja=za[8];za[8]=Fa;cc=a.translateFract;ha=za[9];za[9]=cc;Hb=ba.call(this,ca,a,b);Ib=za[3];za[3]=Hb;rc=x.buffer;x.buffer=u;Nb=x.divisor;x.divisor=0;jb=x.normalized;x.normalized=!1;Gb=x.offset;x.offset=16;Db=x.size;x.size=0;xb=x.state;x.state=1;hb=x.stride;x.stride=
24;Xb=x.type;x.type=5126;Ob=x.w;x.w=0;rb=x.x;x.x=0;Sa=x.y;x.y=0;Pb=x.z;x.z=0;pb=T.call(this,ca,a,b);Zb.offset=pb;ac=!1;ib=null;qb=0;Ia=!1;Ka=sb=0;db=1;fb=0;La=5126;tb=ub=Wa=kb=0;Ba(Zb)?(ac=!0,ib=I.createStream(34962,Zb),La=ib.dtype):(ib=I.getBuffer(Zb))?La=ib.dtype:"constant"in Zb?(db=2,"number"===typeof Zb.constant?(Wa=Zb.constant,ub=tb=kb=0):(Wa=0<Zb.constant.length?Zb.constant[0]:0,ub=1<Zb.constant.length?Zb.constant[1]:0,tb=2<Zb.constant.length?Zb.constant[2]:0,kb=3<Zb.constant.length?Zb.constant[3]:
0)):(ib=Ba(Zb.buffer)?I.createStream(34962,Zb.buffer):I.getBuffer(Zb.buffer),La="type"in Zb?yd[Zb.type]:ib.dtype,Ia=!!Zb.normalized,Ka=Zb.size|0,sb=Zb.offset|0,fb=Zb.stride|0,qb=Zb.divisor|0);Pa=r.buffer;r.buffer=ib;Bc=r.divisor;r.divisor=qb;Ra=r.normalized;r.normalized=Ia;Jb=r.offset;r.offset=sb;Eb=r.size;r.size=Ka;Na=r.state;r.state=db;Fd=r.stride;r.stride=fb;Ya=r.type;r.type=La;Kb=r.w;r.w=kb;Lb=r.x;r.x=Wa;lb=r.y;r.y=ub;Oa=r.z;r.z=tb;Yb=P.buffer;P.buffer=aa;Qa=P.divisor;P.divisor=0;vb=P.normalized;
P.normalized=!1;wb=P.offset;P.offset=0;Ta=P.size;P.size=0;nb=P.state;P.state=1;gc=P.stride;P.stride=24;Ec=P.type;P.type=5126;vc=P.w;P.w=0;ab=P.x;P.x=0;jc=P.y;P.y=0;Tc=P.z;P.z=0;Xa=ja.call(this,ca,a,b);Ga.offset=Xa;ld=!1;Ab=null;Za=0;Ub=!1;Vb=tc=0;Qb=1;Kc=0;Rb=5126;Mc=oe=Dc=qd=0;Ba(Ga)?(ld=!0,Ab=I.createStream(34962,Ga),Rb=Ab.dtype):(Ab=I.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Dc=Ga.constant,oe=Mc=qd=0):(Dc=0<Ga.constant.length?Ga.constant[0]:0,oe=1<Ga.constant.length?
Ga.constant[1]:0,Mc=2<Ga.constant.length?Ga.constant[2]:0,qd=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Ba(Ga.buffer)?I.createStream(34962,Ga.buffer):I.getBuffer(Ga.buffer),Rb="type"in Ga?yd[Ga.type]:Ab.dtype,Ub=!!Ga.normalized,Vb=Ga.size|0,tc=Ga.offset|0,Kc=Ga.stride|0,Za=Ga.divisor|0);Yc=d.buffer;d.buffer=Ab;vd=d.divisor;d.divisor=Za;oc=d.normalized;d.normalized=Ub;wc=d.offset;d.offset=tc;hc=d.size;d.size=Vb;cb=d.state;d.state=Qb;sc=d.stride;d.stride=Kc;Tb=d.type;d.type=Rb;Wb=d.w;d.w=qd;dc=d.x;
d.x=Dc;ic=d.y;d.y=oe;yc=d.z;d.z=Mc;Ac=n.buffer;n.buffer=t;cd=n.divisor;n.divisor=0;Qc=n.normalized;n.normalized=!1;Rc=n.offset;n.offset=8;Uc=n.size;n.size=0;Zc=n.state;n.state=1;md=n.stride;n.stride=24;dd=n.type;n.type=5126;$c=n.w;n.w=0;kc=n.x;n.x=0;bc=n.y;n.y=0;ad=n.z;n.z=0;Wc=U.call(this,ca,a,b);O.offset=Wc;ed=!1;zc=null;id=0;rd=!1;we=ve=0;jd=1;xa=0;Od=5126;Id=Yd=ie=Vd=0;Ba(O)?(ed=!0,zc=I.createStream(34962,O),Od=zc.dtype):(zc=I.getBuffer(O))?Od=zc.dtype:"constant"in O?(jd=2,"number"===typeof O.constant?
(ie=O.constant,Yd=Id=Vd=0):(ie=0<O.constant.length?O.constant[0]:0,Yd=1<O.constant.length?O.constant[1]:0,Id=2<O.constant.length?O.constant[2]:0,Vd=3<O.constant.length?O.constant[3]:0)):(zc=Ba(O.buffer)?I.createStream(34962,O.buffer):I.getBuffer(O.buffer),Od="type"in O?yd[O.type]:zc.dtype,rd=!!O.normalized,we=O.size|0,ve=O.offset|0,xa=O.stride|0,id=O.divisor|0);Gd=e.buffer;e.buffer=zc;od=e.divisor;e.divisor=id;Vc=e.normalized;e.normalized=rd;wd=e.offset;e.offset=ve;td=e.size;e.size=we;kd=e.state;
e.state=jd;xd=e.stride;e.stride=xa;Bd=e.type;e.type=Od;Dd=e.w;e.w=Vd;ge=e.x;e.x=ie;je=e.y;e.y=Yd;xe=e.z;e.z=Id;ke=W.call(this,ca,a,b);Sb.offset=ke;he=!1;ee=null;ye=0;be=!1;Nc=le=0;hd=1;te=0;pe=5126;Rd=Qd=Pd=Jd=0;Ba(Sb)?(he=!0,ee=I.createStream(34962,Sb),pe=ee.dtype):(ee=I.getBuffer(Sb))?pe=ee.dtype:"constant"in Sb?(hd=2,"number"===typeof Sb.constant?(Pd=Sb.constant,Qd=Rd=Jd=0):(Pd=0<Sb.constant.length?Sb.constant[0]:0,Qd=1<Sb.constant.length?Sb.constant[1]:0,Rd=2<Sb.constant.length?Sb.constant[2]:
0,Jd=3<Sb.constant.length?Sb.constant[3]:0)):(ee=Ba(Sb.buffer)?I.createStream(34962,Sb.buffer):I.getBuffer(Sb.buffer),pe="type"in Sb?yd[Sb.type]:ee.dtype,be=!!Sb.normalized,Nc=Sb.size|0,le=Sb.offset|0,te=Sb.stride|0,ye=Sb.divisor|0);me=E.buffer;E.buffer=ee;ze=E.divisor;E.divisor=ye;Qe=E.normalized;E.normalized=be;re=E.offset;E.offset=le;Re=E.size;E.size=Nc;Se=E.state;E.state=hd;Me=E.stride;E.stride=te;ue=E.type;E.type=pe;Ee=E.w;E.w=Jd;Ge=E.x;E.x=Pd;He=E.y;E.y=Qd;Ie=E.z;E.z=Rd;Fe=pa.vert;pa.vert=2;
Kd=pa.frag;pa.frag=1;S.dirty=!0;c(ca,a,b);ca.viewportWidth=m;ca.viewportHeight=H;gb[0]=f;gb[1]=M;gb[2]=k;gb[3]=p;X[0]=A;X[1]=sa;X[2]=Ma;X[3]=Ha;la.blend_enable=Q;Ua[0]=$b;Ua[1]=z;v[0]=fa;v[1]=ga;v[2]=R;v[3]=L;la.depth_enable=D;qa[0]=y;qa[1]=V;qa[2]=J;qa[3]=G;la.scissor_enable=Aa;B&&(F.cpuTime+=performance.now()-Da);ma.count=da;ma.instances=ya;ma.primitive=K;za[5]=Y;za[4]=ea;za[10]=oa;za[18]=ta;za[6]=ia;za[7]=mb;za[8]=Ja;za[9]=ha;za[3]=Ib;x.buffer=rc;x.divisor=Nb;x.normalized=jb;x.offset=Gb;x.size=
Db;x.state=xb;x.stride=hb;x.type=Xb;x.w=Ob;x.x=rb;x.y=Sa;x.z=Pb;ac&&I.destroyStream(ib);r.buffer=Pa;r.divisor=Bc;r.normalized=Ra;r.offset=Jb;r.size=Eb;r.state=Na;r.stride=Fd;r.type=Ya;r.w=Kb;r.x=Lb;r.y=lb;r.z=Oa;P.buffer=Yb;P.divisor=Qa;P.normalized=vb;P.offset=wb;P.size=Ta;P.state=nb;P.stride=gc;P.type=Ec;P.w=vc;P.x=ab;P.y=jc;P.z=Tc;ld&&I.destroyStream(Ab);d.buffer=Yc;d.divisor=vd;d.normalized=oc;d.offset=wc;d.size=hc;d.state=cb;d.stride=sc;d.type=Tb;d.w=Wb;d.x=dc;d.y=ic;d.z=yc;n.buffer=Ac;n.divisor=
cd;n.normalized=Qc;n.offset=Rc;n.size=Uc;n.state=Zc;n.stride=md;n.type=dd;n.w=$c;n.x=kc;n.y=bc;n.z=ad;ed&&I.destroyStream(zc);e.buffer=Gd;e.divisor=od;e.normalized=Vc;e.offset=wd;e.size=td;e.state=kd;e.stride=xd;e.type=Bd;e.w=Dd;e.x=ge;e.y=je;e.z=xe;he&&I.destroyStream(ee);E.buffer=me;E.divisor=ze;E.normalized=Qe;E.offset=re;E.size=Re;E.state=Se;E.stride=Me;E.type=ue;E.w=Ee;E.x=Ge;E.y=He;E.z=Ie;pa.vert=Fe;pa.frag=Kd;S.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(k,
F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia){var O,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,mb,lc,ga,H,sa,Ha,qa,Aa,Da,ka,Z;O=k.attributes;Y=k.buffer;ea=k.context;R=k.current;Q=k.draw;z=k.elements;m=k.extensions;V=k.framebuffer;N=k.gl;va=k.isBufferArgs;oa=k.next;l=k.shader;I=k.uniforms;ca=k.vao;S=oa.blend_color;ma=R.blend_color;ra=oa.blend_equation;Ca=R.blend_equation;ya=oa.blend_func;fa=R.blend_func;Ba=oa.colorMask;la=R.colorMask;
pa=oa.depth_range;za=R.depth_range;Ma=oa.polygonOffset_offset;X=R.polygonOffset_offset;$b=oa.sample_coverage;Ua=R.sample_coverage;w=oa.scissor_box;v=R.scissor_box;M=oa.stencil_func;wa=R.stencil_func;Ea=oa.stencil_opBack;mb=R.stencil_opBack;lc=oa.stencil_opFront;ga=R.stencil_opFront;H=oa.viewport;sa=R.viewport;Ha={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};qa={divisor:1,offset:8,stride:8};Aa={divisor:1,offset:8,stride:8};Da={divisor:1,offset:16,stride:8};
ka={divisor:1,offset:16,stride:8};Z={divisor:1,offset:0,stride:4};return{batch:function(b,l){var w,g,H,k,I,x;w=V.next;w!==V.cur&&(w?N.bindFramebuffer(36160,w.framebuffer):N.bindFramebuffer(36160,null),V.cur=w);if(R.dirty){var S,L,u,t,y,J,G,B,ya,K,ra,aa,ba,ha,$d,Ye,Le,Pe,Ed,Be,se,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc;S=oa.dither;S!==R.dither&&(S?N.enable(3024):N.disable(3024),R.dither=S);L=oa.depth_func;L!==R.depth_func&&(N.depthFunc(L),R.depth_func=L);u=pa[0];t=pa[1];if(u!==za[0]||t!==za[1])N.depthRange(u,
t),za[0]=u,za[1]=t;y=oa.depth_mask;y!==R.depth_mask&&(N.depthMask(y),R.depth_mask=y);J=Ba[0];G=Ba[1];B=Ba[2];ya=Ba[3];if(J!==la[0]||G!==la[1]||B!==la[2]||ya!==la[3])N.colorMask(J,G,B,ya),la[0]=J,la[1]=G,la[2]=B,la[3]=ya;K=oa.cull_enable;K!==R.cull_enable&&(K?N.enable(2884):N.disable(2884),R.cull_enable=K);ra=oa.cull_face;ra!==R.cull_face&&(N.cullFace(ra),R.cull_face=ra);aa=oa.frontFace;aa!==R.frontFace&&(N.frontFace(aa),R.frontFace=aa);ba=oa.lineWidth;ba!==R.lineWidth&&(N.lineWidth(ba),R.lineWidth=
ba);ha=oa.polygonOffset_enable;ha!==R.polygonOffset_enable&&(ha?N.enable(32823):N.disable(32823),R.polygonOffset_enable=ha);$d=Ma[0];Ye=Ma[1];if($d!==X[0]||Ye!==X[1])N.polygonOffset($d,Ye),X[0]=$d,X[1]=Ye;Le=oa.sample_alpha;Le!==R.sample_alpha&&(Le?N.enable(32926):N.disable(32926),R.sample_alpha=Le);Pe=oa.sample_enable;Pe!==R.sample_enable&&(Pe?N.enable(32928):N.disable(32928),R.sample_enable=Pe);Ed=$b[0];Be=$b[1];if(Ed!==Ua[0]||Be!==Ua[1])N.sampleCoverage(Ed,Be),Ua[0]=Ed,Ua[1]=Be;se=oa.stencil_mask;
se!==R.stencil_mask&&(N.stencilMask(se),R.stencil_mask=se);Xd=M[0];Nd=M[1];Ad=M[2];if(Xd!==wa[0]||Nd!==wa[1]||Ad!==wa[2])N.stencilFunc(Xd,Nd,Ad),wa[0]=Xd,wa[1]=Nd,wa[2]=Ad;nd=lc[0];bd=lc[1];sd=lc[2];Lc=lc[3];if(nd!==ga[0]||bd!==ga[1]||sd!==ga[2]||Lc!==ga[3])N.stencilOpSeparate(nd,bd,sd,Lc),ga[0]=nd,ga[1]=bd,ga[2]=sd,ga[3]=Lc;pd=Ea[0];Fc=Ea[1];fd=Ea[2];Oc=Ea[3];if(pd!==mb[0]||Fc!==mb[1]||fd!==mb[2]||Oc!==mb[3])N.stencilOpSeparate(pd,Fc,fd,Oc),mb[0]=pd,mb[1]=Fc,mb[2]=fd,mb[3]=Oc}N.blendColor(0,0,0,
0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;N.enable(3042);R.blend_enable=!0;N.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;N.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;N.enable(3089);R.scissor_enable=!0;N.disable(2960);R.stencil_enable=!1;if(g=R.profile)H=performance.now(),F.count+=l;N.useProgram(T.program);k=m.angle_instanced_arrays;var Ic,Bb,Fb,uc,yb;ca.setVAO(null);Ic=ta.location;Bb=O[Ic];Bb.buffer||N.enableVertexAttribArray(Ic);if(5126!==Bb.type||1!==Bb.size||
Bb.buffer!==f||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)N.bindBuffer(34962,f.buffer),N.vertexAttribPointer(Ic,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=f,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(k.vertexAttribDivisorANGLE(Ic,0),Bb.divisor=0);Fb=D.location;uc=O[Fb];uc.buffer||N.enableVertexAttribArray(Fb);if(5126!==uc.type||1!==uc.size||uc.buffer!==h||!1!==uc.normalized||4!==uc.offset||8!==uc.stride)N.bindBuffer(34962,h.buffer),N.vertexAttribPointer(Fb,1,5126,!1,8,4),
uc.type=5126,uc.size=1,uc.buffer=h,uc.normalized=!1,uc.offset=4,uc.stride=8;0!==uc.divisor&&(k.vertexAttribDivisorANGLE(Fb,0),uc.divisor=0);(yb=Q.elements)?N.bindBuffer(34963,yb.buffer.buffer):ca.currentVAO&&(yb=z.getElements(ca.currentVAO.elements))&&N.bindBuffer(34963,yb.buffer.buffer);for(I=0;I<l;++I){x=b[I];var xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,
Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,xa,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd;xc=x.viewport;Cb=xc.x|0;Jc=xc.y|0;mc="width"in xc?xc.width|0:ea.framebufferWidth-Cb;Gc="height"in xc?xc.height|0:ea.framebufferHeight-Jc;gd=ea.viewportWidth;ea.viewportWidth=mc;Xc=ea.viewportHeight;ea.viewportHeight=Gc;N.viewport(Cb,Jc,mc,Gc);sa[0]=Cb;sa[1]=Jc;sa[2]=mc;sa[3]=Gc;(Cc=r.call(this,
ea,x,I))?N.enable(2929):N.disable(2929);R.depth_enable=Cc;ec=x.viewport;Hc=ec.x|0;pc=ec.y|0;qc="width"in ec?ec.width|0:ea.framebufferWidth-Hc;nc="height"in ec?ec.height|0:ea.framebufferHeight-pc;N.scissor(Hc,pc,qc,nc);v[0]=Hc;v[1]=pc;v[2]=qc;v[3]=nc;qa.buffer=x.positionBuffer;fc=!1;eb=null;Sc=0;zb=!1;Mb=bb=0;$a=1;ob=0;Va=5126;rc=Ib=Hb=Pc=0;va(qa)?(fc=!0,eb=Y.createStream(34962,qa),Va=eb.dtype):(eb=Y.getBuffer(qa))?Va=eb.dtype:"constant"in qa?($a=2,"number"===typeof qa.constant?(Hb=qa.constant,Ib=
rc=Pc=0):(Hb=0<qa.constant.length?qa.constant[0]:0,Ib=1<qa.constant.length?qa.constant[1]:0,rc=2<qa.constant.length?qa.constant[2]:0,Pc=3<qa.constant.length?qa.constant[3]:0)):(eb=va(qa.buffer)?Y.createStream(34962,qa.buffer):Y.getBuffer(qa.buffer),Va="type"in qa?Ha[qa.type]:eb.dtype,zb=!!qa.normalized,Mb=qa.size|0,bb=qa.offset|0,ob=qa.stride|0,Sc=qa.divisor|0);Nb=ja.location;jb=O[Nb];if(1===$a){jb.buffer||N.enableVertexAttribArray(Nb);Gb=Mb||2;if(jb.type!==Va||jb.size!==Gb||jb.buffer!==eb||jb.normalized!==
zb||jb.offset!==bb||jb.stride!==ob)N.bindBuffer(34962,eb.buffer),N.vertexAttribPointer(Nb,Gb,Va,zb,ob,bb),jb.type=Va,jb.size=Gb,jb.buffer=eb,jb.normalized=zb,jb.offset=bb,jb.stride=ob;jb.divisor!==Sc&&(k.vertexAttribDivisorANGLE(Nb,Sc),jb.divisor=Sc)}else if(jb.buffer&&(N.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==Ib||jb.z!==rc||jb.w!==Pc)N.vertexAttrib4f(Nb,Hb,Ib,rc,Pc),jb.x=Hb,jb.y=Ib,jb.z=rc,jb.w=Pc;Da.buffer=x.positionBuffer;Db=!1;xb=null;hb=0;Xb=!1;rb=Ob=0;Sa=1;Pb=0;pb=5126;
Ia=qb=ib=ac=0;va(Da)?(Db=!0,xb=Y.createStream(34962,Da),pb=xb.dtype):(xb=Y.getBuffer(Da))?pb=xb.dtype:"constant"in Da?(Sa=2,"number"===typeof Da.constant?(ib=Da.constant,qb=Ia=ac=0):(ib=0<Da.constant.length?Da.constant[0]:0,qb=1<Da.constant.length?Da.constant[1]:0,Ia=2<Da.constant.length?Da.constant[2]:0,ac=3<Da.constant.length?Da.constant[3]:0)):(xb=va(Da.buffer)?Y.createStream(34962,Da.buffer):Y.getBuffer(Da.buffer),pb="type"in Da?Ha[Da.type]:xb.dtype,Xb=!!Da.normalized,rb=Da.size|0,Ob=Da.offset|
0,Pb=Da.stride|0,hb=Da.divisor|0);sb=n.location;Ka=O[sb];if(1===Sa){Ka.buffer||N.enableVertexAttribArray(sb);db=rb||2;if(Ka.type!==pb||Ka.size!==db||Ka.buffer!==xb||Ka.normalized!==Xb||Ka.offset!==Ob||Ka.stride!==Pb)N.bindBuffer(34962,xb.buffer),N.vertexAttribPointer(sb,db,pb,Xb,Pb,Ob),Ka.type=pb,Ka.size=db,Ka.buffer=xb,Ka.normalized=Xb,Ka.offset=Ob,Ka.stride=Pb;Ka.divisor!==hb&&(k.vertexAttribDivisorANGLE(sb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(N.disableVertexAttribArray(sb),Ka.buffer=null),Ka.x!==
ib||Ka.y!==qb||Ka.z!==Ia||Ka.w!==ac)N.vertexAttrib4f(sb,ib,qb,Ia,ac),Ka.x=ib,Ka.y=qb,Ka.z=Ia,Ka.w=ac;Aa.buffer=x.positionFractBuffer;fb=!1;La=null;kb=0;Wa=!1;tb=ub=0;Pa=1;Bc=0;Ra=5126;Fd=Na=Eb=Jb=0;va(Aa)?(fb=!0,La=Y.createStream(34962,Aa),Ra=La.dtype):(La=Y.getBuffer(Aa))?Ra=La.dtype:"constant"in Aa?(Pa=2,"number"===typeof Aa.constant?(Eb=Aa.constant,Na=Fd=Jb=0):(Eb=0<Aa.constant.length?Aa.constant[0]:0,Na=1<Aa.constant.length?Aa.constant[1]:0,Fd=2<Aa.constant.length?Aa.constant[2]:0,Jb=3<Aa.constant.length?
Aa.constant[3]:0)):(La=va(Aa.buffer)?Y.createStream(34962,Aa.buffer):Y.getBuffer(Aa.buffer),Ra="type"in Aa?Ha[Aa.type]:La.dtype,Wa=!!Aa.normalized,tb=Aa.size|0,ub=Aa.offset|0,Bc=Aa.stride|0,kb=Aa.divisor|0);Ya=d.location;Kb=O[Ya];if(1===Pa){Kb.buffer||N.enableVertexAttribArray(Ya);Lb=tb||2;if(Kb.type!==Ra||Kb.size!==Lb||Kb.buffer!==La||Kb.normalized!==Wa||Kb.offset!==ub||Kb.stride!==Bc)N.bindBuffer(34962,La.buffer),N.vertexAttribPointer(Ya,Lb,Ra,Wa,Bc,ub),Kb.type=Ra,Kb.size=Lb,Kb.buffer=La,Kb.normalized=
Wa,Kb.offset=ub,Kb.stride=Bc;Kb.divisor!==kb&&(k.vertexAttribDivisorANGLE(Ya,kb),Kb.divisor=kb)}else if(Kb.buffer&&(N.disableVertexAttribArray(Ya),Kb.buffer=null),Kb.x!==Eb||Kb.y!==Na||Kb.z!==Fd||Kb.w!==Jb)N.vertexAttrib4f(Ya,Eb,Na,Fd,Jb),Kb.x=Eb,Kb.y=Na,Kb.z=Fd,Kb.w=Jb;ka.buffer=x.positionFractBuffer;lb=!1;Oa=null;Yb=0;Qa=!1;wb=vb=0;Ta=1;nb=0;gc=5126;jc=ab=vc=Ec=0;va(ka)?(lb=!0,Oa=Y.createStream(34962,ka),gc=Oa.dtype):(Oa=Y.getBuffer(ka))?gc=Oa.dtype:"constant"in ka?(Ta=2,"number"===typeof ka.constant?
(vc=ka.constant,ab=jc=Ec=0):(vc=0<ka.constant.length?ka.constant[0]:0,ab=1<ka.constant.length?ka.constant[1]:0,jc=2<ka.constant.length?ka.constant[2]:0,Ec=3<ka.constant.length?ka.constant[3]:0)):(Oa=va(ka.buffer)?Y.createStream(34962,ka.buffer):Y.getBuffer(ka.buffer),gc="type"in ka?Ha[ka.type]:Oa.dtype,Qa=!!ka.normalized,wb=ka.size|0,vb=ka.offset|0,nb=ka.stride|0,Yb=ka.divisor|0);Tc=U.location;Xa=O[Tc];if(1===Ta){Xa.buffer||N.enableVertexAttribArray(Tc);ld=wb||2;if(Xa.type!==gc||Xa.size!==ld||Xa.buffer!==
Oa||Xa.normalized!==Qa||Xa.offset!==vb||Xa.stride!==nb)N.bindBuffer(34962,Oa.buffer),N.vertexAttribPointer(Tc,ld,gc,Qa,nb,vb),Xa.type=gc,Xa.size=ld,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=vb,Xa.stride=nb;Xa.divisor!==Yb&&(k.vertexAttribDivisorANGLE(Tc,Yb),Xa.divisor=Yb)}else if(Xa.buffer&&(N.disableVertexAttribArray(Tc),Xa.buffer=null),Xa.x!==vc||Xa.y!==ab||Xa.z!==jc||Xa.w!==Ec)N.vertexAttrib4f(Tc,vc,ab,jc,Ec),Xa.x=vc,Xa.y=ab,Xa.z=jc,Xa.w=Ec;Z.buffer=x.colorBuffer;Ab=!1;Za=null;Ub=0;tc=!1;Qb=Vb=0;
Kc=1;Rb=0;qd=5126;Yc=Mc=oe=Dc=0;va(Z)?(Ab=!0,Za=Y.createStream(34962,Z),qd=Za.dtype):(Za=Y.getBuffer(Z))?qd=Za.dtype:"constant"in Z?(Kc=2,"number"===typeof Z.constant?(oe=Z.constant,Mc=Yc=Dc=0):(oe=0<Z.constant.length?Z.constant[0]:0,Mc=1<Z.constant.length?Z.constant[1]:0,Yc=2<Z.constant.length?Z.constant[2]:0,Dc=3<Z.constant.length?Z.constant[3]:0)):(Za=va(Z.buffer)?Y.createStream(34962,Z.buffer):Y.getBuffer(Z.buffer),qd="type"in Z?Ha[Z.type]:Za.dtype,tc=!!Z.normalized,Qb=Z.size|0,Vb=Z.offset|0,
Rb=Z.stride|0,Ub=Z.divisor|0);vd=e.location;oc=O[vd];if(1===Kc){oc.buffer||N.enableVertexAttribArray(vd);wc=Qb||4;if(oc.type!==qd||oc.size!==wc||oc.buffer!==Za||oc.normalized!==tc||oc.offset!==Vb||oc.stride!==Rb)N.bindBuffer(34962,Za.buffer),N.vertexAttribPointer(vd,wc,qd,tc,Rb,Vb),oc.type=qd,oc.size=wc,oc.buffer=Za,oc.normalized=tc,oc.offset=Vb,oc.stride=Rb;oc.divisor!==Ub&&(k.vertexAttribDivisorANGLE(vd,Ub),oc.divisor=Ub)}else if(oc.buffer&&(N.disableVertexAttribArray(vd),oc.buffer=null),oc.x!==
oe||oc.y!==Mc||oc.z!==Yc||oc.w!==Dc)N.vertexAttrib4f(vd,oe,Mc,Yc,Dc),oc.x=oe,oc.y=Mc,oc.z=Yc,oc.w=Dc;hc=x.scale;cb=hc[0];Tb=hc[1];I&&sc===cb&&Wb===Tb||(sc=cb,Wb=Tb,N.uniform2f(c.location,cb,Tb));dc=x.scaleFract;ic=dc[0];Ac=dc[1];I&&yc===ic&&cd===Ac||(yc=ic,cd=Ac,N.uniform2f(q.location,ic,Ac));Qc=x.translate;Rc=Qc[0];Zc=Qc[1];I&&Uc===Rc&&md===Zc||(Uc=Rc,md=Zc,N.uniform2f(na.location,Rc,Zc));dd=x.translateFract;$c=dd[0];bc=dd[1];I&&kc===$c&&ad===bc||(kc=$c,ad=bc,N.uniform2f(A.location,$c,bc));Wc=x.thickness;
I&&ed===Wc||(ed=Wc,N.uniform1f(a.location,Wc));zc=x.depth;I&&id===zc||(id=zc,N.uniform1f(p.location,zc));rd=P.call(this,ea,x,I);ve=rd[0];jd=rd[1];Od=rd[2];ie=rd[3];I&&we===ve&&xa===jd&&Vd===Od&&Yd===ie||(we=ve,xa=jd,Vd=Od,Yd=ie,N.uniform4f(ia.location,ve,jd,Od,ie));Id=x.dashLength;I&&Gd===Id||(Gd=Id,N.uniform1f(W.location,Id));od=x.opacity;I&&Vc===od||(Vc=od,N.uniform1f(C.location,od));(wd=x.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);td=wd._texture;N.uniform1i(E.location,td.bind());
kd=x.count;0<kd?yb?k.drawElementsInstancedANGLE(5,4,yb.type,0<<(yb.type-5121>>1),kd):k.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(yb?N.drawElements(5,4,yb.type,0<<(yb.type-5121>>1)):N.drawArrays(5,0,4));ea.viewportWidth=gd;ea.viewportHeight=Xc;fc&&Y.destroyStream(eb);Db&&Y.destroyStream(xb);fb&&Y.destroyStream(La);lb&&Y.destroyStream(Oa);Ab&&Y.destroyStream(Za);td.unbind()}R.dirty=!0;ca.setVAO(null);g&&(F.cpuTime+=performance.now()-H)},draw:function(b){var l,w,H,k,r,x,I,S,u,t,y,G,B,P,ya,K,ra,aa,T,
ba,ha,$d,Ye,Le,Pe,Ed,Be,se,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb;l=V.next;l!==V.cur&&(l?N.bindFramebuffer(36160,l.framebuffer):N.bindFramebuffer(36160,null),V.cur=l);if(R.dirty){var wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb;wb=oa.dither;wb!==
R.dither&&(wb?N.enable(3024):N.disable(3024),R.dither=wb);Ta=oa.depth_func;Ta!==R.depth_func&&(N.depthFunc(Ta),R.depth_func=Ta);nb=pa[0];gc=pa[1];if(nb!==za[0]||gc!==za[1])N.depthRange(nb,gc),za[0]=nb,za[1]=gc;Ec=oa.depth_mask;Ec!==R.depth_mask&&(N.depthMask(Ec),R.depth_mask=Ec);vc=Ba[0];ab=Ba[1];jc=Ba[2];Tc=Ba[3];if(vc!==la[0]||ab!==la[1]||jc!==la[2]||Tc!==la[3])N.colorMask(vc,ab,jc,Tc),la[0]=vc,la[1]=ab,la[2]=jc,la[3]=Tc;Xa=oa.cull_enable;Xa!==R.cull_enable&&(Xa?N.enable(2884):N.disable(2884),R.cull_enable=
Xa);ld=oa.cull_face;ld!==R.cull_face&&(N.cullFace(ld),R.cull_face=ld);Ab=oa.frontFace;Ab!==R.frontFace&&(N.frontFace(Ab),R.frontFace=Ab);Za=oa.lineWidth;Za!==R.lineWidth&&(N.lineWidth(Za),R.lineWidth=Za);Ub=oa.polygonOffset_enable;Ub!==R.polygonOffset_enable&&(Ub?N.enable(32823):N.disable(32823),R.polygonOffset_enable=Ub);tc=Ma[0];Vb=Ma[1];if(tc!==X[0]||Vb!==X[1])N.polygonOffset(tc,Vb),X[0]=tc,X[1]=Vb;Qb=oa.sample_alpha;Qb!==R.sample_alpha&&(Qb?N.enable(32926):N.disable(32926),R.sample_alpha=Qb);
Kc=oa.sample_enable;Kc!==R.sample_enable&&(Kc?N.enable(32928):N.disable(32928),R.sample_enable=Kc);Rb=$b[0];qd=$b[1];if(Rb!==Ua[0]||qd!==Ua[1])N.sampleCoverage(Rb,qd),Ua[0]=Rb,Ua[1]=qd;Dc=oa.stencil_mask;Dc!==R.stencil_mask&&(N.stencilMask(Dc),R.stencil_mask=Dc);oe=M[0];Mc=M[1];Yc=M[2];if(oe!==wa[0]||Mc!==wa[1]||Yc!==wa[2])N.stencilFunc(oe,Mc,Yc),wa[0]=oe,wa[1]=Mc,wa[2]=Yc;vd=lc[0];oc=lc[1];wc=lc[2];hc=lc[3];if(vd!==ga[0]||oc!==ga[1]||wc!==ga[2]||hc!==ga[3])N.stencilOpSeparate(vd,oc,wc,hc),ga[0]=
vd,ga[1]=oc,ga[2]=wc,ga[3]=hc;cb=Ea[0];sc=Ea[1];Tb=Ea[2];Wb=Ea[3];if(cb!==mb[0]||sc!==mb[1]||Tb!==mb[2]||Wb!==mb[3])N.stencilOpSeparate(cb,sc,Tb,Wb),mb[0]=cb,mb[1]=sc,mb[2]=Tb,mb[3]=Wb}w=b.viewport;H=w.x|0;k=w.y|0;r="width"in w?w.width|0:ea.framebufferWidth-H;x="height"in w?w.height|0:ea.framebufferHeight-k;I=ea.viewportWidth;ea.viewportWidth=r;S=ea.viewportHeight;ea.viewportHeight=x;N.viewport(H,k,r,x);sa[0]=H;sa[1]=k;sa[2]=r;sa[3]=x;N.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;N.enable(3042);
R.blend_enable=!0;N.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;N.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(u=J.call(this,ea,b,0))?N.enable(2929):N.disable(2929);R.depth_enable=u;t=b.viewport;y=t.x|0;G=t.y|0;B="width"in t?t.width|0:ea.framebufferWidth-y;P="height"in t?t.height|0:ea.framebufferHeight-G;N.scissor(y,G,B,P);v[0]=y;v[1]=G;v[2]=B;v[3]=P;N.enable(3089);R.scissor_enable=!0;N.disable(2960);R.stencil_enable=!1;if(ya=R.profile)K=performance.now(),
F.count++;N.useProgram(L.program);ra=m.angle_instanced_arrays;ca.setVAO(null);qa.buffer=b.positionBuffer;aa=!1;T=null;ba=0;ha=!1;Ye=$d=0;Le=1;Pe=0;Ed=5126;Nd=Xd=se=Be=0;va(qa)?(aa=!0,T=Y.createStream(34962,qa),Ed=T.dtype):(T=Y.getBuffer(qa))?Ed=T.dtype:"constant"in qa?(Le=2,"number"===typeof qa.constant?(se=qa.constant,Xd=Nd=Be=0):(se=0<qa.constant.length?qa.constant[0]:0,Xd=1<qa.constant.length?qa.constant[1]:0,Nd=2<qa.constant.length?qa.constant[2]:0,Be=3<qa.constant.length?qa.constant[3]:0)):(T=
va(qa.buffer)?Y.createStream(34962,qa.buffer):Y.getBuffer(qa.buffer),Ed="type"in qa?Ha[qa.type]:T.dtype,ha=!!qa.normalized,Ye=qa.size|0,$d=qa.offset|0,Pe=qa.stride|0,ba=qa.divisor|0);Ad=ja.location;nd=O[Ad];if(1===Le){nd.buffer||N.enableVertexAttribArray(Ad);bd=Ye||2;if(nd.type!==Ed||nd.size!==bd||nd.buffer!==T||nd.normalized!==ha||nd.offset!==$d||nd.stride!==Pe)N.bindBuffer(34962,T.buffer),N.vertexAttribPointer(Ad,bd,Ed,ha,Pe,$d),nd.type=Ed,nd.size=bd,nd.buffer=T,nd.normalized=ha,nd.offset=$d,nd.stride=
Pe;nd.divisor!==ba&&(ra.vertexAttribDivisorANGLE(Ad,ba),nd.divisor=ba)}else if(nd.buffer&&(N.disableVertexAttribArray(Ad),nd.buffer=null),nd.x!==se||nd.y!==Xd||nd.z!==Nd||nd.w!==Be)N.vertexAttrib4f(Ad,se,Xd,Nd,Be),nd.x=se,nd.y=Xd,nd.z=Nd,nd.w=Be;Da.buffer=b.positionBuffer;sd=!1;Lc=null;pd=0;Fc=!1;Oc=fd=0;Ic=1;Bb=0;Fb=5126;Cb=xc=yb=uc=0;va(Da)?(sd=!0,Lc=Y.createStream(34962,Da),Fb=Lc.dtype):(Lc=Y.getBuffer(Da))?Fb=Lc.dtype:"constant"in Da?(Ic=2,"number"===typeof Da.constant?(yb=Da.constant,xc=Cb=uc=
0):(yb=0<Da.constant.length?Da.constant[0]:0,xc=1<Da.constant.length?Da.constant[1]:0,Cb=2<Da.constant.length?Da.constant[2]:0,uc=3<Da.constant.length?Da.constant[3]:0)):(Lc=va(Da.buffer)?Y.createStream(34962,Da.buffer):Y.getBuffer(Da.buffer),Fb="type"in Da?Ha[Da.type]:Lc.dtype,Fc=!!Da.normalized,Oc=Da.size|0,fd=Da.offset|0,Bb=Da.stride|0,pd=Da.divisor|0);Jc=n.location;mc=O[Jc];if(1===Ic){mc.buffer||N.enableVertexAttribArray(Jc);Gc=Oc||2;if(mc.type!==Fb||mc.size!==Gc||mc.buffer!==Lc||mc.normalized!==
Fc||mc.offset!==fd||mc.stride!==Bb)N.bindBuffer(34962,Lc.buffer),N.vertexAttribPointer(Jc,Gc,Fb,Fc,Bb,fd),mc.type=Fb,mc.size=Gc,mc.buffer=Lc,mc.normalized=Fc,mc.offset=fd,mc.stride=Bb;mc.divisor!==pd&&(ra.vertexAttribDivisorANGLE(Jc,pd),mc.divisor=pd)}else if(mc.buffer&&(N.disableVertexAttribArray(Jc),mc.buffer=null),mc.x!==yb||mc.y!==xc||mc.z!==Cb||mc.w!==uc)N.vertexAttrib4f(Jc,yb,xc,Cb,uc),mc.x=yb,mc.y=xc,mc.z=Cb,mc.w=uc;Aa.buffer=b.positionFractBuffer;gd=!1;Xc=null;Cc=0;ec=!1;pc=Hc=0;qc=1;nc=0;
fc=5126;bb=zb=Sc=eb=0;va(Aa)?(gd=!0,Xc=Y.createStream(34962,Aa),fc=Xc.dtype):(Xc=Y.getBuffer(Aa))?fc=Xc.dtype:"constant"in Aa?(qc=2,"number"===typeof Aa.constant?(Sc=Aa.constant,zb=bb=eb=0):(Sc=0<Aa.constant.length?Aa.constant[0]:0,zb=1<Aa.constant.length?Aa.constant[1]:0,bb=2<Aa.constant.length?Aa.constant[2]:0,eb=3<Aa.constant.length?Aa.constant[3]:0)):(Xc=va(Aa.buffer)?Y.createStream(34962,Aa.buffer):Y.getBuffer(Aa.buffer),fc="type"in Aa?Ha[Aa.type]:Xc.dtype,ec=!!Aa.normalized,pc=Aa.size|0,Hc=
Aa.offset|0,nc=Aa.stride|0,Cc=Aa.divisor|0);Mb=d.location;$a=O[Mb];if(1===qc){$a.buffer||N.enableVertexAttribArray(Mb);ob=pc||2;if($a.type!==fc||$a.size!==ob||$a.buffer!==Xc||$a.normalized!==ec||$a.offset!==Hc||$a.stride!==nc)N.bindBuffer(34962,Xc.buffer),N.vertexAttribPointer(Mb,ob,fc,ec,nc,Hc),$a.type=fc,$a.size=ob,$a.buffer=Xc,$a.normalized=ec,$a.offset=Hc,$a.stride=nc;$a.divisor!==Cc&&(ra.vertexAttribDivisorANGLE(Mb,Cc),$a.divisor=Cc)}else if($a.buffer&&(N.disableVertexAttribArray(Mb),$a.buffer=
null),$a.x!==Sc||$a.y!==zb||$a.z!==bb||$a.w!==eb)N.vertexAttrib4f(Mb,Sc,zb,bb,eb),$a.x=Sc,$a.y=zb,$a.z=bb,$a.w=eb;ka.buffer=b.positionFractBuffer;Va=!1;Pc=null;Hb=0;Ib=!1;Nb=rc=0;jb=1;Gb=0;Db=5126;Ob=Xb=hb=xb=0;va(ka)?(Va=!0,Pc=Y.createStream(34962,ka),Db=Pc.dtype):(Pc=Y.getBuffer(ka))?Db=Pc.dtype:"constant"in ka?(jb=2,"number"===typeof ka.constant?(hb=ka.constant,Xb=Ob=xb=0):(hb=0<ka.constant.length?ka.constant[0]:0,Xb=1<ka.constant.length?ka.constant[1]:0,Ob=2<ka.constant.length?ka.constant[2]:
0,xb=3<ka.constant.length?ka.constant[3]:0)):(Pc=va(ka.buffer)?Y.createStream(34962,ka.buffer):Y.getBuffer(ka.buffer),Db="type"in ka?Ha[ka.type]:Pc.dtype,Ib=!!ka.normalized,Nb=ka.size|0,rc=ka.offset|0,Gb=ka.stride|0,Hb=ka.divisor|0);rb=U.location;Sa=O[rb];if(1===jb){Sa.buffer||N.enableVertexAttribArray(rb);Pb=Nb||2;if(Sa.type!==Db||Sa.size!==Pb||Sa.buffer!==Pc||Sa.normalized!==Ib||Sa.offset!==rc||Sa.stride!==Gb)N.bindBuffer(34962,Pc.buffer),N.vertexAttribPointer(rb,Pb,Db,Ib,Gb,rc),Sa.type=Db,Sa.size=
Pb,Sa.buffer=Pc,Sa.normalized=Ib,Sa.offset=rc,Sa.stride=Gb;Sa.divisor!==Hb&&(ra.vertexAttribDivisorANGLE(rb,Hb),Sa.divisor=Hb)}else if(Sa.buffer&&(N.disableVertexAttribArray(rb),Sa.buffer=null),Sa.x!==hb||Sa.y!==Xb||Sa.z!==Ob||Sa.w!==xb)N.vertexAttrib4f(rb,hb,Xb,Ob,xb),Sa.x=hb,Sa.y=Xb,Sa.z=Ob,Sa.w=xb;Z.buffer=b.colorBuffer;pb=!1;ac=null;ib=0;qb=!1;sb=Ia=0;Ka=1;db=0;fb=5126;ub=Wa=kb=La=0;va(Z)?(pb=!0,ac=Y.createStream(34962,Z),fb=ac.dtype):(ac=Y.getBuffer(Z))?fb=ac.dtype:"constant"in Z?(Ka=2,"number"===
typeof Z.constant?(kb=Z.constant,Wa=ub=La=0):(kb=0<Z.constant.length?Z.constant[0]:0,Wa=1<Z.constant.length?Z.constant[1]:0,ub=2<Z.constant.length?Z.constant[2]:0,La=3<Z.constant.length?Z.constant[3]:0)):(ac=va(Z.buffer)?Y.createStream(34962,Z.buffer):Y.getBuffer(Z.buffer),fb="type"in Z?Ha[Z.type]:ac.dtype,qb=!!Z.normalized,sb=Z.size|0,Ia=Z.offset|0,db=Z.stride|0,ib=Z.divisor|0);tb=e.location;Pa=O[tb];if(1===Ka){Pa.buffer||N.enableVertexAttribArray(tb);Bc=sb||4;if(Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==
ac||Pa.normalized!==qb||Pa.offset!==Ia||Pa.stride!==db)N.bindBuffer(34962,ac.buffer),N.vertexAttribPointer(tb,Bc,fb,qb,db,Ia),Pa.type=fb,Pa.size=Bc,Pa.buffer=ac,Pa.normalized=qb,Pa.offset=Ia,Pa.stride=db;Pa.divisor!==ib&&(ra.vertexAttribDivisorANGLE(tb,ib),Pa.divisor=ib)}else if(Pa.buffer&&(N.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==ub||Pa.w!==La)N.vertexAttrib4f(tb,kb,Wa,ub,La),Pa.x=kb,Pa.y=Wa,Pa.z=ub,Pa.w=La;Ra=ta.location;Jb=O[Ra];Jb.buffer||N.enableVertexAttribArray(Ra);
if(5126!==Jb.type||1!==Jb.size||Jb.buffer!==f||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)N.bindBuffer(34962,f.buffer),N.vertexAttribPointer(Ra,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=f,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(ra.vertexAttribDivisorANGLE(Ra,0),Jb.divisor=0);Eb=D.location;Na=O[Eb];Na.buffer||N.enableVertexAttribArray(Eb);if(5126!==Na.type||1!==Na.size||Na.buffer!==h||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)N.bindBuffer(34962,h.buffer),N.vertexAttribPointer(Eb,
1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=h,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(ra.vertexAttribDivisorANGLE(Eb,0),Na.divisor=0);Fd=b.scale;N.uniform2f(c.location,Fd[0],Fd[1]);Ya=b.scaleFract;N.uniform2f(q.location,Ya[0],Ya[1]);Kb=b.translate;N.uniform2f(na.location,Kb[0],Kb[1]);Lb=b.translateFract;N.uniform2f(A.location,Lb[0],Lb[1]);N.uniform1f(a.location,b.thickness);N.uniform1f(p.location,b.depth);lb=g.call(this,ea,b,0);N.uniform4f(ia.location,lb[0],lb[1],lb[2],lb[3]);
N.uniform1f(W.location,b.dashLength);N.uniform1f(C.location,b.opacity);(Oa=b.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);Yb=Oa._texture;N.uniform1i(E.location,Yb.bind());(Qa=Q.elements)?N.bindBuffer(34963,Qa.buffer.buffer):ca.currentVAO&&(Qa=z.getElements(ca.currentVAO.elements))&&N.bindBuffer(34963,Qa.buffer.buffer);vb=b.count;0<vb?Qa?ra.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),vb):ra.drawArraysInstancedANGLE(5,0,4,vb):0>vb&&(Qa?N.drawElements(5,4,Qa.type,0<<(Qa.type-
5121>>1)):N.drawArrays(5,0,4));R.dirty=!0;ca.setVAO(null);ea.viewportWidth=I;ea.viewportHeight=S;ya&&(F.cpuTime+=performance.now()-K);aa&&Y.destroyStream(T);sd&&Y.destroyStream(Lc);gd&&Y.destroyStream(Xc);Va&&Y.destroyStream(Pc);pb&&Y.destroyStream(ac);Yb.unbind()},scope:function(a,c,d){var e,q,g,m,v,X,k,M,n,p,r,A,sa,Ma,E,$b,z,fa,ga,L,D,N,C,wa,J,V,ca,P,T,U,la,Ua,W,za,pa,Ea,Ba,ja,lc,ma,O,ta,na,ia,Ca,mb,cc,ha,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,
Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,xa,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne;e=a.viewport;q=e.x|0;g=e.y|0;m="width"in e?e.width|0:ea.framebufferWidth-
q;v="height"in e?e.height|0:ea.framebufferHeight-g;X=ea.viewportWidth;ea.viewportWidth=m;k=ea.viewportHeight;ea.viewportHeight=v;M=H[0];H[0]=q;n=H[1];H[1]=g;p=H[2];H[2]=m;r=H[3];H[3]=v;A=S[0];S[0]=0;sa=S[1];S[1]=0;Ma=S[2];S[2]=0;E=S[3];S[3]=0;$b=oa.blend_enable;oa.blend_enable=!0;z=ra[0];ra[0]=32774;fa=ra[1];ra[1]=32774;ga=ya[0];ya[0]=770;L=ya[1];ya[1]=771;D=ya[2];ya[2]=773;N=ya[3];ya[3]=1;C=b.call(this,ea,a,d);wa=oa.depth_enable;oa.depth_enable=C;J=a.viewport;V=J.x|0;ca=J.y|0;P="width"in J?J.width|
0:ea.framebufferWidth-V;T="height"in J?J.height|0:ea.framebufferHeight-ca;U=w[0];w[0]=V;la=w[1];w[1]=ca;Ua=w[2];w[2]=P;W=w[3];w[3]=T;za=oa.scissor_enable;oa.scissor_enable=!0;pa=oa.stencil_enable;oa.stencil_enable=!1;if(Ea=R.profile)Ba=performance.now(),F.count++;ja=Q.offset;Q.offset=0;lc=Q.count;Q.count=4;ma=a.count;O=Q.instances;Q.instances=ma;ta=Q.primitive;Q.primitive=5;na=a.dashLength;ia=I[23];I[23]=na;Ca=a.dashTexture;mb=I[24];I[24]=Ca;cc=a.depth;ha=I[22];I[22]=cc;Xc=a.id;Cc=I[31];I[31]=Xc;
ec=a.miterLimit;Hc=I[32];I[32]=ec;pc=B.call(this,ea,a,d);qc=I[33];I[33]=pc;nc=a.opacity;fc=I[10];I[10]=nc;eb=ea.pixelRatio;Sc=I[34];I[34]=eb;zb=a.scale;bb=I[6];I[6]=zb;Mb=a.scaleFract;$a=I[7];I[7]=Mb;ob=a.thickness;Va=I[21];I[21]=ob;Pc=a.translate;Hb=I[8];I[8]=Pc;Ib=a.translateFract;rc=I[9];I[9]=Ib;Nb=y.call(this,ea,a,d);jb=I[3];I[3]=Nb;qa.buffer=a.positionBuffer;Gb=!1;Db=null;xb=0;hb=!1;Ob=Xb=0;rb=1;Sa=0;Pb=5126;qb=ib=ac=pb=0;va(qa)?(Gb=!0,Db=Y.createStream(34962,qa),Pb=Db.dtype):(Db=Y.getBuffer(qa))?
Pb=Db.dtype:"constant"in qa?(rb=2,"number"===typeof qa.constant?(ac=qa.constant,ib=qb=pb=0):(ac=0<qa.constant.length?qa.constant[0]:0,ib=1<qa.constant.length?qa.constant[1]:0,qb=2<qa.constant.length?qa.constant[2]:0,pb=3<qa.constant.length?qa.constant[3]:0)):(Db=va(qa.buffer)?Y.createStream(34962,qa.buffer):Y.getBuffer(qa.buffer),Pb="type"in qa?Ha[qa.type]:Db.dtype,hb=!!qa.normalized,Ob=qa.size|0,Xb=qa.offset|0,Sa=qa.stride|0,xb=qa.divisor|0);Ia=K.buffer;K.buffer=Db;sb=K.divisor;K.divisor=xb;Ka=K.normalized;
K.normalized=hb;db=K.offset;K.offset=Xb;fb=K.size;K.size=Ob;La=K.state;K.state=rb;kb=K.stride;K.stride=Sa;Wa=K.type;K.type=Pb;ub=K.w;K.w=pb;tb=K.x;K.x=ac;Pa=K.y;K.y=ib;Bc=K.z;K.z=qb;Aa.buffer=a.positionFractBuffer;Ra=!1;Jb=null;Eb=0;Na=!1;Ya=Fd=0;Kb=1;Lb=0;lb=5126;vb=Qa=Yb=Oa=0;va(Aa)?(Ra=!0,Jb=Y.createStream(34962,Aa),lb=Jb.dtype):(Jb=Y.getBuffer(Aa))?lb=Jb.dtype:"constant"in Aa?(Kb=2,"number"===typeof Aa.constant?(Yb=Aa.constant,Qa=vb=Oa=0):(Yb=0<Aa.constant.length?Aa.constant[0]:0,Qa=1<Aa.constant.length?
Aa.constant[1]:0,vb=2<Aa.constant.length?Aa.constant[2]:0,Oa=3<Aa.constant.length?Aa.constant[3]:0)):(Jb=va(Aa.buffer)?Y.createStream(34962,Aa.buffer):Y.getBuffer(Aa.buffer),lb="type"in Aa?Ha[Aa.type]:Jb.dtype,Na=!!Aa.normalized,Ya=Aa.size|0,Fd=Aa.offset|0,Lb=Aa.stride|0,Eb=Aa.divisor|0);wb=aa.buffer;aa.buffer=Jb;Ta=aa.divisor;aa.divisor=Eb;nb=aa.normalized;aa.normalized=Na;gc=aa.offset;aa.offset=Fd;Ec=aa.size;aa.size=Ya;vc=aa.state;aa.state=Kb;ab=aa.stride;aa.stride=Lb;jc=aa.type;aa.type=lb;Tc=aa.w;
aa.w=Oa;Xa=aa.x;aa.x=Yb;ld=aa.y;aa.y=Qa;Ab=aa.z;aa.z=vb;Da.buffer=a.positionBuffer;Za=!1;Ub=null;tc=0;Vb=!1;Kc=Qb=0;Rb=1;qd=0;Dc=5126;vd=Yc=Mc=oe=0;va(Da)?(Za=!0,Ub=Y.createStream(34962,Da),Dc=Ub.dtype):(Ub=Y.getBuffer(Da))?Dc=Ub.dtype:"constant"in Da?(Rb=2,"number"===typeof Da.constant?(Mc=Da.constant,Yc=vd=oe=0):(Mc=0<Da.constant.length?Da.constant[0]:0,Yc=1<Da.constant.length?Da.constant[1]:0,vd=2<Da.constant.length?Da.constant[2]:0,oe=3<Da.constant.length?Da.constant[3]:0)):(Ub=va(Da.buffer)?
Y.createStream(34962,Da.buffer):Y.getBuffer(Da.buffer),Dc="type"in Da?Ha[Da.type]:Ub.dtype,Vb=!!Da.normalized,Kc=Da.size|0,Qb=Da.offset|0,qd=Da.stride|0,tc=Da.divisor|0);oc=t.buffer;t.buffer=Ub;wc=t.divisor;t.divisor=tc;hc=t.normalized;t.normalized=Vb;cb=t.offset;t.offset=Qb;sc=t.size;t.size=Kc;Tb=t.state;t.state=Rb;Wb=t.stride;t.stride=qd;dc=t.type;t.type=Dc;ic=t.w;t.w=oe;yc=t.x;t.x=Mc;Ac=t.y;t.y=Yc;cd=t.z;t.z=vd;ka.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Uc=0;Zc=!1;dd=md=0;$c=1;kc=0;bc=5126;
zc=ed=Wc=ad=0;va(ka)?(Qc=!0,Rc=Y.createStream(34962,ka),bc=Rc.dtype):(Rc=Y.getBuffer(ka))?bc=Rc.dtype:"constant"in ka?($c=2,"number"===typeof ka.constant?(Wc=ka.constant,ed=zc=ad=0):(Wc=0<ka.constant.length?ka.constant[0]:0,ed=1<ka.constant.length?ka.constant[1]:0,zc=2<ka.constant.length?ka.constant[2]:0,ad=3<ka.constant.length?ka.constant[3]:0)):(Rc=va(ka.buffer)?Y.createStream(34962,ka.buffer):Y.getBuffer(ka.buffer),bc="type"in ka?Ha[ka.type]:Rc.dtype,Zc=!!ka.normalized,dd=ka.size|0,md=ka.offset|
0,kc=ka.stride|0,Uc=ka.divisor|0);id=u.buffer;u.buffer=Rc;rd=u.divisor;u.divisor=Uc;ve=u.normalized;u.normalized=Zc;we=u.offset;u.offset=md;jd=u.size;u.size=dd;xa=u.state;u.state=$c;Od=u.stride;u.stride=kc;Vd=u.type;u.type=bc;ie=u.w;u.w=ad;Yd=u.x;u.x=Wc;Id=u.y;u.y=ed;Gd=u.z;u.z=zc;Z.buffer=a.colorBuffer;od=!1;Vc=null;wd=0;td=!1;xd=kd=0;Bd=1;Dd=0;ge=5126;he=ke=xe=je=0;va(Z)?(od=!0,Vc=Y.createStream(34962,Z),ge=Vc.dtype):(Vc=Y.getBuffer(Z))?ge=Vc.dtype:"constant"in Z?(Bd=2,"number"===typeof Z.constant?
(xe=Z.constant,ke=he=je=0):(xe=0<Z.constant.length?Z.constant[0]:0,ke=1<Z.constant.length?Z.constant[1]:0,he=2<Z.constant.length?Z.constant[2]:0,je=3<Z.constant.length?Z.constant[3]:0)):(Vc=va(Z.buffer)?Y.createStream(34962,Z.buffer):Y.getBuffer(Z.buffer),ge="type"in Z?Ha[Z.type]:Vc.dtype,td=!!Z.normalized,xd=Z.size|0,kd=Z.offset|0,Dd=Z.stride|0,wd=Z.divisor|0);ee=G.buffer;G.buffer=Vc;ye=G.divisor;G.divisor=wd;be=G.normalized;G.normalized=td;le=G.offset;G.offset=kd;Nc=G.size;G.size=xd;hd=G.state;
G.state=Bd;te=G.stride;G.stride=Dd;pe=G.type;G.type=ge;Jd=G.w;G.w=je;Pd=G.x;G.x=xe;Qd=G.y;G.y=ke;Rd=G.z;G.z=he;me=ba.buffer;ba.buffer=f;ze=ba.divisor;ba.divisor=0;Qe=ba.normalized;ba.normalized=!1;re=ba.offset;ba.offset=0;Re=ba.size;ba.size=0;Se=ba.state;ba.state=1;Me=ba.stride;ba.stride=8;ue=ba.type;ba.type=5126;Ee=ba.w;ba.w=0;Ge=ba.x;ba.x=0;He=ba.y;ba.y=0;Ie=ba.z;ba.z=0;Fe=x.buffer;x.buffer=h;Kd=x.divisor;x.divisor=0;Wd=x.normalized;x.normalized=!1;ae=x.offset;x.offset=4;ce=x.size;x.size=0;Je=x.state;
x.state=1;Hd=x.stride;x.stride=8;Sd=x.type;x.type=5126;Ce=x.w;x.w=0;Ke=x.x;x.x=0;af=x.y;x.y=0;$e=x.z;x.z=0;Te=l.vert;l.vert=20;Ne=l.frag;l.frag=19;R.dirty=!0;c(ea,a,d);ea.viewportWidth=X;ea.viewportHeight=k;H[0]=M;H[1]=n;H[2]=p;H[3]=r;S[0]=A;S[1]=sa;S[2]=Ma;S[3]=E;oa.blend_enable=$b;ra[0]=z;ra[1]=fa;ya[0]=ga;ya[1]=L;ya[2]=D;ya[3]=N;oa.depth_enable=wa;w[0]=U;w[1]=la;w[2]=Ua;w[3]=W;oa.scissor_enable=za;oa.stencil_enable=pa;Ea&&(F.cpuTime+=performance.now()-Ba);Q.offset=ja;Q.count=lc;Q.instances=O;Q.primitive=
ta;I[23]=ia;I[24]=mb;I[22]=ha;I[31]=Cc;I[32]=Hc;I[33]=qc;I[10]=fc;I[34]=Sc;I[6]=bb;I[7]=$a;I[21]=Va;I[8]=Hb;I[9]=rc;I[3]=jb;Gb&&Y.destroyStream(Db);K.buffer=Ia;K.divisor=sb;K.normalized=Ka;K.offset=db;K.size=fb;K.state=La;K.stride=kb;K.type=Wa;K.w=ub;K.x=tb;K.y=Pa;K.z=Bc;Ra&&Y.destroyStream(Jb);aa.buffer=wb;aa.divisor=Ta;aa.normalized=nb;aa.offset=gc;aa.size=Ec;aa.state=vc;aa.stride=ab;aa.type=jc;aa.w=Tc;aa.x=Xa;aa.y=ld;aa.z=Ab;Za&&Y.destroyStream(Ub);t.buffer=oc;t.divisor=wc;t.normalized=hc;t.offset=
cb;t.size=sc;t.state=Tb;t.stride=Wb;t.type=dc;t.w=ic;t.x=yc;t.y=Ac;t.z=cd;Qc&&Y.destroyStream(Rc);u.buffer=id;u.divisor=rd;u.normalized=ve;u.offset=we;u.size=jd;u.state=xa;u.stride=Od;u.type=Vd;u.w=ie;u.x=Yd;u.y=Id;u.z=Gd;od&&Y.destroyStream(Vc);G.buffer=ee;G.divisor=ye;G.normalized=be;G.offset=le;G.size=Nc;G.state=hd;G.stride=te;G.type=pe;G.w=Jd;G.x=Pd;G.y=Qd;G.z=Rd;ba.buffer=me;ba.divisor=ze;ba.normalized=Qe;ba.offset=re;ba.size=Re;ba.state=Se;ba.stride=Me;ba.type=ue;ba.w=Ee;ba.x=Ge;ba.y=He;ba.z=
Ie;x.buffer=Fe;x.divisor=Kd;x.normalized=Wd;x.offset=ae;x.size=ce;x.state=Je;x.stride=Hd;x.type=Sd;x.w=Ce;x.x=Ke;x.y=af;x.z=$e;l.vert=Te;l.frag=Ne;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,O,D,C,c,q,a,na,A,ia,cc,Y,ea,R){var Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,
mb,lc,ga,H,sa,Ha,qa,Aa,Da,ka,Z,ua,Ja,Fa,gb,da;Q=k.attributes;z=k.buffer;m=k.context;V=k.current;N=k.draw;va=k.elements;oa=k.extensions;l=k.framebuffer;I=k.gl;ca=k.isBufferArgs;S=k.next;ma=k.shader;ra=k.uniforms;Ca=k.vao;ya=S.blend_color;fa=V.blend_color;Ba=S.blend_equation;la=V.blend_equation;pa=S.blend_func;za=V.blend_func;Ma=S.colorMask;X=V.colorMask;$b=S.depth_range;Ua=V.depth_range;w=S.polygonOffset_offset;v=V.polygonOffset_offset;M=S.sample_coverage;wa=V.sample_coverage;Ea=S.scissor_box;mb=V.scissor_box;
lc=S.stencil_func;ga=V.stencil_func;H=S.stencil_opBack;sa=V.stencil_opBack;Ha=S.stencil_opFront;qa=V.stencil_opFront;Aa=S.viewport;Da=V.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Z={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ja={divisor:1,offset:4,stride:4};Fa={divisor:1,offset:16,stride:8};gb={divisor:1,offset:24,stride:8};da={divisor:1,offset:0,stride:8};return{batch:function(b,g){var k,r,x,L,u,t;k=l.next;k!==l.cur&&
(k?I.bindFramebuffer(36160,k.framebuffer):I.bindFramebuffer(36160,null),l.cur=k);if(V.dirty){var y,J,G,Aa,B,ra,ya,K,T,aa,ba,pa,Ea,Ba,ma,ha,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb;y=S.dither;y!==V.dither&&(y?I.enable(3024):I.disable(3024),V.dither=y);J=S.depth_func;J!==V.depth_func&&(I.depthFunc(J),V.depth_func=J);G=$b[0];Aa=$b[1];if(G!==Ua[0]||Aa!==Ua[1])I.depthRange(G,Aa),Ua[0]=G,Ua[1]=Aa;B=S.depth_mask;B!==V.depth_mask&&(I.depthMask(B),V.depth_mask=B);ra=Ma[0];ya=Ma[1];K=Ma[2];T=Ma[3];if(ra!==
X[0]||ya!==X[1]||K!==X[2]||T!==X[3])I.colorMask(ra,ya,K,T),X[0]=ra,X[1]=ya,X[2]=K,X[3]=T;aa=S.frontFace;aa!==V.frontFace&&(I.frontFace(aa),V.frontFace=aa);ba=S.lineWidth;ba!==V.lineWidth&&(I.lineWidth(ba),V.lineWidth=ba);pa=S.polygonOffset_enable;pa!==V.polygonOffset_enable&&(pa?I.enable(32823):I.disable(32823),V.polygonOffset_enable=pa);Ea=w[0];Ba=w[1];if(Ea!==v[0]||Ba!==v[1])I.polygonOffset(Ea,Ba),v[0]=Ea,v[1]=Ba;ma=S.sample_alpha;ma!==V.sample_alpha&&(ma?I.enable(32926):I.disable(32926),V.sample_alpha=
ma);ha=S.sample_enable;ha!==V.sample_enable&&(ha?I.enable(32928):I.disable(32928),V.sample_enable=ha);Xd=M[0];Nd=M[1];if(Xd!==wa[0]||Nd!==wa[1])I.sampleCoverage(Xd,Nd),wa[0]=Xd,wa[1]=Nd;Ad=S.stencil_mask;Ad!==V.stencil_mask&&(I.stencilMask(Ad),V.stencil_mask=Ad);nd=lc[0];bd=lc[1];sd=lc[2];if(nd!==ga[0]||bd!==ga[1]||sd!==ga[2])I.stencilFunc(nd,bd,sd),ga[0]=nd,ga[1]=bd,ga[2]=sd;Lc=Ha[0];pd=Ha[1];Fc=Ha[2];fd=Ha[3];if(Lc!==qa[0]||pd!==qa[1]||Fc!==qa[2]||fd!==qa[3])I.stencilOpSeparate(Lc,pd,Fc,fd),qa[0]=
Lc,qa[1]=pd,qa[2]=Fc,qa[3]=fd;Oc=H[0];Ic=H[1];Bb=H[2];Fb=H[3];if(Oc!==sa[0]||Ic!==sa[1]||Bb!==sa[2]||Fb!==sa[3])I.stencilOpSeparate(Oc,Ic,Bb,Fb),sa[0]=Oc,sa[1]=Ic,sa[2]=Bb,sa[3]=Fb}I.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;I.enable(3042);V.blend_enable=!0;I.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;I.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;I.enable(2884);V.cull_enable=!0;I.cullFace(1029);V.cull_face=1029;I.enable(3089);V.scissor_enable=!0;
I.disable(2960);V.stencil_enable=!1;if(r=V.profile)x=performance.now(),F.count+=g;I.useProgram(P.program);L=oa.angle_instanced_arrays;var uc,yb,xc,Cb,Jc;Ca.setVAO(null);uc=C.location;yb=Q[uc];yb.buffer||I.enableVertexAttribArray(uc);if(5126!==yb.type||1!==yb.size||yb.buffer!==f||!1!==yb.normalized||0!==yb.offset||8!==yb.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(uc,1,5126,!1,8,0),yb.type=5126,yb.size=1,yb.buffer=f,yb.normalized=!1,yb.offset=0,yb.stride=8;0!==yb.divisor&&(L.vertexAttribDivisorANGLE(uc,
0),yb.divisor=0);xc=c.location;Cb=Q[xc];Cb.buffer||I.enableVertexAttribArray(xc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==h||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)I.bindBuffer(34962,h.buffer),I.vertexAttribPointer(xc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=h,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(L.vertexAttribDivisorANGLE(xc,0),Cb.divisor=0);(Jc=N.elements)?I.bindBuffer(34963,Jc.buffer.buffer):Ca.currentVAO&&(Jc=va.getElements(Ca.currentVAO.elements))&&I.bindBuffer(34963,
Jc.buffer.buffer);for(u=0;u<g;++u){t=b[u];var mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,xa,jd,bf,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc;mc=t.viewport;Gc=mc.x|0;gd=
mc.y|0;Xc="width"in mc?mc.width|0:m.framebufferWidth-Gc;Cc="height"in mc?mc.height|0:m.framebufferHeight-gd;ec=m.viewportWidth;m.viewportWidth=Xc;Hc=m.viewportHeight;m.viewportHeight=Cc;I.viewport(Gc,gd,Xc,Cc);Da[0]=Gc;Da[1]=gd;Da[2]=Xc;Da[3]=Cc;(pc=ja.call(this,m,t,u))?I.enable(2929):I.disable(2929);V.depth_enable=pc;qc=t.viewport;nc=qc.x|0;fc=qc.y|0;eb="width"in qc?qc.width|0:m.framebufferWidth-nc;Sc="height"in qc?qc.height|0:m.framebufferHeight-fc;I.scissor(nc,fc,eb,Sc);mb[0]=nc;mb[1]=fc;mb[2]=
eb;mb[3]=Sc;ua.buffer=t.positionBuffer;zb=!1;bb=null;Mb=0;$a=!1;Va=ob=0;Pc=1;Hb=0;Ib=5126;Gb=jb=Nb=rc=0;ca(ua)?(zb=!0,bb=z.createStream(34962,ua),Ib=bb.dtype):(bb=z.getBuffer(ua))?Ib=bb.dtype:"constant"in ua?(Pc=2,"number"===typeof ua.constant?(Nb=ua.constant,jb=Gb=rc=0):(Nb=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,rc=3<ua.constant.length?ua.constant[3]:0)):(bb=ca(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),
Ib="type"in ua?ka[ua.type]:bb.dtype,$a=!!ua.normalized,Va=ua.size|0,ob=ua.offset|0,Hb=ua.stride|0,Mb=ua.divisor|0);Db=e.location;xb=Q[Db];if(1===Pc){xb.buffer||I.enableVertexAttribArray(Db);hb=Va||2;if(xb.type!==Ib||xb.size!==hb||xb.buffer!==bb||xb.normalized!==$a||xb.offset!==ob||xb.stride!==Hb)I.bindBuffer(34962,bb.buffer),I.vertexAttribPointer(Db,hb,Ib,$a,Hb,ob),xb.type=Ib,xb.size=hb,xb.buffer=bb,xb.normalized=$a,xb.offset=ob,xb.stride=Hb;xb.divisor!==Mb&&(L.vertexAttribDivisorANGLE(Db,Mb),xb.divisor=
Mb)}else if(xb.buffer&&(I.disableVertexAttribArray(Db),xb.buffer=null),xb.x!==Nb||xb.y!==jb||xb.z!==Gb||xb.w!==rc)I.vertexAttrib4f(Db,Nb,jb,Gb,rc),xb.x=Nb,xb.y=jb,xb.z=Gb,xb.w=rc;Fa.buffer=t.positionBuffer;Xb=!1;Ob=null;rb=0;Sa=!1;pb=Pb=0;ac=1;ib=0;qb=5126;db=Ka=sb=Ia=0;ca(Fa)?(Xb=!0,Ob=z.createStream(34962,Fa),qb=Ob.dtype):(Ob=z.getBuffer(Fa))?qb=Ob.dtype:"constant"in Fa?(ac=2,"number"===typeof Fa.constant?(sb=Fa.constant,Ka=db=Ia=0):(sb=0<Fa.constant.length?Fa.constant[0]:0,Ka=1<Fa.constant.length?
Fa.constant[1]:0,db=2<Fa.constant.length?Fa.constant[2]:0,Ia=3<Fa.constant.length?Fa.constant[3]:0)):(Ob=ca(Fa.buffer)?z.createStream(34962,Fa.buffer):z.getBuffer(Fa.buffer),qb="type"in Fa?ka[Fa.type]:Ob.dtype,Sa=!!Fa.normalized,pb=Fa.size|0,Pb=Fa.offset|0,ib=Fa.stride|0,rb=Fa.divisor|0);fb=E.location;La=Q[fb];if(1===ac){La.buffer||I.enableVertexAttribArray(fb);kb=pb||2;if(La.type!==qb||La.size!==kb||La.buffer!==Ob||La.normalized!==Sa||La.offset!==Pb||La.stride!==ib)I.bindBuffer(34962,Ob.buffer),
I.vertexAttribPointer(fb,kb,qb,Sa,ib,Pb),La.type=qb,La.size=kb,La.buffer=Ob,La.normalized=Sa,La.offset=Pb,La.stride=ib;La.divisor!==rb&&(L.vertexAttribDivisorANGLE(fb,rb),La.divisor=rb)}else if(La.buffer&&(I.disableVertexAttribArray(fb),La.buffer=null),La.x!==sb||La.y!==Ka||La.z!==db||La.w!==Ia)I.vertexAttrib4f(fb,sb,Ka,db,Ia),La.x=sb,La.y=Ka,La.z=db,La.w=Ia;gb.buffer=t.positionBuffer;Wa=!1;ub=null;tb=0;Pa=!1;Ra=Bc=0;Jb=1;Eb=0;Na=5126;Lb=Kb=Ya=Fd=0;ca(gb)?(Wa=!0,ub=z.createStream(34962,gb),Na=ub.dtype):
(ub=z.getBuffer(gb))?Na=ub.dtype:"constant"in gb?(Jb=2,"number"===typeof gb.constant?(Ya=gb.constant,Kb=Lb=Fd=0):(Ya=0<gb.constant.length?gb.constant[0]:0,Kb=1<gb.constant.length?gb.constant[1]:0,Lb=2<gb.constant.length?gb.constant[2]:0,Fd=3<gb.constant.length?gb.constant[3]:0)):(ub=ca(gb.buffer)?z.createStream(34962,gb.buffer):z.getBuffer(gb.buffer),Na="type"in gb?ka[gb.type]:ub.dtype,Pa=!!gb.normalized,Ra=gb.size|0,Bc=gb.offset|0,Eb=gb.stride|0,tb=gb.divisor|0);lb=na.location;Oa=Q[lb];if(1===Jb){Oa.buffer||
I.enableVertexAttribArray(lb);Yb=Ra||2;if(Oa.type!==Na||Oa.size!==Yb||Oa.buffer!==ub||Oa.normalized!==Pa||Oa.offset!==Bc||Oa.stride!==Eb)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(lb,Yb,Na,Pa,Eb,Bc),Oa.type=Na,Oa.size=Yb,Oa.buffer=ub,Oa.normalized=Pa,Oa.offset=Bc,Oa.stride=Eb;Oa.divisor!==tb&&(L.vertexAttribDivisorANGLE(lb,tb),Oa.divisor=tb)}else if(Oa.buffer&&(I.disableVertexAttribArray(lb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==Fd)I.vertexAttrib4f(lb,Ya,Kb,Lb,Fd),Oa.x=
Ya,Oa.y=Kb,Oa.z=Lb,Oa.w=Fd;da.buffer=t.positionBuffer;Qa=!1;vb=null;wb=0;Ta=!1;gc=nb=0;Ec=1;vc=0;ab=5126;ld=Xa=Tc=jc=0;ca(da)?(Qa=!0,vb=z.createStream(34962,da),ab=vb.dtype):(vb=z.getBuffer(da))?ab=vb.dtype:"constant"in da?(Ec=2,"number"===typeof da.constant?(Tc=da.constant,Xa=ld=jc=0):(Tc=0<da.constant.length?da.constant[0]:0,Xa=1<da.constant.length?da.constant[1]:0,ld=2<da.constant.length?da.constant[2]:0,jc=3<da.constant.length?da.constant[3]:0)):(vb=ca(da.buffer)?z.createStream(34962,da.buffer):
z.getBuffer(da.buffer),ab="type"in da?ka[da.type]:vb.dtype,Ta=!!da.normalized,gc=da.size|0,nb=da.offset|0,vc=da.stride|0,wb=da.divisor|0);Ab=ia.location;Za=Q[Ab];if(1===Ec){Za.buffer||I.enableVertexAttribArray(Ab);Ub=gc||2;if(Za.type!==ab||Za.size!==Ub||Za.buffer!==vb||Za.normalized!==Ta||Za.offset!==nb||Za.stride!==vc)I.bindBuffer(34962,vb.buffer),I.vertexAttribPointer(Ab,Ub,ab,Ta,vc,nb),Za.type=ab,Za.size=Ub,Za.buffer=vb,Za.normalized=Ta,Za.offset=nb,Za.stride=vc;Za.divisor!==wb&&(L.vertexAttribDivisorANGLE(Ab,
wb),Za.divisor=wb)}else if(Za.buffer&&(I.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==Tc||Za.y!==Xa||Za.z!==ld||Za.w!==jc)I.vertexAttrib4f(Ab,Tc,Xa,ld,jc),Za.x=Tc,Za.y=Xa,Za.z=ld,Za.w=jc;Z.buffer=t.colorBuffer;tc=!1;Vb=null;Qb=0;Kc=!1;qd=Rb=0;Dc=1;oe=0;Mc=5126;wc=oc=vd=Yc=0;ca(Z)?(tc=!0,Vb=z.createStream(34962,Z),Mc=Vb.dtype):(Vb=z.getBuffer(Z))?Mc=Vb.dtype:"constant"in Z?(Dc=2,"number"===typeof Z.constant?(vd=Z.constant,oc=wc=Yc=0):(vd=0<Z.constant.length?Z.constant[0]:0,oc=1<Z.constant.length?
Z.constant[1]:0,wc=2<Z.constant.length?Z.constant[2]:0,Yc=3<Z.constant.length?Z.constant[3]:0)):(Vb=ca(Z.buffer)?z.createStream(34962,Z.buffer):z.getBuffer(Z.buffer),Mc="type"in Z?ka[Z.type]:Vb.dtype,Kc=!!Z.normalized,qd=Z.size|0,Rb=Z.offset|0,oe=Z.stride|0,Qb=Z.divisor|0);hc=U.location;cb=Q[hc];if(1===Dc){cb.buffer||I.enableVertexAttribArray(hc);sc=qd||4;if(cb.type!==Mc||cb.size!==sc||cb.buffer!==Vb||cb.normalized!==Kc||cb.offset!==Rb||cb.stride!==oe)I.bindBuffer(34962,Vb.buffer),I.vertexAttribPointer(hc,
sc,Mc,Kc,oe,Rb),cb.type=Mc,cb.size=sc,cb.buffer=Vb,cb.normalized=Kc,cb.offset=Rb,cb.stride=oe;cb.divisor!==Qb&&(L.vertexAttribDivisorANGLE(hc,Qb),cb.divisor=Qb)}else if(cb.buffer&&(I.disableVertexAttribArray(hc),cb.buffer=null),cb.x!==vd||cb.y!==oc||cb.z!==wc||cb.w!==Yc)I.vertexAttrib4f(hc,vd,oc,wc,Yc),cb.x=vd,cb.y=oc,cb.z=wc,cb.w=Yc;Ja.buffer=t.colorBuffer;Tb=!1;Wb=null;dc=0;ic=!1;Ac=yc=0;cd=1;Qc=0;Rc=5126;dd=md=Zc=Uc=0;ca(Ja)?(Tb=!0,Wb=z.createStream(34962,Ja),Rc=Wb.dtype):(Wb=z.getBuffer(Ja))?
Rc=Wb.dtype:"constant"in Ja?(cd=2,"number"===typeof Ja.constant?(Zc=Ja.constant,md=dd=Uc=0):(Zc=0<Ja.constant.length?Ja.constant[0]:0,md=1<Ja.constant.length?Ja.constant[1]:0,dd=2<Ja.constant.length?Ja.constant[2]:0,Uc=3<Ja.constant.length?Ja.constant[3]:0)):(Wb=ca(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),Rc="type"in Ja?ka[Ja.type]:Wb.dtype,ic=!!Ja.normalized,Ac=Ja.size|0,yc=Ja.offset|0,Qc=Ja.stride|0,dc=Ja.divisor|0);$c=W.location;kc=Q[$c];if(1===cd){kc.buffer||I.enableVertexAttribArray($c);
bc=Ac||4;if(kc.type!==Rc||kc.size!==bc||kc.buffer!==Wb||kc.normalized!==ic||kc.offset!==yc||kc.stride!==Qc)I.bindBuffer(34962,Wb.buffer),I.vertexAttribPointer($c,bc,Rc,ic,Qc,yc),kc.type=Rc,kc.size=bc,kc.buffer=Wb,kc.normalized=ic,kc.offset=yc,kc.stride=Qc;kc.divisor!==dc&&(L.vertexAttribDivisorANGLE($c,dc),kc.divisor=dc)}else if(kc.buffer&&(I.disableVertexAttribArray($c),kc.buffer=null),kc.x!==Zc||kc.y!==md||kc.z!==dd||kc.w!==Uc)I.vertexAttrib4f($c,Zc,md,dd,Uc),kc.x=Zc,kc.y=md,kc.z=dd,kc.w=Uc;ad=
t.scale;Wc=ad[0];zc=ad[1];u&&ed===Wc&&id===zc||(ed=Wc,id=zc,I.uniform2f(cc.location,Wc,zc));rd=t.translate;ve=rd[0];jd=rd[1];u&&xa===ve&&bf===jd||(xa=ve,bf=jd,I.uniform2f(ea.location,ve,jd));Od=t.thickness;u&&Vd===Od||(Vd=Od,I.uniform1f(Y.location,Od));ie=t.depth;u&&Yd===ie||(Yd=ie,I.uniform1f(D.location,ie));Id=d.call(this,m,t,u);Gd=Id[0];Vc=Id[1];td=Id[2];xd=Id[3];u&&od===Gd&&wd===Vc&&kd===td&&Bd===xd||(od=Gd,wd=Vc,kd=td,Bd=xd,I.uniform4f(R.location,Gd,Vc,td,xd));Dd=t.miterLimit;u&&ge===Dd||(ge=
Dd,I.uniform1f(q.location,Dd));je=n.call(this,m,t,u);u&&xe===je||(xe=je,I.uniform1f(a.location,je));ke=t.dashLength;u&&he===ke||(he=ke,I.uniform1f(p.location,ke));ee=t.opacity;u&&ye===ee||(ye=ee,I.uniform1f(A.location,ee));(be=t.dashTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);le=be._texture;I.uniform1i(O.location,le.bind());Nc=t.count;0<Nc?Jc?L.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Nc):L.drawArraysInstancedANGLE(5,0,4,Nc):0>Nc&&(Jc?I.drawElements(5,4,Jc.type,0<<
(Jc.type-5121>>1)):I.drawArrays(5,0,4));m.viewportWidth=ec;m.viewportHeight=Hc;zb&&z.destroyStream(bb);Xb&&z.destroyStream(Ob);Wa&&z.destroyStream(ub);Qa&&z.destroyStream(vb);tc&&z.destroyStream(Vb);Tb&&z.destroyStream(Wb);le.unbind()}V.dirty=!0;Ca.setVAO(null);r&&(F.cpuTime+=performance.now()-x)},draw:function(d){var k,n,r,x,u,t,y,G,Aa,B,P,ra,ya,K,T,aa,ba,pa,Ea,Ba,ma,ja,ha,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,
Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd;k=l.next;k!==l.cur&&(k?I.bindFramebuffer(36160,k.framebuffer):I.bindFramebuffer(36160,null),l.cur=k);if(V.dirty){var Dc,xa,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc;Dc=S.dither;Dc!==V.dither&&(Dc?I.enable(3024):I.disable(3024),V.dither=Dc);xa=S.depth_func;xa!==V.depth_func&&(I.depthFunc(xa),
V.depth_func=xa);Mc=$b[0];Yc=$b[1];if(Mc!==Ua[0]||Yc!==Ua[1])I.depthRange(Mc,Yc),Ua[0]=Mc,Ua[1]=Yc;vd=S.depth_mask;vd!==V.depth_mask&&(I.depthMask(vd),V.depth_mask=vd);oc=Ma[0];wc=Ma[1];hc=Ma[2];cb=Ma[3];if(oc!==X[0]||wc!==X[1]||hc!==X[2]||cb!==X[3])I.colorMask(oc,wc,hc,cb),X[0]=oc,X[1]=wc,X[2]=hc,X[3]=cb;sc=S.frontFace;sc!==V.frontFace&&(I.frontFace(sc),V.frontFace=sc);Tb=S.lineWidth;Tb!==V.lineWidth&&(I.lineWidth(Tb),V.lineWidth=Tb);Wb=S.polygonOffset_enable;Wb!==V.polygonOffset_enable&&(Wb?I.enable(32823):
I.disable(32823),V.polygonOffset_enable=Wb);dc=w[0];ic=w[1];if(dc!==v[0]||ic!==v[1])I.polygonOffset(dc,ic),v[0]=dc,v[1]=ic;yc=S.sample_alpha;yc!==V.sample_alpha&&(yc?I.enable(32926):I.disable(32926),V.sample_alpha=yc);Ac=S.sample_enable;Ac!==V.sample_enable&&(Ac?I.enable(32928):I.disable(32928),V.sample_enable=Ac);cd=M[0];Qc=M[1];if(cd!==wa[0]||Qc!==wa[1])I.sampleCoverage(cd,Qc),wa[0]=cd,wa[1]=Qc;Rc=S.stencil_mask;Rc!==V.stencil_mask&&(I.stencilMask(Rc),V.stencil_mask=Rc);Uc=lc[0];Zc=lc[1];md=lc[2];
if(Uc!==ga[0]||Zc!==ga[1]||md!==ga[2])I.stencilFunc(Uc,Zc,md),ga[0]=Uc,ga[1]=Zc,ga[2]=md;dd=Ha[0];$c=Ha[1];kc=Ha[2];bc=Ha[3];if(dd!==qa[0]||$c!==qa[1]||kc!==qa[2]||bc!==qa[3])I.stencilOpSeparate(dd,$c,kc,bc),qa[0]=dd,qa[1]=$c,qa[2]=kc,qa[3]=bc;ad=H[0];Wc=H[1];ed=H[2];zc=H[3];if(ad!==sa[0]||Wc!==sa[1]||ed!==sa[2]||zc!==sa[3])I.stencilOpSeparate(ad,Wc,ed,zc),sa[0]=ad,sa[1]=Wc,sa[2]=ed,sa[3]=zc}n=d.viewport;r=n.x|0;x=n.y|0;u="width"in n?n.width|0:m.framebufferWidth-r;t="height"in n?n.height|0:m.framebufferHeight-
x;y=m.viewportWidth;m.viewportWidth=u;G=m.viewportHeight;m.viewportHeight=t;I.viewport(r,x,u,t);Da[0]=r;Da[1]=x;Da[2]=u;Da[3]=t;I.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;I.enable(3042);V.blend_enable=!0;I.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;I.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;I.enable(2884);V.cull_enable=!0;I.cullFace(1029);V.cull_face=1029;(Aa=J.call(this,m,d,0))?I.enable(2929):I.disable(2929);V.depth_enable=Aa;B=d.viewport;
P=B.x|0;ra=B.y|0;ya="width"in B?B.width|0:m.framebufferWidth-P;K="height"in B?B.height|0:m.framebufferHeight-ra;I.scissor(P,ra,ya,K);mb[0]=P;mb[1]=ra;mb[2]=ya;mb[3]=K;I.enable(3089);V.scissor_enable=!0;I.disable(2960);V.stencil_enable=!1;if(T=V.profile)aa=performance.now(),F.count++;I.useProgram(L.program);ba=oa.angle_instanced_arrays;Ca.setVAO(null);ua.buffer=d.positionBuffer;pa=!1;Ea=null;Ba=0;ma=!1;ha=ja=0;Xd=1;Nd=0;Ad=5126;Lc=sd=bd=nd=0;ca(ua)?(pa=!0,Ea=z.createStream(34962,ua),Ad=Ea.dtype):(Ea=
z.getBuffer(ua))?Ad=Ea.dtype:"constant"in ua?(Xd=2,"number"===typeof ua.constant?(bd=ua.constant,sd=Lc=nd=0):(bd=0<ua.constant.length?ua.constant[0]:0,sd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,nd=3<ua.constant.length?ua.constant[3]:0)):(Ea=ca(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),Ad="type"in ua?ka[ua.type]:Ea.dtype,ma=!!ua.normalized,ha=ua.size|0,ja=ua.offset|0,Nd=ua.stride|0,Ba=ua.divisor|0);pd=e.location;Fc=Q[pd];if(1===Xd){Fc.buffer||
I.enableVertexAttribArray(pd);fd=ha||2;if(Fc.type!==Ad||Fc.size!==fd||Fc.buffer!==Ea||Fc.normalized!==ma||Fc.offset!==ja||Fc.stride!==Nd)I.bindBuffer(34962,Ea.buffer),I.vertexAttribPointer(pd,fd,Ad,ma,Nd,ja),Fc.type=Ad,Fc.size=fd,Fc.buffer=Ea,Fc.normalized=ma,Fc.offset=ja,Fc.stride=Nd;Fc.divisor!==Ba&&(ba.vertexAttribDivisorANGLE(pd,Ba),Fc.divisor=Ba)}else if(Fc.buffer&&(I.disableVertexAttribArray(pd),Fc.buffer=null),Fc.x!==bd||Fc.y!==sd||Fc.z!==Lc||Fc.w!==nd)I.vertexAttrib4f(pd,bd,sd,Lc,nd),Fc.x=
bd,Fc.y=sd,Fc.z=Lc,Fc.w=nd;Fa.buffer=d.positionBuffer;Oc=!1;Ic=null;Bb=0;Fb=!1;yb=uc=0;xc=1;Cb=0;Jc=5126;Xc=gd=Gc=mc=0;ca(Fa)?(Oc=!0,Ic=z.createStream(34962,Fa),Jc=Ic.dtype):(Ic=z.getBuffer(Fa))?Jc=Ic.dtype:"constant"in Fa?(xc=2,"number"===typeof Fa.constant?(Gc=Fa.constant,gd=Xc=mc=0):(Gc=0<Fa.constant.length?Fa.constant[0]:0,gd=1<Fa.constant.length?Fa.constant[1]:0,Xc=2<Fa.constant.length?Fa.constant[2]:0,mc=3<Fa.constant.length?Fa.constant[3]:0)):(Ic=ca(Fa.buffer)?z.createStream(34962,Fa.buffer):
z.getBuffer(Fa.buffer),Jc="type"in Fa?ka[Fa.type]:Ic.dtype,Fb=!!Fa.normalized,yb=Fa.size|0,uc=Fa.offset|0,Cb=Fa.stride|0,Bb=Fa.divisor|0);Cc=E.location;ec=Q[Cc];if(1===xc){ec.buffer||I.enableVertexAttribArray(Cc);Hc=yb||2;if(ec.type!==Jc||ec.size!==Hc||ec.buffer!==Ic||ec.normalized!==Fb||ec.offset!==uc||ec.stride!==Cb)I.bindBuffer(34962,Ic.buffer),I.vertexAttribPointer(Cc,Hc,Jc,Fb,Cb,uc),ec.type=Jc,ec.size=Hc,ec.buffer=Ic,ec.normalized=Fb,ec.offset=uc,ec.stride=Cb;ec.divisor!==Bb&&(ba.vertexAttribDivisorANGLE(Cc,
Bb),ec.divisor=Bb)}else if(ec.buffer&&(I.disableVertexAttribArray(Cc),ec.buffer=null),ec.x!==Gc||ec.y!==gd||ec.z!==Xc||ec.w!==mc)I.vertexAttrib4f(Cc,Gc,gd,Xc,mc),ec.x=Gc,ec.y=gd,ec.z=Xc,ec.w=mc;gb.buffer=d.positionBuffer;pc=!1;qc=null;nc=0;fc=!1;Sc=eb=0;zb=1;bb=0;Mb=5126;Pc=Va=ob=$a=0;ca(gb)?(pc=!0,qc=z.createStream(34962,gb),Mb=qc.dtype):(qc=z.getBuffer(gb))?Mb=qc.dtype:"constant"in gb?(zb=2,"number"===typeof gb.constant?(ob=gb.constant,Va=Pc=$a=0):(ob=0<gb.constant.length?gb.constant[0]:0,Va=1<
gb.constant.length?gb.constant[1]:0,Pc=2<gb.constant.length?gb.constant[2]:0,$a=3<gb.constant.length?gb.constant[3]:0)):(qc=ca(gb.buffer)?z.createStream(34962,gb.buffer):z.getBuffer(gb.buffer),Mb="type"in gb?ka[gb.type]:qc.dtype,fc=!!gb.normalized,Sc=gb.size|0,eb=gb.offset|0,bb=gb.stride|0,nc=gb.divisor|0);Hb=na.location;Ib=Q[Hb];if(1===zb){Ib.buffer||I.enableVertexAttribArray(Hb);rc=Sc||2;if(Ib.type!==Mb||Ib.size!==rc||Ib.buffer!==qc||Ib.normalized!==fc||Ib.offset!==eb||Ib.stride!==bb)I.bindBuffer(34962,
qc.buffer),I.vertexAttribPointer(Hb,rc,Mb,fc,bb,eb),Ib.type=Mb,Ib.size=rc,Ib.buffer=qc,Ib.normalized=fc,Ib.offset=eb,Ib.stride=bb;Ib.divisor!==nc&&(ba.vertexAttribDivisorANGLE(Hb,nc),Ib.divisor=nc)}else if(Ib.buffer&&(I.disableVertexAttribArray(Hb),Ib.buffer=null),Ib.x!==ob||Ib.y!==Va||Ib.z!==Pc||Ib.w!==$a)I.vertexAttrib4f(Hb,ob,Va,Pc,$a),Ib.x=ob,Ib.y=Va,Ib.z=Pc,Ib.w=$a;da.buffer=d.positionBuffer;Nb=!1;jb=null;Gb=0;Db=!1;hb=xb=0;Xb=1;Ob=0;rb=5126;ac=pb=Pb=Sa=0;ca(da)?(Nb=!0,jb=z.createStream(34962,
da),rb=jb.dtype):(jb=z.getBuffer(da))?rb=jb.dtype:"constant"in da?(Xb=2,"number"===typeof da.constant?(Pb=da.constant,pb=ac=Sa=0):(Pb=0<da.constant.length?da.constant[0]:0,pb=1<da.constant.length?da.constant[1]:0,ac=2<da.constant.length?da.constant[2]:0,Sa=3<da.constant.length?da.constant[3]:0)):(jb=ca(da.buffer)?z.createStream(34962,da.buffer):z.getBuffer(da.buffer),rb="type"in da?ka[da.type]:jb.dtype,Db=!!da.normalized,hb=da.size|0,xb=da.offset|0,Ob=da.stride|0,Gb=da.divisor|0);ib=ia.location;qb=
Q[ib];if(1===Xb){qb.buffer||I.enableVertexAttribArray(ib);Ia=hb||2;if(qb.type!==rb||qb.size!==Ia||qb.buffer!==jb||qb.normalized!==Db||qb.offset!==xb||qb.stride!==Ob)I.bindBuffer(34962,jb.buffer),I.vertexAttribPointer(ib,Ia,rb,Db,Ob,xb),qb.type=rb,qb.size=Ia,qb.buffer=jb,qb.normalized=Db,qb.offset=xb,qb.stride=Ob;qb.divisor!==Gb&&(ba.vertexAttribDivisorANGLE(ib,Gb),qb.divisor=Gb)}else if(qb.buffer&&(I.disableVertexAttribArray(ib),qb.buffer=null),qb.x!==Pb||qb.y!==pb||qb.z!==ac||qb.w!==Sa)I.vertexAttrib4f(ib,
Pb,pb,ac,Sa),qb.x=Pb,qb.y=pb,qb.z=ac,qb.w=Sa;Z.buffer=d.colorBuffer;sb=!1;Ka=null;db=0;fb=!1;kb=La=0;Wa=1;ub=0;tb=5126;Jb=Ra=Bc=Pa=0;ca(Z)?(sb=!0,Ka=z.createStream(34962,Z),tb=Ka.dtype):(Ka=z.getBuffer(Z))?tb=Ka.dtype:"constant"in Z?(Wa=2,"number"===typeof Z.constant?(Bc=Z.constant,Ra=Jb=Pa=0):(Bc=0<Z.constant.length?Z.constant[0]:0,Ra=1<Z.constant.length?Z.constant[1]:0,Jb=2<Z.constant.length?Z.constant[2]:0,Pa=3<Z.constant.length?Z.constant[3]:0)):(Ka=ca(Z.buffer)?z.createStream(34962,Z.buffer):
z.getBuffer(Z.buffer),tb="type"in Z?ka[Z.type]:Ka.dtype,fb=!!Z.normalized,kb=Z.size|0,La=Z.offset|0,ub=Z.stride|0,db=Z.divisor|0);Eb=U.location;Na=Q[Eb];if(1===Wa){Na.buffer||I.enableVertexAttribArray(Eb);Fd=kb||4;if(Na.type!==tb||Na.size!==Fd||Na.buffer!==Ka||Na.normalized!==fb||Na.offset!==La||Na.stride!==ub)I.bindBuffer(34962,Ka.buffer),I.vertexAttribPointer(Eb,Fd,tb,fb,ub,La),Na.type=tb,Na.size=Fd,Na.buffer=Ka,Na.normalized=fb,Na.offset=La,Na.stride=ub;Na.divisor!==db&&(ba.vertexAttribDivisorANGLE(Eb,
db),Na.divisor=db)}else if(Na.buffer&&(I.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)I.vertexAttrib4f(Eb,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ja.buffer=d.colorBuffer;Ya=!1;Kb=null;Lb=0;lb=!1;Yb=Oa=0;Qa=1;vb=0;wb=5126;Ec=gc=nb=Ta=0;ca(Ja)?(Ya=!0,Kb=z.createStream(34962,Ja),wb=Kb.dtype):(Kb=z.getBuffer(Ja))?wb=Kb.dtype:"constant"in Ja?(Qa=2,"number"===typeof Ja.constant?(nb=Ja.constant,gc=Ec=Ta=0):(nb=0<Ja.constant.length?Ja.constant[0]:0,gc=1<Ja.constant.length?
Ja.constant[1]:0,Ec=2<Ja.constant.length?Ja.constant[2]:0,Ta=3<Ja.constant.length?Ja.constant[3]:0)):(Kb=ca(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),wb="type"in Ja?ka[Ja.type]:Kb.dtype,lb=!!Ja.normalized,Yb=Ja.size|0,Oa=Ja.offset|0,vb=Ja.stride|0,Lb=Ja.divisor|0);vc=W.location;ab=Q[vc];if(1===Qa){ab.buffer||I.enableVertexAttribArray(vc);jc=Yb||4;if(ab.type!==wb||ab.size!==jc||ab.buffer!==Kb||ab.normalized!==lb||ab.offset!==Oa||ab.stride!==vb)I.bindBuffer(34962,Kb.buffer),
I.vertexAttribPointer(vc,jc,wb,lb,vb,Oa),ab.type=wb,ab.size=jc,ab.buffer=Kb,ab.normalized=lb,ab.offset=Oa,ab.stride=vb;ab.divisor!==Lb&&(ba.vertexAttribDivisorANGLE(vc,Lb),ab.divisor=Lb)}else if(ab.buffer&&(I.disableVertexAttribArray(vc),ab.buffer=null),ab.x!==nb||ab.y!==gc||ab.z!==Ec||ab.w!==Ta)I.vertexAttrib4f(vc,nb,gc,Ec,Ta),ab.x=nb,ab.y=gc,ab.z=Ec,ab.w=Ta;Tc=C.location;Xa=Q[Tc];Xa.buffer||I.enableVertexAttribArray(Tc);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==f||!1!==Xa.normalized||0!==Xa.offset||
8!==Xa.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(Tc,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=f,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(ba.vertexAttribDivisorANGLE(Tc,0),Xa.divisor=0);ld=c.location;Ab=Q[ld];Ab.buffer||I.enableVertexAttribArray(ld);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==h||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)I.bindBuffer(34962,h.buffer),I.vertexAttribPointer(ld,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=h,Ab.normalized=
!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ba.vertexAttribDivisorANGLE(ld,0),Ab.divisor=0);Za=d.scale;I.uniform2f(cc.location,Za[0],Za[1]);Ub=d.translate;I.uniform2f(ea.location,Ub[0],Ub[1]);I.uniform1f(Y.location,d.thickness);I.uniform1f(D.location,d.depth);tc=g.call(this,m,d,0);I.uniform4f(R.location,tc[0],tc[1],tc[2],tc[3]);I.uniform1f(q.location,d.miterLimit);Vb=b.call(this,m,d,0);I.uniform1f(a.location,Vb);I.uniform1f(p.location,d.dashLength);I.uniform1f(A.location,d.opacity);(Qb=d.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;I.uniform1i(O.location,Kc.bind());(Rb=N.elements)?I.bindBuffer(34963,Rb.buffer.buffer):Ca.currentVAO&&(Rb=va.getElements(Ca.currentVAO.elements))&&I.bindBuffer(34963,Rb.buffer.buffer);qd=d.count;0<qd?Rb?ba.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),qd):ba.drawArraysInstancedANGLE(5,0,4,qd):0>qd&&(Rb?I.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):I.drawArrays(5,0,4));V.dirty=!0;Ca.setVAO(null);m.viewportWidth=y;m.viewportHeight=
G;T&&(F.cpuTime+=performance.now()-aa);pa&&z.destroyStream(Ea);Oc&&z.destroyStream(Ic);pc&&z.destroyStream(qc);Nb&&z.destroyStream(jb);sb&&z.destroyStream(Ka);Ya&&z.destroyStream(Kb);Kc.unbind()},scope:function(a,c,b){var d,e,l,w,q,g,v,H,X,k,M,n,p,A,sa,Ma,I,Ha,Q,E,$b,qa,fa,ga,L,R,D,C,J,wa,P,Da,va,U,la,Ua,Y,W,za,ea,ja,lc,oa,O,ta,na,ia,Ca,mb,cc,fc,eb,ha,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,
vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,xa,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,bf,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf;d=a.viewport;e=d.x|0;l=d.y|0;w="width"in d?d.width|0:m.framebufferWidth-
e;q="height"in d?d.height|0:m.framebufferHeight-l;g=m.viewportWidth;m.viewportWidth=w;v=m.viewportHeight;m.viewportHeight=q;H=Aa[0];Aa[0]=e;X=Aa[1];Aa[1]=l;k=Aa[2];Aa[2]=w;M=Aa[3];Aa[3]=q;n=ya[0];ya[0]=0;p=ya[1];ya[1]=0;A=ya[2];ya[2]=0;sa=ya[3];ya[3]=0;Ma=S.blend_enable;S.blend_enable=!0;I=Ba[0];Ba[0]=32774;Ha=Ba[1];Ba[1]=32774;Q=pa[0];pa[0]=770;E=pa[1];pa[1]=771;$b=pa[2];pa[2]=773;qa=pa[3];pa[3]=1;fa=S.cull_enable;S.cull_enable=!0;ga=S.cull_face;S.cull_face=1029;L=B.call(this,m,a,b);R=S.depth_enable;
S.depth_enable=L;D=a.viewport;C=D.x|0;J=D.y|0;wa="width"in D?D.width|0:m.framebufferWidth-C;P="height"in D?D.height|0:m.framebufferHeight-J;Da=Ea[0];Ea[0]=C;va=Ea[1];Ea[1]=J;U=Ea[2];Ea[2]=wa;la=Ea[3];Ea[3]=P;Ua=S.scissor_enable;S.scissor_enable=!0;Y=S.stencil_enable;S.stencil_enable=!1;if(W=V.profile)za=performance.now(),F.count++;ea=N.offset;N.offset=0;ja=N.count;N.count=4;lc=a.count;oa=N.instances;N.instances=lc;O=N.primitive;N.primitive=5;ta=a.dashLength;na=ra[23];ra[23]=ta;ia=a.dashTexture;Ca=
ra[24];ra[24]=ia;mb=a.depth;cc=ra[22];ra[22]=mb;fc=a.id;eb=ra[31];ra[31]=fc;ha=a.miterLimit;zb=ra[32];ra[32]=ha;bb=y.call(this,m,a,b);Mb=ra[33];ra[33]=bb;$a=a.opacity;ob=ra[10];ra[10]=$a;Va=m.pixelRatio;Pc=ra[34];ra[34]=Va;Hb=a.scale;Ib=ra[6];ra[6]=Hb;rc=a.scaleFract;Nb=ra[7];ra[7]=rc;jb=a.thickness;Gb=ra[21];ra[21]=jb;Db=a.translate;xb=ra[8];ra[8]=Db;hb=a.translateFract;Xb=ra[9];ra[9]=hb;Ob=K.call(this,m,a,b);rb=ra[3];ra[3]=Ob;Z.buffer=a.colorBuffer;Sa=!1;Pb=null;pb=0;ac=!1;qb=ib=0;Ia=1;sb=0;Ka=
5126;kb=La=fb=db=0;ca(Z)?(Sa=!0,Pb=z.createStream(34962,Z),Ka=Pb.dtype):(Pb=z.getBuffer(Z))?Ka=Pb.dtype:"constant"in Z?(Ia=2,"number"===typeof Z.constant?(fb=Z.constant,La=kb=db=0):(fb=0<Z.constant.length?Z.constant[0]:0,La=1<Z.constant.length?Z.constant[1]:0,kb=2<Z.constant.length?Z.constant[2]:0,db=3<Z.constant.length?Z.constant[3]:0)):(Pb=ca(Z.buffer)?z.createStream(34962,Z.buffer):z.getBuffer(Z.buffer),Ka="type"in Z?ka[Z.type]:Pb.dtype,ac=!!Z.normalized,qb=Z.size|0,ib=Z.offset|0,sb=Z.stride|0,
pb=Z.divisor|0);Wa=aa.buffer;aa.buffer=Pb;ub=aa.divisor;aa.divisor=pb;tb=aa.normalized;aa.normalized=ac;Pa=aa.offset;aa.offset=ib;Bc=aa.size;aa.size=qb;Ra=aa.state;aa.state=Ia;Jb=aa.stride;aa.stride=sb;Eb=aa.type;aa.type=Ka;Na=aa.w;aa.w=db;Fd=aa.x;aa.x=fb;Ya=aa.y;aa.y=La;Kb=aa.z;aa.z=kb;ua.buffer=a.positionBuffer;Lb=!1;lb=null;Oa=0;Yb=!1;vb=Qa=0;wb=1;Ta=0;nb=5126;ab=vc=Ec=gc=0;ca(ua)?(Lb=!0,lb=z.createStream(34962,ua),nb=lb.dtype):(lb=z.getBuffer(ua))?nb=lb.dtype:"constant"in ua?(wb=2,"number"===
typeof ua.constant?(Ec=ua.constant,vc=ab=gc=0):(Ec=0<ua.constant.length?ua.constant[0]:0,vc=1<ua.constant.length?ua.constant[1]:0,ab=2<ua.constant.length?ua.constant[2]:0,gc=3<ua.constant.length?ua.constant[3]:0)):(lb=ca(ua.buffer)?z.createStream(34962,ua.buffer):z.getBuffer(ua.buffer),nb="type"in ua?ka[ua.type]:lb.dtype,Yb=!!ua.normalized,vb=ua.size|0,Qa=ua.offset|0,Ta=ua.stride|0,Oa=ua.divisor|0);jc=t.buffer;t.buffer=lb;Tc=t.divisor;t.divisor=Oa;Xa=t.normalized;t.normalized=Yb;ld=t.offset;t.offset=
Qa;Ab=t.size;t.size=vb;Za=t.state;t.state=wb;Ub=t.stride;t.stride=Ta;tc=t.type;t.type=nb;Vb=t.w;t.w=gc;Qb=t.x;t.x=Ec;Kc=t.y;t.y=vc;Rb=t.z;t.z=ab;Ja.buffer=a.colorBuffer;qd=!1;Dc=null;xa=0;Mc=!1;vd=Yc=0;oc=1;wc=0;hc=5126;Wb=Tb=sc=cb=0;ca(Ja)?(qd=!0,Dc=z.createStream(34962,Ja),hc=Dc.dtype):(Dc=z.getBuffer(Ja))?hc=Dc.dtype:"constant"in Ja?(oc=2,"number"===typeof Ja.constant?(sc=Ja.constant,Tb=Wb=cb=0):(sc=0<Ja.constant.length?Ja.constant[0]:0,Tb=1<Ja.constant.length?Ja.constant[1]:0,Wb=2<Ja.constant.length?
Ja.constant[2]:0,cb=3<Ja.constant.length?Ja.constant[3]:0)):(Dc=ca(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),hc="type"in Ja?ka[Ja.type]:Dc.dtype,Mc=!!Ja.normalized,vd=Ja.size|0,Yc=Ja.offset|0,wc=Ja.stride|0,xa=Ja.divisor|0);dc=u.buffer;u.buffer=Dc;ic=u.divisor;u.divisor=xa;yc=u.normalized;u.normalized=Mc;Ac=u.offset;u.offset=Yc;cd=u.size;u.size=vd;Qc=u.state;u.state=oc;Rc=u.stride;u.stride=wc;Uc=u.type;u.type=hc;Zc=u.w;u.w=cb;md=u.x;u.x=sc;dd=u.y;u.y=Tb;$c=u.z;u.z=Wb;Fa.buffer=
a.positionBuffer;kc=!1;bc=null;ad=0;Wc=!1;zc=ed=0;id=1;rd=0;ve=5126;Od=bf=jd=we=0;ca(Fa)?(kc=!0,bc=z.createStream(34962,Fa),ve=bc.dtype):(bc=z.getBuffer(Fa))?ve=bc.dtype:"constant"in Fa?(id=2,"number"===typeof Fa.constant?(jd=Fa.constant,bf=Od=we=0):(jd=0<Fa.constant.length?Fa.constant[0]:0,bf=1<Fa.constant.length?Fa.constant[1]:0,Od=2<Fa.constant.length?Fa.constant[2]:0,we=3<Fa.constant.length?Fa.constant[3]:0)):(bc=ca(Fa.buffer)?z.createStream(34962,Fa.buffer):z.getBuffer(Fa.buffer),ve="type"in
Fa?ka[Fa.type]:bc.dtype,Wc=!!Fa.normalized,zc=Fa.size|0,ed=Fa.offset|0,rd=Fa.stride|0,ad=Fa.divisor|0);Vd=G.buffer;G.buffer=bc;ie=G.divisor;G.divisor=ad;Yd=G.normalized;G.normalized=Wc;Id=G.offset;G.offset=ed;Gd=G.size;G.size=zc;od=G.state;G.state=id;Vc=G.stride;G.stride=rd;wd=G.type;G.type=ve;td=G.w;G.w=we;kd=G.x;G.x=jd;xd=G.y;G.y=bf;Bd=G.z;G.z=Od;Dd=ba.buffer;ba.buffer=f;ge=ba.divisor;ba.divisor=0;je=ba.normalized;ba.normalized=!1;xe=ba.offset;ba.offset=0;ke=ba.size;ba.size=0;he=ba.state;ba.state=
1;ee=ba.stride;ba.stride=8;ye=ba.type;ba.type=5126;be=ba.w;ba.w=0;le=ba.x;ba.x=0;Nc=ba.y;ba.y=0;hd=ba.z;ba.z=0;te=x.buffer;x.buffer=h;pe=x.divisor;x.divisor=0;Jd=x.normalized;x.normalized=!1;Pd=x.offset;x.offset=4;Qd=x.size;x.size=0;Rd=x.state;x.state=1;me=x.stride;x.stride=8;ze=x.type;x.type=5126;Qe=x.w;x.w=0;re=x.x;x.x=0;Re=x.y;x.y=0;Se=x.z;x.z=0;gb.buffer=a.positionBuffer;Me=!1;ue=null;Ee=0;Ge=!1;Ie=He=0;Fe=1;Kd=0;Wd=5126;Hd=Je=ce=ae=0;ca(gb)?(Me=!0,ue=z.createStream(34962,gb),Wd=ue.dtype):(ue=
z.getBuffer(gb))?Wd=ue.dtype:"constant"in gb?(Fe=2,"number"===typeof gb.constant?(ce=gb.constant,Je=Hd=ae=0):(ce=0<gb.constant.length?gb.constant[0]:0,Je=1<gb.constant.length?gb.constant[1]:0,Hd=2<gb.constant.length?gb.constant[2]:0,ae=3<gb.constant.length?gb.constant[3]:0)):(ue=ca(gb.buffer)?z.createStream(34962,gb.buffer):z.getBuffer(gb.buffer),Wd="type"in gb?ka[gb.type]:ue.dtype,Ge=!!gb.normalized,Ie=gb.size|0,He=gb.offset|0,Kd=gb.stride|0,Ee=gb.divisor|0);Sd=T.buffer;T.buffer=ue;Ce=T.divisor;
T.divisor=Ee;Ke=T.normalized;T.normalized=Ge;af=T.offset;T.offset=He;$e=T.size;T.size=Ie;Te=T.state;T.state=Fe;Ne=T.stride;T.stride=Kd;Ze=T.type;T.type=Wd;Xe=T.w;T.w=ae;Ue=T.x;T.x=ce;Ve=T.y;T.y=Je;Td=T.z;T.z=Hd;da.buffer=a.positionBuffer;Zd=!1;We=null;jf=0;nf=!1;kf=ff=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;ca(da)?(Zd=!0,We=z.createStream(34962,da),rf=We.dtype):(We=z.getBuffer(da))?rf=We.dtype:"constant"in da?(lf=2,"number"===typeof da.constant?(sf=da.constant,Bf=Cf=of=0):(sf=0<da.constant.length?da.constant[0]:
0,Bf=1<da.constant.length?da.constant[1]:0,Cf=2<da.constant.length?da.constant[2]:0,of=3<da.constant.length?da.constant[3]:0)):(We=ca(da.buffer)?z.createStream(34962,da.buffer):z.getBuffer(da.buffer),rf="type"in da?ka[da.type]:We.dtype,nf=!!da.normalized,kf=da.size|0,ff=da.offset|0,mf=da.stride|0,jf=da.divisor|0);Oe=r.buffer;r.buffer=We;De=r.divisor;r.divisor=jf;pf=r.normalized;r.normalized=nf;qf=r.offset;r.offset=ff;Df=r.size;r.size=kf;Hf=r.state;r.state=lf;Af=r.stride;r.stride=mf;Ef=r.type;r.type=
rf;Ff=r.w;r.w=of;wf=r.x;r.x=sf;xf=r.y;r.y=Bf;vf=r.z;r.z=Cf;yf=ma.vert;ma.vert=36;zf=ma.frag;ma.frag=35;V.dirty=!0;c(m,a,b);m.viewportWidth=g;m.viewportHeight=v;Aa[0]=H;Aa[1]=X;Aa[2]=k;Aa[3]=M;ya[0]=n;ya[1]=p;ya[2]=A;ya[3]=sa;S.blend_enable=Ma;Ba[0]=I;Ba[1]=Ha;pa[0]=Q;pa[1]=E;pa[2]=$b;pa[3]=qa;S.cull_enable=fa;S.cull_face=ga;S.depth_enable=R;Ea[0]=Da;Ea[1]=va;Ea[2]=U;Ea[3]=la;S.scissor_enable=Ua;S.stencil_enable=Y;W&&(F.cpuTime+=performance.now()-za);N.offset=ea;N.count=ja;N.instances=oa;N.primitive=
O;ra[23]=na;ra[24]=Ca;ra[22]=cc;ra[31]=eb;ra[32]=zb;ra[33]=Mb;ra[10]=ob;ra[34]=Pc;ra[6]=Ib;ra[7]=Nb;ra[21]=Gb;ra[8]=xb;ra[9]=Xb;ra[3]=rb;Sa&&z.destroyStream(Pb);aa.buffer=Wa;aa.divisor=ub;aa.normalized=tb;aa.offset=Pa;aa.size=Bc;aa.state=Ra;aa.stride=Jb;aa.type=Eb;aa.w=Na;aa.x=Fd;aa.y=Ya;aa.z=Kb;Lb&&z.destroyStream(lb);t.buffer=jc;t.divisor=Tc;t.normalized=Xa;t.offset=ld;t.size=Ab;t.state=Za;t.stride=Ub;t.type=tc;t.w=Vb;t.x=Qb;t.y=Kc;t.z=Rb;qd&&z.destroyStream(Dc);u.buffer=dc;u.divisor=ic;u.normalized=
yc;u.offset=Ac;u.size=cd;u.state=Qc;u.stride=Rc;u.type=Uc;u.w=Zc;u.x=md;u.y=dd;u.z=$c;kc&&z.destroyStream(bc);G.buffer=Vd;G.divisor=ie;G.normalized=Yd;G.offset=Id;G.size=Gd;G.state=od;G.stride=Vc;G.type=wd;G.w=td;G.x=kd;G.y=xd;G.z=Bd;ba.buffer=Dd;ba.divisor=ge;ba.normalized=je;ba.offset=xe;ba.size=ke;ba.state=he;ba.stride=ee;ba.type=ye;ba.w=be;ba.x=le;ba.y=Nc;ba.z=hd;x.buffer=te;x.divisor=pe;x.normalized=Jd;x.offset=Pd;x.size=Qd;x.state=Rd;x.stride=me;x.type=ze;x.w=Qe;x.x=re;x.y=Re;x.z=Se;Me&&z.destroyStream(ue);
T.buffer=Sd;T.divisor=Ce;T.normalized=Ke;T.offset=af;T.size=$e;T.state=Te;T.stride=Ne;T.type=Ze;T.w=Xe;T.x=Ue;T.y=Ve;T.z=Td;Zd&&z.destroyStream(We);r.buffer=Oe;r.divisor=De;r.normalized=pf;r.offset=qf;r.size=Df;r.state=Hf;r.stride=Af;r.type=Ef;r.w=Ff;r.x=wf;r.y=xf;r.z=vf;ma.vert=yf;ma.frag=zf;V.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r){var P,ja,d,n,U,e,W,E,p,O,D,C,c,q,a,na,A,ia,cc,Y,ea,R,Q,z,
m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa;P=k.attributes;ja=k.buffer;d=k.context;n=k.current;U=k.draw;e=k.elements;W=k.extensions;E=k.framebuffer;p=k.gl;O=k.isBufferArgs;D=k.next;C=k.shader;c=k.uniforms;q=k.vao;a=D.blend_color;na=n.blend_color;A=D.blend_equation;ia=n.blend_equation;cc=D.blend_func;Y=n.blend_func;ea=D.colorMask;R=n.colorMask;Q=D.depth_range;z=n.depth_range;m=D.polygonOffset_offset;V=n.polygonOffset_offset;N=D.sample_coverage;va=n.sample_coverage;oa=D.scissor_box;l=n.scissor_box;
I=D.stencil_func;ca=n.stencil_func;S=D.stencil_opBack;ma=n.stencil_opBack;ra=D.stencil_opFront;Ca=n.stencil_opFront;ya=D.viewport;fa=n.viewport;Ba={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,c){var b,h,g,w,v,k;b=E.next;b!==E.cur&&(b?p.bindFramebuffer(36160,b.framebuffer):p.bindFramebuffer(36160,null),E.cur=b);if(n.dirty){var f,A,L,C,ga,H,sa,Ha,qa,J,Da,ka,Z,ya,oa,Fa,gb,da,cc,Zb,
Ga,ha,Sb,xa,Cd,qe,Ud,Ae,zd,Ld,ne,fe;f=D.dither;f!==n.dither&&(f?p.enable(3024):p.disable(3024),n.dither=f);A=D.depth_func;A!==n.depth_func&&(p.depthFunc(A),n.depth_func=A);L=Q[0];C=Q[1];if(L!==z[0]||C!==z[1])p.depthRange(L,C),z[0]=L,z[1]=C;ga=D.depth_mask;ga!==n.depth_mask&&(p.depthMask(ga),n.depth_mask=ga);H=ea[0];sa=ea[1];Ha=ea[2];qa=ea[3];if(H!==R[0]||sa!==R[1]||Ha!==R[2]||qa!==R[3])p.colorMask(H,sa,Ha,qa),R[0]=H,R[1]=sa,R[2]=Ha,R[3]=qa;J=D.cull_enable;J!==n.cull_enable&&(J?p.enable(2884):p.disable(2884),
n.cull_enable=J);Da=D.cull_face;Da!==n.cull_face&&(p.cullFace(Da),n.cull_face=Da);ka=D.frontFace;ka!==n.frontFace&&(p.frontFace(ka),n.frontFace=ka);Z=D.lineWidth;Z!==n.lineWidth&&(p.lineWidth(Z),n.lineWidth=Z);ya=D.polygonOffset_enable;ya!==n.polygonOffset_enable&&(ya?p.enable(32823):p.disable(32823),n.polygonOffset_enable=ya);oa=m[0];Fa=m[1];if(oa!==V[0]||Fa!==V[1])p.polygonOffset(oa,Fa),V[0]=oa,V[1]=Fa;gb=D.sample_alpha;gb!==n.sample_alpha&&(gb?p.enable(32926):p.disable(32926),n.sample_alpha=gb);
da=D.sample_enable;da!==n.sample_enable&&(da?p.enable(32928):p.disable(32928),n.sample_enable=da);cc=N[0];Zb=N[1];if(cc!==va[0]||Zb!==va[1])p.sampleCoverage(cc,Zb),va[0]=cc,va[1]=Zb;Ga=D.stencil_mask;Ga!==n.stencil_mask&&(p.stencilMask(Ga),n.stencil_mask=Ga);ha=I[0];Sb=I[1];xa=I[2];if(ha!==ca[0]||Sb!==ca[1]||xa!==ca[2])p.stencilFunc(ha,Sb,xa),ca[0]=ha,ca[1]=Sb,ca[2]=xa;Cd=ra[0];qe=ra[1];Ud=ra[2];Ae=ra[3];if(Cd!==Ca[0]||qe!==Ca[1]||Ud!==Ca[2]||Ae!==Ca[3])p.stencilOpSeparate(Cd,qe,Ud,Ae),Ca[0]=Cd,Ca[1]=
qe,Ca[2]=Ud,Ca[3]=Ae;zd=S[0];Ld=S[1];ne=S[2];fe=S[3];if(zd!==ma[0]||Ld!==ma[1]||ne!==ma[2]||fe!==ma[3])p.stencilOpSeparate(zd,Ld,ne,fe),ma[0]=zd,ma[1]=Ld,ma[2]=ne,ma[3]=fe}p.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;p.enable(3042);n.blend_enable=!0;p.blendEquationSeparate(32774,32774);ia[0]=32774;ia[1]=32774;p.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;p.disable(2929);n.depth_enable=!1;p.enable(3089);n.scissor_enable=!0;p.disable(2960);n.stencil_enable=!1;if(h=n.profile)g=
performance.now(),F.count+=c;p.useProgram(B.program);w=W.angle_instanced_arrays;var Md;q.setVAO(null);Md=U.instances;for(v=0;v<c;++v){k=a[v];var ud,de,$d,Ye,Le,Pe,Ed,Be,se,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb;ud=k.viewport;de=ud.x|0;$d=ud.y|0;Ye="width"in ud?ud.width|0:d.framebufferWidth-de;Le="height"in ud?ud.height|0:d.framebufferHeight-
$d;Pe=d.viewportWidth;d.viewportWidth=Ye;Ed=d.viewportHeight;d.viewportHeight=Le;p.viewport(de,$d,Ye,Le);fa[0]=de;fa[1]=$d;fa[2]=Ye;fa[3]=Le;Be=k.viewport;se=Be.x|0;Xd=Be.y|0;Nd="width"in Be?Be.width|0:d.framebufferWidth-se;Ad="height"in Be?Be.height|0:d.framebufferHeight-Xd;p.scissor(se,Xd,Nd,Ad);l[0]=se;l[1]=Xd;l[2]=Nd;l[3]=Ad;la.buffer=k.positionBuffer;nd=!1;bd=null;sd=0;Lc=!1;Fc=pd=0;fd=1;Oc=0;Ic=5126;yb=uc=Fb=Bb=0;O(la)?(nd=!0,bd=ja.createStream(34962,la),Ic=bd.dtype):(bd=ja.getBuffer(la))?Ic=
bd.dtype:"constant"in la?(fd=2,"number"===typeof la.constant?(Fb=la.constant,uc=yb=Bb=0):(Fb=0<la.constant.length?la.constant[0]:0,uc=1<la.constant.length?la.constant[1]:0,yb=2<la.constant.length?la.constant[2]:0,Bb=3<la.constant.length?la.constant[3]:0)):(bd=O(la.buffer)?ja.createStream(34962,la.buffer):ja.getBuffer(la.buffer),Ic="type"in la?Ba[la.type]:bd.dtype,Lc=!!la.normalized,Fc=la.size|0,pd=la.offset|0,Oc=la.stride|0,sd=la.divisor|0);xc=u.location;Cb=P[xc];if(1===fd){Cb.buffer||p.enableVertexAttribArray(xc);
Jc=Fc||2;if(Cb.type!==Ic||Cb.size!==Jc||Cb.buffer!==bd||Cb.normalized!==Lc||Cb.offset!==pd||Cb.stride!==Oc)p.bindBuffer(34962,bd.buffer),p.vertexAttribPointer(xc,Jc,Ic,Lc,Oc,pd),Cb.type=Ic,Cb.size=Jc,Cb.buffer=bd,Cb.normalized=Lc,Cb.offset=pd,Cb.stride=Oc;Cb.divisor!==sd&&(w.vertexAttribDivisorANGLE(xc,sd),Cb.divisor=sd)}else if(Cb.buffer&&(p.disableVertexAttribArray(xc),Cb.buffer=null),Cb.x!==Fb||Cb.y!==uc||Cb.z!==yb||Cb.w!==Bb)p.vertexAttrib4f(xc,Fb,uc,yb,Bb),Cb.x=Fb,Cb.y=uc,Cb.z=yb,Cb.w=Bb;pa.buffer=
k.positionFractBuffer;mc=!1;Gc=null;gd=0;Xc=!1;ec=Cc=0;Hc=1;pc=0;qc=5126;Sc=eb=fc=nc=0;O(pa)?(mc=!0,Gc=ja.createStream(34962,pa),qc=Gc.dtype):(Gc=ja.getBuffer(pa))?qc=Gc.dtype:"constant"in pa?(Hc=2,"number"===typeof pa.constant?(fc=pa.constant,eb=Sc=nc=0):(fc=0<pa.constant.length?pa.constant[0]:0,eb=1<pa.constant.length?pa.constant[1]:0,Sc=2<pa.constant.length?pa.constant[2]:0,nc=3<pa.constant.length?pa.constant[3]:0)):(Gc=O(pa.buffer)?ja.createStream(34962,pa.buffer):ja.getBuffer(pa.buffer),qc="type"in
pa?Ba[pa.type]:Gc.dtype,Xc=!!pa.normalized,ec=pa.size|0,Cc=pa.offset|0,pc=pa.stride|0,gd=pa.divisor|0);zb=G.location;bb=P[zb];if(1===Hc){bb.buffer||p.enableVertexAttribArray(zb);Mb=ec||2;if(bb.type!==qc||bb.size!==Mb||bb.buffer!==Gc||bb.normalized!==Xc||bb.offset!==Cc||bb.stride!==pc)p.bindBuffer(34962,Gc.buffer),p.vertexAttribPointer(zb,Mb,qc,Xc,pc,Cc),bb.type=qc,bb.size=Mb,bb.buffer=Gc,bb.normalized=Xc,bb.offset=Cc,bb.stride=pc;bb.divisor!==gd&&(w.vertexAttribDivisorANGLE(zb,gd),bb.divisor=gd)}else if(bb.buffer&&
(p.disableVertexAttribArray(zb),bb.buffer=null),bb.x!==fc||bb.y!==eb||bb.z!==Sc||bb.w!==nc)p.vertexAttrib4f(zb,fc,eb,Sc,nc),bb.x=fc,bb.y=eb,bb.z=Sc,bb.w=nc;$a=k.fill;ob=$a[0];Pc=$a[1];Ib=$a[2];Nb=$a[3];v&&Va===ob&&Hb===Pc&&rc===Ib&&jb===Nb||(Va=ob,Hb=Pc,rc=Ib,jb=Nb,p.uniform4f(K.location,ob,Pc,Ib,Nb));Gb=k.scale;Db=Gb[0];hb=Gb[1];v&&xb===Db&&Xb===hb||(xb=Db,Xb=hb,p.uniform2f(ba.location,Db,hb));Ob=k.scaleFract;rb=Ob[0];Pb=Ob[1];v&&Sa===rb&&pb===Pb||(Sa=rb,pb=Pb,p.uniform2f(x.location,rb,Pb));ac=k.translate;
ib=ac[0];Ia=ac[1];v&&qb===ib&&sb===Ia||(qb=ib,sb=Ia,p.uniform2f(T.location,ib,Ia));Ka=k.translateFract;db=Ka[0];La=Ka[1];v&&fb===db&&kb===La||(fb=db,kb=La,p.uniform2f(r.location,db,La));Wa=k.id;v&&ub===Wa||(ub=Wa,p.uniform1f(aa.location,Wa));tb=k.opacity;v&&Pa===tb||(Pa=tb,p.uniform1f(t.location,tb));Bc=y.call(this,d,k,v);Ra=null;(Ra=(Jb=O(Bc))?e.createStream(Bc):e.getElements(Bc))&&p.bindBuffer(34963,Ra.buffer.buffer);if(Eb=Ra?Ra.vertCount:-1)0<Md?Ra?w.drawElementsInstancedANGLE(4,Eb,Ra.type,0<<
(Ra.type-5121>>1),Md):w.drawArraysInstancedANGLE(4,0,Eb,Md):0>Md&&(Ra?p.drawElements(4,Eb,Ra.type,0<<(Ra.type-5121>>1)):p.drawArrays(4,0,Eb)),d.viewportWidth=Pe,d.viewportHeight=Ed,nd&&ja.destroyStream(bd),mc&&ja.destroyStream(Gc),Jb&&e.destroyStream(Ra)}n.dirty=!0;q.setVAO(null);h&&(F.cpuTime+=performance.now()-g)},draw:function(a){var c,b,h,g,w,v,k,f,A,C,y,ga,H,sa,Ha,qa,B,Da,ka,Z,ya,oa;c=E.next;c!==E.cur&&(c?p.bindFramebuffer(36160,c.framebuffer):p.bindFramebuffer(36160,null),E.cur=c);if(n.dirty){c=
D.dither;c!==n.dither&&(c?p.enable(3024):p.disable(3024),n.dither=c);c=D.depth_func;c!==n.depth_func&&(p.depthFunc(c),n.depth_func=c);c=Q[0];v=Q[1];if(c!==z[0]||v!==z[1])p.depthRange(c,v),z[0]=c,z[1]=v;c=D.depth_mask;c!==n.depth_mask&&(p.depthMask(c),n.depth_mask=c);c=ea[0];v=ea[1];b=ea[2];h=ea[3];if(c!==R[0]||v!==R[1]||b!==R[2]||h!==R[3])p.colorMask(c,v,b,h),R[0]=c,R[1]=v,R[2]=b,R[3]=h;c=D.cull_enable;c!==n.cull_enable&&(c?p.enable(2884):p.disable(2884),n.cull_enable=c);c=D.cull_face;c!==n.cull_face&&
(p.cullFace(c),n.cull_face=c);c=D.frontFace;c!==n.frontFace&&(p.frontFace(c),n.frontFace=c);c=D.lineWidth;c!==n.lineWidth&&(p.lineWidth(c),n.lineWidth=c);c=D.polygonOffset_enable;c!==n.polygonOffset_enable&&(c?p.enable(32823):p.disable(32823),n.polygonOffset_enable=c);c=m[0];v=m[1];if(c!==V[0]||v!==V[1])p.polygonOffset(c,v),V[0]=c,V[1]=v;c=D.sample_alpha;c!==n.sample_alpha&&(c?p.enable(32926):p.disable(32926),n.sample_alpha=c);c=D.sample_enable;c!==n.sample_enable&&(c?p.enable(32928):p.disable(32928),
n.sample_enable=c);c=N[0];v=N[1];if(c!==va[0]||v!==va[1])p.sampleCoverage(c,v),va[0]=c,va[1]=v;c=D.stencil_mask;c!==n.stencil_mask&&(p.stencilMask(c),n.stencil_mask=c);c=I[0];v=I[1];b=I[2];if(c!==ca[0]||v!==ca[1]||b!==ca[2])p.stencilFunc(c,v,b),ca[0]=c,ca[1]=v,ca[2]=b;c=ra[0];v=ra[1];b=ra[2];h=ra[3];if(c!==Ca[0]||v!==Ca[1]||b!==Ca[2]||h!==Ca[3])p.stencilOpSeparate(c,v,b,h),Ca[0]=c,Ca[1]=v,Ca[2]=b,Ca[3]=h;c=S[0];v=S[1];b=S[2];h=S[3];if(c!==ma[0]||v!==ma[1]||b!==ma[2]||h!==ma[3])p.stencilOpSeparate(c,
v,b,h),ma[0]=c,ma[1]=v,ma[2]=b,ma[3]=h}c=a.viewport;b=c.x|0;h=c.y|0;g="width"in c?c.width|0:d.framebufferWidth-b;w="height"in c?c.height|0:d.framebufferHeight-h;c=d.viewportWidth;d.viewportWidth=g;v=d.viewportHeight;d.viewportHeight=w;p.viewport(b,h,g,w);fa[0]=b;fa[1]=h;fa[2]=g;fa[3]=w;p.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;p.enable(3042);n.blend_enable=!0;p.blendEquationSeparate(32774,32774);ia[0]=32774;ia[1]=32774;p.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=
1;p.disable(2929);n.depth_enable=!1;w=a.viewport;b=w.x|0;h=w.y|0;g="width"in w?w.width|0:d.framebufferWidth-b;w="height"in w?w.height|0:d.framebufferHeight-h;p.scissor(b,h,g,w);l[0]=b;l[1]=h;l[2]=g;l[3]=w;p.enable(3089);n.scissor_enable=!0;p.disable(2960);n.stencil_enable=!1;if(b=n.profile)k=performance.now(),F.count++;p.useProgram(J.program);h=W.angle_instanced_arrays;q.setVAO(null);la.buffer=a.positionBuffer;g=!1;f=0;A=!1;y=C=0;ga=1;H=0;sa=5126;Da=B=qa=Ha=0;O(la)?(g=!0,w=ja.createStream(34962,la),
sa=w.dtype):(w=ja.getBuffer(la))?sa=w.dtype:"constant"in la?(ga=2,"number"===typeof la.constant?(qa=la.constant,B=Da=Ha=0):(qa=0<la.constant.length?la.constant[0]:0,B=1<la.constant.length?la.constant[1]:0,Da=2<la.constant.length?la.constant[2]:0,Ha=3<la.constant.length?la.constant[3]:0)):(w=O(la.buffer)?ja.createStream(34962,la.buffer):ja.getBuffer(la.buffer),sa="type"in la?Ba[la.type]:w.dtype,A=!!la.normalized,y=la.size|0,C=la.offset|0,H=la.stride|0,f=la.divisor|0);ka=u.location;Z=P[ka];if(1===ga){Z.buffer||
p.enableVertexAttribArray(ka);y=y||2;if(Z.type!==sa||Z.size!==y||Z.buffer!==w||Z.normalized!==A||Z.offset!==C||Z.stride!==H)p.bindBuffer(34962,w.buffer),p.vertexAttribPointer(ka,y,sa,A,H,C),Z.type=sa,Z.size=y,Z.buffer=w,Z.normalized=A,Z.offset=C,Z.stride=H;Z.divisor!==f&&(h.vertexAttribDivisorANGLE(ka,f),Z.divisor=f)}else if(Z.buffer&&(p.disableVertexAttribArray(ka),Z.buffer=null),Z.x!==qa||Z.y!==B||Z.z!==Da||Z.w!==Ha)p.vertexAttrib4f(ka,qa,B,Da,Ha),Z.x=qa,Z.y=B,Z.z=Da,Z.w=Ha;pa.buffer=a.positionFractBuffer;
f=!1;C=0;H=!1;Ha=sa=0;qa=1;ka=0;Z=5126;oa=ya=Da=B=0;O(pa)?(f=!0,A=ja.createStream(34962,pa),Z=A.dtype):(A=ja.getBuffer(pa))?Z=A.dtype:"constant"in pa?(qa=2,"number"===typeof pa.constant?(Da=pa.constant,ya=oa=B=0):(Da=0<pa.constant.length?pa.constant[0]:0,ya=1<pa.constant.length?pa.constant[1]:0,oa=2<pa.constant.length?pa.constant[2]:0,B=3<pa.constant.length?pa.constant[3]:0)):(A=O(pa.buffer)?ja.createStream(34962,pa.buffer):ja.getBuffer(pa.buffer),Z="type"in pa?Ba[pa.type]:A.dtype,H=!!pa.normalized,
Ha=pa.size|0,sa=pa.offset|0,ka=pa.stride|0,C=pa.divisor|0);y=G.location;ga=P[y];if(1===qa){ga.buffer||p.enableVertexAttribArray(y);Ha=Ha||2;if(ga.type!==Z||ga.size!==Ha||ga.buffer!==A||ga.normalized!==H||ga.offset!==sa||ga.stride!==ka)p.bindBuffer(34962,A.buffer),p.vertexAttribPointer(y,Ha,Z,H,ka,sa),ga.type=Z,ga.size=Ha,ga.buffer=A,ga.normalized=H,ga.offset=sa,ga.stride=ka;ga.divisor!==C&&(h.vertexAttribDivisorANGLE(y,C),ga.divisor=C)}else if(ga.buffer&&(p.disableVertexAttribArray(y),ga.buffer=null),
ga.x!==Da||ga.y!==ya||ga.z!==oa||ga.w!==B)p.vertexAttrib4f(y,Da,ya,oa,B),ga.x=Da,ga.y=ya,ga.z=oa,ga.w=B;C=a.fill;p.uniform4f(K.location,C[0],C[1],C[2],C[3]);C=a.scale;p.uniform2f(ba.location,C[0],C[1]);C=a.scaleFract;p.uniform2f(x.location,C[0],C[1]);C=a.translate;p.uniform2f(T.location,C[0],C[1]);C=a.translateFract;p.uniform2f(r.location,C[0],C[1]);p.uniform1f(aa.location,a.id);p.uniform1f(t.location,a.opacity);C=L.call(this,d,a,0);(C=(a=O(C))?e.createStream(C):e.getElements(C))&&p.bindBuffer(34963,
C.buffer.buffer);if(H=C?C.vertCount:-1)sa=U.instances,0<sa?C?h.drawElementsInstancedANGLE(4,H,C.type,0<<(C.type-5121>>1),sa):h.drawArraysInstancedANGLE(4,0,H,sa):0>sa&&(C?p.drawElements(4,H,C.type,0<<(C.type-5121>>1)):p.drawArrays(4,0,H)),n.dirty=!0,q.setVAO(null),d.viewportWidth=c,d.viewportHeight=v,b&&(F.cpuTime+=performance.now()-k),g&&ja.destroyStream(w),f&&ja.destroyStream(A),a&&e.destroyStream(C)},scope:function(l,q,m){var k,p,w,v,M,r,x,I,Q,E,H,sa,Ha,S,z,L,fa,u,R,t,y,N,J,B,G,V,ca,P,ra,va,K,
T,aa,Y,ba,W,ea,ma,na,ia,Ca,ha,Le,Pe,Ed,Be,se,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb;k=l.viewport;p=k.x|0;w=k.y|0;v="width"in k?k.width|0:d.framebufferWidth-p;M="height"in k?k.height|0:d.framebufferHeight-w;r=d.viewportWidth;d.viewportWidth=v;x=d.viewportHeight;d.viewportHeight=M;I=ya[0];ya[0]=p;Q=ya[1];ya[1]=w;E=ya[2];ya[2]=v;H=ya[3];ya[3]=
M;sa=a[0];a[0]=0;Ha=a[1];a[1]=0;S=a[2];a[2]=0;z=a[3];a[3]=0;L=D.blend_enable;D.blend_enable=!0;fa=A[0];A[0]=32774;u=A[1];A[1]=32774;R=cc[0];cc[0]=770;t=cc[1];cc[1]=771;y=cc[2];cc[2]=773;N=cc[3];cc[3]=1;J=D.depth_enable;D.depth_enable=!1;B=l.viewport;G=B.x|0;V=B.y|0;ca="width"in B?B.width|0:d.framebufferWidth-G;P="height"in B?B.height|0:d.framebufferHeight-V;ra=oa[0];oa[0]=G;va=oa[1];oa[1]=V;K=oa[2];oa[2]=ca;T=oa[3];oa[3]=P;aa=D.scissor_enable;D.scissor_enable=!0;Y=D.stencil_enable;D.stencil_enable=
!1;if(ba=n.profile)W=performance.now(),F.count++;ea=f.call(this,d,l,m);ma=null;ma=(na=O(ea))?e.createStream(ea):e.getElements(ea);ia=U.elements;U.elements=ma;Ca=U.offset;U.offset=0;ha=ma?ma.vertCount:-1;Le=U.count;U.count=ha;Pe=U.primitive;U.primitive=4;Ed=l.fill;Be=c[14];c[14]=Ed;se=l.id;Xd=c[31];c[31]=se;Nd=l.opacity;Ad=c[10];c[10]=Nd;nd=d.pixelRatio;bd=c[34];c[34]=nd;sd=l.scale;Lc=c[6];c[6]=sd;pd=l.scaleFract;Fc=c[7];c[7]=pd;fd=l.translate;Oc=c[8];c[8]=fd;Ic=l.translateFract;Bb=c[9];c[9]=Ic;Fb=
h.call(this,d,l,m);uc=c[3];c[3]=Fb;la.buffer=l.positionBuffer;yb=!1;xc=null;Cb=0;Jc=!1;Gc=mc=0;gd=1;Xc=0;Cc=5126;qc=pc=Hc=ec=0;O(la)?(yb=!0,xc=ja.createStream(34962,la),Cc=xc.dtype):(xc=ja.getBuffer(la))?Cc=xc.dtype:"constant"in la?(gd=2,"number"===typeof la.constant?(Hc=la.constant,pc=qc=ec=0):(Hc=0<la.constant.length?la.constant[0]:0,pc=1<la.constant.length?la.constant[1]:0,qc=2<la.constant.length?la.constant[2]:0,ec=3<la.constant.length?la.constant[3]:0)):(xc=O(la.buffer)?ja.createStream(34962,
la.buffer):ja.getBuffer(la.buffer),Cc="type"in la?Ba[la.type]:xc.dtype,Jc=!!la.normalized,Gc=la.size|0,mc=la.offset|0,Xc=la.stride|0,Cb=la.divisor|0);nc=g.buffer;g.buffer=xc;fc=g.divisor;g.divisor=Cb;eb=g.normalized;g.normalized=Jc;Sc=g.offset;g.offset=mc;zb=g.size;g.size=Gc;bb=g.state;g.state=gd;Mb=g.stride;g.stride=Xc;$a=g.type;g.type=Cc;ob=g.w;g.w=ec;Va=g.x;g.x=Hc;Pc=g.y;g.y=pc;Hb=g.z;g.z=qc;pa.buffer=l.positionFractBuffer;Ib=!1;rc=null;Nb=0;jb=!1;Db=Gb=0;xb=1;hb=0;Xb=5126;Pb=Sa=rb=Ob=0;O(pa)?
(Ib=!0,rc=ja.createStream(34962,pa),Xb=rc.dtype):(rc=ja.getBuffer(pa))?Xb=rc.dtype:"constant"in pa?(xb=2,"number"===typeof pa.constant?(rb=pa.constant,Sa=Pb=Ob=0):(rb=0<pa.constant.length?pa.constant[0]:0,Sa=1<pa.constant.length?pa.constant[1]:0,Pb=2<pa.constant.length?pa.constant[2]:0,Ob=3<pa.constant.length?pa.constant[3]:0)):(rc=O(pa.buffer)?ja.createStream(34962,pa.buffer):ja.getBuffer(pa.buffer),Xb="type"in pa?Ba[pa.type]:rc.dtype,jb=!!pa.normalized,Db=pa.size|0,Gb=pa.offset|0,hb=pa.stride|0,
Nb=pa.divisor|0);pb=b.buffer;b.buffer=rc;ac=b.divisor;b.divisor=Nb;ib=b.normalized;b.normalized=jb;qb=b.offset;b.offset=Gb;Ia=b.size;b.size=Db;sb=b.state;b.state=xb;Ka=b.stride;b.stride=hb;db=b.type;b.type=Xb;fb=b.w;b.w=Ob;La=b.x;b.x=rb;kb=b.y;b.y=Sa;Wa=b.z;b.z=Pb;ub=C.vert;C.vert=42;tb=C.frag;C.frag=41;n.dirty=!0;q(d,l,m);d.viewportWidth=r;d.viewportHeight=x;ya[0]=I;ya[1]=Q;ya[2]=E;ya[3]=H;a[0]=sa;a[1]=Ha;a[2]=S;a[3]=z;D.blend_enable=L;A[0]=fa;A[1]=u;cc[0]=R;cc[1]=t;cc[2]=y;cc[3]=N;D.depth_enable=
J;oa[0]=ra;oa[1]=va;oa[2]=K;oa[3]=T;D.scissor_enable=aa;D.stencil_enable=Y;ba&&(F.cpuTime+=performance.now()-W);na&&e.destroyStream(ma);U.elements=ia;U.offset=Ca;U.count=Le;U.primitive=Pe;c[14]=Be;c[31]=Xd;c[10]=Ad;c[34]=bd;c[6]=Lc;c[7]=Fc;c[8]=Oc;c[9]=Bb;c[3]=uc;yb&&ja.destroyStream(xc);g.buffer=nc;g.divisor=fc;g.normalized=eb;g.offset=Sc;g.size=zb;g.state=bb;g.stride=Mb;g.type=$a;g.w=ob;g.x=Va;g.y=Pc;g.z=Hb;Ib&&ja.destroyStream(rc);b.buffer=pb;b.divisor=ac;b.normalized=ib;b.offset=qb;b.size=Ia;
b.state=sb;b.stride=Ka;b.type=db;b.w=fb;b.x=La;b.y=kb;b.z=Wa;C.vert=ub;C.frag=tb;n.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,O,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,cc,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua){var w,v,M,wa,Ea,mb,lc,ga,H,sa,Ha,qa,Aa,Da,ka,Z,ua,Ja,Fa,
gb,da,ha,Zb,Ga,xa,Sb,ef,Cd,qe,Ud,Ae,zd,Ld,ne,fe,Md,ud,de,$d;w=k.attributes;v=k.buffer;M=k.context;wa=k.current;Ea=k.draw;mb=k.elements;lc=k.extensions;ga=k.framebuffer;H=k.gl;sa=k.isBufferArgs;Ha=k.next;qa=k.shader;Aa=k.uniforms;Da=k.vao;ka=Ha.blend_color;Z=wa.blend_color;ua=Ha.blend_equation;Ja=wa.blend_equation;Fa=Ha.blend_func;gb=wa.blend_func;da=Ha.colorMask;ha=wa.colorMask;Zb=Ha.depth_range;Ga=wa.depth_range;xa=Ha.polygonOffset_offset;Sb=wa.polygonOffset_offset;ef=Ha.sample_coverage;Cd=wa.sample_coverage;
qe=Ha.scissor_box;Ud=wa.scissor_box;Ae=Ha.stencil_func;zd=wa.stencil_func;Ld=Ha.stencil_opBack;ne=wa.stencil_opBack;fe=Ha.stencil_opFront;Md=wa.stencil_opFront;ud=Ha.viewport;de=wa.viewport;$d={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,d,h,e,g,q;b=ga.next;b!==ga.cur&&(b?H.bindFramebuffer(36160,b.framebuffer):H.bindFramebuffer(36160,null),ga.cur=b);if(wa.dirty){var k,f,n,p,r,x,E,C,L,u,qa,t,D,y,ka,J,B,G,P,Aa,K,T,aa,
U,ba,W,O,ja,ta,Fa,zb,bb,Mb,$a;k=Ha.dither;k!==wa.dither&&(k?H.enable(3024):H.disable(3024),wa.dither=k);f=ua[0];n=ua[1];if(f!==Ja[0]||n!==Ja[1])H.blendEquationSeparate(f,n),Ja[0]=f,Ja[1]=n;p=Ha.depth_func;p!==wa.depth_func&&(H.depthFunc(p),wa.depth_func=p);r=Zb[0];x=Zb[1];if(r!==Ga[0]||x!==Ga[1])H.depthRange(r,x),Ga[0]=r,Ga[1]=x;E=Ha.depth_mask;E!==wa.depth_mask&&(H.depthMask(E),wa.depth_mask=E);C=da[0];L=da[1];u=da[2];qa=da[3];if(C!==ha[0]||L!==ha[1]||u!==ha[2]||qa!==ha[3])H.colorMask(C,L,u,qa),
ha[0]=C,ha[1]=L,ha[2]=u,ha[3]=qa;t=Ha.cull_enable;t!==wa.cull_enable&&(t?H.enable(2884):H.disable(2884),wa.cull_enable=t);D=Ha.cull_face;D!==wa.cull_face&&(H.cullFace(D),wa.cull_face=D);y=Ha.frontFace;y!==wa.frontFace&&(H.frontFace(y),wa.frontFace=y);ka=Ha.lineWidth;ka!==wa.lineWidth&&(H.lineWidth(ka),wa.lineWidth=ka);J=Ha.polygonOffset_enable;J!==wa.polygonOffset_enable&&(J?H.enable(32823):H.disable(32823),wa.polygonOffset_enable=J);B=xa[0];G=xa[1];if(B!==Sb[0]||G!==Sb[1])H.polygonOffset(B,G),Sb[0]=
B,Sb[1]=G;P=Ha.sample_alpha;P!==wa.sample_alpha&&(P?H.enable(32926):H.disable(32926),wa.sample_alpha=P);Aa=Ha.sample_enable;Aa!==wa.sample_enable&&(Aa?H.enable(32928):H.disable(32928),wa.sample_enable=Aa);K=ef[0];T=ef[1];if(K!==Cd[0]||T!==Cd[1])H.sampleCoverage(K,T),Cd[0]=K,Cd[1]=T;aa=Ha.stencil_mask;aa!==wa.stencil_mask&&(H.stencilMask(aa),wa.stencil_mask=aa);U=Ae[0];ba=Ae[1];W=Ae[2];if(U!==zd[0]||ba!==zd[1]||W!==zd[2])H.stencilFunc(U,ba,W),zd[0]=U,zd[1]=ba,zd[2]=W;O=fe[0];ja=fe[1];ta=fe[2];Fa=fe[3];
if(O!==Md[0]||ja!==Md[1]||ta!==Md[2]||Fa!==Md[3])H.stencilOpSeparate(O,ja,ta,Fa),Md[0]=O,Md[1]=ja,Md[2]=ta,Md[3]=Fa;zb=Ld[0];bb=Ld[1];Mb=Ld[2];$a=Ld[3];if(zb!==ne[0]||bb!==ne[1]||Mb!==ne[2]||$a!==ne[3])H.stencilOpSeparate(zb,bb,Mb,$a),ne[0]=zb,ne[1]=bb,ne[2]=Mb,ne[3]=$a}H.blendColor(0,0,0,1);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=1;H.enable(3042);wa.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;H.disable(2929);wa.depth_enable=!1;H.enable(3089);wa.scissor_enable=!0;H.disable(2960);
wa.stencil_enable=!1;if(d=wa.profile)h=performance.now(),F.count+=c;H.useProgram(na.program);e=lc.angle_instanced_arrays;var ob;Da.setVAO(null);H.uniform1i(I.location,!1);H.uniform1i(Ca.location,V.bind());ob=Ea.instances;for(g=0;g<c;++g){q=a[g];var Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,qe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,
Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ud,we,jd,bf,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf;Va=q.viewport;Pc=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:M.framebufferWidth-Pc;rc="height"in Va?Va.height|0:M.framebufferHeight-Hb;Nb=M.viewportWidth;
M.viewportWidth=Ib;jb=M.viewportHeight;M.viewportHeight=rc;H.viewport(Pc,Hb,Ib,rc);de[0]=Pc;de[1]=Hb;de[2]=Ib;de[3]=rc;Gb=q.viewport;Db=Gb.x|0;xb=Gb.y|0;hb="width"in Gb?Gb.width|0:M.framebufferWidth-Db;Xb="height"in Gb?Gb.height|0:M.framebufferHeight-xb;H.scissor(Db,xb,hb,Xb);Ud[0]=Db;Ud[1]=xb;Ud[2]=hb;Ud[3]=Xb;Ob=A.call(this,M,q,g);rb=!1;Sa=null;Pb=0;pb=!1;ib=ac=0;qb=1;Ia=0;sb=5126;La=fb=db=Ka=0;sa(Ob)?(rb=!0,Sa=v.createStream(34962,Ob),sb=Sa.dtype):(Sa=v.getBuffer(Ob))?sb=Sa.dtype:"constant"in Ob?
(qb=2,"number"===typeof Ob.constant?(db=Ob.constant,fb=La=Ka=0):(db=0<Ob.constant.length?Ob.constant[0]:0,fb=1<Ob.constant.length?Ob.constant[1]:0,La=2<Ob.constant.length?Ob.constant[2]:0,Ka=3<Ob.constant.length?Ob.constant[3]:0)):(Sa=sa(Ob.buffer)?v.createStream(34962,Ob.buffer):v.getBuffer(Ob.buffer),sb="type"in Ob?$d[Ob.type]:Sa.dtype,pb=!!Ob.normalized,ib=Ob.size|0,ac=Ob.offset|0,Ia=Ob.stride|0,Pb=Ob.divisor|0);kb=Ma.location;Wa=w[kb];if(1===qb){Wa.buffer||H.enableVertexAttribArray(kb);ub=ib||
1;if(Wa.type!==sb||Wa.size!==ub||Wa.buffer!==Sa||Wa.normalized!==pb||Wa.offset!==ac||Wa.stride!==Ia)H.bindBuffer(34962,Sa.buffer),H.vertexAttribPointer(kb,ub,sb,pb,Ia,ac),Wa.type=sb,Wa.size=ub,Wa.buffer=Sa,Wa.normalized=pb,Wa.offset=ac,Wa.stride=Ia;Wa.divisor!==Pb&&(e.vertexAttribDivisorANGLE(kb,Pb),Wa.divisor=Pb)}else if(Wa.buffer&&(H.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==db||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)H.vertexAttrib4f(kb,db,fb,La,Ka),Wa.x=db,Wa.y=fb,Wa.z=La,Wa.w=Ka;tb=ia.call(this,
M,q,g);Pa=!1;Bc=null;Ra=0;Jb=!1;Na=Eb=0;Fd=1;Ya=0;Kb=5126;Yb=Oa=lb=Lb=0;sa(tb)?(Pa=!0,Bc=v.createStream(34962,tb),Kb=Bc.dtype):(Bc=v.getBuffer(tb))?Kb=Bc.dtype:"constant"in tb?(Fd=2,"number"===typeof tb.constant?(lb=tb.constant,Oa=Yb=Lb=0):(lb=0<tb.constant.length?tb.constant[0]:0,Oa=1<tb.constant.length?tb.constant[1]:0,Yb=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Bc=sa(tb.buffer)?v.createStream(34962,tb.buffer):v.getBuffer(tb.buffer),Kb="type"in tb?$d[tb.type]:
Bc.dtype,Jb=!!tb.normalized,Na=tb.size|0,Eb=tb.offset|0,Ya=tb.stride|0,Ra=tb.divisor|0);Qa=$b.location;vb=w[Qa];if(1===Fd){vb.buffer||H.enableVertexAttribArray(Qa);wb=Na||1;if(vb.type!==Kb||vb.size!==wb||vb.buffer!==Bc||vb.normalized!==Jb||vb.offset!==Eb||vb.stride!==Ya)H.bindBuffer(34962,Bc.buffer),H.vertexAttribPointer(Qa,wb,Kb,Jb,Ya,Eb),vb.type=Kb,vb.size=wb,vb.buffer=Bc,vb.normalized=Jb,vb.offset=Eb,vb.stride=Ya;vb.divisor!==Ra&&(e.vertexAttribDivisorANGLE(Qa,Ra),vb.divisor=Ra)}else if(vb.buffer&&
(H.disableVertexAttribArray(Qa),vb.buffer=null),vb.x!==lb||vb.y!==Oa||vb.z!==Yb||vb.w!==Lb)H.vertexAttrib4f(Qa,lb,Oa,Yb,Lb),vb.x=lb,vb.y=Oa,vb.z=Yb,vb.w=Lb;Ta=cc.call(this,M,q,g);nb=!1;gc=null;Ec=0;vc=!1;jc=ab=0;Tc=1;Xa=0;ld=5126;tc=Ub=Za=Ab=0;sa(Ta)?(nb=!0,gc=v.createStream(34962,Ta),ld=gc.dtype):(gc=v.getBuffer(Ta))?ld=gc.dtype:"constant"in Ta?(Tc=2,"number"===typeof Ta.constant?(Za=Ta.constant,Ub=tc=Ab=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Ub=1<Ta.constant.length?Ta.constant[1]:0,tc=2<Ta.constant.length?
Ta.constant[2]:0,Ab=3<Ta.constant.length?Ta.constant[3]:0)):(gc=sa(Ta.buffer)?v.createStream(34962,Ta.buffer):v.getBuffer(Ta.buffer),ld="type"in Ta?$d[Ta.type]:gc.dtype,vc=!!Ta.normalized,jc=Ta.size|0,ab=Ta.offset|0,Xa=Ta.stride|0,Ec=Ta.divisor|0);Vb=X.location;Qb=w[Vb];if(1===Tc){Qb.buffer||H.enableVertexAttribArray(Vb);Kc=jc||1;if(Qb.type!==ld||Qb.size!==Kc||Qb.buffer!==gc||Qb.normalized!==vc||Qb.offset!==ab||Qb.stride!==Xa)H.bindBuffer(34962,gc.buffer),H.vertexAttribPointer(Vb,Kc,ld,vc,Xa,ab),
Qb.type=ld,Qb.size=Kc,Qb.buffer=gc,Qb.normalized=vc,Qb.offset=ab,Qb.stride=Xa;Qb.divisor!==Ec&&(e.vertexAttribDivisorANGLE(Vb,Ec),Qb.divisor=Ec)}else if(Qb.buffer&&(H.disableVertexAttribArray(Vb),Qb.buffer=null),Qb.x!==Za||Qb.y!==Ub||Qb.z!==tc||Qb.w!==Ab)H.vertexAttrib4f(Vb,Za,Ub,tc,Ab),Qb.x=Za,Qb.y=Ub,Qb.z=tc,Qb.w=Ab;Rb=Y.call(this,M,q,g);qd=!1;Dc=null;qe=0;Mc=!1;vd=Yc=0;oc=1;wc=0;hc=5126;Wb=Tb=sc=cb=0;sa(Rb)?(qd=!0,Dc=v.createStream(34962,Rb),hc=Dc.dtype):(Dc=v.getBuffer(Rb))?hc=Dc.dtype:"constant"in
Rb?(oc=2,"number"===typeof Rb.constant?(sc=Rb.constant,Tb=Wb=cb=0):(sc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Wb=2<Rb.constant.length?Rb.constant[2]:0,cb=3<Rb.constant.length?Rb.constant[3]:0)):(Dc=sa(Rb.buffer)?v.createStream(34962,Rb.buffer):v.getBuffer(Rb.buffer),hc="type"in Rb?$d[Rb.type]:Dc.dtype,Mc=!!Rb.normalized,vd=Rb.size|0,Yc=Rb.offset|0,wc=Rb.stride|0,qe=Rb.divisor|0);dc=Ua.location;ic=w[dc];if(1===oc){ic.buffer||H.enableVertexAttribArray(dc);yc=
vd||1;if(ic.type!==hc||ic.size!==yc||ic.buffer!==Dc||ic.normalized!==Mc||ic.offset!==Yc||ic.stride!==wc)H.bindBuffer(34962,Dc.buffer),H.vertexAttribPointer(dc,yc,hc,Mc,wc,Yc),ic.type=hc,ic.size=yc,ic.buffer=Dc,ic.normalized=Mc,ic.offset=Yc,ic.stride=wc;ic.divisor!==qe&&(e.vertexAttribDivisorANGLE(dc,qe),ic.divisor=qe)}else if(ic.buffer&&(H.disableVertexAttribArray(dc),ic.buffer=null),ic.x!==sc||ic.y!==Tb||ic.z!==Wb||ic.w!==cb)H.vertexAttrib4f(dc,sc,Tb,Wb,cb),ic.x=sc,ic.y=Tb,ic.z=Wb,ic.w=cb;Ac=ea.call(this,
M,q,g);cd=!1;Qc=null;Rc=0;Uc=!1;md=Zc=0;dd=1;$c=0;kc=5126;ed=Wc=ad=bc=0;sa(Ac)?(cd=!0,Qc=v.createStream(34962,Ac),kc=Qc.dtype):(Qc=v.getBuffer(Ac))?kc=Qc.dtype:"constant"in Ac?(dd=2,"number"===typeof Ac.constant?(ad=Ac.constant,Wc=ed=bc=0):(ad=0<Ac.constant.length?Ac.constant[0]:0,Wc=1<Ac.constant.length?Ac.constant[1]:0,ed=2<Ac.constant.length?Ac.constant[2]:0,bc=3<Ac.constant.length?Ac.constant[3]:0)):(Qc=sa(Ac.buffer)?v.createStream(34962,Ac.buffer):v.getBuffer(Ac.buffer),kc="type"in Ac?$d[Ac.type]:
Qc.dtype,Uc=!!Ac.normalized,md=Ac.size|0,Zc=Ac.offset|0,$c=Ac.stride|0,Rc=Ac.divisor|0);zc=la.location;id=w[zc];if(1===dd){id.buffer||H.enableVertexAttribArray(zc);rd=md||1;if(id.type!==kc||id.size!==rd||id.buffer!==Qc||id.normalized!==Uc||id.offset!==Zc||id.stride!==$c)H.bindBuffer(34962,Qc.buffer),H.vertexAttribPointer(zc,rd,kc,Uc,$c,Zc),id.type=kc,id.size=rd,id.buffer=Qc,id.normalized=Uc,id.offset=Zc,id.stride=$c;id.divisor!==Rc&&(e.vertexAttribDivisorANGLE(zc,Rc),id.divisor=Rc)}else if(id.buffer&&
(H.disableVertexAttribArray(zc),id.buffer=null),id.x!==ad||id.y!==Wc||id.z!==ed||id.w!==bc)H.vertexAttrib4f(zc,ad,Wc,ed,bc),id.x=ad,id.y=Wc,id.z=ed,id.w=bc;ud=R.call(this,M,q,g);we=!1;jd=null;bf=0;Od=!1;ie=Vd=0;Yd=1;Id=0;Gd=5126;td=wd=Vc=od=0;sa(ud)?(we=!0,jd=v.createStream(34962,ud),Gd=jd.dtype):(jd=v.getBuffer(ud))?Gd=jd.dtype:"constant"in ud?(Yd=2,"number"===typeof ud.constant?(Vc=ud.constant,wd=td=od=0):(Vc=0<ud.constant.length?ud.constant[0]:0,wd=1<ud.constant.length?ud.constant[1]:0,td=2<ud.constant.length?
ud.constant[2]:0,od=3<ud.constant.length?ud.constant[3]:0)):(jd=sa(ud.buffer)?v.createStream(34962,ud.buffer):v.getBuffer(ud.buffer),Gd="type"in ud?$d[ud.type]:jd.dtype,Od=!!ud.normalized,ie=ud.size|0,Vd=ud.offset|0,Id=ud.stride|0,bf=ud.divisor|0);kd=oa.location;xd=w[kd];if(1===Yd){xd.buffer||H.enableVertexAttribArray(kd);Bd=ie||1;if(xd.type!==Gd||xd.size!==Bd||xd.buffer!==jd||xd.normalized!==Od||xd.offset!==Vd||xd.stride!==Id)H.bindBuffer(34962,jd.buffer),H.vertexAttribPointer(kd,Bd,Gd,Od,Id,Vd),
xd.type=Gd,xd.size=Bd,xd.buffer=jd,xd.normalized=Od,xd.offset=Vd,xd.stride=Id;xd.divisor!==bf&&(e.vertexAttribDivisorANGLE(kd,bf),xd.divisor=bf)}else if(xd.buffer&&(H.disableVertexAttribArray(kd),xd.buffer=null),xd.x!==Vc||xd.y!==wd||xd.z!==td||xd.w!==od)H.vertexAttrib4f(kd,Vc,wd,td,od),xd.x=Vc,xd.y=wd,xd.z=td,xd.w=od;Dd=Q.call(this,M,q,g);ge=!1;je=null;xe=0;ke=!1;ee=he=0;ye=1;be=0;le=5126;pe=te=hd=Nc=0;sa(Dd)?(ge=!0,je=v.createStream(34962,Dd),le=je.dtype):(je=v.getBuffer(Dd))?le=je.dtype:"constant"in
Dd?(ye=2,"number"===typeof Dd.constant?(hd=Dd.constant,te=pe=Nc=0):(hd=0<Dd.constant.length?Dd.constant[0]:0,te=1<Dd.constant.length?Dd.constant[1]:0,pe=2<Dd.constant.length?Dd.constant[2]:0,Nc=3<Dd.constant.length?Dd.constant[3]:0)):(je=sa(Dd.buffer)?v.createStream(34962,Dd.buffer):v.getBuffer(Dd.buffer),le="type"in Dd?$d[Dd.type]:je.dtype,ke=!!Dd.normalized,ee=Dd.size|0,he=Dd.offset|0,be=Dd.stride|0,xe=Dd.divisor|0);Jd=l.location;Pd=w[Jd];if(1===ye){Pd.buffer||H.enableVertexAttribArray(Jd);Qd=ee||
4;if(Pd.type!==le||Pd.size!==Qd||Pd.buffer!==je||Pd.normalized!==ke||Pd.offset!==he||Pd.stride!==be)H.bindBuffer(34962,je.buffer),H.vertexAttribPointer(Jd,Qd,le,ke,be,he),Pd.type=le,Pd.size=Qd,Pd.buffer=je,Pd.normalized=ke,Pd.offset=he,Pd.stride=be;Pd.divisor!==xe&&(e.vertexAttribDivisorANGLE(Jd,xe),Pd.divisor=xe)}else if(Pd.buffer&&(H.disableVertexAttribArray(Jd),Pd.buffer=null),Pd.x!==hd||Pd.y!==te||Pd.z!==pe||Pd.w!==Nc)H.vertexAttrib4f(Jd,hd,te,pe,Nc),Pd.x=hd,Pd.y=te,Pd.z=pe,Pd.w=Nc;Rd=z.call(this,
M,q,g);me=!1;ze=null;Qe=0;re=!1;Se=Re=0;Me=1;ue=0;Ee=5126;Fe=Ie=He=Ge=0;sa(Rd)?(me=!0,ze=v.createStream(34962,Rd),Ee=ze.dtype):(ze=v.getBuffer(Rd))?Ee=ze.dtype:"constant"in Rd?(Me=2,"number"===typeof Rd.constant?(He=Rd.constant,Ie=Fe=Ge=0):(He=0<Rd.constant.length?Rd.constant[0]:0,Ie=1<Rd.constant.length?Rd.constant[1]:0,Fe=2<Rd.constant.length?Rd.constant[2]:0,Ge=3<Rd.constant.length?Rd.constant[3]:0)):(ze=sa(Rd.buffer)?v.createStream(34962,Rd.buffer):v.getBuffer(Rd.buffer),Ee="type"in Rd?$d[Rd.type]:
ze.dtype,re=!!Rd.normalized,Se=Rd.size|0,Re=Rd.offset|0,ue=Rd.stride|0,Qe=Rd.divisor|0);Kd=va.location;Wd=w[Kd];if(1===Me){Wd.buffer||H.enableVertexAttribArray(Kd);ae=Se||4;if(Wd.type!==Ee||Wd.size!==ae||Wd.buffer!==ze||Wd.normalized!==re||Wd.offset!==Re||Wd.stride!==ue)H.bindBuffer(34962,ze.buffer),H.vertexAttribPointer(Kd,ae,Ee,re,ue,Re),Wd.type=Ee,Wd.size=ae,Wd.buffer=ze,Wd.normalized=re,Wd.offset=Re,Wd.stride=ue;Wd.divisor!==Qe&&(e.vertexAttribDivisorANGLE(Kd,Qe),Wd.divisor=Qe)}else if(Wd.buffer&&
(H.disableVertexAttribArray(Kd),Wd.buffer=null),Wd.x!==He||Wd.y!==Ie||Wd.z!==Fe||Wd.w!==Ge)H.vertexAttrib4f(Kd,He,Ie,Fe,Ge),Wd.x=He,Wd.y=Ie,Wd.z=Fe,Wd.w=Ge;ce=m.call(this,M,q,g);Je=!1;Hd=null;Sd=0;Ce=!1;af=Ke=0;$e=1;Te=0;Ne=5126;Ve=Ue=Xe=Ze=0;sa(ce)?(Je=!0,Hd=v.createStream(34962,ce),Ne=Hd.dtype):(Hd=v.getBuffer(ce))?Ne=Hd.dtype:"constant"in ce?($e=2,"number"===typeof ce.constant?(Xe=ce.constant,Ue=Ve=Ze=0):(Xe=0<ce.constant.length?ce.constant[0]:0,Ue=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?
ce.constant[2]:0,Ze=3<ce.constant.length?ce.constant[3]:0)):(Hd=sa(ce.buffer)?v.createStream(34962,ce.buffer):v.getBuffer(ce.buffer),Ne="type"in ce?$d[ce.type]:Hd.dtype,Ce=!!ce.normalized,af=ce.size|0,Ke=ce.offset|0,Te=ce.stride|0,Sd=ce.divisor|0);Td=ca.location;Zd=w[Td];if(1===$e){Zd.buffer||H.enableVertexAttribArray(Td);We=af||1;if(Zd.type!==Ne||Zd.size!==We||Zd.buffer!==Hd||Zd.normalized!==Ce||Zd.offset!==Ke||Zd.stride!==Te)H.bindBuffer(34962,Hd.buffer),H.vertexAttribPointer(Td,We,Ne,Ce,Te,Ke),
Zd.type=Ne,Zd.size=We,Zd.buffer=Hd,Zd.normalized=Ce,Zd.offset=Ke,Zd.stride=Te;Zd.divisor!==Sd&&(e.vertexAttribDivisorANGLE(Td,Sd),Zd.divisor=Sd)}else if(Zd.buffer&&(H.disableVertexAttribArray(Td),Zd.buffer=null),Zd.x!==Xe||Zd.y!==Ue||Zd.z!==Ve||Zd.w!==Ze)H.vertexAttrib4f(Td,Xe,Ue,Ve,Ze),Zd.x=Xe,Zd.y=Ue,Zd.z=Ve,Zd.w=Ze;jf=M.pixelRatio;g&&nf===jf||(nf=jf,H.uniform1f(ya.location,jf));ff=q.scale;kf=ff[0];mf=ff[1];g&&lf===kf&&rf===mf||(lf=kf,rf=mf,H.uniform2f(fa.location,kf,mf));of=q.scaleFract;sf=of[0];
Cf=of[1];g&&Bf===sf&&Oe===Cf||(Bf=sf,Oe=Cf,H.uniform2f(Ba.location,sf,Cf));De=q.translate;pf=De[0];Df=De[1];g&&qf===pf&&Hf===Df||(qf=pf,Hf=Df,H.uniform2f(pa.location,pf,Df));Af=q.translateFract;Ef=Af[0];wf=Af[1];g&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,H.uniform2f(za.location,Ef,wf));vf=N.call(this,M,q,g);yf=vf[0];Jf=vf[1];g&&zf===yf&&Kf===Jf||(zf=yf,Kf=Jf,H.uniform2f(ra.location,yf,Jf));Lf=q.opacity;g&&Mf===Lf||(Mf=Lf,H.uniform1f(ma.location,Lf));(tf=q.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Rf=tf._texture;H.uniform1i(S.location,Rf.bind());If=q.elements;uf=null;(uf=(dg=sa(If))?mb.createStream(If):mb.getElements(If))&&H.bindBuffer(34963,uf.buffer.buffer);Sf=q.offset;if(Tf=q.count)0<ob?uf?e.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),ob):e.drawArraysInstancedANGLE(0,Sf,Tf,ob):0>ob&&(uf?H.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):H.drawArrays(0,Sf,Tf)),M.viewportWidth=Nb,M.viewportHeight=jb,rb&&v.destroyStream(Sa),Pa&&v.destroyStream(Bc),nb&&v.destroyStream(gc),
qd&&v.destroyStream(Dc),cd&&v.destroyStream(Qc),we&&v.destroyStream(jd),ge&&v.destroyStream(je),me&&v.destroyStream(ze),Je&&v.destroyStream(Hd),Rf.unbind(),dg&&mb.destroyStream(uf)}V.unbind();wa.dirty=!0;Da.setVAO(null);d&&(F.cpuTime+=performance.now()-h)},draw:function(a){var c,d,e,q,m,k,n,p,r,A,x,E,Q,z,C,qa,R,D,ka,N,G,V,P,Aa,T,U,Y,ba,W,ea,O,ja,na,ia,ta,Fa,cc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,ud,Ya,Kb,Lb,lb,
Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,qe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,bf,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue;c=ga.next;c!==ga.cur&&(c?H.bindFramebuffer(36160,c.framebuffer):H.bindFramebuffer(36160,null),ga.cur=c);if(wa.dirty){var Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,
kf,lf,mf,rf,of,sf;Ee=Ha.dither;Ee!==wa.dither&&(Ee?H.enable(3024):H.disable(3024),wa.dither=Ee);Ge=ua[0];He=ua[1];if(Ge!==Ja[0]||He!==Ja[1])H.blendEquationSeparate(Ge,He),Ja[0]=Ge,Ja[1]=He;Ie=Ha.depth_func;Ie!==wa.depth_func&&(H.depthFunc(Ie),wa.depth_func=Ie);Fe=Zb[0];Kd=Zb[1];if(Fe!==Ga[0]||Kd!==Ga[1])H.depthRange(Fe,Kd),Ga[0]=Fe,Ga[1]=Kd;Wd=Ha.depth_mask;Wd!==wa.depth_mask&&(H.depthMask(Wd),wa.depth_mask=Wd);ae=da[0];ce=da[1];Je=da[2];Hd=da[3];if(ae!==ha[0]||ce!==ha[1]||Je!==ha[2]||Hd!==ha[3])H.colorMask(ae,
ce,Je,Hd),ha[0]=ae,ha[1]=ce,ha[2]=Je,ha[3]=Hd;Sd=Ha.cull_enable;Sd!==wa.cull_enable&&(Sd?H.enable(2884):H.disable(2884),wa.cull_enable=Sd);Ce=Ha.cull_face;Ce!==wa.cull_face&&(H.cullFace(Ce),wa.cull_face=Ce);Ke=Ha.frontFace;Ke!==wa.frontFace&&(H.frontFace(Ke),wa.frontFace=Ke);af=Ha.lineWidth;af!==wa.lineWidth&&(H.lineWidth(af),wa.lineWidth=af);$e=Ha.polygonOffset_enable;$e!==wa.polygonOffset_enable&&($e?H.enable(32823):H.disable(32823),wa.polygonOffset_enable=$e);Te=xa[0];Ne=xa[1];if(Te!==Sb[0]||Ne!==
Sb[1])H.polygonOffset(Te,Ne),Sb[0]=Te,Sb[1]=Ne;Ze=Ha.sample_alpha;Ze!==wa.sample_alpha&&(Ze?H.enable(32926):H.disable(32926),wa.sample_alpha=Ze);Xe=Ha.sample_enable;Xe!==wa.sample_enable&&(Xe?H.enable(32928):H.disable(32928),wa.sample_enable=Xe);Ue=ef[0];Ve=ef[1];if(Ue!==Cd[0]||Ve!==Cd[1])H.sampleCoverage(Ue,Ve),Cd[0]=Ue,Cd[1]=Ve;Td=Ha.stencil_mask;Td!==wa.stencil_mask&&(H.stencilMask(Td),wa.stencil_mask=Td);Zd=Ae[0];We=Ae[1];jf=Ae[2];if(Zd!==zd[0]||We!==zd[1]||jf!==zd[2])H.stencilFunc(Zd,We,jf),
zd[0]=Zd,zd[1]=We,zd[2]=jf;nf=fe[0];ff=fe[1];kf=fe[2];lf=fe[3];if(nf!==Md[0]||ff!==Md[1]||kf!==Md[2]||lf!==Md[3])H.stencilOpSeparate(nf,ff,kf,lf),Md[0]=nf,Md[1]=ff,Md[2]=kf,Md[3]=lf;mf=Ld[0];rf=Ld[1];of=Ld[2];sf=Ld[3];if(mf!==ne[0]||rf!==ne[1]||of!==ne[2]||sf!==ne[3])H.stencilOpSeparate(mf,rf,of,sf),ne[0]=mf,ne[1]=rf,ne[2]=of,ne[3]=sf}d=a.viewport;e=d.x|0;q=d.y|0;m="width"in d?d.width|0:M.framebufferWidth-e;k="height"in d?d.height|0:M.framebufferHeight-q;n=M.viewportWidth;M.viewportWidth=m;p=M.viewportHeight;
M.viewportHeight=k;H.viewport(e,q,m,k);de[0]=e;de[1]=q;de[2]=m;de[3]=k;H.blendColor(0,0,0,1);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=1;H.enable(3042);wa.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;H.disable(2929);wa.depth_enable=!1;r=a.viewport;A=r.x|0;x=r.y|0;E="width"in r?r.width|0:M.framebufferWidth-A;Q="height"in r?r.height|0:M.framebufferHeight-x;H.scissor(A,x,E,Q);Ud[0]=A;Ud[1]=x;Ud[2]=E;Ud[3]=Q;H.enable(3089);wa.scissor_enable=!0;H.disable(2960);wa.stencil_enable=
!1;if(z=wa.profile)C=performance.now(),F.count++;H.useProgram(J.program);qa=lc.angle_instanced_arrays;Da.setVAO(null);R=L.call(this,M,a,0);D=!1;ka=null;N=0;G=!1;P=V=0;Aa=1;T=0;U=5126;ea=W=ba=Y=0;sa(R)?(D=!0,ka=v.createStream(34962,R),U=ka.dtype):(ka=v.getBuffer(R))?U=ka.dtype:"constant"in R?(Aa=2,"number"===typeof R.constant?(ba=R.constant,W=ea=Y=0):(ba=0<R.constant.length?R.constant[0]:0,W=1<R.constant.length?R.constant[1]:0,ea=2<R.constant.length?R.constant[2]:0,Y=3<R.constant.length?R.constant[3]:
0)):(ka=sa(R.buffer)?v.createStream(34962,R.buffer):v.getBuffer(R.buffer),U="type"in R?$d[R.type]:ka.dtype,G=!!R.normalized,P=R.size|0,V=R.offset|0,T=R.stride|0,N=R.divisor|0);O=Ma.location;ja=w[O];if(1===Aa){ja.buffer||H.enableVertexAttribArray(O);na=P||1;if(ja.type!==U||ja.size!==na||ja.buffer!==ka||ja.normalized!==G||ja.offset!==V||ja.stride!==T)H.bindBuffer(34962,ka.buffer),H.vertexAttribPointer(O,na,U,G,T,V),ja.type=U,ja.size=na,ja.buffer=ka,ja.normalized=G,ja.offset=V,ja.stride=T;ja.divisor!==
N&&(qa.vertexAttribDivisorANGLE(O,N),ja.divisor=N)}else if(ja.buffer&&(H.disableVertexAttribArray(O),ja.buffer=null),ja.x!==ba||ja.y!==W||ja.z!==ea||ja.w!==Y)H.vertexAttrib4f(O,ba,W,ea,Y),ja.x=ba,ja.y=W,ja.z=ea,ja.w=Y;ia=f.call(this,M,a,0);ta=!1;Fa=null;cc=0;zb=!1;Mb=bb=0;$a=1;ob=0;Va=5126;rc=Ib=Hb=Pc=0;sa(ia)?(ta=!0,Fa=v.createStream(34962,ia),Va=Fa.dtype):(Fa=v.getBuffer(ia))?Va=Fa.dtype:"constant"in ia?($a=2,"number"===typeof ia.constant?(Hb=ia.constant,Ib=rc=Pc=0):(Hb=0<ia.constant.length?ia.constant[0]:
0,Ib=1<ia.constant.length?ia.constant[1]:0,rc=2<ia.constant.length?ia.constant[2]:0,Pc=3<ia.constant.length?ia.constant[3]:0)):(Fa=sa(ia.buffer)?v.createStream(34962,ia.buffer):v.getBuffer(ia.buffer),Va="type"in ia?$d[ia.type]:Fa.dtype,zb=!!ia.normalized,Mb=ia.size|0,bb=ia.offset|0,ob=ia.stride|0,cc=ia.divisor|0);Nb=$b.location;jb=w[Nb];if(1===$a){jb.buffer||H.enableVertexAttribArray(Nb);Gb=Mb||1;if(jb.type!==Va||jb.size!==Gb||jb.buffer!==Fa||jb.normalized!==zb||jb.offset!==bb||jb.stride!==ob)H.bindBuffer(34962,
Fa.buffer),H.vertexAttribPointer(Nb,Gb,Va,zb,ob,bb),jb.type=Va,jb.size=Gb,jb.buffer=Fa,jb.normalized=zb,jb.offset=bb,jb.stride=ob;jb.divisor!==cc&&(qa.vertexAttribDivisorANGLE(Nb,cc),jb.divisor=cc)}else if(jb.buffer&&(H.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==Ib||jb.z!==rc||jb.w!==Pc)H.vertexAttrib4f(Nb,Hb,Ib,rc,Pc),jb.x=Hb,jb.y=Ib,jb.z=rc,jb.w=Pc;Db=h.call(this,M,a,0);xb=!1;hb=null;Xb=0;Ob=!1;Sa=rb=0;Pb=1;pb=0;ac=5126;sb=Ia=qb=ib=0;sa(Db)?(xb=!0,hb=v.createStream(34962,Db),
ac=hb.dtype):(hb=v.getBuffer(Db))?ac=hb.dtype:"constant"in Db?(Pb=2,"number"===typeof Db.constant?(qb=Db.constant,Ia=sb=ib=0):(qb=0<Db.constant.length?Db.constant[0]:0,Ia=1<Db.constant.length?Db.constant[1]:0,sb=2<Db.constant.length?Db.constant[2]:0,ib=3<Db.constant.length?Db.constant[3]:0)):(hb=sa(Db.buffer)?v.createStream(34962,Db.buffer):v.getBuffer(Db.buffer),ac="type"in Db?$d[Db.type]:hb.dtype,Ob=!!Db.normalized,Sa=Db.size|0,rb=Db.offset|0,pb=Db.stride|0,Xb=Db.divisor|0);Ka=X.location;db=w[Ka];
if(1===Pb){db.buffer||H.enableVertexAttribArray(Ka);fb=Sa||1;if(db.type!==ac||db.size!==fb||db.buffer!==hb||db.normalized!==Ob||db.offset!==rb||db.stride!==pb)H.bindBuffer(34962,hb.buffer),H.vertexAttribPointer(Ka,fb,ac,Ob,pb,rb),db.type=ac,db.size=fb,db.buffer=hb,db.normalized=Ob,db.offset=rb,db.stride=pb;db.divisor!==Xb&&(qa.vertexAttribDivisorANGLE(Ka,Xb),db.divisor=Xb)}else if(db.buffer&&(H.disableVertexAttribArray(Ka),db.buffer=null),db.x!==qb||db.y!==Ia||db.z!==sb||db.w!==ib)H.vertexAttrib4f(Ka,
qb,Ia,sb,ib),db.x=qb,db.y=Ia,db.z=sb,db.w=ib;La=g.call(this,M,a,0);kb=!1;Wa=null;ub=0;tb=!1;Bc=Pa=0;Ra=1;Jb=0;Eb=5126;Kb=Ya=ud=Na=0;sa(La)?(kb=!0,Wa=v.createStream(34962,La),Eb=Wa.dtype):(Wa=v.getBuffer(La))?Eb=Wa.dtype:"constant"in La?(Ra=2,"number"===typeof La.constant?(ud=La.constant,Ya=Kb=Na=0):(ud=0<La.constant.length?La.constant[0]:0,Ya=1<La.constant.length?La.constant[1]:0,Kb=2<La.constant.length?La.constant[2]:0,Na=3<La.constant.length?La.constant[3]:0)):(Wa=sa(La.buffer)?v.createStream(34962,
La.buffer):v.getBuffer(La.buffer),Eb="type"in La?$d[La.type]:Wa.dtype,tb=!!La.normalized,Bc=La.size|0,Pa=La.offset|0,Jb=La.stride|0,ub=La.divisor|0);Lb=Ua.location;lb=w[Lb];if(1===Ra){lb.buffer||H.enableVertexAttribArray(Lb);Oa=Bc||1;if(lb.type!==Eb||lb.size!==Oa||lb.buffer!==Wa||lb.normalized!==tb||lb.offset!==Pa||lb.stride!==Jb)H.bindBuffer(34962,Wa.buffer),H.vertexAttribPointer(Lb,Oa,Eb,tb,Jb,Pa),lb.type=Eb,lb.size=Oa,lb.buffer=Wa,lb.normalized=tb,lb.offset=Pa,lb.stride=Jb;lb.divisor!==ub&&(qa.vertexAttribDivisorANGLE(Lb,
ub),lb.divisor=ub)}else if(lb.buffer&&(H.disableVertexAttribArray(Lb),lb.buffer=null),lb.x!==ud||lb.y!==Ya||lb.z!==Kb||lb.w!==Na)H.vertexAttrib4f(Lb,ud,Ya,Kb,Na),lb.x=ud,lb.y=Ya,lb.z=Kb,lb.w=Na;Yb=b.call(this,M,a,0);Qa=!1;vb=null;wb=0;Ta=!1;gc=nb=0;Ec=1;vc=0;ab=5126;ld=Xa=Tc=jc=0;sa(Yb)?(Qa=!0,vb=v.createStream(34962,Yb),ab=vb.dtype):(vb=v.getBuffer(Yb))?ab=vb.dtype:"constant"in Yb?(Ec=2,"number"===typeof Yb.constant?(Tc=Yb.constant,Xa=ld=jc=0):(Tc=0<Yb.constant.length?Yb.constant[0]:0,Xa=1<Yb.constant.length?
Yb.constant[1]:0,ld=2<Yb.constant.length?Yb.constant[2]:0,jc=3<Yb.constant.length?Yb.constant[3]:0)):(vb=sa(Yb.buffer)?v.createStream(34962,Yb.buffer):v.getBuffer(Yb.buffer),ab="type"in Yb?$d[Yb.type]:vb.dtype,Ta=!!Yb.normalized,gc=Yb.size|0,nb=Yb.offset|0,vc=Yb.stride|0,wb=Yb.divisor|0);Ab=la.location;Za=w[Ab];if(1===Ec){Za.buffer||H.enableVertexAttribArray(Ab);Ub=gc||1;if(Za.type!==ab||Za.size!==Ub||Za.buffer!==vb||Za.normalized!==Ta||Za.offset!==nb||Za.stride!==vc)H.bindBuffer(34962,vb.buffer),
H.vertexAttribPointer(Ab,Ub,ab,Ta,vc,nb),Za.type=ab,Za.size=Ub,Za.buffer=vb,Za.normalized=Ta,Za.offset=nb,Za.stride=vc;Za.divisor!==wb&&(qa.vertexAttribDivisorANGLE(Ab,wb),Za.divisor=wb)}else if(Za.buffer&&(H.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==Tc||Za.y!==Xa||Za.z!==ld||Za.w!==jc)H.vertexAttrib4f(Ab,Tc,Xa,ld,jc),Za.x=Tc,Za.y=Xa,Za.z=ld,Za.w=jc;tc=B.call(this,M,a,0);Vb=!1;Qb=null;Kc=0;Rb=!1;Dc=qd=0;qe=1;Mc=0;Yc=5126;hc=wc=oc=vd=0;sa(tc)?(Vb=!0,Qb=v.createStream(34962,tc),Yc=Qb.dtype):
(Qb=v.getBuffer(tc))?Yc=Qb.dtype:"constant"in tc?(qe=2,"number"===typeof tc.constant?(oc=tc.constant,wc=hc=vd=0):(oc=0<tc.constant.length?tc.constant[0]:0,wc=1<tc.constant.length?tc.constant[1]:0,hc=2<tc.constant.length?tc.constant[2]:0,vd=3<tc.constant.length?tc.constant[3]:0)):(Qb=sa(tc.buffer)?v.createStream(34962,tc.buffer):v.getBuffer(tc.buffer),Yc="type"in tc?$d[tc.type]:Qb.dtype,Rb=!!tc.normalized,Dc=tc.size|0,qd=tc.offset|0,Mc=tc.stride|0,Kc=tc.divisor|0);cb=oa.location;sc=w[cb];if(1===qe){sc.buffer||
H.enableVertexAttribArray(cb);Tb=Dc||1;if(sc.type!==Yc||sc.size!==Tb||sc.buffer!==Qb||sc.normalized!==Rb||sc.offset!==qd||sc.stride!==Mc)H.bindBuffer(34962,Qb.buffer),H.vertexAttribPointer(cb,Tb,Yc,Rb,Mc,qd),sc.type=Yc,sc.size=Tb,sc.buffer=Qb,sc.normalized=Rb,sc.offset=qd,sc.stride=Mc;sc.divisor!==Kc&&(qa.vertexAttribDivisorANGLE(cb,Kc),sc.divisor=Kc)}else if(sc.buffer&&(H.disableVertexAttribArray(cb),sc.buffer=null),sc.x!==oc||sc.y!==wc||sc.z!==hc||sc.w!==vd)H.vertexAttrib4f(cb,oc,wc,hc,vd),sc.x=
oc,sc.y=wc,sc.z=hc,sc.w=vd;Wb=y.call(this,M,a,0);dc=!1;ic=null;yc=0;Ac=!1;Qc=cd=0;Rc=1;Uc=0;Zc=5126;kc=$c=dd=md=0;sa(Wb)?(dc=!0,ic=v.createStream(34962,Wb),Zc=ic.dtype):(ic=v.getBuffer(Wb))?Zc=ic.dtype:"constant"in Wb?(Rc=2,"number"===typeof Wb.constant?(dd=Wb.constant,$c=kc=md=0):(dd=0<Wb.constant.length?Wb.constant[0]:0,$c=1<Wb.constant.length?Wb.constant[1]:0,kc=2<Wb.constant.length?Wb.constant[2]:0,md=3<Wb.constant.length?Wb.constant[3]:0)):(ic=sa(Wb.buffer)?v.createStream(34962,Wb.buffer):v.getBuffer(Wb.buffer),
Zc="type"in Wb?$d[Wb.type]:ic.dtype,Ac=!!Wb.normalized,Qc=Wb.size|0,cd=Wb.offset|0,Uc=Wb.stride|0,yc=Wb.divisor|0);bc=l.location;ad=w[bc];if(1===Rc){ad.buffer||H.enableVertexAttribArray(bc);Wc=Qc||4;if(ad.type!==Zc||ad.size!==Wc||ad.buffer!==ic||ad.normalized!==Ac||ad.offset!==cd||ad.stride!==Uc)H.bindBuffer(34962,ic.buffer),H.vertexAttribPointer(bc,Wc,Zc,Ac,Uc,cd),ad.type=Zc,ad.size=Wc,ad.buffer=ic,ad.normalized=Ac,ad.offset=cd,ad.stride=Uc;ad.divisor!==yc&&(qa.vertexAttribDivisorANGLE(bc,yc),ad.divisor=
yc)}else if(ad.buffer&&(H.disableVertexAttribArray(bc),ad.buffer=null),ad.x!==dd||ad.y!==$c||ad.z!==kc||ad.w!==md)H.vertexAttrib4f(bc,dd,$c,kc,md),ad.x=dd,ad.y=$c,ad.z=kc,ad.w=md;ed=K.call(this,M,a,0);zc=!1;id=null;rd=0;ve=!1;jd=we=0;bf=1;Od=0;Vd=5126;Gd=Id=Yd=ie=0;sa(ed)?(zc=!0,id=v.createStream(34962,ed),Vd=id.dtype):(id=v.getBuffer(ed))?Vd=id.dtype:"constant"in ed?(bf=2,"number"===typeof ed.constant?(Yd=ed.constant,Id=Gd=ie=0):(Yd=0<ed.constant.length?ed.constant[0]:0,Id=1<ed.constant.length?ed.constant[1]:
0,Gd=2<ed.constant.length?ed.constant[2]:0,ie=3<ed.constant.length?ed.constant[3]:0)):(id=sa(ed.buffer)?v.createStream(34962,ed.buffer):v.getBuffer(ed.buffer),Vd="type"in ed?$d[ed.type]:id.dtype,ve=!!ed.normalized,jd=ed.size|0,we=ed.offset|0,Od=ed.stride|0,rd=ed.divisor|0);od=va.location;Vc=w[od];if(1===bf){Vc.buffer||H.enableVertexAttribArray(od);wd=jd||4;if(Vc.type!==Vd||Vc.size!==wd||Vc.buffer!==id||Vc.normalized!==ve||Vc.offset!==we||Vc.stride!==Od)H.bindBuffer(34962,id.buffer),H.vertexAttribPointer(od,
wd,Vd,ve,Od,we),Vc.type=Vd,Vc.size=wd,Vc.buffer=id,Vc.normalized=ve,Vc.offset=we,Vc.stride=Od;Vc.divisor!==rd&&(qa.vertexAttribDivisorANGLE(od,rd),Vc.divisor=rd)}else if(Vc.buffer&&(H.disableVertexAttribArray(od),Vc.buffer=null),Vc.x!==Yd||Vc.y!==Id||Vc.z!==Gd||Vc.w!==ie)H.vertexAttrib4f(od,Yd,Id,Gd,ie),Vc.x=Yd,Vc.y=Id,Vc.z=Gd,Vc.w=ie;td=aa.call(this,M,a,0);kd=!1;xd=null;Bd=0;Dd=!1;je=ge=0;xe=1;ke=0;he=5126;le=be=ye=ee=0;sa(td)?(kd=!0,xd=v.createStream(34962,td),he=xd.dtype):(xd=v.getBuffer(td))?
he=xd.dtype:"constant"in td?(xe=2,"number"===typeof td.constant?(ye=td.constant,be=le=ee=0):(ye=0<td.constant.length?td.constant[0]:0,be=1<td.constant.length?td.constant[1]:0,le=2<td.constant.length?td.constant[2]:0,ee=3<td.constant.length?td.constant[3]:0)):(xd=sa(td.buffer)?v.createStream(34962,td.buffer):v.getBuffer(td.buffer),he="type"in td?$d[td.type]:xd.dtype,Dd=!!td.normalized,je=td.size|0,ge=td.offset|0,ke=td.stride|0,Bd=td.divisor|0);Nc=ca.location;hd=w[Nc];if(1===xe){hd.buffer||H.enableVertexAttribArray(Nc);
te=je||1;if(hd.type!==he||hd.size!==te||hd.buffer!==xd||hd.normalized!==Dd||hd.offset!==ge||hd.stride!==ke)H.bindBuffer(34962,xd.buffer),H.vertexAttribPointer(Nc,te,he,Dd,ke,ge),hd.type=he,hd.size=te,hd.buffer=xd,hd.normalized=Dd,hd.offset=ge,hd.stride=ke;hd.divisor!==Bd&&(qa.vertexAttribDivisorANGLE(Nc,Bd),hd.divisor=Bd)}else if(hd.buffer&&(H.disableVertexAttribArray(Nc),hd.buffer=null),hd.x!==ye||hd.y!==be||hd.z!==le||hd.w!==ee)H.vertexAttrib4f(Nc,ye,be,le,ee),hd.x=ye,hd.y=be,hd.z=le,hd.w=ee;H.uniform1i(I.location,
!1);H.uniform1f(ya.location,M.pixelRatio);pe=a.scale;H.uniform2f(fa.location,pe[0],pe[1]);Jd=a.scaleFract;H.uniform2f(Ba.location,Jd[0],Jd[1]);Pd=a.translate;H.uniform2f(pa.location,Pd[0],Pd[1]);Qd=a.translateFract;H.uniform2f(za.location,Qd[0],Qd[1]);Rd=t.call(this,M,a,0);H.uniform2f(ra.location,Rd[0],Rd[1]);H.uniform1f(ma.location,a.opacity);H.uniform1i(Ca.location,u.bind());(me=a.markerTexture)&&"framebuffer"===me._reglType&&(me=me.color[0]);ze=me._texture;H.uniform1i(S.location,ze.bind());Qe=
a.elements;re=null;(re=(Re=sa(Qe))?mb.createStream(Qe):mb.getElements(Qe))&&H.bindBuffer(34963,re.buffer.buffer);Se=a.offset;if(Me=a.count)ue=Ea.instances,0<ue?re?qa.drawElementsInstancedANGLE(0,Me,re.type,Se<<(re.type-5121>>1),ue):qa.drawArraysInstancedANGLE(0,Se,Me,ue):0>ue&&(re?H.drawElements(0,Me,re.type,Se<<(re.type-5121>>1)):H.drawArrays(0,Se,Me)),wa.dirty=!0,Da.setVAO(null),M.viewportWidth=n,M.viewportHeight=p,z&&(F.cpuTime+=performance.now()-C),D&&v.destroyStream(ka),ta&&v.destroyStream(Fa),
xb&&v.destroyStream(hb),kb&&v.destroyStream(Wa),Qa&&v.destroyStream(vb),Vb&&v.destroyStream(Qb),dc&&v.destroyStream(ic),zc&&v.destroyStream(id),kd&&v.destroyStream(xd),u.unbind(),ze.unbind(),Re&&mb.destroyStream(re)},scope:function(b,h,l){var w,g,m,H,k,f,X,A,I,Q,S,z,R,L,u,fa,ga,t,$b,y,Ma,N,J,B,V,Z,ca,ya,ra,Da,K,va,da,aa,la,Y,ea,Ua,pa,Ba,ma,oa,za,ia,na,ua,lc,Ca,Ga,cc,gb,Ja,Sb,ha,Sa,Zb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Ud,Ra,Jb,Eb,Na,yd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,xa,
Xa,Cd,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,Ld,Dc,de,Mc,Yc,Ae,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,Md,ne,jd,zd,fe,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,Gf,ke,he,ee,ef,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,
vg,wg,xg,yg,zg,Ag,Bg,hf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;w=b.viewport;g=w.x|0;m=w.y|0;H="width"in w?w.width|0:M.framebufferWidth-g;k="height"in w?w.height|0:M.framebufferHeight-m;f=M.viewportWidth;M.viewportWidth=H;X=M.viewportHeight;M.viewportHeight=k;A=ud[0];ud[0]=g;I=ud[1];ud[1]=m;Q=ud[2];ud[2]=H;S=ud[3];ud[3]=k;z=ka[0];ka[0]=0;R=ka[1];ka[1]=0;L=ka[2];ka[2]=0;u=ka[3];ka[3]=1;fa=Ha.blend_enable;Ha.blend_enable=!0;ga=Fa[0];Fa[0]=770;t=Fa[1];Fa[1]=
771;$b=Fa[2];Fa[2]=773;y=Fa[3];Fa[3]=1;Ma=Ha.depth_enable;Ha.depth_enable=!1;N=b.viewport;J=N.x|0;B=N.y|0;V="width"in N?N.width|0:M.framebufferWidth-J;Z="height"in N?N.height|0:M.framebufferHeight-B;ca=qe[0];qe[0]=J;ya=qe[1];qe[1]=B;ra=qe[2];qe[2]=V;Da=qe[3];qe[3]=Z;K=Ha.scissor_enable;Ha.scissor_enable=!0;va=Ha.stencil_enable;Ha.stencil_enable=!1;if(da=wa.profile)aa=performance.now(),F.count++;la=b.elements;Y=null;Y=(ea=sa(la))?mb.createStream(la):mb.getElements(la);Ua=Ea.elements;Ea.elements=Y;
pa=b.offset;Ba=Ea.offset;Ea.offset=pa;ma=b.count;oa=Ea.count;Ea.count=ma;za=Ea.primitive;Ea.primitive=0;ia=Aa[45];Aa[45]=!1;na=b.markerTexture;ua=Aa[48];Aa[48]=na;lc=b.opacity;Ca=Aa[10];Aa[10]=lc;Ga=G.call(this,M,b,l);cc=Aa[46];Aa[46]=Ga;gb=Aa[47];Aa[47]=ba;Ja=M.pixelRatio;Sb=Aa[34];Aa[34]=Ja;ha=b.scale;Sa=Aa[6];Aa[6]=ha;Zb=b.scaleFract;pb=Aa[7];Aa[7]=Zb;ac=b.translate;ib=Aa[8];Aa[8]=ac;qb=b.translateFract;Ia=Aa[9];Aa[9]=qb;sb=x.call(this,M,b,l);Ka=!1;db=null;fb=0;La=!1;Wa=kb=0;ub=1;tb=0;Pa=5126;
Eb=Jb=Ra=Ud=0;sa(sb)?(Ka=!0,db=v.createStream(34962,sb),Pa=db.dtype):(db=v.getBuffer(sb))?Pa=db.dtype:"constant"in sb?(ub=2,"number"===typeof sb.constant?(Ra=sb.constant,Jb=Eb=Ud=0):(Ra=0<sb.constant.length?sb.constant[0]:0,Jb=1<sb.constant.length?sb.constant[1]:0,Eb=2<sb.constant.length?sb.constant[2]:0,Ud=3<sb.constant.length?sb.constant[3]:0)):(db=sa(sb.buffer)?v.createStream(34962,sb.buffer):v.getBuffer(sb.buffer),Pa="type"in sb?$d[sb.type]:db.dtype,La=!!sb.normalized,Wa=sb.size|0,kb=sb.offset|
0,tb=sb.stride|0,fb=sb.divisor|0);Na=T.buffer;T.buffer=db;yd=T.divisor;T.divisor=fb;Ya=T.normalized;T.normalized=La;Kb=T.offset;T.offset=kb;Lb=T.size;T.size=Wa;lb=T.state;T.state=ub;Oa=T.stride;T.stride=tb;Yb=T.type;T.type=Pa;Qa=T.w;T.w=Ud;vb=T.x;T.x=Ra;wb=T.y;T.y=Jb;Ta=T.z;T.z=Eb;nb=r.call(this,M,b,l);gc=!1;Ec=null;vc=0;ab=!1;xa=jc=0;Xa=1;Cd=0;Ab=5126;Vb=tc=Ub=Za=0;sa(nb)?(gc=!0,Ec=v.createStream(34962,nb),Ab=Ec.dtype):(Ec=v.getBuffer(nb))?Ab=Ec.dtype:"constant"in nb?(Xa=2,"number"===typeof nb.constant?
(Ub=nb.constant,tc=Vb=Za=0):(Ub=0<nb.constant.length?nb.constant[0]:0,tc=1<nb.constant.length?nb.constant[1]:0,Vb=2<nb.constant.length?nb.constant[2]:0,Za=3<nb.constant.length?nb.constant[3]:0)):(Ec=sa(nb.buffer)?v.createStream(34962,nb.buffer):v.getBuffer(nb.buffer),Ab="type"in nb?$d[nb.type]:Ec.dtype,ab=!!nb.normalized,xa=nb.size|0,jc=nb.offset|0,Cd=nb.stride|0,vc=nb.divisor|0);Qb=P.buffer;P.buffer=Ec;Kc=P.divisor;P.divisor=vc;Rb=P.normalized;P.normalized=ab;Ld=P.offset;P.offset=jc;Dc=P.size;P.size=
xa;de=P.state;P.state=Xa;Mc=P.stride;P.stride=Cd;Yc=P.type;P.type=Ab;Ae=P.w;P.w=Za;oc=P.x;P.x=Ub;wc=P.y;P.y=tc;hc=P.z;P.z=Vb;cb=O.call(this,M,b,l);sc=!1;Tb=null;Wb=0;dc=!1;yc=ic=0;Ac=1;cd=0;Qc=5126;md=Zc=Uc=Rc=0;sa(cb)?(sc=!0,Tb=v.createStream(34962,cb),Qc=Tb.dtype):(Tb=v.getBuffer(cb))?Qc=Tb.dtype:"constant"in cb?(Ac=2,"number"===typeof cb.constant?(Uc=cb.constant,Zc=md=Rc=0):(Uc=0<cb.constant.length?cb.constant[0]:0,Zc=1<cb.constant.length?cb.constant[1]:0,md=2<cb.constant.length?cb.constant[2]:
0,Rc=3<cb.constant.length?cb.constant[3]:0)):(Tb=sa(cb.buffer)?v.createStream(34962,cb.buffer):v.getBuffer(cb.buffer),Qc="type"in cb?$d[cb.type]:Tb.dtype,dc=!!cb.normalized,yc=cb.size|0,ic=cb.offset|0,cd=cb.stride|0,Wb=cb.divisor|0);dd=d.buffer;d.buffer=Tb;$c=d.divisor;d.divisor=Wb;kc=d.normalized;d.normalized=dc;bc=d.offset;d.offset=ic;ad=d.size;d.size=yc;Wc=d.state;d.state=Ac;ed=d.stride;d.stride=cd;zc=d.type;d.type=Qc;id=d.w;d.w=Rc;rd=d.x;d.x=Uc;Md=d.y;d.y=Zc;ne=d.z;d.z=md;jd=n.call(this,M,b,l);
zd=!1;fe=null;Vd=0;ie=!1;Id=Yd=0;Gd=1;od=0;Vc=5126;xd=kd=td=wd=0;sa(jd)?(zd=!0,fe=v.createStream(34962,jd),Vc=fe.dtype):(fe=v.getBuffer(jd))?Vc=fe.dtype:"constant"in jd?(Gd=2,"number"===typeof jd.constant?(td=jd.constant,kd=xd=wd=0):(td=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,xd=2<jd.constant.length?jd.constant[2]:0,wd=3<jd.constant.length?jd.constant[3]:0)):(fe=sa(jd.buffer)?v.createStream(34962,jd.buffer):v.getBuffer(jd.buffer),Vc="type"in jd?$d[jd.type]:fe.dtype,
ie=!!jd.normalized,Id=jd.size|0,Yd=jd.offset|0,od=jd.stride|0,Vd=jd.divisor|0);Bd=U.buffer;U.buffer=fe;Dd=U.divisor;U.divisor=Vd;ge=U.normalized;U.normalized=ie;je=U.offset;U.offset=Yd;Gf=U.size;U.size=Id;ke=U.state;U.state=Gd;he=U.stride;U.stride=od;ee=U.type;U.type=Vc;ef=U.w;U.w=wd;be=U.x;U.x=td;le=U.y;U.y=kd;Nc=U.z;U.z=xd;hd=e.call(this,M,b,l);te=!1;pe=null;Jd=0;Pd=!1;Rd=Qd=0;me=1;ze=0;Qe=5126;Me=Se=Re=re=0;sa(hd)?(te=!0,pe=v.createStream(34962,hd),Qe=pe.dtype):(pe=v.getBuffer(hd))?Qe=pe.dtype:
"constant"in hd?(me=2,"number"===typeof hd.constant?(Re=hd.constant,Se=Me=re=0):(Re=0<hd.constant.length?hd.constant[0]:0,Se=1<hd.constant.length?hd.constant[1]:0,Me=2<hd.constant.length?hd.constant[2]:0,re=3<hd.constant.length?hd.constant[3]:0)):(pe=sa(hd.buffer)?v.createStream(34962,hd.buffer):v.getBuffer(hd.buffer),Qe="type"in hd?$d[hd.type]:pe.dtype,Pd=!!hd.normalized,Rd=hd.size|0,Qd=hd.offset|0,ze=hd.stride|0,Jd=hd.divisor|0);ue=W.buffer;W.buffer=pe;Ee=W.divisor;W.divisor=Jd;Ge=W.normalized;
W.normalized=Pd;He=W.offset;W.offset=Qd;Ie=W.size;W.size=Rd;Fe=W.state;W.state=me;Kd=W.stride;W.stride=ze;Wd=W.type;W.type=Qe;ae=W.w;W.w=re;ce=W.x;W.x=Re;Je=W.y;W.y=Se;Hd=W.z;W.z=Me;Sd=E.call(this,M,b,l);Ce=!1;Ke=null;af=0;$e=!1;Ne=Te=0;Ze=1;Xe=0;Ue=5126;We=Zd=Td=Ve=0;sa(Sd)?(Ce=!0,Ke=v.createStream(34962,Sd),Ue=Ke.dtype):(Ke=v.getBuffer(Sd))?Ue=Ke.dtype:"constant"in Sd?(Ze=2,"number"===typeof Sd.constant?(Td=Sd.constant,Zd=We=Ve=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,Zd=1<Sd.constant.length?
Sd.constant[1]:0,We=2<Sd.constant.length?Sd.constant[2]:0,Ve=3<Sd.constant.length?Sd.constant[3]:0)):(Ke=sa(Sd.buffer)?v.createStream(34962,Sd.buffer):v.getBuffer(Sd.buffer),Ue="type"in Sd?$d[Sd.type]:Ke.dtype,$e=!!Sd.normalized,Ne=Sd.size|0,Te=Sd.offset|0,Xe=Sd.stride|0,af=Sd.divisor|0);jf=p.buffer;p.buffer=Ke;nf=p.divisor;p.divisor=af;ff=p.normalized;p.normalized=$e;kf=p.offset;p.offset=Te;lf=p.size;p.size=Ne;mf=p.state;p.state=Ze;rf=p.stride;p.stride=Xe;of=p.type;p.type=Ue;sf=p.w;p.w=Ve;Bf=p.x;
p.x=Td;Cf=p.y;p.y=Zd;Oe=p.z;p.z=We;De=ta.call(this,M,b,l);pf=!1;qf=null;Df=0;Hf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;Jf=zf=yf=vf=0;sa(De)?(pf=!0,qf=v.createStream(34962,De),xf=qf.dtype):(qf=v.getBuffer(De))?xf=qf.dtype:"constant"in De?(Ff=2,"number"===typeof De.constant?(yf=De.constant,zf=Jf=vf=0):(yf=0<De.constant.length?De.constant[0]:0,zf=1<De.constant.length?De.constant[1]:0,Jf=2<De.constant.length?De.constant[2]:0,vf=3<De.constant.length?De.constant[3]:0)):(qf=sa(De.buffer)?v.createStream(34962,De.buffer):
v.getBuffer(De.buffer),xf="type"in De?$d[De.type]:qf.dtype,Hf=!!De.normalized,Ef=De.size|0,Af=De.offset|0,wf=De.stride|0,Df=De.divisor|0);Kf=D.buffer;D.buffer=qf;Lf=D.divisor;D.divisor=Df;Mf=D.normalized;D.normalized=Hf;tf=D.offset;D.offset=Af;Rf=D.size;D.size=Ef;If=D.state;D.state=Ff;uf=D.stride;D.stride=wf;dg=D.type;D.type=xf;Sf=D.w;D.w=vf;Tf=D.x;D.x=yf;qg=D.y;D.y=zf;gf=D.z;D.z=Jf;cf=C.call(this,M,b,l);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;sa(cf)?(Nf=!0,Of=v.createStream(34962,
cf),Uf=Of.dtype):(Of=v.getBuffer(cf))?Uf=Of.dtype:"constant"in cf?(ig=2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Of=sa(cf.buffer)?v.createStream(34962,cf.buffer):v.getBuffer(cf.buffer),Uf="type"in cf?$d[cf.type]:Of.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=c.buffer;c.buffer=
Of;sg=c.divisor;c.divisor=eg;tg=c.normalized;c.normalized=fg;ug=c.offset;c.offset=gg;vg=c.size;c.size=hg;wg=c.state;c.state=ig;xg=c.stride;c.stride=Wf;yg=c.type;c.type=Uf;zg=c.w;c.w=Xf;Ag=c.x;c.x=Yf;Bg=c.y;c.y=Zf;hf=c.z;c.z=jg;df=q.call(this,M,b,l);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;sa(df)?(Pf=!0,Qf=v.createStream(34962,df),Vf=Qf.dtype):(Qf=v.getBuffer(df))?Vf=Qf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?
df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Qf=sa(df.buffer)?v.createStream(34962,df.buffer):v.getBuffer(df.buffer),Vf="type"in df?$d[df.type]:Qf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=a.buffer;a.buffer=Qf;Dg=a.divisor;a.divisor=kg;Eg=a.normalized;a.normalized=lg;Fg=a.offset;a.offset=mg;Gg=a.size;a.size=ng;Hg=a.state;a.state=og;Ig=a.stride;a.stride=$f;
Jg=a.type;a.type=Vf;Kg=a.w;a.w=ag;Lg=a.x;a.x=bg;Mg=a.y;a.y=cg;Ng=a.z;a.z=pg;Og=qa.vert;qa.vert=44;Pg=qa.frag;qa.frag=43;wa.dirty=!0;h(M,b,l);M.viewportWidth=f;M.viewportHeight=X;ud[0]=A;ud[1]=I;ud[2]=Q;ud[3]=S;ka[0]=z;ka[1]=R;ka[2]=L;ka[3]=u;Ha.blend_enable=fa;Fa[0]=ga;Fa[1]=t;Fa[2]=$b;Fa[3]=y;Ha.depth_enable=Ma;qe[0]=ca;qe[1]=ya;qe[2]=ra;qe[3]=Da;Ha.scissor_enable=K;Ha.stencil_enable=va;da&&(F.cpuTime+=performance.now()-aa);ea&&mb.destroyStream(Y);Ea.elements=Ua;Ea.offset=Ba;Ea.count=oa;Ea.primitive=
za;Aa[45]=ia;Aa[48]=ua;Aa[10]=Ca;Aa[46]=cc;Aa[47]=gb;Aa[34]=Sb;Aa[6]=Sa;Aa[7]=pb;Aa[8]=ib;Aa[9]=Ia;Ka&&v.destroyStream(db);T.buffer=Na;T.divisor=yd;T.normalized=Ya;T.offset=Kb;T.size=Lb;T.state=lb;T.stride=Oa;T.type=Yb;T.w=Qa;T.x=vb;T.y=wb;T.z=Ta;gc&&v.destroyStream(Ec);P.buffer=Qb;P.divisor=Kc;P.normalized=Rb;P.offset=Ld;P.size=Dc;P.state=de;P.stride=Mc;P.type=Yc;P.w=Ae;P.x=oc;P.y=wc;P.z=hc;sc&&v.destroyStream(Tb);d.buffer=dd;d.divisor=$c;d.normalized=kc;d.offset=bc;d.size=ad;d.state=Wc;d.stride=
ed;d.type=zc;d.w=id;d.x=rd;d.y=Md;d.z=ne;zd&&v.destroyStream(fe);U.buffer=Bd;U.divisor=Dd;U.normalized=ge;U.offset=je;U.size=Gf;U.state=ke;U.stride=he;U.type=ee;U.w=ef;U.x=be;U.y=le;U.z=Nc;te&&v.destroyStream(pe);W.buffer=ue;W.divisor=Ee;W.normalized=Ge;W.offset=He;W.size=Ie;W.state=Fe;W.stride=Kd;W.type=Wd;W.w=ae;W.x=ce;W.y=Je;W.z=Hd;Ce&&v.destroyStream(Ke);p.buffer=jf;p.divisor=nf;p.normalized=ff;p.offset=kf;p.size=lf;p.state=mf;p.stride=rf;p.type=of;p.w=sf;p.x=Bf;p.y=Cf;p.z=Oe;pf&&v.destroyStream(qf);
D.buffer=Kf;D.divisor=Lf;D.normalized=Mf;D.offset=tf;D.size=Rf;D.state=If;D.stride=uf;D.type=dg;D.w=Sf;D.x=Tf;D.y=qg;D.z=gf;Nf&&v.destroyStream(Of);c.buffer=rg;c.divisor=sg;c.normalized=tg;c.offset=ug;c.size=vg;c.state=wg;c.stride=xg;c.type=yg;c.w=zg;c.x=Ag;c.y=Bg;c.z=hf;Pf&&v.destroyStream(Qf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;qa.vert=Og;qa.frag=Pg;wa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(k,
F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,O,D,C,c,q,a,na,A,ia,cc,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b){var Ua,w,v,M,wa,Ea,mb,lc,ga,H,sa,Ha,qa,Aa,Da,ka,Z,ua,Ja,Fa,gb,da,ha,Zb,Ga,xa,Sb,ef,Cd,qe,Ud,Ae,zd,Ld,ne,fe,Md,ud,de;Ua=k.attributes;w=k.buffer;v=k.context;M=k.current;wa=k.draw;Ea=k.elements;mb=k.extensions;lc=k.framebuffer;ga=k.gl;H=k.isBufferArgs;sa=k.next;Ha=k.shader;qa=k.uniforms;Aa=k.vao;Da=sa.blend_color;ka=M.blend_color;Z=sa.blend_equation;ua=M.blend_equation;
Ja=sa.blend_func;Fa=M.blend_func;gb=sa.colorMask;da=M.colorMask;ha=sa.depth_range;Zb=M.depth_range;Ga=sa.polygonOffset_offset;xa=M.polygonOffset_offset;Sb=sa.sample_coverage;ef=M.sample_coverage;Cd=sa.scissor_box;qe=M.scissor_box;Ud=sa.stencil_func;Ae=M.stencil_func;zd=sa.stencil_opBack;Ld=M.stencil_opBack;ne=sa.stencil_opFront;fe=M.stencil_opFront;Md=sa.viewport;ud=M.viewport;de={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
c){var b,d,h,e,g,q;b=lc.next;b!==lc.cur&&(b?ga.bindFramebuffer(36160,b.framebuffer):ga.bindFramebuffer(36160,null),lc.cur=b);if(M.dirty){var k,f,n,p,r,x,E,Ha,C,qa,L,u,t,D,y,J,B,G,P,Da,K,T,U,aa,ba,W,ja,O,ta,Ja,Sc,zb,bb,Mb;k=sa.dither;k!==M.dither&&(k?ga.enable(3024):ga.disable(3024),M.dither=k);f=Z[0];n=Z[1];if(f!==ua[0]||n!==ua[1])ga.blendEquationSeparate(f,n),ua[0]=f,ua[1]=n;p=sa.depth_func;p!==M.depth_func&&(ga.depthFunc(p),M.depth_func=p);r=ha[0];x=ha[1];if(r!==Zb[0]||x!==Zb[1])ga.depthRange(r,
x),Zb[0]=r,Zb[1]=x;E=sa.depth_mask;E!==M.depth_mask&&(ga.depthMask(E),M.depth_mask=E);Ha=gb[0];C=gb[1];qa=gb[2];L=gb[3];if(Ha!==da[0]||C!==da[1]||qa!==da[2]||L!==da[3])ga.colorMask(Ha,C,qa,L),da[0]=Ha,da[1]=C,da[2]=qa,da[3]=L;u=sa.cull_enable;u!==M.cull_enable&&(u?ga.enable(2884):ga.disable(2884),M.cull_enable=u);t=sa.cull_face;t!==M.cull_face&&(ga.cullFace(t),M.cull_face=t);D=sa.frontFace;D!==M.frontFace&&(ga.frontFace(D),M.frontFace=D);y=sa.lineWidth;y!==M.lineWidth&&(ga.lineWidth(y),M.lineWidth=
y);J=sa.polygonOffset_enable;J!==M.polygonOffset_enable&&(J?ga.enable(32823):ga.disable(32823),M.polygonOffset_enable=J);B=Ga[0];G=Ga[1];if(B!==xa[0]||G!==xa[1])ga.polygonOffset(B,G),xa[0]=B,xa[1]=G;P=sa.sample_alpha;P!==M.sample_alpha&&(P?ga.enable(32926):ga.disable(32926),M.sample_alpha=P);Da=sa.sample_enable;Da!==M.sample_enable&&(Da?ga.enable(32928):ga.disable(32928),M.sample_enable=Da);K=Sb[0];T=Sb[1];if(K!==ef[0]||T!==ef[1])ga.sampleCoverage(K,T),ef[0]=K,ef[1]=T;U=sa.stencil_mask;U!==M.stencil_mask&&
(ga.stencilMask(U),M.stencil_mask=U);aa=Ud[0];ba=Ud[1];W=Ud[2];if(aa!==Ae[0]||ba!==Ae[1]||W!==Ae[2])ga.stencilFunc(aa,ba,W),Ae[0]=aa,Ae[1]=ba,Ae[2]=W;ja=ne[0];O=ne[1];ta=ne[2];Ja=ne[3];if(ja!==fe[0]||O!==fe[1]||ta!==fe[2]||Ja!==fe[3])ga.stencilOpSeparate(ja,O,ta,Ja),fe[0]=ja,fe[1]=O,fe[2]=ta,fe[3]=Ja;Sc=zd[0];zb=zd[1];bb=zd[2];Mb=zd[3];if(Sc!==Ld[0]||zb!==Ld[1]||bb!==Ld[2]||Mb!==Ld[3])ga.stencilOpSeparate(Sc,zb,bb,Mb),Ld[0]=Sc,Ld[1]=zb,Ld[2]=bb,Ld[3]=Mb}ga.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=
0;ka[3]=1;ga.enable(3042);M.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;ga.disable(2929);M.depth_enable=!1;ga.enable(3089);M.scissor_enable=!0;ga.disable(2960);M.stencil_enable=!1;if(d=M.profile)h=performance.now(),F.count+=c;ga.useProgram(na.program);e=mb.angle_instanced_arrays;var $a;Aa.setVAO(null);ga.uniform1i(I.location,!1);ga.uniform1i(ra.location,V.bind());$a=wa.instances;for(g=0;g<c;++g){q=a[g];var ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,
Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Cd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,Md,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,bf,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,
Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf;ob=q.viewport;Va=ob.x|0;Pc=ob.y|0;Hb="width"in ob?ob.width|0:v.framebufferWidth-Va;Ib="height"in ob?ob.height|0:v.framebufferHeight-Pc;rc=v.viewportWidth;v.viewportWidth=Hb;Nb=v.viewportHeight;v.viewportHeight=Ib;ga.viewport(Va,Pc,Hb,Ib);ud[0]=Va;ud[1]=Pc;ud[2]=Hb;ud[3]=Ib;jb=q.viewport;Gb=jb.x|0;Db=jb.y|0;xb="width"in jb?jb.width|0:v.framebufferWidth-Gb;hb="height"in jb?jb.height|0:v.framebufferHeight-Db;ga.scissor(Gb,Db,xb,hb);qe[0]=Gb;qe[1]=Db;
qe[2]=xb;qe[3]=hb;Xb=A.call(this,v,q,g);Ob=!1;rb=null;Sa=0;Pb=!1;ac=pb=0;ib=1;qb=0;Ia=5126;fb=db=Ka=sb=0;H(Xb)?(Ob=!0,rb=w.createStream(34962,Xb),Ia=rb.dtype):(rb=w.getBuffer(Xb))?Ia=rb.dtype:"constant"in Xb?(ib=2,"number"===typeof Xb.constant?(Ka=Xb.constant,db=fb=sb=0):(Ka=0<Xb.constant.length?Xb.constant[0]:0,db=1<Xb.constant.length?Xb.constant[1]:0,fb=2<Xb.constant.length?Xb.constant[2]:0,sb=3<Xb.constant.length?Xb.constant[3]:0)):(rb=H(Xb.buffer)?w.createStream(34962,Xb.buffer):w.getBuffer(Xb.buffer),
Ia="type"in Xb?de[Xb.type]:rb.dtype,Pb=!!Xb.normalized,ac=Xb.size|0,pb=Xb.offset|0,qb=Xb.stride|0,Sa=Xb.divisor|0);La=za.location;kb=Ua[La];if(1===ib){kb.buffer||ga.enableVertexAttribArray(La);Wa=ac||1;if(kb.type!==Ia||kb.size!==Wa||kb.buffer!==rb||kb.normalized!==Pb||kb.offset!==pb||kb.stride!==qb)ga.bindBuffer(34962,rb.buffer),ga.vertexAttribPointer(La,Wa,Ia,Pb,qb,pb),kb.type=Ia,kb.size=Wa,kb.buffer=rb,kb.normalized=Pb,kb.offset=pb,kb.stride=qb;kb.divisor!==Sa&&(e.vertexAttribDivisorANGLE(La,Sa),
kb.divisor=Sa)}else if(kb.buffer&&(ga.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==db||kb.z!==fb||kb.w!==sb)ga.vertexAttrib4f(La,Ka,db,fb,sb),kb.x=Ka,kb.y=db,kb.z=fb,kb.w=sb;ub=ia.call(this,v,q,g);tb=!1;Pa=null;Bc=0;Ra=!1;Eb=Jb=0;Na=1;Cd=0;Ya=5126;Oa=lb=Lb=Kb=0;H(ub)?(tb=!0,Pa=w.createStream(34962,ub),Ya=Pa.dtype):(Pa=w.getBuffer(ub))?Ya=Pa.dtype:"constant"in ub?(Na=2,"number"===typeof ub.constant?(Lb=ub.constant,lb=Oa=Kb=0):(Lb=0<ub.constant.length?ub.constant[0]:0,lb=1<ub.constant.length?
ub.constant[1]:0,Oa=2<ub.constant.length?ub.constant[2]:0,Kb=3<ub.constant.length?ub.constant[3]:0)):(Pa=H(ub.buffer)?w.createStream(34962,ub.buffer):w.getBuffer(ub.buffer),Ya="type"in ub?de[ub.type]:Pa.dtype,Ra=!!ub.normalized,Eb=ub.size|0,Jb=ub.offset|0,Cd=ub.stride|0,Bc=ub.divisor|0);Yb=X.location;Qa=Ua[Yb];if(1===Na){Qa.buffer||ga.enableVertexAttribArray(Yb);vb=Eb||1;if(Qa.type!==Ya||Qa.size!==vb||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Jb||Qa.stride!==Cd)ga.bindBuffer(34962,Pa.buffer),
ga.vertexAttribPointer(Yb,vb,Ya,Ra,Cd,Jb),Qa.type=Ya,Qa.size=vb,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Jb,Qa.stride=Cd;Qa.divisor!==Bc&&(e.vertexAttribDivisorANGLE(Yb,Bc),Qa.divisor=Bc)}else if(Qa.buffer&&(ga.disableVertexAttribArray(Yb),Qa.buffer=null),Qa.x!==Lb||Qa.y!==lb||Qa.z!==Oa||Qa.w!==Kb)ga.vertexAttrib4f(Yb,Lb,lb,Oa,Kb),Qa.x=Lb,Qa.y=lb,Qa.z=Oa,Qa.w=Kb;wb=cc.call(this,v,q,g);Ta=!1;nb=null;gc=0;Ec=!1;ab=vc=0;jc=1;Tc=0;Xa=5126;Ub=Za=Ab=ld=0;H(wb)?(Ta=!0,nb=w.createStream(34962,wb),Xa=nb.dtype):
(nb=w.getBuffer(wb))?Xa=nb.dtype:"constant"in wb?(jc=2,"number"===typeof wb.constant?(Ab=wb.constant,Za=Ub=ld=0):(Ab=0<wb.constant.length?wb.constant[0]:0,Za=1<wb.constant.length?wb.constant[1]:0,Ub=2<wb.constant.length?wb.constant[2]:0,ld=3<wb.constant.length?wb.constant[3]:0)):(nb=H(wb.buffer)?w.createStream(34962,wb.buffer):w.getBuffer(wb.buffer),Xa="type"in wb?de[wb.type]:nb.dtype,Ec=!!wb.normalized,ab=wb.size|0,vc=wb.offset|0,Tc=wb.stride|0,gc=wb.divisor|0);tc=Ma.location;Vb=Ua[tc];if(1===jc){Vb.buffer||
ga.enableVertexAttribArray(tc);Qb=ab||1;if(Vb.type!==Xa||Vb.size!==Qb||Vb.buffer!==nb||Vb.normalized!==Ec||Vb.offset!==vc||Vb.stride!==Tc)ga.bindBuffer(34962,nb.buffer),ga.vertexAttribPointer(tc,Qb,Xa,Ec,Tc,vc),Vb.type=Xa,Vb.size=Qb,Vb.buffer=nb,Vb.normalized=Ec,Vb.offset=vc,Vb.stride=Tc;Vb.divisor!==gc&&(e.vertexAttribDivisorANGLE(tc,gc),Vb.divisor=gc)}else if(Vb.buffer&&(ga.disableVertexAttribArray(tc),Vb.buffer=null),Vb.x!==Ab||Vb.y!==Za||Vb.z!==Ub||Vb.w!==ld)ga.vertexAttrib4f(tc,Ab,Za,Ub,ld),
Vb.x=Ab,Vb.y=Za,Vb.z=Ub,Vb.w=ld;Kc=Y.call(this,v,q,g);Rb=!1;qd=null;Dc=0;Md=!1;Yc=Mc=0;vd=1;oc=0;wc=5126;Tb=sc=cb=hc=0;H(Kc)?(Rb=!0,qd=w.createStream(34962,Kc),wc=qd.dtype):(qd=w.getBuffer(Kc))?wc=qd.dtype:"constant"in Kc?(vd=2,"number"===typeof Kc.constant?(cb=Kc.constant,sc=Tb=hc=0):(cb=0<Kc.constant.length?Kc.constant[0]:0,sc=1<Kc.constant.length?Kc.constant[1]:0,Tb=2<Kc.constant.length?Kc.constant[2]:0,hc=3<Kc.constant.length?Kc.constant[3]:0)):(qd=H(Kc.buffer)?w.createStream(34962,Kc.buffer):
w.getBuffer(Kc.buffer),wc="type"in Kc?de[Kc.type]:qd.dtype,Md=!!Kc.normalized,Yc=Kc.size|0,Mc=Kc.offset|0,oc=Kc.stride|0,Dc=Kc.divisor|0);Wb=$b.location;dc=Ua[Wb];if(1===vd){dc.buffer||ga.enableVertexAttribArray(Wb);ic=Yc||1;if(dc.type!==wc||dc.size!==ic||dc.buffer!==qd||dc.normalized!==Md||dc.offset!==Mc||dc.stride!==oc)ga.bindBuffer(34962,qd.buffer),ga.vertexAttribPointer(Wb,ic,wc,Md,oc,Mc),dc.type=wc,dc.size=ic,dc.buffer=qd,dc.normalized=Md,dc.offset=Mc,dc.stride=oc;dc.divisor!==Dc&&(e.vertexAttribDivisorANGLE(Wb,
Dc),dc.divisor=Dc)}else if(dc.buffer&&(ga.disableVertexAttribArray(Wb),dc.buffer=null),dc.x!==cb||dc.y!==sc||dc.z!==Tb||dc.w!==hc)ga.vertexAttrib4f(Wb,cb,sc,Tb,hc),dc.x=cb,dc.y=sc,dc.z=Tb,dc.w=hc;yc=ea.call(this,v,q,g);Ac=!1;cd=null;Qc=0;Rc=!1;Zc=Uc=0;md=1;dd=0;$c=5126;Wc=ad=bc=kc=0;H(yc)?(Ac=!0,cd=w.createStream(34962,yc),$c=cd.dtype):(cd=w.getBuffer(yc))?$c=cd.dtype:"constant"in yc?(md=2,"number"===typeof yc.constant?(bc=yc.constant,ad=Wc=kc=0):(bc=0<yc.constant.length?yc.constant[0]:0,ad=1<yc.constant.length?
yc.constant[1]:0,Wc=2<yc.constant.length?yc.constant[2]:0,kc=3<yc.constant.length?yc.constant[3]:0)):(cd=H(yc.buffer)?w.createStream(34962,yc.buffer):w.getBuffer(yc.buffer),$c="type"in yc?de[yc.type]:cd.dtype,Rc=!!yc.normalized,Zc=yc.size|0,Uc=yc.offset|0,dd=yc.stride|0,Qc=yc.divisor|0);ed=Ba.location;zc=Ua[ed];if(1===md){zc.buffer||ga.enableVertexAttribArray(ed);id=Zc||1;if(zc.type!==$c||zc.size!==id||zc.buffer!==cd||zc.normalized!==Rc||zc.offset!==Uc||zc.stride!==dd)ga.bindBuffer(34962,cd.buffer),
ga.vertexAttribPointer(ed,id,$c,Rc,dd,Uc),zc.type=$c,zc.size=id,zc.buffer=cd,zc.normalized=Rc,zc.offset=Uc,zc.stride=dd;zc.divisor!==Qc&&(e.vertexAttribDivisorANGLE(ed,Qc),zc.divisor=Qc)}else if(zc.buffer&&(ga.disableVertexAttribArray(ed),zc.buffer=null),zc.x!==bc||zc.y!==ad||zc.z!==Wc||zc.w!==kc)ga.vertexAttrib4f(ed,bc,ad,Wc,kc),zc.x=bc,zc.y=ad,zc.z=Wc,zc.w=kc;rd=R.call(this,v,q,g);ve=!1;we=null;jd=0;bf=!1;Vd=Od=0;ie=1;Yd=0;Id=5126;wd=Vc=od=Gd=0;H(rd)?(ve=!0,we=w.createStream(34962,rd),Id=we.dtype):
(we=w.getBuffer(rd))?Id=we.dtype:"constant"in rd?(ie=2,"number"===typeof rd.constant?(od=rd.constant,Vc=wd=Gd=0):(od=0<rd.constant.length?rd.constant[0]:0,Vc=1<rd.constant.length?rd.constant[1]:0,wd=2<rd.constant.length?rd.constant[2]:0,Gd=3<rd.constant.length?rd.constant[3]:0)):(we=H(rd.buffer)?w.createStream(34962,rd.buffer):w.getBuffer(rd.buffer),Id="type"in rd?de[rd.type]:we.dtype,bf=!!rd.normalized,Vd=rd.size|0,Od=rd.offset|0,Yd=rd.stride|0,jd=rd.divisor|0);td=oa.location;kd=Ua[td];if(1===ie){kd.buffer||
ga.enableVertexAttribArray(td);xd=Vd||1;if(kd.type!==Id||kd.size!==xd||kd.buffer!==we||kd.normalized!==bf||kd.offset!==Od||kd.stride!==Yd)ga.bindBuffer(34962,we.buffer),ga.vertexAttribPointer(td,xd,Id,bf,Yd,Od),kd.type=Id,kd.size=xd,kd.buffer=we,kd.normalized=bf,kd.offset=Od,kd.stride=Yd;kd.divisor!==jd&&(e.vertexAttribDivisorANGLE(td,jd),kd.divisor=jd)}else if(kd.buffer&&(ga.disableVertexAttribArray(td),kd.buffer=null),kd.x!==od||kd.y!==Vc||kd.z!==wd||kd.w!==Gd)ga.vertexAttrib4f(td,od,Vc,wd,Gd),
kd.x=od,kd.y=Vc,kd.z=wd,kd.w=Gd;Bd=Q.call(this,v,q,g);Dd=!1;ge=null;je=0;xe=!1;he=ke=0;ee=1;ye=0;be=5126;te=hd=Nc=le=0;H(Bd)?(Dd=!0,ge=w.createStream(34962,Bd),be=ge.dtype):(ge=w.getBuffer(Bd))?be=ge.dtype:"constant"in Bd?(ee=2,"number"===typeof Bd.constant?(Nc=Bd.constant,hd=te=le=0):(Nc=0<Bd.constant.length?Bd.constant[0]:0,hd=1<Bd.constant.length?Bd.constant[1]:0,te=2<Bd.constant.length?Bd.constant[2]:0,le=3<Bd.constant.length?Bd.constant[3]:0)):(ge=H(Bd.buffer)?w.createStream(34962,Bd.buffer):
w.getBuffer(Bd.buffer),be="type"in Bd?de[Bd.type]:ge.dtype,xe=!!Bd.normalized,he=Bd.size|0,ke=Bd.offset|0,ye=Bd.stride|0,je=Bd.divisor|0);pe=l.location;Jd=Ua[pe];if(1===ee){Jd.buffer||ga.enableVertexAttribArray(pe);Pd=he||4;if(Jd.type!==be||Jd.size!==Pd||Jd.buffer!==ge||Jd.normalized!==xe||Jd.offset!==ke||Jd.stride!==ye)ga.bindBuffer(34962,ge.buffer),ga.vertexAttribPointer(pe,Pd,be,xe,ye,ke),Jd.type=be,Jd.size=Pd,Jd.buffer=ge,Jd.normalized=xe,Jd.offset=ke,Jd.stride=ye;Jd.divisor!==je&&(e.vertexAttribDivisorANGLE(pe,
je),Jd.divisor=je)}else if(Jd.buffer&&(ga.disableVertexAttribArray(pe),Jd.buffer=null),Jd.x!==Nc||Jd.y!==hd||Jd.z!==te||Jd.w!==le)ga.vertexAttrib4f(pe,Nc,hd,te,le),Jd.x=Nc,Jd.y=hd,Jd.z=te,Jd.w=le;Qd=z.call(this,v,q,g);Rd=!1;me=null;ze=0;Qe=!1;Re=re=0;Se=1;Me=0;ue=5126;Ie=He=Ge=Ee=0;H(Qd)?(Rd=!0,me=w.createStream(34962,Qd),ue=me.dtype):(me=w.getBuffer(Qd))?ue=me.dtype:"constant"in Qd?(Se=2,"number"===typeof Qd.constant?(Ge=Qd.constant,He=Ie=Ee=0):(Ge=0<Qd.constant.length?Qd.constant[0]:0,He=1<Qd.constant.length?
Qd.constant[1]:0,Ie=2<Qd.constant.length?Qd.constant[2]:0,Ee=3<Qd.constant.length?Qd.constant[3]:0)):(me=H(Qd.buffer)?w.createStream(34962,Qd.buffer):w.getBuffer(Qd.buffer),ue="type"in Qd?de[Qd.type]:me.dtype,Qe=!!Qd.normalized,Re=Qd.size|0,re=Qd.offset|0,Me=Qd.stride|0,ze=Qd.divisor|0);Fe=va.location;Kd=Ua[Fe];if(1===Se){Kd.buffer||ga.enableVertexAttribArray(Fe);Wd=Re||4;if(Kd.type!==ue||Kd.size!==Wd||Kd.buffer!==me||Kd.normalized!==Qe||Kd.offset!==re||Kd.stride!==Me)ga.bindBuffer(34962,me.buffer),
ga.vertexAttribPointer(Fe,Wd,ue,Qe,Me,re),Kd.type=ue,Kd.size=Wd,Kd.buffer=me,Kd.normalized=Qe,Kd.offset=re,Kd.stride=Me;Kd.divisor!==ze&&(e.vertexAttribDivisorANGLE(Fe,ze),Kd.divisor=ze)}else if(Kd.buffer&&(ga.disableVertexAttribArray(Fe),Kd.buffer=null),Kd.x!==Ge||Kd.y!==He||Kd.z!==Ie||Kd.w!==Ee)ga.vertexAttrib4f(Fe,Ge,He,Ie,Ee),Kd.x=Ge,Kd.y=He,Kd.z=Ie,Kd.w=Ee;ae=m.call(this,v,q,g);ce=!1;Je=null;Hd=0;Sd=!1;Ke=Ce=0;af=1;$e=0;Te=5126;Ue=Xe=Ze=Ne=0;H(ae)?(ce=!0,Je=w.createStream(34962,ae),Te=Je.dtype):
(Je=w.getBuffer(ae))?Te=Je.dtype:"constant"in ae?(af=2,"number"===typeof ae.constant?(Ze=ae.constant,Xe=Ue=Ne=0):(Ze=0<ae.constant.length?ae.constant[0]:0,Xe=1<ae.constant.length?ae.constant[1]:0,Ue=2<ae.constant.length?ae.constant[2]:0,Ne=3<ae.constant.length?ae.constant[3]:0)):(Je=H(ae.buffer)?w.createStream(34962,ae.buffer):w.getBuffer(ae.buffer),Te="type"in ae?de[ae.type]:Je.dtype,Sd=!!ae.normalized,Ke=ae.size|0,Ce=ae.offset|0,$e=ae.stride|0,Hd=ae.divisor|0);Ve=ca.location;Td=Ua[Ve];if(1===af){Td.buffer||
ga.enableVertexAttribArray(Ve);Zd=Ke||1;if(Td.type!==Te||Td.size!==Zd||Td.buffer!==Je||Td.normalized!==Sd||Td.offset!==Ce||Td.stride!==$e)ga.bindBuffer(34962,Je.buffer),ga.vertexAttribPointer(Ve,Zd,Te,Sd,$e,Ce),Td.type=Te,Td.size=Zd,Td.buffer=Je,Td.normalized=Sd,Td.offset=Ce,Td.stride=$e;Td.divisor!==Hd&&(e.vertexAttribDivisorANGLE(Ve,Hd),Td.divisor=Hd)}else if(Td.buffer&&(ga.disableVertexAttribArray(Ve),Td.buffer=null),Td.x!==Ze||Td.y!==Xe||Td.z!==Ue||Td.w!==Ne)ga.vertexAttrib4f(Ve,Ze,Xe,Ue,Ne),
Td.x=Ze,Td.y=Xe,Td.z=Ue,Td.w=Ne;We=v.pixelRatio;g&&jf===We||(jf=We,ga.uniform1f(Ca.location,We));nf=N.call(this,v,q,g);ff=nf[0];lf=nf[1];g&&kf===ff&&mf===lf||(kf=ff,mf=lf,ga.uniform2f(ma.location,ff,lf));rf=q.scale;of=rf[0];Bf=rf[1];g&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ga.uniform2f(ya.location,of,Bf));Oe=q.scaleFract;De=Oe[0];qf=Oe[1];g&&pf===De&&Df===qf||(pf=De,Df=qf,ga.uniform2f(fa.location,De,qf));Hf=q.translate;Af=Hf[0];Ff=Hf[1];g&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ga.uniform2f(la.location,Af,Ff));
xf=q.translateFract;vf=xf[0];zf=xf[1];g&&yf===vf&&Jf===zf||(yf=vf,Jf=zf,ga.uniform2f(pa.location,vf,zf));Kf=q.opacity;g&&Lf===Kf||(Lf=Kf,ga.uniform1f(S.location,Kf));Mf=q.elements;tf=null;(tf=(Rf=H(Mf))?Ea.createStream(Mf):Ea.getElements(Mf))&&ga.bindBuffer(34963,tf.buffer.buffer);If=q.offset;if(uf=q.count)0<$a?tf?e.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),$a):e.drawArraysInstancedANGLE(0,If,uf,$a):0>$a&&(tf?ga.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):ga.drawArrays(0,
If,uf)),v.viewportWidth=rc,v.viewportHeight=Nb,Ob&&w.destroyStream(rb),tb&&w.destroyStream(Pa),Ta&&w.destroyStream(nb),Rb&&w.destroyStream(qd),Ac&&w.destroyStream(cd),ve&&w.destroyStream(we),Dd&&w.destroyStream(ge),Rd&&w.destroyStream(me),ce&&w.destroyStream(Je),Rf&&Ea.destroyStream(tf)}V.unbind();M.dirty=!0;Aa.setVAO(null);d&&(F.cpuTime+=performance.now()-h)},draw:function(a){var c,d,e,q,m,k,n,p,r,A,x,E,Ha,Q,z,R,C,qa,D,N,G,V,P,Da,T,U,Y,ba,W,ea,ja,O,ia,na,ta,cc,Ja,Sc,zb,bb,Mb,$a,ob,Va,Cd,Hb,Ib,rc,
Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Md,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ve,we,jd,bf,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Qe,re,Re;c=lc.next;c!==lc.cur&&(c?ga.bindFramebuffer(36160,c.framebuffer):ga.bindFramebuffer(36160,null),lc.cur=c);
if(M.dirty){var Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,kf,lf,mf;Se=sa.dither;Se!==M.dither&&(Se?ga.enable(3024):ga.disable(3024),M.dither=Se);Me=Z[0];ue=Z[1];if(Me!==ua[0]||ue!==ua[1])ga.blendEquationSeparate(Me,ue),ua[0]=Me,ua[1]=ue;Ee=sa.depth_func;Ee!==M.depth_func&&(ga.depthFunc(Ee),M.depth_func=Ee);Ge=ha[0];He=ha[1];if(Ge!==Zb[0]||He!==Zb[1])ga.depthRange(Ge,He),Zb[0]=Ge,Zb[1]=He;Ie=sa.depth_mask;Ie!==M.depth_mask&&(ga.depthMask(Ie),M.depth_mask=
Ie);Fe=gb[0];Kd=gb[1];Wd=gb[2];ae=gb[3];if(Fe!==da[0]||Kd!==da[1]||Wd!==da[2]||ae!==da[3])ga.colorMask(Fe,Kd,Wd,ae),da[0]=Fe,da[1]=Kd,da[2]=Wd,da[3]=ae;ce=sa.cull_enable;ce!==M.cull_enable&&(ce?ga.enable(2884):ga.disable(2884),M.cull_enable=ce);Je=sa.cull_face;Je!==M.cull_face&&(ga.cullFace(Je),M.cull_face=Je);Hd=sa.frontFace;Hd!==M.frontFace&&(ga.frontFace(Hd),M.frontFace=Hd);Sd=sa.lineWidth;Sd!==M.lineWidth&&(ga.lineWidth(Sd),M.lineWidth=Sd);Ce=sa.polygonOffset_enable;Ce!==M.polygonOffset_enable&&
(Ce?ga.enable(32823):ga.disable(32823),M.polygonOffset_enable=Ce);Ke=Ga[0];af=Ga[1];if(Ke!==xa[0]||af!==xa[1])ga.polygonOffset(Ke,af),xa[0]=Ke,xa[1]=af;$e=sa.sample_alpha;$e!==M.sample_alpha&&($e?ga.enable(32926):ga.disable(32926),M.sample_alpha=$e);Te=sa.sample_enable;Te!==M.sample_enable&&(Te?ga.enable(32928):ga.disable(32928),M.sample_enable=Te);Ne=Sb[0];Ze=Sb[1];if(Ne!==ef[0]||Ze!==ef[1])ga.sampleCoverage(Ne,Ze),ef[0]=Ne,ef[1]=Ze;Xe=sa.stencil_mask;Xe!==M.stencil_mask&&(ga.stencilMask(Xe),M.stencil_mask=
Xe);Ue=Ud[0];Ve=Ud[1];Td=Ud[2];if(Ue!==Ae[0]||Ve!==Ae[1]||Td!==Ae[2])ga.stencilFunc(Ue,Ve,Td),Ae[0]=Ue,Ae[1]=Ve,Ae[2]=Td;Zd=ne[0];We=ne[1];jf=ne[2];nf=ne[3];if(Zd!==fe[0]||We!==fe[1]||jf!==fe[2]||nf!==fe[3])ga.stencilOpSeparate(Zd,We,jf,nf),fe[0]=Zd,fe[1]=We,fe[2]=jf,fe[3]=nf;ff=zd[0];kf=zd[1];lf=zd[2];mf=zd[3];if(ff!==Ld[0]||kf!==Ld[1]||lf!==Ld[2]||mf!==Ld[3])ga.stencilOpSeparate(ff,kf,lf,mf),Ld[0]=ff,Ld[1]=kf,Ld[2]=lf,Ld[3]=mf}d=a.viewport;e=d.x|0;q=d.y|0;m="width"in d?d.width|0:v.framebufferWidth-
e;k="height"in d?d.height|0:v.framebufferHeight-q;n=v.viewportWidth;v.viewportWidth=m;p=v.viewportHeight;v.viewportHeight=k;ga.viewport(e,q,m,k);ud[0]=e;ud[1]=q;ud[2]=m;ud[3]=k;ga.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ga.enable(3042);M.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;ga.disable(2929);M.depth_enable=!1;r=a.viewport;A=r.x|0;x=r.y|0;E="width"in r?r.width|0:v.framebufferWidth-A;Ha="height"in r?r.height|0:v.framebufferHeight-x;ga.scissor(A,
x,E,Ha);qe[0]=A;qe[1]=x;qe[2]=E;qe[3]=Ha;ga.enable(3089);M.scissor_enable=!0;ga.disable(2960);M.stencil_enable=!1;if(Q=M.profile)z=performance.now(),F.count++;ga.useProgram(J.program);R=mb.angle_instanced_arrays;Aa.setVAO(null);C=L.call(this,v,a,0);qa=!1;D=null;N=0;G=!1;P=V=0;Da=1;T=0;U=5126;ea=W=ba=Y=0;H(C)?(qa=!0,D=w.createStream(34962,C),U=D.dtype):(D=w.getBuffer(C))?U=D.dtype:"constant"in C?(Da=2,"number"===typeof C.constant?(ba=C.constant,W=ea=Y=0):(ba=0<C.constant.length?C.constant[0]:0,W=1<
C.constant.length?C.constant[1]:0,ea=2<C.constant.length?C.constant[2]:0,Y=3<C.constant.length?C.constant[3]:0)):(D=H(C.buffer)?w.createStream(34962,C.buffer):w.getBuffer(C.buffer),U="type"in C?de[C.type]:D.dtype,G=!!C.normalized,P=C.size|0,V=C.offset|0,T=C.stride|0,N=C.divisor|0);ja=za.location;O=Ua[ja];if(1===Da){O.buffer||ga.enableVertexAttribArray(ja);ia=P||1;if(O.type!==U||O.size!==ia||O.buffer!==D||O.normalized!==G||O.offset!==V||O.stride!==T)ga.bindBuffer(34962,D.buffer),ga.vertexAttribPointer(ja,
ia,U,G,T,V),O.type=U,O.size=ia,O.buffer=D,O.normalized=G,O.offset=V,O.stride=T;O.divisor!==N&&(R.vertexAttribDivisorANGLE(ja,N),O.divisor=N)}else if(O.buffer&&(ga.disableVertexAttribArray(ja),O.buffer=null),O.x!==ba||O.y!==W||O.z!==ea||O.w!==Y)ga.vertexAttrib4f(ja,ba,W,ea,Y),O.x=ba,O.y=W,O.z=ea,O.w=Y;na=f.call(this,v,a,0);ta=!1;cc=null;Ja=0;Sc=!1;bb=zb=0;Mb=1;$a=0;ob=5126;Ib=Hb=Cd=Va=0;H(na)?(ta=!0,cc=w.createStream(34962,na),ob=cc.dtype):(cc=w.getBuffer(na))?ob=cc.dtype:"constant"in na?(Mb=2,"number"===
typeof na.constant?(Cd=na.constant,Hb=Ib=Va=0):(Cd=0<na.constant.length?na.constant[0]:0,Hb=1<na.constant.length?na.constant[1]:0,Ib=2<na.constant.length?na.constant[2]:0,Va=3<na.constant.length?na.constant[3]:0)):(cc=H(na.buffer)?w.createStream(34962,na.buffer):w.getBuffer(na.buffer),ob="type"in na?de[na.type]:cc.dtype,Sc=!!na.normalized,bb=na.size|0,zb=na.offset|0,$a=na.stride|0,Ja=na.divisor|0);rc=X.location;Nb=Ua[rc];if(1===Mb){Nb.buffer||ga.enableVertexAttribArray(rc);jb=bb||1;if(Nb.type!==ob||
Nb.size!==jb||Nb.buffer!==cc||Nb.normalized!==Sc||Nb.offset!==zb||Nb.stride!==$a)ga.bindBuffer(34962,cc.buffer),ga.vertexAttribPointer(rc,jb,ob,Sc,$a,zb),Nb.type=ob,Nb.size=jb,Nb.buffer=cc,Nb.normalized=Sc,Nb.offset=zb,Nb.stride=$a;Nb.divisor!==Ja&&(R.vertexAttribDivisorANGLE(rc,Ja),Nb.divisor=Ja)}else if(Nb.buffer&&(ga.disableVertexAttribArray(rc),Nb.buffer=null),Nb.x!==Cd||Nb.y!==Hb||Nb.z!==Ib||Nb.w!==Va)ga.vertexAttrib4f(rc,Cd,Hb,Ib,Va),Nb.x=Cd,Nb.y=Hb,Nb.z=Ib,Nb.w=Va;Gb=h.call(this,v,a,0);Db=
!1;xb=null;hb=0;Xb=!1;rb=Ob=0;Sa=1;Pb=0;pb=5126;Ia=qb=ib=ac=0;H(Gb)?(Db=!0,xb=w.createStream(34962,Gb),pb=xb.dtype):(xb=w.getBuffer(Gb))?pb=xb.dtype:"constant"in Gb?(Sa=2,"number"===typeof Gb.constant?(ib=Gb.constant,qb=Ia=ac=0):(ib=0<Gb.constant.length?Gb.constant[0]:0,qb=1<Gb.constant.length?Gb.constant[1]:0,Ia=2<Gb.constant.length?Gb.constant[2]:0,ac=3<Gb.constant.length?Gb.constant[3]:0)):(xb=H(Gb.buffer)?w.createStream(34962,Gb.buffer):w.getBuffer(Gb.buffer),pb="type"in Gb?de[Gb.type]:xb.dtype,
Xb=!!Gb.normalized,rb=Gb.size|0,Ob=Gb.offset|0,Pb=Gb.stride|0,hb=Gb.divisor|0);sb=Ma.location;Ka=Ua[sb];if(1===Sa){Ka.buffer||ga.enableVertexAttribArray(sb);db=rb||1;if(Ka.type!==pb||Ka.size!==db||Ka.buffer!==xb||Ka.normalized!==Xb||Ka.offset!==Ob||Ka.stride!==Pb)ga.bindBuffer(34962,xb.buffer),ga.vertexAttribPointer(sb,db,pb,Xb,Pb,Ob),Ka.type=pb,Ka.size=db,Ka.buffer=xb,Ka.normalized=Xb,Ka.offset=Ob,Ka.stride=Pb;Ka.divisor!==hb&&(R.vertexAttribDivisorANGLE(sb,hb),Ka.divisor=hb)}else if(Ka.buffer&&
(ga.disableVertexAttribArray(sb),Ka.buffer=null),Ka.x!==ib||Ka.y!==qb||Ka.z!==Ia||Ka.w!==ac)ga.vertexAttrib4f(sb,ib,qb,Ia,ac),Ka.x=ib,Ka.y=qb,Ka.z=Ia,Ka.w=ac;fb=g.call(this,v,a,0);La=!1;kb=null;Wa=0;ub=!1;Pa=tb=0;Bc=1;Ra=0;Jb=5126;Ya=Md=Na=Eb=0;H(fb)?(La=!0,kb=w.createStream(34962,fb),Jb=kb.dtype):(kb=w.getBuffer(fb))?Jb=kb.dtype:"constant"in fb?(Bc=2,"number"===typeof fb.constant?(Na=fb.constant,Md=Ya=Eb=0):(Na=0<fb.constant.length?fb.constant[0]:0,Md=1<fb.constant.length?fb.constant[1]:0,Ya=2<fb.constant.length?
fb.constant[2]:0,Eb=3<fb.constant.length?fb.constant[3]:0)):(kb=H(fb.buffer)?w.createStream(34962,fb.buffer):w.getBuffer(fb.buffer),Jb="type"in fb?de[fb.type]:kb.dtype,ub=!!fb.normalized,Pa=fb.size|0,tb=fb.offset|0,Ra=fb.stride|0,Wa=fb.divisor|0);Kb=$b.location;Lb=Ua[Kb];if(1===Bc){Lb.buffer||ga.enableVertexAttribArray(Kb);lb=Pa||1;if(Lb.type!==Jb||Lb.size!==lb||Lb.buffer!==kb||Lb.normalized!==ub||Lb.offset!==tb||Lb.stride!==Ra)ga.bindBuffer(34962,kb.buffer),ga.vertexAttribPointer(Kb,lb,Jb,ub,Ra,
tb),Lb.type=Jb,Lb.size=lb,Lb.buffer=kb,Lb.normalized=ub,Lb.offset=tb,Lb.stride=Ra;Lb.divisor!==Wa&&(R.vertexAttribDivisorANGLE(Kb,Wa),Lb.divisor=Wa)}else if(Lb.buffer&&(ga.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Na||Lb.y!==Md||Lb.z!==Ya||Lb.w!==Eb)ga.vertexAttrib4f(Kb,Na,Md,Ya,Eb),Lb.x=Na,Lb.y=Md,Lb.z=Ya,Lb.w=Eb;Oa=b.call(this,v,a,0);Yb=!1;Qa=null;vb=0;wb=!1;nb=Ta=0;gc=1;Ec=0;vc=5126;Xa=Tc=jc=ab=0;H(Oa)?(Yb=!0,Qa=w.createStream(34962,Oa),vc=Qa.dtype):(Qa=w.getBuffer(Oa))?vc=Qa.dtype:"constant"in
Oa?(gc=2,"number"===typeof Oa.constant?(jc=Oa.constant,Tc=Xa=ab=0):(jc=0<Oa.constant.length?Oa.constant[0]:0,Tc=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,ab=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=H(Oa.buffer)?w.createStream(34962,Oa.buffer):w.getBuffer(Oa.buffer),vc="type"in Oa?de[Oa.type]:Qa.dtype,wb=!!Oa.normalized,nb=Oa.size|0,Ta=Oa.offset|0,Ec=Oa.stride|0,vb=Oa.divisor|0);ld=Ba.location;Ab=Ua[ld];if(1===gc){Ab.buffer||ga.enableVertexAttribArray(ld);Za=
nb||1;if(Ab.type!==vc||Ab.size!==Za||Ab.buffer!==Qa||Ab.normalized!==wb||Ab.offset!==Ta||Ab.stride!==Ec)ga.bindBuffer(34962,Qa.buffer),ga.vertexAttribPointer(ld,Za,vc,wb,Ec,Ta),Ab.type=vc,Ab.size=Za,Ab.buffer=Qa,Ab.normalized=wb,Ab.offset=Ta,Ab.stride=Ec;Ab.divisor!==vb&&(R.vertexAttribDivisorANGLE(ld,vb),Ab.divisor=vb)}else if(Ab.buffer&&(ga.disableVertexAttribArray(ld),Ab.buffer=null),Ab.x!==jc||Ab.y!==Tc||Ab.z!==Xa||Ab.w!==ab)ga.vertexAttrib4f(ld,jc,Tc,Xa,ab),Ab.x=jc,Ab.y=Tc,Ab.z=Xa,Ab.w=ab;Ub=
B.call(this,v,a,0);tc=!1;Vb=null;Qb=0;Kc=!1;qd=Rb=0;Dc=1;oe=0;Mc=5126;wc=oc=vd=Yc=0;H(Ub)?(tc=!0,Vb=w.createStream(34962,Ub),Mc=Vb.dtype):(Vb=w.getBuffer(Ub))?Mc=Vb.dtype:"constant"in Ub?(Dc=2,"number"===typeof Ub.constant?(vd=Ub.constant,oc=wc=Yc=0):(vd=0<Ub.constant.length?Ub.constant[0]:0,oc=1<Ub.constant.length?Ub.constant[1]:0,wc=2<Ub.constant.length?Ub.constant[2]:0,Yc=3<Ub.constant.length?Ub.constant[3]:0)):(Vb=H(Ub.buffer)?w.createStream(34962,Ub.buffer):w.getBuffer(Ub.buffer),Mc="type"in
Ub?de[Ub.type]:Vb.dtype,Kc=!!Ub.normalized,qd=Ub.size|0,Rb=Ub.offset|0,oe=Ub.stride|0,Qb=Ub.divisor|0);hc=oa.location;cb=Ua[hc];if(1===Dc){cb.buffer||ga.enableVertexAttribArray(hc);sc=qd||1;if(cb.type!==Mc||cb.size!==sc||cb.buffer!==Vb||cb.normalized!==Kc||cb.offset!==Rb||cb.stride!==oe)ga.bindBuffer(34962,Vb.buffer),ga.vertexAttribPointer(hc,sc,Mc,Kc,oe,Rb),cb.type=Mc,cb.size=sc,cb.buffer=Vb,cb.normalized=Kc,cb.offset=Rb,cb.stride=oe;cb.divisor!==Qb&&(R.vertexAttribDivisorANGLE(hc,Qb),cb.divisor=
Qb)}else if(cb.buffer&&(ga.disableVertexAttribArray(hc),cb.buffer=null),cb.x!==vd||cb.y!==oc||cb.z!==wc||cb.w!==Yc)ga.vertexAttrib4f(hc,vd,oc,wc,Yc),cb.x=vd,cb.y=oc,cb.z=wc,cb.w=Yc;Tb=y.call(this,v,a,0);Wb=!1;dc=null;ic=0;yc=!1;cd=Ac=0;Qc=1;Rc=0;Uc=5126;$c=dd=md=Zc=0;H(Tb)?(Wb=!0,dc=w.createStream(34962,Tb),Uc=dc.dtype):(dc=w.getBuffer(Tb))?Uc=dc.dtype:"constant"in Tb?(Qc=2,"number"===typeof Tb.constant?(md=Tb.constant,dd=$c=Zc=0):(md=0<Tb.constant.length?Tb.constant[0]:0,dd=1<Tb.constant.length?
Tb.constant[1]:0,$c=2<Tb.constant.length?Tb.constant[2]:0,Zc=3<Tb.constant.length?Tb.constant[3]:0)):(dc=H(Tb.buffer)?w.createStream(34962,Tb.buffer):w.getBuffer(Tb.buffer),Uc="type"in Tb?de[Tb.type]:dc.dtype,yc=!!Tb.normalized,cd=Tb.size|0,Ac=Tb.offset|0,Rc=Tb.stride|0,ic=Tb.divisor|0);kc=l.location;bc=Ua[kc];if(1===Qc){bc.buffer||ga.enableVertexAttribArray(kc);ad=cd||4;if(bc.type!==Uc||bc.size!==ad||bc.buffer!==dc||bc.normalized!==yc||bc.offset!==Ac||bc.stride!==Rc)ga.bindBuffer(34962,dc.buffer),
ga.vertexAttribPointer(kc,ad,Uc,yc,Rc,Ac),bc.type=Uc,bc.size=ad,bc.buffer=dc,bc.normalized=yc,bc.offset=Ac,bc.stride=Rc;bc.divisor!==ic&&(R.vertexAttribDivisorANGLE(kc,ic),bc.divisor=ic)}else if(bc.buffer&&(ga.disableVertexAttribArray(kc),bc.buffer=null),bc.x!==md||bc.y!==dd||bc.z!==$c||bc.w!==Zc)ga.vertexAttrib4f(kc,md,dd,$c,Zc),bc.x=md,bc.y=dd,bc.z=$c,bc.w=Zc;Wc=K.call(this,v,a,0);ed=!1;zc=null;id=0;rd=!1;we=ve=0;jd=1;bf=0;Od=5126;Id=Yd=ie=Vd=0;H(Wc)?(ed=!0,zc=w.createStream(34962,Wc),Od=zc.dtype):
(zc=w.getBuffer(Wc))?Od=zc.dtype:"constant"in Wc?(jd=2,"number"===typeof Wc.constant?(ie=Wc.constant,Yd=Id=Vd=0):(ie=0<Wc.constant.length?Wc.constant[0]:0,Yd=1<Wc.constant.length?Wc.constant[1]:0,Id=2<Wc.constant.length?Wc.constant[2]:0,Vd=3<Wc.constant.length?Wc.constant[3]:0)):(zc=H(Wc.buffer)?w.createStream(34962,Wc.buffer):w.getBuffer(Wc.buffer),Od="type"in Wc?de[Wc.type]:zc.dtype,rd=!!Wc.normalized,we=Wc.size|0,ve=Wc.offset|0,bf=Wc.stride|0,id=Wc.divisor|0);Gd=va.location;od=Ua[Gd];if(1===jd){od.buffer||
ga.enableVertexAttribArray(Gd);Vc=we||4;if(od.type!==Od||od.size!==Vc||od.buffer!==zc||od.normalized!==rd||od.offset!==ve||od.stride!==bf)ga.bindBuffer(34962,zc.buffer),ga.vertexAttribPointer(Gd,Vc,Od,rd,bf,ve),od.type=Od,od.size=Vc,od.buffer=zc,od.normalized=rd,od.offset=ve,od.stride=bf;od.divisor!==id&&(R.vertexAttribDivisorANGLE(Gd,id),od.divisor=id)}else if(od.buffer&&(ga.disableVertexAttribArray(Gd),od.buffer=null),od.x!==ie||od.y!==Yd||od.z!==Id||od.w!==Vd)ga.vertexAttrib4f(Gd,ie,Yd,Id,Vd),
od.x=ie,od.y=Yd,od.z=Id,od.w=Vd;wd=aa.call(this,v,a,0);td=!1;kd=null;xd=0;Bd=!1;ge=Dd=0;je=1;xe=0;ke=5126;be=ye=ee=he=0;H(wd)?(td=!0,kd=w.createStream(34962,wd),ke=kd.dtype):(kd=w.getBuffer(wd))?ke=kd.dtype:"constant"in wd?(je=2,"number"===typeof wd.constant?(ee=wd.constant,ye=be=he=0):(ee=0<wd.constant.length?wd.constant[0]:0,ye=1<wd.constant.length?wd.constant[1]:0,be=2<wd.constant.length?wd.constant[2]:0,he=3<wd.constant.length?wd.constant[3]:0)):(kd=H(wd.buffer)?w.createStream(34962,wd.buffer):
w.getBuffer(wd.buffer),ke="type"in wd?de[wd.type]:kd.dtype,Bd=!!wd.normalized,ge=wd.size|0,Dd=wd.offset|0,xe=wd.stride|0,xd=wd.divisor|0);le=ca.location;Nc=Ua[le];if(1===je){Nc.buffer||ga.enableVertexAttribArray(le);hd=ge||1;if(Nc.type!==ke||Nc.size!==hd||Nc.buffer!==kd||Nc.normalized!==Bd||Nc.offset!==Dd||Nc.stride!==xe)ga.bindBuffer(34962,kd.buffer),ga.vertexAttribPointer(le,hd,ke,Bd,xe,Dd),Nc.type=ke,Nc.size=hd,Nc.buffer=kd,Nc.normalized=Bd,Nc.offset=Dd,Nc.stride=xe;Nc.divisor!==xd&&(R.vertexAttribDivisorANGLE(le,
xd),Nc.divisor=xd)}else if(Nc.buffer&&(ga.disableVertexAttribArray(le),Nc.buffer=null),Nc.x!==ee||Nc.y!==ye||Nc.z!==be||Nc.w!==he)ga.vertexAttrib4f(le,ee,ye,be,he),Nc.x=ee,Nc.y=ye,Nc.z=be,Nc.w=he;ga.uniform1i(I.location,!1);ga.uniform1f(Ca.location,v.pixelRatio);te=t.call(this,v,a,0);ga.uniform2f(ma.location,te[0],te[1]);pe=a.scale;ga.uniform2f(ya.location,pe[0],pe[1]);Jd=a.scaleFract;ga.uniform2f(fa.location,Jd[0],Jd[1]);Pd=a.translate;ga.uniform2f(la.location,Pd[0],Pd[1]);Qd=a.translateFract;ga.uniform2f(pa.location,
Qd[0],Qd[1]);ga.uniform1f(S.location,a.opacity);ga.uniform1i(ra.location,u.bind());Rd=a.elements;me=null;(me=(ze=H(Rd))?Ea.createStream(Rd):Ea.getElements(Rd))&&ga.bindBuffer(34963,me.buffer.buffer);Qe=a.offset;if(re=a.count)Re=wa.instances,0<Re?me?R.drawElementsInstancedANGLE(0,re,me.type,Qe<<(me.type-5121>>1),Re):R.drawArraysInstancedANGLE(0,Qe,re,Re):0>Re&&(me?ga.drawElements(0,re,me.type,Qe<<(me.type-5121>>1)):ga.drawArrays(0,Qe,re)),M.dirty=!0,Aa.setVAO(null),v.viewportWidth=n,v.viewportHeight=
p,Q&&(F.cpuTime+=performance.now()-z),qa&&w.destroyStream(D),ta&&w.destroyStream(cc),Db&&w.destroyStream(xb),La&&w.destroyStream(kb),Yb&&w.destroyStream(Qa),tc&&w.destroyStream(Vb),Wb&&w.destroyStream(dc),ed&&w.destroyStream(zc),td&&w.destroyStream(kd),u.unbind(),ze&&Ea.destroyStream(me)},scope:function(b,h,l){var g,m,k,f,X,A,I,Q,R,z,S,L,u,fa,t,ga,y,$b,ka,N,Ma,J,B,V,Z,ca,Aa,ya,K,ra,va,da,aa,la,Y,ea,Ua,pa,Ba,ma,oa,za,na,ia,ua,lc,Ca,Fa,Ga,cc,mb,gb,ha,Sb,Zb,Sa,Pb,pb,Ud,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,
ub,tb,Pa,xa,Ra,Jb,Eb,Na,ud,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,yd,vc,ab,jc,Tc,Xa,Ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qe,Dc,Ae,Mc,Yc,fe,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd,ne,zd,jd,ef,Od,Vd,ie,Yd,Id,Gd,od,Vc,wd,td,kd,xd,Bd,Dd,ge,je,xe,ke,he,ee,ye,be,le,Nc,hd,te,pe,Jd,Pd,Qd,Rd,me,ze,Gf,re,Re,Se,Me,ue,Ee,Ge,He,Ie,Fe,Kd,Wd,ae,ce,Je,Hd,Sd,Ce,Ke,af,$e,Te,Ne,Ze,Xe,Ue,Ve,Td,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Oe,De,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,
Rf,If,uf,dg,Sf,Tf,qg,gf,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;g=b.viewport;m=g.x|0;k=g.y|0;f="width"in g?g.width|0:v.framebufferWidth-m;X="height"in g?g.height|0:v.framebufferHeight-k;A=v.viewportWidth;v.viewportWidth=f;I=v.viewportHeight;v.viewportHeight=X;Q=Md[0];Md[0]=m;R=Md[1];Md[1]=k;z=Md[2];Md[2]=f;S=Md[3];Md[3]=X;L=Da[0];Da[0]=0;u=Da[1];Da[1]=0;fa=Da[2];Da[2]=0;t=Da[3];Da[3]=
1;ga=sa.blend_enable;sa.blend_enable=!0;y=Ja[0];Ja[0]=770;$b=Ja[1];Ja[1]=771;ka=Ja[2];Ja[2]=773;N=Ja[3];Ja[3]=1;Ma=sa.depth_enable;sa.depth_enable=!1;J=b.viewport;B=J.x|0;V=J.y|0;Z="width"in J?J.width|0:v.framebufferWidth-B;ca="height"in J?J.height|0:v.framebufferHeight-V;Aa=Cd[0];Cd[0]=B;ya=Cd[1];Cd[1]=V;K=Cd[2];Cd[2]=Z;ra=Cd[3];Cd[3]=ca;va=sa.scissor_enable;sa.scissor_enable=!0;da=sa.stencil_enable;sa.stencil_enable=!1;if(aa=M.profile)la=performance.now(),F.count++;Y=b.elements;ea=null;ea=(Ua=H(Y))?
Ea.createStream(Y):Ea.getElements(Y);pa=wa.elements;wa.elements=ea;Ba=b.offset;ma=wa.offset;wa.offset=Ba;oa=b.count;za=wa.count;wa.count=oa;na=wa.primitive;wa.primitive=0;ia=qa[45];qa[45]=!1;ua=b.markerTexture;lc=qa[48];qa[48]=ua;Ca=b.opacity;Fa=qa[10];qa[10]=Ca;Ga=G.call(this,v,b,l);cc=qa[46];qa[46]=Ga;mb=qa[47];qa[47]=ba;gb=v.pixelRatio;ha=qa[34];qa[34]=gb;Sb=b.scale;Zb=qa[6];qa[6]=Sb;Sa=b.scaleFract;Pb=qa[7];qa[7]=Sa;pb=b.translate;Ud=qa[8];qa[8]=pb;ib=b.translateFract;qb=qa[9];qa[9]=ib;Ia=x.call(this,
v,b,l);sb=!1;Ka=null;db=0;fb=!1;kb=La=0;Wa=1;ub=0;tb=5126;Jb=Ra=xa=Pa=0;H(Ia)?(sb=!0,Ka=w.createStream(34962,Ia),tb=Ka.dtype):(Ka=w.getBuffer(Ia))?tb=Ka.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(xa=Ia.constant,Ra=Jb=Pa=0):(xa=0<Ia.constant.length?Ia.constant[0]:0,Ra=1<Ia.constant.length?Ia.constant[1]:0,Jb=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=H(Ia.buffer)?w.createStream(34962,Ia.buffer):w.getBuffer(Ia.buffer),tb="type"in Ia?de[Ia.type]:
Ka.dtype,fb=!!Ia.normalized,kb=Ia.size|0,La=Ia.offset|0,ub=Ia.stride|0,db=Ia.divisor|0);Eb=T.buffer;T.buffer=Ka;Na=T.divisor;T.divisor=db;ud=T.normalized;T.normalized=fb;Ya=T.offset;T.offset=La;Kb=T.size;T.size=kb;Lb=T.state;T.state=Wa;lb=T.stride;T.stride=ub;Oa=T.type;T.type=tb;Yb=T.w;T.w=Pa;Qa=T.x;T.x=xa;vb=T.y;T.y=Ra;wb=T.z;T.z=Jb;Ta=r.call(this,v,b,l);nb=!1;gc=null;yd=0;vc=!1;jc=ab=0;Tc=1;Xa=0;Ld=5126;tc=Ub=Za=Ab=0;H(Ta)?(nb=!0,gc=w.createStream(34962,Ta),Ld=gc.dtype):(gc=w.getBuffer(Ta))?Ld=
gc.dtype:"constant"in Ta?(Tc=2,"number"===typeof Ta.constant?(Za=Ta.constant,Ub=tc=Ab=0):(Za=0<Ta.constant.length?Ta.constant[0]:0,Ub=1<Ta.constant.length?Ta.constant[1]:0,tc=2<Ta.constant.length?Ta.constant[2]:0,Ab=3<Ta.constant.length?Ta.constant[3]:0)):(gc=H(Ta.buffer)?w.createStream(34962,Ta.buffer):w.getBuffer(Ta.buffer),Ld="type"in Ta?de[Ta.type]:gc.dtype,vc=!!Ta.normalized,jc=Ta.size|0,ab=Ta.offset|0,Xa=Ta.stride|0,yd=Ta.divisor|0);Vb=P.buffer;P.buffer=gc;Qb=P.divisor;P.divisor=yd;Kc=P.normalized;
P.normalized=vc;Rb=P.offset;P.offset=ab;qe=P.size;P.size=jc;Dc=P.state;P.state=Tc;Ae=P.stride;P.stride=Xa;Mc=P.type;P.type=Ld;Yc=P.w;P.w=Ab;fe=P.x;P.x=Za;oc=P.y;P.y=Ub;wc=P.z;P.z=tc;hc=ja.call(this,v,b,l);cb=!1;sc=null;Tb=0;Wb=!1;ic=dc=0;yc=1;Ac=0;cd=5126;Zc=Uc=Rc=Qc=0;H(hc)?(cb=!0,sc=w.createStream(34962,hc),cd=sc.dtype):(sc=w.getBuffer(hc))?cd=sc.dtype:"constant"in hc?(yc=2,"number"===typeof hc.constant?(Rc=hc.constant,Uc=Zc=Qc=0):(Rc=0<hc.constant.length?hc.constant[0]:0,Uc=1<hc.constant.length?
hc.constant[1]:0,Zc=2<hc.constant.length?hc.constant[2]:0,Qc=3<hc.constant.length?hc.constant[3]:0)):(sc=H(hc.buffer)?w.createStream(34962,hc.buffer):w.getBuffer(hc.buffer),cd="type"in hc?de[hc.type]:sc.dtype,Wb=!!hc.normalized,ic=hc.size|0,dc=hc.offset|0,Ac=hc.stride|0,Tb=hc.divisor|0);md=d.buffer;d.buffer=sc;dd=d.divisor;d.divisor=Tb;$c=d.normalized;d.normalized=Wb;kc=d.offset;d.offset=dc;bc=d.size;d.size=ic;ad=d.state;d.state=yc;Wc=d.stride;d.stride=Ac;ed=d.type;d.type=cd;zc=d.w;d.w=Qc;id=d.x;
d.x=Rc;rd=d.y;d.y=Uc;ne=d.z;d.z=Zc;zd=n.call(this,v,b,l);jd=!1;ef=null;Od=0;Vd=!1;Yd=ie=0;Id=1;Gd=0;od=5126;kd=td=wd=Vc=0;H(zd)?(jd=!0,ef=w.createStream(34962,zd),od=ef.dtype):(ef=w.getBuffer(zd))?od=ef.dtype:"constant"in zd?(Id=2,"number"===typeof zd.constant?(wd=zd.constant,td=kd=Vc=0):(wd=0<zd.constant.length?zd.constant[0]:0,td=1<zd.constant.length?zd.constant[1]:0,kd=2<zd.constant.length?zd.constant[2]:0,Vc=3<zd.constant.length?zd.constant[3]:0)):(ef=H(zd.buffer)?w.createStream(34962,zd.buffer):
w.getBuffer(zd.buffer),od="type"in zd?de[zd.type]:ef.dtype,Vd=!!zd.normalized,Yd=zd.size|0,ie=zd.offset|0,Gd=zd.stride|0,Od=zd.divisor|0);xd=U.buffer;U.buffer=ef;Bd=U.divisor;U.divisor=Od;Dd=U.normalized;U.normalized=Vd;ge=U.offset;U.offset=ie;je=U.size;U.size=Yd;xe=U.state;U.state=Id;ke=U.stride;U.stride=Gd;he=U.type;U.type=od;ee=U.w;U.w=Vc;ye=U.x;U.x=wd;be=U.y;U.y=td;le=U.z;U.z=kd;Nc=e.call(this,v,b,l);hd=!1;te=null;pe=0;Jd=!1;Qd=Pd=0;Rd=1;me=0;ze=5126;Se=Re=re=Gf=0;H(Nc)?(hd=!0,te=w.createStream(34962,
Nc),ze=te.dtype):(te=w.getBuffer(Nc))?ze=te.dtype:"constant"in Nc?(Rd=2,"number"===typeof Nc.constant?(re=Nc.constant,Re=Se=Gf=0):(re=0<Nc.constant.length?Nc.constant[0]:0,Re=1<Nc.constant.length?Nc.constant[1]:0,Se=2<Nc.constant.length?Nc.constant[2]:0,Gf=3<Nc.constant.length?Nc.constant[3]:0)):(te=H(Nc.buffer)?w.createStream(34962,Nc.buffer):w.getBuffer(Nc.buffer),ze="type"in Nc?de[Nc.type]:te.dtype,Jd=!!Nc.normalized,Qd=Nc.size|0,Pd=Nc.offset|0,me=Nc.stride|0,pe=Nc.divisor|0);Me=W.buffer;W.buffer=
te;ue=W.divisor;W.divisor=pe;Ee=W.normalized;W.normalized=Jd;Ge=W.offset;W.offset=Pd;He=W.size;W.size=Qd;Ie=W.state;W.state=Rd;Fe=W.stride;W.stride=me;Kd=W.type;W.type=ze;Wd=W.w;W.w=Gf;ae=W.x;W.x=re;ce=W.y;W.y=Re;Je=W.z;W.z=Se;Hd=E.call(this,v,b,l);Sd=!1;Ce=null;Ke=0;af=!1;Te=$e=0;Ne=1;Ze=0;Xe=5126;Zd=Td=Ve=Ue=0;H(Hd)?(Sd=!0,Ce=w.createStream(34962,Hd),Xe=Ce.dtype):(Ce=w.getBuffer(Hd))?Xe=Ce.dtype:"constant"in Hd?(Ne=2,"number"===typeof Hd.constant?(Ve=Hd.constant,Td=Zd=Ue=0):(Ve=0<Hd.constant.length?
Hd.constant[0]:0,Td=1<Hd.constant.length?Hd.constant[1]:0,Zd=2<Hd.constant.length?Hd.constant[2]:0,Ue=3<Hd.constant.length?Hd.constant[3]:0)):(Ce=H(Hd.buffer)?w.createStream(34962,Hd.buffer):w.getBuffer(Hd.buffer),Xe="type"in Hd?de[Hd.type]:Ce.dtype,af=!!Hd.normalized,Te=Hd.size|0,$e=Hd.offset|0,Ze=Hd.stride|0,Ke=Hd.divisor|0);We=p.buffer;p.buffer=Ce;jf=p.divisor;p.divisor=Ke;nf=p.normalized;p.normalized=af;ff=p.offset;p.offset=$e;kf=p.size;p.size=Te;lf=p.state;p.state=Ne;mf=p.stride;p.stride=Ze;
rf=p.type;p.type=Xe;of=p.w;p.w=Ue;sf=p.x;p.x=Ve;Bf=p.y;p.y=Td;Cf=p.z;p.z=Zd;Oe=O.call(this,v,b,l);De=!1;pf=null;qf=0;Df=!1;Af=Hf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;H(Oe)?(De=!0,pf=w.createStream(34962,Oe),wf=pf.dtype):(pf=w.getBuffer(Oe))?wf=pf.dtype:"constant"in Oe?(Ef=2,"number"===typeof Oe.constant?(vf=Oe.constant,yf=zf=xf=0):(vf=0<Oe.constant.length?Oe.constant[0]:0,yf=1<Oe.constant.length?Oe.constant[1]:0,zf=2<Oe.constant.length?Oe.constant[2]:0,xf=3<Oe.constant.length?Oe.constant[3]:0)):(pf=
H(Oe.buffer)?w.createStream(34962,Oe.buffer):w.getBuffer(Oe.buffer),wf="type"in Oe?de[Oe.type]:pf.dtype,Df=!!Oe.normalized,Af=Oe.size|0,Hf=Oe.offset|0,Ff=Oe.stride|0,qf=Oe.divisor|0);Jf=D.buffer;D.buffer=pf;Kf=D.divisor;D.divisor=qf;Lf=D.normalized;D.normalized=Df;Mf=D.offset;D.offset=Hf;tf=D.size;D.size=Af;Rf=D.state;D.state=Ef;If=D.stride;D.stride=Ff;uf=D.type;D.type=wf;dg=D.w;D.w=xf;Sf=D.x;D.x=vf;Tf=D.y;D.y=yf;qg=D.z;D.z=zf;gf=C.call(this,v,b,l);cf=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;
Zf=Yf=Xf=Uf=0;H(gf)?(cf=!0,Nf=w.createStream(34962,gf),Wf=Nf.dtype):(Nf=w.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=H(gf.buffer)?w.createStream(34962,gf.buffer):w.getBuffer(gf.buffer),Wf="type"in gf?de[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|
0,ig=gf.stride|0,Of=gf.divisor|0);jg=c.buffer;c.buffer=Nf;rg=c.divisor;c.divisor=Of;sg=c.normalized;c.normalized=eg;tg=c.offset;c.offset=fg;ug=c.size;c.size=gg;vg=c.state;c.state=hg;wg=c.stride;c.stride=ig;xg=c.type;c.type=Wf;yg=c.w;c.w=Uf;zg=c.x;c.x=Xf;Ag=c.y;c.y=Yf;Bg=c.z;c.z=Zf;hf=q.call(this,v,b,l);df=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;H(hf)?(df=!0,Pf=w.createStream(34962,hf),$f=Pf.dtype):(Pf=w.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?
(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=H(hf.buffer)?w.createStream(34962,hf.buffer):w.getBuffer(hf.buffer),$f="type"in hf?de[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=a.buffer;a.buffer=Pf;Cg=a.divisor;a.divisor=Qf;Dg=a.normalized;a.normalized=kg;Eg=a.offset;a.offset=lg;Fg=a.size;a.size=
mg;Gg=a.state;a.state=ng;Hg=a.stride;a.stride=og;Ig=a.type;a.type=$f;Jg=a.w;a.w=Vf;Kg=a.x;a.x=ag;Lg=a.y;a.y=bg;Mg=a.z;a.z=cg;Ng=Ha.vert;Ha.vert=59;Og=Ha.frag;Ha.frag=58;M.dirty=!0;h(v,b,l);v.viewportWidth=A;v.viewportHeight=I;Md[0]=Q;Md[1]=R;Md[2]=z;Md[3]=S;Da[0]=L;Da[1]=u;Da[2]=fa;Da[3]=t;sa.blend_enable=ga;Ja[0]=y;Ja[1]=$b;Ja[2]=ka;Ja[3]=N;sa.depth_enable=Ma;Cd[0]=Aa;Cd[1]=ya;Cd[2]=K;Cd[3]=ra;sa.scissor_enable=va;sa.stencil_enable=da;aa&&(F.cpuTime+=performance.now()-la);Ua&&Ea.destroyStream(ea);
wa.elements=pa;wa.offset=ma;wa.count=za;wa.primitive=na;qa[45]=ia;qa[48]=lc;qa[10]=Fa;qa[46]=cc;qa[47]=mb;qa[34]=ha;qa[6]=Zb;qa[7]=Pb;qa[8]=Ud;qa[9]=qb;sb&&w.destroyStream(Ka);T.buffer=Eb;T.divisor=Na;T.normalized=ud;T.offset=Ya;T.size=Kb;T.state=Lb;T.stride=lb;T.type=Oa;T.w=Yb;T.x=Qa;T.y=vb;T.z=wb;nb&&w.destroyStream(gc);P.buffer=Vb;P.divisor=Qb;P.normalized=Kc;P.offset=Rb;P.size=qe;P.state=Dc;P.stride=Ae;P.type=Mc;P.w=Yc;P.x=fe;P.y=oc;P.z=wc;cb&&w.destroyStream(sc);d.buffer=md;d.divisor=dd;d.normalized=
$c;d.offset=kc;d.size=bc;d.state=ad;d.stride=Wc;d.type=ed;d.w=zc;d.x=id;d.y=rd;d.z=ne;jd&&w.destroyStream(ef);U.buffer=xd;U.divisor=Bd;U.normalized=Dd;U.offset=ge;U.size=je;U.state=xe;U.stride=ke;U.type=he;U.w=ee;U.x=ye;U.y=be;U.z=le;hd&&w.destroyStream(te);W.buffer=Me;W.divisor=ue;W.normalized=Ee;W.offset=Ge;W.size=He;W.state=Ie;W.stride=Fe;W.type=Kd;W.w=Wd;W.x=ae;W.y=ce;W.z=Je;Sd&&w.destroyStream(Ce);p.buffer=We;p.divisor=jf;p.normalized=nf;p.offset=ff;p.size=kf;p.state=lf;p.stride=mf;p.type=rf;
p.w=of;p.x=sf;p.y=Bf;p.z=Cf;De&&w.destroyStream(pf);D.buffer=Jf;D.divisor=Kf;D.normalized=Lf;D.offset=Mf;D.size=tf;D.state=Rf;D.stride=If;D.type=uf;D.w=dg;D.x=Sf;D.y=Tf;D.z=qg;cf&&w.destroyStream(Nf);c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;df&&w.destroyStream(Pf);a.buffer=pg;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Ha.vert=Ng;Ha.frag=Og;M.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,O,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,cc,Y,ea){var R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,mb,lc,ga,H,sa,Ha,qa,Aa,Da,ka,Z;R=k.attributes;Q=k.buffer;z=k.context;m=k.current;V=k.draw;N=k.elements;va=k.extensions;oa=k.framebuffer;l=k.gl;I=k.isBufferArgs;ca=k.next;S=k.shader;
ma=k.uniforms;ra=k.vao;Ca=ca.blend_color;ya=m.blend_color;fa=ca.blend_equation;Ba=m.blend_equation;la=ca.blend_func;pa=m.blend_func;za=ca.colorMask;Ma=m.colorMask;X=ca.depth_range;$b=m.depth_range;Ua=ca.polygonOffset_offset;w=m.polygonOffset_offset;v=ca.sample_coverage;M=m.sample_coverage;wa=ca.scissor_box;Ea=m.scissor_box;mb=ca.stencil_func;lc=m.stencil_func;ga=ca.stencil_opBack;H=m.stencil_opBack;sa=ca.stencil_opFront;Ha=m.stencil_opFront;qa=ca.viewport;Aa=m.viewport;Da={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:4,stride:8};Z={offset:0,stride:8};return{batch:function(b,h){var g,k,f,x,S,qa,L,u,t,y,J,B,G;g=oa.next;g!==oa.cur&&(g?l.bindFramebuffer(36160,g.framebuffer):l.bindFramebuffer(36160,null),oa.cur=g);if(m.dirty){var K,aa,la,ba,ma,Ca,ha,xa,Ye,Le,Pe,Ed,Be,se,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec;K=ca.dither;K!==m.dither&&(K?l.enable(3024):l.disable(3024),m.dither=K);aa=fa[0];la=fa[1];if(aa!==Ba[0]||
la!==Ba[1])l.blendEquationSeparate(aa,la),Ba[0]=aa,Ba[1]=la;ba=ca.depth_func;ba!==m.depth_func&&(l.depthFunc(ba),m.depth_func=ba);ma=X[0];Ca=X[1];if(ma!==$b[0]||Ca!==$b[1])l.depthRange(ma,Ca),$b[0]=ma,$b[1]=Ca;ha=ca.depth_mask;ha!==m.depth_mask&&(l.depthMask(ha),m.depth_mask=ha);xa=za[0];Ye=za[1];Le=za[2];Pe=za[3];if(xa!==Ma[0]||Ye!==Ma[1]||Le!==Ma[2]||Pe!==Ma[3])l.colorMask(xa,Ye,Le,Pe),Ma[0]=xa,Ma[1]=Ye,Ma[2]=Le,Ma[3]=Pe;Ed=ca.cull_enable;Ed!==m.cull_enable&&(Ed?l.enable(2884):l.disable(2884),m.cull_enable=
Ed);Be=ca.cull_face;Be!==m.cull_face&&(l.cullFace(Be),m.cull_face=Be);se=ca.frontFace;se!==m.frontFace&&(l.frontFace(se),m.frontFace=se);Xd=ca.lineWidth;Xd!==m.lineWidth&&(l.lineWidth(Xd),m.lineWidth=Xd);Nd=ca.polygonOffset_enable;Nd!==m.polygonOffset_enable&&(Nd?l.enable(32823):l.disable(32823),m.polygonOffset_enable=Nd);Ad=Ua[0];nd=Ua[1];if(Ad!==w[0]||nd!==w[1])l.polygonOffset(Ad,nd),w[0]=Ad,w[1]=nd;bd=ca.sample_alpha;bd!==m.sample_alpha&&(bd?l.enable(32926):l.disable(32926),m.sample_alpha=bd);
sd=ca.sample_enable;sd!==m.sample_enable&&(sd?l.enable(32928):l.disable(32928),m.sample_enable=sd);Lc=v[0];pd=v[1];if(Lc!==M[0]||pd!==M[1])l.sampleCoverage(Lc,pd),M[0]=Lc,M[1]=pd;Fc=ca.stencil_mask;Fc!==m.stencil_mask&&(l.stencilMask(Fc),m.stencil_mask=Fc);fd=mb[0];Oc=mb[1];Ic=mb[2];if(fd!==lc[0]||Oc!==lc[1]||Ic!==lc[2])l.stencilFunc(fd,Oc,Ic),lc[0]=fd,lc[1]=Oc,lc[2]=Ic;Bb=sa[0];Fb=sa[1];uc=sa[2];yb=sa[3];if(Bb!==Ha[0]||Fb!==Ha[1]||uc!==Ha[2]||yb!==Ha[3])l.stencilOpSeparate(Bb,Fb,uc,yb),Ha[0]=Bb,
Ha[1]=Fb,Ha[2]=uc,Ha[3]=yb;xc=ga[0];Cb=ga[1];Jc=ga[2];mc=ga[3];if(xc!==H[0]||Cb!==H[1]||Jc!==H[2]||mc!==H[3])l.stencilOpSeparate(xc,Cb,Jc,mc),H[0]=xc,H[1]=Cb,H[2]=Jc,H[3]=mc;Gc=ca.scissor_enable;Gc!==m.scissor_enable&&(Gc?l.enable(3089):l.disable(3089),m.scissor_enable=Gc);gd=wa[0];Xc=wa[1];Cc=wa[2];ec=wa[3];if(gd!==Ea[0]||Xc!==Ea[1]||Cc!==Ea[2]||ec!==Ea[3])l.scissor(gd,Xc,Cc,ec),Ea[0]=gd,Ea[1]=Xc,Ea[2]=Cc,Ea[3]=ec}k=this.viewport;f=k.x|0;x=k.y|0;S="width"in k?k.width|0:z.framebufferWidth-f;qa="height"in
k?k.height|0:z.framebufferHeight-x;L=z.viewportWidth;z.viewportWidth=S;u=z.viewportHeight;z.viewportHeight=qa;l.viewport(f,x,S,qa);Aa[0]=f;Aa[1]=x;Aa[2]=S;Aa[3]=qa;l.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;l.enable(3042);m.blend_enable=!0;l.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;l.disable(2929);m.depth_enable=!1;l.disable(2960);m.stencil_enable=!1;if(t=m.profile)y=performance.now(),F.count+=h;l.useProgram(T.program);J=va.angle_instanced_arrays;var Hc,pc,
qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub;ra.setVAO(null);Z.buffer=this.sizeBuffer;Hc=!1;pc=null;qc=0;nc=!1;eb=fc=0;Sc=1;zb=0;bb=5126;Va=ob=$a=Mb=0;I(Z)?(Hc=!0,pc=Q.createStream(34962,Z),bb=pc.dtype):(pc=Q.getBuffer(Z))?bb=pc.dtype:"constant"in Z?(Sc=2,"number"===typeof Z.constant?($a=Z.constant,ob=Va=Mb=0):($a=0<Z.constant.length?Z.constant[0]:
0,ob=1<Z.constant.length?Z.constant[1]:0,Va=2<Z.constant.length?Z.constant[2]:0,Mb=3<Z.constant.length?Z.constant[3]:0)):(pc=I(Z.buffer)?Q.createStream(34962,Z.buffer):Q.getBuffer(Z.buffer),bb="type"in Z?Da[Z.type]:pc.dtype,nc=!!Z.normalized,eb=Z.size|0,fc=Z.offset|0,zb=Z.stride|0,qc=Z.divisor|0);Pc=ea.location;Hb=R[Pc];if(1===Sc){Hb.buffer||l.enableVertexAttribArray(Pc);Ib=eb||1;if(Hb.type!==bb||Hb.size!==Ib||Hb.buffer!==pc||Hb.normalized!==nc||Hb.offset!==fc||Hb.stride!==zb)l.bindBuffer(34962,pc.buffer),
l.vertexAttribPointer(Pc,Ib,bb,nc,zb,fc),Hb.type=bb,Hb.size=Ib,Hb.buffer=pc,Hb.normalized=nc,Hb.offset=fc,Hb.stride=zb;Hb.divisor!==qc&&(J.vertexAttribDivisorANGLE(Pc,qc),Hb.divisor=qc)}else if(Hb.buffer&&(l.disableVertexAttribArray(Pc),Hb.buffer=null),Hb.x!==$a||Hb.y!==ob||Hb.z!==Va||Hb.w!==Mb)l.vertexAttrib4f(Pc,$a,ob,Va,Mb),Hb.x=$a,Hb.y=ob,Hb.z=Va,Hb.w=Mb;ka.buffer=this.sizeBuffer;rc=!1;Nb=null;jb=0;Gb=!1;xb=Db=0;hb=1;Xb=0;Ob=5126;pb=Pb=Sa=rb=0;I(ka)?(rc=!0,Nb=Q.createStream(34962,ka),Ob=Nb.dtype):
(Nb=Q.getBuffer(ka))?Ob=Nb.dtype:"constant"in ka?(hb=2,"number"===typeof ka.constant?(Sa=ka.constant,Pb=pb=rb=0):(Sa=0<ka.constant.length?ka.constant[0]:0,Pb=1<ka.constant.length?ka.constant[1]:0,pb=2<ka.constant.length?ka.constant[2]:0,rb=3<ka.constant.length?ka.constant[3]:0)):(Nb=I(ka.buffer)?Q.createStream(34962,ka.buffer):Q.getBuffer(ka.buffer),Ob="type"in ka?Da[ka.type]:Nb.dtype,Gb=!!ka.normalized,xb=ka.size|0,Db=ka.offset|0,Xb=ka.stride|0,jb=ka.divisor|0);ac=D.location;ib=R[ac];if(1===hb){ib.buffer||
l.enableVertexAttribArray(ac);qb=xb||1;if(ib.type!==Ob||ib.size!==qb||ib.buffer!==Nb||ib.normalized!==Gb||ib.offset!==Db||ib.stride!==Xb)l.bindBuffer(34962,Nb.buffer),l.vertexAttribPointer(ac,qb,Ob,Gb,Xb,Db),ib.type=Ob,ib.size=qb,ib.buffer=Nb,ib.normalized=Gb,ib.offset=Db,ib.stride=Xb;ib.divisor!==jb&&(J.vertexAttribDivisorANGLE(ac,jb),ib.divisor=jb)}else if(ib.buffer&&(l.disableVertexAttribArray(ac),ib.buffer=null),ib.x!==Sa||ib.y!==Pb||ib.z!==pb||ib.w!==rb)l.vertexAttrib4f(ac,Sa,Pb,pb,rb),ib.x=
Sa,ib.y=Pb,ib.z=pb,ib.w=rb;Ia=this.charBuffer;sb=!1;Ka=null;db=0;fb=!1;kb=La=0;Wa=1;ub=0;tb=5126;Jb=Ra=Bc=Pa=0;I(Ia)?(sb=!0,Ka=Q.createStream(34962,Ia),tb=Ka.dtype):(Ka=Q.getBuffer(Ia))?tb=Ka.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(Bc=Ia.constant,Ra=Jb=Pa=0):(Bc=0<Ia.constant.length?Ia.constant[0]:0,Ra=1<Ia.constant.length?Ia.constant[1]:0,Jb=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=I(Ia.buffer)?Q.createStream(34962,Ia.buffer):Q.getBuffer(Ia.buffer),
tb="type"in Ia?Da[Ia.type]:Ka.dtype,fb=!!Ia.normalized,kb=Ia.size|0,La=Ia.offset|0,ub=Ia.stride|0,db=Ia.divisor|0);Eb=ta.location;Na=R[Eb];if(1===Wa){Na.buffer||l.enableVertexAttribArray(Eb);Fd=kb||1;if(Na.type!==tb||Na.size!==Fd||Na.buffer!==Ka||Na.normalized!==fb||Na.offset!==La||Na.stride!==ub)l.bindBuffer(34962,Ka.buffer),l.vertexAttribPointer(Eb,Fd,tb,fb,ub,La),Na.type=tb,Na.size=Fd,Na.buffer=Ka,Na.normalized=fb,Na.offset=La,Na.stride=ub;Na.divisor!==db&&(J.vertexAttribDivisorANGLE(Eb,db),Na.divisor=
db)}else if(Na.buffer&&(l.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)l.vertexAttrib4f(Eb,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ya=this.position;Kb=!1;Lb=null;lb=0;Oa=!1;Qa=Yb=0;vb=1;wb=0;Ta=5126;vc=Ec=gc=nb=0;I(Ya)?(Kb=!0,Lb=Q.createStream(34962,Ya),Ta=Lb.dtype):(Lb=Q.getBuffer(Ya))?Ta=Lb.dtype:"constant"in Ya?(vb=2,"number"===typeof Ya.constant?(gc=Ya.constant,Ec=vc=nb=0):(gc=0<Ya.constant.length?Ya.constant[0]:0,Ec=1<Ya.constant.length?Ya.constant[1]:
0,vc=2<Ya.constant.length?Ya.constant[2]:0,nb=3<Ya.constant.length?Ya.constant[3]:0)):(Lb=I(Ya.buffer)?Q.createStream(34962,Ya.buffer):Q.getBuffer(Ya.buffer),Ta="type"in Ya?Da[Ya.type]:Lb.dtype,Oa=!!Ya.normalized,Qa=Ya.size|0,Yb=Ya.offset|0,wb=Ya.stride|0,lb=Ya.divisor|0);ab=na.location;jc=R[ab];if(1===vb){jc.buffer||l.enableVertexAttribArray(ab);Tc=Qa||2;if(jc.type!==Ta||jc.size!==Tc||jc.buffer!==Lb||jc.normalized!==Oa||jc.offset!==Yb||jc.stride!==wb)l.bindBuffer(34962,Lb.buffer),l.vertexAttribPointer(ab,
Tc,Ta,Oa,wb,Yb),jc.type=Ta,jc.size=Tc,jc.buffer=Lb,jc.normalized=Oa,jc.offset=Yb,jc.stride=wb;jc.divisor!==lb&&(J.vertexAttribDivisorANGLE(ab,lb),jc.divisor=lb)}else if(jc.buffer&&(l.disableVertexAttribArray(ab),jc.buffer=null),jc.x!==gc||jc.y!==Ec||jc.z!==vc||jc.w!==nb)l.vertexAttrib4f(ab,gc,Ec,vc,nb),jc.x=gc,jc.y=Ec,jc.z=vc,jc.w=nb;Xa=this.viewportArray;l.uniform4f(Y.location,Xa[0],Xa[1],Xa[2],Xa[3]);ld=this.scale;l.uniform2f(ia.location,ld[0],ld[1]);Ab=this.translate;l.uniform2f(cc.location,Ab[0],
Ab[1]);(Za=V.elements)?l.bindBuffer(34963,Za.buffer.buffer):ra.currentVAO&&(Za=N.getElements(ra.currentVAO.elements))&&l.bindBuffer(34963,Za.buffer.buffer);Ub=V.instances;for(B=0;B<h;++B){G=b[B];var tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id,rd;tc=r.call(this,z,G,B);B&&Vb===tc||(Vb=tc,l.uniform1f(C.location,tc));Qb=P.call(this,z,G,B);B&&Kc===Qb||(Kc=Qb,l.uniform1f(q.location,Qb));Rb=G.align;B&&qd===Rb||(qd=Rb,l.uniform1f(U.location,
Rb));Dc=G.baseline;B&&oe===Dc||(oe=Dc,l.uniform1f(p.location,Dc));Mc=G.color;Yc=Mc[0];oc=Mc[1];hc=Mc[2];sc=Mc[3];B&&vd===Yc&&wc===oc&&cb===hc&&Tb===sc||(vd=Yc,wc=oc,cb=hc,Tb=sc,l.uniform4f(c.location,Yc,oc,hc,sc));Wb=O.call(this,z,G,B);dc=Wb[0];yc=Wb[1];B&&ic===dc&&Ac===yc||(ic=dc,Ac=yc,l.uniform2f(E.location,dc,yc));cd=d.call(this,z,G,B);Qc=cd[0];Uc=cd[1];B&&Rc===Qc&&Zc===Uc||(Rc=Qc,Zc=Uc,l.uniform2f(W.location,Qc,Uc));md=G.positionOffset;dd=md[0];kc=md[1];B&&$c===dd&&bc===kc||($c=dd,bc=kc,l.uniform2f(A.location,
dd,kc));ad=G.opacity;B&&Wc===ad||(Wc=ad,l.uniform1f(a.location,ad));(ed=n.call(this,z,G,B))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);zc=ed._texture;l.uniform1i(e.location,zc.bind());id=G.offset;if(rd=G.count)0<Ub?Za?J.drawElementsInstancedANGLE(0,rd,Za.type,id<<(Za.type-5121>>1),Ub):J.drawArraysInstancedANGLE(0,id,rd,Ub):0>Ub&&(Za?l.drawElements(0,rd,Za.type,id<<(Za.type-5121>>1)):l.drawArrays(0,id,rd)),zc.unbind()}Hc&&Q.destroyStream(pc);rc&&Q.destroyStream(Nb);sb&&Q.destroyStream(Ka);Kb&&
Q.destroyStream(Lb);m.dirty=!0;ra.setVAO(null);z.viewportWidth=L;z.viewportHeight=u;t&&(F.cpuTime+=performance.now()-y)},draw:function(d){var k,n,r,x,S,qa,u,t,y,B,G,P,K,T,aa,la,ba,O,ja,ma,Ca,ha,xa,Le,Pe,Ed,Be,se,Xd,Nd,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb;k=oa.next;k!==oa.cur&&(k?l.bindFramebuffer(36160,k.framebuffer):l.bindFramebuffer(36160,null),oa.cur=
k);if(m.dirty){var Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,Ub,tc,Vb,Qb,Kc,Rb,qd,Dc;Wa=ca.dither;Wa!==m.dither&&(Wa?l.enable(3024):l.disable(3024),m.dither=Wa);ub=fa[0];tb=fa[1];if(ub!==Ba[0]||tb!==Ba[1])l.blendEquationSeparate(ub,tb),Ba[0]=ub,Ba[1]=tb;Pa=ca.depth_func;Pa!==m.depth_func&&(l.depthFunc(Pa),m.depth_func=Pa);Bc=X[0];Ra=X[1];if(Bc!==$b[0]||Ra!==$b[1])l.depthRange(Bc,Ra),$b[0]=Bc,$b[1]=Ra;Jb=ca.depth_mask;Jb!==m.depth_mask&&(l.depthMask(Jb),
m.depth_mask=Jb);Eb=za[0];Na=za[1];Fd=za[2];Ya=za[3];if(Eb!==Ma[0]||Na!==Ma[1]||Fd!==Ma[2]||Ya!==Ma[3])l.colorMask(Eb,Na,Fd,Ya),Ma[0]=Eb,Ma[1]=Na,Ma[2]=Fd,Ma[3]=Ya;Kb=ca.cull_enable;Kb!==m.cull_enable&&(Kb?l.enable(2884):l.disable(2884),m.cull_enable=Kb);Lb=ca.cull_face;Lb!==m.cull_face&&(l.cullFace(Lb),m.cull_face=Lb);lb=ca.frontFace;lb!==m.frontFace&&(l.frontFace(lb),m.frontFace=lb);Oa=ca.lineWidth;Oa!==m.lineWidth&&(l.lineWidth(Oa),m.lineWidth=Oa);Yb=ca.polygonOffset_enable;Yb!==m.polygonOffset_enable&&
(Yb?l.enable(32823):l.disable(32823),m.polygonOffset_enable=Yb);Qa=Ua[0];vb=Ua[1];if(Qa!==w[0]||vb!==w[1])l.polygonOffset(Qa,vb),w[0]=Qa,w[1]=vb;wb=ca.sample_alpha;wb!==m.sample_alpha&&(wb?l.enable(32926):l.disable(32926),m.sample_alpha=wb);Ta=ca.sample_enable;Ta!==m.sample_enable&&(Ta?l.enable(32928):l.disable(32928),m.sample_enable=Ta);nb=v[0];gc=v[1];if(nb!==M[0]||gc!==M[1])l.sampleCoverage(nb,gc),M[0]=nb,M[1]=gc;Ec=ca.stencil_mask;Ec!==m.stencil_mask&&(l.stencilMask(Ec),m.stencil_mask=Ec);vc=
mb[0];ab=mb[1];jc=mb[2];if(vc!==lc[0]||ab!==lc[1]||jc!==lc[2])l.stencilFunc(vc,ab,jc),lc[0]=vc,lc[1]=ab,lc[2]=jc;Tc=sa[0];Xa=sa[1];ld=sa[2];Ab=sa[3];if(Tc!==Ha[0]||Xa!==Ha[1]||ld!==Ha[2]||Ab!==Ha[3])l.stencilOpSeparate(Tc,Xa,ld,Ab),Ha[0]=Tc,Ha[1]=Xa,Ha[2]=ld,Ha[3]=Ab;Za=ga[0];Ub=ga[1];tc=ga[2];Vb=ga[3];if(Za!==H[0]||Ub!==H[1]||tc!==H[2]||Vb!==H[3])l.stencilOpSeparate(Za,Ub,tc,Vb),H[0]=Za,H[1]=Ub,H[2]=tc,H[3]=Vb;Qb=ca.scissor_enable;Qb!==m.scissor_enable&&(Qb?l.enable(3089):l.disable(3089),m.scissor_enable=
Qb);Kc=wa[0];Rb=wa[1];qd=wa[2];Dc=wa[3];if(Kc!==Ea[0]||Rb!==Ea[1]||qd!==Ea[2]||Dc!==Ea[3])l.scissor(Kc,Rb,qd,Dc),Ea[0]=Kc,Ea[1]=Rb,Ea[2]=qd,Ea[3]=Dc}n=this.viewport;r=n.x|0;x=n.y|0;S="width"in n?n.width|0:z.framebufferWidth-r;qa="height"in n?n.height|0:z.framebufferHeight-x;u=z.viewportWidth;z.viewportWidth=S;t=z.viewportHeight;z.viewportHeight=qa;l.viewport(r,x,S,qa);Aa[0]=r;Aa[1]=x;Aa[2]=S;Aa[3]=qa;l.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;l.enable(3042);m.blend_enable=!0;l.blendFuncSeparate(770,
771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;l.disable(2929);m.depth_enable=!1;l.disable(2960);m.stencil_enable=!1;if(y=m.profile)B=performance.now(),F.count++;l.useProgram(J.program);G=va.angle_instanced_arrays;ra.setVAO(null);Z.buffer=this.sizeBuffer;P=!1;K=null;T=0;aa=!1;ba=la=0;O=1;ja=0;ma=5126;Le=xa=ha=Ca=0;I(Z)?(P=!0,K=Q.createStream(34962,Z),ma=K.dtype):(K=Q.getBuffer(Z))?ma=K.dtype:"constant"in Z?(O=2,"number"===typeof Z.constant?(ha=Z.constant,xa=Le=Ca=0):(ha=0<Z.constant.length?Z.constant[0]:
0,xa=1<Z.constant.length?Z.constant[1]:0,Le=2<Z.constant.length?Z.constant[2]:0,Ca=3<Z.constant.length?Z.constant[3]:0)):(K=I(Z.buffer)?Q.createStream(34962,Z.buffer):Q.getBuffer(Z.buffer),ma="type"in Z?Da[Z.type]:K.dtype,aa=!!Z.normalized,ba=Z.size|0,la=Z.offset|0,ja=Z.stride|0,T=Z.divisor|0);Pe=ea.location;Ed=R[Pe];if(1===O){Ed.buffer||l.enableVertexAttribArray(Pe);Be=ba||1;if(Ed.type!==ma||Ed.size!==Be||Ed.buffer!==K||Ed.normalized!==aa||Ed.offset!==la||Ed.stride!==ja)l.bindBuffer(34962,K.buffer),
l.vertexAttribPointer(Pe,Be,ma,aa,ja,la),Ed.type=ma,Ed.size=Be,Ed.buffer=K,Ed.normalized=aa,Ed.offset=la,Ed.stride=ja;Ed.divisor!==T&&(G.vertexAttribDivisorANGLE(Pe,T),Ed.divisor=T)}else if(Ed.buffer&&(l.disableVertexAttribArray(Pe),Ed.buffer=null),Ed.x!==ha||Ed.y!==xa||Ed.z!==Le||Ed.w!==Ca)l.vertexAttrib4f(Pe,ha,xa,Le,Ca),Ed.x=ha,Ed.y=xa,Ed.z=Le,Ed.w=Ca;ka.buffer=this.sizeBuffer;se=!1;Xd=null;Nd=0;Ad=!1;bd=nd=0;sd=1;Lc=0;pd=5126;Ic=Oc=fd=Fc=0;I(ka)?(se=!0,Xd=Q.createStream(34962,ka),pd=Xd.dtype):
(Xd=Q.getBuffer(ka))?pd=Xd.dtype:"constant"in ka?(sd=2,"number"===typeof ka.constant?(fd=ka.constant,Oc=Ic=Fc=0):(fd=0<ka.constant.length?ka.constant[0]:0,Oc=1<ka.constant.length?ka.constant[1]:0,Ic=2<ka.constant.length?ka.constant[2]:0,Fc=3<ka.constant.length?ka.constant[3]:0)):(Xd=I(ka.buffer)?Q.createStream(34962,ka.buffer):Q.getBuffer(ka.buffer),pd="type"in ka?Da[ka.type]:Xd.dtype,Ad=!!ka.normalized,bd=ka.size|0,nd=ka.offset|0,Lc=ka.stride|0,Nd=ka.divisor|0);Bb=D.location;Fb=R[Bb];if(1===sd){Fb.buffer||
l.enableVertexAttribArray(Bb);uc=bd||1;if(Fb.type!==pd||Fb.size!==uc||Fb.buffer!==Xd||Fb.normalized!==Ad||Fb.offset!==nd||Fb.stride!==Lc)l.bindBuffer(34962,Xd.buffer),l.vertexAttribPointer(Bb,uc,pd,Ad,Lc,nd),Fb.type=pd,Fb.size=uc,Fb.buffer=Xd,Fb.normalized=Ad,Fb.offset=nd,Fb.stride=Lc;Fb.divisor!==Nd&&(G.vertexAttribDivisorANGLE(Bb,Nd),Fb.divisor=Nd)}else if(Fb.buffer&&(l.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==fd||Fb.y!==Oc||Fb.z!==Ic||Fb.w!==Fc)l.vertexAttrib4f(Bb,fd,Oc,Ic,Fc),Fb.x=
fd,Fb.y=Oc,Fb.z=Ic,Fb.w=Fc;yb=this.charBuffer;xc=!1;Cb=null;Jc=0;mc=!1;gd=Gc=0;Xc=1;Cc=0;ec=5126;nc=qc=pc=Hc=0;I(yb)?(xc=!0,Cb=Q.createStream(34962,yb),ec=Cb.dtype):(Cb=Q.getBuffer(yb))?ec=Cb.dtype:"constant"in yb?(Xc=2,"number"===typeof yb.constant?(pc=yb.constant,qc=nc=Hc=0):(pc=0<yb.constant.length?yb.constant[0]:0,qc=1<yb.constant.length?yb.constant[1]:0,nc=2<yb.constant.length?yb.constant[2]:0,Hc=3<yb.constant.length?yb.constant[3]:0)):(Cb=I(yb.buffer)?Q.createStream(34962,yb.buffer):Q.getBuffer(yb.buffer),
ec="type"in yb?Da[yb.type]:Cb.dtype,mc=!!yb.normalized,gd=yb.size|0,Gc=yb.offset|0,Cc=yb.stride|0,Jc=yb.divisor|0);fc=ta.location;eb=R[fc];if(1===Xc){eb.buffer||l.enableVertexAttribArray(fc);Sc=gd||1;if(eb.type!==ec||eb.size!==Sc||eb.buffer!==Cb||eb.normalized!==mc||eb.offset!==Gc||eb.stride!==Cc)l.bindBuffer(34962,Cb.buffer),l.vertexAttribPointer(fc,Sc,ec,mc,Cc,Gc),eb.type=ec,eb.size=Sc,eb.buffer=Cb,eb.normalized=mc,eb.offset=Gc,eb.stride=Cc;eb.divisor!==Jc&&(G.vertexAttribDivisorANGLE(fc,Jc),eb.divisor=
Jc)}else if(eb.buffer&&(l.disableVertexAttribArray(fc),eb.buffer=null),eb.x!==pc||eb.y!==qc||eb.z!==nc||eb.w!==Hc)l.vertexAttrib4f(fc,pc,qc,nc,Hc),eb.x=pc,eb.y=qc,eb.z=nc,eb.w=Hc;zb=this.position;bb=!1;Mb=null;$a=0;ob=!1;Pc=Va=0;Hb=1;Ib=0;rc=5126;Db=Gb=jb=Nb=0;I(zb)?(bb=!0,Mb=Q.createStream(34962,zb),rc=Mb.dtype):(Mb=Q.getBuffer(zb))?rc=Mb.dtype:"constant"in zb?(Hb=2,"number"===typeof zb.constant?(jb=zb.constant,Gb=Db=Nb=0):(jb=0<zb.constant.length?zb.constant[0]:0,Gb=1<zb.constant.length?zb.constant[1]:
0,Db=2<zb.constant.length?zb.constant[2]:0,Nb=3<zb.constant.length?zb.constant[3]:0)):(Mb=I(zb.buffer)?Q.createStream(34962,zb.buffer):Q.getBuffer(zb.buffer),rc="type"in zb?Da[zb.type]:Mb.dtype,ob=!!zb.normalized,Pc=zb.size|0,Va=zb.offset|0,Ib=zb.stride|0,$a=zb.divisor|0);xb=na.location;hb=R[xb];if(1===Hb){hb.buffer||l.enableVertexAttribArray(xb);Xb=Pc||2;if(hb.type!==rc||hb.size!==Xb||hb.buffer!==Mb||hb.normalized!==ob||hb.offset!==Va||hb.stride!==Ib)l.bindBuffer(34962,Mb.buffer),l.vertexAttribPointer(xb,
Xb,rc,ob,Ib,Va),hb.type=rc,hb.size=Xb,hb.buffer=Mb,hb.normalized=ob,hb.offset=Va,hb.stride=Ib;hb.divisor!==$a&&(G.vertexAttribDivisorANGLE(xb,$a),hb.divisor=$a)}else if(hb.buffer&&(l.disableVertexAttribArray(xb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Nb)l.vertexAttrib4f(xb,jb,Gb,Db,Nb),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Nb;Ob=L.call(this,z,d,0);l.uniform1f(C.location,Ob);rb=f.call(this,z,d,0);l.uniform1f(q.location,rb);l.uniform1f(U.location,d.align);l.uniform1f(p.location,d.baseline);
Sa=this.viewportArray;l.uniform4f(Y.location,Sa[0],Sa[1],Sa[2],Sa[3]);Pb=d.color;l.uniform4f(c.location,Pb[0],Pb[1],Pb[2],Pb[3]);pb=h.call(this,z,d,0);l.uniform2f(E.location,pb[0],pb[1]);ac=g.call(this,z,d,0);l.uniform2f(W.location,ac[0],ac[1]);ib=this.scale;l.uniform2f(ia.location,ib[0],ib[1]);qb=this.translate;l.uniform2f(cc.location,qb[0],qb[1]);Ia=d.positionOffset;l.uniform2f(A.location,Ia[0],Ia[1]);l.uniform1f(a.location,d.opacity);(sb=b.call(this,z,d,0))&&"framebuffer"===sb._reglType&&(sb=sb.color[0]);
Ka=sb._texture;l.uniform1i(e.location,Ka.bind());(db=V.elements)?l.bindBuffer(34963,db.buffer.buffer):ra.currentVAO&&(db=N.getElements(ra.currentVAO.elements))&&l.bindBuffer(34963,db.buffer.buffer);fb=d.offset;if(La=d.count)kb=V.instances,0<kb?db?G.drawElementsInstancedANGLE(0,La,db.type,fb<<(db.type-5121>>1),kb):G.drawArraysInstancedANGLE(0,fb,La,kb):0>kb&&(db?l.drawElements(0,La,db.type,fb<<(db.type-5121>>1)):l.drawArrays(0,fb,La)),m.dirty=!0,ra.setVAO(null),z.viewportWidth=u,z.viewportHeight=t,
y&&(F.cpuTime+=performance.now()-B),P&&Q.destroyStream(K),se&&Q.destroyStream(Xd),xc&&Q.destroyStream(Cb),bb&&Q.destroyStream(Mb),Ka.unbind()},scope:function(a,c,b){var d,h,e,l,g,q,w,v,H,k,f,X,n,M,r,p,A,sa,E,Ha,C,R,L,D,fa,ga,$b,J,N,Ma,P,wa,Aa,ya,ra,va,T,U,Y,W,ea,O,Ua,ja,pa,Ba,oa,za,na,ia,Ea,lc,ta,cc,mb,ha,eb,xa,zb,bb,Mb,$a,ob,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa,ld,Ab,Za,
Ub,tc,Vb,Qb,Kc,Rb,qd,Dc,oe,Mc,Yc,vd,oc,wc,hc,cb,sc,Tb,Wb,dc,ic,yc,Ac,cd,Qc,Rc,Uc,Zc,md,dd,$c,kc,bc,ad,Wc,ed,zc,id;d=this.viewport;h=d.x|0;e=d.y|0;l="width"in d?d.width|0:z.framebufferWidth-h;g="height"in d?d.height|0:z.framebufferHeight-e;q=z.viewportWidth;z.viewportWidth=l;w=z.viewportHeight;z.viewportHeight=g;v=qa[0];qa[0]=h;H=qa[1];qa[1]=e;k=qa[2];qa[2]=l;f=qa[3];qa[3]=g;X=Ca[0];Ca[0]=0;n=Ca[1];Ca[1]=0;M=Ca[2];Ca[2]=0;r=Ca[3];Ca[3]=1;p=ca.blend_enable;ca.blend_enable=!0;A=la[0];la[0]=770;sa=la[1];
la[1]=771;E=la[2];la[2]=773;Ha=la[3];la[3]=1;C=ca.depth_enable;ca.depth_enable=!1;R=ca.stencil_enable;ca.stencil_enable=!1;if(L=m.profile)D=performance.now(),F.count++;fa=a.offset;ga=V.offset;V.offset=fa;$b=a.count;J=V.count;V.count=$b;N=V.primitive;V.primitive=0;Ma=a.align;P=ma[64];ma[64]=Ma;wa=B.call(this,z,a,b);Aa=ma[69];ma[69]=wa;ya=y.call(this,z,a,b);ra=ma[67];ma[67]=ya;va=K.call(this,z,a,b);T=ma[66];ma[66]=va;U=a.baseline;Y=ma[65];ma[65]=U;W=aa.call(this,z,a,b);ea=ma[62];ma[62]=W;O=a.color;
Ua=ma[14];ma[14]=O;ja=t.call(this,z,a,b);pa=ma[63];ma[63]=ja;Ba=a.opacity;oa=ma[10];ma[10]=Ba;za=a.positionOffset;na=ma[68];ma[68]=za;ia=this.scale;Ea=ma[6];ma[6]=ia;lc=this.translate;ta=ma[8];ma[8]=lc;cc=this.viewportArray;mb=ma[3];ma[3]=cc;ha=this.charBuffer;eb=!1;xa=null;zb=0;bb=!1;$a=Mb=0;ob=1;Va=0;Pc=5126;Nb=rc=Ib=Hb=0;I(ha)?(eb=!0,xa=Q.createStream(34962,ha),Pc=xa.dtype):(xa=Q.getBuffer(ha))?Pc=xa.dtype:"constant"in ha?(ob=2,"number"===typeof ha.constant?(Ib=ha.constant,rc=Nb=Hb=0):(Ib=0<ha.constant.length?
ha.constant[0]:0,rc=1<ha.constant.length?ha.constant[1]:0,Nb=2<ha.constant.length?ha.constant[2]:0,Hb=3<ha.constant.length?ha.constant[3]:0)):(xa=I(ha.buffer)?Q.createStream(34962,ha.buffer):Q.getBuffer(ha.buffer),Pc="type"in ha?Da[ha.type]:xa.dtype,bb=!!ha.normalized,$a=ha.size|0,Mb=ha.offset|0,Va=ha.stride|0,zb=ha.divisor|0);jb=u.buffer;u.buffer=xa;Gb=u.divisor;u.divisor=zb;Db=u.normalized;u.normalized=bb;xb=u.offset;u.offset=Mb;hb=u.size;u.size=$a;Xb=u.state;u.state=ob;Ob=u.stride;u.stride=Va;
rb=u.type;u.type=Pc;Sa=u.w;u.w=Hb;Pb=u.x;u.x=Ib;pb=u.y;u.y=rc;ac=u.z;u.z=Nb;ka.buffer=this.sizeBuffer;ib=!1;qb=null;Ia=0;sb=!1;db=Ka=0;fb=1;La=0;kb=5126;Pa=tb=ub=Wa=0;I(ka)?(ib=!0,qb=Q.createStream(34962,ka),kb=qb.dtype):(qb=Q.getBuffer(ka))?kb=qb.dtype:"constant"in ka?(fb=2,"number"===typeof ka.constant?(ub=ka.constant,tb=Pa=Wa=0):(ub=0<ka.constant.length?ka.constant[0]:0,tb=1<ka.constant.length?ka.constant[1]:0,Pa=2<ka.constant.length?ka.constant[2]:0,Wa=3<ka.constant.length?ka.constant[3]:0)):
(qb=I(ka.buffer)?Q.createStream(34962,ka.buffer):Q.getBuffer(ka.buffer),kb="type"in ka?Da[ka.type]:qb.dtype,sb=!!ka.normalized,db=ka.size|0,Ka=ka.offset|0,La=ka.stride|0,Ia=ka.divisor|0);Bc=G.buffer;G.buffer=qb;Ra=G.divisor;G.divisor=Ia;Jb=G.normalized;G.normalized=sb;Eb=G.offset;G.offset=Ka;Na=G.size;G.size=db;Fd=G.state;G.state=fb;Ya=G.stride;G.stride=La;Kb=G.type;G.type=kb;Lb=G.w;G.w=Wa;lb=G.x;G.x=ub;Oa=G.y;G.y=tb;Yb=G.z;G.z=Pa;Qa=this.position;vb=!1;wb=null;Ta=0;nb=!1;Ec=gc=0;vc=1;ab=0;jc=5126;
Ab=ld=Xa=Tc=0;I(Qa)?(vb=!0,wb=Q.createStream(34962,Qa),jc=wb.dtype):(wb=Q.getBuffer(Qa))?jc=wb.dtype:"constant"in Qa?(vc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,ld=Ab=Tc=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,ld=1<Qa.constant.length?Qa.constant[1]:0,Ab=2<Qa.constant.length?Qa.constant[2]:0,Tc=3<Qa.constant.length?Qa.constant[3]:0)):(wb=I(Qa.buffer)?Q.createStream(34962,Qa.buffer):Q.getBuffer(Qa.buffer),jc="type"in Qa?Da[Qa.type]:wb.dtype,nb=!!Qa.normalized,Ec=Qa.size|0,gc=Qa.offset|
0,ab=Qa.stride|0,Ta=Qa.divisor|0);Za=ba.buffer;ba.buffer=wb;Ub=ba.divisor;ba.divisor=Ta;tc=ba.normalized;ba.normalized=nb;Vb=ba.offset;ba.offset=gc;Qb=ba.size;ba.size=Ec;Kc=ba.state;ba.state=vc;Rb=ba.stride;ba.stride=ab;qd=ba.type;ba.type=jc;Dc=ba.w;ba.w=Tc;oe=ba.x;ba.x=Xa;Mc=ba.y;ba.y=ld;Yc=ba.z;ba.z=Ab;Z.buffer=this.sizeBuffer;vd=!1;oc=null;wc=0;hc=!1;sc=cb=0;Tb=1;Wb=0;dc=5126;cd=Ac=yc=ic=0;I(Z)?(vd=!0,oc=Q.createStream(34962,Z),dc=oc.dtype):(oc=Q.getBuffer(Z))?dc=oc.dtype:"constant"in Z?(Tb=2,
"number"===typeof Z.constant?(yc=Z.constant,Ac=cd=ic=0):(yc=0<Z.constant.length?Z.constant[0]:0,Ac=1<Z.constant.length?Z.constant[1]:0,cd=2<Z.constant.length?Z.constant[2]:0,ic=3<Z.constant.length?Z.constant[3]:0)):(oc=I(Z.buffer)?Q.createStream(34962,Z.buffer):Q.getBuffer(Z.buffer),dc="type"in Z?Da[Z.type]:oc.dtype,hc=!!Z.normalized,sc=Z.size|0,cb=Z.offset|0,Wb=Z.stride|0,wc=Z.divisor|0);Qc=x.buffer;x.buffer=oc;Rc=x.divisor;x.divisor=wc;Uc=x.normalized;x.normalized=hc;Zc=x.offset;x.offset=cb;md=
x.size;x.size=sc;dd=x.state;x.state=Tb;$c=x.stride;x.stride=Wb;kc=x.type;x.type=dc;bc=x.w;x.w=ic;ad=x.x;x.x=yc;Wc=x.y;x.y=Ac;ed=x.z;x.z=cd;zc=S.vert;S.vert=61;id=S.frag;S.frag=60;m.dirty=!0;c(z,a,b);z.viewportWidth=q;z.viewportHeight=w;qa[0]=v;qa[1]=H;qa[2]=k;qa[3]=f;Ca[0]=X;Ca[1]=n;Ca[2]=M;Ca[3]=r;ca.blend_enable=p;la[0]=A;la[1]=sa;la[2]=E;la[3]=Ha;ca.depth_enable=C;ca.stencil_enable=R;L&&(F.cpuTime+=performance.now()-D);V.offset=ga;V.count=J;V.primitive=N;ma[64]=P;ma[69]=Aa;ma[67]=ra;ma[66]=T;ma[65]=
Y;ma[62]=ea;ma[14]=Ua;ma[63]=pa;ma[10]=oa;ma[68]=na;ma[6]=Ea;ma[8]=ta;ma[3]=mb;eb&&Q.destroyStream(xa);u.buffer=jb;u.divisor=Gb;u.normalized=Db;u.offset=xb;u.size=hb;u.state=Xb;u.stride=Ob;u.type=rb;u.w=Sa;u.x=Pb;u.y=pb;u.z=ac;ib&&Q.destroyStream(qb);G.buffer=Bc;G.divisor=Ra;G.normalized=Jb;G.offset=Eb;G.size=Na;G.state=Fd;G.stride=Ya;G.type=Kb;G.w=Lb;G.x=lb;G.y=Oa;G.z=Yb;vb&&Q.destroyStream(wb);ba.buffer=Za;ba.divisor=Ub;ba.normalized=tc;ba.offset=Vb;ba.size=Qb;ba.state=Kc;ba.stride=Rb;ba.type=qd;
ba.w=Dc;ba.x=oe;ba.y=Mc;ba.z=Yc;vd&&Q.destroyStream(oc);x.buffer=Qc;x.divisor=Rc;x.normalized=Uc;x.offset=Zc;x.size=md;x.state=dd;x.stride=$c;x.type=kc;x.w=bc;x.x=ad;x.y=Wc;x.z=ed;S.vert=zc;S.frag=id;m.dirty=!0}}},$2:function(k,F,J){var L,f,h,g,b,B,y,K,aa,t,u,G,ba,x,T,r,P,O,d,n,U,e,W,E,p,ta,D,C,c,q;L=k.attributes;f=k.current;h=k.framebuffer;g=k.gl;b=k.next;B=k.vao;y=b.blend_color;K=f.blend_color;aa=b.blend_equation;t=f.blend_equation;u=b.blend_func;G=f.blend_func;ba=b.colorMask;x=f.colorMask;T=b.depth_range;
r=f.depth_range;P=b.polygonOffset_offset;O=f.polygonOffset_offset;d=b.sample_coverage;n=f.sample_coverage;U=b.scissor_box;e=f.scissor_box;W=b.stencil_func;E=f.stencil_func;p=b.stencil_opBack;ta=f.stencil_opBack;D=b.stencil_opFront;C=f.stencil_opFront;c=b.viewport;q=f.viewport;return{poll:function(){var a,k,A,L,J,B,F,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca;f.dirty=!1;k=b.blend_enable;A=b.cull_enable;L=b.depth_enable;J=b.dither;B=b.polygonOffset_enable;F=b.sample_alpha;R=b.sample_enable;Q=b.scissor_enable;
z=b.stencil_enable;m=b.cull_face;V=f.cull_face;N=b.depth_func;va=f.depth_func;oa=b.depth_mask;l=f.depth_mask;I=b.frontFace;ca=f.frontFace;S=b.lineWidth;ma=f.lineWidth;ra=b.stencil_mask;Ca=f.stencil_mask;a=h.next;a!==h.cur&&(a?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null),h.cur=a);k!==f.blend_enable&&(k?g.enable(3042):g.disable(3042),f.blend_enable=k);A!==f.cull_enable&&(A?g.enable(2884):g.disable(2884),f.cull_enable=A);L!==f.depth_enable&&(L?g.enable(2929):g.disable(2929),f.depth_enable=
L);J!==f.dither&&(J?g.enable(3024):g.disable(3024),f.dither=J);B!==f.polygonOffset_enable&&(B?g.enable(32823):g.disable(32823),f.polygonOffset_enable=B);F!==f.sample_alpha&&(F?g.enable(32926):g.disable(32926),f.sample_alpha=F);R!==f.sample_enable&&(R?g.enable(32928):g.disable(32928),f.sample_enable=R);Q!==f.scissor_enable&&(Q?g.enable(3089):g.disable(3089),f.scissor_enable=Q);z!==f.stencil_enable&&(z?g.enable(2960):g.disable(2960),f.stencil_enable=z);if(y[0]!==K[0]||y[1]!==K[1]||y[2]!==K[2]||y[3]!==
K[3])g.blendColor(y[0],y[1],y[2],y[3]),K[0]=y[0],K[1]=y[1],K[2]=y[2],K[3]=y[3];if(aa[0]!==t[0]||aa[1]!==t[1])g.blendEquationSeparate(aa[0],aa[1]),t[0]=aa[0],t[1]=aa[1];if(u[0]!==G[0]||u[1]!==G[1]||u[2]!==G[2]||u[3]!==G[3])g.blendFuncSeparate(u[0],u[1],u[2],u[3]),G[0]=u[0],G[1]=u[1],G[2]=u[2],G[3]=u[3];if(ba[0]!==x[0]||ba[1]!==x[1]||ba[2]!==x[2]||ba[3]!==x[3])g.colorMask(ba[0],ba[1],ba[2],ba[3]),x[0]=ba[0],x[1]=ba[1],x[2]=ba[2],x[3]=ba[3];m!==V&&(g.cullFace(m),f.cull_face=m);N!==va&&(g.depthFunc(N),
f.depth_func=N);oa!==l&&(g.depthMask(oa),f.depth_mask=oa);if(T[0]!==r[0]||T[1]!==r[1])g.depthRange(T[0],T[1]),r[0]=T[0],r[1]=T[1];I!==ca&&(g.frontFace(I),f.frontFace=I);S!==ma&&(g.lineWidth(S),f.lineWidth=S);if(P[0]!==O[0]||P[1]!==O[1])g.polygonOffset(P[0],P[1]),O[0]=P[0],O[1]=P[1];if(d[0]!==n[0]||d[1]!==n[1])g.sampleCoverage(d[0],d[1]),n[0]=d[0],n[1]=d[1];if(U[0]!==e[0]||U[1]!==e[1]||U[2]!==e[2]||U[3]!==e[3])g.scissor(U[0],U[1],U[2],U[3]),e[0]=U[0],e[1]=U[1],e[2]=U[2],e[3]=U[3];if(W[0]!==E[0]||W[1]!==
E[1]||W[2]!==E[2])g.stencilFunc(W[0],W[1],W[2]),E[0]=W[0],E[1]=W[1],E[2]=W[2];ra!==Ca&&(g.stencilMask(ra),f.stencil_mask=ra);if(p[0]!==ta[0]||p[1]!==ta[1]||p[2]!==ta[2]||p[3]!==ta[3])g.stencilOpSeparate(p[0],p[1],p[2],p[3]),ta[0]=p[0],ta[1]=p[1],ta[2]=p[2],ta[3]=p[3];if(D[0]!==C[0]||D[1]!==C[1]||D[2]!==C[2]||D[3]!==C[3])g.stencilOpSeparate(D[0],D[1],D[2],D[3]),C[0]=D[0],C[1]=D[1],C[2]=D[2],C[3]=D[3];if(c[0]!==q[0]||c[1]!==q[1]||c[2]!==q[2]||c[3]!==q[3])g.viewport(c[0],c[1],c[2],c[3]),q[0]=c[0],q[1]=
c[1],q[2]=c[2],q[3]=c[3]},refresh:function(){var a,k,A,J,F,Y,ea,R,Q,z,m,V,N,va,oa,l;f.dirty=!1;k=b.blend_enable;A=b.cull_enable;J=b.depth_enable;F=b.dither;Y=b.polygonOffset_enable;ea=b.sample_alpha;R=b.sample_enable;Q=b.scissor_enable;z=b.stencil_enable;m=b.cull_face;V=b.depth_func;N=b.depth_mask;va=b.frontFace;oa=b.lineWidth;l=b.stencil_mask;(a=h.next)?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null);h.cur=a;a=L[0];a.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,a.buffer.buffer),
g.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=L[1];a.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=L[2];a.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(2,a.size,
a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=L[3];a.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=L[4];a.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):
(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=L[5];a.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=L[6];a.buffer?(g.enableVertexAttribArray(6),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(6),
g.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=L[7];a.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=L[8];a.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,a.x,a.y,a.z,
a.w),a.buffer=null);a=L[9];a.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=L[10];a.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=L[11];
a.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=L[12];a.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=L[13];a.buffer?(g.enableVertexAttribArray(13),
g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=L[14];a.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=L[15];a.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,a.buffer.buffer),
g.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);B.currentVAO=null;B.setVAO(B.targetVAO);k?g.enable(3042):g.disable(3042);f.blend_enable=k;A?g.enable(2884):g.disable(2884);f.cull_enable=A;J?g.enable(2929):g.disable(2929);f.depth_enable=J;F?g.enable(3024):g.disable(3024);f.dither=F;Y?g.enable(32823):g.disable(32823);f.polygonOffset_enable=Y;ea?g.enable(32926):g.disable(32926);f.sample_alpha=ea;
R?g.enable(32928):g.disable(32928);f.sample_enable=R;Q?g.enable(3089):g.disable(3089);f.scissor_enable=Q;z?g.enable(2960):g.disable(2960);f.stencil_enable=z;g.blendColor(y[0],y[1],y[2],y[3]);K[0]=y[0];K[1]=y[1];K[2]=y[2];K[3]=y[3];g.blendEquationSeparate(aa[0],aa[1]);t[0]=aa[0];t[1]=aa[1];g.blendFuncSeparate(u[0],u[1],u[2],u[3]);G[0]=u[0];G[1]=u[1];G[2]=u[2];G[3]=u[3];g.colorMask(ba[0],ba[1],ba[2],ba[3]);x[0]=ba[0];x[1]=ba[1];x[2]=ba[2];x[3]=ba[3];g.cullFace(m);f.cull_face=m;g.depthFunc(V);f.depth_func=
V;g.depthMask(N);f.depth_mask=N;g.depthRange(T[0],T[1]);r[0]=T[0];r[1]=T[1];g.frontFace(va);f.frontFace=va;g.lineWidth(oa);f.lineWidth=oa;g.polygonOffset(P[0],P[1]);O[0]=P[0];O[1]=P[1];g.sampleCoverage(d[0],d[1]);n[0]=d[0];n[1]=d[1];g.scissor(U[0],U[1],U[2],U[3]);e[0]=U[0];e[1]=U[1];e[2]=U[2];e[3]=U[3];g.stencilFunc(W[0],W[1],W[2]);E[0]=W[0];E[1]=W[1];E[2]=W[2];g.stencilMask(l);f.stencil_mask=l;g.stencilOpSeparate(p[0],p[1],p[2],p[3]);ta[0]=p[0];ta[1]=p[1];ta[2]=p[2];ta[3]=p[3];g.stencilOpSeparate(D[0],
D[1],D[2],D[3]);C[0]=D[0];C[1]=D[1];C[2]=D[2];C[3]=D[3];g.viewport(c[0],c[1],c[2],c[3]);q[0]=c[0];q[1]=c[1];q[2]=c[2];q[3]=c[3]}}},$7:function(k,F,J,L,f,h,g,b){var B,y,K,aa,t,u,G,ba,x,T,r,P,O,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,ha,Y,ea,R;B=k.context;y=k.current;K=k.framebuffer;aa=k.gl;t=k.next;u=k.shader;G=k.vao;ba=t.blend_color;x=y.blend_color;T=t.blend_equation;r=y.blend_equation;P=t.blend_func;O=y.blend_func;d=t.colorMask;n=y.colorMask;U=t.depth_range;e=y.depth_range;W=t.polygonOffset_offset;E=
y.polygonOffset_offset;p=t.sample_coverage;ta=y.sample_coverage;D=t.scissor_box;C=y.scissor_box;c=t.stencil_func;q=y.stencil_func;a=t.stencil_opBack;na=y.stencil_opBack;A=t.stencil_opFront;ia=y.stencil_opFront;ha=t.viewport;Y=y.viewport;ea={};R={};return{draw:function(b){var g,m,k,R,D,oa,l,I,ca,S;g=b.framebuffer;m=K.getFramebuffer(g);g&&!m&&F.commandRaise(f,J);g=K.next;K.next=m;k=B.framebufferWidth;B.framebufferWidth=m?m.width:B.drawingBufferWidth;R=B.framebufferHeight;B.framebufferHeight=m?m.height:
B.drawingBufferHeight;m!==K.cur&&(m?aa.bindFramebuffer(36160,m.framebuffer):aa.bindFramebuffer(36160,null),K.cur=m);if(y.dirty){m=t.dither;m!==y.dither&&(m?aa.enable(3024):aa.disable(3024),y.dither=m);m=t.blend_enable;m!==y.blend_enable&&(m?aa.enable(3042):aa.disable(3042),y.blend_enable=m);m=ba[0];l=ba[1];D=ba[2];oa=ba[3];if(m!==x[0]||l!==x[1]||D!==x[2]||oa!==x[3])aa.blendColor(m,l,D,oa),x[0]=m,x[1]=l,x[2]=D,x[3]=oa;m=T[0];l=T[1];if(m!==r[0]||l!==r[1])aa.blendEquationSeparate(m,l),r[0]=m,r[1]=l;
m=P[0];l=P[1];D=P[2];oa=P[3];if(m!==O[0]||l!==O[1]||D!==O[2]||oa!==O[3])aa.blendFuncSeparate(m,l,D,oa),O[0]=m,O[1]=l,O[2]=D,O[3]=oa;m=t.depth_enable;m!==y.depth_enable&&(m?aa.enable(2929):aa.disable(2929),y.depth_enable=m);m=t.depth_func;m!==y.depth_func&&(aa.depthFunc(m),y.depth_func=m);m=U[0];l=U[1];if(m!==e[0]||l!==e[1])aa.depthRange(m,l),e[0]=m,e[1]=l;m=t.depth_mask;m!==y.depth_mask&&(aa.depthMask(m),y.depth_mask=m);m=d[0];l=d[1];D=d[2];oa=d[3];if(m!==n[0]||l!==n[1]||D!==n[2]||oa!==n[3])aa.colorMask(m,
l,D,oa),n[0]=m,n[1]=l,n[2]=D,n[3]=oa;m=t.cull_enable;m!==y.cull_enable&&(m?aa.enable(2884):aa.disable(2884),y.cull_enable=m);m=t.cull_face;m!==y.cull_face&&(aa.cullFace(m),y.cull_face=m);m=t.frontFace;m!==y.frontFace&&(aa.frontFace(m),y.frontFace=m);m=t.lineWidth;m!==y.lineWidth&&(aa.lineWidth(m),y.lineWidth=m);m=t.polygonOffset_enable;m!==y.polygonOffset_enable&&(m?aa.enable(32823):aa.disable(32823),y.polygonOffset_enable=m);m=W[0];l=W[1];if(m!==E[0]||l!==E[1])aa.polygonOffset(m,l),E[0]=m,E[1]=l;
m=t.sample_alpha;m!==y.sample_alpha&&(m?aa.enable(32926):aa.disable(32926),y.sample_alpha=m);m=t.sample_enable;m!==y.sample_enable&&(m?aa.enable(32928):aa.disable(32928),y.sample_enable=m);m=p[0];l=p[1];if(m!==ta[0]||l!==ta[1])aa.sampleCoverage(m,l),ta[0]=m,ta[1]=l;m=t.stencil_enable;m!==y.stencil_enable&&(m?aa.enable(2960):aa.disable(2960),y.stencil_enable=m);m=t.stencil_mask;m!==y.stencil_mask&&(aa.stencilMask(m),y.stencil_mask=m);m=c[0];l=c[1];D=c[2];if(m!==q[0]||l!==q[1]||D!==q[2])aa.stencilFunc(m,
l,D),q[0]=m,q[1]=l,q[2]=D;m=A[0];l=A[1];D=A[2];oa=A[3];if(m!==ia[0]||l!==ia[1]||D!==ia[2]||oa!==ia[3])aa.stencilOpSeparate(m,l,D,oa),ia[0]=m,ia[1]=l,ia[2]=D,ia[3]=oa;m=a[0];l=a[1];D=a[2];oa=a[3];if(m!==na[0]||l!==na[1]||D!==na[2]||oa!==na[3])aa.stencilOpSeparate(m,l,D,oa),na[0]=m,na[1]=l,na[2]=D,na[3]=oa;m=t.scissor_enable;m!==y.scissor_enable&&(m?aa.enable(3089):aa.disable(3089),y.scissor_enable=m)}D=B.framebufferWidth;oa=B.framebufferHeight;m=B.viewportWidth;B.viewportWidth=D;l=B.viewportHeight;
B.viewportHeight=oa;aa.viewport(0,0,D,oa);Y[0]=0;Y[1]=0;Y[2]=D;Y[3]=oa;D=B.framebufferWidth;oa=B.framebufferHeight;aa.scissor(0,0,D,oa);C[0]=0;C[1]=0;C[2]=D;C[3]=oa;if(D=y.profile)I=performance.now(),L.count++;oa=u.program(u.vert,u.frag,J);aa.useProgram(oa.program);G.setVAO(null);ca=oa.id;(S=ea[ca])||(S=ea[ca]=h(oa));S.call(this,b);y.dirty=!0;G.setVAO(null);K.next=g;B.framebufferWidth=k;B.framebufferHeight=R;B.viewportWidth=m;B.viewportHeight=l;D&&(L.cpuTime+=performance.now()-I)},scope:function(a,
c,b){var d,h,e,q,l,k,f,n,r,p,A,x,E,C,R;d=a.framebuffer;h=K.getFramebuffer(d);d&&!h&&F.commandRaise(g,J);d=K.next;K.next=h;e=B.framebufferWidth;B.framebufferWidth=h?h.width:B.drawingBufferWidth;q=B.framebufferHeight;B.framebufferHeight=h?h.height:B.drawingBufferHeight;l=B.framebufferWidth;k=B.framebufferHeight;h=B.viewportWidth;B.viewportWidth=l;f=B.viewportHeight;B.viewportHeight=k;n=ha[0];ha[0]=0;r=ha[1];ha[1]=0;p=ha[2];ha[2]=l;l=ha[3];ha[3]=k;A=B.framebufferWidth;x=B.framebufferHeight;k=D[0];D[0]=
0;E=D[1];D[1]=0;C=D[2];D[2]=A;A=D[3];D[3]=x;if(x=y.profile)R=performance.now(),L.count++;y.dirty=!0;c(B,a,b);K.next=d;B.framebufferWidth=e;B.framebufferHeight=q;B.viewportWidth=h;B.viewportHeight=f;ha[0]=n;ha[1]=r;ha[2]=p;ha[3]=l;D[0]=k;D[1]=E;D[2]=C;D[3]=A;x&&(L.cpuTime+=performance.now()-R);y.dirty=!0},batch:function(h,g){var m,k,f,C,D;if(y.dirty){m=t.dither;m!==y.dither&&(m?aa.enable(3024):aa.disable(3024),y.dither=m);m=t.blend_enable;m!==y.blend_enable&&(m?aa.enable(3042):aa.disable(3042),y.blend_enable=
m);m=ba[0];f=ba[1];C=ba[2];D=ba[3];if(m!==x[0]||f!==x[1]||C!==x[2]||D!==x[3])aa.blendColor(m,f,C,D),x[0]=m,x[1]=f,x[2]=C,x[3]=D;m=T[0];f=T[1];if(m!==r[0]||f!==r[1])aa.blendEquationSeparate(m,f),r[0]=m,r[1]=f;m=P[0];f=P[1];C=P[2];D=P[3];if(m!==O[0]||f!==O[1]||C!==O[2]||D!==O[3])aa.blendFuncSeparate(m,f,C,D),O[0]=m,O[1]=f,O[2]=C,O[3]=D;m=t.depth_enable;m!==y.depth_enable&&(m?aa.enable(2929):aa.disable(2929),y.depth_enable=m);m=t.depth_func;m!==y.depth_func&&(aa.depthFunc(m),y.depth_func=m);m=U[0];f=
U[1];if(m!==e[0]||f!==e[1])aa.depthRange(m,f),e[0]=m,e[1]=f;m=t.depth_mask;m!==y.depth_mask&&(aa.depthMask(m),y.depth_mask=m);m=d[0];f=d[1];C=d[2];D=d[3];if(m!==n[0]||f!==n[1]||C!==n[2]||D!==n[3])aa.colorMask(m,f,C,D),n[0]=m,n[1]=f,n[2]=C,n[3]=D;m=t.cull_enable;m!==y.cull_enable&&(m?aa.enable(2884):aa.disable(2884),y.cull_enable=m);m=t.cull_face;m!==y.cull_face&&(aa.cullFace(m),y.cull_face=m);m=t.frontFace;m!==y.frontFace&&(aa.frontFace(m),y.frontFace=m);m=t.lineWidth;m!==y.lineWidth&&(aa.lineWidth(m),
y.lineWidth=m);m=t.polygonOffset_enable;m!==y.polygonOffset_enable&&(m?aa.enable(32823):aa.disable(32823),y.polygonOffset_enable=m);m=W[0];f=W[1];if(m!==E[0]||f!==E[1])aa.polygonOffset(m,f),E[0]=m,E[1]=f;m=t.sample_alpha;m!==y.sample_alpha&&(m?aa.enable(32926):aa.disable(32926),y.sample_alpha=m);m=t.sample_enable;m!==y.sample_enable&&(m?aa.enable(32928):aa.disable(32928),y.sample_enable=m);m=p[0];f=p[1];if(m!==ta[0]||f!==ta[1])aa.sampleCoverage(m,f),ta[0]=m,ta[1]=f;m=t.stencil_enable;m!==y.stencil_enable&&
(m?aa.enable(2960):aa.disable(2960),y.stencil_enable=m);m=t.stencil_mask;m!==y.stencil_mask&&(aa.stencilMask(m),y.stencil_mask=m);m=c[0];f=c[1];C=c[2];if(m!==q[0]||f!==q[1]||C!==q[2])aa.stencilFunc(m,f,C),q[0]=m,q[1]=f,q[2]=C;m=A[0];f=A[1];C=A[2];D=A[3];if(m!==ia[0]||f!==ia[1]||C!==ia[2]||D!==ia[3])aa.stencilOpSeparate(m,f,C,D),ia[0]=m,ia[1]=f,ia[2]=C,ia[3]=D;m=a[0];f=a[1];C=a[2];D=a[3];if(m!==na[0]||f!==na[1]||C!==na[2]||D!==na[3])aa.stencilOpSeparate(m,f,C,D),na[0]=m,na[1]=f,na[2]=C,na[3]=D;m=t.scissor_enable;
m!==y.scissor_enable&&(m?aa.enable(3089):aa.disable(3089),y.scissor_enable=m)}if(m=y.profile)k=performance.now(),L.count+=g;f=u.program(u.vert,u.frag,J);aa.useProgram(f.program);G.setVAO(null);C=f.id;(D=R[C])||(D=R[C]=b(f));D.call(this,h,g);y.dirty=!0;G.setVAO(null);m&&(L.cpuTime+=performance.now()-k)}}},$5:function(k,F,J,L,f,h){var g,b,B,y,K,aa,t,u,G,O,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,ha,Y;g=k.context;b=k.current;B=k.framebuffer;y=k.gl;K=k.next;aa=k.shader;t=k.vao;u=K.blend_color;G=
b.blend_color;O=K.blend_equation;x=b.blend_equation;T=K.blend_func;r=b.blend_func;P=K.colorMask;ja=b.colorMask;d=K.depth_range;n=b.depth_range;U=K.polygonOffset_offset;e=b.polygonOffset_offset;W=K.sample_coverage;E=b.sample_coverage;p=K.scissor_box;ta=b.scissor_box;D=K.stencil_func;C=b.stencil_func;c=K.stencil_opBack;q=b.stencil_opBack;a=K.stencil_opFront;na=b.stencil_opFront;A=K.viewport;ia=b.viewport;ha={};Y={};return{draw:function(h){var g,k,z,m,F;g=B.next;g!==B.cur&&(g?y.bindFramebuffer(36160,
g.framebuffer):y.bindFramebuffer(36160,null),B.cur=g);if(b.dirty){g=K.dither;g!==b.dither&&(g?y.enable(3024):y.disable(3024),b.dither=g);g=K.blend_enable;g!==b.blend_enable&&(g?y.enable(3042):y.disable(3042),b.blend_enable=g);g=u[0];z=u[1];m=u[2];F=u[3];if(g!==G[0]||z!==G[1]||m!==G[2]||F!==G[3])y.blendColor(g,z,m,F),G[0]=g,G[1]=z,G[2]=m,G[3]=F;g=O[0];z=O[1];if(g!==x[0]||z!==x[1])y.blendEquationSeparate(g,z),x[0]=g,x[1]=z;g=T[0];z=T[1];m=T[2];F=T[3];if(g!==r[0]||z!==r[1]||m!==r[2]||F!==r[3])y.blendFuncSeparate(g,
z,m,F),r[0]=g,r[1]=z,r[2]=m,r[3]=F;g=K.depth_enable;g!==b.depth_enable&&(g?y.enable(2929):y.disable(2929),b.depth_enable=g);g=K.depth_func;g!==b.depth_func&&(y.depthFunc(g),b.depth_func=g);g=d[0];z=d[1];if(g!==n[0]||z!==n[1])y.depthRange(g,z),n[0]=g,n[1]=z;g=K.depth_mask;g!==b.depth_mask&&(y.depthMask(g),b.depth_mask=g);g=P[0];z=P[1];m=P[2];F=P[3];if(g!==ja[0]||z!==ja[1]||m!==ja[2]||F!==ja[3])y.colorMask(g,z,m,F),ja[0]=g,ja[1]=z,ja[2]=m,ja[3]=F;g=K.cull_enable;g!==b.cull_enable&&(g?y.enable(2884):
y.disable(2884),b.cull_enable=g);g=K.cull_face;g!==b.cull_face&&(y.cullFace(g),b.cull_face=g);g=K.frontFace;g!==b.frontFace&&(y.frontFace(g),b.frontFace=g);g=K.lineWidth;g!==b.lineWidth&&(y.lineWidth(g),b.lineWidth=g);g=K.polygonOffset_enable;g!==b.polygonOffset_enable&&(g?y.enable(32823):y.disable(32823),b.polygonOffset_enable=g);g=U[0];z=U[1];if(g!==e[0]||z!==e[1])y.polygonOffset(g,z),e[0]=g,e[1]=z;g=K.sample_alpha;g!==b.sample_alpha&&(g?y.enable(32926):y.disable(32926),b.sample_alpha=g);g=K.sample_enable;
g!==b.sample_enable&&(g?y.enable(32928):y.disable(32928),b.sample_enable=g);g=W[0];z=W[1];if(g!==E[0]||z!==E[1])y.sampleCoverage(g,z),E[0]=g,E[1]=z;g=K.stencil_enable;g!==b.stencil_enable&&(g?y.enable(2960):y.disable(2960),b.stencil_enable=g);g=K.stencil_mask;g!==b.stencil_mask&&(y.stencilMask(g),b.stencil_mask=g);g=D[0];z=D[1];m=D[2];if(g!==C[0]||z!==C[1]||m!==C[2])y.stencilFunc(g,z,m),C[0]=g,C[1]=z,C[2]=m;g=a[0];z=a[1];m=a[2];F=a[3];if(g!==na[0]||z!==na[1]||m!==na[2]||F!==na[3])y.stencilOpSeparate(g,
z,m,F),na[0]=g,na[1]=z,na[2]=m,na[3]=F;g=c[0];z=c[1];m=c[2];F=c[3];if(g!==q[0]||z!==q[1]||m!==q[2]||F!==q[3])y.stencilOpSeparate(g,z,m,F),q[0]=g,q[1]=z,q[2]=m,q[3]=F;g=K.scissor_enable;g!==b.scissor_enable&&(g?y.enable(3089):y.disable(3089),b.scissor_enable=g);g=p[0];z=p[1];m=p[2];F=p[3];if(g!==ta[0]||z!==ta[1]||m!==ta[2]||F!==ta[3])y.scissor(g,z,m,F),ta[0]=g,ta[1]=z,ta[2]=m,ta[3]=F;g=A[0];z=A[1];m=A[2];F=A[3];if(g!==ia[0]||z!==ia[1]||m!==ia[2]||F!==ia[3])y.viewport(g,z,m,F),ia[0]=g,ia[1]=z,ia[2]=
m,ia[3]=F;b.dirty=!1}if(g=b.profile)k=performance.now(),L.count++;z=aa.program(aa.vert,aa.frag,J);y.useProgram(z.program);t.setVAO(null);m=z.id;(F=ha[m])||(F=ha[m]=f(z));F.call(this,h);t.setVAO(null);g&&(L.cpuTime+=performance.now()-k)},scope:function(a,c,d){var h,e;if(h=b.profile)e=performance.now(),L.count++;c(g,a,d);h&&(L.cpuTime+=performance.now()-e)},batch:function(g,k){var f,z,m,F,N;f=B.next;f!==B.cur&&(f?y.bindFramebuffer(36160,f.framebuffer):y.bindFramebuffer(36160,null),B.cur=f);if(b.dirty){f=
K.dither;f!==b.dither&&(f?y.enable(3024):y.disable(3024),b.dither=f);f=K.blend_enable;f!==b.blend_enable&&(f?y.enable(3042):y.disable(3042),b.blend_enable=f);f=u[0];m=u[1];F=u[2];N=u[3];if(f!==G[0]||m!==G[1]||F!==G[2]||N!==G[3])y.blendColor(f,m,F,N),G[0]=f,G[1]=m,G[2]=F,G[3]=N;f=O[0];m=O[1];if(f!==x[0]||m!==x[1])y.blendEquationSeparate(f,m),x[0]=f,x[1]=m;f=T[0];m=T[1];F=T[2];N=T[3];if(f!==r[0]||m!==r[1]||F!==r[2]||N!==r[3])y.blendFuncSeparate(f,m,F,N),r[0]=f,r[1]=m,r[2]=F,r[3]=N;f=K.depth_enable;
f!==b.depth_enable&&(f?y.enable(2929):y.disable(2929),b.depth_enable=f);f=K.depth_func;f!==b.depth_func&&(y.depthFunc(f),b.depth_func=f);f=d[0];m=d[1];if(f!==n[0]||m!==n[1])y.depthRange(f,m),n[0]=f,n[1]=m;f=K.depth_mask;f!==b.depth_mask&&(y.depthMask(f),b.depth_mask=f);f=P[0];m=P[1];F=P[2];N=P[3];if(f!==ja[0]||m!==ja[1]||F!==ja[2]||N!==ja[3])y.colorMask(f,m,F,N),ja[0]=f,ja[1]=m,ja[2]=F,ja[3]=N;f=K.cull_enable;f!==b.cull_enable&&(f?y.enable(2884):y.disable(2884),b.cull_enable=f);f=K.cull_face;f!==
b.cull_face&&(y.cullFace(f),b.cull_face=f);f=K.frontFace;f!==b.frontFace&&(y.frontFace(f),b.frontFace=f);f=K.lineWidth;f!==b.lineWidth&&(y.lineWidth(f),b.lineWidth=f);f=K.polygonOffset_enable;f!==b.polygonOffset_enable&&(f?y.enable(32823):y.disable(32823),b.polygonOffset_enable=f);f=U[0];m=U[1];if(f!==e[0]||m!==e[1])y.polygonOffset(f,m),e[0]=f,e[1]=m;f=K.sample_alpha;f!==b.sample_alpha&&(f?y.enable(32926):y.disable(32926),b.sample_alpha=f);f=K.sample_enable;f!==b.sample_enable&&(f?y.enable(32928):
y.disable(32928),b.sample_enable=f);f=W[0];m=W[1];if(f!==E[0]||m!==E[1])y.sampleCoverage(f,m),E[0]=f,E[1]=m;f=K.stencil_enable;f!==b.stencil_enable&&(f?y.enable(2960):y.disable(2960),b.stencil_enable=f);f=K.stencil_mask;f!==b.stencil_mask&&(y.stencilMask(f),b.stencil_mask=f);f=D[0];m=D[1];F=D[2];if(f!==C[0]||m!==C[1]||F!==C[2])y.stencilFunc(f,m,F),C[0]=f,C[1]=m,C[2]=F;f=a[0];m=a[1];F=a[2];N=a[3];if(f!==na[0]||m!==na[1]||F!==na[2]||N!==na[3])y.stencilOpSeparate(f,m,F,N),na[0]=f,na[1]=m,na[2]=F,na[3]=
N;f=c[0];m=c[1];F=c[2];N=c[3];if(f!==q[0]||m!==q[1]||F!==q[2]||N!==q[3])y.stencilOpSeparate(f,m,F,N),q[0]=f,q[1]=m,q[2]=F,q[3]=N;f=K.scissor_enable;f!==b.scissor_enable&&(f?y.enable(3089):y.disable(3089),b.scissor_enable=f);f=p[0];m=p[1];F=p[2];N=p[3];if(f!==ta[0]||m!==ta[1]||F!==ta[2]||N!==ta[3])y.scissor(f,m,F,N),ta[0]=f,ta[1]=m,ta[2]=F,ta[3]=N;f=A[0];m=A[1];F=A[2];N=A[3];if(f!==ia[0]||m!==ia[1]||F!==ia[2]||N!==ia[3])y.viewport(f,m,F,N),ia[0]=f,ia[1]=m,ia[2]=F,ia[3]=N;b.dirty=!1}if(f=b.profile)z=
performance.now(),L.count+=k;m=aa.program(aa.vert,aa.frag,J);y.useProgram(m.program);t.setVAO(null);F=m.id;(N=Y[F])||(N=Y[F]=h(m));N.call(this,g,k);t.setVAO(null);f&&(L.cpuTime+=performance.now()-z)}}},"$26,color,freq,phase,projection,time,view":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,O,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q){var a,na,A,ia,ha,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,mb,lc,ga;a=k.attributes;na=k.context;A=k.current;ia=k.draw;ha=k.elements;Y=k.framebuffer;
ea=k.gl;R=k.isArrayLike;Q=k.next;z=k.shader;m=k.uniforms;V=k.vao;N=Q.blend_color;va=A.blend_color;oa=Q.blend_equation;l=A.blend_equation;I=Q.blend_func;ca=A.blend_func;S=Q.colorMask;ma=A.colorMask;ra=Q.depth_range;Ca=A.depth_range;ya=Q.polygonOffset_offset;fa=A.polygonOffset_offset;Ba=Q.sample_coverage;la=A.sample_coverage;pa=Q.scissor_box;za=A.scissor_box;Ma=Q.stencil_func;X=A.stencil_func;$b=Q.stencil_opBack;Ua=A.stencil_opBack;w=Q.stencil_opFront;v=A.stencil_opFront;M=Q.viewport;wa=A.viewport;
Ea=new Float32Array(16);mb=new Float32Array(16);lc=new Float32Array(16);ga=new Float32Array(16);return{draw:function(d){var e,m,k,n;e=Y.next;e!==Y.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),Y.cur=e);if(A.dirty){var r;e=Q.dither;e!==A.dither&&(e?ea.enable(3024):ea.disable(3024),A.dither=e);e=Q.blend_enable;e!==A.blend_enable&&(e?ea.enable(3042):ea.disable(3042),A.blend_enable=e);e=N[0];k=N[1];n=N[2];r=N[3];if(e!==va[0]||k!==va[1]||n!==va[2]||r!==va[3])ea.blendColor(e,
k,n,r),va[0]=e,va[1]=k,va[2]=n,va[3]=r;e=oa[0];k=oa[1];if(e!==l[0]||k!==l[1])ea.blendEquationSeparate(e,k),l[0]=e,l[1]=k;e=I[0];k=I[1];n=I[2];r=I[3];if(e!==ca[0]||k!==ca[1]||n!==ca[2]||r!==ca[3])ea.blendFuncSeparate(e,k,n,r),ca[0]=e,ca[1]=k,ca[2]=n,ca[3]=r;e=Q.depth_enable;e!==A.depth_enable&&(e?ea.enable(2929):ea.disable(2929),A.depth_enable=e);e=Q.depth_func;e!==A.depth_func&&(ea.depthFunc(e),A.depth_func=e);e=ra[0];k=ra[1];if(e!==Ca[0]||k!==Ca[1])ea.depthRange(e,k),Ca[0]=e,Ca[1]=k;e=Q.depth_mask;
e!==A.depth_mask&&(ea.depthMask(e),A.depth_mask=e);e=S[0];k=S[1];n=S[2];r=S[3];if(e!==ma[0]||k!==ma[1]||n!==ma[2]||r!==ma[3])ea.colorMask(e,k,n,r),ma[0]=e,ma[1]=k,ma[2]=n,ma[3]=r;e=Q.cull_enable;e!==A.cull_enable&&(e?ea.enable(2884):ea.disable(2884),A.cull_enable=e);e=Q.cull_face;e!==A.cull_face&&(ea.cullFace(e),A.cull_face=e);e=Q.frontFace;e!==A.frontFace&&(ea.frontFace(e),A.frontFace=e);e=Q.lineWidth;e!==A.lineWidth&&(ea.lineWidth(e),A.lineWidth=e);e=Q.polygonOffset_enable;e!==A.polygonOffset_enable&&
(e?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=e);e=ya[0];k=ya[1];if(e!==fa[0]||k!==fa[1])ea.polygonOffset(e,k),fa[0]=e,fa[1]=k;e=Q.sample_alpha;e!==A.sample_alpha&&(e?ea.enable(32926):ea.disable(32926),A.sample_alpha=e);e=Q.sample_enable;e!==A.sample_enable&&(e?ea.enable(32928):ea.disable(32928),A.sample_enable=e);e=Ba[0];k=Ba[1];if(e!==la[0]||k!==la[1])ea.sampleCoverage(e,k),la[0]=e,la[1]=k;e=Q.stencil_enable;e!==A.stencil_enable&&(e?ea.enable(2960):ea.disable(2960),A.stencil_enable=
e);e=Q.stencil_mask;e!==A.stencil_mask&&(ea.stencilMask(e),A.stencil_mask=e);e=Ma[0];k=Ma[1];n=Ma[2];if(e!==X[0]||k!==X[1]||n!==X[2])ea.stencilFunc(e,k,n),X[0]=e,X[1]=k,X[2]=n;e=w[0];k=w[1];n=w[2];r=w[3];if(e!==v[0]||k!==v[1]||n!==v[2]||r!==v[3])ea.stencilOpSeparate(e,k,n,r),v[0]=e,v[1]=k,v[2]=n,v[3]=r;e=$b[0];k=$b[1];n=$b[2];r=$b[3];if(e!==Ua[0]||k!==Ua[1]||n!==Ua[2]||r!==Ua[3])ea.stencilOpSeparate(e,k,n,r),Ua[0]=e,Ua[1]=k,Ua[2]=n,Ua[3]=r;e=Q.scissor_enable;e!==A.scissor_enable&&(e?ea.enable(3089):
ea.disable(3089),A.scissor_enable=e);e=pa[0];k=pa[1];n=pa[2];r=pa[3];if(e!==za[0]||k!==za[1]||n!==za[2]||r!==za[3])ea.scissor(e,k,n,r),za[0]=e,za[1]=k,za[2]=n,za[3]=r;e=M[0];k=M[1];n=M[2];r=M[3];if(e!==wa[0]||k!==wa[1]||n!==wa[2]||r!==wa[3])ea.viewport(e,k,n,r),wa[0]=e,wa[1]=k,wa[2]=n,wa[3]=r;A.dirty=!1}if(e=A.profile)m=performance.now(),L.count++;ea.useProgram(f.program);V.setVAO(null);k=ta.location;n=a[k];n.buffer||ea.enableVertexAttribArray(k);if(5126!==n.type||4!==n.size||n.buffer!==h||!1!==n.normalized||
0!==n.offset||44!==n.stride)ea.bindBuffer(34962,h.buffer),ea.vertexAttribPointer(k,4,5126,!1,44,0),n.type=5126,n.size=4,n.buffer=h,n.normalized=!1,n.offset=0,n.stride=44;k=D.location;n=a[k];n.buffer||ea.enableVertexAttribArray(k);if(5126!==n.type||4!==n.size||n.buffer!==g||!1!==n.normalized||16!==n.offset||44!==n.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(k,4,5126,!1,44,16),n.type=5126,n.size=4,n.buffer=g,n.normalized=!1,n.offset=16,n.stride=44;k=p.location;n=a[k];n.buffer||ea.enableVertexAttribArray(k);
if(5126!==n.type||3!==n.size||n.buffer!==b||!1!==n.normalized||32!==n.offset||44!==n.stride)ea.bindBuffer(34962,b.buffer),ea.vertexAttribPointer(k,3,5126,!1,44,32),n.type=5126,n.size=3,n.buffer=b,n.normalized=!1,n.offset=32,n.stride=44;k=B.call(this,na,d,0);"number"!==typeof k&&F.commandRaise(y,J);ea.uniform1f(c.location,k);k=K.call(this,na,d,0);R(k)&&16===k.length||F.commandRaise(aa,J);ea.uniformMatrix4fv(q.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ea[0]=k[0],Ea[1]=k[1],Ea[2]=k[2],
Ea[3]=k[3],Ea[4]=k[4],Ea[5]=k[5],Ea[6]=k[6],Ea[7]=k[7],Ea[8]=k[8],Ea[9]=k[9],Ea[10]=k[10],Ea[11]=k[11],Ea[12]=k[12],Ea[13]=k[13],Ea[14]=k[14],Ea[15]=k[15],Ea));d=t.call(this,na,d,0);R(d)&&16===d.length||F.commandRaise(u,J);ea.uniformMatrix4fv(C.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(mb[0]=d[0],mb[1]=d[1],mb[2]=d[2],mb[3]=d[3],mb[4]=d[4],mb[5]=d[5],mb[6]=d[6],mb[7]=d[7],mb[8]=d[8],mb[9]=d[9],mb[10]=d[10],mb[11]=d[11],mb[12]=d[12],mb[13]=d[13],mb[14]=d[14],mb[15]=d[15],mb));(d=ia.elements)?
ea.bindBuffer(34963,d.buffer.buffer):V.currentVAO&&(d=ha.getElements(V.currentVAO.elements))&&ea.bindBuffer(34963,d.buffer.buffer);k=ia.offset;d?ea.drawElements(0,1E4,d.type,k<<(d.type-5121>>1)):ea.drawArrays(0,k,1E4);V.setVAO(null);e&&(L.cpuTime+=performance.now()-m)},scope:function(a,c,d){var e,l,q,w,f,k,v,n,X,M,p,C,D,E,I,S,F,u,t,fa,ga,J,y,$b,B,Ma,ca,wa,Q,N,K,R,ya,ra,U,aa,V,la,Y,W,va,Ua,ea,pa,ja;if(e=A.profile)l=performance.now(),L.count++;q=ia.count;ia.count=1E4;w=ia.primitive;ia.primitive=0;f=
G.call(this,na,a,d);k=m[5];m[5]=f;v=O.call(this,na,a,d);f=m[3];m[3]=v;n=x.call(this,na,a,d);v=m[4];m[4]=n;n=T.buffer;T.buffer=b;X=T.divisor;T.divisor=0;M=T.normalized;T.normalized=!1;p=T.offset;T.offset=32;C=T.size;T.size=0;D=T.state;T.state=1;E=T.stride;T.stride=44;I=T.type;T.type=5126;S=T.w;T.w=0;F=T.x;T.x=0;u=T.y;T.y=0;t=T.z;T.z=0;fa=r.buffer;r.buffer=h;ga=r.divisor;r.divisor=0;J=r.normalized;r.normalized=!1;y=r.offset;r.offset=0;$b=r.size;r.size=0;B=r.state;r.state=1;Ma=r.stride;r.stride=44;ca=
r.type;r.type=5126;wa=r.w;r.w=0;Q=r.x;r.x=0;N=r.y;r.y=0;K=r.z;r.z=0;R=P.buffer;P.buffer=g;ya=P.divisor;P.divisor=0;ra=P.normalized;P.normalized=!1;U=P.offset;P.offset=16;aa=P.size;P.size=0;V=P.state;P.state=1;la=P.stride;P.stride=44;Y=P.type;P.type=5126;W=P.w;P.w=0;va=P.x;P.x=0;Ua=P.y;P.y=0;ea=P.z;P.z=0;pa=z.vert;z.vert=2;ja=z.frag;z.frag=1;c(na,a,d);e&&(L.cpuTime+=performance.now()-l);ia.count=q;ia.primitive=w;m[5]=k;m[3]=f;m[4]=v;T.buffer=n;T.divisor=X;T.normalized=M;T.offset=p;T.size=C;T.state=
D;T.stride=E;T.type=I;T.w=S;T.x=F;T.y=u;T.z=t;r.buffer=fa;r.divisor=ga;r.normalized=J;r.offset=y;r.size=$b;r.state=B;r.stride=Ma;r.type=ca;r.w=wa;r.x=Q;r.y=N;r.z=K;P.buffer=R;P.divisor=ya;P.normalized=ra;P.offset=U;P.size=aa;P.state=V;P.stride=la;P.type=Y;P.w=W;P.x=va;P.y=Ua;P.z=ea;z.vert=pa;z.frag=ja},batch:function(f,k){var m,r,x;m=Y.next;m!==Y.cur&&(m?ea.bindFramebuffer(36160,m.framebuffer):ea.bindFramebuffer(36160,null),Y.cur=m);if(A.dirty){var u,z,t;m=Q.dither;m!==A.dither&&(m?ea.enable(3024):
ea.disable(3024),A.dither=m);m=Q.blend_enable;m!==A.blend_enable&&(m?ea.enable(3042):ea.disable(3042),A.blend_enable=m);m=N[0];u=N[1];z=N[2];t=N[3];if(m!==va[0]||u!==va[1]||z!==va[2]||t!==va[3])ea.blendColor(m,u,z,t),va[0]=m,va[1]=u,va[2]=z,va[3]=t;m=oa[0];u=oa[1];if(m!==l[0]||u!==l[1])ea.blendEquationSeparate(m,u),l[0]=m,l[1]=u;m=I[0];u=I[1];z=I[2];t=I[3];if(m!==ca[0]||u!==ca[1]||z!==ca[2]||t!==ca[3])ea.blendFuncSeparate(m,u,z,t),ca[0]=m,ca[1]=u,ca[2]=z,ca[3]=t;m=Q.depth_enable;m!==A.depth_enable&&
(m?ea.enable(2929):ea.disable(2929),A.depth_enable=m);m=Q.depth_func;m!==A.depth_func&&(ea.depthFunc(m),A.depth_func=m);m=ra[0];u=ra[1];if(m!==Ca[0]||u!==Ca[1])ea.depthRange(m,u),Ca[0]=m,Ca[1]=u;m=Q.depth_mask;m!==A.depth_mask&&(ea.depthMask(m),A.depth_mask=m);m=S[0];u=S[1];z=S[2];t=S[3];if(m!==ma[0]||u!==ma[1]||z!==ma[2]||t!==ma[3])ea.colorMask(m,u,z,t),ma[0]=m,ma[1]=u,ma[2]=z,ma[3]=t;m=Q.cull_enable;m!==A.cull_enable&&(m?ea.enable(2884):ea.disable(2884),A.cull_enable=m);m=Q.cull_face;m!==A.cull_face&&
(ea.cullFace(m),A.cull_face=m);m=Q.frontFace;m!==A.frontFace&&(ea.frontFace(m),A.frontFace=m);m=Q.lineWidth;m!==A.lineWidth&&(ea.lineWidth(m),A.lineWidth=m);m=Q.polygonOffset_enable;m!==A.polygonOffset_enable&&(m?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=m);m=ya[0];u=ya[1];if(m!==fa[0]||u!==fa[1])ea.polygonOffset(m,u),fa[0]=m,fa[1]=u;m=Q.sample_alpha;m!==A.sample_alpha&&(m?ea.enable(32926):ea.disable(32926),A.sample_alpha=m);m=Q.sample_enable;m!==A.sample_enable&&(m?ea.enable(32928):
ea.disable(32928),A.sample_enable=m);m=Ba[0];u=Ba[1];if(m!==la[0]||u!==la[1])ea.sampleCoverage(m,u),la[0]=m,la[1]=u;m=Q.stencil_enable;m!==A.stencil_enable&&(m?ea.enable(2960):ea.disable(2960),A.stencil_enable=m);m=Q.stencil_mask;m!==A.stencil_mask&&(ea.stencilMask(m),A.stencil_mask=m);m=Ma[0];u=Ma[1];z=Ma[2];if(m!==X[0]||u!==X[1]||z!==X[2])ea.stencilFunc(m,u,z),X[0]=m,X[1]=u,X[2]=z;m=w[0];u=w[1];z=w[2];t=w[3];if(m!==v[0]||u!==v[1]||z!==v[2]||t!==v[3])ea.stencilOpSeparate(m,u,z,t),v[0]=m,v[1]=u,v[2]=
z,v[3]=t;m=$b[0];u=$b[1];z=$b[2];t=$b[3];if(m!==Ua[0]||u!==Ua[1]||z!==Ua[2]||t!==Ua[3])ea.stencilOpSeparate(m,u,z,t),Ua[0]=m,Ua[1]=u,Ua[2]=z,Ua[3]=t;m=Q.scissor_enable;m!==A.scissor_enable&&(m?ea.enable(3089):ea.disable(3089),A.scissor_enable=m);m=pa[0];u=pa[1];z=pa[2];t=pa[3];if(m!==za[0]||u!==za[1]||z!==za[2]||t!==za[3])ea.scissor(m,u,z,t),za[0]=m,za[1]=u,za[2]=z,za[3]=t;m=M[0];u=M[1];z=M[2];t=M[3];if(m!==wa[0]||u!==wa[1]||z!==wa[2]||t!==wa[3])ea.viewport(m,u,z,t),wa[0]=m,wa[1]=u,wa[2]=z,wa[3]=
t;A.dirty=!1}if(m=A.profile)r=performance.now(),L.count+=k;ea.useProgram(ja.program);V.setVAO(null);u=ta.location;z=a[u];z.buffer||ea.enableVertexAttribArray(u);if(5126!==z.type||4!==z.size||z.buffer!==h||!1!==z.normalized||0!==z.offset||44!==z.stride)ea.bindBuffer(34962,h.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,0),z.type=5126,z.size=4,z.buffer=h,z.normalized=!1,z.offset=0,z.stride=44;u=D.location;z=a[u];z.buffer||ea.enableVertexAttribArray(u);if(5126!==z.type||4!==z.size||z.buffer!==g||!1!==
z.normalized||16!==z.offset||44!==z.stride)ea.bindBuffer(34962,g.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,16),z.type=5126,z.size=4,z.buffer=g,z.normalized=!1,z.offset=16,z.stride=44;u=p.location;z=a[u];z.buffer||ea.enableVertexAttribArray(u);if(5126!==z.type||3!==z.size||z.buffer!==b||!1!==z.normalized||32!==z.offset||44!==z.stride)ea.bindBuffer(34962,b.buffer),ea.vertexAttribPointer(u,3,5126,!1,44,32),z.type=5126,z.size=3,z.buffer=b,z.normalized=!1,z.offset=32,z.stride=44;u=d.call(this,na,void 0,
x);"number"!==typeof u&&F.commandRaise(n,J);ea.uniform1f(c.location,u);u=U.call(this,na,void 0,x);R(u)&&16===u.length||F.commandRaise(e,J);ea.uniformMatrix4fv(q.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(lc[0]=u[0],lc[1]=u[1],lc[2]=u[2],lc[3]=u[3],lc[4]=u[4],lc[5]=u[5],lc[6]=u[6],lc[7]=u[7],lc[8]=u[8],lc[9]=u[9],lc[10]=u[10],lc[11]=u[11],lc[12]=u[12],lc[13]=u[13],lc[14]=u[14],lc[15]=u[15],lc));x=W.call(this,na,void 0,x);R(x)&&16===x.length||F.commandRaise(E,J);ea.uniformMatrix4fv(C.location,
!1,Array.isArray(x)||x instanceof Float32Array?x:(ga[0]=x[0],ga[1]=x[1],ga[2]=x[2],ga[3]=x[3],ga[4]=x[4],ga[5]=x[5],ga[6]=x[6],ga[7]=x[7],ga[8]=x[8],ga[9]=x[9],ga[10]=x[10],ga[11]=x[11],ga[12]=x[12],ga[13]=x[13],ga[14]=x[14],ga[15]=x[15],ga));(u=ia.elements)?ea.bindBuffer(34963,u.buffer.buffer):V.currentVAO&&(u=ha.getElements(V.currentVAO.elements))&&ea.bindBuffer(34963,u.buffer.buffer);z=ia.offset;for(x=0;x<k;++x)u?ea.drawElements(0,1E4,u.type,z<<(u.type-5121>>1)):ea.drawArrays(0,z,1E4);V.setVAO(null);
m&&(L.cpuTime+=performance.now()-r)}}},"$34,atlas,normal,position,projection,uv,view":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,O,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,ha,Y,ea,R){var Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,mb,lc,ga,H,sa,Ha,qa,Aa,Da,ka,Z,ua,Ja,Fa;Q=k.attributes;z=k.buffer;m=k.context;V=k.current;N=k.draw;va=k.elements;oa=k.framebuffer;l=k.gl;I=k.isArrayLike;ca=k.isBufferArgs;S=k.next;ma=k.shader;ra=k.uniforms;Ca=k.vao;ya=S.blend_color;fa=V.blend_color;
Ba=S.blend_equation;la=V.blend_equation;pa=S.blend_func;za=V.blend_func;Ma=S.colorMask;X=V.colorMask;$b=S.depth_range;Ua=V.depth_range;w=S.polygonOffset_offset;v=V.polygonOffset_offset;M=S.sample_coverage;wa=V.sample_coverage;Ea=S.scissor_box;mb=V.scissor_box;lc=S.stencil_func;ga=V.stencil_func;H=S.stencil_opBack;sa=V.stencil_opBack;Ha=S.stencil_opFront;qa=V.stencil_opFront;Aa=S.viewport;Da=V.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
Z=new Float32Array(16);ua=new Float32Array(16);Ja=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(a){var c,d,e,q,k,n,r,p,x,C,D,E,P,N,ra,T,U,O,ba,W,ja,ma,na,ta,Fa,Ja,xa,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb,$a,ob;c=m.view;d=f.call(this,m,a,0);m.view=d;e=oa.next;e!==oa.cur&&(e?l.bindFramebuffer(36160,e.framebuffer):l.bindFramebuffer(36160,null),oa.cur=e);if(V.dirty){var Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,
ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab;Va=S.dither;Va!==V.dither&&(Va?l.enable(3024):l.disable(3024),V.dither=Va);Pc=S.blend_enable;Pc!==V.blend_enable&&(Pc?l.enable(3042):l.disable(3042),V.blend_enable=Pc);Hb=ya[0];Ib=ya[1];rc=ya[2];Nb=ya[3];if(Hb!==fa[0]||Ib!==fa[1]||rc!==fa[2]||Nb!==fa[3])l.blendColor(Hb,Ib,rc,Nb),fa[0]=Hb,fa[1]=Ib,fa[2]=rc,fa[3]=Nb;jb=Ba[0];Gb=Ba[1];if(jb!==la[0]||Gb!==la[1])l.blendEquationSeparate(jb,Gb),la[0]=
jb,la[1]=Gb;Db=pa[0];xb=pa[1];hb=pa[2];Xb=pa[3];if(Db!==za[0]||xb!==za[1]||hb!==za[2]||Xb!==za[3])l.blendFuncSeparate(Db,xb,hb,Xb),za[0]=Db,za[1]=xb,za[2]=hb,za[3]=Xb;Ob=S.depth_enable;Ob!==V.depth_enable&&(Ob?l.enable(2929):l.disable(2929),V.depth_enable=Ob);rb=S.depth_func;rb!==V.depth_func&&(l.depthFunc(rb),V.depth_func=rb);Sa=$b[0];Pb=$b[1];if(Sa!==Ua[0]||Pb!==Ua[1])l.depthRange(Sa,Pb),Ua[0]=Sa,Ua[1]=Pb;pb=S.depth_mask;pb!==V.depth_mask&&(l.depthMask(pb),V.depth_mask=pb);ac=Ma[0];ib=Ma[1];qb=
Ma[2];Ia=Ma[3];if(ac!==X[0]||ib!==X[1]||qb!==X[2]||Ia!==X[3])l.colorMask(ac,ib,qb,Ia),X[0]=ac,X[1]=ib,X[2]=qb,X[3]=Ia;sb=S.frontFace;sb!==V.frontFace&&(l.frontFace(sb),V.frontFace=sb);Ka=S.lineWidth;Ka!==V.lineWidth&&(l.lineWidth(Ka),V.lineWidth=Ka);db=S.polygonOffset_enable;db!==V.polygonOffset_enable&&(db?l.enable(32823):l.disable(32823),V.polygonOffset_enable=db);fb=w[0];La=w[1];if(fb!==v[0]||La!==v[1])l.polygonOffset(fb,La),v[0]=fb,v[1]=La;kb=S.sample_alpha;kb!==V.sample_alpha&&(kb?l.enable(32926):
l.disable(32926),V.sample_alpha=kb);Wa=S.sample_enable;Wa!==V.sample_enable&&(Wa?l.enable(32928):l.disable(32928),V.sample_enable=Wa);ub=M[0];tb=M[1];if(ub!==wa[0]||tb!==wa[1])l.sampleCoverage(ub,tb),wa[0]=ub,wa[1]=tb;Pa=S.stencil_enable;Pa!==V.stencil_enable&&(Pa?l.enable(2960):l.disable(2960),V.stencil_enable=Pa);Bc=S.stencil_mask;Bc!==V.stencil_mask&&(l.stencilMask(Bc),V.stencil_mask=Bc);Ra=lc[0];Jb=lc[1];Eb=lc[2];if(Ra!==ga[0]||Jb!==ga[1]||Eb!==ga[2])l.stencilFunc(Ra,Jb,Eb),ga[0]=Ra,ga[1]=Jb,
ga[2]=Eb;Na=Ha[0];Fd=Ha[1];Ya=Ha[2];Kb=Ha[3];if(Na!==qa[0]||Fd!==qa[1]||Ya!==qa[2]||Kb!==qa[3])l.stencilOpSeparate(Na,Fd,Ya,Kb),qa[0]=Na,qa[1]=Fd,qa[2]=Ya,qa[3]=Kb;Lb=H[0];lb=H[1];Oa=H[2];Yb=H[3];if(Lb!==sa[0]||lb!==sa[1]||Oa!==sa[2]||Yb!==sa[3])l.stencilOpSeparate(Lb,lb,Oa,Yb),sa[0]=Lb,sa[1]=lb,sa[2]=Oa,sa[3]=Yb;Qa=S.scissor_enable;Qa!==V.scissor_enable&&(Qa?l.enable(3089):l.disable(3089),V.scissor_enable=Qa);vb=Ea[0];wb=Ea[1];Ta=Ea[2];nb=Ea[3];if(vb!==mb[0]||wb!==mb[1]||Ta!==mb[2]||nb!==mb[3])l.scissor(vb,
wb,Ta,nb),mb[0]=vb,mb[1]=wb,mb[2]=Ta,mb[3]=nb;gc=Aa[0];Ec=Aa[1];vc=Aa[2];ab=Aa[3];if(gc!==Da[0]||Ec!==Da[1]||vc!==Da[2]||ab!==Da[3])l.viewport(gc,Ec,vc,ab),Da[0]=gc,Da[1]=Ec,Da[2]=vc,Da[3]=ab}l.enable(2884);V.cull_enable=!0;l.cullFace(1029);V.cull_face=1029;if(q=V.profile)k=performance.now(),L.count++;l.useProgram(h.program);Ca.setVAO(null);(n=a.position)&&("object"===typeof n||"function"===typeof n)&&(ca(n)||z.getBuffer(n)||z.getBuffer(n.buffer)||ca(n.buffer)||"constant"in n&&("number"===typeof n.constant||
I(n.constant)))||F.commandRaise(g,J);r=!1;p=null;x=!1;D=C=0;E=1;P=0;N=5126;O=U=T=ra=0;ca(n)?(r=!0,p=z.createStream(34962,n),N=p.dtype):(p=z.getBuffer(n))?N=p.dtype:"constant"in n?(E=2,"number"===typeof n.constant?(T=n.constant,U=O=ra=0):(T=0<n.constant.length?n.constant[0]:0,U=1<n.constant.length?n.constant[1]:0,O=2<n.constant.length?n.constant[2]:0,ra=3<n.constant.length?n.constant[3]:0)):(p=ca(n.buffer)?z.createStream(34962,n.buffer):z.getBuffer(n.buffer),N="type"in n?ka[n.type]:p.dtype,x=!!n.normalized,
D=n.size|0,C=n.offset|0,P=n.stride|0);ba=ha.location;W=Q[ba];if(1===E){if(W.buffer||l.enableVertexAttribArray(ba),ja=D||3,W.type!==N||W.size!==ja||W.buffer!==p||W.normalized!==x||W.offset!==C||W.stride!==P)l.bindBuffer(34962,p.buffer),l.vertexAttribPointer(ba,ja,N,x,P,C),W.type=N,W.size=ja,W.buffer=p,W.normalized=x,W.offset=C,W.stride=P}else if(W.buffer&&(l.disableVertexAttribArray(ba),W.buffer=null),W.x!==T||W.y!==U||W.z!==O||W.w!==ra)l.vertexAttrib4f(ba,T,U,O,ra),W.x=T,W.y=U,W.z=O,W.w=ra;(ma=a.normal)&&
("object"===typeof ma||"function"===typeof ma)&&(ca(ma)||z.getBuffer(ma)||z.getBuffer(ma.buffer)||ca(ma.buffer)||"constant"in ma&&("number"===typeof ma.constant||I(ma.constant)))||F.commandRaise(b,J);na=!1;ta=null;Fa=!1;xa=Ja=0;Ad=1;nd=0;bd=5126;Fc=pd=Lc=sd=0;ca(ma)?(na=!0,ta=z.createStream(34962,ma),bd=ta.dtype):(ta=z.getBuffer(ma))?bd=ta.dtype:"constant"in ma?(Ad=2,"number"===typeof ma.constant?(Lc=ma.constant,pd=Fc=sd=0):(Lc=0<ma.constant.length?ma.constant[0]:0,pd=1<ma.constant.length?ma.constant[1]:
0,Fc=2<ma.constant.length?ma.constant[2]:0,sd=3<ma.constant.length?ma.constant[3]:0)):(ta=ca(ma.buffer)?z.createStream(34962,ma.buffer):z.getBuffer(ma.buffer),bd="type"in ma?ka[ma.type]:ta.dtype,Fa=!!ma.normalized,xa=ma.size|0,Ja=ma.offset|0,nd=ma.stride|0);fd=ia.location;Oc=Q[fd];if(1===Ad){if(Oc.buffer||l.enableVertexAttribArray(fd),Ic=xa||3,Oc.type!==bd||Oc.size!==Ic||Oc.buffer!==ta||Oc.normalized!==Fa||Oc.offset!==Ja||Oc.stride!==nd)l.bindBuffer(34962,ta.buffer),l.vertexAttribPointer(fd,Ic,bd,
Fa,nd,Ja),Oc.type=bd,Oc.size=Ic,Oc.buffer=ta,Oc.normalized=Fa,Oc.offset=Ja,Oc.stride=nd}else if(Oc.buffer&&(l.disableVertexAttribArray(fd),Oc.buffer=null),Oc.x!==Lc||Oc.y!==pd||Oc.z!==Fc||Oc.w!==sd)l.vertexAttrib4f(fd,Lc,pd,Fc,sd),Oc.x=Lc,Oc.y=pd,Oc.z=Fc,Oc.w=sd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(ca(Bb)||z.getBuffer(Bb)||z.getBuffer(Bb.buffer)||ca(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||I(Bb.constant)))||F.commandRaise(B,J);Fb=!1;uc=null;yb=!1;Cb=xc=0;
Jc=1;mc=0;Gc=5126;ec=Cc=Xc=gd=0;ca(Bb)?(Fb=!0,uc=z.createStream(34962,Bb),Gc=uc.dtype):(uc=z.getBuffer(Bb))?Gc=uc.dtype:"constant"in Bb?(Jc=2,"number"===typeof Bb.constant?(Xc=Bb.constant,Cc=ec=gd=0):(Xc=0<Bb.constant.length?Bb.constant[0]:0,Cc=1<Bb.constant.length?Bb.constant[1]:0,ec=2<Bb.constant.length?Bb.constant[2]:0,gd=3<Bb.constant.length?Bb.constant[3]:0)):(uc=ca(Bb.buffer)?z.createStream(34962,Bb.buffer):z.getBuffer(Bb.buffer),Gc="type"in Bb?ka[Bb.type]:uc.dtype,yb=!!Bb.normalized,Cb=Bb.size|
0,xc=Bb.offset|0,mc=Bb.stride|0);Hc=ea.location;pc=Q[Hc];if(1===Jc){if(pc.buffer||l.enableVertexAttribArray(Hc),qc=Cb||2,pc.type!==Gc||pc.size!==qc||pc.buffer!==uc||pc.normalized!==yb||pc.offset!==xc||pc.stride!==mc)l.bindBuffer(34962,uc.buffer),l.vertexAttribPointer(Hc,qc,Gc,yb,mc,xc),pc.type=Gc,pc.size=qc,pc.buffer=uc,pc.normalized=yb,pc.offset=xc,pc.stride=mc}else if(pc.buffer&&(l.disableVertexAttribArray(Hc),pc.buffer=null),pc.x!==Xc||pc.y!==Cc||pc.z!==ec||pc.w!==gd)l.vertexAttrib4f(Hc,Xc,Cc,
ec,gd),pc.x=Xc,pc.y=Cc,pc.z=ec,pc.w=gd;nc=y.call(this,m,a,0);I(nc)&&16===nc.length||F.commandRaise(K,J);l.uniformMatrix4fv(Y.location,!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(Z[0]=nc[0],Z[1]=nc[1],Z[2]=nc[2],Z[3]=nc[3],Z[4]=nc[4],Z[5]=nc[5],Z[6]=nc[6],Z[7]=nc[7],Z[8]=nc[8],Z[9]=nc[9],Z[10]=nc[10],Z[11]=nc[11],Z[12]=nc[12],Z[13]=nc[13],Z[14]=nc[14],Z[15]=nc[15],Z));fc=m.view;I(fc)&&16===fc.length||F.commandRaise(aa,J);l.uniformMatrix4fv(R.location,!1,Array.isArray(fc)||fc instanceof Float32Array?
fc:(ua[0]=fc[0],ua[1]=fc[1],ua[2]=fc[2],ua[3]=fc[3],ua[4]=fc[4],ua[5]=fc[5],ua[6]=fc[6],ua[7]=fc[7],ua[8]=fc[8],ua[9]=fc[9],ua[10]=fc[10],ua[11]=fc[11],ua[12]=fc[12],ua[13]=fc[13],ua[14]=fc[14],ua[15]=fc[15],ua));(eb=a.atlas)&&"framebuffer"===eb._reglType&&(eb=eb.color[0]);"function"===typeof eb&&"texture2d"===eb._reglType||F.commandRaise(t,J);Sc=eb._texture;l.uniform1i(A.location,Sc.bind());zb=a.elements;bb=null;(Mb=ca(zb))?bb=va.createStream(zb):(bb=va.getElements(zb),zb&&!bb&&F.commandRaise(u,
J));bb&&l.bindBuffer(34963,bb.buffer.buffer);$a=bb?bb.primType:4;ob=bb?bb.vertCount:-1;0<=ob||F.commandRaise(G,J);ob&&(bb?l.drawElements($a,ob,bb.type,0<<(bb.type-5121>>1)):l.drawArrays($a,0,ob),V.dirty=!0,Ca.setVAO(null),m.view=c,q&&(L.cpuTime+=performance.now()-k),r&&z.destroyStream(p),na&&z.destroyStream(ta),Fb&&z.destroyStream(uc),Sc.unbind(),Mb&&va.destroyStream(bb))},scope:function(a,c,b){var e,h,g,l,q,w,f,k,v,H,X,M,p,A,u,C,D,E,t,fa,ga,y,$b,B,G,Ma,sa,Ha,qa,wa,Q,K,R,Z,ya,aa,W,la,Y,Ua,ea,pa,Aa,
Ba,za,na,Ea,ia,Da,oa,ta,Ca,lc,ha,ua,mb,Fa,Ja,cc,xa,Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb;e=m.view;h=O.call(this,m,a,b);m.view=h;g=S.cull_enable;S.cull_enable=!0;l=S.cull_face;S.cull_face=1029;if(q=V.profile)w=performance.now(),L.count++;f=a.elements;k=null;(v=ca(f))?k=va.createStream(f):(k=va.getElements(f),f&&!k&&F.commandRaise(x,J));H=N.elements;N.elements=k;X=N.offset;N.offset=0;M=k?k.vertCount:-1;p=N.count;N.count=
M;A=k?k.primType:4;u=N.primitive;N.primitive=A;C=a.atlas;D=ra[5];ra[5]=C;E=T.call(this,m,a,b);t=ra[3];ra[3]=E;fa=m.view;ga=ra[4];ra[4]=fa;(y=a.normal)&&("object"===typeof y||"function"===typeof y)&&(ca(y)||z.getBuffer(y)||z.getBuffer(y.buffer)||ca(y.buffer)||"constant"in y&&("number"===typeof y.constant||I(y.constant)))||F.commandRaise(r,J);$b=!1;B=null;G=0;Ma=!1;Ha=sa=0;qa=1;wa=0;Q=5126;ya=Z=R=K=0;ca(y)?($b=!0,B=z.createStream(34962,y),Q=B.dtype):(B=z.getBuffer(y))?Q=B.dtype:"constant"in y?(qa=2,
"number"===typeof y.constant?(R=y.constant,Z=ya=K=0):(R=0<y.constant.length?y.constant[0]:0,Z=1<y.constant.length?y.constant[1]:0,ya=2<y.constant.length?y.constant[2]:0,K=3<y.constant.length?y.constant[3]:0)):(B=ca(y.buffer)?z.createStream(34962,y.buffer):z.getBuffer(y.buffer),Q="type"in y?ka[y.type]:B.dtype,Ma=!!y.normalized,Ha=y.size|0,sa=y.offset|0,wa=y.stride|0,G=y.divisor|0);aa=P.buffer;P.buffer=B;W=P.divisor;P.divisor=G;la=P.normalized;P.normalized=Ma;Y=P.offset;P.offset=sa;Ua=P.size;P.size=
Ha;ea=P.state;P.state=qa;pa=P.stride;P.stride=wa;Aa=P.type;P.type=Q;Ba=P.w;P.w=K;za=P.x;P.x=R;na=P.y;P.y=Z;Ea=P.z;P.z=ya;(ia=a.position)&&("object"===typeof ia||"function"===typeof ia)&&(ca(ia)||z.getBuffer(ia)||z.getBuffer(ia.buffer)||ca(ia.buffer)||"constant"in ia&&("number"===typeof ia.constant||I(ia.constant)))||F.commandRaise(ja,J);Da=!1;oa=null;ta=0;Ca=!1;ha=lc=0;ua=1;mb=0;Fa=5126;Va=xa=cc=Ja=0;ca(ia)?(Da=!0,oa=z.createStream(34962,ia),Fa=oa.dtype):(oa=z.getBuffer(ia))?Fa=oa.dtype:"constant"in
ia?(ua=2,"number"===typeof ia.constant?(cc=ia.constant,xa=Va=Ja=0):(cc=0<ia.constant.length?ia.constant[0]:0,xa=1<ia.constant.length?ia.constant[1]:0,Va=2<ia.constant.length?ia.constant[2]:0,Ja=3<ia.constant.length?ia.constant[3]:0)):(oa=ca(ia.buffer)?z.createStream(34962,ia.buffer):z.getBuffer(ia.buffer),Fa="type"in ia?ka[ia.type]:oa.dtype,Ca=!!ia.normalized,ha=ia.size|0,lc=ia.offset|0,mb=ia.stride|0,ta=ia.divisor|0);Pc=d.buffer;d.buffer=oa;Hb=d.divisor;d.divisor=ta;Ib=d.normalized;d.normalized=
Ca;rc=d.offset;d.offset=lc;Nb=d.size;d.size=ha;jb=d.state;d.state=ua;Gb=d.stride;d.stride=mb;Db=d.type;d.type=Fa;xb=d.w;d.w=Ja;hb=d.x;d.x=cc;Xb=d.y;d.y=xa;Ob=d.z;d.z=Va;(rb=a.uv)&&("object"===typeof rb||"function"===typeof rb)&&(ca(rb)||z.getBuffer(rb)||z.getBuffer(rb.buffer)||ca(rb.buffer)||"constant"in rb&&("number"===typeof rb.constant||I(rb.constant)))||F.commandRaise(n,J);Sa=!1;Pb=null;pb=0;ac=!1;qb=ib=0;Ia=1;sb=0;Ka=5126;kb=La=fb=db=0;ca(rb)?(Sa=!0,Pb=z.createStream(34962,rb),Ka=Pb.dtype):(Pb=
z.getBuffer(rb))?Ka=Pb.dtype:"constant"in rb?(Ia=2,"number"===typeof rb.constant?(fb=rb.constant,La=kb=db=0):(fb=0<rb.constant.length?rb.constant[0]:0,La=1<rb.constant.length?rb.constant[1]:0,kb=2<rb.constant.length?rb.constant[2]:0,db=3<rb.constant.length?rb.constant[3]:0)):(Pb=ca(rb.buffer)?z.createStream(34962,rb.buffer):z.getBuffer(rb.buffer),Ka="type"in rb?ka[rb.type]:Pb.dtype,ac=!!rb.normalized,qb=rb.size|0,ib=rb.offset|0,sb=rb.stride|0,pb=rb.divisor|0);Wa=U.buffer;U.buffer=Pb;ub=U.divisor;
U.divisor=pb;tb=U.normalized;U.normalized=ac;Pa=U.offset;U.offset=ib;Bc=U.size;U.size=qb;Ra=U.state;U.state=Ia;Jb=U.stride;U.stride=sb;Eb=U.type;U.type=Ka;Na=U.w;U.w=db;Fd=U.x;U.x=fb;Ya=U.y;U.y=La;Kb=U.z;U.z=kb;Lb=ma.vert;ma.vert=2;lb=ma.frag;ma.frag=1;V.dirty=!0;c(m,a,b);m.view=e;S.cull_enable=g;S.cull_face=l;q&&(L.cpuTime+=performance.now()-w);v&&va.destroyStream(k);N.elements=H;N.offset=X;N.count=p;N.primitive=u;ra[5]=D;ra[3]=t;ra[4]=ga;$b&&z.destroyStream(B);P.buffer=aa;P.divisor=W;P.normalized=
la;P.offset=Y;P.size=Ua;P.state=ea;P.stride=pa;P.type=Aa;P.w=Ba;P.x=za;P.y=na;P.z=Ea;Da&&z.destroyStream(oa);d.buffer=Pc;d.divisor=Hb;d.normalized=Ib;d.offset=rc;d.size=Nb;d.state=jb;d.stride=Gb;d.type=Db;d.w=xb;d.x=hb;d.y=Xb;d.z=Ob;Sa&&z.destroyStream(Pb);U.buffer=Wa;U.divisor=ub;U.normalized=tb;U.offset=Pa;U.size=Bc;U.state=Ra;U.stride=Jb;U.type=Eb;U.w=Na;U.x=Fd;U.y=Ya;U.z=Kb;ma.vert=Lb;ma.frag=lb;V.dirty=!0},batch:function(b,d){var h,g,f,k,n,r,x;h=m.view;g=e.call(this,m,b,0);m.view=g;f=oa.next;
f!==oa.cur&&(f?l.bindFramebuffer(36160,f.framebuffer):l.bindFramebuffer(36160,null),oa.cur=f);if(V.dirty){var u,t,y,B,G,P,N,K,Z,ra,T,U,aa,O,ba,ma,ja,ua,xa,Ad,nd,bd,sd,Lc,pd,Fc,fd,Oc,Ic,Bb,Fb,uc,yb,xc,Cb,Jc,mc,Gc,gd,Xc,Cc,ec,Hc,pc,qc,nc,fc,eb,Sc,zb,bb,Mb;u=S.dither;u!==V.dither&&(u?l.enable(3024):l.disable(3024),V.dither=u);t=S.blend_enable;t!==V.blend_enable&&(t?l.enable(3042):l.disable(3042),V.blend_enable=t);y=ya[0];B=ya[1];G=ya[2];P=ya[3];if(y!==fa[0]||B!==fa[1]||G!==fa[2]||P!==fa[3])l.blendColor(y,
B,G,P),fa[0]=y,fa[1]=B,fa[2]=G,fa[3]=P;N=Ba[0];K=Ba[1];if(N!==la[0]||K!==la[1])l.blendEquationSeparate(N,K),la[0]=N,la[1]=K;Z=pa[0];ra=pa[1];T=pa[2];U=pa[3];if(Z!==za[0]||ra!==za[1]||T!==za[2]||U!==za[3])l.blendFuncSeparate(Z,ra,T,U),za[0]=Z,za[1]=ra,za[2]=T,za[3]=U;aa=S.depth_enable;aa!==V.depth_enable&&(aa?l.enable(2929):l.disable(2929),V.depth_enable=aa);O=S.depth_func;O!==V.depth_func&&(l.depthFunc(O),V.depth_func=O);ba=$b[0];ma=$b[1];if(ba!==Ua[0]||ma!==Ua[1])l.depthRange(ba,ma),Ua[0]=ba,Ua[1]=
ma;ja=S.depth_mask;ja!==V.depth_mask&&(l.depthMask(ja),V.depth_mask=ja);ua=Ma[0];xa=Ma[1];Ad=Ma[2];nd=Ma[3];if(ua!==X[0]||xa!==X[1]||Ad!==X[2]||nd!==X[3])l.colorMask(ua,xa,Ad,nd),X[0]=ua,X[1]=xa,X[2]=Ad,X[3]=nd;bd=S.frontFace;bd!==V.frontFace&&(l.frontFace(bd),V.frontFace=bd);sd=S.lineWidth;sd!==V.lineWidth&&(l.lineWidth(sd),V.lineWidth=sd);Lc=S.polygonOffset_enable;Lc!==V.polygonOffset_enable&&(Lc?l.enable(32823):l.disable(32823),V.polygonOffset_enable=Lc);pd=w[0];Fc=w[1];if(pd!==v[0]||Fc!==v[1])l.polygonOffset(pd,
Fc),v[0]=pd,v[1]=Fc;fd=S.sample_alpha;fd!==V.sample_alpha&&(fd?l.enable(32926):l.disable(32926),V.sample_alpha=fd);Oc=S.sample_enable;Oc!==V.sample_enable&&(Oc?l.enable(32928):l.disable(32928),V.sample_enable=Oc);Ic=M[0];Bb=M[1];if(Ic!==wa[0]||Bb!==wa[1])l.sampleCoverage(Ic,Bb),wa[0]=Ic,wa[1]=Bb;Fb=S.stencil_enable;Fb!==V.stencil_enable&&(Fb?l.enable(2960):l.disable(2960),V.stencil_enable=Fb);uc=S.stencil_mask;uc!==V.stencil_mask&&(l.stencilMask(uc),V.stencil_mask=uc);yb=lc[0];xc=lc[1];Cb=lc[2];if(yb!==
ga[0]||xc!==ga[1]||Cb!==ga[2])l.stencilFunc(yb,xc,Cb),ga[0]=yb,ga[1]=xc,ga[2]=Cb;Jc=Ha[0];mc=Ha[1];Gc=Ha[2];gd=Ha[3];if(Jc!==qa[0]||mc!==qa[1]||Gc!==qa[2]||gd!==qa[3])l.stencilOpSeparate(Jc,mc,Gc,gd),qa[0]=Jc,qa[1]=mc,qa[2]=Gc,qa[3]=gd;Xc=H[0];Cc=H[1];ec=H[2];Hc=H[3];if(Xc!==sa[0]||Cc!==sa[1]||ec!==sa[2]||Hc!==sa[3])l.stencilOpSeparate(Xc,Cc,ec,Hc),sa[0]=Xc,sa[1]=Cc,sa[2]=ec,sa[3]=Hc;pc=S.scissor_enable;pc!==V.scissor_enable&&(pc?l.enable(3089):l.disable(3089),V.scissor_enable=pc);qc=Ea[0];nc=Ea[1];
fc=Ea[2];eb=Ea[3];if(qc!==mb[0]||nc!==mb[1]||fc!==mb[2]||eb!==mb[3])l.scissor(qc,nc,fc,eb),mb[0]=qc,mb[1]=nc,mb[2]=fc,mb[3]=eb;Sc=Aa[0];zb=Aa[1];bb=Aa[2];Mb=Aa[3];if(Sc!==Da[0]||zb!==Da[1]||bb!==Da[2]||Mb!==Da[3])l.viewport(Sc,zb,bb,Mb),Da[0]=Sc,Da[1]=zb,Da[2]=bb,Da[3]=Mb}l.enable(2884);V.cull_enable=!0;l.cullFace(1029);V.cull_face=1029;if(k=V.profile)n=performance.now(),L.count+=d;l.useProgram(W.program);var $a,ob;Ca.setVAO(null);$a=D.call(this,m,x,r);I($a)&&16===$a.length||F.commandRaise(C,J);l.uniformMatrix4fv(Y.location,
!1,Array.isArray($a)||$a instanceof Float32Array?$a:(Ja[0]=$a[0],Ja[1]=$a[1],Ja[2]=$a[2],Ja[3]=$a[3],Ja[4]=$a[4],Ja[5]=$a[5],Ja[6]=$a[6],Ja[7]=$a[7],Ja[8]=$a[8],Ja[9]=$a[9],Ja[10]=$a[10],Ja[11]=$a[11],Ja[12]=$a[12],Ja[13]=$a[13],Ja[14]=$a[14],Ja[15]=$a[15],Ja));ob=m.view;I(ob)&&16===ob.length||F.commandRaise(c,J);l.uniformMatrix4fv(R.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Fa[0]=ob[0],Fa[1]=ob[1],Fa[2]=ob[2],Fa[3]=ob[3],Fa[4]=ob[4],Fa[5]=ob[5],Fa[6]=ob[6],Fa[7]=ob[7],Fa[8]=ob[8],
Fa[9]=ob[9],Fa[10]=ob[10],Fa[11]=ob[11],Fa[12]=ob[12],Fa[13]=ob[13],Fa[14]=ob[14],Fa[15]=ob[15],Fa));for(r=0;r<d;++r){x=b[r];var Va,Pc,Hb,Ib,rc,Nb,jb,Gb,Db,xb,hb,Xb,Ob,rb,Sa,Pb,pb,ac,ib,qb,Ia,sb,Ka,db,fb,La,kb,Wa,ub,tb,Pa,Bc,Ra,Jb,Eb,Na,Fd,Ya,Kb,Lb,lb,Oa,Yb,Qa,vb,wb,Ta,nb,gc,Ec,vc,ab,jc,Tc,Xa;(Va=x.position)&&("object"===typeof Va||"function"===typeof Va)&&(ca(Va)||z.getBuffer(Va)||z.getBuffer(Va.buffer)||ca(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||I(Va.constant)))||F.commandRaise(E,
J);Pc=!1;Hb=null;Ib=!1;Nb=rc=0;jb=1;Gb=0;Db=5126;Ob=Xb=hb=xb=0;ca(Va)?(Pc=!0,Hb=z.createStream(34962,Va),Db=Hb.dtype):(Hb=z.getBuffer(Va))?Db=Hb.dtype:"constant"in Va?(jb=2,"number"===typeof Va.constant?(hb=Va.constant,Xb=Ob=xb=0):(hb=0<Va.constant.length?Va.constant[0]:0,Xb=1<Va.constant.length?Va.constant[1]:0,Ob=2<Va.constant.length?Va.constant[2]:0,xb=3<Va.constant.length?Va.constant[3]:0)):(Hb=ca(Va.buffer)?z.createStream(34962,Va.buffer):z.getBuffer(Va.buffer),Db="type"in Va?ka[Va.type]:Hb.dtype,
Ib=!!Va.normalized,Nb=Va.size|0,rc=Va.offset|0,Gb=Va.stride|0);rb=ha.location;Sa=Q[rb];if(1===jb){if(Sa.buffer||l.enableVertexAttribArray(rb),Pb=Nb||3,Sa.type!==Db||Sa.size!==Pb||Sa.buffer!==Hb||Sa.normalized!==Ib||Sa.offset!==rc||Sa.stride!==Gb)l.bindBuffer(34962,Hb.buffer),l.vertexAttribPointer(rb,Pb,Db,Ib,Gb,rc),Sa.type=Db,Sa.size=Pb,Sa.buffer=Hb,Sa.normalized=Ib,Sa.offset=rc,Sa.stride=Gb}else if(Sa.buffer&&(l.disableVertexAttribArray(rb),Sa.buffer=null),Sa.x!==hb||Sa.y!==Xb||Sa.z!==Ob||Sa.w!==
xb)l.vertexAttrib4f(rb,hb,Xb,Ob,xb),Sa.x=hb,Sa.y=Xb,Sa.z=Ob,Sa.w=xb;(pb=x.normal)&&("object"===typeof pb||"function"===typeof pb)&&(ca(pb)||z.getBuffer(pb)||z.getBuffer(pb.buffer)||ca(pb.buffer)||"constant"in pb&&("number"===typeof pb.constant||I(pb.constant)))||F.commandRaise(p,J);ac=!1;ib=null;qb=!1;sb=Ia=0;Ka=1;db=0;fb=5126;ub=Wa=kb=La=0;ca(pb)?(ac=!0,ib=z.createStream(34962,pb),fb=ib.dtype):(ib=z.getBuffer(pb))?fb=ib.dtype:"constant"in pb?(Ka=2,"number"===typeof pb.constant?(kb=pb.constant,Wa=
ub=La=0):(kb=0<pb.constant.length?pb.constant[0]:0,Wa=1<pb.constant.length?pb.constant[1]:0,ub=2<pb.constant.length?pb.constant[2]:0,La=3<pb.constant.length?pb.constant[3]:0)):(ib=ca(pb.buffer)?z.createStream(34962,pb.buffer):z.getBuffer(pb.buffer),fb="type"in pb?ka[pb.type]:ib.dtype,qb=!!pb.normalized,sb=pb.size|0,Ia=pb.offset|0,db=pb.stride|0);tb=ia.location;Pa=Q[tb];if(1===Ka){if(Pa.buffer||l.enableVertexAttribArray(tb),Bc=sb||3,Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==ib||Pa.normalized!==qb||Pa.offset!==
Ia||Pa.stride!==db)l.bindBuffer(34962,ib.buffer),l.vertexAttribPointer(tb,Bc,fb,qb,db,Ia),Pa.type=fb,Pa.size=Bc,Pa.buffer=ib,Pa.normalized=qb,Pa.offset=Ia,Pa.stride=db}else if(Pa.buffer&&(l.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==ub||Pa.w!==La)l.vertexAttrib4f(tb,kb,Wa,ub,La),Pa.x=kb,Pa.y=Wa,Pa.z=ub,Pa.w=La;(Ra=x.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(ca(Ra)||z.getBuffer(Ra)||z.getBuffer(Ra.buffer)||ca(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||
I(Ra.constant)))||F.commandRaise(ta,J);Jb=!1;Eb=null;Na=!1;Ya=Fd=0;Kb=1;Lb=0;lb=5126;vb=Qa=Yb=Oa=0;ca(Ra)?(Jb=!0,Eb=z.createStream(34962,Ra),lb=Eb.dtype):(Eb=z.getBuffer(Ra))?lb=Eb.dtype:"constant"in Ra?(Kb=2,"number"===typeof Ra.constant?(Yb=Ra.constant,Qa=vb=Oa=0):(Yb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,vb=2<Ra.constant.length?Ra.constant[2]:0,Oa=3<Ra.constant.length?Ra.constant[3]:0)):(Eb=ca(Ra.buffer)?z.createStream(34962,Ra.buffer):z.getBuffer(Ra.buffer),
lb="type"in Ra?ka[Ra.type]:Eb.dtype,Na=!!Ra.normalized,Ya=Ra.size|0,Fd=Ra.offset|0,Lb=Ra.stride|0);wb=ea.location;Ta=Q[wb];if(1===Kb){if(Ta.buffer||l.enableVertexAttribArray(wb),nb=Ya||2,Ta.type!==lb||Ta.size!==nb||Ta.buffer!==Eb||Ta.normalized!==Na||Ta.offset!==Fd||Ta.stride!==Lb)l.bindBuffer(34962,Eb.buffer),l.vertexAttribPointer(wb,nb,lb,Na,Lb,Fd),Ta.type=lb,Ta.size=nb,Ta.buffer=Eb,Ta.normalized=Na,Ta.offset=Fd,Ta.stride=Lb}else if(Ta.buffer&&(l.disableVertexAttribArray(wb),Ta.buffer=null),Ta.x!==
Yb||Ta.y!==Qa||Ta.z!==vb||Ta.w!==Oa)l.vertexAttrib4f(wb,Yb,Qa,vb,Oa),Ta.x=Yb,Ta.y=Qa,Ta.z=vb,Ta.w=Oa;(gc=x.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||F.commandRaise(q,J);Ec=gc._texture;l.uniform1i(A.location,Ec.bind());vc=x.elements;ab=null;(jc=ca(vc))?ab=va.createStream(vc):(ab=va.getElements(vc),vc&&!ab&&F.commandRaise(a,J));ab&&l.bindBuffer(34963,ab.buffer.buffer);Tc=ab?ab.primType:4;Xa=ab?ab.vertCount:-1;0<=Xa||F.commandRaise(na,
J);Xa&&(ab?l.drawElements(Tc,Xa,ab.type,0<<(ab.type-5121>>1)):l.drawArrays(Tc,0,Xa),Pc&&z.destroyStream(Hb),ac&&z.destroyStream(ib),Jb&&z.destroyStream(Eb),Ec.unbind(),jc&&va.destroyStream(ab))}V.dirty=!0;Ca.setVAO(null);m.view=h;k&&(L.cpuTime+=performance.now()-n)}}},"$7,color,position":function(k,F,J,L,f,h,g,b,B,y){var K,aa,t,u,G,O,x,T,r,P,ja,d,n,U,e,W,E,p,ta,D,C,c,q,a,na,A,ia,ha,Y,ea,R,Q,z,m,V,N;K=k.attributes;aa=k.context;t=k.current;u=k.draw;G=k.elements;O=k.framebuffer;x=k.gl;T=k.next;r=k.shader;
P=k.uniforms;ja=k.vao;d=T.blend_color;n=t.blend_color;U=T.blend_equation;e=t.blend_equation;W=T.blend_func;E=t.blend_func;p=T.colorMask;ta=t.colorMask;D=T.depth_range;C=t.depth_range;c=T.polygonOffset_offset;q=t.polygonOffset_offset;a=T.sample_coverage;na=t.sample_coverage;A=T.scissor_box;ia=t.scissor_box;ha=T.stencil_func;Y=t.stencil_func;ea=T.stencil_opBack;R=t.stencil_opBack;Q=T.stencil_opFront;z=t.stencil_opFront;m=T.viewport;V=t.viewport;N=[1,0,0,1];return{draw:function(b){var g,l,k,r;b=O.next;
b!==O.cur&&(b?x.bindFramebuffer(36160,b.framebuffer):x.bindFramebuffer(36160,null),O.cur=b);if(t.dirty){b=T.dither;b!==t.dither&&(b?x.enable(3024):x.disable(3024),t.dither=b);b=T.blend_enable;b!==t.blend_enable&&(b?x.enable(3042):x.disable(3042),t.blend_enable=b);b=d[0];l=d[1];k=d[2];r=d[3];if(b!==n[0]||l!==n[1]||k!==n[2]||r!==n[3])x.blendColor(b,l,k,r),n[0]=b,n[1]=l,n[2]=k,n[3]=r;b=U[0];l=U[1];if(b!==e[0]||l!==e[1])x.blendEquationSeparate(b,l),e[0]=b,e[1]=l;b=W[0];l=W[1];k=W[2];r=W[3];if(b!==E[0]||
l!==E[1]||k!==E[2]||r!==E[3])x.blendFuncSeparate(b,l,k,r),E[0]=b,E[1]=l,E[2]=k,E[3]=r;b=T.depth_enable;b!==t.depth_enable&&(b?x.enable(2929):x.disable(2929),t.depth_enable=b);b=T.depth_func;b!==t.depth_func&&(x.depthFunc(b),t.depth_func=b);b=D[0];l=D[1];if(b!==C[0]||l!==C[1])x.depthRange(b,l),C[0]=b,C[1]=l;b=T.depth_mask;b!==t.depth_mask&&(x.depthMask(b),t.depth_mask=b);b=p[0];l=p[1];k=p[2];r=p[3];if(b!==ta[0]||l!==ta[1]||k!==ta[2]||r!==ta[3])x.colorMask(b,l,k,r),ta[0]=b,ta[1]=l,ta[2]=k,ta[3]=r;b=
T.cull_enable;b!==t.cull_enable&&(b?x.enable(2884):x.disable(2884),t.cull_enable=b);b=T.cull_face;b!==t.cull_face&&(x.cullFace(b),t.cull_face=b);b=T.frontFace;b!==t.frontFace&&(x.frontFace(b),t.frontFace=b);b=T.lineWidth;b!==t.lineWidth&&(x.lineWidth(b),t.lineWidth=b);b=T.polygonOffset_enable;b!==t.polygonOffset_enable&&(b?x.enable(32823):x.disable(32823),t.polygonOffset_enable=b);b=c[0];l=c[1];if(b!==q[0]||l!==q[1])x.polygonOffset(b,l),q[0]=b,q[1]=l;b=T.sample_alpha;b!==t.sample_alpha&&(b?x.enable(32926):
x.disable(32926),t.sample_alpha=b);b=T.sample_enable;b!==t.sample_enable&&(b?x.enable(32928):x.disable(32928),t.sample_enable=b);b=a[0];l=a[1];if(b!==na[0]||l!==na[1])x.sampleCoverage(b,l),na[0]=b,na[1]=l;b=T.stencil_enable;b!==t.stencil_enable&&(b?x.enable(2960):x.disable(2960),t.stencil_enable=b);b=T.stencil_mask;b!==t.stencil_mask&&(x.stencilMask(b),t.stencil_mask=b);b=ha[0];l=ha[1];k=ha[2];if(b!==Y[0]||l!==Y[1]||k!==Y[2])x.stencilFunc(b,l,k),Y[0]=b,Y[1]=l,Y[2]=k;b=Q[0];l=Q[1];k=Q[2];r=Q[3];if(b!==
z[0]||l!==z[1]||k!==z[2]||r!==z[3])x.stencilOpSeparate(b,l,k,r),z[0]=b,z[1]=l,z[2]=k,z[3]=r;b=ea[0];l=ea[1];k=ea[2];r=ea[3];if(b!==R[0]||l!==R[1]||k!==R[2]||r!==R[3])x.stencilOpSeparate(b,l,k,r),R[0]=b,R[1]=l,R[2]=k,R[3]=r;b=T.scissor_enable;b!==t.scissor_enable&&(b?x.enable(3089):x.disable(3089),t.scissor_enable=b);b=A[0];l=A[1];k=A[2];r=A[3];if(b!==ia[0]||l!==ia[1]||k!==ia[2]||r!==ia[3])x.scissor(b,l,k,r),ia[0]=b,ia[1]=l,ia[2]=k,ia[3]=r;b=m[0];l=m[1];k=m[2];r=m[3];if(b!==V[0]||l!==V[1]||k!==V[2]||
r!==V[3])x.viewport(b,l,k,r),V[0]=b,V[1]=l,V[2]=k,V[3]=r;t.dirty=!1}if(b=t.profile)g=performance.now(),L.count++;x.useProgram(f.program);ja.setVAO(null);l=y.location;k=K[l];k.buffer||x.enableVertexAttribArray(l);if(k.type!==h.dtype||2!==k.size||k.buffer!==h||!1!==k.normalized||0!==k.offset||0!==k.stride)x.bindBuffer(34962,h.buffer),x.vertexAttribPointer(l,2,h.dtype,!1,0,0),k.type=h.dtype,k.size=2,k.buffer=h,k.normalized=!1,k.offset=0,k.stride=0;x.uniform4f(B.location,1,0,0,1);(l=u.elements)?x.bindBuffer(34963,
l.buffer.buffer):ja.currentVAO&&(l=G.getElements(ja.currentVAO.elements))&&x.bindBuffer(34963,l.buffer.buffer);k=u.primitive;r=u.offset;l?x.drawElements(k,3,l.type,r<<(l.type-5121>>1)):x.drawArrays(k,r,3);ja.setVAO(null);b&&(L.cpuTime+=performance.now()-g)},scope:function(a,b,c){var d,e,m,q,k,f,n,p,x,A,z,C,D,X,E,y,w,v;if(d=t.profile)e=performance.now(),L.count++;m=u.count;u.count=3;q=P[3];P[3]=N;k=g.buffer;g.buffer=h;f=g.divisor;g.divisor=0;n=g.normalized;g.normalized=!1;p=g.offset;g.offset=0;x=g.size;
g.size=0;A=g.state;g.state=1;z=g.stride;g.stride=0;C=g.type;g.type=h.dtype;D=g.w;g.w=0;X=g.x;g.x=0;E=g.y;g.y=0;y=g.z;g.z=0;w=r.vert;r.vert=2;v=r.frag;r.frag=1;b(aa,a,c);d&&(L.cpuTime+=performance.now()-e);u.count=m;P[3]=q;g.buffer=k;g.divisor=f;g.normalized=n;g.offset=p;g.size=x;g.state=A;g.stride=z;g.type=C;g.w=D;g.x=X;g.y=E;g.z=y;r.vert=w;r.frag=v},batch:function(g,k){var l,f,r;l=O.next;l!==O.cur&&(l?x.bindFramebuffer(36160,l.framebuffer):x.bindFramebuffer(36160,null),O.cur=l);if(t.dirty){var S,
F;l=T.dither;l!==t.dither&&(l?x.enable(3024):x.disable(3024),t.dither=l);l=T.blend_enable;l!==t.blend_enable&&(l?x.enable(3042):x.disable(3042),t.blend_enable=l);l=d[0];r=d[1];S=d[2];F=d[3];if(l!==n[0]||r!==n[1]||S!==n[2]||F!==n[3])x.blendColor(l,r,S,F),n[0]=l,n[1]=r,n[2]=S,n[3]=F;l=U[0];r=U[1];if(l!==e[0]||r!==e[1])x.blendEquationSeparate(l,r),e[0]=l,e[1]=r;l=W[0];r=W[1];S=W[2];F=W[3];if(l!==E[0]||r!==E[1]||S!==E[2]||F!==E[3])x.blendFuncSeparate(l,r,S,F),E[0]=l,E[1]=r,E[2]=S,E[3]=F;l=T.depth_enable;
l!==t.depth_enable&&(l?x.enable(2929):x.disable(2929),t.depth_enable=l);l=T.depth_func;l!==t.depth_func&&(x.depthFunc(l),t.depth_func=l);l=D[0];r=D[1];if(l!==C[0]||r!==C[1])x.depthRange(l,r),C[0]=l,C[1]=r;l=T.depth_mask;l!==t.depth_mask&&(x.depthMask(l),t.depth_mask=l);l=p[0];r=p[1];S=p[2];F=p[3];if(l!==ta[0]||r!==ta[1]||S!==ta[2]||F!==ta[3])x.colorMask(l,r,S,F),ta[0]=l,ta[1]=r,ta[2]=S,ta[3]=F;l=T.cull_enable;l!==t.cull_enable&&(l?x.enable(2884):x.disable(2884),t.cull_enable=l);l=T.cull_face;l!==
t.cull_face&&(x.cullFace(l),t.cull_face=l);l=T.frontFace;l!==t.frontFace&&(x.frontFace(l),t.frontFace=l);l=T.lineWidth;l!==t.lineWidth&&(x.lineWidth(l),t.lineWidth=l);l=T.polygonOffset_enable;l!==t.polygonOffset_enable&&(l?x.enable(32823):x.disable(32823),t.polygonOffset_enable=l);l=c[0];r=c[1];if(l!==q[0]||r!==q[1])x.polygonOffset(l,r),q[0]=l,q[1]=r;l=T.sample_alpha;l!==t.sample_alpha&&(l?x.enable(32926):x.disable(32926),t.sample_alpha=l);l=T.sample_enable;l!==t.sample_enable&&(l?x.enable(32928):
x.disable(32928),t.sample_enable=l);l=a[0];r=a[1];if(l!==na[0]||r!==na[1])x.sampleCoverage(l,r),na[0]=l,na[1]=r;l=T.stencil_enable;l!==t.stencil_enable&&(l?x.enable(2960):x.disable(2960),t.stencil_enable=l);l=T.stencil_mask;l!==t.stencil_mask&&(x.stencilMask(l),t.stencil_mask=l);l=ha[0];r=ha[1];S=ha[2];if(l!==Y[0]||r!==Y[1]||S!==Y[2])x.stencilFunc(l,r,S),Y[0]=l,Y[1]=r,Y[2]=S;l=Q[0];r=Q[1];S=Q[2];F=Q[3];if(l!==z[0]||r!==z[1]||S!==z[2]||F!==z[3])x.stencilOpSeparate(l,r,S,F),z[0]=l,z[1]=r,z[2]=S,z[3]=
F;l=ea[0];r=ea[1];S=ea[2];F=ea[3];if(l!==R[0]||r!==R[1]||S!==R[2]||F!==R[3])x.stencilOpSeparate(l,r,S,F),R[0]=l,R[1]=r,R[2]=S,R[3]=F;l=T.scissor_enable;l!==t.scissor_enable&&(l?x.enable(3089):x.disable(3089),t.scissor_enable=l);l=A[0];r=A[1];S=A[2];F=A[3];if(l!==ia[0]||r!==ia[1]||S!==ia[2]||F!==ia[3])x.scissor(l,r,S,F),ia[0]=l,ia[1]=r,ia[2]=S,ia[3]=F;l=m[0];r=m[1];S=m[2];F=m[3];if(l!==V[0]||r!==V[1]||S!==V[2]||F!==V[3])x.viewport(l,r,S,F),V[0]=l,V[1]=r,V[2]=S,V[3]=F;t.dirty=!1}if(l=t.profile)f=performance.now(),
L.count+=k;x.useProgram(b.program);var J;ja.setVAO(null);r=y.location;S=K[r];S.buffer||x.enableVertexAttribArray(r);if(S.type!==h.dtype||2!==S.size||S.buffer!==h||!1!==S.normalized||0!==S.offset||0!==S.stride)x.bindBuffer(34962,h.buffer),x.vertexAttribPointer(r,2,h.dtype,!1,0,0),S.type=h.dtype,S.size=2,S.buffer=h,S.normalized=!1,S.offset=0,S.stride=0;x.uniform4f(B.location,1,0,0,1);(S=u.elements)?x.bindBuffer(34963,S.buffer.buffer):ja.currentVAO&&(S=G.getElements(ja.currentVAO.elements))&&x.bindBuffer(34963,
S.buffer.buffer);F=u.primitive;J=u.offset;for(r=0;r<k;++r)S?x.drawElements(F,3,S.type,J<<(S.type-5121>>1)):x.drawArrays(F,J,3);ja.setVAO(null);l&&(L.cpuTime+=performance.now()-f)}}},"$19,angle,color,offset,position":function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,O,x,T,r,P,ja,d,n,U){var e,W,E,p,ta,D,C,c,q,a,na,A,ia,ha,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa;e=k.attributes;W=k.context;E=k.current;p=k.draw;ta=k.elements;D=k.framebuffer;C=k.gl;c=k.isArrayLike;q=k.next;a=k.shader;na=k.uniforms;
A=k.vao;ia=q.blend_color;ha=E.blend_color;Y=q.blend_equation;ea=E.blend_equation;R=q.blend_func;Q=E.blend_func;z=q.colorMask;m=E.colorMask;V=q.depth_range;N=E.depth_range;va=q.polygonOffset_offset;oa=E.polygonOffset_offset;l=q.sample_coverage;I=E.sample_coverage;ca=q.scissor_box;S=E.scissor_box;ma=q.stencil_func;ra=E.stencil_func;Ca=q.stencil_opBack;ya=E.stencil_opBack;fa=q.stencil_opFront;Ba=E.stencil_opFront;la=q.viewport;pa=E.viewport;return{draw:function(a){var k,r,x,u;k=D.next;k!==D.cur&&(k?
C.bindFramebuffer(36160,k.framebuffer):C.bindFramebuffer(36160,null),D.cur=k);if(E.dirty){var w;k=q.dither;k!==E.dither&&(k?C.enable(3024):C.disable(3024),E.dither=k);k=q.blend_enable;k!==E.blend_enable&&(k?C.enable(3042):C.disable(3042),E.blend_enable=k);k=ia[0];x=ia[1];u=ia[2];w=ia[3];if(k!==ha[0]||x!==ha[1]||u!==ha[2]||w!==ha[3])C.blendColor(k,x,u,w),ha[0]=k,ha[1]=x,ha[2]=u,ha[3]=w;k=Y[0];x=Y[1];if(k!==ea[0]||x!==ea[1])C.blendEquationSeparate(k,x),ea[0]=k,ea[1]=x;k=R[0];x=R[1];u=R[2];w=R[3];if(k!==
Q[0]||x!==Q[1]||u!==Q[2]||w!==Q[3])C.blendFuncSeparate(k,x,u,w),Q[0]=k,Q[1]=x,Q[2]=u,Q[3]=w;k=q.depth_func;k!==E.depth_func&&(C.depthFunc(k),E.depth_func=k);k=V[0];x=V[1];if(k!==N[0]||x!==N[1])C.depthRange(k,x),N[0]=k,N[1]=x;k=q.depth_mask;k!==E.depth_mask&&(C.depthMask(k),E.depth_mask=k);k=z[0];x=z[1];u=z[2];w=z[3];if(k!==m[0]||x!==m[1]||u!==m[2]||w!==m[3])C.colorMask(k,x,u,w),m[0]=k,m[1]=x,m[2]=u,m[3]=w;k=q.cull_enable;k!==E.cull_enable&&(k?C.enable(2884):C.disable(2884),E.cull_enable=k);k=q.cull_face;
k!==E.cull_face&&(C.cullFace(k),E.cull_face=k);k=q.frontFace;k!==E.frontFace&&(C.frontFace(k),E.frontFace=k);k=q.lineWidth;k!==E.lineWidth&&(C.lineWidth(k),E.lineWidth=k);k=q.polygonOffset_enable;k!==E.polygonOffset_enable&&(k?C.enable(32823):C.disable(32823),E.polygonOffset_enable=k);k=va[0];x=va[1];if(k!==oa[0]||x!==oa[1])C.polygonOffset(k,x),oa[0]=k,oa[1]=x;k=q.sample_alpha;k!==E.sample_alpha&&(k?C.enable(32926):C.disable(32926),E.sample_alpha=k);k=q.sample_enable;k!==E.sample_enable&&(k?C.enable(32928):
C.disable(32928),E.sample_enable=k);k=l[0];x=l[1];if(k!==I[0]||x!==I[1])C.sampleCoverage(k,x),I[0]=k,I[1]=x;k=q.stencil_enable;k!==E.stencil_enable&&(k?C.enable(2960):C.disable(2960),E.stencil_enable=k);k=q.stencil_mask;k!==E.stencil_mask&&(C.stencilMask(k),E.stencil_mask=k);k=ma[0];x=ma[1];u=ma[2];if(k!==ra[0]||x!==ra[1]||u!==ra[2])C.stencilFunc(k,x,u),ra[0]=k,ra[1]=x,ra[2]=u;k=fa[0];x=fa[1];u=fa[2];w=fa[3];if(k!==Ba[0]||x!==Ba[1]||u!==Ba[2]||w!==Ba[3])C.stencilOpSeparate(k,x,u,w),Ba[0]=k,Ba[1]=
x,Ba[2]=u,Ba[3]=w;k=Ca[0];x=Ca[1];u=Ca[2];w=Ca[3];if(k!==ya[0]||x!==ya[1]||u!==ya[2]||w!==ya[3])C.stencilOpSeparate(k,x,u,w),ya[0]=k,ya[1]=x,ya[2]=u,ya[3]=w;k=q.scissor_enable;k!==E.scissor_enable&&(k?C.enable(3089):C.disable(3089),E.scissor_enable=k);k=ca[0];x=ca[1];u=ca[2];w=ca[3];if(k!==S[0]||x!==S[1]||u!==S[2]||w!==S[3])C.scissor(k,x,u,w),S[0]=k,S[1]=x,S[2]=u,S[3]=w;k=la[0];x=la[1];u=la[2];w=la[3];if(k!==pa[0]||x!==pa[1]||u!==pa[2]||w!==pa[3])C.viewport(k,x,u,w),pa[0]=k,pa[1]=x,pa[2]=u,pa[3]=
w}C.disable(2929);E.depth_enable=!1;if(k=E.profile)r=performance.now(),L.count++;C.useProgram(f.program);A.setVAO(null);x=U.location;u=e[x];u.buffer||C.enableVertexAttribArray(x);if(u.type!==h.dtype||2!==u.size||u.buffer!==h||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,h.buffer),C.vertexAttribPointer(x,2,h.dtype,!1,0,0),u.type=h.dtype,u.size=2,u.buffer=h,u.normalized=!1,u.offset=0,u.stride=0;x=g.call(this,W,a,0);"number"!==typeof x&&F.commandRaise(b,J);C.uniform1f(ja.location,
x);x=a.offset;c(x)&&2===x.length||F.commandRaise(B,J);C.uniform2f(n.location,x[0],x[1]);a=y.call(this,W,a,0);c(a)&&4===a.length||F.commandRaise(K,J);C.uniform4f(d.location,a[0],a[1],a[2],a[3]);(a=p.elements)?C.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=ta.getElements(A.currentVAO.elements))&&C.bindBuffer(34963,a.buffer.buffer);x=p.primitive;u=p.offset;a?C.drawElements(x,3,a.type,u<<(a.type-5121>>1)):C.drawArrays(x,u,3);E.dirty=!0;A.setVAO(null);k&&(L.cpuTime+=performance.now()-r)},scope:function(b,
c,d){var e,g,l,k,m,f,n,r,x,A,H,z,C,D,F,y,S,B,I,fa,J;e=q.depth_enable;q.depth_enable=!1;if(g=E.profile)l=performance.now(),L.count++;k=p.count;p.count=3;m=aa.call(this,W,b,d);f=na[3];na[3]=m;n=t.call(this,W,b,d);m=na[5];na[5]=n;r=b.offset;n=na[4];na[4]=r;r=u.buffer;u.buffer=h;x=u.divisor;u.divisor=0;A=u.normalized;u.normalized=!1;H=u.offset;u.offset=0;z=u.size;u.size=0;C=u.state;u.state=1;D=u.stride;u.stride=0;F=u.type;u.type=h.dtype;y=u.w;u.w=0;S=u.x;u.x=0;B=u.y;u.y=0;I=u.z;u.z=0;fa=a.vert;a.vert=
2;J=a.frag;a.frag=1;E.dirty=!0;c(W,b,d);q.depth_enable=e;g&&(L.cpuTime+=performance.now()-l);p.count=k;na[3]=f;na[5]=m;na[4]=n;u.buffer=r;u.divisor=x;u.normalized=A;u.offset=H;u.size=z;u.state=C;u.stride=D;u.type=F;u.w=y;u.x=S;u.y=B;u.z=I;a.vert=fa;a.frag=J;E.dirty=!0},batch:function(a,b){var g,k,f,w;g=D.next;g!==D.cur&&(g?C.bindFramebuffer(36160,g.framebuffer):C.bindFramebuffer(36160,null),D.cur=g);if(E.dirty){var v,M,u;g=q.dither;g!==E.dither&&(g?C.enable(3024):C.disable(3024),E.dither=g);g=q.blend_enable;
g!==E.blend_enable&&(g?C.enable(3042):C.disable(3042),E.blend_enable=g);g=ia[0];v=ia[1];M=ia[2];u=ia[3];if(g!==ha[0]||v!==ha[1]||M!==ha[2]||u!==ha[3])C.blendColor(g,v,M,u),ha[0]=g,ha[1]=v,ha[2]=M,ha[3]=u;g=Y[0];v=Y[1];if(g!==ea[0]||v!==ea[1])C.blendEquationSeparate(g,v),ea[0]=g,ea[1]=v;g=R[0];v=R[1];M=R[2];u=R[3];if(g!==Q[0]||v!==Q[1]||M!==Q[2]||u!==Q[3])C.blendFuncSeparate(g,v,M,u),Q[0]=g,Q[1]=v,Q[2]=M,Q[3]=u;g=q.depth_func;g!==E.depth_func&&(C.depthFunc(g),E.depth_func=g);g=V[0];v=V[1];if(g!==N[0]||
v!==N[1])C.depthRange(g,v),N[0]=g,N[1]=v;g=q.depth_mask;g!==E.depth_mask&&(C.depthMask(g),E.depth_mask=g);g=z[0];v=z[1];M=z[2];u=z[3];if(g!==m[0]||v!==m[1]||M!==m[2]||u!==m[3])C.colorMask(g,v,M,u),m[0]=g,m[1]=v,m[2]=M,m[3]=u;g=q.cull_enable;g!==E.cull_enable&&(g?C.enable(2884):C.disable(2884),E.cull_enable=g);g=q.cull_face;g!==E.cull_face&&(C.cullFace(g),E.cull_face=g);g=q.frontFace;g!==E.frontFace&&(C.frontFace(g),E.frontFace=g);g=q.lineWidth;g!==E.lineWidth&&(C.lineWidth(g),E.lineWidth=g);g=q.polygonOffset_enable;
g!==E.polygonOffset_enable&&(g?C.enable(32823):C.disable(32823),E.polygonOffset_enable=g);g=va[0];v=va[1];if(g!==oa[0]||v!==oa[1])C.polygonOffset(g,v),oa[0]=g,oa[1]=v;g=q.sample_alpha;g!==E.sample_alpha&&(g?C.enable(32926):C.disable(32926),E.sample_alpha=g);g=q.sample_enable;g!==E.sample_enable&&(g?C.enable(32928):C.disable(32928),E.sample_enable=g);g=l[0];v=l[1];if(g!==I[0]||v!==I[1])C.sampleCoverage(g,v),I[0]=g,I[1]=v;g=q.stencil_enable;g!==E.stencil_enable&&(g?C.enable(2960):C.disable(2960),E.stencil_enable=
g);g=q.stencil_mask;g!==E.stencil_mask&&(C.stencilMask(g),E.stencil_mask=g);g=ma[0];v=ma[1];M=ma[2];if(g!==ra[0]||v!==ra[1]||M!==ra[2])C.stencilFunc(g,v,M),ra[0]=g,ra[1]=v,ra[2]=M;g=fa[0];v=fa[1];M=fa[2];u=fa[3];if(g!==Ba[0]||v!==Ba[1]||M!==Ba[2]||u!==Ba[3])C.stencilOpSeparate(g,v,M,u),Ba[0]=g,Ba[1]=v,Ba[2]=M,Ba[3]=u;g=Ca[0];v=Ca[1];M=Ca[2];u=Ca[3];if(g!==ya[0]||v!==ya[1]||M!==ya[2]||u!==ya[3])C.stencilOpSeparate(g,v,M,u),ya[0]=g,ya[1]=v,ya[2]=M,ya[3]=u;g=q.scissor_enable;g!==E.scissor_enable&&(g?
C.enable(3089):C.disable(3089),E.scissor_enable=g);g=ca[0];v=ca[1];M=ca[2];u=ca[3];if(g!==S[0]||v!==S[1]||M!==S[2]||u!==S[3])C.scissor(g,v,M,u),S[0]=g,S[1]=v,S[2]=M,S[3]=u;g=la[0];v=la[1];M=la[2];u=la[3];if(g!==pa[0]||v!==pa[1]||M!==pa[2]||u!==pa[3])C.viewport(g,v,M,u),pa[0]=g,pa[1]=v,pa[2]=M,pa[3]=u}C.disable(2929);E.depth_enable=!1;if(g=E.profile)k=performance.now(),L.count+=b;C.useProgram(G.program);A.setVAO(null);v=U.location;M=e[v];M.buffer||C.enableVertexAttribArray(v);if(M.type!==h.dtype||
2!==M.size||M.buffer!==h||!1!==M.normalized||0!==M.offset||0!==M.stride)C.bindBuffer(34962,h.buffer),C.vertexAttribPointer(v,2,h.dtype,!1,0,0),M.type=h.dtype,M.size=2,M.buffer=h,M.normalized=!1,M.offset=0,M.stride=0;f=O.call(this,W,w,f);"number"!==typeof f&&F.commandRaise(x,J);C.uniform1f(ja.location,f);(v=p.elements)?C.bindBuffer(34963,v.buffer.buffer):A.currentVAO&&(v=ta.getElements(A.currentVAO.elements))&&C.bindBuffer(34963,v.buffer.buffer);M=p.primitive;u=p.offset;for(f=0;f<b;++f){w=a[f];var t,
y,B,ga,H,sa,K,qa,aa;t=w.offset;c(t)&&2===t.length||F.commandRaise(T,J);y=t[0];t=t[1];f&&B===y&&ga===t||(B=y,ga=t,C.uniform2f(n.location,y,t));H=r.call(this,W,w,f);c(H)&&4===H.length||F.commandRaise(P,J);w=H[0];y=H[1];t=H[2];H=H[3];f&&sa===w&&K===y&&qa===t&&aa===H||(sa=w,K=y,qa=t,aa=H,C.uniform4f(d.location,w,y,t,H));v?C.drawElements(M,3,v.type,u<<(v.type-5121>>1)):C.drawArrays(M,u,3)}E.dirty=!0;A.setVAO(null);g&&(L.cpuTime+=performance.now()-k)}}},"$23,model,position,projection,view":function(k,F,
J,L,f,h,g,b,B,y,K,aa,t,u,G,O,x,T,r,P,ja,d,n,U,e,W,E,p){var ha,D,C,c,q,a,na,A,ia,cc,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea;ha=k.attributes;D=k.context;C=k.current;c=k.draw;q=k.framebuffer;a=k.gl;na=k.isArrayLike;A=k.next;ia=k.shader;cc=k.uniforms;Y=k.vao;ea=A.blend_color;R=C.blend_color;Q=A.blend_equation;z=C.blend_equation;m=A.blend_func;V=C.blend_func;N=A.colorMask;va=C.colorMask;oa=A.depth_range;l=C.depth_range;I=A.polygonOffset_offset;ca=C.polygonOffset_offset;
S=A.sample_coverage;ma=C.sample_coverage;ra=A.scissor_box;Ca=C.scissor_box;ya=A.stencil_func;fa=C.stencil_func;Ba=A.stencil_opBack;la=C.stencil_opBack;pa=A.stencil_opFront;za=C.stencil_opFront;Ma=A.viewport;X=C.viewport;$b=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ua=new Float32Array(16);w=new Float32Array(16);v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];M=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);wa=new Float32Array(16);Ea=new Float32Array(16);return{draw:function(c){var d,k,n,v;d=q.next;
d!==q.cur&&(d?a.bindFramebuffer(36160,d.framebuffer):a.bindFramebuffer(36160,null),q.cur=d);if(C.dirty){var r;d=A.dither;d!==C.dither&&(d?a.enable(3024):a.disable(3024),C.dither=d);d=A.blend_enable;d!==C.blend_enable&&(d?a.enable(3042):a.disable(3042),C.blend_enable=d);d=ea[0];n=ea[1];v=ea[2];r=ea[3];if(d!==R[0]||n!==R[1]||v!==R[2]||r!==R[3])a.blendColor(d,n,v,r),R[0]=d,R[1]=n,R[2]=v,R[3]=r;d=Q[0];n=Q[1];if(d!==z[0]||n!==z[1])a.blendEquationSeparate(d,n),z[0]=d,z[1]=n;d=m[0];n=m[1];v=m[2];r=m[3];
if(d!==V[0]||n!==V[1]||v!==V[2]||r!==V[3])a.blendFuncSeparate(d,n,v,r),V[0]=d,V[1]=n,V[2]=v,V[3]=r;d=A.depth_enable;d!==C.depth_enable&&(d?a.enable(2929):a.disable(2929),C.depth_enable=d);d=A.depth_func;d!==C.depth_func&&(a.depthFunc(d),C.depth_func=d);d=oa[0];n=oa[1];if(d!==l[0]||n!==l[1])a.depthRange(d,n),l[0]=d,l[1]=n;d=A.depth_mask;d!==C.depth_mask&&(a.depthMask(d),C.depth_mask=d);d=N[0];n=N[1];v=N[2];r=N[3];if(d!==va[0]||n!==va[1]||v!==va[2]||r!==va[3])a.colorMask(d,n,v,r),va[0]=d,va[1]=n,va[2]=
v,va[3]=r;d=A.cull_enable;d!==C.cull_enable&&(d?a.enable(2884):a.disable(2884),C.cull_enable=d);d=A.cull_face;d!==C.cull_face&&(a.cullFace(d),C.cull_face=d);d=A.frontFace;d!==C.frontFace&&(a.frontFace(d),C.frontFace=d);d=A.lineWidth;d!==C.lineWidth&&(a.lineWidth(d),C.lineWidth=d);d=A.polygonOffset_enable;d!==C.polygonOffset_enable&&(d?a.enable(32823):a.disable(32823),C.polygonOffset_enable=d);d=I[0];n=I[1];if(d!==ca[0]||n!==ca[1])a.polygonOffset(d,n),ca[0]=d,ca[1]=n;d=A.sample_alpha;d!==C.sample_alpha&&
(d?a.enable(32926):a.disable(32926),C.sample_alpha=d);d=A.sample_enable;d!==C.sample_enable&&(d?a.enable(32928):a.disable(32928),C.sample_enable=d);d=S[0];n=S[1];if(d!==ma[0]||n!==ma[1])a.sampleCoverage(d,n),ma[0]=d,ma[1]=n;d=A.stencil_enable;d!==C.stencil_enable&&(d?a.enable(2960):a.disable(2960),C.stencil_enable=d);d=A.stencil_mask;d!==C.stencil_mask&&(a.stencilMask(d),C.stencil_mask=d);d=ya[0];n=ya[1];v=ya[2];if(d!==fa[0]||n!==fa[1]||v!==fa[2])a.stencilFunc(d,n,v),fa[0]=d,fa[1]=n,fa[2]=v;d=pa[0];
n=pa[1];v=pa[2];r=pa[3];if(d!==za[0]||n!==za[1]||v!==za[2]||r!==za[3])a.stencilOpSeparate(d,n,v,r),za[0]=d,za[1]=n,za[2]=v,za[3]=r;d=Ba[0];n=Ba[1];v=Ba[2];r=Ba[3];if(d!==la[0]||n!==la[1]||v!==la[2]||r!==la[3])a.stencilOpSeparate(d,n,v,r),la[0]=d,la[1]=n,la[2]=v,la[3]=r;d=A.scissor_enable;d!==C.scissor_enable&&(d?a.enable(3089):a.disable(3089),C.scissor_enable=d);d=ra[0];n=ra[1];v=ra[2];r=ra[3];if(d!==Ca[0]||n!==Ca[1]||v!==Ca[2]||r!==Ca[3])a.scissor(d,n,v,r),Ca[0]=d,Ca[1]=n,Ca[2]=v,Ca[3]=r;d=Ma[0];
n=Ma[1];v=Ma[2];r=Ma[3];if(d!==X[0]||n!==X[1]||v!==X[2]||r!==X[3])a.viewport(d,n,v,r),X[0]=d,X[1]=n,X[2]=v,X[3]=r;C.dirty=!1}if(d=C.profile)k=performance.now(),L.count++;a.useProgram(f.program);Y.setVAO(null);n=W.location;v=ha[n];v.buffer||a.enableVertexAttribArray(n);if(v.type!==h.dtype||3!==v.size||v.buffer!==h||!1!==v.normalized||0!==v.offset||0!==v.stride)a.bindBuffer(34962,h.buffer),a.vertexAttribPointer(n,3,h.dtype,!1,0,0),v.type=h.dtype,v.size=3,v.buffer=h,v.normalized=!1,v.offset=0,v.stride=
0;a.uniformMatrix4fv(e.location,!1,$b);n=g.call(this,D,c,0);na(n)&&16===n.length||F.commandRaise(b,J);a.uniformMatrix4fv(p.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ua[0]=n[0],Ua[1]=n[1],Ua[2]=n[2],Ua[3]=n[3],Ua[4]=n[4],Ua[5]=n[5],Ua[6]=n[6],Ua[7]=n[7],Ua[8]=n[8],Ua[9]=n[9],Ua[10]=n[10],Ua[11]=n[11],Ua[12]=n[12],Ua[13]=n[13],Ua[14]=n[14],Ua[15]=n[15],Ua));c=B.call(this,D,c,0);na(c)&&16===c.length||F.commandRaise(y,J);a.uniformMatrix4fv(E.location,!1,Array.isArray(c)||c instanceof
Float32Array?c:(w[0]=c[0],w[1]=c[1],w[2]=c[2],w[3]=c[3],w[4]=c[4],w[5]=c[5],w[6]=c[6],w[7]=c[7],w[8]=c[8],w[9]=c[9],w[10]=c[10],w[11]=c[11],w[12]=c[12],w[13]=c[13],w[14]=c[14],w[15]=c[15],w));K&&a.bindBuffer(34963,K.buffer.buffer);c=K.primType;n=K.vertCount-0;0<=n||F.commandRaise(aa,J);n&&(a.drawElements(c,n,K.type,0<<(K.type-5121>>1)),Y.setVAO(null),d&&(L.cpuTime+=performance.now()-k))},scope:function(a,b,d){var e,g,l,k,m,q,w,f,n,r,M,p,A,X,z,E,y,S,B,I,fa,P,N;if(e=C.profile)g=performance.now(),L.count++;
l=c.elements;c.elements=t;k=c.offset;c.offset=0;m=t.vertCount-0;0<=m||F.commandRaise(u,J);q=c.count;c.count=m;w=t.primType;m=c.primitive;c.primitive=w;w=cc[3];cc[3]=v;f=G.call(this,D,a,d);n=cc[5];cc[5]=f;r=O.call(this,D,a,d);f=cc[4];cc[4]=r;r=x.buffer;x.buffer=h;M=x.divisor;x.divisor=0;p=x.normalized;x.normalized=!1;A=x.offset;x.offset=0;X=x.size;x.size=0;z=x.state;x.state=1;E=x.stride;x.stride=0;y=x.type;x.type=h.dtype;S=x.w;x.w=0;B=x.x;x.x=0;I=x.y;x.y=0;fa=x.z;x.z=0;P=ia.vert;ia.vert=2;N=ia.frag;
ia.frag=1;b(D,a,d);e&&(L.cpuTime+=performance.now()-g);c.elements=l;c.offset=k;c.count=q;c.primitive=m;cc[3]=w;cc[5]=n;cc[4]=f;x.buffer=r;x.divisor=M;x.normalized=p;x.offset=A;x.size=X;x.state=z;x.stride=E;x.type=y;x.w=S;x.x=B;x.y=I;x.z=fa;ia.vert=P;ia.frag=N},batch:function(b,c){var g,k,w;g=q.next;g!==q.cur&&(g?a.bindFramebuffer(36160,g.framebuffer):a.bindFramebuffer(36160,null),q.cur=g);if(C.dirty){var f,v,x;g=A.dither;g!==C.dither&&(g?a.enable(3024):a.disable(3024),C.dither=g);g=A.blend_enable;
g!==C.blend_enable&&(g?a.enable(3042):a.disable(3042),C.blend_enable=g);g=ea[0];f=ea[1];v=ea[2];x=ea[3];if(g!==R[0]||f!==R[1]||v!==R[2]||x!==R[3])a.blendColor(g,f,v,x),R[0]=g,R[1]=f,R[2]=v,R[3]=x;g=Q[0];f=Q[1];if(g!==z[0]||f!==z[1])a.blendEquationSeparate(g,f),z[0]=g,z[1]=f;g=m[0];f=m[1];v=m[2];x=m[3];if(g!==V[0]||f!==V[1]||v!==V[2]||x!==V[3])a.blendFuncSeparate(g,f,v,x),V[0]=g,V[1]=f,V[2]=v,V[3]=x;g=A.depth_enable;g!==C.depth_enable&&(g?a.enable(2929):a.disable(2929),C.depth_enable=g);g=A.depth_func;
g!==C.depth_func&&(a.depthFunc(g),C.depth_func=g);g=oa[0];f=oa[1];if(g!==l[0]||f!==l[1])a.depthRange(g,f),l[0]=g,l[1]=f;g=A.depth_mask;g!==C.depth_mask&&(a.depthMask(g),C.depth_mask=g);g=N[0];f=N[1];v=N[2];x=N[3];if(g!==va[0]||f!==va[1]||v!==va[2]||x!==va[3])a.colorMask(g,f,v,x),va[0]=g,va[1]=f,va[2]=v,va[3]=x;g=A.cull_enable;g!==C.cull_enable&&(g?a.enable(2884):a.disable(2884),C.cull_enable=g);g=A.cull_face;g!==C.cull_face&&(a.cullFace(g),C.cull_face=g);g=A.frontFace;g!==C.frontFace&&(a.frontFace(g),
C.frontFace=g);g=A.lineWidth;g!==C.lineWidth&&(a.lineWidth(g),C.lineWidth=g);g=A.polygonOffset_enable;g!==C.polygonOffset_enable&&(g?a.enable(32823):a.disable(32823),C.polygonOffset_enable=g);g=I[0];f=I[1];if(g!==ca[0]||f!==ca[1])a.polygonOffset(g,f),ca[0]=g,ca[1]=f;g=A.sample_alpha;g!==C.sample_alpha&&(g?a.enable(32926):a.disable(32926),C.sample_alpha=g);g=A.sample_enable;g!==C.sample_enable&&(g?a.enable(32928):a.disable(32928),C.sample_enable=g);g=S[0];f=S[1];if(g!==ma[0]||f!==ma[1])a.sampleCoverage(g,
f),ma[0]=g,ma[1]=f;g=A.stencil_enable;g!==C.stencil_enable&&(g?a.enable(2960):a.disable(2960),C.stencil_enable=g);g=A.stencil_mask;g!==C.stencil_mask&&(a.stencilMask(g),C.stencil_mask=g);g=ya[0];f=ya[1];v=ya[2];if(g!==fa[0]||f!==fa[1]||v!==fa[2])a.stencilFunc(g,f,v),fa[0]=g,fa[1]=f,fa[2]=v;g=pa[0];f=pa[1];v=pa[2];x=pa[3];if(g!==za[0]||f!==za[1]||v!==za[2]||x!==za[3])a.stencilOpSeparate(g,f,v,x),za[0]=g,za[1]=f,za[2]=v,za[3]=x;g=Ba[0];f=Ba[1];v=Ba[2];x=Ba[3];if(g!==la[0]||f!==la[1]||v!==la[2]||x!==
la[3])a.stencilOpSeparate(g,f,v,x),la[0]=g,la[1]=f,la[2]=v,la[3]=x;g=A.scissor_enable;g!==C.scissor_enable&&(g?a.enable(3089):a.disable(3089),C.scissor_enable=g);g=ra[0];f=ra[1];v=ra[2];x=ra[3];if(g!==Ca[0]||f!==Ca[1]||v!==Ca[2]||x!==Ca[3])a.scissor(g,f,v,x),Ca[0]=g,Ca[1]=f,Ca[2]=v,Ca[3]=x;g=Ma[0];f=Ma[1];v=Ma[2];x=Ma[3];if(g!==X[0]||f!==X[1]||v!==X[2]||x!==X[3])a.viewport(g,f,v,x),X[0]=g,X[1]=f,X[2]=v,X[3]=x;C.dirty=!1}if(g=C.profile)k=performance.now(),L.count+=c;a.useProgram(T.program);Y.setVAO(null);
f=W.location;v=ha[f];v.buffer||a.enableVertexAttribArray(f);if(v.type!==h.dtype||3!==v.size||v.buffer!==h||!1!==v.normalized||0!==v.offset||0!==v.stride)a.bindBuffer(34962,h.buffer),a.vertexAttribPointer(f,3,h.dtype,!1,0,0),v.type=h.dtype,v.size=3,v.buffer=h,v.normalized=!1,v.offset=0,v.stride=0;a.uniformMatrix4fv(e.location,!1,M);f=r.call(this,D,void 0,w);na(f)&&16===f.length||F.commandRaise(P,J);a.uniformMatrix4fv(p.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wa[0]=f[0],wa[1]=f[1],
wa[2]=f[2],wa[3]=f[3],wa[4]=f[4],wa[5]=f[5],wa[6]=f[6],wa[7]=f[7],wa[8]=f[8],wa[9]=f[9],wa[10]=f[10],wa[11]=f[11],wa[12]=f[12],wa[13]=f[13],wa[14]=f[14],wa[15]=f[15],wa));w=ja.call(this,D,void 0,w);na(w)&&16===w.length||F.commandRaise(d,J);a.uniformMatrix4fv(E.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Ea[0]=w[0],Ea[1]=w[1],Ea[2]=w[2],Ea[3]=w[3],Ea[4]=w[4],Ea[5]=w[5],Ea[6]=w[6],Ea[7]=w[7],Ea[8]=w[8],Ea[9]=w[9],Ea[10]=w[10],Ea[11]=w[11],Ea[12]=w[12],Ea[13]=w[13],Ea[14]=w[14],Ea[15]=
w[15],Ea));n&&a.bindBuffer(34963,n.buffer.buffer);f=n.primType;v=n.vertCount-0;0<=v||F.commandRaise(U,J);for(w=0;w<c;++w)v&&a.drawElements(f,v,n.type,0<<(n.type-5121>>1));Y.setVAO(null);g&&(L.cpuTime+=performance.now()-k)}}},$20:function(k,F,J,L,f,h,g,b,B,y,K,aa,t,u,G,O,x,T,r,P,ja){var d,n,U,e,W,E,p,ha,D,C,c,q,a,na,A,ia,cc,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca;d=k.context;n=k.current;U=k.framebuffer;e=k.gl;W=k.next;E=k.shader;p=k.uniforms;ha=k.vao;D=W.blend_color;C=n.blend_color;c=W.blend_equation;
q=n.blend_equation;a=W.blend_func;na=n.blend_func;A=W.colorMask;ia=n.colorMask;cc=W.depth_range;Y=n.depth_range;ea=W.polygonOffset_offset;R=n.polygonOffset_offset;Q=W.sample_coverage;z=n.sample_coverage;m=W.scissor_box;V=n.scissor_box;N=W.stencil_func;va=n.stencil_func;oa=W.stencil_opBack;l=n.stencil_opBack;I=W.stencil_opFront;ca=n.stencil_opFront;S=W.viewport;ma=n.viewport;ra={};Ca={};return{draw:function(k){var r,x,u,p,F,t,X,G,P,w,v,M,K;r=d.center;x=d.distance;u=d.eye;p=d.phi;F=d.projection;t=g.call(this,
d,k,0);X=d.theta;G=d.up;P=d.view;d.center=f;d.distance=2.302585092994046;d.eye=h;d.phi=0;d.projection=t;d.theta=0;d.up=b;d.view=B;t=U.next;t!==U.cur&&(t?e.bindFramebuffer(36160,t.framebuffer):e.bindFramebuffer(36160,null),U.cur=t);if(n.dirty){t=W.dither;t!==n.dither&&(t?e.enable(3024):e.disable(3024),n.dither=t);t=W.blend_enable;t!==n.blend_enable&&(t?e.enable(3042):e.disable(3042),n.blend_enable=t);t=D[0];v=D[1];M=D[2];K=D[3];if(t!==C[0]||v!==C[1]||M!==C[2]||K!==C[3])e.blendColor(t,v,M,K),C[0]=t,
C[1]=v,C[2]=M,C[3]=K;t=c[0];v=c[1];if(t!==q[0]||v!==q[1])e.blendEquationSeparate(t,v),q[0]=t,q[1]=v;t=a[0];v=a[1];M=a[2];K=a[3];if(t!==na[0]||v!==na[1]||M!==na[2]||K!==na[3])e.blendFuncSeparate(t,v,M,K),na[0]=t,na[1]=v,na[2]=M,na[3]=K;t=W.depth_enable;t!==n.depth_enable&&(t?e.enable(2929):e.disable(2929),n.depth_enable=t);t=W.depth_func;t!==n.depth_func&&(e.depthFunc(t),n.depth_func=t);t=cc[0];v=cc[1];if(t!==Y[0]||v!==Y[1])e.depthRange(t,v),Y[0]=t,Y[1]=v;t=W.depth_mask;t!==n.depth_mask&&(e.depthMask(t),
n.depth_mask=t);t=A[0];v=A[1];M=A[2];K=A[3];if(t!==ia[0]||v!==ia[1]||M!==ia[2]||K!==ia[3])e.colorMask(t,v,M,K),ia[0]=t,ia[1]=v,ia[2]=M,ia[3]=K;t=W.cull_enable;t!==n.cull_enable&&(t?e.enable(2884):e.disable(2884),n.cull_enable=t);t=W.cull_face;t!==n.cull_face&&(e.cullFace(t),n.cull_face=t);t=W.frontFace;t!==n.frontFace&&(e.frontFace(t),n.frontFace=t);t=W.lineWidth;t!==n.lineWidth&&(e.lineWidth(t),n.lineWidth=t);t=W.polygonOffset_enable;t!==n.polygonOffset_enable&&(t?e.enable(32823):e.disable(32823),
n.polygonOffset_enable=t);t=ea[0];v=ea[1];if(t!==R[0]||v!==R[1])e.polygonOffset(t,v),R[0]=t,R[1]=v;t=W.sample_alpha;t!==n.sample_alpha&&(t?e.enable(32926):e.disable(32926),n.sample_alpha=t);t=W.sample_enable;t!==n.sample_enable&&(t?e.enable(32928):e.disable(32928),n.sample_enable=t);t=Q[0];v=Q[1];if(t!==z[0]||v!==z[1])e.sampleCoverage(t,v),z[0]=t,z[1]=v;t=W.stencil_enable;t!==n.stencil_enable&&(t?e.enable(2960):e.disable(2960),n.stencil_enable=t);t=W.stencil_mask;t!==n.stencil_mask&&(e.stencilMask(t),
n.stencil_mask=t);t=N[0];v=N[1];M=N[2];if(t!==va[0]||v!==va[1]||M!==va[2])e.stencilFunc(t,v,M),va[0]=t,va[1]=v,va[2]=M;t=I[0];v=I[1];M=I[2];K=I[3];if(t!==ca[0]||v!==ca[1]||M!==ca[2]||K!==ca[3])e.stencilOpSeparate(t,v,M,K),ca[0]=t,ca[1]=v,ca[2]=M,ca[3]=K;t=oa[0];v=oa[1];M=oa[2];K=oa[3];if(t!==l[0]||v!==l[1]||M!==l[2]||K!==l[3])e.stencilOpSeparate(t,v,M,K),l[0]=t,l[1]=v,l[2]=M,l[3]=K;t=W.scissor_enable;t!==n.scissor_enable&&(t?e.enable(3089):e.disable(3089),n.scissor_enable=t);t=m[0];v=m[1];M=m[2];
K=m[3];if(t!==V[0]||v!==V[1]||M!==V[2]||K!==V[3])e.scissor(t,v,M,K),V[0]=t,V[1]=v,V[2]=M,V[3]=K;t=S[0];v=S[1];M=S[2];K=S[3];if(t!==ma[0]||v!==ma[1]||M!==ma[2]||K!==ma[3])e.viewport(t,v,M,K),ma[0]=t,ma[1]=v,ma[2]=M,ma[3]=K;n.dirty=!1}if(t=n.profile)w=performance.now(),L.count++;v=E.program(E.vert,E.frag,J);e.useProgram(v.program);ha.setVAO(null);M=v.id;(K=ra[M])||(K=ra[M]=y(v));K.call(this,k);ha.setVAO(null);d.center=r;d.distance=x;d.eye=u;d.phi=p;d.projection=F;d.theta=X;d.up=G;d.view=P;t&&(L.cpuTime+=
performance.now()-w)},scope:function(a,b,c){var e,h,g,l,k,f,m,w,q,r,x,A,z,C,D,H,E,F,y;e=d.center;h=d.distance;g=d.eye;l=d.phi;k=d.projection;f=t.call(this,d,a,c);m=d.theta;w=d.up;q=d.view;d.center=K;d.distance=2.302585092994046;d.eye=aa;d.phi=0;d.projection=f;d.theta=0;d.up=u;d.view=G;if(f=n.profile)r=performance.now(),L.count++;x=d.center;A=p[1];p[1]=x;z=d.distance;x=p[2];p[2]=z;C=d.eye;z=p[3];p[3]=C;D=d.phi;C=p[4];p[4]=D;H=d.projection;D=p[5];p[5]=H;E=d.theta;H=p[6];p[6]=E;F=d.up;E=p[7];p[7]=F;
F=d.view;y=p[8];p[8]=F;b(d,a,c);d.center=e;d.distance=h;d.eye=g;d.phi=l;d.projection=k;d.theta=m;d.up=w;d.view=q;f&&(L.cpuTime+=performance.now()-r);p[1]=A;p[2]=x;p[3]=z;p[4]=C;p[5]=D;p[6]=H;p[7]=E;p[8]=y},batch:function(b,h){var g,k,f,u,t,p,F,y,w,v,M,B,G;g=d.center;k=d.distance;f=d.eye;u=d.phi;t=d.projection;p=T.call(this,d,b,0);F=d.theta;y=d.up;w=d.view;d.center=O;d.distance=2.302585092994046;d.eye=x;d.phi=0;d.projection=p;d.theta=0;d.up=r;d.view=P;p=U.next;p!==U.cur&&(p?e.bindFramebuffer(36160,
p.framebuffer):e.bindFramebuffer(36160,null),U.cur=p);if(n.dirty){p=W.dither;p!==n.dither&&(p?e.enable(3024):e.disable(3024),n.dither=p);p=W.blend_enable;p!==n.blend_enable&&(p?e.enable(3042):e.disable(3042),n.blend_enable=p);p=D[0];M=D[1];B=D[2];G=D[3];if(p!==C[0]||M!==C[1]||B!==C[2]||G!==C[3])e.blendColor(p,M,B,G),C[0]=p,C[1]=M,C[2]=B,C[3]=G;p=c[0];M=c[1];if(p!==q[0]||M!==q[1])e.blendEquationSeparate(p,M),q[0]=p,q[1]=M;p=a[0];M=a[1];B=a[2];G=a[3];if(p!==na[0]||M!==na[1]||B!==na[2]||G!==na[3])e.blendFuncSeparate(p,
M,B,G),na[0]=p,na[1]=M,na[2]=B,na[3]=G;p=W.depth_enable;p!==n.depth_enable&&(p?e.enable(2929):e.disable(2929),n.depth_enable=p);p=W.depth_func;p!==n.depth_func&&(e.depthFunc(p),n.depth_func=p);p=cc[0];M=cc[1];if(p!==Y[0]||M!==Y[1])e.depthRange(p,M),Y[0]=p,Y[1]=M;p=W.depth_mask;p!==n.depth_mask&&(e.depthMask(p),n.depth_mask=p);p=A[0];M=A[1];B=A[2];G=A[3];if(p!==ia[0]||M!==ia[1]||B!==ia[2]||G!==ia[3])e.colorMask(p,M,B,G),ia[0]=p,ia[1]=M,ia[2]=B,ia[3]=G;p=W.cull_enable;p!==n.cull_enable&&(p?e.enable(2884):
e.disable(2884),n.cull_enable=p);p=W.cull_face;p!==n.cull_face&&(e.cullFace(p),n.cull_face=p);p=W.frontFace;p!==n.frontFace&&(e.frontFace(p),n.frontFace=p);p=W.lineWidth;p!==n.lineWidth&&(e.lineWidth(p),n.lineWidth=p);p=W.polygonOffset_enable;p!==n.polygonOffset_enable&&(p?e.enable(32823):e.disable(32823),n.polygonOffset_enable=p);p=ea[0];M=ea[1];if(p!==R[0]||M!==R[1])e.polygonOffset(p,M),R[0]=p,R[1]=M;p=W.sample_alpha;p!==n.sample_alpha&&(p?e.enable(32926):e.disable(32926),n.sample_alpha=p);p=W.sample_enable;
p!==n.sample_enable&&(p?e.enable(32928):e.disable(32928),n.sample_enable=p);p=Q[0];M=Q[1];if(p!==z[0]||M!==z[1])e.sampleCoverage(p,M),z[0]=p,z[1]=M;p=W.stencil_enable;p!==n.stencil_enable&&(p?e.enable(2960):e.disable(2960),n.stencil_enable=p);p=W.stencil_mask;p!==n.stencil_mask&&(e.stencilMask(p),n.stencil_mask=p);p=N[0];M=N[1];B=N[2];if(p!==va[0]||M!==va[1]||B!==va[2])e.stencilFunc(p,M,B),va[0]=p,va[1]=M,va[2]=B;p=I[0];M=I[1];B=I[2];G=I[3];if(p!==ca[0]||M!==ca[1]||B!==ca[2]||G!==ca[3])e.stencilOpSeparate(p,
M,B,G),ca[0]=p,ca[1]=M,ca[2]=B,ca[3]=G;p=oa[0];M=oa[1];B=oa[2];G=oa[3];if(p!==l[0]||M!==l[1]||B!==l[2]||G!==l[3])e.stencilOpSeparate(p,M,B,G),l[0]=p,l[1]=M,l[2]=B,l[3]=G;p=W.scissor_enable;p!==n.scissor_enable&&(p?e.enable(3089):e.disable(3089),n.scissor_enable=p);p=m[0];M=m[1];B=m[2];G=m[3];if(p!==V[0]||M!==V[1]||B!==V[2]||G!==V[3])e.scissor(p,M,B,G),V[0]=p,V[1]=M,V[2]=B,V[3]=G;p=S[0];M=S[1];B=S[2];G=S[3];if(p!==ma[0]||M!==ma[1]||B!==ma[2]||G!==ma[3])e.viewport(p,M,B,G),ma[0]=p,ma[1]=M,ma[2]=B,ma[3]=
G;n.dirty=!1}if(p=n.profile)v=performance.now(),L.count+=h;M=E.program(E.vert,E.frag,J);e.useProgram(M.program);ha.setVAO(null);B=M.id;(G=Ca[B])||(G=Ca[B]=ja(M));G.call(this,b,h);ha.setVAO(null);d.center=g;d.distance=k;d.eye=f;d.phi=u;d.projection=t;d.theta=F;d.up=y;d.view=w;p&&(L.cpuTime+=performance.now()-v)}}},"$27,position,projection,tex,uv,view":function(k,F,J,L,f,h,g,b,B,y,K,O,t,u,G,ba,x,T,r,P,ja,d,n,U,e,W,E,p,ha,D,C,c,q){var a,na,A,ia,cc,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,
pa,za,Ma,X,$b,Ua,w,v,M,wa,Ea,mb,xa;a=k.attributes;na=k.context;A=k.current;ia=k.draw;cc=k.framebuffer;Y=k.gl;ea=k.isArrayLike;R=k.next;Q=k.shader;z=k.uniforms;m=k.vao;V=R.blend_color;N=A.blend_color;va=R.blend_equation;oa=A.blend_equation;l=R.blend_func;I=A.blend_func;ca=R.colorMask;S=A.colorMask;ma=R.depth_range;ra=A.depth_range;Ca=R.polygonOffset_offset;ya=A.polygonOffset_offset;fa=R.sample_coverage;Ba=A.sample_coverage;la=R.scissor_box;pa=A.scissor_box;za=R.stencil_func;Ma=A.stencil_func;X=R.stencil_opBack;
$b=A.stencil_opBack;Ua=R.stencil_opFront;w=A.stencil_opFront;v=R.viewport;M=A.viewport;wa=new Float32Array(16);Ea=new Float32Array(16);mb=new Float32Array(16);xa=new Float32Array(16);return{draw:function(d){var e,k,n,r;e=cc.next;e!==cc.cur&&(e?Y.bindFramebuffer(36160,e.framebuffer):Y.bindFramebuffer(36160,null),cc.cur=e);if(A.dirty){var p;e=R.dither;e!==A.dither&&(e?Y.enable(3024):Y.disable(3024),A.dither=e);e=R.blend_enable;e!==A.blend_enable&&(e?Y.enable(3042):Y.disable(3042),A.blend_enable=e);
e=V[0];n=V[1];r=V[2];p=V[3];if(e!==N[0]||n!==N[1]||r!==N[2]||p!==N[3])Y.blendColor(e,n,r,p),N[0]=e,N[1]=n,N[2]=r,N[3]=p;e=va[0];n=va[1];if(e!==oa[0]||n!==oa[1])Y.blendEquationSeparate(e,n),oa[0]=e,oa[1]=n;e=l[0];n=l[1];r=l[2];p=l[3];if(e!==I[0]||n!==I[1]||r!==I[2]||p!==I[3])Y.blendFuncSeparate(e,n,r,p),I[0]=e,I[1]=n,I[2]=r,I[3]=p;e=R.depth_enable;e!==A.depth_enable&&(e?Y.enable(2929):Y.disable(2929),A.depth_enable=e);e=R.depth_func;e!==A.depth_func&&(Y.depthFunc(e),A.depth_func=e);e=ma[0];n=ma[1];
if(e!==ra[0]||n!==ra[1])Y.depthRange(e,n),ra[0]=e,ra[1]=n;e=R.depth_mask;e!==A.depth_mask&&(Y.depthMask(e),A.depth_mask=e);e=ca[0];n=ca[1];r=ca[2];p=ca[3];if(e!==S[0]||n!==S[1]||r!==S[2]||p!==S[3])Y.colorMask(e,n,r,p),S[0]=e,S[1]=n,S[2]=r,S[3]=p;e=R.cull_enable;e!==A.cull_enable&&(e?Y.enable(2884):Y.disable(2884),A.cull_enable=e);e=R.cull_face;e!==A.cull_face&&(Y.cullFace(e),A.cull_face=e);e=R.frontFace;e!==A.frontFace&&(Y.frontFace(e),A.frontFace=e);e=R.lineWidth;e!==A.lineWidth&&(Y.lineWidth(e),
A.lineWidth=e);e=R.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?Y.enable(32823):Y.disable(32823),A.polygonOffset_enable=e);e=Ca[0];n=Ca[1];if(e!==ya[0]||n!==ya[1])Y.polygonOffset(e,n),ya[0]=e,ya[1]=n;e=R.sample_alpha;e!==A.sample_alpha&&(e?Y.enable(32926):Y.disable(32926),A.sample_alpha=e);e=R.sample_enable;e!==A.sample_enable&&(e?Y.enable(32928):Y.disable(32928),A.sample_enable=e);e=fa[0];n=fa[1];if(e!==Ba[0]||n!==Ba[1])Y.sampleCoverage(e,n),Ba[0]=e,Ba[1]=n;e=R.stencil_enable;e!==A.stencil_enable&&
(e?Y.enable(2960):Y.disable(2960),A.stencil_enable=e);e=R.stencil_mask;e!==A.stencil_mask&&(Y.stencilMask(e),A.stencil_mask=e);e=za[0];n=za[1];r=za[2];if(e!==Ma[0]||n!==Ma[1]||r!==Ma[2])Y.stencilFunc(e,n,r),Ma[0]=e,Ma[1]=n,Ma[2]=r;e=Ua[0];n=Ua[1];r=Ua[2];p=Ua[3];if(e!==w[0]||n!==w[1]||r!==w[2]||p!==w[3])Y.stencilOpSeparate(e,n,r,p),w[0]=e,w[1]=n,w[2]=r,w[3]=p;e=X[0];n=X[1];r=X[2];p=X[3];if(e!==$b[0]||n!==$b[1]||r!==$b[2]||p!==$b[3])Y.stencilOpSeparate(e,n,r,p),$b[0]=e,$b[1]=n,$b[2]=r,$b[3]=p;e=R.scissor_enable;
e!==A.scissor_enable&&(e?Y.enable(3089):Y.disable(3089),A.scissor_enable=e);e=la[0];n=la[1];r=la[2];p=la[3];if(e!==pa[0]||n!==pa[1]||r!==pa[2]||p!==pa[3])Y.scissor(e,n,r,p),pa[0]=e,pa[1]=n,pa[2]=r,pa[3]=p;e=v[0];n=v[1];r=v[2];p=v[3];if(e!==M[0]||n!==M[1]||r!==M[2]||p!==M[3])Y.viewport(e,n,r,p),M[0]=e,M[1]=n,M[2]=r,M[3]=p;A.dirty=!1}if(e=A.profile)k=performance.now(),L.count++;Y.useProgram(f.program);m.setVAO(null);n=ha.location;r=a[n];r.buffer||Y.enableVertexAttribArray(n);if(r.type!==h.dtype||3!==
r.size||r.buffer!==h||!1!==r.normalized||0!==r.offset||0!==r.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(n,3,h.dtype,!1,0,0),r.type=h.dtype,r.size=3,r.buffer=h,r.normalized=!1,r.offset=0,r.stride=0;n=c.location;r=a[n];r.buffer||Y.enableVertexAttribArray(n);if(r.type!==g.dtype||2!==r.size||r.buffer!==g||!1!==r.normalized||0!==r.offset||0!==r.stride)Y.bindBuffer(34962,g.buffer),Y.vertexAttribPointer(n,2,g.dtype,!1,0,0),r.type=g.dtype,r.size=2,r.buffer=g,r.normalized=!1,r.offset=0,r.stride=
0;n=b.call(this,na,d,0);ea(n)&&16===n.length||F.commandRaise(B,J);Y.uniformMatrix4fv(D.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(wa[0]=n[0],wa[1]=n[1],wa[2]=n[2],wa[3]=n[3],wa[4]=n[4],wa[5]=n[5],wa[6]=n[6],wa[7]=n[7],wa[8]=n[8],wa[9]=n[9],wa[10]=n[10],wa[11]=n[11],wa[12]=n[12],wa[13]=n[13],wa[14]=n[14],wa[15]=n[15],wa));n=y.call(this,na,d,0);ea(n)&&16===n.length||F.commandRaise(K,J);Y.uniformMatrix4fv(q.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ea[0]=n[0],Ea[1]=n[1],
Ea[2]=n[2],Ea[3]=n[3],Ea[4]=n[4],Ea[5]=n[5],Ea[6]=n[6],Ea[7]=n[7],Ea[8]=n[8],Ea[9]=n[9],Ea[10]=n[10],Ea[11]=n[11],Ea[12]=n[12],Ea[13]=n[13],Ea[14]=n[14],Ea[15]=n[15],Ea));(d=d.texture)&&"framebuffer"===d._reglType&&(d=d.color[0]);"function"===typeof d&&"texture2d"===d._reglType||F.commandRaise(O,J);d=d._texture;Y.uniform1i(C.location,d.bind());t&&Y.bindBuffer(34963,t.buffer.buffer);n=t.primType;r=t.vertCount-0;0<=r||F.commandRaise(u,J);r&&(Y.drawElements(n,r,t.type,0<<(t.type-5121>>1)),m.setVAO(null),
e&&(L.cpuTime+=performance.now()-k),d.unbind())},scope:function(a,b,c){var d,e,k,l,f,n,m,w,q,v,p,u,M,t,C,D,E,y,B,S,I,fa,X,K,N,R,ra,$b,O,U,ya,aa,W,V,Y;if(d=A.profile)e=performance.now(),L.count++;k=ia.elements;ia.elements=G;l=ia.offset;ia.offset=0;f=G.vertCount-0;0<=f||F.commandRaise(ba,J);n=ia.count;ia.count=f;m=G.primType;f=ia.primitive;ia.primitive=m;w=x.call(this,na,a,c);m=z[3];z[3]=w;q=a.texture;w=z[5];z[5]=q;v=T.call(this,na,a,c);q=z[4];z[4]=v;v=r.buffer;r.buffer=h;p=r.divisor;r.divisor=0;u=
r.normalized;r.normalized=!1;M=r.offset;r.offset=0;t=r.size;r.size=0;C=r.state;r.state=1;D=r.stride;r.stride=0;E=r.type;r.type=h.dtype;y=r.w;r.w=0;B=r.x;r.x=0;S=r.y;r.y=0;I=r.z;r.z=0;fa=P.buffer;P.buffer=g;X=P.divisor;P.divisor=0;K=P.normalized;P.normalized=!1;N=P.offset;P.offset=0;R=P.size;P.size=0;ra=P.state;P.state=1;$b=P.stride;P.stride=0;O=P.type;P.type=g.dtype;U=P.w;P.w=0;ya=P.x;P.x=0;aa=P.y;P.y=0;W=P.z;P.z=0;V=Q.vert;Q.vert=2;Y=Q.frag;Q.frag=1;b(na,a,c);d&&(L.cpuTime+=performance.now()-e);
ia.elements=k;ia.offset=l;ia.count=n;ia.primitive=f;z[3]=m;z[5]=w;z[4]=q;r.buffer=v;r.divisor=p;r.normalized=u;r.offset=M;r.size=t;r.state=C;r.stride=D;r.type=E;r.w=y;r.x=B;r.y=S;r.z=I;P.buffer=fa;P.divisor=X;P.normalized=K;P.offset=N;P.size=R;P.state=ra;P.stride=$b;P.type=O;P.w=U;P.x=ya;P.y=aa;P.z=W;Q.vert=V;Q.frag=Y},batch:function(b,k){var f,r,x,u;f=cc.next;f!==cc.cur&&(f?Y.bindFramebuffer(36160,f.framebuffer):Y.bindFramebuffer(36160,null),cc.cur=f);if(A.dirty){var t,z,y;f=R.dither;f!==A.dither&&
(f?Y.enable(3024):Y.disable(3024),A.dither=f);f=R.blend_enable;f!==A.blend_enable&&(f?Y.enable(3042):Y.disable(3042),A.blend_enable=f);f=V[0];t=V[1];z=V[2];y=V[3];if(f!==N[0]||t!==N[1]||z!==N[2]||y!==N[3])Y.blendColor(f,t,z,y),N[0]=f,N[1]=t,N[2]=z,N[3]=y;f=va[0];t=va[1];if(f!==oa[0]||t!==oa[1])Y.blendEquationSeparate(f,t),oa[0]=f,oa[1]=t;f=l[0];t=l[1];z=l[2];y=l[3];if(f!==I[0]||t!==I[1]||z!==I[2]||y!==I[3])Y.blendFuncSeparate(f,t,z,y),I[0]=f,I[1]=t,I[2]=z,I[3]=y;f=R.depth_enable;f!==A.depth_enable&&
(f?Y.enable(2929):Y.disable(2929),A.depth_enable=f);f=R.depth_func;f!==A.depth_func&&(Y.depthFunc(f),A.depth_func=f);f=ma[0];t=ma[1];if(f!==ra[0]||t!==ra[1])Y.depthRange(f,t),ra[0]=f,ra[1]=t;f=R.depth_mask;f!==A.depth_mask&&(Y.depthMask(f),A.depth_mask=f);f=ca[0];t=ca[1];z=ca[2];y=ca[3];if(f!==S[0]||t!==S[1]||z!==S[2]||y!==S[3])Y.colorMask(f,t,z,y),S[0]=f,S[1]=t,S[2]=z,S[3]=y;f=R.cull_enable;f!==A.cull_enable&&(f?Y.enable(2884):Y.disable(2884),A.cull_enable=f);f=R.cull_face;f!==A.cull_face&&(Y.cullFace(f),
A.cull_face=f);f=R.frontFace;f!==A.frontFace&&(Y.frontFace(f),A.frontFace=f);f=R.lineWidth;f!==A.lineWidth&&(Y.lineWidth(f),A.lineWidth=f);f=R.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?Y.enable(32823):Y.disable(32823),A.polygonOffset_enable=f);f=Ca[0];t=Ca[1];if(f!==ya[0]||t!==ya[1])Y.polygonOffset(f,t),ya[0]=f,ya[1]=t;f=R.sample_alpha;f!==A.sample_alpha&&(f?Y.enable(32926):Y.disable(32926),A.sample_alpha=f);f=R.sample_enable;f!==A.sample_enable&&(f?Y.enable(32928):Y.disable(32928),A.sample_enable=
f);f=fa[0];t=fa[1];if(f!==Ba[0]||t!==Ba[1])Y.sampleCoverage(f,t),Ba[0]=f,Ba[1]=t;f=R.stencil_enable;f!==A.stencil_enable&&(f?Y.enable(2960):Y.disable(2960),A.stencil_enable=f);f=R.stencil_mask;f!==A.stencil_mask&&(Y.stencilMask(f),A.stencil_mask=f);f=za[0];t=za[1];z=za[2];if(f!==Ma[0]||t!==Ma[1]||z!==Ma[2])Y.stencilFunc(f,t,z),Ma[0]=f,Ma[1]=t,Ma[2]=z;f=Ua[0];t=Ua[1];z=Ua[2];y=Ua[3];if(f!==w[0]||t!==w[1]||z!==w[2]||y!==w[3])Y.stencilOpSeparate(f,t,z,y),w[0]=f,w[1]=t,w[2]=z,w[3]=y;f=X[0];t=X[1];z=X[2];
y=X[3];if(f!==$b[0]||t!==$b[1]||z!==$b[2]||y!==$b[3])Y.stencilOpSeparate(f,t,z,y),$b[0]=f,$b[1]=t,$b[2]=z,$b[3]=y;f=R.scissor_enable;f!==A.scissor_enable&&(f?Y.enable(3089):Y.disable(3089),A.scissor_enable=f);f=la[0];t=la[1];z=la[2];y=la[3];if(f!==pa[0]||t!==pa[1]||z!==pa[2]||y!==pa[3])Y.scissor(f,t,z,y),pa[0]=f,pa[1]=t,pa[2]=z,pa[3]=y;f=v[0];t=v[1];z=v[2];y=v[3];if(f!==M[0]||t!==M[1]||z!==M[2]||y!==M[3])Y.viewport(f,t,z,y),M[0]=f,M[1]=t,M[2]=z,M[3]=y;A.dirty=!1}if(f=A.profile)r=performance.now(),
L.count+=k;Y.useProgram(ja.program);m.setVAO(null);t=ha.location;z=a[t];z.buffer||Y.enableVertexAttribArray(t);if(z.type!==h.dtype||3!==z.size||z.buffer!==h||!1!==z.normalized||0!==z.offset||0!==z.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(t,3,h.dtype,!1,0,0),z.type=h.dtype,z.size=3,z.buffer=h,z.normalized=!1,z.offset=0,z.stride=0;t=c.location;z=a[t];z.buffer||Y.enableVertexAttribArray(t);if(z.type!==g.dtype||2!==z.size||z.buffer!==g||!1!==z.normalized||0!==z.offset||0!==z.stride)Y.bindBuffer(34962,
g.buffer),Y.vertexAttribPointer(t,2,g.dtype,!1,0,0),z.type=g.dtype,z.size=2,z.buffer=g,z.normalized=!1,z.offset=0,z.stride=0;t=d.call(this,na,u,x);ea(t)&&16===t.length||F.commandRaise(n,J);Y.uniformMatrix4fv(D.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(mb[0]=t[0],mb[1]=t[1],mb[2]=t[2],mb[3]=t[3],mb[4]=t[4],mb[5]=t[5],mb[6]=t[6],mb[7]=t[7],mb[8]=t[8],mb[9]=t[9],mb[10]=t[10],mb[11]=t[11],mb[12]=t[12],mb[13]=t[13],mb[14]=t[14],mb[15]=t[15],mb));x=U.call(this,na,u,x);ea(x)&&16===x.length||
F.commandRaise(e,J);Y.uniformMatrix4fv(q.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(xa[0]=x[0],xa[1]=x[1],xa[2]=x[2],xa[3]=x[3],xa[4]=x[4],xa[5]=x[5],xa[6]=x[6],xa[7]=x[7],xa[8]=x[8],xa[9]=x[9],xa[10]=x[10],xa[11]=x[11],xa[12]=x[12],xa[13]=x[13],xa[14]=x[14],xa[15]=x[15],xa));E&&Y.bindBuffer(34963,E.buffer.buffer);t=E.primType;z=E.vertCount-0;0<=z||F.commandRaise(p,J);for(x=0;x<k;++x)u=b[x],(u=u.texture)&&"framebuffer"===u._reglType&&(u=u.color[0]),"function"===typeof u&&"texture2d"===
u._reglType||F.commandRaise(W,J),u=u._texture,Y.uniform1i(C.location,u.bind()),z&&(Y.drawElements(t,z,E.type,0<<(E.type-5121>>1)),u.unbind());m.setVAO(null);f&&(L.cpuTime+=performance.now()-r)}}},"$19,normal,position,projection,view":function(k,F,J,L,f,h,g,b,B,y,K,O,t,u,G,ba,x,T,r,P,ja,d,n,U){var e,W,E,p,ha,D,C,c,q,a,na,A,ia,xa,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za,Ma,X;e=k.attributes;W=k.context;E=k.current;p=k.draw;ha=k.framebuffer;D=k.gl;C=k.isArrayLike;c=k.next;q=k.shader;
a=k.uniforms;na=k.vao;A=c.blend_color;ia=E.blend_color;xa=c.blend_equation;Y=E.blend_equation;ea=c.blend_func;R=E.blend_func;Q=c.colorMask;z=E.colorMask;m=c.depth_range;V=E.depth_range;N=c.polygonOffset_offset;va=E.polygonOffset_offset;oa=c.sample_coverage;l=E.sample_coverage;I=c.scissor_box;ca=E.scissor_box;S=c.stencil_func;ma=E.stencil_func;ra=c.stencil_opBack;Ca=E.stencil_opBack;ya=c.stencil_opFront;fa=E.stencil_opFront;Ba=c.viewport;la=E.viewport;pa=new Float32Array(16);za=new Float32Array(16);
Ma=new Float32Array(16);X=new Float32Array(16);return{draw:function(k){var q,w,v;k=ha.next;k!==ha.cur&&(k?D.bindFramebuffer(36160,k.framebuffer):D.bindFramebuffer(36160,null),ha.cur=k);if(E.dirty){var r;k=c.dither;k!==E.dither&&(k?D.enable(3024):D.disable(3024),E.dither=k);k=c.blend_enable;k!==E.blend_enable&&(k?D.enable(3042):D.disable(3042),E.blend_enable=k);k=A[0];w=A[1];v=A[2];r=A[3];if(k!==ia[0]||w!==ia[1]||v!==ia[2]||r!==ia[3])D.blendColor(k,w,v,r),ia[0]=k,ia[1]=w,ia[2]=v,ia[3]=r;k=xa[0];w=
xa[1];if(k!==Y[0]||w!==Y[1])D.blendEquationSeparate(k,w),Y[0]=k,Y[1]=w;k=ea[0];w=ea[1];v=ea[2];r=ea[3];if(k!==R[0]||w!==R[1]||v!==R[2]||r!==R[3])D.blendFuncSeparate(k,w,v,r),R[0]=k,R[1]=w,R[2]=v,R[3]=r;k=c.depth_enable;k!==E.depth_enable&&(k?D.enable(2929):D.disable(2929),E.depth_enable=k);k=c.depth_func;k!==E.depth_func&&(D.depthFunc(k),E.depth_func=k);k=m[0];w=m[1];if(k!==V[0]||w!==V[1])D.depthRange(k,w),V[0]=k,V[1]=w;k=c.depth_mask;k!==E.depth_mask&&(D.depthMask(k),E.depth_mask=k);k=Q[0];w=Q[1];
v=Q[2];r=Q[3];if(k!==z[0]||w!==z[1]||v!==z[2]||r!==z[3])D.colorMask(k,w,v,r),z[0]=k,z[1]=w,z[2]=v,z[3]=r;k=c.cull_enable;k!==E.cull_enable&&(k?D.enable(2884):D.disable(2884),E.cull_enable=k);k=c.cull_face;k!==E.cull_face&&(D.cullFace(k),E.cull_face=k);k=c.frontFace;k!==E.frontFace&&(D.frontFace(k),E.frontFace=k);k=c.lineWidth;k!==E.lineWidth&&(D.lineWidth(k),E.lineWidth=k);k=c.polygonOffset_enable;k!==E.polygonOffset_enable&&(k?D.enable(32823):D.disable(32823),E.polygonOffset_enable=k);k=N[0];w=N[1];
if(k!==va[0]||w!==va[1])D.polygonOffset(k,w),va[0]=k,va[1]=w;k=c.sample_alpha;k!==E.sample_alpha&&(k?D.enable(32926):D.disable(32926),E.sample_alpha=k);k=c.sample_enable;k!==E.sample_enable&&(k?D.enable(32928):D.disable(32928),E.sample_enable=k);k=oa[0];w=oa[1];if(k!==l[0]||w!==l[1])D.sampleCoverage(k,w),l[0]=k,l[1]=w;k=c.stencil_enable;k!==E.stencil_enable&&(k?D.enable(2960):D.disable(2960),E.stencil_enable=k);k=c.stencil_mask;k!==E.stencil_mask&&(D.stencilMask(k),E.stencil_mask=k);k=S[0];w=S[1];
v=S[2];if(k!==ma[0]||w!==ma[1]||v!==ma[2])D.stencilFunc(k,w,v),ma[0]=k,ma[1]=w,ma[2]=v;k=ya[0];w=ya[1];v=ya[2];r=ya[3];if(k!==fa[0]||w!==fa[1]||v!==fa[2]||r!==fa[3])D.stencilOpSeparate(k,w,v,r),fa[0]=k,fa[1]=w,fa[2]=v,fa[3]=r;k=ra[0];w=ra[1];v=ra[2];r=ra[3];if(k!==Ca[0]||w!==Ca[1]||v!==Ca[2]||r!==Ca[3])D.stencilOpSeparate(k,w,v,r),Ca[0]=k,Ca[1]=w,Ca[2]=v,Ca[3]=r;k=c.scissor_enable;k!==E.scissor_enable&&(k?D.enable(3089):D.disable(3089),E.scissor_enable=k);k=I[0];w=I[1];v=I[2];r=I[3];if(k!==ca[0]||
w!==ca[1]||v!==ca[2]||r!==ca[3])D.scissor(k,w,v,r),ca[0]=k,ca[1]=w,ca[2]=v,ca[3]=r;k=Ba[0];w=Ba[1];v=Ba[2];r=Ba[3];if(k!==la[0]||w!==la[1]||v!==la[2]||r!==la[3])D.viewport(k,w,v,r),la[0]=k,la[1]=w,la[2]=v,la[3]=r;E.dirty=!1}if(k=E.profile)q=performance.now(),L.count++;D.useProgram(f.program);na.setVAO(null);w=d.location;v=e[w];v.buffer||D.enableVertexAttribArray(w);if(v.type!==h.dtype||3!==v.size||v.buffer!==h||!1!==v.normalized||0!==v.offset||0!==v.stride)D.bindBuffer(34962,h.buffer),D.vertexAttribPointer(w,
3,h.dtype,!1,0,0),v.type=h.dtype,v.size=3,v.buffer=h,v.normalized=!1,v.offset=0,v.stride=0;w=ja.location;v=e[w];v.buffer||D.enableVertexAttribArray(w);if(v.type!==g.dtype||3!==v.size||v.buffer!==g||!1!==v.normalized||0!==v.offset||0!==v.stride)D.bindBuffer(34962,g.buffer),D.vertexAttribPointer(w,3,g.dtype,!1,0,0),v.type=g.dtype,v.size=3,v.buffer=g,v.normalized=!1,v.offset=0,v.stride=0;w=a[5];C(w)&&16===w.length||F.commandRaise(b,J);D.uniformMatrix4fv(n.location,!1,Array.isArray(w)||w instanceof Float32Array?
w:(pa[0]=w[0],pa[1]=w[1],pa[2]=w[2],pa[3]=w[3],pa[4]=w[4],pa[5]=w[5],pa[6]=w[6],pa[7]=w[7],pa[8]=w[8],pa[9]=w[9],pa[10]=w[10],pa[11]=w[11],pa[12]=w[12],pa[13]=w[13],pa[14]=w[14],pa[15]=w[15],pa));w=a[8];C(w)&&16===w.length||F.commandRaise(B,J);D.uniformMatrix4fv(U.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(za[0]=w[0],za[1]=w[1],za[2]=w[2],za[3]=w[3],za[4]=w[4],za[5]=w[5],za[6]=w[6],za[7]=w[7],za[8]=w[8],za[9]=w[9],za[10]=w[10],za[11]=w[11],za[12]=w[12],za[13]=w[13],za[14]=w[14],za[15]=
w[15],za));y&&D.bindBuffer(34963,y.buffer.buffer);w=y.primType;v=y.vertCount-0;0<=v||F.commandRaise(K,J);v&&(D.drawElements(w,v,y.type,0<<(y.type-5121>>1)),na.setVAO(null),k&&(L.cpuTime+=performance.now()-q))},scope:function(a,b,c){var d,e,k,f,l,n,m,r,x,z,A,C,y,D,B,S,I,fa,X,K,P,N,Q,R,ra,T,U,ya,V,Y,la,ba;if(d=E.profile)e=performance.now(),L.count++;k=p.elements;p.elements=O;f=p.offset;p.offset=0;l=O.vertCount-0;0<=l||F.commandRaise(t,J);n=p.count;p.count=l;m=O.primType;l=p.primitive;p.primitive=m;
m=u.buffer;u.buffer=g;r=u.divisor;u.divisor=0;x=u.normalized;u.normalized=!1;z=u.offset;u.offset=0;A=u.size;u.size=0;C=u.state;u.state=1;y=u.stride;u.stride=0;D=u.type;u.type=g.dtype;B=u.w;u.w=0;S=u.x;u.x=0;I=u.y;u.y=0;fa=u.z;u.z=0;X=G.buffer;G.buffer=h;K=G.divisor;G.divisor=0;P=G.normalized;G.normalized=!1;N=G.offset;G.offset=0;Q=G.size;G.size=0;R=G.state;G.state=1;ra=G.stride;G.stride=0;T=G.type;G.type=h.dtype;U=G.w;G.w=0;ya=G.x;G.x=0;V=G.y;G.y=0;Y=G.z;G.z=0;la=q.vert;q.vert=10;ba=q.frag;q.frag=
9;b(W,a,c);d&&(L.cpuTime+=performance.now()-e);p.elements=k;p.offset=f;p.count=n;p.primitive=l;u.buffer=m;u.divisor=r;u.normalized=x;u.offset=z;u.size=A;u.state=C;u.stride=y;u.type=D;u.w=B;u.x=S;u.y=I;u.z=fa;G.buffer=X;G.divisor=K;G.normalized=P;G.offset=N;G.size=Q;G.state=R;G.stride=ra;G.type=T;G.w=U;G.x=ya;G.y=V;G.z=Y;q.vert=la;q.frag=ba},batch:function(b,k){var f,q,p;f=ha.next;f!==ha.cur&&(f?D.bindFramebuffer(36160,f.framebuffer):D.bindFramebuffer(36160,null),ha.cur=f);if(E.dirty){var t,u;f=c.dither;
f!==E.dither&&(f?D.enable(3024):D.disable(3024),E.dither=f);f=c.blend_enable;f!==E.blend_enable&&(f?D.enable(3042):D.disable(3042),E.blend_enable=f);f=A[0];p=A[1];t=A[2];u=A[3];if(f!==ia[0]||p!==ia[1]||t!==ia[2]||u!==ia[3])D.blendColor(f,p,t,u),ia[0]=f,ia[1]=p,ia[2]=t,ia[3]=u;f=xa[0];p=xa[1];if(f!==Y[0]||p!==Y[1])D.blendEquationSeparate(f,p),Y[0]=f,Y[1]=p;f=ea[0];p=ea[1];t=ea[2];u=ea[3];if(f!==R[0]||p!==R[1]||t!==R[2]||u!==R[3])D.blendFuncSeparate(f,p,t,u),R[0]=f,R[1]=p,R[2]=t,R[3]=u;f=c.depth_enable;
f!==E.depth_enable&&(f?D.enable(2929):D.disable(2929),E.depth_enable=f);f=c.depth_func;f!==E.depth_func&&(D.depthFunc(f),E.depth_func=f);f=m[0];p=m[1];if(f!==V[0]||p!==V[1])D.depthRange(f,p),V[0]=f,V[1]=p;f=c.depth_mask;f!==E.depth_mask&&(D.depthMask(f),E.depth_mask=f);f=Q[0];p=Q[1];t=Q[2];u=Q[3];if(f!==z[0]||p!==z[1]||t!==z[2]||u!==z[3])D.colorMask(f,p,t,u),z[0]=f,z[1]=p,z[2]=t,z[3]=u;f=c.cull_enable;f!==E.cull_enable&&(f?D.enable(2884):D.disable(2884),E.cull_enable=f);f=c.cull_face;f!==E.cull_face&&
(D.cullFace(f),E.cull_face=f);f=c.frontFace;f!==E.frontFace&&(D.frontFace(f),E.frontFace=f);f=c.lineWidth;f!==E.lineWidth&&(D.lineWidth(f),E.lineWidth=f);f=c.polygonOffset_enable;f!==E.polygonOffset_enable&&(f?D.enable(32823):D.disable(32823),E.polygonOffset_enable=f);f=N[0];p=N[1];if(f!==va[0]||p!==va[1])D.polygonOffset(f,p),va[0]=f,va[1]=p;f=c.sample_alpha;f!==E.sample_alpha&&(f?D.enable(32926):D.disable(32926),E.sample_alpha=f);f=c.sample_enable;f!==E.sample_enable&&(f?D.enable(32928):D.disable(32928),
E.sample_enable=f);f=oa[0];p=oa[1];if(f!==l[0]||p!==l[1])D.sampleCoverage(f,p),l[0]=f,l[1]=p;f=c.stencil_enable;f!==E.stencil_enable&&(f?D.enable(2960):D.disable(2960),E.stencil_enable=f);f=c.stencil_mask;f!==E.stencil_mask&&(D.stencilMask(f),E.stencil_mask=f);f=S[0];p=S[1];t=S[2];if(f!==ma[0]||p!==ma[1]||t!==ma[2])D.stencilFunc(f,p,t),ma[0]=f,ma[1]=p,ma[2]=t;f=ya[0];p=ya[1];t=ya[2];u=ya[3];if(f!==fa[0]||p!==fa[1]||t!==fa[2]||u!==fa[3])D.stencilOpSeparate(f,p,t,u),fa[0]=f,fa[1]=p,fa[2]=t,fa[3]=u;
f=ra[0];p=ra[1];t=ra[2];u=ra[3];if(f!==Ca[0]||p!==Ca[1]||t!==Ca[2]||u!==Ca[3])D.stencilOpSeparate(f,p,t,u),Ca[0]=f,Ca[1]=p,Ca[2]=t,Ca[3]=u;f=c.scissor_enable;f!==E.scissor_enable&&(f?D.enable(3089):D.disable(3089),E.scissor_enable=f);f=I[0];p=I[1];t=I[2];u=I[3];if(f!==ca[0]||p!==ca[1]||t!==ca[2]||u!==ca[3])D.scissor(f,p,t,u),ca[0]=f,ca[1]=p,ca[2]=t,ca[3]=u;f=Ba[0];p=Ba[1];t=Ba[2];u=Ba[3];if(f!==la[0]||p!==la[1]||t!==la[2]||u!==la[3])D.viewport(f,p,t,u),la[0]=f,la[1]=p,la[2]=t,la[3]=u;E.dirty=!1}if(f=
E.profile)q=performance.now(),L.count+=k;D.useProgram(ba.program);na.setVAO(null);p=d.location;t=e[p];t.buffer||D.enableVertexAttribArray(p);if(t.type!==h.dtype||3!==t.size||t.buffer!==h||!1!==t.normalized||0!==t.offset||0!==t.stride)D.bindBuffer(34962,h.buffer),D.vertexAttribPointer(p,3,h.dtype,!1,0,0),t.type=h.dtype,t.size=3,t.buffer=h,t.normalized=!1,t.offset=0,t.stride=0;p=ja.location;t=e[p];t.buffer||D.enableVertexAttribArray(p);if(t.type!==g.dtype||3!==t.size||t.buffer!==g||!1!==t.normalized||
0!==t.offset||0!==t.stride)D.bindBuffer(34962,g.buffer),D.vertexAttribPointer(p,3,g.dtype,!1,0,0),t.type=g.dtype,t.size=3,t.buffer=g,t.normalized=!1,t.offset=0,t.stride=0;p=a[5];C(p)&&16===p.length||F.commandRaise(x,J);D.uniformMatrix4fv(n.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Ma[0]=p[0],Ma[1]=p[1],Ma[2]=p[2],Ma[3]=p[3],Ma[4]=p[4],Ma[5]=p[5],Ma[6]=p[6],Ma[7]=p[7],Ma[8]=p[8],Ma[9]=p[9],Ma[10]=p[10],Ma[11]=p[11],Ma[12]=p[12],Ma[13]=p[13],Ma[14]=p[14],Ma[15]=p[15],Ma));p=a[8];C(p)&&
16===p.length||F.commandRaise(T,J);D.uniformMatrix4fv(U.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(X[0]=p[0],X[1]=p[1],X[2]=p[2],X[3]=p[3],X[4]=p[4],X[5]=p[5],X[6]=p[6],X[7]=p[7],X[8]=p[8],X[9]=p[9],X[10]=p[10],X[11]=p[11],X[12]=p[12],X[13]=p[13],X[14]=p[14],X[15]=p[15],X));r&&D.bindBuffer(34963,r.buffer.buffer);t=r.primType;u=r.vertCount-0;0<=u||F.commandRaise(P,J);for(p=0;p<k;++p)u&&D.drawElements(t,u,r.type,0<<(r.type-5121>>1));na.setVAO(null);f&&(L.cpuTime+=performance.now()-q)}}},
"$14,angle,color,position":function(k,F,J,L,f,h,g,b,B,y,K,O,t,u,G,ba,x,T){var r,P,ja,d,n,U,e,W,E,p,ha,D,C,c,q,a,na,A,ia,xa,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra;r=k.attributes;P=k.context;ja=k.current;d=k.draw;n=k.elements;U=k.framebuffer;e=k.gl;W=k.isArrayLike;E=k.next;p=k.shader;ha=k.uniforms;D=k.vao;C=E.blend_color;c=ja.blend_color;q=E.blend_equation;a=ja.blend_equation;na=E.blend_func;A=ja.blend_func;ia=E.colorMask;xa=ja.colorMask;Y=E.depth_range;ea=ja.depth_range;R=E.polygonOffset_offset;Q=ja.polygonOffset_offset;
z=E.sample_coverage;m=ja.sample_coverage;V=E.scissor_box;N=ja.scissor_box;va=E.stencil_func;oa=ja.stencil_func;l=E.stencil_opBack;I=ja.stencil_opBack;ca=E.stencil_opFront;S=ja.stencil_opFront;ma=E.viewport;ra=ja.viewport;return{draw:function(k){var p,t,u,y;p=U.next;p!==U.cur&&(p?e.bindFramebuffer(36160,p.framebuffer):e.bindFramebuffer(36160,null),U.cur=p);if(ja.dirty){var G;p=E.dither;p!==ja.dither&&(p?e.enable(3024):e.disable(3024),ja.dither=p);p=E.blend_enable;p!==ja.blend_enable&&(p?e.enable(3042):
e.disable(3042),ja.blend_enable=p);p=C[0];u=C[1];y=C[2];G=C[3];if(p!==c[0]||u!==c[1]||y!==c[2]||G!==c[3])e.blendColor(p,u,y,G),c[0]=p,c[1]=u,c[2]=y,c[3]=G;p=q[0];u=q[1];if(p!==a[0]||u!==a[1])e.blendEquationSeparate(p,u),a[0]=p,a[1]=u;p=na[0];u=na[1];y=na[2];G=na[3];if(p!==A[0]||u!==A[1]||y!==A[2]||G!==A[3])e.blendFuncSeparate(p,u,y,G),A[0]=p,A[1]=u,A[2]=y,A[3]=G;p=E.depth_func;p!==ja.depth_func&&(e.depthFunc(p),ja.depth_func=p);p=Y[0];u=Y[1];if(p!==ea[0]||u!==ea[1])e.depthRange(p,u),ea[0]=p,ea[1]=
u;p=E.depth_mask;p!==ja.depth_mask&&(e.depthMask(p),ja.depth_mask=p);p=ia[0];u=ia[1];y=ia[2];G=ia[3];if(p!==xa[0]||u!==xa[1]||y!==xa[2]||G!==xa[3])e.colorMask(p,u,y,G),xa[0]=p,xa[1]=u,xa[2]=y,xa[3]=G;p=E.cull_enable;p!==ja.cull_enable&&(p?e.enable(2884):e.disable(2884),ja.cull_enable=p);p=E.cull_face;p!==ja.cull_face&&(e.cullFace(p),ja.cull_face=p);p=E.frontFace;p!==ja.frontFace&&(e.frontFace(p),ja.frontFace=p);p=E.lineWidth;p!==ja.lineWidth&&(e.lineWidth(p),ja.lineWidth=p);p=E.polygonOffset_enable;
p!==ja.polygonOffset_enable&&(p?e.enable(32823):e.disable(32823),ja.polygonOffset_enable=p);p=R[0];u=R[1];if(p!==Q[0]||u!==Q[1])e.polygonOffset(p,u),Q[0]=p,Q[1]=u;p=E.sample_alpha;p!==ja.sample_alpha&&(p?e.enable(32926):e.disable(32926),ja.sample_alpha=p);p=E.sample_enable;p!==ja.sample_enable&&(p?e.enable(32928):e.disable(32928),ja.sample_enable=p);p=z[0];u=z[1];if(p!==m[0]||u!==m[1])e.sampleCoverage(p,u),m[0]=p,m[1]=u;p=E.stencil_enable;p!==ja.stencil_enable&&(p?e.enable(2960):e.disable(2960),ja.stencil_enable=
p);p=E.stencil_mask;p!==ja.stencil_mask&&(e.stencilMask(p),ja.stencil_mask=p);p=va[0];u=va[1];y=va[2];if(p!==oa[0]||u!==oa[1]||y!==oa[2])e.stencilFunc(p,u,y),oa[0]=p,oa[1]=u,oa[2]=y;p=ca[0];u=ca[1];y=ca[2];G=ca[3];if(p!==S[0]||u!==S[1]||y!==S[2]||G!==S[3])e.stencilOpSeparate(p,u,y,G),S[0]=p,S[1]=u,S[2]=y,S[3]=G;p=l[0];u=l[1];y=l[2];G=l[3];if(p!==I[0]||u!==I[1]||y!==I[2]||G!==I[3])e.stencilOpSeparate(p,u,y,G),I[0]=p,I[1]=u,I[2]=y,I[3]=G;p=E.scissor_enable;p!==ja.scissor_enable&&(p?e.enable(3089):e.disable(3089),
ja.scissor_enable=p);p=V[0];u=V[1];y=V[2];G=V[3];if(p!==N[0]||u!==N[1]||y!==N[2]||G!==N[3])e.scissor(p,u,y,G),N[0]=p,N[1]=u,N[2]=y,N[3]=G;p=ma[0];u=ma[1];y=ma[2];G=ma[3];if(p!==ra[0]||u!==ra[1]||y!==ra[2]||G!==ra[3])e.viewport(p,u,y,G),ra[0]=p,ra[1]=u,ra[2]=y,ra[3]=G}e.disable(2929);ja.depth_enable=!1;if(p=ja.profile)t=performance.now(),L.count++;e.useProgram(f.program);D.setVAO(null);u=T.location;y=r[u];y.buffer||e.enableVertexAttribArray(u);if(y.type!==h.dtype||2!==y.size||y.buffer!==h||!1!==y.normalized||
0!==y.offset||0!==y.stride)e.bindBuffer(34962,h.buffer),e.vertexAttribPointer(u,2,h.dtype,!1,0,0),y.type=h.dtype,y.size=2,y.buffer=h,y.normalized=!1,y.offset=0,y.stride=0;u=g.call(this,P,k,0);"number"!==typeof u&&F.commandRaise(b,J);e.uniform1f(ba.location,u);k=k.color;W(k)&&4===k.length||F.commandRaise(B,J);e.uniform4f(x.location,k[0],k[1],k[2],k[3]);(k=d.elements)?e.bindBuffer(34963,k.buffer.buffer):D.currentVAO&&(k=n.getElements(D.currentVAO.elements))&&e.bindBuffer(34963,k.buffer.buffer);u=d.primitive;
y=d.offset;k?e.drawElements(u,3,k.type,y<<(k.type-5121>>1)):e.drawArrays(u,y,3);ja.dirty=!0;D.setVAO(null);p&&(L.cpuTime+=performance.now()-t)},scope:function(a,b,c){var e,g,f,k,l,n,m,q,r,v,t,u,x,z,A,C,D,F,B,G;e=E.depth_enable;E.depth_enable=!1;if(g=ja.profile)f=performance.now(),L.count++;k=d.count;d.count=3;l=y.call(this,P,a,c);n=ha[3];ha[3]=l;m=a.color;l=ha[4];ha[4]=m;m=K.buffer;K.buffer=h;q=K.divisor;K.divisor=0;r=K.normalized;K.normalized=!1;v=K.offset;K.offset=0;t=K.size;K.size=0;u=K.state;
K.state=1;x=K.stride;K.stride=0;z=K.type;K.type=h.dtype;A=K.w;K.w=0;C=K.x;K.x=0;D=K.y;K.y=0;F=K.z;K.z=0;B=p.vert;p.vert=2;G=p.frag;p.frag=1;ja.dirty=!0;b(P,a,c);E.depth_enable=e;g&&(L.cpuTime+=performance.now()-f);d.count=k;ha[3]=n;ha[4]=l;K.buffer=m;K.divisor=q;K.normalized=r;K.offset=v;K.size=t;K.state=u;K.stride=x;K.type=z;K.w=A;K.x=C;K.y=D;K.z=F;p.vert=B;p.frag=G;ja.dirty=!0},batch:function(b,g){var f,k,p,y;f=U.next;f!==U.cur&&(f?e.bindFramebuffer(36160,f.framebuffer):e.bindFramebuffer(36160,
null),U.cur=f);if(ja.dirty){var B,K,X;f=E.dither;f!==ja.dither&&(f?e.enable(3024):e.disable(3024),ja.dither=f);f=E.blend_enable;f!==ja.blend_enable&&(f?e.enable(3042):e.disable(3042),ja.blend_enable=f);f=C[0];B=C[1];K=C[2];X=C[3];if(f!==c[0]||B!==c[1]||K!==c[2]||X!==c[3])e.blendColor(f,B,K,X),c[0]=f,c[1]=B,c[2]=K,c[3]=X;f=q[0];B=q[1];if(f!==a[0]||B!==a[1])e.blendEquationSeparate(f,B),a[0]=f,a[1]=B;f=na[0];B=na[1];K=na[2];X=na[3];if(f!==A[0]||B!==A[1]||K!==A[2]||X!==A[3])e.blendFuncSeparate(f,B,K,
X),A[0]=f,A[1]=B,A[2]=K,A[3]=X;f=E.depth_func;f!==ja.depth_func&&(e.depthFunc(f),ja.depth_func=f);f=Y[0];B=Y[1];if(f!==ea[0]||B!==ea[1])e.depthRange(f,B),ea[0]=f,ea[1]=B;f=E.depth_mask;f!==ja.depth_mask&&(e.depthMask(f),ja.depth_mask=f);f=ia[0];B=ia[1];K=ia[2];X=ia[3];if(f!==xa[0]||B!==xa[1]||K!==xa[2]||X!==xa[3])e.colorMask(f,B,K,X),xa[0]=f,xa[1]=B,xa[2]=K,xa[3]=X;f=E.cull_enable;f!==ja.cull_enable&&(f?e.enable(2884):e.disable(2884),ja.cull_enable=f);f=E.cull_face;f!==ja.cull_face&&(e.cullFace(f),
ja.cull_face=f);f=E.frontFace;f!==ja.frontFace&&(e.frontFace(f),ja.frontFace=f);f=E.lineWidth;f!==ja.lineWidth&&(e.lineWidth(f),ja.lineWidth=f);f=E.polygonOffset_enable;f!==ja.polygonOffset_enable&&(f?e.enable(32823):e.disable(32823),ja.polygonOffset_enable=f);f=R[0];B=R[1];if(f!==Q[0]||B!==Q[1])e.polygonOffset(f,B),Q[0]=f,Q[1]=B;f=E.sample_alpha;f!==ja.sample_alpha&&(f?e.enable(32926):e.disable(32926),ja.sample_alpha=f);f=E.sample_enable;f!==ja.sample_enable&&(f?e.enable(32928):e.disable(32928),
ja.sample_enable=f);f=z[0];B=z[1];if(f!==m[0]||B!==m[1])e.sampleCoverage(f,B),m[0]=f,m[1]=B;f=E.stencil_enable;f!==ja.stencil_enable&&(f?e.enable(2960):e.disable(2960),ja.stencil_enable=f);f=E.stencil_mask;f!==ja.stencil_mask&&(e.stencilMask(f),ja.stencil_mask=f);f=va[0];B=va[1];K=va[2];if(f!==oa[0]||B!==oa[1]||K!==oa[2])e.stencilFunc(f,B,K),oa[0]=f,oa[1]=B,oa[2]=K;f=ca[0];B=ca[1];K=ca[2];X=ca[3];if(f!==S[0]||B!==S[1]||K!==S[2]||X!==S[3])e.stencilOpSeparate(f,B,K,X),S[0]=f,S[1]=B,S[2]=K,S[3]=X;f=
l[0];B=l[1];K=l[2];X=l[3];if(f!==I[0]||B!==I[1]||K!==I[2]||X!==I[3])e.stencilOpSeparate(f,B,K,X),I[0]=f,I[1]=B,I[2]=K,I[3]=X;f=E.scissor_enable;f!==ja.scissor_enable&&(f?e.enable(3089):e.disable(3089),ja.scissor_enable=f);f=V[0];B=V[1];K=V[2];X=V[3];if(f!==N[0]||B!==N[1]||K!==N[2]||X!==N[3])e.scissor(f,B,K,X),N[0]=f,N[1]=B,N[2]=K,N[3]=X;f=ma[0];B=ma[1];K=ma[2];X=ma[3];if(f!==ra[0]||B!==ra[1]||K!==ra[2]||X!==ra[3])e.viewport(f,B,K,X),ra[0]=f,ra[1]=B,ra[2]=K,ra[3]=X}e.disable(2929);ja.depth_enable=
!1;if(f=ja.profile)k=performance.now(),L.count+=g;e.useProgram(O.program);D.setVAO(null);B=T.location;K=r[B];K.buffer||e.enableVertexAttribArray(B);if(K.type!==h.dtype||2!==K.size||K.buffer!==h||!1!==K.normalized||0!==K.offset||0!==K.stride)e.bindBuffer(34962,h.buffer),e.vertexAttribPointer(B,2,h.dtype,!1,0,0),K.type=h.dtype,K.size=2,K.buffer=h,K.normalized=!1,K.offset=0,K.stride=0;p=t.call(this,P,y,p);"number"!==typeof p&&F.commandRaise(u,J);e.uniform1f(ba.location,p);(B=d.elements)?e.bindBuffer(34963,
B.buffer.buffer):D.currentVAO&&(B=n.getElements(D.currentVAO.elements))&&e.bindBuffer(34963,B.buffer.buffer);K=d.primitive;X=d.offset;for(p=0;p<g;++p){y=b[p];var ha,Ua,w,v,M,wa,ta;ha=y.color;W(ha)&&4===ha.length||F.commandRaise(G,J);y=ha[0];w=ha[1];M=ha[2];ha=ha[3];p&&Ua===y&&v===w&&wa===M&&ta===ha||(Ua=y,v=w,wa=M,ta=ha,e.uniform4f(x.location,y,w,M,ha));B?e.drawElements(K,3,B.type,X<<(B.type-5121>>1)):e.drawArrays(K,X,3)}ja.dirty=!0;D.setVAO(null);f&&(L.cpuTime+=performance.now()-k)}}},"$13,color,position":function(k,
F,J,L,f,h,g,b,B,y,K,O,t,u,G,ba){var x,T,r,P,ja,d,n,U,e,W,E,p,ha,D,C,c,q,a,na,A,ia,xa,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca;x=k.attributes;T=k.context;r=k.current;P=k.draw;ja=k.framebuffer;d=k.gl;n=k.next;U=k.shader;e=k.uniforms;W=k.vao;E=n.blend_color;p=r.blend_color;ha=n.blend_equation;D=r.blend_equation;C=n.blend_func;c=r.blend_func;q=n.colorMask;a=r.colorMask;na=n.depth_range;A=r.depth_range;ia=n.polygonOffset_offset;xa=r.polygonOffset_offset;Y=n.sample_coverage;ea=r.sample_coverage;R=n.scissor_box;Q=
r.scissor_box;z=n.stencil_func;m=r.stencil_func;V=n.stencil_opBack;N=r.stencil_opBack;va=n.stencil_opFront;oa=r.stencil_opFront;l=n.viewport;I=r.viewport;ca=[1,0,0,1];return{draw:function(e){var k,t,u;e=ja.next;e!==ja.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),ja.cur=e);if(r.dirty){var y;e=n.dither;e!==r.dither&&(e?d.enable(3024):d.disable(3024),r.dither=e);e=n.blend_enable;e!==r.blend_enable&&(e?d.enable(3042):d.disable(3042),r.blend_enable=e);e=E[0];t=E[1];u=E[2];
y=E[3];if(e!==p[0]||t!==p[1]||u!==p[2]||y!==p[3])d.blendColor(e,t,u,y),p[0]=e,p[1]=t,p[2]=u,p[3]=y;e=ha[0];t=ha[1];if(e!==D[0]||t!==D[1])d.blendEquationSeparate(e,t),D[0]=e,D[1]=t;e=C[0];t=C[1];u=C[2];y=C[3];if(e!==c[0]||t!==c[1]||u!==c[2]||y!==c[3])d.blendFuncSeparate(e,t,u,y),c[0]=e,c[1]=t,c[2]=u,c[3]=y;e=n.depth_enable;e!==r.depth_enable&&(e?d.enable(2929):d.disable(2929),r.depth_enable=e);e=n.depth_func;e!==r.depth_func&&(d.depthFunc(e),r.depth_func=e);e=na[0];t=na[1];if(e!==A[0]||t!==A[1])d.depthRange(e,
t),A[0]=e,A[1]=t;e=n.depth_mask;e!==r.depth_mask&&(d.depthMask(e),r.depth_mask=e);e=q[0];t=q[1];u=q[2];y=q[3];if(e!==a[0]||t!==a[1]||u!==a[2]||y!==a[3])d.colorMask(e,t,u,y),a[0]=e,a[1]=t,a[2]=u,a[3]=y;e=n.cull_enable;e!==r.cull_enable&&(e?d.enable(2884):d.disable(2884),r.cull_enable=e);e=n.cull_face;e!==r.cull_face&&(d.cullFace(e),r.cull_face=e);e=n.frontFace;e!==r.frontFace&&(d.frontFace(e),r.frontFace=e);e=n.polygonOffset_enable;e!==r.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),r.polygonOffset_enable=
e);e=ia[0];t=ia[1];if(e!==xa[0]||t!==xa[1])d.polygonOffset(e,t),xa[0]=e,xa[1]=t;e=n.sample_alpha;e!==r.sample_alpha&&(e?d.enable(32926):d.disable(32926),r.sample_alpha=e);e=n.sample_enable;e!==r.sample_enable&&(e?d.enable(32928):d.disable(32928),r.sample_enable=e);e=Y[0];t=Y[1];if(e!==ea[0]||t!==ea[1])d.sampleCoverage(e,t),ea[0]=e,ea[1]=t;e=n.stencil_enable;e!==r.stencil_enable&&(e?d.enable(2960):d.disable(2960),r.stencil_enable=e);e=n.stencil_mask;e!==r.stencil_mask&&(d.stencilMask(e),r.stencil_mask=
e);e=z[0];t=z[1];u=z[2];if(e!==m[0]||t!==m[1]||u!==m[2])d.stencilFunc(e,t,u),m[0]=e,m[1]=t,m[2]=u;e=va[0];t=va[1];u=va[2];y=va[3];if(e!==oa[0]||t!==oa[1]||u!==oa[2]||y!==oa[3])d.stencilOpSeparate(e,t,u,y),oa[0]=e,oa[1]=t,oa[2]=u,oa[3]=y;e=V[0];t=V[1];u=V[2];y=V[3];if(e!==N[0]||t!==N[1]||u!==N[2]||y!==N[3])d.stencilOpSeparate(e,t,u,y),N[0]=e,N[1]=t,N[2]=u,N[3]=y;e=n.scissor_enable;e!==r.scissor_enable&&(e?d.enable(3089):d.disable(3089),r.scissor_enable=e);e=R[0];t=R[1];u=R[2];y=R[3];if(e!==Q[0]||t!==
Q[1]||u!==Q[2]||y!==Q[3])d.scissor(e,t,u,y),Q[0]=e,Q[1]=t,Q[2]=u,Q[3]=y;e=l[0];t=l[1];u=l[2];y=l[3];if(e!==I[0]||t!==I[1]||u!==I[2]||y!==I[3])d.viewport(e,t,u,y),I[0]=e,I[1]=t,I[2]=u,I[3]=y}d.lineWidth(1);r.lineWidth=1;if(e=r.profile)k=performance.now(),L.count++;d.useProgram(f.program);W.setVAO(null);t=ba.location;u=x[t];u.buffer||d.enableVertexAttribArray(t);if(u.type!==h.dtype||2!==u.size||u.buffer!==h||!1!==u.normalized||0!==u.offset||0!==u.stride)d.bindBuffer(34962,h.buffer),d.vertexAttribPointer(t,
2,h.dtype,!1,0,0),u.type=h.dtype,u.size=2,u.buffer=h,u.normalized=!1,u.offset=0,u.stride=0;d.uniform4f(G.location,1,0,0,1);g&&d.bindBuffer(34963,g.buffer.buffer);t=g.primType;u=g.vertCount-0;0<=u||F.commandRaise(b,J);u&&(d.drawElements(t,u,g.type,0<<(g.type-5121>>1)),r.dirty=!0,W.setVAO(null),e&&(L.cpuTime+=performance.now()-k))},scope:function(a,b,c){var d,f,g,k,l,m,p,q,t,u,x,w,v,z,A,C,D,E,G,H,I,N;d=n.lineWidth;n.lineWidth=1;if(f=r.profile)g=performance.now(),L.count++;k=P.elements;P.elements=B;
l=P.offset;P.offset=0;m=B.vertCount-0;0<=m||F.commandRaise(y,J);p=P.count;P.count=m;q=B.primType;m=P.primitive;P.primitive=q;q=e[3];e[3]=ca;t=K.buffer;K.buffer=h;u=K.divisor;K.divisor=0;x=K.normalized;K.normalized=!1;w=K.offset;K.offset=0;v=K.size;K.size=0;z=K.state;K.state=1;A=K.stride;K.stride=0;C=K.type;K.type=h.dtype;D=K.w;K.w=0;E=K.x;K.x=0;G=K.y;K.y=0;H=K.z;K.z=0;I=U.vert;U.vert=2;N=U.frag;U.frag=1;r.dirty=!0;b(T,a,c);n.lineWidth=d;f&&(L.cpuTime+=performance.now()-g);P.elements=k;P.offset=l;
P.count=p;P.primitive=m;e[3]=q;K.buffer=t;K.divisor=u;K.normalized=x;K.offset=w;K.size=v;K.state=z;K.stride=A;K.type=C;K.w=D;K.x=E;K.y=G;K.z=H;U.vert=I;U.frag=N;r.dirty=!0},batch:function(b,e){var f,g,k;f=ja.next;f!==ja.cur&&(f?d.bindFramebuffer(36160,f.framebuffer):d.bindFramebuffer(36160,null),ja.cur=f);if(r.dirty){var y,B;f=n.dither;f!==r.dither&&(f?d.enable(3024):d.disable(3024),r.dither=f);f=n.blend_enable;f!==r.blend_enable&&(f?d.enable(3042):d.disable(3042),r.blend_enable=f);f=E[0];k=E[1];
y=E[2];B=E[3];if(f!==p[0]||k!==p[1]||y!==p[2]||B!==p[3])d.blendColor(f,k,y,B),p[0]=f,p[1]=k,p[2]=y,p[3]=B;f=ha[0];k=ha[1];if(f!==D[0]||k!==D[1])d.blendEquationSeparate(f,k),D[0]=f,D[1]=k;f=C[0];k=C[1];y=C[2];B=C[3];if(f!==c[0]||k!==c[1]||y!==c[2]||B!==c[3])d.blendFuncSeparate(f,k,y,B),c[0]=f,c[1]=k,c[2]=y,c[3]=B;f=n.depth_enable;f!==r.depth_enable&&(f?d.enable(2929):d.disable(2929),r.depth_enable=f);f=n.depth_func;f!==r.depth_func&&(d.depthFunc(f),r.depth_func=f);f=na[0];k=na[1];if(f!==A[0]||k!==
A[1])d.depthRange(f,k),A[0]=f,A[1]=k;f=n.depth_mask;f!==r.depth_mask&&(d.depthMask(f),r.depth_mask=f);f=q[0];k=q[1];y=q[2];B=q[3];if(f!==a[0]||k!==a[1]||y!==a[2]||B!==a[3])d.colorMask(f,k,y,B),a[0]=f,a[1]=k,a[2]=y,a[3]=B;f=n.cull_enable;f!==r.cull_enable&&(f?d.enable(2884):d.disable(2884),r.cull_enable=f);f=n.cull_face;f!==r.cull_face&&(d.cullFace(f),r.cull_face=f);f=n.frontFace;f!==r.frontFace&&(d.frontFace(f),r.frontFace=f);f=n.polygonOffset_enable;f!==r.polygonOffset_enable&&(f?d.enable(32823):
d.disable(32823),r.polygonOffset_enable=f);f=ia[0];k=ia[1];if(f!==xa[0]||k!==xa[1])d.polygonOffset(f,k),xa[0]=f,xa[1]=k;f=n.sample_alpha;f!==r.sample_alpha&&(f?d.enable(32926):d.disable(32926),r.sample_alpha=f);f=n.sample_enable;f!==r.sample_enable&&(f?d.enable(32928):d.disable(32928),r.sample_enable=f);f=Y[0];k=Y[1];if(f!==ea[0]||k!==ea[1])d.sampleCoverage(f,k),ea[0]=f,ea[1]=k;f=n.stencil_enable;f!==r.stencil_enable&&(f?d.enable(2960):d.disable(2960),r.stencil_enable=f);f=n.stencil_mask;f!==r.stencil_mask&&
(d.stencilMask(f),r.stencil_mask=f);f=z[0];k=z[1];y=z[2];if(f!==m[0]||k!==m[1]||y!==m[2])d.stencilFunc(f,k,y),m[0]=f,m[1]=k,m[2]=y;f=va[0];k=va[1];y=va[2];B=va[3];if(f!==oa[0]||k!==oa[1]||y!==oa[2]||B!==oa[3])d.stencilOpSeparate(f,k,y,B),oa[0]=f,oa[1]=k,oa[2]=y,oa[3]=B;f=V[0];k=V[1];y=V[2];B=V[3];if(f!==N[0]||k!==N[1]||y!==N[2]||B!==N[3])d.stencilOpSeparate(f,k,y,B),N[0]=f,N[1]=k,N[2]=y,N[3]=B;f=n.scissor_enable;f!==r.scissor_enable&&(f?d.enable(3089):d.disable(3089),r.scissor_enable=f);f=R[0];k=
R[1];y=R[2];B=R[3];if(f!==Q[0]||k!==Q[1]||y!==Q[2]||B!==Q[3])d.scissor(f,k,y,B),Q[0]=f,Q[1]=k,Q[2]=y,Q[3]=B;f=l[0];k=l[1];y=l[2];B=l[3];if(f!==I[0]||k!==I[1]||y!==I[2]||B!==I[3])d.viewport(f,k,y,B),I[0]=f,I[1]=k,I[2]=y,I[3]=B}d.lineWidth(1);r.lineWidth=1;if(f=r.profile)g=performance.now(),L.count+=e;d.useProgram(O.program);W.setVAO(null);k=ba.location;y=x[k];y.buffer||d.enableVertexAttribArray(k);if(y.type!==h.dtype||2!==y.size||y.buffer!==h||!1!==y.normalized||0!==y.offset||0!==y.stride)d.bindBuffer(34962,
h.buffer),d.vertexAttribPointer(k,2,h.dtype,!1,0,0),y.type=h.dtype,y.size=2,y.buffer=h,y.normalized=!1,y.offset=0,y.stride=0;d.uniform4f(G.location,1,0,0,1);t&&d.bindBuffer(34963,t.buffer.buffer);y=t.primType;B=t.vertCount-0;0<=B||F.commandRaise(u,J);for(k=0;k<e;++k)B&&d.drawElements(y,B,t.type,0<<(t.type-5121>>1));r.dirty=!0;W.setVAO(null);f&&(L.cpuTime+=performance.now()-g)}}},"$20,mouse,position,t,texture":function(k,F,J,L,f,h,g,b,B,y,K,O,t,u,G,ba,x,T,r,P,ja,d,n,U,e){var W,E,p,ha,D,C,c,q,a,na,
A,ia,xa,Y,ea,R,Q,z,m,V,N,va,oa,l,I,ca,S,ma,ra,Ca,ya,fa,Ba,la,pa,za;W=k.attributes;E=k.context;p=k.current;ha=k.draw;D=k.elements;C=k.framebuffer;c=k.gl;q=k.isArrayLike;a=k.next;na=k.shader;A=k.uniforms;ia=k.vao;xa=a.blend_color;Y=p.blend_color;ea=a.blend_equation;R=p.blend_equation;Q=a.blend_func;z=p.blend_func;m=a.colorMask;V=p.colorMask;N=a.depth_range;va=p.depth_range;oa=a.polygonOffset_offset;l=p.polygonOffset_offset;I=a.sample_coverage;ca=p.sample_coverage;S=a.scissor_box;ma=p.scissor_box;ra=
a.stencil_func;Ca=p.stencil_func;ya=a.stencil_opBack;fa=p.stencil_opBack;Ba=a.stencil_opFront;la=p.stencil_opFront;pa=a.viewport;za=p.viewport;return{draw:function(k){var r,t,u,w;r=C.next;r!==C.cur&&(r?c.bindFramebuffer(36160,r.framebuffer):c.bindFramebuffer(36160,null),C.cur=r);if(p.dirty){var v;r=a.dither;r!==p.dither&&(r?c.enable(3024):c.disable(3024),p.dither=r);r=a.blend_enable;r!==p.blend_enable&&(r?c.enable(3042):c.disable(3042),p.blend_enable=r);r=xa[0];u=xa[1];w=xa[2];v=xa[3];if(r!==Y[0]||
u!==Y[1]||w!==Y[2]||v!==Y[3])c.blendColor(r,u,w,v),Y[0]=r,Y[1]=u,Y[2]=w,Y[3]=v;r=ea[0];u=ea[1];if(r!==R[0]||u!==R[1])c.blendEquationSeparate(r,u),R[0]=r,R[1]=u;r=Q[0];u=Q[1];w=Q[2];v=Q[3];if(r!==z[0]||u!==z[1]||w!==z[2]||v!==z[3])c.blendFuncSeparate(r,u,w,v),z[0]=r,z[1]=u,z[2]=w,z[3]=v;r=a.depth_enable;r!==p.depth_enable&&(r?c.enable(2929):c.disable(2929),p.depth_enable=r);r=a.depth_func;r!==p.depth_func&&(c.depthFunc(r),p.depth_func=r);r=N[0];u=N[1];if(r!==va[0]||u!==va[1])c.depthRange(r,u),va[0]=
r,va[1]=u;r=a.depth_mask;r!==p.depth_mask&&(c.depthMask(r),p.depth_mask=r);r=m[0];u=m[1];w=m[2];v=m[3];if(r!==V[0]||u!==V[1]||w!==V[2]||v!==V[3])c.colorMask(r,u,w,v),V[0]=r,V[1]=u,V[2]=w,V[3]=v;r=a.cull_enable;r!==p.cull_enable&&(r?c.enable(2884):c.disable(2884),p.cull_enable=r);r=a.cull_face;r!==p.cull_face&&(c.cullFace(r),p.cull_face=r);r=a.frontFace;r!==p.frontFace&&(c.frontFace(r),p.frontFace=r);r=a.lineWidth;r!==p.lineWidth&&(c.lineWidth(r),p.lineWidth=r);r=a.polygonOffset_enable;r!==p.polygonOffset_enable&&
(r?c.enable(32823):c.disable(32823),p.polygonOffset_enable=r);r=oa[0];u=oa[1];if(r!==l[0]||u!==l[1])c.polygonOffset(r,u),l[0]=r,l[1]=u;r=a.sample_alpha;r!==p.sample_alpha&&(r?c.enable(32926):c.disable(32926),p.sample_alpha=r);r=a.sample_enable;r!==p.sample_enable&&(r?c.enable(32928):c.disable(32928),p.sample_enable=r);r=I[0];u=I[1];if(r!==ca[0]||u!==ca[1])c.sampleCoverage(r,u),ca[0]=r,ca[1]=u;r=a.stencil_enable;r!==p.stencil_enable&&(r?c.enable(2960):c.disable(2960),p.stencil_enable=r);r=a.stencil_mask;
r!==p.stencil_mask&&(c.stencilMask(r),p.stencil_mask=r);r=ra[0];u=ra[1];w=ra[2];if(r!==Ca[0]||u!==Ca[1]||w!==Ca[2])c.stencilFunc(r,u,w),Ca[0]=r,Ca[1]=u,Ca[2]=w;r=Ba[0];u=Ba[1];w=Ba[2];v=Ba[3];if(r!==la[0]||u!==la[1]||w!==la[2]||v!==la[3])c.stencilOpSeparate(r,u,w,v),la[0]=r,la[1]=u,la[2]=w,la[3]=v;r=ya[0];u=ya[1];w=ya[2];v=ya[3];if(r!==fa[0]||u!==fa[1]||w!==fa[2]||v!==fa[3])c.stencilOpSeparate(r,u,w,v),fa[0]=r,fa[1]=u,fa[2]=w,fa[3]=v;r=a.scissor_enable;r!==p.scissor_enable&&(r?c.enable(3089):c.disable(3089),
p.scissor_enable=r);r=S[0];u=S[1];w=S[2];v=S[3];if(r!==ma[0]||u!==ma[1]||w!==ma[2]||v!==ma[3])c.scissor(r,u,w,v),ma[0]=r,ma[1]=u,ma[2]=w,ma[3]=v;r=pa[0];u=pa[1];w=pa[2];v=pa[3];if(r!==za[0]||u!==za[1]||w!==za[2]||v!==za[3])c.viewport(r,u,w,v),za[0]=r,za[1]=u,za[2]=w,za[3]=v;p.dirty=!1}if(r=p.profile)t=performance.now(),L.count++;c.useProgram(f.program);ia.setVAO(null);u=n.location;w=W[u];w.buffer||c.enableVertexAttribArray(u);if(w.type!==h.dtype||2!==w.size||w.buffer!==h||!1!==w.normalized||0!==w.offset||
0!==w.stride)c.bindBuffer(34962,h.buffer),c.vertexAttribPointer(u,2,h.dtype,!1,0,0),w.type=h.dtype,w.size=2,w.buffer=h,w.normalized=!1,w.offset=0,w.stride=0;u=g.call(this,E,k,0);q(u)&&2===u.length||F.commandRaise(b,J);c.uniform2f(d.location,u[0],u[1]);k=B.call(this,E,k,0);"number"!==typeof k&&F.commandRaise(y,J);c.uniform1f(U.location,k);c.uniform1i(e.location,K.bind());(k=ha.elements)?c.bindBuffer(34963,k.buffer.buffer):ia.currentVAO&&(k=D.getElements(ia.currentVAO.elements))&&c.bindBuffer(34963,
k.buffer.buffer);u=ha.primitive;w=ha.offset;k?c.drawElements(u,3,k.type,w<<(k.type-5121>>1)):c.drawArrays(u,w,3);ia.setVAO(null);r&&(L.cpuTime+=performance.now()-t);K.unbind()},scope:function(a,b,c){var d,e,f,g,k,l,m,n,r,q,x,y,z,B,C,D,F,K,I,J;if(d=p.profile)e=performance.now(),L.count++;f=ha.count;ha.count=3;g=O.call(this,E,a,c);k=A[3];A[3]=g;l=t.call(this,E,a,c);g=A[4];A[4]=l;l=A[5];A[5]=u;m=G.buffer;G.buffer=h;n=G.divisor;G.divisor=0;r=G.normalized;G.normalized=!1;q=G.offset;G.offset=0;x=G.size;
G.size=0;y=G.state;G.state=1;z=G.stride;G.stride=0;B=G.type;G.type=h.dtype;C=G.w;G.w=0;D=G.x;G.x=0;F=G.y;G.y=0;K=G.z;G.z=0;I=na.vert;na.vert=2;J=na.frag;na.frag=1;b(E,a,c);d&&(L.cpuTime+=performance.now()-e);ha.count=f;A[3]=k;A[4]=g;A[5]=l;G.buffer=m;G.divisor=n;G.normalized=r;G.offset=q;G.size=x;G.state=y;G.stride=z;G.type=B;G.w=C;G.x=D;G.y=F;G.z=K;na.vert=I;na.frag=J},batch:function(b,f){var g,k,u;g=C.next;g!==C.cur&&(g?c.bindFramebuffer(36160,g.framebuffer):c.bindFramebuffer(36160,null),C.cur=
g);if(p.dirty){var v,t,y;g=a.dither;g!==p.dither&&(g?c.enable(3024):c.disable(3024),p.dither=g);g=a.blend_enable;g!==p.blend_enable&&(g?c.enable(3042):c.disable(3042),p.blend_enable=g);g=xa[0];v=xa[1];t=xa[2];y=xa[3];if(g!==Y[0]||v!==Y[1]||t!==Y[2]||y!==Y[3])c.blendColor(g,v,t,y),Y[0]=g,Y[1]=v,Y[2]=t,Y[3]=y;g=ea[0];v=ea[1];if(g!==R[0]||v!==R[1])c.blendEquationSeparate(g,v),R[0]=g,R[1]=v;g=Q[0];v=Q[1];t=Q[2];y=Q[3];if(g!==z[0]||v!==z[1]||t!==z[2]||y!==z[3])c.blendFuncSeparate(g,v,t,y),z[0]=g,z[1]=
v,z[2]=t,z[3]=y;g=a.depth_enable;g!==p.depth_enable&&(g?c.enable(2929):c.disable(2929),p.depth_enable=g);g=a.depth_func;g!==p.depth_func&&(c.depthFunc(g),p.depth_func=g);g=N[0];v=N[1];if(g!==va[0]||v!==va[1])c.depthRange(g,v),va[0]=g,va[1]=v;g=a.depth_mask;g!==p.depth_mask&&(c.depthMask(g),p.depth_mask=g);g=m[0];v=m[1];t=m[2];y=m[3];if(g!==V[0]||v!==V[1]||t!==V[2]||y!==V[3])c.colorMask(g,v,t,y),V[0]=g,V[1]=v,V[2]=t,V[3]=y;g=a.cull_enable;g!==p.cull_enable&&(g?c.enable(2884):c.disable(2884),p.cull_enable=
g);g=a.cull_face;g!==p.cull_face&&(c.cullFace(g),p.cull_face=g);g=a.frontFace;g!==p.frontFace&&(c.frontFace(g),p.frontFace=g);g=a.lineWidth;g!==p.lineWidth&&(c.lineWidth(g),p.lineWidth=g);g=a.polygonOffset_enable;g!==p.polygonOffset_enable&&(g?c.enable(32823):c.disable(32823),p.polygonOffset_enable=g);g=oa[0];v=oa[1];if(g!==l[0]||v!==l[1])c.polygonOffset(g,v),l[0]=g,l[1]=v;g=a.sample_alpha;g!==p.sample_alpha&&(g?c.enable(32926):c.disable(32926),p.sample_alpha=g);g=a.sample_enable;g!==p.sample_enable&&
(g?c.enable(32928):c.disable(32928),p.sample_enable=g);g=I[0];v=I[1];if(g!==ca[0]||v!==ca[1])c.sampleCoverage(g,v),ca[0]=g,ca[1]=v;g=a.stencil_enable;g!==p.stencil_enable&&(g?c.enable(2960):c.disable(2960),p.stencil_enable=g);g=a.stencil_mask;g!==p.stencil_mask&&(c.stencilMask(g),p.stencil_mask=g);g=ra[0];v=ra[1];t=ra[2];if(g!==Ca[0]||v!==Ca[1]||t!==Ca[2])c.stencilFunc(g,v,t),Ca[0]=g,Ca[1]=v,Ca[2]=t;g=Ba[0];v=Ba[1];t=Ba[2];y=Ba[3];if(g!==la[0]||v!==la[1]||t!==la[2]||y!==la[3])c.stencilOpSeparate(g,
v,t,y),la[0]=g,la[1]=v,la[2]=t,la[3]=y;g=ya[0];v=ya[1];t=ya[2];y=ya[3];if(g!==fa[0]||v!==fa[1]||t!==fa[2]||y!==fa[3])c.stencilOpSeparate(g,v,t,y),fa[0]=g,fa[1]=v,fa[2]=t,fa[3]=y;g=a.scissor_enable;g!==p.scissor_enable&&(g?c.enable(3089):c.disable(3089),p.scissor_enable=g);g=S[0];v=S[1];t=S[2];y=S[3];if(g!==ma[0]||v!==ma[1]||t!==ma[2]||y!==ma[3])c.scissor(g,v,t,y),ma[0]=g,ma[1]=v,ma[2]=t,ma[3]=y;g=pa[0];v=pa[1];t=pa[2];y=pa[3];if(g!==za[0]||v!==za[1]||t!==za[2]||y!==za[3])c.viewport(g,v,t,y),za[0]=
g,za[1]=v,za[2]=t,za[3]=y;p.dirty=!1}if(g=p.profile)k=performance.now(),L.count+=f;c.useProgram(ba.program);ia.setVAO(null);v=n.location;t=W[v];t.buffer||c.enableVertexAttribArray(v);if(t.type!==h.dtype||2!==t.size||t.buffer!==h||!1!==t.normalized||0!==t.offset||0!==t.stride)c.bindBuffer(34962,h.buffer),c.vertexAttribPointer(v,2,h.dtype,!1,0,0),t.type=h.dtype,t.size=2,t.buffer=h,t.normalized=!1,t.offset=0,t.stride=0;v=x.call(this,E,void 0,u);q(v)&&2===v.length||F.commandRaise(T,J);c.uniform2f(d.location,
v[0],v[1]);u=r.call(this,E,void 0,u);"number"!==typeof u&&F.commandRaise(P,J);c.uniform1f(U.location,u);c.uniform1i(e.location,ja.bind());(v=ha.elements)?c.bindBuffer(34963,v.buffer.buffer):ia.currentVAO&&(v=D.getElements(ia.currentVAO.elements))&&c.bindBuffer(34963,v.buffer.buffer);t=ha.primitive;y=ha.offset;for(u=0;u<f;++u)v?c.drawElements(t,3,v.type,y<<(v.type-5121>>1)):c.drawArrays(t,y,3);ja.unbind();ia.setVAO(null);g&&(L.cpuTime+=performance.now()-k)}}}}},{}],26:[function(O,ha,xa){var k=O("./sorted-object-keys");
ha.exports=function(F,J){for(var L=k(J),f=0;f<L.length;++f)F[L[f]]=J[L[f]];return F}},{"./sorted-object-keys":35}],27:[function(O,ha,xa){function k(k,f,h,g,b,B){for(var y=0;y<f;++y)for(var F=k[y],J=0;J<h;++J)for(var t=F[J],u=0;u<g;++u)b[B++]=t[u]}function F(L,f,h,g,b){for(var B=1,y=h+1;y<f.length;++y)B*=f[y];var K=f[h];if(4===f.length-h){var J=f[h+1],t=f[h+2];f=f[h+3];for(y=0;y<K;++y)k(L[y],J,t,f,g,b),b+=B}else for(y=0;y<K;++y)F(L[y],f,h+1,g,b),b+=B}var J=O("./pool");ha.exports={shape:function(k){for(var f=
[];k.length;k=k[0])f.push(k.length);return f},flatten:function(L,f,h,g){var b=1;if(f.length)for(var B=0;B<f.length;++B)b*=f[B];else b=0;h=g||J.allocType(h,b);switch(f.length){case 0:break;case 1:g=f[0];for(f=0;f<g;++f)h[f]=L[f];break;case 2:g=f[0];f=f[1];for(B=b=0;B<g;++B)for(var y=L[B],K=0;K<f;++K)h[b++]=y[K];break;case 3:k(L,f[0],f[1],f[2],h,0);break;default:F(L,f,0,h,0)}return h}}},{"./pool":33}],28:[function(O,ha,xa){var k=O("./is-typed-array");ha.exports=function(F){return Array.isArray(F)||
k(F)}},{"./is-typed-array":31}],29:[function(O,ha,xa){var k=O("./is-typed-array");ha.exports=function(F){return!!F&&"object"===typeof F&&Array.isArray(F.shape)&&Array.isArray(F.stride)&&"number"===typeof F.offset&&F.shape.length===F.stride.length&&(Array.isArray(F.data)||k(F.data))}},{"./is-typed-array":31}],30:[function(O,ha,xa){ha.exports=function(k){return!(k&k-1)&&!!k}},{}],31:[function(O,ha,xa){ha.exports=function(k){return k instanceof Uint8Array||k instanceof Uint16Array||k instanceof Uint32Array||
k instanceof Int8Array||k instanceof Int16Array||k instanceof Int32Array||k instanceof Float32Array||k instanceof Float64Array||k instanceof Uint8ClampedArray}},{}],32:[function(O,ha,xa){ha.exports=function(k,F){for(var J=Array(k),L=0;L<k;++L)J[L]=F(L);return J}},{}],33:[function(O,ha,xa){function k(k){var f,h;f=(65535<k)<<4;k>>>=f;h=(255<k)<<3;k>>>=h;f|=h;h=(15<k)<<2;k>>>=h;f|=h;h=(3<k)<<1;return f|h|k>>>h>>1}function F(){function F(f){a:{for(var b=16;268435456>=b;b*=16)if(f<=b){f=b;break a}f=0}b=
h[k(f)>>2];return 0<b.length?b.pop():new ArrayBuffer(f)}function f(f){h[k(f.byteLength)>>2].push(f)}var h=J(8,function(){return[]});return{alloc:F,free:f,allocType:function(f,b){var h=null;switch(f){case 5120:h=new Int8Array(F(b),0,b);break;case 5121:h=new Uint8Array(F(b),0,b);break;case 5122:h=new Int16Array(F(2*b),0,b);break;case 5123:h=new Uint16Array(F(2*b),0,b);break;case 5124:h=new Int32Array(F(4*b),0,b);break;case 5125:h=new Uint32Array(F(4*b),0,b);break;case 5126:h=new Float32Array(F(4*b),
0,b);break;default:return null}return h.length!==b?h.subarray(0,b):h},freeType:function(g){f(g.buffer)}}}var J=O("./loop");O=F();O.zero=F();ha.exports=O},{"./loop":32}],34:[function(O,ha,xa){ha.exports={next:"function"===typeof requestAnimationFrame?function(k){return requestAnimationFrame(k)}:function(k){return setTimeout(k,16)},cancel:"function"===typeof cancelAnimationFrame?function(k){return cancelAnimationFrame(k)}:clearTimeout}},{}],35:[function(O,ha,xa){ha.exports=function(k){return Object.keys(k).sort()}},
{}],36:[function(O,ha,xa){var k=O("./pool"),F=new Float32Array(1),J=new Uint32Array(F.buffer);ha.exports=function(L){for(var f=k.allocType(5123,L.length),h=0;h<L.length;++h)if(isNaN(L[h]))f[h]=65535;else if(Infinity===L[h])f[h]=31744;else if(-Infinity===L[h])f[h]=64512;else{F[0]=L[h];var g=J[0],b=g>>>31<<15,B=(g<<1>>>24)-127,g=g>>13&1023;f[h]=-24>B?b:-14>B?b+(g+1024>>-14-B):15<B?b+31744:b+(B+15<<10)+g}return f}},{"./pool":33}],37:[function(O,ha,xa){var k=O("./sorted-object-keys");ha.exports=function(F){return k(F).map(function(k){return F[k]})}},
{"./sorted-object-keys":35}],38:[function(O,ha,xa){function k(f,b,k){function y(){var b=window.innerWidth,h=window.innerHeight;f!==document.body&&(h=F.getBoundingClientRect(),b=h.right-h.left,h=h.bottom-h.top);F.width=k*b;F.height=k*h}var F=document.createElement("canvas");h(F.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});f.appendChild(F);f===document.body&&(F.style.position="absolute",h(f.style,{margin:0,padding:0}));var J;f!==document.body&&"function"===typeof ResizeObserver?
(J=new ResizeObserver(function(){setTimeout(y)}),J.observe(f)):window.addEventListener("resize",y,!1);y();return{canvas:F,onDestroy:function(){J?J.disconnect():window.removeEventListener("resize",y);f.removeChild(F)}}}function F(f,b){function h(k){try{return f.getContext(k,b)}catch(B){return null}}return h("webgl")||h("experimental-webgl")||h("webgl-experimental")}function J(g){if("string"===typeof g)return g.split();f(Array.isArray(g),"invalid extension array");return g}function L(g){return"string"===
typeof g?(f("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(g)):g}var f=O("./util/check"),h=O("./util/extend");ha.exports=function(g){var b=g||{},h,y,K,O;g={};var t=[],u=[],G="undefined"===typeof window?1:window.devicePixelRatio,ba=!1,x=function(b){b&&f.raise(b)},T=function(){};"string"===typeof b?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),h=document.querySelector(b),f(h,"invalid query string for element")):"object"===
typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?h=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(O=b,K=O.canvas):(f.constructor(b),"gl"in b?O=b.gl:"canvas"in b?K=L(b.canvas):"container"in b&&(y=L(b.container)),"attributes"in b&&(g=b.attributes,f.type(g,"object","invalid context attributes")),"extensions"in b&&(t=J(b.extensions)),"optionalExtensions"in b&&(u=J(b.optionalExtensions)),"onDone"in b&&(f.type(b.onDone,
"function","invalid or missing onDone callback"),x=b.onDone),"profile"in b&&(ba=!!b.profile),"pixelRatio"in b&&(G=+b.pixelRatio,f(0<G,"invalid pixel ratio"))):f.raise("invalid arguments to regl");h&&("canvas"===h.nodeName.toLowerCase()?K=h:y=h);if(!O){if(!K){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");h=k(y||document.body,x,G);if(!h)return null;K=h.canvas;T=h.onDestroy}void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!0);O=F(K,g)}return O?
{gl:O,canvas:K,container:y,extensions:t,optionalExtensions:u,pixelRatio:G,profile:ba,onDone:x,onDestroy:T}:(T(),x("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":22,"./util/extend":26}],39:[function(O,ha,xa){ha.exports=function(k){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k}},{}],40:[function(O,ha,xa){var k=O("./identity");ha.exports=function(F,J,L,
f){var h,g,b,B,y,K,O,t,u=J[0],G=J[1];J=J[2];b=f[0];B=f[1];g=f[2];O=L[0];f=L[1];h=L[2];if(1E-6>Math.abs(u-O)&&1E-6>Math.abs(G-f)&&1E-6>Math.abs(J-h))return k(F);L=u-O;f=G-f;O=J-h;t=1/Math.sqrt(L*L+f*f+O*O);L*=t;f*=t;O*=t;h=B*O-g*f;g=g*L-b*O;b=b*f-B*L;(t=Math.sqrt(h*h+g*g+b*b))?(t=1/t,h*=t,g*=t,b*=t):b=g=h=0;B=f*b-O*g;y=O*h-L*b;K=L*g-f*h;(t=Math.sqrt(B*B+y*y+K*K))?(t=1/t,B*=t,y*=t,K*=t):K=y=B=0;F[0]=h;F[1]=B;F[2]=L;F[3]=0;F[4]=g;F[5]=y;F[6]=f;F[7]=0;F[8]=b;F[9]=K;F[10]=O;F[11]=0;F[12]=-(h*u+g*G+b*J);
F[13]=-(B*u+y*G+K*J);F[14]=-(L*u+f*G+O*J);F[15]=1;return F}},{"./identity":39}],41:[function(O,ha,xa){ha.exports=function(k,F,J,L,f){F=1/Math.tan(F/2);var h=1/(L-f);k[0]=F/J;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=F;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=(f+L)*h;k[11]=-1;k[12]=0;k[13]=0;k[14]=2*f*L*h;k[15]=0;return k}},{}],42:[function(O,ha,xa){ha.exports=function(F,J){function L(b){var f=!1;"altKey"in b&&(f=f||b.altKey!==ba.alt,ba.alt=!!b.altKey);"shiftKey"in b&&(f=f||b.shiftKey!==ba.shift,ba.shift=!!b.shiftKey);
"ctrlKey"in b&&(f=f||b.ctrlKey!==ba.control,ba.control=!!b.ctrlKey);"metaKey"in b&&(f=f||b.metaKey!==ba.meta,ba.meta=!!b.metaKey);return f}function f(b,f){var g=k.x(f),d=k.y(f);"buttons"in f&&(b=f.buttons|0);if(b!==t||g!==u||d!==G||L(f))t=b|0,u=g||0,G=d||0,J&&J(t,u,G,ba)}function h(b){f(0,b)}function g(){if(t||u||G||ba.shift||ba.alt||ba.meta||ba.control)t=u=G=0,ba.shift=ba.alt=ba.control=ba.meta=!1,J&&J(0,0,0,ba)}function b(b){L(b)&&J&&J(t,u,G,ba)}function B(b){0===k.buttons(b)?f(0,b):f(t,b)}function y(b){f(t|
k.buttons(b),b)}function K(b){f(t&~k.buttons(b),b)}function O(){x||(x=!0,F.addEventListener("mousemove",B),F.addEventListener("mousedown",y),F.addEventListener("mouseup",K),F.addEventListener("mouseleave",h),F.addEventListener("mouseenter",h),F.addEventListener("mouseout",h),F.addEventListener("mouseover",h),F.addEventListener("blur",g),F.addEventListener("keyup",b),F.addEventListener("keydown",b),F.addEventListener("keypress",b),F!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",
b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}J||(J=F,F=window);var t=0,u=0,G=0,ba={shift:!1,alt:!1,control:!1,meta:!1},x=!1;O();var T={element:F};Object.defineProperties(T,{enabled:{get:function(){return x},set:function(f){f?O():x&&(x=!1,F.removeEventListener("mousemove",B),F.removeEventListener("mousedown",y),F.removeEventListener("mouseup",K),F.removeEventListener("mouseleave",h),F.removeEventListener("mouseenter",h),F.removeEventListener("mouseout",h),F.removeEventListener("mouseover",
h),F.removeEventListener("blur",g),F.removeEventListener("keyup",b),F.removeEventListener("keydown",b),F.removeEventListener("keypress",b),F!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",b),window.removeEventListener("keydown",b),window.removeEventListener("keypress",b)))},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return G},enumerable:!0},mods:{get:function(){return ba},enumerable:!0}});
return T};var k=O("mouse-event")},{"mouse-event":43}],43:[function(O,ha,xa){function k(k){return k.target||k.srcElement||window}xa.buttons=function(k){if("object"===typeof k){if("buttons"in k)return k.buttons;if("which"in k){k=k.which;if(2===k)return 4;if(3===k)return 2;if(0<k)return 1<<k-1}else if("button"in k){k=k.button;if(1===k)return 4;if(2===k)return 2;if(0<=k)return 1<<k}}return 0};xa.element=k;xa.x=function(F){if("object"===typeof F){if("offsetX"in F)return F.offsetX;var J=k(F).getBoundingClientRect();
return F.clientX-J.left}return 0};xa.y=function(F){if("object"===typeof F){if("offsetY"in F)return F.offsetY;var J=k(F).getBoundingClientRect();return F.clientY-J.top}return 0}},{}],44:[function(O,ha,xa){var k=O("to-px");ha.exports=function(F,J,L){"function"===typeof F&&(L=!!J,J=F,F=window);var f=k("ex",F),h=function(g){L&&g.preventDefault();var b=g.deltaX||0,h=g.deltaY||0,k=g.deltaZ||0,F=1;switch(g.deltaMode){case 1:F=f;break;case 2:F=window.innerHeight}b*=F;h*=F;k*=F;if(b||h||k)return J(b,h,k,g)};
F.addEventListener("wheel",h);return h}},{"to-px":46}],45:[function(O,ha,xa){ha.exports=function(k,F){F||(F=[0,""]);k=String(k);var J=parseFloat(k,10);F[0]=J;F[1]=k.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return F}},{}],46:[function(O,ha,xa){function k(f,g){var b=L(getComputedStyle(f).getPropertyValue(g));return b[0]*J(b[1],f)}function F(f,g){var b=document.createElement("div");b.style.height="128"+f;g.appendChild(b);var B=k(b,"height")/128;g.removeChild(b);return B}function J(h,g){if(!h)return null;g=
g||document.body;h=(h+""||"px").trim().toLowerCase();if(g===window||g===document)g=document.body;switch(h){case "%":return g.clientHeight/100;case "ch":case "ex":return F(h,g);case "em":return k(g,"font-size");case "rem":return k(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return f;case "cm":return f/
2.54;case "mm":return f/25.4;case "pt":return f/72;case "pc":return f/6;case "px":return 1}var b=L(h);if(!isNaN(b[0])&&b[1]){var B=J(b[1],g);return"number"===typeof B?b[0]*B:null}return null}var L=O("parse-unit");ha.exports=J;var f=F("in",document.body)},{"parse-unit":45}],47:[function(O,ha,xa){function k(b,f){for(var g=0;g<b.length;++g)if(b[g]===f)return g;return-1}var F=O("./lib/util/check"),J=O("./lib/util/extend"),L=O("./lib/dynamic"),f=O("./lib/util/raf"),h=O("./lib/util/clock"),g=O("./lib/strings"),
b=O("./lib/webgl"),B=O("./lib/extension"),y=O("./lib/limits"),K=O("./lib/buffer"),aa=O("./lib/elements"),t=O("./lib/texture"),u=O("./lib/renderbuffer"),G=O("./lib/framebuffer"),ba=O("./lib/attribute"),x=O("./lib/shader"),T=O("./lib/read"),r=O("./lib/core"),P=O("./lib/stats"),ja=O("./lib/timer");ha.exports=function(d){function n(){if(0===Ba.length)Q&&Q.update(),Ma=null;else{Ma=f.next(n);c();for(var a=Ba.length-1;0<=a;--a){var b=Ba[a];b&&b(N,null,0)}na.flush();Q&&Q.update()}}function O(){!Ma&&0<Ba.length&&
(Ma=f.next(n))}function e(){Ma&&(f.cancel(n),Ma=null)}function W(a){a.preventDefault();ia=!0;e();la.forEach(function(a){a()})}function E(a){na.getError();ia=!1;xa.restore();ca.restore();oa.restore();S.restore();ma.restore();ra.restore();I.restore();Q&&Q.restore();Ca.procs.refresh();O();pa.forEach(function(a){a()})}function p(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(L.isDynamic(f))e[b]=L.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(L.isDynamic(f[g])){e[b]=
L.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<a;)n.push(null);return n}F(!!a,"invalid args to regl({...})");F.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=J({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Ca.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return J(function(a,b){var d;ia&&F.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function ha(a,b){var c=0;Ca.procs.poll();var d=b.color;d&&(na.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(na.clearDepth(+b.depth),c|=256);"stencil"in b&&(na.clearStencil(b.stencil|0),c|=1024);F(!!c,
"called regl.clear with no buffer specified");na.clear(c)}function D(a){F.type(a,"function","regl.frame() callback must be a function");Ba.push(a);O();return{cancel:function(){function b(){var a=k(Ba,b);Ba[a]=Ba[Ba.length-1];--Ba.length;0>=Ba.length&&e()}var c=k(Ba,a);F(0<=c,"cannot cancel a frame twice");Ba[c]=b}}}function C(){var a=ya.viewport,b=ya.scissor_box;a[0]=a[1]=b[0]=b[1]=0;N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=a[2]=b[2]=na.drawingBufferWidth;N.viewportHeight=N.framebufferHeight=
N.drawingBufferHeight=a[3]=b[3]=na.drawingBufferHeight}function c(){N.tick+=1;N.time=a();C();Ca.procs.poll()}function q(){S.refresh();C();Ca.procs.refresh();Q&&Q.update()}function a(){return(h()-z)/1E3}console.log("REGL args are:",d);d=b(d);console.log("REGL configs are:",d);if(!d)return null;var na=d.gl,A=na.getContextAttributes(),ia=na.isContextLost(),xa=B(na,d);if(!xa)return null;var Y=g(),ea=P(),R=xa.extensions,Q=ja(na,R),z=h(),m=na.drawingBufferWidth,V=na.drawingBufferHeight,N={tick:0,time:0,
viewportWidth:m,viewportHeight:V,framebufferWidth:m,framebufferHeight:V,drawingBufferWidth:m,drawingBufferHeight:V,pixelRatio:d.pixelRatio},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},va=y(na,R),oa=K(na,ea,d,function(a){return I.destroyBuffer(a)}),l=aa(na,R,oa,ea),I=ba(na,R,va,ea,oa,l,m),ca=x(na,Y,ea,d),S=t(na,R,va,function(){Ca.procs.poll()},N,ea,d),ma=u(na,R,va,ea,d),ra=G(na,R,va,S,ma,ea),Ca=r(na,Y,R,va,oa,l,S,ra,{},I,ca,m,N,Q,d),Y=T(na,ra,Ca.procs.poll,N,A,R,va),ya=Ca.next,fa=
na.canvas,Ba=[],la=[],pa=[],za=[d.onDestroy],Ma=null;fa&&(fa.addEventListener("webglcontextlost",W,!1),fa.addEventListener("webglcontextrestored",E,!1));var X=ra.setFBO=p({framebuffer:L.define.call(null,1,"framebuffer")});q();A=J(p,{clear:function(a){F("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)X(J({framebuffer:a.framebuffer.faces[b]},a),ha);else X(a,ha);else ha(null,a)},prop:L.define.bind(null,
1),context:L.define.bind(null,2),"this":L.define.bind(null,3),draw:p({}),buffer:function(a){return oa.create(a,34962,!1,!1)},elements:function(a){return l.create(a,!1)},texture:S.create2D,cube:S.createCube,renderbuffer:ma.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:I.createVAO,attributes:A,frame:D,on:function(a,b){F.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return D(b);case "lost":c=la;break;case "restore":c=pa;break;case "destroy":c=
za;break;default:F.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:va,hasExtension:function(a){return 0<=va.extensions.indexOf(a.toLowerCase())},read:Y,destroy:function(){Ba.length=0;e();fa&&(fa.removeEventListener("webglcontextlost",W),fa.removeEventListener("webglcontextrestored",E));ca.clear();ra.clear();ma.clear();I.clear();S.clear();l.clear();oa.clear();Q&&
Q.clear();za.forEach(function(a){a()})},_gl:na,_refresh:q,poll:function(){c();Q&&Q.update()},now:a,stats:ea});d.onDone(null,A);return A}},{"./lib/attribute":3,"./lib/buffer":4,"./lib/core":9,"./lib/dynamic":10,"./lib/elements":11,"./lib/extension":12,"./lib/framebuffer":13,"./lib/limits":14,"./lib/read":15,"./lib/renderbuffer":16,"./lib/shader":17,"./lib/stats":18,"./lib/strings":19,"./lib/texture":20,"./lib/timer":21,"./lib/util/check":22,"./lib/util/clock":23,"./lib/util/extend":26,"./lib/util/raf":34,
"./lib/webgl":38}]},{},[1]);

        </script>
        </body>
      </html>
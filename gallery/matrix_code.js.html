<!DOCTYPE html>
      <html>
        <head>
          <title>example/matrix_code.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function y(C,Ta,c){function W(e,d){if(!Ta[e]){if(!C[e]){var q="function"==typeof require&&require;if(!d&&q)return q(e,!0);if(n)return n(e,!0);q=Error("Cannot find module '"+e+"'");throw q.code="MODULE_NOT_FOUND",q;}q=Ta[e]={exports:{}};C[e][0].call(q.exports,function(a){return W(C[e][1][a]||a)},q,q.exports,y,C,Ta,c)}return Ta[e].exports}for(var n="function"==typeof require&&require,A=0;A<c.length;A++)W(c[A]);return W}return y})()({1:[function(y,C,Ta){document.body.style="background-color: black;";
document.addEventListener("touchmove",function(a){return a.preventDefault()},{passive:!1});C=document.body.appendChild(document.createElement("canvas"));Ta=y("canvas-fit");window.addEventListener("resize",Ta(C),!1);var c=y("../regl")({canvas:C,extensions:["OES_texture_half_float","OES_texture_half_float_linear"],optionalExtensions:["EXT_color_buffer_half_float","WEBGL_color_buffer_float","OES_standard_derivatives"]}),W=Array(2).fill().map(function(){return c.framebuffer({color:c.texture({radius:60,
type:"half float"}),depthStencil:!1})});C=function(){return c.framebuffer({color:c.texture({type:"half float",min:"linear",mag:"linear"})})};var n=function(a,d,e,c){return a.forEach(function(a,q){return a.resize(Math.floor(d*c/Math.pow(2,q)),Math.floor(e*c/Math.pow(2,q)))})},A=C(),e=Array(5).fill().map(C),d=Array(5).fill().map(C),q=Array(5).fill().map(C),a=C(),t=c({frag:"\n    precision highp float;\n\n    #define PI 3.14159265359\n    #define SQRT_2 1.4142135623730951\n    #define SQRT_5 2.23606797749979\n\n    uniform float glyphSequenceLength;\n    uniform float numColumns;\n    uniform float glyphTextureColumns;\n    uniform float time;\n    uniform sampler2D lastState;\n\n    highp float rand( const in vec2 uv ) {\n      const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n      highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n      return fract(sin(sn) * c);\n    }\n\n    void main()  {\n\n      vec2 uv = gl_FragCoord.xy / numColumns;\n\n      float columnTimeOffset = rand(vec2(gl_FragCoord.x, 0.0));\n      float columnSpeedOffset = rand(vec2(gl_FragCoord.x + 0.1, 0.0));\n\n      vec4 data = texture2D( lastState, uv );\n\n      if (length(data) == 0.) {\n        data.rba = vec3(rand(uv), 0., 0.);\n        data.g = rand(uv);\n      }\n\n      float columnTime = (columnTimeOffset * 1000.0 + time * 0.5) * (0.5 + columnSpeedOffset * 0.5) + (sin(time * columnSpeedOffset) * 0.2);\n      float glyphTime = gl_FragCoord.y * 0.01 + columnTime;\n\n      float value = 1.0 - fract((glyphTime + 0.3 * sin(SQRT_2 * glyphTime) + 0.2 * sin(SQRT_5 * glyphTime)));\n\n      float brightness = 3.0 * log(value * 1.25);\n\n      float glyphCycleSpeed = 0.0;\n      if (brightness > 0.0) glyphCycleSpeed = pow(1.0 - brightness, 4.0);\n\n      float glyphCycle = data.g;\n      glyphCycle = fract(glyphCycle + 0.005 * glyphCycleSpeed);\n\n      float symbol = floor(glyphSequenceLength * glyphCycle);\n      float symbolX = mod(symbol, glyphTextureColumns);\n      float symbolY = ((glyphTextureColumns - 1.0) - (symbol - symbolX) / glyphTextureColumns);\n\n      gl_FragColor = vec4(\n        brightness,\n        glyphCycle,\n        symbolY * glyphTextureColumns + symbolX,\n        1.\n      );\n    }\n  ",
uniforms:{glyphSequenceLength:57,time:c.context("time")},framebuffer:function(a){return W[(a.tick+1)%2]}}),ja=c({vert:"\n  attribute vec2 aPosition;\n  uniform float width;\n  uniform float height;\n  varying vec2 vUV;\n  void main() {\n    vUV = aPosition / 2.0 + 0.5;\n    vec2 size = width > height ? vec2(width / height, 1.) : vec2(1., height / width);\n    gl_Position = vec4( size * aPosition, 0.0, 1.0 );\n  }\n  ",frag:"\n    #ifdef GL_OES_standard_derivatives\n    #extension GL_OES_standard_derivatives: enable\n    #endif\n    precision lowp float;\n\n    uniform sampler2D glyphMSDF;\n    uniform sampler2D lastState;\n    uniform float numColumns;\n    uniform float glyphTextureColumns;\n\n    varying vec2 vUV;\n\n    float median3(vec3 i) {\n      return max(min(i.r, i.g), min(max(i.r, i.g), i.b));\n    }\n\n    void main() {\n      // Unpack the values from the font texture\n      vec4 glyph = texture2D(lastState, vUV);\n      float brightness = max(0., glyph.r);\n      float symbolIndex = glyph.b;\n\n      // resolve UV to MSDF texture coord\n      vec2 symbolUV = vec2(mod(symbolIndex, glyphTextureColumns), floor(symbolIndex / glyphTextureColumns));\n      vec2 glyphUV = fract(vUV * numColumns);\n      vec2 msdfUV = (glyphUV + symbolUV) / glyphTextureColumns;\n\n      // MSDF\n      vec3 dist = texture2D(glyphMSDF, msdfUV).rgb;\n      float sigDist = median3(dist) - 0.5;\n      float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n\n      gl_FragColor = vec4(vec3(brightness * alpha), 1.0);\n    }\n  ",
uniforms:{glyphMSDF:c.prop("glyphMSDF"),width:c.context("viewportHeight"),height:c.context("viewportWidth")},framebuffer:A}),wa=c({frag:"\n  precision mediump float;\n  varying vec2 vUV;\n  uniform sampler2D tex;\n  uniform float threshold;\n  void main() {\n    float value = texture2D(tex, vUV).r;\n    if (value < threshold) {\n      value = 0.;\n    }\n    gl_FragColor = vec4(vec3(value), 1.0);\n  }\n  ",uniforms:{tex:c.prop("tex"),threshold:.3},framebuffer:c.prop("fbo")}),K=c({frag:"\n  precision mediump float;\n  varying vec2 vUV;\n  uniform sampler2D tex;\n  uniform vec2 direction;\n  uniform float width, height;\n  void main() {\n    vec2 size = width > height ? vec2(width / height, 1.) : vec2(1., height / width);\n    gl_FragColor =\n      texture2D(tex, vUV) * 0.442 +\n      (\n        texture2D(tex, vUV + direction / max(width, height) * size) +\n        texture2D(tex, vUV - direction / max(width, height) * size)\n      ) * 0.279;\n  }\n  ",
uniforms:{tex:c.prop("tex"),direction:c.prop("direction"),height:c.context("viewportWidth"),width:c.context("viewportHeight")},framebuffer:c.prop("fbo")}),L=c({frag:"\n  precision mediump float;\n  varying vec2 vUV;\n  "+q.map(function(a,d){return"uniform sampler2D tex_"+d+";"}).join("\n")+"\n  uniform sampler2D tex;\n  void main() {\n    vec4 total = vec4(0.);\n    "+q.map(function(a,d){return"total += texture2D(tex_"+d+", vUV);"}).join("\n")+"\n    gl_FragColor = total + texture2D(tex, vUV);\n  }\n  ",
uniforms:Object.assign({tex:c.prop("tex")},function(a){for(var d={},e=0;e<a.length;e++)d["tex_"+e]=a[e];return d}(q)),framebuffer:c.prop("fbo")}),r=c({frag:"\n  precision mediump float;\n  #define PI 3.14159265359\n\n  uniform sampler2D tex;\n  uniform sampler2D palette;\n  uniform float ditherMagnitude;\n  uniform float time;\n  varying vec2 vUV;\n\n  highp float rand( const in vec2 uv, const in float t ) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n    return fract(sin(sn) * c + t);\n  }\n\n  void main() {\n    float value = texture2D( tex, vUV ).r - rand( gl_FragCoord.xy, time ) * ditherMagnitude;\n    gl_FragColor = texture2D(palette, vec2(value, 0.));\n  }\n  ",
uniforms:{ditherMagnitude:.05,palette:c.prop("palette"),tex:a,time:c.context("time")}}),B=c({vert:"\n  precision mediump float;\n  attribute vec2 aPosition;\n  varying vec2 vUV;\n  void main() {\n    vUV = 0.5 * (aPosition + 1.0);\n    gl_Position = vec4(aPosition, 0, 1);\n  }",attributes:{aPosition:[-4,-4,4,-4,0,4]},uniforms:{lastState:function(a){return W[a.tick%2]},numColumns:60,glyphTextureColumns:8},depth:{enable:!1},count:3});y("resl")({manifest:{glyphMSDF:{type:"image",src:"assets/matrix_glyphs_msdf.png",
parser:function(a){return c.texture({data:a,mag:"linear",min:"linear",flipY:!0})}},palette:{type:"image",src:"assets/matrix_palette.png",parser:function(a){return c.texture({data:a,mag:"linear",min:"linear"})}}},onDone:function(F){B({},t);c.frame(function(c){var G=c.viewportWidth;c=c.viewportHeight;A.resize(G,c);a.resize(G,c);n(e,G,c,.5);n(d,G,c,.5);n(q,G,c,.5);B(function(){t();ja(F);e.forEach(function(a){return wa({fbo:a,tex:A})});d.forEach(function(a,d){return K({fbo:a,tex:e[d],direction:[1,0]})});
q.forEach(function(a,e){return K({fbo:a,tex:d[e],direction:[0,1]})});L({tex:A,fbo:a});r(F)})})}})},{"../regl":41,"canvas-fit":38,resl:40}],2:[function(y,C,Ta){function c(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var W=y("./util/sorted-object-keys"),n=y("./util/check"),A=y("./util/values"),e=y("./constants/dtypes.json"),d=y("./util/is-typed-array"),q=y("./util/is-ndarray"),a=y("./constants/primitives.json"),
t="attributes elements offset count primitive instances".split(" ");C.exports=function(ja,wa,K,L,r,B,F){function x(a){if(a!==P.currentVAO){var d=wa.oes_vertex_array_object;a?d.bindVertexArrayOES(a.vao):d.bindVertexArrayOES(null);P.currentVAO=a}}function G(a){if(a!==P.currentVAO){if(a)a.bindAttrs();else{for(var d=wa.angle_instanced_arrays,e=0;e<g.length;++e){var f=g[e];f.buffer?(ja.enableVertexAttribArray(e),f.buffer.bind(),ja.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offfset),d&&
f.divisor&&d.vertexAttribDivisorANGLE(e,f.divisor)):(ja.disableVertexAttribArray(e),ja.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}F.elements?ja.bindBuffer(34963,F.elements.buffer.buffer):ja.bindBuffer(34963,null)}P.currentVAO=a}}function ka(){A(v).forEach(function(a){a.destroy()})}function O(){this.id=++f;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=wa.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;v[this.id]=
this;this.buffers=[]}function Ca(){wa.oes_vertex_array_object&&A(v).forEach(function(a){a.refresh()})}var h=K.maxAttributes,g=Array(h);for(K=0;K<h;++K)g[K]=new c;var f=0,v={},P={Record:c,scope:{},state:g,currentVAO:null,targetVAO:null,restore:wa.oes_vertex_array_object?Ca:function(){},createVAO:function(f){function m(f){var S;if(Array.isArray(f))S=f,g.elements&&g.ownsElements&&g.elements.destroy(),g.elements=null,g.ownsElements=!1,g.offset=0,g.count=0,g.instances=-1,g.primitive=4;else{n("object"===
typeof f,"invalid arguments for create vao");n("attributes"in f,"must specify attributes for vao");if(f.elements){var b=f.elements;g.ownsElements?("function"===typeof b&&"elements"===b._reglType?g.elements.destroy():g.elements(b),g.ownsElements=!1):B.getElements(f.elements)?(g.elements=f.elements,g.ownsElements=!1):(g.elements=B.create(f.elements),g.ownsElements=!0)}else g.elements=null,g.ownsElements=!1;S=f.attributes;g.offset=0;g.count=-1;g.instances=-1;g.primitive=4;g.elements&&(g.count=g.elements._elements.vertCount,
g.primitive=g.elements._elements.primType);"offset"in f&&(g.offset=f.offset|0);"count"in f&&(g.count=f.count|0);"instances"in f&&(g.instances=f.instances|0);"primitive"in f&&(n(f.primitive in a,"bad primitive type: "+f.primitive),g.primitive=a[f.primitive]);n.optional(function(){for(var a=W(f),b=0;b<a.length;++b)n(0<=t.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+t)});n(Array.isArray(S),"attributes must be an array")}n(S.length<h,"too many attributes");n(0<S.length,"must specify at least one attribute");
var b={},k=g.attributes;k.length=S.length;for(var Y=0;Y<S.length;++Y){var v=S[Y],x=k[Y]=new c,G=v.data||v;if(Array.isArray(G)||d(G)||q(G)){var P;g.buffers[Y]&&(P=g.buffers[Y],d(G)&&P._buffer.byteLength>=G.byteLength?P.subdata(G):(P.destroy(),g.buffers[Y]=null));g.buffers[Y]||(P=g.buffers[Y]=r.create(v,34962,!1,!0));x.buffer=r.getBuffer(P);x.size=x.buffer.dimension|0;x.normalized=!1;x.type=x.buffer.dtype;x.offset=0;x.stride=0;x.divisor=0;x.state=1;b[Y]=1}else r.getBuffer(v)?(x.buffer=r.getBuffer(v),
x.size=x.buffer.dimension|0,x.normalized=!1,x.type=x.buffer.dtype,x.offset=0,x.stride=0,x.divisor=0,x.state=1):r.getBuffer(v.buffer)?(x.buffer=r.getBuffer(v.buffer),x.size=(+v.size||x.buffer.dimension)|0,x.normalized=!!v.normalized||!1,"type"in v?(n.parameter(v.type,e,"invalid buffer type"),x.type=e[v.type]):x.type=x.buffer.dtype,x.offset=(v.offset||0)|0,x.stride=(v.stride||0)|0,x.divisor=(v.divisor||0)|0,x.state=1,n(1<=x.size&&4>=x.size,"size must be between 1 and 4"),n(0<=x.offset,"invalid offset"),
n(0<=x.stride&&255>=x.stride,"stride must be between 0 and 255"),n(0<=x.divisor,"divisor must be positive"),n(!x.divisor||!!wa.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in v?(n(0<Y,"first attribute must not be a constant"),x.x=+v.x||0,x.y=+v.y||0,x.z=+v.z||0,x.w=+v.w||0,x.state=2):n(!1,"invalid attribute spec for location "+Y)}for(P=0;P<g.buffers.length;++P)!b[P]&&g.buffers[P]&&(g.buffers[P].destroy(),g.buffers[P]=null);g.refresh();return m}var g=new O;L.vaoCount+=
1;m.destroy=function(){for(var a=0;a<g.buffers.length;++a)g.buffers[a]&&g.buffers[a].destroy();g.buffers.length=0;g.ownsElements&&(g.elements.destroy(),g.elements=null,g.ownsElements=!1);g.destroy()};m._vao=g;m._reglType="vao";return m(f)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var d=0;d<g.length;++d){var e=g[d];e.buffer===a&&(ja.disableVertexAttribArray(d),e.buffer=null)}},setVAO:wa.oes_vertex_array_object?x:G,clear:wa.oes_vertex_array_object?
ka:function(){}};O.prototype.bindAttrs=function(){for(var a=wa.angle_instanced_arrays,d=this.attributes,e=0;e<d.length;++e){var f=d[e];f.buffer?(ja.enableVertexAttribArray(e),ja.bindBuffer(34962,f.buffer.buffer),ja.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offset),a&&f.divisor&&a.vertexAttribDivisorANGLE(e,f.divisor)):(ja.disableVertexAttribArray(e),ja.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}for(a=d.length;a<h;++a)ja.disableVertexAttribArray(a);(a=B.getElements(this.elements))?ja.bindBuffer(34963,
a.buffer.buffer):ja.bindBuffer(34963,null)};O.prototype.refresh=function(){var a=wa.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),P.currentVAO=null,a.bindVertexArrayOES(null))};O.prototype.destroy=function(){if(this.vao){var a=wa.oes_vertex_array_object;this===P.currentVAO&&(P.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);v[this.id]&&(delete v[this.id],
--L.vaoCount)};return P}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(y,C,Ta){function c(a){return K[Object.prototype.toString.call(a)]|0}function W(a,d){for(var e=0;e<d.length;++e)a[e]=d[e]}function n(a,d,e,c,q,t,h){for(var g=0,f=0;f<e;++f)for(var v=0;v<c;++v)a[g++]=d[q*f+t*v+h]}var A=y("./util/sorted-object-keys"),e=y("./util/check"),d=y("./util/is-typed-array"),
q=y("./util/is-ndarray"),a=y("./util/values"),t=y("./util/pool");Ta=y("./util/flatten");var ja=Ta.flatten,wa=Ta.shape,K=y("./constants/arraytypes.json"),L=y("./constants/dtypes.json"),r=y("./constants/usage.json"),B=[];B[5120]=1;B[5122]=2;B[5124]=4;B[5121]=1;B[5123]=2;B[5125]=4;B[5126]=4;C.exports=function(K,x,G,ka){function O(a){this.id=f++;this.buffer=K.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;G.profile&&(this.stats=
{size:0})}function Ca(a,d,e){a.byteLength=d.byteLength;K.bufferData(a.type,d,e)}function h(a,f,g,h,v,b){a.usage=g;if(Array.isArray(f)){if(a.dtype=h||5126,0<f.length)if(Array.isArray(f[0])){v=wa(f);for(var k=h=1;k<v.length;++k)h*=v[k];a.dimension=h;f=ja(f,v,a.dtype);Ca(a,f,g);b?a.persistentData=f:t.freeType(f)}else"number"===typeof f[0]?(a.dimension=v,v=t.allocType(a.dtype,f.length),W(v,f),Ca(a,v,g),b?a.persistentData=v:t.freeType(v)):d(f[0])?(a.dimension=f[0].length,a.dtype=h||c(f[0])||5126,f=ja(f,
[f.length,f[0].length],a.dtype),Ca(a,f,g),b?a.persistentData=f:t.freeType(f)):e.raise("invalid buffer data")}else if(d(f))a.dtype=h||c(f),a.dimension=v,Ca(a,f,g),b&&(a.persistentData=new Uint8Array(new Uint8Array(f.buffer)));else if(q(f)){v=f.shape;var Y=f.stride,k=f.offset,x=0,r=0,P=0,G=0;1===v.length?(x=v[0],r=1,P=Y[0],G=0):2===v.length?(x=v[0],r=v[1],P=Y[0],G=Y[1]):e.raise("invalid shape");a.dtype=h||c(f.data)||5126;a.dimension=r;v=t.allocType(a.dtype,x*r);n(v,f.data,x,r,P,G,k);Ca(a,v,g);b?a.persistentData=
v:t.freeType(v)}else f instanceof ArrayBuffer?(a.dtype=5121,a.dimension=v,Ca(a,f,g),b&&(a.persistentData=new Uint8Array(new Uint8Array(f)))):e.raise("invalid buffer data")}function g(a){x.bufferCount--;ka(a);var d=a.buffer;e(d,"buffer must not be deleted already");K.deleteBuffer(d);a.buffer=null;delete v[a.id]}var f=0,v={};O.prototype.bind=function(){K.bindBuffer(this.type,this.buffer)};O.prototype.destroy=function(){g(this)};var P=[];G.profile&&(x.getTotalBufferSize=function(){var a=0;A(v).forEach(function(d){a+=
v[d].stats.size});return a});return{create:function(a,f,P,I){function A(a){var b=35044,f=null,g=0,m=0,c=1;Array.isArray(a)||d(a)||q(a)||a instanceof ArrayBuffer?f=a:"number"===typeof a?g=a|0:a&&(e.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(e(null===f||Array.isArray(f)||d(f)||q(f),"invalid data for buffer"),f=a.data),"usage"in a&&(e.parameter(a.usage,r,"invalid buffer usage"),b=r[a.usage]),"type"in a&&(e.parameter(a.type,L,"invalid buffer type"),m=L[a.type]),
"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),c=a.dimension|0),"length"in a&&(e.nni(g,"buffer length must be a nonnegative integer"),g=a.length|0));k.bind();f?h(k,f,b,m,c,I):(g&&K.bufferData(k.type,g,b),k.dtype=m||5121,k.usage=b,k.dimension=c,k.byteLength=g);G.profile&&(k.stats.size=k.byteLength*B[k.dtype]);return A}function b(a,b){e(b+a.byteLength<=k.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+
b+" to a buffer of size "+k.byteLength);K.bufferSubData(k.type,b,a)}x.bufferCount++;var k=new O(f);v[k.id]=k;P||A(a);A._reglType="buffer";A._buffer=k;A.subdata=function(a,f){var g=(f||0)|0,m;k.bind();if(d(a)||a instanceof ArrayBuffer)b(a,g);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var h=t.allocType(k.dtype,a.length);W(h,a);b(h,g);t.freeType(h)}else Array.isArray(a[0])||d(a[0])?(m=wa(a),h=ja(a,m,k.dtype),b(h,g),t.freeType(h)):e.raise("invalid buffer data")}else if(q(a)){m=
a.shape;var v=a.stride,x=h=0,r=0,P=0;1===m.length?(h=m[0],x=1,r=v[0],P=0):2===m.length?(h=m[0],x=m[1],r=v[0],P=v[1]):e.raise("invalid shape");m=Array.isArray(a.data)?k.dtype:c(a.data);m=t.allocType(m,h*x);n(m,a.data,h,x,r,P,a.offset);b(m,g);t.freeType(m)}else e.raise("invalid data for buffer subdata");return A};G.profile&&(A.stats=k.stats);A.destroy=function(){g(k)};return A},createStream:function(a,d){var f=P.pop();f||(f=new O(a));f.bind();h(f,d,35040,0,1,!1);return f},destroyStream:function(a){P.push(a)},
clear:function(){a(v).forEach(g);P.forEach(g)},getBuffer:function(a){return a&&a._buffer instanceof O?a._buffer:null},restore:function(){a(v).forEach(function(a){a.buffer=K.createBuffer();K.bindBuffer(a.type,a.buffer);K.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:h}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,
"./util/values":36}],4:[function(y,C,Ta){C.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(y,C,Ta){C.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(y,C,Ta){C.exports=
{points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(y,C,Ta){C.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(y,C,Ta){function c(a){return Array.isArray(a)||K(a)||L(a)}function W(a){return a.sort(function(a,d){return"viewport"===a?-1:"viewport"===d?1:a<d?-1:1})}function n(a,d,f,e){this.thisDep=a;this.contextDep=d;this.propDep=f;this.append=e}function A(a){return a&&!(a.thisDep||a.contextDep||
a.propDep)}function e(a){return new n(!1,!1,!1,a)}function d(a,d){var f=a.type;if(0===f)return f=a.data.length,new n(!0,1<=f,2<=f,d);if(4===f)return f=a.data,new n(f.thisDep,f.contextDep,f.propDep,d);if(5===f)return new n(!1,!1,!1,d);if(6===f){for(var e=f=!1,g=!1,b=0;b<a.data.length;++b){var k=a.data[b];1===k.type?g=!0:2===k.type?e=!0:3===k.type?f=!0:0===k.type?(f=!0,k=k.data,1<=k&&(e=!0),2<=k&&(g=!0)):4===k.type&&(f=f||k.data.thisDep,e=e||k.data.contextDep,g=g||k.data.propDep)}return new n(f,e,g,
d)}return new n(3===f,2===f,1===f,d)}var q=y("./util/sorted-object-keys"),a=y("./util/check"),t=y("./util/extend"),ja=y("./util/codegen"),wa=y("./util/loop"),K=y("./util/is-typed-array"),L=y("./util/is-ndarray"),r=y("./util/is-array-like"),B=y("./dynamic"),F=y("./constants/primitives.json"),x=y("./constants/dtypes.json"),G=["x","y","z","w"],ka="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),O={0:0,1:1,zero:0,
one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ca="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
h={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},g={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},f={frag:35632,vert:35633},v={cw:2304,ccw:2305},P=new n(!1,!1,!1,function(){});C.exports=function(K,m,L,I,da,b,k,Y,la,Oe,mb,Eb,qa,Oa,Z){function H(a){return a.replace(".","_")}function M(a,p,b){var d=H(a);
ca.push(a);z[d]=E[d]=!!b;T[d]=p}function R(a,p,b){var d=H(a);ca.push(a);Array.isArray(b)?(E[d]=b.slice(),z[d]=b.slice()):E[d]=z[d]=b;za[d]=p}function y(){var b=ja(),p=b.link,d=b.global;b.id=lc++;b.batchId="0";var f=p(ma),e=b.shared={props:"a0"};q(ma).forEach(function(a){e[a]=d.def(f,".",a)});a.optional(function(){b.CHECK=p(a);b.commandStr=a.guessCommand();b.command=p(b.commandStr);b.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",p(d),",",this.command,");")};l.invalidBlendCombinations=
Ca});var T=b.next={},g=b.current={};q(za).forEach(function(a){Array.isArray(E[a])&&(T[a]=d.def(e.next,".",a),g[a]=d.def(e.current,".",a))});var k=b.constants={};q(l).forEach(function(a){k[a]=d.def(JSON.stringify(l[a]))});b.invoke=function(a,d){switch(d.type){case 0:var f=["this",e.context,e.props,b.batchId];return a.def(p(d.data),".call(",f.slice(0,Math.max(d.data.length+1,4)),")");case 1:return a.def(e.props,d.data);case 2:return a.def(e.context,d.data);case 3:return a.def("this",d.data);case 4:return d.data.append(b,
a),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(p){return b.invoke(a,p)})}};b.attribCache={};var bd={};b.scopeAttrib=function(a){a=m.id(a);if(a in bd)return bd[a];var b=Oe.scope[a];b||(b=Oe.scope[a]=new ga);return bd[a]=p(b)};return b}function N(a){var p=a["static"];a=a.dynamic;var b;if("profile"in p){var f=!!p.profile;b=e(function(a,p){return f});b.enable=f}else if("profile"in a){var l=a.profile;b=d(l,function(a,p){return a.invoke(p,l)})}return b}function Zb(b,p){var f=
b["static"],l=b.dynamic;if("framebuffer"in f){var T=f.framebuffer;return T?(T=Y.getFramebuffer(T),a.command(T,"invalid framebuffer object"),e(function(a,p){var b=a.link(T),d=a.shared;p.set(d.framebuffer,".next",b);d=d.context;p.set(d,".framebufferWidth",b+".width");p.set(d,".framebufferHeight",b+".height");return b})):e(function(a,b){var p=a.shared;b.set(p.framebuffer,".next","null");p=p.context;b.set(p,".framebufferWidth",p+".drawingBufferWidth");b.set(p,".framebufferHeight",p+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var g=l.framebuffer;return d(g,function(p,b){var d=p.invoke(b,g),f=p.shared,l=f.framebuffer,e=b.def(l,".getFramebuffer(",d,")");a.optional(function(){p.assert(b,"!"+d+"||"+e,"invalid framebuffer object")});b.set(l,".next",e);f=f.context;b.set(f,".framebufferWidth",e+"?"+e+".width:"+f+".drawingBufferWidth");b.set(f,".framebufferHeight",e+"?"+e+".height:"+f+".drawingBufferHeight");return e})}return null}function Ja(b,p,f){function l(b){if(b in e){var X=e[b];a.commandType(X,
"object","invalid "+b,f.commandStr);var g=!0,k=X.x|0,h=X.y|0,m,c;"width"in X?(m=X.width|0,a.command(0<=m,"invalid "+b,f.commandStr)):g=!1;"height"in X?(c=X.height|0,a.command(0<=c,"invalid "+b,f.commandStr)):g=!1;return new n(!g&&p&&p.thisDep,!g&&p&&p.contextDep,!g&&p&&p.propDep,function(a,b){var p=a.shared.context,d=m;"width"in X||(d=b.def(p,".","framebufferWidth","-",k));var f=c;"height"in X||(f=b.def(p,".","framebufferHeight","-",h));return[k,h,d,f]})}if(b in T){var v=T[b],g=d(v,function(p,d){var f=
p.invoke(d,v);a.optional(function(){p.assert(d,f+"&&typeof "+f+'==="object"',"invalid "+b)});var l=p.shared.context,e=d.def(f,".x|0"),X=d.def(f,".y|0"),g=d.def('"width" in ',f,"?",f,".width|0:","(",l,".","framebufferWidth","-",e,")"),T=d.def('"height" in ',f,"?",f,".height|0:","(",l,".","framebufferHeight","-",X,")");a.optional(function(){p.assert(d,g+">=0&&"+T+">=0","invalid "+b)});return[e,X,g,T]});p&&(g.thisDep=g.thisDep||p.thisDep,g.contextDep=g.contextDep||p.contextDep,g.propDep=g.propDep||p.propDep);
return g}return p?new n(p.thisDep,p.contextDep,p.propDep,function(a,b){var p=a.shared.context;return[0,0,b.def(p,".","framebufferWidth"),b.def(p,".","framebufferHeight")]}):null}var e=b["static"],T=b.dynamic;if(b=l("viewport")){var g=b;b=new n(b.thisDep,b.contextDep,b.propDep,function(a,b){var p=g.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",p[2]);b.set(d,".viewportHeight",p[3]);return p})}return{viewport:b,scissor_box:l("scissor.box")}}function Q(b,p){var d=b["static"];if("string"===typeof d.frag&&
"string"===typeof d.vert){if(0<q(p.dynamic).length)return null;var d=p["static"],f=q(d);if(0<f.length&&"number"===typeof d[f[0]]){for(var l=[],e=0;e<f.length;++e)a("number"===typeof d[f[e]],"must specify all vertex attribute locations when using vaos"),l.push([d[f[e]]|0,f[e]]);return l}}return null}function u(b,p,l){function g(b){if(b in T){var p=m.id(T[b]);a.optional(function(){mb.shader(f[b],p,a.guessCommand())});var l=e(function(){return p});l.id=p;return l}if(b in k){var X=k[b];return d(X,function(p,
d){var l=p.invoke(d,X),e=d.def(p.shared.strings,".id(",l,")");a.optional(function(){d(p.shared.shader,".shader(",f[b],",",e,",",p.command,");")});return e})}return null}var T=b["static"],k=b.dynamic,h=g("frag"),c=g("vert"),bd=null;A(h)&&A(c)?(bd=mb.program(c.id,h.id,null,l),b=e(function(a,b){return a.link(bd)})):b=new n(h&&h.thisDep||c&&c.thisDep,h&&h.contextDep||c&&c.contextDep,h&&h.propDep||c&&c.propDep,function(b,p){var d=b.shared.shader,f;f=h?h.append(b,p):p.def(d,".","frag");var l;l=c?c.append(b,
p):p.def(d,".","vert");var e=d+".program("+l+","+f;a.optional(function(){e+=","+b.command});return p.def(e+")")});return{frag:h,vert:c,progVar:b,program:bd}}function ha(f,p){function l(b,f){if(b in g){var X=g[b]|0;f?k.offset=X:k.instances=X;a.command(!f||0<=X,"invalid "+b,p.commandStr);return e(function(a,b){f&&(a.OFFSET=X);return X})}if(b in T){var td=T[b];return d(td,function(p,d){var l=p.invoke(d,td);f&&(p.OFFSET=l,a.optional(function(){p.assert(d,l+">=0","invalid "+b)}));return l})}if(f){if(bd)return e(function(a,
b){return a.OFFSET=0});if(h)return new n(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(h)return new n(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var g=f["static"],T=f.dynamic,k={},h=!1,m=function(){if("vao"in g){var a=g.vao;null!==a&&null===Oe.getVAO(a)&&(a=Oe.createVAO(a));h=!0;k.vao=a;return e(function(b){var p=
Oe.getVAO(a);return p?b.link(p):"null"})}if("vao"in T){h=!0;var b=T.vao;return d(b,function(a,p){var d=a.invoke(p,b);return p.def(a.shared.vao+".getVAO("+d+")")})}return null}(),bd=!1,v=function(){if("elements"in g){var f=g.elements;k.elements=f;if(c(f)){var l=k.elements=b.create(f,!0),f=b.getElements(l);bd=!0}else f&&(f=b.getElements(f),bd=!0,a.command(f,"invalid elements",p.commandStr));l=e(function(a,b){if(f){var p=a.link(f);return a.ELEMENTS=p}return a.ELEMENTS=null});l.value=f;return l}if("elements"in
T){bd=!0;var X=T.elements;return d(X,function(b,p){var d=b.shared,f=d.isBufferArgs,d=d.elements,l=b.invoke(p,X),e=p.def("null"),f=p.def(f,"(",l,")"),g=b.cond(f).then(e,"=",d,".createStream(",l,");")["else"](e,"=",d,".getElements(",l,");");a.optional(function(){b.assert(g["else"],"!"+l+"||"+e,"invalid elements")});p.entry(g);p.exit(b.cond(f).then(d,".destroyStream(",e,");"));return b.ELEMENTS=e})}return h?new n(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),td=l("offset",!0),z=function(){if("primitive"in g){var b=g.primitive;k.primitive=b;a.commandParameter(b,F,"invalid primitve",p.commandStr);return e(function(a,p){return F[b]})}if("primitive"in T){var f=T.primitive;return d(f,function(b,p){var d=b.constants.primTypes,l=b.invoke(p,f);a.optional(function(){b.assert(p,l+" in "+d,"invalid primitive, must be one of "+q(F))});return p.def(d,"[",l,"]")})}return bd?A(v)?
v.value?e(function(a,b){return b.def(a.ELEMENTS,".primType")}):e(function(){return 4}):new n(v.thisDep,v.contextDep,v.propDep,function(a,b){var p=a.ELEMENTS;return b.def(p,"?",p,".primType:",4)}):h?new n(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),u=function(){if("count"in g){var b=g.count|0;k.count=b;a.command("number"===typeof b&&0<=b,"invalid vertex count",p.commandStr);return e(function(){return b})}if("count"in
T){var f=T.count;return d(f,function(b,p){var d=b.invoke(p,f);a.optional(function(){b.assert(p,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(bd){if(A(v)){if(v)return td?new n(td.thisDep,td.contextDep,td.propDep,function(b,p){var d=p.def(b.ELEMENTS,".vertCount-",b.OFFSET);a.optional(function(){b.assert(p,d+">=0","invalid vertex offset/element buffer too small")});return d}):e(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var l=e(function(){return-1});
a.optional(function(){l.MISSING=!0});return l}var X=new n(v.thisDep||td.thisDep,v.contextDep||td.contextDep,v.propDep||td.propDep,function(a,b){var p=a.ELEMENTS;return a.OFFSET?b.def(p,"?",p,".vertCount-",a.OFFSET,":-1"):b.def(p,"?",p,".vertCount:-1")});a.optional(function(){X.DYNAMIC=!0});return X}return h?new n(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),ma=l("instances",!1);return{elements:v,primitive:z,
count:u,instances:ma,offset:td,vao:m,vaoActive:h,elementsActive:bd,"static":k}}function ba(b,p){var f=b["static"],l=b.dynamic,T={};ca.forEach(function(b){function X(a,p){if(b in f){var g=a(f[b]);T[k]=e(function(){return g})}else if(b in l){var h=l[b];T[k]=d(h,function(a,b){return p(a,b,a.invoke(b,h))})}}var k=H(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return X(function(d){a.commandType(d,
"boolean",b,p.commandStr);return d},function(p,d,f){a.optional(function(){p.assert(d,"typeof "+f+'==="boolean"',"invalid flag "+b,p.commandStr)});return f});case "depth.func":return X(function(d){a.commandParameter(d,h,"invalid "+b,p.commandStr);return h[d]},function(p,d,f){var l=p.constants.compareFuncs;a.optional(function(){p.assert(d,f+" in "+l,"invalid "+b+", must be one of "+q(h))});return d.def(l,"[",f,"]")});case "depth.range":return X(function(b){a.command(r(b)&&2===b.length&&"number"===typeof b[0]&&
"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",p.commandStr);return b},function(b,p,d){a.optional(function(){b.assert(p,b.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var f=p.def("+",d,"[0]"),l=p.def("+",d,"[1]");return[f,l]});case "blend.func":return X(function(b){a.commandType(b,"object","blend.func",p.commandStr);var d="srcRGB"in b?b.srcRGB:b.src,f="srcAlpha"in b?b.srcAlpha:
b.src,l="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;a.commandParameter(d,O,k+".srcRGB",p.commandStr);a.commandParameter(f,O,k+".srcAlpha",p.commandStr);a.commandParameter(l,O,k+".dstRGB",p.commandStr);a.commandParameter(b,O,k+".dstAlpha",p.commandStr);a.command(-1===Ca.indexOf(d+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+l+")",p.commandStr);return[O[d],O[l],O[f],O[b]]},function(p,d,f){function l(X,g){var T=d.def('"',X,g,'" in ',f,"?",f,".",X,g,":",f,".",
X);a.optional(function(){p.assert(d,T+" in "+e,"invalid "+b+"."+X+g+", must be one of "+q(O))});return T}var e=p.constants.blendFuncs;a.optional(function(){p.assert(d,f+"&&typeof "+f+'==="object"',"invalid blend func, must be an object")});var X=l("src","RGB"),g=l("dst","RGB");a.optional(function(){p.assert(d,p.constants.invalidBlendCombinations+".indexOf("+X+'+", "+'+g+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var T=d.def(e,"[",X,"]"),k=d.def(e,"[",l("src","Alpha"),"]"),
h=d.def(e,"[",g,"]"),m=d.def(e,"[",l("dst","Alpha"),"]");return[T,h,k,m]});case "blend.equation":return X(function(d){if("string"===typeof d)return a.commandParameter(d,ta,"invalid "+b,p.commandStr),[ta[d],ta[d]];if("object"===typeof d)return a.commandParameter(d.rgb,ta,b+".rgb",p.commandStr),a.commandParameter(d.alpha,ta,b+".alpha",p.commandStr),[ta[d.rgb],ta[d.alpha]];a.commandRaise("invalid blend.equation",p.commandStr)},function(p,d,f){var l=p.constants.blendEquations,e=d.def(),X=d.def(),g=p.cond("typeof ",
f,'==="string"');a.optional(function(){function a(b,d,f){p.assert(b,f+" in "+l,"invalid "+d+", must be one of "+q(ta))}a(g.then,b,f);p.assert(g["else"],f+"&&typeof "+f+'==="object"',"invalid "+b);a(g["else"],b+".rgb",f+".rgb");a(g["else"],b+".alpha",f+".alpha")});g.then(e,"=",X,"=",l,"[",f,"];");g["else"](e,"=",l,"[",f,".rgb];",X,"=",l,"[",f,".alpha];");d(g);return[e,X]});case "blend.color":return X(function(b){a.command(r(b)&&4===b.length,"blend.color must be a 4d array",p.commandStr);return wa(4,
function(a){return+b[a]})},function(b,p,d){a.optional(function(){b.assert(p,b.shared.isArrayLike+"("+d+")&&"+d+".length===4","blend.color must be a 4d array")});return wa(4,function(a){return p.def("+",d,"[",a,"]")})});case "stencil.mask":return X(function(b){a.commandType(b,"number",k,p.commandStr);return b|0},function(b,p,d){a.optional(function(){b.assert(p,"typeof "+d+'==="number"',"invalid stencil.mask")});return p.def(d,"|0")});case "stencil.func":return X(function(d){a.commandType(d,"object",
k,p.commandStr);var f=d.cmp||"keep",l=d.ref||0;d="mask"in d?d.mask:-1;a.commandParameter(f,h,b+".cmp",p.commandStr);a.commandType(l,"number",b+".ref",p.commandStr);a.commandType(d,"number",b+".mask",p.commandStr);return[h[f],l,d]},function(b,p,d){var f=b.constants.compareFuncs;a.optional(function(){function a(){b.assert(p,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(d+"&&typeof ",d,'==="object"');a('!("cmp" in ',d,")||(",d,".cmp in ",f,")")});var l=p.def('"cmp" in ',d,"?",f,"[",
d,".cmp]",":",7680),e=p.def(d,".ref|0"),g=p.def('"mask" in ',d,"?",d,".mask|0:-1");return[l,e,g]});case "stencil.opFront":case "stencil.opBack":return X(function(d){a.commandType(d,"object",k,p.commandStr);var f=d.fail||"keep",l=d.zfail||"keep";d=d.zpass||"keep";a.commandParameter(f,g,b+".fail",p.commandStr);a.commandParameter(l,g,b+".zfail",p.commandStr);a.commandParameter(d,g,b+".zpass",p.commandStr);return["stencil.opBack"===b?1029:1028,g[f],g[l],g[d]]},function(d,p,f){function l(X){a.optional(function(){d.assert(p,
'!("'+X+'" in '+f+")||("+f+"."+X+" in "+e+")","invalid "+b+"."+X+", must be one of "+q(g))});return p.def('"',X,'" in ',f,"?",e,"[",f,".",X,"]:",7680)}var e=d.constants.stencilOps;a.optional(function(){d.assert(p,f+"&&typeof "+f+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return X(function(b){a.commandType(b,"object",k,p.commandStr);var d=b.factor|0;b=b.units|0;a.commandType(d,"number",k+".factor",p.commandStr);
a.commandType(b,"number",k+".units",p.commandStr);return[d,b]},function(d,p,f){a.optional(function(){d.assert(p,f+"&&typeof "+f+'==="object"',"invalid "+b)});var l=p.def(f,".factor|0"),e=p.def(f,".units|0");return[l,e]});case "cull.face":return X(function(b){var d=0;"front"===b?d=1028:"back"===b&&(d=1029);a.command(!!d,k,p.commandStr);return d},function(b,d,p){a.optional(function(){b.assert(d,p+'==="front"||'+p+'==="back"',"invalid cull.face")});return d.def(p,'==="front"?',1028,":",1029)});case "lineWidth":return X(function(b){a.command("number"===
typeof b&&b>=I.lineWidthDims[0]&&b<=I.lineWidthDims[1],"invalid line width, must be a positive number between "+I.lineWidthDims[0]+" and "+I.lineWidthDims[1],p.commandStr);return b},function(b,d,p){a.optional(function(){b.assert(d,"typeof "+p+'==="number"&&'+p+">="+I.lineWidthDims[0]+"&&"+p+"<="+I.lineWidthDims[1],"invalid line width")});return p});case "frontFace":return X(function(b){a.commandParameter(b,v,k,p.commandStr);return v[b]},function(b,d,p){a.optional(function(){b.assert(d,p+'==="cw"||'+
p+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(p+'==="cw"?2304:2305')});case "colorMask":return X(function(b){a.command(r(b)&&4===b.length,"color.mask must be length 4 array",p.commandStr);return b.map(function(b){return!!b})},function(b,d,p){a.optional(function(){b.assert(d,b.shared.isArrayLike+"("+p+")&&"+p+".length===4","invalid color.mask")});return wa(4,function(b){return"!!"+p+"["+b+"]"})});case "sample.coverage":return X(function(b){a.command("object"===typeof b&&b,
k,p.commandStr);var d="value"in b?b.value:1;b=!!b.invert;a.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",p.commandStr);return[d,b]},function(b,d,p){a.optional(function(){b.assert(d,p+"&&typeof "+p+'==="object"',"invalid sample.coverage")});var f=d.def('"value" in ',p,"?+",p,".value:1"),l=d.def("!!",p,".invert");return[f,l]})}});return T}function Fa(b,p){var f=b["static"],l=b.dynamic,g={};q(f).forEach(function(b){var d=f[b],l;if("number"===typeof d||
"boolean"===typeof d)l=e(function(){return d});else if("function"===typeof d){var X=d._reglType;"texture2d"===X||"textureCube"===X?l=e(function(b){return b.link(d)}):"framebuffer"===X||"framebufferCube"===X?(a.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',p.commandStr),l=e(function(b){return b.link(d.color[0])})):a.commandRaise('invalid data for uniform "'+b+'"',p.commandStr)}else r(d)?l=e(function(p){return p.global.def("[",wa(d.length,function(f){a.command("number"===
typeof d[f]||"boolean"===typeof d[f],"invalid uniform "+b,p.commandStr);return d[f]}),"]")}):a.commandRaise('invalid or missing data for uniform "'+b+'"',p.commandStr);l.value=d;g[b]=l});q(l).forEach(function(b){var a=l[b];g[b]=d(a,function(b,d){return b.invoke(d,a)})});return g}function Ma(b,p){var f=b["static"],l=b.dynamic,g={};q(f).forEach(function(b){var d=f[b],l=m.id(b),X=new ga;if(c(d))X.state=1,X.buffer=da.getBuffer(da.create(d,34962,!1,!0)),X.type=0;else{var T=da.getBuffer(d);if(T)X.state=
1,X.buffer=T,X.type=0;else if(a.command("object"===typeof d&&d,"invalid data for attribute "+b,p.commandStr),"constant"in d){var k=d.constant;X.buffer="null";X.state=2;"number"===typeof k?X.x=k:(a.command(r(k)&&0<k.length&&4>=k.length,"invalid constant for attribute "+b,p.commandStr),G.forEach(function(b,a){a<k.length&&(X[b]=k[a])}))}else{T=c(d.buffer)?da.getBuffer(da.create(d.buffer,34962,!1,!0)):da.getBuffer(d.buffer);a.command(!!T,'missing buffer for attribute "'+b+'"',p.commandStr);var h=d.offset|
0;a.command(0<=h,'invalid offset for attribute "'+b+'"',p.commandStr);var v=d.stride|0;a.command(0<=v&&256>v,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',p.commandStr);var z=d.size|0;a.command(!("size"in d)||0<z&&4>=z,'invalid size for attribute "'+b+'", must be 1,2,3,4',p.commandStr);var u=!!d.normalized,ma=0;"type"in d&&(a.commandParameter(d.type,x,"invalid type for attribute "+b,p.commandStr),ma=x[d.type]);var w=d.divisor|0;a.optional(function(){"divisor"in d&&(a.command(0===
w||U,'cannot specify divisor for attribute "'+b+'", instancing not supported',p.commandStr),a.command(0<=w,'invalid divisor for attribute "'+b+'"',p.commandStr));var f=p.commandStr,l="buffer offset divisor normalized type size stride".split(" ");q(d).forEach(function(d){a.command(0<=l.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+b+'" (valid parameters are '+l+")",f)})});X.buffer=T;X.state=1;X.size=z;X.normalized=u;X.type=ma||T.dtype;X.offset=h;X.stride=v;X.divisor=w}}g[b]=e(function(b,
a){var d=b.attribCache;if(l in d)return d[l];var p={isStream:!1};q(X).forEach(function(b){p[b]=X[b]});X.buffer&&(p.buffer=b.link(X.buffer),p.type=p.type||p.buffer+".dtype");return d[l]=p})});q(l).forEach(function(b){var p=l[b];g[b]=d(p,function(d,f){function l(b){f(h[b],"=",X,".",b,"|0;")}var X=d.invoke(f,p),e=d.shared,g=d.constants,T=e.isBufferArgs,k=e.buffer;a.optional(function(){d.assert(f,X+"&&(typeof "+X+'==="object"||typeof '+X+'==="function")&&('+T+"("+X+")||"+k+".getBuffer("+X+")||"+k+".getBuffer("+
X+".buffer)||"+T+"("+X+'.buffer)||("constant" in '+X+"&&(typeof "+X+'.constant==="number"||'+e.isArrayLike+"("+X+".constant))))",'invalid dynamic attribute "'+b+'"')});var h={isStream:f.def(!1)},m=new ga;m.state=1;q(m).forEach(function(b){h[b]=f.def(""+m[b])});var c=h.buffer,v=h.type;f("if(",T,"(",X,")){",h.isStream,"=true;",c,"=",k,".createStream(",34962,",",X,");",v,"=",c,".dtype;","}else{",c,"=",k,".getBuffer(",X,");","if(",c,"){",v,"=",c,".dtype;",'}else if("constant" in ',X,"){",h.state,"=",
2,";","if(typeof "+X+'.constant === "number"){',h[G[0]],"=",X,".constant;",G.slice(1).map(function(b){return h[b]}).join("="),"=0;","}else{",G.map(function(b,a){return h[b]+"="+X+".constant.length>"+a+"?"+X+".constant["+a+"]:0;"}).join(""),"}}else{","if(",T,"(",X,".buffer)){",c,"=",k,".createStream(",34962,",",X,".buffer);","}else{",c,"=",k,".getBuffer(",X,".buffer);","}",v,'="type" in ',X,"?",g.glTypes,"[",X,".type]:",c,".dtype;",h.normalized,"=!!",X,".normalized;");l("size");l("offset");l("stride");
l("divisor");f("}}");f.exit("if(",h.isStream,"){",k,".destroyStream(",c,");","}");return h})});return g}function C(b){var a=b["static"],f=b.dynamic,l={};q(a).forEach(function(b){var d=a[b];l[b]=e(function(b,a){return"number"===typeof d||"boolean"===typeof d?""+d:b.link(d)})});q(f).forEach(function(b){var a=f[b];l[b]=d(a,function(b,d){return b.invoke(d,a)})});return l}function bb(b,d,f,l,e){function g(b){var a=c[b];a&&(z[b]=a)}var T=b["static"],k=b.dynamic;a.optional(function(){function b(p){q(p).forEach(function(b){a.command(0<=
d.indexOf(b),'unknown parameter "'+b+'"',e.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ca);b(T);b(k)});var h=Q(b,d),m=Zb(b,e),c=Ja(b,m,e),v=ha(b,e),z=ba(b,e),ma=u(b,e,h);g("viewport");g(H("scissor.box"));var w=0<q(z).length,m={framebuffer:m,draw:v,shader:ma,state:z,dirty:w,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=N(b,e);m.uniforms=Fa(f,e);m.drawVAO=m.scopeVAO=v.vao;if(!m.drawVAO&&ma.program&&!h&&L.angle_instanced_arrays&&
v["static"].elements){var x=!0;b=ma.program.attributes.map(function(b){b=d["static"][b];x=x&&!!b;return b});if(x&&0<b.length){var t=Oe.getVAO(Oe.createVAO({attributes:b,elements:v["static"].elements}));m.drawVAO=new n(null,null,null,function(b,a){return b.link(t)});m.useVAO=!0}}h?m.useVAO=!0:m.attributes=Ma(d,e);m.context=C(l,e);return m}function V(b,a,d){var f=b.shared.context,l=b.scope();q(d).forEach(function(e){a.save(f,"."+e);var g=d[e].append(b,a);Array.isArray(g)?l(f,".",e,"=[",g.join(),"];"):
l(f,".",e,"=",g,";")});a(l)}function sb(b,a,d,f){var l=b.shared,e=l.gl,g=l.framebuffer,T;fa&&(T=a.def(l.extensions,".webgl_draw_buffers"));var k=b.constants,l=k.drawBuffer,k=k.backBuffer;b=d?d.append(b,a):a.def(g,".next");f||a("if(",b,"!==",g,".cur){");a("if(",b,"){",e,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&a(T,".drawBuffersWEBGL(",l,"[",b,".colorAttachments.length]);");a("}else{",e,".bindFramebuffer(",36160,",null);");fa&&a(T,".drawBuffersWEBGL(",k,");");a("}",g,".cur=",b,";");f||
a("}")}function ea(b,a,d){var f=b.shared,l=f.gl,e=b.current,g=b.next,k=f.current,h=f.next,m=b.cond(k,".dirty");ca.forEach(function(a){a=H(a);if(!(a in d.state)){var p,f;if(a in g){p=g[a];f=e[a];var c=wa(E[a].length,function(b){return m.def(p,"[",b,"]")});m(b.cond(c.map(function(b,a){return b+"!=="+f+"["+a+"]"}).join("||")).then(l,".",za[a],"(",c,");",c.map(function(b,a){return f+"["+a+"]="+b}).join(";"),";"))}else p=m.def(h,".",a),c=b.cond(p,"!==",k,".",a),m(c),a in T?c(b.cond(p).then(l,".enable(",
T[a],");")["else"](l,".disable(",T[a],");"),k,".",a,"=",p,";"):c(l,".",za[a],"(",p,");",k,".",a,"=",p,";")}});0===q(d.state).length&&m(k,".dirty=false;");a(m)}function ra(b,a,d,f){var l=b.shared,e=b.current,g=l.current,k=l.gl;W(q(d)).forEach(function(l){var h=d[l];if(!f||f(h)){var m=h.append(b,a);if(T[l]){var c=T[l];A(h)?m?a(k,".enable(",c,");"):a(k,".disable(",c,");"):a(b.cond(m).then(k,".enable(",c,");")["else"](k,".disable(",c,");"));a(g,".",l,"=",m,";")}else if(r(m)){var v=e[l];a(k,".",za[l],
"(",m,");",m.map(function(b,a){return v+"["+a+"]="+b}).join(";"),";")}else a(k,".",za[l],"(",m,");",g,".",l,"=",m,";")}})}function ec(b,a){U&&(b.instancing=a.def(b.shared.extensions,".angle_instanced_arrays"))}function pc(b,a,d,f,l){function e(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(b){z=a.def();b(z,"=",e(),";");"string"===typeof l?b(m,".count+=",l,";"):b(m,".count++;");Oa&&(f?(u=a.def(),b(u,"=",v,".getNumPendingQueries();")):b(v,".beginQuery(",m,");"))}
function T(b){b(m,".cpuTime+=",e(),"-",z,";");Oa&&(f?b(v,".pushScopeStats(",u,",",v,".getNumPendingQueries(),",m,");"):b(v,".endQuery();"))}function k(b){var d=a.def(c,".profile");a(c,".profile=",b,";");a.exit(c,".profile=",d,";")}var h=b.shared,m=b.stats,c=h.current,v=h.timer;d=d.profile;var z,u;if(d){if(A(d)){d.enable?(g(a),T(a.exit),k("true")):k("false");return}d=d.append(b,a);k(d)}else d=a.def(c,".profile");h=b.block();g(h);a("if(",d,"){",h,"}");b=b.block();T(b);a.exit("if(",d,"){",b,"}")}function mc(b,
d,f,l,e){function g(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function T(a,f,l){function e(){d("if(!",c,".buffer){",h,".enableVertexAttribArray(",m,");}");var a=l.type,g;g=l.size?d.def(l.size,"||",f):f;d("if(",c,".type!==",a,"||",c,".size!==",g,"||",u.map(function(b){return c+"."+b+"!=="+l[b]}).join("||"),"){",h,".bindBuffer(",34962,",",v,".buffer);",h,".vertexAttribPointer(",[m,g,a,
l.normalized,l.stride,l.offset],");",c,".type=",a,";",c,".size=",g,";",u.map(function(b){return c+"."+b+"="+l[b]+";"}).join(""),"}");U&&(a=l.divisor,d("if(",c,".divisor!==",a,"){",b.instancing,".vertexAttribDivisorANGLE(",[m,a],");",c,".divisor=",a,";}"))}function g(){d("if(",c,".buffer){",h,".disableVertexAttribArray(",m,");",c,".buffer=null;","}if(",G.map(function(b,a){return c+"."+b+"!=="+z[a]}).join("||"),"){",h,".vertexAttrib4f(",m,",",z,");",G.map(function(b,a){return c+"."+b+"="+z[a]+";"}).join(""),
"}")}var h=k.gl,m=d.def(a,".location"),c=d.def(k.attributes,"[",m,"]");a=l.state;var v=l.buffer,z=[l.x,l.y,l.z,l.w],u=["buffer","normalized","offset","stride"];1===a?e():2===a?g():(d("if(",a,"===",1,"){"),e(),d("}else{"),g(),d("}"))}var k=b.shared;l.forEach(function(l){var k=l.name,h=f.attributes[k],m;if(h){if(!e(h))return;m=h.append(b,d)}else{if(!e(P))return;var c=b.scopeAttrib(k);a.optional(function(){b.assert(d,c+".state","missing attribute "+k)});m={};q(new ga).forEach(function(b){m[b]=d.def(c,
".",b)})}T(b.link(l),g(l.info.type),m)})}function ud(b,d,f,l,e,g){for(var T=b.shared,k=T.gl,h,c=0;c<l.length;++c){var v=l[c],z=v.name,u=v.info.type,ma=f.uniforms[z],v=b.link(v)+".location",w;if(ma){if(!e(ma))continue;if(A(ma)){var q=ma.value;a.command(null!==q&&"undefined"!==typeof q,'missing uniform "'+z+'"',b.commandStr);if(35678===u||35680===u)a.command("function"===typeof q&&(35678===u&&("texture2d"===q._reglType||"framebuffer"===q._reglType)||35680===u&&("textureCube"===q._reglType||"framebufferCube"===
q._reglType)),"invalid texture for uniform "+z,b.commandStr),ma=b.link(q._texture||q.color[0]._texture),d(k,".uniform1i(",v,",",ma+".bind());"),d.exit(ma,".unbind();");else if(35674===u||35675===u||35676===u){a.optional(function(){a.command(r(q),"invalid matrix for uniform "+z,b.commandStr);a.command(35674===u&&4===q.length||35675===u&&9===q.length||35676===u&&16===q.length,"invalid length for matrix uniform "+z,b.commandStr)});var ma=b.global.def("new Float32Array(["+Array.prototype.slice.call(q)+
"])"),x=2;35675===u?x=3:35676===u&&(x=4);d(k,".uniformMatrix",x,"fv(",v,",false,",ma,");")}else{switch(u){case 5126:a.commandType(q,"number","uniform "+z,b.commandStr);h="1f";break;case 35664:a.command(r(q)&&2===q.length,"uniform "+z,b.commandStr);h="2f";break;case 35665:a.command(r(q)&&3===q.length,"uniform "+z,b.commandStr);h="3f";break;case 35666:a.command(r(q)&&4===q.length,"uniform "+z,b.commandStr);h="4f";break;case 35670:a.commandType(q,"boolean","uniform "+z,b.commandStr);h="1i";break;case 5124:a.commandType(q,
"number","uniform "+z,b.commandStr);h="1i";break;case 35671:a.command(r(q)&&2===q.length,"uniform "+z,b.commandStr);h="2i";break;case 35667:a.command(r(q)&&2===q.length,"uniform "+z,b.commandStr);h="2i";break;case 35672:a.command(r(q)&&3===q.length,"uniform "+z,b.commandStr);h="3i";break;case 35668:a.command(r(q)&&3===q.length,"uniform "+z,b.commandStr);h="3i";break;case 35673:a.command(r(q)&&4===q.length,"uniform "+z,b.commandStr);h="4i";break;case 35669:a.command(r(q)&&4===q.length,"uniform "+z,
b.commandStr),h="4i"}d(k,".uniform",h,"(",v,",",r(q)?Array.prototype.slice.call(q):q,");")}continue}else w=ma.append(b,d)}else{if(!e(P))continue;w=d.def(T.uniforms,"[",m.id(z),"]")}35678===u?(a(!Array.isArray(w),"must specify a scalar prop for textures"),d("if(",w,"&&",w,'._reglType==="framebuffer"){',w,"=",w,".color[0];","}")):35680===u&&(a(!Array.isArray(w),"must specify a scalar prop for cube maps"),d("if(",w,"&&",w,'._reglType==="framebufferCube"){',w,"=",w,".color[0];","}"));a.optional(function(){function f(a,
l){b.assert(d,a,'bad data or missing for uniform "'+z+'".  '+l)}function l(b){a(!Array.isArray(w),"must not specify an array type for uniform");f("typeof "+w+'==="'+b+'"',"invalid type, expected "+b)}function e(d,l){Array.isArray(w)?a(w.length===d,"must have length "+d):f(T.isArrayLike+"("+w+")&&"+w+".length==="+d,"invalid vector, should have length "+d,b.commandStr)}function g(d){a(!Array.isArray(w),"must not specify a value type");f("typeof "+w+'==="function"&&'+w+'._reglType==="texture'+(3553===
d?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(u){case 5124:l("number");break;case 35667:e(2,"number");break;case 35668:e(3,"number");break;case 35669:e(4,"number");break;case 5126:l("number");break;case 35664:e(2,"number");break;case 35665:e(3,"number");break;case 35666:e(4,"number");break;case 35670:l("boolean");break;case 35671:e(2,"boolean");break;case 35672:e(3,"boolean");break;case 35673:e(4,"boolean");break;case 35674:e(4,"number");break;case 35675:e(9,"number");break;case 35676:e(16,
"number");break;case 35678:g(3553);break;case 35680:g(34067)}});ma=1;switch(u){case 35678:case 35680:ma=d.def(w,"._texture");d(k,".uniform1i(",v,",",ma,".bind());");d.exit(ma,".unbind();");continue;case 5124:case 35670:h="1i";break;case 35667:case 35671:h="2i";ma=2;break;case 35668:case 35672:h="3i";ma=3;break;case 35669:case 35673:h="4i";ma=4;break;case 5126:h="1f";break;case 35664:h="2f";ma=2;break;case 35665:h="3f";ma=3;break;case 35666:h="4f";ma=4;break;case 35674:h="Matrix2fv";break;case 35675:h=
"Matrix3fv";break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){d(k,".uniform",h,"(",v,",");var v=Math.pow(u-35674+2,2),t=b.global.def("new Float32Array(",v,")");Array.isArray(w)?d("false,(",wa(v,function(b){return t+"["+b+"]="+w[b]}),",",t,")"):d("false,(Array.isArray(",w,")||",w," instanceof Float32Array)?",w,":(",wa(v,function(b){return t+"["+b+"]="+w+"["+b+"]"}),",",t,")");d(");")}else{if(1<ma){for(var x=[],Y=[],za=0;za<ma;++za)Array.isArray(w)?Y.push(w[za]):Y.push(d.def(w+"["+za+"]")),g&&x.push(d.def());
g&&d("if(!",b.batchId,"||",x.map(function(b,a){return b+"!=="+Y[a]}).join("||"),"){",x.map(function(b,a){return b+"="+Y[a]+";"}).join(""));d(k,".uniform",h,"(",v,",",Y.join(","),");")}else a(!Array.isArray(w),"uniform value must not be an array"),g&&(ma=d.def(),d("if(!",b.batchId,"||",ma,"!==",w,"){",ma,"=",w,";")),d(k,".uniform",h,"(",v,",",w,");");g&&d("}")}}}function wc(b,d,f,l){function e(a){var g=c[a];return g?g.contextDep&&l.contextDynamic||g.propDep?g.append(b,f):g.append(b,d):d.def(m,".",
a)}function g(){function b(){f(w,".drawElementsInstancedANGLE(",[z,ma,x,u+"<<(("+x+"-5121)>>1)",q],");")}function a(){f(w,".drawArraysInstancedANGLE(",[z,u,ma,q],");")}v&&"null"!==v?t?b():(f("if(",v,"){"),b(),f("}else{"),a(),f("}")):a()}function T(){function b(){f(h+".drawElements("+[z,ma,x,u+"<<(("+x+"-5121)>>1)"]+");")}function a(){f(h+".drawArrays("+[z,u,ma]+");")}v&&"null"!==v?t?b():(f("if(",v,"){"),b(),f("}else{"),a(),f("}")):a()}var k=b.shared,h=k.gl,m=k.draw,c=l.draw,v=function(){var a=c.elements,
e=d;if(a){if(a.contextDep&&l.contextDynamic||a.propDep)e=f;a=a.append(b,e);c.elementsActive&&e("if("+a+")"+h+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=e.def(),e(a,"=",m,".","elements",";","if(",a,"){",h,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",k.vao,".currentVAO){",a,"=",b.shared.elements+".getElements("+k.vao,".currentVAO.elements);",oa?"":"if("+a+")"+h+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),z=e("primitive"),u=e("offset"),ma=function(){var e=c.count,g,
k=d;if(e){if(e.contextDep&&l.contextDynamic||e.propDep)k=f;g=e.append(b,k);a.optional(function(){e.MISSING&&b.assert(d,"false","missing vertex count");e.DYNAMIC&&b.assert(k,g+">=0","missing vertex count")})}else g=k.def(m,".","count"),a.optional(function(){b.assert(k,g+">=0","missing vertex count")});return g}();if("number"===typeof ma){if(0===ma)return}else f("if(",ma,"){"),f.exit("}");var q,w;U&&(q=e("instances"),w=b.instancing);var x=v+".type",t=c.elements&&A(c.elements)&&!c.vaoActive;U&&("number"!==
typeof q||0<=q)?"string"===typeof q?(f("if(",q,">0){"),g(),f("}else if(",q,"<0){"),T(),f("}")):g():T()}function aa(b,d,f,l,e){var g=y();e=g.proc("body",e);a.optional(function(){g.commandStr=d.commandStr;g.command=g.link(d.commandStr)});U&&(g.instancing=e.def(g.shared.extensions,".angle_instanced_arrays"));b(g,e,f,l);return g.compile().body}function J(b,a,d,f){ec(b,a);d.useVAO?d.drawVAO?a(b.shared.vao,".setVAO(",d.drawVAO.append(b,a),");"):a(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(a(b.shared.vao,
".setVAO(null);"),mc(b,a,d,f.attributes,function(){return!0}));ud(b,a,d,f.uniforms,function(){return!0},!1);wc(b,a,a,d)}function ia(b,a){var d=b.proc("draw",1);ec(b,d);V(b,d,a.context);sb(b,d,a.framebuffer);ea(b,d,a);ra(b,d,a.state);pc(b,d,a,!1,!0);var f=a.shader.progVar.append(b,d);d(b.shared.gl,".useProgram(",f,".program);");if(a.shader.program)J(b,d,a,a.shader.program);else{d(b.shared.vao,".setVAO(null);");var l=b.global.def("{}"),e=d.def(f,".id"),g=d.def(l,"[",e,"]");d(b.cond(g).then(g,".call(this,a0);")["else"](g,
"=",l,"[",e,"]=",b.link(function(d){return aa(J,b,a,d,1)}),"(",f,");",g,".call(this,a0);"))}0<q(a.state).length&&d(b.shared.current,".dirty=true;");b.shared.vao&&d(b.shared.vao,".setVAO(null);")}function Da(b,a,d,f){function l(){return!0}b.batchId="a1";ec(b,a);mc(b,a,d,f.attributes,l);ud(b,a,d,f.uniforms,l,!1);wc(b,a,a,d)}function tb(b,a,d,f){function l(b){return b.contextDep&&g||b.propDep}function e(b){return!l(b)}ec(b,a);var g=d.contextDep,k=a.def(),T=a.def();b.shared.props=T;b.batchId=k;var h=
b.scope(),m=b.scope();a(h.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",T,"=","a0","[",k,"];",m,"}",h.exit);d.needsContext&&V(b,m,d.context);d.needsFramebuffer&&sb(b,m,d.framebuffer);ra(b,m,d.state,l);d.profile&&l(d.profile)&&pc(b,m,d,!1,!0);f?(d.useVAO?d.drawVAO?l(d.drawVAO)?m(b.shared.vao,".setVAO(",d.drawVAO.append(b,m),");"):h(b.shared.vao,".setVAO(",d.drawVAO.append(b,h),");"):h(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(h(b.shared.vao,".setVAO(null);"),mc(b,h,d,f.attributes,e),mc(b,
m,d,f.attributes,l)),ud(b,h,d,f.uniforms,e,!1),ud(b,m,d,f.uniforms,l,!0),wc(b,h,m,d)):(a=b.global.def("{}"),f=d.shader.progVar.append(b,m),T=m.def(f,".id"),h=m.def(a,"[",T,"]"),m(b.shared.gl,".useProgram(",f,".program);","if(!",h,"){",h,"=",a,"[",T,"]=",b.link(function(a){return aa(Da,b,d,a,2)}),"(",f,");}",h,".call(this,a0[",k,"],",k,");"))}function Qc(b,a){function d(b){return b.contextDep&&l||b.propDep}var f=b.proc("batch",2);b.batchId="0";ec(b,f);var l=!1,e=!0;q(a.context).forEach(function(b){l=
l||a.context[b].propDep});l||(V(b,f,a.context),e=!1);var g=a.framebuffer,k=!1;g?(g.propDep?l=k=!0:g.contextDep&&l&&(k=!0),k||sb(b,f,g)):sb(b,f,null);a.state.viewport&&a.state.viewport.propDep&&(l=!0);ea(b,f,a);ra(b,f,a.state,function(b){return!d(b)});a.profile&&d(a.profile)||pc(b,f,a,!1,"a1");a.contextDep=l;a.needsContext=e;a.needsFramebuffer=k;e=a.shader.progVar;if(e.contextDep&&l||e.propDep)tb(b,f,a,null);else if(e=e.append(b,f),f(b.shared.gl,".useProgram(",e,".program);"),a.shader.program)tb(b,
f,a,a.shader.program);else{f(b.shared.vao,".setVAO(null);");var g=b.global.def("{}"),k=f.def(e,".id"),T=f.def(g,"[",k,"]");f(b.cond(T).then(T,".call(this,a0,a1);")["else"](T,"=",g,"[",k,"]=",b.link(function(d){return aa(tb,b,a,d,2)}),"(",e,");",T,".call(this,a0,a1);"))}0<q(a.state).length&&f(b.shared.current,".dirty=true;");b.shared.vao&&f(b.shared.vao,".setVAO(null);")}function xc(b,a){function d(e){var g=a.shader[e];g&&f.set(l.shader,"."+e,g.append(b,f))}var f=b.proc("scope",3);b.batchId="a2";var l=
b.shared,e=l.current;V(b,f,a.context);a.framebuffer&&a.framebuffer.append(b,f);W(q(a.state)).forEach(function(d){var e=a.state[d].append(b,f);r(e)?e.forEach(function(a,l){f.set(b.next[d],"["+l+"]",a)}):f.set(l.next,"."+d,e)});pc(b,f,a,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var e=a.draw[d];e&&f.set(l.draw,"."+d,""+e.append(b,f))});q(a.uniforms).forEach(function(d){var e=a.uniforms[d].append(b,f);Array.isArray(e)&&(e="["+e.join()+"]");f.set(l.uniforms,"["+m.id(d)+
"]",e)});q(a.attributes).forEach(function(d){var l=a.attributes[d].append(b,f),e=b.scopeAttrib(d);q(new ga).forEach(function(b){f.set(e,"."+b,l[b])})});a.scopeVAO&&f.set(l.vao,".targetVAO",a.scopeVAO.append(b,f));d("vert");d("frag");0<q(a.state).length&&(f(e,".dirty=true;"),f.exit(e,".dirty=true;"));f("a1(",b.shared.context,",a0,",b.batchId,");")}function D(b){if("object"===typeof b&&!r(b)){for(var a=q(b),d=0;d<a.length;++d)if(B.isDynamic(b[a[d]]))return!0;return!1}}function w(b,a,f){function l(b,
a){k.forEach(function(d){var f=e[d];B.isDynamic(f)&&(f=b.invoke(a,f),a(c,".",d,"=",f,";"))})}var e=a["static"][f];if(e&&D(e)){var g=b.global,k=q(e),T=!1,h=!1,m=!1,c=b.global.def("{}");k.forEach(function(a){var f=e[a];if(B.isDynamic(f))"function"===typeof f&&(f=e[a]=B.unbox(f)),a=d(f,null),T=T||a.thisDep,m=m||a.propDep,h=h||a.contextDep;else{g(c,".",a,"=");switch(typeof f){case "number":g(f);break;case "string":g('"',f,'"');break;case "object":Array.isArray(f)&&g("[",f.join(),"]");break;default:g(b.link(f))}g(";")}});
a.dynamic[f]=new B.DynamicVariable(4,{thisDep:T,contextDep:h,propDep:m,ref:c,append:l});delete a["static"][f]}}var ga=Oe.Record,ta={add:32774,subtract:32778,"reverse subtract":32779};L.ext_blend_minmax&&(ta.min=32775,ta.max=32776);var U=L.angle_instanced_arrays,fa=L.webgl_draw_buffers,oa=L.oes_vertex_array_object,E={dirty:!0,profile:Z.profile},z={},ca=[],T={},za={};M("dither",3024);M("blend.enable",3042);R("blend.color","blendColor",[0,0,0,0]);R("blend.equation","blendEquationSeparate",[32774,32774]);
R("blend.func","blendFuncSeparate",[1,0,1,0]);M("depth.enable",2929,!0);R("depth.func","depthFunc",513);R("depth.range","depthRange",[0,1]);R("depth.mask","depthMask",!0);R("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);R("cull.face","cullFace",1029);R("frontFace","frontFace",2305);R("lineWidth","lineWidth",1);M("polygonOffset.enable",32823);R("polygonOffset.offset","polygonOffset",[0,0]);M("sample.alpha",32926);M("sample.enable",32928);R("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",
2960);R("stencil.mask","stencilMask",-1);R("stencil.func","stencilFunc",[519,0,-1]);R("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);R("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);R("scissor.box","scissor",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);R("viewport","viewport",[0,0,K.drawingBufferWidth,K.drawingBufferHeight]);var ma={gl:K,context:qa,strings:m,next:z,current:E,draw:Eb,elements:b,buffer:da,shader:mb,attributes:Oe.state,vao:Oe,
uniforms:la,framebuffer:Y,extensions:L,timer:Oa,isBufferArgs:c},l={primTypes:F,compareFuncs:h,blendFuncs:O,blendEquations:ta,stencilOps:g,glTypes:x,orientationType:v};a.optional(function(){ma.isArrayLike=r});fa&&(l.backBuffer=[1029],l.drawBuffer=wa(I.maxDrawbuffers,function(b){return 0===b?[0]:wa(b,function(b){return 36064+b})}));var lc=0;return{next:z,current:E,procs:function(){var b=y(),a=b.proc("poll"),d=b.proc("refresh"),f=b.block();a(f);d(f);var l=b.shared,e=l.gl,g=l.next,k=l.current;f(k,".dirty=false;");
sb(b,a);sb(b,d,null,!0);var h;U&&(h=b.link(U));L.oes_vertex_array_object&&d(b.link(L.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<I.maxAttributes;++m){var c=d.def(l.attributes,"[",m,"]"),v=b.cond(c,".buffer");v.then(e,".enableVertexAttribArray(",m,");",e,".bindBuffer(",34962,",",c,".buffer.buffer);",e,".vertexAttribPointer(",m,",",c,".size,",c,".type,",c,".normalized,",c,".stride,",c,".offset);")["else"](e,".disableVertexAttribArray(",m,");",e,".vertexAttrib4f(",m,",",c,".x,",
c,".y,",c,".z,",c,".w);",c,".buffer=null;");d(v);U&&d(h,".vertexAttribDivisorANGLE(",m,",",c,".divisor);")}d(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");q(T).forEach(function(l){var h=T[l],m=f.def(g,".",l),c=b.block();c("if(",m,"){",e,".enable(",h,")}else{",e,".disable(",h,")}",k,".",l,"=",m,";");d(c);a("if(",m,"!==",k,".",l,"){",c,"}")});q(za).forEach(function(l){var T=za[l],h=E[l],m,c,v=b.block();v(e,".",T,"(");r(h)?(T=h.length,m=b.global.def(g,".",l),c=
b.global.def(k,".",l),v(wa(T,function(b){return m+"["+b+"]"}),");",wa(T,function(b){return c+"["+b+"]="+m+"["+b+"];"}).join("")),a("if(",wa(T,function(b){return m+"["+b+"]!=="+c+"["+b+"]"}).join("||"),"){",v,"}")):(m=f.def(g,".",l),c=f.def(k,".",l),v(m,");",k,".",l,"=",m,";"),a("if(",m,"!==",c,"){",v,"}"));d(v)});return b.compile()}(),compile:function(b,a,d,f,l){var e=y();e.stats=e.link(l);q(a["static"]).forEach(function(b){w(e,a,b)});ka.forEach(function(a){w(e,b,a)});var g=bb(b,a,d,f,e);ia(e,g);
xc(e,g);Qc(e,g);return t(e.compile(),{destroy:function(){g.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(y,C,Ta){function c(e,a){this.id=d++;this.type=e;this.data=a}function W(d){if(0===d.length)return[];var a=d.charAt(0),e=d.charAt(d.length-1);
if(1<d.length&&a===e&&('"'===a||"'"===a))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return W(d.substr(0,a.index)).concat(W(a[1])).concat(W(d.substr(a.index+a[0].length)));a=d.split(".");if(1===a.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(e=0;e<a.length;++e)d=d.concat(W(a[e]));return d}function n(d){return"["+W(d).join("][")+"]"}function A(d,a){if("function"===typeof d)return new c(0,
d);if("number"===typeof d||"boolean"===typeof d)return new c(5,d);if(Array.isArray(d))return new c(6,d.map(function(d,e){return A(d,a+"["+e+"]")}));if(d instanceof c)return d;e(!1,"invalid option type in uniform "+a)}var e=y("./util/check"),d=0;C.exports={DynamicVariable:c,define:function(d,a){return new c(d,n(a+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof c},unbox:A,accessor:n}},{"./util/check":21}],10:[function(y,C,Ta){var c=y("./util/check"),W=y("./util/is-typed-array"),
n=y("./util/is-ndarray"),A=y("./util/values"),e=y("./constants/primitives.json"),d=y("./constants/usage.json");C.exports=function(q,a,t,ja){function wa(a){this.id=B++;r[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function K(d,e,x,r,h,g,f){d.buffer.bind();var v;e?((v=f)||W(e)&&(!n(e)||W(e.data))||(v=a.oes_element_index_uint?5125:5123),t._initBuffer(d.buffer,e,x,v,3)):(q.bufferData(34963,g,x),d.buffer.dtype=v||5121,d.buffer.usage=x,d.buffer.dimension=3,d.buffer.byteLength=
g);v=f;if(!f){switch(d.buffer.dtype){case 5121:case 5120:v=5121;break;case 5123:case 5122:v=5123;break;case 5125:case 5124:v=5125;break;default:c.raise("unsupported type for element array")}d.buffer.dtype=v}d.type=v;c(5125!==v||!!a.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=h;0>e&&(e=d.buffer.byteLength,5123===v?e>>=1:5125===v&&(e>>=2));d.vertCount=e;e=r;0>r&&(e=4,r=d.buffer.dimension,1===r&&(e=0),2===r&&(e=1),3===r&&(e=4));d.primType=e}function L(a){ja.elementsCount--;
c(null!==a.buffer,"must not double destroy elements");delete r[a.id];a.buffer.destroy();a.buffer=null}var r={},B=0,F={uint8:5121,uint16:5123};a.oes_element_index_uint&&(F.uint32=5125);wa.prototype.bind=function(){this.buffer.bind()};var x=[];return{create:function(a,q){function x(a){if(a)if("number"===typeof a)r(a),h.primType=4,h.vertCount=a|0,h.type=5121;else{var f=null,v=35044,q=-1,t=-1,m=0,A=0;if(Array.isArray(a)||W(a)||n(a))f=a;else if(c.type(a,"object","invalid arguments for elements"),"data"in
a&&(f=a.data,c(Array.isArray(f)||W(f)||n(f),"invalid data for element buffer")),"usage"in a&&(c.parameter(a.usage,d,"invalid element buffer usage"),v=d[a.usage]),"primitive"in a&&(c.parameter(a.primitive,e,"invalid element buffer primitive"),q=e[a.primitive]),"count"in a&&(c("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),t=a.count|0),"type"in a&&(c.parameter(a.type,F,"invalid buffer type"),A=F[a.type]),"length"in a)m=a.length|0;else if(m=t,5123===A||5122===A)m*=2;else if(5125===
A||5124===A)m*=4;K(h,f,v,q,t,m,A)}else r(),h.primType=4,h.vertCount=0,h.type=5121;return x}var r=t.create(null,34963,!0),h=new wa(r._buffer);ja.elementsCount++;x(a);x._reglType="elements";x._elements=h;x.subdata=function(a,d){r.subdata(a,d);return x};x.destroy=function(){L(h)};return x},createStream:function(a){var d=x.pop();d||(d=new wa(t.create(null,34963,!0,!1)._buffer));K(d,a,35040,-1,-1,0,0);return d},destroyStream:function(a){x.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof
wa?a._elements:null},clear:function(){A(r).forEach(L)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(y,C,Ta){var c=y("./util/sorted-object-keys"),W=y("./util/check");C.exports=function(n,A){function e(a){W.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=d[a]=n.getExtension(a)}catch(c){}return!!e}for(var d={},q=0;q<A.extensions.length;++q){var a=A.extensions[q];
if(!e(a))return A.onDestroy(),A.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}A.optionalExtensions.forEach(e);return{extensions:d,restore:function(){c(d).forEach(function(a){if(d[a]&&!e(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(y,C,Ta){var c=y("./util/check"),W=y("./util/values"),n=y("./util/extend"),A=[6407,6408],e=[];e[6408]=4;e[6407]=
3;var d=[];d[5121]=1;d[5126]=4;d[36193]=2;var q=[32854,32855,36194,35907,34842,34843,34836],a={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};C.exports=function(t,ja,wa,K,L,r){function B(b,a,d){this.target=b;this.texture=a;this.renderbuffer=d;var f=b=0;a?(b=a.width,f=a.height):d&&(b=d.width,f=d.height);this.width=b;this.height=f}function F(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}
function x(b,a,d){if(b){if(b.texture){b=b.texture._texture;var f=Math.max(1,b.height);c(Math.max(1,b.width)===a&&f===d,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,c(b.width===a&&b.height===d,"inconsistent width/height for renderbuffer");b.refCount+=1}}function G(b,a){a&&(a.texture?t.framebufferTexture2D(36160,b,a.target,a.texture._texture.texture,0):t.framebufferRenderbuffer(36160,b,36161,a.renderbuffer._renderbuffer.renderbuffer))}function ka(b){var a=3553,
d=null,f=null,e=b;"object"===typeof b&&(e=b.data,"target"in b&&(a=b.target|0));c.type(e,"function","invalid attachment data");b=e._reglType;"texture2d"===b?(d=e,c(3553===a)):"textureCube"===b?(d=e,c(34069<=a&&34075>a,"invalid cube map target")):"renderbuffer"===b?(f=e,a=36161):c.raise("invalid regl object for attachment");return new B(a,d,f)}function O(b,a,d,f,e){if(d)return b=K.create2D({width:b,height:a,format:f,type:e}),b._texture.refCount=0,new B(3553,b,null);b=L.create({width:b,height:a,format:f});
b._renderbuffer.refCount=0;return new B(36161,null,b)}function Ca(b){return b&&(b.texture||b.renderbuffer)}function h(b,a,d){b&&(b.texture?b.texture.resize(a,d):b.renderbuffer&&b.renderbuffer.resize(a,d),b.width=a,b.height=d)}function g(){this.id=b++;k[this.id]=this;this.framebuffer=t.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function f(b){b.colorAttachments.forEach(F);F(b.depthAttachment);F(b.stencilAttachment);
F(b.depthStencilAttachment)}function v(b){var a=b.framebuffer;c(a,"must not double destroy framebuffer");t.deleteFramebuffer(a);b.framebuffer=null;r.framebufferCount--;delete k[b.id]}function P(b){var d;t.bindFramebuffer(36160,b.framebuffer);var f=b.colorAttachments;for(d=0;d<f.length;++d)G(36064+d,f[d]);for(d=f.length;d<wa.maxColorAttachments;++d)t.framebufferTexture2D(36160,36064+d,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0);t.framebufferTexture2D(36160,36096,3553,null,0);t.framebufferTexture2D(36160,
36128,3553,null,0);G(36096,b.depthAttachment);G(36128,b.stencilAttachment);G(33306,b.depthStencilAttachment);b=t.checkFramebufferStatus(36160);t.isContextLost()||36053===b||c.raise("framebuffer configuration not supported, status = "+a[b]);t.bindFramebuffer(36160,m.next?m.next.framebuffer:null);m.cur=m.next;t.getError()}function S(b,a){function k(b,a){var g;c(m.next!==t,"can not update framebuffer which is currently in use");var h=0,v=0,r=!0,n=!0;g=null;var K=!0,B="rgba",W="uint8",L=1,F=null,u=null,
Y=null,G=!1;if("number"===typeof b)h=b|0,v=a|0||h;else if(b){c.type(b,"object","invalid arguments for framebuffer");"shape"in b?(v=b.shape,c(Array.isArray(v)&&2<=v.length,"invalid shape for framebuffer"),h=v[0],v=v[1]):("radius"in b&&(h=v=b.radius),"width"in b&&(h=b.width),"height"in b&&(v=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&c(1===g.length||ja.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(L=b.colorCount|0,c(0<L,"invalid color buffer count"));
"colorTexture"in b&&(K=!!b.colorTexture,B="rgba4");if("colorType"in b){W=b.colorType;if(K)c(ja.oes_texture_float||!("float"===W||"float32"===W),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(ja.oes_texture_half_float||!("half float"===W||"float16"===W),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===W||"float16"===W)c(ja.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
B="rgba16f";else if("float"===W||"float32"===W)c(ja.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),B="rgba32f";c.oneOf(W,da,"invalid color type")}"colorFormat"in b&&(B=b.colorFormat,0<=na.indexOf(B)?K=!0:0<=I.indexOf(B)?K=!1:c.optional(function(){if(K)c.oneOf(b.colorFormat,na,"invalid color format for texture");else c.oneOf(b.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in
b)G=!(!b.depthTexture&&!b.depthStencilTexture),c(!G||ja.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?r=b.depth:(F=b.depth,n=!1));"stencil"in b&&("boolean"===typeof b.stencil?n=b.stencil:(u=b.stencil,r=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?r=n=b.depthStencil:(Y=b.depthStencil,n=r=!1))}else h=v=1;var S=null,la=null,y=null,C=null;if(Array.isArray(g))S=g.map(ka);else if(g)S=[ka(g)];else for(S=Array(L),g=0;g<L;++g)S[g]=
O(h,v,K,B,W);c(ja.webgl_draw_buffers||1>=S.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");c(S.length<=wa.maxColorAttachments,"too many color attachments, not supported");h=h||S[0].width;v=v||S[0].height;F?la=ka(F):r&&!n&&(la=O(h,v,G,"depth","uint32"));u?y=ka(u):n&&!r&&(y=O(h,v,!1,"stencil","uint8"));Y?C=ka(Y):!F&&!u&&n&&r&&(C=O(h,v,G,"depth stencil","depth stencil"));c(1>=!!F+!!u+!!Y,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
r=null;for(g=0;g<S.length;++g)x(S[g],h,v),c(!S[g]||S[g].texture&&0<=A.indexOf(S[g].texture._texture.format)||S[g].renderbuffer&&0<=q.indexOf(S[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+g+" is invalid"),S[g]&&S[g].texture&&(n=e[S[g].texture._texture.format]*d[S[g].texture._texture.type],null===r?r=n:c(r===n,"all color attachments much have the same number of bits per pixel."));x(la,h,v);c(!la||la.texture&&6402===la.texture._texture.format||la.renderbuffer&&33189===la.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");x(y,h,v);c(!y||y.renderbuffer&&36168===y.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");x(C,h,v);c(!C||C.texture&&34041===C.texture._texture.format||C.renderbuffer&&34041===C.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");f(t);t.width=h;t.height=v;t.colorAttachments=S;t.depthAttachment=la;t.stencilAttachment=y;t.depthStencilAttachment=C;k.color=S.map(Ca);k.depth=
Ca(la);k.stencil=Ca(y);k.depthStencil=Ca(C);k.width=t.width;k.height=t.height;P(t);return k}var t=new g;r.framebufferCount++;k(b,a);return n(k,{resize:function(b,a){c(m.next!==t,"can not resize a framebuffer which is currently in use");var d=Math.max(b|0,1),f=Math.max(a|0||d,1);if(d===t.width&&f===t.height)return k;for(var e=t.colorAttachments,g=0;g<e.length;++g)h(e[g],d,f);h(t.depthAttachment,d,f);h(t.stencilAttachment,d,f);h(t.depthStencilAttachment,d,f);t.width=k.width=d;t.height=k.height=f;P(t);
return k},_reglType:"framebuffer",_framebuffer:t,destroy:function(){v(t);f(t)},use:function(b){m.setFBO({framebuffer:k},b)}})}var m={cur:null,next:null,dirty:!1,setFBO:null},na=["rgba"],I=["rgba4","rgb565","rgb5 a1"];ja.ext_srgb&&I.push("srgba");ja.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");ja.webgl_color_buffer_float&&I.push("rgba32f");var da=["uint8"];ja.oes_texture_half_float&&da.push("half float","float16");ja.oes_texture_float&&da.push("float","float32");var b=0,k={};return n(m,
{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof g)?b:null},create:S,createCube:function(b){function a(b){var f;c(0>d.indexOf(m.next),"can not update framebuffer which is currently in use");var e={color:null},g=0,k=null;f="rgba";var h="uint8",v=1;if("number"===typeof b)g=b|0;else if(b){c.type(b,"object","invalid arguments for framebuffer");"shape"in b?(g=b.shape,c(Array.isArray(g)&&2<=g.length,"invalid shape for framebuffer"),c(g[0]===
g[1],"cube framebuffer must be square"),g=g[0]):("radius"in b&&(g=b.radius|0),"width"in b?(g=b.width|0,"height"in b&&c(b.height===g,"must be square")):"height"in b&&(g=b.height|0));if("color"in b||"colors"in b)k=b.color||b.colors,Array.isArray(k)&&c(1===k.length||ja.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in b&&(v=b.colorCount|0,c(0<v,"invalid color buffer count")),"colorType"in b&&(c.oneOf(b.colorType,da,"invalid color type"),h=b.colorType),"colorFormat"in b&&
(f=b.colorFormat,c.oneOf(b.colorFormat,na,"invalid color format for texture")));"depth"in b&&(e.depth=b.depth);"stencil"in b&&(e.stencil=b.stencil);"depthStencil"in b&&(e.depthStencil=b.depthStencil)}else g=1;if(k)if(Array.isArray(k))for(b=[],f=0;f<k.length;++f)b[f]=k[f];else b=[k];else for(b=Array(v),k={radius:g,format:f,type:h},f=0;f<v;++f)b[f]=K.createCube(k);e.color=Array(b.length);for(f=0;f<b.length;++f)v=b[f],c("function"===typeof v&&"textureCube"===v._reglType,"invalid cube map"),g=g||v.width,
c(v.width===g&&v.height===g,"invalid cube map shape"),e.color[f]={target:34069,data:b[f]};for(f=0;6>f;++f){for(v=0;v<b.length;++v)e.color[v].target=34069+f;0<f&&(e.depth=d[0].depth,e.stencil=d[0].stencil,e.depthStencil=d[0].depthStencil);if(d[f])d[f](e);else d[f]=S(e)}return n(a,{width:g,height:g,color:b})}var d=Array(6);a(b);return n(a,{faces:d,resize:function(b){var f=b|0;c(0<f&&f<=wa.maxCubeMapSize,"invalid radius for cube fbo");if(f===a.width)return a;var e=a.color;for(b=0;b<e.length;++b)e[b].resize(f);
for(b=0;6>b;++b)d[b].resize(f);a.width=a.height=f;return a},_reglType:"framebufferCube",destroy:function(){d.forEach(function(b){b.destroy()})}})},clear:function(){W(k).forEach(v)},restore:function(){m.cur=null;m.next=null;m.dirty=!0;W(k).forEach(function(b){b.framebuffer=t.createFramebuffer();P(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(y,C,Ta){var c=y("./util/sorted-object-keys"),W=y("./util/pool");C.exports=function(n,A){var e=1;A.ext_texture_filter_anisotropic&&
(e=n.getParameter(34047));var d=1,q=1;A.webgl_draw_buffers&&(d=n.getParameter(34852),q=n.getParameter(36063));var a=!!A.oes_texture_float;if(a){a=n.createTexture();n.bindTexture(3553,a);n.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var t=n.createFramebuffer();n.bindFramebuffer(36160,t);n.framebufferTexture2D(36160,36064,3553,a,0);n.bindTexture(3553,null);if(36053!==n.checkFramebufferStatus(36160))a=!1;else{n.viewport(0,0,1,1);n.clearColor(1,0,0,1);n.clear(16384);var ja=W.allocType(5126,4);n.readPixels(0,
0,1,1,6408,5126,ja);n.getError()?a=!1:(n.deleteFramebuffer(t),n.deleteTexture(a),a=1===ja[0]);W.freeType(ja)}}ja=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ja=n.createTexture(),t=W.allocType(5121,36),n.activeTexture(33984),n.bindTexture(34067,ja),n.texImage2D(34069,0,6408,3,3,0,6408,5121,t),W.freeType(t),n.bindTexture(34067,null),n.deleteTexture(ja),ja=!n.getError());return{colorBits:[n.getParameter(3410),
n.getParameter(3411),n.getParameter(3412),n.getParameter(3413)],depthBits:n.getParameter(3414),stencilBits:n.getParameter(3415),subpixelBits:n.getParameter(3408),extensions:c(A).filter(function(a){return!!A[a]}),maxAnisotropic:e,maxDrawbuffers:d,maxColorAttachments:q,pointSizeDims:n.getParameter(33901),lineWidthDims:n.getParameter(33902),maxViewportDims:n.getParameter(3386),maxCombinedTextureUnits:n.getParameter(35661),maxCubeMapSize:n.getParameter(34076),maxRenderbufferSize:n.getParameter(34024),
maxTextureUnits:n.getParameter(34930),maxTextureSize:n.getParameter(3379),maxAttributes:n.getParameter(34921),maxVertexUniforms:n.getParameter(36347),maxVertexTextureUnits:n.getParameter(35660),maxVaryingVectors:n.getParameter(36348),maxFragmentUniforms:n.getParameter(36349),glsl:n.getParameter(35724),renderer:n.getParameter(7937),vendor:n.getParameter(7936),version:n.getParameter(7938),readFloat:a,npotTextureCube:ja}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(y,C,Ta){var c=
y("./util/check"),W=y("./util/is-typed-array");C.exports=function(n,A,e,d,q,a,t){function ja(K){var L;null===A.next?(c(q.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),L=5121):(c(null!==A.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),L=A.next.colorAttachments[0].texture._texture.type,c.optional(function(){a.oes_texture_float?(c(5121===L||5126===L,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),
5126===L&&c(t.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(5121===L,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var r=0,B=0,F=d.framebufferWidth,x=d.framebufferHeight,G=null;W(K)?G=K:K&&(c.type(K,"object","invalid arguments to regl.read()"),r=K.x|0,B=K.y|0,c(0<=r&&r<d.framebufferWidth,"invalid x offset for regl.read"),c(0<=B&&B<d.framebufferHeight,"invalid y offset for regl.read"),
F=(K.width||d.framebufferWidth-r)|0,x=(K.height||d.framebufferHeight-B)|0,G=K.data||null);G&&(5121===L?c(G instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===L&&c(G instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));c(0<F&&F+r<=d.framebufferWidth,"invalid width for read pixels");c(0<x&&x+B<=d.framebufferHeight,"invalid height for read pixels");e();K=F*x*4;G||(5121===L?G=new Uint8Array(K):
5126===L&&(G=G||new Float32Array(K)));c.isTypedArray(G,"data buffer for regl.read() must be a typedarray");c(G.byteLength>=K,"data buffer for regl.read() too small");n.pixelStorei(3333,4);n.readPixels(r,B,F,x,6408,L,G);return G}function wa(a){var d;A.setFBO({framebuffer:a.framebuffer},function(){d=ja(a)});return d}return function(a){return a&&"framebuffer"in a?wa(a):ja(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(y,C,Ta){var c=y("./util/sorted-object-keys"),W=y("./util/check"),
n=y("./util/values"),A=[];A[32854]=2;A[32855]=2;A[36194]=2;A[33189]=2;A[36168]=1;A[34041]=4;A[35907]=4;A[34836]=16;A[34842]=8;A[34843]=6;C.exports=function(e,d,q,a,t){function ja(a){this.id=r++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;t.profile&&(this.stats={size:0})}function wa(d){var c=d.renderbuffer;W(c,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(c);d.renderbuffer=null;d.refCount=0;delete B[d.id];a.renderbufferCount--}
var K={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(K.srgba=35907);d.ext_color_buffer_half_float&&(K.rgba16f=34842,K.rgb16f=34843);d.webgl_color_buffer_float&&(K.rgba32f=34836);var L=[];c(K).forEach(function(a){L[K[a]]=a});var r=0,B={};ja.prototype.decRef=function(){0>=--this.refCount&&wa(this)};t.profile&&(a.getTotalRenderbufferSize=function(){var a=0;c(B).forEach(function(d){a+=B[d].stats.size});return a});return{create:function(d,c){function r(a,
d){var h=0,g=0,f=32854;"object"===typeof a&&a?("shape"in a?(g=a.shape,W(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),h=g[0]|0,g=g[1]|0):("radius"in a&&(h=g=a.radius|0),"width"in a&&(h=a.width|0),"height"in a&&(g=a.height|0)),"format"in a&&(W.parameter(a.format,K,"invalid renderbuffer format"),f=K[a.format])):"number"===typeof a?(h=a|0,g="number"===typeof d?d|0:h):a?W.raise("invalid arguments to renderbuffer constructor"):h=g=1;W(0<h&&0<g&&h<=q.maxRenderbufferSize&&g<=q.maxRenderbufferSize,
"invalid renderbuffer size");if(h!==n.width||g!==n.height||f!==n.format)return r.width=n.width=h,r.height=n.height=g,n.format=f,e.bindRenderbuffer(36161,n.renderbuffer),e.renderbufferStorage(36161,f,h,g),W(0===e.getError(),"invalid render buffer format"),t.profile&&(n.stats.size=A[n.format]*n.width*n.height),r.format=L[n.format],r}var n=new ja(e.createRenderbuffer());B[n.id]=n;a.renderbufferCount++;r(d,c);r.resize=function(a,d){var h=a|0,g=d|0||h;if(h===n.width&&g===n.height)return r;W(0<h&&0<g&&
h<=q.maxRenderbufferSize&&g<=q.maxRenderbufferSize,"invalid renderbuffer size");r.width=n.width=h;r.height=n.height=g;e.bindRenderbuffer(36161,n.renderbuffer);e.renderbufferStorage(36161,n.format,h,g);W(0===e.getError(),"invalid render buffer format");t.profile&&(n.stats.size=A[n.format]*n.width*n.height);return r};r._reglType="renderbuffer";r._renderbuffer=n;t.profile&&(r.stats=n.stats);r.destroy=function(){n.decRef()};return r},clear:function(){n(B).forEach(wa)},restore:function(){n(B).forEach(function(a){a.renderbuffer=
e.createRenderbuffer();e.bindRenderbuffer(36161,a.renderbuffer);e.renderbufferStorage(36161,a.format,a.width,a.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(y,C,Ta){var c=y("./util/sorted-object-keys"),W=y("./util/check"),n=y("./util/extend"),A=y("./util/values");C.exports=function(e,d,q,a){function t(a,d,e,h){this.name=a;this.id=d;this.location=e;this.info=h}function ja(a,d){for(var e=0;e<a.length;++e)if(a[e].id===
d.id){a[e].location=d.location;return}a.push(d)}function wa(a,c,q){var h=35632===a?r:B,g=h[c];if(!g){var f=d.str(c),g=e.createShader(a);e.shaderSource(g,f);e.compileShader(g);W.shaderError(e,g,f,a,q);h[c]=g}return g}function K(d,e){this.id=G++;this.fragId=d;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function L(c,q,r){var h;h=wa(35632,c.fragId);var g=wa(35633,c.vertId),f=c.program=e.createProgram();
e.attachShader(f,h);e.attachShader(f,g);if(r)for(h=0;h<r.length;++h)g=r[h],e.bindAttribLocation(f,g[0],g[1]);e.linkProgram(f);W.linkError(e,f,d.str(c.fragId),d.str(c.vertId),q);r=e.getProgramParameter(f,35718);a.profile&&(c.stats.uniformsCount=r);g=c.uniforms;for(h=0;h<r;++h)if(q=e.getActiveUniform(f,h))if(1<q.size)for(var v=0;v<q.size;++v){var x=q.name.replace("[0]","["+v+"]");ja(g,new t(x,d.id(x),e.getUniformLocation(f,x),q))}else ja(g,new t(q.name,d.id(q.name),e.getUniformLocation(f,q.name),q));
r=e.getProgramParameter(f,35721);a.profile&&(c.stats.attributesCount=r);c=c.attributes;for(h=0;h<r;++h)(q=e.getActiveAttrib(f,h))&&ja(c,new t(q.name,d.id(q.name),e.getAttribLocation(f,q.name),q))}var r={},B={},F={},x=[],G=0;a.profile&&(q.getMaxUniformsCount=function(){var a=0;x.forEach(function(d){d.stats.uniformsCount>a&&(a=d.stats.uniformsCount)});return a},q.getMaxAttributesCount=function(){var a=0;x.forEach(function(d){d.stats.attributesCount>a&&(a=d.stats.attributesCount)});return a});return{clear:function(){var a=
e.deleteShader.bind(e);A(r).forEach(a);r={};A(B).forEach(a);B={};x.forEach(function(a){e.deleteProgram(a.program)});x.length=0;F={};q.shaderCount=0},program:function(a,d,t,h){W.command(0<=a,"missing vertex shader",t);W.command(0<=d,"missing fragment shader",t);var g=F[d];g||(g=F[d]={});var f=g[a];if(f&&(f.refCount++,!h))return f;var v=new K(d,a);q.shaderCount++;L(v,t,h);f||(g[a]=v);x.push(v);return n(v,{destroy:function(){v.refCount--;if(0>=v.refCount){e.deleteProgram(v.program);var a=x.indexOf(v);
x.splice(a,1);q.shaderCount--}0>=g[v.vertId].refCount&&(e.deleteShader(B[v.vertId]),delete B[v.vertId],delete F[v.fragId][v.vertId]);c(F[v.fragId]).length||(e.deleteShader(r[v.fragId]),delete r[v.fragId],delete F[v.fragId])}})},restore:function(){r={};B={};for(var a=0;a<x.length;++a)L(x[a],null,x[a].attributes.map(function(a){return[a.location,a.name]}))},shader:wa,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(y,C,Ta){C.exports=
function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(y,C,Ta){C.exports=function(){var c={"":0},W=[""];return{id:function(n){var A=c[n];if(A)return A;A=c[n]=W.length;W.push(n);return A},str:function(c){return W[c]}}}},{}],19:[function(y,C,Ta){function c(b){return"[object "+b+"]"}function W(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function n(b){return Array.isArray(b)&&
0!==b.length&&F(b[0])?!0:!1}function A(b){return Object.prototype.toString.call(b)}function e(b){if(!b)return!1;var a=A(b);return 0<=na.indexOf(a)?!0:W(b)||n(b)||L(b)}function d(b,a){36193===b.type?(b.data=B(a),r.freeType(a)):b.data=a}function q(b,a,d,f,e,g){b="undefined"!==typeof da[b]?da[b]:h[b]*I[a];g&&(b*=6);if(e){for(f=0;1<=d;)f+=b*d*d,d/=2;return f}return b*d*f}var a=y("./util/sorted-object-keys"),t=y("./util/check"),ja=y("./util/extend"),wa=y("./util/values"),K=y("./util/is-typed-array"),L=
y("./util/is-ndarray"),r=y("./util/pool"),B=y("./util/to-half-float"),F=y("./util/is-array-like"),x=y("./util/flatten"),G=y("./util/is-pow2");Ta=y("./constants/arraytypes.json");var ka=y("./constants/arraytypes.json"),O=[9984,9986,9985,9987],Ca=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;h[6408]=h[35906]=4;var g=c("HTMLCanvasElement"),f=c("OffscreenCanvas"),v=c("CanvasRenderingContext2D"),P=c("ImageBitmap"),S=c("HTMLImageElement"),m=c("HTMLVideoElement"),
na=a(Ta).concat([g,f,v,P,S,m]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var da=[];da[32854]=2;da[32855]=2;da[36194]=2;da[34041]=4;da[33776]=.5;da[33777]=.5;da[33778]=1;da[33779]=1;da[35986]=.5;da[35987]=1;da[34798]=1;da[35840]=.5;da[35841]=.25;da[35842]=.5;da[35843]=.25;da[36196]=.5;C.exports=function(b,k,c,I,da,na,y){function qa(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=
this.height=this.width=0}function Oa(b,a){b.internalformat=a.internalformat;b.format=a.format;b.type=a.type;b.compressed=a.compressed;b.premultiplyAlpha=a.premultiplyAlpha;b.flipY=a.flipY;b.unpackAlignment=a.unpackAlignment;b.colorSpace=a.colorSpace;b.width=a.width;b.height=a.height;b.channels=a.channels}function Z(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(t.type(a.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(t.type(a.flipY,
"boolean","invalid texture flip"),b.flipY=a.flipY);"alignment"in a&&(t.oneOf(a.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=a.alignment);"colorSpace"in a&&(t.parameter(a.colorSpace,wc,"invalid colorSpace"),b.colorSpace=wc[a.colorSpace]);if("type"in a){var d=a.type;t(k.oes_texture_float||!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");t(k.oes_texture_half_float||!("half float"===d||"float16"===d),
"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");t(k.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");t.parameter(d,aa,"invalid texture type");b.type=aa[d]}var f=b.width,e=b.height,g=b.channels,d=!1;"shape"in a?(t(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),f=a.shape[0],e=a.shape[1],3===a.shape.length&&(g=
a.shape[2],t(0<g&&4>=g,"invalid number of channels"),d=!0),t(0<=f&&f<=c.maxTextureSize,"invalid width"),t(0<=e&&e<=c.maxTextureSize,"invalid height")):("radius"in a&&(f=e=a.radius,t(0<=f&&f<=c.maxTextureSize,"invalid radius")),"width"in a&&(f=a.width,t(0<=f&&f<=c.maxTextureSize,"invalid width")),"height"in a&&(e=a.height,t(0<=e&&e<=c.maxTextureSize,"invalid height")),"channels"in a&&(g=a.channels,t(0<g&&4>=g,"invalid number of channels"),d=!0));b.width=f|0;b.height=e|0;b.channels=g|0;f=!1;"format"in
a&&(f=a.format,t(k.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),t.parameter(f,J,"invalid texture format"),e=b.internalformat=J[f],b.format=ta[e],f in aa&&!("type"in a)&&(b.type=aa[f]),f in ia&&(b.compressed=!0),f=!0);!d&&f?b.channels=h[b.format]:d&&!f?b.channels!==Ca[b.format]&&(b.format=b.internalformat=Ca[b.channels]):f&&d&&t(b.channels===h[b.format],"number of channels inconsistent with specified format")}}
function H(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}function M(){qa.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function R(b,a){var k=null;e(a)?k=a:a&&(t.type(a,"object","invalid pixel data type"),Z(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),e(a.data)&&(k=a.data));t(!b.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(a.copy){t(!k,"can not specify copy and data field for the same texture");var l=da.viewportWidth,h=da.viewportHeight;b.width=b.width||l-b.xOffset;b.height=b.height||h-b.yOffset;b.needsCopy=!0;t(0<=b.xOffset&&b.xOffset<l&&0<=b.yOffset&&b.yOffset<h&&0<b.width&&b.width<=l&&0<b.height&&b.height<=h,"copy texture read out of bounds")}else if(!k)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(K(k))b.channels=b.channels||4,b.data=k,"type"in a||5121!==b.type||(b.type=ka[Object.prototype.toString.call(k)]|
0);else if(W(k)){b.channels=b.channels||4;l=k;h=l.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:h=r.allocType(b.type,h);h.set(l);b.data=h;break;case 36193:b.data=B(l);break;default:t.raise("unsupported texture type, must specify a typed array")}b.alignment=1;b.needsFree=!0}else if(L(k)){l=k.data;Array.isArray(l)||5121!==b.type||(b.type=ka[Object.prototype.toString.call(l)]|0);var h=k.shape,z=k.stride,p,u,w,q;3===h.length?(w=h[2],q=z[2]):(t(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),
q=w=1);p=h[0];u=h[1];h=z[0];z=z[1];b.alignment=1;b.width=p;b.height=u;b.channels=w;b.format=b.internalformat=Ca[w];b.needsFree=!0;p=q;k=k.offset;w=b.width;q=b.height;u=b.channels;for(var J=r.allocType(36193===b.type?5126:b.type,w*q*u),E=0,ca=0;ca<q;++ca)for(var D=0;D<w;++D)for(var I=0;I<u;++I)J[E++]=l[h*D+z*ca+p*I+k];d(b,J)}else if(A(k)===g||A(k)===f||A(k)===v)A(k)===g||A(k)===f?b.element=k:b.element=k.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(A(k)===P)b.element=
k,b.width=k.width,b.height=k.height,b.channels=4;else if(A(k)===S)b.element=k,b.width=k.naturalWidth,b.height=k.naturalHeight,b.channels=4;else if(A(k)===m)b.element=k,b.width=k.videoWidth,b.height=k.videoHeight,b.channels=4;else if(n(k)){l=b.width||k[0].length;h=b.height||k.length;z=b.channels;z=F(k[0][0])?z||k[0][0].length:z||1;p=x.shape(k);w=1;for(q=0;q<p.length;++q)w*=p[q];w=r.allocType(36193===b.type?5126:b.type,w);x.flatten(k,p,"",w);d(b,w);b.alignment=1;b.width=l;b.height=h;b.channels=z;b.format=
b.internalformat=Ca[z];b.needsFree=!0}5126===b.type?t(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===b.type&&t(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function ua(a,d,f,e,g){var k=a.element,p=a.data,h=a.internalformat,c=a.format,m=a.type,v=a.width,z=a.height;H(a);k?b.texSubImage2D(d,g,f,e,c,m,k):a.compressed?b.compressedTexSubImage2D(d,g,f,e,h,v,z,p):a.needsCopy?(I(),b.copyTexSubImage2D(d,g,
f,e,a.xOffset,a.yOffset,v,z)):b.texSubImage2D(d,g,f,e,v,z,c,m,p)}function N(){return U.pop()||new M}function C(b){b.needsFree&&r.freeType(b.data);M.call(b);U.push(b)}function Ja(){qa.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function Q(b,a,d){var f=b.images[0]=N();b.mipmask=1;f.width=b.width=a;f.height=b.height=d;f.channels=b.channels=4}function u(b,a){var d=null;if(e(a))d=b.images[0]=N(),Oa(d,b),R(d,a),b.mipmask=1;else if(Z(b,a),Array.isArray(a.mipmap))for(var f=
a.mipmap,g=0;g<f.length;++g)d=b.images[g]=N(),Oa(d,b),d.width>>=g,d.height>>=g,R(d,f[g]),b.mipmask|=1<<g;else d=b.images[0]=N(),Oa(d,b),R(d,a),b.mipmask=1;Oa(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==b.internalformat&&33779!==b.internalformat||t(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ha(a,d){for(var f=a.images,e=0;e<f.length&&f[e];++e){var g=f[e],k=
d,p=e,h=g.element,c=g.data,m=g.internalformat,v=g.format,z=g.type,w=g.width,u=g.height;H(g);h?b.texImage2D(k,p,v,v,z,h):g.compressed?b.compressedTexImage2D(k,p,m,w,u,0,c):g.needsCopy?(I(),b.copyTexImage2D(k,p,v,g.xOffset,g.yOffset,w,u,0)):b.texImage2D(k,p,v,w,u,0,v,z,c||null)}}function ba(){var b=fa.pop()||new Ja;qa.call(b);for(var a=b.mipmask=0;16>a;++a)b.images[a]=null;return b}function Fa(b){for(var a=b.images,d=0;d<a.length;++d)a[d]&&C(a[d]),a[d]=null;fa.push(b)}function Ma(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ac(b,a){if("min"in a){var d=a.min;t.parameter(d,ud);b.minFilter=ud[d];0<=O.indexOf(b.minFilter)&&!("faces"in a)&&(b.genMipmaps=!0)}"mag"in a&&(d=a.mag,t.parameter(d,mc),b.magFilter=mc[d]);var d=b.wrapS,f=b.wrapT;if("wrap"in a){var e=a.wrap;"string"===typeof e?(t.parameter(e,pc),d=f=pc[e]):Array.isArray(e)&&(t.parameter(e[0],pc),t.parameter(e[1],pc),d=pc[e[0]],f=pc[e[1]])}else"wrapS"in a&&(d=a.wrapS,
t.parameter(d,pc),d=pc[d]),"wrapT"in a&&(f=a.wrapT,t.parameter(f,pc),f=pc[f]);b.wrapS=d;b.wrapT=f;"anisotropic"in a&&(d=a.anisotropic,t("number"===typeof d&&1<=d&&d<=c.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=a.anisotropic);if("mipmap"in a){d=!1;switch(typeof a.mipmap){case "string":t.parameter(a.mipmap,ec,"invalid mipmap hint");b.mipmapHint=ec[a.mipmap];d=b.genMipmaps=!0;break;case "boolean":d=b.genMipmaps=a.mipmap;break;case "object":t(Array.isArray(a.mipmap),"invalid mipmap type");
b.genMipmaps=!1;d=!0;break;default:t.raise("invalid mipmap type")}!d||"min"in a||(b.minFilter=9984)}}function bb(a,d){b.texParameteri(d,10241,a.minFilter);b.texParameteri(d,10240,a.magFilter);b.texParameteri(d,10242,a.wrapS);b.texParameteri(d,10243,a.wrapT);k.ext_texture_filter_anisotropic&&b.texParameteri(d,34046,a.anisotropic);a.genMipmaps&&(b.hint(33170,a.mipmapHint),b.generateMipmap(d))}function V(a){qa.call(this);this.mipmask=0;this.internalformat=6408;this.id=oa++;this.refCount=1;this.target=
a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ma;y.profile&&(this.stats={size:0})}function sb(a){b.activeTexture(33984);b.bindTexture(a.target,a.texture)}function ea(){var a=ca[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function ra(a){var d=a.texture;t(d,"must not double destroy texture");var f=a.unit,e=a.target;0<=f&&(b.activeTexture(33984+f),b.bindTexture(e,null),ca[f]=null);b.deleteTexture(d);a.texture=null;a.params=null;a.pixels=null;a.refCount=
0;delete E[a.id];na.textureCount--}var ec={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pc={repeat:10497,clamp:33071,mirror:33648},mc={nearest:9728,linear:9729},ud=ja({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},mc),wc={none:0,browser:37444},aa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},J={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},
ia={};k.ext_srgb&&(J.srgb=35904,J.srgba=35906);k.oes_texture_float&&(aa.float32=aa["float"]=5126);k.oes_texture_half_float&&(aa.float16=aa["half float"]=36193);k.webgl_depth_texture&&(ja(J,{depth:6402,"depth stencil":34041}),ja(aa,{uint16:5123,uint32:5125,"depth stencil":34042}));k.webgl_compressed_texture_s3tc&&ja(ia,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});k.webgl_compressed_texture_atc&&ja(ia,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});k.webgl_compressed_texture_pvrtc&&ja(ia,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});k.webgl_compressed_texture_etc1&&(ia["rgb etc1"]=36196);var Da=Array.prototype.slice.call(b.getParameter(34467));a(ia).forEach(function(b){var a=ia[b];0<=Da.indexOf(a)&&(J[b]=a)});var tb=a(J);c.textureFormats=tb;var Qc=[];a(J).forEach(function(b){Qc[J[b]]=b});var xc=[];a(aa).forEach(function(b){xc[aa[b]]=b});var D=[];
a(mc).forEach(function(b){D[mc[b]]=b});var w=[];a(ud).forEach(function(b){w[ud[b]]=b});var ga=[];a(pc).forEach(function(b){ga[pc[b]]=b});var ta=tb.reduce(function(b,a){var d=J[a];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||k.ext_srgb&&(35904===d||35906===d)?b[d]=d:32855===d||0<=a.indexOf("rgba")?b[d]=6408:b[d]=6407;return b},{}),U=[],fa=[],oa=0,E={},z=c.maxTextureUnits,ca=Array(z).map(function(){return null});ja(V.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>
a){for(var d=0;d<z;++d){var f=ca[d];if(f){if(0<f.bindCount)continue;f.unit=-1}ca[d]=this;a=d;break}a>=z&&t.raise("insufficient number of texture units");y.profile&&na.maxTextureUnits<a+1&&(na.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ra(this)}});y.profile&&(na.getTotalTextureSize=function(){var b=0;a(E).forEach(function(a){b+=E[a].stats.size});return b});return{create2D:function(a,
d){function f(b,a){var d=e.texInfo;Ma.call(d);var g=ba();"number"===typeof b?"number"===typeof a?Q(g,b|0,a|0):Q(g,b|0,b|0):b?(t.type(b,"object","invalid arguments to regl.texture"),ac(d,b),u(g,b)):Q(g,1,1);d.genMipmaps&&(g.mipmask=(g.width<<1)-1);e.mipmask=g.mipmask;Oa(e,g);t.texture2D(d,g,c);e.internalformat=g.internalformat;f.width=g.width;f.height=g.height;sb(e);ha(g,3553);bb(d,3553);ea();Fa(g);y.profile&&(e.stats.size=q(e.internalformat,e.type,g.width,g.height,d.genMipmaps,!1));f.format=Qc[e.internalformat];
f.type=xc[e.type];f.mag=D[d.magFilter];f.min=w[d.minFilter];f.wrapS=ga[d.wrapS];f.wrapT=ga[d.wrapT];return f}var e=new V(3553);E[e.id]=e;na.textureCount++;f(a,d);f.subimage=function(b,a,d,g){t(!!b,"must specify image data");a|=0;d|=0;g|=0;var k=N();Oa(k,e);k.width=0;k.height=0;R(k,b);k.width=k.width||(e.width>>g)-a;k.height=k.height||(e.height>>g)-d;t(e.type===k.type&&e.format===k.format&&e.internalformat===k.internalformat,"incompatible format for texture.subimage");t(0<=a&&0<=d&&a+k.width<=e.width&&
d+k.height<=e.height,"texture.subimage write out of bounds");t(e.mipmask&1<<g,"missing mipmap data");t(k.data||k.element||k.needsCopy,"missing image data");sb(e);ua(k,3553,a,d,g);ea();C(k);return f};f.resize=function(a,d){var g=a|0,k=d|0||g;if(g===e.width&&k===e.height)return f;f.width=e.width=g;f.height=e.height=k;sb(e);for(var h=0;e.mipmask>>h;++h){var c=g>>h,m=k>>h;if(!c||!m)break;b.texImage2D(3553,h,e.format,c,m,0,e.format,e.type,null)}ea();y.profile&&(e.stats.size=q(e.internalformat,e.type,g,
k,!1,!1));return f};f._reglType="texture2d";f._texture=e;y.profile&&(f.stats=e.stats);f.destroy=function(){e.decRef()};return f},createCube:function(a,d,f,e,g,k){function h(b,a,d,f,e,g){var k,l=m.texInfo;Ma.call(l);for(k=0;6>k;++k)v[k]=ba();if("number"!==typeof b&&b)if("object"===typeof b)if(a)u(v[0],b),u(v[1],a),u(v[2],d),u(v[3],f),u(v[4],e),u(v[5],g);else if(ac(l,b),Z(m,b),"faces"in b)for(b=b.faces,t(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),k=0;6>k;++k)t("object"===
typeof b[k]&&!!b[k],"invalid input for cube map face"),Oa(v[k],m),u(v[k],b[k]);else for(k=0;6>k;++k)u(v[k],b);else t.raise("invalid arguments to cube map");else for(b=b|0||1,k=0;6>k;++k)Q(v[k],b,b);Oa(m,v[0]);t.optional(function(){c.npotTextureCube||t(G(m.width)&&G(m.height),"your browser does not support non power or two texture dimensions")});m.mipmask=l.genMipmaps?(v[0].width<<1)-1:v[0].mipmask;t.textureCube(m,l,v,c);m.internalformat=v[0].internalformat;h.width=v[0].width;h.height=v[0].height;
sb(m);for(k=0;6>k;++k)ha(v[k],34069+k);bb(l,34067);ea();y.profile&&(m.stats.size=q(m.internalformat,m.type,h.width,h.height,l.genMipmaps,!0));h.format=Qc[m.internalformat];h.type=xc[m.type];h.mag=D[l.magFilter];h.min=w[l.minFilter];h.wrapS=ga[l.wrapS];h.wrapT=ga[l.wrapT];for(k=0;6>k;++k)Fa(v[k]);return h}var m=new V(34067);E[m.id]=m;na.cubeCount++;var v=Array(6);h(a,d,f,e,g,k);h.subimage=function(b,a,d,f,e){t(!!a,"must specify image data");t("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");
d|=0;f|=0;e|=0;var g=N();Oa(g,m);g.width=0;g.height=0;R(g,a);g.width=g.width||(m.width>>e)-d;g.height=g.height||(m.height>>e)-f;t(m.type===g.type&&m.format===g.format&&m.internalformat===g.internalformat,"incompatible format for texture.subimage");t(0<=d&&0<=f&&d+g.width<=m.width&&f+g.height<=m.height,"texture.subimage write out of bounds");t(m.mipmask&1<<e,"missing mipmap data");t(g.data||g.element||g.needsCopy,"missing image data");sb(m);ua(g,34069+b,d,f,e);ea();C(g);return h};h.resize=function(a){a|=
0;if(a!==m.width){h.width=m.width=a;h.height=m.height=a;sb(m);for(var d=0;6>d;++d)for(var f=0;m.mipmask>>f;++f)b.texImage2D(34069+d,f,m.format,a>>f,a>>f,0,m.format,m.type,null);ea();y.profile&&(m.stats.size=q(m.internalformat,m.type,h.width,h.height,!1,!0));return h}};h._reglType="textureCube";h._texture=m;y.profile&&(h.stats=m.stats);h.destroy=function(){m.decRef()};return h},clear:function(){for(var a=0;a<z;++a)b.activeTexture(33984+a),b.bindTexture(3553,null),ca[a]=null;wa(E).forEach(ra);na.cubeCount=
0;na.textureCount=0},getTexture:function(b){return null},restore:function(){for(var a=0;a<z;++a){var d=ca[a];d&&(d.bindCount=0,d.unit=-1,ca[a]=null)}wa(E).forEach(function(a){a.texture=b.createTexture();b.bindTexture(a.target,a.texture);for(var d=0;32>d;++d)if(0!==(a.mipmask&1<<d))if(3553===a.target)b.texImage2D(3553,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);else for(var f=0;6>f;++f)b.texImage2D(34069+f,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,
null);bb(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<z;++a){var d=ca[a];d&&(d.bindCount=0,d.unit=-1,ca[a]=null);b.activeTexture(33984+a);b.bindTexture(3553,null);b.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(y,
C,Ta){C.exports=function(c,W){function n(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function A(d,e,c){var r=q.pop()||new n;r.startQueryIndex=d;r.endQueryIndex=e;r.sum=0;r.stats=c;a.push(r)}if(!W.ext_disjoint_timer_query)return null;var e=[],d=[],q=[],a=[],t=[],ja=[];return{beginQuery:function(a){var c=e.pop()||W.ext_disjoint_timer_query.createQueryEXT();W.ext_disjoint_timer_query.beginQueryEXT(35007,c);d.push(c);A(d.length-1,d.length,a)},endQuery:function(){W.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:A,update:function(){var c,n;c=d.length;if(0!==c){ja.length=Math.max(ja.length,c+1);t.length=Math.max(t.length,c+1);t[0]=0;var A=ja[0]=0;for(n=c=0;n<d.length;++n){var r=d[n];W.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(A+=W.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),e.push(r)):d[c++]=r;t[n+1]=A;ja[n+1]=c}d.length=c;for(n=c=0;n<a.length;++n){var A=a[n],B=A.startQueryIndex,r=A.endQueryIndex;A.sum+=t[r]-t[B];B=ja[B];r=ja[r];r===B?(A.stats.gpuTime+=A.sum/1E6,q.push(A)):
(A.startQueryIndex=B,A.endQueryIndex=r,a[c++]=A)}a.length=c}},getNumPendingQueries:function(){return d.length},clear:function(){e.push.apply(e,d);for(var a=0;a<e.length;a++)W.ext_disjoint_timer_query.deleteQueryEXT(e[a]);d.length=0;e.length=0},restore:function(){d.length=0;e.length=0}}}},{}],21:[function(y,C,Ta){function c(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function W(a){a=Error("(regl) "+a);console.error(a);throw a;}function n(a,d){a||W(d)}function A(a){return a?": "+a:""}function e(a,
d){switch(d){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function d(a,d,e){0>d.indexOf(a)&&W("invalid value"+A(e)+". must be one of: "+d)}function q(a,d){for(a+="";a.length<d;)a=" "+a;return a}function a(){this.name="unknown";this.lines=[];this.index={};
this.hasErrors=!1}function t(a,d){this.number=a;this.line=d;this.errors=[]}function ja(a,d,e){this.file=a;this.line=d;this.message=e}function wa(){var a=Error(),a=(a.stack||a).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return d?d[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function K(){var a=Error(),a=(a.stack||a).toString(),d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return d?d[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function L(d,
e){var g=d.split("\n"),h=1,m=0,q={unknown:new a,0:new a};q.unknown.name=q[0].name=e||wa();q.unknown.lines.push(new t(0,""));for(var r=0;r<g.length;++r){var x=g[r],b=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(x);if(b)switch(b[1]){case "line":if(b=/(\d+)(\s+\d+)?/.exec(b[2]))h=b[1]|0,b[2]&&(m=b[2]|0,m in q||(q[m]=new a));break;case "define":if(b=/SHADER_NAME(_B64)?\s+(.*)$/.exec(b[2]))q[m].name=b[1]?c(b[2]):b[2]}q[m].lines.push(new t(h++,x))}O(q).forEach(function(b){var a=q[b];a.lines.forEach(function(b){a.index[b.number]=
b})});return q}function r(a){var d=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var f=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);f?d.push(new ja(f[1]|0,f[2]|0,f[3].trim())):0<a.length&&d.push(new ja("unknown",0,a))}});return d}function B(a,d){d.forEach(function(d){var e=a[d.file];if(e){var g=e.index[d.line];if(g){g.errors.push(d);e.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(d)})}function F(a){a._commandRef=wa()}function x(a,d){var e=K();W(a+" in command "+(d||
wa())+("unknown"===e?"":" called from "+e))}function G(a,d,g,h){e(a,d)||x("invalid parameter type"+A(g)+". expected "+d+", got "+typeof a,h||wa())}function ka(a,d){return 32820===a||32819===a||33635===a?2:34042===a?4:g[a]*d}var O=y("./sorted-object-keys"),Ca=y("./is-typed-array");y=y("./extend");var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),g={};g[5120]=g[5121]=1;g[5122]=g[5123]=g[36193]=g[33635]=g[32819]=g[32820]=2;g[5124]=g[5125]=g[5126]=
g[34042]=4;C.exports=y(n,{optional:function(a){a()},raise:W,commandRaise:x,command:function(a,d,e){a||x(d,e||wa())},parameter:function(a,d,e){a in d||W("unknown parameter ("+a+")"+A(e)+". possible values: "+O(d).join())},commandParameter:function(a,d,e,g){a in d||x("unknown parameter ("+a+")"+A(e)+". possible values: "+O(d).join(),g||wa())},constructor:function(a){O(a).forEach(function(a){0>h.indexOf(a)&&W('invalid regl constructor argument "'+a+'". must be one of '+h)})},type:function(a,d,g){e(a,
d)||W("invalid parameter type"+A(g)+". expected "+d+", got "+typeof a)},commandType:G,isTypedArray:function(a,d){Ca(a)||W("invalid parameter type"+A(d)+". must be a typed array")},nni:function(a,d){0<=a&&(a|0)===a||W("invalid parameter type, ("+a+")"+A(d)+". must be a nonnegative integer")},oneOf:d,shaderError:function(a,d,e,g,h){if(!a.getShaderParameter(d,a.COMPILE_STATUS)){d=a.getShaderInfoLog(d);a=g===a.FRAGMENT_SHADER?"fragment":"vertex";G(e,"string",a+" shader source must be a string",h);var c=
L(e,h);e=r(d);B(c,e);O(c).forEach(function(a){function d(b,a){f.push(b);e.push(a||"")}var b=c[a];if(b.hasErrors){var f=[""],e=[""];d("file number "+a+": "+b.name+"\n","color:red;text-decoration:underline;font-weight:bold");b.lines.forEach(function(b){if(0<b.errors.length){d(q(b.number,4)+"|  ","background-color:yellow; font-weight:bold");d(b.line+"\n","color:red; background-color:yellow; font-weight:bold");var a=0;b.errors.forEach(function(f){f=f.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(f);if(e){var g=
e[1];f=e[2];switch(g){case "assign":g="="}a=Math.max(b.line.indexOf(g,a),0)}else a=0;d(q("| ",6));d(q("^^^",a+3)+"\n","font-weight:bold");d(q("| ",6));d(f+"\n","font-weight:bold")});d(q("| ",6)+"\n")}else d(q(b.number,4)+"|  "),d(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(f.join("")):(e[0]=f.join("%c"),console.log.apply(console,e))}});n.raise("Error compiling "+a+" shader, "+c[0].name)}},linkError:function(a,d,e,g,h){a.getProgramParameter(d,a.LINK_STATUS)||
(a=a.getProgramInfoLog(d),e=L(e,h),g='Error linking program with vertex shader, "'+L(g,h)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+g+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(g+"\n"+a),n.raise(g))},callSite:K,saveCommandRef:F,saveDrawInfo:function(a,d,e,g){function h(a){return a?g.id(a):0}function c(a,b){O(b).forEach(function(b){a[g.id(b)]=!0})}F(a);a._fragId=h(a["static"].frag);a._vertId=h(a["static"].vert);
var q=a._uniformSet={};c(q,d["static"]);c(q,d.dynamic);d=a._attributeSet={};c(d,e["static"]);c(d,e.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,e,g){a.texture?d(a.texture._texture.internalformat,e,"unsupported texture format for attachment"):d(a.renderbuffer._renderbuffer.format,g,"unsupported renderbuffer format for attachment")},guessCommand:wa,texture2D:function(a,d,e){var g=d.width,h=d.height,c=
d.channels;n(0<g&&g<=e.maxTextureSize&&0<h&&h<=e.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||n(!(g&g-1)&&!!g&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==g&&1!==h&&n(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(n(!(g&g-1)&&!!g&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),n(d.mipmask===(g<<1)-1,"missing or incomplete mipmap data"));
5126===d.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&n(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),n(!a.genMipmaps,"mipmap generation not supported with float textures"));var q=d.images;for(e=0;16>e;++e)if(q[e]){var r=g>>e,b=h>>e;n(d.mipmask&1<<e,"missing mipmap data");var k=q[e];n(k.width===r&&k.height===b,"invalid shape for mip images");n(k.format===d.format&&k.internalformat===d.internalformat&&k.type===d.type,"incompatible type for mip image");
!k.compressed&&k.data&&(r=Math.ceil(ka(k.type,c)*r/k.unpackAlignment)*k.unpackAlignment,n(k.data.byteLength===r*b,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||n(0===(d.mipmask&1<<e),"extra mipmap data");d.compressed&&n(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,d,e,g){var h=a.width,c=a.height,q=a.channels;n(0<h&&h<=g.maxTextureSize&&0<c&&c<=g.maxTextureSize,"invalid texture shape");n(h===c,"cube map must be square");
n(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(g=0;g<e.length;++g){var r=e[g];n(r.width===h&&r.height===c,"inconsistent cube map face shape");d.genMipmaps&&(n(!r.compressed,"can not generate mipmap for compressed textures"),n(1===r.mipmask,"can not specify mipmaps and generate mipmaps"));for(var b=r.images,k=0;16>k;++k){var x=b[k];if(x){var t=h>>k,A=c>>k;n(r.mipmask&1<<k,"missing mipmap data");n(x.width===t&&x.height===A,"invalid shape for mip images");n(x.format===
a.format&&x.internalformat===a.internalformat&&x.type===a.type,"incompatible type for mip image");x.compressed||x.data&&n(x.data.byteLength===t*A*Math.max(ka(x.type,q),x.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(y,C,Ta){C.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(y,C,Ta){function c(c){return Array.prototype.slice.call(c)}
var W=y("./extend"),n=y("./compiled-fns");C.exports=function(){function A(){var a=[],d=[];return W(function(){a.push.apply(a,c(arguments))},{def:function(){var e="v"+q;q++;d.push(e);0<arguments.length&&(a.push(e,"="),a.push.apply(a,c(arguments)),a.push(";"));return e},toString:function(){return c([0<d.length?"var "+d.join(",")+";":"",c(a).join("")]).join("")}})}function e(){function a(c,q){e(c,q,"=",d.def(c,q),";")}var d=A(),e=A(),q=d.toString,r=e.toString;return W(function(){d.apply(d,c(arguments))},
{def:d.def,entry:d,exit:e,save:a,set:function(e,c,q){a(e,c);d(e,c,"=",q,";")},toString:function(){return q()+r()}})}var d=0,q=0,a={},t={};return{global:A(),link:function(e){var c="$"+d,q=!1;"object"===typeof e&&e.name&&(c=e.name.replace(/ /g,"_"),q=!0);if(c in a)return c;a[c]=e;q||d++;return c},block:A,proc:function(a,d){function q(){var a="a"+n.length;n.push(a);return a}var n=[];d=d||0;for(var r=0;r<d;++r)q();var r=e(),A=r.toString;return t[a]=W(r,{arg:q,toString:function(){return c(["function(",
n.join(),"){",A(),"}"]).join("")}})},scope:e,cond:function(){var a=c(arguments).join(""),d=e(),q=e(),t=d.toString,r=q.toString;return W(d,{then:function(){d.apply(d,c(arguments));return this},"else":function(){q.apply(q,c(arguments));return this},toString:function(){var d=r();d&&(d="else{"+d+"}");return c(["if(",a,"){",t(),"}",d]).join("")}})},compile:function(){var d=[],e=[];Object.keys(a).sort(function(a,d){var e="$"===a.charAt(0),c="$"===d.charAt(0);return e||c?e&&c?+a.slice(1)<+d.slice(1)?-1:
1:e&&!c?-1:1:a.localeCompare(d)}).forEach(function(c){var q=a[c];d.push(c);e.push(q)});for(var c=0,q=d.length-1;-1<q;q--)if("$"===d[q].charAt(0)){c=q;break}c=d.slice(c).join();q=n[c];if(!q)throw Error("missing precompiled function with key: "+c);return q.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(y,C,Ta){C.exports={$0:function(c){var W,n,A,e,d,q,a,t,ja,wa,K,L,r,B,F,x,G,y,O,Ca,h,g,f,v,P,S,m,na,I,da;W=c.attributes;n=c.current;A=c.framebuffer;e=c.gl;d=c.next;q=c.vao;a=d.blend_color;
t=n.blend_color;ja=d.blend_equation;wa=n.blend_equation;K=d.blend_func;L=n.blend_func;r=d.colorMask;B=n.colorMask;F=d.depth_range;x=n.depth_range;G=d.polygonOffset_offset;y=n.polygonOffset_offset;O=d.sample_coverage;Ca=n.sample_coverage;h=d.scissor_box;g=n.scissor_box;f=d.stencil_func;v=n.stencil_func;P=d.stencil_opBack;S=n.stencil_opBack;m=d.stencil_opFront;na=n.stencil_opFront;I=d.viewport;da=n.viewport;return{poll:function(){var b,k,c,q,W,C,Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa;n.dirty=!1;k=
d.blend_enable;c=d.cull_enable;q=d.depth_enable;W=d.dither;C=d.polygonOffset_enable;Eb=d.sample_alpha;qa=d.sample_enable;Oa=d.scissor_enable;Z=d.stencil_enable;H=d.cull_face;M=n.cull_face;R=d.depth_func;ua=n.depth_func;N=d.depth_mask;Zb=n.depth_mask;Ja=d.frontFace;Q=n.frontFace;u=d.lineWidth;ha=n.lineWidth;ba=d.stencil_mask;Fa=n.stencil_mask;b=A.next;b!==A.cur&&(b?e.bindFramebuffer(36160,b.framebuffer):e.bindFramebuffer(36160,null),A.cur=b);k!==n.blend_enable&&(k?e.enable(3042):e.disable(3042),n.blend_enable=
k);c!==n.cull_enable&&(c?e.enable(2884):e.disable(2884),n.cull_enable=c);q!==n.depth_enable&&(q?e.enable(2929):e.disable(2929),n.depth_enable=q);W!==n.dither&&(W?e.enable(3024):e.disable(3024),n.dither=W);C!==n.polygonOffset_enable&&(C?e.enable(32823):e.disable(32823),n.polygonOffset_enable=C);Eb!==n.sample_alpha&&(Eb?e.enable(32926):e.disable(32926),n.sample_alpha=Eb);qa!==n.sample_enable&&(qa?e.enable(32928):e.disable(32928),n.sample_enable=qa);Oa!==n.scissor_enable&&(Oa?e.enable(3089):e.disable(3089),
n.scissor_enable=Oa);Z!==n.stencil_enable&&(Z?e.enable(2960):e.disable(2960),n.stencil_enable=Z);if(a[0]!==t[0]||a[1]!==t[1]||a[2]!==t[2]||a[3]!==t[3])e.blendColor(a[0],a[1],a[2],a[3]),t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3];if(ja[0]!==wa[0]||ja[1]!==wa[1])e.blendEquationSeparate(ja[0],ja[1]),wa[0]=ja[0],wa[1]=ja[1];if(K[0]!==L[0]||K[1]!==L[1]||K[2]!==L[2]||K[3]!==L[3])e.blendFuncSeparate(K[0],K[1],K[2],K[3]),L[0]=K[0],L[1]=K[1],L[2]=K[2],L[3]=K[3];if(r[0]!==B[0]||r[1]!==B[1]||r[2]!==B[2]||r[3]!==
B[3])e.colorMask(r[0],r[1],r[2],r[3]),B[0]=r[0],B[1]=r[1],B[2]=r[2],B[3]=r[3];H!==M&&(e.cullFace(H),n.cull_face=H);R!==ua&&(e.depthFunc(R),n.depth_func=R);N!==Zb&&(e.depthMask(N),n.depth_mask=N);if(F[0]!==x[0]||F[1]!==x[1])e.depthRange(F[0],F[1]),x[0]=F[0],x[1]=F[1];Ja!==Q&&(e.frontFace(Ja),n.frontFace=Ja);u!==ha&&(e.lineWidth(u),n.lineWidth=u);if(G[0]!==y[0]||G[1]!==y[1])e.polygonOffset(G[0],G[1]),y[0]=G[0],y[1]=G[1];if(O[0]!==Ca[0]||O[1]!==Ca[1])e.sampleCoverage(O[0],O[1]),Ca[0]=O[0],Ca[1]=O[1];
if(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3])e.scissor(h[0],h[1],h[2],h[3]),g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3];if(f[0]!==v[0]||f[1]!==v[1]||f[2]!==v[2])e.stencilFunc(f[0],f[1],f[2]),v[0]=f[0],v[1]=f[1],v[2]=f[2];ba!==Fa&&(e.stencilMask(ba),n.stencil_mask=ba);if(P[0]!==S[0]||P[1]!==S[1]||P[2]!==S[2]||P[3]!==S[3])e.stencilOpSeparate(P[0],P[1],P[2],P[3]),S[0]=P[0],S[1]=P[1],S[2]=P[2],S[3]=P[3];if(m[0]!==na[0]||m[1]!==na[1]||m[2]!==na[2]||m[3]!==na[3])e.stencilOpSeparate(m[0],m[1],m[2],
m[3]),na[0]=m[0],na[1]=m[1],na[2]=m[2],na[3]=m[3];if(I[0]!==da[0]||I[1]!==da[1]||I[2]!==da[2]||I[3]!==da[3])e.viewport(I[0],I[1],I[2],I[3]),da[0]=I[0],da[1]=I[1],da[2]=I[2],da[3]=I[3]},refresh:function(){var b,k,c,la,C,mb,Eb,qa,Oa,Z,H,M,R,ua,N,Zb;n.dirty=!1;k=d.blend_enable;c=d.cull_enable;la=d.depth_enable;C=d.dither;mb=d.polygonOffset_enable;Eb=d.sample_alpha;qa=d.sample_enable;Oa=d.scissor_enable;Z=d.stencil_enable;H=d.cull_face;M=d.depth_func;R=d.depth_mask;ua=d.frontFace;N=d.lineWidth;Zb=d.stencil_mask;
(b=A.next)?e.bindFramebuffer(36160,b.framebuffer):e.bindFramebuffer(36160,null);A.cur=b;b=W[0];b.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=null);b=W[1];b.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(1),
e.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);b=W[2];b.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);b=W[3];b.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,b.x,b.y,b.z,
b.w),b.buffer=null);b=W[4];b.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(4,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);b=W[5];b.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);b=W[6];b.buffer?
(e.enableVertexAttribArray(6),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);b=W[7];b.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);b=W[8];b.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,
b.buffer.buffer),e.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);b=W[9];b.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);b=W[10];b.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(10,
b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);b=W[11];b.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,b.x,b.y,b.z,b.w),b.buffer=null);b=W[12];b.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(12,b.size,b.type,b.normalized,
b.stride,b.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);b=W[13];b.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);b=W[14];b.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(14),
e.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);b=W[15];b.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(15,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);q.currentVAO=null;q.setVAO(q.targetVAO);k?e.enable(3042):e.disable(3042);n.blend_enable=k;c?e.enable(2884):e.disable(2884);n.cull_enable=c;la?e.enable(2929):e.disable(2929);n.depth_enable=la;C?e.enable(3024):e.disable(3024);
n.dither=C;mb?e.enable(32823):e.disable(32823);n.polygonOffset_enable=mb;Eb?e.enable(32926):e.disable(32926);n.sample_alpha=Eb;qa?e.enable(32928):e.disable(32928);n.sample_enable=qa;Oa?e.enable(3089):e.disable(3089);n.scissor_enable=Oa;Z?e.enable(2960):e.disable(2960);n.stencil_enable=Z;e.blendColor(a[0],a[1],a[2],a[3]);t[0]=a[0];t[1]=a[1];t[2]=a[2];t[3]=a[3];e.blendEquationSeparate(ja[0],ja[1]);wa[0]=ja[0];wa[1]=ja[1];e.blendFuncSeparate(K[0],K[1],K[2],K[3]);L[0]=K[0];L[1]=K[1];L[2]=K[2];L[3]=K[3];
e.colorMask(r[0],r[1],r[2],r[3]);B[0]=r[0];B[1]=r[1];B[2]=r[2];B[3]=r[3];e.cullFace(H);n.cull_face=H;e.depthFunc(M);n.depth_func=M;e.depthMask(R);n.depth_mask=R;e.depthRange(F[0],F[1]);x[0]=F[0];x[1]=F[1];e.frontFace(ua);n.frontFace=ua;e.lineWidth(N);n.lineWidth=N;e.polygonOffset(G[0],G[1]);y[0]=G[0];y[1]=G[1];e.sampleCoverage(O[0],O[1]);Ca[0]=O[0];Ca[1]=O[1];e.scissor(h[0],h[1],h[2],h[3]);g[0]=h[0];g[1]=h[1];g[2]=h[2];g[3]=h[3];e.stencilFunc(f[0],f[1],f[2]);v[0]=f[0];v[1]=f[1];v[2]=f[2];e.stencilMask(Zb);
n.stencil_mask=Zb;e.stencilOpSeparate(P[0],P[1],P[2],P[3]);S[0]=P[0];S[1]=P[1];S[2]=P[2];S[3]=P[3];e.stencilOpSeparate(m[0],m[1],m[2],m[3]);na[0]=m[0];na[1]=m[1];na[2]=m[2];na[3]=m[3];e.viewport(I[0],I[1],I[2],I[3]);da[0]=I[0];da[1]=I[1];da[2]=I[2];da[3]=I[3]}}},$3:function(c,W,n,A){var e,d,q,a,t,y,wa,K,L,r,B,F,x,G,ka,O,Ca,h,g,f,v,P,S,m,na,I,da,b,k,Y,la,C,mb;e=c.context;d=c.current;q=c.framebuffer;a=c.gl;t=c.next;y=c.shader;wa=c.vao;K=t.blend_color;L=d.blend_color;r=t.blend_equation;B=d.blend_equation;
F=t.blend_func;x=d.blend_func;G=t.colorMask;ka=d.colorMask;O=t.depth_range;Ca=d.depth_range;h=t.polygonOffset_offset;g=d.polygonOffset_offset;f=t.sample_coverage;v=d.sample_coverage;P=t.scissor_box;S=d.scissor_box;m=t.stencil_func;na=d.stencil_func;I=t.stencil_opBack;da=d.stencil_opBack;b=t.stencil_opFront;k=d.stencil_opFront;Y=t.viewport;la=d.viewport;C={};mb={};return{batch:function(e,c){var n,Z,H,M,R;n=q.next;n!==q.cur&&(n?a.bindFramebuffer(36160,n.framebuffer):a.bindFramebuffer(36160,null),q.cur=
n);if(d.dirty){n=t.dither;n!==d.dither&&(n?a.enable(3024):a.disable(3024),d.dither=n);n=t.blend_enable;n!==d.blend_enable&&(n?a.enable(3042):a.disable(3042),d.blend_enable=n);n=K[0];H=K[1];M=K[2];R=K[3];if(n!==L[0]||H!==L[1]||M!==L[2]||R!==L[3])a.blendColor(n,H,M,R),L[0]=n,L[1]=H,L[2]=M,L[3]=R;n=r[0];H=r[1];if(n!==B[0]||H!==B[1])a.blendEquationSeparate(n,H),B[0]=n,B[1]=H;n=F[0];H=F[1];M=F[2];R=F[3];if(n!==x[0]||H!==x[1]||M!==x[2]||R!==x[3])a.blendFuncSeparate(n,H,M,R),x[0]=n,x[1]=H,x[2]=M,x[3]=R;
n=t.depth_enable;n!==d.depth_enable&&(n?a.enable(2929):a.disable(2929),d.depth_enable=n);n=t.depth_func;n!==d.depth_func&&(a.depthFunc(n),d.depth_func=n);n=O[0];H=O[1];if(n!==Ca[0]||H!==Ca[1])a.depthRange(n,H),Ca[0]=n,Ca[1]=H;n=t.depth_mask;n!==d.depth_mask&&(a.depthMask(n),d.depth_mask=n);n=G[0];H=G[1];M=G[2];R=G[3];if(n!==ka[0]||H!==ka[1]||M!==ka[2]||R!==ka[3])a.colorMask(n,H,M,R),ka[0]=n,ka[1]=H,ka[2]=M,ka[3]=R;n=t.cull_enable;n!==d.cull_enable&&(n?a.enable(2884):a.disable(2884),d.cull_enable=
n);n=t.cull_face;n!==d.cull_face&&(a.cullFace(n),d.cull_face=n);n=t.frontFace;n!==d.frontFace&&(a.frontFace(n),d.frontFace=n);n=t.lineWidth;n!==d.lineWidth&&(a.lineWidth(n),d.lineWidth=n);n=t.polygonOffset_enable;n!==d.polygonOffset_enable&&(n?a.enable(32823):a.disable(32823),d.polygonOffset_enable=n);n=h[0];H=h[1];if(n!==g[0]||H!==g[1])a.polygonOffset(n,H),g[0]=n,g[1]=H;n=t.sample_alpha;n!==d.sample_alpha&&(n?a.enable(32926):a.disable(32926),d.sample_alpha=n);n=t.sample_enable;n!==d.sample_enable&&
(n?a.enable(32928):a.disable(32928),d.sample_enable=n);n=f[0];H=f[1];if(n!==v[0]||H!==v[1])a.sampleCoverage(n,H),v[0]=n,v[1]=H;n=t.stencil_enable;n!==d.stencil_enable&&(n?a.enable(2960):a.disable(2960),d.stencil_enable=n);n=t.stencil_mask;n!==d.stencil_mask&&(a.stencilMask(n),d.stencil_mask=n);n=m[0];H=m[1];M=m[2];if(n!==na[0]||H!==na[1]||M!==na[2])a.stencilFunc(n,H,M),na[0]=n,na[1]=H,na[2]=M;n=b[0];H=b[1];M=b[2];R=b[3];if(n!==k[0]||H!==k[1]||M!==k[2]||R!==k[3])a.stencilOpSeparate(n,H,M,R),k[0]=n,
k[1]=H,k[2]=M,k[3]=R;n=I[0];H=I[1];M=I[2];R=I[3];if(n!==da[0]||H!==da[1]||M!==da[2]||R!==da[3])a.stencilOpSeparate(n,H,M,R),da[0]=n,da[1]=H,da[2]=M,da[3]=R;n=t.scissor_enable;n!==d.scissor_enable&&(n?a.enable(3089):a.disable(3089),d.scissor_enable=n);n=P[0];H=P[1];M=P[2];R=P[3];if(n!==S[0]||H!==S[1]||M!==S[2]||R!==S[3])a.scissor(n,H,M,R),S[0]=n,S[1]=H,S[2]=M,S[3]=R;n=Y[0];H=Y[1];M=Y[2];R=Y[3];if(n!==la[0]||H!==la[1]||M!==la[2]||R!==la[3])a.viewport(n,H,M,R),la[0]=n,la[1]=H,la[2]=M,la[3]=R;d.dirty=
!1}if(n=d.profile)Z=performance.now(),W.count+=c;H=y.program(y.vert,y.frag);a.useProgram(H.program);wa.setVAO(null);M=H.id;(R=mb[M])||(R=mb[M]=A(H));R.call(this,e,c);wa.setVAO(null);n&&(W.cpuTime+=performance.now()-Z)},draw:function(e){var c,A,Z,H,M;c=q.next;c!==q.cur&&(c?a.bindFramebuffer(36160,c.framebuffer):a.bindFramebuffer(36160,null),q.cur=c);if(d.dirty){c=t.dither;c!==d.dither&&(c?a.enable(3024):a.disable(3024),d.dither=c);c=t.blend_enable;c!==d.blend_enable&&(c?a.enable(3042):a.disable(3042),
d.blend_enable=c);c=K[0];Z=K[1];H=K[2];M=K[3];if(c!==L[0]||Z!==L[1]||H!==L[2]||M!==L[3])a.blendColor(c,Z,H,M),L[0]=c,L[1]=Z,L[2]=H,L[3]=M;c=r[0];Z=r[1];if(c!==B[0]||Z!==B[1])a.blendEquationSeparate(c,Z),B[0]=c,B[1]=Z;c=F[0];Z=F[1];H=F[2];M=F[3];if(c!==x[0]||Z!==x[1]||H!==x[2]||M!==x[3])a.blendFuncSeparate(c,Z,H,M),x[0]=c,x[1]=Z,x[2]=H,x[3]=M;c=t.depth_enable;c!==d.depth_enable&&(c?a.enable(2929):a.disable(2929),d.depth_enable=c);c=t.depth_func;c!==d.depth_func&&(a.depthFunc(c),d.depth_func=c);c=O[0];
Z=O[1];if(c!==Ca[0]||Z!==Ca[1])a.depthRange(c,Z),Ca[0]=c,Ca[1]=Z;c=t.depth_mask;c!==d.depth_mask&&(a.depthMask(c),d.depth_mask=c);c=G[0];Z=G[1];H=G[2];M=G[3];if(c!==ka[0]||Z!==ka[1]||H!==ka[2]||M!==ka[3])a.colorMask(c,Z,H,M),ka[0]=c,ka[1]=Z,ka[2]=H,ka[3]=M;c=t.cull_enable;c!==d.cull_enable&&(c?a.enable(2884):a.disable(2884),d.cull_enable=c);c=t.cull_face;c!==d.cull_face&&(a.cullFace(c),d.cull_face=c);c=t.frontFace;c!==d.frontFace&&(a.frontFace(c),d.frontFace=c);c=t.lineWidth;c!==d.lineWidth&&(a.lineWidth(c),
d.lineWidth=c);c=t.polygonOffset_enable;c!==d.polygonOffset_enable&&(c?a.enable(32823):a.disable(32823),d.polygonOffset_enable=c);c=h[0];Z=h[1];if(c!==g[0]||Z!==g[1])a.polygonOffset(c,Z),g[0]=c,g[1]=Z;c=t.sample_alpha;c!==d.sample_alpha&&(c?a.enable(32926):a.disable(32926),d.sample_alpha=c);c=t.sample_enable;c!==d.sample_enable&&(c?a.enable(32928):a.disable(32928),d.sample_enable=c);c=f[0];Z=f[1];if(c!==v[0]||Z!==v[1])a.sampleCoverage(c,Z),v[0]=c,v[1]=Z;c=t.stencil_enable;c!==d.stencil_enable&&(c?
a.enable(2960):a.disable(2960),d.stencil_enable=c);c=t.stencil_mask;c!==d.stencil_mask&&(a.stencilMask(c),d.stencil_mask=c);c=m[0];Z=m[1];H=m[2];if(c!==na[0]||Z!==na[1]||H!==na[2])a.stencilFunc(c,Z,H),na[0]=c,na[1]=Z,na[2]=H;c=b[0];Z=b[1];H=b[2];M=b[3];if(c!==k[0]||Z!==k[1]||H!==k[2]||M!==k[3])a.stencilOpSeparate(c,Z,H,M),k[0]=c,k[1]=Z,k[2]=H,k[3]=M;c=I[0];Z=I[1];H=I[2];M=I[3];if(c!==da[0]||Z!==da[1]||H!==da[2]||M!==da[3])a.stencilOpSeparate(c,Z,H,M),da[0]=c,da[1]=Z,da[2]=H,da[3]=M;c=t.scissor_enable;
c!==d.scissor_enable&&(c?a.enable(3089):a.disable(3089),d.scissor_enable=c);c=P[0];Z=P[1];H=P[2];M=P[3];if(c!==S[0]||Z!==S[1]||H!==S[2]||M!==S[3])a.scissor(c,Z,H,M),S[0]=c,S[1]=Z,S[2]=H,S[3]=M;c=Y[0];Z=Y[1];H=Y[2];M=Y[3];if(c!==la[0]||Z!==la[1]||H!==la[2]||M!==la[3])a.viewport(c,Z,H,M),la[0]=c,la[1]=Z,la[2]=H,la[3]=M;d.dirty=!1}if(c=d.profile)A=performance.now(),W.count++;Z=y.program(y.vert,y.frag);a.useProgram(Z.program);wa.setVAO(null);H=Z.id;(M=C[H])||(M=C[H]=n(Z));M.call(this,e);wa.setVAO(null);
c&&(W.cpuTime+=performance.now()-A)},scope:function(b,a,f){var g,c;if(g=d.profile)c=performance.now(),W.count++;a(e,b,f);g&&(W.cpuTime+=performance.now()-c)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(c,W,n,A,e,d,q,a,t,y,wa,K,L,r,B,F,x,G,ka,O,Ca,h,
g,f,v,P,S,m,na,I,da,b,k,Y,la,C,mb,Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra,ec,pc,mc,ud,wc,aa,J,ia,Da,tb,Qc,xc,D,w,ga,ta,U,fa,oa){var E,z,ca,T,za,ma,l,lc,X,p,Hb,zb,Ve,ke,ue,$d,bd,pe,td,de,re,Fd,Id,Vd,ee,Ye,lf,bf,xd,De,be,Pd,Yd,le,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb;E=c.attributes;z=c.context;ca=c.current;T=c.draw;za=c.elements;ma=c.framebuffer;l=c.gl;lc=c.next;X=c.shader;p=c.uniforms;Hb=c.vao;zb=lc.blend_color;
Ve=ca.blend_color;ke=lc.blend_equation;ue=ca.blend_equation;$d=lc.blend_func;bd=ca.blend_func;pe=lc.colorMask;td=ca.colorMask;de=lc.depth_range;re=ca.depth_range;Fd=lc.polygonOffset_offset;Id=ca.polygonOffset_offset;Vd=lc.sample_coverage;ee=ca.sample_coverage;Ye=lc.scissor_box;lf=ca.scissor_box;bf=lc.stencil_func;xd=ca.stencil_func;De=lc.stencil_opBack;be=ca.stencil_opBack;Pd=lc.stencil_opFront;Yd=ca.stencil_opFront;le=lc.viewport;pd=ca.viewport;ld={};wd={};od=new Float32Array(16);gd=new Float32Array(16);
Ac=new Float32Array(16);qd=new Float32Array(16);Rc=new Float32Array(16);Lc=new Float32Array(16);sc=new Float32Array(16);$a=new Float32Array(16);jc=new Float32Array(16);Fb=new Float32Array(16);rc=new Float32Array(16);Ua=new Float32Array(16);Jc=new Float32Array(16);cc=new Float32Array(16);$c=new Float32Array(16);Nd=new Float32Array(16);md=new Float32Array(16);Bc=new Float32Array(16);Xb=new Float32Array(16);Gc=new Float32Array(16);Sc=new Float32Array(16);La=new Float32Array(16);ub=new Float32Array(16);
Xa=new Float32Array(16);pa=new Float32Array(16);vd=new Float32Array(16);Bb=new Float32Array(16);Sa=new Float32Array(16);Vb=new Float32Array(16);cb=new Float32Array(16);Yb=new Float32Array(16);Rb=new Float32Array(16);return{batch:function(b,f){var g,c,k,h;g=ma.next;g!==ma.cur&&(g?l.bindFramebuffer(36160,g.framebuffer):l.bindFramebuffer(36160,null),ma.cur=g);if(ca.dirty){var m,p,n,v,W,X,I,P,S,Y,O,$a,C,sa,da,va,Ua,na,Aa,Ca,Ia,zb,Fb,Ra,cc;m=pe[0];p=pe[1];n=pe[2];v=pe[3];if(m!==td[0]||p!==td[1]||n!==td[2]||
v!==td[3])l.colorMask(m,p,n,v),td[0]=m,td[1]=p,td[2]=n,td[3]=v;W=lc.frontFace;W!==ca.frontFace&&(l.frontFace(W),ca.frontFace=W);X=lc.polygonOffset_enable;X!==ca.polygonOffset_enable&&(X?l.enable(32823):l.disable(32823),ca.polygonOffset_enable=X);I=Fd[0];P=Fd[1];if(I!==Id[0]||P!==Id[1])l.polygonOffset(I,P),Id[0]=I,Id[1]=P;S=lc.sample_alpha;S!==ca.sample_alpha&&(S?l.enable(32926):l.disable(32926),ca.sample_alpha=S);Y=lc.sample_enable;Y!==ca.sample_enable&&(Y?l.enable(32928):l.disable(32928),ca.sample_enable=
Y);O=Vd[0];$a=Vd[1];if(O!==ee[0]||$a!==ee[1])l.sampleCoverage(O,$a),ee[0]=O,ee[1]=$a;C=lc.stencil_enable;C!==ca.stencil_enable&&(C?l.enable(2960):l.disable(2960),ca.stencil_enable=C);sa=lc.stencil_mask;sa!==ca.stencil_mask&&(l.stencilMask(sa),ca.stencil_mask=sa);da=bf[0];va=bf[1];Ua=bf[2];if(da!==xd[0]||va!==xd[1]||Ua!==xd[2])l.stencilFunc(da,va,Ua),xd[0]=da,xd[1]=va,xd[2]=Ua;na=Pd[0];Aa=Pd[1];Ca=Pd[2];Ia=Pd[3];if(na!==Yd[0]||Aa!==Yd[1]||Ca!==Yd[2]||Ia!==Yd[3])l.stencilOpSeparate(na,Aa,Ca,Ia),Yd[0]=
na,Yd[1]=Aa,Yd[2]=Ca,Yd[3]=Ia;zb=De[0];Fb=De[1];Ra=De[2];cc=De[3];if(zb!==be[0]||Fb!==be[1]||Ra!==be[2]||cc!==be[3])l.stencilOpSeparate(zb,Fb,Ra,cc),be[0]=zb,be[1]=Fb,be[2]=Ra,be[3]=cc}l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);ca.blend_enable=!1;l.blendEquationSeparate(32774,32774);ue[0]=32774;ue[1]=32774;l.blendFuncSeparate(770,771,1,1);bd[0]=770;bd[1]=771;bd[2]=1;bd[3]=1;l.enable(2884);ca.cull_enable=!0;l.cullFace(1029);ca.cull_face=1029;l.enable(2929);ca.depth_enable=
!0;l.depthFunc(513);ca.depth_func=513;l.depthMask(!0);ca.depth_mask=!0;l.depthRange(0,1);re[0]=0;re[1]=1;l.disable(3024);ca.dither=!1;l.lineWidth(2);ca.lineWidth=2;l.enable(3089);ca.scissor_enable=!0;c=ca.profile;ca.profile=!1;l.useProgram(Eb.program);var Lc,Rc,la,xa,sc,Ka,Ye,fb,hb,ya,Ac,Ea,pb,qb,Ya,Za,Jc,jc,$c,Wa,Mb,gd,Ga,rc,Qa,Ba,kb,wb,Db,rb,od,xb,qd;Hb.setVAO(null);Lc=ec.location;Rc=E[Lc];Rc.buffer||l.enableVertexAttribArray(Lc);if(Rc.type!==A.dtype||4!==Rc.size||Rc.buffer!==A||!1!==Rc.normalized||
0!==Rc.offset||0!==Rc.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(Lc,4,A.dtype,!1,0,0),Rc.type=A.dtype,Rc.size=4,Rc.buffer=A,Rc.normalized=!1,Rc.offset=0,Rc.stride=0;la=pc.location;xa=E[la];xa.buffer||l.enableVertexAttribArray(la);if(xa.type!==e.dtype||4!==xa.size||xa.buffer!==e||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)l.bindBuffer(34962,e.buffer),l.vertexAttribPointer(la,4,e.dtype,!1,0,0),xa.type=e.dtype,xa.size=4,xa.buffer=e,xa.normalized=!1,xa.offset=0,xa.stride=0;sc=mc.location;
Ka=E[sc];Ka.buffer||l.enableVertexAttribArray(sc);if(Ka.type!==d.dtype||4!==Ka.size||Ka.buffer!==d||!1!==Ka.normalized||0!==Ka.offset||0!==Ka.stride)l.bindBuffer(34962,d.buffer),l.vertexAttribPointer(sc,4,d.dtype,!1,0,0),Ka.type=d.dtype,Ka.size=4,Ka.buffer=d,Ka.normalized=!1,Ka.offset=0,Ka.stride=0;Ye=ud.location;fb=E[Ye];fb.buffer||l.enableVertexAttribArray(Ye);if(fb.type!==q.dtype||4!==fb.size||fb.buffer!==q||!1!==fb.normalized||0!==fb.offset||0!==fb.stride)l.bindBuffer(34962,q.buffer),l.vertexAttribPointer(Ye,
4,q.dtype,!1,0,0),fb.type=q.dtype,fb.size=4,fb.buffer=q,fb.normalized=!1,fb.offset=0,fb.stride=0;hb=wc.location;ya=E[hb];ya.buffer||l.enableVertexAttribArray(hb);if(ya.type!==a.dtype||4!==ya.size||ya.buffer!==a||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(hb,4,a.dtype,!1,0,0),ya.type=a.dtype,ya.size=4,ya.buffer=a,ya.normalized=!1,ya.offset=0,ya.stride=0;Ac=aa.location;Ea=E[Ac];Ea.buffer||l.enableVertexAttribArray(Ac);if(Ea.type!==t.dtype||4!==
Ea.size||Ea.buffer!==t||!1!==Ea.normalized||0!==Ea.offset||0!==Ea.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(Ac,4,t.dtype,!1,0,0),Ea.type=t.dtype,Ea.size=4,Ea.buffer=t,Ea.normalized=!1,Ea.offset=0,Ea.stride=0;pb=J.location;qb=E[pb];qb.buffer||l.enableVertexAttribArray(pb);if(qb.type!==y.dtype||4!==qb.size||qb.buffer!==y||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(pb,4,y.dtype,!1,0,0),qb.type=y.dtype,qb.size=4,qb.buffer=y,qb.normalized=
!1,qb.offset=0,qb.stride=0;Ya=ia.location;Za=E[Ya];Za.buffer||l.enableVertexAttribArray(Ya);if(Za.type!==wa.dtype||4!==Za.size||Za.buffer!==wa||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)l.bindBuffer(34962,wa.buffer),l.vertexAttribPointer(Ya,4,wa.dtype,!1,0,0),Za.type=wa.dtype,Za.size=4,Za.buffer=wa,Za.normalized=!1,Za.offset=0,Za.stride=0;Jc=Da.location;jc=E[Jc];jc.buffer||l.enableVertexAttribArray(Jc);if(jc.type!==K.dtype||4!==jc.size||jc.buffer!==K||!1!==jc.normalized||0!==jc.offset||0!==
jc.stride)l.bindBuffer(34962,K.buffer),l.vertexAttribPointer(Jc,4,K.dtype,!1,0,0),jc.type=K.dtype,jc.size=4,jc.buffer=K,jc.normalized=!1,jc.offset=0,jc.stride=0;$c=tb.location;Wa=E[$c];Wa.buffer||l.enableVertexAttribArray($c);if(Wa.type!==L.dtype||4!==Wa.size||Wa.buffer!==L||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)l.bindBuffer(34962,L.buffer),l.vertexAttribPointer($c,4,L.dtype,!1,0,0),Wa.type=L.dtype,Wa.size=4,Wa.buffer=L,Wa.normalized=!1,Wa.offset=0,Wa.stride=0;Mb=Qc.location;gd=E[Mb];gd.buffer||
l.enableVertexAttribArray(Mb);if(gd.type!==r.dtype||4!==gd.size||gd.buffer!==r||!1!==gd.normalized||0!==gd.offset||0!==gd.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(Mb,4,r.dtype,!1,0,0),gd.type=r.dtype,gd.size=4,gd.buffer=r,gd.normalized=!1,gd.offset=0,gd.stride=0;Ga=xc.location;rc=E[Ga];rc.buffer||l.enableVertexAttribArray(Ga);if(rc.type!==B.dtype||4!==rc.size||rc.buffer!==B||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(Ga,4,B.dtype,
!1,0,0),rc.type=B.dtype,rc.size=4,rc.buffer=B,rc.normalized=!1,rc.offset=0,rc.stride=0;Qa=D.location;Ba=E[Qa];Ba.buffer||l.enableVertexAttribArray(Qa);if(Ba.type!==F.dtype||4!==Ba.size||Ba.buffer!==F||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer(Qa,4,F.dtype,!1,0,0),Ba.type=F.dtype,Ba.size=4,Ba.buffer=F,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;kb=w.location;wb=E[kb];wb.buffer||l.enableVertexAttribArray(kb);if(wb.type!==x.dtype||4!==wb.size||wb.buffer!==
x||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(kb,4,x.dtype,!1,0,0),wb.type=x.dtype,wb.size=4,wb.buffer=x,wb.normalized=!1,wb.offset=0,wb.stride=0;Db=ga.location;rb=E[Db];rb.buffer||l.enableVertexAttribArray(Db);if(rb.type!==G.dtype||4!==rb.size||rb.buffer!==G||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)l.bindBuffer(34962,G.buffer),l.vertexAttribPointer(Db,4,G.dtype,!1,0,0),rb.type=G.dtype,rb.size=4,rb.buffer=G,rb.normalized=!1,rb.offset=
0,rb.stride=0;od=Oa.location;xb=E[od];xb.buffer||l.enableVertexAttribArray(od);if(xb.type!==ka.dtype||4!==xb.size||xb.buffer!==ka||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)l.bindBuffer(34962,ka.buffer),l.vertexAttribPointer(od,4,ka.dtype,!1,0,0),xb.type=ka.dtype,xb.size=4,xb.buffer=ka,xb.normalized=!1,xb.offset=0,xb.stride=0;l.uniform1i(ta.location,qa.bind());(qd=T.elements)?l.bindBuffer(34963,qd.buffer.buffer):Hb.currentVAO&&(qd=za.getElements(Hb.currentVAO.elements))&&l.bindBuffer(34963,
qd.buffer.buffer);for(k=0;k<f;++k){h=b[k];var $d,de,le,Nd,ke,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,mb,me,Yc,Jf,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ta,ce,ae,Zd,Oe,Wd;ld.height=h.viewportHeight;ld.width=h.viewportWidth;ld.x=h.viewportX;ld.y=h.viewportY;$d=ld.x|0;de=ld.y|0;le="width"in ld?ld.width|0:z.framebufferWidth-$d;Nd="height"in ld?ld.height|0:z.framebufferHeight-de;ke=z.viewportWidth;z.viewportWidth=le;Wb=z.viewportHeight;z.viewportHeight=
Nd;l.viewport($d,de,le,Nd);pd[0]=$d;pd[1]=de;pd[2]=le;pd[3]=Nd;wd.height=h.scissorHeight;wd.width=h.scissorWidth;wd.x=h.scissorX;wd.y=h.scissorY;dc=wd.x|0;Pb=wd.y|0;Ha="width"in wd?wd.width|0:z.framebufferWidth-dc;$b="height"in wd?wd.height|0:z.framebufferHeight-Pb;l.scissor(dc,Pb,Ha,$b);lf[0]=dc;lf[1]=Pb;lf[2]=Ha;lf[3]=$b;lb=h.dim0A;l.uniformMatrix4fv(H.location,!1,Array.isArray(lb)||lb instanceof Float32Array?lb:(md[0]=lb[0],md[1]=lb[1],md[2]=lb[2],md[3]=lb[3],md[4]=lb[4],md[5]=lb[5],md[6]=lb[6],
md[7]=lb[7],md[8]=lb[8],md[9]=lb[9],md[10]=lb[10],md[11]=lb[11],md[12]=lb[12],md[13]=lb[13],md[14]=lb[14],md[15]=lb[15],md));yb=h.dim1A;l.uniformMatrix4fv(N.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(Bc[0]=yb[0],Bc[1]=yb[1],Bc[2]=yb[2],Bc[3]=yb[3],Bc[4]=yb[4],Bc[5]=yb[5],Bc[6]=yb[6],Bc[7]=yb[7],Bc[8]=yb[8],Bc[9]=yb[9],Bc[10]=yb[10],Bc[11]=yb[11],Bc[12]=yb[12],Bc[13]=yb[13],Bc[14]=yb[14],Bc[15]=yb[15],Bc));Nb=h.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(Nb)||Nb instanceof
Float32Array?Nb:(Xb[0]=Nb[0],Xb[1]=Nb[1],Xb[2]=Nb[2],Xb[3]=Nb[3],Xb[4]=Nb[4],Xb[5]=Nb[5],Xb[6]=Nb[6],Xb[7]=Nb[7],Xb[8]=Nb[8],Xb[9]=Nb[9],Xb[10]=Nb[10],Xb[11]=Nb[11],Xb[12]=Nb[12],Xb[13]=Nb[13],Xb[14]=Nb[14],Xb[15]=Nb[15],Xb));Qb=h.dim1B;l.uniformMatrix4fv(Zb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Gc[0]=Qb[0],Gc[1]=Qb[1],Gc[2]=Qb[2],Gc[3]=Qb[3],Gc[4]=Qb[4],Gc[5]=Qb[5],Gc[6]=Qb[6],Gc[7]=Qb[7],Gc[8]=Qb[8],Gc[9]=Qb[9],Gc[10]=Qb[10],Gc[11]=Qb[11],Gc[12]=Qb[12],Gc[13]=Qb[13],Gc[14]=
Qb[14],Gc[15]=Qb[15],Gc));gc=h.dim0C;l.uniformMatrix4fv(R.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Sc[0]=gc[0],Sc[1]=gc[1],Sc[2]=gc[2],Sc[3]=gc[3],Sc[4]=gc[4],Sc[5]=gc[5],Sc[6]=gc[6],Sc[7]=gc[7],Sc[8]=gc[8],Sc[9]=gc[9],Sc[10]=gc[10],Sc[11]=gc[11],Sc[12]=gc[12],Sc[13]=gc[13],Sc[14]=gc[14],Sc[15]=gc[15],Sc));ic=h.dim1C;l.uniformMatrix4fv(Ja.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(La[0]=ic[0],La[1]=ic[1],La[2]=ic[2],La[3]=ic[3],La[4]=ic[4],La[5]=ic[5],La[6]=
ic[6],La[7]=ic[7],La[8]=ic[8],La[9]=ic[9],La[10]=ic[10],La[11]=ic[11],La[12]=ic[12],La[13]=ic[13],La[14]=ic[14],La[15]=ic[15],La));Tc=h.dim0D;l.uniformMatrix4fv(ua.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?Tc:(ub[0]=Tc[0],ub[1]=Tc[1],ub[2]=Tc[2],ub[3]=Tc[3],ub[4]=Tc[4],ub[5]=Tc[5],ub[6]=Tc[6],ub[7]=Tc[7],ub[8]=Tc[8],ub[9]=Tc[9],ub[10]=Tc[10],ub[11]=Tc[11],ub[12]=Tc[12],ub[13]=Tc[13],ub[14]=Tc[14],ub[15]=Tc[15],ub));Cc=h.dim1D;l.uniformMatrix4fv(Q.location,!1,Array.isArray(Cc)||Cc instanceof
Float32Array?Cc:(Xa[0]=Cc[0],Xa[1]=Cc[1],Xa[2]=Cc[2],Xa[3]=Cc[3],Xa[4]=Cc[4],Xa[5]=Cc[5],Xa[6]=Cc[6],Xa[7]=Cc[7],Xa[8]=Cc[8],Xa[9]=Cc[9],Xa[10]=Cc[10],Xa[11]=Cc[11],Xa[12]=Cc[12],Xa[13]=Cc[13],Xa[14]=Cc[14],Xa[15]=Cc[15],Xa));Dc=h.loA;l.uniformMatrix4fv(ac.location,!1,Array.isArray(Dc)||Dc instanceof Float32Array?Dc:(pa[0]=Dc[0],pa[1]=Dc[1],pa[2]=Dc[2],pa[3]=Dc[3],pa[4]=Dc[4],pa[5]=Dc[5],pa[6]=Dc[6],pa[7]=Dc[7],pa[8]=Dc[8],pa[9]=Dc[9],pa[10]=Dc[10],pa[11]=Dc[11],pa[12]=Dc[12],pa[13]=Dc[13],pa[14]=
Dc[14],pa[15]=Dc[15],pa));Ec=h.hiA;l.uniformMatrix4fv(ha.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(vd[0]=Ec[0],vd[1]=Ec[1],vd[2]=Ec[2],vd[3]=Ec[3],vd[4]=Ec[4],vd[5]=Ec[5],vd[6]=Ec[6],vd[7]=Ec[7],vd[8]=Ec[8],vd[9]=Ec[9],vd[10]=Ec[10],vd[11]=Ec[11],vd[12]=Ec[12],vd[13]=Ec[13],vd[14]=Ec[14],vd[15]=Ec[15],vd));Nc=h.loB;l.uniformMatrix4fv(bb.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(Bb[0]=Nc[0],Bb[1]=Nc[1],Bb[2]=Nc[2],Bb[3]=Nc[3],Bb[4]=Nc[4],Bb[5]=Nc[5],Bb[6]=Nc[6],
Bb[7]=Nc[7],Bb[8]=Nc[8],Bb[9]=Nc[9],Bb[10]=Nc[10],Bb[11]=Nc[11],Bb[12]=Nc[12],Bb[13]=Nc[13],Bb[14]=Nc[14],Bb[15]=Nc[15],Bb));ad=h.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(Sa[0]=ad[0],Sa[1]=ad[1],Sa[2]=ad[2],Sa[3]=ad[3],Sa[4]=ad[4],Sa[5]=ad[5],Sa[6]=ad[6],Sa[7]=ad[7],Sa[8]=ad[8],Sa[9]=ad[9],Sa[10]=ad[10],Sa[11]=ad[11],Sa[12]=ad[12],Sa[13]=ad[13],Sa[14]=ad[14],Sa[15]=ad[15],Sa));Uc=h.loC;l.uniformMatrix4fv(V.location,!1,Array.isArray(Uc)||Uc instanceof
Float32Array?Uc:(Vb[0]=Uc[0],Vb[1]=Uc[1],Vb[2]=Uc[2],Vb[3]=Uc[3],Vb[4]=Uc[4],Vb[5]=Uc[5],Vb[6]=Uc[6],Vb[7]=Uc[7],Vb[8]=Uc[8],Vb[9]=Uc[9],Vb[10]=Uc[10],Vb[11]=Uc[11],Vb[12]=Uc[12],Vb[13]=Uc[13],Vb[14]=Uc[14],Vb[15]=Uc[15],Vb));Oc=h.hiC;l.uniformMatrix4fv(Fa.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(cb[0]=Oc[0],cb[1]=Oc[1],cb[2]=Oc[2],cb[3]=Oc[3],cb[4]=Oc[4],cb[5]=Oc[5],cb[6]=Oc[6],cb[7]=Oc[7],cb[8]=Oc[8],cb[9]=Oc[9],cb[10]=Oc[10],cb[11]=Oc[11],cb[12]=Oc[12],cb[13]=Oc[13],cb[14]=
Oc[14],cb[15]=Oc[15],cb));Kb=h.loD;l.uniformMatrix4fv(sb.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(Yb[0]=Kb[0],Yb[1]=Kb[1],Yb[2]=Kb[2],Yb[3]=Kb[3],Yb[4]=Kb[4],Yb[5]=Kb[5],Yb[6]=Kb[6],Yb[7]=Kb[7],Yb[8]=Kb[8],Yb[9]=Kb[9],Yb[10]=Kb[10],Yb[11]=Kb[11],Yb[12]=Kb[12],Yb[13]=Kb[13],Yb[14]=Kb[14],Yb[15]=Kb[15],Yb));Gb=h.hiD;l.uniformMatrix4fv(Ma.location,!1,Array.isArray(Gb)||Gb instanceof Float32Array?Gb:(Rb[0]=Gb[0],Rb[1]=Gb[1],Rb[2]=Gb[2],Rb[3]=Gb[3],Rb[4]=Gb[4],Rb[5]=Gb[5],Rb[6]=Gb[6],
Rb[7]=Gb[7],Rb[8]=Gb[8],Rb[9]=Gb[9],Rb[10]=Gb[10],Rb[11]=Gb[11],Rb[12]=Gb[12],Rb[13]=Gb[13],Rb[14]=Gb[14],Rb[15]=Gb[15],Rb));Pc=h.resolution;Ic=Pc[0];hc=Pc[1];k&&Vc===Ic&&Xc===hc||(Vc=Ic,Xc=hc,l.uniform2f(U.location,Ic,hc));fd=h.viewBoxPos;mb=fd[0];Yc=fd[1];k&&me===mb&&Jf===Yc||(me=mb,Jf=Yc,l.uniform2f(fa.location,mb,Yc));he=h.viewBoxSize;se=he[0];Qd=he[1];k&&qe===se&&Dd===Qd||(qe=se,Dd=Qd,l.uniform2f(oa.location,se,Qd));Bd=h.maskHeight;k&&hd===Bd||(hd=Bd,l.uniform1f(ea.location,Bd));Fc=h.drwLayer;
k&&nd===Fc||(nd=Fc,l.uniform1f(u.location,Fc));jd=h.contextColor;Zc=jd[0];zd=jd[1];ve=jd[2];Ta=jd[3];k&&kd===Zc&&Ad===zd&&ye===ve&&ce===Ta||(kd=Zc,Ad=zd,ye=ve,ce=Ta,l.uniform4f(Z.location,Zc,zd,ve,Ta));(ae=h.maskTexture)&&"framebuffer"===ae._reglType&&(ae=ae.color[0]);Zd=ae._texture;l.uniform1i(ra.location,Zd.bind());Oe=h.offset;if(Wd=h.count)qd?l.drawElements(1,Wd,qd.type,Oe<<(qd.type-5121>>1)):l.drawArrays(1,Oe,Wd),z.viewportWidth=ke,z.viewportHeight=Wb,Zd.unbind()}qa.unbind();ca.dirty=!0;Hb.setVAO(null);
ca.profile=c},draw:function(b){var f,g,c,k,h,m;f=ma.next;f!==ma.cur&&(f?l.bindFramebuffer(36160,f.framebuffer):l.bindFramebuffer(36160,null),ma.cur=f);if(ca.dirty){f=pe[0];m=pe[1];g=pe[2];c=pe[3];if(f!==td[0]||m!==td[1]||g!==td[2]||c!==td[3])l.colorMask(f,m,g,c),td[0]=f,td[1]=m,td[2]=g,td[3]=c;f=lc.frontFace;f!==ca.frontFace&&(l.frontFace(f),ca.frontFace=f);f=lc.polygonOffset_enable;f!==ca.polygonOffset_enable&&(f?l.enable(32823):l.disable(32823),ca.polygonOffset_enable=f);f=Fd[0];m=Fd[1];if(f!==
Id[0]||m!==Id[1])l.polygonOffset(f,m),Id[0]=f,Id[1]=m;f=lc.sample_alpha;f!==ca.sample_alpha&&(f?l.enable(32926):l.disable(32926),ca.sample_alpha=f);f=lc.sample_enable;f!==ca.sample_enable&&(f?l.enable(32928):l.disable(32928),ca.sample_enable=f);f=Vd[0];m=Vd[1];if(f!==ee[0]||m!==ee[1])l.sampleCoverage(f,m),ee[0]=f,ee[1]=m;f=lc.stencil_enable;f!==ca.stencil_enable&&(f?l.enable(2960):l.disable(2960),ca.stencil_enable=f);f=lc.stencil_mask;f!==ca.stencil_mask&&(l.stencilMask(f),ca.stencil_mask=f);f=bf[0];
m=bf[1];g=bf[2];if(f!==xd[0]||m!==xd[1]||g!==xd[2])l.stencilFunc(f,m,g),xd[0]=f,xd[1]=m,xd[2]=g;f=Pd[0];m=Pd[1];g=Pd[2];c=Pd[3];if(f!==Yd[0]||m!==Yd[1]||g!==Yd[2]||c!==Yd[3])l.stencilOpSeparate(f,m,g,c),Yd[0]=f,Yd[1]=m,Yd[2]=g,Yd[3]=c;f=De[0];m=De[1];g=De[2];c=De[3];if(f!==be[0]||m!==be[1]||g!==be[2]||c!==be[3])l.stencilOpSeparate(f,m,g,c),be[0]=f,be[1]=m,be[2]=g,be[3]=c}ld.height=b.viewportHeight;ld.width=b.viewportWidth;ld.x=b.viewportX;ld.y=b.viewportY;g=ld.x|0;c=ld.y|0;k="width"in ld?ld.width|
0:z.framebufferWidth-g;h="height"in ld?ld.height|0:z.framebufferHeight-c;f=z.viewportWidth;z.viewportWidth=k;m=z.viewportHeight;z.viewportHeight=h;l.viewport(g,c,k,h);pd[0]=g;pd[1]=c;pd[2]=k;pd[3]=h;l.blendColor(0,0,0,0);Ve[0]=0;Ve[1]=0;Ve[2]=0;Ve[3]=0;l.disable(3042);ca.blend_enable=!1;l.blendEquationSeparate(32774,32774);ue[0]=32774;ue[1]=32774;l.blendFuncSeparate(770,771,1,1);bd[0]=770;bd[1]=771;bd[2]=1;bd[3]=1;l.enable(2884);ca.cull_enable=!0;l.cullFace(1029);ca.cull_face=1029;l.enable(2929);
ca.depth_enable=!0;l.depthFunc(513);ca.depth_func=513;l.depthMask(!0);ca.depth_mask=!0;l.depthRange(0,1);re[0]=0;re[1]=1;l.disable(3024);ca.dither=!1;l.lineWidth(2);ca.lineWidth=2;wd.height=b.scissorHeight;wd.width=b.scissorWidth;wd.x=b.scissorX;wd.y=b.scissorY;g=wd.x|0;c=wd.y|0;k="width"in wd?wd.width|0:z.framebufferWidth-g;h="height"in wd?wd.height|0:z.framebufferHeight-c;l.scissor(g,c,k,h);lf[0]=g;lf[1]=c;lf[2]=k;lf[3]=h;l.enable(3089);ca.scissor_enable=!0;g=ca.profile;ca.profile=!1;l.useProgram(n.program);
Hb.setVAO(null);c=ec.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==A.dtype||4!==k.size||k.buffer!==A||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(c,4,A.dtype,!1,0,0),k.type=A.dtype,k.size=4,k.buffer=A,k.normalized=!1,k.offset=0,k.stride=0;c=pc.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,e.buffer),l.vertexAttribPointer(c,
4,e.dtype,!1,0,0),k.type=e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;c=mc.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==d.dtype||4!==k.size||k.buffer!==d||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,d.buffer),l.vertexAttribPointer(c,4,d.dtype,!1,0,0),k.type=d.dtype,k.size=4,k.buffer=d,k.normalized=!1,k.offset=0,k.stride=0;c=ud.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==q.dtype||4!==k.size||k.buffer!==q||!1!==k.normalized||
0!==k.offset||0!==k.stride)l.bindBuffer(34962,q.buffer),l.vertexAttribPointer(c,4,q.dtype,!1,0,0),k.type=q.dtype,k.size=4,k.buffer=q,k.normalized=!1,k.offset=0,k.stride=0;c=wc.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==a.dtype||4!==k.size||k.buffer!==a||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(c,4,a.dtype,!1,0,0),k.type=a.dtype,k.size=4,k.buffer=a,k.normalized=!1,k.offset=0,k.stride=0;c=aa.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);
if(k.type!==t.dtype||4!==k.size||k.buffer!==t||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(c,4,t.dtype,!1,0,0),k.type=t.dtype,k.size=4,k.buffer=t,k.normalized=!1,k.offset=0,k.stride=0;c=J.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==y.dtype||4!==k.size||k.buffer!==y||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(c,4,y.dtype,!1,0,0),k.type=y.dtype,k.size=4,k.buffer=y,k.normalized=
!1,k.offset=0,k.stride=0;c=ia.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==wa.dtype||4!==k.size||k.buffer!==wa||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,wa.buffer),l.vertexAttribPointer(c,4,wa.dtype,!1,0,0),k.type=wa.dtype,k.size=4,k.buffer=wa,k.normalized=!1,k.offset=0,k.stride=0;c=Da.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==K.dtype||4!==k.size||k.buffer!==K||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,K.buffer),
l.vertexAttribPointer(c,4,K.dtype,!1,0,0),k.type=K.dtype,k.size=4,k.buffer=K,k.normalized=!1,k.offset=0,k.stride=0;c=tb.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==L.dtype||4!==k.size||k.buffer!==L||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,L.buffer),l.vertexAttribPointer(c,4,L.dtype,!1,0,0),k.type=L.dtype,k.size=4,k.buffer=L,k.normalized=!1,k.offset=0,k.stride=0;c=Qc.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==r.dtype||4!==k.size||
k.buffer!==r||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(c,4,r.dtype,!1,0,0),k.type=r.dtype,k.size=4,k.buffer=r,k.normalized=!1,k.offset=0,k.stride=0;c=xc.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==B.dtype||4!==k.size||k.buffer!==B||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(c,4,B.dtype,!1,0,0),k.type=B.dtype,k.size=4,k.buffer=B,k.normalized=!1,k.offset=0,k.stride=0;
c=D.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==F.dtype||4!==k.size||k.buffer!==F||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer(c,4,F.dtype,!1,0,0),k.type=F.dtype,k.size=4,k.buffer=F,k.normalized=!1,k.offset=0,k.stride=0;c=w.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==x.dtype||4!==k.size||k.buffer!==x||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(c,
4,x.dtype,!1,0,0),k.type=x.dtype,k.size=4,k.buffer=x,k.normalized=!1,k.offset=0,k.stride=0;c=ga.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==G.dtype||4!==k.size||k.buffer!==G||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,G.buffer),l.vertexAttribPointer(c,4,G.dtype,!1,0,0),k.type=G.dtype,k.size=4,k.buffer=G,k.normalized=!1,k.offset=0,k.stride=0;c=Oa.location;k=E[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==ka.dtype||4!==k.size||k.buffer!==ka||!1!==
k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,ka.buffer),l.vertexAttribPointer(c,4,ka.dtype,!1,0,0),k.type=ka.dtype,k.size=4,k.buffer=ka,k.normalized=!1,k.offset=0,k.stride=0;c=b.dim0A;l.uniformMatrix4fv(H.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(od[0]=c[0],od[1]=c[1],od[2]=c[2],od[3]=c[3],od[4]=c[4],od[5]=c[5],od[6]=c[6],od[7]=c[7],od[8]=c[8],od[9]=c[9],od[10]=c[10],od[11]=c[11],od[12]=c[12],od[13]=c[13],od[14]=c[14],od[15]=c[15],od));c=b.dim1A;l.uniformMatrix4fv(N.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(gd[0]=c[0],gd[1]=c[1],gd[2]=c[2],gd[3]=c[3],gd[4]=c[4],gd[5]=c[5],gd[6]=c[6],gd[7]=c[7],gd[8]=c[8],gd[9]=c[9],gd[10]=c[10],gd[11]=c[11],gd[12]=c[12],gd[13]=c[13],gd[14]=c[14],gd[15]=c[15],gd));c=b.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Ac[0]=c[0],Ac[1]=c[1],Ac[2]=c[2],Ac[3]=c[3],Ac[4]=c[4],Ac[5]=c[5],Ac[6]=c[6],Ac[7]=c[7],Ac[8]=c[8],Ac[9]=c[9],Ac[10]=c[10],Ac[11]=c[11],Ac[12]=c[12],Ac[13]=c[13],Ac[14]=
c[14],Ac[15]=c[15],Ac));c=b.dim1B;l.uniformMatrix4fv(Zb.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(qd[0]=c[0],qd[1]=c[1],qd[2]=c[2],qd[3]=c[3],qd[4]=c[4],qd[5]=c[5],qd[6]=c[6],qd[7]=c[7],qd[8]=c[8],qd[9]=c[9],qd[10]=c[10],qd[11]=c[11],qd[12]=c[12],qd[13]=c[13],qd[14]=c[14],qd[15]=c[15],qd));c=b.dim0C;l.uniformMatrix4fv(R.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Rc[0]=c[0],Rc[1]=c[1],Rc[2]=c[2],Rc[3]=c[3],Rc[4]=c[4],Rc[5]=c[5],Rc[6]=c[6],Rc[7]=c[7],Rc[8]=c[8],Rc[9]=
c[9],Rc[10]=c[10],Rc[11]=c[11],Rc[12]=c[12],Rc[13]=c[13],Rc[14]=c[14],Rc[15]=c[15],Rc));c=b.dim1C;l.uniformMatrix4fv(Ja.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Lc[0]=c[0],Lc[1]=c[1],Lc[2]=c[2],Lc[3]=c[3],Lc[4]=c[4],Lc[5]=c[5],Lc[6]=c[6],Lc[7]=c[7],Lc[8]=c[8],Lc[9]=c[9],Lc[10]=c[10],Lc[11]=c[11],Lc[12]=c[12],Lc[13]=c[13],Lc[14]=c[14],Lc[15]=c[15],Lc));c=b.dim0D;l.uniformMatrix4fv(ua.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(sc[0]=c[0],sc[1]=c[1],sc[2]=c[2],sc[3]=
c[3],sc[4]=c[4],sc[5]=c[5],sc[6]=c[6],sc[7]=c[7],sc[8]=c[8],sc[9]=c[9],sc[10]=c[10],sc[11]=c[11],sc[12]=c[12],sc[13]=c[13],sc[14]=c[14],sc[15]=c[15],sc));c=b.dim1D;l.uniformMatrix4fv(Q.location,!1,Array.isArray(c)||c instanceof Float32Array?c:($a[0]=c[0],$a[1]=c[1],$a[2]=c[2],$a[3]=c[3],$a[4]=c[4],$a[5]=c[5],$a[6]=c[6],$a[7]=c[7],$a[8]=c[8],$a[9]=c[9],$a[10]=c[10],$a[11]=c[11],$a[12]=c[12],$a[13]=c[13],$a[14]=c[14],$a[15]=c[15],$a));c=b.loA;l.uniformMatrix4fv(ac.location,!1,Array.isArray(c)||c instanceof
Float32Array?c:(jc[0]=c[0],jc[1]=c[1],jc[2]=c[2],jc[3]=c[3],jc[4]=c[4],jc[5]=c[5],jc[6]=c[6],jc[7]=c[7],jc[8]=c[8],jc[9]=c[9],jc[10]=c[10],jc[11]=c[11],jc[12]=c[12],jc[13]=c[13],jc[14]=c[14],jc[15]=c[15],jc));c=b.hiA;l.uniformMatrix4fv(ha.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Fb[0]=c[0],Fb[1]=c[1],Fb[2]=c[2],Fb[3]=c[3],Fb[4]=c[4],Fb[5]=c[5],Fb[6]=c[6],Fb[7]=c[7],Fb[8]=c[8],Fb[9]=c[9],Fb[10]=c[10],Fb[11]=c[11],Fb[12]=c[12],Fb[13]=c[13],Fb[14]=c[14],Fb[15]=c[15],Fb));c=b.loB;l.uniformMatrix4fv(bb.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(rc[0]=c[0],rc[1]=c[1],rc[2]=c[2],rc[3]=c[3],rc[4]=c[4],rc[5]=c[5],rc[6]=c[6],rc[7]=c[7],rc[8]=c[8],rc[9]=c[9],rc[10]=c[10],rc[11]=c[11],rc[12]=c[12],rc[13]=c[13],rc[14]=c[14],rc[15]=c[15],rc));c=b.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Ua[0]=c[0],Ua[1]=c[1],Ua[2]=c[2],Ua[3]=c[3],Ua[4]=c[4],Ua[5]=c[5],Ua[6]=c[6],Ua[7]=c[7],Ua[8]=c[8],Ua[9]=c[9],Ua[10]=c[10],Ua[11]=c[11],Ua[12]=c[12],Ua[13]=c[13],Ua[14]=
c[14],Ua[15]=c[15],Ua));c=b.loC;l.uniformMatrix4fv(V.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Jc[0]=c[0],Jc[1]=c[1],Jc[2]=c[2],Jc[3]=c[3],Jc[4]=c[4],Jc[5]=c[5],Jc[6]=c[6],Jc[7]=c[7],Jc[8]=c[8],Jc[9]=c[9],Jc[10]=c[10],Jc[11]=c[11],Jc[12]=c[12],Jc[13]=c[13],Jc[14]=c[14],Jc[15]=c[15],Jc));c=b.hiC;l.uniformMatrix4fv(Fa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(cc[0]=c[0],cc[1]=c[1],cc[2]=c[2],cc[3]=c[3],cc[4]=c[4],cc[5]=c[5],cc[6]=c[6],cc[7]=c[7],cc[8]=c[8],cc[9]=c[9],
cc[10]=c[10],cc[11]=c[11],cc[12]=c[12],cc[13]=c[13],cc[14]=c[14],cc[15]=c[15],cc));c=b.loD;l.uniformMatrix4fv(sb.location,!1,Array.isArray(c)||c instanceof Float32Array?c:($c[0]=c[0],$c[1]=c[1],$c[2]=c[2],$c[3]=c[3],$c[4]=c[4],$c[5]=c[5],$c[6]=c[6],$c[7]=c[7],$c[8]=c[8],$c[9]=c[9],$c[10]=c[10],$c[11]=c[11],$c[12]=c[12],$c[13]=c[13],$c[14]=c[14],$c[15]=c[15],$c));c=b.hiD;l.uniformMatrix4fv(Ma.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Nd[0]=c[0],Nd[1]=c[1],Nd[2]=c[2],Nd[3]=c[3],Nd[4]=
c[4],Nd[5]=c[5],Nd[6]=c[6],Nd[7]=c[7],Nd[8]=c[8],Nd[9]=c[9],Nd[10]=c[10],Nd[11]=c[11],Nd[12]=c[12],Nd[13]=c[13],Nd[14]=c[14],Nd[15]=c[15],Nd));c=b.resolution;l.uniform2f(U.location,c[0],c[1]);c=b.viewBoxPos;l.uniform2f(fa.location,c[0],c[1]);c=b.viewBoxSize;l.uniform2f(oa.location,c[0],c[1]);l.uniform1f(ea.location,b.maskHeight);l.uniform1f(u.location,b.drwLayer);c=b.contextColor;l.uniform4f(Z.location,c[0],c[1],c[2],c[3]);(c=b.maskTexture)&&"framebuffer"===c._reglType&&(c=c.color[0]);c=c._texture;
l.uniform1i(ra.location,c.bind());l.uniform1i(ta.location,O.bind());(k=T.elements)?l.bindBuffer(34963,k.buffer.buffer):Hb.currentVAO&&(k=za.getElements(Hb.currentVAO.elements))&&l.bindBuffer(34963,k.buffer.buffer);h=b.offset;if(b=b.count)k?l.drawElements(1,b,k.type,h<<(k.type-5121>>1)):l.drawArrays(1,h,b),ca.dirty=!0,Hb.setVAO(null),z.viewportWidth=f,z.viewportHeight=m,ca.profile=g,c.unbind(),O.unbind()},scope:function(c,l,n){var w,u,J,E,D,W,aa,M,H,N,R,Q,V,U,ma,fa,ia,Z,O,ga,ba,za,ea,ha,ta,pa,pc,$a,
oa,Ua,Da,xa,La,ee,Fb,Rc,Hb,ya,Xa,Ea,Pd,cc,Gc,Lc,Xb,jc,Sa,ua,ub,sc,Ga,Sc,Qa,Ba,ud,ra,gd,Bb,cb,qa,Ac,rc,xd,td,be,Jc,Bc,$c,Vb,Ha,tb,lb,yb,pd,qd,Yd,Qc,Rb,od,wc,vd,Yb,Fa,md,Ve,Kb,Gb,ue,bd,Fd,lf,De,Nd,ec,bf,Ja,Oa,mc,Vd,pe,Ma,sb,Id,re,Fc,Zb,xc,Zc,kd,bb,ac,Eb,Ta,Ze,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Hf,Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf,qf,nf,rf,Af,Bf,Ne,Ae,of,pf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,
Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ld.height=c.viewportHeight;ld.width=c.viewportWidth;ld.x=c.viewportX;ld.y=c.viewportY;w=ld.x|0;u=ld.y|0;J="width"in ld?ld.width|0:z.framebufferWidth-w;E="height"in ld?ld.height|0:z.framebufferHeight-u;D=z.viewportWidth;z.viewportWidth=
J;W=z.viewportHeight;z.viewportHeight=E;aa=le[0];le[0]=w;M=le[1];le[1]=u;H=le[2];le[2]=J;N=le[3];le[3]=E;R=zb[0];zb[0]=0;Q=zb[1];zb[1]=0;V=zb[2];zb[2]=0;U=zb[3];zb[3]=0;ma=lc.blend_enable;lc.blend_enable=!1;fa=ke[0];ke[0]=32774;ia=ke[1];ke[1]=32774;Z=$d[0];$d[0]=770;O=$d[1];$d[1]=771;ga=$d[2];$d[2]=1;ba=$d[3];$d[3]=1;za=lc.cull_enable;lc.cull_enable=!0;ea=lc.cull_face;lc.cull_face=1029;ha=lc.depth_enable;lc.depth_enable=!0;ta=lc.depth_func;lc.depth_func=513;pa=lc.depth_mask;lc.depth_mask=!0;pc=de[0];
de[0]=0;$a=de[1];de[1]=1;oa=lc.dither;lc.dither=!1;Ua=lc.lineWidth;lc.lineWidth=2;wd.height=c.scissorHeight;wd.width=c.scissorWidth;wd.x=c.scissorX;wd.y=c.scissorY;Da=wd.x|0;xa=wd.y|0;La="width"in wd?wd.width|0:z.framebufferWidth-Da;ee="height"in wd?wd.height|0:z.framebufferHeight-xa;Fb=Ye[0];Ye[0]=Da;Rc=Ye[1];Ye[1]=xa;Hb=Ye[2];Ye[2]=La;ya=Ye[3];Ye[3]=ee;Xa=lc.scissor_enable;lc.scissor_enable=!0;Ea=ca.profile;ca.profile=!1;Pd=c.offset;cc=T.offset;T.offset=Pd;Gc=c.count;Lc=T.count;T.count=Gc;Xb=T.primitive;
T.primitive=1;jc=c.contextColor;Sa=p[24];p[24]=jc;ua=c.dim0A;ub=p[3];p[3]=ua;sc=c.dim0B;Ga=p[5];p[5]=sc;Sc=c.dim0C;Qa=p[7];p[7]=Sc;Ba=c.dim0D;ud=p[9];p[9]=Ba;ra=c.dim1A;gd=p[4];p[4]=ra;Bb=c.dim1B;cb=p[6];p[6]=Bb;qa=c.dim1C;Ac=p[8];p[8]=qa;rc=c.dim1D;xd=p[10];p[10]=rc;td=c.drwLayer;be=p[23];p[23]=td;Jc=c.hiA;Bc=p[12];p[12]=Jc;$c=c.hiB;Vb=p[14];p[14]=$c;Ha=c.hiC;tb=p[16];p[16]=Ha;lb=c.hiD;yb=p[18];p[18]=lb;pd=c.loA;qd=p[11];p[11]=pd;Yd=c.loB;Qc=p[13];p[13]=Yd;Rb=c.loC;od=p[15];p[15]=Rb;wc=c.loD;vd=
p[17];p[17]=wc;Yb=c.maskHeight;Fa=p[22];p[22]=Yb;md=c.maskTexture;Ve=p[25];p[25]=md;Kb=p[26];p[26]=Ca;Gb=c.resolution;ue=p[19];p[19]=Gb;bd=c.viewBoxPos;Fd=p[20];p[20]=bd;lf=c.viewBoxSize;De=p[21];p[21]=lf;Nd=h.buffer;h.buffer=ka;ec=h.divisor;h.divisor=0;bf=h.normalized;h.normalized=!1;Ja=h.offset;h.offset=0;Oa=h.size;h.size=0;mc=h.state;h.state=1;Vd=h.stride;h.stride=0;pe=h.type;h.type=ka.dtype;Ma=h.w;h.w=0;sb=h.x;h.x=0;Id=h.y;h.y=0;re=h.z;h.z=0;Fc=g.buffer;g.buffer=A;Zb=g.divisor;g.divisor=0;xc=
g.normalized;g.normalized=!1;Zc=g.offset;g.offset=0;kd=g.size;g.size=0;bb=g.state;g.state=1;ac=g.stride;g.stride=0;Eb=g.type;g.type=A.dtype;Ta=g.w;g.w=0;Ze=g.x;g.x=0;ce=g.y;g.y=0;ae=g.z;g.z=0;Zd=f.buffer;f.buffer=e;Fe=f.divisor;f.divisor=0;Wd=f.normalized;f.normalized=!1;fe=f.offset;f.offset=0;zc=f.size;f.size=0;Wc=f.state;f.state=1;ne=f.stride;f.stride=0;ie=f.type;f.type=e.dtype;Cd=f.w;f.w=0;Hd=f.x;f.x=0;Jd=f.y;f.y=0;Kd=f.z;f.z=0;ge=v.buffer;v.buffer=d;te=v.divisor;v.divisor=0;we=v.normalized;v.normalized=
!1;je=v.offset;v.offset=0;Hf=v.size;v.size=0;Pe=v.state;v.state=1;Le=v.stride;v.stride=0;oe=v.type;v.type=d.dtype;Be=v.w;v.w=0;Ge=v.x;v.x=0;He=v.y;v.y=0;Ie=v.z;v.z=0;Ce=P.buffer;P.buffer=q;Ed=P.divisor;P.divisor=0;Od=P.normalized;P.normalized=!1;Ud=P.offset;P.offset=0;Xd=P.size;P.size=0;Je=P.state;P.state=1;yd=P.stride;P.stride=0;Ld=P.type;P.type=q.dtype;ze=P.w;P.w=0;Ke=P.x;P.x=0;ff=P.y;P.y=0;Xe=P.z;P.z=0;Qe=S.buffer;S.buffer=a;Me=S.divisor;S.divisor=0;We=S.normalized;S.normalized=!1;Ue=S.offset;
S.offset=0;Re=S.size;S.size=0;Se=S.state;S.state=1;Md=S.stride;S.stride=0;Rd=S.type;S.type=a.dtype;Te=S.w;S.w=0;gf=S.x;S.x=0;mf=S.y;S.y=0;cf=S.z;S.z=0;hf=m.buffer;m.buffer=t;jf=m.divisor;m.divisor=0;kf=m.normalized;m.normalized=!1;qf=m.offset;m.offset=0;nf=m.size;m.size=0;rf=m.state;m.state=1;Af=m.stride;m.stride=0;Bf=m.type;m.type=t.dtype;Ne=m.w;m.w=0;Ae=m.x;m.x=0;of=m.y;m.y=0;pf=m.z;m.z=0;Cf=na.buffer;na.buffer=y;Ff=na.divisor;na.divisor=0;zf=na.normalized;na.normalized=!1;Df=na.offset;na.offset=
0;Ef=na.size;na.size=0;vf=na.state;na.state=1;wf=na.stride;na.stride=0;uf=na.type;na.type=y.dtype;xf=na.w;na.w=0;yf=na.x;na.x=0;If=na.y;na.y=0;Kf=na.z;na.z=0;Lf=I.buffer;I.buffer=wa;Mf=I.divisor;I.divisor=0;sf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;Gf=I.size;I.size=0;tf=I.state;I.state=1;dg=I.stride;I.stride=0;Sf=I.type;I.type=wa.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;df=I.y;I.y=0;$e=I.z;I.z=0;Nf=da.buffer;da.buffer=K;Of=da.divisor;da.divisor=0;eg=da.normalized;da.normalized=!1;fg=da.offset;
da.offset=0;gg=da.size;da.size=0;hg=da.state;da.state=1;ig=da.stride;da.stride=0;Wf=da.type;da.type=K.dtype;Uf=da.w;da.w=0;Xf=da.x;da.x=0;Yf=da.y;da.y=0;Zf=da.z;da.z=0;jg=b.buffer;b.buffer=L;rg=b.divisor;b.divisor=0;sg=b.normalized;b.normalized=!1;tg=b.offset;b.offset=0;ug=b.size;b.size=0;vg=b.state;b.state=1;wg=b.stride;b.stride=0;xg=b.type;b.type=L.dtype;yg=b.w;b.w=0;zg=b.x;b.x=0;Ag=b.y;b.y=0;Bg=b.z;b.z=0;ef=k.buffer;k.buffer=r;af=k.divisor;k.divisor=0;Pf=k.normalized;k.normalized=!1;Qf=k.offset;
k.offset=0;kg=k.size;k.size=0;lg=k.state;k.state=1;mg=k.stride;k.stride=0;ng=k.type;k.type=r.dtype;og=k.w;k.w=0;$f=k.x;k.x=0;Vf=k.y;k.y=0;ag=k.z;k.z=0;bg=Y.buffer;Y.buffer=B;cg=Y.divisor;Y.divisor=0;pg=Y.normalized;Y.normalized=!1;Cg=Y.offset;Y.offset=0;Dg=Y.size;Y.size=0;Eg=Y.state;Y.state=1;Fg=Y.stride;Y.stride=0;Gg=Y.type;Y.type=B.dtype;Hg=Y.w;Y.w=0;Ig=Y.x;Y.x=0;Jg=Y.y;Y.y=0;Kg=Y.z;Y.z=0;Lg=la.buffer;la.buffer=F;Mg=la.divisor;la.divisor=0;Ng=la.normalized;la.normalized=!1;Og=la.offset;la.offset=
0;Pg=la.size;la.size=0;Qg=la.state;la.state=1;Rg=la.stride;la.stride=0;Sg=la.type;la.type=F.dtype;Tg=la.w;la.w=0;Ug=la.x;la.x=0;Vg=la.y;la.y=0;Wg=la.z;la.z=0;Xg=C.buffer;C.buffer=x;Yg=C.divisor;C.divisor=0;Zg=C.normalized;C.normalized=!1;$g=C.offset;C.offset=0;ah=C.size;C.size=0;bh=C.state;C.state=1;ch=C.stride;C.stride=0;dh=C.type;C.type=x.dtype;eh=C.w;C.w=0;fh=C.x;C.x=0;gh=C.y;C.y=0;hh=C.z;C.z=0;ih=mb.buffer;mb.buffer=G;jh=mb.divisor;mb.divisor=0;kh=mb.normalized;mb.normalized=!1;lh=mb.offset;mb.offset=
0;mh=mb.size;mb.size=0;nh=mb.state;mb.state=1;oh=mb.stride;mb.stride=0;ph=mb.type;mb.type=G.dtype;qh=mb.w;mb.w=0;rh=mb.x;mb.x=0;sh=mb.y;mb.y=0;th=mb.z;mb.z=0;uh=X.vert;X.vert=2;vh=X.frag;X.frag=1;ca.dirty=!0;l(z,c,n);z.viewportWidth=D;z.viewportHeight=W;le[0]=aa;le[1]=M;le[2]=H;le[3]=N;zb[0]=R;zb[1]=Q;zb[2]=V;zb[3]=U;lc.blend_enable=ma;ke[0]=fa;ke[1]=ia;$d[0]=Z;$d[1]=O;$d[2]=ga;$d[3]=ba;lc.cull_enable=za;lc.cull_face=ea;lc.depth_enable=ha;lc.depth_func=ta;lc.depth_mask=pa;de[0]=pc;de[1]=$a;lc.dither=
oa;lc.lineWidth=Ua;Ye[0]=Fb;Ye[1]=Rc;Ye[2]=Hb;Ye[3]=ya;lc.scissor_enable=Xa;ca.profile=Ea;T.offset=cc;T.count=Lc;T.primitive=Xb;p[24]=Sa;p[3]=ub;p[5]=Ga;p[7]=Qa;p[9]=ud;p[4]=gd;p[6]=cb;p[8]=Ac;p[10]=xd;p[23]=be;p[12]=Bc;p[14]=Vb;p[16]=tb;p[18]=yb;p[11]=qd;p[13]=Qc;p[15]=od;p[17]=vd;p[22]=Fa;p[25]=Ve;p[26]=Kb;p[19]=ue;p[20]=Fd;p[21]=De;h.buffer=Nd;h.divisor=ec;h.normalized=bf;h.offset=Ja;h.size=Oa;h.state=mc;h.stride=Vd;h.type=pe;h.w=Ma;h.x=sb;h.y=Id;h.z=re;g.buffer=Fc;g.divisor=Zb;g.normalized=xc;
g.offset=Zc;g.size=kd;g.state=bb;g.stride=ac;g.type=Eb;g.w=Ta;g.x=Ze;g.y=ce;g.z=ae;f.buffer=Zd;f.divisor=Fe;f.normalized=Wd;f.offset=fe;f.size=zc;f.state=Wc;f.stride=ne;f.type=ie;f.w=Cd;f.x=Hd;f.y=Jd;f.z=Kd;v.buffer=ge;v.divisor=te;v.normalized=we;v.offset=je;v.size=Hf;v.state=Pe;v.stride=Le;v.type=oe;v.w=Be;v.x=Ge;v.y=He;v.z=Ie;P.buffer=Ce;P.divisor=Ed;P.normalized=Od;P.offset=Ud;P.size=Xd;P.state=Je;P.stride=yd;P.type=Ld;P.w=ze;P.x=Ke;P.y=ff;P.z=Xe;S.buffer=Qe;S.divisor=Me;S.normalized=We;S.offset=
Ue;S.size=Re;S.state=Se;S.stride=Md;S.type=Rd;S.w=Te;S.x=gf;S.y=mf;S.z=cf;m.buffer=hf;m.divisor=jf;m.normalized=kf;m.offset=qf;m.size=nf;m.state=rf;m.stride=Af;m.type=Bf;m.w=Ne;m.x=Ae;m.y=of;m.z=pf;na.buffer=Cf;na.divisor=Ff;na.normalized=zf;na.offset=Df;na.size=Ef;na.state=vf;na.stride=wf;na.type=uf;na.w=xf;na.x=yf;na.y=If;na.z=Kf;I.buffer=Lf;I.divisor=Mf;I.normalized=sf;I.offset=Rf;I.size=Gf;I.state=tf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=df;I.z=$e;da.buffer=Nf;da.divisor=Of;da.normalized=eg;
da.offset=fg;da.size=gg;da.state=hg;da.stride=ig;da.type=Wf;da.w=Uf;da.x=Xf;da.y=Yf;da.z=Zf;b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=ug;b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;k.buffer=ef;k.divisor=af;k.normalized=Pf;k.offset=Qf;k.size=kg;k.state=lg;k.stride=mg;k.type=ng;k.w=og;k.x=$f;k.y=Vf;k.z=ag;Y.buffer=bg;Y.divisor=cg;Y.normalized=pg;Y.offset=Cg;Y.size=Dg;Y.state=Eg;Y.stride=Fg;Y.type=Gg;Y.w=Hg;Y.x=Ig;Y.y=Jg;Y.z=Kg;la.buffer=Lg;la.divisor=Mg;la.normalized=
Ng;la.offset=Og;la.size=Pg;la.state=Qg;la.stride=Rg;la.type=Sg;la.w=Tg;la.x=Ug;la.y=Vg;la.z=Wg;C.buffer=Xg;C.divisor=Yg;C.normalized=Zg;C.offset=$g;C.size=ah;C.state=bh;C.stride=ch;C.type=dh;C.w=eh;C.x=fh;C.y=gh;C.z=hh;mb.buffer=ih;mb.divisor=jh;mb.normalized=kh;mb.offset=lh;mb.size=mh;mb.state=nh;mb.stride=oh;mb.type=ph;mb.w=qh;mb.x=rh;mb.y=sh;mb.z=th;X.vert=uh;X.frag=vh;ca.dirty=!0}}},$1:function(c,W){var n,A,e,d,q,a,t,y,wa,K,L,r,B,F,x,G,C,O,Ca,h,g,f,v,P,S,m,na,I,da,b;n=c.attributes;A=c.current;
e=c.framebuffer;d=c.gl;q=c.next;a=c.vao;t=q.blend_color;y=A.blend_color;wa=q.blend_equation;K=A.blend_equation;L=q.blend_func;r=A.blend_func;B=q.colorMask;F=A.colorMask;x=q.depth_range;G=A.depth_range;C=q.polygonOffset_offset;O=A.polygonOffset_offset;Ca=q.sample_coverage;h=A.sample_coverage;g=q.scissor_box;f=A.scissor_box;v=q.stencil_func;P=A.stencil_func;S=q.stencil_opBack;m=A.stencil_opBack;na=q.stencil_opFront;I=A.stencil_opFront;da=q.viewport;b=A.viewport;return{poll:function(){var a,c,n,W,mb,
Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma;A.dirty=!1;c=q.blend_enable;n=q.cull_enable;W=q.depth_enable;mb=q.dither;Eb=q.polygonOffset_enable;qa=q.sample_alpha;Oa=q.sample_enable;Z=q.scissor_enable;H=q.stencil_enable;M=q.cull_face;R=A.cull_face;ua=q.depth_func;N=A.depth_func;Zb=q.depth_mask;Ja=A.depth_mask;Q=q.frontFace;u=A.frontFace;ha=q.lineWidth;ba=A.lineWidth;Fa=q.stencil_mask;Ma=A.stencil_mask;a=e.next;a!==e.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null),e.cur=
a);c!==A.blend_enable&&(c?d.enable(3042):d.disable(3042),A.blend_enable=c);n!==A.cull_enable&&(n?d.enable(2884):d.disable(2884),A.cull_enable=n);W!==A.depth_enable&&(W?d.enable(2929):d.disable(2929),A.depth_enable=W);mb!==A.dither&&(mb?d.enable(3024):d.disable(3024),A.dither=mb);Eb!==A.polygonOffset_enable&&(Eb?d.enable(32823):d.disable(32823),A.polygonOffset_enable=Eb);qa!==A.sample_alpha&&(qa?d.enable(32926):d.disable(32926),A.sample_alpha=qa);Oa!==A.sample_enable&&(Oa?d.enable(32928):d.disable(32928),
A.sample_enable=Oa);Z!==A.scissor_enable&&(Z?d.enable(3089):d.disable(3089),A.scissor_enable=Z);H!==A.stencil_enable&&(H?d.enable(2960):d.disable(2960),A.stencil_enable=H);if(t[0]!==y[0]||t[1]!==y[1]||t[2]!==y[2]||t[3]!==y[3])d.blendColor(t[0],t[1],t[2],t[3]),y[0]=t[0],y[1]=t[1],y[2]=t[2],y[3]=t[3];if(wa[0]!==K[0]||wa[1]!==K[1])d.blendEquationSeparate(wa[0],wa[1]),K[0]=wa[0],K[1]=wa[1];if(L[0]!==r[0]||L[1]!==r[1]||L[2]!==r[2]||L[3]!==r[3])d.blendFuncSeparate(L[0],L[1],L[2],L[3]),r[0]=L[0],r[1]=L[1],
r[2]=L[2],r[3]=L[3];if(B[0]!==F[0]||B[1]!==F[1]||B[2]!==F[2]||B[3]!==F[3])d.colorMask(B[0],B[1],B[2],B[3]),F[0]=B[0],F[1]=B[1],F[2]=B[2],F[3]=B[3];M!==R&&(d.cullFace(M),A.cull_face=M);ua!==N&&(d.depthFunc(ua),A.depth_func=ua);Zb!==Ja&&(d.depthMask(Zb),A.depth_mask=Zb);if(x[0]!==G[0]||x[1]!==G[1])d.depthRange(x[0],x[1]),G[0]=x[0],G[1]=x[1];Q!==u&&(d.frontFace(Q),A.frontFace=Q);ha!==ba&&(d.lineWidth(ha),A.lineWidth=ha);if(C[0]!==O[0]||C[1]!==O[1])d.polygonOffset(C[0],C[1]),O[0]=C[0],O[1]=C[1];if(Ca[0]!==
h[0]||Ca[1]!==h[1])d.sampleCoverage(Ca[0],Ca[1]),h[0]=Ca[0],h[1]=Ca[1];if(g[0]!==f[0]||g[1]!==f[1]||g[2]!==f[2]||g[3]!==f[3])d.scissor(g[0],g[1],g[2],g[3]),f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[3];if(v[0]!==P[0]||v[1]!==P[1]||v[2]!==P[2])d.stencilFunc(v[0],v[1],v[2]),P[0]=v[0],P[1]=v[1],P[2]=v[2];Fa!==Ma&&(d.stencilMask(Fa),A.stencil_mask=Fa);if(S[0]!==m[0]||S[1]!==m[1]||S[2]!==m[2]||S[3]!==m[3])d.stencilOpSeparate(S[0],S[1],S[2],S[3]),m[0]=S[0],m[1]=S[1],m[2]=S[2],m[3]=S[3];if(na[0]!==I[0]||na[1]!==
I[1]||na[2]!==I[2]||na[3]!==I[3])d.stencilOpSeparate(na[0],na[1],na[2],na[3]),I[0]=na[0],I[1]=na[1],I[2]=na[2],I[3]=na[3];if(da[0]!==b[0]||da[1]!==b[1]||da[2]!==b[2]||da[3]!==b[3])d.viewport(da[0],da[1],da[2],da[3]),b[0]=da[0],b[1]=da[1],b[2]=da[2],b[3]=da[3]},refresh:function(){var c,Y,la,Ta,mb,Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja;A.dirty=!1;Y=q.blend_enable;la=q.cull_enable;Ta=q.depth_enable;mb=q.dither;Eb=q.polygonOffset_enable;qa=q.sample_alpha;Oa=q.sample_enable;Z=q.scissor_enable;H=q.stencil_enable;
M=q.cull_face;R=q.depth_func;ua=q.depth_mask;N=q.frontFace;Zb=q.lineWidth;Ja=q.stencil_mask;(c=e.next)?d.bindFramebuffer(36160,c.framebuffer):d.bindFramebuffer(36160,null);e.cur=c;c=n[0];c.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(0,c.divisor);c=n[1];c.buffer?(d.enableVertexAttribArray(1),
d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(1,c.divisor);c=n[2];c.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(2,c.divisor);
c=n[3];c.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(3,c.divisor);c=n[4];c.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=
null);W.vertexAttribDivisorANGLE(4,c.divisor);c=n[5];c.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(5,c.divisor);c=n[6];c.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(6),
d.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(6,c.divisor);c=n[7];c.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(7,c.divisor);c=n[8];c.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,
c.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(8,c.divisor);c=n[9];c.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(9,c.divisor);c=n[10];c.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(10,
c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(10,c.divisor);c=n[11];c.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(11,c.divisor);c=n[12];c.buffer?(d.enableVertexAttribArray(12),
d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(12,c.divisor);c=n[13];c.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(13,
c.divisor);c=n[14];c.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(14,c.divisor);c=n[15];c.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,c.x,
c.y,c.z,c.w),c.buffer=null);W.vertexAttribDivisorANGLE(15,c.divisor);a.currentVAO=null;a.setVAO(a.targetVAO);Y?d.enable(3042):d.disable(3042);A.blend_enable=Y;la?d.enable(2884):d.disable(2884);A.cull_enable=la;Ta?d.enable(2929):d.disable(2929);A.depth_enable=Ta;mb?d.enable(3024):d.disable(3024);A.dither=mb;Eb?d.enable(32823):d.disable(32823);A.polygonOffset_enable=Eb;qa?d.enable(32926):d.disable(32926);A.sample_alpha=qa;Oa?d.enable(32928):d.disable(32928);A.sample_enable=Oa;Z?d.enable(3089):d.disable(3089);
A.scissor_enable=Z;H?d.enable(2960):d.disable(2960);A.stencil_enable=H;d.blendColor(t[0],t[1],t[2],t[3]);y[0]=t[0];y[1]=t[1];y[2]=t[2];y[3]=t[3];d.blendEquationSeparate(wa[0],wa[1]);K[0]=wa[0];K[1]=wa[1];d.blendFuncSeparate(L[0],L[1],L[2],L[3]);r[0]=L[0];r[1]=L[1];r[2]=L[2];r[3]=L[3];d.colorMask(B[0],B[1],B[2],B[3]);F[0]=B[0];F[1]=B[1];F[2]=B[2];F[3]=B[3];d.cullFace(M);A.cull_face=M;d.depthFunc(R);A.depth_func=R;d.depthMask(ua);A.depth_mask=ua;d.depthRange(x[0],x[1]);G[0]=x[0];G[1]=x[1];d.frontFace(N);
A.frontFace=N;d.lineWidth(Zb);A.lineWidth=Zb;d.polygonOffset(C[0],C[1]);O[0]=C[0];O[1]=C[1];d.sampleCoverage(Ca[0],Ca[1]);h[0]=Ca[0];h[1]=Ca[1];d.scissor(g[0],g[1],g[2],g[3]);f[0]=g[0];f[1]=g[1];f[2]=g[2];f[3]=g[3];d.stencilFunc(v[0],v[1],v[2]);P[0]=v[0];P[1]=v[1];P[2]=v[2];d.stencilMask(Ja);A.stencil_mask=Ja;d.stencilOpSeparate(S[0],S[1],S[2],S[3]);m[0]=S[0];m[1]=S[1];m[2]=S[2];m[3]=S[3];d.stencilOpSeparate(na[0],na[1],na[2],na[3]);I[0]=na[0];I[1]=na[1];I[2]=na[2];I[3]=na[3];d.viewport(da[0],da[1],
da[2],da[3]);b[0]=da[0];b[1]=da[1];b[2]=da[2];b[3]=da[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(c,W,n,A,e,d,q,a,t,y,wa,K,L,r,B,F,x,G,C,O,Ca,h,g,f,v,P,S,m,na,I,da,b,k,Y,la,Ta,mb,Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja){var Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra,ec,pc,mc,ud,wc,aa,J,ia,Da,tb,Qc,xc,D,w,ga,ta,U,fa,oa,E,z,ca,T,za,ma,l,lc,X,p,Hb,zb;Q=c.attributes;u=c.buffer;ha=c.context;ba=c.current;Fa=
c.draw;Ma=c.elements;ac=c.extensions;bb=c.framebuffer;V=c.gl;sb=c.isBufferArgs;ea=c.next;ra=c.shader;ec=c.uniforms;pc=c.vao;mc=ea.blend_color;ud=ba.blend_color;wc=ea.blend_equation;aa=ba.blend_equation;J=ea.blend_func;ia=ba.blend_func;Da=ea.colorMask;tb=ba.colorMask;Qc=ea.depth_range;xc=ba.depth_range;D=ea.polygonOffset_offset;w=ba.polygonOffset_offset;ga=ea.sample_coverage;ta=ba.sample_coverage;U=ea.scissor_box;fa=ba.scissor_box;oa=ea.stencil_func;E=ba.stencil_func;z=ea.stencil_opBack;ca=ba.stencil_opBack;
T=ea.stencil_opFront;za=ba.stencil_opFront;ma=ea.viewport;l=ba.viewport;lc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={};X.buffer=n;X.divisor=1;p={};p.buffer=A;p.divisor=1;Hb={};Hb.buffer=e;Hb.divisor=1;zb={};zb.buffer=d;zb.divisor=1;return{batch:function(a,c){var d,f,e,g,h,n;d=bb.next;d!==bb.cur&&(d?V.bindFramebuffer(36160,d.framebuffer):V.bindFramebuffer(36160,null),bb.cur=d);if(ba.dirty){var q,v,x,t,J,A,B,G,P,F,S,y,C,U,ma,O,wa,Ca,ja,ra,qd,Rc,
Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,wc;q=ea.dither;q!==ba.dither&&(q?V.enable(3024):V.disable(3024),ba.dither=q);v=ea.depth_func;v!==ba.depth_func&&(V.depthFunc(v),ba.depth_func=v);x=Qc[0];t=Qc[1];if(x!==xc[0]||t!==xc[1])V.depthRange(x,t),xc[0]=x,xc[1]=t;J=ea.depth_mask;J!==ba.depth_mask&&(V.depthMask(J),ba.depth_mask=J);A=Da[0];B=Da[1];G=Da[2];P=Da[3];if(A!==tb[0]||B!==tb[1]||G!==tb[2]||P!==tb[3])V.colorMask(A,B,G,P),tb[0]=A,tb[1]=B,tb[2]=G,tb[3]=P;F=ea.cull_enable;F!==ba.cull_enable&&(F?V.enable(2884):
V.disable(2884),ba.cull_enable=F);S=ea.cull_face;S!==ba.cull_face&&(V.cullFace(S),ba.cull_face=S);y=ea.frontFace;y!==ba.frontFace&&(V.frontFace(y),ba.frontFace=y);C=ea.lineWidth;C!==ba.lineWidth&&(V.lineWidth(C),ba.lineWidth=C);U=ea.polygonOffset_enable;U!==ba.polygonOffset_enable&&(U?V.enable(32823):V.disable(32823),ba.polygonOffset_enable=U);ma=D[0];O=D[1];if(ma!==w[0]||O!==w[1])V.polygonOffset(ma,O),w[0]=ma,w[1]=O;wa=ea.sample_alpha;wa!==ba.sample_alpha&&(wa?V.enable(32926):V.disable(32926),ba.sample_alpha=
wa);Ca=ea.sample_enable;Ca!==ba.sample_enable&&(Ca?V.enable(32928):V.disable(32928),ba.sample_enable=Ca);ja=ga[0];ra=ga[1];if(ja!==ta[0]||ra!==ta[1])V.sampleCoverage(ja,ra),ta[0]=ja,ta[1]=ra;qd=ea.stencil_enable;qd!==ba.stencil_enable&&(qd?V.enable(2960):V.disable(2960),ba.stencil_enable=qd);Rc=ea.stencil_mask;Rc!==ba.stencil_mask&&(V.stencilMask(Rc),ba.stencil_mask=Rc);Lc=oa[0];sc=oa[1];$a=oa[2];if(Lc!==E[0]||sc!==E[1]||$a!==E[2])V.stencilFunc(Lc,sc,$a),E[0]=Lc,E[1]=sc,E[2]=$a;jc=T[0];Fb=T[1];rc=
T[2];Ua=T[3];if(jc!==za[0]||Fb!==za[1]||rc!==za[2]||Ua!==za[3])V.stencilOpSeparate(jc,Fb,rc,Ua),za[0]=jc,za[1]=Fb,za[2]=rc,za[3]=Ua;Jc=z[0];cc=z[1];$c=z[2];wc=z[3];if(Jc!==ca[0]||cc!==ca[1]||$c!==ca[2]||wc!==ca[3])V.stencilOpSeparate(Jc,cc,$c,wc),ca[0]=Jc,ca[1]=cc,ca[2]=$c,ca[3]=wc}V.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;V.enable(3042);ba.blend_enable=!0;V.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;V.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=
1;V.disable(2929);ba.depth_enable=!1;V.enable(3089);ba.scissor_enable=!0;if(f=ba.profile)e=performance.now(),W.count+=c;V.useProgram(m.program);g=ac.angle_instanced_arrays;var md,Bc,Xb,Gc,Sc,La,ub,Xa;pc.setVAO(null);md=mb.location;Bc=Q[md];Bc.buffer||V.enableVertexAttribArray(md);if(5126!==Bc.type||2!==Bc.size||Bc.buffer!==K||!1!==Bc.normalized||0!==Bc.offset||24!==Bc.stride)V.bindBuffer(34962,K.buffer),V.vertexAttribPointer(md,2,5126,!1,24,0),Bc.type=5126,Bc.size=2,Bc.buffer=K,Bc.normalized=!1,Bc.offset=
0,Bc.stride=24;0!==Bc.divisor&&(g.vertexAttribDivisorANGLE(md,0),Bc.divisor=0);Xb=qa.location;Gc=Q[Xb];Gc.buffer||V.enableVertexAttribArray(Xb);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==L||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)V.bindBuffer(34962,L.buffer),V.vertexAttribPointer(Xb,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=L,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(g.vertexAttribDivisorANGLE(Xb,0),Gc.divisor=0);Sc=Y.location;La=Q[Sc];La.buffer||V.enableVertexAttribArray(Sc);
if(5126!==La.type||2!==La.size||La.buffer!==r||!1!==La.normalized||16!==La.offset||24!==La.stride)V.bindBuffer(34962,r.buffer),V.vertexAttribPointer(Sc,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=r,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(g.vertexAttribDivisorANGLE(Sc,0),La.divisor=0);(ub=Fa.elements)?V.bindBuffer(34963,ub.buffer.buffer):pc.currentVAO&&(ub=Ma.getElements(pc.currentVAO.elements))&&V.bindBuffer(34963,ub.buffer.buffer);Xa=Fa.offset;for(h=0;h<c;++h){n=a[h];var pa,
vd,Bb,Sa,Vb,cb,Yb,Rb,ec,bc,Sb,mc,Tb,Na,nb,vb,gb,Pa,qc,Ib,ka,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,xe,me,Yc,Jf,he,se,qe,Qd,Dd,Bd,hd,Fc;pa=n.viewport;vd=pa.x|0;Bb=pa.y|0;Sa="width"in pa?pa.width|0:ha.framebufferWidth-vd;Vb="height"in pa?pa.height|0:ha.framebufferHeight-Bb;cb=ha.viewportWidth;
ha.viewportWidth=Sa;Yb=ha.viewportHeight;ha.viewportHeight=Vb;V.viewport(vd,Bb,Sa,Vb);l[0]=vd;l[1]=Bb;l[2]=Sa;l[3]=Vb;Rb=n.viewport;ec=Rb.x|0;bc=Rb.y|0;Sb="width"in Rb?Rb.width|0:ha.framebufferWidth-ec;mc="height"in Rb?Rb.height|0:ha.framebufferHeight-bc;V.scissor(ec,bc,Sb,mc);fa[0]=ec;fa[1]=bc;fa[2]=Sb;fa[3]=mc;Tb=na.call(this,ha,n,h);Hb.offset=Tb;Na=!1;nb=null;vb=0;gb=!1;qc=Pa=0;Ib=1;ka=0;db=5126;ib=kc=Hc=nc=0;sb(Hb)?(Na=!0,nb=u.createStream(34962,Hb),db=nb.dtype):(nb=u.getBuffer(Hb))?db=nb.dtype:
"constant"in Hb?(Ib=2,"number"===typeof Hb.constant?(Hc=Hb.constant,kc=ib=nc=0):(Hc=0<Hb.constant.length?Hb.constant[0]:0,kc=1<Hb.constant.length?Hb.constant[1]:0,ib=2<Hb.constant.length?Hb.constant[2]:0,nc=3<Hb.constant.length?Hb.constant[3]:0)):(nb=sb(Hb.buffer)?u.createStream(34962,Hb.buffer):u.getBuffer(Hb.buffer),db="type"in Hb?lc[Hb.type]:nb.dtype,gb=!!Hb.normalized,qc=Hb.size|0,Pa=Hb.offset|0,ka=Hb.stride|0,vb=Hb.divisor|0);jb=H.location;sa=Q[jb];if(1===Ib){sa.buffer||V.enableVertexAttribArray(jb);
ob=qc||2;if(sa.type!==db||sa.size!==ob||sa.buffer!==nb||sa.normalized!==gb||sa.offset!==Pa||sa.stride!==ka)V.bindBuffer(34962,nb.buffer),V.vertexAttribPointer(jb,ob,db,gb,ka,Pa),sa.type=db,sa.size=ob,sa.buffer=nb,sa.normalized=gb,sa.offset=Pa,sa.stride=ka;sa.divisor!==vb&&(g.vertexAttribDivisorANGLE(jb,vb),sa.divisor=vb)}else if(sa.buffer&&(V.disableVertexAttribArray(jb),sa.buffer=null),sa.x!==Hc||sa.y!==kc||sa.z!==ib||sa.w!==nc)V.vertexAttrib4f(jb,Hc,kc,ib,nc),sa.x=Hc,sa.y=kc,sa.z=ib,sa.w=nc;va=
I.call(this,ha,n,h);zb.offset=va;Va=!1;ab=null;Aa=0;eb=!1;Cb=Ia=0;Ab=1;Ra=0;Kc=5126;xa=Ub=Lb=Jb=0;sb(zb)?(Va=!0,ab=u.createStream(34962,zb),Kc=ab.dtype):(ab=u.getBuffer(zb))?Kc=ab.dtype:"constant"in zb?(Ab=2,"number"===typeof zb.constant?(Lb=zb.constant,Ub=xa=Jb=0):(Lb=0<zb.constant.length?zb.constant[0]:0,Ub=1<zb.constant.length?zb.constant[1]:0,xa=2<zb.constant.length?zb.constant[2]:0,Jb=3<zb.constant.length?zb.constant[3]:0)):(ab=sb(zb.buffer)?u.createStream(34962,zb.buffer):u.getBuffer(zb.buffer),
Kc="type"in zb?lc[zb.type]:ab.dtype,eb=!!zb.normalized,Cb=zb.size|0,Ia=zb.offset|0,Ra=zb.stride|0,Aa=zb.divisor|0);Td=M.location;Ka=Q[Td];if(1===Ab){Ka.buffer||V.enableVertexAttribArray(Td);Ob=Cb||2;if(Ka.type!==Kc||Ka.size!==Ob||Ka.buffer!==ab||Ka.normalized!==eb||Ka.offset!==Ia||Ka.stride!==Ra)V.bindBuffer(34962,ab.buffer),V.vertexAttribPointer(Td,Ob,Kc,eb,Ra,Ia),Ka.type=Kc,Ka.size=Ob,Ka.buffer=ab,Ka.normalized=eb,Ka.offset=Ia,Ka.stride=Ra;Ka.divisor!==Aa&&(g.vertexAttribDivisorANGLE(Td,Aa),Ka.divisor=
Aa)}else if(Ka.buffer&&(V.disableVertexAttribArray(Td),Ka.buffer=null),Ka.x!==Lb||Ka.y!==Ub||Ka.z!==xa||Ka.w!==Jb)V.vertexAttrib4f(Td,Lb,Ub,xa,Jb),Ka.x=Lb,Ka.y=Ub,Ka.z=xa,Ka.w=Jb;fb=da.call(this,ha,n,h);p.offset=fb;hb=!1;ya=null;fc=0;Ea=!1;qb=pb=0;Ya=1;Za=0;oc=5126;Mb=Wa=uc=cd=0;sb(p)?(hb=!0,ya=u.createStream(34962,p),oc=ya.dtype):(ya=u.getBuffer(p))?oc=ya.dtype:"constant"in p?(Ya=2,"number"===typeof p.constant?(uc=p.constant,Wa=Mb=cd=0):(uc=0<p.constant.length?p.constant[0]:0,Wa=1<p.constant.length?
p.constant[1]:0,Mb=2<p.constant.length?p.constant[2]:0,cd=3<p.constant.length?p.constant[3]:0)):(ya=sb(p.buffer)?u.createStream(34962,p.buffer):u.getBuffer(p.buffer),oc="type"in p?lc[p.type]:ya.dtype,Ea=!!p.normalized,qb=p.size|0,pb=p.offset|0,Za=p.stride|0,fc=p.divisor|0);dd=Eb.location;Ga=Q[dd];if(1===Ya){Ga.buffer||V.enableVertexAttribArray(dd);yc=qb||4;if(Ga.type!==oc||Ga.size!==yc||Ga.buffer!==ya||Ga.normalized!==Ea||Ga.offset!==pb||Ga.stride!==Za)V.bindBuffer(34962,ya.buffer),V.vertexAttribPointer(dd,
yc,oc,Ea,Za,pb),Ga.type=oc,Ga.size=yc,Ga.buffer=ya,Ga.normalized=Ea,Ga.offset=pb,Ga.stride=Za;Ga.divisor!==fc&&(g.vertexAttribDivisorANGLE(dd,fc),Ga.divisor=fc)}else if(Ga.buffer&&(V.disableVertexAttribArray(dd),Ga.buffer=null),Ga.x!==uc||Ga.y!==Wa||Ga.z!==Mb||Ga.w!==cd)V.vertexAttrib4f(dd,uc,Wa,Mb,cd),Ga.x=uc,Ga.y=Wa,Ga.z=Mb,Ga.w=cd;Qa=b.call(this,ha,n,h);X.offset=Qa;Ba=!1;kb=null;wb=0;Db=!1;vc=rb=0;xb=1;rd=0;tc=5126;ed=id=Mc=Gd=0;sb(X)?(Ba=!0,kb=u.createStream(34962,X),tc=kb.dtype):(kb=u.getBuffer(X))?
tc=kb.dtype:"constant"in X?(xb=2,"number"===typeof X.constant?(Mc=X.constant,id=ed=Gd=0):(Mc=0<X.constant.length?X.constant[0]:0,id=1<X.constant.length?X.constant[1]:0,ed=2<X.constant.length?X.constant[2]:0,Gd=3<X.constant.length?X.constant[3]:0)):(kb=sb(X.buffer)?u.createStream(34962,X.buffer):u.getBuffer(X.buffer),tc="type"in X?lc[X.type]:kb.dtype,Db=!!X.normalized,vc=X.size|0,rb=X.offset|0,rd=X.stride|0,wb=X.divisor|0);Wb=Ta.location;dc=Q[Wb];if(1===xb){dc.buffer||V.enableVertexAttribArray(Wb);
Pb=vc||4;if(dc.type!==tc||dc.size!==Pb||dc.buffer!==kb||dc.normalized!==Db||dc.offset!==rb||dc.stride!==rd)V.bindBuffer(34962,kb.buffer),V.vertexAttribPointer(Wb,Pb,tc,Db,rd,rb),dc.type=tc,dc.size=Pb,dc.buffer=kb,dc.normalized=Db,dc.offset=rb,dc.stride=rd;dc.divisor!==wb&&(g.vertexAttribDivisorANGLE(Wb,wb),dc.divisor=wb)}else if(dc.buffer&&(V.disableVertexAttribArray(Wb),dc.buffer=null),dc.x!==Mc||dc.y!==id||dc.z!==ed||dc.w!==Gd)V.vertexAttrib4f(Wb,Mc,id,ed,Gd),dc.x=Mc,dc.y=id,dc.z=ed,dc.w=Gd;Ha=
k.call(this,ha,n,h);$b=Ha[0];yb=Ha[1];Qb=Ha[2];ic=Ha[3];h&&lb===$b&&Nb===yb&&gc===Qb&&Tc===ic||(lb=$b,Nb=yb,gc=Qb,Tc=ic,V.uniform4f(Ja.location,$b,yb,Qb,ic));Cc=n.lineWidth;h&&Dc===Cc||(Dc=Cc,V.uniform1f(Oa.location,Cc));Ec=n.capSize;h&&Nc===Ec||(Nc=Ec,V.uniform1f(la.location,Ec));ad=n.scale;Uc=ad[0];Kb=ad[1];h&&Oc===Uc&&Gb===Kb||(Oc=Uc,Gb=Kb,V.uniform2f(R.location,Uc,Kb));Pc=n.scaleFract;Ic=Pc[0];hc=Pc[1];h&&Vc===Ic&&Xc===hc||(Vc=Ic,Xc=hc,V.uniform2f(ua.location,Ic,hc));fd=n.translate;xe=fd[0];Yc=
fd[1];h&&me===xe&&Jf===Yc||(me=xe,Jf=Yc,V.uniform2f(N.location,xe,Yc));he=n.translateFract;se=he[0];Qd=he[1];h&&qe===se&&Dd===Qd||(qe=se,Dd=Qd,V.uniform2f(Zb.location,se,Qd));Bd=n.opacity;h&&hd===Bd||(hd=Bd,V.uniform1f(Z.location,Bd));Fc=n.count;0<Fc?ub?g.drawElementsInstancedANGLE(4,36,ub.type,Xa<<(ub.type-5121>>1),Fc):g.drawArraysInstancedANGLE(4,Xa,36,Fc):0>Fc&&(ub?V.drawElements(4,36,ub.type,Xa<<(ub.type-5121>>1)):V.drawArrays(4,Xa,36));ha.viewportWidth=cb;ha.viewportHeight=Yb;Na&&u.destroyStream(nb);
Va&&u.destroyStream(ab);hb&&u.destroyStream(ya);Ba&&u.destroyStream(kb)}ba.dirty=!0;pc.setVAO(null);f&&(W.cpuTime+=performance.now()-e)},draw:function(b){var c,d,f,e,g,h,k,m,n,v,x,J,A,I,G,P,F,S,C,U,ma,O,da,Ca,na,ra,Ac,wc,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,ec,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,mc,bc,Sb,ka,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc;c=bb.next;c!==bb.cur&&(c?V.bindFramebuffer(36160,c.framebuffer):V.bindFramebuffer(36160,
null),bb.cur=c);if(ba.dirty){var Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb;Ea=ea.dither;Ea!==ba.dither&&(Ea?V.enable(3024):V.disable(3024),ba.dither=Ea);pb=ea.depth_func;pb!==ba.depth_func&&(V.depthFunc(pb),ba.depth_func=pb);qb=Qc[0];Ya=Qc[1];if(qb!==xc[0]||Ya!==xc[1])V.depthRange(qb,Ya),xc[0]=qb,xc[1]=Ya;Za=ea.depth_mask;Za!==ba.depth_mask&&(V.depthMask(Za),ba.depth_mask=Za);oc=Da[0];cd=Da[1];uc=Da[2];Wa=Da[3];if(oc!==tb[0]||cd!==tb[1]||uc!==
tb[2]||Wa!==tb[3])V.colorMask(oc,cd,uc,Wa),tb[0]=oc,tb[1]=cd,tb[2]=uc,tb[3]=Wa;Mb=ea.cull_enable;Mb!==ba.cull_enable&&(Mb?V.enable(2884):V.disable(2884),ba.cull_enable=Mb);dd=ea.cull_face;dd!==ba.cull_face&&(V.cullFace(dd),ba.cull_face=dd);Ga=ea.frontFace;Ga!==ba.frontFace&&(V.frontFace(Ga),ba.frontFace=Ga);yc=ea.lineWidth;yc!==ba.lineWidth&&(V.lineWidth(yc),ba.lineWidth=yc);Qa=ea.polygonOffset_enable;Qa!==ba.polygonOffset_enable&&(Qa?V.enable(32823):V.disable(32823),ba.polygonOffset_enable=Qa);Ba=
D[0];kb=D[1];if(Ba!==w[0]||kb!==w[1])V.polygonOffset(Ba,kb),w[0]=Ba,w[1]=kb;wb=ea.sample_alpha;wb!==ba.sample_alpha&&(wb?V.enable(32926):V.disable(32926),ba.sample_alpha=wb);Db=ea.sample_enable;Db!==ba.sample_enable&&(Db?V.enable(32928):V.disable(32928),ba.sample_enable=Db);rb=ga[0];vc=ga[1];if(rb!==ta[0]||vc!==ta[1])V.sampleCoverage(rb,vc),ta[0]=rb,ta[1]=vc;xb=ea.stencil_enable;xb!==ba.stencil_enable&&(xb?V.enable(2960):V.disable(2960),ba.stencil_enable=xb);rd=ea.stencil_mask;rd!==ba.stencil_mask&&
(V.stencilMask(rd),ba.stencil_mask=rd);tc=oa[0];Gd=oa[1];Mc=oa[2];if(tc!==E[0]||Gd!==E[1]||Mc!==E[2])V.stencilFunc(tc,Gd,Mc),E[0]=tc,E[1]=Gd,E[2]=Mc;id=T[0];ed=T[1];Wb=T[2];dc=T[3];if(id!==za[0]||ed!==za[1]||Wb!==za[2]||dc!==za[3])V.stencilOpSeparate(id,ed,Wb,dc),za[0]=id,za[1]=ed,za[2]=Wb,za[3]=dc;Pb=z[0];Ha=z[1];$b=z[2];lb=z[3];if(Pb!==ca[0]||Ha!==ca[1]||$b!==ca[2]||lb!==ca[3])V.stencilOpSeparate(Pb,Ha,$b,lb),ca[0]=Pb,ca[1]=Ha,ca[2]=$b,ca[3]=lb}d=b.viewport;f=d.x|0;e=d.y|0;g="width"in d?d.width|
0:ha.framebufferWidth-f;h="height"in d?d.height|0:ha.framebufferHeight-e;k=ha.viewportWidth;ha.viewportWidth=g;m=ha.viewportHeight;ha.viewportHeight=h;V.viewport(f,e,g,h);l[0]=f;l[1]=e;l[2]=g;l[3]=h;V.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;V.enable(3042);ba.blend_enable=!0;V.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;V.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;V.disable(2929);ba.depth_enable=!1;n=b.viewport;v=n.x|0;x=n.y|0;J="width"in n?n.width|
0:ha.framebufferWidth-v;A="height"in n?n.height|0:ha.framebufferHeight-x;V.scissor(v,x,J,A);fa[0]=v;fa[1]=x;fa[2]=J;fa[3]=A;V.enable(3089);ba.scissor_enable=!0;if(I=ba.profile)G=performance.now(),W.count++;V.useProgram(q.program);P=ac.angle_instanced_arrays;pc.setVAO(null);F=a.call(this,ha,b,0);Hb.offset=F;S=!1;C=null;U=0;ma=!1;da=O=0;Ca=1;na=0;ra=5126;Lc=Rc=wc=Ac=0;sb(Hb)?(S=!0,C=u.createStream(34962,Hb),ra=C.dtype):(C=u.getBuffer(Hb))?ra=C.dtype:"constant"in Hb?(Ca=2,"number"===typeof Hb.constant?
(wc=Hb.constant,Rc=Lc=Ac=0):(wc=0<Hb.constant.length?Hb.constant[0]:0,Rc=1<Hb.constant.length?Hb.constant[1]:0,Lc=2<Hb.constant.length?Hb.constant[2]:0,Ac=3<Hb.constant.length?Hb.constant[3]:0)):(C=sb(Hb.buffer)?u.createStream(34962,Hb.buffer):u.getBuffer(Hb.buffer),ra="type"in Hb?lc[Hb.type]:C.dtype,ma=!!Hb.normalized,da=Hb.size|0,O=Hb.offset|0,na=Hb.stride|0,U=Hb.divisor|0);sc=H.location;$a=Q[sc];if(1===Ca){$a.buffer||V.enableVertexAttribArray(sc);jc=da||2;if($a.type!==ra||$a.size!==jc||$a.buffer!==
C||$a.normalized!==ma||$a.offset!==O||$a.stride!==na)V.bindBuffer(34962,C.buffer),V.vertexAttribPointer(sc,jc,ra,ma,na,O),$a.type=ra,$a.size=jc,$a.buffer=C,$a.normalized=ma,$a.offset=O,$a.stride=na;$a.divisor!==U&&(P.vertexAttribDivisorANGLE(sc,U),$a.divisor=U)}else if($a.buffer&&(V.disableVertexAttribArray(sc),$a.buffer=null),$a.x!==wc||$a.y!==Rc||$a.z!==Lc||$a.w!==Ac)V.vertexAttrib4f(sc,wc,Rc,Lc,Ac),$a.x=wc,$a.y=Rc,$a.z=Lc,$a.w=Ac;Fb=t.call(this,ha,b,0);zb.offset=Fb;rc=!1;Ua=null;Jc=0;cc=!1;ec=
$c=0;md=1;Bc=0;Xb=5126;ub=La=Sc=Gc=0;sb(zb)?(rc=!0,Ua=u.createStream(34962,zb),Xb=Ua.dtype):(Ua=u.getBuffer(zb))?Xb=Ua.dtype:"constant"in zb?(md=2,"number"===typeof zb.constant?(Sc=zb.constant,La=ub=Gc=0):(Sc=0<zb.constant.length?zb.constant[0]:0,La=1<zb.constant.length?zb.constant[1]:0,ub=2<zb.constant.length?zb.constant[2]:0,Gc=3<zb.constant.length?zb.constant[3]:0)):(Ua=sb(zb.buffer)?u.createStream(34962,zb.buffer):u.getBuffer(zb.buffer),Xb="type"in zb?lc[zb.type]:Ua.dtype,cc=!!zb.normalized,ec=
zb.size|0,$c=zb.offset|0,Bc=zb.stride|0,Jc=zb.divisor|0);Xa=M.location;pa=Q[Xa];if(1===md){pa.buffer||V.enableVertexAttribArray(Xa);vd=ec||2;if(pa.type!==Xb||pa.size!==vd||pa.buffer!==Ua||pa.normalized!==cc||pa.offset!==$c||pa.stride!==Bc)V.bindBuffer(34962,Ua.buffer),V.vertexAttribPointer(Xa,vd,Xb,cc,Bc,$c),pa.type=Xb,pa.size=vd,pa.buffer=Ua,pa.normalized=cc,pa.offset=$c,pa.stride=Bc;pa.divisor!==Jc&&(P.vertexAttribDivisorANGLE(Xa,Jc),pa.divisor=Jc)}else if(pa.buffer&&(V.disableVertexAttribArray(Xa),
pa.buffer=null),pa.x!==Sc||pa.y!==La||pa.z!==ub||pa.w!==Gc)V.vertexAttrib4f(Xa,Sc,La,ub,Gc),pa.x=Sc,pa.y=La,pa.z=ub,pa.w=Gc;Bb=y.call(this,ha,b,0);p.offset=Bb;Sa=!1;Vb=null;cb=0;Yb=!1;mc=Rb=0;bc=1;Sb=0;ka=5126;vb=nb=Na=Tb=0;sb(p)?(Sa=!0,Vb=u.createStream(34962,p),ka=Vb.dtype):(Vb=u.getBuffer(p))?ka=Vb.dtype:"constant"in p?(bc=2,"number"===typeof p.constant?(Na=p.constant,nb=vb=Tb=0):(Na=0<p.constant.length?p.constant[0]:0,nb=1<p.constant.length?p.constant[1]:0,vb=2<p.constant.length?p.constant[2]:
0,Tb=3<p.constant.length?p.constant[3]:0)):(Vb=sb(p.buffer)?u.createStream(34962,p.buffer):u.getBuffer(p.buffer),ka="type"in p?lc[p.type]:Vb.dtype,Yb=!!p.normalized,mc=p.size|0,Rb=p.offset|0,Sb=p.stride|0,cb=p.divisor|0);gb=Eb.location;Pa=Q[gb];if(1===bc){Pa.buffer||V.enableVertexAttribArray(gb);qc=mc||4;if(Pa.type!==ka||Pa.size!==qc||Pa.buffer!==Vb||Pa.normalized!==Yb||Pa.offset!==Rb||Pa.stride!==Sb)V.bindBuffer(34962,Vb.buffer),V.vertexAttribPointer(gb,qc,ka,Yb,Sb,Rb),Pa.type=ka,Pa.size=qc,Pa.buffer=
Vb,Pa.normalized=Yb,Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==cb&&(P.vertexAttribDivisorANGLE(gb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(V.disableVertexAttribArray(gb),Pa.buffer=null),Pa.x!==Na||Pa.y!==nb||Pa.z!==vb||Pa.w!==Tb)V.vertexAttrib4f(gb,Na,nb,vb,Tb),Pa.x=Na,Pa.y=nb,Pa.z=vb,Pa.w=Tb;Ib=wa.call(this,ha,b,0);X.offset=Ib;sd=!1;db=null;nc=0;Hc=!1;ib=kc=0;jb=1;sa=0;ob=5126;Aa=ab=Va=va=0;sb(X)?(sd=!0,db=u.createStream(34962,X),ob=db.dtype):(db=u.getBuffer(X))?ob=db.dtype:"constant"in X?(jb=2,"number"===
typeof X.constant?(Va=X.constant,ab=Aa=va=0):(Va=0<X.constant.length?X.constant[0]:0,ab=1<X.constant.length?X.constant[1]:0,Aa=2<X.constant.length?X.constant[2]:0,va=3<X.constant.length?X.constant[3]:0)):(db=sb(X.buffer)?u.createStream(34962,X.buffer):u.getBuffer(X.buffer),ob="type"in X?lc[X.type]:db.dtype,Hc=!!X.normalized,ib=X.size|0,kc=X.offset|0,sa=X.stride|0,nc=X.divisor|0);eb=Ta.location;Ia=Q[eb];if(1===jb){Ia.buffer||V.enableVertexAttribArray(eb);Cb=ib||4;if(Ia.type!==ob||Ia.size!==Cb||Ia.buffer!==
db||Ia.normalized!==Hc||Ia.offset!==kc||Ia.stride!==sa)V.bindBuffer(34962,db.buffer),V.vertexAttribPointer(eb,Cb,ob,Hc,sa,kc),Ia.type=ob,Ia.size=Cb,Ia.buffer=db,Ia.normalized=Hc,Ia.offset=kc,Ia.stride=sa;Ia.divisor!==nc&&(P.vertexAttribDivisorANGLE(eb,nc),Ia.divisor=nc)}else if(Ia.buffer&&(V.disableVertexAttribArray(eb),Ia.buffer=null),Ia.x!==Va||Ia.y!==ab||Ia.z!==Aa||Ia.w!==va)V.vertexAttrib4f(eb,Va,ab,Aa,va),Ia.x=Va,Ia.y=ab,Ia.z=Aa,Ia.w=va;Ab=mb.location;Ra=Q[Ab];Ra.buffer||V.enableVertexAttribArray(Ab);
if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==K||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)V.bindBuffer(34962,K.buffer),V.vertexAttribPointer(Ab,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=K,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(P.vertexAttribDivisorANGLE(Ab,0),Ra.divisor=0);Kc=qa.location;Jb=Q[Kc];Jb.buffer||V.enableVertexAttribArray(Kc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==L||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)V.bindBuffer(34962,L.buffer),V.vertexAttribPointer(Kc,
2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=L,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(P.vertexAttribDivisorANGLE(Kc,0),Jb.divisor=0);Lb=Y.location;Ub=Q[Lb];Ub.buffer||V.enableVertexAttribArray(Lb);if(5126!==Ub.type||2!==Ub.size||Ub.buffer!==r||!1!==Ub.normalized||16!==Ub.offset||24!==Ub.stride)V.bindBuffer(34962,r.buffer),V.vertexAttribPointer(Lb,2,5126,!1,24,16),Ub.type=5126,Ub.size=2,Ub.buffer=r,Ub.normalized=!1,Ub.offset=16,Ub.stride=24;0!==Ub.divisor&&(P.vertexAttribDivisorANGLE(Lb,
0),Ub.divisor=0);xa=B.call(this,ha,b,0);V.uniform4f(Ja.location,xa[0],xa[1],xa[2],xa[3]);V.uniform1f(Oa.location,b.lineWidth);V.uniform1f(la.location,b.capSize);Td=b.scale;V.uniform2f(R.location,Td[0],Td[1]);Ka=b.scaleFract;V.uniform2f(ua.location,Ka[0],Ka[1]);Ob=b.translate;V.uniform2f(N.location,Ob[0],Ob[1]);fb=b.translateFract;V.uniform2f(Zb.location,fb[0],fb[1]);V.uniform1f(Z.location,b.opacity);(hb=Fa.elements)?V.bindBuffer(34963,hb.buffer.buffer):pc.currentVAO&&(hb=Ma.getElements(pc.currentVAO.elements))&&
V.bindBuffer(34963,hb.buffer.buffer);ya=Fa.offset;fc=b.count;0<fc?hb?P.drawElementsInstancedANGLE(4,36,hb.type,ya<<(hb.type-5121>>1),fc):P.drawArraysInstancedANGLE(4,ya,36,fc):0>fc&&(hb?V.drawElements(4,36,hb.type,ya<<(hb.type-5121>>1)):V.drawArrays(4,ya,36));ba.dirty=!0;pc.setVAO(null);ha.viewportWidth=k;ha.viewportHeight=m;I&&(W.cpuTime+=performance.now()-G);S&&u.destroyStream(C);rc&&u.destroyStream(Ua);Sa&&u.destroyStream(Vb);sd&&u.destroyStream(db)},scope:function(b,a,c){var d,e,k,l,m,n,q,z,w,
t,A,E,D,ca,I,aa,B,M,T,H,N,y,R,Q,V,fa,ia,Z,ga,Y,wa,za,ta,pc,da,oa,na,Da,ja,ua,Xb,Gc,Sc,La,ub,Xa,pa,ud,Bb,Sa,qa,cb,la,tb,Qc,bc,Sb,Ja,Tb,Na,nb,vb,gb,Pa,Oa,Ib,Ma,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Zb,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,xc,tc,mb,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,bb,me,Yc,ac,Eb,Ta,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ze,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,
Hd,Jd,Kd,ge,te,we,je,Oe,Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed;d=b.viewport;e=d.x|0;k=d.y|0;l="width"in d?d.width|0:ha.framebufferWidth-e;m="height"in d?d.height|0:ha.framebufferHeight-k;n=ha.viewportWidth;ha.viewportWidth=l;q=ha.viewportHeight;ha.viewportHeight=m;z=ma[0];ma[0]=e;w=ma[1];ma[1]=k;t=ma[2];ma[2]=l;A=ma[3];ma[3]=m;E=mc[0];mc[0]=0;D=mc[1];mc[1]=0;ca=mc[2];mc[2]=0;I=mc[3];mc[3]=0;aa=ea.blend_enable;ea.blend_enable=!0;B=wc[0];wc[0]=32774;M=wc[1];wc[1]=32774;T=J[0];J[0]=770;H=J[1];J[1]=771;N=J[2];J[2]=
773;y=J[3];J[3]=1;R=ea.depth_enable;ea.depth_enable=!1;Q=b.viewport;V=Q.x|0;fa=Q.y|0;ia="width"in Q?Q.width|0:ha.framebufferWidth-V;Z="height"in Q?Q.height|0:ha.framebufferHeight-fa;ga=U[0];U[0]=V;Y=U[1];U[1]=fa;wa=U[2];U[2]=ia;za=U[3];U[3]=Z;ta=ea.scissor_enable;ea.scissor_enable=!0;if(pc=ba.profile)da=performance.now(),W.count++;oa=Fa.count;Fa.count=36;na=b.count;Da=Fa.instances;Fa.instances=na;ja=Fa.primitive;Fa.primitive=4;ua=b.capSize;Xb=ec[5];ec[5]=ua;Gc=b.lineWidth;Sc=ec[4];ec[4]=Gc;La=b.opacity;
ub=ec[10];ec[10]=La;Xa=b.range;pa=ec[18];ec[18]=Xa;ud=b.scale;Bb=ec[6];ec[6]=ud;Sa=b.scaleFract;qa=ec[7];ec[7]=Sa;cb=b.translate;la=ec[8];ec[8]=cb;tb=b.translateFract;Qc=ec[9];ec[9]=tb;bc=F.call(this,ha,b,c);Sb=ec[3];ec[3]=bc;Ja=x.buffer;x.buffer=r;Tb=x.divisor;x.divisor=0;Na=x.normalized;x.normalized=!1;nb=x.offset;x.offset=16;vb=x.size;x.size=0;gb=x.state;x.state=1;Pa=x.stride;x.stride=24;Oa=x.type;x.type=5126;Ib=x.w;x.w=0;Ma=x.x;x.x=0;db=x.y;x.y=0;nc=x.z;x.z=0;Hc=G.call(this,ha,b,c);X.offset=Hc;
kc=!1;ib=null;jb=0;sa=!1;va=ob=0;Va=1;ab=0;Aa=5126;Ab=Cb=Ia=eb=0;sb(X)?(kc=!0,ib=u.createStream(34962,X),Aa=ib.dtype):(ib=u.getBuffer(X))?Aa=ib.dtype:"constant"in X?(Va=2,"number"===typeof X.constant?(Ia=X.constant,Cb=Ab=eb=0):(Ia=0<X.constant.length?X.constant[0]:0,Cb=1<X.constant.length?X.constant[1]:0,Ab=2<X.constant.length?X.constant[2]:0,eb=3<X.constant.length?X.constant[3]:0)):(ib=sb(X.buffer)?u.createStream(34962,X.buffer):u.getBuffer(X.buffer),Aa="type"in X?lc[X.type]:ib.dtype,sa=!!X.normalized,
va=X.size|0,ob=X.offset|0,ab=X.stride|0,jb=X.divisor|0);Ra=C.buffer;C.buffer=ib;Kc=C.divisor;C.divisor=jb;Jb=C.normalized;C.normalized=sa;Lb=C.offset;C.offset=ob;Ub=C.size;C.size=va;xa=C.state;C.state=Va;Zb=C.stride;C.stride=ab;Ka=C.type;C.type=Aa;Ob=C.w;C.w=eb;fb=C.x;C.x=Ia;hb=C.y;C.y=Cb;ya=C.z;C.z=Ab;fc=O.buffer;O.buffer=K;Ea=O.divisor;O.divisor=0;pb=O.normalized;O.normalized=!1;qb=O.offset;O.offset=0;Ya=O.size;O.size=0;Za=O.state;O.state=1;oc=O.stride;O.stride=24;cd=O.type;O.type=5126;uc=O.w;O.w=
0;Wa=O.x;O.x=0;Mb=O.y;O.y=0;dd=O.z;O.z=0;Ga=Ca.call(this,ha,b,c);p.offset=Ga;yc=!1;Qa=null;Ba=0;kb=!1;Db=wb=0;rb=1;vc=0;xb=5126;Mc=mb=tc=xc=0;sb(p)?(yc=!0,Qa=u.createStream(34962,p),xb=Qa.dtype):(Qa=u.getBuffer(p))?xb=Qa.dtype:"constant"in p?(rb=2,"number"===typeof p.constant?(tc=p.constant,mb=Mc=xc=0):(tc=0<p.constant.length?p.constant[0]:0,mb=1<p.constant.length?p.constant[1]:0,Mc=2<p.constant.length?p.constant[2]:0,xc=3<p.constant.length?p.constant[3]:0)):(Qa=sb(p.buffer)?u.createStream(34962,
p.buffer):u.getBuffer(p.buffer),xb="type"in p?lc[p.type]:Qa.dtype,kb=!!p.normalized,Db=p.size|0,wb=p.offset|0,vc=p.stride|0,Ba=p.divisor|0);id=h.buffer;h.buffer=Qa;ed=h.divisor;h.divisor=Ba;Wb=h.normalized;h.normalized=kb;dc=h.offset;h.offset=wb;Pb=h.size;h.size=Db;Ha=h.state;h.state=rb;$b=h.stride;h.stride=vc;lb=h.type;h.type=xb;yb=h.w;h.w=xc;Nb=h.x;h.x=tc;Qb=h.y;h.y=mb;gc=h.z;h.z=Mc;ic=g.buffer;g.buffer=L;Tc=g.divisor;g.divisor=0;Cc=g.normalized;g.normalized=!1;Dc=g.offset;g.offset=8;Ec=g.size;
g.size=0;Nc=g.state;g.state=1;ad=g.stride;g.stride=24;Uc=g.type;g.type=5126;Oc=g.w;g.w=0;Kb=g.x;g.x=0;Gb=g.y;g.y=0;Pc=g.z;g.z=0;Ic=f.call(this,ha,b,c);Hb.offset=Ic;Vc=!1;hc=null;Xc=0;fd=!1;me=bb=0;Yc=1;ac=0;Eb=5126;Dd=Qd=qe=Ta=0;sb(Hb)?(Vc=!0,hc=u.createStream(34962,Hb),Eb=hc.dtype):(hc=u.getBuffer(Hb))?Eb=hc.dtype:"constant"in Hb?(Yc=2,"number"===typeof Hb.constant?(qe=Hb.constant,Qd=Dd=Ta=0):(qe=0<Hb.constant.length?Hb.constant[0]:0,Qd=1<Hb.constant.length?Hb.constant[1]:0,Dd=2<Hb.constant.length?
Hb.constant[2]:0,Ta=3<Hb.constant.length?Hb.constant[3]:0)):(hc=sb(Hb.buffer)?u.createStream(34962,Hb.buffer):u.getBuffer(Hb.buffer),Eb="type"in Hb?lc[Hb.type]:hc.dtype,fd=!!Hb.normalized,me=Hb.size|0,bb=Hb.offset|0,ac=Hb.stride|0,Xc=Hb.divisor|0);Bd=v.buffer;v.buffer=hc;hd=v.divisor;v.divisor=Xc;Fc=v.normalized;v.normalized=fd;nd=v.offset;v.offset=bb;jd=v.size;v.size=me;Zc=v.state;v.state=Yc;kd=v.stride;v.stride=ac;zd=v.type;v.type=Eb;Ad=v.w;v.w=Ta;ve=v.x;v.x=qe;ye=v.y;v.y=Qd;Ze=v.z;v.z=Dd;ce=P.call(this,
ha,b,c);zb.offset=ce;ae=!1;Zd=null;Fe=0;Wd=!1;zc=fe=0;Wc=1;ne=0;ie=5126;Kd=Jd=Hd=Cd=0;sb(zb)?(ae=!0,Zd=u.createStream(34962,zb),ie=Zd.dtype):(Zd=u.getBuffer(zb))?ie=Zd.dtype:"constant"in zb?(Wc=2,"number"===typeof zb.constant?(Hd=zb.constant,Jd=Kd=Cd=0):(Hd=0<zb.constant.length?zb.constant[0]:0,Jd=1<zb.constant.length?zb.constant[1]:0,Kd=2<zb.constant.length?zb.constant[2]:0,Cd=3<zb.constant.length?zb.constant[3]:0)):(Zd=sb(zb.buffer)?u.createStream(34962,zb.buffer):u.getBuffer(zb.buffer),ie="type"in
zb?lc[zb.type]:Zd.dtype,Wd=!!zb.normalized,zc=zb.size|0,fe=zb.offset|0,ne=zb.stride|0,Fe=zb.divisor|0);ge=S.buffer;S.buffer=Zd;te=S.divisor;S.divisor=Fe;we=S.normalized;S.normalized=Wd;je=S.offset;S.offset=fe;Oe=S.size;S.size=zc;Pe=S.state;S.state=Wc;Le=S.stride;S.stride=ne;oe=S.type;S.type=ie;Be=S.w;S.w=Cd;Ge=S.x;S.x=Hd;He=S.y;S.y=Jd;Ie=S.z;S.z=Kd;Ce=ra.vert;ra.vert=2;Ed=ra.frag;ra.frag=1;ba.dirty=!0;a(ha,b,c);ha.viewportWidth=n;ha.viewportHeight=q;ma[0]=z;ma[1]=w;ma[2]=t;ma[3]=A;mc[0]=E;mc[1]=D;
mc[2]=ca;mc[3]=I;ea.blend_enable=aa;wc[0]=B;wc[1]=M;J[0]=T;J[1]=H;J[2]=N;J[3]=y;ea.depth_enable=R;U[0]=ga;U[1]=Y;U[2]=wa;U[3]=za;ea.scissor_enable=ta;pc&&(W.cpuTime+=performance.now()-da);Fa.count=oa;Fa.instances=Da;Fa.primitive=ja;ec[5]=Xb;ec[4]=Sc;ec[10]=ub;ec[18]=pa;ec[6]=Bb;ec[7]=qa;ec[8]=la;ec[9]=Qc;ec[3]=Sb;x.buffer=Ja;x.divisor=Tb;x.normalized=Na;x.offset=nb;x.size=vb;x.state=gb;x.stride=Pa;x.type=Oa;x.w=Ib;x.x=Ma;x.y=db;x.z=nc;kc&&u.destroyStream(ib);C.buffer=Ra;C.divisor=Kc;C.normalized=
Jb;C.offset=Lb;C.size=Ub;C.state=xa;C.stride=Zb;C.type=Ka;C.w=Ob;C.x=fb;C.y=hb;C.z=ya;O.buffer=fc;O.divisor=Ea;O.normalized=pb;O.offset=qb;O.size=Ya;O.state=Za;O.stride=oc;O.type=cd;O.w=uc;O.x=Wa;O.y=Mb;O.z=dd;yc&&u.destroyStream(Qa);h.buffer=id;h.divisor=ed;h.normalized=Wb;h.offset=dc;h.size=Pb;h.state=Ha;h.stride=$b;h.type=lb;h.w=yb;h.x=Nb;h.y=Qb;h.z=gc;g.buffer=ic;g.divisor=Tc;g.normalized=Cc;g.offset=Dc;g.size=Ec;g.state=Nc;g.stride=ad;g.type=Uc;g.w=Oc;g.x=Kb;g.y=Gb;g.z=Pc;Vc&&u.destroyStream(hc);
v.buffer=Bd;v.divisor=hd;v.normalized=Fc;v.offset=nd;v.size=jd;v.state=Zc;v.stride=kd;v.type=zd;v.w=Ad;v.x=ve;v.y=ye;v.z=Ze;ae&&u.destroyStream(Zd);S.buffer=ge;S.divisor=te;S.normalized=we;S.offset=je;S.size=Oe;S.state=Pe;S.stride=Le;S.type=oe;S.w=Be;S.x=Ge;S.y=He;S.z=Ie;ra.vert=Ce;ra.frag=Ed;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(c,W,n,A,e,d,q,a,t,C,
y,K,L,r,B,F,x,G,ka,O,Ca,h,g,f,v,P,S,m,na,I,da,b,k,Y,la,Ta,mb){var Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra,ec,pc,mc,ud,wc,aa,J,ia,Da,tb,Qc,xc,D,w,ga,ta,U,fa,oa,E,z;Eb=c.attributes;qa=c.buffer;Oa=c.context;Z=c.current;H=c.draw;M=c.elements;R=c.extensions;ua=c.framebuffer;N=c.gl;Zb=c.isBufferArgs;Ja=c.next;Q=c.shader;u=c.uniforms;ha=c.vao;ba=Ja.blend_color;Fa=Z.blend_color;Ma=Ja.blend_equation;ac=Z.blend_equation;bb=Ja.blend_func;V=Z.blend_func;sb=Ja.colorMask;ea=Z.colorMask;ra=
Ja.depth_range;ec=Z.depth_range;pc=Ja.polygonOffset_offset;mc=Z.polygonOffset_offset;ud=Ja.sample_coverage;wc=Z.sample_coverage;aa=Ja.scissor_box;J=Z.scissor_box;ia=Ja.stencil_func;Da=Z.stencil_func;tb=Ja.stencil_opBack;Qc=Z.stencil_opBack;xc=Ja.stencil_opFront;D=Z.stencil_opFront;w=Ja.viewport;ga=Z.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};U={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};oa={divisor:1,offset:16,stride:8};
E={divisor:1,offset:16,stride:8};z={divisor:1,offset:0,stride:4};return{batch:function(a,c){var n,q,l,w,u,p;n=ua.next;n!==ua.cur&&(n?N.bindFramebuffer(36160,n.framebuffer):N.bindFramebuffer(36160,null),ua.cur=n);if(Z.dirty){var x,r,t,A,aa,B,y,K,C,F,L,Q,ba,wa,ja,Ye,Ma,bf,xd,De,be,Pd,Yd,le,pd,ld,wd,od,gd,Ac,qd,Rc;x=Ja.dither;x!==Z.dither&&(x?N.enable(3024):N.disable(3024),Z.dither=x);r=Ja.depth_func;r!==Z.depth_func&&(N.depthFunc(r),Z.depth_func=r);t=ra[0];A=ra[1];if(t!==ec[0]||A!==ec[1])N.depthRange(t,
A),ec[0]=t,ec[1]=A;aa=Ja.depth_mask;aa!==Z.depth_mask&&(N.depthMask(aa),Z.depth_mask=aa);B=sb[0];y=sb[1];K=sb[2];C=sb[3];if(B!==ea[0]||y!==ea[1]||K!==ea[2]||C!==ea[3])N.colorMask(B,y,K,C),ea[0]=B,ea[1]=y,ea[2]=K,ea[3]=C;F=Ja.cull_enable;F!==Z.cull_enable&&(F?N.enable(2884):N.disable(2884),Z.cull_enable=F);L=Ja.cull_face;L!==Z.cull_face&&(N.cullFace(L),Z.cull_face=L);Q=Ja.frontFace;Q!==Z.frontFace&&(N.frontFace(Q),Z.frontFace=Q);ba=Ja.lineWidth;ba!==Z.lineWidth&&(N.lineWidth(ba),Z.lineWidth=ba);wa=
Ja.polygonOffset_enable;wa!==Z.polygonOffset_enable&&(wa?N.enable(32823):N.disable(32823),Z.polygonOffset_enable=wa);ja=pc[0];Ye=pc[1];if(ja!==mc[0]||Ye!==mc[1])N.polygonOffset(ja,Ye),mc[0]=ja,mc[1]=Ye;Ma=Ja.sample_alpha;Ma!==Z.sample_alpha&&(Ma?N.enable(32926):N.disable(32926),Z.sample_alpha=Ma);bf=Ja.sample_enable;bf!==Z.sample_enable&&(bf?N.enable(32928):N.disable(32928),Z.sample_enable=bf);xd=ud[0];De=ud[1];if(xd!==wc[0]||De!==wc[1])N.sampleCoverage(xd,De),wc[0]=xd,wc[1]=De;be=Ja.stencil_mask;
be!==Z.stencil_mask&&(N.stencilMask(be),Z.stencil_mask=be);Pd=ia[0];Yd=ia[1];le=ia[2];if(Pd!==Da[0]||Yd!==Da[1]||le!==Da[2])N.stencilFunc(Pd,Yd,le),Da[0]=Pd,Da[1]=Yd,Da[2]=le;pd=xc[0];ld=xc[1];wd=xc[2];od=xc[3];if(pd!==D[0]||ld!==D[1]||wd!==D[2]||od!==D[3])N.stencilOpSeparate(pd,ld,wd,od),D[0]=pd,D[1]=ld,D[2]=wd,D[3]=od;gd=tb[0];Ac=tb[1];qd=tb[2];Rc=tb[3];if(gd!==Qc[0]||Ac!==Qc[1]||qd!==Qc[2]||Rc!==Qc[3])N.stencilOpSeparate(gd,Ac,qd,Rc),Qc[0]=gd,Qc[1]=Ac,Qc[2]=qd,Qc[3]=Rc}N.blendColor(0,0,0,0);Fa[0]=
0;Fa[1]=0;Fa[2]=0;Fa[3]=0;N.enable(3042);Z.blend_enable=!0;N.blendEquationSeparate(32774,32774);ac[0]=32774;ac[1]=32774;N.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;N.enable(3089);Z.scissor_enable=!0;N.disable(2960);Z.stencil_enable=!1;if(q=Z.profile)l=performance.now(),W.count+=c;N.useProgram(G.program);w=R.angle_instanced_arrays;var Lc,sc,$a,jc,Fb;ha.setVAO(null);Lc=na.location;sc=Eb[Lc];sc.buffer||N.enableVertexAttribArray(Lc);if(5126!==sc.type||1!==sc.size||sc.buffer!==
e||!1!==sc.normalized||0!==sc.offset||8!==sc.stride)N.bindBuffer(34962,e.buffer),N.vertexAttribPointer(Lc,1,5126,!1,8,0),sc.type=5126,sc.size=1,sc.buffer=e,sc.normalized=!1,sc.offset=0,sc.stride=8;0!==sc.divisor&&(w.vertexAttribDivisorANGLE(Lc,0),sc.divisor=0);$a=I.location;jc=Eb[$a];jc.buffer||N.enableVertexAttribArray($a);if(5126!==jc.type||1!==jc.size||jc.buffer!==d||!1!==jc.normalized||4!==jc.offset||8!==jc.stride)N.bindBuffer(34962,d.buffer),N.vertexAttribPointer($a,1,5126,!1,8,4),jc.type=5126,
jc.size=1,jc.buffer=d,jc.normalized=!1,jc.offset=4,jc.stride=8;0!==jc.divisor&&(w.vertexAttribDivisorANGLE($a,0),jc.divisor=0);(Fb=H.elements)?N.bindBuffer(34963,Fb.buffer.buffer):ha.currentVAO&&(Fb=M.getElements(ha.currentVAO.elements))&&N.bindBuffer(34963,Fb.buffer.buffer);for(u=0;u<c;++u){p=a[u];var rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,bb,Ka,Ob,fb,hb,ya,fc,Ea,pb,
qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,xe,me,Yc,Jf,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc;rc=p.viewport;Ua=rc.x|0;Jc=rc.y|0;cc="width"in rc?rc.width|0:Oa.framebufferWidth-Ua;$c="height"in rc?rc.height|0:Oa.framebufferHeight-Jc;Nd=Oa.viewportWidth;Oa.viewportWidth=cc;md=Oa.viewportHeight;Oa.viewportHeight=$c;N.viewport(Ua,Jc,cc,$c);ga[0]=Ua;ga[1]=Jc;ga[2]=cc;ga[3]=$c;(Bc=ka.call(this,Oa,p,
u))?N.enable(2929):N.disable(2929);Z.depth_enable=Bc;Xb=p.viewport;Gc=Xb.x|0;Sc=Xb.y|0;La="width"in Xb?Xb.width|0:Oa.framebufferWidth-Gc;ub="height"in Xb?Xb.height|0:Oa.framebufferHeight-Sc;N.scissor(Gc,Sc,La,ub);J[0]=Gc;J[1]=Sc;J[2]=La;J[3]=ub;U.buffer=p.positionBuffer;Xa=!1;pa=null;vd=0;Bb=!1;Vb=Sa=0;cb=1;Yb=0;Rb=5126;Sd=Sb=bc=Ee=0;Zb(U)?(Xa=!0,pa=qa.createStream(34962,U),Rb=pa.dtype):(pa=qa.getBuffer(U))?Rb=pa.dtype:"constant"in U?(cb=2,"number"===typeof U.constant?(bc=U.constant,Sb=Sd=Ee=0):(bc=
0<U.constant.length?U.constant[0]:0,Sb=1<U.constant.length?U.constant[1]:0,Sd=2<U.constant.length?U.constant[2]:0,Ee=3<U.constant.length?U.constant[3]:0)):(pa=Zb(U.buffer)?qa.createStream(34962,U.buffer):qa.getBuffer(U.buffer),Rb="type"in U?ta[U.type]:pa.dtype,Bb=!!U.normalized,Vb=U.size|0,Sa=U.offset|0,Yb=U.stride|0,vd=U.divisor|0);Tb=Ca.location;Na=Eb[Tb];if(1===cb){Na.buffer||N.enableVertexAttribArray(Tb);nb=Vb||2;if(Na.type!==Rb||Na.size!==nb||Na.buffer!==pa||Na.normalized!==Bb||Na.offset!==Sa||
Na.stride!==Yb)N.bindBuffer(34962,pa.buffer),N.vertexAttribPointer(Tb,nb,Rb,Bb,Yb,Sa),Na.type=Rb,Na.size=nb,Na.buffer=pa,Na.normalized=Bb,Na.offset=Sa,Na.stride=Yb;Na.divisor!==vd&&(w.vertexAttribDivisorANGLE(Tb,vd),Na.divisor=vd)}else if(Na.buffer&&(N.disableVertexAttribArray(Tb),Na.buffer=null),Na.x!==bc||Na.y!==Sb||Na.z!==Sd||Na.w!==Ee)N.vertexAttrib4f(Tb,bc,Sb,Sd,Ee),Na.x=bc,Na.y=Sb,Na.z=Sd,Na.w=Ee;oa.buffer=p.positionBuffer;vb=!1;gb=null;Pa=0;qc=!1;sd=Ib=0;db=1;nc=0;Hc=5126;sa=jb=ib=kc=0;Zb(oa)?
(vb=!0,gb=qa.createStream(34962,oa),Hc=gb.dtype):(gb=qa.getBuffer(oa))?Hc=gb.dtype:"constant"in oa?(db=2,"number"===typeof oa.constant?(ib=oa.constant,jb=sa=kc=0):(ib=0<oa.constant.length?oa.constant[0]:0,jb=1<oa.constant.length?oa.constant[1]:0,sa=2<oa.constant.length?oa.constant[2]:0,kc=3<oa.constant.length?oa.constant[3]:0)):(gb=Zb(oa.buffer)?qa.createStream(34962,oa.buffer):qa.getBuffer(oa.buffer),Hc="type"in oa?ta[oa.type]:gb.dtype,qc=!!oa.normalized,sd=oa.size|0,Ib=oa.offset|0,nc=oa.stride|
0,Pa=oa.divisor|0);ob=g.location;va=Eb[ob];if(1===db){va.buffer||N.enableVertexAttribArray(ob);Va=sd||2;if(va.type!==Hc||va.size!==Va||va.buffer!==gb||va.normalized!==qc||va.offset!==Ib||va.stride!==nc)N.bindBuffer(34962,gb.buffer),N.vertexAttribPointer(ob,Va,Hc,qc,nc,Ib),va.type=Hc,va.size=Va,va.buffer=gb,va.normalized=qc,va.offset=Ib,va.stride=nc;va.divisor!==Pa&&(w.vertexAttribDivisorANGLE(ob,Pa),va.divisor=Pa)}else if(va.buffer&&(N.disableVertexAttribArray(ob),va.buffer=null),va.x!==ib||va.y!==
jb||va.z!==sa||va.w!==kc)N.vertexAttrib4f(ob,ib,jb,sa,kc),va.x=ib,va.y=jb,va.z=sa,va.w=kc;fa.buffer=p.positionFractBuffer;ab=!1;Aa=null;eb=0;Ia=!1;Ab=Cb=0;Ra=1;Kc=0;Jb=5126;bb=xa=Ub=Lb=0;Zb(fa)?(ab=!0,Aa=qa.createStream(34962,fa),Jb=Aa.dtype):(Aa=qa.getBuffer(fa))?Jb=Aa.dtype:"constant"in fa?(Ra=2,"number"===typeof fa.constant?(Ub=fa.constant,xa=bb=Lb=0):(Ub=0<fa.constant.length?fa.constant[0]:0,xa=1<fa.constant.length?fa.constant[1]:0,bb=2<fa.constant.length?fa.constant[2]:0,Lb=3<fa.constant.length?
fa.constant[3]:0)):(Aa=Zb(fa.buffer)?qa.createStream(34962,fa.buffer):qa.getBuffer(fa.buffer),Jb="type"in fa?ta[fa.type]:Aa.dtype,Ia=!!fa.normalized,Ab=fa.size|0,Cb=fa.offset|0,Kc=fa.stride|0,eb=fa.divisor|0);Ka=h.location;Ob=Eb[Ka];if(1===Ra){Ob.buffer||N.enableVertexAttribArray(Ka);fb=Ab||2;if(Ob.type!==Jb||Ob.size!==fb||Ob.buffer!==Aa||Ob.normalized!==Ia||Ob.offset!==Cb||Ob.stride!==Kc)N.bindBuffer(34962,Aa.buffer),N.vertexAttribPointer(Ka,fb,Jb,Ia,Kc,Cb),Ob.type=Jb,Ob.size=fb,Ob.buffer=Aa,Ob.normalized=
Ia,Ob.offset=Cb,Ob.stride=Kc;Ob.divisor!==eb&&(w.vertexAttribDivisorANGLE(Ka,eb),Ob.divisor=eb)}else if(Ob.buffer&&(N.disableVertexAttribArray(Ka),Ob.buffer=null),Ob.x!==Ub||Ob.y!==xa||Ob.z!==bb||Ob.w!==Lb)N.vertexAttrib4f(Ka,Ub,xa,bb,Lb),Ob.x=Ub,Ob.y=xa,Ob.z=bb,Ob.w=Lb;E.buffer=p.positionFractBuffer;hb=!1;ya=null;fc=0;Ea=!1;qb=pb=0;Ya=1;Za=0;oc=5126;Mb=Wa=uc=cd=0;Zb(E)?(hb=!0,ya=qa.createStream(34962,E),oc=ya.dtype):(ya=qa.getBuffer(E))?oc=ya.dtype:"constant"in E?(Ya=2,"number"===typeof E.constant?
(uc=E.constant,Wa=Mb=cd=0):(uc=0<E.constant.length?E.constant[0]:0,Wa=1<E.constant.length?E.constant[1]:0,Mb=2<E.constant.length?E.constant[2]:0,cd=3<E.constant.length?E.constant[3]:0)):(ya=Zb(E.buffer)?qa.createStream(34962,E.buffer):qa.getBuffer(E.buffer),oc="type"in E?ta[E.type]:ya.dtype,Ea=!!E.normalized,qb=E.size|0,pb=E.offset|0,Za=E.stride|0,fc=E.divisor|0);dd=f.location;Ga=Eb[dd];if(1===Ya){Ga.buffer||N.enableVertexAttribArray(dd);yc=qb||2;if(Ga.type!==oc||Ga.size!==yc||Ga.buffer!==ya||Ga.normalized!==
Ea||Ga.offset!==pb||Ga.stride!==Za)N.bindBuffer(34962,ya.buffer),N.vertexAttribPointer(dd,yc,oc,Ea,Za,pb),Ga.type=oc,Ga.size=yc,Ga.buffer=ya,Ga.normalized=Ea,Ga.offset=pb,Ga.stride=Za;Ga.divisor!==fc&&(w.vertexAttribDivisorANGLE(dd,fc),Ga.divisor=fc)}else if(Ga.buffer&&(N.disableVertexAttribArray(dd),Ga.buffer=null),Ga.x!==uc||Ga.y!==Wa||Ga.z!==Mb||Ga.w!==cd)N.vertexAttrib4f(dd,uc,Wa,Mb,cd),Ga.x=uc,Ga.y=Wa,Ga.z=Mb,Ga.w=cd;z.buffer=p.colorBuffer;Qa=!1;Ba=null;kb=0;wb=!1;rb=Db=0;vc=1;xb=0;rd=5126;id=
Mc=Gd=tc=0;Zb(z)?(Qa=!0,Ba=qa.createStream(34962,z),rd=Ba.dtype):(Ba=qa.getBuffer(z))?rd=Ba.dtype:"constant"in z?(vc=2,"number"===typeof z.constant?(Gd=z.constant,Mc=id=tc=0):(Gd=0<z.constant.length?z.constant[0]:0,Mc=1<z.constant.length?z.constant[1]:0,id=2<z.constant.length?z.constant[2]:0,tc=3<z.constant.length?z.constant[3]:0)):(Ba=Zb(z.buffer)?qa.createStream(34962,z.buffer):qa.getBuffer(z.buffer),rd="type"in z?ta[z.type]:Ba.dtype,wb=!!z.normalized,rb=z.size|0,Db=z.offset|0,xb=z.stride|0,kb=
z.divisor|0);ed=v.location;Wb=Eb[ed];if(1===vc){Wb.buffer||N.enableVertexAttribArray(ed);dc=rb||4;if(Wb.type!==rd||Wb.size!==dc||Wb.buffer!==Ba||Wb.normalized!==wb||Wb.offset!==Db||Wb.stride!==xb)N.bindBuffer(34962,Ba.buffer),N.vertexAttribPointer(ed,dc,rd,wb,xb,Db),Wb.type=rd,Wb.size=dc,Wb.buffer=Ba,Wb.normalized=wb,Wb.offset=Db,Wb.stride=xb;Wb.divisor!==kb&&(w.vertexAttribDivisorANGLE(ed,kb),Wb.divisor=kb)}else if(Wb.buffer&&(N.disableVertexAttribArray(ed),Wb.buffer=null),Wb.x!==Gd||Wb.y!==Mc||
Wb.z!==id||Wb.w!==tc)N.vertexAttrib4f(ed,Gd,Mc,id,tc),Wb.x=Gd,Wb.y=Mc,Wb.z=id,Wb.w=tc;Pb=p.scale;Ha=Pb[0];lb=Pb[1];u&&$b===Ha&&yb===lb||($b=Ha,yb=lb,N.uniform2f(b.location,Ha,lb));Nb=p.scaleFract;Qb=Nb[0];ic=Nb[1];u&&gc===Qb&&Tc===ic||(gc=Qb,Tc=ic,N.uniform2f(k.location,Qb,ic));Cc=p.translate;Dc=Cc[0];Nc=Cc[1];u&&Ec===Dc&&ad===Nc||(Ec=Dc,ad=Nc,N.uniform2f(la.location,Dc,Nc));Uc=p.translateFract;Oc=Uc[0];Gb=Uc[1];u&&Kb===Oc&&Pc===Gb||(Kb=Oc,Pc=Gb,N.uniform2f(Ta.location,Oc,Gb));Ic=p.thickness;u&&Vc===
Ic||(Vc=Ic,N.uniform1f(Y.location,Ic));hc=p.depth;u&&Xc===hc||(Xc=hc,N.uniform1f(m.location,hc));fd=O.call(this,Oa,p,u);xe=fd[0];Yc=fd[1];he=fd[2];qe=fd[3];u&&me===xe&&Jf===Yc&&se===he&&Qd===qe||(me=xe,Jf=Yc,se=he,Qd=qe,N.uniform4f(mb.location,xe,Yc,he,qe));Dd=p.dashLength;u&&Bd===Dd||(Bd=Dd,N.uniform1f(P.location,Dd));hd=p.opacity;u&&Fc===hd||(Fc=hd,N.uniform1f(da.location,hd));(nd=p.dashTexture)&&"framebuffer"===nd._reglType&&(nd=nd.color[0]);jd=nd._texture;N.uniform1i(S.location,jd.bind());Zc=
p.count;0<Zc?Fb?w.drawElementsInstancedANGLE(5,4,Fb.type,0<<(Fb.type-5121>>1),Zc):w.drawArraysInstancedANGLE(5,0,4,Zc):0>Zc&&(Fb?N.drawElements(5,4,Fb.type,0<<(Fb.type-5121>>1)):N.drawArrays(5,0,4));Oa.viewportWidth=Nd;Oa.viewportHeight=md;Xa&&qa.destroyStream(pa);vb&&qa.destroyStream(gb);ab&&qa.destroyStream(Aa);hb&&qa.destroyStream(ya);Qa&&qa.destroyStream(Ba);jd.unbind()}Z.dirty=!0;ha.setVAO(null);q&&(W.cpuTime+=performance.now()-l)},draw:function(a){var c,w,u,l,x,r,p,t,aa,B,y,G,K,C,F,L,Q,O,ba,
wa,ja,ee,Ye,ka,Ma,xd,De,be,Pd,Yd,le,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,bb,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb;c=ua.next;c!==ua.cur&&(c?N.bindFramebuffer(36160,c.framebuffer):N.bindFramebuffer(36160,null),ua.cur=c);if(Z.dirty){var qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb;qb=Ja.dither;
qb!==Z.dither&&(qb?N.enable(3024):N.disable(3024),Z.dither=qb);Ya=Ja.depth_func;Ya!==Z.depth_func&&(N.depthFunc(Ya),Z.depth_func=Ya);Za=ra[0];oc=ra[1];if(Za!==ec[0]||oc!==ec[1])N.depthRange(Za,oc),ec[0]=Za,ec[1]=oc;cd=Ja.depth_mask;cd!==Z.depth_mask&&(N.depthMask(cd),Z.depth_mask=cd);uc=sb[0];Wa=sb[1];Mb=sb[2];dd=sb[3];if(uc!==ea[0]||Wa!==ea[1]||Mb!==ea[2]||dd!==ea[3])N.colorMask(uc,Wa,Mb,dd),ea[0]=uc,ea[1]=Wa,ea[2]=Mb,ea[3]=dd;Ga=Ja.cull_enable;Ga!==Z.cull_enable&&(Ga?N.enable(2884):N.disable(2884),
Z.cull_enable=Ga);yc=Ja.cull_face;yc!==Z.cull_face&&(N.cullFace(yc),Z.cull_face=yc);Qa=Ja.frontFace;Qa!==Z.frontFace&&(N.frontFace(Qa),Z.frontFace=Qa);Ba=Ja.lineWidth;Ba!==Z.lineWidth&&(N.lineWidth(Ba),Z.lineWidth=Ba);kb=Ja.polygonOffset_enable;kb!==Z.polygonOffset_enable&&(kb?N.enable(32823):N.disable(32823),Z.polygonOffset_enable=kb);wb=pc[0];Db=pc[1];if(wb!==mc[0]||Db!==mc[1])N.polygonOffset(wb,Db),mc[0]=wb,mc[1]=Db;rb=Ja.sample_alpha;rb!==Z.sample_alpha&&(rb?N.enable(32926):N.disable(32926),Z.sample_alpha=
rb);vc=Ja.sample_enable;vc!==Z.sample_enable&&(vc?N.enable(32928):N.disable(32928),Z.sample_enable=vc);xb=ud[0];rd=ud[1];if(xb!==wc[0]||rd!==wc[1])N.sampleCoverage(xb,rd),wc[0]=xb,wc[1]=rd;tc=Ja.stencil_mask;tc!==Z.stencil_mask&&(N.stencilMask(tc),Z.stencil_mask=tc);Gd=ia[0];Mc=ia[1];id=ia[2];if(Gd!==Da[0]||Mc!==Da[1]||id!==Da[2])N.stencilFunc(Gd,Mc,id),Da[0]=Gd,Da[1]=Mc,Da[2]=id;ed=xc[0];Wb=xc[1];dc=xc[2];Pb=xc[3];if(ed!==D[0]||Wb!==D[1]||dc!==D[2]||Pb!==D[3])N.stencilOpSeparate(ed,Wb,dc,Pb),D[0]=
ed,D[1]=Wb,D[2]=dc,D[3]=Pb;Ha=tb[0];$b=tb[1];lb=tb[2];yb=tb[3];if(Ha!==Qc[0]||$b!==Qc[1]||lb!==Qc[2]||yb!==Qc[3])N.stencilOpSeparate(Ha,$b,lb,yb),Qc[0]=Ha,Qc[1]=$b,Qc[2]=lb,Qc[3]=yb}w=a.viewport;u=w.x|0;l=w.y|0;x="width"in w?w.width|0:Oa.framebufferWidth-u;r="height"in w?w.height|0:Oa.framebufferHeight-l;p=Oa.viewportWidth;Oa.viewportWidth=x;t=Oa.viewportHeight;Oa.viewportHeight=r;N.viewport(u,l,x,r);ga[0]=u;ga[1]=l;ga[2]=x;ga[3]=r;N.blendColor(0,0,0,0);Fa[0]=0;Fa[1]=0;Fa[2]=0;Fa[3]=0;N.enable(3042);
Z.blend_enable=!0;N.blendEquationSeparate(32774,32774);ac[0]=32774;ac[1]=32774;N.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;(aa=n.call(this,Oa,a,0))?N.enable(2929):N.disable(2929);Z.depth_enable=aa;B=a.viewport;y=B.x|0;G=B.y|0;K="width"in B?B.width|0:Oa.framebufferWidth-y;C="height"in B?B.height|0:Oa.framebufferHeight-G;N.scissor(y,G,K,C);J[0]=y;J[1]=G;J[2]=K;J[3]=C;N.enable(3089);Z.scissor_enable=!0;N.disable(2960);Z.stencil_enable=!1;if(F=Z.profile)L=performance.now(),W.count++;
N.useProgram(A.program);Q=R.angle_instanced_arrays;ha.setVAO(null);U.buffer=a.positionBuffer;O=!1;ba=null;wa=0;ja=!1;Ye=ee=0;ka=1;Ma=0;xd=5126;Yd=Pd=be=De=0;Zb(U)?(O=!0,ba=qa.createStream(34962,U),xd=ba.dtype):(ba=qa.getBuffer(U))?xd=ba.dtype:"constant"in U?(ka=2,"number"===typeof U.constant?(be=U.constant,Pd=Yd=De=0):(be=0<U.constant.length?U.constant[0]:0,Pd=1<U.constant.length?U.constant[1]:0,Yd=2<U.constant.length?U.constant[2]:0,De=3<U.constant.length?U.constant[3]:0)):(ba=Zb(U.buffer)?qa.createStream(34962,
U.buffer):qa.getBuffer(U.buffer),xd="type"in U?ta[U.type]:ba.dtype,ja=!!U.normalized,Ye=U.size|0,ee=U.offset|0,Ma=U.stride|0,wa=U.divisor|0);le=Ca.location;pd=Eb[le];if(1===ka){pd.buffer||N.enableVertexAttribArray(le);ld=Ye||2;if(pd.type!==xd||pd.size!==ld||pd.buffer!==ba||pd.normalized!==ja||pd.offset!==ee||pd.stride!==Ma)N.bindBuffer(34962,ba.buffer),N.vertexAttribPointer(le,ld,xd,ja,Ma,ee),pd.type=xd,pd.size=ld,pd.buffer=ba,pd.normalized=ja,pd.offset=ee,pd.stride=Ma;pd.divisor!==wa&&(Q.vertexAttribDivisorANGLE(le,
wa),pd.divisor=wa)}else if(pd.buffer&&(N.disableVertexAttribArray(le),pd.buffer=null),pd.x!==be||pd.y!==Pd||pd.z!==Yd||pd.w!==De)N.vertexAttrib4f(le,be,Pd,Yd,De),pd.x=be,pd.y=Pd,pd.z=Yd,pd.w=De;oa.buffer=a.positionBuffer;wd=!1;od=null;gd=0;Ac=!1;Rc=qd=0;Lc=1;sc=0;$a=5126;Ua=rc=Fb=jc=0;Zb(oa)?(wd=!0,od=qa.createStream(34962,oa),$a=od.dtype):(od=qa.getBuffer(oa))?$a=od.dtype:"constant"in oa?(Lc=2,"number"===typeof oa.constant?(Fb=oa.constant,rc=Ua=jc=0):(Fb=0<oa.constant.length?oa.constant[0]:0,rc=
1<oa.constant.length?oa.constant[1]:0,Ua=2<oa.constant.length?oa.constant[2]:0,jc=3<oa.constant.length?oa.constant[3]:0)):(od=Zb(oa.buffer)?qa.createStream(34962,oa.buffer):qa.getBuffer(oa.buffer),$a="type"in oa?ta[oa.type]:od.dtype,Ac=!!oa.normalized,Rc=oa.size|0,qd=oa.offset|0,sc=oa.stride|0,gd=oa.divisor|0);Jc=g.location;cc=Eb[Jc];if(1===Lc){cc.buffer||N.enableVertexAttribArray(Jc);$c=Rc||2;if(cc.type!==$a||cc.size!==$c||cc.buffer!==od||cc.normalized!==Ac||cc.offset!==qd||cc.stride!==sc)N.bindBuffer(34962,
od.buffer),N.vertexAttribPointer(Jc,$c,$a,Ac,sc,qd),cc.type=$a,cc.size=$c,cc.buffer=od,cc.normalized=Ac,cc.offset=qd,cc.stride=sc;cc.divisor!==gd&&(Q.vertexAttribDivisorANGLE(Jc,gd),cc.divisor=gd)}else if(cc.buffer&&(N.disableVertexAttribArray(Jc),cc.buffer=null),cc.x!==Fb||cc.y!==rc||cc.z!==Ua||cc.w!==jc)N.vertexAttrib4f(Jc,Fb,rc,Ua,jc),cc.x=Fb,cc.y=rc,cc.z=Ua,cc.w=jc;fa.buffer=a.positionFractBuffer;Nd=!1;md=null;Bc=0;Xb=!1;Sc=Gc=0;La=1;ub=0;Xa=5126;Sa=Bb=vd=pa=0;Zb(fa)?(Nd=!0,md=qa.createStream(34962,
fa),Xa=md.dtype):(md=qa.getBuffer(fa))?Xa=md.dtype:"constant"in fa?(La=2,"number"===typeof fa.constant?(vd=fa.constant,Bb=Sa=pa=0):(vd=0<fa.constant.length?fa.constant[0]:0,Bb=1<fa.constant.length?fa.constant[1]:0,Sa=2<fa.constant.length?fa.constant[2]:0,pa=3<fa.constant.length?fa.constant[3]:0)):(md=Zb(fa.buffer)?qa.createStream(34962,fa.buffer):qa.getBuffer(fa.buffer),Xa="type"in fa?ta[fa.type]:md.dtype,Xb=!!fa.normalized,Sc=fa.size|0,Gc=fa.offset|0,ub=fa.stride|0,Bc=fa.divisor|0);Vb=h.location;
cb=Eb[Vb];if(1===La){cb.buffer||N.enableVertexAttribArray(Vb);Yb=Sc||2;if(cb.type!==Xa||cb.size!==Yb||cb.buffer!==md||cb.normalized!==Xb||cb.offset!==Gc||cb.stride!==ub)N.bindBuffer(34962,md.buffer),N.vertexAttribPointer(Vb,Yb,Xa,Xb,ub,Gc),cb.type=Xa,cb.size=Yb,cb.buffer=md,cb.normalized=Xb,cb.offset=Gc,cb.stride=ub;cb.divisor!==Bc&&(Q.vertexAttribDivisorANGLE(Vb,Bc),cb.divisor=Bc)}else if(cb.buffer&&(N.disableVertexAttribArray(Vb),cb.buffer=null),cb.x!==vd||cb.y!==Bb||cb.z!==Sa||cb.w!==pa)N.vertexAttrib4f(Vb,
vd,Bb,Sa,pa),cb.x=vd,cb.y=Bb,cb.z=Sa,cb.w=pa;E.buffer=a.positionFractBuffer;Rb=!1;bb=null;bc=0;Sb=!1;Tb=Sd=0;Na=1;nb=0;vb=5126;Ib=qc=Pa=gb=0;Zb(E)?(Rb=!0,bb=qa.createStream(34962,E),vb=bb.dtype):(bb=qa.getBuffer(E))?vb=bb.dtype:"constant"in E?(Na=2,"number"===typeof E.constant?(Pa=E.constant,qc=Ib=gb=0):(Pa=0<E.constant.length?E.constant[0]:0,qc=1<E.constant.length?E.constant[1]:0,Ib=2<E.constant.length?E.constant[2]:0,gb=3<E.constant.length?E.constant[3]:0)):(bb=Zb(E.buffer)?qa.createStream(34962,
E.buffer):qa.getBuffer(E.buffer),vb="type"in E?ta[E.type]:bb.dtype,Sb=!!E.normalized,Tb=E.size|0,Sd=E.offset|0,nb=E.stride|0,bc=E.divisor|0);sd=f.location;db=Eb[sd];if(1===Na){db.buffer||N.enableVertexAttribArray(sd);nc=Tb||2;if(db.type!==vb||db.size!==nc||db.buffer!==bb||db.normalized!==Sb||db.offset!==Sd||db.stride!==nb)N.bindBuffer(34962,bb.buffer),N.vertexAttribPointer(sd,nc,vb,Sb,nb,Sd),db.type=vb,db.size=nc,db.buffer=bb,db.normalized=Sb,db.offset=Sd,db.stride=nb;db.divisor!==bc&&(Q.vertexAttribDivisorANGLE(sd,
bc),db.divisor=bc)}else if(db.buffer&&(N.disableVertexAttribArray(sd),db.buffer=null),db.x!==Pa||db.y!==qc||db.z!==Ib||db.w!==gb)N.vertexAttrib4f(sd,Pa,qc,Ib,gb),db.x=Pa,db.y=qc,db.z=Ib,db.w=gb;z.buffer=a.colorBuffer;Hc=!1;kc=null;ib=0;jb=!1;ob=sa=0;va=1;Va=0;ab=5126;Cb=Ia=eb=Aa=0;Zb(z)?(Hc=!0,kc=qa.createStream(34962,z),ab=kc.dtype):(kc=qa.getBuffer(z))?ab=kc.dtype:"constant"in z?(va=2,"number"===typeof z.constant?(eb=z.constant,Ia=Cb=Aa=0):(eb=0<z.constant.length?z.constant[0]:0,Ia=1<z.constant.length?
z.constant[1]:0,Cb=2<z.constant.length?z.constant[2]:0,Aa=3<z.constant.length?z.constant[3]:0)):(kc=Zb(z.buffer)?qa.createStream(34962,z.buffer):qa.getBuffer(z.buffer),ab="type"in z?ta[z.type]:kc.dtype,jb=!!z.normalized,ob=z.size|0,sa=z.offset|0,Va=z.stride|0,ib=z.divisor|0);Ab=v.location;Ra=Eb[Ab];if(1===va){Ra.buffer||N.enableVertexAttribArray(Ab);Kc=ob||4;if(Ra.type!==ab||Ra.size!==Kc||Ra.buffer!==kc||Ra.normalized!==jb||Ra.offset!==sa||Ra.stride!==Va)N.bindBuffer(34962,kc.buffer),N.vertexAttribPointer(Ab,
Kc,ab,jb,Va,sa),Ra.type=ab,Ra.size=Kc,Ra.buffer=kc,Ra.normalized=jb,Ra.offset=sa,Ra.stride=Va;Ra.divisor!==ib&&(Q.vertexAttribDivisorANGLE(Ab,ib),Ra.divisor=ib)}else if(Ra.buffer&&(N.disableVertexAttribArray(Ab),Ra.buffer=null),Ra.x!==eb||Ra.y!==Ia||Ra.z!==Cb||Ra.w!==Aa)N.vertexAttrib4f(Ab,eb,Ia,Cb,Aa),Ra.x=eb,Ra.y=Ia,Ra.z=Cb,Ra.w=Aa;Jb=na.location;Lb=Eb[Jb];Lb.buffer||N.enableVertexAttribArray(Jb);if(5126!==Lb.type||1!==Lb.size||Lb.buffer!==e||!1!==Lb.normalized||0!==Lb.offset||8!==Lb.stride)N.bindBuffer(34962,
e.buffer),N.vertexAttribPointer(Jb,1,5126,!1,8,0),Lb.type=5126,Lb.size=1,Lb.buffer=e,Lb.normalized=!1,Lb.offset=0,Lb.stride=8;0!==Lb.divisor&&(Q.vertexAttribDivisorANGLE(Jb,0),Lb.divisor=0);Ub=I.location;xa=Eb[Ub];xa.buffer||N.enableVertexAttribArray(Ub);if(5126!==xa.type||1!==xa.size||xa.buffer!==d||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)N.bindBuffer(34962,d.buffer),N.vertexAttribPointer(Ub,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=d,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&
(Q.vertexAttribDivisorANGLE(Ub,0),xa.divisor=0);Td=a.scale;N.uniform2f(b.location,Td[0],Td[1]);Ka=a.scaleFract;N.uniform2f(k.location,Ka[0],Ka[1]);Ob=a.translate;N.uniform2f(la.location,Ob[0],Ob[1]);fb=a.translateFract;N.uniform2f(Ta.location,fb[0],fb[1]);N.uniform1f(Y.location,a.thickness);N.uniform1f(m.location,a.depth);hb=q.call(this,Oa,a,0);N.uniform4f(mb.location,hb[0],hb[1],hb[2],hb[3]);N.uniform1f(P.location,a.dashLength);N.uniform1f(da.location,a.opacity);(ya=a.dashTexture)&&"framebuffer"===
ya._reglType&&(ya=ya.color[0]);fc=ya._texture;N.uniform1i(S.location,fc.bind());(Ea=H.elements)?N.bindBuffer(34963,Ea.buffer.buffer):ha.currentVAO&&(Ea=M.getElements(ha.currentVAO.elements))&&N.bindBuffer(34963,Ea.buffer.buffer);pb=a.count;0<pb?Ea?Q.drawElementsInstancedANGLE(5,4,Ea.type,0<<(Ea.type-5121>>1),pb):Q.drawArraysInstancedANGLE(5,0,4,pb):0>pb&&(Ea?N.drawElements(5,4,Ea.type,0<<(Ea.type-5121>>1)):N.drawArrays(5,0,4));Z.dirty=!0;ha.setVAO(null);Oa.viewportWidth=p;Oa.viewportHeight=t;F&&(W.cpuTime+=
performance.now()-L);O&&qa.destroyStream(ba);wd&&qa.destroyStream(od);Nd&&qa.destroyStream(md);Rb&&qa.destroyStream(bb);Hc&&qa.destroyStream(kc);fc.unbind()},scope:function(b,c,f){var g,h,k,m,p,n,q,v,J,A,D,I,M,P,G,N,S,R,V,O,ia,ga,Y,ea,ha,pc,da,na,Ca,Da,ra,ua,ud,la,wc,tb,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,Qc,ka,ec,Bc,Xb,Gc,Sc,La,ub,Xa,pa,Fa,Bb,Sa,Vb,cb,Yb,Rb,mc,bc,Sb,sb,Tb,Na,nb,vb,gb,Pa,qc,Ib,xc,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,mb,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,
uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,ac,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,Eb,me,Yc,Ta,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ze,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Oe,Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me;g=b.viewport;h=g.x|0;k=g.y|0;m="width"in g?g.width|0:Oa.framebufferWidth-h;p="height"in g?g.height|0:Oa.framebufferHeight-k;n=Oa.viewportWidth;Oa.viewportWidth=m;q=Oa.viewportHeight;
Oa.viewportHeight=p;v=w[0];w[0]=h;J=w[1];w[1]=k;A=w[2];w[2]=m;D=w[3];w[3]=p;I=ba[0];ba[0]=0;M=ba[1];ba[1]=0;P=ba[2];ba[2]=0;G=ba[3];ba[3]=0;N=Ja.blend_enable;Ja.blend_enable=!0;S=Ma[0];Ma[0]=32774;R=Ma[1];Ma[1]=32774;V=bb[0];bb[0]=770;O=bb[1];bb[1]=771;ia=bb[2];bb[2]=773;ga=bb[3];bb[3]=1;Y=a.call(this,Oa,b,f);ea=Ja.depth_enable;Ja.depth_enable=Y;ha=b.viewport;pc=ha.x|0;da=ha.y|0;na="width"in ha?ha.width|0:Oa.framebufferWidth-pc;Ca="height"in ha?ha.height|0:Oa.framebufferHeight-da;Da=aa[0];aa[0]=pc;
ra=aa[1];aa[1]=da;ua=aa[2];aa[2]=na;ud=aa[3];aa[3]=Ca;la=Ja.scissor_enable;Ja.scissor_enable=!0;wc=Ja.stencil_enable;Ja.stencil_enable=!1;if(tb=Z.profile)Rc=performance.now(),W.count++;Lc=H.offset;H.offset=0;sc=H.count;H.count=4;$a=b.count;jc=H.instances;H.instances=$a;Fb=H.primitive;H.primitive=5;rc=b.dashLength;Ua=u[23];u[23]=rc;Jc=b.dashTexture;cc=u[24];u[24]=Jc;Qc=b.depth;ka=u[22];u[22]=Qc;ec=b.id;Bc=u[31];u[31]=ec;Xb=b.miterLimit;Gc=u[32];u[32]=Xb;Sc=t.call(this,Oa,b,f);La=u[33];u[33]=Sc;ub=
b.opacity;Xa=u[10];u[10]=ub;pa=Oa.pixelRatio;Fa=u[34];u[34]=pa;Bb=b.scale;Sa=u[6];u[6]=Bb;Vb=b.scaleFract;cb=u[7];u[7]=Vb;Yb=b.thickness;Rb=u[21];u[21]=Yb;mc=b.translate;bc=u[8];u[8]=mc;Sb=b.translateFract;sb=u[9];u[9]=Sb;Tb=C.call(this,Oa,b,f);Na=u[3];u[3]=Tb;U.buffer=b.positionBuffer;nb=!1;vb=null;gb=0;Pa=!1;Ib=qc=0;xc=1;db=0;nc=5126;jb=ib=kc=Hc=0;Zb(U)?(nb=!0,vb=qa.createStream(34962,U),nc=vb.dtype):(vb=qa.getBuffer(U))?nc=vb.dtype:"constant"in U?(xc=2,"number"===typeof U.constant?(kc=U.constant,
ib=jb=Hc=0):(kc=0<U.constant.length?U.constant[0]:0,ib=1<U.constant.length?U.constant[1]:0,jb=2<U.constant.length?U.constant[2]:0,Hc=3<U.constant.length?U.constant[3]:0)):(vb=Zb(U.buffer)?qa.createStream(34962,U.buffer):qa.getBuffer(U.buffer),nc="type"in U?ta[U.type]:vb.dtype,Pa=!!U.normalized,Ib=U.size|0,qc=U.offset|0,db=U.stride|0,gb=U.divisor|0);sa=y.buffer;y.buffer=vb;ob=y.divisor;y.divisor=gb;va=y.normalized;y.normalized=Pa;Va=y.offset;y.offset=qc;ab=y.size;y.size=Ib;Aa=y.state;y.state=xc;eb=
y.stride;y.stride=db;Ia=y.type;y.type=nc;Cb=y.w;y.w=Hc;Ab=y.x;y.x=kc;Ra=y.y;y.y=ib;Kc=y.z;y.z=jb;fa.buffer=b.positionFractBuffer;Jb=!1;Lb=null;Ub=0;xa=!1;Ka=mb=0;Ob=1;fb=0;hb=5126;pb=Ea=fc=ya=0;Zb(fa)?(Jb=!0,Lb=qa.createStream(34962,fa),hb=Lb.dtype):(Lb=qa.getBuffer(fa))?hb=Lb.dtype:"constant"in fa?(Ob=2,"number"===typeof fa.constant?(fc=fa.constant,Ea=pb=ya=0):(fc=0<fa.constant.length?fa.constant[0]:0,Ea=1<fa.constant.length?fa.constant[1]:0,pb=2<fa.constant.length?fa.constant[2]:0,ya=3<fa.constant.length?
fa.constant[3]:0)):(Lb=Zb(fa.buffer)?qa.createStream(34962,fa.buffer):qa.getBuffer(fa.buffer),hb="type"in fa?ta[fa.type]:Lb.dtype,xa=!!fa.normalized,Ka=fa.size|0,mb=fa.offset|0,fb=fa.stride|0,Ub=fa.divisor|0);qb=K.buffer;K.buffer=Lb;Ya=K.divisor;K.divisor=Ub;Za=K.normalized;K.normalized=xa;oc=K.offset;K.offset=mb;cd=K.size;K.size=Ka;uc=K.state;K.state=Ob;Wa=K.stride;K.stride=fb;Mb=K.type;K.type=hb;dd=K.w;K.w=ya;Ga=K.x;K.x=fc;yc=K.y;K.y=Ea;Qa=K.z;K.z=pb;oa.buffer=b.positionBuffer;Ba=!1;kb=null;wb=
0;Db=!1;vc=rb=0;xb=1;rd=0;tc=5126;ed=id=Mc=ac=0;Zb(oa)?(Ba=!0,kb=qa.createStream(34962,oa),tc=kb.dtype):(kb=qa.getBuffer(oa))?tc=kb.dtype:"constant"in oa?(xb=2,"number"===typeof oa.constant?(Mc=oa.constant,id=ed=ac=0):(Mc=0<oa.constant.length?oa.constant[0]:0,id=1<oa.constant.length?oa.constant[1]:0,ed=2<oa.constant.length?oa.constant[2]:0,ac=3<oa.constant.length?oa.constant[3]:0)):(kb=Zb(oa.buffer)?qa.createStream(34962,oa.buffer):qa.getBuffer(oa.buffer),tc="type"in oa?ta[oa.type]:kb.dtype,Db=!!oa.normalized,
vc=oa.size|0,rb=oa.offset|0,rd=oa.stride|0,wb=oa.divisor|0);Wb=L.buffer;L.buffer=kb;dc=L.divisor;L.divisor=wb;Pb=L.normalized;L.normalized=Db;Ha=L.offset;L.offset=rb;$b=L.size;L.size=vc;lb=L.state;L.state=xb;yb=L.stride;L.stride=rd;Nb=L.type;L.type=tc;Qb=L.w;L.w=ac;gc=L.x;L.x=Mc;ic=L.y;L.y=id;Tc=L.z;L.z=ed;E.buffer=b.positionFractBuffer;Cc=!1;Dc=null;Ec=0;Nc=!1;Uc=ad=0;Oc=1;Kb=0;Gb=5126;hc=Vc=Ic=Pc=0;Zb(E)?(Cc=!0,Dc=qa.createStream(34962,E),Gb=Dc.dtype):(Dc=qa.getBuffer(E))?Gb=Dc.dtype:"constant"in
E?(Oc=2,"number"===typeof E.constant?(Ic=E.constant,Vc=hc=Pc=0):(Ic=0<E.constant.length?E.constant[0]:0,Vc=1<E.constant.length?E.constant[1]:0,hc=2<E.constant.length?E.constant[2]:0,Pc=3<E.constant.length?E.constant[3]:0)):(Dc=Zb(E.buffer)?qa.createStream(34962,E.buffer):qa.getBuffer(E.buffer),Gb="type"in E?ta[E.type]:Dc.dtype,Nc=!!E.normalized,Uc=E.size|0,ad=E.offset|0,Kb=E.stride|0,Ec=E.divisor|0);Xc=r.buffer;r.buffer=Dc;fd=r.divisor;r.divisor=Ec;Eb=r.normalized;r.normalized=Nc;me=r.offset;r.offset=
ad;Yc=r.size;r.size=Uc;Ta=r.state;r.state=Oc;he=r.stride;r.stride=Kb;se=r.type;r.type=Gb;qe=r.w;r.w=Pc;Qd=r.x;r.x=Ic;Dd=r.y;r.y=Vc;Bd=r.z;r.z=hc;z.buffer=b.colorBuffer;hd=!1;Fc=null;nd=0;jd=!1;kd=Zc=0;zd=1;Ad=0;ve=5126;ae=ce=Ze=ye=0;Zb(z)?(hd=!0,Fc=qa.createStream(34962,z),ve=Fc.dtype):(Fc=qa.getBuffer(z))?ve=Fc.dtype:"constant"in z?(zd=2,"number"===typeof z.constant?(Ze=z.constant,ce=ae=ye=0):(Ze=0<z.constant.length?z.constant[0]:0,ce=1<z.constant.length?z.constant[1]:0,ae=2<z.constant.length?z.constant[2]:
0,ye=3<z.constant.length?z.constant[3]:0)):(Fc=Zb(z.buffer)?qa.createStream(34962,z.buffer):qa.getBuffer(z.buffer),ve="type"in z?ta[z.type]:Fc.dtype,jd=!!z.normalized,kd=z.size|0,Zc=z.offset|0,Ad=z.stride|0,nd=z.divisor|0);Zd=B.buffer;B.buffer=Fc;Fe=B.divisor;B.divisor=nd;Wd=B.normalized;B.normalized=jd;fe=B.offset;B.offset=Zc;zc=B.size;B.size=kd;Wc=B.state;B.state=zd;ne=B.stride;B.stride=Ad;ie=B.type;B.type=ve;Cd=B.w;B.w=ye;Hd=B.x;B.x=Ze;Jd=B.y;B.y=ce;Kd=B.z;B.z=ae;ge=F.buffer;F.buffer=e;te=F.divisor;
F.divisor=0;we=F.normalized;F.normalized=!1;je=F.offset;F.offset=0;Oe=F.size;F.size=0;Pe=F.state;F.state=1;Le=F.stride;F.stride=8;oe=F.type;F.type=5126;Be=F.w;F.w=0;Ge=F.x;F.x=0;He=F.y;F.y=0;Ie=F.z;F.z=0;Ce=x.buffer;x.buffer=d;Ed=x.divisor;x.divisor=0;Od=x.normalized;x.normalized=!1;Ud=x.offset;x.offset=4;Xd=x.size;x.size=0;Je=x.state;x.state=1;yd=x.stride;x.stride=8;Ld=x.type;x.type=5126;ze=x.w;x.w=0;Ke=x.x;x.x=0;ff=x.y;x.y=0;Xe=x.z;x.z=0;Qe=Q.vert;Q.vert=20;Me=Q.frag;Q.frag=19;Z.dirty=!0;c(Oa,b,
f);Oa.viewportWidth=n;Oa.viewportHeight=q;w[0]=v;w[1]=J;w[2]=A;w[3]=D;ba[0]=I;ba[1]=M;ba[2]=P;ba[3]=G;Ja.blend_enable=N;Ma[0]=S;Ma[1]=R;bb[0]=V;bb[1]=O;bb[2]=ia;bb[3]=ga;Ja.depth_enable=ea;aa[0]=Da;aa[1]=ra;aa[2]=ua;aa[3]=ud;Ja.scissor_enable=la;Ja.stencil_enable=wc;tb&&(W.cpuTime+=performance.now()-Rc);H.offset=Lc;H.count=sc;H.instances=jc;H.primitive=Fb;u[23]=Ua;u[24]=cc;u[22]=ka;u[31]=Bc;u[32]=Gc;u[33]=La;u[10]=Xa;u[34]=Fa;u[6]=Sa;u[7]=cb;u[21]=Rb;u[8]=bc;u[9]=sb;u[3]=Na;nb&&qa.destroyStream(vb);
y.buffer=sa;y.divisor=ob;y.normalized=va;y.offset=Va;y.size=ab;y.state=Aa;y.stride=eb;y.type=Ia;y.w=Cb;y.x=Ab;y.y=Ra;y.z=Kc;Jb&&qa.destroyStream(Lb);K.buffer=qb;K.divisor=Ya;K.normalized=Za;K.offset=oc;K.size=cd;K.state=uc;K.stride=Wa;K.type=Mb;K.w=dd;K.x=Ga;K.y=yc;K.z=Qa;Ba&&qa.destroyStream(kb);L.buffer=Wb;L.divisor=dc;L.normalized=Pb;L.offset=Ha;L.size=$b;L.state=lb;L.stride=yb;L.type=Nb;L.w=Qb;L.x=gc;L.y=ic;L.z=Tc;Cc&&qa.destroyStream(Dc);r.buffer=Xc;r.divisor=fd;r.normalized=Eb;r.offset=me;r.size=
Yc;r.state=Ta;r.stride=he;r.type=se;r.w=qe;r.x=Qd;r.y=Dd;r.z=Bd;hd&&qa.destroyStream(Fc);B.buffer=Zd;B.divisor=Fe;B.normalized=Wd;B.offset=fe;B.size=zc;B.state=Wc;B.stride=ne;B.type=ie;B.w=Cd;B.x=Hd;B.y=Jd;B.z=Kd;F.buffer=ge;F.divisor=te;F.normalized=we;F.offset=je;F.size=Oe;F.state=Pe;F.stride=Le;F.type=oe;F.w=Be;F.x=Ge;F.y=He;F.z=Ie;x.buffer=Ce;x.divisor=Ed;x.normalized=Od;x.offset=Ud;x.size=Xd;x.state=Je;x.stride=yd;x.type=Ld;x.w=ze;x.x=Ke;x.y=ff;x.z=Xe;Q.vert=Qe;Q.frag=Me;Z.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(c,
W,n,A,e,d,q,a,t,y,C,K,L,r,B,F,x,G,ka,O,Ca,h,g,f,v,P,S,m,na,I,da,b,k,Y,la,Ta,mb,Eb,qa,Oa,Z){var H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra,ec,pc,mc,ud,wc,aa,J,ia,Da,tb,Qc,xc,D,w,ga,ta,U,fa,oa,E,z,ca,T,za,ma,l;H=c.attributes;M=c.buffer;R=c.context;ua=c.current;N=c.draw;Zb=c.elements;Ja=c.extensions;Q=c.framebuffer;u=c.gl;ha=c.isBufferArgs;ba=c.next;Fa=c.shader;Ma=c.uniforms;ac=c.vao;bb=ba.blend_color;V=ua.blend_color;sb=ba.blend_equation;ea=ua.blend_equation;ra=ba.blend_func;ec=ua.blend_func;
pc=ba.colorMask;mc=ua.colorMask;ud=ba.depth_range;wc=ua.depth_range;aa=ba.polygonOffset_offset;J=ua.polygonOffset_offset;ia=ba.sample_coverage;Da=ua.sample_coverage;tb=ba.scissor_box;Qc=ua.scissor_box;xc=ba.stencil_func;D=ua.stencil_func;w=ba.stencil_opBack;ga=ua.stencil_opBack;ta=ba.stencil_opFront;U=ua.stencil_opFront;fa=ba.viewport;oa=ua.viewport;E={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};z={divisor:1,offset:0,stride:4};ca={divisor:1,offset:8,
stride:8};T={divisor:1,offset:4,stride:4};za={divisor:1,offset:16,stride:8};ma={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(a,c){var p,n,q,x,r,t;p=Q.next;p!==Q.cur&&(p?u.bindFramebuffer(36160,p.framebuffer):u.bindFramebuffer(36160,null),Q.cur=p);if(ua.dirty){var A,B,y,G,K,C,F,L,fa,wa,ja,ra,tb,ka,Fa,Ma,Pd,Yd,sb,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a;A=ba.dither;A!==ua.dither&&(A?u.enable(3024):u.disable(3024),ua.dither=A);B=ba.depth_func;B!==ua.depth_func&&(u.depthFunc(B),
ua.depth_func=B);y=ud[0];G=ud[1];if(y!==wc[0]||G!==wc[1])u.depthRange(y,G),wc[0]=y,wc[1]=G;K=ba.depth_mask;K!==ua.depth_mask&&(u.depthMask(K),ua.depth_mask=K);C=pc[0];F=pc[1];L=pc[2];fa=pc[3];if(C!==mc[0]||F!==mc[1]||L!==mc[2]||fa!==mc[3])u.colorMask(C,F,L,fa),mc[0]=C,mc[1]=F,mc[2]=L,mc[3]=fa;wa=ba.frontFace;wa!==ua.frontFace&&(u.frontFace(wa),ua.frontFace=wa);ja=ba.lineWidth;ja!==ua.lineWidth&&(u.lineWidth(ja),ua.lineWidth=ja);ra=ba.polygonOffset_enable;ra!==ua.polygonOffset_enable&&(ra?u.enable(32823):
u.disable(32823),ua.polygonOffset_enable=ra);tb=aa[0];ka=aa[1];if(tb!==J[0]||ka!==J[1])u.polygonOffset(tb,ka),J[0]=tb,J[1]=ka;Fa=ba.sample_alpha;Fa!==ua.sample_alpha&&(Fa?u.enable(32926):u.disable(32926),ua.sample_alpha=Fa);Ma=ba.sample_enable;Ma!==ua.sample_enable&&(Ma?u.enable(32928):u.disable(32928),ua.sample_enable=Ma);Pd=ia[0];Yd=ia[1];if(Pd!==Da[0]||Yd!==Da[1])u.sampleCoverage(Pd,Yd),Da[0]=Pd,Da[1]=Yd;sb=ba.stencil_mask;sb!==ua.stencil_mask&&(u.stencilMask(sb),ua.stencil_mask=sb);pd=xc[0];ld=
xc[1];wd=xc[2];if(pd!==D[0]||ld!==D[1]||wd!==D[2])u.stencilFunc(pd,ld,wd),D[0]=pd,D[1]=ld,D[2]=wd;od=ta[0];gd=ta[1];Ac=ta[2];qd=ta[3];if(od!==U[0]||gd!==U[1]||Ac!==U[2]||qd!==U[3])u.stencilOpSeparate(od,gd,Ac,qd),U[0]=od,U[1]=gd,U[2]=Ac,U[3]=qd;Rc=w[0];Lc=w[1];sc=w[2];$a=w[3];if(Rc!==ga[0]||Lc!==ga[1]||sc!==ga[2]||$a!==ga[3])u.stencilOpSeparate(Rc,Lc,sc,$a),ga[0]=Rc,ga[1]=Lc,ga[2]=sc,ga[3]=$a}u.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;u.enable(3042);ua.blend_enable=!0;u.blendEquationSeparate(32774,
32774);ea[0]=32774;ea[1]=32774;u.blendFuncSeparate(770,771,773,1);ec[0]=770;ec[1]=771;ec[2]=773;ec[3]=1;u.enable(2884);ua.cull_enable=!0;u.cullFace(1029);ua.cull_face=1029;u.enable(3089);ua.scissor_enable=!0;u.disable(2960);ua.stencil_enable=!1;if(n=ua.profile)q=performance.now(),W.count+=c;u.useProgram(O.program);x=Ja.angle_instanced_arrays;var jc,Fb,rc,Ua,Jc;ac.setVAO(null);jc=da.location;Fb=H[jc];Fb.buffer||u.enableVertexAttribArray(jc);if(5126!==Fb.type||1!==Fb.size||Fb.buffer!==e||!1!==Fb.normalized||
0!==Fb.offset||8!==Fb.stride)u.bindBuffer(34962,e.buffer),u.vertexAttribPointer(jc,1,5126,!1,8,0),Fb.type=5126,Fb.size=1,Fb.buffer=e,Fb.normalized=!1,Fb.offset=0,Fb.stride=8;0!==Fb.divisor&&(x.vertexAttribDivisorANGLE(jc,0),Fb.divisor=0);rc=b.location;Ua=H[rc];Ua.buffer||u.enableVertexAttribArray(rc);if(5126!==Ua.type||1!==Ua.size||Ua.buffer!==d||!1!==Ua.normalized||4!==Ua.offset||8!==Ua.stride)u.bindBuffer(34962,d.buffer),u.vertexAttribPointer(rc,1,5126,!1,8,4),Ua.type=5126,Ua.size=1,Ua.buffer=d,
Ua.normalized=!1,Ua.offset=4,Ua.stride=8;0!==Ua.divisor&&(x.vertexAttribDivisorANGLE(rc,0),Ua.divisor=0);(Jc=N.elements)?u.bindBuffer(34963,Jc.buffer.buffer):ac.currentVAO&&(Jc=Zb.getElements(ac.currentVAO.elements))&&u.bindBuffer(34963,Jc.buffer.buffer);for(r=0;r<c;++r){t=a[r];var cc,$c,bb,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,
yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,xe,me,Yc,Jf,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ze,ce,ae,Zd,Fe,Wd,fe,zc;cc=t.viewport;$c=cc.x|0;bb=cc.y|0;md="width"in cc?cc.width|0:R.framebufferWidth-$c;Bc="height"in cc?cc.height|0:R.framebufferHeight-bb;Xb=R.viewportWidth;R.viewportWidth=md;Gc=R.viewportHeight;R.viewportHeight=Bc;u.viewport($c,bb,md,Bc);oa[0]=$c;oa[1]=bb;oa[2]=md;oa[3]=Bc;(Sc=Ca.call(this,R,
t,r))?u.enable(2929):u.disable(2929);ua.depth_enable=Sc;La=t.viewport;ub=La.x|0;Xa=La.y|0;pa="width"in La?La.width|0:R.framebufferWidth-ub;vd="height"in La?La.height|0:R.framebufferHeight-Xa;u.scissor(ub,Xa,pa,vd);Qc[0]=ub;Qc[1]=Xa;Qc[2]=pa;Qc[3]=vd;ca.buffer=t.positionBuffer;Bb=!1;Sa=null;Vb=0;cb=!1;Rb=Yb=0;Ee=1;bc=0;Sb=5126;nb=Na=Tb=Sd=0;ha(ca)?(Bb=!0,Sa=M.createStream(34962,ca),Sb=Sa.dtype):(Sa=M.getBuffer(ca))?Sb=Sa.dtype:"constant"in ca?(Ee=2,"number"===typeof ca.constant?(Tb=ca.constant,Na=
nb=Sd=0):(Tb=0<ca.constant.length?ca.constant[0]:0,Na=1<ca.constant.length?ca.constant[1]:0,nb=2<ca.constant.length?ca.constant[2]:0,Sd=3<ca.constant.length?ca.constant[3]:0)):(Sa=ha(ca.buffer)?M.createStream(34962,ca.buffer):M.getBuffer(ca.buffer),Sb="type"in ca?E[ca.type]:Sa.dtype,cb=!!ca.normalized,Rb=ca.size|0,Yb=ca.offset|0,bc=ca.stride|0,Vb=ca.divisor|0);vb=v.location;gb=H[vb];if(1===Ee){gb.buffer||u.enableVertexAttribArray(vb);Pa=Rb||2;if(gb.type!==Sb||gb.size!==Pa||gb.buffer!==Sa||gb.normalized!==
cb||gb.offset!==Yb||gb.stride!==bc)u.bindBuffer(34962,Sa.buffer),u.vertexAttribPointer(vb,Pa,Sb,cb,bc,Yb),gb.type=Sb,gb.size=Pa,gb.buffer=Sa,gb.normalized=cb,gb.offset=Yb,gb.stride=bc;gb.divisor!==Vb&&(x.vertexAttribDivisorANGLE(vb,Vb),gb.divisor=Vb)}else if(gb.buffer&&(u.disableVertexAttribArray(vb),gb.buffer=null),gb.x!==Tb||gb.y!==Na||gb.z!==nb||gb.w!==Sd)u.vertexAttrib4f(vb,Tb,Na,nb,Sd),gb.x=Tb,gb.y=Na,gb.z=nb,gb.w=Sd;za.buffer=t.positionBuffer;qc=!1;Ib=null;sd=0;db=!1;Hc=nc=0;kc=1;ib=0;jb=5126;
Va=va=ob=sa=0;ha(za)?(qc=!0,Ib=M.createStream(34962,za),jb=Ib.dtype):(Ib=M.getBuffer(za))?jb=Ib.dtype:"constant"in za?(kc=2,"number"===typeof za.constant?(ob=za.constant,va=Va=sa=0):(ob=0<za.constant.length?za.constant[0]:0,va=1<za.constant.length?za.constant[1]:0,Va=2<za.constant.length?za.constant[2]:0,sa=3<za.constant.length?za.constant[3]:0)):(Ib=ha(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),jb="type"in za?E[za.type]:Ib.dtype,db=!!za.normalized,Hc=za.size|0,nc=za.offset|
0,ib=za.stride|0,sd=za.divisor|0);ab=S.location;Aa=H[ab];if(1===kc){Aa.buffer||u.enableVertexAttribArray(ab);eb=Hc||2;if(Aa.type!==jb||Aa.size!==eb||Aa.buffer!==Ib||Aa.normalized!==db||Aa.offset!==nc||Aa.stride!==ib)u.bindBuffer(34962,Ib.buffer),u.vertexAttribPointer(ab,eb,jb,db,ib,nc),Aa.type=jb,Aa.size=eb,Aa.buffer=Ib,Aa.normalized=db,Aa.offset=nc,Aa.stride=ib;Aa.divisor!==sd&&(x.vertexAttribDivisorANGLE(ab,sd),Aa.divisor=sd)}else if(Aa.buffer&&(u.disableVertexAttribArray(ab),Aa.buffer=null),Aa.x!==
ob||Aa.y!==va||Aa.z!==Va||Aa.w!==sa)u.vertexAttrib4f(ab,ob,va,Va,sa),Aa.x=ob,Aa.y=va,Aa.z=Va,Aa.w=sa;ma.buffer=t.positionBuffer;Ia=!1;Cb=null;Ab=0;Ra=!1;Jb=Kc=0;Lb=1;Ub=0;xa=5126;fb=Ob=Ka=Td=0;ha(ma)?(Ia=!0,Cb=M.createStream(34962,ma),xa=Cb.dtype):(Cb=M.getBuffer(ma))?xa=Cb.dtype:"constant"in ma?(Lb=2,"number"===typeof ma.constant?(Ka=ma.constant,Ob=fb=Td=0):(Ka=0<ma.constant.length?ma.constant[0]:0,Ob=1<ma.constant.length?ma.constant[1]:0,fb=2<ma.constant.length?ma.constant[2]:0,Td=3<ma.constant.length?
ma.constant[3]:0)):(Cb=ha(ma.buffer)?M.createStream(34962,ma.buffer):M.getBuffer(ma.buffer),xa="type"in ma?E[ma.type]:Cb.dtype,Ra=!!ma.normalized,Jb=ma.size|0,Kc=ma.offset|0,Ub=ma.stride|0,Ab=ma.divisor|0);hb=la.location;ya=H[hb];if(1===Lb){ya.buffer||u.enableVertexAttribArray(hb);fc=Jb||2;if(ya.type!==xa||ya.size!==fc||ya.buffer!==Cb||ya.normalized!==Ra||ya.offset!==Kc||ya.stride!==Ub)u.bindBuffer(34962,Cb.buffer),u.vertexAttribPointer(hb,fc,xa,Ra,Ub,Kc),ya.type=xa,ya.size=fc,ya.buffer=Cb,ya.normalized=
Ra,ya.offset=Kc,ya.stride=Ub;ya.divisor!==Ab&&(x.vertexAttribDivisorANGLE(hb,Ab),ya.divisor=Ab)}else if(ya.buffer&&(u.disableVertexAttribArray(hb),ya.buffer=null),ya.x!==Ka||ya.y!==Ob||ya.z!==fb||ya.w!==Td)u.vertexAttrib4f(hb,Ka,Ob,fb,Td),ya.x=Ka,ya.y=Ob,ya.z=fb,ya.w=Td;l.buffer=t.positionBuffer;Ea=!1;pb=null;qb=0;Ya=!1;oc=Za=0;cd=1;uc=0;Wa=5126;yc=Ga=dd=Mb=0;ha(l)?(Ea=!0,pb=M.createStream(34962,l),Wa=pb.dtype):(pb=M.getBuffer(l))?Wa=pb.dtype:"constant"in l?(cd=2,"number"===typeof l.constant?(dd=
l.constant,Ga=yc=Mb=0):(dd=0<l.constant.length?l.constant[0]:0,Ga=1<l.constant.length?l.constant[1]:0,yc=2<l.constant.length?l.constant[2]:0,Mb=3<l.constant.length?l.constant[3]:0)):(pb=ha(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),Wa="type"in l?E[l.type]:pb.dtype,Ya=!!l.normalized,oc=l.size|0,Za=l.offset|0,uc=l.stride|0,qb=l.divisor|0);Qa=mb.location;Ba=H[Qa];if(1===cd){Ba.buffer||u.enableVertexAttribArray(Qa);kb=oc||2;if(Ba.type!==Wa||Ba.size!==kb||Ba.buffer!==pb||Ba.normalized!==
Ya||Ba.offset!==Za||Ba.stride!==uc)u.bindBuffer(34962,pb.buffer),u.vertexAttribPointer(Qa,kb,Wa,Ya,uc,Za),Ba.type=Wa,Ba.size=kb,Ba.buffer=pb,Ba.normalized=Ya,Ba.offset=Za,Ba.stride=uc;Ba.divisor!==qb&&(x.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(u.disableVertexAttribArray(Qa),Ba.buffer=null),Ba.x!==dd||Ba.y!==Ga||Ba.z!==yc||Ba.w!==Mb)u.vertexAttrib4f(Qa,dd,Ga,yc,Mb),Ba.x=dd,Ba.y=Ga,Ba.z=yc,Ba.w=Mb;z.buffer=t.colorBuffer;wb=!1;Db=null;rb=0;vc=!1;rd=xb=0;tc=1;Gd=0;Mc=5126;dc=
Wb=ed=id=0;ha(z)?(wb=!0,Db=M.createStream(34962,z),Mc=Db.dtype):(Db=M.getBuffer(z))?Mc=Db.dtype:"constant"in z?(tc=2,"number"===typeof z.constant?(ed=z.constant,Wb=dc=id=0):(ed=0<z.constant.length?z.constant[0]:0,Wb=1<z.constant.length?z.constant[1]:0,dc=2<z.constant.length?z.constant[2]:0,id=3<z.constant.length?z.constant[3]:0)):(Db=ha(z.buffer)?M.createStream(34962,z.buffer):M.getBuffer(z.buffer),Mc="type"in z?E[z.type]:Db.dtype,vc=!!z.normalized,rd=z.size|0,xb=z.offset|0,Gd=z.stride|0,rb=z.divisor|
0);Pb=f.location;Ha=H[Pb];if(1===tc){Ha.buffer||u.enableVertexAttribArray(Pb);$b=rd||4;if(Ha.type!==Mc||Ha.size!==$b||Ha.buffer!==Db||Ha.normalized!==vc||Ha.offset!==xb||Ha.stride!==Gd)u.bindBuffer(34962,Db.buffer),u.vertexAttribPointer(Pb,$b,Mc,vc,Gd,xb),Ha.type=Mc,Ha.size=$b,Ha.buffer=Db,Ha.normalized=vc,Ha.offset=xb,Ha.stride=Gd;Ha.divisor!==rb&&(x.vertexAttribDivisorANGLE(Pb,rb),Ha.divisor=rb)}else if(Ha.buffer&&(u.disableVertexAttribArray(Pb),Ha.buffer=null),Ha.x!==ed||Ha.y!==Wb||Ha.z!==dc||
Ha.w!==id)u.vertexAttrib4f(Pb,ed,Wb,dc,id),Ha.x=ed,Ha.y=Wb,Ha.z=dc,Ha.w=id;T.buffer=t.colorBuffer;lb=!1;yb=null;Nb=0;Qb=!1;ic=gc=0;Tc=1;Cc=0;Dc=5126;Uc=ad=Nc=Ec=0;ha(T)?(lb=!0,yb=M.createStream(34962,T),Dc=yb.dtype):(yb=M.getBuffer(T))?Dc=yb.dtype:"constant"in T?(Tc=2,"number"===typeof T.constant?(Nc=T.constant,ad=Uc=Ec=0):(Nc=0<T.constant.length?T.constant[0]:0,ad=1<T.constant.length?T.constant[1]:0,Uc=2<T.constant.length?T.constant[2]:0,Ec=3<T.constant.length?T.constant[3]:0)):(yb=ha(T.buffer)?
M.createStream(34962,T.buffer):M.getBuffer(T.buffer),Dc="type"in T?E[T.type]:yb.dtype,Qb=!!T.normalized,ic=T.size|0,gc=T.offset|0,Cc=T.stride|0,Nb=T.divisor|0);Oc=P.location;Kb=H[Oc];if(1===Tc){Kb.buffer||u.enableVertexAttribArray(Oc);Gb=ic||4;if(Kb.type!==Dc||Kb.size!==Gb||Kb.buffer!==yb||Kb.normalized!==Qb||Kb.offset!==gc||Kb.stride!==Cc)u.bindBuffer(34962,yb.buffer),u.vertexAttribPointer(Oc,Gb,Dc,Qb,Cc,gc),Kb.type=Dc,Kb.size=Gb,Kb.buffer=yb,Kb.normalized=Qb,Kb.offset=gc,Kb.stride=Cc;Kb.divisor!==
Nb&&(x.vertexAttribDivisorANGLE(Oc,Nb),Kb.divisor=Nb)}else if(Kb.buffer&&(u.disableVertexAttribArray(Oc),Kb.buffer=null),Kb.x!==Nc||Kb.y!==ad||Kb.z!==Uc||Kb.w!==Ec)u.vertexAttrib4f(Oc,Nc,ad,Uc,Ec),Kb.x=Nc,Kb.y=ad,Kb.z=Uc,Kb.w=Ec;Pc=t.scale;Ic=Pc[0];hc=Pc[1];r&&Vc===Ic&&Xc===hc||(Vc=Ic,Xc=hc,u.uniform2f(Eb.location,Ic,hc));fd=t.translate;xe=fd[0];Yc=fd[1];r&&me===xe&&Jf===Yc||(me=xe,Jf=Yc,u.uniform2f(Oa.location,xe,Yc));he=t.thickness;r&&se===he||(se=he,u.uniform1f(qa.location,he));qe=t.depth;r&&Qd===
qe||(Qd=qe,u.uniform1f(I.location,qe));Dd=h.call(this,R,t,r);Bd=Dd[0];Fc=Dd[1];jd=Dd[2];kd=Dd[3];r&&hd===Bd&&nd===Fc&&Zc===jd&&zd===kd||(hd=Bd,nd=Fc,Zc=jd,zd=kd,u.uniform4f(Z.location,Bd,Fc,jd,kd));Ad=t.miterLimit;r&&ve===Ad||(ve=Ad,u.uniform1f(k.location,Ad));ye=g.call(this,R,t,r);r&&Ze===ye||(Ze=ye,u.uniform1f(Y.location,ye));ce=t.dashLength;r&&ae===ce||(ae=ce,u.uniform1f(m.location,ce));Zd=t.opacity;r&&Fe===Zd||(Fe=Zd,u.uniform1f(Ta.location,Zd));(Wd=t.dashTexture)&&"framebuffer"===Wd._reglType&&
(Wd=Wd.color[0]);fe=Wd._texture;u.uniform1i(na.location,fe.bind());zc=t.count;0<zc?Jc?x.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),zc):x.drawArraysInstancedANGLE(5,0,4,zc):0>zc&&(Jc?u.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):u.drawArrays(5,0,4));R.viewportWidth=Xb;R.viewportHeight=Gc;Bb&&M.destroyStream(Sa);qc&&M.destroyStream(Ib);Ia&&M.destroyStream(Cb);Ea&&M.destroyStream(pb);wb&&M.destroyStream(Db);lb&&M.destroyStream(yb);fe.unbind()}ua.dirty=!0;ac.setVAO(null);n&&(W.cpuTime+=
performance.now()-q)},draw:function(c){var g,h,r,x,t,B,y,G,K,C,F,L,fa,O,Ca,wa,ja,ra,tb,ka,Fa,Ma,be,Pd,sb,bb,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd;g=Q.next;g!==Q.cur&&(g?u.bindFramebuffer(36160,g.framebuffer):u.bindFramebuffer(36160,null),Q.cur=
g);if(ua.dirty){var tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc;tc=ba.dither;tc!==ua.dither&&(tc?u.enable(3024):u.disable(3024),ua.dither=tc);Gd=ba.depth_func;Gd!==ua.depth_func&&(u.depthFunc(Gd),ua.depth_func=Gd);Mc=ud[0];id=ud[1];if(Mc!==wc[0]||id!==wc[1])u.depthRange(Mc,id),wc[0]=Mc,wc[1]=id;ed=ba.depth_mask;ed!==ua.depth_mask&&(u.depthMask(ed),ua.depth_mask=ed);Wb=pc[0];dc=pc[1];Pb=pc[2];Ha=pc[3];if(Wb!==mc[0]||dc!==mc[1]||Pb!==mc[2]||Ha!==mc[3])u.colorMask(Wb,
dc,Pb,Ha),mc[0]=Wb,mc[1]=dc,mc[2]=Pb,mc[3]=Ha;$b=ba.frontFace;$b!==ua.frontFace&&(u.frontFace($b),ua.frontFace=$b);lb=ba.lineWidth;lb!==ua.lineWidth&&(u.lineWidth(lb),ua.lineWidth=lb);yb=ba.polygonOffset_enable;yb!==ua.polygonOffset_enable&&(yb?u.enable(32823):u.disable(32823),ua.polygonOffset_enable=yb);Nb=aa[0];Qb=aa[1];if(Nb!==J[0]||Qb!==J[1])u.polygonOffset(Nb,Qb),J[0]=Nb,J[1]=Qb;gc=ba.sample_alpha;gc!==ua.sample_alpha&&(gc?u.enable(32926):u.disable(32926),ua.sample_alpha=gc);ic=ba.sample_enable;
ic!==ua.sample_enable&&(ic?u.enable(32928):u.disable(32928),ua.sample_enable=ic);Tc=ia[0];Cc=ia[1];if(Tc!==Da[0]||Cc!==Da[1])u.sampleCoverage(Tc,Cc),Da[0]=Tc,Da[1]=Cc;Dc=ba.stencil_mask;Dc!==ua.stencil_mask&&(u.stencilMask(Dc),ua.stencil_mask=Dc);Ec=xc[0];Nc=xc[1];ad=xc[2];if(Ec!==D[0]||Nc!==D[1]||ad!==D[2])u.stencilFunc(Ec,Nc,ad),D[0]=Ec,D[1]=Nc,D[2]=ad;Uc=ta[0];Oc=ta[1];Kb=ta[2];Gb=ta[3];if(Uc!==U[0]||Oc!==U[1]||Kb!==U[2]||Gb!==U[3])u.stencilOpSeparate(Uc,Oc,Kb,Gb),U[0]=Uc,U[1]=Oc,U[2]=Kb,U[3]=
Gb;Pc=w[0];Ic=w[1];Vc=w[2];hc=w[3];if(Pc!==ga[0]||Ic!==ga[1]||Vc!==ga[2]||hc!==ga[3])u.stencilOpSeparate(Pc,Ic,Vc,hc),ga[0]=Pc,ga[1]=Ic,ga[2]=Vc,ga[3]=hc}h=c.viewport;r=h.x|0;x=h.y|0;t="width"in h?h.width|0:R.framebufferWidth-r;B="height"in h?h.height|0:R.framebufferHeight-x;y=R.viewportWidth;R.viewportWidth=t;G=R.viewportHeight;R.viewportHeight=B;u.viewport(r,x,t,B);oa[0]=r;oa[1]=x;oa[2]=t;oa[3]=B;u.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;u.enable(3042);ua.blend_enable=!0;u.blendEquationSeparate(32774,
32774);ea[0]=32774;ea[1]=32774;u.blendFuncSeparate(770,771,773,1);ec[0]=770;ec[1]=771;ec[2]=773;ec[3]=1;u.enable(2884);ua.cull_enable=!0;u.cullFace(1029);ua.cull_face=1029;(K=n.call(this,R,c,0))?u.enable(2929):u.disable(2929);ua.depth_enable=K;C=c.viewport;F=C.x|0;L=C.y|0;fa="width"in C?C.width|0:R.framebufferWidth-F;O="height"in C?C.height|0:R.framebufferHeight-L;u.scissor(F,L,fa,O);Qc[0]=F;Qc[1]=L;Qc[2]=fa;Qc[3]=O;u.enable(3089);ua.scissor_enable=!0;u.disable(2960);ua.stencil_enable=!1;if(Ca=ua.profile)wa=
performance.now(),W.count++;u.useProgram(A.program);ja=Ja.angle_instanced_arrays;ac.setVAO(null);ca.buffer=c.positionBuffer;ra=!1;tb=null;ka=0;Fa=!1;be=Ma=0;Pd=1;sb=0;bb=5126;od=wd=ld=pd=0;ha(ca)?(ra=!0,tb=M.createStream(34962,ca),bb=tb.dtype):(tb=M.getBuffer(ca))?bb=tb.dtype:"constant"in ca?(Pd=2,"number"===typeof ca.constant?(ld=ca.constant,wd=od=pd=0):(ld=0<ca.constant.length?ca.constant[0]:0,wd=1<ca.constant.length?ca.constant[1]:0,od=2<ca.constant.length?ca.constant[2]:0,pd=3<ca.constant.length?
ca.constant[3]:0)):(tb=ha(ca.buffer)?M.createStream(34962,ca.buffer):M.getBuffer(ca.buffer),bb="type"in ca?E[ca.type]:tb.dtype,Fa=!!ca.normalized,be=ca.size|0,Ma=ca.offset|0,sb=ca.stride|0,ka=ca.divisor|0);gd=v.location;Ac=H[gd];if(1===Pd){Ac.buffer||u.enableVertexAttribArray(gd);qd=be||2;if(Ac.type!==bb||Ac.size!==qd||Ac.buffer!==tb||Ac.normalized!==Fa||Ac.offset!==Ma||Ac.stride!==sb)u.bindBuffer(34962,tb.buffer),u.vertexAttribPointer(gd,qd,bb,Fa,sb,Ma),Ac.type=bb,Ac.size=qd,Ac.buffer=tb,Ac.normalized=
Fa,Ac.offset=Ma,Ac.stride=sb;Ac.divisor!==ka&&(ja.vertexAttribDivisorANGLE(gd,ka),Ac.divisor=ka)}else if(Ac.buffer&&(u.disableVertexAttribArray(gd),Ac.buffer=null),Ac.x!==ld||Ac.y!==wd||Ac.z!==od||Ac.w!==pd)u.vertexAttrib4f(gd,ld,wd,od,pd),Ac.x=ld,Ac.y=wd,Ac.z=od,Ac.w=pd;za.buffer=c.positionBuffer;Rc=!1;Lc=null;sc=0;$a=!1;Fb=jc=0;rc=1;Ua=0;Jc=5126;md=Nd=$c=cc=0;ha(za)?(Rc=!0,Lc=M.createStream(34962,za),Jc=Lc.dtype):(Lc=M.getBuffer(za))?Jc=Lc.dtype:"constant"in za?(rc=2,"number"===typeof za.constant?
($c=za.constant,Nd=md=cc=0):($c=0<za.constant.length?za.constant[0]:0,Nd=1<za.constant.length?za.constant[1]:0,md=2<za.constant.length?za.constant[2]:0,cc=3<za.constant.length?za.constant[3]:0)):(Lc=ha(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),Jc="type"in za?E[za.type]:Lc.dtype,$a=!!za.normalized,Fb=za.size|0,jc=za.offset|0,Ua=za.stride|0,sc=za.divisor|0);Bc=S.location;Xb=H[Bc];if(1===rc){Xb.buffer||u.enableVertexAttribArray(Bc);Gc=Fb||2;if(Xb.type!==Jc||Xb.size!==Gc||Xb.buffer!==
Lc||Xb.normalized!==$a||Xb.offset!==jc||Xb.stride!==Ua)u.bindBuffer(34962,Lc.buffer),u.vertexAttribPointer(Bc,Gc,Jc,$a,Ua,jc),Xb.type=Jc,Xb.size=Gc,Xb.buffer=Lc,Xb.normalized=$a,Xb.offset=jc,Xb.stride=Ua;Xb.divisor!==sc&&(ja.vertexAttribDivisorANGLE(Bc,sc),Xb.divisor=sc)}else if(Xb.buffer&&(u.disableVertexAttribArray(Bc),Xb.buffer=null),Xb.x!==$c||Xb.y!==Nd||Xb.z!==md||Xb.w!==cc)u.vertexAttrib4f(Bc,$c,Nd,md,cc),Xb.x=$c,Xb.y=Nd,Xb.z=md,Xb.w=cc;ma.buffer=c.positionBuffer;Sc=!1;La=null;ub=0;Xa=!1;vd=
pa=0;Bb=1;Sa=0;Vb=5126;Ee=Rb=Yb=cb=0;ha(ma)?(Sc=!0,La=M.createStream(34962,ma),Vb=La.dtype):(La=M.getBuffer(ma))?Vb=La.dtype:"constant"in ma?(Bb=2,"number"===typeof ma.constant?(Yb=ma.constant,Rb=Ee=cb=0):(Yb=0<ma.constant.length?ma.constant[0]:0,Rb=1<ma.constant.length?ma.constant[1]:0,Ee=2<ma.constant.length?ma.constant[2]:0,cb=3<ma.constant.length?ma.constant[3]:0)):(La=ha(ma.buffer)?M.createStream(34962,ma.buffer):M.getBuffer(ma.buffer),Vb="type"in ma?E[ma.type]:La.dtype,Xa=!!ma.normalized,vd=
ma.size|0,pa=ma.offset|0,Sa=ma.stride|0,ub=ma.divisor|0);bc=la.location;Sb=H[bc];if(1===Bb){Sb.buffer||u.enableVertexAttribArray(bc);Sd=vd||2;if(Sb.type!==Vb||Sb.size!==Sd||Sb.buffer!==La||Sb.normalized!==Xa||Sb.offset!==pa||Sb.stride!==Sa)u.bindBuffer(34962,La.buffer),u.vertexAttribPointer(bc,Sd,Vb,Xa,Sa,pa),Sb.type=Vb,Sb.size=Sd,Sb.buffer=La,Sb.normalized=Xa,Sb.offset=pa,Sb.stride=Sa;Sb.divisor!==ub&&(ja.vertexAttribDivisorANGLE(bc,ub),Sb.divisor=ub)}else if(Sb.buffer&&(u.disableVertexAttribArray(bc),
Sb.buffer=null),Sb.x!==Yb||Sb.y!==Rb||Sb.z!==Ee||Sb.w!==cb)u.vertexAttrib4f(bc,Yb,Rb,Ee,cb),Sb.x=Yb,Sb.y=Rb,Sb.z=Ee,Sb.w=cb;l.buffer=c.positionBuffer;Tb=!1;Na=null;nb=0;vb=!1;Pa=gb=0;qc=1;Ib=0;sd=5126;kc=Hc=nc=db=0;ha(l)?(Tb=!0,Na=M.createStream(34962,l),sd=Na.dtype):(Na=M.getBuffer(l))?sd=Na.dtype:"constant"in l?(qc=2,"number"===typeof l.constant?(nc=l.constant,Hc=kc=db=0):(nc=0<l.constant.length?l.constant[0]:0,Hc=1<l.constant.length?l.constant[1]:0,kc=2<l.constant.length?l.constant[2]:0,db=3<l.constant.length?
l.constant[3]:0)):(Na=ha(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),sd="type"in l?E[l.type]:Na.dtype,vb=!!l.normalized,Pa=l.size|0,gb=l.offset|0,Ib=l.stride|0,nb=l.divisor|0);ib=mb.location;jb=H[ib];if(1===qc){jb.buffer||u.enableVertexAttribArray(ib);sa=Pa||2;if(jb.type!==sd||jb.size!==sa||jb.buffer!==Na||jb.normalized!==vb||jb.offset!==gb||jb.stride!==Ib)u.bindBuffer(34962,Na.buffer),u.vertexAttribPointer(ib,sa,sd,vb,Ib,gb),jb.type=sd,jb.size=sa,jb.buffer=Na,jb.normalized=vb,
jb.offset=gb,jb.stride=Ib;jb.divisor!==nb&&(ja.vertexAttribDivisorANGLE(ib,nb),jb.divisor=nb)}else if(jb.buffer&&(u.disableVertexAttribArray(ib),jb.buffer=null),jb.x!==nc||jb.y!==Hc||jb.z!==kc||jb.w!==db)u.vertexAttrib4f(ib,nc,Hc,kc,db),jb.x=nc,jb.y=Hc,jb.z=kc,jb.w=db;z.buffer=c.colorBuffer;ob=!1;va=null;Va=0;ab=!1;eb=Aa=0;Ia=1;Cb=0;Ab=5126;Lb=Jb=Kc=Ra=0;ha(z)?(ob=!0,va=M.createStream(34962,z),Ab=va.dtype):(va=M.getBuffer(z))?Ab=va.dtype:"constant"in z?(Ia=2,"number"===typeof z.constant?(Kc=z.constant,
Jb=Lb=Ra=0):(Kc=0<z.constant.length?z.constant[0]:0,Jb=1<z.constant.length?z.constant[1]:0,Lb=2<z.constant.length?z.constant[2]:0,Ra=3<z.constant.length?z.constant[3]:0)):(va=ha(z.buffer)?M.createStream(34962,z.buffer):M.getBuffer(z.buffer),Ab="type"in z?E[z.type]:va.dtype,ab=!!z.normalized,eb=z.size|0,Aa=z.offset|0,Cb=z.stride|0,Va=z.divisor|0);Ub=f.location;xa=H[Ub];if(1===Ia){xa.buffer||u.enableVertexAttribArray(Ub);Td=eb||4;if(xa.type!==Ab||xa.size!==Td||xa.buffer!==va||xa.normalized!==ab||xa.offset!==
Aa||xa.stride!==Cb)u.bindBuffer(34962,va.buffer),u.vertexAttribPointer(Ub,Td,Ab,ab,Cb,Aa),xa.type=Ab,xa.size=Td,xa.buffer=va,xa.normalized=ab,xa.offset=Aa,xa.stride=Cb;xa.divisor!==Va&&(ja.vertexAttribDivisorANGLE(Ub,Va),xa.divisor=Va)}else if(xa.buffer&&(u.disableVertexAttribArray(Ub),xa.buffer=null),xa.x!==Kc||xa.y!==Jb||xa.z!==Lb||xa.w!==Ra)u.vertexAttrib4f(Ub,Kc,Jb,Lb,Ra),xa.x=Kc,xa.y=Jb,xa.z=Lb,xa.w=Ra;T.buffer=c.colorBuffer;Ka=!1;Ob=null;fb=0;hb=!1;fc=ya=0;Ea=1;pb=0;qb=5126;cd=oc=Za=Ya=0;ha(T)?
(Ka=!0,Ob=M.createStream(34962,T),qb=Ob.dtype):(Ob=M.getBuffer(T))?qb=Ob.dtype:"constant"in T?(Ea=2,"number"===typeof T.constant?(Za=T.constant,oc=cd=Ya=0):(Za=0<T.constant.length?T.constant[0]:0,oc=1<T.constant.length?T.constant[1]:0,cd=2<T.constant.length?T.constant[2]:0,Ya=3<T.constant.length?T.constant[3]:0)):(Ob=ha(T.buffer)?M.createStream(34962,T.buffer):M.getBuffer(T.buffer),qb="type"in T?E[T.type]:Ob.dtype,hb=!!T.normalized,fc=T.size|0,ya=T.offset|0,pb=T.stride|0,fb=T.divisor|0);uc=P.location;
Wa=H[uc];if(1===Ea){Wa.buffer||u.enableVertexAttribArray(uc);Mb=fc||4;if(Wa.type!==qb||Wa.size!==Mb||Wa.buffer!==Ob||Wa.normalized!==hb||Wa.offset!==ya||Wa.stride!==pb)u.bindBuffer(34962,Ob.buffer),u.vertexAttribPointer(uc,Mb,qb,hb,pb,ya),Wa.type=qb,Wa.size=Mb,Wa.buffer=Ob,Wa.normalized=hb,Wa.offset=ya,Wa.stride=pb;Wa.divisor!==fb&&(ja.vertexAttribDivisorANGLE(uc,fb),Wa.divisor=fb)}else if(Wa.buffer&&(u.disableVertexAttribArray(uc),Wa.buffer=null),Wa.x!==Za||Wa.y!==oc||Wa.z!==cd||Wa.w!==Ya)u.vertexAttrib4f(uc,
Za,oc,cd,Ya),Wa.x=Za,Wa.y=oc,Wa.z=cd,Wa.w=Ya;dd=da.location;Ga=H[dd];Ga.buffer||u.enableVertexAttribArray(dd);if(5126!==Ga.type||1!==Ga.size||Ga.buffer!==e||!1!==Ga.normalized||0!==Ga.offset||8!==Ga.stride)u.bindBuffer(34962,e.buffer),u.vertexAttribPointer(dd,1,5126,!1,8,0),Ga.type=5126,Ga.size=1,Ga.buffer=e,Ga.normalized=!1,Ga.offset=0,Ga.stride=8;0!==Ga.divisor&&(ja.vertexAttribDivisorANGLE(dd,0),Ga.divisor=0);yc=b.location;Qa=H[yc];Qa.buffer||u.enableVertexAttribArray(yc);if(5126!==Qa.type||1!==
Qa.size||Qa.buffer!==d||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)u.bindBuffer(34962,d.buffer),u.vertexAttribPointer(yc,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=d,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(ja.vertexAttribDivisorANGLE(yc,0),Qa.divisor=0);Ba=c.scale;u.uniform2f(Eb.location,Ba[0],Ba[1]);kb=c.translate;u.uniform2f(Oa.location,kb[0],kb[1]);u.uniform1f(qa.location,c.thickness);u.uniform1f(I.location,c.depth);wb=q.call(this,R,c,0);u.uniform4f(Z.location,wb[0],
wb[1],wb[2],wb[3]);u.uniform1f(k.location,c.miterLimit);Db=a.call(this,R,c,0);u.uniform1f(Y.location,Db);u.uniform1f(m.location,c.dashLength);u.uniform1f(Ta.location,c.opacity);(rb=c.dashTexture)&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);vc=rb._texture;u.uniform1i(na.location,vc.bind());(xb=N.elements)?u.bindBuffer(34963,xb.buffer.buffer):ac.currentVAO&&(xb=Zb.getElements(ac.currentVAO.elements))&&u.bindBuffer(34963,xb.buffer.buffer);rd=c.count;0<rd?xb?ja.drawElementsInstancedANGLE(5,4,xb.type,
0<<(xb.type-5121>>1),rd):ja.drawArraysInstancedANGLE(5,0,4,rd):0>rd&&(xb?u.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):u.drawArrays(5,0,4));ua.dirty=!0;ac.setVAO(null);R.viewportWidth=y;R.viewportHeight=G;Ca&&(W.cpuTime+=performance.now()-wa);ra&&M.destroyStream(tb);Rc&&M.destroyStream(Lc);Sc&&M.destroyStream(La);Tb&&M.destroyStream(Na);ob&&M.destroyStream(va);Ka&&M.destroyStream(Ob);vc.unbind()},scope:function(b,a,c){var f,g,h,k,m,n,q,v,w,u,J,A,D,aa,I,P,H,Q,S,V,O,U,ia,Z,ga,Y,ea,ta,pc,da,Ca,na,
oa,Da,$a,ud,Fb,la,Ua,qa,cc,wc,Qc,ec,Bc,Xb,Gc,Sc,La,ub,Xa,pa,mc,Bb,Sa,Vb,cb,Yb,Rb,Ja,bc,Sb,Oa,Tb,Na,nb,vb,gb,Pa,qc,Ib,xc,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,mb,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,Zb,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,ac,tc,Ta,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,Eb,me,Yc,Jf,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ze,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Oe,Pe,Le,oe,Be,
Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf,qf,nf,rf,Af,Bf,Ne,Ae,of,pf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf;f=b.viewport;g=f.x|0;h=f.y|0;k="width"in f?f.width|0:R.framebufferWidth-g;m="height"in f?f.height|0:R.framebufferHeight-h;n=R.viewportWidth;R.viewportWidth=k;q=R.viewportHeight;R.viewportHeight=m;v=fa[0];fa[0]=g;w=fa[1];fa[1]=h;u=fa[2];fa[2]=k;J=fa[3];fa[3]=m;A=bb[0];bb[0]=0;D=bb[1];bb[1]=0;aa=bb[2];bb[2]=0;I=bb[3];bb[3]=0;P=ba.blend_enable;ba.blend_enable=
!0;H=sb[0];sb[0]=32774;Q=sb[1];sb[1]=32774;S=ra[0];ra[0]=770;V=ra[1];ra[1]=771;O=ra[2];ra[2]=773;U=ra[3];ra[3]=1;ia=ba.cull_enable;ba.cull_enable=!0;Z=ba.cull_face;ba.cull_face=1029;ga=t.call(this,R,b,c);Y=ba.depth_enable;ba.depth_enable=ga;ea=b.viewport;ta=ea.x|0;pc=ea.y|0;da="width"in ea?ea.width|0:R.framebufferWidth-ta;Ca="height"in ea?ea.height|0:R.framebufferHeight-pc;na=tb[0];tb[0]=ta;oa=tb[1];tb[1]=pc;Da=tb[2];tb[2]=da;$a=tb[3];tb[3]=Ca;ud=ba.scissor_enable;ba.scissor_enable=!0;Fb=ba.stencil_enable;
ba.stencil_enable=!1;if(la=ua.profile)Ua=performance.now(),W.count++;qa=N.offset;N.offset=0;cc=N.count;N.count=4;wc=b.count;Qc=N.instances;N.instances=wc;ec=N.primitive;N.primitive=5;Bc=b.dashLength;Xb=Ma[23];Ma[23]=Bc;Gc=b.dashTexture;Sc=Ma[24];Ma[24]=Gc;La=b.depth;ub=Ma[22];Ma[22]=La;Xa=b.id;pa=Ma[31];Ma[31]=Xa;mc=b.miterLimit;Bb=Ma[32];Ma[32]=mc;Sa=y.call(this,R,b,c);Vb=Ma[33];Ma[33]=Sa;cb=b.opacity;Yb=Ma[10];Ma[10]=cb;Rb=R.pixelRatio;Ja=Ma[34];Ma[34]=Rb;bc=b.scale;Sb=Ma[6];Ma[6]=bc;Oa=b.scaleFract;
Tb=Ma[7];Ma[7]=Oa;Na=b.thickness;nb=Ma[21];Ma[21]=Na;vb=b.translate;gb=Ma[8];Ma[8]=vb;Pa=b.translateFract;qc=Ma[9];Ma[9]=Pa;Ib=C.call(this,R,b,c);xc=Ma[3];Ma[3]=Ib;z.buffer=b.colorBuffer;db=!1;nc=null;Hc=0;kc=!1;jb=ib=0;sa=1;ob=0;va=5126;eb=Aa=ab=Va=0;ha(z)?(db=!0,nc=M.createStream(34962,z),va=nc.dtype):(nc=M.getBuffer(z))?va=nc.dtype:"constant"in z?(sa=2,"number"===typeof z.constant?(ab=z.constant,Aa=eb=Va=0):(ab=0<z.constant.length?z.constant[0]:0,Aa=1<z.constant.length?z.constant[1]:0,eb=2<z.constant.length?
z.constant[2]:0,Va=3<z.constant.length?z.constant[3]:0)):(nc=ha(z.buffer)?M.createStream(34962,z.buffer):M.getBuffer(z.buffer),va="type"in z?E[z.type]:nc.dtype,kc=!!z.normalized,jb=z.size|0,ib=z.offset|0,ob=z.stride|0,Hc=z.divisor|0);Ia=K.buffer;K.buffer=nc;Cb=K.divisor;K.divisor=Hc;Ab=K.normalized;K.normalized=kc;Ra=K.offset;K.offset=ib;Kc=K.size;K.size=jb;Jb=K.state;K.state=sa;Lb=K.stride;K.stride=ob;Ub=K.type;K.type=va;xa=K.w;K.w=Va;mb=K.x;K.x=ab;Ka=K.y;K.y=Aa;Ob=K.z;K.z=eb;ca.buffer=b.positionBuffer;
fb=!1;hb=null;ya=0;fc=!1;pb=Ea=0;qb=1;Ya=0;Za=5126;Wa=uc=cd=oc=0;ha(ca)?(fb=!0,hb=M.createStream(34962,ca),Za=hb.dtype):(hb=M.getBuffer(ca))?Za=hb.dtype:"constant"in ca?(qb=2,"number"===typeof ca.constant?(cd=ca.constant,uc=Wa=oc=0):(cd=0<ca.constant.length?ca.constant[0]:0,uc=1<ca.constant.length?ca.constant[1]:0,Wa=2<ca.constant.length?ca.constant[2]:0,oc=3<ca.constant.length?ca.constant[3]:0)):(hb=ha(ca.buffer)?M.createStream(34962,ca.buffer):M.getBuffer(ca.buffer),Za="type"in ca?E[ca.type]:hb.dtype,
fc=!!ca.normalized,pb=ca.size|0,Ea=ca.offset|0,Ya=ca.stride|0,ya=ca.divisor|0);Mb=L.buffer;L.buffer=hb;Zb=L.divisor;L.divisor=ya;Ga=L.normalized;L.normalized=fc;yc=L.offset;L.offset=Ea;Qa=L.size;L.size=pb;Ba=L.state;L.state=qb;kb=L.stride;L.stride=Ya;wb=L.type;L.type=Za;Db=L.w;L.w=oc;rb=L.x;L.x=cd;vc=L.y;L.y=uc;xb=L.z;L.z=Wa;T.buffer=b.colorBuffer;ac=!1;tc=null;Ta=0;Mc=!1;ed=id=0;Wb=1;dc=0;Pb=5126;yb=lb=$b=Ha=0;ha(T)?(ac=!0,tc=M.createStream(34962,T),Pb=tc.dtype):(tc=M.getBuffer(T))?Pb=tc.dtype:"constant"in
T?(Wb=2,"number"===typeof T.constant?($b=T.constant,lb=yb=Ha=0):($b=0<T.constant.length?T.constant[0]:0,lb=1<T.constant.length?T.constant[1]:0,yb=2<T.constant.length?T.constant[2]:0,Ha=3<T.constant.length?T.constant[3]:0)):(tc=ha(T.buffer)?M.createStream(34962,T.buffer):M.getBuffer(T.buffer),Pb="type"in T?E[T.type]:tc.dtype,Mc=!!T.normalized,ed=T.size|0,id=T.offset|0,dc=T.stride|0,Ta=T.divisor|0);Nb=r.buffer;r.buffer=tc;Qb=r.divisor;r.divisor=Ta;gc=r.normalized;r.normalized=Mc;ic=r.offset;r.offset=
id;Tc=r.size;r.size=ed;Cc=r.state;r.state=Wb;Dc=r.stride;r.stride=dc;Ec=r.type;r.type=Pb;Nc=r.w;r.w=Ha;ad=r.x;r.x=$b;Uc=r.y;r.y=lb;Oc=r.z;r.z=yb;za.buffer=b.positionBuffer;Kb=!1;Gb=null;Pc=0;Ic=!1;hc=Vc=0;Xc=1;fd=0;Eb=5126;he=Jf=Yc=me=0;ha(za)?(Kb=!0,Gb=M.createStream(34962,za),Eb=Gb.dtype):(Gb=M.getBuffer(za))?Eb=Gb.dtype:"constant"in za?(Xc=2,"number"===typeof za.constant?(Yc=za.constant,Jf=he=me=0):(Yc=0<za.constant.length?za.constant[0]:0,Jf=1<za.constant.length?za.constant[1]:0,he=2<za.constant.length?
za.constant[2]:0,me=3<za.constant.length?za.constant[3]:0)):(Gb=ha(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),Eb="type"in za?E[za.type]:Gb.dtype,Ic=!!za.normalized,hc=za.size|0,Vc=za.offset|0,fd=za.stride|0,Pc=za.divisor|0);se=B.buffer;B.buffer=Gb;qe=B.divisor;B.divisor=Pc;Qd=B.normalized;B.normalized=Ic;Dd=B.offset;B.offset=Vc;Bd=B.size;B.size=hc;hd=B.state;B.state=Xc;Fc=B.stride;B.stride=fd;nd=B.type;B.type=Eb;jd=B.w;B.w=me;Zc=B.x;B.x=Yc;kd=B.y;B.y=Jf;zd=B.z;B.z=he;Ad=F.buffer;
F.buffer=e;ve=F.divisor;F.divisor=0;ye=F.normalized;F.normalized=!1;Ze=F.offset;F.offset=0;ce=F.size;F.size=0;ae=F.state;F.state=1;Zd=F.stride;F.stride=8;Fe=F.type;F.type=5126;Wd=F.w;F.w=0;fe=F.x;F.x=0;zc=F.y;F.y=0;Wc=F.z;F.z=0;ne=x.buffer;x.buffer=d;ie=x.divisor;x.divisor=0;Cd=x.normalized;x.normalized=!1;Hd=x.offset;x.offset=4;Jd=x.size;x.size=0;Kd=x.state;x.state=1;ge=x.stride;x.stride=8;te=x.type;x.type=5126;we=x.w;x.w=0;je=x.x;x.x=0;Oe=x.y;x.y=0;Pe=x.z;x.z=0;ma.buffer=b.positionBuffer;Le=!1;
oe=null;Be=0;Ge=!1;Ie=He=0;Ce=1;Ed=0;Od=5126;yd=Je=Xd=Ud=0;ha(ma)?(Le=!0,oe=M.createStream(34962,ma),Od=oe.dtype):(oe=M.getBuffer(ma))?Od=oe.dtype:"constant"in ma?(Ce=2,"number"===typeof ma.constant?(Xd=ma.constant,Je=yd=Ud=0):(Xd=0<ma.constant.length?ma.constant[0]:0,Je=1<ma.constant.length?ma.constant[1]:0,yd=2<ma.constant.length?ma.constant[2]:0,Ud=3<ma.constant.length?ma.constant[3]:0)):(oe=ha(ma.buffer)?M.createStream(34962,ma.buffer):M.getBuffer(ma.buffer),Od="type"in ma?E[ma.type]:oe.dtype,
Ge=!!ma.normalized,Ie=ma.size|0,He=ma.offset|0,Ed=ma.stride|0,Be=ma.divisor|0);Ld=G.buffer;G.buffer=oe;ze=G.divisor;G.divisor=Be;Ke=G.normalized;G.normalized=Ge;ff=G.offset;G.offset=He;Xe=G.size;G.size=Ie;Qe=G.state;G.state=Ce;Me=G.stride;G.stride=Ed;We=G.type;G.type=Od;Ue=G.w;G.w=Ud;Re=G.x;G.x=Xd;Se=G.y;G.y=Je;Md=G.z;G.z=yd;l.buffer=b.positionBuffer;Rd=!1;Te=null;gf=0;mf=!1;hf=cf=0;jf=1;kf=0;qf=5126;Bf=Af=rf=nf=0;ha(l)?(Rd=!0,Te=M.createStream(34962,l),qf=Te.dtype):(Te=M.getBuffer(l))?qf=Te.dtype:
"constant"in l?(jf=2,"number"===typeof l.constant?(rf=l.constant,Af=Bf=nf=0):(rf=0<l.constant.length?l.constant[0]:0,Af=1<l.constant.length?l.constant[1]:0,Bf=2<l.constant.length?l.constant[2]:0,nf=3<l.constant.length?l.constant[3]:0)):(Te=ha(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),qf="type"in l?E[l.type]:Te.dtype,mf=!!l.normalized,hf=l.size|0,cf=l.offset|0,kf=l.stride|0,gf=l.divisor|0);Ne=ka.buffer;ka.buffer=Te;Ae=ka.divisor;ka.divisor=gf;of=ka.normalized;ka.normalized=mf;
pf=ka.offset;ka.offset=cf;Cf=ka.size;ka.size=hf;Ff=ka.state;ka.state=jf;zf=ka.stride;ka.stride=kf;Df=ka.type;ka.type=qf;Ef=ka.w;ka.w=nf;vf=ka.x;ka.x=rf;wf=ka.y;ka.y=Af;uf=ka.z;ka.z=Bf;xf=Fa.vert;Fa.vert=36;yf=Fa.frag;Fa.frag=35;ua.dirty=!0;a(R,b,c);R.viewportWidth=n;R.viewportHeight=q;fa[0]=v;fa[1]=w;fa[2]=u;fa[3]=J;bb[0]=A;bb[1]=D;bb[2]=aa;bb[3]=I;ba.blend_enable=P;sb[0]=H;sb[1]=Q;ra[0]=S;ra[1]=V;ra[2]=O;ra[3]=U;ba.cull_enable=ia;ba.cull_face=Z;ba.depth_enable=Y;tb[0]=na;tb[1]=oa;tb[2]=Da;tb[3]=
$a;ba.scissor_enable=ud;ba.stencil_enable=Fb;la&&(W.cpuTime+=performance.now()-Ua);N.offset=qa;N.count=cc;N.instances=Qc;N.primitive=ec;Ma[23]=Xb;Ma[24]=Sc;Ma[22]=ub;Ma[31]=pa;Ma[32]=Bb;Ma[33]=Vb;Ma[10]=Yb;Ma[34]=Ja;Ma[6]=Sb;Ma[7]=Tb;Ma[21]=nb;Ma[8]=gb;Ma[9]=qc;Ma[3]=xc;db&&M.destroyStream(nc);K.buffer=Ia;K.divisor=Cb;K.normalized=Ab;K.offset=Ra;K.size=Kc;K.state=Jb;K.stride=Lb;K.type=Ub;K.w=xa;K.x=mb;K.y=Ka;K.z=Ob;fb&&M.destroyStream(hb);L.buffer=Mb;L.divisor=Zb;L.normalized=Ga;L.offset=yc;L.size=
Qa;L.state=Ba;L.stride=kb;L.type=wb;L.w=Db;L.x=rb;L.y=vc;L.z=xb;ac&&M.destroyStream(tc);r.buffer=Nb;r.divisor=Qb;r.normalized=gc;r.offset=ic;r.size=Tc;r.state=Cc;r.stride=Dc;r.type=Ec;r.w=Nc;r.x=ad;r.y=Uc;r.z=Oc;Kb&&M.destroyStream(Gb);B.buffer=se;B.divisor=qe;B.normalized=Qd;B.offset=Dd;B.size=Bd;B.state=hd;B.stride=Fc;B.type=nd;B.w=jd;B.x=Zc;B.y=kd;B.z=zd;F.buffer=Ad;F.divisor=ve;F.normalized=ye;F.offset=Ze;F.size=ce;F.state=ae;F.stride=Zd;F.type=Fe;F.w=Wd;F.x=fe;F.y=zc;F.z=Wc;x.buffer=ne;x.divisor=
ie;x.normalized=Cd;x.offset=Hd;x.size=Jd;x.state=Kd;x.stride=ge;x.type=te;x.w=we;x.x=je;x.y=Oe;x.z=Pe;Le&&M.destroyStream(oe);G.buffer=Ld;G.divisor=ze;G.normalized=Ke;G.offset=ff;G.size=Xe;G.state=Qe;G.stride=Me;G.type=We;G.w=Ue;G.x=Re;G.y=Se;G.z=Md;Rd&&M.destroyStream(Te);ka.buffer=Ne;ka.divisor=Ae;ka.normalized=of;ka.offset=pf;ka.size=Cf;ka.state=Ff;ka.stride=zf;ka.type=Df;ka.w=Ef;ka.x=vf;ka.y=wf;ka.z=uf;Fa.vert=xf;Fa.frag=yf;ua.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(c,
W,n,A,e,d,q,a,t,y,C,K,L,r,B,F,x,G,ka){var O,Ca,h,g,f,v,P,S,m,na,I,da,b,k,Y,la,Ta,mb,Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra;O=c.attributes;Ca=c.buffer;h=c.context;g=c.current;f=c.draw;v=c.elements;P=c.extensions;S=c.framebuffer;m=c.gl;na=c.isBufferArgs;I=c.next;da=c.shader;b=c.uniforms;k=c.vao;Y=I.blend_color;la=g.blend_color;Ta=I.blend_equation;mb=g.blend_equation;Eb=I.blend_func;qa=g.blend_func;Oa=I.colorMask;Z=g.colorMask;H=I.depth_range;M=g.depth_range;R=I.polygonOffset_offset;
ua=g.polygonOffset_offset;N=I.sample_coverage;Zb=g.sample_coverage;Ja=I.scissor_box;Q=g.scissor_box;u=I.stencil_func;ha=g.stencil_func;ba=I.stencil_opBack;Fa=g.stencil_opBack;Ma=I.stencil_opFront;ac=g.stencil_opFront;bb=I.viewport;V=g.viewport;sb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ea={offset:8,stride:8};ra={offset:8,stride:8};return{batch:function(b,a){var c,d,e,n,q,A;c=S.next;c!==S.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,
null),S.cur=c);if(g.dirty){var Y,da,Qc,Ja,D,w,ga,ta,U,fa,oa,E,z,ca,T,za,ma,l,lc,X,p,Hb,zb,bb,Ta,Eb,$d,bd,pe,td,de,re;Y=I.dither;Y!==g.dither&&(Y?m.enable(3024):m.disable(3024),g.dither=Y);da=I.depth_func;da!==g.depth_func&&(m.depthFunc(da),g.depth_func=da);Qc=H[0];Ja=H[1];if(Qc!==M[0]||Ja!==M[1])m.depthRange(Qc,Ja),M[0]=Qc,M[1]=Ja;D=I.depth_mask;D!==g.depth_mask&&(m.depthMask(D),g.depth_mask=D);w=Oa[0];ga=Oa[1];ta=Oa[2];U=Oa[3];if(w!==Z[0]||ga!==Z[1]||ta!==Z[2]||U!==Z[3])m.colorMask(w,ga,ta,U),Z[0]=
w,Z[1]=ga,Z[2]=ta,Z[3]=U;fa=I.cull_enable;fa!==g.cull_enable&&(fa?m.enable(2884):m.disable(2884),g.cull_enable=fa);oa=I.cull_face;oa!==g.cull_face&&(m.cullFace(oa),g.cull_face=oa);E=I.frontFace;E!==g.frontFace&&(m.frontFace(E),g.frontFace=E);z=I.lineWidth;z!==g.lineWidth&&(m.lineWidth(z),g.lineWidth=z);ca=I.polygonOffset_enable;ca!==g.polygonOffset_enable&&(ca?m.enable(32823):m.disable(32823),g.polygonOffset_enable=ca);T=R[0];za=R[1];if(T!==ua[0]||za!==ua[1])m.polygonOffset(T,za),ua[0]=T,ua[1]=za;
ma=I.sample_alpha;ma!==g.sample_alpha&&(ma?m.enable(32926):m.disable(32926),g.sample_alpha=ma);l=I.sample_enable;l!==g.sample_enable&&(l?m.enable(32928):m.disable(32928),g.sample_enable=l);lc=N[0];X=N[1];if(lc!==Zb[0]||X!==Zb[1])m.sampleCoverage(lc,X),Zb[0]=lc,Zb[1]=X;p=I.stencil_mask;p!==g.stencil_mask&&(m.stencilMask(p),g.stencil_mask=p);Hb=u[0];zb=u[1];bb=u[2];if(Hb!==ha[0]||zb!==ha[1]||bb!==ha[2])m.stencilFunc(Hb,zb,bb),ha[0]=Hb,ha[1]=zb,ha[2]=bb;Ta=Ma[0];Eb=Ma[1];$d=Ma[2];bd=Ma[3];if(Ta!==ac[0]||
Eb!==ac[1]||$d!==ac[2]||bd!==ac[3])m.stencilOpSeparate(Ta,Eb,$d,bd),ac[0]=Ta,ac[1]=Eb,ac[2]=$d,ac[3]=bd;pe=ba[0];td=ba[1];de=ba[2];re=ba[3];if(pe!==Fa[0]||td!==Fa[1]||de!==Fa[2]||re!==Fa[3])m.stencilOpSeparate(pe,td,de,re),Fa[0]=pe,Fa[1]=td,Fa[2]=de,Fa[3]=re}m.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;m.enable(3042);g.blend_enable=!0;m.blendEquationSeparate(32774,32774);mb[0]=32774;mb[1]=32774;m.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;m.disable(2929);g.depth_enable=
!1;m.enable(3089);g.scissor_enable=!0;m.disable(2960);g.stencil_enable=!1;if(d=g.profile)e=performance.now(),W.count+=a;m.useProgram(t.program);n=P.angle_instanced_arrays;var Fd;k.setVAO(null);Fd=f.instances;for(q=0;q<a;++q){A=b[q];var Id,Vd,ee,Ye,lf,bf,xd,De,be,Pd,Yd,le,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub;Id=A.viewport;Vd=Id.x|
0;ee=Id.y|0;Ye="width"in Id?Id.width|0:h.framebufferWidth-Vd;lf="height"in Id?Id.height|0:h.framebufferHeight-ee;bf=h.viewportWidth;h.viewportWidth=Ye;xd=h.viewportHeight;h.viewportHeight=lf;m.viewport(Vd,ee,Ye,lf);V[0]=Vd;V[1]=ee;V[2]=Ye;V[3]=lf;De=A.viewport;be=De.x|0;Pd=De.y|0;Yd="width"in De?De.width|0:h.framebufferWidth-be;le="height"in De?De.height|0:h.framebufferHeight-Pd;m.scissor(be,Pd,Yd,le);Q[0]=be;Q[1]=Pd;Q[2]=Yd;Q[3]=le;ea.buffer=A.positionBuffer;pd=!1;ld=null;wd=0;od=!1;Ac=gd=0;qd=1;
Rc=0;Lc=5126;Fb=jc=$a=sc=0;na(ea)?(pd=!0,ld=Ca.createStream(34962,ea),Lc=ld.dtype):(ld=Ca.getBuffer(ea))?Lc=ld.dtype:"constant"in ea?(qd=2,"number"===typeof ea.constant?($a=ea.constant,jc=Fb=sc=0):($a=0<ea.constant.length?ea.constant[0]:0,jc=1<ea.constant.length?ea.constant[1]:0,Fb=2<ea.constant.length?ea.constant[2]:0,sc=3<ea.constant.length?ea.constant[3]:0)):(ld=na(ea.buffer)?Ca.createStream(34962,ea.buffer):Ca.getBuffer(ea.buffer),Lc="type"in ea?sb[ea.type]:ld.dtype,od=!!ea.normalized,Ac=ea.size|
0,gd=ea.offset|0,Rc=ea.stride|0,wd=ea.divisor|0);rc=r.location;Ua=O[rc];if(1===qd){Ua.buffer||m.enableVertexAttribArray(rc);Jc=Ac||2;if(Ua.type!==Lc||Ua.size!==Jc||Ua.buffer!==ld||Ua.normalized!==od||Ua.offset!==gd||Ua.stride!==Rc)m.bindBuffer(34962,ld.buffer),m.vertexAttribPointer(rc,Jc,Lc,od,Rc,gd),Ua.type=Lc,Ua.size=Jc,Ua.buffer=ld,Ua.normalized=od,Ua.offset=gd,Ua.stride=Rc;Ua.divisor!==wd&&(n.vertexAttribDivisorANGLE(rc,wd),Ua.divisor=wd)}else if(Ua.buffer&&(m.disableVertexAttribArray(rc),Ua.buffer=
null),Ua.x!==$a||Ua.y!==jc||Ua.z!==Fb||Ua.w!==sc)m.vertexAttrib4f(rc,$a,jc,Fb,sc),Ua.x=$a,Ua.y=jc,Ua.z=Fb,Ua.w=sc;ra.buffer=A.positionFractBuffer;cc=!1;$c=null;Nd=0;md=!1;Xb=Bc=0;Gc=1;Sc=0;La=5126;vd=pa=Xa=ub=0;na(ra)?(cc=!0,$c=Ca.createStream(34962,ra),La=$c.dtype):($c=Ca.getBuffer(ra))?La=$c.dtype:"constant"in ra?(Gc=2,"number"===typeof ra.constant?(Xa=ra.constant,pa=vd=ub=0):(Xa=0<ra.constant.length?ra.constant[0]:0,pa=1<ra.constant.length?ra.constant[1]:0,vd=2<ra.constant.length?ra.constant[2]:
0,ub=3<ra.constant.length?ra.constant[3]:0)):($c=na(ra.buffer)?Ca.createStream(34962,ra.buffer):Ca.getBuffer(ra.buffer),La="type"in ra?sb[ra.type]:$c.dtype,md=!!ra.normalized,Xb=ra.size|0,Bc=ra.offset|0,Sc=ra.stride|0,Nd=ra.divisor|0);Bb=B.location;Sa=O[Bb];if(1===Gc){Sa.buffer||m.enableVertexAttribArray(Bb);Vb=Xb||2;if(Sa.type!==La||Sa.size!==Vb||Sa.buffer!==$c||Sa.normalized!==md||Sa.offset!==Bc||Sa.stride!==Sc)m.bindBuffer(34962,$c.buffer),m.vertexAttribPointer(Bb,Vb,La,md,Sc,Bc),Sa.type=La,Sa.size=
Vb,Sa.buffer=$c,Sa.normalized=md,Sa.offset=Bc,Sa.stride=Sc;Sa.divisor!==Nd&&(n.vertexAttribDivisorANGLE(Bb,Nd),Sa.divisor=Nd)}else if(Sa.buffer&&(m.disableVertexAttribArray(Bb),Sa.buffer=null),Sa.x!==Xa||Sa.y!==pa||Sa.z!==vd||Sa.w!==ub)m.vertexAttrib4f(Bb,Xa,pa,vd,ub),Sa.x=Xa,Sa.y=pa,Sa.z=vd,Sa.w=ub;cb=A.fill;Yb=cb[0];Ee=cb[1];Sb=cb[2];Tb=cb[3];q&&Rb===Yb&&bc===Ee&&Sd===Sb&&Na===Tb||(Rb=Yb,bc=Ee,Sd=Sb,Na=Tb,m.uniform4f(C.location,Yb,Ee,Sb,Tb));nb=A.scale;vb=nb[0];Pa=nb[1];q&&gb===vb&&qc===Pa||(gb=
vb,qc=Pa,m.uniform2f(F.location,vb,Pa));Ib=A.scaleFract;sd=Ib[0];nc=Ib[1];q&&db===sd&&Hc===nc||(db=sd,Hc=nc,m.uniform2f(x.location,sd,nc));kc=A.translate;ib=kc[0];sa=kc[1];q&&jb===ib&&ob===sa||(jb=ib,ob=sa,m.uniform2f(G.location,ib,sa));va=A.translateFract;Va=va[0];Aa=va[1];q&&ab===Va&&eb===Aa||(ab=Va,eb=Aa,m.uniform2f(ka.location,Va,Aa));Ia=A.id;q&&Cb===Ia||(Cb=Ia,m.uniform1f(K.location,Ia));Ab=A.opacity;q&&Ra===Ab||(Ra=Ab,m.uniform1f(L.location,Ab));Kc=y.call(this,h,A,q);Jb=null;(Jb=(Lb=na(Kc))?
v.createStream(Kc):v.getElements(Kc))&&m.bindBuffer(34963,Jb.buffer.buffer);if(Ub=Jb?Jb.vertCount:-1)0<Fd?Jb?n.drawElementsInstancedANGLE(4,Ub,Jb.type,0<<(Jb.type-5121>>1),Fd):n.drawArraysInstancedANGLE(4,0,Ub,Fd):0>Fd&&(Jb?m.drawElements(4,Ub,Jb.type,0<<(Jb.type-5121>>1)):m.drawArrays(4,0,Ub)),h.viewportWidth=bf,h.viewportHeight=xd,pd&&Ca.destroyStream(ld),cc&&Ca.destroyStream($c),Lb&&v.destroyStream(Jb)}g.dirty=!0;k.setVAO(null);d&&(W.cpuTime+=performance.now()-e)},draw:function(b){var a,c,d,e,
q,t,y,Y,da,ja,Ja,D,w,ga,ta,U,fa,oa,E,z,ca,T;a=S.next;a!==S.cur&&(a?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null),S.cur=a);if(g.dirty){a=I.dither;a!==g.dither&&(a?m.enable(3024):m.disable(3024),g.dither=a);a=I.depth_func;a!==g.depth_func&&(m.depthFunc(a),g.depth_func=a);a=H[0];t=H[1];if(a!==M[0]||t!==M[1])m.depthRange(a,t),M[0]=a,M[1]=t;a=I.depth_mask;a!==g.depth_mask&&(m.depthMask(a),g.depth_mask=a);a=Oa[0];t=Oa[1];c=Oa[2];d=Oa[3];if(a!==Z[0]||t!==Z[1]||c!==Z[2]||d!==Z[3])m.colorMask(a,
t,c,d),Z[0]=a,Z[1]=t,Z[2]=c,Z[3]=d;a=I.cull_enable;a!==g.cull_enable&&(a?m.enable(2884):m.disable(2884),g.cull_enable=a);a=I.cull_face;a!==g.cull_face&&(m.cullFace(a),g.cull_face=a);a=I.frontFace;a!==g.frontFace&&(m.frontFace(a),g.frontFace=a);a=I.lineWidth;a!==g.lineWidth&&(m.lineWidth(a),g.lineWidth=a);a=I.polygonOffset_enable;a!==g.polygonOffset_enable&&(a?m.enable(32823):m.disable(32823),g.polygonOffset_enable=a);a=R[0];t=R[1];if(a!==ua[0]||t!==ua[1])m.polygonOffset(a,t),ua[0]=a,ua[1]=t;a=I.sample_alpha;
a!==g.sample_alpha&&(a?m.enable(32926):m.disable(32926),g.sample_alpha=a);a=I.sample_enable;a!==g.sample_enable&&(a?m.enable(32928):m.disable(32928),g.sample_enable=a);a=N[0];t=N[1];if(a!==Zb[0]||t!==Zb[1])m.sampleCoverage(a,t),Zb[0]=a,Zb[1]=t;a=I.stencil_mask;a!==g.stencil_mask&&(m.stencilMask(a),g.stencil_mask=a);a=u[0];t=u[1];c=u[2];if(a!==ha[0]||t!==ha[1]||c!==ha[2])m.stencilFunc(a,t,c),ha[0]=a,ha[1]=t,ha[2]=c;a=Ma[0];t=Ma[1];c=Ma[2];d=Ma[3];if(a!==ac[0]||t!==ac[1]||c!==ac[2]||d!==ac[3])m.stencilOpSeparate(a,
t,c,d),ac[0]=a,ac[1]=t,ac[2]=c,ac[3]=d;a=ba[0];t=ba[1];c=ba[2];d=ba[3];if(a!==Fa[0]||t!==Fa[1]||c!==Fa[2]||d!==Fa[3])m.stencilOpSeparate(a,t,c,d),Fa[0]=a,Fa[1]=t,Fa[2]=c,Fa[3]=d}a=b.viewport;c=a.x|0;d=a.y|0;e="width"in a?a.width|0:h.framebufferWidth-c;q="height"in a?a.height|0:h.framebufferHeight-d;a=h.viewportWidth;h.viewportWidth=e;t=h.viewportHeight;h.viewportHeight=q;m.viewport(c,d,e,q);V[0]=c;V[1]=d;V[2]=e;V[3]=q;m.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;m.enable(3042);g.blend_enable=
!0;m.blendEquationSeparate(32774,32774);mb[0]=32774;mb[1]=32774;m.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;m.disable(2929);g.depth_enable=!1;q=b.viewport;c=q.x|0;d=q.y|0;e="width"in q?q.width|0:h.framebufferWidth-c;q="height"in q?q.height|0:h.framebufferHeight-d;m.scissor(c,d,e,q);Q[0]=c;Q[1]=d;Q[2]=e;Q[3]=q;m.enable(3089);g.scissor_enable=!0;m.disable(2960);g.stencil_enable=!1;if(c=g.profile)y=performance.now(),W.count++;m.useProgram(n.program);d=P.angle_instanced_arrays;
k.setVAO(null);ea.buffer=b.positionBuffer;e=!1;Y=0;da=!1;Ja=ja=0;D=1;w=0;ga=5126;oa=fa=U=ta=0;na(ea)?(e=!0,q=Ca.createStream(34962,ea),ga=q.dtype):(q=Ca.getBuffer(ea))?ga=q.dtype:"constant"in ea?(D=2,"number"===typeof ea.constant?(U=ea.constant,fa=oa=ta=0):(U=0<ea.constant.length?ea.constant[0]:0,fa=1<ea.constant.length?ea.constant[1]:0,oa=2<ea.constant.length?ea.constant[2]:0,ta=3<ea.constant.length?ea.constant[3]:0)):(q=na(ea.buffer)?Ca.createStream(34962,ea.buffer):Ca.getBuffer(ea.buffer),ga="type"in
ea?sb[ea.type]:q.dtype,da=!!ea.normalized,Ja=ea.size|0,ja=ea.offset|0,w=ea.stride|0,Y=ea.divisor|0);E=r.location;z=O[E];if(1===D){z.buffer||m.enableVertexAttribArray(E);Ja=Ja||2;if(z.type!==ga||z.size!==Ja||z.buffer!==q||z.normalized!==da||z.offset!==ja||z.stride!==w)m.bindBuffer(34962,q.buffer),m.vertexAttribPointer(E,Ja,ga,da,w,ja),z.type=ga,z.size=Ja,z.buffer=q,z.normalized=da,z.offset=ja,z.stride=w;z.divisor!==Y&&(d.vertexAttribDivisorANGLE(E,Y),z.divisor=Y)}else if(z.buffer&&(m.disableVertexAttribArray(E),
z.buffer=null),z.x!==U||z.y!==fa||z.z!==oa||z.w!==ta)m.vertexAttrib4f(E,U,fa,oa,ta),z.x=U,z.y=fa,z.z=oa,z.w=ta;ra.buffer=b.positionFractBuffer;Y=!1;ja=0;w=!1;ta=ga=0;U=1;E=0;z=5126;T=ca=oa=fa=0;na(ra)?(Y=!0,da=Ca.createStream(34962,ra),z=da.dtype):(da=Ca.getBuffer(ra))?z=da.dtype:"constant"in ra?(U=2,"number"===typeof ra.constant?(oa=ra.constant,ca=T=fa=0):(oa=0<ra.constant.length?ra.constant[0]:0,ca=1<ra.constant.length?ra.constant[1]:0,T=2<ra.constant.length?ra.constant[2]:0,fa=3<ra.constant.length?
ra.constant[3]:0)):(da=na(ra.buffer)?Ca.createStream(34962,ra.buffer):Ca.getBuffer(ra.buffer),z="type"in ra?sb[ra.type]:da.dtype,w=!!ra.normalized,ta=ra.size|0,ga=ra.offset|0,E=ra.stride|0,ja=ra.divisor|0);Ja=B.location;D=O[Ja];if(1===U){D.buffer||m.enableVertexAttribArray(Ja);ta=ta||2;if(D.type!==z||D.size!==ta||D.buffer!==da||D.normalized!==w||D.offset!==ga||D.stride!==E)m.bindBuffer(34962,da.buffer),m.vertexAttribPointer(Ja,ta,z,w,E,ga),D.type=z,D.size=ta,D.buffer=da,D.normalized=w,D.offset=ga,
D.stride=E;D.divisor!==ja&&(d.vertexAttribDivisorANGLE(Ja,ja),D.divisor=ja)}else if(D.buffer&&(m.disableVertexAttribArray(Ja),D.buffer=null),D.x!==oa||D.y!==ca||D.z!==T||D.w!==fa)m.vertexAttrib4f(Ja,oa,ca,T,fa),D.x=oa,D.y=ca,D.z=T,D.w=fa;ja=b.fill;m.uniform4f(C.location,ja[0],ja[1],ja[2],ja[3]);ja=b.scale;m.uniform2f(F.location,ja[0],ja[1]);ja=b.scaleFract;m.uniform2f(x.location,ja[0],ja[1]);ja=b.translate;m.uniform2f(G.location,ja[0],ja[1]);ja=b.translateFract;m.uniform2f(ka.location,ja[0],ja[1]);
m.uniform1f(K.location,b.id);m.uniform1f(L.location,b.opacity);ja=A.call(this,h,b,0);(ja=(b=na(ja))?v.createStream(ja):v.getElements(ja))&&m.bindBuffer(34963,ja.buffer.buffer);if(w=ja?ja.vertCount:-1)ga=f.instances,0<ga?ja?d.drawElementsInstancedANGLE(4,w,ja.type,0<<(ja.type-5121>>1),ga):d.drawArraysInstancedANGLE(4,0,w,ga):0>ga&&(ja?m.drawElements(4,w,ja.type,0<<(ja.type-5121>>1)):m.drawArrays(4,0,w)),g.dirty=!0,k.setVAO(null),h.viewportWidth=a,h.viewportHeight=t,c&&(W.cpuTime+=performance.now()-
y),e&&Ca.destroyStream(q),Y&&Ca.destroyStream(da),b&&v.destroyStream(ja)},scope:function(c,k,m){var n,t,u,r,x,A,y,B,M,D,w,G,C,K,P,F,E,z,ca,H,L,Q,l,N,X,p,S,V,O,R,ja,Z,ba,ha,wa,ua,la,qa,ka,Fa,Ma,Oa,mb,Zb,xd,ac,be,Pd,Yd,le,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab;n=c.viewport;t=n.x|0;u=n.y|0;r="width"in n?n.width|0:h.framebufferWidth-t;x="height"in n?
n.height|0:h.framebufferHeight-u;A=h.viewportWidth;h.viewportWidth=r;y=h.viewportHeight;h.viewportHeight=x;B=bb[0];bb[0]=t;M=bb[1];bb[1]=u;D=bb[2];bb[2]=r;w=bb[3];bb[3]=x;G=Y[0];Y[0]=0;C=Y[1];Y[1]=0;K=Y[2];Y[2]=0;P=Y[3];Y[3]=0;F=I.blend_enable;I.blend_enable=!0;E=Ta[0];Ta[0]=32774;z=Ta[1];Ta[1]=32774;ca=Eb[0];Eb[0]=770;H=Eb[1];Eb[1]=771;L=Eb[2];Eb[2]=773;Q=Eb[3];Eb[3]=1;l=I.depth_enable;I.depth_enable=!1;N=c.viewport;X=N.x|0;p=N.y|0;S="width"in N?N.width|0:h.framebufferWidth-X;V="height"in N?N.height|
0:h.framebufferHeight-p;O=Ja[0];Ja[0]=X;R=Ja[1];Ja[1]=p;ja=Ja[2];Ja[2]=S;Z=Ja[3];Ja[3]=V;ba=I.scissor_enable;I.scissor_enable=!0;ha=I.stencil_enable;I.stencil_enable=!1;if(wa=g.profile)ua=performance.now(),W.count++;la=e.call(this,h,c,m);qa=null;qa=(ka=na(la))?v.createStream(la):v.getElements(la);Fa=f.elements;f.elements=qa;Ma=f.offset;f.offset=0;Oa=qa?qa.vertCount:-1;mb=f.count;f.count=Oa;Zb=f.primitive;f.primitive=4;xd=c.fill;ac=b[14];b[14]=xd;be=c.id;Pd=b[31];b[31]=be;Yd=c.opacity;le=b[10];b[10]=
Yd;pd=h.pixelRatio;ld=b[34];b[34]=pd;wd=c.scale;od=b[6];b[6]=wd;gd=c.scaleFract;Ac=b[7];b[7]=gd;qd=c.translate;Rc=b[8];b[8]=qd;Lc=c.translateFract;sc=b[9];b[9]=Lc;$a=d.call(this,h,c,m);jc=b[3];b[3]=$a;ea.buffer=c.positionBuffer;Fb=!1;rc=null;Ua=0;Jc=!1;$c=cc=0;Nd=1;md=0;Bc=5126;La=Sc=Gc=Xb=0;na(ea)?(Fb=!0,rc=Ca.createStream(34962,ea),Bc=rc.dtype):(rc=Ca.getBuffer(ea))?Bc=rc.dtype:"constant"in ea?(Nd=2,"number"===typeof ea.constant?(Gc=ea.constant,Sc=La=Xb=0):(Gc=0<ea.constant.length?ea.constant[0]:
0,Sc=1<ea.constant.length?ea.constant[1]:0,La=2<ea.constant.length?ea.constant[2]:0,Xb=3<ea.constant.length?ea.constant[3]:0)):(rc=na(ea.buffer)?Ca.createStream(34962,ea.buffer):Ca.getBuffer(ea.buffer),Bc="type"in ea?sb[ea.type]:rc.dtype,Jc=!!ea.normalized,$c=ea.size|0,cc=ea.offset|0,md=ea.stride|0,Ua=ea.divisor|0);ub=q.buffer;q.buffer=rc;Xa=q.divisor;q.divisor=Ua;pa=q.normalized;q.normalized=Jc;vd=q.offset;q.offset=cc;Bb=q.size;q.size=$c;Sa=q.state;q.state=Nd;Vb=q.stride;q.stride=md;cb=q.type;q.type=
Bc;Yb=q.w;q.w=Xb;Rb=q.x;q.x=Gc;Ee=q.y;q.y=Sc;bc=q.z;q.z=La;ra.buffer=c.positionFractBuffer;Sb=!1;Sd=null;Tb=0;Na=!1;vb=nb=0;gb=1;Pa=0;qc=5126;nc=db=sd=Ib=0;na(ra)?(Sb=!0,Sd=Ca.createStream(34962,ra),qc=Sd.dtype):(Sd=Ca.getBuffer(ra))?qc=Sd.dtype:"constant"in ra?(gb=2,"number"===typeof ra.constant?(sd=ra.constant,db=nc=Ib=0):(sd=0<ra.constant.length?ra.constant[0]:0,db=1<ra.constant.length?ra.constant[1]:0,nc=2<ra.constant.length?ra.constant[2]:0,Ib=3<ra.constant.length?ra.constant[3]:0)):(Sd=na(ra.buffer)?
Ca.createStream(34962,ra.buffer):Ca.getBuffer(ra.buffer),qc="type"in ra?sb[ra.type]:Sd.dtype,Na=!!ra.normalized,vb=ra.size|0,nb=ra.offset|0,Pa=ra.stride|0,Tb=ra.divisor|0);Hc=a.buffer;a.buffer=Sd;kc=a.divisor;a.divisor=Tb;ib=a.normalized;a.normalized=Na;jb=a.offset;a.offset=nb;sa=a.size;a.size=vb;ob=a.state;a.state=gb;va=a.stride;a.stride=Pa;Va=a.type;a.type=qc;ab=a.w;a.w=Ib;Aa=a.x;a.x=sd;eb=a.y;a.y=db;Ia=a.z;a.z=nc;Cb=da.vert;da.vert=42;Ab=da.frag;da.frag=41;g.dirty=!0;k(h,c,m);h.viewportWidth=A;
h.viewportHeight=y;bb[0]=B;bb[1]=M;bb[2]=D;bb[3]=w;Y[0]=G;Y[1]=C;Y[2]=K;Y[3]=P;I.blend_enable=F;Ta[0]=E;Ta[1]=z;Eb[0]=ca;Eb[1]=H;Eb[2]=L;Eb[3]=Q;I.depth_enable=l;Ja[0]=O;Ja[1]=R;Ja[2]=ja;Ja[3]=Z;I.scissor_enable=ba;I.stencil_enable=ha;wa&&(W.cpuTime+=performance.now()-ua);ka&&v.destroyStream(qa);f.elements=Fa;f.offset=Ma;f.count=mb;f.primitive=Zb;b[14]=ac;b[31]=Pd;b[10]=le;b[34]=ld;b[6]=od;b[7]=Ac;b[8]=Rc;b[9]=sc;b[3]=jc;Fb&&Ca.destroyStream(rc);q.buffer=ub;q.divisor=Xa;q.normalized=pa;q.offset=vd;
q.size=Bb;q.state=Sa;q.stride=Vb;q.type=cb;q.w=Yb;q.x=Rb;q.y=Ee;q.z=bc;Sb&&Ca.destroyStream(Sd);a.buffer=Hc;a.divisor=kc;a.normalized=ib;a.offset=jb;a.size=sa;a.state=ob;a.stride=va;a.type=Va;a.w=ab;a.x=Aa;a.y=eb;a.z=Ia;da.vert=Cb;da.frag=Ab;g.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,W,n,A,e,d,q,a,t,y,C,K,L,r,B,F,x,G,ka,O,Ca,h,g,
f,v,P,S,m,na,I,da,b,k,Y,la,Ta,mb,Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra,ec,pc,mc,ud,wc){var aa,J,ia,Da,tb,Qc,xc,D,w,ga,ta,U,fa,oa,E,z,ca,T,za,ma,l,lc,X,p,Hb,zb,Ve,ke,ue,$d,bd,pe,td,de,re,Fd,Id,Vd,ee;aa=c.attributes;J=c.buffer;ia=c.context;Da=c.current;tb=c.draw;Qc=c.elements;xc=c.extensions;D=c.framebuffer;w=c.gl;ga=c.isBufferArgs;ta=c.next;U=c.shader;fa=c.uniforms;oa=c.vao;E=ta.blend_color;z=Da.blend_color;ca=ta.blend_equation;T=Da.blend_equation;za=ta.blend_func;ma=Da.blend_func;
l=ta.colorMask;lc=Da.colorMask;X=ta.depth_range;p=Da.depth_range;Hb=ta.polygonOffset_offset;zb=Da.polygonOffset_offset;Ve=ta.sample_coverage;ke=Da.sample_coverage;ue=ta.scissor_box;$d=Da.scissor_box;bd=ta.stencil_func;pe=Da.stencil_func;td=ta.stencil_opBack;de=Da.stencil_opBack;re=ta.stencil_opFront;Fd=Da.stencil_opFront;Id=ta.viewport;Vd=Da.viewport;ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var c,d,f,e,g,h;c=D.next;
c!==D.cur&&(c?w.bindFramebuffer(36160,c.framebuffer):w.bindFramebuffer(36160,null),D.cur=c);if(Da.dirty){var k,m,n,q,v,t,r,x,A,E,y,B,I,G,C,K,P,F,L,S,O,U,fa,Y,ja,da,Ca,na,pa,wa,za,Sa,ka,cb;k=ta.dither;k!==Da.dither&&(k?w.enable(3024):w.disable(3024),Da.dither=k);m=ca[0];n=ca[1];if(m!==T[0]||n!==T[1])w.blendEquationSeparate(m,n),T[0]=m,T[1]=n;q=ta.depth_func;q!==Da.depth_func&&(w.depthFunc(q),Da.depth_func=q);v=X[0];t=X[1];if(v!==p[0]||t!==p[1])w.depthRange(v,t),p[0]=v,p[1]=t;r=ta.depth_mask;r!==Da.depth_mask&&
(w.depthMask(r),Da.depth_mask=r);x=l[0];A=l[1];E=l[2];y=l[3];if(x!==lc[0]||A!==lc[1]||E!==lc[2]||y!==lc[3])w.colorMask(x,A,E,y),lc[0]=x,lc[1]=A,lc[2]=E,lc[3]=y;B=ta.cull_enable;B!==Da.cull_enable&&(B?w.enable(2884):w.disable(2884),Da.cull_enable=B);I=ta.cull_face;I!==Da.cull_face&&(w.cullFace(I),Da.cull_face=I);G=ta.frontFace;G!==Da.frontFace&&(w.frontFace(G),Da.frontFace=G);C=ta.lineWidth;C!==Da.lineWidth&&(w.lineWidth(C),Da.lineWidth=C);K=ta.polygonOffset_enable;K!==Da.polygonOffset_enable&&(K?
w.enable(32823):w.disable(32823),Da.polygonOffset_enable=K);P=Hb[0];F=Hb[1];if(P!==zb[0]||F!==zb[1])w.polygonOffset(P,F),zb[0]=P,zb[1]=F;L=ta.sample_alpha;L!==Da.sample_alpha&&(L?w.enable(32926):w.disable(32926),Da.sample_alpha=L);S=ta.sample_enable;S!==Da.sample_enable&&(S?w.enable(32928):w.disable(32928),Da.sample_enable=S);O=Ve[0];U=Ve[1];if(O!==ke[0]||U!==ke[1])w.sampleCoverage(O,U),ke[0]=O,ke[1]=U;fa=ta.stencil_mask;fa!==Da.stencil_mask&&(w.stencilMask(fa),Da.stencil_mask=fa);Y=bd[0];ja=bd[1];
da=bd[2];if(Y!==pe[0]||ja!==pe[1]||da!==pe[2])w.stencilFunc(Y,ja,da),pe[0]=Y,pe[1]=ja,pe[2]=da;Ca=re[0];na=re[1];pa=re[2];wa=re[3];if(Ca!==Fd[0]||na!==Fd[1]||pa!==Fd[2]||wa!==Fd[3])w.stencilOpSeparate(Ca,na,pa,wa),Fd[0]=Ca,Fd[1]=na,Fd[2]=pa,Fd[3]=wa;za=td[0];Sa=td[1];ka=td[2];cb=td[3];if(za!==de[0]||Sa!==de[1]||ka!==de[2]||cb!==de[3])w.stencilOpSeparate(za,Sa,ka,cb),de[0]=za,de[1]=Sa,de[2]=ka,de[3]=cb}w.blendColor(0,0,0,1);z[0]=0;z[1]=0;z[2]=0;z[3]=1;w.enable(3042);Da.blend_enable=!0;w.blendFuncSeparate(770,
771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;w.disable(2929);Da.depth_enable=!1;w.enable(3089);Da.scissor_enable=!0;w.disable(2960);Da.stencil_enable=!1;if(d=Da.profile)f=performance.now(),W.count+=a;w.useProgram(la.program);e=xc.angle_instanced_arrays;var Yb;oa.setVAO(null);w.uniform1i(u.location,!1);w.uniform1i(ac.location,ua.bind());Yb=tb.instances;for(g=0;g<a;++g){h=b[g];var Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,
fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,xe,me,Yc,Id,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,ue,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Hf,Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf,qf,nf,rf,Af,Bf,Ne,Ae,of,pf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,Sf,Tf;Rb=h.viewport;Ee=
Rb.x|0;bc=Rb.y|0;Sb="width"in Rb?Rb.width|0:ia.framebufferWidth-Ee;Sd="height"in Rb?Rb.height|0:ia.framebufferHeight-bc;Tb=ia.viewportWidth;ia.viewportWidth=Sb;Na=ia.viewportHeight;ia.viewportHeight=Sd;w.viewport(Ee,bc,Sb,Sd);Vd[0]=Ee;Vd[1]=bc;Vd[2]=Sb;Vd[3]=Sd;nb=h.viewport;vb=nb.x|0;gb=nb.y|0;Pa="width"in nb?nb.width|0:ia.framebufferWidth-vb;qc="height"in nb?nb.height|0:ia.framebufferHeight-gb;w.scissor(vb,gb,Pa,qc);$d[0]=vb;$d[1]=gb;$d[2]=Pa;$d[3]=qc;Ib=Ta.call(this,ia,h,g);sd=!1;db=null;nc=0;
Hc=!1;ib=kc=0;jb=1;sa=0;ob=5126;Aa=ab=Va=va=0;ga(Ib)?(sd=!0,db=J.createStream(34962,Ib),ob=db.dtype):(db=J.getBuffer(Ib))?ob=db.dtype:"constant"in Ib?(jb=2,"number"===typeof Ib.constant?(Va=Ib.constant,ab=Aa=va=0):(Va=0<Ib.constant.length?Ib.constant[0]:0,ab=1<Ib.constant.length?Ib.constant[1]:0,Aa=2<Ib.constant.length?Ib.constant[2]:0,va=3<Ib.constant.length?Ib.constant[3]:0)):(db=ga(Ib.buffer)?J.createStream(34962,Ib.buffer):J.getBuffer(Ib.buffer),ob="type"in Ib?ee[Ib.type]:db.dtype,Hc=!!Ib.normalized,
ib=Ib.size|0,kc=Ib.offset|0,sa=Ib.stride|0,nc=Ib.divisor|0);eb=pc.location;Ia=aa[eb];if(1===jb){Ia.buffer||w.enableVertexAttribArray(eb);Cb=ib||1;if(Ia.type!==ob||Ia.size!==Cb||Ia.buffer!==db||Ia.normalized!==Hc||Ia.offset!==kc||Ia.stride!==sa)w.bindBuffer(34962,db.buffer),w.vertexAttribPointer(eb,Cb,ob,Hc,sa,kc),Ia.type=ob,Ia.size=Cb,Ia.buffer=db,Ia.normalized=Hc,Ia.offset=kc,Ia.stride=sa;Ia.divisor!==nc&&(e.vertexAttribDivisorANGLE(eb,nc),Ia.divisor=nc)}else if(Ia.buffer&&(w.disableVertexAttribArray(eb),
Ia.buffer=null),Ia.x!==Va||Ia.y!==ab||Ia.z!==Aa||Ia.w!==va)w.vertexAttrib4f(eb,Va,ab,Aa,va),Ia.x=Va,Ia.y=ab,Ia.z=Aa,Ia.w=va;Ab=mb.call(this,ia,h,g);Ra=!1;Kc=null;Jb=0;Lb=!1;xa=Ub=0;Td=1;Ka=0;Ob=5126;fc=ya=hb=fb=0;ga(Ab)?(Ra=!0,Kc=J.createStream(34962,Ab),Ob=Kc.dtype):(Kc=J.getBuffer(Ab))?Ob=Kc.dtype:"constant"in Ab?(Td=2,"number"===typeof Ab.constant?(hb=Ab.constant,ya=fc=fb=0):(hb=0<Ab.constant.length?Ab.constant[0]:0,ya=1<Ab.constant.length?Ab.constant[1]:0,fc=2<Ab.constant.length?Ab.constant[2]:
0,fb=3<Ab.constant.length?Ab.constant[3]:0)):(Kc=ga(Ab.buffer)?J.createStream(34962,Ab.buffer):J.getBuffer(Ab.buffer),Ob="type"in Ab?ee[Ab.type]:Kc.dtype,Lb=!!Ab.normalized,xa=Ab.size|0,Ub=Ab.offset|0,Ka=Ab.stride|0,Jb=Ab.divisor|0);Ea=ud.location;pb=aa[Ea];if(1===Td){pb.buffer||w.enableVertexAttribArray(Ea);qb=xa||1;if(pb.type!==Ob||pb.size!==qb||pb.buffer!==Kc||pb.normalized!==Lb||pb.offset!==Ub||pb.stride!==Ka)w.bindBuffer(34962,Kc.buffer),w.vertexAttribPointer(Ea,qb,Ob,Lb,Ka,Ub),pb.type=Ob,pb.size=
qb,pb.buffer=Kc,pb.normalized=Lb,pb.offset=Ub,pb.stride=Ka;pb.divisor!==Jb&&(e.vertexAttribDivisorANGLE(Ea,Jb),pb.divisor=Jb)}else if(pb.buffer&&(w.disableVertexAttribArray(Ea),pb.buffer=null),pb.x!==hb||pb.y!==ya||pb.z!==fc||pb.w!==fb)w.vertexAttrib4f(Ea,hb,ya,fc,fb),pb.x=hb,pb.y=ya,pb.z=fc,pb.w=fb;Ya=Eb.call(this,ia,h,g);Za=!1;oc=null;cd=0;uc=!1;Mb=Wa=0;dd=1;Ga=0;yc=5126;wb=kb=Ba=Qa=0;ga(Ya)?(Za=!0,oc=J.createStream(34962,Ya),yc=oc.dtype):(oc=J.getBuffer(Ya))?yc=oc.dtype:"constant"in Ya?(dd=2,"number"===
typeof Ya.constant?(Ba=Ya.constant,kb=wb=Qa=0):(Ba=0<Ya.constant.length?Ya.constant[0]:0,kb=1<Ya.constant.length?Ya.constant[1]:0,wb=2<Ya.constant.length?Ya.constant[2]:0,Qa=3<Ya.constant.length?Ya.constant[3]:0)):(oc=ga(Ya.buffer)?J.createStream(34962,Ya.buffer):J.getBuffer(Ya.buffer),yc="type"in Ya?ee[Ya.type]:oc.dtype,uc=!!Ya.normalized,Mb=Ya.size|0,Wa=Ya.offset|0,Ga=Ya.stride|0,cd=Ya.divisor|0);Db=mc.location;rb=aa[Db];if(1===dd){rb.buffer||w.enableVertexAttribArray(Db);vc=Mb||1;if(rb.type!==
yc||rb.size!==vc||rb.buffer!==oc||rb.normalized!==uc||rb.offset!==Wa||rb.stride!==Ga)w.bindBuffer(34962,oc.buffer),w.vertexAttribPointer(Db,vc,yc,uc,Ga,Wa),rb.type=yc,rb.size=vc,rb.buffer=oc,rb.normalized=uc,rb.offset=Wa,rb.stride=Ga;rb.divisor!==cd&&(e.vertexAttribDivisorANGLE(Db,cd),rb.divisor=cd)}else if(rb.buffer&&(w.disableVertexAttribArray(Db),rb.buffer=null),rb.x!==Ba||rb.y!==kb||rb.z!==wb||rb.w!==Qa)w.vertexAttrib4f(Db,Ba,kb,wb,Qa),rb.x=Ba,rb.y=kb,rb.z=wb,rb.w=Qa;xb=qa.call(this,ia,h,g);rd=
!1;tc=null;Gd=0;Mc=!1;ed=id=0;Wb=1;dc=0;Pb=5126;yb=lb=$b=Ha=0;ga(xb)?(rd=!0,tc=J.createStream(34962,xb),Pb=tc.dtype):(tc=J.getBuffer(xb))?Pb=tc.dtype:"constant"in xb?(Wb=2,"number"===typeof xb.constant?($b=xb.constant,lb=yb=Ha=0):($b=0<xb.constant.length?xb.constant[0]:0,lb=1<xb.constant.length?xb.constant[1]:0,yb=2<xb.constant.length?xb.constant[2]:0,Ha=3<xb.constant.length?xb.constant[3]:0)):(tc=ga(xb.buffer)?J.createStream(34962,xb.buffer):J.getBuffer(xb.buffer),Pb="type"in xb?ee[xb.type]:tc.dtype,
Mc=!!xb.normalized,ed=xb.size|0,id=xb.offset|0,dc=xb.stride|0,Gd=xb.divisor|0);Nb=wc.location;Qb=aa[Nb];if(1===Wb){Qb.buffer||w.enableVertexAttribArray(Nb);gc=ed||1;if(Qb.type!==Pb||Qb.size!==gc||Qb.buffer!==tc||Qb.normalized!==Mc||Qb.offset!==id||Qb.stride!==dc)w.bindBuffer(34962,tc.buffer),w.vertexAttribPointer(Nb,gc,Pb,Mc,dc,id),Qb.type=Pb,Qb.size=gc,Qb.buffer=tc,Qb.normalized=Mc,Qb.offset=id,Qb.stride=dc;Qb.divisor!==Gd&&(e.vertexAttribDivisorANGLE(Nb,Gd),Qb.divisor=Gd)}else if(Qb.buffer&&(w.disableVertexAttribArray(Nb),
Qb.buffer=null),Qb.x!==$b||Qb.y!==lb||Qb.z!==yb||Qb.w!==Ha)w.vertexAttrib4f(Nb,$b,lb,yb,Ha),Qb.x=$b,Qb.y=lb,Qb.z=yb,Qb.w=Ha;ic=Oa.call(this,ia,h,g);Tc=!1;Cc=null;Dc=0;Ec=!1;ad=Nc=0;Uc=1;Oc=0;Kb=5126;Vc=Ic=Pc=Gb=0;ga(ic)?(Tc=!0,Cc=J.createStream(34962,ic),Kb=Cc.dtype):(Cc=J.getBuffer(ic))?Kb=Cc.dtype:"constant"in ic?(Uc=2,"number"===typeof ic.constant?(Pc=ic.constant,Ic=Vc=Gb=0):(Pc=0<ic.constant.length?ic.constant[0]:0,Ic=1<ic.constant.length?ic.constant[1]:0,Vc=2<ic.constant.length?ic.constant[2]:
0,Gb=3<ic.constant.length?ic.constant[3]:0)):(Cc=ga(ic.buffer)?J.createStream(34962,ic.buffer):J.getBuffer(ic.buffer),Kb="type"in ic?ee[ic.type]:Cc.dtype,Ec=!!ic.normalized,ad=ic.size|0,Nc=ic.offset|0,Oc=ic.stride|0,Dc=ic.divisor|0);hc=ea.location;Xc=aa[hc];if(1===Uc){Xc.buffer||w.enableVertexAttribArray(hc);fd=ad||1;if(Xc.type!==Kb||Xc.size!==fd||Xc.buffer!==Cc||Xc.normalized!==Ec||Xc.offset!==Nc||Xc.stride!==Oc)w.bindBuffer(34962,Cc.buffer),w.vertexAttribPointer(hc,fd,Kb,Ec,Oc,Nc),Xc.type=Kb,Xc.size=
fd,Xc.buffer=Cc,Xc.normalized=Ec,Xc.offset=Nc,Xc.stride=Oc;Xc.divisor!==Dc&&(e.vertexAttribDivisorANGLE(hc,Dc),Xc.divisor=Dc)}else if(Xc.buffer&&(w.disableVertexAttribArray(hc),Xc.buffer=null),Xc.x!==Pc||Xc.y!==Ic||Xc.z!==Vc||Xc.w!==Gb)w.vertexAttrib4f(hc,Pc,Ic,Vc,Gb),Xc.x=Pc,Xc.y=Ic,Xc.z=Vc,Xc.w=Gb;xe=Z.call(this,ia,h,g);me=!1;Yc=null;Id=0;he=!1;qe=se=0;Qd=1;Dd=0;Bd=5126;jd=nd=Fc=hd=0;ga(xe)?(me=!0,Yc=J.createStream(34962,xe),Bd=Yc.dtype):(Yc=J.getBuffer(xe))?Bd=Yc.dtype:"constant"in xe?(Qd=2,"number"===
typeof xe.constant?(Fc=xe.constant,nd=jd=hd=0):(Fc=0<xe.constant.length?xe.constant[0]:0,nd=1<xe.constant.length?xe.constant[1]:0,jd=2<xe.constant.length?xe.constant[2]:0,hd=3<xe.constant.length?xe.constant[3]:0)):(Yc=ga(xe.buffer)?J.createStream(34962,xe.buffer):J.getBuffer(xe.buffer),Bd="type"in xe?ee[xe.type]:Yc.dtype,he=!!xe.normalized,qe=xe.size|0,se=xe.offset|0,Dd=xe.stride|0,Id=xe.divisor|0);Zc=Ja.location;kd=aa[Zc];if(1===Qd){kd.buffer||w.enableVertexAttribArray(Zc);zd=qe||1;if(kd.type!==
Bd||kd.size!==zd||kd.buffer!==Yc||kd.normalized!==he||kd.offset!==se||kd.stride!==Dd)w.bindBuffer(34962,Yc.buffer),w.vertexAttribPointer(Zc,zd,Bd,he,Dd,se),kd.type=Bd,kd.size=zd,kd.buffer=Yc,kd.normalized=he,kd.offset=se,kd.stride=Dd;kd.divisor!==Id&&(e.vertexAttribDivisorANGLE(Zc,Id),kd.divisor=Id)}else if(kd.buffer&&(w.disableVertexAttribArray(Zc),kd.buffer=null),kd.x!==Fc||kd.y!==nd||kd.z!==jd||kd.w!==hd)w.vertexAttrib4f(Zc,Fc,nd,jd,hd),kd.x=Fc,kd.y=nd,kd.z=jd,kd.w=hd;Ad=H.call(this,ia,h,g);ve=
!1;ye=null;ue=0;ce=!1;Zd=ae=0;Fe=1;Wd=0;fe=5126;ie=ne=Wc=zc=0;ga(Ad)?(ve=!0,ye=J.createStream(34962,Ad),fe=ye.dtype):(ye=J.getBuffer(Ad))?fe=ye.dtype:"constant"in Ad?(Fe=2,"number"===typeof Ad.constant?(Wc=Ad.constant,ne=ie=zc=0):(Wc=0<Ad.constant.length?Ad.constant[0]:0,ne=1<Ad.constant.length?Ad.constant[1]:0,ie=2<Ad.constant.length?Ad.constant[2]:0,zc=3<Ad.constant.length?Ad.constant[3]:0)):(ye=ga(Ad.buffer)?J.createStream(34962,Ad.buffer):J.getBuffer(Ad.buffer),fe="type"in Ad?ee[Ad.type]:ye.dtype,
ce=!!Ad.normalized,Zd=Ad.size|0,ae=Ad.offset|0,Wd=Ad.stride|0,ue=Ad.divisor|0);Cd=Q.location;Hd=aa[Cd];if(1===Fe){Hd.buffer||w.enableVertexAttribArray(Cd);Jd=Zd||4;if(Hd.type!==fe||Hd.size!==Jd||Hd.buffer!==ye||Hd.normalized!==ce||Hd.offset!==ae||Hd.stride!==Wd)w.bindBuffer(34962,ye.buffer),w.vertexAttribPointer(Cd,Jd,fe,ce,Wd,ae),Hd.type=fe,Hd.size=Jd,Hd.buffer=ye,Hd.normalized=ce,Hd.offset=ae,Hd.stride=Wd;Hd.divisor!==ue&&(e.vertexAttribDivisorANGLE(Cd,ue),Hd.divisor=ue)}else if(Hd.buffer&&(w.disableVertexAttribArray(Cd),
Hd.buffer=null),Hd.x!==Wc||Hd.y!==ne||Hd.z!==ie||Hd.w!==zc)w.vertexAttrib4f(Cd,Wc,ne,ie,zc),Hd.x=Wc,Hd.y=ne,Hd.z=ie,Hd.w=zc;Kd=M.call(this,ia,h,g);ge=!1;te=null;we=0;je=!1;Pe=Hf=0;Le=1;oe=0;Be=5126;Ce=Ie=He=Ge=0;ga(Kd)?(ge=!0,te=J.createStream(34962,Kd),Be=te.dtype):(te=J.getBuffer(Kd))?Be=te.dtype:"constant"in Kd?(Le=2,"number"===typeof Kd.constant?(He=Kd.constant,Ie=Ce=Ge=0):(He=0<Kd.constant.length?Kd.constant[0]:0,Ie=1<Kd.constant.length?Kd.constant[1]:0,Ce=2<Kd.constant.length?Kd.constant[2]:
0,Ge=3<Kd.constant.length?Kd.constant[3]:0)):(te=ga(Kd.buffer)?J.createStream(34962,Kd.buffer):J.getBuffer(Kd.buffer),Be="type"in Kd?ee[Kd.type]:te.dtype,je=!!Kd.normalized,Pe=Kd.size|0,Hf=Kd.offset|0,oe=Kd.stride|0,we=Kd.divisor|0);Ed=Zb.location;Od=aa[Ed];if(1===Le){Od.buffer||w.enableVertexAttribArray(Ed);Ud=Pe||4;if(Od.type!==Be||Od.size!==Ud||Od.buffer!==te||Od.normalized!==je||Od.offset!==Hf||Od.stride!==oe)w.bindBuffer(34962,te.buffer),w.vertexAttribPointer(Ed,Ud,Be,je,oe,Hf),Od.type=Be,Od.size=
Ud,Od.buffer=te,Od.normalized=je,Od.offset=Hf,Od.stride=oe;Od.divisor!==we&&(e.vertexAttribDivisorANGLE(Ed,we),Od.divisor=we)}else if(Od.buffer&&(w.disableVertexAttribArray(Ed),Od.buffer=null),Od.x!==He||Od.y!==Ie||Od.z!==Ce||Od.w!==Ge)w.vertexAttrib4f(Ed,He,Ie,Ce,Ge),Od.x=He,Od.y=Ie,Od.z=Ce,Od.w=Ge;Xd=R.call(this,ia,h,g);Je=!1;yd=null;Ld=0;ze=!1;ff=Ke=0;Xe=1;Qe=0;Me=5126;Se=Re=Ue=We=0;ga(Xd)?(Je=!0,yd=J.createStream(34962,Xd),Me=yd.dtype):(yd=J.getBuffer(Xd))?Me=yd.dtype:"constant"in Xd?(Xe=2,"number"===
typeof Xd.constant?(Ue=Xd.constant,Re=Se=We=0):(Ue=0<Xd.constant.length?Xd.constant[0]:0,Re=1<Xd.constant.length?Xd.constant[1]:0,Se=2<Xd.constant.length?Xd.constant[2]:0,We=3<Xd.constant.length?Xd.constant[3]:0)):(yd=ga(Xd.buffer)?J.createStream(34962,Xd.buffer):J.getBuffer(Xd.buffer),Me="type"in Xd?ee[Xd.type]:yd.dtype,ze=!!Xd.normalized,ff=Xd.size|0,Ke=Xd.offset|0,Qe=Xd.stride|0,Ld=Xd.divisor|0);Md=ha.location;Rd=aa[Md];if(1===Xe){Rd.buffer||w.enableVertexAttribArray(Md);Te=ff||1;if(Rd.type!==
Me||Rd.size!==Te||Rd.buffer!==yd||Rd.normalized!==ze||Rd.offset!==Ke||Rd.stride!==Qe)w.bindBuffer(34962,yd.buffer),w.vertexAttribPointer(Md,Te,Me,ze,Qe,Ke),Rd.type=Me,Rd.size=Te,Rd.buffer=yd,Rd.normalized=ze,Rd.offset=Ke,Rd.stride=Qe;Rd.divisor!==Ld&&(e.vertexAttribDivisorANGLE(Md,Ld),Rd.divisor=Ld)}else if(Rd.buffer&&(w.disableVertexAttribArray(Md),Rd.buffer=null),Rd.x!==Ue||Rd.y!==Re||Rd.z!==Se||Rd.w!==We)w.vertexAttrib4f(Md,Ue,Re,Se,We),Rd.x=Ue,Rd.y=Re,Rd.z=Se,Rd.w=We;gf=ia.pixelRatio;g&&mf===
gf||(mf=gf,w.uniform1f(bb.location,gf));cf=h.scale;hf=cf[0];kf=cf[1];g&&jf===hf&&qf===kf||(jf=hf,qf=kf,w.uniform2f(V.location,hf,kf));nf=h.scaleFract;rf=nf[0];Bf=nf[1];g&&Af===rf&&Ne===Bf||(Af=rf,Ne=Bf,w.uniform2f(sb.location,rf,Bf));Ae=h.translate;of=Ae[0];Cf=Ae[1];g&&pf===of&&Ff===Cf||(pf=of,Ff=Cf,w.uniform2f(ra.location,of,Cf));zf=h.translateFract;Df=zf[0];vf=zf[1];g&&Ef===Df&&wf===vf||(Ef=Df,wf=vf,w.uniform2f(ec.location,Df,vf));uf=N.call(this,ia,h,g);xf=uf[0];If=uf[1];g&&yf===xf&&Kf===If||(yf=
xf,Kf=If,w.uniform2f(Ma.location,xf,If));Lf=h.opacity;g&&Mf===Lf||(Mf=Lf,w.uniform1f(Fa.location,Lf));(sf=h.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Rf=sf._texture;w.uniform1i(ba.location,Rf.bind());Gf=h.elements;tf=null;(tf=(dg=ga(Gf))?Qc.createStream(Gf):Qc.getElements(Gf))&&w.bindBuffer(34963,tf.buffer.buffer);Sf=h.offset;if(Tf=h.count)0<Yb?tf?e.drawElementsInstancedANGLE(0,Tf,tf.type,Sf<<(tf.type-5121>>1),Yb):e.drawArraysInstancedANGLE(0,Sf,Tf,Yb):0>Yb&&(tf?w.drawElements(0,
Tf,tf.type,Sf<<(tf.type-5121>>1)):w.drawArrays(0,Sf,Tf)),ia.viewportWidth=Tb,ia.viewportHeight=Na,sd&&J.destroyStream(db),Ra&&J.destroyStream(Kc),Za&&J.destroyStream(oc),rd&&J.destroyStream(tc),Tc&&J.destroyStream(Cc),me&&J.destroyStream(Yc),ve&&J.destroyStream(ye),ge&&J.destroyStream(te),Je&&J.destroyStream(yd),Rf.unbind(),dg&&Qc.destroyStream(tf)}ua.unbind();Da.dirty=!0;oa.setVAO(null);d&&(W.cpuTime+=performance.now()-f)},draw:function(b){var c,f,g,h,k,m,v,x,E,B,I,G,P,M,F,N,H,S,O,R,U,fa,Y,Z,da,
Ca,na,za,ua,qa,la,ka,La,ub,Xa,pa,Oa,Bb,Sa,Vb,cb,Yb,Rb,mb,bc,Sb,Ta,Tb,Na,nb,vb,gb,Pa,qc,Ib,Eb,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,Id,me,Yc,ue,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ze,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Oe,Pe,Le,oe;c=D.next;c!==D.cur&&(c?w.bindFramebuffer(36160,
c.framebuffer):w.bindFramebuffer(36160,null),D.cur=c);if(Da.dirty){var Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf,qf,nf,rf;Be=ta.dither;Be!==Da.dither&&(Be?w.enable(3024):w.disable(3024),Da.dither=Be);Ge=ca[0];He=ca[1];if(Ge!==T[0]||He!==T[1])w.blendEquationSeparate(Ge,He),T[0]=Ge,T[1]=He;Ie=ta.depth_func;Ie!==Da.depth_func&&(w.depthFunc(Ie),Da.depth_func=Ie);Ce=X[0];Ed=X[1];if(Ce!==p[0]||Ed!==p[1])w.depthRange(Ce,Ed),p[0]=Ce,p[1]=Ed;Od=ta.depth_mask;
Od!==Da.depth_mask&&(w.depthMask(Od),Da.depth_mask=Od);Ud=l[0];Xd=l[1];Je=l[2];yd=l[3];if(Ud!==lc[0]||Xd!==lc[1]||Je!==lc[2]||yd!==lc[3])w.colorMask(Ud,Xd,Je,yd),lc[0]=Ud,lc[1]=Xd,lc[2]=Je,lc[3]=yd;Ld=ta.cull_enable;Ld!==Da.cull_enable&&(Ld?w.enable(2884):w.disable(2884),Da.cull_enable=Ld);ze=ta.cull_face;ze!==Da.cull_face&&(w.cullFace(ze),Da.cull_face=ze);Ke=ta.frontFace;Ke!==Da.frontFace&&(w.frontFace(Ke),Da.frontFace=Ke);ff=ta.lineWidth;ff!==Da.lineWidth&&(w.lineWidth(ff),Da.lineWidth=ff);Xe=ta.polygonOffset_enable;
Xe!==Da.polygonOffset_enable&&(Xe?w.enable(32823):w.disable(32823),Da.polygonOffset_enable=Xe);Qe=Hb[0];Me=Hb[1];if(Qe!==zb[0]||Me!==zb[1])w.polygonOffset(Qe,Me),zb[0]=Qe,zb[1]=Me;We=ta.sample_alpha;We!==Da.sample_alpha&&(We?w.enable(32926):w.disable(32926),Da.sample_alpha=We);Ue=ta.sample_enable;Ue!==Da.sample_enable&&(Ue?w.enable(32928):w.disable(32928),Da.sample_enable=Ue);Re=Ve[0];Se=Ve[1];if(Re!==ke[0]||Se!==ke[1])w.sampleCoverage(Re,Se),ke[0]=Re,ke[1]=Se;Md=ta.stencil_mask;Md!==Da.stencil_mask&&
(w.stencilMask(Md),Da.stencil_mask=Md);Rd=bd[0];Te=bd[1];gf=bd[2];if(Rd!==pe[0]||Te!==pe[1]||gf!==pe[2])w.stencilFunc(Rd,Te,gf),pe[0]=Rd,pe[1]=Te,pe[2]=gf;mf=re[0];cf=re[1];hf=re[2];jf=re[3];if(mf!==Fd[0]||cf!==Fd[1]||hf!==Fd[2]||jf!==Fd[3])w.stencilOpSeparate(mf,cf,hf,jf),Fd[0]=mf,Fd[1]=cf,Fd[2]=hf,Fd[3]=jf;kf=td[0];qf=td[1];nf=td[2];rf=td[3];if(kf!==de[0]||qf!==de[1]||nf!==de[2]||rf!==de[3])w.stencilOpSeparate(kf,qf,nf,rf),de[0]=kf,de[1]=qf,de[2]=nf,de[3]=rf}f=b.viewport;g=f.x|0;h=f.y|0;k="width"in
f?f.width|0:ia.framebufferWidth-g;m="height"in f?f.height|0:ia.framebufferHeight-h;v=ia.viewportWidth;ia.viewportWidth=k;x=ia.viewportHeight;ia.viewportHeight=m;w.viewport(g,h,k,m);Vd[0]=g;Vd[1]=h;Vd[2]=k;Vd[3]=m;w.blendColor(0,0,0,1);z[0]=0;z[1]=0;z[2]=0;z[3]=1;w.enable(3042);Da.blend_enable=!0;w.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;w.disable(2929);Da.depth_enable=!1;E=b.viewport;B=E.x|0;I=E.y|0;G="width"in E?E.width|0:ia.framebufferWidth-B;P="height"in E?E.height|
0:ia.framebufferHeight-I;w.scissor(B,I,G,P);$d[0]=B;$d[1]=I;$d[2]=G;$d[3]=P;w.enable(3089);Da.scissor_enable=!0;w.disable(2960);Da.stencil_enable=!1;if(M=Da.profile)F=performance.now(),W.count++;w.useProgram(n.program);N=xc.angle_instanced_arrays;oa.setVAO(null);H=A.call(this,ia,b,0);S=!1;O=null;R=0;U=!1;Y=fa=0;Z=1;da=0;Ca=5126;qa=ua=za=na=0;ga(H)?(S=!0,O=J.createStream(34962,H),Ca=O.dtype):(O=J.getBuffer(H))?Ca=O.dtype:"constant"in H?(Z=2,"number"===typeof H.constant?(za=H.constant,ua=qa=na=0):(za=
0<H.constant.length?H.constant[0]:0,ua=1<H.constant.length?H.constant[1]:0,qa=2<H.constant.length?H.constant[2]:0,na=3<H.constant.length?H.constant[3]:0)):(O=ga(H.buffer)?J.createStream(34962,H.buffer):J.getBuffer(H.buffer),Ca="type"in H?ee[H.type]:O.dtype,U=!!H.normalized,Y=H.size|0,fa=H.offset|0,da=H.stride|0,R=H.divisor|0);la=pc.location;ka=aa[la];if(1===Z){ka.buffer||w.enableVertexAttribArray(la);La=Y||1;if(ka.type!==Ca||ka.size!==La||ka.buffer!==O||ka.normalized!==U||ka.offset!==fa||ka.stride!==
da)w.bindBuffer(34962,O.buffer),w.vertexAttribPointer(la,La,Ca,U,da,fa),ka.type=Ca,ka.size=La,ka.buffer=O,ka.normalized=U,ka.offset=fa,ka.stride=da;ka.divisor!==R&&(N.vertexAttribDivisorANGLE(la,R),ka.divisor=R)}else if(ka.buffer&&(w.disableVertexAttribArray(la),ka.buffer=null),ka.x!==za||ka.y!==ua||ka.z!==qa||ka.w!==na)w.vertexAttrib4f(la,za,ua,qa,na),ka.x=za,ka.y=ua,ka.z=qa,ka.w=na;ub=e.call(this,ia,b,0);Xa=!1;pa=null;Oa=0;Bb=!1;Vb=Sa=0;cb=1;Yb=0;Rb=5126;Ta=Sb=bc=mb=0;ga(ub)?(Xa=!0,pa=J.createStream(34962,
ub),Rb=pa.dtype):(pa=J.getBuffer(ub))?Rb=pa.dtype:"constant"in ub?(cb=2,"number"===typeof ub.constant?(bc=ub.constant,Sb=Ta=mb=0):(bc=0<ub.constant.length?ub.constant[0]:0,Sb=1<ub.constant.length?ub.constant[1]:0,Ta=2<ub.constant.length?ub.constant[2]:0,mb=3<ub.constant.length?ub.constant[3]:0)):(pa=ga(ub.buffer)?J.createStream(34962,ub.buffer):J.getBuffer(ub.buffer),Rb="type"in ub?ee[ub.type]:pa.dtype,Bb=!!ub.normalized,Vb=ub.size|0,Sa=ub.offset|0,Yb=ub.stride|0,Oa=ub.divisor|0);Tb=ud.location;Na=
aa[Tb];if(1===cb){Na.buffer||w.enableVertexAttribArray(Tb);nb=Vb||1;if(Na.type!==Rb||Na.size!==nb||Na.buffer!==pa||Na.normalized!==Bb||Na.offset!==Sa||Na.stride!==Yb)w.bindBuffer(34962,pa.buffer),w.vertexAttribPointer(Tb,nb,Rb,Bb,Yb,Sa),Na.type=Rb,Na.size=nb,Na.buffer=pa,Na.normalized=Bb,Na.offset=Sa,Na.stride=Yb;Na.divisor!==Oa&&(N.vertexAttribDivisorANGLE(Tb,Oa),Na.divisor=Oa)}else if(Na.buffer&&(w.disableVertexAttribArray(Tb),Na.buffer=null),Na.x!==bc||Na.y!==Sb||Na.z!==Ta||Na.w!==mb)w.vertexAttrib4f(Tb,
bc,Sb,Ta,mb),Na.x=bc,Na.y=Sb,Na.z=Ta,Na.w=mb;vb=d.call(this,ia,b,0);gb=!1;Pa=null;qc=0;Ib=!1;db=Eb=0;nc=1;Hc=0;kc=5126;ob=sa=jb=ib=0;ga(vb)?(gb=!0,Pa=J.createStream(34962,vb),kc=Pa.dtype):(Pa=J.getBuffer(vb))?kc=Pa.dtype:"constant"in vb?(nc=2,"number"===typeof vb.constant?(jb=vb.constant,sa=ob=ib=0):(jb=0<vb.constant.length?vb.constant[0]:0,sa=1<vb.constant.length?vb.constant[1]:0,ob=2<vb.constant.length?vb.constant[2]:0,ib=3<vb.constant.length?vb.constant[3]:0)):(Pa=ga(vb.buffer)?J.createStream(34962,
vb.buffer):J.getBuffer(vb.buffer),kc="type"in vb?ee[vb.type]:Pa.dtype,Ib=!!vb.normalized,db=vb.size|0,Eb=vb.offset|0,Hc=vb.stride|0,qc=vb.divisor|0);va=mc.location;Va=aa[va];if(1===nc){Va.buffer||w.enableVertexAttribArray(va);ab=db||1;if(Va.type!==kc||Va.size!==ab||Va.buffer!==Pa||Va.normalized!==Ib||Va.offset!==Eb||Va.stride!==Hc)w.bindBuffer(34962,Pa.buffer),w.vertexAttribPointer(va,ab,kc,Ib,Hc,Eb),Va.type=kc,Va.size=ab,Va.buffer=Pa,Va.normalized=Ib,Va.offset=Eb,Va.stride=Hc;Va.divisor!==qc&&(N.vertexAttribDivisorANGLE(va,
qc),Va.divisor=qc)}else if(Va.buffer&&(w.disableVertexAttribArray(va),Va.buffer=null),Va.x!==jb||Va.y!==sa||Va.z!==ob||Va.w!==ib)w.vertexAttrib4f(va,jb,sa,ob,ib),Va.x=jb,Va.y=sa,Va.z=ob,Va.w=ib;Aa=q.call(this,ia,b,0);eb=!1;Ia=null;Cb=0;Ab=!1;Kc=Ra=0;Jb=1;Lb=0;Ub=5126;Ob=Ka=Td=xa=0;ga(Aa)?(eb=!0,Ia=J.createStream(34962,Aa),Ub=Ia.dtype):(Ia=J.getBuffer(Aa))?Ub=Ia.dtype:"constant"in Aa?(Jb=2,"number"===typeof Aa.constant?(Td=Aa.constant,Ka=Ob=xa=0):(Td=0<Aa.constant.length?Aa.constant[0]:0,Ka=1<Aa.constant.length?
Aa.constant[1]:0,Ob=2<Aa.constant.length?Aa.constant[2]:0,xa=3<Aa.constant.length?Aa.constant[3]:0)):(Ia=ga(Aa.buffer)?J.createStream(34962,Aa.buffer):J.getBuffer(Aa.buffer),Ub="type"in Aa?ee[Aa.type]:Ia.dtype,Ab=!!Aa.normalized,Kc=Aa.size|0,Ra=Aa.offset|0,Lb=Aa.stride|0,Cb=Aa.divisor|0);fb=wc.location;hb=aa[fb];if(1===Jb){hb.buffer||w.enableVertexAttribArray(fb);ya=Kc||1;if(hb.type!==Ub||hb.size!==ya||hb.buffer!==Ia||hb.normalized!==Ab||hb.offset!==Ra||hb.stride!==Lb)w.bindBuffer(34962,Ia.buffer),
w.vertexAttribPointer(fb,ya,Ub,Ab,Lb,Ra),hb.type=Ub,hb.size=ya,hb.buffer=Ia,hb.normalized=Ab,hb.offset=Ra,hb.stride=Lb;hb.divisor!==Cb&&(N.vertexAttribDivisorANGLE(fb,Cb),hb.divisor=Cb)}else if(hb.buffer&&(w.disableVertexAttribArray(fb),hb.buffer=null),hb.x!==Td||hb.y!==Ka||hb.z!==Ob||hb.w!==xa)w.vertexAttrib4f(fb,Td,Ka,Ob,xa),hb.x=Td,hb.y=Ka,hb.z=Ob,hb.w=xa;fc=a.call(this,ia,b,0);Ea=!1;pb=null;qb=0;Ya=!1;oc=Za=0;cd=1;uc=0;Wa=5126;yc=Ga=dd=Mb=0;ga(fc)?(Ea=!0,pb=J.createStream(34962,fc),Wa=pb.dtype):
(pb=J.getBuffer(fc))?Wa=pb.dtype:"constant"in fc?(cd=2,"number"===typeof fc.constant?(dd=fc.constant,Ga=yc=Mb=0):(dd=0<fc.constant.length?fc.constant[0]:0,Ga=1<fc.constant.length?fc.constant[1]:0,yc=2<fc.constant.length?fc.constant[2]:0,Mb=3<fc.constant.length?fc.constant[3]:0)):(pb=ga(fc.buffer)?J.createStream(34962,fc.buffer):J.getBuffer(fc.buffer),Wa="type"in fc?ee[fc.type]:pb.dtype,Ya=!!fc.normalized,oc=fc.size|0,Za=fc.offset|0,uc=fc.stride|0,qb=fc.divisor|0);Qa=ea.location;Ba=aa[Qa];if(1===cd){Ba.buffer||
w.enableVertexAttribArray(Qa);kb=oc||1;if(Ba.type!==Wa||Ba.size!==kb||Ba.buffer!==pb||Ba.normalized!==Ya||Ba.offset!==Za||Ba.stride!==uc)w.bindBuffer(34962,pb.buffer),w.vertexAttribPointer(Qa,kb,Wa,Ya,uc,Za),Ba.type=Wa,Ba.size=kb,Ba.buffer=pb,Ba.normalized=Ya,Ba.offset=Za,Ba.stride=uc;Ba.divisor!==qb&&(N.vertexAttribDivisorANGLE(Qa,qb),Ba.divisor=qb)}else if(Ba.buffer&&(w.disableVertexAttribArray(Qa),Ba.buffer=null),Ba.x!==dd||Ba.y!==Ga||Ba.z!==yc||Ba.w!==Mb)w.vertexAttrib4f(Qa,dd,Ga,yc,Mb),Ba.x=
dd,Ba.y=Ga,Ba.z=yc,Ba.w=Mb;wb=t.call(this,ia,b,0);Db=!1;rb=null;vc=0;xb=!1;tc=rd=0;Gd=1;Mc=0;id=5126;Pb=dc=Wb=ed=0;ga(wb)?(Db=!0,rb=J.createStream(34962,wb),id=rb.dtype):(rb=J.getBuffer(wb))?id=rb.dtype:"constant"in wb?(Gd=2,"number"===typeof wb.constant?(Wb=wb.constant,dc=Pb=ed=0):(Wb=0<wb.constant.length?wb.constant[0]:0,dc=1<wb.constant.length?wb.constant[1]:0,Pb=2<wb.constant.length?wb.constant[2]:0,ed=3<wb.constant.length?wb.constant[3]:0)):(rb=ga(wb.buffer)?J.createStream(34962,wb.buffer):J.getBuffer(wb.buffer),
id="type"in wb?ee[wb.type]:rb.dtype,xb=!!wb.normalized,tc=wb.size|0,rd=wb.offset|0,Mc=wb.stride|0,vc=wb.divisor|0);Ha=Ja.location;$b=aa[Ha];if(1===Gd){$b.buffer||w.enableVertexAttribArray(Ha);lb=tc||1;if($b.type!==id||$b.size!==lb||$b.buffer!==rb||$b.normalized!==xb||$b.offset!==rd||$b.stride!==Mc)w.bindBuffer(34962,rb.buffer),w.vertexAttribPointer(Ha,lb,id,xb,Mc,rd),$b.type=id,$b.size=lb,$b.buffer=rb,$b.normalized=xb,$b.offset=rd,$b.stride=Mc;$b.divisor!==vc&&(N.vertexAttribDivisorANGLE(Ha,vc),$b.divisor=
vc)}else if($b.buffer&&(w.disableVertexAttribArray(Ha),$b.buffer=null),$b.x!==Wb||$b.y!==dc||$b.z!==Pb||$b.w!==ed)w.vertexAttrib4f(Ha,Wb,dc,Pb,ed),$b.x=Wb,$b.y=dc,$b.z=Pb,$b.w=ed;yb=y.call(this,ia,b,0);Nb=!1;Qb=null;gc=0;ic=!1;Cc=Tc=0;Dc=1;Ec=0;Nc=5126;Kb=Oc=Uc=ad=0;ga(yb)?(Nb=!0,Qb=J.createStream(34962,yb),Nc=Qb.dtype):(Qb=J.getBuffer(yb))?Nc=Qb.dtype:"constant"in yb?(Dc=2,"number"===typeof yb.constant?(Uc=yb.constant,Oc=Kb=ad=0):(Uc=0<yb.constant.length?yb.constant[0]:0,Oc=1<yb.constant.length?
yb.constant[1]:0,Kb=2<yb.constant.length?yb.constant[2]:0,ad=3<yb.constant.length?yb.constant[3]:0)):(Qb=ga(yb.buffer)?J.createStream(34962,yb.buffer):J.getBuffer(yb.buffer),Nc="type"in yb?ee[yb.type]:Qb.dtype,ic=!!yb.normalized,Cc=yb.size|0,Tc=yb.offset|0,Ec=yb.stride|0,gc=yb.divisor|0);Gb=Q.location;Pc=aa[Gb];if(1===Dc){Pc.buffer||w.enableVertexAttribArray(Gb);Ic=Cc||4;if(Pc.type!==Nc||Pc.size!==Ic||Pc.buffer!==Qb||Pc.normalized!==ic||Pc.offset!==Tc||Pc.stride!==Ec)w.bindBuffer(34962,Qb.buffer),
w.vertexAttribPointer(Gb,Ic,Nc,ic,Ec,Tc),Pc.type=Nc,Pc.size=Ic,Pc.buffer=Qb,Pc.normalized=ic,Pc.offset=Tc,Pc.stride=Ec;Pc.divisor!==gc&&(N.vertexAttribDivisorANGLE(Gb,gc),Pc.divisor=gc)}else if(Pc.buffer&&(w.disableVertexAttribArray(Gb),Pc.buffer=null),Pc.x!==Uc||Pc.y!==Oc||Pc.z!==Kb||Pc.w!==ad)w.vertexAttrib4f(Gb,Uc,Oc,Kb,ad),Pc.x=Uc,Pc.y=Oc,Pc.z=Kb,Pc.w=ad;Vc=C.call(this,ia,b,0);hc=!1;Xc=null;fd=0;Id=!1;Yc=me=0;ue=1;he=0;se=5126;Bd=Dd=Qd=qe=0;ga(Vc)?(hc=!0,Xc=J.createStream(34962,Vc),se=Xc.dtype):
(Xc=J.getBuffer(Vc))?se=Xc.dtype:"constant"in Vc?(ue=2,"number"===typeof Vc.constant?(Qd=Vc.constant,Dd=Bd=qe=0):(Qd=0<Vc.constant.length?Vc.constant[0]:0,Dd=1<Vc.constant.length?Vc.constant[1]:0,Bd=2<Vc.constant.length?Vc.constant[2]:0,qe=3<Vc.constant.length?Vc.constant[3]:0)):(Xc=ga(Vc.buffer)?J.createStream(34962,Vc.buffer):J.getBuffer(Vc.buffer),se="type"in Vc?ee[Vc.type]:Xc.dtype,Id=!!Vc.normalized,Yc=Vc.size|0,me=Vc.offset|0,he=Vc.stride|0,fd=Vc.divisor|0);hd=Zb.location;Fc=aa[hd];if(1===ue){Fc.buffer||
w.enableVertexAttribArray(hd);nd=Yc||4;if(Fc.type!==se||Fc.size!==nd||Fc.buffer!==Xc||Fc.normalized!==Id||Fc.offset!==me||Fc.stride!==he)w.bindBuffer(34962,Xc.buffer),w.vertexAttribPointer(hd,nd,se,Id,he,me),Fc.type=se,Fc.size=nd,Fc.buffer=Xc,Fc.normalized=Id,Fc.offset=me,Fc.stride=he;Fc.divisor!==fd&&(N.vertexAttribDivisorANGLE(hd,fd),Fc.divisor=fd)}else if(Fc.buffer&&(w.disableVertexAttribArray(hd),Fc.buffer=null),Fc.x!==Qd||Fc.y!==Dd||Fc.z!==Bd||Fc.w!==qe)w.vertexAttrib4f(hd,Qd,Dd,Bd,qe),Fc.x=
Qd,Fc.y=Dd,Fc.z=Bd,Fc.w=qe;jd=K.call(this,ia,b,0);Zc=!1;kd=null;zd=0;Ad=!1;ye=ve=0;Ze=1;ce=0;ae=5126;fe=Wd=Fe=Zd=0;ga(jd)?(Zc=!0,kd=J.createStream(34962,jd),ae=kd.dtype):(kd=J.getBuffer(jd))?ae=kd.dtype:"constant"in jd?(Ze=2,"number"===typeof jd.constant?(Fe=jd.constant,Wd=fe=Zd=0):(Fe=0<jd.constant.length?jd.constant[0]:0,Wd=1<jd.constant.length?jd.constant[1]:0,fe=2<jd.constant.length?jd.constant[2]:0,Zd=3<jd.constant.length?jd.constant[3]:0)):(kd=ga(jd.buffer)?J.createStream(34962,jd.buffer):J.getBuffer(jd.buffer),
ae="type"in jd?ee[jd.type]:kd.dtype,Ad=!!jd.normalized,ye=jd.size|0,ve=jd.offset|0,ce=jd.stride|0,zd=jd.divisor|0);zc=ha.location;Wc=aa[zc];if(1===Ze){Wc.buffer||w.enableVertexAttribArray(zc);ne=ye||1;if(Wc.type!==ae||Wc.size!==ne||Wc.buffer!==kd||Wc.normalized!==Ad||Wc.offset!==ve||Wc.stride!==ce)w.bindBuffer(34962,kd.buffer),w.vertexAttribPointer(zc,ne,ae,Ad,ce,ve),Wc.type=ae,Wc.size=ne,Wc.buffer=kd,Wc.normalized=Ad,Wc.offset=ve,Wc.stride=ce;Wc.divisor!==zd&&(N.vertexAttribDivisorANGLE(zc,zd),Wc.divisor=
zd)}else if(Wc.buffer&&(w.disableVertexAttribArray(zc),Wc.buffer=null),Wc.x!==Fe||Wc.y!==Wd||Wc.z!==fe||Wc.w!==Zd)w.vertexAttrib4f(zc,Fe,Wd,fe,Zd),Wc.x=Fe,Wc.y=Wd,Wc.z=fe,Wc.w=Zd;w.uniform1i(u.location,!1);w.uniform1f(bb.location,ia.pixelRatio);ie=b.scale;w.uniform2f(V.location,ie[0],ie[1]);Cd=b.scaleFract;w.uniform2f(sb.location,Cd[0],Cd[1]);Hd=b.translate;w.uniform2f(ra.location,Hd[0],Hd[1]);Jd=b.translateFract;w.uniform2f(ec.location,Jd[0],Jd[1]);Kd=L.call(this,ia,b,0);w.uniform2f(Ma.location,
Kd[0],Kd[1]);w.uniform1f(Fa.location,b.opacity);w.uniform1i(ac.location,r.bind());(ge=b.markerTexture)&&"framebuffer"===ge._reglType&&(ge=ge.color[0]);te=ge._texture;w.uniform1i(ba.location,te.bind());we=b.elements;je=null;(je=(Oe=ga(we))?Qc.createStream(we):Qc.getElements(we))&&w.bindBuffer(34963,je.buffer.buffer);Pe=b.offset;if(Le=b.count)oe=tb.instances,0<oe?je?N.drawElementsInstancedANGLE(0,Le,je.type,Pe<<(je.type-5121>>1),oe):N.drawArraysInstancedANGLE(0,Pe,Le,oe):0>oe&&(je?w.drawElements(0,
Le,je.type,Pe<<(je.type-5121>>1)):w.drawArrays(0,Pe,Le)),Da.dirty=!0,oa.setVAO(null),ia.viewportWidth=v,ia.viewportHeight=x,M&&(W.cpuTime+=performance.now()-F),S&&J.destroyStream(O),Xa&&J.destroyStream(pa),gb&&J.destroyStream(Pa),eb&&J.destroyStream(Ia),Ea&&J.destroyStream(pb),Db&&J.destroyStream(rb),Nb&&J.destroyStream(Qb),hc&&J.destroyStream(Xc),Zc&&J.destroyStream(kd),r.unbind(),te.unbind(),Oe&&Qc.destroyStream(je)},scope:function(a,c,d){var e,l,n,p,q,t,w,u,z,r,A,D,y,H,C,M,K,N,L,aa,ca,Q,X,T,R,
V,Z,ja,ba,ma,ea,ha,wa,pa,oa,ra,ua,qa,la,Fa,Ja,Ma,zb,Oa,wc,Hb,Na,nb,vb,gb,Pa,bb,Ib,sb,db,lc,mb,ud,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Ta,Jb,Lb,Ub,xa,Zb,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,Eb,uc,Wa,Mb,ec,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,ac,tc,pc,Mc,mc,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,td,xc,Yc,bd,$d,Vd,Fd,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,de,pe,re,ce,ae,Zd,ke,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Oe,Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,
Ke,Ve,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf,qf,nf,rf,Af,Bf,Ne,Ae,of,pf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;e=a.viewport;l=e.x|0;n=e.y|0;p="width"in e?e.width|0:ia.framebufferWidth-l;q="height"in e?e.height|0:ia.framebufferHeight-n;t=ia.viewportWidth;ia.viewportWidth=p;w=ia.viewportHeight;ia.viewportHeight=
q;u=Id[0];Id[0]=l;z=Id[1];Id[1]=n;r=Id[2];Id[2]=p;A=Id[3];Id[3]=q;D=E[0];E[0]=0;y=E[1];E[1]=0;H=E[2];E[2]=0;C=E[3];E[3]=1;M=ta.blend_enable;ta.blend_enable=!0;K=za[0];za[0]=770;N=za[1];za[1]=771;L=za[2];za[2]=773;aa=za[3];za[3]=1;ca=ta.depth_enable;ta.depth_enable=!1;Q=a.viewport;X=Q.x|0;T=Q.y|0;R="width"in Q?Q.width|0:ia.framebufferWidth-X;V="height"in Q?Q.height|0:ia.framebufferHeight-T;Z=ue[0];ue[0]=X;ja=ue[1];ue[1]=T;ba=ue[2];ue[2]=R;ma=ue[3];ue[3]=V;ea=ta.scissor_enable;ta.scissor_enable=!0;
ha=ta.stencil_enable;ta.stencil_enable=!1;if(wa=Da.profile)pa=performance.now(),W.count++;oa=a.elements;ra=null;ra=(ua=ga(oa))?Qc.createStream(oa):Qc.getElements(oa);qa=tb.elements;tb.elements=ra;la=a.offset;Fa=tb.offset;tb.offset=la;Ja=a.count;Ma=tb.count;tb.count=Ja;zb=tb.primitive;tb.primitive=0;Oa=fa[45];fa[45]=!1;wc=a.markerTexture;Hb=fa[48];fa[48]=wc;Na=a.opacity;nb=fa[10];fa[10]=Na;vb=B.call(this,ia,a,d);gb=fa[46];fa[46]=vb;Pa=fa[47];fa[47]=F;bb=ia.pixelRatio;Ib=fa[34];fa[34]=bb;sb=a.scale;
db=fa[6];fa[6]=sb;lc=a.scaleFract;mb=fa[7];fa[7]=lc;ud=a.translate;ib=fa[8];fa[8]=ud;jb=a.translateFract;sa=fa[9];fa[9]=jb;ob=x.call(this,ia,a,d);va=!1;Va=null;ab=0;Aa=!1;Ia=eb=0;Cb=1;Ab=0;Ra=5126;Ub=Lb=Jb=Ta=0;ga(ob)?(va=!0,Va=J.createStream(34962,ob),Ra=Va.dtype):(Va=J.getBuffer(ob))?Ra=Va.dtype:"constant"in ob?(Cb=2,"number"===typeof ob.constant?(Jb=ob.constant,Lb=Ub=Ta=0):(Jb=0<ob.constant.length?ob.constant[0]:0,Lb=1<ob.constant.length?ob.constant[1]:0,Ub=2<ob.constant.length?ob.constant[2]:
0,Ta=3<ob.constant.length?ob.constant[3]:0)):(Va=ga(ob.buffer)?J.createStream(34962,ob.buffer):J.getBuffer(ob.buffer),Ra="type"in ob?ee[ob.type]:Va.dtype,Aa=!!ob.normalized,Ia=ob.size|0,eb=ob.offset|0,Ab=ob.stride|0,ab=ob.divisor|0);xa=G.buffer;G.buffer=Va;Zb=G.divisor;G.divisor=ab;Ka=G.normalized;G.normalized=Aa;Ob=G.offset;G.offset=eb;fb=G.size;G.size=Ia;hb=G.state;G.state=Cb;ya=G.stride;G.stride=Ab;fc=G.type;G.type=Ra;Ea=G.w;G.w=Ta;pb=G.x;G.x=Jb;qb=G.y;G.y=Lb;Ya=G.z;G.z=Ub;Za=ka.call(this,ia,a,
d);oc=!1;Eb=null;uc=0;Wa=!1;ec=Mb=0;Ga=1;yc=0;Qa=5126;Db=wb=kb=Ba=0;ga(Za)?(oc=!0,Eb=J.createStream(34962,Za),Qa=Eb.dtype):(Eb=J.getBuffer(Za))?Qa=Eb.dtype:"constant"in Za?(Ga=2,"number"===typeof Za.constant?(kb=Za.constant,wb=Db=Ba=0):(kb=0<Za.constant.length?Za.constant[0]:0,wb=1<Za.constant.length?Za.constant[1]:0,Db=2<Za.constant.length?Za.constant[2]:0,Ba=3<Za.constant.length?Za.constant[3]:0)):(Eb=ga(Za.buffer)?J.createStream(34962,Za.buffer):J.getBuffer(Za.buffer),Qa="type"in Za?ee[Za.type]:
Eb.dtype,Wa=!!Za.normalized,ec=Za.size|0,Mb=Za.offset|0,yc=Za.stride|0,uc=Za.divisor|0);rb=O.buffer;O.buffer=Eb;vc=O.divisor;O.divisor=uc;xb=O.normalized;O.normalized=Wa;ac=O.offset;O.offset=Mb;tc=O.size;O.size=ec;pc=O.state;O.state=Ga;Mc=O.stride;O.stride=yc;mc=O.type;O.type=Qa;ed=O.w;O.w=Ba;Wb=O.x;O.x=kb;dc=O.y;O.y=wb;Pb=O.z;O.z=Db;Ha=Ca.call(this,ia,a,d);$b=!1;lb=null;yb=0;Nb=!1;gc=Qb=0;ic=1;Tc=0;Cc=5126;ad=Nc=Ec=Dc=0;ga(Ha)?($b=!0,lb=J.createStream(34962,Ha),Cc=lb.dtype):(lb=J.getBuffer(Ha))?
Cc=lb.dtype:"constant"in Ha?(ic=2,"number"===typeof Ha.constant?(Ec=Ha.constant,Nc=ad=Dc=0):(Ec=0<Ha.constant.length?Ha.constant[0]:0,Nc=1<Ha.constant.length?Ha.constant[1]:0,ad=2<Ha.constant.length?Ha.constant[2]:0,Dc=3<Ha.constant.length?Ha.constant[3]:0)):(lb=ga(Ha.buffer)?J.createStream(34962,Ha.buffer):J.getBuffer(Ha.buffer),Cc="type"in Ha?ee[Ha.type]:lb.dtype,Nb=!!Ha.normalized,gc=Ha.size|0,Qb=Ha.offset|0,Tc=Ha.stride|0,yb=Ha.divisor|0);Uc=h.buffer;h.buffer=lb;Oc=h.divisor;h.divisor=yb;Kb=h.normalized;
h.normalized=Nb;Gb=h.offset;h.offset=Qb;Pc=h.size;h.size=gc;Ic=h.state;h.state=ic;Vc=h.stride;h.stride=Tc;hc=h.type;h.type=Cc;Xc=h.w;h.w=Dc;fd=h.x;h.x=Ec;td=h.y;h.y=Nc;xc=h.z;h.z=ad;Yc=g.call(this,ia,a,d);bd=!1;$d=null;Vd=0;Fd=!1;Dd=Qd=0;Bd=1;hd=0;Fc=5126;kd=Zc=jd=nd=0;ga(Yc)?(bd=!0,$d=J.createStream(34962,Yc),Fc=$d.dtype):($d=J.getBuffer(Yc))?Fc=$d.dtype:"constant"in Yc?(Bd=2,"number"===typeof Yc.constant?(jd=Yc.constant,Zc=kd=nd=0):(jd=0<Yc.constant.length?Yc.constant[0]:0,Zc=1<Yc.constant.length?
Yc.constant[1]:0,kd=2<Yc.constant.length?Yc.constant[2]:0,nd=3<Yc.constant.length?Yc.constant[3]:0)):($d=ga(Yc.buffer)?J.createStream(34962,Yc.buffer):J.getBuffer(Yc.buffer),Fc="type"in Yc?ee[Yc.type]:$d.dtype,Fd=!!Yc.normalized,Dd=Yc.size|0,Qd=Yc.offset|0,hd=Yc.stride|0,Vd=Yc.divisor|0);zd=f.buffer;f.buffer=$d;Ad=f.divisor;f.divisor=Vd;de=f.normalized;f.normalized=Fd;pe=f.offset;f.offset=Qd;re=f.size;f.size=Dd;ce=f.state;f.state=Bd;ae=f.stride;f.stride=hd;Zd=f.type;f.type=Fc;ke=f.w;f.w=nd;Wd=f.x;
f.x=jd;fe=f.y;f.y=Zc;zc=f.z;f.z=kd;Wc=v.call(this,ia,a,d);ne=!1;ie=null;Cd=0;Hd=!1;Kd=Jd=0;ge=1;te=0;we=5126;Le=Pe=Oe=je=0;ga(Wc)?(ne=!0,ie=J.createStream(34962,Wc),we=ie.dtype):(ie=J.getBuffer(Wc))?we=ie.dtype:"constant"in Wc?(ge=2,"number"===typeof Wc.constant?(Oe=Wc.constant,Pe=Le=je=0):(Oe=0<Wc.constant.length?Wc.constant[0]:0,Pe=1<Wc.constant.length?Wc.constant[1]:0,Le=2<Wc.constant.length?Wc.constant[2]:0,je=3<Wc.constant.length?Wc.constant[3]:0)):(ie=ga(Wc.buffer)?J.createStream(34962,Wc.buffer):
J.getBuffer(Wc.buffer),we="type"in Wc?ee[Wc.type]:ie.dtype,Hd=!!Wc.normalized,Kd=Wc.size|0,Jd=Wc.offset|0,te=Wc.stride|0,Cd=Wc.divisor|0);oe=P.buffer;P.buffer=ie;Be=P.divisor;P.divisor=Cd;Ge=P.normalized;P.normalized=Hd;He=P.offset;P.offset=Jd;Ie=P.size;P.size=Kd;Ce=P.state;P.state=ge;Ed=P.stride;P.stride=te;Od=P.type;P.type=we;Ud=P.w;P.w=je;Xd=P.x;P.x=Oe;Je=P.y;P.y=Pe;yd=P.z;P.z=Le;Ld=S.call(this,ia,a,d);ze=!1;Ke=null;Ve=0;Xe=!1;Me=Qe=0;We=1;Ue=0;Re=5126;Te=Rd=Md=Se=0;ga(Ld)?(ze=!0,Ke=J.createStream(34962,
Ld),Re=Ke.dtype):(Ke=J.getBuffer(Ld))?Re=Ke.dtype:"constant"in Ld?(We=2,"number"===typeof Ld.constant?(Md=Ld.constant,Rd=Te=Se=0):(Md=0<Ld.constant.length?Ld.constant[0]:0,Rd=1<Ld.constant.length?Ld.constant[1]:0,Te=2<Ld.constant.length?Ld.constant[2]:0,Se=3<Ld.constant.length?Ld.constant[3]:0)):(Ke=ga(Ld.buffer)?J.createStream(34962,Ld.buffer):J.getBuffer(Ld.buffer),Re="type"in Ld?ee[Ld.type]:Ke.dtype,Xe=!!Ld.normalized,Me=Ld.size|0,Qe=Ld.offset|0,Ue=Ld.stride|0,Ve=Ld.divisor|0);gf=m.buffer;m.buffer=
Ke;mf=m.divisor;m.divisor=Ve;cf=m.normalized;m.normalized=Xe;hf=m.offset;m.offset=Qe;jf=m.size;m.size=Me;kf=m.state;m.state=We;qf=m.stride;m.stride=Ue;nf=m.type;m.type=Re;rf=m.w;m.w=Se;Af=m.x;m.x=Md;Bf=m.y;m.y=Rd;Ne=m.z;m.z=Te;Ae=na.call(this,ia,a,d);of=!1;pf=null;Cf=0;Ff=!1;Df=zf=0;Ef=1;vf=0;wf=5126;If=yf=xf=uf=0;ga(Ae)?(of=!0,pf=J.createStream(34962,Ae),wf=pf.dtype):(pf=J.getBuffer(Ae))?wf=pf.dtype:"constant"in Ae?(Ef=2,"number"===typeof Ae.constant?(xf=Ae.constant,yf=If=uf=0):(xf=0<Ae.constant.length?
Ae.constant[0]:0,yf=1<Ae.constant.length?Ae.constant[1]:0,If=2<Ae.constant.length?Ae.constant[2]:0,uf=3<Ae.constant.length?Ae.constant[3]:0)):(pf=ga(Ae.buffer)?J.createStream(34962,Ae.buffer):J.getBuffer(Ae.buffer),wf="type"in Ae?ee[Ae.type]:pf.dtype,Ff=!!Ae.normalized,Df=Ae.size|0,zf=Ae.offset|0,vf=Ae.stride|0,Cf=Ae.divisor|0);Kf=I.buffer;I.buffer=pf;Lf=I.divisor;I.divisor=Cf;Mf=I.normalized;I.normalized=Ff;sf=I.offset;I.offset=zf;Rf=I.size;I.size=Df;Gf=I.state;I.state=Ef;tf=I.stride;I.stride=vf;
dg=I.type;I.type=wf;Sf=I.w;I.w=uf;Tf=I.x;I.x=xf;qg=I.y;I.y=yf;df=I.z;I.z=If;$e=da.call(this,ia,a,d);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ga($e)?(Nf=!0,Of=J.createStream(34962,$e),Uf=Of.dtype):(Of=J.getBuffer($e))?Uf=Of.dtype:"constant"in $e?(ig=2,"number"===typeof $e.constant?(Yf=$e.constant,Zf=jg=Xf=0):(Yf=0<$e.constant.length?$e.constant[0]:0,Zf=1<$e.constant.length?$e.constant[1]:0,jg=2<$e.constant.length?$e.constant[2]:0,Xf=3<$e.constant.length?$e.constant[3]:0)):(Of=
ga($e.buffer)?J.createStream(34962,$e.buffer):J.getBuffer($e.buffer),Uf="type"in $e?ee[$e.type]:Of.dtype,fg=!!$e.normalized,hg=$e.size|0,gg=$e.offset|0,Wf=$e.stride|0,eg=$e.divisor|0);rg=b.buffer;b.buffer=Of;sg=b.divisor;b.divisor=eg;tg=b.normalized;b.normalized=fg;ug=b.offset;b.offset=gg;vg=b.size;b.size=hg;wg=b.state;b.state=ig;xg=b.stride;b.stride=Wf;yg=b.type;b.type=Uf;zg=b.w;b.w=Xf;Ag=b.x;b.x=Yf;Bg=b.y;b.y=Zf;ef=b.z;b.z=jg;af=k.call(this,ia,a,d);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=
5126;pg=cg=bg=ag=0;ga(af)?(Pf=!0,Qf=J.createStream(34962,af),Vf=Qf.dtype):(Qf=J.getBuffer(af))?Vf=Qf.dtype:"constant"in af?(og=2,"number"===typeof af.constant?(bg=af.constant,cg=pg=ag=0):(bg=0<af.constant.length?af.constant[0]:0,cg=1<af.constant.length?af.constant[1]:0,pg=2<af.constant.length?af.constant[2]:0,ag=3<af.constant.length?af.constant[3]:0)):(Qf=ga(af.buffer)?J.createStream(34962,af.buffer):J.getBuffer(af.buffer),Vf="type"in af?ee[af.type]:Qf.dtype,lg=!!af.normalized,ng=af.size|0,mg=af.offset|
0,$f=af.stride|0,kg=af.divisor|0);Cg=Y.buffer;Y.buffer=Qf;Dg=Y.divisor;Y.divisor=kg;Eg=Y.normalized;Y.normalized=lg;Fg=Y.offset;Y.offset=mg;Gg=Y.size;Y.size=ng;Hg=Y.state;Y.state=og;Ig=Y.stride;Y.stride=$f;Jg=Y.type;Y.type=Vf;Kg=Y.w;Y.w=ag;Lg=Y.x;Y.x=bg;Mg=Y.y;Y.y=cg;Ng=Y.z;Y.z=pg;Og=U.vert;U.vert=44;Pg=U.frag;U.frag=43;Da.dirty=!0;c(ia,a,d);ia.viewportWidth=t;ia.viewportHeight=w;Id[0]=u;Id[1]=z;Id[2]=r;Id[3]=A;E[0]=D;E[1]=y;E[2]=H;E[3]=C;ta.blend_enable=M;za[0]=K;za[1]=N;za[2]=L;za[3]=aa;ta.depth_enable=
ca;ue[0]=Z;ue[1]=ja;ue[2]=ba;ue[3]=ma;ta.scissor_enable=ea;ta.stencil_enable=ha;wa&&(W.cpuTime+=performance.now()-pa);ua&&Qc.destroyStream(ra);tb.elements=qa;tb.offset=Fa;tb.count=Ma;tb.primitive=zb;fa[45]=Oa;fa[48]=Hb;fa[10]=nb;fa[46]=gb;fa[47]=Pa;fa[34]=Ib;fa[6]=db;fa[7]=mb;fa[8]=ib;fa[9]=sa;va&&J.destroyStream(Va);G.buffer=xa;G.divisor=Zb;G.normalized=Ka;G.offset=Ob;G.size=fb;G.state=hb;G.stride=ya;G.type=fc;G.w=Ea;G.x=pb;G.y=qb;G.z=Ya;oc&&J.destroyStream(Eb);O.buffer=rb;O.divisor=vc;O.normalized=
xb;O.offset=ac;O.size=tc;O.state=pc;O.stride=Mc;O.type=mc;O.w=ed;O.x=Wb;O.y=dc;O.z=Pb;$b&&J.destroyStream(lb);h.buffer=Uc;h.divisor=Oc;h.normalized=Kb;h.offset=Gb;h.size=Pc;h.state=Ic;h.stride=Vc;h.type=hc;h.w=Xc;h.x=fd;h.y=td;h.z=xc;bd&&J.destroyStream($d);f.buffer=zd;f.divisor=Ad;f.normalized=de;f.offset=pe;f.size=re;f.state=ce;f.stride=ae;f.type=Zd;f.w=ke;f.x=Wd;f.y=fe;f.z=zc;ne&&J.destroyStream(ie);P.buffer=oe;P.divisor=Be;P.normalized=Ge;P.offset=He;P.size=Ie;P.state=Ce;P.stride=Ed;P.type=Od;
P.w=Ud;P.x=Xd;P.y=Je;P.z=yd;ze&&J.destroyStream(Ke);m.buffer=gf;m.divisor=mf;m.normalized=cf;m.offset=hf;m.size=jf;m.state=kf;m.stride=qf;m.type=nf;m.w=rf;m.x=Af;m.y=Bf;m.z=Ne;of&&J.destroyStream(pf);I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=sf;I.size=Rf;I.state=Gf;I.stride=tf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=df;Nf&&J.destroyStream(Of);b.buffer=rg;b.divisor=sg;b.normalized=tg;b.offset=ug;b.size=vg;b.state=wg;b.stride=xg;b.type=yg;b.w=zg;b.x=Ag;b.y=Bg;b.z=ef;Pf&&J.destroyStream(Qf);Y.buffer=
Cg;Y.divisor=Dg;Y.normalized=Eg;Y.offset=Fg;Y.size=Gg;Y.state=Hg;Y.stride=Ig;Y.type=Jg;Y.w=Kg;Y.x=Lg;Y.y=Mg;Y.z=Ng;U.vert=Og;U.frag=Pg;Da.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,y,n,A,e,d,q,a,t,C,wa,K,L,r,B,F,x,G,ka,O,Ca,h,g,f,v,P,S,m,na,I,da,b,k,Y,la,Ta,mb,Eb,qa,Oa,Z,H,M,R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra,ec,pc,mc,ud){var wc,aa,J,
ia,Da,tb,Qc,xc,D,w,ga,ta,U,fa,oa,E,z,ca,T,za,ma,l,lc,X,p,Hb,zb,Ve,ke,ue,$d,bd,pe,td,de,re,Fd,Id,Vd;wc=c.attributes;aa=c.buffer;J=c.context;ia=c.current;Da=c.draw;tb=c.elements;Qc=c.extensions;xc=c.framebuffer;D=c.gl;w=c.isBufferArgs;ga=c.next;ta=c.shader;U=c.uniforms;fa=c.vao;oa=ga.blend_color;E=ia.blend_color;z=ga.blend_equation;ca=ia.blend_equation;T=ga.blend_func;za=ia.blend_func;ma=ga.colorMask;l=ia.colorMask;lc=ga.depth_range;X=ia.depth_range;p=ga.polygonOffset_offset;Hb=ia.polygonOffset_offset;
zb=ga.sample_coverage;Ve=ia.sample_coverage;ke=ga.scissor_box;ue=ia.scissor_box;$d=ga.stencil_func;bd=ia.stencil_func;pe=ga.stencil_opBack;td=ia.stencil_opBack;de=ga.stencil_opFront;re=ia.stencil_opFront;Fd=ga.viewport;Id=ia.viewport;Vd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var c,d,e,f,g,h;c=xc.next;c!==xc.cur&&(c?D.bindFramebuffer(36160,c.framebuffer):D.bindFramebuffer(36160,null),xc.cur=c);if(ia.dirty){var k,m,n,
q,v,t,r,x,A,B,I,C,G,P,K,F,L,S,T,O,U,Y,ja,da,Ca,na,ta,wa,oa,pa,ka,Bb,Sa,Vb;k=ga.dither;k!==ia.dither&&(k?D.enable(3024):D.disable(3024),ia.dither=k);m=z[0];n=z[1];if(m!==ca[0]||n!==ca[1])D.blendEquationSeparate(m,n),ca[0]=m,ca[1]=n;q=ga.depth_func;q!==ia.depth_func&&(D.depthFunc(q),ia.depth_func=q);v=lc[0];t=lc[1];if(v!==X[0]||t!==X[1])D.depthRange(v,t),X[0]=v,X[1]=t;r=ga.depth_mask;r!==ia.depth_mask&&(D.depthMask(r),ia.depth_mask=r);x=ma[0];A=ma[1];B=ma[2];I=ma[3];if(x!==l[0]||A!==l[1]||B!==l[2]||
I!==l[3])D.colorMask(x,A,B,I),l[0]=x,l[1]=A,l[2]=B,l[3]=I;C=ga.cull_enable;C!==ia.cull_enable&&(C?D.enable(2884):D.disable(2884),ia.cull_enable=C);G=ga.cull_face;G!==ia.cull_face&&(D.cullFace(G),ia.cull_face=G);P=ga.frontFace;P!==ia.frontFace&&(D.frontFace(P),ia.frontFace=P);K=ga.lineWidth;K!==ia.lineWidth&&(D.lineWidth(K),ia.lineWidth=K);F=ga.polygonOffset_enable;F!==ia.polygonOffset_enable&&(F?D.enable(32823):D.disable(32823),ia.polygonOffset_enable=F);L=p[0];S=p[1];if(L!==Hb[0]||S!==Hb[1])D.polygonOffset(L,
S),Hb[0]=L,Hb[1]=S;T=ga.sample_alpha;T!==ia.sample_alpha&&(T?D.enable(32926):D.disable(32926),ia.sample_alpha=T);O=ga.sample_enable;O!==ia.sample_enable&&(O?D.enable(32928):D.disable(32928),ia.sample_enable=O);U=zb[0];Y=zb[1];if(U!==Ve[0]||Y!==Ve[1])D.sampleCoverage(U,Y),Ve[0]=U,Ve[1]=Y;ja=ga.stencil_mask;ja!==ia.stencil_mask&&(D.stencilMask(ja),ia.stencil_mask=ja);da=$d[0];Ca=$d[1];na=$d[2];if(da!==bd[0]||Ca!==bd[1]||na!==bd[2])D.stencilFunc(da,Ca,na),bd[0]=da,bd[1]=Ca,bd[2]=na;ta=de[0];wa=de[1];
oa=de[2];pa=de[3];if(ta!==re[0]||wa!==re[1]||oa!==re[2]||pa!==re[3])D.stencilOpSeparate(ta,wa,oa,pa),re[0]=ta,re[1]=wa,re[2]=oa,re[3]=pa;ka=pe[0];Bb=pe[1];Sa=pe[2];Vb=pe[3];if(ka!==td[0]||Bb!==td[1]||Sa!==td[2]||Vb!==td[3])D.stencilOpSeparate(ka,Bb,Sa,Vb),td[0]=ka,td[1]=Bb,td[2]=Sa,td[3]=Vb}D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);ia.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;D.disable(2929);ia.depth_enable=!1;D.enable(3089);ia.scissor_enable=
!0;D.disable(2960);ia.stencil_enable=!1;if(d=ia.profile)e=performance.now(),y.count+=a;D.useProgram(la.program);f=Qc.angle_instanced_arrays;var cb;fa.setVAO(null);D.uniform1i(u.location,!1);D.uniform1i(Ma.location,ua.bind());cb=Da.instances;for(g=0;g<a;++g){h=b[g];var Yb,Rb,Fd,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,
Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,xe,me,Yc,ke,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ze,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Hf,Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf,qf,nf,rf,Af,Bf,Ne,Ae,of,pf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf;Yb=h.viewport;Rb=Yb.x|0;Fd=Yb.y|0;bc="width"in Yb?Yb.width|0:J.framebufferWidth-Rb;Sb="height"in Yb?Yb.height|0:J.framebufferHeight-Fd;Sd=
J.viewportWidth;J.viewportWidth=bc;Tb=J.viewportHeight;J.viewportHeight=Sb;D.viewport(Rb,Fd,bc,Sb);Id[0]=Rb;Id[1]=Fd;Id[2]=bc;Id[3]=Sb;Na=h.viewport;nb=Na.x|0;vb=Na.y|0;gb="width"in Na?Na.width|0:J.framebufferWidth-nb;Pa="height"in Na?Na.height|0:J.framebufferHeight-vb;D.scissor(nb,vb,gb,Pa);ue[0]=nb;ue[1]=vb;ue[2]=gb;ue[3]=Pa;qc=Ta.call(this,J,h,g);Ib=!1;sd=null;db=0;nc=!1;kc=Hc=0;ib=1;jb=0;sa=5126;ab=Va=va=ob=0;w(qc)?(Ib=!0,sd=aa.createStream(34962,qc),sa=sd.dtype):(sd=aa.getBuffer(qc))?sa=sd.dtype:
"constant"in qc?(ib=2,"number"===typeof qc.constant?(va=qc.constant,Va=ab=ob=0):(va=0<qc.constant.length?qc.constant[0]:0,Va=1<qc.constant.length?qc.constant[1]:0,ab=2<qc.constant.length?qc.constant[2]:0,ob=3<qc.constant.length?qc.constant[3]:0)):(sd=w(qc.buffer)?aa.createStream(34962,qc.buffer):aa.getBuffer(qc.buffer),sa="type"in qc?Vd[qc.type]:sd.dtype,nc=!!qc.normalized,kc=qc.size|0,Hc=qc.offset|0,jb=qc.stride|0,db=qc.divisor|0);Aa=ec.location;eb=wc[Aa];if(1===ib){eb.buffer||D.enableVertexAttribArray(Aa);
Ia=kc||1;if(eb.type!==sa||eb.size!==Ia||eb.buffer!==sd||eb.normalized!==nc||eb.offset!==Hc||eb.stride!==jb)D.bindBuffer(34962,sd.buffer),D.vertexAttribPointer(Aa,Ia,sa,nc,jb,Hc),eb.type=sa,eb.size=Ia,eb.buffer=sd,eb.normalized=nc,eb.offset=Hc,eb.stride=jb;eb.divisor!==db&&(f.vertexAttribDivisorANGLE(Aa,db),eb.divisor=db)}else if(eb.buffer&&(D.disableVertexAttribArray(Aa),eb.buffer=null),eb.x!==va||eb.y!==Va||eb.z!==ab||eb.w!==ob)D.vertexAttrib4f(Aa,va,Va,ab,ob),eb.x=va,eb.y=Va,eb.z=ab,eb.w=ob;Cb=
mb.call(this,J,h,g);Ab=!1;Ra=null;Kc=0;Jb=!1;Ub=Lb=0;xa=1;Td=0;Ka=5126;ya=hb=fb=Ob=0;w(Cb)?(Ab=!0,Ra=aa.createStream(34962,Cb),Ka=Ra.dtype):(Ra=aa.getBuffer(Cb))?Ka=Ra.dtype:"constant"in Cb?(xa=2,"number"===typeof Cb.constant?(fb=Cb.constant,hb=ya=Ob=0):(fb=0<Cb.constant.length?Cb.constant[0]:0,hb=1<Cb.constant.length?Cb.constant[1]:0,ya=2<Cb.constant.length?Cb.constant[2]:0,Ob=3<Cb.constant.length?Cb.constant[3]:0)):(Ra=w(Cb.buffer)?aa.createStream(34962,Cb.buffer):aa.getBuffer(Cb.buffer),Ka="type"in
Cb?Vd[Cb.type]:Ra.dtype,Jb=!!Cb.normalized,Ub=Cb.size|0,Lb=Cb.offset|0,Td=Cb.stride|0,Kc=Cb.divisor|0);fc=mc.location;Ea=wc[fc];if(1===xa){Ea.buffer||D.enableVertexAttribArray(fc);pb=Ub||1;if(Ea.type!==Ka||Ea.size!==pb||Ea.buffer!==Ra||Ea.normalized!==Jb||Ea.offset!==Lb||Ea.stride!==Td)D.bindBuffer(34962,Ra.buffer),D.vertexAttribPointer(fc,pb,Ka,Jb,Td,Lb),Ea.type=Ka,Ea.size=pb,Ea.buffer=Ra,Ea.normalized=Jb,Ea.offset=Lb,Ea.stride=Td;Ea.divisor!==Kc&&(f.vertexAttribDivisorANGLE(fc,Kc),Ea.divisor=Kc)}else if(Ea.buffer&&
(D.disableVertexAttribArray(fc),Ea.buffer=null),Ea.x!==fb||Ea.y!==hb||Ea.z!==ya||Ea.w!==Ob)D.vertexAttrib4f(fc,fb,hb,ya,Ob),Ea.x=fb,Ea.y=hb,Ea.z=ya,Ea.w=Ob;qb=Eb.call(this,J,h,g);Ya=!1;Za=null;oc=0;cd=!1;Wa=uc=0;Mb=1;dd=0;Ga=5126;kb=Ba=Qa=yc=0;w(qb)?(Ya=!0,Za=aa.createStream(34962,qb),Ga=Za.dtype):(Za=aa.getBuffer(qb))?Ga=Za.dtype:"constant"in qb?(Mb=2,"number"===typeof qb.constant?(Qa=qb.constant,Ba=kb=yc=0):(Qa=0<qb.constant.length?qb.constant[0]:0,Ba=1<qb.constant.length?qb.constant[1]:0,kb=2<
qb.constant.length?qb.constant[2]:0,yc=3<qb.constant.length?qb.constant[3]:0)):(Za=w(qb.buffer)?aa.createStream(34962,qb.buffer):aa.getBuffer(qb.buffer),Ga="type"in qb?Vd[qb.type]:Za.dtype,cd=!!qb.normalized,Wa=qb.size|0,uc=qb.offset|0,dd=qb.stride|0,oc=qb.divisor|0);wb=pc.location;Db=wc[wb];if(1===Mb){Db.buffer||D.enableVertexAttribArray(wb);rb=Wa||1;if(Db.type!==Ga||Db.size!==rb||Db.buffer!==Za||Db.normalized!==cd||Db.offset!==uc||Db.stride!==dd)D.bindBuffer(34962,Za.buffer),D.vertexAttribPointer(wb,
rb,Ga,cd,dd,uc),Db.type=Ga,Db.size=rb,Db.buffer=Za,Db.normalized=cd,Db.offset=uc,Db.stride=dd;Db.divisor!==oc&&(f.vertexAttribDivisorANGLE(wb,oc),Db.divisor=oc)}else if(Db.buffer&&(D.disableVertexAttribArray(wb),Db.buffer=null),Db.x!==Qa||Db.y!==Ba||Db.z!==kb||Db.w!==yc)D.vertexAttrib4f(wb,Qa,Ba,kb,yc),Db.x=Qa,Db.y=Ba,Db.z=kb,Db.w=yc;vc=qa.call(this,J,h,g);xb=!1;rd=null;tc=0;Gd=!1;id=Mc=0;ed=1;Wb=0;dc=5126;lb=$b=Ha=Pb=0;w(vc)?(xb=!0,rd=aa.createStream(34962,vc),dc=rd.dtype):(rd=aa.getBuffer(vc))?
dc=rd.dtype:"constant"in vc?(ed=2,"number"===typeof vc.constant?(Ha=vc.constant,$b=lb=Pb=0):(Ha=0<vc.constant.length?vc.constant[0]:0,$b=1<vc.constant.length?vc.constant[1]:0,lb=2<vc.constant.length?vc.constant[2]:0,Pb=3<vc.constant.length?vc.constant[3]:0)):(rd=w(vc.buffer)?aa.createStream(34962,vc.buffer):aa.getBuffer(vc.buffer),dc="type"in vc?Vd[vc.type]:rd.dtype,Gd=!!vc.normalized,id=vc.size|0,Mc=vc.offset|0,Wb=vc.stride|0,tc=vc.divisor|0);yb=ud.location;Nb=wc[yb];if(1===ed){Nb.buffer||D.enableVertexAttribArray(yb);
Qb=id||1;if(Nb.type!==dc||Nb.size!==Qb||Nb.buffer!==rd||Nb.normalized!==Gd||Nb.offset!==Mc||Nb.stride!==Wb)D.bindBuffer(34962,rd.buffer),D.vertexAttribPointer(yb,Qb,dc,Gd,Wb,Mc),Nb.type=dc,Nb.size=Qb,Nb.buffer=rd,Nb.normalized=Gd,Nb.offset=Mc,Nb.stride=Wb;Nb.divisor!==tc&&(f.vertexAttribDivisorANGLE(yb,tc),Nb.divisor=tc)}else if(Nb.buffer&&(D.disableVertexAttribArray(yb),Nb.buffer=null),Nb.x!==Ha||Nb.y!==$b||Nb.z!==lb||Nb.w!==Pb)D.vertexAttrib4f(yb,Ha,$b,lb,Pb),Nb.x=Ha,Nb.y=$b,Nb.z=lb,Nb.w=Pb;gc=
Oa.call(this,J,h,g);ic=!1;Tc=null;Cc=0;Dc=!1;Nc=Ec=0;ad=1;Uc=0;Oc=5126;Ic=Pc=Gb=Kb=0;w(gc)?(ic=!0,Tc=aa.createStream(34962,gc),Oc=Tc.dtype):(Tc=aa.getBuffer(gc))?Oc=Tc.dtype:"constant"in gc?(ad=2,"number"===typeof gc.constant?(Gb=gc.constant,Pc=Ic=Kb=0):(Gb=0<gc.constant.length?gc.constant[0]:0,Pc=1<gc.constant.length?gc.constant[1]:0,Ic=2<gc.constant.length?gc.constant[2]:0,Kb=3<gc.constant.length?gc.constant[3]:0)):(Tc=w(gc.buffer)?aa.createStream(34962,gc.buffer):aa.getBuffer(gc.buffer),Oc="type"in
gc?Vd[gc.type]:Tc.dtype,Dc=!!gc.normalized,Nc=gc.size|0,Ec=gc.offset|0,Uc=gc.stride|0,Cc=gc.divisor|0);Vc=sb.location;hc=wc[Vc];if(1===ad){hc.buffer||D.enableVertexAttribArray(Vc);Xc=Nc||1;if(hc.type!==Oc||hc.size!==Xc||hc.buffer!==Tc||hc.normalized!==Dc||hc.offset!==Ec||hc.stride!==Uc)D.bindBuffer(34962,Tc.buffer),D.vertexAttribPointer(Vc,Xc,Oc,Dc,Uc,Ec),hc.type=Oc,hc.size=Xc,hc.buffer=Tc,hc.normalized=Dc,hc.offset=Ec,hc.stride=Uc;hc.divisor!==Cc&&(f.vertexAttribDivisorANGLE(Vc,Cc),hc.divisor=Cc)}else if(hc.buffer&&
(D.disableVertexAttribArray(Vc),hc.buffer=null),hc.x!==Gb||hc.y!==Pc||hc.z!==Ic||hc.w!==Kb)D.vertexAttrib4f(Vc,Gb,Pc,Ic,Kb),hc.x=Gb,hc.y=Pc,hc.z=Ic,hc.w=Kb;fd=Z.call(this,J,h,g);xe=!1;me=null;Yc=0;ke=!1;se=he=0;qe=1;Qd=0;Dd=5126;nd=Fc=hd=Bd=0;w(fd)?(xe=!0,me=aa.createStream(34962,fd),Dd=me.dtype):(me=aa.getBuffer(fd))?Dd=me.dtype:"constant"in fd?(qe=2,"number"===typeof fd.constant?(hd=fd.constant,Fc=nd=Bd=0):(hd=0<fd.constant.length?fd.constant[0]:0,Fc=1<fd.constant.length?fd.constant[1]:0,nd=2<fd.constant.length?
fd.constant[2]:0,Bd=3<fd.constant.length?fd.constant[3]:0)):(me=w(fd.buffer)?aa.createStream(34962,fd.buffer):aa.getBuffer(fd.buffer),Dd="type"in fd?Vd[fd.type]:me.dtype,ke=!!fd.normalized,se=fd.size|0,he=fd.offset|0,Qd=fd.stride|0,Yc=fd.divisor|0);jd=Ja.location;Zc=wc[jd];if(1===qe){Zc.buffer||D.enableVertexAttribArray(jd);kd=se||1;if(Zc.type!==Dd||Zc.size!==kd||Zc.buffer!==me||Zc.normalized!==ke||Zc.offset!==he||Zc.stride!==Qd)D.bindBuffer(34962,me.buffer),D.vertexAttribPointer(jd,kd,Dd,ke,Qd,he),
Zc.type=Dd,Zc.size=kd,Zc.buffer=me,Zc.normalized=ke,Zc.offset=he,Zc.stride=Qd;Zc.divisor!==Yc&&(f.vertexAttribDivisorANGLE(jd,Yc),Zc.divisor=Yc)}else if(Zc.buffer&&(D.disableVertexAttribArray(jd),Zc.buffer=null),Zc.x!==hd||Zc.y!==Fc||Zc.z!==nd||Zc.w!==Bd)D.vertexAttrib4f(jd,hd,Fc,nd,Bd),Zc.x=hd,Zc.y=Fc,Zc.z=nd,Zc.w=Bd;zd=H.call(this,J,h,g);Ad=!1;ve=null;ye=0;Ze=!1;ae=ce=0;Zd=1;Fe=0;Wd=5126;ne=Wc=zc=fe=0;w(zd)?(Ad=!0,ve=aa.createStream(34962,zd),Wd=ve.dtype):(ve=aa.getBuffer(zd))?Wd=ve.dtype:"constant"in
zd?(Zd=2,"number"===typeof zd.constant?(zc=zd.constant,Wc=ne=fe=0):(zc=0<zd.constant.length?zd.constant[0]:0,Wc=1<zd.constant.length?zd.constant[1]:0,ne=2<zd.constant.length?zd.constant[2]:0,fe=3<zd.constant.length?zd.constant[3]:0)):(ve=w(zd.buffer)?aa.createStream(34962,zd.buffer):aa.getBuffer(zd.buffer),Wd="type"in zd?Vd[zd.type]:ve.dtype,Ze=!!zd.normalized,ae=zd.size|0,ce=zd.offset|0,Fe=zd.stride|0,ye=zd.divisor|0);ie=Q.location;Cd=wc[ie];if(1===Zd){Cd.buffer||D.enableVertexAttribArray(ie);Hd=
ae||4;if(Cd.type!==Wd||Cd.size!==Hd||Cd.buffer!==ve||Cd.normalized!==Ze||Cd.offset!==ce||Cd.stride!==Fe)D.bindBuffer(34962,ve.buffer),D.vertexAttribPointer(ie,Hd,Wd,Ze,Fe,ce),Cd.type=Wd,Cd.size=Hd,Cd.buffer=ve,Cd.normalized=Ze,Cd.offset=ce,Cd.stride=Fe;Cd.divisor!==ye&&(f.vertexAttribDivisorANGLE(ie,ye),Cd.divisor=ye)}else if(Cd.buffer&&(D.disableVertexAttribArray(ie),Cd.buffer=null),Cd.x!==zc||Cd.y!==Wc||Cd.z!==ne||Cd.w!==fe)D.vertexAttrib4f(ie,zc,Wc,ne,fe),Cd.x=zc,Cd.y=Wc,Cd.z=ne,Cd.w=fe;Jd=M.call(this,
J,h,g);Kd=!1;ge=null;te=0;we=!1;Hf=je=0;Pe=1;Le=0;oe=5126;Ie=He=Ge=Be=0;w(Jd)?(Kd=!0,ge=aa.createStream(34962,Jd),oe=ge.dtype):(ge=aa.getBuffer(Jd))?oe=ge.dtype:"constant"in Jd?(Pe=2,"number"===typeof Jd.constant?(Ge=Jd.constant,He=Ie=Be=0):(Ge=0<Jd.constant.length?Jd.constant[0]:0,He=1<Jd.constant.length?Jd.constant[1]:0,Ie=2<Jd.constant.length?Jd.constant[2]:0,Be=3<Jd.constant.length?Jd.constant[3]:0)):(ge=w(Jd.buffer)?aa.createStream(34962,Jd.buffer):aa.getBuffer(Jd.buffer),oe="type"in Jd?Vd[Jd.type]:
ge.dtype,we=!!Jd.normalized,Hf=Jd.size|0,je=Jd.offset|0,Le=Jd.stride|0,te=Jd.divisor|0);Ce=Zb.location;Ed=wc[Ce];if(1===Pe){Ed.buffer||D.enableVertexAttribArray(Ce);Od=Hf||4;if(Ed.type!==oe||Ed.size!==Od||Ed.buffer!==ge||Ed.normalized!==we||Ed.offset!==je||Ed.stride!==Le)D.bindBuffer(34962,ge.buffer),D.vertexAttribPointer(Ce,Od,oe,we,Le,je),Ed.type=oe,Ed.size=Od,Ed.buffer=ge,Ed.normalized=we,Ed.offset=je,Ed.stride=Le;Ed.divisor!==te&&(f.vertexAttribDivisorANGLE(Ce,te),Ed.divisor=te)}else if(Ed.buffer&&
(D.disableVertexAttribArray(Ce),Ed.buffer=null),Ed.x!==Ge||Ed.y!==He||Ed.z!==Ie||Ed.w!==Be)D.vertexAttrib4f(Ce,Ge,He,Ie,Be),Ed.x=Ge,Ed.y=He,Ed.z=Ie,Ed.w=Be;Ud=R.call(this,J,h,g);Xd=!1;Je=null;yd=0;Ld=!1;Ke=ze=0;ff=1;Xe=0;Qe=5126;Re=Ue=We=Me=0;w(Ud)?(Xd=!0,Je=aa.createStream(34962,Ud),Qe=Je.dtype):(Je=aa.getBuffer(Ud))?Qe=Je.dtype:"constant"in Ud?(ff=2,"number"===typeof Ud.constant?(We=Ud.constant,Ue=Re=Me=0):(We=0<Ud.constant.length?Ud.constant[0]:0,Ue=1<Ud.constant.length?Ud.constant[1]:0,Re=2<Ud.constant.length?
Ud.constant[2]:0,Me=3<Ud.constant.length?Ud.constant[3]:0)):(Je=w(Ud.buffer)?aa.createStream(34962,Ud.buffer):aa.getBuffer(Ud.buffer),Qe="type"in Ud?Vd[Ud.type]:Je.dtype,Ld=!!Ud.normalized,Ke=Ud.size|0,ze=Ud.offset|0,Xe=Ud.stride|0,yd=Ud.divisor|0);Se=ha.location;Md=wc[Se];if(1===ff){Md.buffer||D.enableVertexAttribArray(Se);Rd=Ke||1;if(Md.type!==Qe||Md.size!==Rd||Md.buffer!==Je||Md.normalized!==Ld||Md.offset!==ze||Md.stride!==Xe)D.bindBuffer(34962,Je.buffer),D.vertexAttribPointer(Se,Rd,Qe,Ld,Xe,ze),
Md.type=Qe,Md.size=Rd,Md.buffer=Je,Md.normalized=Ld,Md.offset=ze,Md.stride=Xe;Md.divisor!==yd&&(f.vertexAttribDivisorANGLE(Se,yd),Md.divisor=yd)}else if(Md.buffer&&(D.disableVertexAttribArray(Se),Md.buffer=null),Md.x!==We||Md.y!==Ue||Md.z!==Re||Md.w!==Me)D.vertexAttrib4f(Se,We,Ue,Re,Me),Md.x=We,Md.y=Ue,Md.z=Re,Md.w=Me;Te=J.pixelRatio;g&&gf===Te||(gf=Te,D.uniform1f(ac.location,Te));mf=N.call(this,J,h,g);cf=mf[0];jf=mf[1];g&&hf===cf&&kf===jf||(hf=cf,kf=jf,D.uniform2f(Fa.location,cf,jf));qf=h.scale;
nf=qf[0];Af=qf[1];g&&rf===nf&&Bf===Af||(rf=nf,Bf=Af,D.uniform2f(bb.location,nf,Af));Ne=h.scaleFract;Ae=Ne[0];pf=Ne[1];g&&of===Ae&&Cf===pf||(of=Ae,Cf=pf,D.uniform2f(V.location,Ae,pf));Ff=h.translate;zf=Ff[0];Ef=Ff[1];g&&Df===zf&&vf===Ef||(Df=zf,vf=Ef,D.uniform2f(ea.location,zf,Ef));wf=h.translateFract;uf=wf[0];yf=wf[1];g&&xf===uf&&If===yf||(xf=uf,If=yf,D.uniform2f(ra.location,uf,yf));Kf=h.opacity;g&&Lf===Kf||(Lf=Kf,D.uniform1f(ba.location,Kf));Mf=h.elements;sf=null;(sf=(Rf=w(Mf))?tb.createStream(Mf):
tb.getElements(Mf))&&D.bindBuffer(34963,sf.buffer.buffer);Gf=h.offset;if(tf=h.count)0<cb?sf?f.drawElementsInstancedANGLE(0,tf,sf.type,Gf<<(sf.type-5121>>1),cb):f.drawArraysInstancedANGLE(0,Gf,tf,cb):0>cb&&(sf?D.drawElements(0,tf,sf.type,Gf<<(sf.type-5121>>1)):D.drawArrays(0,Gf,tf)),J.viewportWidth=Sd,J.viewportHeight=Tb,Ib&&aa.destroyStream(sd),Ab&&aa.destroyStream(Ra),Ya&&aa.destroyStream(Za),xb&&aa.destroyStream(rd),ic&&aa.destroyStream(Tc),xe&&aa.destroyStream(me),Ad&&aa.destroyStream(ve),Kd&&
aa.destroyStream(ge),Xd&&aa.destroyStream(Je),Rf&&tb.destroyStream(sf)}ua.unbind();ia.dirty=!0;fa.setVAO(null);d&&(y.cpuTime+=performance.now()-e)},draw:function(b){var c,f,g,h,k,m,v,x,B,I,H,G,P,M,N,F,S,T,O,U,R,Y,Z,da,Ca,na,ta,oa,ka,ua,qa,la,Oa,La,ub,Xa,pa,Ta,Bb,Sa,Vb,cb,Yb,Rb,mb,bc,Sb,Eb,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Fd,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,
yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,ke,me,Yc,Oe,he,se,qe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,zd,Ad,ve,ye,Ze,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Hf;c=xc.next;c!==xc.cur&&(c?D.bindFramebuffer(36160,c.framebuffer):D.bindFramebuffer(36160,null),xc.cur=c);if(ia.dirty){var Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf;Pe=ga.dither;Pe!==ia.dither&&(Pe?D.enable(3024):D.disable(3024),ia.dither=Pe);Le=z[0];oe=z[1];if(Le!==
ca[0]||oe!==ca[1])D.blendEquationSeparate(Le,oe),ca[0]=Le,ca[1]=oe;Be=ga.depth_func;Be!==ia.depth_func&&(D.depthFunc(Be),ia.depth_func=Be);Ge=lc[0];He=lc[1];if(Ge!==X[0]||He!==X[1])D.depthRange(Ge,He),X[0]=Ge,X[1]=He;Ie=ga.depth_mask;Ie!==ia.depth_mask&&(D.depthMask(Ie),ia.depth_mask=Ie);Ce=ma[0];Ed=ma[1];Od=ma[2];Ud=ma[3];if(Ce!==l[0]||Ed!==l[1]||Od!==l[2]||Ud!==l[3])D.colorMask(Ce,Ed,Od,Ud),l[0]=Ce,l[1]=Ed,l[2]=Od,l[3]=Ud;Xd=ga.cull_enable;Xd!==ia.cull_enable&&(Xd?D.enable(2884):D.disable(2884),
ia.cull_enable=Xd);Je=ga.cull_face;Je!==ia.cull_face&&(D.cullFace(Je),ia.cull_face=Je);yd=ga.frontFace;yd!==ia.frontFace&&(D.frontFace(yd),ia.frontFace=yd);Ld=ga.lineWidth;Ld!==ia.lineWidth&&(D.lineWidth(Ld),ia.lineWidth=Ld);ze=ga.polygonOffset_enable;ze!==ia.polygonOffset_enable&&(ze?D.enable(32823):D.disable(32823),ia.polygonOffset_enable=ze);Ke=p[0];ff=p[1];if(Ke!==Hb[0]||ff!==Hb[1])D.polygonOffset(Ke,ff),Hb[0]=Ke,Hb[1]=ff;Xe=ga.sample_alpha;Xe!==ia.sample_alpha&&(Xe?D.enable(32926):D.disable(32926),
ia.sample_alpha=Xe);Qe=ga.sample_enable;Qe!==ia.sample_enable&&(Qe?D.enable(32928):D.disable(32928),ia.sample_enable=Qe);Me=zb[0];We=zb[1];if(Me!==Ve[0]||We!==Ve[1])D.sampleCoverage(Me,We),Ve[0]=Me,Ve[1]=We;Ue=ga.stencil_mask;Ue!==ia.stencil_mask&&(D.stencilMask(Ue),ia.stencil_mask=Ue);Re=$d[0];Se=$d[1];Md=$d[2];if(Re!==bd[0]||Se!==bd[1]||Md!==bd[2])D.stencilFunc(Re,Se,Md),bd[0]=Re,bd[1]=Se,bd[2]=Md;Rd=de[0];Te=de[1];gf=de[2];mf=de[3];if(Rd!==re[0]||Te!==re[1]||gf!==re[2]||mf!==re[3])D.stencilOpSeparate(Rd,
Te,gf,mf),re[0]=Rd,re[1]=Te,re[2]=gf,re[3]=mf;cf=pe[0];hf=pe[1];jf=pe[2];kf=pe[3];if(cf!==td[0]||hf!==td[1]||jf!==td[2]||kf!==td[3])D.stencilOpSeparate(cf,hf,jf,kf),td[0]=cf,td[1]=hf,td[2]=jf,td[3]=kf}f=b.viewport;g=f.x|0;h=f.y|0;k="width"in f?f.width|0:J.framebufferWidth-g;m="height"in f?f.height|0:J.framebufferHeight-h;v=J.viewportWidth;J.viewportWidth=k;x=J.viewportHeight;J.viewportHeight=m;D.viewport(g,h,k,m);Id[0]=g;Id[1]=h;Id[2]=k;Id[3]=m;D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);
ia.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;D.disable(2929);ia.depth_enable=!1;B=b.viewport;I=B.x|0;H=B.y|0;G="width"in B?B.width|0:J.framebufferWidth-I;P="height"in B?B.height|0:J.framebufferHeight-H;D.scissor(I,H,G,P);ue[0]=I;ue[1]=H;ue[2]=G;ue[3]=P;D.enable(3089);ia.scissor_enable=!0;D.disable(2960);ia.stencil_enable=!1;if(M=ia.profile)N=performance.now(),y.count++;D.useProgram(n.program);F=Qc.angle_instanced_arrays;fa.setVAO(null);S=A.call(this,
J,b,0);T=!1;O=null;U=0;R=!1;Z=Y=0;da=1;Ca=0;na=5126;ua=ka=oa=ta=0;w(S)?(T=!0,O=aa.createStream(34962,S),na=O.dtype):(O=aa.getBuffer(S))?na=O.dtype:"constant"in S?(da=2,"number"===typeof S.constant?(oa=S.constant,ka=ua=ta=0):(oa=0<S.constant.length?S.constant[0]:0,ka=1<S.constant.length?S.constant[1]:0,ua=2<S.constant.length?S.constant[2]:0,ta=3<S.constant.length?S.constant[3]:0)):(O=w(S.buffer)?aa.createStream(34962,S.buffer):aa.getBuffer(S.buffer),na="type"in S?Vd[S.type]:O.dtype,R=!!S.normalized,
Z=S.size|0,Y=S.offset|0,Ca=S.stride|0,U=S.divisor|0);qa=ec.location;la=wc[qa];if(1===da){la.buffer||D.enableVertexAttribArray(qa);Oa=Z||1;if(la.type!==na||la.size!==Oa||la.buffer!==O||la.normalized!==R||la.offset!==Y||la.stride!==Ca)D.bindBuffer(34962,O.buffer),D.vertexAttribPointer(qa,Oa,na,R,Ca,Y),la.type=na,la.size=Oa,la.buffer=O,la.normalized=R,la.offset=Y,la.stride=Ca;la.divisor!==U&&(F.vertexAttribDivisorANGLE(qa,U),la.divisor=U)}else if(la.buffer&&(D.disableVertexAttribArray(qa),la.buffer=
null),la.x!==oa||la.y!==ka||la.z!==ua||la.w!==ta)D.vertexAttrib4f(qa,oa,ka,ua,ta),la.x=oa,la.y=ka,la.z=ua,la.w=ta;La=e.call(this,J,b,0);ub=!1;Xa=null;pa=0;Ta=!1;Sa=Bb=0;Vb=1;cb=0;Yb=5126;Sb=bc=mb=Rb=0;w(La)?(ub=!0,Xa=aa.createStream(34962,La),Yb=Xa.dtype):(Xa=aa.getBuffer(La))?Yb=Xa.dtype:"constant"in La?(Vb=2,"number"===typeof La.constant?(mb=La.constant,bc=Sb=Rb=0):(mb=0<La.constant.length?La.constant[0]:0,bc=1<La.constant.length?La.constant[1]:0,Sb=2<La.constant.length?La.constant[2]:0,Rb=3<La.constant.length?
La.constant[3]:0)):(Xa=w(La.buffer)?aa.createStream(34962,La.buffer):aa.getBuffer(La.buffer),Yb="type"in La?Vd[La.type]:Xa.dtype,Ta=!!La.normalized,Sa=La.size|0,Bb=La.offset|0,cb=La.stride|0,pa=La.divisor|0);Eb=mc.location;Tb=wc[Eb];if(1===Vb){Tb.buffer||D.enableVertexAttribArray(Eb);Na=Sa||1;if(Tb.type!==Yb||Tb.size!==Na||Tb.buffer!==Xa||Tb.normalized!==Ta||Tb.offset!==Bb||Tb.stride!==cb)D.bindBuffer(34962,Xa.buffer),D.vertexAttribPointer(Eb,Na,Yb,Ta,cb,Bb),Tb.type=Yb,Tb.size=Na,Tb.buffer=Xa,Tb.normalized=
Ta,Tb.offset=Bb,Tb.stride=cb;Tb.divisor!==pa&&(F.vertexAttribDivisorANGLE(Eb,pa),Tb.divisor=pa)}else if(Tb.buffer&&(D.disableVertexAttribArray(Eb),Tb.buffer=null),Tb.x!==mb||Tb.y!==bc||Tb.z!==Sb||Tb.w!==Rb)D.vertexAttrib4f(Eb,mb,bc,Sb,Rb),Tb.x=mb,Tb.y=bc,Tb.z=Sb,Tb.w=Rb;nb=d.call(this,J,b,0);vb=!1;gb=null;Pa=0;qc=!1;sd=Ib=0;db=1;nc=0;Hc=5126;sa=jb=ib=kc=0;w(nb)?(vb=!0,gb=aa.createStream(34962,nb),Hc=gb.dtype):(gb=aa.getBuffer(nb))?Hc=gb.dtype:"constant"in nb?(db=2,"number"===typeof nb.constant?(ib=
nb.constant,jb=sa=kc=0):(ib=0<nb.constant.length?nb.constant[0]:0,jb=1<nb.constant.length?nb.constant[1]:0,sa=2<nb.constant.length?nb.constant[2]:0,kc=3<nb.constant.length?nb.constant[3]:0)):(gb=w(nb.buffer)?aa.createStream(34962,nb.buffer):aa.getBuffer(nb.buffer),Hc="type"in nb?Vd[nb.type]:gb.dtype,qc=!!nb.normalized,sd=nb.size|0,Ib=nb.offset|0,nc=nb.stride|0,Pa=nb.divisor|0);ob=pc.location;va=wc[ob];if(1===db){va.buffer||D.enableVertexAttribArray(ob);Va=sd||1;if(va.type!==Hc||va.size!==Va||va.buffer!==
gb||va.normalized!==qc||va.offset!==Ib||va.stride!==nc)D.bindBuffer(34962,gb.buffer),D.vertexAttribPointer(ob,Va,Hc,qc,nc,Ib),va.type=Hc,va.size=Va,va.buffer=gb,va.normalized=qc,va.offset=Ib,va.stride=nc;va.divisor!==Pa&&(F.vertexAttribDivisorANGLE(ob,Pa),va.divisor=Pa)}else if(va.buffer&&(D.disableVertexAttribArray(ob),va.buffer=null),va.x!==ib||va.y!==jb||va.z!==sa||va.w!==kc)D.vertexAttrib4f(ob,ib,jb,sa,kc),va.x=ib,va.y=jb,va.z=sa,va.w=kc;ab=q.call(this,J,b,0);Aa=!1;eb=null;Ia=0;Cb=!1;Ra=Ab=0;
Kc=1;Jb=0;Lb=5126;Ka=Fd=xa=Ub=0;w(ab)?(Aa=!0,eb=aa.createStream(34962,ab),Lb=eb.dtype):(eb=aa.getBuffer(ab))?Lb=eb.dtype:"constant"in ab?(Kc=2,"number"===typeof ab.constant?(xa=ab.constant,Fd=Ka=Ub=0):(xa=0<ab.constant.length?ab.constant[0]:0,Fd=1<ab.constant.length?ab.constant[1]:0,Ka=2<ab.constant.length?ab.constant[2]:0,Ub=3<ab.constant.length?ab.constant[3]:0)):(eb=w(ab.buffer)?aa.createStream(34962,ab.buffer):aa.getBuffer(ab.buffer),Lb="type"in ab?Vd[ab.type]:eb.dtype,Cb=!!ab.normalized,Ra=ab.size|
0,Ab=ab.offset|0,Jb=ab.stride|0,Ia=ab.divisor|0);Ob=ud.location;fb=wc[Ob];if(1===Kc){fb.buffer||D.enableVertexAttribArray(Ob);hb=Ra||1;if(fb.type!==Lb||fb.size!==hb||fb.buffer!==eb||fb.normalized!==Cb||fb.offset!==Ab||fb.stride!==Jb)D.bindBuffer(34962,eb.buffer),D.vertexAttribPointer(Ob,hb,Lb,Cb,Jb,Ab),fb.type=Lb,fb.size=hb,fb.buffer=eb,fb.normalized=Cb,fb.offset=Ab,fb.stride=Jb;fb.divisor!==Ia&&(F.vertexAttribDivisorANGLE(Ob,Ia),fb.divisor=Ia)}else if(fb.buffer&&(D.disableVertexAttribArray(Ob),fb.buffer=
null),fb.x!==xa||fb.y!==Fd||fb.z!==Ka||fb.w!==Ub)D.vertexAttrib4f(Ob,xa,Fd,Ka,Ub),fb.x=xa,fb.y=Fd,fb.z=Ka,fb.w=Ub;ya=a.call(this,J,b,0);fc=!1;Ea=null;pb=0;qb=!1;Za=Ya=0;oc=1;cd=0;uc=5126;Ga=dd=Mb=Wa=0;w(ya)?(fc=!0,Ea=aa.createStream(34962,ya),uc=Ea.dtype):(Ea=aa.getBuffer(ya))?uc=Ea.dtype:"constant"in ya?(oc=2,"number"===typeof ya.constant?(Mb=ya.constant,dd=Ga=Wa=0):(Mb=0<ya.constant.length?ya.constant[0]:0,dd=1<ya.constant.length?ya.constant[1]:0,Ga=2<ya.constant.length?ya.constant[2]:0,Wa=3<ya.constant.length?
ya.constant[3]:0)):(Ea=w(ya.buffer)?aa.createStream(34962,ya.buffer):aa.getBuffer(ya.buffer),uc="type"in ya?Vd[ya.type]:Ea.dtype,qb=!!ya.normalized,Za=ya.size|0,Ya=ya.offset|0,cd=ya.stride|0,pb=ya.divisor|0);yc=sb.location;Qa=wc[yc];if(1===oc){Qa.buffer||D.enableVertexAttribArray(yc);Ba=Za||1;if(Qa.type!==uc||Qa.size!==Ba||Qa.buffer!==Ea||Qa.normalized!==qb||Qa.offset!==Ya||Qa.stride!==cd)D.bindBuffer(34962,Ea.buffer),D.vertexAttribPointer(yc,Ba,uc,qb,cd,Ya),Qa.type=uc,Qa.size=Ba,Qa.buffer=Ea,Qa.normalized=
qb,Qa.offset=Ya,Qa.stride=cd;Qa.divisor!==pb&&(F.vertexAttribDivisorANGLE(yc,pb),Qa.divisor=pb)}else if(Qa.buffer&&(D.disableVertexAttribArray(yc),Qa.buffer=null),Qa.x!==Mb||Qa.y!==dd||Qa.z!==Ga||Qa.w!==Wa)D.vertexAttrib4f(yc,Mb,dd,Ga,Wa),Qa.x=Mb,Qa.y=dd,Qa.z=Ga,Qa.w=Wa;kb=t.call(this,J,b,0);wb=!1;Db=null;rb=0;vc=!1;rd=xb=0;tc=1;Gd=0;Mc=5126;dc=Wb=ed=id=0;w(kb)?(wb=!0,Db=aa.createStream(34962,kb),Mc=Db.dtype):(Db=aa.getBuffer(kb))?Mc=Db.dtype:"constant"in kb?(tc=2,"number"===typeof kb.constant?(ed=
kb.constant,Wb=dc=id=0):(ed=0<kb.constant.length?kb.constant[0]:0,Wb=1<kb.constant.length?kb.constant[1]:0,dc=2<kb.constant.length?kb.constant[2]:0,id=3<kb.constant.length?kb.constant[3]:0)):(Db=w(kb.buffer)?aa.createStream(34962,kb.buffer):aa.getBuffer(kb.buffer),Mc="type"in kb?Vd[kb.type]:Db.dtype,vc=!!kb.normalized,rd=kb.size|0,xb=kb.offset|0,Gd=kb.stride|0,rb=kb.divisor|0);Pb=Ja.location;Ha=wc[Pb];if(1===tc){Ha.buffer||D.enableVertexAttribArray(Pb);$b=rd||1;if(Ha.type!==Mc||Ha.size!==$b||Ha.buffer!==
Db||Ha.normalized!==vc||Ha.offset!==xb||Ha.stride!==Gd)D.bindBuffer(34962,Db.buffer),D.vertexAttribPointer(Pb,$b,Mc,vc,Gd,xb),Ha.type=Mc,Ha.size=$b,Ha.buffer=Db,Ha.normalized=vc,Ha.offset=xb,Ha.stride=Gd;Ha.divisor!==rb&&(F.vertexAttribDivisorANGLE(Pb,rb),Ha.divisor=rb)}else if(Ha.buffer&&(D.disableVertexAttribArray(Pb),Ha.buffer=null),Ha.x!==ed||Ha.y!==Wb||Ha.z!==dc||Ha.w!==id)D.vertexAttrib4f(Pb,ed,Wb,dc,id),Ha.x=ed,Ha.y=Wb,Ha.z=dc,Ha.w=id;lb=C.call(this,J,b,0);yb=!1;Nb=null;Qb=0;gc=!1;Tc=ic=0;
Cc=1;Dc=0;Ec=5126;Oc=Uc=ad=Nc=0;w(lb)?(yb=!0,Nb=aa.createStream(34962,lb),Ec=Nb.dtype):(Nb=aa.getBuffer(lb))?Ec=Nb.dtype:"constant"in lb?(Cc=2,"number"===typeof lb.constant?(ad=lb.constant,Uc=Oc=Nc=0):(ad=0<lb.constant.length?lb.constant[0]:0,Uc=1<lb.constant.length?lb.constant[1]:0,Oc=2<lb.constant.length?lb.constant[2]:0,Nc=3<lb.constant.length?lb.constant[3]:0)):(Nb=w(lb.buffer)?aa.createStream(34962,lb.buffer):aa.getBuffer(lb.buffer),Ec="type"in lb?Vd[lb.type]:Nb.dtype,gc=!!lb.normalized,Tc=lb.size|
0,ic=lb.offset|0,Dc=lb.stride|0,Qb=lb.divisor|0);Kb=Q.location;Gb=wc[Kb];if(1===Cc){Gb.buffer||D.enableVertexAttribArray(Kb);Pc=Tc||4;if(Gb.type!==Ec||Gb.size!==Pc||Gb.buffer!==Nb||Gb.normalized!==gc||Gb.offset!==ic||Gb.stride!==Dc)D.bindBuffer(34962,Nb.buffer),D.vertexAttribPointer(Kb,Pc,Ec,gc,Dc,ic),Gb.type=Ec,Gb.size=Pc,Gb.buffer=Nb,Gb.normalized=gc,Gb.offset=ic,Gb.stride=Dc;Gb.divisor!==Qb&&(F.vertexAttribDivisorANGLE(Kb,Qb),Gb.divisor=Qb)}else if(Gb.buffer&&(D.disableVertexAttribArray(Kb),Gb.buffer=
null),Gb.x!==ad||Gb.y!==Uc||Gb.z!==Oc||Gb.w!==Nc)D.vertexAttrib4f(Kb,ad,Uc,Oc,Nc),Gb.x=ad,Gb.y=Uc,Gb.z=Oc,Gb.w=Nc;Ic=wa.call(this,J,b,0);Vc=!1;hc=null;Xc=0;fd=!1;me=ke=0;Yc=1;Oe=0;he=5126;Dd=Qd=qe=se=0;w(Ic)?(Vc=!0,hc=aa.createStream(34962,Ic),he=hc.dtype):(hc=aa.getBuffer(Ic))?he=hc.dtype:"constant"in Ic?(Yc=2,"number"===typeof Ic.constant?(qe=Ic.constant,Qd=Dd=se=0):(qe=0<Ic.constant.length?Ic.constant[0]:0,Qd=1<Ic.constant.length?Ic.constant[1]:0,Dd=2<Ic.constant.length?Ic.constant[2]:0,se=3<Ic.constant.length?
Ic.constant[3]:0)):(hc=w(Ic.buffer)?aa.createStream(34962,Ic.buffer):aa.getBuffer(Ic.buffer),he="type"in Ic?Vd[Ic.type]:hc.dtype,fd=!!Ic.normalized,me=Ic.size|0,ke=Ic.offset|0,Oe=Ic.stride|0,Xc=Ic.divisor|0);Bd=Zb.location;hd=wc[Bd];if(1===Yc){hd.buffer||D.enableVertexAttribArray(Bd);Fc=me||4;if(hd.type!==he||hd.size!==Fc||hd.buffer!==hc||hd.normalized!==fd||hd.offset!==ke||hd.stride!==Oe)D.bindBuffer(34962,hc.buffer),D.vertexAttribPointer(Bd,Fc,he,fd,Oe,ke),hd.type=he,hd.size=Fc,hd.buffer=hc,hd.normalized=
fd,hd.offset=ke,hd.stride=Oe;hd.divisor!==Xc&&(F.vertexAttribDivisorANGLE(Bd,Xc),hd.divisor=Xc)}else if(hd.buffer&&(D.disableVertexAttribArray(Bd),hd.buffer=null),hd.x!==qe||hd.y!==Qd||hd.z!==Dd||hd.w!==se)D.vertexAttrib4f(Bd,qe,Qd,Dd,se),hd.x=qe,hd.y=Qd,hd.z=Dd,hd.w=se;nd=K.call(this,J,b,0);jd=!1;Zc=null;kd=0;zd=!1;ve=Ad=0;ye=1;Ze=0;ce=5126;Wd=Fe=Zd=ae=0;w(nd)?(jd=!0,Zc=aa.createStream(34962,nd),ce=Zc.dtype):(Zc=aa.getBuffer(nd))?ce=Zc.dtype:"constant"in nd?(ye=2,"number"===typeof nd.constant?(Zd=
nd.constant,Fe=Wd=ae=0):(Zd=0<nd.constant.length?nd.constant[0]:0,Fe=1<nd.constant.length?nd.constant[1]:0,Wd=2<nd.constant.length?nd.constant[2]:0,ae=3<nd.constant.length?nd.constant[3]:0)):(Zc=w(nd.buffer)?aa.createStream(34962,nd.buffer):aa.getBuffer(nd.buffer),ce="type"in nd?Vd[nd.type]:Zc.dtype,zd=!!nd.normalized,ve=nd.size|0,Ad=nd.offset|0,Ze=nd.stride|0,kd=nd.divisor|0);fe=ha.location;zc=wc[fe];if(1===ye){zc.buffer||D.enableVertexAttribArray(fe);Wc=ve||1;if(zc.type!==ce||zc.size!==Wc||zc.buffer!==
Zc||zc.normalized!==zd||zc.offset!==Ad||zc.stride!==Ze)D.bindBuffer(34962,Zc.buffer),D.vertexAttribPointer(fe,Wc,ce,zd,Ze,Ad),zc.type=ce,zc.size=Wc,zc.buffer=Zc,zc.normalized=zd,zc.offset=Ad,zc.stride=Ze;zc.divisor!==kd&&(F.vertexAttribDivisorANGLE(fe,kd),zc.divisor=kd)}else if(zc.buffer&&(D.disableVertexAttribArray(fe),zc.buffer=null),zc.x!==Zd||zc.y!==Fe||zc.z!==Wd||zc.w!==ae)D.vertexAttrib4f(fe,Zd,Fe,Wd,ae),zc.x=Zd,zc.y=Fe,zc.z=Wd,zc.w=ae;D.uniform1i(u.location,!1);D.uniform1f(ac.location,J.pixelRatio);
ne=L.call(this,J,b,0);D.uniform2f(Fa.location,ne[0],ne[1]);ie=b.scale;D.uniform2f(bb.location,ie[0],ie[1]);Cd=b.scaleFract;D.uniform2f(V.location,Cd[0],Cd[1]);Hd=b.translate;D.uniform2f(ea.location,Hd[0],Hd[1]);Jd=b.translateFract;D.uniform2f(ra.location,Jd[0],Jd[1]);D.uniform1f(ba.location,b.opacity);D.uniform1i(Ma.location,r.bind());Kd=b.elements;ge=null;(ge=(te=w(Kd))?tb.createStream(Kd):tb.getElements(Kd))&&D.bindBuffer(34963,ge.buffer.buffer);we=b.offset;if(je=b.count)Hf=Da.instances,0<Hf?ge?
F.drawElementsInstancedANGLE(0,je,ge.type,we<<(ge.type-5121>>1),Hf):F.drawArraysInstancedANGLE(0,we,je,Hf):0>Hf&&(ge?D.drawElements(0,je,ge.type,we<<(ge.type-5121>>1)):D.drawArrays(0,we,je)),ia.dirty=!0,fa.setVAO(null),J.viewportWidth=v,J.viewportHeight=x,M&&(y.cpuTime+=performance.now()-N),T&&aa.destroyStream(O),ub&&aa.destroyStream(Xa),vb&&aa.destroyStream(gb),Aa&&aa.destroyStream(eb),fc&&aa.destroyStream(Ea),wb&&aa.destroyStream(Db),yb&&aa.destroyStream(Nb),Vc&&aa.destroyStream(hc),jd&&aa.destroyStream(Zc),
r.unbind(),te&&tb.destroyStream(ge)},scope:function(a,c,d){var e,l,n,p,q,t,u,z,r,A,E,D,H,C,M,K,N,L,Q,ca,X,R,V,fa,Z,ja,ba,ma,ea,ha,la,wa,za,ua,pa,qa,ra,Fa,Ja,Ma,Oa,zb,wc,Hb,bb,Ta,mb,Na,nb,vb,gb,Pa,sb,Ib,Eb,db,lc,ud,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Zb,Jb,Lb,Ub,xa,ec,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,ac,uc,Wa,Mb,pc,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,mc,tc,Qc,Mc,$d,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd,td,bd,Yc,xc,Id,de,pe,Qd,Dd,Bd,hd,Fc,nd,jd,Zc,kd,
zd,Ad,ue,re,Oe,ce,ae,Zd,Fe,Wd,fe,zc,Wc,ne,ie,Cd,Hd,Jd,Kd,ge,te,we,je,Ve,Pe,Le,oe,Be,Ge,He,Ie,Ce,Ed,Od,Ud,Xd,Je,yd,Ld,ze,Ke,ff,Xe,Qe,Me,We,Ue,Re,Se,Md,Rd,Te,gf,mf,cf,hf,jf,kf,qf,nf,rf,Af,Bf,Ne,Ae,of,pf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;e=a.viewport;l=e.x|0;n=e.y|0;p="width"in e?e.width|0:J.framebufferWidth-
l;q="height"in e?e.height|0:J.framebufferHeight-n;t=J.viewportWidth;J.viewportWidth=p;u=J.viewportHeight;J.viewportHeight=q;z=Fd[0];Fd[0]=l;r=Fd[1];Fd[1]=n;A=Fd[2];Fd[2]=p;E=Fd[3];Fd[3]=q;D=oa[0];oa[0]=0;H=oa[1];oa[1]=0;C=oa[2];oa[2]=0;M=oa[3];oa[3]=1;K=ga.blend_enable;ga.blend_enable=!0;N=T[0];T[0]=770;L=T[1];T[1]=771;Q=T[2];T[2]=773;ca=T[3];T[3]=1;X=ga.depth_enable;ga.depth_enable=!1;R=a.viewport;V=R.x|0;fa=R.y|0;Z="width"in R?R.width|0:J.framebufferWidth-V;ja="height"in R?R.height|0:J.framebufferHeight-
fa;ba=ke[0];ke[0]=V;ma=ke[1];ke[1]=fa;ea=ke[2];ke[2]=Z;ha=ke[3];ke[3]=ja;la=ga.scissor_enable;ga.scissor_enable=!0;wa=ga.stencil_enable;ga.stencil_enable=!1;if(za=ia.profile)ua=performance.now(),y.count++;pa=a.elements;qa=null;qa=(ra=w(pa))?tb.createStream(pa):tb.getElements(pa);Fa=Da.elements;Da.elements=qa;Ja=a.offset;Ma=Da.offset;Da.offset=Ja;Oa=a.count;zb=Da.count;Da.count=Oa;wc=Da.primitive;Da.primitive=0;Hb=U[45];U[45]=!1;bb=a.markerTexture;Ta=U[48];U[48]=bb;mb=a.opacity;Na=U[10];U[10]=mb;nb=
B.call(this,J,a,d);vb=U[46];U[46]=nb;gb=U[47];U[47]=F;Pa=J.pixelRatio;sb=U[34];U[34]=Pa;Ib=a.scale;Eb=U[6];U[6]=Ib;db=a.scaleFract;lc=U[7];U[7]=db;ud=a.translate;kc=U[8];U[8]=ud;ib=a.translateFract;jb=U[9];U[9]=ib;sa=x.call(this,J,a,d);ob=!1;va=null;Va=0;ab=!1;eb=Aa=0;Ia=1;Cb=0;Ab=5126;Lb=Jb=Zb=Ra=0;w(sa)?(ob=!0,va=aa.createStream(34962,sa),Ab=va.dtype):(va=aa.getBuffer(sa))?Ab=va.dtype:"constant"in sa?(Ia=2,"number"===typeof sa.constant?(Zb=sa.constant,Jb=Lb=Ra=0):(Zb=0<sa.constant.length?sa.constant[0]:
0,Jb=1<sa.constant.length?sa.constant[1]:0,Lb=2<sa.constant.length?sa.constant[2]:0,Ra=3<sa.constant.length?sa.constant[3]:0)):(va=w(sa.buffer)?aa.createStream(34962,sa.buffer):aa.getBuffer(sa.buffer),Ab="type"in sa?Vd[sa.type]:va.dtype,ab=!!sa.normalized,eb=sa.size|0,Aa=sa.offset|0,Cb=sa.stride|0,Va=sa.divisor|0);Ub=G.buffer;G.buffer=va;xa=G.divisor;G.divisor=Va;ec=G.normalized;G.normalized=ab;Ka=G.offset;G.offset=Aa;Ob=G.size;G.size=eb;fb=G.state;G.state=Ia;hb=G.stride;G.stride=Cb;ya=G.type;G.type=
Ab;fc=G.w;G.w=Ra;Ea=G.x;G.x=Zb;pb=G.y;G.y=Jb;qb=G.z;G.z=Lb;Ya=ka.call(this,J,a,d);Za=!1;oc=null;ac=0;uc=!1;Mb=Wa=0;pc=1;Ga=0;yc=5126;wb=kb=Ba=Qa=0;w(Ya)?(Za=!0,oc=aa.createStream(34962,Ya),yc=oc.dtype):(oc=aa.getBuffer(Ya))?yc=oc.dtype:"constant"in Ya?(pc=2,"number"===typeof Ya.constant?(Ba=Ya.constant,kb=wb=Qa=0):(Ba=0<Ya.constant.length?Ya.constant[0]:0,kb=1<Ya.constant.length?Ya.constant[1]:0,wb=2<Ya.constant.length?Ya.constant[2]:0,Qa=3<Ya.constant.length?Ya.constant[3]:0)):(oc=w(Ya.buffer)?aa.createStream(34962,
Ya.buffer):aa.getBuffer(Ya.buffer),yc="type"in Ya?Vd[Ya.type]:oc.dtype,uc=!!Ya.normalized,Mb=Ya.size|0,Wa=Ya.offset|0,Ga=Ya.stride|0,ac=Ya.divisor|0);Db=O.buffer;O.buffer=oc;rb=O.divisor;O.divisor=ac;vc=O.normalized;O.normalized=uc;xb=O.offset;O.offset=Wa;mc=O.size;O.size=Mb;tc=O.state;O.state=pc;Qc=O.stride;O.stride=Ga;Mc=O.type;O.type=yc;$d=O.w;O.w=Qa;ed=O.x;O.x=Ba;Wb=O.y;O.y=kb;dc=O.z;O.z=wb;Pb=Ca.call(this,J,a,d);Ha=!1;$b=null;lb=0;yb=!1;Qb=Nb=0;gc=1;ic=0;Tc=5126;Nc=Ec=Dc=Cc=0;w(Pb)?(Ha=!0,$b=
aa.createStream(34962,Pb),Tc=$b.dtype):($b=aa.getBuffer(Pb))?Tc=$b.dtype:"constant"in Pb?(gc=2,"number"===typeof Pb.constant?(Dc=Pb.constant,Ec=Nc=Cc=0):(Dc=0<Pb.constant.length?Pb.constant[0]:0,Ec=1<Pb.constant.length?Pb.constant[1]:0,Nc=2<Pb.constant.length?Pb.constant[2]:0,Cc=3<Pb.constant.length?Pb.constant[3]:0)):($b=w(Pb.buffer)?aa.createStream(34962,Pb.buffer):aa.getBuffer(Pb.buffer),Tc="type"in Pb?Vd[Pb.type]:$b.dtype,yb=!!Pb.normalized,Qb=Pb.size|0,Nb=Pb.offset|0,ic=Pb.stride|0,lb=Pb.divisor|
0);ad=h.buffer;h.buffer=$b;Uc=h.divisor;h.divisor=lb;Oc=h.normalized;h.normalized=yb;Kb=h.offset;h.offset=Nb;Gb=h.size;h.size=Qb;Pc=h.state;h.state=gc;Ic=h.stride;h.stride=ic;Vc=h.type;h.type=Tc;hc=h.w;h.w=Cc;Xc=h.x;h.x=Dc;fd=h.y;h.y=Ec;td=h.z;h.z=Nc;bd=g.call(this,J,a,d);Yc=!1;xc=null;Id=0;de=!1;Qd=pe=0;Dd=1;Bd=0;hd=5126;Zc=jd=nd=Fc=0;w(bd)?(Yc=!0,xc=aa.createStream(34962,bd),hd=xc.dtype):(xc=aa.getBuffer(bd))?hd=xc.dtype:"constant"in bd?(Dd=2,"number"===typeof bd.constant?(nd=bd.constant,jd=Zc=
Fc=0):(nd=0<bd.constant.length?bd.constant[0]:0,jd=1<bd.constant.length?bd.constant[1]:0,Zc=2<bd.constant.length?bd.constant[2]:0,Fc=3<bd.constant.length?bd.constant[3]:0)):(xc=w(bd.buffer)?aa.createStream(34962,bd.buffer):aa.getBuffer(bd.buffer),hd="type"in bd?Vd[bd.type]:xc.dtype,de=!!bd.normalized,Qd=bd.size|0,pe=bd.offset|0,Bd=bd.stride|0,Id=bd.divisor|0);kd=f.buffer;f.buffer=xc;zd=f.divisor;f.divisor=Id;Ad=f.normalized;f.normalized=de;ue=f.offset;f.offset=pe;re=f.size;f.size=Qd;Oe=f.state;f.state=
Dd;ce=f.stride;f.stride=Bd;ae=f.type;f.type=hd;Zd=f.w;f.w=Fc;Fe=f.x;f.x=nd;Wd=f.y;f.y=jd;fe=f.z;f.z=Zc;zc=v.call(this,J,a,d);Wc=!1;ne=null;ie=0;Cd=!1;Jd=Hd=0;Kd=1;ge=0;te=5126;Pe=Ve=je=we=0;w(zc)?(Wc=!0,ne=aa.createStream(34962,zc),te=ne.dtype):(ne=aa.getBuffer(zc))?te=ne.dtype:"constant"in zc?(Kd=2,"number"===typeof zc.constant?(je=zc.constant,Ve=Pe=we=0):(je=0<zc.constant.length?zc.constant[0]:0,Ve=1<zc.constant.length?zc.constant[1]:0,Pe=2<zc.constant.length?zc.constant[2]:0,we=3<zc.constant.length?
zc.constant[3]:0)):(ne=w(zc.buffer)?aa.createStream(34962,zc.buffer):aa.getBuffer(zc.buffer),te="type"in zc?Vd[zc.type]:ne.dtype,Cd=!!zc.normalized,Jd=zc.size|0,Hd=zc.offset|0,ge=zc.stride|0,ie=zc.divisor|0);Le=P.buffer;P.buffer=ne;oe=P.divisor;P.divisor=ie;Be=P.normalized;P.normalized=Cd;Ge=P.offset;P.offset=Hd;He=P.size;P.size=Jd;Ie=P.state;P.state=Kd;Ce=P.stride;P.stride=ge;Ed=P.type;P.type=te;Od=P.w;P.w=we;Ud=P.x;P.x=je;Xd=P.y;P.y=Ve;Je=P.z;P.z=Pe;yd=S.call(this,J,a,d);Ld=!1;ze=null;Ke=0;ff=!1;
Qe=Xe=0;Me=1;We=0;Ue=5126;Rd=Md=Se=Re=0;w(yd)?(Ld=!0,ze=aa.createStream(34962,yd),Ue=ze.dtype):(ze=aa.getBuffer(yd))?Ue=ze.dtype:"constant"in yd?(Me=2,"number"===typeof yd.constant?(Se=yd.constant,Md=Rd=Re=0):(Se=0<yd.constant.length?yd.constant[0]:0,Md=1<yd.constant.length?yd.constant[1]:0,Rd=2<yd.constant.length?yd.constant[2]:0,Re=3<yd.constant.length?yd.constant[3]:0)):(ze=w(yd.buffer)?aa.createStream(34962,yd.buffer):aa.getBuffer(yd.buffer),Ue="type"in yd?Vd[yd.type]:ze.dtype,ff=!!yd.normalized,
Qe=yd.size|0,Xe=yd.offset|0,We=yd.stride|0,Ke=yd.divisor|0);Te=m.buffer;m.buffer=ze;gf=m.divisor;m.divisor=Ke;mf=m.normalized;m.normalized=ff;cf=m.offset;m.offset=Xe;hf=m.size;m.size=Qe;jf=m.state;m.state=Me;kf=m.stride;m.stride=We;qf=m.type;m.type=Ue;nf=m.w;m.w=Re;rf=m.x;m.x=Se;Af=m.y;m.y=Md;Bf=m.z;m.z=Rd;Ne=na.call(this,J,a,d);Ae=!1;of=null;pf=0;Cf=!1;zf=Ff=0;Df=1;Ef=0;vf=5126;yf=xf=uf=wf=0;w(Ne)?(Ae=!0,of=aa.createStream(34962,Ne),vf=of.dtype):(of=aa.getBuffer(Ne))?vf=of.dtype:"constant"in Ne?
(Df=2,"number"===typeof Ne.constant?(uf=Ne.constant,xf=yf=wf=0):(uf=0<Ne.constant.length?Ne.constant[0]:0,xf=1<Ne.constant.length?Ne.constant[1]:0,yf=2<Ne.constant.length?Ne.constant[2]:0,wf=3<Ne.constant.length?Ne.constant[3]:0)):(of=w(Ne.buffer)?aa.createStream(34962,Ne.buffer):aa.getBuffer(Ne.buffer),vf="type"in Ne?Vd[Ne.type]:of.dtype,Cf=!!Ne.normalized,zf=Ne.size|0,Ff=Ne.offset|0,Ef=Ne.stride|0,pf=Ne.divisor|0);If=I.buffer;I.buffer=of;Kf=I.divisor;I.divisor=pf;Lf=I.normalized;I.normalized=Cf;
Mf=I.offset;I.offset=Ff;sf=I.size;I.size=zf;Rf=I.state;I.state=Df;Gf=I.stride;I.stride=Ef;tf=I.type;I.type=vf;dg=I.w;I.w=wf;Sf=I.x;I.x=uf;Tf=I.y;I.y=xf;qg=I.z;I.z=yf;df=da.call(this,J,a,d);$e=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;w(df)?($e=!0,Nf=aa.createStream(34962,df),Wf=Nf.dtype):(Nf=aa.getBuffer(df))?Wf=Nf.dtype:"constant"in df?(hg=2,"number"===typeof df.constant?(Xf=df.constant,Yf=Zf=Uf=0):(Xf=0<df.constant.length?df.constant[0]:0,Yf=1<df.constant.length?df.constant[1]:
0,Zf=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Nf=w(df.buffer)?aa.createStream(34962,df.buffer):aa.getBuffer(df.buffer),Wf="type"in df?Vd[df.type]:Nf.dtype,eg=!!df.normalized,gg=df.size|0,fg=df.offset|0,ig=df.stride|0,Of=df.divisor|0);jg=b.buffer;b.buffer=Nf;rg=b.divisor;b.divisor=Of;sg=b.normalized;b.normalized=eg;tg=b.offset;b.offset=fg;ug=b.size;b.size=gg;vg=b.state;b.state=hg;wg=b.stride;b.stride=ig;xg=b.type;b.type=Wf;yg=b.w;b.w=Uf;zg=b.x;b.x=Xf;Ag=b.y;
b.y=Yf;Bg=b.z;b.z=Zf;ef=k.call(this,J,a,d);af=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;w(ef)?(af=!0,Pf=aa.createStream(34962,ef),$f=Pf.dtype):(Pf=aa.getBuffer(ef))?$f=Pf.dtype:"constant"in ef?(ng=2,"number"===typeof ef.constant?(ag=ef.constant,bg=cg=Vf=0):(ag=0<ef.constant.length?ef.constant[0]:0,bg=1<ef.constant.length?ef.constant[1]:0,cg=2<ef.constant.length?ef.constant[2]:0,Vf=3<ef.constant.length?ef.constant[3]:0)):(Pf=w(ef.buffer)?aa.createStream(34962,ef.buffer):aa.getBuffer(ef.buffer),
$f="type"in ef?Vd[ef.type]:Pf.dtype,kg=!!ef.normalized,mg=ef.size|0,lg=ef.offset|0,og=ef.stride|0,Qf=ef.divisor|0);pg=Y.buffer;Y.buffer=Pf;Cg=Y.divisor;Y.divisor=Qf;Dg=Y.normalized;Y.normalized=kg;Eg=Y.offset;Y.offset=lg;Fg=Y.size;Y.size=mg;Gg=Y.state;Y.state=ng;Hg=Y.stride;Y.stride=og;Ig=Y.type;Y.type=$f;Jg=Y.w;Y.w=Vf;Kg=Y.x;Y.x=ag;Lg=Y.y;Y.y=bg;Mg=Y.z;Y.z=cg;Ng=ta.vert;ta.vert=59;Og=ta.frag;ta.frag=58;ia.dirty=!0;c(J,a,d);J.viewportWidth=t;J.viewportHeight=u;Fd[0]=z;Fd[1]=r;Fd[2]=A;Fd[3]=E;oa[0]=
D;oa[1]=H;oa[2]=C;oa[3]=M;ga.blend_enable=K;T[0]=N;T[1]=L;T[2]=Q;T[3]=ca;ga.depth_enable=X;ke[0]=ba;ke[1]=ma;ke[2]=ea;ke[3]=ha;ga.scissor_enable=la;ga.stencil_enable=wa;za&&(y.cpuTime+=performance.now()-ua);ra&&tb.destroyStream(qa);Da.elements=Fa;Da.offset=Ma;Da.count=zb;Da.primitive=wc;U[45]=Hb;U[48]=Ta;U[10]=Na;U[46]=vb;U[47]=gb;U[34]=sb;U[6]=Eb;U[7]=lc;U[8]=kc;U[9]=jb;ob&&aa.destroyStream(va);G.buffer=Ub;G.divisor=xa;G.normalized=ec;G.offset=Ka;G.size=Ob;G.state=fb;G.stride=hb;G.type=ya;G.w=fc;
G.x=Ea;G.y=pb;G.z=qb;Za&&aa.destroyStream(oc);O.buffer=Db;O.divisor=rb;O.normalized=vc;O.offset=xb;O.size=mc;O.state=tc;O.stride=Qc;O.type=Mc;O.w=$d;O.x=ed;O.y=Wb;O.z=dc;Ha&&aa.destroyStream($b);h.buffer=ad;h.divisor=Uc;h.normalized=Oc;h.offset=Kb;h.size=Gb;h.state=Pc;h.stride=Ic;h.type=Vc;h.w=hc;h.x=Xc;h.y=fd;h.z=td;Yc&&aa.destroyStream(xc);f.buffer=kd;f.divisor=zd;f.normalized=Ad;f.offset=ue;f.size=re;f.state=Oe;f.stride=ce;f.type=ae;f.w=Zd;f.x=Fe;f.y=Wd;f.z=fe;Wc&&aa.destroyStream(ne);P.buffer=
Le;P.divisor=oe;P.normalized=Be;P.offset=Ge;P.size=He;P.state=Ie;P.stride=Ce;P.type=Ed;P.w=Od;P.x=Ud;P.y=Xd;P.z=Je;Ld&&aa.destroyStream(ze);m.buffer=Te;m.divisor=gf;m.normalized=mf;m.offset=cf;m.size=hf;m.state=jf;m.stride=kf;m.type=qf;m.w=nf;m.x=rf;m.y=Af;m.z=Bf;Ae&&aa.destroyStream(of);I.buffer=If;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=sf;I.state=Rf;I.stride=Gf;I.type=tf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;$e&&aa.destroyStream(Nf);b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=ug;
b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;af&&aa.destroyStream(Pf);Y.buffer=pg;Y.divisor=Cg;Y.normalized=Dg;Y.offset=Eg;Y.size=Fg;Y.state=Gg;Y.stride=Hg;Y.type=Ig;Y.w=Jg;Y.x=Kg;Y.y=Lg;Y.z=Mg;ta.vert=Ng;ta.frag=Og;ia.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(c,y,n,A,e,d,q,a,t,C,wa,K,L,r,B,F,x,G,ka,O,Ca,h,g,f,v,P,S,m,na,I,da,b,k,Y,la,Ta,mb,Eb,qa,Oa){var Z,H,M,
R,ua,N,Zb,Ja,Q,u,ha,ba,Fa,Ma,ac,bb,V,sb,ea,ra,ec,pc,mc,ud,wc,aa,J,ia,Da,tb,Qc,xc,D,w,ga,ta,U,fa,oa,E,z;Z=c.attributes;H=c.buffer;M=c.context;R=c.current;ua=c.draw;N=c.elements;Zb=c.extensions;Ja=c.framebuffer;Q=c.gl;u=c.isBufferArgs;ha=c.next;ba=c.shader;Fa=c.uniforms;Ma=c.vao;ac=ha.blend_color;bb=R.blend_color;V=ha.blend_equation;sb=R.blend_equation;ea=ha.blend_func;ra=R.blend_func;ec=ha.colorMask;pc=R.colorMask;mc=ha.depth_range;ud=R.depth_range;wc=ha.polygonOffset_offset;aa=R.polygonOffset_offset;
J=ha.sample_coverage;ia=R.sample_coverage;Da=ha.scissor_box;tb=R.scissor_box;Qc=ha.stencil_func;xc=R.stencil_func;D=ha.stencil_opBack;w=R.stencil_opBack;ga=ha.stencil_opFront;ta=R.stencil_opFront;U=ha.viewport;fa=R.viewport;oa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};E={offset:4,stride:8};z={offset:0,stride:8};return{batch:function(a,c){var d,e,l,n,q,p,t,r,x,A,B,C,F;d=Ja.next;d!==Ja.cur&&(d?Q.bindFramebuffer(36160,d.framebuffer):Q.bindFramebuffer(36160,
null),Ja.cur=d);if(R.dirty){var K,L,U,ja,ba,ea,wa,Fa,ac,lf,bf,xd,De,be,Pd,Yd,le,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a,jc,Fb,rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb;K=ha.dither;K!==R.dither&&(K?Q.enable(3024):Q.disable(3024),R.dither=K);L=V[0];U=V[1];if(L!==sb[0]||U!==sb[1])Q.blendEquationSeparate(L,U),sb[0]=L,sb[1]=U;ja=ha.depth_func;ja!==R.depth_func&&(Q.depthFunc(ja),R.depth_func=ja);ba=mc[0];ea=mc[1];if(ba!==ud[0]||ea!==ud[1])Q.depthRange(ba,ea),ud[0]=ba,ud[1]=ea;wa=ha.depth_mask;wa!==R.depth_mask&&(Q.depthMask(wa),
R.depth_mask=wa);Fa=ec[0];ac=ec[1];lf=ec[2];bf=ec[3];if(Fa!==pc[0]||ac!==pc[1]||lf!==pc[2]||bf!==pc[3])Q.colorMask(Fa,ac,lf,bf),pc[0]=Fa,pc[1]=ac,pc[2]=lf,pc[3]=bf;xd=ha.cull_enable;xd!==R.cull_enable&&(xd?Q.enable(2884):Q.disable(2884),R.cull_enable=xd);De=ha.cull_face;De!==R.cull_face&&(Q.cullFace(De),R.cull_face=De);be=ha.frontFace;be!==R.frontFace&&(Q.frontFace(be),R.frontFace=be);Pd=ha.lineWidth;Pd!==R.lineWidth&&(Q.lineWidth(Pd),R.lineWidth=Pd);Yd=ha.polygonOffset_enable;Yd!==R.polygonOffset_enable&&
(Yd?Q.enable(32823):Q.disable(32823),R.polygonOffset_enable=Yd);le=wc[0];pd=wc[1];if(le!==aa[0]||pd!==aa[1])Q.polygonOffset(le,pd),aa[0]=le,aa[1]=pd;ld=ha.sample_alpha;ld!==R.sample_alpha&&(ld?Q.enable(32926):Q.disable(32926),R.sample_alpha=ld);wd=ha.sample_enable;wd!==R.sample_enable&&(wd?Q.enable(32928):Q.disable(32928),R.sample_enable=wd);od=J[0];gd=J[1];if(od!==ia[0]||gd!==ia[1])Q.sampleCoverage(od,gd),ia[0]=od,ia[1]=gd;Ac=ha.stencil_mask;Ac!==R.stencil_mask&&(Q.stencilMask(Ac),R.stencil_mask=
Ac);qd=Qc[0];Rc=Qc[1];Lc=Qc[2];if(qd!==xc[0]||Rc!==xc[1]||Lc!==xc[2])Q.stencilFunc(qd,Rc,Lc),xc[0]=qd,xc[1]=Rc,xc[2]=Lc;sc=ga[0];$a=ga[1];jc=ga[2];Fb=ga[3];if(sc!==ta[0]||$a!==ta[1]||jc!==ta[2]||Fb!==ta[3])Q.stencilOpSeparate(sc,$a,jc,Fb),ta[0]=sc,ta[1]=$a,ta[2]=jc,ta[3]=Fb;rc=D[0];Ua=D[1];Jc=D[2];cc=D[3];if(rc!==w[0]||Ua!==w[1]||Jc!==w[2]||cc!==w[3])Q.stencilOpSeparate(rc,Ua,Jc,cc),w[0]=rc,w[1]=Ua,w[2]=Jc,w[3]=cc;$c=ha.scissor_enable;$c!==R.scissor_enable&&($c?Q.enable(3089):Q.disable(3089),R.scissor_enable=
$c);Nd=Da[0];md=Da[1];Bc=Da[2];Xb=Da[3];if(Nd!==tb[0]||md!==tb[1]||Bc!==tb[2]||Xb!==tb[3])Q.scissor(Nd,md,Bc,Xb),tb[0]=Nd,tb[1]=md,tb[2]=Bc,tb[3]=Xb}e=this.viewport;l=e.x|0;n=e.y|0;q="width"in e?e.width|0:M.framebufferWidth-l;p="height"in e?e.height|0:M.framebufferHeight-n;t=M.viewportWidth;M.viewportWidth=q;r=M.viewportHeight;M.viewportHeight=p;Q.viewport(l,n,q,p);fa[0]=l;fa[1]=n;fa[2]=q;fa[3]=p;Q.blendColor(0,0,0,1);bb[0]=0;bb[1]=0;bb[2]=0;bb[3]=1;Q.enable(3042);R.blend_enable=!0;Q.blendFuncSeparate(770,
771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;Q.disable(2929);R.depth_enable=!1;Q.disable(2960);R.stencil_enable=!1;if(x=R.profile)A=performance.now(),y.count+=c;Q.useProgram(G.program);B=Zb.angle_instanced_arrays;var Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb;Ma.setVAO(null);z.buffer=this.sizeBuffer;Gc=!1;Sc=null;La=0;ub=!1;pa=
Xa=0;vd=1;Bb=0;Sa=5126;Rb=Yb=cb=Vb=0;u(z)?(Gc=!0,Sc=H.createStream(34962,z),Sa=Sc.dtype):(Sc=H.getBuffer(z))?Sa=Sc.dtype:"constant"in z?(vd=2,"number"===typeof z.constant?(cb=z.constant,Yb=Rb=Vb=0):(cb=0<z.constant.length?z.constant[0]:0,Yb=1<z.constant.length?z.constant[1]:0,Rb=2<z.constant.length?z.constant[2]:0,Vb=3<z.constant.length?z.constant[3]:0)):(Sc=u(z.buffer)?H.createStream(34962,z.buffer):H.getBuffer(z.buffer),Sa="type"in z?oa[z.type]:Sc.dtype,ub=!!z.normalized,pa=z.size|0,Xa=z.offset|
0,Bb=z.stride|0,La=z.divisor|0);Ee=Oa.location;bc=Z[Ee];if(1===vd){bc.buffer||Q.enableVertexAttribArray(Ee);Sb=pa||1;if(bc.type!==Sa||bc.size!==Sb||bc.buffer!==Sc||bc.normalized!==ub||bc.offset!==Xa||bc.stride!==Bb)Q.bindBuffer(34962,Sc.buffer),Q.vertexAttribPointer(Ee,Sb,Sa,ub,Bb,Xa),bc.type=Sa,bc.size=Sb,bc.buffer=Sc,bc.normalized=ub,bc.offset=Xa,bc.stride=Bb;bc.divisor!==La&&(B.vertexAttribDivisorANGLE(Ee,La),bc.divisor=La)}else if(bc.buffer&&(Q.disableVertexAttribArray(Ee),bc.buffer=null),bc.x!==
cb||bc.y!==Yb||bc.z!==Rb||bc.w!==Vb)Q.vertexAttrib4f(Ee,cb,Yb,Rb,Vb),bc.x=cb,bc.y=Yb,bc.z=Rb,bc.w=Vb;E.buffer=this.sizeBuffer;Sd=!1;Tb=null;Na=0;nb=!1;gb=vb=0;Pa=1;qc=0;Ib=5126;Hc=nc=db=sd=0;u(E)?(Sd=!0,Tb=H.createStream(34962,E),Ib=Tb.dtype):(Tb=H.getBuffer(E))?Ib=Tb.dtype:"constant"in E?(Pa=2,"number"===typeof E.constant?(db=E.constant,nc=Hc=sd=0):(db=0<E.constant.length?E.constant[0]:0,nc=1<E.constant.length?E.constant[1]:0,Hc=2<E.constant.length?E.constant[2]:0,sd=3<E.constant.length?E.constant[3]:
0)):(Tb=u(E.buffer)?H.createStream(34962,E.buffer):H.getBuffer(E.buffer),Ib="type"in E?oa[E.type]:Tb.dtype,nb=!!E.normalized,gb=E.size|0,vb=E.offset|0,qc=E.stride|0,Na=E.divisor|0);kc=I.location;ib=Z[kc];if(1===Pa){ib.buffer||Q.enableVertexAttribArray(kc);jb=gb||1;if(ib.type!==Ib||ib.size!==jb||ib.buffer!==Tb||ib.normalized!==nb||ib.offset!==vb||ib.stride!==qc)Q.bindBuffer(34962,Tb.buffer),Q.vertexAttribPointer(kc,jb,Ib,nb,qc,vb),ib.type=Ib,ib.size=jb,ib.buffer=Tb,ib.normalized=nb,ib.offset=vb,ib.stride=
qc;ib.divisor!==Na&&(B.vertexAttribDivisorANGLE(kc,Na),ib.divisor=Na)}else if(ib.buffer&&(Q.disableVertexAttribArray(kc),ib.buffer=null),ib.x!==db||ib.y!==nc||ib.z!==Hc||ib.w!==sd)Q.vertexAttrib4f(kc,db,nc,Hc,sd),ib.x=db,ib.y=nc,ib.z=Hc,ib.w=sd;sa=this.charBuffer;ob=!1;va=null;Va=0;ab=!1;eb=Aa=0;Ia=1;Cb=0;Ab=5126;Lb=Jb=Kc=Ra=0;u(sa)?(ob=!0,va=H.createStream(34962,sa),Ab=va.dtype):(va=H.getBuffer(sa))?Ab=va.dtype:"constant"in sa?(Ia=2,"number"===typeof sa.constant?(Kc=sa.constant,Jb=Lb=Ra=0):(Kc=0<
sa.constant.length?sa.constant[0]:0,Jb=1<sa.constant.length?sa.constant[1]:0,Lb=2<sa.constant.length?sa.constant[2]:0,Ra=3<sa.constant.length?sa.constant[3]:0)):(va=u(sa.buffer)?H.createStream(34962,sa.buffer):H.getBuffer(sa.buffer),Ab="type"in sa?oa[sa.type]:va.dtype,ab=!!sa.normalized,eb=sa.size|0,Aa=sa.offset|0,Cb=sa.stride|0,Va=sa.divisor|0);Ub=na.location;xa=Z[Ub];if(1===Ia){xa.buffer||Q.enableVertexAttribArray(Ub);Td=eb||1;if(xa.type!==Ab||xa.size!==Td||xa.buffer!==va||xa.normalized!==ab||xa.offset!==
Aa||xa.stride!==Cb)Q.bindBuffer(34962,va.buffer),Q.vertexAttribPointer(Ub,Td,Ab,ab,Cb,Aa),xa.type=Ab,xa.size=Td,xa.buffer=va,xa.normalized=ab,xa.offset=Aa,xa.stride=Cb;xa.divisor!==Va&&(B.vertexAttribDivisorANGLE(Ub,Va),xa.divisor=Va)}else if(xa.buffer&&(Q.disableVertexAttribArray(Ub),xa.buffer=null),xa.x!==Kc||xa.y!==Jb||xa.z!==Lb||xa.w!==Ra)Q.vertexAttrib4f(Ub,Kc,Jb,Lb,Ra),xa.x=Kc,xa.y=Jb,xa.z=Lb,xa.w=Ra;Ka=this.position;Ob=!1;fb=null;hb=0;ya=!1;Ea=fc=0;pb=1;qb=0;Ya=5126;uc=cd=oc=Za=0;u(Ka)?(Ob=
!0,fb=H.createStream(34962,Ka),Ya=fb.dtype):(fb=H.getBuffer(Ka))?Ya=fb.dtype:"constant"in Ka?(pb=2,"number"===typeof Ka.constant?(oc=Ka.constant,cd=uc=Za=0):(oc=0<Ka.constant.length?Ka.constant[0]:0,cd=1<Ka.constant.length?Ka.constant[1]:0,uc=2<Ka.constant.length?Ka.constant[2]:0,Za=3<Ka.constant.length?Ka.constant[3]:0)):(fb=u(Ka.buffer)?H.createStream(34962,Ka.buffer):H.getBuffer(Ka.buffer),Ya="type"in Ka?oa[Ka.type]:fb.dtype,ya=!!Ka.normalized,Ea=Ka.size|0,fc=Ka.offset|0,qb=Ka.stride|0,hb=Ka.divisor|
0);Wa=la.location;Mb=Z[Wa];if(1===pb){Mb.buffer||Q.enableVertexAttribArray(Wa);dd=Ea||2;if(Mb.type!==Ya||Mb.size!==dd||Mb.buffer!==fb||Mb.normalized!==ya||Mb.offset!==fc||Mb.stride!==qb)Q.bindBuffer(34962,fb.buffer),Q.vertexAttribPointer(Wa,dd,Ya,ya,qb,fc),Mb.type=Ya,Mb.size=dd,Mb.buffer=fb,Mb.normalized=ya,Mb.offset=fc,Mb.stride=qb;Mb.divisor!==hb&&(B.vertexAttribDivisorANGLE(Wa,hb),Mb.divisor=hb)}else if(Mb.buffer&&(Q.disableVertexAttribArray(Wa),Mb.buffer=null),Mb.x!==oc||Mb.y!==cd||Mb.z!==uc||
Mb.w!==Za)Q.vertexAttrib4f(Wa,oc,cd,uc,Za),Mb.x=oc,Mb.y=cd,Mb.z=uc,Mb.w=Za;Ga=this.viewportArray;Q.uniform4f(qa.location,Ga[0],Ga[1],Ga[2],Ga[3]);yc=this.scale;Q.uniform2f(mb.location,yc[0],yc[1]);Qa=this.translate;Q.uniform2f(Eb.location,Qa[0],Qa[1]);(Ba=ua.elements)?Q.bindBuffer(34963,Ba.buffer.buffer):Ma.currentVAO&&(Ba=N.getElements(Ma.currentVAO.elements))&&Q.bindBuffer(34963,Ba.buffer.buffer);kb=ua.instances;for(C=0;C<c;++C){F=a[C];var wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,
Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc,fd;wb=ka.call(this,M,F,C);C&&Db===wb||(Db=wb,Q.uniform1f(da.location,wb));rb=O.call(this,M,F,C);C&&vc===rb||(vc=rb,Q.uniform1f(k.location,rb));xb=F.align;C&&rd===xb||(rd=xb,Q.uniform1f(f.location,xb));tc=F.baseline;C&&Gd===tc||(Gd=tc,Q.uniform1f(m.location,tc));Mc=F.color;id=Mc[0];Wb=Mc[1];Pb=Mc[2];$b=Mc[3];C&&ed===id&&dc===Wb&&Ha===Pb&&lb===$b||(ed=id,dc=Wb,Ha=Pb,lb=$b,Q.uniform4f(b.location,id,Wb,Pb,$b));yb=Ca.call(this,M,F,C);Nb=yb[0];gc=yb[1];
C&&Qb===Nb&&ic===gc||(Qb=Nb,ic=gc,Q.uniform2f(S.location,Nb,gc));Tc=h.call(this,M,F,C);Cc=Tc[0];Ec=Tc[1];C&&Dc===Cc&&Nc===Ec||(Dc=Cc,Nc=Ec,Q.uniform2f(P.location,Cc,Ec));ad=F.positionOffset;Uc=ad[0];Kb=ad[1];C&&Oc===Uc&&Gb===Kb||(Oc=Uc,Gb=Kb,Q.uniform2f(Ta.location,Uc,Kb));Pc=F.opacity;C&&Ic===Pc||(Ic=Pc,Q.uniform1f(Y.location,Pc));(Vc=g.call(this,M,F,C))&&"framebuffer"===Vc._reglType&&(Vc=Vc.color[0]);hc=Vc._texture;Q.uniform1i(v.location,hc.bind());Xc=F.offset;if(fd=F.count)0<kb?Ba?B.drawElementsInstancedANGLE(0,
fd,Ba.type,Xc<<(Ba.type-5121>>1),kb):B.drawArraysInstancedANGLE(0,Xc,fd,kb):0>kb&&(Ba?Q.drawElements(0,fd,Ba.type,Xc<<(Ba.type-5121>>1)):Q.drawArrays(0,Xc,fd)),hc.unbind()}Gc&&H.destroyStream(Sc);Sd&&H.destroyStream(Tb);ob&&H.destroyStream(va);Ob&&H.destroyStream(fb);R.dirty=!0;Ma.setVAO(null);M.viewportWidth=t;M.viewportHeight=r;x&&(y.cpuTime+=performance.now()-A)},draw:function(c){var g,h,t,l,r,x,p,B,C,F,G,K,L,O,U,ja,ba,ea,Ca,wa,ka,Fa,ac,lf,bf,xd,De,be,Pd,Yd,le,pd,ld,wd,od,gd,Ac,qd,Rc,Lc,sc,$a,
jc,Fb,rc,Ua,Jc,cc,$c,Nd,md,Bc,Xb,Gc,Sc,La,ub,Xa,pa,vd,Bb,Sa,Vb,cb,Yb,Rb,Ee,bc,Sb,Sd,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb;g=Ja.next;g!==Ja.cur&&(g?Q.bindFramebuffer(36160,g.framebuffer):Q.bindFramebuffer(36160,null),Ja.cur=g);if(R.dirty){var Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc;Ia=ha.dither;Ia!==R.dither&&(Ia?Q.enable(3024):Q.disable(3024),R.dither=Ia);Cb=V[0];Ab=V[1];if(Cb!==sb[0]||Ab!==sb[1])Q.blendEquationSeparate(Cb,
Ab),sb[0]=Cb,sb[1]=Ab;Ra=ha.depth_func;Ra!==R.depth_func&&(Q.depthFunc(Ra),R.depth_func=Ra);Kc=mc[0];Jb=mc[1];if(Kc!==ud[0]||Jb!==ud[1])Q.depthRange(Kc,Jb),ud[0]=Kc,ud[1]=Jb;Lb=ha.depth_mask;Lb!==R.depth_mask&&(Q.depthMask(Lb),R.depth_mask=Lb);Ub=ec[0];xa=ec[1];Td=ec[2];Ka=ec[3];if(Ub!==pc[0]||xa!==pc[1]||Td!==pc[2]||Ka!==pc[3])Q.colorMask(Ub,xa,Td,Ka),pc[0]=Ub,pc[1]=xa,pc[2]=Td,pc[3]=Ka;Ob=ha.cull_enable;Ob!==R.cull_enable&&(Ob?Q.enable(2884):Q.disable(2884),R.cull_enable=Ob);fb=ha.cull_face;fb!==
R.cull_face&&(Q.cullFace(fb),R.cull_face=fb);hb=ha.frontFace;hb!==R.frontFace&&(Q.frontFace(hb),R.frontFace=hb);ya=ha.lineWidth;ya!==R.lineWidth&&(Q.lineWidth(ya),R.lineWidth=ya);fc=ha.polygonOffset_enable;fc!==R.polygonOffset_enable&&(fc?Q.enable(32823):Q.disable(32823),R.polygonOffset_enable=fc);Ea=wc[0];pb=wc[1];if(Ea!==aa[0]||pb!==aa[1])Q.polygonOffset(Ea,pb),aa[0]=Ea,aa[1]=pb;qb=ha.sample_alpha;qb!==R.sample_alpha&&(qb?Q.enable(32926):Q.disable(32926),R.sample_alpha=qb);Ya=ha.sample_enable;Ya!==
R.sample_enable&&(Ya?Q.enable(32928):Q.disable(32928),R.sample_enable=Ya);Za=J[0];oc=J[1];if(Za!==ia[0]||oc!==ia[1])Q.sampleCoverage(Za,oc),ia[0]=Za,ia[1]=oc;cd=ha.stencil_mask;cd!==R.stencil_mask&&(Q.stencilMask(cd),R.stencil_mask=cd);uc=Qc[0];Wa=Qc[1];Mb=Qc[2];if(uc!==xc[0]||Wa!==xc[1]||Mb!==xc[2])Q.stencilFunc(uc,Wa,Mb),xc[0]=uc,xc[1]=Wa,xc[2]=Mb;dd=ga[0];Ga=ga[1];yc=ga[2];Qa=ga[3];if(dd!==ta[0]||Ga!==ta[1]||yc!==ta[2]||Qa!==ta[3])Q.stencilOpSeparate(dd,Ga,yc,Qa),ta[0]=dd,ta[1]=Ga,ta[2]=yc,ta[3]=
Qa;Ba=D[0];kb=D[1];wb=D[2];Db=D[3];if(Ba!==w[0]||kb!==w[1]||wb!==w[2]||Db!==w[3])Q.stencilOpSeparate(Ba,kb,wb,Db),w[0]=Ba,w[1]=kb,w[2]=wb,w[3]=Db;rb=ha.scissor_enable;rb!==R.scissor_enable&&(rb?Q.enable(3089):Q.disable(3089),R.scissor_enable=rb);vc=Da[0];xb=Da[1];rd=Da[2];tc=Da[3];if(vc!==tb[0]||xb!==tb[1]||rd!==tb[2]||tc!==tb[3])Q.scissor(vc,xb,rd,tc),tb[0]=vc,tb[1]=xb,tb[2]=rd,tb[3]=tc}h=this.viewport;t=h.x|0;l=h.y|0;r="width"in h?h.width|0:M.framebufferWidth-t;x="height"in h?h.height|0:M.framebufferHeight-
l;p=M.viewportWidth;M.viewportWidth=r;B=M.viewportHeight;M.viewportHeight=x;Q.viewport(t,l,r,x);fa[0]=t;fa[1]=l;fa[2]=r;fa[3]=x;Q.blendColor(0,0,0,1);bb[0]=0;bb[1]=0;bb[2]=0;bb[3]=1;Q.enable(3042);R.blend_enable=!0;Q.blendFuncSeparate(770,771,773,1);ra[0]=770;ra[1]=771;ra[2]=773;ra[3]=1;Q.disable(2929);R.depth_enable=!1;Q.disable(2960);R.stencil_enable=!1;if(C=R.profile)F=performance.now(),y.count++;Q.useProgram(n.program);G=Zb.angle_instanced_arrays;Ma.setVAO(null);z.buffer=this.sizeBuffer;K=!1;
L=null;O=0;U=!1;ba=ja=0;ea=1;Ca=0;wa=5126;lf=ac=Fa=ka=0;u(z)?(K=!0,L=H.createStream(34962,z),wa=L.dtype):(L=H.getBuffer(z))?wa=L.dtype:"constant"in z?(ea=2,"number"===typeof z.constant?(Fa=z.constant,ac=lf=ka=0):(Fa=0<z.constant.length?z.constant[0]:0,ac=1<z.constant.length?z.constant[1]:0,lf=2<z.constant.length?z.constant[2]:0,ka=3<z.constant.length?z.constant[3]:0)):(L=u(z.buffer)?H.createStream(34962,z.buffer):H.getBuffer(z.buffer),wa="type"in z?oa[z.type]:L.dtype,U=!!z.normalized,ba=z.size|0,
ja=z.offset|0,Ca=z.stride|0,O=z.divisor|0);bf=Oa.location;xd=Z[bf];if(1===ea){xd.buffer||Q.enableVertexAttribArray(bf);De=ba||1;if(xd.type!==wa||xd.size!==De||xd.buffer!==L||xd.normalized!==U||xd.offset!==ja||xd.stride!==Ca)Q.bindBuffer(34962,L.buffer),Q.vertexAttribPointer(bf,De,wa,U,Ca,ja),xd.type=wa,xd.size=De,xd.buffer=L,xd.normalized=U,xd.offset=ja,xd.stride=Ca;xd.divisor!==O&&(G.vertexAttribDivisorANGLE(bf,O),xd.divisor=O)}else if(xd.buffer&&(Q.disableVertexAttribArray(bf),xd.buffer=null),xd.x!==
Fa||xd.y!==ac||xd.z!==lf||xd.w!==ka)Q.vertexAttrib4f(bf,Fa,ac,lf,ka),xd.x=Fa,xd.y=ac,xd.z=lf,xd.w=ka;E.buffer=this.sizeBuffer;be=!1;Pd=null;Yd=0;le=!1;ld=pd=0;wd=1;od=0;gd=5126;Lc=Rc=qd=Ac=0;u(E)?(be=!0,Pd=H.createStream(34962,E),gd=Pd.dtype):(Pd=H.getBuffer(E))?gd=Pd.dtype:"constant"in E?(wd=2,"number"===typeof E.constant?(qd=E.constant,Rc=Lc=Ac=0):(qd=0<E.constant.length?E.constant[0]:0,Rc=1<E.constant.length?E.constant[1]:0,Lc=2<E.constant.length?E.constant[2]:0,Ac=3<E.constant.length?E.constant[3]:
0)):(Pd=u(E.buffer)?H.createStream(34962,E.buffer):H.getBuffer(E.buffer),gd="type"in E?oa[E.type]:Pd.dtype,le=!!E.normalized,ld=E.size|0,pd=E.offset|0,od=E.stride|0,Yd=E.divisor|0);sc=I.location;$a=Z[sc];if(1===wd){$a.buffer||Q.enableVertexAttribArray(sc);jc=ld||1;if($a.type!==gd||$a.size!==jc||$a.buffer!==Pd||$a.normalized!==le||$a.offset!==pd||$a.stride!==od)Q.bindBuffer(34962,Pd.buffer),Q.vertexAttribPointer(sc,jc,gd,le,od,pd),$a.type=gd,$a.size=jc,$a.buffer=Pd,$a.normalized=le,$a.offset=pd,$a.stride=
od;$a.divisor!==Yd&&(G.vertexAttribDivisorANGLE(sc,Yd),$a.divisor=Yd)}else if($a.buffer&&(Q.disableVertexAttribArray(sc),$a.buffer=null),$a.x!==qd||$a.y!==Rc||$a.z!==Lc||$a.w!==Ac)Q.vertexAttrib4f(sc,qd,Rc,Lc,Ac),$a.x=qd,$a.y=Rc,$a.z=Lc,$a.w=Ac;Fb=this.charBuffer;rc=!1;Ua=null;Jc=0;cc=!1;Nd=$c=0;md=1;Bc=0;Xb=5126;ub=La=Sc=Gc=0;u(Fb)?(rc=!0,Ua=H.createStream(34962,Fb),Xb=Ua.dtype):(Ua=H.getBuffer(Fb))?Xb=Ua.dtype:"constant"in Fb?(md=2,"number"===typeof Fb.constant?(Sc=Fb.constant,La=ub=Gc=0):(Sc=0<
Fb.constant.length?Fb.constant[0]:0,La=1<Fb.constant.length?Fb.constant[1]:0,ub=2<Fb.constant.length?Fb.constant[2]:0,Gc=3<Fb.constant.length?Fb.constant[3]:0)):(Ua=u(Fb.buffer)?H.createStream(34962,Fb.buffer):H.getBuffer(Fb.buffer),Xb="type"in Fb?oa[Fb.type]:Ua.dtype,cc=!!Fb.normalized,Nd=Fb.size|0,$c=Fb.offset|0,Bc=Fb.stride|0,Jc=Fb.divisor|0);Xa=na.location;pa=Z[Xa];if(1===md){pa.buffer||Q.enableVertexAttribArray(Xa);vd=Nd||1;if(pa.type!==Xb||pa.size!==vd||pa.buffer!==Ua||pa.normalized!==cc||pa.offset!==
$c||pa.stride!==Bc)Q.bindBuffer(34962,Ua.buffer),Q.vertexAttribPointer(Xa,vd,Xb,cc,Bc,$c),pa.type=Xb,pa.size=vd,pa.buffer=Ua,pa.normalized=cc,pa.offset=$c,pa.stride=Bc;pa.divisor!==Jc&&(G.vertexAttribDivisorANGLE(Xa,Jc),pa.divisor=Jc)}else if(pa.buffer&&(Q.disableVertexAttribArray(Xa),pa.buffer=null),pa.x!==Sc||pa.y!==La||pa.z!==ub||pa.w!==Gc)Q.vertexAttrib4f(Xa,Sc,La,ub,Gc),pa.x=Sc,pa.y=La,pa.z=ub,pa.w=Gc;Bb=this.position;Sa=!1;Vb=null;cb=0;Yb=!1;Ee=Rb=0;bc=1;Sb=0;Sd=5126;vb=nb=Na=Tb=0;u(Bb)?(Sa=
!0,Vb=H.createStream(34962,Bb),Sd=Vb.dtype):(Vb=H.getBuffer(Bb))?Sd=Vb.dtype:"constant"in Bb?(bc=2,"number"===typeof Bb.constant?(Na=Bb.constant,nb=vb=Tb=0):(Na=0<Bb.constant.length?Bb.constant[0]:0,nb=1<Bb.constant.length?Bb.constant[1]:0,vb=2<Bb.constant.length?Bb.constant[2]:0,Tb=3<Bb.constant.length?Bb.constant[3]:0)):(Vb=u(Bb.buffer)?H.createStream(34962,Bb.buffer):H.getBuffer(Bb.buffer),Sd="type"in Bb?oa[Bb.type]:Vb.dtype,Yb=!!Bb.normalized,Ee=Bb.size|0,Rb=Bb.offset|0,Sb=Bb.stride|0,cb=Bb.divisor|
0);gb=la.location;Pa=Z[gb];if(1===bc){Pa.buffer||Q.enableVertexAttribArray(gb);qc=Ee||2;if(Pa.type!==Sd||Pa.size!==qc||Pa.buffer!==Vb||Pa.normalized!==Yb||Pa.offset!==Rb||Pa.stride!==Sb)Q.bindBuffer(34962,Vb.buffer),Q.vertexAttribPointer(gb,qc,Sd,Yb,Sb,Rb),Pa.type=Sd,Pa.size=qc,Pa.buffer=Vb,Pa.normalized=Yb,Pa.offset=Rb,Pa.stride=Sb;Pa.divisor!==cb&&(G.vertexAttribDivisorANGLE(gb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(Q.disableVertexAttribArray(gb),Pa.buffer=null),Pa.x!==Na||Pa.y!==nb||Pa.z!==vb||
Pa.w!==Tb)Q.vertexAttrib4f(gb,Na,nb,vb,Tb),Pa.x=Na,Pa.y=nb,Pa.z=vb,Pa.w=Tb;Ib=A.call(this,M,c,0);Q.uniform1f(da.location,Ib);sd=e.call(this,M,c,0);Q.uniform1f(k.location,sd);Q.uniform1f(f.location,c.align);Q.uniform1f(m.location,c.baseline);db=this.viewportArray;Q.uniform4f(qa.location,db[0],db[1],db[2],db[3]);nc=c.color;Q.uniform4f(b.location,nc[0],nc[1],nc[2],nc[3]);Hc=d.call(this,M,c,0);Q.uniform2f(S.location,Hc[0],Hc[1]);kc=q.call(this,M,c,0);Q.uniform2f(P.location,kc[0],kc[1]);ib=this.scale;
Q.uniform2f(mb.location,ib[0],ib[1]);jb=this.translate;Q.uniform2f(Eb.location,jb[0],jb[1]);sa=c.positionOffset;Q.uniform2f(Ta.location,sa[0],sa[1]);Q.uniform1f(Y.location,c.opacity);(ob=a.call(this,M,c,0))&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);va=ob._texture;Q.uniform1i(v.location,va.bind());(Va=ua.elements)?Q.bindBuffer(34963,Va.buffer.buffer):Ma.currentVAO&&(Va=N.getElements(Ma.currentVAO.elements))&&Q.bindBuffer(34963,Va.buffer.buffer);ab=c.offset;if(Aa=c.count)eb=ua.instances,0<eb?
Va?G.drawElementsInstancedANGLE(0,Aa,Va.type,ab<<(Va.type-5121>>1),eb):G.drawArraysInstancedANGLE(0,ab,Aa,eb):0>eb&&(Va?Q.drawElements(0,Aa,Va.type,ab<<(Va.type-5121>>1)):Q.drawArrays(0,ab,Aa)),R.dirty=!0,Ma.setVAO(null),M.viewportWidth=p,M.viewportHeight=B,C&&(y.cpuTime+=performance.now()-F),K&&H.destroyStream(L),be&&H.destroyStream(Pd),rc&&H.destroyStream(Ua),Sa&&H.destroyStream(Vb),va.unbind()},scope:function(b,a,c){var d,f,e,g,h,k,m,n,q,v,w,A,D,I,J,G,S,P,N,O,Q,aa,Y,V,fa,Z,da,Ca,ga,na,ia,ta,ka,
la,qa,ra,Da,Ja,Ma,Oa,wc,bb,Ta,Ua,tb,mb,sb,Eb,ud,Zb,Xb,ec,pc,La,ub,Xa,pa,mc,Bb,Sa,Vb,cb,Yb,Rb,xc,bc,Sb,Qc,Tb,Na,nb,vb,gb,Pa,qc,Ib,sd,db,nc,Hc,kc,ib,jb,sa,ob,va,Va,ab,Aa,eb,Ia,Cb,Ab,Ra,Kc,Jb,Lb,Ub,xa,Td,Ka,Ob,fb,hb,ya,fc,Ea,pb,qb,Ya,Za,oc,cd,uc,Wa,Mb,dd,Ga,yc,Qa,Ba,kb,wb,Db,rb,vc,xb,rd,tc,Gd,Mc,id,ed,Wb,dc,Pb,Ha,$b,lb,yb,Nb,Qb,gc,ic,Tc,Cc,Dc,Ec,Nc,ad,Uc,Oc,Kb,Gb,Pc,Ic,Vc,hc,Xc;d=this.viewport;f=d.x|0;e=d.y|0;g="width"in d?d.width|0:M.framebufferWidth-f;h="height"in d?d.height|0:M.framebufferHeight-
e;k=M.viewportWidth;M.viewportWidth=g;m=M.viewportHeight;M.viewportHeight=h;n=U[0];U[0]=f;q=U[1];U[1]=e;v=U[2];U[2]=g;w=U[3];U[3]=h;A=ac[0];ac[0]=0;D=ac[1];ac[1]=0;I=ac[2];ac[2]=0;J=ac[3];ac[3]=1;G=ha.blend_enable;ha.blend_enable=!0;S=ea[0];ea[0]=770;P=ea[1];ea[1]=771;N=ea[2];ea[2]=773;O=ea[3];ea[3]=1;Q=ha.depth_enable;ha.depth_enable=!1;aa=ha.stencil_enable;ha.stencil_enable=!1;if(Y=R.profile)V=performance.now(),y.count++;fa=b.offset;Z=ua.offset;ua.offset=fa;da=b.count;Ca=ua.count;ua.count=da;ga=
ua.primitive;ua.primitive=0;na=b.align;ia=Fa[64];Fa[64]=na;ta=t.call(this,M,b,c);ka=Fa[69];Fa[69]=ta;la=C.call(this,M,b,c);qa=Fa[67];Fa[67]=la;ra=wa.call(this,M,b,c);Da=Fa[66];Fa[66]=ra;Ja=b.baseline;Ma=Fa[65];Fa[65]=Ja;Oa=K.call(this,M,b,c);wc=Fa[62];Fa[62]=Oa;bb=b.color;Ta=Fa[14];Fa[14]=bb;Ua=L.call(this,M,b,c);tb=Fa[63];Fa[63]=Ua;mb=b.opacity;sb=Fa[10];Fa[10]=mb;Eb=b.positionOffset;ud=Fa[68];Fa[68]=Eb;Zb=this.scale;Xb=Fa[6];Fa[6]=Zb;ec=this.translate;pc=Fa[8];Fa[8]=ec;La=this.viewportArray;ub=
Fa[3];Fa[3]=La;Xa=this.charBuffer;pa=!1;mc=null;Bb=0;Sa=!1;cb=Vb=0;Yb=1;Rb=0;xc=5126;Tb=Qc=Sb=bc=0;u(Xa)?(pa=!0,mc=H.createStream(34962,Xa),xc=mc.dtype):(mc=H.getBuffer(Xa))?xc=mc.dtype:"constant"in Xa?(Yb=2,"number"===typeof Xa.constant?(Sb=Xa.constant,Qc=Tb=bc=0):(Sb=0<Xa.constant.length?Xa.constant[0]:0,Qc=1<Xa.constant.length?Xa.constant[1]:0,Tb=2<Xa.constant.length?Xa.constant[2]:0,bc=3<Xa.constant.length?Xa.constant[3]:0)):(mc=u(Xa.buffer)?H.createStream(34962,Xa.buffer):H.getBuffer(Xa.buffer),
xc="type"in Xa?oa[Xa.type]:mc.dtype,Sa=!!Xa.normalized,cb=Xa.size|0,Vb=Xa.offset|0,Rb=Xa.stride|0,Bb=Xa.divisor|0);Na=r.buffer;r.buffer=mc;nb=r.divisor;r.divisor=Bb;vb=r.normalized;r.normalized=Sa;gb=r.offset;r.offset=Vb;Pa=r.size;r.size=cb;qc=r.state;r.state=Yb;Ib=r.stride;r.stride=Rb;sd=r.type;r.type=xc;db=r.w;r.w=bc;nc=r.x;r.x=Sb;Hc=r.y;r.y=Qc;kc=r.z;r.z=Tb;E.buffer=this.sizeBuffer;ib=!1;jb=null;sa=0;ob=!1;Va=va=0;ab=1;Aa=0;eb=5126;Ra=Ab=Cb=Ia=0;u(E)?(ib=!0,jb=H.createStream(34962,E),eb=jb.dtype):
(jb=H.getBuffer(E))?eb=jb.dtype:"constant"in E?(ab=2,"number"===typeof E.constant?(Cb=E.constant,Ab=Ra=Ia=0):(Cb=0<E.constant.length?E.constant[0]:0,Ab=1<E.constant.length?E.constant[1]:0,Ra=2<E.constant.length?E.constant[2]:0,Ia=3<E.constant.length?E.constant[3]:0)):(jb=u(E.buffer)?H.createStream(34962,E.buffer):H.getBuffer(E.buffer),eb="type"in E?oa[E.type]:jb.dtype,ob=!!E.normalized,Va=E.size|0,va=E.offset|0,Aa=E.stride|0,sa=E.divisor|0);Kc=B.buffer;B.buffer=jb;Jb=B.divisor;B.divisor=sa;Lb=B.normalized;
B.normalized=ob;Ub=B.offset;B.offset=va;xa=B.size;B.size=Va;Td=B.state;B.state=ab;Ka=B.stride;B.stride=Aa;Ob=B.type;B.type=eb;fb=B.w;B.w=Ia;hb=B.x;B.x=Cb;ya=B.y;B.y=Ab;fc=B.z;B.z=Ra;Ea=this.position;pb=!1;qb=null;Ya=0;Za=!1;cd=oc=0;uc=1;Wa=0;Mb=5126;Qa=yc=Ga=dd=0;u(Ea)?(pb=!0,qb=H.createStream(34962,Ea),Mb=qb.dtype):(qb=H.getBuffer(Ea))?Mb=qb.dtype:"constant"in Ea?(uc=2,"number"===typeof Ea.constant?(Ga=Ea.constant,yc=Qa=dd=0):(Ga=0<Ea.constant.length?Ea.constant[0]:0,yc=1<Ea.constant.length?Ea.constant[1]:
0,Qa=2<Ea.constant.length?Ea.constant[2]:0,dd=3<Ea.constant.length?Ea.constant[3]:0)):(qb=u(Ea.buffer)?H.createStream(34962,Ea.buffer):H.getBuffer(Ea.buffer),Mb="type"in Ea?oa[Ea.type]:qb.dtype,Za=!!Ea.normalized,cd=Ea.size|0,oc=Ea.offset|0,Wa=Ea.stride|0,Ya=Ea.divisor|0);Ba=F.buffer;F.buffer=qb;kb=F.divisor;F.divisor=Ya;wb=F.normalized;F.normalized=Za;Db=F.offset;F.offset=oc;rb=F.size;F.size=cd;vc=F.state;F.state=uc;xb=F.stride;F.stride=Wa;rd=F.type;F.type=Mb;tc=F.w;F.w=dd;Gd=F.x;F.x=Ga;Mc=F.y;F.y=
yc;id=F.z;F.z=Qa;z.buffer=this.sizeBuffer;ed=!1;Wb=null;dc=0;Pb=!1;$b=Ha=0;lb=1;yb=0;Nb=5126;Tc=ic=gc=Qb=0;u(z)?(ed=!0,Wb=H.createStream(34962,z),Nb=Wb.dtype):(Wb=H.getBuffer(z))?Nb=Wb.dtype:"constant"in z?(lb=2,"number"===typeof z.constant?(gc=z.constant,ic=Tc=Qb=0):(gc=0<z.constant.length?z.constant[0]:0,ic=1<z.constant.length?z.constant[1]:0,Tc=2<z.constant.length?z.constant[2]:0,Qb=3<z.constant.length?z.constant[3]:0)):(Wb=u(z.buffer)?H.createStream(34962,z.buffer):H.getBuffer(z.buffer),Nb="type"in
z?oa[z.type]:Wb.dtype,Pb=!!z.normalized,$b=z.size|0,Ha=z.offset|0,yb=z.stride|0,dc=z.divisor|0);Cc=x.buffer;x.buffer=Wb;Dc=x.divisor;x.divisor=dc;Ec=x.normalized;x.normalized=Pb;Nc=x.offset;x.offset=Ha;ad=x.size;x.size=$b;Uc=x.state;x.state=lb;Oc=x.stride;x.stride=yb;Kb=x.type;x.type=Nb;Gb=x.w;x.w=Qb;Pc=x.x;x.x=gc;Ic=x.y;x.y=ic;Vc=x.z;x.z=Tc;hc=ba.vert;ba.vert=61;Xc=ba.frag;ba.frag=60;R.dirty=!0;a(M,b,c);M.viewportWidth=k;M.viewportHeight=m;U[0]=n;U[1]=q;U[2]=v;U[3]=w;ac[0]=A;ac[1]=D;ac[2]=I;ac[3]=
J;ha.blend_enable=G;ea[0]=S;ea[1]=P;ea[2]=N;ea[3]=O;ha.depth_enable=Q;ha.stencil_enable=aa;Y&&(y.cpuTime+=performance.now()-V);ua.offset=Z;ua.count=Ca;ua.primitive=ga;Fa[64]=ia;Fa[69]=ka;Fa[67]=qa;Fa[66]=Da;Fa[65]=Ma;Fa[62]=wc;Fa[14]=Ta;Fa[63]=tb;Fa[10]=sb;Fa[68]=ud;Fa[6]=Xb;Fa[8]=pc;Fa[3]=ub;pa&&H.destroyStream(mc);r.buffer=Na;r.divisor=nb;r.normalized=vb;r.offset=gb;r.size=Pa;r.state=qc;r.stride=Ib;r.type=sd;r.w=db;r.x=nc;r.y=Hc;r.z=kc;ib&&H.destroyStream(jb);B.buffer=Kc;B.divisor=Jb;B.normalized=
Lb;B.offset=Ub;B.size=xa;B.state=Td;B.stride=Ka;B.type=Ob;B.w=fb;B.x=hb;B.y=ya;B.z=fc;pb&&H.destroyStream(qb);F.buffer=Ba;F.divisor=kb;F.normalized=wb;F.offset=Db;F.size=rb;F.state=vc;F.stride=xb;F.type=rd;F.w=tc;F.x=Gd;F.y=Mc;F.z=id;ed&&H.destroyStream(Wb);x.buffer=Cc;x.divisor=Dc;x.normalized=Ec;x.offset=Nc;x.size=ad;x.state=Uc;x.stride=Oc;x.type=Kb;x.w=Gb;x.x=Pc;x.y=Ic;x.z=Vc;ba.vert=hc;ba.frag=Xc;R.dirty=!0}}}}},{}],25:[function(y,C,Ta){var c=y("./sorted-object-keys");C.exports=function(y,n){for(var A=
c(n),e=0;e<A.length;++e)y[A[e]]=n[A[e]];return y}},{"./sorted-object-keys":34}],26:[function(y,C,Ta){function c(c,e,d,n,a,t){for(var y=0;y<e;++y)for(var C=c[y],K=0;K<d;++K)for(var L=C[K],r=0;r<n;++r)a[t++]=L[r]}function W(n,e,d,q,a){for(var t=1,y=d+1;y<e.length;++y)t*=e[y];var C=e[d];if(4===e.length-d){var K=e[d+1],L=e[d+2];e=e[d+3];for(y=0;y<C;++y)c(n[y],K,L,e,q,a),a+=t}else for(y=0;y<C;++y)W(n[y],e,d+1,q,a),a+=t}var n=y("./pool");C.exports={shape:function(c){for(var e=[];c.length;c=c[0])e.push(c.length);
return e},flatten:function(A,e,d,q){var a=1;if(e.length)for(var t=0;t<e.length;++t)a*=e[t];else a=0;d=q||n.allocType(d,a);switch(e.length){case 0:break;case 1:q=e[0];for(e=0;e<q;++e)d[e]=A[e];break;case 2:q=e[0];e=e[1];for(t=a=0;t<q;++t)for(var y=A[t],C=0;C<e;++C)d[a++]=y[C];break;case 3:c(A,e[0],e[1],e[2],d,0);break;default:W(A,e,0,d,0)}return d}}},{"./pool":32}],27:[function(y,C,Ta){var c=y("./is-typed-array");C.exports=function(y){return Array.isArray(y)||c(y)}},{"./is-typed-array":30}],28:[function(y,
C,Ta){var c=y("./is-typed-array");C.exports=function(y){return!!y&&"object"===typeof y&&Array.isArray(y.shape)&&Array.isArray(y.stride)&&"number"===typeof y.offset&&y.shape.length===y.stride.length&&(Array.isArray(y.data)||c(y.data))}},{"./is-typed-array":30}],29:[function(y,C,Ta){C.exports=function(c){return!(c&c-1)&&!!c}},{}],30:[function(y,C,Ta){C.exports=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||
c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray}},{}],31:[function(y,C,Ta){C.exports=function(c,y){for(var n=Array(c),A=0;A<c;++A)n[A]=y(A);return n}},{}],32:[function(y,C,Ta){function c(c){var e,d;e=(65535<c)<<4;c>>>=e;d=(255<c)<<3;c>>>=d;e|=d;d=(15<c)<<2;c>>>=d;e|=d;d=(3<c)<<1;return e|d|c>>>d>>1}function W(){function y(e){a:{for(var a=16;268435456>=a;a*=16)if(e<=a){e=a;break a}e=0}a=d[c(e)>>2];return 0<a.length?a.pop():new ArrayBuffer(e)}
function e(e){d[c(e.byteLength)>>2].push(e)}var d=n(8,function(){return[]});return{alloc:y,free:e,allocType:function(c,a){var d=null;switch(c){case 5120:d=new Int8Array(y(a),0,a);break;case 5121:d=new Uint8Array(y(a),0,a);break;case 5122:d=new Int16Array(y(2*a),0,a);break;case 5123:d=new Uint16Array(y(2*a),0,a);break;case 5124:d=new Int32Array(y(4*a),0,a);break;case 5125:d=new Uint32Array(y(4*a),0,a);break;case 5126:d=new Float32Array(y(4*a),0,a);break;default:return null}return d.length!==a?d.subarray(0,
a):d},freeType:function(c){e(c.buffer)}}}var n=y("./loop");y=W();y.zero=W();C.exports=y},{"./loop":31}],33:[function(y,C,Ta){C.exports={next:"function"===typeof requestAnimationFrame?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:"function"===typeof cancelAnimationFrame?function(c){return cancelAnimationFrame(c)}:clearTimeout}},{}],34:[function(y,C,Ta){C.exports=function(c){return Object.keys(c).sort()}},{}],35:[function(y,C,Ta){var c=y("./pool"),W=new Float32Array(1),
n=new Uint32Array(W.buffer);C.exports=function(y){for(var e=c.allocType(5123,y.length),d=0;d<y.length;++d)if(isNaN(y[d]))e[d]=65535;else if(Infinity===y[d])e[d]=31744;else if(-Infinity===y[d])e[d]=64512;else{W[0]=y[d];var q=n[0],a=q>>>31<<15,t=(q<<1>>>24)-127,q=q>>13&1023;e[d]=-24>t?a:-14>t?a+(q+1024>>-14-t):15<t?a+31744:a+(t+15<<10)+q}return e}},{"./pool":32}],36:[function(y,C,Ta){var c=y("./sorted-object-keys");C.exports=function(y){return c(y).map(function(c){return y[c]})}},{"./sorted-object-keys":34}],
37:[function(y,C,Ta){function c(c,a,e){function n(){var a=window.innerWidth,d=window.innerHeight;c!==document.body&&(d=y.getBoundingClientRect(),a=d.right-d.left,d=d.bottom-d.top);y.width=e*a;y.height=e*d}var y=document.createElement("canvas");d(y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});c.appendChild(y);c===document.body&&(y.style.position="absolute",d(c.style,{margin:0,padding:0}));var A;c!==document.body&&"function"===typeof ResizeObserver?(A=new ResizeObserver(function(){setTimeout(n)}),
A.observe(c)):window.addEventListener("resize",n,!1);n();return{canvas:y,onDestroy:function(){A?A.disconnect():window.removeEventListener("resize",n);c.removeChild(y)}}}function W(c,a){function d(e){try{return c.getContext(e,a)}catch(n){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function n(c){if("string"===typeof c)return c.split();e(Array.isArray(c),"invalid extension array");return c}function A(c){return"string"===typeof c?(e("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(c)):c}var e=y("./util/check"),d=y("./util/extend");C.exports=function(d){var a=d||{},t,y,C,K;d={};var L=[],r=[],B="undefined"===typeof window?1:window.devicePixelRatio,F=!1,x=function(a){a&&e.raise(a)},G=function(){};"string"===typeof a?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),t=document.querySelector(a),e(t,"invalid query string for element")):"object"===typeof a?"string"===typeof a.nodeName&&"function"===typeof a.appendChild&&
"function"===typeof a.getBoundingClientRect?t=a:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?(K=a,C=K.canvas):(e.constructor(a),"gl"in a?K=a.gl:"canvas"in a?C=A(a.canvas):"container"in a&&(y=A(a.container)),"attributes"in a&&(d=a.attributes,e.type(d,"object","invalid context attributes")),"extensions"in a&&(L=n(a.extensions)),"optionalExtensions"in a&&(r=n(a.optionalExtensions)),"onDone"in a&&(e.type(a.onDone,"function","invalid or missing onDone callback"),x=a.onDone),"profile"in
a&&(F=!!a.profile),"pixelRatio"in a&&(B=+a.pixelRatio,e(0<B,"invalid pixel ratio"))):e.raise("invalid arguments to regl");t&&("canvas"===t.nodeName.toLowerCase()?C=t:y=t);if(!K){if(!C){e("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");t=c(y||document.body,x,B);if(!t)return null;C=t.canvas;G=t.onDestroy}void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!0);K=W(C,d)}return K?{gl:K,canvas:C,container:y,extensions:L,optionalExtensions:r,pixelRatio:B,
profile:F,onDone:x,onDestroy:G}:(G(),x("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(y,C,Ta){var c=y("element-size");C.exports=function(n,y,e){function d(){var a=d.parent||n.parentNode;if("function"===typeof a)var e=a(W)||W,a=e[0],e=e[1];else a&&a!==document.body?(e=c(a),a=e[0]|0,e=e[1]|0):(a=window.innerWidth,e=window.innerHeight);q?(n.setAttribute("width",a*d.scale+"px"),n.setAttribute("height",
e*d.scale+"px")):(n.width=a*d.scale,n.height=e*d.scale);n.style.width=a+"px";n.style.height=e+"px";return d}var q="SVG"===n.nodeName.toUpperCase();n.style.position=n.style.position||"absolute";n.style.top=0;n.style.left=0;d.scale=parseFloat(e||1);d.parent=y;return d()};var W=new Float32Array(2)},{"element-size":39}],39:[function(y,C,Ta){function c(c){return parseFloat(c)||0}C.exports=function(y){if(y===window||y===document.body)return[window.innerWidth,window.innerHeight];if(!y.parentNode){var n=
!0;document.body.appendChild(y)}var A=y.getBoundingClientRect(),e=getComputedStyle(y),d=(A.height|0)+c(e.getPropertyValue("margin-top"))+c(e.getPropertyValue("margin-bottom")),A=(A.width|0)+c(e.getPropertyValue("margin-left"))+c(e.getPropertyValue("margin-right"));n&&document.body.removeChild(y);return[A,d]}},{}],40:[function(y,C,Ta){function c(c){throw Error("resl: "+c);}function W(d,a,e){Object.keys(d).forEach(function(d){0>a.indexOf(d)&&c('invalid parameter "'+d+'" in '+e)})}function n(c,a){this.state=
0;this.ready=!1;this.progress=0;this.name=c;this.cancel=a}var A=["manifest","onDone","onProgress","onError"],e=["type","src","stream","credentials","parser"],d=["onData","onDone"];C.exports=function(q){function a(a,d){if(a in q){var e=q[a];"function"!==typeof e&&c('invalid callback "'+a+'"');return e}return null}function t(a){function c(){if(!(2>r.readyState||1===y.state||-1===y.state)){if(200!==r.status)return C('error loading resource "'+a.name+'"');if(2<r.readyState&&0===y.state){var e;e="binary"===
a.type?r.response:r.responseText;if(t.data)try{m=t.data(e)}catch(f){return C(f)}else m=e}if(3<r.readyState&&0===y.state){if(t.done)try{m=t.done()}catch(f){return C(f)}y.state=1}x[d]=m;y.progress=.75*y.progress+.25;y.ready=a.stream&&!!m||1===y.state;K()}}var d=a.name,e=a.stream,q="binary"===a.type,t=a.parser,r=new XMLHttpRequest,m=null,y=new n(d,function(){1!==y.state&&-1!==y.state&&(r.onreadystatechange=null,r.abort(),y.state=-1)});r.onreadystatechange=e?c:function(){4===r.readyState&&c()};q&&(r.responseType=
"arraybuffer");a.credentials&&(r.withCredentials=!0);r.open("GET",a.src,!0);r.send();return y}function y(a,c){function d(){if(0===B.state)if(A.data)try{F=A.data(c)}catch(b){return C(b)}else F=c}function e(b){d();x[m]=F;B.progress=b.lengthComputable?Math.max(B.progress,b.loaded/b.total):.75*B.progress+.25;K(m)}function q(){d();if(0===B.state){if(A.done)try{F=A.done()}catch(b){return C(b)}B.state=1}B.progress=1;B.ready=!0;x[m]=F;t();K("finish "+m)}function r(){C('error loading asset "'+m+'"')}function t(){a.stream&&
c.removeEventListener("progress",e);"image"===a.type?c.addEventListener("load",q):c.addEventListener("canplay",q);c.removeEventListener("error",r)}var m=a.name,A=a.parser,B=new n(m,function(){1!==B.state&&-1!==B.state&&(B.state=-1,t(),c.src="")}),F=c;a.stream&&c.addEventListener("progress",e);if("image"===a.type)c.addEventListener("load",q);else{var b=!1,k=!1;c.addEventListener("loadedmetadata",function(){k=!0;b&&q()});c.addEventListener("canplay",function(){b=!0;k&&q()})}c.addEventListener("error",
r);c.crossOrigin=a.credentials?"use-credentials":"anonymous";c.src=a.src;return B}function C(a){-1!==G&&1!==G&&(G=-1,O.forEach(function(a){a.cancel()}),F?"string"===typeof a?F(Error("resl: "+a)):F(a):console.error("resl error:",a))}function K(a){if(-1!==G&&1!==G){var c=0,d=0;O.forEach(function(a){a.ready&&(d+=1);c+=a.progress});d===O.length?(G=1,r(x)):B&&B(c/O.length,a)}}"object"===typeof q&&q||c("invalid or missing configuration");W(q,A,"config");var L=q.manifest;"object"===typeof L&&L||c("missing manifest");
var r=a("onDone");r||c("missing onDone() callback");var B=a("onProgress"),F=a("onError"),x={},G=0,ka={text:t,binary:function(a){return t(a)},image:function(a){return y(a,document.createElement("img"))},video:function(a){return y(a,document.createElement("video"))},audio:function(a){return y(a,document.createElement("audio"))}},O=Object.keys(L).map(function(a){function h(a,d){if(a in g.parser){var e=g.parser[a];"function"!==typeof e&&c("invalid parser callback "+a+' for asset "'+a+'"');return e}return d}
var g=L[a];"string"===typeof g?g={src:g}:"object"===typeof g&&g||c('invalid asset definition "'+a+'"');W(g,e,'asset "'+a+'"');var f={};"parser"in g&&("function"===typeof g.parser?f={data:g.parser}:"object"===typeof g.parser&&g.parser?(W(f,d,'parser for asset "'+a+'"'),"onData"in f||c('missing onData callback for parser in asset "'+a+'"'),f={data:h("onData"),done:h("onDone")}):c('invalid parser for asset "'+a+'"'));return{name:a,type:function(d,e,f){d in g&&(f=g[d]);0>e.indexOf(f)&&c("invalid "+d+
' "'+f+'" for asset "'+a+'", possible values: '+e);return f}("type",Object.keys(ka),"text"),stream:!!g.stream,credentials:!!g.credentials,src:function(d,e,f){d in g?f=g[d]:e&&c("missing "+d+' for asset "'+a+'"');"string"!==typeof f&&c("invalid "+d+' for asset "'+a+'", must be a string');return f}("src",!0,""),parser:f}}).map(function(a){return ka[a.type](a)});0===O.length&&setTimeout(function(){K("done")},1)}},{}],41:[function(y,C,Ta){function c(a,c){for(var d=0;d<a.length;++d)if(a[d]===c)return d;
return-1}var W=y("./lib/util/check"),n=y("./lib/util/extend"),A=y("./lib/dynamic"),e=y("./lib/util/raf"),d=y("./lib/util/clock"),q=y("./lib/strings"),a=y("./lib/webgl"),t=y("./lib/extension"),ja=y("./lib/limits"),wa=y("./lib/buffer"),K=y("./lib/elements"),L=y("./lib/texture"),r=y("./lib/renderbuffer"),B=y("./lib/framebuffer"),F=y("./lib/attribute"),x=y("./lib/shader"),G=y("./lib/read"),ka=y("./lib/core"),O=y("./lib/stats"),Ca=y("./lib/timer");C.exports=function(h){function g(){if(0===sb.length)H&&
H.update(),pc=null;else{pc=e.next(g);b();for(var a=sb.length-1;0<=a;--a){var c=sb[a];c&&c(N,null,0)}la.flush();H&&H.update()}}function f(){!pc&&0<sb.length&&(pc=e.next(g))}function v(){pc&&(e.cancel(g),pc=null)}function y(a){a.preventDefault();mb=!0;v();ea.forEach(function(a){a()})}function C(a){la.getError();mb=!1;Eb.restore();ha.restore();Ja.restore();ba.restore();Fa.restore();Ma.restore();u.restore();H&&H.restore();ac.procs.refresh();f();ra.forEach(function(a){a()})}function m(a){function b(a,
c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(A.isDynamic(f))e[b]=A.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(A.isDynamic(f[g])){e[b]=A.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}W(!!a,"invalid args to regl({...})");W.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];
delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=n({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=ac.compile(a,f,e,d,g),k=h.draw,m=h.batch,q=h.scope,r=[];return n(function(a,b){var d;
mb&&W.raise("context lost");if("function"===typeof a)return q.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)q.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)q.call(this,a[d],b,d);else return q.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function na(a,b){var c=0;
ac.procs.poll();var d=b.color;d&&(la.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(la.clearDepth(+b.depth),c|=256);"stencil"in b&&(la.clearStencil(b.stencil|0),c|=1024);W(!!c,"called regl.clear with no buffer specified");la.clear(c)}function I(a){W.type(a,"function","regl.frame() callback must be a function");sb.push(a);f();return{cancel:function(){function b(){var a=c(sb,b);sb[a]=sb[sb.length-1];--sb.length;0>=sb.length&&v()}var d=c(sb,a);W(0<=d,"cannot cancel a frame twice");
sb[d]=b}}}function da(){var a=bb.viewport,b=bb.scissor_box;a[0]=a[1]=b[0]=b[1]=0;N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=a[2]=b[2]=la.drawingBufferWidth;N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=a[3]=b[3]=la.drawingBufferHeight}function b(){N.tick+=1;N.time=Y();da();ac.procs.poll()}function k(){ba.refresh();da();ac.procs.refresh();H&&H.update()}function Y(){return(d()-M)/1E3}console.log("REGL args are:",h);h=a(h);console.log("REGL configs are:",h);if(!h)return null;
var la=h.gl,Ta=la.getContextAttributes(),mb=la.isContextLost(),Eb=t(la,h);if(!Eb)return null;var qa=q(),Oa=O(),Z=Eb.extensions,H=Ca(la,Z),M=d(),R=la.drawingBufferWidth,ua=la.drawingBufferHeight,N={tick:0,time:0,viewportWidth:R,viewportHeight:ua,framebufferWidth:R,framebufferHeight:ua,drawingBufferWidth:R,drawingBufferHeight:ua,pixelRatio:h.pixelRatio},R={elements:null,primitive:4,count:-1,offset:0,instances:-1},Zb=ja(la,Z),Ja=wa(la,Oa,h,function(a){return u.destroyBuffer(a)}),Q=K(la,Z,Ja,Oa),u=F(la,
Z,Zb,Oa,Ja,Q,R),ha=x(la,qa,Oa,h),ba=L(la,Z,Zb,function(){ac.procs.poll()},N,Oa,h),Fa=r(la,Z,Zb,Oa,h),Ma=B(la,Z,Zb,ba,Fa,Oa),ac=ka(la,qa,Z,Zb,Ja,Q,ba,Ma,{},u,ha,R,N,H,h),qa=G(la,Ma,ac.procs.poll,N,Ta,Z,Zb),bb=ac.next,V=la.canvas,sb=[],ea=[],ra=[],ec=[h.onDestroy],pc=null;V&&(V.addEventListener("webglcontextlost",y,!1),V.addEventListener("webglcontextrestored",C,!1));var mc=Ma.setFBO=m({framebuffer:A.define.call(null,1,"framebuffer")});k();Ta=n(m,{clear:function(a){W("object"===typeof a&&a,"regl.clear() takes an object as input");
if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)mc(n({framebuffer:a.framebuffer.faces[b]},a),na);else mc(a,na);else na(null,a)},prop:A.define.bind(null,1),context:A.define.bind(null,2),"this":A.define.bind(null,3),draw:m({}),buffer:function(a){return Ja.create(a,34962,!1,!1)},elements:function(a){return Q.create(a,!1)},texture:ba.create2D,cube:ba.createCube,renderbuffer:Fa.create,framebuffer:Ma.create,framebufferCube:Ma.createCube,vao:u.createVAO,
attributes:Ta,frame:I,on:function(a,b){W.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return I(b);case "lost":c=ea;break;case "restore":c=ra;break;case "destroy":c=ec;break;default:W.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Zb,hasExtension:function(a){return 0<=Zb.extensions.indexOf(a.toLowerCase())},read:qa,destroy:function(){sb.length=
0;v();V&&(V.removeEventListener("webglcontextlost",y),V.removeEventListener("webglcontextrestored",C));ha.clear();Ma.clear();Fa.clear();u.clear();ba.clear();Q.clear();Ja.clear();H&&H.clear();ec.forEach(function(a){a()})},_gl:la,_refresh:k,poll:function(){b();H&&H.update()},now:Y,stats:Oa});h.onDone(null,Ta);return Ta}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,
"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
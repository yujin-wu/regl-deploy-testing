<!DOCTYPE html>
      <html>
        <head>
          <title>example/matrix_code.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function V(ia,za,a){function Z(h,k){if(!za[h]){if(!ia[h]){var q="function"==typeof require&&require;if(!k&&q)return q(h,!0);if(G)return G(h,!0);q=Error("Cannot find module '"+h+"'");throw q.code="MODULE_NOT_FOUND",q;}q=za[h]={exports:{}};ia[h][0].call(q.exports,function(e){return Z(ia[h][1][e]||e)},q,q.exports,V,ia,za,a)}return za[h].exports}for(var G="function"==typeof require&&require,J=0;J<a.length;J++)Z(a[J]);return Z}return V})()({1:[function(V,ia,za){document.body.style="background-color: black;";
document.addEventListener("touchmove",function(e){return e.preventDefault()},{passive:!1});ia=document.body.appendChild(document.createElement("canvas"));za=V("canvas-fit");window.addEventListener("resize",za(ia),!1);var a=V("../regl")({canvas:ia,extensions:["OES_texture_half_float","OES_texture_half_float_linear"],optionalExtensions:["EXT_color_buffer_half_float","WEBGL_color_buffer_float","OES_standard_derivatives"]}),Z=Array(2).fill().map(function(){return a.framebuffer({color:a.texture({radius:60,
type:"half float"}),depthStencil:!1})});ia=function(){return a.framebuffer({color:a.texture({type:"half float",min:"linear",mag:"linear"})})};var G=function(e,k,q,a){return e.forEach(function(e,h){return e.resize(Math.floor(k*a/Math.pow(2,h)),Math.floor(q*a/Math.pow(2,h)))})},J=ia(),h=Array(5).fill().map(ia),k=Array(5).fill().map(ia),q=Array(5).fill().map(ia),e=ia(),B=a({frag:"\n    precision highp float;\n\n    #define PI 3.14159265359\n    #define SQRT_2 1.4142135623730951\n    #define SQRT_5 2.23606797749979\n\n    uniform float glyphSequenceLength;\n    uniform float numColumns;\n    uniform float glyphTextureColumns;\n    uniform float time;\n    uniform sampler2D lastState;\n\n    highp float rand( const in vec2 uv ) {\n      const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n      highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n      return fract(sin(sn) * c);\n    }\n\n    void main()  {\n\n      vec2 uv = gl_FragCoord.xy / numColumns;\n\n      float columnTimeOffset = rand(vec2(gl_FragCoord.x, 0.0));\n      float columnSpeedOffset = rand(vec2(gl_FragCoord.x + 0.1, 0.0));\n\n      vec4 data = texture2D( lastState, uv );\n\n      if (length(data) == 0.) {\n        data.rba = vec3(rand(uv), 0., 0.);\n        data.g = rand(uv);\n      }\n\n      float columnTime = (columnTimeOffset * 1000.0 + time * 0.5) * (0.5 + columnSpeedOffset * 0.5) + (sin(time * columnSpeedOffset) * 0.2);\n      float glyphTime = gl_FragCoord.y * 0.01 + columnTime;\n\n      float value = 1.0 - fract((glyphTime + 0.3 * sin(SQRT_2 * glyphTime) + 0.2 * sin(SQRT_5 * glyphTime)));\n\n      float brightness = 3.0 * log(value * 1.25);\n\n      float glyphCycleSpeed = 0.0;\n      if (brightness > 0.0) glyphCycleSpeed = pow(1.0 - brightness, 4.0);\n\n      float glyphCycle = data.g;\n      glyphCycle = fract(glyphCycle + 0.005 * glyphCycleSpeed);\n\n      float symbol = floor(glyphSequenceLength * glyphCycle);\n      float symbolX = mod(symbol, glyphTextureColumns);\n      float symbolY = ((glyphTextureColumns - 1.0) - (symbol - symbolX) / glyphTextureColumns);\n\n      gl_FragColor = vec4(\n        brightness,\n        glyphCycle,\n        symbolY * glyphTextureColumns + symbolX,\n        1.\n      );\n    }\n  ",
uniforms:{glyphSequenceLength:57,time:a.context("time")},framebuffer:function(e){return Z[(e.tick+1)%2]}}),D=a({vert:"\n  attribute vec2 aPosition;\n  uniform float width;\n  uniform float height;\n  varying vec2 vUV;\n  void main() {\n    vUV = aPosition / 2.0 + 0.5;\n    vec2 size = width > height ? vec2(width / height, 1.) : vec2(1., height / width);\n    gl_Position = vec4( size * aPosition, 0.0, 1.0 );\n  }\n  ",frag:"\n    #ifdef GL_OES_standard_derivatives\n    #extension GL_OES_standard_derivatives: enable\n    #endif\n    precision lowp float;\n\n    uniform sampler2D glyphMSDF;\n    uniform sampler2D lastState;\n    uniform float numColumns;\n    uniform float glyphTextureColumns;\n\n    varying vec2 vUV;\n\n    float median3(vec3 i) {\n      return max(min(i.r, i.g), min(max(i.r, i.g), i.b));\n    }\n\n    void main() {\n      // Unpack the values from the font texture\n      vec4 glyph = texture2D(lastState, vUV);\n      float brightness = max(0., glyph.r);\n      float symbolIndex = glyph.b;\n\n      // resolve UV to MSDF texture coord\n      vec2 symbolUV = vec2(mod(symbolIndex, glyphTextureColumns), floor(symbolIndex / glyphTextureColumns));\n      vec2 glyphUV = fract(vUV * numColumns);\n      vec2 msdfUV = (glyphUV + symbolUV) / glyphTextureColumns;\n\n      // MSDF\n      vec3 dist = texture2D(glyphMSDF, msdfUV).rgb;\n      float sigDist = median3(dist) - 0.5;\n      float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n\n      gl_FragColor = vec4(vec3(brightness * alpha), 1.0);\n    }\n  ",
uniforms:{glyphMSDF:a.prop("glyphMSDF"),width:a.context("viewportHeight"),height:a.context("viewportWidth")},framebuffer:J}),F=a({frag:"\n  precision mediump float;\n  varying vec2 vUV;\n  uniform sampler2D tex;\n  uniform float threshold;\n  void main() {\n    float value = texture2D(tex, vUV).r;\n    if (value < threshold) {\n      value = 0.;\n    }\n    gl_FragColor = vec4(vec3(value), 1.0);\n  }\n  ",uniforms:{tex:a.prop("tex"),threshold:.3},framebuffer:a.prop("fbo")}),U=a({frag:"\n  precision mediump float;\n  varying vec2 vUV;\n  uniform sampler2D tex;\n  uniform vec2 direction;\n  uniform float width, height;\n  void main() {\n    vec2 size = width > height ? vec2(width / height, 1.) : vec2(1., height / width);\n    gl_FragColor =\n      texture2D(tex, vUV) * 0.442 +\n      (\n        texture2D(tex, vUV + direction / max(width, height) * size) +\n        texture2D(tex, vUV - direction / max(width, height) * size)\n      ) * 0.279;\n  }\n  ",
uniforms:{tex:a.prop("tex"),direction:a.prop("direction"),height:a.context("viewportWidth"),width:a.context("viewportHeight")},framebuffer:a.prop("fbo")}),w=a({frag:"\n  precision mediump float;\n  varying vec2 vUV;\n  "+q.map(function(e,k){return"uniform sampler2D tex_"+k+";"}).join("\n")+"\n  uniform sampler2D tex;\n  void main() {\n    vec4 total = vec4(0.);\n    "+q.map(function(e,k){return"total += texture2D(tex_"+k+", vUV);"}).join("\n")+"\n    gl_FragColor = total + texture2D(tex, vUV);\n  }\n  ",
uniforms:Object.assign({tex:a.prop("tex")},function(e){for(var k={},q=0;q<e.length;q++)k["tex_"+q]=e[q];return k}(q)),framebuffer:a.prop("fbo")}),m=a({frag:"\n  precision mediump float;\n  #define PI 3.14159265359\n\n  uniform sampler2D tex;\n  uniform sampler2D palette;\n  uniform float ditherMagnitude;\n  uniform float time;\n  varying vec2 vUV;\n\n  highp float rand( const in vec2 uv, const in float t ) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n    return fract(sin(sn) * c + t);\n  }\n\n  void main() {\n    float value = texture2D( tex, vUV ).r - rand( gl_FragCoord.xy, time ) * ditherMagnitude;\n    gl_FragColor = texture2D(palette, vec2(value, 0.));\n  }\n  ",
uniforms:{ditherMagnitude:.05,palette:a.prop("palette"),tex:e,time:a.context("time")}}),r=a({vert:"\n  precision mediump float;\n  attribute vec2 aPosition;\n  varying vec2 vUV;\n  void main() {\n    vUV = 0.5 * (aPosition + 1.0);\n    gl_Position = vec4(aPosition, 0, 1);\n  }",attributes:{aPosition:[-4,-4,4,-4,0,4]},uniforms:{lastState:function(e){return Z[e.tick%2]},numColumns:60,glyphTextureColumns:8},depth:{enable:!1},count:3});V("resl")({manifest:{glyphMSDF:{type:"image",src:"assets/matrix_glyphs_msdf.png",
parser:function(e){return a.texture({data:e,mag:"linear",min:"linear",flipY:!0})}},palette:{type:"image",src:"assets/matrix_palette.png",parser:function(e){return a.texture({data:e,mag:"linear",min:"linear"})}}},onDone:function(Z){r({},B);a.frame(function(a){var P=a.viewportWidth;a=a.viewportHeight;J.resize(P,a);e.resize(P,a);G(h,P,a,.5);G(k,P,a,.5);G(q,P,a,.5);r(function(){B();D(Z);h.forEach(function(e){return F({fbo:e,tex:J})});k.forEach(function(e,k){return U({fbo:e,tex:h[k],direction:[1,0]})});
q.forEach(function(e,q){return U({fbo:e,tex:k[q],direction:[0,1]})});w({tex:J,fbo:e});m(Z)})})}})},{"../regl":41,"canvas-fit":38,resl:40}],2:[function(V,ia,za){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var Z=V("./util/sorted-object-keys"),G=V("./util/check"),J=V("./util/values"),h=V("./constants/dtypes.json"),k=V("./util/is-typed-array"),q=V("./util/is-ndarray"),e=V("./constants/primitives.json"),
B="attributes elements offset count primitive instances".split(" ");ia.exports=function(D,F,U,w,m,r,da){function u(e){if(e!==aa.currentVAO){var g=F.oes_vertex_array_object;e?g.bindVertexArrayOES(e.vao):g.bindVertexArrayOES(null);aa.currentVAO=e}}function P(e){if(e!==aa.currentVAO){if(e)e.bindAttrs();else{for(var g=F.angle_instanced_arrays,c=0;c<f.length;++c){var k=f[c];k.buffer?(D.enableVertexAttribArray(c),k.buffer.bind(),D.vertexAttribPointer(c,k.size,k.type,k.normalized,k.stride,k.offfset),g&&
k.divisor&&g.vertexAttribDivisorANGLE(c,k.divisor)):(D.disableVertexAttribArray(c),D.vertexAttrib4f(c,k.x,k.y,k.z,k.w))}da.elements?D.bindBuffer(34963,da.elements.buffer.buffer):D.bindBuffer(34963,null)}aa.currentVAO=e}}function x(){J(p).forEach(function(e){e.destroy()})}function R(){this.id=++L;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var e=F.oes_vertex_array_object;this.vao=e?e.createVertexArrayOES():null;p[this.id]=this;
this.buffers=[]}function ga(){F.oes_vertex_array_object&&J(p).forEach(function(e){e.refresh()})}var c=U.maxAttributes,f=Array(c);for(U=0;U<c;++U)f[U]=new a;var L=0,p={},aa={Record:a,scope:{},state:f,currentVAO:null,targetVAO:null,restore:F.oes_vertex_array_object?ga:function(){},createVAO:function(y){function g(y){var p;if(Array.isArray(y))p=y,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{G("object"===typeof y,
"invalid arguments for create vao");G("attributes"in y,"must specify attributes for vao");if(y.elements){var d=y.elements;f.ownsElements?("function"===typeof d&&"elements"===d._reglType?f.elements.destroy():f.elements(d),f.ownsElements=!1):r.getElements(y.elements)?(f.elements=y.elements,f.ownsElements=!1):(f.elements=r.create(y.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;p=y.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,
f.primitive=f.elements._elements.primType);"offset"in y&&(f.offset=y.offset|0);"count"in y&&(f.count=y.count|0);"instances"in y&&(f.instances=y.instances|0);"primitive"in y&&(G(y.primitive in e,"bad primitive type: "+y.primitive),f.primitive=e[y.primitive]);G.optional(function(){for(var b=Z(y),d=0;d<b.length;++d)G(0<=B.indexOf(b[d]),'invalid option for vao: "'+b[d]+'" valid options are '+B)});G(Array.isArray(p),"attributes must be an array")}G(p.length<c,"too many attributes");G(0<p.length,"must specify at least one attribute");
var d={},Q=f.attributes;Q.length=p.length;for(var b=0;b<p.length;++b){var L=p[b],z=Q[b]=new a,x=L.data||L;if(Array.isArray(x)||k(x)||q(x)){var u;f.buffers[b]&&(u=f.buffers[b],k(x)&&u._buffer.byteLength>=x.byteLength?u.subdata(x):(u.destroy(),f.buffers[b]=null));f.buffers[b]||(u=f.buffers[b]=m.create(L,34962,!1,!0));z.buffer=m.getBuffer(u);z.size=z.buffer.dimension|0;z.normalized=!1;z.type=z.buffer.dtype;z.offset=0;z.stride=0;z.divisor=0;z.state=1;d[b]=1}else m.getBuffer(L)?(z.buffer=m.getBuffer(L),
z.size=z.buffer.dimension|0,z.normalized=!1,z.type=z.buffer.dtype,z.offset=0,z.stride=0,z.divisor=0,z.state=1):m.getBuffer(L.buffer)?(z.buffer=m.getBuffer(L.buffer),z.size=(+L.size||z.buffer.dimension)|0,z.normalized=!!L.normalized||!1,"type"in L?(G.parameter(L.type,h,"invalid buffer type"),z.type=h[L.type]):z.type=z.buffer.dtype,z.offset=(L.offset||0)|0,z.stride=(L.stride||0)|0,z.divisor=(L.divisor||0)|0,z.state=1,G(1<=z.size&&4>=z.size,"size must be between 1 and 4"),G(0<=z.offset,"invalid offset"),
G(0<=z.stride&&255>=z.stride,"stride must be between 0 and 255"),G(0<=z.divisor,"divisor must be positive"),G(!z.divisor||!!F.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in L?(G(0<b,"first attribute must not be a constant"),z.x=+L.x||0,z.y=+L.y||0,z.z=+L.z||0,z.w=+L.w||0,z.state=2):G(!1,"invalid attribute spec for location "+b)}for(u=0;u<f.buffers.length;++u)!d[u]&&f.buffers[u]&&(f.buffers[u].destroy(),f.buffers[u]=null);f.refresh();return g}var f=new R;w.vaoCount+=
1;g.destroy=function(){for(var e=0;e<f.buffers.length;++e)f.buffers[e]&&f.buffers[e].destroy();f.buffers.length=0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};g._vao=f;g._reglType="vao";return g(y)},getVAO:function(e){return"function"===typeof e&&e._vao?e._vao:null},destroyBuffer:function(e){for(var c=0;c<f.length;++c){var k=f[c];k.buffer===e&&(D.disableVertexAttribArray(c),k.buffer=null)}},setVAO:F.oes_vertex_array_object?u:P,clear:F.oes_vertex_array_object?
x:function(){}};R.prototype.bindAttrs=function(){for(var e=F.angle_instanced_arrays,g=this.attributes,k=0;k<g.length;++k){var f=g[k];f.buffer?(D.enableVertexAttribArray(k),D.bindBuffer(34962,f.buffer.buffer),D.vertexAttribPointer(k,f.size,f.type,f.normalized,f.stride,f.offset),e&&f.divisor&&e.vertexAttribDivisorANGLE(k,f.divisor)):(D.disableVertexAttribArray(k),D.vertexAttrib4f(k,f.x,f.y,f.z,f.w))}for(e=g.length;e<c;++e)D.disableVertexAttribArray(e);(e=r.getElements(this.elements))?D.bindBuffer(34963,
e.buffer.buffer):D.bindBuffer(34963,null)};R.prototype.refresh=function(){var e=F.oes_vertex_array_object;e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),aa.currentVAO=null,e.bindVertexArrayOES(null))};R.prototype.destroy=function(){if(this.vao){var e=F.oes_vertex_array_object;this===aa.currentVAO&&(aa.currentVAO=null,e.bindVertexArrayOES(null));e.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);p[this.id]&&(delete p[this.id],
--w.vaoCount)};return aa}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(V,ia,za){function a(e){return U[Object.prototype.toString.call(e)]|0}function Z(e,k){for(var q=0;q<k.length;++q)e[q]=k[q]}function G(e,k,q,a,h,m,c){for(var f=0,L=0;L<q;++L)for(var p=0;p<a;++p)e[f++]=k[h*L+m*p+c]}var J=V("./util/sorted-object-keys"),h=V("./util/check"),k=V("./util/is-typed-array"),
q=V("./util/is-ndarray"),e=V("./util/values"),B=V("./util/pool");za=V("./util/flatten");var D=za.flatten,F=za.shape,U=V("./constants/arraytypes.json"),w=V("./constants/dtypes.json"),m=V("./constants/usage.json"),r=[];r[5120]=1;r[5122]=2;r[5124]=4;r[5121]=1;r[5123]=2;r[5125]=4;r[5126]=4;ia.exports=function(U,u,P,x){function R(e){this.id=L++;this.buffer=U.createBuffer();this.type=e;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;P.profile&&(this.stats={size:0})}
function ga(e,k,c){e.byteLength=k.byteLength;U.bufferData(e.type,k,c)}function c(e,c,f,p,L,d){e.usage=f;if(Array.isArray(c)){if(e.dtype=p||5126,0<c.length)if(Array.isArray(c[0])){L=F(c);for(var Q=p=1;Q<L.length;++Q)p*=L[Q];e.dimension=p;c=D(c,L,e.dtype);ga(e,c,f);d?e.persistentData=c:B.freeType(c)}else"number"===typeof c[0]?(e.dimension=L,L=B.allocType(e.dtype,c.length),Z(L,c),ga(e,L,f),d?e.persistentData=L:B.freeType(L)):k(c[0])?(e.dimension=c[0].length,e.dtype=p||a(c[0])||5126,c=D(c,[c.length,c[0].length],
e.dtype),ga(e,c,f),d?e.persistentData=c:B.freeType(c)):h.raise("invalid buffer data")}else if(k(c))e.dtype=p||a(c),e.dimension=L,ga(e,c,f),d&&(e.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(q(c)){L=c.shape;var b=c.stride,Q=c.offset,x=0,z=0,u=0,m=0;1===L.length?(x=L[0],z=1,u=b[0],m=0):2===L.length?(x=L[0],z=L[1],u=b[0],m=b[1]):h.raise("invalid shape");e.dtype=p||a(c.data)||5126;e.dimension=z;L=B.allocType(e.dtype,x*z);G(L,c.data,x,z,u,m,Q);ga(e,L,f);d?e.persistentData=L:B.freeType(L)}else c instanceof
ArrayBuffer?(e.dtype=5121,e.dimension=L,ga(e,c,f),d&&(e.persistentData=new Uint8Array(new Uint8Array(c)))):h.raise("invalid buffer data")}function f(e){u.bufferCount--;x(e);var c=e.buffer;h(c,"buffer must not be deleted already");U.deleteBuffer(c);e.buffer=null;delete p[e.id]}var L=0,p={};R.prototype.bind=function(){U.bindBuffer(this.type,this.buffer)};R.prototype.destroy=function(){f(this)};var aa=[];P.profile&&(u.getTotalBufferSize=function(){var e=0;J(p).forEach(function(c){e+=p[c].stats.size});
return e});return{create:function(e,g,L,x){function E(b){var d=35044,e=null,f=0,g=0,y=1;Array.isArray(b)||k(b)||q(b)||b instanceof ArrayBuffer?e=b:"number"===typeof b?f=b|0:b&&(h.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(h(null===e||Array.isArray(e)||k(e)||q(e),"invalid data for buffer"),e=b.data),"usage"in b&&(h.parameter(b.usage,m,"invalid buffer usage"),d=m[b.usage]),"type"in b&&(h.parameter(b.type,w,"invalid buffer type"),g=w[b.type]),"dimension"in
b&&(h.type(b.dimension,"number","invalid dimension"),y=b.dimension|0),"length"in b&&(h.nni(f,"buffer length must be a nonnegative integer"),f=b.length|0));Q.bind();e?c(Q,e,d,g,y,x):(f&&U.bufferData(Q.type,f,d),Q.dtype=g||5121,Q.usage=d,Q.dimension=y,Q.byteLength=f);P.profile&&(Q.stats.size=Q.byteLength*r[Q.dtype]);return E}function d(b,d){h(d+b.byteLength<=Q.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+d+" to a buffer of size "+
Q.byteLength);U.bufferSubData(Q.type,d,b)}u.bufferCount++;var Q=new R(g);p[Q.id]=Q;L||E(e);E._reglType="buffer";E._buffer=Q;E.subdata=function(b,e){var c=(e||0)|0,f;Q.bind();if(k(b)||b instanceof ArrayBuffer)d(b,c);else if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var g=B.allocType(Q.dtype,b.length);Z(g,b);d(g,c);B.freeType(g)}else Array.isArray(b[0])||k(b[0])?(f=F(b),g=D(b,f,Q.dtype),d(g,c),B.freeType(g)):h.raise("invalid buffer data")}else if(q(b)){f=b.shape;var y=b.stride,p=g=
0,L=0,S=0;1===f.length?(g=f[0],p=1,L=y[0],S=0):2===f.length?(g=f[0],p=f[1],L=y[0],S=y[1]):h.raise("invalid shape");f=Array.isArray(b.data)?Q.dtype:a(b.data);f=B.allocType(f,g*p);G(f,b.data,g,p,L,S,b.offset);d(f,c);B.freeType(f)}else h.raise("invalid data for buffer subdata");return E};P.profile&&(E.stats=Q.stats);E.destroy=function(){f(Q)};return E},createStream:function(e,f){var k=aa.pop();k||(k=new R(e));k.bind();c(k,f,35040,0,1,!1);return k},destroyStream:function(e){aa.push(e)},clear:function(){e(p).forEach(f);
aa.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof R?e._buffer:null},restore:function(){e(p).forEach(function(e){e.buffer=U.createBuffer();U.bindBuffer(e.type,e.buffer);U.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:c}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],
4:[function(V,ia,za){ia.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(V,ia,za){ia.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(V,ia,za){ia.exports={points:0,point:0,
lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(V,ia,za){ia.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(V,ia,za){function a(e){return Array.isArray(e)||U(e)||w(e)}function Z(e){return e.sort(function(e,c){return"viewport"===e?-1:"viewport"===c?1:e<c?-1:1})}function G(e,c,k,f){this.thisDep=e;this.contextDep=c;this.propDep=k;this.append=f}function J(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function h(e){return new G(!1,
!1,!1,e)}function k(e,c){var k=e.type;if(0===k)return k=e.data.length,new G(!0,1<=k,2<=k,c);if(4===k)return k=e.data,new G(k.thisDep,k.contextDep,k.propDep,c);if(5===k)return new G(!1,!1,!1,c);if(6===k){for(var f=k=!1,q=!1,d=0;d<e.data.length;++d){var p=e.data[d];1===p.type?q=!0:2===p.type?f=!0:3===p.type?k=!0:0===p.type?(k=!0,p=p.data,1<=p&&(f=!0),2<=p&&(q=!0)):4===p.type&&(k=k||p.data.thisDep,f=f||p.data.contextDep,q=q||p.data.propDep)}return new G(k,f,q,c)}return new G(3===k,2===k,1===k,c)}var q=
V("./util/sorted-object-keys"),e=V("./util/check"),B=V("./util/extend"),D=V("./util/codegen"),F=V("./util/loop"),U=V("./util/is-typed-array"),w=V("./util/is-ndarray"),m=V("./util/is-array-like"),r=V("./dynamic"),da=V("./constants/primitives.json"),u=V("./constants/dtypes.json"),P=["x","y","z","w"],x="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),R={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,
"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ga="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
c={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},f={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},L={frag:35632,vert:35633},p={cw:2304,ccw:2305},aa=new G(!1,!1,!1,function(){});ia.exports=function(y,g,w,C,E,d,Q,b,U,z,ra,id,X,ea,T){function S(b){return b.replace(".","_")}function A(b,e,d){var c=S(b);ta.push(b);
Y[c]=ja[c]=!!d;Ka[c]=e}function l(b,e,d){var c=S(b);ta.push(b);Array.isArray(d)?(ja[c]=d.slice(),Y[c]=d.slice()):ja[c]=Y[c]=d;Fa[c]=e}function M(){var b=D(),d=b.link,c=b.global;b.id=yd++;b.batchId="0";var k=d(gb),f=b.shared={props:"a0"};q(gb).forEach(function(b){f[b]=c.def(k,".",b)});e.optional(function(){b.CHECK=d(e);b.commandStr=e.guessCommand();b.command=d(b.commandStr);b.assert=function(b,e,c){b("if(!(",e,"))",this.CHECK,".commandRaise(",d(c),",",this.command,");")};ca.invalidBlendCombinations=
ga});var l=b.next={},n=b.current={};q(Fa).forEach(function(b){Array.isArray(ja[b])&&(l[b]=c.def(f.next,".",b),n[b]=c.def(f.current,".",b))});var v=b.constants={};q(ca).forEach(function(b){v[b]=c.def(JSON.stringify(ca[b]))});b.invoke=function(e,c){switch(c.type){case 0:var k=["this",f.context,f.props,b.batchId];return e.def(d(c.data),".call(",k.slice(0,Math.max(c.data.length+1,4)),")");case 1:return e.def(f.props,c.data);case 2:return e.def(f.context,c.data);case 3:return e.def("this",c.data);case 4:return c.data.append(b,
e),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(d){return b.invoke(e,d)})}};b.attribCache={};var t={};b.scopeAttrib=function(b){b=g.id(b);if(b in t)return t[b];var e=z.scope[b];e||(e=z.scope[b]=new sa);return t[b]=d(e)};return b}function N(b){var e=b["static"];b=b.dynamic;var d;if("profile"in e){var c=!!e.profile;d=h(function(b,e){return c});d.enable=c}else if("profile"in b){var f=b.profile;d=k(f,function(b,e){return b.invoke(e,f)})}return d}function wa(d,c){var f=
d["static"],l=d.dynamic;if("framebuffer"in f){var n=f.framebuffer;return n?(n=b.getFramebuffer(n),e.command(n,"invalid framebuffer object"),h(function(b,e){var d=b.link(n),c=b.shared;e.set(c.framebuffer,".next",d);c=c.context;e.set(c,".framebufferWidth",d+".width");e.set(c,".framebufferHeight",d+".height");return d})):h(function(b,e){var d=b.shared;e.set(d.framebuffer,".next","null");d=d.context;e.set(d,".framebufferWidth",d+".drawingBufferWidth");e.set(d,".framebufferHeight",d+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var v=l.framebuffer;return k(v,function(b,d){var c=b.invoke(d,v),k=b.shared,f=k.framebuffer,l=d.def(f,".getFramebuffer(",c,")");e.optional(function(){b.assert(d,"!"+c+"||"+l,"invalid framebuffer object")});d.set(f,".next",l);k=k.context;d.set(k,".framebufferWidth",l+"?"+l+".width:"+k+".drawingBufferWidth");d.set(k,".framebufferHeight",l+"?"+l+".height:"+k+".drawingBufferHeight");return l})}return null}function na(b,d,c){function f(b){if(b in l){var v=l[b];e.commandType(v,
"object","invalid "+b,c.commandStr);var t=!0,I=v.x|0,q=v.y|0,g,p;"width"in v?(g=v.width|0,e.command(0<=g,"invalid "+b,c.commandStr)):t=!1;"height"in v?(p=v.height|0,e.command(0<=p,"invalid "+b,c.commandStr)):t=!1;return new G(!t&&d&&d.thisDep,!t&&d&&d.contextDep,!t&&d&&d.propDep,function(b,d){var e=b.shared.context,c=g;"width"in v||(c=d.def(e,".","framebufferWidth","-",I));var k=p;"height"in v||(k=d.def(e,".","framebufferHeight","-",q));return[I,q,c,k]})}if(b in n){var K=n[b],t=k(K,function(d,c){var k=
d.invoke(c,K);e.optional(function(){d.assert(c,k+"&&typeof "+k+'==="object"',"invalid "+b)});var f=d.shared.context,l=c.def(k,".x|0"),v=c.def(k,".y|0"),n=c.def('"width" in ',k,"?",k,".width|0:","(",f,".","framebufferWidth","-",l,")"),t=c.def('"height" in ',k,"?",k,".height|0:","(",f,".","framebufferHeight","-",v,")");e.optional(function(){d.assert(c,n+">=0&&"+t+">=0","invalid "+b)});return[l,v,n,t]});d&&(t.thisDep=t.thisDep||d.thisDep,t.contextDep=t.contextDep||d.contextDep,t.propDep=t.propDep||d.propDep);
return t}return d?new G(d.thisDep,d.contextDep,d.propDep,function(b,d){var e=b.shared.context;return[0,0,d.def(e,".","framebufferWidth"),d.def(e,".","framebufferHeight")]}):null}var l=b["static"],n=b.dynamic;if(b=f("viewport")){var v=b;b=new G(b.thisDep,b.contextDep,b.propDep,function(b,d){var e=v.append(b,d),c=b.shared.context;d.set(c,".viewportWidth",e[2]);d.set(c,".viewportHeight",e[3]);return e})}return{viewport:b,scissor_box:f("scissor.box")}}function n(b,d){var c=b["static"];if("string"===typeof c.frag&&
"string"===typeof c.vert){if(0<q(d.dynamic).length)return null;var c=d["static"],k=q(c);if(0<k.length&&"number"===typeof c[k[0]]){for(var f=[],l=0;l<k.length;++l)e("number"===typeof c[k[l]],"must specify all vertex attribute locations when using vaos"),f.push([c[k[l]]|0,k[l]]);return f}}return null}function H(b,d,c){function f(b){if(b in l){var d=g.id(l[b]);e.optional(function(){ra.shader(L[b],d,e.guessCommand())});var c=h(function(){return d});c.id=d;return c}if(b in v){var n=v[b];return k(n,function(d,
c){var k=d.invoke(c,n),f=c.def(d.shared.strings,".id(",k,")");e.optional(function(){c(d.shared.shader,".shader(",L[b],",",f,",",d.command,");")});return f})}return null}var l=b["static"],v=b.dynamic,n=f("frag"),t=f("vert"),I=null;J(n)&&J(t)?(I=ra.program(t.id,n.id,null,c),b=h(function(b,d){return b.link(I)})):b=new G(n&&n.thisDep||t&&t.thisDep,n&&n.contextDep||t&&t.contextDep,n&&n.propDep||t&&t.propDep,function(b,d){var c=b.shared.shader,k;k=n?n.append(b,d):d.def(c,".","frag");var f;f=t?t.append(b,
d):d.def(c,".","vert");var l=c+".program("+f+","+k;e.optional(function(){l+=","+b.command});return d.def(l+")")});return{frag:n,vert:t,progVar:b,program:I}}function ba(b,c){function f(b,d){if(b in l){var q=l[b]|0;d?t.offset=q:t.instances=q;e.command(!d||0<=q,"invalid "+b,c.commandStr);return h(function(b,e){d&&(b.OFFSET=q);return q})}if(b in n){var p=n[b];return k(p,function(c,k){var l=c.invoke(k,p);d&&(c.OFFSET=l,e.optional(function(){c.assert(k,l+">=0","invalid "+b)}));return l})}if(d){if(g)return h(function(b,
d){return b.OFFSET=0});if(v)return new G(I.thisDep,I.contextDep,I.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(v)return new G(I.thisDep,I.contextDep,I.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var l=b["static"],n=b.dynamic,t={},v=!1,I=function(){if("vao"in l){var b=l.vao;null!==b&&null===z.getVAO(b)&&(b=z.createVAO(b));v=!0;t.vao=b;return h(function(d){var e=
z.getVAO(b);return e?d.link(e):"null"})}if("vao"in n){v=!0;var d=n.vao;return k(d,function(b,e){var c=b.invoke(e,d);return e.def(b.shared.vao+".getVAO("+c+")")})}return null}(),g=!1,p=function(){if("elements"in l){var b=l.elements;t.elements=b;if(a(b)){var f=t.elements=d.create(b,!0),b=d.getElements(f);g=!0}else b&&(b=d.getElements(b),g=!0,e.command(b,"invalid elements",c.commandStr));f=h(function(d,e){if(b){var c=d.link(b);return d.ELEMENTS=c}return d.ELEMENTS=null});f.value=b;return f}if("elements"in
n){g=!0;var q=n.elements;return k(q,function(b,d){var c=b.shared,k=c.isBufferArgs,c=c.elements,l=b.invoke(d,q),f=d.def("null"),k=d.def(k,"(",l,")"),n=b.cond(k).then(f,"=",c,".createStream(",l,");")["else"](f,"=",c,".getElements(",l,");");e.optional(function(){b.assert(n["else"],"!"+l+"||"+f,"invalid elements")});d.entry(n);d.exit(b.cond(k).then(c,".destroyStream(",f,");"));return b.ELEMENTS=f})}return v?new G(I.thisDep,I.contextDep,I.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+
b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),K=f("offset",!0),ma=function(){if("primitive"in l){var b=l.primitive;t.primitive=b;e.commandParameter(b,da,"invalid primitve",c.commandStr);return h(function(d,e){return da[b]})}if("primitive"in n){var d=n.primitive;return k(d,function(b,c){var k=b.constants.primTypes,l=b.invoke(c,d);e.optional(function(){b.assert(c,l+" in "+k,"invalid primitive, must be one of "+q(da))});return c.def(k,"[",l,"]")})}return g?J(p)?
p.value?h(function(b,d){return d.def(b.ELEMENTS,".primType")}):h(function(){return 4}):new G(p.thisDep,p.contextDep,p.propDep,function(b,d){var e=b.ELEMENTS;return d.def(e,"?",e,".primType:",4)}):v?new G(I.thisDep,I.contextDep,I.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),y=function(){if("count"in l){var b=l.count|0;t.count=b;e.command("number"===typeof b&&0<=b,"invalid vertex count",c.commandStr);return h(function(){return b})}if("count"in
n){var d=n.count;return k(d,function(b,c){var k=b.invoke(c,d);e.optional(function(){b.assert(c,"typeof "+k+'==="number"&&'+k+">=0&&"+k+"===("+k+"|0)","invalid vertex count")});return k})}if(g){if(J(p)){if(p)return K?new G(K.thisDep,K.contextDep,K.propDep,function(b,d){var c=d.def(b.ELEMENTS,".vertCount-",b.OFFSET);e.optional(function(){b.assert(d,c+">=0","invalid vertex offset/element buffer too small")});return c}):h(function(b,d){return d.def(b.ELEMENTS,".vertCount")});var f=h(function(){return-1});
e.optional(function(){f.MISSING=!0});return f}var q=new G(p.thisDep||K.thisDep,p.contextDep||K.contextDep,p.propDep||K.propDep,function(b,d){var e=b.ELEMENTS;return b.OFFSET?d.def(e,"?",e,".vertCount-",b.OFFSET,":-1"):d.def(e,"?",e,".vertCount:-1")});e.optional(function(){q.DYNAMIC=!0});return q}return v?new G(I.thisDep,I.contextDep,I.propDep,function(b,d){return d.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),Q=f("instances",!1);return{elements:p,primitive:ma,count:y,
instances:Q,offset:K,vao:I,vaoActive:v,elementsActive:g,"static":t}}function O(b,d){var l=b["static"],n=b.dynamic,t={};ta.forEach(function(b){function v(d,e){if(b in l){var c=d(l[b]);t[I]=h(function(){return c})}else if(b in n){var f=n[b];t[I]=k(f,function(b,d){return e(b,d,b.invoke(d,f))})}}var I=S(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return v(function(c){e.commandType(c,
"boolean",b,d.commandStr);return c},function(d,c,k){e.optional(function(){d.assert(c,"typeof "+k+'==="boolean"',"invalid flag "+b,d.commandStr)});return k});case "depth.func":return v(function(k){e.commandParameter(k,c,"invalid "+b,d.commandStr);return c[k]},function(d,k,l){var f=d.constants.compareFuncs;e.optional(function(){d.assert(k,l+" in "+f,"invalid "+b+", must be one of "+q(c))});return k.def(f,"[",l,"]")});case "depth.range":return v(function(b){e.command(m(b)&&2===b.length&&"number"===typeof b[0]&&
"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",d.commandStr);return b},function(b,d,c){e.optional(function(){b.assert(d,b.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var k=d.def("+",c,"[0]"),l=d.def("+",c,"[1]");return[k,l]});case "blend.func":return v(function(b){e.commandType(b,"object","blend.func",d.commandStr);var c="srcRGB"in b?b.srcRGB:b.src,k="srcAlpha"in b?b.srcAlpha:
b.src,l="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;e.commandParameter(c,R,I+".srcRGB",d.commandStr);e.commandParameter(k,R,I+".srcAlpha",d.commandStr);e.commandParameter(l,R,I+".dstRGB",d.commandStr);e.commandParameter(b,R,I+".dstAlpha",d.commandStr);e.command(-1===ga.indexOf(c+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+l+")",d.commandStr);return[R[c],R[l],R[k],R[b]]},function(d,c,k){function l(v,n){var t=c.def('"',v,n,'" in ',k,"?",k,".",v,n,":",k,".",
v);e.optional(function(){d.assert(c,t+" in "+f,"invalid "+b+"."+v+n+", must be one of "+q(R))});return t}var f=d.constants.blendFuncs;e.optional(function(){d.assert(c,k+"&&typeof "+k+'==="object"',"invalid blend func, must be an object")});var v=l("src","RGB"),n=l("dst","RGB");e.optional(function(){d.assert(c,d.constants.invalidBlendCombinations+".indexOf("+v+'+", "+'+n+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var t=c.def(f,"[",v,"]"),I=c.def(f,"[",l("src","Alpha"),"]"),
g=c.def(f,"[",n,"]"),p=c.def(f,"[",l("dst","Alpha"),"]");return[t,g,I,p]});case "blend.equation":return v(function(c){if("string"===typeof c)return e.commandParameter(c,Ha,"invalid "+b,d.commandStr),[Ha[c],Ha[c]];if("object"===typeof c)return e.commandParameter(c.rgb,Ha,b+".rgb",d.commandStr),e.commandParameter(c.alpha,Ha,b+".alpha",d.commandStr),[Ha[c.rgb],Ha[c.alpha]];e.commandRaise("invalid blend.equation",d.commandStr)},function(d,c,k){var l=d.constants.blendEquations,f=c.def(),v=c.def(),n=d.cond("typeof ",
k,'==="string"');e.optional(function(){function c(b,e,k){d.assert(b,k+" in "+l,"invalid "+e+", must be one of "+q(Ha))}c(n.then,b,k);d.assert(n["else"],k+"&&typeof "+k+'==="object"',"invalid "+b);c(n["else"],b+".rgb",k+".rgb");c(n["else"],b+".alpha",k+".alpha")});n.then(f,"=",v,"=",l,"[",k,"];");n["else"](f,"=",l,"[",k,".rgb];",v,"=",l,"[",k,".alpha];");c(n);return[f,v]});case "blend.color":return v(function(b){e.command(m(b)&&4===b.length,"blend.color must be a 4d array",d.commandStr);return F(4,
function(d){return+b[d]})},function(b,d,c){e.optional(function(){b.assert(d,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return F(4,function(b){return d.def("+",c,"[",b,"]")})});case "stencil.mask":return v(function(b){e.commandType(b,"number",I,d.commandStr);return b|0},function(b,d,c){e.optional(function(){b.assert(d,"typeof "+c+'==="number"',"invalid stencil.mask")});return d.def(c,"|0")});case "stencil.func":return v(function(k){e.commandType(k,"object",
I,d.commandStr);var l=k.cmp||"keep",f=k.ref||0;k="mask"in k?k.mask:-1;e.commandParameter(l,c,b+".cmp",d.commandStr);e.commandType(f,"number",b+".ref",d.commandStr);e.commandType(k,"number",b+".mask",d.commandStr);return[c[l],f,k]},function(b,d,c){var k=b.constants.compareFuncs;e.optional(function(){function e(){b.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(c+"&&typeof ",c,'==="object"');e('!("cmp" in ',c,")||(",c,".cmp in ",k,")")});var l=d.def('"cmp" in ',c,"?",k,"[",
c,".cmp]",":",7680),f=d.def(c,".ref|0"),n=d.def('"mask" in ',c,"?",c,".mask|0:-1");return[l,f,n]});case "stencil.opFront":case "stencil.opBack":return v(function(c){e.commandType(c,"object",I,d.commandStr);var k=c.fail||"keep",l=c.zfail||"keep";c=c.zpass||"keep";e.commandParameter(k,f,b+".fail",d.commandStr);e.commandParameter(l,f,b+".zfail",d.commandStr);e.commandParameter(c,f,b+".zpass",d.commandStr);return["stencil.opBack"===b?1029:1028,f[k],f[l],f[c]]},function(d,c,k){function l(v){e.optional(function(){d.assert(c,
'!("'+v+'" in '+k+")||("+k+"."+v+" in "+n+")","invalid "+b+"."+v+", must be one of "+q(f))});return c.def('"',v,'" in ',k,"?",n,"[",k,".",v,"]:",7680)}var n=d.constants.stencilOps;e.optional(function(){d.assert(c,k+"&&typeof "+k+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return v(function(b){e.commandType(b,"object",I,d.commandStr);var c=b.factor|0;b=b.units|0;e.commandType(c,"number",I+".factor",d.commandStr);
e.commandType(b,"number",I+".units",d.commandStr);return[c,b]},function(d,c,k){e.optional(function(){d.assert(c,k+"&&typeof "+k+'==="object"',"invalid "+b)});var l=c.def(k,".factor|0"),f=c.def(k,".units|0");return[l,f]});case "cull.face":return v(function(b){var c=0;"front"===b?c=1028:"back"===b&&(c=1029);e.command(!!c,I,d.commandStr);return c},function(b,d,c){e.optional(function(){b.assert(d,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return d.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return v(function(b){e.command("number"===
typeof b&&b>=C.lineWidthDims[0]&&b<=C.lineWidthDims[1],"invalid line width, must be a positive number between "+C.lineWidthDims[0]+" and "+C.lineWidthDims[1],d.commandStr);return b},function(b,d,c){e.optional(function(){b.assert(d,"typeof "+c+'==="number"&&'+c+">="+C.lineWidthDims[0]+"&&"+c+"<="+C.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return v(function(b){e.commandParameter(b,p,I,d.commandStr);return p[b]},function(b,d,c){e.optional(function(){b.assert(d,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(c+'==="cw"?2304:2305')});case "colorMask":return v(function(b){e.command(m(b)&&4===b.length,"color.mask must be length 4 array",d.commandStr);return b.map(function(b){return!!b})},function(b,d,c){e.optional(function(){b.assert(d,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return F(4,function(b){return"!!"+c+"["+b+"]"})});case "sample.coverage":return v(function(b){e.command("object"===typeof b&&b,
I,d.commandStr);var c="value"in b?b.value:1;b=!!b.invert;e.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",d.commandStr);return[c,b]},function(b,d,c){e.optional(function(){b.assert(d,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var k=d.def('"value" in ',c,"?+",c,".value:1"),l=d.def("!!",c,".invert");return[k,l]})}});return t}function la(b,d){var c=b["static"],l=b.dynamic,f={};q(c).forEach(function(b){var k=c[b],l;if("number"===typeof k||
"boolean"===typeof k)l=h(function(){return k});else if("function"===typeof k){var n=k._reglType;"texture2d"===n||"textureCube"===n?l=h(function(b){return b.link(k)}):"framebuffer"===n||"framebufferCube"===n?(e.command(0<k.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',d.commandStr),l=h(function(b){return b.link(k.color[0])})):e.commandRaise('invalid data for uniform "'+b+'"',d.commandStr)}else m(k)?l=h(function(d){return d.global.def("[",F(k.length,function(c){e.command("number"===
typeof k[c]||"boolean"===typeof k[c],"invalid uniform "+b,d.commandStr);return k[c]}),"]")}):e.commandRaise('invalid or missing data for uniform "'+b+'"',d.commandStr);l.value=k;f[b]=l});q(l).forEach(function(b){var d=l[b];f[b]=k(d,function(b,c){return b.invoke(c,d)})});return f}function qa(b,d){var c=b["static"],l=b.dynamic,f={};q(c).forEach(function(b){var k=c[b],l=g.id(b),n=new sa;if(a(k))n.state=1,n.buffer=E.getBuffer(E.create(k,34962,!1,!0)),n.type=0;else{var v=E.getBuffer(k);if(v)n.state=1,
n.buffer=v,n.type=0;else if(e.command("object"===typeof k&&k,"invalid data for attribute "+b,d.commandStr),"constant"in k){var t=k.constant;n.buffer="null";n.state=2;"number"===typeof t?n.x=t:(e.command(m(t)&&0<t.length&&4>=t.length,"invalid constant for attribute "+b,d.commandStr),P.forEach(function(b,d){d<t.length&&(n[b]=t[d])}))}else{v=a(k.buffer)?E.getBuffer(E.create(k.buffer,34962,!1,!0)):E.getBuffer(k.buffer);e.command(!!v,'missing buffer for attribute "'+b+'"',d.commandStr);var I=k.offset|
0;e.command(0<=I,'invalid offset for attribute "'+b+'"',d.commandStr);var p=k.stride|0;e.command(0<=p&&256>p,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',d.commandStr);var K=k.size|0;e.command(!("size"in k)||0<K&&4>=K,'invalid size for attribute "'+b+'", must be 1,2,3,4',d.commandStr);var ma=!!k.normalized,y=0;"type"in k&&(e.commandParameter(k.type,u,"invalid type for attribute "+b,d.commandStr),y=u[k.type]);var Q=k.divisor|0;e.optional(function(){"divisor"in k&&(e.command(0===
Q||pa,'cannot specify divisor for attribute "'+b+'", instancing not supported',d.commandStr),e.command(0<=Q,'invalid divisor for attribute "'+b+'"',d.commandStr));var c=d.commandStr,l="buffer offset divisor normalized type size stride".split(" ");q(k).forEach(function(d){e.command(0<=l.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+b+'" (valid parameters are '+l+")",c)})});n.buffer=v;n.state=1;n.size=K;n.normalized=ma;n.type=y||v.dtype;n.offset=I;n.stride=p;n.divisor=Q}}f[b]=h(function(b,
d){var c=b.attribCache;if(l in c)return c[l];var e={isStream:!1};q(n).forEach(function(b){e[b]=n[b]});n.buffer&&(e.buffer=b.link(n.buffer),e.type=e.type||e.buffer+".dtype");return c[l]=e})});q(l).forEach(function(b){var d=l[b];f[b]=k(d,function(c,k){function l(b){k(g[b],"=",n,".",b,"|0;")}var n=c.invoke(k,d),f=c.shared,v=c.constants,t=f.isBufferArgs,I=f.buffer;e.optional(function(){c.assert(k,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+t+"("+n+")||"+I+".getBuffer("+n+")||"+I+".getBuffer("+
n+".buffer)||"+t+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+f.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+b+'"')});var g={isStream:k.def(!1)},p=new sa;p.state=1;q(p).forEach(function(b){g[b]=k.def(""+p[b])});var K=g.buffer,ma=g.type;k("if(",t,"(",n,")){",g.isStream,"=true;",K,"=",I,".createStream(",34962,",",n,");",ma,"=",K,".dtype;","}else{",K,"=",I,".getBuffer(",n,");","if(",K,"){",ma,"=",K,".dtype;",'}else if("constant" in ',n,"){",g.state,"=",
2,";","if(typeof "+n+'.constant === "number"){',g[P[0]],"=",n,".constant;",P.slice(1).map(function(b){return g[b]}).join("="),"=0;","}else{",P.map(function(b,d){return g[b]+"="+n+".constant.length>"+d+"?"+n+".constant["+d+"]:0;"}).join(""),"}}else{","if(",t,"(",n,".buffer)){",K,"=",I,".createStream(",34962,",",n,".buffer);","}else{",K,"=",I,".getBuffer(",n,".buffer);","}",ma,'="type" in ',n,"?",v.glTypes,"[",n,".type]:",K,".dtype;",g.normalized,"=!!",n,".normalized;");l("size");l("offset");l("stride");
l("divisor");k("}}");k.exit("if(",g.isStream,"){",I,".destroyStream(",K,");","}");return g})});return f}function Da(b){var d=b["static"],c=b.dynamic,e={};q(d).forEach(function(b){var c=d[b];e[b]=h(function(b,d){return"number"===typeof c||"boolean"===typeof c?""+c:b.link(c)})});q(c).forEach(function(b){var d=c[b];e[b]=k(d,function(b,c){return b.invoke(c,d)})});return e}function Ca(b,d,c,k,l){function f(b){var d=p[b];d&&(ma[b]=d)}var v=b["static"],t=b.dynamic;e.optional(function(){function b(c){q(c).forEach(function(b){e.command(0<=
d.indexOf(b),'unknown parameter "'+b+'"',l.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);b(v);b(t)});var I=n(b,d),g=wa(b,l),p=na(b,g,l),K=ba(b,l),ma=O(b,l),y=H(b,l,I);f("viewport");f(S("scissor.box"));var Q=0<q(ma).length,g={framebuffer:g,draw:K,shader:y,state:ma,dirty:Q,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};g.profile=N(b,l);g.uniforms=la(c,l);g.drawVAO=g.scopeVAO=K.vao;if(!g.drawVAO&&y.program&&!I&&w.angle_instanced_arrays&&
K["static"].elements){var L=!0;b=y.program.attributes.map(function(b){b=d["static"][b];L=L&&!!b;return b});if(L&&0<b.length){var sa=z.getVAO(z.createVAO({attributes:b,elements:K["static"].elements}));g.drawVAO=new G(null,null,null,function(b,d){return b.link(sa)});g.useVAO=!0}}I?g.useVAO=!0:g.attributes=qa(d,l);g.context=Da(k,l);return g}function fa(b,d,c){var e=b.shared.context,k=b.scope();q(c).forEach(function(l){d.save(e,"."+l);var n=c[l].append(b,d);Array.isArray(n)?k(e,".",l,"=[",n.join(),"];"):
k(e,".",l,"=",n,";")});d(k)}function Ea(b,d,c,e){var k=b.shared,l=k.gl,n=k.framebuffer,f;ya&&(f=d.def(k.extensions,".webgl_draw_buffers"));var v=b.constants,k=v.drawBuffer,v=v.backBuffer;b=c?c.append(b,d):d.def(n,".next");e||d("if(",b,"!==",n,".cur){");d("if(",b,"){",l,".bindFramebuffer(",36160,",",b,".framebuffer);");ya&&d(f,".drawBuffersWEBGL(",k,"[",b,".colorAttachments.length]);");d("}else{",l,".bindFramebuffer(",36160,",null);");ya&&d(f,".drawBuffersWEBGL(",v,");");d("}",n,".cur=",b,";");e||
d("}")}function ka(b,d,c){var e=b.shared,k=e.gl,l=b.current,n=b.next,f=e.current,v=e.next,t=b.cond(f,".dirty");ta.forEach(function(d){d=S(d);if(!(d in c.state)){var e,I;if(d in n){e=n[d];I=l[d];var g=F(ja[d].length,function(b){return t.def(e,"[",b,"]")});t(b.cond(g.map(function(b,d){return b+"!=="+I+"["+d+"]"}).join("||")).then(k,".",Fa[d],"(",g,");",g.map(function(b,d){return I+"["+d+"]="+b}).join(";"),";"))}else e=t.def(v,".",d),g=b.cond(e,"!==",f,".",d),t(g),d in Ka?g(b.cond(e).then(k,".enable(",
Ka[d],");")["else"](k,".disable(",Ka[d],");"),f,".",d,"=",e,";"):g(k,".",Fa[d],"(",e,");",f,".",d,"=",e,";")}});0===q(c.state).length&&t(f,".dirty=false;");d(t)}function oa(b,d,c,e){var k=b.shared,l=b.current,n=k.current,f=k.gl;Z(q(c)).forEach(function(k){var v=c[k];if(!e||e(v)){var t=v.append(b,d);if(Ka[k]){var I=Ka[k];J(v)?t?d(f,".enable(",I,");"):d(f,".disable(",I,");"):d(b.cond(t).then(f,".enable(",I,");")["else"](f,".disable(",I,");"));d(n,".",k,"=",t,";")}else if(m(t)){var g=l[k];d(f,".",Fa[k],
"(",t,");",t.map(function(b,d){return g+"["+d+"]="+b}).join(";"),";")}else d(f,".",Fa[k],"(",t,");",n,".",k,"=",t,";")}})}function Aa(b,d){pa&&(b.instancing=d.def(b.shared.extensions,".angle_instanced_arrays"))}function Ba(b,d,c,e,k){function l(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function n(b){p=d.def();b(p,"=",l(),";");"string"===typeof k?b(I,".count+=",k,";"):b(I,".count++;");ea&&(e?(K=d.def(),b(K,"=",q,".getNumPendingQueries();")):b(q,".beginQuery(",I,");"))}
function f(b){b(I,".cpuTime+=",l(),"-",p,";");ea&&(e?b(q,".pushScopeStats(",K,",",q,".getNumPendingQueries(),",I,");"):b(q,".endQuery();"))}function v(b){var c=d.def(g,".profile");d(g,".profile=",b,";");d.exit(g,".profile=",c,";")}var t=b.shared,I=b.stats,g=t.current,q=t.timer;c=c.profile;var p,K;if(c){if(J(c)){c.enable?(n(d),f(d.exit),v("true")):v("false");return}c=c.append(b,d);v(c)}else c=d.def(g,".profile");t=b.block();n(t);d("if(",c,"){",t,"}");b=b.block();f(b);d.exit("if(",c,"){",b,"}")}function ma(b,
d,c,k,l){function n(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function f(c,e,k){function l(){d("if(!",g,".buffer){",t,".enableVertexAttribArray(",I,");}");var c=k.type,n;n=k.size?d.def(k.size,"||",e):e;d("if(",g,".type!==",c,"||",g,".size!==",n,"||",K.map(function(b){return g+"."+b+"!=="+k[b]}).join("||"),"){",t,".bindBuffer(",34962,",",q,".buffer);",t,".vertexAttribPointer(",[I,n,c,
k.normalized,k.stride,k.offset],");",g,".type=",c,";",g,".size=",n,";",K.map(function(b){return g+"."+b+"="+k[b]+";"}).join(""),"}");pa&&(c=k.divisor,d("if(",g,".divisor!==",c,"){",b.instancing,".vertexAttribDivisorANGLE(",[I,c],");",g,".divisor=",c,";}"))}function n(){d("if(",g,".buffer){",t,".disableVertexAttribArray(",I,");",g,".buffer=null;","}if(",P.map(function(b,d){return g+"."+b+"!=="+p[d]}).join("||"),"){",t,".vertexAttrib4f(",I,",",p,");",P.map(function(b,d){return g+"."+b+"="+p[d]+";"}).join(""),
"}")}var t=v.gl,I=d.def(c,".location"),g=d.def(v.attributes,"[",I,"]");c=k.state;var q=k.buffer,p=[k.x,k.y,k.z,k.w],K=["buffer","normalized","offset","stride"];1===c?l():2===c?n():(d("if(",c,"===",1,"){"),l(),d("}else{"),n(),d("}"))}var v=b.shared;k.forEach(function(k){var v=k.name,t=c.attributes[v],I;if(t){if(!l(t))return;I=t.append(b,d)}else{if(!l(aa))return;var g=b.scopeAttrib(v);e.optional(function(){b.assert(d,g+".state","missing attribute "+v)});I={};q(new sa).forEach(function(b){I[b]=d.def(g,
".",b)})}f(b.link(k),n(k.info.type),I)})}function Xb(b,d,c,k,l,n){for(var f=b.shared,v=f.gl,t,I=0;I<k.length;++I){var q=k[I],p=q.name,K=q.info.type,ma=c.uniforms[p],q=b.link(q)+".location",y;if(ma){if(!l(ma))continue;if(J(ma)){var Q=ma.value;e.command(null!==Q&&"undefined"!==typeof Q,'missing uniform "'+p+'"',b.commandStr);if(35678===K||35680===K)e.command("function"===typeof Q&&(35678===K&&("texture2d"===Q._reglType||"framebuffer"===Q._reglType)||35680===K&&("textureCube"===Q._reglType||"framebufferCube"===
Q._reglType)),"invalid texture for uniform "+p,b.commandStr),ma=b.link(Q._texture||Q.color[0]._texture),d(v,".uniform1i(",q,",",ma+".bind());"),d.exit(ma,".unbind();");else if(35674===K||35675===K||35676===K){e.optional(function(){e.command(m(Q),"invalid matrix for uniform "+p,b.commandStr);e.command(35674===K&&4===Q.length||35675===K&&9===Q.length||35676===K&&16===Q.length,"invalid length for matrix uniform "+p,b.commandStr)});var ma=b.global.def("new Float32Array(["+Array.prototype.slice.call(Q)+
"])"),L=2;35675===K?L=3:35676===K&&(L=4);d(v,".uniformMatrix",L,"fv(",q,",false,",ma,");")}else{switch(K){case 5126:e.commandType(Q,"number","uniform "+p,b.commandStr);t="1f";break;case 35664:e.command(m(Q)&&2===Q.length,"uniform "+p,b.commandStr);t="2f";break;case 35665:e.command(m(Q)&&3===Q.length,"uniform "+p,b.commandStr);t="3f";break;case 35666:e.command(m(Q)&&4===Q.length,"uniform "+p,b.commandStr);t="4f";break;case 35670:e.commandType(Q,"boolean","uniform "+p,b.commandStr);t="1i";break;case 5124:e.commandType(Q,
"number","uniform "+p,b.commandStr);t="1i";break;case 35671:e.command(m(Q)&&2===Q.length,"uniform "+p,b.commandStr);t="2i";break;case 35667:e.command(m(Q)&&2===Q.length,"uniform "+p,b.commandStr);t="2i";break;case 35672:e.command(m(Q)&&3===Q.length,"uniform "+p,b.commandStr);t="3i";break;case 35668:e.command(m(Q)&&3===Q.length,"uniform "+p,b.commandStr);t="3i";break;case 35673:e.command(m(Q)&&4===Q.length,"uniform "+p,b.commandStr);t="4i";break;case 35669:e.command(m(Q)&&4===Q.length,"uniform "+p,
b.commandStr),t="4i"}d(v,".uniform",t,"(",q,",",m(Q)?Array.prototype.slice.call(Q):Q,");")}continue}else y=ma.append(b,d)}else{if(!l(aa))continue;y=d.def(f.uniforms,"[",g.id(p),"]")}35678===K?(e(!Array.isArray(y),"must specify a scalar prop for textures"),d("if(",y,"&&",y,'._reglType==="framebuffer"){',y,"=",y,".color[0];","}")):35680===K&&(e(!Array.isArray(y),"must specify a scalar prop for cube maps"),d("if(",y,"&&",y,'._reglType==="framebufferCube"){',y,"=",y,".color[0];","}"));e.optional(function(){function c(k,
e){b.assert(d,k,'bad data or missing for uniform "'+p+'".  '+e)}function k(b){e(!Array.isArray(y),"must not specify an array type for uniform");c("typeof "+y+'==="'+b+'"',"invalid type, expected "+b)}function l(d,k){Array.isArray(y)?e(y.length===d,"must have length "+d):c(f.isArrayLike+"("+y+")&&"+y+".length==="+d,"invalid vector, should have length "+d,b.commandStr)}function n(d){e(!Array.isArray(y),"must not specify a value type");c("typeof "+y+'==="function"&&'+y+'._reglType==="texture'+(3553===
d?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(K){case 5124:k("number");break;case 35667:l(2,"number");break;case 35668:l(3,"number");break;case 35669:l(4,"number");break;case 5126:k("number");break;case 35664:l(2,"number");break;case 35665:l(3,"number");break;case 35666:l(4,"number");break;case 35670:k("boolean");break;case 35671:l(2,"boolean");break;case 35672:l(3,"boolean");break;case 35673:l(4,"boolean");break;case 35674:l(4,"number");break;case 35675:l(9,"number");break;case 35676:l(16,
"number");break;case 35678:n(3553);break;case 35680:n(34067)}});ma=1;switch(K){case 35678:case 35680:ma=d.def(y,"._texture");d(v,".uniform1i(",q,",",ma,".bind());");d.exit(ma,".unbind();");continue;case 5124:case 35670:t="1i";break;case 35667:case 35671:t="2i";ma=2;break;case 35668:case 35672:t="3i";ma=3;break;case 35669:case 35673:t="4i";ma=4;break;case 5126:t="1f";break;case 35664:t="2f";ma=2;break;case 35665:t="3f";ma=3;break;case 35666:t="4f";ma=4;break;case 35674:t="Matrix2fv";break;case 35675:t=
"Matrix3fv";break;case 35676:t="Matrix4fv"}if("M"===t.charAt(0)){d(v,".uniform",t,"(",q,",");var q=Math.pow(K-35674+2,2),S=b.global.def("new Float32Array(",q,")");Array.isArray(y)?d("false,(",F(q,function(b){return S+"["+b+"]="+y[b]}),",",S,")"):d("false,(Array.isArray(",y,")||",y," instanceof Float32Array)?",y,":(",F(q,function(b){return S+"["+b+"]="+y+"["+b+"]"}),",",S,")");d(");")}else{if(1<ma){for(var L=[],sa=[],Ba=0;Ba<ma;++Ba)Array.isArray(y)?sa.push(y[Ba]):sa.push(d.def(y+"["+Ba+"]")),n&&L.push(d.def());
n&&d("if(!",b.batchId,"||",L.map(function(b,d){return b+"!=="+sa[d]}).join("||"),"){",L.map(function(b,d){return b+"="+sa[d]+";"}).join(""));d(v,".uniform",t,"(",q,",",sa.join(","),");")}else e(!Array.isArray(y),"uniform value must not be an array"),n&&(ma=d.def(),d("if(!",b.batchId,"||",ma,"!==",y,"){",ma,"=",y,";")),d(v,".uniform",t,"(",q,",",y,");");n&&d("}")}}}function Ta(b,d,c,k){function l(e){var n=g[e];return n?n.contextDep&&k.contextDynamic||n.propDep?n.append(b,c):n.append(b,d):d.def(I,".",
e)}function n(){function b(){c(Q,".drawElementsInstancedANGLE(",[q,ma,L,K+"<<(("+L+"-5121)>>1)",y],");")}function d(){c(Q,".drawArraysInstancedANGLE(",[q,K,ma,y],");")}p&&"null"!==p?S?b():(c("if(",p,"){"),b(),c("}else{"),d(),c("}")):d()}function f(){function b(){c(v+".drawElements("+[q,ma,L,K+"<<(("+L+"-5121)>>1)"]+");")}function d(){c(v+".drawArrays("+[q,K,ma]+");")}p&&"null"!==p?S?b():(c("if(",p,"){"),b(),c("}else{"),d(),c("}")):d()}var t=b.shared,v=t.gl,I=t.draw,g=k.draw,p=function(){var e=g.elements,
l=d;if(e){if(e.contextDep&&k.contextDynamic||e.propDep)l=c;e=e.append(b,l);g.elementsActive&&l("if("+e+")"+v+".bindBuffer(34963,"+e+".buffer.buffer);")}else e=l.def(),l(e,"=",I,".","elements",";","if(",e,"){",v,".bindBuffer(",34963,",",e,".buffer.buffer);}","else if(",t.vao,".currentVAO){",e,"=",b.shared.elements+".getElements("+t.vao,".currentVAO.elements);",Ga?"":"if("+e+")"+v+".bindBuffer(34963,"+e+".buffer.buffer);","}");return e}(),q=l("primitive"),K=l("offset"),ma=function(){var l=g.count,n,
f=d;if(l){if(l.contextDep&&k.contextDynamic||l.propDep)f=c;n=l.append(b,f);e.optional(function(){l.MISSING&&b.assert(d,"false","missing vertex count");l.DYNAMIC&&b.assert(f,n+">=0","missing vertex count")})}else n=f.def(I,".","count"),e.optional(function(){b.assert(f,n+">=0","missing vertex count")});return n}();if("number"===typeof ma){if(0===ma)return}else c("if(",ma,"){"),c.exit("}");var y,Q;pa&&(y=l("instances"),Q=b.instancing);var L=p+".type",S=g.elements&&J(g.elements)&&!g.vaoActive;pa&&("number"!==
typeof y||0<=y)?"string"===typeof y?(c("if(",y,">0){"),n(),c("}else if(",y,"<0){"),f(),c("}")):n():f()}function v(b,d,c,k,l){var n=M();l=n.proc("body",l);e.optional(function(){n.commandStr=d.commandStr;n.command=n.link(d.commandStr)});pa&&(n.instancing=l.def(n.shared.extensions,".angle_instanced_arrays"));b(n,l,c,k);return n.compile().body}function t(b,d,c,e){Aa(b,d);c.useVAO?c.drawVAO?d(b.shared.vao,".setVAO(",c.drawVAO.append(b,d),");"):d(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(d(b.shared.vao,
".setVAO(null);"),ma(b,d,c,e.attributes,function(){return!0}));Xb(b,d,c,e.uniforms,function(){return!0},!1);Ta(b,d,d,c)}function K(b,d){var c=b.proc("draw",1);Aa(b,c);fa(b,c,d.context);Ea(b,c,d.framebuffer);ka(b,c,d);oa(b,c,d.state);Ba(b,c,d,!1,!0);var e=d.shader.progVar.append(b,c);c(b.shared.gl,".useProgram(",e,".program);");if(d.shader.program)t(b,c,d,d.shader.program);else{c(b.shared.vao,".setVAO(null);");var k=b.global.def("{}"),l=c.def(e,".id"),n=c.def(k,"[",l,"]");c(b.cond(n).then(n,".call(this,a0);")["else"](n,
"=",k,"[",l,"]=",b.link(function(c){return v(t,b,d,c,1)}),"(",e,");",n,".call(this,a0);"))}0<q(d.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function ua(b,d,c,e){function k(){return!0}b.batchId="a1";Aa(b,d);ma(b,d,c,e.attributes,k);Xb(b,d,c,e.uniforms,k,!1);Ta(b,d,d,c)}function va(b,d,c,e){function k(b){return b.contextDep&&n||b.propDep}function l(b){return!k(b)}Aa(b,d);var n=c.contextDep,f=d.def(),t=d.def();b.shared.props=t;b.batchId=f;var I=b.scope(),
g=b.scope();d(I.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",t,"=","a0","[",f,"];",g,"}",I.exit);c.needsContext&&fa(b,g,c.context);c.needsFramebuffer&&Ea(b,g,c.framebuffer);oa(b,g,c.state,k);c.profile&&k(c.profile)&&Ba(b,g,c,!1,!0);e?(c.useVAO?c.drawVAO?k(c.drawVAO)?g(b.shared.vao,".setVAO(",c.drawVAO.append(b,g),");"):I(b.shared.vao,".setVAO(",c.drawVAO.append(b,I),");"):I(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(I(b.shared.vao,".setVAO(null);"),ma(b,I,c,e.attributes,l),ma(b,g,c,e.attributes,
k)),Xb(b,I,c,e.uniforms,l,!1),Xb(b,g,c,e.uniforms,k,!0),Ta(b,I,g,c)):(d=b.global.def("{}"),e=c.shader.progVar.append(b,g),t=g.def(e,".id"),I=g.def(d,"[",t,"]"),g(b.shared.gl,".useProgram(",e,".program);","if(!",I,"){",I,"=",d,"[",t,"]=",b.link(function(d){return v(ua,b,c,d,2)}),"(",e,");}",I,".call(this,a0[",f,"],",f,");"))}function ed(b,d){function c(b){return b.contextDep&&k||b.propDep}var e=b.proc("batch",2);b.batchId="0";Aa(b,e);var k=!1,l=!0;q(d.context).forEach(function(b){k=k||d.context[b].propDep});
k||(fa(b,e,d.context),l=!1);var n=d.framebuffer,f=!1;n?(n.propDep?k=f=!0:n.contextDep&&k&&(f=!0),f||Ea(b,e,n)):Ea(b,e,null);d.state.viewport&&d.state.viewport.propDep&&(k=!0);ka(b,e,d);oa(b,e,d.state,function(b){return!c(b)});d.profile&&c(d.profile)||Ba(b,e,d,!1,"a1");d.contextDep=k;d.needsContext=l;d.needsFramebuffer=f;l=d.shader.progVar;if(l.contextDep&&k||l.propDep)va(b,e,d,null);else if(l=l.append(b,e),e(b.shared.gl,".useProgram(",l,".program);"),d.shader.program)va(b,e,d,d.shader.program);else{e(b.shared.vao,
".setVAO(null);");var n=b.global.def("{}"),f=e.def(l,".id"),t=e.def(n,"[",f,"]");e(b.cond(t).then(t,".call(this,a0,a1);")["else"](t,"=",n,"[",f,"]=",b.link(function(c){return v(va,b,d,c,2)}),"(",l,");",t,".call(this,a0,a1);"))}0<q(d.state).length&&e(b.shared.current,".dirty=true;");b.shared.vao&&e(b.shared.vao,".setVAO(null);")}function Gb(b,d){function c(l){var n=d.shader[l];n&&e.set(k.shader,"."+l,n.append(b,e))}var e=b.proc("scope",3);b.batchId="a2";var k=b.shared,l=k.current;fa(b,e,d.context);
d.framebuffer&&d.framebuffer.append(b,e);Z(q(d.state)).forEach(function(c){var l=d.state[c].append(b,e);m(l)?l.forEach(function(d,k){e.set(b.next[c],"["+k+"]",d)}):e.set(k.next,"."+c,l)});Ba(b,e,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var l=d.draw[c];l&&e.set(k.draw,"."+c,""+l.append(b,e))});q(d.uniforms).forEach(function(c){var l=d.uniforms[c].append(b,e);Array.isArray(l)&&(l="["+l.join()+"]");e.set(k.uniforms,"["+g.id(c)+"]",l)});q(d.attributes).forEach(function(c){var k=
d.attributes[c].append(b,e),l=b.scopeAttrib(c);q(new sa).forEach(function(b){e.set(l,"."+b,k[b])})});d.scopeVAO&&e.set(k.vao,".targetVAO",d.scopeVAO.append(b,e));c("vert");c("frag");0<q(d.state).length&&(e(l,".dirty=true;"),e.exit(l,".dirty=true;"));e("a1(",b.shared.context,",a0,",b.batchId,");")}function ha(b){if("object"===typeof b&&!m(b)){for(var d=q(b),c=0;c<d.length;++c)if(r.isDynamic(b[d[c]]))return!0;return!1}}function I(b,d,c){function e(b,d){f.forEach(function(c){var e=l[c];r.isDynamic(e)&&
(e=b.invoke(d,e),d(g,".",c,"=",e,";"))})}var l=d["static"][c];if(l&&ha(l)){var n=b.global,f=q(l),t=!1,v=!1,I=!1,g=b.global.def("{}");f.forEach(function(d){var c=l[d];if(r.isDynamic(c))"function"===typeof c&&(c=l[d]=r.unbox(c)),d=k(c,null),t=t||d.thisDep,I=I||d.propDep,v=v||d.contextDep;else{n(g,".",d,"=");switch(typeof c){case "number":n(c);break;case "string":n('"',c,'"');break;case "object":Array.isArray(c)&&n("[",c.join(),"]");break;default:n(b.link(c))}n(";")}});d.dynamic[c]=new r.DynamicVariable(4,
{thisDep:t,contextDep:v,propDep:I,ref:g,append:e});delete d["static"][c]}}var sa=z.Record,Ha={add:32774,subtract:32778,"reverse subtract":32779};w.ext_blend_minmax&&(Ha.min=32775,Ha.max=32776);var pa=w.angle_instanced_arrays,ya=w.webgl_draw_buffers,Ga=w.oes_vertex_array_object,ja={dirty:!0,profile:T.profile},Y={},ta=[],Ka={},Fa={};A("dither",3024);A("blend.enable",3042);l("blend.color","blendColor",[0,0,0,0]);l("blend.equation","blendEquationSeparate",[32774,32774]);l("blend.func","blendFuncSeparate",
[1,0,1,0]);A("depth.enable",2929,!0);l("depth.func","depthFunc",513);l("depth.range","depthRange",[0,1]);l("depth.mask","depthMask",!0);l("colorMask","colorMask",[!0,!0,!0,!0]);A("cull.enable",2884);l("cull.face","cullFace",1029);l("frontFace","frontFace",2305);l("lineWidth","lineWidth",1);A("polygonOffset.enable",32823);l("polygonOffset.offset","polygonOffset",[0,0]);A("sample.alpha",32926);A("sample.enable",32928);l("sample.coverage","sampleCoverage",[1,!1]);A("stencil.enable",2960);l("stencil.mask",
"stencilMask",-1);l("stencil.func","stencilFunc",[519,0,-1]);l("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);l("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);A("scissor.enable",3089);l("scissor.box","scissor",[0,0,y.drawingBufferWidth,y.drawingBufferHeight]);l("viewport","viewport",[0,0,y.drawingBufferWidth,y.drawingBufferHeight]);var gb={gl:y,context:X,strings:g,next:Y,current:ja,draw:id,elements:d,buffer:E,shader:ra,attributes:z.state,vao:z,uniforms:U,framebuffer:b,extensions:w,
timer:ea,isBufferArgs:a},ca={primTypes:da,compareFuncs:c,blendFuncs:R,blendEquations:Ha,stencilOps:f,glTypes:u,orientationType:p};e.optional(function(){gb.isArrayLike=m});ya&&(ca.backBuffer=[1029],ca.drawBuffer=F(C.maxDrawbuffers,function(b){return 0===b?[0]:F(b,function(b){return 36064+b})}));var yd=0;return{next:Y,current:ja,procs:function(){var b=M(),d=b.proc("poll"),c=b.proc("refresh"),e=b.block();d(e);c(e);var k=b.shared,l=k.gl,n=k.next,f=k.current;e(f,".dirty=false;");Ea(b,d);Ea(b,c,null,!0);
var t;pa&&(t=b.link(pa));w.oes_vertex_array_object&&c(b.link(w.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var v=0;v<C.maxAttributes;++v){var I=c.def(k.attributes,"[",v,"]"),g=b.cond(I,".buffer");g.then(l,".enableVertexAttribArray(",v,");",l,".bindBuffer(",34962,",",I,".buffer.buffer);",l,".vertexAttribPointer(",v,",",I,".size,",I,".type,",I,".normalized,",I,".stride,",I,".offset);")["else"](l,".disableVertexAttribArray(",v,");",l,".vertexAttrib4f(",v,",",I,".x,",I,".y,",I,".z,",I,
".w);",I,".buffer=null;");c(g);pa&&c(t,".vertexAttribDivisorANGLE(",v,",",I,".divisor);")}c(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");q(Ka).forEach(function(k){var t=Ka[k],v=e.def(n,".",k),I=b.block();I("if(",v,"){",l,".enable(",t,")}else{",l,".disable(",t,")}",f,".",k,"=",v,";");c(I);d("if(",v,"!==",f,".",k,"){",I,"}")});q(Fa).forEach(function(k){var t=Fa[k],v=ja[k],I,g,p=b.block();p(l,".",t,"(");m(v)?(t=v.length,I=b.global.def(n,".",k),g=b.global.def(f,
".",k),p(F(t,function(b){return I+"["+b+"]"}),");",F(t,function(b){return g+"["+b+"]="+I+"["+b+"];"}).join("")),d("if(",F(t,function(b){return I+"["+b+"]!=="+g+"["+b+"]"}).join("||"),"){",p,"}")):(I=e.def(n,".",k),g=e.def(f,".",k),p(I,");",f,".",k,"=",I,";"),d("if(",I,"!==",g,"){",p,"}"));c(p)});return b.compile()}(),compile:function(b,d,c,e,k){var l=M();l.stats=l.link(k);q(d["static"]).forEach(function(b){I(l,d,b)});x.forEach(function(d){I(l,b,d)});var n=Ca(b,d,c,e,l);K(l,n);Gb(l,n);ed(l,n);return B(l.compile(),
{destroy:function(){n.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(V,ia,za){function a(q,e){this.id=k++;this.type=q;this.data=e}function Z(k){if(0===k.length)return[];var e=k.charAt(0),a=k.charAt(k.length-1);if(1<k.length&&e===a&&('"'===e||"'"===
e))return['"'+k.substr(1,k.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(k))return Z(k.substr(0,e.index)).concat(Z(e[1])).concat(Z(k.substr(e.index+e[0].length)));e=k.split(".");if(1===e.length)return['"'+k.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];k=[];for(a=0;a<e.length;++a)k=k.concat(Z(e[a]));return k}function G(k){return"["+Z(k).join("][")+"]"}function J(k,e){if("function"===typeof k)return new a(0,k);if("number"===typeof k||
"boolean"===typeof k)return new a(5,k);if(Array.isArray(k))return new a(6,k.map(function(k,q){return J(k,e+"["+q+"]")}));if(k instanceof a)return k;h(!1,"invalid option type in uniform "+e)}var h=V("./util/check"),k=0;ia.exports={DynamicVariable:a,define:function(k,e){return new a(k,G(e+""))},isDynamic:function(k){return"function"===typeof k&&!k._reglType||k instanceof a},unbox:J,accessor:G}},{"./util/check":21}],10:[function(V,ia,za){var a=V("./util/check"),Z=V("./util/is-typed-array"),G=V("./util/is-ndarray"),
J=V("./util/values"),h=V("./constants/primitives.json"),k=V("./constants/usage.json");ia.exports=function(q,e,B,D){function F(k){this.id=r++;m[this.id]=this;this.buffer=k;this.primType=4;this.type=this.vertCount=0}function U(k,h,u,m,c,f,L){k.buffer.bind();var p;h?((p=L)||Z(h)&&(!G(h)||Z(h.data))||(p=e.oes_element_index_uint?5125:5123),B._initBuffer(k.buffer,h,u,p,3)):(q.bufferData(34963,f,u),k.buffer.dtype=p||5121,k.buffer.usage=u,k.buffer.dimension=3,k.buffer.byteLength=f);p=L;if(!L){switch(k.buffer.dtype){case 5121:case 5120:p=
5121;break;case 5123:case 5122:p=5123;break;case 5125:case 5124:p=5125;break;default:a.raise("unsupported type for element array")}k.buffer.dtype=p}k.type=p;a(5125!==p||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");h=c;0>h&&(h=k.buffer.byteLength,5123===p?h>>=1:5125===p&&(h>>=2));k.vertCount=h;h=m;0>m&&(h=4,m=k.buffer.dimension,1===m&&(h=0),2===m&&(h=1),3===m&&(h=4));k.primType=h}function w(k){D.elementsCount--;a(null!==k.buffer,"must not double destroy elements");
delete m[k.id];k.buffer.destroy();k.buffer=null}var m={},r=0,da={uint8:5121,uint16:5123};e.oes_element_index_uint&&(da.uint32=5125);F.prototype.bind=function(){this.buffer.bind()};var u=[];return{create:function(e,q){function u(e){if(e)if("number"===typeof e)m(e),c.primType=4,c.vertCount=e|0,c.type=5121;else{var q=null,p=35044,x=-1,y=-1,g=0,w=0;if(Array.isArray(e)||Z(e)||G(e))q=e;else if(a.type(e,"object","invalid arguments for elements"),"data"in e&&(q=e.data,a(Array.isArray(q)||Z(q)||G(q),"invalid data for element buffer")),
"usage"in e&&(a.parameter(e.usage,k,"invalid element buffer usage"),p=k[e.usage]),"primitive"in e&&(a.parameter(e.primitive,h,"invalid element buffer primitive"),x=h[e.primitive]),"count"in e&&(a("number"===typeof e.count&&0<=e.count,"invalid vertex count for elements"),y=e.count|0),"type"in e&&(a.parameter(e.type,da,"invalid buffer type"),w=da[e.type]),"length"in e)g=e.length|0;else if(g=y,5123===w||5122===w)g*=2;else if(5125===w||5124===w)g*=4;U(c,q,p,x,y,g,w)}else m(),c.primType=4,c.vertCount=
0,c.type=5121;return u}var m=B.create(null,34963,!0),c=new F(m._buffer);D.elementsCount++;u(e);u._reglType="elements";u._elements=c;u.subdata=function(c,k){m.subdata(c,k);return u};u.destroy=function(){w(c)};return u},createStream:function(k){var e=u.pop();e||(e=new F(B.create(null,34963,!0,!1)._buffer));U(e,k,35040,-1,-1,0,0);return e},destroyStream:function(k){u.push(k)},getElements:function(k){return"function"===typeof k&&k._elements instanceof F?k._elements:null},clear:function(){J(m).forEach(w)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(V,ia,za){var a=V("./util/sorted-object-keys"),Z=V("./util/check");ia.exports=function(G,J){function h(e){Z.type(e,"string","extension name must be string");e=e.toLowerCase();var q;try{q=k[e]=G.getExtension(e)}catch(h){}return!!q}for(var k={},q=0;q<J.extensions.length;++q){var e=J.extensions[q];if(!h(e))return J.onDestroy(),J.onDone('"'+e+
'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}J.optionalExtensions.forEach(h);return{extensions:k,restore:function(){a(k).forEach(function(e){if(k[e]&&!h(e))throw Error("(regl): error restoring extension "+e);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(V,ia,za){var a=V("./util/check"),Z=V("./util/values"),G=V("./util/extend"),J=[6407,6408],h=[];h[6408]=4;h[6407]=3;var k=[];k[5121]=1;k[5126]=4;k[36193]=
2;var q=[32854,32855,36194,35907,34842,34843,34836],e={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ia.exports=function(B,D,F,U,w,m){function r(b,d,c){this.target=b;this.texture=d;this.renderbuffer=c;var e=b=0;d?(b=d.width,e=d.height):c&&(b=c.width,e=c.height);this.width=b;this.height=e}function da(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function u(b,
d,c){if(b){if(b.texture){b=b.texture._texture;var e=Math.max(1,b.height);a(Math.max(1,b.width)===d&&e===c,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,a(b.width===d&&b.height===c,"inconsistent width/height for renderbuffer");b.refCount+=1}}function P(b,d){d&&(d.texture?B.framebufferTexture2D(36160,b,d.target,d.texture._texture.texture,0):B.framebufferRenderbuffer(36160,b,36161,d.renderbuffer._renderbuffer.renderbuffer))}function x(b){var d=3553,c=null,e=null,
k=b;"object"===typeof b&&(k=b.data,"target"in b&&(d=b.target|0));a.type(k,"function","invalid attachment data");b=k._reglType;"texture2d"===b?(c=k,a(3553===d)):"textureCube"===b?(c=k,a(34069<=d&&34075>d,"invalid cube map target")):"renderbuffer"===b?(e=k,d=36161):a.raise("invalid regl object for attachment");return new r(d,c,e)}function R(b,d,c,e,k){if(c)return b=U.create2D({width:b,height:d,format:e,type:k}),b._texture.refCount=0,new r(3553,b,null);b=w.create({width:b,height:d,format:e});b._renderbuffer.refCount=
0;return new r(36161,null,b)}function ga(b){return b&&(b.texture||b.renderbuffer)}function c(b,d,c){b&&(b.texture?b.texture.resize(d,c):b.renderbuffer&&b.renderbuffer.resize(d,c),b.width=d,b.height=c)}function f(){this.id=d++;Q[this.id]=this;this.framebuffer=B.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function L(b){b.colorAttachments.forEach(da);da(b.depthAttachment);da(b.stencilAttachment);da(b.depthStencilAttachment)}
function p(b){var d=b.framebuffer;a(d,"must not double destroy framebuffer");B.deleteFramebuffer(d);b.framebuffer=null;m.framebufferCount--;delete Q[b.id]}function aa(b){var d;B.bindFramebuffer(36160,b.framebuffer);var c=b.colorAttachments;for(d=0;d<c.length;++d)P(36064+d,c[d]);for(d=c.length;d<F.maxColorAttachments;++d)B.framebufferTexture2D(36160,36064+d,3553,null,0);B.framebufferTexture2D(36160,33306,3553,null,0);B.framebufferTexture2D(36160,36096,3553,null,0);B.framebufferTexture2D(36160,36128,
3553,null,0);P(36096,b.depthAttachment);P(36128,b.stencilAttachment);P(33306,b.depthStencilAttachment);b=B.checkFramebufferStatus(36160);B.isContextLost()||36053===b||a.raise("framebuffer configuration not supported, status = "+e[b]);B.bindFramebuffer(36160,g.next?g.next.framebuffer:null);g.cur=g.next;B.getError()}function y(b,d){function e(b,d){var c;a(g.next!==y,"can not update framebuffer which is currently in use");var f=0,p=0,Q=!0,l=!0;c=null;var m=!0,N="rgba",w="uint8",U=1,n=null,H=null,ba=
null,O=!1;if("number"===typeof b)f=b|0,p=d|0||f;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(p=b.shape,a(Array.isArray(p)&&2<=p.length,"invalid shape for framebuffer"),f=p[0],p=p[1]):("radius"in b&&(f=p=b.radius),"width"in b&&(f=b.width),"height"in b&&(p=b.height));if("color"in b||"colors"in b)c=b.color||b.colors,Array.isArray(c)&&a(1===c.length||D.webgl_draw_buffers,"multiple render targets not supported");if(!c){"colorCount"in b&&(U=b.colorCount|0,a(0<U,"invalid color buffer count"));
"colorTexture"in b&&(m=!!b.colorTexture,N="rgba4");if("colorType"in b){w=b.colorType;if(m)a(D.oes_texture_float||!("float"===w||"float32"===w),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(D.oes_texture_half_float||!("half float"===w||"float16"===w),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===w||"float16"===w)a(D.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
N="rgba16f";else if("float"===w||"float32"===w)a(D.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),N="rgba32f";a.oneOf(w,E,"invalid color type")}"colorFormat"in b&&(N=b.colorFormat,0<=W.indexOf(N)?m=!0:0<=C.indexOf(N)?m=!1:a.optional(function(){if(m)a.oneOf(b.colorFormat,W,"invalid color format for texture");else a.oneOf(b.colorFormat,C,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in
b)O=!(!b.depthTexture&&!b.depthStencilTexture),a(!O||D.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?Q=b.depth:(n=b.depth,l=!1));"stencil"in b&&("boolean"===typeof b.stencil?l=b.stencil:(H=b.stencil,Q=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?Q=l=b.depthStencil:(ba=b.depthStencil,l=Q=!1))}else f=p=1;var r=null,P=null,B=null,G=null;if(Array.isArray(c))r=c.map(x);else if(c)r=[x(c)];else for(r=Array(U),c=0;c<U;++c)r[c]=R(f,
p,m,N,w);a(D.webgl_draw_buffers||1>=r.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(r.length<=F.maxColorAttachments,"too many color attachments, not supported");f=f||r[0].width;p=p||r[0].height;n?P=x(n):Q&&!l&&(P=R(f,p,O,"depth","uint32"));H?B=x(H):l&&!Q&&(B=R(f,p,!1,"stencil","uint8"));ba?G=x(ba):!n&&!H&&l&&Q&&(G=R(f,p,O,"depth stencil","depth stencil"));a(1>=!!n+!!H+!!ba,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
Q=null;for(c=0;c<r.length;++c)u(r[c],f,p),a(!r[c]||r[c].texture&&0<=J.indexOf(r[c].texture._texture.format)||r[c].renderbuffer&&0<=q.indexOf(r[c].renderbuffer._renderbuffer.format),"framebuffer color attachment "+c+" is invalid"),r[c]&&r[c].texture&&(l=h[r[c].texture._texture.format]*k[r[c].texture._texture.type],null===Q?Q=l:a(Q===l,"all color attachments much have the same number of bits per pixel."));u(P,f,p);a(!P||P.texture&&6402===P.texture._texture.format||P.renderbuffer&&33189===P.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");u(B,f,p);a(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");u(G,f,p);a(!G||G.texture&&34041===G.texture._texture.format||G.renderbuffer&&34041===G.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");L(y);y.width=f;y.height=p;y.colorAttachments=r;y.depthAttachment=P;y.stencilAttachment=B;y.depthStencilAttachment=G;e.color=r.map(ga);e.depth=
ga(P);e.stencil=ga(B);e.depthStencil=ga(G);e.width=y.width;e.height=y.height;aa(y);return e}var y=new f;m.framebufferCount++;e(b,d);return G(e,{resize:function(b,d){a(g.next!==y,"can not resize a framebuffer which is currently in use");var k=Math.max(b|0,1),f=Math.max(d|0||k,1);if(k===y.width&&f===y.height)return e;for(var p=y.colorAttachments,q=0;q<p.length;++q)c(p[q],k,f);c(y.depthAttachment,k,f);c(y.stencilAttachment,k,f);c(y.depthStencilAttachment,k,f);y.width=e.width=k;y.height=e.height=f;aa(y);
return e},_reglType:"framebuffer",_framebuffer:y,destroy:function(){p(y);L(y)},use:function(b){g.setFBO({framebuffer:e},b)}})}var g={cur:null,next:null,dirty:!1,setFBO:null},W=["rgba"],C=["rgba4","rgb565","rgb5 a1"];D.ext_srgb&&C.push("srgba");D.ext_color_buffer_half_float&&C.push("rgba16f","rgb16f");D.webgl_color_buffer_float&&C.push("rgba32f");var E=["uint8"];D.oes_texture_half_float&&E.push("half float","float16");D.oes_texture_float&&E.push("float","float32");var d=0,Q={};return G(g,{getFramebuffer:function(b){return"function"===
typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof f)?b:null},create:y,createCube:function(b){function d(b){var e;a(0>c.indexOf(g.next),"can not update framebuffer which is currently in use");var k={color:null},f=0,p=null;e="rgba";var q="uint8",Q=1;if("number"===typeof b)f=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(f=b.shape,a(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),a(f[0]===f[1],"cube framebuffer must be square"),f=
f[0]):("radius"in b&&(f=b.radius|0),"width"in b?(f=b.width|0,"height"in b&&a(b.height===f,"must be square")):"height"in b&&(f=b.height|0));if("color"in b||"colors"in b)p=b.color||b.colors,Array.isArray(p)&&a(1===p.length||D.webgl_draw_buffers,"multiple render targets not supported");p||("colorCount"in b&&(Q=b.colorCount|0,a(0<Q,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,E,"invalid color type"),q=b.colorType),"colorFormat"in b&&(e=b.colorFormat,a.oneOf(b.colorFormat,W,"invalid color format for texture")));
"depth"in b&&(k.depth=b.depth);"stencil"in b&&(k.stencil=b.stencil);"depthStencil"in b&&(k.depthStencil=b.depthStencil)}else f=1;if(p)if(Array.isArray(p))for(b=[],e=0;e<p.length;++e)b[e]=p[e];else b=[p];else for(b=Array(Q),p={radius:f,format:e,type:q},e=0;e<Q;++e)b[e]=U.createCube(p);k.color=Array(b.length);for(e=0;e<b.length;++e)Q=b[e],a("function"===typeof Q&&"textureCube"===Q._reglType,"invalid cube map"),f=f||Q.width,a(Q.width===f&&Q.height===f,"invalid cube map shape"),k.color[e]={target:34069,
data:b[e]};for(e=0;6>e;++e){for(Q=0;Q<b.length;++Q)k.color[Q].target=34069+e;0<e&&(k.depth=c[0].depth,k.stencil=c[0].stencil,k.depthStencil=c[0].depthStencil);if(c[e])c[e](k);else c[e]=y(k)}return G(d,{width:f,height:f,color:b})}var c=Array(6);d(b);return G(d,{faces:c,resize:function(b){var e=b|0;a(0<e&&e<=F.maxCubeMapSize,"invalid radius for cube fbo");if(e===d.width)return d;var k=d.color;for(b=0;b<k.length;++b)k[b].resize(e);for(b=0;6>b;++b)c[b].resize(e);d.width=d.height=e;return d},_reglType:"framebufferCube",
destroy:function(){c.forEach(function(b){b.destroy()})}})},clear:function(){Z(Q).forEach(p)},restore:function(){g.cur=null;g.next=null;g.dirty=!0;Z(Q).forEach(function(b){b.framebuffer=B.createFramebuffer();aa(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(V,ia,za){var a=V("./util/sorted-object-keys"),Z=V("./util/pool");ia.exports=function(G,J){var h=1;J.ext_texture_filter_anisotropic&&(h=G.getParameter(34047));var k=1,q=1;J.webgl_draw_buffers&&(k=G.getParameter(34852),
q=G.getParameter(36063));var e=!!J.oes_texture_float;if(e){e=G.createTexture();G.bindTexture(3553,e);G.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var B=G.createFramebuffer();G.bindFramebuffer(36160,B);G.framebufferTexture2D(36160,36064,3553,e,0);G.bindTexture(3553,null);if(36053!==G.checkFramebufferStatus(36160))e=!1;else{G.viewport(0,0,1,1);G.clearColor(1,0,0,1);G.clear(16384);var D=Z.allocType(5126,4);G.readPixels(0,0,1,1,6408,5126,D);G.getError()?e=!1:(G.deleteFramebuffer(B),G.deleteTexture(e),
e=1===D[0]);Z.freeType(D)}}D=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(D=G.createTexture(),B=Z.allocType(5121,36),G.activeTexture(33984),G.bindTexture(34067,D),G.texImage2D(34069,0,6408,3,3,0,6408,5121,B),Z.freeType(B),G.bindTexture(34067,null),G.deleteTexture(D),D=!G.getError());return{colorBits:[G.getParameter(3410),G.getParameter(3411),G.getParameter(3412),G.getParameter(3413)],depthBits:G.getParameter(3414),
stencilBits:G.getParameter(3415),subpixelBits:G.getParameter(3408),extensions:a(J).filter(function(e){return!!J[e]}),maxAnisotropic:h,maxDrawbuffers:k,maxColorAttachments:q,pointSizeDims:G.getParameter(33901),lineWidthDims:G.getParameter(33902),maxViewportDims:G.getParameter(3386),maxCombinedTextureUnits:G.getParameter(35661),maxCubeMapSize:G.getParameter(34076),maxRenderbufferSize:G.getParameter(34024),maxTextureUnits:G.getParameter(34930),maxTextureSize:G.getParameter(3379),maxAttributes:G.getParameter(34921),
maxVertexUniforms:G.getParameter(36347),maxVertexTextureUnits:G.getParameter(35660),maxVaryingVectors:G.getParameter(36348),maxFragmentUniforms:G.getParameter(36349),glsl:G.getParameter(35724),renderer:G.getParameter(7937),vendor:G.getParameter(7936),version:G.getParameter(7938),readFloat:e,npotTextureCube:D}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(V,ia,za){var a=V("./util/check"),Z=V("./util/is-typed-array");ia.exports=function(G,J,h,k,q,e,B){function D(U){var w;null===
J.next?(a(q.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),w=5121):(a(null!==J.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),w=J.next.colorAttachments[0].texture._texture.type,a.optional(function(){e.oes_texture_float?(a(5121===w||5126===w,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===w&&a(B.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
a(5121===w,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var m=0,r=0,D=k.framebufferWidth,u=k.framebufferHeight,P=null;Z(U)?P=U:U&&(a.type(U,"object","invalid arguments to regl.read()"),m=U.x|0,r=U.y|0,a(0<=m&&m<k.framebufferWidth,"invalid x offset for regl.read"),a(0<=r&&r<k.framebufferHeight,"invalid y offset for regl.read"),D=(U.width||k.framebufferWidth-m)|0,u=(U.height||k.framebufferHeight-r)|0,P=U.data||null);P&&(5121===w?a(P instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===w&&a(P instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<D&&D+m<=k.framebufferWidth,"invalid width for read pixels");a(0<u&&u+r<=k.framebufferHeight,"invalid height for read pixels");h();U=D*u*4;P||(5121===w?P=new Uint8Array(U):5126===w&&(P=P||new Float32Array(U)));a.isTypedArray(P,"data buffer for regl.read() must be a typedarray");a(P.byteLength>=U,"data buffer for regl.read() too small");G.pixelStorei(3333,4);G.readPixels(m,r,D,
u,6408,w,P);return P}function F(e){var k;J.setFBO({framebuffer:e.framebuffer},function(){k=D(e)});return k}return function(e){return e&&"framebuffer"in e?F(e):D(e)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(V,ia,za){var a=V("./util/sorted-object-keys"),Z=V("./util/check"),G=V("./util/values"),J=[];J[32854]=2;J[32855]=2;J[36194]=2;J[33189]=2;J[36168]=1;J[34041]=4;J[35907]=4;J[34836]=16;J[34842]=8;J[34843]=6;ia.exports=function(h,k,q,e,B){function D(e){this.id=m++;this.refCount=
1;this.renderbuffer=e;this.format=32854;this.height=this.width=0;B.profile&&(this.stats={size:0})}function F(k){var q=k.renderbuffer;Z(q,"must not double destroy renderbuffer");h.bindRenderbuffer(36161,null);h.deleteRenderbuffer(q);k.renderbuffer=null;k.refCount=0;delete r[k.id];e.renderbufferCount--}var U={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};k.ext_srgb&&(U.srgba=35907);k.ext_color_buffer_half_float&&(U.rgba16f=34842,U.rgb16f=34843);k.webgl_color_buffer_float&&
(U.rgba32f=34836);var w=[];a(U).forEach(function(e){w[U[e]]=e});var m=0,r={};D.prototype.decRef=function(){0>=--this.refCount&&F(this)};B.profile&&(e.getTotalRenderbufferSize=function(){var e=0;a(r).forEach(function(k){e+=r[k].stats.size});return e});return{create:function(k,a){function m(e,k){var c=0,f=0,L=32854;"object"===typeof e&&e?("shape"in e?(f=e.shape,Z(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),c=f[0]|0,f=f[1]|0):("radius"in e&&(c=f=e.radius|0),"width"in e&&(c=e.width|0),
"height"in e&&(f=e.height|0)),"format"in e&&(Z.parameter(e.format,U,"invalid renderbuffer format"),L=U[e.format])):"number"===typeof e?(c=e|0,f="number"===typeof k?k|0:c):e?Z.raise("invalid arguments to renderbuffer constructor"):c=f=1;Z(0<c&&0<f&&c<=q.maxRenderbufferSize&&f<=q.maxRenderbufferSize,"invalid renderbuffer size");if(c!==x.width||f!==x.height||L!==x.format)return m.width=x.width=c,m.height=x.height=f,x.format=L,h.bindRenderbuffer(36161,x.renderbuffer),h.renderbufferStorage(36161,L,c,f),
Z(0===h.getError(),"invalid render buffer format"),B.profile&&(x.stats.size=J[x.format]*x.width*x.height),m.format=w[x.format],m}var x=new D(h.createRenderbuffer());r[x.id]=x;e.renderbufferCount++;m(k,a);m.resize=function(e,k){var c=e|0,f=k|0||c;if(c===x.width&&f===x.height)return m;Z(0<c&&0<f&&c<=q.maxRenderbufferSize&&f<=q.maxRenderbufferSize,"invalid renderbuffer size");m.width=x.width=c;m.height=x.height=f;h.bindRenderbuffer(36161,x.renderbuffer);h.renderbufferStorage(36161,x.format,c,f);Z(0===
h.getError(),"invalid render buffer format");B.profile&&(x.stats.size=J[x.format]*x.width*x.height);return m};m._reglType="renderbuffer";m._renderbuffer=x;B.profile&&(m.stats=x.stats);m.destroy=function(){x.decRef()};return m},clear:function(){G(r).forEach(F)},restore:function(){G(r).forEach(function(e){e.renderbuffer=h.createRenderbuffer();h.bindRenderbuffer(36161,e.renderbuffer);h.renderbufferStorage(36161,e.format,e.width,e.height)});h.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,
"./util/values":36}],16:[function(V,ia,za){var a=V("./util/sorted-object-keys"),Z=V("./util/check"),G=V("./util/extend"),J=V("./util/values");ia.exports=function(h,k,q,e){function B(e,k,q,c){this.name=e;this.id=k;this.location=q;this.info=c}function D(e,k){for(var q=0;q<e.length;++q)if(e[q].id===k.id){e[q].location=k.location;return}e.push(k)}function F(e,q,a){var c=35632===e?m:r,f=c[q];if(!f){var L=k.str(q),f=h.createShader(e);h.shaderSource(f,L);h.compileShader(f);Z.shaderError(h,f,L,e,a);c[q]=
f}return f}function U(k,q){this.id=P++;this.fragId=k;this.vertId=q;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;e.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function w(q,a,u){var c;c=F(35632,q.fragId);var f=F(35633,q.vertId),L=q.program=h.createProgram();h.attachShader(L,c);h.attachShader(L,f);if(u)for(c=0;c<u.length;++c)f=u[c],h.bindAttribLocation(L,f[0],f[1]);h.linkProgram(L);Z.linkError(h,L,k.str(q.fragId),k.str(q.vertId),a);u=h.getProgramParameter(L,35718);
e.profile&&(q.stats.uniformsCount=u);f=q.uniforms;for(c=0;c<u;++c)if(a=h.getActiveUniform(L,c))if(1<a.size)for(var p=0;p<a.size;++p){var m=a.name.replace("[0]","["+p+"]");D(f,new B(m,k.id(m),h.getUniformLocation(L,m),a))}else D(f,new B(a.name,k.id(a.name),h.getUniformLocation(L,a.name),a));u=h.getProgramParameter(L,35721);e.profile&&(q.stats.attributesCount=u);q=q.attributes;for(c=0;c<u;++c)(a=h.getActiveAttrib(L,c))&&D(q,new B(a.name,k.id(a.name),h.getAttribLocation(L,a.name),a))}var m={},r={},da=
{},u=[],P=0;e.profile&&(q.getMaxUniformsCount=function(){var e=0;u.forEach(function(k){k.stats.uniformsCount>e&&(e=k.stats.uniformsCount)});return e},q.getMaxAttributesCount=function(){var e=0;u.forEach(function(k){k.stats.attributesCount>e&&(e=k.stats.attributesCount)});return e});return{clear:function(){var e=h.deleteShader.bind(h);J(m).forEach(e);m={};J(r).forEach(e);r={};u.forEach(function(e){h.deleteProgram(e.program)});u.length=0;da={};q.shaderCount=0},program:function(e,k,J,c){Z.command(0<=
e,"missing vertex shader",J);Z.command(0<=k,"missing fragment shader",J);var f=da[k];f||(f=da[k]={});var L=f[e];if(L&&(L.refCount++,!c))return L;var p=new U(k,e);q.shaderCount++;w(p,J,c);L||(f[e]=p);u.push(p);return G(p,{destroy:function(){p.refCount--;if(0>=p.refCount){h.deleteProgram(p.program);var c=u.indexOf(p);u.splice(c,1);q.shaderCount--}0>=f[p.vertId].refCount&&(h.deleteShader(r[p.vertId]),delete r[p.vertId],delete da[p.fragId][p.vertId]);a(da[p.fragId]).length||(h.deleteShader(m[p.fragId]),
delete m[p.fragId],delete da[p.fragId])}})},restore:function(){m={};r={};for(var e=0;e<u.length;++e)w(u[e],null,u[e].attributes.map(function(e){return[e.location,e.name]}))},shader:F,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(V,ia,za){ia.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(V,
ia,za){ia.exports=function(){var a={"":0},Z=[""];return{id:function(G){var J=a[G];if(J)return J;J=a[G]=Z.length;Z.push(G);return J},str:function(a){return Z[a]}}}},{}],19:[function(V,ia,za){function a(d){return"[object "+d+"]"}function Z(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function G(d){return Array.isArray(d)&&0!==d.length&&da(d[0])?!0:!1}function J(d){return Object.prototype.toString.call(d)}function h(d){if(!d)return!1;var c=J(d);return 0<=W.indexOf(c)?!0:Z(d)||G(d)||
w(d)}function k(d,c){36193===d.type?(d.data=r(c),m.freeType(c)):d.data=c}function q(d,e,b,k,f,g){d="undefined"!==typeof E[d]?E[d]:c[d]*C[e];g&&(d*=6);if(f){for(k=0;1<=b;)k+=d*b*b,b/=2;return k}return d*b*k}var e=V("./util/sorted-object-keys"),B=V("./util/check"),D=V("./util/extend"),F=V("./util/values"),U=V("./util/is-typed-array"),w=V("./util/is-ndarray"),m=V("./util/pool"),r=V("./util/to-half-float"),da=V("./util/is-array-like"),u=V("./util/flatten"),P=V("./util/is-pow2");za=V("./constants/arraytypes.json");
var x=V("./constants/arraytypes.json"),R=[9984,9986,9985,9987],ga=[0,6409,6410,6407,6408],c={};c[6409]=c[6406]=c[6402]=1;c[34041]=c[6410]=2;c[6407]=c[35904]=3;c[6408]=c[35906]=4;var f=a("HTMLCanvasElement"),L=a("OffscreenCanvas"),p=a("CanvasRenderingContext2D"),aa=a("ImageBitmap"),y=a("HTMLImageElement"),g=a("HTMLVideoElement"),W=e(za).concat([f,L,p,aa,y,g]),C=[];C[5121]=1;C[5126]=4;C[36193]=2;C[5123]=2;C[5125]=4;var E=[];E[32854]=2;E[32855]=2;E[36194]=2;E[34041]=4;E[33776]=.5;E[33777]=.5;E[33778]=
1;E[33779]=1;E[35986]=.5;E[35987]=1;E[34798]=1;E[35840]=.5;E[35841]=.25;E[35842]=.5;E[35843]=.25;E[36196]=.5;ia.exports=function(d,Q,b,a,E,C,W){function X(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(b,d){b.internalformat=d.internalformat;b.format=d.format;b.type=d.type;b.compressed=d.compressed;b.premultiplyAlpha=d.premultiplyAlpha;b.flipY=d.flipY;
b.unpackAlignment=d.unpackAlignment;b.colorSpace=d.colorSpace;b.width=d.width;b.height=d.height;b.channels=d.channels}function T(d,e){if("object"===typeof e&&e){"premultiplyAlpha"in e&&(B.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),d.premultiplyAlpha=e.premultiplyAlpha);"flipY"in e&&(B.type(e.flipY,"boolean","invalid texture flip"),d.flipY=e.flipY);"alignment"in e&&(B.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),d.unpackAlignment=e.alignment);"colorSpace"in e&&
(B.parameter(e.colorSpace,Ta,"invalid colorSpace"),d.colorSpace=Ta[e.colorSpace]);if("type"in e){var k=e.type;B(Q.oes_texture_float||!("float"===k||"float32"===k),"you must enable the OES_texture_float extension in order to use floating point textures.");B(Q.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");B(Q.webgl_depth_texture||!("uint16"===k||"uint32"===k||"depth stencil"===k),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
B.parameter(k,v,"invalid texture type");d.type=v[k]}var l=d.width,n=d.height,f=d.channels,k=!1;"shape"in e?(B(Array.isArray(e.shape)&&2<=e.shape.length,"shape must be an array"),l=e.shape[0],n=e.shape[1],3===e.shape.length&&(f=e.shape[2],B(0<f&&4>=f,"invalid number of channels"),k=!0),B(0<=l&&l<=b.maxTextureSize,"invalid width"),B(0<=n&&n<=b.maxTextureSize,"invalid height")):("radius"in e&&(l=n=e.radius,B(0<=l&&l<=b.maxTextureSize,"invalid radius")),"width"in e&&(l=e.width,B(0<=l&&l<=b.maxTextureSize,
"invalid width")),"height"in e&&(n=e.height,B(0<=n&&n<=b.maxTextureSize,"invalid height")),"channels"in e&&(f=e.channels,B(0<f&&4>=f,"invalid number of channels"),k=!0));d.width=l|0;d.height=n|0;d.channels=f|0;l=!1;"format"in e&&(l=e.format,B(Q.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),B.parameter(l,t,"invalid texture format"),n=d.internalformat=t[l],d.format=Ha[n],l in v&&!("type"in e)&&(d.type=
v[l]),l in K&&(d.compressed=!0),l=!0);!k&&l?d.channels=c[d.format]:k&&!l?d.channels!==ga[d.format]&&(d.format=d.internalformat=ga[d.channels]):l&&k&&B(d.channels===c[d.format],"number of channels inconsistent with specified format")}}function S(b){d.pixelStorei(37440,b.flipY);d.pixelStorei(37441,b.premultiplyAlpha);d.pixelStorei(37443,b.colorSpace);d.pixelStorei(3317,b.unpackAlignment)}function A(){X.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function l(d,e){var c=null;h(e)?c=e:e&&(B.type(e,"object","invalid pixel data type"),T(d,e),"x"in e&&(d.xOffset=e.x|0),"y"in e&&(d.yOffset=e.y|0),h(e.data)&&(c=e.data));B(!d.compressed||c instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(e.copy){B(!c,"can not specify copy and data field for the same texture");var l=E.viewportWidth,n=E.viewportHeight;d.width=d.width||l-d.xOffset;d.height=d.height||n-d.yOffset;d.needsCopy=!0;B(0<=d.xOffset&&d.xOffset<l&&0<=d.yOffset&&
d.yOffset<n&&0<d.width&&d.width<=l&&0<d.height&&d.height<=n,"copy texture read out of bounds")}else if(!c)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(U(c))d.channels=d.channels||4,d.data=c,"type"in e||5121!==d.type||(d.type=x[Object.prototype.toString.call(c)]|0);else if(Z(c)){d.channels=d.channels||4;l=c;n=l.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:n=m.allocType(d.type,n);n.set(l);d.data=n;break;case 36193:d.data=r(l);break;default:B.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(w(c)){l=c.data;Array.isArray(l)||5121!==d.type||(d.type=x[Object.prototype.toString.call(l)]|0);var n=c.shape,t=c.stride,v,I,q,K;3===n.length?(q=n[2],K=t[2]):(B(2===n.length,"invalid ndarray pixel data, must be 2 or 3D"),K=q=1);v=n[0];I=n[1];n=t[0];t=t[1];d.alignment=1;d.width=v;d.height=I;d.channels=q;d.format=d.internalformat=ga[q];d.needsFree=!0;v=K;c=c.offset;q=d.width;K=d.height;I=d.channels;for(var Q=m.allocType(36193===d.type?5126:d.type,q*K*I),ma=0,sa=0;sa<K;++sa)for(var a=
0;a<q;++a)for(var Ba=0;Ba<I;++Ba)Q[ma++]=l[n*a+t*sa+v*Ba+c];k(d,Q)}else if(J(c)===f||J(c)===L||J(c)===p)J(c)===f||J(c)===L?d.element=c:d.element=c.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(J(c)===aa)d.element=c,d.width=c.width,d.height=c.height,d.channels=4;else if(J(c)===y)d.element=c,d.width=c.naturalWidth,d.height=c.naturalHeight,d.channels=4;else if(J(c)===g)d.element=c,d.width=c.videoWidth,d.height=c.videoHeight,d.channels=4;else if(G(c)){l=d.width||c[0].length;
n=d.height||c.length;t=d.channels;t=da(c[0][0])?t||c[0][0].length:t||1;v=u.shape(c);q=1;for(K=0;K<v.length;++K)q*=v[K];q=m.allocType(36193===d.type?5126:d.type,q);u.flatten(c,v,"",q);k(d,q);d.alignment=1;d.width=l;d.height=n;d.channels=t;d.format=d.internalformat=ga[t];d.needsFree=!0}5126===d.type?B(0<=b.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&B(0<=b.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function M(b,c,e,k,l){var n=b.element,f=b.data,t=b.internalformat,v=b.format,I=b.type,g=b.width,p=b.height;S(b);n?d.texSubImage2D(c,l,e,k,v,I,n):b.compressed?d.compressedTexSubImage2D(c,l,e,k,t,g,p,f):b.needsCopy?(a(),d.copyTexSubImage2D(c,l,e,k,b.xOffset,b.yOffset,g,p)):d.texSubImage2D(c,l,e,k,g,p,v,I,f)}function N(){return pa.pop()||new A}function wa(b){b.needsFree&&m.freeType(b.data);A.call(b);pa.push(b)}function na(){X.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function n(b,d,c){var e=b.images[0]=N();b.mipmask=1;e.width=b.width=d;e.height=b.height=c;e.channels=b.channels=4}function H(b,d){var c=null;if(h(d))c=b.images[0]=N(),ea(c,b),l(c,d),b.mipmask=1;else if(T(b,d),Array.isArray(d.mipmap))for(var e=d.mipmap,k=0;k<e.length;++k)c=b.images[k]=N(),ea(c,b),c.width>>=k,c.height>>=k,l(c,e[k]),b.mipmask|=1<<k;else c=b.images[0]=N(),ea(c,b),l(c,d),b.mipmask=1;ea(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==
b.internalformat&&33779!==b.internalformat||B(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ba(b,c){for(var e=b.images,k=0;k<e.length&&e[k];++k){var l=e[k],n=c,f=k,t=l.element,v=l.data,I=l.internalformat,g=l.format,p=l.type,q=l.width,K=l.height;S(l);t?d.texImage2D(n,f,g,g,p,t):l.compressed?d.compressedTexImage2D(n,f,I,q,K,0,v):l.needsCopy?(a(),d.copyTexImage2D(n,f,g,l.xOffset,l.yOffset,q,K,0)):d.texImage2D(n,
f,g,q,K,0,g,p,v||null)}}function O(){var b=ya.pop()||new na;X.call(b);for(var d=b.mipmask=0;16>d;++d)b.images[d]=null;return b}function la(b){for(var d=b.images,c=0;c<d.length;++c)d[c]&&wa(d[c]),d[c]=null;ya.push(b)}function qa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Da(d,c){if("min"in c){var e=c.min;B.parameter(e,Xb);d.minFilter=Xb[e];0<=R.indexOf(d.minFilter)&&!("faces"in c)&&(d.genMipmaps=!0)}"mag"in c&&
(e=c.mag,B.parameter(e,ma),d.magFilter=ma[e]);var e=d.wrapS,k=d.wrapT;if("wrap"in c){var l=c.wrap;"string"===typeof l?(B.parameter(l,Ba),e=k=Ba[l]):Array.isArray(l)&&(B.parameter(l[0],Ba),B.parameter(l[1],Ba),e=Ba[l[0]],k=Ba[l[1]])}else"wrapS"in c&&(e=c.wrapS,B.parameter(e,Ba),e=Ba[e]),"wrapT"in c&&(k=c.wrapT,B.parameter(k,Ba),k=Ba[k]);d.wrapS=e;d.wrapT=k;"anisotropic"in c&&(e=c.anisotropic,B("number"===typeof e&&1<=e&&e<=b.maxAnisotropic,"aniso samples must be between 1 and "),d.anisotropic=c.anisotropic);
if("mipmap"in c){e=!1;switch(typeof c.mipmap){case "string":B.parameter(c.mipmap,Aa,"invalid mipmap hint");d.mipmapHint=Aa[c.mipmap];e=d.genMipmaps=!0;break;case "boolean":e=d.genMipmaps=c.mipmap;break;case "object":B(Array.isArray(c.mipmap),"invalid mipmap type");d.genMipmaps=!1;e=!0;break;default:B.raise("invalid mipmap type")}!e||"min"in c||(d.minFilter=9984)}}function Ca(b,c){d.texParameteri(c,10241,b.minFilter);d.texParameteri(c,10240,b.magFilter);d.texParameteri(c,10242,b.wrapS);d.texParameteri(c,
10243,b.wrapT);Q.ext_texture_filter_anisotropic&&d.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(d.hint(33170,b.mipmapHint),d.generateMipmap(c))}function fa(b){X.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ga++;this.refCount=1;this.target=b;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new qa;W.profile&&(this.stats={size:0})}function Ea(b){d.activeTexture(33984);d.bindTexture(b.target,b.texture)}function ka(){var b=ta[0];b?d.bindTexture(b.target,b.texture):
d.bindTexture(3553,null)}function oa(b){var c=b.texture;B(c,"must not double destroy texture");var e=b.unit,k=b.target;0<=e&&(d.activeTexture(33984+e),d.bindTexture(k,null),ta[e]=null);d.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ja[b.id];C.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ba={repeat:10497,clamp:33071,mirror:33648},ma={nearest:9728,linear:9729},Xb=D({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},ma),Ta={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},t={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},K={};Q.ext_srgb&&(t.srgb=35904,t.srgba=35906);Q.oes_texture_float&&(v.float32=v["float"]=5126);Q.oes_texture_half_float&&(v.float16=v["half float"]=36193);Q.webgl_depth_texture&&(D(t,{depth:6402,"depth stencil":34041}),D(v,{uint16:5123,uint32:5125,
"depth stencil":34042}));Q.webgl_compressed_texture_s3tc&&D(K,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Q.webgl_compressed_texture_atc&&D(K,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Q.webgl_compressed_texture_pvrtc&&D(K,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Q.webgl_compressed_texture_etc1&&(K["rgb etc1"]=36196);var ua=Array.prototype.slice.call(d.getParameter(34467));
e(K).forEach(function(b){var d=K[b];0<=ua.indexOf(d)&&(t[b]=d)});var va=e(t);b.textureFormats=va;var ed=[];e(t).forEach(function(b){ed[t[b]]=b});var Gb=[];e(v).forEach(function(b){Gb[v[b]]=b});var ha=[];e(ma).forEach(function(b){ha[ma[b]]=b});var I=[];e(Xb).forEach(function(b){I[Xb[b]]=b});var sa=[];e(Ba).forEach(function(b){sa[Ba[b]]=b});var Ha=va.reduce(function(b,d){var c=t[d];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||Q.ext_srgb&&(35904===c||35906===c)?b[c]=c:32855===c||0<=d.indexOf("rgba")?
b[c]=6408:b[c]=6407;return b},{}),pa=[],ya=[],Ga=0,ja={},Y=b.maxTextureUnits,ta=Array(Y).map(function(){return null});D(fa.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<Y;++c){var e=ta[c];if(e){if(0<e.bindCount)continue;e.unit=-1}ta[c]=this;b=c;break}b>=Y&&B.raise("insufficient number of texture units");W.profile&&C.maxTextureUnits<b+1&&(C.maxTextureUnits=b+1);this.unit=b;d.activeTexture(33984+b);d.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&oa(this)}});W.profile&&(C.getTotalTextureSize=function(){var b=0;e(ja).forEach(function(d){b+=ja[d].stats.size});return b});return{create2D:function(c,e){function k(d,c){var e=f.texInfo;qa.call(e);var l=O();"number"===typeof d?"number"===typeof c?n(l,d|0,c|0):n(l,d|0,d|0):d?(B.type(d,"object","invalid arguments to regl.texture"),Da(e,d),H(l,d)):n(l,1,1);e.genMipmaps&&(l.mipmask=(l.width<<1)-1);f.mipmask=l.mipmask;ea(f,l);B.texture2D(e,l,b);f.internalformat=l.internalformat;
k.width=l.width;k.height=l.height;Ea(f);ba(l,3553);Ca(e,3553);ka();la(l);W.profile&&(f.stats.size=q(f.internalformat,f.type,l.width,l.height,e.genMipmaps,!1));k.format=ed[f.internalformat];k.type=Gb[f.type];k.mag=ha[e.magFilter];k.min=I[e.minFilter];k.wrapS=sa[e.wrapS];k.wrapT=sa[e.wrapT];return k}var f=new fa(3553);ja[f.id]=f;C.textureCount++;k(c,e);k.subimage=function(b,d,c,e){B(!!b,"must specify image data");d|=0;c|=0;e|=0;var n=N();ea(n,f);n.width=0;n.height=0;l(n,b);n.width=n.width||(f.width>>
e)-d;n.height=n.height||(f.height>>e)-c;B(f.type===n.type&&f.format===n.format&&f.internalformat===n.internalformat,"incompatible format for texture.subimage");B(0<=d&&0<=c&&d+n.width<=f.width&&c+n.height<=f.height,"texture.subimage write out of bounds");B(f.mipmask&1<<e,"missing mipmap data");B(n.data||n.element||n.needsCopy,"missing image data");Ea(f);M(n,3553,d,c,e);ka();wa(n);return k};k.resize=function(b,c){var e=b|0,l=c|0||e;if(e===f.width&&l===f.height)return k;k.width=f.width=e;k.height=f.height=
l;Ea(f);for(var n=0;f.mipmask>>n;++n){var t=e>>n,v=l>>n;if(!t||!v)break;d.texImage2D(3553,n,f.format,t,v,0,f.format,f.type,null)}ka();W.profile&&(f.stats.size=q(f.internalformat,f.type,e,l,!1,!1));return k};k._reglType="texture2d";k._texture=f;W.profile&&(k.stats=f.stats);k.destroy=function(){f.decRef()};return k},createCube:function(c,e,k,f,t,v){function g(d,c,e,k,l,f){var t,v=p.texInfo;qa.call(v);for(t=0;6>t;++t)K[t]=O();if("number"!==typeof d&&d)if("object"===typeof d)if(c)H(K[0],d),H(K[1],c),
H(K[2],e),H(K[3],k),H(K[4],l),H(K[5],f);else if(Da(v,d),T(p,d),"faces"in d)for(d=d.faces,B(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),t=0;6>t;++t)B("object"===typeof d[t]&&!!d[t],"invalid input for cube map face"),ea(K[t],p),H(K[t],d[t]);else for(t=0;6>t;++t)H(K[t],d);else B.raise("invalid arguments to cube map");else for(d=d|0||1,t=0;6>t;++t)n(K[t],d,d);ea(p,K[0]);B.optional(function(){b.npotTextureCube||B(P(p.width)&&P(p.height),"your browser does not support non power or two texture dimensions")});
p.mipmask=v.genMipmaps?(K[0].width<<1)-1:K[0].mipmask;B.textureCube(p,v,K,b);p.internalformat=K[0].internalformat;g.width=K[0].width;g.height=K[0].height;Ea(p);for(t=0;6>t;++t)ba(K[t],34069+t);Ca(v,34067);ka();W.profile&&(p.stats.size=q(p.internalformat,p.type,g.width,g.height,v.genMipmaps,!0));g.format=ed[p.internalformat];g.type=Gb[p.type];g.mag=ha[v.magFilter];g.min=I[v.minFilter];g.wrapS=sa[v.wrapS];g.wrapT=sa[v.wrapT];for(t=0;6>t;++t)la(K[t]);return g}var p=new fa(34067);ja[p.id]=p;C.cubeCount++;
var K=Array(6);g(c,e,k,f,t,v);g.subimage=function(b,d,c,e,k){B(!!d,"must specify image data");B("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");c|=0;e|=0;k|=0;var n=N();ea(n,p);n.width=0;n.height=0;l(n,d);n.width=n.width||(p.width>>k)-c;n.height=n.height||(p.height>>k)-e;B(p.type===n.type&&p.format===n.format&&p.internalformat===n.internalformat,"incompatible format for texture.subimage");B(0<=c&&0<=e&&c+n.width<=p.width&&e+n.height<=p.height,"texture.subimage write out of bounds");B(p.mipmask&
1<<k,"missing mipmap data");B(n.data||n.element||n.needsCopy,"missing image data");Ea(p);M(n,34069+b,c,e,k);ka();wa(n);return g};g.resize=function(b){b|=0;if(b!==p.width){g.width=p.width=b;g.height=p.height=b;Ea(p);for(var c=0;6>c;++c)for(var e=0;p.mipmask>>e;++e)d.texImage2D(34069+c,e,p.format,b>>e,b>>e,0,p.format,p.type,null);ka();W.profile&&(p.stats.size=q(p.internalformat,p.type,g.width,g.height,!1,!0));return g}};g._reglType="textureCube";g._texture=p;W.profile&&(g.stats=p.stats);g.destroy=function(){p.decRef()};
return g},clear:function(){for(var b=0;b<Y;++b)d.activeTexture(33984+b),d.bindTexture(3553,null),ta[b]=null;F(ja).forEach(oa);C.cubeCount=0;C.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<Y;++b){var c=ta[b];c&&(c.bindCount=0,c.unit=-1,ta[b]=null)}F(ja).forEach(function(b){b.texture=d.createTexture();d.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)d.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,
b.type,null);else for(var e=0;6>e;++e)d.texImage2D(34069+e,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);Ca(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<Y;++b){var c=ta[b];c&&(c.bindCount=0,c.unit=-1,ta[b]=null);d.activeTexture(33984+b);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(V,ia,za){ia.exports=function(a,Z){function G(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function J(k,a,h){var m=q.pop()||new G;m.startQueryIndex=k;m.endQueryIndex=a;m.sum=0;m.stats=h;e.push(m)}if(!Z.ext_disjoint_timer_query)return null;var h=[],k=[],q=[],e=[],B=[],D=[];return{beginQuery:function(e){var q=h.pop()||Z.ext_disjoint_timer_query.createQueryEXT();Z.ext_disjoint_timer_query.beginQueryEXT(35007,
q);k.push(q);J(k.length-1,k.length,e)},endQuery:function(){Z.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:J,update:function(){var a,J;a=k.length;if(0!==a){D.length=Math.max(D.length,a+1);B.length=Math.max(B.length,a+1);B[0]=0;var w=D[0]=0;for(J=a=0;J<k.length;++J){var m=k[J];Z.ext_disjoint_timer_query.getQueryObjectEXT(m,34919)?(w+=Z.ext_disjoint_timer_query.getQueryObjectEXT(m,34918),h.push(m)):k[a++]=m;B[J+1]=w;D[J+1]=a}k.length=a;for(J=a=0;J<e.length;++J){var w=e[J],r=w.startQueryIndex,
m=w.endQueryIndex;w.sum+=B[m]-B[r];r=D[r];m=D[m];m===r?(w.stats.gpuTime+=w.sum/1E6,q.push(w)):(w.startQueryIndex=r,w.endQueryIndex=m,e[a++]=w)}e.length=a}},getNumPendingQueries:function(){return k.length},clear:function(){h.push.apply(h,k);for(var e=0;e<h.length;e++)Z.ext_disjoint_timer_query.deleteQueryEXT(h[e]);k.length=0;h.length=0},restore:function(){k.length=0;h.length=0}}}},{}],21:[function(V,ia,za){function a(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function Z(c){c=Error("(regl) "+
c);console.error(c);throw c;}function G(c,e){c||Z(e)}function J(c){return c?": "+c:""}function h(c,e){switch(e){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function k(c,e,k){0>e.indexOf(c)&&Z("invalid value"+J(k)+". must be one of: "+e)}function q(c,e){for(c+=
"";c.length<e;)c=" "+c;return c}function e(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function B(c,e){this.number=c;this.line=e;this.errors=[]}function D(c,e,k){this.file=c;this.line=e;this.message=k}function F(){var c=Error(),c=(c.stack||c).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return e?e[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function U(){var c=Error(),c=(c.stack||c).toString(),e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return e?e[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function w(c,k){var f=c.split("\n"),q=1,g=0,h={unknown:new e,0:new e};h.unknown.name=h[0].name=k||F();h.unknown.lines.push(new B(0,""));for(var u=0;u<f.length;++u){var m=f[u],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(m);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))q=d[1]|0,d[2]&&(g=d[2]|0,g in h||(h[g]=new e));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))h[g].name=d[1]?a(d[2]):d[2]}h[g].lines.push(new B(q++,
m))}R(h).forEach(function(d){var b=h[d];b.lines.forEach(function(d){b.index[d.number]=d})});return h}function m(c){var e=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var k=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);k?e.push(new D(k[1]|0,k[2]|0,k[3].trim())):0<c.length&&e.push(new D("unknown",0,c))}});return e}function r(c,e){e.forEach(function(e){var k=c[e.file];if(k){var f=k.index[e.line];if(f){f.errors.push(e);k.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(e)})}
function da(c){c._commandRef=F()}function u(c,e){var k=U();Z(c+" in command "+(e||F())+("unknown"===k?"":" called from "+k))}function P(c,e,k,f){h(c,e)||u("invalid parameter type"+J(k)+". expected "+e+", got "+typeof c,f||F())}function x(c,e){return 32820===c||32819===c||33635===c?2:34042===c?4:f[c]*e}var R=V("./sorted-object-keys"),ga=V("./is-typed-array");V=V("./extend");var c="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),f={};f[5120]=f[5121]=
1;f[5122]=f[5123]=f[36193]=f[33635]=f[32819]=f[32820]=2;f[5124]=f[5125]=f[5126]=f[34042]=4;ia.exports=V(G,{optional:function(c){c()},raise:Z,commandRaise:u,command:function(c,e,k){c||u(e,k||F())},parameter:function(c,e,k){c in e||Z("unknown parameter ("+c+")"+J(k)+". possible values: "+R(e).join())},commandParameter:function(c,e,k,f){c in e||u("unknown parameter ("+c+")"+J(k)+". possible values: "+R(e).join(),f||F())},constructor:function(e){R(e).forEach(function(e){0>c.indexOf(e)&&Z('invalid regl constructor argument "'+
e+'". must be one of '+c)})},type:function(c,e,k){h(c,e)||Z("invalid parameter type"+J(k)+". expected "+e+", got "+typeof c)},commandType:P,isTypedArray:function(c,e){ga(c)||Z("invalid parameter type"+J(e)+". must be a typed array")},nni:function(c,e){0<=c&&(c|0)===c||Z("invalid parameter type, ("+c+")"+J(e)+". must be a nonnegative integer")},oneOf:k,shaderError:function(c,e,k,f,g){if(!c.getShaderParameter(e,c.COMPILE_STATUS)){e=c.getShaderInfoLog(e);c=f===c.FRAGMENT_SHADER?"fragment":"vertex";P(k,
"string",c+" shader source must be a string",g);var a=w(k,g);k=m(e);r(a,k);R(a).forEach(function(c){function e(d,c){k.push(d);b.push(c||"")}var d=a[c];if(d.hasErrors){var k=[""],b=[""];e("file number "+c+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(b){if(0<b.errors.length){e(q(b.number,4)+"|  ","background-color:yellow; font-weight:bold");e(b.line+"\n","color:red; background-color:yellow; font-weight:bold");var d=0;b.errors.forEach(function(c){c=
c.message;var k=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(k){var f=k[1];c=k[2];switch(f){case "assign":f="="}d=Math.max(b.line.indexOf(f,d),0)}else d=0;e(q("| ",6));e(q("^^^",d+3)+"\n","font-weight:bold");e(q("| ",6));e(c+"\n","font-weight:bold")});e(q("| ",6)+"\n")}else e(q(b.number,4)+"|  "),e(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(k.join("")):(b[0]=k.join("%c"),console.log.apply(console,b))}});G.raise("Error compiling "+c+" shader, "+a[0].name)}},linkError:function(c,
e,k,f,g){c.getProgramParameter(e,c.LINK_STATUS)||(c=c.getProgramInfoLog(e),k=w(k,g),f='Error linking program with vertex shader, "'+w(f,g)[0].name+'", and fragment shader "'+k[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+c),G.raise(f))},callSite:U,saveCommandRef:da,saveDrawInfo:function(c,e,k,f){function g(c){return c?f.id(c):0}function q(c,d){R(d).forEach(function(d){c[f.id(d)]=!0})}da(c);
c._fragId=g(c["static"].frag);c._vertId=g(c["static"].vert);var a=c._uniformSet={};q(a,e["static"]);q(a,e.dynamic);e=c._attributeSet={};q(e,k["static"]);q(e,k.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,e,f){c.texture?k(c.texture._texture.internalformat,e,"unsupported texture format for attachment"):k(c.renderbuffer._renderbuffer.format,f,"unsupported renderbuffer format for attachment")},guessCommand:F,
texture2D:function(c,e,k){var f=e.width,g=e.height,q=e.channels;G(0<f&&f<=k.maxTextureSize&&0<g&&g<=k.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||G(!(f&f-1)&&!!f&&!(g&g-1)&&!!g,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==f&&1!==g&&G(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(G(!(f&f-1)&&!!f&&!(g&g-1)&&!!g,"texture must be a square power of 2 to support mipmapping"),
G(e.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>k.extensions.indexOf("oes_texture_float_linear")&&G(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),G(!c.genMipmaps,"mipmap generation not supported with float textures"));var a=e.images;for(k=0;16>k;++k)if(a[k]){var h=f>>k,d=g>>k;G(e.mipmask&1<<k,"missing mipmap data");var Q=a[k];G(Q.width===h&&Q.height===d,"invalid shape for mip images");G(Q.format===e.format&&Q.internalformat===
e.internalformat&&Q.type===e.type,"incompatible type for mip image");!Q.compressed&&Q.data&&(h=Math.ceil(x(Q.type,q)*h/Q.unpackAlignment)*Q.unpackAlignment,G(Q.data.byteLength===h*d,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||G(0===(e.mipmask&1<<k),"extra mipmap data");e.compressed&&G(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,e,k,f){var g=c.width,q=c.height,a=c.channels;G(0<g&&g<=f.maxTextureSize&&
0<q&&q<=f.maxTextureSize,"invalid texture shape");G(g===q,"cube map must be square");G(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(f=0;f<k.length;++f){var h=k[f];G(h.width===g&&h.height===q,"inconsistent cube map face shape");e.genMipmaps&&(G(!h.compressed,"can not generate mipmap for compressed textures"),G(1===h.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=h.images,Q=0;16>Q;++Q){var b=d[Q];if(b){var u=g>>Q,m=q>>Q;G(h.mipmask&1<<Q,"missing mipmap data");
G(b.width===u&&b.height===m,"invalid shape for mip images");G(b.format===c.format&&b.internalformat===c.internalformat&&b.type===c.type,"incompatible type for mip image");b.compressed||b.data&&G(b.data.byteLength===u*m*Math.max(x(b.type,a),b.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(V,ia,za){ia.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(V,ia,za){function a(a){return Array.prototype.slice.call(a)}function Z(h){return a(h).join("")}var G=V("./extend"),J=V("./compiled-fns");ia.exports=function(){function h(){var k=[],q=[];return G(function(){k.push.apply(k,a(arguments))},{def:function(){var h="v"+e;e++;q.push(h);0<arguments.length&&(k.push(h,"="),k.push.apply(k,a(arguments)),k.push(";"));return h},toString:function(){return Z([0<q.length?"var "+q.join(",")+";":"",Z(k)])}})}function k(){function e(a,
h){q(a,h,"=",k.def(a,h),";")}var k=h(),q=h(),J=k.toString,D=q.toString;return G(function(){k.apply(k,a(arguments))},{def:k.def,entry:k,exit:q,save:e,set:function(q,a,h){e(q,a);k(q,a,"=",h,";")},toString:function(){return J()+D()}})}var q=0,e=0,B={},D=h(),F={};return{global:D,link:function(e){var k="$"+q,a=!1;"object"===typeof e&&e.name&&(k=e.name.replace(/ /g,"_"),a=!0);if(k in B)return k;B[k]=e;a||q++;return k},block:h,proc:function(e,q){function a(){var e="a"+h.length;h.push(e);return e}var h=[];
q=q||0;for(var J=0;J<q;++J)a();var J=k(),u=J.toString;return F[e]=G(J,{arg:a,toString:function(){return Z(["function(",h.join(),"){",u(),"}"])}})},scope:k,cond:function(){var e=Z(arguments),q=k(),h=k(),J=q.toString,D=h.toString;return G(q,{then:function(){q.apply(q,a(arguments));return this},"else":function(){h.apply(h,a(arguments));return this},toString:function(){var k=D();k&&(k="else{"+k+"}");return Z(["if(",e,"){",J(),"}",k])}})},compile:function(){var e=[],k=[];Object.keys(B).sort(function(e,
k){var q="$"===e.charAt(0),a="$"===k.charAt(0);return q||a?q&&a?+e.slice(1)<+k.slice(1)?-1:1:q&&!a?-1:1:e.localeCompare(k)}).forEach(function(q){var a=B[q];e.push(q);k.push(a)});for(var q=0,a=e.length-1;-1<a;a--)if("$"===e[a].charAt(0)){q=a;break}var h=['"use strict";',D,"return {"];Object.keys(F).forEach(function(e){h.push('"',e,'":',F[e].toString(),",")});h.push("}");var a=Z(h).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),q=e.slice(q).join(),u=J[q];if(!u)throw console.log("src code is:"),
console.log(a),console.log("compiled values:",k),console.log("linked names:",e),console.log("Keys available:",Object.keys(J)),console.log("Key:",q),console.log('"'+q+'": function('+e.join(", ")+") \n{\n"+a+"\n},"),Error("missing precompiled function with key: "+q);return u.apply(null,k)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(V,ia,za){ia.exports={$0:function(a){var Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E;Z=a.attributes;G=a.current;J=a.framebuffer;h=a.gl;k=a.next;
q=a.vao;e=k.blend_color;B=G.blend_color;D=k.blend_equation;F=G.blend_equation;U=k.blend_func;w=G.blend_func;m=k.colorMask;r=G.colorMask;da=k.depth_range;u=G.depth_range;P=k.polygonOffset_offset;x=G.polygonOffset_offset;R=k.sample_coverage;ga=G.sample_coverage;c=k.scissor_box;f=G.scissor_box;L=k.stencil_func;p=G.stencil_func;aa=k.stencil_opBack;y=G.stencil_opBack;g=k.stencil_opFront;W=G.stencil_opFront;C=k.viewport;E=G.viewport;return{poll:function(){var d,q,b,a,z,Z,id,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,
O,la;G.dirty=!1;q=k.blend_enable;b=k.cull_enable;a=k.depth_enable;z=k.dither;Z=k.polygonOffset_enable;id=k.sample_alpha;X=k.sample_enable;ea=k.scissor_enable;T=k.stencil_enable;S=k.cull_face;A=G.cull_face;l=k.depth_func;M=G.depth_func;N=k.depth_mask;wa=G.depth_mask;na=k.frontFace;n=G.frontFace;H=k.lineWidth;ba=G.lineWidth;O=k.stencil_mask;la=G.stencil_mask;d=J.next;d!==J.cur&&(d?h.bindFramebuffer(36160,d.framebuffer):h.bindFramebuffer(36160,null),J.cur=d);q!==G.blend_enable&&(q?h.enable(3042):h.disable(3042),
G.blend_enable=q);b!==G.cull_enable&&(b?h.enable(2884):h.disable(2884),G.cull_enable=b);a!==G.depth_enable&&(a?h.enable(2929):h.disable(2929),G.depth_enable=a);z!==G.dither&&(z?h.enable(3024):h.disable(3024),G.dither=z);Z!==G.polygonOffset_enable&&(Z?h.enable(32823):h.disable(32823),G.polygonOffset_enable=Z);id!==G.sample_alpha&&(id?h.enable(32926):h.disable(32926),G.sample_alpha=id);X!==G.sample_enable&&(X?h.enable(32928):h.disable(32928),G.sample_enable=X);ea!==G.scissor_enable&&(ea?h.enable(3089):
h.disable(3089),G.scissor_enable=ea);T!==G.stencil_enable&&(T?h.enable(2960):h.disable(2960),G.stencil_enable=T);if(e[0]!==B[0]||e[1]!==B[1]||e[2]!==B[2]||e[3]!==B[3])h.blendColor(e[0],e[1],e[2],e[3]),B[0]=e[0],B[1]=e[1],B[2]=e[2],B[3]=e[3];if(D[0]!==F[0]||D[1]!==F[1])h.blendEquationSeparate(D[0],D[1]),F[0]=D[0],F[1]=D[1];if(U[0]!==w[0]||U[1]!==w[1]||U[2]!==w[2]||U[3]!==w[3])h.blendFuncSeparate(U[0],U[1],U[2],U[3]),w[0]=U[0],w[1]=U[1],w[2]=U[2],w[3]=U[3];if(m[0]!==r[0]||m[1]!==r[1]||m[2]!==r[2]||
m[3]!==r[3])h.colorMask(m[0],m[1],m[2],m[3]),r[0]=m[0],r[1]=m[1],r[2]=m[2],r[3]=m[3];S!==A&&(h.cullFace(S),G.cull_face=S);l!==M&&(h.depthFunc(l),G.depth_func=l);N!==wa&&(h.depthMask(N),G.depth_mask=N);if(da[0]!==u[0]||da[1]!==u[1])h.depthRange(da[0],da[1]),u[0]=da[0],u[1]=da[1];na!==n&&(h.frontFace(na),G.frontFace=na);H!==ba&&(h.lineWidth(H),G.lineWidth=H);if(P[0]!==x[0]||P[1]!==x[1])h.polygonOffset(P[0],P[1]),x[0]=P[0],x[1]=P[1];if(R[0]!==ga[0]||R[1]!==ga[1])h.sampleCoverage(R[0],R[1]),ga[0]=R[0],
ga[1]=R[1];if(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3])h.scissor(c[0],c[1],c[2],c[3]),f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=c[3];if(L[0]!==p[0]||L[1]!==p[1]||L[2]!==p[2])h.stencilFunc(L[0],L[1],L[2]),p[0]=L[0],p[1]=L[1],p[2]=L[2];O!==la&&(h.stencilMask(O),G.stencil_mask=O);if(aa[0]!==y[0]||aa[1]!==y[1]||aa[2]!==y[2]||aa[3]!==y[3])h.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]),y[0]=aa[0],y[1]=aa[1],y[2]=aa[2],y[3]=aa[3];if(g[0]!==W[0]||g[1]!==W[1]||g[2]!==W[2]||g[3]!==W[3])h.stencilOpSeparate(g[0],
g[1],g[2],g[3]),W[0]=g[0],W[1]=g[1],W[2]=g[2],W[3]=g[3];if(C[0]!==E[0]||C[1]!==E[1]||C[2]!==E[2]||C[3]!==E[3])h.viewport(C[0],C[1],C[2],C[3]),E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3]},refresh:function(){var d,Q,b,a,z,ra,id,X,ea,T,S,A,l,M,N,wa;G.dirty=!1;Q=k.blend_enable;b=k.cull_enable;a=k.depth_enable;z=k.dither;ra=k.polygonOffset_enable;id=k.sample_alpha;X=k.sample_enable;ea=k.scissor_enable;T=k.stencil_enable;S=k.cull_face;A=k.depth_func;l=k.depth_mask;M=k.frontFace;N=k.lineWidth;wa=k.stencil_mask;
(d=J.next)?h.bindFramebuffer(36160,d.framebuffer):h.bindFramebuffer(36160,null);J.cur=d;d=Z[0];d.buffer?(h.enableVertexAttribArray(0),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(0),h.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[1];d.buffer?(h.enableVertexAttribArray(1),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(1),
h.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[2];d.buffer?(h.enableVertexAttribArray(2),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(2),h.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[3];d.buffer?(h.enableVertexAttribArray(3),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(3),h.vertexAttrib4f(3,d.x,d.y,d.z,
d.w),d.buffer=null);d=Z[4];d.buffer?(h.enableVertexAttribArray(4),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(4),h.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[5];d.buffer?(h.enableVertexAttribArray(5),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(5),h.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[6];d.buffer?
(h.enableVertexAttribArray(6),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(6),h.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[7];d.buffer?(h.enableVertexAttribArray(7),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(7),h.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[8];d.buffer?(h.enableVertexAttribArray(8),h.bindBuffer(34962,
d.buffer.buffer),h.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(8),h.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[9];d.buffer?(h.enableVertexAttribArray(9),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(9),h.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[10];d.buffer?(h.enableVertexAttribArray(10),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(10,
d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(10),h.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[11];d.buffer?(h.enableVertexAttribArray(11),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(11),h.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[12];d.buffer?(h.enableVertexAttribArray(12),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(h.disableVertexAttribArray(12),h.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[13];d.buffer?(h.enableVertexAttribArray(13),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(13),h.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[14];d.buffer?(h.enableVertexAttribArray(14),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(14),
h.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=Z[15];d.buffer?(h.enableVertexAttribArray(15),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(h.disableVertexAttribArray(15),h.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);q.currentVAO=null;q.setVAO(q.targetVAO);Q?h.enable(3042):h.disable(3042);G.blend_enable=Q;b?h.enable(2884):h.disable(2884);G.cull_enable=b;a?h.enable(2929):h.disable(2929);G.depth_enable=a;z?h.enable(3024):h.disable(3024);
G.dither=z;ra?h.enable(32823):h.disable(32823);G.polygonOffset_enable=ra;id?h.enable(32926):h.disable(32926);G.sample_alpha=id;X?h.enable(32928):h.disable(32928);G.sample_enable=X;ea?h.enable(3089):h.disable(3089);G.scissor_enable=ea;T?h.enable(2960):h.disable(2960);G.stencil_enable=T;h.blendColor(e[0],e[1],e[2],e[3]);B[0]=e[0];B[1]=e[1];B[2]=e[2];B[3]=e[3];h.blendEquationSeparate(D[0],D[1]);F[0]=D[0];F[1]=D[1];h.blendFuncSeparate(U[0],U[1],U[2],U[3]);w[0]=U[0];w[1]=U[1];w[2]=U[2];w[3]=U[3];h.colorMask(m[0],
m[1],m[2],m[3]);r[0]=m[0];r[1]=m[1];r[2]=m[2];r[3]=m[3];h.cullFace(S);G.cull_face=S;h.depthFunc(A);G.depth_func=A;h.depthMask(l);G.depth_mask=l;h.depthRange(da[0],da[1]);u[0]=da[0];u[1]=da[1];h.frontFace(M);G.frontFace=M;h.lineWidth(N);G.lineWidth=N;h.polygonOffset(P[0],P[1]);x[0]=P[0];x[1]=P[1];h.sampleCoverage(R[0],R[1]);ga[0]=R[0];ga[1]=R[1];h.scissor(c[0],c[1],c[2],c[3]);f[0]=c[0];f[1]=c[1];f[2]=c[2];f[3]=c[3];h.stencilFunc(L[0],L[1],L[2]);p[0]=L[0];p[1]=L[1];p[2]=L[2];h.stencilMask(wa);G.stencil_mask=
wa;h.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]);y[0]=aa[0];y[1]=aa[1];y[2]=aa[2];y[3]=aa[3];h.stencilOpSeparate(g[0],g[1],g[2],g[3]);W[0]=g[0];W[1]=g[1];W[2]=g[2];W[3]=g[3];h.viewport(C[0],C[1],C[2],C[3]);E[0]=C[0];E[1]=C[1];E[2]=C[2];E[3]=C[3]}}},$3:function(a,Z,G,J){var h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra;h=a.context;k=a.current;q=a.framebuffer;e=a.gl;B=a.next;D=a.shader;F=a.vao;U=B.blend_color;w=k.blend_color;m=B.blend_equation;r=k.blend_equation;da=B.blend_func;
u=k.blend_func;P=B.colorMask;x=k.colorMask;R=B.depth_range;ga=k.depth_range;c=B.polygonOffset_offset;f=k.polygonOffset_offset;L=B.sample_coverage;p=k.sample_coverage;aa=B.scissor_box;y=k.scissor_box;g=B.stencil_func;W=k.stencil_func;C=B.stencil_opBack;E=k.stencil_opBack;d=B.stencil_opFront;Q=k.stencil_opFront;b=B.viewport;xa=k.viewport;z={};ra={};return{batch:function(a,h){var z,T,S,A,l;z=q.next;z!==q.cur&&(z?e.bindFramebuffer(36160,z.framebuffer):e.bindFramebuffer(36160,null),q.cur=z);if(k.dirty){z=
B.dither;z!==k.dither&&(z?e.enable(3024):e.disable(3024),k.dither=z);z=B.blend_enable;z!==k.blend_enable&&(z?e.enable(3042):e.disable(3042),k.blend_enable=z);z=U[0];S=U[1];A=U[2];l=U[3];if(z!==w[0]||S!==w[1]||A!==w[2]||l!==w[3])e.blendColor(z,S,A,l),w[0]=z,w[1]=S,w[2]=A,w[3]=l;z=m[0];S=m[1];if(z!==r[0]||S!==r[1])e.blendEquationSeparate(z,S),r[0]=z,r[1]=S;z=da[0];S=da[1];A=da[2];l=da[3];if(z!==u[0]||S!==u[1]||A!==u[2]||l!==u[3])e.blendFuncSeparate(z,S,A,l),u[0]=z,u[1]=S,u[2]=A,u[3]=l;z=B.depth_enable;
z!==k.depth_enable&&(z?e.enable(2929):e.disable(2929),k.depth_enable=z);z=B.depth_func;z!==k.depth_func&&(e.depthFunc(z),k.depth_func=z);z=R[0];S=R[1];if(z!==ga[0]||S!==ga[1])e.depthRange(z,S),ga[0]=z,ga[1]=S;z=B.depth_mask;z!==k.depth_mask&&(e.depthMask(z),k.depth_mask=z);z=P[0];S=P[1];A=P[2];l=P[3];if(z!==x[0]||S!==x[1]||A!==x[2]||l!==x[3])e.colorMask(z,S,A,l),x[0]=z,x[1]=S,x[2]=A,x[3]=l;z=B.cull_enable;z!==k.cull_enable&&(z?e.enable(2884):e.disable(2884),k.cull_enable=z);z=B.cull_face;z!==k.cull_face&&
(e.cullFace(z),k.cull_face=z);z=B.frontFace;z!==k.frontFace&&(e.frontFace(z),k.frontFace=z);z=B.lineWidth;z!==k.lineWidth&&(e.lineWidth(z),k.lineWidth=z);z=B.polygonOffset_enable;z!==k.polygonOffset_enable&&(z?e.enable(32823):e.disable(32823),k.polygonOffset_enable=z);z=c[0];S=c[1];if(z!==f[0]||S!==f[1])e.polygonOffset(z,S),f[0]=z,f[1]=S;z=B.sample_alpha;z!==k.sample_alpha&&(z?e.enable(32926):e.disable(32926),k.sample_alpha=z);z=B.sample_enable;z!==k.sample_enable&&(z?e.enable(32928):e.disable(32928),
k.sample_enable=z);z=L[0];S=L[1];if(z!==p[0]||S!==p[1])e.sampleCoverage(z,S),p[0]=z,p[1]=S;z=B.stencil_enable;z!==k.stencil_enable&&(z?e.enable(2960):e.disable(2960),k.stencil_enable=z);z=B.stencil_mask;z!==k.stencil_mask&&(e.stencilMask(z),k.stencil_mask=z);z=g[0];S=g[1];A=g[2];if(z!==W[0]||S!==W[1]||A!==W[2])e.stencilFunc(z,S,A),W[0]=z,W[1]=S,W[2]=A;z=d[0];S=d[1];A=d[2];l=d[3];if(z!==Q[0]||S!==Q[1]||A!==Q[2]||l!==Q[3])e.stencilOpSeparate(z,S,A,l),Q[0]=z,Q[1]=S,Q[2]=A,Q[3]=l;z=C[0];S=C[1];A=C[2];
l=C[3];if(z!==E[0]||S!==E[1]||A!==E[2]||l!==E[3])e.stencilOpSeparate(z,S,A,l),E[0]=z,E[1]=S,E[2]=A,E[3]=l;z=B.scissor_enable;z!==k.scissor_enable&&(z?e.enable(3089):e.disable(3089),k.scissor_enable=z);z=aa[0];S=aa[1];A=aa[2];l=aa[3];if(z!==y[0]||S!==y[1]||A!==y[2]||l!==y[3])e.scissor(z,S,A,l),y[0]=z,y[1]=S,y[2]=A,y[3]=l;z=b[0];S=b[1];A=b[2];l=b[3];if(z!==xa[0]||S!==xa[1]||A!==xa[2]||l!==xa[3])e.viewport(z,S,A,l),xa[0]=z,xa[1]=S,xa[2]=A,xa[3]=l;k.dirty=!1}if(z=k.profile)T=performance.now(),Z.count+=
h;S=D.program(D.vert,D.frag);e.useProgram(S.program);F.setVAO(null);A=S.id;(l=ra[A])||(l=ra[A]=J(S));l.call(this,a,h);F.setVAO(null);z&&(Z.cpuTime+=performance.now()-T)},draw:function(a){var h,J,T,S,A;h=q.next;h!==q.cur&&(h?e.bindFramebuffer(36160,h.framebuffer):e.bindFramebuffer(36160,null),q.cur=h);if(k.dirty){h=B.dither;h!==k.dither&&(h?e.enable(3024):e.disable(3024),k.dither=h);h=B.blend_enable;h!==k.blend_enable&&(h?e.enable(3042):e.disable(3042),k.blend_enable=h);h=U[0];T=U[1];S=U[2];A=U[3];
if(h!==w[0]||T!==w[1]||S!==w[2]||A!==w[3])e.blendColor(h,T,S,A),w[0]=h,w[1]=T,w[2]=S,w[3]=A;h=m[0];T=m[1];if(h!==r[0]||T!==r[1])e.blendEquationSeparate(h,T),r[0]=h,r[1]=T;h=da[0];T=da[1];S=da[2];A=da[3];if(h!==u[0]||T!==u[1]||S!==u[2]||A!==u[3])e.blendFuncSeparate(h,T,S,A),u[0]=h,u[1]=T,u[2]=S,u[3]=A;h=B.depth_enable;h!==k.depth_enable&&(h?e.enable(2929):e.disable(2929),k.depth_enable=h);h=B.depth_func;h!==k.depth_func&&(e.depthFunc(h),k.depth_func=h);h=R[0];T=R[1];if(h!==ga[0]||T!==ga[1])e.depthRange(h,
T),ga[0]=h,ga[1]=T;h=B.depth_mask;h!==k.depth_mask&&(e.depthMask(h),k.depth_mask=h);h=P[0];T=P[1];S=P[2];A=P[3];if(h!==x[0]||T!==x[1]||S!==x[2]||A!==x[3])e.colorMask(h,T,S,A),x[0]=h,x[1]=T,x[2]=S,x[3]=A;h=B.cull_enable;h!==k.cull_enable&&(h?e.enable(2884):e.disable(2884),k.cull_enable=h);h=B.cull_face;h!==k.cull_face&&(e.cullFace(h),k.cull_face=h);h=B.frontFace;h!==k.frontFace&&(e.frontFace(h),k.frontFace=h);h=B.lineWidth;h!==k.lineWidth&&(e.lineWidth(h),k.lineWidth=h);h=B.polygonOffset_enable;h!==
k.polygonOffset_enable&&(h?e.enable(32823):e.disable(32823),k.polygonOffset_enable=h);h=c[0];T=c[1];if(h!==f[0]||T!==f[1])e.polygonOffset(h,T),f[0]=h,f[1]=T;h=B.sample_alpha;h!==k.sample_alpha&&(h?e.enable(32926):e.disable(32926),k.sample_alpha=h);h=B.sample_enable;h!==k.sample_enable&&(h?e.enable(32928):e.disable(32928),k.sample_enable=h);h=L[0];T=L[1];if(h!==p[0]||T!==p[1])e.sampleCoverage(h,T),p[0]=h,p[1]=T;h=B.stencil_enable;h!==k.stencil_enable&&(h?e.enable(2960):e.disable(2960),k.stencil_enable=
h);h=B.stencil_mask;h!==k.stencil_mask&&(e.stencilMask(h),k.stencil_mask=h);h=g[0];T=g[1];S=g[2];if(h!==W[0]||T!==W[1]||S!==W[2])e.stencilFunc(h,T,S),W[0]=h,W[1]=T,W[2]=S;h=d[0];T=d[1];S=d[2];A=d[3];if(h!==Q[0]||T!==Q[1]||S!==Q[2]||A!==Q[3])e.stencilOpSeparate(h,T,S,A),Q[0]=h,Q[1]=T,Q[2]=S,Q[3]=A;h=C[0];T=C[1];S=C[2];A=C[3];if(h!==E[0]||T!==E[1]||S!==E[2]||A!==E[3])e.stencilOpSeparate(h,T,S,A),E[0]=h,E[1]=T,E[2]=S,E[3]=A;h=B.scissor_enable;h!==k.scissor_enable&&(h?e.enable(3089):e.disable(3089),k.scissor_enable=
h);h=aa[0];T=aa[1];S=aa[2];A=aa[3];if(h!==y[0]||T!==y[1]||S!==y[2]||A!==y[3])e.scissor(h,T,S,A),y[0]=h,y[1]=T,y[2]=S,y[3]=A;h=b[0];T=b[1];S=b[2];A=b[3];if(h!==xa[0]||T!==xa[1]||S!==xa[2]||A!==xa[3])e.viewport(h,T,S,A),xa[0]=h,xa[1]=T,xa[2]=S,xa[3]=A;k.dirty=!1}if(h=k.profile)J=performance.now(),Z.count++;T=D.program(D.vert,D.frag);e.useProgram(T.program);F.setVAO(null);S=T.id;(A=z[S])||(A=z[S]=G(T));A.call(this,a);F.setVAO(null);h&&(Z.cpuTime+=performance.now()-J)},scope:function(b,d,c){var e,f;if(e=
k.profile)f=performance.now(),Z.count++;d(h,b,c);e&&(Z.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,id,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,
Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,ed,Gb,ha,I,sa,Ha,pa,ya,Ga){var ja,Y,ta,Ka,Fa,gb,ca,yd,$b,Ia,nc,Rb,V,Cd,zd,Md,ye,Ad,Vd,pe,je,Ld,he,ge,be,De,Ze,Re,Ed,Ae,te,Zd,Wd,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va;ja=a.attributes;Y=a.context;ta=a.current;Ka=a.draw;Fa=a.elements;gb=a.framebuffer;ca=a.gl;yd=a.next;$b=a.shader;Ia=a.uniforms;nc=a.vao;Rb=yd.blend_color;V=ta.blend_color;Cd=yd.blend_equation;zd=ta.blend_equation;Md=yd.blend_func;
ye=ta.blend_func;Ad=yd.colorMask;Vd=ta.colorMask;pe=yd.depth_range;je=ta.depth_range;Ld=yd.polygonOffset_offset;he=ta.polygonOffset_offset;ge=yd.sample_coverage;be=ta.sample_coverage;De=yd.scissor_box;Ze=ta.scissor_box;Re=yd.stencil_func;Ed=ta.stencil_func;Ae=yd.stencil_opBack;te=ta.stencil_opBack;Zd=yd.stencil_opFront;Wd=ta.stencil_opFront;$d=yd.viewport;nd=ta.viewport;$c={};sd={};Kc=new Float32Array(16);pd=new Float32Array(16);Ec=new Float32Array(16);fd=new Float32Array(16);Pc=new Float32Array(16);
md=new Float32Array(16);Ab=new Float32Array(16);Eb=new Float32Array(16);tc=new Float32Array(16);xb=new Float32Array(16);wc=new Float32Array(16);Bb=new Float32Array(16);Ic=new Float32Array(16);kc=new Float32Array(16);Fc=new Float32Array(16);gd=new Float32Array(16);Vc=new Float32Array(16);Bc=new Float32Array(16);cc=new Float32Array(16);Gc=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);lc=new Float32Array(16);dc=new Float32Array(16);$a=new Float32Array(16);Hc=new Float32Array(16);
yb=new Float32Array(16);cb=new Float32Array(16);Mb=new Float32Array(16);ab=new Float32Array(16);nb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(b,d){var c,f,g,p;c=gb.next;c!==gb.cur&&(c?ca.bindFramebuffer(36160,c.framebuffer):ca.bindFramebuffer(36160,null),gb.cur=c);if(ta.dirty){var a,Q,y,z,C,E,L,G,R,Z,aa,ga,W,Ia,xa,ra,Rb,$b,Ma,Eb,Pc,Ab,Bb,Pa,De;a=Ad[0];Q=Ad[1];y=Ad[2];z=Ad[3];if(a!==Vd[0]||Q!==Vd[1]||y!==Vd[2]||z!==Vd[3])ca.colorMask(a,Q,y,z),Vd[0]=a,Vd[1]=Q,Vd[2]=y,Vd[3]=z;
C=yd.frontFace;C!==ta.frontFace&&(ca.frontFace(C),ta.frontFace=C);E=yd.polygonOffset_enable;E!==ta.polygonOffset_enable&&(E?ca.enable(32823):ca.disable(32823),ta.polygonOffset_enable=E);L=Ld[0];G=Ld[1];if(L!==he[0]||G!==he[1])ca.polygonOffset(L,G),he[0]=L,he[1]=G;R=yd.sample_alpha;R!==ta.sample_alpha&&(R?ca.enable(32926):ca.disable(32926),ta.sample_alpha=R);Z=yd.sample_enable;Z!==ta.sample_enable&&(Z?ca.enable(32928):ca.disable(32928),ta.sample_enable=Z);aa=ge[0];ga=ge[1];if(aa!==be[0]||ga!==be[1])ca.sampleCoverage(aa,
ga),be[0]=aa,be[1]=ga;W=yd.stencil_enable;W!==ta.stencil_enable&&(W?ca.enable(2960):ca.disable(2960),ta.stencil_enable=W);Ia=yd.stencil_mask;Ia!==ta.stencil_mask&&(ca.stencilMask(Ia),ta.stencil_mask=Ia);xa=Re[0];ra=Re[1];Rb=Re[2];if(xa!==Ed[0]||ra!==Ed[1]||Rb!==Ed[2])ca.stencilFunc(xa,ra,Rb),Ed[0]=xa,Ed[1]=ra,Ed[2]=Rb;$b=Zd[0];Ma=Zd[1];Eb=Zd[2];Pc=Zd[3];if($b!==Wd[0]||Ma!==Wd[1]||Eb!==Wd[2]||Pc!==Wd[3])ca.stencilOpSeparate($b,Ma,Eb,Pc),Wd[0]=$b,Wd[1]=Ma,Wd[2]=Eb,Wd[3]=Pc;Ab=Ae[0];Bb=Ae[1];Pa=Ae[2];
De=Ae[3];if(Ab!==te[0]||Bb!==te[1]||Pa!==te[2]||De!==te[3])ca.stencilOpSeparate(Ab,Bb,Pa,De),te[0]=Ab,te[1]=Bb,te[2]=Pa,te[3]=De}ca.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;ca.disable(3042);ta.blend_enable=!1;ca.blendEquationSeparate(32774,32774);zd[0]=32774;zd[1]=32774;ca.blendFuncSeparate(770,771,1,1);ye[0]=770;ye[1]=771;ye[2]=1;ye[3]=1;ca.enable(2884);ta.cull_enable=!0;ca.cullFace(1029);ta.cull_face=1029;ca.enable(2929);ta.depth_enable=!0;ca.depthFunc(513);ta.depth_func=513;ca.depthMask(!0);
ta.depth_mask=!0;ca.depthRange(0,1);je[0]=0;je[1]=1;ca.disable(3024);ta.dither=!1;ca.lineWidth(2);ta.lineWidth=2;ca.enable(3089);ta.scissor_enable=!0;f=ta.profile;ta.profile=!1;ca.useProgram(id.program);var Ra,xb,md,Na,kc,Ya,Ec,Md,lb,Oa,tc,Qa,ub,vb,Sa,mb,pd,Cd,Fc,bb,Ic,fd,Xa,Kc,zb,Za,pe,wc,Vb,Pb,$d,Qb,gd;nc.setVAO(null);Ra=Aa.location;xb=ja[Ra];xb.buffer||ca.enableVertexAttribArray(Ra);if(xb.type!==J.dtype||4!==xb.size||xb.buffer!==J||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)ca.bindBuffer(34962,
J.buffer),ca.vertexAttribPointer(Ra,4,J.dtype,!1,0,0),xb.type=J.dtype,xb.size=4,xb.buffer=J,xb.normalized=!1,xb.offset=0,xb.stride=0;md=Ba.location;Na=ja[md];Na.buffer||ca.enableVertexAttribArray(md);if(Na.type!==h.dtype||4!==Na.size||Na.buffer!==h||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ca.bindBuffer(34962,h.buffer),ca.vertexAttribPointer(md,4,h.dtype,!1,0,0),Na.type=h.dtype,Na.size=4,Na.buffer=h,Na.normalized=!1,Na.offset=0,Na.stride=0;kc=ma.location;Ya=ja[kc];Ya.buffer||ca.enableVertexAttribArray(kc);
if(Ya.type!==k.dtype||4!==Ya.size||Ya.buffer!==k||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ca.bindBuffer(34962,k.buffer),ca.vertexAttribPointer(kc,4,k.dtype,!1,0,0),Ya.type=k.dtype,Ya.size=4,Ya.buffer=k,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ec=Xb.location;Md=ja[Ec];Md.buffer||ca.enableVertexAttribArray(Ec);if(Md.type!==q.dtype||4!==Md.size||Md.buffer!==q||!1!==Md.normalized||0!==Md.offset||0!==Md.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(Ec,4,q.dtype,!1,0,0),Md.type=q.dtype,
Md.size=4,Md.buffer=q,Md.normalized=!1,Md.offset=0,Md.stride=0;lb=Ta.location;Oa=ja[lb];Oa.buffer||ca.enableVertexAttribArray(lb);if(Oa.type!==e.dtype||4!==Oa.size||Oa.buffer!==e||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(lb,4,e.dtype,!1,0,0),Oa.type=e.dtype,Oa.size=4,Oa.buffer=e,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;tc=v.location;Qa=ja[tc];Qa.buffer||ca.enableVertexAttribArray(tc);if(Qa.type!==B.dtype||4!==Qa.size||Qa.buffer!==B||!1!==
Qa.normalized||0!==Qa.offset||0!==Qa.stride)ca.bindBuffer(34962,B.buffer),ca.vertexAttribPointer(tc,4,B.dtype,!1,0,0),Qa.type=B.dtype,Qa.size=4,Qa.buffer=B,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;ub=t.location;vb=ja[ub];vb.buffer||ca.enableVertexAttribArray(ub);if(vb.type!==D.dtype||4!==vb.size||vb.buffer!==D||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)ca.bindBuffer(34962,D.buffer),ca.vertexAttribPointer(ub,4,D.dtype,!1,0,0),vb.type=D.dtype,vb.size=4,vb.buffer=D,vb.normalized=!1,vb.offset=
0,vb.stride=0;Sa=K.location;mb=ja[Sa];mb.buffer||ca.enableVertexAttribArray(Sa);if(mb.type!==F.dtype||4!==mb.size||mb.buffer!==F||!1!==mb.normalized||0!==mb.offset||0!==mb.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(Sa,4,F.dtype,!1,0,0),mb.type=F.dtype,mb.size=4,mb.buffer=F,mb.normalized=!1,mb.offset=0,mb.stride=0;pd=ua.location;Cd=ja[pd];Cd.buffer||ca.enableVertexAttribArray(pd);if(Cd.type!==U.dtype||4!==Cd.size||Cd.buffer!==U||!1!==Cd.normalized||0!==Cd.offset||0!==Cd.stride)ca.bindBuffer(34962,
U.buffer),ca.vertexAttribPointer(pd,4,U.dtype,!1,0,0),Cd.type=U.dtype,Cd.size=4,Cd.buffer=U,Cd.normalized=!1,Cd.offset=0,Cd.stride=0;Fc=va.location;bb=ja[Fc];bb.buffer||ca.enableVertexAttribArray(Fc);if(bb.type!==w.dtype||4!==bb.size||bb.buffer!==w||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ca.bindBuffer(34962,w.buffer),ca.vertexAttribPointer(Fc,4,w.dtype,!1,0,0),bb.type=w.dtype,bb.size=4,bb.buffer=w,bb.normalized=!1,bb.offset=0,bb.stride=0;Ic=ed.location;fd=ja[Ic];fd.buffer||ca.enableVertexAttribArray(Ic);
if(fd.type!==m.dtype||4!==fd.size||fd.buffer!==m||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)ca.bindBuffer(34962,m.buffer),ca.vertexAttribPointer(Ic,4,m.dtype,!1,0,0),fd.type=m.dtype,fd.size=4,fd.buffer=m,fd.normalized=!1,fd.offset=0,fd.stride=0;Xa=Gb.location;Kc=ja[Xa];Kc.buffer||ca.enableVertexAttribArray(Xa);if(Kc.type!==r.dtype||4!==Kc.size||Kc.buffer!==r||!1!==Kc.normalized||0!==Kc.offset||0!==Kc.stride)ca.bindBuffer(34962,r.buffer),ca.vertexAttribPointer(Xa,4,r.dtype,!1,0,0),Kc.type=r.dtype,
Kc.size=4,Kc.buffer=r,Kc.normalized=!1,Kc.offset=0,Kc.stride=0;zb=ha.location;Za=ja[zb];Za.buffer||ca.enableVertexAttribArray(zb);if(Za.type!==da.dtype||4!==Za.size||Za.buffer!==da||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ca.bindBuffer(34962,da.buffer),ca.vertexAttribPointer(zb,4,da.dtype,!1,0,0),Za.type=da.dtype,Za.size=4,Za.buffer=da,Za.normalized=!1,Za.offset=0,Za.stride=0;pe=I.location;wc=ja[pe];wc.buffer||ca.enableVertexAttribArray(pe);if(wc.type!==u.dtype||4!==wc.size||wc.buffer!==
u||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)ca.bindBuffer(34962,u.buffer),ca.vertexAttribPointer(pe,4,u.dtype,!1,0,0),wc.type=u.dtype,wc.size=4,wc.buffer=u,wc.normalized=!1,wc.offset=0,wc.stride=0;Vb=sa.location;Pb=ja[Vb];Pb.buffer||ca.enableVertexAttribArray(Vb);if(Pb.type!==P.dtype||4!==Pb.size||Pb.buffer!==P||!1!==Pb.normalized||0!==Pb.offset||0!==Pb.stride)ca.bindBuffer(34962,P.buffer),ca.vertexAttribPointer(Vb,4,P.dtype,!1,0,0),Pb.type=P.dtype,Pb.size=4,Pb.buffer=P,Pb.normalized=!1,Pb.offset=
0,Pb.stride=0;$d=ea.location;Qb=ja[$d];Qb.buffer||ca.enableVertexAttribArray($d);if(Qb.type!==x.dtype||4!==Qb.size||Qb.buffer!==x||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ca.bindBuffer(34962,x.buffer),ca.vertexAttribPointer($d,4,x.dtype,!1,0,0),Qb.type=x.dtype,Qb.size=4,Qb.buffer=x,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;ca.uniform1i(Ha.location,X.bind());(gd=Ka.elements)?ca.bindBuffer(34963,gd.buffer.buffer):nc.currentVAO&&(gd=Fa.getElements(nc.currentVAO.elements))&&ca.bindBuffer(34963,
gd.buffer.buffer);for(g=0;g<d;++g){p=b[g];var Cc,ia,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,uf,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,za,me,ke,ie,ue,ee;$c.height=p.viewportHeight;$c.width=p.viewportWidth;$c.x=p.viewportX;$c.y=p.viewportY;Cc=$c.x|0;ia=$c.y|0;Nc="width"in $c?$c.width|0:Y.framebufferWidth-Cc;Wc="height"in $c?$c.height|0:Y.framebufferHeight-ia;ud=Y.viewportWidth;Y.viewportWidth=Nc;mc=Y.viewportHeight;Y.viewportHeight=
Wc;ca.viewport(Cc,ia,Nc,Wc);nd[0]=Cc;nd[1]=ia;nd[2]=Nc;nd[3]=Wc;sd.height=p.scissorHeight;sd.width=p.scissorWidth;sd.x=p.scissorX;sd.y=p.scissorY;vc=sd.x|0;fc=sd.y|0;db="width"in sd?sd.width|0:Y.framebufferWidth-vc;rc="height"in sd?sd.height|0:Y.framebufferHeight-fc;ca.scissor(vc,fc,db,rc);Ze[0]=vc;Ze[1]=fc;Ze[2]=db;Ze[3]=rc;Sb=p.dim0A;ca.uniformMatrix4fv(S.location,!1,Array.isArray(Sb)||Sb instanceof Float32Array?Sb:(Vc[0]=Sb[0],Vc[1]=Sb[1],Vc[2]=Sb[2],Vc[3]=Sb[3],Vc[4]=Sb[4],Vc[5]=Sb[5],Vc[6]=Sb[6],
Vc[7]=Sb[7],Vc[8]=Sb[8],Vc[9]=Sb[9],Vc[10]=Sb[10],Vc[11]=Sb[11],Vc[12]=Sb[12],Vc[13]=Sb[13],Vc[14]=Sb[14],Vc[15]=Sb[15],Vc));Wb=p.dim1A;ca.uniformMatrix4fv(N.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:(Bc[0]=Wb[0],Bc[1]=Wb[1],Bc[2]=Wb[2],Bc[3]=Wb[3],Bc[4]=Wb[4],Bc[5]=Wb[5],Bc[6]=Wb[6],Bc[7]=Wb[7],Bc[8]=Wb[8],Bc[9]=Wb[9],Bc[10]=Wb[10],Bc[11]=Wb[11],Bc[12]=Wb[12],Bc[13]=Wb[13],Bc[14]=Wb[14],Bc[15]=Wb[15],Bc));bc=p.dim0B;ca.uniformMatrix4fv(A.location,!1,Array.isArray(bc)||bc instanceof
Float32Array?bc:(cc[0]=bc[0],cc[1]=bc[1],cc[2]=bc[2],cc[3]=bc[3],cc[4]=bc[4],cc[5]=bc[5],cc[6]=bc[6],cc[7]=bc[7],cc[8]=bc[8],cc[9]=bc[9],cc[10]=bc[10],cc[11]=bc[11],cc[12]=bc[12],cc[13]=bc[13],cc[14]=bc[14],cc[15]=bc[15],cc));gc=p.dim1B;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Gc[0]=gc[0],Gc[1]=gc[1],Gc[2]=gc[2],Gc[3]=gc[3],Gc[4]=gc[4],Gc[5]=gc[5],Gc[6]=gc[6],Gc[7]=gc[7],Gc[8]=gc[8],Gc[9]=gc[9],Gc[10]=gc[10],Gc[11]=gc[11],Gc[12]=gc[12],Gc[13]=gc[13],Gc[14]=
gc[14],Gc[15]=gc[15],Gc));xc=p.dim0C;ca.uniformMatrix4fv(l.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));zc=p.dim1C;ca.uniformMatrix4fv(na.location,!1,Array.isArray(zc)||zc instanceof Float32Array?zc:(pc[0]=zc[0],pc[1]=zc[1],pc[2]=zc[2],pc[3]=zc[3],pc[4]=zc[4],pc[5]=zc[5],pc[6]=
zc[6],pc[7]=zc[7],pc[8]=zc[8],pc[9]=zc[9],pc[10]=zc[10],pc[11]=zc[11],pc[12]=zc[12],pc[13]=zc[13],pc[14]=zc[14],pc[15]=zc[15],pc));bd=p.dim0D;ca.uniformMatrix4fv(M.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:(lc[0]=bd[0],lc[1]=bd[1],lc[2]=bd[2],lc[3]=bd[3],lc[4]=bd[4],lc[5]=bd[5],lc[6]=bd[6],lc[7]=bd[7],lc[8]=bd[8],lc[9]=bd[9],lc[10]=bd[10],lc[11]=bd[11],lc[12]=bd[12],lc[13]=bd[13],lc[14]=bd[14],lc[15]=bd[15],lc));Qc=p.dim1D;ca.uniformMatrix4fv(n.location,!1,Array.isArray(Qc)||Qc instanceof
Float32Array?Qc:(dc[0]=Qc[0],dc[1]=Qc[1],dc[2]=Qc[2],dc[3]=Qc[3],dc[4]=Qc[4],dc[5]=Qc[5],dc[6]=Qc[6],dc[7]=Qc[7],dc[8]=Qc[8],dc[9]=Qc[9],dc[10]=Qc[10],dc[11]=Qc[11],dc[12]=Qc[12],dc[13]=Qc[13],dc[14]=Qc[14],dc[15]=Qc[15],dc));Rc=p.loA;ca.uniformMatrix4fv(Da.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:($a[0]=Rc[0],$a[1]=Rc[1],$a[2]=Rc[2],$a[3]=Rc[3],$a[4]=Rc[4],$a[5]=Rc[5],$a[6]=Rc[6],$a[7]=Rc[7],$a[8]=Rc[8],$a[9]=Rc[9],$a[10]=Rc[10],$a[11]=Rc[11],$a[12]=Rc[12],$a[13]=Rc[13],$a[14]=
Rc[14],$a[15]=Rc[15],$a));Sc=p.hiA;ca.uniformMatrix4fv(ba.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(Hc[0]=Sc[0],Hc[1]=Sc[1],Hc[2]=Sc[2],Hc[3]=Sc[3],Hc[4]=Sc[4],Hc[5]=Sc[5],Hc[6]=Sc[6],Hc[7]=Sc[7],Hc[8]=Sc[8],Hc[9]=Sc[9],Hc[10]=Sc[10],Hc[11]=Sc[11],Hc[12]=Sc[12],Hc[13]=Sc[13],Hc[14]=Sc[14],Hc[15]=Sc[15],Hc));Xc=p.loB;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(yb[0]=Xc[0],yb[1]=Xc[1],yb[2]=Xc[2],yb[3]=Xc[3],yb[4]=Xc[4],yb[5]=Xc[5],yb[6]=
Xc[6],yb[7]=Xc[7],yb[8]=Xc[8],yb[9]=Xc[9],yb[10]=Xc[10],yb[11]=Xc[11],yb[12]=Xc[12],yb[13]=Xc[13],yb[14]=Xc[14],yb[15]=Xc[15],yb));wd=p.hiB;ca.uniformMatrix4fv(O.location,!1,Array.isArray(wd)||wd instanceof Float32Array?wd:(cb[0]=wd[0],cb[1]=wd[1],cb[2]=wd[2],cb[3]=wd[3],cb[4]=wd[4],cb[5]=wd[5],cb[6]=wd[6],cb[7]=wd[7],cb[8]=wd[8],cb[9]=wd[9],cb[10]=wd[10],cb[11]=wd[11],cb[12]=wd[12],cb[13]=wd[13],cb[14]=wd[14],cb[15]=wd[15],cb));cd=p.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(cd)||cd instanceof
Float32Array?cd:(Mb[0]=cd[0],Mb[1]=cd[1],Mb[2]=cd[2],Mb[3]=cd[3],Mb[4]=cd[4],Mb[5]=cd[5],Mb[6]=cd[6],Mb[7]=cd[7],Mb[8]=cd[8],Mb[9]=cd[9],Mb[10]=cd[10],Mb[11]=cd[11],Mb[12]=cd[12],Mb[13]=cd[13],Mb[14]=cd[14],Mb[15]=cd[15],Mb));Yc=p.hiC;ca.uniformMatrix4fv(la.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(ab[0]=Yc[0],ab[1]=Yc[1],ab[2]=Yc[2],ab[3]=Yc[3],ab[4]=Yc[4],ab[5]=Yc[5],ab[6]=Yc[6],ab[7]=Yc[7],ab[8]=Yc[8],ab[9]=Yc[9],ab[10]=Yc[10],ab[11]=Yc[11],ab[12]=Yc[12],ab[13]=Yc[13],ab[14]=
Yc[14],ab[15]=Yc[15],ab));jc=p.loD;ca.uniformMatrix4fv(Ea.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(nb[0]=jc[0],nb[1]=jc[1],nb[2]=jc[2],nb[3]=jc[3],nb[4]=jc[4],nb[5]=jc[5],nb[6]=jc[6],nb[7]=jc[7],nb[8]=jc[8],nb[9]=jc[9],nb[10]=jc[10],nb[11]=jc[11],nb[12]=jc[12],nb[13]=jc[13],nb[14]=jc[14],nb[15]=jc[15],nb));ac=p.hiD;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(ac)||ac instanceof Float32Array?ac:(Va[0]=ac[0],Va[1]=ac[1],Va[2]=ac[2],Va[3]=ac[3],Va[4]=ac[4],Va[5]=ac[5],Va[6]=
ac[6],Va[7]=ac[7],Va[8]=ac[8],Va[9]=ac[9],Va[10]=ac[10],Va[11]=ac[11],Va[12]=ac[12],Va[13]=ac[13],Va[14]=ac[14],Va[15]=ac[15],Va));Zc=p.resolution;Uc=Zc[0];yc=Zc[1];g&&dd===Uc&&jd===yc||(dd=Uc,jd=yc,ca.uniform2f(pa.location,Uc,yc));rd=p.viewBoxPos;xe=rd[0];kd=rd[1];g&&Be===xe&&uf===kd||(Be=xe,uf=kd,ca.uniform2f(ya.location,xe,kd));Nd=p.viewBoxSize;Xd=Nd[0];Od=Nd[1];g&&de===Xd&&Id===Od||(de=Xd,Id=Od,ca.uniform2f(Ga.location,Xd,Od));Fd=p.maskHeight;g&&od===Fd||(od=Fd,ca.uniform1f(ka.location,Fd));Tc=
p.drwLayer;g&&vd===Tc||(vd=Tc,ca.uniform1f(H.location,Tc));td=p.contextColor;ld=td[0];Bd=td[1];qe=td[2];za=td[3];g&&xd===ld&&Dd===Bd&&le===qe&&me===za||(xd=ld,Dd=Bd,le=qe,me=za,ca.uniform4f(T.location,ld,Bd,qe,za));(ke=p.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);ie=ke._texture;ca.uniform1i(oa.location,ie.bind());ue=p.offset;if(ee=p.count)gd?ca.drawElements(1,ee,gd.type,ue<<(gd.type-5121>>1)):ca.drawArrays(1,ue,ee),Y.viewportWidth=ud,Y.viewportHeight=mc,ie.unbind()}X.unbind();ta.dirty=
!0;nc.setVAO(null);ta.profile=f},draw:function(b){var d,c,f,g,p,a;d=gb.next;d!==gb.cur&&(d?ca.bindFramebuffer(36160,d.framebuffer):ca.bindFramebuffer(36160,null),gb.cur=d);if(ta.dirty){d=Ad[0];a=Ad[1];c=Ad[2];f=Ad[3];if(d!==Vd[0]||a!==Vd[1]||c!==Vd[2]||f!==Vd[3])ca.colorMask(d,a,c,f),Vd[0]=d,Vd[1]=a,Vd[2]=c,Vd[3]=f;d=yd.frontFace;d!==ta.frontFace&&(ca.frontFace(d),ta.frontFace=d);d=yd.polygonOffset_enable;d!==ta.polygonOffset_enable&&(d?ca.enable(32823):ca.disable(32823),ta.polygonOffset_enable=d);
d=Ld[0];a=Ld[1];if(d!==he[0]||a!==he[1])ca.polygonOffset(d,a),he[0]=d,he[1]=a;d=yd.sample_alpha;d!==ta.sample_alpha&&(d?ca.enable(32926):ca.disable(32926),ta.sample_alpha=d);d=yd.sample_enable;d!==ta.sample_enable&&(d?ca.enable(32928):ca.disable(32928),ta.sample_enable=d);d=ge[0];a=ge[1];if(d!==be[0]||a!==be[1])ca.sampleCoverage(d,a),be[0]=d,be[1]=a;d=yd.stencil_enable;d!==ta.stencil_enable&&(d?ca.enable(2960):ca.disable(2960),ta.stencil_enable=d);d=yd.stencil_mask;d!==ta.stencil_mask&&(ca.stencilMask(d),
ta.stencil_mask=d);d=Re[0];a=Re[1];c=Re[2];if(d!==Ed[0]||a!==Ed[1]||c!==Ed[2])ca.stencilFunc(d,a,c),Ed[0]=d,Ed[1]=a,Ed[2]=c;d=Zd[0];a=Zd[1];c=Zd[2];f=Zd[3];if(d!==Wd[0]||a!==Wd[1]||c!==Wd[2]||f!==Wd[3])ca.stencilOpSeparate(d,a,c,f),Wd[0]=d,Wd[1]=a,Wd[2]=c,Wd[3]=f;d=Ae[0];a=Ae[1];c=Ae[2];f=Ae[3];if(d!==te[0]||a!==te[1]||c!==te[2]||f!==te[3])ca.stencilOpSeparate(d,a,c,f),te[0]=d,te[1]=a,te[2]=c,te[3]=f}$c.height=b.viewportHeight;$c.width=b.viewportWidth;$c.x=b.viewportX;$c.y=b.viewportY;c=$c.x|0;f=
$c.y|0;g="width"in $c?$c.width|0:Y.framebufferWidth-c;p="height"in $c?$c.height|0:Y.framebufferHeight-f;d=Y.viewportWidth;Y.viewportWidth=g;a=Y.viewportHeight;Y.viewportHeight=p;ca.viewport(c,f,g,p);nd[0]=c;nd[1]=f;nd[2]=g;nd[3]=p;ca.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;ca.disable(3042);ta.blend_enable=!1;ca.blendEquationSeparate(32774,32774);zd[0]=32774;zd[1]=32774;ca.blendFuncSeparate(770,771,1,1);ye[0]=770;ye[1]=771;ye[2]=1;ye[3]=1;ca.enable(2884);ta.cull_enable=!0;ca.cullFace(1029);
ta.cull_face=1029;ca.enable(2929);ta.depth_enable=!0;ca.depthFunc(513);ta.depth_func=513;ca.depthMask(!0);ta.depth_mask=!0;ca.depthRange(0,1);je[0]=0;je[1]=1;ca.disable(3024);ta.dither=!1;ca.lineWidth(2);ta.lineWidth=2;sd.height=b.scissorHeight;sd.width=b.scissorWidth;sd.x=b.scissorX;sd.y=b.scissorY;c=sd.x|0;f=sd.y|0;g="width"in sd?sd.width|0:Y.framebufferWidth-c;p="height"in sd?sd.height|0:Y.framebufferHeight-f;ca.scissor(c,f,g,p);Ze[0]=c;Ze[1]=f;Ze[2]=g;Ze[3]=p;ca.enable(3089);ta.scissor_enable=
!0;c=ta.profile;ta.profile=!1;ca.useProgram(G.program);nc.setVAO(null);f=Aa.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==J.dtype||4!==g.size||g.buffer!==J||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,J.buffer),ca.vertexAttribPointer(f,4,J.dtype,!1,0,0),g.type=J.dtype,g.size=4,g.buffer=J,g.normalized=!1,g.offset=0,g.stride=0;f=Ba.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==h.dtype||4!==g.size||g.buffer!==h||!1!==g.normalized||0!==
g.offset||0!==g.stride)ca.bindBuffer(34962,h.buffer),ca.vertexAttribPointer(f,4,h.dtype,!1,0,0),g.type=h.dtype,g.size=4,g.buffer=h,g.normalized=!1,g.offset=0,g.stride=0;f=ma.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==k.dtype||4!==g.size||g.buffer!==k||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,k.buffer),ca.vertexAttribPointer(f,4,k.dtype,!1,0,0),g.type=k.dtype,g.size=4,g.buffer=k,g.normalized=!1,g.offset=0,g.stride=0;f=Xb.location;g=ja[f];g.buffer||
ca.enableVertexAttribArray(f);if(g.type!==q.dtype||4!==g.size||g.buffer!==q||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(f,4,q.dtype,!1,0,0),g.type=q.dtype,g.size=4,g.buffer=q,g.normalized=!1,g.offset=0,g.stride=0;f=Ta.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==e.dtype||4!==g.size||g.buffer!==e||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(f,4,e.dtype,!1,0,0),g.type=
e.dtype,g.size=4,g.buffer=e,g.normalized=!1,g.offset=0,g.stride=0;f=v.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==B.dtype||4!==g.size||g.buffer!==B||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,B.buffer),ca.vertexAttribPointer(f,4,B.dtype,!1,0,0),g.type=B.dtype,g.size=4,g.buffer=B,g.normalized=!1,g.offset=0,g.stride=0;f=t.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==D.dtype||4!==g.size||g.buffer!==D||!1!==g.normalized||0!==g.offset||
0!==g.stride)ca.bindBuffer(34962,D.buffer),ca.vertexAttribPointer(f,4,D.dtype,!1,0,0),g.type=D.dtype,g.size=4,g.buffer=D,g.normalized=!1,g.offset=0,g.stride=0;f=K.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==F.dtype||4!==g.size||g.buffer!==F||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(f,4,F.dtype,!1,0,0),g.type=F.dtype,g.size=4,g.buffer=F,g.normalized=!1,g.offset=0,g.stride=0;f=ua.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);
if(g.type!==U.dtype||4!==g.size||g.buffer!==U||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,U.buffer),ca.vertexAttribPointer(f,4,U.dtype,!1,0,0),g.type=U.dtype,g.size=4,g.buffer=U,g.normalized=!1,g.offset=0,g.stride=0;f=va.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==w.dtype||4!==g.size||g.buffer!==w||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,w.buffer),ca.vertexAttribPointer(f,4,w.dtype,!1,0,0),g.type=w.dtype,g.size=4,g.buffer=w,
g.normalized=!1,g.offset=0,g.stride=0;f=ed.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==m.dtype||4!==g.size||g.buffer!==m||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,m.buffer),ca.vertexAttribPointer(f,4,m.dtype,!1,0,0),g.type=m.dtype,g.size=4,g.buffer=m,g.normalized=!1,g.offset=0,g.stride=0;f=Gb.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==r.dtype||4!==g.size||g.buffer!==r||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,
r.buffer),ca.vertexAttribPointer(f,4,r.dtype,!1,0,0),g.type=r.dtype,g.size=4,g.buffer=r,g.normalized=!1,g.offset=0,g.stride=0;f=ha.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==da.dtype||4!==g.size||g.buffer!==da||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,da.buffer),ca.vertexAttribPointer(f,4,da.dtype,!1,0,0),g.type=da.dtype,g.size=4,g.buffer=da,g.normalized=!1,g.offset=0,g.stride=0;f=I.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==
u.dtype||4!==g.size||g.buffer!==u||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,u.buffer),ca.vertexAttribPointer(f,4,u.dtype,!1,0,0),g.type=u.dtype,g.size=4,g.buffer=u,g.normalized=!1,g.offset=0,g.stride=0;f=sa.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==P.dtype||4!==g.size||g.buffer!==P||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,P.buffer),ca.vertexAttribPointer(f,4,P.dtype,!1,0,0),g.type=P.dtype,g.size=4,g.buffer=P,g.normalized=
!1,g.offset=0,g.stride=0;f=ea.location;g=ja[f];g.buffer||ca.enableVertexAttribArray(f);if(g.type!==x.dtype||4!==g.size||g.buffer!==x||!1!==g.normalized||0!==g.offset||0!==g.stride)ca.bindBuffer(34962,x.buffer),ca.vertexAttribPointer(f,4,x.dtype,!1,0,0),g.type=x.dtype,g.size=4,g.buffer=x,g.normalized=!1,g.offset=0,g.stride=0;f=b.dim0A;ca.uniformMatrix4fv(S.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Kc[0]=f[0],Kc[1]=f[1],Kc[2]=f[2],Kc[3]=f[3],Kc[4]=f[4],Kc[5]=f[5],Kc[6]=f[6],Kc[7]=f[7],
Kc[8]=f[8],Kc[9]=f[9],Kc[10]=f[10],Kc[11]=f[11],Kc[12]=f[12],Kc[13]=f[13],Kc[14]=f[14],Kc[15]=f[15],Kc));f=b.dim1A;ca.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(pd[0]=f[0],pd[1]=f[1],pd[2]=f[2],pd[3]=f[3],pd[4]=f[4],pd[5]=f[5],pd[6]=f[6],pd[7]=f[7],pd[8]=f[8],pd[9]=f[9],pd[10]=f[10],pd[11]=f[11],pd[12]=f[12],pd[13]=f[13],pd[14]=f[14],pd[15]=f[15],pd));f=b.dim0B;ca.uniformMatrix4fv(A.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ec[0]=f[0],Ec[1]=f[1],
Ec[2]=f[2],Ec[3]=f[3],Ec[4]=f[4],Ec[5]=f[5],Ec[6]=f[6],Ec[7]=f[7],Ec[8]=f[8],Ec[9]=f[9],Ec[10]=f[10],Ec[11]=f[11],Ec[12]=f[12],Ec[13]=f[13],Ec[14]=f[14],Ec[15]=f[15],Ec));f=b.dim1B;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(fd[0]=f[0],fd[1]=f[1],fd[2]=f[2],fd[3]=f[3],fd[4]=f[4],fd[5]=f[5],fd[6]=f[6],fd[7]=f[7],fd[8]=f[8],fd[9]=f[9],fd[10]=f[10],fd[11]=f[11],fd[12]=f[12],fd[13]=f[13],fd[14]=f[14],fd[15]=f[15],fd));f=b.dim0C;ca.uniformMatrix4fv(l.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Pc[0]=f[0],Pc[1]=f[1],Pc[2]=f[2],Pc[3]=f[3],Pc[4]=f[4],Pc[5]=f[5],Pc[6]=f[6],Pc[7]=f[7],Pc[8]=f[8],Pc[9]=f[9],Pc[10]=f[10],Pc[11]=f[11],Pc[12]=f[12],Pc[13]=f[13],Pc[14]=f[14],Pc[15]=f[15],Pc));f=b.dim1C;ca.uniformMatrix4fv(na.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(md[0]=f[0],md[1]=f[1],md[2]=f[2],md[3]=f[3],md[4]=f[4],md[5]=f[5],md[6]=f[6],md[7]=f[7],md[8]=f[8],md[9]=f[9],md[10]=f[10],md[11]=f[11],md[12]=f[12],md[13]=f[13],md[14]=f[14],md[15]=f[15],
md));f=b.dim0D;ca.uniformMatrix4fv(M.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ab[0]=f[0],Ab[1]=f[1],Ab[2]=f[2],Ab[3]=f[3],Ab[4]=f[4],Ab[5]=f[5],Ab[6]=f[6],Ab[7]=f[7],Ab[8]=f[8],Ab[9]=f[9],Ab[10]=f[10],Ab[11]=f[11],Ab[12]=f[12],Ab[13]=f[13],Ab[14]=f[14],Ab[15]=f[15],Ab));f=b.dim1D;ca.uniformMatrix4fv(n.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Eb[0]=f[0],Eb[1]=f[1],Eb[2]=f[2],Eb[3]=f[3],Eb[4]=f[4],Eb[5]=f[5],Eb[6]=f[6],Eb[7]=f[7],Eb[8]=f[8],Eb[9]=f[9],Eb[10]=f[10],
Eb[11]=f[11],Eb[12]=f[12],Eb[13]=f[13],Eb[14]=f[14],Eb[15]=f[15],Eb));f=b.loA;ca.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(tc[0]=f[0],tc[1]=f[1],tc[2]=f[2],tc[3]=f[3],tc[4]=f[4],tc[5]=f[5],tc[6]=f[6],tc[7]=f[7],tc[8]=f[8],tc[9]=f[9],tc[10]=f[10],tc[11]=f[11],tc[12]=f[12],tc[13]=f[13],tc[14]=f[14],tc[15]=f[15],tc));f=b.hiA;ca.uniformMatrix4fv(ba.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xb[0]=f[0],xb[1]=f[1],xb[2]=f[2],xb[3]=f[3],xb[4]=f[4],xb[5]=
f[5],xb[6]=f[6],xb[7]=f[7],xb[8]=f[8],xb[9]=f[9],xb[10]=f[10],xb[11]=f[11],xb[12]=f[12],xb[13]=f[13],xb[14]=f[14],xb[15]=f[15],xb));f=b.loB;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wc[0]=f[0],wc[1]=f[1],wc[2]=f[2],wc[3]=f[3],wc[4]=f[4],wc[5]=f[5],wc[6]=f[6],wc[7]=f[7],wc[8]=f[8],wc[9]=f[9],wc[10]=f[10],wc[11]=f[11],wc[12]=f[12],wc[13]=f[13],wc[14]=f[14],wc[15]=f[15],wc));f=b.hiB;ca.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=b.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ic[0]=f[0],Ic[1]=f[1],Ic[2]=f[2],Ic[3]=f[3],Ic[4]=f[4],Ic[5]=f[5],Ic[6]=f[6],Ic[7]=f[7],Ic[8]=f[8],Ic[9]=f[9],Ic[10]=f[10],Ic[11]=f[11],Ic[12]=f[12],Ic[13]=f[13],Ic[14]=f[14],Ic[15]=f[15],Ic));f=b.hiC;ca.uniformMatrix4fv(la.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(kc[0]=f[0],kc[1]=f[1],kc[2]=f[2],kc[3]=f[3],kc[4]=f[4],kc[5]=f[5],kc[6]=f[6],kc[7]=f[7],kc[8]=f[8],kc[9]=f[9],kc[10]=f[10],kc[11]=f[11],kc[12]=f[12],kc[13]=f[13],kc[14]=f[14],kc[15]=f[15],kc));f=b.loD;ca.uniformMatrix4fv(Ea.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fc[0]=f[0],Fc[1]=f[1],Fc[2]=f[2],Fc[3]=f[3],Fc[4]=f[4],Fc[5]=f[5],Fc[6]=f[6],Fc[7]=f[7],Fc[8]=f[8],Fc[9]=f[9],Fc[10]=f[10],Fc[11]=f[11],Fc[12]=f[12],Fc[13]=f[13],Fc[14]=
f[14],Fc[15]=f[15],Fc));f=b.hiD;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(gd[0]=f[0],gd[1]=f[1],gd[2]=f[2],gd[3]=f[3],gd[4]=f[4],gd[5]=f[5],gd[6]=f[6],gd[7]=f[7],gd[8]=f[8],gd[9]=f[9],gd[10]=f[10],gd[11]=f[11],gd[12]=f[12],gd[13]=f[13],gd[14]=f[14],gd[15]=f[15],gd));f=b.resolution;ca.uniform2f(pa.location,f[0],f[1]);f=b.viewBoxPos;ca.uniform2f(ya.location,f[0],f[1]);f=b.viewBoxSize;ca.uniform2f(Ga.location,f[0],f[1]);ca.uniform1f(ka.location,b.maskHeight);ca.uniform1f(H.location,
b.drwLayer);f=b.contextColor;ca.uniform4f(T.location,f[0],f[1],f[2],f[3]);(f=b.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;ca.uniform1i(oa.location,f.bind());ca.uniform1i(Ha.location,R.bind());(g=Ka.elements)?ca.bindBuffer(34963,g.buffer.buffer):nc.currentVAO&&(g=Fa.getElements(nc.currentVAO.elements))&&ca.bindBuffer(34963,g.buffer.buffer);p=b.offset;if(b=b.count)g?ca.drawElements(1,b,g.type,p<<(g.type-5121>>1)):ca.drawArrays(1,p,b),ta.dirty=!0,nc.setVAO(null),Y.viewportWidth=
d,Y.viewportHeight=a,ta.profile=c,f.unbind(),R.unbind()},scope:function(l,n,t){var v,I,K,a,ma,sa,Ba,Ha,H,S,O,Xb,A,fa,pa,ha,T,ja,N,ua,M,ba,ya,Ga,G,ca,wa,R,qa,Ca,Z,ka,X,Ta,ea,Aa,va,oa,Ea,na,la,Gb,Da,ed,Fa,gb,id,$a,cc,Eb,Pc,Ab,dc,oc,xb,Bb,be,Ae,lc,nc,Zd,pc,cb,ab,Va,V,Gc,Re,md,kc,nb,Ec,te,fd,Ed,Kc,tc,yb,wc,zd,pd,Fc,Bc,Ic,Vd,nd,Wd,Mb,Ld,Hc,Ze,Vc,Qf,gd,ge,Ad,ye,he,je,ia,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,za,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,
Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=l.viewportHeight;$c.width=l.viewportWidth;$c.x=l.viewportX;$c.y=l.viewportY;
v=$c.x|0;I=$c.y|0;K="width"in $c?$c.width|0:Y.framebufferWidth-v;a="height"in $c?$c.height|0:Y.framebufferHeight-I;ma=Y.viewportWidth;Y.viewportWidth=K;sa=Y.viewportHeight;Y.viewportHeight=a;Ba=$d[0];$d[0]=v;Ha=$d[1];$d[1]=I;H=$d[2];$d[2]=K;S=$d[3];$d[3]=a;O=Rb[0];Rb[0]=0;Xb=Rb[1];Rb[1]=0;A=Rb[2];Rb[2]=0;fa=Rb[3];Rb[3]=0;pa=yd.blend_enable;yd.blend_enable=!1;ha=Cd[0];Cd[0]=32774;T=Cd[1];Cd[1]=32774;ja=Md[0];Md[0]=770;N=Md[1];Md[1]=771;ua=Md[2];Md[2]=1;M=Md[3];Md[3]=1;ba=yd.cull_enable;yd.cull_enable=
!0;ya=yd.cull_face;yd.cull_face=1029;Ga=yd.depth_enable;yd.depth_enable=!0;G=yd.depth_func;yd.depth_func=513;ca=yd.depth_mask;yd.depth_mask=!0;wa=pe[0];pe[0]=0;R=pe[1];pe[1]=1;qa=yd.dither;yd.dither=!1;Ca=yd.lineWidth;yd.lineWidth=2;sd.height=l.scissorHeight;sd.width=l.scissorWidth;sd.x=l.scissorX;sd.y=l.scissorY;Z=sd.x|0;ka=sd.y|0;X="width"in sd?sd.width|0:Y.framebufferWidth-Z;Ta="height"in sd?sd.height|0:Y.framebufferHeight-ka;ea=De[0];De[0]=Z;Aa=De[1];De[1]=ka;va=De[2];De[2]=X;oa=De[3];De[3]=Ta;
Ea=yd.scissor_enable;yd.scissor_enable=!0;na=ta.profile;ta.profile=!1;la=l.offset;Gb=Ka.offset;Ka.offset=la;Da=l.count;ed=Ka.count;Ka.count=Da;Fa=Ka.primitive;Ka.primitive=1;gb=l.contextColor;id=Ia[24];Ia[24]=gb;$a=l.dim0A;cc=Ia[3];Ia[3]=$a;Eb=l.dim0B;Pc=Ia[5];Ia[5]=Eb;Ab=l.dim0C;dc=Ia[7];Ia[7]=Ab;oc=l.dim0D;xb=Ia[9];Ia[9]=oc;Bb=l.dim1A;be=Ia[4];Ia[4]=Bb;Ae=l.dim1B;lc=Ia[6];Ia[6]=Ae;nc=l.dim1C;Zd=Ia[8];Ia[8]=nc;pc=l.dim1D;cb=Ia[10];Ia[10]=pc;ab=l.drwLayer;Va=Ia[23];Ia[23]=ab;V=l.hiA;Gc=Ia[12];Ia[12]=
V;Re=l.hiB;md=Ia[14];Ia[14]=Re;kc=l.hiC;nb=Ia[16];Ia[16]=kc;Ec=l.hiD;te=Ia[18];Ia[18]=Ec;fd=l.loA;Ed=Ia[11];Ia[11]=fd;Kc=l.loB;tc=Ia[13];Ia[13]=Kc;yb=l.loC;wc=Ia[15];Ia[15]=yb;zd=l.loD;pd=Ia[17];Ia[17]=zd;Fc=l.maskHeight;Bc=Ia[22];Ia[22]=Fc;Ic=l.maskTexture;Vd=Ia[25];Ia[25]=Ic;nd=Ia[26];Ia[26]=ga;Wd=l.resolution;Mb=Ia[19];Ia[19]=Wd;Ld=l.viewBoxPos;Hc=Ia[20];Ia[20]=Ld;Ze=l.viewBoxSize;Vc=Ia[21];Ia[21]=Ze;Qf=c.buffer;c.buffer=x;gd=c.divisor;c.divisor=0;ge=c.normalized;c.normalized=!1;Ad=c.offset;c.offset=
0;ye=c.size;c.size=0;he=c.state;c.state=1;je=c.stride;c.stride=0;ia=c.type;c.type=x.dtype;Od=c.w;c.w=0;Id=c.x;c.x=0;Fd=c.y;c.y=0;od=c.z;c.z=0;Tc=f.buffer;f.buffer=J;vd=f.divisor;f.divisor=0;td=f.normalized;f.normalized=!1;ld=f.offset;f.offset=0;xd=f.size;f.size=0;Bd=f.state;f.state=1;Dd=f.stride;f.stride=0;za=f.type;f.type=J.dtype;le=f.w;f.w=0;Ne=f.x;f.x=0;me=f.y;f.y=0;ke=f.z;f.z=0;ie=L.buffer;L.buffer=h;ue=L.divisor;L.divisor=0;ee=L.normalized;L.normalized=!1;ne=L.offset;L.offset=0;Oc=L.size;L.size=
0;hd=L.state;L.state=1;ve=L.stride;L.stride=0;re=L.type;L.type=h.dtype;Jd=L.w;L.w=0;Pd=L.x;L.x=0;Rd=L.y;L.y=0;Sd=L.z;L.z=0;oe=p.buffer;p.buffer=k;ze=p.divisor;p.divisor=0;Ce=p.normalized;p.normalized=!1;se=p.offset;p.offset=0;Se=p.size;p.size=0;Te=p.state;p.state=1;Oe=p.stride;p.stride=0;we=p.type;p.type=k.dtype;Ge=p.w;p.w=0;Ie=p.x;p.x=0;Je=p.y;p.y=0;Ke=p.z;p.z=0;He=aa.buffer;aa.buffer=q;Kd=aa.divisor;aa.divisor=0;Yd=aa.normalized;aa.normalized=!1;ce=aa.offset;aa.offset=0;fe=aa.size;aa.size=0;Le=
aa.state;aa.state=1;Gd=aa.stride;aa.stride=0;Td=aa.type;aa.type=q.dtype;Ee=aa.w;aa.w=0;Me=aa.x;aa.x=0;bf=aa.y;aa.y=0;af=aa.z;aa.z=0;Ue=y.buffer;y.buffer=e;Pe=y.divisor;y.divisor=0;$e=y.normalized;y.normalized=!1;Ye=y.offset;y.offset=0;Ve=y.size;y.size=0;We=y.state;y.state=1;Ud=y.stride;y.stride=0;ae=y.type;y.type=e.dtype;Xe=y.w;y.w=0;hf=y.x;y.x=0;mf=y.y;y.y=0;ef=y.z;y.z=0;jf=g.buffer;g.buffer=B;kf=g.divisor;g.divisor=0;lf=g.normalized;g.normalized=!1;qf=g.offset;g.offset=0;nf=g.size;g.size=0;rf=g.state;
g.state=1;Bf=g.stride;g.stride=0;Cf=g.type;g.type=B.dtype;Qe=g.w;g.w=0;Fe=g.x;g.x=0;of=g.y;g.y=0;pf=g.z;g.z=0;Df=W.buffer;W.buffer=D;Gf=W.divisor;W.divisor=0;Af=W.normalized;W.normalized=!1;Ef=W.offset;W.offset=0;Ff=W.size;W.size=0;wf=W.state;W.state=1;xf=W.stride;W.stride=0;vf=W.type;W.type=D.dtype;yf=W.w;W.w=0;zf=W.x;W.x=0;If=W.y;W.y=0;Jf=W.z;W.z=0;Kf=C.buffer;C.buffer=F;Lf=C.divisor;C.divisor=0;sf=C.normalized;C.normalized=!1;Rf=C.offset;C.offset=0;Hf=C.size;C.size=0;tf=C.state;C.state=1;dg=C.stride;
C.stride=0;Sf=C.type;C.type=F.dtype;Tf=C.w;C.w=0;qg=C.x;C.x=0;ff=C.y;C.y=0;cf=C.z;C.z=0;Mf=E.buffer;E.buffer=U;Nf=E.divisor;E.divisor=0;eg=E.normalized;E.normalized=!1;fg=E.offset;E.offset=0;gg=E.size;E.size=0;hg=E.state;E.state=1;ig=E.stride;E.stride=0;Wf=E.type;E.type=U.dtype;Uf=E.w;E.w=0;Xf=E.x;E.x=0;Yf=E.y;E.y=0;Zf=E.z;E.z=0;jg=d.buffer;d.buffer=w;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=0;xg=d.type;
d.type=w.dtype;yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;gf=Q.buffer;Q.buffer=m;df=Q.divisor;Q.divisor=0;Of=Q.normalized;Q.normalized=!1;Pf=Q.offset;Q.offset=0;kg=Q.size;Q.size=0;lg=Q.state;Q.state=1;mg=Q.stride;Q.stride=0;ng=Q.type;Q.type=m.dtype;og=Q.w;Q.w=0;$f=Q.x;Q.x=0;Vf=Q.y;Q.y=0;ag=Q.z;Q.z=0;bg=b.buffer;b.buffer=r;cg=b.divisor;b.divisor=0;pg=b.normalized;b.normalized=!1;Cg=b.offset;b.offset=0;Dg=b.size;b.size=0;Eg=b.state;b.state=1;Fg=b.stride;b.stride=0;Gg=b.type;b.type=r.dtype;
Hg=b.w;b.w=0;Ig=b.x;b.x=0;Jg=b.y;b.y=0;Kg=b.z;b.z=0;Lg=xa.buffer;xa.buffer=da;Mg=xa.divisor;xa.divisor=0;Ng=xa.normalized;xa.normalized=!1;Og=xa.offset;xa.offset=0;Pg=xa.size;xa.size=0;Qg=xa.state;xa.state=1;Rg=xa.stride;xa.stride=0;Sg=xa.type;xa.type=da.dtype;Tg=xa.w;xa.w=0;Ug=xa.x;xa.x=0;Vg=xa.y;xa.y=0;Wg=xa.z;xa.z=0;Xg=z.buffer;z.buffer=u;Yg=z.divisor;z.divisor=0;Zg=z.normalized;z.normalized=!1;$g=z.offset;z.offset=0;ah=z.size;z.size=0;bh=z.state;z.state=1;ch=z.stride;z.stride=0;dh=z.type;z.type=
u.dtype;eh=z.w;z.w=0;fh=z.x;z.x=0;gh=z.y;z.y=0;hh=z.z;z.z=0;ih=ra.buffer;ra.buffer=P;jh=ra.divisor;ra.divisor=0;kh=ra.normalized;ra.normalized=!1;lh=ra.offset;ra.offset=0;mh=ra.size;ra.size=0;nh=ra.state;ra.state=1;oh=ra.stride;ra.stride=0;ph=ra.type;ra.type=P.dtype;qh=ra.w;ra.w=0;rh=ra.x;ra.x=0;sh=ra.y;ra.y=0;th=ra.z;ra.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ta.dirty=!0;n(Y,l,t);Y.viewportWidth=ma;Y.viewportHeight=sa;$d[0]=Ba;$d[1]=Ha;$d[2]=H;$d[3]=S;Rb[0]=O;Rb[1]=Xb;Rb[2]=A;Rb[3]=fa;yd.blend_enable=
pa;Cd[0]=ha;Cd[1]=T;Md[0]=ja;Md[1]=N;Md[2]=ua;Md[3]=M;yd.cull_enable=ba;yd.cull_face=ya;yd.depth_enable=Ga;yd.depth_func=G;yd.depth_mask=ca;pe[0]=wa;pe[1]=R;yd.dither=qa;yd.lineWidth=Ca;De[0]=ea;De[1]=Aa;De[2]=va;De[3]=oa;yd.scissor_enable=Ea;ta.profile=na;Ka.offset=Gb;Ka.count=ed;Ka.primitive=Fa;Ia[24]=id;Ia[3]=cc;Ia[5]=Pc;Ia[7]=dc;Ia[9]=xb;Ia[4]=be;Ia[6]=lc;Ia[8]=Zd;Ia[10]=cb;Ia[23]=Va;Ia[12]=Gc;Ia[14]=md;Ia[16]=nb;Ia[18]=te;Ia[11]=Ed;Ia[13]=tc;Ia[15]=wc;Ia[17]=pd;Ia[22]=Bc;Ia[25]=Vd;Ia[26]=nd;
Ia[19]=Mb;Ia[20]=Hc;Ia[21]=Vc;c.buffer=Qf;c.divisor=gd;c.normalized=ge;c.offset=Ad;c.size=ye;c.state=he;c.stride=je;c.type=ia;c.w=Od;c.x=Id;c.y=Fd;c.z=od;f.buffer=Tc;f.divisor=vd;f.normalized=td;f.offset=ld;f.size=xd;f.state=Bd;f.stride=Dd;f.type=za;f.w=le;f.x=Ne;f.y=me;f.z=ke;L.buffer=ie;L.divisor=ue;L.normalized=ee;L.offset=ne;L.size=Oc;L.state=hd;L.stride=ve;L.type=re;L.w=Jd;L.x=Pd;L.y=Rd;L.z=Sd;p.buffer=oe;p.divisor=ze;p.normalized=Ce;p.offset=se;p.size=Se;p.state=Te;p.stride=Oe;p.type=we;p.w=
Ge;p.x=Ie;p.y=Je;p.z=Ke;aa.buffer=He;aa.divisor=Kd;aa.normalized=Yd;aa.offset=ce;aa.size=fe;aa.state=Le;aa.stride=Gd;aa.type=Td;aa.w=Ee;aa.x=Me;aa.y=bf;aa.z=af;y.buffer=Ue;y.divisor=Pe;y.normalized=$e;y.offset=Ye;y.size=Ve;y.state=We;y.stride=Ud;y.type=ae;y.w=Xe;y.x=hf;y.y=mf;y.z=ef;g.buffer=jf;g.divisor=kf;g.normalized=lf;g.offset=qf;g.size=nf;g.state=rf;g.stride=Bf;g.type=Cf;g.w=Qe;g.x=Fe;g.y=of;g.z=pf;W.buffer=Df;W.divisor=Gf;W.normalized=Af;W.offset=Ef;W.size=Ff;W.state=wf;W.stride=xf;W.type=
vf;W.w=yf;W.x=zf;W.y=If;W.z=Jf;C.buffer=Kf;C.divisor=Lf;C.normalized=sf;C.offset=Rf;C.size=Hf;C.state=tf;C.stride=dg;C.type=Sf;C.w=Tf;C.x=qg;C.y=ff;C.z=cf;E.buffer=Mf;E.divisor=Nf;E.normalized=eg;E.offset=fg;E.size=gg;E.state=hg;E.stride=ig;E.type=Wf;E.w=Uf;E.x=Xf;E.y=Yf;E.z=Zf;d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;Q.buffer=gf;Q.divisor=df;Q.normalized=Of;Q.offset=Pf;Q.size=kg;Q.state=lg;Q.stride=mg;Q.type=ng;Q.w=
og;Q.x=$f;Q.y=Vf;Q.z=ag;b.buffer=bg;b.divisor=cg;b.normalized=pg;b.offset=Cg;b.size=Dg;b.state=Eg;b.stride=Fg;b.type=Gg;b.w=Hg;b.x=Ig;b.y=Jg;b.z=Kg;xa.buffer=Lg;xa.divisor=Mg;xa.normalized=Ng;xa.offset=Og;xa.size=Pg;xa.state=Qg;xa.stride=Rg;xa.type=Sg;xa.w=Tg;xa.x=Ug;xa.y=Vg;xa.z=Wg;z.buffer=Xg;z.divisor=Yg;z.normalized=Zg;z.offset=$g;z.size=ah;z.state=bh;z.stride=ch;z.type=dh;z.w=eh;z.x=fh;z.y=gh;z.z=hh;ra.buffer=ih;ra.divisor=jh;ra.normalized=kh;ra.offset=lh;ra.size=mh;ra.state=nh;ra.stride=oh;
ra.type=ph;ra.w=qh;ra.x=rh;ra.y=sh;ra.z=th;$b.vert=uh;$b.frag=vh;ta.dirty=!0}}},$1:function(a,Z){var G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d;G=a.attributes;J=a.current;h=a.framebuffer;k=a.gl;q=a.next;e=a.vao;B=q.blend_color;D=J.blend_color;F=q.blend_equation;U=J.blend_equation;w=q.blend_func;m=J.blend_func;r=q.colorMask;da=J.colorMask;u=q.depth_range;P=J.depth_range;x=q.polygonOffset_offset;R=J.polygonOffset_offset;ga=q.sample_coverage;c=J.sample_coverage;f=q.scissor_box;L=
J.scissor_box;p=q.stencil_func;aa=J.stencil_func;y=q.stencil_opBack;g=J.stencil_opBack;W=q.stencil_opFront;C=J.stencil_opFront;E=q.viewport;d=J.viewport;return{poll:function(){var e,b,a,z,G,Z,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa;J.dirty=!1;b=q.blend_enable;a=q.cull_enable;z=q.depth_enable;G=q.dither;Z=q.polygonOffset_enable;X=q.sample_alpha;ea=q.sample_enable;T=q.scissor_enable;S=q.stencil_enable;A=q.cull_face;l=J.cull_face;M=q.depth_func;N=J.depth_func;wa=q.depth_mask;na=J.depth_mask;n=q.frontFace;
H=J.frontFace;ba=q.lineWidth;O=J.lineWidth;la=q.stencil_mask;qa=J.stencil_mask;e=h.next;e!==h.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),h.cur=e);b!==J.blend_enable&&(b?k.enable(3042):k.disable(3042),J.blend_enable=b);a!==J.cull_enable&&(a?k.enable(2884):k.disable(2884),J.cull_enable=a);z!==J.depth_enable&&(z?k.enable(2929):k.disable(2929),J.depth_enable=z);G!==J.dither&&(G?k.enable(3024):k.disable(3024),J.dither=G);Z!==J.polygonOffset_enable&&(Z?k.enable(32823):
k.disable(32823),J.polygonOffset_enable=Z);X!==J.sample_alpha&&(X?k.enable(32926):k.disable(32926),J.sample_alpha=X);ea!==J.sample_enable&&(ea?k.enable(32928):k.disable(32928),J.sample_enable=ea);T!==J.scissor_enable&&(T?k.enable(3089):k.disable(3089),J.scissor_enable=T);S!==J.stencil_enable&&(S?k.enable(2960):k.disable(2960),J.stencil_enable=S);if(B[0]!==D[0]||B[1]!==D[1]||B[2]!==D[2]||B[3]!==D[3])k.blendColor(B[0],B[1],B[2],B[3]),D[0]=B[0],D[1]=B[1],D[2]=B[2],D[3]=B[3];if(F[0]!==U[0]||F[1]!==U[1])k.blendEquationSeparate(F[0],
F[1]),U[0]=F[0],U[1]=F[1];if(w[0]!==m[0]||w[1]!==m[1]||w[2]!==m[2]||w[3]!==m[3])k.blendFuncSeparate(w[0],w[1],w[2],w[3]),m[0]=w[0],m[1]=w[1],m[2]=w[2],m[3]=w[3];if(r[0]!==da[0]||r[1]!==da[1]||r[2]!==da[2]||r[3]!==da[3])k.colorMask(r[0],r[1],r[2],r[3]),da[0]=r[0],da[1]=r[1],da[2]=r[2],da[3]=r[3];A!==l&&(k.cullFace(A),J.cull_face=A);M!==N&&(k.depthFunc(M),J.depth_func=M);wa!==na&&(k.depthMask(wa),J.depth_mask=wa);if(u[0]!==P[0]||u[1]!==P[1])k.depthRange(u[0],u[1]),P[0]=u[0],P[1]=u[1];n!==H&&(k.frontFace(n),
J.frontFace=n);ba!==O&&(k.lineWidth(ba),J.lineWidth=ba);if(x[0]!==R[0]||x[1]!==R[1])k.polygonOffset(x[0],x[1]),R[0]=x[0],R[1]=x[1];if(ga[0]!==c[0]||ga[1]!==c[1])k.sampleCoverage(ga[0],ga[1]),c[0]=ga[0],c[1]=ga[1];if(f[0]!==L[0]||f[1]!==L[1]||f[2]!==L[2]||f[3]!==L[3])k.scissor(f[0],f[1],f[2],f[3]),L[0]=f[0],L[1]=f[1],L[2]=f[2],L[3]=f[3];if(p[0]!==aa[0]||p[1]!==aa[1]||p[2]!==aa[2])k.stencilFunc(p[0],p[1],p[2]),aa[0]=p[0],aa[1]=p[1],aa[2]=p[2];la!==qa&&(k.stencilMask(la),J.stencil_mask=la);if(y[0]!==
g[0]||y[1]!==g[1]||y[2]!==g[2]||y[3]!==g[3])k.stencilOpSeparate(y[0],y[1],y[2],y[3]),g[0]=y[0],g[1]=y[1],g[2]=y[2],g[3]=y[3];if(W[0]!==C[0]||W[1]!==C[1]||W[2]!==C[2]||W[3]!==C[3])k.stencilOpSeparate(W[0],W[1],W[2],W[3]),C[0]=W[0],C[1]=W[1],C[2]=W[2],C[3]=W[3];if(E[0]!==d[0]||E[1]!==d[1]||E[2]!==d[2]||E[3]!==d[3])k.viewport(E[0],E[1],E[2],E[3]),d[0]=E[0],d[1]=E[1],d[2]=E[2],d[3]=E[3]},refresh:function(){var a,b,xa,z,ra,id,X,ea,T,S,A,l,M,N,wa,na;J.dirty=!1;b=q.blend_enable;xa=q.cull_enable;z=q.depth_enable;
ra=q.dither;id=q.polygonOffset_enable;X=q.sample_alpha;ea=q.sample_enable;T=q.scissor_enable;S=q.stencil_enable;A=q.cull_face;l=q.depth_func;M=q.depth_mask;N=q.frontFace;wa=q.lineWidth;na=q.stencil_mask;(a=h.next)?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null);h.cur=a;a=G[0];a.buffer?(k.enableVertexAttribArray(0),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(0),k.vertexAttrib4f(0,a.x,a.y,
a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(0,a.divisor);a=G[1];a.buffer?(k.enableVertexAttribArray(1),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(1),k.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(1,a.divisor);a=G[2];a.buffer?(k.enableVertexAttribArray(2),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(2),
k.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(2,a.divisor);a=G[3];a.buffer?(k.enableVertexAttribArray(3),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(3),k.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(3,a.divisor);a=G[4];a.buffer?(k.enableVertexAttribArray(4),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,
a.offset)):(k.disableVertexAttribArray(4),k.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(4,a.divisor);a=G[5];a.buffer?(k.enableVertexAttribArray(5),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(5),k.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(5,a.divisor);a=G[6];a.buffer?(k.enableVertexAttribArray(6),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(6,
a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(6),k.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(6,a.divisor);a=G[7];a.buffer?(k.enableVertexAttribArray(7),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(7),k.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(7,a.divisor);a=G[8];a.buffer?(k.enableVertexAttribArray(8),k.bindBuffer(34962,
a.buffer.buffer),k.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(8),k.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(8,a.divisor);a=G[9];a.buffer?(k.enableVertexAttribArray(9),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(9),k.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(9,a.divisor);a=G[10];a.buffer?
(k.enableVertexAttribArray(10),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(10),k.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(10,a.divisor);a=G[11];a.buffer?(k.enableVertexAttribArray(11),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(11),k.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);
Z.vertexAttribDivisorANGLE(11,a.divisor);a=G[12];a.buffer?(k.enableVertexAttribArray(12),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(12),k.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(12,a.divisor);a=G[13];a.buffer?(k.enableVertexAttribArray(13),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(13),
k.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(13,a.divisor);a=G[14];a.buffer?(k.enableVertexAttribArray(14),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(14),k.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(14,a.divisor);a=G[15];a.buffer?(k.enableVertexAttribArray(15),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(15,a.size,a.type,a.normalized,
a.stride,a.offset)):(k.disableVertexAttribArray(15),k.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);Z.vertexAttribDivisorANGLE(15,a.divisor);e.currentVAO=null;e.setVAO(e.targetVAO);b?k.enable(3042):k.disable(3042);J.blend_enable=b;xa?k.enable(2884):k.disable(2884);J.cull_enable=xa;z?k.enable(2929):k.disable(2929);J.depth_enable=z;ra?k.enable(3024):k.disable(3024);J.dither=ra;id?k.enable(32823):k.disable(32823);J.polygonOffset_enable=id;X?k.enable(32926):k.disable(32926);J.sample_alpha=X;ea?k.enable(32928):
k.disable(32928);J.sample_enable=ea;T?k.enable(3089):k.disable(3089);J.scissor_enable=T;S?k.enable(2960):k.disable(2960);J.stencil_enable=S;k.blendColor(B[0],B[1],B[2],B[3]);D[0]=B[0];D[1]=B[1];D[2]=B[2];D[3]=B[3];k.blendEquationSeparate(F[0],F[1]);U[0]=F[0];U[1]=F[1];k.blendFuncSeparate(w[0],w[1],w[2],w[3]);m[0]=w[0];m[1]=w[1];m[2]=w[2];m[3]=w[3];k.colorMask(r[0],r[1],r[2],r[3]);da[0]=r[0];da[1]=r[1];da[2]=r[2];da[3]=r[3];k.cullFace(A);J.cull_face=A;k.depthFunc(l);J.depth_func=l;k.depthMask(M);J.depth_mask=
M;k.depthRange(u[0],u[1]);P[0]=u[0];P[1]=u[1];k.frontFace(N);J.frontFace=N;k.lineWidth(wa);J.lineWidth=wa;k.polygonOffset(x[0],x[1]);R[0]=x[0];R[1]=x[1];k.sampleCoverage(ga[0],ga[1]);c[0]=ga[0];c[1]=ga[1];k.scissor(f[0],f[1],f[2],f[3]);L[0]=f[0];L[1]=f[1];L[2]=f[2];L[3]=f[3];k.stencilFunc(p[0],p[1],p[2]);aa[0]=p[0];aa[1]=p[1];aa[2]=p[2];k.stencilMask(na);J.stencil_mask=na;k.stencilOpSeparate(y[0],y[1],y[2],y[3]);g[0]=y[0];g[1]=y[1];g[2]=y[2];g[3]=y[3];k.stencilOpSeparate(W[0],W[1],W[2],W[3]);C[0]=
W[0];C[1]=W[1];C[2]=W[2];C[3]=W[3];k.viewport(E[0],E[1],E[2],E[3]);d[0]=E[0];d[1]=E[1];d[2]=E[2];d[3]=E[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,id,X,ea,T,S,A,l,M,N,wa,na){var n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,ed,Gb,ha,I,sa,Ha,pa,ya,Ga,ja,Y,ta,Ka,Fa,gb,ca,yd,$b,Ia,nc,Rb;n=
a.attributes;H=a.buffer;ba=a.context;O=a.current;la=a.draw;qa=a.elements;Da=a.extensions;Ca=a.framebuffer;fa=a.gl;Ea=a.isBufferArgs;ka=a.next;oa=a.shader;Aa=a.uniforms;Ba=a.vao;ma=ka.blend_color;Xb=O.blend_color;Ta=ka.blend_equation;v=O.blend_equation;t=ka.blend_func;K=O.blend_func;ua=ka.colorMask;va=O.colorMask;ed=ka.depth_range;Gb=O.depth_range;ha=ka.polygonOffset_offset;I=O.polygonOffset_offset;sa=ka.sample_coverage;Ha=O.sample_coverage;pa=ka.scissor_box;ya=O.scissor_box;Ga=ka.stencil_func;ja=
O.stencil_func;Y=ka.stencil_opBack;ta=O.stencil_opBack;Ka=ka.stencil_opFront;Fa=O.stencil_opFront;gb=ka.viewport;ca=O.viewport;yd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=G;$b.divisor=1;Ia={};Ia.buffer=J;Ia.divisor=1;nc={};nc.buffer=h;nc.divisor=1;Rb={};Rb.buffer=k;Rb.divisor=1;return{batch:function(c,e){var f,k,a,t,q,p;f=Ca.next;f!==Ca.cur&&(f?fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),Ca.cur=f);if(O.dirty){var h,
ma,y,u,pa,J,L,x,G,r,D,B,R,P,F,Ta,aa,ga,Aa,oa,da,gb,V,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd;h=ka.dither;h!==O.dither&&(h?fa.enable(3024):fa.disable(3024),O.dither=h);ma=ka.depth_func;ma!==O.depth_func&&(fa.depthFunc(ma),O.depth_func=ma);y=ed[0];u=ed[1];if(y!==Gb[0]||u!==Gb[1])fa.depthRange(y,u),Gb[0]=y,Gb[1]=u;pa=ka.depth_mask;pa!==O.depth_mask&&(fa.depthMask(pa),O.depth_mask=pa);J=ua[0];L=ua[1];x=ua[2];G=ua[3];if(J!==va[0]||L!==va[1]||x!==va[2]||G!==va[3])fa.colorMask(J,L,x,G),va[0]=J,va[1]=L,va[2]=x,va[3]=
G;r=ka.cull_enable;r!==O.cull_enable&&(r?fa.enable(2884):fa.disable(2884),O.cull_enable=r);D=ka.cull_face;D!==O.cull_face&&(fa.cullFace(D),O.cull_face=D);B=ka.frontFace;B!==O.frontFace&&(fa.frontFace(B),O.frontFace=B);R=ka.lineWidth;R!==O.lineWidth&&(fa.lineWidth(R),O.lineWidth=R);P=ka.polygonOffset_enable;P!==O.polygonOffset_enable&&(P?fa.enable(32823):fa.disable(32823),O.polygonOffset_enable=P);F=ha[0];Ta=ha[1];if(F!==I[0]||Ta!==I[1])fa.polygonOffset(F,Ta),I[0]=F,I[1]=Ta;aa=ka.sample_alpha;aa!==
O.sample_alpha&&(aa?fa.enable(32926):fa.disable(32926),O.sample_alpha=aa);ga=ka.sample_enable;ga!==O.sample_enable&&(ga?fa.enable(32928):fa.disable(32928),O.sample_enable=ga);Aa=sa[0];oa=sa[1];if(Aa!==Ha[0]||oa!==Ha[1])fa.sampleCoverage(Aa,oa),Ha[0]=Aa,Ha[1]=oa;da=ka.stencil_enable;da!==O.stencil_enable&&(da?fa.enable(2960):fa.disable(2960),O.stencil_enable=da);gb=ka.stencil_mask;gb!==O.stencil_mask&&(fa.stencilMask(gb),O.stencil_mask=gb);V=Ga[0];Ab=Ga[1];Eb=Ga[2];if(V!==ja[0]||Ab!==ja[1]||Eb!==ja[2])fa.stencilFunc(V,
Ab,Eb),ja[0]=V,ja[1]=Ab,ja[2]=Eb;tc=Ka[0];xb=Ka[1];wc=Ka[2];Bb=Ka[3];if(tc!==Fa[0]||xb!==Fa[1]||wc!==Fa[2]||Bb!==Fa[3])fa.stencilOpSeparate(tc,xb,wc,Bb),Fa[0]=tc,Fa[1]=xb,Fa[2]=wc,Fa[3]=Bb;Ic=Y[0];kc=Y[1];Fc=Y[2];gd=Y[3];if(Ic!==ta[0]||kc!==ta[1]||Fc!==ta[2]||gd!==ta[3])fa.stencilOpSeparate(Ic,kc,Fc,gd),ta[0]=Ic,ta[1]=kc,ta[2]=Fc,ta[3]=gd}fa.blendColor(0,0,0,0);Xb[0]=0;Xb[1]=0;Xb[2]=0;Xb[3]=0;fa.enable(3042);O.blend_enable=!0;fa.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;fa.blendFuncSeparate(770,
771,773,1);K[0]=770;K[1]=771;K[2]=773;K[3]=1;fa.disable(2929);O.depth_enable=!1;fa.enable(3089);O.scissor_enable=!0;if(k=O.profile)a=performance.now(),Z.count+=e;fa.useProgram(g.program);t=Da.angle_instanced_arrays;var Vc,Bc,cc,Gc,oc,pc,lc,dc;Ba.setVAO(null);Vc=ra.location;Bc=n[Vc];Bc.buffer||fa.enableVertexAttribArray(Vc);if(5126!==Bc.type||2!==Bc.size||Bc.buffer!==U||!1!==Bc.normalized||0!==Bc.offset||24!==Bc.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(Vc,2,5126,!1,24,0),Bc.type=
5126,Bc.size=2,Bc.buffer=U,Bc.normalized=!1,Bc.offset=0,Bc.stride=24;0!==Bc.divisor&&(t.vertexAttribDivisorANGLE(Vc,0),Bc.divisor=0);cc=X.location;Gc=n[cc];Gc.buffer||fa.enableVertexAttribArray(cc);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==w||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)fa.bindBuffer(34962,w.buffer),fa.vertexAttribPointer(cc,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=w,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(t.vertexAttribDivisorANGLE(cc,0),Gc.divisor=
0);oc=b.location;pc=n[oc];pc.buffer||fa.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==m||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=m,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(t.vertexAttribDivisorANGLE(oc,0),pc.divisor=0);(lc=la.elements)?fa.bindBuffer(34963,lc.buffer.buffer):Ba.currentVAO&&(lc=qa.getElements(Ba.currentVAO.elements))&&fa.bindBuffer(34963,
lc.buffer.buffer);dc=la.offset;for(q=0;q<e;++q){p=c[q];var $a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,za,Nd,Xd,de,Od,Id,Fd,od,Tc;$a=p.viewport;Hc=$a.x|0;yb=$a.y|0;cb="width"in $a?$a.width|0:ba.framebufferWidth-Hc;Mb="height"in
$a?$a.height|0:ba.framebufferHeight-yb;ab=ba.viewportWidth;ba.viewportWidth=cb;nb=ba.viewportHeight;ba.viewportHeight=Mb;fa.viewport(Hc,yb,cb,Mb);ca[0]=Hc;ca[1]=yb;ca[2]=cb;ca[3]=Mb;Va=p.viewport;Lc=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:ba.framebufferWidth-Lc;qc="height"in Va?Va.height|0:ba.framebufferHeight-Hb;fa.scissor(Lc,Hb,Ib,qc);ya[0]=Lc;ya[1]=Hb;ya[2]=Ib;ya[3]=qc;Nb=W.call(this,ba,p,q);nc.offset=Nb;jb=!1;Fb=null;Cb=0;wb=!1;Yb=hb=0;Ob=1;qb=0;Ua=5126;ib=hc=ob=Tb=0;Ea(nc)?(jb=!0,Fb=H.createStream(34962,
nc),Ua=Fb.dtype):(Fb=H.getBuffer(nc))?Ua=Fb.dtype:"constant"in nc?(Ob=2,"number"===typeof nc.constant?(ob=nc.constant,hc=ib=Tb=0):(ob=0<nc.constant.length?nc.constant[0]:0,hc=1<nc.constant.length?nc.constant[1]:0,ib=2<nc.constant.length?nc.constant[2]:0,Tb=3<nc.constant.length?nc.constant[3]:0)):(Fb=Ea(nc.buffer)?H.createStream(34962,nc.buffer):H.getBuffer(nc.buffer),Ua="type"in nc?yd[nc.type]:Fb.dtype,wb=!!nc.normalized,Yb=nc.size|0,hb=nc.offset|0,qb=nc.stride|0,Cb=nc.divisor|0);pb=S.location;Ja=
n[pb];if(1===Ob){Ja.buffer||fa.enableVertexAttribArray(pb);rb=Yb||2;if(Ja.type!==Ua||Ja.size!==rb||Ja.buffer!==Fb||Ja.normalized!==wb||Ja.offset!==hb||Ja.stride!==qb)fa.bindBuffer(34962,Fb.buffer),fa.vertexAttribPointer(pb,rb,Ua,wb,qb,hb),Ja.type=Ua,Ja.size=rb,Ja.buffer=Fb,Ja.normalized=wb,Ja.offset=hb,Ja.stride=qb;Ja.divisor!==Cb&&(t.vertexAttribDivisorANGLE(pb,Cb),Ja.divisor=Cb)}else if(Ja.buffer&&(fa.disableVertexAttribArray(pb),Ja.buffer=null),Ja.x!==ob||Ja.y!==hc||Ja.z!==ib||Ja.w!==Tb)fa.vertexAttrib4f(pb,
ob,hc,ib,Tb),Ja.x=ob,Ja.y=hc,Ja.z=ib,Ja.w=Tb;La=C.call(this,ba,p,q);Rb.offset=La;eb=!1;fb=null;Ma=0;kb=!1;tb=Wa=0;sb=1;Pa=0;Ac=5126;Na=Db=Jb=Ra=0;Ea(Rb)?(eb=!0,fb=H.createStream(34962,Rb),Ac=fb.dtype):(fb=H.getBuffer(Rb))?Ac=fb.dtype:"constant"in Rb?(sb=2,"number"===typeof Rb.constant?(Jb=Rb.constant,Db=Na=Ra=0):(Jb=0<Rb.constant.length?Rb.constant[0]:0,Db=1<Rb.constant.length?Rb.constant[1]:0,Na=2<Rb.constant.length?Rb.constant[2]:0,Ra=3<Rb.constant.length?Rb.constant[3]:0)):(fb=Ea(Rb.buffer)?H.createStream(34962,
Rb.buffer):H.getBuffer(Rb.buffer),Ac="type"in Rb?yd[Rb.type]:fb.dtype,kb=!!Rb.normalized,tb=Rb.size|0,Wa=Rb.offset|0,Pa=Rb.stride|0,Ma=Rb.divisor|0);ia=A.location;Ya=n[ia];if(1===sb){Ya.buffer||fa.enableVertexAttribArray(ia);Kb=tb||2;if(Ya.type!==Ac||Ya.size!==Kb||Ya.buffer!==fb||Ya.normalized!==kb||Ya.offset!==Wa||Ya.stride!==Pa)fa.bindBuffer(34962,fb.buffer),fa.vertexAttribPointer(ia,Kb,Ac,kb,Pa,Wa),Ya.type=Ac,Ya.size=Kb,Ya.buffer=fb,Ya.normalized=kb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==Ma&&(t.vertexAttribDivisorANGLE(ia,
Ma),Ya.divisor=Ma)}else if(Ya.buffer&&(fa.disableVertexAttribArray(ia),Ya.buffer=null),Ya.x!==Jb||Ya.y!==Db||Ya.z!==Na||Ya.w!==Ra)fa.vertexAttrib4f(ia,Jb,Db,Na,Ra),Ya.x=Jb,Ya.y=Db,Ya.z=Na,Ya.w=Ra;Lb=E.call(this,ba,p,q);Ia.offset=Lb;lb=!1;Oa=null;Zb=0;Qa=!1;vb=ub=0;Sa=1;mb=0;ec=5126;ic=bb=uc=Dc=0;Ea(Ia)?(lb=!0,Oa=H.createStream(34962,Ia),ec=Oa.dtype):(Oa=H.getBuffer(Ia))?ec=Oa.dtype:"constant"in Ia?(Sa=2,"number"===typeof Ia.constant?(uc=Ia.constant,bb=ic=Dc=0):(uc=0<Ia.constant.length?Ia.constant[0]:
0,bb=1<Ia.constant.length?Ia.constant[1]:0,ic=2<Ia.constant.length?Ia.constant[2]:0,Dc=3<Ia.constant.length?Ia.constant[3]:0)):(Oa=Ea(Ia.buffer)?H.createStream(34962,Ia.buffer):H.getBuffer(Ia.buffer),ec="type"in Ia?yd[Ia.type]:Oa.dtype,Qa=!!Ia.normalized,vb=Ia.size|0,ub=Ia.offset|0,mb=Ia.stride|0,Zb=Ia.divisor|0);ad=id.location;Xa=n[ad];if(1===Sa){Xa.buffer||fa.enableVertexAttribArray(ad);Mc=vb||4;if(Xa.type!==ec||Xa.size!==Mc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==ub||Xa.stride!==mb)fa.bindBuffer(34962,
Oa.buffer),fa.vertexAttribPointer(ad,Mc,ec,Qa,mb,ub),Xa.type=ec,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=ub,Xa.stride=mb;Xa.divisor!==Zb&&(t.vertexAttribDivisorANGLE(ad,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(fa.disableVertexAttribArray(ad),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==ic||Xa.w!==Dc)fa.vertexAttrib4f(ad,uc,bb,ic,Dc),Xa.x=uc,Xa.y=bb,Xa.z=ic,Xa.w=Dc;zb=d.call(this,ba,p,q);$b.offset=zb;Za=!1;Ub=null;sc=0;Vb=!1;Jc=Pb=0;Qb=1;qd=0;Cc=5126;ud=Wc=Nc=Hd=0;Ea($b)?(Za=!0,Ub=H.createStream(34962,
$b),Cc=Ub.dtype):(Ub=H.getBuffer($b))?Cc=Ub.dtype:"constant"in $b?(Qb=2,"number"===typeof $b.constant?(Nc=$b.constant,Wc=ud=Hd=0):(Nc=0<$b.constant.length?$b.constant[0]:0,Wc=1<$b.constant.length?$b.constant[1]:0,ud=2<$b.constant.length?$b.constant[2]:0,Hd=3<$b.constant.length?$b.constant[3]:0)):(Ub=Ea($b.buffer)?H.createStream(34962,$b.buffer):H.getBuffer($b.buffer),Cc="type"in $b?yd[$b.type]:Ub.dtype,Vb=!!$b.normalized,Jc=$b.size|0,Pb=$b.offset|0,qd=$b.stride|0,sc=$b.divisor|0);mc=z.location;vc=
n[mc];if(1===Qb){vc.buffer||fa.enableVertexAttribArray(mc);fc=Jc||4;if(vc.type!==Cc||vc.size!==fc||vc.buffer!==Ub||vc.normalized!==Vb||vc.offset!==Pb||vc.stride!==qd)fa.bindBuffer(34962,Ub.buffer),fa.vertexAttribPointer(mc,fc,Cc,Vb,qd,Pb),vc.type=Cc,vc.size=fc,vc.buffer=Ub,vc.normalized=Vb,vc.offset=Pb,vc.stride=qd;vc.divisor!==sc&&(t.vertexAttribDivisorANGLE(mc,sc),vc.divisor=sc)}else if(vc.buffer&&(fa.disableVertexAttribArray(mc),vc.buffer=null),vc.x!==Nc||vc.y!==Wc||vc.z!==ud||vc.w!==Hd)fa.vertexAttrib4f(mc,
Nc,Wc,ud,Hd),vc.x=Nc,vc.y=Wc,vc.z=ud,vc.w=Hd;db=Q.call(this,ba,p,q);rc=db[0];Wb=db[1];gc=db[2];zc=db[3];q&&Sb===rc&&bc===Wb&&xc===gc&&bd===zc||(Sb=rc,bc=Wb,xc=gc,bd=zc,fa.uniform4f(na.location,rc,Wb,gc,zc));Qc=p.lineWidth;q&&Rc===Qc||(Rc=Qc,fa.uniform1f(ea.location,Qc));Sc=p.capSize;q&&Xc===Sc||(Xc=Sc,fa.uniform1f(xa.location,Sc));wd=p.scale;cd=wd[0];jc=wd[1];q&&Yc===cd&&ac===jc||(Yc=cd,ac=jc,fa.uniform2f(l.location,cd,jc));Zc=p.scaleFract;Uc=Zc[0];yc=Zc[1];q&&dd===Uc&&jd===yc||(dd=Uc,jd=yc,fa.uniform2f(M.location,
Uc,yc));rd=p.translate;xe=rd[0];kd=rd[1];q&&Be===xe&&za===kd||(Be=xe,za=kd,fa.uniform2f(N.location,xe,kd));Nd=p.translateFract;Xd=Nd[0];Od=Nd[1];q&&de===Xd&&Id===Od||(de=Xd,Id=Od,fa.uniform2f(wa.location,Xd,Od));Fd=p.opacity;q&&od===Fd||(od=Fd,fa.uniform1f(T.location,Fd));Tc=p.count;0<Tc?lc?t.drawElementsInstancedANGLE(4,36,lc.type,dc<<(lc.type-5121>>1),Tc):t.drawArraysInstancedANGLE(4,dc,36,Tc):0>Tc&&(lc?fa.drawElements(4,36,lc.type,dc<<(lc.type-5121>>1)):fa.drawArrays(4,dc,36));ba.viewportWidth=
ab;ba.viewportHeight=nb;jb&&H.destroyStream(Fb);eb&&H.destroyStream(fb);lb&&H.destroyStream(Oa);Za&&H.destroyStream(Ub)}O.dirty=!0;Ba.setVAO(null);k&&(Z.cpuTime+=performance.now()-a)},draw:function(d){var c,f,k,g,a,t,p,h,ma,y,u,pa,C,E,J,L,x,G,Q,R,P,Ta,aa,ga,Aa,oa,da,W,gb,V,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,lb,Oa,Zb;c=Ca.next;c!==Ca.cur&&(c?
fa.bindFramebuffer(36160,c.framebuffer):fa.bindFramebuffer(36160,null),Ca.cur=c);if(O.dirty){var Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb;Qa=ka.dither;Qa!==O.dither&&(Qa?fa.enable(3024):fa.disable(3024),O.dither=Qa);ub=ka.depth_func;ub!==O.depth_func&&(fa.depthFunc(ub),O.depth_func=ub);vb=ed[0];Sa=ed[1];if(vb!==Gb[0]||Sa!==Gb[1])fa.depthRange(vb,Sa),Gb[0]=vb,Gb[1]=Sa;mb=ka.depth_mask;mb!==O.depth_mask&&(fa.depthMask(mb),O.depth_mask=mb);ec=
ua[0];Dc=ua[1];uc=ua[2];bb=ua[3];if(ec!==va[0]||Dc!==va[1]||uc!==va[2]||bb!==va[3])fa.colorMask(ec,Dc,uc,bb),va[0]=ec,va[1]=Dc,va[2]=uc,va[3]=bb;ic=ka.cull_enable;ic!==O.cull_enable&&(ic?fa.enable(2884):fa.disable(2884),O.cull_enable=ic);ad=ka.cull_face;ad!==O.cull_face&&(fa.cullFace(ad),O.cull_face=ad);Xa=ka.frontFace;Xa!==O.frontFace&&(fa.frontFace(Xa),O.frontFace=Xa);Mc=ka.lineWidth;Mc!==O.lineWidth&&(fa.lineWidth(Mc),O.lineWidth=Mc);zb=ka.polygonOffset_enable;zb!==O.polygonOffset_enable&&(zb?
fa.enable(32823):fa.disable(32823),O.polygonOffset_enable=zb);Za=ha[0];Ub=ha[1];if(Za!==I[0]||Ub!==I[1])fa.polygonOffset(Za,Ub),I[0]=Za,I[1]=Ub;sc=ka.sample_alpha;sc!==O.sample_alpha&&(sc?fa.enable(32926):fa.disable(32926),O.sample_alpha=sc);Vb=ka.sample_enable;Vb!==O.sample_enable&&(Vb?fa.enable(32928):fa.disable(32928),O.sample_enable=Vb);Pb=sa[0];Jc=sa[1];if(Pb!==Ha[0]||Jc!==Ha[1])fa.sampleCoverage(Pb,Jc),Ha[0]=Pb,Ha[1]=Jc;Qb=ka.stencil_enable;Qb!==O.stencil_enable&&(Qb?fa.enable(2960):fa.disable(2960),
O.stencil_enable=Qb);qd=ka.stencil_mask;qd!==O.stencil_mask&&(fa.stencilMask(qd),O.stencil_mask=qd);Cc=Ga[0];Hd=Ga[1];Nc=Ga[2];if(Cc!==ja[0]||Hd!==ja[1]||Nc!==ja[2])fa.stencilFunc(Cc,Hd,Nc),ja[0]=Cc,ja[1]=Hd,ja[2]=Nc;Wc=Ka[0];ud=Ka[1];mc=Ka[2];vc=Ka[3];if(Wc!==Fa[0]||ud!==Fa[1]||mc!==Fa[2]||vc!==Fa[3])fa.stencilOpSeparate(Wc,ud,mc,vc),Fa[0]=Wc,Fa[1]=ud,Fa[2]=mc,Fa[3]=vc;fc=Y[0];db=Y[1];rc=Y[2];Sb=Y[3];if(fc!==ta[0]||db!==ta[1]||rc!==ta[2]||Sb!==ta[3])fa.stencilOpSeparate(fc,db,rc,Sb),ta[0]=fc,ta[1]=
db,ta[2]=rc,ta[3]=Sb}f=d.viewport;k=f.x|0;g=f.y|0;a="width"in f?f.width|0:ba.framebufferWidth-k;t="height"in f?f.height|0:ba.framebufferHeight-g;p=ba.viewportWidth;ba.viewportWidth=a;h=ba.viewportHeight;ba.viewportHeight=t;fa.viewport(k,g,a,t);ca[0]=k;ca[1]=g;ca[2]=a;ca[3]=t;fa.blendColor(0,0,0,0);Xb[0]=0;Xb[1]=0;Xb[2]=0;Xb[3]=0;fa.enable(3042);O.blend_enable=!0;fa.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;fa.blendFuncSeparate(770,771,773,1);K[0]=770;K[1]=771;K[2]=773;K[3]=1;fa.disable(2929);
O.depth_enable=!1;ma=d.viewport;y=ma.x|0;u=ma.y|0;pa="width"in ma?ma.width|0:ba.framebufferWidth-y;C="height"in ma?ma.height|0:ba.framebufferHeight-u;fa.scissor(y,u,pa,C);ya[0]=y;ya[1]=u;ya[2]=pa;ya[3]=C;fa.enable(3089);O.scissor_enable=!0;if(E=O.profile)J=performance.now(),Z.count++;fa.useProgram(q.program);L=Da.angle_instanced_arrays;Ba.setVAO(null);x=e.call(this,ba,d,0);nc.offset=x;G=!1;Q=null;R=0;P=!1;aa=Ta=0;ga=1;Aa=0;oa=5126;V=gb=W=da=0;Ea(nc)?(G=!0,Q=H.createStream(34962,nc),oa=Q.dtype):(Q=
H.getBuffer(nc))?oa=Q.dtype:"constant"in nc?(ga=2,"number"===typeof nc.constant?(W=nc.constant,gb=V=da=0):(W=0<nc.constant.length?nc.constant[0]:0,gb=1<nc.constant.length?nc.constant[1]:0,V=2<nc.constant.length?nc.constant[2]:0,da=3<nc.constant.length?nc.constant[3]:0)):(Q=Ea(nc.buffer)?H.createStream(34962,nc.buffer):H.getBuffer(nc.buffer),oa="type"in nc?yd[nc.type]:Q.dtype,P=!!nc.normalized,aa=nc.size|0,Ta=nc.offset|0,Aa=nc.stride|0,R=nc.divisor|0);Ab=S.location;Eb=n[Ab];if(1===ga){Eb.buffer||fa.enableVertexAttribArray(Ab);
tc=aa||2;if(Eb.type!==oa||Eb.size!==tc||Eb.buffer!==Q||Eb.normalized!==P||Eb.offset!==Ta||Eb.stride!==Aa)fa.bindBuffer(34962,Q.buffer),fa.vertexAttribPointer(Ab,tc,oa,P,Aa,Ta),Eb.type=oa,Eb.size=tc,Eb.buffer=Q,Eb.normalized=P,Eb.offset=Ta,Eb.stride=Aa;Eb.divisor!==R&&(L.vertexAttribDivisorANGLE(Ab,R),Eb.divisor=R)}else if(Eb.buffer&&(fa.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==W||Eb.y!==gb||Eb.z!==V||Eb.w!==da)fa.vertexAttrib4f(Ab,W,gb,V,da),Eb.x=W,Eb.y=gb,Eb.z=V,Eb.w=da;xb=B.call(this,
ba,d,0);Rb.offset=xb;wc=!1;Bb=null;Ic=0;kc=!1;gd=Fc=0;Vc=1;Bc=0;cc=5126;lc=pc=oc=Gc=0;Ea(Rb)?(wc=!0,Bb=H.createStream(34962,Rb),cc=Bb.dtype):(Bb=H.getBuffer(Rb))?cc=Bb.dtype:"constant"in Rb?(Vc=2,"number"===typeof Rb.constant?(oc=Rb.constant,pc=lc=Gc=0):(oc=0<Rb.constant.length?Rb.constant[0]:0,pc=1<Rb.constant.length?Rb.constant[1]:0,lc=2<Rb.constant.length?Rb.constant[2]:0,Gc=3<Rb.constant.length?Rb.constant[3]:0)):(Bb=Ea(Rb.buffer)?H.createStream(34962,Rb.buffer):H.getBuffer(Rb.buffer),cc="type"in
Rb?yd[Rb.type]:Bb.dtype,kc=!!Rb.normalized,gd=Rb.size|0,Fc=Rb.offset|0,Bc=Rb.stride|0,Ic=Rb.divisor|0);dc=A.location;$a=n[dc];if(1===Vc){$a.buffer||fa.enableVertexAttribArray(dc);Hc=gd||2;if($a.type!==cc||$a.size!==Hc||$a.buffer!==Bb||$a.normalized!==kc||$a.offset!==Fc||$a.stride!==Bc)fa.bindBuffer(34962,Bb.buffer),fa.vertexAttribPointer(dc,Hc,cc,kc,Bc,Fc),$a.type=cc,$a.size=Hc,$a.buffer=Bb,$a.normalized=kc,$a.offset=Fc,$a.stride=Bc;$a.divisor!==Ic&&(L.vertexAttribDivisorANGLE(dc,Ic),$a.divisor=Ic)}else if($a.buffer&&
(fa.disableVertexAttribArray(dc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==lc||$a.w!==Gc)fa.vertexAttrib4f(dc,oc,pc,lc,Gc),$a.x=oc,$a.y=pc,$a.z=lc,$a.w=Gc;yb=D.call(this,ba,d,0);Ia.offset=yb;cb=!1;Mb=null;ab=0;nb=!1;Lc=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=jb=Nb=0;Ea(Ia)?(cb=!0,Mb=H.createStream(34962,Ia),qc=Mb.dtype):(Mb=H.getBuffer(Ia))?qc=Mb.dtype:"constant"in Ia?(Hb=2,"number"===typeof Ia.constant?(jb=Ia.constant,Fb=Cb=Nb=0):(jb=0<Ia.constant.length?Ia.constant[0]:0,Fb=1<Ia.constant.length?Ia.constant[1]:
0,Cb=2<Ia.constant.length?Ia.constant[2]:0,Nb=3<Ia.constant.length?Ia.constant[3]:0)):(Mb=Ea(Ia.buffer)?H.createStream(34962,Ia.buffer):H.getBuffer(Ia.buffer),qc="type"in Ia?yd[Ia.type]:Mb.dtype,nb=!!Ia.normalized,Lc=Ia.size|0,Va=Ia.offset|0,Ib=Ia.stride|0,ab=Ia.divisor|0);wb=id.location;hb=n[wb];if(1===Hb){hb.buffer||fa.enableVertexAttribArray(wb);Yb=Lc||4;if(hb.type!==qc||hb.size!==Yb||hb.buffer!==Mb||hb.normalized!==nb||hb.offset!==Va||hb.stride!==Ib)fa.bindBuffer(34962,Mb.buffer),fa.vertexAttribPointer(wb,
Yb,qc,nb,Ib,Va),hb.type=qc,hb.size=Yb,hb.buffer=Mb,hb.normalized=nb,hb.offset=Va,hb.stride=Ib;hb.divisor!==ab&&(L.vertexAttribDivisorANGLE(wb,ab),hb.divisor=ab)}else if(hb.buffer&&(fa.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)fa.vertexAttrib4f(wb,jb,Fb,Cb,Nb),hb.x=jb,hb.y=Fb,hb.z=Cb,hb.w=Nb;Ob=F.call(this,ba,d,0);$b.offset=Ob;qb=!1;Ua=null;Tb=0;ob=!1;ib=hc=0;pb=1;Ja=0;rb=5126;Ma=fb=eb=La=0;Ea($b)?(qb=!0,Ua=H.createStream(34962,$b),rb=Ua.dtype):(Ua=H.getBuffer($b))?
rb=Ua.dtype:"constant"in $b?(pb=2,"number"===typeof $b.constant?(eb=$b.constant,fb=Ma=La=0):(eb=0<$b.constant.length?$b.constant[0]:0,fb=1<$b.constant.length?$b.constant[1]:0,Ma=2<$b.constant.length?$b.constant[2]:0,La=3<$b.constant.length?$b.constant[3]:0)):(Ua=Ea($b.buffer)?H.createStream(34962,$b.buffer):H.getBuffer($b.buffer),rb="type"in $b?yd[$b.type]:Ua.dtype,ob=!!$b.normalized,ib=$b.size|0,hc=$b.offset|0,Ja=$b.stride|0,Tb=$b.divisor|0);kb=z.location;Wa=n[kb];if(1===pb){Wa.buffer||fa.enableVertexAttribArray(kb);
tb=ib||4;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Ua||Wa.normalized!==ob||Wa.offset!==hc||Wa.stride!==Ja)fa.bindBuffer(34962,Ua.buffer),fa.vertexAttribPointer(kb,tb,rb,ob,Ja,hc),Wa.type=rb,Wa.size=tb,Wa.buffer=Ua,Wa.normalized=ob,Wa.offset=hc,Wa.stride=Ja;Wa.divisor!==Tb&&(L.vertexAttribDivisorANGLE(kb,Tb),Wa.divisor=Tb)}else if(Wa.buffer&&(fa.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==Ma||Wa.w!==La)fa.vertexAttrib4f(kb,eb,fb,Ma,La),Wa.x=eb,Wa.y=fb,Wa.z=Ma,Wa.w=La;
sb=ra.location;Pa=n[sb];Pa.buffer||fa.enableVertexAttribArray(sb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==U||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(sb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=U,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(L.vertexAttribDivisorANGLE(sb,0),Pa.divisor=0);Ac=X.location;Ra=n[Ac];Ra.buffer||fa.enableVertexAttribArray(Ac);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==w||!1!==Ra.normalized||
8!==Ra.offset||24!==Ra.stride)fa.bindBuffer(34962,w.buffer),fa.vertexAttribPointer(Ac,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=w,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(L.vertexAttribDivisorANGLE(Ac,0),Ra.divisor=0);Jb=b.location;Db=n[Jb];Db.buffer||fa.enableVertexAttribArray(Jb);if(5126!==Db.type||2!==Db.size||Db.buffer!==m||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(Jb,2,5126,!1,24,16),Db.type=5126,Db.size=2,
Db.buffer=m,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(L.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Na=r.call(this,ba,d,0);fa.uniform4f(na.location,Na[0],Na[1],Na[2],Na[3]);fa.uniform1f(ea.location,d.lineWidth);fa.uniform1f(xa.location,d.capSize);ia=d.scale;fa.uniform2f(l.location,ia[0],ia[1]);Ya=d.scaleFract;fa.uniform2f(M.location,Ya[0],Ya[1]);Kb=d.translate;fa.uniform2f(N.location,Kb[0],Kb[1]);Lb=d.translateFract;fa.uniform2f(wa.location,Lb[0],Lb[1]);fa.uniform1f(T.location,
d.opacity);(lb=la.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ba.currentVAO&&(lb=qa.getElements(Ba.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Oa=la.offset;Zb=d.count;0<Zb?lb?L.drawElementsInstancedANGLE(4,36,lb.type,Oa<<(lb.type-5121>>1),Zb):L.drawArraysInstancedANGLE(4,Oa,36,Zb):0>Zb&&(lb?fa.drawElements(4,36,lb.type,Oa<<(lb.type-5121>>1)):fa.drawArrays(4,Oa,36));O.dirty=!0;Ba.setVAO(null);ba.viewportWidth=p;ba.viewportHeight=h;E&&(Z.cpuTime+=performance.now()-J);G&&H.destroyStream(Q);
wc&&H.destroyStream(Bb);cb&&H.destroyStream(Mb);qb&&H.destroyStream(Ua)},scope:function(b,d,e){var k,l,g,n,a,v,I,q,h,K,z,sa,Ba,Ha,S,Xb,A,fa,ha,T,C,ja,N,E,J,Y,ua,M,ya,G,r,D,Q,Ga,B,ca,wa,qa,Ca,F,X,ta,ea,va,W,na,Gb,xa,ra,Da,ed,Fa,Ka,id,V,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,
Zc,Uc,dd,yc,jd,rd,xe,Be,kd,za,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd;k=b.viewport;l=k.x|0;g=k.y|0;n="width"in k?k.width|0:ba.framebufferWidth-l;a="height"in k?k.height|0:ba.framebufferHeight-g;v=ba.viewportWidth;ba.viewportWidth=n;I=ba.viewportHeight;ba.viewportHeight=a;q=gb[0];gb[0]=l;h=gb[1];gb[1]=g;K=gb[2];gb[2]=n;z=gb[3];gb[3]=a;sa=ma[0];ma[0]=0;Ba=ma[1];ma[1]=0;Ha=ma[2];ma[2]=0;S=ma[3];ma[3]=0;Xb=
ka.blend_enable;ka.blend_enable=!0;A=Ta[0];Ta[0]=32774;fa=Ta[1];Ta[1]=32774;ha=t[0];t[0]=770;T=t[1];t[1]=771;C=t[2];t[2]=773;ja=t[3];t[3]=1;N=ka.depth_enable;ka.depth_enable=!1;E=b.viewport;J=E.x|0;Y=E.y|0;ua="width"in E?E.width|0:ba.framebufferWidth-J;M="height"in E?E.height|0:ba.framebufferHeight-Y;ya=pa[0];pa[0]=J;G=pa[1];pa[1]=Y;r=pa[2];pa[2]=ua;D=pa[3];pa[3]=M;Q=ka.scissor_enable;ka.scissor_enable=!0;if(Ga=O.profile)B=performance.now(),Z.count++;ca=la.count;la.count=36;wa=b.count;qa=la.instances;
la.instances=wa;Ca=la.primitive;la.primitive=4;F=b.capSize;X=Aa[5];Aa[5]=F;ta=b.lineWidth;ea=Aa[4];Aa[4]=ta;va=b.opacity;W=Aa[10];Aa[10]=va;na=b.range;Gb=Aa[18];Aa[18]=na;xa=b.scale;ra=Aa[6];Aa[6]=xa;Da=b.scaleFract;ed=Aa[7];Aa[7]=Da;Fa=b.translate;Ka=Aa[8];Aa[8]=Fa;id=b.translateFract;V=Aa[9];Aa[9]=id;Hb=da.call(this,ba,b,e);Ib=Aa[3];Aa[3]=Hb;qc=u.buffer;u.buffer=m;Nb=u.divisor;u.divisor=0;jb=u.normalized;u.normalized=!1;Fb=u.offset;u.offset=16;Cb=u.size;u.size=0;wb=u.state;u.state=1;hb=u.stride;
u.stride=24;Yb=u.type;u.type=5126;Ob=u.w;u.w=0;qb=u.x;u.x=0;Ua=u.y;u.y=0;Tb=u.z;u.z=0;ob=P.call(this,ba,b,e);$b.offset=ob;hc=!1;ib=null;pb=0;Ja=!1;La=rb=0;eb=1;fb=0;Ma=5126;sb=tb=Wa=kb=0;Ea($b)?(hc=!0,ib=H.createStream(34962,$b),Ma=ib.dtype):(ib=H.getBuffer($b))?Ma=ib.dtype:"constant"in $b?(eb=2,"number"===typeof $b.constant?(Wa=$b.constant,tb=sb=kb=0):(Wa=0<$b.constant.length?$b.constant[0]:0,tb=1<$b.constant.length?$b.constant[1]:0,sb=2<$b.constant.length?$b.constant[2]:0,kb=3<$b.constant.length?
$b.constant[3]:0)):(ib=Ea($b.buffer)?H.createStream(34962,$b.buffer):H.getBuffer($b.buffer),Ma="type"in $b?yd[$b.type]:ib.dtype,Ja=!!$b.normalized,La=$b.size|0,rb=$b.offset|0,fb=$b.stride|0,pb=$b.divisor|0);Pa=x.buffer;x.buffer=ib;Ac=x.divisor;x.divisor=pb;Ra=x.normalized;x.normalized=Ja;Jb=x.offset;x.offset=rb;Db=x.size;x.size=La;Na=x.state;x.state=eb;ia=x.stride;x.stride=fb;Ya=x.type;x.type=Ma;Kb=x.w;x.w=kb;Lb=x.x;x.x=Wa;lb=x.y;x.y=tb;Oa=x.z;x.z=sb;Zb=R.buffer;R.buffer=U;Qa=R.divisor;R.divisor=
0;ub=R.normalized;R.normalized=!1;vb=R.offset;R.offset=0;Sa=R.size;R.size=0;mb=R.state;R.state=1;ec=R.stride;R.stride=24;Dc=R.type;R.type=5126;uc=R.w;R.w=0;bb=R.x;R.x=0;ic=R.y;R.y=0;ad=R.z;R.z=0;Xa=ga.call(this,ba,b,e);Ia.offset=Xa;Mc=!1;zb=null;Za=0;Ub=!1;Vb=sc=0;Pb=1;Jc=0;Qb=5126;Nc=Hd=Cc=qd=0;Ea(Ia)?(Mc=!0,zb=H.createStream(34962,Ia),Qb=zb.dtype):(zb=H.getBuffer(Ia))?Qb=zb.dtype:"constant"in Ia?(Pb=2,"number"===typeof Ia.constant?(Cc=Ia.constant,Hd=Nc=qd=0):(Cc=0<Ia.constant.length?Ia.constant[0]:
0,Hd=1<Ia.constant.length?Ia.constant[1]:0,Nc=2<Ia.constant.length?Ia.constant[2]:0,qd=3<Ia.constant.length?Ia.constant[3]:0)):(zb=Ea(Ia.buffer)?H.createStream(34962,Ia.buffer):H.getBuffer(Ia.buffer),Qb="type"in Ia?yd[Ia.type]:zb.dtype,Ub=!!Ia.normalized,Vb=Ia.size|0,sc=Ia.offset|0,Jc=Ia.stride|0,Za=Ia.divisor|0);Wc=c.buffer;c.buffer=zb;ud=c.divisor;c.divisor=Za;mc=c.normalized;c.normalized=Ub;vc=c.offset;c.offset=sc;fc=c.size;c.size=Vb;db=c.state;c.state=Pb;rc=c.stride;c.stride=Jc;Sb=c.type;c.type=
Qb;Wb=c.w;c.w=qd;bc=c.x;c.x=Cc;gc=c.y;c.y=Hd;xc=c.z;c.z=Nc;zc=f.buffer;f.buffer=w;bd=f.divisor;f.divisor=0;Qc=f.normalized;f.normalized=!1;Rc=f.offset;f.offset=8;Sc=f.size;f.size=0;Xc=f.state;f.state=1;wd=f.stride;f.stride=24;cd=f.type;f.type=5126;Yc=f.w;f.w=0;jc=f.x;f.x=0;ac=f.y;f.y=0;Zc=f.z;f.z=0;Uc=L.call(this,ba,b,e);nc.offset=Uc;dd=!1;yc=null;jd=0;rd=!1;Be=xe=0;kd=1;za=0;Nd=5126;Id=Od=de=Xd=0;Ea(nc)?(dd=!0,yc=H.createStream(34962,nc),Nd=yc.dtype):(yc=H.getBuffer(nc))?Nd=yc.dtype:"constant"in
nc?(kd=2,"number"===typeof nc.constant?(de=nc.constant,Od=Id=Xd=0):(de=0<nc.constant.length?nc.constant[0]:0,Od=1<nc.constant.length?nc.constant[1]:0,Id=2<nc.constant.length?nc.constant[2]:0,Xd=3<nc.constant.length?nc.constant[3]:0)):(yc=Ea(nc.buffer)?H.createStream(34962,nc.buffer):H.getBuffer(nc.buffer),Nd="type"in nc?yd[nc.type]:yc.dtype,rd=!!nc.normalized,Be=nc.size|0,xe=nc.offset|0,za=nc.stride|0,jd=nc.divisor|0);Fd=p.buffer;p.buffer=yc;od=p.divisor;p.divisor=jd;Tc=p.normalized;p.normalized=
rd;vd=p.offset;p.offset=xe;td=p.size;p.size=Be;ld=p.state;p.state=kd;xd=p.stride;p.stride=za;Bd=p.type;p.type=Nd;Dd=p.w;p.w=Xd;qe=p.x;p.x=de;le=p.y;p.y=Od;Ne=p.z;p.z=Id;me=aa.call(this,ba,b,e);Rb.offset=me;ke=!1;ie=null;ue=0;ee=!1;Oc=ne=0;hd=1;ve=0;re=5126;Sd=Rd=Pd=Jd=0;Ea(Rb)?(ke=!0,ie=H.createStream(34962,Rb),re=ie.dtype):(ie=H.getBuffer(Rb))?re=ie.dtype:"constant"in Rb?(hd=2,"number"===typeof Rb.constant?(Pd=Rb.constant,Rd=Sd=Jd=0):(Pd=0<Rb.constant.length?Rb.constant[0]:0,Rd=1<Rb.constant.length?
Rb.constant[1]:0,Sd=2<Rb.constant.length?Rb.constant[2]:0,Jd=3<Rb.constant.length?Rb.constant[3]:0)):(ie=Ea(Rb.buffer)?H.createStream(34962,Rb.buffer):H.getBuffer(Rb.buffer),re="type"in Rb?yd[Rb.type]:ie.dtype,ee=!!Rb.normalized,Oc=Rb.size|0,ne=Rb.offset|0,ve=Rb.stride|0,ue=Rb.divisor|0);oe=y.buffer;y.buffer=ie;ze=y.divisor;y.divisor=ue;Ce=y.normalized;y.normalized=ee;se=y.offset;y.offset=ne;Se=y.size;y.size=Oc;Te=y.state;y.state=hd;Oe=y.stride;y.stride=ve;we=y.type;y.type=re;Ge=y.w;y.w=Jd;Ie=y.x;
y.x=Pd;Je=y.y;y.y=Rd;Ke=y.z;y.z=Sd;He=oa.vert;oa.vert=2;Kd=oa.frag;oa.frag=1;O.dirty=!0;d(ba,b,e);ba.viewportWidth=v;ba.viewportHeight=I;gb[0]=q;gb[1]=h;gb[2]=K;gb[3]=z;ma[0]=sa;ma[1]=Ba;ma[2]=Ha;ma[3]=S;ka.blend_enable=Xb;Ta[0]=A;Ta[1]=fa;t[0]=ha;t[1]=T;t[2]=C;t[3]=ja;ka.depth_enable=N;pa[0]=ya;pa[1]=G;pa[2]=r;pa[3]=D;ka.scissor_enable=Q;Ga&&(Z.cpuTime+=performance.now()-B);la.count=ca;la.instances=qa;la.primitive=Ca;Aa[5]=X;Aa[4]=ea;Aa[10]=W;Aa[18]=Gb;Aa[6]=ra;Aa[7]=ed;Aa[8]=Ka;Aa[9]=V;Aa[3]=Ib;
u.buffer=qc;u.divisor=Nb;u.normalized=jb;u.offset=Fb;u.size=Cb;u.state=wb;u.stride=hb;u.type=Yb;u.w=Ob;u.x=qb;u.y=Ua;u.z=Tb;hc&&H.destroyStream(ib);x.buffer=Pa;x.divisor=Ac;x.normalized=Ra;x.offset=Jb;x.size=Db;x.state=Na;x.stride=ia;x.type=Ya;x.w=Kb;x.x=Lb;x.y=lb;x.z=Oa;R.buffer=Zb;R.divisor=Qa;R.normalized=ub;R.offset=vb;R.size=Sa;R.state=mb;R.stride=ec;R.type=Dc;R.w=uc;R.x=bb;R.y=ic;R.z=ad;Mc&&H.destroyStream(zb);c.buffer=Wc;c.divisor=ud;c.normalized=mc;c.offset=vc;c.size=fc;c.state=db;c.stride=
rc;c.type=Sb;c.w=Wb;c.x=bc;c.y=gc;c.z=xc;f.buffer=zc;f.divisor=bd;f.normalized=Qc;f.offset=Rc;f.size=Sc;f.state=Xc;f.stride=wd;f.type=cd;f.w=Yc;f.x=jc;f.y=ac;f.z=Zc;dd&&H.destroyStream(yc);p.buffer=Fd;p.divisor=od;p.normalized=Tc;p.offset=vd;p.size=td;p.state=ld;p.stride=xd;p.type=Bd;p.w=Dd;p.x=qe;p.y=le;p.z=Ne;ke&&H.destroyStream(ie);y.buffer=oe;y.divisor=ze;y.normalized=Ce;y.offset=se;y.size=Se;y.state=Te;y.stride=Oe;y.type=we;y.w=Ge;y.x=Ie;y.y=Je;y.z=Ke;oa.vert=He;oa.frag=Kd;O.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra){var id,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,ed,Gb,ha,I,sa,Ha,pa,ya,Ga,ja,Y;id=a.attributes;X=a.buffer;ea=a.context;T=a.current;S=a.draw;A=a.elements;l=a.extensions;M=a.framebuffer;N=a.gl;wa=a.isBufferArgs;na=a.next;n=a.shader;H=a.uniforms;ba=a.vao;O=na.blend_color;la=T.blend_color;qa=na.blend_equation;Da=T.blend_equation;Ca=na.blend_func;fa=T.blend_func;Ea=na.colorMask;ka=T.colorMask;
oa=na.depth_range;Aa=T.depth_range;Ba=na.polygonOffset_offset;ma=T.polygonOffset_offset;Xb=na.sample_coverage;Ta=T.sample_coverage;v=na.scissor_box;t=T.scissor_box;K=na.stencil_func;ua=T.stencil_func;va=na.stencil_opBack;ed=T.stencil_opBack;Gb=na.stencil_opFront;ha=T.stencil_opFront;I=na.viewport;sa=T.viewport;Ha={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};pa={divisor:1,offset:8,stride:8};ya={divisor:1,offset:8,stride:8};Ga={divisor:1,offset:16,stride:8};
ja={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(e,n){var a,v,I,q,H,O;a=M.next;a!==M.cur&&(a?N.bindFramebuffer(36160,a.framebuffer):N.bindFramebuffer(36160,null),M.cur=a);if(T.dirty){var u,m,J,w,G,r,D,B,qa,Ca,F,U,da,V,be,De,Ze,Re,Ed,Ae,te,Zd,Wd,ia,nd,$c,sd,Kc,pd,Ec,fd,Pc;u=na.dither;u!==T.dither&&(u?N.enable(3024):N.disable(3024),T.dither=u);m=na.depth_func;m!==T.depth_func&&(N.depthFunc(m),T.depth_func=m);J=oa[0];w=oa[1];if(J!==Aa[0]||w!==Aa[1])N.depthRange(J,
w),Aa[0]=J,Aa[1]=w;G=na.depth_mask;G!==T.depth_mask&&(N.depthMask(G),T.depth_mask=G);r=Ea[0];D=Ea[1];B=Ea[2];qa=Ea[3];if(r!==ka[0]||D!==ka[1]||B!==ka[2]||qa!==ka[3])N.colorMask(r,D,B,qa),ka[0]=r,ka[1]=D,ka[2]=B,ka[3]=qa;Ca=na.cull_enable;Ca!==T.cull_enable&&(Ca?N.enable(2884):N.disable(2884),T.cull_enable=Ca);F=na.cull_face;F!==T.cull_face&&(N.cullFace(F),T.cull_face=F);U=na.frontFace;U!==T.frontFace&&(N.frontFace(U),T.frontFace=U);da=na.lineWidth;da!==T.lineWidth&&(N.lineWidth(da),T.lineWidth=da);
V=na.polygonOffset_enable;V!==T.polygonOffset_enable&&(V?N.enable(32823):N.disable(32823),T.polygonOffset_enable=V);be=Ba[0];De=Ba[1];if(be!==ma[0]||De!==ma[1])N.polygonOffset(be,De),ma[0]=be,ma[1]=De;Ze=na.sample_alpha;Ze!==T.sample_alpha&&(Ze?N.enable(32926):N.disable(32926),T.sample_alpha=Ze);Re=na.sample_enable;Re!==T.sample_enable&&(Re?N.enable(32928):N.disable(32928),T.sample_enable=Re);Ed=Xb[0];Ae=Xb[1];if(Ed!==Ta[0]||Ae!==Ta[1])N.sampleCoverage(Ed,Ae),Ta[0]=Ed,Ta[1]=Ae;te=na.stencil_mask;
te!==T.stencil_mask&&(N.stencilMask(te),T.stencil_mask=te);Zd=K[0];Wd=K[1];ia=K[2];if(Zd!==ua[0]||Wd!==ua[1]||ia!==ua[2])N.stencilFunc(Zd,Wd,ia),ua[0]=Zd,ua[1]=Wd,ua[2]=ia;nd=Gb[0];$c=Gb[1];sd=Gb[2];Kc=Gb[3];if(nd!==ha[0]||$c!==ha[1]||sd!==ha[2]||Kc!==ha[3])N.stencilOpSeparate(nd,$c,sd,Kc),ha[0]=nd,ha[1]=$c,ha[2]=sd,ha[3]=Kc;pd=va[0];Ec=va[1];fd=va[2];Pc=va[3];if(pd!==ed[0]||Ec!==ed[1]||fd!==ed[2]||Pc!==ed[3])N.stencilOpSeparate(pd,Ec,fd,Pc),ed[0]=pd,ed[1]=Ec,ed[2]=fd,ed[3]=Pc}N.blendColor(0,0,0,
0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;N.enable(3042);T.blend_enable=!0;N.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;N.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;N.enable(3089);T.scissor_enable=!0;N.disable(2960);T.stencil_enable=!1;if(v=T.profile)I=performance.now(),Z.count+=n;N.useProgram(P.program);q=l.angle_instanced_arrays;var md,Ab,Eb,tc,xb;ba.setVAO(null);md=W.location;Ab=id[md];Ab.buffer||N.enableVertexAttribArray(md);if(5126!==Ab.type||1!==Ab.size||
Ab.buffer!==h||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)N.bindBuffer(34962,h.buffer),N.vertexAttribPointer(md,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=h,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(q.vertexAttribDivisorANGLE(md,0),Ab.divisor=0);Eb=C.location;tc=id[Eb];tc.buffer||N.enableVertexAttribArray(Eb);if(5126!==tc.type||1!==tc.size||tc.buffer!==k||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)N.bindBuffer(34962,k.buffer),N.vertexAttribPointer(Eb,1,5126,!1,8,4),
tc.type=5126,tc.size=1,tc.buffer=k,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(q.vertexAttribDivisorANGLE(Eb,0),tc.divisor=0);(xb=S.elements)?N.bindBuffer(34963,xb.buffer.buffer):ba.currentVAO&&(xb=A.getElements(ba.currentVAO.elements))&&N.bindBuffer(34963,xb.buffer.buffer);for(H=0;H<n;++H){O=e[H];var wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,
Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,za,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld;wc=O.viewport;Bb=wc.x|0;Ic=wc.y|0;kc="width"in wc?wc.width|0:ea.framebufferWidth-Bb;Fc="height"in wc?wc.height|0:ea.framebufferHeight-Ic;gd=ea.viewportWidth;ea.viewportWidth=kc;Vc=ea.viewportHeight;ea.viewportHeight=Fc;N.viewport(Bb,Ic,kc,Fc);sa[0]=Bb;sa[1]=Ic;sa[2]=kc;sa[3]=Fc;(Bc=x.call(this,
ea,O,H))?N.enable(2929):N.disable(2929);T.depth_enable=Bc;cc=O.viewport;Gc=cc.x|0;oc=cc.y|0;pc="width"in cc?cc.width|0:ea.framebufferWidth-Gc;lc="height"in cc?cc.height|0:ea.framebufferHeight-oc;N.scissor(Gc,oc,pc,lc);t[0]=Gc;t[1]=oc;t[2]=pc;t[3]=lc;pa.buffer=O.positionBuffer;dc=!1;$a=null;Hc=0;yb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=Lc=0;wa(pa)?(dc=!0,$a=X.createStream(34962,pa),Va=$a.dtype):($a=X.getBuffer(pa))?Va=$a.dtype:"constant"in pa?(ab=2,"number"===typeof pa.constant?(Hb=pa.constant,Ib=
qc=Lc=0):(Hb=0<pa.constant.length?pa.constant[0]:0,Ib=1<pa.constant.length?pa.constant[1]:0,qc=2<pa.constant.length?pa.constant[2]:0,Lc=3<pa.constant.length?pa.constant[3]:0)):($a=wa(pa.buffer)?X.createStream(34962,pa.buffer):X.getBuffer(pa.buffer),Va="type"in pa?Ha[pa.type]:$a.dtype,yb=!!pa.normalized,Mb=pa.size|0,cb=pa.offset|0,nb=pa.stride|0,Hc=pa.divisor|0);Nb=ga.location;jb=id[Nb];if(1===ab){jb.buffer||N.enableVertexAttribArray(Nb);Fb=Mb||2;if(jb.type!==Va||jb.size!==Fb||jb.buffer!==$a||jb.normalized!==
yb||jb.offset!==cb||jb.stride!==nb)N.bindBuffer(34962,$a.buffer),N.vertexAttribPointer(Nb,Fb,Va,yb,nb,cb),jb.type=Va,jb.size=Fb,jb.buffer=$a,jb.normalized=yb,jb.offset=cb,jb.stride=nb;jb.divisor!==Hc&&(q.vertexAttribDivisorANGLE(Nb,Hc),jb.divisor=Hc)}else if(jb.buffer&&(N.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==Ib||jb.z!==qc||jb.w!==Lc)N.vertexAttrib4f(Nb,Hb,Ib,qc,Lc),jb.x=Hb,jb.y=Ib,jb.z=qc,jb.w=Lc;Ga.buffer=O.positionBuffer;Cb=!1;wb=null;hb=0;Yb=!1;qb=Ob=0;Ua=1;Tb=0;ob=5126;
Ja=pb=ib=hc=0;wa(Ga)?(Cb=!0,wb=X.createStream(34962,Ga),ob=wb.dtype):(wb=X.getBuffer(Ga))?ob=wb.dtype:"constant"in Ga?(Ua=2,"number"===typeof Ga.constant?(ib=Ga.constant,pb=Ja=hc=0):(ib=0<Ga.constant.length?Ga.constant[0]:0,pb=1<Ga.constant.length?Ga.constant[1]:0,Ja=2<Ga.constant.length?Ga.constant[2]:0,hc=3<Ga.constant.length?Ga.constant[3]:0)):(wb=wa(Ga.buffer)?X.createStream(34962,Ga.buffer):X.getBuffer(Ga.buffer),ob="type"in Ga?Ha[Ga.type]:wb.dtype,Yb=!!Ga.normalized,qb=Ga.size|0,Ob=Ga.offset|
0,Tb=Ga.stride|0,hb=Ga.divisor|0);rb=f.location;La=id[rb];if(1===Ua){La.buffer||N.enableVertexAttribArray(rb);eb=qb||2;if(La.type!==ob||La.size!==eb||La.buffer!==wb||La.normalized!==Yb||La.offset!==Ob||La.stride!==Tb)N.bindBuffer(34962,wb.buffer),N.vertexAttribPointer(rb,eb,ob,Yb,Tb,Ob),La.type=ob,La.size=eb,La.buffer=wb,La.normalized=Yb,La.offset=Ob,La.stride=Tb;La.divisor!==hb&&(q.vertexAttribDivisorANGLE(rb,hb),La.divisor=hb)}else if(La.buffer&&(N.disableVertexAttribArray(rb),La.buffer=null),La.x!==
ib||La.y!==pb||La.z!==Ja||La.w!==hc)N.vertexAttrib4f(rb,ib,pb,Ja,hc),La.x=ib,La.y=pb,La.z=Ja,La.w=hc;ya.buffer=O.positionFractBuffer;fb=!1;Ma=null;kb=0;Wa=!1;sb=tb=0;Pa=1;Ac=0;Ra=5126;Qd=Na=Db=Jb=0;wa(ya)?(fb=!0,Ma=X.createStream(34962,ya),Ra=Ma.dtype):(Ma=X.getBuffer(ya))?Ra=Ma.dtype:"constant"in ya?(Pa=2,"number"===typeof ya.constant?(Db=ya.constant,Na=Qd=Jb=0):(Db=0<ya.constant.length?ya.constant[0]:0,Na=1<ya.constant.length?ya.constant[1]:0,Qd=2<ya.constant.length?ya.constant[2]:0,Jb=3<ya.constant.length?
ya.constant[3]:0)):(Ma=wa(ya.buffer)?X.createStream(34962,ya.buffer):X.getBuffer(ya.buffer),Ra="type"in ya?Ha[ya.type]:Ma.dtype,Wa=!!ya.normalized,sb=ya.size|0,tb=ya.offset|0,Ac=ya.stride|0,kb=ya.divisor|0);Ya=c.location;Kb=id[Ya];if(1===Pa){Kb.buffer||N.enableVertexAttribArray(Ya);Lb=sb||2;if(Kb.type!==Ra||Kb.size!==Lb||Kb.buffer!==Ma||Kb.normalized!==Wa||Kb.offset!==tb||Kb.stride!==Ac)N.bindBuffer(34962,Ma.buffer),N.vertexAttribPointer(Ya,Lb,Ra,Wa,Ac,tb),Kb.type=Ra,Kb.size=Lb,Kb.buffer=Ma,Kb.normalized=
Wa,Kb.offset=tb,Kb.stride=Ac;Kb.divisor!==kb&&(q.vertexAttribDivisorANGLE(Ya,kb),Kb.divisor=kb)}else if(Kb.buffer&&(N.disableVertexAttribArray(Ya),Kb.buffer=null),Kb.x!==Db||Kb.y!==Na||Kb.z!==Qd||Kb.w!==Jb)N.vertexAttrib4f(Ya,Db,Na,Qd,Jb),Kb.x=Db,Kb.y=Na,Kb.z=Qd,Kb.w=Jb;ja.buffer=O.positionFractBuffer;lb=!1;Oa=null;Zb=0;Qa=!1;vb=ub=0;Sa=1;mb=0;ec=5126;ic=bb=uc=Dc=0;wa(ja)?(lb=!0,Oa=X.createStream(34962,ja),ec=Oa.dtype):(Oa=X.getBuffer(ja))?ec=Oa.dtype:"constant"in ja?(Sa=2,"number"===typeof ja.constant?
(uc=ja.constant,bb=ic=Dc=0):(uc=0<ja.constant.length?ja.constant[0]:0,bb=1<ja.constant.length?ja.constant[1]:0,ic=2<ja.constant.length?ja.constant[2]:0,Dc=3<ja.constant.length?ja.constant[3]:0)):(Oa=wa(ja.buffer)?X.createStream(34962,ja.buffer):X.getBuffer(ja.buffer),ec="type"in ja?Ha[ja.type]:Oa.dtype,Qa=!!ja.normalized,vb=ja.size|0,ub=ja.offset|0,mb=ja.stride|0,Zb=ja.divisor|0);ad=L.location;Xa=id[ad];if(1===Sa){Xa.buffer||N.enableVertexAttribArray(ad);Mc=vb||2;if(Xa.type!==ec||Xa.size!==Mc||Xa.buffer!==
Oa||Xa.normalized!==Qa||Xa.offset!==ub||Xa.stride!==mb)N.bindBuffer(34962,Oa.buffer),N.vertexAttribPointer(ad,Mc,ec,Qa,mb,ub),Xa.type=ec,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=ub,Xa.stride=mb;Xa.divisor!==Zb&&(q.vertexAttribDivisorANGLE(ad,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(N.disableVertexAttribArray(ad),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==ic||Xa.w!==Dc)N.vertexAttrib4f(ad,uc,bb,ic,Dc),Xa.x=uc,Xa.y=bb,Xa.z=ic,Xa.w=Dc;Y.buffer=O.colorBuffer;zb=!1;Za=null;Ub=0;sc=!1;Pb=Vb=0;
Jc=1;Qb=0;qd=5126;Wc=Nc=Hd=Cc=0;wa(Y)?(zb=!0,Za=X.createStream(34962,Y),qd=Za.dtype):(Za=X.getBuffer(Y))?qd=Za.dtype:"constant"in Y?(Jc=2,"number"===typeof Y.constant?(Hd=Y.constant,Nc=Wc=Cc=0):(Hd=0<Y.constant.length?Y.constant[0]:0,Nc=1<Y.constant.length?Y.constant[1]:0,Wc=2<Y.constant.length?Y.constant[2]:0,Cc=3<Y.constant.length?Y.constant[3]:0)):(Za=wa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),qd="type"in Y?Ha[Y.type]:Za.dtype,sc=!!Y.normalized,Pb=Y.size|0,Vb=Y.offset|0,
Qb=Y.stride|0,Ub=Y.divisor|0);ud=p.location;mc=id[ud];if(1===Jc){mc.buffer||N.enableVertexAttribArray(ud);vc=Pb||4;if(mc.type!==qd||mc.size!==vc||mc.buffer!==Za||mc.normalized!==sc||mc.offset!==Vb||mc.stride!==Qb)N.bindBuffer(34962,Za.buffer),N.vertexAttribPointer(ud,vc,qd,sc,Qb,Vb),mc.type=qd,mc.size=vc,mc.buffer=Za,mc.normalized=sc,mc.offset=Vb,mc.stride=Qb;mc.divisor!==Ub&&(q.vertexAttribDivisorANGLE(ud,Ub),mc.divisor=Ub)}else if(mc.buffer&&(N.disableVertexAttribArray(ud),mc.buffer=null),mc.x!==
Hd||mc.y!==Nc||mc.z!==Wc||mc.w!==Cc)N.vertexAttrib4f(ud,Hd,Nc,Wc,Cc),mc.x=Hd,mc.y=Nc,mc.z=Wc,mc.w=Cc;fc=O.scale;db=fc[0];Sb=fc[1];H&&rc===db&&Wb===Sb||(rc=db,Wb=Sb,N.uniform2f(d.location,db,Sb));bc=O.scaleFract;gc=bc[0];zc=bc[1];H&&xc===gc&&bd===zc||(xc=gc,bd=zc,N.uniform2f(Q.location,gc,zc));Qc=O.translate;Rc=Qc[0];Xc=Qc[1];H&&Sc===Rc&&wd===Xc||(Sc=Rc,wd=Xc,N.uniform2f(xa.location,Rc,Xc));cd=O.translateFract;Yc=cd[0];ac=cd[1];H&&jc===Yc&&Zc===ac||(jc=Yc,Zc=ac,N.uniform2f(z.location,Yc,ac));Uc=O.thickness;
H&&dd===Uc||(dd=Uc,N.uniform1f(b.location,Uc));yc=O.depth;H&&jd===yc||(jd=yc,N.uniform1f(g.location,yc));rd=R.call(this,ea,O,H);xe=rd[0];kd=rd[1];Nd=rd[2];de=rd[3];H&&Be===xe&&za===kd&&Xd===Nd&&Od===de||(Be=xe,za=kd,Xd=Nd,Od=de,N.uniform4f(ra.location,xe,kd,Nd,de));Id=O.dashLength;H&&Fd===Id||(Fd=Id,N.uniform1f(aa.location,Id));od=O.opacity;H&&Tc===od||(Tc=od,N.uniform1f(E.location,od));(vd=O.dashTexture)&&"framebuffer"===vd._reglType&&(vd=vd.color[0]);td=vd._texture;N.uniform1i(y.location,td.bind());
ld=O.count;0<ld?xb?q.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),ld):q.drawArraysInstancedANGLE(5,0,4,ld):0>ld&&(xb?N.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):N.drawArrays(5,0,4));ea.viewportWidth=gd;ea.viewportHeight=Vc;dc&&X.destroyStream($a);Cb&&X.destroyStream(wb);fb&&X.destroyStream(Ma);lb&&X.destroyStream(Oa);zb&&X.destroyStream(Za);td.unbind()}T.dirty=!0;ba.setVAO(null);v&&(Z.cpuTime+=performance.now()-I)},draw:function(e){var n,a,v,I,H,O,u,m,w,x,r,D,B,R,qa,Ca,P,F,U,da,
V,be,De,Ze,Re,Ed,Ae,te,Zd,Wd,ia,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub;n=M.next;n!==M.cur&&(n?N.bindFramebuffer(36160,n.framebuffer):N.bindFramebuffer(36160,null),M.cur=n);if(T.dirty){var vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb;vb=na.dither;vb!==T.dither&&
(vb?N.enable(3024):N.disable(3024),T.dither=vb);Sa=na.depth_func;Sa!==T.depth_func&&(N.depthFunc(Sa),T.depth_func=Sa);mb=oa[0];ec=oa[1];if(mb!==Aa[0]||ec!==Aa[1])N.depthRange(mb,ec),Aa[0]=mb,Aa[1]=ec;Dc=na.depth_mask;Dc!==T.depth_mask&&(N.depthMask(Dc),T.depth_mask=Dc);uc=Ea[0];bb=Ea[1];ic=Ea[2];ad=Ea[3];if(uc!==ka[0]||bb!==ka[1]||ic!==ka[2]||ad!==ka[3])N.colorMask(uc,bb,ic,ad),ka[0]=uc,ka[1]=bb,ka[2]=ic,ka[3]=ad;Xa=na.cull_enable;Xa!==T.cull_enable&&(Xa?N.enable(2884):N.disable(2884),T.cull_enable=
Xa);Mc=na.cull_face;Mc!==T.cull_face&&(N.cullFace(Mc),T.cull_face=Mc);zb=na.frontFace;zb!==T.frontFace&&(N.frontFace(zb),T.frontFace=zb);Za=na.lineWidth;Za!==T.lineWidth&&(N.lineWidth(Za),T.lineWidth=Za);Ub=na.polygonOffset_enable;Ub!==T.polygonOffset_enable&&(Ub?N.enable(32823):N.disable(32823),T.polygonOffset_enable=Ub);sc=Ba[0];Vb=Ba[1];if(sc!==ma[0]||Vb!==ma[1])N.polygonOffset(sc,Vb),ma[0]=sc,ma[1]=Vb;Pb=na.sample_alpha;Pb!==T.sample_alpha&&(Pb?N.enable(32926):N.disable(32926),T.sample_alpha=
Pb);Jc=na.sample_enable;Jc!==T.sample_enable&&(Jc?N.enable(32928):N.disable(32928),T.sample_enable=Jc);Qb=Xb[0];qd=Xb[1];if(Qb!==Ta[0]||qd!==Ta[1])N.sampleCoverage(Qb,qd),Ta[0]=Qb,Ta[1]=qd;Cc=na.stencil_mask;Cc!==T.stencil_mask&&(N.stencilMask(Cc),T.stencil_mask=Cc);Hd=K[0];Nc=K[1];Wc=K[2];if(Hd!==ua[0]||Nc!==ua[1]||Wc!==ua[2])N.stencilFunc(Hd,Nc,Wc),ua[0]=Hd,ua[1]=Nc,ua[2]=Wc;ud=Gb[0];mc=Gb[1];vc=Gb[2];fc=Gb[3];if(ud!==ha[0]||mc!==ha[1]||vc!==ha[2]||fc!==ha[3])N.stencilOpSeparate(ud,mc,vc,fc),ha[0]=
ud,ha[1]=mc,ha[2]=vc,ha[3]=fc;db=va[0];rc=va[1];Sb=va[2];Wb=va[3];if(db!==ed[0]||rc!==ed[1]||Sb!==ed[2]||Wb!==ed[3])N.stencilOpSeparate(db,rc,Sb,Wb),ed[0]=db,ed[1]=rc,ed[2]=Sb,ed[3]=Wb}a=e.viewport;v=a.x|0;I=a.y|0;H="width"in a?a.width|0:ea.framebufferWidth-v;O="height"in a?a.height|0:ea.framebufferHeight-I;u=ea.viewportWidth;ea.viewportWidth=H;m=ea.viewportHeight;ea.viewportHeight=O;N.viewport(v,I,H,O);sa[0]=v;sa[1]=I;sa[2]=H;sa[3]=O;N.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;N.enable(3042);
T.blend_enable=!0;N.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;N.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(w=G.call(this,ea,e,0))?N.enable(2929):N.disable(2929);T.depth_enable=w;x=e.viewport;r=x.x|0;D=x.y|0;B="width"in x?x.width|0:ea.framebufferWidth-r;R="height"in x?x.height|0:ea.framebufferHeight-D;N.scissor(r,D,B,R);t[0]=r;t[1]=D;t[2]=B;t[3]=R;N.enable(3089);T.scissor_enable=!0;N.disable(2960);T.stencil_enable=!1;if(qa=T.profile)Ca=performance.now(),
Z.count++;N.useProgram(J.program);P=l.angle_instanced_arrays;ba.setVAO(null);pa.buffer=e.positionBuffer;F=!1;U=null;da=0;V=!1;De=be=0;Ze=1;Re=0;Ed=5126;Wd=Zd=te=Ae=0;wa(pa)?(F=!0,U=X.createStream(34962,pa),Ed=U.dtype):(U=X.getBuffer(pa))?Ed=U.dtype:"constant"in pa?(Ze=2,"number"===typeof pa.constant?(te=pa.constant,Zd=Wd=Ae=0):(te=0<pa.constant.length?pa.constant[0]:0,Zd=1<pa.constant.length?pa.constant[1]:0,Wd=2<pa.constant.length?pa.constant[2]:0,Ae=3<pa.constant.length?pa.constant[3]:0)):(U=wa(pa.buffer)?
X.createStream(34962,pa.buffer):X.getBuffer(pa.buffer),Ed="type"in pa?Ha[pa.type]:U.dtype,V=!!pa.normalized,De=pa.size|0,be=pa.offset|0,Re=pa.stride|0,da=pa.divisor|0);ia=ga.location;nd=id[ia];if(1===Ze){nd.buffer||N.enableVertexAttribArray(ia);$c=De||2;if(nd.type!==Ed||nd.size!==$c||nd.buffer!==U||nd.normalized!==V||nd.offset!==be||nd.stride!==Re)N.bindBuffer(34962,U.buffer),N.vertexAttribPointer(ia,$c,Ed,V,Re,be),nd.type=Ed,nd.size=$c,nd.buffer=U,nd.normalized=V,nd.offset=be,nd.stride=Re;nd.divisor!==
da&&(P.vertexAttribDivisorANGLE(ia,da),nd.divisor=da)}else if(nd.buffer&&(N.disableVertexAttribArray(ia),nd.buffer=null),nd.x!==te||nd.y!==Zd||nd.z!==Wd||nd.w!==Ae)N.vertexAttrib4f(ia,te,Zd,Wd,Ae),nd.x=te,nd.y=Zd,nd.z=Wd,nd.w=Ae;Ga.buffer=e.positionBuffer;sd=!1;Kc=null;pd=0;Ec=!1;Pc=fd=0;md=1;Ab=0;Eb=5126;Bb=wc=xb=tc=0;wa(Ga)?(sd=!0,Kc=X.createStream(34962,Ga),Eb=Kc.dtype):(Kc=X.getBuffer(Ga))?Eb=Kc.dtype:"constant"in Ga?(md=2,"number"===typeof Ga.constant?(xb=Ga.constant,wc=Bb=tc=0):(xb=0<Ga.constant.length?
Ga.constant[0]:0,wc=1<Ga.constant.length?Ga.constant[1]:0,Bb=2<Ga.constant.length?Ga.constant[2]:0,tc=3<Ga.constant.length?Ga.constant[3]:0)):(Kc=wa(Ga.buffer)?X.createStream(34962,Ga.buffer):X.getBuffer(Ga.buffer),Eb="type"in Ga?Ha[Ga.type]:Kc.dtype,Ec=!!Ga.normalized,Pc=Ga.size|0,fd=Ga.offset|0,Ab=Ga.stride|0,pd=Ga.divisor|0);Ic=f.location;kc=id[Ic];if(1===md){kc.buffer||N.enableVertexAttribArray(Ic);Fc=Pc||2;if(kc.type!==Eb||kc.size!==Fc||kc.buffer!==Kc||kc.normalized!==Ec||kc.offset!==fd||kc.stride!==
Ab)N.bindBuffer(34962,Kc.buffer),N.vertexAttribPointer(Ic,Fc,Eb,Ec,Ab,fd),kc.type=Eb,kc.size=Fc,kc.buffer=Kc,kc.normalized=Ec,kc.offset=fd,kc.stride=Ab;kc.divisor!==pd&&(P.vertexAttribDivisorANGLE(Ic,pd),kc.divisor=pd)}else if(kc.buffer&&(N.disableVertexAttribArray(Ic),kc.buffer=null),kc.x!==xb||kc.y!==wc||kc.z!==Bb||kc.w!==tc)N.vertexAttrib4f(Ic,xb,wc,Bb,tc),kc.x=xb,kc.y=wc,kc.z=Bb,kc.w=tc;ya.buffer=e.positionFractBuffer;gd=!1;Vc=null;Bc=0;cc=!1;oc=Gc=0;pc=1;lc=0;dc=5126;cb=yb=Hc=$a=0;wa(ya)?(gd=
!0,Vc=X.createStream(34962,ya),dc=Vc.dtype):(Vc=X.getBuffer(ya))?dc=Vc.dtype:"constant"in ya?(pc=2,"number"===typeof ya.constant?(Hc=ya.constant,yb=cb=$a=0):(Hc=0<ya.constant.length?ya.constant[0]:0,yb=1<ya.constant.length?ya.constant[1]:0,cb=2<ya.constant.length?ya.constant[2]:0,$a=3<ya.constant.length?ya.constant[3]:0)):(Vc=wa(ya.buffer)?X.createStream(34962,ya.buffer):X.getBuffer(ya.buffer),dc="type"in ya?Ha[ya.type]:Vc.dtype,cc=!!ya.normalized,oc=ya.size|0,Gc=ya.offset|0,lc=ya.stride|0,Bc=ya.divisor|
0);Mb=c.location;ab=id[Mb];if(1===pc){ab.buffer||N.enableVertexAttribArray(Mb);nb=oc||2;if(ab.type!==dc||ab.size!==nb||ab.buffer!==Vc||ab.normalized!==cc||ab.offset!==Gc||ab.stride!==lc)N.bindBuffer(34962,Vc.buffer),N.vertexAttribPointer(Mb,nb,dc,cc,lc,Gc),ab.type=dc,ab.size=nb,ab.buffer=Vc,ab.normalized=cc,ab.offset=Gc,ab.stride=lc;ab.divisor!==Bc&&(P.vertexAttribDivisorANGLE(Mb,Bc),ab.divisor=Bc)}else if(ab.buffer&&(N.disableVertexAttribArray(Mb),ab.buffer=null),ab.x!==Hc||ab.y!==yb||ab.z!==cb||
ab.w!==$a)N.vertexAttrib4f(Mb,Hc,yb,cb,$a),ab.x=Hc,ab.y=yb,ab.z=cb,ab.w=$a;ja.buffer=e.positionFractBuffer;Va=!1;Lc=null;Hb=0;Ib=!1;Nb=qc=0;jb=1;Fb=0;Cb=5126;Ob=Yb=hb=wb=0;wa(ja)?(Va=!0,Lc=X.createStream(34962,ja),Cb=Lc.dtype):(Lc=X.getBuffer(ja))?Cb=Lc.dtype:"constant"in ja?(jb=2,"number"===typeof ja.constant?(hb=ja.constant,Yb=Ob=wb=0):(hb=0<ja.constant.length?ja.constant[0]:0,Yb=1<ja.constant.length?ja.constant[1]:0,Ob=2<ja.constant.length?ja.constant[2]:0,wb=3<ja.constant.length?ja.constant[3]:
0)):(Lc=wa(ja.buffer)?X.createStream(34962,ja.buffer):X.getBuffer(ja.buffer),Cb="type"in ja?Ha[ja.type]:Lc.dtype,Ib=!!ja.normalized,Nb=ja.size|0,qc=ja.offset|0,Fb=ja.stride|0,Hb=ja.divisor|0);qb=L.location;Ua=id[qb];if(1===jb){Ua.buffer||N.enableVertexAttribArray(qb);Tb=Nb||2;if(Ua.type!==Cb||Ua.size!==Tb||Ua.buffer!==Lc||Ua.normalized!==Ib||Ua.offset!==qc||Ua.stride!==Fb)N.bindBuffer(34962,Lc.buffer),N.vertexAttribPointer(qb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=Tb,Ua.buffer=Lc,Ua.normalized=Ib,Ua.offset=
qc,Ua.stride=Fb;Ua.divisor!==Hb&&(P.vertexAttribDivisorANGLE(qb,Hb),Ua.divisor=Hb)}else if(Ua.buffer&&(N.disableVertexAttribArray(qb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Yb||Ua.z!==Ob||Ua.w!==wb)N.vertexAttrib4f(qb,hb,Yb,Ob,wb),Ua.x=hb,Ua.y=Yb,Ua.z=Ob,Ua.w=wb;Y.buffer=e.colorBuffer;ob=!1;hc=null;ib=0;pb=!1;rb=Ja=0;La=1;eb=0;fb=5126;tb=Wa=kb=Ma=0;wa(Y)?(ob=!0,hc=X.createStream(34962,Y),fb=hc.dtype):(hc=X.getBuffer(Y))?fb=hc.dtype:"constant"in Y?(La=2,"number"===typeof Y.constant?(kb=Y.constant,Wa=tb=
Ma=0):(kb=0<Y.constant.length?Y.constant[0]:0,Wa=1<Y.constant.length?Y.constant[1]:0,tb=2<Y.constant.length?Y.constant[2]:0,Ma=3<Y.constant.length?Y.constant[3]:0)):(hc=wa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),fb="type"in Y?Ha[Y.type]:hc.dtype,pb=!!Y.normalized,rb=Y.size|0,Ja=Y.offset|0,eb=Y.stride|0,ib=Y.divisor|0);sb=p.location;Pa=id[sb];if(1===La){Pa.buffer||N.enableVertexAttribArray(sb);Ac=rb||4;if(Pa.type!==fb||Pa.size!==Ac||Pa.buffer!==hc||Pa.normalized!==pb||Pa.offset!==
Ja||Pa.stride!==eb)N.bindBuffer(34962,hc.buffer),N.vertexAttribPointer(sb,Ac,fb,pb,eb,Ja),Pa.type=fb,Pa.size=Ac,Pa.buffer=hc,Pa.normalized=pb,Pa.offset=Ja,Pa.stride=eb;Pa.divisor!==ib&&(P.vertexAttribDivisorANGLE(sb,ib),Pa.divisor=ib)}else if(Pa.buffer&&(N.disableVertexAttribArray(sb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==tb||Pa.w!==Ma)N.vertexAttrib4f(sb,kb,Wa,tb,Ma),Pa.x=kb,Pa.y=Wa,Pa.z=tb,Pa.w=Ma;Ra=W.location;Jb=id[Ra];Jb.buffer||N.enableVertexAttribArray(Ra);if(5126!==Jb.type||1!==Jb.size||
Jb.buffer!==h||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)N.bindBuffer(34962,h.buffer),N.vertexAttribPointer(Ra,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=h,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(P.vertexAttribDivisorANGLE(Ra,0),Jb.divisor=0);Db=C.location;Na=id[Db];Na.buffer||N.enableVertexAttribArray(Db);if(5126!==Na.type||1!==Na.size||Na.buffer!==k||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)N.bindBuffer(34962,k.buffer),N.vertexAttribPointer(Db,1,5126,!1,8,4),
Na.type=5126,Na.size=1,Na.buffer=k,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(P.vertexAttribDivisorANGLE(Db,0),Na.divisor=0);Qd=e.scale;N.uniform2f(d.location,Qd[0],Qd[1]);Ya=e.scaleFract;N.uniform2f(Q.location,Ya[0],Ya[1]);Kb=e.translate;N.uniform2f(xa.location,Kb[0],Kb[1]);Lb=e.translateFract;N.uniform2f(z.location,Lb[0],Lb[1]);N.uniform1f(b.location,e.thickness);N.uniform1f(g.location,e.depth);lb=q.call(this,ea,e,0);N.uniform4f(ra.location,lb[0],lb[1],lb[2],lb[3]);N.uniform1f(aa.location,
e.dashLength);N.uniform1f(E.location,e.opacity);(Oa=e.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);Zb=Oa._texture;N.uniform1i(y.location,Zb.bind());(Qa=S.elements)?N.bindBuffer(34963,Qa.buffer.buffer):ba.currentVAO&&(Qa=A.getElements(ba.currentVAO.elements))&&N.bindBuffer(34963,Qa.buffer.buffer);ub=e.count;0<ub?Qa?P.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),ub):P.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Qa?N.drawElements(5,4,Qa.type,0<<(Qa.type-5121>>1)):N.drawArrays(5,
0,4));T.dirty=!0;ba.setVAO(null);ea.viewportWidth=u;ea.viewportHeight=m;qa&&(Z.cpuTime+=performance.now()-Ca);F&&X.destroyStream(U);sd&&X.destroyStream(Kc);gd&&X.destroyStream(Vc);Va&&X.destroyStream(Lc);ob&&X.destroyStream(hc);Zb.unbind()},scope:function(b,d,c){var f,l,g,a,t,q,p,K,ma,y,z,sa,Ba,Xb,A,fa,ha,C,N,E,J,ua,L,x,M,ba,G,Q,R,P,ka,Ta,aa,ga,Aa,oa,va,Ea,W,Gb,la,xa,ra,Da,ed,id,V,ia,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,
eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,za,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe;f=b.viewport;l=f.x|0;g=f.y|0;a="width"in f?f.width|0:ea.framebufferWidth-l;t="height"in f?f.height|
0:ea.framebufferHeight-g;q=ea.viewportWidth;ea.viewportWidth=a;p=ea.viewportHeight;ea.viewportHeight=t;K=I[0];I[0]=l;ma=I[1];I[1]=g;y=I[2];I[2]=a;z=I[3];I[3]=t;sa=O[0];O[0]=0;Ba=O[1];O[1]=0;Xb=O[2];O[2]=0;A=O[3];O[3]=0;fa=na.blend_enable;na.blend_enable=!0;ha=qa[0];qa[0]=32774;C=qa[1];qa[1]=32774;N=Ca[0];Ca[0]=770;E=Ca[1];Ca[1]=771;J=Ca[2];Ca[2]=773;ua=Ca[3];Ca[3]=1;L=e.call(this,ea,b,c);x=na.depth_enable;na.depth_enable=L;M=b.viewport;ba=M.x|0;G=M.y|0;Q="width"in M?M.width|0:ea.framebufferWidth-
ba;R="height"in M?M.height|0:ea.framebufferHeight-G;P=v[0];v[0]=ba;ka=v[1];v[1]=G;Ta=v[2];v[2]=Q;aa=v[3];v[3]=R;ga=na.scissor_enable;na.scissor_enable=!0;Aa=na.stencil_enable;na.stencil_enable=!1;if(oa=T.profile)va=performance.now(),Z.count++;Ea=S.offset;S.offset=0;W=S.count;S.count=4;Gb=b.count;la=S.instances;S.instances=Gb;xa=S.primitive;S.primitive=5;ra=b.dashLength;Da=H[23];H[23]=ra;ed=b.dashTexture;id=H[24];H[24]=ed;V=b.depth;ia=H[22];H[22]=V;Vc=b.id;Bc=H[31];H[31]=Vc;cc=b.miterLimit;Gc=H[32];
H[32]=cc;oc=B.call(this,ea,b,c);pc=H[33];H[33]=oc;lc=b.opacity;dc=H[10];H[10]=lc;$a=ea.pixelRatio;Hc=H[34];H[34]=$a;yb=b.scale;cb=H[6];H[6]=yb;Mb=b.scaleFract;ab=H[7];H[7]=Mb;nb=b.thickness;Va=H[21];H[21]=nb;Lc=b.translate;Hb=H[8];H[8]=Lc;Ib=b.translateFract;qc=H[9];H[9]=Ib;Nb=D.call(this,ea,b,c);jb=H[3];H[3]=Nb;pa.buffer=b.positionBuffer;Fb=!1;Cb=null;wb=0;hb=!1;Ob=Yb=0;qb=1;Ua=0;Tb=5126;pb=ib=hc=ob=0;wa(pa)?(Fb=!0,Cb=X.createStream(34962,pa),Tb=Cb.dtype):(Cb=X.getBuffer(pa))?Tb=Cb.dtype:"constant"in
pa?(qb=2,"number"===typeof pa.constant?(hc=pa.constant,ib=pb=ob=0):(hc=0<pa.constant.length?pa.constant[0]:0,ib=1<pa.constant.length?pa.constant[1]:0,pb=2<pa.constant.length?pa.constant[2]:0,ob=3<pa.constant.length?pa.constant[3]:0)):(Cb=wa(pa.buffer)?X.createStream(34962,pa.buffer):X.getBuffer(pa.buffer),Tb="type"in pa?Ha[pa.type]:Cb.dtype,hb=!!pa.normalized,Ob=pa.size|0,Yb=pa.offset|0,Ua=pa.stride|0,wb=pa.divisor|0);Ja=F.buffer;F.buffer=Cb;rb=F.divisor;F.divisor=wb;La=F.normalized;F.normalized=
hb;eb=F.offset;F.offset=Yb;fb=F.size;F.size=Ob;Ma=F.state;F.state=qb;kb=F.stride;F.stride=Ua;Wa=F.type;F.type=Tb;tb=F.w;F.w=ob;sb=F.x;F.x=hc;Pa=F.y;F.y=ib;Ac=F.z;F.z=pb;ya.buffer=b.positionFractBuffer;Ra=!1;Jb=null;Db=0;Na=!1;Ya=Qd=0;Kb=1;Lb=0;lb=5126;ub=Qa=Zb=Oa=0;wa(ya)?(Ra=!0,Jb=X.createStream(34962,ya),lb=Jb.dtype):(Jb=X.getBuffer(ya))?lb=Jb.dtype:"constant"in ya?(Kb=2,"number"===typeof ya.constant?(Zb=ya.constant,Qa=ub=Oa=0):(Zb=0<ya.constant.length?ya.constant[0]:0,Qa=1<ya.constant.length?ya.constant[1]:
0,ub=2<ya.constant.length?ya.constant[2]:0,Oa=3<ya.constant.length?ya.constant[3]:0)):(Jb=wa(ya.buffer)?X.createStream(34962,ya.buffer):X.getBuffer(ya.buffer),lb="type"in ya?Ha[ya.type]:Jb.dtype,Na=!!ya.normalized,Ya=ya.size|0,Qd=ya.offset|0,Lb=ya.stride|0,Db=ya.divisor|0);vb=U.buffer;U.buffer=Jb;Sa=U.divisor;U.divisor=Db;mb=U.normalized;U.normalized=Na;ec=U.offset;U.offset=Qd;Dc=U.size;U.size=Ya;uc=U.state;U.state=Kb;bb=U.stride;U.stride=Lb;ic=U.type;U.type=lb;ad=U.w;U.w=Oa;Xa=U.x;U.x=Zb;Mc=U.y;
U.y=Qa;zb=U.z;U.z=ub;Ga.buffer=b.positionBuffer;Za=!1;Ub=null;sc=0;Vb=!1;Jc=Pb=0;Qb=1;qd=0;Cc=5126;ud=Wc=Nc=Hd=0;wa(Ga)?(Za=!0,Ub=X.createStream(34962,Ga),Cc=Ub.dtype):(Ub=X.getBuffer(Ga))?Cc=Ub.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Nc=Ga.constant,Wc=ud=Hd=0):(Nc=0<Ga.constant.length?Ga.constant[0]:0,Wc=1<Ga.constant.length?Ga.constant[1]:0,ud=2<Ga.constant.length?Ga.constant[2]:0,Hd=3<Ga.constant.length?Ga.constant[3]:0)):(Ub=wa(Ga.buffer)?X.createStream(34962,Ga.buffer):X.getBuffer(Ga.buffer),
Cc="type"in Ga?Ha[Ga.type]:Ub.dtype,Vb=!!Ga.normalized,Jc=Ga.size|0,Pb=Ga.offset|0,qd=Ga.stride|0,sc=Ga.divisor|0);mc=w.buffer;w.buffer=Ub;vc=w.divisor;w.divisor=sc;fc=w.normalized;w.normalized=Vb;db=w.offset;w.offset=Pb;rc=w.size;w.size=Jc;Sb=w.state;w.state=Qb;Wb=w.stride;w.stride=qd;bc=w.type;w.type=Cc;gc=w.w;w.w=Hd;xc=w.x;w.x=Nc;zc=w.y;w.y=Wc;bd=w.z;w.z=ud;ja.buffer=b.positionFractBuffer;Qc=!1;Rc=null;Sc=0;Xc=!1;cd=wd=0;Yc=1;jc=0;ac=5126;yc=dd=Uc=Zc=0;wa(ja)?(Qc=!0,Rc=X.createStream(34962,ja),
ac=Rc.dtype):(Rc=X.getBuffer(ja))?ac=Rc.dtype:"constant"in ja?(Yc=2,"number"===typeof ja.constant?(Uc=ja.constant,dd=yc=Zc=0):(Uc=0<ja.constant.length?ja.constant[0]:0,dd=1<ja.constant.length?ja.constant[1]:0,yc=2<ja.constant.length?ja.constant[2]:0,Zc=3<ja.constant.length?ja.constant[3]:0)):(Rc=wa(ja.buffer)?X.createStream(34962,ja.buffer):X.getBuffer(ja.buffer),ac="type"in ja?Ha[ja.type]:Rc.dtype,Xc=!!ja.normalized,cd=ja.size|0,wd=ja.offset|0,jc=ja.stride|0,Sc=ja.divisor|0);jd=m.buffer;m.buffer=
Rc;rd=m.divisor;m.divisor=Sc;xe=m.normalized;m.normalized=Xc;Be=m.offset;m.offset=wd;kd=m.size;m.size=cd;za=m.state;m.state=Yc;Nd=m.stride;m.stride=jc;Xd=m.type;m.type=ac;de=m.w;m.w=Zc;Od=m.x;m.x=Uc;Id=m.y;m.y=dd;Fd=m.z;m.z=yc;Y.buffer=b.colorBuffer;od=!1;Tc=null;vd=0;td=!1;xd=ld=0;Bd=1;Dd=0;qe=5126;ke=me=Ne=le=0;wa(Y)?(od=!0,Tc=X.createStream(34962,Y),qe=Tc.dtype):(Tc=X.getBuffer(Y))?qe=Tc.dtype:"constant"in Y?(Bd=2,"number"===typeof Y.constant?(Ne=Y.constant,me=ke=le=0):(Ne=0<Y.constant.length?
Y.constant[0]:0,me=1<Y.constant.length?Y.constant[1]:0,ke=2<Y.constant.length?Y.constant[2]:0,le=3<Y.constant.length?Y.constant[3]:0)):(Tc=wa(Y.buffer)?X.createStream(34962,Y.buffer):X.getBuffer(Y.buffer),qe="type"in Y?Ha[Y.type]:Tc.dtype,td=!!Y.normalized,xd=Y.size|0,ld=Y.offset|0,Dd=Y.stride|0,vd=Y.divisor|0);ie=r.buffer;r.buffer=Tc;ue=r.divisor;r.divisor=vd;ee=r.normalized;r.normalized=td;ne=r.offset;r.offset=ld;Oc=r.size;r.size=xd;hd=r.state;r.state=Bd;ve=r.stride;r.stride=Dd;re=r.type;r.type=
qe;Jd=r.w;r.w=le;Pd=r.x;r.x=Ne;Rd=r.y;r.y=me;Sd=r.z;r.z=ke;oe=da.buffer;da.buffer=h;ze=da.divisor;da.divisor=0;Ce=da.normalized;da.normalized=!1;se=da.offset;da.offset=0;Se=da.size;da.size=0;Te=da.state;da.state=1;Oe=da.stride;da.stride=8;we=da.type;da.type=5126;Ge=da.w;da.w=0;Ie=da.x;da.x=0;Je=da.y;da.y=0;Ke=da.z;da.z=0;He=u.buffer;u.buffer=k;Kd=u.divisor;u.divisor=0;Yd=u.normalized;u.normalized=!1;ce=u.offset;u.offset=4;fe=u.size;u.size=0;Le=u.state;u.state=1;Gd=u.stride;u.stride=8;Td=u.type;u.type=
5126;Ee=u.w;u.w=0;Me=u.x;u.x=0;bf=u.y;u.y=0;af=u.z;u.z=0;Ue=n.vert;n.vert=20;Pe=n.frag;n.frag=19;T.dirty=!0;d(ea,b,c);ea.viewportWidth=q;ea.viewportHeight=p;I[0]=K;I[1]=ma;I[2]=y;I[3]=z;O[0]=sa;O[1]=Ba;O[2]=Xb;O[3]=A;na.blend_enable=fa;qa[0]=ha;qa[1]=C;Ca[0]=N;Ca[1]=E;Ca[2]=J;Ca[3]=ua;na.depth_enable=x;v[0]=P;v[1]=ka;v[2]=Ta;v[3]=aa;na.scissor_enable=ga;na.stencil_enable=Aa;oa&&(Z.cpuTime+=performance.now()-va);S.offset=Ea;S.count=W;S.instances=la;S.primitive=xa;H[23]=Da;H[24]=id;H[22]=ia;H[31]=Bc;
H[32]=Gc;H[33]=pc;H[10]=dc;H[34]=Hc;H[6]=cb;H[7]=ab;H[21]=Va;H[8]=Hb;H[9]=qc;H[3]=jb;Fb&&X.destroyStream(Cb);F.buffer=Ja;F.divisor=rb;F.normalized=La;F.offset=eb;F.size=fb;F.state=Ma;F.stride=kb;F.type=Wa;F.w=tb;F.x=sb;F.y=Pa;F.z=Ac;Ra&&X.destroyStream(Jb);U.buffer=vb;U.divisor=Sa;U.normalized=mb;U.offset=ec;U.size=Dc;U.state=uc;U.stride=bb;U.type=ic;U.w=ad;U.x=Xa;U.y=Mc;U.z=zb;Za&&X.destroyStream(Ub);w.buffer=mc;w.divisor=vc;w.normalized=fc;w.offset=db;w.size=rc;w.state=Sb;w.stride=Wb;w.type=bc;
w.w=gc;w.x=xc;w.y=zc;w.z=bd;Qc&&X.destroyStream(Rc);m.buffer=jd;m.divisor=rd;m.normalized=xe;m.offset=Be;m.size=kd;m.state=za;m.stride=Nd;m.type=Xd;m.w=de;m.x=Od;m.y=Id;m.z=Fd;od&&X.destroyStream(Tc);r.buffer=ie;r.divisor=ue;r.normalized=ee;r.offset=ne;r.size=Oc;r.state=hd;r.stride=ve;r.type=re;r.w=Jd;r.x=Pd;r.y=Rd;r.z=Sd;da.buffer=oe;da.divisor=ze;da.normalized=Ce;da.offset=se;da.size=Se;da.state=Te;da.stride=Oe;da.type=we;da.w=Ge;da.x=Ie;da.y=Je;da.z=Ke;u.buffer=He;u.divisor=Kd;u.normalized=Yd;
u.offset=ce;u.size=fe;u.state=Le;u.stride=Gd;u.type=Td;u.w=Ee;u.x=Me;u.y=bf;u.z=af;n.vert=Ue;n.frag=Pe;T.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,id,X,ea,T){var S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,ed,Gb,ha,I,sa,Ha,pa,ya,Ga,ja,Y,ta,Ka,Fa,gb,
ca;S=a.attributes;A=a.buffer;l=a.context;M=a.current;N=a.draw;wa=a.elements;na=a.extensions;n=a.framebuffer;H=a.gl;ba=a.isBufferArgs;O=a.next;la=a.shader;qa=a.uniforms;Da=a.vao;Ca=O.blend_color;fa=M.blend_color;Ea=O.blend_equation;ka=M.blend_equation;oa=O.blend_func;Aa=M.blend_func;Ba=O.colorMask;ma=M.colorMask;Xb=O.depth_range;Ta=M.depth_range;v=O.polygonOffset_offset;t=M.polygonOffset_offset;K=O.sample_coverage;ua=M.sample_coverage;va=O.scissor_box;ed=M.scissor_box;Gb=O.stencil_func;ha=M.stencil_func;
I=O.stencil_opBack;sa=M.stencil_opBack;Ha=O.stencil_opFront;pa=M.stencil_opFront;ya=O.viewport;Ga=M.viewport;ja={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};Ka={divisor:1,offset:4,stride:4};Fa={divisor:1,offset:16,stride:8};gb={divisor:1,offset:24,stride:8};ca={divisor:1,offset:0,stride:8};return{batch:function(e,a){var q,u,m,J,x,w;q=n.next;q!==n.cur&&(q?H.bindFramebuffer(36160,q.framebuffer):
H.bindFramebuffer(36160,null),n.cur=q);if(M.dirty){var G,ya,r,D,B,qa,P,Ca,F,U,oa,va,da,Ea,la,V,Zd,ia,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb;G=O.dither;G!==M.dither&&(G?H.enable(3024):H.disable(3024),M.dither=G);ya=O.depth_func;ya!==M.depth_func&&(H.depthFunc(ya),M.depth_func=ya);r=Xb[0];D=Xb[1];if(r!==Ta[0]||D!==Ta[1])H.depthRange(r,D),Ta[0]=r,Ta[1]=D;B=O.depth_mask;B!==M.depth_mask&&(H.depthMask(B),M.depth_mask=B);qa=Ba[0];P=Ba[1];Ca=Ba[2];F=Ba[3];if(qa!==ma[0]||P!==ma[1]||Ca!==ma[2]||F!==ma[3])H.colorMask(qa,
P,Ca,F),ma[0]=qa,ma[1]=P,ma[2]=Ca,ma[3]=F;U=O.frontFace;U!==M.frontFace&&(H.frontFace(U),M.frontFace=U);oa=O.lineWidth;oa!==M.lineWidth&&(H.lineWidth(oa),M.lineWidth=oa);va=O.polygonOffset_enable;va!==M.polygonOffset_enable&&(va?H.enable(32823):H.disable(32823),M.polygonOffset_enable=va);da=v[0];Ea=v[1];if(da!==t[0]||Ea!==t[1])H.polygonOffset(da,Ea),t[0]=da,t[1]=Ea;la=O.sample_alpha;la!==M.sample_alpha&&(la?H.enable(32926):H.disable(32926),M.sample_alpha=la);V=O.sample_enable;V!==M.sample_enable&&
(V?H.enable(32928):H.disable(32928),M.sample_enable=V);Zd=K[0];ia=K[1];if(Zd!==ua[0]||ia!==ua[1])H.sampleCoverage(Zd,ia),ua[0]=Zd,ua[1]=ia;$d=O.stencil_mask;$d!==M.stencil_mask&&(H.stencilMask($d),M.stencil_mask=$d);nd=Gb[0];$c=Gb[1];sd=Gb[2];if(nd!==ha[0]||$c!==ha[1]||sd!==ha[2])H.stencilFunc(nd,$c,sd),ha[0]=nd,ha[1]=$c,ha[2]=sd;Kc=Ha[0];pd=Ha[1];Ec=Ha[2];fd=Ha[3];if(Kc!==pa[0]||pd!==pa[1]||Ec!==pa[2]||fd!==pa[3])H.stencilOpSeparate(Kc,pd,Ec,fd),pa[0]=Kc,pa[1]=pd,pa[2]=Ec,pa[3]=fd;Pc=I[0];md=I[1];
Ab=I[2];Eb=I[3];if(Pc!==sa[0]||md!==sa[1]||Ab!==sa[2]||Eb!==sa[3])H.stencilOpSeparate(Pc,md,Ab,Eb),sa[0]=Pc,sa[1]=md,sa[2]=Ab,sa[3]=Eb}H.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;H.enable(3042);M.blend_enable=!0;H.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;H.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;H.enable(2884);M.cull_enable=!0;H.cullFace(1029);M.cull_face=1029;H.enable(3089);M.scissor_enable=!0;H.disable(2960);M.stencil_enable=!1;if(u=M.profile)m=
performance.now(),Z.count+=a;H.useProgram(R.program);J=na.angle_instanced_arrays;var tc,xb,wc,Bb,Ic;Da.setVAO(null);tc=E.location;xb=S[tc];xb.buffer||H.enableVertexAttribArray(tc);if(5126!==xb.type||1!==xb.size||xb.buffer!==h||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)H.bindBuffer(34962,h.buffer),H.vertexAttribPointer(tc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=h,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(J.vertexAttribDivisorANGLE(tc,0),xb.divisor=0);wc=d.location;Bb=
S[wc];Bb.buffer||H.enableVertexAttribArray(wc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==k||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)H.bindBuffer(34962,k.buffer),H.vertexAttribPointer(wc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=k,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&(J.vertexAttribDivisorANGLE(wc,0),Bb.divisor=0);(Ic=N.elements)?H.bindBuffer(34963,Ic.buffer.buffer):Da.currentVAO&&(Ic=wa.getElements(Da.currentVAO.elements))&&H.bindBuffer(34963,Ic.buffer.buffer);
for(x=0;x<a;++x){w=e[x];var kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,za,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc;kc=w.viewport;Fc=kc.x|0;gd=kc.y|0;Vc="width"in
kc?kc.width|0:l.framebufferWidth-Fc;Bc="height"in kc?kc.height|0:l.framebufferHeight-gd;cc=l.viewportWidth;l.viewportWidth=Vc;Gc=l.viewportHeight;l.viewportHeight=Bc;H.viewport(Fc,gd,Vc,Bc);Ga[0]=Fc;Ga[1]=gd;Ga[2]=Vc;Ga[3]=Bc;(oc=ga.call(this,l,w,x))?H.enable(2929):H.disable(2929);M.depth_enable=oc;pc=w.viewport;lc=pc.x|0;dc=pc.y|0;$a="width"in pc?pc.width|0:l.framebufferWidth-lc;Hc="height"in pc?pc.height|0:l.framebufferHeight-dc;H.scissor(lc,dc,$a,Hc);ed[0]=lc;ed[1]=dc;ed[2]=$a;ed[3]=Hc;ta.buffer=
w.positionBuffer;yb=!1;cb=null;Mb=0;ab=!1;Va=nb=0;Lc=1;Hb=0;Ib=5126;Fb=jb=Nb=qc=0;ba(ta)?(yb=!0,cb=A.createStream(34962,ta),Ib=cb.dtype):(cb=A.getBuffer(ta))?Ib=cb.dtype:"constant"in ta?(Lc=2,"number"===typeof ta.constant?(Nb=ta.constant,jb=Fb=qc=0):(Nb=0<ta.constant.length?ta.constant[0]:0,jb=1<ta.constant.length?ta.constant[1]:0,Fb=2<ta.constant.length?ta.constant[2]:0,qc=3<ta.constant.length?ta.constant[3]:0)):(cb=ba(ta.buffer)?A.createStream(34962,ta.buffer):A.getBuffer(ta.buffer),Ib="type"in
ta?ja[ta.type]:cb.dtype,ab=!!ta.normalized,Va=ta.size|0,nb=ta.offset|0,Hb=ta.stride|0,Mb=ta.divisor|0);Cb=p.location;wb=S[Cb];if(1===Lc){wb.buffer||H.enableVertexAttribArray(Cb);hb=Va||2;if(wb.type!==Ib||wb.size!==hb||wb.buffer!==cb||wb.normalized!==ab||wb.offset!==nb||wb.stride!==Hb)H.bindBuffer(34962,cb.buffer),H.vertexAttribPointer(Cb,hb,Ib,ab,Hb,nb),wb.type=Ib,wb.size=hb,wb.buffer=cb,wb.normalized=ab,wb.offset=nb,wb.stride=Hb;wb.divisor!==Mb&&(J.vertexAttribDivisorANGLE(Cb,Mb),wb.divisor=Mb)}else if(wb.buffer&&
(H.disableVertexAttribArray(Cb),wb.buffer=null),wb.x!==Nb||wb.y!==jb||wb.z!==Fb||wb.w!==qc)H.vertexAttrib4f(Cb,Nb,jb,Fb,qc),wb.x=Nb,wb.y=jb,wb.z=Fb,wb.w=qc;Fa.buffer=w.positionBuffer;Yb=!1;Ob=null;qb=0;Ua=!1;ob=Tb=0;hc=1;ib=0;pb=5126;eb=La=rb=Ja=0;ba(Fa)?(Yb=!0,Ob=A.createStream(34962,Fa),pb=Ob.dtype):(Ob=A.getBuffer(Fa))?pb=Ob.dtype:"constant"in Fa?(hc=2,"number"===typeof Fa.constant?(rb=Fa.constant,La=eb=Ja=0):(rb=0<Fa.constant.length?Fa.constant[0]:0,La=1<Fa.constant.length?Fa.constant[1]:0,eb=
2<Fa.constant.length?Fa.constant[2]:0,Ja=3<Fa.constant.length?Fa.constant[3]:0)):(Ob=ba(Fa.buffer)?A.createStream(34962,Fa.buffer):A.getBuffer(Fa.buffer),pb="type"in Fa?ja[Fa.type]:Ob.dtype,Ua=!!Fa.normalized,ob=Fa.size|0,Tb=Fa.offset|0,ib=Fa.stride|0,qb=Fa.divisor|0);fb=y.location;Ma=S[fb];if(1===hc){Ma.buffer||H.enableVertexAttribArray(fb);kb=ob||2;if(Ma.type!==pb||Ma.size!==kb||Ma.buffer!==Ob||Ma.normalized!==Ua||Ma.offset!==Tb||Ma.stride!==ib)H.bindBuffer(34962,Ob.buffer),H.vertexAttribPointer(fb,
kb,pb,Ua,ib,Tb),Ma.type=pb,Ma.size=kb,Ma.buffer=Ob,Ma.normalized=Ua,Ma.offset=Tb,Ma.stride=ib;Ma.divisor!==qb&&(J.vertexAttribDivisorANGLE(fb,qb),Ma.divisor=qb)}else if(Ma.buffer&&(H.disableVertexAttribArray(fb),Ma.buffer=null),Ma.x!==rb||Ma.y!==La||Ma.z!==eb||Ma.w!==Ja)H.vertexAttrib4f(fb,rb,La,eb,Ja),Ma.x=rb,Ma.y=La,Ma.z=eb,Ma.w=Ja;gb.buffer=w.positionBuffer;Wa=!1;tb=null;sb=0;Pa=!1;Ra=Ac=0;Jb=1;Db=0;Na=5126;Lb=Kb=Ya=Qd=0;ba(gb)?(Wa=!0,tb=A.createStream(34962,gb),Na=tb.dtype):(tb=A.getBuffer(gb))?
Na=tb.dtype:"constant"in gb?(Jb=2,"number"===typeof gb.constant?(Ya=gb.constant,Kb=Lb=Qd=0):(Ya=0<gb.constant.length?gb.constant[0]:0,Kb=1<gb.constant.length?gb.constant[1]:0,Lb=2<gb.constant.length?gb.constant[2]:0,Qd=3<gb.constant.length?gb.constant[3]:0)):(tb=ba(gb.buffer)?A.createStream(34962,gb.buffer):A.getBuffer(gb.buffer),Na="type"in gb?ja[gb.type]:tb.dtype,Pa=!!gb.normalized,Ra=gb.size|0,Ac=gb.offset|0,Db=gb.stride|0,sb=gb.divisor|0);lb=xa.location;Oa=S[lb];if(1===Jb){Oa.buffer||H.enableVertexAttribArray(lb);
Zb=Ra||2;if(Oa.type!==Na||Oa.size!==Zb||Oa.buffer!==tb||Oa.normalized!==Pa||Oa.offset!==Ac||Oa.stride!==Db)H.bindBuffer(34962,tb.buffer),H.vertexAttribPointer(lb,Zb,Na,Pa,Db,Ac),Oa.type=Na,Oa.size=Zb,Oa.buffer=tb,Oa.normalized=Pa,Oa.offset=Ac,Oa.stride=Db;Oa.divisor!==sb&&(J.vertexAttribDivisorANGLE(lb,sb),Oa.divisor=sb)}else if(Oa.buffer&&(H.disableVertexAttribArray(lb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==Qd)H.vertexAttrib4f(lb,Ya,Kb,Lb,Qd),Oa.x=Ya,Oa.y=Kb,Oa.z=Lb,Oa.w=Qd;ca.buffer=
w.positionBuffer;Qa=!1;ub=null;vb=0;Sa=!1;ec=mb=0;Dc=1;uc=0;bb=5126;Mc=Xa=ad=ic=0;ba(ca)?(Qa=!0,ub=A.createStream(34962,ca),bb=ub.dtype):(ub=A.getBuffer(ca))?bb=ub.dtype:"constant"in ca?(Dc=2,"number"===typeof ca.constant?(ad=ca.constant,Xa=Mc=ic=0):(ad=0<ca.constant.length?ca.constant[0]:0,Xa=1<ca.constant.length?ca.constant[1]:0,Mc=2<ca.constant.length?ca.constant[2]:0,ic=3<ca.constant.length?ca.constant[3]:0)):(ub=ba(ca.buffer)?A.createStream(34962,ca.buffer):A.getBuffer(ca.buffer),bb="type"in
ca?ja[ca.type]:ub.dtype,Sa=!!ca.normalized,ec=ca.size|0,mb=ca.offset|0,uc=ca.stride|0,vb=ca.divisor|0);zb=ra.location;Za=S[zb];if(1===Dc){Za.buffer||H.enableVertexAttribArray(zb);Ub=ec||2;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)H.bindBuffer(34962,ub.buffer),H.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=ub,Za.normalized=Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==vb&&(J.vertexAttribDivisorANGLE(zb,vb),Za.divisor=vb)}else if(Za.buffer&&
(H.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==ad||Za.y!==Xa||Za.z!==Mc||Za.w!==ic)H.vertexAttrib4f(zb,ad,Xa,Mc,ic),Za.x=ad,Za.y=Xa,Za.z=Mc,Za.w=ic;Y.buffer=w.colorBuffer;sc=!1;Vb=null;Pb=0;Jc=!1;qd=Qb=0;Cc=1;Hd=0;Nc=5126;vc=mc=ud=Wc=0;ba(Y)?(sc=!0,Vb=A.createStream(34962,Y),Nc=Vb.dtype):(Vb=A.getBuffer(Y))?Nc=Vb.dtype:"constant"in Y?(Cc=2,"number"===typeof Y.constant?(ud=Y.constant,mc=vc=Wc=0):(ud=0<Y.constant.length?Y.constant[0]:0,mc=1<Y.constant.length?Y.constant[1]:0,vc=2<Y.constant.length?
Y.constant[2]:0,Wc=3<Y.constant.length?Y.constant[3]:0)):(Vb=ba(Y.buffer)?A.createStream(34962,Y.buffer):A.getBuffer(Y.buffer),Nc="type"in Y?ja[Y.type]:Vb.dtype,Jc=!!Y.normalized,qd=Y.size|0,Qb=Y.offset|0,Hd=Y.stride|0,Pb=Y.divisor|0);fc=L.location;db=S[fc];if(1===Cc){db.buffer||H.enableVertexAttribArray(fc);rc=qd||4;if(db.type!==Nc||db.size!==rc||db.buffer!==Vb||db.normalized!==Jc||db.offset!==Qb||db.stride!==Hd)H.bindBuffer(34962,Vb.buffer),H.vertexAttribPointer(fc,rc,Nc,Jc,Hd,Qb),db.type=Nc,db.size=
rc,db.buffer=Vb,db.normalized=Jc,db.offset=Qb,db.stride=Hd;db.divisor!==Pb&&(J.vertexAttribDivisorANGLE(fc,Pb),db.divisor=Pb)}else if(db.buffer&&(H.disableVertexAttribArray(fc),db.buffer=null),db.x!==ud||db.y!==mc||db.z!==vc||db.w!==Wc)H.vertexAttrib4f(fc,ud,mc,vc,Wc),db.x=ud,db.y=mc,db.z=vc,db.w=Wc;Ka.buffer=w.colorBuffer;Sb=!1;Wb=null;bc=0;gc=!1;zc=xc=0;bd=1;Qc=0;Rc=5126;cd=wd=Xc=Sc=0;ba(Ka)?(Sb=!0,Wb=A.createStream(34962,Ka),Rc=Wb.dtype):(Wb=A.getBuffer(Ka))?Rc=Wb.dtype:"constant"in Ka?(bd=2,"number"===
typeof Ka.constant?(Xc=Ka.constant,wd=cd=Sc=0):(Xc=0<Ka.constant.length?Ka.constant[0]:0,wd=1<Ka.constant.length?Ka.constant[1]:0,cd=2<Ka.constant.length?Ka.constant[2]:0,Sc=3<Ka.constant.length?Ka.constant[3]:0)):(Wb=ba(Ka.buffer)?A.createStream(34962,Ka.buffer):A.getBuffer(Ka.buffer),Rc="type"in Ka?ja[Ka.type]:Wb.dtype,gc=!!Ka.normalized,zc=Ka.size|0,xc=Ka.offset|0,Qc=Ka.stride|0,bc=Ka.divisor|0);Yc=aa.location;jc=S[Yc];if(1===bd){jc.buffer||H.enableVertexAttribArray(Yc);ac=zc||4;if(jc.type!==Rc||
jc.size!==ac||jc.buffer!==Wb||jc.normalized!==gc||jc.offset!==xc||jc.stride!==Qc)H.bindBuffer(34962,Wb.buffer),H.vertexAttribPointer(Yc,ac,Rc,gc,Qc,xc),jc.type=Rc,jc.size=ac,jc.buffer=Wb,jc.normalized=gc,jc.offset=xc,jc.stride=Qc;jc.divisor!==bc&&(J.vertexAttribDivisorANGLE(Yc,bc),jc.divisor=bc)}else if(jc.buffer&&(H.disableVertexAttribArray(Yc),jc.buffer=null),jc.x!==Xc||jc.y!==wd||jc.z!==cd||jc.w!==Sc)H.vertexAttrib4f(Yc,Xc,wd,cd,Sc),jc.x=Xc,jc.y=wd,jc.z=cd,jc.w=Sc;Zc=w.scale;Uc=Zc[0];yc=Zc[1];
x&&dd===Uc&&jd===yc||(dd=Uc,jd=yc,H.uniform2f(id.location,Uc,yc));rd=w.translate;xe=rd[0];kd=rd[1];x&&Be===xe&&za===kd||(Be=xe,za=kd,H.uniform2f(ea.location,xe,kd));Nd=w.thickness;x&&Xd===Nd||(Xd=Nd,H.uniform1f(X.location,Nd));de=w.depth;x&&Od===de||(Od=de,H.uniform1f(C.location,de));Id=c.call(this,l,w,x);Fd=Id[0];Tc=Id[1];td=Id[2];xd=Id[3];x&&od===Fd&&vd===Tc&&ld===td&&Bd===xd||(od=Fd,vd=Tc,ld=td,Bd=xd,H.uniform4f(T.location,Fd,Tc,td,xd));Dd=w.miterLimit;x&&qe===Dd||(qe=Dd,H.uniform1f(Q.location,
Dd));le=f.call(this,l,w,x);x&&Ne===le||(Ne=le,H.uniform1f(b.location,le));me=w.dashLength;x&&ke===me||(ke=me,H.uniform1f(g.location,me));ie=w.opacity;x&&ue===ie||(ue=ie,H.uniform1f(z.location,ie));(ee=w.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);ne=ee._texture;H.uniform1i(W.location,ne.bind());Oc=w.count;0<Oc?Ic?J.drawElementsInstancedANGLE(5,4,Ic.type,0<<(Ic.type-5121>>1),Oc):J.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Ic?H.drawElements(5,4,Ic.type,0<<(Ic.type-5121>>1)):H.drawArrays(5,
0,4));l.viewportWidth=cc;l.viewportHeight=Gc;yb&&A.destroyStream(cb);Yb&&A.destroyStream(Ob);Wa&&A.destroyStream(tb);Qa&&A.destroyStream(ub);sc&&A.destroyStream(Vb);Sb&&A.destroyStream(Wb);ne.unbind()}M.dirty=!0;Da.setVAO(null);u&&(Z.cpuTime+=performance.now()-m)},draw:function(c){var f,a,u,m,x,w,ya,r,D,B,R,qa,P,Ca,F,U,ga,oa,va,da,Ea,la,V,Zd,ia,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,
hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd;f=n.next;f!==n.cur&&(f?H.bindFramebuffer(36160,f.framebuffer):H.bindFramebuffer(36160,null),n.cur=f);if(M.dirty){var Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc;Cc=O.dither;Cc!==M.dither&&(Cc?H.enable(3024):H.disable(3024),M.dither=Cc);Hd=O.depth_func;Hd!==M.depth_func&&(H.depthFunc(Hd),M.depth_func=Hd);Nc=Xb[0];
Wc=Xb[1];if(Nc!==Ta[0]||Wc!==Ta[1])H.depthRange(Nc,Wc),Ta[0]=Nc,Ta[1]=Wc;ud=O.depth_mask;ud!==M.depth_mask&&(H.depthMask(ud),M.depth_mask=ud);mc=Ba[0];vc=Ba[1];fc=Ba[2];db=Ba[3];if(mc!==ma[0]||vc!==ma[1]||fc!==ma[2]||db!==ma[3])H.colorMask(mc,vc,fc,db),ma[0]=mc,ma[1]=vc,ma[2]=fc,ma[3]=db;rc=O.frontFace;rc!==M.frontFace&&(H.frontFace(rc),M.frontFace=rc);Sb=O.lineWidth;Sb!==M.lineWidth&&(H.lineWidth(Sb),M.lineWidth=Sb);Wb=O.polygonOffset_enable;Wb!==M.polygonOffset_enable&&(Wb?H.enable(32823):H.disable(32823),
M.polygonOffset_enable=Wb);bc=v[0];gc=v[1];if(bc!==t[0]||gc!==t[1])H.polygonOffset(bc,gc),t[0]=bc,t[1]=gc;xc=O.sample_alpha;xc!==M.sample_alpha&&(xc?H.enable(32926):H.disable(32926),M.sample_alpha=xc);zc=O.sample_enable;zc!==M.sample_enable&&(zc?H.enable(32928):H.disable(32928),M.sample_enable=zc);bd=K[0];Qc=K[1];if(bd!==ua[0]||Qc!==ua[1])H.sampleCoverage(bd,Qc),ua[0]=bd,ua[1]=Qc;Rc=O.stencil_mask;Rc!==M.stencil_mask&&(H.stencilMask(Rc),M.stencil_mask=Rc);Sc=Gb[0];Xc=Gb[1];wd=Gb[2];if(Sc!==ha[0]||
Xc!==ha[1]||wd!==ha[2])H.stencilFunc(Sc,Xc,wd),ha[0]=Sc,ha[1]=Xc,ha[2]=wd;cd=Ha[0];Yc=Ha[1];jc=Ha[2];ac=Ha[3];if(cd!==pa[0]||Yc!==pa[1]||jc!==pa[2]||ac!==pa[3])H.stencilOpSeparate(cd,Yc,jc,ac),pa[0]=cd,pa[1]=Yc,pa[2]=jc,pa[3]=ac;Zc=I[0];Uc=I[1];dd=I[2];yc=I[3];if(Zc!==sa[0]||Uc!==sa[1]||dd!==sa[2]||yc!==sa[3])H.stencilOpSeparate(Zc,Uc,dd,yc),sa[0]=Zc,sa[1]=Uc,sa[2]=dd,sa[3]=yc}a=c.viewport;u=a.x|0;m=a.y|0;x="width"in a?a.width|0:l.framebufferWidth-u;w="height"in a?a.height|0:l.framebufferHeight-m;
ya=l.viewportWidth;l.viewportWidth=x;r=l.viewportHeight;l.viewportHeight=w;H.viewport(u,m,x,w);Ga[0]=u;Ga[1]=m;Ga[2]=x;Ga[3]=w;H.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;H.enable(3042);M.blend_enable=!0;H.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;H.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;H.enable(2884);M.cull_enable=!0;H.cullFace(1029);M.cull_face=1029;(D=G.call(this,l,c,0))?H.enable(2929):H.disable(2929);M.depth_enable=D;B=c.viewport;R=B.x|
0;qa=B.y|0;P="width"in B?B.width|0:l.framebufferWidth-R;Ca="height"in B?B.height|0:l.framebufferHeight-qa;H.scissor(R,qa,P,Ca);ed[0]=R;ed[1]=qa;ed[2]=P;ed[3]=Ca;H.enable(3089);M.scissor_enable=!0;H.disable(2960);M.stencil_enable=!1;if(F=M.profile)U=performance.now(),Z.count++;H.useProgram(J.program);ga=na.angle_instanced_arrays;Da.setVAO(null);ta.buffer=c.positionBuffer;oa=!1;va=null;da=0;Ea=!1;V=la=0;Zd=1;ia=0;$d=5126;Kc=sd=$c=nd=0;ba(ta)?(oa=!0,va=A.createStream(34962,ta),$d=va.dtype):(va=A.getBuffer(ta))?
$d=va.dtype:"constant"in ta?(Zd=2,"number"===typeof ta.constant?($c=ta.constant,sd=Kc=nd=0):($c=0<ta.constant.length?ta.constant[0]:0,sd=1<ta.constant.length?ta.constant[1]:0,Kc=2<ta.constant.length?ta.constant[2]:0,nd=3<ta.constant.length?ta.constant[3]:0)):(va=ba(ta.buffer)?A.createStream(34962,ta.buffer):A.getBuffer(ta.buffer),$d="type"in ta?ja[ta.type]:va.dtype,Ea=!!ta.normalized,V=ta.size|0,la=ta.offset|0,ia=ta.stride|0,da=ta.divisor|0);pd=p.location;Ec=S[pd];if(1===Zd){Ec.buffer||H.enableVertexAttribArray(pd);
fd=V||2;if(Ec.type!==$d||Ec.size!==fd||Ec.buffer!==va||Ec.normalized!==Ea||Ec.offset!==la||Ec.stride!==ia)H.bindBuffer(34962,va.buffer),H.vertexAttribPointer(pd,fd,$d,Ea,ia,la),Ec.type=$d,Ec.size=fd,Ec.buffer=va,Ec.normalized=Ea,Ec.offset=la,Ec.stride=ia;Ec.divisor!==da&&(ga.vertexAttribDivisorANGLE(pd,da),Ec.divisor=da)}else if(Ec.buffer&&(H.disableVertexAttribArray(pd),Ec.buffer=null),Ec.x!==$c||Ec.y!==sd||Ec.z!==Kc||Ec.w!==nd)H.vertexAttrib4f(pd,$c,sd,Kc,nd),Ec.x=$c,Ec.y=sd,Ec.z=Kc,Ec.w=nd;Fa.buffer=
c.positionBuffer;Pc=!1;md=null;Ab=0;Eb=!1;xb=tc=0;wc=1;Bb=0;Ic=5126;Vc=gd=Fc=kc=0;ba(Fa)?(Pc=!0,md=A.createStream(34962,Fa),Ic=md.dtype):(md=A.getBuffer(Fa))?Ic=md.dtype:"constant"in Fa?(wc=2,"number"===typeof Fa.constant?(Fc=Fa.constant,gd=Vc=kc=0):(Fc=0<Fa.constant.length?Fa.constant[0]:0,gd=1<Fa.constant.length?Fa.constant[1]:0,Vc=2<Fa.constant.length?Fa.constant[2]:0,kc=3<Fa.constant.length?Fa.constant[3]:0)):(md=ba(Fa.buffer)?A.createStream(34962,Fa.buffer):A.getBuffer(Fa.buffer),Ic="type"in
Fa?ja[Fa.type]:md.dtype,Eb=!!Fa.normalized,xb=Fa.size|0,tc=Fa.offset|0,Bb=Fa.stride|0,Ab=Fa.divisor|0);Bc=y.location;cc=S[Bc];if(1===wc){cc.buffer||H.enableVertexAttribArray(Bc);Gc=xb||2;if(cc.type!==Ic||cc.size!==Gc||cc.buffer!==md||cc.normalized!==Eb||cc.offset!==tc||cc.stride!==Bb)H.bindBuffer(34962,md.buffer),H.vertexAttribPointer(Bc,Gc,Ic,Eb,Bb,tc),cc.type=Ic,cc.size=Gc,cc.buffer=md,cc.normalized=Eb,cc.offset=tc,cc.stride=Bb;cc.divisor!==Ab&&(ga.vertexAttribDivisorANGLE(Bc,Ab),cc.divisor=Ab)}else if(cc.buffer&&
(H.disableVertexAttribArray(Bc),cc.buffer=null),cc.x!==Fc||cc.y!==gd||cc.z!==Vc||cc.w!==kc)H.vertexAttrib4f(Bc,Fc,gd,Vc,kc),cc.x=Fc,cc.y=gd,cc.z=Vc,cc.w=kc;gb.buffer=c.positionBuffer;oc=!1;pc=null;lc=0;dc=!1;Hc=$a=0;yb=1;cb=0;Mb=5126;Lc=Va=nb=ab=0;ba(gb)?(oc=!0,pc=A.createStream(34962,gb),Mb=pc.dtype):(pc=A.getBuffer(gb))?Mb=pc.dtype:"constant"in gb?(yb=2,"number"===typeof gb.constant?(nb=gb.constant,Va=Lc=ab=0):(nb=0<gb.constant.length?gb.constant[0]:0,Va=1<gb.constant.length?gb.constant[1]:0,Lc=
2<gb.constant.length?gb.constant[2]:0,ab=3<gb.constant.length?gb.constant[3]:0)):(pc=ba(gb.buffer)?A.createStream(34962,gb.buffer):A.getBuffer(gb.buffer),Mb="type"in gb?ja[gb.type]:pc.dtype,dc=!!gb.normalized,Hc=gb.size|0,$a=gb.offset|0,cb=gb.stride|0,lc=gb.divisor|0);Hb=xa.location;Ib=S[Hb];if(1===yb){Ib.buffer||H.enableVertexAttribArray(Hb);qc=Hc||2;if(Ib.type!==Mb||Ib.size!==qc||Ib.buffer!==pc||Ib.normalized!==dc||Ib.offset!==$a||Ib.stride!==cb)H.bindBuffer(34962,pc.buffer),H.vertexAttribPointer(Hb,
qc,Mb,dc,cb,$a),Ib.type=Mb,Ib.size=qc,Ib.buffer=pc,Ib.normalized=dc,Ib.offset=$a,Ib.stride=cb;Ib.divisor!==lc&&(ga.vertexAttribDivisorANGLE(Hb,lc),Ib.divisor=lc)}else if(Ib.buffer&&(H.disableVertexAttribArray(Hb),Ib.buffer=null),Ib.x!==nb||Ib.y!==Va||Ib.z!==Lc||Ib.w!==ab)H.vertexAttrib4f(Hb,nb,Va,Lc,ab),Ib.x=nb,Ib.y=Va,Ib.z=Lc,Ib.w=ab;ca.buffer=c.positionBuffer;Nb=!1;jb=null;Fb=0;Cb=!1;hb=wb=0;Yb=1;Ob=0;qb=5126;hc=ob=Tb=Ua=0;ba(ca)?(Nb=!0,jb=A.createStream(34962,ca),qb=jb.dtype):(jb=A.getBuffer(ca))?
qb=jb.dtype:"constant"in ca?(Yb=2,"number"===typeof ca.constant?(Tb=ca.constant,ob=hc=Ua=0):(Tb=0<ca.constant.length?ca.constant[0]:0,ob=1<ca.constant.length?ca.constant[1]:0,hc=2<ca.constant.length?ca.constant[2]:0,Ua=3<ca.constant.length?ca.constant[3]:0)):(jb=ba(ca.buffer)?A.createStream(34962,ca.buffer):A.getBuffer(ca.buffer),qb="type"in ca?ja[ca.type]:jb.dtype,Cb=!!ca.normalized,hb=ca.size|0,wb=ca.offset|0,Ob=ca.stride|0,Fb=ca.divisor|0);ib=ra.location;pb=S[ib];if(1===Yb){pb.buffer||H.enableVertexAttribArray(ib);
Ja=hb||2;if(pb.type!==qb||pb.size!==Ja||pb.buffer!==jb||pb.normalized!==Cb||pb.offset!==wb||pb.stride!==Ob)H.bindBuffer(34962,jb.buffer),H.vertexAttribPointer(ib,Ja,qb,Cb,Ob,wb),pb.type=qb,pb.size=Ja,pb.buffer=jb,pb.normalized=Cb,pb.offset=wb,pb.stride=Ob;pb.divisor!==Fb&&(ga.vertexAttribDivisorANGLE(ib,Fb),pb.divisor=Fb)}else if(pb.buffer&&(H.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Tb||pb.y!==ob||pb.z!==hc||pb.w!==Ua)H.vertexAttrib4f(ib,Tb,ob,hc,Ua),pb.x=Tb,pb.y=ob,pb.z=hc,pb.w=Ua;Y.buffer=
c.colorBuffer;rb=!1;La=null;eb=0;fb=!1;kb=Ma=0;Wa=1;tb=0;sb=5126;Jb=Ra=Ac=Pa=0;ba(Y)?(rb=!0,La=A.createStream(34962,Y),sb=La.dtype):(La=A.getBuffer(Y))?sb=La.dtype:"constant"in Y?(Wa=2,"number"===typeof Y.constant?(Ac=Y.constant,Ra=Jb=Pa=0):(Ac=0<Y.constant.length?Y.constant[0]:0,Ra=1<Y.constant.length?Y.constant[1]:0,Jb=2<Y.constant.length?Y.constant[2]:0,Pa=3<Y.constant.length?Y.constant[3]:0)):(La=ba(Y.buffer)?A.createStream(34962,Y.buffer):A.getBuffer(Y.buffer),sb="type"in Y?ja[Y.type]:La.dtype,
fb=!!Y.normalized,kb=Y.size|0,Ma=Y.offset|0,tb=Y.stride|0,eb=Y.divisor|0);Db=L.location;Na=S[Db];if(1===Wa){Na.buffer||H.enableVertexAttribArray(Db);Qd=kb||4;if(Na.type!==sb||Na.size!==Qd||Na.buffer!==La||Na.normalized!==fb||Na.offset!==Ma||Na.stride!==tb)H.bindBuffer(34962,La.buffer),H.vertexAttribPointer(Db,Qd,sb,fb,tb,Ma),Na.type=sb,Na.size=Qd,Na.buffer=La,Na.normalized=fb,Na.offset=Ma,Na.stride=tb;Na.divisor!==eb&&(ga.vertexAttribDivisorANGLE(Db,eb),Na.divisor=eb)}else if(Na.buffer&&(H.disableVertexAttribArray(Db),
Na.buffer=null),Na.x!==Ac||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)H.vertexAttrib4f(Db,Ac,Ra,Jb,Pa),Na.x=Ac,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ka.buffer=c.colorBuffer;Ya=!1;Kb=null;Lb=0;lb=!1;Zb=Oa=0;Qa=1;ub=0;vb=5126;Dc=ec=mb=Sa=0;ba(Ka)?(Ya=!0,Kb=A.createStream(34962,Ka),vb=Kb.dtype):(Kb=A.getBuffer(Ka))?vb=Kb.dtype:"constant"in Ka?(Qa=2,"number"===typeof Ka.constant?(mb=Ka.constant,ec=Dc=Sa=0):(mb=0<Ka.constant.length?Ka.constant[0]:0,ec=1<Ka.constant.length?Ka.constant[1]:0,Dc=2<Ka.constant.length?Ka.constant[2]:
0,Sa=3<Ka.constant.length?Ka.constant[3]:0)):(Kb=ba(Ka.buffer)?A.createStream(34962,Ka.buffer):A.getBuffer(Ka.buffer),vb="type"in Ka?ja[Ka.type]:Kb.dtype,lb=!!Ka.normalized,Zb=Ka.size|0,Oa=Ka.offset|0,ub=Ka.stride|0,Lb=Ka.divisor|0);uc=aa.location;bb=S[uc];if(1===Qa){bb.buffer||H.enableVertexAttribArray(uc);ic=Zb||4;if(bb.type!==vb||bb.size!==ic||bb.buffer!==Kb||bb.normalized!==lb||bb.offset!==Oa||bb.stride!==ub)H.bindBuffer(34962,Kb.buffer),H.vertexAttribPointer(uc,ic,vb,lb,ub,Oa),bb.type=vb,bb.size=
ic,bb.buffer=Kb,bb.normalized=lb,bb.offset=Oa,bb.stride=ub;bb.divisor!==Lb&&(ga.vertexAttribDivisorANGLE(uc,Lb),bb.divisor=Lb)}else if(bb.buffer&&(H.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==mb||bb.y!==ec||bb.z!==Dc||bb.w!==Sa)H.vertexAttrib4f(uc,mb,ec,Dc,Sa),bb.x=mb,bb.y=ec,bb.z=Dc,bb.w=Sa;ad=E.location;Xa=S[ad];Xa.buffer||H.enableVertexAttribArray(ad);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==h||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)H.bindBuffer(34962,h.buffer),H.vertexAttribPointer(ad,
1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=h,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(ga.vertexAttribDivisorANGLE(ad,0),Xa.divisor=0);Mc=d.location;zb=S[Mc];zb.buffer||H.enableVertexAttribArray(Mc);if(5126!==zb.type||1!==zb.size||zb.buffer!==k||!1!==zb.normalized||4!==zb.offset||8!==zb.stride)H.bindBuffer(34962,k.buffer),H.vertexAttribPointer(Mc,1,5126,!1,8,4),zb.type=5126,zb.size=1,zb.buffer=k,zb.normalized=!1,zb.offset=4,zb.stride=8;0!==zb.divisor&&(ga.vertexAttribDivisorANGLE(Mc,
0),zb.divisor=0);Za=c.scale;H.uniform2f(id.location,Za[0],Za[1]);Ub=c.translate;H.uniform2f(ea.location,Ub[0],Ub[1]);H.uniform1f(X.location,c.thickness);H.uniform1f(C.location,c.depth);sc=q.call(this,l,c,0);H.uniform4f(T.location,sc[0],sc[1],sc[2],sc[3]);H.uniform1f(Q.location,c.miterLimit);Vb=e.call(this,l,c,0);H.uniform1f(b.location,Vb);H.uniform1f(g.location,c.dashLength);H.uniform1f(z.location,c.opacity);(Pb=c.dashTexture)&&"framebuffer"===Pb._reglType&&(Pb=Pb.color[0]);Jc=Pb._texture;H.uniform1i(W.location,
Jc.bind());(Qb=N.elements)?H.bindBuffer(34963,Qb.buffer.buffer):Da.currentVAO&&(Qb=wa.getElements(Da.currentVAO.elements))&&H.bindBuffer(34963,Qb.buffer.buffer);qd=c.count;0<qd?Qb?ga.drawElementsInstancedANGLE(5,4,Qb.type,0<<(Qb.type-5121>>1),qd):ga.drawArraysInstancedANGLE(5,0,4,qd):0>qd&&(Qb?H.drawElements(5,4,Qb.type,0<<(Qb.type-5121>>1)):H.drawArrays(5,0,4));M.dirty=!0;Da.setVAO(null);l.viewportWidth=ya;l.viewportHeight=r;F&&(Z.cpuTime+=performance.now()-U);oa&&A.destroyStream(va);Pc&&A.destroyStream(md);
oc&&A.destroyStream(pc);Nb&&A.destroyStream(jb);rb&&A.destroyStream(La);Ya&&A.destroyStream(Kb);Jc.unbind()},scope:function(b,d,c){var e,f,g,n,a,t,v,q,I,p,K,ma,y,z,sa,Ba,H,Ha,S,Xb,pa,fa,ha,T,C,J,E,ua,L,G,Q,Ga,R,wa,ka,Ta,X,ga,aa,Aa,ea,W,Gb,na,xa,ra,Da,ed,V,id,dc,$a,ia,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,
db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,za,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;e=b.viewport;f=e.x|0;g=e.y|0;n="width"in e?e.width|0:l.framebufferWidth-f;a="height"in e?e.height|0:l.framebufferHeight-g;t=l.viewportWidth;l.viewportWidth=
n;v=l.viewportHeight;l.viewportHeight=a;q=ya[0];ya[0]=f;I=ya[1];ya[1]=g;p=ya[2];ya[2]=n;K=ya[3];ya[3]=a;ma=Ca[0];Ca[0]=0;y=Ca[1];Ca[1]=0;z=Ca[2];Ca[2]=0;sa=Ca[3];Ca[3]=0;Ba=O.blend_enable;O.blend_enable=!0;H=Ea[0];Ea[0]=32774;Ha=Ea[1];Ea[1]=32774;S=oa[0];oa[0]=770;Xb=oa[1];oa[1]=771;pa=oa[2];oa[2]=773;fa=oa[3];oa[3]=1;ha=O.cull_enable;O.cull_enable=!0;T=O.cull_face;O.cull_face=1029;C=B.call(this,l,b,c);J=O.depth_enable;O.depth_enable=C;E=b.viewport;ua=E.x|0;L=E.y|0;G="width"in E?E.width|0:l.framebufferWidth-
ua;Q="height"in E?E.height|0:l.framebufferHeight-L;Ga=va[0];va[0]=ua;R=va[1];va[1]=L;wa=va[2];va[2]=G;ka=va[3];va[3]=Q;Ta=O.scissor_enable;O.scissor_enable=!0;X=O.stencil_enable;O.stencil_enable=!1;if(ga=M.profile)aa=performance.now(),Z.count++;Aa=N.offset;N.offset=0;ea=N.count;N.count=4;W=b.count;Gb=N.instances;N.instances=W;na=N.primitive;N.primitive=5;xa=b.dashLength;ra=qa[23];qa[23]=xa;Da=b.dashTexture;ed=qa[24];qa[24]=Da;V=b.depth;id=qa[22];qa[22]=V;dc=b.id;$a=qa[31];qa[31]=dc;ia=b.miterLimit;
yb=qa[32];qa[32]=ia;cb=D.call(this,l,b,c);Mb=qa[33];qa[33]=cb;ab=b.opacity;nb=qa[10];qa[10]=ab;Va=l.pixelRatio;Lc=qa[34];qa[34]=Va;Hb=b.scale;Ib=qa[6];qa[6]=Hb;qc=b.scaleFract;Nb=qa[7];qa[7]=qc;jb=b.thickness;Fb=qa[21];qa[21]=jb;Cb=b.translate;wb=qa[8];qa[8]=Cb;hb=b.translateFract;Yb=qa[9];qa[9]=hb;Ob=F.call(this,l,b,c);qb=qa[3];qa[3]=Ob;Y.buffer=b.colorBuffer;Ua=!1;Tb=null;ob=0;hc=!1;pb=ib=0;Ja=1;rb=0;La=5126;kb=Ma=fb=eb=0;ba(Y)?(Ua=!0,Tb=A.createStream(34962,Y),La=Tb.dtype):(Tb=A.getBuffer(Y))?
La=Tb.dtype:"constant"in Y?(Ja=2,"number"===typeof Y.constant?(fb=Y.constant,Ma=kb=eb=0):(fb=0<Y.constant.length?Y.constant[0]:0,Ma=1<Y.constant.length?Y.constant[1]:0,kb=2<Y.constant.length?Y.constant[2]:0,eb=3<Y.constant.length?Y.constant[3]:0)):(Tb=ba(Y.buffer)?A.createStream(34962,Y.buffer):A.getBuffer(Y.buffer),La="type"in Y?ja[Y.type]:Tb.dtype,hc=!!Y.normalized,pb=Y.size|0,ib=Y.offset|0,rb=Y.stride|0,ob=Y.divisor|0);Wa=U.buffer;U.buffer=Tb;tb=U.divisor;U.divisor=ob;sb=U.normalized;U.normalized=
hc;Pa=U.offset;U.offset=ib;Ac=U.size;U.size=pb;Ra=U.state;U.state=Ja;Jb=U.stride;U.stride=rb;Db=U.type;U.type=La;Na=U.w;U.w=eb;Qd=U.x;U.x=fb;Ya=U.y;U.y=Ma;Kb=U.z;U.z=kb;ta.buffer=b.positionBuffer;Lb=!1;lb=null;Oa=0;Zb=!1;ub=Qa=0;vb=1;Sa=0;mb=5126;bb=uc=Dc=ec=0;ba(ta)?(Lb=!0,lb=A.createStream(34962,ta),mb=lb.dtype):(lb=A.getBuffer(ta))?mb=lb.dtype:"constant"in ta?(vb=2,"number"===typeof ta.constant?(Dc=ta.constant,uc=bb=ec=0):(Dc=0<ta.constant.length?ta.constant[0]:0,uc=1<ta.constant.length?ta.constant[1]:
0,bb=2<ta.constant.length?ta.constant[2]:0,ec=3<ta.constant.length?ta.constant[3]:0)):(lb=ba(ta.buffer)?A.createStream(34962,ta.buffer):A.getBuffer(ta.buffer),mb="type"in ta?ja[ta.type]:lb.dtype,Zb=!!ta.normalized,ub=ta.size|0,Qa=ta.offset|0,Sa=ta.stride|0,Oa=ta.divisor|0);ic=w.buffer;w.buffer=lb;ad=w.divisor;w.divisor=Oa;Xa=w.normalized;w.normalized=Zb;Mc=w.offset;w.offset=Qa;zb=w.size;w.size=ub;Za=w.state;w.state=vb;Ub=w.stride;w.stride=Sa;sc=w.type;w.type=mb;Vb=w.w;w.w=ec;Pb=w.x;w.x=Dc;Jc=w.y;
w.y=uc;Qb=w.z;w.z=bb;Ka.buffer=b.colorBuffer;qd=!1;Cc=null;Hd=0;Nc=!1;ud=Wc=0;mc=1;vc=0;fc=5126;Wb=Sb=rc=db=0;ba(Ka)?(qd=!0,Cc=A.createStream(34962,Ka),fc=Cc.dtype):(Cc=A.getBuffer(Ka))?fc=Cc.dtype:"constant"in Ka?(mc=2,"number"===typeof Ka.constant?(rc=Ka.constant,Sb=Wb=db=0):(rc=0<Ka.constant.length?Ka.constant[0]:0,Sb=1<Ka.constant.length?Ka.constant[1]:0,Wb=2<Ka.constant.length?Ka.constant[2]:0,db=3<Ka.constant.length?Ka.constant[3]:0)):(Cc=ba(Ka.buffer)?A.createStream(34962,Ka.buffer):A.getBuffer(Ka.buffer),
fc="type"in Ka?ja[Ka.type]:Cc.dtype,Nc=!!Ka.normalized,ud=Ka.size|0,Wc=Ka.offset|0,vc=Ka.stride|0,Hd=Ka.divisor|0);bc=m.buffer;m.buffer=Cc;gc=m.divisor;m.divisor=Hd;xc=m.normalized;m.normalized=Nc;zc=m.offset;m.offset=Wc;bd=m.size;m.size=ud;Qc=m.state;m.state=mc;Rc=m.stride;m.stride=vc;Sc=m.type;m.type=fc;Xc=m.w;m.w=db;wd=m.x;m.x=rc;cd=m.y;m.y=Sb;Yc=m.z;m.z=Wb;Fa.buffer=b.positionBuffer;jc=!1;ac=null;Zc=0;Uc=!1;yc=dd=0;jd=1;rd=0;xe=5126;Nd=za=kd=Be=0;ba(Fa)?(jc=!0,ac=A.createStream(34962,Fa),xe=ac.dtype):
(ac=A.getBuffer(Fa))?xe=ac.dtype:"constant"in Fa?(jd=2,"number"===typeof Fa.constant?(kd=Fa.constant,za=Nd=Be=0):(kd=0<Fa.constant.length?Fa.constant[0]:0,za=1<Fa.constant.length?Fa.constant[1]:0,Nd=2<Fa.constant.length?Fa.constant[2]:0,Be=3<Fa.constant.length?Fa.constant[3]:0)):(ac=ba(Fa.buffer)?A.createStream(34962,Fa.buffer):A.getBuffer(Fa.buffer),xe="type"in Fa?ja[Fa.type]:ac.dtype,Uc=!!Fa.normalized,yc=Fa.size|0,dd=Fa.offset|0,rd=Fa.stride|0,Zc=Fa.divisor|0);Xd=r.buffer;r.buffer=ac;de=r.divisor;
r.divisor=Zc;Od=r.normalized;r.normalized=Uc;Id=r.offset;r.offset=dd;Fd=r.size;r.size=yc;od=r.state;r.state=jd;Tc=r.stride;r.stride=rd;vd=r.type;r.type=xe;td=r.w;r.w=Be;ld=r.x;r.x=kd;xd=r.y;r.y=za;Bd=r.z;r.z=Nd;Dd=da.buffer;da.buffer=h;qe=da.divisor;da.divisor=0;le=da.normalized;da.normalized=!1;Ne=da.offset;da.offset=0;me=da.size;da.size=0;ke=da.state;da.state=1;ie=da.stride;da.stride=8;ue=da.type;da.type=5126;ee=da.w;da.w=0;ne=da.x;da.x=0;Oc=da.y;da.y=0;hd=da.z;da.z=0;ve=u.buffer;u.buffer=k;re=
u.divisor;u.divisor=0;Jd=u.normalized;u.normalized=!1;Pd=u.offset;u.offset=4;Rd=u.size;u.size=0;Sd=u.state;u.state=1;oe=u.stride;u.stride=8;ze=u.type;u.type=5126;Ce=u.w;u.w=0;se=u.x;u.x=0;Se=u.y;u.y=0;Te=u.z;u.z=0;gb.buffer=b.positionBuffer;Oe=!1;we=null;Ge=0;Ie=!1;Ke=Je=0;He=1;Kd=0;Yd=5126;Gd=Le=fe=ce=0;ba(gb)?(Oe=!0,we=A.createStream(34962,gb),Yd=we.dtype):(we=A.getBuffer(gb))?Yd=we.dtype:"constant"in gb?(He=2,"number"===typeof gb.constant?(fe=gb.constant,Le=Gd=ce=0):(fe=0<gb.constant.length?gb.constant[0]:
0,Le=1<gb.constant.length?gb.constant[1]:0,Gd=2<gb.constant.length?gb.constant[2]:0,ce=3<gb.constant.length?gb.constant[3]:0)):(we=ba(gb.buffer)?A.createStream(34962,gb.buffer):A.getBuffer(gb.buffer),Yd="type"in gb?ja[gb.type]:we.dtype,Ie=!!gb.normalized,Ke=gb.size|0,Je=gb.offset|0,Kd=gb.stride|0,Ge=gb.divisor|0);Td=P.buffer;P.buffer=we;Ee=P.divisor;P.divisor=Ge;Me=P.normalized;P.normalized=Ie;bf=P.offset;P.offset=Je;af=P.size;P.size=Ke;Ue=P.state;P.state=He;Pe=P.stride;P.stride=Kd;$e=P.type;P.type=
Yd;Ye=P.w;P.w=ce;Ve=P.x;P.x=fe;We=P.y;P.y=Le;Ud=P.z;P.z=Gd;ca.buffer=b.positionBuffer;ae=!1;Xe=null;hf=0;mf=!1;jf=ef=0;kf=1;lf=0;qf=5126;Cf=Bf=rf=nf=0;ba(ca)?(ae=!0,Xe=A.createStream(34962,ca),qf=Xe.dtype):(Xe=A.getBuffer(ca))?qf=Xe.dtype:"constant"in ca?(kf=2,"number"===typeof ca.constant?(rf=ca.constant,Bf=Cf=nf=0):(rf=0<ca.constant.length?ca.constant[0]:0,Bf=1<ca.constant.length?ca.constant[1]:0,Cf=2<ca.constant.length?ca.constant[2]:0,nf=3<ca.constant.length?ca.constant[3]:0)):(Xe=ba(ca.buffer)?
A.createStream(34962,ca.buffer):A.getBuffer(ca.buffer),qf="type"in ca?ja[ca.type]:Xe.dtype,mf=!!ca.normalized,jf=ca.size|0,ef=ca.offset|0,lf=ca.stride|0,hf=ca.divisor|0);Qe=x.buffer;x.buffer=Xe;Fe=x.divisor;x.divisor=hf;of=x.normalized;x.normalized=mf;pf=x.offset;x.offset=ef;Df=x.size;x.size=jf;Gf=x.state;x.state=kf;Af=x.stride;x.stride=lf;Ef=x.type;x.type=qf;Ff=x.w;x.w=nf;wf=x.x;x.x=rf;xf=x.y;x.y=Bf;vf=x.z;x.z=Cf;yf=la.vert;la.vert=36;zf=la.frag;la.frag=35;M.dirty=!0;d(l,b,c);l.viewportWidth=t;l.viewportHeight=
v;ya[0]=q;ya[1]=I;ya[2]=p;ya[3]=K;Ca[0]=ma;Ca[1]=y;Ca[2]=z;Ca[3]=sa;O.blend_enable=Ba;Ea[0]=H;Ea[1]=Ha;oa[0]=S;oa[1]=Xb;oa[2]=pa;oa[3]=fa;O.cull_enable=ha;O.cull_face=T;O.depth_enable=J;va[0]=Ga;va[1]=R;va[2]=wa;va[3]=ka;O.scissor_enable=Ta;O.stencil_enable=X;ga&&(Z.cpuTime+=performance.now()-aa);N.offset=Aa;N.count=ea;N.instances=Gb;N.primitive=na;qa[23]=ra;qa[24]=ed;qa[22]=id;qa[31]=$a;qa[32]=yb;qa[33]=Mb;qa[10]=nb;qa[34]=Lc;qa[6]=Ib;qa[7]=Nb;qa[21]=Fb;qa[8]=wb;qa[9]=Yb;qa[3]=qb;Ua&&A.destroyStream(Tb);
U.buffer=Wa;U.divisor=tb;U.normalized=sb;U.offset=Pa;U.size=Ac;U.state=Ra;U.stride=Jb;U.type=Db;U.w=Na;U.x=Qd;U.y=Ya;U.z=Kb;Lb&&A.destroyStream(lb);w.buffer=ic;w.divisor=ad;w.normalized=Xa;w.offset=Mc;w.size=zb;w.state=Za;w.stride=Ub;w.type=sc;w.w=Vb;w.x=Pb;w.y=Jc;w.z=Qb;qd&&A.destroyStream(Cc);m.buffer=bc;m.divisor=gc;m.normalized=xc;m.offset=zc;m.size=bd;m.state=Qc;m.stride=Rc;m.type=Sc;m.w=Xc;m.x=wd;m.y=cd;m.z=Yc;jc&&A.destroyStream(ac);r.buffer=Xd;r.divisor=de;r.normalized=Od;r.offset=Id;r.size=
Fd;r.state=od;r.stride=Tc;r.type=vd;r.w=td;r.x=ld;r.y=xd;r.z=Bd;da.buffer=Dd;da.divisor=qe;da.normalized=le;da.offset=Ne;da.size=me;da.state=ke;da.stride=ie;da.type=ue;da.w=ee;da.x=ne;da.y=Oc;da.z=hd;u.buffer=ve;u.divisor=re;u.normalized=Jd;u.offset=Pd;u.size=Rd;u.state=Sd;u.stride=oe;u.type=ze;u.w=Ce;u.x=se;u.y=Se;u.z=Te;Oe&&A.destroyStream(we);P.buffer=Td;P.divisor=Ee;P.normalized=Me;P.offset=bf;P.size=af;P.state=Ue;P.stride=Pe;P.type=$e;P.w=Ye;P.x=Ve;P.y=We;P.z=Ud;ae&&A.destroyStream(Xe);x.buffer=
Qe;x.divisor=Fe;x.normalized=of;x.offset=pf;x.size=Df;x.state=Gf;x.stride=Af;x.type=Ef;x.w=Ff;x.x=wf;x.y=xf;x.z=vf;la.vert=yf;la.frag=zf;M.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x){var R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa;R=a.attributes;ga=a.buffer;c=a.context;f=a.current;L=a.draw;p=a.elements;aa=a.extensions;y=a.framebuffer;g=a.gl;
W=a.isBufferArgs;C=a.next;E=a.shader;d=a.uniforms;Q=a.vao;b=C.blend_color;xa=f.blend_color;z=C.blend_equation;ra=f.blend_equation;V=C.blend_func;X=f.blend_func;ea=C.colorMask;T=f.colorMask;S=C.depth_range;A=f.depth_range;l=C.polygonOffset_offset;M=f.polygonOffset_offset;N=C.sample_coverage;wa=f.sample_coverage;na=C.scissor_box;n=f.scissor_box;H=C.stencil_func;ba=f.stencil_func;O=C.stencil_opBack;la=f.stencil_opBack;qa=C.stencil_opFront;Da=f.stencil_opFront;Ca=C.viewport;fa=f.viewport;Ea={int8:5120,
int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(b,d){var e,k,a,v,t,q;e=y.next;e!==y.cur&&(e?g.bindFramebuffer(36160,e.framebuffer):g.bindFramebuffer(36160,null),y.cur=e);if(f.dirty){var h,z,J,E,ha,I,sa,Ha,pa,G,Ga,ja,Y,Ca,na,V,gb,ca,id,$b,Ia,ia,Rb,za,Cd,zd,Md,ye,Ad,Vd,pe,je;h=C.dither;h!==f.dither&&(h?g.enable(3024):g.disable(3024),f.dither=h);z=C.depth_func;z!==f.depth_func&&(g.depthFunc(z),f.depth_func=
z);J=S[0];E=S[1];if(J!==A[0]||E!==A[1])g.depthRange(J,E),A[0]=J,A[1]=E;ha=C.depth_mask;ha!==f.depth_mask&&(g.depthMask(ha),f.depth_mask=ha);I=ea[0];sa=ea[1];Ha=ea[2];pa=ea[3];if(I!==T[0]||sa!==T[1]||Ha!==T[2]||pa!==T[3])g.colorMask(I,sa,Ha,pa),T[0]=I,T[1]=sa,T[2]=Ha,T[3]=pa;G=C.cull_enable;G!==f.cull_enable&&(G?g.enable(2884):g.disable(2884),f.cull_enable=G);Ga=C.cull_face;Ga!==f.cull_face&&(g.cullFace(Ga),f.cull_face=Ga);ja=C.frontFace;ja!==f.frontFace&&(g.frontFace(ja),f.frontFace=ja);Y=C.lineWidth;
Y!==f.lineWidth&&(g.lineWidth(Y),f.lineWidth=Y);Ca=C.polygonOffset_enable;Ca!==f.polygonOffset_enable&&(Ca?g.enable(32823):g.disable(32823),f.polygonOffset_enable=Ca);na=l[0];V=l[1];if(na!==M[0]||V!==M[1])g.polygonOffset(na,V),M[0]=na,M[1]=V;gb=C.sample_alpha;gb!==f.sample_alpha&&(gb?g.enable(32926):g.disable(32926),f.sample_alpha=gb);ca=C.sample_enable;ca!==f.sample_enable&&(ca?g.enable(32928):g.disable(32928),f.sample_enable=ca);id=N[0];$b=N[1];if(id!==wa[0]||$b!==wa[1])g.sampleCoverage(id,$b),
wa[0]=id,wa[1]=$b;Ia=C.stencil_mask;Ia!==f.stencil_mask&&(g.stencilMask(Ia),f.stencil_mask=Ia);ia=H[0];Rb=H[1];za=H[2];if(ia!==ba[0]||Rb!==ba[1]||za!==ba[2])g.stencilFunc(ia,Rb,za),ba[0]=ia,ba[1]=Rb,ba[2]=za;Cd=qa[0];zd=qa[1];Md=qa[2];ye=qa[3];if(Cd!==Da[0]||zd!==Da[1]||Md!==Da[2]||ye!==Da[3])g.stencilOpSeparate(Cd,zd,Md,ye),Da[0]=Cd,Da[1]=zd,Da[2]=Md,Da[3]=ye;Ad=O[0];Vd=O[1];pe=O[2];je=O[3];if(Ad!==la[0]||Vd!==la[1]||pe!==la[2]||je!==la[3])g.stencilOpSeparate(Ad,Vd,pe,je),la[0]=Ad,la[1]=Vd,la[2]=
pe,la[3]=je}g.blendColor(0,0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;g.enable(3042);f.blend_enable=!0;g.blendEquationSeparate(32774,32774);ra[0]=32774;ra[1]=32774;g.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;g.disable(2929);f.depth_enable=!1;g.enable(3089);f.scissor_enable=!0;g.disable(2960);f.stencil_enable=!1;if(k=f.profile)a=performance.now(),Z.count+=d;g.useProgram(B.program);v=aa.angle_instanced_arrays;var Ld;Q.setVAO(null);Ld=L.instances;for(t=0;t<d;++t){q=b[t];var he,ge,
be,De,Ze,Re,Ed,Ae,te,Zd,Wd,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db;he=q.viewport;ge=he.x|0;be=he.y|0;De="width"in he?he.width|0:c.framebufferWidth-ge;Ze="height"in he?he.height|0:c.framebufferHeight-be;Re=c.viewportWidth;c.viewportWidth=De;Ed=c.viewportHeight;c.viewportHeight=Ze;g.viewport(ge,be,De,Ze);fa[0]=ge;fa[1]=be;fa[2]=De;
fa[3]=Ze;Ae=q.viewport;te=Ae.x|0;Zd=Ae.y|0;Wd="width"in Ae?Ae.width|0:c.framebufferWidth-te;$d="height"in Ae?Ae.height|0:c.framebufferHeight-Zd;g.scissor(te,Zd,Wd,$d);n[0]=te;n[1]=Zd;n[2]=Wd;n[3]=$d;ka.buffer=q.positionBuffer;nd=!1;$c=null;sd=0;Kc=!1;Ec=pd=0;fd=1;Pc=0;md=5126;xb=tc=Eb=Ab=0;W(ka)?(nd=!0,$c=ga.createStream(34962,ka),md=$c.dtype):($c=ga.getBuffer(ka))?md=$c.dtype:"constant"in ka?(fd=2,"number"===typeof ka.constant?(Eb=ka.constant,tc=xb=Ab=0):(Eb=0<ka.constant.length?ka.constant[0]:0,
tc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Ab=3<ka.constant.length?ka.constant[3]:0)):($c=W(ka.buffer)?ga.createStream(34962,ka.buffer):ga.getBuffer(ka.buffer),md="type"in ka?Ea[ka.type]:$c.dtype,Kc=!!ka.normalized,Ec=ka.size|0,pd=ka.offset|0,Pc=ka.stride|0,sd=ka.divisor|0);wc=m.location;Bb=R[wc];if(1===fd){Bb.buffer||g.enableVertexAttribArray(wc);Ic=Ec||2;if(Bb.type!==md||Bb.size!==Ic||Bb.buffer!==$c||Bb.normalized!==Kc||Bb.offset!==pd||Bb.stride!==Pc)g.bindBuffer(34962,
$c.buffer),g.vertexAttribPointer(wc,Ic,md,Kc,Pc,pd),Bb.type=md,Bb.size=Ic,Bb.buffer=$c,Bb.normalized=Kc,Bb.offset=pd,Bb.stride=Pc;Bb.divisor!==sd&&(v.vertexAttribDivisorANGLE(wc,sd),Bb.divisor=sd)}else if(Bb.buffer&&(g.disableVertexAttribArray(wc),Bb.buffer=null),Bb.x!==Eb||Bb.y!==tc||Bb.z!==xb||Bb.w!==Ab)g.vertexAttrib4f(wc,Eb,tc,xb,Ab),Bb.x=Eb,Bb.y=tc,Bb.z=xb,Bb.w=Ab;oa.buffer=q.positionFractBuffer;kc=!1;Fc=null;gd=0;Vc=!1;cc=Bc=0;Gc=1;oc=0;pc=5126;Hc=$a=dc=lc=0;W(oa)?(kc=!0,Fc=ga.createStream(34962,
oa),pc=Fc.dtype):(Fc=ga.getBuffer(oa))?pc=Fc.dtype:"constant"in oa?(Gc=2,"number"===typeof oa.constant?(dc=oa.constant,$a=Hc=lc=0):(dc=0<oa.constant.length?oa.constant[0]:0,$a=1<oa.constant.length?oa.constant[1]:0,Hc=2<oa.constant.length?oa.constant[2]:0,lc=3<oa.constant.length?oa.constant[3]:0)):(Fc=W(oa.buffer)?ga.createStream(34962,oa.buffer):ga.getBuffer(oa.buffer),pc="type"in oa?Ea[oa.type]:Fc.dtype,Vc=!!oa.normalized,cc=oa.size|0,Bc=oa.offset|0,oc=oa.stride|0,gd=oa.divisor|0);yb=r.location;
cb=R[yb];if(1===Gc){cb.buffer||g.enableVertexAttribArray(yb);Mb=cc||2;if(cb.type!==pc||cb.size!==Mb||cb.buffer!==Fc||cb.normalized!==Vc||cb.offset!==Bc||cb.stride!==oc)g.bindBuffer(34962,Fc.buffer),g.vertexAttribPointer(yb,Mb,pc,Vc,oc,Bc),cb.type=pc,cb.size=Mb,cb.buffer=Fc,cb.normalized=Vc,cb.offset=Bc,cb.stride=oc;cb.divisor!==gd&&(v.vertexAttribDivisorANGLE(yb,gd),cb.divisor=gd)}else if(cb.buffer&&(g.disableVertexAttribArray(yb),cb.buffer=null),cb.x!==dc||cb.y!==$a||cb.z!==Hc||cb.w!==lc)g.vertexAttrib4f(yb,
dc,$a,Hc,lc),cb.x=dc,cb.y=$a,cb.z=Hc,cb.w=lc;ab=q.fill;nb=ab[0];Lc=ab[1];Ib=ab[2];Nb=ab[3];t&&Va===nb&&Hb===Lc&&qc===Ib&&jb===Nb||(Va=nb,Hb=Lc,qc=Ib,jb=Nb,g.uniform4f(F.location,nb,Lc,Ib,Nb));Fb=q.scale;Cb=Fb[0];hb=Fb[1];t&&wb===Cb&&Yb===hb||(wb=Cb,Yb=hb,g.uniform2f(da.location,Cb,hb));Ob=q.scaleFract;qb=Ob[0];Tb=Ob[1];t&&Ua===qb&&ob===Tb||(Ua=qb,ob=Tb,g.uniform2f(u.location,qb,Tb));hc=q.translate;ib=hc[0];Ja=hc[1];t&&pb===ib&&rb===Ja||(pb=ib,rb=Ja,g.uniform2f(P.location,ib,Ja));La=q.translateFract;
eb=La[0];Ma=La[1];t&&fb===eb&&kb===Ma||(fb=eb,kb=Ma,g.uniform2f(x.location,eb,Ma));Wa=q.id;t&&tb===Wa||(tb=Wa,g.uniform1f(U.location,Wa));sb=q.opacity;t&&Pa===sb||(Pa=sb,g.uniform1f(w.location,sb));Ac=D.call(this,c,q,t);Ra=null;(Ra=(Jb=W(Ac))?p.createStream(Ac):p.getElements(Ac))&&g.bindBuffer(34963,Ra.buffer.buffer);if(Db=Ra?Ra.vertCount:-1)0<Ld?Ra?v.drawElementsInstancedANGLE(4,Db,Ra.type,0<<(Ra.type-5121>>1),Ld):v.drawArraysInstancedANGLE(4,0,Db,Ld):0>Ld&&(Ra?g.drawElements(4,Db,Ra.type,0<<(Ra.type-
5121>>1)):g.drawArrays(4,0,Db)),c.viewportWidth=Re,c.viewportHeight=Ed,nd&&ga.destroyStream($c),kc&&ga.destroyStream(Fc),Jb&&p.destroyStream(Ra)}f.dirty=!0;Q.setVAO(null);k&&(Z.cpuTime+=performance.now()-a)},draw:function(b){var d,e,k,a,v,t,q,h,z,E,D,ha,I,sa,Ha,pa,ya,B,ja,Y,Ca,na;d=y.next;d!==y.cur&&(d?g.bindFramebuffer(36160,d.framebuffer):g.bindFramebuffer(36160,null),y.cur=d);if(f.dirty){d=C.dither;d!==f.dither&&(d?g.enable(3024):g.disable(3024),f.dither=d);d=C.depth_func;d!==f.depth_func&&(g.depthFunc(d),
f.depth_func=d);d=S[0];t=S[1];if(d!==A[0]||t!==A[1])g.depthRange(d,t),A[0]=d,A[1]=t;d=C.depth_mask;d!==f.depth_mask&&(g.depthMask(d),f.depth_mask=d);d=ea[0];t=ea[1];e=ea[2];k=ea[3];if(d!==T[0]||t!==T[1]||e!==T[2]||k!==T[3])g.colorMask(d,t,e,k),T[0]=d,T[1]=t,T[2]=e,T[3]=k;d=C.cull_enable;d!==f.cull_enable&&(d?g.enable(2884):g.disable(2884),f.cull_enable=d);d=C.cull_face;d!==f.cull_face&&(g.cullFace(d),f.cull_face=d);d=C.frontFace;d!==f.frontFace&&(g.frontFace(d),f.frontFace=d);d=C.lineWidth;d!==f.lineWidth&&
(g.lineWidth(d),f.lineWidth=d);d=C.polygonOffset_enable;d!==f.polygonOffset_enable&&(d?g.enable(32823):g.disable(32823),f.polygonOffset_enable=d);d=l[0];t=l[1];if(d!==M[0]||t!==M[1])g.polygonOffset(d,t),M[0]=d,M[1]=t;d=C.sample_alpha;d!==f.sample_alpha&&(d?g.enable(32926):g.disable(32926),f.sample_alpha=d);d=C.sample_enable;d!==f.sample_enable&&(d?g.enable(32928):g.disable(32928),f.sample_enable=d);d=N[0];t=N[1];if(d!==wa[0]||t!==wa[1])g.sampleCoverage(d,t),wa[0]=d,wa[1]=t;d=C.stencil_mask;d!==f.stencil_mask&&
(g.stencilMask(d),f.stencil_mask=d);d=H[0];t=H[1];e=H[2];if(d!==ba[0]||t!==ba[1]||e!==ba[2])g.stencilFunc(d,t,e),ba[0]=d,ba[1]=t,ba[2]=e;d=qa[0];t=qa[1];e=qa[2];k=qa[3];if(d!==Da[0]||t!==Da[1]||e!==Da[2]||k!==Da[3])g.stencilOpSeparate(d,t,e,k),Da[0]=d,Da[1]=t,Da[2]=e,Da[3]=k;d=O[0];t=O[1];e=O[2];k=O[3];if(d!==la[0]||t!==la[1]||e!==la[2]||k!==la[3])g.stencilOpSeparate(d,t,e,k),la[0]=d,la[1]=t,la[2]=e,la[3]=k}d=b.viewport;e=d.x|0;k=d.y|0;a="width"in d?d.width|0:c.framebufferWidth-e;v="height"in d?d.height|
0:c.framebufferHeight-k;d=c.viewportWidth;c.viewportWidth=a;t=c.viewportHeight;c.viewportHeight=v;g.viewport(e,k,a,v);fa[0]=e;fa[1]=k;fa[2]=a;fa[3]=v;g.blendColor(0,0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;g.enable(3042);f.blend_enable=!0;g.blendEquationSeparate(32774,32774);ra[0]=32774;ra[1]=32774;g.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;g.disable(2929);f.depth_enable=!1;v=b.viewport;e=v.x|0;k=v.y|0;a="width"in v?v.width|0:c.framebufferWidth-e;v="height"in v?v.height|0:
c.framebufferHeight-k;g.scissor(e,k,a,v);n[0]=e;n[1]=k;n[2]=a;n[3]=v;g.enable(3089);f.scissor_enable=!0;g.disable(2960);f.stencil_enable=!1;if(e=f.profile)q=performance.now(),Z.count++;g.useProgram(G.program);k=aa.angle_instanced_arrays;Q.setVAO(null);ka.buffer=b.positionBuffer;a=!1;h=0;z=!1;D=E=0;ha=1;I=0;sa=5126;B=ya=pa=Ha=0;W(ka)?(a=!0,v=ga.createStream(34962,ka),sa=v.dtype):(v=ga.getBuffer(ka))?sa=v.dtype:"constant"in ka?(ha=2,"number"===typeof ka.constant?(pa=ka.constant,ya=B=Ha=0):(pa=0<ka.constant.length?
ka.constant[0]:0,ya=1<ka.constant.length?ka.constant[1]:0,B=2<ka.constant.length?ka.constant[2]:0,Ha=3<ka.constant.length?ka.constant[3]:0)):(v=W(ka.buffer)?ga.createStream(34962,ka.buffer):ga.getBuffer(ka.buffer),sa="type"in ka?Ea[ka.type]:v.dtype,z=!!ka.normalized,D=ka.size|0,E=ka.offset|0,I=ka.stride|0,h=ka.divisor|0);ja=m.location;Y=R[ja];if(1===ha){Y.buffer||g.enableVertexAttribArray(ja);D=D||2;if(Y.type!==sa||Y.size!==D||Y.buffer!==v||Y.normalized!==z||Y.offset!==E||Y.stride!==I)g.bindBuffer(34962,
v.buffer),g.vertexAttribPointer(ja,D,sa,z,I,E),Y.type=sa,Y.size=D,Y.buffer=v,Y.normalized=z,Y.offset=E,Y.stride=I;Y.divisor!==h&&(k.vertexAttribDivisorANGLE(ja,h),Y.divisor=h)}else if(Y.buffer&&(g.disableVertexAttribArray(ja),Y.buffer=null),Y.x!==pa||Y.y!==ya||Y.z!==B||Y.w!==Ha)g.vertexAttrib4f(ja,pa,ya,B,Ha),Y.x=pa,Y.y=ya,Y.z=B,Y.w=Ha;oa.buffer=b.positionFractBuffer;h=!1;E=0;I=!1;Ha=sa=0;pa=1;ja=0;Y=5126;na=Ca=B=ya=0;W(oa)?(h=!0,z=ga.createStream(34962,oa),Y=z.dtype):(z=ga.getBuffer(oa))?Y=z.dtype:
"constant"in oa?(pa=2,"number"===typeof oa.constant?(B=oa.constant,Ca=na=ya=0):(B=0<oa.constant.length?oa.constant[0]:0,Ca=1<oa.constant.length?oa.constant[1]:0,na=2<oa.constant.length?oa.constant[2]:0,ya=3<oa.constant.length?oa.constant[3]:0)):(z=W(oa.buffer)?ga.createStream(34962,oa.buffer):ga.getBuffer(oa.buffer),Y="type"in oa?Ea[oa.type]:z.dtype,I=!!oa.normalized,Ha=oa.size|0,sa=oa.offset|0,ja=oa.stride|0,E=oa.divisor|0);D=r.location;ha=R[D];if(1===pa){ha.buffer||g.enableVertexAttribArray(D);
Ha=Ha||2;if(ha.type!==Y||ha.size!==Ha||ha.buffer!==z||ha.normalized!==I||ha.offset!==sa||ha.stride!==ja)g.bindBuffer(34962,z.buffer),g.vertexAttribPointer(D,Ha,Y,I,ja,sa),ha.type=Y,ha.size=Ha,ha.buffer=z,ha.normalized=I,ha.offset=sa,ha.stride=ja;ha.divisor!==E&&(k.vertexAttribDivisorANGLE(D,E),ha.divisor=E)}else if(ha.buffer&&(g.disableVertexAttribArray(D),ha.buffer=null),ha.x!==B||ha.y!==Ca||ha.z!==na||ha.w!==ya)g.vertexAttrib4f(D,B,Ca,na,ya),ha.x=B,ha.y=Ca,ha.z=na,ha.w=ya;E=b.fill;g.uniform4f(F.location,
E[0],E[1],E[2],E[3]);E=b.scale;g.uniform2f(da.location,E[0],E[1]);E=b.scaleFract;g.uniform2f(u.location,E[0],E[1]);E=b.translate;g.uniform2f(P.location,E[0],E[1]);E=b.translateFract;g.uniform2f(x.location,E[0],E[1]);g.uniform1f(U.location,b.id);g.uniform1f(w.location,b.opacity);E=J.call(this,c,b,0);(E=(b=W(E))?p.createStream(E):p.getElements(E))&&g.bindBuffer(34963,E.buffer.buffer);if(I=E?E.vertCount:-1)sa=L.instances,0<sa?E?k.drawElementsInstancedANGLE(4,I,E.type,0<<(E.type-5121>>1),sa):k.drawArraysInstancedANGLE(4,
0,I,sa):0>sa&&(E?g.drawElements(4,I,E.type,0<<(E.type-5121>>1)):g.drawArrays(4,0,I)),f.dirty=!0,Q.setVAO(null),c.viewportWidth=d,c.viewportHeight=t,e&&(Z.cpuTime+=performance.now()-q),a&&ga.destroyStream(v),h&&ga.destroyStream(z),b&&p.destroyStream(E)},scope:function(l,g,n){var a,y,v,t,K,H,O,S,u,A,I,sa,Ha,pa,fa,T,m,J,N,x,w,M,D,G,ba,B,r,Q,R,wa,qa,P,F,U,X,aa,ea,da,la,xa,ra,Da,ia,Re,Ed,Ae,te,Zd,Wd,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,
Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb;a=l.viewport;y=a.x|0;v=a.y|0;t="width"in a?a.width|0:c.framebufferWidth-y;K="height"in a?a.height|0:c.framebufferHeight-v;H=c.viewportWidth;c.viewportWidth=t;O=c.viewportHeight;c.viewportHeight=K;S=Ca[0];Ca[0]=y;u=Ca[1];Ca[1]=v;A=Ca[2];Ca[2]=t;I=Ca[3];Ca[3]=K;sa=b[0];b[0]=0;Ha=b[1];b[1]=0;pa=b[2];b[2]=0;fa=b[3];b[3]=0;T=C.blend_enable;C.blend_enable=!0;m=z[0];z[0]=32774;J=z[1];z[1]=32774;N=V[0];V[0]=770;x=V[1];
V[1]=771;w=V[2];V[2]=773;M=V[3];V[3]=1;D=C.depth_enable;C.depth_enable=!1;G=l.viewport;ba=G.x|0;B=G.y|0;r="width"in G?G.width|0:c.framebufferWidth-ba;Q="height"in G?G.height|0:c.framebufferHeight-B;R=na[0];na[0]=ba;wa=na[1];na[1]=B;qa=na[2];na[2]=r;P=na[3];na[3]=Q;F=C.scissor_enable;C.scissor_enable=!0;U=C.stencil_enable;C.stencil_enable=!1;if(X=f.profile)aa=performance.now(),Z.count++;ea=h.call(this,c,l,n);da=null;da=(la=W(ea))?p.createStream(ea):p.getElements(ea);xa=L.elements;L.elements=da;ra=
L.offset;L.offset=0;Da=da?da.vertCount:-1;ia=L.count;L.count=Da;Re=L.primitive;L.primitive=4;Ed=l.fill;Ae=d[14];d[14]=Ed;te=l.id;Zd=d[31];d[31]=te;Wd=l.opacity;$d=d[10];d[10]=Wd;nd=c.pixelRatio;$c=d[34];d[34]=nd;sd=l.scale;Kc=d[6];d[6]=sd;pd=l.scaleFract;Ec=d[7];d[7]=pd;fd=l.translate;Pc=d[8];d[8]=fd;md=l.translateFract;Ab=d[9];d[9]=md;Eb=k.call(this,c,l,n);tc=d[3];d[3]=Eb;ka.buffer=l.positionBuffer;xb=!1;wc=null;Bb=0;Ic=!1;Fc=kc=0;gd=1;Vc=0;Bc=5126;pc=oc=Gc=cc=0;W(ka)?(xb=!0,wc=ga.createStream(34962,
ka),Bc=wc.dtype):(wc=ga.getBuffer(ka))?Bc=wc.dtype:"constant"in ka?(gd=2,"number"===typeof ka.constant?(Gc=ka.constant,oc=pc=cc=0):(Gc=0<ka.constant.length?ka.constant[0]:0,oc=1<ka.constant.length?ka.constant[1]:0,pc=2<ka.constant.length?ka.constant[2]:0,cc=3<ka.constant.length?ka.constant[3]:0)):(wc=W(ka.buffer)?ga.createStream(34962,ka.buffer):ga.getBuffer(ka.buffer),Bc="type"in ka?Ea[ka.type]:wc.dtype,Ic=!!ka.normalized,Fc=ka.size|0,kc=ka.offset|0,Vc=ka.stride|0,Bb=ka.divisor|0);lc=q.buffer;q.buffer=
wc;dc=q.divisor;q.divisor=Bb;$a=q.normalized;q.normalized=Ic;Hc=q.offset;q.offset=kc;yb=q.size;q.size=Fc;cb=q.state;q.state=gd;Mb=q.stride;q.stride=Vc;ab=q.type;q.type=Bc;nb=q.w;q.w=cc;Va=q.x;q.x=Gc;Lc=q.y;q.y=oc;Hb=q.z;q.z=pc;oa.buffer=l.positionFractBuffer;Ib=!1;qc=null;Nb=0;jb=!1;Cb=Fb=0;wb=1;hb=0;Yb=5126;Tb=Ua=qb=Ob=0;W(oa)?(Ib=!0,qc=ga.createStream(34962,oa),Yb=qc.dtype):(qc=ga.getBuffer(oa))?Yb=qc.dtype:"constant"in oa?(wb=2,"number"===typeof oa.constant?(qb=oa.constant,Ua=Tb=Ob=0):(qb=0<oa.constant.length?
oa.constant[0]:0,Ua=1<oa.constant.length?oa.constant[1]:0,Tb=2<oa.constant.length?oa.constant[2]:0,Ob=3<oa.constant.length?oa.constant[3]:0)):(qc=W(oa.buffer)?ga.createStream(34962,oa.buffer):ga.getBuffer(oa.buffer),Yb="type"in oa?Ea[oa.type]:qc.dtype,jb=!!oa.normalized,Cb=oa.size|0,Fb=oa.offset|0,hb=oa.stride|0,Nb=oa.divisor|0);ob=e.buffer;e.buffer=qc;hc=e.divisor;e.divisor=Nb;ib=e.normalized;e.normalized=jb;pb=e.offset;e.offset=Fb;Ja=e.size;e.size=Cb;rb=e.state;e.state=wb;La=e.stride;e.stride=hb;
eb=e.type;e.type=Yb;fb=e.w;e.w=Ob;Ma=e.x;e.x=qb;kb=e.y;e.y=Ua;Wa=e.z;e.z=Tb;tb=E.vert;E.vert=42;sb=E.frag;E.frag=41;f.dirty=!0;g(c,l,n);c.viewportWidth=H;c.viewportHeight=O;Ca[0]=S;Ca[1]=u;Ca[2]=A;Ca[3]=I;b[0]=sa;b[1]=Ha;b[2]=pa;b[3]=fa;C.blend_enable=T;z[0]=m;z[1]=J;V[0]=N;V[1]=x;V[2]=w;V[3]=M;C.depth_enable=D;na[0]=R;na[1]=wa;na[2]=qa;na[3]=P;C.scissor_enable=F;C.stencil_enable=U;X&&(Z.cpuTime+=performance.now()-aa);la&&p.destroyStream(da);L.elements=xa;L.offset=ra;L.count=ia;L.primitive=Re;d[14]=
Ae;d[31]=Zd;d[10]=$d;d[34]=$c;d[6]=Kc;d[7]=Ec;d[8]=Pc;d[9]=Ab;d[3]=tc;xb&&ga.destroyStream(wc);q.buffer=lc;q.divisor=dc;q.normalized=$a;q.offset=Hc;q.size=yb;q.state=cb;q.stride=Mb;q.type=ab;q.w=nb;q.x=Va;q.y=Lc;q.z=Hb;Ib&&ga.destroyStream(qc);e.buffer=ob;e.divisor=hc;e.normalized=ib;e.offset=pb;e.size=Ja;e.state=rb;e.stride=La;e.type=eb;e.w=fb;e.x=Ma;e.y=kb;e.z=Wa;E.vert=tb;E.frag=sb;f.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta){var v,t,K,ua,va,ed,Gb,ha,I,sa,Ha,pa,ya,Ga,ja,Y,ta,Ka,Fa,gb,ca,ia,$b,Ia,nc,Rb,za,Cd,zd,Md,ye,Ad,Vd,pe,je,Ld,he,ge,be;v=a.attributes;t=a.buffer;K=a.context;ua=a.current;va=a.draw;ed=a.elements;Gb=a.extensions;ha=a.framebuffer;I=a.gl;sa=a.isBufferArgs;Ha=a.next;pa=a.shader;ya=a.uniforms;Ga=a.vao;ja=Ha.blend_color;Y=ua.blend_color;ta=Ha.blend_equation;
Ka=ua.blend_equation;Fa=Ha.blend_func;gb=ua.blend_func;ca=Ha.colorMask;ia=ua.colorMask;$b=Ha.depth_range;Ia=ua.depth_range;nc=Ha.polygonOffset_offset;Rb=ua.polygonOffset_offset;za=Ha.sample_coverage;Cd=ua.sample_coverage;zd=Ha.scissor_box;Md=ua.scissor_box;ye=Ha.stencil_func;Ad=ua.stencil_func;Vd=Ha.stencil_opBack;pe=ua.stencil_opBack;je=Ha.stencil_opFront;Ld=ua.stencil_opFront;he=Ha.viewport;ge=ua.viewport;be={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(b,d){var c,e,f,k,g,a;c=ha.next;c!==ha.cur&&(c?I.bindFramebuffer(36160,c.framebuffer):I.bindFramebuffer(36160,null),ha.cur=c);if(ua.dirty){var q,p,h,y,u,E,pa,m,J,C,ja,x,w,L,G,D,B,r,ya,Q,R,P,F,U,aa,ga,da,W,Fa,Hc,yb,cb,Mb,ab;q=Ha.dither;q!==ua.dither&&(q?I.enable(3024):I.disable(3024),ua.dither=q);p=ta[0];h=ta[1];if(p!==Ka[0]||h!==Ka[1])I.blendEquationSeparate(p,h),Ka[0]=p,Ka[1]=h;y=Ha.depth_func;y!==ua.depth_func&&(I.depthFunc(y),ua.depth_func=y);u=$b[0];E=$b[1];if(u!==Ia[0]||
E!==Ia[1])I.depthRange(u,E),Ia[0]=u,Ia[1]=E;pa=Ha.depth_mask;pa!==ua.depth_mask&&(I.depthMask(pa),ua.depth_mask=pa);m=ca[0];J=ca[1];C=ca[2];ja=ca[3];if(m!==ia[0]||J!==ia[1]||C!==ia[2]||ja!==ia[3])I.colorMask(m,J,C,ja),ia[0]=m,ia[1]=J,ia[2]=C,ia[3]=ja;x=Ha.cull_enable;x!==ua.cull_enable&&(x?I.enable(2884):I.disable(2884),ua.cull_enable=x);w=Ha.cull_face;w!==ua.cull_face&&(I.cullFace(w),ua.cull_face=w);L=Ha.frontFace;L!==ua.frontFace&&(I.frontFace(L),ua.frontFace=L);G=Ha.lineWidth;G!==ua.lineWidth&&
(I.lineWidth(G),ua.lineWidth=G);D=Ha.polygonOffset_enable;D!==ua.polygonOffset_enable&&(D?I.enable(32823):I.disable(32823),ua.polygonOffset_enable=D);B=nc[0];r=nc[1];if(B!==Rb[0]||r!==Rb[1])I.polygonOffset(B,r),Rb[0]=B,Rb[1]=r;ya=Ha.sample_alpha;ya!==ua.sample_alpha&&(ya?I.enable(32926):I.disable(32926),ua.sample_alpha=ya);Q=Ha.sample_enable;Q!==ua.sample_enable&&(Q?I.enable(32928):I.disable(32928),ua.sample_enable=Q);R=za[0];P=za[1];if(R!==Cd[0]||P!==Cd[1])I.sampleCoverage(R,P),Cd[0]=R,Cd[1]=P;F=
Ha.stencil_mask;F!==ua.stencil_mask&&(I.stencilMask(F),ua.stencil_mask=F);U=ye[0];aa=ye[1];ga=ye[2];if(U!==Ad[0]||aa!==Ad[1]||ga!==Ad[2])I.stencilFunc(U,aa,ga),Ad[0]=U,Ad[1]=aa,Ad[2]=ga;da=je[0];W=je[1];Fa=je[2];Hc=je[3];if(da!==Ld[0]||W!==Ld[1]||Fa!==Ld[2]||Hc!==Ld[3])I.stencilOpSeparate(da,W,Fa,Hc),Ld[0]=da,Ld[1]=W,Ld[2]=Fa,Ld[3]=Hc;yb=Vd[0];cb=Vd[1];Mb=Vd[2];ab=Vd[3];if(yb!==pe[0]||cb!==pe[1]||Mb!==pe[2]||ab!==pe[3])I.stencilOpSeparate(yb,cb,Mb,ab),pe[0]=yb,pe[1]=cb,pe[2]=Mb,pe[3]=ab}I.blendColor(0,
0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;I.enable(3042);ua.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;I.disable(2929);ua.depth_enable=!1;I.enable(3089);ua.scissor_enable=!0;I.disable(2960);ua.stencil_enable=!1;if(e=ua.profile)f=performance.now(),Z.count+=d;I.useProgram(xa.program);k=Gb.angle_instanced_arrays;var nb;Ga.setVAO(null);I.uniform1i(H.location,!1);I.uniform1i(Da.location,M.bind());nb=va.instances;for(g=0;g<d;++g){a=b[g];var Va,Lc,Hb,Ib,qc,Nb,jb,Fb,
Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,zd,he,kd,uf,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,
Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf,dg,Sf,Tf;Va=a.viewport;Lc=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:K.framebufferWidth-Lc;qc="height"in Va?Va.height|0:K.framebufferHeight-Hb;Nb=K.viewportWidth;K.viewportWidth=Ib;jb=K.viewportHeight;K.viewportHeight=qc;I.viewport(Lc,Hb,Ib,qc);ge[0]=Lc;ge[1]=Hb;ge[2]=Ib;ge[3]=qc;Fb=a.viewport;Cb=Fb.x|0;wb=Fb.y|0;hb="width"in Fb?Fb.width|0:K.framebufferWidth-Cb;Yb="height"in Fb?Fb.height|0:K.framebufferHeight-wb;I.scissor(Cb,wb,
hb,Yb);Md[0]=Cb;Md[1]=wb;Md[2]=hb;Md[3]=Yb;Ob=z.call(this,K,a,g);qb=!1;Ua=null;Tb=0;ob=!1;ib=hc=0;pb=1;Ja=0;rb=5126;Ma=fb=eb=La=0;sa(Ob)?(qb=!0,Ua=t.createStream(34962,Ob),rb=Ua.dtype):(Ua=t.getBuffer(Ob))?rb=Ua.dtype:"constant"in Ob?(pb=2,"number"===typeof Ob.constant?(eb=Ob.constant,fb=Ma=La=0):(eb=0<Ob.constant.length?Ob.constant[0]:0,fb=1<Ob.constant.length?Ob.constant[1]:0,Ma=2<Ob.constant.length?Ob.constant[2]:0,La=3<Ob.constant.length?Ob.constant[3]:0)):(Ua=sa(Ob.buffer)?t.createStream(34962,
Ob.buffer):t.getBuffer(Ob.buffer),rb="type"in Ob?be[Ob.type]:Ua.dtype,ob=!!Ob.normalized,ib=Ob.size|0,hc=Ob.offset|0,Ja=Ob.stride|0,Tb=Ob.divisor|0);kb=Ba.location;Wa=v[kb];if(1===pb){Wa.buffer||I.enableVertexAttribArray(kb);tb=ib||1;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Ua||Wa.normalized!==ob||Wa.offset!==hc||Wa.stride!==Ja)I.bindBuffer(34962,Ua.buffer),I.vertexAttribPointer(kb,tb,rb,ob,Ja,hc),Wa.type=rb,Wa.size=tb,Wa.buffer=Ua,Wa.normalized=ob,Wa.offset=hc,Wa.stride=Ja;Wa.divisor!==Tb&&(k.vertexAttribDivisorANGLE(kb,
Tb),Wa.divisor=Tb)}else if(Wa.buffer&&(I.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==Ma||Wa.w!==La)I.vertexAttrib4f(kb,eb,fb,Ma,La),Wa.x=eb,Wa.y=fb,Wa.z=Ma,Wa.w=La;sb=ra.call(this,K,a,g);Pa=!1;Ac=null;Ra=0;Jb=!1;Na=Db=0;Qd=1;Ya=0;Kb=5126;Zb=Oa=lb=Lb=0;sa(sb)?(Pa=!0,Ac=t.createStream(34962,sb),Kb=Ac.dtype):(Ac=t.getBuffer(sb))?Kb=Ac.dtype:"constant"in sb?(Qd=2,"number"===typeof sb.constant?(lb=sb.constant,Oa=Zb=Lb=0):(lb=0<sb.constant.length?sb.constant[0]:0,Oa=1<sb.constant.length?
sb.constant[1]:0,Zb=2<sb.constant.length?sb.constant[2]:0,Lb=3<sb.constant.length?sb.constant[3]:0)):(Ac=sa(sb.buffer)?t.createStream(34962,sb.buffer):t.getBuffer(sb.buffer),Kb="type"in sb?be[sb.type]:Ac.dtype,Jb=!!sb.normalized,Na=sb.size|0,Db=sb.offset|0,Ya=sb.stride|0,Ra=sb.divisor|0);Qa=Xb.location;ub=v[Qa];if(1===Qd){ub.buffer||I.enableVertexAttribArray(Qa);vb=Na||1;if(ub.type!==Kb||ub.size!==vb||ub.buffer!==Ac||ub.normalized!==Jb||ub.offset!==Db||ub.stride!==Ya)I.bindBuffer(34962,Ac.buffer),
I.vertexAttribPointer(Qa,vb,Kb,Jb,Ya,Db),ub.type=Kb,ub.size=vb,ub.buffer=Ac,ub.normalized=Jb,ub.offset=Db,ub.stride=Ya;ub.divisor!==Ra&&(k.vertexAttribDivisorANGLE(Qa,Ra),ub.divisor=Ra)}else if(ub.buffer&&(I.disableVertexAttribArray(Qa),ub.buffer=null),ub.x!==lb||ub.y!==Oa||ub.z!==Zb||ub.w!==Lb)I.vertexAttrib4f(Qa,lb,Oa,Zb,Lb),ub.x=lb,ub.y=Oa,ub.z=Zb,ub.w=Lb;Sa=V.call(this,K,a,g);mb=!1;ec=null;Dc=0;uc=!1;ic=bb=0;ad=1;Xa=0;Mc=5126;sc=Ub=Za=zb=0;sa(Sa)?(mb=!0,ec=t.createStream(34962,Sa),Mc=ec.dtype):
(ec=t.getBuffer(Sa))?Mc=ec.dtype:"constant"in Sa?(ad=2,"number"===typeof Sa.constant?(Za=Sa.constant,Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?Sa.constant[3]:0)):(ec=sa(Sa.buffer)?t.createStream(34962,Sa.buffer):t.getBuffer(Sa.buffer),Mc="type"in Sa?be[Sa.type]:ec.dtype,uc=!!Sa.normalized,ic=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,Dc=Sa.divisor|0);Vb=ma.location;Pb=v[Vb];if(1===ad){Pb.buffer||
I.enableVertexAttribArray(Vb);Jc=ic||1;if(Pb.type!==Mc||Pb.size!==Jc||Pb.buffer!==ec||Pb.normalized!==uc||Pb.offset!==bb||Pb.stride!==Xa)I.bindBuffer(34962,ec.buffer),I.vertexAttribPointer(Vb,Jc,Mc,uc,Xa,bb),Pb.type=Mc,Pb.size=Jc,Pb.buffer=ec,Pb.normalized=uc,Pb.offset=bb,Pb.stride=Xa;Pb.divisor!==Dc&&(k.vertexAttribDivisorANGLE(Vb,Dc),Pb.divisor=Dc)}else if(Pb.buffer&&(I.disableVertexAttribArray(Vb),Pb.buffer=null),Pb.x!==Za||Pb.y!==Ub||Pb.z!==sc||Pb.w!==zb)I.vertexAttrib4f(Vb,Za,Ub,sc,zb),Pb.x=
Za,Pb.y=Ub,Pb.z=sc,Pb.w=zb;Qb=X.call(this,K,a,g);qd=!1;Cc=null;Hd=0;Nc=!1;ud=Wc=0;mc=1;vc=0;fc=5126;Wb=Sb=rc=db=0;sa(Qb)?(qd=!0,Cc=t.createStream(34962,Qb),fc=Cc.dtype):(Cc=t.getBuffer(Qb))?fc=Cc.dtype:"constant"in Qb?(mc=2,"number"===typeof Qb.constant?(rc=Qb.constant,Sb=Wb=db=0):(rc=0<Qb.constant.length?Qb.constant[0]:0,Sb=1<Qb.constant.length?Qb.constant[1]:0,Wb=2<Qb.constant.length?Qb.constant[2]:0,db=3<Qb.constant.length?Qb.constant[3]:0)):(Cc=sa(Qb.buffer)?t.createStream(34962,Qb.buffer):t.getBuffer(Qb.buffer),
fc="type"in Qb?be[Qb.type]:Cc.dtype,Nc=!!Qb.normalized,ud=Qb.size|0,Wc=Qb.offset|0,vc=Qb.stride|0,Hd=Qb.divisor|0);bc=Ta.location;gc=v[bc];if(1===mc){gc.buffer||I.enableVertexAttribArray(bc);xc=ud||1;if(gc.type!==fc||gc.size!==xc||gc.buffer!==Cc||gc.normalized!==Nc||gc.offset!==Wc||gc.stride!==vc)I.bindBuffer(34962,Cc.buffer),I.vertexAttribPointer(bc,xc,fc,Nc,vc,Wc),gc.type=fc,gc.size=xc,gc.buffer=Cc,gc.normalized=Nc,gc.offset=Wc,gc.stride=vc;gc.divisor!==Hd&&(k.vertexAttribDivisorANGLE(bc,Hd),gc.divisor=
Hd)}else if(gc.buffer&&(I.disableVertexAttribArray(bc),gc.buffer=null),gc.x!==rc||gc.y!==Sb||gc.z!==Wb||gc.w!==db)I.vertexAttrib4f(bc,rc,Sb,Wb,db),gc.x=rc,gc.y=Sb,gc.z=Wb,gc.w=db;zc=ea.call(this,K,a,g);bd=!1;Qc=null;Rc=0;Sc=!1;wd=Xc=0;cd=1;Yc=0;jc=5126;dd=Uc=Zc=ac=0;sa(zc)?(bd=!0,Qc=t.createStream(34962,zc),jc=Qc.dtype):(Qc=t.getBuffer(zc))?jc=Qc.dtype:"constant"in zc?(cd=2,"number"===typeof zc.constant?(Zc=zc.constant,Uc=dd=ac=0):(Zc=0<zc.constant.length?zc.constant[0]:0,Uc=1<zc.constant.length?
zc.constant[1]:0,dd=2<zc.constant.length?zc.constant[2]:0,ac=3<zc.constant.length?zc.constant[3]:0)):(Qc=sa(zc.buffer)?t.createStream(34962,zc.buffer):t.getBuffer(zc.buffer),jc="type"in zc?be[zc.type]:Qc.dtype,Sc=!!zc.normalized,wd=zc.size|0,Xc=zc.offset|0,Yc=zc.stride|0,Rc=zc.divisor|0);yc=ka.location;jd=v[yc];if(1===cd){jd.buffer||I.enableVertexAttribArray(yc);rd=wd||1;if(jd.type!==jc||jd.size!==rd||jd.buffer!==Qc||jd.normalized!==Sc||jd.offset!==Xc||jd.stride!==Yc)I.bindBuffer(34962,Qc.buffer),
I.vertexAttribPointer(yc,rd,jc,Sc,Yc,Xc),jd.type=jc,jd.size=rd,jd.buffer=Qc,jd.normalized=Sc,jd.offset=Xc,jd.stride=Yc;jd.divisor!==Rc&&(k.vertexAttribDivisorANGLE(yc,Rc),jd.divisor=Rc)}else if(jd.buffer&&(I.disableVertexAttribArray(yc),jd.buffer=null),jd.x!==Zc||jd.y!==Uc||jd.z!==dd||jd.w!==ac)I.vertexAttrib4f(yc,Zc,Uc,dd,ac),jd.x=Zc,jd.y=Uc,jd.z=dd,jd.w=ac;zd=T.call(this,K,a,g);he=!1;kd=null;uf=0;Nd=!1;de=Xd=0;Od=1;Id=0;Fd=5126;td=vd=Tc=od=0;sa(zd)?(he=!0,kd=t.createStream(34962,zd),Fd=kd.dtype):
(kd=t.getBuffer(zd))?Fd=kd.dtype:"constant"in zd?(Od=2,"number"===typeof zd.constant?(Tc=zd.constant,vd=td=od=0):(Tc=0<zd.constant.length?zd.constant[0]:0,vd=1<zd.constant.length?zd.constant[1]:0,td=2<zd.constant.length?zd.constant[2]:0,od=3<zd.constant.length?zd.constant[3]:0)):(kd=sa(zd.buffer)?t.createStream(34962,zd.buffer):t.getBuffer(zd.buffer),Fd="type"in zd?be[zd.type]:kd.dtype,Nd=!!zd.normalized,de=zd.size|0,Xd=zd.offset|0,Id=zd.stride|0,uf=zd.divisor|0);ld=na.location;xd=v[ld];if(1===Od){xd.buffer||
I.enableVertexAttribArray(ld);Bd=de||1;if(xd.type!==Fd||xd.size!==Bd||xd.buffer!==kd||xd.normalized!==Nd||xd.offset!==Xd||xd.stride!==Id)I.bindBuffer(34962,kd.buffer),I.vertexAttribPointer(ld,Bd,Fd,Nd,Id,Xd),xd.type=Fd,xd.size=Bd,xd.buffer=kd,xd.normalized=Nd,xd.offset=Xd,xd.stride=Id;xd.divisor!==uf&&(k.vertexAttribDivisorANGLE(ld,uf),xd.divisor=uf)}else if(xd.buffer&&(I.disableVertexAttribArray(ld),xd.buffer=null),xd.x!==Tc||xd.y!==vd||xd.z!==td||xd.w!==od)I.vertexAttrib4f(ld,Tc,vd,td,od),xd.x=
Tc,xd.y=vd,xd.z=td,xd.w=od;Dd=S.call(this,K,a,g);qe=!1;le=null;Ne=0;me=!1;ie=ke=0;ue=1;ee=0;ne=5126;re=ve=hd=Oc=0;sa(Dd)?(qe=!0,le=t.createStream(34962,Dd),ne=le.dtype):(le=t.getBuffer(Dd))?ne=le.dtype:"constant"in Dd?(ue=2,"number"===typeof Dd.constant?(hd=Dd.constant,ve=re=Oc=0):(hd=0<Dd.constant.length?Dd.constant[0]:0,ve=1<Dd.constant.length?Dd.constant[1]:0,re=2<Dd.constant.length?Dd.constant[2]:0,Oc=3<Dd.constant.length?Dd.constant[3]:0)):(le=sa(Dd.buffer)?t.createStream(34962,Dd.buffer):t.getBuffer(Dd.buffer),
ne="type"in Dd?be[Dd.type]:le.dtype,me=!!Dd.normalized,ie=Dd.size|0,ke=Dd.offset|0,ee=Dd.stride|0,Ne=Dd.divisor|0);Jd=n.location;Pd=v[Jd];if(1===ue){Pd.buffer||I.enableVertexAttribArray(Jd);Rd=ie||4;if(Pd.type!==ne||Pd.size!==Rd||Pd.buffer!==le||Pd.normalized!==me||Pd.offset!==ke||Pd.stride!==ee)I.bindBuffer(34962,le.buffer),I.vertexAttribPointer(Jd,Rd,ne,me,ee,ke),Pd.type=ne,Pd.size=Rd,Pd.buffer=le,Pd.normalized=me,Pd.offset=ke,Pd.stride=ee;Pd.divisor!==Ne&&(k.vertexAttribDivisorANGLE(Jd,Ne),Pd.divisor=
Ne)}else if(Pd.buffer&&(I.disableVertexAttribArray(Jd),Pd.buffer=null),Pd.x!==hd||Pd.y!==ve||Pd.z!==re||Pd.w!==Oc)I.vertexAttrib4f(Jd,hd,ve,re,Oc),Pd.x=hd,Pd.y=ve,Pd.z=re,Pd.w=Oc;Sd=A.call(this,K,a,g);oe=!1;ze=null;Ce=0;se=!1;Te=Se=0;Oe=1;we=0;Ge=5126;He=Ke=Je=Ie=0;sa(Sd)?(oe=!0,ze=t.createStream(34962,Sd),Ge=ze.dtype):(ze=t.getBuffer(Sd))?Ge=ze.dtype:"constant"in Sd?(Oe=2,"number"===typeof Sd.constant?(Je=Sd.constant,Ke=He=Ie=0):(Je=0<Sd.constant.length?Sd.constant[0]:0,Ke=1<Sd.constant.length?Sd.constant[1]:
0,He=2<Sd.constant.length?Sd.constant[2]:0,Ie=3<Sd.constant.length?Sd.constant[3]:0)):(ze=sa(Sd.buffer)?t.createStream(34962,Sd.buffer):t.getBuffer(Sd.buffer),Ge="type"in Sd?be[Sd.type]:ze.dtype,se=!!Sd.normalized,Te=Sd.size|0,Se=Sd.offset|0,we=Sd.stride|0,Ce=Sd.divisor|0);Kd=wa.location;Yd=v[Kd];if(1===Oe){Yd.buffer||I.enableVertexAttribArray(Kd);ce=Te||4;if(Yd.type!==Ge||Yd.size!==ce||Yd.buffer!==ze||Yd.normalized!==se||Yd.offset!==Se||Yd.stride!==we)I.bindBuffer(34962,ze.buffer),I.vertexAttribPointer(Kd,
ce,Ge,se,we,Se),Yd.type=Ge,Yd.size=ce,Yd.buffer=ze,Yd.normalized=se,Yd.offset=Se,Yd.stride=we;Yd.divisor!==Ce&&(k.vertexAttribDivisorANGLE(Kd,Ce),Yd.divisor=Ce)}else if(Yd.buffer&&(I.disableVertexAttribArray(Kd),Yd.buffer=null),Yd.x!==Je||Yd.y!==Ke||Yd.z!==He||Yd.w!==Ie)I.vertexAttrib4f(Kd,Je,Ke,He,Ie),Yd.x=Je,Yd.y=Ke,Yd.z=He,Yd.w=Ie;fe=l.call(this,K,a,g);Le=!1;Gd=null;Td=0;Ee=!1;bf=Me=0;af=1;Ue=0;Pe=5126;We=Ve=Ye=$e=0;sa(fe)?(Le=!0,Gd=t.createStream(34962,fe),Pe=Gd.dtype):(Gd=t.getBuffer(fe))?Pe=
Gd.dtype:"constant"in fe?(af=2,"number"===typeof fe.constant?(Ye=fe.constant,Ve=We=$e=0):(Ye=0<fe.constant.length?fe.constant[0]:0,Ve=1<fe.constant.length?fe.constant[1]:0,We=2<fe.constant.length?fe.constant[2]:0,$e=3<fe.constant.length?fe.constant[3]:0)):(Gd=sa(fe.buffer)?t.createStream(34962,fe.buffer):t.getBuffer(fe.buffer),Pe="type"in fe?be[fe.type]:Gd.dtype,Ee=!!fe.normalized,bf=fe.size|0,Me=fe.offset|0,Ue=fe.stride|0,Td=fe.divisor|0);Ud=ba.location;ae=v[Ud];if(1===af){ae.buffer||I.enableVertexAttribArray(Ud);
Xe=bf||1;if(ae.type!==Pe||ae.size!==Xe||ae.buffer!==Gd||ae.normalized!==Ee||ae.offset!==Me||ae.stride!==Ue)I.bindBuffer(34962,Gd.buffer),I.vertexAttribPointer(Ud,Xe,Pe,Ee,Ue,Me),ae.type=Pe,ae.size=Xe,ae.buffer=Gd,ae.normalized=Ee,ae.offset=Me,ae.stride=Ue;ae.divisor!==Td&&(k.vertexAttribDivisorANGLE(Ud,Td),ae.divisor=Td)}else if(ae.buffer&&(I.disableVertexAttribArray(Ud),ae.buffer=null),ae.x!==Ye||ae.y!==Ve||ae.z!==We||ae.w!==$e)I.vertexAttrib4f(Ud,Ye,Ve,We,$e),ae.x=Ye,ae.y=Ve,ae.z=We,ae.w=$e;hf=
K.pixelRatio;g&&mf===hf||(mf=hf,I.uniform1f(Ca.location,hf));ef=a.scale;jf=ef[0];lf=ef[1];g&&kf===jf&&qf===lf||(kf=jf,qf=lf,I.uniform2f(fa.location,jf,lf));nf=a.scaleFract;rf=nf[0];Cf=nf[1];g&&Bf===rf&&Qe===Cf||(Bf=rf,Qe=Cf,I.uniform2f(Ea.location,rf,Cf));Fe=a.translate;of=Fe[0];Df=Fe[1];g&&pf===of&&Gf===Df||(pf=of,Gf=Df,I.uniform2f(oa.location,of,Df));Af=a.translateFract;Ef=Af[0];wf=Af[1];g&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,I.uniform2f(Aa.location,Ef,wf));vf=N.call(this,K,a,g);yf=vf[0];If=vf[1];g&&
zf===yf&&Jf===If||(zf=yf,Jf=If,I.uniform2f(qa.location,yf,If));Kf=a.opacity;g&&Lf===Kf||(Lf=Kf,I.uniform1f(la.location,Kf));(sf=a.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Rf=sf._texture;I.uniform1i(O.location,Rf.bind());Hf=a.elements;tf=null;(tf=(dg=sa(Hf))?ed.createStream(Hf):ed.getElements(Hf))&&I.bindBuffer(34963,tf.buffer.buffer);Sf=a.offset;if(Tf=a.count)0<nb?tf?k.drawElementsInstancedANGLE(0,Tf,tf.type,Sf<<(tf.type-5121>>1),nb):k.drawArraysInstancedANGLE(0,Sf,Tf,nb):0>
nb&&(tf?I.drawElements(0,Tf,tf.type,Sf<<(tf.type-5121>>1)):I.drawArrays(0,Sf,Tf)),K.viewportWidth=Nb,K.viewportHeight=jb,qb&&t.destroyStream(Ua),Pa&&t.destroyStream(Ac),mb&&t.destroyStream(ec),qd&&t.destroyStream(Cc),bd&&t.destroyStream(Qc),he&&t.destroyStream(kd),qe&&t.destroyStream(le),oe&&t.destroyStream(ze),Le&&t.destroyStream(Gd),Rf.unbind(),dg&&ed.destroyStream(tf)}M.unbind();ua.dirty=!0;Ga.setVAO(null);e&&(Z.cpuTime+=performance.now()-f)},draw:function(b){var d,c,f,l,g,a,p,y,z,S,u,E,A,pa,T,
C,ja,N,x,L,M,r,ya,Q,R,P,aa,ga,X,ea,da,W,xa,ra,V,Fa,id,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,he,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,uf,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we;d=ha.next;d!==
ha.cur&&(d?I.bindFramebuffer(36160,d.framebuffer):I.bindFramebuffer(36160,null),ha.cur=d);if(ua.dirty){var Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf;Ge=Ha.dither;Ge!==ua.dither&&(Ge?I.enable(3024):I.disable(3024),ua.dither=Ge);Ie=ta[0];Je=ta[1];if(Ie!==Ka[0]||Je!==Ka[1])I.blendEquationSeparate(Ie,Je),Ka[0]=Ie,Ka[1]=Je;Ke=Ha.depth_func;Ke!==ua.depth_func&&(I.depthFunc(Ke),ua.depth_func=Ke);He=$b[0];Kd=$b[1];if(He!==Ia[0]||Kd!==Ia[1])I.depthRange(He,
Kd),Ia[0]=He,Ia[1]=Kd;Yd=Ha.depth_mask;Yd!==ua.depth_mask&&(I.depthMask(Yd),ua.depth_mask=Yd);ce=ca[0];fe=ca[1];Le=ca[2];Gd=ca[3];if(ce!==ia[0]||fe!==ia[1]||Le!==ia[2]||Gd!==ia[3])I.colorMask(ce,fe,Le,Gd),ia[0]=ce,ia[1]=fe,ia[2]=Le,ia[3]=Gd;Td=Ha.cull_enable;Td!==ua.cull_enable&&(Td?I.enable(2884):I.disable(2884),ua.cull_enable=Td);Ee=Ha.cull_face;Ee!==ua.cull_face&&(I.cullFace(Ee),ua.cull_face=Ee);Me=Ha.frontFace;Me!==ua.frontFace&&(I.frontFace(Me),ua.frontFace=Me);bf=Ha.lineWidth;bf!==ua.lineWidth&&
(I.lineWidth(bf),ua.lineWidth=bf);af=Ha.polygonOffset_enable;af!==ua.polygonOffset_enable&&(af?I.enable(32823):I.disable(32823),ua.polygonOffset_enable=af);Ue=nc[0];Pe=nc[1];if(Ue!==Rb[0]||Pe!==Rb[1])I.polygonOffset(Ue,Pe),Rb[0]=Ue,Rb[1]=Pe;$e=Ha.sample_alpha;$e!==ua.sample_alpha&&($e?I.enable(32926):I.disable(32926),ua.sample_alpha=$e);Ye=Ha.sample_enable;Ye!==ua.sample_enable&&(Ye?I.enable(32928):I.disable(32928),ua.sample_enable=Ye);Ve=za[0];We=za[1];if(Ve!==Cd[0]||We!==Cd[1])I.sampleCoverage(Ve,
We),Cd[0]=Ve,Cd[1]=We;Ud=Ha.stencil_mask;Ud!==ua.stencil_mask&&(I.stencilMask(Ud),ua.stencil_mask=Ud);ae=ye[0];Xe=ye[1];hf=ye[2];if(ae!==Ad[0]||Xe!==Ad[1]||hf!==Ad[2])I.stencilFunc(ae,Xe,hf),Ad[0]=ae,Ad[1]=Xe,Ad[2]=hf;mf=je[0];ef=je[1];jf=je[2];kf=je[3];if(mf!==Ld[0]||ef!==Ld[1]||jf!==Ld[2]||kf!==Ld[3])I.stencilOpSeparate(mf,ef,jf,kf),Ld[0]=mf,Ld[1]=ef,Ld[2]=jf,Ld[3]=kf;lf=Vd[0];qf=Vd[1];nf=Vd[2];rf=Vd[3];if(lf!==pe[0]||qf!==pe[1]||nf!==pe[2]||rf!==pe[3])I.stencilOpSeparate(lf,qf,nf,rf),pe[0]=lf,
pe[1]=qf,pe[2]=nf,pe[3]=rf}c=b.viewport;f=c.x|0;l=c.y|0;g="width"in c?c.width|0:K.framebufferWidth-f;a="height"in c?c.height|0:K.framebufferHeight-l;p=K.viewportWidth;K.viewportWidth=g;y=K.viewportHeight;K.viewportHeight=a;I.viewport(f,l,g,a);ge[0]=f;ge[1]=l;ge[2]=g;ge[3]=a;I.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;I.enable(3042);ua.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;I.disable(2929);ua.depth_enable=!1;z=b.viewport;S=z.x|0;u=z.y|0;E="width"in
z?z.width|0:K.framebufferWidth-S;A="height"in z?z.height|0:K.framebufferHeight-u;I.scissor(S,u,E,A);Md[0]=S;Md[1]=u;Md[2]=E;Md[3]=A;I.enable(3089);ua.scissor_enable=!0;I.disable(2960);ua.stencil_enable=!1;if(pa=ua.profile)T=performance.now(),Z.count++;I.useProgram(G.program);C=Gb.angle_instanced_arrays;Ga.setVAO(null);ja=J.call(this,K,b,0);N=!1;x=null;L=0;M=!1;ya=r=0;Q=1;R=0;P=5126;ea=X=ga=aa=0;sa(ja)?(N=!0,x=t.createStream(34962,ja),P=x.dtype):(x=t.getBuffer(ja))?P=x.dtype:"constant"in ja?(Q=2,"number"===
typeof ja.constant?(ga=ja.constant,X=ea=aa=0):(ga=0<ja.constant.length?ja.constant[0]:0,X=1<ja.constant.length?ja.constant[1]:0,ea=2<ja.constant.length?ja.constant[2]:0,aa=3<ja.constant.length?ja.constant[3]:0)):(x=sa(ja.buffer)?t.createStream(34962,ja.buffer):t.getBuffer(ja.buffer),P="type"in ja?be[ja.type]:x.dtype,M=!!ja.normalized,ya=ja.size|0,r=ja.offset|0,R=ja.stride|0,L=ja.divisor|0);da=Ba.location;W=v[da];if(1===Q){W.buffer||I.enableVertexAttribArray(da);xa=ya||1;if(W.type!==P||W.size!==xa||
W.buffer!==x||W.normalized!==M||W.offset!==r||W.stride!==R)I.bindBuffer(34962,x.buffer),I.vertexAttribPointer(da,xa,P,M,R,r),W.type=P,W.size=xa,W.buffer=x,W.normalized=M,W.offset=r,W.stride=R;W.divisor!==L&&(C.vertexAttribDivisorANGLE(da,L),W.divisor=L)}else if(W.buffer&&(I.disableVertexAttribArray(da),W.buffer=null),W.x!==ga||W.y!==X||W.z!==ea||W.w!==aa)I.vertexAttrib4f(da,ga,X,ea,aa),W.x=ga,W.y=X,W.z=ea,W.w=aa;ra=h.call(this,K,b,0);V=!1;Fa=null;id=0;yb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=Lc=0;
sa(ra)?(V=!0,Fa=t.createStream(34962,ra),Va=Fa.dtype):(Fa=t.getBuffer(ra))?Va=Fa.dtype:"constant"in ra?(ab=2,"number"===typeof ra.constant?(Hb=ra.constant,Ib=qc=Lc=0):(Hb=0<ra.constant.length?ra.constant[0]:0,Ib=1<ra.constant.length?ra.constant[1]:0,qc=2<ra.constant.length?ra.constant[2]:0,Lc=3<ra.constant.length?ra.constant[3]:0)):(Fa=sa(ra.buffer)?t.createStream(34962,ra.buffer):t.getBuffer(ra.buffer),Va="type"in ra?be[ra.type]:Fa.dtype,yb=!!ra.normalized,Mb=ra.size|0,cb=ra.offset|0,nb=ra.stride|
0,id=ra.divisor|0);Nb=Xb.location;jb=v[Nb];if(1===ab){jb.buffer||I.enableVertexAttribArray(Nb);Fb=Mb||1;if(jb.type!==Va||jb.size!==Fb||jb.buffer!==Fa||jb.normalized!==yb||jb.offset!==cb||jb.stride!==nb)I.bindBuffer(34962,Fa.buffer),I.vertexAttribPointer(Nb,Fb,Va,yb,nb,cb),jb.type=Va,jb.size=Fb,jb.buffer=Fa,jb.normalized=yb,jb.offset=cb,jb.stride=nb;jb.divisor!==id&&(C.vertexAttribDivisorANGLE(Nb,id),jb.divisor=id)}else if(jb.buffer&&(I.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==
Ib||jb.z!==qc||jb.w!==Lc)I.vertexAttrib4f(Nb,Hb,Ib,qc,Lc),jb.x=Hb,jb.y=Ib,jb.z=qc,jb.w=Lc;Cb=k.call(this,K,b,0);wb=!1;hb=null;Yb=0;Ob=!1;Ua=qb=0;Tb=1;ob=0;hc=5126;rb=Ja=pb=ib=0;sa(Cb)?(wb=!0,hb=t.createStream(34962,Cb),hc=hb.dtype):(hb=t.getBuffer(Cb))?hc=hb.dtype:"constant"in Cb?(Tb=2,"number"===typeof Cb.constant?(pb=Cb.constant,Ja=rb=ib=0):(pb=0<Cb.constant.length?Cb.constant[0]:0,Ja=1<Cb.constant.length?Cb.constant[1]:0,rb=2<Cb.constant.length?Cb.constant[2]:0,ib=3<Cb.constant.length?Cb.constant[3]:
0)):(hb=sa(Cb.buffer)?t.createStream(34962,Cb.buffer):t.getBuffer(Cb.buffer),hc="type"in Cb?be[Cb.type]:hb.dtype,Ob=!!Cb.normalized,Ua=Cb.size|0,qb=Cb.offset|0,ob=Cb.stride|0,Yb=Cb.divisor|0);La=ma.location;eb=v[La];if(1===Tb){eb.buffer||I.enableVertexAttribArray(La);fb=Ua||1;if(eb.type!==hc||eb.size!==fb||eb.buffer!==hb||eb.normalized!==Ob||eb.offset!==qb||eb.stride!==ob)I.bindBuffer(34962,hb.buffer),I.vertexAttribPointer(La,fb,hc,Ob,ob,qb),eb.type=hc,eb.size=fb,eb.buffer=hb,eb.normalized=Ob,eb.offset=
qb,eb.stride=ob;eb.divisor!==Yb&&(C.vertexAttribDivisorANGLE(La,Yb),eb.divisor=Yb)}else if(eb.buffer&&(I.disableVertexAttribArray(La),eb.buffer=null),eb.x!==pb||eb.y!==Ja||eb.z!==rb||eb.w!==ib)I.vertexAttrib4f(La,pb,Ja,rb,ib),eb.x=pb,eb.y=Ja,eb.z=rb,eb.w=ib;Ma=q.call(this,K,b,0);kb=!1;Wa=null;tb=0;sb=!1;Ac=Pa=0;Ra=1;Jb=0;Db=5126;Kb=Ya=zd=Na=0;sa(Ma)?(kb=!0,Wa=t.createStream(34962,Ma),Db=Wa.dtype):(Wa=t.getBuffer(Ma))?Db=Wa.dtype:"constant"in Ma?(Ra=2,"number"===typeof Ma.constant?(zd=Ma.constant,
Ya=Kb=Na=0):(zd=0<Ma.constant.length?Ma.constant[0]:0,Ya=1<Ma.constant.length?Ma.constant[1]:0,Kb=2<Ma.constant.length?Ma.constant[2]:0,Na=3<Ma.constant.length?Ma.constant[3]:0)):(Wa=sa(Ma.buffer)?t.createStream(34962,Ma.buffer):t.getBuffer(Ma.buffer),Db="type"in Ma?be[Ma.type]:Wa.dtype,sb=!!Ma.normalized,Ac=Ma.size|0,Pa=Ma.offset|0,Jb=Ma.stride|0,tb=Ma.divisor|0);Lb=Ta.location;lb=v[Lb];if(1===Ra){lb.buffer||I.enableVertexAttribArray(Lb);Oa=Ac||1;if(lb.type!==Db||lb.size!==Oa||lb.buffer!==Wa||lb.normalized!==
sb||lb.offset!==Pa||lb.stride!==Jb)I.bindBuffer(34962,Wa.buffer),I.vertexAttribPointer(Lb,Oa,Db,sb,Jb,Pa),lb.type=Db,lb.size=Oa,lb.buffer=Wa,lb.normalized=sb,lb.offset=Pa,lb.stride=Jb;lb.divisor!==tb&&(C.vertexAttribDivisorANGLE(Lb,tb),lb.divisor=tb)}else if(lb.buffer&&(I.disableVertexAttribArray(Lb),lb.buffer=null),lb.x!==zd||lb.y!==Ya||lb.z!==Kb||lb.w!==Na)I.vertexAttrib4f(Lb,zd,Ya,Kb,Na),lb.x=zd,lb.y=Ya,lb.z=Kb,lb.w=Na;Zb=e.call(this,K,b,0);Qa=!1;ub=null;vb=0;Sa=!1;ec=mb=0;Dc=1;uc=0;bb=5126;Mc=
Xa=ad=ic=0;sa(Zb)?(Qa=!0,ub=t.createStream(34962,Zb),bb=ub.dtype):(ub=t.getBuffer(Zb))?bb=ub.dtype:"constant"in Zb?(Dc=2,"number"===typeof Zb.constant?(ad=Zb.constant,Xa=Mc=ic=0):(ad=0<Zb.constant.length?Zb.constant[0]:0,Xa=1<Zb.constant.length?Zb.constant[1]:0,Mc=2<Zb.constant.length?Zb.constant[2]:0,ic=3<Zb.constant.length?Zb.constant[3]:0)):(ub=sa(Zb.buffer)?t.createStream(34962,Zb.buffer):t.getBuffer(Zb.buffer),bb="type"in Zb?be[Zb.type]:ub.dtype,Sa=!!Zb.normalized,ec=Zb.size|0,mb=Zb.offset|0,
uc=Zb.stride|0,vb=Zb.divisor|0);zb=ka.location;Za=v[zb];if(1===Dc){Za.buffer||I.enableVertexAttribArray(zb);Ub=ec||1;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=ub,Za.normalized=Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==vb&&(C.vertexAttribDivisorANGLE(zb,vb),Za.divisor=vb)}else if(Za.buffer&&(I.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==
ad||Za.y!==Xa||Za.z!==Mc||Za.w!==ic)I.vertexAttrib4f(zb,ad,Xa,Mc,ic),Za.x=ad,Za.y=Xa,Za.z=Mc,Za.w=ic;sc=B.call(this,K,b,0);Vb=!1;Pb=null;Jc=0;Qb=!1;Cc=qd=0;he=1;Nc=0;Wc=5126;fc=vc=mc=ud=0;sa(sc)?(Vb=!0,Pb=t.createStream(34962,sc),Wc=Pb.dtype):(Pb=t.getBuffer(sc))?Wc=Pb.dtype:"constant"in sc?(he=2,"number"===typeof sc.constant?(mc=sc.constant,vc=fc=ud=0):(mc=0<sc.constant.length?sc.constant[0]:0,vc=1<sc.constant.length?sc.constant[1]:0,fc=2<sc.constant.length?sc.constant[2]:0,ud=3<sc.constant.length?
sc.constant[3]:0)):(Pb=sa(sc.buffer)?t.createStream(34962,sc.buffer):t.getBuffer(sc.buffer),Wc="type"in sc?be[sc.type]:Pb.dtype,Qb=!!sc.normalized,Cc=sc.size|0,qd=sc.offset|0,Nc=sc.stride|0,Jc=sc.divisor|0);db=na.location;rc=v[db];if(1===he){rc.buffer||I.enableVertexAttribArray(db);Sb=Cc||1;if(rc.type!==Wc||rc.size!==Sb||rc.buffer!==Pb||rc.normalized!==Qb||rc.offset!==qd||rc.stride!==Nc)I.bindBuffer(34962,Pb.buffer),I.vertexAttribPointer(db,Sb,Wc,Qb,Nc,qd),rc.type=Wc,rc.size=Sb,rc.buffer=Pb,rc.normalized=
Qb,rc.offset=qd,rc.stride=Nc;rc.divisor!==Jc&&(C.vertexAttribDivisorANGLE(db,Jc),rc.divisor=Jc)}else if(rc.buffer&&(I.disableVertexAttribArray(db),rc.buffer=null),rc.x!==mc||rc.y!==vc||rc.z!==fc||rc.w!==ud)I.vertexAttrib4f(db,mc,vc,fc,ud),rc.x=mc,rc.y=vc,rc.z=fc,rc.w=ud;Wb=D.call(this,K,b,0);bc=!1;gc=null;xc=0;zc=!1;Qc=bd=0;Rc=1;Sc=0;Xc=5126;jc=Yc=cd=wd=0;sa(Wb)?(bc=!0,gc=t.createStream(34962,Wb),Xc=gc.dtype):(gc=t.getBuffer(Wb))?Xc=gc.dtype:"constant"in Wb?(Rc=2,"number"===typeof Wb.constant?(cd=
Wb.constant,Yc=jc=wd=0):(cd=0<Wb.constant.length?Wb.constant[0]:0,Yc=1<Wb.constant.length?Wb.constant[1]:0,jc=2<Wb.constant.length?Wb.constant[2]:0,wd=3<Wb.constant.length?Wb.constant[3]:0)):(gc=sa(Wb.buffer)?t.createStream(34962,Wb.buffer):t.getBuffer(Wb.buffer),Xc="type"in Wb?be[Wb.type]:gc.dtype,zc=!!Wb.normalized,Qc=Wb.size|0,bd=Wb.offset|0,Sc=Wb.stride|0,xc=Wb.divisor|0);ac=n.location;Zc=v[ac];if(1===Rc){Zc.buffer||I.enableVertexAttribArray(ac);Uc=Qc||4;if(Zc.type!==Xc||Zc.size!==Uc||Zc.buffer!==
gc||Zc.normalized!==zc||Zc.offset!==bd||Zc.stride!==Sc)I.bindBuffer(34962,gc.buffer),I.vertexAttribPointer(ac,Uc,Xc,zc,Sc,bd),Zc.type=Xc,Zc.size=Uc,Zc.buffer=gc,Zc.normalized=zc,Zc.offset=bd,Zc.stride=Sc;Zc.divisor!==xc&&(C.vertexAttribDivisorANGLE(ac,xc),Zc.divisor=xc)}else if(Zc.buffer&&(I.disableVertexAttribArray(ac),Zc.buffer=null),Zc.x!==cd||Zc.y!==Yc||Zc.z!==jc||Zc.w!==wd)I.vertexAttrib4f(ac,cd,Yc,jc,wd),Zc.x=cd,Zc.y=Yc,Zc.z=jc,Zc.w=wd;dd=F.call(this,K,b,0);yc=!1;jd=null;rd=0;xe=!1;kd=Be=0;
uf=1;Nd=0;Xd=5126;Fd=Id=Od=de=0;sa(dd)?(yc=!0,jd=t.createStream(34962,dd),Xd=jd.dtype):(jd=t.getBuffer(dd))?Xd=jd.dtype:"constant"in dd?(uf=2,"number"===typeof dd.constant?(Od=dd.constant,Id=Fd=de=0):(Od=0<dd.constant.length?dd.constant[0]:0,Id=1<dd.constant.length?dd.constant[1]:0,Fd=2<dd.constant.length?dd.constant[2]:0,de=3<dd.constant.length?dd.constant[3]:0)):(jd=sa(dd.buffer)?t.createStream(34962,dd.buffer):t.getBuffer(dd.buffer),Xd="type"in dd?be[dd.type]:jd.dtype,xe=!!dd.normalized,kd=dd.size|
0,Be=dd.offset|0,Nd=dd.stride|0,rd=dd.divisor|0);od=wa.location;Tc=v[od];if(1===uf){Tc.buffer||I.enableVertexAttribArray(od);vd=kd||4;if(Tc.type!==Xd||Tc.size!==vd||Tc.buffer!==jd||Tc.normalized!==xe||Tc.offset!==Be||Tc.stride!==Nd)I.bindBuffer(34962,jd.buffer),I.vertexAttribPointer(od,vd,Xd,xe,Nd,Be),Tc.type=Xd,Tc.size=vd,Tc.buffer=jd,Tc.normalized=xe,Tc.offset=Be,Tc.stride=Nd;Tc.divisor!==rd&&(C.vertexAttribDivisorANGLE(od,rd),Tc.divisor=rd)}else if(Tc.buffer&&(I.disableVertexAttribArray(od),Tc.buffer=
null),Tc.x!==Od||Tc.y!==Id||Tc.z!==Fd||Tc.w!==de)I.vertexAttrib4f(od,Od,Id,Fd,de),Tc.x=Od,Tc.y=Id,Tc.z=Fd,Tc.w=de;td=U.call(this,K,b,0);ld=!1;xd=null;Bd=0;Dd=!1;le=qe=0;Ne=1;me=0;ke=5126;ne=ee=ue=ie=0;sa(td)?(ld=!0,xd=t.createStream(34962,td),ke=xd.dtype):(xd=t.getBuffer(td))?ke=xd.dtype:"constant"in td?(Ne=2,"number"===typeof td.constant?(ue=td.constant,ee=ne=ie=0):(ue=0<td.constant.length?td.constant[0]:0,ee=1<td.constant.length?td.constant[1]:0,ne=2<td.constant.length?td.constant[2]:0,ie=3<td.constant.length?
td.constant[3]:0)):(xd=sa(td.buffer)?t.createStream(34962,td.buffer):t.getBuffer(td.buffer),ke="type"in td?be[td.type]:xd.dtype,Dd=!!td.normalized,le=td.size|0,qe=td.offset|0,me=td.stride|0,Bd=td.divisor|0);Oc=ba.location;hd=v[Oc];if(1===Ne){hd.buffer||I.enableVertexAttribArray(Oc);ve=le||1;if(hd.type!==ke||hd.size!==ve||hd.buffer!==xd||hd.normalized!==Dd||hd.offset!==qe||hd.stride!==me)I.bindBuffer(34962,xd.buffer),I.vertexAttribPointer(Oc,ve,ke,Dd,me,qe),hd.type=ke,hd.size=ve,hd.buffer=xd,hd.normalized=
Dd,hd.offset=qe,hd.stride=me;hd.divisor!==Bd&&(C.vertexAttribDivisorANGLE(Oc,Bd),hd.divisor=Bd)}else if(hd.buffer&&(I.disableVertexAttribArray(Oc),hd.buffer=null),hd.x!==ue||hd.y!==ee||hd.z!==ne||hd.w!==ie)I.vertexAttrib4f(Oc,ue,ee,ne,ie),hd.x=ue,hd.y=ee,hd.z=ne,hd.w=ie;I.uniform1i(H.location,!1);I.uniform1f(Ca.location,K.pixelRatio);re=b.scale;I.uniform2f(fa.location,re[0],re[1]);Jd=b.scaleFract;I.uniform2f(Ea.location,Jd[0],Jd[1]);Pd=b.translate;I.uniform2f(oa.location,Pd[0],Pd[1]);Rd=b.translateFract;
I.uniform2f(Aa.location,Rd[0],Rd[1]);Sd=w.call(this,K,b,0);I.uniform2f(qa.location,Sd[0],Sd[1]);I.uniform1f(la.location,b.opacity);I.uniform1i(Da.location,m.bind());(oe=b.markerTexture)&&"framebuffer"===oe._reglType&&(oe=oe.color[0]);ze=oe._texture;I.uniform1i(O.location,ze.bind());Ce=b.elements;se=null;(se=(Se=sa(Ce))?ed.createStream(Ce):ed.getElements(Ce))&&I.bindBuffer(34963,se.buffer.buffer);Te=b.offset;if(Oe=b.count)we=va.instances,0<we?se?C.drawElementsInstancedANGLE(0,Oe,se.type,Te<<(se.type-
5121>>1),we):C.drawArraysInstancedANGLE(0,Te,Oe,we):0>we&&(se?I.drawElements(0,Oe,se.type,Te<<(se.type-5121>>1)):I.drawArrays(0,Te,Oe)),ua.dirty=!0,Ga.setVAO(null),K.viewportWidth=p,K.viewportHeight=y,pa&&(Z.cpuTime+=performance.now()-T),N&&t.destroyStream(x),V&&t.destroyStream(Fa),wb&&t.destroyStream(hb),kb&&t.destroyStream(Wa),Qa&&t.destroyStream(ub),Vb&&t.destroyStream(Pb),bc&&t.destroyStream(gc),yc&&t.destroyStream(jd),ld&&t.destroyStream(xd),m.unbind(),ze.unbind(),Se&&ed.destroyStream(se)},scope:function(e,
k,l){var a,n,v,q,I,h,z,ma,H,S,O,A,fa,T,m,ha,J,Xb,N,Ba,w,M,G,D,Y,B,ba,wa,Ca,qa,Ga,F,U,ca,ka,X,ea,Ta,oa,Ea,Aa,na,la,ra,xa,ta,Da,Gb,V,Ia,id,gb,Ka,Rb,ia,$b,ob,nc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Md,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,Cd,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,za,Cc,Vd,Nc,Wc,ge,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,ye,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,Ld,pe,kd,Ad,je,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Qf,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,
ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=e.viewport;n=a.x|0;v=a.y|0;q="width"in a?a.width|0:K.framebufferWidth-n;I="height"in a?a.height|0:K.framebufferHeight-v;h=K.viewportWidth;
K.viewportWidth=q;z=K.viewportHeight;K.viewportHeight=I;ma=he[0];he[0]=n;H=he[1];he[1]=v;S=he[2];he[2]=q;O=he[3];he[3]=I;A=ja[0];ja[0]=0;fa=ja[1];ja[1]=0;T=ja[2];ja[2]=0;m=ja[3];ja[3]=1;ha=Ha.blend_enable;Ha.blend_enable=!0;J=Fa[0];Fa[0]=770;Xb=Fa[1];Fa[1]=771;N=Fa[2];Fa[2]=773;Ba=Fa[3];Fa[3]=1;w=Ha.depth_enable;Ha.depth_enable=!1;M=e.viewport;G=M.x|0;D=M.y|0;Y="width"in M?M.width|0:K.framebufferWidth-G;B="height"in M?M.height|0:K.framebufferHeight-D;ba=zd[0];zd[0]=G;wa=zd[1];zd[1]=D;Ca=zd[2];zd[2]=
Y;qa=zd[3];zd[3]=B;Ga=Ha.scissor_enable;Ha.scissor_enable=!0;F=Ha.stencil_enable;Ha.stencil_enable=!1;if(U=ua.profile)ca=performance.now(),Z.count++;ka=e.elements;X=null;X=(ea=sa(ka))?ed.createStream(ka):ed.getElements(ka);Ta=va.elements;va.elements=X;oa=e.offset;Ea=va.offset;va.offset=oa;Aa=e.count;na=va.count;va.count=Aa;la=va.primitive;va.primitive=0;ra=ya[45];ya[45]=!1;xa=e.markerTexture;ta=ya[48];ya[48]=xa;Da=e.opacity;Gb=ya[10];ya[10]=Da;V=r.call(this,K,e,l);Ia=ya[46];ya[46]=V;id=ya[47];ya[47]=
da;gb=K.pixelRatio;Ka=ya[34];ya[34]=gb;Rb=e.scale;ia=ya[6];ya[6]=Rb;$b=e.scaleFract;ob=ya[7];ya[7]=$b;nc=e.translate;ib=ya[8];ya[8]=nc;pb=e.translateFract;Ja=ya[9];ya[9]=pb;rb=u.call(this,K,e,l);La=!1;eb=null;fb=0;Ma=!1;Wa=kb=0;tb=1;sb=0;Pa=5126;Db=Jb=Ra=Md=0;sa(rb)?(La=!0,eb=t.createStream(34962,rb),Pa=eb.dtype):(eb=t.getBuffer(rb))?Pa=eb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Ra=rb.constant,Jb=Db=Md=0):(Ra=0<rb.constant.length?rb.constant[0]:0,Jb=1<rb.constant.length?rb.constant[1]:
0,Db=2<rb.constant.length?rb.constant[2]:0,Md=3<rb.constant.length?rb.constant[3]:0)):(eb=sa(rb.buffer)?t.createStream(34962,rb.buffer):t.getBuffer(rb.buffer),Pa="type"in rb?be[rb.type]:eb.dtype,Ma=!!rb.normalized,Wa=rb.size|0,kb=rb.offset|0,sb=rb.stride|0,fb=rb.divisor|0);Na=P.buffer;P.buffer=eb;yd=P.divisor;P.divisor=fb;Ya=P.normalized;P.normalized=Ma;Kb=P.offset;P.offset=kb;Lb=P.size;P.size=Wa;lb=P.state;P.state=tb;Oa=P.stride;P.stride=sb;Zb=P.type;P.type=Pa;Qa=P.w;P.w=Md;ub=P.x;P.x=Ra;vb=P.y;
P.y=Jb;Sa=P.z;P.z=Db;mb=x.call(this,K,e,l);ec=!1;Dc=null;uc=0;bb=!1;Cd=ic=0;Xa=1;Mc=0;zb=5126;Vb=sc=Ub=Za=0;sa(mb)?(ec=!0,Dc=t.createStream(34962,mb),zb=Dc.dtype):(Dc=t.getBuffer(mb))?zb=Dc.dtype:"constant"in mb?(Xa=2,"number"===typeof mb.constant?(Ub=mb.constant,sc=Vb=Za=0):(Ub=0<mb.constant.length?mb.constant[0]:0,sc=1<mb.constant.length?mb.constant[1]:0,Vb=2<mb.constant.length?mb.constant[2]:0,Za=3<mb.constant.length?mb.constant[3]:0)):(Dc=sa(mb.buffer)?t.createStream(34962,mb.buffer):t.getBuffer(mb.buffer),
zb="type"in mb?be[mb.type]:Dc.dtype,bb=!!mb.normalized,Cd=mb.size|0,ic=mb.offset|0,Mc=mb.stride|0,uc=mb.divisor|0);Pb=R.buffer;R.buffer=Dc;Jc=R.divisor;R.divisor=uc;Qb=R.normalized;R.normalized=bb;za=R.offset;R.offset=ic;Cc=R.size;R.size=Cd;Vd=R.state;R.state=Xa;Nc=R.stride;R.stride=Mc;Wc=R.type;R.type=zb;ge=R.w;R.w=Za;mc=R.x;R.x=Ub;vc=R.y;R.y=sc;fc=R.z;R.z=Vb;db=ga.call(this,K,e,l);rc=!1;Sb=null;Wb=0;bc=!1;xc=gc=0;zc=1;bd=0;Qc=5126;ye=Xc=Sc=Rc=0;sa(db)?(rc=!0,Sb=t.createStream(34962,db),Qc=Sb.dtype):
(Sb=t.getBuffer(db))?Qc=Sb.dtype:"constant"in db?(zc=2,"number"===typeof db.constant?(Sc=db.constant,Xc=ye=Rc=0):(Sc=0<db.constant.length?db.constant[0]:0,Xc=1<db.constant.length?db.constant[1]:0,ye=2<db.constant.length?db.constant[2]:0,Rc=3<db.constant.length?db.constant[3]:0)):(Sb=sa(db.buffer)?t.createStream(34962,db.buffer):t.getBuffer(db.buffer),Qc="type"in db?be[db.type]:Sb.dtype,bc=!!db.normalized,xc=db.size|0,gc=db.offset|0,bd=db.stride|0,Wb=db.divisor|0);cd=c.buffer;c.buffer=Sb;Yc=c.divisor;
c.divisor=Wb;jc=c.normalized;c.normalized=bc;ac=c.offset;c.offset=gc;Zc=c.size;c.size=xc;Uc=c.state;c.state=zc;dd=c.stride;c.stride=bd;yc=c.type;c.type=Qc;jd=c.w;c.w=Rc;rd=c.x;c.x=Sc;Ld=c.y;c.y=Xc;pe=c.z;c.z=ye;kd=f.call(this,K,e,l);Ad=!1;je=null;Xd=0;de=!1;Id=Od=0;Fd=1;od=0;Tc=5126;xd=ld=td=vd=0;sa(kd)?(Ad=!0,je=t.createStream(34962,kd),Tc=je.dtype):(je=t.getBuffer(kd))?Tc=je.dtype:"constant"in kd?(Fd=2,"number"===typeof kd.constant?(td=kd.constant,ld=xd=vd=0):(td=0<kd.constant.length?kd.constant[0]:
0,ld=1<kd.constant.length?kd.constant[1]:0,xd=2<kd.constant.length?kd.constant[2]:0,vd=3<kd.constant.length?kd.constant[3]:0)):(je=sa(kd.buffer)?t.createStream(34962,kd.buffer):t.getBuffer(kd.buffer),Tc="type"in kd?be[kd.type]:je.dtype,de=!!kd.normalized,Id=kd.size|0,Od=kd.offset|0,od=kd.stride|0,Xd=kd.divisor|0);Bd=L.buffer;L.buffer=je;Dd=L.divisor;L.divisor=Xd;qe=L.normalized;L.normalized=de;le=L.offset;L.offset=Od;Qf=L.size;L.size=Id;me=L.state;L.state=Fd;ke=L.stride;L.stride=od;ie=L.type;L.type=
Tc;ue=L.w;L.w=vd;ee=L.x;L.x=td;ne=L.y;L.y=ld;Oc=L.z;L.z=xd;hd=p.call(this,K,e,l);ve=!1;re=null;Jd=0;Pd=!1;Sd=Rd=0;oe=1;ze=0;Ce=5126;Oe=Te=Se=se=0;sa(hd)?(ve=!0,re=t.createStream(34962,hd),Ce=re.dtype):(re=t.getBuffer(hd))?Ce=re.dtype:"constant"in hd?(oe=2,"number"===typeof hd.constant?(Se=hd.constant,Te=Oe=se=0):(Se=0<hd.constant.length?hd.constant[0]:0,Te=1<hd.constant.length?hd.constant[1]:0,Oe=2<hd.constant.length?hd.constant[2]:0,se=3<hd.constant.length?hd.constant[3]:0)):(re=sa(hd.buffer)?t.createStream(34962,
hd.buffer):t.getBuffer(hd.buffer),Ce="type"in hd?be[hd.type]:re.dtype,Pd=!!hd.normalized,Sd=hd.size|0,Rd=hd.offset|0,ze=hd.stride|0,Jd=hd.divisor|0);we=aa.buffer;aa.buffer=re;Ge=aa.divisor;aa.divisor=Jd;Ie=aa.normalized;aa.normalized=Pd;Je=aa.offset;aa.offset=Rd;Ke=aa.size;aa.size=Sd;He=aa.state;aa.state=oe;Kd=aa.stride;aa.stride=ze;Yd=aa.type;aa.type=Ce;ce=aa.w;aa.w=se;fe=aa.x;aa.x=Se;Le=aa.y;aa.y=Te;Gd=aa.z;aa.z=Oe;Td=y.call(this,K,e,l);Ee=!1;Me=null;bf=0;af=!1;Pe=Ue=0;$e=1;Ye=0;Ve=5126;Xe=ae=Ud=
We=0;sa(Td)?(Ee=!0,Me=t.createStream(34962,Td),Ve=Me.dtype):(Me=t.getBuffer(Td))?Ve=Me.dtype:"constant"in Td?($e=2,"number"===typeof Td.constant?(Ud=Td.constant,ae=Xe=We=0):(Ud=0<Td.constant.length?Td.constant[0]:0,ae=1<Td.constant.length?Td.constant[1]:0,Xe=2<Td.constant.length?Td.constant[2]:0,We=3<Td.constant.length?Td.constant[3]:0)):(Me=sa(Td.buffer)?t.createStream(34962,Td.buffer):t.getBuffer(Td.buffer),Ve="type"in Td?be[Td.type]:Me.dtype,af=!!Td.normalized,Pe=Td.size|0,Ue=Td.offset|0,Ye=Td.stride|
0,bf=Td.divisor|0);hf=g.buffer;g.buffer=Me;mf=g.divisor;g.divisor=bf;ef=g.normalized;g.normalized=af;jf=g.offset;g.offset=Ue;kf=g.size;g.size=Pe;lf=g.state;g.state=$e;qf=g.stride;g.stride=Ye;nf=g.type;g.type=Ve;rf=g.w;g.w=We;Bf=g.x;g.x=Ud;Cf=g.y;g.y=ae;Qe=g.z;g.z=Xe;Fe=W.call(this,K,e,l);of=!1;pf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Fe)?(of=!0,pf=t.createStream(34962,Fe),xf=pf.dtype):(pf=t.getBuffer(Fe))?xf=pf.dtype:"constant"in Fe?(Ff=2,"number"===typeof Fe.constant?(yf=Fe.constant,
zf=If=vf=0):(yf=0<Fe.constant.length?Fe.constant[0]:0,zf=1<Fe.constant.length?Fe.constant[1]:0,If=2<Fe.constant.length?Fe.constant[2]:0,vf=3<Fe.constant.length?Fe.constant[3]:0)):(pf=sa(Fe.buffer)?t.createStream(34962,Fe.buffer):t.getBuffer(Fe.buffer),xf="type"in Fe?be[Fe.type]:pf.dtype,Gf=!!Fe.normalized,Ef=Fe.size|0,Af=Fe.offset|0,wf=Fe.stride|0,Df=Fe.divisor|0);Jf=C.buffer;C.buffer=pf;Kf=C.divisor;C.divisor=Df;Lf=C.normalized;C.normalized=Gf;sf=C.offset;C.offset=Af;Rf=C.size;C.size=Ef;Hf=C.state;
C.state=Ff;tf=C.stride;C.stride=wf;dg=C.type;C.type=xf;Sf=C.w;C.w=vf;Tf=C.x;C.x=yf;qg=C.y;C.y=zf;ff=C.z;C.z=If;cf=E.call(this,K,e,l);Mf=!1;Nf=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;sa(cf)?(Mf=!0,Nf=t.createStream(34962,cf),Uf=Nf.dtype):(Nf=t.getBuffer(cf))?Uf=Nf.dtype:"constant"in cf?(ig=2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?
cf.constant[3]:0)):(Nf=sa(cf.buffer)?t.createStream(34962,cf.buffer):t.getBuffer(cf.buffer),Uf="type"in cf?be[cf.type]:Nf.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=d.buffer;d.buffer=Nf;sg=d.divisor;d.divisor=eg;tg=d.normalized;d.normalized=fg;ug=d.offset;d.offset=gg;vg=d.size;d.size=hg;wg=d.state;d.state=ig;xg=d.stride;d.stride=Wf;yg=d.type;d.type=Uf;zg=d.w;d.w=Xf;Ag=d.x;d.x=Yf;Bg=d.y;d.y=Zf;gf=d.z;d.z=jg;df=Q.call(this,K,e,l);Of=!1;Pf=null;kg=0;lg=!1;
ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;sa(df)?(Of=!0,Pf=t.createStream(34962,df),Vf=Pf.dtype):(Pf=t.getBuffer(df))?Vf=Pf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Pf=sa(df.buffer)?t.createStream(34962,df.buffer):t.getBuffer(df.buffer),Vf="type"in df?be[df.type]:Pf.dtype,lg=!!df.normalized,
ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=b.buffer;b.buffer=Pf;Dg=b.divisor;b.divisor=kg;Eg=b.normalized;b.normalized=lg;Fg=b.offset;b.offset=mg;Gg=b.size;b.size=ng;Hg=b.state;b.state=og;Ig=b.stride;b.stride=$f;Jg=b.type;b.type=Vf;Kg=b.w;b.w=ag;Lg=b.x;b.x=bg;Mg=b.y;b.y=cg;Ng=b.z;b.z=pg;Og=pa.vert;pa.vert=44;Pg=pa.frag;pa.frag=43;ua.dirty=!0;k(K,e,l);K.viewportWidth=h;K.viewportHeight=z;he[0]=ma;he[1]=H;he[2]=S;he[3]=O;ja[0]=A;ja[1]=fa;ja[2]=T;ja[3]=m;Ha.blend_enable=ha;Fa[0]=
J;Fa[1]=Xb;Fa[2]=N;Fa[3]=Ba;Ha.depth_enable=w;zd[0]=ba;zd[1]=wa;zd[2]=Ca;zd[3]=qa;Ha.scissor_enable=Ga;Ha.stencil_enable=F;U&&(Z.cpuTime+=performance.now()-ca);ea&&ed.destroyStream(X);va.elements=Ta;va.offset=Ea;va.count=na;va.primitive=la;ya[45]=ra;ya[48]=ta;ya[10]=Gb;ya[46]=Ia;ya[47]=id;ya[34]=Ka;ya[6]=ia;ya[7]=ob;ya[8]=ib;ya[9]=Ja;La&&t.destroyStream(eb);P.buffer=Na;P.divisor=yd;P.normalized=Ya;P.offset=Kb;P.size=Lb;P.state=lb;P.stride=Oa;P.type=Zb;P.w=Qa;P.x=ub;P.y=vb;P.z=Sa;ec&&t.destroyStream(Dc);
R.buffer=Pb;R.divisor=Jc;R.normalized=Qb;R.offset=za;R.size=Cc;R.state=Vd;R.stride=Nc;R.type=Wc;R.w=ge;R.x=mc;R.y=vc;R.z=fc;rc&&t.destroyStream(Sb);c.buffer=cd;c.divisor=Yc;c.normalized=jc;c.offset=ac;c.size=Zc;c.state=Uc;c.stride=dd;c.type=yc;c.w=jd;c.x=rd;c.y=Ld;c.z=pe;Ad&&t.destroyStream(je);L.buffer=Bd;L.divisor=Dd;L.normalized=qe;L.offset=le;L.size=Qf;L.state=me;L.stride=ke;L.type=ie;L.w=ue;L.x=ee;L.y=ne;L.z=Oc;ve&&t.destroyStream(re);aa.buffer=we;aa.divisor=Ge;aa.normalized=Ie;aa.offset=Je;
aa.size=Ke;aa.state=He;aa.stride=Kd;aa.type=Yd;aa.w=ce;aa.x=fe;aa.y=Le;aa.z=Gd;Ee&&t.destroyStream(Me);g.buffer=hf;g.divisor=mf;g.normalized=ef;g.offset=jf;g.size=kf;g.state=lf;g.stride=qf;g.type=nf;g.w=rf;g.x=Bf;g.y=Cf;g.z=Qe;of&&t.destroyStream(pf);C.buffer=Jf;C.divisor=Kf;C.normalized=Lf;C.offset=sf;C.size=Rf;C.state=Hf;C.stride=tf;C.type=dg;C.w=Sf;C.x=Tf;C.y=qg;C.z=ff;Mf&&t.destroyStream(Nf);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;
d.x=Ag;d.y=Bg;d.z=gf;Of&&t.destroyStream(Pf);b.buffer=Cg;b.divisor=Dg;b.normalized=Eg;b.offset=Fg;b.size=Gg;b.state=Hg;b.stride=Ig;b.type=Jg;b.w=Kg;b.x=Lg;b.y=Mg;b.z=Ng;pa.vert=Og;pa.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,
la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb){var Ta,v,t,K,ua,va,ed,Gb,ha,I,sa,Ha,pa,ya,Ga,ja,Y,ta,Ka,Fa,gb,ca,ia,$b,Ia,nc,Rb,za,Cd,zd,Md,ye,Ad,Vd,pe,je,Ld,he,ge;Ta=a.attributes;v=a.buffer;t=a.context;K=a.current;ua=a.draw;va=a.elements;ed=a.extensions;Gb=a.framebuffer;ha=a.gl;I=a.isBufferArgs;sa=a.next;Ha=a.shader;pa=a.uniforms;ya=a.vao;Ga=sa.blend_color;ja=K.blend_color;Y=sa.blend_equation;ta=K.blend_equation;Ka=sa.blend_func;Fa=K.blend_func;gb=sa.colorMask;ca=K.colorMask;ia=sa.depth_range;$b=K.depth_range;
Ia=sa.polygonOffset_offset;nc=K.polygonOffset_offset;Rb=sa.sample_coverage;za=K.sample_coverage;Cd=sa.scissor_box;zd=K.scissor_box;Md=sa.stencil_func;ye=K.stencil_func;Ad=sa.stencil_opBack;Vd=K.stencil_opBack;pe=sa.stencil_opFront;je=K.stencil_opFront;Ld=sa.viewport;he=K.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,d){var c,e,f,k,g,a;c=Gb.next;c!==Gb.cur&&(c?ha.bindFramebuffer(36160,c.framebuffer):ha.bindFramebuffer(36160,
null),Gb.cur=c);if(K.dirty){var q,p,h,y,Ha,u,E,pa,C,m,J,x,w,L,G,D,B,r,Q,R,P,Ga,F,U,aa,ga,da,W,Ka,$a,Hc,yb,cb,Mb;q=sa.dither;q!==K.dither&&(q?ha.enable(3024):ha.disable(3024),K.dither=q);p=Y[0];h=Y[1];if(p!==ta[0]||h!==ta[1])ha.blendEquationSeparate(p,h),ta[0]=p,ta[1]=h;y=sa.depth_func;y!==K.depth_func&&(ha.depthFunc(y),K.depth_func=y);Ha=ia[0];u=ia[1];if(Ha!==$b[0]||u!==$b[1])ha.depthRange(Ha,u),$b[0]=Ha,$b[1]=u;E=sa.depth_mask;E!==K.depth_mask&&(ha.depthMask(E),K.depth_mask=E);pa=gb[0];C=gb[1];m=
gb[2];J=gb[3];if(pa!==ca[0]||C!==ca[1]||m!==ca[2]||J!==ca[3])ha.colorMask(pa,C,m,J),ca[0]=pa,ca[1]=C,ca[2]=m,ca[3]=J;x=sa.cull_enable;x!==K.cull_enable&&(x?ha.enable(2884):ha.disable(2884),K.cull_enable=x);w=sa.cull_face;w!==K.cull_face&&(ha.cullFace(w),K.cull_face=w);L=sa.frontFace;L!==K.frontFace&&(ha.frontFace(L),K.frontFace=L);G=sa.lineWidth;G!==K.lineWidth&&(ha.lineWidth(G),K.lineWidth=G);D=sa.polygonOffset_enable;D!==K.polygonOffset_enable&&(D?ha.enable(32823):ha.disable(32823),K.polygonOffset_enable=
D);B=Ia[0];r=Ia[1];if(B!==nc[0]||r!==nc[1])ha.polygonOffset(B,r),nc[0]=B,nc[1]=r;Q=sa.sample_alpha;Q!==K.sample_alpha&&(Q?ha.enable(32926):ha.disable(32926),K.sample_alpha=Q);R=sa.sample_enable;R!==K.sample_enable&&(R?ha.enable(32928):ha.disable(32928),K.sample_enable=R);P=Rb[0];Ga=Rb[1];if(P!==za[0]||Ga!==za[1])ha.sampleCoverage(P,Ga),za[0]=P,za[1]=Ga;F=sa.stencil_mask;F!==K.stencil_mask&&(ha.stencilMask(F),K.stencil_mask=F);U=Md[0];aa=Md[1];ga=Md[2];if(U!==ye[0]||aa!==ye[1]||ga!==ye[2])ha.stencilFunc(U,
aa,ga),ye[0]=U,ye[1]=aa,ye[2]=ga;da=pe[0];W=pe[1];Ka=pe[2];$a=pe[3];if(da!==je[0]||W!==je[1]||Ka!==je[2]||$a!==je[3])ha.stencilOpSeparate(da,W,Ka,$a),je[0]=da,je[1]=W,je[2]=Ka,je[3]=$a;Hc=Ad[0];yb=Ad[1];cb=Ad[2];Mb=Ad[3];if(Hc!==Vd[0]||yb!==Vd[1]||cb!==Vd[2]||Mb!==Vd[3])ha.stencilOpSeparate(Hc,yb,cb,Mb),Vd[0]=Hc,Vd[1]=yb,Vd[2]=cb,Vd[3]=Mb}ha.blendColor(0,0,0,1);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=1;ha.enable(3042);K.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=
1;ha.disable(2929);K.depth_enable=!1;ha.enable(3089);K.scissor_enable=!0;ha.disable(2960);K.stencil_enable=!1;if(e=K.profile)f=performance.now(),Z.count+=d;ha.useProgram(xa.program);k=ed.angle_instanced_arrays;var ab;ya.setVAO(null);ha.uniform1i(H.location,!1);ha.uniform1i(qa.location,M.bind());ab=ua.instances;for(g=0;g<d;++g){a=b[g];var nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Cd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,
ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Ld,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,uf,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf;nb=a.viewport;Va=nb.x|0;Lc=nb.y|0;Hb="width"in nb?nb.width|0:t.framebufferWidth-
Va;Ib="height"in nb?nb.height|0:t.framebufferHeight-Lc;qc=t.viewportWidth;t.viewportWidth=Hb;Nb=t.viewportHeight;t.viewportHeight=Ib;ha.viewport(Va,Lc,Hb,Ib);he[0]=Va;he[1]=Lc;he[2]=Hb;he[3]=Ib;jb=a.viewport;Fb=jb.x|0;Cb=jb.y|0;wb="width"in jb?jb.width|0:t.framebufferWidth-Fb;hb="height"in jb?jb.height|0:t.framebufferHeight-Cb;ha.scissor(Fb,Cb,wb,hb);zd[0]=Fb;zd[1]=Cb;zd[2]=wb;zd[3]=hb;Yb=z.call(this,t,a,g);Ob=!1;qb=null;Ua=0;Tb=!1;hc=ob=0;ib=1;pb=0;Ja=5126;fb=eb=La=rb=0;I(Yb)?(Ob=!0,qb=v.createStream(34962,
Yb),Ja=qb.dtype):(qb=v.getBuffer(Yb))?Ja=qb.dtype:"constant"in Yb?(ib=2,"number"===typeof Yb.constant?(La=Yb.constant,eb=fb=rb=0):(La=0<Yb.constant.length?Yb.constant[0]:0,eb=1<Yb.constant.length?Yb.constant[1]:0,fb=2<Yb.constant.length?Yb.constant[2]:0,rb=3<Yb.constant.length?Yb.constant[3]:0)):(qb=I(Yb.buffer)?v.createStream(34962,Yb.buffer):v.getBuffer(Yb.buffer),Ja="type"in Yb?ge[Yb.type]:qb.dtype,Tb=!!Yb.normalized,hc=Yb.size|0,ob=Yb.offset|0,pb=Yb.stride|0,Ua=Yb.divisor|0);Ma=Aa.location;kb=
Ta[Ma];if(1===ib){kb.buffer||ha.enableVertexAttribArray(Ma);Wa=hc||1;if(kb.type!==Ja||kb.size!==Wa||kb.buffer!==qb||kb.normalized!==Tb||kb.offset!==ob||kb.stride!==pb)ha.bindBuffer(34962,qb.buffer),ha.vertexAttribPointer(Ma,Wa,Ja,Tb,pb,ob),kb.type=Ja,kb.size=Wa,kb.buffer=qb,kb.normalized=Tb,kb.offset=ob,kb.stride=pb;kb.divisor!==Ua&&(k.vertexAttribDivisorANGLE(Ma,Ua),kb.divisor=Ua)}else if(kb.buffer&&(ha.disableVertexAttribArray(Ma),kb.buffer=null),kb.x!==La||kb.y!==eb||kb.z!==fb||kb.w!==rb)ha.vertexAttrib4f(Ma,
La,eb,fb,rb),kb.x=La,kb.y=eb,kb.z=fb,kb.w=rb;tb=ra.call(this,t,a,g);sb=!1;Pa=null;Ac=0;Ra=!1;Db=Jb=0;Na=1;Cd=0;Ya=5126;Oa=lb=Lb=Kb=0;I(tb)?(sb=!0,Pa=v.createStream(34962,tb),Ya=Pa.dtype):(Pa=v.getBuffer(tb))?Ya=Pa.dtype:"constant"in tb?(Na=2,"number"===typeof tb.constant?(Lb=tb.constant,lb=Oa=Kb=0):(Lb=0<tb.constant.length?tb.constant[0]:0,lb=1<tb.constant.length?tb.constant[1]:0,Oa=2<tb.constant.length?tb.constant[2]:0,Kb=3<tb.constant.length?tb.constant[3]:0)):(Pa=I(tb.buffer)?v.createStream(34962,
tb.buffer):v.getBuffer(tb.buffer),Ya="type"in tb?ge[tb.type]:Pa.dtype,Ra=!!tb.normalized,Db=tb.size|0,Jb=tb.offset|0,Cd=tb.stride|0,Ac=tb.divisor|0);Zb=ma.location;Qa=Ta[Zb];if(1===Na){Qa.buffer||ha.enableVertexAttribArray(Zb);ub=Db||1;if(Qa.type!==Ya||Qa.size!==ub||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Jb||Qa.stride!==Cd)ha.bindBuffer(34962,Pa.buffer),ha.vertexAttribPointer(Zb,ub,Ya,Ra,Cd,Jb),Qa.type=Ya,Qa.size=ub,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Jb,Qa.stride=Cd;Qa.divisor!==Ac&&
(k.vertexAttribDivisorANGLE(Zb,Ac),Qa.divisor=Ac)}else if(Qa.buffer&&(ha.disableVertexAttribArray(Zb),Qa.buffer=null),Qa.x!==Lb||Qa.y!==lb||Qa.z!==Oa||Qa.w!==Kb)ha.vertexAttrib4f(Zb,Lb,lb,Oa,Kb),Qa.x=Lb,Qa.y=lb,Qa.z=Oa,Qa.w=Kb;vb=V.call(this,t,a,g);Sa=!1;mb=null;ec=0;Dc=!1;bb=uc=0;ic=1;ad=0;Xa=5126;Ub=Za=zb=Mc=0;I(vb)?(Sa=!0,mb=v.createStream(34962,vb),Xa=mb.dtype):(mb=v.getBuffer(vb))?Xa=mb.dtype:"constant"in vb?(ic=2,"number"===typeof vb.constant?(zb=vb.constant,Za=Ub=Mc=0):(zb=0<vb.constant.length?
vb.constant[0]:0,Za=1<vb.constant.length?vb.constant[1]:0,Ub=2<vb.constant.length?vb.constant[2]:0,Mc=3<vb.constant.length?vb.constant[3]:0)):(mb=I(vb.buffer)?v.createStream(34962,vb.buffer):v.getBuffer(vb.buffer),Xa="type"in vb?ge[vb.type]:mb.dtype,Dc=!!vb.normalized,bb=vb.size|0,uc=vb.offset|0,ad=vb.stride|0,ec=vb.divisor|0);sc=Ba.location;Vb=Ta[sc];if(1===ic){Vb.buffer||ha.enableVertexAttribArray(sc);Pb=bb||1;if(Vb.type!==Xa||Vb.size!==Pb||Vb.buffer!==mb||Vb.normalized!==Dc||Vb.offset!==uc||Vb.stride!==
ad)ha.bindBuffer(34962,mb.buffer),ha.vertexAttribPointer(sc,Pb,Xa,Dc,ad,uc),Vb.type=Xa,Vb.size=Pb,Vb.buffer=mb,Vb.normalized=Dc,Vb.offset=uc,Vb.stride=ad;Vb.divisor!==ec&&(k.vertexAttribDivisorANGLE(sc,ec),Vb.divisor=ec)}else if(Vb.buffer&&(ha.disableVertexAttribArray(sc),Vb.buffer=null),Vb.x!==zb||Vb.y!==Za||Vb.z!==Ub||Vb.w!==Mc)ha.vertexAttrib4f(sc,zb,Za,Ub,Mc),Vb.x=zb,Vb.y=Za,Vb.z=Ub,Vb.w=Mc;Jc=X.call(this,t,a,g);Qb=!1;qd=null;Cc=0;Ld=!1;Wc=Nc=0;ud=1;mc=0;vc=5126;Sb=rc=db=fc=0;I(Jc)?(Qb=!0,qd=
v.createStream(34962,Jc),vc=qd.dtype):(qd=v.getBuffer(Jc))?vc=qd.dtype:"constant"in Jc?(ud=2,"number"===typeof Jc.constant?(db=Jc.constant,rc=Sb=fc=0):(db=0<Jc.constant.length?Jc.constant[0]:0,rc=1<Jc.constant.length?Jc.constant[1]:0,Sb=2<Jc.constant.length?Jc.constant[2]:0,fc=3<Jc.constant.length?Jc.constant[3]:0)):(qd=I(Jc.buffer)?v.createStream(34962,Jc.buffer):v.getBuffer(Jc.buffer),vc="type"in Jc?ge[Jc.type]:qd.dtype,Ld=!!Jc.normalized,Wc=Jc.size|0,Nc=Jc.offset|0,mc=Jc.stride|0,Cc=Jc.divisor|
0);Wb=Xb.location;bc=Ta[Wb];if(1===ud){bc.buffer||ha.enableVertexAttribArray(Wb);gc=Wc||1;if(bc.type!==vc||bc.size!==gc||bc.buffer!==qd||bc.normalized!==Ld||bc.offset!==Nc||bc.stride!==mc)ha.bindBuffer(34962,qd.buffer),ha.vertexAttribPointer(Wb,gc,vc,Ld,mc,Nc),bc.type=vc,bc.size=gc,bc.buffer=qd,bc.normalized=Ld,bc.offset=Nc,bc.stride=mc;bc.divisor!==Cc&&(k.vertexAttribDivisorANGLE(Wb,Cc),bc.divisor=Cc)}else if(bc.buffer&&(ha.disableVertexAttribArray(Wb),bc.buffer=null),bc.x!==db||bc.y!==rc||bc.z!==
Sb||bc.w!==fc)ha.vertexAttrib4f(Wb,db,rc,Sb,fc),bc.x=db,bc.y=rc,bc.z=Sb,bc.w=fc;xc=ea.call(this,t,a,g);zc=!1;bd=null;Qc=0;Rc=!1;Xc=Sc=0;wd=1;cd=0;Yc=5126;Uc=Zc=ac=jc=0;I(xc)?(zc=!0,bd=v.createStream(34962,xc),Yc=bd.dtype):(bd=v.getBuffer(xc))?Yc=bd.dtype:"constant"in xc?(wd=2,"number"===typeof xc.constant?(ac=xc.constant,Zc=Uc=jc=0):(ac=0<xc.constant.length?xc.constant[0]:0,Zc=1<xc.constant.length?xc.constant[1]:0,Uc=2<xc.constant.length?xc.constant[2]:0,jc=3<xc.constant.length?xc.constant[3]:0)):
(bd=I(xc.buffer)?v.createStream(34962,xc.buffer):v.getBuffer(xc.buffer),Yc="type"in xc?ge[xc.type]:bd.dtype,Rc=!!xc.normalized,Xc=xc.size|0,Sc=xc.offset|0,cd=xc.stride|0,Qc=xc.divisor|0);dd=Ea.location;yc=Ta[dd];if(1===wd){yc.buffer||ha.enableVertexAttribArray(dd);jd=Xc||1;if(yc.type!==Yc||yc.size!==jd||yc.buffer!==bd||yc.normalized!==Rc||yc.offset!==Sc||yc.stride!==cd)ha.bindBuffer(34962,bd.buffer),ha.vertexAttribPointer(dd,jd,Yc,Rc,cd,Sc),yc.type=Yc,yc.size=jd,yc.buffer=bd,yc.normalized=Rc,yc.offset=
Sc,yc.stride=cd;yc.divisor!==Qc&&(k.vertexAttribDivisorANGLE(dd,Qc),yc.divisor=Qc)}else if(yc.buffer&&(ha.disableVertexAttribArray(dd),yc.buffer=null),yc.x!==ac||yc.y!==Zc||yc.z!==Uc||yc.w!==jc)ha.vertexAttrib4f(dd,ac,Zc,Uc,jc),yc.x=ac,yc.y=Zc,yc.z=Uc,yc.w=jc;rd=T.call(this,t,a,g);xe=!1;Be=null;kd=0;uf=!1;Xd=Nd=0;de=1;Od=0;Id=5126;vd=Tc=od=Fd=0;I(rd)?(xe=!0,Be=v.createStream(34962,rd),Id=Be.dtype):(Be=v.getBuffer(rd))?Id=Be.dtype:"constant"in rd?(de=2,"number"===typeof rd.constant?(od=rd.constant,
Tc=vd=Fd=0):(od=0<rd.constant.length?rd.constant[0]:0,Tc=1<rd.constant.length?rd.constant[1]:0,vd=2<rd.constant.length?rd.constant[2]:0,Fd=3<rd.constant.length?rd.constant[3]:0)):(Be=I(rd.buffer)?v.createStream(34962,rd.buffer):v.getBuffer(rd.buffer),Id="type"in rd?ge[rd.type]:Be.dtype,uf=!!rd.normalized,Xd=rd.size|0,Nd=rd.offset|0,Od=rd.stride|0,kd=rd.divisor|0);td=na.location;ld=Ta[td];if(1===de){ld.buffer||ha.enableVertexAttribArray(td);xd=Xd||1;if(ld.type!==Id||ld.size!==xd||ld.buffer!==Be||ld.normalized!==
uf||ld.offset!==Nd||ld.stride!==Od)ha.bindBuffer(34962,Be.buffer),ha.vertexAttribPointer(td,xd,Id,uf,Od,Nd),ld.type=Id,ld.size=xd,ld.buffer=Be,ld.normalized=uf,ld.offset=Nd,ld.stride=Od;ld.divisor!==kd&&(k.vertexAttribDivisorANGLE(td,kd),ld.divisor=kd)}else if(ld.buffer&&(ha.disableVertexAttribArray(td),ld.buffer=null),ld.x!==od||ld.y!==Tc||ld.z!==vd||ld.w!==Fd)ha.vertexAttrib4f(td,od,Tc,vd,Fd),ld.x=od,ld.y=Tc,ld.z=vd,ld.w=Fd;Bd=S.call(this,t,a,g);Dd=!1;qe=null;le=0;Ne=!1;ke=me=0;ie=1;ue=0;ee=5126;
ve=hd=Oc=ne=0;I(Bd)?(Dd=!0,qe=v.createStream(34962,Bd),ee=qe.dtype):(qe=v.getBuffer(Bd))?ee=qe.dtype:"constant"in Bd?(ie=2,"number"===typeof Bd.constant?(Oc=Bd.constant,hd=ve=ne=0):(Oc=0<Bd.constant.length?Bd.constant[0]:0,hd=1<Bd.constant.length?Bd.constant[1]:0,ve=2<Bd.constant.length?Bd.constant[2]:0,ne=3<Bd.constant.length?Bd.constant[3]:0)):(qe=I(Bd.buffer)?v.createStream(34962,Bd.buffer):v.getBuffer(Bd.buffer),ee="type"in Bd?ge[Bd.type]:qe.dtype,Ne=!!Bd.normalized,ke=Bd.size|0,me=Bd.offset|
0,ue=Bd.stride|0,le=Bd.divisor|0);re=n.location;Jd=Ta[re];if(1===ie){Jd.buffer||ha.enableVertexAttribArray(re);Pd=ke||4;if(Jd.type!==ee||Jd.size!==Pd||Jd.buffer!==qe||Jd.normalized!==Ne||Jd.offset!==me||Jd.stride!==ue)ha.bindBuffer(34962,qe.buffer),ha.vertexAttribPointer(re,Pd,ee,Ne,ue,me),Jd.type=ee,Jd.size=Pd,Jd.buffer=qe,Jd.normalized=Ne,Jd.offset=me,Jd.stride=ue;Jd.divisor!==le&&(k.vertexAttribDivisorANGLE(re,le),Jd.divisor=le)}else if(Jd.buffer&&(ha.disableVertexAttribArray(re),Jd.buffer=null),
Jd.x!==Oc||Jd.y!==hd||Jd.z!==ve||Jd.w!==ne)ha.vertexAttrib4f(re,Oc,hd,ve,ne),Jd.x=Oc,Jd.y=hd,Jd.z=ve,Jd.w=ne;Rd=A.call(this,t,a,g);Sd=!1;oe=null;ze=0;Ce=!1;Se=se=0;Te=1;Oe=0;we=5126;Ke=Je=Ie=Ge=0;I(Rd)?(Sd=!0,oe=v.createStream(34962,Rd),we=oe.dtype):(oe=v.getBuffer(Rd))?we=oe.dtype:"constant"in Rd?(Te=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ke=Ge=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?Rd.constant[1]:0,Ke=2<Rd.constant.length?Rd.constant[2]:0,Ge=3<Rd.constant.length?
Rd.constant[3]:0)):(oe=I(Rd.buffer)?v.createStream(34962,Rd.buffer):v.getBuffer(Rd.buffer),we="type"in Rd?ge[Rd.type]:oe.dtype,Ce=!!Rd.normalized,Se=Rd.size|0,se=Rd.offset|0,Oe=Rd.stride|0,ze=Rd.divisor|0);He=wa.location;Kd=Ta[He];if(1===Te){Kd.buffer||ha.enableVertexAttribArray(He);Yd=Se||4;if(Kd.type!==we||Kd.size!==Yd||Kd.buffer!==oe||Kd.normalized!==Ce||Kd.offset!==se||Kd.stride!==Oe)ha.bindBuffer(34962,oe.buffer),ha.vertexAttribPointer(He,Yd,we,Ce,Oe,se),Kd.type=we,Kd.size=Yd,Kd.buffer=oe,Kd.normalized=
Ce,Kd.offset=se,Kd.stride=Oe;Kd.divisor!==ze&&(k.vertexAttribDivisorANGLE(He,ze),Kd.divisor=ze)}else if(Kd.buffer&&(ha.disableVertexAttribArray(He),Kd.buffer=null),Kd.x!==Ie||Kd.y!==Je||Kd.z!==Ke||Kd.w!==Ge)ha.vertexAttrib4f(He,Ie,Je,Ke,Ge),Kd.x=Ie,Kd.y=Je,Kd.z=Ke,Kd.w=Ge;ce=l.call(this,t,a,g);fe=!1;Le=null;Gd=0;Td=!1;Me=Ee=0;bf=1;af=0;Ue=5126;Ve=Ye=$e=Pe=0;I(ce)?(fe=!0,Le=v.createStream(34962,ce),Ue=Le.dtype):(Le=v.getBuffer(ce))?Ue=Le.dtype:"constant"in ce?(bf=2,"number"===typeof ce.constant?($e=
ce.constant,Ye=Ve=Pe=0):($e=0<ce.constant.length?ce.constant[0]:0,Ye=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,Pe=3<ce.constant.length?ce.constant[3]:0)):(Le=I(ce.buffer)?v.createStream(34962,ce.buffer):v.getBuffer(ce.buffer),Ue="type"in ce?ge[ce.type]:Le.dtype,Td=!!ce.normalized,Me=ce.size|0,Ee=ce.offset|0,af=ce.stride|0,Gd=ce.divisor|0);We=ba.location;Ud=Ta[We];if(1===bf){Ud.buffer||ha.enableVertexAttribArray(We);ae=Me||1;if(Ud.type!==Ue||Ud.size!==ae||Ud.buffer!==
Le||Ud.normalized!==Td||Ud.offset!==Ee||Ud.stride!==af)ha.bindBuffer(34962,Le.buffer),ha.vertexAttribPointer(We,ae,Ue,Td,af,Ee),Ud.type=Ue,Ud.size=ae,Ud.buffer=Le,Ud.normalized=Td,Ud.offset=Ee,Ud.stride=af;Ud.divisor!==Gd&&(k.vertexAttribDivisorANGLE(We,Gd),Ud.divisor=Gd)}else if(Ud.buffer&&(ha.disableVertexAttribArray(We),Ud.buffer=null),Ud.x!==$e||Ud.y!==Ye||Ud.z!==Ve||Ud.w!==Pe)ha.vertexAttrib4f(We,$e,Ye,Ve,Pe),Ud.x=$e,Ud.y=Ye,Ud.z=Ve,Ud.w=Pe;Xe=t.pixelRatio;g&&hf===Xe||(hf=Xe,ha.uniform1f(Da.location,
Xe));mf=N.call(this,t,a,g);ef=mf[0];kf=mf[1];g&&jf===ef&&lf===kf||(jf=ef,lf=kf,ha.uniform2f(la.location,ef,kf));qf=a.scale;nf=qf[0];Bf=qf[1];g&&rf===nf&&Cf===Bf||(rf=nf,Cf=Bf,ha.uniform2f(Ca.location,nf,Bf));Qe=a.scaleFract;Fe=Qe[0];pf=Qe[1];g&&of===Fe&&Df===pf||(of=Fe,Df=pf,ha.uniform2f(fa.location,Fe,pf));Gf=a.translate;Af=Gf[0];Ff=Gf[1];g&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ha.uniform2f(ka.location,Af,Ff));xf=a.translateFract;vf=xf[0];zf=xf[1];g&&yf===vf&&If===zf||(yf=vf,If=zf,ha.uniform2f(oa.location,
vf,zf));Jf=a.opacity;g&&Kf===Jf||(Kf=Jf,ha.uniform1f(O.location,Jf));Lf=a.elements;sf=null;(sf=(Rf=I(Lf))?va.createStream(Lf):va.getElements(Lf))&&ha.bindBuffer(34963,sf.buffer.buffer);Hf=a.offset;if(tf=a.count)0<ab?sf?k.drawElementsInstancedANGLE(0,tf,sf.type,Hf<<(sf.type-5121>>1),ab):k.drawArraysInstancedANGLE(0,Hf,tf,ab):0>ab&&(sf?ha.drawElements(0,tf,sf.type,Hf<<(sf.type-5121>>1)):ha.drawArrays(0,Hf,tf)),t.viewportWidth=qc,t.viewportHeight=Nb,Ob&&v.destroyStream(qb),sb&&v.destroyStream(Pa),Sa&&
v.destroyStream(mb),Qb&&v.destroyStream(qd),zc&&v.destroyStream(bd),xe&&v.destroyStream(Be),Dd&&v.destroyStream(qe),Sd&&v.destroyStream(oe),fe&&v.destroyStream(Le),Rf&&va.destroyStream(sf)}M.unbind();K.dirty=!0;ya.setVAO(null);e&&(Z.cpuTime+=performance.now()-f)},draw:function(b){var d,c,f,l,g,a,p,y,z,Ha,S,u,E,A,pa,C,T,x,N,L,M,r,Q,R,P,Ga,aa,ga,X,ea,da,W,ra,xa,V,id,Ka,Hc,yb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Ld,Ya,
Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,xe,Be,kd,uf,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se;d=Gb.next;d!==Gb.cur&&(d?ha.bindFramebuffer(36160,d.framebuffer):ha.bindFramebuffer(36160,null),Gb.cur=d);if(K.dirty){var Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,
hf,mf,ef,jf,kf,lf;Te=sa.dither;Te!==K.dither&&(Te?ha.enable(3024):ha.disable(3024),K.dither=Te);Oe=Y[0];we=Y[1];if(Oe!==ta[0]||we!==ta[1])ha.blendEquationSeparate(Oe,we),ta[0]=Oe,ta[1]=we;Ge=sa.depth_func;Ge!==K.depth_func&&(ha.depthFunc(Ge),K.depth_func=Ge);Ie=ia[0];Je=ia[1];if(Ie!==$b[0]||Je!==$b[1])ha.depthRange(Ie,Je),$b[0]=Ie,$b[1]=Je;Ke=sa.depth_mask;Ke!==K.depth_mask&&(ha.depthMask(Ke),K.depth_mask=Ke);He=gb[0];Kd=gb[1];Yd=gb[2];ce=gb[3];if(He!==ca[0]||Kd!==ca[1]||Yd!==ca[2]||ce!==ca[3])ha.colorMask(He,
Kd,Yd,ce),ca[0]=He,ca[1]=Kd,ca[2]=Yd,ca[3]=ce;fe=sa.cull_enable;fe!==K.cull_enable&&(fe?ha.enable(2884):ha.disable(2884),K.cull_enable=fe);Le=sa.cull_face;Le!==K.cull_face&&(ha.cullFace(Le),K.cull_face=Le);Gd=sa.frontFace;Gd!==K.frontFace&&(ha.frontFace(Gd),K.frontFace=Gd);Td=sa.lineWidth;Td!==K.lineWidth&&(ha.lineWidth(Td),K.lineWidth=Td);Ee=sa.polygonOffset_enable;Ee!==K.polygonOffset_enable&&(Ee?ha.enable(32823):ha.disable(32823),K.polygonOffset_enable=Ee);Me=Ia[0];bf=Ia[1];if(Me!==nc[0]||bf!==
nc[1])ha.polygonOffset(Me,bf),nc[0]=Me,nc[1]=bf;af=sa.sample_alpha;af!==K.sample_alpha&&(af?ha.enable(32926):ha.disable(32926),K.sample_alpha=af);Ue=sa.sample_enable;Ue!==K.sample_enable&&(Ue?ha.enable(32928):ha.disable(32928),K.sample_enable=Ue);Pe=Rb[0];$e=Rb[1];if(Pe!==za[0]||$e!==za[1])ha.sampleCoverage(Pe,$e),za[0]=Pe,za[1]=$e;Ye=sa.stencil_mask;Ye!==K.stencil_mask&&(ha.stencilMask(Ye),K.stencil_mask=Ye);Ve=Md[0];We=Md[1];Ud=Md[2];if(Ve!==ye[0]||We!==ye[1]||Ud!==ye[2])ha.stencilFunc(Ve,We,Ud),
ye[0]=Ve,ye[1]=We,ye[2]=Ud;ae=pe[0];Xe=pe[1];hf=pe[2];mf=pe[3];if(ae!==je[0]||Xe!==je[1]||hf!==je[2]||mf!==je[3])ha.stencilOpSeparate(ae,Xe,hf,mf),je[0]=ae,je[1]=Xe,je[2]=hf,je[3]=mf;ef=Ad[0];jf=Ad[1];kf=Ad[2];lf=Ad[3];if(ef!==Vd[0]||jf!==Vd[1]||kf!==Vd[2]||lf!==Vd[3])ha.stencilOpSeparate(ef,jf,kf,lf),Vd[0]=ef,Vd[1]=jf,Vd[2]=kf,Vd[3]=lf}c=b.viewport;f=c.x|0;l=c.y|0;g="width"in c?c.width|0:t.framebufferWidth-f;a="height"in c?c.height|0:t.framebufferHeight-l;p=t.viewportWidth;t.viewportWidth=g;y=t.viewportHeight;
t.viewportHeight=a;ha.viewport(f,l,g,a);he[0]=f;he[1]=l;he[2]=g;he[3]=a;ha.blendColor(0,0,0,1);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=1;ha.enable(3042);K.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;ha.disable(2929);K.depth_enable=!1;z=b.viewport;Ha=z.x|0;S=z.y|0;u="width"in z?z.width|0:t.framebufferWidth-Ha;E="height"in z?z.height|0:t.framebufferHeight-S;ha.scissor(Ha,S,u,E);zd[0]=Ha;zd[1]=S;zd[2]=u;zd[3]=E;ha.enable(3089);K.scissor_enable=!0;ha.disable(2960);
K.stencil_enable=!1;if(A=K.profile)pa=performance.now(),Z.count++;ha.useProgram(G.program);C=ed.angle_instanced_arrays;ya.setVAO(null);T=J.call(this,t,b,0);x=!1;N=null;L=0;M=!1;Q=r=0;R=1;P=0;Ga=5126;ea=X=ga=aa=0;I(T)?(x=!0,N=v.createStream(34962,T),Ga=N.dtype):(N=v.getBuffer(T))?Ga=N.dtype:"constant"in T?(R=2,"number"===typeof T.constant?(ga=T.constant,X=ea=aa=0):(ga=0<T.constant.length?T.constant[0]:0,X=1<T.constant.length?T.constant[1]:0,ea=2<T.constant.length?T.constant[2]:0,aa=3<T.constant.length?
T.constant[3]:0)):(N=I(T.buffer)?v.createStream(34962,T.buffer):v.getBuffer(T.buffer),Ga="type"in T?ge[T.type]:N.dtype,M=!!T.normalized,Q=T.size|0,r=T.offset|0,P=T.stride|0,L=T.divisor|0);da=Aa.location;W=Ta[da];if(1===R){W.buffer||ha.enableVertexAttribArray(da);ra=Q||1;if(W.type!==Ga||W.size!==ra||W.buffer!==N||W.normalized!==M||W.offset!==r||W.stride!==P)ha.bindBuffer(34962,N.buffer),ha.vertexAttribPointer(da,ra,Ga,M,P,r),W.type=Ga,W.size=ra,W.buffer=N,W.normalized=M,W.offset=r,W.stride=P;W.divisor!==
L&&(C.vertexAttribDivisorANGLE(da,L),W.divisor=L)}else if(W.buffer&&(ha.disableVertexAttribArray(da),W.buffer=null),W.x!==ga||W.y!==X||W.z!==ea||W.w!==aa)ha.vertexAttrib4f(da,ga,X,ea,aa),W.x=ga,W.y=X,W.z=ea,W.w=aa;xa=h.call(this,t,b,0);V=!1;id=null;Ka=0;Hc=!1;cb=yb=0;Mb=1;ab=0;nb=5126;Ib=Hb=Cd=Va=0;I(xa)?(V=!0,id=v.createStream(34962,xa),nb=id.dtype):(id=v.getBuffer(xa))?nb=id.dtype:"constant"in xa?(Mb=2,"number"===typeof xa.constant?(Cd=xa.constant,Hb=Ib=Va=0):(Cd=0<xa.constant.length?xa.constant[0]:
0,Hb=1<xa.constant.length?xa.constant[1]:0,Ib=2<xa.constant.length?xa.constant[2]:0,Va=3<xa.constant.length?xa.constant[3]:0)):(id=I(xa.buffer)?v.createStream(34962,xa.buffer):v.getBuffer(xa.buffer),nb="type"in xa?ge[xa.type]:id.dtype,Hc=!!xa.normalized,cb=xa.size|0,yb=xa.offset|0,ab=xa.stride|0,Ka=xa.divisor|0);qc=ma.location;Nb=Ta[qc];if(1===Mb){Nb.buffer||ha.enableVertexAttribArray(qc);jb=cb||1;if(Nb.type!==nb||Nb.size!==jb||Nb.buffer!==id||Nb.normalized!==Hc||Nb.offset!==yb||Nb.stride!==ab)ha.bindBuffer(34962,
id.buffer),ha.vertexAttribPointer(qc,jb,nb,Hc,ab,yb),Nb.type=nb,Nb.size=jb,Nb.buffer=id,Nb.normalized=Hc,Nb.offset=yb,Nb.stride=ab;Nb.divisor!==Ka&&(C.vertexAttribDivisorANGLE(qc,Ka),Nb.divisor=Ka)}else if(Nb.buffer&&(ha.disableVertexAttribArray(qc),Nb.buffer=null),Nb.x!==Cd||Nb.y!==Hb||Nb.z!==Ib||Nb.w!==Va)ha.vertexAttrib4f(qc,Cd,Hb,Ib,Va),Nb.x=Cd,Nb.y=Hb,Nb.z=Ib,Nb.w=Va;Fb=k.call(this,t,b,0);Cb=!1;wb=null;hb=0;Yb=!1;qb=Ob=0;Ua=1;Tb=0;ob=5126;Ja=pb=ib=hc=0;I(Fb)?(Cb=!0,wb=v.createStream(34962,Fb),
ob=wb.dtype):(wb=v.getBuffer(Fb))?ob=wb.dtype:"constant"in Fb?(Ua=2,"number"===typeof Fb.constant?(ib=Fb.constant,pb=Ja=hc=0):(ib=0<Fb.constant.length?Fb.constant[0]:0,pb=1<Fb.constant.length?Fb.constant[1]:0,Ja=2<Fb.constant.length?Fb.constant[2]:0,hc=3<Fb.constant.length?Fb.constant[3]:0)):(wb=I(Fb.buffer)?v.createStream(34962,Fb.buffer):v.getBuffer(Fb.buffer),ob="type"in Fb?ge[Fb.type]:wb.dtype,Yb=!!Fb.normalized,qb=Fb.size|0,Ob=Fb.offset|0,Tb=Fb.stride|0,hb=Fb.divisor|0);rb=Ba.location;La=Ta[rb];
if(1===Ua){La.buffer||ha.enableVertexAttribArray(rb);eb=qb||1;if(La.type!==ob||La.size!==eb||La.buffer!==wb||La.normalized!==Yb||La.offset!==Ob||La.stride!==Tb)ha.bindBuffer(34962,wb.buffer),ha.vertexAttribPointer(rb,eb,ob,Yb,Tb,Ob),La.type=ob,La.size=eb,La.buffer=wb,La.normalized=Yb,La.offset=Ob,La.stride=Tb;La.divisor!==hb&&(C.vertexAttribDivisorANGLE(rb,hb),La.divisor=hb)}else if(La.buffer&&(ha.disableVertexAttribArray(rb),La.buffer=null),La.x!==ib||La.y!==pb||La.z!==Ja||La.w!==hc)ha.vertexAttrib4f(rb,
ib,pb,Ja,hc),La.x=ib,La.y=pb,La.z=Ja,La.w=hc;fb=q.call(this,t,b,0);Ma=!1;kb=null;Wa=0;tb=!1;Pa=sb=0;Ac=1;Ra=0;Jb=5126;Ya=Ld=Na=Db=0;I(fb)?(Ma=!0,kb=v.createStream(34962,fb),Jb=kb.dtype):(kb=v.getBuffer(fb))?Jb=kb.dtype:"constant"in fb?(Ac=2,"number"===typeof fb.constant?(Na=fb.constant,Ld=Ya=Db=0):(Na=0<fb.constant.length?fb.constant[0]:0,Ld=1<fb.constant.length?fb.constant[1]:0,Ya=2<fb.constant.length?fb.constant[2]:0,Db=3<fb.constant.length?fb.constant[3]:0)):(kb=I(fb.buffer)?v.createStream(34962,
fb.buffer):v.getBuffer(fb.buffer),Jb="type"in fb?ge[fb.type]:kb.dtype,tb=!!fb.normalized,Pa=fb.size|0,sb=fb.offset|0,Ra=fb.stride|0,Wa=fb.divisor|0);Kb=Xb.location;Lb=Ta[Kb];if(1===Ac){Lb.buffer||ha.enableVertexAttribArray(Kb);lb=Pa||1;if(Lb.type!==Jb||Lb.size!==lb||Lb.buffer!==kb||Lb.normalized!==tb||Lb.offset!==sb||Lb.stride!==Ra)ha.bindBuffer(34962,kb.buffer),ha.vertexAttribPointer(Kb,lb,Jb,tb,Ra,sb),Lb.type=Jb,Lb.size=lb,Lb.buffer=kb,Lb.normalized=tb,Lb.offset=sb,Lb.stride=Ra;Lb.divisor!==Wa&&
(C.vertexAttribDivisorANGLE(Kb,Wa),Lb.divisor=Wa)}else if(Lb.buffer&&(ha.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Na||Lb.y!==Ld||Lb.z!==Ya||Lb.w!==Db)ha.vertexAttrib4f(Kb,Na,Ld,Ya,Db),Lb.x=Na,Lb.y=Ld,Lb.z=Ya,Lb.w=Db;Oa=e.call(this,t,b,0);Zb=!1;Qa=null;ub=0;vb=!1;mb=Sa=0;ec=1;Dc=0;uc=5126;Xa=ad=ic=bb=0;I(Oa)?(Zb=!0,Qa=v.createStream(34962,Oa),uc=Qa.dtype):(Qa=v.getBuffer(Oa))?uc=Qa.dtype:"constant"in Oa?(ec=2,"number"===typeof Oa.constant?(ic=Oa.constant,ad=Xa=bb=0):(ic=0<Oa.constant.length?
Oa.constant[0]:0,ad=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=I(Oa.buffer)?v.createStream(34962,Oa.buffer):v.getBuffer(Oa.buffer),uc="type"in Oa?ge[Oa.type]:Qa.dtype,vb=!!Oa.normalized,mb=Oa.size|0,Sa=Oa.offset|0,Dc=Oa.stride|0,ub=Oa.divisor|0);Mc=Ea.location;zb=Ta[Mc];if(1===ec){zb.buffer||ha.enableVertexAttribArray(Mc);Za=mb||1;if(zb.type!==uc||zb.size!==Za||zb.buffer!==Qa||zb.normalized!==vb||zb.offset!==Sa||zb.stride!==
Dc)ha.bindBuffer(34962,Qa.buffer),ha.vertexAttribPointer(Mc,Za,uc,vb,Dc,Sa),zb.type=uc,zb.size=Za,zb.buffer=Qa,zb.normalized=vb,zb.offset=Sa,zb.stride=Dc;zb.divisor!==ub&&(C.vertexAttribDivisorANGLE(Mc,ub),zb.divisor=ub)}else if(zb.buffer&&(ha.disableVertexAttribArray(Mc),zb.buffer=null),zb.x!==ic||zb.y!==ad||zb.z!==Xa||zb.w!==bb)ha.vertexAttrib4f(Mc,ic,ad,Xa,bb),zb.x=ic,zb.y=ad,zb.z=Xa,zb.w=bb;Ub=B.call(this,t,b,0);sc=!1;Vb=null;Pb=0;Jc=!1;qd=Qb=0;Cc=1;Hd=0;Nc=5126;vc=mc=ud=Wc=0;I(Ub)?(sc=!0,Vb=
v.createStream(34962,Ub),Nc=Vb.dtype):(Vb=v.getBuffer(Ub))?Nc=Vb.dtype:"constant"in Ub?(Cc=2,"number"===typeof Ub.constant?(ud=Ub.constant,mc=vc=Wc=0):(ud=0<Ub.constant.length?Ub.constant[0]:0,mc=1<Ub.constant.length?Ub.constant[1]:0,vc=2<Ub.constant.length?Ub.constant[2]:0,Wc=3<Ub.constant.length?Ub.constant[3]:0)):(Vb=I(Ub.buffer)?v.createStream(34962,Ub.buffer):v.getBuffer(Ub.buffer),Nc="type"in Ub?ge[Ub.type]:Vb.dtype,Jc=!!Ub.normalized,qd=Ub.size|0,Qb=Ub.offset|0,Hd=Ub.stride|0,Pb=Ub.divisor|
0);fc=na.location;db=Ta[fc];if(1===Cc){db.buffer||ha.enableVertexAttribArray(fc);rc=qd||1;if(db.type!==Nc||db.size!==rc||db.buffer!==Vb||db.normalized!==Jc||db.offset!==Qb||db.stride!==Hd)ha.bindBuffer(34962,Vb.buffer),ha.vertexAttribPointer(fc,rc,Nc,Jc,Hd,Qb),db.type=Nc,db.size=rc,db.buffer=Vb,db.normalized=Jc,db.offset=Qb,db.stride=Hd;db.divisor!==Pb&&(C.vertexAttribDivisorANGLE(fc,Pb),db.divisor=Pb)}else if(db.buffer&&(ha.disableVertexAttribArray(fc),db.buffer=null),db.x!==ud||db.y!==mc||db.z!==
vc||db.w!==Wc)ha.vertexAttrib4f(fc,ud,mc,vc,Wc),db.x=ud,db.y=mc,db.z=vc,db.w=Wc;Sb=D.call(this,t,b,0);Wb=!1;bc=null;gc=0;xc=!1;bd=zc=0;Qc=1;Rc=0;Sc=5126;Yc=cd=wd=Xc=0;I(Sb)?(Wb=!0,bc=v.createStream(34962,Sb),Sc=bc.dtype):(bc=v.getBuffer(Sb))?Sc=bc.dtype:"constant"in Sb?(Qc=2,"number"===typeof Sb.constant?(wd=Sb.constant,cd=Yc=Xc=0):(wd=0<Sb.constant.length?Sb.constant[0]:0,cd=1<Sb.constant.length?Sb.constant[1]:0,Yc=2<Sb.constant.length?Sb.constant[2]:0,Xc=3<Sb.constant.length?Sb.constant[3]:0)):
(bc=I(Sb.buffer)?v.createStream(34962,Sb.buffer):v.getBuffer(Sb.buffer),Sc="type"in Sb?ge[Sb.type]:bc.dtype,xc=!!Sb.normalized,bd=Sb.size|0,zc=Sb.offset|0,Rc=Sb.stride|0,gc=Sb.divisor|0);jc=n.location;ac=Ta[jc];if(1===Qc){ac.buffer||ha.enableVertexAttribArray(jc);Zc=bd||4;if(ac.type!==Sc||ac.size!==Zc||ac.buffer!==bc||ac.normalized!==xc||ac.offset!==zc||ac.stride!==Rc)ha.bindBuffer(34962,bc.buffer),ha.vertexAttribPointer(jc,Zc,Sc,xc,Rc,zc),ac.type=Sc,ac.size=Zc,ac.buffer=bc,ac.normalized=xc,ac.offset=
zc,ac.stride=Rc;ac.divisor!==gc&&(C.vertexAttribDivisorANGLE(jc,gc),ac.divisor=gc)}else if(ac.buffer&&(ha.disableVertexAttribArray(jc),ac.buffer=null),ac.x!==wd||ac.y!==cd||ac.z!==Yc||ac.w!==Xc)ha.vertexAttrib4f(jc,wd,cd,Yc,Xc),ac.x=wd,ac.y=cd,ac.z=Yc,ac.w=Xc;Uc=F.call(this,t,b,0);dd=!1;yc=null;jd=0;rd=!1;Be=xe=0;kd=1;uf=0;Nd=5126;Id=Od=de=Xd=0;I(Uc)?(dd=!0,yc=v.createStream(34962,Uc),Nd=yc.dtype):(yc=v.getBuffer(Uc))?Nd=yc.dtype:"constant"in Uc?(kd=2,"number"===typeof Uc.constant?(de=Uc.constant,
Od=Id=Xd=0):(de=0<Uc.constant.length?Uc.constant[0]:0,Od=1<Uc.constant.length?Uc.constant[1]:0,Id=2<Uc.constant.length?Uc.constant[2]:0,Xd=3<Uc.constant.length?Uc.constant[3]:0)):(yc=I(Uc.buffer)?v.createStream(34962,Uc.buffer):v.getBuffer(Uc.buffer),Nd="type"in Uc?ge[Uc.type]:yc.dtype,rd=!!Uc.normalized,Be=Uc.size|0,xe=Uc.offset|0,uf=Uc.stride|0,jd=Uc.divisor|0);Fd=wa.location;od=Ta[Fd];if(1===kd){od.buffer||ha.enableVertexAttribArray(Fd);Tc=Be||4;if(od.type!==Nd||od.size!==Tc||od.buffer!==yc||od.normalized!==
rd||od.offset!==xe||od.stride!==uf)ha.bindBuffer(34962,yc.buffer),ha.vertexAttribPointer(Fd,Tc,Nd,rd,uf,xe),od.type=Nd,od.size=Tc,od.buffer=yc,od.normalized=rd,od.offset=xe,od.stride=uf;od.divisor!==jd&&(C.vertexAttribDivisorANGLE(Fd,jd),od.divisor=jd)}else if(od.buffer&&(ha.disableVertexAttribArray(Fd),od.buffer=null),od.x!==de||od.y!==Od||od.z!==Id||od.w!==Xd)ha.vertexAttrib4f(Fd,de,Od,Id,Xd),od.x=de,od.y=Od,od.z=Id,od.w=Xd;vd=U.call(this,t,b,0);td=!1;ld=null;xd=0;Bd=!1;qe=Dd=0;le=1;Ne=0;me=5126;
ee=ue=ie=ke=0;I(vd)?(td=!0,ld=v.createStream(34962,vd),me=ld.dtype):(ld=v.getBuffer(vd))?me=ld.dtype:"constant"in vd?(le=2,"number"===typeof vd.constant?(ie=vd.constant,ue=ee=ke=0):(ie=0<vd.constant.length?vd.constant[0]:0,ue=1<vd.constant.length?vd.constant[1]:0,ee=2<vd.constant.length?vd.constant[2]:0,ke=3<vd.constant.length?vd.constant[3]:0)):(ld=I(vd.buffer)?v.createStream(34962,vd.buffer):v.getBuffer(vd.buffer),me="type"in vd?ge[vd.type]:ld.dtype,Bd=!!vd.normalized,qe=vd.size|0,Dd=vd.offset|
0,Ne=vd.stride|0,xd=vd.divisor|0);ne=ba.location;Oc=Ta[ne];if(1===le){Oc.buffer||ha.enableVertexAttribArray(ne);hd=qe||1;if(Oc.type!==me||Oc.size!==hd||Oc.buffer!==ld||Oc.normalized!==Bd||Oc.offset!==Dd||Oc.stride!==Ne)ha.bindBuffer(34962,ld.buffer),ha.vertexAttribPointer(ne,hd,me,Bd,Ne,Dd),Oc.type=me,Oc.size=hd,Oc.buffer=ld,Oc.normalized=Bd,Oc.offset=Dd,Oc.stride=Ne;Oc.divisor!==xd&&(C.vertexAttribDivisorANGLE(ne,xd),Oc.divisor=xd)}else if(Oc.buffer&&(ha.disableVertexAttribArray(ne),Oc.buffer=null),
Oc.x!==ie||Oc.y!==ue||Oc.z!==ee||Oc.w!==ke)ha.vertexAttrib4f(ne,ie,ue,ee,ke),Oc.x=ie,Oc.y=ue,Oc.z=ee,Oc.w=ke;ha.uniform1i(H.location,!1);ha.uniform1f(Da.location,t.pixelRatio);ve=w.call(this,t,b,0);ha.uniform2f(la.location,ve[0],ve[1]);re=b.scale;ha.uniform2f(Ca.location,re[0],re[1]);Jd=b.scaleFract;ha.uniform2f(fa.location,Jd[0],Jd[1]);Pd=b.translate;ha.uniform2f(ka.location,Pd[0],Pd[1]);Rd=b.translateFract;ha.uniform2f(oa.location,Rd[0],Rd[1]);ha.uniform1f(O.location,b.opacity);ha.uniform1i(qa.location,
m.bind());Sd=b.elements;oe=null;(oe=(ze=I(Sd))?va.createStream(Sd):va.getElements(Sd))&&ha.bindBuffer(34963,oe.buffer.buffer);Ce=b.offset;if(se=b.count)Se=ua.instances,0<Se?oe?C.drawElementsInstancedANGLE(0,se,oe.type,Ce<<(oe.type-5121>>1),Se):C.drawArraysInstancedANGLE(0,Ce,se,Se):0>Se&&(oe?ha.drawElements(0,se,oe.type,Ce<<(oe.type-5121>>1)):ha.drawArrays(0,Ce,se)),K.dirty=!0,ya.setVAO(null),t.viewportWidth=p,t.viewportHeight=y,A&&(Z.cpuTime+=performance.now()-pa),x&&v.destroyStream(N),V&&v.destroyStream(id),
Cb&&v.destroyStream(wb),Ma&&v.destroyStream(kb),Zb&&v.destroyStream(Qa),sc&&v.destroyStream(Vb),Wb&&v.destroyStream(bc),dd&&v.destroyStream(yc),td&&v.destroyStream(ld),m.unbind(),ze&&va.destroyStream(oe)},scope:function(e,k,l){var a,n,q,h,z,ma,H,S,O,A,T,fa,m,J,ha,ja,N,Xb,Ba,w,M,G,D,Y,B,ba,ya,wa,Ca,qa,F,U,ca,ka,X,ea,Ta,oa,xa,Ea,Aa,na,ra,la,ta,Da,Gb,V,Ia,Fa,id,ed,gb,ia,Rb,Ua,$b,ob,nc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Md,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,yd,uc,bb,ic,za,Xa,Mc,zb,
Za,Ub,sc,Vb,Pb,Jc,Qb,Vd,Cc,ye,Nc,Wc,he,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,je,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd,pe,Ad,kd,Qf,Nd,Xd,de,Od,Id,Fd,od,Tc,vd,td,ld,xd,Bd,Dd,qe,le,Ne,me,ke,ie,ue,ee,ne,Oc,hd,ve,re,Jd,Pd,Rd,Sd,oe,ze,Ce,se,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Kd,Yd,ce,fe,Le,Gd,Td,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Ud,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,
yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;a=e.viewport;n=a.x|0;q=a.y|0;h="width"in a?a.width|0:t.framebufferWidth-n;z="height"in a?a.height|0:t.framebufferHeight-q;ma=t.viewportWidth;t.viewportWidth=h;H=t.viewportHeight;t.viewportHeight=z;S=Ld[0];Ld[0]=n;O=Ld[1];Ld[1]=q;A=Ld[2];Ld[2]=h;T=Ld[3];Ld[3]=z;fa=Ga[0];Ga[0]=0;m=Ga[1];Ga[1]=0;J=Ga[2];Ga[2]=0;ha=Ga[3];Ga[3]=1;ja=sa.blend_enable;sa.blend_enable=!0;N=Ka[0];Ka[0]=770;Xb=Ka[1];Ka[1]=771;Ba=
Ka[2];Ka[2]=773;w=Ka[3];Ka[3]=1;M=sa.depth_enable;sa.depth_enable=!1;G=e.viewport;D=G.x|0;Y=G.y|0;B="width"in G?G.width|0:t.framebufferWidth-D;ba="height"in G?G.height|0:t.framebufferHeight-Y;ya=Cd[0];Cd[0]=D;wa=Cd[1];Cd[1]=Y;Ca=Cd[2];Cd[2]=B;qa=Cd[3];Cd[3]=ba;F=sa.scissor_enable;sa.scissor_enable=!0;U=sa.stencil_enable;sa.stencil_enable=!1;if(ca=K.profile)ka=performance.now(),Z.count++;X=e.elements;ea=null;ea=(Ta=I(X))?va.createStream(X):va.getElements(X);oa=ua.elements;ua.elements=ea;xa=e.offset;
Ea=ua.offset;ua.offset=xa;Aa=e.count;na=ua.count;ua.count=Aa;ra=ua.primitive;ua.primitive=0;la=pa[45];pa[45]=!1;ta=e.markerTexture;Da=pa[48];pa[48]=ta;Gb=e.opacity;V=pa[10];pa[10]=Gb;Ia=r.call(this,t,e,l);Fa=pa[46];pa[46]=Ia;id=pa[47];pa[47]=da;ed=t.pixelRatio;gb=pa[34];pa[34]=ed;ia=e.scale;Rb=pa[6];pa[6]=ia;Ua=e.scaleFract;$b=pa[7];pa[7]=Ua;ob=e.translate;nc=pa[8];pa[8]=ob;ib=e.translateFract;pb=pa[9];pa[9]=ib;Ja=u.call(this,t,e,l);rb=!1;La=null;eb=0;fb=!1;kb=Ma=0;Wa=1;tb=0;sb=5126;Jb=Ra=Md=Pa=0;
I(Ja)?(rb=!0,La=v.createStream(34962,Ja),sb=La.dtype):(La=v.getBuffer(Ja))?sb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Md=Ja.constant,Ra=Jb=Pa=0):(Md=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=I(Ja.buffer)?v.createStream(34962,Ja.buffer):v.getBuffer(Ja.buffer),sb="type"in Ja?ge[Ja.type]:La.dtype,fb=!!Ja.normalized,kb=Ja.size|0,Ma=Ja.offset|0,tb=Ja.stride|
0,eb=Ja.divisor|0);Db=P.buffer;P.buffer=La;Na=P.divisor;P.divisor=eb;zd=P.normalized;P.normalized=fb;Ya=P.offset;P.offset=Ma;Kb=P.size;P.size=kb;Lb=P.state;P.state=Wa;lb=P.stride;P.stride=tb;Oa=P.type;P.type=sb;Zb=P.w;P.w=Pa;Qa=P.x;P.x=Md;ub=P.y;P.y=Ra;vb=P.z;P.z=Jb;Sa=x.call(this,t,e,l);mb=!1;ec=null;yd=0;uc=!1;ic=bb=0;za=1;Xa=0;Mc=5126;sc=Ub=Za=zb=0;I(Sa)?(mb=!0,ec=v.createStream(34962,Sa),Mc=ec.dtype):(ec=v.getBuffer(Sa))?Mc=ec.dtype:"constant"in Sa?(za=2,"number"===typeof Sa.constant?(Za=Sa.constant,
Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?Sa.constant[3]:0)):(ec=I(Sa.buffer)?v.createStream(34962,Sa.buffer):v.getBuffer(Sa.buffer),Mc="type"in Sa?ge[Sa.type]:ec.dtype,uc=!!Sa.normalized,ic=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,yd=Sa.divisor|0);Vb=R.buffer;R.buffer=ec;Pb=R.divisor;R.divisor=yd;Jc=R.normalized;R.normalized=uc;Qb=R.offset;R.offset=bb;Vd=R.size;R.size=ic;Cc=R.state;
R.state=za;ye=R.stride;R.stride=Xa;Nc=R.type;R.type=Mc;Wc=R.w;R.w=zb;he=R.x;R.x=Za;mc=R.y;R.y=Ub;vc=R.z;R.z=sc;fc=ga.call(this,t,e,l);db=!1;rc=null;Sb=0;Wb=!1;gc=bc=0;xc=1;zc=0;bd=5126;Xc=Sc=Rc=Qc=0;I(fc)?(db=!0,rc=v.createStream(34962,fc),bd=rc.dtype):(rc=v.getBuffer(fc))?bd=rc.dtype:"constant"in fc?(xc=2,"number"===typeof fc.constant?(Rc=fc.constant,Sc=Xc=Qc=0):(Rc=0<fc.constant.length?fc.constant[0]:0,Sc=1<fc.constant.length?fc.constant[1]:0,Xc=2<fc.constant.length?fc.constant[2]:0,Qc=3<fc.constant.length?
fc.constant[3]:0)):(rc=I(fc.buffer)?v.createStream(34962,fc.buffer):v.getBuffer(fc.buffer),bd="type"in fc?ge[fc.type]:rc.dtype,Wb=!!fc.normalized,gc=fc.size|0,bc=fc.offset|0,zc=fc.stride|0,Sb=fc.divisor|0);je=c.buffer;c.buffer=rc;cd=c.divisor;c.divisor=Sb;Yc=c.normalized;c.normalized=Wb;jc=c.offset;c.offset=bc;ac=c.size;c.size=gc;Zc=c.state;c.state=xc;Uc=c.stride;c.stride=zc;dd=c.type;c.type=bd;yc=c.w;c.w=Qc;jd=c.x;c.x=Rc;rd=c.y;c.y=Sc;pe=c.z;c.z=Xc;Ad=f.call(this,t,e,l);kd=!1;Qf=null;Nd=0;Xd=!1;
Od=de=0;Id=1;Fd=0;od=5126;ld=td=vd=Tc=0;I(Ad)?(kd=!0,Qf=v.createStream(34962,Ad),od=Qf.dtype):(Qf=v.getBuffer(Ad))?od=Qf.dtype:"constant"in Ad?(Id=2,"number"===typeof Ad.constant?(vd=Ad.constant,td=ld=Tc=0):(vd=0<Ad.constant.length?Ad.constant[0]:0,td=1<Ad.constant.length?Ad.constant[1]:0,ld=2<Ad.constant.length?Ad.constant[2]:0,Tc=3<Ad.constant.length?Ad.constant[3]:0)):(Qf=I(Ad.buffer)?v.createStream(34962,Ad.buffer):v.getBuffer(Ad.buffer),od="type"in Ad?ge[Ad.type]:Qf.dtype,Xd=!!Ad.normalized,
Od=Ad.size|0,de=Ad.offset|0,Fd=Ad.stride|0,Nd=Ad.divisor|0);xd=L.buffer;L.buffer=Qf;Bd=L.divisor;L.divisor=Nd;Dd=L.normalized;L.normalized=Xd;qe=L.offset;L.offset=de;le=L.size;L.size=Od;Ne=L.state;L.state=Id;me=L.stride;L.stride=Fd;ke=L.type;L.type=od;ie=L.w;L.w=Tc;ue=L.x;L.x=vd;ee=L.y;L.y=td;ne=L.z;L.z=ld;Oc=p.call(this,t,e,l);hd=!1;ve=null;re=0;Jd=!1;Rd=Pd=0;Sd=1;oe=0;ze=5126;Te=Se=se=Ce=0;I(Oc)?(hd=!0,ve=v.createStream(34962,Oc),ze=ve.dtype):(ve=v.getBuffer(Oc))?ze=ve.dtype:"constant"in Oc?(Sd=
2,"number"===typeof Oc.constant?(se=Oc.constant,Se=Te=Ce=0):(se=0<Oc.constant.length?Oc.constant[0]:0,Se=1<Oc.constant.length?Oc.constant[1]:0,Te=2<Oc.constant.length?Oc.constant[2]:0,Ce=3<Oc.constant.length?Oc.constant[3]:0)):(ve=I(Oc.buffer)?v.createStream(34962,Oc.buffer):v.getBuffer(Oc.buffer),ze="type"in Oc?ge[Oc.type]:ve.dtype,Jd=!!Oc.normalized,Rd=Oc.size|0,Pd=Oc.offset|0,oe=Oc.stride|0,re=Oc.divisor|0);Oe=aa.buffer;aa.buffer=ve;we=aa.divisor;aa.divisor=re;Ge=aa.normalized;aa.normalized=Jd;
Ie=aa.offset;aa.offset=Pd;Je=aa.size;aa.size=Rd;Ke=aa.state;aa.state=Sd;He=aa.stride;aa.stride=oe;Kd=aa.type;aa.type=ze;Yd=aa.w;aa.w=Ce;ce=aa.x;aa.x=se;fe=aa.y;aa.y=Se;Le=aa.z;aa.z=Te;Gd=y.call(this,t,e,l);Td=!1;Ee=null;Me=0;bf=!1;Ue=af=0;Pe=1;$e=0;Ye=5126;ae=Ud=We=Ve=0;I(Gd)?(Td=!0,Ee=v.createStream(34962,Gd),Ye=Ee.dtype):(Ee=v.getBuffer(Gd))?Ye=Ee.dtype:"constant"in Gd?(Pe=2,"number"===typeof Gd.constant?(We=Gd.constant,Ud=ae=Ve=0):(We=0<Gd.constant.length?Gd.constant[0]:0,Ud=1<Gd.constant.length?
Gd.constant[1]:0,ae=2<Gd.constant.length?Gd.constant[2]:0,Ve=3<Gd.constant.length?Gd.constant[3]:0)):(Ee=I(Gd.buffer)?v.createStream(34962,Gd.buffer):v.getBuffer(Gd.buffer),Ye="type"in Gd?ge[Gd.type]:Ee.dtype,bf=!!Gd.normalized,Ue=Gd.size|0,af=Gd.offset|0,$e=Gd.stride|0,Me=Gd.divisor|0);Xe=g.buffer;g.buffer=Ee;hf=g.divisor;g.divisor=Me;mf=g.normalized;g.normalized=bf;ef=g.offset;g.offset=af;jf=g.size;g.size=Ue;kf=g.state;g.state=Pe;lf=g.stride;g.stride=$e;qf=g.type;g.type=Ye;nf=g.w;g.w=Ve;rf=g.x;
g.x=We;Bf=g.y;g.y=Ud;Cf=g.z;g.z=ae;Qe=W.call(this,t,e,l);Fe=!1;of=null;pf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;I(Qe)?(Fe=!0,of=v.createStream(34962,Qe),wf=of.dtype):(of=v.getBuffer(Qe))?wf=of.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(of=I(Qe.buffer)?v.createStream(34962,Qe.buffer):
v.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:of.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,pf=Qe.divisor|0);If=C.buffer;C.buffer=of;Jf=C.divisor;C.divisor=pf;Kf=C.normalized;C.normalized=Df;Lf=C.offset;C.offset=Gf;sf=C.size;C.size=Af;Rf=C.state;C.state=Ef;Hf=C.stride;C.stride=Ff;tf=C.type;C.type=wf;dg=C.w;C.w=xf;Sf=C.x;C.x=vf;Tf=C.y;C.y=yf;qg=C.z;C.z=zf;ff=E.call(this,t,e,l);cf=!1;Mf=null;Nf=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;I(ff)?(cf=!0,Mf=v.createStream(34962,
ff),Wf=Mf.dtype):(Mf=v.getBuffer(ff))?Wf=Mf.dtype:"constant"in ff?(hg=2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Mf=I(ff.buffer)?v.createStream(34962,ff.buffer):v.getBuffer(ff.buffer),Wf="type"in ff?ge[ff.type]:Mf.dtype,eg=!!ff.normalized,gg=ff.size|0,fg=ff.offset|0,ig=ff.stride|0,Nf=ff.divisor|0);jg=d.buffer;d.buffer=
Mf;rg=d.divisor;d.divisor=Nf;sg=d.normalized;d.normalized=eg;tg=d.offset;d.offset=fg;ug=d.size;d.size=gg;vg=d.state;d.state=hg;wg=d.stride;d.stride=ig;xg=d.type;d.type=Wf;yg=d.w;d.w=Uf;zg=d.x;d.x=Xf;Ag=d.y;d.y=Yf;Bg=d.z;d.z=Zf;gf=Q.call(this,t,e,l);df=!1;Of=null;Pf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;I(gf)?(df=!0,Of=v.createStream(34962,gf),$f=Of.dtype):(Of=v.getBuffer(gf))?$f=Of.dtype:"constant"in gf?(ng=2,"number"===typeof gf.constant?(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?
gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Of=I(gf.buffer)?v.createStream(34962,gf.buffer):v.getBuffer(gf.buffer),$f="type"in gf?ge[gf.type]:Of.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Pf=gf.divisor|0);pg=b.buffer;b.buffer=Of;Cg=b.divisor;b.divisor=Pf;Dg=b.normalized;b.normalized=kg;Eg=b.offset;b.offset=lg;Fg=b.size;b.size=mg;Gg=b.state;b.state=ng;Hg=b.stride;b.stride=og;
Ig=b.type;b.type=$f;Jg=b.w;b.w=Vf;Kg=b.x;b.x=ag;Lg=b.y;b.y=bg;Mg=b.z;b.z=cg;Ng=Ha.vert;Ha.vert=59;Og=Ha.frag;Ha.frag=58;K.dirty=!0;k(t,e,l);t.viewportWidth=ma;t.viewportHeight=H;Ld[0]=S;Ld[1]=O;Ld[2]=A;Ld[3]=T;Ga[0]=fa;Ga[1]=m;Ga[2]=J;Ga[3]=ha;sa.blend_enable=ja;Ka[0]=N;Ka[1]=Xb;Ka[2]=Ba;Ka[3]=w;sa.depth_enable=M;Cd[0]=ya;Cd[1]=wa;Cd[2]=Ca;Cd[3]=qa;sa.scissor_enable=F;sa.stencil_enable=U;ca&&(Z.cpuTime+=performance.now()-ka);Ta&&va.destroyStream(ea);ua.elements=oa;ua.offset=Ea;ua.count=na;ua.primitive=
ra;pa[45]=la;pa[48]=Da;pa[10]=V;pa[46]=Fa;pa[47]=id;pa[34]=gb;pa[6]=Rb;pa[7]=$b;pa[8]=nc;pa[9]=pb;rb&&v.destroyStream(La);P.buffer=Db;P.divisor=Na;P.normalized=zd;P.offset=Ya;P.size=Kb;P.state=Lb;P.stride=lb;P.type=Oa;P.w=Zb;P.x=Qa;P.y=ub;P.z=vb;mb&&v.destroyStream(ec);R.buffer=Vb;R.divisor=Pb;R.normalized=Jc;R.offset=Qb;R.size=Vd;R.state=Cc;R.stride=ye;R.type=Nc;R.w=Wc;R.x=he;R.y=mc;R.z=vc;db&&v.destroyStream(rc);c.buffer=je;c.divisor=cd;c.normalized=Yc;c.offset=jc;c.size=ac;c.state=Zc;c.stride=
Uc;c.type=dd;c.w=yc;c.x=jd;c.y=rd;c.z=pe;kd&&v.destroyStream(Qf);L.buffer=xd;L.divisor=Bd;L.normalized=Dd;L.offset=qe;L.size=le;L.state=Ne;L.stride=me;L.type=ke;L.w=ie;L.x=ue;L.y=ee;L.z=ne;hd&&v.destroyStream(ve);aa.buffer=Oe;aa.divisor=we;aa.normalized=Ge;aa.offset=Ie;aa.size=Je;aa.state=Ke;aa.stride=He;aa.type=Kd;aa.w=Yd;aa.x=ce;aa.y=fe;aa.z=Le;Td&&v.destroyStream(Ee);g.buffer=Xe;g.divisor=hf;g.normalized=mf;g.offset=ef;g.size=jf;g.state=kf;g.stride=lf;g.type=qf;g.w=nf;g.x=rf;g.y=Bf;g.z=Cf;Fe&&
v.destroyStream(of);C.buffer=If;C.divisor=Jf;C.normalized=Kf;C.offset=Lf;C.size=sf;C.state=Rf;C.stride=Hf;C.type=tf;C.w=dg;C.x=Sf;C.y=Tf;C.z=qg;cf&&v.destroyStream(Mf);d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;df&&v.destroyStream(Of);b.buffer=pg;b.divisor=Cg;b.normalized=Dg;b.offset=Eg;b.size=Fg;b.state=Gg;b.stride=Hg;b.type=Ig;b.w=Jg;b.x=Kg;b.y=Lg;b.z=Mg;Ha.vert=Ng;Ha.frag=Og;K.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,
Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea){var T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,ed,Gb,ha,I,sa,Ha,pa,ya,Ga,ja,Y;T=a.attributes;S=a.buffer;A=a.context;l=a.current;M=a.draw;N=a.elements;wa=a.extensions;na=a.framebuffer;n=a.gl;H=a.isBufferArgs;ba=a.next;O=a.shader;la=a.uniforms;qa=a.vao;Da=ba.blend_color;Ca=l.blend_color;fa=ba.blend_equation;Ea=l.blend_equation;ka=ba.blend_func;oa=l.blend_func;Aa=ba.colorMask;Ba=l.colorMask;
ma=ba.depth_range;Xb=l.depth_range;Ta=ba.polygonOffset_offset;v=l.polygonOffset_offset;t=ba.sample_coverage;K=l.sample_coverage;ua=ba.scissor_box;va=l.scissor_box;ed=ba.stencil_func;Gb=l.stencil_func;ha=ba.stencil_opBack;I=l.stencil_opBack;sa=ba.stencil_opFront;Ha=l.stencil_opFront;pa=ba.viewport;ya=l.viewport;Ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(e,k){var a,q,h,u,O,pa,m,
J,w,G,D,B,r;a=na.next;a!==na.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),na.cur=a);if(l.dirty){var F,U,ka,da,la,Da,ia,za,De,Ze,Re,Ed,Ae,te,Zd,Wd,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc;F=ba.dither;F!==l.dither&&(F?n.enable(3024):n.disable(3024),l.dither=F);U=fa[0];ka=fa[1];if(U!==Ea[0]||ka!==Ea[1])n.blendEquationSeparate(U,ka),Ea[0]=U,Ea[1]=ka;da=ba.depth_func;da!==l.depth_func&&(n.depthFunc(da),l.depth_func=da);la=ma[0];Da=ma[1];if(la!==
Xb[0]||Da!==Xb[1])n.depthRange(la,Da),Xb[0]=la,Xb[1]=Da;ia=ba.depth_mask;ia!==l.depth_mask&&(n.depthMask(ia),l.depth_mask=ia);za=Aa[0];De=Aa[1];Ze=Aa[2];Re=Aa[3];if(za!==Ba[0]||De!==Ba[1]||Ze!==Ba[2]||Re!==Ba[3])n.colorMask(za,De,Ze,Re),Ba[0]=za,Ba[1]=De,Ba[2]=Ze,Ba[3]=Re;Ed=ba.cull_enable;Ed!==l.cull_enable&&(Ed?n.enable(2884):n.disable(2884),l.cull_enable=Ed);Ae=ba.cull_face;Ae!==l.cull_face&&(n.cullFace(Ae),l.cull_face=Ae);te=ba.frontFace;te!==l.frontFace&&(n.frontFace(te),l.frontFace=te);Zd=ba.lineWidth;
Zd!==l.lineWidth&&(n.lineWidth(Zd),l.lineWidth=Zd);Wd=ba.polygonOffset_enable;Wd!==l.polygonOffset_enable&&(Wd?n.enable(32823):n.disable(32823),l.polygonOffset_enable=Wd);$d=Ta[0];nd=Ta[1];if($d!==v[0]||nd!==v[1])n.polygonOffset($d,nd),v[0]=$d,v[1]=nd;$c=ba.sample_alpha;$c!==l.sample_alpha&&($c?n.enable(32926):n.disable(32926),l.sample_alpha=$c);sd=ba.sample_enable;sd!==l.sample_enable&&(sd?n.enable(32928):n.disable(32928),l.sample_enable=sd);Kc=t[0];pd=t[1];if(Kc!==K[0]||pd!==K[1])n.sampleCoverage(Kc,
pd),K[0]=Kc,K[1]=pd;Ec=ba.stencil_mask;Ec!==l.stencil_mask&&(n.stencilMask(Ec),l.stencil_mask=Ec);fd=ed[0];Pc=ed[1];md=ed[2];if(fd!==Gb[0]||Pc!==Gb[1]||md!==Gb[2])n.stencilFunc(fd,Pc,md),Gb[0]=fd,Gb[1]=Pc,Gb[2]=md;Ab=sa[0];Eb=sa[1];tc=sa[2];xb=sa[3];if(Ab!==Ha[0]||Eb!==Ha[1]||tc!==Ha[2]||xb!==Ha[3])n.stencilOpSeparate(Ab,Eb,tc,xb),Ha[0]=Ab,Ha[1]=Eb,Ha[2]=tc,Ha[3]=xb;wc=ha[0];Bb=ha[1];Ic=ha[2];kc=ha[3];if(wc!==I[0]||Bb!==I[1]||Ic!==I[2]||kc!==I[3])n.stencilOpSeparate(wc,Bb,Ic,kc),I[0]=wc,I[1]=Bb,I[2]=
Ic,I[3]=kc;Fc=ba.scissor_enable;Fc!==l.scissor_enable&&(Fc?n.enable(3089):n.disable(3089),l.scissor_enable=Fc);gd=ua[0];Vc=ua[1];Bc=ua[2];cc=ua[3];if(gd!==va[0]||Vc!==va[1]||Bc!==va[2]||cc!==va[3])n.scissor(gd,Vc,Bc,cc),va[0]=gd,va[1]=Vc,va[2]=Bc,va[3]=cc}q=this.viewport;h=q.x|0;u=q.y|0;O="width"in q?q.width|0:A.framebufferWidth-h;pa="height"in q?q.height|0:A.framebufferHeight-u;m=A.viewportWidth;A.viewportWidth=O;J=A.viewportHeight;A.viewportHeight=pa;n.viewport(h,u,O,pa);ya[0]=h;ya[1]=u;ya[2]=O;
ya[3]=pa;n.blendColor(0,0,0,1);Ca[0]=0;Ca[1]=0;Ca[2]=0;Ca[3]=1;n.enable(3042);l.blend_enable=!0;n.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;n.disable(2929);l.depth_enable=!1;n.disable(2960);l.stencil_enable=!1;if(w=l.profile)G=performance.now(),Z.count+=k;n.useProgram(P.program);D=wa.angle_instanced_arrays;var Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,
Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub;qa.setVAO(null);Y.buffer=this.sizeBuffer;Gc=!1;oc=null;pc=0;lc=!1;$a=dc=0;Hc=1;yb=0;cb=5126;Va=nb=ab=Mb=0;H(Y)?(Gc=!0,oc=S.createStream(34962,Y),cb=oc.dtype):(oc=S.getBuffer(Y))?cb=oc.dtype:"constant"in Y?(Hc=2,"number"===typeof Y.constant?(ab=Y.constant,nb=Va=Mb=0):(ab=0<Y.constant.length?Y.constant[0]:0,nb=1<Y.constant.length?Y.constant[1]:0,Va=2<Y.constant.length?Y.constant[2]:0,Mb=3<Y.constant.length?Y.constant[3]:0)):(oc=H(Y.buffer)?S.createStream(34962,
Y.buffer):S.getBuffer(Y.buffer),cb="type"in Y?Ga[Y.type]:oc.dtype,lc=!!Y.normalized,$a=Y.size|0,dc=Y.offset|0,yb=Y.stride|0,pc=Y.divisor|0);Lc=ea.location;Hb=T[Lc];if(1===Hc){Hb.buffer||n.enableVertexAttribArray(Lc);Ib=$a||1;if(Hb.type!==cb||Hb.size!==Ib||Hb.buffer!==oc||Hb.normalized!==lc||Hb.offset!==dc||Hb.stride!==yb)n.bindBuffer(34962,oc.buffer),n.vertexAttribPointer(Lc,Ib,cb,lc,yb,dc),Hb.type=cb,Hb.size=Ib,Hb.buffer=oc,Hb.normalized=lc,Hb.offset=dc,Hb.stride=yb;Hb.divisor!==pc&&(D.vertexAttribDivisorANGLE(Lc,
pc),Hb.divisor=pc)}else if(Hb.buffer&&(n.disableVertexAttribArray(Lc),Hb.buffer=null),Hb.x!==ab||Hb.y!==nb||Hb.z!==Va||Hb.w!==Mb)n.vertexAttrib4f(Lc,ab,nb,Va,Mb),Hb.x=ab,Hb.y=nb,Hb.z=Va,Hb.w=Mb;ja.buffer=this.sizeBuffer;qc=!1;Nb=null;jb=0;Fb=!1;wb=Cb=0;hb=1;Yb=0;Ob=5126;ob=Tb=Ua=qb=0;H(ja)?(qc=!0,Nb=S.createStream(34962,ja),Ob=Nb.dtype):(Nb=S.getBuffer(ja))?Ob=Nb.dtype:"constant"in ja?(hb=2,"number"===typeof ja.constant?(Ua=ja.constant,Tb=ob=qb=0):(Ua=0<ja.constant.length?ja.constant[0]:0,Tb=1<ja.constant.length?
ja.constant[1]:0,ob=2<ja.constant.length?ja.constant[2]:0,qb=3<ja.constant.length?ja.constant[3]:0)):(Nb=H(ja.buffer)?S.createStream(34962,ja.buffer):S.getBuffer(ja.buffer),Ob="type"in ja?Ga[ja.type]:Nb.dtype,Fb=!!ja.normalized,wb=ja.size|0,Cb=ja.offset|0,Yb=ja.stride|0,jb=ja.divisor|0);hc=C.location;ib=T[hc];if(1===hb){ib.buffer||n.enableVertexAttribArray(hc);pb=wb||1;if(ib.type!==Ob||ib.size!==pb||ib.buffer!==Nb||ib.normalized!==Fb||ib.offset!==Cb||ib.stride!==Yb)n.bindBuffer(34962,Nb.buffer),n.vertexAttribPointer(hc,
pb,Ob,Fb,Yb,Cb),ib.type=Ob,ib.size=pb,ib.buffer=Nb,ib.normalized=Fb,ib.offset=Cb,ib.stride=Yb;ib.divisor!==jb&&(D.vertexAttribDivisorANGLE(hc,jb),ib.divisor=jb)}else if(ib.buffer&&(n.disableVertexAttribArray(hc),ib.buffer=null),ib.x!==Ua||ib.y!==Tb||ib.z!==ob||ib.w!==qb)n.vertexAttrib4f(hc,Ua,Tb,ob,qb),ib.x=Ua,ib.y=Tb,ib.z=ob,ib.w=qb;Ja=this.charBuffer;rb=!1;La=null;eb=0;fb=!1;kb=Ma=0;Wa=1;tb=0;sb=5126;Jb=Ra=Ac=Pa=0;H(Ja)?(rb=!0,La=S.createStream(34962,Ja),sb=La.dtype):(La=S.getBuffer(Ja))?sb=La.dtype:
"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Ac=Ja.constant,Ra=Jb=Pa=0):(Ac=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=H(Ja.buffer)?S.createStream(34962,Ja.buffer):S.getBuffer(Ja.buffer),sb="type"in Ja?Ga[Ja.type]:La.dtype,fb=!!Ja.normalized,kb=Ja.size|0,Ma=Ja.offset|0,tb=Ja.stride|0,eb=Ja.divisor|0);Db=W.location;Na=T[Db];if(1===Wa){Na.buffer||n.enableVertexAttribArray(Db);
Qd=kb||1;if(Na.type!==sb||Na.size!==Qd||Na.buffer!==La||Na.normalized!==fb||Na.offset!==Ma||Na.stride!==tb)n.bindBuffer(34962,La.buffer),n.vertexAttribPointer(Db,Qd,sb,fb,tb,Ma),Na.type=sb,Na.size=Qd,Na.buffer=La,Na.normalized=fb,Na.offset=Ma,Na.stride=tb;Na.divisor!==eb&&(D.vertexAttribDivisorANGLE(Db,eb),Na.divisor=eb)}else if(Na.buffer&&(n.disableVertexAttribArray(Db),Na.buffer=null),Na.x!==Ac||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)n.vertexAttrib4f(Db,Ac,Ra,Jb,Pa),Na.x=Ac,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ya=
this.position;Kb=!1;Lb=null;lb=0;Oa=!1;Qa=Zb=0;ub=1;vb=0;Sa=5126;uc=Dc=ec=mb=0;H(Ya)?(Kb=!0,Lb=S.createStream(34962,Ya),Sa=Lb.dtype):(Lb=S.getBuffer(Ya))?Sa=Lb.dtype:"constant"in Ya?(ub=2,"number"===typeof Ya.constant?(ec=Ya.constant,Dc=uc=mb=0):(ec=0<Ya.constant.length?Ya.constant[0]:0,Dc=1<Ya.constant.length?Ya.constant[1]:0,uc=2<Ya.constant.length?Ya.constant[2]:0,mb=3<Ya.constant.length?Ya.constant[3]:0)):(Lb=H(Ya.buffer)?S.createStream(34962,Ya.buffer):S.getBuffer(Ya.buffer),Sa="type"in Ya?Ga[Ya.type]:
Lb.dtype,Oa=!!Ya.normalized,Qa=Ya.size|0,Zb=Ya.offset|0,vb=Ya.stride|0,lb=Ya.divisor|0);bb=xa.location;ic=T[bb];if(1===ub){ic.buffer||n.enableVertexAttribArray(bb);ad=Qa||2;if(ic.type!==Sa||ic.size!==ad||ic.buffer!==Lb||ic.normalized!==Oa||ic.offset!==Zb||ic.stride!==vb)n.bindBuffer(34962,Lb.buffer),n.vertexAttribPointer(bb,ad,Sa,Oa,vb,Zb),ic.type=Sa,ic.size=ad,ic.buffer=Lb,ic.normalized=Oa,ic.offset=Zb,ic.stride=vb;ic.divisor!==lb&&(D.vertexAttribDivisorANGLE(bb,lb),ic.divisor=lb)}else if(ic.buffer&&
(n.disableVertexAttribArray(bb),ic.buffer=null),ic.x!==ec||ic.y!==Dc||ic.z!==uc||ic.w!==mb)n.vertexAttrib4f(bb,ec,Dc,uc,mb),ic.x=ec,ic.y=Dc,ic.z=uc,ic.w=mb;Xa=this.viewportArray;n.uniform4f(X.location,Xa[0],Xa[1],Xa[2],Xa[3]);Mc=this.scale;n.uniform2f(ra.location,Mc[0],Mc[1]);zb=this.translate;n.uniform2f(V.location,zb[0],zb[1]);(Za=M.elements)?n.bindBuffer(34963,Za.buffer.buffer):qa.currentVAO&&(Za=N.getElements(qa.currentVAO.elements))&&n.bindBuffer(34963,Za.buffer.buffer);Ub=M.instances;for(B=
0;B<k;++B){r=e[B];var sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd,rd;sc=x.call(this,A,r,B);B&&Vb===sc||(Vb=sc,n.uniform1f(E.location,sc));Pb=R.call(this,A,r,B);B&&Jc===Pb||(Jc=Pb,n.uniform1f(Q.location,Pb));Qb=r.align;B&&qd===Qb||(qd=Qb,n.uniform1f(L.location,Qb));Cc=r.baseline;B&&Hd===Cc||(Hd=Cc,n.uniform1f(g.location,Cc));Nc=r.color;Wc=Nc[0];mc=Nc[1];fc=Nc[2];rc=Nc[3];B&&ud===Wc&&vc===mc&&db===fc&&Sb===rc||(ud=Wc,vc=mc,db=fc,Sb=
rc,n.uniform4f(d.location,Wc,mc,fc,rc));Wb=ga.call(this,A,r,B);bc=Wb[0];xc=Wb[1];B&&gc===bc&&zc===xc||(gc=bc,zc=xc,n.uniform2f(y.location,bc,xc));bd=c.call(this,A,r,B);Qc=bd[0];Sc=bd[1];B&&Rc===Qc&&Xc===Sc||(Rc=Qc,Xc=Sc,n.uniform2f(aa.location,Qc,Sc));wd=r.positionOffset;cd=wd[0];jc=wd[1];B&&Yc===cd&&ac===jc||(Yc=cd,ac=jc,n.uniform2f(z.location,cd,jc));Zc=r.opacity;B&&Uc===Zc||(Uc=Zc,n.uniform1f(b.location,Zc));(dd=f.call(this,A,r,B))&&"framebuffer"===dd._reglType&&(dd=dd.color[0]);yc=dd._texture;
n.uniform1i(p.location,yc.bind());jd=r.offset;if(rd=r.count)0<Ub?Za?D.drawElementsInstancedANGLE(0,rd,Za.type,jd<<(Za.type-5121>>1),Ub):D.drawArraysInstancedANGLE(0,jd,rd,Ub):0>Ub&&(Za?n.drawElements(0,rd,Za.type,jd<<(Za.type-5121>>1)):n.drawArrays(0,jd,rd)),yc.unbind()}Gc&&S.destroyStream(oc);qc&&S.destroyStream(Nb);rb&&S.destroyStream(La);Kb&&S.destroyStream(Lb);l.dirty=!0;qa.setVAO(null);A.viewportWidth=m;A.viewportHeight=J;w&&(Z.cpuTime+=performance.now()-G)},draw:function(c){var f,a,u,O,pa,m,
x,w,B,D,r,R,P,F,U,ka,ga,da,la,Da,ia,za,De,Ze,Re,Ed,Ae,te,Zd,Wd,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb;f=na.next;f!==na.cur&&(f?n.bindFramebuffer(36160,f.framebuffer):n.bindFramebuffer(36160,null),na.cur=f);if(l.dirty){var Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc;Wa=ba.dither;Wa!==
l.dither&&(Wa?n.enable(3024):n.disable(3024),l.dither=Wa);tb=fa[0];sb=fa[1];if(tb!==Ea[0]||sb!==Ea[1])n.blendEquationSeparate(tb,sb),Ea[0]=tb,Ea[1]=sb;Pa=ba.depth_func;Pa!==l.depth_func&&(n.depthFunc(Pa),l.depth_func=Pa);Ac=ma[0];Ra=ma[1];if(Ac!==Xb[0]||Ra!==Xb[1])n.depthRange(Ac,Ra),Xb[0]=Ac,Xb[1]=Ra;Jb=ba.depth_mask;Jb!==l.depth_mask&&(n.depthMask(Jb),l.depth_mask=Jb);Db=Aa[0];Na=Aa[1];Qd=Aa[2];Ya=Aa[3];if(Db!==Ba[0]||Na!==Ba[1]||Qd!==Ba[2]||Ya!==Ba[3])n.colorMask(Db,Na,Qd,Ya),Ba[0]=Db,Ba[1]=Na,
Ba[2]=Qd,Ba[3]=Ya;Kb=ba.cull_enable;Kb!==l.cull_enable&&(Kb?n.enable(2884):n.disable(2884),l.cull_enable=Kb);Lb=ba.cull_face;Lb!==l.cull_face&&(n.cullFace(Lb),l.cull_face=Lb);lb=ba.frontFace;lb!==l.frontFace&&(n.frontFace(lb),l.frontFace=lb);Oa=ba.lineWidth;Oa!==l.lineWidth&&(n.lineWidth(Oa),l.lineWidth=Oa);Zb=ba.polygonOffset_enable;Zb!==l.polygonOffset_enable&&(Zb?n.enable(32823):n.disable(32823),l.polygonOffset_enable=Zb);Qa=Ta[0];ub=Ta[1];if(Qa!==v[0]||ub!==v[1])n.polygonOffset(Qa,ub),v[0]=Qa,
v[1]=ub;vb=ba.sample_alpha;vb!==l.sample_alpha&&(vb?n.enable(32926):n.disable(32926),l.sample_alpha=vb);Sa=ba.sample_enable;Sa!==l.sample_enable&&(Sa?n.enable(32928):n.disable(32928),l.sample_enable=Sa);mb=t[0];ec=t[1];if(mb!==K[0]||ec!==K[1])n.sampleCoverage(mb,ec),K[0]=mb,K[1]=ec;Dc=ba.stencil_mask;Dc!==l.stencil_mask&&(n.stencilMask(Dc),l.stencil_mask=Dc);uc=ed[0];bb=ed[1];ic=ed[2];if(uc!==Gb[0]||bb!==Gb[1]||ic!==Gb[2])n.stencilFunc(uc,bb,ic),Gb[0]=uc,Gb[1]=bb,Gb[2]=ic;ad=sa[0];Xa=sa[1];Mc=sa[2];
zb=sa[3];if(ad!==Ha[0]||Xa!==Ha[1]||Mc!==Ha[2]||zb!==Ha[3])n.stencilOpSeparate(ad,Xa,Mc,zb),Ha[0]=ad,Ha[1]=Xa,Ha[2]=Mc,Ha[3]=zb;Za=ha[0];Ub=ha[1];sc=ha[2];Vb=ha[3];if(Za!==I[0]||Ub!==I[1]||sc!==I[2]||Vb!==I[3])n.stencilOpSeparate(Za,Ub,sc,Vb),I[0]=Za,I[1]=Ub,I[2]=sc,I[3]=Vb;Pb=ba.scissor_enable;Pb!==l.scissor_enable&&(Pb?n.enable(3089):n.disable(3089),l.scissor_enable=Pb);Jc=ua[0];Qb=ua[1];qd=ua[2];Cc=ua[3];if(Jc!==va[0]||Qb!==va[1]||qd!==va[2]||Cc!==va[3])n.scissor(Jc,Qb,qd,Cc),va[0]=Jc,va[1]=Qb,
va[2]=qd,va[3]=Cc}a=this.viewport;u=a.x|0;O=a.y|0;pa="width"in a?a.width|0:A.framebufferWidth-u;m="height"in a?a.height|0:A.framebufferHeight-O;x=A.viewportWidth;A.viewportWidth=pa;w=A.viewportHeight;A.viewportHeight=m;n.viewport(u,O,pa,m);ya[0]=u;ya[1]=O;ya[2]=pa;ya[3]=m;n.blendColor(0,0,0,1);Ca[0]=0;Ca[1]=0;Ca[2]=0;Ca[3]=1;n.enable(3042);l.blend_enable=!0;n.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;n.disable(2929);l.depth_enable=!1;n.disable(2960);l.stencil_enable=!1;
if(B=l.profile)D=performance.now(),Z.count++;n.useProgram(G.program);r=wa.angle_instanced_arrays;qa.setVAO(null);Y.buffer=this.sizeBuffer;R=!1;P=null;F=0;U=!1;ga=ka=0;da=1;la=0;Da=5126;Ze=De=za=ia=0;H(Y)?(R=!0,P=S.createStream(34962,Y),Da=P.dtype):(P=S.getBuffer(Y))?Da=P.dtype:"constant"in Y?(da=2,"number"===typeof Y.constant?(za=Y.constant,De=Ze=ia=0):(za=0<Y.constant.length?Y.constant[0]:0,De=1<Y.constant.length?Y.constant[1]:0,Ze=2<Y.constant.length?Y.constant[2]:0,ia=3<Y.constant.length?Y.constant[3]:
0)):(P=H(Y.buffer)?S.createStream(34962,Y.buffer):S.getBuffer(Y.buffer),Da="type"in Y?Ga[Y.type]:P.dtype,U=!!Y.normalized,ga=Y.size|0,ka=Y.offset|0,la=Y.stride|0,F=Y.divisor|0);Re=ea.location;Ed=T[Re];if(1===da){Ed.buffer||n.enableVertexAttribArray(Re);Ae=ga||1;if(Ed.type!==Da||Ed.size!==Ae||Ed.buffer!==P||Ed.normalized!==U||Ed.offset!==ka||Ed.stride!==la)n.bindBuffer(34962,P.buffer),n.vertexAttribPointer(Re,Ae,Da,U,la,ka),Ed.type=Da,Ed.size=Ae,Ed.buffer=P,Ed.normalized=U,Ed.offset=ka,Ed.stride=la;
Ed.divisor!==F&&(r.vertexAttribDivisorANGLE(Re,F),Ed.divisor=F)}else if(Ed.buffer&&(n.disableVertexAttribArray(Re),Ed.buffer=null),Ed.x!==za||Ed.y!==De||Ed.z!==Ze||Ed.w!==ia)n.vertexAttrib4f(Re,za,De,Ze,ia),Ed.x=za,Ed.y=De,Ed.z=Ze,Ed.w=ia;ja.buffer=this.sizeBuffer;te=!1;Zd=null;Wd=0;$d=!1;$c=nd=0;sd=1;Kc=0;pd=5126;md=Pc=fd=Ec=0;H(ja)?(te=!0,Zd=S.createStream(34962,ja),pd=Zd.dtype):(Zd=S.getBuffer(ja))?pd=Zd.dtype:"constant"in ja?(sd=2,"number"===typeof ja.constant?(fd=ja.constant,Pc=md=Ec=0):(fd=
0<ja.constant.length?ja.constant[0]:0,Pc=1<ja.constant.length?ja.constant[1]:0,md=2<ja.constant.length?ja.constant[2]:0,Ec=3<ja.constant.length?ja.constant[3]:0)):(Zd=H(ja.buffer)?S.createStream(34962,ja.buffer):S.getBuffer(ja.buffer),pd="type"in ja?Ga[ja.type]:Zd.dtype,$d=!!ja.normalized,$c=ja.size|0,nd=ja.offset|0,Kc=ja.stride|0,Wd=ja.divisor|0);Ab=C.location;Eb=T[Ab];if(1===sd){Eb.buffer||n.enableVertexAttribArray(Ab);tc=$c||1;if(Eb.type!==pd||Eb.size!==tc||Eb.buffer!==Zd||Eb.normalized!==$d||
Eb.offset!==nd||Eb.stride!==Kc)n.bindBuffer(34962,Zd.buffer),n.vertexAttribPointer(Ab,tc,pd,$d,Kc,nd),Eb.type=pd,Eb.size=tc,Eb.buffer=Zd,Eb.normalized=$d,Eb.offset=nd,Eb.stride=Kc;Eb.divisor!==Wd&&(r.vertexAttribDivisorANGLE(Ab,Wd),Eb.divisor=Wd)}else if(Eb.buffer&&(n.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==fd||Eb.y!==Pc||Eb.z!==md||Eb.w!==Ec)n.vertexAttrib4f(Ab,fd,Pc,md,Ec),Eb.x=fd,Eb.y=Pc,Eb.z=md,Eb.w=Ec;xb=this.charBuffer;wc=!1;Bb=null;Ic=0;kc=!1;gd=Fc=0;Vc=1;Bc=0;cc=5126;lc=pc=oc=
Gc=0;H(xb)?(wc=!0,Bb=S.createStream(34962,xb),cc=Bb.dtype):(Bb=S.getBuffer(xb))?cc=Bb.dtype:"constant"in xb?(Vc=2,"number"===typeof xb.constant?(oc=xb.constant,pc=lc=Gc=0):(oc=0<xb.constant.length?xb.constant[0]:0,pc=1<xb.constant.length?xb.constant[1]:0,lc=2<xb.constant.length?xb.constant[2]:0,Gc=3<xb.constant.length?xb.constant[3]:0)):(Bb=H(xb.buffer)?S.createStream(34962,xb.buffer):S.getBuffer(xb.buffer),cc="type"in xb?Ga[xb.type]:Bb.dtype,kc=!!xb.normalized,gd=xb.size|0,Fc=xb.offset|0,Bc=xb.stride|
0,Ic=xb.divisor|0);dc=W.location;$a=T[dc];if(1===Vc){$a.buffer||n.enableVertexAttribArray(dc);Hc=gd||1;if($a.type!==cc||$a.size!==Hc||$a.buffer!==Bb||$a.normalized!==kc||$a.offset!==Fc||$a.stride!==Bc)n.bindBuffer(34962,Bb.buffer),n.vertexAttribPointer(dc,Hc,cc,kc,Bc,Fc),$a.type=cc,$a.size=Hc,$a.buffer=Bb,$a.normalized=kc,$a.offset=Fc,$a.stride=Bc;$a.divisor!==Ic&&(r.vertexAttribDivisorANGLE(dc,Ic),$a.divisor=Ic)}else if($a.buffer&&(n.disableVertexAttribArray(dc),$a.buffer=null),$a.x!==oc||$a.y!==
pc||$a.z!==lc||$a.w!==Gc)n.vertexAttrib4f(dc,oc,pc,lc,Gc),$a.x=oc,$a.y=pc,$a.z=lc,$a.w=Gc;yb=this.position;cb=!1;Mb=null;ab=0;nb=!1;Lc=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=jb=Nb=0;H(yb)?(cb=!0,Mb=S.createStream(34962,yb),qc=Mb.dtype):(Mb=S.getBuffer(yb))?qc=Mb.dtype:"constant"in yb?(Hb=2,"number"===typeof yb.constant?(jb=yb.constant,Fb=Cb=Nb=0):(jb=0<yb.constant.length?yb.constant[0]:0,Fb=1<yb.constant.length?yb.constant[1]:0,Cb=2<yb.constant.length?yb.constant[2]:0,Nb=3<yb.constant.length?yb.constant[3]:
0)):(Mb=H(yb.buffer)?S.createStream(34962,yb.buffer):S.getBuffer(yb.buffer),qc="type"in yb?Ga[yb.type]:Mb.dtype,nb=!!yb.normalized,Lc=yb.size|0,Va=yb.offset|0,Ib=yb.stride|0,ab=yb.divisor|0);wb=xa.location;hb=T[wb];if(1===Hb){hb.buffer||n.enableVertexAttribArray(wb);Yb=Lc||2;if(hb.type!==qc||hb.size!==Yb||hb.buffer!==Mb||hb.normalized!==nb||hb.offset!==Va||hb.stride!==Ib)n.bindBuffer(34962,Mb.buffer),n.vertexAttribPointer(wb,Yb,qc,nb,Ib,Va),hb.type=qc,hb.size=Yb,hb.buffer=Mb,hb.normalized=nb,hb.offset=
Va,hb.stride=Ib;hb.divisor!==ab&&(r.vertexAttribDivisorANGLE(wb,ab),hb.divisor=ab)}else if(hb.buffer&&(n.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)n.vertexAttrib4f(wb,jb,Fb,Cb,Nb),hb.x=jb,hb.y=Fb,hb.z=Cb,hb.w=Nb;Ob=J.call(this,A,c,0);n.uniform1f(E.location,Ob);qb=h.call(this,A,c,0);n.uniform1f(Q.location,qb);n.uniform1f(L.location,c.align);n.uniform1f(g.location,c.baseline);Ua=this.viewportArray;n.uniform4f(X.location,Ua[0],Ua[1],Ua[2],Ua[3]);Tb=c.color;
n.uniform4f(d.location,Tb[0],Tb[1],Tb[2],Tb[3]);ob=k.call(this,A,c,0);n.uniform2f(y.location,ob[0],ob[1]);hc=q.call(this,A,c,0);n.uniform2f(aa.location,hc[0],hc[1]);ib=this.scale;n.uniform2f(ra.location,ib[0],ib[1]);pb=this.translate;n.uniform2f(V.location,pb[0],pb[1]);Ja=c.positionOffset;n.uniform2f(z.location,Ja[0],Ja[1]);n.uniform1f(b.location,c.opacity);(rb=e.call(this,A,c,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);La=rb._texture;n.uniform1i(p.location,La.bind());(eb=M.elements)?n.bindBuffer(34963,
eb.buffer.buffer):qa.currentVAO&&(eb=N.getElements(qa.currentVAO.elements))&&n.bindBuffer(34963,eb.buffer.buffer);fb=c.offset;if(Ma=c.count)kb=M.instances,0<kb?eb?r.drawElementsInstancedANGLE(0,Ma,eb.type,fb<<(eb.type-5121>>1),kb):r.drawArraysInstancedANGLE(0,fb,Ma,kb):0>kb&&(eb?n.drawElements(0,Ma,eb.type,fb<<(eb.type-5121>>1)):n.drawArrays(0,fb,Ma)),l.dirty=!0,qa.setVAO(null),A.viewportWidth=x,A.viewportHeight=w,B&&(Z.cpuTime+=performance.now()-D),R&&S.destroyStream(P),te&&S.destroyStream(Zd),wc&&
S.destroyStream(Bb),cb&&S.destroyStream(Mb),La.unbind()},scope:function(b,d,c){var e,f,k,g,a,n,t,v,q,I,p,h,K,y,z,ma,sa,Ha,E,T,C,fa,J,ha,x,N,Xb,Ba,L,G,Q,ua,ya,P,R,wa,Ca,qa,ga,X,aa,W,ea,Ta,oa,xa,Ea,Aa,na,ra,va,Gb,V,id,ed,ia,$a,za,yb,cb,Mb,ab,nb,Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa,Mc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,qd,Cc,Hd,Nc,Wc,ud,mc,vc,fc,db,rc,Sb,Wb,bc,gc,xc,zc,bd,Qc,Rc,Sc,Xc,
wd,cd,Yc,jc,ac,Zc,Uc,dd,yc,jd;e=this.viewport;f=e.x|0;k=e.y|0;g="width"in e?e.width|0:A.framebufferWidth-f;a="height"in e?e.height|0:A.framebufferHeight-k;n=A.viewportWidth;A.viewportWidth=g;t=A.viewportHeight;A.viewportHeight=a;v=pa[0];pa[0]=f;q=pa[1];pa[1]=k;I=pa[2];pa[2]=g;p=pa[3];pa[3]=a;h=Da[0];Da[0]=0;K=Da[1];Da[1]=0;y=Da[2];Da[2]=0;z=Da[3];Da[3]=1;ma=ba.blend_enable;ba.blend_enable=!0;sa=ka[0];ka[0]=770;Ha=ka[1];ka[1]=771;E=ka[2];ka[2]=773;T=ka[3];ka[3]=1;C=ba.depth_enable;ba.depth_enable=
!1;fa=ba.stencil_enable;ba.stencil_enable=!1;if(J=l.profile)ha=performance.now(),Z.count++;x=b.offset;N=M.offset;M.offset=x;Xb=b.count;Ba=M.count;M.count=Xb;L=M.primitive;M.primitive=0;G=b.align;Q=la[64];la[64]=G;ua=B.call(this,A,b,c);ya=la[69];la[69]=ua;P=D.call(this,A,b,c);R=la[67];la[67]=P;wa=F.call(this,A,b,c);Ca=la[66];la[66]=wa;qa=b.baseline;ga=la[65];la[65]=qa;X=U.call(this,A,b,c);aa=la[62];la[62]=X;W=b.color;ea=la[14];la[14]=W;Ta=w.call(this,A,b,c);oa=la[63];la[63]=Ta;xa=b.opacity;Ea=la[10];
la[10]=xa;Aa=b.positionOffset;na=la[68];la[68]=Aa;ra=this.scale;va=la[6];la[6]=ra;Gb=this.translate;V=la[8];la[8]=Gb;id=this.viewportArray;ed=la[3];la[3]=id;ia=this.charBuffer;$a=!1;za=null;yb=0;cb=!1;ab=Mb=0;nb=1;Va=0;Lc=5126;Nb=qc=Ib=Hb=0;H(ia)?($a=!0,za=S.createStream(34962,ia),Lc=za.dtype):(za=S.getBuffer(ia))?Lc=za.dtype:"constant"in ia?(nb=2,"number"===typeof ia.constant?(Ib=ia.constant,qc=Nb=Hb=0):(Ib=0<ia.constant.length?ia.constant[0]:0,qc=1<ia.constant.length?ia.constant[1]:0,Nb=2<ia.constant.length?
ia.constant[2]:0,Hb=3<ia.constant.length?ia.constant[3]:0)):(za=H(ia.buffer)?S.createStream(34962,ia.buffer):S.getBuffer(ia.buffer),Lc="type"in ia?Ga[ia.type]:za.dtype,cb=!!ia.normalized,ab=ia.size|0,Mb=ia.offset|0,Va=ia.stride|0,yb=ia.divisor|0);jb=m.buffer;m.buffer=za;Fb=m.divisor;m.divisor=yb;Cb=m.normalized;m.normalized=cb;wb=m.offset;m.offset=Mb;hb=m.size;m.size=ab;Yb=m.state;m.state=nb;Ob=m.stride;m.stride=Va;qb=m.type;m.type=Lc;Ua=m.w;m.w=Hb;Tb=m.x;m.x=Ib;ob=m.y;m.y=qc;hc=m.z;m.z=Nb;ja.buffer=
this.sizeBuffer;ib=!1;pb=null;Ja=0;rb=!1;eb=La=0;fb=1;Ma=0;kb=5126;Pa=sb=tb=Wa=0;H(ja)?(ib=!0,pb=S.createStream(34962,ja),kb=pb.dtype):(pb=S.getBuffer(ja))?kb=pb.dtype:"constant"in ja?(fb=2,"number"===typeof ja.constant?(tb=ja.constant,sb=Pa=Wa=0):(tb=0<ja.constant.length?ja.constant[0]:0,sb=1<ja.constant.length?ja.constant[1]:0,Pa=2<ja.constant.length?ja.constant[2]:0,Wa=3<ja.constant.length?ja.constant[3]:0)):(pb=H(ja.buffer)?S.createStream(34962,ja.buffer):S.getBuffer(ja.buffer),kb="type"in ja?
Ga[ja.type]:pb.dtype,rb=!!ja.normalized,eb=ja.size|0,La=ja.offset|0,Ma=ja.stride|0,Ja=ja.divisor|0);Ac=r.buffer;r.buffer=pb;Ra=r.divisor;r.divisor=Ja;Jb=r.normalized;r.normalized=rb;Db=r.offset;r.offset=La;Na=r.size;r.size=eb;Qd=r.state;r.state=fb;Ya=r.stride;r.stride=Ma;Kb=r.type;r.type=kb;Lb=r.w;r.w=Wa;lb=r.x;r.x=tb;Oa=r.y;r.y=sb;Zb=r.z;r.z=Pa;Qa=this.position;ub=!1;vb=null;Sa=0;mb=!1;Dc=ec=0;uc=1;bb=0;ic=5126;zb=Mc=Xa=ad=0;H(Qa)?(ub=!0,vb=S.createStream(34962,Qa),ic=vb.dtype):(vb=S.getBuffer(Qa))?
ic=vb.dtype:"constant"in Qa?(uc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,Mc=zb=ad=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,Mc=1<Qa.constant.length?Qa.constant[1]:0,zb=2<Qa.constant.length?Qa.constant[2]:0,ad=3<Qa.constant.length?Qa.constant[3]:0)):(vb=H(Qa.buffer)?S.createStream(34962,Qa.buffer):S.getBuffer(Qa.buffer),ic="type"in Qa?Ga[Qa.type]:vb.dtype,mb=!!Qa.normalized,Dc=Qa.size|0,ec=Qa.offset|0,bb=Qa.stride|0,Sa=Qa.divisor|0);Za=da.buffer;da.buffer=vb;Ub=da.divisor;da.divisor=Sa;sc=
da.normalized;da.normalized=mb;Vb=da.offset;da.offset=ec;Pb=da.size;da.size=Dc;Jc=da.state;da.state=uc;Qb=da.stride;da.stride=bb;qd=da.type;da.type=ic;Cc=da.w;da.w=ad;Hd=da.x;da.x=Xa;Nc=da.y;da.y=Mc;Wc=da.z;da.z=zb;Y.buffer=this.sizeBuffer;ud=!1;mc=null;vc=0;fc=!1;rc=db=0;Sb=1;Wb=0;bc=5126;bd=zc=xc=gc=0;H(Y)?(ud=!0,mc=S.createStream(34962,Y),bc=mc.dtype):(mc=S.getBuffer(Y))?bc=mc.dtype:"constant"in Y?(Sb=2,"number"===typeof Y.constant?(xc=Y.constant,zc=bd=gc=0):(xc=0<Y.constant.length?Y.constant[0]:
0,zc=1<Y.constant.length?Y.constant[1]:0,bd=2<Y.constant.length?Y.constant[2]:0,gc=3<Y.constant.length?Y.constant[3]:0)):(mc=H(Y.buffer)?S.createStream(34962,Y.buffer):S.getBuffer(Y.buffer),bc="type"in Y?Ga[Y.type]:mc.dtype,fc=!!Y.normalized,rc=Y.size|0,db=Y.offset|0,Wb=Y.stride|0,vc=Y.divisor|0);Qc=u.buffer;u.buffer=mc;Rc=u.divisor;u.divisor=vc;Sc=u.normalized;u.normalized=fc;Xc=u.offset;u.offset=db;wd=u.size;u.size=rc;cd=u.state;u.state=Sb;Yc=u.stride;u.stride=Wb;jc=u.type;u.type=bc;ac=u.w;u.w=
gc;Zc=u.x;u.x=xc;Uc=u.y;u.y=zc;dd=u.z;u.z=bd;yc=O.vert;O.vert=61;jd=O.frag;O.frag=60;l.dirty=!0;d(A,b,c);A.viewportWidth=n;A.viewportHeight=t;pa[0]=v;pa[1]=q;pa[2]=I;pa[3]=p;Da[0]=h;Da[1]=K;Da[2]=y;Da[3]=z;ba.blend_enable=ma;ka[0]=sa;ka[1]=Ha;ka[2]=E;ka[3]=T;ba.depth_enable=C;ba.stencil_enable=fa;J&&(Z.cpuTime+=performance.now()-ha);M.offset=N;M.count=Ba;M.primitive=L;la[64]=Q;la[69]=ya;la[67]=R;la[66]=Ca;la[65]=ga;la[62]=aa;la[14]=ea;la[63]=oa;la[10]=Ea;la[68]=na;la[6]=va;la[8]=V;la[3]=ed;$a&&S.destroyStream(za);
m.buffer=jb;m.divisor=Fb;m.normalized=Cb;m.offset=wb;m.size=hb;m.state=Yb;m.stride=Ob;m.type=qb;m.w=Ua;m.x=Tb;m.y=ob;m.z=hc;ib&&S.destroyStream(pb);r.buffer=Ac;r.divisor=Ra;r.normalized=Jb;r.offset=Db;r.size=Na;r.state=Qd;r.stride=Ya;r.type=Kb;r.w=Lb;r.x=lb;r.y=Oa;r.z=Zb;ub&&S.destroyStream(vb);da.buffer=Za;da.divisor=Ub;da.normalized=sc;da.offset=Vb;da.size=Pb;da.state=Jc;da.stride=Qb;da.type=qd;da.w=Cc;da.x=Hd;da.y=Nc;da.z=Wc;ud&&S.destroyStream(mc);u.buffer=Qc;u.divisor=Rc;u.normalized=Sc;u.offset=
Xc;u.size=wd;u.state=cd;u.stride=Yc;u.type=jc;u.w=ac;u.x=Zc;u.y=Uc;u.z=dd;O.vert=yc;O.frag=jd;l.dirty=!0}}},$2:function(a,Z,G){var J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q;J=a.attributes;h=a.current;k=a.framebuffer;q=a.gl;e=a.next;B=a.vao;D=e.blend_color;F=h.blend_color;U=e.blend_equation;w=h.blend_equation;m=e.blend_func;r=h.blend_func;da=e.colorMask;u=h.colorMask;P=e.depth_range;x=h.depth_range;R=e.polygonOffset_offset;ga=h.polygonOffset_offset;c=e.sample_coverage;f=h.sample_coverage;
L=e.scissor_box;p=h.scissor_box;aa=e.stencil_func;y=h.stencil_func;g=e.stencil_opBack;W=h.stencil_opBack;C=e.stencil_opFront;E=h.stencil_opFront;d=e.viewport;Q=h.viewport;return{poll:function(){var b,a,z,J,B,G,Z,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da;h.dirty=!1;a=e.blend_enable;z=e.cull_enable;J=e.depth_enable;B=e.dither;G=e.polygonOffset_enable;Z=e.sample_alpha;T=e.sample_enable;S=e.scissor_enable;A=e.stencil_enable;l=e.cull_face;M=h.cull_face;N=e.depth_func;wa=h.depth_func;na=e.depth_mask;n=h.depth_mask;
H=e.frontFace;ba=h.frontFace;O=e.lineWidth;la=h.lineWidth;qa=e.stencil_mask;Da=h.stencil_mask;b=k.next;b!==k.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),k.cur=b);a!==h.blend_enable&&(a?q.enable(3042):q.disable(3042),h.blend_enable=a);z!==h.cull_enable&&(z?q.enable(2884):q.disable(2884),h.cull_enable=z);J!==h.depth_enable&&(J?q.enable(2929):q.disable(2929),h.depth_enable=J);B!==h.dither&&(B?q.enable(3024):q.disable(3024),h.dither=B);G!==h.polygonOffset_enable&&(G?q.enable(32823):
q.disable(32823),h.polygonOffset_enable=G);Z!==h.sample_alpha&&(Z?q.enable(32926):q.disable(32926),h.sample_alpha=Z);T!==h.sample_enable&&(T?q.enable(32928):q.disable(32928),h.sample_enable=T);S!==h.scissor_enable&&(S?q.enable(3089):q.disable(3089),h.scissor_enable=S);A!==h.stencil_enable&&(A?q.enable(2960):q.disable(2960),h.stencil_enable=A);if(D[0]!==F[0]||D[1]!==F[1]||D[2]!==F[2]||D[3]!==F[3])q.blendColor(D[0],D[1],D[2],D[3]),F[0]=D[0],F[1]=D[1],F[2]=D[2],F[3]=D[3];if(U[0]!==w[0]||U[1]!==w[1])q.blendEquationSeparate(U[0],
U[1]),w[0]=U[0],w[1]=U[1];if(m[0]!==r[0]||m[1]!==r[1]||m[2]!==r[2]||m[3]!==r[3])q.blendFuncSeparate(m[0],m[1],m[2],m[3]),r[0]=m[0],r[1]=m[1],r[2]=m[2],r[3]=m[3];if(da[0]!==u[0]||da[1]!==u[1]||da[2]!==u[2]||da[3]!==u[3])q.colorMask(da[0],da[1],da[2],da[3]),u[0]=da[0],u[1]=da[1],u[2]=da[2],u[3]=da[3];l!==M&&(q.cullFace(l),h.cull_face=l);N!==wa&&(q.depthFunc(N),h.depth_func=N);na!==n&&(q.depthMask(na),h.depth_mask=na);if(P[0]!==x[0]||P[1]!==x[1])q.depthRange(P[0],P[1]),x[0]=P[0],x[1]=P[1];H!==ba&&(q.frontFace(H),
h.frontFace=H);O!==la&&(q.lineWidth(O),h.lineWidth=O);if(R[0]!==ga[0]||R[1]!==ga[1])q.polygonOffset(R[0],R[1]),ga[0]=R[0],ga[1]=R[1];if(c[0]!==f[0]||c[1]!==f[1])q.sampleCoverage(c[0],c[1]),f[0]=c[0],f[1]=c[1];if(L[0]!==p[0]||L[1]!==p[1]||L[2]!==p[2]||L[3]!==p[3])q.scissor(L[0],L[1],L[2],L[3]),p[0]=L[0],p[1]=L[1],p[2]=L[2],p[3]=L[3];if(aa[0]!==y[0]||aa[1]!==y[1]||aa[2]!==y[2])q.stencilFunc(aa[0],aa[1],aa[2]),y[0]=aa[0],y[1]=aa[1],y[2]=aa[2];qa!==Da&&(q.stencilMask(qa),h.stencil_mask=qa);if(g[0]!==
W[0]||g[1]!==W[1]||g[2]!==W[2]||g[3]!==W[3])q.stencilOpSeparate(g[0],g[1],g[2],g[3]),W[0]=g[0],W[1]=g[1],W[2]=g[2],W[3]=g[3];if(C[0]!==E[0]||C[1]!==E[1]||C[2]!==E[2]||C[3]!==E[3])q.stencilOpSeparate(C[0],C[1],C[2],C[3]),E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3];if(d[0]!==Q[0]||d[1]!==Q[1]||d[2]!==Q[2]||d[3]!==Q[3])q.viewport(d[0],d[1],d[2],d[3]),Q[0]=d[0],Q[1]=d[1],Q[2]=d[2],Q[3]=d[3]},refresh:function(){var b,a,z,G,Z,X,ea,T,S,A,l,M,N,wa,na,n;h.dirty=!1;a=e.blend_enable;z=e.cull_enable;G=e.depth_enable;
Z=e.dither;X=e.polygonOffset_enable;ea=e.sample_alpha;T=e.sample_enable;S=e.scissor_enable;A=e.stencil_enable;l=e.cull_face;M=e.depth_func;N=e.depth_mask;wa=e.frontFace;na=e.lineWidth;n=e.stencil_mask;(b=k.next)?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null);k.cur=b;b=J[0];b.buffer?(q.enableVertexAttribArray(0),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,b.x,b.y,b.z,
b.w),b.buffer=null);b=J[1];b.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);b=J[2];b.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);b=J[3];b.buffer?
(q.enableVertexAttribArray(3),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);b=J[4];b.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(4,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);b=J[5];b.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,
b.buffer.buffer),q.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);b=J[6];b.buffer?(q.enableVertexAttribArray(6),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);b=J[7];b.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(7,
b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);b=J[8];b.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(8),q.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);b=J[9];b.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,
b.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);b=J[10];b.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);b=J[11];b.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(11),
q.vertexAttrib4f(11,b.x,b.y,b.z,b.w),b.buffer=null);b=J[12];b.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);b=J[13];b.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,b.x,
b.y,b.z,b.w),b.buffer=null);b=J[14];b.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(14),q.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);b=J[15];b.buffer?(q.enableVertexAttribArray(15),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(15,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=
null);B.currentVAO=null;B.setVAO(B.targetVAO);a?q.enable(3042):q.disable(3042);h.blend_enable=a;z?q.enable(2884):q.disable(2884);h.cull_enable=z;G?q.enable(2929):q.disable(2929);h.depth_enable=G;Z?q.enable(3024):q.disable(3024);h.dither=Z;X?q.enable(32823):q.disable(32823);h.polygonOffset_enable=X;ea?q.enable(32926):q.disable(32926);h.sample_alpha=ea;T?q.enable(32928):q.disable(32928);h.sample_enable=T;S?q.enable(3089):q.disable(3089);h.scissor_enable=S;A?q.enable(2960):q.disable(2960);h.stencil_enable=
A;q.blendColor(D[0],D[1],D[2],D[3]);F[0]=D[0];F[1]=D[1];F[2]=D[2];F[3]=D[3];q.blendEquationSeparate(U[0],U[1]);w[0]=U[0];w[1]=U[1];q.blendFuncSeparate(m[0],m[1],m[2],m[3]);r[0]=m[0];r[1]=m[1];r[2]=m[2];r[3]=m[3];q.colorMask(da[0],da[1],da[2],da[3]);u[0]=da[0];u[1]=da[1];u[2]=da[2];u[3]=da[3];q.cullFace(l);h.cull_face=l;q.depthFunc(M);h.depth_func=M;q.depthMask(N);h.depth_mask=N;q.depthRange(P[0],P[1]);x[0]=P[0];x[1]=P[1];q.frontFace(wa);h.frontFace=wa;q.lineWidth(na);h.lineWidth=na;q.polygonOffset(R[0],
R[1]);ga[0]=R[0];ga[1]=R[1];q.sampleCoverage(c[0],c[1]);f[0]=c[0];f[1]=c[1];q.scissor(L[0],L[1],L[2],L[3]);p[0]=L[0];p[1]=L[1];p[2]=L[2];p[3]=L[3];q.stencilFunc(aa[0],aa[1],aa[2]);y[0]=aa[0];y[1]=aa[1];y[2]=aa[2];q.stencilMask(n);h.stencil_mask=n;q.stencilOpSeparate(g[0],g[1],g[2],g[3]);W[0]=g[0];W[1]=g[1];W[2]=g[2];W[3]=g[3];q.stencilOpSeparate(C[0],C[1],C[2],C[3]);E[0]=C[0];E[1]=C[1];E[2]=C[2];E[3]=C[3];q.viewport(d[0],d[1],d[2],d[3]);Q[0]=d[0];Q[1]=d[1];Q[2]=d[2];Q[3]=d[3]}}},$7:function(a,Z,G,
J,h,k,q,e){var B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea,T;B=a.context;D=a.current;F=a.framebuffer;U=a.gl;w=a.next;m=a.shader;r=a.vao;da=w.blend_color;u=D.blend_color;P=w.blend_equation;x=D.blend_equation;R=w.blend_func;ga=D.blend_func;c=w.colorMask;f=D.colorMask;L=w.depth_range;p=D.depth_range;aa=w.polygonOffset_offset;y=D.polygonOffset_offset;g=w.sample_coverage;W=D.sample_coverage;C=w.scissor_box;E=D.scissor_box;d=w.stencil_func;Q=D.stencil_func;b=w.stencil_opBack;xa=
D.stencil_opBack;z=w.stencil_opFront;ra=D.stencil_opFront;V=w.viewport;X=D.viewport;ea={};T={};return{draw:function(e){var a,l,q,T,C,na,n,H,ba,O;a=e.framebuffer;l=F.getFramebuffer(a);a&&!l&&Z.commandRaise(h,G);a=F.next;F.next=l;q=B.framebufferWidth;B.framebufferWidth=l?l.width:B.drawingBufferWidth;T=B.framebufferHeight;B.framebufferHeight=l?l.height:B.drawingBufferHeight;l!==F.cur&&(l?U.bindFramebuffer(36160,l.framebuffer):U.bindFramebuffer(36160,null),F.cur=l);if(D.dirty){l=w.dither;l!==D.dither&&
(l?U.enable(3024):U.disable(3024),D.dither=l);l=w.blend_enable;l!==D.blend_enable&&(l?U.enable(3042):U.disable(3042),D.blend_enable=l);l=da[0];n=da[1];C=da[2];na=da[3];if(l!==u[0]||n!==u[1]||C!==u[2]||na!==u[3])U.blendColor(l,n,C,na),u[0]=l,u[1]=n,u[2]=C,u[3]=na;l=P[0];n=P[1];if(l!==x[0]||n!==x[1])U.blendEquationSeparate(l,n),x[0]=l,x[1]=n;l=R[0];n=R[1];C=R[2];na=R[3];if(l!==ga[0]||n!==ga[1]||C!==ga[2]||na!==ga[3])U.blendFuncSeparate(l,n,C,na),ga[0]=l,ga[1]=n,ga[2]=C,ga[3]=na;l=w.depth_enable;l!==
D.depth_enable&&(l?U.enable(2929):U.disable(2929),D.depth_enable=l);l=w.depth_func;l!==D.depth_func&&(U.depthFunc(l),D.depth_func=l);l=L[0];n=L[1];if(l!==p[0]||n!==p[1])U.depthRange(l,n),p[0]=l,p[1]=n;l=w.depth_mask;l!==D.depth_mask&&(U.depthMask(l),D.depth_mask=l);l=c[0];n=c[1];C=c[2];na=c[3];if(l!==f[0]||n!==f[1]||C!==f[2]||na!==f[3])U.colorMask(l,n,C,na),f[0]=l,f[1]=n,f[2]=C,f[3]=na;l=w.cull_enable;l!==D.cull_enable&&(l?U.enable(2884):U.disable(2884),D.cull_enable=l);l=w.cull_face;l!==D.cull_face&&
(U.cullFace(l),D.cull_face=l);l=w.frontFace;l!==D.frontFace&&(U.frontFace(l),D.frontFace=l);l=w.lineWidth;l!==D.lineWidth&&(U.lineWidth(l),D.lineWidth=l);l=w.polygonOffset_enable;l!==D.polygonOffset_enable&&(l?U.enable(32823):U.disable(32823),D.polygonOffset_enable=l);l=aa[0];n=aa[1];if(l!==y[0]||n!==y[1])U.polygonOffset(l,n),y[0]=l,y[1]=n;l=w.sample_alpha;l!==D.sample_alpha&&(l?U.enable(32926):U.disable(32926),D.sample_alpha=l);l=w.sample_enable;l!==D.sample_enable&&(l?U.enable(32928):U.disable(32928),
D.sample_enable=l);l=g[0];n=g[1];if(l!==W[0]||n!==W[1])U.sampleCoverage(l,n),W[0]=l,W[1]=n;l=w.stencil_enable;l!==D.stencil_enable&&(l?U.enable(2960):U.disable(2960),D.stencil_enable=l);l=w.stencil_mask;l!==D.stencil_mask&&(U.stencilMask(l),D.stencil_mask=l);l=d[0];n=d[1];C=d[2];if(l!==Q[0]||n!==Q[1]||C!==Q[2])U.stencilFunc(l,n,C),Q[0]=l,Q[1]=n,Q[2]=C;l=z[0];n=z[1];C=z[2];na=z[3];if(l!==ra[0]||n!==ra[1]||C!==ra[2]||na!==ra[3])U.stencilOpSeparate(l,n,C,na),ra[0]=l,ra[1]=n,ra[2]=C,ra[3]=na;l=b[0];n=
b[1];C=b[2];na=b[3];if(l!==xa[0]||n!==xa[1]||C!==xa[2]||na!==xa[3])U.stencilOpSeparate(l,n,C,na),xa[0]=l,xa[1]=n,xa[2]=C,xa[3]=na;l=w.scissor_enable;l!==D.scissor_enable&&(l?U.enable(3089):U.disable(3089),D.scissor_enable=l)}C=B.framebufferWidth;na=B.framebufferHeight;l=B.viewportWidth;B.viewportWidth=C;n=B.viewportHeight;B.viewportHeight=na;U.viewport(0,0,C,na);X[0]=0;X[1]=0;X[2]=C;X[3]=na;C=B.framebufferWidth;na=B.framebufferHeight;U.scissor(0,0,C,na);E[0]=0;E[1]=0;E[2]=C;E[3]=na;if(C=D.profile)H=
performance.now(),J.count++;na=m.program(m.vert,m.frag,G);U.useProgram(na.program);r.setVAO(null);ba=na.id;(O=ea[ba])||(O=ea[ba]=k(na));O.call(this,e);D.dirty=!0;r.setVAO(null);F.next=a;B.framebufferWidth=q;B.framebufferHeight=T;B.viewportWidth=l;B.viewportHeight=n;C&&(J.cpuTime+=performance.now()-H)},scope:function(b,d,c){var e,f,k,g,a,p,h,y,z,u,E,T,m,x,w;e=b.framebuffer;f=F.getFramebuffer(e);e&&!f&&Z.commandRaise(q,G);e=F.next;F.next=f;k=B.framebufferWidth;B.framebufferWidth=f?f.width:B.drawingBufferWidth;
g=B.framebufferHeight;B.framebufferHeight=f?f.height:B.drawingBufferHeight;a=B.framebufferWidth;p=B.framebufferHeight;f=B.viewportWidth;B.viewportWidth=a;h=B.viewportHeight;B.viewportHeight=p;y=V[0];V[0]=0;z=V[1];V[1]=0;u=V[2];V[2]=a;a=V[3];V[3]=p;E=B.framebufferWidth;T=B.framebufferHeight;p=C[0];C[0]=0;m=C[1];C[1]=0;x=C[2];C[2]=E;E=C[3];C[3]=T;if(T=D.profile)w=performance.now(),J.count++;D.dirty=!0;d(B,b,c);F.next=e;B.framebufferWidth=k;B.framebufferHeight=g;B.viewportWidth=f;B.viewportHeight=h;
V[0]=y;V[1]=z;V[2]=u;V[3]=a;C[0]=p;C[1]=m;C[2]=x;C[3]=E;T&&(J.cpuTime+=performance.now()-w);D.dirty=!0},batch:function(k,a){var l,q,h,C,E;if(D.dirty){l=w.dither;l!==D.dither&&(l?U.enable(3024):U.disable(3024),D.dither=l);l=w.blend_enable;l!==D.blend_enable&&(l?U.enable(3042):U.disable(3042),D.blend_enable=l);l=da[0];h=da[1];C=da[2];E=da[3];if(l!==u[0]||h!==u[1]||C!==u[2]||E!==u[3])U.blendColor(l,h,C,E),u[0]=l,u[1]=h,u[2]=C,u[3]=E;l=P[0];h=P[1];if(l!==x[0]||h!==x[1])U.blendEquationSeparate(l,h),x[0]=
l,x[1]=h;l=R[0];h=R[1];C=R[2];E=R[3];if(l!==ga[0]||h!==ga[1]||C!==ga[2]||E!==ga[3])U.blendFuncSeparate(l,h,C,E),ga[0]=l,ga[1]=h,ga[2]=C,ga[3]=E;l=w.depth_enable;l!==D.depth_enable&&(l?U.enable(2929):U.disable(2929),D.depth_enable=l);l=w.depth_func;l!==D.depth_func&&(U.depthFunc(l),D.depth_func=l);l=L[0];h=L[1];if(l!==p[0]||h!==p[1])U.depthRange(l,h),p[0]=l,p[1]=h;l=w.depth_mask;l!==D.depth_mask&&(U.depthMask(l),D.depth_mask=l);l=c[0];h=c[1];C=c[2];E=c[3];if(l!==f[0]||h!==f[1]||C!==f[2]||E!==f[3])U.colorMask(l,
h,C,E),f[0]=l,f[1]=h,f[2]=C,f[3]=E;l=w.cull_enable;l!==D.cull_enable&&(l?U.enable(2884):U.disable(2884),D.cull_enable=l);l=w.cull_face;l!==D.cull_face&&(U.cullFace(l),D.cull_face=l);l=w.frontFace;l!==D.frontFace&&(U.frontFace(l),D.frontFace=l);l=w.lineWidth;l!==D.lineWidth&&(U.lineWidth(l),D.lineWidth=l);l=w.polygonOffset_enable;l!==D.polygonOffset_enable&&(l?U.enable(32823):U.disable(32823),D.polygonOffset_enable=l);l=aa[0];h=aa[1];if(l!==y[0]||h!==y[1])U.polygonOffset(l,h),y[0]=l,y[1]=h;l=w.sample_alpha;
l!==D.sample_alpha&&(l?U.enable(32926):U.disable(32926),D.sample_alpha=l);l=w.sample_enable;l!==D.sample_enable&&(l?U.enable(32928):U.disable(32928),D.sample_enable=l);l=g[0];h=g[1];if(l!==W[0]||h!==W[1])U.sampleCoverage(l,h),W[0]=l,W[1]=h;l=w.stencil_enable;l!==D.stencil_enable&&(l?U.enable(2960):U.disable(2960),D.stencil_enable=l);l=w.stencil_mask;l!==D.stencil_mask&&(U.stencilMask(l),D.stencil_mask=l);l=d[0];h=d[1];C=d[2];if(l!==Q[0]||h!==Q[1]||C!==Q[2])U.stencilFunc(l,h,C),Q[0]=l,Q[1]=h,Q[2]=
C;l=z[0];h=z[1];C=z[2];E=z[3];if(l!==ra[0]||h!==ra[1]||C!==ra[2]||E!==ra[3])U.stencilOpSeparate(l,h,C,E),ra[0]=l,ra[1]=h,ra[2]=C,ra[3]=E;l=b[0];h=b[1];C=b[2];E=b[3];if(l!==xa[0]||h!==xa[1]||C!==xa[2]||E!==xa[3])U.stencilOpSeparate(l,h,C,E),xa[0]=l,xa[1]=h,xa[2]=C,xa[3]=E;l=w.scissor_enable;l!==D.scissor_enable&&(l?U.enable(3089):U.disable(3089),D.scissor_enable=l)}if(l=D.profile)q=performance.now(),J.count+=a;h=m.program(m.vert,m.frag,G);U.useProgram(h.program);r.setVAO(null);C=h.id;(E=T[C])||(E=
T[C]=e(h));E.call(this,k,a);D.dirty=!0;r.setVAO(null);l&&(J.cpuTime+=performance.now()-q)}}},$5:function(a,Z,G,J,h,k){var q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X;q=a.context;e=a.current;B=a.framebuffer;D=a.gl;F=a.next;U=a.shader;w=a.vao;m=F.blend_color;r=e.blend_color;da=F.blend_equation;u=e.blend_equation;P=F.blend_func;x=e.blend_func;R=F.colorMask;ga=e.colorMask;c=F.depth_range;f=e.depth_range;L=F.polygonOffset_offset;p=e.polygonOffset_offset;aa=F.sample_coverage;
y=e.sample_coverage;g=F.scissor_box;W=e.scissor_box;C=F.stencil_func;E=e.stencil_func;d=F.stencil_opBack;Q=e.stencil_opBack;b=F.stencil_opFront;xa=e.stencil_opFront;z=F.viewport;ra=e.viewport;V={};X={};return{draw:function(k){var a,q,A,l,M;a=B.next;a!==B.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),B.cur=a);if(e.dirty){a=F.dither;a!==e.dither&&(a?D.enable(3024):D.disable(3024),e.dither=a);a=F.blend_enable;a!==e.blend_enable&&(a?D.enable(3042):D.disable(3042),e.blend_enable=
a);a=m[0];A=m[1];l=m[2];M=m[3];if(a!==r[0]||A!==r[1]||l!==r[2]||M!==r[3])D.blendColor(a,A,l,M),r[0]=a,r[1]=A,r[2]=l,r[3]=M;a=da[0];A=da[1];if(a!==u[0]||A!==u[1])D.blendEquationSeparate(a,A),u[0]=a,u[1]=A;a=P[0];A=P[1];l=P[2];M=P[3];if(a!==x[0]||A!==x[1]||l!==x[2]||M!==x[3])D.blendFuncSeparate(a,A,l,M),x[0]=a,x[1]=A,x[2]=l,x[3]=M;a=F.depth_enable;a!==e.depth_enable&&(a?D.enable(2929):D.disable(2929),e.depth_enable=a);a=F.depth_func;a!==e.depth_func&&(D.depthFunc(a),e.depth_func=a);a=c[0];A=c[1];if(a!==
f[0]||A!==f[1])D.depthRange(a,A),f[0]=a,f[1]=A;a=F.depth_mask;a!==e.depth_mask&&(D.depthMask(a),e.depth_mask=a);a=R[0];A=R[1];l=R[2];M=R[3];if(a!==ga[0]||A!==ga[1]||l!==ga[2]||M!==ga[3])D.colorMask(a,A,l,M),ga[0]=a,ga[1]=A,ga[2]=l,ga[3]=M;a=F.cull_enable;a!==e.cull_enable&&(a?D.enable(2884):D.disable(2884),e.cull_enable=a);a=F.cull_face;a!==e.cull_face&&(D.cullFace(a),e.cull_face=a);a=F.frontFace;a!==e.frontFace&&(D.frontFace(a),e.frontFace=a);a=F.lineWidth;a!==e.lineWidth&&(D.lineWidth(a),e.lineWidth=
a);a=F.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?D.enable(32823):D.disable(32823),e.polygonOffset_enable=a);a=L[0];A=L[1];if(a!==p[0]||A!==p[1])D.polygonOffset(a,A),p[0]=a,p[1]=A;a=F.sample_alpha;a!==e.sample_alpha&&(a?D.enable(32926):D.disable(32926),e.sample_alpha=a);a=F.sample_enable;a!==e.sample_enable&&(a?D.enable(32928):D.disable(32928),e.sample_enable=a);a=aa[0];A=aa[1];if(a!==y[0]||A!==y[1])D.sampleCoverage(a,A),y[0]=a,y[1]=A;a=F.stencil_enable;a!==e.stencil_enable&&(a?D.enable(2960):
D.disable(2960),e.stencil_enable=a);a=F.stencil_mask;a!==e.stencil_mask&&(D.stencilMask(a),e.stencil_mask=a);a=C[0];A=C[1];l=C[2];if(a!==E[0]||A!==E[1]||l!==E[2])D.stencilFunc(a,A,l),E[0]=a,E[1]=A,E[2]=l;a=b[0];A=b[1];l=b[2];M=b[3];if(a!==xa[0]||A!==xa[1]||l!==xa[2]||M!==xa[3])D.stencilOpSeparate(a,A,l,M),xa[0]=a,xa[1]=A,xa[2]=l,xa[3]=M;a=d[0];A=d[1];l=d[2];M=d[3];if(a!==Q[0]||A!==Q[1]||l!==Q[2]||M!==Q[3])D.stencilOpSeparate(a,A,l,M),Q[0]=a,Q[1]=A,Q[2]=l,Q[3]=M;a=F.scissor_enable;a!==e.scissor_enable&&
(a?D.enable(3089):D.disable(3089),e.scissor_enable=a);a=g[0];A=g[1];l=g[2];M=g[3];if(a!==W[0]||A!==W[1]||l!==W[2]||M!==W[3])D.scissor(a,A,l,M),W[0]=a,W[1]=A,W[2]=l,W[3]=M;a=z[0];A=z[1];l=z[2];M=z[3];if(a!==ra[0]||A!==ra[1]||l!==ra[2]||M!==ra[3])D.viewport(a,A,l,M),ra[0]=a,ra[1]=A,ra[2]=l,ra[3]=M;e.dirty=!1}if(a=e.profile)q=performance.now(),J.count++;A=U.program(U.vert,U.frag,G);D.useProgram(A.program);w.setVAO(null);l=A.id;(M=V[l])||(M=V[l]=h(A));M.call(this,k);w.setVAO(null);a&&(J.cpuTime+=performance.now()-
q)},scope:function(b,d,c){var f,k;if(f=e.profile)k=performance.now(),J.count++;d(q,b,c);f&&(J.cpuTime+=performance.now()-k)},batch:function(a,q){var h,A,l,M,N;h=B.next;h!==B.cur&&(h?D.bindFramebuffer(36160,h.framebuffer):D.bindFramebuffer(36160,null),B.cur=h);if(e.dirty){h=F.dither;h!==e.dither&&(h?D.enable(3024):D.disable(3024),e.dither=h);h=F.blend_enable;h!==e.blend_enable&&(h?D.enable(3042):D.disable(3042),e.blend_enable=h);h=m[0];l=m[1];M=m[2];N=m[3];if(h!==r[0]||l!==r[1]||M!==r[2]||N!==r[3])D.blendColor(h,
l,M,N),r[0]=h,r[1]=l,r[2]=M,r[3]=N;h=da[0];l=da[1];if(h!==u[0]||l!==u[1])D.blendEquationSeparate(h,l),u[0]=h,u[1]=l;h=P[0];l=P[1];M=P[2];N=P[3];if(h!==x[0]||l!==x[1]||M!==x[2]||N!==x[3])D.blendFuncSeparate(h,l,M,N),x[0]=h,x[1]=l,x[2]=M,x[3]=N;h=F.depth_enable;h!==e.depth_enable&&(h?D.enable(2929):D.disable(2929),e.depth_enable=h);h=F.depth_func;h!==e.depth_func&&(D.depthFunc(h),e.depth_func=h);h=c[0];l=c[1];if(h!==f[0]||l!==f[1])D.depthRange(h,l),f[0]=h,f[1]=l;h=F.depth_mask;h!==e.depth_mask&&(D.depthMask(h),
e.depth_mask=h);h=R[0];l=R[1];M=R[2];N=R[3];if(h!==ga[0]||l!==ga[1]||M!==ga[2]||N!==ga[3])D.colorMask(h,l,M,N),ga[0]=h,ga[1]=l,ga[2]=M,ga[3]=N;h=F.cull_enable;h!==e.cull_enable&&(h?D.enable(2884):D.disable(2884),e.cull_enable=h);h=F.cull_face;h!==e.cull_face&&(D.cullFace(h),e.cull_face=h);h=F.frontFace;h!==e.frontFace&&(D.frontFace(h),e.frontFace=h);h=F.lineWidth;h!==e.lineWidth&&(D.lineWidth(h),e.lineWidth=h);h=F.polygonOffset_enable;h!==e.polygonOffset_enable&&(h?D.enable(32823):D.disable(32823),
e.polygonOffset_enable=h);h=L[0];l=L[1];if(h!==p[0]||l!==p[1])D.polygonOffset(h,l),p[0]=h,p[1]=l;h=F.sample_alpha;h!==e.sample_alpha&&(h?D.enable(32926):D.disable(32926),e.sample_alpha=h);h=F.sample_enable;h!==e.sample_enable&&(h?D.enable(32928):D.disable(32928),e.sample_enable=h);h=aa[0];l=aa[1];if(h!==y[0]||l!==y[1])D.sampleCoverage(h,l),y[0]=h,y[1]=l;h=F.stencil_enable;h!==e.stencil_enable&&(h?D.enable(2960):D.disable(2960),e.stencil_enable=h);h=F.stencil_mask;h!==e.stencil_mask&&(D.stencilMask(h),
e.stencil_mask=h);h=C[0];l=C[1];M=C[2];if(h!==E[0]||l!==E[1]||M!==E[2])D.stencilFunc(h,l,M),E[0]=h,E[1]=l,E[2]=M;h=b[0];l=b[1];M=b[2];N=b[3];if(h!==xa[0]||l!==xa[1]||M!==xa[2]||N!==xa[3])D.stencilOpSeparate(h,l,M,N),xa[0]=h,xa[1]=l,xa[2]=M,xa[3]=N;h=d[0];l=d[1];M=d[2];N=d[3];if(h!==Q[0]||l!==Q[1]||M!==Q[2]||N!==Q[3])D.stencilOpSeparate(h,l,M,N),Q[0]=h,Q[1]=l,Q[2]=M,Q[3]=N;h=F.scissor_enable;h!==e.scissor_enable&&(h?D.enable(3089):D.disable(3089),e.scissor_enable=h);h=g[0];l=g[1];M=g[2];N=g[3];if(h!==
W[0]||l!==W[1]||M!==W[2]||N!==W[3])D.scissor(h,l,M,N),W[0]=h,W[1]=l,W[2]=M,W[3]=N;h=z[0];l=z[1];M=z[2];N=z[3];if(h!==ra[0]||l!==ra[1]||M!==ra[2]||N!==ra[3])D.viewport(h,l,M,N),ra[0]=h,ra[1]=l,ra[2]=M,ra[3]=N;e.dirty=!1}if(h=e.profile)A=performance.now(),J.count+=q;l=U.program(U.vert,U.frag,G);D.useProgram(l.program);w.setVAO(null);M=l.id;(N=X[M])||(N=X[M]=k(l));N.call(this,a,q);w.setVAO(null);h&&(J.cpuTime+=performance.now()-A)}}},"$26,color,freq,phase,projection,time,view":function(a,Z,G,J,h,k,q,
e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q){var b,xa,z,ra,V,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,ia,Gb,ha;b=a.attributes;xa=a.context;z=a.current;ra=a.draw;V=a.elements;X=a.framebuffer;ea=a.gl;T=a.isArrayLike;S=a.next;A=a.shader;l=a.uniforms;M=a.vao;N=S.blend_color;wa=z.blend_color;na=S.blend_equation;n=z.blend_equation;H=S.blend_func;ba=z.blend_func;O=S.colorMask;la=z.colorMask;qa=S.depth_range;Da=z.depth_range;Ca=S.polygonOffset_offset;fa=
z.polygonOffset_offset;Ea=S.sample_coverage;ka=z.sample_coverage;oa=S.scissor_box;Aa=z.scissor_box;Ba=S.stencil_func;ma=z.stencil_func;Xb=S.stencil_opBack;Ta=z.stencil_opBack;v=S.stencil_opFront;t=z.stencil_opFront;K=S.viewport;ua=z.viewport;va=new Float32Array(16);ia=new Float32Array(16);Gb=new Float32Array(16);ha=new Float32Array(16);return{draw:function(c){var f,a,l,p;f=X.next;f!==X.cur&&(f?ea.bindFramebuffer(36160,f.framebuffer):ea.bindFramebuffer(36160,null),X.cur=f);if(z.dirty){var y;f=S.dither;
f!==z.dither&&(f?ea.enable(3024):ea.disable(3024),z.dither=f);f=S.blend_enable;f!==z.blend_enable&&(f?ea.enable(3042):ea.disable(3042),z.blend_enable=f);f=N[0];l=N[1];p=N[2];y=N[3];if(f!==wa[0]||l!==wa[1]||p!==wa[2]||y!==wa[3])ea.blendColor(f,l,p,y),wa[0]=f,wa[1]=l,wa[2]=p,wa[3]=y;f=na[0];l=na[1];if(f!==n[0]||l!==n[1])ea.blendEquationSeparate(f,l),n[0]=f,n[1]=l;f=H[0];l=H[1];p=H[2];y=H[3];if(f!==ba[0]||l!==ba[1]||p!==ba[2]||y!==ba[3])ea.blendFuncSeparate(f,l,p,y),ba[0]=f,ba[1]=l,ba[2]=p,ba[3]=y;f=
S.depth_enable;f!==z.depth_enable&&(f?ea.enable(2929):ea.disable(2929),z.depth_enable=f);f=S.depth_func;f!==z.depth_func&&(ea.depthFunc(f),z.depth_func=f);f=qa[0];l=qa[1];if(f!==Da[0]||l!==Da[1])ea.depthRange(f,l),Da[0]=f,Da[1]=l;f=S.depth_mask;f!==z.depth_mask&&(ea.depthMask(f),z.depth_mask=f);f=O[0];l=O[1];p=O[2];y=O[3];if(f!==la[0]||l!==la[1]||p!==la[2]||y!==la[3])ea.colorMask(f,l,p,y),la[0]=f,la[1]=l,la[2]=p,la[3]=y;f=S.cull_enable;f!==z.cull_enable&&(f?ea.enable(2884):ea.disable(2884),z.cull_enable=
f);f=S.cull_face;f!==z.cull_face&&(ea.cullFace(f),z.cull_face=f);f=S.frontFace;f!==z.frontFace&&(ea.frontFace(f),z.frontFace=f);f=S.lineWidth;f!==z.lineWidth&&(ea.lineWidth(f),z.lineWidth=f);f=S.polygonOffset_enable;f!==z.polygonOffset_enable&&(f?ea.enable(32823):ea.disable(32823),z.polygonOffset_enable=f);f=Ca[0];l=Ca[1];if(f!==fa[0]||l!==fa[1])ea.polygonOffset(f,l),fa[0]=f,fa[1]=l;f=S.sample_alpha;f!==z.sample_alpha&&(f?ea.enable(32926):ea.disable(32926),z.sample_alpha=f);f=S.sample_enable;f!==
z.sample_enable&&(f?ea.enable(32928):ea.disable(32928),z.sample_enable=f);f=Ea[0];l=Ea[1];if(f!==ka[0]||l!==ka[1])ea.sampleCoverage(f,l),ka[0]=f,ka[1]=l;f=S.stencil_enable;f!==z.stencil_enable&&(f?ea.enable(2960):ea.disable(2960),z.stencil_enable=f);f=S.stencil_mask;f!==z.stencil_mask&&(ea.stencilMask(f),z.stencil_mask=f);f=Ba[0];l=Ba[1];p=Ba[2];if(f!==ma[0]||l!==ma[1]||p!==ma[2])ea.stencilFunc(f,l,p),ma[0]=f,ma[1]=l,ma[2]=p;f=v[0];l=v[1];p=v[2];y=v[3];if(f!==t[0]||l!==t[1]||p!==t[2]||y!==t[3])ea.stencilOpSeparate(f,
l,p,y),t[0]=f,t[1]=l,t[2]=p,t[3]=y;f=Xb[0];l=Xb[1];p=Xb[2];y=Xb[3];if(f!==Ta[0]||l!==Ta[1]||p!==Ta[2]||y!==Ta[3])ea.stencilOpSeparate(f,l,p,y),Ta[0]=f,Ta[1]=l,Ta[2]=p,Ta[3]=y;f=S.scissor_enable;f!==z.scissor_enable&&(f?ea.enable(3089):ea.disable(3089),z.scissor_enable=f);f=oa[0];l=oa[1];p=oa[2];y=oa[3];if(f!==Aa[0]||l!==Aa[1]||p!==Aa[2]||y!==Aa[3])ea.scissor(f,l,p,y),Aa[0]=f,Aa[1]=l,Aa[2]=p,Aa[3]=y;f=K[0];l=K[1];p=K[2];y=K[3];if(f!==ua[0]||l!==ua[1]||p!==ua[2]||y!==ua[3])ea.viewport(f,l,p,y),ua[0]=
f,ua[1]=l,ua[2]=p,ua[3]=y;z.dirty=!1}if(f=z.profile)a=performance.now(),J.count++;ea.useProgram(h.program);M.setVAO(null);l=W.location;p=b[l];p.buffer||ea.enableVertexAttribArray(l);if(5126!==p.type||4!==p.size||p.buffer!==k||!1!==p.normalized||0!==p.offset||44!==p.stride)ea.bindBuffer(34962,k.buffer),ea.vertexAttribPointer(l,4,5126,!1,44,0),p.type=5126,p.size=4,p.buffer=k,p.normalized=!1,p.offset=0,p.stride=44;l=C.location;p=b[l];p.buffer||ea.enableVertexAttribArray(l);if(5126!==p.type||4!==p.size||
p.buffer!==q||!1!==p.normalized||16!==p.offset||44!==p.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(l,4,5126,!1,44,16),p.type=5126,p.size=4,p.buffer=q,p.normalized=!1,p.offset=16,p.stride=44;l=g.location;p=b[l];p.buffer||ea.enableVertexAttribArray(l);if(5126!==p.type||3!==p.size||p.buffer!==e||!1!==p.normalized||32!==p.offset||44!==p.stride)ea.bindBuffer(34962,e.buffer),ea.vertexAttribPointer(l,3,5126,!1,44,32),p.type=5126,p.size=3,p.buffer=e,p.normalized=!1,p.offset=32,p.stride=44;
l=B.call(this,xa,c,0);"number"!==typeof l&&Z.commandRaise(D,G);ea.uniform1f(d.location,l);l=F.call(this,xa,c,0);T(l)&&16===l.length||Z.commandRaise(U,G);ea.uniformMatrix4fv(Q.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(va[0]=l[0],va[1]=l[1],va[2]=l[2],va[3]=l[3],va[4]=l[4],va[5]=l[5],va[6]=l[6],va[7]=l[7],va[8]=l[8],va[9]=l[9],va[10]=l[10],va[11]=l[11],va[12]=l[12],va[13]=l[13],va[14]=l[14],va[15]=l[15],va));c=w.call(this,xa,c,0);T(c)&&16===c.length||Z.commandRaise(m,G);ea.uniformMatrix4fv(E.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(ia[0]=c[0],ia[1]=c[1],ia[2]=c[2],ia[3]=c[3],ia[4]=c[4],ia[5]=c[5],ia[6]=c[6],ia[7]=c[7],ia[8]=c[8],ia[9]=c[9],ia[10]=c[10],ia[11]=c[11],ia[12]=c[12],ia[13]=c[13],ia[14]=c[14],ia[15]=c[15],ia));(c=ra.elements)?ea.bindBuffer(34963,c.buffer.buffer):M.currentVAO&&(c=V.getElements(M.currentVAO.elements))&&ea.bindBuffer(34963,c.buffer.buffer);l=ra.offset;c?ea.drawElements(0,1E4,c.type,l<<(c.type-5121>>1)):ea.drawArrays(0,l,1E4);M.setVAO(null);f&&(J.cpuTime+=
performance.now()-a)},scope:function(b,d,c){var f,a,g,n,h,t,v,p,K,y,ma,C,E,H,O,m,fa,ha,Xb,w,Ba,G,B,L,D,M,ba,N,Q,ua,S,T,F,U,Ca,qa,ka,Z,ga,aa,X,W,wa,Ta,ea;if(f=z.profile)a=performance.now(),J.count++;g=ra.count;ra.count=1E4;n=ra.primitive;ra.primitive=0;h=r.call(this,xa,b,c);t=l[5];l[5]=h;v=da.call(this,xa,b,c);h=l[3];l[3]=v;p=u.call(this,xa,b,c);v=l[4];l[4]=p;p=P.buffer;P.buffer=e;K=P.divisor;P.divisor=0;y=P.normalized;P.normalized=!1;ma=P.offset;P.offset=32;C=P.size;P.size=0;E=P.state;P.state=1;H=
P.stride;P.stride=44;O=P.type;P.type=5126;m=P.w;P.w=0;fa=P.x;P.x=0;ha=P.y;P.y=0;Xb=P.z;P.z=0;w=x.buffer;x.buffer=k;Ba=x.divisor;x.divisor=0;G=x.normalized;x.normalized=!1;B=x.offset;x.offset=0;L=x.size;x.size=0;D=x.state;x.state=1;M=x.stride;x.stride=44;ba=x.type;x.type=5126;N=x.w;x.w=0;Q=x.x;x.x=0;ua=x.y;x.y=0;S=x.z;x.z=0;T=R.buffer;R.buffer=q;F=R.divisor;R.divisor=0;U=R.normalized;R.normalized=!1;Ca=R.offset;R.offset=16;qa=R.size;R.size=0;ka=R.state;R.state=1;Z=R.stride;R.stride=44;ga=R.type;R.type=
5126;aa=R.w;R.w=0;X=R.x;R.x=0;W=R.y;R.y=0;wa=R.z;R.z=0;Ta=A.vert;A.vert=2;ea=A.frag;A.frag=1;d(xa,b,c);f&&(J.cpuTime+=performance.now()-a);ra.count=g;ra.primitive=n;l[5]=t;l[3]=h;l[4]=v;P.buffer=p;P.divisor=K;P.normalized=y;P.offset=ma;P.size=C;P.state=E;P.stride=H;P.type=O;P.w=m;P.x=fa;P.y=ha;P.z=Xb;x.buffer=w;x.divisor=Ba;x.normalized=G;x.offset=B;x.size=L;x.state=D;x.stride=M;x.type=ba;x.w=N;x.x=Q;x.y=ua;x.z=S;R.buffer=T;R.divisor=F;R.normalized=U;R.offset=Ca;R.size=qa;R.state=ka;R.stride=Z;R.type=
ga;R.w=aa;R.x=X;R.y=W;R.z=wa;A.vert=Ta;A.frag=ea},batch:function(a,l){var h,u,A;h=X.next;h!==X.cur&&(h?ea.bindFramebuffer(36160,h.framebuffer):ea.bindFramebuffer(36160,null),X.cur=h);if(z.dirty){var m,x,w;h=S.dither;h!==z.dither&&(h?ea.enable(3024):ea.disable(3024),z.dither=h);h=S.blend_enable;h!==z.blend_enable&&(h?ea.enable(3042):ea.disable(3042),z.blend_enable=h);h=N[0];m=N[1];x=N[2];w=N[3];if(h!==wa[0]||m!==wa[1]||x!==wa[2]||w!==wa[3])ea.blendColor(h,m,x,w),wa[0]=h,wa[1]=m,wa[2]=x,wa[3]=w;h=na[0];
m=na[1];if(h!==n[0]||m!==n[1])ea.blendEquationSeparate(h,m),n[0]=h,n[1]=m;h=H[0];m=H[1];x=H[2];w=H[3];if(h!==ba[0]||m!==ba[1]||x!==ba[2]||w!==ba[3])ea.blendFuncSeparate(h,m,x,w),ba[0]=h,ba[1]=m,ba[2]=x,ba[3]=w;h=S.depth_enable;h!==z.depth_enable&&(h?ea.enable(2929):ea.disable(2929),z.depth_enable=h);h=S.depth_func;h!==z.depth_func&&(ea.depthFunc(h),z.depth_func=h);h=qa[0];m=qa[1];if(h!==Da[0]||m!==Da[1])ea.depthRange(h,m),Da[0]=h,Da[1]=m;h=S.depth_mask;h!==z.depth_mask&&(ea.depthMask(h),z.depth_mask=
h);h=O[0];m=O[1];x=O[2];w=O[3];if(h!==la[0]||m!==la[1]||x!==la[2]||w!==la[3])ea.colorMask(h,m,x,w),la[0]=h,la[1]=m,la[2]=x,la[3]=w;h=S.cull_enable;h!==z.cull_enable&&(h?ea.enable(2884):ea.disable(2884),z.cull_enable=h);h=S.cull_face;h!==z.cull_face&&(ea.cullFace(h),z.cull_face=h);h=S.frontFace;h!==z.frontFace&&(ea.frontFace(h),z.frontFace=h);h=S.lineWidth;h!==z.lineWidth&&(ea.lineWidth(h),z.lineWidth=h);h=S.polygonOffset_enable;h!==z.polygonOffset_enable&&(h?ea.enable(32823):ea.disable(32823),z.polygonOffset_enable=
h);h=Ca[0];m=Ca[1];if(h!==fa[0]||m!==fa[1])ea.polygonOffset(h,m),fa[0]=h,fa[1]=m;h=S.sample_alpha;h!==z.sample_alpha&&(h?ea.enable(32926):ea.disable(32926),z.sample_alpha=h);h=S.sample_enable;h!==z.sample_enable&&(h?ea.enable(32928):ea.disable(32928),z.sample_enable=h);h=Ea[0];m=Ea[1];if(h!==ka[0]||m!==ka[1])ea.sampleCoverage(h,m),ka[0]=h,ka[1]=m;h=S.stencil_enable;h!==z.stencil_enable&&(h?ea.enable(2960):ea.disable(2960),z.stencil_enable=h);h=S.stencil_mask;h!==z.stencil_mask&&(ea.stencilMask(h),
z.stencil_mask=h);h=Ba[0];m=Ba[1];x=Ba[2];if(h!==ma[0]||m!==ma[1]||x!==ma[2])ea.stencilFunc(h,m,x),ma[0]=h,ma[1]=m,ma[2]=x;h=v[0];m=v[1];x=v[2];w=v[3];if(h!==t[0]||m!==t[1]||x!==t[2]||w!==t[3])ea.stencilOpSeparate(h,m,x,w),t[0]=h,t[1]=m,t[2]=x,t[3]=w;h=Xb[0];m=Xb[1];x=Xb[2];w=Xb[3];if(h!==Ta[0]||m!==Ta[1]||x!==Ta[2]||w!==Ta[3])ea.stencilOpSeparate(h,m,x,w),Ta[0]=h,Ta[1]=m,Ta[2]=x,Ta[3]=w;h=S.scissor_enable;h!==z.scissor_enable&&(h?ea.enable(3089):ea.disable(3089),z.scissor_enable=h);h=oa[0];m=oa[1];
x=oa[2];w=oa[3];if(h!==Aa[0]||m!==Aa[1]||x!==Aa[2]||w!==Aa[3])ea.scissor(h,m,x,w),Aa[0]=h,Aa[1]=m,Aa[2]=x,Aa[3]=w;h=K[0];m=K[1];x=K[2];w=K[3];if(h!==ua[0]||m!==ua[1]||x!==ua[2]||w!==ua[3])ea.viewport(h,m,x,w),ua[0]=h,ua[1]=m,ua[2]=x,ua[3]=w;z.dirty=!1}if(h=z.profile)u=performance.now(),J.count+=l;ea.useProgram(ga.program);M.setVAO(null);m=W.location;x=b[m];x.buffer||ea.enableVertexAttribArray(m);if(5126!==x.type||4!==x.size||x.buffer!==k||!1!==x.normalized||0!==x.offset||44!==x.stride)ea.bindBuffer(34962,
k.buffer),ea.vertexAttribPointer(m,4,5126,!1,44,0),x.type=5126,x.size=4,x.buffer=k,x.normalized=!1,x.offset=0,x.stride=44;m=C.location;x=b[m];x.buffer||ea.enableVertexAttribArray(m);if(5126!==x.type||4!==x.size||x.buffer!==q||!1!==x.normalized||16!==x.offset||44!==x.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(m,4,5126,!1,44,16),x.type=5126,x.size=4,x.buffer=q,x.normalized=!1,x.offset=16,x.stride=44;m=g.location;x=b[m];x.buffer||ea.enableVertexAttribArray(m);if(5126!==x.type||3!==x.size||
x.buffer!==e||!1!==x.normalized||32!==x.offset||44!==x.stride)ea.bindBuffer(34962,e.buffer),ea.vertexAttribPointer(m,3,5126,!1,44,32),x.type=5126,x.size=3,x.buffer=e,x.normalized=!1,x.offset=32,x.stride=44;m=c.call(this,xa,void 0,A);"number"!==typeof m&&Z.commandRaise(f,G);ea.uniform1f(d.location,m);m=L.call(this,xa,void 0,A);T(m)&&16===m.length||Z.commandRaise(p,G);ea.uniformMatrix4fv(Q.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(Gb[0]=m[0],Gb[1]=m[1],Gb[2]=m[2],Gb[3]=m[3],Gb[4]=m[4],
Gb[5]=m[5],Gb[6]=m[6],Gb[7]=m[7],Gb[8]=m[8],Gb[9]=m[9],Gb[10]=m[10],Gb[11]=m[11],Gb[12]=m[12],Gb[13]=m[13],Gb[14]=m[14],Gb[15]=m[15],Gb));A=aa.call(this,xa,void 0,A);T(A)&&16===A.length||Z.commandRaise(y,G);ea.uniformMatrix4fv(E.location,!1,Array.isArray(A)||A instanceof Float32Array?A:(ha[0]=A[0],ha[1]=A[1],ha[2]=A[2],ha[3]=A[3],ha[4]=A[4],ha[5]=A[5],ha[6]=A[6],ha[7]=A[7],ha[8]=A[8],ha[9]=A[9],ha[10]=A[10],ha[11]=A[11],ha[12]=A[12],ha[13]=A[13],ha[14]=A[14],ha[15]=A[15],ha));(m=ra.elements)?ea.bindBuffer(34963,
m.buffer.buffer):M.currentVAO&&(m=V.getElements(M.currentVAO.elements))&&ea.bindBuffer(34963,m.buffer.buffer);x=ra.offset;for(A=0;A<l;++A)m?ea.drawElements(0,1E4,m.type,x<<(m.type-5121>>1)):ea.drawArrays(0,x,1E4);M.setVAO(null);h&&(J.cpuTime+=performance.now()-u)}}},"$34,atlas,normal,position,projection,uv,view":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea,T){var S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,ia,Gb,ha,
I,sa,Ha,pa,ya,Ga,ja,Y,ta,Ka,Fa;S=a.attributes;A=a.buffer;l=a.context;M=a.current;N=a.draw;wa=a.elements;na=a.framebuffer;n=a.gl;H=a.isArrayLike;ba=a.isBufferArgs;O=a.next;la=a.shader;qa=a.uniforms;Da=a.vao;Ca=O.blend_color;fa=M.blend_color;Ea=O.blend_equation;ka=M.blend_equation;oa=O.blend_func;Aa=M.blend_func;Ba=O.colorMask;ma=M.colorMask;Xb=O.depth_range;Ta=M.depth_range;v=O.polygonOffset_offset;t=M.polygonOffset_offset;K=O.sample_coverage;ua=M.sample_coverage;va=O.scissor_box;ia=M.scissor_box;
Gb=O.stencil_func;ha=M.stencil_func;I=O.stencil_opBack;sa=M.stencil_opBack;Ha=O.stencil_opFront;pa=M.stencil_opFront;ya=O.viewport;Ga=M.viewport;ja={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);ta=new Float32Array(16);Ka=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(b){var d,c,f,a,g,p,y,C,x,E,u,L,N,Q,P,R,qa,ga,aa,W,da,la,xa,Fa,Ka,za,Wd,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,
oc,pc,lc,dc,$a,Hc,yb,cb,Mb,ab,nb;d=l.view;c=h.call(this,l,b,0);l.view=c;f=na.next;f!==na.cur&&(f?n.bindFramebuffer(36160,f.framebuffer):n.bindFramebuffer(36160,null),na.cur=f);if(M.dirty){var Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb;Va=O.dither;Va!==M.dither&&(Va?n.enable(3024):n.disable(3024),M.dither=Va);Lc=O.blend_enable;Lc!==M.blend_enable&&(Lc?n.enable(3042):n.disable(3042),M.blend_enable=
Lc);Hb=Ca[0];Ib=Ca[1];qc=Ca[2];Nb=Ca[3];if(Hb!==fa[0]||Ib!==fa[1]||qc!==fa[2]||Nb!==fa[3])n.blendColor(Hb,Ib,qc,Nb),fa[0]=Hb,fa[1]=Ib,fa[2]=qc,fa[3]=Nb;jb=Ea[0];Fb=Ea[1];if(jb!==ka[0]||Fb!==ka[1])n.blendEquationSeparate(jb,Fb),ka[0]=jb,ka[1]=Fb;Cb=oa[0];wb=oa[1];hb=oa[2];Yb=oa[3];if(Cb!==Aa[0]||wb!==Aa[1]||hb!==Aa[2]||Yb!==Aa[3])n.blendFuncSeparate(Cb,wb,hb,Yb),Aa[0]=Cb,Aa[1]=wb,Aa[2]=hb,Aa[3]=Yb;Ob=O.depth_enable;Ob!==M.depth_enable&&(Ob?n.enable(2929):n.disable(2929),M.depth_enable=Ob);qb=O.depth_func;
qb!==M.depth_func&&(n.depthFunc(qb),M.depth_func=qb);Ua=Xb[0];Tb=Xb[1];if(Ua!==Ta[0]||Tb!==Ta[1])n.depthRange(Ua,Tb),Ta[0]=Ua,Ta[1]=Tb;ob=O.depth_mask;ob!==M.depth_mask&&(n.depthMask(ob),M.depth_mask=ob);hc=Ba[0];ib=Ba[1];pb=Ba[2];Ja=Ba[3];if(hc!==ma[0]||ib!==ma[1]||pb!==ma[2]||Ja!==ma[3])n.colorMask(hc,ib,pb,Ja),ma[0]=hc,ma[1]=ib,ma[2]=pb,ma[3]=Ja;rb=O.frontFace;rb!==M.frontFace&&(n.frontFace(rb),M.frontFace=rb);La=O.lineWidth;La!==M.lineWidth&&(n.lineWidth(La),M.lineWidth=La);eb=O.polygonOffset_enable;
eb!==M.polygonOffset_enable&&(eb?n.enable(32823):n.disable(32823),M.polygonOffset_enable=eb);fb=v[0];Ma=v[1];if(fb!==t[0]||Ma!==t[1])n.polygonOffset(fb,Ma),t[0]=fb,t[1]=Ma;kb=O.sample_alpha;kb!==M.sample_alpha&&(kb?n.enable(32926):n.disable(32926),M.sample_alpha=kb);Wa=O.sample_enable;Wa!==M.sample_enable&&(Wa?n.enable(32928):n.disable(32928),M.sample_enable=Wa);tb=K[0];sb=K[1];if(tb!==ua[0]||sb!==ua[1])n.sampleCoverage(tb,sb),ua[0]=tb,ua[1]=sb;Pa=O.stencil_enable;Pa!==M.stencil_enable&&(Pa?n.enable(2960):
n.disable(2960),M.stencil_enable=Pa);Ac=O.stencil_mask;Ac!==M.stencil_mask&&(n.stencilMask(Ac),M.stencil_mask=Ac);Ra=Gb[0];Jb=Gb[1];Db=Gb[2];if(Ra!==ha[0]||Jb!==ha[1]||Db!==ha[2])n.stencilFunc(Ra,Jb,Db),ha[0]=Ra,ha[1]=Jb,ha[2]=Db;Na=Ha[0];Qd=Ha[1];Ya=Ha[2];Kb=Ha[3];if(Na!==pa[0]||Qd!==pa[1]||Ya!==pa[2]||Kb!==pa[3])n.stencilOpSeparate(Na,Qd,Ya,Kb),pa[0]=Na,pa[1]=Qd,pa[2]=Ya,pa[3]=Kb;Lb=I[0];lb=I[1];Oa=I[2];Zb=I[3];if(Lb!==sa[0]||lb!==sa[1]||Oa!==sa[2]||Zb!==sa[3])n.stencilOpSeparate(Lb,lb,Oa,Zb),sa[0]=
Lb,sa[1]=lb,sa[2]=Oa,sa[3]=Zb;Qa=O.scissor_enable;Qa!==M.scissor_enable&&(Qa?n.enable(3089):n.disable(3089),M.scissor_enable=Qa);ub=va[0];vb=va[1];Sa=va[2];mb=va[3];if(ub!==ia[0]||vb!==ia[1]||Sa!==ia[2]||mb!==ia[3])n.scissor(ub,vb,Sa,mb),ia[0]=ub,ia[1]=vb,ia[2]=Sa,ia[3]=mb;ec=ya[0];Dc=ya[1];uc=ya[2];bb=ya[3];if(ec!==Ga[0]||Dc!==Ga[1]||uc!==Ga[2]||bb!==Ga[3])n.viewport(ec,Dc,uc,bb),Ga[0]=ec,Ga[1]=Dc,Ga[2]=uc,Ga[3]=bb}n.enable(2884);M.cull_enable=!0;n.cullFace(1029);M.cull_face=1029;if(a=M.profile)g=
performance.now(),J.count++;n.useProgram(k.program);Da.setVAO(null);(p=b.position)&&("object"===typeof p||"function"===typeof p)&&(ba(p)||A.getBuffer(p)||A.getBuffer(p.buffer)||ba(p.buffer)||"constant"in p&&("number"===typeof p.constant||H(p.constant)))||Z.commandRaise(q,G);y=!1;C=null;x=!1;u=E=0;L=1;N=0;Q=5126;ga=qa=R=P=0;ba(p)?(y=!0,C=A.createStream(34962,p),Q=C.dtype):(C=A.getBuffer(p))?Q=C.dtype:"constant"in p?(L=2,"number"===typeof p.constant?(R=p.constant,qa=ga=P=0):(R=0<p.constant.length?p.constant[0]:
0,qa=1<p.constant.length?p.constant[1]:0,ga=2<p.constant.length?p.constant[2]:0,P=3<p.constant.length?p.constant[3]:0)):(C=ba(p.buffer)?A.createStream(34962,p.buffer):A.getBuffer(p.buffer),Q="type"in p?ja[p.type]:C.dtype,x=!!p.normalized,u=p.size|0,E=p.offset|0,N=p.stride|0);aa=V.location;W=S[aa];if(1===L){if(W.buffer||n.enableVertexAttribArray(aa),da=u||3,W.type!==Q||W.size!==da||W.buffer!==C||W.normalized!==x||W.offset!==E||W.stride!==N)n.bindBuffer(34962,C.buffer),n.vertexAttribPointer(aa,da,Q,
x,N,E),W.type=Q,W.size=da,W.buffer=C,W.normalized=x,W.offset=E,W.stride=N}else if(W.buffer&&(n.disableVertexAttribArray(aa),W.buffer=null),W.x!==R||W.y!==qa||W.z!==ga||W.w!==P)n.vertexAttrib4f(aa,R,qa,ga,P),W.x=R,W.y=qa,W.z=ga,W.w=P;(la=b.normal)&&("object"===typeof la||"function"===typeof la)&&(ba(la)||A.getBuffer(la)||A.getBuffer(la.buffer)||ba(la.buffer)||"constant"in la&&("number"===typeof la.constant||H(la.constant)))||Z.commandRaise(e,G);xa=!1;Fa=null;Ka=!1;Wd=za=0;$d=1;nd=0;$c=5126;Ec=pd=Kc=
sd=0;ba(la)?(xa=!0,Fa=A.createStream(34962,la),$c=Fa.dtype):(Fa=A.getBuffer(la))?$c=Fa.dtype:"constant"in la?($d=2,"number"===typeof la.constant?(Kc=la.constant,pd=Ec=sd=0):(Kc=0<la.constant.length?la.constant[0]:0,pd=1<la.constant.length?la.constant[1]:0,Ec=2<la.constant.length?la.constant[2]:0,sd=3<la.constant.length?la.constant[3]:0)):(Fa=ba(la.buffer)?A.createStream(34962,la.buffer):A.getBuffer(la.buffer),$c="type"in la?ja[la.type]:Fa.dtype,Ka=!!la.normalized,Wd=la.size|0,za=la.offset|0,nd=la.stride|
0);fd=ra.location;Pc=S[fd];if(1===$d){if(Pc.buffer||n.enableVertexAttribArray(fd),md=Wd||3,Pc.type!==$c||Pc.size!==md||Pc.buffer!==Fa||Pc.normalized!==Ka||Pc.offset!==za||Pc.stride!==nd)n.bindBuffer(34962,Fa.buffer),n.vertexAttribPointer(fd,md,$c,Ka,nd,za),Pc.type=$c,Pc.size=md,Pc.buffer=Fa,Pc.normalized=Ka,Pc.offset=za,Pc.stride=nd}else if(Pc.buffer&&(n.disableVertexAttribArray(fd),Pc.buffer=null),Pc.x!==Kc||Pc.y!==pd||Pc.z!==Ec||Pc.w!==sd)n.vertexAttrib4f(fd,Kc,pd,Ec,sd),Pc.x=Kc,Pc.y=pd,Pc.z=Ec,
Pc.w=sd;(Ab=b.uv)&&("object"===typeof Ab||"function"===typeof Ab)&&(ba(Ab)||A.getBuffer(Ab)||A.getBuffer(Ab.buffer)||ba(Ab.buffer)||"constant"in Ab&&("number"===typeof Ab.constant||H(Ab.constant)))||Z.commandRaise(B,G);Eb=!1;tc=null;xb=!1;Bb=wc=0;Ic=1;kc=0;Fc=5126;cc=Bc=Vc=gd=0;ba(Ab)?(Eb=!0,tc=A.createStream(34962,Ab),Fc=tc.dtype):(tc=A.getBuffer(Ab))?Fc=tc.dtype:"constant"in Ab?(Ic=2,"number"===typeof Ab.constant?(Vc=Ab.constant,Bc=cc=gd=0):(Vc=0<Ab.constant.length?Ab.constant[0]:0,Bc=1<Ab.constant.length?
Ab.constant[1]:0,cc=2<Ab.constant.length?Ab.constant[2]:0,gd=3<Ab.constant.length?Ab.constant[3]:0)):(tc=ba(Ab.buffer)?A.createStream(34962,Ab.buffer):A.getBuffer(Ab.buffer),Fc="type"in Ab?ja[Ab.type]:tc.dtype,xb=!!Ab.normalized,Bb=Ab.size|0,wc=Ab.offset|0,kc=Ab.stride|0);Gc=ea.location;oc=S[Gc];if(1===Ic){if(oc.buffer||n.enableVertexAttribArray(Gc),pc=Bb||2,oc.type!==Fc||oc.size!==pc||oc.buffer!==tc||oc.normalized!==xb||oc.offset!==wc||oc.stride!==kc)n.bindBuffer(34962,tc.buffer),n.vertexAttribPointer(Gc,
pc,Fc,xb,kc,wc),oc.type=Fc,oc.size=pc,oc.buffer=tc,oc.normalized=xb,oc.offset=wc,oc.stride=kc}else if(oc.buffer&&(n.disableVertexAttribArray(Gc),oc.buffer=null),oc.x!==Vc||oc.y!==Bc||oc.z!==cc||oc.w!==gd)n.vertexAttrib4f(Gc,Vc,Bc,cc,gd),oc.x=Vc,oc.y=Bc,oc.z=cc,oc.w=gd;lc=D.call(this,l,b,0);H(lc)&&16===lc.length||Z.commandRaise(F,G);n.uniformMatrix4fv(X.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(Y[0]=lc[0],Y[1]=lc[1],Y[2]=lc[2],Y[3]=lc[3],Y[4]=lc[4],Y[5]=lc[5],Y[6]=lc[6],Y[7]=lc[7],
Y[8]=lc[8],Y[9]=lc[9],Y[10]=lc[10],Y[11]=lc[11],Y[12]=lc[12],Y[13]=lc[13],Y[14]=lc[14],Y[15]=lc[15],Y));dc=l.view;H(dc)&&16===dc.length||Z.commandRaise(U,G);n.uniformMatrix4fv(T.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(ta[0]=dc[0],ta[1]=dc[1],ta[2]=dc[2],ta[3]=dc[3],ta[4]=dc[4],ta[5]=dc[5],ta[6]=dc[6],ta[7]=dc[7],ta[8]=dc[8],ta[9]=dc[9],ta[10]=dc[10],ta[11]=dc[11],ta[12]=dc[12],ta[13]=dc[13],ta[14]=dc[14],ta[15]=dc[15],ta));($a=b.atlas)&&"framebuffer"===$a._reglType&&($a=$a.color[0]);
"function"===typeof $a&&"texture2d"===$a._reglType||Z.commandRaise(w,G);Hc=$a._texture;n.uniform1i(z.location,Hc.bind());yb=b.elements;cb=null;(Mb=ba(yb))?cb=wa.createStream(yb):(cb=wa.getElements(yb),yb&&!cb&&Z.commandRaise(m,G));cb&&n.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;nb=cb?cb.vertCount:-1;0<=nb||Z.commandRaise(r,G);nb&&(cb?n.drawElements(ab,nb,cb.type,0<<(cb.type-5121>>1)):n.drawArrays(ab,0,nb),M.dirty=!0,Da.setVAO(null),l.view=d,a&&(J.cpuTime+=performance.now()-g),y&&A.destroyStream(C),
xa&&A.destroyStream(Fa),Eb&&A.destroyStream(tc),Hc.unbind(),Mb&&wa.destroyStream(cb))},scope:function(b,d,e){var k,a,g,h,n,t,p,v,q,I,K,y,z,ma,m,C,E,w,fa,ha,Xb,Ba,B,D,r,sa,Q,Ha,ua,S,pa,T,Y,F,U,Ca,W,aa,ka,X,Ta,ea,ya,oa,Aa,Ea,xa,va,ra,Ga,na,Da,Gb,V,ia,ta,Fa,Ka,id,ed,Va,za,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,Ya,Kb,Lb,lb;k=l.view;a=da.call(this,l,b,e);l.view=a;g=O.cull_enable;O.cull_enable=!0;h=O.cull_face;O.cull_face=1029;if(n=M.profile)t=
performance.now(),J.count++;p=b.elements;v=null;(q=ba(p))?v=wa.createStream(p):(v=wa.getElements(p),p&&!v&&Z.commandRaise(u,G));I=N.elements;N.elements=v;K=N.offset;N.offset=0;y=v?v.vertCount:-1;z=N.count;N.count=y;ma=v?v.primType:4;m=N.primitive;N.primitive=ma;C=b.atlas;E=qa[5];qa[5]=C;w=P.call(this,l,b,e);fa=qa[3];qa[3]=w;ha=l.view;Xb=qa[4];qa[4]=ha;(Ba=b.normal)&&("object"===typeof Ba||"function"===typeof Ba)&&(ba(Ba)||A.getBuffer(Ba)||A.getBuffer(Ba.buffer)||ba(Ba.buffer)||"constant"in Ba&&("number"===
typeof Ba.constant||H(Ba.constant)))||Z.commandRaise(x,G);B=!1;D=null;r=0;sa=!1;Ha=Q=0;ua=1;S=0;pa=5126;U=F=Y=T=0;ba(Ba)?(B=!0,D=A.createStream(34962,Ba),pa=D.dtype):(D=A.getBuffer(Ba))?pa=D.dtype:"constant"in Ba?(ua=2,"number"===typeof Ba.constant?(Y=Ba.constant,F=U=T=0):(Y=0<Ba.constant.length?Ba.constant[0]:0,F=1<Ba.constant.length?Ba.constant[1]:0,U=2<Ba.constant.length?Ba.constant[2]:0,T=3<Ba.constant.length?Ba.constant[3]:0)):(D=ba(Ba.buffer)?A.createStream(34962,Ba.buffer):A.getBuffer(Ba.buffer),
pa="type"in Ba?ja[Ba.type]:D.dtype,sa=!!Ba.normalized,Ha=Ba.size|0,Q=Ba.offset|0,S=Ba.stride|0,r=Ba.divisor|0);Ca=R.buffer;R.buffer=D;W=R.divisor;R.divisor=r;aa=R.normalized;R.normalized=sa;ka=R.offset;R.offset=Q;X=R.size;R.size=Ha;Ta=R.state;R.state=ua;ea=R.stride;R.stride=S;ya=R.type;R.type=pa;oa=R.w;R.w=T;Aa=R.x;R.x=Y;Ea=R.y;R.y=F;xa=R.z;R.z=U;(va=b.position)&&("object"===typeof va||"function"===typeof va)&&(ba(va)||A.getBuffer(va)||A.getBuffer(va.buffer)||ba(va.buffer)||"constant"in va&&("number"===
typeof va.constant||H(va.constant)))||Z.commandRaise(ga,G);ra=!1;Ga=null;na=0;Da=!1;V=Gb=0;ia=1;ta=0;Fa=5126;Va=ed=id=Ka=0;ba(va)?(ra=!0,Ga=A.createStream(34962,va),Fa=Ga.dtype):(Ga=A.getBuffer(va))?Fa=Ga.dtype:"constant"in va?(ia=2,"number"===typeof va.constant?(id=va.constant,ed=Va=Ka=0):(id=0<va.constant.length?va.constant[0]:0,ed=1<va.constant.length?va.constant[1]:0,Va=2<va.constant.length?va.constant[2]:0,Ka=3<va.constant.length?va.constant[3]:0)):(Ga=ba(va.buffer)?A.createStream(34962,va.buffer):
A.getBuffer(va.buffer),Fa="type"in va?ja[va.type]:Ga.dtype,Da=!!va.normalized,V=va.size|0,Gb=va.offset|0,ta=va.stride|0,na=va.divisor|0);za=c.buffer;c.buffer=Ga;Hb=c.divisor;c.divisor=na;Ib=c.normalized;c.normalized=Da;qc=c.offset;c.offset=Gb;Nb=c.size;c.size=V;jb=c.state;c.state=ia;Fb=c.stride;c.stride=ta;Cb=c.type;c.type=Fa;wb=c.w;c.w=Ka;hb=c.x;c.x=id;Yb=c.y;c.y=ed;Ob=c.z;c.z=Va;(qb=b.uv)&&("object"===typeof qb||"function"===typeof qb)&&(ba(qb)||A.getBuffer(qb)||A.getBuffer(qb.buffer)||ba(qb.buffer)||
"constant"in qb&&("number"===typeof qb.constant||H(qb.constant)))||Z.commandRaise(f,G);Ua=!1;Tb=null;ob=0;hc=!1;pb=ib=0;Ja=1;rb=0;La=5126;kb=Ma=fb=eb=0;ba(qb)?(Ua=!0,Tb=A.createStream(34962,qb),La=Tb.dtype):(Tb=A.getBuffer(qb))?La=Tb.dtype:"constant"in qb?(Ja=2,"number"===typeof qb.constant?(fb=qb.constant,Ma=kb=eb=0):(fb=0<qb.constant.length?qb.constant[0]:0,Ma=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,eb=3<qb.constant.length?qb.constant[3]:0)):(Tb=ba(qb.buffer)?
A.createStream(34962,qb.buffer):A.getBuffer(qb.buffer),La="type"in qb?ja[qb.type]:Tb.dtype,hc=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,ob=qb.divisor|0);Wa=L.buffer;L.buffer=Tb;tb=L.divisor;L.divisor=ob;sb=L.normalized;L.normalized=hc;Pa=L.offset;L.offset=ib;Ac=L.size;L.size=pb;Ra=L.state;L.state=Ja;Jb=L.stride;L.stride=rb;Db=L.type;L.type=La;Na=L.w;L.w=eb;Qd=L.x;L.x=fb;Ya=L.y;L.y=Ma;Kb=L.z;L.z=kb;Lb=la.vert;la.vert=2;lb=la.frag;la.frag=1;M.dirty=!0;d(l,b,e);l.view=k;O.cull_enable=
g;O.cull_face=h;n&&(J.cpuTime+=performance.now()-t);q&&wa.destroyStream(v);N.elements=I;N.offset=K;N.count=z;N.primitive=m;qa[5]=E;qa[3]=fa;qa[4]=Xb;B&&A.destroyStream(D);R.buffer=Ca;R.divisor=W;R.normalized=aa;R.offset=ka;R.size=X;R.state=Ta;R.stride=ea;R.type=ya;R.w=oa;R.x=Aa;R.y=Ea;R.z=xa;ra&&A.destroyStream(Ga);c.buffer=za;c.divisor=Hb;c.normalized=Ib;c.offset=qc;c.size=Nb;c.state=jb;c.stride=Fb;c.type=Cb;c.w=wb;c.x=hb;c.y=Yb;c.z=Ob;Ua&&A.destroyStream(Tb);L.buffer=Wa;L.divisor=tb;L.normalized=
sb;L.offset=Pa;L.size=Ac;L.state=Ra;L.stride=Jb;L.type=Db;L.w=Na;L.x=Qd;L.y=Ya;L.z=Kb;la.vert=Lb;la.frag=lb;M.dirty=!0},batch:function(c,e){var f,k,a,h,q,m,x;f=l.view;k=p.call(this,l,c,0);l.view=k;a=na.next;a!==na.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),na.cur=a);if(M.dirty){var u,w,B,D,L,r,N,P,R,Y,F,U,qa,ga,da,la,ta,za,Wd,$d,nd,$c,sd,Kc,pd,Ec,fd,Pc,md,Ab,Eb,tc,xb,wc,Bb,Ic,kc,Fc,gd,Vc,Bc,cc,Gc,oc,pc,lc,dc,$a,Hc,yb,cb,Mb;u=O.dither;u!==M.dither&&(u?n.enable(3024):
n.disable(3024),M.dither=u);w=O.blend_enable;w!==M.blend_enable&&(w?n.enable(3042):n.disable(3042),M.blend_enable=w);B=Ca[0];D=Ca[1];L=Ca[2];r=Ca[3];if(B!==fa[0]||D!==fa[1]||L!==fa[2]||r!==fa[3])n.blendColor(B,D,L,r),fa[0]=B,fa[1]=D,fa[2]=L,fa[3]=r;N=Ea[0];P=Ea[1];if(N!==ka[0]||P!==ka[1])n.blendEquationSeparate(N,P),ka[0]=N,ka[1]=P;R=oa[0];Y=oa[1];F=oa[2];U=oa[3];if(R!==Aa[0]||Y!==Aa[1]||F!==Aa[2]||U!==Aa[3])n.blendFuncSeparate(R,Y,F,U),Aa[0]=R,Aa[1]=Y,Aa[2]=F,Aa[3]=U;qa=O.depth_enable;qa!==M.depth_enable&&
(qa?n.enable(2929):n.disable(2929),M.depth_enable=qa);ga=O.depth_func;ga!==M.depth_func&&(n.depthFunc(ga),M.depth_func=ga);da=Xb[0];la=Xb[1];if(da!==Ta[0]||la!==Ta[1])n.depthRange(da,la),Ta[0]=da,Ta[1]=la;ta=O.depth_mask;ta!==M.depth_mask&&(n.depthMask(ta),M.depth_mask=ta);za=Ba[0];Wd=Ba[1];$d=Ba[2];nd=Ba[3];if(za!==ma[0]||Wd!==ma[1]||$d!==ma[2]||nd!==ma[3])n.colorMask(za,Wd,$d,nd),ma[0]=za,ma[1]=Wd,ma[2]=$d,ma[3]=nd;$c=O.frontFace;$c!==M.frontFace&&(n.frontFace($c),M.frontFace=$c);sd=O.lineWidth;
sd!==M.lineWidth&&(n.lineWidth(sd),M.lineWidth=sd);Kc=O.polygonOffset_enable;Kc!==M.polygonOffset_enable&&(Kc?n.enable(32823):n.disable(32823),M.polygonOffset_enable=Kc);pd=v[0];Ec=v[1];if(pd!==t[0]||Ec!==t[1])n.polygonOffset(pd,Ec),t[0]=pd,t[1]=Ec;fd=O.sample_alpha;fd!==M.sample_alpha&&(fd?n.enable(32926):n.disable(32926),M.sample_alpha=fd);Pc=O.sample_enable;Pc!==M.sample_enable&&(Pc?n.enable(32928):n.disable(32928),M.sample_enable=Pc);md=K[0];Ab=K[1];if(md!==ua[0]||Ab!==ua[1])n.sampleCoverage(md,
Ab),ua[0]=md,ua[1]=Ab;Eb=O.stencil_enable;Eb!==M.stencil_enable&&(Eb?n.enable(2960):n.disable(2960),M.stencil_enable=Eb);tc=O.stencil_mask;tc!==M.stencil_mask&&(n.stencilMask(tc),M.stencil_mask=tc);xb=Gb[0];wc=Gb[1];Bb=Gb[2];if(xb!==ha[0]||wc!==ha[1]||Bb!==ha[2])n.stencilFunc(xb,wc,Bb),ha[0]=xb,ha[1]=wc,ha[2]=Bb;Ic=Ha[0];kc=Ha[1];Fc=Ha[2];gd=Ha[3];if(Ic!==pa[0]||kc!==pa[1]||Fc!==pa[2]||gd!==pa[3])n.stencilOpSeparate(Ic,kc,Fc,gd),pa[0]=Ic,pa[1]=kc,pa[2]=Fc,pa[3]=gd;Vc=I[0];Bc=I[1];cc=I[2];Gc=I[3];
if(Vc!==sa[0]||Bc!==sa[1]||cc!==sa[2]||Gc!==sa[3])n.stencilOpSeparate(Vc,Bc,cc,Gc),sa[0]=Vc,sa[1]=Bc,sa[2]=cc,sa[3]=Gc;oc=O.scissor_enable;oc!==M.scissor_enable&&(oc?n.enable(3089):n.disable(3089),M.scissor_enable=oc);pc=va[0];lc=va[1];dc=va[2];$a=va[3];if(pc!==ia[0]||lc!==ia[1]||dc!==ia[2]||$a!==ia[3])n.scissor(pc,lc,dc,$a),ia[0]=pc,ia[1]=lc,ia[2]=dc,ia[3]=$a;Hc=ya[0];yb=ya[1];cb=ya[2];Mb=ya[3];if(Hc!==Ga[0]||yb!==Ga[1]||cb!==Ga[2]||Mb!==Ga[3])n.viewport(Hc,yb,cb,Mb),Ga[0]=Hc,Ga[1]=yb,Ga[2]=cb,Ga[3]=
Mb}n.enable(2884);M.cull_enable=!0;n.cullFace(1029);M.cull_face=1029;if(h=M.profile)q=performance.now(),J.count+=e;n.useProgram(aa.program);var ab,nb;Da.setVAO(null);ab=C.call(this,l,x,m);H(ab)&&16===ab.length||Z.commandRaise(E,G);n.uniformMatrix4fv(X.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ka[0]=ab[0],Ka[1]=ab[1],Ka[2]=ab[2],Ka[3]=ab[3],Ka[4]=ab[4],Ka[5]=ab[5],Ka[6]=ab[6],Ka[7]=ab[7],Ka[8]=ab[8],Ka[9]=ab[9],Ka[10]=ab[10],Ka[11]=ab[11],Ka[12]=ab[12],Ka[13]=ab[13],Ka[14]=ab[14],
Ka[15]=ab[15],Ka));nb=l.view;H(nb)&&16===nb.length||Z.commandRaise(d,G);n.uniformMatrix4fv(T.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(Fa[0]=nb[0],Fa[1]=nb[1],Fa[2]=nb[2],Fa[3]=nb[3],Fa[4]=nb[4],Fa[5]=nb[5],Fa[6]=nb[6],Fa[7]=nb[7],Fa[8]=nb[8],Fa[9]=nb[9],Fa[10]=nb[10],Fa[11]=nb[11],Fa[12]=nb[12],Fa[13]=nb[13],Fa[14]=nb[14],Fa[15]=nb[15],Fa));for(m=0;m<e;++m){x=c[m];var Va,Lc,Hb,Ib,qc,Nb,jb,Fb,Cb,wb,hb,Yb,Ob,qb,Ua,Tb,ob,hc,ib,pb,Ja,rb,La,eb,fb,Ma,kb,Wa,tb,sb,Pa,Ac,Ra,Jb,Db,Na,Qd,
Ya,Kb,Lb,lb,Oa,Zb,Qa,ub,vb,Sa,mb,ec,Dc,uc,bb,ic,ad,Xa;(Va=x.position)&&("object"===typeof Va||"function"===typeof Va)&&(ba(Va)||A.getBuffer(Va)||A.getBuffer(Va.buffer)||ba(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||H(Va.constant)))||Z.commandRaise(y,G);Lc=!1;Hb=null;Ib=!1;Nb=qc=0;jb=1;Fb=0;Cb=5126;Ob=Yb=hb=wb=0;ba(Va)?(Lc=!0,Hb=A.createStream(34962,Va),Cb=Hb.dtype):(Hb=A.getBuffer(Va))?Cb=Hb.dtype:"constant"in Va?(jb=2,"number"===typeof Va.constant?(hb=Va.constant,Yb=Ob=wb=0):(hb=
0<Va.constant.length?Va.constant[0]:0,Yb=1<Va.constant.length?Va.constant[1]:0,Ob=2<Va.constant.length?Va.constant[2]:0,wb=3<Va.constant.length?Va.constant[3]:0)):(Hb=ba(Va.buffer)?A.createStream(34962,Va.buffer):A.getBuffer(Va.buffer),Cb="type"in Va?ja[Va.type]:Hb.dtype,Ib=!!Va.normalized,Nb=Va.size|0,qc=Va.offset|0,Fb=Va.stride|0);qb=V.location;Ua=S[qb];if(1===jb){if(Ua.buffer||n.enableVertexAttribArray(qb),Tb=Nb||3,Ua.type!==Cb||Ua.size!==Tb||Ua.buffer!==Hb||Ua.normalized!==Ib||Ua.offset!==qc||
Ua.stride!==Fb)n.bindBuffer(34962,Hb.buffer),n.vertexAttribPointer(qb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=Tb,Ua.buffer=Hb,Ua.normalized=Ib,Ua.offset=qc,Ua.stride=Fb}else if(Ua.buffer&&(n.disableVertexAttribArray(qb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Yb||Ua.z!==Ob||Ua.w!==wb)n.vertexAttrib4f(qb,hb,Yb,Ob,wb),Ua.x=hb,Ua.y=Yb,Ua.z=Ob,Ua.w=wb;(ob=x.normal)&&("object"===typeof ob||"function"===typeof ob)&&(ba(ob)||A.getBuffer(ob)||A.getBuffer(ob.buffer)||ba(ob.buffer)||"constant"in ob&&("number"===typeof ob.constant||
H(ob.constant)))||Z.commandRaise(g,G);hc=!1;ib=null;pb=!1;rb=Ja=0;La=1;eb=0;fb=5126;tb=Wa=kb=Ma=0;ba(ob)?(hc=!0,ib=A.createStream(34962,ob),fb=ib.dtype):(ib=A.getBuffer(ob))?fb=ib.dtype:"constant"in ob?(La=2,"number"===typeof ob.constant?(kb=ob.constant,Wa=tb=Ma=0):(kb=0<ob.constant.length?ob.constant[0]:0,Wa=1<ob.constant.length?ob.constant[1]:0,tb=2<ob.constant.length?ob.constant[2]:0,Ma=3<ob.constant.length?ob.constant[3]:0)):(ib=ba(ob.buffer)?A.createStream(34962,ob.buffer):A.getBuffer(ob.buffer),
fb="type"in ob?ja[ob.type]:ib.dtype,pb=!!ob.normalized,rb=ob.size|0,Ja=ob.offset|0,eb=ob.stride|0);sb=ra.location;Pa=S[sb];if(1===La){if(Pa.buffer||n.enableVertexAttribArray(sb),Ac=rb||3,Pa.type!==fb||Pa.size!==Ac||Pa.buffer!==ib||Pa.normalized!==pb||Pa.offset!==Ja||Pa.stride!==eb)n.bindBuffer(34962,ib.buffer),n.vertexAttribPointer(sb,Ac,fb,pb,eb,Ja),Pa.type=fb,Pa.size=Ac,Pa.buffer=ib,Pa.normalized=pb,Pa.offset=Ja,Pa.stride=eb}else if(Pa.buffer&&(n.disableVertexAttribArray(sb),Pa.buffer=null),Pa.x!==
kb||Pa.y!==Wa||Pa.z!==tb||Pa.w!==Ma)n.vertexAttrib4f(sb,kb,Wa,tb,Ma),Pa.x=kb,Pa.y=Wa,Pa.z=tb,Pa.w=Ma;(Ra=x.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(ba(Ra)||A.getBuffer(Ra)||A.getBuffer(Ra.buffer)||ba(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||H(Ra.constant)))||Z.commandRaise(W,G);Jb=!1;Db=null;Na=!1;Ya=Qd=0;Kb=1;Lb=0;lb=5126;ub=Qa=Zb=Oa=0;ba(Ra)?(Jb=!0,Db=A.createStream(34962,Ra),lb=Db.dtype):(Db=A.getBuffer(Ra))?lb=Db.dtype:"constant"in Ra?(Kb=2,"number"===typeof Ra.constant?
(Zb=Ra.constant,Qa=ub=Oa=0):(Zb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,ub=2<Ra.constant.length?Ra.constant[2]:0,Oa=3<Ra.constant.length?Ra.constant[3]:0)):(Db=ba(Ra.buffer)?A.createStream(34962,Ra.buffer):A.getBuffer(Ra.buffer),lb="type"in Ra?ja[Ra.type]:Db.dtype,Na=!!Ra.normalized,Ya=Ra.size|0,Qd=Ra.offset|0,Lb=Ra.stride|0);vb=ea.location;Sa=S[vb];if(1===Kb){if(Sa.buffer||n.enableVertexAttribArray(vb),mb=Ya||2,Sa.type!==lb||Sa.size!==mb||Sa.buffer!==Db||Sa.normalized!==
Na||Sa.offset!==Qd||Sa.stride!==Lb)n.bindBuffer(34962,Db.buffer),n.vertexAttribPointer(vb,mb,lb,Na,Lb,Qd),Sa.type=lb,Sa.size=mb,Sa.buffer=Db,Sa.normalized=Na,Sa.offset=Qd,Sa.stride=Lb}else if(Sa.buffer&&(n.disableVertexAttribArray(vb),Sa.buffer=null),Sa.x!==Zb||Sa.y!==Qa||Sa.z!==ub||Sa.w!==Oa)n.vertexAttrib4f(vb,Zb,Qa,ub,Oa),Sa.x=Zb,Sa.y=Qa,Sa.z=ub,Sa.w=Oa;(ec=x.atlas)&&"framebuffer"===ec._reglType&&(ec=ec.color[0]);"function"===typeof ec&&"texture2d"===ec._reglType||Z.commandRaise(Q,G);Dc=ec._texture;
n.uniform1i(z.location,Dc.bind());uc=x.elements;bb=null;(ic=ba(uc))?bb=wa.createStream(uc):(bb=wa.getElements(uc),uc&&!bb&&Z.commandRaise(b,G));bb&&n.bindBuffer(34963,bb.buffer.buffer);ad=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||Z.commandRaise(xa,G);Xa&&(bb?n.drawElements(ad,Xa,bb.type,0<<(bb.type-5121>>1)):n.drawArrays(ad,0,Xa),Lc&&A.destroyStream(Hb),hc&&A.destroyStream(ib),Jb&&A.destroyStream(Db),Dc.unbind(),ic&&wa.destroyStream(bb))}M.dirty=!0;Da.setVAO(null);l.view=f;h&&(J.cpuTime+=performance.now()-
q)}}},"$7,color,position":function(a,Z,G,J,h,k,q,e,B,D){var F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea,T,S,A,l,M,N;F=a.attributes;U=a.context;w=a.current;m=a.draw;r=a.elements;da=a.framebuffer;u=a.gl;P=a.next;x=a.shader;R=a.uniforms;ga=a.vao;c=P.blend_color;f=w.blend_color;L=P.blend_equation;p=w.blend_equation;aa=P.blend_func;y=w.blend_func;g=P.colorMask;W=w.colorMask;C=P.depth_range;E=w.depth_range;d=P.polygonOffset_offset;Q=w.polygonOffset_offset;b=P.sample_coverage;xa=w.sample_coverage;
z=P.scissor_box;ra=w.scissor_box;V=P.stencil_func;X=w.stencil_func;ea=P.stencil_opBack;T=w.stencil_opBack;S=P.stencil_opFront;A=w.stencil_opFront;l=P.viewport;M=w.viewport;N=[1,0,0,1];return{draw:function(e){var a,n,q,x;e=da.next;e!==da.cur&&(e?u.bindFramebuffer(36160,e.framebuffer):u.bindFramebuffer(36160,null),da.cur=e);if(w.dirty){e=P.dither;e!==w.dither&&(e?u.enable(3024):u.disable(3024),w.dither=e);e=P.blend_enable;e!==w.blend_enable&&(e?u.enable(3042):u.disable(3042),w.blend_enable=e);e=c[0];
n=c[1];q=c[2];x=c[3];if(e!==f[0]||n!==f[1]||q!==f[2]||x!==f[3])u.blendColor(e,n,q,x),f[0]=e,f[1]=n,f[2]=q,f[3]=x;e=L[0];n=L[1];if(e!==p[0]||n!==p[1])u.blendEquationSeparate(e,n),p[0]=e,p[1]=n;e=aa[0];n=aa[1];q=aa[2];x=aa[3];if(e!==y[0]||n!==y[1]||q!==y[2]||x!==y[3])u.blendFuncSeparate(e,n,q,x),y[0]=e,y[1]=n,y[2]=q,y[3]=x;e=P.depth_enable;e!==w.depth_enable&&(e?u.enable(2929):u.disable(2929),w.depth_enable=e);e=P.depth_func;e!==w.depth_func&&(u.depthFunc(e),w.depth_func=e);e=C[0];n=C[1];if(e!==E[0]||
n!==E[1])u.depthRange(e,n),E[0]=e,E[1]=n;e=P.depth_mask;e!==w.depth_mask&&(u.depthMask(e),w.depth_mask=e);e=g[0];n=g[1];q=g[2];x=g[3];if(e!==W[0]||n!==W[1]||q!==W[2]||x!==W[3])u.colorMask(e,n,q,x),W[0]=e,W[1]=n,W[2]=q,W[3]=x;e=P.cull_enable;e!==w.cull_enable&&(e?u.enable(2884):u.disable(2884),w.cull_enable=e);e=P.cull_face;e!==w.cull_face&&(u.cullFace(e),w.cull_face=e);e=P.frontFace;e!==w.frontFace&&(u.frontFace(e),w.frontFace=e);e=P.lineWidth;e!==w.lineWidth&&(u.lineWidth(e),w.lineWidth=e);e=P.polygonOffset_enable;
e!==w.polygonOffset_enable&&(e?u.enable(32823):u.disable(32823),w.polygonOffset_enable=e);e=d[0];n=d[1];if(e!==Q[0]||n!==Q[1])u.polygonOffset(e,n),Q[0]=e,Q[1]=n;e=P.sample_alpha;e!==w.sample_alpha&&(e?u.enable(32926):u.disable(32926),w.sample_alpha=e);e=P.sample_enable;e!==w.sample_enable&&(e?u.enable(32928):u.disable(32928),w.sample_enable=e);e=b[0];n=b[1];if(e!==xa[0]||n!==xa[1])u.sampleCoverage(e,n),xa[0]=e,xa[1]=n;e=P.stencil_enable;e!==w.stencil_enable&&(e?u.enable(2960):u.disable(2960),w.stencil_enable=
e);e=P.stencil_mask;e!==w.stencil_mask&&(u.stencilMask(e),w.stencil_mask=e);e=V[0];n=V[1];q=V[2];if(e!==X[0]||n!==X[1]||q!==X[2])u.stencilFunc(e,n,q),X[0]=e,X[1]=n,X[2]=q;e=S[0];n=S[1];q=S[2];x=S[3];if(e!==A[0]||n!==A[1]||q!==A[2]||x!==A[3])u.stencilOpSeparate(e,n,q,x),A[0]=e,A[1]=n,A[2]=q,A[3]=x;e=ea[0];n=ea[1];q=ea[2];x=ea[3];if(e!==T[0]||n!==T[1]||q!==T[2]||x!==T[3])u.stencilOpSeparate(e,n,q,x),T[0]=e,T[1]=n,T[2]=q,T[3]=x;e=P.scissor_enable;e!==w.scissor_enable&&(e?u.enable(3089):u.disable(3089),
w.scissor_enable=e);e=z[0];n=z[1];q=z[2];x=z[3];if(e!==ra[0]||n!==ra[1]||q!==ra[2]||x!==ra[3])u.scissor(e,n,q,x),ra[0]=e,ra[1]=n,ra[2]=q,ra[3]=x;e=l[0];n=l[1];q=l[2];x=l[3];if(e!==M[0]||n!==M[1]||q!==M[2]||x!==M[3])u.viewport(e,n,q,x),M[0]=e,M[1]=n,M[2]=q,M[3]=x;w.dirty=!1}if(e=w.profile)a=performance.now(),J.count++;u.useProgram(h.program);ga.setVAO(null);n=D.location;q=F[n];q.buffer||u.enableVertexAttribArray(n);if(q.type!==k.dtype||2!==q.size||q.buffer!==k||!1!==q.normalized||0!==q.offset||0!==
q.stride)u.bindBuffer(34962,k.buffer),u.vertexAttribPointer(n,2,k.dtype,!1,0,0),q.type=k.dtype,q.size=2,q.buffer=k,q.normalized=!1,q.offset=0,q.stride=0;u.uniform4f(B.location,1,0,0,1);(n=m.elements)?u.bindBuffer(34963,n.buffer.buffer):ga.currentVAO&&(n=r.getElements(ga.currentVAO.elements))&&u.bindBuffer(34963,n.buffer.buffer);q=m.primitive;x=m.offset;n?u.drawElements(q,3,n.type,x<<(n.type-5121>>1)):u.drawArrays(q,x,3);ga.setVAO(null);e&&(J.cpuTime+=performance.now()-a)},scope:function(b,d,e){var c,
f,a,l,g,h,p,y,z,C,E,u,A,ma,Xb,B,v,t;if(c=w.profile)f=performance.now(),J.count++;a=m.count;m.count=3;l=R[3];R[3]=N;g=q.buffer;q.buffer=k;h=q.divisor;q.divisor=0;p=q.normalized;q.normalized=!1;y=q.offset;q.offset=0;z=q.size;q.size=0;C=q.state;q.state=1;E=q.stride;q.stride=0;u=q.type;q.type=k.dtype;A=q.w;q.w=0;ma=q.x;q.x=0;Xb=q.y;q.y=0;B=q.z;q.z=0;v=x.vert;x.vert=2;t=x.frag;x.frag=1;d(U,b,e);c&&(J.cpuTime+=performance.now()-f);m.count=a;R[3]=l;q.buffer=g;q.divisor=h;q.normalized=p;q.offset=y;q.size=
z;q.state=C;q.stride=E;q.type=u;q.w=A;q.x=ma;q.y=Xb;q.z=B;x.vert=v;x.frag=t},batch:function(a,h){var n,q,x;n=da.next;n!==da.cur&&(n?u.bindFramebuffer(36160,n.framebuffer):u.bindFramebuffer(36160,null),da.cur=n);if(w.dirty){var O,G;n=P.dither;n!==w.dither&&(n?u.enable(3024):u.disable(3024),w.dither=n);n=P.blend_enable;n!==w.blend_enable&&(n?u.enable(3042):u.disable(3042),w.blend_enable=n);n=c[0];x=c[1];O=c[2];G=c[3];if(n!==f[0]||x!==f[1]||O!==f[2]||G!==f[3])u.blendColor(n,x,O,G),f[0]=n,f[1]=x,f[2]=
O,f[3]=G;n=L[0];x=L[1];if(n!==p[0]||x!==p[1])u.blendEquationSeparate(n,x),p[0]=n,p[1]=x;n=aa[0];x=aa[1];O=aa[2];G=aa[3];if(n!==y[0]||x!==y[1]||O!==y[2]||G!==y[3])u.blendFuncSeparate(n,x,O,G),y[0]=n,y[1]=x,y[2]=O,y[3]=G;n=P.depth_enable;n!==w.depth_enable&&(n?u.enable(2929):u.disable(2929),w.depth_enable=n);n=P.depth_func;n!==w.depth_func&&(u.depthFunc(n),w.depth_func=n);n=C[0];x=C[1];if(n!==E[0]||x!==E[1])u.depthRange(n,x),E[0]=n,E[1]=x;n=P.depth_mask;n!==w.depth_mask&&(u.depthMask(n),w.depth_mask=
n);n=g[0];x=g[1];O=g[2];G=g[3];if(n!==W[0]||x!==W[1]||O!==W[2]||G!==W[3])u.colorMask(n,x,O,G),W[0]=n,W[1]=x,W[2]=O,W[3]=G;n=P.cull_enable;n!==w.cull_enable&&(n?u.enable(2884):u.disable(2884),w.cull_enable=n);n=P.cull_face;n!==w.cull_face&&(u.cullFace(n),w.cull_face=n);n=P.frontFace;n!==w.frontFace&&(u.frontFace(n),w.frontFace=n);n=P.lineWidth;n!==w.lineWidth&&(u.lineWidth(n),w.lineWidth=n);n=P.polygonOffset_enable;n!==w.polygonOffset_enable&&(n?u.enable(32823):u.disable(32823),w.polygonOffset_enable=
n);n=d[0];x=d[1];if(n!==Q[0]||x!==Q[1])u.polygonOffset(n,x),Q[0]=n,Q[1]=x;n=P.sample_alpha;n!==w.sample_alpha&&(n?u.enable(32926):u.disable(32926),w.sample_alpha=n);n=P.sample_enable;n!==w.sample_enable&&(n?u.enable(32928):u.disable(32928),w.sample_enable=n);n=b[0];x=b[1];if(n!==xa[0]||x!==xa[1])u.sampleCoverage(n,x),xa[0]=n,xa[1]=x;n=P.stencil_enable;n!==w.stencil_enable&&(n?u.enable(2960):u.disable(2960),w.stencil_enable=n);n=P.stencil_mask;n!==w.stencil_mask&&(u.stencilMask(n),w.stencil_mask=n);
n=V[0];x=V[1];O=V[2];if(n!==X[0]||x!==X[1]||O!==X[2])u.stencilFunc(n,x,O),X[0]=n,X[1]=x,X[2]=O;n=S[0];x=S[1];O=S[2];G=S[3];if(n!==A[0]||x!==A[1]||O!==A[2]||G!==A[3])u.stencilOpSeparate(n,x,O,G),A[0]=n,A[1]=x,A[2]=O,A[3]=G;n=ea[0];x=ea[1];O=ea[2];G=ea[3];if(n!==T[0]||x!==T[1]||O!==T[2]||G!==T[3])u.stencilOpSeparate(n,x,O,G),T[0]=n,T[1]=x,T[2]=O,T[3]=G;n=P.scissor_enable;n!==w.scissor_enable&&(n?u.enable(3089):u.disable(3089),w.scissor_enable=n);n=z[0];x=z[1];O=z[2];G=z[3];if(n!==ra[0]||x!==ra[1]||
O!==ra[2]||G!==ra[3])u.scissor(n,x,O,G),ra[0]=n,ra[1]=x,ra[2]=O,ra[3]=G;n=l[0];x=l[1];O=l[2];G=l[3];if(n!==M[0]||x!==M[1]||O!==M[2]||G!==M[3])u.viewport(n,x,O,G),M[0]=n,M[1]=x,M[2]=O,M[3]=G;w.dirty=!1}if(n=w.profile)q=performance.now(),J.count+=h;u.useProgram(e.program);var N;ga.setVAO(null);x=D.location;O=F[x];O.buffer||u.enableVertexAttribArray(x);if(O.type!==k.dtype||2!==O.size||O.buffer!==k||!1!==O.normalized||0!==O.offset||0!==O.stride)u.bindBuffer(34962,k.buffer),u.vertexAttribPointer(x,2,k.dtype,
!1,0,0),O.type=k.dtype,O.size=2,O.buffer=k,O.normalized=!1,O.offset=0,O.stride=0;u.uniform4f(B.location,1,0,0,1);(O=m.elements)?u.bindBuffer(34963,O.buffer.buffer):ga.currentVAO&&(O=r.getElements(ga.currentVAO.elements))&&u.bindBuffer(34963,O.buffer.buffer);G=m.primitive;N=m.offset;for(x=0;x<h;++x)O?u.drawElements(G,3,O.type,N<<(O.type-5121>>1)):u.drawArrays(G,N,3);ga.setVAO(null);n&&(J.cpuTime+=performance.now()-q)}}},"$19,angle,color,offset,position":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,
P,x,R,ga,c,f,L){var p,aa,y,g,W,C,E,d,Q,b,xa,z,ra,V,X,ea,T,S,A,l,M,N,ia,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa;p=a.attributes;aa=a.context;y=a.current;g=a.draw;W=a.elements;C=a.framebuffer;E=a.gl;d=a.isArrayLike;Q=a.next;b=a.shader;xa=a.uniforms;z=a.vao;ra=Q.blend_color;V=y.blend_color;X=Q.blend_equation;ea=y.blend_equation;T=Q.blend_func;S=y.blend_func;A=Q.colorMask;l=y.colorMask;M=Q.depth_range;N=y.depth_range;ia=Q.polygonOffset_offset;na=y.polygonOffset_offset;n=Q.sample_coverage;H=y.sample_coverage;
ba=Q.scissor_box;O=y.scissor_box;la=Q.stencil_func;qa=y.stencil_func;Da=Q.stencil_opBack;Ca=y.stencil_opBack;fa=Q.stencil_opFront;Ea=y.stencil_opFront;ka=Q.viewport;oa=y.viewport;return{draw:function(b){var a,x,m,u;a=C.next;a!==C.cur&&(a?E.bindFramebuffer(36160,a.framebuffer):E.bindFramebuffer(36160,null),C.cur=a);if(y.dirty){var v;a=Q.dither;a!==y.dither&&(a?E.enable(3024):E.disable(3024),y.dither=a);a=Q.blend_enable;a!==y.blend_enable&&(a?E.enable(3042):E.disable(3042),y.blend_enable=a);a=ra[0];
m=ra[1];u=ra[2];v=ra[3];if(a!==V[0]||m!==V[1]||u!==V[2]||v!==V[3])E.blendColor(a,m,u,v),V[0]=a,V[1]=m,V[2]=u,V[3]=v;a=X[0];m=X[1];if(a!==ea[0]||m!==ea[1])E.blendEquationSeparate(a,m),ea[0]=a,ea[1]=m;a=T[0];m=T[1];u=T[2];v=T[3];if(a!==S[0]||m!==S[1]||u!==S[2]||v!==S[3])E.blendFuncSeparate(a,m,u,v),S[0]=a,S[1]=m,S[2]=u,S[3]=v;a=Q.depth_func;a!==y.depth_func&&(E.depthFunc(a),y.depth_func=a);a=M[0];m=M[1];if(a!==N[0]||m!==N[1])E.depthRange(a,m),N[0]=a,N[1]=m;a=Q.depth_mask;a!==y.depth_mask&&(E.depthMask(a),
y.depth_mask=a);a=A[0];m=A[1];u=A[2];v=A[3];if(a!==l[0]||m!==l[1]||u!==l[2]||v!==l[3])E.colorMask(a,m,u,v),l[0]=a,l[1]=m,l[2]=u,l[3]=v;a=Q.cull_enable;a!==y.cull_enable&&(a?E.enable(2884):E.disable(2884),y.cull_enable=a);a=Q.cull_face;a!==y.cull_face&&(E.cullFace(a),y.cull_face=a);a=Q.frontFace;a!==y.frontFace&&(E.frontFace(a),y.frontFace=a);a=Q.lineWidth;a!==y.lineWidth&&(E.lineWidth(a),y.lineWidth=a);a=Q.polygonOffset_enable;a!==y.polygonOffset_enable&&(a?E.enable(32823):E.disable(32823),y.polygonOffset_enable=
a);a=ia[0];m=ia[1];if(a!==na[0]||m!==na[1])E.polygonOffset(a,m),na[0]=a,na[1]=m;a=Q.sample_alpha;a!==y.sample_alpha&&(a?E.enable(32926):E.disable(32926),y.sample_alpha=a);a=Q.sample_enable;a!==y.sample_enable&&(a?E.enable(32928):E.disable(32928),y.sample_enable=a);a=n[0];m=n[1];if(a!==H[0]||m!==H[1])E.sampleCoverage(a,m),H[0]=a,H[1]=m;a=Q.stencil_enable;a!==y.stencil_enable&&(a?E.enable(2960):E.disable(2960),y.stencil_enable=a);a=Q.stencil_mask;a!==y.stencil_mask&&(E.stencilMask(a),y.stencil_mask=
a);a=la[0];m=la[1];u=la[2];if(a!==qa[0]||m!==qa[1]||u!==qa[2])E.stencilFunc(a,m,u),qa[0]=a,qa[1]=m,qa[2]=u;a=fa[0];m=fa[1];u=fa[2];v=fa[3];if(a!==Ea[0]||m!==Ea[1]||u!==Ea[2]||v!==Ea[3])E.stencilOpSeparate(a,m,u,v),Ea[0]=a,Ea[1]=m,Ea[2]=u,Ea[3]=v;a=Da[0];m=Da[1];u=Da[2];v=Da[3];if(a!==Ca[0]||m!==Ca[1]||u!==Ca[2]||v!==Ca[3])E.stencilOpSeparate(a,m,u,v),Ca[0]=a,Ca[1]=m,Ca[2]=u,Ca[3]=v;a=Q.scissor_enable;a!==y.scissor_enable&&(a?E.enable(3089):E.disable(3089),y.scissor_enable=a);a=ba[0];m=ba[1];u=ba[2];
v=ba[3];if(a!==O[0]||m!==O[1]||u!==O[2]||v!==O[3])E.scissor(a,m,u,v),O[0]=a,O[1]=m,O[2]=u,O[3]=v;a=ka[0];m=ka[1];u=ka[2];v=ka[3];if(a!==oa[0]||m!==oa[1]||u!==oa[2]||v!==oa[3])E.viewport(a,m,u,v),oa[0]=a,oa[1]=m,oa[2]=u,oa[3]=v}E.disable(2929);y.depth_enable=!1;if(a=y.profile)x=performance.now(),J.count++;E.useProgram(h.program);z.setVAO(null);m=L.location;u=p[m];u.buffer||E.enableVertexAttribArray(m);if(u.type!==k.dtype||2!==u.size||u.buffer!==k||!1!==u.normalized||0!==u.offset||0!==u.stride)E.bindBuffer(34962,
k.buffer),E.vertexAttribPointer(m,2,k.dtype,!1,0,0),u.type=k.dtype,u.size=2,u.buffer=k,u.normalized=!1,u.offset=0,u.stride=0;m=q.call(this,aa,b,0);"number"!==typeof m&&Z.commandRaise(e,G);E.uniform1f(ga.location,m);m=b.offset;d(m)&&2===m.length||Z.commandRaise(B,G);E.uniform2f(f.location,m[0],m[1]);b=D.call(this,aa,b,0);d(b)&&4===b.length||Z.commandRaise(F,G);E.uniform4f(c.location,b[0],b[1],b[2],b[3]);(b=g.elements)?E.bindBuffer(34963,b.buffer.buffer):z.currentVAO&&(b=W.getElements(z.currentVAO.elements))&&
E.bindBuffer(34963,b.buffer.buffer);m=g.primitive;u=g.offset;b?E.drawElements(m,3,b.type,u<<(b.type-5121>>1)):E.drawArrays(m,u,3);y.dirty=!0;z.setVAO(null);a&&(J.cpuTime+=performance.now()-x)},scope:function(d,e,c){var f,a,l,h,n,q,p,x,z,u,I,C,E,O,A,G,H,fa,B,D,L;f=Q.depth_enable;Q.depth_enable=!1;if(a=y.profile)l=performance.now(),J.count++;h=g.count;g.count=3;n=U.call(this,aa,d,c);q=xa[3];xa[3]=n;p=w.call(this,aa,d,c);n=xa[5];xa[5]=p;x=d.offset;p=xa[4];xa[4]=x;x=m.buffer;m.buffer=k;z=m.divisor;m.divisor=
0;u=m.normalized;m.normalized=!1;I=m.offset;m.offset=0;C=m.size;m.size=0;E=m.state;m.state=1;O=m.stride;m.stride=0;A=m.type;m.type=k.dtype;G=m.w;m.w=0;H=m.x;m.x=0;fa=m.y;m.y=0;B=m.z;m.z=0;D=b.vert;b.vert=2;L=b.frag;b.frag=1;y.dirty=!0;e(aa,d,c);Q.depth_enable=f;a&&(J.cpuTime+=performance.now()-l);g.count=h;xa[3]=q;xa[5]=n;xa[4]=p;m.buffer=x;m.divisor=z;m.normalized=u;m.offset=I;m.size=C;m.state=E;m.stride=O;m.type=A;m.w=G;m.x=H;m.y=fa;m.z=B;b.vert=D;b.frag=L;y.dirty=!0},batch:function(b,e){var a,
h,q,v;a=C.next;a!==C.cur&&(a?E.bindFramebuffer(36160,a.framebuffer):E.bindFramebuffer(36160,null),C.cur=a);if(y.dirty){var t,K,m;a=Q.dither;a!==y.dither&&(a?E.enable(3024):E.disable(3024),y.dither=a);a=Q.blend_enable;a!==y.blend_enable&&(a?E.enable(3042):E.disable(3042),y.blend_enable=a);a=ra[0];t=ra[1];K=ra[2];m=ra[3];if(a!==V[0]||t!==V[1]||K!==V[2]||m!==V[3])E.blendColor(a,t,K,m),V[0]=a,V[1]=t,V[2]=K,V[3]=m;a=X[0];t=X[1];if(a!==ea[0]||t!==ea[1])E.blendEquationSeparate(a,t),ea[0]=a,ea[1]=t;a=T[0];
t=T[1];K=T[2];m=T[3];if(a!==S[0]||t!==S[1]||K!==S[2]||m!==S[3])E.blendFuncSeparate(a,t,K,m),S[0]=a,S[1]=t,S[2]=K,S[3]=m;a=Q.depth_func;a!==y.depth_func&&(E.depthFunc(a),y.depth_func=a);a=M[0];t=M[1];if(a!==N[0]||t!==N[1])E.depthRange(a,t),N[0]=a,N[1]=t;a=Q.depth_mask;a!==y.depth_mask&&(E.depthMask(a),y.depth_mask=a);a=A[0];t=A[1];K=A[2];m=A[3];if(a!==l[0]||t!==l[1]||K!==l[2]||m!==l[3])E.colorMask(a,t,K,m),l[0]=a,l[1]=t,l[2]=K,l[3]=m;a=Q.cull_enable;a!==y.cull_enable&&(a?E.enable(2884):E.disable(2884),
y.cull_enable=a);a=Q.cull_face;a!==y.cull_face&&(E.cullFace(a),y.cull_face=a);a=Q.frontFace;a!==y.frontFace&&(E.frontFace(a),y.frontFace=a);a=Q.lineWidth;a!==y.lineWidth&&(E.lineWidth(a),y.lineWidth=a);a=Q.polygonOffset_enable;a!==y.polygonOffset_enable&&(a?E.enable(32823):E.disable(32823),y.polygonOffset_enable=a);a=ia[0];t=ia[1];if(a!==na[0]||t!==na[1])E.polygonOffset(a,t),na[0]=a,na[1]=t;a=Q.sample_alpha;a!==y.sample_alpha&&(a?E.enable(32926):E.disable(32926),y.sample_alpha=a);a=Q.sample_enable;
a!==y.sample_enable&&(a?E.enable(32928):E.disable(32928),y.sample_enable=a);a=n[0];t=n[1];if(a!==H[0]||t!==H[1])E.sampleCoverage(a,t),H[0]=a,H[1]=t;a=Q.stencil_enable;a!==y.stencil_enable&&(a?E.enable(2960):E.disable(2960),y.stencil_enable=a);a=Q.stencil_mask;a!==y.stencil_mask&&(E.stencilMask(a),y.stencil_mask=a);a=la[0];t=la[1];K=la[2];if(a!==qa[0]||t!==qa[1]||K!==qa[2])E.stencilFunc(a,t,K),qa[0]=a,qa[1]=t,qa[2]=K;a=fa[0];t=fa[1];K=fa[2];m=fa[3];if(a!==Ea[0]||t!==Ea[1]||K!==Ea[2]||m!==Ea[3])E.stencilOpSeparate(a,
t,K,m),Ea[0]=a,Ea[1]=t,Ea[2]=K,Ea[3]=m;a=Da[0];t=Da[1];K=Da[2];m=Da[3];if(a!==Ca[0]||t!==Ca[1]||K!==Ca[2]||m!==Ca[3])E.stencilOpSeparate(a,t,K,m),Ca[0]=a,Ca[1]=t,Ca[2]=K,Ca[3]=m;a=Q.scissor_enable;a!==y.scissor_enable&&(a?E.enable(3089):E.disable(3089),y.scissor_enable=a);a=ba[0];t=ba[1];K=ba[2];m=ba[3];if(a!==O[0]||t!==O[1]||K!==O[2]||m!==O[3])E.scissor(a,t,K,m),O[0]=a,O[1]=t,O[2]=K,O[3]=m;a=ka[0];t=ka[1];K=ka[2];m=ka[3];if(a!==oa[0]||t!==oa[1]||K!==oa[2]||m!==oa[3])E.viewport(a,t,K,m),oa[0]=a,oa[1]=
t,oa[2]=K,oa[3]=m}E.disable(2929);y.depth_enable=!1;if(a=y.profile)h=performance.now(),J.count+=e;E.useProgram(r.program);z.setVAO(null);t=L.location;K=p[t];K.buffer||E.enableVertexAttribArray(t);if(K.type!==k.dtype||2!==K.size||K.buffer!==k||!1!==K.normalized||0!==K.offset||0!==K.stride)E.bindBuffer(34962,k.buffer),E.vertexAttribPointer(t,2,k.dtype,!1,0,0),K.type=k.dtype,K.size=2,K.buffer=k,K.normalized=!1,K.offset=0,K.stride=0;q=da.call(this,aa,v,q);"number"!==typeof q&&Z.commandRaise(u,G);E.uniform1f(ga.location,
q);(t=g.elements)?E.bindBuffer(34963,t.buffer.buffer):z.currentVAO&&(t=W.getElements(z.currentVAO.elements))&&E.bindBuffer(34963,t.buffer.buffer);K=g.primitive;m=g.offset;for(q=0;q<e;++q){v=b[q];var w,B,D,ha,I,sa,Ha,pa,F;w=v.offset;d(w)&&2===w.length||Z.commandRaise(P,G);B=w[0];w=w[1];q&&D===B&&ha===w||(D=B,ha=w,E.uniform2f(f.location,B,w));I=x.call(this,aa,v,q);d(I)&&4===I.length||Z.commandRaise(R,G);v=I[0];B=I[1];w=I[2];I=I[3];q&&sa===v&&Ha===B&&pa===w&&F===I||(sa=v,Ha=B,pa=w,F=I,E.uniform4f(c.location,
v,B,w,I));t?E.drawElements(K,3,t.type,m<<(t.type-5121>>1)):E.drawArrays(K,m,3)}y.dirty=!0;z.setVAO(null);a&&(J.cpuTime+=performance.now()-h)}}},"$23,model,position,projection,view":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g){var W,C,E,d,Q,b,xa,z,V,ia,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va;W=a.attributes;C=a.context;E=a.current;d=a.draw;Q=a.framebuffer;b=a.gl;xa=a.isArrayLike;z=a.next;V=a.shader;ia=a.uniforms;X=a.vao;ea=z.blend_color;
T=E.blend_color;S=z.blend_equation;A=E.blend_equation;l=z.blend_func;M=E.blend_func;N=z.colorMask;wa=E.colorMask;na=z.depth_range;n=E.depth_range;H=z.polygonOffset_offset;ba=E.polygonOffset_offset;O=z.sample_coverage;la=E.sample_coverage;qa=z.scissor_box;Da=E.scissor_box;Ca=z.stencil_func;fa=E.stencil_func;Ea=z.stencil_opBack;ka=E.stencil_opBack;oa=z.stencil_opFront;Aa=E.stencil_opFront;Ba=z.viewport;ma=E.viewport;Xb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);v=new Float32Array(16);
t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];K=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);va=new Float32Array(16);return{draw:function(d){var c,f,a,t;c=Q.next;c!==Q.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),Q.cur=c);if(E.dirty){var m;c=z.dither;c!==E.dither&&(c?b.enable(3024):b.disable(3024),E.dither=c);c=z.blend_enable;c!==E.blend_enable&&(c?b.enable(3042):b.disable(3042),E.blend_enable=c);c=ea[0];a=ea[1];t=ea[2];m=ea[3];if(c!==T[0]||a!==
T[1]||t!==T[2]||m!==T[3])b.blendColor(c,a,t,m),T[0]=c,T[1]=a,T[2]=t,T[3]=m;c=S[0];a=S[1];if(c!==A[0]||a!==A[1])b.blendEquationSeparate(c,a),A[0]=c,A[1]=a;c=l[0];a=l[1];t=l[2];m=l[3];if(c!==M[0]||a!==M[1]||t!==M[2]||m!==M[3])b.blendFuncSeparate(c,a,t,m),M[0]=c,M[1]=a,M[2]=t,M[3]=m;c=z.depth_enable;c!==E.depth_enable&&(c?b.enable(2929):b.disable(2929),E.depth_enable=c);c=z.depth_func;c!==E.depth_func&&(b.depthFunc(c),E.depth_func=c);c=na[0];a=na[1];if(c!==n[0]||a!==n[1])b.depthRange(c,a),n[0]=c,n[1]=
a;c=z.depth_mask;c!==E.depth_mask&&(b.depthMask(c),E.depth_mask=c);c=N[0];a=N[1];t=N[2];m=N[3];if(c!==wa[0]||a!==wa[1]||t!==wa[2]||m!==wa[3])b.colorMask(c,a,t,m),wa[0]=c,wa[1]=a,wa[2]=t,wa[3]=m;c=z.cull_enable;c!==E.cull_enable&&(c?b.enable(2884):b.disable(2884),E.cull_enable=c);c=z.cull_face;c!==E.cull_face&&(b.cullFace(c),E.cull_face=c);c=z.frontFace;c!==E.frontFace&&(b.frontFace(c),E.frontFace=c);c=z.lineWidth;c!==E.lineWidth&&(b.lineWidth(c),E.lineWidth=c);c=z.polygonOffset_enable;c!==E.polygonOffset_enable&&
(c?b.enable(32823):b.disable(32823),E.polygonOffset_enable=c);c=H[0];a=H[1];if(c!==ba[0]||a!==ba[1])b.polygonOffset(c,a),ba[0]=c,ba[1]=a;c=z.sample_alpha;c!==E.sample_alpha&&(c?b.enable(32926):b.disable(32926),E.sample_alpha=c);c=z.sample_enable;c!==E.sample_enable&&(c?b.enable(32928):b.disable(32928),E.sample_enable=c);c=O[0];a=O[1];if(c!==la[0]||a!==la[1])b.sampleCoverage(c,a),la[0]=c,la[1]=a;c=z.stencil_enable;c!==E.stencil_enable&&(c?b.enable(2960):b.disable(2960),E.stencil_enable=c);c=z.stencil_mask;
c!==E.stencil_mask&&(b.stencilMask(c),E.stencil_mask=c);c=Ca[0];a=Ca[1];t=Ca[2];if(c!==fa[0]||a!==fa[1]||t!==fa[2])b.stencilFunc(c,a,t),fa[0]=c,fa[1]=a,fa[2]=t;c=oa[0];a=oa[1];t=oa[2];m=oa[3];if(c!==Aa[0]||a!==Aa[1]||t!==Aa[2]||m!==Aa[3])b.stencilOpSeparate(c,a,t,m),Aa[0]=c,Aa[1]=a,Aa[2]=t,Aa[3]=m;c=Ea[0];a=Ea[1];t=Ea[2];m=Ea[3];if(c!==ka[0]||a!==ka[1]||t!==ka[2]||m!==ka[3])b.stencilOpSeparate(c,a,t,m),ka[0]=c,ka[1]=a,ka[2]=t,ka[3]=m;c=z.scissor_enable;c!==E.scissor_enable&&(c?b.enable(3089):b.disable(3089),
E.scissor_enable=c);c=qa[0];a=qa[1];t=qa[2];m=qa[3];if(c!==Da[0]||a!==Da[1]||t!==Da[2]||m!==Da[3])b.scissor(c,a,t,m),Da[0]=c,Da[1]=a,Da[2]=t,Da[3]=m;c=Ba[0];a=Ba[1];t=Ba[2];m=Ba[3];if(c!==ma[0]||a!==ma[1]||t!==ma[2]||m!==ma[3])b.viewport(c,a,t,m),ma[0]=c,ma[1]=a,ma[2]=t,ma[3]=m;E.dirty=!1}if(c=E.profile)f=performance.now(),J.count++;b.useProgram(h.program);X.setVAO(null);a=aa.location;t=W[a];t.buffer||b.enableVertexAttribArray(a);if(t.type!==k.dtype||3!==t.size||t.buffer!==k||!1!==t.normalized||0!==
t.offset||0!==t.stride)b.bindBuffer(34962,k.buffer),b.vertexAttribPointer(a,3,k.dtype,!1,0,0),t.type=k.dtype,t.size=3,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=0;b.uniformMatrix4fv(p.location,!1,Xb);a=q.call(this,C,d,0);xa(a)&&16===a.length||Z.commandRaise(e,G);b.uniformMatrix4fv(g.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(Ta[0]=a[0],Ta[1]=a[1],Ta[2]=a[2],Ta[3]=a[3],Ta[4]=a[4],Ta[5]=a[5],Ta[6]=a[6],Ta[7]=a[7],Ta[8]=a[8],Ta[9]=a[9],Ta[10]=a[10],Ta[11]=a[11],Ta[12]=a[12],Ta[13]=
a[13],Ta[14]=a[14],Ta[15]=a[15],Ta));d=B.call(this,C,d,0);xa(d)&&16===d.length||Z.commandRaise(D,G);b.uniformMatrix4fv(y.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(v[0]=d[0],v[1]=d[1],v[2]=d[2],v[3]=d[3],v[4]=d[4],v[5]=d[5],v[6]=d[6],v[7]=d[7],v[8]=d[8],v[9]=d[9],v[10]=d[10],v[11]=d[11],v[12]=d[12],v[13]=d[13],v[14]=d[14],v[15]=d[15],v));F&&b.bindBuffer(34963,F.buffer.buffer);d=F.primType;a=F.vertCount-0;0<=a||Z.commandRaise(U,G);a&&(b.drawElements(d,a,F.type,0<<(F.type-5121>>1)),
X.setVAO(null),c&&(J.cpuTime+=performance.now()-f))},scope:function(b,c,e){var f,a,l,g,h,n,q,p,v,x,y,K,z,O,A,H,fa,ma,B,D,L,M,N;if(f=E.profile)a=performance.now(),J.count++;l=d.elements;d.elements=w;g=d.offset;d.offset=0;h=w.vertCount-0;0<=h||Z.commandRaise(m,G);n=d.count;d.count=h;q=w.primType;h=d.primitive;d.primitive=q;q=ia[3];ia[3]=t;p=r.call(this,C,b,e);v=ia[5];ia[5]=p;x=da.call(this,C,b,e);p=ia[4];ia[4]=x;x=u.buffer;u.buffer=k;y=u.divisor;u.divisor=0;K=u.normalized;u.normalized=!1;z=u.offset;
u.offset=0;O=u.size;u.size=0;A=u.state;u.state=1;H=u.stride;u.stride=0;fa=u.type;u.type=k.dtype;ma=u.w;u.w=0;B=u.x;u.x=0;D=u.y;u.y=0;L=u.z;u.z=0;M=V.vert;V.vert=2;N=V.frag;V.frag=1;c(C,b,e);f&&(J.cpuTime+=performance.now()-a);d.elements=l;d.offset=g;d.count=n;d.primitive=h;ia[3]=q;ia[5]=v;ia[4]=p;u.buffer=x;u.divisor=y;u.normalized=K;u.offset=z;u.size=O;u.state=A;u.stride=H;u.type=fa;u.w=ma;u.x=B;u.y=D;u.z=L;V.vert=M;V.frag=N},batch:function(d,e){var a,h,t;a=Q.next;a!==Q.cur&&(a?b.bindFramebuffer(36160,
a.framebuffer):b.bindFramebuffer(36160,null),Q.cur=a);if(E.dirty){var q,v,m;a=z.dither;a!==E.dither&&(a?b.enable(3024):b.disable(3024),E.dither=a);a=z.blend_enable;a!==E.blend_enable&&(a?b.enable(3042):b.disable(3042),E.blend_enable=a);a=ea[0];q=ea[1];v=ea[2];m=ea[3];if(a!==T[0]||q!==T[1]||v!==T[2]||m!==T[3])b.blendColor(a,q,v,m),T[0]=a,T[1]=q,T[2]=v,T[3]=m;a=S[0];q=S[1];if(a!==A[0]||q!==A[1])b.blendEquationSeparate(a,q),A[0]=a,A[1]=q;a=l[0];q=l[1];v=l[2];m=l[3];if(a!==M[0]||q!==M[1]||v!==M[2]||m!==
M[3])b.blendFuncSeparate(a,q,v,m),M[0]=a,M[1]=q,M[2]=v,M[3]=m;a=z.depth_enable;a!==E.depth_enable&&(a?b.enable(2929):b.disable(2929),E.depth_enable=a);a=z.depth_func;a!==E.depth_func&&(b.depthFunc(a),E.depth_func=a);a=na[0];q=na[1];if(a!==n[0]||q!==n[1])b.depthRange(a,q),n[0]=a,n[1]=q;a=z.depth_mask;a!==E.depth_mask&&(b.depthMask(a),E.depth_mask=a);a=N[0];q=N[1];v=N[2];m=N[3];if(a!==wa[0]||q!==wa[1]||v!==wa[2]||m!==wa[3])b.colorMask(a,q,v,m),wa[0]=a,wa[1]=q,wa[2]=v,wa[3]=m;a=z.cull_enable;a!==E.cull_enable&&
(a?b.enable(2884):b.disable(2884),E.cull_enable=a);a=z.cull_face;a!==E.cull_face&&(b.cullFace(a),E.cull_face=a);a=z.frontFace;a!==E.frontFace&&(b.frontFace(a),E.frontFace=a);a=z.lineWidth;a!==E.lineWidth&&(b.lineWidth(a),E.lineWidth=a);a=z.polygonOffset_enable;a!==E.polygonOffset_enable&&(a?b.enable(32823):b.disable(32823),E.polygonOffset_enable=a);a=H[0];q=H[1];if(a!==ba[0]||q!==ba[1])b.polygonOffset(a,q),ba[0]=a,ba[1]=q;a=z.sample_alpha;a!==E.sample_alpha&&(a?b.enable(32926):b.disable(32926),E.sample_alpha=
a);a=z.sample_enable;a!==E.sample_enable&&(a?b.enable(32928):b.disable(32928),E.sample_enable=a);a=O[0];q=O[1];if(a!==la[0]||q!==la[1])b.sampleCoverage(a,q),la[0]=a,la[1]=q;a=z.stencil_enable;a!==E.stencil_enable&&(a?b.enable(2960):b.disable(2960),E.stencil_enable=a);a=z.stencil_mask;a!==E.stencil_mask&&(b.stencilMask(a),E.stencil_mask=a);a=Ca[0];q=Ca[1];v=Ca[2];if(a!==fa[0]||q!==fa[1]||v!==fa[2])b.stencilFunc(a,q,v),fa[0]=a,fa[1]=q,fa[2]=v;a=oa[0];q=oa[1];v=oa[2];m=oa[3];if(a!==Aa[0]||q!==Aa[1]||
v!==Aa[2]||m!==Aa[3])b.stencilOpSeparate(a,q,v,m),Aa[0]=a,Aa[1]=q,Aa[2]=v,Aa[3]=m;a=Ea[0];q=Ea[1];v=Ea[2];m=Ea[3];if(a!==ka[0]||q!==ka[1]||v!==ka[2]||m!==ka[3])b.stencilOpSeparate(a,q,v,m),ka[0]=a,ka[1]=q,ka[2]=v,ka[3]=m;a=z.scissor_enable;a!==E.scissor_enable&&(a?b.enable(3089):b.disable(3089),E.scissor_enable=a);a=qa[0];q=qa[1];v=qa[2];m=qa[3];if(a!==Da[0]||q!==Da[1]||v!==Da[2]||m!==Da[3])b.scissor(a,q,v,m),Da[0]=a,Da[1]=q,Da[2]=v,Da[3]=m;a=Ba[0];q=Ba[1];v=Ba[2];m=Ba[3];if(a!==ma[0]||q!==ma[1]||
v!==ma[2]||m!==ma[3])b.viewport(a,q,v,m),ma[0]=a,ma[1]=q,ma[2]=v,ma[3]=m;E.dirty=!1}if(a=E.profile)h=performance.now(),J.count+=e;b.useProgram(P.program);X.setVAO(null);q=aa.location;v=W[q];v.buffer||b.enableVertexAttribArray(q);if(v.type!==k.dtype||3!==v.size||v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)b.bindBuffer(34962,k.buffer),b.vertexAttribPointer(q,3,k.dtype,!1,0,0),v.type=k.dtype,v.size=3,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;b.uniformMatrix4fv(p.location,!1,K);
q=x.call(this,C,void 0,t);xa(q)&&16===q.length||Z.commandRaise(R,G);b.uniformMatrix4fv(g.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(ua[0]=q[0],ua[1]=q[1],ua[2]=q[2],ua[3]=q[3],ua[4]=q[4],ua[5]=q[5],ua[6]=q[6],ua[7]=q[7],ua[8]=q[8],ua[9]=q[9],ua[10]=q[10],ua[11]=q[11],ua[12]=q[12],ua[13]=q[13],ua[14]=q[14],ua[15]=q[15],ua));t=ga.call(this,C,void 0,t);xa(t)&&16===t.length||Z.commandRaise(c,G);b.uniformMatrix4fv(y.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(va[0]=t[0],
va[1]=t[1],va[2]=t[2],va[3]=t[3],va[4]=t[4],va[5]=t[5],va[6]=t[6],va[7]=t[7],va[8]=t[8],va[9]=t[9],va[10]=t[10],va[11]=t[11],va[12]=t[12],va[13]=t[13],va[14]=t[14],va[15]=t[15],va));f&&b.bindBuffer(34963,f.buffer.buffer);q=f.primType;v=f.vertCount-0;0<=v||Z.commandRaise(L,G);for(t=0;t<e;++t)v&&b.drawElements(q,v,f.type,0<<(f.type-5121>>1));X.setVAO(null);a&&(J.cpuTime+=performance.now()-h)}}},$20:function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga){var c,f,L,p,aa,y,g,W,C,E,d,Q,b,V,z,ra,ia,X,ea,T,
S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da;c=a.context;f=a.current;L=a.framebuffer;p=a.gl;aa=a.next;y=a.shader;g=a.uniforms;W=a.vao;C=aa.blend_color;E=f.blend_color;d=aa.blend_equation;Q=f.blend_equation;b=aa.blend_func;V=f.blend_func;z=aa.colorMask;ra=f.colorMask;ia=aa.depth_range;X=f.depth_range;ea=aa.polygonOffset_offset;T=f.polygonOffset_offset;S=aa.sample_coverage;A=f.sample_coverage;l=aa.scissor_box;M=f.scissor_box;N=aa.stencil_func;wa=f.stencil_func;na=aa.stencil_opBack;n=f.stencil_opBack;H=aa.stencil_opFront;
ba=f.stencil_opFront;O=aa.viewport;la=f.viewport;qa={};Da={};return{draw:function(a){var g,m,x,u,w,r,ma,P,R,v,t,K,F;g=c.center;m=c.distance;x=c.eye;u=c.phi;w=c.projection;r=q.call(this,c,a,0);ma=c.theta;P=c.up;R=c.view;c.center=h;c.distance=2.302585092994046;c.eye=k;c.phi=0;c.projection=r;c.theta=0;c.up=e;c.view=B;r=L.next;r!==L.cur&&(r?p.bindFramebuffer(36160,r.framebuffer):p.bindFramebuffer(36160,null),L.cur=r);if(f.dirty){r=aa.dither;r!==f.dither&&(r?p.enable(3024):p.disable(3024),f.dither=r);
r=aa.blend_enable;r!==f.blend_enable&&(r?p.enable(3042):p.disable(3042),f.blend_enable=r);r=C[0];t=C[1];K=C[2];F=C[3];if(r!==E[0]||t!==E[1]||K!==E[2]||F!==E[3])p.blendColor(r,t,K,F),E[0]=r,E[1]=t,E[2]=K,E[3]=F;r=d[0];t=d[1];if(r!==Q[0]||t!==Q[1])p.blendEquationSeparate(r,t),Q[0]=r,Q[1]=t;r=b[0];t=b[1];K=b[2];F=b[3];if(r!==V[0]||t!==V[1]||K!==V[2]||F!==V[3])p.blendFuncSeparate(r,t,K,F),V[0]=r,V[1]=t,V[2]=K,V[3]=F;r=aa.depth_enable;r!==f.depth_enable&&(r?p.enable(2929):p.disable(2929),f.depth_enable=
r);r=aa.depth_func;r!==f.depth_func&&(p.depthFunc(r),f.depth_func=r);r=ia[0];t=ia[1];if(r!==X[0]||t!==X[1])p.depthRange(r,t),X[0]=r,X[1]=t;r=aa.depth_mask;r!==f.depth_mask&&(p.depthMask(r),f.depth_mask=r);r=z[0];t=z[1];K=z[2];F=z[3];if(r!==ra[0]||t!==ra[1]||K!==ra[2]||F!==ra[3])p.colorMask(r,t,K,F),ra[0]=r,ra[1]=t,ra[2]=K,ra[3]=F;r=aa.cull_enable;r!==f.cull_enable&&(r?p.enable(2884):p.disable(2884),f.cull_enable=r);r=aa.cull_face;r!==f.cull_face&&(p.cullFace(r),f.cull_face=r);r=aa.frontFace;r!==f.frontFace&&
(p.frontFace(r),f.frontFace=r);r=aa.lineWidth;r!==f.lineWidth&&(p.lineWidth(r),f.lineWidth=r);r=aa.polygonOffset_enable;r!==f.polygonOffset_enable&&(r?p.enable(32823):p.disable(32823),f.polygonOffset_enable=r);r=ea[0];t=ea[1];if(r!==T[0]||t!==T[1])p.polygonOffset(r,t),T[0]=r,T[1]=t;r=aa.sample_alpha;r!==f.sample_alpha&&(r?p.enable(32926):p.disable(32926),f.sample_alpha=r);r=aa.sample_enable;r!==f.sample_enable&&(r?p.enable(32928):p.disable(32928),f.sample_enable=r);r=S[0];t=S[1];if(r!==A[0]||t!==
A[1])p.sampleCoverage(r,t),A[0]=r,A[1]=t;r=aa.stencil_enable;r!==f.stencil_enable&&(r?p.enable(2960):p.disable(2960),f.stencil_enable=r);r=aa.stencil_mask;r!==f.stencil_mask&&(p.stencilMask(r),f.stencil_mask=r);r=N[0];t=N[1];K=N[2];if(r!==wa[0]||t!==wa[1]||K!==wa[2])p.stencilFunc(r,t,K),wa[0]=r,wa[1]=t,wa[2]=K;r=H[0];t=H[1];K=H[2];F=H[3];if(r!==ba[0]||t!==ba[1]||K!==ba[2]||F!==ba[3])p.stencilOpSeparate(r,t,K,F),ba[0]=r,ba[1]=t,ba[2]=K,ba[3]=F;r=na[0];t=na[1];K=na[2];F=na[3];if(r!==n[0]||t!==n[1]||
K!==n[2]||F!==n[3])p.stencilOpSeparate(r,t,K,F),n[0]=r,n[1]=t,n[2]=K,n[3]=F;r=aa.scissor_enable;r!==f.scissor_enable&&(r?p.enable(3089):p.disable(3089),f.scissor_enable=r);r=l[0];t=l[1];K=l[2];F=l[3];if(r!==M[0]||t!==M[1]||K!==M[2]||F!==M[3])p.scissor(r,t,K,F),M[0]=r,M[1]=t,M[2]=K,M[3]=F;r=O[0];t=O[1];K=O[2];F=O[3];if(r!==la[0]||t!==la[1]||K!==la[2]||F!==la[3])p.viewport(r,t,K,F),la[0]=r,la[1]=t,la[2]=K,la[3]=F;f.dirty=!1}if(r=f.profile)v=performance.now(),J.count++;t=y.program(y.vert,y.frag,G);p.useProgram(t.program);
W.setVAO(null);K=t.id;(F=qa[K])||(F=qa[K]=D(t));F.call(this,a);W.setVAO(null);c.center=g;c.distance=m;c.eye=x;c.phi=u;c.projection=w;c.theta=ma;c.up=P;c.view=R;r&&(J.cpuTime+=performance.now()-v)},scope:function(b,d,e){var a,k,l,h,q,n,p,v,t,x,y,z,u,C,E,I,O,A,G;a=c.center;k=c.distance;l=c.eye;h=c.phi;q=c.projection;n=w.call(this,c,b,e);p=c.theta;v=c.up;t=c.view;c.center=F;c.distance=2.302585092994046;c.eye=U;c.phi=0;c.projection=n;c.theta=0;c.up=m;c.view=r;if(n=f.profile)x=performance.now(),J.count++;
y=c.center;z=g[1];g[1]=y;u=c.distance;y=g[2];g[2]=u;C=c.eye;u=g[3];g[3]=C;E=c.phi;C=g[4];g[4]=E;I=c.projection;E=g[5];g[5]=I;O=c.theta;I=g[6];g[6]=O;A=c.up;O=g[7];g[7]=A;A=c.view;G=g[8];g[8]=A;d(c,b,e);c.center=a;c.distance=k;c.eye=l;c.phi=h;c.projection=q;c.theta=p;c.up=v;c.view=t;n&&(J.cpuTime+=performance.now()-x);g[1]=z;g[2]=y;g[3]=u;g[4]=C;g[5]=E;g[6]=I;g[7]=O;g[8]=G},batch:function(e,a){var k,g,h,q,m,r,w,B,v,t,K,D,F;k=c.center;g=c.distance;h=c.eye;q=c.phi;m=c.projection;r=P.call(this,c,e,0);
w=c.theta;B=c.up;v=c.view;c.center=da;c.distance=2.302585092994046;c.eye=u;c.phi=0;c.projection=r;c.theta=0;c.up=x;c.view=R;r=L.next;r!==L.cur&&(r?p.bindFramebuffer(36160,r.framebuffer):p.bindFramebuffer(36160,null),L.cur=r);if(f.dirty){r=aa.dither;r!==f.dither&&(r?p.enable(3024):p.disable(3024),f.dither=r);r=aa.blend_enable;r!==f.blend_enable&&(r?p.enable(3042):p.disable(3042),f.blend_enable=r);r=C[0];K=C[1];D=C[2];F=C[3];if(r!==E[0]||K!==E[1]||D!==E[2]||F!==E[3])p.blendColor(r,K,D,F),E[0]=r,E[1]=
K,E[2]=D,E[3]=F;r=d[0];K=d[1];if(r!==Q[0]||K!==Q[1])p.blendEquationSeparate(r,K),Q[0]=r,Q[1]=K;r=b[0];K=b[1];D=b[2];F=b[3];if(r!==V[0]||K!==V[1]||D!==V[2]||F!==V[3])p.blendFuncSeparate(r,K,D,F),V[0]=r,V[1]=K,V[2]=D,V[3]=F;r=aa.depth_enable;r!==f.depth_enable&&(r?p.enable(2929):p.disable(2929),f.depth_enable=r);r=aa.depth_func;r!==f.depth_func&&(p.depthFunc(r),f.depth_func=r);r=ia[0];K=ia[1];if(r!==X[0]||K!==X[1])p.depthRange(r,K),X[0]=r,X[1]=K;r=aa.depth_mask;r!==f.depth_mask&&(p.depthMask(r),f.depth_mask=
r);r=z[0];K=z[1];D=z[2];F=z[3];if(r!==ra[0]||K!==ra[1]||D!==ra[2]||F!==ra[3])p.colorMask(r,K,D,F),ra[0]=r,ra[1]=K,ra[2]=D,ra[3]=F;r=aa.cull_enable;r!==f.cull_enable&&(r?p.enable(2884):p.disable(2884),f.cull_enable=r);r=aa.cull_face;r!==f.cull_face&&(p.cullFace(r),f.cull_face=r);r=aa.frontFace;r!==f.frontFace&&(p.frontFace(r),f.frontFace=r);r=aa.lineWidth;r!==f.lineWidth&&(p.lineWidth(r),f.lineWidth=r);r=aa.polygonOffset_enable;r!==f.polygonOffset_enable&&(r?p.enable(32823):p.disable(32823),f.polygonOffset_enable=
r);r=ea[0];K=ea[1];if(r!==T[0]||K!==T[1])p.polygonOffset(r,K),T[0]=r,T[1]=K;r=aa.sample_alpha;r!==f.sample_alpha&&(r?p.enable(32926):p.disable(32926),f.sample_alpha=r);r=aa.sample_enable;r!==f.sample_enable&&(r?p.enable(32928):p.disable(32928),f.sample_enable=r);r=S[0];K=S[1];if(r!==A[0]||K!==A[1])p.sampleCoverage(r,K),A[0]=r,A[1]=K;r=aa.stencil_enable;r!==f.stencil_enable&&(r?p.enable(2960):p.disable(2960),f.stencil_enable=r);r=aa.stencil_mask;r!==f.stencil_mask&&(p.stencilMask(r),f.stencil_mask=
r);r=N[0];K=N[1];D=N[2];if(r!==wa[0]||K!==wa[1]||D!==wa[2])p.stencilFunc(r,K,D),wa[0]=r,wa[1]=K,wa[2]=D;r=H[0];K=H[1];D=H[2];F=H[3];if(r!==ba[0]||K!==ba[1]||D!==ba[2]||F!==ba[3])p.stencilOpSeparate(r,K,D,F),ba[0]=r,ba[1]=K,ba[2]=D,ba[3]=F;r=na[0];K=na[1];D=na[2];F=na[3];if(r!==n[0]||K!==n[1]||D!==n[2]||F!==n[3])p.stencilOpSeparate(r,K,D,F),n[0]=r,n[1]=K,n[2]=D,n[3]=F;r=aa.scissor_enable;r!==f.scissor_enable&&(r?p.enable(3089):p.disable(3089),f.scissor_enable=r);r=l[0];K=l[1];D=l[2];F=l[3];if(r!==
M[0]||K!==M[1]||D!==M[2]||F!==M[3])p.scissor(r,K,D,F),M[0]=r,M[1]=K,M[2]=D,M[3]=F;r=O[0];K=O[1];D=O[2];F=O[3];if(r!==la[0]||K!==la[1]||D!==la[2]||F!==la[3])p.viewport(r,K,D,F),la[0]=r,la[1]=K,la[2]=D,la[3]=F;f.dirty=!1}if(r=f.profile)t=performance.now(),J.count+=a;K=y.program(y.vert,y.frag,G);p.useProgram(K.program);W.setVAO(null);D=K.id;(F=Da[D])||(F=Da[D]=ga(K));F.call(this,e,a);W.setVAO(null);c.center=k;c.distance=g;c.eye=h;c.phi=q;c.projection=m;c.theta=w;c.up=B;c.view=v;r&&(J.cpuTime+=performance.now()-
t)}}},"$27,position,projection,tex,uv,view":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q){var b,V,z,ra,ia,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma,Xb,Ta,v,t,K,ua,va,za,Gb;b=a.attributes;V=a.context;z=a.current;ra=a.draw;ia=a.framebuffer;X=a.gl;ea=a.isArrayLike;T=a.next;S=a.shader;A=a.uniforms;l=a.vao;M=T.blend_color;N=z.blend_color;wa=T.blend_equation;na=z.blend_equation;n=T.blend_func;H=z.blend_func;ba=T.colorMask;O=z.colorMask;la=T.depth_range;
qa=z.depth_range;Da=T.polygonOffset_offset;Ca=z.polygonOffset_offset;fa=T.sample_coverage;Ea=z.sample_coverage;ka=T.scissor_box;oa=z.scissor_box;Aa=T.stencil_func;Ba=z.stencil_func;ma=T.stencil_opBack;Xb=z.stencil_opBack;Ta=T.stencil_opFront;v=z.stencil_opFront;t=T.viewport;K=z.viewport;ua=new Float32Array(16);va=new Float32Array(16);za=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(c){var a,f,g,p;a=ia.next;a!==ia.cur&&(a?X.bindFramebuffer(36160,a.framebuffer):X.bindFramebuffer(36160,
null),ia.cur=a);if(z.dirty){var r;a=T.dither;a!==z.dither&&(a?X.enable(3024):X.disable(3024),z.dither=a);a=T.blend_enable;a!==z.blend_enable&&(a?X.enable(3042):X.disable(3042),z.blend_enable=a);a=M[0];g=M[1];p=M[2];r=M[3];if(a!==N[0]||g!==N[1]||p!==N[2]||r!==N[3])X.blendColor(a,g,p,r),N[0]=a,N[1]=g,N[2]=p,N[3]=r;a=wa[0];g=wa[1];if(a!==na[0]||g!==na[1])X.blendEquationSeparate(a,g),na[0]=a,na[1]=g;a=n[0];g=n[1];p=n[2];r=n[3];if(a!==H[0]||g!==H[1]||p!==H[2]||r!==H[3])X.blendFuncSeparate(a,g,p,r),H[0]=
a,H[1]=g,H[2]=p,H[3]=r;a=T.depth_enable;a!==z.depth_enable&&(a?X.enable(2929):X.disable(2929),z.depth_enable=a);a=T.depth_func;a!==z.depth_func&&(X.depthFunc(a),z.depth_func=a);a=la[0];g=la[1];if(a!==qa[0]||g!==qa[1])X.depthRange(a,g),qa[0]=a,qa[1]=g;a=T.depth_mask;a!==z.depth_mask&&(X.depthMask(a),z.depth_mask=a);a=ba[0];g=ba[1];p=ba[2];r=ba[3];if(a!==O[0]||g!==O[1]||p!==O[2]||r!==O[3])X.colorMask(a,g,p,r),O[0]=a,O[1]=g,O[2]=p,O[3]=r;a=T.cull_enable;a!==z.cull_enable&&(a?X.enable(2884):X.disable(2884),
z.cull_enable=a);a=T.cull_face;a!==z.cull_face&&(X.cullFace(a),z.cull_face=a);a=T.frontFace;a!==z.frontFace&&(X.frontFace(a),z.frontFace=a);a=T.lineWidth;a!==z.lineWidth&&(X.lineWidth(a),z.lineWidth=a);a=T.polygonOffset_enable;a!==z.polygonOffset_enable&&(a?X.enable(32823):X.disable(32823),z.polygonOffset_enable=a);a=Da[0];g=Da[1];if(a!==Ca[0]||g!==Ca[1])X.polygonOffset(a,g),Ca[0]=a,Ca[1]=g;a=T.sample_alpha;a!==z.sample_alpha&&(a?X.enable(32926):X.disable(32926),z.sample_alpha=a);a=T.sample_enable;
a!==z.sample_enable&&(a?X.enable(32928):X.disable(32928),z.sample_enable=a);a=fa[0];g=fa[1];if(a!==Ea[0]||g!==Ea[1])X.sampleCoverage(a,g),Ea[0]=a,Ea[1]=g;a=T.stencil_enable;a!==z.stencil_enable&&(a?X.enable(2960):X.disable(2960),z.stencil_enable=a);a=T.stencil_mask;a!==z.stencil_mask&&(X.stencilMask(a),z.stencil_mask=a);a=Aa[0];g=Aa[1];p=Aa[2];if(a!==Ba[0]||g!==Ba[1]||p!==Ba[2])X.stencilFunc(a,g,p),Ba[0]=a,Ba[1]=g,Ba[2]=p;a=Ta[0];g=Ta[1];p=Ta[2];r=Ta[3];if(a!==v[0]||g!==v[1]||p!==v[2]||r!==v[3])X.stencilOpSeparate(a,
g,p,r),v[0]=a,v[1]=g,v[2]=p,v[3]=r;a=ma[0];g=ma[1];p=ma[2];r=ma[3];if(a!==Xb[0]||g!==Xb[1]||p!==Xb[2]||r!==Xb[3])X.stencilOpSeparate(a,g,p,r),Xb[0]=a,Xb[1]=g,Xb[2]=p,Xb[3]=r;a=T.scissor_enable;a!==z.scissor_enable&&(a?X.enable(3089):X.disable(3089),z.scissor_enable=a);a=ka[0];g=ka[1];p=ka[2];r=ka[3];if(a!==oa[0]||g!==oa[1]||p!==oa[2]||r!==oa[3])X.scissor(a,g,p,r),oa[0]=a,oa[1]=g,oa[2]=p,oa[3]=r;a=t[0];g=t[1];p=t[2];r=t[3];if(a!==K[0]||g!==K[1]||p!==K[2]||r!==K[3])X.viewport(a,g,p,r),K[0]=a,K[1]=g,
K[2]=p,K[3]=r;z.dirty=!1}if(a=z.profile)f=performance.now(),J.count++;X.useProgram(h.program);l.setVAO(null);g=W.location;p=b[g];p.buffer||X.enableVertexAttribArray(g);if(p.type!==k.dtype||3!==p.size||p.buffer!==k||!1!==p.normalized||0!==p.offset||0!==p.stride)X.bindBuffer(34962,k.buffer),X.vertexAttribPointer(g,3,k.dtype,!1,0,0),p.type=k.dtype,p.size=3,p.buffer=k,p.normalized=!1,p.offset=0,p.stride=0;g=d.location;p=b[g];p.buffer||X.enableVertexAttribArray(g);if(p.type!==q.dtype||2!==p.size||p.buffer!==
q||!1!==p.normalized||0!==p.offset||0!==p.stride)X.bindBuffer(34962,q.buffer),X.vertexAttribPointer(g,2,q.dtype,!1,0,0),p.type=q.dtype,p.size=2,p.buffer=q,p.normalized=!1,p.offset=0,p.stride=0;g=e.call(this,V,c,0);ea(g)&&16===g.length||Z.commandRaise(B,G);X.uniformMatrix4fv(C.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(ua[0]=g[0],ua[1]=g[1],ua[2]=g[2],ua[3]=g[3],ua[4]=g[4],ua[5]=g[5],ua[6]=g[6],ua[7]=g[7],ua[8]=g[8],ua[9]=g[9],ua[10]=g[10],ua[11]=g[11],ua[12]=g[12],ua[13]=g[13],ua[14]=
g[14],ua[15]=g[15],ua));g=D.call(this,V,c,0);ea(g)&&16===g.length||Z.commandRaise(F,G);X.uniformMatrix4fv(Q.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(va[0]=g[0],va[1]=g[1],va[2]=g[2],va[3]=g[3],va[4]=g[4],va[5]=g[5],va[6]=g[6],va[7]=g[7],va[8]=g[8],va[9]=g[9],va[10]=g[10],va[11]=g[11],va[12]=g[12],va[13]=g[13],va[14]=g[14],va[15]=g[15],va));(c=c.texture)&&"framebuffer"===c._reglType&&(c=c.color[0]);"function"===typeof c&&"texture2d"===c._reglType||Z.commandRaise(U,G);c=c._texture;
X.uniform1i(E.location,c.bind());w&&X.bindBuffer(34963,w.buffer.buffer);g=w.primType;p=w.vertCount-0;0<=p||Z.commandRaise(m,G);p&&(X.drawElements(g,p,w.type,0<<(w.type-5121>>1)),l.setVAO(null),a&&(J.cpuTime+=performance.now()-f),c.unbind())},scope:function(b,c,d){var a,e,f,g,l,h,n,t,p,v,m,y,K,C,E,O,w,D,H,B,fa,L,F,M,N,Q,T,Xb,U,qa,Ca,ma,ga,W,aa;if(a=z.profile)e=performance.now(),J.count++;f=ra.elements;ra.elements=r;g=ra.offset;ra.offset=0;l=r.vertCount-0;0<=l||Z.commandRaise(da,G);h=ra.count;ra.count=
l;n=r.primType;l=ra.primitive;ra.primitive=n;t=u.call(this,V,b,d);n=A[3];A[3]=t;p=b.texture;t=A[5];A[5]=p;v=P.call(this,V,b,d);p=A[4];A[4]=v;v=x.buffer;x.buffer=k;m=x.divisor;x.divisor=0;y=x.normalized;x.normalized=!1;K=x.offset;x.offset=0;C=x.size;x.size=0;E=x.state;x.state=1;O=x.stride;x.stride=0;w=x.type;x.type=k.dtype;D=x.w;x.w=0;H=x.x;x.x=0;B=x.y;x.y=0;fa=x.z;x.z=0;L=R.buffer;R.buffer=q;F=R.divisor;R.divisor=0;M=R.normalized;R.normalized=!1;N=R.offset;R.offset=0;Q=R.size;R.size=0;T=R.state;R.state=
1;Xb=R.stride;R.stride=0;U=R.type;R.type=q.dtype;qa=R.w;R.w=0;Ca=R.x;R.x=0;ma=R.y;R.y=0;ga=R.z;R.z=0;W=S.vert;S.vert=2;aa=S.frag;S.frag=1;c(V,b,d);a&&(J.cpuTime+=performance.now()-e);ra.elements=f;ra.offset=g;ra.count=h;ra.primitive=l;A[3]=n;A[5]=t;A[4]=p;x.buffer=v;x.divisor=m;x.normalized=y;x.offset=K;x.size=C;x.state=E;x.stride=O;x.type=w;x.w=D;x.x=H;x.y=B;x.z=fa;R.buffer=L;R.divisor=F;R.normalized=M;R.offset=N;R.size=Q;R.state=T;R.stride=Xb;R.type=U;R.w=qa;R.x=Ca;R.y=ma;R.z=ga;S.vert=W;S.frag=
aa},batch:function(a,e){var h,m,r,x;h=ia.next;h!==ia.cur&&(h?X.bindFramebuffer(36160,h.framebuffer):X.bindFramebuffer(36160,null),ia.cur=h);if(z.dirty){var u,A,w;h=T.dither;h!==z.dither&&(h?X.enable(3024):X.disable(3024),z.dither=h);h=T.blend_enable;h!==z.blend_enable&&(h?X.enable(3042):X.disable(3042),z.blend_enable=h);h=M[0];u=M[1];A=M[2];w=M[3];if(h!==N[0]||u!==N[1]||A!==N[2]||w!==N[3])X.blendColor(h,u,A,w),N[0]=h,N[1]=u,N[2]=A,N[3]=w;h=wa[0];u=wa[1];if(h!==na[0]||u!==na[1])X.blendEquationSeparate(h,
u),na[0]=h,na[1]=u;h=n[0];u=n[1];A=n[2];w=n[3];if(h!==H[0]||u!==H[1]||A!==H[2]||w!==H[3])X.blendFuncSeparate(h,u,A,w),H[0]=h,H[1]=u,H[2]=A,H[3]=w;h=T.depth_enable;h!==z.depth_enable&&(h?X.enable(2929):X.disable(2929),z.depth_enable=h);h=T.depth_func;h!==z.depth_func&&(X.depthFunc(h),z.depth_func=h);h=la[0];u=la[1];if(h!==qa[0]||u!==qa[1])X.depthRange(h,u),qa[0]=h,qa[1]=u;h=T.depth_mask;h!==z.depth_mask&&(X.depthMask(h),z.depth_mask=h);h=ba[0];u=ba[1];A=ba[2];w=ba[3];if(h!==O[0]||u!==O[1]||A!==O[2]||
w!==O[3])X.colorMask(h,u,A,w),O[0]=h,O[1]=u,O[2]=A,O[3]=w;h=T.cull_enable;h!==z.cull_enable&&(h?X.enable(2884):X.disable(2884),z.cull_enable=h);h=T.cull_face;h!==z.cull_face&&(X.cullFace(h),z.cull_face=h);h=T.frontFace;h!==z.frontFace&&(X.frontFace(h),z.frontFace=h);h=T.lineWidth;h!==z.lineWidth&&(X.lineWidth(h),z.lineWidth=h);h=T.polygonOffset_enable;h!==z.polygonOffset_enable&&(h?X.enable(32823):X.disable(32823),z.polygonOffset_enable=h);h=Da[0];u=Da[1];if(h!==Ca[0]||u!==Ca[1])X.polygonOffset(h,
u),Ca[0]=h,Ca[1]=u;h=T.sample_alpha;h!==z.sample_alpha&&(h?X.enable(32926):X.disable(32926),z.sample_alpha=h);h=T.sample_enable;h!==z.sample_enable&&(h?X.enable(32928):X.disable(32928),z.sample_enable=h);h=fa[0];u=fa[1];if(h!==Ea[0]||u!==Ea[1])X.sampleCoverage(h,u),Ea[0]=h,Ea[1]=u;h=T.stencil_enable;h!==z.stencil_enable&&(h?X.enable(2960):X.disable(2960),z.stencil_enable=h);h=T.stencil_mask;h!==z.stencil_mask&&(X.stencilMask(h),z.stencil_mask=h);h=Aa[0];u=Aa[1];A=Aa[2];if(h!==Ba[0]||u!==Ba[1]||A!==
Ba[2])X.stencilFunc(h,u,A),Ba[0]=h,Ba[1]=u,Ba[2]=A;h=Ta[0];u=Ta[1];A=Ta[2];w=Ta[3];if(h!==v[0]||u!==v[1]||A!==v[2]||w!==v[3])X.stencilOpSeparate(h,u,A,w),v[0]=h,v[1]=u,v[2]=A,v[3]=w;h=ma[0];u=ma[1];A=ma[2];w=ma[3];if(h!==Xb[0]||u!==Xb[1]||A!==Xb[2]||w!==Xb[3])X.stencilOpSeparate(h,u,A,w),Xb[0]=h,Xb[1]=u,Xb[2]=A,Xb[3]=w;h=T.scissor_enable;h!==z.scissor_enable&&(h?X.enable(3089):X.disable(3089),z.scissor_enable=h);h=ka[0];u=ka[1];A=ka[2];w=ka[3];if(h!==oa[0]||u!==oa[1]||A!==oa[2]||w!==oa[3])X.scissor(h,
u,A,w),oa[0]=h,oa[1]=u,oa[2]=A,oa[3]=w;h=t[0];u=t[1];A=t[2];w=t[3];if(h!==K[0]||u!==K[1]||A!==K[2]||w!==K[3])X.viewport(h,u,A,w),K[0]=h,K[1]=u,K[2]=A,K[3]=w;z.dirty=!1}if(h=z.profile)m=performance.now(),J.count+=e;X.useProgram(ga.program);l.setVAO(null);u=W.location;A=b[u];A.buffer||X.enableVertexAttribArray(u);if(A.type!==k.dtype||3!==A.size||A.buffer!==k||!1!==A.normalized||0!==A.offset||0!==A.stride)X.bindBuffer(34962,k.buffer),X.vertexAttribPointer(u,3,k.dtype,!1,0,0),A.type=k.dtype,A.size=3,
A.buffer=k,A.normalized=!1,A.offset=0,A.stride=0;u=d.location;A=b[u];A.buffer||X.enableVertexAttribArray(u);if(A.type!==q.dtype||2!==A.size||A.buffer!==q||!1!==A.normalized||0!==A.offset||0!==A.stride)X.bindBuffer(34962,q.buffer),X.vertexAttribPointer(u,2,q.dtype,!1,0,0),A.type=q.dtype,A.size=2,A.buffer=q,A.normalized=!1,A.offset=0,A.stride=0;u=c.call(this,V,x,r);ea(u)&&16===u.length||Z.commandRaise(f,G);X.uniformMatrix4fv(C.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(za[0]=u[0],za[1]=
u[1],za[2]=u[2],za[3]=u[3],za[4]=u[4],za[5]=u[5],za[6]=u[6],za[7]=u[7],za[8]=u[8],za[9]=u[9],za[10]=u[10],za[11]=u[11],za[12]=u[12],za[13]=u[13],za[14]=u[14],za[15]=u[15],za));r=L.call(this,V,x,r);ea(r)&&16===r.length||Z.commandRaise(p,G);X.uniformMatrix4fv(Q.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Gb[0]=r[0],Gb[1]=r[1],Gb[2]=r[2],Gb[3]=r[3],Gb[4]=r[4],Gb[5]=r[5],Gb[6]=r[6],Gb[7]=r[7],Gb[8]=r[8],Gb[9]=r[9],Gb[10]=r[10],Gb[11]=r[11],Gb[12]=r[12],Gb[13]=r[13],Gb[14]=r[14],Gb[15]=
r[15],Gb));y&&X.bindBuffer(34963,y.buffer.buffer);u=y.primType;A=y.vertCount-0;0<=A||Z.commandRaise(g,G);for(r=0;r<e;++r)x=a[r],(x=x.texture)&&"framebuffer"===x._reglType&&(x=x.color[0]),"function"===typeof x&&"texture2d"===x._reglType||Z.commandRaise(aa,G),x=x._texture,X.uniform1i(E.location,x.bind()),A&&(X.drawElements(u,A,y.type,0<<(y.type-5121>>1)),x.unbind());l.setVAO(null);h&&(J.cpuTime+=performance.now()-m)}}},"$19,normal,position,projection,view":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,
u,P,x,R,ga,c,f,L){var p,aa,y,g,W,C,E,d,Q,b,V,z,ia,za,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa,Ba,ma;p=a.attributes;aa=a.context;y=a.current;g=a.draw;W=a.framebuffer;C=a.gl;E=a.isArrayLike;d=a.next;Q=a.shader;b=a.uniforms;V=a.vao;z=d.blend_color;ia=y.blend_color;za=d.blend_equation;X=y.blend_equation;ea=d.blend_func;T=y.blend_func;S=d.colorMask;A=y.colorMask;l=d.depth_range;M=y.depth_range;N=d.polygonOffset_offset;wa=y.polygonOffset_offset;na=d.sample_coverage;n=y.sample_coverage;
H=d.scissor_box;ba=y.scissor_box;O=d.stencil_func;la=y.stencil_func;qa=d.stencil_opBack;Da=y.stencil_opBack;Ca=d.stencil_opFront;fa=y.stencil_opFront;Ea=d.viewport;ka=y.viewport;oa=new Float32Array(16);Aa=new Float32Array(16);Ba=new Float32Array(16);ma=new Float32Array(16);return{draw:function(a){var g,v,t;a=W.next;a!==W.cur&&(a?C.bindFramebuffer(36160,a.framebuffer):C.bindFramebuffer(36160,null),W.cur=a);if(y.dirty){var m;a=d.dither;a!==y.dither&&(a?C.enable(3024):C.disable(3024),y.dither=a);a=d.blend_enable;
a!==y.blend_enable&&(a?C.enable(3042):C.disable(3042),y.blend_enable=a);a=z[0];v=z[1];t=z[2];m=z[3];if(a!==ia[0]||v!==ia[1]||t!==ia[2]||m!==ia[3])C.blendColor(a,v,t,m),ia[0]=a,ia[1]=v,ia[2]=t,ia[3]=m;a=za[0];v=za[1];if(a!==X[0]||v!==X[1])C.blendEquationSeparate(a,v),X[0]=a,X[1]=v;a=ea[0];v=ea[1];t=ea[2];m=ea[3];if(a!==T[0]||v!==T[1]||t!==T[2]||m!==T[3])C.blendFuncSeparate(a,v,t,m),T[0]=a,T[1]=v,T[2]=t,T[3]=m;a=d.depth_enable;a!==y.depth_enable&&(a?C.enable(2929):C.disable(2929),y.depth_enable=a);
a=d.depth_func;a!==y.depth_func&&(C.depthFunc(a),y.depth_func=a);a=l[0];v=l[1];if(a!==M[0]||v!==M[1])C.depthRange(a,v),M[0]=a,M[1]=v;a=d.depth_mask;a!==y.depth_mask&&(C.depthMask(a),y.depth_mask=a);a=S[0];v=S[1];t=S[2];m=S[3];if(a!==A[0]||v!==A[1]||t!==A[2]||m!==A[3])C.colorMask(a,v,t,m),A[0]=a,A[1]=v,A[2]=t,A[3]=m;a=d.cull_enable;a!==y.cull_enable&&(a?C.enable(2884):C.disable(2884),y.cull_enable=a);a=d.cull_face;a!==y.cull_face&&(C.cullFace(a),y.cull_face=a);a=d.frontFace;a!==y.frontFace&&(C.frontFace(a),
y.frontFace=a);a=d.lineWidth;a!==y.lineWidth&&(C.lineWidth(a),y.lineWidth=a);a=d.polygonOffset_enable;a!==y.polygonOffset_enable&&(a?C.enable(32823):C.disable(32823),y.polygonOffset_enable=a);a=N[0];v=N[1];if(a!==wa[0]||v!==wa[1])C.polygonOffset(a,v),wa[0]=a,wa[1]=v;a=d.sample_alpha;a!==y.sample_alpha&&(a?C.enable(32926):C.disable(32926),y.sample_alpha=a);a=d.sample_enable;a!==y.sample_enable&&(a?C.enable(32928):C.disable(32928),y.sample_enable=a);a=na[0];v=na[1];if(a!==n[0]||v!==n[1])C.sampleCoverage(a,
v),n[0]=a,n[1]=v;a=d.stencil_enable;a!==y.stencil_enable&&(a?C.enable(2960):C.disable(2960),y.stencil_enable=a);a=d.stencil_mask;a!==y.stencil_mask&&(C.stencilMask(a),y.stencil_mask=a);a=O[0];v=O[1];t=O[2];if(a!==la[0]||v!==la[1]||t!==la[2])C.stencilFunc(a,v,t),la[0]=a,la[1]=v,la[2]=t;a=Ca[0];v=Ca[1];t=Ca[2];m=Ca[3];if(a!==fa[0]||v!==fa[1]||t!==fa[2]||m!==fa[3])C.stencilOpSeparate(a,v,t,m),fa[0]=a,fa[1]=v,fa[2]=t,fa[3]=m;a=qa[0];v=qa[1];t=qa[2];m=qa[3];if(a!==Da[0]||v!==Da[1]||t!==Da[2]||m!==Da[3])C.stencilOpSeparate(a,
v,t,m),Da[0]=a,Da[1]=v,Da[2]=t,Da[3]=m;a=d.scissor_enable;a!==y.scissor_enable&&(a?C.enable(3089):C.disable(3089),y.scissor_enable=a);a=H[0];v=H[1];t=H[2];m=H[3];if(a!==ba[0]||v!==ba[1]||t!==ba[2]||m!==ba[3])C.scissor(a,v,t,m),ba[0]=a,ba[1]=v,ba[2]=t,ba[3]=m;a=Ea[0];v=Ea[1];t=Ea[2];m=Ea[3];if(a!==ka[0]||v!==ka[1]||t!==ka[2]||m!==ka[3])C.viewport(a,v,t,m),ka[0]=a,ka[1]=v,ka[2]=t,ka[3]=m;y.dirty=!1}if(a=y.profile)g=performance.now(),J.count++;C.useProgram(h.program);V.setVAO(null);v=c.location;t=p[v];
t.buffer||C.enableVertexAttribArray(v);if(t.type!==k.dtype||3!==t.size||t.buffer!==k||!1!==t.normalized||0!==t.offset||0!==t.stride)C.bindBuffer(34962,k.buffer),C.vertexAttribPointer(v,3,k.dtype,!1,0,0),t.type=k.dtype,t.size=3,t.buffer=k,t.normalized=!1,t.offset=0,t.stride=0;v=ga.location;t=p[v];t.buffer||C.enableVertexAttribArray(v);if(t.type!==q.dtype||3!==t.size||t.buffer!==q||!1!==t.normalized||0!==t.offset||0!==t.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(v,3,q.dtype,!1,0,0),t.type=
q.dtype,t.size=3,t.buffer=q,t.normalized=!1,t.offset=0,t.stride=0;v=b[5];E(v)&&16===v.length||Z.commandRaise(e,G);C.uniformMatrix4fv(f.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(oa[0]=v[0],oa[1]=v[1],oa[2]=v[2],oa[3]=v[3],oa[4]=v[4],oa[5]=v[5],oa[6]=v[6],oa[7]=v[7],oa[8]=v[8],oa[9]=v[9],oa[10]=v[10],oa[11]=v[11],oa[12]=v[12],oa[13]=v[13],oa[14]=v[14],oa[15]=v[15],oa));v=b[8];E(v)&&16===v.length||Z.commandRaise(B,G);C.uniformMatrix4fv(L.location,!1,Array.isArray(v)||v instanceof Float32Array?
v:(Aa[0]=v[0],Aa[1]=v[1],Aa[2]=v[2],Aa[3]=v[3],Aa[4]=v[4],Aa[5]=v[5],Aa[6]=v[6],Aa[7]=v[7],Aa[8]=v[8],Aa[9]=v[9],Aa[10]=v[10],Aa[11]=v[11],Aa[12]=v[12],Aa[13]=v[13],Aa[14]=v[14],Aa[15]=v[15],Aa));D&&C.bindBuffer(34963,D.buffer.buffer);v=D.primType;t=D.vertCount-0;0<=t||Z.commandRaise(F,G);t&&(C.drawElements(v,t,D.type,0<<(D.type-5121>>1)),V.setVAO(null),a&&(J.cpuTime+=performance.now()-g))},scope:function(b,a,c){var d,e,f,l,h,n,p,u,x,z,A,C,E,O,D,H,B,fa,L,F,M,N,P,R,S,T,qa,Ca,ma,ga,W,X;if(d=y.profile)e=
performance.now(),J.count++;f=g.elements;g.elements=U;l=g.offset;g.offset=0;h=U.vertCount-0;0<=h||Z.commandRaise(w,G);n=g.count;g.count=h;p=U.primType;h=g.primitive;g.primitive=p;p=m.buffer;m.buffer=q;u=m.divisor;m.divisor=0;x=m.normalized;m.normalized=!1;z=m.offset;m.offset=0;A=m.size;m.size=0;C=m.state;m.state=1;E=m.stride;m.stride=0;O=m.type;m.type=q.dtype;D=m.w;m.w=0;H=m.x;m.x=0;B=m.y;m.y=0;fa=m.z;m.z=0;L=r.buffer;r.buffer=k;F=r.divisor;r.divisor=0;M=r.normalized;r.normalized=!1;N=r.offset;r.offset=
0;P=r.size;r.size=0;R=r.state;r.state=1;S=r.stride;r.stride=0;T=r.type;r.type=k.dtype;qa=r.w;r.w=0;Ca=r.x;r.x=0;ma=r.y;r.y=0;ga=r.z;r.z=0;W=Q.vert;Q.vert=10;X=Q.frag;Q.frag=9;a(aa,b,c);d&&(J.cpuTime+=performance.now()-e);g.elements=f;g.offset=l;g.count=n;g.primitive=h;m.buffer=p;m.divisor=u;m.normalized=x;m.offset=z;m.size=A;m.state=C;m.stride=E;m.type=O;m.w=D;m.x=H;m.y=B;m.z=fa;r.buffer=L;r.divisor=F;r.normalized=M;r.offset=N;r.size=P;r.state=R;r.stride=S;r.type=T;r.w=qa;r.x=Ca;r.y=ma;r.z=ga;Q.vert=
W;Q.frag=X},batch:function(a,e){var g,h,m;g=W.next;g!==W.cur&&(g?C.bindFramebuffer(36160,g.framebuffer):C.bindFramebuffer(36160,null),W.cur=g);if(y.dirty){var r,w;g=d.dither;g!==y.dither&&(g?C.enable(3024):C.disable(3024),y.dither=g);g=d.blend_enable;g!==y.blend_enable&&(g?C.enable(3042):C.disable(3042),y.blend_enable=g);g=z[0];m=z[1];r=z[2];w=z[3];if(g!==ia[0]||m!==ia[1]||r!==ia[2]||w!==ia[3])C.blendColor(g,m,r,w),ia[0]=g,ia[1]=m,ia[2]=r,ia[3]=w;g=za[0];m=za[1];if(g!==X[0]||m!==X[1])C.blendEquationSeparate(g,
m),X[0]=g,X[1]=m;g=ea[0];m=ea[1];r=ea[2];w=ea[3];if(g!==T[0]||m!==T[1]||r!==T[2]||w!==T[3])C.blendFuncSeparate(g,m,r,w),T[0]=g,T[1]=m,T[2]=r,T[3]=w;g=d.depth_enable;g!==y.depth_enable&&(g?C.enable(2929):C.disable(2929),y.depth_enable=g);g=d.depth_func;g!==y.depth_func&&(C.depthFunc(g),y.depth_func=g);g=l[0];m=l[1];if(g!==M[0]||m!==M[1])C.depthRange(g,m),M[0]=g,M[1]=m;g=d.depth_mask;g!==y.depth_mask&&(C.depthMask(g),y.depth_mask=g);g=S[0];m=S[1];r=S[2];w=S[3];if(g!==A[0]||m!==A[1]||r!==A[2]||w!==A[3])C.colorMask(g,
m,r,w),A[0]=g,A[1]=m,A[2]=r,A[3]=w;g=d.cull_enable;g!==y.cull_enable&&(g?C.enable(2884):C.disable(2884),y.cull_enable=g);g=d.cull_face;g!==y.cull_face&&(C.cullFace(g),y.cull_face=g);g=d.frontFace;g!==y.frontFace&&(C.frontFace(g),y.frontFace=g);g=d.lineWidth;g!==y.lineWidth&&(C.lineWidth(g),y.lineWidth=g);g=d.polygonOffset_enable;g!==y.polygonOffset_enable&&(g?C.enable(32823):C.disable(32823),y.polygonOffset_enable=g);g=N[0];m=N[1];if(g!==wa[0]||m!==wa[1])C.polygonOffset(g,m),wa[0]=g,wa[1]=m;g=d.sample_alpha;
g!==y.sample_alpha&&(g?C.enable(32926):C.disable(32926),y.sample_alpha=g);g=d.sample_enable;g!==y.sample_enable&&(g?C.enable(32928):C.disable(32928),y.sample_enable=g);g=na[0];m=na[1];if(g!==n[0]||m!==n[1])C.sampleCoverage(g,m),n[0]=g,n[1]=m;g=d.stencil_enable;g!==y.stencil_enable&&(g?C.enable(2960):C.disable(2960),y.stencil_enable=g);g=d.stencil_mask;g!==y.stencil_mask&&(C.stencilMask(g),y.stencil_mask=g);g=O[0];m=O[1];r=O[2];if(g!==la[0]||m!==la[1]||r!==la[2])C.stencilFunc(g,m,r),la[0]=g,la[1]=
m,la[2]=r;g=Ca[0];m=Ca[1];r=Ca[2];w=Ca[3];if(g!==fa[0]||m!==fa[1]||r!==fa[2]||w!==fa[3])C.stencilOpSeparate(g,m,r,w),fa[0]=g,fa[1]=m,fa[2]=r,fa[3]=w;g=qa[0];m=qa[1];r=qa[2];w=qa[3];if(g!==Da[0]||m!==Da[1]||r!==Da[2]||w!==Da[3])C.stencilOpSeparate(g,m,r,w),Da[0]=g,Da[1]=m,Da[2]=r,Da[3]=w;g=d.scissor_enable;g!==y.scissor_enable&&(g?C.enable(3089):C.disable(3089),y.scissor_enable=g);g=H[0];m=H[1];r=H[2];w=H[3];if(g!==ba[0]||m!==ba[1]||r!==ba[2]||w!==ba[3])C.scissor(g,m,r,w),ba[0]=g,ba[1]=m,ba[2]=r,ba[3]=
w;g=Ea[0];m=Ea[1];r=Ea[2];w=Ea[3];if(g!==ka[0]||m!==ka[1]||r!==ka[2]||w!==ka[3])C.viewport(g,m,r,w),ka[0]=g,ka[1]=m,ka[2]=r,ka[3]=w;y.dirty=!1}if(g=y.profile)h=performance.now(),J.count+=e;C.useProgram(da.program);V.setVAO(null);m=c.location;r=p[m];r.buffer||C.enableVertexAttribArray(m);if(r.type!==k.dtype||3!==r.size||r.buffer!==k||!1!==r.normalized||0!==r.offset||0!==r.stride)C.bindBuffer(34962,k.buffer),C.vertexAttribPointer(m,3,k.dtype,!1,0,0),r.type=k.dtype,r.size=3,r.buffer=k,r.normalized=!1,
r.offset=0,r.stride=0;m=ga.location;r=p[m];r.buffer||C.enableVertexAttribArray(m);if(r.type!==q.dtype||3!==r.size||r.buffer!==q||!1!==r.normalized||0!==r.offset||0!==r.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(m,3,q.dtype,!1,0,0),r.type=q.dtype,r.size=3,r.buffer=q,r.normalized=!1,r.offset=0,r.stride=0;m=b[5];E(m)&&16===m.length||Z.commandRaise(u,G);C.uniformMatrix4fv(f.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(Ba[0]=m[0],Ba[1]=m[1],Ba[2]=m[2],Ba[3]=m[3],Ba[4]=m[4],
Ba[5]=m[5],Ba[6]=m[6],Ba[7]=m[7],Ba[8]=m[8],Ba[9]=m[9],Ba[10]=m[10],Ba[11]=m[11],Ba[12]=m[12],Ba[13]=m[13],Ba[14]=m[14],Ba[15]=m[15],Ba));m=b[8];E(m)&&16===m.length||Z.commandRaise(P,G);C.uniformMatrix4fv(L.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(ma[0]=m[0],ma[1]=m[1],ma[2]=m[2],ma[3]=m[3],ma[4]=m[4],ma[5]=m[5],ma[6]=m[6],ma[7]=m[7],ma[8]=m[8],ma[9]=m[9],ma[10]=m[10],ma[11]=m[11],ma[12]=m[12],ma[13]=m[13],ma[14]=m[14],ma[15]=m[15],ma));x&&C.bindBuffer(34963,x.buffer.buffer);r=x.primType;
w=x.vertCount-0;0<=w||Z.commandRaise(R,G);for(m=0;m<e;++m)w&&C.drawElements(r,w,x.type,0<<(x.type-5121>>1));V.setVAO(null);g&&(J.cpuTime+=performance.now()-h)}}},"$14,angle,color,position":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P){var x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,V,z,ia,za,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa;x=a.attributes;R=a.context;ga=a.current;c=a.draw;f=a.elements;L=a.framebuffer;p=a.gl;aa=a.isArrayLike;y=a.next;g=a.shader;W=a.uniforms;C=a.vao;E=y.blend_color;d=ga.blend_color;Q=y.blend_equation;
b=ga.blend_equation;V=y.blend_func;z=ga.blend_func;ia=y.colorMask;za=ga.colorMask;X=y.depth_range;ea=ga.depth_range;T=y.polygonOffset_offset;S=ga.polygonOffset_offset;A=y.sample_coverage;l=ga.sample_coverage;M=y.scissor_box;N=ga.scissor_box;wa=y.stencil_func;na=ga.stencil_func;n=y.stencil_opBack;H=ga.stencil_opBack;ba=y.stencil_opFront;O=ga.stencil_opFront;la=y.viewport;qa=ga.viewport;return{draw:function(a){var g,m,r,w;g=L.next;g!==L.cur&&(g?p.bindFramebuffer(36160,g.framebuffer):p.bindFramebuffer(36160,
null),L.cur=g);if(ga.dirty){var D;g=y.dither;g!==ga.dither&&(g?p.enable(3024):p.disable(3024),ga.dither=g);g=y.blend_enable;g!==ga.blend_enable&&(g?p.enable(3042):p.disable(3042),ga.blend_enable=g);g=E[0];r=E[1];w=E[2];D=E[3];if(g!==d[0]||r!==d[1]||w!==d[2]||D!==d[3])p.blendColor(g,r,w,D),d[0]=g,d[1]=r,d[2]=w,d[3]=D;g=Q[0];r=Q[1];if(g!==b[0]||r!==b[1])p.blendEquationSeparate(g,r),b[0]=g,b[1]=r;g=V[0];r=V[1];w=V[2];D=V[3];if(g!==z[0]||r!==z[1]||w!==z[2]||D!==z[3])p.blendFuncSeparate(g,r,w,D),z[0]=
g,z[1]=r,z[2]=w,z[3]=D;g=y.depth_func;g!==ga.depth_func&&(p.depthFunc(g),ga.depth_func=g);g=X[0];r=X[1];if(g!==ea[0]||r!==ea[1])p.depthRange(g,r),ea[0]=g,ea[1]=r;g=y.depth_mask;g!==ga.depth_mask&&(p.depthMask(g),ga.depth_mask=g);g=ia[0];r=ia[1];w=ia[2];D=ia[3];if(g!==za[0]||r!==za[1]||w!==za[2]||D!==za[3])p.colorMask(g,r,w,D),za[0]=g,za[1]=r,za[2]=w,za[3]=D;g=y.cull_enable;g!==ga.cull_enable&&(g?p.enable(2884):p.disable(2884),ga.cull_enable=g);g=y.cull_face;g!==ga.cull_face&&(p.cullFace(g),ga.cull_face=
g);g=y.frontFace;g!==ga.frontFace&&(p.frontFace(g),ga.frontFace=g);g=y.lineWidth;g!==ga.lineWidth&&(p.lineWidth(g),ga.lineWidth=g);g=y.polygonOffset_enable;g!==ga.polygonOffset_enable&&(g?p.enable(32823):p.disable(32823),ga.polygonOffset_enable=g);g=T[0];r=T[1];if(g!==S[0]||r!==S[1])p.polygonOffset(g,r),S[0]=g,S[1]=r;g=y.sample_alpha;g!==ga.sample_alpha&&(g?p.enable(32926):p.disable(32926),ga.sample_alpha=g);g=y.sample_enable;g!==ga.sample_enable&&(g?p.enable(32928):p.disable(32928),ga.sample_enable=
g);g=A[0];r=A[1];if(g!==l[0]||r!==l[1])p.sampleCoverage(g,r),l[0]=g,l[1]=r;g=y.stencil_enable;g!==ga.stencil_enable&&(g?p.enable(2960):p.disable(2960),ga.stencil_enable=g);g=y.stencil_mask;g!==ga.stencil_mask&&(p.stencilMask(g),ga.stencil_mask=g);g=wa[0];r=wa[1];w=wa[2];if(g!==na[0]||r!==na[1]||w!==na[2])p.stencilFunc(g,r,w),na[0]=g,na[1]=r,na[2]=w;g=ba[0];r=ba[1];w=ba[2];D=ba[3];if(g!==O[0]||r!==O[1]||w!==O[2]||D!==O[3])p.stencilOpSeparate(g,r,w,D),O[0]=g,O[1]=r,O[2]=w,O[3]=D;g=n[0];r=n[1];w=n[2];
D=n[3];if(g!==H[0]||r!==H[1]||w!==H[2]||D!==H[3])p.stencilOpSeparate(g,r,w,D),H[0]=g,H[1]=r,H[2]=w,H[3]=D;g=y.scissor_enable;g!==ga.scissor_enable&&(g?p.enable(3089):p.disable(3089),ga.scissor_enable=g);g=M[0];r=M[1];w=M[2];D=M[3];if(g!==N[0]||r!==N[1]||w!==N[2]||D!==N[3])p.scissor(g,r,w,D),N[0]=g,N[1]=r,N[2]=w,N[3]=D;g=la[0];r=la[1];w=la[2];D=la[3];if(g!==qa[0]||r!==qa[1]||w!==qa[2]||D!==qa[3])p.viewport(g,r,w,D),qa[0]=g,qa[1]=r,qa[2]=w,qa[3]=D}p.disable(2929);ga.depth_enable=!1;if(g=ga.profile)m=
performance.now(),J.count++;p.useProgram(h.program);C.setVAO(null);r=P.location;w=x[r];w.buffer||p.enableVertexAttribArray(r);if(w.type!==k.dtype||2!==w.size||w.buffer!==k||!1!==w.normalized||0!==w.offset||0!==w.stride)p.bindBuffer(34962,k.buffer),p.vertexAttribPointer(r,2,k.dtype,!1,0,0),w.type=k.dtype,w.size=2,w.buffer=k,w.normalized=!1,w.offset=0,w.stride=0;r=q.call(this,R,a,0);"number"!==typeof r&&Z.commandRaise(e,G);p.uniform1f(da.location,r);a=a.color;aa(a)&&4===a.length||Z.commandRaise(B,G);
p.uniform4f(u.location,a[0],a[1],a[2],a[3]);(a=c.elements)?p.bindBuffer(34963,a.buffer.buffer):C.currentVAO&&(a=f.getElements(C.currentVAO.elements))&&p.bindBuffer(34963,a.buffer.buffer);r=c.primitive;w=c.offset;a?p.drawElements(r,3,a.type,w<<(a.type-5121>>1)):p.drawArrays(r,w,3);ga.dirty=!0;C.setVAO(null);g&&(J.cpuTime+=performance.now()-m)},scope:function(b,a,d){var e,f,l,h,n,q,p,m,r,t,u,x,w,z,A,C,E,O,H,G;e=y.depth_enable;y.depth_enable=!1;if(f=ga.profile)l=performance.now(),J.count++;h=c.count;
c.count=3;n=D.call(this,R,b,d);q=W[3];W[3]=n;p=b.color;n=W[4];W[4]=p;p=F.buffer;F.buffer=k;m=F.divisor;F.divisor=0;r=F.normalized;F.normalized=!1;t=F.offset;F.offset=0;u=F.size;F.size=0;x=F.state;F.state=1;w=F.stride;F.stride=0;z=F.type;F.type=k.dtype;A=F.w;F.w=0;C=F.x;F.x=0;E=F.y;F.y=0;O=F.z;F.z=0;H=g.vert;g.vert=2;G=g.frag;g.frag=1;ga.dirty=!0;a(R,b,d);y.depth_enable=e;f&&(J.cpuTime+=performance.now()-l);c.count=h;W[3]=q;W[4]=n;F.buffer=p;F.divisor=m;F.normalized=r;F.offset=t;F.size=u;F.state=x;
F.stride=w;F.type=z;F.w=A;F.x=C;F.y=E;F.z=O;g.vert=H;g.frag=G;ga.dirty=!0},batch:function(a,e){var g,h,q,D;g=L.next;g!==L.cur&&(g?p.bindFramebuffer(36160,g.framebuffer):p.bindFramebuffer(36160,null),L.cur=g);if(ga.dirty){var B,F,ma;g=y.dither;g!==ga.dither&&(g?p.enable(3024):p.disable(3024),ga.dither=g);g=y.blend_enable;g!==ga.blend_enable&&(g?p.enable(3042):p.disable(3042),ga.blend_enable=g);g=E[0];B=E[1];F=E[2];ma=E[3];if(g!==d[0]||B!==d[1]||F!==d[2]||ma!==d[3])p.blendColor(g,B,F,ma),d[0]=g,d[1]=
B,d[2]=F,d[3]=ma;g=Q[0];B=Q[1];if(g!==b[0]||B!==b[1])p.blendEquationSeparate(g,B),b[0]=g,b[1]=B;g=V[0];B=V[1];F=V[2];ma=V[3];if(g!==z[0]||B!==z[1]||F!==z[2]||ma!==z[3])p.blendFuncSeparate(g,B,F,ma),z[0]=g,z[1]=B,z[2]=F,z[3]=ma;g=y.depth_func;g!==ga.depth_func&&(p.depthFunc(g),ga.depth_func=g);g=X[0];B=X[1];if(g!==ea[0]||B!==ea[1])p.depthRange(g,B),ea[0]=g,ea[1]=B;g=y.depth_mask;g!==ga.depth_mask&&(p.depthMask(g),ga.depth_mask=g);g=ia[0];B=ia[1];F=ia[2];ma=ia[3];if(g!==za[0]||B!==za[1]||F!==za[2]||
ma!==za[3])p.colorMask(g,B,F,ma),za[0]=g,za[1]=B,za[2]=F,za[3]=ma;g=y.cull_enable;g!==ga.cull_enable&&(g?p.enable(2884):p.disable(2884),ga.cull_enable=g);g=y.cull_face;g!==ga.cull_face&&(p.cullFace(g),ga.cull_face=g);g=y.frontFace;g!==ga.frontFace&&(p.frontFace(g),ga.frontFace=g);g=y.lineWidth;g!==ga.lineWidth&&(p.lineWidth(g),ga.lineWidth=g);g=y.polygonOffset_enable;g!==ga.polygonOffset_enable&&(g?p.enable(32823):p.disable(32823),ga.polygonOffset_enable=g);g=T[0];B=T[1];if(g!==S[0]||B!==S[1])p.polygonOffset(g,
B),S[0]=g,S[1]=B;g=y.sample_alpha;g!==ga.sample_alpha&&(g?p.enable(32926):p.disable(32926),ga.sample_alpha=g);g=y.sample_enable;g!==ga.sample_enable&&(g?p.enable(32928):p.disable(32928),ga.sample_enable=g);g=A[0];B=A[1];if(g!==l[0]||B!==l[1])p.sampleCoverage(g,B),l[0]=g,l[1]=B;g=y.stencil_enable;g!==ga.stencil_enable&&(g?p.enable(2960):p.disable(2960),ga.stencil_enable=g);g=y.stencil_mask;g!==ga.stencil_mask&&(p.stencilMask(g),ga.stencil_mask=g);g=wa[0];B=wa[1];F=wa[2];if(g!==na[0]||B!==na[1]||F!==
na[2])p.stencilFunc(g,B,F),na[0]=g,na[1]=B,na[2]=F;g=ba[0];B=ba[1];F=ba[2];ma=ba[3];if(g!==O[0]||B!==O[1]||F!==O[2]||ma!==O[3])p.stencilOpSeparate(g,B,F,ma),O[0]=g,O[1]=B,O[2]=F,O[3]=ma;g=n[0];B=n[1];F=n[2];ma=n[3];if(g!==H[0]||B!==H[1]||F!==H[2]||ma!==H[3])p.stencilOpSeparate(g,B,F,ma),H[0]=g,H[1]=B,H[2]=F,H[3]=ma;g=y.scissor_enable;g!==ga.scissor_enable&&(g?p.enable(3089):p.disable(3089),ga.scissor_enable=g);g=M[0];B=M[1];F=M[2];ma=M[3];if(g!==N[0]||B!==N[1]||F!==N[2]||ma!==N[3])p.scissor(g,B,F,
ma),N[0]=g,N[1]=B,N[2]=F,N[3]=ma;g=la[0];B=la[1];F=la[2];ma=la[3];if(g!==qa[0]||B!==qa[1]||F!==qa[2]||ma!==qa[3])p.viewport(g,B,F,ma),qa[0]=g,qa[1]=B,qa[2]=F,qa[3]=ma}p.disable(2929);ga.depth_enable=!1;if(g=ga.profile)h=performance.now(),J.count+=e;p.useProgram(U.program);C.setVAO(null);B=P.location;F=x[B];F.buffer||p.enableVertexAttribArray(B);if(F.type!==k.dtype||2!==F.size||F.buffer!==k||!1!==F.normalized||0!==F.offset||0!==F.stride)p.bindBuffer(34962,k.buffer),p.vertexAttribPointer(B,2,k.dtype,
!1,0,0),F.type=k.dtype,F.size=2,F.buffer=k,F.normalized=!1,F.offset=0,F.stride=0;q=w.call(this,R,D,q);"number"!==typeof q&&Z.commandRaise(m,G);p.uniform1f(da.location,q);(B=c.elements)?p.bindBuffer(34963,B.buffer.buffer):C.currentVAO&&(B=f.getElements(C.currentVAO.elements))&&p.bindBuffer(34963,B.buffer.buffer);F=c.primitive;ma=c.offset;for(q=0;q<e;++q){D=a[q];var W,Ta,v,t,K,ua,va;W=D.color;aa(W)&&4===W.length||Z.commandRaise(r,G);D=W[0];v=W[1];K=W[2];W=W[3];q&&Ta===D&&t===v&&ua===K&&va===W||(Ta=
D,t=v,ua=K,va=W,p.uniform4f(u.location,D,v,K,W));B?p.drawElements(F,3,B.type,ma<<(B.type-5121>>1)):p.drawArrays(F,ma,3)}ga.dirty=!0;C.setVAO(null);g&&(J.cpuTime+=performance.now()-h)}}},"$13,color,position":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da){var u,P,x,R,ga,c,f,L,p,aa,y,g,W,C,E,d,Q,b,V,z,ia,za,X,ea,T,S,A,l,M,N,wa,na,n,H,ba;u=a.attributes;P=a.context;x=a.current;R=a.draw;ga=a.framebuffer;c=a.gl;f=a.next;L=a.shader;p=a.uniforms;aa=a.vao;y=f.blend_color;g=x.blend_color;W=f.blend_equation;C=x.blend_equation;
E=f.blend_func;d=x.blend_func;Q=f.colorMask;b=x.colorMask;V=f.depth_range;z=x.depth_range;ia=f.polygonOffset_offset;za=x.polygonOffset_offset;X=f.sample_coverage;ea=x.sample_coverage;T=f.scissor_box;S=x.scissor_box;A=f.stencil_func;l=x.stencil_func;M=f.stencil_opBack;N=x.stencil_opBack;wa=f.stencil_opFront;na=x.stencil_opFront;n=f.viewport;H=x.viewport;ba=[1,0,0,1];return{draw:function(a){var p,m,w;a=ga.next;a!==ga.cur&&(a?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null),ga.cur=
a);if(x.dirty){var B;a=f.dither;a!==x.dither&&(a?c.enable(3024):c.disable(3024),x.dither=a);a=f.blend_enable;a!==x.blend_enable&&(a?c.enable(3042):c.disable(3042),x.blend_enable=a);a=y[0];m=y[1];w=y[2];B=y[3];if(a!==g[0]||m!==g[1]||w!==g[2]||B!==g[3])c.blendColor(a,m,w,B),g[0]=a,g[1]=m,g[2]=w,g[3]=B;a=W[0];m=W[1];if(a!==C[0]||m!==C[1])c.blendEquationSeparate(a,m),C[0]=a,C[1]=m;a=E[0];m=E[1];w=E[2];B=E[3];if(a!==d[0]||m!==d[1]||w!==d[2]||B!==d[3])c.blendFuncSeparate(a,m,w,B),d[0]=a,d[1]=m,d[2]=w,d[3]=
B;a=f.depth_enable;a!==x.depth_enable&&(a?c.enable(2929):c.disable(2929),x.depth_enable=a);a=f.depth_func;a!==x.depth_func&&(c.depthFunc(a),x.depth_func=a);a=V[0];m=V[1];if(a!==z[0]||m!==z[1])c.depthRange(a,m),z[0]=a,z[1]=m;a=f.depth_mask;a!==x.depth_mask&&(c.depthMask(a),x.depth_mask=a);a=Q[0];m=Q[1];w=Q[2];B=Q[3];if(a!==b[0]||m!==b[1]||w!==b[2]||B!==b[3])c.colorMask(a,m,w,B),b[0]=a,b[1]=m,b[2]=w,b[3]=B;a=f.cull_enable;a!==x.cull_enable&&(a?c.enable(2884):c.disable(2884),x.cull_enable=a);a=f.cull_face;
a!==x.cull_face&&(c.cullFace(a),x.cull_face=a);a=f.frontFace;a!==x.frontFace&&(c.frontFace(a),x.frontFace=a);a=f.polygonOffset_enable;a!==x.polygonOffset_enable&&(a?c.enable(32823):c.disable(32823),x.polygonOffset_enable=a);a=ia[0];m=ia[1];if(a!==za[0]||m!==za[1])c.polygonOffset(a,m),za[0]=a,za[1]=m;a=f.sample_alpha;a!==x.sample_alpha&&(a?c.enable(32926):c.disable(32926),x.sample_alpha=a);a=f.sample_enable;a!==x.sample_enable&&(a?c.enable(32928):c.disable(32928),x.sample_enable=a);a=X[0];m=X[1];if(a!==
ea[0]||m!==ea[1])c.sampleCoverage(a,m),ea[0]=a,ea[1]=m;a=f.stencil_enable;a!==x.stencil_enable&&(a?c.enable(2960):c.disable(2960),x.stencil_enable=a);a=f.stencil_mask;a!==x.stencil_mask&&(c.stencilMask(a),x.stencil_mask=a);a=A[0];m=A[1];w=A[2];if(a!==l[0]||m!==l[1]||w!==l[2])c.stencilFunc(a,m,w),l[0]=a,l[1]=m,l[2]=w;a=wa[0];m=wa[1];w=wa[2];B=wa[3];if(a!==na[0]||m!==na[1]||w!==na[2]||B!==na[3])c.stencilOpSeparate(a,m,w,B),na[0]=a,na[1]=m,na[2]=w,na[3]=B;a=M[0];m=M[1];w=M[2];B=M[3];if(a!==N[0]||m!==
N[1]||w!==N[2]||B!==N[3])c.stencilOpSeparate(a,m,w,B),N[0]=a,N[1]=m,N[2]=w,N[3]=B;a=f.scissor_enable;a!==x.scissor_enable&&(a?c.enable(3089):c.disable(3089),x.scissor_enable=a);a=T[0];m=T[1];w=T[2];B=T[3];if(a!==S[0]||m!==S[1]||w!==S[2]||B!==S[3])c.scissor(a,m,w,B),S[0]=a,S[1]=m,S[2]=w,S[3]=B;a=n[0];m=n[1];w=n[2];B=n[3];if(a!==H[0]||m!==H[1]||w!==H[2]||B!==H[3])c.viewport(a,m,w,B),H[0]=a,H[1]=m,H[2]=w,H[3]=B}c.lineWidth(1);x.lineWidth=1;if(a=x.profile)p=performance.now(),J.count++;c.useProgram(h.program);
aa.setVAO(null);m=da.location;w=u[m];w.buffer||c.enableVertexAttribArray(m);if(w.type!==k.dtype||2!==w.size||w.buffer!==k||!1!==w.normalized||0!==w.offset||0!==w.stride)c.bindBuffer(34962,k.buffer),c.vertexAttribPointer(m,2,k.dtype,!1,0,0),w.type=k.dtype,w.size=2,w.buffer=k,w.normalized=!1,w.offset=0,w.stride=0;c.uniform4f(r.location,1,0,0,1);q&&c.bindBuffer(34963,q.buffer.buffer);m=q.primType;w=q.vertCount-0;0<=w||Z.commandRaise(e,G);w&&(c.drawElements(m,w,q.type,0<<(q.type-5121>>1)),x.dirty=!0,
aa.setVAO(null),a&&(J.cpuTime+=performance.now()-p))},scope:function(b,a,c){var d,e,g,l,h,q,n,m,r,u,w,v,t,y,z,A,C,E,H,I,M,N;d=f.lineWidth;f.lineWidth=1;if(e=x.profile)g=performance.now(),J.count++;l=R.elements;R.elements=B;h=R.offset;R.offset=0;q=B.vertCount-0;0<=q||Z.commandRaise(D,G);n=R.count;R.count=q;m=B.primType;q=R.primitive;R.primitive=m;m=p[3];p[3]=ba;r=F.buffer;F.buffer=k;u=F.divisor;F.divisor=0;w=F.normalized;F.normalized=!1;v=F.offset;F.offset=0;t=F.size;F.size=0;y=F.state;F.state=1;z=
F.stride;F.stride=0;A=F.type;F.type=k.dtype;C=F.w;F.w=0;E=F.x;F.x=0;H=F.y;F.y=0;I=F.z;F.z=0;M=L.vert;L.vert=2;N=L.frag;L.frag=1;x.dirty=!0;a(P,b,c);f.lineWidth=d;e&&(J.cpuTime+=performance.now()-g);R.elements=l;R.offset=h;R.count=n;R.primitive=q;p[3]=m;F.buffer=r;F.divisor=u;F.normalized=w;F.offset=v;F.size=t;F.state=y;F.stride=z;F.type=A;F.w=C;F.x=E;F.y=H;F.z=I;L.vert=M;L.frag=N;x.dirty=!0},batch:function(a,e){var h,q,p;h=ga.next;h!==ga.cur&&(h?c.bindFramebuffer(36160,h.framebuffer):c.bindFramebuffer(36160,
null),ga.cur=h);if(x.dirty){var B,D;h=f.dither;h!==x.dither&&(h?c.enable(3024):c.disable(3024),x.dither=h);h=f.blend_enable;h!==x.blend_enable&&(h?c.enable(3042):c.disable(3042),x.blend_enable=h);h=y[0];p=y[1];B=y[2];D=y[3];if(h!==g[0]||p!==g[1]||B!==g[2]||D!==g[3])c.blendColor(h,p,B,D),g[0]=h,g[1]=p,g[2]=B,g[3]=D;h=W[0];p=W[1];if(h!==C[0]||p!==C[1])c.blendEquationSeparate(h,p),C[0]=h,C[1]=p;h=E[0];p=E[1];B=E[2];D=E[3];if(h!==d[0]||p!==d[1]||B!==d[2]||D!==d[3])c.blendFuncSeparate(h,p,B,D),d[0]=h,
d[1]=p,d[2]=B,d[3]=D;h=f.depth_enable;h!==x.depth_enable&&(h?c.enable(2929):c.disable(2929),x.depth_enable=h);h=f.depth_func;h!==x.depth_func&&(c.depthFunc(h),x.depth_func=h);h=V[0];p=V[1];if(h!==z[0]||p!==z[1])c.depthRange(h,p),z[0]=h,z[1]=p;h=f.depth_mask;h!==x.depth_mask&&(c.depthMask(h),x.depth_mask=h);h=Q[0];p=Q[1];B=Q[2];D=Q[3];if(h!==b[0]||p!==b[1]||B!==b[2]||D!==b[3])c.colorMask(h,p,B,D),b[0]=h,b[1]=p,b[2]=B,b[3]=D;h=f.cull_enable;h!==x.cull_enable&&(h?c.enable(2884):c.disable(2884),x.cull_enable=
h);h=f.cull_face;h!==x.cull_face&&(c.cullFace(h),x.cull_face=h);h=f.frontFace;h!==x.frontFace&&(c.frontFace(h),x.frontFace=h);h=f.polygonOffset_enable;h!==x.polygonOffset_enable&&(h?c.enable(32823):c.disable(32823),x.polygonOffset_enable=h);h=ia[0];p=ia[1];if(h!==za[0]||p!==za[1])c.polygonOffset(h,p),za[0]=h,za[1]=p;h=f.sample_alpha;h!==x.sample_alpha&&(h?c.enable(32926):c.disable(32926),x.sample_alpha=h);h=f.sample_enable;h!==x.sample_enable&&(h?c.enable(32928):c.disable(32928),x.sample_enable=h);
h=X[0];p=X[1];if(h!==ea[0]||p!==ea[1])c.sampleCoverage(h,p),ea[0]=h,ea[1]=p;h=f.stencil_enable;h!==x.stencil_enable&&(h?c.enable(2960):c.disable(2960),x.stencil_enable=h);h=f.stencil_mask;h!==x.stencil_mask&&(c.stencilMask(h),x.stencil_mask=h);h=A[0];p=A[1];B=A[2];if(h!==l[0]||p!==l[1]||B!==l[2])c.stencilFunc(h,p,B),l[0]=h,l[1]=p,l[2]=B;h=wa[0];p=wa[1];B=wa[2];D=wa[3];if(h!==na[0]||p!==na[1]||B!==na[2]||D!==na[3])c.stencilOpSeparate(h,p,B,D),na[0]=h,na[1]=p,na[2]=B,na[3]=D;h=M[0];p=M[1];B=M[2];D=
M[3];if(h!==N[0]||p!==N[1]||B!==N[2]||D!==N[3])c.stencilOpSeparate(h,p,B,D),N[0]=h,N[1]=p,N[2]=B,N[3]=D;h=f.scissor_enable;h!==x.scissor_enable&&(h?c.enable(3089):c.disable(3089),x.scissor_enable=h);h=T[0];p=T[1];B=T[2];D=T[3];if(h!==S[0]||p!==S[1]||B!==S[2]||D!==S[3])c.scissor(h,p,B,D),S[0]=h,S[1]=p,S[2]=B,S[3]=D;h=n[0];p=n[1];B=n[2];D=n[3];if(h!==H[0]||p!==H[1]||B!==H[2]||D!==H[3])c.viewport(h,p,B,D),H[0]=h,H[1]=p,H[2]=B,H[3]=D}c.lineWidth(1);x.lineWidth=1;if(h=x.profile)q=performance.now(),J.count+=
e;c.useProgram(U.program);aa.setVAO(null);p=da.location;B=u[p];B.buffer||c.enableVertexAttribArray(p);if(B.type!==k.dtype||2!==B.size||B.buffer!==k||!1!==B.normalized||0!==B.offset||0!==B.stride)c.bindBuffer(34962,k.buffer),c.vertexAttribPointer(p,2,k.dtype,!1,0,0),B.type=k.dtype,B.size=2,B.buffer=k,B.normalized=!1,B.offset=0,B.stride=0;c.uniform4f(r.location,1,0,0,1);w&&c.bindBuffer(34963,w.buffer.buffer);B=w.primType;D=w.vertCount-0;0<=D||Z.commandRaise(m,G);for(p=0;p<e;++p)D&&c.drawElements(B,
D,w.type,0<<(w.type-5121>>1));x.dirty=!0;aa.setVAO(null);h&&(J.cpuTime+=performance.now()-q)}}},"$20,mouse,position,t,texture":function(a,Z,G,J,h,k,q,e,B,D,F,U,w,m,r,da,u,P,x,R,ga,c,f,L,p){var aa,y,g,W,C,E,d,Q,b,V,z,ia,za,X,ea,T,S,A,l,M,N,wa,na,n,H,ba,O,la,qa,Da,Ca,fa,Ea,ka,oa,Aa;aa=a.attributes;y=a.context;g=a.current;W=a.draw;C=a.elements;E=a.framebuffer;d=a.gl;Q=a.isArrayLike;b=a.next;V=a.shader;z=a.uniforms;ia=a.vao;za=b.blend_color;X=g.blend_color;ea=b.blend_equation;T=g.blend_equation;S=b.blend_func;
A=g.blend_func;l=b.colorMask;M=g.colorMask;N=b.depth_range;wa=g.depth_range;na=b.polygonOffset_offset;n=g.polygonOffset_offset;H=b.sample_coverage;ba=g.sample_coverage;O=b.scissor_box;la=g.scissor_box;qa=b.stencil_func;Da=g.stencil_func;Ca=b.stencil_opBack;fa=g.stencil_opBack;Ea=b.stencil_opFront;ka=g.stencil_opFront;oa=b.viewport;Aa=g.viewport;return{draw:function(a){var m,r,u,v;m=E.next;m!==E.cur&&(m?d.bindFramebuffer(36160,m.framebuffer):d.bindFramebuffer(36160,null),E.cur=m);if(g.dirty){var t;
m=b.dither;m!==g.dither&&(m?d.enable(3024):d.disable(3024),g.dither=m);m=b.blend_enable;m!==g.blend_enable&&(m?d.enable(3042):d.disable(3042),g.blend_enable=m);m=za[0];u=za[1];v=za[2];t=za[3];if(m!==X[0]||u!==X[1]||v!==X[2]||t!==X[3])d.blendColor(m,u,v,t),X[0]=m,X[1]=u,X[2]=v,X[3]=t;m=ea[0];u=ea[1];if(m!==T[0]||u!==T[1])d.blendEquationSeparate(m,u),T[0]=m,T[1]=u;m=S[0];u=S[1];v=S[2];t=S[3];if(m!==A[0]||u!==A[1]||v!==A[2]||t!==A[3])d.blendFuncSeparate(m,u,v,t),A[0]=m,A[1]=u,A[2]=v,A[3]=t;m=b.depth_enable;
m!==g.depth_enable&&(m?d.enable(2929):d.disable(2929),g.depth_enable=m);m=b.depth_func;m!==g.depth_func&&(d.depthFunc(m),g.depth_func=m);m=N[0];u=N[1];if(m!==wa[0]||u!==wa[1])d.depthRange(m,u),wa[0]=m,wa[1]=u;m=b.depth_mask;m!==g.depth_mask&&(d.depthMask(m),g.depth_mask=m);m=l[0];u=l[1];v=l[2];t=l[3];if(m!==M[0]||u!==M[1]||v!==M[2]||t!==M[3])d.colorMask(m,u,v,t),M[0]=m,M[1]=u,M[2]=v,M[3]=t;m=b.cull_enable;m!==g.cull_enable&&(m?d.enable(2884):d.disable(2884),g.cull_enable=m);m=b.cull_face;m!==g.cull_face&&
(d.cullFace(m),g.cull_face=m);m=b.frontFace;m!==g.frontFace&&(d.frontFace(m),g.frontFace=m);m=b.lineWidth;m!==g.lineWidth&&(d.lineWidth(m),g.lineWidth=m);m=b.polygonOffset_enable;m!==g.polygonOffset_enable&&(m?d.enable(32823):d.disable(32823),g.polygonOffset_enable=m);m=na[0];u=na[1];if(m!==n[0]||u!==n[1])d.polygonOffset(m,u),n[0]=m,n[1]=u;m=b.sample_alpha;m!==g.sample_alpha&&(m?d.enable(32926):d.disable(32926),g.sample_alpha=m);m=b.sample_enable;m!==g.sample_enable&&(m?d.enable(32928):d.disable(32928),
g.sample_enable=m);m=H[0];u=H[1];if(m!==ba[0]||u!==ba[1])d.sampleCoverage(m,u),ba[0]=m,ba[1]=u;m=b.stencil_enable;m!==g.stencil_enable&&(m?d.enable(2960):d.disable(2960),g.stencil_enable=m);m=b.stencil_mask;m!==g.stencil_mask&&(d.stencilMask(m),g.stencil_mask=m);m=qa[0];u=qa[1];v=qa[2];if(m!==Da[0]||u!==Da[1]||v!==Da[2])d.stencilFunc(m,u,v),Da[0]=m,Da[1]=u,Da[2]=v;m=Ea[0];u=Ea[1];v=Ea[2];t=Ea[3];if(m!==ka[0]||u!==ka[1]||v!==ka[2]||t!==ka[3])d.stencilOpSeparate(m,u,v,t),ka[0]=m,ka[1]=u,ka[2]=v,ka[3]=
t;m=Ca[0];u=Ca[1];v=Ca[2];t=Ca[3];if(m!==fa[0]||u!==fa[1]||v!==fa[2]||t!==fa[3])d.stencilOpSeparate(m,u,v,t),fa[0]=m,fa[1]=u,fa[2]=v,fa[3]=t;m=b.scissor_enable;m!==g.scissor_enable&&(m?d.enable(3089):d.disable(3089),g.scissor_enable=m);m=O[0];u=O[1];v=O[2];t=O[3];if(m!==la[0]||u!==la[1]||v!==la[2]||t!==la[3])d.scissor(m,u,v,t),la[0]=m,la[1]=u,la[2]=v,la[3]=t;m=oa[0];u=oa[1];v=oa[2];t=oa[3];if(m!==Aa[0]||u!==Aa[1]||v!==Aa[2]||t!==Aa[3])d.viewport(m,u,v,t),Aa[0]=m,Aa[1]=u,Aa[2]=v,Aa[3]=t;g.dirty=!1}if(m=
g.profile)r=performance.now(),J.count++;d.useProgram(h.program);ia.setVAO(null);u=f.location;v=aa[u];v.buffer||d.enableVertexAttribArray(u);if(v.type!==k.dtype||2!==v.size||v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)d.bindBuffer(34962,k.buffer),d.vertexAttribPointer(u,2,k.dtype,!1,0,0),v.type=k.dtype,v.size=2,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;u=q.call(this,y,a,0);Q(u)&&2===u.length||Z.commandRaise(e,G);d.uniform2f(c.location,u[0],u[1]);a=B.call(this,y,a,0);"number"!==
typeof a&&Z.commandRaise(D,G);d.uniform1f(L.location,a);d.uniform1i(p.location,F.bind());(a=W.elements)?d.bindBuffer(34963,a.buffer.buffer):ia.currentVAO&&(a=C.getElements(ia.currentVAO.elements))&&d.bindBuffer(34963,a.buffer.buffer);u=W.primitive;v=W.offset;a?d.drawElements(u,3,a.type,v<<(a.type-5121>>1)):d.drawArrays(u,v,3);ia.setVAO(null);m&&(J.cpuTime+=performance.now()-r);F.unbind()},scope:function(b,a,c){var d,e,f,h,l,p,q,n,u,x,B,A,C,D,E,F,H,G,L,M;if(d=g.profile)e=performance.now(),J.count++;
f=W.count;W.count=3;h=U.call(this,y,b,c);l=z[3];z[3]=h;p=w.call(this,y,b,c);h=z[4];z[4]=p;p=z[5];z[5]=m;q=r.buffer;r.buffer=k;n=r.divisor;r.divisor=0;u=r.normalized;r.normalized=!1;x=r.offset;r.offset=0;B=r.size;r.size=0;A=r.state;r.state=1;C=r.stride;r.stride=0;D=r.type;r.type=k.dtype;E=r.w;r.w=0;F=r.x;r.x=0;H=r.y;r.y=0;G=r.z;r.z=0;L=V.vert;V.vert=2;M=V.frag;V.frag=1;a(y,b,c);d&&(J.cpuTime+=performance.now()-e);W.count=f;z[3]=l;z[4]=h;z[5]=p;r.buffer=q;r.divisor=n;r.normalized=u;r.offset=x;r.size=
B;r.state=A;r.stride=C;r.type=D;r.w=E;r.x=F;r.y=H;r.z=G;V.vert=L;V.frag=M},batch:function(a,e){var h,m,q;h=E.next;h!==E.cur&&(h?d.bindFramebuffer(36160,h.framebuffer):d.bindFramebuffer(36160,null),E.cur=h);if(g.dirty){var t,r,w;h=b.dither;h!==g.dither&&(h?d.enable(3024):d.disable(3024),g.dither=h);h=b.blend_enable;h!==g.blend_enable&&(h?d.enable(3042):d.disable(3042),g.blend_enable=h);h=za[0];t=za[1];r=za[2];w=za[3];if(h!==X[0]||t!==X[1]||r!==X[2]||w!==X[3])d.blendColor(h,t,r,w),X[0]=h,X[1]=t,X[2]=
r,X[3]=w;h=ea[0];t=ea[1];if(h!==T[0]||t!==T[1])d.blendEquationSeparate(h,t),T[0]=h,T[1]=t;h=S[0];t=S[1];r=S[2];w=S[3];if(h!==A[0]||t!==A[1]||r!==A[2]||w!==A[3])d.blendFuncSeparate(h,t,r,w),A[0]=h,A[1]=t,A[2]=r,A[3]=w;h=b.depth_enable;h!==g.depth_enable&&(h?d.enable(2929):d.disable(2929),g.depth_enable=h);h=b.depth_func;h!==g.depth_func&&(d.depthFunc(h),g.depth_func=h);h=N[0];t=N[1];if(h!==wa[0]||t!==wa[1])d.depthRange(h,t),wa[0]=h,wa[1]=t;h=b.depth_mask;h!==g.depth_mask&&(d.depthMask(h),g.depth_mask=
h);h=l[0];t=l[1];r=l[2];w=l[3];if(h!==M[0]||t!==M[1]||r!==M[2]||w!==M[3])d.colorMask(h,t,r,w),M[0]=h,M[1]=t,M[2]=r,M[3]=w;h=b.cull_enable;h!==g.cull_enable&&(h?d.enable(2884):d.disable(2884),g.cull_enable=h);h=b.cull_face;h!==g.cull_face&&(d.cullFace(h),g.cull_face=h);h=b.frontFace;h!==g.frontFace&&(d.frontFace(h),g.frontFace=h);h=b.lineWidth;h!==g.lineWidth&&(d.lineWidth(h),g.lineWidth=h);h=b.polygonOffset_enable;h!==g.polygonOffset_enable&&(h?d.enable(32823):d.disable(32823),g.polygonOffset_enable=
h);h=na[0];t=na[1];if(h!==n[0]||t!==n[1])d.polygonOffset(h,t),n[0]=h,n[1]=t;h=b.sample_alpha;h!==g.sample_alpha&&(h?d.enable(32926):d.disable(32926),g.sample_alpha=h);h=b.sample_enable;h!==g.sample_enable&&(h?d.enable(32928):d.disable(32928),g.sample_enable=h);h=H[0];t=H[1];if(h!==ba[0]||t!==ba[1])d.sampleCoverage(h,t),ba[0]=h,ba[1]=t;h=b.stencil_enable;h!==g.stencil_enable&&(h?d.enable(2960):d.disable(2960),g.stencil_enable=h);h=b.stencil_mask;h!==g.stencil_mask&&(d.stencilMask(h),g.stencil_mask=
h);h=qa[0];t=qa[1];r=qa[2];if(h!==Da[0]||t!==Da[1]||r!==Da[2])d.stencilFunc(h,t,r),Da[0]=h,Da[1]=t,Da[2]=r;h=Ea[0];t=Ea[1];r=Ea[2];w=Ea[3];if(h!==ka[0]||t!==ka[1]||r!==ka[2]||w!==ka[3])d.stencilOpSeparate(h,t,r,w),ka[0]=h,ka[1]=t,ka[2]=r,ka[3]=w;h=Ca[0];t=Ca[1];r=Ca[2];w=Ca[3];if(h!==fa[0]||t!==fa[1]||r!==fa[2]||w!==fa[3])d.stencilOpSeparate(h,t,r,w),fa[0]=h,fa[1]=t,fa[2]=r,fa[3]=w;h=b.scissor_enable;h!==g.scissor_enable&&(h?d.enable(3089):d.disable(3089),g.scissor_enable=h);h=O[0];t=O[1];r=O[2];
w=O[3];if(h!==la[0]||t!==la[1]||r!==la[2]||w!==la[3])d.scissor(h,t,r,w),la[0]=h,la[1]=t,la[2]=r,la[3]=w;h=oa[0];t=oa[1];r=oa[2];w=oa[3];if(h!==Aa[0]||t!==Aa[1]||r!==Aa[2]||w!==Aa[3])d.viewport(h,t,r,w),Aa[0]=h,Aa[1]=t,Aa[2]=r,Aa[3]=w;g.dirty=!1}if(h=g.profile)m=performance.now(),J.count+=e;d.useProgram(da.program);ia.setVAO(null);t=f.location;r=aa[t];r.buffer||d.enableVertexAttribArray(t);if(r.type!==k.dtype||2!==r.size||r.buffer!==k||!1!==r.normalized||0!==r.offset||0!==r.stride)d.bindBuffer(34962,
k.buffer),d.vertexAttribPointer(t,2,k.dtype,!1,0,0),r.type=k.dtype,r.size=2,r.buffer=k,r.normalized=!1,r.offset=0,r.stride=0;t=u.call(this,y,void 0,q);Q(t)&&2===t.length||Z.commandRaise(P,G);d.uniform2f(c.location,t[0],t[1]);q=x.call(this,y,void 0,q);"number"!==typeof q&&Z.commandRaise(R,G);d.uniform1f(L.location,q);d.uniform1i(p.location,ga.bind());(t=W.elements)?d.bindBuffer(34963,t.buffer.buffer):ia.currentVAO&&(t=C.getElements(ia.currentVAO.elements))&&d.bindBuffer(34963,t.buffer.buffer);r=W.primitive;
w=W.offset;for(q=0;q<e;++q)t?d.drawElements(r,3,t.type,w<<(t.type-5121>>1)):d.drawArrays(r,w,3);ga.unbind();ia.setVAO(null);h&&(J.cpuTime+=performance.now()-m)}}}}},{}],25:[function(V,ia,za){var a=V("./sorted-object-keys");ia.exports=function(Z,G){for(var J=a(G),h=0;h<J.length;++h)Z[J[h]]=G[J[h]];return Z}},{"./sorted-object-keys":34}],26:[function(V,ia,za){function a(a,h,k,q,e,B){for(var D=0;D<h;++D)for(var F=a[D],G=0;G<k;++G)for(var w=F[G],m=0;m<q;++m)e[B++]=w[m]}function Z(G,h,k,q,e){for(var B=
1,D=k+1;D<h.length;++D)B*=h[D];var F=h[k];if(4===h.length-k){var U=h[k+1],w=h[k+2];h=h[k+3];for(D=0;D<F;++D)a(G[D],U,w,h,q,e),e+=B}else for(D=0;D<F;++D)Z(G[D],h,k+1,q,e),e+=B}var G=V("./pool");ia.exports={shape:function(a){for(var h=[];a.length;a=a[0])h.push(a.length);return h},flatten:function(J,h,k,q){var e=1;if(h.length)for(var B=0;B<h.length;++B)e*=h[B];else e=0;k=q||G.allocType(k,e);switch(h.length){case 0:break;case 1:q=h[0];for(h=0;h<q;++h)k[h]=J[h];break;case 2:q=h[0];h=h[1];for(B=e=0;B<q;++B)for(var D=
J[B],F=0;F<h;++F)k[e++]=D[F];break;case 3:a(J,h[0],h[1],h[2],k,0);break;default:Z(J,h,0,k,0)}return k}}},{"./pool":32}],27:[function(V,ia,za){var a=V("./is-typed-array");ia.exports=function(Z){return Array.isArray(Z)||a(Z)}},{"./is-typed-array":30}],28:[function(V,ia,za){var a=V("./is-typed-array");ia.exports=function(Z){return!!Z&&"object"===typeof Z&&Array.isArray(Z.shape)&&Array.isArray(Z.stride)&&"number"===typeof Z.offset&&Z.shape.length===Z.stride.length&&(Array.isArray(Z.data)||a(Z.data))}},
{"./is-typed-array":30}],29:[function(V,ia,za){ia.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(V,ia,za){ia.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(V,ia,za){ia.exports=function(a,Z){for(var G=Array(a),J=0;J<a;++J)G[J]=Z(J);return G}},{}],32:[function(V,
ia,za){function a(a){var h,k;h=(65535<a)<<4;a>>>=h;k=(255<a)<<3;a>>>=k;h|=k;k=(15<a)<<2;a>>>=k;h|=k;k=(3<a)<<1;return h|k|a>>>k>>1}function Z(){function J(h){a:{for(var e=16;268435456>=e;e*=16)if(h<=e){h=e;break a}h=0}e=k[a(h)>>2];return 0<e.length?e.pop():new ArrayBuffer(h)}function h(h){k[a(h.byteLength)>>2].push(h)}var k=G(8,function(){return[]});return{alloc:J,free:h,allocType:function(a,e){var h=null;switch(a){case 5120:h=new Int8Array(J(e),0,e);break;case 5121:h=new Uint8Array(J(e),0,e);break;
case 5122:h=new Int16Array(J(2*e),0,e);break;case 5123:h=new Uint16Array(J(2*e),0,e);break;case 5124:h=new Int32Array(J(4*e),0,e);break;case 5125:h=new Uint32Array(J(4*e),0,e);break;case 5126:h=new Float32Array(J(4*e),0,e);break;default:return null}return h.length!==e?h.subarray(0,e):h},freeType:function(a){h(a.buffer)}}}var G=V("./loop");V=Z();V.zero=Z();ia.exports=V},{"./loop":31}],33:[function(V,ia,za){ia.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:
function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(V,ia,za){ia.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(V,ia,za){var a=V("./pool"),Z=new Float32Array(1),G=new Uint32Array(Z.buffer);ia.exports=function(J){for(var h=a.allocType(5123,J.length),k=0;k<J.length;++k)if(isNaN(J[k]))h[k]=65535;else if(Infinity===J[k])h[k]=31744;else if(-Infinity===J[k])h[k]=64512;else{Z[0]=
J[k];var q=G[0],e=q>>>31<<15,B=(q<<1>>>24)-127,q=q>>13&1023;h[k]=-24>B?e:-14>B?e+(q+1024>>-14-B):15<B?e+31744:e+(B+15<<10)+q}return h}},{"./pool":32}],36:[function(V,ia,za){var a=V("./sorted-object-keys");ia.exports=function(Z){return a(Z).map(function(a){return Z[a]})}},{"./sorted-object-keys":34}],37:[function(V,ia,za){function a(a,e,h){function D(){var e=window.innerWidth,k=window.innerHeight;a!==document.body&&(k=F.getBoundingClientRect(),e=k.right-k.left,k=k.bottom-k.top);F.width=h*e;F.height=
h*k}var F=document.createElement("canvas");k(F.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(F);a===document.body&&(F.style.position="absolute",k(a.style,{margin:0,padding:0}));var G;a!==document.body&&"function"===typeof ResizeObserver?(G=new ResizeObserver(function(){setTimeout(D)}),G.observe(a)):window.addEventListener("resize",D,!1);D();return{canvas:F,onDestroy:function(){G?G.disconnect():window.removeEventListener("resize",D);a.removeChild(F)}}}function Z(a,
e){function h(k){try{return a.getContext(k,e)}catch(B){return null}}return h("webgl")||h("experimental-webgl")||h("webgl-experimental")}function G(a){if("string"===typeof a)return a.split();h(Array.isArray(a),"invalid extension array");return a}function J(a){return"string"===typeof a?(h("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var h=V("./util/check"),k=V("./util/extend");ia.exports=function(k){var e=k||{},B,D,F,U;k={};var w=[],m=[],r="undefined"===
typeof window?1:window.devicePixelRatio,V=!1,u=function(a){a&&h.raise(a)},P=function(){};"string"===typeof e?(h("undefined"!==typeof document,"selector queries only supported in DOM environments"),B=document.querySelector(e),h(B,"invalid query string for element")):"object"===typeof e?"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&"function"===typeof e.getBoundingClientRect?B=e:"function"===typeof e.drawArrays||"function"===typeof e.drawElements?(U=e,F=U.canvas):(h.constructor(e),
"gl"in e?U=e.gl:"canvas"in e?F=J(e.canvas):"container"in e&&(D=J(e.container)),"attributes"in e&&(k=e.attributes,h.type(k,"object","invalid context attributes")),"extensions"in e&&(w=G(e.extensions)),"optionalExtensions"in e&&(m=G(e.optionalExtensions)),"onDone"in e&&(h.type(e.onDone,"function","invalid or missing onDone callback"),u=e.onDone),"profile"in e&&(V=!!e.profile),"pixelRatio"in e&&(r=+e.pixelRatio,h(0<r,"invalid pixel ratio"))):h.raise("invalid arguments to regl");B&&("canvas"===B.nodeName.toLowerCase()?
F=B:D=B);if(!U){if(!F){h("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");B=a(D||document.body,u,r);if(!B)return null;F=B.canvas;P=B.onDestroy}void 0===k.premultipliedAlpha&&(k.premultipliedAlpha=!0);U=Z(F,k)}return U?{gl:U,canvas:F,container:D,extensions:w,optionalExtensions:m,pixelRatio:r,profile:V,onDone:u,onDestroy:P}:(P(),u("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],
38:[function(V,ia,za){var a=V("element-size");ia.exports=function(G,J,h){function k(){var e=k.parent||G.parentNode;if("function"===typeof e)var h=e(Z)||Z,e=h[0],h=h[1];else e&&e!==document.body?(h=a(e),e=h[0]|0,h=h[1]|0):(e=window.innerWidth,h=window.innerHeight);q?(G.setAttribute("width",e*k.scale+"px"),G.setAttribute("height",h*k.scale+"px")):(G.width=e*k.scale,G.height=h*k.scale);G.style.width=e+"px";G.style.height=h+"px";return k}var q="SVG"===G.nodeName.toUpperCase();G.style.position=G.style.position||
"absolute";G.style.top=0;G.style.left=0;k.scale=parseFloat(h||1);k.parent=J;return k()};var Z=new Float32Array(2)},{"element-size":39}],39:[function(V,ia,za){function a(a){return parseFloat(a)||0}ia.exports=function(Z){if(Z===window||Z===document.body)return[window.innerWidth,window.innerHeight];if(!Z.parentNode){var G=!0;document.body.appendChild(Z)}var J=Z.getBoundingClientRect(),h=getComputedStyle(Z),k=(J.height|0)+a(h.getPropertyValue("margin-top"))+a(h.getPropertyValue("margin-bottom")),J=(J.width|
0)+a(h.getPropertyValue("margin-left"))+a(h.getPropertyValue("margin-right"));G&&document.body.removeChild(Z);return[J,k]}},{}],40:[function(V,ia,za){function a(a){throw Error("resl: "+a);}function Z(h,e,k){Object.keys(h).forEach(function(h){0>e.indexOf(h)&&a('invalid parameter "'+h+'" in '+k)})}function G(a,e){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=e}var J=["manifest","onDone","onProgress","onError"],h=["type","src","stream","credentials","parser"],k=["onData","onDone"];
ia.exports=function(q){function e(e,c){if(e in q){var f=q[e];"function"!==typeof f&&a('invalid callback "'+e+'"');return f}return null}function B(a){function c(){if(!(2>q.readyState||1===r.state||-1===r.state)){if(200!==q.status)return F('error loading resource "'+a.name+'"');if(2<q.readyState&&0===r.state){var c;c="binary"===a.type?q.response:q.responseText;if(m.data)try{g=m.data(c)}catch(h){return F(h)}else g=c}if(3<q.readyState&&0===r.state){if(m.done)try{g=m.done()}catch(h){return F(h)}r.state=
1}u[e]=g;r.progress=.75*r.progress+.25;r.ready=a.stream&&!!g||1===r.state;U()}}var e=a.name,h=a.stream,k="binary"===a.type,m=a.parser,q=new XMLHttpRequest,g=null,r=new G(e,function(){1!==r.state&&-1!==r.state&&(q.onreadystatechange=null,q.abort(),r.state=-1)});q.onreadystatechange=h?c:function(){4===q.readyState&&c()};k&&(q.responseType="arraybuffer");a.credentials&&(q.withCredentials=!0);q.open("GET",a.src,!0);q.send();return r}function D(a,c){function e(){if(0===w.state)if(r.data)try{x=r.data(c)}catch(b){return F(b)}else x=
c}function h(b){e();u[g]=x;w.progress=b.lengthComputable?Math.max(w.progress,b.loaded/b.total):.75*w.progress+.25;U(g)}function k(){e();if(0===w.state){if(r.done)try{x=r.done()}catch(b){return F(b)}w.state=1}w.progress=1;w.ready=!0;u[g]=x;q();U("finish "+g)}function m(){F('error loading asset "'+g+'"')}function q(){a.stream&&c.removeEventListener("progress",h);"image"===a.type?c.addEventListener("load",k):c.addEventListener("canplay",k);c.removeEventListener("error",m)}var g=a.name,r=a.parser,w=new G(g,
function(){1!==w.state&&-1!==w.state&&(w.state=-1,q(),c.src="")}),x=c;a.stream&&c.addEventListener("progress",h);if("image"===a.type)c.addEventListener("load",k);else{var d=!1,B=!1;c.addEventListener("loadedmetadata",function(){B=!0;d&&k()});c.addEventListener("canplay",function(){d=!0;B&&k()})}c.addEventListener("error",m);c.crossOrigin=a.credentials?"use-credentials":"anonymous";c.src=a.src;return w}function F(a){-1!==P&&1!==P&&(P=-1,R.forEach(function(a){a.cancel()}),V?"string"===typeof a?V(Error("resl: "+
a)):V(a):console.error("resl error:",a))}function U(a){if(-1!==P&&1!==P){var c=0,e=0;R.forEach(function(a){a.ready&&(e+=1);c+=a.progress});e===R.length?(P=1,m(u)):r&&r(c/R.length,a)}}"object"===typeof q&&q||a("invalid or missing configuration");Z(q,J,"config");var w=q.manifest;"object"===typeof w&&w||a("missing manifest");var m=e("onDone");m||a("missing onDone() callback");var r=e("onProgress"),V=e("onError"),u={},P=0,x={text:B,binary:function(a){return B(a)},image:function(a){return D(a,document.createElement("img"))},
video:function(a){return D(a,document.createElement("video"))},audio:function(a){return D(a,document.createElement("audio"))}},R=Object.keys(w).map(function(e){function c(c,e){if(c in f.parser){var h=f.parser[c];"function"!==typeof h&&a("invalid parser callback "+c+' for asset "'+c+'"');return h}return e}var f=w[e];"string"===typeof f?f={src:f}:"object"===typeof f&&f||a('invalid asset definition "'+e+'"');Z(f,h,'asset "'+e+'"');var m={};"parser"in f&&("function"===typeof f.parser?m={data:f.parser}:
"object"===typeof f.parser&&f.parser?(Z(m,k,'parser for asset "'+e+'"'),"onData"in m||a('missing onData callback for parser in asset "'+e+'"'),m={data:c("onData"),done:c("onDone")}):a('invalid parser for asset "'+e+'"'));return{name:e,type:function(c,h,k){c in f&&(k=f[c]);0>h.indexOf(k)&&a("invalid "+c+' "'+k+'" for asset "'+e+'", possible values: '+h);return k}("type",Object.keys(x),"text"),stream:!!f.stream,credentials:!!f.credentials,src:function(c,h,k){c in f?k=f[c]:h&&a("missing "+c+' for asset "'+
e+'"');"string"!==typeof k&&a("invalid "+c+' for asset "'+e+'", must be a string');return k}("src",!0,""),parser:m}}).map(function(a){return x[a.type](a)});0===R.length&&setTimeout(function(){U("done")},1)}},{}],41:[function(V,ia,za){function a(a,e){for(var h=0;h<a.length;++h)if(a[h]===e)return h;return-1}var Z=V("./lib/util/check"),G=V("./lib/util/extend"),J=V("./lib/dynamic"),h=V("./lib/util/raf"),k=V("./lib/util/clock"),q=V("./lib/strings"),e=V("./lib/webgl"),B=V("./lib/extension"),D=V("./lib/limits"),
F=V("./lib/buffer"),U=V("./lib/elements"),w=V("./lib/texture"),m=V("./lib/renderbuffer"),r=V("./lib/framebuffer"),da=V("./lib/attribute"),u=V("./lib/shader"),P=V("./lib/read"),x=V("./lib/core"),R=V("./lib/stats"),ga=V("./lib/timer");ia.exports=function(c){function f(){if(0===Ea.length)S&&S.update(),Ba=null;else{Ba=h.next(f);d();for(var a=Ea.length-1;0<=a;--a){var b=Ea[a];b&&b(N,null,0)}V.flush();S&&S.update()}}function L(){!Ba&&0<Ea.length&&(Ba=h.next(f))}function p(){Ba&&(h.cancel(f),Ba=null)}function aa(a){a.preventDefault();
ia=!0;p();ka.forEach(function(a){a()})}function y(a){V.getError();ia=!1;za.restore();ba.restore();na.restore();O.restore();la.restore();qa.restore();H.restore();S&&S.restore();Da.procs.refresh();L();oa.forEach(function(a){a()})}function g(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(J.isDynamic(f))e[b]=J.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(J.isDynamic(f[g])){e[b]=J.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<
a;)n.push(null);return n}Z(!!a,"invalid args to regl({...})");Z.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=G({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Da.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return G(function(a,b){var d;ia&&Z.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);
else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function W(a,b){var c=0;Da.procs.poll();var d=b.color;d&&(V.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(V.clearDepth(+b.depth),c|=256);"stencil"in b&&(V.clearStencil(b.stencil|0),c|=1024);Z(!!c,"called regl.clear with no buffer specified");V.clear(c)}function C(b){Z.type(b,
"function","regl.frame() callback must be a function");Ea.push(b);L();return{cancel:function(){function c(){var b=a(Ea,c);Ea[b]=Ea[Ea.length-1];--Ea.length;0>=Ea.length&&p()}var d=a(Ea,b);Z(0<=d,"cannot cancel a frame twice");Ea[d]=c}}}function E(){var a=Ca.viewport,b=Ca.scissor_box;a[0]=a[1]=b[0]=b[1]=0;N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=a[2]=b[2]=V.drawingBufferWidth;N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=a[3]=b[3]=V.drawingBufferHeight}function d(){N.tick+=
1;N.time=b();E();Da.procs.poll()}function Q(){O.refresh();E();Da.procs.refresh();S&&S.update()}function b(){return(k()-A)/1E3}console.log("REGL args are:",c);c=e(c);console.log("REGL configs are:",c);if(!c)return null;var V=c.gl,z=V.getContextAttributes(),ia=V.isContextLost(),za=B(V,c);if(!za)return null;var X=q(),ea=R(),T=za.extensions,S=ga(V,T),A=k(),l=V.drawingBufferWidth,M=V.drawingBufferHeight,N={tick:0,time:0,viewportWidth:l,viewportHeight:M,framebufferWidth:l,framebufferHeight:M,drawingBufferWidth:l,
drawingBufferHeight:M,pixelRatio:c.pixelRatio},l={elements:null,primitive:4,count:-1,offset:0,instances:-1},wa=D(V,T),na=F(V,ea,c,function(a){return H.destroyBuffer(a)}),n=U(V,T,na,ea),H=da(V,T,wa,ea,na,n,l),ba=u(V,X,ea,c),O=w(V,T,wa,function(){Da.procs.poll()},N,ea,c),la=m(V,T,wa,ea,c),qa=r(V,T,wa,O,la,ea),Da=x(V,X,T,wa,na,n,O,qa,{},H,ba,l,N,S,c),X=P(V,qa,Da.procs.poll,N,z,T,wa),Ca=Da.next,fa=V.canvas,Ea=[],ka=[],oa=[],Aa=[c.onDestroy],Ba=null;fa&&(fa.addEventListener("webglcontextlost",aa,!1),fa.addEventListener("webglcontextrestored",
y,!1));var ma=qa.setFBO=g({framebuffer:J.define.call(null,1,"framebuffer")});Q();z=G(g,{clear:function(a){Z("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ma(G({framebuffer:a.framebuffer.faces[b]},a),W);else ma(a,W);else W(null,a)},prop:J.define.bind(null,1),context:J.define.bind(null,2),"this":J.define.bind(null,3),draw:g({}),buffer:function(a){return na.create(a,34962,!1,!1)},elements:function(a){return n.create(a,
!1)},texture:O.create2D,cube:O.createCube,renderbuffer:la.create,framebuffer:qa.create,framebufferCube:qa.createCube,vao:H.createVAO,attributes:z,frame:C,on:function(a,b){Z.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return C(b);case "lost":c=ka;break;case "restore":c=oa;break;case "destroy":c=Aa;break;default:Z.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=
c[c.length-1];c.pop();break}}}},limits:wa,hasExtension:function(a){return 0<=wa.extensions.indexOf(a.toLowerCase())},read:X,destroy:function(){Ea.length=0;p();fa&&(fa.removeEventListener("webglcontextlost",aa),fa.removeEventListener("webglcontextrestored",y));ba.clear();qa.clear();la.clear();H.clear();O.clear();n.clear();na.clear();S&&S.clear();Aa.forEach(function(a){a()})},_gl:V,_refresh:Q,poll:function(){d();S&&S.update()},now:b,stats:ea});c.onDone(null,z);return z}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
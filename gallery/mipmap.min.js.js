(function(){function A(Z,jc,c){function ga(g,d){if(!jc[g]){if(!Z[g]){var y="function"==typeof require&&require;if(!d&&y)return y(g,!0);if(q)return q(g,!0);y=Error("Cannot find module '"+g+"'");throw y.code="MODULE_NOT_FOUND",y;}y=jc[g]={exports:{}};Z[g][0].call(y.exports,function(b){return ga(Z[g][1][b]||b)},y,y.exports,A,Z,jc,c)}return jc[g].exports}for(var q="function"==typeof require&&require,O=0;O<c.length;O++)ga(c[O]);return ga}return A})()({1:[function(A,Z,jc){A=A("../regl")();var c=A({frag:"\n  precision mediump float;\n  uniform sampler2D texture;\n  uniform float tick;\n  varying vec2 uv;\n  void main () {\n    mat3 m = mat3(\n      cos(tick), sin(tick), -1.1 + cos(tick),\n      -sin(tick), cos(tick), 0,\n      0, 0, 1);\n    vec3 p = m * vec3(uv, 1);\n    gl_FragColor = texture2D(texture, p.xy / p.z);\n  }",
vert:"\n  precision mediump float;\n  attribute vec2 position;\n  varying vec2 uv;\n  void main () {\n    uv = position;\n    gl_Position = vec4(1.0 - 2.0 * position, 0, 1);\n  }",attributes:{position:[-2,0,0,-2,2,2]},uniforms:{tick:function(c){return.005*c.tick},texture:A.texture({min:"linear mipmap linear",mag:"nearest",wrap:"repeat",data:[[255,255,255,255,0,0,0,0],[255,255,255,255,0,0,0,0],[255,255,255,255,0,0,0,0],[255,255,255,255,0,0,0,0],[0,0,0,0,255,255,255,255],[0,0,0,0,255,255,255,255],[0,
0,0,0,255,255,255,255],[0,0,0,0,255,255,255,255]]})},count:3});A.frame(function(){c()})},{"../regl":38}],2:[function(A,Z,jc){function c(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var ga=A("./util/sorted-object-keys"),q=A("./util/check"),O=A("./util/values"),g=A("./constants/dtypes.json"),d=A("./util/is-typed-array"),y=A("./util/is-ndarray"),b=A("./constants/primitives.json"),v="attributes elements offset count primitive instances".split(" ");
Z.exports=function(oa,Y,H,F,w,B,M){function n(b){if(b!==T.currentVAO){var d=Y.oes_vertex_array_object;b?d.bindVertexArrayOES(b.vao):d.bindVertexArrayOES(null);T.currentVAO=b}}function G(b){if(b!==T.currentVAO){if(b)b.bindAttrs();else{for(var d=Y.angle_instanced_arrays,g=0;g<h.length;++g){var e=h[g];e.buffer?(oa.enableVertexAttribArray(g),e.buffer.bind(),oa.vertexAttribPointer(g,e.size,e.type,e.normalized,e.stride,e.offfset),d&&e.divisor&&d.vertexAttribDivisorANGLE(g,e.divisor)):(oa.disableVertexAttribArray(g),
oa.vertexAttrib4f(g,e.x,e.y,e.z,e.w))}M.elements?oa.bindBuffer(34963,M.elements.buffer.buffer):oa.bindBuffer(34963,null)}T.currentVAO=b}}function aa(){O(z).forEach(function(b){b.destroy()})}function I(){this.id=++e;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=Y.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;z[this.id]=this;this.buffers=[]}function A(){Y.oes_vertex_array_object&&O(z).forEach(function(b){b.refresh()})}
var f=H.maxAttributes,h=Array(f);for(H=0;H<f;++H)h[H]=new c;var e=0,z={},T={Record:c,scope:{},state:h,currentVAO:null,targetVAO:null,restore:Y.oes_vertex_array_object?A:function(){},createVAO:function(e){function m(e){var U;if(Array.isArray(e))U=e,h.elements&&h.ownsElements&&h.elements.destroy(),h.elements=null,h.ownsElements=!1,h.offset=0,h.count=0,h.instances=-1,h.primitive=4;else{q("object"===typeof e,"invalid arguments for create vao");q("attributes"in e,"must specify attributes for vao");if(e.elements){var a=
e.elements;h.ownsElements?("function"===typeof a&&"elements"===a._reglType?h.elements.destroy():h.elements(a),h.ownsElements=!1):B.getElements(e.elements)?(h.elements=e.elements,h.ownsElements=!1):(h.elements=B.create(e.elements),h.ownsElements=!0)}else h.elements=null,h.ownsElements=!1;U=e.attributes;h.offset=0;h.count=-1;h.instances=-1;h.primitive=4;h.elements&&(h.count=h.elements._elements.vertCount,h.primitive=h.elements._elements.primType);"offset"in e&&(h.offset=e.offset|0);"count"in e&&(h.count=
e.count|0);"instances"in e&&(h.instances=e.instances|0);"primitive"in e&&(q(e.primitive in b,"bad primitive type: "+e.primitive),h.primitive=b[e.primitive]);q.optional(function(){for(var a=ga(e),b=0;b<a.length;++b)q(0<=v.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+v)});q(Array.isArray(U),"attributes must be an array")}q(U.length<f,"too many attributes");q(0<U.length,"must specify at least one attribute");var a={},l=h.attributes;l.length=U.length;for(var W=0;W<U.length;++W){var z=
U[W],n=l[W]=new c,I=z.data||z;if(Array.isArray(I)||d(I)||y(I)){var G;h.buffers[W]&&(G=h.buffers[W],d(I)&&G._buffer.byteLength>=I.byteLength?G.subdata(I):(G.destroy(),h.buffers[W]=null));h.buffers[W]||(G=h.buffers[W]=w.create(z,34962,!1,!0));n.buffer=w.getBuffer(G);n.size=n.buffer.dimension|0;n.normalized=!1;n.type=n.buffer.dtype;n.offset=0;n.stride=0;n.divisor=0;n.state=1;a[W]=1}else w.getBuffer(z)?(n.buffer=w.getBuffer(z),n.size=n.buffer.dimension|0,n.normalized=!1,n.type=n.buffer.dtype,n.offset=
0,n.stride=0,n.divisor=0,n.state=1):w.getBuffer(z.buffer)?(n.buffer=w.getBuffer(z.buffer),n.size=(+z.size||n.buffer.dimension)|0,n.normalized=!!z.normalized||!1,"type"in z?(q.parameter(z.type,g,"invalid buffer type"),n.type=g[z.type]):n.type=n.buffer.dtype,n.offset=(z.offset||0)|0,n.stride=(z.stride||0)|0,n.divisor=(z.divisor||0)|0,n.state=1,q(1<=n.size&&4>=n.size,"size must be between 1 and 4"),q(0<=n.offset,"invalid offset"),q(0<=n.stride&&255>=n.stride,"stride must be between 0 and 255"),q(0<=
n.divisor,"divisor must be positive"),q(!n.divisor||!!Y.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in z?(q(0<W,"first attribute must not be a constant"),n.x=+z.x||0,n.y=+z.y||0,n.z=+z.z||0,n.w=+z.w||0,n.state=2):q(!1,"invalid attribute spec for location "+W)}for(G=0;G<h.buffers.length;++G)!a[G]&&h.buffers[G]&&(h.buffers[G].destroy(),h.buffers[G]=null);h.refresh();return m}var h=new I;F.vaoCount+=1;m.destroy=function(){for(var b=0;b<h.buffers.length;++b)h.buffers[b]&&
h.buffers[b].destroy();h.buffers.length=0;h.ownsElements&&(h.elements.destroy(),h.elements=null,h.ownsElements=!1);h.destroy()};m._vao=h;m._reglType="vao";return m(e)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var d=0;d<h.length;++d){var e=h[d];e.buffer===b&&(oa.disableVertexAttribArray(d),e.buffer=null)}},setVAO:Y.oes_vertex_array_object?n:G,clear:Y.oes_vertex_array_object?aa:function(){}};I.prototype.bindAttrs=function(){for(var b=Y.angle_instanced_arrays,
d=this.attributes,e=0;e<d.length;++e){var g=d[e];g.buffer?(oa.enableVertexAttribArray(e),oa.bindBuffer(34962,g.buffer.buffer),oa.vertexAttribPointer(e,g.size,g.type,g.normalized,g.stride,g.offset),b&&g.divisor&&b.vertexAttribDivisorANGLE(e,g.divisor)):(oa.disableVertexAttribArray(e),oa.vertexAttrib4f(e,g.x,g.y,g.z,g.w))}for(b=d.length;b<f;++b)oa.disableVertexAttribArray(b);(b=B.getElements(this.elements))?oa.bindBuffer(34963,b.buffer.buffer):oa.bindBuffer(34963,null)};I.prototype.refresh=function(){var b=
Y.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),T.currentVAO=null,b.bindVertexArrayOES(null))};I.prototype.destroy=function(){if(this.vao){var b=Y.oes_vertex_array_object;this===T.currentVAO&&(T.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);z[this.id]&&(delete z[this.id],--F.vaoCount)};return T}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(A,Z,jc){function c(b){return H[Object.prototype.toString.call(b)]|0}function ga(b,d){for(var g=0;g<d.length;++g)b[g]=d[g]}function q(b,d,g,c,y,v,f){for(var h=0,e=0;e<g;++e)for(var z=0;z<c;++z)b[h++]=d[y*e+v*z+f]}var O=A("./util/sorted-object-keys"),g=A("./util/check"),d=A("./util/is-typed-array"),y=A("./util/is-ndarray"),b=A("./util/values"),v=A("./util/pool");jc=A("./util/flatten");
var oa=jc.flatten,Y=jc.shape,H=A("./constants/arraytypes.json"),F=A("./constants/dtypes.json"),w=A("./constants/usage.json"),B=[];B[5120]=1;B[5122]=2;B[5124]=4;B[5121]=1;B[5123]=2;B[5125]=4;B[5126]=4;Z.exports=function(H,n,G,aa){function I(b){this.id=e++;this.buffer=H.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;G.profile&&(this.stats={size:0})}function A(b,d,g){b.byteLength=d.byteLength;H.bufferData(b.type,d,g)}function f(b,
e,h,f,n,a){b.usage=h;if(Array.isArray(e)){if(b.dtype=f||5126,0<e.length)if(Array.isArray(e[0])){n=Y(e);for(var l=f=1;l<n.length;++l)f*=n[l];b.dimension=f;e=oa(e,n,b.dtype);A(b,e,h);a?b.persistentData=e:v.freeType(e)}else"number"===typeof e[0]?(b.dimension=n,n=v.allocType(b.dtype,e.length),ga(n,e),A(b,n,h),a?b.persistentData=n:v.freeType(n)):d(e[0])?(b.dimension=e[0].length,b.dtype=f||c(e[0])||5126,e=oa(e,[e.length,e[0].length],b.dtype),A(b,e,h),a?b.persistentData=e:v.freeType(e)):g.raise("invalid buffer data")}else if(d(e))b.dtype=
f||c(e),b.dimension=n,A(b,e,h),a&&(b.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(y(e)){n=e.shape;var W=e.stride,l=e.offset,z=0,w=0,G=0,I=0;1===n.length?(z=n[0],w=1,G=W[0],I=0):2===n.length?(z=n[0],w=n[1],G=W[0],I=W[1]):g.raise("invalid shape");b.dtype=f||c(e.data)||5126;b.dimension=w;n=v.allocType(b.dtype,z*w);q(n,e.data,z,w,G,I,l);A(b,n,h);a?b.persistentData=n:v.freeType(n)}else e instanceof ArrayBuffer?(b.dtype=5121,b.dimension=n,A(b,e,h),a&&(b.persistentData=new Uint8Array(new Uint8Array(e)))):
g.raise("invalid buffer data")}function h(b){n.bufferCount--;aa(b);var d=b.buffer;g(d,"buffer must not be deleted already");H.deleteBuffer(d);b.buffer=null;delete z[b.id]}var e=0,z={};I.prototype.bind=function(){H.bindBuffer(this.type,this.buffer)};I.prototype.destroy=function(){h(this)};var T=[];G.profile&&(n.getTotalBufferSize=function(){var b=0;O(z).forEach(function(d){b+=z[d].stats.size});return b});return{create:function(b,e,T,L){function aa(b){var a=35044,e=null,h=0,m=0,n=1;Array.isArray(b)||
d(b)||y(b)||b instanceof ArrayBuffer?e=b:"number"===typeof b?h=b|0:b&&(g.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in b&&(g(null===e||Array.isArray(e)||d(e)||y(e),"invalid data for buffer"),e=b.data),"usage"in b&&(g.parameter(b.usage,w,"invalid buffer usage"),a=w[b.usage]),"type"in b&&(g.parameter(b.type,F,"invalid buffer type"),m=F[b.type]),"dimension"in b&&(g.type(b.dimension,"number","invalid dimension"),n=b.dimension|0),"length"in b&&(g.nni(h,"buffer length must be a nonnegative integer"),
h=b.length|0));l.bind();e?f(l,e,a,m,n,L):(h&&H.bufferData(l.type,h,a),l.dtype=m||5121,l.usage=a,l.dimension=n,l.byteLength=h);G.profile&&(l.stats.size=l.byteLength*B[l.dtype]);return aa}function a(b,a){g(a+b.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+a+" to a buffer of size "+l.byteLength);H.bufferSubData(l.type,a,b)}n.bufferCount++;var l=new I(e);z[l.id]=l;T||aa(b);aa._reglType="buffer";aa._buffer=
l;aa.subdata=function(b,e){var h=(e||0)|0,m;l.bind();if(d(b)||b instanceof ArrayBuffer)a(b,h);else if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var f=v.allocType(l.dtype,b.length);ga(f,b);a(f,h);v.freeType(f)}else Array.isArray(b[0])||d(b[0])?(m=Y(b),f=oa(b,m,l.dtype),a(f,h),v.freeType(f)):g.raise("invalid buffer data")}else if(y(b)){m=b.shape;var n=b.stride,z=f=0,w=0,G=0;1===m.length?(f=m[0],z=1,w=n[0],G=0):2===m.length?(f=m[0],z=m[1],w=n[0],G=n[1]):g.raise("invalid shape");m=Array.isArray(b.data)?
l.dtype:c(b.data);m=v.allocType(m,f*z);q(m,b.data,f,z,w,G,b.offset);a(m,h);v.freeType(m)}else g.raise("invalid data for buffer subdata");return aa};G.profile&&(aa.stats=l.stats);aa.destroy=function(){h(l)};return aa},createStream:function(b,d){var e=T.pop();e||(e=new I(b));e.bind();f(e,d,35040,0,1,!1);return e},destroyStream:function(b){T.push(b)},clear:function(){b(z).forEach(h);T.forEach(h)},getBuffer:function(b){return b&&b._buffer instanceof I?b._buffer:null},restore:function(){b(z).forEach(function(b){b.buffer=
H.createBuffer();H.bindBuffer(b.type,b.buffer);H.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:f}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(A,Z,jc){Z.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(A,Z,jc){Z.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(A,Z,jc){Z.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(A,Z,jc){Z.exports={"static":35044,
dynamic:35048,stream:35040}},{}],8:[function(A,Z,jc){function c(b){return Array.isArray(b)||H(b)||F(b)}function ga(b){return b.sort(function(b,d){return"viewport"===b?-1:"viewport"===d?1:b<d?-1:1})}function q(b,d,e,g){this.thisDep=b;this.contextDep=d;this.propDep=e;this.append=g}function O(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function g(b){return new q(!1,!1,!1,b)}function d(b,d){var e=b.type;if(0===e)return e=b.data.length,new q(!0,1<=e,2<=e,d);if(4===e)return e=b.data,new q(e.thisDep,
e.contextDep,e.propDep,d);if(5===e)return new q(!1,!1,!1,d);if(6===e){for(var g=e=!1,h=!1,a=0;a<b.data.length;++a){var l=b.data[a];1===l.type?h=!0:2===l.type?g=!0:3===l.type?e=!0:0===l.type?(e=!0,l=l.data,1<=l&&(g=!0),2<=l&&(h=!0)):4===l.type&&(e=e||l.data.thisDep,g=g||l.data.contextDep,h=h||l.data.propDep)}return new q(e,g,h,d)}return new q(3===e,2===e,1===e,d)}var y=A("./util/sorted-object-keys"),b=A("./util/check"),v=A("./util/extend"),oa=A("./util/codegen"),Y=A("./util/loop"),H=A("./util/is-typed-array"),
F=A("./util/is-ndarray"),w=A("./util/is-array-like"),B=A("./dynamic"),M=A("./constants/primitives.json"),n=A("./constants/dtypes.json"),G=["x","y","z","w"],aa="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),I={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Id="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),f={never:512,less:513,"<":513,equal:514,"=":514,
"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},h={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},e={frag:35632,vert:35633},z={cw:2304,ccw:2305},T=new q(!1,!1,!1,function(){});Z.exports=function(H,m,F,L,fa,a,l,W,na,Ka,cb,kc,pa,Qa,X){function K(b){return b.replace(".","_")}function N(b,r,a){var e=K(b);ca.push(b);p[e]=E[e]=!!a;x[e]=r}function P(b,r,a){var e=
K(b);ca.push(b);Array.isArray(a)?(E[e]=a.slice(),p[e]=a.slice()):E[e]=p[e]=a;ja[e]=r}function A(){var a=oa(),r=a.link,e=a.global;a.id=tc++;a.batchId="0";var d=r(ia),x=a.shared={props:"a0"};y(ia).forEach(function(b){x[b]=e.def(d,".",b)});b.optional(function(){a.CHECK=r(b);a.commandStr=b.guessCommand();a.command=r(a.commandStr);a.assert=function(b,a,e){b("if(!(",a,"))",this.CHECK,".commandRaise(",r(e),",",this.command,");")};k.invalidBlendCombinations=Id});var g=a.next={},l=a.current={};y(ja).forEach(function(b){Array.isArray(E[b])&&
(g[b]=e.def(x.next,".",b),l[b]=e.def(x.current,".",b))});var h=a.constants={};y(k).forEach(function(b){h[b]=e.def(JSON.stringify(k[b]))});a.invoke=function(b,e){switch(e.type){case 0:var d=["this",x.context,x.props,a.batchId];return b.def(r(e.data),".call(",d.slice(0,Math.max(e.data.length+1,4)),")");case 1:return b.def(x.props,e.data);case 2:return b.def(x.context,e.data);case 3:return b.def("this",e.data);case 4:return e.data.append(a,b),e.data.ref;case 5:return e.data.toString();case 6:return e.data.map(function(r){return a.invoke(b,
r)})}};a.attribCache={};var Ed={};a.scopeAttrib=function(b){b=m.id(b);if(b in Ed)return Ed[b];var a=Ka.scope[b];a||(a=Ka.scope[b]=new ka);return Ed[b]=r(a)};return a}function J(b){var r=b["static"];b=b.dynamic;var a;if("profile"in r){var e=!!r.profile;a=g(function(b,r){return e});a.enable=e}else if("profile"in b){var k=b.profile;a=d(k,function(b,r){return b.invoke(r,k)})}return a}function Ob(a,r){var e=a["static"],k=a.dynamic;if("framebuffer"in e){var x=e.framebuffer;return x?(x=W.getFramebuffer(x),
b.command(x,"invalid framebuffer object"),g(function(b,r){var a=b.link(x),e=b.shared;r.set(e.framebuffer,".next",a);e=e.context;r.set(e,".framebufferWidth",a+".width");r.set(e,".framebufferHeight",a+".height");return a})):g(function(b,r){var a=b.shared;r.set(a.framebuffer,".next","null");a=a.context;r.set(a,".framebufferWidth",a+".drawingBufferWidth");r.set(a,".framebufferHeight",a+".drawingBufferHeight");return"null"})}if("framebuffer"in k){var l=k.framebuffer;return d(l,function(a,r){var e=a.invoke(r,
l),d=a.shared,k=d.framebuffer,ba=r.def(k,".getFramebuffer(",e,")");b.optional(function(){a.assert(r,"!"+e+"||"+ba,"invalid framebuffer object")});r.set(k,".next",ba);d=d.context;r.set(d,".framebufferWidth",ba+"?"+ba+".width:"+d+".drawingBufferWidth");r.set(d,".framebufferHeight",ba+"?"+ba+".height:"+d+".drawingBufferHeight");return ba})}return null}function $a(a,r,e){function k(a){if(a in x){var ba=x[a];b.commandType(ba,"object","invalid "+a,e.commandStr);var l=!0,qd=ba.x|0,h=ba.y|0,m,f;"width"in
ba?(m=ba.width|0,b.command(0<=m,"invalid "+a,e.commandStr)):l=!1;"height"in ba?(f=ba.height|0,b.command(0<=f,"invalid "+a,e.commandStr)):l=!1;return new q(!l&&r&&r.thisDep,!l&&r&&r.contextDep,!l&&r&&r.propDep,function(b,a){var r=b.shared.context,e=m;"width"in ba||(e=a.def(r,".","framebufferWidth","-",qd));var d=f;"height"in ba||(d=a.def(r,".","framebufferHeight","-",h));return[qd,h,e,d]})}if(a in g){var p=g[a],l=d(p,function(r,e){var d=r.invoke(e,p);b.optional(function(){r.assert(e,d+"&&typeof "+
d+'==="object"',"invalid "+a)});var k=r.shared.context,ba=e.def(d,".x|0"),x=e.def(d,".y|0"),g=e.def('"width" in ',d,"?",d,".width|0:","(",k,".","framebufferWidth","-",ba,")"),l=e.def('"height" in ',d,"?",d,".height|0:","(",k,".","framebufferHeight","-",x,")");b.optional(function(){r.assert(e,g+">=0&&"+l+">=0","invalid "+a)});return[ba,x,g,l]});r&&(l.thisDep=l.thisDep||r.thisDep,l.contextDep=l.contextDep||r.contextDep,l.propDep=l.propDep||r.propDep);return l}return r?new q(r.thisDep,r.contextDep,r.propDep,
function(b,a){var r=b.shared.context;return[0,0,a.def(r,".","framebufferWidth"),a.def(r,".","framebufferHeight")]}):null}var x=a["static"],g=a.dynamic;if(a=k("viewport")){var l=a;a=new q(a.thisDep,a.contextDep,a.propDep,function(b,a){var r=l.append(b,a),e=b.shared.context;a.set(e,".viewportWidth",r[2]);a.set(e,".viewportHeight",r[3]);return r})}return{viewport:a,scissor_box:k("scissor.box")}}function Q(a,r){var e=a["static"];if("string"===typeof e.frag&&"string"===typeof e.vert){if(0<y(r.dynamic).length)return null;
var e=r["static"],d=y(e);if(0<d.length&&"number"===typeof e[d[0]]){for(var k=[],x=0;x<d.length;++x)b("number"===typeof e[d[x]],"must specify all vertex attribute locations when using vaos"),k.push([e[d[x]]|0,d[x]]);return k}}return null}function t(a,r,k){function x(a){if(a in l){var r=m.id(l[a]);b.optional(function(){cb.shader(e[a],r,b.guessCommand())});var k=g(function(){return r});k.id=r;return k}if(a in h){var ba=h[a];return d(ba,function(r,d){var k=r.invoke(d,ba),x=d.def(r.shared.strings,".id(",
k,")");b.optional(function(){d(r.shared.shader,".shader(",e[a],",",x,",",r.command,");")});return x})}return null}var l=a["static"],h=a.dynamic,f=x("frag"),p=x("vert"),Ed=null;O(f)&&O(p)?(Ed=cb.program(p.id,f.id,null,k),a=g(function(b,a){return b.link(Ed)})):a=new q(f&&f.thisDep||p&&p.thisDep,f&&f.contextDep||p&&p.contextDep,f&&f.propDep||p&&p.propDep,function(a,r){var e=a.shared.shader,d;d=f?f.append(a,r):r.def(e,".","frag");var k;k=p?p.append(a,r):r.def(e,".","vert");var x=e+".program("+k+","+d;
b.optional(function(){x+=","+a.command});return r.def(x+")")});return{frag:f,vert:p,progVar:a,program:Ed}}function ma(e,r){function k(a,e){if(a in x){var ba=x[a]|0;e?h.offset=ba:h.instances=ba;b.command(!e||0<=ba,"invalid "+a,r.commandStr);return g(function(b,a){e&&(b.OFFSET=ba);return ba})}if(a in l){var qd=l[a];return d(qd,function(r,d){var k=r.invoke(d,qd);e&&(r.OFFSET=k,b.optional(function(){r.assert(d,k+">=0","invalid "+a)}));return k})}if(e){if(Ed)return g(function(b,a){return b.OFFSET=0});
if(f)return new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(f)return new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var x=e["static"],l=e.dynamic,h={},f=!1,m=function(){if("vao"in x){var b=x.vao;null!==b&&null===Ka.getVAO(b)&&(b=Ka.createVAO(b));f=!0;h.vao=b;return g(function(a){var r=Ka.getVAO(b);return r?
a.link(r):"null"})}if("vao"in l){f=!0;var a=l.vao;return d(a,function(b,r){var e=b.invoke(r,a);return r.def(b.shared.vao+".getVAO("+e+")")})}return null}(),Ed=!1,p=function(){if("elements"in x){var e=x.elements;h.elements=e;if(c(e)){var k=h.elements=a.create(e,!0),e=a.getElements(k);Ed=!0}else e&&(e=a.getElements(e),Ed=!0,b.command(e,"invalid elements",r.commandStr));k=g(function(b,a){if(e){var r=b.link(e);return b.ELEMENTS=r}return b.ELEMENTS=null});k.value=e;return k}if("elements"in l){Ed=!0;var ba=
l.elements;return d(ba,function(a,r){var e=a.shared,d=e.isBufferArgs,e=e.elements,k=a.invoke(r,ba),x=r.def("null"),d=r.def(d,"(",k,")"),l=a.cond(d).then(x,"=",e,".createStream(",k,");")["else"](x,"=",e,".getElements(",k,");");b.optional(function(){a.assert(l["else"],"!"+k+"||"+x,"invalid elements")});r.entry(l);r.exit(a.cond(d).then(e,".destroyStream(",x,");"));return a.ELEMENTS=x})}return f?new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.elements+
".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),qd=k("offset",!0),t=function(){if("primitive"in x){var a=x.primitive;h.primitive=a;b.commandParameter(a,M,"invalid primitve",r.commandStr);return g(function(b,r){return M[a]})}if("primitive"in l){var e=l.primitive;return d(e,function(a,r){var d=a.constants.primTypes,k=a.invoke(r,e);b.optional(function(){a.assert(r,k+" in "+d,"invalid primitive, must be one of "+y(M))});return r.def(d,"[",k,"]")})}return Ed?O(p)?p.value?g(function(b,
a){return a.def(b.ELEMENTS,".primType")}):g(function(){return 4}):new q(p.thisDep,p.contextDep,p.propDep,function(b,a){var r=b.ELEMENTS;return a.def(r,"?",r,".primType:",4)}):f?new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),n=function(){if("count"in x){var a=x.count|0;h.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",r.commandStr);return g(function(){return a})}if("count"in l){var e=
l.count;return d(e,function(a,r){var d=a.invoke(r,e);b.optional(function(){a.assert(r,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(Ed){if(O(p)){if(p)return qd?new q(qd.thisDep,qd.contextDep,qd.propDep,function(a,r){var e=r.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(r,e+">=0","invalid vertex offset/element buffer too small")});return e}):g(function(b,a){return a.def(b.ELEMENTS,".vertCount")});var k=g(function(){return-1});
b.optional(function(){k.MISSING=!0});return k}var ba=new q(p.thisDep||qd.thisDep,p.contextDep||qd.contextDep,p.propDep||qd.propDep,function(b,a){var r=b.ELEMENTS;return b.OFFSET?a.def(r,"?",r,".vertCount-",b.OFFSET,":-1"):a.def(r,"?",r,".vertCount:-1")});b.optional(function(){ba.DYNAMIC=!0});return ba}return f?new q(m.thisDep,m.contextDep,m.propDep,function(b,a){return a.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),ia=k("instances",!1);return{elements:p,primitive:t,
count:n,instances:ia,offset:qd,vao:m,vaoActive:f,elementsActive:Ed,"static":h}}function ea(a,r){var e=a["static"],k=a.dynamic,x={};ca.forEach(function(a){function ba(b,r){if(a in e){var h=b(e[a]);x[l]=g(function(){return h})}else if(a in k){var m=k[a];x[l]=d(m,function(b,a){return r(b,a,b.invoke(a,m))})}}var l=K(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return ba(function(e){b.commandType(e,
"boolean",a,r.commandStr);return e},function(r,e,d){b.optional(function(){r.assert(e,"typeof "+d+'==="boolean"',"invalid flag "+a,r.commandStr)});return d});case "depth.func":return ba(function(e){b.commandParameter(e,f,"invalid "+a,r.commandStr);return f[e]},function(r,e,d){var k=r.constants.compareFuncs;b.optional(function(){r.assert(e,d+" in "+k,"invalid "+a+", must be one of "+y(f))});return e.def(k,"[",d,"]")});case "depth.range":return ba(function(a){b.command(w(a)&&2===a.length&&"number"===
typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",r.commandStr);return a},function(a,r,e){b.optional(function(){a.assert(r,a.shared.isArrayLike+"("+e+")&&"+e+".length===2&&typeof "+e+'[0]==="number"&&typeof '+e+'[1]==="number"&&'+e+"[0]<="+e+"[1]","depth range must be a 2d array")});var d=r.def("+",e,"[0]"),k=r.def("+",e,"[1]");return[d,k]});case "blend.func":return ba(function(a){b.commandType(a,"object","blend.func",r.commandStr);var e="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in
a?a.srcAlpha:a.src,k="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(e,I,l+".srcRGB",r.commandStr);b.commandParameter(d,I,l+".srcAlpha",r.commandStr);b.commandParameter(k,I,l+".dstRGB",r.commandStr);b.commandParameter(a,I,l+".dstAlpha",r.commandStr);b.command(-1===Id.indexOf(e+", "+k),"unallowed blending combination (srcRGB, dstRGB) = ("+e+", "+k+")",r.commandStr);return[I[e],I[k],I[d],I[a]]},function(r,e,d){function k(ba,l){var g=e.def('"',ba,l,'" in ',d,"?",d,".",
ba,l,":",d,".",ba);b.optional(function(){r.assert(e,g+" in "+x,"invalid "+a+"."+ba+l+", must be one of "+y(I))});return g}var x=r.constants.blendFuncs;b.optional(function(){r.assert(e,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var ba=k("src","RGB"),l=k("dst","RGB");b.optional(function(){r.assert(e,r.constants.invalidBlendCombinations+".indexOf("+ba+'+", "+'+l+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var g=e.def(x,"[",ba,"]"),h=e.def(x,"[",
k("src","Alpha"),"]"),m=e.def(x,"[",l,"]"),f=e.def(x,"[",k("dst","Alpha"),"]");return[g,m,h,f]});case "blend.equation":return ba(function(e){if("string"===typeof e)return b.commandParameter(e,va,"invalid "+a,r.commandStr),[va[e],va[e]];if("object"===typeof e)return b.commandParameter(e.rgb,va,a+".rgb",r.commandStr),b.commandParameter(e.alpha,va,a+".alpha",r.commandStr),[va[e.rgb],va[e.alpha]];b.commandRaise("invalid blend.equation",r.commandStr)},function(r,e,d){var k=r.constants.blendEquations,x=
e.def(),ba=e.def(),l=r.cond("typeof ",d,'==="string"');b.optional(function(){function b(a,e,d){r.assert(a,d+" in "+k,"invalid "+e+", must be one of "+y(va))}b(l.then,a,d);r.assert(l["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);b(l["else"],a+".rgb",d+".rgb");b(l["else"],a+".alpha",d+".alpha")});l.then(x,"=",ba,"=",k,"[",d,"];");l["else"](x,"=",k,"[",d,".rgb];",ba,"=",k,"[",d,".alpha];");e(l);return[x,ba]});case "blend.color":return ba(function(a){b.command(w(a)&&4===a.length,"blend.color must be a 4d array",
r.commandStr);return Y(4,function(b){return+a[b]})},function(a,r,e){b.optional(function(){a.assert(r,a.shared.isArrayLike+"("+e+")&&"+e+".length===4","blend.color must be a 4d array")});return Y(4,function(a){return r.def("+",e,"[",a,"]")})});case "stencil.mask":return ba(function(a){b.commandType(a,"number",l,r.commandStr);return a|0},function(a,r,e){b.optional(function(){a.assert(r,"typeof "+e+'==="number"',"invalid stencil.mask")});return r.def(e,"|0")});case "stencil.func":return ba(function(e){b.commandType(e,
"object",l,r.commandStr);var d=e.cmp||"keep",k=e.ref||0;e="mask"in e?e.mask:-1;b.commandParameter(d,f,a+".cmp",r.commandStr);b.commandType(k,"number",a+".ref",r.commandStr);b.commandType(e,"number",a+".mask",r.commandStr);return[f[d],k,e]},function(a,r,e){var d=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(r,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(e+"&&typeof ",e,'==="object"');b('!("cmp" in ',e,")||(",e,".cmp in ",d,")")});var k=r.def('"cmp" in ',
e,"?",d,"[",e,".cmp]",":",7680),x=r.def(e,".ref|0"),ba=r.def('"mask" in ',e,"?",e,".mask|0:-1");return[k,x,ba]});case "stencil.opFront":case "stencil.opBack":return ba(function(e){b.commandType(e,"object",l,r.commandStr);var d=e.fail||"keep",k=e.zfail||"keep";e=e.zpass||"keep";b.commandParameter(d,h,a+".fail",r.commandStr);b.commandParameter(k,h,a+".zfail",r.commandStr);b.commandParameter(e,h,a+".zpass",r.commandStr);return["stencil.opBack"===a?1029:1028,h[d],h[k],h[e]]},function(e,r,d){function k(ba){b.optional(function(){e.assert(r,
'!("'+ba+'" in '+d+")||("+d+"."+ba+" in "+x+")","invalid "+a+"."+ba+", must be one of "+y(h))});return r.def('"',ba,'" in ',d,"?",x,"[",d,".",ba,"]:",7680)}var x=e.constants.stencilOps;b.optional(function(){e.assert(r,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,k("fail"),k("zfail"),k("zpass")]});case "polygonOffset.offset":return ba(function(a){b.commandType(a,"object",l,r.commandStr);var e=a.factor|0;a=a.units|0;b.commandType(e,"number",l+".factor",r.commandStr);
b.commandType(a,"number",l+".units",r.commandStr);return[e,a]},function(e,r,d){b.optional(function(){e.assert(r,d+"&&typeof "+d+'==="object"',"invalid "+a)});var k=r.def(d,".factor|0"),x=r.def(d,".units|0");return[k,x]});case "cull.face":return ba(function(a){var e=0;"front"===a?e=1028:"back"===a&&(e=1029);b.command(!!e,l,r.commandStr);return e},function(a,e,r){b.optional(function(){a.assert(e,r+'==="front"||'+r+'==="back"',"invalid cull.face")});return e.def(r,'==="front"?',1028,":",1029)});case "lineWidth":return ba(function(a){b.command("number"===
typeof a&&a>=L.lineWidthDims[0]&&a<=L.lineWidthDims[1],"invalid line width, must be a positive number between "+L.lineWidthDims[0]+" and "+L.lineWidthDims[1],r.commandStr);return a},function(a,e,r){b.optional(function(){a.assert(e,"typeof "+r+'==="number"&&'+r+">="+L.lineWidthDims[0]+"&&"+r+"<="+L.lineWidthDims[1],"invalid line width")});return r});case "frontFace":return ba(function(a){b.commandParameter(a,z,l,r.commandStr);return z[a]},function(a,e,r){b.optional(function(){a.assert(e,r+'==="cw"||'+
r+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(r+'==="cw"?2304:2305')});case "colorMask":return ba(function(a){b.command(w(a)&&4===a.length,"color.mask must be length 4 array",r.commandStr);return a.map(function(a){return!!a})},function(a,e,r){b.optional(function(){a.assert(e,a.shared.isArrayLike+"("+r+")&&"+r+".length===4","invalid color.mask")});return Y(4,function(a){return"!!"+r+"["+a+"]"})});case "sample.coverage":return ba(function(a){b.command("object"===typeof a&&
a,l,r.commandStr);var e="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof e&&0<=e&&1>=e,"sample.coverage.value must be a number between 0 and 1",r.commandStr);return[e,a]},function(a,e,r){b.optional(function(){a.assert(e,r+"&&typeof "+r+'==="object"',"invalid sample.coverage")});var d=e.def('"value" in ',r,"?+",r,".value:1"),k=e.def("!!",r,".invert");return[d,k]})}});return x}function Ea(a,e){var k=a["static"],x=a.dynamic,l={};y(k).forEach(function(a){var d=k[a],x;if("number"===typeof d||
"boolean"===typeof d)x=g(function(){return d});else if("function"===typeof d){var ba=d._reglType;"texture2d"===ba||"textureCube"===ba?x=g(function(a){return a.link(d)}):"framebuffer"===ba||"framebufferCube"===ba?(b.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',e.commandStr),x=g(function(a){return a.link(d.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',e.commandStr)}else w(d)?x=g(function(e){return e.global.def("[",Y(d.length,function(r){b.command("number"===
typeof d[r]||"boolean"===typeof d[r],"invalid uniform "+a,e.commandStr);return d[r]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',e.commandStr);x.value=d;l[a]=x});y(x).forEach(function(a){var b=x[a];l[a]=d(b,function(a,e){return a.invoke(e,b)})});return l}function Na(a,e){var k=a["static"],x=a.dynamic,l={};y(k).forEach(function(a){var d=k[a],x=m.id(a),ba=new ka;if(c(d))ba.state=1,ba.buffer=fa.getBuffer(fa.create(d,34962,!1,!0)),ba.type=0;else{var h=fa.getBuffer(d);if(h)ba.state=
1,ba.buffer=h,ba.type=0;else if(b.command("object"===typeof d&&d,"invalid data for attribute "+a,e.commandStr),"constant"in d){var f=d.constant;ba.buffer="null";ba.state=2;"number"===typeof f?ba.x=f:(b.command(w(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,e.commandStr),G.forEach(function(a,b){b<f.length&&(ba[a]=f[b])}))}else{h=c(d.buffer)?fa.getBuffer(fa.create(d.buffer,34962,!1,!0)):fa.getBuffer(d.buffer);b.command(!!h,'missing buffer for attribute "'+a+'"',e.commandStr);var p=
d.offset|0;b.command(0<=p,'invalid offset for attribute "'+a+'"',e.commandStr);var t=d.stride|0;b.command(0<=t&&256>t,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',e.commandStr);var ia=d.size|0;b.command(!("size"in d)||0<ia&&4>=ia,'invalid size for attribute "'+a+'", must be 1,2,3,4',e.commandStr);var u=!!d.normalized,ja=0;"type"in d&&(b.commandParameter(d.type,n,"invalid type for attribute "+a,e.commandStr),ja=n[d.type]);var z=d.divisor|0;b.optional(function(){"divisor"in
d&&(b.command(0===z||R,'cannot specify divisor for attribute "'+a+'", instancing not supported',e.commandStr),b.command(0<=z,'invalid divisor for attribute "'+a+'"',e.commandStr));var k=e.commandStr,x="buffer offset divisor normalized type size stride".split(" ");y(d).forEach(function(e){b.command(0<=x.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+a+'" (valid parameters are '+x+")",k)})});ba.buffer=h;ba.state=1;ba.size=ia;ba.normalized=u;ba.type=ja||h.dtype;ba.offset=p;ba.stride=
t;ba.divisor=z}}l[a]=g(function(a,b){var e=a.attribCache;if(x in e)return e[x];var r={isStream:!1};y(ba).forEach(function(a){r[a]=ba[a]});ba.buffer&&(r.buffer=a.link(ba.buffer),r.type=r.type||r.buffer+".dtype");return e[x]=r})});y(x).forEach(function(a){var e=x[a];l[a]=d(e,function(r,d){function k(a){d(m[a],"=",x,".",a,"|0;")}var x=r.invoke(d,e),ba=r.shared,l=r.constants,g=ba.isBufferArgs,h=ba.buffer;b.optional(function(){r.assert(d,x+"&&(typeof "+x+'==="object"||typeof '+x+'==="function")&&('+g+
"("+x+")||"+h+".getBuffer("+x+")||"+h+".getBuffer("+x+".buffer)||"+g+"("+x+'.buffer)||("constant" in '+x+"&&(typeof "+x+'.constant==="number"||'+ba.isArrayLike+"("+x+".constant))))",'invalid dynamic attribute "'+a+'"')});var m={isStream:d.def(!1)},f=new ka;f.state=1;y(f).forEach(function(a){m[a]=d.def(""+f[a])});var p=m.buffer,Bb=m.type;d("if(",g,"(",x,")){",m.isStream,"=true;",p,"=",h,".createStream(",34962,",",x,");",Bb,"=",p,".dtype;","}else{",p,"=",h,".getBuffer(",x,");","if(",p,"){",Bb,"=",p,
".dtype;",'}else if("constant" in ',x,"){",m.state,"=",2,";","if(typeof "+x+'.constant === "number"){',m[G[0]],"=",x,".constant;",G.slice(1).map(function(a){return m[a]}).join("="),"=0;","}else{",G.map(function(a,b){return m[a]+"="+x+".constant.length>"+b+"?"+x+".constant["+b+"]:0;"}).join(""),"}}else{","if(",g,"(",x,".buffer)){",p,"=",h,".createStream(",34962,",",x,".buffer);","}else{",p,"=",h,".getBuffer(",x,".buffer);","}",Bb,'="type" in ',x,"?",l.glTypes,"[",x,".type]:",p,".dtype;",m.normalized,
"=!!",x,".normalized;");k("size");k("offset");k("stride");k("divisor");d("}}");d.exit("if(",m.isStream,"){",h,".destroyStream(",p,");","}");return m})});return l}function Hb(a){var b=a["static"],e=a.dynamic,k={};y(b).forEach(function(a){var e=b[a];k[a]=g(function(a,b){return"number"===typeof e||"boolean"===typeof e?""+e:a.link(e)})});y(e).forEach(function(a){var b=e[a];k[a]=d(b,function(a,e){return a.invoke(e,b)})});return k}function Ha(a,e,d,k,x){function l(a){var e=p[a];e&&(n[a]=e)}var g=a["static"],
h=a.dynamic;b.optional(function(){function a(r){y(r).forEach(function(a){b.command(0<=e.indexOf(a),'unknown parameter "'+a+'"',x.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ca);a(g);a(h)});var m=Q(a,e),f=Ob(a,x),p=$a(a,f,x),ia=ma(a,x),n=ea(a,x),u=t(a,x,m);l("viewport");l(K("scissor.box"));var z=0<y(n).length,f={framebuffer:f,draw:ia,shader:u,state:n,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};f.profile=J(a,x);
f.uniforms=Ea(d,x);f.drawVAO=f.scopeVAO=ia.vao;if(!f.drawVAO&&u.program&&!m&&F.angle_instanced_arrays&&ia["static"].elements){var ja=!0;a=u.program.attributes.map(function(a){a=e["static"][a];ja=ja&&!!a;return a});if(ja&&0<a.length){var C=Ka.getVAO(Ka.createVAO({attributes:a,elements:ia["static"].elements}));f.drawVAO=new q(null,null,null,function(a,e){return a.link(C)});f.useVAO=!0}}m?f.useVAO=!0:f.attributes=Na(e,x);f.context=Hb(k,x);return f}function S(a,e,b){var d=a.shared.context,k=a.scope();
y(b).forEach(function(x){e.save(d,"."+x);var l=b[x].append(a,e);Array.isArray(l)?k(d,".",x,"=[",l.join(),"];"):k(d,".",x,"=",l,";")});e(k)}function ob(a,e,b,d){var k=a.shared,x=k.gl,l=k.framebuffer,g;ha&&(g=e.def(k.extensions,".webgl_draw_buffers"));var h=a.constants,k=h.drawBuffer,h=h.backBuffer;a=b?b.append(a,e):e.def(l,".next");d||e("if(",a,"!==",l,".cur){");e("if(",a,"){",x,".bindFramebuffer(",36160,",",a,".framebuffer);");ha&&e(g,".drawBuffersWEBGL(",k,"[",a,".colorAttachments.length]);");e("}else{",
x,".bindFramebuffer(",36160,",null);");ha&&e(g,".drawBuffersWEBGL(",h,");");e("}",l,".cur=",a,";");d||e("}")}function da(a,e,b){var d=a.shared,k=d.gl,l=a.current,g=a.next,h=d.current,m=d.next,f=a.cond(h,".dirty");ca.forEach(function(e){e=K(e);if(!(e in b.state)){var r,d;if(e in g){r=g[e];d=l[e];var p=Y(E[e].length,function(a){return f.def(r,"[",a,"]")});f(a.cond(p.map(function(a,e){return a+"!=="+d+"["+e+"]"}).join("||")).then(k,".",ja[e],"(",p,");",p.map(function(a,e){return d+"["+e+"]="+a}).join(";"),
";"))}else r=f.def(m,".",e),p=a.cond(r,"!==",h,".",e),f(p),e in x?p(a.cond(r).then(k,".enable(",x[e],");")["else"](k,".disable(",x[e],");"),h,".",e,"=",r,";"):p(k,".",ja[e],"(",r,");",h,".",e,"=",r,";")}});0===y(b.state).length&&f(h,".dirty=false;");e(f)}function wa(a,e,b,d){var k=a.shared,l=a.current,g=k.current,h=k.gl;ga(y(b)).forEach(function(k){var f=b[k];if(!d||d(f)){var m=f.append(a,e);if(x[k]){var p=x[k];O(f)?m?e(h,".enable(",p,");"):e(h,".disable(",p,");"):e(a.cond(m).then(h,".enable(",p,
");")["else"](h,".disable(",p,");"));e(g,".",k,"=",m,";")}else if(w(m)){var t=l[k];e(h,".",ja[k],"(",m,");",m.map(function(a,e){return t+"["+e+"]="+a}).join(";"),";")}else e(h,".",ja[k],"(",m,");",g,".",k,"=",m,";")}})}function bc(a,e){R&&(a.instancing=e.def(a.shared.extensions,".angle_instanced_arrays"))}function cc(a,e,b,d,k){function x(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function l(a){ia=e.def();a(ia,"=",x(),";");"string"===typeof k?a(f,".count+=",k,";"):a(f,
".count++;");Qa&&(d?(n=e.def(),a(n,"=",t,".getNumPendingQueries();")):a(t,".beginQuery(",f,");"))}function g(a){a(f,".cpuTime+=",x(),"-",ia,";");Qa&&(d?a(t,".pushScopeStats(",n,",",t,".getNumPendingQueries(),",f,");"):a(t,".endQuery();"))}function h(a){var b=e.def(p,".profile");e(p,".profile=",a,";");e.exit(p,".profile=",b,";")}var m=a.shared,f=a.stats,p=m.current,t=m.timer;b=b.profile;var ia,n;if(b){if(O(b)){b.enable?(l(e),g(e.exit),h("true")):h("false");return}b=b.append(a,e);h(b)}else b=e.def(p,
".profile");m=a.block();l(m);e("if(",b,"){",m,"}");a=a.block();g(a);e.exit("if(",b,"){",a,"}")}function Qc(a,e,d,k,x){function l(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(b,d,k){function x(){e("if(!",p,".buffer){",m,".enableVertexAttribArray(",f,");}");var b=k.type,l;l=k.size?e.def(k.size,"||",d):d;e("if(",p,".type!==",b,"||",p,".size!==",l,"||",n.map(function(a){return p+
"."+a+"!=="+k[a]}).join("||"),"){",m,".bindBuffer(",34962,",",t,".buffer);",m,".vertexAttribPointer(",[f,l,b,k.normalized,k.stride,k.offset],");",p,".type=",b,";",p,".size=",l,";",n.map(function(a){return p+"."+a+"="+k[a]+";"}).join(""),"}");R&&(b=k.divisor,e("if(",p,".divisor!==",b,"){",a.instancing,".vertexAttribDivisorANGLE(",[f,b],");",p,".divisor=",b,";}"))}function l(){e("if(",p,".buffer){",m,".disableVertexAttribArray(",f,");",p,".buffer=null;","}if(",G.map(function(a,e){return p+"."+a+"!=="+
ia[e]}).join("||"),"){",m,".vertexAttrib4f(",f,",",ia,");",G.map(function(a,e){return p+"."+a+"="+ia[e]+";"}).join(""),"}")}var m=h.gl,f=e.def(b,".location"),p=e.def(h.attributes,"[",f,"]");b=k.state;var t=k.buffer,ia=[k.x,k.y,k.z,k.w],n=["buffer","normalized","offset","stride"];1===b?x():2===b?l():(e("if(",b,"===",1,"){"),x(),e("}else{"),l(),e("}"))}var h=a.shared;k.forEach(function(k){var h=k.name,f=d.attributes[h],m;if(f){if(!x(f))return;m=f.append(a,e)}else{if(!x(T))return;var p=a.scopeAttrib(h);
b.optional(function(){a.assert(e,p+".state","missing attribute "+h)});m={};y(new ka).forEach(function(a){m[a]=e.def(p,".",a)})}g(a.link(k),l(k.info.type),m)})}function td(a,e,d,k,x,l){for(var g=a.shared,h=g.gl,f,p=0;p<k.length;++p){var t=k[p],ia=t.name,n=t.info.type,u=d.uniforms[ia],t=a.link(t)+".location",ja;if(u){if(!x(u))continue;if(O(u)){var z=u.value;b.command(null!==z&&"undefined"!==typeof z,'missing uniform "'+ia+'"',a.commandStr);if(35678===n||35680===n)b.command("function"===typeof z&&(35678===
n&&("texture2d"===z._reglType||"framebuffer"===z._reglType)||35680===n&&("textureCube"===z._reglType||"framebufferCube"===z._reglType)),"invalid texture for uniform "+ia,a.commandStr),u=a.link(z._texture||z.color[0]._texture),e(h,".uniform1i(",t,",",u+".bind());"),e.exit(u,".unbind();");else if(35674===n||35675===n||35676===n){b.optional(function(){b.command(w(z),"invalid matrix for uniform "+ia,a.commandStr);b.command(35674===n&&4===z.length||35675===n&&9===z.length||35676===n&&16===z.length,"invalid length for matrix uniform "+
ia,a.commandStr)});var u=a.global.def("new Float32Array(["+Array.prototype.slice.call(z)+"])"),C=2;35675===n?C=3:35676===n&&(C=4);e(h,".uniformMatrix",C,"fv(",t,",false,",u,");")}else{switch(n){case 5126:b.commandType(z,"number","uniform "+ia,a.commandStr);f="1f";break;case 35664:b.command(w(z)&&2===z.length,"uniform "+ia,a.commandStr);f="2f";break;case 35665:b.command(w(z)&&3===z.length,"uniform "+ia,a.commandStr);f="3f";break;case 35666:b.command(w(z)&&4===z.length,"uniform "+ia,a.commandStr);f=
"4f";break;case 35670:b.commandType(z,"boolean","uniform "+ia,a.commandStr);f="1i";break;case 5124:b.commandType(z,"number","uniform "+ia,a.commandStr);f="1i";break;case 35671:b.command(w(z)&&2===z.length,"uniform "+ia,a.commandStr);f="2i";break;case 35667:b.command(w(z)&&2===z.length,"uniform "+ia,a.commandStr);f="2i";break;case 35672:b.command(w(z)&&3===z.length,"uniform "+ia,a.commandStr);f="3i";break;case 35668:b.command(w(z)&&3===z.length,"uniform "+ia,a.commandStr);f="3i";break;case 35673:b.command(w(z)&&
4===z.length,"uniform "+ia,a.commandStr);f="4i";break;case 35669:b.command(w(z)&&4===z.length,"uniform "+ia,a.commandStr),f="4i"}e(h,".uniform",f,"(",t,",",w(z)?Array.prototype.slice.call(z):z,");")}continue}else ja=u.append(a,e)}else{if(!x(T))continue;ja=e.def(g.uniforms,"[",m.id(ia),"]")}35678===n?(b(!Array.isArray(ja),"must specify a scalar prop for textures"),e("if(",ja,"&&",ja,'._reglType==="framebuffer"){',ja,"=",ja,".color[0];","}")):35680===n&&(b(!Array.isArray(ja),"must specify a scalar prop for cube maps"),
e("if(",ja,"&&",ja,'._reglType==="framebufferCube"){',ja,"=",ja,".color[0];","}"));b.optional(function(){function d(b,k){a.assert(e,b,'bad data or missing for uniform "'+ia+'".  '+k)}function k(a){b(!Array.isArray(ja),"must not specify an array type for uniform");d("typeof "+ja+'==="'+a+'"',"invalid type, expected "+a)}function x(e,k){Array.isArray(ja)?b(ja.length===e,"must have length "+e):d(g.isArrayLike+"("+ja+")&&"+ja+".length==="+e,"invalid vector, should have length "+e,a.commandStr)}function l(e){b(!Array.isArray(ja),
"must not specify a value type");d("typeof "+ja+'==="function"&&'+ja+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(n){case 5124:k("number");break;case 35667:x(2,"number");break;case 35668:x(3,"number");break;case 35669:x(4,"number");break;case 5126:k("number");break;case 35664:x(2,"number");break;case 35665:x(3,"number");break;case 35666:x(4,"number");break;case 35670:k("boolean");break;case 35671:x(2,"boolean");break;case 35672:x(3,"boolean");break;
case 35673:x(4,"boolean");break;case 35674:x(4,"number");break;case 35675:x(9,"number");break;case 35676:x(16,"number");break;case 35678:l(3553);break;case 35680:l(34067)}});u=1;switch(n){case 35678:case 35680:u=e.def(ja,"._texture");e(h,".uniform1i(",t,",",u,".bind());");e.exit(u,".unbind();");continue;case 5124:case 35670:f="1i";break;case 35667:case 35671:f="2i";u=2;break;case 35668:case 35672:f="3i";u=3;break;case 35669:case 35673:f="4i";u=4;break;case 5126:f="1f";break;case 35664:f="2f";u=2;
break;case 35665:f="3f";u=3;break;case 35666:f="4f";u=4;break;case 35674:f="Matrix2fv";break;case 35675:f="Matrix3fv";break;case 35676:f="Matrix4fv"}if("M"===f.charAt(0)){e(h,".uniform",f,"(",t,",");var t=Math.pow(n-35674+2,2),c=a.global.def("new Float32Array(",t,")");Array.isArray(ja)?e("false,(",Y(t,function(a){return c+"["+a+"]="+ja[a]}),",",c,")"):e("false,(Array.isArray(",ja,")||",ja," instanceof Float32Array)?",ja,":(",Y(t,function(a){return c+"["+a+"]="+ja+"["+a+"]"}),",",c,")");e(");")}else{if(1<
u){for(var C=[],W=[],y=0;y<u;++y)Array.isArray(ja)?W.push(ja[y]):W.push(e.def(ja+"["+y+"]")),l&&C.push(e.def());l&&e("if(!",a.batchId,"||",C.map(function(a,e){return a+"!=="+W[e]}).join("||"),"){",C.map(function(a,e){return a+"="+W[e]+";"}).join(""));e(h,".uniform",f,"(",t,",",W.join(","),");")}else b(!Array.isArray(ja),"uniform value must not be an array"),l&&(u=e.def(),e("if(!",a.batchId,"||",u,"!==",ja,"){",u,"=",ja,";")),e(h,".uniform",f,"(",t,",",ja,");");l&&e("}")}}}function wc(a,e,d,k){function x(b){var l=
p[b];return l?l.contextDep&&k.contextDynamic||l.propDep?l.append(a,d):l.append(a,e):e.def(m,".",b)}function l(){function a(){d(ja,".drawElementsInstancedANGLE(",[t,u,C,n+"<<(("+C+"-5121)>>1)",z],");")}function e(){d(ja,".drawArraysInstancedANGLE(",[t,n,u,z],");")}ia&&"null"!==ia?c?a():(d("if(",ia,"){"),a(),d("}else{"),e(),d("}")):e()}function g(){function a(){d(f+".drawElements("+[t,u,C,n+"<<(("+C+"-5121)>>1)"]+");")}function e(){d(f+".drawArrays("+[t,n,u]+");")}ia&&"null"!==ia?c?a():(d("if(",ia,
"){"),a(),d("}else{"),e(),d("}")):e()}var h=a.shared,f=h.gl,m=h.draw,p=k.draw,ia=function(){var b=p.elements,x=e;if(b){if(b.contextDep&&k.contextDynamic||b.propDep)x=d;b=b.append(a,x);p.elementsActive&&x("if("+b+")"+f+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=x.def(),x(b,"=",m,".","elements",";","if(",b,"){",f,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",h.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+h.vao,".currentVAO.elements);",ra?"":"if("+b+")"+f+".bindBuffer(34963,"+
b+".buffer.buffer);","}");return b}(),t=x("primitive"),n=x("offset"),u=function(){var x=p.count,l,g=e;if(x){if(x.contextDep&&k.contextDynamic||x.propDep)g=d;l=x.append(a,g);b.optional(function(){x.MISSING&&a.assert(e,"false","missing vertex count");x.DYNAMIC&&a.assert(g,l+">=0","missing vertex count")})}else l=g.def(m,".","count"),b.optional(function(){a.assert(g,l+">=0","missing vertex count")});return l}();if("number"===typeof u){if(0===u)return}else d("if(",u,"){"),d.exit("}");var z,ja;R&&(z=x("instances"),
ja=a.instancing);var C=ia+".type",c=p.elements&&O(p.elements)&&!p.vaoActive;R&&("number"!==typeof z||0<=z)?"string"===typeof z?(d("if(",z,">0){"),l(),d("}else if(",z,"<0){"),g(),d("}")):l():g()}function V(a,e,d,k,x){var l=A();x=l.proc("body",x);b.optional(function(){l.commandStr=e.commandStr;l.command=l.link(e.commandStr)});R&&(l.instancing=x.def(l.shared.extensions,".angle_instanced_arrays"));a(l,x,d,k);return l.compile().body}function C(a,e,b,d){bc(a,e);b.useVAO?b.drawVAO?e(a.shared.vao,".setVAO(",
b.drawVAO.append(a,e),");"):e(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(e(a.shared.vao,".setVAO(null);"),Qc(a,e,b,d.attributes,function(){return!0}));td(a,e,b,d.uniforms,function(){return!0},!1);wc(a,e,e,b)}function la(a,e){var b=a.proc("draw",1);bc(a,b);S(a,b,e.context);ob(a,b,e.framebuffer);da(a,b,e);wa(a,b,e.state);cc(a,b,e,!1,!0);var d=e.shader.progVar.append(a,b);b(a.shared.gl,".useProgram(",d,".program);");if(e.shader.program)C(a,b,e,e.shader.program);else{b(a.shared.vao,".setVAO(null);");
var k=a.global.def("{}"),x=b.def(d,".id"),l=b.def(k,"[",x,"]");b(a.cond(l).then(l,".call(this,a0);")["else"](l,"=",k,"[",x,"]=",a.link(function(b){return V(C,a,e,b,1)}),"(",d,");",l,".call(this,a0);"))}0<y(e.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function Ca(a,e,b,d){function k(){return!0}a.batchId="a1";bc(a,e);Qc(a,e,b,d.attributes,k);td(a,e,b,d.uniforms,k,!1);wc(a,e,e,b)}function Lb(a,e,b,d){function k(a){return a.contextDep&&l||a.propDep}
function x(a){return!k(a)}bc(a,e);var l=b.contextDep,g=e.def(),h=e.def();a.shared.props=h;a.batchId=g;var f=a.scope(),m=a.scope();e(f.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",h,"=","a0","[",g,"];",m,"}",f.exit);b.needsContext&&S(a,m,b.context);b.needsFramebuffer&&ob(a,m,b.framebuffer);wa(a,m,b.state,k);b.profile&&k(b.profile)&&cc(a,m,b,!1,!0);d?(b.useVAO?b.drawVAO?k(b.drawVAO)?m(a.shared.vao,".setVAO(",b.drawVAO.append(a,m),");"):f(a.shared.vao,".setVAO(",b.drawVAO.append(a,f),");"):f(a.shared.vao,
".setVAO(",a.shared.vao,".targetVAO);"):(f(a.shared.vao,".setVAO(null);"),Qc(a,f,b,d.attributes,x),Qc(a,m,b,d.attributes,k)),td(a,f,b,d.uniforms,x,!1),td(a,m,b,d.uniforms,k,!0),wc(a,f,m,b)):(e=a.global.def("{}"),d=b.shader.progVar.append(a,m),h=m.def(d,".id"),f=m.def(e,"[",h,"]"),m(a.shared.gl,".useProgram(",d,".program);","if(!",f,"){",f,"=",e,"[",h,"]=",a.link(function(e){return V(Ca,a,b,e,2)}),"(",d,");}",f,".call(this,a0[",g,"],",g,");"))}function nc(a,e){function b(a){return a.contextDep&&k||
a.propDep}var d=a.proc("batch",2);a.batchId="0";bc(a,d);var k=!1,x=!0;y(e.context).forEach(function(a){k=k||e.context[a].propDep});k||(S(a,d,e.context),x=!1);var l=e.framebuffer,g=!1;l?(l.propDep?k=g=!0:l.contextDep&&k&&(g=!0),g||ob(a,d,l)):ob(a,d,null);e.state.viewport&&e.state.viewport.propDep&&(k=!0);da(a,d,e);wa(a,d,e.state,function(a){return!b(a)});e.profile&&b(e.profile)||cc(a,d,e,!1,"a1");e.contextDep=k;e.needsContext=x;e.needsFramebuffer=g;x=e.shader.progVar;if(x.contextDep&&k||x.propDep)Lb(a,
d,e,null);else if(x=x.append(a,d),d(a.shared.gl,".useProgram(",x,".program);"),e.shader.program)Lb(a,d,e,e.shader.program);else{d(a.shared.vao,".setVAO(null);");var l=a.global.def("{}"),g=d.def(x,".id"),h=d.def(l,"[",g,"]");d(a.cond(h).then(h,".call(this,a0,a1);")["else"](h,"=",l,"[",g,"]=",a.link(function(b){return V(Lb,a,e,b,2)}),"(",x,");",h,".call(this,a0,a1);"))}0<y(e.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function Zc(a,e){function b(x){var l=
e.shader[x];l&&d.set(k.shader,"."+x,l.append(a,d))}var d=a.proc("scope",3);a.batchId="a2";var k=a.shared,x=k.current;S(a,d,e.context);e.framebuffer&&e.framebuffer.append(a,d);ga(y(e.state)).forEach(function(b){var x=e.state[b].append(a,d);w(x)?x.forEach(function(e,k){d.set(a.next[b],"["+k+"]",e)}):d.set(k.next,"."+b,x)});cc(a,d,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var x=e.draw[b];x&&d.set(k.draw,"."+b,""+x.append(a,d))});y(e.uniforms).forEach(function(b){var x=
e.uniforms[b].append(a,d);Array.isArray(x)&&(x="["+x.join()+"]");d.set(k.uniforms,"["+m.id(b)+"]",x)});y(e.attributes).forEach(function(b){var k=e.attributes[b].append(a,d),x=a.scopeAttrib(b);y(new ka).forEach(function(a){d.set(x,"."+a,k[a])})});e.scopeVAO&&d.set(k.vao,".targetVAO",e.scopeVAO.append(a,d));b("vert");b("frag");0<y(e.state).length&&(d(x,".dirty=true;"),d.exit(x,".dirty=true;"));d("a1(",a.shared.context,",a0,",a.batchId,");")}function D(a){if("object"===typeof a&&!w(a)){for(var e=y(a),
b=0;b<e.length;++b)if(B.isDynamic(a[e[b]]))return!0;return!1}}function u(a,e,b){function k(a,e){g.forEach(function(b){var d=x[b];B.isDynamic(d)&&(d=a.invoke(e,d),e(p,".",b,"=",d,";"))})}var x=e["static"][b];if(x&&D(x)){var l=a.global,g=y(x),h=!1,f=!1,m=!1,p=a.global.def("{}");g.forEach(function(e){var b=x[e];if(B.isDynamic(b))"function"===typeof b&&(b=x[e]=B.unbox(b)),e=d(b,null),h=h||e.thisDep,m=m||e.propDep,f=f||e.contextDep;else{l(p,".",e,"=");switch(typeof b){case "number":l(b);break;case "string":l('"',
b,'"');break;case "object":Array.isArray(b)&&l("[",b.join(),"]");break;default:l(a.link(b))}l(";")}});e.dynamic[b]=new B.DynamicVariable(4,{thisDep:h,contextDep:f,propDep:m,ref:p,append:k});delete e["static"][b]}}var ka=Ka.Record,va={add:32774,subtract:32778,"reverse subtract":32779};F.ext_blend_minmax&&(va.min=32775,va.max=32776);var R=F.angle_instanced_arrays,ha=F.webgl_draw_buffers,ra=F.oes_vertex_array_object,E={dirty:!0,profile:X.profile},p={},ca=[],x={},ja={};N("dither",3024);N("blend.enable",
3042);P("blend.color","blendColor",[0,0,0,0]);P("blend.equation","blendEquationSeparate",[32774,32774]);P("blend.func","blendFuncSeparate",[1,0,1,0]);N("depth.enable",2929,!0);P("depth.func","depthFunc",513);P("depth.range","depthRange",[0,1]);P("depth.mask","depthMask",!0);P("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);P("cull.face","cullFace",1029);P("frontFace","frontFace",2305);P("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);P("polygonOffset.offset","polygonOffset",
[0,0]);N("sample.alpha",32926);N("sample.enable",32928);P("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);P("stencil.mask","stencilMask",-1);P("stencil.func","stencilFunc",[519,0,-1]);P("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);P("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);P("scissor.box","scissor",[0,0,H.drawingBufferWidth,H.drawingBufferHeight]);P("viewport","viewport",[0,0,H.drawingBufferWidth,H.drawingBufferHeight]);
var ia={gl:H,context:pa,strings:m,next:p,current:E,draw:kc,elements:a,buffer:fa,shader:cb,attributes:Ka.state,vao:Ka,uniforms:na,framebuffer:W,extensions:F,timer:Qa,isBufferArgs:c},k={primTypes:M,compareFuncs:f,blendFuncs:I,blendEquations:va,stencilOps:h,glTypes:n,orientationType:z};b.optional(function(){ia.isArrayLike=w});ha&&(k.backBuffer=[1029],k.drawBuffer=Y(L.maxDrawbuffers,function(a){return 0===a?[0]:Y(a,function(a){return 36064+a})}));var tc=0;return{next:p,current:E,procs:function(){var a=
A(),e=a.proc("poll"),b=a.proc("refresh"),d=a.block();e(d);b(d);var k=a.shared,l=k.gl,g=k.next,h=k.current;d(h,".dirty=false;");ob(a,e);ob(a,b,null,!0);var f;R&&(f=a.link(R));F.oes_vertex_array_object&&b(a.link(F.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<L.maxAttributes;++m){var p=b.def(k.attributes,"[",m,"]"),ia=a.cond(p,".buffer");ia.then(l,".enableVertexAttribArray(",m,");",l,".bindBuffer(",34962,",",p,".buffer.buffer);",l,".vertexAttribPointer(",m,",",p,".size,",p,".type,",
p,".normalized,",p,".stride,",p,".offset);")["else"](l,".disableVertexAttribArray(",m,");",l,".vertexAttrib4f(",m,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;");b(ia);R&&b(f,".vertexAttribDivisorANGLE(",m,",",p,".divisor);")}b(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");y(x).forEach(function(k){var f=x[k],m=d.def(g,".",k),p=a.block();p("if(",m,"){",l,".enable(",f,")}else{",l,".disable(",f,")}",h,".",k,"=",m,";");b(p);e("if(",m,"!==",h,".",k,"){",
p,"}")});y(ja).forEach(function(k){var x=ja[k],f=E[k],m,p,ia=a.block();ia(l,".",x,"(");w(f)?(x=f.length,m=a.global.def(g,".",k),p=a.global.def(h,".",k),ia(Y(x,function(a){return m+"["+a+"]"}),");",Y(x,function(a){return p+"["+a+"]="+m+"["+a+"];"}).join("")),e("if(",Y(x,function(a){return m+"["+a+"]!=="+p+"["+a+"]"}).join("||"),"){",ia,"}")):(m=d.def(g,".",k),p=d.def(h,".",k),ia(m,");",h,".",k,"=",m,";"),e("if(",m,"!==",p,"){",ia,"}"));b(ia)});return a.compile()}(),compile:function(a,e,b,d,k){var x=
A();x.stats=x.link(k);y(e["static"]).forEach(function(a){u(x,e,a)});aa.forEach(function(e){u(x,a,e)});var l=Ha(a,e,b,d,x);la(x,l);Zc(x,l);nc(x,l);return v(x.compile(),{destroy:function(){l.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(A,Z,jc){function c(g,
b){this.id=d++;this.type=g;this.data=b}function ga(d){if(0===d.length)return[];var b=d.charAt(0),g=d.charAt(d.length-1);if(1<d.length&&b===g&&('"'===b||"'"===b))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return ga(d.substr(0,b.index)).concat(ga(b[1])).concat(ga(d.substr(b.index+b[0].length)));b=d.split(".");if(1===b.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(g=0;g<b.length;++g)d=
d.concat(ga(b[g]));return d}function q(d){return"["+ga(d).join("][")+"]"}function O(d,b){if("function"===typeof d)return new c(0,d);if("number"===typeof d||"boolean"===typeof d)return new c(5,d);if(Array.isArray(d))return new c(6,d.map(function(d,g){return O(d,b+"["+g+"]")}));if(d instanceof c)return d;g(!1,"invalid option type in uniform "+b)}var g=A("./util/check"),d=0;Z.exports={DynamicVariable:c,define:function(d,b){return new c(d,q(b+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||
d instanceof c},unbox:O,accessor:q}},{"./util/check":21}],10:[function(A,Z,jc){var c=A("./util/check"),ga=A("./util/is-typed-array"),q=A("./util/is-ndarray"),O=A("./util/values"),g=A("./constants/primitives.json"),d=A("./constants/usage.json");Z.exports=function(y,b,v,oa){function Y(b){this.id=B++;w[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function H(d,g,n,w,f,h,e){d.buffer.bind();var z;g?((z=e)||ga(g)&&(!q(g)||ga(g.data))||(z=b.oes_element_index_uint?5125:5123),v._initBuffer(d.buffer,
g,n,z,3)):(y.bufferData(34963,h,n),d.buffer.dtype=z||5121,d.buffer.usage=n,d.buffer.dimension=3,d.buffer.byteLength=h);z=e;if(!e){switch(d.buffer.dtype){case 5121:case 5120:z=5121;break;case 5123:case 5122:z=5123;break;case 5125:case 5124:z=5125;break;default:c.raise("unsupported type for element array")}d.buffer.dtype=z}d.type=z;c(5125!==z||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");g=f;0>g&&(g=d.buffer.byteLength,5123===z?g>>=1:5125===
z&&(g>>=2));d.vertCount=g;g=w;0>w&&(g=4,w=d.buffer.dimension,1===w&&(g=0),2===w&&(g=1),3===w&&(g=4));d.primType=g}function F(b){oa.elementsCount--;c(null!==b.buffer,"must not double destroy elements");delete w[b.id];b.buffer.destroy();b.buffer=null}var w={},B=0,M={uint8:5121,uint16:5123};b.oes_element_index_uint&&(M.uint32=5125);Y.prototype.bind=function(){this.buffer.bind()};var n=[];return{create:function(b,n){function w(b){if(b)if("number"===typeof b)y(b),f.primType=4,f.vertCount=b|0,f.type=5121;
else{var e=null,n=35044,v=-1,B=-1,m=0,G=0;if(Array.isArray(b)||ga(b)||q(b))e=b;else if(c.type(b,"object","invalid arguments for elements"),"data"in b&&(e=b.data,c(Array.isArray(e)||ga(e)||q(e),"invalid data for element buffer")),"usage"in b&&(c.parameter(b.usage,d,"invalid element buffer usage"),n=d[b.usage]),"primitive"in b&&(c.parameter(b.primitive,g,"invalid element buffer primitive"),v=g[b.primitive]),"count"in b&&(c("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),B=
b.count|0),"type"in b&&(c.parameter(b.type,M,"invalid buffer type"),G=M[b.type]),"length"in b)m=b.length|0;else if(m=B,5123===G||5122===G)m*=2;else if(5125===G||5124===G)m*=4;H(f,e,n,v,B,m,G)}else y(),f.primType=4,f.vertCount=0,f.type=5121;return w}var y=v.create(null,34963,!0),f=new Y(y._buffer);oa.elementsCount++;w(b);w._reglType="elements";w._elements=f;w.subdata=function(b,e){y.subdata(b,e);return w};w.destroy=function(){F(f)};return w},createStream:function(b){var d=n.pop();d||(d=new Y(v.create(null,
34963,!0,!1)._buffer));H(d,b,35040,-1,-1,0,0);return d},destroyStream:function(b){n.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof Y?b._elements:null},clear:function(){O(w).forEach(F)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(A,Z,jc){var c=A("./util/sorted-object-keys"),ga=A("./util/check");Z.exports=function(q,O){function g(b){ga.type(b,
"string","extension name must be string");b=b.toLowerCase();var g;try{g=d[b]=q.getExtension(b)}catch(c){}return!!g}for(var d={},y=0;y<O.extensions.length;++y){var b=O.extensions[y];if(!g(b))return O.onDestroy(),O.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}O.optionalExtensions.forEach(g);return{extensions:d,restore:function(){c(d).forEach(function(b){if(d[b]&&!g(b))throw Error("(regl): error restoring extension "+
b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(A,Z,jc){var c=A("./util/check"),ga=A("./util/values"),q=A("./util/extend"),O=[6407,6408],g=[];g[6408]=4;g[6407]=3;var d=[];d[5121]=1;d[5126]=4;d[36193]=2;var y=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};Z.exports=function(v,oa,Y,H,F,w){function B(a,e,b){this.target=a;this.texture=e;this.renderbuffer=
b;var d=a=0;e?(a=e.width,d=e.height):b&&(a=b.width,d=b.height);this.width=a;this.height=d}function M(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function n(a,e,b){if(a){if(a.texture){a=a.texture._texture;var d=Math.max(1,a.height);c(Math.max(1,a.width)===e&&d===b,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,c(a.width===e&&a.height===b,"inconsistent width/height for renderbuffer");a.refCount+=1}}function G(a,
e){e&&(e.texture?v.framebufferTexture2D(36160,a,e.target,e.texture._texture.texture,0):v.framebufferRenderbuffer(36160,a,36161,e.renderbuffer._renderbuffer.renderbuffer))}function aa(a){var e=3553,b=null,d=null,l=a;"object"===typeof a&&(l=a.data,"target"in a&&(e=a.target|0));c.type(l,"function","invalid attachment data");a=l._reglType;"texture2d"===a?(b=l,c(3553===e)):"textureCube"===a?(b=l,c(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===a?(d=l,e=36161):c.raise("invalid regl object for attachment");
return new B(e,b,d)}function I(a,e,b,d,l){if(b)return a=H.create2D({width:a,height:e,format:d,type:l}),a._texture.refCount=0,new B(3553,a,null);a=F.create({width:a,height:e,format:d});a._renderbuffer.refCount=0;return new B(36161,null,a)}function A(a){return a&&(a.texture||a.renderbuffer)}function f(a,e,b){a&&(a.texture?a.texture.resize(e,b):a.renderbuffer&&a.renderbuffer.resize(e,b),a.width=e,a.height=b)}function h(){this.id=a++;l[this.id]=this;this.framebuffer=v.createFramebuffer();this.height=
this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function e(a){a.colorAttachments.forEach(M);M(a.depthAttachment);M(a.stencilAttachment);M(a.depthStencilAttachment)}function z(a){var e=a.framebuffer;c(e,"must not double destroy framebuffer");v.deleteFramebuffer(e);a.framebuffer=null;w.framebufferCount--;delete l[a.id]}function T(a){var e;v.bindFramebuffer(36160,a.framebuffer);var d=a.colorAttachments;for(e=0;e<d.length;++e)G(36064+
e,d[e]);for(e=d.length;e<Y.maxColorAttachments;++e)v.framebufferTexture2D(36160,36064+e,3553,null,0);v.framebufferTexture2D(36160,33306,3553,null,0);v.framebufferTexture2D(36160,36096,3553,null,0);v.framebufferTexture2D(36160,36128,3553,null,0);G(36096,a.depthAttachment);G(36128,a.stencilAttachment);G(33306,a.depthStencilAttachment);a=v.checkFramebufferStatus(36160);v.isContextLost()||36053===a||c.raise("framebuffer configuration not supported, status = "+b[a]);v.bindFramebuffer(36160,m.next?m.next.framebuffer:
null);m.cur=m.next;v.getError()}function U(a,b){function l(a,b){var f;c(m.next!==v,"can not update framebuffer which is currently in use");var h=0,z=0,w=!0,H=!0;f=null;var q=!0,B="rgba",F="uint8",G=1,M=null,t=null,W=null,ga=!1;if("number"===typeof a)h=a|0,z=b|0||h;else if(a){c.type(a,"object","invalid arguments for framebuffer");"shape"in a?(z=a.shape,c(Array.isArray(z)&&2<=z.length,"invalid shape for framebuffer"),h=z[0],z=z[1]):("radius"in a&&(h=z=a.radius),"width"in a&&(h=a.width),"height"in a&&
(z=a.height));if("color"in a||"colors"in a)f=a.color||a.colors,Array.isArray(f)&&c(1===f.length||oa.webgl_draw_buffers,"multiple render targets not supported");if(!f){"colorCount"in a&&(G=a.colorCount|0,c(0<G,"invalid color buffer count"));"colorTexture"in a&&(q=!!a.colorTexture,B="rgba4");if("colorType"in a){F=a.colorType;if(q)c(oa.oes_texture_float||!("float"===F||"float32"===F),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(oa.oes_texture_half_float||
!("half float"===F||"float16"===F),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===F||"float16"===F)c(oa.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),B="rgba16f";else if("float"===F||"float32"===F)c(oa.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),B="rgba32f";c.oneOf(F,fa,"invalid color type")}"colorFormat"in
a&&(B=a.colorFormat,0<=qa.indexOf(B)?q=!0:0<=L.indexOf(B)?q=!1:c.optional(function(){if(q)c.oneOf(a.colorFormat,qa,"invalid color format for texture");else c.oneOf(a.colorFormat,L,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)ga=!(!a.depthTexture&&!a.depthStencilTexture),c(!ga||oa.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?w=a.depth:(M=a.depth,H=!1));"stencil"in a&&("boolean"===typeof a.stencil?
H=a.stencil:(t=a.stencil,w=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?w=H=a.depthStencil:(W=a.depthStencil,H=w=!1))}else h=z=1;var U=null,na=null,Hb=null,Ha=null;if(Array.isArray(f))U=f.map(aa);else if(f)U=[aa(f)];else for(U=Array(G),f=0;f<G;++f)U[f]=I(h,z,q,B,F);c(oa.webgl_draw_buffers||1>=U.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");c(U.length<=Y.maxColorAttachments,"too many color attachments, not supported");h=h||U[0].width;
z=z||U[0].height;M?na=aa(M):w&&!H&&(na=I(h,z,ga,"depth","uint32"));t?Hb=aa(t):H&&!w&&(Hb=I(h,z,!1,"stencil","uint8"));W?Ha=aa(W):!M&&!t&&H&&w&&(Ha=I(h,z,ga,"depth stencil","depth stencil"));c(1>=!!M+!!t+!!W,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");w=null;for(f=0;f<U.length;++f)n(U[f],h,z),c(!U[f]||U[f].texture&&0<=O.indexOf(U[f].texture._texture.format)||U[f].renderbuffer&&0<=y.indexOf(U[f].renderbuffer._renderbuffer.format),"framebuffer color attachment "+
f+" is invalid"),U[f]&&U[f].texture&&(H=g[U[f].texture._texture.format]*d[U[f].texture._texture.type],null===w?w=H:c(w===H,"all color attachments much have the same number of bits per pixel."));n(na,h,z);c(!na||na.texture&&6402===na.texture._texture.format||na.renderbuffer&&33189===na.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");n(Hb,h,z);c(!Hb||Hb.renderbuffer&&36168===Hb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
n(Ha,h,z);c(!Ha||Ha.texture&&34041===Ha.texture._texture.format||Ha.renderbuffer&&34041===Ha.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");e(v);v.width=h;v.height=z;v.colorAttachments=U;v.depthAttachment=na;v.stencilAttachment=Hb;v.depthStencilAttachment=Ha;l.color=U.map(A);l.depth=A(na);l.stencil=A(Hb);l.depthStencil=A(Ha);l.width=v.width;l.height=v.height;T(v);return l}var v=new h;w.framebufferCount++;l(a,b);return q(l,{resize:function(a,e){c(m.next!==
v,"can not resize a framebuffer which is currently in use");var b=Math.max(a|0,1),d=Math.max(e|0||b,1);if(b===v.width&&d===v.height)return l;for(var g=v.colorAttachments,h=0;h<g.length;++h)f(g[h],b,d);f(v.depthAttachment,b,d);f(v.stencilAttachment,b,d);f(v.depthStencilAttachment,b,d);v.width=l.width=b;v.height=l.height=d;T(v);return l},_reglType:"framebuffer",_framebuffer:v,destroy:function(){z(v);e(v)},use:function(a){m.setFBO({framebuffer:l},a)}})}var m={cur:null,next:null,dirty:!1,setFBO:null},
qa=["rgba"],L=["rgba4","rgb565","rgb5 a1"];oa.ext_srgb&&L.push("srgba");oa.ext_color_buffer_half_float&&L.push("rgba16f","rgb16f");oa.webgl_color_buffer_float&&L.push("rgba32f");var fa=["uint8"];oa.oes_texture_half_float&&fa.push("half float","float16");oa.oes_texture_float&&fa.push("float","float32");var a=0,l={};return q(m,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof h)?a:null},create:U,createCube:function(a){function e(a){var d;
c(0>b.indexOf(m.next),"can not update framebuffer which is currently in use");var l={color:null},g=0,f=null;d="rgba";var h="uint8",z=1;if("number"===typeof a)g=a|0;else if(a){c.type(a,"object","invalid arguments for framebuffer");"shape"in a?(g=a.shape,c(Array.isArray(g)&&2<=g.length,"invalid shape for framebuffer"),c(g[0]===g[1],"cube framebuffer must be square"),g=g[0]):("radius"in a&&(g=a.radius|0),"width"in a?(g=a.width|0,"height"in a&&c(a.height===g,"must be square")):"height"in a&&(g=a.height|
0));if("color"in a||"colors"in a)f=a.color||a.colors,Array.isArray(f)&&c(1===f.length||oa.webgl_draw_buffers,"multiple render targets not supported");f||("colorCount"in a&&(z=a.colorCount|0,c(0<z,"invalid color buffer count")),"colorType"in a&&(c.oneOf(a.colorType,fa,"invalid color type"),h=a.colorType),"colorFormat"in a&&(d=a.colorFormat,c.oneOf(a.colorFormat,qa,"invalid color format for texture")));"depth"in a&&(l.depth=a.depth);"stencil"in a&&(l.stencil=a.stencil);"depthStencil"in a&&(l.depthStencil=
a.depthStencil)}else g=1;if(f)if(Array.isArray(f))for(a=[],d=0;d<f.length;++d)a[d]=f[d];else a=[f];else for(a=Array(z),f={radius:g,format:d,type:h},d=0;d<z;++d)a[d]=H.createCube(f);l.color=Array(a.length);for(d=0;d<a.length;++d)z=a[d],c("function"===typeof z&&"textureCube"===z._reglType,"invalid cube map"),g=g||z.width,c(z.width===g&&z.height===g,"invalid cube map shape"),l.color[d]={target:34069,data:a[d]};for(d=0;6>d;++d){for(z=0;z<a.length;++z)l.color[z].target=34069+d;0<d&&(l.depth=b[0].depth,
l.stencil=b[0].stencil,l.depthStencil=b[0].depthStencil);if(b[d])b[d](l);else b[d]=U(l)}return q(e,{width:g,height:g,color:a})}var b=Array(6);e(a);return q(e,{faces:b,resize:function(a){var d=a|0;c(0<d&&d<=Y.maxCubeMapSize,"invalid radius for cube fbo");if(d===e.width)return e;var l=e.color;for(a=0;a<l.length;++a)l[a].resize(d);for(a=0;6>a;++a)b[a].resize(d);e.width=e.height=d;return e},_reglType:"framebufferCube",destroy:function(){b.forEach(function(a){a.destroy()})}})},clear:function(){ga(l).forEach(z)},
restore:function(){m.cur=null;m.next=null;m.dirty=!0;ga(l).forEach(function(a){a.framebuffer=v.createFramebuffer();T(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(A,Z,jc){var c=A("./util/sorted-object-keys"),ga=A("./util/pool");Z.exports=function(q,O){var g=1;O.ext_texture_filter_anisotropic&&(g=q.getParameter(34047));var d=1,y=1;O.webgl_draw_buffers&&(d=q.getParameter(34852),y=q.getParameter(36063));var b=!!O.oes_texture_float;if(b){b=q.createTexture();q.bindTexture(3553,
b);q.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var v=q.createFramebuffer();q.bindFramebuffer(36160,v);q.framebufferTexture2D(36160,36064,3553,b,0);q.bindTexture(3553,null);if(36053!==q.checkFramebufferStatus(36160))b=!1;else{q.viewport(0,0,1,1);q.clearColor(1,0,0,1);q.clear(16384);var oa=ga.allocType(5126,4);q.readPixels(0,0,1,1,6408,5126,oa);q.getError()?b=!1:(q.deleteFramebuffer(v),q.deleteTexture(b),b=1===oa[0]);ga.freeType(oa)}}oa=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(oa=q.createTexture(),v=ga.allocType(5121,36),q.activeTexture(33984),q.bindTexture(34067,oa),q.texImage2D(34069,0,6408,3,3,0,6408,5121,v),ga.freeType(v),q.bindTexture(34067,null),q.deleteTexture(oa),oa=!q.getError());return{colorBits:[q.getParameter(3410),q.getParameter(3411),q.getParameter(3412),q.getParameter(3413)],depthBits:q.getParameter(3414),stencilBits:q.getParameter(3415),subpixelBits:q.getParameter(3408),extensions:c(O).filter(function(b){return!!O[b]}),
maxAnisotropic:g,maxDrawbuffers:d,maxColorAttachments:y,pointSizeDims:q.getParameter(33901),lineWidthDims:q.getParameter(33902),maxViewportDims:q.getParameter(3386),maxCombinedTextureUnits:q.getParameter(35661),maxCubeMapSize:q.getParameter(34076),maxRenderbufferSize:q.getParameter(34024),maxTextureUnits:q.getParameter(34930),maxTextureSize:q.getParameter(3379),maxAttributes:q.getParameter(34921),maxVertexUniforms:q.getParameter(36347),maxVertexTextureUnits:q.getParameter(35660),maxVaryingVectors:q.getParameter(36348),
maxFragmentUniforms:q.getParameter(36349),glsl:q.getParameter(35724),renderer:q.getParameter(7937),vendor:q.getParameter(7936),version:q.getParameter(7938),readFloat:b,npotTextureCube:oa}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(A,Z,jc){var c=A("./util/check"),ga=A("./util/is-typed-array");Z.exports=function(q,O,g,d,y,b,v){function oa(H){var F;null===O.next?(c(y.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
F=5121):(c(null!==O.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),F=O.next.colorAttachments[0].texture._texture.type,c.optional(function(){b.oes_texture_float?(c(5121===F||5126===F,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===F&&c(v.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(5121===F,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var w=0,B=0,M=d.framebufferWidth,n=d.framebufferHeight,G=null;ga(H)?G=H:H&&(c.type(H,"object","invalid arguments to regl.read()"),w=H.x|0,B=H.y|0,c(0<=w&&w<d.framebufferWidth,"invalid x offset for regl.read"),c(0<=B&&B<d.framebufferHeight,"invalid y offset for regl.read"),M=(H.width||d.framebufferWidth-w)|0,n=(H.height||d.framebufferHeight-B)|0,G=H.data||null);G&&(5121===F?c(G instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===F&&c(G instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));c(0<M&&M+w<=d.framebufferWidth,"invalid width for read pixels");c(0<n&&n+B<=d.framebufferHeight,"invalid height for read pixels");g();H=M*n*4;G||(5121===F?G=new Uint8Array(H):5126===F&&(G=G||new Float32Array(H)));c.isTypedArray(G,"data buffer for regl.read() must be a typedarray");c(G.byteLength>=H,"data buffer for regl.read() too small");q.pixelStorei(3333,4);q.readPixels(w,B,M,n,6408,F,G);return G}function Y(b){var d;
O.setFBO({framebuffer:b.framebuffer},function(){d=oa(b)});return d}return function(b){return b&&"framebuffer"in b?Y(b):oa(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(A,Z,jc){var c=A("./util/sorted-object-keys"),ga=A("./util/check"),q=A("./util/values"),O=[];O[32854]=2;O[32855]=2;O[36194]=2;O[33189]=2;O[36168]=1;O[34041]=4;O[35907]=4;O[34836]=16;O[34842]=8;O[34843]=6;Z.exports=function(g,d,y,b,v){function oa(b){this.id=w++;this.refCount=1;this.renderbuffer=b;this.format=32854;
this.height=this.width=0;v.profile&&(this.stats={size:0})}function Y(d){var n=d.renderbuffer;ga(n,"must not double destroy renderbuffer");g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(n);d.renderbuffer=null;d.refCount=0;delete B[d.id];b.renderbufferCount--}var H={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(H.srgba=35907);d.ext_color_buffer_half_float&&(H.rgba16f=34842,H.rgb16f=34843);d.webgl_color_buffer_float&&(H.rgba32f=34836);var F=
[];c(H).forEach(function(b){F[H[b]]=b});var w=0,B={};oa.prototype.decRef=function(){0>=--this.refCount&&Y(this)};v.profile&&(b.getTotalRenderbufferSize=function(){var b=0;c(B).forEach(function(d){b+=B[d].stats.size});return b});return{create:function(d,n){function w(b,d){var f=0,h=0,e=32854;"object"===typeof b&&b?("shape"in b?(h=b.shape,ga(Array.isArray(h)&&2<=h.length,"invalid renderbuffer shape"),f=h[0]|0,h=h[1]|0):("radius"in b&&(f=h=b.radius|0),"width"in b&&(f=b.width|0),"height"in b&&(h=b.height|
0)),"format"in b&&(ga.parameter(b.format,H,"invalid renderbuffer format"),e=H[b.format])):"number"===typeof b?(f=b|0,h="number"===typeof d?d|0:f):b?ga.raise("invalid arguments to renderbuffer constructor"):f=h=1;ga(0<f&&0<h&&f<=y.maxRenderbufferSize&&h<=y.maxRenderbufferSize,"invalid renderbuffer size");if(f!==c.width||h!==c.height||e!==c.format)return w.width=c.width=f,w.height=c.height=h,c.format=e,g.bindRenderbuffer(36161,c.renderbuffer),g.renderbufferStorage(36161,e,f,h),ga(0===g.getError(),"invalid render buffer format"),
v.profile&&(c.stats.size=O[c.format]*c.width*c.height),w.format=F[c.format],w}var c=new oa(g.createRenderbuffer());B[c.id]=c;b.renderbufferCount++;w(d,n);w.resize=function(b,d){var f=b|0,h=d|0||f;if(f===c.width&&h===c.height)return w;ga(0<f&&0<h&&f<=y.maxRenderbufferSize&&h<=y.maxRenderbufferSize,"invalid renderbuffer size");w.width=c.width=f;w.height=c.height=h;g.bindRenderbuffer(36161,c.renderbuffer);g.renderbufferStorage(36161,c.format,f,h);ga(0===g.getError(),"invalid render buffer format");v.profile&&
(c.stats.size=O[c.format]*c.width*c.height);return w};w._reglType="renderbuffer";w._renderbuffer=c;v.profile&&(w.stats=c.stats);w.destroy=function(){c.decRef()};return w},clear:function(){q(B).forEach(Y)},restore:function(){q(B).forEach(function(b){b.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,b.renderbuffer);g.renderbufferStorage(36161,b.format,b.width,b.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(A,
Z,jc){var c=A("./util/sorted-object-keys"),ga=A("./util/check"),q=A("./util/extend"),O=A("./util/values");Z.exports=function(g,d,y,b){function v(b,d,g,f){this.name=b;this.id=d;this.location=g;this.info=f}function oa(b,d){for(var g=0;g<b.length;++g)if(b[g].id===d.id){b[g].location=d.location;return}b.push(d)}function Y(b,n,c){var f=35632===b?w:B,h=f[n];if(!h){var e=d.str(n),h=g.createShader(b);g.shaderSource(h,e);g.compileShader(h);ga.shaderError(g,h,e,b,c);f[n]=h}return h}function H(d,g){this.id=
G++;this.fragId=d;this.vertId=g;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function F(n,c,w){var f;f=Y(35632,n.fragId);var h=Y(35633,n.vertId),e=n.program=g.createProgram();g.attachShader(e,f);g.attachShader(e,h);if(w)for(f=0;f<w.length;++f)h=w[f],g.bindAttribLocation(e,h[0],h[1]);g.linkProgram(e);ga.linkError(g,e,d.str(n.fragId),d.str(n.vertId),c);w=g.getProgramParameter(e,35718);b.profile&&(n.stats.uniformsCount=
w);h=n.uniforms;for(f=0;f<w;++f)if(c=g.getActiveUniform(e,f))if(1<c.size)for(var z=0;z<c.size;++z){var y=c.name.replace("[0]","["+z+"]");oa(h,new v(y,d.id(y),g.getUniformLocation(e,y),c))}else oa(h,new v(c.name,d.id(c.name),g.getUniformLocation(e,c.name),c));w=g.getProgramParameter(e,35721);b.profile&&(n.stats.attributesCount=w);n=n.attributes;for(f=0;f<w;++f)(c=g.getActiveAttrib(e,f))&&oa(n,new v(c.name,d.id(c.name),g.getAttribLocation(e,c.name),c))}var w={},B={},M={},n=[],G=0;b.profile&&(y.getMaxUniformsCount=
function(){var b=0;n.forEach(function(d){d.stats.uniformsCount>b&&(b=d.stats.uniformsCount)});return b},y.getMaxAttributesCount=function(){var b=0;n.forEach(function(d){d.stats.attributesCount>b&&(b=d.stats.attributesCount)});return b});return{clear:function(){var b=g.deleteShader.bind(g);O(w).forEach(b);w={};O(B).forEach(b);B={};n.forEach(function(b){g.deleteProgram(b.program)});n.length=0;M={};y.shaderCount=0},program:function(b,d,v,f){ga.command(0<=b,"missing vertex shader",v);ga.command(0<=d,
"missing fragment shader",v);var h=M[d];h||(h=M[d]={});var e=h[b];if(e&&(e.refCount++,!f))return e;var z=new H(d,b);y.shaderCount++;F(z,v,f);e||(h[b]=z);n.push(z);return q(z,{destroy:function(){z.refCount--;if(0>=z.refCount){g.deleteProgram(z.program);var b=n.indexOf(z);n.splice(b,1);y.shaderCount--}0>=h[z.vertId].refCount&&(g.deleteShader(B[z.vertId]),delete B[z.vertId],delete M[z.fragId][z.vertId]);c(M[z.fragId]).length||(g.deleteShader(w[z.fragId]),delete w[z.fragId],delete M[z.fragId])}})},restore:function(){w=
{};B={};for(var b=0;b<n.length;++b)F(n[b],null,n[b].attributes.map(function(b){return[b.location,b.name]}))},shader:Y,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(A,Z,jc){Z.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(A,Z,jc){Z.exports=function(){var c={"":0},ga=[""];return{id:function(q){var O=
c[q];if(O)return O;O=c[q]=ga.length;ga.push(q);return O},str:function(c){return ga[c]}}}},{}],19:[function(A,Z,jc){function c(a){return"[object "+a+"]"}function ga(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function q(a){return Array.isArray(a)&&0!==a.length&&M(a[0])?!0:!1}function O(a){return Object.prototype.toString.call(a)}function g(a){if(!a)return!1;var b=O(a);return 0<=qa.indexOf(b)?!0:ga(a)||q(a)||F(a)}function d(a,b){36193===a.type?(a.data=B(b),w.freeType(b)):a.data=
b}function y(a,b,e,d,g,h){a="undefined"!==typeof fa[a]?fa[a]:f[a]*L[b];h&&(a*=6);if(g){for(d=0;1<=e;)d+=a*e*e,e/=2;return d}return a*e*d}var b=A("./util/sorted-object-keys"),v=A("./util/check"),oa=A("./util/extend"),Y=A("./util/values"),H=A("./util/is-typed-array"),F=A("./util/is-ndarray"),w=A("./util/pool"),B=A("./util/to-half-float"),M=A("./util/is-array-like"),n=A("./util/flatten"),G=A("./util/is-pow2");jc=A("./constants/arraytypes.json");var aa=A("./constants/arraytypes.json"),I=[9984,9986,9985,
9987],Id=[0,6409,6410,6407,6408],f={};f[6409]=f[6406]=f[6402]=1;f[34041]=f[6410]=2;f[6407]=f[35904]=3;f[6408]=f[35906]=4;var h=c("HTMLCanvasElement"),e=c("OffscreenCanvas"),z=c("CanvasRenderingContext2D"),T=c("ImageBitmap"),U=c("HTMLImageElement"),m=c("HTMLVideoElement"),qa=b(jc).concat([h,e,z,T,U,m]),L=[];L[5121]=1;L[5126]=4;L[36193]=2;L[5123]=2;L[5125]=4;var fa=[];fa[32854]=2;fa[32855]=2;fa[36194]=2;fa[34041]=4;fa[33776]=.5;fa[33777]=.5;fa[33778]=1;fa[33779]=1;fa[35986]=.5;fa[35987]=1;fa[34798]=
1;fa[35840]=.5;fa[35841]=.25;fa[35842]=.5;fa[35843]=.25;fa[36196]=.5;Z.exports=function(a,l,c,L,fa,A,qa){function pa(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Qa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;
a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function X(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(v.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(v.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(v.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(v.parameter(b.colorSpace,wc,"invalid colorSpace"),
a.colorSpace=wc[b.colorSpace]);if("type"in b){var e=b.type;v(l.oes_texture_float||!("float"===e||"float32"===e),"you must enable the OES_texture_float extension in order to use floating point textures.");v(l.oes_texture_half_float||!("half float"===e||"float16"===e),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");v(l.webgl_depth_texture||!("uint16"===e||"uint32"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
v.parameter(e,V,"invalid texture type");a.type=V[e]}var d=a.width,g=a.height,h=a.channels,e=!1;"shape"in b?(v(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),d=b.shape[0],g=b.shape[1],3===b.shape.length&&(h=b.shape[2],v(0<h&&4>=h,"invalid number of channels"),e=!0),v(0<=d&&d<=c.maxTextureSize,"invalid width"),v(0<=g&&g<=c.maxTextureSize,"invalid height")):("radius"in b&&(d=g=b.radius,v(0<=d&&d<=c.maxTextureSize,"invalid radius")),"width"in b&&(d=b.width,v(0<=d&&d<=c.maxTextureSize,
"invalid width")),"height"in b&&(g=b.height,v(0<=g&&g<=c.maxTextureSize,"invalid height")),"channels"in b&&(h=b.channels,v(0<h&&4>=h,"invalid number of channels"),e=!0));a.width=d|0;a.height=g|0;a.channels=h|0;d=!1;"format"in b&&(d=b.format,v(l.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),v.parameter(d,C,"invalid texture format"),g=a.internalformat=C[d],a.format=va[g],d in V&&!("type"in b)&&(a.type=
V[d]),d in la&&(a.compressed=!0),d=!0);!e&&d?a.channels=f[a.format]:e&&!d?a.channels!==Id[a.format]&&(a.format=a.internalformat=Id[a.channels]):d&&e&&v(a.channels===f[a.format],"number of channels inconsistent with specified format")}}function K(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function N(){pa.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function P(a,b){var l=null;g(b)?l=b:b&&(v.type(b,"object","invalid pixel data type"),X(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),g(b.data)&&(l=b.data));v(!a.compressed||l instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){v(!l,"can not specify copy and data field for the same texture");var k=fa.viewportWidth,f=fa.viewportHeight;a.width=a.width||k-a.xOffset;a.height=a.height||f-a.yOffset;a.needsCopy=!0;v(0<=a.xOffset&&a.xOffset<k&&0<=a.yOffset&&
a.yOffset<f&&0<a.width&&a.width<=k&&0<a.height&&a.height<=f,"copy texture read out of bounds")}else if(!l)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(H(l))a.channels=a.channels||4,a.data=l,"type"in b||5121!==a.type||(a.type=aa[Object.prototype.toString.call(l)]|0);else if(ga(l)){a.channels=a.channels||4;k=l;f=k.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:f=w.allocType(a.type,f);f.set(k);a.data=f;break;case 36193:a.data=B(k);break;default:v.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(F(l)){k=l.data;Array.isArray(k)||5121!==a.type||(a.type=aa[Object.prototype.toString.call(k)]|0);var f=l.shape,p=l.stride,r,t,u,C;3===f.length?(u=f[2],C=p[2]):(v(2===f.length,"invalid ndarray pixel data, must be 2 or 3D"),C=u=1);r=f[0];t=f[1];f=p[0];p=p[1];a.alignment=1;a.width=r;a.height=t;a.channels=u;a.format=a.internalformat=Id[u];a.needsFree=!0;r=C;l=l.offset;u=a.width;C=a.height;t=a.channels;for(var y=w.allocType(36193===a.type?5126:a.type,u*C*t),E=0,ca=0;ca<C;++ca)for(var D=
0;D<u;++D)for(var V=0;V<t;++V)y[E++]=k[f*D+p*ca+r*V+l];d(a,y)}else if(O(l)===h||O(l)===e||O(l)===z)O(l)===h||O(l)===e?a.element=l:a.element=l.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(O(l)===T)a.element=l,a.width=l.width,a.height=l.height,a.channels=4;else if(O(l)===U)a.element=l,a.width=l.naturalWidth,a.height=l.naturalHeight,a.channels=4;else if(O(l)===m)a.element=l,a.width=l.videoWidth,a.height=l.videoHeight,a.channels=4;else if(q(l)){k=a.width||l[0].length;
f=a.height||l.length;p=a.channels;p=M(l[0][0])?p||l[0][0].length:p||1;r=n.shape(l);u=1;for(C=0;C<r.length;++C)u*=r[C];u=w.allocType(36193===a.type?5126:a.type,u);n.flatten(l,r,"",u);d(a,u);a.alignment=1;a.width=k;a.height=f;a.channels=p;a.format=a.internalformat=Id[p];a.needsFree=!0}5126===a.type?v(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&v(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function sa(b,e,d,k,l){var g=b.element,f=b.data,h=b.internalformat,m=b.format,p=b.type,z=b.width,n=b.height;K(b);g?a.texSubImage2D(e,l,d,k,m,p,g):b.compressed?a.compressedTexSubImage2D(e,l,d,k,h,z,n,f):b.needsCopy?(L(),a.copyTexSubImage2D(e,l,d,k,b.xOffset,b.yOffset,z,n)):a.texSubImage2D(e,l,d,k,z,n,m,p,f)}function J(){return R.pop()||new N}function Ob(a){a.needsFree&&w.freeType(a.data);N.call(a);R.push(a)}function $a(){pa.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function Q(a,b,e){var d=a.images[0]=J();a.mipmask=1;d.width=a.width=b;d.height=a.height=e;d.channels=a.channels=4}function t(a,b){var e=null;if(g(b))e=a.images[0]=J(),Qa(e,a),P(e,b),a.mipmask=1;else if(X(a,b),Array.isArray(b.mipmap))for(var d=b.mipmap,l=0;l<d.length;++l)e=a.images[l]=J(),Qa(e,a),e.width>>=l,e.height>>=l,P(e,d[l]),a.mipmask|=1<<l;else e=a.images[0]=J(),Qa(e,a),P(e,b),a.mipmask=1;Qa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||v(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ma(b,e){for(var d=b.images,k=0;k<d.length&&d[k];++k){var l=d[k],g=e,f=k,h=l.element,m=l.data,p=l.internalformat,z=l.format,n=l.type,t=l.width,u=l.height;K(l);h?a.texImage2D(g,f,z,z,n,h):l.compressed?a.compressedTexImage2D(g,f,p,t,u,0,m):l.needsCopy?(L(),a.copyTexImage2D(g,f,z,l.xOffset,l.yOffset,t,u,0)):a.texImage2D(g,
f,z,t,u,0,z,n,m||null)}}function ea(){var a=ha.pop()||new $a;pa.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function Ea(a){for(var b=a.images,e=0;e<b.length;++e)b[e]&&Ob(b[e]),b[e]=null;ha.push(a)}function Na(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Hb(a,b){if("min"in b){var e=b.min;v.parameter(e,td);a.minFilter=td[e];0<=I.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in
b&&(e=b.mag,v.parameter(e,Qc),a.magFilter=Qc[e]);var e=a.wrapS,d=a.wrapT;if("wrap"in b){var l=b.wrap;"string"===typeof l?(v.parameter(l,cc),e=d=cc[l]):Array.isArray(l)&&(v.parameter(l[0],cc),v.parameter(l[1],cc),e=cc[l[0]],d=cc[l[1]])}else"wrapS"in b&&(e=b.wrapS,v.parameter(e,cc),e=cc[e]),"wrapT"in b&&(d=b.wrapT,v.parameter(d,cc),d=cc[d]);a.wrapS=e;a.wrapT=d;"anisotropic"in b&&(e=b.anisotropic,v("number"===typeof e&&1<=e&&e<=c.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);
if("mipmap"in b){e=!1;switch(typeof b.mipmap){case "string":v.parameter(b.mipmap,bc,"invalid mipmap hint");a.mipmapHint=bc[b.mipmap];e=a.genMipmaps=!0;break;case "boolean":e=a.genMipmaps=b.mipmap;break;case "object":v(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;e=!0;break;default:v.raise("invalid mipmap type")}!e||"min"in b||(a.minFilter=9984)}}function Ha(b,e){a.texParameteri(e,10241,b.minFilter);a.texParameteri(e,10240,b.magFilter);a.texParameteri(e,10242,b.wrapS);a.texParameteri(e,
10243,b.wrapT);l.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(e))}function S(b){pa.call(this);this.mipmask=0;this.internalformat=6408;this.id=ra++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Na;qa.profile&&(this.stats={size:0})}function ob(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function da(){var b=ca[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function wa(b){var e=b.texture;v(e,"must not double destroy texture");var d=b.unit,l=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(l,null),ca[d]=null);a.deleteTexture(e);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete E[b.id];A.textureCount--}var bc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},cc={repeat:10497,clamp:33071,mirror:33648},Qc={nearest:9728,linear:9729},td=oa({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},Qc),wc={none:0,browser:37444},V={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},C={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},la={};l.ext_srgb&&(C.srgb=35904,C.srgba=35906);l.oes_texture_float&&(V.float32=V["float"]=5126);l.oes_texture_half_float&&(V.float16=V["half float"]=36193);l.webgl_depth_texture&&(oa(C,{depth:6402,"depth stencil":34041}),oa(V,{uint16:5123,uint32:5125,
"depth stencil":34042}));l.webgl_compressed_texture_s3tc&&oa(la,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});l.webgl_compressed_texture_atc&&oa(la,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});l.webgl_compressed_texture_pvrtc&&oa(la,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});l.webgl_compressed_texture_etc1&&(la["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(a.getParameter(34467));
b(la).forEach(function(a){var b=la[a];0<=Ca.indexOf(b)&&(C[a]=b)});var Lb=b(C);c.textureFormats=Lb;var nc=[];b(C).forEach(function(a){nc[C[a]]=a});var Zc=[];b(V).forEach(function(a){Zc[V[a]]=a});var D=[];b(Qc).forEach(function(a){D[Qc[a]]=a});var u=[];b(td).forEach(function(a){u[td[a]]=a});var ka=[];b(cc).forEach(function(a){ka[cc[a]]=a});var va=Lb.reduce(function(a,b){var e=C[b];6409===e||6406===e||6409===e||6410===e||6402===e||34041===e||l.ext_srgb&&(35904===e||35906===e)?a[e]=e:32855===e||0<=b.indexOf("rgba")?
a[e]=6408:a[e]=6407;return a},{}),R=[],ha=[],ra=0,E={},p=c.maxTextureUnits,ca=Array(p).map(function(){return null});oa(S.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var e=0;e<p;++e){var d=ca[e];if(d){if(0<d.bindCount)continue;d.unit=-1}ca[e]=this;b=e;break}b>=p&&v.raise("insufficient number of texture units");qa.profile&&A.maxTextureUnits<b+1&&(A.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&wa(this)}});qa.profile&&(A.getTotalTextureSize=function(){var a=0;b(E).forEach(function(b){a+=E[b].stats.size});return a});return{create2D:function(b,e){function d(a,b){var e=l.texInfo;Na.call(e);var g=ea();"number"===typeof a?"number"===typeof b?Q(g,a|0,b|0):Q(g,a|0,a|0):a?(v.type(a,"object","invalid arguments to regl.texture"),Hb(e,a),t(g,a)):Q(g,1,1);e.genMipmaps&&(g.mipmask=(g.width<<1)-1);l.mipmask=g.mipmask;Qa(l,g);v.texture2D(e,g,c);l.internalformat=g.internalformat;
d.width=g.width;d.height=g.height;ob(l);ma(g,3553);Ha(e,3553);da();Ea(g);qa.profile&&(l.stats.size=y(l.internalformat,l.type,g.width,g.height,e.genMipmaps,!1));d.format=nc[l.internalformat];d.type=Zc[l.type];d.mag=D[e.magFilter];d.min=u[e.minFilter];d.wrapS=ka[e.wrapS];d.wrapT=ka[e.wrapT];return d}var l=new S(3553);E[l.id]=l;A.textureCount++;d(b,e);d.subimage=function(a,b,e,g){v(!!a,"must specify image data");b|=0;e|=0;g|=0;var f=J();Qa(f,l);f.width=0;f.height=0;P(f,a);f.width=f.width||(l.width>>
g)-b;f.height=f.height||(l.height>>g)-e;v(l.type===f.type&&l.format===f.format&&l.internalformat===f.internalformat,"incompatible format for texture.subimage");v(0<=b&&0<=e&&b+f.width<=l.width&&e+f.height<=l.height,"texture.subimage write out of bounds");v(l.mipmask&1<<g,"missing mipmap data");v(f.data||f.element||f.needsCopy,"missing image data");ob(l);sa(f,3553,b,e,g);da();Ob(f);return d};d.resize=function(b,e){var g=b|0,f=e|0||g;if(g===l.width&&f===l.height)return d;d.width=l.width=g;d.height=
l.height=f;ob(l);for(var h=0;l.mipmask>>h;++h){var m=g>>h,p=f>>h;if(!m||!p)break;a.texImage2D(3553,h,l.format,m,p,0,l.format,l.type,null)}da();qa.profile&&(l.stats.size=y(l.internalformat,l.type,g,f,!1,!1));return d};d._reglType="texture2d";d._texture=l;qa.profile&&(d.stats=l.stats);d.destroy=function(){l.decRef()};return d},createCube:function(b,e,d,l,g,f){function h(a,b,e,d,l,k){var g,f=m.texInfo;Na.call(f);for(g=0;6>g;++g)p[g]=ea();if("number"!==typeof a&&a)if("object"===typeof a)if(b)t(p[0],a),
t(p[1],b),t(p[2],e),t(p[3],d),t(p[4],l),t(p[5],k);else if(Hb(f,a),X(m,a),"faces"in a)for(a=a.faces,v(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),g=0;6>g;++g)v("object"===typeof a[g]&&!!a[g],"invalid input for cube map face"),Qa(p[g],m),t(p[g],a[g]);else for(g=0;6>g;++g)t(p[g],a);else v.raise("invalid arguments to cube map");else for(a=a|0||1,g=0;6>g;++g)Q(p[g],a,a);Qa(m,p[0]);v.optional(function(){c.npotTextureCube||v(G(m.width)&&G(m.height),"your browser does not support non power or two texture dimensions")});
m.mipmask=f.genMipmaps?(p[0].width<<1)-1:p[0].mipmask;v.textureCube(m,f,p,c);m.internalformat=p[0].internalformat;h.width=p[0].width;h.height=p[0].height;ob(m);for(g=0;6>g;++g)ma(p[g],34069+g);Ha(f,34067);da();qa.profile&&(m.stats.size=y(m.internalformat,m.type,h.width,h.height,f.genMipmaps,!0));h.format=nc[m.internalformat];h.type=Zc[m.type];h.mag=D[f.magFilter];h.min=u[f.minFilter];h.wrapS=ka[f.wrapS];h.wrapT=ka[f.wrapT];for(g=0;6>g;++g)Ea(p[g]);return h}var m=new S(34067);E[m.id]=m;A.cubeCount++;
var p=Array(6);h(b,e,d,l,g,f);h.subimage=function(a,b,e,d,l){v(!!b,"must specify image data");v("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");e|=0;d|=0;l|=0;var g=J();Qa(g,m);g.width=0;g.height=0;P(g,b);g.width=g.width||(m.width>>l)-e;g.height=g.height||(m.height>>l)-d;v(m.type===g.type&&m.format===g.format&&m.internalformat===g.internalformat,"incompatible format for texture.subimage");v(0<=e&&0<=d&&e+g.width<=m.width&&d+g.height<=m.height,"texture.subimage write out of bounds");v(m.mipmask&
1<<l,"missing mipmap data");v(g.data||g.element||g.needsCopy,"missing image data");ob(m);sa(g,34069+a,e,d,l);da();Ob(g);return h};h.resize=function(b){b|=0;if(b!==m.width){h.width=m.width=b;h.height=m.height=b;ob(m);for(var e=0;6>e;++e)for(var d=0;m.mipmask>>d;++d)a.texImage2D(34069+e,d,m.format,b>>d,b>>d,0,m.format,m.type,null);da();qa.profile&&(m.stats.size=y(m.internalformat,m.type,h.width,h.height,!1,!0));return h}};h._reglType="textureCube";h._texture=m;qa.profile&&(h.stats=m.stats);h.destroy=
function(){m.decRef()};return h},clear:function(){for(var b=0;b<p;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ca[b]=null;Y(E).forEach(wa);A.cubeCount=0;A.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<p;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null)}Y(E).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var e=0;32>e;++e)if(0!==(b.mipmask&1<<e))if(3553===b.target)a.texImage2D(3553,e,b.internalformat,b.width>>
e,b.height>>e,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,e,b.internalformat,b.width>>e,b.height>>e,0,b.internalformat,b.type,null);Ha(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<p;++b){var e=ca[b];e&&(e.bindCount=0,e.unit=-1,ca[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(A,Z,jc){Z.exports=function(c,ga){function q(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function O(d,g,c){var w=y.pop()||new q;w.startQueryIndex=d;w.endQueryIndex=g;w.sum=0;w.stats=c;b.push(w)}if(!ga.ext_disjoint_timer_query)return null;var g=[],d=[],y=[],b=[],v=[],oa=[];return{beginQuery:function(b){var c=g.pop()||ga.ext_disjoint_timer_query.createQueryEXT();
ga.ext_disjoint_timer_query.beginQueryEXT(35007,c);d.push(c);O(d.length-1,d.length,b)},endQuery:function(){ga.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:O,update:function(){var c,q;c=d.length;if(0!==c){oa.length=Math.max(oa.length,c+1);v.length=Math.max(v.length,c+1);v[0]=0;var F=oa[0]=0;for(q=c=0;q<d.length;++q){var w=d[q];ga.ext_disjoint_timer_query.getQueryObjectEXT(w,34919)?(F+=ga.ext_disjoint_timer_query.getQueryObjectEXT(w,34918),g.push(w)):d[c++]=w;v[q+1]=F;oa[q+1]=c}d.length=
c;for(q=c=0;q<b.length;++q){var F=b[q],B=F.startQueryIndex,w=F.endQueryIndex;F.sum+=v[w]-v[B];B=oa[B];w=oa[w];w===B?(F.stats.gpuTime+=F.sum/1E6,y.push(F)):(F.startQueryIndex=B,F.endQueryIndex=w,b[c++]=F)}b.length=c}},getNumPendingQueries:function(){return d.length},clear:function(){g.push.apply(g,d);for(var b=0;b<g.length;b++)ga.ext_disjoint_timer_query.deleteQueryEXT(g[b]);d.length=0;g.length=0},restore:function(){d.length=0;g.length=0}}}},{}],21:[function(A,Z,jc){function c(b){return"undefined"!==
typeof atob?atob(b):"base64:"+b}function ga(b){b=Error("(regl) "+b);console.error(b);throw b;}function q(b,d){b||ga(d)}function O(b){return b?": "+b:""}function g(b,d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function d(b,d,g){0>d.indexOf(b)&&
ga("invalid value"+O(g)+". must be one of: "+d)}function y(b,d){for(b+="";b.length<d;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function v(b,d){this.number=b;this.line=d;this.errors=[]}function oa(b,d,g){this.file=b;this.line=d;this.message=g}function Y(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function H(){var b=Error(),
b=(b.stack||b).toString(),d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function F(e,d){var g=e.split("\n"),f=1,h=0,n={unknown:new b,0:new b};n.unknown.name=n[0].name=d||Y();n.unknown.lines.push(new v(0,""));for(var w=0;w<g.length;++w){var y=g[w],a=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(y);if(a)switch(a[1]){case "line":if(a=/(\d+)(\s+\d+)?/.exec(a[2]))f=a[1]|0,a[2]&&(h=a[2]|0,h in n||(n[h]=new b));break;case "define":if(a=/SHADER_NAME(_B64)?\s+(.*)$/.exec(a[2]))n[h].name=
a[1]?c(a[2]):a[2]}n[h].lines.push(new v(f++,y))}I(n).forEach(function(a){var b=n[a];b.lines.forEach(function(a){b.index[a.number]=a})});return n}function w(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);e?d.push(new oa(e[1]|0,e[2]|0,e[3].trim())):0<b.length&&d.push(new oa("unknown",0,b))}});return d}function B(b,d){d.forEach(function(d){var g=b[d.file];if(g){var f=g.index[d.line];if(f){f.errors.push(d);g.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(d)})}function M(b){b._commandRef=Y()}function n(b,d){var g=H();ga(b+" in command "+(d||Y())+("unknown"===g?"":" called from "+g))}function G(b,d,f,h){g(b,d)||n("invalid parameter type"+O(f)+". expected "+d+", got "+typeof b,h||Y())}function aa(b,d){return 32820===b||32819===b||33635===b?2:34042===b?4:h[b]*d}var I=A("./sorted-object-keys"),Id=A("./is-typed-array");A=A("./extend");var f="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
h={};h[5120]=h[5121]=1;h[5122]=h[5123]=h[36193]=h[33635]=h[32819]=h[32820]=2;h[5124]=h[5125]=h[5126]=h[34042]=4;Z.exports=A(q,{optional:function(b){b()},raise:ga,commandRaise:n,command:function(b,d,g){b||n(d,g||Y())},parameter:function(b,d,g){b in d||ga("unknown parameter ("+b+")"+O(g)+". possible values: "+I(d).join())},commandParameter:function(b,d,g,f){b in d||n("unknown parameter ("+b+")"+O(g)+". possible values: "+I(d).join(),f||Y())},constructor:function(b){I(b).forEach(function(b){0>f.indexOf(b)&&
ga('invalid regl constructor argument "'+b+'". must be one of '+f)})},type:function(b,d,f){g(b,d)||ga("invalid parameter type"+O(f)+". expected "+d+", got "+typeof b)},commandType:G,isTypedArray:function(b,d){Id(b)||ga("invalid parameter type"+O(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||ga("invalid parameter type, ("+b+")"+O(d)+". must be a nonnegative integer")},oneOf:d,shaderError:function(b,d,g,f,h){if(!b.getShaderParameter(d,b.COMPILE_STATUS)){d=b.getShaderInfoLog(d);b=
f===b.FRAGMENT_SHADER?"fragment":"vertex";G(g,"string",b+" shader source must be a string",h);var n=F(g,h);g=w(d);B(n,g);I(n).forEach(function(b){function e(a,b){d.push(a);g.push(b||"")}var a=n[b];if(a.hasErrors){var d=[""],g=[""];e("file number "+b+": "+a.name+"\n","color:red;text-decoration:underline;font-weight:bold");a.lines.forEach(function(a){if(0<a.errors.length){e(y(a.number,4)+"|  ","background-color:yellow; font-weight:bold");e(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var b=0;a.errors.forEach(function(d){d=d.message;var l=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(l){var g=l[1];d=l[2];switch(g){case "assign":g="="}b=Math.max(a.line.indexOf(g,b),0)}else b=0;e(y("| ",6));e(y("^^^",b+3)+"\n","font-weight:bold");e(y("| ",6));e(d+"\n","font-weight:bold")});e(y("| ",6)+"\n")}else e(y(a.number,4)+"|  "),e(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(g[0]=d.join("%c"),console.log.apply(console,g))}});q.raise("Error compiling "+
b+" shader, "+n[0].name)}},linkError:function(b,d,g,f,h){b.getProgramParameter(d,b.LINK_STATUS)||(b=b.getProgramInfoLog(d),g=F(g,h),f='Error linking program with vertex shader, "'+F(f,h)[0].name+'", and fragment shader "'+g[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+b),q.raise(f))},callSite:H,saveCommandRef:M,saveDrawInfo:function(b,d,g,f){function h(b){return b?f.id(b):0}function n(b,
a){I(a).forEach(function(a){b[f.id(a)]=!0})}M(b);b._fragId=h(b["static"].frag);b._vertId=h(b["static"].vert);var c=b._uniformSet={};n(c,d["static"]);n(c,d.dynamic);d=b._attributeSet={};n(d,g["static"]);n(d,g.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,g,f){b.texture?d(b.texture._texture.internalformat,g,"unsupported texture format for attachment"):d(b.renderbuffer._renderbuffer.format,f,"unsupported renderbuffer format for attachment")},
guessCommand:Y,texture2D:function(b,d,g){var f=d.width,h=d.height,n=d.channels;q(0<f&&f<=g.maxTextureSize&&0<h&&h<=g.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||q(!(f&f-1)&&!!f&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==f&&1!==h&&q(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(q(!(f&f-1)&&!!f&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),
q(d.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&q(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),q(!b.genMipmaps,"mipmap generation not supported with float textures"));var c=d.images;for(g=0;16>g;++g)if(c[g]){var w=f>>g,a=h>>g;q(d.mipmask&1<<g,"missing mipmap data");var l=c[g];q(l.width===w&&l.height===a,"invalid shape for mip images");q(l.format===d.format&&l.internalformat===
d.internalformat&&l.type===d.type,"incompatible type for mip image");!l.compressed&&l.data&&(w=Math.ceil(aa(l.type,n)*w/l.unpackAlignment)*l.unpackAlignment,q(l.data.byteLength===w*a,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||q(0===(d.mipmask&1<<g),"extra mipmap data");d.compressed&&q(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,d,g,f){var h=b.width,n=b.height,c=b.channels;q(0<h&&h<=f.maxTextureSize&&
0<n&&n<=f.maxTextureSize,"invalid texture shape");q(h===n,"cube map must be square");q(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(f=0;f<g.length;++f){var w=g[f];q(w.width===h&&w.height===n,"inconsistent cube map face shape");d.genMipmaps&&(q(!w.compressed,"can not generate mipmap for compressed textures"),q(1===w.mipmask,"can not specify mipmaps and generate mipmaps"));for(var a=w.images,l=0;16>l;++l){var v=a[l];if(v){var y=h>>l,B=n>>l;q(w.mipmask&1<<l,"missing mipmap data");
q(v.width===y&&v.height===B,"invalid shape for mip images");q(v.format===b.format&&v.internalformat===b.internalformat&&v.type===b.type,"incompatible type for mip image");v.compressed||v.data&&q(v.data.byteLength===y*B*Math.max(aa(v.type,c),v.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(A,Z,jc){Z.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(A,Z,jc){function c(c){return Array.prototype.slice.call(c)}var ga=A("./extend"),q=A("./compiled-fns");Z.exports=function(){function O(){var b=[],d=[];return ga(function(){b.push.apply(b,c(arguments))},{def:function(){var g="v"+y;y++;d.push(g);0<arguments.length&&(b.push(g,"="),b.push.apply(b,c(arguments)),b.push(";"));return g},toString:function(){return c([0<d.length?"var "+d.join(",")+";":"",c(b).join("")]).join("")}})}function g(){function b(c,w){g(c,
w,"=",d.def(c,w),";")}var d=O(),g=O(),v=d.toString,w=g.toString;return ga(function(){d.apply(d,c(arguments))},{def:d.def,entry:d,exit:g,save:b,set:function(g,c,n){b(g,c);d(g,c,"=",n,";")},toString:function(){return v()+w()}})}var d=0,y=0,b={},v={};return{global:O(),link:function(g){var c="$"+d,v=!1;"object"===typeof g&&g.name&&(c=g.name.replace(/ /g,"_"),v=!0);if(c in b)return c;b[c]=g;v||d++;return c},block:O,proc:function(b,d){function y(){var b="a"+q.length;q.push(b);return b}var q=[];d=d||0;for(var w=
0;w<d;++w)y();var w=g(),B=w.toString;return v[b]=ga(w,{arg:y,toString:function(){return c(["function(",q.join(),"){",B(),"}"]).join("")}})},scope:g,cond:function(){var b=c(arguments).join(""),d=g(),v=g(),y=d.toString,w=v.toString;return ga(d,{then:function(){d.apply(d,c(arguments));return this},"else":function(){v.apply(v,c(arguments));return this},toString:function(){var d=w();d&&(d="else{"+d+"}");return c(["if(",b,"){",y(),"}",d]).join("")}})},compile:function(){var d=[],g=[];Object.keys(b).sort(function(b,
d){var g="$"===b.charAt(0),n="$"===d.charAt(0);return g||n?g&&n?+b.slice(1)<+d.slice(1)?-1:1:g&&!n?-1:1:b.localeCompare(d)}).forEach(function(c){var v=b[c];d.push(c);g.push(v)});for(var c=0,v=d.length-1;-1<v;v--)if("$"===d[v].charAt(0)){c=v;break}c=d.slice(c).join();v=q[c];if(!v)throw Error("missing precompiled function with key: "+c);return v.apply(null,g)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(A,Z,jc){Z.exports={$0:function(c){var ga,q,O,g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa,I,Id,f,h,e,
z,T,U,m,qa,L,fa;ga=c.attributes;q=c.current;O=c.framebuffer;g=c.gl;d=c.next;y=c.vao;b=d.blend_color;v=q.blend_color;A=d.blend_equation;Y=q.blend_equation;H=d.blend_func;F=q.blend_func;w=d.colorMask;B=q.colorMask;M=d.depth_range;n=q.depth_range;G=d.polygonOffset_offset;aa=q.polygonOffset_offset;I=d.sample_coverage;Id=q.sample_coverage;f=d.scissor_box;h=q.scissor_box;e=d.stencil_func;z=q.stencil_func;T=d.stencil_opBack;U=q.stencil_opBack;m=d.stencil_opFront;qa=q.stencil_opFront;L=d.viewport;fa=q.viewport;
return{poll:function(){var a,l,c,y,ga,cb,Z,pa,Qa,X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea;q.dirty=!1;l=d.blend_enable;c=d.cull_enable;y=d.depth_enable;ga=d.dither;cb=d.polygonOffset_enable;Z=d.sample_alpha;pa=d.sample_enable;Qa=d.scissor_enable;X=d.stencil_enable;K=d.cull_face;N=q.cull_face;P=d.depth_func;sa=q.depth_func;J=d.depth_mask;Ob=q.depth_mask;$a=d.frontFace;Q=q.frontFace;t=d.lineWidth;ma=q.lineWidth;ea=d.stencil_mask;Ea=q.stencil_mask;a=O.next;a!==O.cur&&(a?g.bindFramebuffer(36160,a.framebuffer):
g.bindFramebuffer(36160,null),O.cur=a);l!==q.blend_enable&&(l?g.enable(3042):g.disable(3042),q.blend_enable=l);c!==q.cull_enable&&(c?g.enable(2884):g.disable(2884),q.cull_enable=c);y!==q.depth_enable&&(y?g.enable(2929):g.disable(2929),q.depth_enable=y);ga!==q.dither&&(ga?g.enable(3024):g.disable(3024),q.dither=ga);cb!==q.polygonOffset_enable&&(cb?g.enable(32823):g.disable(32823),q.polygonOffset_enable=cb);Z!==q.sample_alpha&&(Z?g.enable(32926):g.disable(32926),q.sample_alpha=Z);pa!==q.sample_enable&&
(pa?g.enable(32928):g.disable(32928),q.sample_enable=pa);Qa!==q.scissor_enable&&(Qa?g.enable(3089):g.disable(3089),q.scissor_enable=Qa);X!==q.stencil_enable&&(X?g.enable(2960):g.disable(2960),q.stencil_enable=X);if(b[0]!==v[0]||b[1]!==v[1]||b[2]!==v[2]||b[3]!==v[3])g.blendColor(b[0],b[1],b[2],b[3]),v[0]=b[0],v[1]=b[1],v[2]=b[2],v[3]=b[3];if(A[0]!==Y[0]||A[1]!==Y[1])g.blendEquationSeparate(A[0],A[1]),Y[0]=A[0],Y[1]=A[1];if(H[0]!==F[0]||H[1]!==F[1]||H[2]!==F[2]||H[3]!==F[3])g.blendFuncSeparate(H[0],
H[1],H[2],H[3]),F[0]=H[0],F[1]=H[1],F[2]=H[2],F[3]=H[3];if(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3])g.colorMask(w[0],w[1],w[2],w[3]),B[0]=w[0],B[1]=w[1],B[2]=w[2],B[3]=w[3];K!==N&&(g.cullFace(K),q.cull_face=K);P!==sa&&(g.depthFunc(P),q.depth_func=P);J!==Ob&&(g.depthMask(J),q.depth_mask=J);if(M[0]!==n[0]||M[1]!==n[1])g.depthRange(M[0],M[1]),n[0]=M[0],n[1]=M[1];$a!==Q&&(g.frontFace($a),q.frontFace=$a);t!==ma&&(g.lineWidth(t),q.lineWidth=t);if(G[0]!==aa[0]||G[1]!==aa[1])g.polygonOffset(G[0],
G[1]),aa[0]=G[0],aa[1]=G[1];if(I[0]!==Id[0]||I[1]!==Id[1])g.sampleCoverage(I[0],I[1]),Id[0]=I[0],Id[1]=I[1];if(f[0]!==h[0]||f[1]!==h[1]||f[2]!==h[2]||f[3]!==h[3])g.scissor(f[0],f[1],f[2],f[3]),h[0]=f[0],h[1]=f[1],h[2]=f[2],h[3]=f[3];if(e[0]!==z[0]||e[1]!==z[1]||e[2]!==z[2])g.stencilFunc(e[0],e[1],e[2]),z[0]=e[0],z[1]=e[1],z[2]=e[2];ea!==Ea&&(g.stencilMask(ea),q.stencil_mask=ea);if(T[0]!==U[0]||T[1]!==U[1]||T[2]!==U[2]||T[3]!==U[3])g.stencilOpSeparate(T[0],T[1],T[2],T[3]),U[0]=T[0],U[1]=T[1],U[2]=
T[2],U[3]=T[3];if(m[0]!==qa[0]||m[1]!==qa[1]||m[2]!==qa[2]||m[3]!==qa[3])g.stencilOpSeparate(m[0],m[1],m[2],m[3]),qa[0]=m[0],qa[1]=m[1],qa[2]=m[2],qa[3]=m[3];if(L[0]!==fa[0]||L[1]!==fa[1]||L[2]!==fa[2]||L[3]!==fa[3])g.viewport(L[0],L[1],L[2],L[3]),fa[0]=L[0],fa[1]=L[1],fa[2]=L[2],fa[3]=L[3]},refresh:function(){var a,l,c,na,Ka,cb,Z,pa,Qa,X,K,N,P,sa,J,Ob;q.dirty=!1;l=d.blend_enable;c=d.cull_enable;na=d.depth_enable;Ka=d.dither;cb=d.polygonOffset_enable;Z=d.sample_alpha;pa=d.sample_enable;Qa=d.scissor_enable;
X=d.stencil_enable;K=d.cull_face;N=d.depth_func;P=d.depth_mask;sa=d.frontFace;J=d.lineWidth;Ob=d.stencil_mask;(a=O.next)?g.bindFramebuffer(36160,a.framebuffer):g.bindFramebuffer(36160,null);O.cur=a;a=ga[0];a.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[1];a.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,a.buffer.buffer),
g.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[2];a.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[3];a.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(3,a.size,
a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[4];a.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[5];a.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,
a.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[6];a.buffer?(g.enableVertexAttribArray(6),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[7];a.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(7),
g.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[8];a.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[9];a.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=ga[10];a.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[11];a.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);
a=ga[12];a.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[13];a.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[14];a.buffer?(g.enableVertexAttribArray(14),
g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=ga[15];a.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,a.buffer.buffer),g.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);y.currentVAO=null;y.setVAO(y.targetVAO);l?g.enable(3042):g.disable(3042);
q.blend_enable=l;c?g.enable(2884):g.disable(2884);q.cull_enable=c;na?g.enable(2929):g.disable(2929);q.depth_enable=na;Ka?g.enable(3024):g.disable(3024);q.dither=Ka;cb?g.enable(32823):g.disable(32823);q.polygonOffset_enable=cb;Z?g.enable(32926):g.disable(32926);q.sample_alpha=Z;pa?g.enable(32928):g.disable(32928);q.sample_enable=pa;Qa?g.enable(3089):g.disable(3089);q.scissor_enable=Qa;X?g.enable(2960):g.disable(2960);q.stencil_enable=X;g.blendColor(b[0],b[1],b[2],b[3]);v[0]=b[0];v[1]=b[1];v[2]=b[2];
v[3]=b[3];g.blendEquationSeparate(A[0],A[1]);Y[0]=A[0];Y[1]=A[1];g.blendFuncSeparate(H[0],H[1],H[2],H[3]);F[0]=H[0];F[1]=H[1];F[2]=H[2];F[3]=H[3];g.colorMask(w[0],w[1],w[2],w[3]);B[0]=w[0];B[1]=w[1];B[2]=w[2];B[3]=w[3];g.cullFace(K);q.cull_face=K;g.depthFunc(N);q.depth_func=N;g.depthMask(P);q.depth_mask=P;g.depthRange(M[0],M[1]);n[0]=M[0];n[1]=M[1];g.frontFace(sa);q.frontFace=sa;g.lineWidth(J);q.lineWidth=J;g.polygonOffset(G[0],G[1]);aa[0]=G[0];aa[1]=G[1];g.sampleCoverage(I[0],I[1]);Id[0]=I[0];Id[1]=
I[1];g.scissor(f[0],f[1],f[2],f[3]);h[0]=f[0];h[1]=f[1];h[2]=f[2];h[3]=f[3];g.stencilFunc(e[0],e[1],e[2]);z[0]=e[0];z[1]=e[1];z[2]=e[2];g.stencilMask(Ob);q.stencil_mask=Ob;g.stencilOpSeparate(T[0],T[1],T[2],T[3]);U[0]=T[0];U[1]=T[1];U[2]=T[2];U[3]=T[3];g.stencilOpSeparate(m[0],m[1],m[2],m[3]);qa[0]=m[0];qa[1]=m[1];qa[2]=m[2];qa[3]=m[3];g.viewport(L[0],L[1],L[2],L[3]);fa[0]=L[0];fa[1]=L[1];fa[2]=L[2];fa[3]=L[3]}}},$3:function(c,ga,q,O){var g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,
l,W,na,Ka,cb;g=c.context;d=c.current;y=c.framebuffer;b=c.gl;v=c.next;A=c.shader;Y=c.vao;H=v.blend_color;F=d.blend_color;w=v.blend_equation;B=d.blend_equation;M=v.blend_func;n=d.blend_func;G=v.colorMask;aa=d.colorMask;I=v.depth_range;Z=d.depth_range;f=v.polygonOffset_offset;h=d.polygonOffset_offset;e=v.sample_coverage;z=d.sample_coverage;T=v.scissor_box;U=d.scissor_box;m=v.stencil_func;qa=d.stencil_func;L=v.stencil_opBack;fa=d.stencil_opBack;a=v.stencil_opFront;l=d.stencil_opFront;W=v.viewport;na=
d.viewport;Ka={};cb={};return{batch:function(g,c){var q,X,K,N,P;q=y.next;q!==y.cur&&(q?b.bindFramebuffer(36160,q.framebuffer):b.bindFramebuffer(36160,null),y.cur=q);if(d.dirty){q=v.dither;q!==d.dither&&(q?b.enable(3024):b.disable(3024),d.dither=q);q=v.blend_enable;q!==d.blend_enable&&(q?b.enable(3042):b.disable(3042),d.blend_enable=q);q=H[0];K=H[1];N=H[2];P=H[3];if(q!==F[0]||K!==F[1]||N!==F[2]||P!==F[3])b.blendColor(q,K,N,P),F[0]=q,F[1]=K,F[2]=N,F[3]=P;q=w[0];K=w[1];if(q!==B[0]||K!==B[1])b.blendEquationSeparate(q,
K),B[0]=q,B[1]=K;q=M[0];K=M[1];N=M[2];P=M[3];if(q!==n[0]||K!==n[1]||N!==n[2]||P!==n[3])b.blendFuncSeparate(q,K,N,P),n[0]=q,n[1]=K,n[2]=N,n[3]=P;q=v.depth_enable;q!==d.depth_enable&&(q?b.enable(2929):b.disable(2929),d.depth_enable=q);q=v.depth_func;q!==d.depth_func&&(b.depthFunc(q),d.depth_func=q);q=I[0];K=I[1];if(q!==Z[0]||K!==Z[1])b.depthRange(q,K),Z[0]=q,Z[1]=K;q=v.depth_mask;q!==d.depth_mask&&(b.depthMask(q),d.depth_mask=q);q=G[0];K=G[1];N=G[2];P=G[3];if(q!==aa[0]||K!==aa[1]||N!==aa[2]||P!==aa[3])b.colorMask(q,
K,N,P),aa[0]=q,aa[1]=K,aa[2]=N,aa[3]=P;q=v.cull_enable;q!==d.cull_enable&&(q?b.enable(2884):b.disable(2884),d.cull_enable=q);q=v.cull_face;q!==d.cull_face&&(b.cullFace(q),d.cull_face=q);q=v.frontFace;q!==d.frontFace&&(b.frontFace(q),d.frontFace=q);q=v.lineWidth;q!==d.lineWidth&&(b.lineWidth(q),d.lineWidth=q);q=v.polygonOffset_enable;q!==d.polygonOffset_enable&&(q?b.enable(32823):b.disable(32823),d.polygonOffset_enable=q);q=f[0];K=f[1];if(q!==h[0]||K!==h[1])b.polygonOffset(q,K),h[0]=q,h[1]=K;q=v.sample_alpha;
q!==d.sample_alpha&&(q?b.enable(32926):b.disable(32926),d.sample_alpha=q);q=v.sample_enable;q!==d.sample_enable&&(q?b.enable(32928):b.disable(32928),d.sample_enable=q);q=e[0];K=e[1];if(q!==z[0]||K!==z[1])b.sampleCoverage(q,K),z[0]=q,z[1]=K;q=v.stencil_enable;q!==d.stencil_enable&&(q?b.enable(2960):b.disable(2960),d.stencil_enable=q);q=v.stencil_mask;q!==d.stencil_mask&&(b.stencilMask(q),d.stencil_mask=q);q=m[0];K=m[1];N=m[2];if(q!==qa[0]||K!==qa[1]||N!==qa[2])b.stencilFunc(q,K,N),qa[0]=q,qa[1]=K,
qa[2]=N;q=a[0];K=a[1];N=a[2];P=a[3];if(q!==l[0]||K!==l[1]||N!==l[2]||P!==l[3])b.stencilOpSeparate(q,K,N,P),l[0]=q,l[1]=K,l[2]=N,l[3]=P;q=L[0];K=L[1];N=L[2];P=L[3];if(q!==fa[0]||K!==fa[1]||N!==fa[2]||P!==fa[3])b.stencilOpSeparate(q,K,N,P),fa[0]=q,fa[1]=K,fa[2]=N,fa[3]=P;q=v.scissor_enable;q!==d.scissor_enable&&(q?b.enable(3089):b.disable(3089),d.scissor_enable=q);q=T[0];K=T[1];N=T[2];P=T[3];if(q!==U[0]||K!==U[1]||N!==U[2]||P!==U[3])b.scissor(q,K,N,P),U[0]=q,U[1]=K,U[2]=N,U[3]=P;q=W[0];K=W[1];N=W[2];
P=W[3];if(q!==na[0]||K!==na[1]||N!==na[2]||P!==na[3])b.viewport(q,K,N,P),na[0]=q,na[1]=K,na[2]=N,na[3]=P;d.dirty=!1}if(q=d.profile)X=performance.now(),ga.count+=c;K=A.program(A.vert,A.frag);b.useProgram(K.program);Y.setVAO(null);N=K.id;(P=cb[N])||(P=cb[N]=O(K));P.call(this,g,c);Y.setVAO(null);q&&(ga.cpuTime+=performance.now()-X)},draw:function(g){var c,O,X,K,N;c=y.next;c!==y.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),y.cur=c);if(d.dirty){c=v.dither;c!==d.dither&&
(c?b.enable(3024):b.disable(3024),d.dither=c);c=v.blend_enable;c!==d.blend_enable&&(c?b.enable(3042):b.disable(3042),d.blend_enable=c);c=H[0];X=H[1];K=H[2];N=H[3];if(c!==F[0]||X!==F[1]||K!==F[2]||N!==F[3])b.blendColor(c,X,K,N),F[0]=c,F[1]=X,F[2]=K,F[3]=N;c=w[0];X=w[1];if(c!==B[0]||X!==B[1])b.blendEquationSeparate(c,X),B[0]=c,B[1]=X;c=M[0];X=M[1];K=M[2];N=M[3];if(c!==n[0]||X!==n[1]||K!==n[2]||N!==n[3])b.blendFuncSeparate(c,X,K,N),n[0]=c,n[1]=X,n[2]=K,n[3]=N;c=v.depth_enable;c!==d.depth_enable&&(c?
b.enable(2929):b.disable(2929),d.depth_enable=c);c=v.depth_func;c!==d.depth_func&&(b.depthFunc(c),d.depth_func=c);c=I[0];X=I[1];if(c!==Z[0]||X!==Z[1])b.depthRange(c,X),Z[0]=c,Z[1]=X;c=v.depth_mask;c!==d.depth_mask&&(b.depthMask(c),d.depth_mask=c);c=G[0];X=G[1];K=G[2];N=G[3];if(c!==aa[0]||X!==aa[1]||K!==aa[2]||N!==aa[3])b.colorMask(c,X,K,N),aa[0]=c,aa[1]=X,aa[2]=K,aa[3]=N;c=v.cull_enable;c!==d.cull_enable&&(c?b.enable(2884):b.disable(2884),d.cull_enable=c);c=v.cull_face;c!==d.cull_face&&(b.cullFace(c),
d.cull_face=c);c=v.frontFace;c!==d.frontFace&&(b.frontFace(c),d.frontFace=c);c=v.lineWidth;c!==d.lineWidth&&(b.lineWidth(c),d.lineWidth=c);c=v.polygonOffset_enable;c!==d.polygonOffset_enable&&(c?b.enable(32823):b.disable(32823),d.polygonOffset_enable=c);c=f[0];X=f[1];if(c!==h[0]||X!==h[1])b.polygonOffset(c,X),h[0]=c,h[1]=X;c=v.sample_alpha;c!==d.sample_alpha&&(c?b.enable(32926):b.disable(32926),d.sample_alpha=c);c=v.sample_enable;c!==d.sample_enable&&(c?b.enable(32928):b.disable(32928),d.sample_enable=
c);c=e[0];X=e[1];if(c!==z[0]||X!==z[1])b.sampleCoverage(c,X),z[0]=c,z[1]=X;c=v.stencil_enable;c!==d.stencil_enable&&(c?b.enable(2960):b.disable(2960),d.stencil_enable=c);c=v.stencil_mask;c!==d.stencil_mask&&(b.stencilMask(c),d.stencil_mask=c);c=m[0];X=m[1];K=m[2];if(c!==qa[0]||X!==qa[1]||K!==qa[2])b.stencilFunc(c,X,K),qa[0]=c,qa[1]=X,qa[2]=K;c=a[0];X=a[1];K=a[2];N=a[3];if(c!==l[0]||X!==l[1]||K!==l[2]||N!==l[3])b.stencilOpSeparate(c,X,K,N),l[0]=c,l[1]=X,l[2]=K,l[3]=N;c=L[0];X=L[1];K=L[2];N=L[3];if(c!==
fa[0]||X!==fa[1]||K!==fa[2]||N!==fa[3])b.stencilOpSeparate(c,X,K,N),fa[0]=c,fa[1]=X,fa[2]=K,fa[3]=N;c=v.scissor_enable;c!==d.scissor_enable&&(c?b.enable(3089):b.disable(3089),d.scissor_enable=c);c=T[0];X=T[1];K=T[2];N=T[3];if(c!==U[0]||X!==U[1]||K!==U[2]||N!==U[3])b.scissor(c,X,K,N),U[0]=c,U[1]=X,U[2]=K,U[3]=N;c=W[0];X=W[1];K=W[2];N=W[3];if(c!==na[0]||X!==na[1]||K!==na[2]||N!==na[3])b.viewport(c,X,K,N),na[0]=c,na[1]=X,na[2]=K,na[3]=N;d.dirty=!1}if(c=d.profile)O=performance.now(),ga.count++;X=A.program(A.vert,
A.frag);b.useProgram(X.program);Y.setVAO(null);K=X.id;(N=Ka[K])||(N=Ka[K]=q(X));N.call(this,g);Y.setVAO(null);c&&(ga.cpuTime+=performance.now()-O)},scope:function(a,b,e){var l,f;if(l=d.profile)f=performance.now(),ga.count++;b(g,a,e);l&&(ga.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(c,
ga,q,O,g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb,kc,pa,Qa,X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa,bc,cc,Qc,td,wc,V,C,la,Ca,Lb,nc,Zc,D,u,ka,va,R,ha,ra){var E,p,ca,x,ja,ia,k,tc,ba,r,Bb,yb,jf,ne,ve,je,Ed,re,qd,fe,se,xd,Dd,Zd,Wd,Ve,kf,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb;E=c.attributes;p=c.context;ca=c.current;x=c.draw;ja=c.elements;ia=c.framebuffer;k=c.gl;tc=c.next;ba=c.shader;
r=c.uniforms;Bb=c.vao;yb=tc.blend_color;jf=ca.blend_color;ne=tc.blend_equation;ve=ca.blend_equation;je=tc.blend_func;Ed=ca.blend_func;re=tc.colorMask;qd=ca.colorMask;fe=tc.depth_range;se=ca.depth_range;xd=tc.polygonOffset_offset;Dd=ca.polygonOffset_offset;Zd=tc.sample_coverage;Wd=ca.sample_coverage;Ve=tc.scissor_box;kf=ca.scissor_box;af=tc.stencil_func;Ad=ca.stencil_func;Fe=tc.stencil_opBack;Sd=ca.stencil_opBack;Td=tc.stencil_opFront;le=ca.stencil_opFront;Xd=tc.viewport;rd=ca.viewport;jd={};vd={};
$c=new Float32Array(16);kd=new Float32Array(16);oc=new Float32Array(16);id=new Float32Array(16);ed=new Float32Array(16);Lc=new Float32Array(16);qc=new Float32Array(16);ab=new Float32Array(16);Ic=new Float32Array(16);Db=new Float32Array(16);pc=new Float32Array(16);Ta=new Float32Array(16);Jc=new Float32Array(16);$b=new Float32Array(16);rc=new Float32Array(16);Fd=new Float32Array(16);Bd=new Float32Array(16);Ac=new Float32Array(16);Xb=new Float32Array(16);Gc=new Float32Array(16);Rc=new Float32Array(16);
La=new Float32Array(16);Eb=new Float32Array(16);Wa=new Float32Array(16);ta=new Float32Array(16);md=new Float32Array(16);hb=new Float32Array(16);Sa=new Float32Array(16);Gb=new Float32Array(16);db=new Float32Array(16);ec=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(a,e){var l,f,h,c;l=ia.next;l!==ia.cur&&(l?k.bindFramebuffer(36160,l.framebuffer):k.bindFramebuffer(36160,null),ia.cur=l);if(ca.dirty){var m,r,q,z,ba,ga,L,I,T,W,U,ab,Ta,ua,fa,xa,yb,Db,Aa,$b,Ia,qa,Lc,Ra,ed;m=re[0];r=re[1];
q=re[2];z=re[3];if(m!==qd[0]||r!==qd[1]||q!==qd[2]||z!==qd[3])k.colorMask(m,r,q,z),qd[0]=m,qd[1]=r,qd[2]=q,qd[3]=z;ba=tc.frontFace;ba!==ca.frontFace&&(k.frontFace(ba),ca.frontFace=ba);ga=tc.polygonOffset_enable;ga!==ca.polygonOffset_enable&&(ga?k.enable(32823):k.disable(32823),ca.polygonOffset_enable=ga);L=xd[0];I=xd[1];if(L!==Dd[0]||I!==Dd[1])k.polygonOffset(L,I),Dd[0]=L,Dd[1]=I;T=tc.sample_alpha;T!==ca.sample_alpha&&(T?k.enable(32926):k.disable(32926),ca.sample_alpha=T);W=tc.sample_enable;W!==ca.sample_enable&&
(W?k.enable(32928):k.disable(32928),ca.sample_enable=W);U=Zd[0];ab=Zd[1];if(U!==Wd[0]||ab!==Wd[1])k.sampleCoverage(U,ab),Wd[0]=U,Wd[1]=ab;Ta=tc.stencil_enable;Ta!==ca.stencil_enable&&(Ta?k.enable(2960):k.disable(2960),ca.stencil_enable=Ta);ua=tc.stencil_mask;ua!==ca.stencil_mask&&(k.stencilMask(ua),ca.stencil_mask=ua);fa=af[0];xa=af[1];yb=af[2];if(fa!==Ad[0]||xa!==Ad[1]||yb!==Ad[2])k.stencilFunc(fa,xa,yb),Ad[0]=fa,Ad[1]=xa,Ad[2]=yb;Db=Td[0];Aa=Td[1];$b=Td[2];Ia=Td[3];if(Db!==le[0]||Aa!==le[1]||$b!==
le[2]||Ia!==le[3])k.stencilOpSeparate(Db,Aa,$b,Ia),le[0]=Db,le[1]=Aa,le[2]=$b,le[3]=Ia;qa=Fe[0];Lc=Fe[1];Ra=Fe[2];ed=Fe[3];if(qa!==Sd[0]||Lc!==Sd[1]||Ra!==Sd[2]||ed!==Sd[3])k.stencilOpSeparate(qa,Lc,Ra,ed),Sd[0]=qa,Sd[1]=Lc,Sd[2]=Ra,Sd[3]=ed}k.blendColor(0,0,0,0);jf[0]=0;jf[1]=0;jf[2]=0;jf[3]=0;k.disable(3042);ca.blend_enable=!1;k.blendEquationSeparate(32774,32774);ve[0]=32774;ve[1]=32774;k.blendFuncSeparate(770,771,1,1);Ed[0]=770;Ed[1]=771;Ed[2]=1;Ed[3]=1;k.enable(2884);ca.cull_enable=!0;k.cullFace(1029);
ca.cull_face=1029;k.enable(2929);ca.depth_enable=!0;k.depthFunc(513);ca.depth_func=513;k.depthMask(!0);ca.depth_mask=!0;k.depthRange(0,1);se[0]=0;se[1]=1;k.disable(3024);ca.dither=!1;k.lineWidth(2);ca.lineWidth=2;k.enable(3089);ca.scissor_enable=!0;f=ca.profile;ca.profile=!1;k.useProgram(kc.program);var na,Za,qc,ya,Ve,Ja,oc,gb,jb,za,Jc,Da,rb,sb,Xa,Ya,Ic,rc,kd,Va,Mb,pc,Fa,$c,Pa,Ba,mb,vb,Cb,tb,id,wb,je;Bb.setVAO(null);na=bc.location;Za=E[na];Za.buffer||k.enableVertexAttribArray(na);if(Za.type!==O.dtype||
4!==Za.size||Za.buffer!==O||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)k.bindBuffer(34962,O.buffer),k.vertexAttribPointer(na,4,O.dtype,!1,0,0),Za.type=O.dtype,Za.size=4,Za.buffer=O,Za.normalized=!1,Za.offset=0,Za.stride=0;qc=cc.location;ya=E[qc];ya.buffer||k.enableVertexAttribArray(qc);if(ya.type!==g.dtype||4!==ya.size||ya.buffer!==g||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)k.bindBuffer(34962,g.buffer),k.vertexAttribPointer(qc,4,g.dtype,!1,0,0),ya.type=g.dtype,ya.size=4,ya.buffer=g,
ya.normalized=!1,ya.offset=0,ya.stride=0;Ve=Qc.location;Ja=E[Ve];Ja.buffer||k.enableVertexAttribArray(Ve);if(Ja.type!==d.dtype||4!==Ja.size||Ja.buffer!==d||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)k.bindBuffer(34962,d.buffer),k.vertexAttribPointer(Ve,4,d.dtype,!1,0,0),Ja.type=d.dtype,Ja.size=4,Ja.buffer=d,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;oc=td.location;gb=E[oc];gb.buffer||k.enableVertexAttribArray(oc);if(gb.type!==y.dtype||4!==gb.size||gb.buffer!==y||!1!==gb.normalized||0!==gb.offset||
0!==gb.stride)k.bindBuffer(34962,y.buffer),k.vertexAttribPointer(oc,4,y.dtype,!1,0,0),gb.type=y.dtype,gb.size=4,gb.buffer=y,gb.normalized=!1,gb.offset=0,gb.stride=0;jb=wc.location;za=E[jb];za.buffer||k.enableVertexAttribArray(jb);if(za.type!==b.dtype||4!==za.size||za.buffer!==b||!1!==za.normalized||0!==za.offset||0!==za.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(jb,4,b.dtype,!1,0,0),za.type=b.dtype,za.size=4,za.buffer=b,za.normalized=!1,za.offset=0,za.stride=0;Jc=V.location;Da=E[Jc];
Da.buffer||k.enableVertexAttribArray(Jc);if(Da.type!==v.dtype||4!==Da.size||Da.buffer!==v||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)k.bindBuffer(34962,v.buffer),k.vertexAttribPointer(Jc,4,v.dtype,!1,0,0),Da.type=v.dtype,Da.size=4,Da.buffer=v,Da.normalized=!1,Da.offset=0,Da.stride=0;rb=C.location;sb=E[rb];sb.buffer||k.enableVertexAttribArray(rb);if(sb.type!==A.dtype||4!==sb.size||sb.buffer!==A||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(rb,
4,A.dtype,!1,0,0),sb.type=A.dtype,sb.size=4,sb.buffer=A,sb.normalized=!1,sb.offset=0,sb.stride=0;Xa=la.location;Ya=E[Xa];Ya.buffer||k.enableVertexAttribArray(Xa);if(Ya.type!==Y.dtype||4!==Ya.size||Ya.buffer!==Y||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)k.bindBuffer(34962,Y.buffer),k.vertexAttribPointer(Xa,4,Y.dtype,!1,0,0),Ya.type=Y.dtype,Ya.size=4,Ya.buffer=Y,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ic=Ca.location;rc=E[Ic];rc.buffer||k.enableVertexAttribArray(Ic);if(rc.type!==H.dtype||4!==
rc.size||rc.buffer!==H||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)k.bindBuffer(34962,H.buffer),k.vertexAttribPointer(Ic,4,H.dtype,!1,0,0),rc.type=H.dtype,rc.size=4,rc.buffer=H,rc.normalized=!1,rc.offset=0,rc.stride=0;kd=Lb.location;Va=E[kd];Va.buffer||k.enableVertexAttribArray(kd);if(Va.type!==F.dtype||4!==Va.size||Va.buffer!==F||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)k.bindBuffer(34962,F.buffer),k.vertexAttribPointer(kd,4,F.dtype,!1,0,0),Va.type=F.dtype,Va.size=4,Va.buffer=F,Va.normalized=
!1,Va.offset=0,Va.stride=0;Mb=nc.location;pc=E[Mb];pc.buffer||k.enableVertexAttribArray(Mb);if(pc.type!==w.dtype||4!==pc.size||pc.buffer!==w||!1!==pc.normalized||0!==pc.offset||0!==pc.stride)k.bindBuffer(34962,w.buffer),k.vertexAttribPointer(Mb,4,w.dtype,!1,0,0),pc.type=w.dtype,pc.size=4,pc.buffer=w,pc.normalized=!1,pc.offset=0,pc.stride=0;Fa=Zc.location;$c=E[Fa];$c.buffer||k.enableVertexAttribArray(Fa);if($c.type!==B.dtype||4!==$c.size||$c.buffer!==B||!1!==$c.normalized||0!==$c.offset||0!==$c.stride)k.bindBuffer(34962,
B.buffer),k.vertexAttribPointer(Fa,4,B.dtype,!1,0,0),$c.type=B.dtype,$c.size=4,$c.buffer=B,$c.normalized=!1,$c.offset=0,$c.stride=0;Pa=D.location;Ba=E[Pa];Ba.buffer||k.enableVertexAttribArray(Pa);if(Ba.type!==M.dtype||4!==Ba.size||Ba.buffer!==M||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)k.bindBuffer(34962,M.buffer),k.vertexAttribPointer(Pa,4,M.dtype,!1,0,0),Ba.type=M.dtype,Ba.size=4,Ba.buffer=M,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;mb=u.location;vb=E[mb];vb.buffer||k.enableVertexAttribArray(mb);
if(vb.type!==n.dtype||4!==vb.size||vb.buffer!==n||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)k.bindBuffer(34962,n.buffer),k.vertexAttribPointer(mb,4,n.dtype,!1,0,0),vb.type=n.dtype,vb.size=4,vb.buffer=n,vb.normalized=!1,vb.offset=0,vb.stride=0;Cb=ka.location;tb=E[Cb];tb.buffer||k.enableVertexAttribArray(Cb);if(tb.type!==G.dtype||4!==tb.size||tb.buffer!==G||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)k.bindBuffer(34962,G.buffer),k.vertexAttribPointer(Cb,4,G.dtype,!1,0,0),tb.type=G.dtype,
tb.size=4,tb.buffer=G,tb.normalized=!1,tb.offset=0,tb.stride=0;id=Qa.location;wb=E[id];wb.buffer||k.enableVertexAttribArray(id);if(wb.type!==aa.dtype||4!==wb.size||wb.buffer!==aa||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)k.bindBuffer(34962,aa.buffer),k.vertexAttribPointer(id,4,aa.dtype,!1,0,0),wb.type=aa.dtype,wb.size=4,wb.buffer=aa,wb.normalized=!1,wb.offset=0,wb.stride=0;k.uniform1i(va.location,pa.bind());(je=x.elements)?k.bindBuffer(34963,je.buffer.buffer):Bb.currentVAO&&(je=ja.getElements(Bb.currentVAO.elements))&&
k.bindBuffer(34963,je.buffer.buffer);for(h=0;h<e;++h){c=a[h];var fe,Xd,Fd,ne,Z,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ka,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,cb,gd,oe,Wc,Id,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d;jd.height=c.viewportHeight;jd.width=c.viewportWidth;jd.x=c.viewportX;jd.y=c.viewportY;fe=jd.x|0;Xd=jd.y|0;Fd="width"in jd?jd.width|0:p.framebufferWidth-fe;ne="height"in jd?jd.height|0:p.framebufferHeight-Xd;Z=p.viewportWidth;p.viewportWidth=Fd;Wb=p.viewportHeight;
p.viewportHeight=ne;k.viewport(fe,Xd,Fd,ne);rd[0]=fe;rd[1]=Xd;rd[2]=Fd;rd[3]=ne;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;ac=vd.x|0;Qb=vd.y|0;Ga="width"in vd?vd.width|0:p.framebufferWidth-ac;Yb="height"in vd?vd.height|0:p.framebufferHeight-Qb;k.scissor(ac,Qb,Ga,Yb);kf[0]=ac;kf[1]=Qb;kf[2]=Ga;kf[3]=Yb;nb=c.dim0A;k.uniformMatrix4fv(K.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(Bd[0]=nb[0],Bd[1]=nb[1],Bd[2]=nb[2],Bd[3]=nb[3],Bd[4]=nb[4],Bd[5]=
nb[5],Bd[6]=nb[6],Bd[7]=nb[7],Bd[8]=nb[8],Bd[9]=nb[9],Bd[10]=nb[10],Bd[11]=nb[11],Bd[12]=nb[12],Bd[13]=nb[13],Bd[14]=nb[14],Bd[15]=nb[15],Bd));xb=c.dim1A;k.uniformMatrix4fv(J.location,!1,Array.isArray(xb)||xb instanceof Float32Array?xb:(Ac[0]=xb[0],Ac[1]=xb[1],Ac[2]=xb[2],Ac[3]=xb[3],Ac[4]=xb[4],Ac[5]=xb[5],Ac[6]=xb[6],Ac[7]=xb[7],Ac[8]=xb[8],Ac[9]=xb[9],Ac[10]=xb[10],Ac[11]=xb[11],Ac[12]=xb[12],Ac[13]=xb[13],Ac[14]=xb[14],Ac[15]=xb[15],Ac));Nb=c.dim0B;k.uniformMatrix4fv(N.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(Xb[0]=Nb[0],Xb[1]=Nb[1],Xb[2]=Nb[2],Xb[3]=Nb[3],Xb[4]=Nb[4],Xb[5]=Nb[5],Xb[6]=Nb[6],Xb[7]=Nb[7],Xb[8]=Nb[8],Xb[9]=Nb[9],Xb[10]=Nb[10],Xb[11]=Nb[11],Xb[12]=Nb[12],Xb[13]=Nb[13],Xb[14]=Nb[14],Xb[15]=Nb[15],Xb));Rb=c.dim1B;k.uniformMatrix4fv(Ob.location,!1,Array.isArray(Rb)||Rb instanceof Float32Array?Rb:(Gc[0]=Rb[0],Gc[1]=Rb[1],Gc[2]=Rb[2],Gc[3]=Rb[3],Gc[4]=Rb[4],Gc[5]=Rb[5],Gc[6]=Rb[6],Gc[7]=Rb[7],Gc[8]=Rb[8],Gc[9]=Rb[9],Gc[10]=Rb[10],Gc[11]=Rb[11],Gc[12]=Rb[12],Gc[13]=
Rb[13],Gc[14]=Rb[14],Gc[15]=Rb[15],Gc));gc=c.dim0C;k.uniformMatrix4fv(P.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Rc[0]=gc[0],Rc[1]=gc[1],Rc[2]=gc[2],Rc[3]=gc[3],Rc[4]=gc[4],Rc[5]=gc[5],Rc[6]=gc[6],Rc[7]=gc[7],Rc[8]=gc[8],Rc[9]=gc[9],Rc[10]=gc[10],Rc[11]=gc[11],Rc[12]=gc[12],Rc[13]=gc[13],Rc[14]=gc[14],Rc[15]=gc[15],Rc));ic=c.dim1C;k.uniformMatrix4fv($a.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(La[0]=ic[0],La[1]=ic[1],La[2]=ic[2],La[3]=ic[3],La[4]=ic[4],La[5]=
ic[5],La[6]=ic[6],La[7]=ic[7],La[8]=ic[8],La[9]=ic[9],La[10]=ic[10],La[11]=ic[11],La[12]=ic[12],La[13]=ic[13],La[14]=ic[14],La[15]=ic[15],La));Ka=c.dim0D;k.uniformMatrix4fv(sa.location,!1,Array.isArray(Ka)||Ka instanceof Float32Array?Ka:(Eb[0]=Ka[0],Eb[1]=Ka[1],Eb[2]=Ka[2],Eb[3]=Ka[3],Eb[4]=Ka[4],Eb[5]=Ka[5],Eb[6]=Ka[6],Eb[7]=Ka[7],Eb[8]=Ka[8],Eb[9]=Ka[9],Eb[10]=Ka[10],Eb[11]=Ka[11],Eb[12]=Ka[12],Eb[13]=Ka[13],Eb[14]=Ka[14],Eb[15]=Ka[15],Eb));Bc=c.dim1D;k.uniformMatrix4fv(Q.location,!1,Array.isArray(Bc)||
Bc instanceof Float32Array?Bc:(Wa[0]=Bc[0],Wa[1]=Bc[1],Wa[2]=Bc[2],Wa[3]=Bc[3],Wa[4]=Bc[4],Wa[5]=Bc[5],Wa[6]=Bc[6],Wa[7]=Bc[7],Wa[8]=Bc[8],Wa[9]=Bc[9],Wa[10]=Bc[10],Wa[11]=Bc[11],Wa[12]=Bc[12],Wa[13]=Bc[13],Wa[14]=Bc[14],Wa[15]=Bc[15],Wa));Cc=c.loA;k.uniformMatrix4fv(Hb.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(ta[0]=Cc[0],ta[1]=Cc[1],ta[2]=Cc[2],ta[3]=Cc[3],ta[4]=Cc[4],ta[5]=Cc[5],ta[6]=Cc[6],ta[7]=Cc[7],ta[8]=Cc[8],ta[9]=Cc[9],ta[10]=Cc[10],ta[11]=Cc[11],ta[12]=Cc[12],ta[13]=
Cc[13],ta[14]=Cc[14],ta[15]=Cc[15],ta));Ec=c.hiA;k.uniformMatrix4fv(ma.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(md[0]=Ec[0],md[1]=Ec[1],md[2]=Ec[2],md[3]=Ec[3],md[4]=Ec[4],md[5]=Ec[5],md[6]=Ec[6],md[7]=Ec[7],md[8]=Ec[8],md[9]=Ec[9],md[10]=Ec[10],md[11]=Ec[11],md[12]=Ec[12],md[13]=Ec[13],md[14]=Ec[14],md[15]=Ec[15],md));Nc=c.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(hb[0]=Nc[0],hb[1]=Nc[1],hb[2]=Nc[2],hb[3]=Nc[3],hb[4]=Nc[4],hb[5]=
Nc[5],hb[6]=Nc[6],hb[7]=Nc[7],hb[8]=Nc[8],hb[9]=Nc[9],hb[10]=Nc[10],hb[11]=Nc[11],hb[12]=Nc[12],hb[13]=Nc[13],hb[14]=Nc[14],hb[15]=Nc[15],hb));Yc=c.hiB;k.uniformMatrix4fv(ea.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(Sa[0]=Yc[0],Sa[1]=Yc[1],Sa[2]=Yc[2],Sa[3]=Yc[3],Sa[4]=Yc[4],Sa[5]=Yc[5],Sa[6]=Yc[6],Sa[7]=Yc[7],Sa[8]=Yc[8],Sa[9]=Yc[9],Sa[10]=Yc[10],Sa[11]=Yc[11],Sa[12]=Yc[12],Sa[13]=Yc[13],Sa[14]=Yc[14],Sa[15]=Yc[15],Sa));Sc=c.loC;k.uniformMatrix4fv(S.location,!1,Array.isArray(Sc)||
Sc instanceof Float32Array?Sc:(Gb[0]=Sc[0],Gb[1]=Sc[1],Gb[2]=Sc[2],Gb[3]=Sc[3],Gb[4]=Sc[4],Gb[5]=Sc[5],Gb[6]=Sc[6],Gb[7]=Sc[7],Gb[8]=Sc[8],Gb[9]=Sc[9],Gb[10]=Sc[10],Gb[11]=Sc[11],Gb[12]=Sc[12],Gb[13]=Sc[13],Gb[14]=Sc[14],Gb[15]=Sc[15],Gb));Oc=c.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(db[0]=Oc[0],db[1]=Oc[1],db[2]=Oc[2],db[3]=Oc[3],db[4]=Oc[4],db[5]=Oc[5],db[6]=Oc[6],db[7]=Oc[7],db[8]=Oc[8],db[9]=Oc[9],db[10]=Oc[10],db[11]=Oc[11],db[12]=Oc[12],db[13]=
Oc[13],db[14]=Oc[14],db[15]=Oc[15],db));Kb=c.loD;k.uniformMatrix4fv(ob.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(ec[0]=Kb[0],ec[1]=Kb[1],ec[2]=Kb[2],ec[3]=Kb[3],ec[4]=Kb[4],ec[5]=Kb[5],ec[6]=Kb[6],ec[7]=Kb[7],ec[8]=Kb[8],ec[9]=Kb[9],ec[10]=Kb[10],ec[11]=Kb[11],ec[12]=Kb[12],ec[13]=Kb[13],ec[14]=Kb[14],ec[15]=Kb[15],ec));Fb=c.hiD;k.uniformMatrix4fv(Na.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Sb[0]=Fb[0],Sb[1]=Fb[1],Sb[2]=Fb[2],Sb[3]=Fb[3],Sb[4]=Fb[4],Sb[5]=
Fb[5],Sb[6]=Fb[6],Sb[7]=Fb[7],Sb[8]=Fb[8],Sb[9]=Fb[9],Sb[10]=Fb[10],Sb[11]=Fb[11],Sb[12]=Fb[12],Sb[13]=Fb[13],Sb[14]=Fb[14],Sb[15]=Fb[15],Sb));Pc=c.resolution;Hc=Pc[0];hc=Pc[1];h&&Tc===Hc&&Vc===hc||(Tc=Hc,Vc=hc,k.uniform2f(R.location,Hc,hc));cb=c.viewBoxPos;gd=cb[0];Wc=cb[1];h&&oe===gd&&Id===Wc||(oe=gd,Id=Wc,k.uniform2f(ha.location,gd,Wc));Ld=c.viewBoxSize;we=Ld[0];Ud=Ld[1];h&&xe===we&&Jd===Ud||(xe=we,Jd=Ud,k.uniform2f(ra.location,we,Ud));Gd=c.maskHeight;h&&bd===Gd||(bd=Gd,k.uniform1f(da.location,
Gd));Fc=c.drwLayer;h&&od===Fc||(od=Fc,k.uniform1f(t.location,Fc));hd=c.contextColor;ad=hd[0];yd=hd[1];ye=hd[2];uf=hd[3];h&&pd===ad&&zd===yd&&te===ye&&ee===uf||(pd=ad,zd=yd,te=ye,ee=uf,k.uniform4f(X.location,ad,yd,ye,uf));(de=c.maskTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);be=de._texture;k.uniform1i(wa.location,be.bind());ue=c.offset;if($d=c.count)je?k.drawElements(1,$d,je.type,ue<<(je.type-5121>>1)):k.drawArrays(1,ue,$d),p.viewportWidth=Z,p.viewportHeight=Wb,be.unbind()}pa.unbind();
ca.dirty=!0;Bb.setVAO(null);ca.profile=f},draw:function(a){var e,l,f,c,h,m;e=ia.next;e!==ia.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),ia.cur=e);if(ca.dirty){e=re[0];m=re[1];l=re[2];f=re[3];if(e!==qd[0]||m!==qd[1]||l!==qd[2]||f!==qd[3])k.colorMask(e,m,l,f),qd[0]=e,qd[1]=m,qd[2]=l,qd[3]=f;e=tc.frontFace;e!==ca.frontFace&&(k.frontFace(e),ca.frontFace=e);e=tc.polygonOffset_enable;e!==ca.polygonOffset_enable&&(e?k.enable(32823):k.disable(32823),ca.polygonOffset_enable=
e);e=xd[0];m=xd[1];if(e!==Dd[0]||m!==Dd[1])k.polygonOffset(e,m),Dd[0]=e,Dd[1]=m;e=tc.sample_alpha;e!==ca.sample_alpha&&(e?k.enable(32926):k.disable(32926),ca.sample_alpha=e);e=tc.sample_enable;e!==ca.sample_enable&&(e?k.enable(32928):k.disable(32928),ca.sample_enable=e);e=Zd[0];m=Zd[1];if(e!==Wd[0]||m!==Wd[1])k.sampleCoverage(e,m),Wd[0]=e,Wd[1]=m;e=tc.stencil_enable;e!==ca.stencil_enable&&(e?k.enable(2960):k.disable(2960),ca.stencil_enable=e);e=tc.stencil_mask;e!==ca.stencil_mask&&(k.stencilMask(e),
ca.stencil_mask=e);e=af[0];m=af[1];l=af[2];if(e!==Ad[0]||m!==Ad[1]||l!==Ad[2])k.stencilFunc(e,m,l),Ad[0]=e,Ad[1]=m,Ad[2]=l;e=Td[0];m=Td[1];l=Td[2];f=Td[3];if(e!==le[0]||m!==le[1]||l!==le[2]||f!==le[3])k.stencilOpSeparate(e,m,l,f),le[0]=e,le[1]=m,le[2]=l,le[3]=f;e=Fe[0];m=Fe[1];l=Fe[2];f=Fe[3];if(e!==Sd[0]||m!==Sd[1]||l!==Sd[2]||f!==Sd[3])k.stencilOpSeparate(e,m,l,f),Sd[0]=e,Sd[1]=m,Sd[2]=l,Sd[3]=f}jd.height=a.viewportHeight;jd.width=a.viewportWidth;jd.x=a.viewportX;jd.y=a.viewportY;l=jd.x|0;f=jd.y|
0;c="width"in jd?jd.width|0:p.framebufferWidth-l;h="height"in jd?jd.height|0:p.framebufferHeight-f;e=p.viewportWidth;p.viewportWidth=c;m=p.viewportHeight;p.viewportHeight=h;k.viewport(l,f,c,h);rd[0]=l;rd[1]=f;rd[2]=c;rd[3]=h;k.blendColor(0,0,0,0);jf[0]=0;jf[1]=0;jf[2]=0;jf[3]=0;k.disable(3042);ca.blend_enable=!1;k.blendEquationSeparate(32774,32774);ve[0]=32774;ve[1]=32774;k.blendFuncSeparate(770,771,1,1);Ed[0]=770;Ed[1]=771;Ed[2]=1;Ed[3]=1;k.enable(2884);ca.cull_enable=!0;k.cullFace(1029);ca.cull_face=
1029;k.enable(2929);ca.depth_enable=!0;k.depthFunc(513);ca.depth_func=513;k.depthMask(!0);ca.depth_mask=!0;k.depthRange(0,1);se[0]=0;se[1]=1;k.disable(3024);ca.dither=!1;k.lineWidth(2);ca.lineWidth=2;vd.height=a.scissorHeight;vd.width=a.scissorWidth;vd.x=a.scissorX;vd.y=a.scissorY;l=vd.x|0;f=vd.y|0;c="width"in vd?vd.width|0:p.framebufferWidth-l;h="height"in vd?vd.height|0:p.framebufferHeight-f;k.scissor(l,f,c,h);kf[0]=l;kf[1]=f;kf[2]=c;kf[3]=h;k.enable(3089);ca.scissor_enable=!0;l=ca.profile;ca.profile=
!1;k.useProgram(q.program);Bb.setVAO(null);f=bc.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==O.dtype||4!==c.size||c.buffer!==O||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,O.buffer),k.vertexAttribPointer(f,4,O.dtype,!1,0,0),c.type=O.dtype,c.size=4,c.buffer=O,c.normalized=!1,c.offset=0,c.stride=0;f=cc.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==g.dtype||4!==c.size||c.buffer!==g||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,
g.buffer),k.vertexAttribPointer(f,4,g.dtype,!1,0,0),c.type=g.dtype,c.size=4,c.buffer=g,c.normalized=!1,c.offset=0,c.stride=0;f=Qc.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==d.dtype||4!==c.size||c.buffer!==d||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,d.buffer),k.vertexAttribPointer(f,4,d.dtype,!1,0,0),c.type=d.dtype,c.size=4,c.buffer=d,c.normalized=!1,c.offset=0,c.stride=0;f=td.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==y.dtype||
4!==c.size||c.buffer!==y||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,y.buffer),k.vertexAttribPointer(f,4,y.dtype,!1,0,0),c.type=y.dtype,c.size=4,c.buffer=y,c.normalized=!1,c.offset=0,c.stride=0;f=wc.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==b.dtype||4!==c.size||c.buffer!==b||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,b.buffer),k.vertexAttribPointer(f,4,b.dtype,!1,0,0),c.type=b.dtype,c.size=4,c.buffer=b,c.normalized=!1,c.offset=0,
c.stride=0;f=V.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==v.dtype||4!==c.size||c.buffer!==v||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,v.buffer),k.vertexAttribPointer(f,4,v.dtype,!1,0,0),c.type=v.dtype,c.size=4,c.buffer=v,c.normalized=!1,c.offset=0,c.stride=0;f=C.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==A.dtype||4!==c.size||c.buffer!==A||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,A.buffer),k.vertexAttribPointer(f,
4,A.dtype,!1,0,0),c.type=A.dtype,c.size=4,c.buffer=A,c.normalized=!1,c.offset=0,c.stride=0;f=la.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==Y.dtype||4!==c.size||c.buffer!==Y||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,Y.buffer),k.vertexAttribPointer(f,4,Y.dtype,!1,0,0),c.type=Y.dtype,c.size=4,c.buffer=Y,c.normalized=!1,c.offset=0,c.stride=0;f=Ca.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==H.dtype||4!==c.size||c.buffer!==H||!1!==c.normalized||
0!==c.offset||0!==c.stride)k.bindBuffer(34962,H.buffer),k.vertexAttribPointer(f,4,H.dtype,!1,0,0),c.type=H.dtype,c.size=4,c.buffer=H,c.normalized=!1,c.offset=0,c.stride=0;f=Lb.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==F.dtype||4!==c.size||c.buffer!==F||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,F.buffer),k.vertexAttribPointer(f,4,F.dtype,!1,0,0),c.type=F.dtype,c.size=4,c.buffer=F,c.normalized=!1,c.offset=0,c.stride=0;f=nc.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);
if(c.type!==w.dtype||4!==c.size||c.buffer!==w||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,w.buffer),k.vertexAttribPointer(f,4,w.dtype,!1,0,0),c.type=w.dtype,c.size=4,c.buffer=w,c.normalized=!1,c.offset=0,c.stride=0;f=Zc.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==B.dtype||4!==c.size||c.buffer!==B||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,B.buffer),k.vertexAttribPointer(f,4,B.dtype,!1,0,0),c.type=B.dtype,c.size=4,c.buffer=B,c.normalized=
!1,c.offset=0,c.stride=0;f=D.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==M.dtype||4!==c.size||c.buffer!==M||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,M.buffer),k.vertexAttribPointer(f,4,M.dtype,!1,0,0),c.type=M.dtype,c.size=4,c.buffer=M,c.normalized=!1,c.offset=0,c.stride=0;f=u.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==n.dtype||4!==c.size||c.buffer!==n||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,n.buffer),
k.vertexAttribPointer(f,4,n.dtype,!1,0,0),c.type=n.dtype,c.size=4,c.buffer=n,c.normalized=!1,c.offset=0,c.stride=0;f=ka.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==G.dtype||4!==c.size||c.buffer!==G||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,G.buffer),k.vertexAttribPointer(f,4,G.dtype,!1,0,0),c.type=G.dtype,c.size=4,c.buffer=G,c.normalized=!1,c.offset=0,c.stride=0;f=Qa.location;c=E[f];c.buffer||k.enableVertexAttribArray(f);if(c.type!==aa.dtype||4!==c.size||
c.buffer!==aa||!1!==c.normalized||0!==c.offset||0!==c.stride)k.bindBuffer(34962,aa.buffer),k.vertexAttribPointer(f,4,aa.dtype,!1,0,0),c.type=aa.dtype,c.size=4,c.buffer=aa,c.normalized=!1,c.offset=0,c.stride=0;f=a.dim0A;k.uniformMatrix4fv(K.location,!1,Array.isArray(f)||f instanceof Float32Array?f:($c[0]=f[0],$c[1]=f[1],$c[2]=f[2],$c[3]=f[3],$c[4]=f[4],$c[5]=f[5],$c[6]=f[6],$c[7]=f[7],$c[8]=f[8],$c[9]=f[9],$c[10]=f[10],$c[11]=f[11],$c[12]=f[12],$c[13]=f[13],$c[14]=f[14],$c[15]=f[15],$c));f=a.dim1A;
k.uniformMatrix4fv(J.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(kd[0]=f[0],kd[1]=f[1],kd[2]=f[2],kd[3]=f[3],kd[4]=f[4],kd[5]=f[5],kd[6]=f[6],kd[7]=f[7],kd[8]=f[8],kd[9]=f[9],kd[10]=f[10],kd[11]=f[11],kd[12]=f[12],kd[13]=f[13],kd[14]=f[14],kd[15]=f[15],kd));f=a.dim0B;k.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(oc[0]=f[0],oc[1]=f[1],oc[2]=f[2],oc[3]=f[3],oc[4]=f[4],oc[5]=f[5],oc[6]=f[6],oc[7]=f[7],oc[8]=f[8],oc[9]=f[9],oc[10]=f[10],oc[11]=f[11],oc[12]=
f[12],oc[13]=f[13],oc[14]=f[14],oc[15]=f[15],oc));f=a.dim1B;k.uniformMatrix4fv(Ob.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(id[0]=f[0],id[1]=f[1],id[2]=f[2],id[3]=f[3],id[4]=f[4],id[5]=f[5],id[6]=f[6],id[7]=f[7],id[8]=f[8],id[9]=f[9],id[10]=f[10],id[11]=f[11],id[12]=f[12],id[13]=f[13],id[14]=f[14],id[15]=f[15],id));f=a.dim0C;k.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ed[0]=f[0],ed[1]=f[1],ed[2]=f[2],ed[3]=f[3],ed[4]=f[4],ed[5]=f[5],ed[6]=f[6],
ed[7]=f[7],ed[8]=f[8],ed[9]=f[9],ed[10]=f[10],ed[11]=f[11],ed[12]=f[12],ed[13]=f[13],ed[14]=f[14],ed[15]=f[15],ed));f=a.dim1C;k.uniformMatrix4fv($a.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],Lc[8]=f[8],Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.dim0D;k.uniformMatrix4fv(sa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(qc[0]=f[0],
qc[1]=f[1],qc[2]=f[2],qc[3]=f[3],qc[4]=f[4],qc[5]=f[5],qc[6]=f[6],qc[7]=f[7],qc[8]=f[8],qc[9]=f[9],qc[10]=f[10],qc[11]=f[11],qc[12]=f[12],qc[13]=f[13],qc[14]=f[14],qc[15]=f[15],qc));f=a.dim1D;k.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ab[0]=f[0],ab[1]=f[1],ab[2]=f[2],ab[3]=f[3],ab[4]=f[4],ab[5]=f[5],ab[6]=f[6],ab[7]=f[7],ab[8]=f[8],ab[9]=f[9],ab[10]=f[10],ab[11]=f[11],ab[12]=f[12],ab[13]=f[13],ab[14]=f[14],ab[15]=f[15],ab));f=a.loA;k.uniformMatrix4fv(Hb.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(Ic[0]=f[0],Ic[1]=f[1],Ic[2]=f[2],Ic[3]=f[3],Ic[4]=f[4],Ic[5]=f[5],Ic[6]=f[6],Ic[7]=f[7],Ic[8]=f[8],Ic[9]=f[9],Ic[10]=f[10],Ic[11]=f[11],Ic[12]=f[12],Ic[13]=f[13],Ic[14]=f[14],Ic[15]=f[15],Ic));f=a.hiA;k.uniformMatrix4fv(ma.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Db[0]=f[0],Db[1]=f[1],Db[2]=f[2],Db[3]=f[3],Db[4]=f[4],Db[5]=f[5],Db[6]=f[6],Db[7]=f[7],Db[8]=f[8],Db[9]=f[9],Db[10]=f[10],Db[11]=f[11],Db[12]=f[12],Db[13]=f[13],Db[14]=
f[14],Db[15]=f[15],Db));f=a.loB;k.uniformMatrix4fv(Ha.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(pc[0]=f[0],pc[1]=f[1],pc[2]=f[2],pc[3]=f[3],pc[4]=f[4],pc[5]=f[5],pc[6]=f[6],pc[7]=f[7],pc[8]=f[8],pc[9]=f[9],pc[10]=f[10],pc[11]=f[11],pc[12]=f[12],pc[13]=f[13],pc[14]=f[14],pc[15]=f[15],pc));f=a.hiB;k.uniformMatrix4fv(ea.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ta[0]=f[0],Ta[1]=f[1],Ta[2]=f[2],Ta[3]=f[3],Ta[4]=f[4],Ta[5]=f[5],Ta[6]=f[6],Ta[7]=f[7],Ta[8]=f[8],Ta[9]=f[9],
Ta[10]=f[10],Ta[11]=f[11],Ta[12]=f[12],Ta[13]=f[13],Ta[14]=f[14],Ta[15]=f[15],Ta));f=a.loC;k.uniformMatrix4fv(S.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;k.uniformMatrix4fv(Ea.location,!1,Array.isArray(f)||f instanceof Float32Array?f:($b[0]=f[0],$b[1]=f[1],$b[2]=f[2],$b[3]=f[3],$b[4]=
f[4],$b[5]=f[5],$b[6]=f[6],$b[7]=f[7],$b[8]=f[8],$b[9]=f[9],$b[10]=f[10],$b[11]=f[11],$b[12]=f[12],$b[13]=f[13],$b[14]=f[14],$b[15]=f[15],$b));f=a.loD;k.uniformMatrix4fv(ob.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(rc[0]=f[0],rc[1]=f[1],rc[2]=f[2],rc[3]=f[3],rc[4]=f[4],rc[5]=f[5],rc[6]=f[6],rc[7]=f[7],rc[8]=f[8],rc[9]=f[9],rc[10]=f[10],rc[11]=f[11],rc[12]=f[12],rc[13]=f[13],rc[14]=f[14],rc[15]=f[15],rc));f=a.hiD;k.uniformMatrix4fv(Na.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Fd[0]=f[0],Fd[1]=f[1],Fd[2]=f[2],Fd[3]=f[3],Fd[4]=f[4],Fd[5]=f[5],Fd[6]=f[6],Fd[7]=f[7],Fd[8]=f[8],Fd[9]=f[9],Fd[10]=f[10],Fd[11]=f[11],Fd[12]=f[12],Fd[13]=f[13],Fd[14]=f[14],Fd[15]=f[15],Fd));f=a.resolution;k.uniform2f(R.location,f[0],f[1]);f=a.viewBoxPos;k.uniform2f(ha.location,f[0],f[1]);f=a.viewBoxSize;k.uniform2f(ra.location,f[0],f[1]);k.uniform1f(da.location,a.maskHeight);k.uniform1f(t.location,a.drwLayer);f=a.contextColor;k.uniform4f(X.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===
f._reglType&&(f=f.color[0]);f=f._texture;k.uniform1i(wa.location,f.bind());k.uniform1i(va.location,I.bind());(c=x.elements)?k.bindBuffer(34963,c.buffer.buffer):Bb.currentVAO&&(c=ja.getElements(Bb.currentVAO.elements))&&k.bindBuffer(34963,c.buffer.buffer);h=a.offset;if(a=a.count)c?k.drawElements(1,a,c.type,h<<(c.type-5121>>1)):k.drawArrays(1,h,a),ca.dirty=!0,Bb.setVAO(null),p.viewportWidth=e,p.viewportHeight=m,ca.profile=l,f.unbind(),I.unbind()},scope:function(c,k,q){var t,u,C,E,D,V,ga,N,K,J,ja,ia,
P,Q,S,R,ha,la,I,X,ka,ea,da,ma,va,ta,cc,ab,ra,Ta,Ca,ya,La,Wd,Bb,Db,Wa,za,Td,Da,$b,Gc,Lc,ed,Xb,Sa,sa,Eb,qc,rc,Fa,Rc,Pa,Ba,td,qd,wa,hb,db,pa,oc,pc,Ad,Sd,$c,Jc,Ic,Ac,Gb,Ga,Lb,nb,xb,rd,kd,le,nc,Sb,id,wc,md,ec,Ea,Bd,jf,Kb,Fb,ve,Ed,xd,kf,Fe,Fd,bc,af,$a,Qa,Qc,Zd,re,Na,ob,Dd,Ob,Fc,se,Ha,Zc,Hb,yd,zd,kc,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,jc,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,
wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,pg,cf,Ze,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh;jd.height=c.viewportHeight;jd.width=c.viewportWidth;jd.x=c.viewportX;jd.y=c.viewportY;t=jd.x|0;u=jd.y|0;C="width"in jd?jd.width|0:p.framebufferWidth-t;E="height"in jd?jd.height|0:p.framebufferHeight-
u;D=p.viewportWidth;p.viewportWidth=C;V=p.viewportHeight;p.viewportHeight=E;ga=Xd[0];Xd[0]=t;N=Xd[1];Xd[1]=u;K=Xd[2];Xd[2]=C;J=Xd[3];Xd[3]=E;ja=yb[0];yb[0]=0;ia=yb[1];yb[1]=0;P=yb[2];yb[2]=0;Q=yb[3];yb[3]=0;S=tc.blend_enable;tc.blend_enable=!1;R=ne[0];ne[0]=32774;ha=ne[1];ne[1]=32774;la=je[0];je[0]=770;I=je[1];je[1]=771;X=je[2];je[2]=1;ka=je[3];je[3]=1;ea=tc.cull_enable;tc.cull_enable=!0;da=tc.cull_face;tc.cull_face=1029;ma=tc.depth_enable;tc.depth_enable=!0;va=tc.depth_func;tc.depth_func=513;ta=
tc.depth_mask;tc.depth_mask=!0;cc=fe[0];fe[0]=0;ab=fe[1];fe[1]=1;ra=tc.dither;tc.dither=!1;Ta=tc.lineWidth;tc.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;Ca=vd.x|0;ya=vd.y|0;La="width"in vd?vd.width|0:p.framebufferWidth-Ca;Wd="height"in vd?vd.height|0:p.framebufferHeight-ya;Bb=Ve[0];Ve[0]=Ca;Db=Ve[1];Ve[1]=ya;Wa=Ve[2];Ve[2]=La;za=Ve[3];Ve[3]=Wd;Td=tc.scissor_enable;tc.scissor_enable=!0;Da=ca.profile;ca.profile=!1;$b=c.offset;Gc=x.offset;x.offset=$b;
Lc=c.count;ed=x.count;x.count=Lc;Xb=x.primitive;x.primitive=1;Sa=c.contextColor;sa=r[24];r[24]=Sa;Eb=c.dim0A;qc=r[3];r[3]=Eb;rc=c.dim0B;Fa=r[5];r[5]=rc;Rc=c.dim0C;Pa=r[7];r[7]=Rc;Ba=c.dim0D;td=r[9];r[9]=Ba;qd=c.dim1A;wa=r[4];r[4]=qd;hb=c.dim1B;db=r[6];r[6]=hb;pa=c.dim1C;oc=r[8];r[8]=pa;pc=c.dim1D;Ad=r[10];r[10]=pc;Sd=c.drwLayer;$c=r[23];r[23]=Sd;Jc=c.hiA;Ic=r[12];r[12]=Jc;Ac=c.hiB;Gb=r[14];r[14]=Ac;Ga=c.hiC;Lb=r[16];r[16]=Ga;nb=c.hiD;xb=r[18];r[18]=nb;rd=c.loA;kd=r[11];r[11]=rd;le=c.loB;nc=r[13];
r[13]=le;Sb=c.loC;id=r[15];r[15]=Sb;wc=c.loD;md=r[17];r[17]=wc;ec=c.maskHeight;Ea=r[22];r[22]=ec;Bd=c.maskTexture;jf=r[25];r[25]=Bd;Kb=r[26];r[26]=Z;Fb=c.resolution;ve=r[19];r[19]=Fb;Ed=c.viewBoxPos;xd=r[20];r[20]=Ed;kf=c.viewBoxSize;Fe=r[21];r[21]=kf;Fd=f.buffer;f.buffer=aa;bc=f.divisor;f.divisor=0;af=f.normalized;f.normalized=!1;$a=f.offset;f.offset=0;Qa=f.size;f.size=0;Qc=f.state;f.state=1;Zd=f.stride;f.stride=0;re=f.type;f.type=aa.dtype;Na=f.w;f.w=0;ob=f.x;f.x=0;Dd=f.y;f.y=0;Ob=f.z;f.z=0;Fc=h.buffer;
h.buffer=O;se=h.divisor;h.divisor=0;Ha=h.normalized;h.normalized=!1;Zc=h.offset;h.offset=0;Hb=h.size;h.size=0;yd=h.state;h.state=1;zd=h.stride;h.stride=0;kc=h.type;h.type=O.dtype;te=h.w;h.w=0;uf=h.x;h.x=0;ee=h.y;h.y=0;de=h.z;h.z=0;be=e.buffer;e.buffer=g;ue=e.divisor;e.divisor=0;$d=e.normalized;e.normalized=!1;he=e.offset;e.offset=0;zc=e.size;e.size=0;Uc=e.state;e.state=1;pe=e.stride;e.stride=0;ke=e.type;e.type=g.dtype;Hd=e.w;e.w=0;Md=e.x;e.x=0;Nd=e.y;e.y=0;Od=e.z;e.z=0;ie=z.buffer;z.buffer=d;jc=z.divisor;
z.divisor=0;ze=z.normalized;z.normalized=!1;me=z.offset;z.offset=0;Oe=z.size;z.size=0;Pe=z.state;z.state=1;Le=z.stride;z.stride=0;qe=z.type;z.type=d.dtype;De=z.w;z.w=0;Ge=z.x;z.x=0;He=z.y;z.y=0;Ie=z.z;z.z=0;Ee=T.buffer;T.buffer=y;Kd=T.divisor;T.divisor=0;Rd=T.normalized;T.normalized=!1;Yd=T.offset;T.offset=0;ae=T.size;T.size=0;Je=T.state;T.state=1;Cd=T.stride;T.stride=0;Pd=T.type;T.type=y.dtype;Ae=T.w;T.w=0;Ke=T.x;T.x=0;pf=T.y;T.y=0;Xe=T.z;T.z=0;Qe=U.buffer;U.buffer=b;Me=U.divisor;U.divisor=0;We=
U.normalized;U.normalized=!1;Ue=U.offset;U.offset=0;Re=U.size;U.size=0;Se=U.state;U.state=1;Qd=U.stride;U.stride=0;Vd=U.type;U.type=b.dtype;Te=U.w;U.w=0;ef=U.x;U.x=0;lf=U.y;U.y=0;bf=U.z;U.z=0;ff=m.buffer;m.buffer=v;gf=m.divisor;m.divisor=0;hf=m.normalized;m.normalized=!1;qf=m.offset;m.offset=0;mf=m.size;m.size=0;rf=m.state;m.state=1;Bf=m.stride;m.stride=0;Cf=m.type;m.type=v.dtype;Ne=m.w;m.w=0;Be=m.x;m.x=0;nf=m.y;m.y=0;of=m.z;m.z=0;Df=qa.buffer;qa.buffer=A;Gf=qa.divisor;qa.divisor=0;Af=qa.normalized;
qa.normalized=!1;Ef=qa.offset;qa.offset=0;Ff=qa.size;qa.size=0;wf=qa.state;qa.state=1;xf=qa.stride;qa.stride=0;vf=qa.type;qa.type=A.dtype;yf=qa.w;qa.w=0;zf=qa.x;qa.x=0;If=qa.y;qa.y=0;Jf=qa.z;qa.z=0;Kf=L.buffer;L.buffer=Y;Lf=L.divisor;L.divisor=0;sf=L.normalized;L.normalized=!1;Qf=L.offset;L.offset=0;Hf=L.size;L.size=0;tf=L.state;L.state=1;cg=L.stride;L.stride=0;Rf=L.type;L.type=Y.dtype;Sf=L.w;L.w=0;pg=L.x;L.x=0;cf=L.y;L.y=0;Ze=L.z;L.z=0;Mf=fa.buffer;fa.buffer=H;Nf=fa.divisor;fa.divisor=0;dg=fa.normalized;
fa.normalized=!1;eg=fa.offset;fa.offset=0;fg=fa.size;fa.size=0;gg=fa.state;fa.state=1;hg=fa.stride;fa.stride=0;Vf=fa.type;fa.type=H.dtype;Tf=fa.w;fa.w=0;Wf=fa.x;fa.x=0;Xf=fa.y;fa.y=0;Yf=fa.z;fa.z=0;ig=a.buffer;a.buffer=F;qg=a.divisor;a.divisor=0;rg=a.normalized;a.normalized=!1;sg=a.offset;a.offset=0;tg=a.size;a.size=0;ug=a.state;a.state=1;vg=a.stride;a.stride=0;wg=a.type;a.type=F.dtype;xg=a.w;a.w=0;yg=a.x;a.x=0;zg=a.y;a.y=0;Ag=a.z;a.z=0;df=l.buffer;l.buffer=w;$e=l.divisor;l.divisor=0;Of=l.normalized;
l.normalized=!1;Pf=l.offset;l.offset=0;jg=l.size;l.size=0;kg=l.state;l.state=1;lg=l.stride;l.stride=0;mg=l.type;l.type=w.dtype;ng=l.w;l.w=0;Zf=l.x;l.x=0;Uf=l.y;l.y=0;$f=l.z;l.z=0;ag=W.buffer;W.buffer=B;bg=W.divisor;W.divisor=0;og=W.normalized;W.normalized=!1;Bg=W.offset;W.offset=0;Cg=W.size;W.size=0;Dg=W.state;W.state=1;Eg=W.stride;W.stride=0;Fg=W.type;W.type=B.dtype;Gg=W.w;W.w=0;Hg=W.x;W.x=0;Ig=W.y;W.y=0;Jg=W.z;W.z=0;Kg=na.buffer;na.buffer=M;Lg=na.divisor;na.divisor=0;Mg=na.normalized;na.normalized=
!1;Ng=na.offset;na.offset=0;Og=na.size;na.size=0;Pg=na.state;na.state=1;Qg=na.stride;na.stride=0;Rg=na.type;na.type=M.dtype;Sg=na.w;na.w=0;Tg=na.x;na.x=0;Ug=na.y;na.y=0;Vg=na.z;na.z=0;Wg=Ka.buffer;Ka.buffer=n;Xg=Ka.divisor;Ka.divisor=0;Yg=Ka.normalized;Ka.normalized=!1;Zg=Ka.offset;Ka.offset=0;$g=Ka.size;Ka.size=0;ah=Ka.state;Ka.state=1;bh=Ka.stride;Ka.stride=0;ch=Ka.type;Ka.type=n.dtype;dh=Ka.w;Ka.w=0;eh=Ka.x;Ka.x=0;fh=Ka.y;Ka.y=0;gh=Ka.z;Ka.z=0;hh=cb.buffer;cb.buffer=G;ih=cb.divisor;cb.divisor=
0;jh=cb.normalized;cb.normalized=!1;kh=cb.offset;cb.offset=0;lh=cb.size;cb.size=0;mh=cb.state;cb.state=1;nh=cb.stride;cb.stride=0;oh=cb.type;cb.type=G.dtype;ph=cb.w;cb.w=0;qh=cb.x;cb.x=0;rh=cb.y;cb.y=0;sh=cb.z;cb.z=0;th=ba.vert;ba.vert=2;uh=ba.frag;ba.frag=1;ca.dirty=!0;k(p,c,q);p.viewportWidth=D;p.viewportHeight=V;Xd[0]=ga;Xd[1]=N;Xd[2]=K;Xd[3]=J;yb[0]=ja;yb[1]=ia;yb[2]=P;yb[3]=Q;tc.blend_enable=S;ne[0]=R;ne[1]=ha;je[0]=la;je[1]=I;je[2]=X;je[3]=ka;tc.cull_enable=ea;tc.cull_face=da;tc.depth_enable=
ma;tc.depth_func=va;tc.depth_mask=ta;fe[0]=cc;fe[1]=ab;tc.dither=ra;tc.lineWidth=Ta;Ve[0]=Bb;Ve[1]=Db;Ve[2]=Wa;Ve[3]=za;tc.scissor_enable=Td;ca.profile=Da;x.offset=Gc;x.count=ed;x.primitive=Xb;r[24]=sa;r[3]=qc;r[5]=Fa;r[7]=Pa;r[9]=td;r[4]=wa;r[6]=db;r[8]=oc;r[10]=Ad;r[23]=$c;r[12]=Ic;r[14]=Gb;r[16]=Lb;r[18]=xb;r[11]=kd;r[13]=nc;r[15]=id;r[17]=md;r[22]=Ea;r[25]=jf;r[26]=Kb;r[19]=ve;r[20]=xd;r[21]=Fe;f.buffer=Fd;f.divisor=bc;f.normalized=af;f.offset=$a;f.size=Qa;f.state=Qc;f.stride=Zd;f.type=re;f.w=
Na;f.x=ob;f.y=Dd;f.z=Ob;h.buffer=Fc;h.divisor=se;h.normalized=Ha;h.offset=Zc;h.size=Hb;h.state=yd;h.stride=zd;h.type=kc;h.w=te;h.x=uf;h.y=ee;h.z=de;e.buffer=be;e.divisor=ue;e.normalized=$d;e.offset=he;e.size=zc;e.state=Uc;e.stride=pe;e.type=ke;e.w=Hd;e.x=Md;e.y=Nd;e.z=Od;z.buffer=ie;z.divisor=jc;z.normalized=ze;z.offset=me;z.size=Oe;z.state=Pe;z.stride=Le;z.type=qe;z.w=De;z.x=Ge;z.y=He;z.z=Ie;T.buffer=Ee;T.divisor=Kd;T.normalized=Rd;T.offset=Yd;T.size=ae;T.state=Je;T.stride=Cd;T.type=Pd;T.w=Ae;T.x=
Ke;T.y=pf;T.z=Xe;U.buffer=Qe;U.divisor=Me;U.normalized=We;U.offset=Ue;U.size=Re;U.state=Se;U.stride=Qd;U.type=Vd;U.w=Te;U.x=ef;U.y=lf;U.z=bf;m.buffer=ff;m.divisor=gf;m.normalized=hf;m.offset=qf;m.size=mf;m.state=rf;m.stride=Bf;m.type=Cf;m.w=Ne;m.x=Be;m.y=nf;m.z=of;qa.buffer=Df;qa.divisor=Gf;qa.normalized=Af;qa.offset=Ef;qa.size=Ff;qa.state=wf;qa.stride=xf;qa.type=vf;qa.w=yf;qa.x=zf;qa.y=If;qa.z=Jf;L.buffer=Kf;L.divisor=Lf;L.normalized=sf;L.offset=Qf;L.size=Hf;L.state=tf;L.stride=cg;L.type=Rf;L.w=
Sf;L.x=pg;L.y=cf;L.z=Ze;fa.buffer=Mf;fa.divisor=Nf;fa.normalized=dg;fa.offset=eg;fa.size=fg;fa.state=gg;fa.stride=hg;fa.type=Vf;fa.w=Tf;fa.x=Wf;fa.y=Xf;fa.z=Yf;a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;l.buffer=df;l.divisor=$e;l.normalized=Of;l.offset=Pf;l.size=jg;l.state=kg;l.stride=lg;l.type=mg;l.w=ng;l.x=Zf;l.y=Uf;l.z=$f;W.buffer=ag;W.divisor=bg;W.normalized=og;W.offset=Bg;W.size=Cg;W.state=Dg;W.stride=Eg;W.type=
Fg;W.w=Gg;W.x=Hg;W.y=Ig;W.z=Jg;na.buffer=Kg;na.divisor=Lg;na.normalized=Mg;na.offset=Ng;na.size=Og;na.state=Pg;na.stride=Qg;na.type=Rg;na.w=Sg;na.x=Tg;na.y=Ug;na.z=Vg;Ka.buffer=Wg;Ka.divisor=Xg;Ka.normalized=Yg;Ka.offset=Zg;Ka.size=$g;Ka.state=ah;Ka.stride=bh;Ka.type=ch;Ka.w=dh;Ka.x=eh;Ka.y=fh;Ka.z=gh;cb.buffer=hh;cb.divisor=ih;cb.normalized=jh;cb.offset=kh;cb.size=lh;cb.state=mh;cb.stride=nh;cb.type=oh;cb.w=ph;cb.x=qh;cb.y=rh;cb.z=sh;ba.vert=th;ba.frag=uh;ca.dirty=!0}}},$1:function(c,ga){var q,O,
g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a;q=c.attributes;O=c.current;g=c.framebuffer;d=c.gl;y=c.next;b=c.vao;v=y.blend_color;A=O.blend_color;Y=y.blend_equation;H=O.blend_equation;F=y.blend_func;w=O.blend_func;B=y.colorMask;M=O.colorMask;n=y.depth_range;G=O.depth_range;aa=y.polygonOffset_offset;I=O.polygonOffset_offset;Z=y.sample_coverage;f=O.sample_coverage;h=y.scissor_box;e=O.scissor_box;z=y.stencil_func;T=O.stencil_func;U=y.stencil_opBack;m=O.stencil_opBack;qa=y.stencil_opFront;
L=O.stencil_opFront;fa=y.viewport;a=O.viewport;return{poll:function(){var b,c,q,ga,cb,kc,pa,Qa,X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na;O.dirty=!1;c=y.blend_enable;q=y.cull_enable;ga=y.depth_enable;cb=y.dither;kc=y.polygonOffset_enable;pa=y.sample_alpha;Qa=y.sample_enable;X=y.scissor_enable;K=y.stencil_enable;N=y.cull_face;P=O.cull_face;sa=y.depth_func;J=O.depth_func;Ob=y.depth_mask;$a=O.depth_mask;Q=y.frontFace;t=O.frontFace;ma=y.lineWidth;ea=O.lineWidth;Ea=y.stencil_mask;Na=O.stencil_mask;b=g.next;b!==
g.cur&&(b?d.bindFramebuffer(36160,b.framebuffer):d.bindFramebuffer(36160,null),g.cur=b);c!==O.blend_enable&&(c?d.enable(3042):d.disable(3042),O.blend_enable=c);q!==O.cull_enable&&(q?d.enable(2884):d.disable(2884),O.cull_enable=q);ga!==O.depth_enable&&(ga?d.enable(2929):d.disable(2929),O.depth_enable=ga);cb!==O.dither&&(cb?d.enable(3024):d.disable(3024),O.dither=cb);kc!==O.polygonOffset_enable&&(kc?d.enable(32823):d.disable(32823),O.polygonOffset_enable=kc);pa!==O.sample_alpha&&(pa?d.enable(32926):
d.disable(32926),O.sample_alpha=pa);Qa!==O.sample_enable&&(Qa?d.enable(32928):d.disable(32928),O.sample_enable=Qa);X!==O.scissor_enable&&(X?d.enable(3089):d.disable(3089),O.scissor_enable=X);K!==O.stencil_enable&&(K?d.enable(2960):d.disable(2960),O.stencil_enable=K);if(v[0]!==A[0]||v[1]!==A[1]||v[2]!==A[2]||v[3]!==A[3])d.blendColor(v[0],v[1],v[2],v[3]),A[0]=v[0],A[1]=v[1],A[2]=v[2],A[3]=v[3];if(Y[0]!==H[0]||Y[1]!==H[1])d.blendEquationSeparate(Y[0],Y[1]),H[0]=Y[0],H[1]=Y[1];if(F[0]!==w[0]||F[1]!==
w[1]||F[2]!==w[2]||F[3]!==w[3])d.blendFuncSeparate(F[0],F[1],F[2],F[3]),w[0]=F[0],w[1]=F[1],w[2]=F[2],w[3]=F[3];if(B[0]!==M[0]||B[1]!==M[1]||B[2]!==M[2]||B[3]!==M[3])d.colorMask(B[0],B[1],B[2],B[3]),M[0]=B[0],M[1]=B[1],M[2]=B[2],M[3]=B[3];N!==P&&(d.cullFace(N),O.cull_face=N);sa!==J&&(d.depthFunc(sa),O.depth_func=sa);Ob!==$a&&(d.depthMask(Ob),O.depth_mask=Ob);if(n[0]!==G[0]||n[1]!==G[1])d.depthRange(n[0],n[1]),G[0]=n[0],G[1]=n[1];Q!==t&&(d.frontFace(Q),O.frontFace=Q);ma!==ea&&(d.lineWidth(ma),O.lineWidth=
ma);if(aa[0]!==I[0]||aa[1]!==I[1])d.polygonOffset(aa[0],aa[1]),I[0]=aa[0],I[1]=aa[1];if(Z[0]!==f[0]||Z[1]!==f[1])d.sampleCoverage(Z[0],Z[1]),f[0]=Z[0],f[1]=Z[1];if(h[0]!==e[0]||h[1]!==e[1]||h[2]!==e[2]||h[3]!==e[3])d.scissor(h[0],h[1],h[2],h[3]),e[0]=h[0],e[1]=h[1],e[2]=h[2],e[3]=h[3];if(z[0]!==T[0]||z[1]!==T[1]||z[2]!==T[2])d.stencilFunc(z[0],z[1],z[2]),T[0]=z[0],T[1]=z[1],T[2]=z[2];Ea!==Na&&(d.stencilMask(Ea),O.stencil_mask=Ea);if(U[0]!==m[0]||U[1]!==m[1]||U[2]!==m[2]||U[3]!==m[3])d.stencilOpSeparate(U[0],
U[1],U[2],U[3]),m[0]=U[0],m[1]=U[1],m[2]=U[2],m[3]=U[3];if(qa[0]!==L[0]||qa[1]!==L[1]||qa[2]!==L[2]||qa[3]!==L[3])d.stencilOpSeparate(qa[0],qa[1],qa[2],qa[3]),L[0]=qa[0],L[1]=qa[1],L[2]=qa[2],L[3]=qa[3];if(fa[0]!==a[0]||fa[1]!==a[1]||fa[2]!==a[2]||fa[3]!==a[3])d.viewport(fa[0],fa[1],fa[2],fa[3]),a[0]=fa[0],a[1]=fa[1],a[2]=fa[2],a[3]=fa[3]},refresh:function(){var c,W,na,Ka,cb,kc,pa,Qa,X,K,N,P,sa,J,Ob,$a;O.dirty=!1;W=y.blend_enable;na=y.cull_enable;Ka=y.depth_enable;cb=y.dither;kc=y.polygonOffset_enable;
pa=y.sample_alpha;Qa=y.sample_enable;X=y.scissor_enable;K=y.stencil_enable;N=y.cull_face;P=y.depth_func;sa=y.depth_mask;J=y.frontFace;Ob=y.lineWidth;$a=y.stencil_mask;(c=g.next)?d.bindFramebuffer(36160,c.framebuffer):d.bindFramebuffer(36160,null);g.cur=c;c=q[0];c.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(0,
c.divisor);c=q[1];c.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(1,c.divisor);c=q[2];c.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,c.x,c.y,c.z,
c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(2,c.divisor);c=q[3];c.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(3,c.divisor);c=q[4];c.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(4),
d.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(4,c.divisor);c=q[5];c.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(5,c.divisor);c=q[6];c.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(6,c.size,c.type,c.normalized,
c.stride,c.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(6,c.divisor);c=q[7];c.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(7,c.divisor);c=q[8];c.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,c.buffer.buffer),
d.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(8,c.divisor);c=q[9];c.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(9,c.divisor);c=q[10];c.buffer?(d.enableVertexAttribArray(10),
d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(10,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(10,c.divisor);c=q[11];c.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(11,
c.divisor);c=q[12];c.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(12,c.divisor);c=q[13];c.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,
c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(13,c.divisor);c=q[14];c.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(14,c.divisor);c=q[15];c.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,
c.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);ga.vertexAttribDivisorANGLE(15,c.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);W?d.enable(3042):d.disable(3042);O.blend_enable=W;na?d.enable(2884):d.disable(2884);O.cull_enable=na;Ka?d.enable(2929):d.disable(2929);O.depth_enable=Ka;cb?d.enable(3024):d.disable(3024);O.dither=cb;kc?d.enable(32823):d.disable(32823);O.polygonOffset_enable=kc;pa?d.enable(32926):d.disable(32926);O.sample_alpha=pa;Qa?d.enable(32928):
d.disable(32928);O.sample_enable=Qa;X?d.enable(3089):d.disable(3089);O.scissor_enable=X;K?d.enable(2960):d.disable(2960);O.stencil_enable=K;d.blendColor(v[0],v[1],v[2],v[3]);A[0]=v[0];A[1]=v[1];A[2]=v[2];A[3]=v[3];d.blendEquationSeparate(Y[0],Y[1]);H[0]=Y[0];H[1]=Y[1];d.blendFuncSeparate(F[0],F[1],F[2],F[3]);w[0]=F[0];w[1]=F[1];w[2]=F[2];w[3]=F[3];d.colorMask(B[0],B[1],B[2],B[3]);M[0]=B[0];M[1]=B[1];M[2]=B[2];M[3]=B[3];d.cullFace(N);O.cull_face=N;d.depthFunc(P);O.depth_func=P;d.depthMask(sa);O.depth_mask=
sa;d.depthRange(n[0],n[1]);G[0]=n[0];G[1]=n[1];d.frontFace(J);O.frontFace=J;d.lineWidth(Ob);O.lineWidth=Ob;d.polygonOffset(aa[0],aa[1]);I[0]=aa[0];I[1]=aa[1];d.sampleCoverage(Z[0],Z[1]);f[0]=Z[0];f[1]=Z[1];d.scissor(h[0],h[1],h[2],h[3]);e[0]=h[0];e[1]=h[1];e[2]=h[2];e[3]=h[3];d.stencilFunc(z[0],z[1],z[2]);T[0]=z[0];T[1]=z[1];T[2]=z[2];d.stencilMask($a);O.stencil_mask=$a;d.stencilOpSeparate(U[0],U[1],U[2],U[3]);m[0]=U[0];m[1]=U[1];m[2]=U[2];m[3]=U[3];d.stencilOpSeparate(qa[0],qa[1],qa[2],qa[3]);L[0]=
qa[0];L[1]=qa[1];L[2]=qa[2];L[3]=qa[3];d.viewport(fa[0],fa[1],fa[2],fa[3]);a[0]=fa[0];a[1]=fa[1];a[2]=fa[2];a[3]=fa[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(c,ga,q,O,g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb,kc,pa,Qa,X,K,N,P,sa,J,Ob,$a){var Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa,bc,cc,Qc,td,wc,V,C,la,Ca,Lb,nc,Zc,D,u,ka,va,R,ha,ra,E,p,ca,x,ja,ia,k,tc,ba,
r,Bb,yb;Q=c.attributes;t=c.buffer;ma=c.context;ea=c.current;Ea=c.draw;Na=c.elements;Hb=c.extensions;Ha=c.framebuffer;S=c.gl;ob=c.isBufferArgs;da=c.next;wa=c.shader;bc=c.uniforms;cc=c.vao;Qc=da.blend_color;td=ea.blend_color;wc=da.blend_equation;V=ea.blend_equation;C=da.blend_func;la=ea.blend_func;Ca=da.colorMask;Lb=ea.colorMask;nc=da.depth_range;Zc=ea.depth_range;D=da.polygonOffset_offset;u=ea.polygonOffset_offset;ka=da.sample_coverage;va=ea.sample_coverage;R=da.scissor_box;ha=ea.scissor_box;ra=da.stencil_func;
E=ea.stencil_func;p=da.stencil_opBack;ca=ea.stencil_opBack;x=da.stencil_opFront;ja=ea.stencil_opFront;ia=da.viewport;k=ea.viewport;tc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ba={};ba.buffer=q;ba.divisor=1;r={};r.buffer=O;r.divisor=1;Bb={};Bb.buffer=g;Bb.divisor=1;yb={};yb.buffer=d;yb.divisor=1;return{batch:function(b,e){var d,c,f,g,h,n;d=Ha.next;d!==Ha.cur&&(d?S.bindFramebuffer(36160,d.framebuffer):S.bindFramebuffer(36160,null),Ha.cur=d);if(ea.dirty){var q,
v,C,z,y,B,O,G,ia,A,M,R,I,T,U,Y,aa,wa,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,wc;q=da.dither;q!==ea.dither&&(q?S.enable(3024):S.disable(3024),ea.dither=q);v=da.depth_func;v!==ea.depth_func&&(S.depthFunc(v),ea.depth_func=v);C=nc[0];z=nc[1];if(C!==Zc[0]||z!==Zc[1])S.depthRange(C,z),Zc[0]=C,Zc[1]=z;y=da.depth_mask;y!==ea.depth_mask&&(S.depthMask(y),ea.depth_mask=y);B=Ca[0];O=Ca[1];G=Ca[2];ia=Ca[3];if(B!==Lb[0]||O!==Lb[1]||G!==Lb[2]||ia!==Lb[3])S.colorMask(B,O,G,ia),Lb[0]=B,Lb[1]=O,Lb[2]=G,Lb[3]=ia;
A=da.cull_enable;A!==ea.cull_enable&&(A?S.enable(2884):S.disable(2884),ea.cull_enable=A);M=da.cull_face;M!==ea.cull_face&&(S.cullFace(M),ea.cull_face=M);R=da.frontFace;R!==ea.frontFace&&(S.frontFace(R),ea.frontFace=R);I=da.lineWidth;I!==ea.lineWidth&&(S.lineWidth(I),ea.lineWidth=I);T=da.polygonOffset_enable;T!==ea.polygonOffset_enable&&(T?S.enable(32823):S.disable(32823),ea.polygonOffset_enable=T);U=D[0];Y=D[1];if(U!==u[0]||Y!==u[1])S.polygonOffset(U,Y),u[0]=U,u[1]=Y;aa=da.sample_alpha;aa!==ea.sample_alpha&&
(aa?S.enable(32926):S.disable(32926),ea.sample_alpha=aa);wa=da.sample_enable;wa!==ea.sample_enable&&(wa?S.enable(32928):S.disable(32928),ea.sample_enable=wa);kd=ka[0];oc=ka[1];if(kd!==va[0]||oc!==va[1])S.sampleCoverage(kd,oc),va[0]=kd,va[1]=oc;id=da.stencil_enable;id!==ea.stencil_enable&&(id?S.enable(2960):S.disable(2960),ea.stencil_enable=id);ed=da.stencil_mask;ed!==ea.stencil_mask&&(S.stencilMask(ed),ea.stencil_mask=ed);Lc=ra[0];qc=ra[1];ab=ra[2];if(Lc!==E[0]||qc!==E[1]||ab!==E[2])S.stencilFunc(Lc,
qc,ab),E[0]=Lc,E[1]=qc,E[2]=ab;Ic=x[0];Db=x[1];pc=x[2];Ta=x[3];if(Ic!==ja[0]||Db!==ja[1]||pc!==ja[2]||Ta!==ja[3])S.stencilOpSeparate(Ic,Db,pc,Ta),ja[0]=Ic,ja[1]=Db,ja[2]=pc,ja[3]=Ta;Jc=p[0];$b=p[1];rc=p[2];wc=p[3];if(Jc!==ca[0]||$b!==ca[1]||rc!==ca[2]||wc!==ca[3])S.stencilOpSeparate(Jc,$b,rc,wc),ca[0]=Jc,ca[1]=$b,ca[2]=rc,ca[3]=wc}S.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;S.enable(3042);ea.blend_enable=!0;S.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;S.blendFuncSeparate(770,
771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;S.disable(2929);ea.depth_enable=!1;S.enable(3089);ea.scissor_enable=!0;if(c=ea.profile)f=performance.now(),ga.count+=e;S.useProgram(m.program);g=Hb.angle_instanced_arrays;var oa,Ac,Xb,Gc,Rc,La,Eb,Wa;cc.setVAO(null);oa=cb.location;Ac=Q[oa];Ac.buffer||S.enableVertexAttribArray(oa);if(5126!==Ac.type||2!==Ac.size||Ac.buffer!==H||!1!==Ac.normalized||0!==Ac.offset||24!==Ac.stride)S.bindBuffer(34962,H.buffer),S.vertexAttribPointer(oa,2,5126,!1,24,0),Ac.type=
5126,Ac.size=2,Ac.buffer=H,Ac.normalized=!1,Ac.offset=0,Ac.stride=24;0!==Ac.divisor&&(g.vertexAttribDivisorANGLE(oa,0),Ac.divisor=0);Xb=pa.location;Gc=Q[Xb];Gc.buffer||S.enableVertexAttribArray(Xb);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==F||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)S.bindBuffer(34962,F.buffer),S.vertexAttribPointer(Xb,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=F,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(g.vertexAttribDivisorANGLE(Xb,0),Gc.divisor=
0);Rc=W.location;La=Q[Rc];La.buffer||S.enableVertexAttribArray(Rc);if(5126!==La.type||2!==La.size||La.buffer!==w||!1!==La.normalized||16!==La.offset||24!==La.stride)S.bindBuffer(34962,w.buffer),S.vertexAttribPointer(Rc,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=w,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(g.vertexAttribDivisorANGLE(Rc,0),La.divisor=0);(Eb=Ea.elements)?S.bindBuffer(34963,Eb.buffer.buffer):cc.currentVAO&&(Eb=Na.getElements(cc.currentVAO.elements))&&S.bindBuffer(34963,
Eb.buffer.buffer);Wa=Ea.offset;for(h=0;h<e;++h){n=b[h];var ta,md,hb,Sa,Gb,db,ec,Sb,Z,Zb,Tb,bc,Ub,Ma,pb,ub,ib,Oa,Qc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Id,Ld,we,xe,Ud,Jd,Gd,bd,Fc;ta=n.viewport;md=ta.x|0;hb=ta.y|0;Sa="width"in ta?ta.width|0:ma.framebufferWidth-md;Gb="height"in
ta?ta.height|0:ma.framebufferHeight-hb;db=ma.viewportWidth;ma.viewportWidth=Sa;ec=ma.viewportHeight;ma.viewportHeight=Gb;S.viewport(md,hb,Sa,Gb);k[0]=md;k[1]=hb;k[2]=Sa;k[3]=Gb;Sb=n.viewport;Z=Sb.x|0;Zb=Sb.y|0;Tb="width"in Sb?Sb.width|0:ma.framebufferWidth-Z;bc="height"in Sb?Sb.height|0:ma.framebufferHeight-Zb;S.scissor(Z,Zb,Tb,bc);ha[0]=Z;ha[1]=Zb;ha[2]=Tb;ha[3]=bc;Ub=qa.call(this,ma,n,h);Bb.offset=Ub;Ma=!1;pb=null;ub=0;ib=!1;Qc=Oa=0;Ib=1;cd=0;eb=5126;kb=dc=dd=lc=0;ob(Bb)?(Ma=!0,pb=t.createStream(34962,
Bb),eb=pb.dtype):(pb=t.getBuffer(Bb))?eb=pb.dtype:"constant"in Bb?(Ib=2,"number"===typeof Bb.constant?(dd=Bb.constant,dc=kb=lc=0):(dd=0<Bb.constant.length?Bb.constant[0]:0,dc=1<Bb.constant.length?Bb.constant[1]:0,kb=2<Bb.constant.length?Bb.constant[2]:0,lc=3<Bb.constant.length?Bb.constant[3]:0)):(pb=ob(Bb.buffer)?t.createStream(34962,Bb.buffer):t.getBuffer(Bb.buffer),eb="type"in Bb?tc[Bb.type]:pb.dtype,ib=!!Bb.normalized,Qc=Bb.size|0,Oa=Bb.offset|0,cd=Bb.stride|0,ub=Bb.divisor|0);lb=K.location;ua=
Q[lb];if(1===Ib){ua.buffer||S.enableVertexAttribArray(lb);qb=Qc||2;if(ua.type!==eb||ua.size!==qb||ua.buffer!==pb||ua.normalized!==ib||ua.offset!==Oa||ua.stride!==cd)S.bindBuffer(34962,pb.buffer),S.vertexAttribPointer(lb,qb,eb,ib,cd,Oa),ua.type=eb,ua.size=qb,ua.buffer=pb,ua.normalized=ib,ua.offset=Oa,ua.stride=cd;ua.divisor!==ub&&(g.vertexAttribDivisorANGLE(lb,ub),ua.divisor=ub)}else if(ua.buffer&&(S.disableVertexAttribArray(lb),ua.buffer=null),ua.x!==dd||ua.y!==dc||ua.z!==kb||ua.w!==lc)S.vertexAttrib4f(lb,
dd,dc,kb,lc),ua.x=dd,ua.y=dc,ua.z=kb,ua.w=lc;xa=L.call(this,ma,n,h);yb.offset=xa;Ua=!1;bb=null;Aa=0;fb=!1;Ab=Ia=0;zb=1;Ra=0;Kc=5126;ya=Vb=Za=Jb=0;ob(yb)?(Ua=!0,bb=t.createStream(34962,yb),Kc=bb.dtype):(bb=t.getBuffer(yb))?Kc=bb.dtype:"constant"in yb?(zb=2,"number"===typeof yb.constant?(Za=yb.constant,Vb=ya=Jb=0):(Za=0<yb.constant.length?yb.constant[0]:0,Vb=1<yb.constant.length?yb.constant[1]:0,ya=2<yb.constant.length?yb.constant[2]:0,Jb=3<yb.constant.length?yb.constant[3]:0)):(bb=ob(yb.buffer)?t.createStream(34962,
yb.buffer):t.getBuffer(yb.buffer),Kc="type"in yb?tc[yb.type]:bb.dtype,fb=!!yb.normalized,Ab=yb.size|0,Ia=yb.offset|0,Ra=yb.stride|0,Aa=yb.divisor|0);ce=N.location;Ja=Q[ce];if(1===zb){Ja.buffer||S.enableVertexAttribArray(ce);Pb=Ab||2;if(Ja.type!==Kc||Ja.size!==Pb||Ja.buffer!==bb||Ja.normalized!==fb||Ja.offset!==Ia||Ja.stride!==Ra)S.bindBuffer(34962,bb.buffer),S.vertexAttribPointer(ce,Pb,Kc,fb,Ra,Ia),Ja.type=Kc,Ja.size=Pb,Ja.buffer=bb,Ja.normalized=fb,Ja.offset=Ia,Ja.stride=Ra;Ja.divisor!==Aa&&(g.vertexAttribDivisorANGLE(ce,
Aa),Ja.divisor=Aa)}else if(Ja.buffer&&(S.disableVertexAttribArray(ce),Ja.buffer=null),Ja.x!==Za||Ja.y!==Vb||Ja.z!==ya||Ja.w!==Jb)S.vertexAttrib4f(ce,Za,Vb,ya,Jb),Ja.x=Za,Ja.y=Vb,Ja.z=ya,Ja.w=Jb;gb=fa.call(this,ma,n,h);r.offset=gb;jb=!1;za=null;fc=0;Da=!1;sb=rb=0;Xa=1;Ya=0;mc=5126;Mb=Va=uc=xc=0;ob(r)?(jb=!0,za=t.createStream(34962,r),mc=za.dtype):(za=t.getBuffer(r))?mc=za.dtype:"constant"in r?(Xa=2,"number"===typeof r.constant?(uc=r.constant,Va=Mb=xc=0):(uc=0<r.constant.length?r.constant[0]:0,Va=1<
r.constant.length?r.constant[1]:0,Mb=2<r.constant.length?r.constant[2]:0,xc=3<r.constant.length?r.constant[3]:0)):(za=ob(r.buffer)?t.createStream(34962,r.buffer):t.getBuffer(r.buffer),mc="type"in r?tc[r.type]:za.dtype,Da=!!r.normalized,sb=r.size|0,rb=r.offset|0,Ya=r.stride|0,fc=r.divisor|0);Xc=kc.location;Fa=Q[Xc];if(1===Xa){Fa.buffer||S.enableVertexAttribArray(Xc);yc=sb||4;if(Fa.type!==mc||Fa.size!==yc||Fa.buffer!==za||Fa.normalized!==Da||Fa.offset!==rb||Fa.stride!==Ya)S.bindBuffer(34962,za.buffer),
S.vertexAttribPointer(Xc,yc,mc,Da,Ya,rb),Fa.type=mc,Fa.size=yc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=rb,Fa.stride=Ya;Fa.divisor!==fc&&(g.vertexAttribDivisorANGLE(Xc,fc),Fa.divisor=fc)}else if(Fa.buffer&&(S.disableVertexAttribArray(Xc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Mb||Fa.w!==xc)S.vertexAttrib4f(Xc,uc,Va,Mb,xc),Fa.x=uc,Fa.y=Va,Fa.z=Mb,Fa.w=xc;Pa=a.call(this,ma,n,h);ba.offset=Pa;Ba=!1;mb=null;vb=0;Cb=!1;vc=tb=0;wb=1;wd=0;sc=5126;sd=ld=Mc=ud=0;ob(ba)?(Ba=!0,mb=t.createStream(34962,ba),
sc=mb.dtype):(mb=t.getBuffer(ba))?sc=mb.dtype:"constant"in ba?(wb=2,"number"===typeof ba.constant?(Mc=ba.constant,ld=sd=ud=0):(Mc=0<ba.constant.length?ba.constant[0]:0,ld=1<ba.constant.length?ba.constant[1]:0,sd=2<ba.constant.length?ba.constant[2]:0,ud=3<ba.constant.length?ba.constant[3]:0)):(mb=ob(ba.buffer)?t.createStream(34962,ba.buffer):t.getBuffer(ba.buffer),sc="type"in ba?tc[ba.type]:mb.dtype,Cb=!!ba.normalized,vc=ba.size|0,tb=ba.offset|0,wd=ba.stride|0,vb=ba.divisor|0);Wb=Ka.location;ac=Q[Wb];
if(1===wb){ac.buffer||S.enableVertexAttribArray(Wb);Qb=vc||4;if(ac.type!==sc||ac.size!==Qb||ac.buffer!==mb||ac.normalized!==Cb||ac.offset!==tb||ac.stride!==wd)S.bindBuffer(34962,mb.buffer),S.vertexAttribPointer(Wb,Qb,sc,Cb,wd,tb),ac.type=sc,ac.size=Qb,ac.buffer=mb,ac.normalized=Cb,ac.offset=tb,ac.stride=wd;ac.divisor!==vb&&(g.vertexAttribDivisorANGLE(Wb,vb),ac.divisor=vb)}else if(ac.buffer&&(S.disableVertexAttribArray(Wb),ac.buffer=null),ac.x!==Mc||ac.y!==ld||ac.z!==sd||ac.w!==ud)S.vertexAttrib4f(Wb,
Mc,ld,sd,ud),ac.x=Mc,ac.y=ld,ac.z=sd,ac.w=ud;Ga=l.call(this,ma,n,h);Yb=Ga[0];xb=Ga[1];Rb=Ga[2];ic=Ga[3];h&&nb===Yb&&Nb===xb&&gc===Rb&&Ye===ic||(nb=Yb,Nb=xb,gc=Rb,Ye=ic,S.uniform4f($a.location,Yb,xb,Rb,ic));Bc=n.lineWidth;h&&Cc===Bc||(Cc=Bc,S.uniform1f(Qa.location,Bc));Ec=n.capSize;h&&Nc===Ec||(Nc=Ec,S.uniform1f(na.location,Ec));Yc=n.scale;Sc=Yc[0];Kb=Yc[1];h&&Oc===Sc&&Fb===Kb||(Oc=Sc,Fb=Kb,S.uniform2f(P.location,Sc,Kb));Pc=n.scaleFract;Hc=Pc[0];hc=Pc[1];h&&Tc===Hc&&Vc===hc||(Tc=Hc,Vc=hc,S.uniform2f(sa.location,
Hc,hc));nd=n.translate;gd=nd[0];Wc=nd[1];h&&oe===gd&&Id===Wc||(oe=gd,Id=Wc,S.uniform2f(J.location,gd,Wc));Ld=n.translateFract;we=Ld[0];Ud=Ld[1];h&&xe===we&&Jd===Ud||(xe=we,Jd=Ud,S.uniform2f(Ob.location,we,Ud));Gd=n.opacity;h&&bd===Gd||(bd=Gd,S.uniform1f(X.location,Gd));Fc=n.count;0<Fc?Eb?g.drawElementsInstancedANGLE(4,36,Eb.type,Wa<<(Eb.type-5121>>1),Fc):g.drawArraysInstancedANGLE(4,Wa,36,Fc):0>Fc&&(Eb?S.drawElements(4,36,Eb.type,Wa<<(Eb.type-5121>>1)):S.drawArrays(4,Wa,36));ma.viewportWidth=db;ma.viewportHeight=
ec;Ma&&t.destroyStream(pb);Ua&&t.destroyStream(bb);jb&&t.destroyStream(za);Ba&&t.destroyStream(mb)}ea.dirty=!0;cc.setVAO(null);c&&(ga.cpuTime+=performance.now()-f)},draw:function(a){var e,d,c,f,g,h,l,m,n,q,C,z,O,G,L,ia,M,R,I,T,U,aa,fa,qa,wa,wc,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Z,bc,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,Qc,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc;e=Ha.next;e!==Ha.cur&&(e?S.bindFramebuffer(36160,
e.framebuffer):S.bindFramebuffer(36160,null),Ha.cur=e);if(ea.dirty){var Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb;Da=da.dither;Da!==ea.dither&&(Da?S.enable(3024):S.disable(3024),ea.dither=Da);rb=da.depth_func;rb!==ea.depth_func&&(S.depthFunc(rb),ea.depth_func=rb);sb=nc[0];Xa=nc[1];if(sb!==Zc[0]||Xa!==Zc[1])S.depthRange(sb,Xa),Zc[0]=sb,Zc[1]=Xa;Ya=da.depth_mask;Ya!==ea.depth_mask&&(S.depthMask(Ya),ea.depth_mask=Ya);mc=Ca[0];xc=Ca[1];uc=Ca[2];
Va=Ca[3];if(mc!==Lb[0]||xc!==Lb[1]||uc!==Lb[2]||Va!==Lb[3])S.colorMask(mc,xc,uc,Va),Lb[0]=mc,Lb[1]=xc,Lb[2]=uc,Lb[3]=Va;Mb=da.cull_enable;Mb!==ea.cull_enable&&(Mb?S.enable(2884):S.disable(2884),ea.cull_enable=Mb);Xc=da.cull_face;Xc!==ea.cull_face&&(S.cullFace(Xc),ea.cull_face=Xc);Fa=da.frontFace;Fa!==ea.frontFace&&(S.frontFace(Fa),ea.frontFace=Fa);yc=da.lineWidth;yc!==ea.lineWidth&&(S.lineWidth(yc),ea.lineWidth=yc);Pa=da.polygonOffset_enable;Pa!==ea.polygonOffset_enable&&(Pa?S.enable(32823):S.disable(32823),
ea.polygonOffset_enable=Pa);Ba=D[0];mb=D[1];if(Ba!==u[0]||mb!==u[1])S.polygonOffset(Ba,mb),u[0]=Ba,u[1]=mb;vb=da.sample_alpha;vb!==ea.sample_alpha&&(vb?S.enable(32926):S.disable(32926),ea.sample_alpha=vb);Cb=da.sample_enable;Cb!==ea.sample_enable&&(Cb?S.enable(32928):S.disable(32928),ea.sample_enable=Cb);tb=ka[0];vc=ka[1];if(tb!==va[0]||vc!==va[1])S.sampleCoverage(tb,vc),va[0]=tb,va[1]=vc;wb=da.stencil_enable;wb!==ea.stencil_enable&&(wb?S.enable(2960):S.disable(2960),ea.stencil_enable=wb);wd=da.stencil_mask;
wd!==ea.stencil_mask&&(S.stencilMask(wd),ea.stencil_mask=wd);sc=ra[0];ud=ra[1];Mc=ra[2];if(sc!==E[0]||ud!==E[1]||Mc!==E[2])S.stencilFunc(sc,ud,Mc),E[0]=sc,E[1]=ud,E[2]=Mc;ld=x[0];sd=x[1];Wb=x[2];ac=x[3];if(ld!==ja[0]||sd!==ja[1]||Wb!==ja[2]||ac!==ja[3])S.stencilOpSeparate(ld,sd,Wb,ac),ja[0]=ld,ja[1]=sd,ja[2]=Wb,ja[3]=ac;Qb=p[0];Ga=p[1];Yb=p[2];nb=p[3];if(Qb!==ca[0]||Ga!==ca[1]||Yb!==ca[2]||nb!==ca[3])S.stencilOpSeparate(Qb,Ga,Yb,nb),ca[0]=Qb,ca[1]=Ga,ca[2]=Yb,ca[3]=nb}d=a.viewport;c=d.x|0;f=d.y|0;
g="width"in d?d.width|0:ma.framebufferWidth-c;h="height"in d?d.height|0:ma.framebufferHeight-f;l=ma.viewportWidth;ma.viewportWidth=g;m=ma.viewportHeight;ma.viewportHeight=h;S.viewport(c,f,g,h);k[0]=c;k[1]=f;k[2]=g;k[3]=h;S.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;S.enable(3042);ea.blend_enable=!0;S.blendEquationSeparate(32774,32774);V[0]=32774;V[1]=32774;S.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;S.disable(2929);ea.depth_enable=!1;n=a.viewport;q=n.x|0;C=n.y|
0;z="width"in n?n.width|0:ma.framebufferWidth-q;O="height"in n?n.height|0:ma.framebufferHeight-C;S.scissor(q,C,z,O);ha[0]=q;ha[1]=C;ha[2]=z;ha[3]=O;S.enable(3089);ea.scissor_enable=!0;if(G=ea.profile)L=performance.now(),ga.count++;S.useProgram(y.program);ia=Hb.angle_instanced_arrays;cc.setVAO(null);M=b.call(this,ma,a,0);Bb.offset=M;R=!1;I=null;T=0;U=!1;fa=aa=0;qa=1;wa=0;wc=5126;Lc=ed=id=oc=0;ob(Bb)?(R=!0,I=t.createStream(34962,Bb),wc=I.dtype):(I=t.getBuffer(Bb))?wc=I.dtype:"constant"in Bb?(qa=2,"number"===
typeof Bb.constant?(id=Bb.constant,ed=Lc=oc=0):(id=0<Bb.constant.length?Bb.constant[0]:0,ed=1<Bb.constant.length?Bb.constant[1]:0,Lc=2<Bb.constant.length?Bb.constant[2]:0,oc=3<Bb.constant.length?Bb.constant[3]:0)):(I=ob(Bb.buffer)?t.createStream(34962,Bb.buffer):t.getBuffer(Bb.buffer),wc="type"in Bb?tc[Bb.type]:I.dtype,U=!!Bb.normalized,fa=Bb.size|0,aa=Bb.offset|0,wa=Bb.stride|0,T=Bb.divisor|0);qc=K.location;ab=Q[qc];if(1===qa){ab.buffer||S.enableVertexAttribArray(qc);Ic=fa||2;if(ab.type!==wc||ab.size!==
Ic||ab.buffer!==I||ab.normalized!==U||ab.offset!==aa||ab.stride!==wa)S.bindBuffer(34962,I.buffer),S.vertexAttribPointer(qc,Ic,wc,U,wa,aa),ab.type=wc,ab.size=Ic,ab.buffer=I,ab.normalized=U,ab.offset=aa,ab.stride=wa;ab.divisor!==T&&(ia.vertexAttribDivisorANGLE(qc,T),ab.divisor=T)}else if(ab.buffer&&(S.disableVertexAttribArray(qc),ab.buffer=null),ab.x!==id||ab.y!==ed||ab.z!==Lc||ab.w!==oc)S.vertexAttrib4f(qc,id,ed,Lc,oc),ab.x=id,ab.y=ed,ab.z=Lc,ab.w=oc;Db=v.call(this,ma,a,0);yb.offset=Db;pc=!1;Ta=null;
Jc=0;$b=!1;Z=rc=0;bc=1;Ac=0;Xb=5126;Eb=La=Rc=Gc=0;ob(yb)?(pc=!0,Ta=t.createStream(34962,yb),Xb=Ta.dtype):(Ta=t.getBuffer(yb))?Xb=Ta.dtype:"constant"in yb?(bc=2,"number"===typeof yb.constant?(Rc=yb.constant,La=Eb=Gc=0):(Rc=0<yb.constant.length?yb.constant[0]:0,La=1<yb.constant.length?yb.constant[1]:0,Eb=2<yb.constant.length?yb.constant[2]:0,Gc=3<yb.constant.length?yb.constant[3]:0)):(Ta=ob(yb.buffer)?t.createStream(34962,yb.buffer):t.getBuffer(yb.buffer),Xb="type"in yb?tc[yb.type]:Ta.dtype,$b=!!yb.normalized,
Z=yb.size|0,rc=yb.offset|0,Ac=yb.stride|0,Jc=yb.divisor|0);Wa=N.location;ta=Q[Wa];if(1===bc){ta.buffer||S.enableVertexAttribArray(Wa);md=Z||2;if(ta.type!==Xb||ta.size!==md||ta.buffer!==Ta||ta.normalized!==$b||ta.offset!==rc||ta.stride!==Ac)S.bindBuffer(34962,Ta.buffer),S.vertexAttribPointer(Wa,md,Xb,$b,Ac,rc),ta.type=Xb,ta.size=md,ta.buffer=Ta,ta.normalized=$b,ta.offset=rc,ta.stride=Ac;ta.divisor!==Jc&&(ia.vertexAttribDivisorANGLE(Wa,Jc),ta.divisor=Jc)}else if(ta.buffer&&(S.disableVertexAttribArray(Wa),
ta.buffer=null),ta.x!==Rc||ta.y!==La||ta.z!==Eb||ta.w!==Gc)S.vertexAttrib4f(Wa,Rc,La,Eb,Gc),ta.x=Rc,ta.y=La,ta.z=Eb,ta.w=Gc;hb=A.call(this,ma,a,0);r.offset=hb;Sa=!1;Gb=null;db=0;ec=!1;Qc=Sb=0;Zb=1;Tb=0;fd=5126;ub=pb=Ma=Ub=0;ob(r)?(Sa=!0,Gb=t.createStream(34962,r),fd=Gb.dtype):(Gb=t.getBuffer(r))?fd=Gb.dtype:"constant"in r?(Zb=2,"number"===typeof r.constant?(Ma=r.constant,pb=ub=Ub=0):(Ma=0<r.constant.length?r.constant[0]:0,pb=1<r.constant.length?r.constant[1]:0,ub=2<r.constant.length?r.constant[2]:
0,Ub=3<r.constant.length?r.constant[3]:0)):(Gb=ob(r.buffer)?t.createStream(34962,r.buffer):t.getBuffer(r.buffer),fd="type"in r?tc[r.type]:Gb.dtype,ec=!!r.normalized,Qc=r.size|0,Sb=r.offset|0,Tb=r.stride|0,db=r.divisor|0);ib=kc.location;Oa=Q[ib];if(1===Zb){Oa.buffer||S.enableVertexAttribArray(ib);Dc=Qc||4;if(Oa.type!==fd||Oa.size!==Dc||Oa.buffer!==Gb||Oa.normalized!==ec||Oa.offset!==Sb||Oa.stride!==Tb)S.bindBuffer(34962,Gb.buffer),S.vertexAttribPointer(ib,Dc,fd,ec,Tb,Sb),Oa.type=fd,Oa.size=Dc,Oa.buffer=
Gb,Oa.normalized=ec,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==db&&(ia.vertexAttribDivisorANGLE(ib,db),Oa.divisor=db)}else if(Oa.buffer&&(S.disableVertexAttribArray(ib),Oa.buffer=null),Oa.x!==Ma||Oa.y!==pb||Oa.z!==ub||Oa.w!==Ub)S.vertexAttrib4f(ib,Ma,pb,ub,Ub),Oa.x=Ma,Oa.y=pb,Oa.z=ub,Oa.w=Ub;Ib=Y.call(this,ma,a,0);ba.offset=Ib;cd=!1;eb=null;lc=0;dd=!1;kb=dc=0;lb=1;ua=0;qb=5126;Aa=bb=Ua=xa=0;ob(ba)?(cd=!0,eb=t.createStream(34962,ba),qb=eb.dtype):(eb=t.getBuffer(ba))?qb=eb.dtype:"constant"in ba?(lb=2,"number"===
typeof ba.constant?(Ua=ba.constant,bb=Aa=xa=0):(Ua=0<ba.constant.length?ba.constant[0]:0,bb=1<ba.constant.length?ba.constant[1]:0,Aa=2<ba.constant.length?ba.constant[2]:0,xa=3<ba.constant.length?ba.constant[3]:0)):(eb=ob(ba.buffer)?t.createStream(34962,ba.buffer):t.getBuffer(ba.buffer),qb="type"in ba?tc[ba.type]:eb.dtype,dd=!!ba.normalized,kb=ba.size|0,dc=ba.offset|0,ua=ba.stride|0,lc=ba.divisor|0);fb=Ka.location;Ia=Q[fb];if(1===lb){Ia.buffer||S.enableVertexAttribArray(fb);Ab=kb||4;if(Ia.type!==qb||
Ia.size!==Ab||Ia.buffer!==eb||Ia.normalized!==dd||Ia.offset!==dc||Ia.stride!==ua)S.bindBuffer(34962,eb.buffer),S.vertexAttribPointer(fb,Ab,qb,dd,ua,dc),Ia.type=qb,Ia.size=Ab,Ia.buffer=eb,Ia.normalized=dd,Ia.offset=dc,Ia.stride=ua;Ia.divisor!==lc&&(ia.vertexAttribDivisorANGLE(fb,lc),Ia.divisor=lc)}else if(Ia.buffer&&(S.disableVertexAttribArray(fb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==bb||Ia.z!==Aa||Ia.w!==xa)S.vertexAttrib4f(fb,Ua,bb,Aa,xa),Ia.x=Ua,Ia.y=bb,Ia.z=Aa,Ia.w=xa;zb=cb.location;Ra=Q[zb];Ra.buffer||
S.enableVertexAttribArray(zb);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==H||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)S.bindBuffer(34962,H.buffer),S.vertexAttribPointer(zb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=H,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(ia.vertexAttribDivisorANGLE(zb,0),Ra.divisor=0);Kc=pa.location;Jb=Q[Kc];Jb.buffer||S.enableVertexAttribArray(Kc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==F||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)S.bindBuffer(34962,
F.buffer),S.vertexAttribPointer(Kc,2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=F,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(ia.vertexAttribDivisorANGLE(Kc,0),Jb.divisor=0);Za=W.location;Vb=Q[Za];Vb.buffer||S.enableVertexAttribArray(Za);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==w||!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)S.bindBuffer(34962,w.buffer),S.vertexAttribPointer(Za,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=w,Vb.normalized=!1,Vb.offset=16,Vb.stride=
24;0!==Vb.divisor&&(ia.vertexAttribDivisorANGLE(Za,0),Vb.divisor=0);ya=B.call(this,ma,a,0);S.uniform4f($a.location,ya[0],ya[1],ya[2],ya[3]);S.uniform1f(Qa.location,a.lineWidth);S.uniform1f(na.location,a.capSize);ce=a.scale;S.uniform2f(P.location,ce[0],ce[1]);Ja=a.scaleFract;S.uniform2f(sa.location,Ja[0],Ja[1]);Pb=a.translate;S.uniform2f(J.location,Pb[0],Pb[1]);gb=a.translateFract;S.uniform2f(Ob.location,gb[0],gb[1]);S.uniform1f(X.location,a.opacity);(jb=Ea.elements)?S.bindBuffer(34963,jb.buffer.buffer):
cc.currentVAO&&(jb=Na.getElements(cc.currentVAO.elements))&&S.bindBuffer(34963,jb.buffer.buffer);za=Ea.offset;fc=a.count;0<fc?jb?ia.drawElementsInstancedANGLE(4,36,jb.type,za<<(jb.type-5121>>1),fc):ia.drawArraysInstancedANGLE(4,za,36,fc):0>fc&&(jb?S.drawElements(4,36,jb.type,za<<(jb.type-5121>>1)):S.drawArrays(4,za,36));ea.dirty=!0;cc.setVAO(null);ma.viewportWidth=l;ma.viewportHeight=m;G&&(ga.cpuTime+=performance.now()-L);R&&t.destroyStream(I);pc&&t.destroyStream(Ta);Sa&&t.destroyStream(Gb);cd&&t.destroyStream(eb)},
scope:function(a,b,d){var c,g,k,l,m,p,q,x,u,v,y,E,D,ca,V,B,O,N,L,K,J,A,ja,P,Q,S,ha,la,X,ka,W,Y,va,cc,ra,Ca,fa,qa,sa,td,Xb,Gc,Rc,La,Eb,Wa,ta,pa,hb,Sa,na,db,oa,Lb,nc,Zb,Tb,$a,Ub,Ma,pb,ub,ib,Oa,Qa,Ib,Ka,eb,lc,Na,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Ob,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,cb,sc,Ha,Mc,Zc,Hb,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,kc,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,
ye,te,jc,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd;c=a.viewport;g=c.x|0;k=c.y|0;l="width"in c?c.width|0:ma.framebufferWidth-g;m="height"in c?c.height|0:ma.framebufferHeight-k;p=ma.viewportWidth;ma.viewportWidth=l;q=ma.viewportHeight;ma.viewportHeight=m;x=ia[0];ia[0]=g;u=ia[1];ia[1]=k;v=ia[2];ia[2]=l;y=ia[3];ia[3]=m;E=Qc[0];Qc[0]=0;D=Qc[1];Qc[1]=0;ca=Qc[2];Qc[2]=0;V=Qc[3];Qc[3]=0;B=da.blend_enable;da.blend_enable=!0;O=wc[0];wc[0]=32774;N=wc[1];wc[1]=32774;
L=C[0];C[0]=770;K=C[1];C[1]=771;J=C[2];C[2]=773;A=C[3];C[3]=1;ja=da.depth_enable;da.depth_enable=!1;P=a.viewport;Q=P.x|0;S=P.y|0;ha="width"in P?P.width|0:ma.framebufferWidth-Q;la="height"in P?P.height|0:ma.framebufferHeight-S;X=R[0];R[0]=Q;ka=R[1];R[1]=S;W=R[2];R[2]=ha;Y=R[3];R[3]=la;va=da.scissor_enable;da.scissor_enable=!0;if(cc=ea.profile)ra=performance.now(),ga.count++;Ca=Ea.count;Ea.count=36;fa=a.count;qa=Ea.instances;Ea.instances=fa;sa=Ea.primitive;Ea.primitive=4;td=a.capSize;Xb=bc[5];bc[5]=
td;Gc=a.lineWidth;Rc=bc[4];bc[4]=Gc;La=a.opacity;Eb=bc[10];bc[10]=La;Wa=a.range;ta=bc[18];bc[18]=Wa;pa=a.scale;hb=bc[6];bc[6]=pa;Sa=a.scaleFract;na=bc[7];bc[7]=Sa;db=a.translate;oa=bc[8];bc[8]=db;Lb=a.translateFract;nc=bc[9];bc[9]=Lb;Zb=M.call(this,ma,a,d);Tb=bc[3];bc[3]=Zb;$a=n.buffer;n.buffer=w;Ub=n.divisor;n.divisor=0;Ma=n.normalized;n.normalized=!1;pb=n.offset;n.offset=16;ub=n.size;n.size=0;ib=n.state;n.state=1;Oa=n.stride;n.stride=24;Qa=n.type;n.type=5126;Ib=n.w;n.w=0;Ka=n.x;n.x=0;eb=n.y;n.y=
0;lc=n.z;n.z=0;Na=G.call(this,ma,a,d);ba.offset=Na;dc=!1;kb=null;lb=0;ua=!1;xa=qb=0;Ua=1;bb=0;Aa=5126;zb=Ab=Ia=fb=0;ob(ba)?(dc=!0,kb=t.createStream(34962,ba),Aa=kb.dtype):(kb=t.getBuffer(ba))?Aa=kb.dtype:"constant"in ba?(Ua=2,"number"===typeof ba.constant?(Ia=ba.constant,Ab=zb=fb=0):(Ia=0<ba.constant.length?ba.constant[0]:0,Ab=1<ba.constant.length?ba.constant[1]:0,zb=2<ba.constant.length?ba.constant[2]:0,fb=3<ba.constant.length?ba.constant[3]:0)):(kb=ob(ba.buffer)?t.createStream(34962,ba.buffer):
t.getBuffer(ba.buffer),Aa="type"in ba?tc[ba.type]:kb.dtype,ua=!!ba.normalized,xa=ba.size|0,qb=ba.offset|0,bb=ba.stride|0,lb=ba.divisor|0);Ra=aa.buffer;aa.buffer=kb;Kc=aa.divisor;aa.divisor=lb;Jb=aa.normalized;aa.normalized=ua;Za=aa.offset;aa.offset=qb;Vb=aa.size;aa.size=xa;ya=aa.state;aa.state=Ua;Ob=aa.stride;aa.stride=bb;Ja=aa.type;aa.type=Aa;Pb=aa.w;aa.w=fb;gb=aa.x;aa.x=Ia;jb=aa.y;aa.y=Ab;za=aa.z;aa.z=zb;fc=I.buffer;I.buffer=H;Da=I.divisor;I.divisor=0;rb=I.normalized;I.normalized=!1;sb=I.offset;
I.offset=0;Xa=I.size;I.size=0;Ya=I.state;I.state=1;mc=I.stride;I.stride=24;xc=I.type;I.type=5126;uc=I.w;I.w=0;Va=I.x;I.x=0;Mb=I.y;I.y=0;Xc=I.z;I.z=0;Fa=Z.call(this,ma,a,d);r.offset=Fa;yc=!1;Pa=null;Ba=0;mb=!1;Cb=vb=0;tb=1;vc=0;wb=5126;Mc=Ha=sc=cb=0;ob(r)?(yc=!0,Pa=t.createStream(34962,r),wb=Pa.dtype):(Pa=t.getBuffer(r))?wb=Pa.dtype:"constant"in r?(tb=2,"number"===typeof r.constant?(sc=r.constant,Ha=Mc=cb=0):(sc=0<r.constant.length?r.constant[0]:0,Ha=1<r.constant.length?r.constant[1]:0,Mc=2<r.constant.length?
r.constant[2]:0,cb=3<r.constant.length?r.constant[3]:0)):(Pa=ob(r.buffer)?t.createStream(34962,r.buffer):t.getBuffer(r.buffer),wb="type"in r?tc[r.type]:Pa.dtype,mb=!!r.normalized,Cb=r.size|0,vb=r.offset|0,vc=r.stride|0,Ba=r.divisor|0);Zc=f.buffer;f.buffer=Pa;Hb=f.divisor;f.divisor=Ba;Wb=f.normalized;f.normalized=mb;ac=f.offset;f.offset=vb;Qb=f.size;f.size=Cb;Ga=f.state;f.state=tb;Yb=f.stride;f.stride=vc;nb=f.type;f.type=wb;xb=f.w;f.w=cb;Nb=f.x;f.x=sc;Rb=f.y;f.y=Ha;gc=f.z;f.z=Mc;ic=h.buffer;h.buffer=
F;Ye=h.divisor;h.divisor=0;Bc=h.normalized;h.normalized=!1;Cc=h.offset;h.offset=8;Ec=h.size;h.size=0;Nc=h.state;h.state=1;Yc=h.stride;h.stride=24;Sc=h.type;h.type=5126;Oc=h.w;h.w=0;Kb=h.x;h.x=0;Fb=h.y;h.y=0;Pc=h.z;h.z=0;Hc=e.call(this,ma,a,d);Bb.offset=Hc;Tc=!1;hc=null;Vc=0;nd=!1;oe=gd=0;Wc=1;kc=0;Ld=5126;Jd=Ud=xe=we=0;ob(Bb)?(Tc=!0,hc=t.createStream(34962,Bb),Ld=hc.dtype):(hc=t.getBuffer(Bb))?Ld=hc.dtype:"constant"in Bb?(Wc=2,"number"===typeof Bb.constant?(xe=Bb.constant,Ud=Jd=we=0):(xe=0<Bb.constant.length?
Bb.constant[0]:0,Ud=1<Bb.constant.length?Bb.constant[1]:0,Jd=2<Bb.constant.length?Bb.constant[2]:0,we=3<Bb.constant.length?Bb.constant[3]:0)):(hc=ob(Bb.buffer)?t.createStream(34962,Bb.buffer):t.getBuffer(Bb.buffer),Ld="type"in Bb?tc[Bb.type]:hc.dtype,nd=!!Bb.normalized,oe=Bb.size|0,gd=Bb.offset|0,kc=Bb.stride|0,Vc=Bb.divisor|0);Gd=z.buffer;z.buffer=hc;bd=z.divisor;z.divisor=Vc;Fc=z.normalized;z.normalized=nd;od=z.offset;z.offset=gd;hd=z.size;z.size=oe;ad=z.state;z.state=Wc;pd=z.stride;z.stride=kc;
yd=z.type;z.type=Ld;zd=z.w;z.w=we;ye=z.x;z.x=xe;te=z.y;z.y=Ud;jc=z.z;z.z=Jd;ee=T.call(this,ma,a,d);yb.offset=ee;de=!1;be=null;ue=0;$d=!1;zc=he=0;Uc=1;pe=0;ke=5126;Od=Nd=Md=Hd=0;ob(yb)?(de=!0,be=t.createStream(34962,yb),ke=be.dtype):(be=t.getBuffer(yb))?ke=be.dtype:"constant"in yb?(Uc=2,"number"===typeof yb.constant?(Md=yb.constant,Nd=Od=Hd=0):(Md=0<yb.constant.length?yb.constant[0]:0,Nd=1<yb.constant.length?yb.constant[1]:0,Od=2<yb.constant.length?yb.constant[2]:0,Hd=3<yb.constant.length?yb.constant[3]:
0)):(be=ob(yb.buffer)?t.createStream(34962,yb.buffer):t.getBuffer(yb.buffer),ke="type"in yb?tc[yb.type]:be.dtype,$d=!!yb.normalized,zc=yb.size|0,he=yb.offset|0,pe=yb.stride|0,ue=yb.divisor|0);ie=U.buffer;U.buffer=be;Ce=U.divisor;U.divisor=ue;ze=U.normalized;U.normalized=$d;me=U.offset;U.offset=he;Oe=U.size;U.size=zc;Pe=U.state;U.state=Uc;Le=U.stride;U.stride=pe;qe=U.type;U.type=ke;De=U.w;U.w=Hd;Ge=U.x;U.x=Md;He=U.y;U.y=Nd;Ie=U.z;U.z=Od;Ee=wa.vert;wa.vert=2;Kd=wa.frag;wa.frag=1;ea.dirty=!0;b(ma,a,
d);ma.viewportWidth=p;ma.viewportHeight=q;ia[0]=x;ia[1]=u;ia[2]=v;ia[3]=y;Qc[0]=E;Qc[1]=D;Qc[2]=ca;Qc[3]=V;da.blend_enable=B;wc[0]=O;wc[1]=N;C[0]=L;C[1]=K;C[2]=J;C[3]=A;da.depth_enable=ja;R[0]=X;R[1]=ka;R[2]=W;R[3]=Y;da.scissor_enable=va;cc&&(ga.cpuTime+=performance.now()-ra);Ea.count=Ca;Ea.instances=qa;Ea.primitive=sa;bc[5]=Xb;bc[4]=Rc;bc[10]=Eb;bc[18]=ta;bc[6]=hb;bc[7]=na;bc[8]=oa;bc[9]=nc;bc[3]=Tb;n.buffer=$a;n.divisor=Ub;n.normalized=Ma;n.offset=pb;n.size=ub;n.state=ib;n.stride=Oa;n.type=Qa;n.w=
Ib;n.x=Ka;n.y=eb;n.z=lc;dc&&t.destroyStream(kb);aa.buffer=Ra;aa.divisor=Kc;aa.normalized=Jb;aa.offset=Za;aa.size=Vb;aa.state=ya;aa.stride=Ob;aa.type=Ja;aa.w=Pb;aa.x=gb;aa.y=jb;aa.z=za;I.buffer=fc;I.divisor=Da;I.normalized=rb;I.offset=sb;I.size=Xa;I.state=Ya;I.stride=mc;I.type=xc;I.w=uc;I.x=Va;I.y=Mb;I.z=Xc;yc&&t.destroyStream(Pa);f.buffer=Zc;f.divisor=Hb;f.normalized=Wb;f.offset=ac;f.size=Qb;f.state=Ga;f.stride=Yb;f.type=nb;f.w=xb;f.x=Nb;f.y=Rb;f.z=gc;h.buffer=ic;h.divisor=Ye;h.normalized=Bc;h.offset=
Cc;h.size=Ec;h.state=Nc;h.stride=Yc;h.type=Sc;h.w=Oc;h.x=Kb;h.y=Fb;h.z=Pc;Tc&&t.destroyStream(hc);z.buffer=Gd;z.divisor=bd;z.normalized=Fc;z.offset=od;z.size=hd;z.state=ad;z.stride=pd;z.type=yd;z.w=zd;z.x=ye;z.y=te;z.z=jc;de&&t.destroyStream(be);U.buffer=ie;U.divisor=Ce;U.normalized=ze;U.offset=me;U.size=Oe;U.state=Pe;U.stride=Le;U.type=qe;U.w=De;U.x=Ge;U.y=He;U.z=Ie;wa.vert=Ee;wa.frag=Kd;ea.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(c,
ga,q,O,g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb){var kc,pa,Qa,X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa,bc,cc,Qc,td,wc,V,C,la,Ca,Lb,nc,Zc,D,u,ka,va,R,ha,ra,E,p;kc=c.attributes;pa=c.buffer;Qa=c.context;X=c.current;K=c.draw;N=c.elements;P=c.extensions;sa=c.framebuffer;J=c.gl;Ob=c.isBufferArgs;$a=c.next;Q=c.shader;t=c.uniforms;ma=c.vao;ea=$a.blend_color;Ea=X.blend_color;Na=$a.blend_equation;Hb=X.blend_equation;Ha=$a.blend_func;S=X.blend_func;ob=$a.colorMask;da=
X.colorMask;wa=$a.depth_range;bc=X.depth_range;cc=$a.polygonOffset_offset;Qc=X.polygonOffset_offset;td=$a.sample_coverage;wc=X.sample_coverage;V=$a.scissor_box;C=X.scissor_box;la=$a.stencil_func;Ca=X.stencil_func;Lb=$a.stencil_opBack;nc=X.stencil_opBack;Zc=$a.stencil_opFront;D=X.stencil_opFront;u=$a.viewport;ka=X.viewport;va={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};R={divisor:1,offset:8,stride:8};ha={divisor:1,offset:8,stride:8};ra={divisor:1,
offset:16,stride:8};E={divisor:1,offset:16,stride:8};p={divisor:1,offset:0,stride:4};return{batch:function(b,c){var n,q,k,t,u,r;n=sa.next;n!==sa.cur&&(n?J.bindFramebuffer(36160,n.framebuffer):J.bindFramebuffer(36160,null),sa.cur=n);if(X.dirty){var w,v,y,V,B,O,F,H,A,M,Q,ea,Y,oa,Wd,Ve,Na,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed;w=$a.dither;w!==X.dither&&(w?J.enable(3024):J.disable(3024),X.dither=w);v=$a.depth_func;v!==X.depth_func&&(J.depthFunc(v),X.depth_func=v);y=wa[0];V=wa[1];if(y!==bc[0]||V!==
bc[1])J.depthRange(y,V),bc[0]=y,bc[1]=V;B=$a.depth_mask;B!==X.depth_mask&&(J.depthMask(B),X.depth_mask=B);O=ob[0];F=ob[1];H=ob[2];A=ob[3];if(O!==da[0]||F!==da[1]||H!==da[2]||A!==da[3])J.colorMask(O,F,H,A),da[0]=O,da[1]=F,da[2]=H,da[3]=A;M=$a.cull_enable;M!==X.cull_enable&&(M?J.enable(2884):J.disable(2884),X.cull_enable=M);Q=$a.cull_face;Q!==X.cull_face&&(J.cullFace(Q),X.cull_face=Q);ea=$a.frontFace;ea!==X.frontFace&&(J.frontFace(ea),X.frontFace=ea);Y=$a.lineWidth;Y!==X.lineWidth&&(J.lineWidth(Y),
X.lineWidth=Y);oa=$a.polygonOffset_enable;oa!==X.polygonOffset_enable&&(oa?J.enable(32823):J.disable(32823),X.polygonOffset_enable=oa);Wd=cc[0];Ve=cc[1];if(Wd!==Qc[0]||Ve!==Qc[1])J.polygonOffset(Wd,Ve),Qc[0]=Wd,Qc[1]=Ve;Na=$a.sample_alpha;Na!==X.sample_alpha&&(Na?J.enable(32926):J.disable(32926),X.sample_alpha=Na);af=$a.sample_enable;af!==X.sample_enable&&(af?J.enable(32928):J.disable(32928),X.sample_enable=af);Ad=td[0];Fe=td[1];if(Ad!==wc[0]||Fe!==wc[1])J.sampleCoverage(Ad,Fe),wc[0]=Ad,wc[1]=Fe;
Sd=$a.stencil_mask;Sd!==X.stencil_mask&&(J.stencilMask(Sd),X.stencil_mask=Sd);Td=la[0];le=la[1];Xd=la[2];if(Td!==Ca[0]||le!==Ca[1]||Xd!==Ca[2])J.stencilFunc(Td,le,Xd),Ca[0]=Td,Ca[1]=le,Ca[2]=Xd;rd=Zc[0];jd=Zc[1];vd=Zc[2];$c=Zc[3];if(rd!==D[0]||jd!==D[1]||vd!==D[2]||$c!==D[3])J.stencilOpSeparate(rd,jd,vd,$c),D[0]=rd,D[1]=jd,D[2]=vd,D[3]=$c;kd=Lb[0];oc=Lb[1];id=Lb[2];ed=Lb[3];if(kd!==nc[0]||oc!==nc[1]||id!==nc[2]||ed!==nc[3])J.stencilOpSeparate(kd,oc,id,ed),nc[0]=kd,nc[1]=oc,nc[2]=id,nc[3]=ed}J.blendColor(0,
0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;J.enable(3042);X.blend_enable=!0;J.blendEquationSeparate(32774,32774);Hb[0]=32774;Hb[1]=32774;J.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;J.enable(3089);X.scissor_enable=!0;J.disable(2960);X.stencil_enable=!1;if(q=X.profile)k=performance.now(),ga.count+=c;J.useProgram(G.program);t=P.angle_instanced_arrays;var Lc,qc,ab,Ic,Db;ma.setVAO(null);Lc=qa.location;qc=kc[Lc];qc.buffer||J.enableVertexAttribArray(Lc);if(5126!==qc.type||1!==qc.size||
qc.buffer!==g||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)J.bindBuffer(34962,g.buffer),J.vertexAttribPointer(Lc,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=g,qc.normalized=!1,qc.offset=0,qc.stride=8;0!==qc.divisor&&(t.vertexAttribDivisorANGLE(Lc,0),qc.divisor=0);ab=L.location;Ic=kc[ab];Ic.buffer||J.enableVertexAttribArray(ab);if(5126!==Ic.type||1!==Ic.size||Ic.buffer!==d||!1!==Ic.normalized||4!==Ic.offset||8!==Ic.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer(ab,1,5126,!1,8,4),
Ic.type=5126,Ic.size=1,Ic.buffer=d,Ic.normalized=!1,Ic.offset=4,Ic.stride=8;0!==Ic.divisor&&(t.vertexAttribDivisorANGLE(ab,0),Ic.divisor=0);(Db=K.elements)?J.bindBuffer(34963,Db.buffer.buffer):ma.currentVAO&&(Db=N.getElements(ma.currentVAO.elements))&&J.bindBuffer(34963,Db.buffer.buffer);for(u=0;u<c;++u){r=b[u];var pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,Ha,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,
za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,jc,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad;pc=r.viewport;Ta=pc.x|0;Jc=pc.y|0;$b="width"in pc?pc.width|0:Qa.framebufferWidth-Ta;rc="height"in pc?pc.height|0:Qa.framebufferHeight-Jc;Fd=Qa.viewportWidth;Qa.viewportWidth=$b;Bd=Qa.viewportHeight;Qa.viewportHeight=rc;J.viewport(Ta,Jc,$b,rc);ka[0]=Ta;ka[1]=Jc;ka[2]=$b;ka[3]=rc;(Ac=aa.call(this,
Qa,r,u))?J.enable(2929):J.disable(2929);X.depth_enable=Ac;Xb=r.viewport;Gc=Xb.x|0;Rc=Xb.y|0;La="width"in Xb?Xb.width|0:Qa.framebufferWidth-Gc;Eb="height"in Xb?Xb.height|0:Qa.framebufferHeight-Rc;J.scissor(Gc,Rc,La,Eb);C[0]=Gc;C[1]=Rc;C[2]=La;C[3]=Eb;R.buffer=r.positionBuffer;Wa=!1;ta=null;md=0;hb=!1;Gb=Sa=0;db=1;ec=0;Sb=5126;fd=Tb=Zb=Ha=0;Ob(R)?(Wa=!0,ta=pa.createStream(34962,R),Sb=ta.dtype):(ta=pa.getBuffer(R))?Sb=ta.dtype:"constant"in R?(db=2,"number"===typeof R.constant?(Zb=R.constant,Tb=fd=Ha=
0):(Zb=0<R.constant.length?R.constant[0]:0,Tb=1<R.constant.length?R.constant[1]:0,fd=2<R.constant.length?R.constant[2]:0,Ha=3<R.constant.length?R.constant[3]:0)):(ta=Ob(R.buffer)?pa.createStream(34962,R.buffer):pa.getBuffer(R.buffer),Sb="type"in R?va[R.type]:ta.dtype,hb=!!R.normalized,Gb=R.size|0,Sa=R.offset|0,ec=R.stride|0,md=R.divisor|0);Ub=Z.location;Ma=kc[Ub];if(1===db){Ma.buffer||J.enableVertexAttribArray(Ub);pb=Gb||2;if(Ma.type!==Sb||Ma.size!==pb||Ma.buffer!==ta||Ma.normalized!==hb||Ma.offset!==
Sa||Ma.stride!==ec)J.bindBuffer(34962,ta.buffer),J.vertexAttribPointer(Ub,pb,Sb,hb,ec,Sa),Ma.type=Sb,Ma.size=pb,Ma.buffer=ta,Ma.normalized=hb,Ma.offset=Sa,Ma.stride=ec;Ma.divisor!==md&&(t.vertexAttribDivisorANGLE(Ub,md),Ma.divisor=md)}else if(Ma.buffer&&(J.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==Zb||Ma.y!==Tb||Ma.z!==fd||Ma.w!==Ha)J.vertexAttrib4f(Ub,Zb,Tb,fd,Ha),Ma.x=Zb,Ma.y=Tb,Ma.z=fd,Ma.w=Ha;ra.buffer=r.positionBuffer;ub=!1;ib=null;Oa=0;Dc=!1;cd=Ib=0;eb=1;lc=0;dd=5126;ua=lb=kb=dc=0;
Ob(ra)?(ub=!0,ib=pa.createStream(34962,ra),dd=ib.dtype):(ib=pa.getBuffer(ra))?dd=ib.dtype:"constant"in ra?(eb=2,"number"===typeof ra.constant?(kb=ra.constant,lb=ua=dc=0):(kb=0<ra.constant.length?ra.constant[0]:0,lb=1<ra.constant.length?ra.constant[1]:0,ua=2<ra.constant.length?ra.constant[2]:0,dc=3<ra.constant.length?ra.constant[3]:0)):(ib=Ob(ra.buffer)?pa.createStream(34962,ra.buffer):pa.getBuffer(ra.buffer),dd="type"in ra?va[ra.type]:ib.dtype,Dc=!!ra.normalized,cd=ra.size|0,Ib=ra.offset|0,lc=ra.stride|
0,Oa=ra.divisor|0);qb=h.location;xa=kc[qb];if(1===eb){xa.buffer||J.enableVertexAttribArray(qb);Ua=cd||2;if(xa.type!==dd||xa.size!==Ua||xa.buffer!==ib||xa.normalized!==Dc||xa.offset!==Ib||xa.stride!==lc)J.bindBuffer(34962,ib.buffer),J.vertexAttribPointer(qb,Ua,dd,Dc,lc,Ib),xa.type=dd,xa.size=Ua,xa.buffer=ib,xa.normalized=Dc,xa.offset=Ib,xa.stride=lc;xa.divisor!==Oa&&(t.vertexAttribDivisorANGLE(qb,Oa),xa.divisor=Oa)}else if(xa.buffer&&(J.disableVertexAttribArray(qb),xa.buffer=null),xa.x!==kb||xa.y!==
lb||xa.z!==ua||xa.w!==dc)J.vertexAttrib4f(qb,kb,lb,ua,dc),xa.x=kb,xa.y=lb,xa.z=ua,xa.w=dc;ha.buffer=r.positionFractBuffer;bb=!1;Aa=null;fb=0;Ia=!1;zb=Ab=0;Ra=1;Kc=0;Jb=5126;ce=ya=Vb=Za=0;Ob(ha)?(bb=!0,Aa=pa.createStream(34962,ha),Jb=Aa.dtype):(Aa=pa.getBuffer(ha))?Jb=Aa.dtype:"constant"in ha?(Ra=2,"number"===typeof ha.constant?(Vb=ha.constant,ya=ce=Za=0):(Vb=0<ha.constant.length?ha.constant[0]:0,ya=1<ha.constant.length?ha.constant[1]:0,ce=2<ha.constant.length?ha.constant[2]:0,Za=3<ha.constant.length?
ha.constant[3]:0)):(Aa=Ob(ha.buffer)?pa.createStream(34962,ha.buffer):pa.getBuffer(ha.buffer),Jb="type"in ha?va[ha.type]:Aa.dtype,Ia=!!ha.normalized,zb=ha.size|0,Ab=ha.offset|0,Kc=ha.stride|0,fb=ha.divisor|0);Ja=f.location;Pb=kc[Ja];if(1===Ra){Pb.buffer||J.enableVertexAttribArray(Ja);gb=zb||2;if(Pb.type!==Jb||Pb.size!==gb||Pb.buffer!==Aa||Pb.normalized!==Ia||Pb.offset!==Ab||Pb.stride!==Kc)J.bindBuffer(34962,Aa.buffer),J.vertexAttribPointer(Ja,gb,Jb,Ia,Kc,Ab),Pb.type=Jb,Pb.size=gb,Pb.buffer=Aa,Pb.normalized=
Ia,Pb.offset=Ab,Pb.stride=Kc;Pb.divisor!==fb&&(t.vertexAttribDivisorANGLE(Ja,fb),Pb.divisor=fb)}else if(Pb.buffer&&(J.disableVertexAttribArray(Ja),Pb.buffer=null),Pb.x!==Vb||Pb.y!==ya||Pb.z!==ce||Pb.w!==Za)J.vertexAttrib4f(Ja,Vb,ya,ce,Za),Pb.x=Vb,Pb.y=ya,Pb.z=ce,Pb.w=Za;E.buffer=r.positionFractBuffer;jb=!1;za=null;fc=0;Da=!1;sb=rb=0;Xa=1;Ya=0;mc=5126;Mb=Va=uc=xc=0;Ob(E)?(jb=!0,za=pa.createStream(34962,E),mc=za.dtype):(za=pa.getBuffer(E))?mc=za.dtype:"constant"in E?(Xa=2,"number"===typeof E.constant?
(uc=E.constant,Va=Mb=xc=0):(uc=0<E.constant.length?E.constant[0]:0,Va=1<E.constant.length?E.constant[1]:0,Mb=2<E.constant.length?E.constant[2]:0,xc=3<E.constant.length?E.constant[3]:0)):(za=Ob(E.buffer)?pa.createStream(34962,E.buffer):pa.getBuffer(E.buffer),mc="type"in E?va[E.type]:za.dtype,Da=!!E.normalized,sb=E.size|0,rb=E.offset|0,Ya=E.stride|0,fc=E.divisor|0);Xc=e.location;Fa=kc[Xc];if(1===Xa){Fa.buffer||J.enableVertexAttribArray(Xc);yc=sb||2;if(Fa.type!==mc||Fa.size!==yc||Fa.buffer!==za||Fa.normalized!==
Da||Fa.offset!==rb||Fa.stride!==Ya)J.bindBuffer(34962,za.buffer),J.vertexAttribPointer(Xc,yc,mc,Da,Ya,rb),Fa.type=mc,Fa.size=yc,Fa.buffer=za,Fa.normalized=Da,Fa.offset=rb,Fa.stride=Ya;Fa.divisor!==fc&&(t.vertexAttribDivisorANGLE(Xc,fc),Fa.divisor=fc)}else if(Fa.buffer&&(J.disableVertexAttribArray(Xc),Fa.buffer=null),Fa.x!==uc||Fa.y!==Va||Fa.z!==Mb||Fa.w!==xc)J.vertexAttrib4f(Xc,uc,Va,Mb,xc),Fa.x=uc,Fa.y=Va,Fa.z=Mb,Fa.w=xc;p.buffer=r.colorBuffer;Pa=!1;Ba=null;mb=0;vb=!1;tb=Cb=0;vc=1;wb=0;wd=5126;ld=
Mc=ud=sc=0;Ob(p)?(Pa=!0,Ba=pa.createStream(34962,p),wd=Ba.dtype):(Ba=pa.getBuffer(p))?wd=Ba.dtype:"constant"in p?(vc=2,"number"===typeof p.constant?(ud=p.constant,Mc=ld=sc=0):(ud=0<p.constant.length?p.constant[0]:0,Mc=1<p.constant.length?p.constant[1]:0,ld=2<p.constant.length?p.constant[2]:0,sc=3<p.constant.length?p.constant[3]:0)):(Ba=Ob(p.buffer)?pa.createStream(34962,p.buffer):pa.getBuffer(p.buffer),wd="type"in p?va[p.type]:Ba.dtype,vb=!!p.normalized,tb=p.size|0,Cb=p.offset|0,wb=p.stride|0,mb=
p.divisor|0);sd=z.location;Wb=kc[sd];if(1===vc){Wb.buffer||J.enableVertexAttribArray(sd);ac=tb||4;if(Wb.type!==wd||Wb.size!==ac||Wb.buffer!==Ba||Wb.normalized!==vb||Wb.offset!==Cb||Wb.stride!==wb)J.bindBuffer(34962,Ba.buffer),J.vertexAttribPointer(sd,ac,wd,vb,wb,Cb),Wb.type=wd,Wb.size=ac,Wb.buffer=Ba,Wb.normalized=vb,Wb.offset=Cb,Wb.stride=wb;Wb.divisor!==mb&&(t.vertexAttribDivisorANGLE(sd,mb),Wb.divisor=mb)}else if(Wb.buffer&&(J.disableVertexAttribArray(sd),Wb.buffer=null),Wb.x!==ud||Wb.y!==Mc||
Wb.z!==ld||Wb.w!==sc)J.vertexAttrib4f(sd,ud,Mc,ld,sc),Wb.x=ud,Wb.y=Mc,Wb.z=ld,Wb.w=sc;Qb=r.scale;Ga=Qb[0];nb=Qb[1];u&&Yb===Ga&&xb===nb||(Yb=Ga,xb=nb,J.uniform2f(a.location,Ga,nb));Nb=r.scaleFract;Rb=Nb[0];ic=Nb[1];u&&gc===Rb&&Ye===ic||(gc=Rb,Ye=ic,J.uniform2f(l.location,Rb,ic));Bc=r.translate;Cc=Bc[0];Nc=Bc[1];u&&Ec===Cc&&Yc===Nc||(Ec=Cc,Yc=Nc,J.uniform2f(na.location,Cc,Nc));Sc=r.translateFract;Oc=Sc[0];Fb=Sc[1];u&&Kb===Oc&&Pc===Fb||(Kb=Oc,Pc=Fb,J.uniform2f(Ka.location,Oc,Fb));Hc=r.thickness;u&&Tc===
Hc||(Tc=Hc,J.uniform1f(W.location,Hc));hc=r.depth;u&&Vc===hc||(Vc=hc,J.uniform1f(m.location,hc));nd=I.call(this,Qa,r,u);gd=nd[0];Wc=nd[1];Ld=nd[2];xe=nd[3];u&&oe===gd&&jc===Wc&&we===Ld&&Ud===xe||(oe=gd,jc=Wc,we=Ld,Ud=xe,J.uniform4f(cb.location,gd,Wc,Ld,xe));Jd=r.dashLength;u&&Gd===Jd||(Gd=Jd,J.uniform1f(T.location,Jd));bd=r.opacity;u&&Fc===bd||(Fc=bd,J.uniform1f(fa.location,bd));(od=r.dashTexture)&&"framebuffer"===od._reglType&&(od=od.color[0]);hd=od._texture;J.uniform1i(U.location,hd.bind());ad=
r.count;0<ad?Db?t.drawElementsInstancedANGLE(5,4,Db.type,0<<(Db.type-5121>>1),ad):t.drawArraysInstancedANGLE(5,0,4,ad):0>ad&&(Db?J.drawElements(5,4,Db.type,0<<(Db.type-5121>>1)):J.drawArrays(5,0,4));Qa.viewportWidth=Fd;Qa.viewportHeight=Bd;Wa&&pa.destroyStream(ta);ub&&pa.destroyStream(ib);bb&&pa.destroyStream(Aa);jb&&pa.destroyStream(za);Pa&&pa.destroyStream(Ba);hd.unbind()}X.dirty=!0;ma.setVAO(null);q&&(ga.cpuTime+=performance.now()-k)},draw:function(b){var c,n,u,k,t,w,r,v,V,B,G,F,H,A,M,Q,I,ea,Y,
aa,oa,Wd,Ve,Na,Ha,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb;c=sa.next;c!==sa.cur&&(c?J.bindFramebuffer(36160,c.framebuffer):J.bindFramebuffer(36160,null),sa.cur=c);if(X.dirty){var sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb;sb=$a.dither;
sb!==X.dither&&(sb?J.enable(3024):J.disable(3024),X.dither=sb);Xa=$a.depth_func;Xa!==X.depth_func&&(J.depthFunc(Xa),X.depth_func=Xa);Ya=wa[0];mc=wa[1];if(Ya!==bc[0]||mc!==bc[1])J.depthRange(Ya,mc),bc[0]=Ya,bc[1]=mc;xc=$a.depth_mask;xc!==X.depth_mask&&(J.depthMask(xc),X.depth_mask=xc);uc=ob[0];Va=ob[1];Mb=ob[2];Xc=ob[3];if(uc!==da[0]||Va!==da[1]||Mb!==da[2]||Xc!==da[3])J.colorMask(uc,Va,Mb,Xc),da[0]=uc,da[1]=Va,da[2]=Mb,da[3]=Xc;Fa=$a.cull_enable;Fa!==X.cull_enable&&(Fa?J.enable(2884):J.disable(2884),
X.cull_enable=Fa);yc=$a.cull_face;yc!==X.cull_face&&(J.cullFace(yc),X.cull_face=yc);Pa=$a.frontFace;Pa!==X.frontFace&&(J.frontFace(Pa),X.frontFace=Pa);Ba=$a.lineWidth;Ba!==X.lineWidth&&(J.lineWidth(Ba),X.lineWidth=Ba);mb=$a.polygonOffset_enable;mb!==X.polygonOffset_enable&&(mb?J.enable(32823):J.disable(32823),X.polygonOffset_enable=mb);vb=cc[0];Cb=cc[1];if(vb!==Qc[0]||Cb!==Qc[1])J.polygonOffset(vb,Cb),Qc[0]=vb,Qc[1]=Cb;tb=$a.sample_alpha;tb!==X.sample_alpha&&(tb?J.enable(32926):J.disable(32926),X.sample_alpha=
tb);vc=$a.sample_enable;vc!==X.sample_enable&&(vc?J.enable(32928):J.disable(32928),X.sample_enable=vc);wb=td[0];wd=td[1];if(wb!==wc[0]||wd!==wc[1])J.sampleCoverage(wb,wd),wc[0]=wb,wc[1]=wd;sc=$a.stencil_mask;sc!==X.stencil_mask&&(J.stencilMask(sc),X.stencil_mask=sc);ud=la[0];Mc=la[1];ld=la[2];if(ud!==Ca[0]||Mc!==Ca[1]||ld!==Ca[2])J.stencilFunc(ud,Mc,ld),Ca[0]=ud,Ca[1]=Mc,Ca[2]=ld;sd=Zc[0];Wb=Zc[1];ac=Zc[2];Qb=Zc[3];if(sd!==D[0]||Wb!==D[1]||ac!==D[2]||Qb!==D[3])J.stencilOpSeparate(sd,Wb,ac,Qb),D[0]=
sd,D[1]=Wb,D[2]=ac,D[3]=Qb;Ga=Lb[0];Yb=Lb[1];nb=Lb[2];xb=Lb[3];if(Ga!==nc[0]||Yb!==nc[1]||nb!==nc[2]||xb!==nc[3])J.stencilOpSeparate(Ga,Yb,nb,xb),nc[0]=Ga,nc[1]=Yb,nc[2]=nb,nc[3]=xb}n=b.viewport;u=n.x|0;k=n.y|0;t="width"in n?n.width|0:Qa.framebufferWidth-u;w="height"in n?n.height|0:Qa.framebufferHeight-k;r=Qa.viewportWidth;Qa.viewportWidth=t;v=Qa.viewportHeight;Qa.viewportHeight=w;J.viewport(u,k,t,w);ka[0]=u;ka[1]=k;ka[2]=t;ka[3]=w;J.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;J.enable(3042);
X.blend_enable=!0;J.blendEquationSeparate(32774,32774);Hb[0]=32774;Hb[1]=32774;J.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;(V=q.call(this,Qa,b,0))?J.enable(2929):J.disable(2929);X.depth_enable=V;B=b.viewport;G=B.x|0;F=B.y|0;H="width"in B?B.width|0:Qa.framebufferWidth-G;A="height"in B?B.height|0:Qa.framebufferHeight-F;J.scissor(G,F,H,A);C[0]=G;C[1]=F;C[2]=H;C[3]=A;J.enable(3089);X.scissor_enable=!0;J.disable(2960);X.stencil_enable=!1;if(M=X.profile)Q=performance.now(),ga.count++;
J.useProgram(O.program);I=P.angle_instanced_arrays;ma.setVAO(null);R.buffer=b.positionBuffer;ea=!1;Y=null;aa=0;oa=!1;Ve=Wd=0;Na=1;Ha=0;Ad=5126;le=Td=Sd=Fe=0;Ob(R)?(ea=!0,Y=pa.createStream(34962,R),Ad=Y.dtype):(Y=pa.getBuffer(R))?Ad=Y.dtype:"constant"in R?(Na=2,"number"===typeof R.constant?(Sd=R.constant,Td=le=Fe=0):(Sd=0<R.constant.length?R.constant[0]:0,Td=1<R.constant.length?R.constant[1]:0,le=2<R.constant.length?R.constant[2]:0,Fe=3<R.constant.length?R.constant[3]:0)):(Y=Ob(R.buffer)?pa.createStream(34962,
R.buffer):pa.getBuffer(R.buffer),Ad="type"in R?va[R.type]:Y.dtype,oa=!!R.normalized,Ve=R.size|0,Wd=R.offset|0,Ha=R.stride|0,aa=R.divisor|0);Xd=Z.location;rd=kc[Xd];if(1===Na){rd.buffer||J.enableVertexAttribArray(Xd);jd=Ve||2;if(rd.type!==Ad||rd.size!==jd||rd.buffer!==Y||rd.normalized!==oa||rd.offset!==Wd||rd.stride!==Ha)J.bindBuffer(34962,Y.buffer),J.vertexAttribPointer(Xd,jd,Ad,oa,Ha,Wd),rd.type=Ad,rd.size=jd,rd.buffer=Y,rd.normalized=oa,rd.offset=Wd,rd.stride=Ha;rd.divisor!==aa&&(I.vertexAttribDivisorANGLE(Xd,
aa),rd.divisor=aa)}else if(rd.buffer&&(J.disableVertexAttribArray(Xd),rd.buffer=null),rd.x!==Sd||rd.y!==Td||rd.z!==le||rd.w!==Fe)J.vertexAttrib4f(Xd,Sd,Td,le,Fe),rd.x=Sd,rd.y=Td,rd.z=le,rd.w=Fe;ra.buffer=b.positionBuffer;vd=!1;$c=null;kd=0;oc=!1;ed=id=0;Lc=1;qc=0;ab=5126;Ta=pc=Db=Ic=0;Ob(ra)?(vd=!0,$c=pa.createStream(34962,ra),ab=$c.dtype):($c=pa.getBuffer(ra))?ab=$c.dtype:"constant"in ra?(Lc=2,"number"===typeof ra.constant?(Db=ra.constant,pc=Ta=Ic=0):(Db=0<ra.constant.length?ra.constant[0]:0,pc=
1<ra.constant.length?ra.constant[1]:0,Ta=2<ra.constant.length?ra.constant[2]:0,Ic=3<ra.constant.length?ra.constant[3]:0)):($c=Ob(ra.buffer)?pa.createStream(34962,ra.buffer):pa.getBuffer(ra.buffer),ab="type"in ra?va[ra.type]:$c.dtype,oc=!!ra.normalized,ed=ra.size|0,id=ra.offset|0,qc=ra.stride|0,kd=ra.divisor|0);Jc=h.location;$b=kc[Jc];if(1===Lc){$b.buffer||J.enableVertexAttribArray(Jc);rc=ed||2;if($b.type!==ab||$b.size!==rc||$b.buffer!==$c||$b.normalized!==oc||$b.offset!==id||$b.stride!==qc)J.bindBuffer(34962,
$c.buffer),J.vertexAttribPointer(Jc,rc,ab,oc,qc,id),$b.type=ab,$b.size=rc,$b.buffer=$c,$b.normalized=oc,$b.offset=id,$b.stride=qc;$b.divisor!==kd&&(I.vertexAttribDivisorANGLE(Jc,kd),$b.divisor=kd)}else if($b.buffer&&(J.disableVertexAttribArray(Jc),$b.buffer=null),$b.x!==Db||$b.y!==pc||$b.z!==Ta||$b.w!==Ic)J.vertexAttrib4f(Jc,Db,pc,Ta,Ic),$b.x=Db,$b.y=pc,$b.z=Ta,$b.w=Ic;ha.buffer=b.positionFractBuffer;Fd=!1;Bd=null;Ac=0;Xb=!1;Rc=Gc=0;La=1;Eb=0;Wa=5126;Sa=hb=md=ta=0;Ob(ha)?(Fd=!0,Bd=pa.createStream(34962,
ha),Wa=Bd.dtype):(Bd=pa.getBuffer(ha))?Wa=Bd.dtype:"constant"in ha?(La=2,"number"===typeof ha.constant?(md=ha.constant,hb=Sa=ta=0):(md=0<ha.constant.length?ha.constant[0]:0,hb=1<ha.constant.length?ha.constant[1]:0,Sa=2<ha.constant.length?ha.constant[2]:0,ta=3<ha.constant.length?ha.constant[3]:0)):(Bd=Ob(ha.buffer)?pa.createStream(34962,ha.buffer):pa.getBuffer(ha.buffer),Wa="type"in ha?va[ha.type]:Bd.dtype,Xb=!!ha.normalized,Rc=ha.size|0,Gc=ha.offset|0,Eb=ha.stride|0,Ac=ha.divisor|0);Gb=f.location;
db=kc[Gb];if(1===La){db.buffer||J.enableVertexAttribArray(Gb);ec=Rc||2;if(db.type!==Wa||db.size!==ec||db.buffer!==Bd||db.normalized!==Xb||db.offset!==Gc||db.stride!==Eb)J.bindBuffer(34962,Bd.buffer),J.vertexAttribPointer(Gb,ec,Wa,Xb,Eb,Gc),db.type=Wa,db.size=ec,db.buffer=Bd,db.normalized=Xb,db.offset=Gc,db.stride=Eb;db.divisor!==Ac&&(I.vertexAttribDivisorANGLE(Gb,Ac),db.divisor=Ac)}else if(db.buffer&&(J.disableVertexAttribArray(Gb),db.buffer=null),db.x!==md||db.y!==hb||db.z!==Sa||db.w!==ta)J.vertexAttrib4f(Gb,
md,hb,Sa,ta),db.x=md,db.y=hb,db.z=Sa,db.w=ta;E.buffer=b.positionFractBuffer;Sb=!1;ge=null;Zb=0;Tb=!1;Ub=fd=0;Ma=1;pb=0;ub=5126;Ib=Dc=Oa=ib=0;Ob(E)?(Sb=!0,ge=pa.createStream(34962,E),ub=ge.dtype):(ge=pa.getBuffer(E))?ub=ge.dtype:"constant"in E?(Ma=2,"number"===typeof E.constant?(Oa=E.constant,Dc=Ib=ib=0):(Oa=0<E.constant.length?E.constant[0]:0,Dc=1<E.constant.length?E.constant[1]:0,Ib=2<E.constant.length?E.constant[2]:0,ib=3<E.constant.length?E.constant[3]:0)):(ge=Ob(E.buffer)?pa.createStream(34962,
E.buffer):pa.getBuffer(E.buffer),ub="type"in E?va[E.type]:ge.dtype,Tb=!!E.normalized,Ub=E.size|0,fd=E.offset|0,pb=E.stride|0,Zb=E.divisor|0);cd=e.location;eb=kc[cd];if(1===Ma){eb.buffer||J.enableVertexAttribArray(cd);lc=Ub||2;if(eb.type!==ub||eb.size!==lc||eb.buffer!==ge||eb.normalized!==Tb||eb.offset!==fd||eb.stride!==pb)J.bindBuffer(34962,ge.buffer),J.vertexAttribPointer(cd,lc,ub,Tb,pb,fd),eb.type=ub,eb.size=lc,eb.buffer=ge,eb.normalized=Tb,eb.offset=fd,eb.stride=pb;eb.divisor!==Zb&&(I.vertexAttribDivisorANGLE(cd,
Zb),eb.divisor=Zb)}else if(eb.buffer&&(J.disableVertexAttribArray(cd),eb.buffer=null),eb.x!==Oa||eb.y!==Dc||eb.z!==Ib||eb.w!==ib)J.vertexAttrib4f(cd,Oa,Dc,Ib,ib),eb.x=Oa,eb.y=Dc,eb.z=Ib,eb.w=ib;p.buffer=b.colorBuffer;dd=!1;dc=null;kb=0;lb=!1;qb=ua=0;xa=1;Ua=0;bb=5126;Ab=Ia=fb=Aa=0;Ob(p)?(dd=!0,dc=pa.createStream(34962,p),bb=dc.dtype):(dc=pa.getBuffer(p))?bb=dc.dtype:"constant"in p?(xa=2,"number"===typeof p.constant?(fb=p.constant,Ia=Ab=Aa=0):(fb=0<p.constant.length?p.constant[0]:0,Ia=1<p.constant.length?
p.constant[1]:0,Ab=2<p.constant.length?p.constant[2]:0,Aa=3<p.constant.length?p.constant[3]:0)):(dc=Ob(p.buffer)?pa.createStream(34962,p.buffer):pa.getBuffer(p.buffer),bb="type"in p?va[p.type]:dc.dtype,lb=!!p.normalized,qb=p.size|0,ua=p.offset|0,Ua=p.stride|0,kb=p.divisor|0);zb=z.location;Ra=kc[zb];if(1===xa){Ra.buffer||J.enableVertexAttribArray(zb);Kc=qb||4;if(Ra.type!==bb||Ra.size!==Kc||Ra.buffer!==dc||Ra.normalized!==lb||Ra.offset!==ua||Ra.stride!==Ua)J.bindBuffer(34962,dc.buffer),J.vertexAttribPointer(zb,
Kc,bb,lb,Ua,ua),Ra.type=bb,Ra.size=Kc,Ra.buffer=dc,Ra.normalized=lb,Ra.offset=ua,Ra.stride=Ua;Ra.divisor!==kb&&(I.vertexAttribDivisorANGLE(zb,kb),Ra.divisor=kb)}else if(Ra.buffer&&(J.disableVertexAttribArray(zb),Ra.buffer=null),Ra.x!==fb||Ra.y!==Ia||Ra.z!==Ab||Ra.w!==Aa)J.vertexAttrib4f(zb,fb,Ia,Ab,Aa),Ra.x=fb,Ra.y=Ia,Ra.z=Ab,Ra.w=Aa;Jb=qa.location;Za=kc[Jb];Za.buffer||J.enableVertexAttribArray(Jb);if(5126!==Za.type||1!==Za.size||Za.buffer!==g||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)J.bindBuffer(34962,
g.buffer),J.vertexAttribPointer(Jb,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=g,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(I.vertexAttribDivisorANGLE(Jb,0),Za.divisor=0);Vb=L.location;ya=kc[Vb];ya.buffer||J.enableVertexAttribArray(Vb);if(5126!==ya.type||1!==ya.size||ya.buffer!==d||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer(Vb,1,5126,!1,8,4),ya.type=5126,ya.size=1,ya.buffer=d,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&
(I.vertexAttribDivisorANGLE(Vb,0),ya.divisor=0);ce=b.scale;J.uniform2f(a.location,ce[0],ce[1]);Ja=b.scaleFract;J.uniform2f(l.location,Ja[0],Ja[1]);Pb=b.translate;J.uniform2f(na.location,Pb[0],Pb[1]);gb=b.translateFract;J.uniform2f(Ka.location,gb[0],gb[1]);J.uniform1f(W.location,b.thickness);J.uniform1f(m.location,b.depth);jb=y.call(this,Qa,b,0);J.uniform4f(cb.location,jb[0],jb[1],jb[2],jb[3]);J.uniform1f(T.location,b.dashLength);J.uniform1f(fa.location,b.opacity);(za=b.dashTexture)&&"framebuffer"===
za._reglType&&(za=za.color[0]);fc=za._texture;J.uniform1i(U.location,fc.bind());(Da=K.elements)?J.bindBuffer(34963,Da.buffer.buffer):ma.currentVAO&&(Da=N.getElements(ma.currentVAO.elements))&&J.bindBuffer(34963,Da.buffer.buffer);rb=b.count;0<rb?Da?I.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),rb):I.drawArraysInstancedANGLE(5,0,4,rb):0>rb&&(Da?J.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):J.drawArrays(5,0,4));X.dirty=!0;ma.setVAO(null);Qa.viewportWidth=r;Qa.viewportHeight=v;M&&(ga.cpuTime+=
performance.now()-Q);ea&&pa.destroyStream(Y);vd&&pa.destroyStream($c);Fd&&pa.destroyStream(Bd);Sb&&pa.destroyStream(ge);dd&&pa.destroyStream(dc);fc.unbind()},scope:function(a,e,c){var f,k,h,l,m,q,C,z,y,D,O,N,G,L,J,I,P,S,la,T,U,ka,W,aa,da,ma,cc,Ca,fa,qa,wa,sa,td,na,wc,Z,ed,Lc,qc,ab,Lb,Db,pc,Ta,Jc,$b,rc,nc,bc,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,Ea,hb,Sa,Gb,db,ec,Sb,Qc,Zb,Tb,Ka,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,ob,eb,lc,cb,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Zc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,
uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,Hb,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,kc,Ld,Id,jc,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me;f=a.viewport;k=f.x|0;h=f.y|0;l="width"in f?f.width|0:Qa.framebufferWidth-k;m="height"in f?f.height|0:Qa.framebufferHeight-h;q=Qa.viewportWidth;Qa.viewportWidth=l;C=Qa.viewportHeight;
Qa.viewportHeight=m;z=u[0];u[0]=k;y=u[1];u[1]=h;D=u[2];u[2]=l;O=u[3];u[3]=m;N=ea[0];ea[0]=0;G=ea[1];ea[1]=0;L=ea[2];ea[2]=0;J=ea[3];ea[3]=0;I=$a.blend_enable;$a.blend_enable=!0;P=Na[0];Na[0]=32774;S=Na[1];Na[1]=32774;la=Ha[0];Ha[0]=770;T=Ha[1];Ha[1]=771;U=Ha[2];Ha[2]=773;ka=Ha[3];Ha[3]=1;W=b.call(this,Qa,a,c);aa=$a.depth_enable;$a.depth_enable=W;da=a.viewport;ma=da.x|0;cc=da.y|0;Ca="width"in da?da.width|0:Qa.framebufferWidth-ma;fa="height"in da?da.height|0:Qa.framebufferHeight-cc;qa=V[0];V[0]=ma;
wa=V[1];V[1]=cc;sa=V[2];V[2]=Ca;td=V[3];V[3]=fa;na=$a.scissor_enable;$a.scissor_enable=!0;wc=$a.stencil_enable;$a.stencil_enable=!1;if(Z=X.profile)ed=performance.now(),ga.count++;Lc=K.offset;K.offset=0;qc=K.count;K.count=4;ab=a.count;Lb=K.instances;K.instances=ab;Db=K.primitive;K.primitive=5;pc=a.dashLength;Ta=t[23];t[23]=pc;Jc=a.dashTexture;$b=t[24];t[24]=Jc;rc=a.depth;nc=t[22];t[22]=rc;bc=a.id;Ac=t[31];t[31]=bc;Xb=a.miterLimit;Gc=t[32];t[32]=Xb;Rc=v.call(this,Qa,a,c);La=t[33];t[33]=Rc;Eb=a.opacity;
Wa=t[10];t[10]=Eb;ta=Qa.pixelRatio;Ea=t[34];t[34]=ta;hb=a.scale;Sa=t[6];t[6]=hb;Gb=a.scaleFract;db=t[7];t[7]=Gb;ec=a.thickness;Sb=t[21];t[21]=ec;Qc=a.translate;Zb=t[8];t[8]=Qc;Tb=a.translateFract;Ka=t[9];t[9]=Tb;Ub=A.call(this,Qa,a,c);Ma=t[3];t[3]=Ub;R.buffer=a.positionBuffer;pb=!1;ub=null;ib=0;Oa=!1;Ib=Dc=0;ob=1;eb=0;lc=5126;lb=kb=dc=cb=0;Ob(R)?(pb=!0,ub=pa.createStream(34962,R),lc=ub.dtype):(ub=pa.getBuffer(R))?lc=ub.dtype:"constant"in R?(ob=2,"number"===typeof R.constant?(dc=R.constant,kb=lb=cb=
0):(dc=0<R.constant.length?R.constant[0]:0,kb=1<R.constant.length?R.constant[1]:0,lb=2<R.constant.length?R.constant[2]:0,cb=3<R.constant.length?R.constant[3]:0)):(ub=Ob(R.buffer)?pa.createStream(34962,R.buffer):pa.getBuffer(R.buffer),lc="type"in R?va[R.type]:ub.dtype,Oa=!!R.normalized,Ib=R.size|0,Dc=R.offset|0,eb=R.stride|0,ib=R.divisor|0);ua=Y.buffer;Y.buffer=ub;qb=Y.divisor;Y.divisor=ib;xa=Y.normalized;Y.normalized=Oa;Ua=Y.offset;Y.offset=Dc;bb=Y.size;Y.size=Ib;Aa=Y.state;Y.state=ob;fb=Y.stride;
Y.stride=eb;Ia=Y.type;Y.type=lc;Ab=Y.w;Y.w=cb;zb=Y.x;Y.x=dc;Ra=Y.y;Y.y=kb;Kc=Y.z;Y.z=lb;ha.buffer=a.positionFractBuffer;Jb=!1;Za=null;Vb=0;ya=!1;Ja=Zc=0;Pb=1;gb=0;jb=5126;rb=Da=fc=za=0;Ob(ha)?(Jb=!0,Za=pa.createStream(34962,ha),jb=Za.dtype):(Za=pa.getBuffer(ha))?jb=Za.dtype:"constant"in ha?(Pb=2,"number"===typeof ha.constant?(fc=ha.constant,Da=rb=za=0):(fc=0<ha.constant.length?ha.constant[0]:0,Da=1<ha.constant.length?ha.constant[1]:0,rb=2<ha.constant.length?ha.constant[2]:0,za=3<ha.constant.length?
ha.constant[3]:0)):(Za=Ob(ha.buffer)?pa.createStream(34962,ha.buffer):pa.getBuffer(ha.buffer),jb="type"in ha?va[ha.type]:Za.dtype,ya=!!ha.normalized,Ja=ha.size|0,Zc=ha.offset|0,gb=ha.stride|0,Vb=ha.divisor|0);sb=H.buffer;H.buffer=Za;Xa=H.divisor;H.divisor=Vb;Ya=H.normalized;H.normalized=ya;mc=H.offset;H.offset=Zc;xc=H.size;H.size=Ja;uc=H.state;H.state=Pb;Va=H.stride;H.stride=gb;Mb=H.type;H.type=jb;Xc=H.w;H.w=za;Fa=H.x;H.x=fc;yc=H.y;H.y=Da;Pa=H.z;H.z=rb;ra.buffer=a.positionBuffer;Ba=!1;mb=null;vb=
0;Cb=!1;vc=tb=0;wb=1;Hb=0;sc=5126;sd=ld=Mc=ud=0;Ob(ra)?(Ba=!0,mb=pa.createStream(34962,ra),sc=mb.dtype):(mb=pa.getBuffer(ra))?sc=mb.dtype:"constant"in ra?(wb=2,"number"===typeof ra.constant?(Mc=ra.constant,ld=sd=ud=0):(Mc=0<ra.constant.length?ra.constant[0]:0,ld=1<ra.constant.length?ra.constant[1]:0,sd=2<ra.constant.length?ra.constant[2]:0,ud=3<ra.constant.length?ra.constant[3]:0)):(mb=Ob(ra.buffer)?pa.createStream(34962,ra.buffer):pa.getBuffer(ra.buffer),sc="type"in ra?va[ra.type]:mb.dtype,Cb=!!ra.normalized,
vc=ra.size|0,tb=ra.offset|0,Hb=ra.stride|0,vb=ra.divisor|0);Wb=F.buffer;F.buffer=mb;ac=F.divisor;F.divisor=vb;Qb=F.normalized;F.normalized=Cb;Ga=F.offset;F.offset=tb;Yb=F.size;F.size=vc;nb=F.state;F.state=wb;xb=F.stride;F.stride=Hb;Nb=F.type;F.type=sc;Rb=F.w;F.w=ud;gc=F.x;F.x=Mc;ic=F.y;F.y=ld;Ye=F.z;F.z=sd;E.buffer=a.positionFractBuffer;Bc=!1;Cc=null;Ec=0;Nc=!1;Sc=Yc=0;Oc=1;Kb=0;Fb=5126;hc=Tc=Hc=Pc=0;Ob(E)?(Bc=!0,Cc=pa.createStream(34962,E),Fb=Cc.dtype):(Cc=pa.getBuffer(E))?Fb=Cc.dtype:"constant"in
E?(Oc=2,"number"===typeof E.constant?(Hc=E.constant,Tc=hc=Pc=0):(Hc=0<E.constant.length?E.constant[0]:0,Tc=1<E.constant.length?E.constant[1]:0,hc=2<E.constant.length?E.constant[2]:0,Pc=3<E.constant.length?E.constant[3]:0)):(Cc=Ob(E.buffer)?pa.createStream(34962,E.buffer):pa.getBuffer(E.buffer),Fb="type"in E?va[E.type]:Cc.dtype,Nc=!!E.normalized,Sc=E.size|0,Yc=E.offset|0,Kb=E.stride|0,Ec=E.divisor|0);Vc=w.buffer;w.buffer=Cc;nd=w.divisor;w.divisor=Ec;gd=w.normalized;w.normalized=Nc;oe=w.offset;w.offset=
Yc;Wc=w.size;w.size=Sc;kc=w.state;w.state=Oc;Ld=w.stride;w.stride=Kb;Id=w.type;w.type=Fb;jc=w.w;w.w=Pc;Ud=w.x;w.x=Hc;Jd=w.y;w.y=Tc;Gd=w.z;w.z=hc;p.buffer=a.colorBuffer;bd=!1;Fc=null;od=0;hd=!1;pd=ad=0;yd=1;zd=0;ye=5126;de=ee=uf=te=0;Ob(p)?(bd=!0,Fc=pa.createStream(34962,p),ye=Fc.dtype):(Fc=pa.getBuffer(p))?ye=Fc.dtype:"constant"in p?(yd=2,"number"===typeof p.constant?(uf=p.constant,ee=de=te=0):(uf=0<p.constant.length?p.constant[0]:0,ee=1<p.constant.length?p.constant[1]:0,de=2<p.constant.length?p.constant[2]:
0,te=3<p.constant.length?p.constant[3]:0)):(Fc=Ob(p.buffer)?pa.createStream(34962,p.buffer):pa.getBuffer(p.buffer),ye="type"in p?va[p.type]:Fc.dtype,hd=!!p.normalized,pd=p.size|0,ad=p.offset|0,zd=p.stride|0,od=p.divisor|0);be=B.buffer;B.buffer=Fc;ue=B.divisor;B.divisor=od;$d=B.normalized;B.normalized=hd;he=B.offset;B.offset=ad;zc=B.size;B.size=pd;Uc=B.state;B.state=yd;pe=B.stride;B.stride=zd;ke=B.type;B.type=ye;Hd=B.w;B.w=te;Md=B.x;B.x=uf;Nd=B.y;B.y=ee;Od=B.z;B.z=de;ie=M.buffer;M.buffer=g;Ce=M.divisor;
M.divisor=0;ze=M.normalized;M.normalized=!1;me=M.offset;M.offset=0;Oe=M.size;M.size=0;Pe=M.state;M.state=1;Le=M.stride;M.stride=8;qe=M.type;M.type=5126;De=M.w;M.w=0;Ge=M.x;M.x=0;He=M.y;M.y=0;Ie=M.z;M.z=0;Ee=n.buffer;n.buffer=d;Kd=n.divisor;n.divisor=0;Rd=n.normalized;n.normalized=!1;Yd=n.offset;n.offset=4;ae=n.size;n.size=0;Je=n.state;n.state=1;Cd=n.stride;n.stride=8;Pd=n.type;n.type=5126;Ae=n.w;n.w=0;Ke=n.x;n.x=0;pf=n.y;n.y=0;Xe=n.z;n.z=0;Qe=Q.vert;Q.vert=20;Me=Q.frag;Q.frag=19;X.dirty=!0;e(Qa,a,
c);Qa.viewportWidth=q;Qa.viewportHeight=C;u[0]=z;u[1]=y;u[2]=D;u[3]=O;ea[0]=N;ea[1]=G;ea[2]=L;ea[3]=J;$a.blend_enable=I;Na[0]=P;Na[1]=S;Ha[0]=la;Ha[1]=T;Ha[2]=U;Ha[3]=ka;$a.depth_enable=aa;V[0]=qa;V[1]=wa;V[2]=sa;V[3]=td;$a.scissor_enable=na;$a.stencil_enable=wc;Z&&(ga.cpuTime+=performance.now()-ed);K.offset=Lc;K.count=qc;K.instances=Lb;K.primitive=Db;t[23]=Ta;t[24]=$b;t[22]=nc;t[31]=Ac;t[32]=Gc;t[33]=La;t[10]=Wa;t[34]=Ea;t[6]=Sa;t[7]=db;t[21]=Sb;t[8]=Zb;t[9]=Ka;t[3]=Ma;pb&&pa.destroyStream(ub);Y.buffer=
ua;Y.divisor=qb;Y.normalized=xa;Y.offset=Ua;Y.size=bb;Y.state=Aa;Y.stride=fb;Y.type=Ia;Y.w=Ab;Y.x=zb;Y.y=Ra;Y.z=Kc;Jb&&pa.destroyStream(Za);H.buffer=sb;H.divisor=Xa;H.normalized=Ya;H.offset=mc;H.size=xc;H.state=uc;H.stride=Va;H.type=Mb;H.w=Xc;H.x=Fa;H.y=yc;H.z=Pa;Ba&&pa.destroyStream(mb);F.buffer=Wb;F.divisor=ac;F.normalized=Qb;F.offset=Ga;F.size=Yb;F.state=nb;F.stride=xb;F.type=Nb;F.w=Rb;F.x=gc;F.y=ic;F.z=Ye;Bc&&pa.destroyStream(Cc);w.buffer=Vc;w.divisor=nd;w.normalized=gd;w.offset=oe;w.size=Wc;
w.state=kc;w.stride=Ld;w.type=Id;w.w=jc;w.x=Ud;w.y=Jd;w.z=Gd;bd&&pa.destroyStream(Fc);B.buffer=be;B.divisor=ue;B.normalized=$d;B.offset=he;B.size=zc;B.state=Uc;B.stride=pe;B.type=ke;B.w=Hd;B.x=Md;B.y=Nd;B.z=Od;M.buffer=ie;M.divisor=Ce;M.normalized=ze;M.offset=me;M.size=Oe;M.state=Pe;M.stride=Le;M.type=qe;M.w=De;M.x=Ge;M.y=He;M.z=Ie;n.buffer=Ee;n.divisor=Kd;n.normalized=Rd;n.offset=Yd;n.size=ae;n.state=Je;n.stride=Cd;n.type=Pd;n.w=Ae;n.x=Ke;n.y=pf;n.z=Xe;Q.vert=Qe;Q.frag=Me;X.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(c,
ga,q,O,g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb,kc,pa,Qa,X){var K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa,bc,cc,Qc,td,wc,V,C,la,Ca,Lb,nc,Zc,D,u,ka,va,R,ha,ra,E,p,ca,x,ja,ia,k;K=c.attributes;N=c.buffer;P=c.context;sa=c.current;J=c.draw;Ob=c.elements;$a=c.extensions;Q=c.framebuffer;t=c.gl;ma=c.isBufferArgs;ea=c.next;Ea=c.shader;Na=c.uniforms;Hb=c.vao;Ha=ea.blend_color;S=sa.blend_color;ob=ea.blend_equation;da=sa.blend_equation;wa=ea.blend_func;bc=sa.blend_func;
cc=ea.colorMask;Qc=sa.colorMask;td=ea.depth_range;wc=sa.depth_range;V=ea.polygonOffset_offset;C=sa.polygonOffset_offset;la=ea.sample_coverage;Ca=sa.sample_coverage;Lb=ea.scissor_box;nc=sa.scissor_box;Zc=ea.stencil_func;D=sa.stencil_func;u=ea.stencil_opBack;ka=sa.stencil_opBack;va=ea.stencil_opFront;R=sa.stencil_opFront;ha=ea.viewport;ra=sa.viewport;E={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};p={divisor:1,offset:0,stride:4};ca={divisor:1,offset:8,
stride:8};x={divisor:1,offset:4,stride:4};ja={divisor:1,offset:16,stride:8};ia={divisor:1,offset:24,stride:8};k={divisor:1,offset:0,stride:8};return{batch:function(b,c){var r,n,q,w,v,y;r=Q.next;r!==Q.cur&&(r?t.bindFramebuffer(36160,r.framebuffer):t.bindFramebuffer(36160,null),Q.cur=r);if(sa.dirty){var B,O,G,F,H,A,M,ha,Y,aa,wa,oa,Lb,Ea,Na,Sd,Td,Ha,ob,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab;B=ea.dither;B!==sa.dither&&(B?t.enable(3024):t.disable(3024),sa.dither=B);O=ea.depth_func;O!==sa.depth_func&&(t.depthFunc(O),
sa.depth_func=O);G=td[0];F=td[1];if(G!==wc[0]||F!==wc[1])t.depthRange(G,F),wc[0]=G,wc[1]=F;H=ea.depth_mask;H!==sa.depth_mask&&(t.depthMask(H),sa.depth_mask=H);A=cc[0];M=cc[1];ha=cc[2];Y=cc[3];if(A!==Qc[0]||M!==Qc[1]||ha!==Qc[2]||Y!==Qc[3])t.colorMask(A,M,ha,Y),Qc[0]=A,Qc[1]=M,Qc[2]=ha,Qc[3]=Y;aa=ea.frontFace;aa!==sa.frontFace&&(t.frontFace(aa),sa.frontFace=aa);wa=ea.lineWidth;wa!==sa.lineWidth&&(t.lineWidth(wa),sa.lineWidth=wa);oa=ea.polygonOffset_enable;oa!==sa.polygonOffset_enable&&(oa?t.enable(32823):
t.disable(32823),sa.polygonOffset_enable=oa);Lb=V[0];Ea=V[1];if(Lb!==C[0]||Ea!==C[1])t.polygonOffset(Lb,Ea),C[0]=Lb,C[1]=Ea;Na=ea.sample_alpha;Na!==sa.sample_alpha&&(Na?t.enable(32926):t.disable(32926),sa.sample_alpha=Na);Sd=ea.sample_enable;Sd!==sa.sample_enable&&(Sd?t.enable(32928):t.disable(32928),sa.sample_enable=Sd);Td=la[0];Ha=la[1];if(Td!==Ca[0]||Ha!==Ca[1])t.sampleCoverage(Td,Ha),Ca[0]=Td,Ca[1]=Ha;ob=ea.stencil_mask;ob!==sa.stencil_mask&&(t.stencilMask(ob),sa.stencil_mask=ob);rd=Zc[0];jd=
Zc[1];vd=Zc[2];if(rd!==D[0]||jd!==D[1]||vd!==D[2])t.stencilFunc(rd,jd,vd),D[0]=rd,D[1]=jd,D[2]=vd;$c=va[0];kd=va[1];oc=va[2];id=va[3];if($c!==R[0]||kd!==R[1]||oc!==R[2]||id!==R[3])t.stencilOpSeparate($c,kd,oc,id),R[0]=$c,R[1]=kd,R[2]=oc,R[3]=id;ed=u[0];Lc=u[1];qc=u[2];ab=u[3];if(ed!==ka[0]||Lc!==ka[1]||qc!==ka[2]||ab!==ka[3])t.stencilOpSeparate(ed,Lc,qc,ab),ka[0]=ed,ka[1]=Lc,ka[2]=qc,ka[3]=ab}t.blendColor(0,0,0,0);S[0]=0;S[1]=0;S[2]=0;S[3]=0;t.enable(3042);sa.blend_enable=!0;t.blendEquationSeparate(32774,
32774);da[0]=32774;da[1]=32774;t.blendFuncSeparate(770,771,773,1);bc[0]=770;bc[1]=771;bc[2]=773;bc[3]=1;t.enable(2884);sa.cull_enable=!0;t.cullFace(1029);sa.cull_face=1029;t.enable(3089);sa.scissor_enable=!0;t.disable(2960);sa.stencil_enable=!1;if(n=sa.profile)q=performance.now(),ga.count+=c;t.useProgram(I.program);w=$a.angle_instanced_arrays;var Ic,Db,pc,Ta,Jc;Hb.setVAO(null);Ic=fa.location;Db=K[Ic];Db.buffer||t.enableVertexAttribArray(Ic);if(5126!==Db.type||1!==Db.size||Db.buffer!==g||!1!==Db.normalized||
0!==Db.offset||8!==Db.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(Ic,1,5126,!1,8,0),Db.type=5126,Db.size=1,Db.buffer=g,Db.normalized=!1,Db.offset=0,Db.stride=8;0!==Db.divisor&&(w.vertexAttribDivisorANGLE(Ic,0),Db.divisor=0);pc=a.location;Ta=K[pc];Ta.buffer||t.enableVertexAttribArray(pc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==d||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)t.bindBuffer(34962,d.buffer),t.vertexAttribPointer(pc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=d,
Ta.normalized=!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(w.vertexAttribDivisorANGLE(pc,0),Ta.divisor=0);(Jc=J.elements)?t.bindBuffer(34963,Jc.buffer.buffer):Hb.currentVAO&&(Jc=Ob.getElements(Hb.currentVAO.elements))&&t.bindBuffer(34963,Jc.buffer.buffer);for(v=0;v<c;++v){y=b[v];var $b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,
yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,jc,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc;$b=y.viewport;rc=$b.x|0;Fd=$b.y|0;Bd="width"in $b?$b.width|0:P.framebufferWidth-rc;Ac="height"in $b?$b.height|0:P.framebufferHeight-Fd;Xb=P.viewportWidth;P.viewportWidth=Bd;Gc=P.viewportHeight;P.viewportHeight=Ac;t.viewport(rc,Fd,Bd,Ac);ra[0]=rc;ra[1]=Fd;ra[2]=Bd;ra[3]=Ac;(Rc=Z.call(this,P,
y,v))?t.enable(2929):t.disable(2929);sa.depth_enable=Rc;La=y.viewport;Eb=La.x|0;Wa=La.y|0;ta="width"in La?La.width|0:P.framebufferWidth-Eb;md="height"in La?La.height|0:P.framebufferHeight-Wa;t.scissor(Eb,Wa,ta,md);nc[0]=Eb;nc[1]=Wa;nc[2]=ta;nc[3]=md;ca.buffer=y.positionBuffer;hb=!1;Sa=null;Gb=0;db=!1;Sb=ec=0;ge=1;Zb=0;Tb=5126;pb=Ma=Ub=fd=0;ma(ca)?(hb=!0,Sa=N.createStream(34962,ca),Tb=Sa.dtype):(Sa=N.getBuffer(ca))?Tb=Sa.dtype:"constant"in ca?(ge=2,"number"===typeof ca.constant?(Ub=ca.constant,Ma=
pb=fd=0):(Ub=0<ca.constant.length?ca.constant[0]:0,Ma=1<ca.constant.length?ca.constant[1]:0,pb=2<ca.constant.length?ca.constant[2]:0,fd=3<ca.constant.length?ca.constant[3]:0)):(Sa=ma(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),Tb="type"in ca?E[ca.type]:Sa.dtype,db=!!ca.normalized,Sb=ca.size|0,ec=ca.offset|0,Zb=ca.stride|0,Gb=ca.divisor|0);ub=z.location;ib=K[ub];if(1===ge){ib.buffer||t.enableVertexAttribArray(ub);Oa=Sb||2;if(ib.type!==Tb||ib.size!==Oa||ib.buffer!==Sa||ib.normalized!==
db||ib.offset!==ec||ib.stride!==Zb)t.bindBuffer(34962,Sa.buffer),t.vertexAttribPointer(ub,Oa,Tb,db,Zb,ec),ib.type=Tb,ib.size=Oa,ib.buffer=Sa,ib.normalized=db,ib.offset=ec,ib.stride=Zb;ib.divisor!==Gb&&(w.vertexAttribDivisorANGLE(ub,Gb),ib.divisor=Gb)}else if(ib.buffer&&(t.disableVertexAttribArray(ub),ib.buffer=null),ib.x!==Ub||ib.y!==Ma||ib.z!==pb||ib.w!==fd)t.vertexAttrib4f(ub,Ub,Ma,pb,fd),ib.x=Ub,ib.y=Ma,ib.z=pb,ib.w=fd;ja.buffer=y.positionBuffer;Dc=!1;Ib=null;cd=0;eb=!1;dd=lc=0;dc=1;kb=0;lb=5126;
Ua=xa=qb=ua=0;ma(ja)?(Dc=!0,Ib=N.createStream(34962,ja),lb=Ib.dtype):(Ib=N.getBuffer(ja))?lb=Ib.dtype:"constant"in ja?(dc=2,"number"===typeof ja.constant?(qb=ja.constant,xa=Ua=ua=0):(qb=0<ja.constant.length?ja.constant[0]:0,xa=1<ja.constant.length?ja.constant[1]:0,Ua=2<ja.constant.length?ja.constant[2]:0,ua=3<ja.constant.length?ja.constant[3]:0)):(Ib=ma(ja.buffer)?N.createStream(34962,ja.buffer):N.getBuffer(ja.buffer),lb="type"in ja?E[ja.type]:Ib.dtype,eb=!!ja.normalized,dd=ja.size|0,lc=ja.offset|
0,kb=ja.stride|0,cd=ja.divisor|0);bb=U.location;Aa=K[bb];if(1===dc){Aa.buffer||t.enableVertexAttribArray(bb);fb=dd||2;if(Aa.type!==lb||Aa.size!==fb||Aa.buffer!==Ib||Aa.normalized!==eb||Aa.offset!==lc||Aa.stride!==kb)t.bindBuffer(34962,Ib.buffer),t.vertexAttribPointer(bb,fb,lb,eb,kb,lc),Aa.type=lb,Aa.size=fb,Aa.buffer=Ib,Aa.normalized=eb,Aa.offset=lc,Aa.stride=kb;Aa.divisor!==cd&&(w.vertexAttribDivisorANGLE(bb,cd),Aa.divisor=cd)}else if(Aa.buffer&&(t.disableVertexAttribArray(bb),Aa.buffer=null),Aa.x!==
qb||Aa.y!==xa||Aa.z!==Ua||Aa.w!==ua)t.vertexAttrib4f(bb,qb,xa,Ua,ua),Aa.x=qb,Aa.y=xa,Aa.z=Ua,Aa.w=ua;ia.buffer=y.positionBuffer;Ia=!1;Ab=null;zb=0;Ra=!1;Jb=Kc=0;Za=1;Vb=0;ya=5126;gb=Pb=Ja=ce=0;ma(ia)?(Ia=!0,Ab=N.createStream(34962,ia),ya=Ab.dtype):(Ab=N.getBuffer(ia))?ya=Ab.dtype:"constant"in ia?(Za=2,"number"===typeof ia.constant?(Ja=ia.constant,Pb=gb=ce=0):(Ja=0<ia.constant.length?ia.constant[0]:0,Pb=1<ia.constant.length?ia.constant[1]:0,gb=2<ia.constant.length?ia.constant[2]:0,ce=3<ia.constant.length?
ia.constant[3]:0)):(Ab=ma(ia.buffer)?N.createStream(34962,ia.buffer):N.getBuffer(ia.buffer),ya="type"in ia?E[ia.type]:Ab.dtype,Ra=!!ia.normalized,Jb=ia.size|0,Kc=ia.offset|0,Vb=ia.stride|0,zb=ia.divisor|0);jb=na.location;za=K[jb];if(1===Za){za.buffer||t.enableVertexAttribArray(jb);fc=Jb||2;if(za.type!==ya||za.size!==fc||za.buffer!==Ab||za.normalized!==Ra||za.offset!==Kc||za.stride!==Vb)t.bindBuffer(34962,Ab.buffer),t.vertexAttribPointer(jb,fc,ya,Ra,Vb,Kc),za.type=ya,za.size=fc,za.buffer=Ab,za.normalized=
Ra,za.offset=Kc,za.stride=Vb;za.divisor!==zb&&(w.vertexAttribDivisorANGLE(jb,zb),za.divisor=zb)}else if(za.buffer&&(t.disableVertexAttribArray(jb),za.buffer=null),za.x!==Ja||za.y!==Pb||za.z!==gb||za.w!==ce)t.vertexAttrib4f(jb,Ja,Pb,gb,ce),za.x=Ja,za.y=Pb,za.z=gb,za.w=ce;k.buffer=y.positionBuffer;Da=!1;rb=null;sb=0;Xa=!1;mc=Ya=0;xc=1;uc=0;Va=5126;yc=Fa=Xc=Mb=0;ma(k)?(Da=!0,rb=N.createStream(34962,k),Va=rb.dtype):(rb=N.getBuffer(k))?Va=rb.dtype:"constant"in k?(xc=2,"number"===typeof k.constant?(Xc=
k.constant,Fa=yc=Mb=0):(Xc=0<k.constant.length?k.constant[0]:0,Fa=1<k.constant.length?k.constant[1]:0,yc=2<k.constant.length?k.constant[2]:0,Mb=3<k.constant.length?k.constant[3]:0)):(rb=ma(k.buffer)?N.createStream(34962,k.buffer):N.getBuffer(k.buffer),Va="type"in k?E[k.type]:rb.dtype,Xa=!!k.normalized,mc=k.size|0,Ya=k.offset|0,uc=k.stride|0,sb=k.divisor|0);Pa=cb.location;Ba=K[Pa];if(1===xc){Ba.buffer||t.enableVertexAttribArray(Pa);mb=mc||2;if(Ba.type!==Va||Ba.size!==mb||Ba.buffer!==rb||Ba.normalized!==
Xa||Ba.offset!==Ya||Ba.stride!==uc)t.bindBuffer(34962,rb.buffer),t.vertexAttribPointer(Pa,mb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=mb,Ba.buffer=rb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==sb&&(w.vertexAttribDivisorANGLE(Pa,sb),Ba.divisor=sb)}else if(Ba.buffer&&(t.disableVertexAttribArray(Pa),Ba.buffer=null),Ba.x!==Xc||Ba.y!==Fa||Ba.z!==yc||Ba.w!==Mb)t.vertexAttrib4f(Pa,Xc,Fa,yc,Mb),Ba.x=Xc,Ba.y=Fa,Ba.z=yc,Ba.w=Mb;p.buffer=y.colorBuffer;vb=!1;Cb=null;tb=0;vc=!1;wd=wb=0;sc=1;ud=0;Mc=5126;ac=
Wb=sd=ld=0;ma(p)?(vb=!0,Cb=N.createStream(34962,p),Mc=Cb.dtype):(Cb=N.getBuffer(p))?Mc=Cb.dtype:"constant"in p?(sc=2,"number"===typeof p.constant?(sd=p.constant,Wb=ac=ld=0):(sd=0<p.constant.length?p.constant[0]:0,Wb=1<p.constant.length?p.constant[1]:0,ac=2<p.constant.length?p.constant[2]:0,ld=3<p.constant.length?p.constant[3]:0)):(Cb=ma(p.buffer)?N.createStream(34962,p.buffer):N.getBuffer(p.buffer),Mc="type"in p?E[p.type]:Cb.dtype,vc=!!p.normalized,wd=p.size|0,wb=p.offset|0,ud=p.stride|0,tb=p.divisor|
0);Qb=e.location;Ga=K[Qb];if(1===sc){Ga.buffer||t.enableVertexAttribArray(Qb);Yb=wd||4;if(Ga.type!==Mc||Ga.size!==Yb||Ga.buffer!==Cb||Ga.normalized!==vc||Ga.offset!==wb||Ga.stride!==ud)t.bindBuffer(34962,Cb.buffer),t.vertexAttribPointer(Qb,Yb,Mc,vc,ud,wb),Ga.type=Mc,Ga.size=Yb,Ga.buffer=Cb,Ga.normalized=vc,Ga.offset=wb,Ga.stride=ud;Ga.divisor!==tb&&(w.vertexAttribDivisorANGLE(Qb,tb),Ga.divisor=tb)}else if(Ga.buffer&&(t.disableVertexAttribArray(Qb),Ga.buffer=null),Ga.x!==sd||Ga.y!==Wb||Ga.z!==ac||
Ga.w!==ld)t.vertexAttrib4f(Qb,sd,Wb,ac,ld),Ga.x=sd,Ga.y=Wb,Ga.z=ac,Ga.w=ld;x.buffer=y.colorBuffer;nb=!1;xb=null;Nb=0;Rb=!1;ic=gc=0;Ye=1;Bc=0;Cc=5126;Sc=Yc=Nc=Ec=0;ma(x)?(nb=!0,xb=N.createStream(34962,x),Cc=xb.dtype):(xb=N.getBuffer(x))?Cc=xb.dtype:"constant"in x?(Ye=2,"number"===typeof x.constant?(Nc=x.constant,Yc=Sc=Ec=0):(Nc=0<x.constant.length?x.constant[0]:0,Yc=1<x.constant.length?x.constant[1]:0,Sc=2<x.constant.length?x.constant[2]:0,Ec=3<x.constant.length?x.constant[3]:0)):(xb=ma(x.buffer)?
N.createStream(34962,x.buffer):N.getBuffer(x.buffer),Cc="type"in x?E[x.type]:xb.dtype,Rb=!!x.normalized,ic=x.size|0,gc=x.offset|0,Bc=x.stride|0,Nb=x.divisor|0);Oc=T.location;Kb=K[Oc];if(1===Ye){Kb.buffer||t.enableVertexAttribArray(Oc);Fb=ic||4;if(Kb.type!==Cc||Kb.size!==Fb||Kb.buffer!==xb||Kb.normalized!==Rb||Kb.offset!==gc||Kb.stride!==Bc)t.bindBuffer(34962,xb.buffer),t.vertexAttribPointer(Oc,Fb,Cc,Rb,Bc,gc),Kb.type=Cc,Kb.size=Fb,Kb.buffer=xb,Kb.normalized=Rb,Kb.offset=gc,Kb.stride=Bc;Kb.divisor!==
Nb&&(w.vertexAttribDivisorANGLE(Oc,Nb),Kb.divisor=Nb)}else if(Kb.buffer&&(t.disableVertexAttribArray(Oc),Kb.buffer=null),Kb.x!==Nc||Kb.y!==Yc||Kb.z!==Sc||Kb.w!==Ec)t.vertexAttrib4f(Oc,Nc,Yc,Sc,Ec),Kb.x=Nc,Kb.y=Yc,Kb.z=Sc,Kb.w=Ec;Pc=y.scale;Hc=Pc[0];hc=Pc[1];v&&Tc===Hc&&Vc===hc||(Tc=Hc,Vc=hc,t.uniform2f(kc.location,Hc,hc));nd=y.translate;gd=nd[0];Wc=nd[1];v&&oe===gd&&jc===Wc||(oe=gd,jc=Wc,t.uniform2f(Qa.location,gd,Wc));Ld=y.thickness;v&&we===Ld||(we=Ld,t.uniform1f(pa.location,Ld));xe=y.depth;v&&Ud===
xe||(Ud=xe,t.uniform1f(L.location,xe));Jd=f.call(this,P,y,v);Gd=Jd[0];Fc=Jd[1];hd=Jd[2];pd=Jd[3];v&&bd===Gd&&od===Fc&&ad===hd&&yd===pd||(bd=Gd,od=Fc,ad=hd,yd=pd,t.uniform4f(X.location,Gd,Fc,hd,pd));zd=y.miterLimit;v&&ye===zd||(ye=zd,t.uniform1f(l.location,zd));te=h.call(this,P,y,v);v&&uf===te||(uf=te,t.uniform1f(W.location,te));ee=y.dashLength;v&&de===ee||(de=ee,t.uniform1f(m.location,ee));be=y.opacity;v&&ue===be||(ue=be,t.uniform1f(Ka.location,be));($d=y.dashTexture)&&"framebuffer"===$d._reglType&&
($d=$d.color[0]);he=$d._texture;t.uniform1i(qa.location,he.bind());zc=y.count;0<zc?Jc?w.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),zc):w.drawArraysInstancedANGLE(5,0,4,zc):0>zc&&(Jc?t.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):t.drawArrays(5,0,4));P.viewportWidth=Xb;P.viewportHeight=Gc;hb&&N.destroyStream(Sa);Dc&&N.destroyStream(Ib);Ia&&N.destroyStream(Ab);Da&&N.destroyStream(rb);vb&&N.destroyStream(Cb);nb&&N.destroyStream(xb);he.unbind()}sa.dirty=!0;Hb.setVAO(null);n&&(ga.cpuTime+=
performance.now()-q)},draw:function(c){var f,h,n,w,v,B,G,F,H,A,I,M,ha,Y,aa,wa,oa,Lb,Z,Ea,Na,Ha,Sd,Td,ob,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd;f=Q.next;f!==Q.cur&&(f?t.bindFramebuffer(36160,f.framebuffer):t.bindFramebuffer(36160,null),Q.cur=
f);if(sa.dirty){var sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc;sc=ea.dither;sc!==sa.dither&&(sc?t.enable(3024):t.disable(3024),sa.dither=sc);ud=ea.depth_func;ud!==sa.depth_func&&(t.depthFunc(ud),sa.depth_func=ud);Mc=td[0];ld=td[1];if(Mc!==wc[0]||ld!==wc[1])t.depthRange(Mc,ld),wc[0]=Mc,wc[1]=ld;sd=ea.depth_mask;sd!==sa.depth_mask&&(t.depthMask(sd),sa.depth_mask=sd);Wb=cc[0];ac=cc[1];Qb=cc[2];Ga=cc[3];if(Wb!==Qc[0]||ac!==Qc[1]||Qb!==Qc[2]||Ga!==Qc[3])t.colorMask(Wb,
ac,Qb,Ga),Qc[0]=Wb,Qc[1]=ac,Qc[2]=Qb,Qc[3]=Ga;Yb=ea.frontFace;Yb!==sa.frontFace&&(t.frontFace(Yb),sa.frontFace=Yb);nb=ea.lineWidth;nb!==sa.lineWidth&&(t.lineWidth(nb),sa.lineWidth=nb);xb=ea.polygonOffset_enable;xb!==sa.polygonOffset_enable&&(xb?t.enable(32823):t.disable(32823),sa.polygonOffset_enable=xb);Nb=V[0];Rb=V[1];if(Nb!==C[0]||Rb!==C[1])t.polygonOffset(Nb,Rb),C[0]=Nb,C[1]=Rb;gc=ea.sample_alpha;gc!==sa.sample_alpha&&(gc?t.enable(32926):t.disable(32926),sa.sample_alpha=gc);ic=ea.sample_enable;
ic!==sa.sample_enable&&(ic?t.enable(32928):t.disable(32928),sa.sample_enable=ic);Ye=la[0];Bc=la[1];if(Ye!==Ca[0]||Bc!==Ca[1])t.sampleCoverage(Ye,Bc),Ca[0]=Ye,Ca[1]=Bc;Cc=ea.stencil_mask;Cc!==sa.stencil_mask&&(t.stencilMask(Cc),sa.stencil_mask=Cc);Ec=Zc[0];Nc=Zc[1];Yc=Zc[2];if(Ec!==D[0]||Nc!==D[1]||Yc!==D[2])t.stencilFunc(Ec,Nc,Yc),D[0]=Ec,D[1]=Nc,D[2]=Yc;Sc=va[0];Oc=va[1];Kb=va[2];Fb=va[3];if(Sc!==R[0]||Oc!==R[1]||Kb!==R[2]||Fb!==R[3])t.stencilOpSeparate(Sc,Oc,Kb,Fb),R[0]=Sc,R[1]=Oc,R[2]=Kb,R[3]=
Fb;Pc=u[0];Hc=u[1];Tc=u[2];hc=u[3];if(Pc!==ka[0]||Hc!==ka[1]||Tc!==ka[2]||hc!==ka[3])t.stencilOpSeparate(Pc,Hc,Tc,hc),ka[0]=Pc,ka[1]=Hc,ka[2]=Tc,ka[3]=hc}h=c.viewport;n=h.x|0;w=h.y|0;v="width"in h?h.width|0:P.framebufferWidth-n;B="height"in h?h.height|0:P.framebufferHeight-w;G=P.viewportWidth;P.viewportWidth=v;F=P.viewportHeight;P.viewportHeight=B;t.viewport(n,w,v,B);ra[0]=n;ra[1]=w;ra[2]=v;ra[3]=B;t.blendColor(0,0,0,0);S[0]=0;S[1]=0;S[2]=0;S[3]=0;t.enable(3042);sa.blend_enable=!0;t.blendEquationSeparate(32774,
32774);da[0]=32774;da[1]=32774;t.blendFuncSeparate(770,771,773,1);bc[0]=770;bc[1]=771;bc[2]=773;bc[3]=1;t.enable(2884);sa.cull_enable=!0;t.cullFace(1029);sa.cull_face=1029;(H=q.call(this,P,c,0))?t.enable(2929):t.disable(2929);sa.depth_enable=H;A=c.viewport;I=A.x|0;M=A.y|0;ha="width"in A?A.width|0:P.framebufferWidth-I;Y="height"in A?A.height|0:P.framebufferHeight-M;t.scissor(I,M,ha,Y);nc[0]=I;nc[1]=M;nc[2]=ha;nc[3]=Y;t.enable(3089);sa.scissor_enable=!0;t.disable(2960);sa.stencil_enable=!1;if(aa=sa.profile)wa=
performance.now(),ga.count++;t.useProgram(O.program);oa=$a.angle_instanced_arrays;Hb.setVAO(null);ca.buffer=c.positionBuffer;Lb=!1;Z=null;Ea=0;Na=!1;Sd=Ha=0;Td=1;ob=0;Xd=5126;$c=vd=jd=rd=0;ma(ca)?(Lb=!0,Z=N.createStream(34962,ca),Xd=Z.dtype):(Z=N.getBuffer(ca))?Xd=Z.dtype:"constant"in ca?(Td=2,"number"===typeof ca.constant?(jd=ca.constant,vd=$c=rd=0):(jd=0<ca.constant.length?ca.constant[0]:0,vd=1<ca.constant.length?ca.constant[1]:0,$c=2<ca.constant.length?ca.constant[2]:0,rd=3<ca.constant.length?
ca.constant[3]:0)):(Z=ma(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),Xd="type"in ca?E[ca.type]:Z.dtype,Na=!!ca.normalized,Sd=ca.size|0,Ha=ca.offset|0,ob=ca.stride|0,Ea=ca.divisor|0);kd=z.location;oc=K[kd];if(1===Td){oc.buffer||t.enableVertexAttribArray(kd);id=Sd||2;if(oc.type!==Xd||oc.size!==id||oc.buffer!==Z||oc.normalized!==Na||oc.offset!==Ha||oc.stride!==ob)t.bindBuffer(34962,Z.buffer),t.vertexAttribPointer(kd,id,Xd,Na,ob,Ha),oc.type=Xd,oc.size=id,oc.buffer=Z,oc.normalized=
Na,oc.offset=Ha,oc.stride=ob;oc.divisor!==Ea&&(oa.vertexAttribDivisorANGLE(kd,Ea),oc.divisor=Ea)}else if(oc.buffer&&(t.disableVertexAttribArray(kd),oc.buffer=null),oc.x!==jd||oc.y!==vd||oc.z!==$c||oc.w!==rd)t.vertexAttrib4f(kd,jd,vd,$c,rd),oc.x=jd,oc.y=vd,oc.z=$c,oc.w=rd;ja.buffer=c.positionBuffer;ed=!1;Lc=null;qc=0;ab=!1;Db=Ic=0;pc=1;Ta=0;Jc=5126;Bd=Fd=rc=$b=0;ma(ja)?(ed=!0,Lc=N.createStream(34962,ja),Jc=Lc.dtype):(Lc=N.getBuffer(ja))?Jc=Lc.dtype:"constant"in ja?(pc=2,"number"===typeof ja.constant?
(rc=ja.constant,Fd=Bd=$b=0):(rc=0<ja.constant.length?ja.constant[0]:0,Fd=1<ja.constant.length?ja.constant[1]:0,Bd=2<ja.constant.length?ja.constant[2]:0,$b=3<ja.constant.length?ja.constant[3]:0)):(Lc=ma(ja.buffer)?N.createStream(34962,ja.buffer):N.getBuffer(ja.buffer),Jc="type"in ja?E[ja.type]:Lc.dtype,ab=!!ja.normalized,Db=ja.size|0,Ic=ja.offset|0,Ta=ja.stride|0,qc=ja.divisor|0);Ac=U.location;Xb=K[Ac];if(1===pc){Xb.buffer||t.enableVertexAttribArray(Ac);Gc=Db||2;if(Xb.type!==Jc||Xb.size!==Gc||Xb.buffer!==
Lc||Xb.normalized!==ab||Xb.offset!==Ic||Xb.stride!==Ta)t.bindBuffer(34962,Lc.buffer),t.vertexAttribPointer(Ac,Gc,Jc,ab,Ta,Ic),Xb.type=Jc,Xb.size=Gc,Xb.buffer=Lc,Xb.normalized=ab,Xb.offset=Ic,Xb.stride=Ta;Xb.divisor!==qc&&(oa.vertexAttribDivisorANGLE(Ac,qc),Xb.divisor=qc)}else if(Xb.buffer&&(t.disableVertexAttribArray(Ac),Xb.buffer=null),Xb.x!==rc||Xb.y!==Fd||Xb.z!==Bd||Xb.w!==$b)t.vertexAttrib4f(Ac,rc,Fd,Bd,$b),Xb.x=rc,Xb.y=Fd,Xb.z=Bd,Xb.w=$b;ia.buffer=c.positionBuffer;Rc=!1;La=null;Eb=0;Wa=!1;md=
ta=0;hb=1;Sa=0;Gb=5126;ge=Sb=ec=db=0;ma(ia)?(Rc=!0,La=N.createStream(34962,ia),Gb=La.dtype):(La=N.getBuffer(ia))?Gb=La.dtype:"constant"in ia?(hb=2,"number"===typeof ia.constant?(ec=ia.constant,Sb=ge=db=0):(ec=0<ia.constant.length?ia.constant[0]:0,Sb=1<ia.constant.length?ia.constant[1]:0,ge=2<ia.constant.length?ia.constant[2]:0,db=3<ia.constant.length?ia.constant[3]:0)):(La=ma(ia.buffer)?N.createStream(34962,ia.buffer):N.getBuffer(ia.buffer),Gb="type"in ia?E[ia.type]:La.dtype,Wa=!!ia.normalized,md=
ia.size|0,ta=ia.offset|0,Sa=ia.stride|0,Eb=ia.divisor|0);Zb=na.location;Tb=K[Zb];if(1===hb){Tb.buffer||t.enableVertexAttribArray(Zb);fd=md||2;if(Tb.type!==Gb||Tb.size!==fd||Tb.buffer!==La||Tb.normalized!==Wa||Tb.offset!==ta||Tb.stride!==Sa)t.bindBuffer(34962,La.buffer),t.vertexAttribPointer(Zb,fd,Gb,Wa,Sa,ta),Tb.type=Gb,Tb.size=fd,Tb.buffer=La,Tb.normalized=Wa,Tb.offset=ta,Tb.stride=Sa;Tb.divisor!==Eb&&(oa.vertexAttribDivisorANGLE(Zb,Eb),Tb.divisor=Eb)}else if(Tb.buffer&&(t.disableVertexAttribArray(Zb),
Tb.buffer=null),Tb.x!==ec||Tb.y!==Sb||Tb.z!==ge||Tb.w!==db)t.vertexAttrib4f(Zb,ec,Sb,ge,db),Tb.x=ec,Tb.y=Sb,Tb.z=ge,Tb.w=db;k.buffer=c.positionBuffer;Ub=!1;Ma=null;pb=0;ub=!1;Oa=ib=0;Dc=1;Ib=0;cd=5126;dc=dd=lc=eb=0;ma(k)?(Ub=!0,Ma=N.createStream(34962,k),cd=Ma.dtype):(Ma=N.getBuffer(k))?cd=Ma.dtype:"constant"in k?(Dc=2,"number"===typeof k.constant?(lc=k.constant,dd=dc=eb=0):(lc=0<k.constant.length?k.constant[0]:0,dd=1<k.constant.length?k.constant[1]:0,dc=2<k.constant.length?k.constant[2]:0,eb=3<k.constant.length?
k.constant[3]:0)):(Ma=ma(k.buffer)?N.createStream(34962,k.buffer):N.getBuffer(k.buffer),cd="type"in k?E[k.type]:Ma.dtype,ub=!!k.normalized,Oa=k.size|0,ib=k.offset|0,Ib=k.stride|0,pb=k.divisor|0);kb=cb.location;lb=K[kb];if(1===Dc){lb.buffer||t.enableVertexAttribArray(kb);ua=Oa||2;if(lb.type!==cd||lb.size!==ua||lb.buffer!==Ma||lb.normalized!==ub||lb.offset!==ib||lb.stride!==Ib)t.bindBuffer(34962,Ma.buffer),t.vertexAttribPointer(kb,ua,cd,ub,Ib,ib),lb.type=cd,lb.size=ua,lb.buffer=Ma,lb.normalized=ub,
lb.offset=ib,lb.stride=Ib;lb.divisor!==pb&&(oa.vertexAttribDivisorANGLE(kb,pb),lb.divisor=pb)}else if(lb.buffer&&(t.disableVertexAttribArray(kb),lb.buffer=null),lb.x!==lc||lb.y!==dd||lb.z!==dc||lb.w!==eb)t.vertexAttrib4f(kb,lc,dd,dc,eb),lb.x=lc,lb.y=dd,lb.z=dc,lb.w=eb;p.buffer=c.colorBuffer;qb=!1;xa=null;Ua=0;bb=!1;fb=Aa=0;Ia=1;Ab=0;zb=5126;Za=Jb=Kc=Ra=0;ma(p)?(qb=!0,xa=N.createStream(34962,p),zb=xa.dtype):(xa=N.getBuffer(p))?zb=xa.dtype:"constant"in p?(Ia=2,"number"===typeof p.constant?(Kc=p.constant,
Jb=Za=Ra=0):(Kc=0<p.constant.length?p.constant[0]:0,Jb=1<p.constant.length?p.constant[1]:0,Za=2<p.constant.length?p.constant[2]:0,Ra=3<p.constant.length?p.constant[3]:0)):(xa=ma(p.buffer)?N.createStream(34962,p.buffer):N.getBuffer(p.buffer),zb="type"in p?E[p.type]:xa.dtype,bb=!!p.normalized,fb=p.size|0,Aa=p.offset|0,Ab=p.stride|0,Ua=p.divisor|0);Vb=e.location;ya=K[Vb];if(1===Ia){ya.buffer||t.enableVertexAttribArray(Vb);ce=fb||4;if(ya.type!==zb||ya.size!==ce||ya.buffer!==xa||ya.normalized!==bb||ya.offset!==
Aa||ya.stride!==Ab)t.bindBuffer(34962,xa.buffer),t.vertexAttribPointer(Vb,ce,zb,bb,Ab,Aa),ya.type=zb,ya.size=ce,ya.buffer=xa,ya.normalized=bb,ya.offset=Aa,ya.stride=Ab;ya.divisor!==Ua&&(oa.vertexAttribDivisorANGLE(Vb,Ua),ya.divisor=Ua)}else if(ya.buffer&&(t.disableVertexAttribArray(Vb),ya.buffer=null),ya.x!==Kc||ya.y!==Jb||ya.z!==Za||ya.w!==Ra)t.vertexAttrib4f(Vb,Kc,Jb,Za,Ra),ya.x=Kc,ya.y=Jb,ya.z=Za,ya.w=Ra;x.buffer=c.colorBuffer;Ja=!1;Pb=null;gb=0;jb=!1;fc=za=0;Da=1;rb=0;sb=5126;xc=mc=Ya=Xa=0;ma(x)?
(Ja=!0,Pb=N.createStream(34962,x),sb=Pb.dtype):(Pb=N.getBuffer(x))?sb=Pb.dtype:"constant"in x?(Da=2,"number"===typeof x.constant?(Ya=x.constant,mc=xc=Xa=0):(Ya=0<x.constant.length?x.constant[0]:0,mc=1<x.constant.length?x.constant[1]:0,xc=2<x.constant.length?x.constant[2]:0,Xa=3<x.constant.length?x.constant[3]:0)):(Pb=ma(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),sb="type"in x?E[x.type]:Pb.dtype,jb=!!x.normalized,fc=x.size|0,za=x.offset|0,rb=x.stride|0,gb=x.divisor|0);uc=T.location;
Va=K[uc];if(1===Da){Va.buffer||t.enableVertexAttribArray(uc);Mb=fc||4;if(Va.type!==sb||Va.size!==Mb||Va.buffer!==Pb||Va.normalized!==jb||Va.offset!==za||Va.stride!==rb)t.bindBuffer(34962,Pb.buffer),t.vertexAttribPointer(uc,Mb,sb,jb,rb,za),Va.type=sb,Va.size=Mb,Va.buffer=Pb,Va.normalized=jb,Va.offset=za,Va.stride=rb;Va.divisor!==gb&&(oa.vertexAttribDivisorANGLE(uc,gb),Va.divisor=gb)}else if(Va.buffer&&(t.disableVertexAttribArray(uc),Va.buffer=null),Va.x!==Ya||Va.y!==mc||Va.z!==xc||Va.w!==Xa)t.vertexAttrib4f(uc,
Ya,mc,xc,Xa),Va.x=Ya,Va.y=mc,Va.z=xc,Va.w=Xa;Xc=fa.location;Fa=K[Xc];Fa.buffer||t.enableVertexAttribArray(Xc);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==g||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(Xc,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=g,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(oa.vertexAttribDivisorANGLE(Xc,0),Fa.divisor=0);yc=a.location;Pa=K[yc];Pa.buffer||t.enableVertexAttribArray(yc);if(5126!==Pa.type||1!==
Pa.size||Pa.buffer!==d||!1!==Pa.normalized||4!==Pa.offset||8!==Pa.stride)t.bindBuffer(34962,d.buffer),t.vertexAttribPointer(yc,1,5126,!1,8,4),Pa.type=5126,Pa.size=1,Pa.buffer=d,Pa.normalized=!1,Pa.offset=4,Pa.stride=8;0!==Pa.divisor&&(oa.vertexAttribDivisorANGLE(yc,0),Pa.divisor=0);Ba=c.scale;t.uniform2f(kc.location,Ba[0],Ba[1]);mb=c.translate;t.uniform2f(Qa.location,mb[0],mb[1]);t.uniform1f(pa.location,c.thickness);t.uniform1f(L.location,c.depth);vb=y.call(this,P,c,0);t.uniform4f(X.location,vb[0],
vb[1],vb[2],vb[3]);t.uniform1f(l.location,c.miterLimit);Cb=b.call(this,P,c,0);t.uniform1f(W.location,Cb);t.uniform1f(m.location,c.dashLength);t.uniform1f(Ka.location,c.opacity);(tb=c.dashTexture)&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);vc=tb._texture;t.uniform1i(qa.location,vc.bind());(wb=J.elements)?t.bindBuffer(34963,wb.buffer.buffer):Hb.currentVAO&&(wb=Ob.getElements(Hb.currentVAO.elements))&&t.bindBuffer(34963,wb.buffer.buffer);wd=c.count;0<wd?wb?oa.drawElementsInstancedANGLE(5,4,wb.type,
0<<(wb.type-5121>>1),wd):oa.drawArraysInstancedANGLE(5,0,4,wd):0>wd&&(wb?t.drawElements(5,4,wb.type,0<<(wb.type-5121>>1)):t.drawArrays(5,0,4));sa.dirty=!0;Hb.setVAO(null);P.viewportWidth=G;P.viewportHeight=F;aa&&(ga.cpuTime+=performance.now()-wa);Lb&&N.destroyStream(Z);ed&&N.destroyStream(Lc);Rc&&N.destroyStream(La);Ub&&N.destroyStream(Ma);qb&&N.destroyStream(xa);Ja&&N.destroyStream(Pb);vc.unbind()},scope:function(a,b,e){var c,f,h,l,m,q,u,t,C,y,z,D,V,O,L,K,I,Q,S,R,la,T,X,U,ka,W,da,va,cc,ra,Ca,fa,
qa,Z,ab,td,Db,na,Ta,pa,$b,wc,nc,bc,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,Qc,hb,Sa,Gb,db,ec,Sb,Ka,Zb,Tb,$a,Ub,Ma,pb,ub,ib,Oa,Qa,Ib,cb,eb,lc,Ob,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Zc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,Hb,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,kc,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Id,Ld,jc,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,
He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;c=a.viewport;f=c.x|0;h=c.y|0;l="width"in c?c.width|0:P.framebufferWidth-f;m="height"in c?c.height|0:P.framebufferHeight-h;q=P.viewportWidth;P.viewportWidth=l;u=P.viewportHeight;P.viewportHeight=m;t=ha[0];ha[0]=f;C=ha[1];ha[1]=h;y=ha[2];ha[2]=l;z=ha[3];ha[3]=m;D=Ha[0];Ha[0]=0;V=Ha[1];Ha[1]=0;O=Ha[2];Ha[2]=0;L=Ha[3];Ha[3]=0;K=ea.blend_enable;ea.blend_enable=
!0;I=ob[0];ob[0]=32774;Q=ob[1];ob[1]=32774;S=wa[0];wa[0]=770;R=wa[1];wa[1]=771;la=wa[2];wa[2]=773;T=wa[3];wa[3]=1;X=ea.cull_enable;ea.cull_enable=!0;U=ea.cull_face;ea.cull_face=1029;ka=v.call(this,P,a,e);W=ea.depth_enable;ea.depth_enable=ka;da=a.viewport;va=da.x|0;cc=da.y|0;ra="width"in da?da.width|0:P.framebufferWidth-va;Ca="height"in da?da.height|0:P.framebufferHeight-cc;fa=Lb[0];Lb[0]=va;qa=Lb[1];Lb[1]=cc;Z=Lb[2];Lb[2]=ra;ab=Lb[3];Lb[3]=Ca;td=ea.scissor_enable;ea.scissor_enable=!0;Db=ea.stencil_enable;
ea.stencil_enable=!1;if(na=sa.profile)Ta=performance.now(),ga.count++;pa=J.offset;J.offset=0;$b=J.count;J.count=4;wc=a.count;nc=J.instances;J.instances=wc;bc=J.primitive;J.primitive=5;Ac=a.dashLength;Xb=Na[23];Na[23]=Ac;Gc=a.dashTexture;Rc=Na[24];Na[24]=Gc;La=a.depth;Eb=Na[22];Na[22]=La;Wa=a.id;ta=Na[31];Na[31]=Wa;Qc=a.miterLimit;hb=Na[32];Na[32]=Qc;Sa=A.call(this,P,a,e);Gb=Na[33];Na[33]=Sa;db=a.opacity;ec=Na[10];Na[10]=db;Sb=P.pixelRatio;Ka=Na[34];Na[34]=Sb;Zb=a.scale;Tb=Na[6];Na[6]=Zb;$a=a.scaleFract;
Ub=Na[7];Na[7]=$a;Ma=a.thickness;pb=Na[21];Na[21]=Ma;ub=a.translate;ib=Na[8];Na[8]=ub;Oa=a.translateFract;Qa=Na[9];Na[9]=Oa;Ib=Y.call(this,P,a,e);cb=Na[3];Na[3]=Ib;p.buffer=a.colorBuffer;eb=!1;lc=null;Ob=0;dc=!1;lb=kb=0;ua=1;qb=0;xa=5126;fb=Aa=bb=Ua=0;ma(p)?(eb=!0,lc=N.createStream(34962,p),xa=lc.dtype):(lc=N.getBuffer(p))?xa=lc.dtype:"constant"in p?(ua=2,"number"===typeof p.constant?(bb=p.constant,Aa=fb=Ua=0):(bb=0<p.constant.length?p.constant[0]:0,Aa=1<p.constant.length?p.constant[1]:0,fb=2<p.constant.length?
p.constant[2]:0,Ua=3<p.constant.length?p.constant[3]:0)):(lc=ma(p.buffer)?N.createStream(34962,p.buffer):N.getBuffer(p.buffer),xa="type"in p?E[p.type]:lc.dtype,dc=!!p.normalized,lb=p.size|0,kb=p.offset|0,qb=p.stride|0,Ob=p.divisor|0);Ia=H.buffer;H.buffer=lc;Ab=H.divisor;H.divisor=Ob;zb=H.normalized;H.normalized=dc;Ra=H.offset;H.offset=kb;Kc=H.size;H.size=lb;Jb=H.state;H.state=ua;Za=H.stride;H.stride=qb;Vb=H.type;H.type=xa;ya=H.w;H.w=Ua;Zc=H.x;H.x=bb;Ja=H.y;H.y=Aa;Pb=H.z;H.z=fb;ca.buffer=a.positionBuffer;
gb=!1;jb=null;za=0;fc=!1;rb=Da=0;sb=1;Xa=0;Ya=5126;Va=uc=xc=mc=0;ma(ca)?(gb=!0,jb=N.createStream(34962,ca),Ya=jb.dtype):(jb=N.getBuffer(ca))?Ya=jb.dtype:"constant"in ca?(sb=2,"number"===typeof ca.constant?(xc=ca.constant,uc=Va=mc=0):(xc=0<ca.constant.length?ca.constant[0]:0,uc=1<ca.constant.length?ca.constant[1]:0,Va=2<ca.constant.length?ca.constant[2]:0,mc=3<ca.constant.length?ca.constant[3]:0)):(jb=ma(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),Ya="type"in ca?E[ca.type]:jb.dtype,
fc=!!ca.normalized,rb=ca.size|0,Da=ca.offset|0,Xa=ca.stride|0,za=ca.divisor|0);Mb=F.buffer;F.buffer=jb;Xc=F.divisor;F.divisor=za;Fa=F.normalized;F.normalized=fc;yc=F.offset;F.offset=Da;Pa=F.size;F.size=rb;Ba=F.state;F.state=sb;mb=F.stride;F.stride=Xa;vb=F.type;F.type=Ya;Cb=F.w;F.w=mc;tb=F.x;F.x=xc;vc=F.y;F.y=uc;wb=F.z;F.z=Va;x.buffer=a.colorBuffer;Hb=!1;sc=null;ud=0;Mc=!1;sd=ld=0;Wb=1;ac=0;Qb=5126;xb=nb=Yb=Ga=0;ma(x)?(Hb=!0,sc=N.createStream(34962,x),Qb=sc.dtype):(sc=N.getBuffer(x))?Qb=sc.dtype:"constant"in
x?(Wb=2,"number"===typeof x.constant?(Yb=x.constant,nb=xb=Ga=0):(Yb=0<x.constant.length?x.constant[0]:0,nb=1<x.constant.length?x.constant[1]:0,xb=2<x.constant.length?x.constant[2]:0,Ga=3<x.constant.length?x.constant[3]:0)):(sc=ma(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),Qb="type"in x?E[x.type]:sc.dtype,Mc=!!x.normalized,sd=x.size|0,ld=x.offset|0,ac=x.stride|0,ud=x.divisor|0);Nb=w.buffer;w.buffer=sc;Rb=w.divisor;w.divisor=ud;gc=w.normalized;w.normalized=Mc;ic=w.offset;w.offset=
ld;kc=w.size;w.size=sd;Bc=w.state;w.state=Wb;Cc=w.stride;w.stride=ac;Ec=w.type;w.type=Qb;Nc=w.w;w.w=Ga;Yc=w.x;w.x=Yb;Sc=w.y;w.y=nb;Oc=w.z;w.z=xb;ja.buffer=a.positionBuffer;Kb=!1;Fb=null;Pc=0;Hc=!1;hc=Tc=0;Vc=1;nd=0;gd=5126;Ld=Id=Wc=oe=0;ma(ja)?(Kb=!0,Fb=N.createStream(34962,ja),gd=Fb.dtype):(Fb=N.getBuffer(ja))?gd=Fb.dtype:"constant"in ja?(Vc=2,"number"===typeof ja.constant?(Wc=ja.constant,Id=Ld=oe=0):(Wc=0<ja.constant.length?ja.constant[0]:0,Id=1<ja.constant.length?ja.constant[1]:0,Ld=2<ja.constant.length?
ja.constant[2]:0,oe=3<ja.constant.length?ja.constant[3]:0)):(Fb=ma(ja.buffer)?N.createStream(34962,ja.buffer):N.getBuffer(ja.buffer),gd="type"in ja?E[ja.type]:Fb.dtype,Hc=!!ja.normalized,hc=ja.size|0,Tc=ja.offset|0,nd=ja.stride|0,Pc=ja.divisor|0);jc=B.buffer;B.buffer=Fb;xe=B.divisor;B.divisor=Pc;Ud=B.normalized;B.normalized=Hc;Jd=B.offset;B.offset=Tc;Gd=B.size;B.size=hc;bd=B.state;B.state=Vc;Fc=B.stride;B.stride=nd;od=B.type;B.type=gd;hd=B.w;B.w=oe;ad=B.x;B.x=Wc;pd=B.y;B.y=Id;yd=B.z;B.z=Ld;zd=M.buffer;
M.buffer=g;ye=M.divisor;M.divisor=0;te=M.normalized;M.normalized=!1;uf=M.offset;M.offset=0;ee=M.size;M.size=0;de=M.state;M.state=1;be=M.stride;M.stride=8;ue=M.type;M.type=5126;$d=M.w;M.w=0;he=M.x;M.x=0;zc=M.y;M.y=0;Uc=M.z;M.z=0;pe=n.buffer;n.buffer=d;ke=n.divisor;n.divisor=0;Hd=n.normalized;n.normalized=!1;Md=n.offset;n.offset=4;Nd=n.size;n.size=0;Od=n.state;n.state=1;ie=n.stride;n.stride=8;Ce=n.type;n.type=5126;ze=n.w;n.w=0;me=n.x;n.x=0;Oe=n.y;n.y=0;Pe=n.z;n.z=0;ia.buffer=a.positionBuffer;Le=!1;
qe=null;De=0;Ge=!1;Ie=He=0;Ee=1;Kd=0;Rd=5126;Cd=Je=ae=Yd=0;ma(ia)?(Le=!0,qe=N.createStream(34962,ia),Rd=qe.dtype):(qe=N.getBuffer(ia))?Rd=qe.dtype:"constant"in ia?(Ee=2,"number"===typeof ia.constant?(ae=ia.constant,Je=Cd=Yd=0):(ae=0<ia.constant.length?ia.constant[0]:0,Je=1<ia.constant.length?ia.constant[1]:0,Cd=2<ia.constant.length?ia.constant[2]:0,Yd=3<ia.constant.length?ia.constant[3]:0)):(qe=ma(ia.buffer)?N.createStream(34962,ia.buffer):N.getBuffer(ia.buffer),Rd="type"in ia?E[ia.type]:qe.dtype,
Ge=!!ia.normalized,Ie=ia.size|0,He=ia.offset|0,Kd=ia.stride|0,De=ia.divisor|0);Pd=G.buffer;G.buffer=qe;Ae=G.divisor;G.divisor=De;Ke=G.normalized;G.normalized=Ge;pf=G.offset;G.offset=He;Xe=G.size;G.size=Ie;Qe=G.state;G.state=Ee;Me=G.stride;G.stride=Kd;We=G.type;G.type=Rd;Ue=G.w;G.w=Yd;Re=G.x;G.x=ae;Se=G.y;G.y=Je;Qd=G.z;G.z=Cd;k.buffer=a.positionBuffer;Vd=!1;Te=null;ef=0;lf=!1;ff=bf=0;gf=1;hf=0;qf=5126;Cf=Bf=rf=mf=0;ma(k)?(Vd=!0,Te=N.createStream(34962,k),qf=Te.dtype):(Te=N.getBuffer(k))?qf=Te.dtype:
"constant"in k?(gf=2,"number"===typeof k.constant?(rf=k.constant,Bf=Cf=mf=0):(rf=0<k.constant.length?k.constant[0]:0,Bf=1<k.constant.length?k.constant[1]:0,Cf=2<k.constant.length?k.constant[2]:0,mf=3<k.constant.length?k.constant[3]:0)):(Te=ma(k.buffer)?N.createStream(34962,k.buffer):N.getBuffer(k.buffer),qf="type"in k?E[k.type]:Te.dtype,lf=!!k.normalized,ff=k.size|0,bf=k.offset|0,hf=k.stride|0,ef=k.divisor|0);Ne=aa.buffer;aa.buffer=Te;Be=aa.divisor;aa.divisor=ef;nf=aa.normalized;aa.normalized=lf;
of=aa.offset;aa.offset=bf;Df=aa.size;aa.size=ff;Gf=aa.state;aa.state=gf;Af=aa.stride;aa.stride=hf;Ef=aa.type;aa.type=qf;Ff=aa.w;aa.w=mf;wf=aa.x;aa.x=rf;xf=aa.y;aa.y=Bf;vf=aa.z;aa.z=Cf;yf=Ea.vert;Ea.vert=36;zf=Ea.frag;Ea.frag=35;sa.dirty=!0;b(P,a,e);P.viewportWidth=q;P.viewportHeight=u;ha[0]=t;ha[1]=C;ha[2]=y;ha[3]=z;Ha[0]=D;Ha[1]=V;Ha[2]=O;Ha[3]=L;ea.blend_enable=K;ob[0]=I;ob[1]=Q;wa[0]=S;wa[1]=R;wa[2]=la;wa[3]=T;ea.cull_enable=X;ea.cull_face=U;ea.depth_enable=W;Lb[0]=fa;Lb[1]=qa;Lb[2]=Z;Lb[3]=ab;
ea.scissor_enable=td;ea.stencil_enable=Db;na&&(ga.cpuTime+=performance.now()-Ta);J.offset=pa;J.count=$b;J.instances=nc;J.primitive=bc;Na[23]=Xb;Na[24]=Rc;Na[22]=Eb;Na[31]=ta;Na[32]=hb;Na[33]=Gb;Na[10]=ec;Na[34]=Ka;Na[6]=Tb;Na[7]=Ub;Na[21]=pb;Na[8]=ib;Na[9]=Qa;Na[3]=cb;eb&&N.destroyStream(lc);H.buffer=Ia;H.divisor=Ab;H.normalized=zb;H.offset=Ra;H.size=Kc;H.state=Jb;H.stride=Za;H.type=Vb;H.w=ya;H.x=Zc;H.y=Ja;H.z=Pb;gb&&N.destroyStream(jb);F.buffer=Mb;F.divisor=Xc;F.normalized=Fa;F.offset=yc;F.size=
Pa;F.state=Ba;F.stride=mb;F.type=vb;F.w=Cb;F.x=tb;F.y=vc;F.z=wb;Hb&&N.destroyStream(sc);w.buffer=Nb;w.divisor=Rb;w.normalized=gc;w.offset=ic;w.size=kc;w.state=Bc;w.stride=Cc;w.type=Ec;w.w=Nc;w.x=Yc;w.y=Sc;w.z=Oc;Kb&&N.destroyStream(Fb);B.buffer=jc;B.divisor=xe;B.normalized=Ud;B.offset=Jd;B.size=Gd;B.state=bd;B.stride=Fc;B.type=od;B.w=hd;B.x=ad;B.y=pd;B.z=yd;M.buffer=zd;M.divisor=ye;M.normalized=te;M.offset=uf;M.size=ee;M.state=de;M.stride=be;M.type=ue;M.w=$d;M.x=he;M.y=zc;M.z=Uc;n.buffer=pe;n.divisor=
ke;n.normalized=Hd;n.offset=Md;n.size=Nd;n.state=Od;n.stride=ie;n.type=Ce;n.w=ze;n.x=me;n.y=Oe;n.z=Pe;Le&&N.destroyStream(qe);G.buffer=Pd;G.divisor=Ae;G.normalized=Ke;G.offset=pf;G.size=Xe;G.state=Qe;G.stride=Me;G.type=We;G.w=Ue;G.x=Re;G.y=Se;G.z=Qd;Vd&&N.destroyStream(Te);aa.buffer=Ne;aa.divisor=Be;aa.normalized=nf;aa.offset=of;aa.size=Df;aa.state=Gf;aa.stride=Af;aa.type=Ef;aa.w=Ff;aa.x=wf;aa.y=xf;aa.z=vf;Ea.vert=yf;Ea.frag=zf;sa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(c,
ga,q,O,g,d,y,b,v,A,Y,H,F,w,B,M,n,G,aa){var I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb,kc,pa,Qa,X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa;I=c.attributes;Z=c.buffer;f=c.context;h=c.current;e=c.draw;z=c.elements;T=c.extensions;U=c.framebuffer;m=c.gl;qa=c.isBufferArgs;L=c.next;fa=c.shader;a=c.uniforms;l=c.vao;W=L.blend_color;na=h.blend_color;Ka=L.blend_equation;cb=h.blend_equation;kc=L.blend_func;pa=h.blend_func;Qa=L.colorMask;X=h.colorMask;K=L.depth_range;N=h.depth_range;P=L.polygonOffset_offset;
sa=h.polygonOffset_offset;J=L.sample_coverage;Ob=h.sample_coverage;$a=L.scissor_box;Q=h.scissor_box;t=L.stencil_func;ma=h.stencil_func;ea=L.stencil_opBack;Ea=h.stencil_opBack;Na=L.stencil_opFront;Hb=h.stencil_opFront;Ha=L.viewport;S=h.viewport;ob={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};da={offset:8,stride:8};wa={offset:8,stride:8};return{batch:function(a,b){var d,c,g,q,C,y;d=U.next;d!==U.cur&&(d?m.bindFramebuffer(36160,d.framebuffer):m.bindFramebuffer(36160,
null),U.cur=d);if(h.dirty){var O,W,fa,Ha,D,u,ka,va,R,ha,ra,E,p,ca,x,ja,ia,k,Ka,ba,r,Bb,yb,$a,kc,jc,je,Ed,re,qd,fe,se;O=L.dither;O!==h.dither&&(O?m.enable(3024):m.disable(3024),h.dither=O);W=L.depth_func;W!==h.depth_func&&(m.depthFunc(W),h.depth_func=W);fa=K[0];Ha=K[1];if(fa!==N[0]||Ha!==N[1])m.depthRange(fa,Ha),N[0]=fa,N[1]=Ha;D=L.depth_mask;D!==h.depth_mask&&(m.depthMask(D),h.depth_mask=D);u=Qa[0];ka=Qa[1];va=Qa[2];R=Qa[3];if(u!==X[0]||ka!==X[1]||va!==X[2]||R!==X[3])m.colorMask(u,ka,va,R),X[0]=u,
X[1]=ka,X[2]=va,X[3]=R;ha=L.cull_enable;ha!==h.cull_enable&&(ha?m.enable(2884):m.disable(2884),h.cull_enable=ha);ra=L.cull_face;ra!==h.cull_face&&(m.cullFace(ra),h.cull_face=ra);E=L.frontFace;E!==h.frontFace&&(m.frontFace(E),h.frontFace=E);p=L.lineWidth;p!==h.lineWidth&&(m.lineWidth(p),h.lineWidth=p);ca=L.polygonOffset_enable;ca!==h.polygonOffset_enable&&(ca?m.enable(32823):m.disable(32823),h.polygonOffset_enable=ca);x=P[0];ja=P[1];if(x!==sa[0]||ja!==sa[1])m.polygonOffset(x,ja),sa[0]=x,sa[1]=ja;ia=
L.sample_alpha;ia!==h.sample_alpha&&(ia?m.enable(32926):m.disable(32926),h.sample_alpha=ia);k=L.sample_enable;k!==h.sample_enable&&(k?m.enable(32928):m.disable(32928),h.sample_enable=k);Ka=J[0];ba=J[1];if(Ka!==Ob[0]||ba!==Ob[1])m.sampleCoverage(Ka,ba),Ob[0]=Ka,Ob[1]=ba;r=L.stencil_mask;r!==h.stencil_mask&&(m.stencilMask(r),h.stencil_mask=r);Bb=t[0];yb=t[1];$a=t[2];if(Bb!==ma[0]||yb!==ma[1]||$a!==ma[2])m.stencilFunc(Bb,yb,$a),ma[0]=Bb,ma[1]=yb,ma[2]=$a;kc=Na[0];jc=Na[1];je=Na[2];Ed=Na[3];if(kc!==Hb[0]||
jc!==Hb[1]||je!==Hb[2]||Ed!==Hb[3])m.stencilOpSeparate(kc,jc,je,Ed),Hb[0]=kc,Hb[1]=jc,Hb[2]=je,Hb[3]=Ed;re=ea[0];qd=ea[1];fe=ea[2];se=ea[3];if(re!==Ea[0]||qd!==Ea[1]||fe!==Ea[2]||se!==Ea[3])m.stencilOpSeparate(re,qd,fe,se),Ea[0]=re,Ea[1]=qd,Ea[2]=fe,Ea[3]=se}m.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;m.enable(3042);h.blend_enable=!0;m.blendEquationSeparate(32774,32774);cb[0]=32774;cb[1]=32774;m.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;m.disable(2929);h.depth_enable=
!1;m.enable(3089);h.scissor_enable=!0;m.disable(2960);h.stencil_enable=!1;if(c=h.profile)g=performance.now(),ga.count+=b;m.useProgram(v.program);q=T.angle_instanced_arrays;var xd;l.setVAO(null);xd=e.instances;for(C=0;C<b;++C){y=a[C];var Dd,Zd,Wd,Ve,kf,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb;Dd=y.viewport;Zd=Dd.x|
0;Wd=Dd.y|0;Ve="width"in Dd?Dd.width|0:f.framebufferWidth-Zd;kf="height"in Dd?Dd.height|0:f.framebufferHeight-Wd;af=f.viewportWidth;f.viewportWidth=Ve;Ad=f.viewportHeight;f.viewportHeight=kf;m.viewport(Zd,Wd,Ve,kf);S[0]=Zd;S[1]=Wd;S[2]=Ve;S[3]=kf;Fe=y.viewport;Sd=Fe.x|0;Td=Fe.y|0;le="width"in Fe?Fe.width|0:f.framebufferWidth-Sd;Xd="height"in Fe?Fe.height|0:f.framebufferHeight-Td;m.scissor(Sd,Td,le,Xd);Q[0]=Sd;Q[1]=Td;Q[2]=le;Q[3]=Xd;da.buffer=y.positionBuffer;rd=!1;jd=null;vd=0;$c=!1;oc=kd=0;id=1;
ed=0;Lc=5126;Db=Ic=ab=qc=0;qa(da)?(rd=!0,jd=Z.createStream(34962,da),Lc=jd.dtype):(jd=Z.getBuffer(da))?Lc=jd.dtype:"constant"in da?(id=2,"number"===typeof da.constant?(ab=da.constant,Ic=Db=qc=0):(ab=0<da.constant.length?da.constant[0]:0,Ic=1<da.constant.length?da.constant[1]:0,Db=2<da.constant.length?da.constant[2]:0,qc=3<da.constant.length?da.constant[3]:0)):(jd=qa(da.buffer)?Z.createStream(34962,da.buffer):Z.getBuffer(da.buffer),Lc="type"in da?ob[da.type]:jd.dtype,$c=!!da.normalized,oc=da.size|
0,kd=da.offset|0,ed=da.stride|0,vd=da.divisor|0);pc=w.location;Ta=I[pc];if(1===id){Ta.buffer||m.enableVertexAttribArray(pc);Jc=oc||2;if(Ta.type!==Lc||Ta.size!==Jc||Ta.buffer!==jd||Ta.normalized!==$c||Ta.offset!==kd||Ta.stride!==ed)m.bindBuffer(34962,jd.buffer),m.vertexAttribPointer(pc,Jc,Lc,$c,ed,kd),Ta.type=Lc,Ta.size=Jc,Ta.buffer=jd,Ta.normalized=$c,Ta.offset=kd,Ta.stride=ed;Ta.divisor!==vd&&(q.vertexAttribDivisorANGLE(pc,vd),Ta.divisor=vd)}else if(Ta.buffer&&(m.disableVertexAttribArray(pc),Ta.buffer=
null),Ta.x!==ab||Ta.y!==Ic||Ta.z!==Db||Ta.w!==qc)m.vertexAttrib4f(pc,ab,Ic,Db,qc),Ta.x=ab,Ta.y=Ic,Ta.z=Db,Ta.w=qc;wa.buffer=y.positionFractBuffer;$b=!1;rc=null;Fd=0;Bd=!1;Xb=Ac=0;Gc=1;Rc=0;La=5126;md=ta=Wa=Eb=0;qa(wa)?($b=!0,rc=Z.createStream(34962,wa),La=rc.dtype):(rc=Z.getBuffer(wa))?La=rc.dtype:"constant"in wa?(Gc=2,"number"===typeof wa.constant?(Wa=wa.constant,ta=md=Eb=0):(Wa=0<wa.constant.length?wa.constant[0]:0,ta=1<wa.constant.length?wa.constant[1]:0,md=2<wa.constant.length?wa.constant[2]:
0,Eb=3<wa.constant.length?wa.constant[3]:0)):(rc=qa(wa.buffer)?Z.createStream(34962,wa.buffer):Z.getBuffer(wa.buffer),La="type"in wa?ob[wa.type]:rc.dtype,Bd=!!wa.normalized,Xb=wa.size|0,Ac=wa.offset|0,Rc=wa.stride|0,Fd=wa.divisor|0);hb=B.location;Sa=I[hb];if(1===Gc){Sa.buffer||m.enableVertexAttribArray(hb);Gb=Xb||2;if(Sa.type!==La||Sa.size!==Gb||Sa.buffer!==rc||Sa.normalized!==Bd||Sa.offset!==Ac||Sa.stride!==Rc)m.bindBuffer(34962,rc.buffer),m.vertexAttribPointer(hb,Gb,La,Bd,Rc,Ac),Sa.type=La,Sa.size=
Gb,Sa.buffer=rc,Sa.normalized=Bd,Sa.offset=Ac,Sa.stride=Rc;Sa.divisor!==Fd&&(q.vertexAttribDivisorANGLE(hb,Fd),Sa.divisor=Fd)}else if(Sa.buffer&&(m.disableVertexAttribArray(hb),Sa.buffer=null),Sa.x!==Wa||Sa.y!==ta||Sa.z!==md||Sa.w!==Eb)m.vertexAttrib4f(hb,Wa,ta,md,Eb),Sa.x=Wa,Sa.y=ta,Sa.z=md,Sa.w=Eb;db=y.fill;ec=db[0];ge=db[1];Tb=db[2];Ub=db[3];C&&Sb===ec&&Zb===ge&&fd===Tb&&Ma===Ub||(Sb=ec,Zb=ge,fd=Tb,Ma=Ub,m.uniform4f(Y.location,ec,ge,Tb,Ub));pb=y.scale;ub=pb[0];Oa=pb[1];C&&ib===ub&&Dc===Oa||(ib=
ub,Dc=Oa,m.uniform2f(M.location,ub,Oa));Ib=y.scaleFract;cd=Ib[0];lc=Ib[1];C&&eb===cd&&dd===lc||(eb=cd,dd=lc,m.uniform2f(n.location,cd,lc));dc=y.translate;kb=dc[0];ua=dc[1];C&&lb===kb&&qb===ua||(lb=kb,qb=ua,m.uniform2f(G.location,kb,ua));xa=y.translateFract;Ua=xa[0];Aa=xa[1];C&&bb===Ua&&fb===Aa||(bb=Ua,fb=Aa,m.uniform2f(aa.location,Ua,Aa));Ia=y.id;C&&Ab===Ia||(Ab=Ia,m.uniform1f(H.location,Ia));zb=y.opacity;C&&Ra===zb||(Ra=zb,m.uniform1f(F.location,zb));Kc=A.call(this,f,y,C);Jb=null;(Jb=(Za=qa(Kc))?
z.createStream(Kc):z.getElements(Kc))&&m.bindBuffer(34963,Jb.buffer.buffer);if(Vb=Jb?Jb.vertCount:-1)0<xd?Jb?q.drawElementsInstancedANGLE(4,Vb,Jb.type,0<<(Jb.type-5121>>1),xd):q.drawArraysInstancedANGLE(4,0,Vb,xd):0>xd&&(Jb?m.drawElements(4,Vb,Jb.type,0<<(Jb.type-5121>>1)):m.drawArrays(4,0,Vb)),f.viewportWidth=af,f.viewportHeight=Ad,rd&&Z.destroyStream(jd),$b&&Z.destroyStream(rc),Za&&z.destroyStream(Jb)}h.dirty=!0;l.setVAO(null);c&&(ga.cpuTime+=performance.now()-g)},draw:function(a){var b,d,c,g,v,
y,A,W,fa,oa,Ha,D,u,ka,va,R,ha,ra,E,p,ca,x;b=U.next;b!==U.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),U.cur=b);if(h.dirty){b=L.dither;b!==h.dither&&(b?m.enable(3024):m.disable(3024),h.dither=b);b=L.depth_func;b!==h.depth_func&&(m.depthFunc(b),h.depth_func=b);b=K[0];y=K[1];if(b!==N[0]||y!==N[1])m.depthRange(b,y),N[0]=b,N[1]=y;b=L.depth_mask;b!==h.depth_mask&&(m.depthMask(b),h.depth_mask=b);b=Qa[0];y=Qa[1];d=Qa[2];c=Qa[3];if(b!==X[0]||y!==X[1]||d!==X[2]||c!==X[3])m.colorMask(b,
y,d,c),X[0]=b,X[1]=y,X[2]=d,X[3]=c;b=L.cull_enable;b!==h.cull_enable&&(b?m.enable(2884):m.disable(2884),h.cull_enable=b);b=L.cull_face;b!==h.cull_face&&(m.cullFace(b),h.cull_face=b);b=L.frontFace;b!==h.frontFace&&(m.frontFace(b),h.frontFace=b);b=L.lineWidth;b!==h.lineWidth&&(m.lineWidth(b),h.lineWidth=b);b=L.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?m.enable(32823):m.disable(32823),h.polygonOffset_enable=b);b=P[0];y=P[1];if(b!==sa[0]||y!==sa[1])m.polygonOffset(b,y),sa[0]=b,sa[1]=y;b=L.sample_alpha;
b!==h.sample_alpha&&(b?m.enable(32926):m.disable(32926),h.sample_alpha=b);b=L.sample_enable;b!==h.sample_enable&&(b?m.enable(32928):m.disable(32928),h.sample_enable=b);b=J[0];y=J[1];if(b!==Ob[0]||y!==Ob[1])m.sampleCoverage(b,y),Ob[0]=b,Ob[1]=y;b=L.stencil_mask;b!==h.stencil_mask&&(m.stencilMask(b),h.stencil_mask=b);b=t[0];y=t[1];d=t[2];if(b!==ma[0]||y!==ma[1]||d!==ma[2])m.stencilFunc(b,y,d),ma[0]=b,ma[1]=y,ma[2]=d;b=Na[0];y=Na[1];d=Na[2];c=Na[3];if(b!==Hb[0]||y!==Hb[1]||d!==Hb[2]||c!==Hb[3])m.stencilOpSeparate(b,
y,d,c),Hb[0]=b,Hb[1]=y,Hb[2]=d,Hb[3]=c;b=ea[0];y=ea[1];d=ea[2];c=ea[3];if(b!==Ea[0]||y!==Ea[1]||d!==Ea[2]||c!==Ea[3])m.stencilOpSeparate(b,y,d,c),Ea[0]=b,Ea[1]=y,Ea[2]=d,Ea[3]=c}b=a.viewport;d=b.x|0;c=b.y|0;g="width"in b?b.width|0:f.framebufferWidth-d;v="height"in b?b.height|0:f.framebufferHeight-c;b=f.viewportWidth;f.viewportWidth=g;y=f.viewportHeight;f.viewportHeight=v;m.viewport(d,c,g,v);S[0]=d;S[1]=c;S[2]=g;S[3]=v;m.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;m.enable(3042);h.blend_enable=
!0;m.blendEquationSeparate(32774,32774);cb[0]=32774;cb[1]=32774;m.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;m.disable(2929);h.depth_enable=!1;v=a.viewport;d=v.x|0;c=v.y|0;g="width"in v?v.width|0:f.framebufferWidth-d;v="height"in v?v.height|0:f.framebufferHeight-c;m.scissor(d,c,g,v);Q[0]=d;Q[1]=c;Q[2]=g;Q[3]=v;m.enable(3089);h.scissor_enable=!0;m.disable(2960);h.stencil_enable=!1;if(d=h.profile)A=performance.now(),ga.count++;m.useProgram(q.program);c=T.angle_instanced_arrays;
l.setVAO(null);da.buffer=a.positionBuffer;g=!1;W=0;fa=!1;Ha=oa=0;D=1;u=0;ka=5126;ra=ha=R=va=0;qa(da)?(g=!0,v=Z.createStream(34962,da),ka=v.dtype):(v=Z.getBuffer(da))?ka=v.dtype:"constant"in da?(D=2,"number"===typeof da.constant?(R=da.constant,ha=ra=va=0):(R=0<da.constant.length?da.constant[0]:0,ha=1<da.constant.length?da.constant[1]:0,ra=2<da.constant.length?da.constant[2]:0,va=3<da.constant.length?da.constant[3]:0)):(v=qa(da.buffer)?Z.createStream(34962,da.buffer):Z.getBuffer(da.buffer),ka="type"in
da?ob[da.type]:v.dtype,fa=!!da.normalized,Ha=da.size|0,oa=da.offset|0,u=da.stride|0,W=da.divisor|0);E=w.location;p=I[E];if(1===D){p.buffer||m.enableVertexAttribArray(E);Ha=Ha||2;if(p.type!==ka||p.size!==Ha||p.buffer!==v||p.normalized!==fa||p.offset!==oa||p.stride!==u)m.bindBuffer(34962,v.buffer),m.vertexAttribPointer(E,Ha,ka,fa,u,oa),p.type=ka,p.size=Ha,p.buffer=v,p.normalized=fa,p.offset=oa,p.stride=u;p.divisor!==W&&(c.vertexAttribDivisorANGLE(E,W),p.divisor=W)}else if(p.buffer&&(m.disableVertexAttribArray(E),
p.buffer=null),p.x!==R||p.y!==ha||p.z!==ra||p.w!==va)m.vertexAttrib4f(E,R,ha,ra,va),p.x=R,p.y=ha,p.z=ra,p.w=va;wa.buffer=a.positionFractBuffer;W=!1;oa=0;u=!1;va=ka=0;R=1;E=0;p=5126;x=ca=ra=ha=0;qa(wa)?(W=!0,fa=Z.createStream(34962,wa),p=fa.dtype):(fa=Z.getBuffer(wa))?p=fa.dtype:"constant"in wa?(R=2,"number"===typeof wa.constant?(ra=wa.constant,ca=x=ha=0):(ra=0<wa.constant.length?wa.constant[0]:0,ca=1<wa.constant.length?wa.constant[1]:0,x=2<wa.constant.length?wa.constant[2]:0,ha=3<wa.constant.length?
wa.constant[3]:0)):(fa=qa(wa.buffer)?Z.createStream(34962,wa.buffer):Z.getBuffer(wa.buffer),p="type"in wa?ob[wa.type]:fa.dtype,u=!!wa.normalized,va=wa.size|0,ka=wa.offset|0,E=wa.stride|0,oa=wa.divisor|0);Ha=B.location;D=I[Ha];if(1===R){D.buffer||m.enableVertexAttribArray(Ha);va=va||2;if(D.type!==p||D.size!==va||D.buffer!==fa||D.normalized!==u||D.offset!==ka||D.stride!==E)m.bindBuffer(34962,fa.buffer),m.vertexAttribPointer(Ha,va,p,u,E,ka),D.type=p,D.size=va,D.buffer=fa,D.normalized=u,D.offset=ka,D.stride=
E;D.divisor!==oa&&(c.vertexAttribDivisorANGLE(Ha,oa),D.divisor=oa)}else if(D.buffer&&(m.disableVertexAttribArray(Ha),D.buffer=null),D.x!==ra||D.y!==ca||D.z!==x||D.w!==ha)m.vertexAttrib4f(Ha,ra,ca,x,ha),D.x=ra,D.y=ca,D.z=x,D.w=ha;oa=a.fill;m.uniform4f(Y.location,oa[0],oa[1],oa[2],oa[3]);oa=a.scale;m.uniform2f(M.location,oa[0],oa[1]);oa=a.scaleFract;m.uniform2f(n.location,oa[0],oa[1]);oa=a.translate;m.uniform2f(G.location,oa[0],oa[1]);oa=a.translateFract;m.uniform2f(aa.location,oa[0],oa[1]);m.uniform1f(H.location,
a.id);m.uniform1f(F.location,a.opacity);oa=O.call(this,f,a,0);(oa=(a=qa(oa))?z.createStream(oa):z.getElements(oa))&&m.bindBuffer(34963,oa.buffer.buffer);if(u=oa?oa.vertCount:-1)ka=e.instances,0<ka?oa?c.drawElementsInstancedANGLE(4,u,oa.type,0<<(oa.type-5121>>1),ka):c.drawArraysInstancedANGLE(4,0,u,ka):0>ka&&(oa?m.drawElements(4,u,oa.type,0<<(oa.type-5121>>1)):m.drawArrays(4,0,u)),h.dirty=!0,l.setVAO(null),f.viewportWidth=b,f.viewportHeight=y,d&&(ga.cpuTime+=performance.now()-A),g&&Z.destroyStream(v),
W&&Z.destroyStream(fa),a&&z.destroyStream(oa)},scope:function(c,l,m){var n,q,t,v,w,B,O,G,A,D,u,F,N,H,K,I,E,p,ca,x,J,M,k,Q,ba,r,P,S,T,X,Y,U,ea,aa,oa,ma,sa,na,pa,Ea,Na,Qa,cb,Ob,Ad,Hb,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb;n=c.viewport;q=n.x|0;t=n.y|0;v="width"in n?n.width|0:f.framebufferWidth-q;w="height"in n?n.height|0:f.framebufferHeight-
t;B=f.viewportWidth;f.viewportWidth=v;O=f.viewportHeight;f.viewportHeight=w;G=Ha[0];Ha[0]=q;A=Ha[1];Ha[1]=t;D=Ha[2];Ha[2]=v;u=Ha[3];Ha[3]=w;F=W[0];W[0]=0;N=W[1];W[1]=0;H=W[2];W[2]=0;K=W[3];W[3]=0;I=L.blend_enable;L.blend_enable=!0;E=Ka[0];Ka[0]=32774;p=Ka[1];Ka[1]=32774;ca=kc[0];kc[0]=770;x=kc[1];kc[1]=771;J=kc[2];kc[2]=773;M=kc[3];kc[3]=1;k=L.depth_enable;L.depth_enable=!1;Q=c.viewport;ba=Q.x|0;r=Q.y|0;P="width"in Q?Q.width|0:f.framebufferWidth-ba;S="height"in Q?Q.height|0:f.framebufferHeight-r;
T=$a[0];$a[0]=ba;X=$a[1];$a[1]=r;Y=$a[2];$a[2]=P;U=$a[3];$a[3]=S;ea=L.scissor_enable;L.scissor_enable=!0;aa=L.stencil_enable;L.stencil_enable=!1;if(oa=h.profile)ma=performance.now(),ga.count++;sa=g.call(this,f,c,m);na=null;na=(pa=qa(sa))?z.createStream(sa):z.getElements(sa);Ea=e.elements;e.elements=na;Na=e.offset;e.offset=0;Qa=na?na.vertCount:-1;cb=e.count;e.count=Qa;Ob=e.primitive;e.primitive=4;Ad=c.fill;Hb=a[14];a[14]=Ad;Sd=c.id;Td=a[31];a[31]=Sd;le=c.opacity;Xd=a[10];a[10]=le;rd=f.pixelRatio;jd=
a[34];a[34]=rd;vd=c.scale;$c=a[6];a[6]=vd;kd=c.scaleFract;oc=a[7];a[7]=kd;id=c.translate;ed=a[8];a[8]=id;Lc=c.translateFract;qc=a[9];a[9]=Lc;ab=d.call(this,f,c,m);Ic=a[3];a[3]=ab;da.buffer=c.positionBuffer;Db=!1;pc=null;Ta=0;Jc=!1;rc=$b=0;Fd=1;Bd=0;Ac=5126;La=Rc=Gc=Xb=0;qa(da)?(Db=!0,pc=Z.createStream(34962,da),Ac=pc.dtype):(pc=Z.getBuffer(da))?Ac=pc.dtype:"constant"in da?(Fd=2,"number"===typeof da.constant?(Gc=da.constant,Rc=La=Xb=0):(Gc=0<da.constant.length?da.constant[0]:0,Rc=1<da.constant.length?
da.constant[1]:0,La=2<da.constant.length?da.constant[2]:0,Xb=3<da.constant.length?da.constant[3]:0)):(pc=qa(da.buffer)?Z.createStream(34962,da.buffer):Z.getBuffer(da.buffer),Ac="type"in da?ob[da.type]:pc.dtype,Jc=!!da.normalized,rc=da.size|0,$b=da.offset|0,Bd=da.stride|0,Ta=da.divisor|0);Eb=y.buffer;y.buffer=pc;Wa=y.divisor;y.divisor=Ta;ta=y.normalized;y.normalized=Jc;md=y.offset;y.offset=$b;hb=y.size;y.size=rc;Sa=y.state;y.state=Fd;Gb=y.stride;y.stride=Bd;db=y.type;y.type=Ac;ec=y.w;y.w=Xb;Sb=y.x;
y.x=Gc;ge=y.y;y.y=Rc;Zb=y.z;y.z=La;wa.buffer=c.positionFractBuffer;Tb=!1;fd=null;Ub=0;Ma=!1;ub=pb=0;ib=1;Oa=0;Dc=5126;lc=eb=cd=Ib=0;qa(wa)?(Tb=!0,fd=Z.createStream(34962,wa),Dc=fd.dtype):(fd=Z.getBuffer(wa))?Dc=fd.dtype:"constant"in wa?(ib=2,"number"===typeof wa.constant?(cd=wa.constant,eb=lc=Ib=0):(cd=0<wa.constant.length?wa.constant[0]:0,eb=1<wa.constant.length?wa.constant[1]:0,lc=2<wa.constant.length?wa.constant[2]:0,Ib=3<wa.constant.length?wa.constant[3]:0)):(fd=qa(wa.buffer)?Z.createStream(34962,
wa.buffer):Z.getBuffer(wa.buffer),Dc="type"in wa?ob[wa.type]:fd.dtype,Ma=!!wa.normalized,ub=wa.size|0,pb=wa.offset|0,Oa=wa.stride|0,Ub=wa.divisor|0);dd=b.buffer;b.buffer=fd;dc=b.divisor;b.divisor=Ub;kb=b.normalized;b.normalized=Ma;lb=b.offset;b.offset=pb;ua=b.size;b.size=ub;qb=b.state;b.state=ib;xa=b.stride;b.stride=Oa;Ua=b.type;b.type=Dc;bb=b.w;b.w=Ib;Aa=b.x;b.x=cd;fb=b.y;b.y=eb;Ia=b.z;b.z=lc;Ab=fa.vert;fa.vert=42;zb=fa.frag;fa.frag=41;h.dirty=!0;l(f,c,m);f.viewportWidth=B;f.viewportHeight=O;Ha[0]=
G;Ha[1]=A;Ha[2]=D;Ha[3]=u;W[0]=F;W[1]=N;W[2]=H;W[3]=K;L.blend_enable=I;Ka[0]=E;Ka[1]=p;kc[0]=ca;kc[1]=x;kc[2]=J;kc[3]=M;L.depth_enable=k;$a[0]=T;$a[1]=X;$a[2]=Y;$a[3]=U;L.scissor_enable=ea;L.stencil_enable=aa;oa&&(ga.cpuTime+=performance.now()-ma);pa&&z.destroyStream(na);e.elements=Ea;e.offset=Na;e.count=cb;e.primitive=Ob;a[14]=Hb;a[31]=Td;a[10]=Xd;a[34]=jd;a[6]=$c;a[7]=oc;a[8]=ed;a[9]=qc;a[3]=Ic;Db&&Z.destroyStream(pc);y.buffer=Eb;y.divisor=Wa;y.normalized=ta;y.offset=md;y.size=hb;y.state=Sa;y.stride=
Gb;y.type=db;y.w=ec;y.x=Sb;y.y=ge;y.z=Zb;Tb&&Z.destroyStream(fd);b.buffer=dd;b.divisor=dc;b.normalized=kb;b.offset=lb;b.size=ua;b.state=qb;b.stride=xa;b.type=Ua;b.w=bb;b.x=Aa;b.y=fb;b.z=Ia;fa.vert=Ab;fa.frag=zb;h.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,A,q,O,g,d,y,b,v,oa,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb,
kc,pa,Qa,X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa,bc,cc,Qc,td,wc){var V,C,la,Ca,Lb,nc,Zc,D,u,ka,va,R,ha,ra,E,p,ca,x,ja,ia,k,tc,ba,r,Bb,yb,jc,ne,ve,je,Ed,re,qd,fe,se,xd,Dd,Zd,Wd;V=c.attributes;C=c.buffer;la=c.context;Ca=c.current;Lb=c.draw;nc=c.elements;Zc=c.extensions;D=c.framebuffer;u=c.gl;ka=c.isBufferArgs;va=c.next;R=c.shader;ha=c.uniforms;ra=c.vao;E=va.blend_color;p=Ca.blend_color;ca=va.blend_equation;x=Ca.blend_equation;ja=va.blend_func;ia=Ca.blend_func;k=va.colorMask;tc=Ca.colorMask;
ba=va.depth_range;r=Ca.depth_range;Bb=va.polygonOffset_offset;yb=Ca.polygonOffset_offset;jc=va.sample_coverage;ne=Ca.sample_coverage;ve=va.scissor_box;je=Ca.scissor_box;Ed=va.stencil_func;re=Ca.stencil_func;qd=va.stencil_opBack;fe=Ca.stencil_opBack;se=va.stencil_opFront;xd=Ca.stencil_opFront;Dd=va.viewport;Zd=Ca.viewport;Wd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var d,c,e,f,g,h;d=D.next;d!==D.cur&&(d?u.bindFramebuffer(36160,
d.framebuffer):u.bindFramebuffer(36160,null),D.cur=d);if(Ca.dirty){var l,m,n,q,v,w,y,z,E,B,O,G,F,L,H,I,M,R,ha,T,Y,U,W,ja,aa,oa,fa,Z,ta,qa,hb,Sa,Gb,db;l=va.dither;l!==Ca.dither&&(l?u.enable(3024):u.disable(3024),Ca.dither=l);m=ca[0];n=ca[1];if(m!==x[0]||n!==x[1])u.blendEquationSeparate(m,n),x[0]=m,x[1]=n;q=va.depth_func;q!==Ca.depth_func&&(u.depthFunc(q),Ca.depth_func=q);v=ba[0];w=ba[1];if(v!==r[0]||w!==r[1])u.depthRange(v,w),r[0]=v,r[1]=w;y=va.depth_mask;y!==Ca.depth_mask&&(u.depthMask(y),Ca.depth_mask=
y);z=k[0];E=k[1];B=k[2];O=k[3];if(z!==tc[0]||E!==tc[1]||B!==tc[2]||O!==tc[3])u.colorMask(z,E,B,O),tc[0]=z,tc[1]=E,tc[2]=B,tc[3]=O;G=va.cull_enable;G!==Ca.cull_enable&&(G?u.enable(2884):u.disable(2884),Ca.cull_enable=G);F=va.cull_face;F!==Ca.cull_face&&(u.cullFace(F),Ca.cull_face=F);L=va.frontFace;L!==Ca.frontFace&&(u.frontFace(L),Ca.frontFace=L);H=va.lineWidth;H!==Ca.lineWidth&&(u.lineWidth(H),Ca.lineWidth=H);I=va.polygonOffset_enable;I!==Ca.polygonOffset_enable&&(I?u.enable(32823):u.disable(32823),
Ca.polygonOffset_enable=I);M=Bb[0];R=Bb[1];if(M!==yb[0]||R!==yb[1])u.polygonOffset(M,R),yb[0]=M,yb[1]=R;ha=va.sample_alpha;ha!==Ca.sample_alpha&&(ha?u.enable(32926):u.disable(32926),Ca.sample_alpha=ha);T=va.sample_enable;T!==Ca.sample_enable&&(T?u.enable(32928):u.disable(32928),Ca.sample_enable=T);Y=jc[0];U=jc[1];if(Y!==ne[0]||U!==ne[1])u.sampleCoverage(Y,U),ne[0]=Y,ne[1]=U;W=va.stencil_mask;W!==Ca.stencil_mask&&(u.stencilMask(W),Ca.stencil_mask=W);ja=Ed[0];aa=Ed[1];oa=Ed[2];if(ja!==re[0]||aa!==re[1]||
oa!==re[2])u.stencilFunc(ja,aa,oa),re[0]=ja,re[1]=aa,re[2]=oa;fa=se[0];Z=se[1];ta=se[2];qa=se[3];if(fa!==xd[0]||Z!==xd[1]||ta!==xd[2]||qa!==xd[3])u.stencilOpSeparate(fa,Z,ta,qa),xd[0]=fa,xd[1]=Z,xd[2]=ta,xd[3]=qa;hb=qd[0];Sa=qd[1];Gb=qd[2];db=qd[3];if(hb!==fe[0]||Sa!==fe[1]||Gb!==fe[2]||db!==fe[3])u.stencilOpSeparate(hb,Sa,Gb,db),fe[0]=hb,fe[1]=Sa,fe[2]=Gb,fe[3]=db}u.blendColor(0,0,0,1);p[0]=0;p[1]=0;p[2]=0;p[3]=1;u.enable(3042);Ca.blend_enable=!0;u.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=
771;ia[2]=773;ia[3]=1;u.disable(2929);Ca.depth_enable=!1;u.enable(3089);Ca.scissor_enable=!0;u.disable(2960);Ca.stencil_enable=!1;if(c=Ca.profile)e=performance.now(),A.count+=b;u.useProgram(na.program);f=Zc.angle_instanced_arrays;var ec;ra.setVAO(null);u.uniform1i(t.location,!1);u.uniform1i(Hb.location,sa.bind());ec=Lb.instances;for(g=0;g<b;++g){h=a[g];var Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,
mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Dd,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,ve,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,Id,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf;Sb=h.viewport;ge=Sb.x|0;Zb=Sb.y|0;Tb="width"in
Sb?Sb.width|0:la.framebufferWidth-ge;fd="height"in Sb?Sb.height|0:la.framebufferHeight-Zb;Ub=la.viewportWidth;la.viewportWidth=Tb;Ma=la.viewportHeight;la.viewportHeight=fd;u.viewport(ge,Zb,Tb,fd);Zd[0]=ge;Zd[1]=Zb;Zd[2]=Tb;Zd[3]=fd;pb=h.viewport;ub=pb.x|0;ib=pb.y|0;Oa="width"in pb?pb.width|0:la.framebufferWidth-ub;Dc="height"in pb?pb.height|0:la.framebufferHeight-ib;u.scissor(ub,ib,Oa,Dc);je[0]=ub;je[1]=ib;je[2]=Oa;je[3]=Dc;Ib=Ka.call(this,la,h,g);cd=!1;eb=null;lc=0;dd=!1;kb=dc=0;lb=1;ua=0;qb=5126;
Aa=bb=Ua=xa=0;ka(Ib)?(cd=!0,eb=C.createStream(34962,Ib),qb=eb.dtype):(eb=C.getBuffer(Ib))?qb=eb.dtype:"constant"in Ib?(lb=2,"number"===typeof Ib.constant?(Ua=Ib.constant,bb=Aa=xa=0):(Ua=0<Ib.constant.length?Ib.constant[0]:0,bb=1<Ib.constant.length?Ib.constant[1]:0,Aa=2<Ib.constant.length?Ib.constant[2]:0,xa=3<Ib.constant.length?Ib.constant[3]:0)):(eb=ka(Ib.buffer)?C.createStream(34962,Ib.buffer):C.getBuffer(Ib.buffer),qb="type"in Ib?Wd[Ib.type]:eb.dtype,dd=!!Ib.normalized,kb=Ib.size|0,dc=Ib.offset|
0,ua=Ib.stride|0,lc=Ib.divisor|0);fb=cc.location;Ia=V[fb];if(1===lb){Ia.buffer||u.enableVertexAttribArray(fb);Ab=kb||1;if(Ia.type!==qb||Ia.size!==Ab||Ia.buffer!==eb||Ia.normalized!==dd||Ia.offset!==dc||Ia.stride!==ua)u.bindBuffer(34962,eb.buffer),u.vertexAttribPointer(fb,Ab,qb,dd,ua,dc),Ia.type=qb,Ia.size=Ab,Ia.buffer=eb,Ia.normalized=dd,Ia.offset=dc,Ia.stride=ua;Ia.divisor!==lc&&(f.vertexAttribDivisorANGLE(fb,lc),Ia.divisor=lc)}else if(Ia.buffer&&(u.disableVertexAttribArray(fb),Ia.buffer=null),Ia.x!==
Ua||Ia.y!==bb||Ia.z!==Aa||Ia.w!==xa)u.vertexAttrib4f(fb,Ua,bb,Aa,xa),Ia.x=Ua,Ia.y=bb,Ia.z=Aa,Ia.w=xa;zb=cb.call(this,la,h,g);Ra=!1;Kc=null;Jb=0;Za=!1;ya=Vb=0;ce=1;Ja=0;Pb=5126;fc=za=jb=gb=0;ka(zb)?(Ra=!0,Kc=C.createStream(34962,zb),Pb=Kc.dtype):(Kc=C.getBuffer(zb))?Pb=Kc.dtype:"constant"in zb?(ce=2,"number"===typeof zb.constant?(jb=zb.constant,za=fc=gb=0):(jb=0<zb.constant.length?zb.constant[0]:0,za=1<zb.constant.length?zb.constant[1]:0,fc=2<zb.constant.length?zb.constant[2]:0,gb=3<zb.constant.length?
zb.constant[3]:0)):(Kc=ka(zb.buffer)?C.createStream(34962,zb.buffer):C.getBuffer(zb.buffer),Pb="type"in zb?Wd[zb.type]:Kc.dtype,Za=!!zb.normalized,ya=zb.size|0,Vb=zb.offset|0,Ja=zb.stride|0,Jb=zb.divisor|0);Da=td.location;rb=V[Da];if(1===ce){rb.buffer||u.enableVertexAttribArray(Da);sb=ya||1;if(rb.type!==Pb||rb.size!==sb||rb.buffer!==Kc||rb.normalized!==Za||rb.offset!==Vb||rb.stride!==Ja)u.bindBuffer(34962,Kc.buffer),u.vertexAttribPointer(Da,sb,Pb,Za,Ja,Vb),rb.type=Pb,rb.size=sb,rb.buffer=Kc,rb.normalized=
Za,rb.offset=Vb,rb.stride=Ja;rb.divisor!==Jb&&(f.vertexAttribDivisorANGLE(Da,Jb),rb.divisor=Jb)}else if(rb.buffer&&(u.disableVertexAttribArray(Da),rb.buffer=null),rb.x!==jb||rb.y!==za||rb.z!==fc||rb.w!==gb)u.vertexAttrib4f(Da,jb,za,fc,gb),rb.x=jb,rb.y=za,rb.z=fc,rb.w=gb;Xa=kc.call(this,la,h,g);Ya=!1;mc=null;xc=0;uc=!1;Mb=Va=0;Xc=1;Fa=0;yc=5126;vb=mb=Ba=Pa=0;ka(Xa)?(Ya=!0,mc=C.createStream(34962,Xa),yc=mc.dtype):(mc=C.getBuffer(Xa))?yc=mc.dtype:"constant"in Xa?(Xc=2,"number"===typeof Xa.constant?(Ba=
Xa.constant,mb=vb=Pa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,mb=1<Xa.constant.length?Xa.constant[1]:0,vb=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:0)):(mc=ka(Xa.buffer)?C.createStream(34962,Xa.buffer):C.getBuffer(Xa.buffer),yc="type"in Xa?Wd[Xa.type]:mc.dtype,uc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,xc=Xa.divisor|0);Cb=Qc.location;tb=V[Cb];if(1===Xc){tb.buffer||u.enableVertexAttribArray(Cb);vc=Mb||1;if(tb.type!==yc||tb.size!==vc||tb.buffer!==
mc||tb.normalized!==uc||tb.offset!==Va||tb.stride!==Fa)u.bindBuffer(34962,mc.buffer),u.vertexAttribPointer(Cb,vc,yc,uc,Fa,Va),tb.type=yc,tb.size=vc,tb.buffer=mc,tb.normalized=uc,tb.offset=Va,tb.stride=Fa;tb.divisor!==xc&&(f.vertexAttribDivisorANGLE(Cb,xc),tb.divisor=xc)}else if(tb.buffer&&(u.disableVertexAttribArray(Cb),tb.buffer=null),tb.x!==Ba||tb.y!==mb||tb.z!==vb||tb.w!==Pa)u.vertexAttrib4f(Cb,Ba,mb,vb,Pa),tb.x=Ba,tb.y=mb,tb.z=vb,tb.w=Pa;wb=pa.call(this,la,h,g);wd=!1;sc=null;ud=0;Mc=!1;sd=ld=
0;Wb=1;ac=0;Qb=5126;xb=nb=Yb=Ga=0;ka(wb)?(wd=!0,sc=C.createStream(34962,wb),Qb=sc.dtype):(sc=C.getBuffer(wb))?Qb=sc.dtype:"constant"in wb?(Wb=2,"number"===typeof wb.constant?(Yb=wb.constant,nb=xb=Ga=0):(Yb=0<wb.constant.length?wb.constant[0]:0,nb=1<wb.constant.length?wb.constant[1]:0,xb=2<wb.constant.length?wb.constant[2]:0,Ga=3<wb.constant.length?wb.constant[3]:0)):(sc=ka(wb.buffer)?C.createStream(34962,wb.buffer):C.getBuffer(wb.buffer),Qb="type"in wb?Wd[wb.type]:sc.dtype,Mc=!!wb.normalized,sd=wb.size|
0,ld=wb.offset|0,ac=wb.stride|0,ud=wb.divisor|0);Nb=wc.location;Rb=V[Nb];if(1===Wb){Rb.buffer||u.enableVertexAttribArray(Nb);gc=sd||1;if(Rb.type!==Qb||Rb.size!==gc||Rb.buffer!==sc||Rb.normalized!==Mc||Rb.offset!==ld||Rb.stride!==ac)u.bindBuffer(34962,sc.buffer),u.vertexAttribPointer(Nb,gc,Qb,Mc,ac,ld),Rb.type=Qb,Rb.size=gc,Rb.buffer=sc,Rb.normalized=Mc,Rb.offset=ld,Rb.stride=ac;Rb.divisor!==ud&&(f.vertexAttribDivisorANGLE(Nb,ud),Rb.divisor=ud)}else if(Rb.buffer&&(u.disableVertexAttribArray(Nb),Rb.buffer=
null),Rb.x!==Yb||Rb.y!==nb||Rb.z!==xb||Rb.w!==Ga)u.vertexAttrib4f(Nb,Yb,nb,xb,Ga),Rb.x=Yb,Rb.y=nb,Rb.z=xb,Rb.w=Ga;ic=Qa.call(this,la,h,g);Ye=!1;Bc=null;Cc=0;Ec=!1;Yc=Nc=0;Sc=1;Oc=0;Kb=5126;Tc=Hc=Pc=Fb=0;ka(ic)?(Ye=!0,Bc=C.createStream(34962,ic),Kb=Bc.dtype):(Bc=C.getBuffer(ic))?Kb=Bc.dtype:"constant"in ic?(Sc=2,"number"===typeof ic.constant?(Pc=ic.constant,Hc=Tc=Fb=0):(Pc=0<ic.constant.length?ic.constant[0]:0,Hc=1<ic.constant.length?ic.constant[1]:0,Tc=2<ic.constant.length?ic.constant[2]:0,Fb=3<ic.constant.length?
ic.constant[3]:0)):(Bc=ka(ic.buffer)?C.createStream(34962,ic.buffer):C.getBuffer(ic.buffer),Kb="type"in ic?Wd[ic.type]:Bc.dtype,Ec=!!ic.normalized,Yc=ic.size|0,Nc=ic.offset|0,Oc=ic.stride|0,Cc=ic.divisor|0);hc=da.location;Vc=V[hc];if(1===Sc){Vc.buffer||u.enableVertexAttribArray(hc);nd=Yc||1;if(Vc.type!==Kb||Vc.size!==nd||Vc.buffer!==Bc||Vc.normalized!==Ec||Vc.offset!==Nc||Vc.stride!==Oc)u.bindBuffer(34962,Bc.buffer),u.vertexAttribPointer(hc,nd,Kb,Ec,Oc,Nc),Vc.type=Kb,Vc.size=nd,Vc.buffer=Bc,Vc.normalized=
Ec,Vc.offset=Nc,Vc.stride=Oc;Vc.divisor!==Cc&&(f.vertexAttribDivisorANGLE(hc,Cc),Vc.divisor=Cc)}else if(Vc.buffer&&(u.disableVertexAttribArray(hc),Vc.buffer=null),Vc.x!==Pc||Vc.y!==Hc||Vc.z!==Tc||Vc.w!==Fb)u.vertexAttrib4f(hc,Pc,Hc,Tc,Fb),Vc.x=Pc,Vc.y=Hc,Vc.z=Tc,Vc.w=Fb;gd=X.call(this,la,h,g);oe=!1;Wc=null;Dd=0;Ld=!1;xe=we=0;Ud=1;Jd=0;Gd=5126;hd=od=Fc=bd=0;ka(gd)?(oe=!0,Wc=C.createStream(34962,gd),Gd=Wc.dtype):(Wc=C.getBuffer(gd))?Gd=Wc.dtype:"constant"in gd?(Ud=2,"number"===typeof gd.constant?(Fc=
gd.constant,od=hd=bd=0):(Fc=0<gd.constant.length?gd.constant[0]:0,od=1<gd.constant.length?gd.constant[1]:0,hd=2<gd.constant.length?gd.constant[2]:0,bd=3<gd.constant.length?gd.constant[3]:0)):(Wc=ka(gd.buffer)?C.createStream(34962,gd.buffer):C.getBuffer(gd.buffer),Gd="type"in gd?Wd[gd.type]:Wc.dtype,Ld=!!gd.normalized,xe=gd.size|0,we=gd.offset|0,Jd=gd.stride|0,Dd=gd.divisor|0);ad=$a.location;pd=V[ad];if(1===Ud){pd.buffer||u.enableVertexAttribArray(ad);yd=xe||1;if(pd.type!==Gd||pd.size!==yd||pd.buffer!==
Wc||pd.normalized!==Ld||pd.offset!==we||pd.stride!==Jd)u.bindBuffer(34962,Wc.buffer),u.vertexAttribPointer(ad,yd,Gd,Ld,Jd,we),pd.type=Gd,pd.size=yd,pd.buffer=Wc,pd.normalized=Ld,pd.offset=we,pd.stride=Jd;pd.divisor!==Dd&&(f.vertexAttribDivisorANGLE(ad,Dd),pd.divisor=Dd)}else if(pd.buffer&&(u.disableVertexAttribArray(ad),pd.buffer=null),pd.x!==Fc||pd.y!==od||pd.z!==hd||pd.w!==bd)u.vertexAttrib4f(ad,Fc,od,hd,bd),pd.x=Fc,pd.y=od,pd.z=hd,pd.w=bd;zd=K.call(this,la,h,g);ye=!1;te=null;ve=0;ee=!1;be=de=0;
ue=1;$d=0;he=5126;ke=pe=Uc=zc=0;ka(zd)?(ye=!0,te=C.createStream(34962,zd),he=te.dtype):(te=C.getBuffer(zd))?he=te.dtype:"constant"in zd?(ue=2,"number"===typeof zd.constant?(Uc=zd.constant,pe=ke=zc=0):(Uc=0<zd.constant.length?zd.constant[0]:0,pe=1<zd.constant.length?zd.constant[1]:0,ke=2<zd.constant.length?zd.constant[2]:0,zc=3<zd.constant.length?zd.constant[3]:0)):(te=ka(zd.buffer)?C.createStream(34962,zd.buffer):C.getBuffer(zd.buffer),he="type"in zd?Wd[zd.type]:te.dtype,ee=!!zd.normalized,be=zd.size|
0,de=zd.offset|0,$d=zd.stride|0,ve=zd.divisor|0);Hd=Q.location;Md=V[Hd];if(1===ue){Md.buffer||u.enableVertexAttribArray(Hd);Nd=be||4;if(Md.type!==he||Md.size!==Nd||Md.buffer!==te||Md.normalized!==ee||Md.offset!==de||Md.stride!==$d)u.bindBuffer(34962,te.buffer),u.vertexAttribPointer(Hd,Nd,he,ee,$d,de),Md.type=he,Md.size=Nd,Md.buffer=te,Md.normalized=ee,Md.offset=de,Md.stride=$d;Md.divisor!==ve&&(f.vertexAttribDivisorANGLE(Hd,ve),Md.divisor=ve)}else if(Md.buffer&&(u.disableVertexAttribArray(Hd),Md.buffer=
null),Md.x!==Uc||Md.y!==pe||Md.z!==ke||Md.w!==zc)u.vertexAttrib4f(Hd,Uc,pe,ke,zc),Md.x=Uc,Md.y=pe,Md.z=ke,Md.w=zc;Od=N.call(this,la,h,g);ie=!1;Ce=null;ze=0;me=!1;Pe=Oe=0;Le=1;qe=0;De=5126;Ee=Ie=He=Ge=0;ka(Od)?(ie=!0,Ce=C.createStream(34962,Od),De=Ce.dtype):(Ce=C.getBuffer(Od))?De=Ce.dtype:"constant"in Od?(Le=2,"number"===typeof Od.constant?(He=Od.constant,Ie=Ee=Ge=0):(He=0<Od.constant.length?Od.constant[0]:0,Ie=1<Od.constant.length?Od.constant[1]:0,Ee=2<Od.constant.length?Od.constant[2]:0,Ge=3<Od.constant.length?
Od.constant[3]:0)):(Ce=ka(Od.buffer)?C.createStream(34962,Od.buffer):C.getBuffer(Od.buffer),De="type"in Od?Wd[Od.type]:Ce.dtype,me=!!Od.normalized,Pe=Od.size|0,Oe=Od.offset|0,qe=Od.stride|0,ze=Od.divisor|0);Kd=Ob.location;Rd=V[Kd];if(1===Le){Rd.buffer||u.enableVertexAttribArray(Kd);Yd=Pe||4;if(Rd.type!==De||Rd.size!==Yd||Rd.buffer!==Ce||Rd.normalized!==me||Rd.offset!==Oe||Rd.stride!==qe)u.bindBuffer(34962,Ce.buffer),u.vertexAttribPointer(Kd,Yd,De,me,qe,Oe),Rd.type=De,Rd.size=Yd,Rd.buffer=Ce,Rd.normalized=
me,Rd.offset=Oe,Rd.stride=qe;Rd.divisor!==ze&&(f.vertexAttribDivisorANGLE(Kd,ze),Rd.divisor=ze)}else if(Rd.buffer&&(u.disableVertexAttribArray(Kd),Rd.buffer=null),Rd.x!==He||Rd.y!==Ie||Rd.z!==Ee||Rd.w!==Ge)u.vertexAttrib4f(Kd,He,Ie,Ee,Ge),Rd.x=He,Rd.y=Ie,Rd.z=Ee,Rd.w=Ge;ae=P.call(this,la,h,g);Je=!1;Cd=null;Pd=0;Ae=!1;Id=Ke=0;Xe=1;Qe=0;Me=5126;Se=Re=Ue=We=0;ka(ae)?(Je=!0,Cd=C.createStream(34962,ae),Me=Cd.dtype):(Cd=C.getBuffer(ae))?Me=Cd.dtype:"constant"in ae?(Xe=2,"number"===typeof ae.constant?(Ue=
ae.constant,Re=Se=We=0):(Ue=0<ae.constant.length?ae.constant[0]:0,Re=1<ae.constant.length?ae.constant[1]:0,Se=2<ae.constant.length?ae.constant[2]:0,We=3<ae.constant.length?ae.constant[3]:0)):(Cd=ka(ae.buffer)?C.createStream(34962,ae.buffer):C.getBuffer(ae.buffer),Me="type"in ae?Wd[ae.type]:Cd.dtype,Ae=!!ae.normalized,Id=ae.size|0,Ke=ae.offset|0,Qe=ae.stride|0,Pd=ae.divisor|0);Qd=ma.location;Vd=V[Qd];if(1===Xe){Vd.buffer||u.enableVertexAttribArray(Qd);Te=Id||1;if(Vd.type!==Me||Vd.size!==Te||Vd.buffer!==
Cd||Vd.normalized!==Ae||Vd.offset!==Ke||Vd.stride!==Qe)u.bindBuffer(34962,Cd.buffer),u.vertexAttribPointer(Qd,Te,Me,Ae,Qe,Ke),Vd.type=Me,Vd.size=Te,Vd.buffer=Cd,Vd.normalized=Ae,Vd.offset=Ke,Vd.stride=Qe;Vd.divisor!==Pd&&(f.vertexAttribDivisorANGLE(Qd,Pd),Vd.divisor=Pd)}else if(Vd.buffer&&(u.disableVertexAttribArray(Qd),Vd.buffer=null),Vd.x!==Ue||Vd.y!==Re||Vd.z!==Se||Vd.w!==We)u.vertexAttrib4f(Qd,Ue,Re,Se,We),Vd.x=Ue,Vd.y=Re,Vd.z=Se,Vd.w=We;ef=la.pixelRatio;g&&lf===ef||(lf=ef,u.uniform1f(Ha.location,
ef));bf=h.scale;ff=bf[0];hf=bf[1];g&&gf===ff&&qf===hf||(gf=ff,qf=hf,u.uniform2f(S.location,ff,hf));mf=h.scaleFract;rf=mf[0];Cf=mf[1];g&&Bf===rf&&Ne===Cf||(Bf=rf,Ne=Cf,u.uniform2f(ob.location,rf,Cf));Be=h.translate;nf=Be[0];Df=Be[1];g&&of===nf&&Gf===Df||(of=nf,Gf=Df,u.uniform2f(wa.location,nf,Df));Af=h.translateFract;Ef=Af[0];wf=Af[1];g&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,u.uniform2f(bc.location,Ef,wf));vf=J.call(this,la,h,g);yf=vf[0];If=vf[1];g&&zf===yf&&Jf===If||(zf=yf,Jf=If,u.uniform2f(Na.location,
yf,If));Kf=h.opacity;g&&Lf===Kf||(Lf=Kf,u.uniform1f(Ea.location,Kf));(sf=h.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Qf=sf._texture;u.uniform1i(ea.location,Qf.bind());Hf=h.elements;tf=null;(tf=(cg=ka(Hf))?nc.createStream(Hf):nc.getElements(Hf))&&u.bindBuffer(34963,tf.buffer.buffer);Rf=h.offset;if(Sf=h.count)0<ec?tf?f.drawElementsInstancedANGLE(0,Sf,tf.type,Rf<<(tf.type-5121>>1),ec):f.drawArraysInstancedANGLE(0,Rf,Sf,ec):0>ec&&(tf?u.drawElements(0,Sf,tf.type,Rf<<(tf.type-5121>>
1)):u.drawArrays(0,Rf,Sf)),la.viewportWidth=Ub,la.viewportHeight=Ma,cd&&C.destroyStream(eb),Ra&&C.destroyStream(Kc),Ya&&C.destroyStream(mc),wd&&C.destroyStream(sc),Ye&&C.destroyStream(Bc),oe&&C.destroyStream(Wc),ye&&C.destroyStream(te),ie&&C.destroyStream(Ce),Je&&C.destroyStream(Cd),Qf.unbind(),cg&&nc.destroyStream(tf)}sa.unbind();Ca.dirty=!0;ra.setVAO(null);c&&(A.cpuTime+=performance.now()-e)},draw:function(a){var c,e,f,h,l,m,n,z,E,B,G,N,L,I,K,M,J,P,R,ha,T,U,W,X,ja,aa,fa,Z,qa,sa,na,pa,La,Eb,Wa,ta,
Ka,hb,Sa,Gb,db,Qa,Sb,cb,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,kc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Dd,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,ve,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,Id,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe;c=D.next;c!==D.cur&&(c?u.bindFramebuffer(36160,c.framebuffer):u.bindFramebuffer(36160,
null),D.cur=c);if(Ca.dirty){var De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf;De=va.dither;De!==Ca.dither&&(De?u.enable(3024):u.disable(3024),Ca.dither=De);Ge=ca[0];He=ca[1];if(Ge!==x[0]||He!==x[1])u.blendEquationSeparate(Ge,He),x[0]=Ge,x[1]=He;Ie=va.depth_func;Ie!==Ca.depth_func&&(u.depthFunc(Ie),Ca.depth_func=Ie);Ee=ba[0];Kd=ba[1];if(Ee!==r[0]||Kd!==r[1])u.depthRange(Ee,Kd),r[0]=Ee,r[1]=Kd;Rd=va.depth_mask;Rd!==Ca.depth_mask&&(u.depthMask(Rd),
Ca.depth_mask=Rd);Yd=k[0];ae=k[1];Je=k[2];Cd=k[3];if(Yd!==tc[0]||ae!==tc[1]||Je!==tc[2]||Cd!==tc[3])u.colorMask(Yd,ae,Je,Cd),tc[0]=Yd,tc[1]=ae,tc[2]=Je,tc[3]=Cd;Pd=va.cull_enable;Pd!==Ca.cull_enable&&(Pd?u.enable(2884):u.disable(2884),Ca.cull_enable=Pd);Ae=va.cull_face;Ae!==Ca.cull_face&&(u.cullFace(Ae),Ca.cull_face=Ae);Ke=va.frontFace;Ke!==Ca.frontFace&&(u.frontFace(Ke),Ca.frontFace=Ke);pf=va.lineWidth;pf!==Ca.lineWidth&&(u.lineWidth(pf),Ca.lineWidth=pf);Xe=va.polygonOffset_enable;Xe!==Ca.polygonOffset_enable&&
(Xe?u.enable(32823):u.disable(32823),Ca.polygonOffset_enable=Xe);Qe=Bb[0];Me=Bb[1];if(Qe!==yb[0]||Me!==yb[1])u.polygonOffset(Qe,Me),yb[0]=Qe,yb[1]=Me;We=va.sample_alpha;We!==Ca.sample_alpha&&(We?u.enable(32926):u.disable(32926),Ca.sample_alpha=We);Ue=va.sample_enable;Ue!==Ca.sample_enable&&(Ue?u.enable(32928):u.disable(32928),Ca.sample_enable=Ue);Re=jc[0];Se=jc[1];if(Re!==ne[0]||Se!==ne[1])u.sampleCoverage(Re,Se),ne[0]=Re,ne[1]=Se;Qd=va.stencil_mask;Qd!==Ca.stencil_mask&&(u.stencilMask(Qd),Ca.stencil_mask=
Qd);Vd=Ed[0];Te=Ed[1];ef=Ed[2];if(Vd!==re[0]||Te!==re[1]||ef!==re[2])u.stencilFunc(Vd,Te,ef),re[0]=Vd,re[1]=Te,re[2]=ef;lf=se[0];bf=se[1];ff=se[2];gf=se[3];if(lf!==xd[0]||bf!==xd[1]||ff!==xd[2]||gf!==xd[3])u.stencilOpSeparate(lf,bf,ff,gf),xd[0]=lf,xd[1]=bf,xd[2]=ff,xd[3]=gf;hf=qd[0];qf=qd[1];mf=qd[2];rf=qd[3];if(hf!==fe[0]||qf!==fe[1]||mf!==fe[2]||rf!==fe[3])u.stencilOpSeparate(hf,qf,mf,rf),fe[0]=hf,fe[1]=qf,fe[2]=mf,fe[3]=rf}e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:la.framebufferWidth-
f;m="height"in e?e.height|0:la.framebufferHeight-h;n=la.viewportWidth;la.viewportWidth=l;z=la.viewportHeight;la.viewportHeight=m;u.viewport(f,h,l,m);Zd[0]=f;Zd[1]=h;Zd[2]=l;Zd[3]=m;u.blendColor(0,0,0,1);p[0]=0;p[1]=0;p[2]=0;p[3]=1;u.enable(3042);Ca.blend_enable=!0;u.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;u.disable(2929);Ca.depth_enable=!1;E=a.viewport;B=E.x|0;G=E.y|0;N="width"in E?E.width|0:la.framebufferWidth-B;L="height"in E?E.height|0:la.framebufferHeight-G;u.scissor(B,
G,N,L);je[0]=B;je[1]=G;je[2]=N;je[3]=L;u.enable(3089);Ca.scissor_enable=!0;u.disable(2960);Ca.stencil_enable=!1;if(I=Ca.profile)K=performance.now(),A.count++;u.useProgram(q.program);M=Zc.angle_instanced_arrays;ra.setVAO(null);J=O.call(this,la,a,0);P=!1;R=null;ha=0;T=!1;W=U=0;X=1;ja=0;aa=5126;sa=qa=Z=fa=0;ka(J)?(P=!0,R=C.createStream(34962,J),aa=R.dtype):(R=C.getBuffer(J))?aa=R.dtype:"constant"in J?(X=2,"number"===typeof J.constant?(Z=J.constant,qa=sa=fa=0):(Z=0<J.constant.length?J.constant[0]:0,qa=
1<J.constant.length?J.constant[1]:0,sa=2<J.constant.length?J.constant[2]:0,fa=3<J.constant.length?J.constant[3]:0)):(R=ka(J.buffer)?C.createStream(34962,J.buffer):C.getBuffer(J.buffer),aa="type"in J?Wd[J.type]:R.dtype,T=!!J.normalized,W=J.size|0,U=J.offset|0,ja=J.stride|0,ha=J.divisor|0);na=cc.location;pa=V[na];if(1===X){pa.buffer||u.enableVertexAttribArray(na);La=W||1;if(pa.type!==aa||pa.size!==La||pa.buffer!==R||pa.normalized!==T||pa.offset!==U||pa.stride!==ja)u.bindBuffer(34962,R.buffer),u.vertexAttribPointer(na,
La,aa,T,ja,U),pa.type=aa,pa.size=La,pa.buffer=R,pa.normalized=T,pa.offset=U,pa.stride=ja;pa.divisor!==ha&&(M.vertexAttribDivisorANGLE(na,ha),pa.divisor=ha)}else if(pa.buffer&&(u.disableVertexAttribArray(na),pa.buffer=null),pa.x!==Z||pa.y!==qa||pa.z!==sa||pa.w!==fa)u.vertexAttrib4f(na,Z,qa,sa,fa),pa.x=Z,pa.y=qa,pa.z=sa,pa.w=fa;Eb=g.call(this,la,a,0);Wa=!1;ta=null;Ka=0;hb=!1;Gb=Sa=0;db=1;Qa=0;Sb=5126;fd=Tb=Zb=cb=0;ka(Eb)?(Wa=!0,ta=C.createStream(34962,Eb),Sb=ta.dtype):(ta=C.getBuffer(Eb))?Sb=ta.dtype:
"constant"in Eb?(db=2,"number"===typeof Eb.constant?(Zb=Eb.constant,Tb=fd=cb=0):(Zb=0<Eb.constant.length?Eb.constant[0]:0,Tb=1<Eb.constant.length?Eb.constant[1]:0,fd=2<Eb.constant.length?Eb.constant[2]:0,cb=3<Eb.constant.length?Eb.constant[3]:0)):(ta=ka(Eb.buffer)?C.createStream(34962,Eb.buffer):C.getBuffer(Eb.buffer),Sb="type"in Eb?Wd[Eb.type]:ta.dtype,hb=!!Eb.normalized,Gb=Eb.size|0,Sa=Eb.offset|0,Qa=Eb.stride|0,Ka=Eb.divisor|0);Ub=td.location;Ma=V[Ub];if(1===db){Ma.buffer||u.enableVertexAttribArray(Ub);
pb=Gb||1;if(Ma.type!==Sb||Ma.size!==pb||Ma.buffer!==ta||Ma.normalized!==hb||Ma.offset!==Sa||Ma.stride!==Qa)u.bindBuffer(34962,ta.buffer),u.vertexAttribPointer(Ub,pb,Sb,hb,Qa,Sa),Ma.type=Sb,Ma.size=pb,Ma.buffer=ta,Ma.normalized=hb,Ma.offset=Sa,Ma.stride=Qa;Ma.divisor!==Ka&&(M.vertexAttribDivisorANGLE(Ub,Ka),Ma.divisor=Ka)}else if(Ma.buffer&&(u.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==Zb||Ma.y!==Tb||Ma.z!==fd||Ma.w!==cb)u.vertexAttrib4f(Ub,Zb,Tb,fd,cb),Ma.x=Zb,Ma.y=Tb,Ma.z=fd,Ma.w=cb;ub=
d.call(this,la,a,0);ib=!1;Oa=null;Dc=0;Ib=!1;eb=cd=0;lc=1;dd=0;dc=5126;qb=ua=lb=kb=0;ka(ub)?(ib=!0,Oa=C.createStream(34962,ub),dc=Oa.dtype):(Oa=C.getBuffer(ub))?dc=Oa.dtype:"constant"in ub?(lc=2,"number"===typeof ub.constant?(lb=ub.constant,ua=qb=kb=0):(lb=0<ub.constant.length?ub.constant[0]:0,ua=1<ub.constant.length?ub.constant[1]:0,qb=2<ub.constant.length?ub.constant[2]:0,kb=3<ub.constant.length?ub.constant[3]:0)):(Oa=ka(ub.buffer)?C.createStream(34962,ub.buffer):C.getBuffer(ub.buffer),dc="type"in
ub?Wd[ub.type]:Oa.dtype,Ib=!!ub.normalized,eb=ub.size|0,cd=ub.offset|0,dd=ub.stride|0,Dc=ub.divisor|0);xa=Qc.location;Ua=V[xa];if(1===lc){Ua.buffer||u.enableVertexAttribArray(xa);bb=eb||1;if(Ua.type!==dc||Ua.size!==bb||Ua.buffer!==Oa||Ua.normalized!==Ib||Ua.offset!==cd||Ua.stride!==dd)u.bindBuffer(34962,Oa.buffer),u.vertexAttribPointer(xa,bb,dc,Ib,dd,cd),Ua.type=dc,Ua.size=bb,Ua.buffer=Oa,Ua.normalized=Ib,Ua.offset=cd,Ua.stride=dd;Ua.divisor!==Dc&&(M.vertexAttribDivisorANGLE(xa,Dc),Ua.divisor=Dc)}else if(Ua.buffer&&
(u.disableVertexAttribArray(xa),Ua.buffer=null),Ua.x!==lb||Ua.y!==ua||Ua.z!==qb||Ua.w!==kb)u.vertexAttrib4f(xa,lb,ua,qb,kb),Ua.x=lb,Ua.y=ua,Ua.z=qb,Ua.w=kb;Aa=y.call(this,la,a,0);fb=!1;Ia=null;Ab=0;zb=!1;Kc=Ra=0;Jb=1;Za=0;Vb=5126;Pb=Ja=kc=ya=0;ka(Aa)?(fb=!0,Ia=C.createStream(34962,Aa),Vb=Ia.dtype):(Ia=C.getBuffer(Aa))?Vb=Ia.dtype:"constant"in Aa?(Jb=2,"number"===typeof Aa.constant?(kc=Aa.constant,Ja=Pb=ya=0):(kc=0<Aa.constant.length?Aa.constant[0]:0,Ja=1<Aa.constant.length?Aa.constant[1]:0,Pb=2<Aa.constant.length?
Aa.constant[2]:0,ya=3<Aa.constant.length?Aa.constant[3]:0)):(Ia=ka(Aa.buffer)?C.createStream(34962,Aa.buffer):C.getBuffer(Aa.buffer),Vb="type"in Aa?Wd[Aa.type]:Ia.dtype,zb=!!Aa.normalized,Kc=Aa.size|0,Ra=Aa.offset|0,Za=Aa.stride|0,Ab=Aa.divisor|0);gb=wc.location;jb=V[gb];if(1===Jb){jb.buffer||u.enableVertexAttribArray(gb);za=Kc||1;if(jb.type!==Vb||jb.size!==za||jb.buffer!==Ia||jb.normalized!==zb||jb.offset!==Ra||jb.stride!==Za)u.bindBuffer(34962,Ia.buffer),u.vertexAttribPointer(gb,za,Vb,zb,Za,Ra),
jb.type=Vb,jb.size=za,jb.buffer=Ia,jb.normalized=zb,jb.offset=Ra,jb.stride=Za;jb.divisor!==Ab&&(M.vertexAttribDivisorANGLE(gb,Ab),jb.divisor=Ab)}else if(jb.buffer&&(u.disableVertexAttribArray(gb),jb.buffer=null),jb.x!==kc||jb.y!==Ja||jb.z!==Pb||jb.w!==ya)u.vertexAttrib4f(gb,kc,Ja,Pb,ya),jb.x=kc,jb.y=Ja,jb.z=Pb,jb.w=ya;fc=b.call(this,la,a,0);Da=!1;rb=null;sb=0;Xa=!1;mc=Ya=0;xc=1;uc=0;Va=5126;yc=Fa=Xc=Mb=0;ka(fc)?(Da=!0,rb=C.createStream(34962,fc),Va=rb.dtype):(rb=C.getBuffer(fc))?Va=rb.dtype:"constant"in
fc?(xc=2,"number"===typeof fc.constant?(Xc=fc.constant,Fa=yc=Mb=0):(Xc=0<fc.constant.length?fc.constant[0]:0,Fa=1<fc.constant.length?fc.constant[1]:0,yc=2<fc.constant.length?fc.constant[2]:0,Mb=3<fc.constant.length?fc.constant[3]:0)):(rb=ka(fc.buffer)?C.createStream(34962,fc.buffer):C.getBuffer(fc.buffer),Va="type"in fc?Wd[fc.type]:rb.dtype,Xa=!!fc.normalized,mc=fc.size|0,Ya=fc.offset|0,uc=fc.stride|0,sb=fc.divisor|0);Pa=da.location;Ba=V[Pa];if(1===xc){Ba.buffer||u.enableVertexAttribArray(Pa);mb=
mc||1;if(Ba.type!==Va||Ba.size!==mb||Ba.buffer!==rb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==uc)u.bindBuffer(34962,rb.buffer),u.vertexAttribPointer(Pa,mb,Va,Xa,uc,Ya),Ba.type=Va,Ba.size=mb,Ba.buffer=rb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=uc;Ba.divisor!==sb&&(M.vertexAttribDivisorANGLE(Pa,sb),Ba.divisor=sb)}else if(Ba.buffer&&(u.disableVertexAttribArray(Pa),Ba.buffer=null),Ba.x!==Xc||Ba.y!==Fa||Ba.z!==yc||Ba.w!==Mb)u.vertexAttrib4f(Pa,Xc,Fa,yc,Mb),Ba.x=Xc,Ba.y=Fa,Ba.z=yc,Ba.w=Mb;vb=v.call(this,
la,a,0);Cb=!1;tb=null;vc=0;wb=!1;sc=wd=0;ud=1;Mc=0;ld=5126;Qb=ac=Wb=sd=0;ka(vb)?(Cb=!0,tb=C.createStream(34962,vb),ld=tb.dtype):(tb=C.getBuffer(vb))?ld=tb.dtype:"constant"in vb?(ud=2,"number"===typeof vb.constant?(Wb=vb.constant,ac=Qb=sd=0):(Wb=0<vb.constant.length?vb.constant[0]:0,ac=1<vb.constant.length?vb.constant[1]:0,Qb=2<vb.constant.length?vb.constant[2]:0,sd=3<vb.constant.length?vb.constant[3]:0)):(tb=ka(vb.buffer)?C.createStream(34962,vb.buffer):C.getBuffer(vb.buffer),ld="type"in vb?Wd[vb.type]:
tb.dtype,wb=!!vb.normalized,sc=vb.size|0,wd=vb.offset|0,Mc=vb.stride|0,vc=vb.divisor|0);Ga=$a.location;Yb=V[Ga];if(1===ud){Yb.buffer||u.enableVertexAttribArray(Ga);nb=sc||1;if(Yb.type!==ld||Yb.size!==nb||Yb.buffer!==tb||Yb.normalized!==wb||Yb.offset!==wd||Yb.stride!==Mc)u.bindBuffer(34962,tb.buffer),u.vertexAttribPointer(Ga,nb,ld,wb,Mc,wd),Yb.type=ld,Yb.size=nb,Yb.buffer=tb,Yb.normalized=wb,Yb.offset=wd,Yb.stride=Mc;Yb.divisor!==vc&&(M.vertexAttribDivisorANGLE(Ga,vc),Yb.divisor=vc)}else if(Yb.buffer&&
(u.disableVertexAttribArray(Ga),Yb.buffer=null),Yb.x!==Wb||Yb.y!==ac||Yb.z!==Qb||Yb.w!==sd)u.vertexAttrib4f(Ga,Wb,ac,Qb,sd),Yb.x=Wb,Yb.y=ac,Yb.z=Qb,Yb.w=sd;xb=oa.call(this,la,a,0);Nb=!1;Rb=null;gc=0;ic=!1;Bc=Dd=0;Cc=1;Ec=0;Nc=5126;Kb=Oc=Sc=Yc=0;ka(xb)?(Nb=!0,Rb=C.createStream(34962,xb),Nc=Rb.dtype):(Rb=C.getBuffer(xb))?Nc=Rb.dtype:"constant"in xb?(Cc=2,"number"===typeof xb.constant?(Sc=xb.constant,Oc=Kb=Yc=0):(Sc=0<xb.constant.length?xb.constant[0]:0,Oc=1<xb.constant.length?xb.constant[1]:0,Kb=2<
xb.constant.length?xb.constant[2]:0,Yc=3<xb.constant.length?xb.constant[3]:0)):(Rb=ka(xb.buffer)?C.createStream(34962,xb.buffer):C.getBuffer(xb.buffer),Nc="type"in xb?Wd[xb.type]:Rb.dtype,ic=!!xb.normalized,Bc=xb.size|0,Dd=xb.offset|0,Ec=xb.stride|0,gc=xb.divisor|0);Fb=Q.location;Pc=V[Fb];if(1===Cc){Pc.buffer||u.enableVertexAttribArray(Fb);Hc=Bc||4;if(Pc.type!==Nc||Pc.size!==Hc||Pc.buffer!==Rb||Pc.normalized!==ic||Pc.offset!==Dd||Pc.stride!==Ec)u.bindBuffer(34962,Rb.buffer),u.vertexAttribPointer(Fb,
Hc,Nc,ic,Ec,Dd),Pc.type=Nc,Pc.size=Hc,Pc.buffer=Rb,Pc.normalized=ic,Pc.offset=Dd,Pc.stride=Ec;Pc.divisor!==gc&&(M.vertexAttribDivisorANGLE(Fb,gc),Pc.divisor=gc)}else if(Pc.buffer&&(u.disableVertexAttribArray(Fb),Pc.buffer=null),Pc.x!==Sc||Pc.y!==Oc||Pc.z!==Kb||Pc.w!==Yc)u.vertexAttrib4f(Fb,Sc,Oc,Kb,Yc),Pc.x=Sc,Pc.y=Oc,Pc.z=Kb,Pc.w=Yc;Tc=Y.call(this,la,a,0);hc=!1;Vc=null;nd=0;gd=!1;Wc=oe=0;ve=1;Ld=0;we=5126;Gd=Jd=Ud=xe=0;ka(Tc)?(hc=!0,Vc=C.createStream(34962,Tc),we=Vc.dtype):(Vc=C.getBuffer(Tc))?we=
Vc.dtype:"constant"in Tc?(ve=2,"number"===typeof Tc.constant?(Ud=Tc.constant,Jd=Gd=xe=0):(Ud=0<Tc.constant.length?Tc.constant[0]:0,Jd=1<Tc.constant.length?Tc.constant[1]:0,Gd=2<Tc.constant.length?Tc.constant[2]:0,xe=3<Tc.constant.length?Tc.constant[3]:0)):(Vc=ka(Tc.buffer)?C.createStream(34962,Tc.buffer):C.getBuffer(Tc.buffer),we="type"in Tc?Wd[Tc.type]:Vc.dtype,gd=!!Tc.normalized,Wc=Tc.size|0,oe=Tc.offset|0,Ld=Tc.stride|0,nd=Tc.divisor|0);bd=Ob.location;Fc=V[bd];if(1===ve){Fc.buffer||u.enableVertexAttribArray(bd);
od=Wc||4;if(Fc.type!==we||Fc.size!==od||Fc.buffer!==Vc||Fc.normalized!==gd||Fc.offset!==oe||Fc.stride!==Ld)u.bindBuffer(34962,Vc.buffer),u.vertexAttribPointer(bd,od,we,gd,Ld,oe),Fc.type=we,Fc.size=od,Fc.buffer=Vc,Fc.normalized=gd,Fc.offset=oe,Fc.stride=Ld;Fc.divisor!==nd&&(M.vertexAttribDivisorANGLE(bd,nd),Fc.divisor=nd)}else if(Fc.buffer&&(u.disableVertexAttribArray(bd),Fc.buffer=null),Fc.x!==Ud||Fc.y!==Jd||Fc.z!==Gd||Fc.w!==xe)u.vertexAttrib4f(bd,Ud,Jd,Gd,xe),Fc.x=Ud,Fc.y=Jd,Fc.z=Gd,Fc.w=xe;hd=
H.call(this,la,a,0);ad=!1;pd=null;yd=0;zd=!1;te=ye=0;Id=1;ee=0;de=5126;he=$d=ue=be=0;ka(hd)?(ad=!0,pd=C.createStream(34962,hd),de=pd.dtype):(pd=C.getBuffer(hd))?de=pd.dtype:"constant"in hd?(Id=2,"number"===typeof hd.constant?(ue=hd.constant,$d=he=be=0):(ue=0<hd.constant.length?hd.constant[0]:0,$d=1<hd.constant.length?hd.constant[1]:0,he=2<hd.constant.length?hd.constant[2]:0,be=3<hd.constant.length?hd.constant[3]:0)):(pd=ka(hd.buffer)?C.createStream(34962,hd.buffer):C.getBuffer(hd.buffer),de="type"in
hd?Wd[hd.type]:pd.dtype,zd=!!hd.normalized,te=hd.size|0,ye=hd.offset|0,ee=hd.stride|0,yd=hd.divisor|0);zc=ma.location;Uc=V[zc];if(1===Id){Uc.buffer||u.enableVertexAttribArray(zc);pe=te||1;if(Uc.type!==de||Uc.size!==pe||Uc.buffer!==pd||Uc.normalized!==zd||Uc.offset!==ye||Uc.stride!==ee)u.bindBuffer(34962,pd.buffer),u.vertexAttribPointer(zc,pe,de,zd,ee,ye),Uc.type=de,Uc.size=pe,Uc.buffer=pd,Uc.normalized=zd,Uc.offset=ye,Uc.stride=ee;Uc.divisor!==yd&&(M.vertexAttribDivisorANGLE(zc,yd),Uc.divisor=yd)}else if(Uc.buffer&&
(u.disableVertexAttribArray(zc),Uc.buffer=null),Uc.x!==ue||Uc.y!==$d||Uc.z!==he||Uc.w!==be)u.vertexAttrib4f(zc,ue,$d,he,be),Uc.x=ue,Uc.y=$d,Uc.z=he,Uc.w=be;u.uniform1i(t.location,!1);u.uniform1f(Ha.location,la.pixelRatio);ke=a.scale;u.uniform2f(S.location,ke[0],ke[1]);Hd=a.scaleFract;u.uniform2f(ob.location,Hd[0],Hd[1]);Md=a.translate;u.uniform2f(wa.location,Md[0],Md[1]);Nd=a.translateFract;u.uniform2f(bc.location,Nd[0],Nd[1]);Od=F.call(this,la,a,0);u.uniform2f(Na.location,Od[0],Od[1]);u.uniform1f(Ea.location,
a.opacity);u.uniform1i(Hb.location,w.bind());(ie=a.markerTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);Ce=ie._texture;u.uniform1i(ea.location,Ce.bind());ze=a.elements;me=null;(me=(Oe=ka(ze))?nc.createStream(ze):nc.getElements(ze))&&u.bindBuffer(34963,me.buffer.buffer);Pe=a.offset;if(Le=a.count)qe=Lb.instances,0<qe?me?M.drawElementsInstancedANGLE(0,Le,me.type,Pe<<(me.type-5121>>1),qe):M.drawArraysInstancedANGLE(0,Pe,Le,qe):0>qe&&(me?u.drawElements(0,Le,me.type,Pe<<(me.type-5121>>1)):u.drawArrays(0,
Pe,Le)),Ca.dirty=!0,ra.setVAO(null),la.viewportWidth=n,la.viewportHeight=z,I&&(A.cpuTime+=performance.now()-K),P&&C.destroyStream(R),Wa&&C.destroyStream(ta),ib&&C.destroyStream(Oa),fb&&C.destroyStream(Ia),Da&&C.destroyStream(rb),Cb&&C.destroyStream(tb),Nb&&C.destroyStream(Rb),hc&&C.destroyStream(Vc),ad&&C.destroyStream(pd),w.unbind(),Ce.unbind(),Oe&&nc.destroyStream(me)},scope:function(b,d,c){var g,k,p,r,q,u,t,v,w,x,y,D,O,J,F,N,H,V,K,ca,Q,P,ba,S,ia,X,Y,ea,oa,da,ma,pa,ra,ta,sa,wa,na,Ha,Ea,Ka,Na,yb,
Qa,Bb,wc,$a,Ma,pb,ub,ib,Oa,ob,Ib,cb,eb,td,tc,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Ob,Jb,Za,Vb,ya,Hb,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,bc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,cc,sc,Qc,Mc,kc,qd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,je,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,Ed,Wc,Zc,jc,Zd,xd,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,fe,re,se,ee,de,be,ne,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,jf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,
gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,pg,cf,Ze,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;g=b.viewport;k=g.x|0;p=g.y|0;r="width"in g?g.width|0:la.framebufferWidth-k;q="height"in g?g.height|0:la.framebufferHeight-p;u=la.viewportWidth;la.viewportWidth=r;t=la.viewportHeight;la.viewportHeight=q;v=Dd[0];Dd[0]=k;w=Dd[1];Dd[1]=p;x=Dd[2];
Dd[2]=r;y=Dd[3];Dd[3]=q;D=E[0];E[0]=0;O=E[1];E[1]=0;J=E[2];E[2]=0;F=E[3];E[3]=1;N=va.blend_enable;va.blend_enable=!0;H=ja[0];ja[0]=770;V=ja[1];ja[1]=771;K=ja[2];ja[2]=773;ca=ja[3];ja[3]=1;Q=va.depth_enable;va.depth_enable=!1;P=b.viewport;ba=P.x|0;S=P.y|0;ia="width"in P?P.width|0:la.framebufferWidth-ba;X="height"in P?P.height|0:la.framebufferHeight-S;Y=ve[0];ve[0]=ba;ea=ve[1];ve[1]=S;oa=ve[2];ve[2]=ia;da=ve[3];ve[3]=X;ma=va.scissor_enable;va.scissor_enable=!0;pa=va.stencil_enable;va.stencil_enable=
!1;if(ra=Ca.profile)ta=performance.now(),A.count++;sa=b.elements;wa=null;wa=(na=ka(sa))?nc.createStream(sa):nc.getElements(sa);Ha=Lb.elements;Lb.elements=wa;Ea=b.offset;Ka=Lb.offset;Lb.offset=Ea;Na=b.count;yb=Lb.count;Lb.count=Na;Qa=Lb.primitive;Lb.primitive=0;Bb=ha[45];ha[45]=!1;wc=b.markerTexture;$a=ha[48];ha[48]=wc;Ma=b.opacity;pb=ha[10];ha[10]=Ma;ub=B.call(this,la,b,c);ib=ha[46];ha[46]=ub;Oa=ha[47];ha[47]=M;ob=la.pixelRatio;Ib=ha[34];ha[34]=ob;cb=b.scale;eb=ha[6];ha[6]=cb;td=b.scaleFract;tc=ha[7];
ha[7]=td;dc=b.translate;kb=ha[8];ha[8]=dc;lb=b.translateFract;ua=ha[9];ha[9]=lb;qb=n.call(this,la,b,c);xa=!1;Ua=null;bb=0;Aa=!1;Ia=fb=0;Ab=1;zb=0;Ra=5126;Vb=Za=Jb=Ob=0;ka(qb)?(xa=!0,Ua=C.createStream(34962,qb),Ra=Ua.dtype):(Ua=C.getBuffer(qb))?Ra=Ua.dtype:"constant"in qb?(Ab=2,"number"===typeof qb.constant?(Jb=qb.constant,Za=Vb=Ob=0):(Jb=0<qb.constant.length?qb.constant[0]:0,Za=1<qb.constant.length?qb.constant[1]:0,Vb=2<qb.constant.length?qb.constant[2]:0,Ob=3<qb.constant.length?qb.constant[3]:0)):
(Ua=ka(qb.buffer)?C.createStream(34962,qb.buffer):C.getBuffer(qb.buffer),Ra="type"in qb?Wd[qb.type]:Ua.dtype,Aa=!!qb.normalized,Ia=qb.size|0,fb=qb.offset|0,zb=qb.stride|0,bb=qb.divisor|0);ya=G.buffer;G.buffer=Ua;Hb=G.divisor;G.divisor=bb;Ja=G.normalized;G.normalized=Aa;Pb=G.offset;G.offset=fb;gb=G.size;G.size=Ia;jb=G.state;G.state=Ab;za=G.stride;G.stride=zb;fc=G.type;G.type=Ra;Da=G.w;G.w=Ob;rb=G.x;G.x=Jb;sb=G.y;G.y=Za;Xa=G.z;G.z=Vb;Ya=aa.call(this,la,b,c);mc=!1;xc=null;uc=0;Va=!1;bc=Mb=0;Fa=1;yc=
0;Pa=5126;Cb=vb=mb=Ba=0;ka(Ya)?(mc=!0,xc=C.createStream(34962,Ya),Pa=xc.dtype):(xc=C.getBuffer(Ya))?Pa=xc.dtype:"constant"in Ya?(Fa=2,"number"===typeof Ya.constant?(mb=Ya.constant,vb=Cb=Ba=0):(mb=0<Ya.constant.length?Ya.constant[0]:0,vb=1<Ya.constant.length?Ya.constant[1]:0,Cb=2<Ya.constant.length?Ya.constant[2]:0,Ba=3<Ya.constant.length?Ya.constant[3]:0)):(xc=ka(Ya.buffer)?C.createStream(34962,Ya.buffer):C.getBuffer(Ya.buffer),Pa="type"in Ya?Wd[Ya.type]:xc.dtype,Va=!!Ya.normalized,bc=Ya.size|0,Mb=
Ya.offset|0,yc=Ya.stride|0,uc=Ya.divisor|0);tb=I.buffer;I.buffer=xc;vc=I.divisor;I.divisor=uc;wb=I.normalized;I.normalized=Va;cc=I.offset;I.offset=Mb;sc=I.size;I.size=bc;Qc=I.state;I.state=Fa;Mc=I.stride;I.stride=yc;kc=I.type;I.type=Pa;qd=I.w;I.w=Ba;Wb=I.x;I.x=mb;ac=I.y;I.y=vb;Qb=I.z;I.z=Cb;Ga=Z.call(this,la,b,c);Yb=!1;nb=null;xb=0;Nb=!1;gc=Rb=0;ic=1;je=0;Bc=5126;Yc=Nc=Ec=Cc=0;ka(Ga)?(Yb=!0,nb=C.createStream(34962,Ga),Bc=nb.dtype):(nb=C.getBuffer(Ga))?Bc=nb.dtype:"constant"in Ga?(ic=2,"number"===
typeof Ga.constant?(Ec=Ga.constant,Nc=Yc=Cc=0):(Ec=0<Ga.constant.length?Ga.constant[0]:0,Nc=1<Ga.constant.length?Ga.constant[1]:0,Yc=2<Ga.constant.length?Ga.constant[2]:0,Cc=3<Ga.constant.length?Ga.constant[3]:0)):(nb=ka(Ga.buffer)?C.createStream(34962,Ga.buffer):C.getBuffer(Ga.buffer),Bc="type"in Ga?Wd[Ga.type]:nb.dtype,Nb=!!Ga.normalized,gc=Ga.size|0,Rb=Ga.offset|0,je=Ga.stride|0,xb=Ga.divisor|0);Sc=f.buffer;f.buffer=nb;Oc=f.divisor;f.divisor=xb;Kb=f.normalized;f.normalized=Nb;Fb=f.offset;f.offset=
Rb;Pc=f.size;f.size=gc;Hc=f.state;f.state=ic;Tc=f.stride;f.stride=je;hc=f.type;f.type=Bc;Vc=f.w;f.w=Cc;nd=f.x;f.x=Ec;gd=f.y;f.y=Nc;Ed=f.z;f.z=Yc;Wc=h.call(this,la,b,c);Zc=!1;jc=null;Zd=0;xd=!1;Jd=Ud=0;Gd=1;bd=0;Fc=5126;pd=ad=hd=od=0;ka(Wc)?(Zc=!0,jc=C.createStream(34962,Wc),Fc=jc.dtype):(jc=C.getBuffer(Wc))?Fc=jc.dtype:"constant"in Wc?(Gd=2,"number"===typeof Wc.constant?(hd=Wc.constant,ad=pd=od=0):(hd=0<Wc.constant.length?Wc.constant[0]:0,ad=1<Wc.constant.length?Wc.constant[1]:0,pd=2<Wc.constant.length?
Wc.constant[2]:0,od=3<Wc.constant.length?Wc.constant[3]:0)):(jc=ka(Wc.buffer)?C.createStream(34962,Wc.buffer):C.getBuffer(Wc.buffer),Fc="type"in Wc?Wd[Wc.type]:jc.dtype,xd=!!Wc.normalized,Jd=Wc.size|0,Ud=Wc.offset|0,bd=Wc.stride|0,Zd=Wc.divisor|0);yd=e.buffer;e.buffer=jc;zd=e.divisor;e.divisor=Zd;fe=e.normalized;e.normalized=xd;re=e.offset;e.offset=Ud;se=e.size;e.size=Jd;ee=e.state;e.state=Gd;de=e.stride;e.stride=bd;be=e.type;e.type=Fc;ne=e.w;e.w=od;$d=e.x;e.x=hd;he=e.y;e.y=ad;zc=e.z;e.z=pd;Uc=z.call(this,
la,b,c);pe=!1;ke=null;Hd=0;Md=!1;Od=Nd=0;ie=1;Ce=0;ze=5126;Le=Pe=Oe=me=0;ka(Uc)?(pe=!0,ke=C.createStream(34962,Uc),ze=ke.dtype):(ke=C.getBuffer(Uc))?ze=ke.dtype:"constant"in Uc?(ie=2,"number"===typeof Uc.constant?(Oe=Uc.constant,Pe=Le=me=0):(Oe=0<Uc.constant.length?Uc.constant[0]:0,Pe=1<Uc.constant.length?Uc.constant[1]:0,Le=2<Uc.constant.length?Uc.constant[2]:0,me=3<Uc.constant.length?Uc.constant[3]:0)):(ke=ka(Uc.buffer)?C.createStream(34962,Uc.buffer):C.getBuffer(Uc.buffer),ze="type"in Uc?Wd[Uc.type]:
ke.dtype,Md=!!Uc.normalized,Od=Uc.size|0,Nd=Uc.offset|0,Ce=Uc.stride|0,Hd=Uc.divisor|0);qe=T.buffer;T.buffer=ke;De=T.divisor;T.divisor=Hd;Ge=T.normalized;T.normalized=Md;He=T.offset;T.offset=Nd;Ie=T.size;T.size=Od;Ee=T.state;T.state=ie;Kd=T.stride;T.stride=Ce;Rd=T.type;T.type=ze;Yd=T.w;T.w=me;ae=T.x;T.x=Oe;Je=T.y;T.y=Pe;Cd=T.z;T.z=Le;Pd=U.call(this,la,b,c);Ae=!1;Ke=null;jf=0;Xe=!1;Me=Qe=0;We=1;Ue=0;Re=5126;Te=Vd=Qd=Se=0;ka(Pd)?(Ae=!0,Ke=C.createStream(34962,Pd),Re=Ke.dtype):(Ke=C.getBuffer(Pd))?Re=
Ke.dtype:"constant"in Pd?(We=2,"number"===typeof Pd.constant?(Qd=Pd.constant,Vd=Te=Se=0):(Qd=0<Pd.constant.length?Pd.constant[0]:0,Vd=1<Pd.constant.length?Pd.constant[1]:0,Te=2<Pd.constant.length?Pd.constant[2]:0,Se=3<Pd.constant.length?Pd.constant[3]:0)):(Ke=ka(Pd.buffer)?C.createStream(34962,Pd.buffer):C.getBuffer(Pd.buffer),Re="type"in Pd?Wd[Pd.type]:Ke.dtype,Xe=!!Pd.normalized,Me=Pd.size|0,Qe=Pd.offset|0,Ue=Pd.stride|0,jf=Pd.divisor|0);ef=m.buffer;m.buffer=Ke;lf=m.divisor;m.divisor=jf;bf=m.normalized;
m.normalized=Xe;ff=m.offset;m.offset=Qe;gf=m.size;m.size=Me;hf=m.state;m.state=We;qf=m.stride;m.stride=Ue;mf=m.type;m.type=Re;rf=m.w;m.w=Se;Bf=m.x;m.x=Qd;Cf=m.y;m.y=Vd;Ne=m.z;m.z=Te;Be=qa.call(this,la,b,c);nf=!1;of=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;ka(Be)?(nf=!0,of=C.createStream(34962,Be),xf=of.dtype):(of=C.getBuffer(Be))?xf=of.dtype:"constant"in Be?(Ff=2,"number"===typeof Be.constant?(yf=Be.constant,zf=If=vf=0):(yf=0<Be.constant.length?Be.constant[0]:0,zf=1<Be.constant.length?
Be.constant[1]:0,If=2<Be.constant.length?Be.constant[2]:0,vf=3<Be.constant.length?Be.constant[3]:0)):(of=ka(Be.buffer)?C.createStream(34962,Be.buffer):C.getBuffer(Be.buffer),xf="type"in Be?Wd[Be.type]:of.dtype,Gf=!!Be.normalized,Ef=Be.size|0,Af=Be.offset|0,wf=Be.stride|0,Df=Be.divisor|0);Jf=L.buffer;L.buffer=of;Kf=L.divisor;L.divisor=Df;Lf=L.normalized;L.normalized=Gf;sf=L.offset;L.offset=Af;Qf=L.size;L.size=Ef;Hf=L.state;L.state=Ff;tf=L.stride;L.stride=wf;cg=L.type;L.type=xf;Rf=L.w;L.w=vf;Sf=L.x;
L.x=yf;pg=L.y;L.y=zf;cf=L.z;L.z=If;Ze=fa.call(this,la,b,c);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ka(Ze)?(Mf=!0,Nf=C.createStream(34962,Ze),Tf=Nf.dtype):(Nf=C.getBuffer(Ze))?Tf=Nf.dtype:"constant"in Ze?(hg=2,"number"===typeof Ze.constant?(Xf=Ze.constant,Yf=ig=Wf=0):(Xf=0<Ze.constant.length?Ze.constant[0]:0,Yf=1<Ze.constant.length?Ze.constant[1]:0,ig=2<Ze.constant.length?Ze.constant[2]:0,Wf=3<Ze.constant.length?Ze.constant[3]:0)):(Nf=ka(Ze.buffer)?C.createStream(34962,Ze.buffer):
C.getBuffer(Ze.buffer),Tf="type"in Ze?Wd[Ze.type]:Nf.dtype,eg=!!Ze.normalized,gg=Ze.size|0,fg=Ze.offset|0,Vf=Ze.stride|0,dg=Ze.divisor|0);qg=a.buffer;a.buffer=Nf;rg=a.divisor;a.divisor=dg;sg=a.normalized;a.normalized=eg;tg=a.offset;a.offset=fg;ug=a.size;a.size=gg;vg=a.state;a.state=hg;wg=a.stride;a.stride=Vf;xg=a.type;a.type=Tf;yg=a.w;a.w=Wf;zg=a.x;a.x=Xf;Ag=a.y;a.y=Yf;df=a.z;a.z=ig;$e=l.call(this,la,b,c);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;ka($e)?(Of=!0,Pf=C.createStream(34962,
$e),Uf=Pf.dtype):(Pf=C.getBuffer($e))?Uf=Pf.dtype:"constant"in $e?(ng=2,"number"===typeof $e.constant?(ag=$e.constant,bg=og=$f=0):(ag=0<$e.constant.length?$e.constant[0]:0,bg=1<$e.constant.length?$e.constant[1]:0,og=2<$e.constant.length?$e.constant[2]:0,$f=3<$e.constant.length?$e.constant[3]:0)):(Pf=ka($e.buffer)?C.createStream(34962,$e.buffer):C.getBuffer($e.buffer),Uf="type"in $e?Wd[$e.type]:Pf.dtype,kg=!!$e.normalized,mg=$e.size|0,lg=$e.offset|0,Zf=$e.stride|0,jg=$e.divisor|0);Bg=W.buffer;W.buffer=
Pf;Cg=W.divisor;W.divisor=jg;Dg=W.normalized;W.normalized=kg;Eg=W.offset;W.offset=lg;Fg=W.size;W.size=mg;Gg=W.state;W.state=ng;Hg=W.stride;W.stride=Zf;Ig=W.type;W.type=Uf;Jg=W.w;W.w=$f;Kg=W.x;W.x=ag;Lg=W.y;W.y=bg;Mg=W.z;W.z=og;Ng=R.vert;R.vert=44;Og=R.frag;R.frag=43;Ca.dirty=!0;d(la,b,c);la.viewportWidth=u;la.viewportHeight=t;Dd[0]=v;Dd[1]=w;Dd[2]=x;Dd[3]=y;E[0]=D;E[1]=O;E[2]=J;E[3]=F;va.blend_enable=N;ja[0]=H;ja[1]=V;ja[2]=K;ja[3]=ca;va.depth_enable=Q;ve[0]=Y;ve[1]=ea;ve[2]=oa;ve[3]=da;va.scissor_enable=
ma;va.stencil_enable=pa;ra&&(A.cpuTime+=performance.now()-ta);na&&nc.destroyStream(wa);Lb.elements=Ha;Lb.offset=Ka;Lb.count=yb;Lb.primitive=Qa;ha[45]=Bb;ha[48]=$a;ha[10]=pb;ha[46]=ib;ha[47]=Oa;ha[34]=Ib;ha[6]=eb;ha[7]=tc;ha[8]=kb;ha[9]=ua;xa&&C.destroyStream(Ua);G.buffer=ya;G.divisor=Hb;G.normalized=Ja;G.offset=Pb;G.size=gb;G.state=jb;G.stride=za;G.type=fc;G.w=Da;G.x=rb;G.y=sb;G.z=Xa;mc&&C.destroyStream(xc);I.buffer=tb;I.divisor=vc;I.normalized=wb;I.offset=cc;I.size=sc;I.state=Qc;I.stride=Mc;I.type=
kc;I.w=qd;I.x=Wb;I.y=ac;I.z=Qb;Yb&&C.destroyStream(nb);f.buffer=Sc;f.divisor=Oc;f.normalized=Kb;f.offset=Fb;f.size=Pc;f.state=Hc;f.stride=Tc;f.type=hc;f.w=Vc;f.x=nd;f.y=gd;f.z=Ed;Zc&&C.destroyStream(jc);e.buffer=yd;e.divisor=zd;e.normalized=fe;e.offset=re;e.size=se;e.state=ee;e.stride=de;e.type=be;e.w=ne;e.x=$d;e.y=he;e.z=zc;pe&&C.destroyStream(ke);T.buffer=qe;T.divisor=De;T.normalized=Ge;T.offset=He;T.size=Ie;T.state=Ee;T.stride=Kd;T.type=Rd;T.w=Yd;T.x=ae;T.y=Je;T.z=Cd;Ae&&C.destroyStream(Ke);m.buffer=
ef;m.divisor=lf;m.normalized=bf;m.offset=ff;m.size=gf;m.state=hf;m.stride=qf;m.type=mf;m.w=rf;m.x=Bf;m.y=Cf;m.z=Ne;nf&&C.destroyStream(of);L.buffer=Jf;L.divisor=Kf;L.normalized=Lf;L.offset=sf;L.size=Qf;L.state=Hf;L.stride=tf;L.type=cg;L.w=Rf;L.x=Sf;L.y=pg;L.z=cf;Mf&&C.destroyStream(Nf);a.buffer=qg;a.divisor=rg;a.normalized=sg;a.offset=tg;a.size=ug;a.state=vg;a.stride=wg;a.type=xg;a.w=yg;a.x=zg;a.y=Ag;a.z=df;Of&&C.destroyStream(Pf);W.buffer=Bg;W.divisor=Cg;W.normalized=Dg;W.offset=Eg;W.size=Fg;W.state=
Gg;W.stride=Hg;W.type=Ig;W.w=Jg;W.x=Kg;W.y=Lg;W.z=Mg;R.vert=Ng;R.frag=Og;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,A,q,O,g,d,y,b,v,oa,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb,kc,pa,Qa,X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa,bc,cc,Qc,td){var wc,V,C,la,Ca,Lb,jc,Zc,D,u,ka,va,R,ha,ra,E,p,ca,x,ja,ia,k,tc,ba,r,Bb,yb,
jf,ne,ve,je,Ed,re,qd,fe,se,xd,Dd,Zd;wc=c.attributes;V=c.buffer;C=c.context;la=c.current;Ca=c.draw;Lb=c.elements;jc=c.extensions;Zc=c.framebuffer;D=c.gl;u=c.isBufferArgs;ka=c.next;va=c.shader;R=c.uniforms;ha=c.vao;ra=ka.blend_color;E=la.blend_color;p=ka.blend_equation;ca=la.blend_equation;x=ka.blend_func;ja=la.blend_func;ia=ka.colorMask;k=la.colorMask;tc=ka.depth_range;ba=la.depth_range;r=ka.polygonOffset_offset;Bb=la.polygonOffset_offset;yb=ka.sample_coverage;jf=la.sample_coverage;ne=ka.scissor_box;
ve=la.scissor_box;je=ka.stencil_func;Ed=la.stencil_func;re=ka.stencil_opBack;qd=la.stencil_opBack;fe=ka.stencil_opFront;se=la.stencil_opFront;xd=ka.viewport;Dd=la.viewport;Zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,e,f,g,h;c=Zc.next;c!==Zc.cur&&(c?D.bindFramebuffer(36160,c.framebuffer):D.bindFramebuffer(36160,null),Zc.cur=c);if(la.dirty){var l,m,n,q,v,w,x,y,z,B,O,G,F,L,H,M,I,R,T,U,Y,W,aa,oa,fa,Z,va,ra,qa,ta,
md,hb,Sa,Gb;l=ka.dither;l!==la.dither&&(l?D.enable(3024):D.disable(3024),la.dither=l);m=p[0];n=p[1];if(m!==ca[0]||n!==ca[1])D.blendEquationSeparate(m,n),ca[0]=m,ca[1]=n;q=ka.depth_func;q!==la.depth_func&&(D.depthFunc(q),la.depth_func=q);v=tc[0];w=tc[1];if(v!==ba[0]||w!==ba[1])D.depthRange(v,w),ba[0]=v,ba[1]=w;x=ka.depth_mask;x!==la.depth_mask&&(D.depthMask(x),la.depth_mask=x);y=ia[0];z=ia[1];B=ia[2];O=ia[3];if(y!==k[0]||z!==k[1]||B!==k[2]||O!==k[3])D.colorMask(y,z,B,O),k[0]=y,k[1]=z,k[2]=B,k[3]=O;
G=ka.cull_enable;G!==la.cull_enable&&(G?D.enable(2884):D.disable(2884),la.cull_enable=G);F=ka.cull_face;F!==la.cull_face&&(D.cullFace(F),la.cull_face=F);L=ka.frontFace;L!==la.frontFace&&(D.frontFace(L),la.frontFace=L);H=ka.lineWidth;H!==la.lineWidth&&(D.lineWidth(H),la.lineWidth=H);M=ka.polygonOffset_enable;M!==la.polygonOffset_enable&&(M?D.enable(32823):D.disable(32823),la.polygonOffset_enable=M);I=r[0];R=r[1];if(I!==Bb[0]||R!==Bb[1])D.polygonOffset(I,R),Bb[0]=I,Bb[1]=R;T=ka.sample_alpha;T!==la.sample_alpha&&
(T?D.enable(32926):D.disable(32926),la.sample_alpha=T);U=ka.sample_enable;U!==la.sample_enable&&(U?D.enable(32928):D.disable(32928),la.sample_enable=U);Y=yb[0];W=yb[1];if(Y!==jf[0]||W!==jf[1])D.sampleCoverage(Y,W),jf[0]=Y,jf[1]=W;aa=ka.stencil_mask;aa!==la.stencil_mask&&(D.stencilMask(aa),la.stencil_mask=aa);oa=je[0];fa=je[1];Z=je[2];if(oa!==Ed[0]||fa!==Ed[1]||Z!==Ed[2])D.stencilFunc(oa,fa,Z),Ed[0]=oa,Ed[1]=fa,Ed[2]=Z;va=fe[0];ra=fe[1];qa=fe[2];ta=fe[3];if(va!==se[0]||ra!==se[1]||qa!==se[2]||ta!==
se[3])D.stencilOpSeparate(va,ra,qa,ta),se[0]=va,se[1]=ra,se[2]=qa,se[3]=ta;md=re[0];hb=re[1];Sa=re[2];Gb=re[3];if(md!==qd[0]||hb!==qd[1]||Sa!==qd[2]||Gb!==qd[3])D.stencilOpSeparate(md,hb,Sa,Gb),qd[0]=md,qd[1]=hb,qd[2]=Sa,qd[3]=Gb}D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);la.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;D.disable(2929);la.depth_enable=!1;D.enable(3089);la.scissor_enable=!0;D.disable(2960);la.stencil_enable=!1;if(d=la.profile)e=
performance.now(),A.count+=b;D.useProgram(na.program);f=jc.angle_instanced_arrays;var db;ha.setVAO(null);D.uniform1i(t.location,!1);D.uniform1i(Na.location,sa.bind());db=Ca.instances;for(g=0;g<b;++g){h=a[g];var ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,xd,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,
nd,gd,oe,Wc,ne,Ld,we,xe,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,Id,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf;ec=h.viewport;Sb=ec.x|0;ge=ec.y|0;Zb="width"in ec?ec.width|0:C.framebufferWidth-Sb;Tb="height"in ec?ec.height|0:C.framebufferHeight-ge;fd=C.viewportWidth;C.viewportWidth=Zb;Ub=C.viewportHeight;C.viewportHeight=
Tb;D.viewport(Sb,ge,Zb,Tb);Dd[0]=Sb;Dd[1]=ge;Dd[2]=Zb;Dd[3]=Tb;Ma=h.viewport;pb=Ma.x|0;ub=Ma.y|0;ib="width"in Ma?Ma.width|0:C.framebufferWidth-pb;Oa="height"in Ma?Ma.height|0:C.framebufferHeight-ub;D.scissor(pb,ub,ib,Oa);ve[0]=pb;ve[1]=ub;ve[2]=ib;ve[3]=Oa;Dc=Ka.call(this,C,h,g);Ib=!1;cd=null;eb=0;lc=!1;dc=dd=0;kb=1;lb=0;ua=5126;bb=Ua=xa=qb=0;u(Dc)?(Ib=!0,cd=V.createStream(34962,Dc),ua=cd.dtype):(cd=V.getBuffer(Dc))?ua=cd.dtype:"constant"in Dc?(kb=2,"number"===typeof Dc.constant?(xa=Dc.constant,Ua=
bb=qb=0):(xa=0<Dc.constant.length?Dc.constant[0]:0,Ua=1<Dc.constant.length?Dc.constant[1]:0,bb=2<Dc.constant.length?Dc.constant[2]:0,qb=3<Dc.constant.length?Dc.constant[3]:0)):(cd=u(Dc.buffer)?V.createStream(34962,Dc.buffer):V.getBuffer(Dc.buffer),ua="type"in Dc?Zd[Dc.type]:cd.dtype,lc=!!Dc.normalized,dc=Dc.size|0,dd=Dc.offset|0,lb=Dc.stride|0,eb=Dc.divisor|0);Aa=bc.location;fb=wc[Aa];if(1===kb){fb.buffer||D.enableVertexAttribArray(Aa);Ia=dc||1;if(fb.type!==ua||fb.size!==Ia||fb.buffer!==cd||fb.normalized!==
lc||fb.offset!==dd||fb.stride!==lb)D.bindBuffer(34962,cd.buffer),D.vertexAttribPointer(Aa,Ia,ua,lc,lb,dd),fb.type=ua,fb.size=Ia,fb.buffer=cd,fb.normalized=lc,fb.offset=dd,fb.stride=lb;fb.divisor!==eb&&(f.vertexAttribDivisorANGLE(Aa,eb),fb.divisor=eb)}else if(fb.buffer&&(D.disableVertexAttribArray(Aa),fb.buffer=null),fb.x!==xa||fb.y!==Ua||fb.z!==bb||fb.w!==qb)D.vertexAttrib4f(Aa,xa,Ua,bb,qb),fb.x=xa,fb.y=Ua,fb.z=bb,fb.w=qb;Ab=cb.call(this,C,h,g);zb=!1;Ra=null;Kc=0;Jb=!1;Vb=Za=0;ya=1;ce=0;Ja=5126;za=
jb=gb=Pb=0;u(Ab)?(zb=!0,Ra=V.createStream(34962,Ab),Ja=Ra.dtype):(Ra=V.getBuffer(Ab))?Ja=Ra.dtype:"constant"in Ab?(ya=2,"number"===typeof Ab.constant?(gb=Ab.constant,jb=za=Pb=0):(gb=0<Ab.constant.length?Ab.constant[0]:0,jb=1<Ab.constant.length?Ab.constant[1]:0,za=2<Ab.constant.length?Ab.constant[2]:0,Pb=3<Ab.constant.length?Ab.constant[3]:0)):(Ra=u(Ab.buffer)?V.createStream(34962,Ab.buffer):V.getBuffer(Ab.buffer),Ja="type"in Ab?Zd[Ab.type]:Ra.dtype,Jb=!!Ab.normalized,Vb=Ab.size|0,Za=Ab.offset|0,ce=
Ab.stride|0,Kc=Ab.divisor|0);fc=Qc.location;Da=wc[fc];if(1===ya){Da.buffer||D.enableVertexAttribArray(fc);rb=Vb||1;if(Da.type!==Ja||Da.size!==rb||Da.buffer!==Ra||Da.normalized!==Jb||Da.offset!==Za||Da.stride!==ce)D.bindBuffer(34962,Ra.buffer),D.vertexAttribPointer(fc,rb,Ja,Jb,ce,Za),Da.type=Ja,Da.size=rb,Da.buffer=Ra,Da.normalized=Jb,Da.offset=Za,Da.stride=ce;Da.divisor!==Kc&&(f.vertexAttribDivisorANGLE(fc,Kc),Da.divisor=Kc)}else if(Da.buffer&&(D.disableVertexAttribArray(fc),Da.buffer=null),Da.x!==
gb||Da.y!==jb||Da.z!==za||Da.w!==Pb)D.vertexAttrib4f(fc,gb,jb,za,Pb),Da.x=gb,Da.y=jb,Da.z=za,Da.w=Pb;sb=kc.call(this,C,h,g);Xa=!1;Ya=null;mc=0;xc=!1;Va=uc=0;Mb=1;Xc=0;Fa=5126;mb=Ba=Pa=yc=0;u(sb)?(Xa=!0,Ya=V.createStream(34962,sb),Fa=Ya.dtype):(Ya=V.getBuffer(sb))?Fa=Ya.dtype:"constant"in sb?(Mb=2,"number"===typeof sb.constant?(Pa=sb.constant,Ba=mb=yc=0):(Pa=0<sb.constant.length?sb.constant[0]:0,Ba=1<sb.constant.length?sb.constant[1]:0,mb=2<sb.constant.length?sb.constant[2]:0,yc=3<sb.constant.length?
sb.constant[3]:0)):(Ya=u(sb.buffer)?V.createStream(34962,sb.buffer):V.getBuffer(sb.buffer),Fa="type"in sb?Zd[sb.type]:Ya.dtype,xc=!!sb.normalized,Va=sb.size|0,uc=sb.offset|0,Xc=sb.stride|0,mc=sb.divisor|0);vb=cc.location;Cb=wc[vb];if(1===Mb){Cb.buffer||D.enableVertexAttribArray(vb);tb=Va||1;if(Cb.type!==Fa||Cb.size!==tb||Cb.buffer!==Ya||Cb.normalized!==xc||Cb.offset!==uc||Cb.stride!==Xc)D.bindBuffer(34962,Ya.buffer),D.vertexAttribPointer(vb,tb,Fa,xc,Xc,uc),Cb.type=Fa,Cb.size=tb,Cb.buffer=Ya,Cb.normalized=
xc,Cb.offset=uc,Cb.stride=Xc;Cb.divisor!==mc&&(f.vertexAttribDivisorANGLE(vb,mc),Cb.divisor=mc)}else if(Cb.buffer&&(D.disableVertexAttribArray(vb),Cb.buffer=null),Cb.x!==Pa||Cb.y!==Ba||Cb.z!==mb||Cb.w!==yc)D.vertexAttrib4f(vb,Pa,Ba,mb,yc),Cb.x=Pa,Cb.y=Ba,Cb.z=mb,Cb.w=yc;vc=pa.call(this,C,h,g);wb=!1;wd=null;sc=0;ud=!1;ld=Mc=0;sd=1;Wb=0;ac=5126;nb=Yb=Ga=Qb=0;u(vc)?(wb=!0,wd=V.createStream(34962,vc),ac=wd.dtype):(wd=V.getBuffer(vc))?ac=wd.dtype:"constant"in vc?(sd=2,"number"===typeof vc.constant?(Ga=
vc.constant,Yb=nb=Qb=0):(Ga=0<vc.constant.length?vc.constant[0]:0,Yb=1<vc.constant.length?vc.constant[1]:0,nb=2<vc.constant.length?vc.constant[2]:0,Qb=3<vc.constant.length?vc.constant[3]:0)):(wd=u(vc.buffer)?V.createStream(34962,vc.buffer):V.getBuffer(vc.buffer),ac="type"in vc?Zd[vc.type]:wd.dtype,ud=!!vc.normalized,ld=vc.size|0,Mc=vc.offset|0,Wb=vc.stride|0,sc=vc.divisor|0);xb=td.location;Nb=wc[xb];if(1===sd){Nb.buffer||D.enableVertexAttribArray(xb);Rb=ld||1;if(Nb.type!==ac||Nb.size!==Rb||Nb.buffer!==
wd||Nb.normalized!==ud||Nb.offset!==Mc||Nb.stride!==Wb)D.bindBuffer(34962,wd.buffer),D.vertexAttribPointer(xb,Rb,ac,ud,Wb,Mc),Nb.type=ac,Nb.size=Rb,Nb.buffer=wd,Nb.normalized=ud,Nb.offset=Mc,Nb.stride=Wb;Nb.divisor!==sc&&(f.vertexAttribDivisorANGLE(xb,sc),Nb.divisor=sc)}else if(Nb.buffer&&(D.disableVertexAttribArray(xb),Nb.buffer=null),Nb.x!==Ga||Nb.y!==Yb||Nb.z!==nb||Nb.w!==Qb)D.vertexAttrib4f(xb,Ga,Yb,nb,Qb),Nb.x=Ga,Nb.y=Yb,Nb.z=nb,Nb.w=Qb;gc=Qa.call(this,C,h,g);ic=!1;xd=null;Bc=0;Cc=!1;Nc=Ec=0;
Yc=1;Sc=0;Oc=5126;Hc=Pc=Fb=Kb=0;u(gc)?(ic=!0,xd=V.createStream(34962,gc),Oc=xd.dtype):(xd=V.getBuffer(gc))?Oc=xd.dtype:"constant"in gc?(Yc=2,"number"===typeof gc.constant?(Fb=gc.constant,Pc=Hc=Kb=0):(Fb=0<gc.constant.length?gc.constant[0]:0,Pc=1<gc.constant.length?gc.constant[1]:0,Hc=2<gc.constant.length?gc.constant[2]:0,Kb=3<gc.constant.length?gc.constant[3]:0)):(xd=u(gc.buffer)?V.createStream(34962,gc.buffer):V.getBuffer(gc.buffer),Oc="type"in gc?Zd[gc.type]:xd.dtype,Cc=!!gc.normalized,Nc=gc.size|
0,Ec=gc.offset|0,Sc=gc.stride|0,Bc=gc.divisor|0);Tc=ob.location;hc=wc[Tc];if(1===Yc){hc.buffer||D.enableVertexAttribArray(Tc);Vc=Nc||1;if(hc.type!==Oc||hc.size!==Vc||hc.buffer!==xd||hc.normalized!==Cc||hc.offset!==Ec||hc.stride!==Sc)D.bindBuffer(34962,xd.buffer),D.vertexAttribPointer(Tc,Vc,Oc,Cc,Sc,Ec),hc.type=Oc,hc.size=Vc,hc.buffer=xd,hc.normalized=Cc,hc.offset=Ec,hc.stride=Sc;hc.divisor!==Bc&&(f.vertexAttribDivisorANGLE(Tc,Bc),hc.divisor=Bc)}else if(hc.buffer&&(D.disableVertexAttribArray(Tc),hc.buffer=
null),hc.x!==Fb||hc.y!==Pc||hc.z!==Hc||hc.w!==Kb)D.vertexAttrib4f(Tc,Fb,Pc,Hc,Kb),hc.x=Fb,hc.y=Pc,hc.z=Hc,hc.w=Kb;nd=X.call(this,C,h,g);gd=!1;oe=null;Wc=0;ne=!1;we=Ld=0;xe=1;Ud=0;Jd=5126;od=Fc=bd=Gd=0;u(nd)?(gd=!0,oe=V.createStream(34962,nd),Jd=oe.dtype):(oe=V.getBuffer(nd))?Jd=oe.dtype:"constant"in nd?(xe=2,"number"===typeof nd.constant?(bd=nd.constant,Fc=od=Gd=0):(bd=0<nd.constant.length?nd.constant[0]:0,Fc=1<nd.constant.length?nd.constant[1]:0,od=2<nd.constant.length?nd.constant[2]:0,Gd=3<nd.constant.length?
nd.constant[3]:0)):(oe=u(nd.buffer)?V.createStream(34962,nd.buffer):V.getBuffer(nd.buffer),Jd="type"in nd?Zd[nd.type]:oe.dtype,ne=!!nd.normalized,we=nd.size|0,Ld=nd.offset|0,Ud=nd.stride|0,Wc=nd.divisor|0);hd=$a.location;ad=wc[hd];if(1===xe){ad.buffer||D.enableVertexAttribArray(hd);pd=we||1;if(ad.type!==Jd||ad.size!==pd||ad.buffer!==oe||ad.normalized!==ne||ad.offset!==Ld||ad.stride!==Ud)D.bindBuffer(34962,oe.buffer),D.vertexAttribPointer(hd,pd,Jd,ne,Ud,Ld),ad.type=Jd,ad.size=pd,ad.buffer=oe,ad.normalized=
ne,ad.offset=Ld,ad.stride=Ud;ad.divisor!==Wc&&(f.vertexAttribDivisorANGLE(hd,Wc),ad.divisor=Wc)}else if(ad.buffer&&(D.disableVertexAttribArray(hd),ad.buffer=null),ad.x!==bd||ad.y!==Fc||ad.z!==od||ad.w!==Gd)D.vertexAttrib4f(hd,bd,Fc,od,Gd),ad.x=bd,ad.y=Fc,ad.z=od,ad.w=Gd;yd=K.call(this,C,h,g);zd=!1;ye=null;te=0;Id=!1;de=ee=0;be=1;ue=0;$d=5126;pe=Uc=zc=he=0;u(yd)?(zd=!0,ye=V.createStream(34962,yd),$d=ye.dtype):(ye=V.getBuffer(yd))?$d=ye.dtype:"constant"in yd?(be=2,"number"===typeof yd.constant?(zc=
yd.constant,Uc=pe=he=0):(zc=0<yd.constant.length?yd.constant[0]:0,Uc=1<yd.constant.length?yd.constant[1]:0,pe=2<yd.constant.length?yd.constant[2]:0,he=3<yd.constant.length?yd.constant[3]:0)):(ye=u(yd.buffer)?V.createStream(34962,yd.buffer):V.getBuffer(yd.buffer),$d="type"in yd?Zd[yd.type]:ye.dtype,Id=!!yd.normalized,de=yd.size|0,ee=yd.offset|0,ue=yd.stride|0,te=yd.divisor|0);ke=Q.location;Hd=wc[ke];if(1===be){Hd.buffer||D.enableVertexAttribArray(ke);Md=de||4;if(Hd.type!==$d||Hd.size!==Md||Hd.buffer!==
ye||Hd.normalized!==Id||Hd.offset!==ee||Hd.stride!==ue)D.bindBuffer(34962,ye.buffer),D.vertexAttribPointer(ke,Md,$d,Id,ue,ee),Hd.type=$d,Hd.size=Md,Hd.buffer=ye,Hd.normalized=Id,Hd.offset=ee,Hd.stride=ue;Hd.divisor!==te&&(f.vertexAttribDivisorANGLE(ke,te),Hd.divisor=te)}else if(Hd.buffer&&(D.disableVertexAttribArray(ke),Hd.buffer=null),Hd.x!==zc||Hd.y!==Uc||Hd.z!==pe||Hd.w!==he)D.vertexAttrib4f(ke,zc,Uc,pe,he),Hd.x=zc,Hd.y=Uc,Hd.z=pe,Hd.w=he;Nd=N.call(this,C,h,g);Od=!1;ie=null;Ce=0;ze=!1;Oe=me=0;
Pe=1;Le=0;qe=5126;Ie=He=Ge=De=0;u(Nd)?(Od=!0,ie=V.createStream(34962,Nd),qe=ie.dtype):(ie=V.getBuffer(Nd))?qe=ie.dtype:"constant"in Nd?(Pe=2,"number"===typeof Nd.constant?(Ge=Nd.constant,He=Ie=De=0):(Ge=0<Nd.constant.length?Nd.constant[0]:0,He=1<Nd.constant.length?Nd.constant[1]:0,Ie=2<Nd.constant.length?Nd.constant[2]:0,De=3<Nd.constant.length?Nd.constant[3]:0)):(ie=u(Nd.buffer)?V.createStream(34962,Nd.buffer):V.getBuffer(Nd.buffer),qe="type"in Nd?Zd[Nd.type]:ie.dtype,ze=!!Nd.normalized,Oe=Nd.size|
0,me=Nd.offset|0,Le=Nd.stride|0,Ce=Nd.divisor|0);Ee=Ob.location;Kd=wc[Ee];if(1===Pe){Kd.buffer||D.enableVertexAttribArray(Ee);Rd=Oe||4;if(Kd.type!==qe||Kd.size!==Rd||Kd.buffer!==ie||Kd.normalized!==ze||Kd.offset!==me||Kd.stride!==Le)D.bindBuffer(34962,ie.buffer),D.vertexAttribPointer(Ee,Rd,qe,ze,Le,me),Kd.type=qe,Kd.size=Rd,Kd.buffer=ie,Kd.normalized=ze,Kd.offset=me,Kd.stride=Le;Kd.divisor!==Ce&&(f.vertexAttribDivisorANGLE(Ee,Ce),Kd.divisor=Ce)}else if(Kd.buffer&&(D.disableVertexAttribArray(Ee),Kd.buffer=
null),Kd.x!==Ge||Kd.y!==He||Kd.z!==Ie||Kd.w!==De)D.vertexAttrib4f(Ee,Ge,He,Ie,De),Kd.x=Ge,Kd.y=He,Kd.z=Ie,Kd.w=De;Yd=P.call(this,C,h,g);ae=!1;Je=null;Cd=0;Pd=!1;Ke=Ae=0;pf=1;Xe=0;Qe=5126;Re=Ue=We=Me=0;u(Yd)?(ae=!0,Je=V.createStream(34962,Yd),Qe=Je.dtype):(Je=V.getBuffer(Yd))?Qe=Je.dtype:"constant"in Yd?(pf=2,"number"===typeof Yd.constant?(We=Yd.constant,Ue=Re=Me=0):(We=0<Yd.constant.length?Yd.constant[0]:0,Ue=1<Yd.constant.length?Yd.constant[1]:0,Re=2<Yd.constant.length?Yd.constant[2]:0,Me=3<Yd.constant.length?
Yd.constant[3]:0)):(Je=u(Yd.buffer)?V.createStream(34962,Yd.buffer):V.getBuffer(Yd.buffer),Qe="type"in Yd?Zd[Yd.type]:Je.dtype,Pd=!!Yd.normalized,Ke=Yd.size|0,Ae=Yd.offset|0,Xe=Yd.stride|0,Cd=Yd.divisor|0);Se=ma.location;Qd=wc[Se];if(1===pf){Qd.buffer||D.enableVertexAttribArray(Se);Vd=Ke||1;if(Qd.type!==Qe||Qd.size!==Vd||Qd.buffer!==Je||Qd.normalized!==Pd||Qd.offset!==Ae||Qd.stride!==Xe)D.bindBuffer(34962,Je.buffer),D.vertexAttribPointer(Se,Vd,Qe,Pd,Xe,Ae),Qd.type=Qe,Qd.size=Vd,Qd.buffer=Je,Qd.normalized=
Pd,Qd.offset=Ae,Qd.stride=Xe;Qd.divisor!==Cd&&(f.vertexAttribDivisorANGLE(Se,Cd),Qd.divisor=Cd)}else if(Qd.buffer&&(D.disableVertexAttribArray(Se),Qd.buffer=null),Qd.x!==We||Qd.y!==Ue||Qd.z!==Re||Qd.w!==Me)D.vertexAttrib4f(Se,We,Ue,Re,Me),Qd.x=We,Qd.y=Ue,Qd.z=Re,Qd.w=Me;Te=C.pixelRatio;g&&ef===Te||(ef=Te,D.uniform1f(Hb.location,Te));lf=J.call(this,C,h,g);bf=lf[0];gf=lf[1];g&&ff===bf&&hf===gf||(ff=bf,hf=gf,D.uniform2f(Ea.location,bf,gf));qf=h.scale;mf=qf[0];Bf=qf[1];g&&rf===mf&&Cf===Bf||(rf=mf,Cf=
Bf,D.uniform2f(Ha.location,mf,Bf));Ne=h.scaleFract;Be=Ne[0];of=Ne[1];g&&nf===Be&&Df===of||(nf=Be,Df=of,D.uniform2f(S.location,Be,of));Gf=h.translate;Af=Gf[0];Ff=Gf[1];g&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,D.uniform2f(da.location,Af,Ff));xf=h.translateFract;vf=xf[0];zf=xf[1];g&&yf===vf&&If===zf||(yf=vf,If=zf,D.uniform2f(wa.location,vf,zf));Jf=h.opacity;g&&Kf===Jf||(Kf=Jf,D.uniform1f(ea.location,Jf));Lf=h.elements;sf=null;(sf=(Qf=u(Lf))?Lb.createStream(Lf):Lb.getElements(Lf))&&D.bindBuffer(34963,sf.buffer.buffer);
Hf=h.offset;if(tf=h.count)0<db?sf?f.drawElementsInstancedANGLE(0,tf,sf.type,Hf<<(sf.type-5121>>1),db):f.drawArraysInstancedANGLE(0,Hf,tf,db):0>db&&(sf?D.drawElements(0,tf,sf.type,Hf<<(sf.type-5121>>1)):D.drawArrays(0,Hf,tf)),C.viewportWidth=fd,C.viewportHeight=Ub,Ib&&V.destroyStream(cd),zb&&V.destroyStream(Ra),Xa&&V.destroyStream(Ya),wb&&V.destroyStream(wd),ic&&V.destroyStream(xd),gd&&V.destroyStream(oe),zd&&V.destroyStream(ye),Od&&V.destroyStream(ie),ae&&V.destroyStream(Je),Qf&&Lb.destroyStream(sf)}sa.unbind();
la.dirty=!0;ha.setVAO(null);d&&(A.cpuTime+=performance.now()-e)},draw:function(a){var c,e,f,h,l,m,n,x,z,B,G,J,L,N,M,I,K,P,R,T,U,W,X,aa,fa,Z,va,ra,pa,qa,sa,na,Ka,La,Qa,Wa,ta,cb,hb,Sa,Gb,db,ec,Sb,kc,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,xd,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,ne,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd,gd,oe,Wc,Id,Ld,we,xe,
Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ye,te,uf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe;c=Zc.next;c!==Zc.cur&&(c?D.bindFramebuffer(36160,c.framebuffer):D.bindFramebuffer(36160,null),Zc.cur=c);if(la.dirty){var Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf;Pe=ka.dither;Pe!==la.dither&&(Pe?D.enable(3024):D.disable(3024),la.dither=Pe);Le=p[0];qe=p[1];if(Le!==ca[0]||qe!==ca[1])D.blendEquationSeparate(Le,qe),ca[0]=Le,ca[1]=qe;De=ka.depth_func;
De!==la.depth_func&&(D.depthFunc(De),la.depth_func=De);Ge=tc[0];He=tc[1];if(Ge!==ba[0]||He!==ba[1])D.depthRange(Ge,He),ba[0]=Ge,ba[1]=He;Ie=ka.depth_mask;Ie!==la.depth_mask&&(D.depthMask(Ie),la.depth_mask=Ie);Ee=ia[0];Kd=ia[1];Rd=ia[2];Yd=ia[3];if(Ee!==k[0]||Kd!==k[1]||Rd!==k[2]||Yd!==k[3])D.colorMask(Ee,Kd,Rd,Yd),k[0]=Ee,k[1]=Kd,k[2]=Rd,k[3]=Yd;ae=ka.cull_enable;ae!==la.cull_enable&&(ae?D.enable(2884):D.disable(2884),la.cull_enable=ae);Je=ka.cull_face;Je!==la.cull_face&&(D.cullFace(Je),la.cull_face=
Je);Cd=ka.frontFace;Cd!==la.frontFace&&(D.frontFace(Cd),la.frontFace=Cd);Pd=ka.lineWidth;Pd!==la.lineWidth&&(D.lineWidth(Pd),la.lineWidth=Pd);Ae=ka.polygonOffset_enable;Ae!==la.polygonOffset_enable&&(Ae?D.enable(32823):D.disable(32823),la.polygonOffset_enable=Ae);Ke=r[0];pf=r[1];if(Ke!==Bb[0]||pf!==Bb[1])D.polygonOffset(Ke,pf),Bb[0]=Ke,Bb[1]=pf;Xe=ka.sample_alpha;Xe!==la.sample_alpha&&(Xe?D.enable(32926):D.disable(32926),la.sample_alpha=Xe);Qe=ka.sample_enable;Qe!==la.sample_enable&&(Qe?D.enable(32928):
D.disable(32928),la.sample_enable=Qe);Me=yb[0];We=yb[1];if(Me!==jf[0]||We!==jf[1])D.sampleCoverage(Me,We),jf[0]=Me,jf[1]=We;Ue=ka.stencil_mask;Ue!==la.stencil_mask&&(D.stencilMask(Ue),la.stencil_mask=Ue);Re=je[0];Se=je[1];Qd=je[2];if(Re!==Ed[0]||Se!==Ed[1]||Qd!==Ed[2])D.stencilFunc(Re,Se,Qd),Ed[0]=Re,Ed[1]=Se,Ed[2]=Qd;Vd=fe[0];Te=fe[1];ef=fe[2];lf=fe[3];if(Vd!==se[0]||Te!==se[1]||ef!==se[2]||lf!==se[3])D.stencilOpSeparate(Vd,Te,ef,lf),se[0]=Vd,se[1]=Te,se[2]=ef,se[3]=lf;bf=re[0];ff=re[1];gf=re[2];
hf=re[3];if(bf!==qd[0]||ff!==qd[1]||gf!==qd[2]||hf!==qd[3])D.stencilOpSeparate(bf,ff,gf,hf),qd[0]=bf,qd[1]=ff,qd[2]=gf,qd[3]=hf}e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:C.framebufferWidth-f;m="height"in e?e.height|0:C.framebufferHeight-h;n=C.viewportWidth;C.viewportWidth=l;x=C.viewportHeight;C.viewportHeight=m;D.viewport(f,h,l,m);Dd[0]=f;Dd[1]=h;Dd[2]=l;Dd[3]=m;D.blendColor(0,0,0,1);E[0]=0;E[1]=0;E[2]=0;E[3]=1;D.enable(3042);la.blend_enable=!0;D.blendFuncSeparate(770,771,773,1);ja[0]=
770;ja[1]=771;ja[2]=773;ja[3]=1;D.disable(2929);la.depth_enable=!1;z=a.viewport;B=z.x|0;G=z.y|0;J="width"in z?z.width|0:C.framebufferWidth-B;L="height"in z?z.height|0:C.framebufferHeight-G;D.scissor(B,G,J,L);ve[0]=B;ve[1]=G;ve[2]=J;ve[3]=L;D.enable(3089);la.scissor_enable=!0;D.disable(2960);la.stencil_enable=!1;if(N=la.profile)M=performance.now(),A.count++;D.useProgram(q.program);I=jc.angle_instanced_arrays;ha.setVAO(null);K=O.call(this,C,a,0);P=!1;R=null;T=0;U=!1;X=W=0;aa=1;fa=0;Z=5126;qa=pa=ra=
va=0;u(K)?(P=!0,R=V.createStream(34962,K),Z=R.dtype):(R=V.getBuffer(K))?Z=R.dtype:"constant"in K?(aa=2,"number"===typeof K.constant?(ra=K.constant,pa=qa=va=0):(ra=0<K.constant.length?K.constant[0]:0,pa=1<K.constant.length?K.constant[1]:0,qa=2<K.constant.length?K.constant[2]:0,va=3<K.constant.length?K.constant[3]:0)):(R=u(K.buffer)?V.createStream(34962,K.buffer):V.getBuffer(K.buffer),Z="type"in K?Zd[K.type]:R.dtype,U=!!K.normalized,X=K.size|0,W=K.offset|0,fa=K.stride|0,T=K.divisor|0);sa=bc.location;
na=wc[sa];if(1===aa){na.buffer||D.enableVertexAttribArray(sa);Ka=X||1;if(na.type!==Z||na.size!==Ka||na.buffer!==R||na.normalized!==U||na.offset!==W||na.stride!==fa)D.bindBuffer(34962,R.buffer),D.vertexAttribPointer(sa,Ka,Z,U,fa,W),na.type=Z,na.size=Ka,na.buffer=R,na.normalized=U,na.offset=W,na.stride=fa;na.divisor!==T&&(I.vertexAttribDivisorANGLE(sa,T),na.divisor=T)}else if(na.buffer&&(D.disableVertexAttribArray(sa),na.buffer=null),na.x!==ra||na.y!==pa||na.z!==qa||na.w!==va)D.vertexAttrib4f(sa,ra,
pa,qa,va),na.x=ra,na.y=pa,na.z=qa,na.w=va;La=g.call(this,C,a,0);Qa=!1;Wa=null;ta=0;cb=!1;Sa=hb=0;Gb=1;db=0;ec=5126;Tb=Zb=kc=Sb=0;u(La)?(Qa=!0,Wa=V.createStream(34962,La),ec=Wa.dtype):(Wa=V.getBuffer(La))?ec=Wa.dtype:"constant"in La?(Gb=2,"number"===typeof La.constant?(kc=La.constant,Zb=Tb=Sb=0):(kc=0<La.constant.length?La.constant[0]:0,Zb=1<La.constant.length?La.constant[1]:0,Tb=2<La.constant.length?La.constant[2]:0,Sb=3<La.constant.length?La.constant[3]:0)):(Wa=u(La.buffer)?V.createStream(34962,
La.buffer):V.getBuffer(La.buffer),ec="type"in La?Zd[La.type]:Wa.dtype,cb=!!La.normalized,Sa=La.size|0,hb=La.offset|0,db=La.stride|0,ta=La.divisor|0);fd=Qc.location;Ub=wc[fd];if(1===Gb){Ub.buffer||D.enableVertexAttribArray(fd);Ma=Sa||1;if(Ub.type!==ec||Ub.size!==Ma||Ub.buffer!==Wa||Ub.normalized!==cb||Ub.offset!==hb||Ub.stride!==db)D.bindBuffer(34962,Wa.buffer),D.vertexAttribPointer(fd,Ma,ec,cb,db,hb),Ub.type=ec,Ub.size=Ma,Ub.buffer=Wa,Ub.normalized=cb,Ub.offset=hb,Ub.stride=db;Ub.divisor!==ta&&(I.vertexAttribDivisorANGLE(fd,
ta),Ub.divisor=ta)}else if(Ub.buffer&&(D.disableVertexAttribArray(fd),Ub.buffer=null),Ub.x!==kc||Ub.y!==Zb||Ub.z!==Tb||Ub.w!==Sb)D.vertexAttrib4f(fd,kc,Zb,Tb,Sb),Ub.x=kc,Ub.y=Zb,Ub.z=Tb,Ub.w=Sb;pb=d.call(this,C,a,0);ub=!1;ib=null;Oa=0;Dc=!1;cd=Ib=0;eb=1;lc=0;dd=5126;ua=lb=kb=dc=0;u(pb)?(ub=!0,ib=V.createStream(34962,pb),dd=ib.dtype):(ib=V.getBuffer(pb))?dd=ib.dtype:"constant"in pb?(eb=2,"number"===typeof pb.constant?(kb=pb.constant,lb=ua=dc=0):(kb=0<pb.constant.length?pb.constant[0]:0,lb=1<pb.constant.length?
pb.constant[1]:0,ua=2<pb.constant.length?pb.constant[2]:0,dc=3<pb.constant.length?pb.constant[3]:0)):(ib=u(pb.buffer)?V.createStream(34962,pb.buffer):V.getBuffer(pb.buffer),dd="type"in pb?Zd[pb.type]:ib.dtype,Dc=!!pb.normalized,cd=pb.size|0,Ib=pb.offset|0,lc=pb.stride|0,Oa=pb.divisor|0);qb=cc.location;xa=wc[qb];if(1===eb){xa.buffer||D.enableVertexAttribArray(qb);Ua=cd||1;if(xa.type!==dd||xa.size!==Ua||xa.buffer!==ib||xa.normalized!==Dc||xa.offset!==Ib||xa.stride!==lc)D.bindBuffer(34962,ib.buffer),
D.vertexAttribPointer(qb,Ua,dd,Dc,lc,Ib),xa.type=dd,xa.size=Ua,xa.buffer=ib,xa.normalized=Dc,xa.offset=Ib,xa.stride=lc;xa.divisor!==Oa&&(I.vertexAttribDivisorANGLE(qb,Oa),xa.divisor=Oa)}else if(xa.buffer&&(D.disableVertexAttribArray(qb),xa.buffer=null),xa.x!==kb||xa.y!==lb||xa.z!==ua||xa.w!==dc)D.vertexAttrib4f(qb,kb,lb,ua,dc),xa.x=kb,xa.y=lb,xa.z=ua,xa.w=dc;bb=y.call(this,C,a,0);Aa=!1;fb=null;Ia=0;Ab=!1;Ra=zb=0;Kc=1;Jb=0;Za=5126;Ja=xd=ya=Vb=0;u(bb)?(Aa=!0,fb=V.createStream(34962,bb),Za=fb.dtype):
(fb=V.getBuffer(bb))?Za=fb.dtype:"constant"in bb?(Kc=2,"number"===typeof bb.constant?(ya=bb.constant,xd=Ja=Vb=0):(ya=0<bb.constant.length?bb.constant[0]:0,xd=1<bb.constant.length?bb.constant[1]:0,Ja=2<bb.constant.length?bb.constant[2]:0,Vb=3<bb.constant.length?bb.constant[3]:0)):(fb=u(bb.buffer)?V.createStream(34962,bb.buffer):V.getBuffer(bb.buffer),Za="type"in bb?Zd[bb.type]:fb.dtype,Ab=!!bb.normalized,Ra=bb.size|0,zb=bb.offset|0,Jb=bb.stride|0,Ia=bb.divisor|0);Pb=td.location;gb=wc[Pb];if(1===Kc){gb.buffer||
D.enableVertexAttribArray(Pb);jb=Ra||1;if(gb.type!==Za||gb.size!==jb||gb.buffer!==fb||gb.normalized!==Ab||gb.offset!==zb||gb.stride!==Jb)D.bindBuffer(34962,fb.buffer),D.vertexAttribPointer(Pb,jb,Za,Ab,Jb,zb),gb.type=Za,gb.size=jb,gb.buffer=fb,gb.normalized=Ab,gb.offset=zb,gb.stride=Jb;gb.divisor!==Ia&&(I.vertexAttribDivisorANGLE(Pb,Ia),gb.divisor=Ia)}else if(gb.buffer&&(D.disableVertexAttribArray(Pb),gb.buffer=null),gb.x!==ya||gb.y!==xd||gb.z!==Ja||gb.w!==Vb)D.vertexAttrib4f(Pb,ya,xd,Ja,Vb),gb.x=
ya,gb.y=xd,gb.z=Ja,gb.w=Vb;za=b.call(this,C,a,0);fc=!1;Da=null;rb=0;sb=!1;Ya=Xa=0;mc=1;xc=0;uc=5126;Fa=Xc=Mb=Va=0;u(za)?(fc=!0,Da=V.createStream(34962,za),uc=Da.dtype):(Da=V.getBuffer(za))?uc=Da.dtype:"constant"in za?(mc=2,"number"===typeof za.constant?(Mb=za.constant,Xc=Fa=Va=0):(Mb=0<za.constant.length?za.constant[0]:0,Xc=1<za.constant.length?za.constant[1]:0,Fa=2<za.constant.length?za.constant[2]:0,Va=3<za.constant.length?za.constant[3]:0)):(Da=u(za.buffer)?V.createStream(34962,za.buffer):V.getBuffer(za.buffer),
uc="type"in za?Zd[za.type]:Da.dtype,sb=!!za.normalized,Ya=za.size|0,Xa=za.offset|0,xc=za.stride|0,rb=za.divisor|0);yc=ob.location;Pa=wc[yc];if(1===mc){Pa.buffer||D.enableVertexAttribArray(yc);Ba=Ya||1;if(Pa.type!==uc||Pa.size!==Ba||Pa.buffer!==Da||Pa.normalized!==sb||Pa.offset!==Xa||Pa.stride!==xc)D.bindBuffer(34962,Da.buffer),D.vertexAttribPointer(yc,Ba,uc,sb,xc,Xa),Pa.type=uc,Pa.size=Ba,Pa.buffer=Da,Pa.normalized=sb,Pa.offset=Xa,Pa.stride=xc;Pa.divisor!==rb&&(I.vertexAttribDivisorANGLE(yc,rb),Pa.divisor=
rb)}else if(Pa.buffer&&(D.disableVertexAttribArray(yc),Pa.buffer=null),Pa.x!==Mb||Pa.y!==Xc||Pa.z!==Fa||Pa.w!==Va)D.vertexAttrib4f(yc,Mb,Xc,Fa,Va),Pa.x=Mb,Pa.y=Xc,Pa.z=Fa,Pa.w=Va;mb=v.call(this,C,a,0);vb=!1;Cb=null;tb=0;vc=!1;wd=wb=0;sc=1;ud=0;Mc=5126;ac=Wb=sd=ld=0;u(mb)?(vb=!0,Cb=V.createStream(34962,mb),Mc=Cb.dtype):(Cb=V.getBuffer(mb))?Mc=Cb.dtype:"constant"in mb?(sc=2,"number"===typeof mb.constant?(sd=mb.constant,Wb=ac=ld=0):(sd=0<mb.constant.length?mb.constant[0]:0,Wb=1<mb.constant.length?mb.constant[1]:
0,ac=2<mb.constant.length?mb.constant[2]:0,ld=3<mb.constant.length?mb.constant[3]:0)):(Cb=u(mb.buffer)?V.createStream(34962,mb.buffer):V.getBuffer(mb.buffer),Mc="type"in mb?Zd[mb.type]:Cb.dtype,vc=!!mb.normalized,wd=mb.size|0,wb=mb.offset|0,ud=mb.stride|0,tb=mb.divisor|0);Qb=$a.location;Ga=wc[Qb];if(1===sc){Ga.buffer||D.enableVertexAttribArray(Qb);Yb=wd||1;if(Ga.type!==Mc||Ga.size!==Yb||Ga.buffer!==Cb||Ga.normalized!==vc||Ga.offset!==wb||Ga.stride!==ud)D.bindBuffer(34962,Cb.buffer),D.vertexAttribPointer(Qb,
Yb,Mc,vc,ud,wb),Ga.type=Mc,Ga.size=Yb,Ga.buffer=Cb,Ga.normalized=vc,Ga.offset=wb,Ga.stride=ud;Ga.divisor!==tb&&(I.vertexAttribDivisorANGLE(Qb,tb),Ga.divisor=tb)}else if(Ga.buffer&&(D.disableVertexAttribArray(Qb),Ga.buffer=null),Ga.x!==sd||Ga.y!==Wb||Ga.z!==ac||Ga.w!==ld)D.vertexAttrib4f(Qb,sd,Wb,ac,ld),Ga.x=sd,Ga.y=Wb,Ga.z=ac,Ga.w=ld;nb=oa.call(this,C,a,0);xb=!1;Nb=null;Rb=0;gc=!1;ne=ic=0;Bc=1;Cc=0;Ec=5126;Oc=Sc=Yc=Nc=0;u(nb)?(xb=!0,Nb=V.createStream(34962,nb),Ec=Nb.dtype):(Nb=V.getBuffer(nb))?Ec=
Nb.dtype:"constant"in nb?(Bc=2,"number"===typeof nb.constant?(Yc=nb.constant,Sc=Oc=Nc=0):(Yc=0<nb.constant.length?nb.constant[0]:0,Sc=1<nb.constant.length?nb.constant[1]:0,Oc=2<nb.constant.length?nb.constant[2]:0,Nc=3<nb.constant.length?nb.constant[3]:0)):(Nb=u(nb.buffer)?V.createStream(34962,nb.buffer):V.getBuffer(nb.buffer),Ec="type"in nb?Zd[nb.type]:Nb.dtype,gc=!!nb.normalized,ne=nb.size|0,ic=nb.offset|0,Cc=nb.stride|0,Rb=nb.divisor|0);Kb=Q.location;Fb=wc[Kb];if(1===Bc){Fb.buffer||D.enableVertexAttribArray(Kb);
Pc=ne||4;if(Fb.type!==Ec||Fb.size!==Pc||Fb.buffer!==Nb||Fb.normalized!==gc||Fb.offset!==ic||Fb.stride!==Cc)D.bindBuffer(34962,Nb.buffer),D.vertexAttribPointer(Kb,Pc,Ec,gc,Cc,ic),Fb.type=Ec,Fb.size=Pc,Fb.buffer=Nb,Fb.normalized=gc,Fb.offset=ic,Fb.stride=Cc;Fb.divisor!==Rb&&(I.vertexAttribDivisorANGLE(Kb,Rb),Fb.divisor=Rb)}else if(Fb.buffer&&(D.disableVertexAttribArray(Kb),Fb.buffer=null),Fb.x!==Yc||Fb.y!==Sc||Fb.z!==Oc||Fb.w!==Nc)D.vertexAttrib4f(Kb,Yc,Sc,Oc,Nc),Fb.x=Yc,Fb.y=Sc,Fb.z=Oc,Fb.w=Nc;Hc=
Y.call(this,C,a,0);Tc=!1;hc=null;Vc=0;nd=!1;oe=gd=0;Wc=1;Id=0;Ld=5126;Jd=Ud=xe=we=0;u(Hc)?(Tc=!0,hc=V.createStream(34962,Hc),Ld=hc.dtype):(hc=V.getBuffer(Hc))?Ld=hc.dtype:"constant"in Hc?(Wc=2,"number"===typeof Hc.constant?(xe=Hc.constant,Ud=Jd=we=0):(xe=0<Hc.constant.length?Hc.constant[0]:0,Ud=1<Hc.constant.length?Hc.constant[1]:0,Jd=2<Hc.constant.length?Hc.constant[2]:0,we=3<Hc.constant.length?Hc.constant[3]:0)):(hc=u(Hc.buffer)?V.createStream(34962,Hc.buffer):V.getBuffer(Hc.buffer),Ld="type"in
Hc?Zd[Hc.type]:hc.dtype,nd=!!Hc.normalized,oe=Hc.size|0,gd=Hc.offset|0,Id=Hc.stride|0,Vc=Hc.divisor|0);Gd=Ob.location;bd=wc[Gd];if(1===Wc){bd.buffer||D.enableVertexAttribArray(Gd);Fc=oe||4;if(bd.type!==Ld||bd.size!==Fc||bd.buffer!==hc||bd.normalized!==nd||bd.offset!==gd||bd.stride!==Id)D.bindBuffer(34962,hc.buffer),D.vertexAttribPointer(Gd,Fc,Ld,nd,Id,gd),bd.type=Ld,bd.size=Fc,bd.buffer=hc,bd.normalized=nd,bd.offset=gd,bd.stride=Id;bd.divisor!==Vc&&(I.vertexAttribDivisorANGLE(Gd,Vc),bd.divisor=Vc)}else if(bd.buffer&&
(D.disableVertexAttribArray(Gd),bd.buffer=null),bd.x!==xe||bd.y!==Ud||bd.z!==Jd||bd.w!==we)D.vertexAttrib4f(Gd,xe,Ud,Jd,we),bd.x=xe,bd.y=Ud,bd.z=Jd,bd.w=we;od=H.call(this,C,a,0);hd=!1;ad=null;pd=0;yd=!1;ye=zd=0;te=1;uf=0;ee=5126;$d=ue=be=de=0;u(od)?(hd=!0,ad=V.createStream(34962,od),ee=ad.dtype):(ad=V.getBuffer(od))?ee=ad.dtype:"constant"in od?(te=2,"number"===typeof od.constant?(be=od.constant,ue=$d=de=0):(be=0<od.constant.length?od.constant[0]:0,ue=1<od.constant.length?od.constant[1]:0,$d=2<od.constant.length?
od.constant[2]:0,de=3<od.constant.length?od.constant[3]:0)):(ad=u(od.buffer)?V.createStream(34962,od.buffer):V.getBuffer(od.buffer),ee="type"in od?Zd[od.type]:ad.dtype,yd=!!od.normalized,ye=od.size|0,zd=od.offset|0,uf=od.stride|0,pd=od.divisor|0);he=ma.location;zc=wc[he];if(1===te){zc.buffer||D.enableVertexAttribArray(he);Uc=ye||1;if(zc.type!==ee||zc.size!==Uc||zc.buffer!==ad||zc.normalized!==yd||zc.offset!==zd||zc.stride!==uf)D.bindBuffer(34962,ad.buffer),D.vertexAttribPointer(he,Uc,ee,yd,uf,zd),
zc.type=ee,zc.size=Uc,zc.buffer=ad,zc.normalized=yd,zc.offset=zd,zc.stride=uf;zc.divisor!==pd&&(I.vertexAttribDivisorANGLE(he,pd),zc.divisor=pd)}else if(zc.buffer&&(D.disableVertexAttribArray(he),zc.buffer=null),zc.x!==be||zc.y!==ue||zc.z!==$d||zc.w!==de)D.vertexAttrib4f(he,be,ue,$d,de),zc.x=be,zc.y=ue,zc.z=$d,zc.w=de;D.uniform1i(t.location,!1);D.uniform1f(Hb.location,C.pixelRatio);pe=F.call(this,C,a,0);D.uniform2f(Ea.location,pe[0],pe[1]);ke=a.scale;D.uniform2f(Ha.location,ke[0],ke[1]);Hd=a.scaleFract;
D.uniform2f(S.location,Hd[0],Hd[1]);Md=a.translate;D.uniform2f(da.location,Md[0],Md[1]);Nd=a.translateFract;D.uniform2f(wa.location,Nd[0],Nd[1]);D.uniform1f(ea.location,a.opacity);D.uniform1i(Na.location,w.bind());Od=a.elements;ie=null;(ie=(Ce=u(Od))?Lb.createStream(Od):Lb.getElements(Od))&&D.bindBuffer(34963,ie.buffer.buffer);ze=a.offset;if(me=a.count)Oe=Ca.instances,0<Oe?ie?I.drawElementsInstancedANGLE(0,me,ie.type,ze<<(ie.type-5121>>1),Oe):I.drawArraysInstancedANGLE(0,ze,me,Oe):0>Oe&&(ie?D.drawElements(0,
me,ie.type,ze<<(ie.type-5121>>1)):D.drawArrays(0,ze,me)),la.dirty=!0,ha.setVAO(null),C.viewportWidth=n,C.viewportHeight=x,N&&(A.cpuTime+=performance.now()-M),P&&V.destroyStream(R),Qa&&V.destroyStream(Wa),ub&&V.destroyStream(ib),Aa&&V.destroyStream(fb),fc&&V.destroyStream(Da),vb&&V.destroyStream(Cb),xb&&V.destroyStream(Nb),Tc&&V.destroyStream(hc),hd&&V.destroyStream(ad),w.unbind(),Ce&&Lb.destroyStream(ie)},scope:function(b,c,d){var g,k,p,r,q,v,t,w,y,E,D,O,K,J,F,N,H,ca,P,Q,ba,S,ha,X,ia,Y,ja,oa,ea,da,
ma,na,pa,sa,ta,wa,Ha,Ea,Ka,Na,Qa,yb,Bb,wc,$a,cb,ob,Ma,pb,ub,ib,Oa,td,Ib,Ob,eb,tc,Hb,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,bc,Jb,Za,Vb,ya,kc,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,cc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,jc,sc,Qc,Mc,qd,je,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ed,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,Zc,gd,nc,Wc,Dd,Ld,fe,re,Ud,Jd,Gd,bd,Fc,od,hd,ad,pd,yd,zd,ve,se,jf,ee,de,be,ue,$d,he,zc,Uc,pe,ke,Hd,Md,Nd,Od,ie,Ce,ze,me,Oe,Pe,Le,qe,De,Ge,He,Ie,Ee,Kd,Rd,Yd,ae,Je,Cd,Pd,Ae,Ke,pf,Xe,
Qe,Me,We,Ue,Re,Se,Qd,Vd,Te,ef,lf,bf,ff,gf,hf,qf,mf,rf,Bf,Cf,Ne,Be,nf,of,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,pg,cf,Ze,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,qg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,df,$e,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Bg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng;g=b.viewport;k=g.x|0;p=g.y|0;r="width"in g?g.width|0:C.framebufferWidth-k;q="height"in g?g.height|0:C.framebufferHeight-p;v=C.viewportWidth;C.viewportWidth=r;t=C.viewportHeight;C.viewportHeight=q;w=xd[0];
xd[0]=k;y=xd[1];xd[1]=p;E=xd[2];xd[2]=r;D=xd[3];xd[3]=q;O=ra[0];ra[0]=0;K=ra[1];ra[1]=0;J=ra[2];ra[2]=0;F=ra[3];ra[3]=1;N=ka.blend_enable;ka.blend_enable=!0;H=x[0];x[0]=770;ca=x[1];x[1]=771;P=x[2];x[2]=773;Q=x[3];x[3]=1;ba=ka.depth_enable;ka.depth_enable=!1;S=b.viewport;ha=S.x|0;X=S.y|0;ia="width"in S?S.width|0:C.framebufferWidth-ha;Y="height"in S?S.height|0:C.framebufferHeight-X;ja=ne[0];ne[0]=ha;oa=ne[1];ne[1]=X;ea=ne[2];ne[2]=ia;da=ne[3];ne[3]=Y;ma=ka.scissor_enable;ka.scissor_enable=!0;na=ka.stencil_enable;
ka.stencil_enable=!1;if(pa=la.profile)sa=performance.now(),A.count++;ta=b.elements;wa=null;wa=(Ha=u(ta))?Lb.createStream(ta):Lb.getElements(ta);Ea=Ca.elements;Ca.elements=wa;Ka=b.offset;Na=Ca.offset;Ca.offset=Ka;Qa=b.count;yb=Ca.count;Ca.count=Qa;Bb=Ca.primitive;Ca.primitive=0;wc=R[45];R[45]=!1;$a=b.markerTexture;cb=R[48];R[48]=$a;ob=b.opacity;Ma=R[10];R[10]=ob;pb=B.call(this,C,b,d);ub=R[46];R[46]=pb;ib=R[47];R[47]=M;Oa=C.pixelRatio;td=R[34];R[34]=Oa;Ib=b.scale;Ob=R[6];R[6]=Ib;eb=b.scaleFract;tc=
R[7];R[7]=eb;Hb=b.translate;dc=R[8];R[8]=Hb;kb=b.translateFract;lb=R[9];R[9]=kb;ua=n.call(this,C,b,d);qb=!1;xa=null;Ua=0;bb=!1;fb=Aa=0;Ia=1;Ab=0;zb=5126;Za=Jb=bc=Ra=0;u(ua)?(qb=!0,xa=V.createStream(34962,ua),zb=xa.dtype):(xa=V.getBuffer(ua))?zb=xa.dtype:"constant"in ua?(Ia=2,"number"===typeof ua.constant?(bc=ua.constant,Jb=Za=Ra=0):(bc=0<ua.constant.length?ua.constant[0]:0,Jb=1<ua.constant.length?ua.constant[1]:0,Za=2<ua.constant.length?ua.constant[2]:0,Ra=3<ua.constant.length?ua.constant[3]:0)):
(xa=u(ua.buffer)?V.createStream(34962,ua.buffer):V.getBuffer(ua.buffer),zb="type"in ua?Zd[ua.type]:xa.dtype,bb=!!ua.normalized,fb=ua.size|0,Aa=ua.offset|0,Ab=ua.stride|0,Ua=ua.divisor|0);Vb=G.buffer;G.buffer=xa;ya=G.divisor;G.divisor=Ua;kc=G.normalized;G.normalized=bb;Ja=G.offset;G.offset=Aa;Pb=G.size;G.size=fb;gb=G.state;G.state=Ia;jb=G.stride;G.stride=Ab;za=G.type;G.type=zb;fc=G.w;G.w=Ra;Da=G.x;G.x=bc;rb=G.y;G.y=Jb;sb=G.z;G.z=Za;Xa=aa.call(this,C,b,d);Ya=!1;mc=null;xc=0;uc=!1;Mb=Va=0;cc=1;Fa=0;
yc=5126;vb=mb=Ba=Pa=0;u(Xa)?(Ya=!0,mc=V.createStream(34962,Xa),yc=mc.dtype):(mc=V.getBuffer(Xa))?yc=mc.dtype:"constant"in Xa?(cc=2,"number"===typeof Xa.constant?(Ba=Xa.constant,mb=vb=Pa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,mb=1<Xa.constant.length?Xa.constant[1]:0,vb=2<Xa.constant.length?Xa.constant[2]:0,Pa=3<Xa.constant.length?Xa.constant[3]:0)):(mc=u(Xa.buffer)?V.createStream(34962,Xa.buffer):V.getBuffer(Xa.buffer),yc="type"in Xa?Zd[Xa.type]:mc.dtype,uc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|
0,Fa=Xa.stride|0,xc=Xa.divisor|0);Cb=I.buffer;I.buffer=mc;tb=I.divisor;I.divisor=xc;vc=I.normalized;I.normalized=uc;wb=I.offset;I.offset=Va;jc=I.size;I.size=Mb;sc=I.state;I.state=cc;Qc=I.stride;I.stride=Fa;Mc=I.type;I.type=yc;qd=I.w;I.w=Pa;je=I.x;I.x=Ba;Wb=I.y;I.y=mb;ac=I.z;I.z=vb;Qb=Z.call(this,C,b,d);Ga=!1;Yb=null;nb=0;xb=!1;Rb=Nb=0;gc=1;ic=0;Ed=5126;Nc=Ec=Cc=Bc=0;u(Qb)?(Ga=!0,Yb=V.createStream(34962,Qb),Ed=Yb.dtype):(Yb=V.getBuffer(Qb))?Ed=Yb.dtype:"constant"in Qb?(gc=2,"number"===typeof Qb.constant?
(Cc=Qb.constant,Ec=Nc=Bc=0):(Cc=0<Qb.constant.length?Qb.constant[0]:0,Ec=1<Qb.constant.length?Qb.constant[1]:0,Nc=2<Qb.constant.length?Qb.constant[2]:0,Bc=3<Qb.constant.length?Qb.constant[3]:0)):(Yb=u(Qb.buffer)?V.createStream(34962,Qb.buffer):V.getBuffer(Qb.buffer),Ed="type"in Qb?Zd[Qb.type]:Yb.dtype,xb=!!Qb.normalized,Rb=Qb.size|0,Nb=Qb.offset|0,ic=Qb.stride|0,nb=Qb.divisor|0);Yc=f.buffer;f.buffer=Yb;Sc=f.divisor;f.divisor=nb;Oc=f.normalized;f.normalized=xb;Kb=f.offset;f.offset=Nb;Fb=f.size;f.size=
Rb;Pc=f.state;f.state=gc;Hc=f.stride;f.stride=ic;Tc=f.type;f.type=Ed;hc=f.w;f.w=Bc;Vc=f.x;f.x=Cc;Zc=f.y;f.y=Ec;gd=f.z;f.z=Nc;nc=h.call(this,C,b,d);Wc=!1;Dd=null;Ld=0;fe=!1;Ud=re=0;Jd=1;Gd=0;bd=5126;ad=hd=od=Fc=0;u(nc)?(Wc=!0,Dd=V.createStream(34962,nc),bd=Dd.dtype):(Dd=V.getBuffer(nc))?bd=Dd.dtype:"constant"in nc?(Jd=2,"number"===typeof nc.constant?(od=nc.constant,hd=ad=Fc=0):(od=0<nc.constant.length?nc.constant[0]:0,hd=1<nc.constant.length?nc.constant[1]:0,ad=2<nc.constant.length?nc.constant[2]:
0,Fc=3<nc.constant.length?nc.constant[3]:0)):(Dd=u(nc.buffer)?V.createStream(34962,nc.buffer):V.getBuffer(nc.buffer),bd="type"in nc?Zd[nc.type]:Dd.dtype,fe=!!nc.normalized,Ud=nc.size|0,re=nc.offset|0,Gd=nc.stride|0,Ld=nc.divisor|0);pd=e.buffer;e.buffer=Dd;yd=e.divisor;e.divisor=Ld;zd=e.normalized;e.normalized=fe;ve=e.offset;e.offset=re;se=e.size;e.size=Ud;jf=e.state;e.state=Jd;ee=e.stride;e.stride=Gd;de=e.type;e.type=bd;be=e.w;e.w=Fc;ue=e.x;e.x=od;$d=e.y;e.y=hd;he=e.z;e.z=ad;zc=z.call(this,C,b,d);
Uc=!1;pe=null;ke=0;Hd=!1;Nd=Md=0;Od=1;ie=0;Ce=5126;Pe=Oe=me=ze=0;u(zc)?(Uc=!0,pe=V.createStream(34962,zc),Ce=pe.dtype):(pe=V.getBuffer(zc))?Ce=pe.dtype:"constant"in zc?(Od=2,"number"===typeof zc.constant?(me=zc.constant,Oe=Pe=ze=0):(me=0<zc.constant.length?zc.constant[0]:0,Oe=1<zc.constant.length?zc.constant[1]:0,Pe=2<zc.constant.length?zc.constant[2]:0,ze=3<zc.constant.length?zc.constant[3]:0)):(pe=u(zc.buffer)?V.createStream(34962,zc.buffer):V.getBuffer(zc.buffer),Ce="type"in zc?Zd[zc.type]:pe.dtype,
Hd=!!zc.normalized,Nd=zc.size|0,Md=zc.offset|0,ie=zc.stride|0,ke=zc.divisor|0);Le=T.buffer;T.buffer=pe;qe=T.divisor;T.divisor=ke;De=T.normalized;T.normalized=Hd;Ge=T.offset;T.offset=Md;He=T.size;T.size=Nd;Ie=T.state;T.state=Od;Ee=T.stride;T.stride=ie;Kd=T.type;T.type=Ce;Rd=T.w;T.w=ze;Yd=T.x;T.x=me;ae=T.y;T.y=Oe;Je=T.z;T.z=Pe;Cd=U.call(this,C,b,d);Pd=!1;Ae=null;Ke=0;pf=!1;Qe=Xe=0;Me=1;We=0;Ue=5126;Vd=Qd=Se=Re=0;u(Cd)?(Pd=!0,Ae=V.createStream(34962,Cd),Ue=Ae.dtype):(Ae=V.getBuffer(Cd))?Ue=Ae.dtype:
"constant"in Cd?(Me=2,"number"===typeof Cd.constant?(Se=Cd.constant,Qd=Vd=Re=0):(Se=0<Cd.constant.length?Cd.constant[0]:0,Qd=1<Cd.constant.length?Cd.constant[1]:0,Vd=2<Cd.constant.length?Cd.constant[2]:0,Re=3<Cd.constant.length?Cd.constant[3]:0)):(Ae=u(Cd.buffer)?V.createStream(34962,Cd.buffer):V.getBuffer(Cd.buffer),Ue="type"in Cd?Zd[Cd.type]:Ae.dtype,pf=!!Cd.normalized,Qe=Cd.size|0,Xe=Cd.offset|0,We=Cd.stride|0,Ke=Cd.divisor|0);Te=m.buffer;m.buffer=Ae;ef=m.divisor;m.divisor=Ke;lf=m.normalized;m.normalized=
pf;bf=m.offset;m.offset=Xe;ff=m.size;m.size=Qe;gf=m.state;m.state=Me;hf=m.stride;m.stride=We;qf=m.type;m.type=Ue;mf=m.w;m.w=Re;rf=m.x;m.x=Se;Bf=m.y;m.y=Qd;Cf=m.z;m.z=Vd;Ne=qa.call(this,C,b,d);Be=!1;nf=null;of=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;u(Ne)?(Be=!0,nf=V.createStream(34962,Ne),wf=nf.dtype):(nf=V.getBuffer(Ne))?wf=nf.dtype:"constant"in Ne?(Ef=2,"number"===typeof Ne.constant?(vf=Ne.constant,yf=zf=xf=0):(vf=0<Ne.constant.length?Ne.constant[0]:0,yf=1<Ne.constant.length?Ne.constant[1]:
0,zf=2<Ne.constant.length?Ne.constant[2]:0,xf=3<Ne.constant.length?Ne.constant[3]:0)):(nf=u(Ne.buffer)?V.createStream(34962,Ne.buffer):V.getBuffer(Ne.buffer),wf="type"in Ne?Zd[Ne.type]:nf.dtype,Df=!!Ne.normalized,Af=Ne.size|0,Gf=Ne.offset|0,Ff=Ne.stride|0,of=Ne.divisor|0);If=L.buffer;L.buffer=nf;Jf=L.divisor;L.divisor=of;Kf=L.normalized;L.normalized=Df;Lf=L.offset;L.offset=Gf;sf=L.size;L.size=Af;Qf=L.state;L.state=Ef;Hf=L.stride;L.stride=Ff;tf=L.type;L.type=wf;cg=L.w;L.w=xf;Rf=L.x;L.x=vf;Sf=L.y;L.y=
yf;pg=L.z;L.z=zf;cf=fa.call(this,C,b,d);Ze=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;Yf=Xf=Wf=Tf=0;u(cf)?(Ze=!0,Mf=V.createStream(34962,cf),Vf=Mf.dtype):(Mf=V.getBuffer(cf))?Vf=Mf.dtype:"constant"in cf?(gg=2,"number"===typeof cf.constant?(Wf=cf.constant,Xf=Yf=Tf=0):(Wf=0<cf.constant.length?cf.constant[0]:0,Xf=1<cf.constant.length?cf.constant[1]:0,Yf=2<cf.constant.length?cf.constant[2]:0,Tf=3<cf.constant.length?cf.constant[3]:0)):(Mf=u(cf.buffer)?V.createStream(34962,cf.buffer):V.getBuffer(cf.buffer),
Vf="type"in cf?Zd[cf.type]:Mf.dtype,dg=!!cf.normalized,fg=cf.size|0,eg=cf.offset|0,hg=cf.stride|0,Nf=cf.divisor|0);ig=a.buffer;a.buffer=Mf;qg=a.divisor;a.divisor=Nf;rg=a.normalized;a.normalized=dg;sg=a.offset;a.offset=eg;tg=a.size;a.size=fg;ug=a.state;a.state=gg;vg=a.stride;a.stride=hg;wg=a.type;a.type=Vf;xg=a.w;a.w=Tf;yg=a.x;a.x=Wf;zg=a.y;a.y=Xf;Ag=a.z;a.z=Yf;df=l.call(this,C,b,d);$e=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;u(df)?($e=!0,Of=V.createStream(34962,df),Zf=Of.dtype):
(Of=V.getBuffer(df))?Zf=Of.dtype:"constant"in df?(mg=2,"number"===typeof df.constant?($f=df.constant,ag=bg=Uf=0):($f=0<df.constant.length?df.constant[0]:0,ag=1<df.constant.length?df.constant[1]:0,bg=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Of=u(df.buffer)?V.createStream(34962,df.buffer):V.getBuffer(df.buffer),Zf="type"in df?Zd[df.type]:Of.dtype,jg=!!df.normalized,lg=df.size|0,kg=df.offset|0,ng=df.stride|0,Pf=df.divisor|0);og=W.buffer;W.buffer=Of;Bg=W.divisor;
W.divisor=Pf;Cg=W.normalized;W.normalized=jg;Dg=W.offset;W.offset=kg;Eg=W.size;W.size=lg;Fg=W.state;W.state=mg;Gg=W.stride;W.stride=ng;Hg=W.type;W.type=Zf;Ig=W.w;W.w=Uf;Jg=W.x;W.x=$f;Kg=W.y;W.y=ag;Lg=W.z;W.z=bg;Mg=va.vert;va.vert=59;Ng=va.frag;va.frag=58;la.dirty=!0;c(C,b,d);C.viewportWidth=v;C.viewportHeight=t;xd[0]=w;xd[1]=y;xd[2]=E;xd[3]=D;ra[0]=O;ra[1]=K;ra[2]=J;ra[3]=F;ka.blend_enable=N;x[0]=H;x[1]=ca;x[2]=P;x[3]=Q;ka.depth_enable=ba;ne[0]=ja;ne[1]=oa;ne[2]=ea;ne[3]=da;ka.scissor_enable=ma;ka.stencil_enable=
na;pa&&(A.cpuTime+=performance.now()-sa);Ha&&Lb.destroyStream(wa);Ca.elements=Ea;Ca.offset=Na;Ca.count=yb;Ca.primitive=Bb;R[45]=wc;R[48]=cb;R[10]=Ma;R[46]=ub;R[47]=ib;R[34]=td;R[6]=Ob;R[7]=tc;R[8]=dc;R[9]=lb;qb&&V.destroyStream(xa);G.buffer=Vb;G.divisor=ya;G.normalized=kc;G.offset=Ja;G.size=Pb;G.state=gb;G.stride=jb;G.type=za;G.w=fc;G.x=Da;G.y=rb;G.z=sb;Ya&&V.destroyStream(mc);I.buffer=Cb;I.divisor=tb;I.normalized=vc;I.offset=wb;I.size=jc;I.state=sc;I.stride=Qc;I.type=Mc;I.w=qd;I.x=je;I.y=Wb;I.z=
ac;Ga&&V.destroyStream(Yb);f.buffer=Yc;f.divisor=Sc;f.normalized=Oc;f.offset=Kb;f.size=Fb;f.state=Pc;f.stride=Hc;f.type=Tc;f.w=hc;f.x=Vc;f.y=Zc;f.z=gd;Wc&&V.destroyStream(Dd);e.buffer=pd;e.divisor=yd;e.normalized=zd;e.offset=ve;e.size=se;e.state=jf;e.stride=ee;e.type=de;e.w=be;e.x=ue;e.y=$d;e.z=he;Uc&&V.destroyStream(pe);T.buffer=Le;T.divisor=qe;T.normalized=De;T.offset=Ge;T.size=He;T.state=Ie;T.stride=Ee;T.type=Kd;T.w=Rd;T.x=Yd;T.y=ae;T.z=Je;Pd&&V.destroyStream(Ae);m.buffer=Te;m.divisor=ef;m.normalized=
lf;m.offset=bf;m.size=ff;m.state=gf;m.stride=hf;m.type=qf;m.w=mf;m.x=rf;m.y=Bf;m.z=Cf;Be&&V.destroyStream(nf);L.buffer=If;L.divisor=Jf;L.normalized=Kf;L.offset=Lf;L.size=sf;L.state=Qf;L.stride=Hf;L.type=tf;L.w=cg;L.x=Rf;L.y=Sf;L.z=pg;Ze&&V.destroyStream(Mf);a.buffer=ig;a.divisor=qg;a.normalized=rg;a.offset=sg;a.size=tg;a.state=ug;a.stride=vg;a.type=wg;a.w=xg;a.x=yg;a.y=zg;a.z=Ag;$e&&V.destroyStream(Of);W.buffer=og;W.divisor=Bg;W.normalized=Cg;W.offset=Dg;W.size=Eg;W.state=Fg;W.stride=Gg;W.type=Hg;
W.w=Ig;W.x=Jg;W.y=Kg;W.z=Lg;va.vert=Mg;va.frag=Ng;la.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(c,A,q,O,g,d,y,b,v,oa,Y,H,F,w,B,M,n,G,aa,I,Z,f,h,e,z,T,U,m,qa,L,fa,a,l,W,na,Ka,cb,kc,pa,Qa){var X,K,N,P,sa,J,Ob,$a,Q,t,ma,ea,Ea,Na,Hb,Ha,S,ob,da,wa,bc,cc,jc,td,wc,V,C,la,Ca,Lb,nc,Zc,D,u,ka,va,R,ha,ra,E,p;X=c.attributes;K=c.buffer;N=c.context;P=c.current;sa=c.draw;J=c.elements;Ob=c.extensions;
$a=c.framebuffer;Q=c.gl;t=c.isBufferArgs;ma=c.next;ea=c.shader;Ea=c.uniforms;Na=c.vao;Hb=ma.blend_color;Ha=P.blend_color;S=ma.blend_equation;ob=P.blend_equation;da=ma.blend_func;wa=P.blend_func;bc=ma.colorMask;cc=P.colorMask;jc=ma.depth_range;td=P.depth_range;wc=ma.polygonOffset_offset;V=P.polygonOffset_offset;C=ma.sample_coverage;la=P.sample_coverage;Ca=ma.scissor_box;Lb=P.scissor_box;nc=ma.stencil_func;Zc=P.stencil_func;D=ma.stencil_opBack;u=P.stencil_opBack;ka=ma.stencil_opFront;va=P.stencil_opFront;
R=ma.viewport;ha=P.viewport;ra={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};E={offset:4,stride:8};p={offset:0,stride:8};return{batch:function(b,c){var d,g,k,n,q,r,v,w,y,B,O,F,H;d=$a.next;d!==$a.cur&&(d?Q.bindFramebuffer(36160,d.framebuffer):Q.bindFramebuffer(36160,null),$a.cur=d);if(P.dirty){var M,R,Y,oa,ea,da,Ea,Hb,Ve,kf,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb;M=ma.dither;M!==P.dither&&(M?Q.enable(3024):
Q.disable(3024),P.dither=M);R=S[0];Y=S[1];if(R!==ob[0]||Y!==ob[1])Q.blendEquationSeparate(R,Y),ob[0]=R,ob[1]=Y;oa=ma.depth_func;oa!==P.depth_func&&(Q.depthFunc(oa),P.depth_func=oa);ea=jc[0];da=jc[1];if(ea!==td[0]||da!==td[1])Q.depthRange(ea,da),td[0]=ea,td[1]=da;Ea=ma.depth_mask;Ea!==P.depth_mask&&(Q.depthMask(Ea),P.depth_mask=Ea);Hb=bc[0];Ve=bc[1];kf=bc[2];af=bc[3];if(Hb!==cc[0]||Ve!==cc[1]||kf!==cc[2]||af!==cc[3])Q.colorMask(Hb,Ve,kf,af),cc[0]=Hb,cc[1]=Ve,cc[2]=kf,cc[3]=af;Ad=ma.cull_enable;Ad!==
P.cull_enable&&(Ad?Q.enable(2884):Q.disable(2884),P.cull_enable=Ad);Fe=ma.cull_face;Fe!==P.cull_face&&(Q.cullFace(Fe),P.cull_face=Fe);Sd=ma.frontFace;Sd!==P.frontFace&&(Q.frontFace(Sd),P.frontFace=Sd);Td=ma.lineWidth;Td!==P.lineWidth&&(Q.lineWidth(Td),P.lineWidth=Td);le=ma.polygonOffset_enable;le!==P.polygonOffset_enable&&(le?Q.enable(32823):Q.disable(32823),P.polygonOffset_enable=le);Xd=wc[0];rd=wc[1];if(Xd!==V[0]||rd!==V[1])Q.polygonOffset(Xd,rd),V[0]=Xd,V[1]=rd;jd=ma.sample_alpha;jd!==P.sample_alpha&&
(jd?Q.enable(32926):Q.disable(32926),P.sample_alpha=jd);vd=ma.sample_enable;vd!==P.sample_enable&&(vd?Q.enable(32928):Q.disable(32928),P.sample_enable=vd);$c=C[0];kd=C[1];if($c!==la[0]||kd!==la[1])Q.sampleCoverage($c,kd),la[0]=$c,la[1]=kd;oc=ma.stencil_mask;oc!==P.stencil_mask&&(Q.stencilMask(oc),P.stencil_mask=oc);id=nc[0];ed=nc[1];Lc=nc[2];if(id!==Zc[0]||ed!==Zc[1]||Lc!==Zc[2])Q.stencilFunc(id,ed,Lc),Zc[0]=id,Zc[1]=ed,Zc[2]=Lc;qc=ka[0];ab=ka[1];Ic=ka[2];Db=ka[3];if(qc!==va[0]||ab!==va[1]||Ic!==
va[2]||Db!==va[3])Q.stencilOpSeparate(qc,ab,Ic,Db),va[0]=qc,va[1]=ab,va[2]=Ic,va[3]=Db;pc=D[0];Ta=D[1];Jc=D[2];$b=D[3];if(pc!==u[0]||Ta!==u[1]||Jc!==u[2]||$b!==u[3])Q.stencilOpSeparate(pc,Ta,Jc,$b),u[0]=pc,u[1]=Ta,u[2]=Jc,u[3]=$b;rc=ma.scissor_enable;rc!==P.scissor_enable&&(rc?Q.enable(3089):Q.disable(3089),P.scissor_enable=rc);Fd=Ca[0];Bd=Ca[1];Ac=Ca[2];Xb=Ca[3];if(Fd!==Lb[0]||Bd!==Lb[1]||Ac!==Lb[2]||Xb!==Lb[3])Q.scissor(Fd,Bd,Ac,Xb),Lb[0]=Fd,Lb[1]=Bd,Lb[2]=Ac,Lb[3]=Xb}g=this.viewport;k=g.x|0;n=
g.y|0;q="width"in g?g.width|0:N.framebufferWidth-k;r="height"in g?g.height|0:N.framebufferHeight-n;v=N.viewportWidth;N.viewportWidth=q;w=N.viewportHeight;N.viewportHeight=r;Q.viewport(k,n,q,r);ha[0]=k;ha[1]=n;ha[2]=q;ha[3]=r;Q.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=1;Q.enable(3042);P.blend_enable=!0;Q.blendFuncSeparate(770,771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;Q.disable(2929);P.depth_enable=!1;Q.disable(2960);P.stencil_enable=!1;if(y=P.profile)B=performance.now(),A.count+=c;
Q.useProgram(G.program);O=Ob.angle_instanced_arrays;var Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb;Na.setVAO(null);p.buffer=this.sizeBuffer;Gc=!1;Rc=null;La=0;Eb=!1;ta=Wa=0;md=1;hb=0;Sa=5126;Sb=ec=db=Gb=0;t(p)?(Gc=!0,Rc=K.createStream(34962,p),Sa=Rc.dtype):(Rc=K.getBuffer(p))?Sa=Rc.dtype:"constant"in p?(md=2,"number"===typeof p.constant?
(db=p.constant,ec=Sb=Gb=0):(db=0<p.constant.length?p.constant[0]:0,ec=1<p.constant.length?p.constant[1]:0,Sb=2<p.constant.length?p.constant[2]:0,Gb=3<p.constant.length?p.constant[3]:0)):(Rc=t(p.buffer)?K.createStream(34962,p.buffer):K.getBuffer(p.buffer),Sa="type"in p?ra[p.type]:Rc.dtype,Eb=!!p.normalized,ta=p.size|0,Wa=p.offset|0,hb=p.stride|0,La=p.divisor|0);ge=Qa.location;Zb=X[ge];if(1===md){Zb.buffer||Q.enableVertexAttribArray(ge);Tb=ta||1;if(Zb.type!==Sa||Zb.size!==Tb||Zb.buffer!==Rc||Zb.normalized!==
Eb||Zb.offset!==Wa||Zb.stride!==hb)Q.bindBuffer(34962,Rc.buffer),Q.vertexAttribPointer(ge,Tb,Sa,Eb,hb,Wa),Zb.type=Sa,Zb.size=Tb,Zb.buffer=Rc,Zb.normalized=Eb,Zb.offset=Wa,Zb.stride=hb;Zb.divisor!==La&&(O.vertexAttribDivisorANGLE(ge,La),Zb.divisor=La)}else if(Zb.buffer&&(Q.disableVertexAttribArray(ge),Zb.buffer=null),Zb.x!==db||Zb.y!==ec||Zb.z!==Sb||Zb.w!==Gb)Q.vertexAttrib4f(ge,db,ec,Sb,Gb),Zb.x=db,Zb.y=ec,Zb.z=Sb,Zb.w=Gb;E.buffer=this.sizeBuffer;fd=!1;Ub=null;Ma=0;pb=!1;ib=ub=0;Oa=1;Dc=0;Ib=5126;
dd=lc=eb=cd=0;t(E)?(fd=!0,Ub=K.createStream(34962,E),Ib=Ub.dtype):(Ub=K.getBuffer(E))?Ib=Ub.dtype:"constant"in E?(Oa=2,"number"===typeof E.constant?(eb=E.constant,lc=dd=cd=0):(eb=0<E.constant.length?E.constant[0]:0,lc=1<E.constant.length?E.constant[1]:0,dd=2<E.constant.length?E.constant[2]:0,cd=3<E.constant.length?E.constant[3]:0)):(Ub=t(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),Ib="type"in E?ra[E.type]:Ub.dtype,pb=!!E.normalized,ib=E.size|0,ub=E.offset|0,Dc=E.stride|0,Ma=E.divisor|
0);dc=L.location;kb=X[dc];if(1===Oa){kb.buffer||Q.enableVertexAttribArray(dc);lb=ib||1;if(kb.type!==Ib||kb.size!==lb||kb.buffer!==Ub||kb.normalized!==pb||kb.offset!==ub||kb.stride!==Dc)Q.bindBuffer(34962,Ub.buffer),Q.vertexAttribPointer(dc,lb,Ib,pb,Dc,ub),kb.type=Ib,kb.size=lb,kb.buffer=Ub,kb.normalized=pb,kb.offset=ub,kb.stride=Dc;kb.divisor!==Ma&&(O.vertexAttribDivisorANGLE(dc,Ma),kb.divisor=Ma)}else if(kb.buffer&&(Q.disableVertexAttribArray(dc),kb.buffer=null),kb.x!==eb||kb.y!==lc||kb.z!==dd||
kb.w!==cd)Q.vertexAttrib4f(dc,eb,lc,dd,cd),kb.x=eb,kb.y=lc,kb.z=dd,kb.w=cd;ua=this.charBuffer;qb=!1;xa=null;Ua=0;bb=!1;fb=Aa=0;Ia=1;Ab=0;zb=5126;Za=Jb=Kc=Ra=0;t(ua)?(qb=!0,xa=K.createStream(34962,ua),zb=xa.dtype):(xa=K.getBuffer(ua))?zb=xa.dtype:"constant"in ua?(Ia=2,"number"===typeof ua.constant?(Kc=ua.constant,Jb=Za=Ra=0):(Kc=0<ua.constant.length?ua.constant[0]:0,Jb=1<ua.constant.length?ua.constant[1]:0,Za=2<ua.constant.length?ua.constant[2]:0,Ra=3<ua.constant.length?ua.constant[3]:0)):(xa=t(ua.buffer)?
K.createStream(34962,ua.buffer):K.getBuffer(ua.buffer),zb="type"in ua?ra[ua.type]:xa.dtype,bb=!!ua.normalized,fb=ua.size|0,Aa=ua.offset|0,Ab=ua.stride|0,Ua=ua.divisor|0);Vb=qa.location;ya=X[Vb];if(1===Ia){ya.buffer||Q.enableVertexAttribArray(Vb);ce=fb||1;if(ya.type!==zb||ya.size!==ce||ya.buffer!==xa||ya.normalized!==bb||ya.offset!==Aa||ya.stride!==Ab)Q.bindBuffer(34962,xa.buffer),Q.vertexAttribPointer(Vb,ce,zb,bb,Ab,Aa),ya.type=zb,ya.size=ce,ya.buffer=xa,ya.normalized=bb,ya.offset=Aa,ya.stride=Ab;
ya.divisor!==Ua&&(O.vertexAttribDivisorANGLE(Vb,Ua),ya.divisor=Ua)}else if(ya.buffer&&(Q.disableVertexAttribArray(Vb),ya.buffer=null),ya.x!==Kc||ya.y!==Jb||ya.z!==Za||ya.w!==Ra)Q.vertexAttrib4f(Vb,Kc,Jb,Za,Ra),ya.x=Kc,ya.y=Jb,ya.z=Za,ya.w=Ra;Ja=this.position;Pb=!1;gb=null;jb=0;za=!1;Da=fc=0;rb=1;sb=0;Xa=5126;uc=xc=mc=Ya=0;t(Ja)?(Pb=!0,gb=K.createStream(34962,Ja),Xa=gb.dtype):(gb=K.getBuffer(Ja))?Xa=gb.dtype:"constant"in Ja?(rb=2,"number"===typeof Ja.constant?(mc=Ja.constant,xc=uc=Ya=0):(mc=0<Ja.constant.length?
Ja.constant[0]:0,xc=1<Ja.constant.length?Ja.constant[1]:0,uc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(gb=t(Ja.buffer)?K.createStream(34962,Ja.buffer):K.getBuffer(Ja.buffer),Xa="type"in Ja?ra[Ja.type]:gb.dtype,za=!!Ja.normalized,Da=Ja.size|0,fc=Ja.offset|0,sb=Ja.stride|0,jb=Ja.divisor|0);Va=na.location;Mb=X[Va];if(1===rb){Mb.buffer||Q.enableVertexAttribArray(Va);Xc=Da||2;if(Mb.type!==Xa||Mb.size!==Xc||Mb.buffer!==gb||Mb.normalized!==za||Mb.offset!==fc||Mb.stride!==
sb)Q.bindBuffer(34962,gb.buffer),Q.vertexAttribPointer(Va,Xc,Xa,za,sb,fc),Mb.type=Xa,Mb.size=Xc,Mb.buffer=gb,Mb.normalized=za,Mb.offset=fc,Mb.stride=sb;Mb.divisor!==jb&&(O.vertexAttribDivisorANGLE(Va,jb),Mb.divisor=jb)}else if(Mb.buffer&&(Q.disableVertexAttribArray(Va),Mb.buffer=null),Mb.x!==mc||Mb.y!==xc||Mb.z!==uc||Mb.w!==Ya)Q.vertexAttrib4f(Va,mc,xc,uc,Ya),Mb.x=mc,Mb.y=xc,Mb.z=uc,Mb.w=Ya;Fa=this.viewportArray;Q.uniform4f(pa.location,Fa[0],Fa[1],Fa[2],Fa[3]);yc=this.scale;Q.uniform2f(cb.location,
yc[0],yc[1]);Pa=this.translate;Q.uniform2f(kc.location,Pa[0],Pa[1]);(Ba=sa.elements)?Q.bindBuffer(34963,Ba.buffer.buffer):Na.currentVAO&&(Ba=J.getElements(Na.currentVAO.elements))&&Q.bindBuffer(34963,Ba.buffer.buffer);mb=sa.instances;for(F=0;F<c;++F){H=b[F];var vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc,nd;vb=aa.call(this,N,H,F);F&&Cb===vb||(Cb=vb,Q.uniform1f(fa.location,vb));tb=I.call(this,N,H,F);F&&vc===tb||(vc=tb,Q.uniform1f(l.location,
tb));wb=H.align;F&&wd===wb||(wd=wb,Q.uniform1f(e.location,wb));sc=H.baseline;F&&ud===sc||(ud=sc,Q.uniform1f(m.location,sc));Mc=H.color;ld=Mc[0];Wb=Mc[1];Qb=Mc[2];Yb=Mc[3];F&&sd===ld&&ac===Wb&&Ga===Qb&&nb===Yb||(sd=ld,ac=Wb,Ga=Qb,nb=Yb,Q.uniform4f(a.location,ld,Wb,Qb,Yb));xb=Z.call(this,N,H,F);Nb=xb[0];gc=xb[1];F&&Rb===Nb&&ic===gc||(Rb=Nb,ic=gc,Q.uniform2f(U.location,Nb,gc));Ye=f.call(this,N,H,F);Bc=Ye[0];Ec=Ye[1];F&&Cc===Bc&&Nc===Ec||(Cc=Bc,Nc=Ec,Q.uniform2f(T.location,Bc,Ec));Yc=H.positionOffset;
Sc=Yc[0];Kb=Yc[1];F&&Oc===Sc&&Fb===Kb||(Oc=Sc,Fb=Kb,Q.uniform2f(Ka.location,Sc,Kb));Pc=H.opacity;F&&Hc===Pc||(Hc=Pc,Q.uniform1f(W.location,Pc));(Tc=h.call(this,N,H,F))&&"framebuffer"===Tc._reglType&&(Tc=Tc.color[0]);hc=Tc._texture;Q.uniform1i(z.location,hc.bind());Vc=H.offset;if(nd=H.count)0<mb?Ba?O.drawElementsInstancedANGLE(0,nd,Ba.type,Vc<<(Ba.type-5121>>1),mb):O.drawArraysInstancedANGLE(0,Vc,nd,mb):0>mb&&(Ba?Q.drawElements(0,nd,Ba.type,Vc<<(Ba.type-5121>>1)):Q.drawArrays(0,Vc,nd)),hc.unbind()}Gc&&
K.destroyStream(Rc);fd&&K.destroyStream(Ub);qb&&K.destroyStream(xa);Pb&&K.destroyStream(gb);P.dirty=!0;Na.setVAO(null);N.viewportWidth=v;N.viewportHeight=w;y&&(A.cpuTime+=performance.now()-B)},draw:function(c){var f,h,n,k,v,w,r,B,F,G,H,M,I,R,Y,aa,oa,ea,da,Z,Ea,Hb,Id,kf,af,Ad,Fe,Sd,Td,le,Xd,rd,jd,vd,$c,kd,oc,id,ed,Lc,qc,ab,Ic,Db,pc,Ta,Jc,$b,rc,Fd,Bd,Ac,Xb,Gc,Rc,La,Eb,Wa,ta,md,hb,Sa,Gb,db,ec,Sb,ge,Zb,Tb,fd,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,cd,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb;f=$a.next;f!==$a.cur&&(f?Q.bindFramebuffer(36160,
f.framebuffer):Q.bindFramebuffer(36160,null),$a.cur=f);if(P.dirty){var Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,ce,Ja,Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc;Ia=ma.dither;Ia!==P.dither&&(Ia?Q.enable(3024):Q.disable(3024),P.dither=Ia);Ab=S[0];zb=S[1];if(Ab!==ob[0]||zb!==ob[1])Q.blendEquationSeparate(Ab,zb),ob[0]=Ab,ob[1]=zb;Ra=ma.depth_func;Ra!==P.depth_func&&(Q.depthFunc(Ra),P.depth_func=Ra);Kc=jc[0];Jb=jc[1];if(Kc!==td[0]||Jb!==td[1])Q.depthRange(Kc,Jb),td[0]=Kc,td[1]=
Jb;Za=ma.depth_mask;Za!==P.depth_mask&&(Q.depthMask(Za),P.depth_mask=Za);Vb=bc[0];ya=bc[1];ce=bc[2];Ja=bc[3];if(Vb!==cc[0]||ya!==cc[1]||ce!==cc[2]||Ja!==cc[3])Q.colorMask(Vb,ya,ce,Ja),cc[0]=Vb,cc[1]=ya,cc[2]=ce,cc[3]=Ja;Pb=ma.cull_enable;Pb!==P.cull_enable&&(Pb?Q.enable(2884):Q.disable(2884),P.cull_enable=Pb);gb=ma.cull_face;gb!==P.cull_face&&(Q.cullFace(gb),P.cull_face=gb);jb=ma.frontFace;jb!==P.frontFace&&(Q.frontFace(jb),P.frontFace=jb);za=ma.lineWidth;za!==P.lineWidth&&(Q.lineWidth(za),P.lineWidth=
za);fc=ma.polygonOffset_enable;fc!==P.polygonOffset_enable&&(fc?Q.enable(32823):Q.disable(32823),P.polygonOffset_enable=fc);Da=wc[0];rb=wc[1];if(Da!==V[0]||rb!==V[1])Q.polygonOffset(Da,rb),V[0]=Da,V[1]=rb;sb=ma.sample_alpha;sb!==P.sample_alpha&&(sb?Q.enable(32926):Q.disable(32926),P.sample_alpha=sb);Xa=ma.sample_enable;Xa!==P.sample_enable&&(Xa?Q.enable(32928):Q.disable(32928),P.sample_enable=Xa);Ya=C[0];mc=C[1];if(Ya!==la[0]||mc!==la[1])Q.sampleCoverage(Ya,mc),la[0]=Ya,la[1]=mc;xc=ma.stencil_mask;
xc!==P.stencil_mask&&(Q.stencilMask(xc),P.stencil_mask=xc);uc=nc[0];Va=nc[1];Mb=nc[2];if(uc!==Zc[0]||Va!==Zc[1]||Mb!==Zc[2])Q.stencilFunc(uc,Va,Mb),Zc[0]=uc,Zc[1]=Va,Zc[2]=Mb;Xc=ka[0];Fa=ka[1];yc=ka[2];Pa=ka[3];if(Xc!==va[0]||Fa!==va[1]||yc!==va[2]||Pa!==va[3])Q.stencilOpSeparate(Xc,Fa,yc,Pa),va[0]=Xc,va[1]=Fa,va[2]=yc,va[3]=Pa;Ba=D[0];mb=D[1];vb=D[2];Cb=D[3];if(Ba!==u[0]||mb!==u[1]||vb!==u[2]||Cb!==u[3])Q.stencilOpSeparate(Ba,mb,vb,Cb),u[0]=Ba,u[1]=mb,u[2]=vb,u[3]=Cb;tb=ma.scissor_enable;tb!==P.scissor_enable&&
(tb?Q.enable(3089):Q.disable(3089),P.scissor_enable=tb);vc=Ca[0];wb=Ca[1];wd=Ca[2];sc=Ca[3];if(vc!==Lb[0]||wb!==Lb[1]||wd!==Lb[2]||sc!==Lb[3])Q.scissor(vc,wb,wd,sc),Lb[0]=vc,Lb[1]=wb,Lb[2]=wd,Lb[3]=sc}h=this.viewport;n=h.x|0;k=h.y|0;v="width"in h?h.width|0:N.framebufferWidth-n;w="height"in h?h.height|0:N.framebufferHeight-k;r=N.viewportWidth;N.viewportWidth=v;B=N.viewportHeight;N.viewportHeight=w;Q.viewport(n,k,v,w);ha[0]=n;ha[1]=k;ha[2]=v;ha[3]=w;Q.blendColor(0,0,0,1);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=
1;Q.enable(3042);P.blend_enable=!0;Q.blendFuncSeparate(770,771,773,1);wa[0]=770;wa[1]=771;wa[2]=773;wa[3]=1;Q.disable(2929);P.depth_enable=!1;Q.disable(2960);P.stencil_enable=!1;if(F=P.profile)G=performance.now(),A.count++;Q.useProgram(q.program);H=Ob.angle_instanced_arrays;Na.setVAO(null);p.buffer=this.sizeBuffer;M=!1;I=null;R=0;Y=!1;oa=aa=0;ea=1;da=0;Z=5126;kf=Id=Hb=Ea=0;t(p)?(M=!0,I=K.createStream(34962,p),Z=I.dtype):(I=K.getBuffer(p))?Z=I.dtype:"constant"in p?(ea=2,"number"===typeof p.constant?
(Hb=p.constant,Id=kf=Ea=0):(Hb=0<p.constant.length?p.constant[0]:0,Id=1<p.constant.length?p.constant[1]:0,kf=2<p.constant.length?p.constant[2]:0,Ea=3<p.constant.length?p.constant[3]:0)):(I=t(p.buffer)?K.createStream(34962,p.buffer):K.getBuffer(p.buffer),Z="type"in p?ra[p.type]:I.dtype,Y=!!p.normalized,oa=p.size|0,aa=p.offset|0,da=p.stride|0,R=p.divisor|0);af=Qa.location;Ad=X[af];if(1===ea){Ad.buffer||Q.enableVertexAttribArray(af);Fe=oa||1;if(Ad.type!==Z||Ad.size!==Fe||Ad.buffer!==I||Ad.normalized!==
Y||Ad.offset!==aa||Ad.stride!==da)Q.bindBuffer(34962,I.buffer),Q.vertexAttribPointer(af,Fe,Z,Y,da,aa),Ad.type=Z,Ad.size=Fe,Ad.buffer=I,Ad.normalized=Y,Ad.offset=aa,Ad.stride=da;Ad.divisor!==R&&(H.vertexAttribDivisorANGLE(af,R),Ad.divisor=R)}else if(Ad.buffer&&(Q.disableVertexAttribArray(af),Ad.buffer=null),Ad.x!==Hb||Ad.y!==Id||Ad.z!==kf||Ad.w!==Ea)Q.vertexAttrib4f(af,Hb,Id,kf,Ea),Ad.x=Hb,Ad.y=Id,Ad.z=kf,Ad.w=Ea;E.buffer=this.sizeBuffer;Sd=!1;Td=null;le=0;Xd=!1;jd=rd=0;vd=1;$c=0;kd=5126;Lc=ed=id=
oc=0;t(E)?(Sd=!0,Td=K.createStream(34962,E),kd=Td.dtype):(Td=K.getBuffer(E))?kd=Td.dtype:"constant"in E?(vd=2,"number"===typeof E.constant?(id=E.constant,ed=Lc=oc=0):(id=0<E.constant.length?E.constant[0]:0,ed=1<E.constant.length?E.constant[1]:0,Lc=2<E.constant.length?E.constant[2]:0,oc=3<E.constant.length?E.constant[3]:0)):(Td=t(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),kd="type"in E?ra[E.type]:Td.dtype,Xd=!!E.normalized,jd=E.size|0,rd=E.offset|0,$c=E.stride|0,le=E.divisor|0);
qc=L.location;ab=X[qc];if(1===vd){ab.buffer||Q.enableVertexAttribArray(qc);Ic=jd||1;if(ab.type!==kd||ab.size!==Ic||ab.buffer!==Td||ab.normalized!==Xd||ab.offset!==rd||ab.stride!==$c)Q.bindBuffer(34962,Td.buffer),Q.vertexAttribPointer(qc,Ic,kd,Xd,$c,rd),ab.type=kd,ab.size=Ic,ab.buffer=Td,ab.normalized=Xd,ab.offset=rd,ab.stride=$c;ab.divisor!==le&&(H.vertexAttribDivisorANGLE(qc,le),ab.divisor=le)}else if(ab.buffer&&(Q.disableVertexAttribArray(qc),ab.buffer=null),ab.x!==id||ab.y!==ed||ab.z!==Lc||ab.w!==
oc)Q.vertexAttrib4f(qc,id,ed,Lc,oc),ab.x=id,ab.y=ed,ab.z=Lc,ab.w=oc;Db=this.charBuffer;pc=!1;Ta=null;Jc=0;$b=!1;Fd=rc=0;Bd=1;Ac=0;Xb=5126;Eb=La=Rc=Gc=0;t(Db)?(pc=!0,Ta=K.createStream(34962,Db),Xb=Ta.dtype):(Ta=K.getBuffer(Db))?Xb=Ta.dtype:"constant"in Db?(Bd=2,"number"===typeof Db.constant?(Rc=Db.constant,La=Eb=Gc=0):(Rc=0<Db.constant.length?Db.constant[0]:0,La=1<Db.constant.length?Db.constant[1]:0,Eb=2<Db.constant.length?Db.constant[2]:0,Gc=3<Db.constant.length?Db.constant[3]:0)):(Ta=t(Db.buffer)?
K.createStream(34962,Db.buffer):K.getBuffer(Db.buffer),Xb="type"in Db?ra[Db.type]:Ta.dtype,$b=!!Db.normalized,Fd=Db.size|0,rc=Db.offset|0,Ac=Db.stride|0,Jc=Db.divisor|0);Wa=qa.location;ta=X[Wa];if(1===Bd){ta.buffer||Q.enableVertexAttribArray(Wa);md=Fd||1;if(ta.type!==Xb||ta.size!==md||ta.buffer!==Ta||ta.normalized!==$b||ta.offset!==rc||ta.stride!==Ac)Q.bindBuffer(34962,Ta.buffer),Q.vertexAttribPointer(Wa,md,Xb,$b,Ac,rc),ta.type=Xb,ta.size=md,ta.buffer=Ta,ta.normalized=$b,ta.offset=rc,ta.stride=Ac;
ta.divisor!==Jc&&(H.vertexAttribDivisorANGLE(Wa,Jc),ta.divisor=Jc)}else if(ta.buffer&&(Q.disableVertexAttribArray(Wa),ta.buffer=null),ta.x!==Rc||ta.y!==La||ta.z!==Eb||ta.w!==Gc)Q.vertexAttrib4f(Wa,Rc,La,Eb,Gc),ta.x=Rc,ta.y=La,ta.z=Eb,ta.w=Gc;hb=this.position;Sa=!1;Gb=null;db=0;ec=!1;ge=Sb=0;Zb=1;Tb=0;fd=5126;ub=pb=Ma=Ub=0;t(hb)?(Sa=!0,Gb=K.createStream(34962,hb),fd=Gb.dtype):(Gb=K.getBuffer(hb))?fd=Gb.dtype:"constant"in hb?(Zb=2,"number"===typeof hb.constant?(Ma=hb.constant,pb=ub=Ub=0):(Ma=0<hb.constant.length?
hb.constant[0]:0,pb=1<hb.constant.length?hb.constant[1]:0,ub=2<hb.constant.length?hb.constant[2]:0,Ub=3<hb.constant.length?hb.constant[3]:0)):(Gb=t(hb.buffer)?K.createStream(34962,hb.buffer):K.getBuffer(hb.buffer),fd="type"in hb?ra[hb.type]:Gb.dtype,ec=!!hb.normalized,ge=hb.size|0,Sb=hb.offset|0,Tb=hb.stride|0,db=hb.divisor|0);ib=na.location;Oa=X[ib];if(1===Zb){Oa.buffer||Q.enableVertexAttribArray(ib);Dc=ge||2;if(Oa.type!==fd||Oa.size!==Dc||Oa.buffer!==Gb||Oa.normalized!==ec||Oa.offset!==Sb||Oa.stride!==
Tb)Q.bindBuffer(34962,Gb.buffer),Q.vertexAttribPointer(ib,Dc,fd,ec,Tb,Sb),Oa.type=fd,Oa.size=Dc,Oa.buffer=Gb,Oa.normalized=ec,Oa.offset=Sb,Oa.stride=Tb;Oa.divisor!==db&&(H.vertexAttribDivisorANGLE(ib,db),Oa.divisor=db)}else if(Oa.buffer&&(Q.disableVertexAttribArray(ib),Oa.buffer=null),Oa.x!==Ma||Oa.y!==pb||Oa.z!==ub||Oa.w!==Ub)Q.vertexAttrib4f(ib,Ma,pb,ub,Ub),Oa.x=Ma,Oa.y=pb,Oa.z=ub,Oa.w=Ub;Ib=O.call(this,N,c,0);Q.uniform1f(fa.location,Ib);cd=g.call(this,N,c,0);Q.uniform1f(l.location,cd);Q.uniform1f(e.location,
c.align);Q.uniform1f(m.location,c.baseline);eb=this.viewportArray;Q.uniform4f(pa.location,eb[0],eb[1],eb[2],eb[3]);lc=c.color;Q.uniform4f(a.location,lc[0],lc[1],lc[2],lc[3]);dd=d.call(this,N,c,0);Q.uniform2f(U.location,dd[0],dd[1]);dc=y.call(this,N,c,0);Q.uniform2f(T.location,dc[0],dc[1]);kb=this.scale;Q.uniform2f(cb.location,kb[0],kb[1]);lb=this.translate;Q.uniform2f(kc.location,lb[0],lb[1]);ua=c.positionOffset;Q.uniform2f(Ka.location,ua[0],ua[1]);Q.uniform1f(W.location,c.opacity);(qb=b.call(this,
N,c,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);xa=qb._texture;Q.uniform1i(z.location,xa.bind());(Ua=sa.elements)?Q.bindBuffer(34963,Ua.buffer.buffer):Na.currentVAO&&(Ua=J.getElements(Na.currentVAO.elements))&&Q.bindBuffer(34963,Ua.buffer.buffer);bb=c.offset;if(Aa=c.count)fb=sa.instances,0<fb?Ua?H.drawElementsInstancedANGLE(0,Aa,Ua.type,bb<<(Ua.type-5121>>1),fb):H.drawArraysInstancedANGLE(0,bb,Aa,fb):0>fb&&(Ua?Q.drawElements(0,Aa,Ua.type,bb<<(Ua.type-5121>>1)):Q.drawArrays(0,bb,Aa)),P.dirty=
!0,Na.setVAO(null),N.viewportWidth=r,N.viewportHeight=B,F&&(A.cpuTime+=performance.now()-G),M&&K.destroyStream(I),Sd&&K.destroyStream(Td),pc&&K.destroyStream(Ta),Sa&&K.destroyStream(Gb),xa.unbind()},scope:function(a,b,c){var d,e,f,g,h,l,m,q,u,y,z,C,O,D,G,I,J,L,V,Q,S,T,ha,U,W,X,aa,Z,fa,ka,la,va,na,pa,qa,wa,Ca,Ha,Ka,Na,Qa,wc,$a,Ta,cb,ob,Lb,td,Ob,bc,Xb,nc,jc,La,Eb,Wa,ta,cc,hb,Sa,Gb,db,ec,Sb,kc,Zb,Tb,Qc,Ub,Ma,pb,ub,ib,Oa,Dc,Ib,Zc,eb,lc,dd,dc,kb,lb,ua,qb,xa,Ua,bb,Aa,fb,Ia,Ab,zb,Ra,Kc,Jb,Za,Vb,ya,Id,Ja,
Pb,gb,jb,za,fc,Da,rb,sb,Xa,Ya,mc,xc,uc,Va,Mb,Xc,Fa,yc,Pa,Ba,mb,vb,Cb,tb,vc,wb,wd,sc,ud,Mc,ld,sd,Wb,ac,Qb,Ga,Yb,nb,xb,Nb,Rb,gc,ic,Ye,Bc,Cc,Ec,Nc,Yc,Sc,Oc,Kb,Fb,Pc,Hc,Tc,hc,Vc;d=this.viewport;e=d.x|0;f=d.y|0;g="width"in d?d.width|0:N.framebufferWidth-e;h="height"in d?d.height|0:N.framebufferHeight-f;l=N.viewportWidth;N.viewportWidth=g;m=N.viewportHeight;N.viewportHeight=h;q=R[0];R[0]=e;u=R[1];R[1]=f;y=R[2];R[2]=g;z=R[3];R[3]=h;C=Hb[0];Hb[0]=0;O=Hb[1];Hb[1]=0;D=Hb[2];Hb[2]=0;G=Hb[3];Hb[3]=1;I=ma.blend_enable;
ma.blend_enable=!0;J=da[0];da[0]=770;L=da[1];da[1]=771;V=da[2];da[2]=773;Q=da[3];da[3]=1;S=ma.depth_enable;ma.depth_enable=!1;T=ma.stencil_enable;ma.stencil_enable=!1;if(ha=P.profile)U=performance.now(),A.count++;W=a.offset;X=sa.offset;sa.offset=W;aa=a.count;Z=sa.count;sa.count=aa;fa=sa.primitive;sa.primitive=0;ka=a.align;la=Ea[64];Ea[64]=ka;va=v.call(this,N,a,c);na=Ea[69];Ea[69]=va;pa=oa.call(this,N,a,c);qa=Ea[67];Ea[67]=pa;wa=Y.call(this,N,a,c);Ca=Ea[66];Ea[66]=wa;Ha=a.baseline;Ka=Ea[65];Ea[65]=
Ha;Na=H.call(this,N,a,c);Qa=Ea[62];Ea[62]=Na;wc=a.color;$a=Ea[14];Ea[14]=wc;Ta=F.call(this,N,a,c);cb=Ea[63];Ea[63]=Ta;ob=a.opacity;Lb=Ea[10];Ea[10]=ob;td=a.positionOffset;Ob=Ea[68];Ea[68]=td;bc=this.scale;Xb=Ea[6];Ea[6]=bc;nc=this.translate;jc=Ea[8];Ea[8]=nc;La=this.viewportArray;Eb=Ea[3];Ea[3]=La;Wa=this.charBuffer;ta=!1;cc=null;hb=0;Sa=!1;db=Gb=0;ec=1;Sb=0;kc=5126;Ub=Qc=Tb=Zb=0;t(Wa)?(ta=!0,cc=K.createStream(34962,Wa),kc=cc.dtype):(cc=K.getBuffer(Wa))?kc=cc.dtype:"constant"in Wa?(ec=2,"number"===
typeof Wa.constant?(Tb=Wa.constant,Qc=Ub=Zb=0):(Tb=0<Wa.constant.length?Wa.constant[0]:0,Qc=1<Wa.constant.length?Wa.constant[1]:0,Ub=2<Wa.constant.length?Wa.constant[2]:0,Zb=3<Wa.constant.length?Wa.constant[3]:0)):(cc=t(Wa.buffer)?K.createStream(34962,Wa.buffer):K.getBuffer(Wa.buffer),kc="type"in Wa?ra[Wa.type]:cc.dtype,Sa=!!Wa.normalized,db=Wa.size|0,Gb=Wa.offset|0,Sb=Wa.stride|0,hb=Wa.divisor|0);Ma=w.buffer;w.buffer=cc;pb=w.divisor;w.divisor=hb;ub=w.normalized;w.normalized=Sa;ib=w.offset;w.offset=
Gb;Oa=w.size;w.size=db;Dc=w.state;w.state=ec;Ib=w.stride;w.stride=Sb;Zc=w.type;w.type=kc;eb=w.w;w.w=Zb;lc=w.x;w.x=Tb;dd=w.y;w.y=Qc;dc=w.z;w.z=Ub;E.buffer=this.sizeBuffer;kb=!1;lb=null;ua=0;qb=!1;Ua=xa=0;bb=1;Aa=0;fb=5126;Ra=zb=Ab=Ia=0;t(E)?(kb=!0,lb=K.createStream(34962,E),fb=lb.dtype):(lb=K.getBuffer(E))?fb=lb.dtype:"constant"in E?(bb=2,"number"===typeof E.constant?(Ab=E.constant,zb=Ra=Ia=0):(Ab=0<E.constant.length?E.constant[0]:0,zb=1<E.constant.length?E.constant[1]:0,Ra=2<E.constant.length?E.constant[2]:
0,Ia=3<E.constant.length?E.constant[3]:0)):(lb=t(E.buffer)?K.createStream(34962,E.buffer):K.getBuffer(E.buffer),fb="type"in E?ra[E.type]:lb.dtype,qb=!!E.normalized,Ua=E.size|0,xa=E.offset|0,Aa=E.stride|0,ua=E.divisor|0);Kc=B.buffer;B.buffer=lb;Jb=B.divisor;B.divisor=ua;Za=B.normalized;B.normalized=qb;Vb=B.offset;B.offset=xa;ya=B.size;B.size=Ua;Id=B.state;B.state=bb;Ja=B.stride;B.stride=Aa;Pb=B.type;B.type=fb;gb=B.w;B.w=Ia;jb=B.x;B.x=Ab;za=B.y;B.y=zb;fc=B.z;B.z=Ra;Da=this.position;rb=!1;sb=null;Xa=
0;Ya=!1;xc=mc=0;uc=1;Va=0;Mb=5126;Pa=yc=Fa=Xc=0;t(Da)?(rb=!0,sb=K.createStream(34962,Da),Mb=sb.dtype):(sb=K.getBuffer(Da))?Mb=sb.dtype:"constant"in Da?(uc=2,"number"===typeof Da.constant?(Fa=Da.constant,yc=Pa=Xc=0):(Fa=0<Da.constant.length?Da.constant[0]:0,yc=1<Da.constant.length?Da.constant[1]:0,Pa=2<Da.constant.length?Da.constant[2]:0,Xc=3<Da.constant.length?Da.constant[3]:0)):(sb=t(Da.buffer)?K.createStream(34962,Da.buffer):K.getBuffer(Da.buffer),Mb="type"in Da?ra[Da.type]:sb.dtype,Ya=!!Da.normalized,
xc=Da.size|0,mc=Da.offset|0,Va=Da.stride|0,Xa=Da.divisor|0);Ba=M.buffer;M.buffer=sb;mb=M.divisor;M.divisor=Xa;vb=M.normalized;M.normalized=Ya;Cb=M.offset;M.offset=mc;tb=M.size;M.size=xc;vc=M.state;M.state=uc;wb=M.stride;M.stride=Va;wd=M.type;M.type=Mb;sc=M.w;M.w=Xc;ud=M.x;M.x=Fa;Mc=M.y;M.y=yc;ld=M.z;M.z=Pa;p.buffer=this.sizeBuffer;sd=!1;Wb=null;ac=0;Qb=!1;Yb=Ga=0;nb=1;xb=0;Nb=5126;Ye=ic=gc=Rb=0;t(p)?(sd=!0,Wb=K.createStream(34962,p),Nb=Wb.dtype):(Wb=K.getBuffer(p))?Nb=Wb.dtype:"constant"in p?(nb=
2,"number"===typeof p.constant?(gc=p.constant,ic=Ye=Rb=0):(gc=0<p.constant.length?p.constant[0]:0,ic=1<p.constant.length?p.constant[1]:0,Ye=2<p.constant.length?p.constant[2]:0,Rb=3<p.constant.length?p.constant[3]:0)):(Wb=t(p.buffer)?K.createStream(34962,p.buffer):K.getBuffer(p.buffer),Nb="type"in p?ra[p.type]:Wb.dtype,Qb=!!p.normalized,Yb=p.size|0,Ga=p.offset|0,xb=p.stride|0,ac=p.divisor|0);Bc=n.buffer;n.buffer=Wb;Cc=n.divisor;n.divisor=ac;Ec=n.normalized;n.normalized=Qb;Nc=n.offset;n.offset=Ga;Yc=
n.size;n.size=Yb;Sc=n.state;n.state=nb;Oc=n.stride;n.stride=xb;Kb=n.type;n.type=Nb;Fb=n.w;n.w=Rb;Pc=n.x;n.x=gc;Hc=n.y;n.y=ic;Tc=n.z;n.z=Ye;hc=ea.vert;ea.vert=61;Vc=ea.frag;ea.frag=60;P.dirty=!0;b(N,a,c);N.viewportWidth=l;N.viewportHeight=m;R[0]=q;R[1]=u;R[2]=y;R[3]=z;Hb[0]=C;Hb[1]=O;Hb[2]=D;Hb[3]=G;ma.blend_enable=I;da[0]=J;da[1]=L;da[2]=V;da[3]=Q;ma.depth_enable=S;ma.stencil_enable=T;ha&&(A.cpuTime+=performance.now()-U);sa.offset=X;sa.count=Z;sa.primitive=fa;Ea[64]=la;Ea[69]=na;Ea[67]=qa;Ea[66]=
Ca;Ea[65]=Ka;Ea[62]=Qa;Ea[14]=$a;Ea[63]=cb;Ea[10]=Lb;Ea[68]=Ob;Ea[6]=Xb;Ea[8]=jc;Ea[3]=Eb;ta&&K.destroyStream(cc);w.buffer=Ma;w.divisor=pb;w.normalized=ub;w.offset=ib;w.size=Oa;w.state=Dc;w.stride=Ib;w.type=Zc;w.w=eb;w.x=lc;w.y=dd;w.z=dc;kb&&K.destroyStream(lb);B.buffer=Kc;B.divisor=Jb;B.normalized=Za;B.offset=Vb;B.size=ya;B.state=Id;B.stride=Ja;B.type=Pb;B.w=gb;B.x=jb;B.y=za;B.z=fc;rb&&K.destroyStream(sb);M.buffer=Ba;M.divisor=mb;M.normalized=vb;M.offset=Cb;M.size=tb;M.state=vc;M.stride=wb;M.type=
wd;M.w=sc;M.x=ud;M.y=Mc;M.z=ld;sd&&K.destroyStream(Wb);n.buffer=Bc;n.divisor=Cc;n.normalized=Ec;n.offset=Nc;n.size=Yc;n.state=Sc;n.stride=Oc;n.type=Kb;n.w=Fb;n.x=Pc;n.y=Hc;n.z=Tc;ea.vert=hc;ea.frag=Vc;P.dirty=!0}}}}},{}],25:[function(A,Z,jc){var c=A("./sorted-object-keys");Z.exports=function(A,q){for(var O=c(q),g=0;g<O.length;++g)A[O[g]]=q[O[g]];return A}},{"./sorted-object-keys":34}],26:[function(A,Z,jc){function c(c,g,d,q,b,v){for(var A=0;A<g;++A)for(var Y=c[A],H=0;H<d;++H)for(var F=Y[H],w=0;w<
q;++w)b[v++]=F[w]}function ga(q,g,d,y,b){for(var v=1,A=d+1;A<g.length;++A)v*=g[A];var Y=g[d];if(4===g.length-d){var H=g[d+1],F=g[d+2];g=g[d+3];for(A=0;A<Y;++A)c(q[A],H,F,g,y,b),b+=v}else for(A=0;A<Y;++A)ga(q[A],g,d+1,y,b),b+=v}var q=A("./pool");Z.exports={shape:function(c){for(var g=[];c.length;c=c[0])g.push(c.length);return g},flatten:function(A,g,d,y){var b=1;if(g.length)for(var v=0;v<g.length;++v)b*=g[v];else b=0;d=y||q.allocType(d,b);switch(g.length){case 0:break;case 1:y=g[0];for(g=0;g<y;++g)d[g]=
A[g];break;case 2:y=g[0];g=g[1];for(v=b=0;v<y;++v)for(var Z=A[v],Y=0;Y<g;++Y)d[b++]=Z[Y];break;case 3:c(A,g[0],g[1],g[2],d,0);break;default:ga(A,g,0,d,0)}return d}}},{"./pool":32}],27:[function(A,Z,jc){var c=A("./is-typed-array");Z.exports=function(A){return Array.isArray(A)||c(A)}},{"./is-typed-array":30}],28:[function(A,Z,jc){var c=A("./is-typed-array");Z.exports=function(A){return!!A&&"object"===typeof A&&Array.isArray(A.shape)&&Array.isArray(A.stride)&&"number"===typeof A.offset&&A.shape.length===
A.stride.length&&(Array.isArray(A.data)||c(A.data))}},{"./is-typed-array":30}],29:[function(A,Z,jc){Z.exports=function(c){return!(c&c-1)&&!!c}},{}],30:[function(A,Z,jc){Z.exports=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray}},{}],31:[function(A,Z,jc){Z.exports=function(c,A){for(var q=Array(c),
O=0;O<c;++O)q[O]=A(O);return q}},{}],32:[function(A,Z,jc){function c(c){var g,d;g=(65535<c)<<4;c>>>=g;d=(255<c)<<3;c>>>=d;g|=d;d=(15<c)<<2;c>>>=d;g|=d;d=(3<c)<<1;return g|d|c>>>d>>1}function ga(){function A(g){a:{for(var b=16;268435456>=b;b*=16)if(g<=b){g=b;break a}g=0}b=d[c(g)>>2];return 0<b.length?b.pop():new ArrayBuffer(g)}function g(g){d[c(g.byteLength)>>2].push(g)}var d=q(8,function(){return[]});return{alloc:A,free:g,allocType:function(c,b){var d=null;switch(c){case 5120:d=new Int8Array(A(b),
0,b);break;case 5121:d=new Uint8Array(A(b),0,b);break;case 5122:d=new Int16Array(A(2*b),0,b);break;case 5123:d=new Uint16Array(A(2*b),0,b);break;case 5124:d=new Int32Array(A(4*b),0,b);break;case 5125:d=new Uint32Array(A(4*b),0,b);break;case 5126:d=new Float32Array(A(4*b),0,b);break;default:return null}return d.length!==b?d.subarray(0,b):d},freeType:function(c){g(c.buffer)}}}var q=A("./loop");A=ga();A.zero=ga();Z.exports=A},{"./loop":31}],33:[function(A,Z,jc){Z.exports={next:"function"===typeof requestAnimationFrame?
function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:"function"===typeof cancelAnimationFrame?function(c){return cancelAnimationFrame(c)}:clearTimeout}},{}],34:[function(A,Z,jc){Z.exports=function(c){return Object.keys(c).sort()}},{}],35:[function(A,Z,jc){var c=A("./pool"),ga=new Float32Array(1),q=new Uint32Array(ga.buffer);Z.exports=function(A){for(var g=c.allocType(5123,A.length),d=0;d<A.length;++d)if(isNaN(A[d]))g[d]=65535;else if(Infinity===A[d])g[d]=31744;
else if(-Infinity===A[d])g[d]=64512;else{ga[0]=A[d];var y=q[0],b=y>>>31<<15,v=(y<<1>>>24)-127,y=y>>13&1023;g[d]=-24>v?b:-14>v?b+(y+1024>>-14-v):15<v?b+31744:b+(v+15<<10)+y}return g}},{"./pool":32}],36:[function(A,Z,jc){var c=A("./sorted-object-keys");Z.exports=function(A){return c(A).map(function(c){return A[c]})}},{"./sorted-object-keys":34}],37:[function(A,Z,jc){function c(c,b,g){function q(){var b=window.innerWidth,d=window.innerHeight;c!==document.body&&(d=A.getBoundingClientRect(),b=d.right-
d.left,d=d.bottom-d.top);A.width=g*b;A.height=g*d}var A=document.createElement("canvas");d(A.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});c.appendChild(A);c===document.body&&(A.style.position="absolute",d(c.style,{margin:0,padding:0}));var H;c!==document.body&&"function"===typeof ResizeObserver?(H=new ResizeObserver(function(){setTimeout(q)}),H.observe(c)):window.addEventListener("resize",q,!1);q();return{canvas:A,onDestroy:function(){H?H.disconnect():window.removeEventListener("resize",
q);c.removeChild(A)}}}function ga(c,b){function d(g){try{return c.getContext(g,b)}catch(q){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function q(c){if("string"===typeof c)return c.split();g(Array.isArray(c),"invalid extension array");return c}function O(c){return"string"===typeof c?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(c)):c}var g=A("./util/check"),d=A("./util/extend");Z.exports=function(d){var b=d||{},v,A,Y,H;
d={};var F=[],w=[],B="undefined"===typeof window?1:window.devicePixelRatio,M=!1,n=function(b){b&&g.raise(b)},G=function(){};"string"===typeof b?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),v=document.querySelector(b),g(v,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?v=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?
(H=b,Y=H.canvas):(g.constructor(b),"gl"in b?H=b.gl:"canvas"in b?Y=O(b.canvas):"container"in b&&(A=O(b.container)),"attributes"in b&&(d=b.attributes,g.type(d,"object","invalid context attributes")),"extensions"in b&&(F=q(b.extensions)),"optionalExtensions"in b&&(w=q(b.optionalExtensions)),"onDone"in b&&(g.type(b.onDone,"function","invalid or missing onDone callback"),n=b.onDone),"profile"in b&&(M=!!b.profile),"pixelRatio"in b&&(B=+b.pixelRatio,g(0<B,"invalid pixel ratio"))):g.raise("invalid arguments to regl");
v&&("canvas"===v.nodeName.toLowerCase()?Y=v:A=v);if(!H){if(!Y){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");v=c(A||document.body,n,B);if(!v)return null;Y=v.canvas;G=v.onDestroy}void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!0);H=ga(Y,d)}return H?{gl:H,canvas:Y,container:A,extensions:F,optionalExtensions:w,pixelRatio:B,profile:M,onDone:n,onDestroy:G}:(G(),n("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(A,Z,jc){function c(b,c){for(var d=0;d<b.length;++d)if(b[d]===c)return d;return-1}var ga=A("./lib/util/check"),q=A("./lib/util/extend"),O=A("./lib/dynamic"),g=A("./lib/util/raf"),d=A("./lib/util/clock"),y=A("./lib/strings"),b=A("./lib/webgl"),v=A("./lib/extension"),oa=A("./lib/limits"),Y=A("./lib/buffer"),H=A("./lib/elements"),F=A("./lib/texture"),w=A("./lib/renderbuffer"),B=A("./lib/framebuffer"),M=A("./lib/attribute"),n=A("./lib/shader"),
G=A("./lib/read"),aa=A("./lib/core"),I=A("./lib/stats"),Id=A("./lib/timer");Z.exports=function(f){function h(){if(0===ob.length)K&&K.update(),cc=null;else{cc=g.next(h);a();for(var b=ob.length-1;0<=b;--b){var c=ob[b];c&&c(J,null,0)}na.flush();K&&K.update()}}function e(){!cc&&0<ob.length&&(cc=g.next(h))}function z(){cc&&(g.cancel(h),cc=null)}function A(a){a.preventDefault();cb=!0;z();da.forEach(function(a){a()})}function U(a){na.getError();cb=!1;kc.restore();ma.restore();$a.restore();ea.restore();Ea.restore();
Na.restore();t.restore();K&&K.restore();Hb.procs.refresh();e();wa.forEach(function(a){a()})}function m(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(O.isDynamic(f))e[b]=O.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(O.isDynamic(f[g])){e[b]=O.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;t.length<a;)t.push(null);return t}ga(!!a,"invalid args to regl({...})");ga.type(a,"object","invalid args to regl({...})");var d=
b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=q({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g=
{gpuTime:0,cpuTime:0,count:0},h=Hb.compile(a,f,e,d,g),l=h.draw,m=h.batch,n=h.scope,t=[];return q(function(a,b){var d;cb&&ga.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,
a,a.length)}else return l.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function Z(a,b){var c=0;Hb.procs.poll();var d=b.color;d&&(na.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(na.clearDepth(+b.depth),c|=256);"stencil"in b&&(na.clearStencil(b.stencil|0),c|=1024);ga(!!c,"called regl.clear with no buffer specified");na.clear(c)}function L(a){ga.type(a,"function","regl.frame() callback must be a function");ob.push(a);e();return{cancel:function(){function b(){var a=
c(ob,b);ob[a]=ob[ob.length-1];--ob.length;0>=ob.length&&z()}var d=c(ob,a);ga(0<=d,"cannot cancel a frame twice");ob[d]=b}}}function fa(){var a=Ha.viewport,b=Ha.scissor_box;a[0]=a[1]=b[0]=b[1]=0;J.viewportWidth=J.framebufferWidth=J.drawingBufferWidth=a[2]=b[2]=na.drawingBufferWidth;J.viewportHeight=J.framebufferHeight=J.drawingBufferHeight=a[3]=b[3]=na.drawingBufferHeight}function a(){J.tick+=1;J.time=W();fa();Hb.procs.poll()}function l(){ea.refresh();fa();Hb.procs.refresh();K&&K.update()}function W(){return(d()-
N)/1E3}console.log("REGL args are:",f);f=b(f);console.log("REGL configs are:",f);if(!f)return null;var na=f.gl,Ka=na.getContextAttributes(),cb=na.isContextLost(),kc=v(na,f);if(!kc)return null;var pa=y(),Qa=I(),X=kc.extensions,K=Id(na,X),N=d(),P=na.drawingBufferWidth,sa=na.drawingBufferHeight,J={tick:0,time:0,viewportWidth:P,viewportHeight:sa,framebufferWidth:P,framebufferHeight:sa,drawingBufferWidth:P,drawingBufferHeight:sa,pixelRatio:f.pixelRatio},P={elements:null,primitive:4,count:-1,offset:0,instances:-1},
Ob=oa(na,X),$a=Y(na,Qa,f,function(a){return t.destroyBuffer(a)}),Q=H(na,X,$a,Qa),t=M(na,X,Ob,Qa,$a,Q,P),ma=n(na,pa,Qa,f),ea=F(na,X,Ob,function(){Hb.procs.poll()},J,Qa,f),Ea=w(na,X,Ob,Qa,f),Na=B(na,X,Ob,ea,Ea,Qa),Hb=aa(na,pa,X,Ob,$a,Q,ea,Na,{},t,ma,P,J,K,f),pa=G(na,Na,Hb.procs.poll,J,Ka,X,Ob),Ha=Hb.next,S=na.canvas,ob=[],da=[],wa=[],bc=[f.onDestroy],cc=null;S&&(S.addEventListener("webglcontextlost",A,!1),S.addEventListener("webglcontextrestored",U,!1));var jc=Na.setFBO=m({framebuffer:O.define.call(null,
1,"framebuffer")});l();Ka=q(m,{clear:function(a){ga("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)jc(q({framebuffer:a.framebuffer.faces[b]},a),Z);else jc(a,Z);else Z(null,a)},prop:O.define.bind(null,1),context:O.define.bind(null,2),"this":O.define.bind(null,3),draw:m({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return Q.create(a,!1)},texture:ea.create2D,
cube:ea.createCube,renderbuffer:Ea.create,framebuffer:Na.create,framebufferCube:Na.createCube,vao:t.createVAO,attributes:Ka,frame:L,on:function(a,b){ga.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return L(b);case "lost":c=da;break;case "restore":c=wa;break;case "destroy":c=bc;break;default:ga.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();
break}}}},limits:Ob,hasExtension:function(a){return 0<=Ob.extensions.indexOf(a.toLowerCase())},read:pa,destroy:function(){ob.length=0;z();S&&(S.removeEventListener("webglcontextlost",A),S.removeEventListener("webglcontextrestored",U));ma.clear();Na.clear();Ea.clear();t.clear();ea.clear();Q.clear();$a.clear();K&&K.clear();bc.forEach(function(a){a()})},_gl:na,_refresh:l,poll:function(){a();K&&K.update()},now:W,stats:Qa});f.onDone(null,Ka);return Ka}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,
"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

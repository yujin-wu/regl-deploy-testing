<!DOCTYPE html>
      <html>
        <head>
          <title>example/cube.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function M(Z,ma,a){function g(h,e){if(!ma[h]){if(!Z[h]){var c="function"==typeof require&&require;if(!e&&c)return c(h,!0);if(t)return t(h,!0);c=Error("Cannot find module '"+h+"'");throw c.code="MODULE_NOT_FOUND",c;}c=ma[h]={exports:{}};Z[h][0].call(c.exports,function(a){return g(Z[h][1][a]||a)},c,c.exports,M,Z,ma,a)}return ma[h].exports}for(var t="function"==typeof require&&require,x=0;x<a.length;x++)g(a[x]);return g}return M})()({1:[function(M,Z,ma){var a=M("../regl")(),g=M("gl-mat4"),
t=a({frag:"\n  precision mediump float;\n  varying vec2 vUv;\n  uniform sampler2D tex;\n  void main () {\n    gl_FragColor = texture2D(tex,vUv);\n  }",vert:"\n  precision mediump float;\n  attribute vec3 position;\n  attribute vec2 uv;\n  varying vec2 vUv;\n  uniform mat4 projection, view;\n  void main() {\n    vUv = uv;\n    gl_Position = projection * view * vec4(position, 1);\n  }",attributes:{position:[[-.5,.5,.5],[.5,.5,.5],[.5,-.5,.5],[-.5,-.5,.5],[.5,.5,.5],[.5,.5,-.5],[.5,-.5,-.5],[.5,-.5,
.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,-.5],[.5,-.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[-.5,-.5,.5],[-.5,-.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,-.5,.5],[-.5,-.5,.5]],uv:[[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1]]},elements:[[2,1,0],[2,0,3],[6,5,4],[6,4,7],[10,9,8],[10,8,11],[14,13,12],[14,12,15],[18,17,16],[18,16,19],[20,21,22],[23,20,22]],uniforms:{view:function(a){a=
.01*a.tick;return g.lookAt([],[5*Math.cos(a),2.5*Math.sin(a),5*Math.sin(a)],[0,0,0],[0,1,0])},projection:function(a){return g.perspective([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,10)},tex:a.prop("texture")}});M("resl")({manifest:{texture:{type:"image",src:"assets/peppers.png",parser:function(g){return a.texture({data:g,mag:"linear",min:"linear"})}}},onDone:function(g){var h=g.texture;a.frame(function(){a.clear({color:[0,0,0,255],depth:1});t({texture:h})})}})},{"../regl":69,"gl-mat4":53,resl:68}],
2:[function(M,Z,ma){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var g=M("./util/sorted-object-keys"),t=M("./util/check"),x=M("./util/values"),h=M("./constants/dtypes.json"),e=M("./util/is-typed-array"),c=M("./util/is-ndarray"),d=M("./constants/primitives.json"),y="attributes elements offset count primitive instances".split(" ");Z.exports=function(l,F,K,q,m,E,ia){function C(a){if(a!==W.currentVAO){var e=
F.oes_vertex_array_object;a?e.bindVertexArrayOES(a.vao):e.bindVertexArrayOES(null);W.currentVAO=a}}function L(a){if(a!==W.currentVAO){if(a)a.bindAttrs();else{for(var e=F.angle_instanced_arrays,d=0;d<n.length;++d){var c=n[d];c.buffer?(l.enableVertexAttribArray(d),c.buffer.bind(),l.vertexAttribPointer(d,c.size,c.type,c.normalized,c.stride,c.offfset),e&&c.divisor&&e.vertexAttribDivisorANGLE(d,c.divisor)):(l.disableVertexAttribArray(d),l.vertexAttrib4f(d,c.x,c.y,c.z,c.w))}ia.elements?l.bindBuffer(34963,
ia.elements.buffer.buffer):l.bindBuffer(34963,null)}W.currentVAO=a}}function u(){x(p).forEach(function(a){a.destroy()})}function J(){this.id=++U;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=F.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;p[this.id]=this;this.buffers=[]}function aa(){F.oes_vertex_array_object&&x(p).forEach(function(a){a.refresh()})}var b=K.maxAttributes,n=Array(b);for(K=0;K<b;++K)n[K]=
new a;var U=0,p={},W={Record:a,scope:{},state:n,currentVAO:null,targetVAO:null,restore:F.oes_vertex_array_object?aa:function(){},createVAO:function(B){function z(B){var x;if(Array.isArray(B))x=B,n.elements&&n.ownsElements&&n.elements.destroy(),n.elements=null,n.ownsElements=!1,n.offset=0,n.count=0,n.instances=-1,n.primitive=4;else{t("object"===typeof B,"invalid arguments for create vao");t("attributes"in B,"must specify attributes for vao");if(B.elements){var k=B.elements;n.ownsElements?("function"===
typeof k&&"elements"===k._reglType?n.elements.destroy():n.elements(k),n.ownsElements=!1):E.getElements(B.elements)?(n.elements=B.elements,n.ownsElements=!1):(n.elements=E.create(B.elements),n.ownsElements=!0)}else n.elements=null,n.ownsElements=!1;x=B.attributes;n.offset=0;n.count=-1;n.instances=-1;n.primitive=4;n.elements&&(n.count=n.elements._elements.vertCount,n.primitive=n.elements._elements.primType);"offset"in B&&(n.offset=B.offset|0);"count"in B&&(n.count=B.count|0);"instances"in B&&(n.instances=
B.instances|0);"primitive"in B&&(t(B.primitive in d,"bad primitive type: "+B.primitive),n.primitive=d[B.primitive]);t.optional(function(){for(var a=g(B),f=0;f<a.length;++f)t(0<=y.indexOf(a[f]),'invalid option for vao: "'+a[f]+'" valid options are '+y)});t(Array.isArray(x),"attributes must be an array")}t(x.length<b,"too many attributes");t(0<x.length,"must specify at least one attribute");var k={},V=n.attributes;V.length=x.length;for(var f=0;f<x.length;++f){var p=x[f],H=V[f]=new a,C=p.data||p;if(Array.isArray(C)||
e(C)||c(C)){var U;n.buffers[f]&&(U=n.buffers[f],e(C)&&U._buffer.byteLength>=C.byteLength?U.subdata(C):(U.destroy(),n.buffers[f]=null));n.buffers[f]||(U=n.buffers[f]=m.create(p,34962,!1,!0));H.buffer=m.getBuffer(U);H.size=H.buffer.dimension|0;H.normalized=!1;H.type=H.buffer.dtype;H.offset=0;H.stride=0;H.divisor=0;H.state=1;k[f]=1}else m.getBuffer(p)?(H.buffer=m.getBuffer(p),H.size=H.buffer.dimension|0,H.normalized=!1,H.type=H.buffer.dtype,H.offset=0,H.stride=0,H.divisor=0,H.state=1):m.getBuffer(p.buffer)?
(H.buffer=m.getBuffer(p.buffer),H.size=(+p.size||H.buffer.dimension)|0,H.normalized=!!p.normalized||!1,"type"in p?(t.parameter(p.type,h,"invalid buffer type"),H.type=h[p.type]):H.type=H.buffer.dtype,H.offset=(p.offset||0)|0,H.stride=(p.stride||0)|0,H.divisor=(p.divisor||0)|0,H.state=1,t(1<=H.size&&4>=H.size,"size must be between 1 and 4"),t(0<=H.offset,"invalid offset"),t(0<=H.stride&&255>=H.stride,"stride must be between 0 and 255"),t(0<=H.divisor,"divisor must be positive"),t(!H.divisor||!!F.angle_instanced_arrays,
"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in p?(t(0<f,"first attribute must not be a constant"),H.x=+p.x||0,H.y=+p.y||0,H.z=+p.z||0,H.w=+p.w||0,H.state=2):t(!1,"invalid attribute spec for location "+f)}for(U=0;U<n.buffers.length;++U)!k[U]&&n.buffers[U]&&(n.buffers[U].destroy(),n.buffers[U]=null);n.refresh();return z}var n=new J;q.vaoCount+=1;z.destroy=function(){for(var a=0;a<n.buffers.length;++a)n.buffers[a]&&n.buffers[a].destroy();n.buffers.length=0;n.ownsElements&&(n.elements.destroy(),
n.elements=null,n.ownsElements=!1);n.destroy()};z._vao=n;z._reglType="vao";return z(B)},getVAO:function(a){return"function"===typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var e=0;e<n.length;++e){var d=n[e];d.buffer===a&&(l.disableVertexAttribArray(e),d.buffer=null)}},setVAO:F.oes_vertex_array_object?C:L,clear:F.oes_vertex_array_object?u:function(){}};J.prototype.bindAttrs=function(){for(var a=F.angle_instanced_arrays,e=this.attributes,d=0;d<e.length;++d){var c=e[d];c.buffer?(l.enableVertexAttribArray(d),
l.bindBuffer(34962,c.buffer.buffer),l.vertexAttribPointer(d,c.size,c.type,c.normalized,c.stride,c.offset),a&&c.divisor&&a.vertexAttribDivisorANGLE(d,c.divisor)):(l.disableVertexAttribArray(d),l.vertexAttrib4f(d,c.x,c.y,c.z,c.w))}for(a=e.length;a<b;++a)l.disableVertexAttribArray(a);(a=E.getElements(this.elements))?l.bindBuffer(34963,a.buffer.buffer):l.bindBuffer(34963,null)};J.prototype.refresh=function(){var a=F.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),W.currentVAO=
null,a.bindVertexArrayOES(null))};J.prototype.destroy=function(){if(this.vao){var a=F.oes_vertex_array_object;this===W.currentVAO&&(W.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);p[this.id]&&(delete p[this.id],--q.vaoCount)};return W}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,
"./util/values":36}],3:[function(M,Z,ma){function a(a){return K[Object.prototype.toString.call(a)]|0}function g(a,e){for(var d=0;d<e.length;++d)a[d]=e[d]}function t(a,e,d,c,g,h,b){for(var n=0,x=0;x<d;++x)for(var p=0;p<c;++p)a[n++]=e[g*x+h*p+b]}var x=M("./util/sorted-object-keys"),h=M("./util/check"),e=M("./util/is-typed-array"),c=M("./util/is-ndarray"),d=M("./util/values"),y=M("./util/pool");ma=M("./util/flatten");var l=ma.flatten,F=ma.shape,K=M("./constants/arraytypes.json"),q=M("./constants/dtypes.json"),
m=M("./constants/usage.json"),E=[];E[5120]=1;E[5122]=2;E[5124]=4;E[5121]=1;E[5123]=2;E[5125]=4;E[5126]=4;Z.exports=function(K,C,L,u){function J(a){this.id=U++;this.buffer=K.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;L.profile&&(this.stats={size:0})}function aa(a,e,d){a.byteLength=e.byteLength;K.bufferData(a.type,e,d)}function b(d,b,n,p,x,k){d.usage=n;if(Array.isArray(b)){if(d.dtype=p||5126,0<b.length)if(Array.isArray(b[0])){x=
F(b);for(var V=p=1;V<x.length;++V)p*=x[V];d.dimension=p;b=l(b,x,d.dtype);aa(d,b,n);k?d.persistentData=b:y.freeType(b)}else"number"===typeof b[0]?(d.dimension=x,x=y.allocType(d.dtype,b.length),g(x,b),aa(d,x,n),k?d.persistentData=x:y.freeType(x)):e(b[0])?(d.dimension=b[0].length,d.dtype=p||a(b[0])||5126,b=l(b,[b.length,b[0].length],d.dtype),aa(d,b,n),k?d.persistentData=b:y.freeType(b)):h.raise("invalid buffer data")}else if(e(b))d.dtype=p||a(b),d.dimension=x,aa(d,b,n),k&&(d.persistentData=new Uint8Array(new Uint8Array(b.buffer)));
else if(c(b)){x=b.shape;var f=b.stride,V=b.offset,U=0,H=0,C=0,u=0;1===x.length?(U=x[0],H=1,C=f[0],u=0):2===x.length?(U=x[0],H=x[1],C=f[0],u=f[1]):h.raise("invalid shape");d.dtype=p||a(b.data)||5126;d.dimension=H;x=y.allocType(d.dtype,U*H);t(x,b.data,U,H,C,u,V);aa(d,x,n);k?d.persistentData=x:y.freeType(x)}else b instanceof ArrayBuffer?(d.dtype=5121,d.dimension=x,aa(d,b,n),k&&(d.persistentData=new Uint8Array(new Uint8Array(b)))):h.raise("invalid buffer data")}function n(a){C.bufferCount--;u(a);var d=
a.buffer;h(d,"buffer must not be deleted already");K.deleteBuffer(d);a.buffer=null;delete p[a.id]}var U=0,p={};J.prototype.bind=function(){K.bindBuffer(this.type,this.buffer)};J.prototype.destroy=function(){n(this)};var W=[];L.profile&&(C.getTotalBufferSize=function(){var a=0;x(p).forEach(function(d){a+=p[d].stats.size});return a});return{create:function(d,x,U,u){function D(a){var k=35044,d=null,g=0,n=0,x=1;Array.isArray(a)||e(a)||c(a)||a instanceof ArrayBuffer?d=a:"number"===typeof a?g=a|0:a&&(h.type(a,
"object","buffer arguments must be an object, a number or an array"),"data"in a&&(h(null===d||Array.isArray(d)||e(d)||c(d),"invalid data for buffer"),d=a.data),"usage"in a&&(h.parameter(a.usage,m,"invalid buffer usage"),k=m[a.usage]),"type"in a&&(h.parameter(a.type,q,"invalid buffer type"),n=q[a.type]),"dimension"in a&&(h.type(a.dimension,"number","invalid dimension"),x=a.dimension|0),"length"in a&&(h.nni(g,"buffer length must be a nonnegative integer"),g=a.length|0));V.bind();d?b(V,d,k,n,x,u):(g&&
K.bufferData(V.type,g,k),V.dtype=n||5121,V.usage=k,V.dimension=x,V.byteLength=g);L.profile&&(V.stats.size=V.byteLength*E[V.dtype]);return D}function k(a,k){h(k+a.byteLength<=V.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+k+" to a buffer of size "+V.byteLength);K.bufferSubData(V.type,k,a)}C.bufferCount++;var V=new J(x);p[V.id]=V;U||D(d);D._reglType="buffer";D._buffer=V;D.subdata=function(f,d){var b=(d||0)|0,n;V.bind();
if(e(f)||f instanceof ArrayBuffer)k(f,b);else if(Array.isArray(f)){if(0<f.length)if("number"===typeof f[0]){var x=y.allocType(V.dtype,f.length);g(x,f);k(x,b);y.freeType(x)}else Array.isArray(f[0])||e(f[0])?(n=F(f),x=l(f,n,V.dtype),k(x,b),y.freeType(x)):h.raise("invalid buffer data")}else if(c(f)){n=f.shape;var B=f.stride,p=x=0,z=0,S=0;1===n.length?(x=n[0],p=1,z=B[0],S=0):2===n.length?(x=n[0],p=n[1],z=B[0],S=B[1]):h.raise("invalid shape");n=Array.isArray(f.data)?V.dtype:a(f.data);n=y.allocType(n,x*
p);t(n,f.data,x,p,z,S,f.offset);k(n,b);y.freeType(n)}else h.raise("invalid data for buffer subdata");return D};L.profile&&(D.stats=V.stats);D.destroy=function(){n(V)};return D},createStream:function(a,d){var e=W.pop();e||(e=new J(a));e.bind();b(e,d,35040,0,1,!1);return e},destroyStream:function(a){W.push(a)},clear:function(){d(p).forEach(n);W.forEach(n)},getBuffer:function(a){return a&&a._buffer instanceof J?a._buffer:null},restore:function(){d(p).forEach(function(a){a.buffer=K.createBuffer();K.bindBuffer(a.type,
a.buffer);K.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:b}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(M,Z,ma){Z.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(M,Z,ma){Z.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(M,Z,ma){Z.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(M,Z,ma){Z.exports={"static":35044,dynamic:35048,stream:35040}},
{}],8:[function(M,Z,ma){function a(a){return Array.isArray(a)||K(a)||q(a)}function g(a){return a.sort(function(a,d){return"viewport"===a?-1:"viewport"===d?1:a<d?-1:1})}function t(a,d,e,b){this.thisDep=a;this.contextDep=d;this.propDep=e;this.append=b}function x(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function h(a){return new t(!1,!1,!1,a)}function e(a,d){var e=a.type;if(0===e)return e=a.data.length,new t(!0,1<=e,2<=e,d);if(4===e)return e=a.data,new t(e.thisDep,e.contextDep,e.propDep,d);
if(5===e)return new t(!1,!1,!1,d);if(6===e){for(var b=e=!1,c=!1,k=0;k<a.data.length;++k){var g=a.data[k];1===g.type?c=!0:2===g.type?b=!0:3===g.type?e=!0:0===g.type?(e=!0,g=g.data,1<=g&&(b=!0),2<=g&&(c=!0)):4===g.type&&(e=e||g.data.thisDep,b=b||g.data.contextDep,c=c||g.data.propDep)}return new t(e,b,c,d)}return new t(3===e,2===e,1===e,d)}var c=M("./util/sorted-object-keys"),d=M("./util/check"),y=M("./util/extend"),l=M("./util/codegen"),F=M("./util/loop"),K=M("./util/is-typed-array"),q=M("./util/is-ndarray"),
m=M("./util/is-array-like"),E=M("./dynamic"),ia=M("./constants/primitives.json"),C=M("./constants/dtypes.json"),L=["x","y","z","w"],u="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),J={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,
"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},aa="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),b={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,
"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},n={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},U={frag:35632,vert:35633},p={cw:2304,ccw:2305},W=new t(!1,!1,!1,function(){});Z.exports=function(B,z,q,G,D,k,V,f,K,H,la,ld,X,ea,T){function S(a){return a.replace(".","_")}function N(a,f,d){var k=S(a);ta.push(a);ca[k]=ka[k]=!!d;fb[k]=f}function r(a,f,d){var k=S(a);ta.push(a);Array.isArray(d)?
(ka[k]=d.slice(),ca[k]=d.slice()):ka[k]=ca[k]=d;Ga[k]=f}function P(){var a=l(),f=a.link,k=a.global;a.id=zd++;a.batchId="0";var e=f(gb),b=a.shared={props:"a0"};c(gb).forEach(function(a){b[a]=k.def(e,".",a)});d.optional(function(){a.CHECK=f(d);a.commandStr=d.guessCommand();a.command=f(a.commandStr);a.assert=function(a,k,d){a("if(!(",k,"))",this.CHECK,".commandRaise(",f(d),",",this.command,");")};fa.invalidBlendCombinations=aa});var g=a.next={},r=a.current={};c(Ga).forEach(function(a){Array.isArray(ka[a])&&
(g[a]=k.def(b.next,".",a),r[a]=k.def(b.current,".",a))});var A=a.constants={};c(fa).forEach(function(a){A[a]=k.def(JSON.stringify(fa[a]))});a.invoke=function(k,d){switch(d.type){case 0:var e=["this",b.context,b.props,a.batchId];return k.def(f(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return k.def(b.props,d.data);case 2:return k.def(b.context,d.data);case 3:return k.def("this",d.data);case 4:return d.data.append(a,k),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(d){return a.invoke(k,
d)})}};a.attribCache={};var v={};a.scopeAttrib=function(a){a=z.id(a);if(a in v)return v[a];var d=H.scope[a];d||(d=H.scope[a]=new va);return v[a]=f(d)};return a}function Q(a){var d=a["static"];a=a.dynamic;var k;if("profile"in d){var f=!!d.profile;k=h(function(a,d){return f});k.enable=f}else if("profile"in a){var b=a.profile;k=e(b,function(a,d){return a.invoke(d,b)})}return k}function qa(a,k){var b=a["static"],c=a.dynamic;if("framebuffer"in b){var g=b.framebuffer;return g?(g=f.getFramebuffer(g),d.command(g,
"invalid framebuffer object"),h(function(a,d){var k=a.link(g),f=a.shared;d.set(f.framebuffer,".next",k);f=f.context;d.set(f,".framebufferWidth",k+".width");d.set(f,".framebufferHeight",k+".height");return k})):h(function(a,d){var k=a.shared;d.set(k.framebuffer,".next","null");k=k.context;d.set(k,".framebufferWidth",k+".drawingBufferWidth");d.set(k,".framebufferHeight",k+".drawingBufferHeight");return"null"})}if("framebuffer"in c){var r=c.framebuffer;return e(r,function(a,k){var f=a.invoke(k,r),e=
a.shared,b=e.framebuffer,c=k.def(b,".getFramebuffer(",f,")");d.optional(function(){a.assert(k,"!"+f+"||"+c,"invalid framebuffer object")});k.set(b,".next",c);e=e.context;k.set(e,".framebufferWidth",c+"?"+c+".width:"+e+".drawingBufferWidth");k.set(e,".framebufferHeight",c+"?"+c+".height:"+e+".drawingBufferHeight");return c})}return null}function pa(a,k,f){function b(a){if(a in c){var r=c[a];d.commandType(r,"object","invalid "+a,f.commandStr);var v=!0,A=r.x|0,w=r.y|0,n,h;"width"in r?(n=r.width|0,d.command(0<=
n,"invalid "+a,f.commandStr)):v=!1;"height"in r?(h=r.height|0,d.command(0<=h,"invalid "+a,f.commandStr)):v=!1;return new t(!v&&k&&k.thisDep,!v&&k&&k.contextDep,!v&&k&&k.propDep,function(a,k){var d=a.shared.context,f=n;"width"in r||(f=k.def(d,".","framebufferWidth","-",A));var e=h;"height"in r||(e=k.def(d,".","framebufferHeight","-",w));return[A,w,f,e]})}if(a in g){var x=g[a],v=e(x,function(k,f){var e=k.invoke(f,x);d.optional(function(){k.assert(f,e+"&&typeof "+e+'==="object"',"invalid "+a)});var b=
k.shared.context,c=f.def(e,".x|0"),g=f.def(e,".y|0"),r=f.def('"width" in ',e,"?",e,".width|0:","(",b,".","framebufferWidth","-",c,")"),v=f.def('"height" in ',e,"?",e,".height|0:","(",b,".","framebufferHeight","-",g,")");d.optional(function(){k.assert(f,r+">=0&&"+v+">=0","invalid "+a)});return[c,g,r,v]});k&&(v.thisDep=v.thisDep||k.thisDep,v.contextDep=v.contextDep||k.contextDep,v.propDep=v.propDep||k.propDep);return v}return k?new t(k.thisDep,k.contextDep,k.propDep,function(a,k){var d=a.shared.context;
return[0,0,k.def(d,".","framebufferWidth"),k.def(d,".","framebufferHeight")]}):null}var c=a["static"],g=a.dynamic;if(a=b("viewport")){var r=a;a=new t(a.thisDep,a.contextDep,a.propDep,function(a,k){var d=r.append(a,k),f=a.shared.context;k.set(f,".viewportWidth",d[2]);k.set(f,".viewportHeight",d[3]);return d})}return{viewport:a,scissor_box:b("scissor.box")}}function A(a,k){var f=a["static"];if("string"===typeof f.frag&&"string"===typeof f.vert){if(0<c(k.dynamic).length)return null;var f=k["static"],
e=c(f);if(0<e.length&&"number"===typeof f[e[0]]){for(var b=[],g=0;g<e.length;++g)d("number"===typeof f[e[g]],"must specify all vertex attribute locations when using vaos"),b.push([f[e[g]]|0,e[g]]);return b}}return null}function I(a,k,f){function b(a){if(a in c){var k=z.id(c[a]);d.optional(function(){la.shader(U[a],k,d.guessCommand())});var f=h(function(){return k});f.id=k;return f}if(a in g){var r=g[a];return e(r,function(k,f){var e=k.invoke(f,r),b=f.def(k.shared.strings,".id(",e,")");d.optional(function(){f(k.shared.shader,
".shader(",U[a],",",b,",",k.command,");")});return b})}return null}var c=a["static"],g=a.dynamic,r=b("frag"),v=b("vert"),A=null;x(r)&&x(v)?(A=la.program(v.id,r.id,null,f),a=h(function(a,k){return a.link(A)})):a=new t(r&&r.thisDep||v&&v.thisDep,r&&r.contextDep||v&&v.contextDep,r&&r.propDep||v&&v.propDep,function(a,k){var f=a.shared.shader,e;e=r?r.append(a,k):k.def(f,".","frag");var b;b=v?v.append(a,k):k.def(f,".","vert");var c=f+".program("+b+","+e;d.optional(function(){c+=","+a.command});return k.def(c+
")")});return{frag:r,vert:v,progVar:a,program:A}}function ga(f,b){function r(a,k){if(a in g){var f=g[a]|0;k?A.offset=f:A.instances=f;d.command(!k||0<=f,"invalid "+a,b.commandStr);return h(function(a,d){k&&(a.OFFSET=f);return f})}if(a in v){var c=v[a];return e(c,function(f,e){var b=f.invoke(e,c);k&&(f.OFFSET=b,d.optional(function(){f.assert(e,b+">=0","invalid "+a)}));return b})}if(k){if(O)return h(function(a,k){return a.OFFSET=0});if(w)return new t(n.thisDep,n.contextDep,n.propDep,function(a,k){return k.def(a.shared.vao+
".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(w)return new t(n.thisDep,n.contextDep,n.propDep,function(a,k){return k.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var g=f["static"],v=f.dynamic,A={},w=!1,n=function(){if("vao"in g){var a=g.vao;null!==a&&null===H.getVAO(a)&&(a=H.createVAO(a));w=!0;A.vao=a;return h(function(k){var f=H.getVAO(a);return f?k.link(f):"null"})}if("vao"in v){w=!0;var k=v.vao;return e(k,function(a,f){var d=a.invoke(f,
k);return f.def(a.shared.vao+".getVAO("+d+")")})}return null}(),O=!1,p=function(){if("elements"in g){var f=g.elements;A.elements=f;if(a(f)){var c=A.elements=k.create(f,!0),f=k.getElements(c);O=!0}else f&&(f=k.getElements(f),O=!0,d.command(f,"invalid elements",b.commandStr));c=h(function(a,k){if(f){var d=a.link(f);return a.ELEMENTS=d}return a.ELEMENTS=null});c.value=f;return c}if("elements"in v){O=!0;var r=v.elements;return e(r,function(a,k){var f=a.shared,e=f.isBufferArgs,f=f.elements,b=a.invoke(k,
r),c=k.def("null"),e=k.def(e,"(",b,")"),g=a.cond(e).then(c,"=",f,".createStream(",b,");")["else"](c,"=",f,".getElements(",b,");");d.optional(function(){a.assert(g["else"],"!"+b+"||"+c,"invalid elements")});k.entry(g);k.exit(a.cond(e).then(f,".destroyStream(",c,");"));return a.ELEMENTS=c})}return w?new t(n.thisDep,n.contextDep,n.propDep,function(a,k){return k.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),da=r("offset",!0),z=function(){if("primitive"in
g){var a=g.primitive;A.primitive=a;d.commandParameter(a,ia,"invalid primitve",b.commandStr);return h(function(k,f){return ia[a]})}if("primitive"in v){var k=v.primitive;return e(k,function(a,f){var e=a.constants.primTypes,b=a.invoke(f,k);d.optional(function(){a.assert(f,b+" in "+e,"invalid primitive, must be one of "+c(ia))});return f.def(e,"[",b,"]")})}return O?x(p)?p.value?h(function(a,k){return k.def(a.ELEMENTS,".primType")}):h(function(){return 4}):new t(p.thisDep,p.contextDep,p.propDep,function(a,
k){var f=a.ELEMENTS;return k.def(f,"?",f,".primType:",4)}):w?new t(n.thisDep,n.contextDep,n.propDep,function(a,k){return k.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),Aa=function(){if("count"in g){var a=g.count|0;A.count=a;d.command("number"===typeof a&&0<=a,"invalid vertex count",b.commandStr);return h(function(){return a})}if("count"in v){var k=v.count;return e(k,function(a,f){var e=a.invoke(f,k);d.optional(function(){a.assert(f,"typeof "+e+'==="number"&&'+
e+">=0&&"+e+"===("+e+"|0)","invalid vertex count")});return e})}if(O){if(x(p)){if(p)return da?new t(da.thisDep,da.contextDep,da.propDep,function(a,k){var f=k.def(a.ELEMENTS,".vertCount-",a.OFFSET);d.optional(function(){a.assert(k,f+">=0","invalid vertex offset/element buffer too small")});return f}):h(function(a,k){return k.def(a.ELEMENTS,".vertCount")});var f=h(function(){return-1});d.optional(function(){f.MISSING=!0});return f}var c=new t(p.thisDep||da.thisDep,p.contextDep||da.contextDep,p.propDep||
da.propDep,function(a,k){var f=a.ELEMENTS;return a.OFFSET?k.def(f,"?",f,".vertCount-",a.OFFSET,":-1"):k.def(f,"?",f,".vertCount:-1")});d.optional(function(){c.DYNAMIC=!0});return c}return w?new t(n.thisDep,n.contextDep,n.propDep,function(a,k){return k.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),B=r("instances",!1);return{elements:p,primitive:z,count:Aa,instances:B,offset:da,vao:n,vaoActive:w,elementsActive:O,"static":A}}function R(a,k){var f=a["static"],g=a.dynamic,
r={};ta.forEach(function(a){function v(k,d){if(a in f){var b=k(f[a]);r[A]=h(function(){return b})}else if(a in g){var c=g[a];r[A]=e(c,function(a,k){return d(a,k,a.invoke(k,c))})}}var A=S(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return v(function(f){d.commandType(f,"boolean",a,k.commandStr);return f},function(k,f,e){d.optional(function(){k.assert(f,
"typeof "+e+'==="boolean"',"invalid flag "+a,k.commandStr)});return e});case "depth.func":return v(function(f){d.commandParameter(f,b,"invalid "+a,k.commandStr);return b[f]},function(k,f,e){var v=k.constants.compareFuncs;d.optional(function(){k.assert(f,e+" in "+v,"invalid "+a+", must be one of "+c(b))});return f.def(v,"[",e,"]")});case "depth.range":return v(function(a){d.command(m(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",k.commandStr);
return a},function(a,k,f){d.optional(function(){a.assert(k,a.shared.isArrayLike+"("+f+")&&"+f+".length===2&&typeof "+f+'[0]==="number"&&typeof '+f+'[1]==="number"&&'+f+"[0]<="+f+"[1]","depth range must be a 2d array")});var e=k.def("+",f,"[0]"),b=k.def("+",f,"[1]");return[e,b]});case "blend.func":return v(function(a){d.commandType(a,"object","blend.func",k.commandStr);var f="srcRGB"in a?a.srcRGB:a.src,e="srcAlpha"in a?a.srcAlpha:a.src,b="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;
d.commandParameter(f,J,A+".srcRGB",k.commandStr);d.commandParameter(e,J,A+".srcAlpha",k.commandStr);d.commandParameter(b,J,A+".dstRGB",k.commandStr);d.commandParameter(a,J,A+".dstAlpha",k.commandStr);d.command(-1===aa.indexOf(f+", "+b),"unallowed blending combination (srcRGB, dstRGB) = ("+f+", "+b+")",k.commandStr);return[J[f],J[b],J[e],J[a]]},function(k,f,e){function b(g,r){var A=f.def('"',g,r,'" in ',e,"?",e,".",g,r,":",e,".",g);d.optional(function(){k.assert(f,A+" in "+v,"invalid "+a+"."+g+r+", must be one of "+
c(J))});return A}var v=k.constants.blendFuncs;d.optional(function(){k.assert(f,e+"&&typeof "+e+'==="object"',"invalid blend func, must be an object")});var g=b("src","RGB"),r=b("dst","RGB");d.optional(function(){k.assert(f,k.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+r+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var A=f.def(v,"[",g,"]"),n=f.def(v,"[",b("src","Alpha"),"]"),w=f.def(v,"[",r,"]"),h=f.def(v,"[",b("dst","Alpha"),"]");return[A,w,n,h]});case "blend.equation":return v(function(f){if("string"===
typeof f)return d.commandParameter(f,Fa,"invalid "+a,k.commandStr),[Fa[f],Fa[f]];if("object"===typeof f)return d.commandParameter(f.rgb,Fa,a+".rgb",k.commandStr),d.commandParameter(f.alpha,Fa,a+".alpha",k.commandStr),[Fa[f.rgb],Fa[f.alpha]];d.commandRaise("invalid blend.equation",k.commandStr)},function(k,f,e){var b=k.constants.blendEquations,v=f.def(),g=f.def(),r=k.cond("typeof ",e,'==="string"');d.optional(function(){function f(a,e,d){k.assert(a,d+" in "+b,"invalid "+e+", must be one of "+c(Fa))}
f(r.then,a,e);k.assert(r["else"],e+"&&typeof "+e+'==="object"',"invalid "+a);f(r["else"],a+".rgb",e+".rgb");f(r["else"],a+".alpha",e+".alpha")});r.then(v,"=",g,"=",b,"[",e,"];");r["else"](v,"=",b,"[",e,".rgb];",g,"=",b,"[",e,".alpha];");f(r);return[v,g]});case "blend.color":return v(function(a){d.command(m(a)&&4===a.length,"blend.color must be a 4d array",k.commandStr);return F(4,function(k){return+a[k]})},function(a,k,f){d.optional(function(){a.assert(k,a.shared.isArrayLike+"("+f+")&&"+f+".length===4",
"blend.color must be a 4d array")});return F(4,function(a){return k.def("+",f,"[",a,"]")})});case "stencil.mask":return v(function(a){d.commandType(a,"number",A,k.commandStr);return a|0},function(a,k,f){d.optional(function(){a.assert(k,"typeof "+f+'==="number"',"invalid stencil.mask")});return k.def(f,"|0")});case "stencil.func":return v(function(f){d.commandType(f,"object",A,k.commandStr);var e=f.cmp||"keep",c=f.ref||0;f="mask"in f?f.mask:-1;d.commandParameter(e,b,a+".cmp",k.commandStr);d.commandType(c,
"number",a+".ref",k.commandStr);d.commandType(f,"number",a+".mask",k.commandStr);return[b[e],c,f]},function(a,k,f){var e=a.constants.compareFuncs;d.optional(function(){function d(){a.assert(k,Array.prototype.join.call(arguments,""),"invalid stencil.func")}d(f+"&&typeof ",f,'==="object"');d('!("cmp" in ',f,")||(",f,".cmp in ",e,")")});var b=k.def('"cmp" in ',f,"?",e,"[",f,".cmp]",":",7680),c=k.def(f,".ref|0"),v=k.def('"mask" in ',f,"?",f,".mask|0:-1");return[b,c,v]});case "stencil.opFront":case "stencil.opBack":return v(function(f){d.commandType(f,
"object",A,k.commandStr);var e=f.fail||"keep",b=f.zfail||"keep";f=f.zpass||"keep";d.commandParameter(e,n,a+".fail",k.commandStr);d.commandParameter(b,n,a+".zfail",k.commandStr);d.commandParameter(f,n,a+".zpass",k.commandStr);return["stencil.opBack"===a?1029:1028,n[e],n[b],n[f]]},function(k,f,e){function b(g){d.optional(function(){k.assert(f,'!("'+g+'" in '+e+")||("+e+"."+g+" in "+v+")","invalid "+a+"."+g+", must be one of "+c(n))});return f.def('"',g,'" in ',e,"?",v,"[",e,".",g,"]:",7680)}var v=k.constants.stencilOps;
d.optional(function(){k.assert(f,e+"&&typeof "+e+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,b("fail"),b("zfail"),b("zpass")]});case "polygonOffset.offset":return v(function(a){d.commandType(a,"object",A,k.commandStr);var f=a.factor|0;a=a.units|0;d.commandType(f,"number",A+".factor",k.commandStr);d.commandType(a,"number",A+".units",k.commandStr);return[f,a]},function(f,k,e){d.optional(function(){f.assert(k,e+"&&typeof "+e+'==="object"',"invalid "+a)});var b=k.def(e,".factor|0"),
c=k.def(e,".units|0");return[b,c]});case "cull.face":return v(function(a){var f=0;"front"===a?f=1028:"back"===a&&(f=1029);d.command(!!f,A,k.commandStr);return f},function(a,f,k){d.optional(function(){a.assert(f,k+'==="front"||'+k+'==="back"',"invalid cull.face")});return f.def(k,'==="front"?',1028,":",1029)});case "lineWidth":return v(function(a){d.command("number"===typeof a&&a>=G.lineWidthDims[0]&&a<=G.lineWidthDims[1],"invalid line width, must be a positive number between "+G.lineWidthDims[0]+
" and "+G.lineWidthDims[1],k.commandStr);return a},function(a,f,k){d.optional(function(){a.assert(f,"typeof "+k+'==="number"&&'+k+">="+G.lineWidthDims[0]+"&&"+k+"<="+G.lineWidthDims[1],"invalid line width")});return k});case "frontFace":return v(function(a){d.commandParameter(a,p,A,k.commandStr);return p[a]},function(a,f,k){d.optional(function(){a.assert(f,k+'==="cw"||'+k+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return f.def(k+'==="cw"?2304:2305')});case "colorMask":return v(function(a){d.command(m(a)&&
4===a.length,"color.mask must be length 4 array",k.commandStr);return a.map(function(a){return!!a})},function(a,f,k){d.optional(function(){a.assert(f,a.shared.isArrayLike+"("+k+")&&"+k+".length===4","invalid color.mask")});return F(4,function(a){return"!!"+k+"["+a+"]"})});case "sample.coverage":return v(function(a){d.command("object"===typeof a&&a,A,k.commandStr);var f="value"in a?a.value:1;a=!!a.invert;d.command("number"===typeof f&&0<=f&&1>=f,"sample.coverage.value must be a number between 0 and 1",
k.commandStr);return[f,a]},function(a,f,k){d.optional(function(){a.assert(f,k+"&&typeof "+k+'==="object"',"invalid sample.coverage")});var e=f.def('"value" in ',k,"?+",k,".value:1"),b=f.def("!!",k,".invert");return[e,b]})}});return r}function na(a,f){var k=a["static"],b=a.dynamic,v={};c(k).forEach(function(a){var e=k[a],b;if("number"===typeof e||"boolean"===typeof e)b=h(function(){return e});else if("function"===typeof e){var c=e._reglType;"texture2d"===c||"textureCube"===c?b=h(function(a){return a.link(e)}):
"framebuffer"===c||"framebufferCube"===c?(d.command(0<e.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',f.commandStr),b=h(function(a){return a.link(e.color[0])})):d.commandRaise('invalid data for uniform "'+a+'"',f.commandStr)}else m(e)?b=h(function(f){return f.global.def("[",F(e.length,function(k){d.command("number"===typeof e[k]||"boolean"===typeof e[k],"invalid uniform "+a,f.commandStr);return e[k]}),"]")}):d.commandRaise('invalid or missing data for uniform "'+
a+'"',f.commandStr);b.value=e;v[a]=b});c(b).forEach(function(a){var f=b[a];v[a]=e(f,function(a,k){return a.invoke(k,f)})});return v}function ra(f,k){var b=f["static"],v=f.dynamic,g={};c(b).forEach(function(f){var e=b[f],v=z.id(f),r=new va;if(a(e))r.state=1,r.buffer=D.getBuffer(D.create(e,34962,!1,!0)),r.type=0;else{var A=D.getBuffer(e);if(A)r.state=1,r.buffer=A,r.type=0;else if(d.command("object"===typeof e&&e,"invalid data for attribute "+f,k.commandStr),"constant"in e){var n=e.constant;r.buffer=
"null";r.state=2;"number"===typeof n?r.x=n:(d.command(m(n)&&0<n.length&&4>=n.length,"invalid constant for attribute "+f,k.commandStr),L.forEach(function(a,f){f<n.length&&(r[a]=n[f])}))}else{A=a(e.buffer)?D.getBuffer(D.create(e.buffer,34962,!1,!0)):D.getBuffer(e.buffer);d.command(!!A,'missing buffer for attribute "'+f+'"',k.commandStr);var w=e.offset|0;d.command(0<=w,'invalid offset for attribute "'+f+'"',k.commandStr);var x=e.stride|0;d.command(0<=x&&256>x,'invalid stride for attribute "'+f+'", must be integer betweeen [0, 255]',
k.commandStr);var O=e.size|0;d.command(!("size"in e)||0<O&&4>=O,'invalid size for attribute "'+f+'", must be 1,2,3,4',k.commandStr);var p=!!e.normalized,da=0;"type"in e&&(d.commandParameter(e.type,C,"invalid type for attribute "+f,k.commandStr),da=C[e.type]);var Aa=e.divisor|0;d.optional(function(){"divisor"in e&&(d.command(0===Aa||sa,'cannot specify divisor for attribute "'+f+'", instancing not supported',k.commandStr),d.command(0<=Aa,'invalid divisor for attribute "'+f+'"',k.commandStr));var a=
k.commandStr,b="buffer offset divisor normalized type size stride".split(" ");c(e).forEach(function(k){d.command(0<=b.indexOf(k),'unknown parameter "'+k+'" for attribute pointer "'+f+'" (valid parameters are '+b+")",a)})});r.buffer=A;r.state=1;r.size=O;r.normalized=p;r.type=da||A.dtype;r.offset=w;r.stride=x;r.divisor=Aa}}g[f]=h(function(a,f){var k=a.attribCache;if(v in k)return k[v];var e={isStream:!1};c(r).forEach(function(a){e[a]=r[a]});r.buffer&&(e.buffer=a.link(r.buffer),e.type=e.type||e.buffer+
".dtype");return k[v]=e})});c(v).forEach(function(a){var f=v[a];g[a]=e(f,function(k,e){function b(a){e(w[a],"=",v,".",a,"|0;")}var v=k.invoke(e,f),r=k.shared,g=k.constants,A=r.isBufferArgs,n=r.buffer;d.optional(function(){k.assert(e,v+"&&(typeof "+v+'==="object"||typeof '+v+'==="function")&&('+A+"("+v+")||"+n+".getBuffer("+v+")||"+n+".getBuffer("+v+".buffer)||"+A+"("+v+'.buffer)||("constant" in '+v+"&&(typeof "+v+'.constant==="number"||'+r.isArrayLike+"("+v+".constant))))",'invalid dynamic attribute "'+
a+'"')});var w={isStream:e.def(!1)},h=new va;h.state=1;c(h).forEach(function(a){w[a]=e.def(""+h[a])});var x=w.buffer,O=w.type;e("if(",A,"(",v,")){",w.isStream,"=true;",x,"=",n,".createStream(",34962,",",v,");",O,"=",x,".dtype;","}else{",x,"=",n,".getBuffer(",v,");","if(",x,"){",O,"=",x,".dtype;",'}else if("constant" in ',v,"){",w.state,"=",2,";","if(typeof "+v+'.constant === "number"){',w[L[0]],"=",v,".constant;",L.slice(1).map(function(a){return w[a]}).join("="),"=0;","}else{",L.map(function(a,f){return w[a]+
"="+v+".constant.length>"+f+"?"+v+".constant["+f+"]:0;"}).join(""),"}}else{","if(",A,"(",v,".buffer)){",x,"=",n,".createStream(",34962,",",v,".buffer);","}else{",x,"=",n,".getBuffer(",v,".buffer);","}",O,'="type" in ',v,"?",g.glTypes,"[",v,".type]:",x,".dtype;",w.normalized,"=!!",v,".normalized;");b("size");b("offset");b("stride");b("divisor");e("}}");e.exit("if(",w.isStream,"){",n,".destroyStream(",x,");","}");return w})});return g}function Ba(a){var f=a["static"],k=a.dynamic,d={};c(f).forEach(function(a){var k=
f[a];d[a]=h(function(a,f){return"number"===typeof k||"boolean"===typeof k?""+k:a.link(k)})});c(k).forEach(function(a){var f=k[a];d[a]=e(f,function(a,k){return a.invoke(k,f)})});return d}function ya(a,f,k,e,b){function v(a){var f=h[a];f&&(O[a]=f)}var r=a["static"],g=a.dynamic;d.optional(function(){function a(k){c(k).forEach(function(a){d.command(0<=f.indexOf(a),'unknown parameter "'+a+'"',b.commandStr)})}var f="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);
a(r);a(g)});var n=A(a,f),w=qa(a,b),h=pa(a,w,b),x=ga(a,b),O=R(a,b),p=I(a,b,n);v("viewport");v(S("scissor.box"));var da=0<c(O).length,w={framebuffer:w,draw:x,shader:p,state:O,dirty:da,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};w.profile=Q(a,b);w.uniforms=na(k,b);w.drawVAO=w.scopeVAO=x.vao;if(!w.drawVAO&&p.program&&!n&&q.angle_instanced_arrays&&x["static"].elements){var Aa=!0;a=p.program.attributes.map(function(a){a=f["static"][a];Aa=Aa&&!!a;return a});if(Aa&&0<a.length){var z=H.getVAO(H.createVAO({attributes:a,
elements:x["static"].elements}));w.drawVAO=new t(null,null,null,function(a,f){return a.link(z)});w.useVAO=!0}}n?w.useVAO=!0:w.attributes=ra(f,b);w.context=Ba(e,b);return w}function ha(a,f,k){var e=a.shared.context,d=a.scope();c(k).forEach(function(b){f.save(e,"."+b);var v=k[b].append(a,f);Array.isArray(v)?d(e,".",b,"=[",v.join(),"];"):d(e,".",b,"=",v,";")});f(d)}function Ca(a,f,k,e){var d=a.shared,b=d.gl,v=d.framebuffer,c;xa&&(c=f.def(d.extensions,".webgl_draw_buffers"));var r=a.constants,d=r.drawBuffer,
r=r.backBuffer;a=k?k.append(a,f):f.def(v,".next");e||f("if(",a,"!==",v,".cur){");f("if(",a,"){",b,".bindFramebuffer(",36160,",",a,".framebuffer);");xa&&f(c,".drawBuffersWEBGL(",d,"[",a,".colorAttachments.length]);");f("}else{",b,".bindFramebuffer(",36160,",null);");xa&&f(c,".drawBuffersWEBGL(",r,");");f("}",v,".cur=",a,";");e||f("}")}function ja(a,f,k){var e=a.shared,d=e.gl,b=a.current,v=a.next,r=e.current,g=e.next,A=a.cond(r,".dirty");ta.forEach(function(f){f=S(f);if(!(f in k.state)){var e,c;if(f in
v){e=v[f];c=b[f];var w=F(ka[f].length,function(a){return A.def(e,"[",a,"]")});A(a.cond(w.map(function(a,f){return a+"!=="+c+"["+f+"]"}).join("||")).then(d,".",Ga[f],"(",w,");",w.map(function(a,f){return c+"["+f+"]="+a}).join(";"),";"))}else e=A.def(g,".",f),w=a.cond(e,"!==",r,".",f),A(w),f in fb?w(a.cond(e).then(d,".enable(",fb[f],");")["else"](d,".disable(",fb[f],");"),r,".",f,"=",e,";"):w(d,".",Ga[f],"(",e,");",r,".",f,"=",e,";")}});0===c(k.state).length&&A(r,".dirty=false;");f(A)}function oa(a,
f,k,e){var d=a.shared,b=a.current,v=d.current,r=d.gl;g(c(k)).forEach(function(d){var c=k[d];if(!e||e(c)){var g=c.append(a,f);if(fb[d]){var A=fb[d];x(c)?g?f(r,".enable(",A,");"):f(r,".disable(",A,");"):f(a.cond(g).then(r,".enable(",A,");")["else"](r,".disable(",A,");"));f(v,".",d,"=",g,";")}else if(m(g)){var w=b[d];f(r,".",Ga[d],"(",g,");",g.map(function(a,f){return w+"["+f+"]="+a}).join(";"),";")}else f(r,".",Ga[d],"(",g,");",v,".",d,"=",g,";")}})}function za(a,f){sa&&(a.instancing=f.def(a.shared.extensions,
".angle_instanced_arrays"))}function Ma(a,f,k,e,d){function b(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function v(a){h=f.def();a(h,"=",b(),";");"string"===typeof d?a(A,".count+=",d,";"):a(A,".count++;");ea&&(e?(O=f.def(),a(O,"=",n,".getNumPendingQueries();")):a(n,".beginQuery(",A,");"))}function c(a){a(A,".cpuTime+=",b(),"-",h,";");ea&&(e?a(n,".pushScopeStats(",O,",",n,".getNumPendingQueries(),",A,");"):a(n,".endQuery();"))}function r(a){var k=f.def(w,".profile");
f(w,".profile=",a,";");f.exit(w,".profile=",k,";")}var g=a.shared,A=a.stats,w=g.current,n=g.timer;k=k.profile;var h,O;if(k){if(x(k)){k.enable?(v(f),c(f.exit),r("true")):r("false");return}k=k.append(a,f);r(k)}else k=f.def(w,".profile");g=a.block();v(g);f("if(",k,"){",g,"}");a=a.block();c(a);f.exit("if(",k,"){",a,"}")}function Aa(a,f,k,e,b){function v(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function r(k,e,d){function b(){f("if(!",w,".buffer){",c,".enableVertexAttribArray(",A,");}");var k=d.type,v;v=d.size?f.def(d.size,"||",e):e;f("if(",w,".type!==",k,"||",w,".size!==",v,"||",x.map(function(a){return w+"."+a+"!=="+d[a]}).join("||"),"){",c,".bindBuffer(",34962,",",n,".buffer);",c,".vertexAttribPointer(",[A,v,k,d.normalized,d.stride,d.offset],");",w,".type=",k,";",w,".size=",v,";",x.map(function(a){return w+"."+a+"="+d[a]+";"}).join(""),"}");sa&&(k=d.divisor,f("if(",w,".divisor!==",k,"){",
a.instancing,".vertexAttribDivisorANGLE(",[A,k],");",w,".divisor=",k,";}"))}function v(){f("if(",w,".buffer){",c,".disableVertexAttribArray(",A,");",w,".buffer=null;","}if(",L.map(function(a,f){return w+"."+a+"!=="+h[f]}).join("||"),"){",c,".vertexAttrib4f(",A,",",h,");",L.map(function(a,f){return w+"."+a+"="+h[f]+";"}).join(""),"}")}var c=g.gl,A=f.def(k,".location"),w=f.def(g.attributes,"[",A,"]");k=d.state;var n=d.buffer,h=[d.x,d.y,d.z,d.w],x=["buffer","normalized","offset","stride"];1===k?b():
2===k?v():(f("if(",k,"===",1,"){"),b(),f("}else{"),v(),f("}"))}var g=a.shared;e.forEach(function(e){var g=e.name,A=k.attributes[g],w;if(A){if(!b(A))return;w=A.append(a,f)}else{if(!b(W))return;var n=a.scopeAttrib(g);d.optional(function(){a.assert(f,n+".state","missing attribute "+g)});w={};c(new va).forEach(function(a){w[a]=f.def(n,".",a)})}r(a.link(e),v(e.info.type),w)})}function Bb(a,f,k,e,b,v){for(var c=a.shared,r=c.gl,g,A=0;A<e.length;++A){var w=e[A],n=w.name,h=w.info.type,O=k.uniforms[n],w=a.link(w)+
".location",p;if(O){if(!b(O))continue;if(x(O)){var da=O.value;d.command(null!==da&&"undefined"!==typeof da,'missing uniform "'+n+'"',a.commandStr);if(35678===h||35680===h)d.command("function"===typeof da&&(35678===h&&("texture2d"===da._reglType||"framebuffer"===da._reglType)||35680===h&&("textureCube"===da._reglType||"framebufferCube"===da._reglType)),"invalid texture for uniform "+n,a.commandStr),O=a.link(da._texture||da.color[0]._texture),f(r,".uniform1i(",w,",",O+".bind());"),f.exit(O,".unbind();");
else if(35674===h||35675===h||35676===h){d.optional(function(){d.command(m(da),"invalid matrix for uniform "+n,a.commandStr);d.command(35674===h&&4===da.length||35675===h&&9===da.length||35676===h&&16===da.length,"invalid length for matrix uniform "+n,a.commandStr)});var O=a.global.def("new Float32Array(["+Array.prototype.slice.call(da)+"])"),Aa=2;35675===h?Aa=3:35676===h&&(Aa=4);f(r,".uniformMatrix",Aa,"fv(",w,",false,",O,");")}else{switch(h){case 5126:d.commandType(da,"number","uniform "+n,a.commandStr);
g="1f";break;case 35664:d.command(m(da)&&2===da.length,"uniform "+n,a.commandStr);g="2f";break;case 35665:d.command(m(da)&&3===da.length,"uniform "+n,a.commandStr);g="3f";break;case 35666:d.command(m(da)&&4===da.length,"uniform "+n,a.commandStr);g="4f";break;case 35670:d.commandType(da,"boolean","uniform "+n,a.commandStr);g="1i";break;case 5124:d.commandType(da,"number","uniform "+n,a.commandStr);g="1i";break;case 35671:d.command(m(da)&&2===da.length,"uniform "+n,a.commandStr);g="2i";break;case 35667:d.command(m(da)&&
2===da.length,"uniform "+n,a.commandStr);g="2i";break;case 35672:d.command(m(da)&&3===da.length,"uniform "+n,a.commandStr);g="3i";break;case 35668:d.command(m(da)&&3===da.length,"uniform "+n,a.commandStr);g="3i";break;case 35673:d.command(m(da)&&4===da.length,"uniform "+n,a.commandStr);g="4i";break;case 35669:d.command(m(da)&&4===da.length,"uniform "+n,a.commandStr),g="4i"}f(r,".uniform",g,"(",w,",",m(da)?Array.prototype.slice.call(da):da,");")}continue}else p=O.append(a,f)}else{if(!b(W))continue;
p=f.def(c.uniforms,"[",z.id(n),"]")}35678===h?(d(!Array.isArray(p),"must specify a scalar prop for textures"),f("if(",p,"&&",p,'._reglType==="framebuffer"){',p,"=",p,".color[0];","}")):35680===h&&(d(!Array.isArray(p),"must specify a scalar prop for cube maps"),f("if(",p,"&&",p,'._reglType==="framebufferCube"){',p,"=",p,".color[0];","}"));d.optional(function(){function k(e,d){a.assert(f,e,'bad data or missing for uniform "'+n+'".  '+d)}function e(a){d(!Array.isArray(p),"must not specify an array type for uniform");
k("typeof "+p+'==="'+a+'"',"invalid type, expected "+a)}function b(f,e){Array.isArray(p)?d(p.length===f,"must have length "+f):k(c.isArrayLike+"("+p+")&&"+p+".length==="+f,"invalid vector, should have length "+f,a.commandStr)}function v(f){d(!Array.isArray(p),"must not specify a value type");k("typeof "+p+'==="function"&&'+p+'._reglType==="texture'+(3553===f?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(h){case 5124:e("number");break;case 35667:b(2,"number");break;case 35668:b(3,"number");
break;case 35669:b(4,"number");break;case 5126:e("number");break;case 35664:b(2,"number");break;case 35665:b(3,"number");break;case 35666:b(4,"number");break;case 35670:e("boolean");break;case 35671:b(2,"boolean");break;case 35672:b(3,"boolean");break;case 35673:b(4,"boolean");break;case 35674:b(4,"number");break;case 35675:b(9,"number");break;case 35676:b(16,"number");break;case 35678:v(3553);break;case 35680:v(34067)}});O=1;switch(h){case 35678:case 35680:O=f.def(p,"._texture");f(r,".uniform1i(",
w,",",O,".bind());");f.exit(O,".unbind();");continue;case 5124:case 35670:g="1i";break;case 35667:case 35671:g="2i";O=2;break;case 35668:case 35672:g="3i";O=3;break;case 35669:case 35673:g="4i";O=4;break;case 5126:g="1f";break;case 35664:g="2f";O=2;break;case 35665:g="3f";O=3;break;case 35666:g="4f";O=4;break;case 35674:g="Matrix2fv";break;case 35675:g="Matrix3fv";break;case 35676:g="Matrix4fv"}if("M"===g.charAt(0)){f(r,".uniform",g,"(",w,",");var w=Math.pow(h-35674+2,2),B=a.global.def("new Float32Array(",
w,")");Array.isArray(p)?f("false,(",F(w,function(a){return B+"["+a+"]="+p[a]}),",",B,")"):f("false,(Array.isArray(",p,")||",p," instanceof Float32Array)?",p,":(",F(w,function(a){return B+"["+a+"]="+p+"["+a+"]"}),",",B,")");f(");")}else{if(1<O){for(var Aa=[],V=[],S=0;S<O;++S)Array.isArray(p)?V.push(p[S]):V.push(f.def(p+"["+S+"]")),v&&Aa.push(f.def());v&&f("if(!",a.batchId,"||",Aa.map(function(a,f){return a+"!=="+V[f]}).join("||"),"){",Aa.map(function(a,f){return a+"="+V[f]+";"}).join(""));f(r,".uniform",
g,"(",w,",",V.join(","),");")}else d(!Array.isArray(p),"uniform value must not be an array"),v&&(O=f.def(),f("if(!",a.batchId,"||",O,"!==",p,"){",O,"=",p,";")),f(r,".uniform",g,"(",w,",",p,");");v&&f("}")}}}function Xa(a,f,k,e){function b(d){var v=A[d];return v?v.contextDep&&e.contextDynamic||v.propDep?v.append(a,k):v.append(a,f):f.def(w,".",d)}function v(){function a(){k(Aa,".drawElementsInstancedANGLE(",[h,p,z,O+"<<(("+z+"-5121)>>1)",da],");")}function f(){k(Aa,".drawArraysInstancedANGLE(",[h,O,
p,da],");")}n&&"null"!==n?B?a():(k("if(",n,"){"),a(),k("}else{"),f(),k("}")):f()}function c(){function a(){k(r+".drawElements("+[h,p,z,O+"<<(("+z+"-5121)>>1)"]+");")}function f(){k(r+".drawArrays("+[h,O,p]+");")}n&&"null"!==n?B?a():(k("if(",n,"){"),a(),k("}else{"),f(),k("}")):f()}var g=a.shared,r=g.gl,w=g.draw,A=e.draw,n=function(){var d=A.elements,b=f;if(d){if(d.contextDep&&e.contextDynamic||d.propDep)b=k;d=d.append(a,b);A.elementsActive&&b("if("+d+")"+r+".bindBuffer(34963,"+d+".buffer.buffer);")}else d=
b.def(),b(d,"=",w,".","elements",";","if(",d,"){",r,".bindBuffer(",34963,",",d,".buffer.buffer);}","else if(",g.vao,".currentVAO){",d,"=",a.shared.elements+".getElements("+g.vao,".currentVAO.elements);",wa?"":"if("+d+")"+r+".bindBuffer(34963,"+d+".buffer.buffer);","}");return d}(),h=b("primitive"),O=b("offset"),p=function(){var b=A.count,v,g=f;if(b){if(b.contextDep&&e.contextDynamic||b.propDep)g=k;v=b.append(a,g);d.optional(function(){b.MISSING&&a.assert(f,"false","missing vertex count");b.DYNAMIC&&
a.assert(g,v+">=0","missing vertex count")})}else v=g.def(w,".","count"),d.optional(function(){a.assert(g,v+">=0","missing vertex count")});return v}();if("number"===typeof p){if(0===p)return}else k("if(",p,"){"),k.exit("}");var da,Aa;sa&&(da=b("instances"),Aa=a.instancing);var z=n+".type",B=A.elements&&x(A.elements)&&!A.vaoActive;sa&&("number"!==typeof da||0<=da)?"string"===typeof da?(k("if(",da,">0){"),v(),k("}else if(",da,"<0){"),c(),k("}")):v():c()}function v(a,f,k,e,b){var v=P();b=v.proc("body",
b);d.optional(function(){v.commandStr=f.commandStr;v.command=v.link(f.commandStr)});sa&&(v.instancing=b.def(v.shared.extensions,".angle_instanced_arrays"));a(v,b,k,e);return v.compile().body}function w(a,f,k,e){za(a,f);k.useVAO?k.drawVAO?f(a.shared.vao,".setVAO(",k.drawVAO.append(a,f),");"):f(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(f(a.shared.vao,".setVAO(null);"),Aa(a,f,k,e.attributes,function(){return!0}));Bb(a,f,k,e.uniforms,function(){return!0},!1);Xa(a,f,f,k)}function da(a,f){var k=
a.proc("draw",1);za(a,k);ha(a,k,f.context);Ca(a,k,f.framebuffer);ja(a,k,f);oa(a,k,f.state);Ma(a,k,f,!1,!0);var e=f.shader.progVar.append(a,k);k(a.shared.gl,".useProgram(",e,".program);");if(f.shader.program)w(a,k,f,f.shader.program);else{k(a.shared.vao,".setVAO(null);");var d=a.global.def("{}"),b=k.def(e,".id"),g=k.def(d,"[",b,"]");k(a.cond(g).then(g,".call(this,a0);")["else"](g,"=",d,"[",b,"]=",a.link(function(k){return v(w,a,f,k,1)}),"(",e,");",g,".call(this,a0);"))}0<c(f.state).length&&k(a.shared.current,
".dirty=true;");a.shared.vao&&k(a.shared.vao,".setVAO(null);")}function ua(a,f,k,e){function d(){return!0}a.batchId="a1";za(a,f);Aa(a,f,k,e.attributes,d);Bb(a,f,k,e.uniforms,d,!1);Xa(a,f,f,k)}function Da(a,f,k,e){function d(a){return a.contextDep&&g||a.propDep}function b(a){return!d(a)}za(a,f);var g=k.contextDep,c=f.def(),r=f.def();a.shared.props=r;a.batchId=c;var A=a.scope(),w=a.scope();f(A.entry,"for(",c,"=0;",c,"<","a1",";++",c,"){",r,"=","a0","[",c,"];",w,"}",A.exit);k.needsContext&&ha(a,w,k.context);
k.needsFramebuffer&&Ca(a,w,k.framebuffer);oa(a,w,k.state,d);k.profile&&d(k.profile)&&Ma(a,w,k,!1,!0);e?(k.useVAO?k.drawVAO?d(k.drawVAO)?w(a.shared.vao,".setVAO(",k.drawVAO.append(a,w),");"):A(a.shared.vao,".setVAO(",k.drawVAO.append(a,A),");"):A(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(A(a.shared.vao,".setVAO(null);"),Aa(a,A,k,e.attributes,b),Aa(a,w,k,e.attributes,d)),Bb(a,A,k,e.uniforms,b,!1),Bb(a,w,k,e.uniforms,d,!0),Xa(a,A,w,k)):(f=a.global.def("{}"),e=k.shader.progVar.append(a,w),
r=w.def(e,".id"),A=w.def(f,"[",r,"]"),w(a.shared.gl,".useProgram(",e,".program);","if(!",A,"){",A,"=",f,"[",r,"]=",a.link(function(f){return v(ua,a,k,f,2)}),"(",e,");}",A,".call(this,a0[",c,"],",c,");"))}function lb(a,f){function k(a){return a.contextDep&&d||a.propDep}var e=a.proc("batch",2);a.batchId="0";za(a,e);var d=!1,b=!0;c(f.context).forEach(function(a){d=d||f.context[a].propDep});d||(ha(a,e,f.context),b=!1);var g=f.framebuffer,r=!1;g?(g.propDep?d=r=!0:g.contextDep&&d&&(r=!0),r||Ca(a,e,g)):
Ca(a,e,null);f.state.viewport&&f.state.viewport.propDep&&(d=!0);ja(a,e,f);oa(a,e,f.state,function(a){return!k(a)});f.profile&&k(f.profile)||Ma(a,e,f,!1,"a1");f.contextDep=d;f.needsContext=b;f.needsFramebuffer=r;b=f.shader.progVar;if(b.contextDep&&d||b.propDep)Da(a,e,f,null);else if(b=b.append(a,e),e(a.shared.gl,".useProgram(",b,".program);"),f.shader.program)Da(a,e,f,f.shader.program);else{e(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),r=e.def(b,".id"),w=e.def(g,"[",r,"]");e(a.cond(w).then(w,
".call(this,a0,a1);")["else"](w,"=",g,"[",r,"]=",a.link(function(k){return v(Da,a,f,k,2)}),"(",b,");",w,".call(this,a0,a1);"))}0<c(f.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function Ib(a,f){function k(b){var v=f.shader[b];v&&e.set(d.shader,"."+b,v.append(a,e))}var e=a.proc("scope",3);a.batchId="a2";var d=a.shared,b=d.current;ha(a,e,f.context);f.framebuffer&&f.framebuffer.append(a,e);g(c(f.state)).forEach(function(k){var b=f.state[k].append(a,
e);m(b)?b.forEach(function(f,d){e.set(a.next[k],"["+d+"]",f)}):e.set(d.next,"."+k,b)});Ma(a,e,f,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(k){var b=f.draw[k];b&&e.set(d.draw,"."+k,""+b.append(a,e))});c(f.uniforms).forEach(function(k){var b=f.uniforms[k].append(a,e);Array.isArray(b)&&(b="["+b.join()+"]");e.set(d.uniforms,"["+z.id(k)+"]",b)});c(f.attributes).forEach(function(k){var d=f.attributes[k].append(a,e),b=a.scopeAttrib(k);c(new va).forEach(function(a){e.set(b,
"."+a,d[a])})});f.scopeVAO&&e.set(d.vao,".targetVAO",f.scopeVAO.append(a,e));k("vert");k("frag");0<c(f.state).length&&(e(b,".dirty=true;"),e.exit(b,".dirty=true;"));e("a1(",a.shared.context,",a0,",a.batchId,");")}function ba(a){if("object"===typeof a&&!m(a)){for(var f=c(a),k=0;k<f.length;++k)if(E.isDynamic(a[f[k]]))return!0;return!1}}function O(a,f,k){function d(a,f){g.forEach(function(k){var e=b[k];E.isDynamic(e)&&(e=a.invoke(f,e),f(n,".",k,"=",e,";"))})}var b=f["static"][k];if(b&&ba(b)){var v=a.global,
g=c(b),r=!1,w=!1,A=!1,n=a.global.def("{}");g.forEach(function(f){var k=b[f];if(E.isDynamic(k))"function"===typeof k&&(k=b[f]=E.unbox(k)),f=e(k,null),r=r||f.thisDep,A=A||f.propDep,w=w||f.contextDep;else{v(n,".",f,"=");switch(typeof k){case "number":v(k);break;case "string":v('"',k,'"');break;case "object":Array.isArray(k)&&v("[",k.join(),"]");break;default:v(a.link(k))}v(";")}});f.dynamic[k]=new E.DynamicVariable(4,{thisDep:r,contextDep:w,propDep:A,ref:n,append:d});delete f["static"][k]}}var va=H.Record,
Fa={add:32774,subtract:32778,"reverse subtract":32779};q.ext_blend_minmax&&(Fa.min=32775,Fa.max=32776);var sa=q.angle_instanced_arrays,xa=q.webgl_draw_buffers,wa=q.oes_vertex_array_object,ka={dirty:!0,profile:T.profile},ca={},ta=[],fb={},Ga={};N("dither",3024);N("blend.enable",3042);r("blend.color","blendColor",[0,0,0,0]);r("blend.equation","blendEquationSeparate",[32774,32774]);r("blend.func","blendFuncSeparate",[1,0,1,0]);N("depth.enable",2929,!0);r("depth.func","depthFunc",513);r("depth.range",
"depthRange",[0,1]);r("depth.mask","depthMask",!0);r("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);r("cull.face","cullFace",1029);r("frontFace","frontFace",2305);r("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);r("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);r("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);r("stencil.mask","stencilMask",-1);r("stencil.func","stencilFunc",[519,0,-1]);r("stencil.opFront",
"stencilOpSeparate",[1028,7680,7680,7680]);r("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);r("scissor.box","scissor",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);r("viewport","viewport",[0,0,B.drawingBufferWidth,B.drawingBufferHeight]);var gb={gl:B,context:X,strings:z,next:ca,current:ka,draw:ld,elements:k,buffer:D,shader:la,attributes:H.state,vao:H,uniforms:K,framebuffer:f,extensions:q,timer:ea,isBufferArgs:a},fa={primTypes:ia,compareFuncs:b,blendFuncs:J,
blendEquations:Fa,stencilOps:n,glTypes:C,orientationType:p};d.optional(function(){gb.isArrayLike=m});xa&&(fa.backBuffer=[1029],fa.drawBuffer=F(G.maxDrawbuffers,function(a){return 0===a?[0]:F(a,function(a){return 36064+a})}));var zd=0;return{next:ca,current:ka,procs:function(){var a=P(),f=a.proc("poll"),k=a.proc("refresh"),e=a.block();f(e);k(e);var d=a.shared,b=d.gl,v=d.next,g=d.current;e(g,".dirty=false;");Ca(a,f);Ca(a,k,null,!0);var r;sa&&(r=a.link(sa));q.oes_vertex_array_object&&k(a.link(q.oes_vertex_array_object),
".bindVertexArrayOES(null);");for(var w=0;w<G.maxAttributes;++w){var A=k.def(d.attributes,"[",w,"]"),n=a.cond(A,".buffer");n.then(b,".enableVertexAttribArray(",w,");",b,".bindBuffer(",34962,",",A,".buffer.buffer);",b,".vertexAttribPointer(",w,",",A,".size,",A,".type,",A,".normalized,",A,".stride,",A,".offset);")["else"](b,".disableVertexAttribArray(",w,");",b,".vertexAttrib4f(",w,",",A,".x,",A,".y,",A,".z,",A,".w);",A,".buffer=null;");k(n);sa&&k(r,".vertexAttribDivisorANGLE(",w,",",A,".divisor);")}k(a.shared.vao,
".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");c(fb).forEach(function(d){var r=fb[d],c=e.def(v,".",d),w=a.block();w("if(",c,"){",b,".enable(",r,")}else{",b,".disable(",r,")}",g,".",d,"=",c,";");k(w);f("if(",c,"!==",g,".",d,"){",w,"}")});c(Ga).forEach(function(d){var r=Ga[d],c=ka[d],w,A,n=a.block();n(b,".",r,"(");m(c)?(r=c.length,w=a.global.def(v,".",d),A=a.global.def(g,".",d),n(F(r,function(a){return w+"["+a+"]"}),");",F(r,function(a){return A+"["+a+"]="+w+"["+a+"];"}).join("")),
f("if(",F(r,function(a){return w+"["+a+"]!=="+A+"["+a+"]"}).join("||"),"){",n,"}")):(w=e.def(v,".",d),A=e.def(g,".",d),n(w,");",g,".",d,"=",w,";"),f("if(",w,"!==",A,"){",n,"}"));k(n)});return a.compile()}(),compile:function(a,f,k,e,d){var b=P();b.stats=b.link(d);c(f["static"]).forEach(function(a){O(b,f,a)});u.forEach(function(f){O(b,a,f)});var v=ya(a,f,k,e,b);da(b,v);Ib(b,v);lb(b,v);return y(b.compile(),{destroy:function(){v.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(M,Z,ma){function a(a,d){this.id=e++;this.type=a;this.data=d}function g(a){if(0===a.length)return[];var e=a.charAt(0),h=a.charAt(a.length-1);if(1<a.length&&e===h&&('"'===e||"'"===e))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return g(a.substr(0,
e.index)).concat(g(e[1])).concat(g(a.substr(e.index+e[0].length)));e=a.split(".");if(1===e.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(h=0;h<e.length;++h)a=a.concat(g(e[h]));return a}function t(a){return"["+g(a).join("][")+"]"}function x(e,d){if("function"===typeof e)return new a(0,e);if("number"===typeof e||"boolean"===typeof e)return new a(5,e);if(Array.isArray(e))return new a(6,e.map(function(a,e){return x(a,d+"["+e+"]")}));if(e instanceof a)return e;h(!1,"invalid option type in uniform "+
d)}var h=M("./util/check"),e=0;Z.exports={DynamicVariable:a,define:function(e,d){return new a(e,t(d+""))},isDynamic:function(e){return"function"===typeof e&&!e._reglType||e instanceof a},unbox:x,accessor:t}},{"./util/check":21}],10:[function(M,Z,ma){var a=M("./util/check"),g=M("./util/is-typed-array"),t=M("./util/is-ndarray"),x=M("./util/values"),h=M("./constants/primitives.json"),e=M("./constants/usage.json");Z.exports=function(c,d,y,l){function F(a){this.id=E++;m[this.id]=this;this.buffer=a;this.primType=
4;this.type=this.vertCount=0}function K(e,h,x,C,b,n,U){e.buffer.bind();var p;h?((p=U)||g(h)&&(!t(h)||g(h.data))||(p=d.oes_element_index_uint?5125:5123),y._initBuffer(e.buffer,h,x,p,3)):(c.bufferData(34963,n,x),e.buffer.dtype=p||5121,e.buffer.usage=x,e.buffer.dimension=3,e.buffer.byteLength=n);p=U;if(!U){switch(e.buffer.dtype){case 5121:case 5120:p=5121;break;case 5123:case 5122:p=5123;break;case 5125:case 5124:p=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=p}e.type=
p;a(5125!==p||!!d.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");h=b;0>h&&(h=e.buffer.byteLength,5123===p?h>>=1:5125===p&&(h>>=2));e.vertCount=h;h=C;0>C&&(h=4,C=e.buffer.dimension,1===C&&(h=0),2===C&&(h=1),3===C&&(h=4));e.primType=h}function q(e){l.elementsCount--;a(null!==e.buffer,"must not double destroy elements");delete m[e.id];e.buffer.destroy();e.buffer=null}var m={},E=0,ia={uint8:5121,uint16:5123};d.oes_element_index_uint&&(ia.uint32=5125);
F.prototype.bind=function(){this.buffer.bind()};var C=[];return{create:function(d,c){function x(d){if(d)if("number"===typeof d)C(d),b.primType=4,b.vertCount=d|0,b.type=5121;else{var c=null,p=35044,q=-1,B=-1,z=0,u=0;if(Array.isArray(d)||g(d)||t(d))c=d;else if(a.type(d,"object","invalid arguments for elements"),"data"in d&&(c=d.data,a(Array.isArray(c)||g(c)||t(c),"invalid data for element buffer")),"usage"in d&&(a.parameter(d.usage,e,"invalid element buffer usage"),p=e[d.usage]),"primitive"in d&&(a.parameter(d.primitive,
h,"invalid element buffer primitive"),q=h[d.primitive]),"count"in d&&(a("number"===typeof d.count&&0<=d.count,"invalid vertex count for elements"),B=d.count|0),"type"in d&&(a.parameter(d.type,ia,"invalid buffer type"),u=ia[d.type]),"length"in d)z=d.length|0;else if(z=B,5123===u||5122===u)z*=2;else if(5125===u||5124===u)z*=4;K(b,c,p,q,B,z,u)}else C(),b.primType=4,b.vertCount=0,b.type=5121;return x}var C=y.create(null,34963,!0),b=new F(C._buffer);l.elementsCount++;x(d);x._reglType="elements";x._elements=
b;x.subdata=function(a,e){C.subdata(a,e);return x};x.destroy=function(){q(b)};return x},createStream:function(a){var e=C.pop();e||(e=new F(y.create(null,34963,!0,!1)._buffer));K(e,a,35040,-1,-1,0,0);return e},destroyStream:function(a){C.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof F?a._elements:null},clear:function(){x(m).forEach(q)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,
"./util/values":36}],11:[function(M,Z,ma){var a=M("./util/sorted-object-keys"),g=M("./util/check");Z.exports=function(t,x){function h(a){g.type(a,"string","extension name must be string");a=a.toLowerCase();var d;try{d=e[a]=t.getExtension(a)}catch(c){}return!!d}for(var e={},c=0;c<x.extensions.length;++c){var d=x.extensions[c];if(!h(d))return x.onDestroy(),x.onDone('"'+d+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}x.optionalExtensions.forEach(h);
return{extensions:e,restore:function(){a(e).forEach(function(a){if(e[a]&&!h(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(M,Z,ma){var a=M("./util/check"),g=M("./util/values"),t=M("./util/extend"),x=[6407,6408],h=[];h[6408]=4;h[6407]=3;var e=[];e[5121]=1;e[5126]=4;e[36193]=2;var c=[32854,32855,36194,35907,34842,34843,34836],d={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};Z.exports=function(y,l,F,K,q,m){function E(a,k,e){this.target=a;this.texture=k;this.renderbuffer=e;var d=a=0;k?(a=k.width,d=k.height):e&&(a=e.width,d=e.height);this.width=a;this.height=d}function ia(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function C(f,k,e){if(f){if(f.texture){f=f.texture._texture;var d=Math.max(1,f.height);a(Math.max(1,f.width)===k&&d===e,"inconsistent width/height for supplied texture")}else f=f.renderbuffer._renderbuffer,
a(f.width===k&&f.height===e,"inconsistent width/height for renderbuffer");f.refCount+=1}}function L(a,k){k&&(k.texture?y.framebufferTexture2D(36160,a,k.target,k.texture._texture.texture,0):y.framebufferRenderbuffer(36160,a,36161,k.renderbuffer._renderbuffer.renderbuffer))}function u(f){var k=3553,e=null,d=null,b=f;"object"===typeof f&&(b=f.data,"target"in f&&(k=f.target|0));a.type(b,"function","invalid attachment data");f=b._reglType;"texture2d"===f?(e=b,a(3553===k)):"textureCube"===f?(e=b,a(34069<=
k&&34075>k,"invalid cube map target")):"renderbuffer"===f?(d=b,k=36161):a.raise("invalid regl object for attachment");return new E(k,e,d)}function J(a,k,e,d,b){if(e)return a=K.create2D({width:a,height:k,format:d,type:b}),a._texture.refCount=0,new E(3553,a,null);a=q.create({width:a,height:k,format:d});a._renderbuffer.refCount=0;return new E(36161,null,a)}function aa(a){return a&&(a.texture||a.renderbuffer)}function b(a,k,e){a&&(a.texture?a.texture.resize(k,e):a.renderbuffer&&a.renderbuffer.resize(k,
e),a.width=k,a.height=e)}function n(){this.id=k++;V[this.id]=this;this.framebuffer=y.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function U(a){a.colorAttachments.forEach(ia);ia(a.depthAttachment);ia(a.stencilAttachment);ia(a.depthStencilAttachment)}function p(f){var k=f.framebuffer;a(k,"must not double destroy framebuffer");y.deleteFramebuffer(k);f.framebuffer=null;m.framebufferCount--;delete V[f.id]}
function W(f){var k;y.bindFramebuffer(36160,f.framebuffer);var e=f.colorAttachments;for(k=0;k<e.length;++k)L(36064+k,e[k]);for(k=e.length;k<F.maxColorAttachments;++k)y.framebufferTexture2D(36160,36064+k,3553,null,0);y.framebufferTexture2D(36160,33306,3553,null,0);y.framebufferTexture2D(36160,36096,3553,null,0);y.framebufferTexture2D(36160,36128,3553,null,0);L(36096,f.depthAttachment);L(36128,f.stencilAttachment);L(33306,f.depthStencilAttachment);f=y.checkFramebufferStatus(36160);y.isContextLost()||
36053===f||a.raise("framebuffer configuration not supported, status = "+d[f]);y.bindFramebuffer(36160,z.next?z.next.framebuffer:null);z.cur=z.next;y.getError()}function B(k,d){function g(k,f){var d;a(z.next!==B,"can not update framebuffer which is currently in use");var b=0,n=0,p=!0,r=!0;d=null;var V=!0,t="rgba",q="uint8",m=1,A=null,I=null,K=null,R=!1;if("number"===typeof k)b=k|0,n=f|0||b;else if(k){a.type(k,"object","invalid arguments for framebuffer");"shape"in k?(n=k.shape,a(Array.isArray(n)&&
2<=n.length,"invalid shape for framebuffer"),b=n[0],n=n[1]):("radius"in k&&(b=n=k.radius),"width"in k&&(b=k.width),"height"in k&&(n=k.height));if("color"in k||"colors"in k)d=k.color||k.colors,Array.isArray(d)&&a(1===d.length||l.webgl_draw_buffers,"multiple render targets not supported");if(!d){"colorCount"in k&&(m=k.colorCount|0,a(0<m,"invalid color buffer count"));"colorTexture"in k&&(V=!!k.colorTexture,t="rgba4");if("colorType"in k){q=k.colorType;if(V)a(l.oes_texture_float||!("float"===q||"float32"===
q),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(l.oes_texture_half_float||!("half float"===q||"float16"===q),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===q||"float16"===q)a(l.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),t="rgba16f";else if("float"===q||"float32"===q)a(l.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
t="rgba32f";a.oneOf(q,D,"invalid color type")}"colorFormat"in k&&(t=k.colorFormat,0<=Y.indexOf(t)?V=!0:0<=G.indexOf(t)?V=!1:a.optional(function(){if(V)a.oneOf(k.colorFormat,Y,"invalid color format for texture");else a.oneOf(k.colorFormat,G,"invalid color format for renderbuffer")}))}if("depthTexture"in k||"depthStencilTexture"in k)R=!(!k.depthTexture&&!k.depthStencilTexture),a(!R||l.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in k&&("boolean"===typeof k.depth?p=k.depth:
(A=k.depth,r=!1));"stencil"in k&&("boolean"===typeof k.stencil?r=k.stencil:(I=k.stencil,p=!1));"depthStencil"in k&&("boolean"===typeof k.depthStencil?p=r=k.depthStencil:(K=k.depthStencil,r=p=!1))}else b=n=1;var y=null,E=null,L=null,ya=null;if(Array.isArray(d))y=d.map(u);else if(d)y=[u(d)];else for(y=Array(m),d=0;d<m;++d)y[d]=J(b,n,V,t,q);a(l.webgl_draw_buffers||1>=y.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(y.length<=F.maxColorAttachments,
"too many color attachments, not supported");b=b||y[0].width;n=n||y[0].height;A?E=u(A):p&&!r&&(E=J(b,n,R,"depth","uint32"));I?L=u(I):r&&!p&&(L=J(b,n,!1,"stencil","uint8"));K?ya=u(K):!A&&!I&&r&&p&&(ya=J(b,n,R,"depth stencil","depth stencil"));a(1>=!!A+!!I+!!K,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");p=null;for(d=0;d<y.length;++d)C(y[d],b,n),a(!y[d]||y[d].texture&&0<=x.indexOf(y[d].texture._texture.format)||y[d].renderbuffer&&0<=c.indexOf(y[d].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+d+" is invalid"),y[d]&&y[d].texture&&(r=h[y[d].texture._texture.format]*e[y[d].texture._texture.type],null===p?p=r:a(p===r,"all color attachments much have the same number of bits per pixel."));C(E,b,n);a(!E||E.texture&&6402===E.texture._texture.format||E.renderbuffer&&33189===E.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");C(L,b,n);a(!L||L.renderbuffer&&36168===L.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
C(ya,b,n);a(!ya||ya.texture&&34041===ya.texture._texture.format||ya.renderbuffer&&34041===ya.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");U(B);B.width=b;B.height=n;B.colorAttachments=y;B.depthAttachment=E;B.stencilAttachment=L;B.depthStencilAttachment=ya;g.color=y.map(aa);g.depth=aa(E);g.stencil=aa(L);g.depthStencil=aa(ya);g.width=B.width;g.height=B.height;W(B);return g}var B=new n;m.framebufferCount++;g(k,d);return t(g,{resize:function(k,f){a(z.next!==
B,"can not resize a framebuffer which is currently in use");var e=Math.max(k|0,1),d=Math.max(f|0||e,1);if(e===B.width&&d===B.height)return g;for(var c=B.colorAttachments,n=0;n<c.length;++n)b(c[n],e,d);b(B.depthAttachment,e,d);b(B.stencilAttachment,e,d);b(B.depthStencilAttachment,e,d);B.width=g.width=e;B.height=g.height=d;W(B);return g},_reglType:"framebuffer",_framebuffer:B,destroy:function(){p(B);U(B)},use:function(a){z.setFBO({framebuffer:g},a)}})}var z={cur:null,next:null,dirty:!1,setFBO:null},
Y=["rgba"],G=["rgba4","rgb565","rgb5 a1"];l.ext_srgb&&G.push("srgba");l.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f");l.webgl_color_buffer_float&&G.push("rgba32f");var D=["uint8"];l.oes_texture_half_float&&D.push("half float","float16");l.oes_texture_float&&D.push("float","float32");var k=0,V={};return t(z,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof n)?a:null},create:B,createCube:function(k){function e(k){var f;a(0>
d.indexOf(z.next),"can not update framebuffer which is currently in use");var b={color:null},g=0,c=null;f="rgba";var n="uint8",h=1;if("number"===typeof k)g=k|0;else if(k){a.type(k,"object","invalid arguments for framebuffer");"shape"in k?(g=k.shape,a(Array.isArray(g)&&2<=g.length,"invalid shape for framebuffer"),a(g[0]===g[1],"cube framebuffer must be square"),g=g[0]):("radius"in k&&(g=k.radius|0),"width"in k?(g=k.width|0,"height"in k&&a(k.height===g,"must be square")):"height"in k&&(g=k.height|0));
if("color"in k||"colors"in k)c=k.color||k.colors,Array.isArray(c)&&a(1===c.length||l.webgl_draw_buffers,"multiple render targets not supported");c||("colorCount"in k&&(h=k.colorCount|0,a(0<h,"invalid color buffer count")),"colorType"in k&&(a.oneOf(k.colorType,D,"invalid color type"),n=k.colorType),"colorFormat"in k&&(f=k.colorFormat,a.oneOf(k.colorFormat,Y,"invalid color format for texture")));"depth"in k&&(b.depth=k.depth);"stencil"in k&&(b.stencil=k.stencil);"depthStencil"in k&&(b.depthStencil=
k.depthStencil)}else g=1;if(c)if(Array.isArray(c))for(k=[],f=0;f<c.length;++f)k[f]=c[f];else k=[c];else for(k=Array(h),c={radius:g,format:f,type:n},f=0;f<h;++f)k[f]=K.createCube(c);b.color=Array(k.length);for(f=0;f<k.length;++f)h=k[f],a("function"===typeof h&&"textureCube"===h._reglType,"invalid cube map"),g=g||h.width,a(h.width===g&&h.height===g,"invalid cube map shape"),b.color[f]={target:34069,data:k[f]};for(f=0;6>f;++f){for(h=0;h<k.length;++h)b.color[h].target=34069+f;0<f&&(b.depth=d[0].depth,
b.stencil=d[0].stencil,b.depthStencil=d[0].depthStencil);if(d[f])d[f](b);else d[f]=B(b)}return t(e,{width:g,height:g,color:k})}var d=Array(6);e(k);return t(e,{faces:d,resize:function(k){var f=k|0;a(0<f&&f<=F.maxCubeMapSize,"invalid radius for cube fbo");if(f===e.width)return e;var b=e.color;for(k=0;k<b.length;++k)b[k].resize(f);for(k=0;6>k;++k)d[k].resize(f);e.width=e.height=f;return e},_reglType:"framebufferCube",destroy:function(){d.forEach(function(a){a.destroy()})}})},clear:function(){g(V).forEach(p)},
restore:function(){z.cur=null;z.next=null;z.dirty=!0;g(V).forEach(function(a){a.framebuffer=y.createFramebuffer();W(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(M,Z,ma){var a=M("./util/sorted-object-keys"),g=M("./util/pool");Z.exports=function(t,x){var h=1;x.ext_texture_filter_anisotropic&&(h=t.getParameter(34047));var e=1,c=1;x.webgl_draw_buffers&&(e=t.getParameter(34852),c=t.getParameter(36063));var d=!!x.oes_texture_float;if(d){d=t.createTexture();t.bindTexture(3553,
d);t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var y=t.createFramebuffer();t.bindFramebuffer(36160,y);t.framebufferTexture2D(36160,36064,3553,d,0);t.bindTexture(3553,null);if(36053!==t.checkFramebufferStatus(36160))d=!1;else{t.viewport(0,0,1,1);t.clearColor(1,0,0,1);t.clear(16384);var l=g.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,l);t.getError()?d=!1:(t.deleteFramebuffer(y),t.deleteTexture(d),d=1===l[0]);g.freeType(l)}}l=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(l=t.createTexture(),y=g.allocType(5121,36),t.activeTexture(33984),t.bindTexture(34067,l),t.texImage2D(34069,0,6408,3,3,0,6408,5121,y),g.freeType(y),t.bindTexture(34067,null),t.deleteTexture(l),l=!t.getError());return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:a(x).filter(function(a){return!!x[a]}),
maxAnisotropic:h,maxDrawbuffers:e,maxColorAttachments:c,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),
maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:d,npotTextureCube:l}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(M,Z,ma){var a=M("./util/check"),g=M("./util/is-typed-array");Z.exports=function(t,x,h,e,c,d,y){function l(K){var q;null===x.next?(a(c.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
q=5121):(a(null!==x.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),q=x.next.colorAttachments[0].texture._texture.type,a.optional(function(){d.oes_texture_float?(a(5121===q||5126===q,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===q&&a(y.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===q,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var m=0,l=0,F=e.framebufferWidth,C=e.framebufferHeight,L=null;g(K)?L=K:K&&(a.type(K,"object","invalid arguments to regl.read()"),m=K.x|0,l=K.y|0,a(0<=m&&m<e.framebufferWidth,"invalid x offset for regl.read"),a(0<=l&&l<e.framebufferHeight,"invalid y offset for regl.read"),F=(K.width||e.framebufferWidth-m)|0,C=(K.height||e.framebufferHeight-l)|0,L=K.data||null);L&&(5121===q?a(L instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===q&&a(L instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<F&&F+m<=e.framebufferWidth,"invalid width for read pixels");a(0<C&&C+l<=e.framebufferHeight,"invalid height for read pixels");h();K=F*C*4;L||(5121===q?L=new Uint8Array(K):5126===q&&(L=L||new Float32Array(K)));a.isTypedArray(L,"data buffer for regl.read() must be a typedarray");a(L.byteLength>=K,"data buffer for regl.read() too small");t.pixelStorei(3333,4);t.readPixels(m,l,F,C,6408,q,L);return L}function F(a){var e;
x.setFBO({framebuffer:a.framebuffer},function(){e=l(a)});return e}return function(a){return a&&"framebuffer"in a?F(a):l(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(M,Z,ma){var a=M("./util/sorted-object-keys"),g=M("./util/check"),t=M("./util/values"),x=[];x[32854]=2;x[32855]=2;x[36194]=2;x[33189]=2;x[36168]=1;x[34041]=4;x[35907]=4;x[34836]=16;x[34842]=8;x[34843]=6;Z.exports=function(h,e,c,d,y){function l(a){this.id=m++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=
this.width=0;y.profile&&(this.stats={size:0})}function F(a){var e=a.renderbuffer;g(e,"must not double destroy renderbuffer");h.bindRenderbuffer(36161,null);h.deleteRenderbuffer(e);a.renderbuffer=null;a.refCount=0;delete E[a.id];d.renderbufferCount--}var K={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(K.srgba=35907);e.ext_color_buffer_half_float&&(K.rgba16f=34842,K.rgb16f=34843);e.webgl_color_buffer_float&&(K.rgba32f=34836);var q=[];a(K).forEach(function(a){q[K[a]]=
a});var m=0,E={};l.prototype.decRef=function(){0>=--this.refCount&&F(this)};y.profile&&(d.getTotalRenderbufferSize=function(){var e=0;a(E).forEach(function(a){e+=E[a].stats.size});return e});return{create:function(a,e){function t(a,e){var d=0,n=0,C=32854;"object"===typeof a&&a?("shape"in a?(n=a.shape,g(Array.isArray(n)&&2<=n.length,"invalid renderbuffer shape"),d=n[0]|0,n=n[1]|0):("radius"in a&&(d=n=a.radius|0),"width"in a&&(d=a.width|0),"height"in a&&(n=a.height|0)),"format"in a&&(g.parameter(a.format,
K,"invalid renderbuffer format"),C=K[a.format])):"number"===typeof a?(d=a|0,n="number"===typeof e?e|0:d):a?g.raise("invalid arguments to renderbuffer constructor"):d=n=1;g(0<d&&0<n&&d<=c.maxRenderbufferSize&&n<=c.maxRenderbufferSize,"invalid renderbuffer size");if(d!==u.width||n!==u.height||C!==u.format)return t.width=u.width=d,t.height=u.height=n,u.format=C,h.bindRenderbuffer(36161,u.renderbuffer),h.renderbufferStorage(36161,C,d,n),g(0===h.getError(),"invalid render buffer format"),y.profile&&(u.stats.size=
x[u.format]*u.width*u.height),t.format=q[u.format],t}var u=new l(h.createRenderbuffer());E[u.id]=u;d.renderbufferCount++;t(a,e);t.resize=function(a,e){var d=a|0,n=e|0||d;if(d===u.width&&n===u.height)return t;g(0<d&&0<n&&d<=c.maxRenderbufferSize&&n<=c.maxRenderbufferSize,"invalid renderbuffer size");t.width=u.width=d;t.height=u.height=n;h.bindRenderbuffer(36161,u.renderbuffer);h.renderbufferStorage(36161,u.format,d,n);g(0===h.getError(),"invalid render buffer format");y.profile&&(u.stats.size=x[u.format]*
u.width*u.height);return t};t._reglType="renderbuffer";t._renderbuffer=u;y.profile&&(t.stats=u.stats);t.destroy=function(){u.decRef()};return t},clear:function(){t(E).forEach(F)},restore:function(){t(E).forEach(function(a){a.renderbuffer=h.createRenderbuffer();h.bindRenderbuffer(36161,a.renderbuffer);h.renderbufferStorage(36161,a.format,a.width,a.height)});h.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(M,Z,ma){var a=M("./util/sorted-object-keys"),
g=M("./util/check"),t=M("./util/extend"),x=M("./util/values");Z.exports=function(h,e,c,d){function y(a,e,d,b){this.name=a;this.id=e;this.location=d;this.info=b}function l(a,e){for(var d=0;d<a.length;++d)if(a[d].id===e.id){a[d].location=e.location;return}a.push(e)}function F(a,d,c){var b=35632===a?m:E,n=b[d];if(!n){var x=e.str(d),n=h.createShader(a);h.shaderSource(n,x);h.compileShader(n);g.shaderError(h,n,x,a,c);b[d]=n}return n}function K(a,e){this.id=L++;this.fragId=a;this.vertId=e;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function q(a,c,x){var b;b=F(35632,a.fragId);var n=F(35633,a.vertId),t=a.program=h.createProgram();h.attachShader(t,b);h.attachShader(t,n);if(x)for(b=0;b<x.length;++b)n=x[b],h.bindAttribLocation(t,n[0],n[1]);h.linkProgram(t);g.linkError(h,t,e.str(a.fragId),e.str(a.vertId),c);x=h.getProgramParameter(t,35718);d.profile&&(a.stats.uniformsCount=x);n=a.uniforms;for(b=0;b<x;++b)if(c=h.getActiveUniform(t,
b))if(1<c.size)for(var p=0;p<c.size;++p){var C=c.name.replace("[0]","["+p+"]");l(n,new y(C,e.id(C),h.getUniformLocation(t,C),c))}else l(n,new y(c.name,e.id(c.name),h.getUniformLocation(t,c.name),c));x=h.getProgramParameter(t,35721);d.profile&&(a.stats.attributesCount=x);a=a.attributes;for(b=0;b<x;++b)(c=h.getActiveAttrib(t,b))&&l(a,new y(c.name,e.id(c.name),h.getAttribLocation(t,c.name),c))}var m={},E={},ia={},C=[],L=0;d.profile&&(c.getMaxUniformsCount=function(){var a=0;C.forEach(function(e){e.stats.uniformsCount>
a&&(a=e.stats.uniformsCount)});return a},c.getMaxAttributesCount=function(){var a=0;C.forEach(function(e){e.stats.attributesCount>a&&(a=e.stats.attributesCount)});return a});return{clear:function(){var a=h.deleteShader.bind(h);x(m).forEach(a);m={};x(E).forEach(a);E={};C.forEach(function(a){h.deleteProgram(a.program)});C.length=0;ia={};c.shaderCount=0},program:function(e,d,x,b){g.command(0<=e,"missing vertex shader",x);g.command(0<=d,"missing fragment shader",x);var n=ia[d];n||(n=ia[d]={});var U=n[e];
if(U&&(U.refCount++,!b))return U;var p=new K(d,e);c.shaderCount++;q(p,x,b);U||(n[e]=p);C.push(p);return t(p,{destroy:function(){p.refCount--;if(0>=p.refCount){h.deleteProgram(p.program);var e=C.indexOf(p);C.splice(e,1);c.shaderCount--}0>=n[p.vertId].refCount&&(h.deleteShader(E[p.vertId]),delete E[p.vertId],delete ia[p.fragId][p.vertId]);a(ia[p.fragId]).length||(h.deleteShader(m[p.fragId]),delete m[p.fragId],delete ia[p.fragId])}})},restore:function(){m={};E={};for(var a=0;a<C.length;++a)q(C[a],null,
C[a].attributes.map(function(a){return[a.location,a.name]}))},shader:F,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(M,Z,ma){Z.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(M,Z,ma){Z.exports=function(){var a={"":0},g=[""];return{id:function(t){var x=a[t];if(x)return x;x=a[t]=g.length;g.push(t);
return x},str:function(a){return g[a]}}}},{}],19:[function(M,Z,ma){function a(a){return"[object "+a+"]"}function g(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function t(a){return Array.isArray(a)&&0!==a.length&&ia(a[0])?!0:!1}function x(a){return Object.prototype.toString.call(a)}function h(a){if(!a)return!1;var e=x(a);return 0<=Y.indexOf(e)?!0:g(a)||t(a)||q(a)}function e(a,e){36193===a.type?(a.data=E(e),m.freeType(e)):a.data=e}function c(a,e,f,d,g,c){a="undefined"!==typeof D[a]?
D[a]:b[a]*G[e];c&&(a*=6);if(g){for(d=0;1<=f;)d+=a*f*f,f/=2;return d}return a*f*d}var d=M("./util/sorted-object-keys"),y=M("./util/check"),l=M("./util/extend"),F=M("./util/values"),K=M("./util/is-typed-array"),q=M("./util/is-ndarray"),m=M("./util/pool"),E=M("./util/to-half-float"),ia=M("./util/is-array-like"),C=M("./util/flatten"),L=M("./util/is-pow2");ma=M("./constants/arraytypes.json");var u=M("./constants/arraytypes.json"),J=[9984,9986,9985,9987],aa=[0,6409,6410,6407,6408],b={};b[6409]=b[6406]=
b[6402]=1;b[34041]=b[6410]=2;b[6407]=b[35904]=3;b[6408]=b[35906]=4;var n=a("HTMLCanvasElement"),U=a("OffscreenCanvas"),p=a("CanvasRenderingContext2D"),W=a("ImageBitmap"),B=a("HTMLImageElement"),z=a("HTMLVideoElement"),Y=d(ma).concat([n,U,p,W,B,z]),G=[];G[5121]=1;G[5126]=4;G[36193]=2;G[5123]=2;G[5125]=4;var D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[34041]=4;D[33776]=.5;D[33777]=.5;D[33778]=1;D[33779]=1;D[35986]=.5;D[35987]=1;D[34798]=1;D[35840]=.5;D[35841]=.25;D[35842]=.5;D[35843]=.25;D[36196]=.5;Z.exports=
function(a,V,f,D,G,Y,ld){function X(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(a,k){a.internalformat=k.internalformat;a.format=k.format;a.type=k.type;a.compressed=k.compressed;a.premultiplyAlpha=k.premultiplyAlpha;a.flipY=k.flipY;a.unpackAlignment=k.unpackAlignment;a.colorSpace=k.colorSpace;a.width=k.width;a.height=k.height;a.channels=k.channels}
function T(a,k){if("object"===typeof k&&k){"premultiplyAlpha"in k&&(y.type(k.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=k.premultiplyAlpha);"flipY"in k&&(y.type(k.flipY,"boolean","invalid texture flip"),a.flipY=k.flipY);"alignment"in k&&(y.oneOf(k.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=k.alignment);"colorSpace"in k&&(y.parameter(k.colorSpace,Xa,"invalid colorSpace"),a.colorSpace=Xa[k.colorSpace]);if("type"in k){var e=k.type;y(V.oes_texture_float||
!("float"===e||"float32"===e),"you must enable the OES_texture_float extension in order to use floating point textures.");y(V.oes_texture_half_float||!("half float"===e||"float16"===e),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");y(V.webgl_depth_texture||!("uint16"===e||"uint32"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");y.parameter(e,v,"invalid texture type");a.type=
v[e]}var d=a.width,g=a.height,r=a.channels,e=!1;"shape"in k?(y(Array.isArray(k.shape)&&2<=k.shape.length,"shape must be an array"),d=k.shape[0],g=k.shape[1],3===k.shape.length&&(r=k.shape[2],y(0<r&&4>=r,"invalid number of channels"),e=!0),y(0<=d&&d<=f.maxTextureSize,"invalid width"),y(0<=g&&g<=f.maxTextureSize,"invalid height")):("radius"in k&&(d=g=k.radius,y(0<=d&&d<=f.maxTextureSize,"invalid radius")),"width"in k&&(d=k.width,y(0<=d&&d<=f.maxTextureSize,"invalid width")),"height"in k&&(g=k.height,
y(0<=g&&g<=f.maxTextureSize,"invalid height")),"channels"in k&&(r=k.channels,y(0<r&&4>=r,"invalid number of channels"),e=!0));a.width=d|0;a.height=g|0;a.channels=r|0;d=!1;"format"in k&&(d=k.format,y(V.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),y.parameter(d,w,"invalid texture format"),g=a.internalformat=w[d],a.format=Fa[g],d in v&&!("type"in k)&&(a.type=v[d]),d in da&&(a.compressed=!0),d=!0);
!e&&d?a.channels=b[a.format]:e&&!d?a.channels!==aa[a.format]&&(a.format=a.internalformat=aa[a.channels]):d&&e&&y(a.channels===b[a.format],"number of channels inconsistent with specified format")}}function S(f){a.pixelStorei(37440,f.flipY);a.pixelStorei(37441,f.premultiplyAlpha);a.pixelStorei(37443,f.colorSpace);a.pixelStorei(3317,f.unpackAlignment)}function N(){X.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function r(a,k){var d=null;
h(k)?d=k:k&&(y.type(k,"object","invalid pixel data type"),T(a,k),"x"in k&&(a.xOffset=k.x|0),"y"in k&&(a.yOffset=k.y|0),h(k.data)&&(d=k.data));y(!a.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(k.copy){y(!d,"can not specify copy and data field for the same texture");var b=G.viewportWidth,v=G.viewportHeight;a.width=a.width||b-a.xOffset;a.height=a.height||v-a.yOffset;a.needsCopy=!0;y(0<=a.xOffset&&a.xOffset<b&&0<=a.yOffset&&a.yOffset<v&&0<a.width&&a.width<=
b&&0<a.height&&a.height<=v,"copy texture read out of bounds")}else if(!d)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(K(d))a.channels=a.channels||4,a.data=d,"type"in k||5121!==a.type||(a.type=u[Object.prototype.toString.call(d)]|0);else if(g(d)){a.channels=a.channels||4;b=d;v=b.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:v=m.allocType(a.type,v);v.set(b);a.data=v;break;case 36193:a.data=E(b);break;default:y.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(q(d)){b=d.data;Array.isArray(b)||5121!==a.type||(a.type=u[Object.prototype.toString.call(b)]|0);var v=d.shape,r=d.stride,c,w,A,O;3===v.length?(A=v[2],O=r[2]):(y(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),O=A=1);c=v[0];w=v[1];v=r[0];r=r[1];a.alignment=1;a.width=c;a.height=w;a.channels=A;a.format=a.internalformat=aa[A];a.needsFree=!0;c=O;d=d.offset;A=a.width;O=a.height;w=a.channels;for(var da=m.allocType(36193===a.type?5126:a.type,A*O*w),Aa=0,V=0;V<O;++V)for(var va=
0;va<A;++va)for(var Ma=0;Ma<w;++Ma)da[Aa++]=b[v*va+r*V+c*Ma+d];e(a,da)}else if(x(d)===n||x(d)===U||x(d)===p)x(d)===n||x(d)===U?a.element=d:a.element=d.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(x(d)===W)a.element=d,a.width=d.width,a.height=d.height,a.channels=4;else if(x(d)===B)a.element=d,a.width=d.naturalWidth,a.height=d.naturalHeight,a.channels=4;else if(x(d)===z)a.element=d,a.width=d.videoWidth,a.height=d.videoHeight,a.channels=4;else if(t(d)){b=a.width||d[0].length;
v=a.height||d.length;r=a.channels;r=ia(d[0][0])?r||d[0][0].length:r||1;c=C.shape(d);A=1;for(O=0;O<c.length;++O)A*=c[O];A=m.allocType(36193===a.type?5126:a.type,A);C.flatten(d,c,"",A);e(a,A);a.alignment=1;a.width=b;a.height=v;a.channels=r;a.format=a.internalformat=aa[r];a.needsFree=!0}5126===a.type?y(0<=f.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&y(0<=f.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function P(f,e,d,b,g){var v=f.element,r=f.data,c=f.internalformat,A=f.format,w=f.type,n=f.width,h=f.height;S(f);v?a.texSubImage2D(e,g,d,b,A,w,v):f.compressed?a.compressedTexSubImage2D(e,g,d,b,c,n,h,r):f.needsCopy?(D(),a.copyTexSubImage2D(e,g,d,b,f.xOffset,f.yOffset,n,h)):a.texSubImage2D(e,g,d,b,n,h,A,w,r)}function Q(){return sa.pop()||new N}function qa(a){a.needsFree&&m.freeType(a.data);N.call(a);sa.push(a)}function pa(){X.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function A(a,k,f){var e=a.images[0]=Q();a.mipmask=1;e.width=a.width=k;e.height=a.height=f;e.channels=a.channels=4}function I(a,k){var f=null;if(h(k))f=a.images[0]=Q(),ea(f,a),r(f,k),a.mipmask=1;else if(T(a,k),Array.isArray(k.mipmap))for(var e=k.mipmap,d=0;d<e.length;++d)f=a.images[d]=Q(),ea(f,a),f.width>>=d,f.height>>=d,r(f,e[d]),a.mipmask|=1<<d;else f=a.images[0]=Q(),ea(f,a),r(f,k),a.mipmask=1;ea(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||y(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ga(f,e){for(var d=f.images,b=0;b<d.length&&d[b];++b){var g=d[b],v=e,r=b,c=g.element,A=g.data,w=g.internalformat,n=g.format,h=g.type,O=g.width,x=g.height;S(g);c?a.texImage2D(v,r,n,n,h,c):g.compressed?a.compressedTexImage2D(v,r,w,O,x,0,A):g.needsCopy?(D(),a.copyTexImage2D(v,r,n,g.xOffset,g.yOffset,O,x,0)):a.texImage2D(v,
r,n,O,x,0,n,h,A||null)}}function R(){var a=xa.pop()||new pa;X.call(a);for(var k=a.mipmask=0;16>k;++k)a.images[k]=null;return a}function na(a){for(var k=a.images,f=0;f<k.length;++f)k[f]&&qa(k[f]),k[f]=null;xa.push(a)}function ra(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ba(a,k){if("min"in k){var e=k.min;y.parameter(e,Bb);a.minFilter=Bb[e];0<=J.indexOf(a.minFilter)&&!("faces"in k)&&(a.genMipmaps=!0)}"mag"in k&&
(e=k.mag,y.parameter(e,Aa),a.magFilter=Aa[e]);var e=a.wrapS,d=a.wrapT;if("wrap"in k){var b=k.wrap;"string"===typeof b?(y.parameter(b,Ma),e=d=Ma[b]):Array.isArray(b)&&(y.parameter(b[0],Ma),y.parameter(b[1],Ma),e=Ma[b[0]],d=Ma[b[1]])}else"wrapS"in k&&(e=k.wrapS,y.parameter(e,Ma),e=Ma[e]),"wrapT"in k&&(d=k.wrapT,y.parameter(d,Ma),d=Ma[d]);a.wrapS=e;a.wrapT=d;"anisotropic"in k&&(e=k.anisotropic,y("number"===typeof e&&1<=e&&e<=f.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=k.anisotropic);
if("mipmap"in k){e=!1;switch(typeof k.mipmap){case "string":y.parameter(k.mipmap,za,"invalid mipmap hint");a.mipmapHint=za[k.mipmap];e=a.genMipmaps=!0;break;case "boolean":e=a.genMipmaps=k.mipmap;break;case "object":y(Array.isArray(k.mipmap),"invalid mipmap type");a.genMipmaps=!1;e=!0;break;default:y.raise("invalid mipmap type")}!e||"min"in k||(a.minFilter=9984)}}function ya(f,e){a.texParameteri(e,10241,f.minFilter);a.texParameteri(e,10240,f.magFilter);a.texParameteri(e,10242,f.wrapS);a.texParameteri(e,
10243,f.wrapT);V.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,f.anisotropic);f.genMipmaps&&(a.hint(33170,f.mipmapHint),a.generateMipmap(e))}function ha(f){X.call(this);this.mipmask=0;this.internalformat=6408;this.id=wa++;this.refCount=1;this.target=f;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ra;ld.profile&&(this.stats={size:0})}function Ca(f){a.activeTexture(33984);a.bindTexture(f.target,f.texture)}function ja(){var f=ta[0];f?a.bindTexture(f.target,f.texture):
a.bindTexture(3553,null)}function oa(f){var e=f.texture;y(e,"must not double destroy texture");var d=f.unit,b=f.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(b,null),ta[d]=null);a.deleteTexture(e);f.texture=null;f.params=null;f.pixels=null;f.refCount=0;delete ka[f.id];Y.textureCount--}var za={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ma={repeat:10497,clamp:33071,mirror:33648},Aa={nearest:9728,linear:9729},Bb=l({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},Aa),Xa={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},w={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},da={};V.ext_srgb&&(w.srgb=35904,w.srgba=35906);V.oes_texture_float&&(v.float32=v["float"]=5126);V.oes_texture_half_float&&(v.float16=v["half float"]=36193);V.webgl_depth_texture&&(l(w,{depth:6402,"depth stencil":34041}),l(v,{uint16:5123,uint32:5125,
"depth stencil":34042}));V.webgl_compressed_texture_s3tc&&l(da,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});V.webgl_compressed_texture_atc&&l(da,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});V.webgl_compressed_texture_pvrtc&&l(da,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});V.webgl_compressed_texture_etc1&&(da["rgb etc1"]=36196);var ua=Array.prototype.slice.call(a.getParameter(34467));
d(da).forEach(function(a){var k=da[a];0<=ua.indexOf(k)&&(w[a]=k)});var Da=d(w);f.textureFormats=Da;var lb=[];d(w).forEach(function(a){lb[w[a]]=a});var Ib=[];d(v).forEach(function(a){Ib[v[a]]=a});var ba=[];d(Aa).forEach(function(a){ba[Aa[a]]=a});var O=[];d(Bb).forEach(function(a){O[Bb[a]]=a});var va=[];d(Ma).forEach(function(a){va[Ma[a]]=a});var Fa=Da.reduce(function(a,k){var f=w[k];6409===f||6406===f||6409===f||6410===f||6402===f||34041===f||V.ext_srgb&&(35904===f||35906===f)?a[f]=f:32855===f||0<=
k.indexOf("rgba")?a[f]=6408:a[f]=6407;return a},{}),sa=[],xa=[],wa=0,ka={},ca=f.maxTextureUnits,ta=Array(ca).map(function(){return null});l(ha.prototype,{bind:function(){this.bindCount+=1;var f=this.unit;if(0>f){for(var e=0;e<ca;++e){var d=ta[e];if(d){if(0<d.bindCount)continue;d.unit=-1}ta[e]=this;f=e;break}f>=ca&&y.raise("insufficient number of texture units");ld.profile&&Y.maxTextureUnits<f+1&&(Y.maxTextureUnits=f+1);this.unit=f;a.activeTexture(33984+f);a.bindTexture(this.target,this.texture)}return f},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&oa(this)}});ld.profile&&(Y.getTotalTextureSize=function(){var a=0;d(ka).forEach(function(k){a+=ka[k].stats.size});return a});return{create2D:function(e,d){function b(a,k){var e=g.texInfo;ra.call(e);var d=R();"number"===typeof a?"number"===typeof k?A(d,a|0,k|0):A(d,a|0,a|0):a?(y.type(a,"object","invalid arguments to regl.texture"),Ba(e,a),I(d,a)):A(d,1,1);e.genMipmaps&&(d.mipmask=(d.width<<1)-1);g.mipmask=d.mipmask;ea(g,d);y.texture2D(e,
d,f);g.internalformat=d.internalformat;b.width=d.width;b.height=d.height;Ca(g);ga(d,3553);ya(e,3553);ja();na(d);ld.profile&&(g.stats.size=c(g.internalformat,g.type,d.width,d.height,e.genMipmaps,!1));b.format=lb[g.internalformat];b.type=Ib[g.type];b.mag=ba[e.magFilter];b.min=O[e.minFilter];b.wrapS=va[e.wrapS];b.wrapT=va[e.wrapT];return b}var g=new ha(3553);ka[g.id]=g;Y.textureCount++;b(e,d);b.subimage=function(a,k,f,e){y(!!a,"must specify image data");k|=0;f|=0;e|=0;var d=Q();ea(d,g);d.width=0;d.height=
0;r(d,a);d.width=d.width||(g.width>>e)-k;d.height=d.height||(g.height>>e)-f;y(g.type===d.type&&g.format===d.format&&g.internalformat===d.internalformat,"incompatible format for texture.subimage");y(0<=k&&0<=f&&k+d.width<=g.width&&f+d.height<=g.height,"texture.subimage write out of bounds");y(g.mipmask&1<<e,"missing mipmap data");y(d.data||d.element||d.needsCopy,"missing image data");Ca(g);P(d,3553,k,f,e);ja();qa(d);return b};b.resize=function(f,e){var d=f|0,v=e|0||d;if(d===g.width&&v===g.height)return b;
b.width=g.width=d;b.height=g.height=v;Ca(g);for(var r=0;g.mipmask>>r;++r){var A=d>>r,w=v>>r;if(!A||!w)break;a.texImage2D(3553,r,g.format,A,w,0,g.format,g.type,null)}ja();ld.profile&&(g.stats.size=c(g.internalformat,g.type,d,v,!1,!1));return b};b._reglType="texture2d";b._texture=g;ld.profile&&(b.stats=g.stats);b.destroy=function(){g.decRef()};return b},createCube:function(e,d,b,g,v,w){function n(a,k,e,d,b,g){var v,r=h.texInfo;ra.call(r);for(v=0;6>v;++v)x[v]=R();if("number"!==typeof a&&a)if("object"===
typeof a)if(k)I(x[0],a),I(x[1],k),I(x[2],e),I(x[3],d),I(x[4],b),I(x[5],g);else if(Ba(r,a),T(h,a),"faces"in a)for(a=a.faces,y(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),v=0;6>v;++v)y("object"===typeof a[v]&&!!a[v],"invalid input for cube map face"),ea(x[v],h),I(x[v],a[v]);else for(v=0;6>v;++v)I(x[v],a);else y.raise("invalid arguments to cube map");else for(a=a|0||1,v=0;6>v;++v)A(x[v],a,a);ea(h,x[0]);y.optional(function(){f.npotTextureCube||y(L(h.width)&&L(h.height),"your browser does not support non power or two texture dimensions")});
h.mipmask=r.genMipmaps?(x[0].width<<1)-1:x[0].mipmask;y.textureCube(h,r,x,f);h.internalformat=x[0].internalformat;n.width=x[0].width;n.height=x[0].height;Ca(h);for(v=0;6>v;++v)ga(x[v],34069+v);ya(r,34067);ja();ld.profile&&(h.stats.size=c(h.internalformat,h.type,n.width,n.height,r.genMipmaps,!0));n.format=lb[h.internalformat];n.type=Ib[h.type];n.mag=ba[r.magFilter];n.min=O[r.minFilter];n.wrapS=va[r.wrapS];n.wrapT=va[r.wrapT];for(v=0;6>v;++v)na(x[v]);return n}var h=new ha(34067);ka[h.id]=h;Y.cubeCount++;
var x=Array(6);n(e,d,b,g,v,w);n.subimage=function(a,k,f,e,d){y(!!k,"must specify image data");y("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");f|=0;e|=0;d|=0;var b=Q();ea(b,h);b.width=0;b.height=0;r(b,k);b.width=b.width||(h.width>>d)-f;b.height=b.height||(h.height>>d)-e;y(h.type===b.type&&h.format===b.format&&h.internalformat===b.internalformat,"incompatible format for texture.subimage");y(0<=f&&0<=e&&f+b.width<=h.width&&e+b.height<=h.height,"texture.subimage write out of bounds");y(h.mipmask&
1<<d,"missing mipmap data");y(b.data||b.element||b.needsCopy,"missing image data");Ca(h);P(b,34069+a,f,e,d);ja();qa(b);return n};n.resize=function(f){f|=0;if(f!==h.width){n.width=h.width=f;n.height=h.height=f;Ca(h);for(var e=0;6>e;++e)for(var d=0;h.mipmask>>d;++d)a.texImage2D(34069+e,d,h.format,f>>d,f>>d,0,h.format,h.type,null);ja();ld.profile&&(h.stats.size=c(h.internalformat,h.type,n.width,n.height,!1,!0));return n}};n._reglType="textureCube";n._texture=h;ld.profile&&(n.stats=h.stats);n.destroy=
function(){h.decRef()};return n},clear:function(){for(var f=0;f<ca;++f)a.activeTexture(33984+f),a.bindTexture(3553,null),ta[f]=null;F(ka).forEach(oa);Y.cubeCount=0;Y.textureCount=0},getTexture:function(a){return null},restore:function(){for(var f=0;f<ca;++f){var e=ta[f];e&&(e.bindCount=0,e.unit=-1,ta[f]=null)}F(ka).forEach(function(f){f.texture=a.createTexture();a.bindTexture(f.target,f.texture);for(var e=0;32>e;++e)if(0!==(f.mipmask&1<<e))if(3553===f.target)a.texImage2D(3553,e,f.internalformat,f.width>>
e,f.height>>e,0,f.internalformat,f.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,e,f.internalformat,f.width>>e,f.height>>e,0,f.internalformat,f.type,null);ya(f.texInfo,f.target)})},refresh:function(){for(var f=0;f<ca;++f){var e=ta[f];e&&(e.bindCount=0,e.unit=-1,ta[f]=null);a.activeTexture(33984+f);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(M,Z,ma){Z.exports=function(a,g){function t(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function x(a,e,g){var h=c.pop()||new t;h.startQueryIndex=a;h.endQueryIndex=e;h.sum=0;h.stats=g;d.push(h)}if(!g.ext_disjoint_timer_query)return null;var h=[],e=[],c=[],d=[],y=[],l=[];return{beginQuery:function(a){var d=h.pop()||g.ext_disjoint_timer_query.createQueryEXT();
g.ext_disjoint_timer_query.beginQueryEXT(35007,d);e.push(d);x(e.length-1,e.length,a)},endQuery:function(){g.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:x,update:function(){var a,x;a=e.length;if(0!==a){l.length=Math.max(l.length,a+1);y.length=Math.max(y.length,a+1);y[0]=0;var t=l[0]=0;for(x=a=0;x<e.length;++x){var m=e[x];g.ext_disjoint_timer_query.getQueryObjectEXT(m,34919)?(t+=g.ext_disjoint_timer_query.getQueryObjectEXT(m,34918),h.push(m)):e[a++]=m;y[x+1]=t;l[x+1]=a}e.length=a;for(x=
a=0;x<d.length;++x){var t=d[x],E=t.startQueryIndex,m=t.endQueryIndex;t.sum+=y[m]-y[E];E=l[E];m=l[m];m===E?(t.stats.gpuTime+=t.sum/1E6,c.push(t)):(t.startQueryIndex=E,t.endQueryIndex=m,d[a++]=t)}d.length=a}},getNumPendingQueries:function(){return e.length},clear:function(){h.push.apply(h,e);for(var a=0;a<h.length;a++)g.ext_disjoint_timer_query.deleteQueryEXT(h[a]);e.length=0;h.length=0},restore:function(){e.length=0;h.length=0}}}},{}],21:[function(M,Z,ma){function a(a){return"undefined"!==typeof atob?
atob(a):"base64:"+a}function g(a){a=Error("(regl) "+a);console.error(a);throw a;}function t(a,e){a||g(e)}function x(a){return a?": "+a:""}function h(a,e){switch(e){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function e(a,e,d){0>e.indexOf(a)&&g("invalid value"+
x(d)+". must be one of: "+e)}function c(a,e){for(a+="";a.length<e;)a=" "+a;return a}function d(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function y(a,e){this.number=a;this.line=e;this.errors=[]}function l(a,e,d){this.file=a;this.line=e;this.message=d}function F(){var a=Error(),a=(a.stack||a).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return e?e[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function K(){var a=Error(),a=(a.stack||a).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return e?e[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function q(e,b){var g=e.split("\n"),c=1,n=0,h={unknown:new d,0:new d};h.unknown.name=h[0].name=b||F();h.unknown.lines.push(new y(0,""));for(var x=0;x<g.length;++x){var t=g[x],k=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(t);if(k)switch(k[1]){case "line":if(k=/(\d+)(\s+\d+)?/.exec(k[2]))c=k[1]|0,k[2]&&(n=k[2]|0,n in h||(h[n]=new d));break;case "define":if(k=/SHADER_NAME(_B64)?\s+(.*)$/.exec(k[2]))h[n].name=
k[1]?a(k[2]):k[2]}h[n].lines.push(new y(c++,t))}J(h).forEach(function(a){var f=h[a];f.lines.forEach(function(a){f.index[a.number]=a})});return h}function m(a){var e=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var d=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);d?e.push(new l(d[1]|0,d[2]|0,d[3].trim())):0<a.length&&e.push(new l("unknown",0,a))}});return e}function E(a,e){e.forEach(function(e){var d=a[e.file];if(d){var b=d.index[e.line];if(b){b.errors.push(e);d.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(e)})}function ia(a){a._commandRef=F()}function C(a,e){var d=K();g(a+" in command "+(e||F())+("unknown"===d?"":" called from "+d))}function L(a,e,d,b){h(a,e)||C("invalid parameter type"+x(d)+". expected "+e+", got "+typeof a,b||F())}function u(a,e){return 32820===a||32819===a||33635===a?2:34042===a?4:n[a]*e}var J=M("./sorted-object-keys"),aa=M("./is-typed-array");M=M("./extend");var b="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
n={};n[5120]=n[5121]=1;n[5122]=n[5123]=n[36193]=n[33635]=n[32819]=n[32820]=2;n[5124]=n[5125]=n[5126]=n[34042]=4;Z.exports=M(t,{optional:function(a){a()},raise:g,commandRaise:C,command:function(a,e,d){a||C(e,d||F())},parameter:function(a,e,d){a in e||g("unknown parameter ("+a+")"+x(d)+". possible values: "+J(e).join())},commandParameter:function(a,e,d,b){a in e||C("unknown parameter ("+a+")"+x(d)+". possible values: "+J(e).join(),b||F())},constructor:function(a){J(a).forEach(function(a){0>b.indexOf(a)&&
g('invalid regl constructor argument "'+a+'". must be one of '+b)})},type:function(a,e,d){h(a,e)||g("invalid parameter type"+x(d)+". expected "+e+", got "+typeof a)},commandType:L,isTypedArray:function(a,e){aa(a)||g("invalid parameter type"+x(e)+". must be a typed array")},nni:function(a,e){0<=a&&(a|0)===a||g("invalid parameter type, ("+a+")"+x(e)+". must be a nonnegative integer")},oneOf:e,shaderError:function(a,e,d,b,g){if(!a.getShaderParameter(e,a.COMPILE_STATUS)){e=a.getShaderInfoLog(e);a=b===
a.FRAGMENT_SHADER?"fragment":"vertex";L(d,"string",a+" shader source must be a string",g);var n=q(d,g);d=m(e);E(n,d);J(n).forEach(function(a){function e(a,k){d.push(a);f.push(k||"")}var k=n[a];if(k.hasErrors){var d=[""],f=[""];e("file number "+a+": "+k.name+"\n","color:red;text-decoration:underline;font-weight:bold");k.lines.forEach(function(a){if(0<a.errors.length){e(c(a.number,4)+"|  ","background-color:yellow; font-weight:bold");e(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var f=0;a.errors.forEach(function(k){k=k.message;var d=/^\s*'(.*)'\s*:\s*(.*)$/.exec(k);if(d){var b=d[1];k=d[2];switch(b){case "assign":b="="}f=Math.max(a.line.indexOf(b,f),0)}else f=0;e(c("| ",6));e(c("^^^",f+3)+"\n","font-weight:bold");e(c("| ",6));e(k+"\n","font-weight:bold")});e(c("| ",6)+"\n")}else e(c(a.number,4)+"|  "),e(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(f[0]=d.join("%c"),console.log.apply(console,f))}});t.raise("Error compiling "+
a+" shader, "+n[0].name)}},linkError:function(a,e,d,b,g){a.getProgramParameter(e,a.LINK_STATUS)||(a=a.getProgramInfoLog(e),d=q(d,g),b='Error linking program with vertex shader, "'+q(b,g)[0].name+'", and fragment shader "'+d[0].name+'"',"undefined"!==typeof document?console.log("%c"+b+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(b+"\n"+a),t.raise(b))},callSite:K,saveCommandRef:ia,saveDrawInfo:function(a,e,d,b){function g(a){return a?b.id(a):0}function c(a,
k){J(k).forEach(function(k){a[b.id(k)]=!0})}ia(a);a._fragId=g(a["static"].frag);a._vertId=g(a["static"].vert);var n=a._uniformSet={};c(n,e["static"]);c(n,e.dynamic);e=a._attributeSet={};c(e,d["static"]);c(e,d.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,d,b){a.texture?e(a.texture._texture.internalformat,d,"unsupported texture format for attachment"):e(a.renderbuffer._renderbuffer.format,b,"unsupported renderbuffer format for attachment")},
guessCommand:F,texture2D:function(a,e,d){var b=e.width,g=e.height,c=e.channels;t(0<b&&b<=d.maxTextureSize&&0<g&&g<=d.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||t(!(b&b-1)&&!!b&&!(g&g-1)&&!!g,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==b&&1!==g&&t(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(t(!(b&b-1)&&!!b&&!(g&g-1)&&!!g,"texture must be a square power of 2 to support mipmapping"),
t(e.mipmask===(b<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>d.extensions.indexOf("oes_texture_float_linear")&&t(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),t(!a.genMipmaps,"mipmap generation not supported with float textures"));var n=e.images;for(d=0;16>d;++d)if(n[d]){var h=b>>d,k=g>>d;t(e.mipmask&1<<d,"missing mipmap data");var x=n[d];t(x.width===h&&x.height===k,"invalid shape for mip images");t(x.format===e.format&&x.internalformat===
e.internalformat&&x.type===e.type,"incompatible type for mip image");!x.compressed&&x.data&&(h=Math.ceil(u(x.type,c)*h/x.unpackAlignment)*x.unpackAlignment,t(x.data.byteLength===h*k,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||t(0===(e.mipmask&1<<d),"extra mipmap data");e.compressed&&t(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,e,d,b){var g=a.width,c=a.height,n=a.channels;t(0<g&&g<=b.maxTextureSize&&
0<c&&c<=b.maxTextureSize,"invalid texture shape");t(g===c,"cube map must be square");t(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(b=0;b<d.length;++b){var h=d[b];t(h.width===g&&h.height===c,"inconsistent cube map face shape");e.genMipmaps&&(t(!h.compressed,"can not generate mipmap for compressed textures"),t(1===h.mipmask,"can not specify mipmaps and generate mipmaps"));for(var k=h.images,x=0;16>x;++x){var f=k[x];if(f){var C=g>>x,q=c>>x;t(h.mipmask&1<<x,"missing mipmap data");
t(f.width===C&&f.height===q,"invalid shape for mip images");t(f.format===a.format&&f.internalformat===a.internalformat&&f.type===a.type,"incompatible type for mip image");f.compressed||f.data&&t(f.data.byteLength===C*q*Math.max(u(f.type,n),f.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(M,Z,ma){Z.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(M,Z,ma){function a(a){return Array.prototype.slice.call(a)}function g(g){return a(g).join("")}var t=M("./extend"),x=M("./compiled-fns");Z.exports=function(){function h(){var e=[],c=[];return t(function(){e.push.apply(e,a(arguments))},{def:function(){var g="v"+d;d++;c.push(g);0<arguments.length&&(e.push(g,"="),e.push.apply(e,a(arguments)),e.push(";"));return g},toString:function(){return g([0<c.length?"var "+c.join(",")+";":"",g(e)])}})}function e(){function e(a,
c){g(a,c,"=",d.def(a,c),";")}var d=h(),g=h(),c=d.toString,x=g.toString;return t(function(){d.apply(d,a(arguments))},{def:d.def,entry:d,exit:g,save:e,set:function(a,g,c){e(a,g);d(a,g,"=",c,";")},toString:function(){return c()+x()}})}var c=0,d=0,y={},l=h(),F={};return{global:l,link:function(a){var e="$"+c,d=!1;"object"===typeof a&&a.name&&(e=a.name.replace(/ /g,"_"),d=!0);if(e in y)return e;y[e]=a;d||c++;return e},block:h,proc:function(a,d){function c(){var a="a"+h.length;h.push(a);return a}var h=[];
d=d||0;for(var x=0;x<d;++x)c();var x=e(),C=x.toString;return F[a]=t(x,{arg:c,toString:function(){return g(["function(",h.join(),"){",C(),"}"])}})},scope:e,cond:function(){var d=g(arguments),c=e(),h=e(),x=c.toString,l=h.toString;return t(c,{then:function(){c.apply(c,a(arguments));return this},"else":function(){h.apply(h,a(arguments));return this},toString:function(){var a=l();a&&(a="else{"+a+"}");return g(["if(",d,"){",x(),"}",a])}})},compile:function(){var a=[],e=[];Object.keys(y).sort(function(a,
e){var d="$"===a.charAt(0),g="$"===e.charAt(0);return d||g?d&&g?+a.slice(1)<+e.slice(1)?-1:1:d&&!g?-1:1:a.localeCompare(e)}).forEach(function(d){var g=y[d];a.push(d);e.push(g)});for(var d=0,c=a.length-1;-1<c;c--)if("$"===a[c].charAt(0)){d=c;break}var h=['"use strict";',l,"return {"];Object.keys(F).forEach(function(a){h.push('"',a,'":',F[a].toString(),",")});h.push("}");var c=g(h).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),d=a.slice(d).join(),t=x[d];if(!t)throw console.log("src code is:"),
console.log(c),console.log("compiled values:",e),console.log("linked names:",a),console.log("Keys available:",Object.keys(x)),console.log("Key:",d),console.log('"'+d+'": function('+a.join(", ")+") \n{\n"+c+"\n},"),Error("missing precompiled function with key: "+d);return t.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(M,Z,ma){Z.exports={$0:function(a){var g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D;g=a.attributes;t=a.current;x=a.framebuffer;h=a.gl;e=a.next;
c=a.vao;d=e.blend_color;y=t.blend_color;l=e.blend_equation;F=t.blend_equation;K=e.blend_func;q=t.blend_func;m=e.colorMask;E=t.colorMask;ia=e.depth_range;C=t.depth_range;L=e.polygonOffset_offset;u=t.polygonOffset_offset;J=e.sample_coverage;aa=t.sample_coverage;b=e.scissor_box;n=t.scissor_box;U=e.stencil_func;p=t.stencil_func;W=e.stencil_opBack;B=t.stencil_opBack;z=e.stencil_opFront;Y=t.stencil_opFront;G=e.viewport;D=t.viewport;return{poll:function(){var a,g,f,c,H,la,ld,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,
R,na;t.dirty=!1;g=e.blend_enable;f=e.cull_enable;c=e.depth_enable;H=e.dither;la=e.polygonOffset_enable;ld=e.sample_alpha;X=e.sample_enable;ea=e.scissor_enable;T=e.stencil_enable;S=e.cull_face;N=t.cull_face;r=e.depth_func;P=t.depth_func;Q=e.depth_mask;qa=t.depth_mask;pa=e.frontFace;A=t.frontFace;I=e.lineWidth;ga=t.lineWidth;R=e.stencil_mask;na=t.stencil_mask;a=x.next;a!==x.cur&&(a?h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null),x.cur=a);g!==t.blend_enable&&(g?h.enable(3042):h.disable(3042),
t.blend_enable=g);f!==t.cull_enable&&(f?h.enable(2884):h.disable(2884),t.cull_enable=f);c!==t.depth_enable&&(c?h.enable(2929):h.disable(2929),t.depth_enable=c);H!==t.dither&&(H?h.enable(3024):h.disable(3024),t.dither=H);la!==t.polygonOffset_enable&&(la?h.enable(32823):h.disable(32823),t.polygonOffset_enable=la);ld!==t.sample_alpha&&(ld?h.enable(32926):h.disable(32926),t.sample_alpha=ld);X!==t.sample_enable&&(X?h.enable(32928):h.disable(32928),t.sample_enable=X);ea!==t.scissor_enable&&(ea?h.enable(3089):
h.disable(3089),t.scissor_enable=ea);T!==t.stencil_enable&&(T?h.enable(2960):h.disable(2960),t.stencil_enable=T);if(d[0]!==y[0]||d[1]!==y[1]||d[2]!==y[2]||d[3]!==y[3])h.blendColor(d[0],d[1],d[2],d[3]),y[0]=d[0],y[1]=d[1],y[2]=d[2],y[3]=d[3];if(l[0]!==F[0]||l[1]!==F[1])h.blendEquationSeparate(l[0],l[1]),F[0]=l[0],F[1]=l[1];if(K[0]!==q[0]||K[1]!==q[1]||K[2]!==q[2]||K[3]!==q[3])h.blendFuncSeparate(K[0],K[1],K[2],K[3]),q[0]=K[0],q[1]=K[1],q[2]=K[2],q[3]=K[3];if(m[0]!==E[0]||m[1]!==E[1]||m[2]!==E[2]||
m[3]!==E[3])h.colorMask(m[0],m[1],m[2],m[3]),E[0]=m[0],E[1]=m[1],E[2]=m[2],E[3]=m[3];S!==N&&(h.cullFace(S),t.cull_face=S);r!==P&&(h.depthFunc(r),t.depth_func=r);Q!==qa&&(h.depthMask(Q),t.depth_mask=Q);if(ia[0]!==C[0]||ia[1]!==C[1])h.depthRange(ia[0],ia[1]),C[0]=ia[0],C[1]=ia[1];pa!==A&&(h.frontFace(pa),t.frontFace=pa);I!==ga&&(h.lineWidth(I),t.lineWidth=I);if(L[0]!==u[0]||L[1]!==u[1])h.polygonOffset(L[0],L[1]),u[0]=L[0],u[1]=L[1];if(J[0]!==aa[0]||J[1]!==aa[1])h.sampleCoverage(J[0],J[1]),aa[0]=J[0],
aa[1]=J[1];if(b[0]!==n[0]||b[1]!==n[1]||b[2]!==n[2]||b[3]!==n[3])h.scissor(b[0],b[1],b[2],b[3]),n[0]=b[0],n[1]=b[1],n[2]=b[2],n[3]=b[3];if(U[0]!==p[0]||U[1]!==p[1]||U[2]!==p[2])h.stencilFunc(U[0],U[1],U[2]),p[0]=U[0],p[1]=U[1],p[2]=U[2];R!==na&&(h.stencilMask(R),t.stencil_mask=R);if(W[0]!==B[0]||W[1]!==B[1]||W[2]!==B[2]||W[3]!==B[3])h.stencilOpSeparate(W[0],W[1],W[2],W[3]),B[0]=W[0],B[1]=W[1],B[2]=W[2],B[3]=W[3];if(z[0]!==Y[0]||z[1]!==Y[1]||z[2]!==Y[2]||z[3]!==Y[3])h.stencilOpSeparate(z[0],z[1],z[2],
z[3]),Y[0]=z[0],Y[1]=z[1],Y[2]=z[2],Y[3]=z[3];if(G[0]!==D[0]||G[1]!==D[1]||G[2]!==D[2]||G[3]!==D[3])h.viewport(G[0],G[1],G[2],G[3]),D[0]=G[0],D[1]=G[1],D[2]=G[2],D[3]=G[3]},refresh:function(){var a,V,f,Ea,H,la,ld,X,ea,T,S,N,r,P,Q,qa;t.dirty=!1;V=e.blend_enable;f=e.cull_enable;Ea=e.depth_enable;H=e.dither;la=e.polygonOffset_enable;ld=e.sample_alpha;X=e.sample_enable;ea=e.scissor_enable;T=e.stencil_enable;S=e.cull_face;N=e.depth_func;r=e.depth_mask;P=e.frontFace;Q=e.lineWidth;qa=e.stencil_mask;(a=x.next)?
h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null);x.cur=a;a=g[0];a.buffer?(h.enableVertexAttribArray(0),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(0),h.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=g[1];a.buffer?(h.enableVertexAttribArray(1),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(1),h.vertexAttrib4f(1,
a.x,a.y,a.z,a.w),a.buffer=null);a=g[2];a.buffer?(h.enableVertexAttribArray(2),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(2),h.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=g[3];a.buffer?(h.enableVertexAttribArray(3),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(3),h.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);
a=g[4];a.buffer?(h.enableVertexAttribArray(4),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(4),h.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=g[5];a.buffer?(h.enableVertexAttribArray(5),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(5),h.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=g[6];a.buffer?(h.enableVertexAttribArray(6),
h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(6),h.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=g[7];a.buffer?(h.enableVertexAttribArray(7),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(7),h.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=g[8];a.buffer?(h.enableVertexAttribArray(8),h.bindBuffer(34962,a.buffer.buffer),
h.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(8),h.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=g[9];a.buffer?(h.enableVertexAttribArray(9),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(9),h.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=g[10];a.buffer?(h.enableVertexAttribArray(10),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(10,a.size,
a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(10),h.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=g[11];a.buffer?(h.enableVertexAttribArray(11),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(11),h.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=g[12];a.buffer?(h.enableVertexAttribArray(12),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,
a.offset)):(h.disableVertexAttribArray(12),h.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=g[13];a.buffer?(h.enableVertexAttribArray(13),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(13),h.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=g[14];a.buffer?(h.enableVertexAttribArray(14),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(14),
h.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=g[15];a.buffer?(h.enableVertexAttribArray(15),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(15),h.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.currentVAO=null;c.setVAO(c.targetVAO);V?h.enable(3042):h.disable(3042);t.blend_enable=V;f?h.enable(2884):h.disable(2884);t.cull_enable=f;Ea?h.enable(2929):h.disable(2929);t.depth_enable=Ea;H?h.enable(3024):h.disable(3024);
t.dither=H;la?h.enable(32823):h.disable(32823);t.polygonOffset_enable=la;ld?h.enable(32926):h.disable(32926);t.sample_alpha=ld;X?h.enable(32928):h.disable(32928);t.sample_enable=X;ea?h.enable(3089):h.disable(3089);t.scissor_enable=ea;T?h.enable(2960):h.disable(2960);t.stencil_enable=T;h.blendColor(d[0],d[1],d[2],d[3]);y[0]=d[0];y[1]=d[1];y[2]=d[2];y[3]=d[3];h.blendEquationSeparate(l[0],l[1]);F[0]=l[0];F[1]=l[1];h.blendFuncSeparate(K[0],K[1],K[2],K[3]);q[0]=K[0];q[1]=K[1];q[2]=K[2];q[3]=K[3];h.colorMask(m[0],
m[1],m[2],m[3]);E[0]=m[0];E[1]=m[1];E[2]=m[2];E[3]=m[3];h.cullFace(S);t.cull_face=S;h.depthFunc(N);t.depth_func=N;h.depthMask(r);t.depth_mask=r;h.depthRange(ia[0],ia[1]);C[0]=ia[0];C[1]=ia[1];h.frontFace(P);t.frontFace=P;h.lineWidth(Q);t.lineWidth=Q;h.polygonOffset(L[0],L[1]);u[0]=L[0];u[1]=L[1];h.sampleCoverage(J[0],J[1]);aa[0]=J[0];aa[1]=J[1];h.scissor(b[0],b[1],b[2],b[3]);n[0]=b[0];n[1]=b[1];n[2]=b[2];n[3]=b[3];h.stencilFunc(U[0],U[1],U[2]);p[0]=U[0];p[1]=U[1];p[2]=U[2];h.stencilMask(qa);t.stencil_mask=
qa;h.stencilOpSeparate(W[0],W[1],W[2],W[3]);B[0]=W[0];B[1]=W[1];B[2]=W[2];B[3]=W[3];h.stencilOpSeparate(z[0],z[1],z[2],z[3]);Y[0]=z[0];Y[1]=z[1];Y[2]=z[2];Y[3]=z[3];h.viewport(G[0],G[1],G[2],G[3]);D[0]=G[0];D[1]=G[1];D[2]=G[2];D[3]=G[3]}}},$3:function(a,g,t,x){var h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la;h=a.context;e=a.current;c=a.framebuffer;d=a.gl;y=a.next;l=a.shader;F=a.vao;K=y.blend_color;q=e.blend_color;m=y.blend_equation;E=e.blend_equation;ia=y.blend_func;C=e.blend_func;
L=y.colorMask;u=e.colorMask;J=y.depth_range;aa=e.depth_range;b=y.polygonOffset_offset;n=e.polygonOffset_offset;U=y.sample_coverage;p=e.sample_coverage;W=y.scissor_box;B=e.scissor_box;z=y.stencil_func;Y=e.stencil_func;G=y.stencil_opBack;D=e.stencil_opBack;k=y.stencil_opFront;V=e.stencil_opFront;f=y.viewport;Ea=e.viewport;H={};la={};return{batch:function(a,h){var t,T,S,N,r;t=c.next;t!==c.cur&&(t?d.bindFramebuffer(36160,t.framebuffer):d.bindFramebuffer(36160,null),c.cur=t);if(e.dirty){t=y.dither;t!==
e.dither&&(t?d.enable(3024):d.disable(3024),e.dither=t);t=y.blend_enable;t!==e.blend_enable&&(t?d.enable(3042):d.disable(3042),e.blend_enable=t);t=K[0];S=K[1];N=K[2];r=K[3];if(t!==q[0]||S!==q[1]||N!==q[2]||r!==q[3])d.blendColor(t,S,N,r),q[0]=t,q[1]=S,q[2]=N,q[3]=r;t=m[0];S=m[1];if(t!==E[0]||S!==E[1])d.blendEquationSeparate(t,S),E[0]=t,E[1]=S;t=ia[0];S=ia[1];N=ia[2];r=ia[3];if(t!==C[0]||S!==C[1]||N!==C[2]||r!==C[3])d.blendFuncSeparate(t,S,N,r),C[0]=t,C[1]=S,C[2]=N,C[3]=r;t=y.depth_enable;t!==e.depth_enable&&
(t?d.enable(2929):d.disable(2929),e.depth_enable=t);t=y.depth_func;t!==e.depth_func&&(d.depthFunc(t),e.depth_func=t);t=J[0];S=J[1];if(t!==aa[0]||S!==aa[1])d.depthRange(t,S),aa[0]=t,aa[1]=S;t=y.depth_mask;t!==e.depth_mask&&(d.depthMask(t),e.depth_mask=t);t=L[0];S=L[1];N=L[2];r=L[3];if(t!==u[0]||S!==u[1]||N!==u[2]||r!==u[3])d.colorMask(t,S,N,r),u[0]=t,u[1]=S,u[2]=N,u[3]=r;t=y.cull_enable;t!==e.cull_enable&&(t?d.enable(2884):d.disable(2884),e.cull_enable=t);t=y.cull_face;t!==e.cull_face&&(d.cullFace(t),
e.cull_face=t);t=y.frontFace;t!==e.frontFace&&(d.frontFace(t),e.frontFace=t);t=y.lineWidth;t!==e.lineWidth&&(d.lineWidth(t),e.lineWidth=t);t=y.polygonOffset_enable;t!==e.polygonOffset_enable&&(t?d.enable(32823):d.disable(32823),e.polygonOffset_enable=t);t=b[0];S=b[1];if(t!==n[0]||S!==n[1])d.polygonOffset(t,S),n[0]=t,n[1]=S;t=y.sample_alpha;t!==e.sample_alpha&&(t?d.enable(32926):d.disable(32926),e.sample_alpha=t);t=y.sample_enable;t!==e.sample_enable&&(t?d.enable(32928):d.disable(32928),e.sample_enable=
t);t=U[0];S=U[1];if(t!==p[0]||S!==p[1])d.sampleCoverage(t,S),p[0]=t,p[1]=S;t=y.stencil_enable;t!==e.stencil_enable&&(t?d.enable(2960):d.disable(2960),e.stencil_enable=t);t=y.stencil_mask;t!==e.stencil_mask&&(d.stencilMask(t),e.stencil_mask=t);t=z[0];S=z[1];N=z[2];if(t!==Y[0]||S!==Y[1]||N!==Y[2])d.stencilFunc(t,S,N),Y[0]=t,Y[1]=S,Y[2]=N;t=k[0];S=k[1];N=k[2];r=k[3];if(t!==V[0]||S!==V[1]||N!==V[2]||r!==V[3])d.stencilOpSeparate(t,S,N,r),V[0]=t,V[1]=S,V[2]=N,V[3]=r;t=G[0];S=G[1];N=G[2];r=G[3];if(t!==D[0]||
S!==D[1]||N!==D[2]||r!==D[3])d.stencilOpSeparate(t,S,N,r),D[0]=t,D[1]=S,D[2]=N,D[3]=r;t=y.scissor_enable;t!==e.scissor_enable&&(t?d.enable(3089):d.disable(3089),e.scissor_enable=t);t=W[0];S=W[1];N=W[2];r=W[3];if(t!==B[0]||S!==B[1]||N!==B[2]||r!==B[3])d.scissor(t,S,N,r),B[0]=t,B[1]=S,B[2]=N,B[3]=r;t=f[0];S=f[1];N=f[2];r=f[3];if(t!==Ea[0]||S!==Ea[1]||N!==Ea[2]||r!==Ea[3])d.viewport(t,S,N,r),Ea[0]=t,Ea[1]=S,Ea[2]=N,Ea[3]=r;e.dirty=!1}if(t=e.profile)T=performance.now(),g.count+=h;S=l.program(l.vert,l.frag);
d.useProgram(S.program);F.setVAO(null);N=S.id;(r=la[N])||(r=la[N]=x(S));r.call(this,a,h);F.setVAO(null);t&&(g.cpuTime+=performance.now()-T)},draw:function(a){var h,x,T,S,N;h=c.next;h!==c.cur&&(h?d.bindFramebuffer(36160,h.framebuffer):d.bindFramebuffer(36160,null),c.cur=h);if(e.dirty){h=y.dither;h!==e.dither&&(h?d.enable(3024):d.disable(3024),e.dither=h);h=y.blend_enable;h!==e.blend_enable&&(h?d.enable(3042):d.disable(3042),e.blend_enable=h);h=K[0];T=K[1];S=K[2];N=K[3];if(h!==q[0]||T!==q[1]||S!==q[2]||
N!==q[3])d.blendColor(h,T,S,N),q[0]=h,q[1]=T,q[2]=S,q[3]=N;h=m[0];T=m[1];if(h!==E[0]||T!==E[1])d.blendEquationSeparate(h,T),E[0]=h,E[1]=T;h=ia[0];T=ia[1];S=ia[2];N=ia[3];if(h!==C[0]||T!==C[1]||S!==C[2]||N!==C[3])d.blendFuncSeparate(h,T,S,N),C[0]=h,C[1]=T,C[2]=S,C[3]=N;h=y.depth_enable;h!==e.depth_enable&&(h?d.enable(2929):d.disable(2929),e.depth_enable=h);h=y.depth_func;h!==e.depth_func&&(d.depthFunc(h),e.depth_func=h);h=J[0];T=J[1];if(h!==aa[0]||T!==aa[1])d.depthRange(h,T),aa[0]=h,aa[1]=T;h=y.depth_mask;
h!==e.depth_mask&&(d.depthMask(h),e.depth_mask=h);h=L[0];T=L[1];S=L[2];N=L[3];if(h!==u[0]||T!==u[1]||S!==u[2]||N!==u[3])d.colorMask(h,T,S,N),u[0]=h,u[1]=T,u[2]=S,u[3]=N;h=y.cull_enable;h!==e.cull_enable&&(h?d.enable(2884):d.disable(2884),e.cull_enable=h);h=y.cull_face;h!==e.cull_face&&(d.cullFace(h),e.cull_face=h);h=y.frontFace;h!==e.frontFace&&(d.frontFace(h),e.frontFace=h);h=y.lineWidth;h!==e.lineWidth&&(d.lineWidth(h),e.lineWidth=h);h=y.polygonOffset_enable;h!==e.polygonOffset_enable&&(h?d.enable(32823):
d.disable(32823),e.polygonOffset_enable=h);h=b[0];T=b[1];if(h!==n[0]||T!==n[1])d.polygonOffset(h,T),n[0]=h,n[1]=T;h=y.sample_alpha;h!==e.sample_alpha&&(h?d.enable(32926):d.disable(32926),e.sample_alpha=h);h=y.sample_enable;h!==e.sample_enable&&(h?d.enable(32928):d.disable(32928),e.sample_enable=h);h=U[0];T=U[1];if(h!==p[0]||T!==p[1])d.sampleCoverage(h,T),p[0]=h,p[1]=T;h=y.stencil_enable;h!==e.stencil_enable&&(h?d.enable(2960):d.disable(2960),e.stencil_enable=h);h=y.stencil_mask;h!==e.stencil_mask&&
(d.stencilMask(h),e.stencil_mask=h);h=z[0];T=z[1];S=z[2];if(h!==Y[0]||T!==Y[1]||S!==Y[2])d.stencilFunc(h,T,S),Y[0]=h,Y[1]=T,Y[2]=S;h=k[0];T=k[1];S=k[2];N=k[3];if(h!==V[0]||T!==V[1]||S!==V[2]||N!==V[3])d.stencilOpSeparate(h,T,S,N),V[0]=h,V[1]=T,V[2]=S,V[3]=N;h=G[0];T=G[1];S=G[2];N=G[3];if(h!==D[0]||T!==D[1]||S!==D[2]||N!==D[3])d.stencilOpSeparate(h,T,S,N),D[0]=h,D[1]=T,D[2]=S,D[3]=N;h=y.scissor_enable;h!==e.scissor_enable&&(h?d.enable(3089):d.disable(3089),e.scissor_enable=h);h=W[0];T=W[1];S=W[2];
N=W[3];if(h!==B[0]||T!==B[1]||S!==B[2]||N!==B[3])d.scissor(h,T,S,N),B[0]=h,B[1]=T,B[2]=S,B[3]=N;h=f[0];T=f[1];S=f[2];N=f[3];if(h!==Ea[0]||T!==Ea[1]||S!==Ea[2]||N!==Ea[3])d.viewport(h,T,S,N),Ea[0]=h,Ea[1]=T,Ea[2]=S,Ea[3]=N;e.dirty=!1}if(h=e.profile)x=performance.now(),g.count++;T=l.program(l.vert,l.frag);d.useProgram(T.program);F.setVAO(null);S=T.id;(N=H[S])||(N=H[S]=t(T));N.call(this,a);F.setVAO(null);h&&(g.cpuTime+=performance.now()-x)},scope:function(a,f,d){var k,b;if(k=e.profile)b=performance.now(),
g.count++;f(h,a,d);k&&(g.cpuTime+=performance.now()-b)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la,M,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,
v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa){var ka,ca,ta,fb,Ga,gb,fa,zd,nc,Ha,ac,Tb,Z,Cd,qe,Xd,Be,xe,Rd,pe,ie,Dd,qd,ge,Ad,Ee,$e,Se,Gd,Ce,te,Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za;ka=a.attributes;ca=a.context;ta=a.current;fb=a.draw;Ga=a.elements;gb=a.framebuffer;fa=a.gl;zd=a.next;nc=a.shader;Ha=a.uniforms;ac=a.vao;Tb=zd.blend_color;Z=ta.blend_color;Cd=zd.blend_equation;qe=ta.blend_equation;Xd=zd.blend_func;Be=ta.blend_func;xe=zd.colorMask;
Rd=ta.colorMask;pe=zd.depth_range;ie=ta.depth_range;Dd=zd.polygonOffset_offset;qd=ta.polygonOffset_offset;ge=zd.sample_coverage;Ad=ta.sample_coverage;Ee=zd.scissor_box;$e=ta.scissor_box;Se=zd.stencil_func;Gd=ta.stencil_func;Ce=zd.stencil_opBack;te=ta.stencil_opBack;Nd=zd.stencil_opFront;Kd=ta.stencil_opFront;$d=zd.viewport;nd=ta.viewport;bd={};rd={};Mc=new Float32Array(16);pd=new Float32Array(16);Fc=new Float32Array(16);fd=new Float32Array(16);Rc=new Float32Array(16);Jc=new Float32Array(16);Cb=new Float32Array(16);
Gb=new Float32Array(16);Gc=new Float32Array(16);xb=new Float32Array(16);wc=new Float32Array(16);Db=new Float32Array(16);Kc=new Float32Array(16);kc=new Float32Array(16);Hc=new Float32Array(16);gd=new Float32Array(16);Xc=new Float32Array(16);Dc=new Float32Array(16);dc=new Float32Array(16);Ic=new Float32Array(16);oc=new Float32Array(16);qc=new Float32Array(16);lc=new Float32Array(16);pc=new Float32Array(16);db=new Float32Array(16);zc=new Float32Array(16);yb=new Float32Array(16);ab=new Float32Array(16);
Nb=new Float32Array(16);Ya=new Float32Array(16);ob=new Float32Array(16);Za=new Float32Array(16);return{batch:function(a,f){var k,b,g,n;k=gb.next;k!==gb.cur&&(k?fa.bindFramebuffer(36160,k.framebuffer):fa.bindFramebuffer(36160,null),gb.cur=k);if(ta.dirty){var t,p,B,z,V,G,D,H,J,U,aa,W,Y,Ea,la,Ha,Tb,nc,Ka,Gb,Rc,Cb,Db,Oa,Ee;t=xe[0];p=xe[1];B=xe[2];z=xe[3];if(t!==Rd[0]||p!==Rd[1]||B!==Rd[2]||z!==Rd[3])fa.colorMask(t,p,B,z),Rd[0]=t,Rd[1]=p,Rd[2]=B,Rd[3]=z;V=zd.frontFace;V!==ta.frontFace&&(fa.frontFace(V),
ta.frontFace=V);G=zd.polygonOffset_enable;G!==ta.polygonOffset_enable&&(G?fa.enable(32823):fa.disable(32823),ta.polygonOffset_enable=G);D=Dd[0];H=Dd[1];if(D!==qd[0]||H!==qd[1])fa.polygonOffset(D,H),qd[0]=D,qd[1]=H;J=zd.sample_alpha;J!==ta.sample_alpha&&(J?fa.enable(32926):fa.disable(32926),ta.sample_alpha=J);U=zd.sample_enable;U!==ta.sample_enable&&(U?fa.enable(32928):fa.disable(32928),ta.sample_enable=U);aa=ge[0];W=ge[1];if(aa!==Ad[0]||W!==Ad[1])fa.sampleCoverage(aa,W),Ad[0]=aa,Ad[1]=W;Y=zd.stencil_enable;
Y!==ta.stencil_enable&&(Y?fa.enable(2960):fa.disable(2960),ta.stencil_enable=Y);Ea=zd.stencil_mask;Ea!==ta.stencil_mask&&(fa.stencilMask(Ea),ta.stencil_mask=Ea);la=Se[0];Ha=Se[1];Tb=Se[2];if(la!==Gd[0]||Ha!==Gd[1]||Tb!==Gd[2])fa.stencilFunc(la,Ha,Tb),Gd[0]=la,Gd[1]=Ha,Gd[2]=Tb;nc=Nd[0];Ka=Nd[1];Gb=Nd[2];Rc=Nd[3];if(nc!==Kd[0]||Ka!==Kd[1]||Gb!==Kd[2]||Rc!==Kd[3])fa.stencilOpSeparate(nc,Ka,Gb,Rc),Kd[0]=nc,Kd[1]=Ka,Kd[2]=Gb,Kd[3]=Rc;Cb=Ce[0];Db=Ce[1];Oa=Ce[2];Ee=Ce[3];if(Cb!==te[0]||Db!==te[1]||Oa!==
te[2]||Ee!==te[3])fa.stencilOpSeparate(Cb,Db,Oa,Ee),te[0]=Cb,te[1]=Db,te[2]=Oa,te[3]=Ee}fa.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;fa.disable(3042);ta.blend_enable=!1;fa.blendEquationSeparate(32774,32774);qe[0]=32774;qe[1]=32774;fa.blendFuncSeparate(770,771,1,1);Be[0]=770;Be[1]=771;Be[2]=1;Be[3]=1;fa.enable(2884);ta.cull_enable=!0;fa.cullFace(1029);ta.cull_face=1029;fa.enable(2929);ta.depth_enable=!0;fa.depthFunc(513);ta.depth_func=513;fa.depthMask(!0);ta.depth_mask=!0;fa.depthRange(0,1);
ie[0]=0;ie[1]=1;fa.disable(3024);ta.dither=!1;fa.lineWidth(2);ta.lineWidth=2;fa.enable(3089);ta.scissor_enable=!0;b=ta.profile;ta.profile=!1;fa.useProgram(M.program);var Qa,xb,Jc,La,kc,Va,Fc,Xd,mb,Na,Gc,Pa,ub,vb,Ra,nb,pd,Cd,Hc,$a,Kc,fd,Ta,Mc,Ab,Wa,pe,wc,Xb,Rb,$d,Sb,gd;ac.setVAO(null);Qa=za.location;xb=ka[Qa];xb.buffer||fa.enableVertexAttribArray(Qa);if(xb.type!==x.dtype||4!==xb.size||xb.buffer!==x||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)fa.bindBuffer(34962,x.buffer),fa.vertexAttribPointer(Qa,
4,x.dtype,!1,0,0),xb.type=x.dtype,xb.size=4,xb.buffer=x,xb.normalized=!1,xb.offset=0,xb.stride=0;Jc=Ma.location;La=ka[Jc];La.buffer||fa.enableVertexAttribArray(Jc);if(La.type!==h.dtype||4!==La.size||La.buffer!==h||!1!==La.normalized||0!==La.offset||0!==La.stride)fa.bindBuffer(34962,h.buffer),fa.vertexAttribPointer(Jc,4,h.dtype,!1,0,0),La.type=h.dtype,La.size=4,La.buffer=h,La.normalized=!1,La.offset=0,La.stride=0;kc=Aa.location;Va=ka[kc];Va.buffer||fa.enableVertexAttribArray(kc);if(Va.type!==e.dtype||
4!==Va.size||Va.buffer!==e||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)fa.bindBuffer(34962,e.buffer),fa.vertexAttribPointer(kc,4,e.dtype,!1,0,0),Va.type=e.dtype,Va.size=4,Va.buffer=e,Va.normalized=!1,Va.offset=0,Va.stride=0;Fc=Bb.location;Xd=ka[Fc];Xd.buffer||fa.enableVertexAttribArray(Fc);if(Xd.type!==c.dtype||4!==Xd.size||Xd.buffer!==c||!1!==Xd.normalized||0!==Xd.offset||0!==Xd.stride)fa.bindBuffer(34962,c.buffer),fa.vertexAttribPointer(Fc,4,c.dtype,!1,0,0),Xd.type=c.dtype,Xd.size=4,Xd.buffer=
c,Xd.normalized=!1,Xd.offset=0,Xd.stride=0;mb=Xa.location;Na=ka[mb];Na.buffer||fa.enableVertexAttribArray(mb);if(Na.type!==d.dtype||4!==Na.size||Na.buffer!==d||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)fa.bindBuffer(34962,d.buffer),fa.vertexAttribPointer(mb,4,d.dtype,!1,0,0),Na.type=d.dtype,Na.size=4,Na.buffer=d,Na.normalized=!1,Na.offset=0,Na.stride=0;Gc=v.location;Pa=ka[Gc];Pa.buffer||fa.enableVertexAttribArray(Gc);if(Pa.type!==y.dtype||4!==Pa.size||Pa.buffer!==y||!1!==Pa.normalized||0!==
Pa.offset||0!==Pa.stride)fa.bindBuffer(34962,y.buffer),fa.vertexAttribPointer(Gc,4,y.dtype,!1,0,0),Pa.type=y.dtype,Pa.size=4,Pa.buffer=y,Pa.normalized=!1,Pa.offset=0,Pa.stride=0;ub=w.location;vb=ka[ub];vb.buffer||fa.enableVertexAttribArray(ub);if(vb.type!==l.dtype||4!==vb.size||vb.buffer!==l||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)fa.bindBuffer(34962,l.buffer),fa.vertexAttribPointer(ub,4,l.dtype,!1,0,0),vb.type=l.dtype,vb.size=4,vb.buffer=l,vb.normalized=!1,vb.offset=0,vb.stride=0;Ra=da.location;
nb=ka[Ra];nb.buffer||fa.enableVertexAttribArray(Ra);if(nb.type!==F.dtype||4!==nb.size||nb.buffer!==F||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)fa.bindBuffer(34962,F.buffer),fa.vertexAttribPointer(Ra,4,F.dtype,!1,0,0),nb.type=F.dtype,nb.size=4,nb.buffer=F,nb.normalized=!1,nb.offset=0,nb.stride=0;pd=ua.location;Cd=ka[pd];Cd.buffer||fa.enableVertexAttribArray(pd);if(Cd.type!==K.dtype||4!==Cd.size||Cd.buffer!==K||!1!==Cd.normalized||0!==Cd.offset||0!==Cd.stride)fa.bindBuffer(34962,K.buffer),fa.vertexAttribPointer(pd,
4,K.dtype,!1,0,0),Cd.type=K.dtype,Cd.size=4,Cd.buffer=K,Cd.normalized=!1,Cd.offset=0,Cd.stride=0;Hc=Da.location;$a=ka[Hc];$a.buffer||fa.enableVertexAttribArray(Hc);if($a.type!==q.dtype||4!==$a.size||$a.buffer!==q||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)fa.bindBuffer(34962,q.buffer),fa.vertexAttribPointer(Hc,4,q.dtype,!1,0,0),$a.type=q.dtype,$a.size=4,$a.buffer=q,$a.normalized=!1,$a.offset=0,$a.stride=0;Kc=lb.location;fd=ka[Kc];fd.buffer||fa.enableVertexAttribArray(Kc);if(fd.type!==m.dtype||
4!==fd.size||fd.buffer!==m||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(Kc,4,m.dtype,!1,0,0),fd.type=m.dtype,fd.size=4,fd.buffer=m,fd.normalized=!1,fd.offset=0,fd.stride=0;Ta=Ib.location;Mc=ka[Ta];Mc.buffer||fa.enableVertexAttribArray(Ta);if(Mc.type!==E.dtype||4!==Mc.size||Mc.buffer!==E||!1!==Mc.normalized||0!==Mc.offset||0!==Mc.stride)fa.bindBuffer(34962,E.buffer),fa.vertexAttribPointer(Ta,4,E.dtype,!1,0,0),Mc.type=E.dtype,Mc.size=4,Mc.buffer=
E,Mc.normalized=!1,Mc.offset=0,Mc.stride=0;Ab=ba.location;Wa=ka[Ab];Wa.buffer||fa.enableVertexAttribArray(Ab);if(Wa.type!==ia.dtype||4!==Wa.size||Wa.buffer!==ia||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)fa.bindBuffer(34962,ia.buffer),fa.vertexAttribPointer(Ab,4,ia.dtype,!1,0,0),Wa.type=ia.dtype,Wa.size=4,Wa.buffer=ia,Wa.normalized=!1,Wa.offset=0,Wa.stride=0;pe=O.location;wc=ka[pe];wc.buffer||fa.enableVertexAttribArray(pe);if(wc.type!==C.dtype||4!==wc.size||wc.buffer!==C||!1!==wc.normalized||
0!==wc.offset||0!==wc.stride)fa.bindBuffer(34962,C.buffer),fa.vertexAttribPointer(pe,4,C.dtype,!1,0,0),wc.type=C.dtype,wc.size=4,wc.buffer=C,wc.normalized=!1,wc.offset=0,wc.stride=0;Xb=va.location;Rb=ka[Xb];Rb.buffer||fa.enableVertexAttribArray(Xb);if(Rb.type!==L.dtype||4!==Rb.size||Rb.buffer!==L||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)fa.bindBuffer(34962,L.buffer),fa.vertexAttribPointer(Xb,4,L.dtype,!1,0,0),Rb.type=L.dtype,Rb.size=4,Rb.buffer=L,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;
$d=ea.location;Sb=ka[$d];Sb.buffer||fa.enableVertexAttribArray($d);if(Sb.type!==u.dtype||4!==Sb.size||Sb.buffer!==u||!1!==Sb.normalized||0!==Sb.offset||0!==Sb.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer($d,4,u.dtype,!1,0,0),Sb.type=u.dtype,Sb.size=4,Sb.buffer=u,Sb.normalized=!1,Sb.offset=0,Sb.stride=0;fa.uniform1i(Fa.location,X.bind());(gd=fb.elements)?fa.bindBuffer(34963,gd.buffer.buffer):ac.currentVAO&&(gd=Ga.getElements(ac.currentVAO.elements))&&fa.bindBuffer(34963,gd.buffer.buffer);
for(g=0;g<f;++g){n=a[g];var Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,ma,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee;bd.height=n.viewportHeight;bd.width=n.viewportWidth;bd.x=n.viewportX;bd.y=n.viewportY;Ec=bd.x|0;yd=bd.y|0;Pc="width"in bd?bd.width|0:ca.framebufferWidth-Ec;Yc="height"in bd?bd.height|0:ca.framebufferHeight-yd;ud=ca.viewportWidth;ca.viewportWidth=Pc;mc=ca.viewportHeight;ca.viewportHeight=Yc;fa.viewport(Ec,
yd,Pc,Yc);nd[0]=Ec;nd[1]=yd;nd[2]=Pc;nd[3]=Yc;rd.height=n.scissorHeight;rd.width=n.scissorWidth;rd.x=n.scissorX;rd.y=n.scissorY;vc=rd.x|0;fc=rd.y|0;bb="width"in rd?rd.width|0:ca.framebufferWidth-vc;sc="height"in rd?rd.height|0:ca.framebufferHeight-fc;fa.scissor(vc,fc,bb,sc);$e[0]=vc;$e[1]=fc;$e[2]=bb;$e[3]=sc;Ub=n.dim0A;fa.uniformMatrix4fv(S.location,!1,Array.isArray(Ub)||Ub instanceof Float32Array?Ub:(Xc[0]=Ub[0],Xc[1]=Ub[1],Xc[2]=Ub[2],Xc[3]=Ub[3],Xc[4]=Ub[4],Xc[5]=Ub[5],Xc[6]=Ub[6],Xc[7]=Ub[7],
Xc[8]=Ub[8],Xc[9]=Ub[9],Xc[10]=Ub[10],Xc[11]=Ub[11],Xc[12]=Ub[12],Xc[13]=Ub[13],Xc[14]=Ub[14],Xc[15]=Ub[15],Xc));Yb=n.dim1A;fa.uniformMatrix4fv(Q.location,!1,Array.isArray(Yb)||Yb instanceof Float32Array?Yb:(Dc[0]=Yb[0],Dc[1]=Yb[1],Dc[2]=Yb[2],Dc[3]=Yb[3],Dc[4]=Yb[4],Dc[5]=Yb[5],Dc[6]=Yb[6],Dc[7]=Yb[7],Dc[8]=Yb[8],Dc[9]=Yb[9],Dc[10]=Yb[10],Dc[11]=Yb[11],Dc[12]=Yb[12],Dc[13]=Yb[13],Dc[14]=Yb[14],Dc[15]=Yb[15],Dc));cc=n.dim0B;fa.uniformMatrix4fv(N.location,!1,Array.isArray(cc)||cc instanceof Float32Array?
cc:(dc[0]=cc[0],dc[1]=cc[1],dc[2]=cc[2],dc[3]=cc[3],dc[4]=cc[4],dc[5]=cc[5],dc[6]=cc[6],dc[7]=cc[7],dc[8]=cc[8],dc[9]=cc[9],dc[10]=cc[10],dc[11]=cc[11],dc[12]=cc[12],dc[13]=cc[13],dc[14]=cc[14],dc[15]=cc[15],dc));gc=n.dim1B;fa.uniformMatrix4fv(qa.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Ic[0]=gc[0],Ic[1]=gc[1],Ic[2]=gc[2],Ic[3]=gc[3],Ic[4]=gc[4],Ic[5]=gc[5],Ic[6]=gc[6],Ic[7]=gc[7],Ic[8]=gc[8],Ic[9]=gc[9],Ic[10]=gc[10],Ic[11]=gc[11],Ic[12]=gc[12],Ic[13]=gc[13],Ic[14]=gc[14],Ic[15]=
gc[15],Ic));xc=n.dim0C;fa.uniformMatrix4fv(r.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));Bc=n.dim1C;fa.uniformMatrix4fv(pa.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(qc[0]=Bc[0],qc[1]=Bc[1],qc[2]=Bc[2],qc[3]=Bc[3],qc[4]=Bc[4],qc[5]=Bc[5],qc[6]=Bc[6],qc[7]=
Bc[7],qc[8]=Bc[8],qc[9]=Bc[9],qc[10]=Bc[10],qc[11]=Bc[11],qc[12]=Bc[12],qc[13]=Bc[13],qc[14]=Bc[14],qc[15]=Bc[15],qc));cd=n.dim0D;fa.uniformMatrix4fv(P.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(lc[0]=cd[0],lc[1]=cd[1],lc[2]=cd[2],lc[3]=cd[3],lc[4]=cd[4],lc[5]=cd[5],lc[6]=cd[6],lc[7]=cd[7],lc[8]=cd[8],lc[9]=cd[9],lc[10]=cd[10],lc[11]=cd[11],lc[12]=cd[12],lc[13]=cd[13],lc[14]=cd[14],lc[15]=cd[15],lc));Sc=n.dim1D;fa.uniformMatrix4fv(A.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?
Sc:(pc[0]=Sc[0],pc[1]=Sc[1],pc[2]=Sc[2],pc[3]=Sc[3],pc[4]=Sc[4],pc[5]=Sc[5],pc[6]=Sc[6],pc[7]=Sc[7],pc[8]=Sc[8],pc[9]=Sc[9],pc[10]=Sc[10],pc[11]=Sc[11],pc[12]=Sc[12],pc[13]=Sc[13],pc[14]=Sc[14],pc[15]=Sc[15],pc));Tc=n.loA;fa.uniformMatrix4fv(Ba.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?Tc:(db[0]=Tc[0],db[1]=Tc[1],db[2]=Tc[2],db[3]=Tc[3],db[4]=Tc[4],db[5]=Tc[5],db[6]=Tc[6],db[7]=Tc[7],db[8]=Tc[8],db[9]=Tc[9],db[10]=Tc[10],db[11]=Tc[11],db[12]=Tc[12],db[13]=Tc[13],db[14]=Tc[14],db[15]=
Tc[15],db));Uc=n.hiA;fa.uniformMatrix4fv(ga.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(zc[0]=Uc[0],zc[1]=Uc[1],zc[2]=Uc[2],zc[3]=Uc[3],zc[4]=Uc[4],zc[5]=Uc[5],zc[6]=Uc[6],zc[7]=Uc[7],zc[8]=Uc[8],zc[9]=Uc[9],zc[10]=Uc[10],zc[11]=Uc[11],zc[12]=Uc[12],zc[13]=Uc[13],zc[14]=Uc[14],zc[15]=Uc[15],zc));Zc=n.loB;fa.uniformMatrix4fv(ya.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(yb[0]=Zc[0],yb[1]=Zc[1],yb[2]=Zc[2],yb[3]=Zc[3],yb[4]=Zc[4],yb[5]=Zc[5],yb[6]=Zc[6],yb[7]=Zc[7],
yb[8]=Zc[8],yb[9]=Zc[9],yb[10]=Zc[10],yb[11]=Zc[11],yb[12]=Zc[12],yb[13]=Zc[13],yb[14]=Zc[14],yb[15]=Zc[15],yb));md=n.hiB;fa.uniformMatrix4fv(R.location,!1,Array.isArray(md)||md instanceof Float32Array?md:(ab[0]=md[0],ab[1]=md[1],ab[2]=md[2],ab[3]=md[3],ab[4]=md[4],ab[5]=md[5],ab[6]=md[6],ab[7]=md[7],ab[8]=md[8],ab[9]=md[9],ab[10]=md[10],ab[11]=md[11],ab[12]=md[12],ab[13]=md[13],ab[14]=md[14],ab[15]=md[15],ab));dd=n.loC;fa.uniformMatrix4fv(ha.location,!1,Array.isArray(dd)||dd instanceof Float32Array?
dd:(Nb[0]=dd[0],Nb[1]=dd[1],Nb[2]=dd[2],Nb[3]=dd[3],Nb[4]=dd[4],Nb[5]=dd[5],Nb[6]=dd[6],Nb[7]=dd[7],Nb[8]=dd[8],Nb[9]=dd[9],Nb[10]=dd[10],Nb[11]=dd[11],Nb[12]=dd[12],Nb[13]=dd[13],Nb[14]=dd[14],Nb[15]=dd[15],Nb));$c=n.hiC;fa.uniformMatrix4fv(na.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Ya[0]=$c[0],Ya[1]=$c[1],Ya[2]=$c[2],Ya[3]=$c[3],Ya[4]=$c[4],Ya[5]=$c[5],Ya[6]=$c[6],Ya[7]=$c[7],Ya[8]=$c[8],Ya[9]=$c[9],Ya[10]=$c[10],Ya[11]=$c[11],Ya[12]=$c[12],Ya[13]=$c[13],Ya[14]=$c[14],Ya[15]=
$c[15],Ya));jc=n.loD;fa.uniformMatrix4fv(Ca.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(ob[0]=jc[0],ob[1]=jc[1],ob[2]=jc[2],ob[3]=jc[3],ob[4]=jc[4],ob[5]=jc[5],ob[6]=jc[6],ob[7]=jc[7],ob[8]=jc[8],ob[9]=jc[9],ob[10]=jc[10],ob[11]=jc[11],ob[12]=jc[12],ob[13]=jc[13],ob[14]=jc[14],ob[15]=jc[15],ob));bc=n.hiD;fa.uniformMatrix4fv(ra.location,!1,Array.isArray(bc)||bc instanceof Float32Array?bc:(Za[0]=bc[0],Za[1]=bc[1],Za[2]=bc[2],Za[3]=bc[3],Za[4]=bc[4],Za[5]=bc[5],Za[6]=bc[6],Za[7]=bc[7],
Za[8]=bc[8],Za[9]=bc[9],Za[10]=bc[10],Za[11]=bc[11],Za[12]=bc[12],Za[13]=bc[13],Za[14]=bc[14],Za[15]=bc[15],Za));ad=n.resolution;Wc=ad[0];yc=ad[1];g&&ed===Wc&&id===yc||(ed=Wc,id=yc,fa.uniform2f(sa.location,Wc,yc));Ed=n.viewBoxPos;ye=Ed[0];jd=Ed[1];g&&wd===ye&&ma===jd||(wd=ye,ma=jd,fa.uniform2f(xa.location,ye,jd));Pd=n.viewBoxSize;Yd=Pd[0];ae=Pd[1];g&&de===Yd&&Ld===ae||(de=Yd,Ld=ae,fa.uniform2f(wa.location,Yd,ae));Id=n.maskHeight;g&&od===Id||(od=Id,fa.uniform1f(ja.location,Id));Vc=n.drwLayer;g&&vd===
Vc||(vd=Vc,fa.uniform1f(I.location,Vc));td=n.contextColor;kd=td[0];Bd=td[1];je=td[2];ze=td[3];g&&xd===kd&&Fd===Bd&&le===je&&me===ze||(xd=kd,Fd=Bd,le=je,me=ze,fa.uniform4f(T.location,kd,Bd,je,ze));(ke=n.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);he=ke._texture;fa.uniform1i(oa.location,he.bind());ue=n.offset;if(ee=n.count)gd?fa.drawElements(1,ee,gd.type,ue<<(gd.type-5121>>1)):fa.drawArrays(1,ue,ee),ca.viewportWidth=ud,ca.viewportHeight=mc,he.unbind()}X.unbind();ta.dirty=!0;ac.setVAO(null);
ta.profile=b},draw:function(a){var f,k,b,g,n,p;f=gb.next;f!==gb.cur&&(f?fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),gb.cur=f);if(ta.dirty){f=xe[0];p=xe[1];k=xe[2];b=xe[3];if(f!==Rd[0]||p!==Rd[1]||k!==Rd[2]||b!==Rd[3])fa.colorMask(f,p,k,b),Rd[0]=f,Rd[1]=p,Rd[2]=k,Rd[3]=b;f=zd.frontFace;f!==ta.frontFace&&(fa.frontFace(f),ta.frontFace=f);f=zd.polygonOffset_enable;f!==ta.polygonOffset_enable&&(f?fa.enable(32823):fa.disable(32823),ta.polygonOffset_enable=f);f=Dd[0];p=Dd[1];if(f!==
qd[0]||p!==qd[1])fa.polygonOffset(f,p),qd[0]=f,qd[1]=p;f=zd.sample_alpha;f!==ta.sample_alpha&&(f?fa.enable(32926):fa.disable(32926),ta.sample_alpha=f);f=zd.sample_enable;f!==ta.sample_enable&&(f?fa.enable(32928):fa.disable(32928),ta.sample_enable=f);f=ge[0];p=ge[1];if(f!==Ad[0]||p!==Ad[1])fa.sampleCoverage(f,p),Ad[0]=f,Ad[1]=p;f=zd.stencil_enable;f!==ta.stencil_enable&&(f?fa.enable(2960):fa.disable(2960),ta.stencil_enable=f);f=zd.stencil_mask;f!==ta.stencil_mask&&(fa.stencilMask(f),ta.stencil_mask=
f);f=Se[0];p=Se[1];k=Se[2];if(f!==Gd[0]||p!==Gd[1]||k!==Gd[2])fa.stencilFunc(f,p,k),Gd[0]=f,Gd[1]=p,Gd[2]=k;f=Nd[0];p=Nd[1];k=Nd[2];b=Nd[3];if(f!==Kd[0]||p!==Kd[1]||k!==Kd[2]||b!==Kd[3])fa.stencilOpSeparate(f,p,k,b),Kd[0]=f,Kd[1]=p,Kd[2]=k,Kd[3]=b;f=Ce[0];p=Ce[1];k=Ce[2];b=Ce[3];if(f!==te[0]||p!==te[1]||k!==te[2]||b!==te[3])fa.stencilOpSeparate(f,p,k,b),te[0]=f,te[1]=p,te[2]=k,te[3]=b}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;k=bd.x|0;b=bd.y|0;g="width"in
bd?bd.width|0:ca.framebufferWidth-k;n="height"in bd?bd.height|0:ca.framebufferHeight-b;f=ca.viewportWidth;ca.viewportWidth=g;p=ca.viewportHeight;ca.viewportHeight=n;fa.viewport(k,b,g,n);nd[0]=k;nd[1]=b;nd[2]=g;nd[3]=n;fa.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;fa.disable(3042);ta.blend_enable=!1;fa.blendEquationSeparate(32774,32774);qe[0]=32774;qe[1]=32774;fa.blendFuncSeparate(770,771,1,1);Be[0]=770;Be[1]=771;Be[2]=1;Be[3]=1;fa.enable(2884);ta.cull_enable=!0;fa.cullFace(1029);ta.cull_face=
1029;fa.enable(2929);ta.depth_enable=!0;fa.depthFunc(513);ta.depth_func=513;fa.depthMask(!0);ta.depth_mask=!0;fa.depthRange(0,1);ie[0]=0;ie[1]=1;fa.disable(3024);ta.dither=!1;fa.lineWidth(2);ta.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;k=rd.x|0;b=rd.y|0;g="width"in rd?rd.width|0:ca.framebufferWidth-k;n="height"in rd?rd.height|0:ca.framebufferHeight-b;fa.scissor(k,b,g,n);$e[0]=k;$e[1]=b;$e[2]=g;$e[3]=n;fa.enable(3089);ta.scissor_enable=!0;k=ta.profile;
ta.profile=!1;fa.useProgram(t.program);ac.setVAO(null);b=za.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==x.dtype||4!==g.size||g.buffer!==x||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,x.buffer),fa.vertexAttribPointer(b,4,x.dtype,!1,0,0),g.type=x.dtype,g.size=4,g.buffer=x,g.normalized=!1,g.offset=0,g.stride=0;b=Ma.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==h.dtype||4!==g.size||g.buffer!==h||!1!==g.normalized||0!==g.offset||0!==
g.stride)fa.bindBuffer(34962,h.buffer),fa.vertexAttribPointer(b,4,h.dtype,!1,0,0),g.type=h.dtype,g.size=4,g.buffer=h,g.normalized=!1,g.offset=0,g.stride=0;b=Aa.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==e.dtype||4!==g.size||g.buffer!==e||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,e.buffer),fa.vertexAttribPointer(b,4,e.dtype,!1,0,0),g.type=e.dtype,g.size=4,g.buffer=e,g.normalized=!1,g.offset=0,g.stride=0;b=Bb.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);
if(g.type!==c.dtype||4!==g.size||g.buffer!==c||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,c.buffer),fa.vertexAttribPointer(b,4,c.dtype,!1,0,0),g.type=c.dtype,g.size=4,g.buffer=c,g.normalized=!1,g.offset=0,g.stride=0;b=Xa.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==d.dtype||4!==g.size||g.buffer!==d||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,d.buffer),fa.vertexAttribPointer(b,4,d.dtype,!1,0,0),g.type=d.dtype,g.size=4,g.buffer=d,
g.normalized=!1,g.offset=0,g.stride=0;b=v.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==y.dtype||4!==g.size||g.buffer!==y||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,y.buffer),fa.vertexAttribPointer(b,4,y.dtype,!1,0,0),g.type=y.dtype,g.size=4,g.buffer=y,g.normalized=!1,g.offset=0,g.stride=0;b=w.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==l.dtype||4!==g.size||g.buffer!==l||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,
l.buffer),fa.vertexAttribPointer(b,4,l.dtype,!1,0,0),g.type=l.dtype,g.size=4,g.buffer=l,g.normalized=!1,g.offset=0,g.stride=0;b=da.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==F.dtype||4!==g.size||g.buffer!==F||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,F.buffer),fa.vertexAttribPointer(b,4,F.dtype,!1,0,0),g.type=F.dtype,g.size=4,g.buffer=F,g.normalized=!1,g.offset=0,g.stride=0;b=ua.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==
K.dtype||4!==g.size||g.buffer!==K||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,K.buffer),fa.vertexAttribPointer(b,4,K.dtype,!1,0,0),g.type=K.dtype,g.size=4,g.buffer=K,g.normalized=!1,g.offset=0,g.stride=0;b=Da.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==q.dtype||4!==g.size||g.buffer!==q||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,q.buffer),fa.vertexAttribPointer(b,4,q.dtype,!1,0,0),g.type=q.dtype,g.size=4,g.buffer=q,g.normalized=
!1,g.offset=0,g.stride=0;b=lb.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==m.dtype||4!==g.size||g.buffer!==m||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(b,4,m.dtype,!1,0,0),g.type=m.dtype,g.size=4,g.buffer=m,g.normalized=!1,g.offset=0,g.stride=0;b=Ib.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==E.dtype||4!==g.size||g.buffer!==E||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,
E.buffer),fa.vertexAttribPointer(b,4,E.dtype,!1,0,0),g.type=E.dtype,g.size=4,g.buffer=E,g.normalized=!1,g.offset=0,g.stride=0;b=ba.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==ia.dtype||4!==g.size||g.buffer!==ia||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,ia.buffer),fa.vertexAttribPointer(b,4,ia.dtype,!1,0,0),g.type=ia.dtype,g.size=4,g.buffer=ia,g.normalized=!1,g.offset=0,g.stride=0;b=O.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==
C.dtype||4!==g.size||g.buffer!==C||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,C.buffer),fa.vertexAttribPointer(b,4,C.dtype,!1,0,0),g.type=C.dtype,g.size=4,g.buffer=C,g.normalized=!1,g.offset=0,g.stride=0;b=va.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==L.dtype||4!==g.size||g.buffer!==L||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,L.buffer),fa.vertexAttribPointer(b,4,L.dtype,!1,0,0),g.type=L.dtype,g.size=4,g.buffer=L,g.normalized=
!1,g.offset=0,g.stride=0;b=ea.location;g=ka[b];g.buffer||fa.enableVertexAttribArray(b);if(g.type!==u.dtype||4!==g.size||g.buffer!==u||!1!==g.normalized||0!==g.offset||0!==g.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(b,4,u.dtype,!1,0,0),g.type=u.dtype,g.size=4,g.buffer=u,g.normalized=!1,g.offset=0,g.stride=0;b=a.dim0A;fa.uniformMatrix4fv(S.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Mc[0]=b[0],Mc[1]=b[1],Mc[2]=b[2],Mc[3]=b[3],Mc[4]=b[4],Mc[5]=b[5],Mc[6]=b[6],Mc[7]=b[7],
Mc[8]=b[8],Mc[9]=b[9],Mc[10]=b[10],Mc[11]=b[11],Mc[12]=b[12],Mc[13]=b[13],Mc[14]=b[14],Mc[15]=b[15],Mc));b=a.dim1A;fa.uniformMatrix4fv(Q.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(pd[0]=b[0],pd[1]=b[1],pd[2]=b[2],pd[3]=b[3],pd[4]=b[4],pd[5]=b[5],pd[6]=b[6],pd[7]=b[7],pd[8]=b[8],pd[9]=b[9],pd[10]=b[10],pd[11]=b[11],pd[12]=b[12],pd[13]=b[13],pd[14]=b[14],pd[15]=b[15],pd));b=a.dim0B;fa.uniformMatrix4fv(N.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Fc[0]=b[0],Fc[1]=b[1],
Fc[2]=b[2],Fc[3]=b[3],Fc[4]=b[4],Fc[5]=b[5],Fc[6]=b[6],Fc[7]=b[7],Fc[8]=b[8],Fc[9]=b[9],Fc[10]=b[10],Fc[11]=b[11],Fc[12]=b[12],Fc[13]=b[13],Fc[14]=b[14],Fc[15]=b[15],Fc));b=a.dim1B;fa.uniformMatrix4fv(qa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(fd[0]=b[0],fd[1]=b[1],fd[2]=b[2],fd[3]=b[3],fd[4]=b[4],fd[5]=b[5],fd[6]=b[6],fd[7]=b[7],fd[8]=b[8],fd[9]=b[9],fd[10]=b[10],fd[11]=b[11],fd[12]=b[12],fd[13]=b[13],fd[14]=b[14],fd[15]=b[15],fd));b=a.dim0C;fa.uniformMatrix4fv(r.location,!1,Array.isArray(b)||
b instanceof Float32Array?b:(Rc[0]=b[0],Rc[1]=b[1],Rc[2]=b[2],Rc[3]=b[3],Rc[4]=b[4],Rc[5]=b[5],Rc[6]=b[6],Rc[7]=b[7],Rc[8]=b[8],Rc[9]=b[9],Rc[10]=b[10],Rc[11]=b[11],Rc[12]=b[12],Rc[13]=b[13],Rc[14]=b[14],Rc[15]=b[15],Rc));b=a.dim1C;fa.uniformMatrix4fv(pa.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Jc[0]=b[0],Jc[1]=b[1],Jc[2]=b[2],Jc[3]=b[3],Jc[4]=b[4],Jc[5]=b[5],Jc[6]=b[6],Jc[7]=b[7],Jc[8]=b[8],Jc[9]=b[9],Jc[10]=b[10],Jc[11]=b[11],Jc[12]=b[12],Jc[13]=b[13],Jc[14]=b[14],Jc[15]=b[15],
Jc));b=a.dim0D;fa.uniformMatrix4fv(P.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Cb[0]=b[0],Cb[1]=b[1],Cb[2]=b[2],Cb[3]=b[3],Cb[4]=b[4],Cb[5]=b[5],Cb[6]=b[6],Cb[7]=b[7],Cb[8]=b[8],Cb[9]=b[9],Cb[10]=b[10],Cb[11]=b[11],Cb[12]=b[12],Cb[13]=b[13],Cb[14]=b[14],Cb[15]=b[15],Cb));b=a.dim1D;fa.uniformMatrix4fv(A.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Gb[0]=b[0],Gb[1]=b[1],Gb[2]=b[2],Gb[3]=b[3],Gb[4]=b[4],Gb[5]=b[5],Gb[6]=b[6],Gb[7]=b[7],Gb[8]=b[8],Gb[9]=b[9],Gb[10]=b[10],
Gb[11]=b[11],Gb[12]=b[12],Gb[13]=b[13],Gb[14]=b[14],Gb[15]=b[15],Gb));b=a.loA;fa.uniformMatrix4fv(Ba.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Gc[0]=b[0],Gc[1]=b[1],Gc[2]=b[2],Gc[3]=b[3],Gc[4]=b[4],Gc[5]=b[5],Gc[6]=b[6],Gc[7]=b[7],Gc[8]=b[8],Gc[9]=b[9],Gc[10]=b[10],Gc[11]=b[11],Gc[12]=b[12],Gc[13]=b[13],Gc[14]=b[14],Gc[15]=b[15],Gc));b=a.hiA;fa.uniformMatrix4fv(ga.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(xb[0]=b[0],xb[1]=b[1],xb[2]=b[2],xb[3]=b[3],xb[4]=b[4],xb[5]=
b[5],xb[6]=b[6],xb[7]=b[7],xb[8]=b[8],xb[9]=b[9],xb[10]=b[10],xb[11]=b[11],xb[12]=b[12],xb[13]=b[13],xb[14]=b[14],xb[15]=b[15],xb));b=a.loB;fa.uniformMatrix4fv(ya.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(wc[0]=b[0],wc[1]=b[1],wc[2]=b[2],wc[3]=b[3],wc[4]=b[4],wc[5]=b[5],wc[6]=b[6],wc[7]=b[7],wc[8]=b[8],wc[9]=b[9],wc[10]=b[10],wc[11]=b[11],wc[12]=b[12],wc[13]=b[13],wc[14]=b[14],wc[15]=b[15],wc));b=a.hiB;fa.uniformMatrix4fv(R.location,!1,Array.isArray(b)||b instanceof Float32Array?
b:(Db[0]=b[0],Db[1]=b[1],Db[2]=b[2],Db[3]=b[3],Db[4]=b[4],Db[5]=b[5],Db[6]=b[6],Db[7]=b[7],Db[8]=b[8],Db[9]=b[9],Db[10]=b[10],Db[11]=b[11],Db[12]=b[12],Db[13]=b[13],Db[14]=b[14],Db[15]=b[15],Db));b=a.loC;fa.uniformMatrix4fv(ha.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Kc[0]=b[0],Kc[1]=b[1],Kc[2]=b[2],Kc[3]=b[3],Kc[4]=b[4],Kc[5]=b[5],Kc[6]=b[6],Kc[7]=b[7],Kc[8]=b[8],Kc[9]=b[9],Kc[10]=b[10],Kc[11]=b[11],Kc[12]=b[12],Kc[13]=b[13],Kc[14]=b[14],Kc[15]=b[15],Kc));b=a.hiC;fa.uniformMatrix4fv(na.location,
!1,Array.isArray(b)||b instanceof Float32Array?b:(kc[0]=b[0],kc[1]=b[1],kc[2]=b[2],kc[3]=b[3],kc[4]=b[4],kc[5]=b[5],kc[6]=b[6],kc[7]=b[7],kc[8]=b[8],kc[9]=b[9],kc[10]=b[10],kc[11]=b[11],kc[12]=b[12],kc[13]=b[13],kc[14]=b[14],kc[15]=b[15],kc));b=a.loD;fa.uniformMatrix4fv(Ca.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(Hc[0]=b[0],Hc[1]=b[1],Hc[2]=b[2],Hc[3]=b[3],Hc[4]=b[4],Hc[5]=b[5],Hc[6]=b[6],Hc[7]=b[7],Hc[8]=b[8],Hc[9]=b[9],Hc[10]=b[10],Hc[11]=b[11],Hc[12]=b[12],Hc[13]=b[13],Hc[14]=
b[14],Hc[15]=b[15],Hc));b=a.hiD;fa.uniformMatrix4fv(ra.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(gd[0]=b[0],gd[1]=b[1],gd[2]=b[2],gd[3]=b[3],gd[4]=b[4],gd[5]=b[5],gd[6]=b[6],gd[7]=b[7],gd[8]=b[8],gd[9]=b[9],gd[10]=b[10],gd[11]=b[11],gd[12]=b[12],gd[13]=b[13],gd[14]=b[14],gd[15]=b[15],gd));b=a.resolution;fa.uniform2f(sa.location,b[0],b[1]);b=a.viewBoxPos;fa.uniform2f(xa.location,b[0],b[1]);b=a.viewBoxSize;fa.uniform2f(wa.location,b[0],b[1]);fa.uniform1f(ja.location,a.maskHeight);fa.uniform1f(I.location,
a.drwLayer);b=a.contextColor;fa.uniform4f(T.location,b[0],b[1],b[2],b[3]);(b=a.maskTexture)&&"framebuffer"===b._reglType&&(b=b.color[0]);b=b._texture;fa.uniform1i(oa.location,b.bind());fa.uniform1i(Fa.location,J.bind());(g=fb.elements)?fa.bindBuffer(34963,g.buffer.buffer):ac.currentVAO&&(g=Ga.getElements(ac.currentVAO.elements))&&fa.bindBuffer(34963,g.buffer.buffer);n=a.offset;if(a=a.count)g?fa.drawElements(1,a,g.type,n<<(g.type-5121>>1)):fa.drawArrays(1,n,a),ta.dirty=!0,ac.setVAO(null),ca.viewportWidth=
f,ca.viewportHeight=p,ta.profile=k,b.unbind(),J.unbind()},scope:function(a,g,v){var r,A,w,t,O,da,Aa,va,Ma,Fa,I,S,R,Bb,N,ha,sa,ba,T,ka,Q,ua,P,ga,xa,J,wa,fa,qa,ya,ra,ja,X,Xa,ea,za,Da,oa,Ca,pa,na,Ib,Ba,lb,Ga,M,ld,gb,db,dc,Gb,Rc,Cb,pc,oc,xb,Db,Ad,Ce,lc,ac,Nd,qc,ab,Ya,Za,Ic,Se,Jc,kc,ob,Fc,Z,te,fd,Gd,Mc,Gc,yb,wc,qe,pd,Hc,Dc,Kc,Rd,nd,Kd,Nb,Dd,zc,$e,Xc,ff,gd,ge,xe,Be,qd,ie,ma,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,
Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;
r=bd.x|0;A=bd.y|0;w="width"in bd?bd.width|0:ca.framebufferWidth-r;t="height"in bd?bd.height|0:ca.framebufferHeight-A;O=ca.viewportWidth;ca.viewportWidth=w;da=ca.viewportHeight;ca.viewportHeight=t;Aa=$d[0];$d[0]=r;va=$d[1];$d[1]=A;Ma=$d[2];$d[2]=w;Fa=$d[3];$d[3]=t;I=Tb[0];Tb[0]=0;S=Tb[1];Tb[1]=0;R=Tb[2];Tb[2]=0;Bb=Tb[3];Tb[3]=0;N=zd.blend_enable;zd.blend_enable=!1;ha=Cd[0];Cd[0]=32774;sa=Cd[1];Cd[1]=32774;ba=Xd[0];Xd[0]=770;T=Xd[1];Xd[1]=771;ka=Xd[2];Xd[2]=1;Q=Xd[3];Xd[3]=1;ua=zd.cull_enable;zd.cull_enable=
!0;P=zd.cull_face;zd.cull_face=1029;ga=zd.depth_enable;zd.depth_enable=!0;xa=zd.depth_func;zd.depth_func=513;J=zd.depth_mask;zd.depth_mask=!0;wa=pe[0];pe[0]=0;fa=pe[1];pe[1]=1;qa=zd.dither;zd.dither=!1;ya=zd.lineWidth;zd.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;ra=rd.x|0;ja=rd.y|0;X="width"in rd?rd.width|0:ca.framebufferWidth-ra;Xa="height"in rd?rd.height|0:ca.framebufferHeight-ja;ea=Ee[0];Ee[0]=ra;za=Ee[1];Ee[1]=ja;Da=Ee[2];Ee[2]=X;oa=Ee[3];Ee[3]=
Xa;Ca=zd.scissor_enable;zd.scissor_enable=!0;pa=ta.profile;ta.profile=!1;na=a.offset;Ib=fb.offset;fb.offset=na;Ba=a.count;lb=fb.count;fb.count=Ba;Ga=fb.primitive;fb.primitive=1;M=a.contextColor;ld=Ha[24];Ha[24]=M;gb=a.dim0A;db=Ha[3];Ha[3]=gb;dc=a.dim0B;Gb=Ha[5];Ha[5]=dc;Rc=a.dim0C;Cb=Ha[7];Ha[7]=Rc;pc=a.dim0D;oc=Ha[9];Ha[9]=pc;xb=a.dim1A;Db=Ha[4];Ha[4]=xb;Ad=a.dim1B;Ce=Ha[6];Ha[6]=Ad;lc=a.dim1C;ac=Ha[8];Ha[8]=lc;Nd=a.dim1D;qc=Ha[10];Ha[10]=Nd;ab=a.drwLayer;Ya=Ha[23];Ha[23]=ab;Za=a.hiA;Ic=Ha[12];Ha[12]=
Za;Se=a.hiB;Jc=Ha[14];Ha[14]=Se;kc=a.hiC;ob=Ha[16];Ha[16]=kc;Fc=a.hiD;Z=Ha[18];Ha[18]=Fc;te=a.loA;fd=Ha[11];Ha[11]=te;Gd=a.loB;Mc=Ha[13];Ha[13]=Gd;Gc=a.loC;yb=Ha[15];Ha[15]=Gc;wc=a.loD;qe=Ha[17];Ha[17]=wc;pd=a.maskHeight;Hc=Ha[22];Ha[22]=pd;Dc=a.maskTexture;Kc=Ha[25];Ha[25]=Dc;Rd=Ha[26];Ha[26]=aa;nd=a.resolution;Kd=Ha[19];Ha[19]=nd;Nb=a.viewBoxPos;Dd=Ha[20];Ha[20]=Nb;zc=a.viewBoxSize;$e=Ha[21];Ha[21]=zc;Xc=b.buffer;b.buffer=u;ff=b.divisor;b.divisor=0;gd=b.normalized;b.normalized=!1;ge=b.offset;b.offset=
0;xe=b.size;b.size=0;Be=b.state;b.state=1;qd=b.stride;b.stride=0;ie=b.type;b.type=u.dtype;ma=b.w;b.w=0;Ld=b.x;b.x=0;Id=b.y;b.y=0;od=b.z;b.z=0;Vc=n.buffer;n.buffer=x;vd=n.divisor;n.divisor=0;td=n.normalized;n.normalized=!1;kd=n.offset;n.offset=0;xd=n.size;n.size=0;Bd=n.state;n.state=1;Fd=n.stride;n.stride=0;je=n.type;n.type=x.dtype;le=n.w;n.w=0;ze=n.x;n.x=0;me=n.y;n.y=0;ke=n.z;n.z=0;he=U.buffer;U.buffer=h;ue=U.divisor;U.divisor=0;ee=U.normalized;U.normalized=!1;ne=U.offset;U.offset=0;Qc=U.size;U.size=
0;hd=U.state;U.state=1;ve=U.stride;U.stride=0;re=U.type;U.type=h.dtype;Md=U.w;U.w=0;Qd=U.x;U.x=0;Td=U.y;U.y=0;Ud=U.z;U.z=0;oe=p.buffer;p.buffer=e;Ae=p.divisor;p.divisor=0;De=p.normalized;p.normalized=!1;se=p.offset;p.offset=0;Te=p.size;p.size=0;Ue=p.state;p.state=1;Pe=p.stride;p.stride=0;we=p.type;p.type=e.dtype;He=p.w;p.w=0;Ke=p.x;p.x=0;Le=p.y;p.y=0;Me=p.z;p.z=0;Ie=W.buffer;W.buffer=c;Od=W.divisor;W.divisor=0;Zd=W.normalized;W.normalized=!1;ce=W.offset;W.offset=0;fe=W.size;W.size=0;Ne=W.state;W.state=
1;Jd=W.stride;W.stride=0;Vd=W.type;W.type=c.dtype;Fe=W.w;W.w=0;Oe=W.x;W.x=0;cf=W.y;W.y=0;bf=W.z;W.z=0;Ve=B.buffer;B.buffer=d;Qe=B.divisor;B.divisor=0;af=B.normalized;B.normalized=!1;Ze=B.offset;B.offset=0;We=B.size;B.size=0;Xe=B.state;B.state=1;Wd=B.stride;B.stride=0;be=B.type;B.type=d.dtype;Ye=B.w;B.w=0;kf=B.x;B.x=0;of=B.y;B.y=0;gf=B.z;B.z=0;lf=z.buffer;z.buffer=y;mf=z.divisor;z.divisor=0;nf=z.normalized;z.normalized=!1;sf=z.offset;z.offset=0;pf=z.size;z.size=0;tf=z.state;z.state=1;Cf=z.stride;z.stride=
0;Df=z.type;z.type=y.dtype;Re=z.w;z.w=0;Ge=z.x;z.x=0;qf=z.y;z.y=0;rf=z.z;z.z=0;Ef=Y.buffer;Y.buffer=l;Hf=Y.divisor;Y.divisor=0;Bf=Y.normalized;Y.normalized=!1;Ff=Y.offset;Y.offset=0;Gf=Y.size;Y.size=0;xf=Y.state;Y.state=1;yf=Y.stride;Y.stride=0;wf=Y.type;Y.type=l.dtype;zf=Y.w;Y.w=0;Af=Y.x;Y.x=0;Jf=Y.y;Y.y=0;Kf=Y.z;Y.z=0;Lf=G.buffer;G.buffer=F;Mf=G.divisor;G.divisor=0;uf=G.normalized;G.normalized=!1;Rf=G.offset;G.offset=0;If=G.size;G.size=0;vf=G.state;G.state=1;dg=G.stride;G.stride=0;Sf=G.type;G.type=
F.dtype;Tf=G.w;G.w=0;qg=G.x;G.x=0;hf=G.y;G.y=0;df=G.z;G.z=0;Nf=D.buffer;D.buffer=K;Of=D.divisor;D.divisor=0;eg=D.normalized;D.normalized=!1;fg=D.offset;D.offset=0;gg=D.size;D.size=0;hg=D.state;D.state=1;ig=D.stride;D.stride=0;Wf=D.type;D.type=K.dtype;Uf=D.w;D.w=0;Xf=D.x;D.x=0;Yf=D.y;D.y=0;Zf=D.z;D.z=0;jg=k.buffer;k.buffer=q;rg=k.divisor;k.divisor=0;sg=k.normalized;k.normalized=!1;tg=k.offset;k.offset=0;ug=k.size;k.size=0;vg=k.state;k.state=1;wg=k.stride;k.stride=0;xg=k.type;k.type=q.dtype;yg=k.w;
k.w=0;zg=k.x;k.x=0;Ag=k.y;k.y=0;Bg=k.z;k.z=0;jf=V.buffer;V.buffer=m;ef=V.divisor;V.divisor=0;Pf=V.normalized;V.normalized=!1;Qf=V.offset;V.offset=0;kg=V.size;V.size=0;lg=V.state;V.state=1;mg=V.stride;V.stride=0;ng=V.type;V.type=m.dtype;og=V.w;V.w=0;$f=V.x;V.x=0;Vf=V.y;V.y=0;ag=V.z;V.z=0;bg=f.buffer;f.buffer=E;cg=f.divisor;f.divisor=0;pg=f.normalized;f.normalized=!1;Cg=f.offset;f.offset=0;Dg=f.size;f.size=0;Eg=f.state;f.state=1;Fg=f.stride;f.stride=0;Gg=f.type;f.type=E.dtype;Hg=f.w;f.w=0;Ig=f.x;f.x=
0;Jg=f.y;f.y=0;Kg=f.z;f.z=0;Lg=Ea.buffer;Ea.buffer=ia;Mg=Ea.divisor;Ea.divisor=0;Ng=Ea.normalized;Ea.normalized=!1;Og=Ea.offset;Ea.offset=0;Pg=Ea.size;Ea.size=0;Qg=Ea.state;Ea.state=1;Rg=Ea.stride;Ea.stride=0;Sg=Ea.type;Ea.type=ia.dtype;Tg=Ea.w;Ea.w=0;Ug=Ea.x;Ea.x=0;Vg=Ea.y;Ea.y=0;Wg=Ea.z;Ea.z=0;Xg=H.buffer;H.buffer=C;Yg=H.divisor;H.divisor=0;Zg=H.normalized;H.normalized=!1;$g=H.offset;H.offset=0;ah=H.size;H.size=0;bh=H.state;H.state=1;ch=H.stride;H.stride=0;dh=H.type;H.type=C.dtype;eh=H.w;H.w=0;
fh=H.x;H.x=0;gh=H.y;H.y=0;hh=H.z;H.z=0;ih=la.buffer;la.buffer=L;jh=la.divisor;la.divisor=0;kh=la.normalized;la.normalized=!1;lh=la.offset;la.offset=0;mh=la.size;la.size=0;nh=la.state;la.state=1;oh=la.stride;la.stride=0;ph=la.type;la.type=L.dtype;qh=la.w;la.w=0;rh=la.x;la.x=0;sh=la.y;la.y=0;th=la.z;la.z=0;uh=nc.vert;nc.vert=2;vh=nc.frag;nc.frag=1;ta.dirty=!0;g(ca,a,v);ca.viewportWidth=O;ca.viewportHeight=da;$d[0]=Aa;$d[1]=va;$d[2]=Ma;$d[3]=Fa;Tb[0]=I;Tb[1]=S;Tb[2]=R;Tb[3]=Bb;zd.blend_enable=N;Cd[0]=
ha;Cd[1]=sa;Xd[0]=ba;Xd[1]=T;Xd[2]=ka;Xd[3]=Q;zd.cull_enable=ua;zd.cull_face=P;zd.depth_enable=ga;zd.depth_func=xa;zd.depth_mask=J;pe[0]=wa;pe[1]=fa;zd.dither=qa;zd.lineWidth=ya;Ee[0]=ea;Ee[1]=za;Ee[2]=Da;Ee[3]=oa;zd.scissor_enable=Ca;ta.profile=pa;fb.offset=Ib;fb.count=lb;fb.primitive=Ga;Ha[24]=ld;Ha[3]=db;Ha[5]=Gb;Ha[7]=Cb;Ha[9]=oc;Ha[4]=Db;Ha[6]=Ce;Ha[8]=ac;Ha[10]=qc;Ha[23]=Ya;Ha[12]=Ic;Ha[14]=Jc;Ha[16]=ob;Ha[18]=Z;Ha[11]=fd;Ha[13]=Mc;Ha[15]=yb;Ha[17]=qe;Ha[22]=Hc;Ha[25]=Kc;Ha[26]=Rd;Ha[19]=Kd;
Ha[20]=Dd;Ha[21]=$e;b.buffer=Xc;b.divisor=ff;b.normalized=gd;b.offset=ge;b.size=xe;b.state=Be;b.stride=qd;b.type=ie;b.w=ma;b.x=Ld;b.y=Id;b.z=od;n.buffer=Vc;n.divisor=vd;n.normalized=td;n.offset=kd;n.size=xd;n.state=Bd;n.stride=Fd;n.type=je;n.w=le;n.x=ze;n.y=me;n.z=ke;U.buffer=he;U.divisor=ue;U.normalized=ee;U.offset=ne;U.size=Qc;U.state=hd;U.stride=ve;U.type=re;U.w=Md;U.x=Qd;U.y=Td;U.z=Ud;p.buffer=oe;p.divisor=Ae;p.normalized=De;p.offset=se;p.size=Te;p.state=Ue;p.stride=Pe;p.type=we;p.w=He;p.x=Ke;
p.y=Le;p.z=Me;W.buffer=Ie;W.divisor=Od;W.normalized=Zd;W.offset=ce;W.size=fe;W.state=Ne;W.stride=Jd;W.type=Vd;W.w=Fe;W.x=Oe;W.y=cf;W.z=bf;B.buffer=Ve;B.divisor=Qe;B.normalized=af;B.offset=Ze;B.size=We;B.state=Xe;B.stride=Wd;B.type=be;B.w=Ye;B.x=kf;B.y=of;B.z=gf;z.buffer=lf;z.divisor=mf;z.normalized=nf;z.offset=sf;z.size=pf;z.state=tf;z.stride=Cf;z.type=Df;z.w=Re;z.x=Ge;z.y=qf;z.z=rf;Y.buffer=Ef;Y.divisor=Hf;Y.normalized=Bf;Y.offset=Ff;Y.size=Gf;Y.state=xf;Y.stride=yf;Y.type=wf;Y.w=zf;Y.x=Af;Y.y=Jf;
Y.z=Kf;G.buffer=Lf;G.divisor=Mf;G.normalized=uf;G.offset=Rf;G.size=If;G.state=vf;G.stride=dg;G.type=Sf;G.w=Tf;G.x=qg;G.y=hf;G.z=df;D.buffer=Nf;D.divisor=Of;D.normalized=eg;D.offset=fg;D.size=gg;D.state=hg;D.stride=ig;D.type=Wf;D.w=Uf;D.x=Xf;D.y=Yf;D.z=Zf;k.buffer=jg;k.divisor=rg;k.normalized=sg;k.offset=tg;k.size=ug;k.state=vg;k.stride=wg;k.type=xg;k.w=yg;k.x=zg;k.y=Ag;k.z=Bg;V.buffer=jf;V.divisor=ef;V.normalized=Pf;V.offset=Qf;V.size=kg;V.state=lg;V.stride=mg;V.type=ng;V.w=og;V.x=$f;V.y=Vf;V.z=ag;
f.buffer=bg;f.divisor=cg;f.normalized=pg;f.offset=Cg;f.size=Dg;f.state=Eg;f.stride=Fg;f.type=Gg;f.w=Hg;f.x=Ig;f.y=Jg;f.z=Kg;Ea.buffer=Lg;Ea.divisor=Mg;Ea.normalized=Ng;Ea.offset=Og;Ea.size=Pg;Ea.state=Qg;Ea.stride=Rg;Ea.type=Sg;Ea.w=Tg;Ea.x=Ug;Ea.y=Vg;Ea.z=Wg;H.buffer=Xg;H.divisor=Yg;H.normalized=Zg;H.offset=$g;H.size=ah;H.state=bh;H.stride=ch;H.type=dh;H.w=eh;H.x=fh;H.y=gh;H.z=hh;la.buffer=ih;la.divisor=jh;la.normalized=kh;la.offset=lh;la.size=mh;la.state=nh;la.stride=oh;la.type=ph;la.w=qh;la.x=
rh;la.y=sh;la.z=th;nc.vert=uh;nc.frag=vh;ta.dirty=!0}}},$1:function(a,g){var t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k;t=a.attributes;x=a.current;h=a.framebuffer;e=a.gl;c=a.next;d=a.vao;y=c.blend_color;l=x.blend_color;F=c.blend_equation;K=x.blend_equation;q=c.blend_func;m=x.blend_func;E=c.colorMask;ia=x.colorMask;C=c.depth_range;L=x.depth_range;u=c.polygonOffset_offset;J=x.polygonOffset_offset;aa=c.sample_coverage;b=x.sample_coverage;n=c.scissor_box;U=x.scissor_box;p=c.stencil_func;
W=x.stencil_func;B=c.stencil_opBack;z=x.stencil_opBack;Y=c.stencil_opFront;G=x.stencil_opFront;D=c.viewport;k=x.viewport;return{poll:function(){var a,f,d,g,t,M,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra;x.dirty=!1;f=c.blend_enable;d=c.cull_enable;g=c.depth_enable;t=c.dither;M=c.polygonOffset_enable;X=c.sample_alpha;ea=c.sample_enable;T=c.scissor_enable;S=c.stencil_enable;N=c.cull_face;r=x.cull_face;P=c.depth_func;Q=x.depth_func;qa=c.depth_mask;pa=x.depth_mask;A=c.frontFace;I=x.frontFace;ga=c.lineWidth;
R=x.lineWidth;na=c.stencil_mask;ra=x.stencil_mask;a=h.next;a!==h.cur&&(a?e.bindFramebuffer(36160,a.framebuffer):e.bindFramebuffer(36160,null),h.cur=a);f!==x.blend_enable&&(f?e.enable(3042):e.disable(3042),x.blend_enable=f);d!==x.cull_enable&&(d?e.enable(2884):e.disable(2884),x.cull_enable=d);g!==x.depth_enable&&(g?e.enable(2929):e.disable(2929),x.depth_enable=g);t!==x.dither&&(t?e.enable(3024):e.disable(3024),x.dither=t);M!==x.polygonOffset_enable&&(M?e.enable(32823):e.disable(32823),x.polygonOffset_enable=
M);X!==x.sample_alpha&&(X?e.enable(32926):e.disable(32926),x.sample_alpha=X);ea!==x.sample_enable&&(ea?e.enable(32928):e.disable(32928),x.sample_enable=ea);T!==x.scissor_enable&&(T?e.enable(3089):e.disable(3089),x.scissor_enable=T);S!==x.stencil_enable&&(S?e.enable(2960):e.disable(2960),x.stencil_enable=S);if(y[0]!==l[0]||y[1]!==l[1]||y[2]!==l[2]||y[3]!==l[3])e.blendColor(y[0],y[1],y[2],y[3]),l[0]=y[0],l[1]=y[1],l[2]=y[2],l[3]=y[3];if(F[0]!==K[0]||F[1]!==K[1])e.blendEquationSeparate(F[0],F[1]),K[0]=
F[0],K[1]=F[1];if(q[0]!==m[0]||q[1]!==m[1]||q[2]!==m[2]||q[3]!==m[3])e.blendFuncSeparate(q[0],q[1],q[2],q[3]),m[0]=q[0],m[1]=q[1],m[2]=q[2],m[3]=q[3];if(E[0]!==ia[0]||E[1]!==ia[1]||E[2]!==ia[2]||E[3]!==ia[3])e.colorMask(E[0],E[1],E[2],E[3]),ia[0]=E[0],ia[1]=E[1],ia[2]=E[2],ia[3]=E[3];N!==r&&(e.cullFace(N),x.cull_face=N);P!==Q&&(e.depthFunc(P),x.depth_func=P);qa!==pa&&(e.depthMask(qa),x.depth_mask=qa);if(C[0]!==L[0]||C[1]!==L[1])e.depthRange(C[0],C[1]),L[0]=C[0],L[1]=C[1];A!==I&&(e.frontFace(A),x.frontFace=
A);ga!==R&&(e.lineWidth(ga),x.lineWidth=ga);if(u[0]!==J[0]||u[1]!==J[1])e.polygonOffset(u[0],u[1]),J[0]=u[0],J[1]=u[1];if(aa[0]!==b[0]||aa[1]!==b[1])e.sampleCoverage(aa[0],aa[1]),b[0]=aa[0],b[1]=aa[1];if(n[0]!==U[0]||n[1]!==U[1]||n[2]!==U[2]||n[3]!==U[3])e.scissor(n[0],n[1],n[2],n[3]),U[0]=n[0],U[1]=n[1],U[2]=n[2],U[3]=n[3];if(p[0]!==W[0]||p[1]!==W[1]||p[2]!==W[2])e.stencilFunc(p[0],p[1],p[2]),W[0]=p[0],W[1]=p[1],W[2]=p[2];na!==ra&&(e.stencilMask(na),x.stencil_mask=na);if(B[0]!==z[0]||B[1]!==z[1]||
B[2]!==z[2]||B[3]!==z[3])e.stencilOpSeparate(B[0],B[1],B[2],B[3]),z[0]=B[0],z[1]=B[1],z[2]=B[2],z[3]=B[3];if(Y[0]!==G[0]||Y[1]!==G[1]||Y[2]!==G[2]||Y[3]!==G[3])e.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]),G[0]=Y[0],G[1]=Y[1],G[2]=Y[2],G[3]=Y[3];if(D[0]!==k[0]||D[1]!==k[1]||D[2]!==k[2]||D[3]!==k[3])e.viewport(D[0],D[1],D[2],D[3]),k[0]=D[0],k[1]=D[1],k[2]=D[2],k[3]=D[3]},refresh:function(){var a,f,Ea,H,la,M,X,ea,T,S,N,r,P,Q,qa,pa;x.dirty=!1;f=c.blend_enable;Ea=c.cull_enable;H=c.depth_enable;la=c.dither;
M=c.polygonOffset_enable;X=c.sample_alpha;ea=c.sample_enable;T=c.scissor_enable;S=c.stencil_enable;N=c.cull_face;r=c.depth_func;P=c.depth_mask;Q=c.frontFace;qa=c.lineWidth;pa=c.stencil_mask;(a=h.next)?e.bindFramebuffer(36160,a.framebuffer):e.bindFramebuffer(36160,null);h.cur=a;a=t[0];a.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=
null);g.vertexAttribDivisorANGLE(0,a.divisor);a=t[1];a.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(1,a.divisor);a=t[2];a.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(2),
e.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(2,a.divisor);a=t[3];a.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(3,a.divisor);a=t[4];a.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,
a.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(4,a.divisor);a=t[5];a.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(5,a.divisor);a=t[6];a.buffer?(e.enableVertexAttribArray(6),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(6,
a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(6,a.divisor);a=t[7];a.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(7,a.divisor);a=t[8];a.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,
a.buffer.buffer),e.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(8,a.divisor);a=t[9];a.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(9,a.divisor);a=t[10];a.buffer?
(e.enableVertexAttribArray(10),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(10,a.divisor);a=t[11];a.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);
g.vertexAttribDivisorANGLE(11,a.divisor);a=t[12];a.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(12,a.divisor);a=t[13];a.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(13),
e.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(13,a.divisor);a=t[14];a.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(14,a.divisor);a=t[15];a.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,a.buffer.buffer),e.vertexAttribPointer(15,a.size,a.type,a.normalized,
a.stride,a.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);g.vertexAttribDivisorANGLE(15,a.divisor);d.currentVAO=null;d.setVAO(d.targetVAO);f?e.enable(3042):e.disable(3042);x.blend_enable=f;Ea?e.enable(2884):e.disable(2884);x.cull_enable=Ea;H?e.enable(2929):e.disable(2929);x.depth_enable=H;la?e.enable(3024):e.disable(3024);x.dither=la;M?e.enable(32823):e.disable(32823);x.polygonOffset_enable=M;X?e.enable(32926):e.disable(32926);x.sample_alpha=X;ea?e.enable(32928):
e.disable(32928);x.sample_enable=ea;T?e.enable(3089):e.disable(3089);x.scissor_enable=T;S?e.enable(2960):e.disable(2960);x.stencil_enable=S;e.blendColor(y[0],y[1],y[2],y[3]);l[0]=y[0];l[1]=y[1];l[2]=y[2];l[3]=y[3];e.blendEquationSeparate(F[0],F[1]);K[0]=F[0];K[1]=F[1];e.blendFuncSeparate(q[0],q[1],q[2],q[3]);m[0]=q[0];m[1]=q[1];m[2]=q[2];m[3]=q[3];e.colorMask(E[0],E[1],E[2],E[3]);ia[0]=E[0];ia[1]=E[1];ia[2]=E[2];ia[3]=E[3];e.cullFace(N);x.cull_face=N;e.depthFunc(r);x.depth_func=r;e.depthMask(P);x.depth_mask=
P;e.depthRange(C[0],C[1]);L[0]=C[0];L[1]=C[1];e.frontFace(Q);x.frontFace=Q;e.lineWidth(qa);x.lineWidth=qa;e.polygonOffset(u[0],u[1]);J[0]=u[0];J[1]=u[1];e.sampleCoverage(aa[0],aa[1]);b[0]=aa[0];b[1]=aa[1];e.scissor(n[0],n[1],n[2],n[3]);U[0]=n[0];U[1]=n[1];U[2]=n[2];U[3]=n[3];e.stencilFunc(p[0],p[1],p[2]);W[0]=p[0];W[1]=p[1];W[2]=p[2];e.stencilMask(pa);x.stencil_mask=pa;e.stencilOpSeparate(B[0],B[1],B[2],B[3]);z[0]=B[0];z[1]=B[1];z[2]=B[2];z[3]=B[3];e.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]);G[0]=Y[0];
G[1]=Y[1];G[2]=Y[2];G[3]=Y[3];e.viewport(D[0],D[1],D[2],D[3]);k[0]=D[0];k[1]=D[1];k[2]=D[2];k[3]=D[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la,M,X,ea,T,S,N,r,P,Q,qa,pa){var A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa,ka,ca,ta,fb,Ga,gb,fa,zd,nc,Ha,ac,Tb;A=a.attributes;
I=a.buffer;ga=a.context;R=a.current;na=a.draw;ra=a.elements;Ba=a.extensions;ya=a.framebuffer;ha=a.gl;Ca=a.isBufferArgs;ja=a.next;oa=a.shader;za=a.uniforms;Ma=a.vao;Aa=ja.blend_color;Bb=R.blend_color;Xa=ja.blend_equation;v=R.blend_equation;w=ja.blend_func;da=R.blend_func;ua=ja.colorMask;Da=R.colorMask;lb=ja.depth_range;Ib=R.depth_range;ba=ja.polygonOffset_offset;O=R.polygonOffset_offset;va=ja.sample_coverage;Fa=R.sample_coverage;sa=ja.scissor_box;xa=R.scissor_box;wa=ja.stencil_func;ka=R.stencil_func;
ca=ja.stencil_opBack;ta=R.stencil_opBack;fb=ja.stencil_opFront;Ga=R.stencil_opFront;gb=ja.viewport;fa=R.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};nc={};nc.buffer=t;nc.divisor=1;Ha={};Ha.buffer=x;Ha.divisor=1;ac={};ac.buffer=h;ac.divisor=1;Tb={};Tb.buffer=e;Tb.divisor=1;return{batch:function(a,b){var e,d,h,c,n,w;e=ya.next;e!==ya.cur&&(e?ha.bindFramebuffer(36160,e.framebuffer):ha.bindFramebuffer(36160,null),ya.cur=e);if(R.dirty){var x,
t,p,Aa,B,C,sa,l,y,u,E,F,J,L,U,aa,W,Xa,ia,za,oa,gb,Jc,Cb,Gb,Z,xb,wc,Db,Kc,kc,Hc,gd;x=ja.dither;x!==R.dither&&(x?ha.enable(3024):ha.disable(3024),R.dither=x);t=ja.depth_func;t!==R.depth_func&&(ha.depthFunc(t),R.depth_func=t);p=lb[0];Aa=lb[1];if(p!==Ib[0]||Aa!==Ib[1])ha.depthRange(p,Aa),Ib[0]=p,Ib[1]=Aa;B=ja.depth_mask;B!==R.depth_mask&&(ha.depthMask(B),R.depth_mask=B);C=ua[0];sa=ua[1];l=ua[2];y=ua[3];if(C!==Da[0]||sa!==Da[1]||l!==Da[2]||y!==Da[3])ha.colorMask(C,sa,l,y),Da[0]=C,Da[1]=sa,Da[2]=l,Da[3]=
y;u=ja.cull_enable;u!==R.cull_enable&&(u?ha.enable(2884):ha.disable(2884),R.cull_enable=u);E=ja.cull_face;E!==R.cull_face&&(ha.cullFace(E),R.cull_face=E);F=ja.frontFace;F!==R.frontFace&&(ha.frontFace(F),R.frontFace=F);J=ja.lineWidth;J!==R.lineWidth&&(ha.lineWidth(J),R.lineWidth=J);L=ja.polygonOffset_enable;L!==R.polygonOffset_enable&&(L?ha.enable(32823):ha.disable(32823),R.polygonOffset_enable=L);U=ba[0];aa=ba[1];if(U!==O[0]||aa!==O[1])ha.polygonOffset(U,aa),O[0]=U,O[1]=aa;W=ja.sample_alpha;W!==R.sample_alpha&&
(W?ha.enable(32926):ha.disable(32926),R.sample_alpha=W);Xa=ja.sample_enable;Xa!==R.sample_enable&&(Xa?ha.enable(32928):ha.disable(32928),R.sample_enable=Xa);ia=va[0];za=va[1];if(ia!==Fa[0]||za!==Fa[1])ha.sampleCoverage(ia,za),Fa[0]=ia,Fa[1]=za;oa=ja.stencil_enable;oa!==R.stencil_enable&&(oa?ha.enable(2960):ha.disable(2960),R.stencil_enable=oa);gb=ja.stencil_mask;gb!==R.stencil_mask&&(ha.stencilMask(gb),R.stencil_mask=gb);Jc=wa[0];Cb=wa[1];Gb=wa[2];if(Jc!==ka[0]||Cb!==ka[1]||Gb!==ka[2])ha.stencilFunc(Jc,
Cb,Gb),ka[0]=Jc,ka[1]=Cb,ka[2]=Gb;Z=fb[0];xb=fb[1];wc=fb[2];Db=fb[3];if(Z!==Ga[0]||xb!==Ga[1]||wc!==Ga[2]||Db!==Ga[3])ha.stencilOpSeparate(Z,xb,wc,Db),Ga[0]=Z,Ga[1]=xb,Ga[2]=wc,Ga[3]=Db;Kc=ca[0];kc=ca[1];Hc=ca[2];gd=ca[3];if(Kc!==ta[0]||kc!==ta[1]||Hc!==ta[2]||gd!==ta[3])ha.stencilOpSeparate(Kc,kc,Hc,gd),ta[0]=Kc,ta[1]=kc,ta[2]=Hc,ta[3]=gd}ha.blendColor(0,0,0,0);Bb[0]=0;Bb[1]=0;Bb[2]=0;Bb[3]=0;ha.enable(3042);R.blend_enable=!0;ha.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ha.blendFuncSeparate(770,
771,773,1);da[0]=770;da[1]=771;da[2]=773;da[3]=1;ha.disable(2929);R.depth_enable=!1;ha.enable(3089);R.scissor_enable=!0;if(d=R.profile)h=performance.now(),g.count+=b;ha.useProgram(z.program);c=Ba.angle_instanced_arrays;var Xc,Dc,dc,Ic,oc,qc,lc,pc;Ma.setVAO(null);Xc=la.location;Dc=A[Xc];Dc.buffer||ha.enableVertexAttribArray(Xc);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==K||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)ha.bindBuffer(34962,K.buffer),ha.vertexAttribPointer(Xc,2,5126,!1,24,0),Dc.type=
5126,Dc.size=2,Dc.buffer=K,Dc.normalized=!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(c.vertexAttribDivisorANGLE(Xc,0),Dc.divisor=0);dc=X.location;Ic=A[dc];Ic.buffer||ha.enableVertexAttribArray(dc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==q||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)ha.bindBuffer(34962,q.buffer),ha.vertexAttribPointer(dc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=q,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(c.vertexAttribDivisorANGLE(dc,0),Ic.divisor=
0);oc=f.location;qc=A[oc];qc.buffer||ha.enableVertexAttribArray(oc);if(5126!==qc.type||2!==qc.size||qc.buffer!==m||!1!==qc.normalized||16!==qc.offset||24!==qc.stride)ha.bindBuffer(34962,m.buffer),ha.vertexAttribPointer(oc,2,5126,!1,24,16),qc.type=5126,qc.size=2,qc.buffer=m,qc.normalized=!1,qc.offset=16,qc.stride=24;0!==qc.divisor&&(c.vertexAttribDivisorANGLE(oc,0),qc.divisor=0);(lc=na.elements)?ha.bindBuffer(34963,lc.buffer.buffer):Ma.currentVAO&&(lc=ra.getElements(Ma.currentVAO.elements))&&ha.bindBuffer(34963,
lc.buffer.buffer);pc=na.offset;for(n=0;n<b;++n){w=a[n];var db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,ma,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc;db=w.viewport;zc=db.x|0;yb=db.y|0;ab="width"in db?db.width|0:ga.framebufferWidth-zc;Nb="height"in
db?db.height|0:ga.framebufferHeight-yb;Ya=ga.viewportWidth;ga.viewportWidth=ab;ob=ga.viewportHeight;ga.viewportHeight=Nb;ha.viewport(zc,yb,ab,Nb);fa[0]=zc;fa[1]=yb;fa[2]=ab;fa[3]=Nb;Za=w.viewport;Nc=Za.x|0;Ob=Za.y|0;Jb="width"in Za?Za.width|0:ga.framebufferWidth-Nc;rc="height"in Za?Za.height|0:ga.framebufferHeight-Ob;ha.scissor(Nc,Ob,Jb,rc);xa[0]=Nc;xa[1]=Ob;xa[2]=Jb;xa[3]=rc;Pb=Y.call(this,ga,w,n);ac.offset=Pb;jb=!1;Hb=null;Eb=0;wb=!1;Zb=hb=0;Qb=1;qb=0;Ua=5126;ib=hc=zb=Vb=0;Ca(ac)?(jb=!0,Hb=I.createStream(34962,
ac),Ua=Hb.dtype):(Hb=I.getBuffer(ac))?Ua=Hb.dtype:"constant"in ac?(Qb=2,"number"===typeof ac.constant?(zb=ac.constant,hc=ib=Vb=0):(zb=0<ac.constant.length?ac.constant[0]:0,hc=1<ac.constant.length?ac.constant[1]:0,ib=2<ac.constant.length?ac.constant[2]:0,Vb=3<ac.constant.length?ac.constant[3]:0)):(Hb=Ca(ac.buffer)?I.createStream(34962,ac.buffer):I.getBuffer(ac.buffer),Ua="type"in ac?zd[ac.type]:Hb.dtype,wb=!!ac.normalized,Zb=ac.size|0,hb=ac.offset|0,qb=ac.stride|0,Eb=ac.divisor|0);pb=S.location;Ia=
A[pb];if(1===Qb){Ia.buffer||ha.enableVertexAttribArray(pb);rb=Zb||2;if(Ia.type!==Ua||Ia.size!==rb||Ia.buffer!==Hb||Ia.normalized!==wb||Ia.offset!==hb||Ia.stride!==qb)ha.bindBuffer(34962,Hb.buffer),ha.vertexAttribPointer(pb,rb,Ua,wb,qb,hb),Ia.type=Ua,Ia.size=rb,Ia.buffer=Hb,Ia.normalized=wb,Ia.offset=hb,Ia.stride=qb;Ia.divisor!==Eb&&(c.vertexAttribDivisorANGLE(pb,Eb),Ia.divisor=Eb)}else if(Ia.buffer&&(ha.disableVertexAttribArray(pb),Ia.buffer=null),Ia.x!==zb||Ia.y!==hc||Ia.z!==ib||Ia.w!==Vb)ha.vertexAttrib4f(pb,
zb,hc,ib,Vb),Ia.x=zb,Ia.y=hc,Ia.z=ib,Ia.w=Vb;Ja=G.call(this,ga,w,n);Tb.offset=Ja;cb=!1;eb=null;Ka=0;kb=!1;tb=Sa=0;sb=1;Oa=0;Cc=5126;La=Fb=Kb=Qa=0;Ca(Tb)?(cb=!0,eb=I.createStream(34962,Tb),Cc=eb.dtype):(eb=I.getBuffer(Tb))?Cc=eb.dtype:"constant"in Tb?(sb=2,"number"===typeof Tb.constant?(Kb=Tb.constant,Fb=La=Qa=0):(Kb=0<Tb.constant.length?Tb.constant[0]:0,Fb=1<Tb.constant.length?Tb.constant[1]:0,La=2<Tb.constant.length?Tb.constant[2]:0,Qa=3<Tb.constant.length?Tb.constant[3]:0)):(eb=Ca(Tb.buffer)?I.createStream(34962,
Tb.buffer):I.getBuffer(Tb.buffer),Cc="type"in Tb?zd[Tb.type]:eb.dtype,kb=!!Tb.normalized,tb=Tb.size|0,Sa=Tb.offset|0,Oa=Tb.stride|0,Ka=Tb.divisor|0);Hd=N.location;Va=A[Hd];if(1===sb){Va.buffer||ha.enableVertexAttribArray(Hd);Lb=tb||2;if(Va.type!==Cc||Va.size!==Lb||Va.buffer!==eb||Va.normalized!==kb||Va.offset!==Sa||Va.stride!==Oa)ha.bindBuffer(34962,eb.buffer),ha.vertexAttribPointer(Hd,Lb,Cc,kb,Oa,Sa),Va.type=Cc,Va.size=Lb,Va.buffer=eb,Va.normalized=kb,Va.offset=Sa,Va.stride=Oa;Va.divisor!==Ka&&(c.vertexAttribDivisorANGLE(Hd,
Ka),Va.divisor=Ka)}else if(Va.buffer&&(ha.disableVertexAttribArray(Hd),Va.buffer=null),Va.x!==Kb||Va.y!==Fb||Va.z!==La||Va.w!==Qa)ha.vertexAttrib4f(Hd,Kb,Fb,La,Qa),Va.x=Kb,Va.y=Fb,Va.z=La,Va.w=Qa;Mb=D.call(this,ga,w,n);Ha.offset=Mb;mb=!1;Na=null;$b=0;Pa=!1;vb=ub=0;Ra=1;nb=0;ec=5126;ic=$a=uc=Ac=0;Ca(Ha)?(mb=!0,Na=I.createStream(34962,Ha),ec=Na.dtype):(Na=I.getBuffer(Ha))?ec=Na.dtype:"constant"in Ha?(Ra=2,"number"===typeof Ha.constant?(uc=Ha.constant,$a=ic=Ac=0):(uc=0<Ha.constant.length?Ha.constant[0]:
0,$a=1<Ha.constant.length?Ha.constant[1]:0,ic=2<Ha.constant.length?Ha.constant[2]:0,Ac=3<Ha.constant.length?Ha.constant[3]:0)):(Na=Ca(Ha.buffer)?I.createStream(34962,Ha.buffer):I.getBuffer(Ha.buffer),ec="type"in Ha?zd[Ha.type]:Na.dtype,Pa=!!Ha.normalized,vb=Ha.size|0,ub=Ha.offset|0,nb=Ha.stride|0,$b=Ha.divisor|0);sd=M.location;Ta=A[sd];if(1===Ra){Ta.buffer||ha.enableVertexAttribArray(sd);Oc=vb||4;if(Ta.type!==ec||Ta.size!==Oc||Ta.buffer!==Na||Ta.normalized!==Pa||Ta.offset!==ub||Ta.stride!==nb)ha.bindBuffer(34962,
Na.buffer),ha.vertexAttribPointer(sd,Oc,ec,Pa,nb,ub),Ta.type=ec,Ta.size=Oc,Ta.buffer=Na,Ta.normalized=Pa,Ta.offset=ub,Ta.stride=nb;Ta.divisor!==$b&&(c.vertexAttribDivisorANGLE(sd,$b),Ta.divisor=$b)}else if(Ta.buffer&&(ha.disableVertexAttribArray(sd),Ta.buffer=null),Ta.x!==uc||Ta.y!==$a||Ta.z!==ic||Ta.w!==Ac)ha.vertexAttrib4f(sd,uc,$a,ic,Ac),Ta.x=uc,Ta.y=$a,Ta.z=ic,Ta.w=Ac;Ab=k.call(this,ga,w,n);nc.offset=Ab;Wa=!1;Wb=null;tc=0;Xb=!1;Lc=Rb=0;Sb=1;Sd=0;Ec=5126;ud=Yc=Pc=yd=0;Ca(nc)?(Wa=!0,Wb=I.createStream(34962,
nc),Ec=Wb.dtype):(Wb=I.getBuffer(nc))?Ec=Wb.dtype:"constant"in nc?(Sb=2,"number"===typeof nc.constant?(Pc=nc.constant,Yc=ud=yd=0):(Pc=0<nc.constant.length?nc.constant[0]:0,Yc=1<nc.constant.length?nc.constant[1]:0,ud=2<nc.constant.length?nc.constant[2]:0,yd=3<nc.constant.length?nc.constant[3]:0)):(Wb=Ca(nc.buffer)?I.createStream(34962,nc.buffer):I.getBuffer(nc.buffer),Ec="type"in nc?zd[nc.type]:Wb.dtype,Xb=!!nc.normalized,Lc=nc.size|0,Rb=nc.offset|0,Sd=nc.stride|0,tc=nc.divisor|0);mc=H.location;vc=
A[mc];if(1===Sb){vc.buffer||ha.enableVertexAttribArray(mc);fc=Lc||4;if(vc.type!==Ec||vc.size!==fc||vc.buffer!==Wb||vc.normalized!==Xb||vc.offset!==Rb||vc.stride!==Sd)ha.bindBuffer(34962,Wb.buffer),ha.vertexAttribPointer(mc,fc,Ec,Xb,Sd,Rb),vc.type=Ec,vc.size=fc,vc.buffer=Wb,vc.normalized=Xb,vc.offset=Rb,vc.stride=Sd;vc.divisor!==tc&&(c.vertexAttribDivisorANGLE(mc,tc),vc.divisor=tc)}else if(vc.buffer&&(ha.disableVertexAttribArray(mc),vc.buffer=null),vc.x!==Pc||vc.y!==Yc||vc.z!==ud||vc.w!==yd)ha.vertexAttrib4f(mc,
Pc,Yc,ud,yd),vc.x=Pc,vc.y=Yc,vc.z=ud,vc.w=yd;bb=V.call(this,ga,w,n);sc=bb[0];Yb=bb[1];gc=bb[2];Bc=bb[3];n&&Ub===sc&&cc===Yb&&xc===gc&&cd===Bc||(Ub=sc,cc=Yb,xc=gc,cd=Bc,ha.uniform4f(pa.location,sc,Yb,gc,Bc));Sc=w.lineWidth;n&&Tc===Sc||(Tc=Sc,ha.uniform1f(ea.location,Sc));Uc=w.capSize;n&&Zc===Uc||(Zc=Uc,ha.uniform1f(Ea.location,Uc));md=w.scale;dd=md[0];jc=md[1];n&&$c===dd&&bc===jc||($c=dd,bc=jc,ha.uniform2f(r.location,dd,jc));ad=w.scaleFract;Wc=ad[0];yc=ad[1];n&&ed===Wc&&id===yc||(ed=Wc,id=yc,ha.uniform2f(P.location,
Wc,yc));ma=w.translate;ye=ma[0];jd=ma[1];n&&wd===ye&&Je===jd||(wd=ye,Je=jd,ha.uniform2f(Q.location,ye,jd));Pd=w.translateFract;Yd=Pd[0];ae=Pd[1];n&&de===Yd&&Ld===ae||(de=Yd,Ld=ae,ha.uniform2f(qa.location,Yd,ae));Id=w.opacity;n&&od===Id||(od=Id,ha.uniform1f(T.location,Id));Vc=w.count;0<Vc?lc?c.drawElementsInstancedANGLE(4,36,lc.type,pc<<(lc.type-5121>>1),Vc):c.drawArraysInstancedANGLE(4,pc,36,Vc):0>Vc&&(lc?ha.drawElements(4,36,lc.type,pc<<(lc.type-5121>>1)):ha.drawArrays(4,pc,36));ga.viewportWidth=
Ya;ga.viewportHeight=ob;jb&&I.destroyStream(Hb);cb&&I.destroyStream(eb);mb&&I.destroyStream(Na);Wa&&I.destroyStream(Wb)}R.dirty=!0;Ma.setVAO(null);d&&(g.cpuTime+=performance.now()-h)},draw:function(a){var b,e,k,h,n,w,x,t,p,Aa,B,z,C,sa,G,D,u,J,L,U,aa,W,Xa,ia,za,V,oa,Y,gb,Jc,Cb,Gb,Z,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b;b=ya.next;b!==ya.cur&&(b?
ha.bindFramebuffer(36160,b.framebuffer):ha.bindFramebuffer(36160,null),ya.cur=b);if(R.dirty){var Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,ma,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub;Pa=ja.dither;Pa!==R.dither&&(Pa?ha.enable(3024):ha.disable(3024),R.dither=Pa);ub=ja.depth_func;ub!==R.depth_func&&(ha.depthFunc(ub),R.depth_func=ub);vb=lb[0];Ra=lb[1];if(vb!==Ib[0]||Ra!==Ib[1])ha.depthRange(vb,Ra),Ib[0]=vb,Ib[1]=Ra;nb=ja.depth_mask;nb!==R.depth_mask&&(ha.depthMask(nb),R.depth_mask=nb);ec=
ua[0];Ac=ua[1];uc=ua[2];$a=ua[3];if(ec!==Da[0]||Ac!==Da[1]||uc!==Da[2]||$a!==Da[3])ha.colorMask(ec,Ac,uc,$a),Da[0]=ec,Da[1]=Ac,Da[2]=uc,Da[3]=$a;ic=ja.cull_enable;ic!==R.cull_enable&&(ic?ha.enable(2884):ha.disable(2884),R.cull_enable=ic);sd=ja.cull_face;sd!==R.cull_face&&(ha.cullFace(sd),R.cull_face=sd);Ta=ja.frontFace;Ta!==R.frontFace&&(ha.frontFace(Ta),R.frontFace=Ta);Oc=ja.lineWidth;Oc!==R.lineWidth&&(ha.lineWidth(Oc),R.lineWidth=Oc);Ab=ja.polygonOffset_enable;Ab!==R.polygonOffset_enable&&(Ab?
ha.enable(32823):ha.disable(32823),R.polygonOffset_enable=Ab);Wa=ba[0];Wb=ba[1];if(Wa!==O[0]||Wb!==O[1])ha.polygonOffset(Wa,Wb),O[0]=Wa,O[1]=Wb;tc=ja.sample_alpha;tc!==R.sample_alpha&&(tc?ha.enable(32926):ha.disable(32926),R.sample_alpha=tc);Xb=ja.sample_enable;Xb!==R.sample_enable&&(Xb?ha.enable(32928):ha.disable(32928),R.sample_enable=Xb);Rb=va[0];Lc=va[1];if(Rb!==Fa[0]||Lc!==Fa[1])ha.sampleCoverage(Rb,Lc),Fa[0]=Rb,Fa[1]=Lc;Sb=ja.stencil_enable;Sb!==R.stencil_enable&&(Sb?ha.enable(2960):ha.disable(2960),
R.stencil_enable=Sb);Sd=ja.stencil_mask;Sd!==R.stencil_mask&&(ha.stencilMask(Sd),R.stencil_mask=Sd);Ec=wa[0];ma=wa[1];Pc=wa[2];if(Ec!==ka[0]||ma!==ka[1]||Pc!==ka[2])ha.stencilFunc(Ec,ma,Pc),ka[0]=Ec,ka[1]=ma,ka[2]=Pc;Yc=fb[0];ud=fb[1];mc=fb[2];vc=fb[3];if(Yc!==Ga[0]||ud!==Ga[1]||mc!==Ga[2]||vc!==Ga[3])ha.stencilOpSeparate(Yc,ud,mc,vc),Ga[0]=Yc,Ga[1]=ud,Ga[2]=mc,Ga[3]=vc;fc=ca[0];bb=ca[1];sc=ca[2];Ub=ca[3];if(fc!==ta[0]||bb!==ta[1]||sc!==ta[2]||Ub!==ta[3])ha.stencilOpSeparate(fc,bb,sc,Ub),ta[0]=fc,
ta[1]=bb,ta[2]=sc,ta[3]=Ub}e=a.viewport;k=e.x|0;h=e.y|0;n="width"in e?e.width|0:ga.framebufferWidth-k;w="height"in e?e.height|0:ga.framebufferHeight-h;x=ga.viewportWidth;ga.viewportWidth=n;t=ga.viewportHeight;ga.viewportHeight=w;ha.viewport(k,h,n,w);fa[0]=k;fa[1]=h;fa[2]=n;fa[3]=w;ha.blendColor(0,0,0,0);Bb[0]=0;Bb[1]=0;Bb[2]=0;Bb[3]=0;ha.enable(3042);R.blend_enable=!0;ha.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ha.blendFuncSeparate(770,771,773,1);da[0]=770;da[1]=771;da[2]=773;da[3]=
1;ha.disable(2929);R.depth_enable=!1;p=a.viewport;Aa=p.x|0;B=p.y|0;z="width"in p?p.width|0:ga.framebufferWidth-Aa;C="height"in p?p.height|0:ga.framebufferHeight-B;ha.scissor(Aa,B,z,C);xa[0]=Aa;xa[1]=B;xa[2]=z;xa[3]=C;ha.enable(3089);R.scissor_enable=!0;if(sa=R.profile)G=performance.now(),g.count++;ha.useProgram(c.program);D=Ba.angle_instanced_arrays;Ma.setVAO(null);u=d.call(this,ga,a,0);ac.offset=u;J=!1;L=null;U=0;aa=!1;Xa=W=0;ia=1;za=0;V=5126;Jc=gb=Y=oa=0;Ca(ac)?(J=!0,L=I.createStream(34962,ac),
V=L.dtype):(L=I.getBuffer(ac))?V=L.dtype:"constant"in ac?(ia=2,"number"===typeof ac.constant?(Y=ac.constant,gb=Jc=oa=0):(Y=0<ac.constant.length?ac.constant[0]:0,gb=1<ac.constant.length?ac.constant[1]:0,Jc=2<ac.constant.length?ac.constant[2]:0,oa=3<ac.constant.length?ac.constant[3]:0)):(L=Ca(ac.buffer)?I.createStream(34962,ac.buffer):I.getBuffer(ac.buffer),V="type"in ac?zd[ac.type]:L.dtype,aa=!!ac.normalized,Xa=ac.size|0,W=ac.offset|0,za=ac.stride|0,U=ac.divisor|0);Cb=S.location;Gb=A[Cb];if(1===ia){Gb.buffer||
ha.enableVertexAttribArray(Cb);Z=Xa||2;if(Gb.type!==V||Gb.size!==Z||Gb.buffer!==L||Gb.normalized!==aa||Gb.offset!==W||Gb.stride!==za)ha.bindBuffer(34962,L.buffer),ha.vertexAttribPointer(Cb,Z,V,aa,za,W),Gb.type=V,Gb.size=Z,Gb.buffer=L,Gb.normalized=aa,Gb.offset=W,Gb.stride=za;Gb.divisor!==U&&(D.vertexAttribDivisorANGLE(Cb,U),Gb.divisor=U)}else if(Gb.buffer&&(ha.disableVertexAttribArray(Cb),Gb.buffer=null),Gb.x!==Y||Gb.y!==gb||Gb.z!==Jc||Gb.w!==oa)ha.vertexAttrib4f(Cb,Y,gb,Jc,oa),Gb.x=Y,Gb.y=gb,Gb.z=
Jc,Gb.w=oa;xb=y.call(this,ga,a,0);Tb.offset=xb;wc=!1;Db=null;Kc=0;kc=!1;gd=Hc=0;Xc=1;Dc=0;dc=5126;lc=qc=oc=Ic=0;Ca(Tb)?(wc=!0,Db=I.createStream(34962,Tb),dc=Db.dtype):(Db=I.getBuffer(Tb))?dc=Db.dtype:"constant"in Tb?(Xc=2,"number"===typeof Tb.constant?(oc=Tb.constant,qc=lc=Ic=0):(oc=0<Tb.constant.length?Tb.constant[0]:0,qc=1<Tb.constant.length?Tb.constant[1]:0,lc=2<Tb.constant.length?Tb.constant[2]:0,Ic=3<Tb.constant.length?Tb.constant[3]:0)):(Db=Ca(Tb.buffer)?I.createStream(34962,Tb.buffer):I.getBuffer(Tb.buffer),
dc="type"in Tb?zd[Tb.type]:Db.dtype,kc=!!Tb.normalized,gd=Tb.size|0,Hc=Tb.offset|0,Dc=Tb.stride|0,Kc=Tb.divisor|0);pc=N.location;db=A[pc];if(1===Xc){db.buffer||ha.enableVertexAttribArray(pc);zc=gd||2;if(db.type!==dc||db.size!==zc||db.buffer!==Db||db.normalized!==kc||db.offset!==Hc||db.stride!==Dc)ha.bindBuffer(34962,Db.buffer),ha.vertexAttribPointer(pc,zc,dc,kc,Dc,Hc),db.type=dc,db.size=zc,db.buffer=Db,db.normalized=kc,db.offset=Hc,db.stride=Dc;db.divisor!==Kc&&(D.vertexAttribDivisorANGLE(pc,Kc),
db.divisor=Kc)}else if(db.buffer&&(ha.disableVertexAttribArray(pc),db.buffer=null),db.x!==oc||db.y!==qc||db.z!==lc||db.w!==Ic)ha.vertexAttrib4f(pc,oc,qc,lc,Ic),db.x=oc,db.y=qc,db.z=lc,db.w=Ic;yb=l.call(this,ga,a,0);Ha.offset=yb;ab=!1;Nb=null;Ya=0;ob=!1;Nc=Za=0;Ob=1;Jb=0;rc=5126;Eb=Hb=jb=Pb=0;Ca(Ha)?(ab=!0,Nb=I.createStream(34962,Ha),rc=Nb.dtype):(Nb=I.getBuffer(Ha))?rc=Nb.dtype:"constant"in Ha?(Ob=2,"number"===typeof Ha.constant?(jb=Ha.constant,Hb=Eb=Pb=0):(jb=0<Ha.constant.length?Ha.constant[0]:
0,Hb=1<Ha.constant.length?Ha.constant[1]:0,Eb=2<Ha.constant.length?Ha.constant[2]:0,Pb=3<Ha.constant.length?Ha.constant[3]:0)):(Nb=Ca(Ha.buffer)?I.createStream(34962,Ha.buffer):I.getBuffer(Ha.buffer),rc="type"in Ha?zd[Ha.type]:Nb.dtype,ob=!!Ha.normalized,Nc=Ha.size|0,Za=Ha.offset|0,Jb=Ha.stride|0,Ya=Ha.divisor|0);wb=M.location;hb=A[wb];if(1===Ob){hb.buffer||ha.enableVertexAttribArray(wb);Zb=Nc||4;if(hb.type!==rc||hb.size!==Zb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Za||hb.stride!==Jb)ha.bindBuffer(34962,
Nb.buffer),ha.vertexAttribPointer(wb,Zb,rc,ob,Jb,Za),hb.type=rc,hb.size=Zb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Za,hb.stride=Jb;hb.divisor!==Ya&&(D.vertexAttribDivisorANGLE(wb,Ya),hb.divisor=Ya)}else if(hb.buffer&&(ha.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Hb||hb.z!==Eb||hb.w!==Pb)ha.vertexAttrib4f(wb,jb,Hb,Eb,Pb),hb.x=jb,hb.y=Hb,hb.z=Eb,hb.w=Pb;Qb=F.call(this,ga,a,0);nc.offset=Qb;qb=!1;Ua=null;Vb=0;zb=!1;ib=hc=0;pb=1;Ia=0;rb=5126;Ka=eb=cb=Ja=0;Ca(nc)?(qb=!0,Ua=I.createStream(34962,
nc),rb=Ua.dtype):(Ua=I.getBuffer(nc))?rb=Ua.dtype:"constant"in nc?(pb=2,"number"===typeof nc.constant?(cb=nc.constant,eb=Ka=Ja=0):(cb=0<nc.constant.length?nc.constant[0]:0,eb=1<nc.constant.length?nc.constant[1]:0,Ka=2<nc.constant.length?nc.constant[2]:0,Ja=3<nc.constant.length?nc.constant[3]:0)):(Ua=Ca(nc.buffer)?I.createStream(34962,nc.buffer):I.getBuffer(nc.buffer),rb="type"in nc?zd[nc.type]:Ua.dtype,zb=!!nc.normalized,ib=nc.size|0,hc=nc.offset|0,Ia=nc.stride|0,Vb=nc.divisor|0);kb=H.location;Sa=
A[kb];if(1===pb){Sa.buffer||ha.enableVertexAttribArray(kb);tb=ib||4;if(Sa.type!==rb||Sa.size!==tb||Sa.buffer!==Ua||Sa.normalized!==zb||Sa.offset!==hc||Sa.stride!==Ia)ha.bindBuffer(34962,Ua.buffer),ha.vertexAttribPointer(kb,tb,rb,zb,Ia,hc),Sa.type=rb,Sa.size=tb,Sa.buffer=Ua,Sa.normalized=zb,Sa.offset=hc,Sa.stride=Ia;Sa.divisor!==Vb&&(D.vertexAttribDivisorANGLE(kb,Vb),Sa.divisor=Vb)}else if(Sa.buffer&&(ha.disableVertexAttribArray(kb),Sa.buffer=null),Sa.x!==cb||Sa.y!==eb||Sa.z!==Ka||Sa.w!==Ja)ha.vertexAttrib4f(kb,
cb,eb,Ka,Ja),Sa.x=cb,Sa.y=eb,Sa.z=Ka,Sa.w=Ja;sb=la.location;Oa=A[sb];Oa.buffer||ha.enableVertexAttribArray(sb);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==K||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)ha.bindBuffer(34962,K.buffer),ha.vertexAttribPointer(sb,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=K,Oa.normalized=!1,Oa.offset=0,Oa.stride=24;0!==Oa.divisor&&(D.vertexAttribDivisorANGLE(sb,0),Oa.divisor=0);Cc=X.location;Qa=A[Cc];Qa.buffer||ha.enableVertexAttribArray(Cc);if(5126!==Qa.type||
2!==Qa.size||Qa.buffer!==q||!1!==Qa.normalized||8!==Qa.offset||24!==Qa.stride)ha.bindBuffer(34962,q.buffer),ha.vertexAttribPointer(Cc,2,5126,!1,24,8),Qa.type=5126,Qa.size=2,Qa.buffer=q,Qa.normalized=!1,Qa.offset=8,Qa.stride=24;0!==Qa.divisor&&(D.vertexAttribDivisorANGLE(Cc,0),Qa.divisor=0);Kb=f.location;Fb=A[Kb];Fb.buffer||ha.enableVertexAttribArray(Kb);if(5126!==Fb.type||2!==Fb.size||Fb.buffer!==m||!1!==Fb.normalized||16!==Fb.offset||24!==Fb.stride)ha.bindBuffer(34962,m.buffer),ha.vertexAttribPointer(Kb,
2,5126,!1,24,16),Fb.type=5126,Fb.size=2,Fb.buffer=m,Fb.normalized=!1,Fb.offset=16,Fb.stride=24;0!==Fb.divisor&&(D.vertexAttribDivisorANGLE(Kb,0),Fb.divisor=0);La=E.call(this,ga,a,0);ha.uniform4f(pa.location,La[0],La[1],La[2],La[3]);ha.uniform1f(ea.location,a.lineWidth);ha.uniform1f(Ea.location,a.capSize);Hd=a.scale;ha.uniform2f(r.location,Hd[0],Hd[1]);Va=a.scaleFract;ha.uniform2f(P.location,Va[0],Va[1]);Lb=a.translate;ha.uniform2f(Q.location,Lb[0],Lb[1]);Mb=a.translateFract;ha.uniform2f(qa.location,
Mb[0],Mb[1]);ha.uniform1f(T.location,a.opacity);(mb=na.elements)?ha.bindBuffer(34963,mb.buffer.buffer):Ma.currentVAO&&(mb=ra.getElements(Ma.currentVAO.elements))&&ha.bindBuffer(34963,mb.buffer.buffer);Na=na.offset;$b=a.count;0<$b?mb?D.drawElementsInstancedANGLE(4,36,mb.type,Na<<(mb.type-5121>>1),$b):D.drawArraysInstancedANGLE(4,Na,36,$b):0>$b&&(mb?ha.drawElements(4,36,mb.type,Na<<(mb.type-5121>>1)):ha.drawArrays(4,Na,36));R.dirty=!0;Ma.setVAO(null);ga.viewportWidth=x;ga.viewportHeight=t;sa&&(g.cpuTime+=
performance.now()-G);J&&I.destroyStream(L);wc&&I.destroyStream(Db);ab&&I.destroyStream(Nb);qb&&I.destroyStream(Ua)},scope:function(a,f,e){var d,k,h,v,c,r,A,x,t,O,da,z,va,Ma,Fa,S,Bb,N,ha,ba,T,l,D,y,G,ka,H,Q,ca,ua,P,E,F,xa,wa,fa,qa,ya,ra,X,ta,V,ea,Da,Y,pa,Ib,Ea,la,Ba,lb,M,Ga,fb,ld,Z,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,ma,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,
Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od;d=a.viewport;k=d.x|0;h=d.y|0;v="width"in d?d.width|0:ga.framebufferWidth-k;c="height"in d?d.height|0:ga.framebufferHeight-h;r=ga.viewportWidth;ga.viewportWidth=v;A=ga.viewportHeight;ga.viewportHeight=c;x=gb[0];gb[0]=k;t=gb[1];gb[1]=h;O=gb[2];gb[2]=v;da=gb[3];gb[3]=c;z=Aa[0];Aa[0]=0;va=Aa[1];
Aa[1]=0;Ma=Aa[2];Aa[2]=0;Fa=Aa[3];Aa[3]=0;S=ja.blend_enable;ja.blend_enable=!0;Bb=Xa[0];Xa[0]=32774;N=Xa[1];Xa[1]=32774;ha=w[0];w[0]=770;ba=w[1];w[1]=771;T=w[2];w[2]=773;l=w[3];w[3]=1;D=ja.depth_enable;ja.depth_enable=!1;y=a.viewport;G=y.x|0;ka=y.y|0;H="width"in y?y.width|0:ga.framebufferWidth-G;Q="height"in y?y.height|0:ga.framebufferHeight-ka;ca=sa[0];sa[0]=G;ua=sa[1];sa[1]=ka;P=sa[2];sa[2]=H;E=sa[3];sa[3]=Q;F=ja.scissor_enable;ja.scissor_enable=!0;if(xa=R.profile)wa=performance.now(),g.count++;
fa=na.count;na.count=36;qa=a.count;ya=na.instances;na.instances=qa;ra=na.primitive;na.primitive=4;X=a.capSize;ta=za[5];za[5]=X;V=a.lineWidth;ea=za[4];za[4]=V;Da=a.opacity;Y=za[10];za[10]=Da;pa=a.range;Ib=za[18];za[18]=pa;Ea=a.scale;la=za[6];za[6]=Ea;Ba=a.scaleFract;lb=za[7];za[7]=Ba;M=a.translate;Ga=za[8];za[8]=M;fb=a.translateFract;ld=za[9];za[9]=fb;Z=ia.call(this,ga,a,e);Jb=za[3];za[3]=Z;rc=C.buffer;C.buffer=m;Pb=C.divisor;C.divisor=0;jb=C.normalized;C.normalized=!1;Hb=C.offset;C.offset=16;Eb=C.size;
C.size=0;wb=C.state;C.state=1;hb=C.stride;C.stride=24;Zb=C.type;C.type=5126;Qb=C.w;C.w=0;qb=C.x;C.x=0;Ua=C.y;C.y=0;Vb=C.z;C.z=0;zb=L.call(this,ga,a,e);nc.offset=zb;hc=!1;ib=null;pb=0;Ia=!1;Ja=rb=0;cb=1;eb=0;Ka=5126;sb=tb=Sa=kb=0;Ca(nc)?(hc=!0,ib=I.createStream(34962,nc),Ka=ib.dtype):(ib=I.getBuffer(nc))?Ka=ib.dtype:"constant"in nc?(cb=2,"number"===typeof nc.constant?(Sa=nc.constant,tb=sb=kb=0):(Sa=0<nc.constant.length?nc.constant[0]:0,tb=1<nc.constant.length?nc.constant[1]:0,sb=2<nc.constant.length?
nc.constant[2]:0,kb=3<nc.constant.length?nc.constant[3]:0)):(ib=Ca(nc.buffer)?I.createStream(34962,nc.buffer):I.getBuffer(nc.buffer),Ka="type"in nc?zd[nc.type]:ib.dtype,Ia=!!nc.normalized,Ja=nc.size|0,rb=nc.offset|0,eb=nc.stride|0,pb=nc.divisor|0);Oa=u.buffer;u.buffer=ib;Cc=u.divisor;u.divisor=pb;Qa=u.normalized;u.normalized=Ia;Kb=u.offset;u.offset=rb;Fb=u.size;u.size=Ja;La=u.state;u.state=cb;Hd=u.stride;u.stride=eb;Va=u.type;u.type=Ka;Lb=u.w;u.w=kb;Mb=u.x;u.x=Sa;mb=u.y;u.y=tb;Na=u.z;u.z=sb;$b=J.buffer;
J.buffer=K;Pa=J.divisor;J.divisor=0;ub=J.normalized;J.normalized=!1;vb=J.offset;J.offset=0;Ra=J.size;J.size=0;nb=J.state;J.state=1;ec=J.stride;J.stride=24;Ac=J.type;J.type=5126;uc=J.w;J.w=0;$a=J.x;J.x=0;ic=J.y;J.y=0;sd=J.z;J.z=0;Ta=aa.call(this,ga,a,e);Ha.offset=Ta;Oc=!1;Ab=null;Wa=0;Wb=!1;Xb=tc=0;Rb=1;Lc=0;Sb=5126;Pc=yd=Ec=ma=0;Ca(Ha)?(Oc=!0,Ab=I.createStream(34962,Ha),Sb=Ab.dtype):(Ab=I.getBuffer(Ha))?Sb=Ab.dtype:"constant"in Ha?(Rb=2,"number"===typeof Ha.constant?(Ec=Ha.constant,yd=Pc=ma=0):(Ec=
0<Ha.constant.length?Ha.constant[0]:0,yd=1<Ha.constant.length?Ha.constant[1]:0,Pc=2<Ha.constant.length?Ha.constant[2]:0,ma=3<Ha.constant.length?Ha.constant[3]:0)):(Ab=Ca(Ha.buffer)?I.createStream(34962,Ha.buffer):I.getBuffer(Ha.buffer),Sb="type"in Ha?zd[Ha.type]:Ab.dtype,Wb=!!Ha.normalized,Xb=Ha.size|0,tc=Ha.offset|0,Lc=Ha.stride|0,Wa=Ha.divisor|0);Yc=b.buffer;b.buffer=Ab;ud=b.divisor;b.divisor=Wa;mc=b.normalized;b.normalized=Wb;vc=b.offset;b.offset=tc;fc=b.size;b.size=Xb;bb=b.state;b.state=Rb;sc=
b.stride;b.stride=Lc;Ub=b.type;b.type=Sb;Yb=b.w;b.w=ma;cc=b.x;b.x=Ec;gc=b.y;b.y=yd;xc=b.z;b.z=Pc;Bc=n.buffer;n.buffer=q;cd=n.divisor;n.divisor=0;Sc=n.normalized;n.normalized=!1;Tc=n.offset;n.offset=8;Uc=n.size;n.size=0;Zc=n.state;n.state=1;md=n.stride;n.stride=24;dd=n.type;n.type=5126;$c=n.w;n.w=0;jc=n.x;n.x=0;bc=n.y;n.y=0;ad=n.z;n.z=0;Wc=U.call(this,ga,a,e);ac.offset=Wc;ed=!1;yc=null;id=0;Ed=!1;wd=ye=0;jd=1;Je=0;Pd=5126;Ld=ae=de=Yd=0;Ca(ac)?(ed=!0,yc=I.createStream(34962,ac),Pd=yc.dtype):(yc=I.getBuffer(ac))?
Pd=yc.dtype:"constant"in ac?(jd=2,"number"===typeof ac.constant?(de=ac.constant,ae=Ld=Yd=0):(de=0<ac.constant.length?ac.constant[0]:0,ae=1<ac.constant.length?ac.constant[1]:0,Ld=2<ac.constant.length?ac.constant[2]:0,Yd=3<ac.constant.length?ac.constant[3]:0)):(yc=Ca(ac.buffer)?I.createStream(34962,ac.buffer):I.getBuffer(ac.buffer),Pd="type"in ac?zd[ac.type]:yc.dtype,Ed=!!ac.normalized,wd=ac.size|0,ye=ac.offset|0,Je=ac.stride|0,id=ac.divisor|0);Id=p.buffer;p.buffer=yc;od=p.divisor;p.divisor=id;Vc=p.normalized;
p.normalized=Ed;vd=p.offset;p.offset=ye;td=p.size;p.size=wd;kd=p.state;p.state=jd;xd=p.stride;p.stride=Je;Bd=p.type;p.type=Pd;Fd=p.w;p.w=Yd;je=p.x;p.x=de;le=p.y;p.y=ae;ze=p.z;p.z=Ld;me=W.call(this,ga,a,e);Tb.offset=me;ke=!1;he=null;ue=0;ee=!1;Qc=ne=0;hd=1;ve=0;re=5126;Ud=Td=Qd=Md=0;Ca(Tb)?(ke=!0,he=I.createStream(34962,Tb),re=he.dtype):(he=I.getBuffer(Tb))?re=he.dtype:"constant"in Tb?(hd=2,"number"===typeof Tb.constant?(Qd=Tb.constant,Td=Ud=Md=0):(Qd=0<Tb.constant.length?Tb.constant[0]:0,Td=1<Tb.constant.length?
Tb.constant[1]:0,Ud=2<Tb.constant.length?Tb.constant[2]:0,Md=3<Tb.constant.length?Tb.constant[3]:0)):(he=Ca(Tb.buffer)?I.createStream(34962,Tb.buffer):I.getBuffer(Tb.buffer),re="type"in Tb?zd[Tb.type]:he.dtype,ee=!!Tb.normalized,Qc=Tb.size|0,ne=Tb.offset|0,ve=Tb.stride|0,ue=Tb.divisor|0);oe=B.buffer;B.buffer=he;Ae=B.divisor;B.divisor=ue;De=B.normalized;B.normalized=ee;se=B.offset;B.offset=ne;Te=B.size;B.size=Qc;Ue=B.state;B.state=hd;Pe=B.stride;B.stride=ve;we=B.type;B.type=re;He=B.w;B.w=Md;Ke=B.x;
B.x=Qd;Le=B.y;B.y=Td;Me=B.z;B.z=Ud;Ie=oa.vert;oa.vert=2;Od=oa.frag;oa.frag=1;R.dirty=!0;f(ga,a,e);ga.viewportWidth=r;ga.viewportHeight=A;gb[0]=x;gb[1]=t;gb[2]=O;gb[3]=da;Aa[0]=z;Aa[1]=va;Aa[2]=Ma;Aa[3]=Fa;ja.blend_enable=S;Xa[0]=Bb;Xa[1]=N;w[0]=ha;w[1]=ba;w[2]=T;w[3]=l;ja.depth_enable=D;sa[0]=ca;sa[1]=ua;sa[2]=P;sa[3]=E;ja.scissor_enable=F;xa&&(g.cpuTime+=performance.now()-wa);na.count=fa;na.instances=ya;na.primitive=ra;za[5]=ta;za[4]=ea;za[10]=Y;za[18]=Ib;za[6]=la;za[7]=lb;za[8]=Ga;za[9]=ld;za[3]=
Jb;C.buffer=rc;C.divisor=Pb;C.normalized=jb;C.offset=Hb;C.size=Eb;C.state=wb;C.stride=hb;C.type=Zb;C.w=Qb;C.x=qb;C.y=Ua;C.z=Vb;hc&&I.destroyStream(ib);u.buffer=Oa;u.divisor=Cc;u.normalized=Qa;u.offset=Kb;u.size=Fb;u.state=La;u.stride=Hd;u.type=Va;u.w=Lb;u.x=Mb;u.y=mb;u.z=Na;J.buffer=$b;J.divisor=Pa;J.normalized=ub;J.offset=vb;J.size=Ra;J.state=nb;J.stride=ec;J.type=Ac;J.w=uc;J.x=$a;J.y=ic;J.z=sd;Oc&&I.destroyStream(Ab);b.buffer=Yc;b.divisor=ud;b.normalized=mc;b.offset=vc;b.size=fc;b.state=bb;b.stride=
sc;b.type=Ub;b.w=Yb;b.x=cc;b.y=gc;b.z=xc;n.buffer=Bc;n.divisor=cd;n.normalized=Sc;n.offset=Tc;n.size=Uc;n.state=Zc;n.stride=md;n.type=dd;n.w=$c;n.x=jc;n.y=bc;n.z=ad;ed&&I.destroyStream(yc);p.buffer=Id;p.divisor=od;p.normalized=Vc;p.offset=vd;p.size=td;p.state=kd;p.stride=xd;p.type=Bd;p.w=Fd;p.x=je;p.y=le;p.z=ze;ke&&I.destroyStream(he);B.buffer=oe;B.divisor=Ae;B.normalized=De;B.offset=se;B.size=Te;B.state=Ue;B.stride=Pe;B.type=we;B.w=He;B.x=Ke;B.y=Le;B.z=Me;oa.vert=Ie;oa.frag=Od;R.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la){var M,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa,ka,ca;M=a.attributes;X=a.buffer;ea=a.context;T=a.current;S=a.draw;N=a.elements;r=a.extensions;P=a.framebuffer;Q=a.gl;qa=a.isBufferArgs;pa=a.next;A=a.shader;I=a.uniforms;ga=a.vao;R=pa.blend_color;na=T.blend_color;ra=pa.blend_equation;Ba=T.blend_equation;ya=pa.blend_func;ha=T.blend_func;Ca=pa.colorMask;ja=T.colorMask;
oa=pa.depth_range;za=T.depth_range;Ma=pa.polygonOffset_offset;Aa=T.polygonOffset_offset;Bb=pa.sample_coverage;Xa=T.sample_coverage;v=pa.scissor_box;w=T.scissor_box;da=pa.stencil_func;ua=T.stencil_func;Da=pa.stencil_opBack;lb=T.stencil_opBack;Ib=pa.stencil_opFront;ba=T.stencil_opFront;O=pa.viewport;va=T.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};sa={divisor:1,offset:8,stride:8};xa={divisor:1,offset:8,stride:8};wa={divisor:1,offset:16,
stride:8};ka={divisor:1,offset:16,stride:8};ca={divisor:1,offset:0,stride:4};return{batch:function(a,d){var v,c,A,x,t,O;v=P.next;v!==P.cur&&(v?Q.bindFramebuffer(36160,v.framebuffer):Q.bindFramebuffer(36160,null),P.cur=v);if(T.dirty){var I,C,R,y,l,q,m,E,F,K,ya,ra,ia,Z,Ad,Ee,$e,Se,Gd,Ce,te,Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc;I=pa.dither;I!==T.dither&&(I?Q.enable(3024):Q.disable(3024),T.dither=I);C=pa.depth_func;C!==T.depth_func&&(Q.depthFunc(C),T.depth_func=C);R=oa[0];y=oa[1];if(R!==za[0]||y!==za[1])Q.depthRange(R,
y),za[0]=R,za[1]=y;l=pa.depth_mask;l!==T.depth_mask&&(Q.depthMask(l),T.depth_mask=l);q=Ca[0];m=Ca[1];E=Ca[2];F=Ca[3];if(q!==ja[0]||m!==ja[1]||E!==ja[2]||F!==ja[3])Q.colorMask(q,m,E,F),ja[0]=q,ja[1]=m,ja[2]=E,ja[3]=F;K=pa.cull_enable;K!==T.cull_enable&&(K?Q.enable(2884):Q.disable(2884),T.cull_enable=K);ya=pa.cull_face;ya!==T.cull_face&&(Q.cullFace(ya),T.cull_face=ya);ra=pa.frontFace;ra!==T.frontFace&&(Q.frontFace(ra),T.frontFace=ra);ia=pa.lineWidth;ia!==T.lineWidth&&(Q.lineWidth(ia),T.lineWidth=ia);
Z=pa.polygonOffset_enable;Z!==T.polygonOffset_enable&&(Z?Q.enable(32823):Q.disable(32823),T.polygonOffset_enable=Z);Ad=Ma[0];Ee=Ma[1];if(Ad!==Aa[0]||Ee!==Aa[1])Q.polygonOffset(Ad,Ee),Aa[0]=Ad,Aa[1]=Ee;$e=pa.sample_alpha;$e!==T.sample_alpha&&($e?Q.enable(32926):Q.disable(32926),T.sample_alpha=$e);Se=pa.sample_enable;Se!==T.sample_enable&&(Se?Q.enable(32928):Q.disable(32928),T.sample_enable=Se);Gd=Bb[0];Ce=Bb[1];if(Gd!==Xa[0]||Ce!==Xa[1])Q.sampleCoverage(Gd,Ce),Xa[0]=Gd,Xa[1]=Ce;te=pa.stencil_mask;
te!==T.stencil_mask&&(Q.stencilMask(te),T.stencil_mask=te);Nd=da[0];Kd=da[1];$d=da[2];if(Nd!==ua[0]||Kd!==ua[1]||$d!==ua[2])Q.stencilFunc(Nd,Kd,$d),ua[0]=Nd,ua[1]=Kd,ua[2]=$d;nd=Ib[0];bd=Ib[1];rd=Ib[2];Mc=Ib[3];if(nd!==ba[0]||bd!==ba[1]||rd!==ba[2]||Mc!==ba[3])Q.stencilOpSeparate(nd,bd,rd,Mc),ba[0]=nd,ba[1]=bd,ba[2]=rd,ba[3]=Mc;pd=Da[0];Fc=Da[1];fd=Da[2];Rc=Da[3];if(pd!==lb[0]||Fc!==lb[1]||fd!==lb[2]||Rc!==lb[3])Q.stencilOpSeparate(pd,Fc,fd,Rc),lb[0]=pd,lb[1]=Fc,lb[2]=fd,lb[3]=Rc}Q.blendColor(0,0,
0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;Q.enable(3042);T.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Ba[0]=32774;Ba[1]=32774;Q.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;Q.enable(3089);T.scissor_enable=!0;Q.disable(2960);T.stencil_enable=!1;if(c=T.profile)A=performance.now(),g.count+=d;Q.useProgram(L.program);x=r.angle_instanced_arrays;var Jc,Cb,Gb,Gc,xb;ga.setVAO(null);Jc=Y.location;Cb=M[Jc];Cb.buffer||Q.enableVertexAttribArray(Jc);if(5126!==Cb.type||1!==Cb.size||
Cb.buffer!==h||!1!==Cb.normalized||0!==Cb.offset||8!==Cb.stride)Q.bindBuffer(34962,h.buffer),Q.vertexAttribPointer(Jc,1,5126,!1,8,0),Cb.type=5126,Cb.size=1,Cb.buffer=h,Cb.normalized=!1,Cb.offset=0,Cb.stride=8;0!==Cb.divisor&&(x.vertexAttribDivisorANGLE(Jc,0),Cb.divisor=0);Gb=G.location;Gc=M[Gb];Gc.buffer||Q.enableVertexAttribArray(Gb);if(5126!==Gc.type||1!==Gc.size||Gc.buffer!==e||!1!==Gc.normalized||4!==Gc.offset||8!==Gc.stride)Q.bindBuffer(34962,e.buffer),Q.vertexAttribPointer(Gb,1,5126,!1,8,4),
Gc.type=5126,Gc.size=1,Gc.buffer=e,Gc.normalized=!1,Gc.offset=4,Gc.stride=8;0!==Gc.divisor&&(x.vertexAttribDivisorANGLE(Gb,0),Gc.divisor=0);(xb=S.elements)?Q.bindBuffer(34963,xb.buffer.buffer):ga.currentVAO&&(xb=N.getElements(ga.currentVAO.elements))&&Q.bindBuffer(34963,xb.buffer.buffer);for(t=0;t<d;++t){O=a[t];var wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,
Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,ma,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd;wc=O.viewport;Db=wc.x|0;Kc=wc.y|0;kc="width"in wc?wc.width|0:ea.framebufferWidth-Db;Hc="height"in wc?wc.height|0:ea.framebufferHeight-Kc;gd=ea.viewportWidth;ea.viewportWidth=kc;Xc=ea.viewportHeight;ea.viewportHeight=Hc;Q.viewport(Db,Kc,kc,Hc);va[0]=Db;va[1]=Kc;va[2]=kc;va[3]=Hc;(Dc=u.call(this,
ea,O,t))?Q.enable(2929):Q.disable(2929);T.depth_enable=Dc;dc=O.viewport;Ic=dc.x|0;oc=dc.y|0;qc="width"in dc?dc.width|0:ea.framebufferWidth-Ic;lc="height"in dc?dc.height|0:ea.framebufferHeight-oc;Q.scissor(Ic,oc,qc,lc);w[0]=Ic;w[1]=oc;w[2]=qc;w[3]=lc;sa.buffer=O.positionBuffer;pc=!1;db=null;zc=0;yb=!1;Nb=ab=0;Ya=1;ob=0;Za=5126;rc=Jb=Ob=Nc=0;qa(sa)?(pc=!0,db=X.createStream(34962,sa),Za=db.dtype):(db=X.getBuffer(sa))?Za=db.dtype:"constant"in sa?(Ya=2,"number"===typeof sa.constant?(Ob=sa.constant,Jb=
rc=Nc=0):(Ob=0<sa.constant.length?sa.constant[0]:0,Jb=1<sa.constant.length?sa.constant[1]:0,rc=2<sa.constant.length?sa.constant[2]:0,Nc=3<sa.constant.length?sa.constant[3]:0)):(db=qa(sa.buffer)?X.createStream(34962,sa.buffer):X.getBuffer(sa.buffer),Za="type"in sa?Fa[sa.type]:db.dtype,yb=!!sa.normalized,Nb=sa.size|0,ab=sa.offset|0,ob=sa.stride|0,zc=sa.divisor|0);Pb=aa.location;jb=M[Pb];if(1===Ya){jb.buffer||Q.enableVertexAttribArray(Pb);Hb=Nb||2;if(jb.type!==Za||jb.size!==Hb||jb.buffer!==db||jb.normalized!==
yb||jb.offset!==ab||jb.stride!==ob)Q.bindBuffer(34962,db.buffer),Q.vertexAttribPointer(Pb,Hb,Za,yb,ob,ab),jb.type=Za,jb.size=Hb,jb.buffer=db,jb.normalized=yb,jb.offset=ab,jb.stride=ob;jb.divisor!==zc&&(x.vertexAttribDivisorANGLE(Pb,zc),jb.divisor=zc)}else if(jb.buffer&&(Q.disableVertexAttribArray(Pb),jb.buffer=null),jb.x!==Ob||jb.y!==Jb||jb.z!==rc||jb.w!==Nc)Q.vertexAttrib4f(Pb,Ob,Jb,rc,Nc),jb.x=Ob,jb.y=Jb,jb.z=rc,jb.w=Nc;wa.buffer=O.positionBuffer;Eb=!1;wb=null;hb=0;Zb=!1;qb=Qb=0;Ua=1;Vb=0;zb=5126;
Ia=pb=ib=hc=0;qa(wa)?(Eb=!0,wb=X.createStream(34962,wa),zb=wb.dtype):(wb=X.getBuffer(wa))?zb=wb.dtype:"constant"in wa?(Ua=2,"number"===typeof wa.constant?(ib=wa.constant,pb=Ia=hc=0):(ib=0<wa.constant.length?wa.constant[0]:0,pb=1<wa.constant.length?wa.constant[1]:0,Ia=2<wa.constant.length?wa.constant[2]:0,hc=3<wa.constant.length?wa.constant[3]:0)):(wb=qa(wa.buffer)?X.createStream(34962,wa.buffer):X.getBuffer(wa.buffer),zb="type"in wa?Fa[wa.type]:wb.dtype,Zb=!!wa.normalized,qb=wa.size|0,Qb=wa.offset|
0,Vb=wa.stride|0,hb=wa.divisor|0);rb=n.location;Ja=M[rb];if(1===Ua){Ja.buffer||Q.enableVertexAttribArray(rb);cb=qb||2;if(Ja.type!==zb||Ja.size!==cb||Ja.buffer!==wb||Ja.normalized!==Zb||Ja.offset!==Qb||Ja.stride!==Vb)Q.bindBuffer(34962,wb.buffer),Q.vertexAttribPointer(rb,cb,zb,Zb,Vb,Qb),Ja.type=zb,Ja.size=cb,Ja.buffer=wb,Ja.normalized=Zb,Ja.offset=Qb,Ja.stride=Vb;Ja.divisor!==hb&&(x.vertexAttribDivisorANGLE(rb,hb),Ja.divisor=hb)}else if(Ja.buffer&&(Q.disableVertexAttribArray(rb),Ja.buffer=null),Ja.x!==
ib||Ja.y!==pb||Ja.z!==Ia||Ja.w!==hc)Q.vertexAttrib4f(rb,ib,pb,Ia,hc),Ja.x=ib,Ja.y=pb,Ja.z=Ia,Ja.w=hc;xa.buffer=O.positionFractBuffer;eb=!1;Ka=null;kb=0;Sa=!1;sb=tb=0;Oa=1;Cc=0;Qa=5126;Hd=La=Fb=Kb=0;qa(xa)?(eb=!0,Ka=X.createStream(34962,xa),Qa=Ka.dtype):(Ka=X.getBuffer(xa))?Qa=Ka.dtype:"constant"in xa?(Oa=2,"number"===typeof xa.constant?(Fb=xa.constant,La=Hd=Kb=0):(Fb=0<xa.constant.length?xa.constant[0]:0,La=1<xa.constant.length?xa.constant[1]:0,Hd=2<xa.constant.length?xa.constant[2]:0,Kb=3<xa.constant.length?
xa.constant[3]:0)):(Ka=qa(xa.buffer)?X.createStream(34962,xa.buffer):X.getBuffer(xa.buffer),Qa="type"in xa?Fa[xa.type]:Ka.dtype,Sa=!!xa.normalized,sb=xa.size|0,tb=xa.offset|0,Cc=xa.stride|0,kb=xa.divisor|0);Va=b.location;Lb=M[Va];if(1===Oa){Lb.buffer||Q.enableVertexAttribArray(Va);Mb=sb||2;if(Lb.type!==Qa||Lb.size!==Mb||Lb.buffer!==Ka||Lb.normalized!==Sa||Lb.offset!==tb||Lb.stride!==Cc)Q.bindBuffer(34962,Ka.buffer),Q.vertexAttribPointer(Va,Mb,Qa,Sa,Cc,tb),Lb.type=Qa,Lb.size=Mb,Lb.buffer=Ka,Lb.normalized=
Sa,Lb.offset=tb,Lb.stride=Cc;Lb.divisor!==kb&&(x.vertexAttribDivisorANGLE(Va,kb),Lb.divisor=kb)}else if(Lb.buffer&&(Q.disableVertexAttribArray(Va),Lb.buffer=null),Lb.x!==Fb||Lb.y!==La||Lb.z!==Hd||Lb.w!==Kb)Q.vertexAttrib4f(Va,Fb,La,Hd,Kb),Lb.x=Fb,Lb.y=La,Lb.z=Hd,Lb.w=Kb;ka.buffer=O.positionFractBuffer;mb=!1;Na=null;$b=0;Pa=!1;vb=ub=0;Ra=1;nb=0;ec=5126;ic=$a=uc=Ac=0;qa(ka)?(mb=!0,Na=X.createStream(34962,ka),ec=Na.dtype):(Na=X.getBuffer(ka))?ec=Na.dtype:"constant"in ka?(Ra=2,"number"===typeof ka.constant?
(uc=ka.constant,$a=ic=Ac=0):(uc=0<ka.constant.length?ka.constant[0]:0,$a=1<ka.constant.length?ka.constant[1]:0,ic=2<ka.constant.length?ka.constant[2]:0,Ac=3<ka.constant.length?ka.constant[3]:0)):(Na=qa(ka.buffer)?X.createStream(34962,ka.buffer):X.getBuffer(ka.buffer),ec="type"in ka?Fa[ka.type]:Na.dtype,Pa=!!ka.normalized,vb=ka.size|0,ub=ka.offset|0,nb=ka.stride|0,$b=ka.divisor|0);ma=U.location;Ta=M[ma];if(1===Ra){Ta.buffer||Q.enableVertexAttribArray(ma);Oc=vb||2;if(Ta.type!==ec||Ta.size!==Oc||Ta.buffer!==
Na||Ta.normalized!==Pa||Ta.offset!==ub||Ta.stride!==nb)Q.bindBuffer(34962,Na.buffer),Q.vertexAttribPointer(ma,Oc,ec,Pa,nb,ub),Ta.type=ec,Ta.size=Oc,Ta.buffer=Na,Ta.normalized=Pa,Ta.offset=ub,Ta.stride=nb;Ta.divisor!==$b&&(x.vertexAttribDivisorANGLE(ma,$b),Ta.divisor=$b)}else if(Ta.buffer&&(Q.disableVertexAttribArray(ma),Ta.buffer=null),Ta.x!==uc||Ta.y!==$a||Ta.z!==ic||Ta.w!==Ac)Q.vertexAttrib4f(ma,uc,$a,ic,Ac),Ta.x=uc,Ta.y=$a,Ta.z=ic,Ta.w=Ac;ca.buffer=O.colorBuffer;Ab=!1;Wa=null;Wb=0;tc=!1;Rb=Xb=
0;Lc=1;Sb=0;Sd=5126;Yc=Pc=yd=Ec=0;qa(ca)?(Ab=!0,Wa=X.createStream(34962,ca),Sd=Wa.dtype):(Wa=X.getBuffer(ca))?Sd=Wa.dtype:"constant"in ca?(Lc=2,"number"===typeof ca.constant?(yd=ca.constant,Pc=Yc=Ec=0):(yd=0<ca.constant.length?ca.constant[0]:0,Pc=1<ca.constant.length?ca.constant[1]:0,Yc=2<ca.constant.length?ca.constant[2]:0,Ec=3<ca.constant.length?ca.constant[3]:0)):(Wa=qa(ca.buffer)?X.createStream(34962,ca.buffer):X.getBuffer(ca.buffer),Sd="type"in ca?Fa[ca.type]:Wa.dtype,tc=!!ca.normalized,Rb=ca.size|
0,Xb=ca.offset|0,Sb=ca.stride|0,Wb=ca.divisor|0);ud=p.location;mc=M[ud];if(1===Lc){mc.buffer||Q.enableVertexAttribArray(ud);vc=Rb||4;if(mc.type!==Sd||mc.size!==vc||mc.buffer!==Wa||mc.normalized!==tc||mc.offset!==Xb||mc.stride!==Sb)Q.bindBuffer(34962,Wa.buffer),Q.vertexAttribPointer(ud,vc,Sd,tc,Sb,Xb),mc.type=Sd,mc.size=vc,mc.buffer=Wa,mc.normalized=tc,mc.offset=Xb,mc.stride=Sb;mc.divisor!==Wb&&(x.vertexAttribDivisorANGLE(ud,Wb),mc.divisor=Wb)}else if(mc.buffer&&(Q.disableVertexAttribArray(ud),mc.buffer=
null),mc.x!==yd||mc.y!==Pc||mc.z!==Yc||mc.w!==Ec)Q.vertexAttrib4f(ud,yd,Pc,Yc,Ec),mc.x=yd,mc.y=Pc,mc.z=Yc,mc.w=Ec;fc=O.scale;bb=fc[0];Ub=fc[1];t&&sc===bb&&Yb===Ub||(sc=bb,Yb=Ub,Q.uniform2f(k.location,bb,Ub));cc=O.scaleFract;gc=cc[0];Bc=cc[1];t&&xc===gc&&cd===Bc||(xc=gc,cd=Bc,Q.uniform2f(V.location,gc,Bc));Sc=O.translate;Tc=Sc[0];Zc=Sc[1];t&&Uc===Tc&&md===Zc||(Uc=Tc,md=Zc,Q.uniform2f(Ea.location,Tc,Zc));dd=O.translateFract;$c=dd[0];bc=dd[1];t&&jc===$c&&ad===bc||(jc=$c,ad=bc,Q.uniform2f(H.location,
$c,bc));Wc=O.thickness;t&&ed===Wc||(ed=Wc,Q.uniform1f(f.location,Wc));yc=O.depth;t&&id===yc||(id=yc,Q.uniform1f(z.location,yc));Ed=J.call(this,ea,O,t);ye=Ed[0];jd=Ed[1];Pd=Ed[2];de=Ed[3];t&&wd===ye&&Je===jd&&Yd===Pd&&ae===de||(wd=ye,Je=jd,Yd=Pd,ae=de,Q.uniform4f(la.location,ye,jd,Pd,de));Ld=O.dashLength;t&&Id===Ld||(Id=Ld,Q.uniform1f(W.location,Ld));od=O.opacity;t&&Vc===od||(Vc=od,Q.uniform1f(D.location,od));(vd=O.dashTexture)&&"framebuffer"===vd._reglType&&(vd=vd.color[0]);td=vd._texture;Q.uniform1i(B.location,
td.bind());kd=O.count;0<kd?xb?x.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),kd):x.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(xb?Q.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):Q.drawArrays(5,0,4));ea.viewportWidth=gd;ea.viewportHeight=Xc;pc&&X.destroyStream(db);Eb&&X.destroyStream(wb);eb&&X.destroyStream(Ka);mb&&X.destroyStream(Na);Ab&&X.destroyStream(Wa);td.unbind()}T.dirty=!0;ga.setVAO(null);c&&(g.cpuTime+=performance.now()-A)},draw:function(a){var d,v,A,O,I,C,R,y,l,q,m,u,E,F,K,
J,L,ya,ra,ia,Z,Ad,Ee,$e,Se,Gd,Ce,te,Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,ma,Va,Lb,Mb,mb,Na,$b,Pa,ub;d=P.next;d!==P.cur&&(d?Q.bindFramebuffer(36160,d.framebuffer):Q.bindFramebuffer(36160,null),P.cur=d);if(T.dirty){var vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb;vb=pa.dither;
vb!==T.dither&&(vb?Q.enable(3024):Q.disable(3024),T.dither=vb);Ra=pa.depth_func;Ra!==T.depth_func&&(Q.depthFunc(Ra),T.depth_func=Ra);nb=oa[0];ec=oa[1];if(nb!==za[0]||ec!==za[1])Q.depthRange(nb,ec),za[0]=nb,za[1]=ec;Ac=pa.depth_mask;Ac!==T.depth_mask&&(Q.depthMask(Ac),T.depth_mask=Ac);uc=Ca[0];$a=Ca[1];ic=Ca[2];sd=Ca[3];if(uc!==ja[0]||$a!==ja[1]||ic!==ja[2]||sd!==ja[3])Q.colorMask(uc,$a,ic,sd),ja[0]=uc,ja[1]=$a,ja[2]=ic,ja[3]=sd;Ta=pa.cull_enable;Ta!==T.cull_enable&&(Ta?Q.enable(2884):Q.disable(2884),
T.cull_enable=Ta);Oc=pa.cull_face;Oc!==T.cull_face&&(Q.cullFace(Oc),T.cull_face=Oc);Ab=pa.frontFace;Ab!==T.frontFace&&(Q.frontFace(Ab),T.frontFace=Ab);Wa=pa.lineWidth;Wa!==T.lineWidth&&(Q.lineWidth(Wa),T.lineWidth=Wa);Wb=pa.polygonOffset_enable;Wb!==T.polygonOffset_enable&&(Wb?Q.enable(32823):Q.disable(32823),T.polygonOffset_enable=Wb);tc=Ma[0];Xb=Ma[1];if(tc!==Aa[0]||Xb!==Aa[1])Q.polygonOffset(tc,Xb),Aa[0]=tc,Aa[1]=Xb;Rb=pa.sample_alpha;Rb!==T.sample_alpha&&(Rb?Q.enable(32926):Q.disable(32926),T.sample_alpha=
Rb);Lc=pa.sample_enable;Lc!==T.sample_enable&&(Lc?Q.enable(32928):Q.disable(32928),T.sample_enable=Lc);Sb=Bb[0];Sd=Bb[1];if(Sb!==Xa[0]||Sd!==Xa[1])Q.sampleCoverage(Sb,Sd),Xa[0]=Sb,Xa[1]=Sd;Ec=pa.stencil_mask;Ec!==T.stencil_mask&&(Q.stencilMask(Ec),T.stencil_mask=Ec);yd=da[0];Pc=da[1];Yc=da[2];if(yd!==ua[0]||Pc!==ua[1]||Yc!==ua[2])Q.stencilFunc(yd,Pc,Yc),ua[0]=yd,ua[1]=Pc,ua[2]=Yc;ud=Ib[0];mc=Ib[1];vc=Ib[2];fc=Ib[3];if(ud!==ba[0]||mc!==ba[1]||vc!==ba[2]||fc!==ba[3])Q.stencilOpSeparate(ud,mc,vc,fc),
ba[0]=ud,ba[1]=mc,ba[2]=vc,ba[3]=fc;bb=Da[0];sc=Da[1];Ub=Da[2];Yb=Da[3];if(bb!==lb[0]||sc!==lb[1]||Ub!==lb[2]||Yb!==lb[3])Q.stencilOpSeparate(bb,sc,Ub,Yb),lb[0]=bb,lb[1]=sc,lb[2]=Ub,lb[3]=Yb}v=a.viewport;A=v.x|0;O=v.y|0;I="width"in v?v.width|0:ea.framebufferWidth-A;C="height"in v?v.height|0:ea.framebufferHeight-O;R=ea.viewportWidth;ea.viewportWidth=I;y=ea.viewportHeight;ea.viewportHeight=C;Q.viewport(A,O,I,C);va[0]=A;va[1]=O;va[2]=I;va[3]=C;Q.blendColor(0,0,0,0);na[0]=0;na[1]=0;na[2]=0;na[3]=0;Q.enable(3042);
T.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Ba[0]=32774;Ba[1]=32774;Q.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;(l=t.call(this,ea,a,0))?Q.enable(2929):Q.disable(2929);T.depth_enable=l;q=a.viewport;m=q.x|0;u=q.y|0;E="width"in q?q.width|0:ea.framebufferWidth-m;F="height"in q?q.height|0:ea.framebufferHeight-u;Q.scissor(m,u,E,F);w[0]=m;w[1]=u;w[2]=E;w[3]=F;Q.enable(3089);T.scissor_enable=!0;Q.disable(2960);T.stencil_enable=!1;if(K=T.profile)J=performance.now(),
g.count++;Q.useProgram(x.program);L=r.angle_instanced_arrays;ga.setVAO(null);sa.buffer=a.positionBuffer;ya=!1;ra=null;ia=0;Z=!1;Ee=Ad=0;$e=1;Se=0;Gd=5126;Kd=Nd=te=Ce=0;qa(sa)?(ya=!0,ra=X.createStream(34962,sa),Gd=ra.dtype):(ra=X.getBuffer(sa))?Gd=ra.dtype:"constant"in sa?($e=2,"number"===typeof sa.constant?(te=sa.constant,Nd=Kd=Ce=0):(te=0<sa.constant.length?sa.constant[0]:0,Nd=1<sa.constant.length?sa.constant[1]:0,Kd=2<sa.constant.length?sa.constant[2]:0,Ce=3<sa.constant.length?sa.constant[3]:0)):
(ra=qa(sa.buffer)?X.createStream(34962,sa.buffer):X.getBuffer(sa.buffer),Gd="type"in sa?Fa[sa.type]:ra.dtype,Z=!!sa.normalized,Ee=sa.size|0,Ad=sa.offset|0,Se=sa.stride|0,ia=sa.divisor|0);$d=aa.location;nd=M[$d];if(1===$e){nd.buffer||Q.enableVertexAttribArray($d);bd=Ee||2;if(nd.type!==Gd||nd.size!==bd||nd.buffer!==ra||nd.normalized!==Z||nd.offset!==Ad||nd.stride!==Se)Q.bindBuffer(34962,ra.buffer),Q.vertexAttribPointer($d,bd,Gd,Z,Se,Ad),nd.type=Gd,nd.size=bd,nd.buffer=ra,nd.normalized=Z,nd.offset=Ad,
nd.stride=Se;nd.divisor!==ia&&(L.vertexAttribDivisorANGLE($d,ia),nd.divisor=ia)}else if(nd.buffer&&(Q.disableVertexAttribArray($d),nd.buffer=null),nd.x!==te||nd.y!==Nd||nd.z!==Kd||nd.w!==Ce)Q.vertexAttrib4f($d,te,Nd,Kd,Ce),nd.x=te,nd.y=Nd,nd.z=Kd,nd.w=Ce;wa.buffer=a.positionBuffer;rd=!1;Mc=null;pd=0;Fc=!1;Rc=fd=0;Jc=1;Cb=0;Gb=5126;Db=wc=xb=Gc=0;qa(wa)?(rd=!0,Mc=X.createStream(34962,wa),Gb=Mc.dtype):(Mc=X.getBuffer(wa))?Gb=Mc.dtype:"constant"in wa?(Jc=2,"number"===typeof wa.constant?(xb=wa.constant,
wc=Db=Gc=0):(xb=0<wa.constant.length?wa.constant[0]:0,wc=1<wa.constant.length?wa.constant[1]:0,Db=2<wa.constant.length?wa.constant[2]:0,Gc=3<wa.constant.length?wa.constant[3]:0)):(Mc=qa(wa.buffer)?X.createStream(34962,wa.buffer):X.getBuffer(wa.buffer),Gb="type"in wa?Fa[wa.type]:Mc.dtype,Fc=!!wa.normalized,Rc=wa.size|0,fd=wa.offset|0,Cb=wa.stride|0,pd=wa.divisor|0);Kc=n.location;kc=M[Kc];if(1===Jc){kc.buffer||Q.enableVertexAttribArray(Kc);Hc=Rc||2;if(kc.type!==Gb||kc.size!==Hc||kc.buffer!==Mc||kc.normalized!==
Fc||kc.offset!==fd||kc.stride!==Cb)Q.bindBuffer(34962,Mc.buffer),Q.vertexAttribPointer(Kc,Hc,Gb,Fc,Cb,fd),kc.type=Gb,kc.size=Hc,kc.buffer=Mc,kc.normalized=Fc,kc.offset=fd,kc.stride=Cb;kc.divisor!==pd&&(L.vertexAttribDivisorANGLE(Kc,pd),kc.divisor=pd)}else if(kc.buffer&&(Q.disableVertexAttribArray(Kc),kc.buffer=null),kc.x!==xb||kc.y!==wc||kc.z!==Db||kc.w!==Gc)Q.vertexAttrib4f(Kc,xb,wc,Db,Gc),kc.x=xb,kc.y=wc,kc.z=Db,kc.w=Gc;xa.buffer=a.positionFractBuffer;gd=!1;Xc=null;Dc=0;dc=!1;oc=Ic=0;qc=1;lc=0;
pc=5126;ab=yb=zc=db=0;qa(xa)?(gd=!0,Xc=X.createStream(34962,xa),pc=Xc.dtype):(Xc=X.getBuffer(xa))?pc=Xc.dtype:"constant"in xa?(qc=2,"number"===typeof xa.constant?(zc=xa.constant,yb=ab=db=0):(zc=0<xa.constant.length?xa.constant[0]:0,yb=1<xa.constant.length?xa.constant[1]:0,ab=2<xa.constant.length?xa.constant[2]:0,db=3<xa.constant.length?xa.constant[3]:0)):(Xc=qa(xa.buffer)?X.createStream(34962,xa.buffer):X.getBuffer(xa.buffer),pc="type"in xa?Fa[xa.type]:Xc.dtype,dc=!!xa.normalized,oc=xa.size|0,Ic=
xa.offset|0,lc=xa.stride|0,Dc=xa.divisor|0);Nb=b.location;Ya=M[Nb];if(1===qc){Ya.buffer||Q.enableVertexAttribArray(Nb);ob=oc||2;if(Ya.type!==pc||Ya.size!==ob||Ya.buffer!==Xc||Ya.normalized!==dc||Ya.offset!==Ic||Ya.stride!==lc)Q.bindBuffer(34962,Xc.buffer),Q.vertexAttribPointer(Nb,ob,pc,dc,lc,Ic),Ya.type=pc,Ya.size=ob,Ya.buffer=Xc,Ya.normalized=dc,Ya.offset=Ic,Ya.stride=lc;Ya.divisor!==Dc&&(L.vertexAttribDivisorANGLE(Nb,Dc),Ya.divisor=Dc)}else if(Ya.buffer&&(Q.disableVertexAttribArray(Nb),Ya.buffer=
null),Ya.x!==zc||Ya.y!==yb||Ya.z!==ab||Ya.w!==db)Q.vertexAttrib4f(Nb,zc,yb,ab,db),Ya.x=zc,Ya.y=yb,Ya.z=ab,Ya.w=db;ka.buffer=a.positionFractBuffer;Za=!1;Nc=null;Ob=0;Jb=!1;Pb=rc=0;jb=1;Hb=0;Eb=5126;Qb=Zb=hb=wb=0;qa(ka)?(Za=!0,Nc=X.createStream(34962,ka),Eb=Nc.dtype):(Nc=X.getBuffer(ka))?Eb=Nc.dtype:"constant"in ka?(jb=2,"number"===typeof ka.constant?(hb=ka.constant,Zb=Qb=wb=0):(hb=0<ka.constant.length?ka.constant[0]:0,Zb=1<ka.constant.length?ka.constant[1]:0,Qb=2<ka.constant.length?ka.constant[2]:
0,wb=3<ka.constant.length?ka.constant[3]:0)):(Nc=qa(ka.buffer)?X.createStream(34962,ka.buffer):X.getBuffer(ka.buffer),Eb="type"in ka?Fa[ka.type]:Nc.dtype,Jb=!!ka.normalized,Pb=ka.size|0,rc=ka.offset|0,Hb=ka.stride|0,Ob=ka.divisor|0);qb=U.location;Ua=M[qb];if(1===jb){Ua.buffer||Q.enableVertexAttribArray(qb);Vb=Pb||2;if(Ua.type!==Eb||Ua.size!==Vb||Ua.buffer!==Nc||Ua.normalized!==Jb||Ua.offset!==rc||Ua.stride!==Hb)Q.bindBuffer(34962,Nc.buffer),Q.vertexAttribPointer(qb,Vb,Eb,Jb,Hb,rc),Ua.type=Eb,Ua.size=
Vb,Ua.buffer=Nc,Ua.normalized=Jb,Ua.offset=rc,Ua.stride=Hb;Ua.divisor!==Ob&&(L.vertexAttribDivisorANGLE(qb,Ob),Ua.divisor=Ob)}else if(Ua.buffer&&(Q.disableVertexAttribArray(qb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Zb||Ua.z!==Qb||Ua.w!==wb)Q.vertexAttrib4f(qb,hb,Zb,Qb,wb),Ua.x=hb,Ua.y=Zb,Ua.z=Qb,Ua.w=wb;ca.buffer=a.colorBuffer;zb=!1;hc=null;ib=0;pb=!1;rb=Ia=0;Ja=1;cb=0;eb=5126;tb=Sa=kb=Ka=0;qa(ca)?(zb=!0,hc=X.createStream(34962,ca),eb=hc.dtype):(hc=X.getBuffer(ca))?eb=hc.dtype:"constant"in ca?(Ja=2,"number"===
typeof ca.constant?(kb=ca.constant,Sa=tb=Ka=0):(kb=0<ca.constant.length?ca.constant[0]:0,Sa=1<ca.constant.length?ca.constant[1]:0,tb=2<ca.constant.length?ca.constant[2]:0,Ka=3<ca.constant.length?ca.constant[3]:0)):(hc=qa(ca.buffer)?X.createStream(34962,ca.buffer):X.getBuffer(ca.buffer),eb="type"in ca?Fa[ca.type]:hc.dtype,pb=!!ca.normalized,rb=ca.size|0,Ia=ca.offset|0,cb=ca.stride|0,ib=ca.divisor|0);sb=p.location;Oa=M[sb];if(1===Ja){Oa.buffer||Q.enableVertexAttribArray(sb);Cc=rb||4;if(Oa.type!==eb||
Oa.size!==Cc||Oa.buffer!==hc||Oa.normalized!==pb||Oa.offset!==Ia||Oa.stride!==cb)Q.bindBuffer(34962,hc.buffer),Q.vertexAttribPointer(sb,Cc,eb,pb,cb,Ia),Oa.type=eb,Oa.size=Cc,Oa.buffer=hc,Oa.normalized=pb,Oa.offset=Ia,Oa.stride=cb;Oa.divisor!==ib&&(L.vertexAttribDivisorANGLE(sb,ib),Oa.divisor=ib)}else if(Oa.buffer&&(Q.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Sa||Oa.z!==tb||Oa.w!==Ka)Q.vertexAttrib4f(sb,kb,Sa,tb,Ka),Oa.x=kb,Oa.y=Sa,Oa.z=tb,Oa.w=Ka;Qa=Y.location;Kb=M[Qa];Kb.buffer||
Q.enableVertexAttribArray(Qa);if(5126!==Kb.type||1!==Kb.size||Kb.buffer!==h||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)Q.bindBuffer(34962,h.buffer),Q.vertexAttribPointer(Qa,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=h,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(L.vertexAttribDivisorANGLE(Qa,0),Kb.divisor=0);Fb=G.location;La=M[Fb];La.buffer||Q.enableVertexAttribArray(Fb);if(5126!==La.type||1!==La.size||La.buffer!==e||!1!==La.normalized||4!==La.offset||8!==La.stride)Q.bindBuffer(34962,
e.buffer),Q.vertexAttribPointer(Fb,1,5126,!1,8,4),La.type=5126,La.size=1,La.buffer=e,La.normalized=!1,La.offset=4,La.stride=8;0!==La.divisor&&(L.vertexAttribDivisorANGLE(Fb,0),La.divisor=0);ma=a.scale;Q.uniform2f(k.location,ma[0],ma[1]);Va=a.scaleFract;Q.uniform2f(V.location,Va[0],Va[1]);Lb=a.translate;Q.uniform2f(Ea.location,Lb[0],Lb[1]);Mb=a.translateFract;Q.uniform2f(H.location,Mb[0],Mb[1]);Q.uniform1f(f.location,a.thickness);Q.uniform1f(z.location,a.depth);mb=c.call(this,ea,a,0);Q.uniform4f(la.location,
mb[0],mb[1],mb[2],mb[3]);Q.uniform1f(W.location,a.dashLength);Q.uniform1f(D.location,a.opacity);(Na=a.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);$b=Na._texture;Q.uniform1i(B.location,$b.bind());(Pa=S.elements)?Q.bindBuffer(34963,Pa.buffer.buffer):ga.currentVAO&&(Pa=N.getElements(ga.currentVAO.elements))&&Q.bindBuffer(34963,Pa.buffer.buffer);ub=a.count;0<ub?Pa?L.drawElementsInstancedANGLE(5,4,Pa.type,0<<(Pa.type-5121>>1),ub):L.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Pa?Q.drawElements(5,
4,Pa.type,0<<(Pa.type-5121>>1)):Q.drawArrays(5,0,4));T.dirty=!0;ga.setVAO(null);ea.viewportWidth=R;ea.viewportHeight=y;K&&(g.cpuTime+=performance.now()-J);ya&&X.destroyStream(ra);rd&&X.destroyStream(Mc);gd&&X.destroyStream(Xc);Za&&X.destroyStream(Nc);zb&&X.destroyStream(hc);$b.unbind()},scope:function(a,b,f){var k,c,r,n,w,x,t,da,p,Aa,B,z,va,Ma,Bb,N,ha,ba,D,G,H,u,Q,ua,P,ga,J,L,U,aa,ja,W,Xa,za,V,oa,Da,Y,Ca,Ib,na,Ea,la,Ba,lb,M,ld,Z,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,
Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,ma,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe;k=a.viewport;c=k.x|0;r=k.y|0;n="width"in k?k.width|
0:ea.framebufferWidth-c;w="height"in k?k.height|0:ea.framebufferHeight-r;x=ea.viewportWidth;ea.viewportWidth=n;t=ea.viewportHeight;ea.viewportHeight=w;da=O[0];O[0]=c;p=O[1];O[1]=r;Aa=O[2];O[2]=n;B=O[3];O[3]=w;z=R[0];R[0]=0;va=R[1];R[1]=0;Ma=R[2];R[2]=0;Bb=R[3];R[3]=0;N=pa.blend_enable;pa.blend_enable=!0;ha=ra[0];ra[0]=32774;ba=ra[1];ra[1]=32774;D=ya[0];ya[0]=770;G=ya[1];ya[1]=771;H=ya[2];ya[2]=773;u=ya[3];ya[3]=1;Q=d.call(this,ea,a,f);ua=pa.depth_enable;pa.depth_enable=Q;P=a.viewport;ga=P.x|0;J=P.y|
0;L="width"in P?P.width|0:ea.framebufferWidth-ga;U="height"in P?P.height|0:ea.framebufferHeight-J;aa=v[0];v[0]=ga;ja=v[1];v[1]=J;W=v[2];v[2]=L;Xa=v[3];v[3]=U;za=pa.scissor_enable;pa.scissor_enable=!0;V=pa.stencil_enable;pa.stencil_enable=!1;if(oa=T.profile)Da=performance.now(),g.count++;Y=S.offset;S.offset=0;Ca=S.count;S.count=4;Ib=a.count;na=S.instances;S.instances=Ib;Ea=S.primitive;S.primitive=5;la=a.dashLength;Ba=I[23];I[23]=la;lb=a.dashTexture;M=I[24];I[24]=lb;ld=a.depth;Z=I[22];I[22]=ld;Xc=a.id;
Dc=I[31];I[31]=Xc;dc=a.miterLimit;Ic=I[32];I[32]=dc;oc=y.call(this,ea,a,f);qc=I[33];I[33]=oc;lc=a.opacity;pc=I[10];I[10]=lc;db=ea.pixelRatio;zc=I[34];I[34]=db;yb=a.scale;ab=I[6];I[6]=yb;Nb=a.scaleFract;Ya=I[7];I[7]=Nb;ob=a.thickness;Za=I[21];I[21]=ob;Nc=a.translate;Ob=I[8];I[8]=Nc;Jb=a.translateFract;rc=I[9];I[9]=Jb;Pb=l.call(this,ea,a,f);jb=I[3];I[3]=Pb;sa.buffer=a.positionBuffer;Hb=!1;Eb=null;wb=0;hb=!1;Qb=Zb=0;qb=1;Ua=0;Vb=5126;pb=ib=hc=zb=0;qa(sa)?(Hb=!0,Eb=X.createStream(34962,sa),Vb=Eb.dtype):
(Eb=X.getBuffer(sa))?Vb=Eb.dtype:"constant"in sa?(qb=2,"number"===typeof sa.constant?(hc=sa.constant,ib=pb=zb=0):(hc=0<sa.constant.length?sa.constant[0]:0,ib=1<sa.constant.length?sa.constant[1]:0,pb=2<sa.constant.length?sa.constant[2]:0,zb=3<sa.constant.length?sa.constant[3]:0)):(Eb=qa(sa.buffer)?X.createStream(34962,sa.buffer):X.getBuffer(sa.buffer),Vb="type"in sa?Fa[sa.type]:Eb.dtype,hb=!!sa.normalized,Qb=sa.size|0,Zb=sa.offset|0,Ua=sa.stride|0,wb=sa.divisor|0);Ia=F.buffer;F.buffer=Eb;rb=F.divisor;
F.divisor=wb;Ja=F.normalized;F.normalized=hb;cb=F.offset;F.offset=Zb;eb=F.size;F.size=Qb;Ka=F.state;F.state=qb;kb=F.stride;F.stride=Ua;Sa=F.type;F.type=Vb;tb=F.w;F.w=zb;sb=F.x;F.x=hc;Oa=F.y;F.y=ib;Cc=F.z;F.z=pb;xa.buffer=a.positionFractBuffer;Qa=!1;Kb=null;Fb=0;La=!1;Va=ma=0;Lb=1;Mb=0;mb=5126;ub=Pa=$b=Na=0;qa(xa)?(Qa=!0,Kb=X.createStream(34962,xa),mb=Kb.dtype):(Kb=X.getBuffer(xa))?mb=Kb.dtype:"constant"in xa?(Lb=2,"number"===typeof xa.constant?($b=xa.constant,Pa=ub=Na=0):($b=0<xa.constant.length?
xa.constant[0]:0,Pa=1<xa.constant.length?xa.constant[1]:0,ub=2<xa.constant.length?xa.constant[2]:0,Na=3<xa.constant.length?xa.constant[3]:0)):(Kb=qa(xa.buffer)?X.createStream(34962,xa.buffer):X.getBuffer(xa.buffer),mb="type"in xa?Fa[xa.type]:Kb.dtype,La=!!xa.normalized,Va=xa.size|0,ma=xa.offset|0,Mb=xa.stride|0,Fb=xa.divisor|0);vb=K.buffer;K.buffer=Kb;Ra=K.divisor;K.divisor=Fb;nb=K.normalized;K.normalized=La;ec=K.offset;K.offset=ma;Ac=K.size;K.size=Va;uc=K.state;K.state=Lb;$a=K.stride;K.stride=Mb;
ic=K.type;K.type=mb;sd=K.w;K.w=Na;Ta=K.x;K.x=$b;Oc=K.y;K.y=Pa;Ab=K.z;K.z=ub;wa.buffer=a.positionBuffer;Wa=!1;Wb=null;tc=0;Xb=!1;Lc=Rb=0;Sb=1;Sd=0;Ec=5126;ud=Yc=Pc=yd=0;qa(wa)?(Wa=!0,Wb=X.createStream(34962,wa),Ec=Wb.dtype):(Wb=X.getBuffer(wa))?Ec=Wb.dtype:"constant"in wa?(Sb=2,"number"===typeof wa.constant?(Pc=wa.constant,Yc=ud=yd=0):(Pc=0<wa.constant.length?wa.constant[0]:0,Yc=1<wa.constant.length?wa.constant[1]:0,ud=2<wa.constant.length?wa.constant[2]:0,yd=3<wa.constant.length?wa.constant[3]:0)):
(Wb=qa(wa.buffer)?X.createStream(34962,wa.buffer):X.getBuffer(wa.buffer),Ec="type"in wa?Fa[wa.type]:Wb.dtype,Xb=!!wa.normalized,Lc=wa.size|0,Rb=wa.offset|0,Sd=wa.stride|0,tc=wa.divisor|0);mc=q.buffer;q.buffer=Wb;vc=q.divisor;q.divisor=tc;fc=q.normalized;q.normalized=Xb;bb=q.offset;q.offset=Rb;sc=q.size;q.size=Lc;Ub=q.state;q.state=Sb;Yb=q.stride;q.stride=Sd;cc=q.type;q.type=Ec;gc=q.w;q.w=yd;xc=q.x;q.x=Pc;Bc=q.y;q.y=Yc;cd=q.z;q.z=ud;ka.buffer=a.positionFractBuffer;Sc=!1;Tc=null;Uc=0;Zc=!1;dd=md=0;
$c=1;jc=0;bc=5126;yc=ed=Wc=ad=0;qa(ka)?(Sc=!0,Tc=X.createStream(34962,ka),bc=Tc.dtype):(Tc=X.getBuffer(ka))?bc=Tc.dtype:"constant"in ka?($c=2,"number"===typeof ka.constant?(Wc=ka.constant,ed=yc=ad=0):(Wc=0<ka.constant.length?ka.constant[0]:0,ed=1<ka.constant.length?ka.constant[1]:0,yc=2<ka.constant.length?ka.constant[2]:0,ad=3<ka.constant.length?ka.constant[3]:0)):(Tc=qa(ka.buffer)?X.createStream(34962,ka.buffer):X.getBuffer(ka.buffer),bc="type"in ka?Fa[ka.type]:Tc.dtype,Zc=!!ka.normalized,dd=ka.size|
0,md=ka.offset|0,jc=ka.stride|0,Uc=ka.divisor|0);id=m.buffer;m.buffer=Tc;Ed=m.divisor;m.divisor=Uc;ye=m.normalized;m.normalized=Zc;wd=m.offset;m.offset=md;jd=m.size;m.size=dd;Je=m.state;m.state=$c;Pd=m.stride;m.stride=jc;Yd=m.type;m.type=bc;de=m.w;m.w=ad;ae=m.x;m.x=Wc;Ld=m.y;m.y=ed;Id=m.z;m.z=yc;ca.buffer=a.colorBuffer;od=!1;Vc=null;vd=0;td=!1;xd=kd=0;Bd=1;Fd=0;je=5126;ke=me=ze=le=0;qa(ca)?(od=!0,Vc=X.createStream(34962,ca),je=Vc.dtype):(Vc=X.getBuffer(ca))?je=Vc.dtype:"constant"in ca?(Bd=2,"number"===
typeof ca.constant?(ze=ca.constant,me=ke=le=0):(ze=0<ca.constant.length?ca.constant[0]:0,me=1<ca.constant.length?ca.constant[1]:0,ke=2<ca.constant.length?ca.constant[2]:0,le=3<ca.constant.length?ca.constant[3]:0)):(Vc=qa(ca.buffer)?X.createStream(34962,ca.buffer):X.getBuffer(ca.buffer),je="type"in ca?Fa[ca.type]:Vc.dtype,td=!!ca.normalized,xd=ca.size|0,kd=ca.offset|0,Fd=ca.stride|0,vd=ca.divisor|0);he=E.buffer;E.buffer=Vc;ue=E.divisor;E.divisor=vd;ee=E.normalized;E.normalized=td;ne=E.offset;E.offset=
kd;Qc=E.size;E.size=xd;hd=E.state;E.state=Bd;ve=E.stride;E.stride=Fd;re=E.type;E.type=je;Md=E.w;E.w=le;Qd=E.x;E.x=ze;Td=E.y;E.y=me;Ud=E.z;E.z=ke;oe=ia.buffer;ia.buffer=h;Ae=ia.divisor;ia.divisor=0;De=ia.normalized;ia.normalized=!1;se=ia.offset;ia.offset=0;Te=ia.size;ia.size=0;Ue=ia.state;ia.state=1;Pe=ia.stride;ia.stride=8;we=ia.type;ia.type=5126;He=ia.w;ia.w=0;Ke=ia.x;ia.x=0;Le=ia.y;ia.y=0;Me=ia.z;ia.z=0;Ie=C.buffer;C.buffer=e;Od=C.divisor;C.divisor=0;Zd=C.normalized;C.normalized=!1;ce=C.offset;
C.offset=4;fe=C.size;C.size=0;Ne=C.state;C.state=1;Jd=C.stride;C.stride=8;Vd=C.type;C.type=5126;Fe=C.w;C.w=0;Oe=C.x;C.x=0;cf=C.y;C.y=0;bf=C.z;C.z=0;Ve=A.vert;A.vert=20;Qe=A.frag;A.frag=19;T.dirty=!0;b(ea,a,f);ea.viewportWidth=x;ea.viewportHeight=t;O[0]=da;O[1]=p;O[2]=Aa;O[3]=B;R[0]=z;R[1]=va;R[2]=Ma;R[3]=Bb;pa.blend_enable=N;ra[0]=ha;ra[1]=ba;ya[0]=D;ya[1]=G;ya[2]=H;ya[3]=u;pa.depth_enable=ua;v[0]=aa;v[1]=ja;v[2]=W;v[3]=Xa;pa.scissor_enable=za;pa.stencil_enable=V;oa&&(g.cpuTime+=performance.now()-
Da);S.offset=Y;S.count=Ca;S.instances=na;S.primitive=Ea;I[23]=Ba;I[24]=M;I[22]=Z;I[31]=Dc;I[32]=Ic;I[33]=qc;I[10]=pc;I[34]=zc;I[6]=ab;I[7]=Ya;I[21]=Za;I[8]=Ob;I[9]=rc;I[3]=jb;Hb&&X.destroyStream(Eb);F.buffer=Ia;F.divisor=rb;F.normalized=Ja;F.offset=cb;F.size=eb;F.state=Ka;F.stride=kb;F.type=Sa;F.w=tb;F.x=sb;F.y=Oa;F.z=Cc;Qa&&X.destroyStream(Kb);K.buffer=vb;K.divisor=Ra;K.normalized=nb;K.offset=ec;K.size=Ac;K.state=uc;K.stride=$a;K.type=ic;K.w=sd;K.x=Ta;K.y=Oc;K.z=Ab;Wa&&X.destroyStream(Wb);q.buffer=
mc;q.divisor=vc;q.normalized=fc;q.offset=bb;q.size=sc;q.state=Ub;q.stride=Yb;q.type=cc;q.w=gc;q.x=xc;q.y=Bc;q.z=cd;Sc&&X.destroyStream(Tc);m.buffer=id;m.divisor=Ed;m.normalized=ye;m.offset=wd;m.size=jd;m.state=Je;m.stride=Pd;m.type=Yd;m.w=de;m.x=ae;m.y=Ld;m.z=Id;od&&X.destroyStream(Vc);E.buffer=he;E.divisor=ue;E.normalized=ee;E.offset=ne;E.size=Qc;E.state=hd;E.stride=ve;E.type=re;E.w=Md;E.x=Qd;E.y=Td;E.z=Ud;ia.buffer=oe;ia.divisor=Ae;ia.normalized=De;ia.offset=se;ia.size=Te;ia.state=Ue;ia.stride=
Pe;ia.type=we;ia.w=He;ia.x=Ke;ia.y=Le;ia.z=Me;C.buffer=Ie;C.divisor=Od;C.normalized=Zd;C.offset=ce;C.size=fe;C.state=Ne;C.stride=Jd;C.type=Vd;C.w=Fe;C.x=Oe;C.y=cf;C.z=bf;A.vert=Ve;A.frag=Qe;T.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la,M,X,ea,T){var S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,
ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa,ka,ca,ta,fb,Ga,gb,fa;S=a.attributes;N=a.buffer;r=a.context;P=a.current;Q=a.draw;qa=a.elements;pa=a.extensions;A=a.framebuffer;I=a.gl;ga=a.isBufferArgs;R=a.next;na=a.shader;ra=a.uniforms;Ba=a.vao;ya=R.blend_color;ha=P.blend_color;Ca=R.blend_equation;ja=P.blend_equation;oa=R.blend_func;za=P.blend_func;Ma=R.colorMask;Aa=P.colorMask;Bb=R.depth_range;Xa=P.depth_range;v=R.polygonOffset_offset;w=P.polygonOffset_offset;da=R.sample_coverage;
ua=P.sample_coverage;Da=R.scissor_box;lb=P.scissor_box;Ib=R.stencil_func;ba=P.stencil_func;O=R.stencil_opBack;va=P.stencil_opBack;Fa=R.stencil_opFront;sa=P.stencil_opFront;xa=R.viewport;wa=P.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ca={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};fb={divisor:1,offset:4,stride:4};Ga={divisor:1,offset:16,stride:8};gb={divisor:1,offset:24,stride:8};fa={divisor:1,offset:0,stride:8};return{batch:function(a,
d){var c,x,t,C,y,l;c=A.next;c!==A.cur&&(c?I.bindFramebuffer(36160,c.framebuffer):I.bindFramebuffer(36160,null),A.cur=c);if(P.dirty){var q,m,u,E,F,K,xa,L,ra,ya,ia,oa,Da,Ca,na,Z,Nd,Kd,ma,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb;q=R.dither;q!==P.dither&&(q?I.enable(3024):I.disable(3024),P.dither=q);m=R.depth_func;m!==P.depth_func&&(I.depthFunc(m),P.depth_func=m);u=Bb[0];E=Bb[1];if(u!==Xa[0]||E!==Xa[1])I.depthRange(u,E),Xa[0]=u,Xa[1]=E;F=R.depth_mask;F!==P.depth_mask&&(I.depthMask(F),P.depth_mask=F);K=Ma[0];
xa=Ma[1];L=Ma[2];ra=Ma[3];if(K!==Aa[0]||xa!==Aa[1]||L!==Aa[2]||ra!==Aa[3])I.colorMask(K,xa,L,ra),Aa[0]=K,Aa[1]=xa,Aa[2]=L,Aa[3]=ra;ya=R.frontFace;ya!==P.frontFace&&(I.frontFace(ya),P.frontFace=ya);ia=R.lineWidth;ia!==P.lineWidth&&(I.lineWidth(ia),P.lineWidth=ia);oa=R.polygonOffset_enable;oa!==P.polygonOffset_enable&&(oa?I.enable(32823):I.disable(32823),P.polygonOffset_enable=oa);Da=v[0];Ca=v[1];if(Da!==w[0]||Ca!==w[1])I.polygonOffset(Da,Ca),w[0]=Da,w[1]=Ca;na=R.sample_alpha;na!==P.sample_alpha&&(na?
I.enable(32926):I.disable(32926),P.sample_alpha=na);Z=R.sample_enable;Z!==P.sample_enable&&(Z?I.enable(32928):I.disable(32928),P.sample_enable=Z);Nd=da[0];Kd=da[1];if(Nd!==ua[0]||Kd!==ua[1])I.sampleCoverage(Nd,Kd),ua[0]=Nd,ua[1]=Kd;ma=R.stencil_mask;ma!==P.stencil_mask&&(I.stencilMask(ma),P.stencil_mask=ma);nd=Ib[0];bd=Ib[1];rd=Ib[2];if(nd!==ba[0]||bd!==ba[1]||rd!==ba[2])I.stencilFunc(nd,bd,rd),ba[0]=nd,ba[1]=bd,ba[2]=rd;Mc=Fa[0];pd=Fa[1];Fc=Fa[2];fd=Fa[3];if(Mc!==sa[0]||pd!==sa[1]||Fc!==sa[2]||fd!==
sa[3])I.stencilOpSeparate(Mc,pd,Fc,fd),sa[0]=Mc,sa[1]=pd,sa[2]=Fc,sa[3]=fd;Rc=O[0];Jc=O[1];Cb=O[2];Gb=O[3];if(Rc!==va[0]||Jc!==va[1]||Cb!==va[2]||Gb!==va[3])I.stencilOpSeparate(Rc,Jc,Cb,Gb),va[0]=Rc,va[1]=Jc,va[2]=Cb,va[3]=Gb}I.blendColor(0,0,0,0);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=0;I.enable(3042);P.blend_enable=!0;I.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;I.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;I.enable(2884);P.cull_enable=!0;I.cullFace(1029);P.cull_face=
1029;I.enable(3089);P.scissor_enable=!0;I.disable(2960);P.stencil_enable=!1;if(x=P.profile)t=performance.now(),g.count+=d;I.useProgram(J.program);C=pa.angle_instanced_arrays;var Gc,xb,wc,Db,Kc;Ba.setVAO(null);Gc=D.location;xb=S[Gc];xb.buffer||I.enableVertexAttribArray(Gc);if(5126!==xb.type||1!==xb.size||xb.buffer!==h||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)I.bindBuffer(34962,h.buffer),I.vertexAttribPointer(Gc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=h,xb.normalized=!1,xb.offset=0,
xb.stride=8;0!==xb.divisor&&(C.vertexAttribDivisorANGLE(Gc,0),xb.divisor=0);wc=k.location;Db=S[wc];Db.buffer||I.enableVertexAttribArray(wc);if(5126!==Db.type||1!==Db.size||Db.buffer!==e||!1!==Db.normalized||4!==Db.offset||8!==Db.stride)I.bindBuffer(34962,e.buffer),I.vertexAttribPointer(wc,1,5126,!1,8,4),Db.type=5126,Db.size=1,Db.buffer=e,Db.normalized=!1,Db.offset=4,Db.stride=8;0!==Db.divisor&&(C.vertexAttribDivisorANGLE(wc,0),Db.divisor=0);(Kc=Q.elements)?I.bindBuffer(34963,Kc.buffer.buffer):Ba.currentVAO&&
(Kc=qa.getElements(Ba.currentVAO.elements))&&I.bindBuffer(34963,Kc.buffer.buffer);for(y=0;y<d;++y){l=a[y];var kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,
Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc;kc=l.viewport;Hc=kc.x|0;gd=kc.y|0;Xc="width"in kc?kc.width|0:r.framebufferWidth-Hc;Dc="height"in kc?kc.height|0:r.framebufferHeight-gd;dc=r.viewportWidth;r.viewportWidth=Xc;Ic=r.viewportHeight;r.viewportHeight=Dc;I.viewport(Hc,gd,Xc,Dc);wa[0]=Hc;wa[1]=gd;wa[2]=Xc;wa[3]=Dc;(oc=aa.call(this,r,l,y))?I.enable(2929):I.disable(2929);P.depth_enable=oc;qc=l.viewport;lc=qc.x|0;pc=qc.y|0;db="width"in qc?qc.width|0:r.framebufferWidth-lc;zc="height"in qc?qc.height|0:r.framebufferHeight-
pc;I.scissor(lc,pc,db,zc);lb[0]=lc;lb[1]=pc;lb[2]=db;lb[3]=zc;ta.buffer=l.positionBuffer;yb=!1;ab=null;Nb=0;Ya=!1;Za=ob=0;Nc=1;Ob=0;Jb=5126;Hb=jb=Pb=rc=0;ga(ta)?(yb=!0,ab=N.createStream(34962,ta),Jb=ab.dtype):(ab=N.getBuffer(ta))?Jb=ab.dtype:"constant"in ta?(Nc=2,"number"===typeof ta.constant?(Pb=ta.constant,jb=Hb=rc=0):(Pb=0<ta.constant.length?ta.constant[0]:0,jb=1<ta.constant.length?ta.constant[1]:0,Hb=2<ta.constant.length?ta.constant[2]:0,rc=3<ta.constant.length?ta.constant[3]:0)):(ab=ga(ta.buffer)?
N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),Jb="type"in ta?ka[ta.type]:ab.dtype,Ya=!!ta.normalized,Za=ta.size|0,ob=ta.offset|0,Ob=ta.stride|0,Nb=ta.divisor|0);Eb=p.location;wb=S[Eb];if(1===Nc){wb.buffer||I.enableVertexAttribArray(Eb);hb=Za||2;if(wb.type!==Jb||wb.size!==hb||wb.buffer!==ab||wb.normalized!==Ya||wb.offset!==ob||wb.stride!==Ob)I.bindBuffer(34962,ab.buffer),I.vertexAttribPointer(Eb,hb,Jb,Ya,Ob,ob),wb.type=Jb,wb.size=hb,wb.buffer=ab,wb.normalized=Ya,wb.offset=ob,wb.stride=Ob;
wb.divisor!==Nb&&(C.vertexAttribDivisorANGLE(Eb,Nb),wb.divisor=Nb)}else if(wb.buffer&&(I.disableVertexAttribArray(Eb),wb.buffer=null),wb.x!==Pb||wb.y!==jb||wb.z!==Hb||wb.w!==rc)I.vertexAttrib4f(Eb,Pb,jb,Hb,rc),wb.x=Pb,wb.y=jb,wb.z=Hb,wb.w=rc;Ga.buffer=l.positionBuffer;Zb=!1;Qb=null;qb=0;Ua=!1;zb=Vb=0;hc=1;ib=0;pb=5126;cb=Ja=rb=Ia=0;ga(Ga)?(Zb=!0,Qb=N.createStream(34962,Ga),pb=Qb.dtype):(Qb=N.getBuffer(Ga))?pb=Qb.dtype:"constant"in Ga?(hc=2,"number"===typeof Ga.constant?(rb=Ga.constant,Ja=cb=Ia=0):
(rb=0<Ga.constant.length?Ga.constant[0]:0,Ja=1<Ga.constant.length?Ga.constant[1]:0,cb=2<Ga.constant.length?Ga.constant[2]:0,Ia=3<Ga.constant.length?Ga.constant[3]:0)):(Qb=ga(Ga.buffer)?N.createStream(34962,Ga.buffer):N.getBuffer(Ga.buffer),pb="type"in Ga?ka[Ga.type]:Qb.dtype,Ua=!!Ga.normalized,zb=Ga.size|0,Vb=Ga.offset|0,ib=Ga.stride|0,qb=Ga.divisor|0);eb=B.location;Ka=S[eb];if(1===hc){Ka.buffer||I.enableVertexAttribArray(eb);kb=zb||2;if(Ka.type!==pb||Ka.size!==kb||Ka.buffer!==Qb||Ka.normalized!==
Ua||Ka.offset!==Vb||Ka.stride!==ib)I.bindBuffer(34962,Qb.buffer),I.vertexAttribPointer(eb,kb,pb,Ua,ib,Vb),Ka.type=pb,Ka.size=kb,Ka.buffer=Qb,Ka.normalized=Ua,Ka.offset=Vb,Ka.stride=ib;Ka.divisor!==qb&&(C.vertexAttribDivisorANGLE(eb,qb),Ka.divisor=qb)}else if(Ka.buffer&&(I.disableVertexAttribArray(eb),Ka.buffer=null),Ka.x!==rb||Ka.y!==Ja||Ka.z!==cb||Ka.w!==Ia)I.vertexAttrib4f(eb,rb,Ja,cb,Ia),Ka.x=rb,Ka.y=Ja,Ka.z=cb,Ka.w=Ia;gb.buffer=l.positionBuffer;Sa=!1;tb=null;sb=0;Oa=!1;Qa=Cc=0;Kb=1;Fb=0;La=5126;
Mb=Lb=Va=Hd=0;ga(gb)?(Sa=!0,tb=N.createStream(34962,gb),La=tb.dtype):(tb=N.getBuffer(gb))?La=tb.dtype:"constant"in gb?(Kb=2,"number"===typeof gb.constant?(Va=gb.constant,Lb=Mb=Hd=0):(Va=0<gb.constant.length?gb.constant[0]:0,Lb=1<gb.constant.length?gb.constant[1]:0,Mb=2<gb.constant.length?gb.constant[2]:0,Hd=3<gb.constant.length?gb.constant[3]:0)):(tb=ga(gb.buffer)?N.createStream(34962,gb.buffer):N.getBuffer(gb.buffer),La="type"in gb?ka[gb.type]:tb.dtype,Oa=!!gb.normalized,Qa=gb.size|0,Cc=gb.offset|
0,Fb=gb.stride|0,sb=gb.divisor|0);mb=Ea.location;Na=S[mb];if(1===Kb){Na.buffer||I.enableVertexAttribArray(mb);$b=Qa||2;if(Na.type!==La||Na.size!==$b||Na.buffer!==tb||Na.normalized!==Oa||Na.offset!==Cc||Na.stride!==Fb)I.bindBuffer(34962,tb.buffer),I.vertexAttribPointer(mb,$b,La,Oa,Fb,Cc),Na.type=La,Na.size=$b,Na.buffer=tb,Na.normalized=Oa,Na.offset=Cc,Na.stride=Fb;Na.divisor!==sb&&(C.vertexAttribDivisorANGLE(mb,sb),Na.divisor=sb)}else if(Na.buffer&&(I.disableVertexAttribArray(mb),Na.buffer=null),Na.x!==
Va||Na.y!==Lb||Na.z!==Mb||Na.w!==Hd)I.vertexAttrib4f(mb,Va,Lb,Mb,Hd),Na.x=Va,Na.y=Lb,Na.z=Mb,Na.w=Hd;fa.buffer=l.positionBuffer;Pa=!1;ub=null;vb=0;Ra=!1;ec=nb=0;Ac=1;uc=0;$a=5126;Oc=Ta=sd=ic=0;ga(fa)?(Pa=!0,ub=N.createStream(34962,fa),$a=ub.dtype):(ub=N.getBuffer(fa))?$a=ub.dtype:"constant"in fa?(Ac=2,"number"===typeof fa.constant?(sd=fa.constant,Ta=Oc=ic=0):(sd=0<fa.constant.length?fa.constant[0]:0,Ta=1<fa.constant.length?fa.constant[1]:0,Oc=2<fa.constant.length?fa.constant[2]:0,ic=3<fa.constant.length?
fa.constant[3]:0)):(ub=ga(fa.buffer)?N.createStream(34962,fa.buffer):N.getBuffer(fa.buffer),$a="type"in fa?ka[fa.type]:ub.dtype,Ra=!!fa.normalized,ec=fa.size|0,nb=fa.offset|0,uc=fa.stride|0,vb=fa.divisor|0);Ab=la.location;Wa=S[Ab];if(1===Ac){Wa.buffer||I.enableVertexAttribArray(Ab);Wb=ec||2;if(Wa.type!==$a||Wa.size!==Wb||Wa.buffer!==ub||Wa.normalized!==Ra||Wa.offset!==nb||Wa.stride!==uc)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(Ab,Wb,$a,Ra,uc,nb),Wa.type=$a,Wa.size=Wb,Wa.buffer=ub,Wa.normalized=
Ra,Wa.offset=nb,Wa.stride=uc;Wa.divisor!==vb&&(C.vertexAttribDivisorANGLE(Ab,vb),Wa.divisor=vb)}else if(Wa.buffer&&(I.disableVertexAttribArray(Ab),Wa.buffer=null),Wa.x!==sd||Wa.y!==Ta||Wa.z!==Oc||Wa.w!==ic)I.vertexAttrib4f(Ab,sd,Ta,Oc,ic),Wa.x=sd,Wa.y=Ta,Wa.z=Oc,Wa.w=ic;ca.buffer=l.colorBuffer;tc=!1;Xb=null;Rb=0;Lc=!1;Sd=Sb=0;Ec=1;yd=0;Pc=5126;vc=mc=ud=Yc=0;ga(ca)?(tc=!0,Xb=N.createStream(34962,ca),Pc=Xb.dtype):(Xb=N.getBuffer(ca))?Pc=Xb.dtype:"constant"in ca?(Ec=2,"number"===typeof ca.constant?(ud=
ca.constant,mc=vc=Yc=0):(ud=0<ca.constant.length?ca.constant[0]:0,mc=1<ca.constant.length?ca.constant[1]:0,vc=2<ca.constant.length?ca.constant[2]:0,Yc=3<ca.constant.length?ca.constant[3]:0)):(Xb=ga(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),Pc="type"in ca?ka[ca.type]:Xb.dtype,Lc=!!ca.normalized,Sd=ca.size|0,Sb=ca.offset|0,yd=ca.stride|0,Rb=ca.divisor|0);fc=U.location;bb=S[fc];if(1===Ec){bb.buffer||I.enableVertexAttribArray(fc);sc=Sd||4;if(bb.type!==Pc||bb.size!==sc||bb.buffer!==
Xb||bb.normalized!==Lc||bb.offset!==Sb||bb.stride!==yd)I.bindBuffer(34962,Xb.buffer),I.vertexAttribPointer(fc,sc,Pc,Lc,yd,Sb),bb.type=Pc,bb.size=sc,bb.buffer=Xb,bb.normalized=Lc,bb.offset=Sb,bb.stride=yd;bb.divisor!==Rb&&(C.vertexAttribDivisorANGLE(fc,Rb),bb.divisor=Rb)}else if(bb.buffer&&(I.disableVertexAttribArray(fc),bb.buffer=null),bb.x!==ud||bb.y!==mc||bb.z!==vc||bb.w!==Yc)I.vertexAttrib4f(fc,ud,mc,vc,Yc),bb.x=ud,bb.y=mc,bb.z=vc,bb.w=Yc;fb.buffer=l.colorBuffer;Ub=!1;Yb=null;cc=0;gc=!1;Bc=xc=
0;cd=1;Sc=0;Tc=5126;dd=md=Zc=Uc=0;ga(fb)?(Ub=!0,Yb=N.createStream(34962,fb),Tc=Yb.dtype):(Yb=N.getBuffer(fb))?Tc=Yb.dtype:"constant"in fb?(cd=2,"number"===typeof fb.constant?(Zc=fb.constant,md=dd=Uc=0):(Zc=0<fb.constant.length?fb.constant[0]:0,md=1<fb.constant.length?fb.constant[1]:0,dd=2<fb.constant.length?fb.constant[2]:0,Uc=3<fb.constant.length?fb.constant[3]:0)):(Yb=ga(fb.buffer)?N.createStream(34962,fb.buffer):N.getBuffer(fb.buffer),Tc="type"in fb?ka[fb.type]:Yb.dtype,gc=!!fb.normalized,Bc=fb.size|
0,xc=fb.offset|0,Sc=fb.stride|0,cc=fb.divisor|0);$c=W.location;jc=S[$c];if(1===cd){jc.buffer||I.enableVertexAttribArray($c);bc=Bc||4;if(jc.type!==Tc||jc.size!==bc||jc.buffer!==Yb||jc.normalized!==gc||jc.offset!==xc||jc.stride!==Sc)I.bindBuffer(34962,Yb.buffer),I.vertexAttribPointer($c,bc,Tc,gc,Sc,xc),jc.type=Tc,jc.size=bc,jc.buffer=Yb,jc.normalized=gc,jc.offset=xc,jc.stride=Sc;jc.divisor!==cc&&(C.vertexAttribDivisorANGLE($c,cc),jc.divisor=cc)}else if(jc.buffer&&(I.disableVertexAttribArray($c),jc.buffer=
null),jc.x!==Zc||jc.y!==md||jc.z!==dd||jc.w!==Uc)I.vertexAttrib4f($c,Zc,md,dd,Uc),jc.x=Zc,jc.y=md,jc.z=dd,jc.w=Uc;ad=l.scale;Wc=ad[0];yc=ad[1];y&&ed===Wc&&id===yc||(ed=Wc,id=yc,I.uniform2f(M.location,Wc,yc));Ed=l.translate;ye=Ed[0];jd=Ed[1];y&&wd===ye&&Je===jd||(wd=ye,Je=jd,I.uniform2f(ea.location,ye,jd));Pd=l.thickness;y&&Yd===Pd||(Yd=Pd,I.uniform1f(X.location,Pd));de=l.depth;y&&ae===de||(ae=de,I.uniform1f(G.location,de));Ld=b.call(this,r,l,y);Id=Ld[0];Vc=Ld[1];td=Ld[2];xd=Ld[3];y&&od===Id&&vd===
Vc&&kd===td&&Bd===xd||(od=Id,vd=Vc,kd=td,Bd=xd,I.uniform4f(T.location,Id,Vc,td,xd));Fd=l.miterLimit;y&&je===Fd||(je=Fd,I.uniform1f(V.location,Fd));le=n.call(this,r,l,y);y&&ze===le||(ze=le,I.uniform1f(f.location,le));me=l.dashLength;y&&ke===me||(ke=me,I.uniform1f(z.location,me));he=l.opacity;y&&ue===he||(ue=he,I.uniform1f(H.location,he));(ee=l.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);ne=ee._texture;I.uniform1i(Y.location,ne.bind());Qc=l.count;0<Qc?Kc?C.drawElementsInstancedANGLE(5,
4,Kc.type,0<<(Kc.type-5121>>1),Qc):C.drawArraysInstancedANGLE(5,0,4,Qc):0>Qc&&(Kc?I.drawElements(5,4,Kc.type,0<<(Kc.type-5121>>1)):I.drawArrays(5,0,4));r.viewportWidth=dc;r.viewportHeight=Ic;yb&&N.destroyStream(ab);Zb&&N.destroyStream(Qb);Sa&&N.destroyStream(tb);Pa&&N.destroyStream(ub);tc&&N.destroyStream(Xb);Ub&&N.destroyStream(Yb);ne.unbind()}P.dirty=!0;Ba.setVAO(null);x&&(g.cpuTime+=performance.now()-t)},draw:function(a){var b,n,C,l,y,q,m,u,E,F,K,xa,L,J,ra,ya,aa,ia,oa,Da,Ca,na,Z,Nd,Kd,ma,nd,bd,
rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd;b=A.next;b!==A.cur&&(b?I.bindFramebuffer(36160,b.framebuffer):I.bindFramebuffer(36160,null),A.cur=b);if(P.dirty){var Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc;Ec=
R.dither;Ec!==P.dither&&(Ec?I.enable(3024):I.disable(3024),P.dither=Ec);yd=R.depth_func;yd!==P.depth_func&&(I.depthFunc(yd),P.depth_func=yd);Pc=Bb[0];Yc=Bb[1];if(Pc!==Xa[0]||Yc!==Xa[1])I.depthRange(Pc,Yc),Xa[0]=Pc,Xa[1]=Yc;ud=R.depth_mask;ud!==P.depth_mask&&(I.depthMask(ud),P.depth_mask=ud);mc=Ma[0];vc=Ma[1];fc=Ma[2];bb=Ma[3];if(mc!==Aa[0]||vc!==Aa[1]||fc!==Aa[2]||bb!==Aa[3])I.colorMask(mc,vc,fc,bb),Aa[0]=mc,Aa[1]=vc,Aa[2]=fc,Aa[3]=bb;sc=R.frontFace;sc!==P.frontFace&&(I.frontFace(sc),P.frontFace=
sc);Ub=R.lineWidth;Ub!==P.lineWidth&&(I.lineWidth(Ub),P.lineWidth=Ub);Yb=R.polygonOffset_enable;Yb!==P.polygonOffset_enable&&(Yb?I.enable(32823):I.disable(32823),P.polygonOffset_enable=Yb);cc=v[0];gc=v[1];if(cc!==w[0]||gc!==w[1])I.polygonOffset(cc,gc),w[0]=cc,w[1]=gc;xc=R.sample_alpha;xc!==P.sample_alpha&&(xc?I.enable(32926):I.disable(32926),P.sample_alpha=xc);Bc=R.sample_enable;Bc!==P.sample_enable&&(Bc?I.enable(32928):I.disable(32928),P.sample_enable=Bc);cd=da[0];Sc=da[1];if(cd!==ua[0]||Sc!==ua[1])I.sampleCoverage(cd,
Sc),ua[0]=cd,ua[1]=Sc;Tc=R.stencil_mask;Tc!==P.stencil_mask&&(I.stencilMask(Tc),P.stencil_mask=Tc);Uc=Ib[0];Zc=Ib[1];md=Ib[2];if(Uc!==ba[0]||Zc!==ba[1]||md!==ba[2])I.stencilFunc(Uc,Zc,md),ba[0]=Uc,ba[1]=Zc,ba[2]=md;dd=Fa[0];$c=Fa[1];jc=Fa[2];bc=Fa[3];if(dd!==sa[0]||$c!==sa[1]||jc!==sa[2]||bc!==sa[3])I.stencilOpSeparate(dd,$c,jc,bc),sa[0]=dd,sa[1]=$c,sa[2]=jc,sa[3]=bc;ad=O[0];Wc=O[1];ed=O[2];yc=O[3];if(ad!==va[0]||Wc!==va[1]||ed!==va[2]||yc!==va[3])I.stencilOpSeparate(ad,Wc,ed,yc),va[0]=ad,va[1]=Wc,
va[2]=ed,va[3]=yc}n=a.viewport;C=n.x|0;l=n.y|0;y="width"in n?n.width|0:r.framebufferWidth-C;q="height"in n?n.height|0:r.framebufferHeight-l;m=r.viewportWidth;r.viewportWidth=y;u=r.viewportHeight;r.viewportHeight=q;I.viewport(C,l,y,q);wa[0]=C;wa[1]=l;wa[2]=y;wa[3]=q;I.blendColor(0,0,0,0);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=0;I.enable(3042);P.blend_enable=!0;I.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;I.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;I.enable(2884);
P.cull_enable=!0;I.cullFace(1029);P.cull_face=1029;(E=t.call(this,r,a,0))?I.enable(2929):I.disable(2929);P.depth_enable=E;F=a.viewport;K=F.x|0;xa=F.y|0;L="width"in F?F.width|0:r.framebufferWidth-K;J="height"in F?F.height|0:r.framebufferHeight-xa;I.scissor(K,xa,L,J);lb[0]=K;lb[1]=xa;lb[2]=L;lb[3]=J;I.enable(3089);P.scissor_enable=!0;I.disable(2960);P.stencil_enable=!1;if(ra=P.profile)ya=performance.now(),g.count++;I.useProgram(x.program);aa=pa.angle_instanced_arrays;Ba.setVAO(null);ta.buffer=a.positionBuffer;
ia=!1;oa=null;Da=0;Ca=!1;Z=na=0;Nd=1;Kd=0;ma=5126;Mc=rd=bd=nd=0;ga(ta)?(ia=!0,oa=N.createStream(34962,ta),ma=oa.dtype):(oa=N.getBuffer(ta))?ma=oa.dtype:"constant"in ta?(Nd=2,"number"===typeof ta.constant?(bd=ta.constant,rd=Mc=nd=0):(bd=0<ta.constant.length?ta.constant[0]:0,rd=1<ta.constant.length?ta.constant[1]:0,Mc=2<ta.constant.length?ta.constant[2]:0,nd=3<ta.constant.length?ta.constant[3]:0)):(oa=ga(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),ma="type"in ta?ka[ta.type]:oa.dtype,
Ca=!!ta.normalized,Z=ta.size|0,na=ta.offset|0,Kd=ta.stride|0,Da=ta.divisor|0);pd=p.location;Fc=S[pd];if(1===Nd){Fc.buffer||I.enableVertexAttribArray(pd);fd=Z||2;if(Fc.type!==ma||Fc.size!==fd||Fc.buffer!==oa||Fc.normalized!==Ca||Fc.offset!==na||Fc.stride!==Kd)I.bindBuffer(34962,oa.buffer),I.vertexAttribPointer(pd,fd,ma,Ca,Kd,na),Fc.type=ma,Fc.size=fd,Fc.buffer=oa,Fc.normalized=Ca,Fc.offset=na,Fc.stride=Kd;Fc.divisor!==Da&&(aa.vertexAttribDivisorANGLE(pd,Da),Fc.divisor=Da)}else if(Fc.buffer&&(I.disableVertexAttribArray(pd),
Fc.buffer=null),Fc.x!==bd||Fc.y!==rd||Fc.z!==Mc||Fc.w!==nd)I.vertexAttrib4f(pd,bd,rd,Mc,nd),Fc.x=bd,Fc.y=rd,Fc.z=Mc,Fc.w=nd;Ga.buffer=a.positionBuffer;Rc=!1;Jc=null;Cb=0;Gb=!1;xb=Gc=0;wc=1;Db=0;Kc=5126;Xc=gd=Hc=kc=0;ga(Ga)?(Rc=!0,Jc=N.createStream(34962,Ga),Kc=Jc.dtype):(Jc=N.getBuffer(Ga))?Kc=Jc.dtype:"constant"in Ga?(wc=2,"number"===typeof Ga.constant?(Hc=Ga.constant,gd=Xc=kc=0):(Hc=0<Ga.constant.length?Ga.constant[0]:0,gd=1<Ga.constant.length?Ga.constant[1]:0,Xc=2<Ga.constant.length?Ga.constant[2]:
0,kc=3<Ga.constant.length?Ga.constant[3]:0)):(Jc=ga(Ga.buffer)?N.createStream(34962,Ga.buffer):N.getBuffer(Ga.buffer),Kc="type"in Ga?ka[Ga.type]:Jc.dtype,Gb=!!Ga.normalized,xb=Ga.size|0,Gc=Ga.offset|0,Db=Ga.stride|0,Cb=Ga.divisor|0);Dc=B.location;dc=S[Dc];if(1===wc){dc.buffer||I.enableVertexAttribArray(Dc);Ic=xb||2;if(dc.type!==Kc||dc.size!==Ic||dc.buffer!==Jc||dc.normalized!==Gb||dc.offset!==Gc||dc.stride!==Db)I.bindBuffer(34962,Jc.buffer),I.vertexAttribPointer(Dc,Ic,Kc,Gb,Db,Gc),dc.type=Kc,dc.size=
Ic,dc.buffer=Jc,dc.normalized=Gb,dc.offset=Gc,dc.stride=Db;dc.divisor!==Cb&&(aa.vertexAttribDivisorANGLE(Dc,Cb),dc.divisor=Cb)}else if(dc.buffer&&(I.disableVertexAttribArray(Dc),dc.buffer=null),dc.x!==Hc||dc.y!==gd||dc.z!==Xc||dc.w!==kc)I.vertexAttrib4f(Dc,Hc,gd,Xc,kc),dc.x=Hc,dc.y=gd,dc.z=Xc,dc.w=kc;gb.buffer=a.positionBuffer;oc=!1;qc=null;lc=0;pc=!1;zc=db=0;yb=1;ab=0;Nb=5126;Nc=Za=ob=Ya=0;ga(gb)?(oc=!0,qc=N.createStream(34962,gb),Nb=qc.dtype):(qc=N.getBuffer(gb))?Nb=qc.dtype:"constant"in gb?(yb=
2,"number"===typeof gb.constant?(ob=gb.constant,Za=Nc=Ya=0):(ob=0<gb.constant.length?gb.constant[0]:0,Za=1<gb.constant.length?gb.constant[1]:0,Nc=2<gb.constant.length?gb.constant[2]:0,Ya=3<gb.constant.length?gb.constant[3]:0)):(qc=ga(gb.buffer)?N.createStream(34962,gb.buffer):N.getBuffer(gb.buffer),Nb="type"in gb?ka[gb.type]:qc.dtype,pc=!!gb.normalized,zc=gb.size|0,db=gb.offset|0,ab=gb.stride|0,lc=gb.divisor|0);Ob=Ea.location;Jb=S[Ob];if(1===yb){Jb.buffer||I.enableVertexAttribArray(Ob);rc=zc||2;if(Jb.type!==
Nb||Jb.size!==rc||Jb.buffer!==qc||Jb.normalized!==pc||Jb.offset!==db||Jb.stride!==ab)I.bindBuffer(34962,qc.buffer),I.vertexAttribPointer(Ob,rc,Nb,pc,ab,db),Jb.type=Nb,Jb.size=rc,Jb.buffer=qc,Jb.normalized=pc,Jb.offset=db,Jb.stride=ab;Jb.divisor!==lc&&(aa.vertexAttribDivisorANGLE(Ob,lc),Jb.divisor=lc)}else if(Jb.buffer&&(I.disableVertexAttribArray(Ob),Jb.buffer=null),Jb.x!==ob||Jb.y!==Za||Jb.z!==Nc||Jb.w!==Ya)I.vertexAttrib4f(Ob,ob,Za,Nc,Ya),Jb.x=ob,Jb.y=Za,Jb.z=Nc,Jb.w=Ya;fa.buffer=a.positionBuffer;
Pb=!1;jb=null;Hb=0;Eb=!1;hb=wb=0;Zb=1;Qb=0;qb=5126;hc=zb=Vb=Ua=0;ga(fa)?(Pb=!0,jb=N.createStream(34962,fa),qb=jb.dtype):(jb=N.getBuffer(fa))?qb=jb.dtype:"constant"in fa?(Zb=2,"number"===typeof fa.constant?(Vb=fa.constant,zb=hc=Ua=0):(Vb=0<fa.constant.length?fa.constant[0]:0,zb=1<fa.constant.length?fa.constant[1]:0,hc=2<fa.constant.length?fa.constant[2]:0,Ua=3<fa.constant.length?fa.constant[3]:0)):(jb=ga(fa.buffer)?N.createStream(34962,fa.buffer):N.getBuffer(fa.buffer),qb="type"in fa?ka[fa.type]:jb.dtype,
Eb=!!fa.normalized,hb=fa.size|0,wb=fa.offset|0,Qb=fa.stride|0,Hb=fa.divisor|0);ib=la.location;pb=S[ib];if(1===Zb){pb.buffer||I.enableVertexAttribArray(ib);Ia=hb||2;if(pb.type!==qb||pb.size!==Ia||pb.buffer!==jb||pb.normalized!==Eb||pb.offset!==wb||pb.stride!==Qb)I.bindBuffer(34962,jb.buffer),I.vertexAttribPointer(ib,Ia,qb,Eb,Qb,wb),pb.type=qb,pb.size=Ia,pb.buffer=jb,pb.normalized=Eb,pb.offset=wb,pb.stride=Qb;pb.divisor!==Hb&&(aa.vertexAttribDivisorANGLE(ib,Hb),pb.divisor=Hb)}else if(pb.buffer&&(I.disableVertexAttribArray(ib),
pb.buffer=null),pb.x!==Vb||pb.y!==zb||pb.z!==hc||pb.w!==Ua)I.vertexAttrib4f(ib,Vb,zb,hc,Ua),pb.x=Vb,pb.y=zb,pb.z=hc,pb.w=Ua;ca.buffer=a.colorBuffer;rb=!1;Ja=null;cb=0;eb=!1;kb=Ka=0;Sa=1;tb=0;sb=5126;Kb=Qa=Cc=Oa=0;ga(ca)?(rb=!0,Ja=N.createStream(34962,ca),sb=Ja.dtype):(Ja=N.getBuffer(ca))?sb=Ja.dtype:"constant"in ca?(Sa=2,"number"===typeof ca.constant?(Cc=ca.constant,Qa=Kb=Oa=0):(Cc=0<ca.constant.length?ca.constant[0]:0,Qa=1<ca.constant.length?ca.constant[1]:0,Kb=2<ca.constant.length?ca.constant[2]:
0,Oa=3<ca.constant.length?ca.constant[3]:0)):(Ja=ga(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),sb="type"in ca?ka[ca.type]:Ja.dtype,eb=!!ca.normalized,kb=ca.size|0,Ka=ca.offset|0,tb=ca.stride|0,cb=ca.divisor|0);Fb=U.location;La=S[Fb];if(1===Sa){La.buffer||I.enableVertexAttribArray(Fb);Hd=kb||4;if(La.type!==sb||La.size!==Hd||La.buffer!==Ja||La.normalized!==eb||La.offset!==Ka||La.stride!==tb)I.bindBuffer(34962,Ja.buffer),I.vertexAttribPointer(Fb,Hd,sb,eb,tb,Ka),La.type=sb,La.size=
Hd,La.buffer=Ja,La.normalized=eb,La.offset=Ka,La.stride=tb;La.divisor!==cb&&(aa.vertexAttribDivisorANGLE(Fb,cb),La.divisor=cb)}else if(La.buffer&&(I.disableVertexAttribArray(Fb),La.buffer=null),La.x!==Cc||La.y!==Qa||La.z!==Kb||La.w!==Oa)I.vertexAttrib4f(Fb,Cc,Qa,Kb,Oa),La.x=Cc,La.y=Qa,La.z=Kb,La.w=Oa;fb.buffer=a.colorBuffer;Va=!1;Lb=null;Mb=0;mb=!1;$b=Na=0;Pa=1;ub=0;vb=5126;Ac=ec=nb=Ra=0;ga(fb)?(Va=!0,Lb=N.createStream(34962,fb),vb=Lb.dtype):(Lb=N.getBuffer(fb))?vb=Lb.dtype:"constant"in fb?(Pa=2,
"number"===typeof fb.constant?(nb=fb.constant,ec=Ac=Ra=0):(nb=0<fb.constant.length?fb.constant[0]:0,ec=1<fb.constant.length?fb.constant[1]:0,Ac=2<fb.constant.length?fb.constant[2]:0,Ra=3<fb.constant.length?fb.constant[3]:0)):(Lb=ga(fb.buffer)?N.createStream(34962,fb.buffer):N.getBuffer(fb.buffer),vb="type"in fb?ka[fb.type]:Lb.dtype,mb=!!fb.normalized,$b=fb.size|0,Na=fb.offset|0,ub=fb.stride|0,Mb=fb.divisor|0);uc=W.location;$a=S[uc];if(1===Pa){$a.buffer||I.enableVertexAttribArray(uc);ic=$b||4;if($a.type!==
vb||$a.size!==ic||$a.buffer!==Lb||$a.normalized!==mb||$a.offset!==Na||$a.stride!==ub)I.bindBuffer(34962,Lb.buffer),I.vertexAttribPointer(uc,ic,vb,mb,ub,Na),$a.type=vb,$a.size=ic,$a.buffer=Lb,$a.normalized=mb,$a.offset=Na,$a.stride=ub;$a.divisor!==Mb&&(aa.vertexAttribDivisorANGLE(uc,Mb),$a.divisor=Mb)}else if($a.buffer&&(I.disableVertexAttribArray(uc),$a.buffer=null),$a.x!==nb||$a.y!==ec||$a.z!==Ac||$a.w!==Ra)I.vertexAttrib4f(uc,nb,ec,Ac,Ra),$a.x=nb,$a.y=ec,$a.z=Ac,$a.w=Ra;sd=D.location;Ta=S[sd];Ta.buffer||
I.enableVertexAttribArray(sd);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==h||!1!==Ta.normalized||0!==Ta.offset||8!==Ta.stride)I.bindBuffer(34962,h.buffer),I.vertexAttribPointer(sd,1,5126,!1,8,0),Ta.type=5126,Ta.size=1,Ta.buffer=h,Ta.normalized=!1,Ta.offset=0,Ta.stride=8;0!==Ta.divisor&&(aa.vertexAttribDivisorANGLE(sd,0),Ta.divisor=0);Oc=k.location;Ab=S[Oc];Ab.buffer||I.enableVertexAttribArray(Oc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==e||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)I.bindBuffer(34962,
e.buffer),I.vertexAttribPointer(Oc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=e,Ab.normalized=!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(aa.vertexAttribDivisorANGLE(Oc,0),Ab.divisor=0);Wa=a.scale;I.uniform2f(M.location,Wa[0],Wa[1]);Wb=a.translate;I.uniform2f(ea.location,Wb[0],Wb[1]);I.uniform1f(X.location,a.thickness);I.uniform1f(G.location,a.depth);tc=c.call(this,r,a,0);I.uniform4f(T.location,tc[0],tc[1],tc[2],tc[3]);I.uniform1f(V.location,a.miterLimit);Xb=d.call(this,r,a,0);I.uniform1f(f.location,
Xb);I.uniform1f(z.location,a.dashLength);I.uniform1f(H.location,a.opacity);(Rb=a.dashTexture)&&"framebuffer"===Rb._reglType&&(Rb=Rb.color[0]);Lc=Rb._texture;I.uniform1i(Y.location,Lc.bind());(Sb=Q.elements)?I.bindBuffer(34963,Sb.buffer.buffer):Ba.currentVAO&&(Sb=qa.getElements(Ba.currentVAO.elements))&&I.bindBuffer(34963,Sb.buffer.buffer);Sd=a.count;0<Sd?Sb?aa.drawElementsInstancedANGLE(5,4,Sb.type,0<<(Sb.type-5121>>1),Sd):aa.drawArraysInstancedANGLE(5,0,4,Sd):0>Sd&&(Sb?I.drawElements(5,4,Sb.type,
0<<(Sb.type-5121>>1)):I.drawArrays(5,0,4));P.dirty=!0;Ba.setVAO(null);r.viewportWidth=m;r.viewportHeight=u;ra&&(g.cpuTime+=performance.now()-ya);ia&&N.destroyStream(oa);Rc&&N.destroyStream(Jc);oc&&N.destroyStream(qc);Pb&&N.destroyStream(jb);rb&&N.destroyStream(Ja);Va&&N.destroyStream(Lb);Lc.unbind()},scope:function(a,b,f){var d,k,v,c,n,w,A,x,t,O,da,p,Aa,B,z,va,Ma,Fa,I,S,Bb,sa,ha,ba,T,D,G,H,ua,J,wa,qa,U,aa,ja,W,Xa,X,za,V,ea,Y,Ib,pa,Ea,la,Ba,lb,M,Z,ld,db,zc,yb,ab,Nb,Ya,ob,Za,ma,Ob,Jb,rc,Pb,jb,Hb,Eb,
wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,
Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;d=a.viewport;k=d.x|0;v=d.y|0;c="width"in d?d.width|0:r.framebufferWidth-k;n="height"in d?d.height|0:r.framebufferHeight-v;w=r.viewportWidth;r.viewportWidth=c;A=r.viewportHeight;r.viewportHeight=n;x=xa[0];xa[0]=k;t=xa[1];xa[1]=v;O=xa[2];xa[2]=c;da=xa[3];xa[3]=n;p=ya[0];ya[0]=0;Aa=ya[1];ya[1]=0;B=ya[2];ya[2]=0;z=ya[3];ya[3]=0;va=R.blend_enable;R.blend_enable=!0;Ma=Ca[0];Ca[0]=32774;Fa=Ca[1];Ca[1]=32774;I=oa[0];oa[0]=770;S=oa[1];oa[1]=771;Bb=oa[2];oa[2]=773;
sa=oa[3];oa[3]=1;ha=R.cull_enable;R.cull_enable=!0;ba=R.cull_face;R.cull_face=1029;T=y.call(this,r,a,f);D=R.depth_enable;R.depth_enable=T;G=a.viewport;H=G.x|0;ua=G.y|0;J="width"in G?G.width|0:r.framebufferWidth-H;wa="height"in G?G.height|0:r.framebufferHeight-ua;qa=Da[0];Da[0]=H;U=Da[1];Da[1]=ua;aa=Da[2];Da[2]=J;ja=Da[3];Da[3]=wa;W=R.scissor_enable;R.scissor_enable=!0;Xa=R.stencil_enable;R.stencil_enable=!1;if(X=P.profile)za=performance.now(),g.count++;V=Q.offset;Q.offset=0;ea=Q.count;Q.count=4;Y=
a.count;Ib=Q.instances;Q.instances=Y;pa=Q.primitive;Q.primitive=5;Ea=a.dashLength;la=ra[23];ra[23]=Ea;Ba=a.dashTexture;lb=ra[24];ra[24]=Ba;M=a.depth;Z=ra[22];ra[22]=M;ld=a.id;db=ra[31];ra[31]=ld;zc=a.miterLimit;yb=ra[32];ra[32]=zc;ab=l.call(this,r,a,f);Nb=ra[33];ra[33]=ab;Ya=a.opacity;ob=ra[10];ra[10]=Ya;Za=r.pixelRatio;ma=ra[34];ra[34]=Za;Ob=a.scale;Jb=ra[6];ra[6]=Ob;rc=a.scaleFract;Pb=ra[7];ra[7]=rc;jb=a.thickness;Hb=ra[21];ra[21]=jb;Eb=a.translate;wb=ra[8];ra[8]=Eb;hb=a.translateFract;Zb=ra[9];
ra[9]=hb;Qb=F.call(this,r,a,f);qb=ra[3];ra[3]=Qb;ca.buffer=a.colorBuffer;Ua=!1;Vb=null;zb=0;hc=!1;pb=ib=0;Ia=1;rb=0;Ja=5126;kb=Ka=eb=cb=0;ga(ca)?(Ua=!0,Vb=N.createStream(34962,ca),Ja=Vb.dtype):(Vb=N.getBuffer(ca))?Ja=Vb.dtype:"constant"in ca?(Ia=2,"number"===typeof ca.constant?(eb=ca.constant,Ka=kb=cb=0):(eb=0<ca.constant.length?ca.constant[0]:0,Ka=1<ca.constant.length?ca.constant[1]:0,kb=2<ca.constant.length?ca.constant[2]:0,cb=3<ca.constant.length?ca.constant[3]:0)):(Vb=ga(ca.buffer)?N.createStream(34962,
ca.buffer):N.getBuffer(ca.buffer),Ja="type"in ca?ka[ca.type]:Vb.dtype,hc=!!ca.normalized,pb=ca.size|0,ib=ca.offset|0,rb=ca.stride|0,zb=ca.divisor|0);Sa=K.buffer;K.buffer=Vb;tb=K.divisor;K.divisor=zb;sb=K.normalized;K.normalized=hc;Oa=K.offset;K.offset=ib;Cc=K.size;K.size=pb;Qa=K.state;K.state=Ia;Kb=K.stride;K.stride=rb;Fb=K.type;K.type=Ja;La=K.w;K.w=cb;Hd=K.x;K.x=eb;Va=K.y;K.y=Ka;Lb=K.z;K.z=kb;ta.buffer=a.positionBuffer;Mb=!1;mb=null;Na=0;$b=!1;ub=Pa=0;vb=1;Ra=0;nb=5126;$a=uc=Ac=ec=0;ga(ta)?(Mb=!0,
mb=N.createStream(34962,ta),nb=mb.dtype):(mb=N.getBuffer(ta))?nb=mb.dtype:"constant"in ta?(vb=2,"number"===typeof ta.constant?(Ac=ta.constant,uc=$a=ec=0):(Ac=0<ta.constant.length?ta.constant[0]:0,uc=1<ta.constant.length?ta.constant[1]:0,$a=2<ta.constant.length?ta.constant[2]:0,ec=3<ta.constant.length?ta.constant[3]:0)):(mb=ga(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),nb="type"in ta?ka[ta.type]:mb.dtype,$b=!!ta.normalized,ub=ta.size|0,Pa=ta.offset|0,Ra=ta.stride|0,Na=ta.divisor|
0);ic=q.buffer;q.buffer=mb;sd=q.divisor;q.divisor=Na;Ta=q.normalized;q.normalized=$b;Oc=q.offset;q.offset=Pa;Ab=q.size;q.size=ub;Wa=q.state;q.state=vb;Wb=q.stride;q.stride=Ra;tc=q.type;q.type=nb;Xb=q.w;q.w=ec;Rb=q.x;q.x=Ac;Lc=q.y;q.y=uc;Sb=q.z;q.z=$a;fb.buffer=a.colorBuffer;Sd=!1;Ec=null;yd=0;Pc=!1;ud=Yc=0;mc=1;vc=0;fc=5126;Yb=Ub=sc=bb=0;ga(fb)?(Sd=!0,Ec=N.createStream(34962,fb),fc=Ec.dtype):(Ec=N.getBuffer(fb))?fc=Ec.dtype:"constant"in fb?(mc=2,"number"===typeof fb.constant?(sc=fb.constant,Ub=Yb=
bb=0):(sc=0<fb.constant.length?fb.constant[0]:0,Ub=1<fb.constant.length?fb.constant[1]:0,Yb=2<fb.constant.length?fb.constant[2]:0,bb=3<fb.constant.length?fb.constant[3]:0)):(Ec=ga(fb.buffer)?N.createStream(34962,fb.buffer):N.getBuffer(fb.buffer),fc="type"in fb?ka[fb.type]:Ec.dtype,Pc=!!fb.normalized,ud=fb.size|0,Yc=fb.offset|0,vc=fb.stride|0,yd=fb.divisor|0);cc=m.buffer;m.buffer=Ec;gc=m.divisor;m.divisor=yd;xc=m.normalized;m.normalized=Pc;Bc=m.offset;m.offset=Yc;cd=m.size;m.size=ud;Sc=m.state;m.state=
mc;Tc=m.stride;m.stride=vc;Uc=m.type;m.type=fc;Zc=m.w;m.w=bb;md=m.x;m.x=sc;dd=m.y;m.y=Ub;$c=m.z;m.z=Yb;Ga.buffer=a.positionBuffer;jc=!1;bc=null;ad=0;Wc=!1;yc=ed=0;id=1;Ed=0;ye=5126;Pd=Je=jd=wd=0;ga(Ga)?(jc=!0,bc=N.createStream(34962,Ga),ye=bc.dtype):(bc=N.getBuffer(Ga))?ye=bc.dtype:"constant"in Ga?(id=2,"number"===typeof Ga.constant?(jd=Ga.constant,Je=Pd=wd=0):(jd=0<Ga.constant.length?Ga.constant[0]:0,Je=1<Ga.constant.length?Ga.constant[1]:0,Pd=2<Ga.constant.length?Ga.constant[2]:0,wd=3<Ga.constant.length?
Ga.constant[3]:0)):(bc=ga(Ga.buffer)?N.createStream(34962,Ga.buffer):N.getBuffer(Ga.buffer),ye="type"in Ga?ka[Ga.type]:bc.dtype,Wc=!!Ga.normalized,yc=Ga.size|0,ed=Ga.offset|0,Ed=Ga.stride|0,ad=Ga.divisor|0);Yd=E.buffer;E.buffer=bc;de=E.divisor;E.divisor=ad;ae=E.normalized;E.normalized=Wc;Ld=E.offset;E.offset=ed;Id=E.size;E.size=yc;od=E.state;E.state=id;Vc=E.stride;E.stride=Ed;vd=E.type;E.type=ye;td=E.w;E.w=wd;kd=E.x;E.x=jd;xd=E.y;E.y=Je;Bd=E.z;E.z=Pd;Fd=ia.buffer;ia.buffer=h;je=ia.divisor;ia.divisor=
0;le=ia.normalized;ia.normalized=!1;ze=ia.offset;ia.offset=0;me=ia.size;ia.size=0;ke=ia.state;ia.state=1;he=ia.stride;ia.stride=8;ue=ia.type;ia.type=5126;ee=ia.w;ia.w=0;ne=ia.x;ia.x=0;Qc=ia.y;ia.y=0;hd=ia.z;ia.z=0;ve=C.buffer;C.buffer=e;re=C.divisor;C.divisor=0;Md=C.normalized;C.normalized=!1;Qd=C.offset;C.offset=4;Td=C.size;C.size=0;Ud=C.state;C.state=1;oe=C.stride;C.stride=8;Ae=C.type;C.type=5126;De=C.w;C.w=0;se=C.x;C.x=0;Te=C.y;C.y=0;Ue=C.z;C.z=0;gb.buffer=a.positionBuffer;Pe=!1;we=null;He=0;Ke=
!1;Me=Le=0;Ie=1;Od=0;Zd=5126;Jd=Ne=fe=ce=0;ga(gb)?(Pe=!0,we=N.createStream(34962,gb),Zd=we.dtype):(we=N.getBuffer(gb))?Zd=we.dtype:"constant"in gb?(Ie=2,"number"===typeof gb.constant?(fe=gb.constant,Ne=Jd=ce=0):(fe=0<gb.constant.length?gb.constant[0]:0,Ne=1<gb.constant.length?gb.constant[1]:0,Jd=2<gb.constant.length?gb.constant[2]:0,ce=3<gb.constant.length?gb.constant[3]:0)):(we=ga(gb.buffer)?N.createStream(34962,gb.buffer):N.getBuffer(gb.buffer),Zd="type"in gb?ka[gb.type]:we.dtype,Ke=!!gb.normalized,
Me=gb.size|0,Le=gb.offset|0,Od=gb.stride|0,He=gb.divisor|0);Vd=L.buffer;L.buffer=we;Fe=L.divisor;L.divisor=He;Oe=L.normalized;L.normalized=Ke;cf=L.offset;L.offset=Le;bf=L.size;L.size=Me;Ve=L.state;L.state=Ie;Qe=L.stride;L.stride=Od;af=L.type;L.type=Zd;Ze=L.w;L.w=ce;We=L.x;L.x=fe;Xe=L.y;L.y=Ne;Wd=L.z;L.z=Jd;fa.buffer=a.positionBuffer;be=!1;Ye=null;kf=0;of=!1;lf=gf=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;ga(fa)?(be=!0,Ye=N.createStream(34962,fa),sf=Ye.dtype):(Ye=N.getBuffer(fa))?sf=Ye.dtype:"constant"in fa?
(mf=2,"number"===typeof fa.constant?(tf=fa.constant,Cf=Df=pf=0):(tf=0<fa.constant.length?fa.constant[0]:0,Cf=1<fa.constant.length?fa.constant[1]:0,Df=2<fa.constant.length?fa.constant[2]:0,pf=3<fa.constant.length?fa.constant[3]:0)):(Ye=ga(fa.buffer)?N.createStream(34962,fa.buffer):N.getBuffer(fa.buffer),sf="type"in fa?ka[fa.type]:Ye.dtype,of=!!fa.normalized,lf=fa.size|0,gf=fa.offset|0,nf=fa.stride|0,kf=fa.divisor|0);Re=u.buffer;u.buffer=Ye;Ge=u.divisor;u.divisor=kf;qf=u.normalized;u.normalized=of;
rf=u.offset;u.offset=gf;Ef=u.size;u.size=lf;Hf=u.state;u.state=mf;Bf=u.stride;u.stride=nf;Ff=u.type;u.type=sf;Gf=u.w;u.w=pf;xf=u.x;u.x=tf;yf=u.y;u.y=Cf;wf=u.z;u.z=Df;zf=na.vert;na.vert=36;Af=na.frag;na.frag=35;P.dirty=!0;b(r,a,f);r.viewportWidth=w;r.viewportHeight=A;xa[0]=x;xa[1]=t;xa[2]=O;xa[3]=da;ya[0]=p;ya[1]=Aa;ya[2]=B;ya[3]=z;R.blend_enable=va;Ca[0]=Ma;Ca[1]=Fa;oa[0]=I;oa[1]=S;oa[2]=Bb;oa[3]=sa;R.cull_enable=ha;R.cull_face=ba;R.depth_enable=D;Da[0]=qa;Da[1]=U;Da[2]=aa;Da[3]=ja;R.scissor_enable=
W;R.stencil_enable=Xa;X&&(g.cpuTime+=performance.now()-za);Q.offset=V;Q.count=ea;Q.instances=Ib;Q.primitive=pa;ra[23]=la;ra[24]=lb;ra[22]=Z;ra[31]=db;ra[32]=yb;ra[33]=Nb;ra[10]=ob;ra[34]=ma;ra[6]=Jb;ra[7]=Pb;ra[21]=Hb;ra[8]=wb;ra[9]=Zb;ra[3]=qb;Ua&&N.destroyStream(Vb);K.buffer=Sa;K.divisor=tb;K.normalized=sb;K.offset=Oa;K.size=Cc;K.state=Qa;K.stride=Kb;K.type=Fb;K.w=La;K.x=Hd;K.y=Va;K.z=Lb;Mb&&N.destroyStream(mb);q.buffer=ic;q.divisor=sd;q.normalized=Ta;q.offset=Oc;q.size=Ab;q.state=Wa;q.stride=Wb;
q.type=tc;q.w=Xb;q.x=Rb;q.y=Lc;q.z=Sb;Sd&&N.destroyStream(Ec);m.buffer=cc;m.divisor=gc;m.normalized=xc;m.offset=Bc;m.size=cd;m.state=Sc;m.stride=Tc;m.type=Uc;m.w=Zc;m.x=md;m.y=dd;m.z=$c;jc&&N.destroyStream(bc);E.buffer=Yd;E.divisor=de;E.normalized=ae;E.offset=Ld;E.size=Id;E.state=od;E.stride=Vc;E.type=vd;E.w=td;E.x=kd;E.y=xd;E.z=Bd;ia.buffer=Fd;ia.divisor=je;ia.normalized=le;ia.offset=ze;ia.size=me;ia.state=ke;ia.stride=he;ia.type=ue;ia.w=ee;ia.x=ne;ia.y=Qc;ia.z=hd;C.buffer=ve;C.divisor=re;C.normalized=
Md;C.offset=Qd;C.size=Td;C.state=Ud;C.stride=oe;C.type=Ae;C.w=De;C.x=se;C.y=Te;C.z=Ue;Pe&&N.destroyStream(we);L.buffer=Vd;L.divisor=Fe;L.normalized=Oe;L.offset=cf;L.size=bf;L.state=Ve;L.stride=Qe;L.type=af;L.w=Ze;L.x=We;L.y=Xe;L.z=Wd;be&&N.destroyStream(Ye);u.buffer=Re;u.divisor=Ge;u.normalized=qf;u.offset=rf;u.size=Ef;u.state=Hf;u.stride=Bf;u.type=Ff;u.w=Gf;u.x=xf;u.y=yf;u.z=wf;na.vert=zf;na.frag=Af;P.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,
g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u){var J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la,M,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa;J=a.attributes;aa=a.buffer;b=a.context;n=a.current;U=a.draw;p=a.elements;W=a.extensions;B=a.framebuffer;z=a.gl;Y=a.isBufferArgs;G=a.next;D=a.shader;k=a.uniforms;V=a.vao;f=G.blend_color;Ea=n.blend_color;H=G.blend_equation;la=n.blend_equation;M=G.blend_func;X=n.blend_func;ea=G.colorMask;T=n.colorMask;S=G.depth_range;N=n.depth_range;r=G.polygonOffset_offset;P=n.polygonOffset_offset;
Q=G.sample_coverage;qa=n.sample_coverage;pa=G.scissor_box;A=n.scissor_box;I=G.stencil_func;ga=n.stencil_func;R=G.stencil_opBack;na=n.stencil_opBack;ra=G.stencil_opFront;Ba=n.stencil_opFront;ya=G.viewport;ha=n.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(a,f){var e,d,k,v,h,c;e=B.next;e!==B.cur&&(e?z.bindFramebuffer(36160,e.framebuffer):z.bindFramebuffer(36160,null),B.cur=
e);if(n.dirty){var x,t,D,H,ba,O,va,Fa,sa,xa,wa,ka,ca,ya,pa,M,gb,fa,Z,ld,Ha,ac,Tb,ma,Cd,qe,Xd,Be,xe,Rd,pe,ie;x=G.dither;x!==n.dither&&(x?z.enable(3024):z.disable(3024),n.dither=x);t=G.depth_func;t!==n.depth_func&&(z.depthFunc(t),n.depth_func=t);D=S[0];H=S[1];if(D!==N[0]||H!==N[1])z.depthRange(D,H),N[0]=D,N[1]=H;ba=G.depth_mask;ba!==n.depth_mask&&(z.depthMask(ba),n.depth_mask=ba);O=ea[0];va=ea[1];Fa=ea[2];sa=ea[3];if(O!==T[0]||va!==T[1]||Fa!==T[2]||sa!==T[3])z.colorMask(O,va,Fa,sa),T[0]=O,T[1]=va,T[2]=
Fa,T[3]=sa;xa=G.cull_enable;xa!==n.cull_enable&&(xa?z.enable(2884):z.disable(2884),n.cull_enable=xa);wa=G.cull_face;wa!==n.cull_face&&(z.cullFace(wa),n.cull_face=wa);ka=G.frontFace;ka!==n.frontFace&&(z.frontFace(ka),n.frontFace=ka);ca=G.lineWidth;ca!==n.lineWidth&&(z.lineWidth(ca),n.lineWidth=ca);ya=G.polygonOffset_enable;ya!==n.polygonOffset_enable&&(ya?z.enable(32823):z.disable(32823),n.polygonOffset_enable=ya);pa=r[0];M=r[1];if(pa!==P[0]||M!==P[1])z.polygonOffset(pa,M),P[0]=pa,P[1]=M;gb=G.sample_alpha;
gb!==n.sample_alpha&&(gb?z.enable(32926):z.disable(32926),n.sample_alpha=gb);fa=G.sample_enable;fa!==n.sample_enable&&(fa?z.enable(32928):z.disable(32928),n.sample_enable=fa);Z=Q[0];ld=Q[1];if(Z!==qa[0]||ld!==qa[1])z.sampleCoverage(Z,ld),qa[0]=Z,qa[1]=ld;Ha=G.stencil_mask;Ha!==n.stencil_mask&&(z.stencilMask(Ha),n.stencil_mask=Ha);ac=I[0];Tb=I[1];ma=I[2];if(ac!==ga[0]||Tb!==ga[1]||ma!==ga[2])z.stencilFunc(ac,Tb,ma),ga[0]=ac,ga[1]=Tb,ga[2]=ma;Cd=ra[0];qe=ra[1];Xd=ra[2];Be=ra[3];if(Cd!==Ba[0]||qe!==
Ba[1]||Xd!==Ba[2]||Be!==Ba[3])z.stencilOpSeparate(Cd,qe,Xd,Be),Ba[0]=Cd,Ba[1]=qe,Ba[2]=Xd,Ba[3]=Be;xe=R[0];Rd=R[1];pe=R[2];ie=R[3];if(xe!==na[0]||Rd!==na[1]||pe!==na[2]||ie!==na[3])z.stencilOpSeparate(xe,Rd,pe,ie),na[0]=xe,na[1]=Rd,na[2]=pe,na[3]=ie}z.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;z.enable(3042);n.blend_enable=!0;z.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;z.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;z.disable(2929);n.depth_enable=!1;
z.enable(3089);n.scissor_enable=!0;z.disable(2960);n.stencil_enable=!1;if(d=n.profile)k=performance.now(),g.count+=f;z.useProgram(y.program);v=W.angle_instanced_arrays;var Dd;V.setVAO(null);Dd=U.instances;for(h=0;h<f;++h){c=a[h];var qd,ge,Ad,Ee,$e,Se,Gd,Ce,te,Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb;qd=c.viewport;ge=qd.x|0;Ad=
qd.y|0;Ee="width"in qd?qd.width|0:b.framebufferWidth-ge;$e="height"in qd?qd.height|0:b.framebufferHeight-Ad;Se=b.viewportWidth;b.viewportWidth=Ee;Gd=b.viewportHeight;b.viewportHeight=$e;z.viewport(ge,Ad,Ee,$e);ha[0]=ge;ha[1]=Ad;ha[2]=Ee;ha[3]=$e;Ce=c.viewport;te=Ce.x|0;Nd=Ce.y|0;Kd="width"in Ce?Ce.width|0:b.framebufferWidth-te;$d="height"in Ce?Ce.height|0:b.framebufferHeight-Nd;z.scissor(te,Nd,Kd,$d);A[0]=te;A[1]=Nd;A[2]=Kd;A[3]=$d;ja.buffer=c.positionBuffer;nd=!1;bd=null;rd=0;Mc=!1;Fc=pd=0;fd=1;
Rc=0;Jc=5126;xb=Gc=Gb=Cb=0;Y(ja)?(nd=!0,bd=aa.createStream(34962,ja),Jc=bd.dtype):(bd=aa.getBuffer(ja))?Jc=bd.dtype:"constant"in ja?(fd=2,"number"===typeof ja.constant?(Gb=ja.constant,Gc=xb=Cb=0):(Gb=0<ja.constant.length?ja.constant[0]:0,Gc=1<ja.constant.length?ja.constant[1]:0,xb=2<ja.constant.length?ja.constant[2]:0,Cb=3<ja.constant.length?ja.constant[3]:0)):(bd=Y(ja.buffer)?aa.createStream(34962,ja.buffer):aa.getBuffer(ja.buffer),Jc="type"in ja?Ca[ja.type]:bd.dtype,Mc=!!ja.normalized,Fc=ja.size|
0,pd=ja.offset|0,Rc=ja.stride|0,rd=ja.divisor|0);wc=m.location;Db=J[wc];if(1===fd){Db.buffer||z.enableVertexAttribArray(wc);Kc=Fc||2;if(Db.type!==Jc||Db.size!==Kc||Db.buffer!==bd||Db.normalized!==Mc||Db.offset!==pd||Db.stride!==Rc)z.bindBuffer(34962,bd.buffer),z.vertexAttribPointer(wc,Kc,Jc,Mc,Rc,pd),Db.type=Jc,Db.size=Kc,Db.buffer=bd,Db.normalized=Mc,Db.offset=pd,Db.stride=Rc;Db.divisor!==rd&&(v.vertexAttribDivisorANGLE(wc,rd),Db.divisor=rd)}else if(Db.buffer&&(z.disableVertexAttribArray(wc),Db.buffer=
null),Db.x!==Gb||Db.y!==Gc||Db.z!==xb||Db.w!==Cb)z.vertexAttrib4f(wc,Gb,Gc,xb,Cb),Db.x=Gb,Db.y=Gc,Db.z=xb,Db.w=Cb;oa.buffer=c.positionFractBuffer;kc=!1;Hc=null;gd=0;Xc=!1;dc=Dc=0;Ic=1;oc=0;qc=5126;zc=db=pc=lc=0;Y(oa)?(kc=!0,Hc=aa.createStream(34962,oa),qc=Hc.dtype):(Hc=aa.getBuffer(oa))?qc=Hc.dtype:"constant"in oa?(Ic=2,"number"===typeof oa.constant?(pc=oa.constant,db=zc=lc=0):(pc=0<oa.constant.length?oa.constant[0]:0,db=1<oa.constant.length?oa.constant[1]:0,zc=2<oa.constant.length?oa.constant[2]:
0,lc=3<oa.constant.length?oa.constant[3]:0)):(Hc=Y(oa.buffer)?aa.createStream(34962,oa.buffer):aa.getBuffer(oa.buffer),qc="type"in oa?Ca[oa.type]:Hc.dtype,Xc=!!oa.normalized,dc=oa.size|0,Dc=oa.offset|0,oc=oa.stride|0,gd=oa.divisor|0);yb=E.location;ab=J[yb];if(1===Ic){ab.buffer||z.enableVertexAttribArray(yb);Nb=dc||2;if(ab.type!==qc||ab.size!==Nb||ab.buffer!==Hc||ab.normalized!==Xc||ab.offset!==Dc||ab.stride!==oc)z.bindBuffer(34962,Hc.buffer),z.vertexAttribPointer(yb,Nb,qc,Xc,oc,Dc),ab.type=qc,ab.size=
Nb,ab.buffer=Hc,ab.normalized=Xc,ab.offset=Dc,ab.stride=oc;ab.divisor!==gd&&(v.vertexAttribDivisorANGLE(yb,gd),ab.divisor=gd)}else if(ab.buffer&&(z.disableVertexAttribArray(yb),ab.buffer=null),ab.x!==pc||ab.y!==db||ab.z!==zc||ab.w!==lc)z.vertexAttrib4f(yb,pc,db,zc,lc),ab.x=pc,ab.y=db,ab.z=zc,ab.w=lc;Ya=c.fill;ob=Ya[0];Nc=Ya[1];Jb=Ya[2];Pb=Ya[3];h&&Za===ob&&Ob===Nc&&rc===Jb&&jb===Pb||(Za=ob,Ob=Nc,rc=Jb,jb=Pb,z.uniform4f(F.location,ob,Nc,Jb,Pb));Hb=c.scale;Eb=Hb[0];hb=Hb[1];h&&wb===Eb&&Zb===hb||(wb=
Eb,Zb=hb,z.uniform2f(ia.location,Eb,hb));Qb=c.scaleFract;qb=Qb[0];Vb=Qb[1];h&&Ua===qb&&zb===Vb||(Ua=qb,zb=Vb,z.uniform2f(C.location,qb,Vb));hc=c.translate;ib=hc[0];Ia=hc[1];h&&pb===ib&&rb===Ia||(pb=ib,rb=Ia,z.uniform2f(L.location,ib,Ia));Ja=c.translateFract;cb=Ja[0];Ka=Ja[1];h&&eb===cb&&kb===Ka||(eb=cb,kb=Ka,z.uniform2f(u.location,cb,Ka));Sa=c.id;h&&tb===Sa||(tb=Sa,z.uniform1f(K.location,Sa));sb=c.opacity;h&&Oa===sb||(Oa=sb,z.uniform1f(q.location,sb));Cc=l.call(this,b,c,h);Qa=null;(Qa=(Kb=Y(Cc))?
p.createStream(Cc):p.getElements(Cc))&&z.bindBuffer(34963,Qa.buffer.buffer);if(Fb=Qa?Qa.vertCount:-1)0<Dd?Qa?v.drawElementsInstancedANGLE(4,Fb,Qa.type,0<<(Qa.type-5121>>1),Dd):v.drawArraysInstancedANGLE(4,0,Fb,Dd):0>Dd&&(Qa?z.drawElements(4,Fb,Qa.type,0<<(Qa.type-5121>>1)):z.drawArrays(4,0,Fb)),b.viewportWidth=Se,b.viewportHeight=Gd,nd&&aa.destroyStream(bd),kc&&aa.destroyStream(Hc),Kb&&p.destroyStream(Qa)}n.dirty=!0;V.setVAO(null);d&&(g.cpuTime+=performance.now()-k)},draw:function(a){var f,e,d,k,
h,c,da,l,y,D,H,ba,O,va,Fa,sa,xa,wa,ka,ca,ya,pa;f=B.next;f!==B.cur&&(f?z.bindFramebuffer(36160,f.framebuffer):z.bindFramebuffer(36160,null),B.cur=f);if(n.dirty){f=G.dither;f!==n.dither&&(f?z.enable(3024):z.disable(3024),n.dither=f);f=G.depth_func;f!==n.depth_func&&(z.depthFunc(f),n.depth_func=f);f=S[0];c=S[1];if(f!==N[0]||c!==N[1])z.depthRange(f,c),N[0]=f,N[1]=c;f=G.depth_mask;f!==n.depth_mask&&(z.depthMask(f),n.depth_mask=f);f=ea[0];c=ea[1];e=ea[2];d=ea[3];if(f!==T[0]||c!==T[1]||e!==T[2]||d!==T[3])z.colorMask(f,
c,e,d),T[0]=f,T[1]=c,T[2]=e,T[3]=d;f=G.cull_enable;f!==n.cull_enable&&(f?z.enable(2884):z.disable(2884),n.cull_enable=f);f=G.cull_face;f!==n.cull_face&&(z.cullFace(f),n.cull_face=f);f=G.frontFace;f!==n.frontFace&&(z.frontFace(f),n.frontFace=f);f=G.lineWidth;f!==n.lineWidth&&(z.lineWidth(f),n.lineWidth=f);f=G.polygonOffset_enable;f!==n.polygonOffset_enable&&(f?z.enable(32823):z.disable(32823),n.polygonOffset_enable=f);f=r[0];c=r[1];if(f!==P[0]||c!==P[1])z.polygonOffset(f,c),P[0]=f,P[1]=c;f=G.sample_alpha;
f!==n.sample_alpha&&(f?z.enable(32926):z.disable(32926),n.sample_alpha=f);f=G.sample_enable;f!==n.sample_enable&&(f?z.enable(32928):z.disable(32928),n.sample_enable=f);f=Q[0];c=Q[1];if(f!==qa[0]||c!==qa[1])z.sampleCoverage(f,c),qa[0]=f,qa[1]=c;f=G.stencil_mask;f!==n.stencil_mask&&(z.stencilMask(f),n.stencil_mask=f);f=I[0];c=I[1];e=I[2];if(f!==ga[0]||c!==ga[1]||e!==ga[2])z.stencilFunc(f,c,e),ga[0]=f,ga[1]=c,ga[2]=e;f=ra[0];c=ra[1];e=ra[2];d=ra[3];if(f!==Ba[0]||c!==Ba[1]||e!==Ba[2]||d!==Ba[3])z.stencilOpSeparate(f,
c,e,d),Ba[0]=f,Ba[1]=c,Ba[2]=e,Ba[3]=d;f=R[0];c=R[1];e=R[2];d=R[3];if(f!==na[0]||c!==na[1]||e!==na[2]||d!==na[3])z.stencilOpSeparate(f,c,e,d),na[0]=f,na[1]=c,na[2]=e,na[3]=d}f=a.viewport;e=f.x|0;d=f.y|0;k="width"in f?f.width|0:b.framebufferWidth-e;h="height"in f?f.height|0:b.framebufferHeight-d;f=b.viewportWidth;b.viewportWidth=k;c=b.viewportHeight;b.viewportHeight=h;z.viewport(e,d,k,h);ha[0]=e;ha[1]=d;ha[2]=k;ha[3]=h;z.blendColor(0,0,0,0);Ea[0]=0;Ea[1]=0;Ea[2]=0;Ea[3]=0;z.enable(3042);n.blend_enable=
!0;z.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;z.blendFuncSeparate(770,771,773,1);X[0]=770;X[1]=771;X[2]=773;X[3]=1;z.disable(2929);n.depth_enable=!1;h=a.viewport;e=h.x|0;d=h.y|0;k="width"in h?h.width|0:b.framebufferWidth-e;h="height"in h?h.height|0:b.framebufferHeight-d;z.scissor(e,d,k,h);A[0]=e;A[1]=d;A[2]=k;A[3]=h;z.enable(3089);n.scissor_enable=!0;z.disable(2960);n.stencil_enable=!1;if(e=n.profile)da=performance.now(),g.count++;z.useProgram(t.program);d=W.angle_instanced_arrays;
V.setVAO(null);ja.buffer=a.positionBuffer;k=!1;l=0;y=!1;H=D=0;ba=1;O=0;va=5126;wa=xa=sa=Fa=0;Y(ja)?(k=!0,h=aa.createStream(34962,ja),va=h.dtype):(h=aa.getBuffer(ja))?va=h.dtype:"constant"in ja?(ba=2,"number"===typeof ja.constant?(sa=ja.constant,xa=wa=Fa=0):(sa=0<ja.constant.length?ja.constant[0]:0,xa=1<ja.constant.length?ja.constant[1]:0,wa=2<ja.constant.length?ja.constant[2]:0,Fa=3<ja.constant.length?ja.constant[3]:0)):(h=Y(ja.buffer)?aa.createStream(34962,ja.buffer):aa.getBuffer(ja.buffer),va="type"in
ja?Ca[ja.type]:h.dtype,y=!!ja.normalized,H=ja.size|0,D=ja.offset|0,O=ja.stride|0,l=ja.divisor|0);ka=m.location;ca=J[ka];if(1===ba){ca.buffer||z.enableVertexAttribArray(ka);H=H||2;if(ca.type!==va||ca.size!==H||ca.buffer!==h||ca.normalized!==y||ca.offset!==D||ca.stride!==O)z.bindBuffer(34962,h.buffer),z.vertexAttribPointer(ka,H,va,y,O,D),ca.type=va,ca.size=H,ca.buffer=h,ca.normalized=y,ca.offset=D,ca.stride=O;ca.divisor!==l&&(d.vertexAttribDivisorANGLE(ka,l),ca.divisor=l)}else if(ca.buffer&&(z.disableVertexAttribArray(ka),
ca.buffer=null),ca.x!==sa||ca.y!==xa||ca.z!==wa||ca.w!==Fa)z.vertexAttrib4f(ka,sa,xa,wa,Fa),ca.x=sa,ca.y=xa,ca.z=wa,ca.w=Fa;oa.buffer=a.positionFractBuffer;l=!1;D=0;O=!1;Fa=va=0;sa=1;ka=0;ca=5126;pa=ya=wa=xa=0;Y(oa)?(l=!0,y=aa.createStream(34962,oa),ca=y.dtype):(y=aa.getBuffer(oa))?ca=y.dtype:"constant"in oa?(sa=2,"number"===typeof oa.constant?(wa=oa.constant,ya=pa=xa=0):(wa=0<oa.constant.length?oa.constant[0]:0,ya=1<oa.constant.length?oa.constant[1]:0,pa=2<oa.constant.length?oa.constant[2]:0,xa=
3<oa.constant.length?oa.constant[3]:0)):(y=Y(oa.buffer)?aa.createStream(34962,oa.buffer):aa.getBuffer(oa.buffer),ca="type"in oa?Ca[oa.type]:y.dtype,O=!!oa.normalized,Fa=oa.size|0,va=oa.offset|0,ka=oa.stride|0,D=oa.divisor|0);H=E.location;ba=J[H];if(1===sa){ba.buffer||z.enableVertexAttribArray(H);Fa=Fa||2;if(ba.type!==ca||ba.size!==Fa||ba.buffer!==y||ba.normalized!==O||ba.offset!==va||ba.stride!==ka)z.bindBuffer(34962,y.buffer),z.vertexAttribPointer(H,Fa,ca,O,ka,va),ba.type=ca,ba.size=Fa,ba.buffer=
y,ba.normalized=O,ba.offset=va,ba.stride=ka;ba.divisor!==D&&(d.vertexAttribDivisorANGLE(H,D),ba.divisor=D)}else if(ba.buffer&&(z.disableVertexAttribArray(H),ba.buffer=null),ba.x!==wa||ba.y!==ya||ba.z!==pa||ba.w!==xa)z.vertexAttrib4f(H,wa,ya,pa,xa),ba.x=wa,ba.y=ya,ba.z=pa,ba.w=xa;D=a.fill;z.uniform4f(F.location,D[0],D[1],D[2],D[3]);D=a.scale;z.uniform2f(ia.location,D[0],D[1]);D=a.scaleFract;z.uniform2f(C.location,D[0],D[1]);D=a.translate;z.uniform2f(L.location,D[0],D[1]);D=a.translateFract;z.uniform2f(u.location,
D[0],D[1]);z.uniform1f(K.location,a.id);z.uniform1f(q.location,a.opacity);D=x.call(this,b,a,0);(D=(a=Y(D))?p.createStream(D):p.getElements(D))&&z.bindBuffer(34963,D.buffer.buffer);if(O=D?D.vertCount:-1)va=U.instances,0<va?D?d.drawElementsInstancedANGLE(4,O,D.type,0<<(D.type-5121>>1),va):d.drawArraysInstancedANGLE(4,0,O,va):0>va&&(D?z.drawElements(4,O,D.type,0<<(D.type-5121>>1)):z.drawArrays(4,0,O)),n.dirty=!0,V.setVAO(null),b.viewportWidth=f,b.viewportHeight=c,e&&(g.cpuTime+=performance.now()-da),
k&&aa.destroyStream(h),l&&aa.destroyStream(y),a&&p.destroyStream(D)},scope:function(a,r,A){var x,t,v,w,da,B,z,C,I,S,O,va,Fa,y,l,R,N,ha,T,q,m,u,Q,F,E,P,K,ga,J,L,ra,qa,W,X,ia,V,ea,na,Ea,la,Ba,Z,ma,Se,Gd,Ce,te,Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb;x=a.viewport;t=x.x|0;v=x.y|0;w="width"in x?x.width|0:b.framebufferWidth-t;da="height"in x?x.height|
0:b.framebufferHeight-v;B=b.viewportWidth;b.viewportWidth=w;z=b.viewportHeight;b.viewportHeight=da;C=ya[0];ya[0]=t;I=ya[1];ya[1]=v;S=ya[2];ya[2]=w;O=ya[3];ya[3]=da;va=f[0];f[0]=0;Fa=f[1];f[1]=0;y=f[2];f[2]=0;l=f[3];f[3]=0;R=G.blend_enable;G.blend_enable=!0;N=H[0];H[0]=32774;ha=H[1];H[1]=32774;T=M[0];M[0]=770;q=M[1];M[1]=771;m=M[2];M[2]=773;u=M[3];M[3]=1;Q=G.depth_enable;G.depth_enable=!1;F=a.viewport;E=F.x|0;P=F.y|0;K="width"in F?F.width|0:b.framebufferWidth-E;ga="height"in F?F.height|0:b.framebufferHeight-
P;J=pa[0];pa[0]=E;L=pa[1];pa[1]=P;ra=pa[2];pa[2]=K;qa=pa[3];pa[3]=ga;W=G.scissor_enable;G.scissor_enable=!0;X=G.stencil_enable;G.stencil_enable=!1;if(ia=n.profile)V=performance.now(),g.count++;ea=h.call(this,b,a,A);na=null;na=(Ea=Y(ea))?p.createStream(ea):p.getElements(ea);la=U.elements;U.elements=na;Ba=U.offset;U.offset=0;Z=na?na.vertCount:-1;ma=U.count;U.count=Z;Se=U.primitive;U.primitive=4;Gd=a.fill;Ce=k[14];k[14]=Gd;te=a.id;Nd=k[31];k[31]=te;Kd=a.opacity;$d=k[10];k[10]=Kd;nd=b.pixelRatio;bd=k[34];
k[34]=nd;rd=a.scale;Mc=k[6];k[6]=rd;pd=a.scaleFract;Fc=k[7];k[7]=pd;fd=a.translate;Rc=k[8];k[8]=fd;Jc=a.translateFract;Cb=k[9];k[9]=Jc;Gb=e.call(this,b,a,A);Gc=k[3];k[3]=Gb;ja.buffer=a.positionBuffer;xb=!1;wc=null;Db=0;Kc=!1;Hc=kc=0;gd=1;Xc=0;Dc=5126;qc=oc=Ic=dc=0;Y(ja)?(xb=!0,wc=aa.createStream(34962,ja),Dc=wc.dtype):(wc=aa.getBuffer(ja))?Dc=wc.dtype:"constant"in ja?(gd=2,"number"===typeof ja.constant?(Ic=ja.constant,oc=qc=dc=0):(Ic=0<ja.constant.length?ja.constant[0]:0,oc=1<ja.constant.length?ja.constant[1]:
0,qc=2<ja.constant.length?ja.constant[2]:0,dc=3<ja.constant.length?ja.constant[3]:0)):(wc=Y(ja.buffer)?aa.createStream(34962,ja.buffer):aa.getBuffer(ja.buffer),Dc="type"in ja?Ca[ja.type]:wc.dtype,Kc=!!ja.normalized,Hc=ja.size|0,kc=ja.offset|0,Xc=ja.stride|0,Db=ja.divisor|0);lc=c.buffer;c.buffer=wc;pc=c.divisor;c.divisor=Db;db=c.normalized;c.normalized=Kc;zc=c.offset;c.offset=kc;yb=c.size;c.size=Hc;ab=c.state;c.state=gd;Nb=c.stride;c.stride=Xc;Ya=c.type;c.type=Dc;ob=c.w;c.w=dc;Za=c.x;c.x=Ic;Nc=c.y;
c.y=oc;Ob=c.z;c.z=qc;oa.buffer=a.positionFractBuffer;Jb=!1;rc=null;Pb=0;jb=!1;Eb=Hb=0;wb=1;hb=0;Zb=5126;Vb=Ua=qb=Qb=0;Y(oa)?(Jb=!0,rc=aa.createStream(34962,oa),Zb=rc.dtype):(rc=aa.getBuffer(oa))?Zb=rc.dtype:"constant"in oa?(wb=2,"number"===typeof oa.constant?(qb=oa.constant,Ua=Vb=Qb=0):(qb=0<oa.constant.length?oa.constant[0]:0,Ua=1<oa.constant.length?oa.constant[1]:0,Vb=2<oa.constant.length?oa.constant[2]:0,Qb=3<oa.constant.length?oa.constant[3]:0)):(rc=Y(oa.buffer)?aa.createStream(34962,oa.buffer):
aa.getBuffer(oa.buffer),Zb="type"in oa?Ca[oa.type]:rc.dtype,jb=!!oa.normalized,Eb=oa.size|0,Hb=oa.offset|0,hb=oa.stride|0,Pb=oa.divisor|0);zb=d.buffer;d.buffer=rc;hc=d.divisor;d.divisor=Pb;ib=d.normalized;d.normalized=jb;pb=d.offset;d.offset=Hb;Ia=d.size;d.size=Eb;rb=d.state;d.state=wb;Ja=d.stride;d.stride=hb;cb=d.type;d.type=Zb;eb=d.w;d.w=Qb;Ka=d.x;d.x=qb;kb=d.y;d.y=Ua;Sa=d.z;d.z=Vb;tb=D.vert;D.vert=42;sb=D.frag;D.frag=41;n.dirty=!0;r(b,a,A);b.viewportWidth=B;b.viewportHeight=z;ya[0]=C;ya[1]=I;ya[2]=
S;ya[3]=O;f[0]=va;f[1]=Fa;f[2]=y;f[3]=l;G.blend_enable=R;H[0]=N;H[1]=ha;M[0]=T;M[1]=q;M[2]=m;M[3]=u;G.depth_enable=Q;pa[0]=J;pa[1]=L;pa[2]=ra;pa[3]=qa;G.scissor_enable=W;G.stencil_enable=X;ia&&(g.cpuTime+=performance.now()-V);Ea&&p.destroyStream(na);U.elements=la;U.offset=Ba;U.count=ma;U.primitive=Se;k[14]=Ce;k[31]=Nd;k[10]=$d;k[34]=bd;k[6]=Mc;k[7]=Fc;k[8]=Rc;k[9]=Cb;k[3]=Gc;xb&&aa.destroyStream(wc);c.buffer=lc;c.divisor=pc;c.normalized=db;c.offset=zc;c.size=yb;c.state=ab;c.stride=Nb;c.type=Ya;c.w=
ob;c.x=Za;c.y=Nc;c.z=Ob;Jb&&aa.destroyStream(rc);d.buffer=zb;d.divisor=hc;d.normalized=ib;d.offset=pb;d.size=Ia;d.state=rb;d.stride=Ja;d.type=cb;d.w=eb;d.x=Ka;d.y=kb;d.z=Sa;D.vert=tb;D.frag=sb;n.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la,M,X,ea,T,S,N,r,P,Q,
qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa){var v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa,ka,ca,ta,Z,Ga,gb,fa,ma,nc,Ha,ac,Tb,ff,Cd,qe,Xd,Be,xe,Rd,pe,ie,Dd,qd,ge,Ad;v=a.attributes;w=a.buffer;da=a.context;ua=a.current;Da=a.draw;lb=a.elements;Ib=a.extensions;ba=a.framebuffer;O=a.gl;va=a.isBufferArgs;Fa=a.next;sa=a.shader;xa=a.uniforms;wa=a.vao;ka=Fa.blend_color;ca=ua.blend_color;ta=Fa.blend_equation;Z=ua.blend_equation;Ga=Fa.blend_func;gb=ua.blend_func;fa=Fa.colorMask;ma=ua.colorMask;nc=Fa.depth_range;
Ha=ua.depth_range;ac=Fa.polygonOffset_offset;Tb=ua.polygonOffset_offset;ff=Fa.sample_coverage;Cd=ua.sample_coverage;qe=Fa.scissor_box;Xd=ua.scissor_box;Be=Fa.stencil_func;xe=ua.stencil_func;Rd=Fa.stencil_opBack;pe=ua.stencil_opBack;ie=Fa.stencil_opFront;Dd=ua.stencil_opFront;qd=Fa.viewport;ge=ua.viewport;Ad={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,f){var b,e,d,k,h,c;b=ba.next;b!==ba.cur&&(b?O.bindFramebuffer(36160,b.framebuffer):
O.bindFramebuffer(36160,null),ba.cur=b);if(ua.dirty){var n,x,t,p,B,z,C,D,y,l,sa,q,G,m,u,ka,F,E,K,J,L,xa,U,aa,W,ia,V,Y,Ga,zc,yb,ab,Nb,Ya;n=Fa.dither;n!==ua.dither&&(n?O.enable(3024):O.disable(3024),ua.dither=n);x=ta[0];t=ta[1];if(x!==Z[0]||t!==Z[1])O.blendEquationSeparate(x,t),Z[0]=x,Z[1]=t;p=Fa.depth_func;p!==ua.depth_func&&(O.depthFunc(p),ua.depth_func=p);B=nc[0];z=nc[1];if(B!==Ha[0]||z!==Ha[1])O.depthRange(B,z),Ha[0]=B,Ha[1]=z;C=Fa.depth_mask;C!==ua.depth_mask&&(O.depthMask(C),ua.depth_mask=C);
D=fa[0];y=fa[1];l=fa[2];sa=fa[3];if(D!==ma[0]||y!==ma[1]||l!==ma[2]||sa!==ma[3])O.colorMask(D,y,l,sa),ma[0]=D,ma[1]=y,ma[2]=l,ma[3]=sa;q=Fa.cull_enable;q!==ua.cull_enable&&(q?O.enable(2884):O.disable(2884),ua.cull_enable=q);G=Fa.cull_face;G!==ua.cull_face&&(O.cullFace(G),ua.cull_face=G);m=Fa.frontFace;m!==ua.frontFace&&(O.frontFace(m),ua.frontFace=m);u=Fa.lineWidth;u!==ua.lineWidth&&(O.lineWidth(u),ua.lineWidth=u);ka=Fa.polygonOffset_enable;ka!==ua.polygonOffset_enable&&(ka?O.enable(32823):O.disable(32823),
ua.polygonOffset_enable=ka);F=ac[0];E=ac[1];if(F!==Tb[0]||E!==Tb[1])O.polygonOffset(F,E),Tb[0]=F,Tb[1]=E;K=Fa.sample_alpha;K!==ua.sample_alpha&&(K?O.enable(32926):O.disable(32926),ua.sample_alpha=K);J=Fa.sample_enable;J!==ua.sample_enable&&(J?O.enable(32928):O.disable(32928),ua.sample_enable=J);L=ff[0];xa=ff[1];if(L!==Cd[0]||xa!==Cd[1])O.sampleCoverage(L,xa),Cd[0]=L,Cd[1]=xa;U=Fa.stencil_mask;U!==ua.stencil_mask&&(O.stencilMask(U),ua.stencil_mask=U);aa=Be[0];W=Be[1];ia=Be[2];if(aa!==xe[0]||W!==xe[1]||
ia!==xe[2])O.stencilFunc(aa,W,ia),xe[0]=aa,xe[1]=W,xe[2]=ia;V=ie[0];Y=ie[1];Ga=ie[2];zc=ie[3];if(V!==Dd[0]||Y!==Dd[1]||Ga!==Dd[2]||zc!==Dd[3])O.stencilOpSeparate(V,Y,Ga,zc),Dd[0]=V,Dd[1]=Y,Dd[2]=Ga,Dd[3]=zc;yb=Rd[0];ab=Rd[1];Nb=Rd[2];Ya=Rd[3];if(yb!==pe[0]||ab!==pe[1]||Nb!==pe[2]||Ya!==pe[3])O.stencilOpSeparate(yb,ab,Nb,Ya),pe[0]=yb,pe[1]=ab,pe[2]=Nb,pe[3]=Ya}O.blendColor(0,0,0,1);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=1;O.enable(3042);ua.blend_enable=!0;O.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=
771;gb[2]=773;gb[3]=1;O.disable(2929);ua.depth_enable=!1;O.enable(3089);ua.scissor_enable=!0;O.disable(2960);ua.stencil_enable=!1;if(e=ua.profile)d=performance.now(),g.count+=f;O.useProgram(Ea.program);k=Ib.angle_instanced_arrays;var ob;wa.setVAO(null);O.uniform1i(I.location,!1);O.uniform1i(Ba.location,P.bind());ob=Da.instances;for(h=0;h<f;++h){c=a[h];var Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,
ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,qe,qd,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Za=c.viewport;Nc=Za.x|0;Ob=Za.y|0;Jb="width"in
Za?Za.width|0:da.framebufferWidth-Nc;rc="height"in Za?Za.height|0:da.framebufferHeight-Ob;Pb=da.viewportWidth;da.viewportWidth=Jb;jb=da.viewportHeight;da.viewportHeight=rc;O.viewport(Nc,Ob,Jb,rc);ge[0]=Nc;ge[1]=Ob;ge[2]=Jb;ge[3]=rc;Hb=c.viewport;Eb=Hb.x|0;wb=Hb.y|0;hb="width"in Hb?Hb.width|0:da.framebufferWidth-Eb;Zb="height"in Hb?Hb.height|0:da.framebufferHeight-wb;O.scissor(Eb,wb,hb,Zb);Xd[0]=Eb;Xd[1]=wb;Xd[2]=hb;Xd[3]=Zb;Qb=H.call(this,da,c,h);qb=!1;Ua=null;Vb=0;zb=!1;ib=hc=0;pb=1;Ia=0;rb=5126;
Ka=eb=cb=Ja=0;va(Qb)?(qb=!0,Ua=w.createStream(34962,Qb),rb=Ua.dtype):(Ua=w.getBuffer(Qb))?rb=Ua.dtype:"constant"in Qb?(pb=2,"number"===typeof Qb.constant?(cb=Qb.constant,eb=Ka=Ja=0):(cb=0<Qb.constant.length?Qb.constant[0]:0,eb=1<Qb.constant.length?Qb.constant[1]:0,Ka=2<Qb.constant.length?Qb.constant[2]:0,Ja=3<Qb.constant.length?Qb.constant[3]:0)):(Ua=va(Qb.buffer)?w.createStream(34962,Qb.buffer):w.getBuffer(Qb.buffer),rb="type"in Qb?Ad[Qb.type]:Ua.dtype,zb=!!Qb.normalized,ib=Qb.size|0,hc=Qb.offset|
0,Ia=Qb.stride|0,Vb=Qb.divisor|0);kb=Ma.location;Sa=v[kb];if(1===pb){Sa.buffer||O.enableVertexAttribArray(kb);tb=ib||1;if(Sa.type!==rb||Sa.size!==tb||Sa.buffer!==Ua||Sa.normalized!==zb||Sa.offset!==hc||Sa.stride!==Ia)O.bindBuffer(34962,Ua.buffer),O.vertexAttribPointer(kb,tb,rb,zb,Ia,hc),Sa.type=rb,Sa.size=tb,Sa.buffer=Ua,Sa.normalized=zb,Sa.offset=hc,Sa.stride=Ia;Sa.divisor!==Vb&&(k.vertexAttribDivisorANGLE(kb,Vb),Sa.divisor=Vb)}else if(Sa.buffer&&(O.disableVertexAttribArray(kb),Sa.buffer=null),Sa.x!==
cb||Sa.y!==eb||Sa.z!==Ka||Sa.w!==Ja)O.vertexAttrib4f(kb,cb,eb,Ka,Ja),Sa.x=cb,Sa.y=eb,Sa.z=Ka,Sa.w=Ja;sb=la.call(this,da,c,h);Oa=!1;Cc=null;Qa=0;Kb=!1;La=Fb=0;Hd=1;Va=0;Lb=5126;$b=Na=mb=Mb=0;va(sb)?(Oa=!0,Cc=w.createStream(34962,sb),Lb=Cc.dtype):(Cc=w.getBuffer(sb))?Lb=Cc.dtype:"constant"in sb?(Hd=2,"number"===typeof sb.constant?(mb=sb.constant,Na=$b=Mb=0):(mb=0<sb.constant.length?sb.constant[0]:0,Na=1<sb.constant.length?sb.constant[1]:0,$b=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?
sb.constant[3]:0)):(Cc=va(sb.buffer)?w.createStream(34962,sb.buffer):w.getBuffer(sb.buffer),Lb="type"in sb?Ad[sb.type]:Cc.dtype,Kb=!!sb.normalized,La=sb.size|0,Fb=sb.offset|0,Va=sb.stride|0,Qa=sb.divisor|0);Pa=Bb.location;ub=v[Pa];if(1===Hd){ub.buffer||O.enableVertexAttribArray(Pa);vb=La||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==Cc||ub.normalized!==Kb||ub.offset!==Fb||ub.stride!==Va)O.bindBuffer(34962,Cc.buffer),O.vertexAttribPointer(Pa,vb,Lb,Kb,Va,Fb),ub.type=Lb,ub.size=vb,ub.buffer=Cc,ub.normalized=
Kb,ub.offset=Fb,ub.stride=Va;ub.divisor!==Qa&&(k.vertexAttribDivisorANGLE(Pa,Qa),ub.divisor=Qa)}else if(ub.buffer&&(O.disableVertexAttribArray(Pa),ub.buffer=null),ub.x!==mb||ub.y!==Na||ub.z!==$b||ub.w!==Mb)O.vertexAttrib4f(Pa,mb,Na,$b,Mb),ub.x=mb,ub.y=Na,ub.z=$b,ub.w=Mb;Ra=M.call(this,da,c,h);nb=!1;ec=null;Ac=0;uc=!1;ic=$a=0;sd=1;Ta=0;Oc=5126;tc=Wb=Wa=Ab=0;va(Ra)?(nb=!0,ec=w.createStream(34962,Ra),Oc=ec.dtype):(ec=w.getBuffer(Ra))?Oc=ec.dtype:"constant"in Ra?(sd=2,"number"===typeof Ra.constant?(Wa=
Ra.constant,Wb=tc=Ab=0):(Wa=0<Ra.constant.length?Ra.constant[0]:0,Wb=1<Ra.constant.length?Ra.constant[1]:0,tc=2<Ra.constant.length?Ra.constant[2]:0,Ab=3<Ra.constant.length?Ra.constant[3]:0)):(ec=va(Ra.buffer)?w.createStream(34962,Ra.buffer):w.getBuffer(Ra.buffer),Oc="type"in Ra?Ad[Ra.type]:ec.dtype,uc=!!Ra.normalized,ic=Ra.size|0,$a=Ra.offset|0,Ta=Ra.stride|0,Ac=Ra.divisor|0);Xb=Aa.location;Rb=v[Xb];if(1===sd){Rb.buffer||O.enableVertexAttribArray(Xb);Lc=ic||1;if(Rb.type!==Oc||Rb.size!==Lc||Rb.buffer!==
ec||Rb.normalized!==uc||Rb.offset!==$a||Rb.stride!==Ta)O.bindBuffer(34962,ec.buffer),O.vertexAttribPointer(Xb,Lc,Oc,uc,Ta,$a),Rb.type=Oc,Rb.size=Lc,Rb.buffer=ec,Rb.normalized=uc,Rb.offset=$a,Rb.stride=Ta;Rb.divisor!==Ac&&(k.vertexAttribDivisorANGLE(Xb,Ac),Rb.divisor=Ac)}else if(Rb.buffer&&(O.disableVertexAttribArray(Xb),Rb.buffer=null),Rb.x!==Wa||Rb.y!==Wb||Rb.z!==tc||Rb.w!==Ab)O.vertexAttrib4f(Xb,Wa,Wb,tc,Ab),Rb.x=Wa,Rb.y=Wb,Rb.z=tc,Rb.w=Ab;Sb=X.call(this,da,c,h);Sd=!1;Ec=null;yd=0;Pc=!1;ud=Yc=0;
mc=1;vc=0;fc=5126;Yb=Ub=sc=bb=0;va(Sb)?(Sd=!0,Ec=w.createStream(34962,Sb),fc=Ec.dtype):(Ec=w.getBuffer(Sb))?fc=Ec.dtype:"constant"in Sb?(mc=2,"number"===typeof Sb.constant?(sc=Sb.constant,Ub=Yb=bb=0):(sc=0<Sb.constant.length?Sb.constant[0]:0,Ub=1<Sb.constant.length?Sb.constant[1]:0,Yb=2<Sb.constant.length?Sb.constant[2]:0,bb=3<Sb.constant.length?Sb.constant[3]:0)):(Ec=va(Sb.buffer)?w.createStream(34962,Sb.buffer):w.getBuffer(Sb.buffer),fc="type"in Sb?Ad[Sb.type]:Ec.dtype,Pc=!!Sb.normalized,ud=Sb.size|
0,Yc=Sb.offset|0,vc=Sb.stride|0,yd=Sb.divisor|0);cc=Xa.location;gc=v[cc];if(1===mc){gc.buffer||O.enableVertexAttribArray(cc);xc=ud||1;if(gc.type!==fc||gc.size!==xc||gc.buffer!==Ec||gc.normalized!==Pc||gc.offset!==Yc||gc.stride!==vc)O.bindBuffer(34962,Ec.buffer),O.vertexAttribPointer(cc,xc,fc,Pc,vc,Yc),gc.type=fc,gc.size=xc,gc.buffer=Ec,gc.normalized=Pc,gc.offset=Yc,gc.stride=vc;gc.divisor!==yd&&(k.vertexAttribDivisorANGLE(cc,yd),gc.divisor=yd)}else if(gc.buffer&&(O.disableVertexAttribArray(cc),gc.buffer=
null),gc.x!==sc||gc.y!==Ub||gc.z!==Yb||gc.w!==bb)O.vertexAttrib4f(cc,sc,Ub,Yb,bb),gc.x=sc,gc.y=Ub,gc.z=Yb,gc.w=bb;Bc=ea.call(this,da,c,h);cd=!1;Sc=null;Tc=0;Uc=!1;md=Zc=0;dd=1;$c=0;jc=5126;ed=Wc=ad=bc=0;va(Bc)?(cd=!0,Sc=w.createStream(34962,Bc),jc=Sc.dtype):(Sc=w.getBuffer(Bc))?jc=Sc.dtype:"constant"in Bc?(dd=2,"number"===typeof Bc.constant?(ad=Bc.constant,Wc=ed=bc=0):(ad=0<Bc.constant.length?Bc.constant[0]:0,Wc=1<Bc.constant.length?Bc.constant[1]:0,ed=2<Bc.constant.length?Bc.constant[2]:0,bc=3<Bc.constant.length?
Bc.constant[3]:0)):(Sc=va(Bc.buffer)?w.createStream(34962,Bc.buffer):w.getBuffer(Bc.buffer),jc="type"in Bc?Ad[Bc.type]:Sc.dtype,Uc=!!Bc.normalized,md=Bc.size|0,Zc=Bc.offset|0,$c=Bc.stride|0,Tc=Bc.divisor|0);yc=ja.location;id=v[yc];if(1===dd){id.buffer||O.enableVertexAttribArray(yc);qe=md||1;if(id.type!==jc||id.size!==qe||id.buffer!==Sc||id.normalized!==Uc||id.offset!==Zc||id.stride!==$c)O.bindBuffer(34962,Sc.buffer),O.vertexAttribPointer(yc,qe,jc,Uc,$c,Zc),id.type=jc,id.size=qe,id.buffer=Sc,id.normalized=
Uc,id.offset=Zc,id.stride=$c;id.divisor!==Tc&&(k.vertexAttribDivisorANGLE(yc,Tc),id.divisor=Tc)}else if(id.buffer&&(O.disableVertexAttribArray(yc),id.buffer=null),id.x!==ad||id.y!==Wc||id.z!==ed||id.w!==bc)O.vertexAttrib4f(yc,ad,Wc,ed,bc),id.x=ad,id.y=Wc,id.z=ed,id.w=bc;qd=T.call(this,da,c,h);wd=!1;jd=null;Je=0;Pd=!1;de=Yd=0;ae=1;Ld=0;Id=5126;td=vd=Vc=od=0;va(qd)?(wd=!0,jd=w.createStream(34962,qd),Id=jd.dtype):(jd=w.getBuffer(qd))?Id=jd.dtype:"constant"in qd?(ae=2,"number"===typeof qd.constant?(Vc=
qd.constant,vd=td=od=0):(Vc=0<qd.constant.length?qd.constant[0]:0,vd=1<qd.constant.length?qd.constant[1]:0,td=2<qd.constant.length?qd.constant[2]:0,od=3<qd.constant.length?qd.constant[3]:0)):(jd=va(qd.buffer)?w.createStream(34962,qd.buffer):w.getBuffer(qd.buffer),Id="type"in qd?Ad[qd.type]:jd.dtype,Pd=!!qd.normalized,de=qd.size|0,Yd=qd.offset|0,Ld=qd.stride|0,Je=qd.divisor|0);kd=pa.location;xd=v[kd];if(1===ae){xd.buffer||O.enableVertexAttribArray(kd);Bd=de||1;if(xd.type!==Id||xd.size!==Bd||xd.buffer!==
jd||xd.normalized!==Pd||xd.offset!==Yd||xd.stride!==Ld)O.bindBuffer(34962,jd.buffer),O.vertexAttribPointer(kd,Bd,Id,Pd,Ld,Yd),xd.type=Id,xd.size=Bd,xd.buffer=jd,xd.normalized=Pd,xd.offset=Yd,xd.stride=Ld;xd.divisor!==Je&&(k.vertexAttribDivisorANGLE(kd,Je),xd.divisor=Je)}else if(xd.buffer&&(O.disableVertexAttribArray(kd),xd.buffer=null),xd.x!==Vc||xd.y!==vd||xd.z!==td||xd.w!==od)O.vertexAttrib4f(kd,Vc,vd,td,od),xd.x=Vc,xd.y=vd,xd.z=td,xd.w=od;Fd=S.call(this,da,c,h);je=!1;le=null;ze=0;me=!1;he=ke=0;
ue=1;ee=0;ne=5126;re=ve=hd=Qc=0;va(Fd)?(je=!0,le=w.createStream(34962,Fd),ne=le.dtype):(le=w.getBuffer(Fd))?ne=le.dtype:"constant"in Fd?(ue=2,"number"===typeof Fd.constant?(hd=Fd.constant,ve=re=Qc=0):(hd=0<Fd.constant.length?Fd.constant[0]:0,ve=1<Fd.constant.length?Fd.constant[1]:0,re=2<Fd.constant.length?Fd.constant[2]:0,Qc=3<Fd.constant.length?Fd.constant[3]:0)):(le=va(Fd.buffer)?w.createStream(34962,Fd.buffer):w.getBuffer(Fd.buffer),ne="type"in Fd?Ad[Fd.type]:le.dtype,me=!!Fd.normalized,he=Fd.size|
0,ke=Fd.offset|0,ee=Fd.stride|0,ze=Fd.divisor|0);Md=A.location;Qd=v[Md];if(1===ue){Qd.buffer||O.enableVertexAttribArray(Md);Td=he||4;if(Qd.type!==ne||Qd.size!==Td||Qd.buffer!==le||Qd.normalized!==me||Qd.offset!==ke||Qd.stride!==ee)O.bindBuffer(34962,le.buffer),O.vertexAttribPointer(Md,Td,ne,me,ee,ke),Qd.type=ne,Qd.size=Td,Qd.buffer=le,Qd.normalized=me,Qd.offset=ke,Qd.stride=ee;Qd.divisor!==ze&&(k.vertexAttribDivisorANGLE(Md,ze),Qd.divisor=ze)}else if(Qd.buffer&&(O.disableVertexAttribArray(Md),Qd.buffer=
null),Qd.x!==hd||Qd.y!==ve||Qd.z!==re||Qd.w!==Qc)O.vertexAttrib4f(Md,hd,ve,re,Qc),Qd.x=hd,Qd.y=ve,Qd.z=re,Qd.w=Qc;Ud=N.call(this,da,c,h);oe=!1;Ae=null;De=0;se=!1;Ue=Te=0;Pe=1;we=0;He=5126;Ie=Me=Le=Ke=0;va(Ud)?(oe=!0,Ae=w.createStream(34962,Ud),He=Ae.dtype):(Ae=w.getBuffer(Ud))?He=Ae.dtype:"constant"in Ud?(Pe=2,"number"===typeof Ud.constant?(Le=Ud.constant,Me=Ie=Ke=0):(Le=0<Ud.constant.length?Ud.constant[0]:0,Me=1<Ud.constant.length?Ud.constant[1]:0,Ie=2<Ud.constant.length?Ud.constant[2]:0,Ke=3<Ud.constant.length?
Ud.constant[3]:0)):(Ae=va(Ud.buffer)?w.createStream(34962,Ud.buffer):w.getBuffer(Ud.buffer),He="type"in Ud?Ad[Ud.type]:Ae.dtype,se=!!Ud.normalized,Ue=Ud.size|0,Te=Ud.offset|0,we=Ud.stride|0,De=Ud.divisor|0);Od=qa.location;Zd=v[Od];if(1===Pe){Zd.buffer||O.enableVertexAttribArray(Od);ce=Ue||4;if(Zd.type!==He||Zd.size!==ce||Zd.buffer!==Ae||Zd.normalized!==se||Zd.offset!==Te||Zd.stride!==we)O.bindBuffer(34962,Ae.buffer),O.vertexAttribPointer(Od,ce,He,se,we,Te),Zd.type=He,Zd.size=ce,Zd.buffer=Ae,Zd.normalized=
se,Zd.offset=Te,Zd.stride=we;Zd.divisor!==De&&(k.vertexAttribDivisorANGLE(Od,De),Zd.divisor=De)}else if(Zd.buffer&&(O.disableVertexAttribArray(Od),Zd.buffer=null),Zd.x!==Le||Zd.y!==Me||Zd.z!==Ie||Zd.w!==Ke)O.vertexAttrib4f(Od,Le,Me,Ie,Ke),Zd.x=Le,Zd.y=Me,Zd.z=Ie,Zd.w=Ke;fe=r.call(this,da,c,h);Ne=!1;Jd=null;Vd=0;Fe=!1;cf=Oe=0;bf=1;Ve=0;Qe=5126;Xe=We=Ze=af=0;va(fe)?(Ne=!0,Jd=w.createStream(34962,fe),Qe=Jd.dtype):(Jd=w.getBuffer(fe))?Qe=Jd.dtype:"constant"in fe?(bf=2,"number"===typeof fe.constant?(Ze=
fe.constant,We=Xe=af=0):(Ze=0<fe.constant.length?fe.constant[0]:0,We=1<fe.constant.length?fe.constant[1]:0,Xe=2<fe.constant.length?fe.constant[2]:0,af=3<fe.constant.length?fe.constant[3]:0)):(Jd=va(fe.buffer)?w.createStream(34962,fe.buffer):w.getBuffer(fe.buffer),Qe="type"in fe?Ad[fe.type]:Jd.dtype,Fe=!!fe.normalized,cf=fe.size|0,Oe=fe.offset|0,Ve=fe.stride|0,Vd=fe.divisor|0);Wd=ga.location;be=v[Wd];if(1===bf){be.buffer||O.enableVertexAttribArray(Wd);Ye=cf||1;if(be.type!==Qe||be.size!==Ye||be.buffer!==
Jd||be.normalized!==Fe||be.offset!==Oe||be.stride!==Ve)O.bindBuffer(34962,Jd.buffer),O.vertexAttribPointer(Wd,Ye,Qe,Fe,Ve,Oe),be.type=Qe,be.size=Ye,be.buffer=Jd,be.normalized=Fe,be.offset=Oe,be.stride=Ve;be.divisor!==Vd&&(k.vertexAttribDivisorANGLE(Wd,Vd),be.divisor=Vd)}else if(be.buffer&&(O.disableVertexAttribArray(Wd),be.buffer=null),be.x!==Ze||be.y!==We||be.z!==Xe||be.w!==af)O.vertexAttrib4f(Wd,Ze,We,Xe,af),be.x=Ze,be.y=We,be.z=Xe,be.w=af;kf=da.pixelRatio;h&&of===kf||(of=kf,O.uniform1f(ya.location,
kf));gf=c.scale;lf=gf[0];nf=gf[1];h&&mf===lf&&sf===nf||(mf=lf,sf=nf,O.uniform2f(ha.location,lf,nf));pf=c.scaleFract;tf=pf[0];Df=pf[1];h&&Cf===tf&&Re===Df||(Cf=tf,Re=Df,O.uniform2f(Ca.location,tf,Df));Ge=c.translate;qf=Ge[0];Ef=Ge[1];h&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,O.uniform2f(oa.location,qf,Ef));Bf=c.translateFract;Ff=Bf[0];xf=Bf[1];h&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,O.uniform2f(za.location,Ff,xf));wf=Q.call(this,da,c,h);zf=wf[0];Jf=wf[1];h&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,O.uniform2f(ra.location,
zf,Jf));Lf=c.opacity;h&&Mf===Lf||(Mf=Lf,O.uniform1f(na.location,Lf));(uf=c.markerTexture)&&"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;O.uniform1i(R.location,Rf.bind());If=c.elements;vf=null;(vf=(dg=va(If))?lb.createStream(If):lb.getElements(If))&&O.bindBuffer(34963,vf.buffer.buffer);Sf=c.offset;if(Tf=c.count)0<ob?vf?k.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),ob):k.drawArraysInstancedANGLE(0,Sf,Tf,ob):0>ob&&(vf?O.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>
1)):O.drawArrays(0,Sf,Tf)),da.viewportWidth=Pb,da.viewportHeight=jb,qb&&w.destroyStream(Ua),Oa&&w.destroyStream(Cc),nb&&w.destroyStream(ec),Sd&&w.destroyStream(Ec),cd&&w.destroyStream(Sc),wd&&w.destroyStream(jd),je&&w.destroyStream(le),oe&&w.destroyStream(Ae),Ne&&w.destroyStream(Jd),Rf.unbind(),dg&&lb.destroyStream(vf)}P.unbind();ua.dirty=!0;wa.setVAO(null);e&&(g.cpuTime+=performance.now()-d)},draw:function(a){var f,b,k,n,r,p,B,z,C,D,S,N,sa,T,G,H,u,ka,Q,E,P,J,L,xa,U,aa,W,ia,X,V,ea,Y,Ea,M,la,Ga,ld,
yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,qd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,qe,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we;f=ba.next;f!==ba.cur&&(f?O.bindFramebuffer(36160,f.framebuffer):O.bindFramebuffer(36160,
null),ba.cur=f);if(ua.dirty){var He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf,sf,pf,tf;He=Fa.dither;He!==ua.dither&&(He?O.enable(3024):O.disable(3024),ua.dither=He);Ke=ta[0];Le=ta[1];if(Ke!==Z[0]||Le!==Z[1])O.blendEquationSeparate(Ke,Le),Z[0]=Ke,Z[1]=Le;Me=Fa.depth_func;Me!==ua.depth_func&&(O.depthFunc(Me),ua.depth_func=Me);Ie=nc[0];Od=nc[1];if(Ie!==Ha[0]||Od!==Ha[1])O.depthRange(Ie,Od),Ha[0]=Ie,Ha[1]=Od;Zd=Fa.depth_mask;Zd!==ua.depth_mask&&(O.depthMask(Zd),
ua.depth_mask=Zd);ce=fa[0];fe=fa[1];Ne=fa[2];Jd=fa[3];if(ce!==ma[0]||fe!==ma[1]||Ne!==ma[2]||Jd!==ma[3])O.colorMask(ce,fe,Ne,Jd),ma[0]=ce,ma[1]=fe,ma[2]=Ne,ma[3]=Jd;Vd=Fa.cull_enable;Vd!==ua.cull_enable&&(Vd?O.enable(2884):O.disable(2884),ua.cull_enable=Vd);Fe=Fa.cull_face;Fe!==ua.cull_face&&(O.cullFace(Fe),ua.cull_face=Fe);Oe=Fa.frontFace;Oe!==ua.frontFace&&(O.frontFace(Oe),ua.frontFace=Oe);cf=Fa.lineWidth;cf!==ua.lineWidth&&(O.lineWidth(cf),ua.lineWidth=cf);bf=Fa.polygonOffset_enable;bf!==ua.polygonOffset_enable&&
(bf?O.enable(32823):O.disable(32823),ua.polygonOffset_enable=bf);Ve=ac[0];Qe=ac[1];if(Ve!==Tb[0]||Qe!==Tb[1])O.polygonOffset(Ve,Qe),Tb[0]=Ve,Tb[1]=Qe;af=Fa.sample_alpha;af!==ua.sample_alpha&&(af?O.enable(32926):O.disable(32926),ua.sample_alpha=af);Ze=Fa.sample_enable;Ze!==ua.sample_enable&&(Ze?O.enable(32928):O.disable(32928),ua.sample_enable=Ze);We=ff[0];Xe=ff[1];if(We!==Cd[0]||Xe!==Cd[1])O.sampleCoverage(We,Xe),Cd[0]=We,Cd[1]=Xe;Wd=Fa.stencil_mask;Wd!==ua.stencil_mask&&(O.stencilMask(Wd),ua.stencil_mask=
Wd);be=Be[0];Ye=Be[1];kf=Be[2];if(be!==xe[0]||Ye!==xe[1]||kf!==xe[2])O.stencilFunc(be,Ye,kf),xe[0]=be,xe[1]=Ye,xe[2]=kf;of=ie[0];gf=ie[1];lf=ie[2];mf=ie[3];if(of!==Dd[0]||gf!==Dd[1]||lf!==Dd[2]||mf!==Dd[3])O.stencilOpSeparate(of,gf,lf,mf),Dd[0]=of,Dd[1]=gf,Dd[2]=lf,Dd[3]=mf;nf=Rd[0];sf=Rd[1];pf=Rd[2];tf=Rd[3];if(nf!==pe[0]||sf!==pe[1]||pf!==pe[2]||tf!==pe[3])O.stencilOpSeparate(nf,sf,pf,tf),pe[0]=nf,pe[1]=sf,pe[2]=pf,pe[3]=tf}b=a.viewport;k=b.x|0;n=b.y|0;r="width"in b?b.width|0:da.framebufferWidth-
k;p="height"in b?b.height|0:da.framebufferHeight-n;B=da.viewportWidth;da.viewportWidth=r;z=da.viewportHeight;da.viewportHeight=p;O.viewport(k,n,r,p);ge[0]=k;ge[1]=n;ge[2]=r;ge[3]=p;O.blendColor(0,0,0,1);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=1;O.enable(3042);ua.blend_enable=!0;O.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;O.disable(2929);ua.depth_enable=!1;C=a.viewport;D=C.x|0;S=C.y|0;N="width"in C?C.width|0:da.framebufferWidth-D;sa="height"in C?C.height|0:da.framebufferHeight-S;
O.scissor(D,S,N,sa);Xd[0]=D;Xd[1]=S;Xd[2]=N;Xd[3]=sa;O.enable(3089);ua.scissor_enable=!0;O.disable(2960);ua.stencil_enable=!1;if(T=ua.profile)G=performance.now(),g.count++;O.useProgram(t.program);H=Ib.angle_instanced_arrays;wa.setVAO(null);u=x.call(this,da,a,0);ka=!1;Q=null;E=0;P=!1;L=J=0;xa=1;U=0;aa=5126;V=X=ia=W=0;va(u)?(ka=!0,Q=w.createStream(34962,u),aa=Q.dtype):(Q=w.getBuffer(u))?aa=Q.dtype:"constant"in u?(xa=2,"number"===typeof u.constant?(ia=u.constant,X=V=W=0):(ia=0<u.constant.length?u.constant[0]:
0,X=1<u.constant.length?u.constant[1]:0,V=2<u.constant.length?u.constant[2]:0,W=3<u.constant.length?u.constant[3]:0)):(Q=va(u.buffer)?w.createStream(34962,u.buffer):w.getBuffer(u.buffer),aa="type"in u?Ad[u.type]:Q.dtype,P=!!u.normalized,L=u.size|0,J=u.offset|0,U=u.stride|0,E=u.divisor|0);ea=Ma.location;Y=v[ea];if(1===xa){Y.buffer||O.enableVertexAttribArray(ea);Ea=L||1;if(Y.type!==aa||Y.size!==Ea||Y.buffer!==Q||Y.normalized!==P||Y.offset!==J||Y.stride!==U)O.bindBuffer(34962,Q.buffer),O.vertexAttribPointer(ea,
Ea,aa,P,U,J),Y.type=aa,Y.size=Ea,Y.buffer=Q,Y.normalized=P,Y.offset=J,Y.stride=U;Y.divisor!==E&&(H.vertexAttribDivisorANGLE(ea,E),Y.divisor=E)}else if(Y.buffer&&(O.disableVertexAttribArray(ea),Y.buffer=null),Y.x!==ia||Y.y!==X||Y.z!==V||Y.w!==W)O.vertexAttrib4f(ea,ia,X,V,W),Y.x=ia,Y.y=X,Y.z=V,Y.w=W;M=h.call(this,da,a,0);la=!1;Ga=null;ld=0;yb=!1;Nb=ab=0;Ya=1;ob=0;Za=5126;rc=Jb=Ob=Nc=0;va(M)?(la=!0,Ga=w.createStream(34962,M),Za=Ga.dtype):(Ga=w.getBuffer(M))?Za=Ga.dtype:"constant"in M?(Ya=2,"number"===
typeof M.constant?(Ob=M.constant,Jb=rc=Nc=0):(Ob=0<M.constant.length?M.constant[0]:0,Jb=1<M.constant.length?M.constant[1]:0,rc=2<M.constant.length?M.constant[2]:0,Nc=3<M.constant.length?M.constant[3]:0)):(Ga=va(M.buffer)?w.createStream(34962,M.buffer):w.getBuffer(M.buffer),Za="type"in M?Ad[M.type]:Ga.dtype,yb=!!M.normalized,Nb=M.size|0,ab=M.offset|0,ob=M.stride|0,ld=M.divisor|0);Pb=Bb.location;jb=v[Pb];if(1===Ya){jb.buffer||O.enableVertexAttribArray(Pb);Hb=Nb||1;if(jb.type!==Za||jb.size!==Hb||jb.buffer!==
Ga||jb.normalized!==yb||jb.offset!==ab||jb.stride!==ob)O.bindBuffer(34962,Ga.buffer),O.vertexAttribPointer(Pb,Hb,Za,yb,ob,ab),jb.type=Za,jb.size=Hb,jb.buffer=Ga,jb.normalized=yb,jb.offset=ab,jb.stride=ob;jb.divisor!==ld&&(H.vertexAttribDivisorANGLE(Pb,ld),jb.divisor=ld)}else if(jb.buffer&&(O.disableVertexAttribArray(Pb),jb.buffer=null),jb.x!==Ob||jb.y!==Jb||jb.z!==rc||jb.w!==Nc)O.vertexAttrib4f(Pb,Ob,Jb,rc,Nc),jb.x=Ob,jb.y=Jb,jb.z=rc,jb.w=Nc;Eb=e.call(this,da,a,0);wb=!1;hb=null;Zb=0;Qb=!1;Ua=qb=0;
Vb=1;zb=0;hc=5126;rb=Ia=pb=ib=0;va(Eb)?(wb=!0,hb=w.createStream(34962,Eb),hc=hb.dtype):(hb=w.getBuffer(Eb))?hc=hb.dtype:"constant"in Eb?(Vb=2,"number"===typeof Eb.constant?(pb=Eb.constant,Ia=rb=ib=0):(pb=0<Eb.constant.length?Eb.constant[0]:0,Ia=1<Eb.constant.length?Eb.constant[1]:0,rb=2<Eb.constant.length?Eb.constant[2]:0,ib=3<Eb.constant.length?Eb.constant[3]:0)):(hb=va(Eb.buffer)?w.createStream(34962,Eb.buffer):w.getBuffer(Eb.buffer),hc="type"in Eb?Ad[Eb.type]:hb.dtype,Qb=!!Eb.normalized,Ua=Eb.size|
0,qb=Eb.offset|0,zb=Eb.stride|0,Zb=Eb.divisor|0);Ja=Aa.location;cb=v[Ja];if(1===Vb){cb.buffer||O.enableVertexAttribArray(Ja);eb=Ua||1;if(cb.type!==hc||cb.size!==eb||cb.buffer!==hb||cb.normalized!==Qb||cb.offset!==qb||cb.stride!==zb)O.bindBuffer(34962,hb.buffer),O.vertexAttribPointer(Ja,eb,hc,Qb,zb,qb),cb.type=hc,cb.size=eb,cb.buffer=hb,cb.normalized=Qb,cb.offset=qb,cb.stride=zb;cb.divisor!==Zb&&(H.vertexAttribDivisorANGLE(Ja,Zb),cb.divisor=Zb)}else if(cb.buffer&&(O.disableVertexAttribArray(Ja),cb.buffer=
null),cb.x!==pb||cb.y!==Ia||cb.z!==rb||cb.w!==ib)O.vertexAttrib4f(Ja,pb,Ia,rb,ib),cb.x=pb,cb.y=Ia,cb.z=rb,cb.w=ib;Ka=c.call(this,da,a,0);kb=!1;Sa=null;tb=0;sb=!1;Cc=Oa=0;Qa=1;Kb=0;Fb=5126;Lb=Va=qd=La=0;va(Ka)?(kb=!0,Sa=w.createStream(34962,Ka),Fb=Sa.dtype):(Sa=w.getBuffer(Ka))?Fb=Sa.dtype:"constant"in Ka?(Qa=2,"number"===typeof Ka.constant?(qd=Ka.constant,Va=Lb=La=0):(qd=0<Ka.constant.length?Ka.constant[0]:0,Va=1<Ka.constant.length?Ka.constant[1]:0,Lb=2<Ka.constant.length?Ka.constant[2]:0,La=3<Ka.constant.length?
Ka.constant[3]:0)):(Sa=va(Ka.buffer)?w.createStream(34962,Ka.buffer):w.getBuffer(Ka.buffer),Fb="type"in Ka?Ad[Ka.type]:Sa.dtype,sb=!!Ka.normalized,Cc=Ka.size|0,Oa=Ka.offset|0,Kb=Ka.stride|0,tb=Ka.divisor|0);Mb=Xa.location;mb=v[Mb];if(1===Qa){mb.buffer||O.enableVertexAttribArray(Mb);Na=Cc||1;if(mb.type!==Fb||mb.size!==Na||mb.buffer!==Sa||mb.normalized!==sb||mb.offset!==Oa||mb.stride!==Kb)O.bindBuffer(34962,Sa.buffer),O.vertexAttribPointer(Mb,Na,Fb,sb,Kb,Oa),mb.type=Fb,mb.size=Na,mb.buffer=Sa,mb.normalized=
sb,mb.offset=Oa,mb.stride=Kb;mb.divisor!==tb&&(H.vertexAttribDivisorANGLE(Mb,tb),mb.divisor=tb)}else if(mb.buffer&&(O.disableVertexAttribArray(Mb),mb.buffer=null),mb.x!==qd||mb.y!==Va||mb.z!==Lb||mb.w!==La)O.vertexAttrib4f(Mb,qd,Va,Lb,La),mb.x=qd,mb.y=Va,mb.z=Lb,mb.w=La;$b=d.call(this,da,a,0);Pa=!1;ub=null;vb=0;Ra=!1;ec=nb=0;Ac=1;uc=0;$a=5126;Oc=Ta=sd=ic=0;va($b)?(Pa=!0,ub=w.createStream(34962,$b),$a=ub.dtype):(ub=w.getBuffer($b))?$a=ub.dtype:"constant"in $b?(Ac=2,"number"===typeof $b.constant?(sd=
$b.constant,Ta=Oc=ic=0):(sd=0<$b.constant.length?$b.constant[0]:0,Ta=1<$b.constant.length?$b.constant[1]:0,Oc=2<$b.constant.length?$b.constant[2]:0,ic=3<$b.constant.length?$b.constant[3]:0)):(ub=va($b.buffer)?w.createStream(34962,$b.buffer):w.getBuffer($b.buffer),$a="type"in $b?Ad[$b.type]:ub.dtype,Ra=!!$b.normalized,ec=$b.size|0,nb=$b.offset|0,uc=$b.stride|0,vb=$b.divisor|0);Ab=ja.location;Wa=v[Ab];if(1===Ac){Wa.buffer||O.enableVertexAttribArray(Ab);Wb=ec||1;if(Wa.type!==$a||Wa.size!==Wb||Wa.buffer!==
ub||Wa.normalized!==Ra||Wa.offset!==nb||Wa.stride!==uc)O.bindBuffer(34962,ub.buffer),O.vertexAttribPointer(Ab,Wb,$a,Ra,uc,nb),Wa.type=$a,Wa.size=Wb,Wa.buffer=ub,Wa.normalized=Ra,Wa.offset=nb,Wa.stride=uc;Wa.divisor!==vb&&(H.vertexAttribDivisorANGLE(Ab,vb),Wa.divisor=vb)}else if(Wa.buffer&&(O.disableVertexAttribArray(Ab),Wa.buffer=null),Wa.x!==sd||Wa.y!==Ta||Wa.z!==Oc||Wa.w!==ic)O.vertexAttrib4f(Ab,sd,Ta,Oc,ic),Wa.x=sd,Wa.y=Ta,Wa.z=Oc,Wa.w=ic;tc=y.call(this,da,a,0);Xb=!1;Rb=null;Lc=0;Sb=!1;Ec=qe=0;
yd=1;Pc=0;Yc=5126;fc=vc=mc=ud=0;va(tc)?(Xb=!0,Rb=w.createStream(34962,tc),Yc=Rb.dtype):(Rb=w.getBuffer(tc))?Yc=Rb.dtype:"constant"in tc?(yd=2,"number"===typeof tc.constant?(mc=tc.constant,vc=fc=ud=0):(mc=0<tc.constant.length?tc.constant[0]:0,vc=1<tc.constant.length?tc.constant[1]:0,fc=2<tc.constant.length?tc.constant[2]:0,ud=3<tc.constant.length?tc.constant[3]:0)):(Rb=va(tc.buffer)?w.createStream(34962,tc.buffer):w.getBuffer(tc.buffer),Yc="type"in tc?Ad[tc.type]:Rb.dtype,Sb=!!tc.normalized,Ec=tc.size|
0,qe=tc.offset|0,Pc=tc.stride|0,Lc=tc.divisor|0);bb=pa.location;sc=v[bb];if(1===yd){sc.buffer||O.enableVertexAttribArray(bb);Ub=Ec||1;if(sc.type!==Yc||sc.size!==Ub||sc.buffer!==Rb||sc.normalized!==Sb||sc.offset!==qe||sc.stride!==Pc)O.bindBuffer(34962,Rb.buffer),O.vertexAttribPointer(bb,Ub,Yc,Sb,Pc,qe),sc.type=Yc,sc.size=Ub,sc.buffer=Rb,sc.normalized=Sb,sc.offset=qe,sc.stride=Pc;sc.divisor!==Lc&&(H.vertexAttribDivisorANGLE(bb,Lc),sc.divisor=Lc)}else if(sc.buffer&&(O.disableVertexAttribArray(bb),sc.buffer=
null),sc.x!==mc||sc.y!==vc||sc.z!==fc||sc.w!==ud)O.vertexAttrib4f(bb,mc,vc,fc,ud),sc.x=mc,sc.y=vc,sc.z=fc,sc.w=ud;Yb=l.call(this,da,a,0);cc=!1;gc=null;xc=0;Bc=!1;Sc=cd=0;Tc=1;Uc=0;Zc=5126;jc=$c=dd=md=0;va(Yb)?(cc=!0,gc=w.createStream(34962,Yb),Zc=gc.dtype):(gc=w.getBuffer(Yb))?Zc=gc.dtype:"constant"in Yb?(Tc=2,"number"===typeof Yb.constant?(dd=Yb.constant,$c=jc=md=0):(dd=0<Yb.constant.length?Yb.constant[0]:0,$c=1<Yb.constant.length?Yb.constant[1]:0,jc=2<Yb.constant.length?Yb.constant[2]:0,md=3<Yb.constant.length?
Yb.constant[3]:0)):(gc=va(Yb.buffer)?w.createStream(34962,Yb.buffer):w.getBuffer(Yb.buffer),Zc="type"in Yb?Ad[Yb.type]:gc.dtype,Bc=!!Yb.normalized,Sc=Yb.size|0,cd=Yb.offset|0,Uc=Yb.stride|0,xc=Yb.divisor|0);bc=A.location;ad=v[bc];if(1===Tc){ad.buffer||O.enableVertexAttribArray(bc);Wc=Sc||4;if(ad.type!==Zc||ad.size!==Wc||ad.buffer!==gc||ad.normalized!==Bc||ad.offset!==cd||ad.stride!==Uc)O.bindBuffer(34962,gc.buffer),O.vertexAttribPointer(bc,Wc,Zc,Bc,Uc,cd),ad.type=Zc,ad.size=Wc,ad.buffer=gc,ad.normalized=
Bc,ad.offset=cd,ad.stride=Uc;ad.divisor!==xc&&(H.vertexAttribDivisorANGLE(bc,xc),ad.divisor=xc)}else if(ad.buffer&&(O.disableVertexAttribArray(bc),ad.buffer=null),ad.x!==dd||ad.y!==$c||ad.z!==jc||ad.w!==md)O.vertexAttrib4f(bc,dd,$c,jc,md),ad.x=dd,ad.y=$c,ad.z=jc,ad.w=md;ed=F.call(this,da,a,0);yc=!1;id=null;Ed=0;ye=!1;jd=wd=0;Je=1;Pd=0;Yd=5126;Id=Ld=ae=de=0;va(ed)?(yc=!0,id=w.createStream(34962,ed),Yd=id.dtype):(id=w.getBuffer(ed))?Yd=id.dtype:"constant"in ed?(Je=2,"number"===typeof ed.constant?(ae=
ed.constant,Ld=Id=de=0):(ae=0<ed.constant.length?ed.constant[0]:0,Ld=1<ed.constant.length?ed.constant[1]:0,Id=2<ed.constant.length?ed.constant[2]:0,de=3<ed.constant.length?ed.constant[3]:0)):(id=va(ed.buffer)?w.createStream(34962,ed.buffer):w.getBuffer(ed.buffer),Yd="type"in ed?Ad[ed.type]:id.dtype,ye=!!ed.normalized,jd=ed.size|0,wd=ed.offset|0,Pd=ed.stride|0,Ed=ed.divisor|0);od=qa.location;Vc=v[od];if(1===Je){Vc.buffer||O.enableVertexAttribArray(od);vd=jd||4;if(Vc.type!==Yd||Vc.size!==vd||Vc.buffer!==
id||Vc.normalized!==ye||Vc.offset!==wd||Vc.stride!==Pd)O.bindBuffer(34962,id.buffer),O.vertexAttribPointer(od,vd,Yd,ye,Pd,wd),Vc.type=Yd,Vc.size=vd,Vc.buffer=id,Vc.normalized=ye,Vc.offset=wd,Vc.stride=Pd;Vc.divisor!==Ed&&(H.vertexAttribDivisorANGLE(od,Ed),Vc.divisor=Ed)}else if(Vc.buffer&&(O.disableVertexAttribArray(od),Vc.buffer=null),Vc.x!==ae||Vc.y!==Ld||Vc.z!==Id||Vc.w!==de)O.vertexAttrib4f(od,ae,Ld,Id,de),Vc.x=ae,Vc.y=Ld,Vc.z=Id,Vc.w=de;td=K.call(this,da,a,0);kd=!1;xd=null;Bd=0;Fd=!1;le=je=0;
ze=1;me=0;ke=5126;ne=ee=ue=he=0;va(td)?(kd=!0,xd=w.createStream(34962,td),ke=xd.dtype):(xd=w.getBuffer(td))?ke=xd.dtype:"constant"in td?(ze=2,"number"===typeof td.constant?(ue=td.constant,ee=ne=he=0):(ue=0<td.constant.length?td.constant[0]:0,ee=1<td.constant.length?td.constant[1]:0,ne=2<td.constant.length?td.constant[2]:0,he=3<td.constant.length?td.constant[3]:0)):(xd=va(td.buffer)?w.createStream(34962,td.buffer):w.getBuffer(td.buffer),ke="type"in td?Ad[td.type]:xd.dtype,Fd=!!td.normalized,le=td.size|
0,je=td.offset|0,me=td.stride|0,Bd=td.divisor|0);Qc=ga.location;hd=v[Qc];if(1===ze){hd.buffer||O.enableVertexAttribArray(Qc);ve=le||1;if(hd.type!==ke||hd.size!==ve||hd.buffer!==xd||hd.normalized!==Fd||hd.offset!==je||hd.stride!==me)O.bindBuffer(34962,xd.buffer),O.vertexAttribPointer(Qc,ve,ke,Fd,me,je),hd.type=ke,hd.size=ve,hd.buffer=xd,hd.normalized=Fd,hd.offset=je,hd.stride=me;hd.divisor!==Bd&&(H.vertexAttribDivisorANGLE(Qc,Bd),hd.divisor=Bd)}else if(hd.buffer&&(O.disableVertexAttribArray(Qc),hd.buffer=
null),hd.x!==ue||hd.y!==ee||hd.z!==ne||hd.w!==he)O.vertexAttrib4f(Qc,ue,ee,ne,he),hd.x=ue,hd.y=ee,hd.z=ne,hd.w=he;O.uniform1i(I.location,!1);O.uniform1f(ya.location,da.pixelRatio);re=a.scale;O.uniform2f(ha.location,re[0],re[1]);Md=a.scaleFract;O.uniform2f(Ca.location,Md[0],Md[1]);Qd=a.translate;O.uniform2f(oa.location,Qd[0],Qd[1]);Td=a.translateFract;O.uniform2f(za.location,Td[0],Td[1]);Ud=q.call(this,da,a,0);O.uniform2f(ra.location,Ud[0],Ud[1]);O.uniform1f(na.location,a.opacity);O.uniform1i(Ba.location,
m.bind());(oe=a.markerTexture)&&"framebuffer"===oe._reglType&&(oe=oe.color[0]);Ae=oe._texture;O.uniform1i(R.location,Ae.bind());De=a.elements;se=null;(se=(Te=va(De))?lb.createStream(De):lb.getElements(De))&&O.bindBuffer(34963,se.buffer.buffer);Ue=a.offset;if(Pe=a.count)we=Da.instances,0<we?se?H.drawElementsInstancedANGLE(0,Pe,se.type,Ue<<(se.type-5121>>1),we):H.drawArraysInstancedANGLE(0,Ue,Pe,we):0>we&&(se?O.drawElements(0,Pe,se.type,Ue<<(se.type-5121>>1)):O.drawArrays(0,Ue,Pe)),ua.dirty=!0,wa.setVAO(null),
da.viewportWidth=B,da.viewportHeight=z,T&&(g.cpuTime+=performance.now()-G),ka&&w.destroyStream(Q),la&&w.destroyStream(Ga),wb&&w.destroyStream(hb),kb&&w.destroyStream(Sa),Pa&&w.destroyStream(ub),Xb&&w.destroyStream(Rb),cc&&w.destroyStream(gc),yc&&w.destroyStream(id),kd&&w.destroyStream(xd),m.unbind(),Ae.unbind(),Te&&lb.destroyStream(se)},scope:function(a,e,d){var h,c,v,r,A,x,t,O,Aa,I,S,y,l,R,N,H,ha,T,q,ba,m,Bb,Q,Ma,F,P,ca,K,ga,ya,ra,wa,qa,fa,ja,X,ea,Xa,oa,Ca,na,za,M,pa,Ea,la,ta,Ba,Ib,Ha,Z,gb,ld,Tb,
fb,ma,nc,ac,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Xd,Qa,Kb,Fb,La,zd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,Cd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Rd,Ec,ge,Pc,Yc,Be,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Dd,pe,wd,jd,xe,ie,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ff,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,
Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;h=a.viewport;c=h.x|0;v=h.y|0;r="width"in h?h.width|0:da.framebufferWidth-c;A="height"in h?h.height|0:da.framebufferHeight-v;x=da.viewportWidth;da.viewportWidth=r;t=da.viewportHeight;da.viewportHeight=A;O=qd[0];qd[0]=c;Aa=qd[1];qd[1]=v;I=qd[2];qd[2]=r;S=qd[3];qd[3]=A;y=ka[0];
ka[0]=0;l=ka[1];ka[1]=0;R=ka[2];ka[2]=0;N=ka[3];ka[3]=1;H=Fa.blend_enable;Fa.blend_enable=!0;ha=Ga[0];Ga[0]=770;T=Ga[1];Ga[1]=771;q=Ga[2];Ga[2]=773;ba=Ga[3];Ga[3]=1;m=Fa.depth_enable;Fa.depth_enable=!1;Bb=a.viewport;Q=Bb.x|0;Ma=Bb.y|0;F="width"in Bb?Bb.width|0:da.framebufferWidth-Q;P="height"in Bb?Bb.height|0:da.framebufferHeight-Ma;ca=qe[0];qe[0]=Q;K=qe[1];qe[1]=Ma;ga=qe[2];qe[2]=F;ya=qe[3];qe[3]=P;ra=Fa.scissor_enable;Fa.scissor_enable=!0;wa=Fa.stencil_enable;Fa.stencil_enable=!1;if(qa=ua.profile)fa=
performance.now(),g.count++;ja=a.elements;X=null;X=(ea=va(ja))?lb.createStream(ja):lb.getElements(ja);Xa=Da.elements;Da.elements=X;oa=a.offset;Ca=Da.offset;Da.offset=oa;na=a.count;za=Da.count;Da.count=na;M=Da.primitive;Da.primitive=0;pa=xa[45];xa[45]=!1;Ea=a.markerTexture;la=xa[48];xa[48]=Ea;ta=a.opacity;Ba=xa[10];xa[10]=ta;Ib=E.call(this,da,a,d);Ha=xa[46];xa[46]=Ib;Z=xa[47];xa[47]=ia;gb=da.pixelRatio;ld=xa[34];xa[34]=gb;Tb=a.scale;fb=xa[6];xa[6]=Tb;ma=a.scaleFract;nc=xa[7];xa[7]=ma;ac=a.translate;
ib=xa[8];xa[8]=ac;pb=a.translateFract;Ia=xa[9];xa[9]=pb;rb=C.call(this,da,a,d);Ja=!1;cb=null;eb=0;Ka=!1;Sa=kb=0;tb=1;sb=0;Oa=5126;Fb=Kb=Qa=Xd=0;va(rb)?(Ja=!0,cb=w.createStream(34962,rb),Oa=cb.dtype):(cb=w.getBuffer(rb))?Oa=cb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Qa=rb.constant,Kb=Fb=Xd=0):(Qa=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Fb=2<rb.constant.length?rb.constant[2]:0,Xd=3<rb.constant.length?rb.constant[3]:0)):(cb=va(rb.buffer)?w.createStream(34962,
rb.buffer):w.getBuffer(rb.buffer),Oa="type"in rb?Ad[rb.type]:cb.dtype,Ka=!!rb.normalized,Sa=rb.size|0,kb=rb.offset|0,sb=rb.stride|0,eb=rb.divisor|0);La=L.buffer;L.buffer=cb;zd=L.divisor;L.divisor=eb;Va=L.normalized;L.normalized=Ka;Lb=L.offset;L.offset=kb;Mb=L.size;L.size=Sa;mb=L.state;L.state=tb;Na=L.stride;L.stride=sb;$b=L.type;L.type=Oa;Pa=L.w;L.w=Xd;ub=L.x;L.x=Qa;vb=L.y;L.y=Kb;Ra=L.z;L.z=Fb;nb=u.call(this,da,a,d);ec=!1;Ac=null;uc=0;$a=!1;Cd=ic=0;Ta=1;Oc=0;Ab=5126;Xb=tc=Wb=Wa=0;va(nb)?(ec=!0,Ac=
w.createStream(34962,nb),Ab=Ac.dtype):(Ac=w.getBuffer(nb))?Ab=Ac.dtype:"constant"in nb?(Ta=2,"number"===typeof nb.constant?(Wb=nb.constant,tc=Xb=Wa=0):(Wb=0<nb.constant.length?nb.constant[0]:0,tc=1<nb.constant.length?nb.constant[1]:0,Xb=2<nb.constant.length?nb.constant[2]:0,Wa=3<nb.constant.length?nb.constant[3]:0)):(Ac=va(nb.buffer)?w.createStream(34962,nb.buffer):w.getBuffer(nb.buffer),Ab="type"in nb?Ad[nb.type]:Ac.dtype,$a=!!nb.normalized,Cd=nb.size|0,ic=nb.offset|0,Oc=nb.stride|0,uc=nb.divisor|
0);Rb=J.buffer;J.buffer=Ac;Lc=J.divisor;J.divisor=uc;Sb=J.normalized;J.normalized=$a;Rd=J.offset;J.offset=ic;Ec=J.size;J.size=Cd;ge=J.state;J.state=Ta;Pc=J.stride;J.stride=Oc;Yc=J.type;J.type=Ab;Be=J.w;J.w=Wa;mc=J.x;J.x=Wb;vc=J.y;J.y=tc;fc=J.z;J.z=Xb;bb=aa.call(this,da,a,d);sc=!1;Ub=null;Yb=0;cc=!1;xc=gc=0;Bc=1;cd=0;Sc=5126;md=Zc=Uc=Tc=0;va(bb)?(sc=!0,Ub=w.createStream(34962,bb),Sc=Ub.dtype):(Ub=w.getBuffer(bb))?Sc=Ub.dtype:"constant"in bb?(Bc=2,"number"===typeof bb.constant?(Uc=bb.constant,Zc=md=
Tc=0):(Uc=0<bb.constant.length?bb.constant[0]:0,Zc=1<bb.constant.length?bb.constant[1]:0,md=2<bb.constant.length?bb.constant[2]:0,Tc=3<bb.constant.length?bb.constant[3]:0)):(Ub=va(bb.buffer)?w.createStream(34962,bb.buffer):w.getBuffer(bb.buffer),Sc="type"in bb?Ad[bb.type]:Ub.dtype,cc=!!bb.normalized,xc=bb.size|0,gc=bb.offset|0,cd=bb.stride|0,Yb=bb.divisor|0);dd=b.buffer;b.buffer=Ub;$c=b.divisor;b.divisor=Yb;jc=b.normalized;b.normalized=cc;bc=b.offset;b.offset=gc;ad=b.size;b.size=xc;Wc=b.state;b.state=
Bc;ed=b.stride;b.stride=cd;yc=b.type;b.type=Sc;id=b.w;b.w=Tc;Dd=b.x;b.x=Uc;pe=b.y;b.y=Zc;wd=b.z;b.z=md;jd=n.call(this,da,a,d);xe=!1;ie=null;Yd=0;de=!1;Ld=ae=0;Id=1;od=0;Vc=5126;xd=kd=td=vd=0;va(jd)?(xe=!0,ie=w.createStream(34962,jd),Vc=ie.dtype):(ie=w.getBuffer(jd))?Vc=ie.dtype:"constant"in jd?(Id=2,"number"===typeof jd.constant?(td=jd.constant,kd=xd=vd=0):(td=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,xd=2<jd.constant.length?jd.constant[2]:0,vd=3<jd.constant.length?
jd.constant[3]:0)):(ie=va(jd.buffer)?w.createStream(34962,jd.buffer):w.getBuffer(jd.buffer),Vc="type"in jd?Ad[jd.type]:ie.dtype,de=!!jd.normalized,Ld=jd.size|0,ae=jd.offset|0,od=jd.stride|0,Yd=jd.divisor|0);Bd=U.buffer;U.buffer=ie;Fd=U.divisor;U.divisor=Yd;je=U.normalized;U.normalized=de;le=U.offset;U.offset=ae;ff=U.size;U.size=Ld;me=U.state;U.state=Id;ke=U.stride;U.stride=od;he=U.type;U.type=Vc;ue=U.w;U.w=vd;ee=U.x;U.x=td;ne=U.y;U.y=kd;Qc=U.z;U.z=xd;hd=p.call(this,da,a,d);ve=!1;re=null;Md=0;Qd=!1;
Ud=Td=0;oe=1;Ae=0;De=5126;Pe=Ue=Te=se=0;va(hd)?(ve=!0,re=w.createStream(34962,hd),De=re.dtype):(re=w.getBuffer(hd))?De=re.dtype:"constant"in hd?(oe=2,"number"===typeof hd.constant?(Te=hd.constant,Ue=Pe=se=0):(Te=0<hd.constant.length?hd.constant[0]:0,Ue=1<hd.constant.length?hd.constant[1]:0,Pe=2<hd.constant.length?hd.constant[2]:0,se=3<hd.constant.length?hd.constant[3]:0)):(re=va(hd.buffer)?w.createStream(34962,hd.buffer):w.getBuffer(hd.buffer),De="type"in hd?Ad[hd.type]:re.dtype,Qd=!!hd.normalized,
Ud=hd.size|0,Td=hd.offset|0,Ae=hd.stride|0,Md=hd.divisor|0);we=W.buffer;W.buffer=re;He=W.divisor;W.divisor=Md;Ke=W.normalized;W.normalized=Qd;Le=W.offset;W.offset=Td;Me=W.size;W.size=Ud;Ie=W.state;W.state=oe;Od=W.stride;W.stride=Ae;Zd=W.type;W.type=De;ce=W.w;W.w=se;fe=W.x;W.x=Te;Ne=W.y;W.y=Ue;Jd=W.z;W.z=Pe;Vd=B.call(this,da,a,d);Fe=!1;Oe=null;cf=0;bf=!1;Qe=Ve=0;af=1;Ze=0;We=5126;Ye=be=Wd=Xe=0;va(Vd)?(Fe=!0,Oe=w.createStream(34962,Vd),We=Oe.dtype):(Oe=w.getBuffer(Vd))?We=Oe.dtype:"constant"in Vd?(af=
2,"number"===typeof Vd.constant?(Wd=Vd.constant,be=Ye=Xe=0):(Wd=0<Vd.constant.length?Vd.constant[0]:0,be=1<Vd.constant.length?Vd.constant[1]:0,Ye=2<Vd.constant.length?Vd.constant[2]:0,Xe=3<Vd.constant.length?Vd.constant[3]:0)):(Oe=va(Vd.buffer)?w.createStream(34962,Vd.buffer):w.getBuffer(Vd.buffer),We="type"in Vd?Ad[Vd.type]:Oe.dtype,bf=!!Vd.normalized,Qe=Vd.size|0,Ve=Vd.offset|0,Ze=Vd.stride|0,cf=Vd.divisor|0);kf=z.buffer;z.buffer=Oe;of=z.divisor;z.divisor=cf;gf=z.normalized;z.normalized=bf;lf=z.offset;
z.offset=Ve;mf=z.size;z.size=Qe;nf=z.state;z.state=af;sf=z.stride;z.stride=Ze;pf=z.type;z.type=We;tf=z.w;z.w=Xe;Cf=z.x;z.x=Wd;Df=z.y;z.y=be;Re=z.z;z.z=Ye;Ge=Y.call(this,da,a,d);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;va(Ge)?(qf=!0,rf=w.createStream(34962,Ge),yf=rf.dtype):(rf=w.getBuffer(Ge))?yf=rf.dtype:"constant"in Ge?(Gf=2,"number"===typeof Ge.constant?(zf=Ge.constant,Af=Jf=wf=0):(zf=0<Ge.constant.length?Ge.constant[0]:0,Af=1<Ge.constant.length?Ge.constant[1]:0,Jf=2<Ge.constant.length?
Ge.constant[2]:0,wf=3<Ge.constant.length?Ge.constant[3]:0)):(rf=va(Ge.buffer)?w.createStream(34962,Ge.buffer):w.getBuffer(Ge.buffer),yf="type"in Ge?Ad[Ge.type]:rf.dtype,Hf=!!Ge.normalized,Ff=Ge.size|0,Bf=Ge.offset|0,xf=Ge.stride|0,Ef=Ge.divisor|0);Kf=G.buffer;G.buffer=rf;Lf=G.divisor;G.divisor=Ef;Mf=G.normalized;G.normalized=Hf;uf=G.offset;G.offset=Bf;Rf=G.size;G.size=Ff;If=G.state;G.state=Gf;vf=G.stride;G.stride=xf;dg=G.type;G.type=yf;Sf=G.w;G.w=wf;Tf=G.x;G.x=zf;qg=G.y;G.y=Af;hf=G.z;G.z=Jf;df=D.call(this,
da,a,d);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;va(df)?(Nf=!0,Of=w.createStream(34962,df),Uf=Of.dtype):(Of=w.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=va(df.buffer)?w.createStream(34962,df.buffer):w.getBuffer(df.buffer),Uf="type"in df?Ad[df.type]:
Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=k.buffer;k.buffer=Of;sg=k.divisor;k.divisor=eg;tg=k.normalized;k.normalized=fg;ug=k.offset;k.offset=gg;vg=k.size;k.size=hg;wg=k.state;k.state=ig;xg=k.stride;k.stride=Wf;yg=k.type;k.type=Uf;zg=k.w;k.w=Xf;Ag=k.x;k.x=Yf;Bg=k.y;k.y=Zf;jf=k.z;k.z=jg;ef=V.call(this,da,a,d);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;va(ef)?(Pf=!0,Qf=w.createStream(34962,ef),Vf=Qf.dtype):(Qf=w.getBuffer(ef))?Vf=
Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=va(ef.buffer)?w.createStream(34962,ef.buffer):w.getBuffer(ef.buffer),Vf="type"in ef?Ad[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|0,$f=ef.stride|0,kg=ef.divisor|0);Cg=f.buffer;f.buffer=Qf;Dg=f.divisor;f.divisor=kg;Eg=f.normalized;
f.normalized=lg;Fg=f.offset;f.offset=mg;Gg=f.size;f.size=ng;Hg=f.state;f.state=og;Ig=f.stride;f.stride=$f;Jg=f.type;f.type=Vf;Kg=f.w;f.w=ag;Lg=f.x;f.x=bg;Mg=f.y;f.y=cg;Ng=f.z;f.z=pg;Og=sa.vert;sa.vert=44;Pg=sa.frag;sa.frag=43;ua.dirty=!0;e(da,a,d);da.viewportWidth=x;da.viewportHeight=t;qd[0]=O;qd[1]=Aa;qd[2]=I;qd[3]=S;ka[0]=y;ka[1]=l;ka[2]=R;ka[3]=N;Fa.blend_enable=H;Ga[0]=ha;Ga[1]=T;Ga[2]=q;Ga[3]=ba;Fa.depth_enable=m;qe[0]=ca;qe[1]=K;qe[2]=ga;qe[3]=ya;Fa.scissor_enable=ra;Fa.stencil_enable=wa;qa&&
(g.cpuTime+=performance.now()-fa);ea&&lb.destroyStream(X);Da.elements=Xa;Da.offset=Ca;Da.count=za;Da.primitive=M;xa[45]=pa;xa[48]=la;xa[10]=Ba;xa[46]=Ha;xa[47]=Z;xa[34]=ld;xa[6]=fb;xa[7]=nc;xa[8]=ib;xa[9]=Ia;Ja&&w.destroyStream(cb);L.buffer=La;L.divisor=zd;L.normalized=Va;L.offset=Lb;L.size=Mb;L.state=mb;L.stride=Na;L.type=$b;L.w=Pa;L.x=ub;L.y=vb;L.z=Ra;ec&&w.destroyStream(Ac);J.buffer=Rb;J.divisor=Lc;J.normalized=Sb;J.offset=Rd;J.size=Ec;J.state=ge;J.stride=Pc;J.type=Yc;J.w=Be;J.x=mc;J.y=vc;J.z=
fc;sc&&w.destroyStream(Ub);b.buffer=dd;b.divisor=$c;b.normalized=jc;b.offset=bc;b.size=ad;b.state=Wc;b.stride=ed;b.type=yc;b.w=id;b.x=Dd;b.y=pe;b.z=wd;xe&&w.destroyStream(ie);U.buffer=Bd;U.divisor=Fd;U.normalized=je;U.offset=le;U.size=ff;U.state=me;U.stride=ke;U.type=he;U.w=ue;U.x=ee;U.y=ne;U.z=Qc;ve&&w.destroyStream(re);W.buffer=we;W.divisor=He;W.normalized=Ke;W.offset=Le;W.size=Me;W.state=Ie;W.stride=Od;W.type=Zd;W.w=ce;W.x=fe;W.y=Ne;W.z=Jd;Fe&&w.destroyStream(Oe);z.buffer=kf;z.divisor=of;z.normalized=
gf;z.offset=lf;z.size=mf;z.state=nf;z.stride=sf;z.type=pf;z.w=tf;z.x=Cf;z.y=Df;z.z=Re;qf&&w.destroyStream(rf);G.buffer=Kf;G.divisor=Lf;G.normalized=Mf;G.offset=uf;G.size=Rf;G.state=If;G.stride=vf;G.type=dg;G.w=Sf;G.x=Tf;G.y=qg;G.z=hf;Nf&&w.destroyStream(Of);k.buffer=rg;k.divisor=sg;k.normalized=tg;k.offset=ug;k.size=vg;k.state=wg;k.stride=xg;k.type=yg;k.w=zg;k.x=Ag;k.y=Bg;k.z=jf;Pf&&w.destroyStream(Qf);f.buffer=Cg;f.divisor=Dg;f.normalized=Eg;f.offset=Fg;f.size=Gg;f.state=Hg;f.stride=Ig;f.type=Jg;
f.w=Kg;f.x=Lg;f.y=Mg;f.z=Ng;sa.vert=Og;sa.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,M,H,la,Z,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb){var Xa,v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa,ka,ca,ta,fb,Ga,gb,fa,ma,nc,Ha,ac,Tb,ff,Cd,qe,Xd,Be,xe,Rd,pe,
ie,Dd,qd,ge;Xa=a.attributes;v=a.buffer;w=a.context;da=a.current;ua=a.draw;Da=a.elements;lb=a.extensions;Ib=a.framebuffer;ba=a.gl;O=a.isBufferArgs;va=a.next;Fa=a.shader;sa=a.uniforms;xa=a.vao;wa=va.blend_color;ka=da.blend_color;ca=va.blend_equation;ta=da.blend_equation;fb=va.blend_func;Ga=da.blend_func;gb=va.colorMask;fa=da.colorMask;ma=va.depth_range;nc=da.depth_range;Ha=va.polygonOffset_offset;ac=da.polygonOffset_offset;Tb=va.sample_coverage;ff=da.sample_coverage;Cd=va.scissor_box;qe=da.scissor_box;
Xd=va.stencil_func;Be=da.stencil_func;xe=va.stencil_opBack;Rd=da.stencil_opBack;pe=va.stencil_opFront;ie=da.stencil_opFront;Dd=va.viewport;qd=da.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,f){var b,e,d,k,h,c;b=Ib.next;b!==Ib.cur&&(b?ba.bindFramebuffer(36160,b.framebuffer):ba.bindFramebuffer(36160,null),Ib.cur=b);if(da.dirty){var n,x,t,p,B,z,C,Fa,D,y,l,u,sa,q,G,m,F,E,K,J,L,wa,U,aa,W,ia,V,Y,fb,db,zc,yb,ab,Nb;n=va.dither;
n!==da.dither&&(n?ba.enable(3024):ba.disable(3024),da.dither=n);x=ca[0];t=ca[1];if(x!==ta[0]||t!==ta[1])ba.blendEquationSeparate(x,t),ta[0]=x,ta[1]=t;p=va.depth_func;p!==da.depth_func&&(ba.depthFunc(p),da.depth_func=p);B=ma[0];z=ma[1];if(B!==nc[0]||z!==nc[1])ba.depthRange(B,z),nc[0]=B,nc[1]=z;C=va.depth_mask;C!==da.depth_mask&&(ba.depthMask(C),da.depth_mask=C);Fa=gb[0];D=gb[1];y=gb[2];l=gb[3];if(Fa!==fa[0]||D!==fa[1]||y!==fa[2]||l!==fa[3])ba.colorMask(Fa,D,y,l),fa[0]=Fa,fa[1]=D,fa[2]=y,fa[3]=l;u=
va.cull_enable;u!==da.cull_enable&&(u?ba.enable(2884):ba.disable(2884),da.cull_enable=u);sa=va.cull_face;sa!==da.cull_face&&(ba.cullFace(sa),da.cull_face=sa);q=va.frontFace;q!==da.frontFace&&(ba.frontFace(q),da.frontFace=q);G=va.lineWidth;G!==da.lineWidth&&(ba.lineWidth(G),da.lineWidth=G);m=va.polygonOffset_enable;m!==da.polygonOffset_enable&&(m?ba.enable(32823):ba.disable(32823),da.polygonOffset_enable=m);F=Ha[0];E=Ha[1];if(F!==ac[0]||E!==ac[1])ba.polygonOffset(F,E),ac[0]=F,ac[1]=E;K=va.sample_alpha;
K!==da.sample_alpha&&(K?ba.enable(32926):ba.disable(32926),da.sample_alpha=K);J=va.sample_enable;J!==da.sample_enable&&(J?ba.enable(32928):ba.disable(32928),da.sample_enable=J);L=Tb[0];wa=Tb[1];if(L!==ff[0]||wa!==ff[1])ba.sampleCoverage(L,wa),ff[0]=L,ff[1]=wa;U=va.stencil_mask;U!==da.stencil_mask&&(ba.stencilMask(U),da.stencil_mask=U);aa=Xd[0];W=Xd[1];ia=Xd[2];if(aa!==Be[0]||W!==Be[1]||ia!==Be[2])ba.stencilFunc(aa,W,ia),Be[0]=aa,Be[1]=W,Be[2]=ia;V=pe[0];Y=pe[1];fb=pe[2];db=pe[3];if(V!==ie[0]||Y!==
ie[1]||fb!==ie[2]||db!==ie[3])ba.stencilOpSeparate(V,Y,fb,db),ie[0]=V,ie[1]=Y,ie[2]=fb,ie[3]=db;zc=xe[0];yb=xe[1];ab=xe[2];Nb=xe[3];if(zc!==Rd[0]||yb!==Rd[1]||ab!==Rd[2]||Nb!==Rd[3])ba.stencilOpSeparate(zc,yb,ab,Nb),Rd[0]=zc,Rd[1]=yb,Rd[2]=ab,Rd[3]=Nb}ba.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ba.enable(3042);da.blend_enable=!0;ba.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;ba.disable(2929);da.depth_enable=!1;ba.enable(3089);da.scissor_enable=!0;ba.disable(2960);
da.stencil_enable=!1;if(e=da.profile)d=performance.now(),g.count+=f;ba.useProgram(M.program);k=lb.angle_instanced_arrays;var Ya;xa.setVAO(null);ba.uniform1i(I.location,!1);ba.uniform1i(ra.location,P.bind());Ya=ua.instances;for(h=0;h<f;++h){c=a[h];var ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Cd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Dd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,
Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;ob=c.viewport;Za=ob.x|0;Nc=ob.y|0;Ob="width"in ob?ob.width|0:w.framebufferWidth-Za;Jb="height"in ob?ob.height|0:w.framebufferHeight-Nc;rc=w.viewportWidth;w.viewportWidth=
Ob;Pb=w.viewportHeight;w.viewportHeight=Jb;ba.viewport(Za,Nc,Ob,Jb);qd[0]=Za;qd[1]=Nc;qd[2]=Ob;qd[3]=Jb;jb=c.viewport;Hb=jb.x|0;Eb=jb.y|0;wb="width"in jb?jb.width|0:w.framebufferWidth-Hb;hb="height"in jb?jb.height|0:w.framebufferHeight-Eb;ba.scissor(Hb,Eb,wb,hb);qe[0]=Hb;qe[1]=Eb;qe[2]=wb;qe[3]=hb;Zb=H.call(this,w,c,h);Qb=!1;qb=null;Ua=0;Vb=!1;hc=zb=0;ib=1;pb=0;Ia=5126;eb=cb=Ja=rb=0;O(Zb)?(Qb=!0,qb=v.createStream(34962,Zb),Ia=qb.dtype):(qb=v.getBuffer(Zb))?Ia=qb.dtype:"constant"in Zb?(ib=2,"number"===
typeof Zb.constant?(Ja=Zb.constant,cb=eb=rb=0):(Ja=0<Zb.constant.length?Zb.constant[0]:0,cb=1<Zb.constant.length?Zb.constant[1]:0,eb=2<Zb.constant.length?Zb.constant[2]:0,rb=3<Zb.constant.length?Zb.constant[3]:0)):(qb=O(Zb.buffer)?v.createStream(34962,Zb.buffer):v.getBuffer(Zb.buffer),Ia="type"in Zb?ge[Zb.type]:qb.dtype,Vb=!!Zb.normalized,hc=Zb.size|0,zb=Zb.offset|0,pb=Zb.stride|0,Ua=Zb.divisor|0);Ka=za.location;kb=Xa[Ka];if(1===ib){kb.buffer||ba.enableVertexAttribArray(Ka);Sa=hc||1;if(kb.type!==
Ia||kb.size!==Sa||kb.buffer!==qb||kb.normalized!==Vb||kb.offset!==zb||kb.stride!==pb)ba.bindBuffer(34962,qb.buffer),ba.vertexAttribPointer(Ka,Sa,Ia,Vb,pb,zb),kb.type=Ia,kb.size=Sa,kb.buffer=qb,kb.normalized=Vb,kb.offset=zb,kb.stride=pb;kb.divisor!==Ua&&(k.vertexAttribDivisorANGLE(Ka,Ua),kb.divisor=Ua)}else if(kb.buffer&&(ba.disableVertexAttribArray(Ka),kb.buffer=null),kb.x!==Ja||kb.y!==cb||kb.z!==eb||kb.w!==rb)ba.vertexAttrib4f(Ka,Ja,cb,eb,rb),kb.x=Ja,kb.y=cb,kb.z=eb,kb.w=rb;tb=la.call(this,w,c,h);
sb=!1;Oa=null;Cc=0;Qa=!1;Fb=Kb=0;La=1;Cd=0;Va=5126;Na=mb=Mb=Lb=0;O(tb)?(sb=!0,Oa=v.createStream(34962,tb),Va=Oa.dtype):(Oa=v.getBuffer(tb))?Va=Oa.dtype:"constant"in tb?(La=2,"number"===typeof tb.constant?(Mb=tb.constant,mb=Na=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,mb=1<tb.constant.length?tb.constant[1]:0,Na=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Oa=O(tb.buffer)?v.createStream(34962,tb.buffer):v.getBuffer(tb.buffer),Va="type"in tb?ge[tb.type]:Oa.dtype,
Qa=!!tb.normalized,Fb=tb.size|0,Kb=tb.offset|0,Cd=tb.stride|0,Cc=tb.divisor|0);$b=Aa.location;Pa=Xa[$b];if(1===La){Pa.buffer||ba.enableVertexAttribArray($b);ub=Fb||1;if(Pa.type!==Va||Pa.size!==ub||Pa.buffer!==Oa||Pa.normalized!==Qa||Pa.offset!==Kb||Pa.stride!==Cd)ba.bindBuffer(34962,Oa.buffer),ba.vertexAttribPointer($b,ub,Va,Qa,Cd,Kb),Pa.type=Va,Pa.size=ub,Pa.buffer=Oa,Pa.normalized=Qa,Pa.offset=Kb,Pa.stride=Cd;Pa.divisor!==Cc&&(k.vertexAttribDivisorANGLE($b,Cc),Pa.divisor=Cc)}else if(Pa.buffer&&
(ba.disableVertexAttribArray($b),Pa.buffer=null),Pa.x!==Mb||Pa.y!==mb||Pa.z!==Na||Pa.w!==Lb)ba.vertexAttrib4f($b,Mb,mb,Na,Lb),Pa.x=Mb,Pa.y=mb,Pa.z=Na,Pa.w=Lb;vb=Z.call(this,w,c,h);Ra=!1;nb=null;ec=0;Ac=!1;$a=uc=0;ic=1;sd=0;Ta=5126;Wb=Wa=Ab=Oc=0;O(vb)?(Ra=!0,nb=v.createStream(34962,vb),Ta=nb.dtype):(nb=v.getBuffer(vb))?Ta=nb.dtype:"constant"in vb?(ic=2,"number"===typeof vb.constant?(Ab=vb.constant,Wa=Wb=Oc=0):(Ab=0<vb.constant.length?vb.constant[0]:0,Wa=1<vb.constant.length?vb.constant[1]:0,Wb=2<vb.constant.length?
vb.constant[2]:0,Oc=3<vb.constant.length?vb.constant[3]:0)):(nb=O(vb.buffer)?v.createStream(34962,vb.buffer):v.getBuffer(vb.buffer),Ta="type"in vb?ge[vb.type]:nb.dtype,Ac=!!vb.normalized,$a=vb.size|0,uc=vb.offset|0,sd=vb.stride|0,ec=vb.divisor|0);tc=Ma.location;Xb=Xa[tc];if(1===ic){Xb.buffer||ba.enableVertexAttribArray(tc);Rb=$a||1;if(Xb.type!==Ta||Xb.size!==Rb||Xb.buffer!==nb||Xb.normalized!==Ac||Xb.offset!==uc||Xb.stride!==sd)ba.bindBuffer(34962,nb.buffer),ba.vertexAttribPointer(tc,Rb,Ta,Ac,sd,
uc),Xb.type=Ta,Xb.size=Rb,Xb.buffer=nb,Xb.normalized=Ac,Xb.offset=uc,Xb.stride=sd;Xb.divisor!==ec&&(k.vertexAttribDivisorANGLE(tc,ec),Xb.divisor=ec)}else if(Xb.buffer&&(ba.disableVertexAttribArray(tc),Xb.buffer=null),Xb.x!==Ab||Xb.y!==Wa||Xb.z!==Wb||Xb.w!==Oc)ba.vertexAttrib4f(tc,Ab,Wa,Wb,Oc),Xb.x=Ab,Xb.y=Wa,Xb.z=Wb,Xb.w=Oc;Lc=X.call(this,w,c,h);Sb=!1;Dd=null;Ec=0;yd=!1;Yc=Pc=0;ud=1;mc=0;vc=5126;Ub=sc=bb=fc=0;O(Lc)?(Sb=!0,Dd=v.createStream(34962,Lc),vc=Dd.dtype):(Dd=v.getBuffer(Lc))?vc=Dd.dtype:"constant"in
Lc?(ud=2,"number"===typeof Lc.constant?(bb=Lc.constant,sc=Ub=fc=0):(bb=0<Lc.constant.length?Lc.constant[0]:0,sc=1<Lc.constant.length?Lc.constant[1]:0,Ub=2<Lc.constant.length?Lc.constant[2]:0,fc=3<Lc.constant.length?Lc.constant[3]:0)):(Dd=O(Lc.buffer)?v.createStream(34962,Lc.buffer):v.getBuffer(Lc.buffer),vc="type"in Lc?ge[Lc.type]:Dd.dtype,yd=!!Lc.normalized,Yc=Lc.size|0,Pc=Lc.offset|0,mc=Lc.stride|0,Ec=Lc.divisor|0);Yb=Bb.location;cc=Xa[Yb];if(1===ud){cc.buffer||ba.enableVertexAttribArray(Yb);gc=
Yc||1;if(cc.type!==vc||cc.size!==gc||cc.buffer!==Dd||cc.normalized!==yd||cc.offset!==Pc||cc.stride!==mc)ba.bindBuffer(34962,Dd.buffer),ba.vertexAttribPointer(Yb,gc,vc,yd,mc,Pc),cc.type=vc,cc.size=gc,cc.buffer=Dd,cc.normalized=yd,cc.offset=Pc,cc.stride=mc;cc.divisor!==Ec&&(k.vertexAttribDivisorANGLE(Yb,Ec),cc.divisor=Ec)}else if(cc.buffer&&(ba.disableVertexAttribArray(Yb),cc.buffer=null),cc.x!==bb||cc.y!==sc||cc.z!==Ub||cc.w!==fc)ba.vertexAttrib4f(Yb,bb,sc,Ub,fc),cc.x=bb,cc.y=sc,cc.z=Ub,cc.w=fc;xc=
ea.call(this,w,c,h);Bc=!1;cd=null;Sc=0;Tc=!1;Zc=Uc=0;md=1;dd=0;$c=5126;Wc=ad=bc=jc=0;O(xc)?(Bc=!0,cd=v.createStream(34962,xc),$c=cd.dtype):(cd=v.getBuffer(xc))?$c=cd.dtype:"constant"in xc?(md=2,"number"===typeof xc.constant?(bc=xc.constant,ad=Wc=jc=0):(bc=0<xc.constant.length?xc.constant[0]:0,ad=1<xc.constant.length?xc.constant[1]:0,Wc=2<xc.constant.length?xc.constant[2]:0,jc=3<xc.constant.length?xc.constant[3]:0)):(cd=O(xc.buffer)?v.createStream(34962,xc.buffer):v.getBuffer(xc.buffer),$c="type"in
xc?ge[xc.type]:cd.dtype,Tc=!!xc.normalized,Zc=xc.size|0,Uc=xc.offset|0,dd=xc.stride|0,Sc=xc.divisor|0);ed=Ca.location;yc=Xa[ed];if(1===md){yc.buffer||ba.enableVertexAttribArray(ed);id=Zc||1;if(yc.type!==$c||yc.size!==id||yc.buffer!==cd||yc.normalized!==Tc||yc.offset!==Uc||yc.stride!==dd)ba.bindBuffer(34962,cd.buffer),ba.vertexAttribPointer(ed,id,$c,Tc,dd,Uc),yc.type=$c,yc.size=id,yc.buffer=cd,yc.normalized=Tc,yc.offset=Uc,yc.stride=dd;yc.divisor!==Sc&&(k.vertexAttribDivisorANGLE(ed,Sc),yc.divisor=
Sc)}else if(yc.buffer&&(ba.disableVertexAttribArray(ed),yc.buffer=null),yc.x!==bc||yc.y!==ad||yc.z!==Wc||yc.w!==jc)ba.vertexAttrib4f(ed,bc,ad,Wc,jc),yc.x=bc,yc.y=ad,yc.z=Wc,yc.w=jc;Ed=T.call(this,w,c,h);ye=!1;wd=null;jd=0;Je=!1;Yd=Pd=0;de=1;ae=0;Ld=5126;vd=Vc=od=Id=0;O(Ed)?(ye=!0,wd=v.createStream(34962,Ed),Ld=wd.dtype):(wd=v.getBuffer(Ed))?Ld=wd.dtype:"constant"in Ed?(de=2,"number"===typeof Ed.constant?(od=Ed.constant,Vc=vd=Id=0):(od=0<Ed.constant.length?Ed.constant[0]:0,Vc=1<Ed.constant.length?
Ed.constant[1]:0,vd=2<Ed.constant.length?Ed.constant[2]:0,Id=3<Ed.constant.length?Ed.constant[3]:0)):(wd=O(Ed.buffer)?v.createStream(34962,Ed.buffer):v.getBuffer(Ed.buffer),Ld="type"in Ed?ge[Ed.type]:wd.dtype,Je=!!Ed.normalized,Yd=Ed.size|0,Pd=Ed.offset|0,ae=Ed.stride|0,jd=Ed.divisor|0);td=pa.location;kd=Xa[td];if(1===de){kd.buffer||ba.enableVertexAttribArray(td);xd=Yd||1;if(kd.type!==Ld||kd.size!==xd||kd.buffer!==wd||kd.normalized!==Je||kd.offset!==Pd||kd.stride!==ae)ba.bindBuffer(34962,wd.buffer),
ba.vertexAttribPointer(td,xd,Ld,Je,ae,Pd),kd.type=Ld,kd.size=xd,kd.buffer=wd,kd.normalized=Je,kd.offset=Pd,kd.stride=ae;kd.divisor!==jd&&(k.vertexAttribDivisorANGLE(td,jd),kd.divisor=jd)}else if(kd.buffer&&(ba.disableVertexAttribArray(td),kd.buffer=null),kd.x!==od||kd.y!==Vc||kd.z!==vd||kd.w!==Id)ba.vertexAttrib4f(td,od,Vc,vd,Id),kd.x=od,kd.y=Vc,kd.z=vd,kd.w=Id;Bd=S.call(this,w,c,h);Fd=!1;je=null;le=0;ze=!1;ke=me=0;he=1;ue=0;ee=5126;ve=hd=Qc=ne=0;O(Bd)?(Fd=!0,je=v.createStream(34962,Bd),ee=je.dtype):
(je=v.getBuffer(Bd))?ee=je.dtype:"constant"in Bd?(he=2,"number"===typeof Bd.constant?(Qc=Bd.constant,hd=ve=ne=0):(Qc=0<Bd.constant.length?Bd.constant[0]:0,hd=1<Bd.constant.length?Bd.constant[1]:0,ve=2<Bd.constant.length?Bd.constant[2]:0,ne=3<Bd.constant.length?Bd.constant[3]:0)):(je=O(Bd.buffer)?v.createStream(34962,Bd.buffer):v.getBuffer(Bd.buffer),ee="type"in Bd?ge[Bd.type]:je.dtype,ze=!!Bd.normalized,ke=Bd.size|0,me=Bd.offset|0,ue=Bd.stride|0,le=Bd.divisor|0);re=A.location;Md=Xa[re];if(1===he){Md.buffer||
ba.enableVertexAttribArray(re);Qd=ke||4;if(Md.type!==ee||Md.size!==Qd||Md.buffer!==je||Md.normalized!==ze||Md.offset!==me||Md.stride!==ue)ba.bindBuffer(34962,je.buffer),ba.vertexAttribPointer(re,Qd,ee,ze,ue,me),Md.type=ee,Md.size=Qd,Md.buffer=je,Md.normalized=ze,Md.offset=me,Md.stride=ue;Md.divisor!==le&&(k.vertexAttribDivisorANGLE(re,le),Md.divisor=le)}else if(Md.buffer&&(ba.disableVertexAttribArray(re),Md.buffer=null),Md.x!==Qc||Md.y!==hd||Md.z!==ve||Md.w!==ne)ba.vertexAttrib4f(re,Qc,hd,ve,ne),
Md.x=Qc,Md.y=hd,Md.z=ve,Md.w=ne;Td=N.call(this,w,c,h);Ud=!1;oe=null;Ae=0;De=!1;Te=se=0;Ue=1;Pe=0;we=5126;Me=Le=Ke=He=0;O(Td)?(Ud=!0,oe=v.createStream(34962,Td),we=oe.dtype):(oe=v.getBuffer(Td))?we=oe.dtype:"constant"in Td?(Ue=2,"number"===typeof Td.constant?(Ke=Td.constant,Le=Me=He=0):(Ke=0<Td.constant.length?Td.constant[0]:0,Le=1<Td.constant.length?Td.constant[1]:0,Me=2<Td.constant.length?Td.constant[2]:0,He=3<Td.constant.length?Td.constant[3]:0)):(oe=O(Td.buffer)?v.createStream(34962,Td.buffer):
v.getBuffer(Td.buffer),we="type"in Td?ge[Td.type]:oe.dtype,De=!!Td.normalized,Te=Td.size|0,se=Td.offset|0,Pe=Td.stride|0,Ae=Td.divisor|0);Ie=qa.location;Od=Xa[Ie];if(1===Ue){Od.buffer||ba.enableVertexAttribArray(Ie);Zd=Te||4;if(Od.type!==we||Od.size!==Zd||Od.buffer!==oe||Od.normalized!==De||Od.offset!==se||Od.stride!==Pe)ba.bindBuffer(34962,oe.buffer),ba.vertexAttribPointer(Ie,Zd,we,De,Pe,se),Od.type=we,Od.size=Zd,Od.buffer=oe,Od.normalized=De,Od.offset=se,Od.stride=Pe;Od.divisor!==Ae&&(k.vertexAttribDivisorANGLE(Ie,
Ae),Od.divisor=Ae)}else if(Od.buffer&&(ba.disableVertexAttribArray(Ie),Od.buffer=null),Od.x!==Ke||Od.y!==Le||Od.z!==Me||Od.w!==He)ba.vertexAttrib4f(Ie,Ke,Le,Me,He),Od.x=Ke,Od.y=Le,Od.z=Me,Od.w=He;ce=r.call(this,w,c,h);fe=!1;Ne=null;Jd=0;Vd=!1;Oe=Fe=0;cf=1;bf=0;Ve=5126;We=Ze=af=Qe=0;O(ce)?(fe=!0,Ne=v.createStream(34962,ce),Ve=Ne.dtype):(Ne=v.getBuffer(ce))?Ve=Ne.dtype:"constant"in ce?(cf=2,"number"===typeof ce.constant?(af=ce.constant,Ze=We=Qe=0):(af=0<ce.constant.length?ce.constant[0]:0,Ze=1<ce.constant.length?
ce.constant[1]:0,We=2<ce.constant.length?ce.constant[2]:0,Qe=3<ce.constant.length?ce.constant[3]:0)):(Ne=O(ce.buffer)?v.createStream(34962,ce.buffer):v.getBuffer(ce.buffer),Ve="type"in ce?ge[ce.type]:Ne.dtype,Vd=!!ce.normalized,Oe=ce.size|0,Fe=ce.offset|0,bf=ce.stride|0,Jd=ce.divisor|0);Xe=ga.location;Wd=Xa[Xe];if(1===cf){Wd.buffer||ba.enableVertexAttribArray(Xe);be=Oe||1;if(Wd.type!==Ve||Wd.size!==be||Wd.buffer!==Ne||Wd.normalized!==Vd||Wd.offset!==Fe||Wd.stride!==bf)ba.bindBuffer(34962,Ne.buffer),
ba.vertexAttribPointer(Xe,be,Ve,Vd,bf,Fe),Wd.type=Ve,Wd.size=be,Wd.buffer=Ne,Wd.normalized=Vd,Wd.offset=Fe,Wd.stride=bf;Wd.divisor!==Jd&&(k.vertexAttribDivisorANGLE(Xe,Jd),Wd.divisor=Jd)}else if(Wd.buffer&&(ba.disableVertexAttribArray(Xe),Wd.buffer=null),Wd.x!==af||Wd.y!==Ze||Wd.z!==We||Wd.w!==Qe)ba.vertexAttrib4f(Xe,af,Ze,We,Qe),Wd.x=af,Wd.y=Ze,Wd.z=We,Wd.w=Qe;Ye=w.pixelRatio;h&&kf===Ye||(kf=Ye,ba.uniform1f(Ba.location,Ye));of=Q.call(this,w,c,h);gf=of[0];mf=of[1];h&&lf===gf&&nf===mf||(lf=gf,nf=mf,
ba.uniform2f(na.location,gf,mf));sf=c.scale;pf=sf[0];Cf=sf[1];h&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,ba.uniform2f(ya.location,pf,Cf));Re=c.scaleFract;Ge=Re[0];rf=Re[1];h&&qf===Ge&&Ef===rf||(qf=Ge,Ef=rf,ba.uniform2f(ha.location,Ge,rf));Hf=c.translate;Bf=Hf[0];Gf=Hf[1];h&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,ba.uniform2f(ja.location,Bf,Gf));yf=c.translateFract;wf=yf[0];Af=yf[1];h&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,ba.uniform2f(oa.location,wf,Af));Kf=c.opacity;h&&Lf===Kf||(Lf=Kf,ba.uniform1f(R.location,Kf));Mf=c.elements;
uf=null;(uf=(Rf=O(Mf))?Da.createStream(Mf):Da.getElements(Mf))&&ba.bindBuffer(34963,uf.buffer.buffer);If=c.offset;if(vf=c.count)0<Ya?uf?k.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),Ya):k.drawArraysInstancedANGLE(0,If,vf,Ya):0>Ya&&(uf?ba.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):ba.drawArrays(0,If,vf)),w.viewportWidth=rc,w.viewportHeight=Pb,Qb&&v.destroyStream(qb),sb&&v.destroyStream(Oa),Ra&&v.destroyStream(nb),Sb&&v.destroyStream(Dd),Bc&&v.destroyStream(cd),ye&&v.destroyStream(wd),
Fd&&v.destroyStream(je),Ud&&v.destroyStream(oe),fe&&v.destroyStream(Ne),Rf&&Da.destroyStream(uf)}P.unbind();da.dirty=!0;xa.setVAO(null);e&&(g.cpuTime+=performance.now()-d)},draw:function(a){var f,b,k,n,r,p,B,z,C,Fa,D,S,N,u,sa,H,G,T,Q,E,P,J,L,wa,U,aa,W,ia,X,V,ea,Y,M,Ea,la,Z,fb,ld,yb,ab,Nb,Ya,ob,Za,Cd,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Dd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,
ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed,ye,wd,jd,Je,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te;f=Ib.next;f!==Ib.cur&&(f?ba.bindFramebuffer(36160,f.framebuffer):ba.bindFramebuffer(36160,null),Ib.cur=f);if(da.dirty){var Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf;Ue=va.dither;Ue!==da.dither&&(Ue?ba.enable(3024):ba.disable(3024),da.dither=
Ue);Pe=ca[0];we=ca[1];if(Pe!==ta[0]||we!==ta[1])ba.blendEquationSeparate(Pe,we),ta[0]=Pe,ta[1]=we;He=va.depth_func;He!==da.depth_func&&(ba.depthFunc(He),da.depth_func=He);Ke=ma[0];Le=ma[1];if(Ke!==nc[0]||Le!==nc[1])ba.depthRange(Ke,Le),nc[0]=Ke,nc[1]=Le;Me=va.depth_mask;Me!==da.depth_mask&&(ba.depthMask(Me),da.depth_mask=Me);Ie=gb[0];Od=gb[1];Zd=gb[2];ce=gb[3];if(Ie!==fa[0]||Od!==fa[1]||Zd!==fa[2]||ce!==fa[3])ba.colorMask(Ie,Od,Zd,ce),fa[0]=Ie,fa[1]=Od,fa[2]=Zd,fa[3]=ce;fe=va.cull_enable;fe!==da.cull_enable&&
(fe?ba.enable(2884):ba.disable(2884),da.cull_enable=fe);Ne=va.cull_face;Ne!==da.cull_face&&(ba.cullFace(Ne),da.cull_face=Ne);Jd=va.frontFace;Jd!==da.frontFace&&(ba.frontFace(Jd),da.frontFace=Jd);Vd=va.lineWidth;Vd!==da.lineWidth&&(ba.lineWidth(Vd),da.lineWidth=Vd);Fe=va.polygonOffset_enable;Fe!==da.polygonOffset_enable&&(Fe?ba.enable(32823):ba.disable(32823),da.polygonOffset_enable=Fe);Oe=Ha[0];cf=Ha[1];if(Oe!==ac[0]||cf!==ac[1])ba.polygonOffset(Oe,cf),ac[0]=Oe,ac[1]=cf;bf=va.sample_alpha;bf!==da.sample_alpha&&
(bf?ba.enable(32926):ba.disable(32926),da.sample_alpha=bf);Ve=va.sample_enable;Ve!==da.sample_enable&&(Ve?ba.enable(32928):ba.disable(32928),da.sample_enable=Ve);Qe=Tb[0];af=Tb[1];if(Qe!==ff[0]||af!==ff[1])ba.sampleCoverage(Qe,af),ff[0]=Qe,ff[1]=af;Ze=va.stencil_mask;Ze!==da.stencil_mask&&(ba.stencilMask(Ze),da.stencil_mask=Ze);We=Xd[0];Xe=Xd[1];Wd=Xd[2];if(We!==Be[0]||Xe!==Be[1]||Wd!==Be[2])ba.stencilFunc(We,Xe,Wd),Be[0]=We,Be[1]=Xe,Be[2]=Wd;be=pe[0];Ye=pe[1];kf=pe[2];of=pe[3];if(be!==ie[0]||Ye!==
ie[1]||kf!==ie[2]||of!==ie[3])ba.stencilOpSeparate(be,Ye,kf,of),ie[0]=be,ie[1]=Ye,ie[2]=kf,ie[3]=of;gf=xe[0];lf=xe[1];mf=xe[2];nf=xe[3];if(gf!==Rd[0]||lf!==Rd[1]||mf!==Rd[2]||nf!==Rd[3])ba.stencilOpSeparate(gf,lf,mf,nf),Rd[0]=gf,Rd[1]=lf,Rd[2]=mf,Rd[3]=nf}b=a.viewport;k=b.x|0;n=b.y|0;r="width"in b?b.width|0:w.framebufferWidth-k;p="height"in b?b.height|0:w.framebufferHeight-n;B=w.viewportWidth;w.viewportWidth=r;z=w.viewportHeight;w.viewportHeight=p;ba.viewport(k,n,r,p);qd[0]=k;qd[1]=n;qd[2]=r;qd[3]=
p;ba.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ba.enable(3042);da.blend_enable=!0;ba.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;ba.disable(2929);da.depth_enable=!1;C=a.viewport;Fa=C.x|0;D=C.y|0;S="width"in C?C.width|0:w.framebufferWidth-Fa;N="height"in C?C.height|0:w.framebufferHeight-D;ba.scissor(Fa,D,S,N);qe[0]=Fa;qe[1]=D;qe[2]=S;qe[3]=N;ba.enable(3089);da.scissor_enable=!0;ba.disable(2960);da.stencil_enable=!1;if(u=da.profile)sa=performance.now(),g.count++;
ba.useProgram(t.program);H=lb.angle_instanced_arrays;xa.setVAO(null);G=x.call(this,w,a,0);T=!1;Q=null;E=0;P=!1;L=J=0;wa=1;U=0;aa=5126;V=X=ia=W=0;O(G)?(T=!0,Q=v.createStream(34962,G),aa=Q.dtype):(Q=v.getBuffer(G))?aa=Q.dtype:"constant"in G?(wa=2,"number"===typeof G.constant?(ia=G.constant,X=V=W=0):(ia=0<G.constant.length?G.constant[0]:0,X=1<G.constant.length?G.constant[1]:0,V=2<G.constant.length?G.constant[2]:0,W=3<G.constant.length?G.constant[3]:0)):(Q=O(G.buffer)?v.createStream(34962,G.buffer):v.getBuffer(G.buffer),
aa="type"in G?ge[G.type]:Q.dtype,P=!!G.normalized,L=G.size|0,J=G.offset|0,U=G.stride|0,E=G.divisor|0);ea=za.location;Y=Xa[ea];if(1===wa){Y.buffer||ba.enableVertexAttribArray(ea);M=L||1;if(Y.type!==aa||Y.size!==M||Y.buffer!==Q||Y.normalized!==P||Y.offset!==J||Y.stride!==U)ba.bindBuffer(34962,Q.buffer),ba.vertexAttribPointer(ea,M,aa,P,U,J),Y.type=aa,Y.size=M,Y.buffer=Q,Y.normalized=P,Y.offset=J,Y.stride=U;Y.divisor!==E&&(H.vertexAttribDivisorANGLE(ea,E),Y.divisor=E)}else if(Y.buffer&&(ba.disableVertexAttribArray(ea),
Y.buffer=null),Y.x!==ia||Y.y!==X||Y.z!==V||Y.w!==W)ba.vertexAttrib4f(ea,ia,X,V,W),Y.x=ia,Y.y=X,Y.z=V,Y.w=W;Ea=h.call(this,w,a,0);la=!1;Z=null;fb=0;ld=!1;ab=yb=0;Nb=1;Ya=0;ob=5126;Jb=Ob=Cd=Za=0;O(Ea)?(la=!0,Z=v.createStream(34962,Ea),ob=Z.dtype):(Z=v.getBuffer(Ea))?ob=Z.dtype:"constant"in Ea?(Nb=2,"number"===typeof Ea.constant?(Cd=Ea.constant,Ob=Jb=Za=0):(Cd=0<Ea.constant.length?Ea.constant[0]:0,Ob=1<Ea.constant.length?Ea.constant[1]:0,Jb=2<Ea.constant.length?Ea.constant[2]:0,Za=3<Ea.constant.length?
Ea.constant[3]:0)):(Z=O(Ea.buffer)?v.createStream(34962,Ea.buffer):v.getBuffer(Ea.buffer),ob="type"in Ea?ge[Ea.type]:Z.dtype,ld=!!Ea.normalized,ab=Ea.size|0,yb=Ea.offset|0,Ya=Ea.stride|0,fb=Ea.divisor|0);rc=Aa.location;Pb=Xa[rc];if(1===Nb){Pb.buffer||ba.enableVertexAttribArray(rc);jb=ab||1;if(Pb.type!==ob||Pb.size!==jb||Pb.buffer!==Z||Pb.normalized!==ld||Pb.offset!==yb||Pb.stride!==Ya)ba.bindBuffer(34962,Z.buffer),ba.vertexAttribPointer(rc,jb,ob,ld,Ya,yb),Pb.type=ob,Pb.size=jb,Pb.buffer=Z,Pb.normalized=
ld,Pb.offset=yb,Pb.stride=Ya;Pb.divisor!==fb&&(H.vertexAttribDivisorANGLE(rc,fb),Pb.divisor=fb)}else if(Pb.buffer&&(ba.disableVertexAttribArray(rc),Pb.buffer=null),Pb.x!==Cd||Pb.y!==Ob||Pb.z!==Jb||Pb.w!==Za)ba.vertexAttrib4f(rc,Cd,Ob,Jb,Za),Pb.x=Cd,Pb.y=Ob,Pb.z=Jb,Pb.w=Za;Hb=e.call(this,w,a,0);Eb=!1;wb=null;hb=0;Zb=!1;qb=Qb=0;Ua=1;Vb=0;zb=5126;Ia=pb=ib=hc=0;O(Hb)?(Eb=!0,wb=v.createStream(34962,Hb),zb=wb.dtype):(wb=v.getBuffer(Hb))?zb=wb.dtype:"constant"in Hb?(Ua=2,"number"===typeof Hb.constant?(ib=
Hb.constant,pb=Ia=hc=0):(ib=0<Hb.constant.length?Hb.constant[0]:0,pb=1<Hb.constant.length?Hb.constant[1]:0,Ia=2<Hb.constant.length?Hb.constant[2]:0,hc=3<Hb.constant.length?Hb.constant[3]:0)):(wb=O(Hb.buffer)?v.createStream(34962,Hb.buffer):v.getBuffer(Hb.buffer),zb="type"in Hb?ge[Hb.type]:wb.dtype,Zb=!!Hb.normalized,qb=Hb.size|0,Qb=Hb.offset|0,Vb=Hb.stride|0,hb=Hb.divisor|0);rb=Ma.location;Ja=Xa[rb];if(1===Ua){Ja.buffer||ba.enableVertexAttribArray(rb);cb=qb||1;if(Ja.type!==zb||Ja.size!==cb||Ja.buffer!==
wb||Ja.normalized!==Zb||Ja.offset!==Qb||Ja.stride!==Vb)ba.bindBuffer(34962,wb.buffer),ba.vertexAttribPointer(rb,cb,zb,Zb,Vb,Qb),Ja.type=zb,Ja.size=cb,Ja.buffer=wb,Ja.normalized=Zb,Ja.offset=Qb,Ja.stride=Vb;Ja.divisor!==hb&&(H.vertexAttribDivisorANGLE(rb,hb),Ja.divisor=hb)}else if(Ja.buffer&&(ba.disableVertexAttribArray(rb),Ja.buffer=null),Ja.x!==ib||Ja.y!==pb||Ja.z!==Ia||Ja.w!==hc)ba.vertexAttrib4f(rb,ib,pb,Ia,hc),Ja.x=ib,Ja.y=pb,Ja.z=Ia,Ja.w=hc;eb=c.call(this,w,a,0);Ka=!1;kb=null;Sa=0;tb=!1;Oa=sb=
0;Cc=1;Qa=0;Kb=5126;Va=Dd=La=Fb=0;O(eb)?(Ka=!0,kb=v.createStream(34962,eb),Kb=kb.dtype):(kb=v.getBuffer(eb))?Kb=kb.dtype:"constant"in eb?(Cc=2,"number"===typeof eb.constant?(La=eb.constant,Dd=Va=Fb=0):(La=0<eb.constant.length?eb.constant[0]:0,Dd=1<eb.constant.length?eb.constant[1]:0,Va=2<eb.constant.length?eb.constant[2]:0,Fb=3<eb.constant.length?eb.constant[3]:0)):(kb=O(eb.buffer)?v.createStream(34962,eb.buffer):v.getBuffer(eb.buffer),Kb="type"in eb?ge[eb.type]:kb.dtype,tb=!!eb.normalized,Oa=eb.size|
0,sb=eb.offset|0,Qa=eb.stride|0,Sa=eb.divisor|0);Lb=Bb.location;Mb=Xa[Lb];if(1===Cc){Mb.buffer||ba.enableVertexAttribArray(Lb);mb=Oa||1;if(Mb.type!==Kb||Mb.size!==mb||Mb.buffer!==kb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Qa)ba.bindBuffer(34962,kb.buffer),ba.vertexAttribPointer(Lb,mb,Kb,tb,Qa,sb),Mb.type=Kb,Mb.size=mb,Mb.buffer=kb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Qa;Mb.divisor!==Sa&&(H.vertexAttribDivisorANGLE(Lb,Sa),Mb.divisor=Sa)}else if(Mb.buffer&&(ba.disableVertexAttribArray(Lb),
Mb.buffer=null),Mb.x!==La||Mb.y!==Dd||Mb.z!==Va||Mb.w!==Fb)ba.vertexAttrib4f(Lb,La,Dd,Va,Fb),Mb.x=La,Mb.y=Dd,Mb.z=Va,Mb.w=Fb;Na=d.call(this,w,a,0);$b=!1;Pa=null;ub=0;vb=!1;nb=Ra=0;ec=1;Ac=0;uc=5126;Ta=sd=ic=$a=0;O(Na)?($b=!0,Pa=v.createStream(34962,Na),uc=Pa.dtype):(Pa=v.getBuffer(Na))?uc=Pa.dtype:"constant"in Na?(ec=2,"number"===typeof Na.constant?(ic=Na.constant,sd=Ta=$a=0):(ic=0<Na.constant.length?Na.constant[0]:0,sd=1<Na.constant.length?Na.constant[1]:0,Ta=2<Na.constant.length?Na.constant[2]:
0,$a=3<Na.constant.length?Na.constant[3]:0)):(Pa=O(Na.buffer)?v.createStream(34962,Na.buffer):v.getBuffer(Na.buffer),uc="type"in Na?ge[Na.type]:Pa.dtype,vb=!!Na.normalized,nb=Na.size|0,Ra=Na.offset|0,Ac=Na.stride|0,ub=Na.divisor|0);Oc=Ca.location;Ab=Xa[Oc];if(1===ec){Ab.buffer||ba.enableVertexAttribArray(Oc);Wa=nb||1;if(Ab.type!==uc||Ab.size!==Wa||Ab.buffer!==Pa||Ab.normalized!==vb||Ab.offset!==Ra||Ab.stride!==Ac)ba.bindBuffer(34962,Pa.buffer),ba.vertexAttribPointer(Oc,Wa,uc,vb,Ac,Ra),Ab.type=uc,
Ab.size=Wa,Ab.buffer=Pa,Ab.normalized=vb,Ab.offset=Ra,Ab.stride=Ac;Ab.divisor!==ub&&(H.vertexAttribDivisorANGLE(Oc,ub),Ab.divisor=ub)}else if(Ab.buffer&&(ba.disableVertexAttribArray(Oc),Ab.buffer=null),Ab.x!==ic||Ab.y!==sd||Ab.z!==Ta||Ab.w!==$a)ba.vertexAttrib4f(Oc,ic,sd,Ta,$a),Ab.x=ic,Ab.y=sd,Ab.z=Ta,Ab.w=$a;Wb=y.call(this,w,a,0);tc=!1;Xb=null;Rb=0;Lc=!1;Sd=Sb=0;Ec=1;yd=0;Pc=5126;vc=mc=ud=Yc=0;O(Wb)?(tc=!0,Xb=v.createStream(34962,Wb),Pc=Xb.dtype):(Xb=v.getBuffer(Wb))?Pc=Xb.dtype:"constant"in Wb?
(Ec=2,"number"===typeof Wb.constant?(ud=Wb.constant,mc=vc=Yc=0):(ud=0<Wb.constant.length?Wb.constant[0]:0,mc=1<Wb.constant.length?Wb.constant[1]:0,vc=2<Wb.constant.length?Wb.constant[2]:0,Yc=3<Wb.constant.length?Wb.constant[3]:0)):(Xb=O(Wb.buffer)?v.createStream(34962,Wb.buffer):v.getBuffer(Wb.buffer),Pc="type"in Wb?ge[Wb.type]:Xb.dtype,Lc=!!Wb.normalized,Sd=Wb.size|0,Sb=Wb.offset|0,yd=Wb.stride|0,Rb=Wb.divisor|0);fc=pa.location;bb=Xa[fc];if(1===Ec){bb.buffer||ba.enableVertexAttribArray(fc);sc=Sd||
1;if(bb.type!==Pc||bb.size!==sc||bb.buffer!==Xb||bb.normalized!==Lc||bb.offset!==Sb||bb.stride!==yd)ba.bindBuffer(34962,Xb.buffer),ba.vertexAttribPointer(fc,sc,Pc,Lc,yd,Sb),bb.type=Pc,bb.size=sc,bb.buffer=Xb,bb.normalized=Lc,bb.offset=Sb,bb.stride=yd;bb.divisor!==Rb&&(H.vertexAttribDivisorANGLE(fc,Rb),bb.divisor=Rb)}else if(bb.buffer&&(ba.disableVertexAttribArray(fc),bb.buffer=null),bb.x!==ud||bb.y!==mc||bb.z!==vc||bb.w!==Yc)ba.vertexAttrib4f(fc,ud,mc,vc,Yc),bb.x=ud,bb.y=mc,bb.z=vc,bb.w=Yc;Ub=l.call(this,
w,a,0);Yb=!1;cc=null;gc=0;xc=!1;cd=Bc=0;Sc=1;Tc=0;Uc=5126;$c=dd=md=Zc=0;O(Ub)?(Yb=!0,cc=v.createStream(34962,Ub),Uc=cc.dtype):(cc=v.getBuffer(Ub))?Uc=cc.dtype:"constant"in Ub?(Sc=2,"number"===typeof Ub.constant?(md=Ub.constant,dd=$c=Zc=0):(md=0<Ub.constant.length?Ub.constant[0]:0,dd=1<Ub.constant.length?Ub.constant[1]:0,$c=2<Ub.constant.length?Ub.constant[2]:0,Zc=3<Ub.constant.length?Ub.constant[3]:0)):(cc=O(Ub.buffer)?v.createStream(34962,Ub.buffer):v.getBuffer(Ub.buffer),Uc="type"in Ub?ge[Ub.type]:
cc.dtype,xc=!!Ub.normalized,cd=Ub.size|0,Bc=Ub.offset|0,Tc=Ub.stride|0,gc=Ub.divisor|0);jc=A.location;bc=Xa[jc];if(1===Sc){bc.buffer||ba.enableVertexAttribArray(jc);ad=cd||4;if(bc.type!==Uc||bc.size!==ad||bc.buffer!==cc||bc.normalized!==xc||bc.offset!==Bc||bc.stride!==Tc)ba.bindBuffer(34962,cc.buffer),ba.vertexAttribPointer(jc,ad,Uc,xc,Tc,Bc),bc.type=Uc,bc.size=ad,bc.buffer=cc,bc.normalized=xc,bc.offset=Bc,bc.stride=Tc;bc.divisor!==gc&&(H.vertexAttribDivisorANGLE(jc,gc),bc.divisor=gc)}else if(bc.buffer&&
(ba.disableVertexAttribArray(jc),bc.buffer=null),bc.x!==md||bc.y!==dd||bc.z!==$c||bc.w!==Zc)ba.vertexAttrib4f(jc,md,dd,$c,Zc),bc.x=md,bc.y=dd,bc.z=$c,bc.w=Zc;Wc=F.call(this,w,a,0);ed=!1;yc=null;id=0;Ed=!1;wd=ye=0;jd=1;Je=0;Pd=5126;Ld=ae=de=Yd=0;O(Wc)?(ed=!0,yc=v.createStream(34962,Wc),Pd=yc.dtype):(yc=v.getBuffer(Wc))?Pd=yc.dtype:"constant"in Wc?(jd=2,"number"===typeof Wc.constant?(de=Wc.constant,ae=Ld=Yd=0):(de=0<Wc.constant.length?Wc.constant[0]:0,ae=1<Wc.constant.length?Wc.constant[1]:0,Ld=2<Wc.constant.length?
Wc.constant[2]:0,Yd=3<Wc.constant.length?Wc.constant[3]:0)):(yc=O(Wc.buffer)?v.createStream(34962,Wc.buffer):v.getBuffer(Wc.buffer),Pd="type"in Wc?ge[Wc.type]:yc.dtype,Ed=!!Wc.normalized,wd=Wc.size|0,ye=Wc.offset|0,Je=Wc.stride|0,id=Wc.divisor|0);Id=qa.location;od=Xa[Id];if(1===jd){od.buffer||ba.enableVertexAttribArray(Id);Vc=wd||4;if(od.type!==Pd||od.size!==Vc||od.buffer!==yc||od.normalized!==Ed||od.offset!==ye||od.stride!==Je)ba.bindBuffer(34962,yc.buffer),ba.vertexAttribPointer(Id,Vc,Pd,Ed,Je,
ye),od.type=Pd,od.size=Vc,od.buffer=yc,od.normalized=Ed,od.offset=ye,od.stride=Je;od.divisor!==id&&(H.vertexAttribDivisorANGLE(Id,id),od.divisor=id)}else if(od.buffer&&(ba.disableVertexAttribArray(Id),od.buffer=null),od.x!==de||od.y!==ae||od.z!==Ld||od.w!==Yd)ba.vertexAttrib4f(Id,de,ae,Ld,Yd),od.x=de,od.y=ae,od.z=Ld,od.w=Yd;vd=K.call(this,w,a,0);td=!1;kd=null;xd=0;Bd=!1;je=Fd=0;le=1;ze=0;me=5126;ee=ue=he=ke=0;O(vd)?(td=!0,kd=v.createStream(34962,vd),me=kd.dtype):(kd=v.getBuffer(vd))?me=kd.dtype:"constant"in
vd?(le=2,"number"===typeof vd.constant?(he=vd.constant,ue=ee=ke=0):(he=0<vd.constant.length?vd.constant[0]:0,ue=1<vd.constant.length?vd.constant[1]:0,ee=2<vd.constant.length?vd.constant[2]:0,ke=3<vd.constant.length?vd.constant[3]:0)):(kd=O(vd.buffer)?v.createStream(34962,vd.buffer):v.getBuffer(vd.buffer),me="type"in vd?ge[vd.type]:kd.dtype,Bd=!!vd.normalized,je=vd.size|0,Fd=vd.offset|0,ze=vd.stride|0,xd=vd.divisor|0);ne=ga.location;Qc=Xa[ne];if(1===le){Qc.buffer||ba.enableVertexAttribArray(ne);hd=
je||1;if(Qc.type!==me||Qc.size!==hd||Qc.buffer!==kd||Qc.normalized!==Bd||Qc.offset!==Fd||Qc.stride!==ze)ba.bindBuffer(34962,kd.buffer),ba.vertexAttribPointer(ne,hd,me,Bd,ze,Fd),Qc.type=me,Qc.size=hd,Qc.buffer=kd,Qc.normalized=Bd,Qc.offset=Fd,Qc.stride=ze;Qc.divisor!==xd&&(H.vertexAttribDivisorANGLE(ne,xd),Qc.divisor=xd)}else if(Qc.buffer&&(ba.disableVertexAttribArray(ne),Qc.buffer=null),Qc.x!==he||Qc.y!==ue||Qc.z!==ee||Qc.w!==ke)ba.vertexAttrib4f(ne,he,ue,ee,ke),Qc.x=he,Qc.y=ue,Qc.z=ee,Qc.w=ke;ba.uniform1i(I.location,
!1);ba.uniform1f(Ba.location,w.pixelRatio);ve=q.call(this,w,a,0);ba.uniform2f(na.location,ve[0],ve[1]);re=a.scale;ba.uniform2f(ya.location,re[0],re[1]);Md=a.scaleFract;ba.uniform2f(ha.location,Md[0],Md[1]);Qd=a.translate;ba.uniform2f(ja.location,Qd[0],Qd[1]);Td=a.translateFract;ba.uniform2f(oa.location,Td[0],Td[1]);ba.uniform1f(R.location,a.opacity);ba.uniform1i(ra.location,m.bind());Ud=a.elements;oe=null;(oe=(Ae=O(Ud))?Da.createStream(Ud):Da.getElements(Ud))&&ba.bindBuffer(34963,oe.buffer.buffer);
De=a.offset;if(se=a.count)Te=ua.instances,0<Te?oe?H.drawElementsInstancedANGLE(0,se,oe.type,De<<(oe.type-5121>>1),Te):H.drawArraysInstancedANGLE(0,De,se,Te):0>Te&&(oe?ba.drawElements(0,se,oe.type,De<<(oe.type-5121>>1)):ba.drawArrays(0,De,se)),da.dirty=!0,xa.setVAO(null),w.viewportWidth=B,w.viewportHeight=z,u&&(g.cpuTime+=performance.now()-sa),T&&v.destroyStream(Q),la&&v.destroyStream(Z),Eb&&v.destroyStream(wb),Ka&&v.destroyStream(kb),$b&&v.destroyStream(Pa),tc&&v.destroyStream(Xb),Yb&&v.destroyStream(cc),
ed&&v.destroyStream(yc),td&&v.destroyStream(kd),m.unbind(),Ae&&Da.destroyStream(oe)},scope:function(a,e,d){var h,c,r,A,x,t,Aa,I,S,y,l,N,R,H,T,q,ha,m,ba,Bb,Q,ka,Ma,F,P,K,ca,ga,xa,ya,ra,qa,fa,ja,X,ea,Xa,oa,M,Ea,Ca,na,za,pa,la,ta,Ba,Ib,Z,Ha,Ga,lb,gb,ld,Tb,ma,nc,ac,Xd,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,qd,Qa,Kb,Fb,La,zd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,Rd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,qe,Ec,Be,Pc,Yc,ie,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,pe,
xe,wd,jd,ff,Pd,Yd,de,ae,Ld,Id,od,Vc,vd,td,kd,xd,Bd,Fd,je,le,ze,me,ke,he,ue,ee,ne,Qc,hd,ve,re,Md,Qd,Td,Ud,oe,Ae,De,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Od,Zd,ce,fe,Ne,Jd,Vd,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Wd,be,Ye,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;h=a.viewport;c=h.x|0;r=h.y|
0;A="width"in h?h.width|0:w.framebufferWidth-c;x="height"in h?h.height|0:w.framebufferHeight-r;t=w.viewportWidth;w.viewportWidth=A;Aa=w.viewportHeight;w.viewportHeight=x;I=Dd[0];Dd[0]=c;S=Dd[1];Dd[1]=r;y=Dd[2];Dd[2]=A;l=Dd[3];Dd[3]=x;N=wa[0];wa[0]=0;R=wa[1];wa[1]=0;H=wa[2];wa[2]=0;T=wa[3];wa[3]=1;q=va.blend_enable;va.blend_enable=!0;ha=fb[0];fb[0]=770;m=fb[1];fb[1]=771;ba=fb[2];fb[2]=773;Bb=fb[3];fb[3]=1;Q=va.depth_enable;va.depth_enable=!1;ka=a.viewport;Ma=ka.x|0;F=ka.y|0;P="width"in ka?ka.width|
0:w.framebufferWidth-Ma;K="height"in ka?ka.height|0:w.framebufferHeight-F;ca=Cd[0];Cd[0]=Ma;ga=Cd[1];Cd[1]=F;xa=Cd[2];Cd[2]=P;ya=Cd[3];Cd[3]=K;ra=va.scissor_enable;va.scissor_enable=!0;qa=va.stencil_enable;va.stencil_enable=!1;if(fa=da.profile)ja=performance.now(),g.count++;X=a.elements;ea=null;ea=(Xa=O(X))?Da.createStream(X):Da.getElements(X);oa=ua.elements;ua.elements=ea;M=a.offset;Ea=ua.offset;ua.offset=M;Ca=a.count;na=ua.count;ua.count=Ca;za=ua.primitive;ua.primitive=0;pa=sa[45];sa[45]=!1;la=
a.markerTexture;ta=sa[48];sa[48]=la;Ba=a.opacity;Ib=sa[10];sa[10]=Ba;Z=E.call(this,w,a,d);Ha=sa[46];sa[46]=Z;Ga=sa[47];sa[47]=ia;lb=w.pixelRatio;gb=sa[34];sa[34]=lb;ld=a.scale;Tb=sa[6];sa[6]=ld;ma=a.scaleFract;nc=sa[7];sa[7]=ma;ac=a.translate;Xd=sa[8];sa[8]=ac;ib=a.translateFract;pb=sa[9];sa[9]=ib;Ia=C.call(this,w,a,d);rb=!1;Ja=null;cb=0;eb=!1;kb=Ka=0;Sa=1;tb=0;sb=5126;Kb=Qa=qd=Oa=0;O(Ia)?(rb=!0,Ja=v.createStream(34962,Ia),sb=Ja.dtype):(Ja=v.getBuffer(Ia))?sb=Ja.dtype:"constant"in Ia?(Sa=2,"number"===
typeof Ia.constant?(qd=Ia.constant,Qa=Kb=Oa=0):(qd=0<Ia.constant.length?Ia.constant[0]:0,Qa=1<Ia.constant.length?Ia.constant[1]:0,Kb=2<Ia.constant.length?Ia.constant[2]:0,Oa=3<Ia.constant.length?Ia.constant[3]:0)):(Ja=O(Ia.buffer)?v.createStream(34962,Ia.buffer):v.getBuffer(Ia.buffer),sb="type"in Ia?ge[Ia.type]:Ja.dtype,eb=!!Ia.normalized,kb=Ia.size|0,Ka=Ia.offset|0,tb=Ia.stride|0,cb=Ia.divisor|0);Fb=L.buffer;L.buffer=Ja;La=L.divisor;L.divisor=cb;zd=L.normalized;L.normalized=eb;Va=L.offset;L.offset=
Ka;Lb=L.size;L.size=kb;Mb=L.state;L.state=Sa;mb=L.stride;L.stride=tb;Na=L.type;L.type=sb;$b=L.w;L.w=Oa;Pa=L.x;L.x=qd;ub=L.y;L.y=Qa;vb=L.z;L.z=Kb;Ra=u.call(this,w,a,d);nb=!1;ec=null;Ac=0;uc=!1;ic=$a=0;Rd=1;Ta=0;Oc=5126;tc=Wb=Wa=Ab=0;O(Ra)?(nb=!0,ec=v.createStream(34962,Ra),Oc=ec.dtype):(ec=v.getBuffer(Ra))?Oc=ec.dtype:"constant"in Ra?(Rd=2,"number"===typeof Ra.constant?(Wa=Ra.constant,Wb=tc=Ab=0):(Wa=0<Ra.constant.length?Ra.constant[0]:0,Wb=1<Ra.constant.length?Ra.constant[1]:0,tc=2<Ra.constant.length?
Ra.constant[2]:0,Ab=3<Ra.constant.length?Ra.constant[3]:0)):(ec=O(Ra.buffer)?v.createStream(34962,Ra.buffer):v.getBuffer(Ra.buffer),Oc="type"in Ra?ge[Ra.type]:ec.dtype,uc=!!Ra.normalized,ic=Ra.size|0,$a=Ra.offset|0,Ta=Ra.stride|0,Ac=Ra.divisor|0);Xb=J.buffer;J.buffer=ec;Rb=J.divisor;J.divisor=Ac;Lc=J.normalized;J.normalized=uc;Sb=J.offset;J.offset=$a;qe=J.size;J.size=ic;Ec=J.state;J.state=Rd;Be=J.stride;J.stride=Ta;Pc=J.type;J.type=Oc;Yc=J.w;J.w=Ab;ie=J.x;J.x=Wa;mc=J.y;J.y=Wb;vc=J.z;J.z=tc;fc=aa.call(this,
w,a,d);bb=!1;sc=null;Ub=0;Yb=!1;gc=cc=0;xc=1;Bc=0;cd=5126;Zc=Uc=Tc=Sc=0;O(fc)?(bb=!0,sc=v.createStream(34962,fc),cd=sc.dtype):(sc=v.getBuffer(fc))?cd=sc.dtype:"constant"in fc?(xc=2,"number"===typeof fc.constant?(Tc=fc.constant,Uc=Zc=Sc=0):(Tc=0<fc.constant.length?fc.constant[0]:0,Uc=1<fc.constant.length?fc.constant[1]:0,Zc=2<fc.constant.length?fc.constant[2]:0,Sc=3<fc.constant.length?fc.constant[3]:0)):(sc=O(fc.buffer)?v.createStream(34962,fc.buffer):v.getBuffer(fc.buffer),cd="type"in fc?ge[fc.type]:
sc.dtype,Yb=!!fc.normalized,gc=fc.size|0,cc=fc.offset|0,Bc=fc.stride|0,Ub=fc.divisor|0);md=b.buffer;b.buffer=sc;dd=b.divisor;b.divisor=Ub;$c=b.normalized;b.normalized=Yb;jc=b.offset;b.offset=cc;bc=b.size;b.size=gc;ad=b.state;b.state=xc;Wc=b.stride;b.stride=Bc;ed=b.type;b.type=cd;yc=b.w;b.w=Sc;id=b.x;b.x=Tc;pe=b.y;b.y=Uc;xe=b.z;b.z=Zc;wd=n.call(this,w,a,d);jd=!1;ff=null;Pd=0;Yd=!1;ae=de=0;Ld=1;Id=0;od=5126;kd=td=vd=Vc=0;O(wd)?(jd=!0,ff=v.createStream(34962,wd),od=ff.dtype):(ff=v.getBuffer(wd))?od=
ff.dtype:"constant"in wd?(Ld=2,"number"===typeof wd.constant?(vd=wd.constant,td=kd=Vc=0):(vd=0<wd.constant.length?wd.constant[0]:0,td=1<wd.constant.length?wd.constant[1]:0,kd=2<wd.constant.length?wd.constant[2]:0,Vc=3<wd.constant.length?wd.constant[3]:0)):(ff=O(wd.buffer)?v.createStream(34962,wd.buffer):v.getBuffer(wd.buffer),od="type"in wd?ge[wd.type]:ff.dtype,Yd=!!wd.normalized,ae=wd.size|0,de=wd.offset|0,Id=wd.stride|0,Pd=wd.divisor|0);xd=U.buffer;U.buffer=ff;Bd=U.divisor;U.divisor=Pd;Fd=U.normalized;
U.normalized=Yd;je=U.offset;U.offset=de;le=U.size;U.size=ae;ze=U.state;U.state=Ld;me=U.stride;U.stride=Id;ke=U.type;U.type=od;he=U.w;U.w=Vc;ue=U.x;U.x=vd;ee=U.y;U.y=td;ne=U.z;U.z=kd;Qc=p.call(this,w,a,d);hd=!1;ve=null;re=0;Md=!1;Td=Qd=0;Ud=1;oe=0;Ae=5126;Ue=Te=se=De=0;O(Qc)?(hd=!0,ve=v.createStream(34962,Qc),Ae=ve.dtype):(ve=v.getBuffer(Qc))?Ae=ve.dtype:"constant"in Qc?(Ud=2,"number"===typeof Qc.constant?(se=Qc.constant,Te=Ue=De=0):(se=0<Qc.constant.length?Qc.constant[0]:0,Te=1<Qc.constant.length?
Qc.constant[1]:0,Ue=2<Qc.constant.length?Qc.constant[2]:0,De=3<Qc.constant.length?Qc.constant[3]:0)):(ve=O(Qc.buffer)?v.createStream(34962,Qc.buffer):v.getBuffer(Qc.buffer),Ae="type"in Qc?ge[Qc.type]:ve.dtype,Md=!!Qc.normalized,Td=Qc.size|0,Qd=Qc.offset|0,oe=Qc.stride|0,re=Qc.divisor|0);Pe=W.buffer;W.buffer=ve;we=W.divisor;W.divisor=re;He=W.normalized;W.normalized=Md;Ke=W.offset;W.offset=Qd;Le=W.size;W.size=Td;Me=W.state;W.state=Ud;Ie=W.stride;W.stride=oe;Od=W.type;W.type=Ae;Zd=W.w;W.w=De;ce=W.x;
W.x=se;fe=W.y;W.y=Te;Ne=W.z;W.z=Ue;Jd=B.call(this,w,a,d);Vd=!1;Fe=null;Oe=0;cf=!1;Ve=bf=0;Qe=1;af=0;Ze=5126;be=Wd=Xe=We=0;O(Jd)?(Vd=!0,Fe=v.createStream(34962,Jd),Ze=Fe.dtype):(Fe=v.getBuffer(Jd))?Ze=Fe.dtype:"constant"in Jd?(Qe=2,"number"===typeof Jd.constant?(Xe=Jd.constant,Wd=be=We=0):(Xe=0<Jd.constant.length?Jd.constant[0]:0,Wd=1<Jd.constant.length?Jd.constant[1]:0,be=2<Jd.constant.length?Jd.constant[2]:0,We=3<Jd.constant.length?Jd.constant[3]:0)):(Fe=O(Jd.buffer)?v.createStream(34962,Jd.buffer):
v.getBuffer(Jd.buffer),Ze="type"in Jd?ge[Jd.type]:Fe.dtype,cf=!!Jd.normalized,Ve=Jd.size|0,bf=Jd.offset|0,af=Jd.stride|0,Oe=Jd.divisor|0);Ye=z.buffer;z.buffer=Fe;kf=z.divisor;z.divisor=Oe;of=z.normalized;z.normalized=cf;gf=z.offset;z.offset=bf;lf=z.size;z.size=Ve;mf=z.state;z.state=Qe;nf=z.stride;z.stride=af;sf=z.type;z.type=Ze;pf=z.w;z.w=We;tf=z.x;z.x=Xe;Cf=z.y;z.y=Wd;Df=z.z;z.z=be;Re=Y.call(this,w,a,d);Ge=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;O(Re)?(Ge=!0,qf=v.createStream(34962,
Re),xf=qf.dtype):(qf=v.getBuffer(Re))?xf=qf.dtype:"constant"in Re?(Ff=2,"number"===typeof Re.constant?(wf=Re.constant,zf=Af=yf=0):(wf=0<Re.constant.length?Re.constant[0]:0,zf=1<Re.constant.length?Re.constant[1]:0,Af=2<Re.constant.length?Re.constant[2]:0,yf=3<Re.constant.length?Re.constant[3]:0)):(qf=O(Re.buffer)?v.createStream(34962,Re.buffer):v.getBuffer(Re.buffer),xf="type"in Re?ge[Re.type]:qf.dtype,Ef=!!Re.normalized,Bf=Re.size|0,Hf=Re.offset|0,Gf=Re.stride|0,rf=Re.divisor|0);Jf=G.buffer;G.buffer=
qf;Kf=G.divisor;G.divisor=rf;Lf=G.normalized;G.normalized=Ef;Mf=G.offset;G.offset=Hf;uf=G.size;G.size=Bf;Rf=G.state;G.state=Ff;If=G.stride;G.stride=Gf;vf=G.type;G.type=xf;dg=G.w;G.w=yf;Sf=G.x;G.x=wf;Tf=G.y;G.y=zf;qg=G.z;G.z=Af;hf=D.call(this,w,a,d);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;O(hf)?(df=!0,Nf=v.createStream(34962,hf),Wf=Nf.dtype):(Nf=v.getBuffer(hf))?Wf=Nf.dtype:"constant"in hf?(hg=2,"number"===typeof hf.constant?(Xf=hf.constant,Yf=Zf=Uf=0):(Xf=0<hf.constant.length?
hf.constant[0]:0,Yf=1<hf.constant.length?hf.constant[1]:0,Zf=2<hf.constant.length?hf.constant[2]:0,Uf=3<hf.constant.length?hf.constant[3]:0)):(Nf=O(hf.buffer)?v.createStream(34962,hf.buffer):v.getBuffer(hf.buffer),Wf="type"in hf?ge[hf.type]:Nf.dtype,eg=!!hf.normalized,gg=hf.size|0,fg=hf.offset|0,ig=hf.stride|0,Of=hf.divisor|0);jg=k.buffer;k.buffer=Nf;rg=k.divisor;k.divisor=Of;sg=k.normalized;k.normalized=eg;tg=k.offset;k.offset=fg;ug=k.size;k.size=gg;vg=k.state;k.state=hg;wg=k.stride;k.stride=ig;
xg=k.type;k.type=Wf;yg=k.w;k.w=Uf;zg=k.x;k.x=Xf;Ag=k.y;k.y=Yf;Bg=k.z;k.z=Zf;jf=V.call(this,w,a,d);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;O(jf)?(ef=!0,Pf=v.createStream(34962,jf),$f=Pf.dtype):(Pf=v.getBuffer(jf))?$f=Pf.dtype:"constant"in jf?(ng=2,"number"===typeof jf.constant?(ag=jf.constant,bg=cg=Vf=0):(ag=0<jf.constant.length?jf.constant[0]:0,bg=1<jf.constant.length?jf.constant[1]:0,cg=2<jf.constant.length?jf.constant[2]:0,Vf=3<jf.constant.length?jf.constant[3]:0)):(Pf=
O(jf.buffer)?v.createStream(34962,jf.buffer):v.getBuffer(jf.buffer),$f="type"in jf?ge[jf.type]:Pf.dtype,kg=!!jf.normalized,mg=jf.size|0,lg=jf.offset|0,og=jf.stride|0,Qf=jf.divisor|0);pg=f.buffer;f.buffer=Pf;Cg=f.divisor;f.divisor=Qf;Dg=f.normalized;f.normalized=kg;Eg=f.offset;f.offset=lg;Fg=f.size;f.size=mg;Gg=f.state;f.state=ng;Hg=f.stride;f.stride=og;Ig=f.type;f.type=$f;Jg=f.w;f.w=Vf;Kg=f.x;f.x=ag;Lg=f.y;f.y=bg;Mg=f.z;f.z=cg;Ng=Fa.vert;Fa.vert=59;Og=Fa.frag;Fa.frag=58;da.dirty=!0;e(w,a,d);w.viewportWidth=
t;w.viewportHeight=Aa;Dd[0]=I;Dd[1]=S;Dd[2]=y;Dd[3]=l;wa[0]=N;wa[1]=R;wa[2]=H;wa[3]=T;va.blend_enable=q;fb[0]=ha;fb[1]=m;fb[2]=ba;fb[3]=Bb;va.depth_enable=Q;Cd[0]=ca;Cd[1]=ga;Cd[2]=xa;Cd[3]=ya;va.scissor_enable=ra;va.stencil_enable=qa;fa&&(g.cpuTime+=performance.now()-ja);Xa&&Da.destroyStream(ea);ua.elements=oa;ua.offset=Ea;ua.count=na;ua.primitive=za;sa[45]=pa;sa[48]=ta;sa[10]=Ib;sa[46]=Ha;sa[47]=Ga;sa[34]=gb;sa[6]=Tb;sa[7]=nc;sa[8]=Xd;sa[9]=pb;rb&&v.destroyStream(Ja);L.buffer=Fb;L.divisor=La;L.normalized=
zd;L.offset=Va;L.size=Lb;L.state=Mb;L.stride=mb;L.type=Na;L.w=$b;L.x=Pa;L.y=ub;L.z=vb;nb&&v.destroyStream(ec);J.buffer=Xb;J.divisor=Rb;J.normalized=Lc;J.offset=Sb;J.size=qe;J.state=Ec;J.stride=Be;J.type=Pc;J.w=Yc;J.x=ie;J.y=mc;J.z=vc;bb&&v.destroyStream(sc);b.buffer=md;b.divisor=dd;b.normalized=$c;b.offset=jc;b.size=bc;b.state=ad;b.stride=Wc;b.type=ed;b.w=yc;b.x=id;b.y=pe;b.z=xe;jd&&v.destroyStream(ff);U.buffer=xd;U.divisor=Bd;U.normalized=Fd;U.offset=je;U.size=le;U.state=ze;U.stride=me;U.type=ke;
U.w=he;U.x=ue;U.y=ee;U.z=ne;hd&&v.destroyStream(ve);W.buffer=Pe;W.divisor=we;W.normalized=He;W.offset=Ke;W.size=Le;W.state=Me;W.stride=Ie;W.type=Od;W.w=Zd;W.x=ce;W.y=fe;W.z=Ne;Vd&&v.destroyStream(Fe);z.buffer=Ye;z.divisor=kf;z.normalized=of;z.offset=gf;z.size=lf;z.state=mf;z.stride=nf;z.type=sf;z.w=pf;z.x=tf;z.y=Cf;z.z=Df;Ge&&v.destroyStream(qf);G.buffer=Jf;G.divisor=Kf;G.normalized=Lf;G.offset=Mf;G.size=uf;G.state=Rf;G.stride=If;G.type=vf;G.w=dg;G.x=Sf;G.y=Tf;G.z=qg;df&&v.destroyStream(Nf);k.buffer=
jg;k.divisor=rg;k.normalized=sg;k.offset=tg;k.size=ug;k.state=vg;k.stride=wg;k.type=xg;k.w=yg;k.x=zg;k.y=Ag;k.z=Bg;ef&&v.destroyStream(Pf);f.buffer=pg;f.divisor=Cg;f.normalized=Dg;f.offset=Eg;f.size=Fg;f.state=Gg;f.stride=Hg;f.type=Ig;f.w=Jg;f.x=Kg;f.y=Lg;f.z=Mg;Fa.vert=Ng;Fa.frag=Og;da.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,
p,W,B,z,Y,G,D,k,V,f,M,H,la,Z,X,ea){var T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa,ka,ca;T=a.attributes;S=a.buffer;N=a.context;r=a.current;P=a.draw;Q=a.elements;qa=a.extensions;pa=a.framebuffer;A=a.gl;I=a.isBufferArgs;ga=a.next;R=a.shader;na=a.uniforms;ra=a.vao;Ba=ga.blend_color;ya=r.blend_color;ha=ga.blend_equation;Ca=r.blend_equation;ja=ga.blend_func;oa=r.blend_func;za=ga.colorMask;Ma=r.colorMask;Aa=ga.depth_range;Bb=r.depth_range;Xa=
ga.polygonOffset_offset;v=r.polygonOffset_offset;w=ga.sample_coverage;da=r.sample_coverage;ua=ga.scissor_box;Da=r.scissor_box;lb=ga.stencil_func;Ib=r.stencil_func;ba=ga.stencil_opBack;O=r.stencil_opBack;va=ga.stencil_opFront;Fa=r.stencil_opFront;sa=ga.viewport;xa=r.viewport;wa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:4,stride:8};ca={offset:0,stride:8};return{batch:function(a,e){var d,h,c,x,t,C,y,l,R,sa,q,m,E;d=pa.next;d!==pa.cur&&(d?
A.bindFramebuffer(36160,d.framebuffer):A.bindFramebuffer(36160,null),pa.cur=d);if(r.dirty){var F,K,ja,ia,na,Ba,ma,Ad,Ee,$e,Se,Gd,Ce,te,Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc;F=ga.dither;F!==r.dither&&(F?A.enable(3024):A.disable(3024),r.dither=F);K=ha[0];ja=ha[1];if(K!==Ca[0]||ja!==Ca[1])A.blendEquationSeparate(K,ja),Ca[0]=K,Ca[1]=ja;ia=ga.depth_func;ia!==r.depth_func&&(A.depthFunc(ia),r.depth_func=ia);na=Aa[0];Ba=Aa[1];if(na!==Bb[0]||Ba!==Bb[1])A.depthRange(na,
Ba),Bb[0]=na,Bb[1]=Ba;ma=ga.depth_mask;ma!==r.depth_mask&&(A.depthMask(ma),r.depth_mask=ma);Ad=za[0];Ee=za[1];$e=za[2];Se=za[3];if(Ad!==Ma[0]||Ee!==Ma[1]||$e!==Ma[2]||Se!==Ma[3])A.colorMask(Ad,Ee,$e,Se),Ma[0]=Ad,Ma[1]=Ee,Ma[2]=$e,Ma[3]=Se;Gd=ga.cull_enable;Gd!==r.cull_enable&&(Gd?A.enable(2884):A.disable(2884),r.cull_enable=Gd);Ce=ga.cull_face;Ce!==r.cull_face&&(A.cullFace(Ce),r.cull_face=Ce);te=ga.frontFace;te!==r.frontFace&&(A.frontFace(te),r.frontFace=te);Nd=ga.lineWidth;Nd!==r.lineWidth&&(A.lineWidth(Nd),
r.lineWidth=Nd);Kd=ga.polygonOffset_enable;Kd!==r.polygonOffset_enable&&(Kd?A.enable(32823):A.disable(32823),r.polygonOffset_enable=Kd);$d=Xa[0];nd=Xa[1];if($d!==v[0]||nd!==v[1])A.polygonOffset($d,nd),v[0]=$d,v[1]=nd;bd=ga.sample_alpha;bd!==r.sample_alpha&&(bd?A.enable(32926):A.disable(32926),r.sample_alpha=bd);rd=ga.sample_enable;rd!==r.sample_enable&&(rd?A.enable(32928):A.disable(32928),r.sample_enable=rd);Mc=w[0];pd=w[1];if(Mc!==da[0]||pd!==da[1])A.sampleCoverage(Mc,pd),da[0]=Mc,da[1]=pd;Fc=ga.stencil_mask;
Fc!==r.stencil_mask&&(A.stencilMask(Fc),r.stencil_mask=Fc);fd=lb[0];Rc=lb[1];Jc=lb[2];if(fd!==Ib[0]||Rc!==Ib[1]||Jc!==Ib[2])A.stencilFunc(fd,Rc,Jc),Ib[0]=fd,Ib[1]=Rc,Ib[2]=Jc;Cb=va[0];Gb=va[1];Gc=va[2];xb=va[3];if(Cb!==Fa[0]||Gb!==Fa[1]||Gc!==Fa[2]||xb!==Fa[3])A.stencilOpSeparate(Cb,Gb,Gc,xb),Fa[0]=Cb,Fa[1]=Gb,Fa[2]=Gc,Fa[3]=xb;wc=ba[0];Db=ba[1];Kc=ba[2];kc=ba[3];if(wc!==O[0]||Db!==O[1]||Kc!==O[2]||kc!==O[3])A.stencilOpSeparate(wc,Db,Kc,kc),O[0]=wc,O[1]=Db,O[2]=Kc,O[3]=kc;Hc=ga.scissor_enable;Hc!==
r.scissor_enable&&(Hc?A.enable(3089):A.disable(3089),r.scissor_enable=Hc);gd=ua[0];Xc=ua[1];Dc=ua[2];dc=ua[3];if(gd!==Da[0]||Xc!==Da[1]||Dc!==Da[2]||dc!==Da[3])A.scissor(gd,Xc,Dc,dc),Da[0]=gd,Da[1]=Xc,Da[2]=Dc,Da[3]=dc}h=this.viewport;c=h.x|0;x=h.y|0;t="width"in h?h.width|0:N.framebufferWidth-c;C="height"in h?h.height|0:N.framebufferHeight-x;y=N.viewportWidth;N.viewportWidth=t;l=N.viewportHeight;N.viewportHeight=C;A.viewport(c,x,t,C);xa[0]=c;xa[1]=x;xa[2]=t;xa[3]=C;A.blendColor(0,0,0,1);ya[0]=0;ya[1]=
0;ya[2]=0;ya[3]=1;A.enable(3042);r.blend_enable=!0;A.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;A.disable(2929);r.depth_enable=!1;A.disable(2960);r.stencil_enable=!1;if(R=r.profile)sa=performance.now(),g.count+=e;A.useProgram(L.program);q=qa.angle_instanced_arrays;var Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,
Ab,Wa,Wb;ra.setVAO(null);ca.buffer=this.sizeBuffer;Ic=!1;oc=null;qc=0;lc=!1;db=pc=0;zc=1;yb=0;ab=5126;Za=ob=Ya=Nb=0;I(ca)?(Ic=!0,oc=S.createStream(34962,ca),ab=oc.dtype):(oc=S.getBuffer(ca))?ab=oc.dtype:"constant"in ca?(zc=2,"number"===typeof ca.constant?(Ya=ca.constant,ob=Za=Nb=0):(Ya=0<ca.constant.length?ca.constant[0]:0,ob=1<ca.constant.length?ca.constant[1]:0,Za=2<ca.constant.length?ca.constant[2]:0,Nb=3<ca.constant.length?ca.constant[3]:0)):(oc=I(ca.buffer)?S.createStream(34962,ca.buffer):S.getBuffer(ca.buffer),
ab="type"in ca?wa[ca.type]:oc.dtype,lc=!!ca.normalized,db=ca.size|0,pc=ca.offset|0,yb=ca.stride|0,qc=ca.divisor|0);Nc=ea.location;Ob=T[Nc];if(1===zc){Ob.buffer||A.enableVertexAttribArray(Nc);Jb=db||1;if(Ob.type!==ab||Ob.size!==Jb||Ob.buffer!==oc||Ob.normalized!==lc||Ob.offset!==pc||Ob.stride!==yb)A.bindBuffer(34962,oc.buffer),A.vertexAttribPointer(Nc,Jb,ab,lc,yb,pc),Ob.type=ab,Ob.size=Jb,Ob.buffer=oc,Ob.normalized=lc,Ob.offset=pc,Ob.stride=yb;Ob.divisor!==qc&&(q.vertexAttribDivisorANGLE(Nc,qc),Ob.divisor=
qc)}else if(Ob.buffer&&(A.disableVertexAttribArray(Nc),Ob.buffer=null),Ob.x!==Ya||Ob.y!==ob||Ob.z!==Za||Ob.w!==Nb)A.vertexAttrib4f(Nc,Ya,ob,Za,Nb),Ob.x=Ya,Ob.y=ob,Ob.z=Za,Ob.w=Nb;ka.buffer=this.sizeBuffer;rc=!1;Pb=null;jb=0;Hb=!1;wb=Eb=0;hb=1;Zb=0;Qb=5126;zb=Vb=Ua=qb=0;I(ka)?(rc=!0,Pb=S.createStream(34962,ka),Qb=Pb.dtype):(Pb=S.getBuffer(ka))?Qb=Pb.dtype:"constant"in ka?(hb=2,"number"===typeof ka.constant?(Ua=ka.constant,Vb=zb=qb=0):(Ua=0<ka.constant.length?ka.constant[0]:0,Vb=1<ka.constant.length?
ka.constant[1]:0,zb=2<ka.constant.length?ka.constant[2]:0,qb=3<ka.constant.length?ka.constant[3]:0)):(Pb=I(ka.buffer)?S.createStream(34962,ka.buffer):S.getBuffer(ka.buffer),Qb="type"in ka?wa[ka.type]:Pb.dtype,Hb=!!ka.normalized,wb=ka.size|0,Eb=ka.offset|0,Zb=ka.stride|0,jb=ka.divisor|0);hc=G.location;ib=T[hc];if(1===hb){ib.buffer||A.enableVertexAttribArray(hc);pb=wb||1;if(ib.type!==Qb||ib.size!==pb||ib.buffer!==Pb||ib.normalized!==Hb||ib.offset!==Eb||ib.stride!==Zb)A.bindBuffer(34962,Pb.buffer),A.vertexAttribPointer(hc,
pb,Qb,Hb,Zb,Eb),ib.type=Qb,ib.size=pb,ib.buffer=Pb,ib.normalized=Hb,ib.offset=Eb,ib.stride=Zb;ib.divisor!==jb&&(q.vertexAttribDivisorANGLE(hc,jb),ib.divisor=jb)}else if(ib.buffer&&(A.disableVertexAttribArray(hc),ib.buffer=null),ib.x!==Ua||ib.y!==Vb||ib.z!==zb||ib.w!==qb)A.vertexAttrib4f(hc,Ua,Vb,zb,qb),ib.x=Ua,ib.y=Vb,ib.z=zb,ib.w=qb;Ia=this.charBuffer;rb=!1;Ja=null;cb=0;eb=!1;kb=Ka=0;Sa=1;tb=0;sb=5126;Kb=Qa=Cc=Oa=0;I(Ia)?(rb=!0,Ja=S.createStream(34962,Ia),sb=Ja.dtype):(Ja=S.getBuffer(Ia))?sb=Ja.dtype:
"constant"in Ia?(Sa=2,"number"===typeof Ia.constant?(Cc=Ia.constant,Qa=Kb=Oa=0):(Cc=0<Ia.constant.length?Ia.constant[0]:0,Qa=1<Ia.constant.length?Ia.constant[1]:0,Kb=2<Ia.constant.length?Ia.constant[2]:0,Oa=3<Ia.constant.length?Ia.constant[3]:0)):(Ja=I(Ia.buffer)?S.createStream(34962,Ia.buffer):S.getBuffer(Ia.buffer),sb="type"in Ia?wa[Ia.type]:Ja.dtype,eb=!!Ia.normalized,kb=Ia.size|0,Ka=Ia.offset|0,tb=Ia.stride|0,cb=Ia.divisor|0);Fb=Y.location;La=T[Fb];if(1===Sa){La.buffer||A.enableVertexAttribArray(Fb);
Hd=kb||1;if(La.type!==sb||La.size!==Hd||La.buffer!==Ja||La.normalized!==eb||La.offset!==Ka||La.stride!==tb)A.bindBuffer(34962,Ja.buffer),A.vertexAttribPointer(Fb,Hd,sb,eb,tb,Ka),La.type=sb,La.size=Hd,La.buffer=Ja,La.normalized=eb,La.offset=Ka,La.stride=tb;La.divisor!==cb&&(q.vertexAttribDivisorANGLE(Fb,cb),La.divisor=cb)}else if(La.buffer&&(A.disableVertexAttribArray(Fb),La.buffer=null),La.x!==Cc||La.y!==Qa||La.z!==Kb||La.w!==Oa)A.vertexAttrib4f(Fb,Cc,Qa,Kb,Oa),La.x=Cc,La.y=Qa,La.z=Kb,La.w=Oa;Va=
this.position;Lb=!1;Mb=null;mb=0;Na=!1;Pa=$b=0;ub=1;vb=0;Ra=5126;uc=Ac=ec=nb=0;I(Va)?(Lb=!0,Mb=S.createStream(34962,Va),Ra=Mb.dtype):(Mb=S.getBuffer(Va))?Ra=Mb.dtype:"constant"in Va?(ub=2,"number"===typeof Va.constant?(ec=Va.constant,Ac=uc=nb=0):(ec=0<Va.constant.length?Va.constant[0]:0,Ac=1<Va.constant.length?Va.constant[1]:0,uc=2<Va.constant.length?Va.constant[2]:0,nb=3<Va.constant.length?Va.constant[3]:0)):(Mb=I(Va.buffer)?S.createStream(34962,Va.buffer):S.getBuffer(Va.buffer),Ra="type"in Va?wa[Va.type]:
Mb.dtype,Na=!!Va.normalized,Pa=Va.size|0,$b=Va.offset|0,vb=Va.stride|0,mb=Va.divisor|0);$a=M.location;ic=T[$a];if(1===ub){ic.buffer||A.enableVertexAttribArray($a);sd=Pa||2;if(ic.type!==Ra||ic.size!==sd||ic.buffer!==Mb||ic.normalized!==Na||ic.offset!==$b||ic.stride!==vb)A.bindBuffer(34962,Mb.buffer),A.vertexAttribPointer($a,sd,Ra,Na,vb,$b),ic.type=Ra,ic.size=sd,ic.buffer=Mb,ic.normalized=Na,ic.offset=$b,ic.stride=vb;ic.divisor!==mb&&(q.vertexAttribDivisorANGLE($a,mb),ic.divisor=mb)}else if(ic.buffer&&
(A.disableVertexAttribArray($a),ic.buffer=null),ic.x!==ec||ic.y!==Ac||ic.z!==uc||ic.w!==nb)A.vertexAttrib4f($a,ec,Ac,uc,nb),ic.x=ec,ic.y=Ac,ic.z=uc,ic.w=nb;Ta=this.viewportArray;A.uniform4f(X.location,Ta[0],Ta[1],Ta[2],Ta[3]);Oc=this.scale;A.uniform2f(la.location,Oc[0],Oc[1]);Ab=this.translate;A.uniform2f(Z.location,Ab[0],Ab[1]);(Wa=P.elements)?A.bindBuffer(34963,Wa.buffer.buffer):ra.currentVAO&&(Wa=Q.getElements(ra.currentVAO.elements))&&A.bindBuffer(34963,Wa.buffer.buffer);Wb=P.instances;for(m=
0;m<e;++m){E=a[m];var tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id,Ed;tc=u.call(this,N,E,m);m&&Xb===tc||(Xb=tc,A.uniform1f(D.location,tc));Rb=J.call(this,N,E,m);m&&Lc===Rb||(Lc=Rb,A.uniform1f(V.location,Rb));Sb=E.align;m&&Sd===Sb||(Sd=Sb,A.uniform1f(U.location,Sb));Ec=E.baseline;m&&yd===Ec||(yd=Ec,A.uniform1f(z.location,Ec));Pc=E.color;Yc=Pc[0];mc=Pc[1];fc=Pc[2];sc=Pc[3];m&&ud===Yc&&vc===mc&&bb===fc&&Ub===sc||(ud=Yc,vc=mc,bb=fc,Ub=
sc,A.uniform4f(k.location,Yc,mc,fc,sc));Yb=aa.call(this,N,E,m);cc=Yb[0];xc=Yb[1];m&&gc===cc&&Bc===xc||(gc=cc,Bc=xc,A.uniform2f(B.location,cc,xc));cd=b.call(this,N,E,m);Sc=cd[0];Uc=cd[1];m&&Tc===Sc&&Zc===Uc||(Tc=Sc,Zc=Uc,A.uniform2f(W.location,Sc,Uc));md=E.positionOffset;dd=md[0];jc=md[1];m&&$c===dd&&bc===jc||($c=dd,bc=jc,A.uniform2f(H.location,dd,jc));ad=E.opacity;m&&Wc===ad||(Wc=ad,A.uniform1f(f.location,ad));(ed=n.call(this,N,E,m))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);yc=ed._texture;
A.uniform1i(p.location,yc.bind());id=E.offset;if(Ed=E.count)0<Wb?Wa?q.drawElementsInstancedANGLE(0,Ed,Wa.type,id<<(Wa.type-5121>>1),Wb):q.drawArraysInstancedANGLE(0,id,Ed,Wb):0>Wb&&(Wa?A.drawElements(0,Ed,Wa.type,id<<(Wa.type-5121>>1)):A.drawArrays(0,id,Ed)),yc.unbind()}Ic&&S.destroyStream(oc);rc&&S.destroyStream(Pb);rb&&S.destroyStream(Ja);Lb&&S.destroyStream(Mb);r.dirty=!0;ra.setVAO(null);N.viewportWidth=y;N.viewportHeight=l;R&&(g.cpuTime+=performance.now()-sa)},draw:function(a){var b,n,C,y,l,R,
m,q,sa,u,E,F,K,J,L,aa,ja,ia,na,Ba,ma,Ad,Ee,$e,Se,Gd,Ce,te,Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb;b=pa.next;b!==pa.cur&&(b?A.bindFramebuffer(36160,b.framebuffer):A.bindFramebuffer(36160,null),pa.cur=b);if(r.dirty){var Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec;Sa=ga.dither;Sa!==
r.dither&&(Sa?A.enable(3024):A.disable(3024),r.dither=Sa);tb=ha[0];sb=ha[1];if(tb!==Ca[0]||sb!==Ca[1])A.blendEquationSeparate(tb,sb),Ca[0]=tb,Ca[1]=sb;Oa=ga.depth_func;Oa!==r.depth_func&&(A.depthFunc(Oa),r.depth_func=Oa);Cc=Aa[0];Qa=Aa[1];if(Cc!==Bb[0]||Qa!==Bb[1])A.depthRange(Cc,Qa),Bb[0]=Cc,Bb[1]=Qa;Kb=ga.depth_mask;Kb!==r.depth_mask&&(A.depthMask(Kb),r.depth_mask=Kb);Fb=za[0];La=za[1];Hd=za[2];Va=za[3];if(Fb!==Ma[0]||La!==Ma[1]||Hd!==Ma[2]||Va!==Ma[3])A.colorMask(Fb,La,Hd,Va),Ma[0]=Fb,Ma[1]=La,
Ma[2]=Hd,Ma[3]=Va;Lb=ga.cull_enable;Lb!==r.cull_enable&&(Lb?A.enable(2884):A.disable(2884),r.cull_enable=Lb);Mb=ga.cull_face;Mb!==r.cull_face&&(A.cullFace(Mb),r.cull_face=Mb);mb=ga.frontFace;mb!==r.frontFace&&(A.frontFace(mb),r.frontFace=mb);Na=ga.lineWidth;Na!==r.lineWidth&&(A.lineWidth(Na),r.lineWidth=Na);$b=ga.polygonOffset_enable;$b!==r.polygonOffset_enable&&($b?A.enable(32823):A.disable(32823),r.polygonOffset_enable=$b);Pa=Xa[0];ub=Xa[1];if(Pa!==v[0]||ub!==v[1])A.polygonOffset(Pa,ub),v[0]=Pa,
v[1]=ub;vb=ga.sample_alpha;vb!==r.sample_alpha&&(vb?A.enable(32926):A.disable(32926),r.sample_alpha=vb);Ra=ga.sample_enable;Ra!==r.sample_enable&&(Ra?A.enable(32928):A.disable(32928),r.sample_enable=Ra);nb=w[0];ec=w[1];if(nb!==da[0]||ec!==da[1])A.sampleCoverage(nb,ec),da[0]=nb,da[1]=ec;Ac=ga.stencil_mask;Ac!==r.stencil_mask&&(A.stencilMask(Ac),r.stencil_mask=Ac);uc=lb[0];$a=lb[1];ic=lb[2];if(uc!==Ib[0]||$a!==Ib[1]||ic!==Ib[2])A.stencilFunc(uc,$a,ic),Ib[0]=uc,Ib[1]=$a,Ib[2]=ic;sd=va[0];Ta=va[1];Oc=
va[2];Ab=va[3];if(sd!==Fa[0]||Ta!==Fa[1]||Oc!==Fa[2]||Ab!==Fa[3])A.stencilOpSeparate(sd,Ta,Oc,Ab),Fa[0]=sd,Fa[1]=Ta,Fa[2]=Oc,Fa[3]=Ab;Wa=ba[0];Wb=ba[1];tc=ba[2];Xb=ba[3];if(Wa!==O[0]||Wb!==O[1]||tc!==O[2]||Xb!==O[3])A.stencilOpSeparate(Wa,Wb,tc,Xb),O[0]=Wa,O[1]=Wb,O[2]=tc,O[3]=Xb;Rb=ga.scissor_enable;Rb!==r.scissor_enable&&(Rb?A.enable(3089):A.disable(3089),r.scissor_enable=Rb);Lc=ua[0];Sb=ua[1];Sd=ua[2];Ec=ua[3];if(Lc!==Da[0]||Sb!==Da[1]||Sd!==Da[2]||Ec!==Da[3])A.scissor(Lc,Sb,Sd,Ec),Da[0]=Lc,Da[1]=
Sb,Da[2]=Sd,Da[3]=Ec}n=this.viewport;C=n.x|0;y=n.y|0;l="width"in n?n.width|0:N.framebufferWidth-C;R="height"in n?n.height|0:N.framebufferHeight-y;m=N.viewportWidth;N.viewportWidth=l;q=N.viewportHeight;N.viewportHeight=R;A.viewport(C,y,l,R);xa[0]=C;xa[1]=y;xa[2]=l;xa[3]=R;A.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;A.enable(3042);r.blend_enable=!0;A.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;A.disable(2929);r.depth_enable=!1;A.disable(2960);r.stencil_enable=!1;
if(sa=r.profile)u=performance.now(),g.count++;A.useProgram(t.program);E=qa.angle_instanced_arrays;ra.setVAO(null);ca.buffer=this.sizeBuffer;F=!1;K=null;J=0;L=!1;ja=aa=0;ia=1;na=0;Ba=5126;$e=Ee=Ad=ma=0;I(ca)?(F=!0,K=S.createStream(34962,ca),Ba=K.dtype):(K=S.getBuffer(ca))?Ba=K.dtype:"constant"in ca?(ia=2,"number"===typeof ca.constant?(Ad=ca.constant,Ee=$e=ma=0):(Ad=0<ca.constant.length?ca.constant[0]:0,Ee=1<ca.constant.length?ca.constant[1]:0,$e=2<ca.constant.length?ca.constant[2]:0,ma=3<ca.constant.length?
ca.constant[3]:0)):(K=I(ca.buffer)?S.createStream(34962,ca.buffer):S.getBuffer(ca.buffer),Ba="type"in ca?wa[ca.type]:K.dtype,L=!!ca.normalized,ja=ca.size|0,aa=ca.offset|0,na=ca.stride|0,J=ca.divisor|0);Se=ea.location;Gd=T[Se];if(1===ia){Gd.buffer||A.enableVertexAttribArray(Se);Ce=ja||1;if(Gd.type!==Ba||Gd.size!==Ce||Gd.buffer!==K||Gd.normalized!==L||Gd.offset!==aa||Gd.stride!==na)A.bindBuffer(34962,K.buffer),A.vertexAttribPointer(Se,Ce,Ba,L,na,aa),Gd.type=Ba,Gd.size=Ce,Gd.buffer=K,Gd.normalized=L,
Gd.offset=aa,Gd.stride=na;Gd.divisor!==J&&(E.vertexAttribDivisorANGLE(Se,J),Gd.divisor=J)}else if(Gd.buffer&&(A.disableVertexAttribArray(Se),Gd.buffer=null),Gd.x!==Ad||Gd.y!==Ee||Gd.z!==$e||Gd.w!==ma)A.vertexAttrib4f(Se,Ad,Ee,$e,ma),Gd.x=Ad,Gd.y=Ee,Gd.z=$e,Gd.w=ma;ka.buffer=this.sizeBuffer;te=!1;Nd=null;Kd=0;$d=!1;bd=nd=0;rd=1;Mc=0;pd=5126;Jc=Rc=fd=Fc=0;I(ka)?(te=!0,Nd=S.createStream(34962,ka),pd=Nd.dtype):(Nd=S.getBuffer(ka))?pd=Nd.dtype:"constant"in ka?(rd=2,"number"===typeof ka.constant?(fd=ka.constant,
Rc=Jc=Fc=0):(fd=0<ka.constant.length?ka.constant[0]:0,Rc=1<ka.constant.length?ka.constant[1]:0,Jc=2<ka.constant.length?ka.constant[2]:0,Fc=3<ka.constant.length?ka.constant[3]:0)):(Nd=I(ka.buffer)?S.createStream(34962,ka.buffer):S.getBuffer(ka.buffer),pd="type"in ka?wa[ka.type]:Nd.dtype,$d=!!ka.normalized,bd=ka.size|0,nd=ka.offset|0,Mc=ka.stride|0,Kd=ka.divisor|0);Cb=G.location;Gb=T[Cb];if(1===rd){Gb.buffer||A.enableVertexAttribArray(Cb);Gc=bd||1;if(Gb.type!==pd||Gb.size!==Gc||Gb.buffer!==Nd||Gb.normalized!==
$d||Gb.offset!==nd||Gb.stride!==Mc)A.bindBuffer(34962,Nd.buffer),A.vertexAttribPointer(Cb,Gc,pd,$d,Mc,nd),Gb.type=pd,Gb.size=Gc,Gb.buffer=Nd,Gb.normalized=$d,Gb.offset=nd,Gb.stride=Mc;Gb.divisor!==Kd&&(E.vertexAttribDivisorANGLE(Cb,Kd),Gb.divisor=Kd)}else if(Gb.buffer&&(A.disableVertexAttribArray(Cb),Gb.buffer=null),Gb.x!==fd||Gb.y!==Rc||Gb.z!==Jc||Gb.w!==Fc)A.vertexAttrib4f(Cb,fd,Rc,Jc,Fc),Gb.x=fd,Gb.y=Rc,Gb.z=Jc,Gb.w=Fc;xb=this.charBuffer;wc=!1;Db=null;Kc=0;kc=!1;gd=Hc=0;Xc=1;Dc=0;dc=5126;lc=qc=
oc=Ic=0;I(xb)?(wc=!0,Db=S.createStream(34962,xb),dc=Db.dtype):(Db=S.getBuffer(xb))?dc=Db.dtype:"constant"in xb?(Xc=2,"number"===typeof xb.constant?(oc=xb.constant,qc=lc=Ic=0):(oc=0<xb.constant.length?xb.constant[0]:0,qc=1<xb.constant.length?xb.constant[1]:0,lc=2<xb.constant.length?xb.constant[2]:0,Ic=3<xb.constant.length?xb.constant[3]:0)):(Db=I(xb.buffer)?S.createStream(34962,xb.buffer):S.getBuffer(xb.buffer),dc="type"in xb?wa[xb.type]:Db.dtype,kc=!!xb.normalized,gd=xb.size|0,Hc=xb.offset|0,Dc=xb.stride|
0,Kc=xb.divisor|0);pc=Y.location;db=T[pc];if(1===Xc){db.buffer||A.enableVertexAttribArray(pc);zc=gd||1;if(db.type!==dc||db.size!==zc||db.buffer!==Db||db.normalized!==kc||db.offset!==Hc||db.stride!==Dc)A.bindBuffer(34962,Db.buffer),A.vertexAttribPointer(pc,zc,dc,kc,Dc,Hc),db.type=dc,db.size=zc,db.buffer=Db,db.normalized=kc,db.offset=Hc,db.stride=Dc;db.divisor!==Kc&&(E.vertexAttribDivisorANGLE(pc,Kc),db.divisor=Kc)}else if(db.buffer&&(A.disableVertexAttribArray(pc),db.buffer=null),db.x!==oc||db.y!==
qc||db.z!==lc||db.w!==Ic)A.vertexAttrib4f(pc,oc,qc,lc,Ic),db.x=oc,db.y=qc,db.z=lc,db.w=Ic;yb=this.position;ab=!1;Nb=null;Ya=0;ob=!1;Nc=Za=0;Ob=1;Jb=0;rc=5126;Eb=Hb=jb=Pb=0;I(yb)?(ab=!0,Nb=S.createStream(34962,yb),rc=Nb.dtype):(Nb=S.getBuffer(yb))?rc=Nb.dtype:"constant"in yb?(Ob=2,"number"===typeof yb.constant?(jb=yb.constant,Hb=Eb=Pb=0):(jb=0<yb.constant.length?yb.constant[0]:0,Hb=1<yb.constant.length?yb.constant[1]:0,Eb=2<yb.constant.length?yb.constant[2]:0,Pb=3<yb.constant.length?yb.constant[3]:
0)):(Nb=I(yb.buffer)?S.createStream(34962,yb.buffer):S.getBuffer(yb.buffer),rc="type"in yb?wa[yb.type]:Nb.dtype,ob=!!yb.normalized,Nc=yb.size|0,Za=yb.offset|0,Jb=yb.stride|0,Ya=yb.divisor|0);wb=M.location;hb=T[wb];if(1===Ob){hb.buffer||A.enableVertexAttribArray(wb);Zb=Nc||2;if(hb.type!==rc||hb.size!==Zb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Za||hb.stride!==Jb)A.bindBuffer(34962,Nb.buffer),A.vertexAttribPointer(wb,Zb,rc,ob,Jb,Za),hb.type=rc,hb.size=Zb,hb.buffer=Nb,hb.normalized=ob,hb.offset=
Za,hb.stride=Jb;hb.divisor!==Ya&&(E.vertexAttribDivisorANGLE(wb,Ya),hb.divisor=Ya)}else if(hb.buffer&&(A.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Hb||hb.z!==Eb||hb.w!==Pb)A.vertexAttrib4f(wb,jb,Hb,Eb,Pb),hb.x=jb,hb.y=Hb,hb.z=Eb,hb.w=Pb;Qb=x.call(this,N,a,0);A.uniform1f(D.location,Qb);qb=h.call(this,N,a,0);A.uniform1f(V.location,qb);A.uniform1f(U.location,a.align);A.uniform1f(z.location,a.baseline);Ua=this.viewportArray;A.uniform4f(X.location,Ua[0],Ua[1],Ua[2],Ua[3]);Vb=a.color;
A.uniform4f(k.location,Vb[0],Vb[1],Vb[2],Vb[3]);zb=e.call(this,N,a,0);A.uniform2f(B.location,zb[0],zb[1]);hc=c.call(this,N,a,0);A.uniform2f(W.location,hc[0],hc[1]);ib=this.scale;A.uniform2f(la.location,ib[0],ib[1]);pb=this.translate;A.uniform2f(Z.location,pb[0],pb[1]);Ia=a.positionOffset;A.uniform2f(H.location,Ia[0],Ia[1]);A.uniform1f(f.location,a.opacity);(rb=d.call(this,N,a,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);Ja=rb._texture;A.uniform1i(p.location,Ja.bind());(cb=P.elements)?A.bindBuffer(34963,
cb.buffer.buffer):ra.currentVAO&&(cb=Q.getElements(ra.currentVAO.elements))&&A.bindBuffer(34963,cb.buffer.buffer);eb=a.offset;if(Ka=a.count)kb=P.instances,0<kb?cb?E.drawElementsInstancedANGLE(0,Ka,cb.type,eb<<(cb.type-5121>>1),kb):E.drawArraysInstancedANGLE(0,eb,Ka,kb):0>kb&&(cb?A.drawElements(0,Ka,cb.type,eb<<(cb.type-5121>>1)):A.drawArrays(0,eb,Ka)),r.dirty=!0,ra.setVAO(null),N.viewportWidth=m,N.viewportHeight=q,sa&&(g.cpuTime+=performance.now()-u),F&&S.destroyStream(K),te&&S.destroyStream(Nd),
wc&&S.destroyStream(Db),ab&&S.destroyStream(Nb),Ja.unbind()},scope:function(a,f,b){var e,d,k,h,c,v,n,A,x,w,t,O,p,da,B,z,Aa,va,Fa,D,G,H,u,T,ha,ba,Bb,Q,Ma,J,L,xa,ua,ya,ra,aa,U,qa,W,X,Y,V,ea,Xa,oa,M,Ca,Ea,za,pa,Da,la,Ib,Z,lb,ld,ma,zc,yb,ab,Nb,Ya,ob,Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta,Oc,Ab,Wa,Wb,tc,Xb,Rb,Lc,Sb,Sd,Ec,yd,Pc,Yc,ud,mc,vc,fc,bb,sc,Ub,Yb,cc,gc,xc,Bc,cd,Sc,Tc,Uc,
Zc,md,dd,$c,jc,bc,ad,Wc,ed,yc,id;e=this.viewport;d=e.x|0;k=e.y|0;h="width"in e?e.width|0:N.framebufferWidth-d;c="height"in e?e.height|0:N.framebufferHeight-k;v=N.viewportWidth;N.viewportWidth=h;n=N.viewportHeight;N.viewportHeight=c;A=sa[0];sa[0]=d;x=sa[1];sa[1]=k;w=sa[2];sa[2]=h;t=sa[3];sa[3]=c;O=Ba[0];Ba[0]=0;p=Ba[1];Ba[1]=0;da=Ba[2];Ba[2]=0;B=Ba[3];Ba[3]=1;z=ga.blend_enable;ga.blend_enable=!0;Aa=ja[0];ja[0]=770;va=ja[1];ja[1]=771;Fa=ja[2];ja[2]=773;D=ja[3];ja[3]=1;G=ga.depth_enable;ga.depth_enable=
!1;H=ga.stencil_enable;ga.stencil_enable=!1;if(u=r.profile)T=performance.now(),g.count++;ha=a.offset;ba=P.offset;P.offset=ha;Bb=a.count;Q=P.count;P.count=Bb;Ma=P.primitive;P.primitive=0;J=a.align;L=na[64];na[64]=J;xa=y.call(this,N,a,b);ua=na[69];na[69]=xa;ya=l.call(this,N,a,b);ra=na[67];na[67]=ya;aa=F.call(this,N,a,b);U=na[66];na[66]=aa;qa=a.baseline;W=na[65];na[65]=qa;X=K.call(this,N,a,b);Y=na[62];na[62]=X;V=a.color;ea=na[14];na[14]=V;Xa=q.call(this,N,a,b);oa=na[63];na[63]=Xa;M=a.opacity;Ca=na[10];
na[10]=M;Ea=a.positionOffset;za=na[68];na[68]=Ea;pa=this.scale;Da=na[6];na[6]=pa;la=this.translate;Ib=na[8];na[8]=la;Z=this.viewportArray;lb=na[3];na[3]=Z;ld=this.charBuffer;ma=!1;zc=null;yb=0;ab=!1;Ya=Nb=0;ob=1;Za=0;Nc=5126;Pb=rc=Jb=Ob=0;I(ld)?(ma=!0,zc=S.createStream(34962,ld),Nc=zc.dtype):(zc=S.getBuffer(ld))?Nc=zc.dtype:"constant"in ld?(ob=2,"number"===typeof ld.constant?(Jb=ld.constant,rc=Pb=Ob=0):(Jb=0<ld.constant.length?ld.constant[0]:0,rc=1<ld.constant.length?ld.constant[1]:0,Pb=2<ld.constant.length?
ld.constant[2]:0,Ob=3<ld.constant.length?ld.constant[3]:0)):(zc=I(ld.buffer)?S.createStream(34962,ld.buffer):S.getBuffer(ld.buffer),Nc="type"in ld?wa[ld.type]:zc.dtype,ab=!!ld.normalized,Ya=ld.size|0,Nb=ld.offset|0,Za=ld.stride|0,yb=ld.divisor|0);jb=m.buffer;m.buffer=zc;Hb=m.divisor;m.divisor=yb;Eb=m.normalized;m.normalized=ab;wb=m.offset;m.offset=Nb;hb=m.size;m.size=Ya;Zb=m.state;m.state=ob;Qb=m.stride;m.stride=Za;qb=m.type;m.type=Nc;Ua=m.w;m.w=Ob;Vb=m.x;m.x=Jb;zb=m.y;m.y=rc;hc=m.z;m.z=Pb;ka.buffer=
this.sizeBuffer;ib=!1;pb=null;Ia=0;rb=!1;cb=Ja=0;eb=1;Ka=0;kb=5126;Oa=sb=tb=Sa=0;I(ka)?(ib=!0,pb=S.createStream(34962,ka),kb=pb.dtype):(pb=S.getBuffer(ka))?kb=pb.dtype:"constant"in ka?(eb=2,"number"===typeof ka.constant?(tb=ka.constant,sb=Oa=Sa=0):(tb=0<ka.constant.length?ka.constant[0]:0,sb=1<ka.constant.length?ka.constant[1]:0,Oa=2<ka.constant.length?ka.constant[2]:0,Sa=3<ka.constant.length?ka.constant[3]:0)):(pb=I(ka.buffer)?S.createStream(34962,ka.buffer):S.getBuffer(ka.buffer),kb="type"in ka?
wa[ka.type]:pb.dtype,rb=!!ka.normalized,cb=ka.size|0,Ja=ka.offset|0,Ka=ka.stride|0,Ia=ka.divisor|0);Cc=E.buffer;E.buffer=pb;Qa=E.divisor;E.divisor=Ia;Kb=E.normalized;E.normalized=rb;Fb=E.offset;E.offset=Ja;La=E.size;E.size=cb;Hd=E.state;E.state=eb;Va=E.stride;E.stride=Ka;Lb=E.type;E.type=kb;Mb=E.w;E.w=Sa;mb=E.x;E.x=tb;Na=E.y;E.y=sb;$b=E.z;E.z=Oa;Pa=this.position;ub=!1;vb=null;Ra=0;nb=!1;Ac=ec=0;uc=1;$a=0;ic=5126;Ab=Oc=Ta=sd=0;I(Pa)?(ub=!0,vb=S.createStream(34962,Pa),ic=vb.dtype):(vb=S.getBuffer(Pa))?
ic=vb.dtype:"constant"in Pa?(uc=2,"number"===typeof Pa.constant?(Ta=Pa.constant,Oc=Ab=sd=0):(Ta=0<Pa.constant.length?Pa.constant[0]:0,Oc=1<Pa.constant.length?Pa.constant[1]:0,Ab=2<Pa.constant.length?Pa.constant[2]:0,sd=3<Pa.constant.length?Pa.constant[3]:0)):(vb=I(Pa.buffer)?S.createStream(34962,Pa.buffer):S.getBuffer(Pa.buffer),ic="type"in Pa?wa[Pa.type]:vb.dtype,nb=!!Pa.normalized,Ac=Pa.size|0,ec=Pa.offset|0,$a=Pa.stride|0,Ra=Pa.divisor|0);Wa=ia.buffer;ia.buffer=vb;Wb=ia.divisor;ia.divisor=Ra;tc=
ia.normalized;ia.normalized=nb;Xb=ia.offset;ia.offset=ec;Rb=ia.size;ia.size=Ac;Lc=ia.state;ia.state=uc;Sb=ia.stride;ia.stride=$a;Sd=ia.type;ia.type=ic;Ec=ia.w;ia.w=sd;yd=ia.x;ia.x=Ta;Pc=ia.y;ia.y=Oc;Yc=ia.z;ia.z=Ab;ca.buffer=this.sizeBuffer;ud=!1;mc=null;vc=0;fc=!1;sc=bb=0;Ub=1;Yb=0;cc=5126;cd=Bc=xc=gc=0;I(ca)?(ud=!0,mc=S.createStream(34962,ca),cc=mc.dtype):(mc=S.getBuffer(ca))?cc=mc.dtype:"constant"in ca?(Ub=2,"number"===typeof ca.constant?(xc=ca.constant,Bc=cd=gc=0):(xc=0<ca.constant.length?ca.constant[0]:
0,Bc=1<ca.constant.length?ca.constant[1]:0,cd=2<ca.constant.length?ca.constant[2]:0,gc=3<ca.constant.length?ca.constant[3]:0)):(mc=I(ca.buffer)?S.createStream(34962,ca.buffer):S.getBuffer(ca.buffer),cc="type"in ca?wa[ca.type]:mc.dtype,fc=!!ca.normalized,sc=ca.size|0,bb=ca.offset|0,Yb=ca.stride|0,vc=ca.divisor|0);Sc=C.buffer;C.buffer=mc;Tc=C.divisor;C.divisor=vc;Uc=C.normalized;C.normalized=fc;Zc=C.offset;C.offset=bb;md=C.size;C.size=sc;dd=C.state;C.state=Ub;$c=C.stride;C.stride=Yb;jc=C.type;C.type=
cc;bc=C.w;C.w=gc;ad=C.x;C.x=xc;Wc=C.y;C.y=Bc;ed=C.z;C.z=cd;yc=R.vert;R.vert=61;id=R.frag;R.frag=60;r.dirty=!0;f(N,a,b);N.viewportWidth=v;N.viewportHeight=n;sa[0]=A;sa[1]=x;sa[2]=w;sa[3]=t;Ba[0]=O;Ba[1]=p;Ba[2]=da;Ba[3]=B;ga.blend_enable=z;ja[0]=Aa;ja[1]=va;ja[2]=Fa;ja[3]=D;ga.depth_enable=G;ga.stencil_enable=H;u&&(g.cpuTime+=performance.now()-T);P.offset=ba;P.count=Q;P.primitive=Ma;na[64]=L;na[69]=ua;na[67]=ra;na[66]=U;na[65]=W;na[62]=Y;na[14]=ea;na[63]=oa;na[10]=Ca;na[68]=za;na[6]=Da;na[8]=Ib;na[3]=
lb;ma&&S.destroyStream(zc);m.buffer=jb;m.divisor=Hb;m.normalized=Eb;m.offset=wb;m.size=hb;m.state=Zb;m.stride=Qb;m.type=qb;m.w=Ua;m.x=Vb;m.y=zb;m.z=hc;ib&&S.destroyStream(pb);E.buffer=Cc;E.divisor=Qa;E.normalized=Kb;E.offset=Fb;E.size=La;E.state=Hd;E.stride=Va;E.type=Lb;E.w=Mb;E.x=mb;E.y=Na;E.z=$b;ub&&S.destroyStream(vb);ia.buffer=Wa;ia.divisor=Wb;ia.normalized=tc;ia.offset=Xb;ia.size=Rb;ia.state=Lc;ia.stride=Sb;ia.type=Sd;ia.w=Ec;ia.x=yd;ia.y=Pc;ia.z=Yc;ud&&S.destroyStream(mc);C.buffer=Sc;C.divisor=
Tc;C.normalized=Uc;C.offset=Zc;C.size=md;C.state=dd;C.stride=$c;C.type=jc;C.w=bc;C.x=ad;C.y=Wc;C.z=ed;R.vert=yc;R.frag=id;r.dirty=!0}}},$2:function(a,g,t){var x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V;x=a.attributes;h=a.current;e=a.framebuffer;c=a.gl;d=a.next;y=a.vao;l=d.blend_color;F=h.blend_color;K=d.blend_equation;q=h.blend_equation;m=d.blend_func;E=h.blend_func;ia=d.colorMask;C=h.colorMask;L=d.depth_range;u=h.depth_range;J=d.polygonOffset_offset;aa=h.polygonOffset_offset;b=
d.sample_coverage;n=h.sample_coverage;U=d.scissor_box;p=h.scissor_box;W=d.stencil_func;B=h.stencil_func;z=d.stencil_opBack;Y=h.stencil_opBack;G=d.stencil_opFront;D=h.stencil_opFront;k=d.viewport;V=h.viewport;return{poll:function(){var a,g,x,t,y,X,ea,T,S,N,r,P,Q,qa,M,A,I,ga,R,na,ra,Ba;h.dirty=!1;g=d.blend_enable;x=d.cull_enable;t=d.depth_enable;y=d.dither;X=d.polygonOffset_enable;ea=d.sample_alpha;T=d.sample_enable;S=d.scissor_enable;N=d.stencil_enable;r=d.cull_face;P=h.cull_face;Q=d.depth_func;qa=
h.depth_func;M=d.depth_mask;A=h.depth_mask;I=d.frontFace;ga=h.frontFace;R=d.lineWidth;na=h.lineWidth;ra=d.stencil_mask;Ba=h.stencil_mask;a=e.next;a!==e.cur&&(a?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null),e.cur=a);g!==h.blend_enable&&(g?c.enable(3042):c.disable(3042),h.blend_enable=g);x!==h.cull_enable&&(x?c.enable(2884):c.disable(2884),h.cull_enable=x);t!==h.depth_enable&&(t?c.enable(2929):c.disable(2929),h.depth_enable=t);y!==h.dither&&(y?c.enable(3024):c.disable(3024),h.dither=
y);X!==h.polygonOffset_enable&&(X?c.enable(32823):c.disable(32823),h.polygonOffset_enable=X);ea!==h.sample_alpha&&(ea?c.enable(32926):c.disable(32926),h.sample_alpha=ea);T!==h.sample_enable&&(T?c.enable(32928):c.disable(32928),h.sample_enable=T);S!==h.scissor_enable&&(S?c.enable(3089):c.disable(3089),h.scissor_enable=S);N!==h.stencil_enable&&(N?c.enable(2960):c.disable(2960),h.stencil_enable=N);if(l[0]!==F[0]||l[1]!==F[1]||l[2]!==F[2]||l[3]!==F[3])c.blendColor(l[0],l[1],l[2],l[3]),F[0]=l[0],F[1]=
l[1],F[2]=l[2],F[3]=l[3];if(K[0]!==q[0]||K[1]!==q[1])c.blendEquationSeparate(K[0],K[1]),q[0]=K[0],q[1]=K[1];if(m[0]!==E[0]||m[1]!==E[1]||m[2]!==E[2]||m[3]!==E[3])c.blendFuncSeparate(m[0],m[1],m[2],m[3]),E[0]=m[0],E[1]=m[1],E[2]=m[2],E[3]=m[3];if(ia[0]!==C[0]||ia[1]!==C[1]||ia[2]!==C[2]||ia[3]!==C[3])c.colorMask(ia[0],ia[1],ia[2],ia[3]),C[0]=ia[0],C[1]=ia[1],C[2]=ia[2],C[3]=ia[3];r!==P&&(c.cullFace(r),h.cull_face=r);Q!==qa&&(c.depthFunc(Q),h.depth_func=Q);M!==A&&(c.depthMask(M),h.depth_mask=M);if(L[0]!==
u[0]||L[1]!==u[1])c.depthRange(L[0],L[1]),u[0]=L[0],u[1]=L[1];I!==ga&&(c.frontFace(I),h.frontFace=I);R!==na&&(c.lineWidth(R),h.lineWidth=R);if(J[0]!==aa[0]||J[1]!==aa[1])c.polygonOffset(J[0],J[1]),aa[0]=J[0],aa[1]=J[1];if(b[0]!==n[0]||b[1]!==n[1])c.sampleCoverage(b[0],b[1]),n[0]=b[0],n[1]=b[1];if(U[0]!==p[0]||U[1]!==p[1]||U[2]!==p[2]||U[3]!==p[3])c.scissor(U[0],U[1],U[2],U[3]),p[0]=U[0],p[1]=U[1],p[2]=U[2],p[3]=U[3];if(W[0]!==B[0]||W[1]!==B[1]||W[2]!==B[2])c.stencilFunc(W[0],W[1],W[2]),B[0]=W[0],
B[1]=W[1],B[2]=W[2];ra!==Ba&&(c.stencilMask(ra),h.stencil_mask=ra);if(z[0]!==Y[0]||z[1]!==Y[1]||z[2]!==Y[2]||z[3]!==Y[3])c.stencilOpSeparate(z[0],z[1],z[2],z[3]),Y[0]=z[0],Y[1]=z[1],Y[2]=z[2],Y[3]=z[3];if(G[0]!==D[0]||G[1]!==D[1]||G[2]!==D[2]||G[3]!==D[3])c.stencilOpSeparate(G[0],G[1],G[2],G[3]),D[0]=G[0],D[1]=G[1],D[2]=G[2],D[3]=G[3];if(k[0]!==V[0]||k[1]!==V[1]||k[2]!==V[2]||k[3]!==V[3])c.viewport(k[0],k[1],k[2],k[3]),V[0]=k[0],V[1]=k[1],V[2]=k[2],V[3]=k[3]},refresh:function(){var a,g,t,M,Z,X,ea,
T,S,N,r,P,Q,qa,pa,A;h.dirty=!1;g=d.blend_enable;t=d.cull_enable;M=d.depth_enable;Z=d.dither;X=d.polygonOffset_enable;ea=d.sample_alpha;T=d.sample_enable;S=d.scissor_enable;N=d.stencil_enable;r=d.cull_face;P=d.depth_func;Q=d.depth_mask;qa=d.frontFace;pa=d.lineWidth;A=d.stencil_mask;(a=e.next)?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null);e.cur=a;a=x[0];a.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(0,a.size,a.type,a.normalized,
a.stride,a.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=x[1];a.buffer?(c.enableVertexAttribArray(1),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=x[2];a.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(2),
c.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=x[3];a.buffer?(c.enableVertexAttribArray(3),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=x[4];a.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,a.x,a.y,a.z,
a.w),a.buffer=null);a=x[5];a.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=x[6];a.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(6),c.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=x[7];a.buffer?
(c.enableVertexAttribArray(7),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=x[8];a.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=x[9];a.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,
a.buffer.buffer),c.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=x[10];a.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=x[11];a.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(11,
a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(11),c.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=x[12];a.buffer?(c.enableVertexAttribArray(12),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=x[13];a.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(13,a.size,a.type,a.normalized,
a.stride,a.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=x[14];a.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=x[15];a.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(15),
c.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);y.currentVAO=null;y.setVAO(y.targetVAO);g?c.enable(3042):c.disable(3042);h.blend_enable=g;t?c.enable(2884):c.disable(2884);h.cull_enable=t;M?c.enable(2929):c.disable(2929);h.depth_enable=M;Z?c.enable(3024):c.disable(3024);h.dither=Z;X?c.enable(32823):c.disable(32823);h.polygonOffset_enable=X;ea?c.enable(32926):c.disable(32926);h.sample_alpha=ea;T?c.enable(32928):c.disable(32928);h.sample_enable=T;S?c.enable(3089):c.disable(3089);h.scissor_enable=
S;N?c.enable(2960):c.disable(2960);h.stencil_enable=N;c.blendColor(l[0],l[1],l[2],l[3]);F[0]=l[0];F[1]=l[1];F[2]=l[2];F[3]=l[3];c.blendEquationSeparate(K[0],K[1]);q[0]=K[0];q[1]=K[1];c.blendFuncSeparate(m[0],m[1],m[2],m[3]);E[0]=m[0];E[1]=m[1];E[2]=m[2];E[3]=m[3];c.colorMask(ia[0],ia[1],ia[2],ia[3]);C[0]=ia[0];C[1]=ia[1];C[2]=ia[2];C[3]=ia[3];c.cullFace(r);h.cull_face=r;c.depthFunc(P);h.depth_func=P;c.depthMask(Q);h.depth_mask=Q;c.depthRange(L[0],L[1]);u[0]=L[0];u[1]=L[1];c.frontFace(qa);h.frontFace=
qa;c.lineWidth(pa);h.lineWidth=pa;c.polygonOffset(J[0],J[1]);aa[0]=J[0];aa[1]=J[1];c.sampleCoverage(b[0],b[1]);n[0]=b[0];n[1]=b[1];c.scissor(U[0],U[1],U[2],U[3]);p[0]=U[0];p[1]=U[1];p[2]=U[2];p[3]=U[3];c.stencilFunc(W[0],W[1],W[2]);B[0]=W[0];B[1]=W[1];B[2]=W[2];c.stencilMask(A);h.stencil_mask=A;c.stencilOpSeparate(z[0],z[1],z[2],z[3]);Y[0]=z[0];Y[1]=z[1];Y[2]=z[2];Y[3]=z[3];c.stencilOpSeparate(G[0],G[1],G[2],G[3]);D[0]=G[0];D[1]=G[1];D[2]=G[2];D[3]=G[3];c.viewport(k[0],k[1],k[2],k[3]);V[0]=k[0];V[1]=
k[1];V[2]=k[2];V[3]=k[3]}}},$7:function(a,g,t,x,h,e,c,d){var y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,M,H,la,Z,X,ea,T;y=a.context;l=a.current;F=a.framebuffer;K=a.gl;q=a.next;m=a.shader;E=a.vao;ia=q.blend_color;C=l.blend_color;L=q.blend_equation;u=l.blend_equation;J=q.blend_func;aa=l.blend_func;b=q.colorMask;n=l.colorMask;U=q.depth_range;p=l.depth_range;W=q.polygonOffset_offset;B=l.polygonOffset_offset;z=q.sample_coverage;Y=l.sample_coverage;G=q.scissor_box;D=l.scissor_box;k=q.stencil_func;
V=l.stencil_func;f=q.stencil_opBack;M=l.stencil_opBack;H=q.stencil_opFront;la=l.stencil_opFront;Z=q.viewport;X=l.viewport;ea={};T={};return{draw:function(a){var d,c,G,T,qa,pa,A,I,ga,R;d=a.framebuffer;c=F.getFramebuffer(d);d&&!c&&g.commandRaise(h,t);d=F.next;F.next=c;G=y.framebufferWidth;y.framebufferWidth=c?c.width:y.drawingBufferWidth;T=y.framebufferHeight;y.framebufferHeight=c?c.height:y.drawingBufferHeight;c!==F.cur&&(c?K.bindFramebuffer(36160,c.framebuffer):K.bindFramebuffer(36160,null),F.cur=
c);if(l.dirty){c=q.dither;c!==l.dither&&(c?K.enable(3024):K.disable(3024),l.dither=c);c=q.blend_enable;c!==l.blend_enable&&(c?K.enable(3042):K.disable(3042),l.blend_enable=c);c=ia[0];A=ia[1];qa=ia[2];pa=ia[3];if(c!==C[0]||A!==C[1]||qa!==C[2]||pa!==C[3])K.blendColor(c,A,qa,pa),C[0]=c,C[1]=A,C[2]=qa,C[3]=pa;c=L[0];A=L[1];if(c!==u[0]||A!==u[1])K.blendEquationSeparate(c,A),u[0]=c,u[1]=A;c=J[0];A=J[1];qa=J[2];pa=J[3];if(c!==aa[0]||A!==aa[1]||qa!==aa[2]||pa!==aa[3])K.blendFuncSeparate(c,A,qa,pa),aa[0]=
c,aa[1]=A,aa[2]=qa,aa[3]=pa;c=q.depth_enable;c!==l.depth_enable&&(c?K.enable(2929):K.disable(2929),l.depth_enable=c);c=q.depth_func;c!==l.depth_func&&(K.depthFunc(c),l.depth_func=c);c=U[0];A=U[1];if(c!==p[0]||A!==p[1])K.depthRange(c,A),p[0]=c,p[1]=A;c=q.depth_mask;c!==l.depth_mask&&(K.depthMask(c),l.depth_mask=c);c=b[0];A=b[1];qa=b[2];pa=b[3];if(c!==n[0]||A!==n[1]||qa!==n[2]||pa!==n[3])K.colorMask(c,A,qa,pa),n[0]=c,n[1]=A,n[2]=qa,n[3]=pa;c=q.cull_enable;c!==l.cull_enable&&(c?K.enable(2884):K.disable(2884),
l.cull_enable=c);c=q.cull_face;c!==l.cull_face&&(K.cullFace(c),l.cull_face=c);c=q.frontFace;c!==l.frontFace&&(K.frontFace(c),l.frontFace=c);c=q.lineWidth;c!==l.lineWidth&&(K.lineWidth(c),l.lineWidth=c);c=q.polygonOffset_enable;c!==l.polygonOffset_enable&&(c?K.enable(32823):K.disable(32823),l.polygonOffset_enable=c);c=W[0];A=W[1];if(c!==B[0]||A!==B[1])K.polygonOffset(c,A),B[0]=c,B[1]=A;c=q.sample_alpha;c!==l.sample_alpha&&(c?K.enable(32926):K.disable(32926),l.sample_alpha=c);c=q.sample_enable;c!==
l.sample_enable&&(c?K.enable(32928):K.disable(32928),l.sample_enable=c);c=z[0];A=z[1];if(c!==Y[0]||A!==Y[1])K.sampleCoverage(c,A),Y[0]=c,Y[1]=A;c=q.stencil_enable;c!==l.stencil_enable&&(c?K.enable(2960):K.disable(2960),l.stencil_enable=c);c=q.stencil_mask;c!==l.stencil_mask&&(K.stencilMask(c),l.stencil_mask=c);c=k[0];A=k[1];qa=k[2];if(c!==V[0]||A!==V[1]||qa!==V[2])K.stencilFunc(c,A,qa),V[0]=c,V[1]=A,V[2]=qa;c=H[0];A=H[1];qa=H[2];pa=H[3];if(c!==la[0]||A!==la[1]||qa!==la[2]||pa!==la[3])K.stencilOpSeparate(c,
A,qa,pa),la[0]=c,la[1]=A,la[2]=qa,la[3]=pa;c=f[0];A=f[1];qa=f[2];pa=f[3];if(c!==M[0]||A!==M[1]||qa!==M[2]||pa!==M[3])K.stencilOpSeparate(c,A,qa,pa),M[0]=c,M[1]=A,M[2]=qa,M[3]=pa;c=q.scissor_enable;c!==l.scissor_enable&&(c?K.enable(3089):K.disable(3089),l.scissor_enable=c)}qa=y.framebufferWidth;pa=y.framebufferHeight;c=y.viewportWidth;y.viewportWidth=qa;A=y.viewportHeight;y.viewportHeight=pa;K.viewport(0,0,qa,pa);X[0]=0;X[1]=0;X[2]=qa;X[3]=pa;qa=y.framebufferWidth;pa=y.framebufferHeight;K.scissor(0,
0,qa,pa);D[0]=0;D[1]=0;D[2]=qa;D[3]=pa;if(qa=l.profile)I=performance.now(),x.count++;pa=m.program(m.vert,m.frag,t);K.useProgram(pa.program);E.setVAO(null);ga=pa.id;(R=ea[ga])||(R=ea[ga]=e(pa));R.call(this,a);l.dirty=!0;E.setVAO(null);F.next=d;y.framebufferWidth=G;y.framebufferHeight=T;y.viewportWidth=c;y.viewportHeight=A;qa&&(x.cpuTime+=performance.now()-I)},scope:function(a,b,e){var d,f,k,h,n,p,B,C,z,D,m,q,u,T,H;d=a.framebuffer;f=F.getFramebuffer(d);d&&!f&&g.commandRaise(c,t);d=F.next;F.next=f;k=
y.framebufferWidth;y.framebufferWidth=f?f.width:y.drawingBufferWidth;h=y.framebufferHeight;y.framebufferHeight=f?f.height:y.drawingBufferHeight;n=y.framebufferWidth;p=y.framebufferHeight;f=y.viewportWidth;y.viewportWidth=n;B=y.viewportHeight;y.viewportHeight=p;C=Z[0];Z[0]=0;z=Z[1];Z[1]=0;D=Z[2];Z[2]=n;n=Z[3];Z[3]=p;m=y.framebufferWidth;q=y.framebufferHeight;p=G[0];G[0]=0;u=G[1];G[1]=0;T=G[2];G[2]=m;m=G[3];G[3]=q;if(q=l.profile)H=performance.now(),x.count++;l.dirty=!0;b(y,a,e);F.next=d;y.framebufferWidth=
k;y.framebufferHeight=h;y.viewportWidth=f;y.viewportHeight=B;Z[0]=C;Z[1]=z;Z[2]=D;Z[3]=n;G[0]=p;G[1]=u;G[2]=T;G[3]=m;q&&(x.cpuTime+=performance.now()-H);l.dirty=!0},batch:function(a,e){var g,c,h,D,y;if(l.dirty){g=q.dither;g!==l.dither&&(g?K.enable(3024):K.disable(3024),l.dither=g);g=q.blend_enable;g!==l.blend_enable&&(g?K.enable(3042):K.disable(3042),l.blend_enable=g);g=ia[0];h=ia[1];D=ia[2];y=ia[3];if(g!==C[0]||h!==C[1]||D!==C[2]||y!==C[3])K.blendColor(g,h,D,y),C[0]=g,C[1]=h,C[2]=D,C[3]=y;g=L[0];
h=L[1];if(g!==u[0]||h!==u[1])K.blendEquationSeparate(g,h),u[0]=g,u[1]=h;g=J[0];h=J[1];D=J[2];y=J[3];if(g!==aa[0]||h!==aa[1]||D!==aa[2]||y!==aa[3])K.blendFuncSeparate(g,h,D,y),aa[0]=g,aa[1]=h,aa[2]=D,aa[3]=y;g=q.depth_enable;g!==l.depth_enable&&(g?K.enable(2929):K.disable(2929),l.depth_enable=g);g=q.depth_func;g!==l.depth_func&&(K.depthFunc(g),l.depth_func=g);g=U[0];h=U[1];if(g!==p[0]||h!==p[1])K.depthRange(g,h),p[0]=g,p[1]=h;g=q.depth_mask;g!==l.depth_mask&&(K.depthMask(g),l.depth_mask=g);g=b[0];
h=b[1];D=b[2];y=b[3];if(g!==n[0]||h!==n[1]||D!==n[2]||y!==n[3])K.colorMask(g,h,D,y),n[0]=g,n[1]=h,n[2]=D,n[3]=y;g=q.cull_enable;g!==l.cull_enable&&(g?K.enable(2884):K.disable(2884),l.cull_enable=g);g=q.cull_face;g!==l.cull_face&&(K.cullFace(g),l.cull_face=g);g=q.frontFace;g!==l.frontFace&&(K.frontFace(g),l.frontFace=g);g=q.lineWidth;g!==l.lineWidth&&(K.lineWidth(g),l.lineWidth=g);g=q.polygonOffset_enable;g!==l.polygonOffset_enable&&(g?K.enable(32823):K.disable(32823),l.polygonOffset_enable=g);g=W[0];
h=W[1];if(g!==B[0]||h!==B[1])K.polygonOffset(g,h),B[0]=g,B[1]=h;g=q.sample_alpha;g!==l.sample_alpha&&(g?K.enable(32926):K.disable(32926),l.sample_alpha=g);g=q.sample_enable;g!==l.sample_enable&&(g?K.enable(32928):K.disable(32928),l.sample_enable=g);g=z[0];h=z[1];if(g!==Y[0]||h!==Y[1])K.sampleCoverage(g,h),Y[0]=g,Y[1]=h;g=q.stencil_enable;g!==l.stencil_enable&&(g?K.enable(2960):K.disable(2960),l.stencil_enable=g);g=q.stencil_mask;g!==l.stencil_mask&&(K.stencilMask(g),l.stencil_mask=g);g=k[0];h=k[1];
D=k[2];if(g!==V[0]||h!==V[1]||D!==V[2])K.stencilFunc(g,h,D),V[0]=g,V[1]=h,V[2]=D;g=H[0];h=H[1];D=H[2];y=H[3];if(g!==la[0]||h!==la[1]||D!==la[2]||y!==la[3])K.stencilOpSeparate(g,h,D,y),la[0]=g,la[1]=h,la[2]=D,la[3]=y;g=f[0];h=f[1];D=f[2];y=f[3];if(g!==M[0]||h!==M[1]||D!==M[2]||y!==M[3])K.stencilOpSeparate(g,h,D,y),M[0]=g,M[1]=h,M[2]=D,M[3]=y;g=q.scissor_enable;g!==l.scissor_enable&&(g?K.enable(3089):K.disable(3089),l.scissor_enable=g)}if(g=l.profile)c=performance.now(),x.count+=e;h=m.program(m.vert,
m.frag,t);K.useProgram(h.program);E.setVAO(null);D=h.id;(y=T[D])||(y=T[D]=d(h));y.call(this,a,e);l.dirty=!0;E.setVAO(null);g&&(x.cpuTime+=performance.now()-c)}}},$5:function(a,g,t,x,h,e){var c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,M,H,la,Z,X;c=a.context;d=a.current;y=a.framebuffer;l=a.gl;F=a.next;K=a.shader;q=a.vao;m=F.blend_color;E=d.blend_color;ia=F.blend_equation;C=d.blend_equation;L=F.blend_func;u=d.blend_func;J=F.colorMask;aa=d.colorMask;b=F.depth_range;n=d.depth_range;U=F.polygonOffset_offset;
p=d.polygonOffset_offset;W=F.sample_coverage;B=d.sample_coverage;z=F.scissor_box;Y=d.scissor_box;G=F.stencil_func;D=d.stencil_func;k=F.stencil_opBack;V=d.stencil_opBack;f=F.stencil_opFront;M=d.stencil_opFront;H=F.viewport;la=d.viewport;Z={};X={};return{draw:function(a){var e,g,c,r,P;e=y.next;e!==y.cur&&(e?l.bindFramebuffer(36160,e.framebuffer):l.bindFramebuffer(36160,null),y.cur=e);if(d.dirty){e=F.dither;e!==d.dither&&(e?l.enable(3024):l.disable(3024),d.dither=e);e=F.blend_enable;e!==d.blend_enable&&
(e?l.enable(3042):l.disable(3042),d.blend_enable=e);e=m[0];c=m[1];r=m[2];P=m[3];if(e!==E[0]||c!==E[1]||r!==E[2]||P!==E[3])l.blendColor(e,c,r,P),E[0]=e,E[1]=c,E[2]=r,E[3]=P;e=ia[0];c=ia[1];if(e!==C[0]||c!==C[1])l.blendEquationSeparate(e,c),C[0]=e,C[1]=c;e=L[0];c=L[1];r=L[2];P=L[3];if(e!==u[0]||c!==u[1]||r!==u[2]||P!==u[3])l.blendFuncSeparate(e,c,r,P),u[0]=e,u[1]=c,u[2]=r,u[3]=P;e=F.depth_enable;e!==d.depth_enable&&(e?l.enable(2929):l.disable(2929),d.depth_enable=e);e=F.depth_func;e!==d.depth_func&&
(l.depthFunc(e),d.depth_func=e);e=b[0];c=b[1];if(e!==n[0]||c!==n[1])l.depthRange(e,c),n[0]=e,n[1]=c;e=F.depth_mask;e!==d.depth_mask&&(l.depthMask(e),d.depth_mask=e);e=J[0];c=J[1];r=J[2];P=J[3];if(e!==aa[0]||c!==aa[1]||r!==aa[2]||P!==aa[3])l.colorMask(e,c,r,P),aa[0]=e,aa[1]=c,aa[2]=r,aa[3]=P;e=F.cull_enable;e!==d.cull_enable&&(e?l.enable(2884):l.disable(2884),d.cull_enable=e);e=F.cull_face;e!==d.cull_face&&(l.cullFace(e),d.cull_face=e);e=F.frontFace;e!==d.frontFace&&(l.frontFace(e),d.frontFace=e);
e=F.lineWidth;e!==d.lineWidth&&(l.lineWidth(e),d.lineWidth=e);e=F.polygonOffset_enable;e!==d.polygonOffset_enable&&(e?l.enable(32823):l.disable(32823),d.polygonOffset_enable=e);e=U[0];c=U[1];if(e!==p[0]||c!==p[1])l.polygonOffset(e,c),p[0]=e,p[1]=c;e=F.sample_alpha;e!==d.sample_alpha&&(e?l.enable(32926):l.disable(32926),d.sample_alpha=e);e=F.sample_enable;e!==d.sample_enable&&(e?l.enable(32928):l.disable(32928),d.sample_enable=e);e=W[0];c=W[1];if(e!==B[0]||c!==B[1])l.sampleCoverage(e,c),B[0]=e,B[1]=
c;e=F.stencil_enable;e!==d.stencil_enable&&(e?l.enable(2960):l.disable(2960),d.stencil_enable=e);e=F.stencil_mask;e!==d.stencil_mask&&(l.stencilMask(e),d.stencil_mask=e);e=G[0];c=G[1];r=G[2];if(e!==D[0]||c!==D[1]||r!==D[2])l.stencilFunc(e,c,r),D[0]=e,D[1]=c,D[2]=r;e=f[0];c=f[1];r=f[2];P=f[3];if(e!==M[0]||c!==M[1]||r!==M[2]||P!==M[3])l.stencilOpSeparate(e,c,r,P),M[0]=e,M[1]=c,M[2]=r,M[3]=P;e=k[0];c=k[1];r=k[2];P=k[3];if(e!==V[0]||c!==V[1]||r!==V[2]||P!==V[3])l.stencilOpSeparate(e,c,r,P),V[0]=e,V[1]=
c,V[2]=r,V[3]=P;e=F.scissor_enable;e!==d.scissor_enable&&(e?l.enable(3089):l.disable(3089),d.scissor_enable=e);e=z[0];c=z[1];r=z[2];P=z[3];if(e!==Y[0]||c!==Y[1]||r!==Y[2]||P!==Y[3])l.scissor(e,c,r,P),Y[0]=e,Y[1]=c,Y[2]=r,Y[3]=P;e=H[0];c=H[1];r=H[2];P=H[3];if(e!==la[0]||c!==la[1]||r!==la[2]||P!==la[3])l.viewport(e,c,r,P),la[0]=e,la[1]=c,la[2]=r,la[3]=P;d.dirty=!1}if(e=d.profile)g=performance.now(),x.count++;c=K.program(K.vert,K.frag,t);l.useProgram(c.program);q.setVAO(null);r=c.id;(P=Z[r])||(P=Z[r]=
h(c));P.call(this,a);q.setVAO(null);e&&(x.cpuTime+=performance.now()-g)},scope:function(a,e,b){var f,g;if(f=d.profile)g=performance.now(),x.count++;e(c,a,b);f&&(x.cpuTime+=performance.now()-g)},batch:function(a,g){var c,h,r,P,Q;c=y.next;c!==y.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),y.cur=c);if(d.dirty){c=F.dither;c!==d.dither&&(c?l.enable(3024):l.disable(3024),d.dither=c);c=F.blend_enable;c!==d.blend_enable&&(c?l.enable(3042):l.disable(3042),d.blend_enable=c);
c=m[0];r=m[1];P=m[2];Q=m[3];if(c!==E[0]||r!==E[1]||P!==E[2]||Q!==E[3])l.blendColor(c,r,P,Q),E[0]=c,E[1]=r,E[2]=P,E[3]=Q;c=ia[0];r=ia[1];if(c!==C[0]||r!==C[1])l.blendEquationSeparate(c,r),C[0]=c,C[1]=r;c=L[0];r=L[1];P=L[2];Q=L[3];if(c!==u[0]||r!==u[1]||P!==u[2]||Q!==u[3])l.blendFuncSeparate(c,r,P,Q),u[0]=c,u[1]=r,u[2]=P,u[3]=Q;c=F.depth_enable;c!==d.depth_enable&&(c?l.enable(2929):l.disable(2929),d.depth_enable=c);c=F.depth_func;c!==d.depth_func&&(l.depthFunc(c),d.depth_func=c);c=b[0];r=b[1];if(c!==
n[0]||r!==n[1])l.depthRange(c,r),n[0]=c,n[1]=r;c=F.depth_mask;c!==d.depth_mask&&(l.depthMask(c),d.depth_mask=c);c=J[0];r=J[1];P=J[2];Q=J[3];if(c!==aa[0]||r!==aa[1]||P!==aa[2]||Q!==aa[3])l.colorMask(c,r,P,Q),aa[0]=c,aa[1]=r,aa[2]=P,aa[3]=Q;c=F.cull_enable;c!==d.cull_enable&&(c?l.enable(2884):l.disable(2884),d.cull_enable=c);c=F.cull_face;c!==d.cull_face&&(l.cullFace(c),d.cull_face=c);c=F.frontFace;c!==d.frontFace&&(l.frontFace(c),d.frontFace=c);c=F.lineWidth;c!==d.lineWidth&&(l.lineWidth(c),d.lineWidth=
c);c=F.polygonOffset_enable;c!==d.polygonOffset_enable&&(c?l.enable(32823):l.disable(32823),d.polygonOffset_enable=c);c=U[0];r=U[1];if(c!==p[0]||r!==p[1])l.polygonOffset(c,r),p[0]=c,p[1]=r;c=F.sample_alpha;c!==d.sample_alpha&&(c?l.enable(32926):l.disable(32926),d.sample_alpha=c);c=F.sample_enable;c!==d.sample_enable&&(c?l.enable(32928):l.disable(32928),d.sample_enable=c);c=W[0];r=W[1];if(c!==B[0]||r!==B[1])l.sampleCoverage(c,r),B[0]=c,B[1]=r;c=F.stencil_enable;c!==d.stencil_enable&&(c?l.enable(2960):
l.disable(2960),d.stencil_enable=c);c=F.stencil_mask;c!==d.stencil_mask&&(l.stencilMask(c),d.stencil_mask=c);c=G[0];r=G[1];P=G[2];if(c!==D[0]||r!==D[1]||P!==D[2])l.stencilFunc(c,r,P),D[0]=c,D[1]=r,D[2]=P;c=f[0];r=f[1];P=f[2];Q=f[3];if(c!==M[0]||r!==M[1]||P!==M[2]||Q!==M[3])l.stencilOpSeparate(c,r,P,Q),M[0]=c,M[1]=r,M[2]=P,M[3]=Q;c=k[0];r=k[1];P=k[2];Q=k[3];if(c!==V[0]||r!==V[1]||P!==V[2]||Q!==V[3])l.stencilOpSeparate(c,r,P,Q),V[0]=c,V[1]=r,V[2]=P,V[3]=Q;c=F.scissor_enable;c!==d.scissor_enable&&(c?
l.enable(3089):l.disable(3089),d.scissor_enable=c);c=z[0];r=z[1];P=z[2];Q=z[3];if(c!==Y[0]||r!==Y[1]||P!==Y[2]||Q!==Y[3])l.scissor(c,r,P,Q),Y[0]=c,Y[1]=r,Y[2]=P,Y[3]=Q;c=H[0];r=H[1];P=H[2];Q=H[3];if(c!==la[0]||r!==la[1]||P!==la[2]||Q!==la[3])l.viewport(c,r,P,Q),la[0]=c,la[1]=r,la[2]=P,la[3]=Q;d.dirty=!1}if(c=d.profile)h=performance.now(),x.count+=g;r=K.program(K.vert,K.frag,t);l.useProgram(r.program);q.setVAO(null);P=r.id;(Q=X[P])||(Q=X[P]=e(r));Q.call(this,a,g);q.setVAO(null);c&&(x.cpuTime+=performance.now()-
h)}}},"$26,color,freq,phase,projection,time,view":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,M){var f,Ea,H,la,Z,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da,lb,Ib,ba;f=a.attributes;Ea=a.context;H=a.current;la=a.draw;Z=a.elements;X=a.framebuffer;ea=a.gl;T=a.isArrayLike;S=a.next;N=a.shader;r=a.uniforms;P=a.vao;Q=S.blend_color;qa=H.blend_color;pa=S.blend_equation;A=H.blend_equation;I=S.blend_func;ga=H.blend_func;R=S.colorMask;na=
H.colorMask;ra=S.depth_range;Ba=H.depth_range;ya=S.polygonOffset_offset;ha=H.polygonOffset_offset;Ca=S.sample_coverage;ja=H.sample_coverage;oa=S.scissor_box;za=H.scissor_box;Ma=S.stencil_func;Aa=H.stencil_func;Bb=S.stencil_opBack;Xa=H.stencil_opBack;v=S.stencil_opFront;w=H.stencil_opFront;da=S.viewport;ua=H.viewport;Da=new Float32Array(16);lb=new Float32Array(16);Ib=new Float32Array(16);ba=new Float32Array(16);return{draw:function(a){var b,n,r,p;b=X.next;b!==X.cur&&(b?ea.bindFramebuffer(36160,b.framebuffer):
ea.bindFramebuffer(36160,null),X.cur=b);if(H.dirty){var B;b=S.dither;b!==H.dither&&(b?ea.enable(3024):ea.disable(3024),H.dither=b);b=S.blend_enable;b!==H.blend_enable&&(b?ea.enable(3042):ea.disable(3042),H.blend_enable=b);b=Q[0];r=Q[1];p=Q[2];B=Q[3];if(b!==qa[0]||r!==qa[1]||p!==qa[2]||B!==qa[3])ea.blendColor(b,r,p,B),qa[0]=b,qa[1]=r,qa[2]=p,qa[3]=B;b=pa[0];r=pa[1];if(b!==A[0]||r!==A[1])ea.blendEquationSeparate(b,r),A[0]=b,A[1]=r;b=I[0];r=I[1];p=I[2];B=I[3];if(b!==ga[0]||r!==ga[1]||p!==ga[2]||B!==
ga[3])ea.blendFuncSeparate(b,r,p,B),ga[0]=b,ga[1]=r,ga[2]=p,ga[3]=B;b=S.depth_enable;b!==H.depth_enable&&(b?ea.enable(2929):ea.disable(2929),H.depth_enable=b);b=S.depth_func;b!==H.depth_func&&(ea.depthFunc(b),H.depth_func=b);b=ra[0];r=ra[1];if(b!==Ba[0]||r!==Ba[1])ea.depthRange(b,r),Ba[0]=b,Ba[1]=r;b=S.depth_mask;b!==H.depth_mask&&(ea.depthMask(b),H.depth_mask=b);b=R[0];r=R[1];p=R[2];B=R[3];if(b!==na[0]||r!==na[1]||p!==na[2]||B!==na[3])ea.colorMask(b,r,p,B),na[0]=b,na[1]=r,na[2]=p,na[3]=B;b=S.cull_enable;
b!==H.cull_enable&&(b?ea.enable(2884):ea.disable(2884),H.cull_enable=b);b=S.cull_face;b!==H.cull_face&&(ea.cullFace(b),H.cull_face=b);b=S.frontFace;b!==H.frontFace&&(ea.frontFace(b),H.frontFace=b);b=S.lineWidth;b!==H.lineWidth&&(ea.lineWidth(b),H.lineWidth=b);b=S.polygonOffset_enable;b!==H.polygonOffset_enable&&(b?ea.enable(32823):ea.disable(32823),H.polygonOffset_enable=b);b=ya[0];r=ya[1];if(b!==ha[0]||r!==ha[1])ea.polygonOffset(b,r),ha[0]=b,ha[1]=r;b=S.sample_alpha;b!==H.sample_alpha&&(b?ea.enable(32926):
ea.disable(32926),H.sample_alpha=b);b=S.sample_enable;b!==H.sample_enable&&(b?ea.enable(32928):ea.disable(32928),H.sample_enable=b);b=Ca[0];r=Ca[1];if(b!==ja[0]||r!==ja[1])ea.sampleCoverage(b,r),ja[0]=b,ja[1]=r;b=S.stencil_enable;b!==H.stencil_enable&&(b?ea.enable(2960):ea.disable(2960),H.stencil_enable=b);b=S.stencil_mask;b!==H.stencil_mask&&(ea.stencilMask(b),H.stencil_mask=b);b=Ma[0];r=Ma[1];p=Ma[2];if(b!==Aa[0]||r!==Aa[1]||p!==Aa[2])ea.stencilFunc(b,r,p),Aa[0]=b,Aa[1]=r,Aa[2]=p;b=v[0];r=v[1];
p=v[2];B=v[3];if(b!==w[0]||r!==w[1]||p!==w[2]||B!==w[3])ea.stencilOpSeparate(b,r,p,B),w[0]=b,w[1]=r,w[2]=p,w[3]=B;b=Bb[0];r=Bb[1];p=Bb[2];B=Bb[3];if(b!==Xa[0]||r!==Xa[1]||p!==Xa[2]||B!==Xa[3])ea.stencilOpSeparate(b,r,p,B),Xa[0]=b,Xa[1]=r,Xa[2]=p,Xa[3]=B;b=S.scissor_enable;b!==H.scissor_enable&&(b?ea.enable(3089):ea.disable(3089),H.scissor_enable=b);b=oa[0];r=oa[1];p=oa[2];B=oa[3];if(b!==za[0]||r!==za[1]||p!==za[2]||B!==za[3])ea.scissor(b,r,p,B),za[0]=b,za[1]=r,za[2]=p,za[3]=B;b=da[0];r=da[1];p=da[2];
B=da[3];if(b!==ua[0]||r!==ua[1]||p!==ua[2]||B!==ua[3])ea.viewport(b,r,p,B),ua[0]=b,ua[1]=r,ua[2]=p,ua[3]=B;H.dirty=!1}if(b=H.profile)n=performance.now(),x.count++;ea.useProgram(h.program);P.setVAO(null);r=Y.location;p=f[r];p.buffer||ea.enableVertexAttribArray(r);if(5126!==p.type||4!==p.size||p.buffer!==e||!1!==p.normalized||0!==p.offset||44!==p.stride)ea.bindBuffer(34962,e.buffer),ea.vertexAttribPointer(r,4,5126,!1,44,0),p.type=5126,p.size=4,p.buffer=e,p.normalized=!1,p.offset=0,p.stride=44;r=G.location;
p=f[r];p.buffer||ea.enableVertexAttribArray(r);if(5126!==p.type||4!==p.size||p.buffer!==c||!1!==p.normalized||16!==p.offset||44!==p.stride)ea.bindBuffer(34962,c.buffer),ea.vertexAttribPointer(r,4,5126,!1,44,16),p.type=5126,p.size=4,p.buffer=c,p.normalized=!1,p.offset=16,p.stride=44;r=z.location;p=f[r];p.buffer||ea.enableVertexAttribArray(r);if(5126!==p.type||3!==p.size||p.buffer!==d||!1!==p.normalized||32!==p.offset||44!==p.stride)ea.bindBuffer(34962,d.buffer),ea.vertexAttribPointer(r,3,5126,!1,44,
32),p.type=5126,p.size=3,p.buffer=d,p.normalized=!1,p.offset=32,p.stride=44;r=y.call(this,Ea,a,0);"number"!==typeof r&&g.commandRaise(l,t);ea.uniform1f(k.location,r);r=F.call(this,Ea,a,0);T(r)&&16===r.length||g.commandRaise(K,t);ea.uniformMatrix4fv(M.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(Da[0]=r[0],Da[1]=r[1],Da[2]=r[2],Da[3]=r[3],Da[4]=r[4],Da[5]=r[5],Da[6]=r[6],Da[7]=r[7],Da[8]=r[8],Da[9]=r[9],Da[10]=r[10],Da[11]=r[11],Da[12]=r[12],Da[13]=r[13],Da[14]=r[14],Da[15]=r[15],Da));
a=q.call(this,Ea,a,0);T(a)&&16===a.length||g.commandRaise(m,t);ea.uniformMatrix4fv(D.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(lb[0]=a[0],lb[1]=a[1],lb[2]=a[2],lb[3]=a[3],lb[4]=a[4],lb[5]=a[5],lb[6]=a[6],lb[7]=a[7],lb[8]=a[8],lb[9]=a[9],lb[10]=a[10],lb[11]=a[11],lb[12]=a[12],lb[13]=a[13],lb[14]=a[14],lb[15]=a[15],lb));(a=la.elements)?ea.bindBuffer(34963,a.buffer.buffer):P.currentVAO&&(a=Z.getElements(P.currentVAO.elements))&&ea.bindBuffer(34963,a.buffer.buffer);r=la.offset;a?ea.drawElements(0,
1E4,a.type,r<<(a.type-5121>>1)):ea.drawArrays(0,r,1E4);P.setVAO(null);b&&(x.cpuTime+=performance.now()-n)},scope:function(a,b,f){var g,k,h,n,v,A,w,t,p,da,B,z,Aa,D,y,l,I,R,G,m,q,ha,ba,Bb,Ma,F,K,P,Q,ga,ua,S,ya,aa,ra,U,T,W,qa,ja,X,M,Y,V,ea;if(g=H.profile)k=performance.now(),x.count++;h=la.count;la.count=1E4;n=la.primitive;la.primitive=0;v=E.call(this,Ea,a,f);A=r[5];r[5]=v;w=ia.call(this,Ea,a,f);v=r[3];r[3]=w;t=C.call(this,Ea,a,f);w=r[4];r[4]=t;t=L.buffer;L.buffer=d;p=L.divisor;L.divisor=0;da=L.normalized;
L.normalized=!1;B=L.offset;L.offset=32;z=L.size;L.size=0;Aa=L.state;L.state=1;D=L.stride;L.stride=44;y=L.type;L.type=5126;l=L.w;L.w=0;I=L.x;L.x=0;R=L.y;L.y=0;G=L.z;L.z=0;m=u.buffer;u.buffer=e;q=u.divisor;u.divisor=0;ha=u.normalized;u.normalized=!1;ba=u.offset;u.offset=0;Bb=u.size;u.size=0;Ma=u.state;u.state=1;F=u.stride;u.stride=44;K=u.type;u.type=5126;P=u.w;u.w=0;Q=u.x;u.x=0;ga=u.y;u.y=0;ua=u.z;u.z=0;S=J.buffer;J.buffer=c;ya=J.divisor;J.divisor=0;aa=J.normalized;J.normalized=!1;ra=J.offset;J.offset=
16;U=J.size;J.size=0;T=J.state;J.state=1;W=J.stride;J.stride=44;qa=J.type;J.type=5126;ja=J.w;J.w=0;X=J.x;J.x=0;M=J.y;J.y=0;Y=J.z;J.z=0;V=N.vert;N.vert=2;ea=N.frag;N.frag=1;b(Ea,a,f);g&&(x.cpuTime+=performance.now()-k);la.count=h;la.primitive=n;r[5]=A;r[3]=v;r[4]=w;L.buffer=t;L.divisor=p;L.normalized=da;L.offset=B;L.size=z;L.state=Aa;L.stride=D;L.type=y;L.w=l;L.x=I;L.y=R;L.z=G;u.buffer=m;u.divisor=q;u.normalized=ha;u.offset=ba;u.size=Bb;u.state=Ma;u.stride=F;u.type=K;u.w=P;u.x=Q;u.y=ga;u.z=ua;J.buffer=
S;J.divisor=ya;J.normalized=aa;J.offset=ra;J.size=U;J.state=T;J.stride=W;J.type=qa;J.w=ja;J.x=X;J.y=M;J.z=Y;N.vert=V;N.frag=ea},batch:function(a,h){var r,C,y;r=X.next;r!==X.cur&&(r?ea.bindFramebuffer(36160,r.framebuffer):ea.bindFramebuffer(36160,null),X.cur=r);if(H.dirty){var l,m,q;r=S.dither;r!==H.dither&&(r?ea.enable(3024):ea.disable(3024),H.dither=r);r=S.blend_enable;r!==H.blend_enable&&(r?ea.enable(3042):ea.disable(3042),H.blend_enable=r);r=Q[0];l=Q[1];m=Q[2];q=Q[3];if(r!==qa[0]||l!==qa[1]||m!==
qa[2]||q!==qa[3])ea.blendColor(r,l,m,q),qa[0]=r,qa[1]=l,qa[2]=m,qa[3]=q;r=pa[0];l=pa[1];if(r!==A[0]||l!==A[1])ea.blendEquationSeparate(r,l),A[0]=r,A[1]=l;r=I[0];l=I[1];m=I[2];q=I[3];if(r!==ga[0]||l!==ga[1]||m!==ga[2]||q!==ga[3])ea.blendFuncSeparate(r,l,m,q),ga[0]=r,ga[1]=l,ga[2]=m,ga[3]=q;r=S.depth_enable;r!==H.depth_enable&&(r?ea.enable(2929):ea.disable(2929),H.depth_enable=r);r=S.depth_func;r!==H.depth_func&&(ea.depthFunc(r),H.depth_func=r);r=ra[0];l=ra[1];if(r!==Ba[0]||l!==Ba[1])ea.depthRange(r,
l),Ba[0]=r,Ba[1]=l;r=S.depth_mask;r!==H.depth_mask&&(ea.depthMask(r),H.depth_mask=r);r=R[0];l=R[1];m=R[2];q=R[3];if(r!==na[0]||l!==na[1]||m!==na[2]||q!==na[3])ea.colorMask(r,l,m,q),na[0]=r,na[1]=l,na[2]=m,na[3]=q;r=S.cull_enable;r!==H.cull_enable&&(r?ea.enable(2884):ea.disable(2884),H.cull_enable=r);r=S.cull_face;r!==H.cull_face&&(ea.cullFace(r),H.cull_face=r);r=S.frontFace;r!==H.frontFace&&(ea.frontFace(r),H.frontFace=r);r=S.lineWidth;r!==H.lineWidth&&(ea.lineWidth(r),H.lineWidth=r);r=S.polygonOffset_enable;
r!==H.polygonOffset_enable&&(r?ea.enable(32823):ea.disable(32823),H.polygonOffset_enable=r);r=ya[0];l=ya[1];if(r!==ha[0]||l!==ha[1])ea.polygonOffset(r,l),ha[0]=r,ha[1]=l;r=S.sample_alpha;r!==H.sample_alpha&&(r?ea.enable(32926):ea.disable(32926),H.sample_alpha=r);r=S.sample_enable;r!==H.sample_enable&&(r?ea.enable(32928):ea.disable(32928),H.sample_enable=r);r=Ca[0];l=Ca[1];if(r!==ja[0]||l!==ja[1])ea.sampleCoverage(r,l),ja[0]=r,ja[1]=l;r=S.stencil_enable;r!==H.stencil_enable&&(r?ea.enable(2960):ea.disable(2960),
H.stencil_enable=r);r=S.stencil_mask;r!==H.stencil_mask&&(ea.stencilMask(r),H.stencil_mask=r);r=Ma[0];l=Ma[1];m=Ma[2];if(r!==Aa[0]||l!==Aa[1]||m!==Aa[2])ea.stencilFunc(r,l,m),Aa[0]=r,Aa[1]=l,Aa[2]=m;r=v[0];l=v[1];m=v[2];q=v[3];if(r!==w[0]||l!==w[1]||m!==w[2]||q!==w[3])ea.stencilOpSeparate(r,l,m,q),w[0]=r,w[1]=l,w[2]=m,w[3]=q;r=Bb[0];l=Bb[1];m=Bb[2];q=Bb[3];if(r!==Xa[0]||l!==Xa[1]||m!==Xa[2]||q!==Xa[3])ea.stencilOpSeparate(r,l,m,q),Xa[0]=r,Xa[1]=l,Xa[2]=m,Xa[3]=q;r=S.scissor_enable;r!==H.scissor_enable&&
(r?ea.enable(3089):ea.disable(3089),H.scissor_enable=r);r=oa[0];l=oa[1];m=oa[2];q=oa[3];if(r!==za[0]||l!==za[1]||m!==za[2]||q!==za[3])ea.scissor(r,l,m,q),za[0]=r,za[1]=l,za[2]=m,za[3]=q;r=da[0];l=da[1];m=da[2];q=da[3];if(r!==ua[0]||l!==ua[1]||m!==ua[2]||q!==ua[3])ea.viewport(r,l,m,q),ua[0]=r,ua[1]=l,ua[2]=m,ua[3]=q;H.dirty=!1}if(r=H.profile)C=performance.now(),x.count+=h;ea.useProgram(aa.program);P.setVAO(null);l=Y.location;m=f[l];m.buffer||ea.enableVertexAttribArray(l);if(5126!==m.type||4!==m.size||
m.buffer!==e||!1!==m.normalized||0!==m.offset||44!==m.stride)ea.bindBuffer(34962,e.buffer),ea.vertexAttribPointer(l,4,5126,!1,44,0),m.type=5126,m.size=4,m.buffer=e,m.normalized=!1,m.offset=0,m.stride=44;l=G.location;m=f[l];m.buffer||ea.enableVertexAttribArray(l);if(5126!==m.type||4!==m.size||m.buffer!==c||!1!==m.normalized||16!==m.offset||44!==m.stride)ea.bindBuffer(34962,c.buffer),ea.vertexAttribPointer(l,4,5126,!1,44,16),m.type=5126,m.size=4,m.buffer=c,m.normalized=!1,m.offset=16,m.stride=44;l=
z.location;m=f[l];m.buffer||ea.enableVertexAttribArray(l);if(5126!==m.type||3!==m.size||m.buffer!==d||!1!==m.normalized||32!==m.offset||44!==m.stride)ea.bindBuffer(34962,d.buffer),ea.vertexAttribPointer(l,3,5126,!1,44,32),m.type=5126,m.size=3,m.buffer=d,m.normalized=!1,m.offset=32,m.stride=44;l=b.call(this,Ea,void 0,y);"number"!==typeof l&&g.commandRaise(n,t);ea.uniform1f(k.location,l);l=U.call(this,Ea,void 0,y);T(l)&&16===l.length||g.commandRaise(p,t);ea.uniformMatrix4fv(M.location,!1,Array.isArray(l)||
l instanceof Float32Array?l:(Ib[0]=l[0],Ib[1]=l[1],Ib[2]=l[2],Ib[3]=l[3],Ib[4]=l[4],Ib[5]=l[5],Ib[6]=l[6],Ib[7]=l[7],Ib[8]=l[8],Ib[9]=l[9],Ib[10]=l[10],Ib[11]=l[11],Ib[12]=l[12],Ib[13]=l[13],Ib[14]=l[14],Ib[15]=l[15],Ib));y=W.call(this,Ea,void 0,y);T(y)&&16===y.length||g.commandRaise(B,t);ea.uniformMatrix4fv(D.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(ba[0]=y[0],ba[1]=y[1],ba[2]=y[2],ba[3]=y[3],ba[4]=y[4],ba[5]=y[5],ba[6]=y[6],ba[7]=y[7],ba[8]=y[8],ba[9]=y[9],ba[10]=y[10],ba[11]=
y[11],ba[12]=y[12],ba[13]=y[13],ba[14]=y[14],ba[15]=y[15],ba));(l=la.elements)?ea.bindBuffer(34963,l.buffer.buffer):P.currentVAO&&(l=Z.getElements(P.currentVAO.elements))&&ea.bindBuffer(34963,l.buffer.buffer);m=la.offset;for(y=0;y<h;++y)l?ea.drawElements(0,1E4,l.type,m<<(l.type-5121>>1)):ea.drawArrays(0,m,1E4);P.setVAO(null);r&&(x.cpuTime+=performance.now()-C)}}},"$34,atlas,normal,position,projection,uv,view":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,ia,C,L,u,J,aa,b,n,U,p,W,B,z,M,G,D,k,V,f,Ea,H,la,Z,
X,ea,T){var S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da,lb,Ib,ba,O,va,Fa,sa,xa,wa,ka,ca,ta,ma,Ga;S=a.attributes;N=a.buffer;r=a.context;P=a.current;Q=a.draw;qa=a.elements;pa=a.framebuffer;A=a.gl;I=a.isArrayLike;ga=a.isBufferArgs;R=a.next;na=a.shader;ra=a.uniforms;Ba=a.vao;ya=R.blend_color;ha=P.blend_color;Ca=R.blend_equation;ja=P.blend_equation;oa=R.blend_func;za=P.blend_func;Ma=R.colorMask;Aa=P.colorMask;Bb=R.depth_range;Xa=P.depth_range;v=R.polygonOffset_offset;w=
P.polygonOffset_offset;da=R.sample_coverage;ua=P.sample_coverage;Da=R.scissor_box;lb=P.scissor_box;Ib=R.stencil_func;ba=P.stencil_func;O=R.stencil_opBack;va=P.stencil_opBack;Fa=R.stencil_opFront;sa=P.stencil_opFront;xa=R.viewport;wa=P.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ca=new Float32Array(16);ta=new Float32Array(16);ma=new Float32Array(16);Ga=new Float32Array(16);return{draw:function(a){var b,f,k,n,p,B,C,z,D,G,u,J,L,Q,aa,ra,U,
W,ia,M,Y,V,na,Ea,ma,Ga,fb,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb,Ya,ob;b=r.view;f=h.call(this,r,a,0);r.view=f;k=pa.next;k!==pa.cur&&(k?A.bindFramebuffer(36160,k.framebuffer):A.bindFramebuffer(36160,null),pa.cur=k);if(P.dirty){var Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a;Za=R.dither;Za!==P.dither&&(Za?A.enable(3024):A.disable(3024),
P.dither=Za);Nc=R.blend_enable;Nc!==P.blend_enable&&(Nc?A.enable(3042):A.disable(3042),P.blend_enable=Nc);Ob=ya[0];Jb=ya[1];rc=ya[2];Pb=ya[3];if(Ob!==ha[0]||Jb!==ha[1]||rc!==ha[2]||Pb!==ha[3])A.blendColor(Ob,Jb,rc,Pb),ha[0]=Ob,ha[1]=Jb,ha[2]=rc,ha[3]=Pb;jb=Ca[0];Hb=Ca[1];if(jb!==ja[0]||Hb!==ja[1])A.blendEquationSeparate(jb,Hb),ja[0]=jb,ja[1]=Hb;Eb=oa[0];wb=oa[1];hb=oa[2];Zb=oa[3];if(Eb!==za[0]||wb!==za[1]||hb!==za[2]||Zb!==za[3])A.blendFuncSeparate(Eb,wb,hb,Zb),za[0]=Eb,za[1]=wb,za[2]=hb,za[3]=Zb;
Qb=R.depth_enable;Qb!==P.depth_enable&&(Qb?A.enable(2929):A.disable(2929),P.depth_enable=Qb);qb=R.depth_func;qb!==P.depth_func&&(A.depthFunc(qb),P.depth_func=qb);Ua=Bb[0];Vb=Bb[1];if(Ua!==Xa[0]||Vb!==Xa[1])A.depthRange(Ua,Vb),Xa[0]=Ua,Xa[1]=Vb;zb=R.depth_mask;zb!==P.depth_mask&&(A.depthMask(zb),P.depth_mask=zb);hc=Ma[0];ib=Ma[1];pb=Ma[2];Ia=Ma[3];if(hc!==Aa[0]||ib!==Aa[1]||pb!==Aa[2]||Ia!==Aa[3])A.colorMask(hc,ib,pb,Ia),Aa[0]=hc,Aa[1]=ib,Aa[2]=pb,Aa[3]=Ia;rb=R.frontFace;rb!==P.frontFace&&(A.frontFace(rb),
P.frontFace=rb);Ja=R.lineWidth;Ja!==P.lineWidth&&(A.lineWidth(Ja),P.lineWidth=Ja);cb=R.polygonOffset_enable;cb!==P.polygonOffset_enable&&(cb?A.enable(32823):A.disable(32823),P.polygonOffset_enable=cb);eb=v[0];Ka=v[1];if(eb!==w[0]||Ka!==w[1])A.polygonOffset(eb,Ka),w[0]=eb,w[1]=Ka;kb=R.sample_alpha;kb!==P.sample_alpha&&(kb?A.enable(32926):A.disable(32926),P.sample_alpha=kb);Sa=R.sample_enable;Sa!==P.sample_enable&&(Sa?A.enable(32928):A.disable(32928),P.sample_enable=Sa);tb=da[0];sb=da[1];if(tb!==ua[0]||
sb!==ua[1])A.sampleCoverage(tb,sb),ua[0]=tb,ua[1]=sb;Oa=R.stencil_enable;Oa!==P.stencil_enable&&(Oa?A.enable(2960):A.disable(2960),P.stencil_enable=Oa);Cc=R.stencil_mask;Cc!==P.stencil_mask&&(A.stencilMask(Cc),P.stencil_mask=Cc);Qa=Ib[0];Kb=Ib[1];Fb=Ib[2];if(Qa!==ba[0]||Kb!==ba[1]||Fb!==ba[2])A.stencilFunc(Qa,Kb,Fb),ba[0]=Qa,ba[1]=Kb,ba[2]=Fb;La=Fa[0];Hd=Fa[1];Va=Fa[2];Lb=Fa[3];if(La!==sa[0]||Hd!==sa[1]||Va!==sa[2]||Lb!==sa[3])A.stencilOpSeparate(La,Hd,Va,Lb),sa[0]=La,sa[1]=Hd,sa[2]=Va,sa[3]=Lb;Mb=
O[0];mb=O[1];Na=O[2];$b=O[3];if(Mb!==va[0]||mb!==va[1]||Na!==va[2]||$b!==va[3])A.stencilOpSeparate(Mb,mb,Na,$b),va[0]=Mb,va[1]=mb,va[2]=Na,va[3]=$b;Pa=R.scissor_enable;Pa!==P.scissor_enable&&(Pa?A.enable(3089):A.disable(3089),P.scissor_enable=Pa);ub=Da[0];vb=Da[1];Ra=Da[2];nb=Da[3];if(ub!==lb[0]||vb!==lb[1]||Ra!==lb[2]||nb!==lb[3])A.scissor(ub,vb,Ra,nb),lb[0]=ub,lb[1]=vb,lb[2]=Ra,lb[3]=nb;ec=xa[0];Ac=xa[1];uc=xa[2];$a=xa[3];if(ec!==wa[0]||Ac!==wa[1]||uc!==wa[2]||$a!==wa[3])A.viewport(ec,Ac,uc,$a),
wa[0]=ec,wa[1]=Ac,wa[2]=uc,wa[3]=$a}A.enable(2884);P.cull_enable=!0;A.cullFace(1029);P.cull_face=1029;if(n=P.profile)p=performance.now(),x.count++;A.useProgram(e.program);Ba.setVAO(null);(B=a.position)&&("object"===typeof B||"function"===typeof B)&&(ga(B)||N.getBuffer(B)||N.getBuffer(B.buffer)||ga(B.buffer)||"constant"in B&&("number"===typeof B.constant||I(B.constant)))||g.commandRaise(c,t);C=!1;z=null;D=!1;u=G=0;J=1;L=0;Q=5126;W=U=ra=aa=0;ga(B)?(C=!0,z=N.createStream(34962,B),Q=z.dtype):(z=N.getBuffer(B))?
Q=z.dtype:"constant"in B?(J=2,"number"===typeof B.constant?(ra=B.constant,U=W=aa=0):(ra=0<B.constant.length?B.constant[0]:0,U=1<B.constant.length?B.constant[1]:0,W=2<B.constant.length?B.constant[2]:0,aa=3<B.constant.length?B.constant[3]:0)):(z=ga(B.buffer)?N.createStream(34962,B.buffer):N.getBuffer(B.buffer),Q="type"in B?ka[B.type]:z.dtype,D=!!B.normalized,u=B.size|0,G=B.offset|0,L=B.stride|0);ia=Z.location;M=S[ia];if(1===J){if(M.buffer||A.enableVertexAttribArray(ia),Y=u||3,M.type!==Q||M.size!==Y||
M.buffer!==z||M.normalized!==D||M.offset!==G||M.stride!==L)A.bindBuffer(34962,z.buffer),A.vertexAttribPointer(ia,Y,Q,D,L,G),M.type=Q,M.size=Y,M.buffer=z,M.normalized=D,M.offset=G,M.stride=L}else if(M.buffer&&(A.disableVertexAttribArray(ia),M.buffer=null),M.x!==ra||M.y!==U||M.z!==W||M.w!==aa)A.vertexAttrib4f(ia,ra,U,W,aa),M.x=ra,M.y=U,M.z=W,M.w=aa;(V=a.normal)&&("object"===typeof V||"function"===typeof V)&&(ga(V)||N.getBuffer(V)||N.getBuffer(V.buffer)||ga(V.buffer)||"constant"in V&&("number"===typeof V.constant||
I(V.constant)))||g.commandRaise(d,t);na=!1;Ea=null;ma=!1;fb=Ga=0;$d=1;nd=0;bd=5126;Fc=pd=Mc=rd=0;ga(V)?(na=!0,Ea=N.createStream(34962,V),bd=Ea.dtype):(Ea=N.getBuffer(V))?bd=Ea.dtype:"constant"in V?($d=2,"number"===typeof V.constant?(Mc=V.constant,pd=Fc=rd=0):(Mc=0<V.constant.length?V.constant[0]:0,pd=1<V.constant.length?V.constant[1]:0,Fc=2<V.constant.length?V.constant[2]:0,rd=3<V.constant.length?V.constant[3]:0)):(Ea=ga(V.buffer)?N.createStream(34962,V.buffer):N.getBuffer(V.buffer),bd="type"in V?
ka[V.type]:Ea.dtype,ma=!!V.normalized,fb=V.size|0,Ga=V.offset|0,nd=V.stride|0);fd=la.location;Rc=S[fd];if(1===$d){if(Rc.buffer||A.enableVertexAttribArray(fd),Jc=fb||3,Rc.type!==bd||Rc.size!==Jc||Rc.buffer!==Ea||Rc.normalized!==ma||Rc.offset!==Ga||Rc.stride!==nd)A.bindBuffer(34962,Ea.buffer),A.vertexAttribPointer(fd,Jc,bd,ma,nd,Ga),Rc.type=bd,Rc.size=Jc,Rc.buffer=Ea,Rc.normalized=ma,Rc.offset=Ga,Rc.stride=nd}else if(Rc.buffer&&(A.disableVertexAttribArray(fd),Rc.buffer=null),Rc.x!==Mc||Rc.y!==pd||Rc.z!==
Fc||Rc.w!==rd)A.vertexAttrib4f(fd,Mc,pd,Fc,rd),Rc.x=Mc,Rc.y=pd,Rc.z=Fc,Rc.w=rd;(Cb=a.uv)&&("object"===typeof Cb||"function"===typeof Cb)&&(ga(Cb)||N.getBuffer(Cb)||N.getBuffer(Cb.buffer)||ga(Cb.buffer)||"constant"in Cb&&("number"===typeof Cb.constant||I(Cb.constant)))||g.commandRaise(y,t);Gb=!1;Gc=null;xb=!1;Db=wc=0;Kc=1;kc=0;Hc=5126;dc=Dc=Xc=gd=0;ga(Cb)?(Gb=!0,Gc=N.createStream(34962,Cb),Hc=Gc.dtype):(Gc=N.getBuffer(Cb))?Hc=Gc.dtype:"constant"in Cb?(Kc=2,"number"===typeof Cb.constant?(Xc=Cb.constant,
Dc=dc=gd=0):(Xc=0<Cb.constant.length?Cb.constant[0]:0,Dc=1<Cb.constant.length?Cb.constant[1]:0,dc=2<Cb.constant.length?Cb.constant[2]:0,gd=3<Cb.constant.length?Cb.constant[3]:0)):(Gc=ga(Cb.buffer)?N.createStream(34962,Cb.buffer):N.getBuffer(Cb.buffer),Hc="type"in Cb?ka[Cb.type]:Gc.dtype,xb=!!Cb.normalized,Db=Cb.size|0,wc=Cb.offset|0,kc=Cb.stride|0);Ic=ea.location;oc=S[Ic];if(1===Kc){if(oc.buffer||A.enableVertexAttribArray(Ic),qc=Db||2,oc.type!==Hc||oc.size!==qc||oc.buffer!==Gc||oc.normalized!==xb||
oc.offset!==wc||oc.stride!==kc)A.bindBuffer(34962,Gc.buffer),A.vertexAttribPointer(Ic,qc,Hc,xb,kc,wc),oc.type=Hc,oc.size=qc,oc.buffer=Gc,oc.normalized=xb,oc.offset=wc,oc.stride=kc}else if(oc.buffer&&(A.disableVertexAttribArray(Ic),oc.buffer=null),oc.x!==Xc||oc.y!==Dc||oc.z!==dc||oc.w!==gd)A.vertexAttrib4f(Ic,Xc,Dc,dc,gd),oc.x=Xc,oc.y=Dc,oc.z=dc,oc.w=gd;lc=l.call(this,r,a,0);I(lc)&&16===lc.length||g.commandRaise(F,t);A.uniformMatrix4fv(X.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:
(ca[0]=lc[0],ca[1]=lc[1],ca[2]=lc[2],ca[3]=lc[3],ca[4]=lc[4],ca[5]=lc[5],ca[6]=lc[6],ca[7]=lc[7],ca[8]=lc[8],ca[9]=lc[9],ca[10]=lc[10],ca[11]=lc[11],ca[12]=lc[12],ca[13]=lc[13],ca[14]=lc[14],ca[15]=lc[15],ca));pc=r.view;I(pc)&&16===pc.length||g.commandRaise(K,t);A.uniformMatrix4fv(T.location,!1,Array.isArray(pc)||pc instanceof Float32Array?pc:(ta[0]=pc[0],ta[1]=pc[1],ta[2]=pc[2],ta[3]=pc[3],ta[4]=pc[4],ta[5]=pc[5],ta[6]=pc[6],ta[7]=pc[7],ta[8]=pc[8],ta[9]=pc[9],ta[10]=pc[10],ta[11]=pc[11],ta[12]=
pc[12],ta[13]=pc[13],ta[14]=pc[14],ta[15]=pc[15],ta));(db=a.atlas)&&"framebuffer"===db._reglType&&(db=db.color[0]);"function"===typeof db&&"texture2d"===db._reglType||g.commandRaise(q,t);zc=db._texture;A.uniform1i(H.location,zc.bind());yb=a.elements;ab=null;(Nb=ga(yb))?ab=qa.createStream(yb):(ab=qa.getElements(yb),yb&&!ab&&g.commandRaise(m,t));ab&&A.bindBuffer(34963,ab.buffer.buffer);Ya=ab?ab.primType:4;ob=ab?ab.vertCount:-1;0<=ob||g.commandRaise(E,t);ob&&(ab?A.drawElements(Ya,ob,ab.type,0<<(ab.type-
5121>>1)):A.drawArrays(Ya,0,ob),P.dirty=!0,Ba.setVAO(null),r.view=b,n&&(x.cpuTime+=performance.now()-p),C&&N.destroyStream(z),na&&N.destroyStream(Ea),Gb&&N.destroyStream(Gc),zc.unbind(),Nb&&qa.destroyStream(ab))},scope:function(a,e,d){var f,k,c,h,v,A,w,p,O,B,da,l,y,z,m,D,Aa,q,G,H,ha,ba,Bb,E,Ma,F,K,va,Fa,ua,S,sa,ca,ya,T,W,M,V,ja,X,Y,ea,Xa,xa,oa,za,Ca,wa,Da,la,Ba,Ea,pa,Ib,Z,ta,lb,ma,Ga,ld,fb,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,
Va,Lb,Mb,mb;f=r.view;k=ia.call(this,r,a,d);r.view=k;c=R.cull_enable;R.cull_enable=!0;h=R.cull_face;R.cull_face=1029;if(v=P.profile)A=performance.now(),x.count++;w=a.elements;p=null;(O=ga(w))?p=qa.createStream(w):(p=qa.getElements(w),w&&!p&&g.commandRaise(C,t));B=Q.elements;Q.elements=p;da=Q.offset;Q.offset=0;l=p?p.vertCount:-1;y=Q.count;Q.count=l;z=p?p.primType:4;m=Q.primitive;Q.primitive=z;D=a.atlas;Aa=ra[5];ra[5]=D;q=L.call(this,r,a,d);G=ra[3];ra[3]=q;H=r.view;ha=ra[4];ra[4]=H;(ba=a.normal)&&("object"===
typeof ba||"function"===typeof ba)&&(ga(ba)||N.getBuffer(ba)||N.getBuffer(ba.buffer)||ga(ba.buffer)||"constant"in ba&&("number"===typeof ba.constant||I(ba.constant)))||g.commandRaise(u,t);Bb=!1;E=null;Ma=0;F=!1;va=K=0;Fa=1;ua=0;S=5126;T=ya=ca=sa=0;ga(ba)?(Bb=!0,E=N.createStream(34962,ba),S=E.dtype):(E=N.getBuffer(ba))?S=E.dtype:"constant"in ba?(Fa=2,"number"===typeof ba.constant?(ca=ba.constant,ya=T=sa=0):(ca=0<ba.constant.length?ba.constant[0]:0,ya=1<ba.constant.length?ba.constant[1]:0,T=2<ba.constant.length?
ba.constant[2]:0,sa=3<ba.constant.length?ba.constant[3]:0)):(E=ga(ba.buffer)?N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),S="type"in ba?ka[ba.type]:E.dtype,F=!!ba.normalized,va=ba.size|0,K=ba.offset|0,ua=ba.stride|0,Ma=ba.divisor|0);W=J.buffer;J.buffer=E;M=J.divisor;J.divisor=Ma;V=J.normalized;J.normalized=F;ja=J.offset;J.offset=K;X=J.size;J.size=va;Y=J.state;J.state=Fa;ea=J.stride;J.stride=ua;Xa=J.type;J.type=S;xa=J.w;J.w=sa;oa=J.x;J.x=ca;za=J.y;J.y=ya;Ca=J.z;J.z=T;(wa=a.position)&&("object"===
typeof wa||"function"===typeof wa)&&(ga(wa)||N.getBuffer(wa)||N.getBuffer(wa.buffer)||ga(wa.buffer)||"constant"in wa&&("number"===typeof wa.constant||I(wa.constant)))||g.commandRaise(aa,t);Da=!1;la=null;Ba=0;Ea=!1;Ib=pa=0;Z=1;ta=0;lb=5126;fb=ld=Ga=ma=0;ga(wa)?(Da=!0,la=N.createStream(34962,wa),lb=la.dtype):(la=N.getBuffer(wa))?lb=la.dtype:"constant"in wa?(Z=2,"number"===typeof wa.constant?(Ga=wa.constant,ld=fb=ma=0):(Ga=0<wa.constant.length?wa.constant[0]:0,ld=1<wa.constant.length?wa.constant[1]:
0,fb=2<wa.constant.length?wa.constant[2]:0,ma=3<wa.constant.length?wa.constant[3]:0)):(la=ga(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),lb="type"in wa?ka[wa.type]:la.dtype,Ea=!!wa.normalized,Ib=wa.size|0,pa=wa.offset|0,ta=wa.stride|0,Ba=wa.divisor|0);Nc=b.buffer;b.buffer=la;Ob=b.divisor;b.divisor=Ba;Jb=b.normalized;b.normalized=Ea;rc=b.offset;b.offset=pa;Pb=b.size;b.size=Ib;jb=b.state;b.state=Z;Hb=b.stride;b.stride=ta;Eb=b.type;b.type=lb;wb=b.w;b.w=ma;hb=b.x;b.x=Ga;Zb=b.y;b.y=
ld;Qb=b.z;b.z=fb;(qb=a.uv)&&("object"===typeof qb||"function"===typeof qb)&&(ga(qb)||N.getBuffer(qb)||N.getBuffer(qb.buffer)||ga(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||I(qb.constant)))||g.commandRaise(n,t);Ua=!1;Vb=null;zb=0;hc=!1;pb=ib=0;Ia=1;rb=0;Ja=5126;kb=Ka=eb=cb=0;ga(qb)?(Ua=!0,Vb=N.createStream(34962,qb),Ja=Vb.dtype):(Vb=N.getBuffer(qb))?Ja=Vb.dtype:"constant"in qb?(Ia=2,"number"===typeof qb.constant?(eb=qb.constant,Ka=kb=cb=0):(eb=0<qb.constant.length?qb.constant[0]:
0,Ka=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,cb=3<qb.constant.length?qb.constant[3]:0)):(Vb=ga(qb.buffer)?N.createStream(34962,qb.buffer):N.getBuffer(qb.buffer),Ja="type"in qb?ka[qb.type]:Vb.dtype,hc=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|0);Sa=U.buffer;U.buffer=Vb;tb=U.divisor;U.divisor=zb;sb=U.normalized;U.normalized=hc;Oa=U.offset;U.offset=ib;Cc=U.size;U.size=pb;Qa=U.state;U.state=Ia;Kb=U.stride;U.stride=rb;Fb=U.type;U.type=
Ja;La=U.w;U.w=cb;Hd=U.x;U.x=eb;Va=U.y;U.y=Ka;Lb=U.z;U.z=kb;Mb=na.vert;na.vert=2;mb=na.frag;na.frag=1;P.dirty=!0;e(r,a,d);r.view=f;R.cull_enable=c;R.cull_face=h;v&&(x.cpuTime+=performance.now()-A);O&&qa.destroyStream(p);Q.elements=B;Q.offset=da;Q.count=y;Q.primitive=m;ra[5]=Aa;ra[3]=G;ra[4]=ha;Bb&&N.destroyStream(E);J.buffer=W;J.divisor=M;J.normalized=V;J.offset=ja;J.size=X;J.state=Y;J.stride=ea;J.type=Xa;J.w=xa;J.x=oa;J.y=za;J.z=Ca;Da&&N.destroyStream(la);b.buffer=Nc;b.divisor=Ob;b.normalized=Jb;
b.offset=rc;b.size=Pb;b.state=jb;b.stride=Hb;b.type=Eb;b.w=wb;b.x=hb;b.y=Zb;b.z=Qb;Ua&&N.destroyStream(Vb);U.buffer=Sa;U.divisor=tb;U.normalized=sb;U.offset=Oa;U.size=Cc;U.state=Qa;U.stride=Kb;U.type=Fb;U.w=La;U.x=Hd;U.y=Va;U.z=Lb;na.vert=Mb;na.frag=mb;P.dirty=!0},batch:function(a,b){var e,d,c,h,n,l,y;e=r.view;d=p.call(this,r,a,0);r.view=d;c=pa.next;c!==pa.cur&&(c?A.bindFramebuffer(36160,c.framebuffer):A.bindFramebuffer(36160,null),pa.cur=c);if(P.dirty){var m,C,q,u,E,F,K,J,L,Q,ca,aa,ra,U,ia,na,ta,
Nd,Kd,$d,nd,bd,rd,Mc,pd,Fc,fd,Rc,Jc,Cb,Gb,Gc,xb,wc,Db,Kc,kc,Hc,gd,Xc,Dc,dc,Ic,oc,qc,lc,pc,db,zc,yb,ab,Nb;m=R.dither;m!==P.dither&&(m?A.enable(3024):A.disable(3024),P.dither=m);C=R.blend_enable;C!==P.blend_enable&&(C?A.enable(3042):A.disable(3042),P.blend_enable=C);q=ya[0];u=ya[1];E=ya[2];F=ya[3];if(q!==ha[0]||u!==ha[1]||E!==ha[2]||F!==ha[3])A.blendColor(q,u,E,F),ha[0]=q,ha[1]=u,ha[2]=E,ha[3]=F;K=Ca[0];J=Ca[1];if(K!==ja[0]||J!==ja[1])A.blendEquationSeparate(K,J),ja[0]=K,ja[1]=J;L=oa[0];Q=oa[1];ca=
oa[2];aa=oa[3];if(L!==za[0]||Q!==za[1]||ca!==za[2]||aa!==za[3])A.blendFuncSeparate(L,Q,ca,aa),za[0]=L,za[1]=Q,za[2]=ca,za[3]=aa;ra=R.depth_enable;ra!==P.depth_enable&&(ra?A.enable(2929):A.disable(2929),P.depth_enable=ra);U=R.depth_func;U!==P.depth_func&&(A.depthFunc(U),P.depth_func=U);ia=Bb[0];na=Bb[1];if(ia!==Xa[0]||na!==Xa[1])A.depthRange(ia,na),Xa[0]=ia,Xa[1]=na;ta=R.depth_mask;ta!==P.depth_mask&&(A.depthMask(ta),P.depth_mask=ta);Nd=Ma[0];Kd=Ma[1];$d=Ma[2];nd=Ma[3];if(Nd!==Aa[0]||Kd!==Aa[1]||$d!==
Aa[2]||nd!==Aa[3])A.colorMask(Nd,Kd,$d,nd),Aa[0]=Nd,Aa[1]=Kd,Aa[2]=$d,Aa[3]=nd;bd=R.frontFace;bd!==P.frontFace&&(A.frontFace(bd),P.frontFace=bd);rd=R.lineWidth;rd!==P.lineWidth&&(A.lineWidth(rd),P.lineWidth=rd);Mc=R.polygonOffset_enable;Mc!==P.polygonOffset_enable&&(Mc?A.enable(32823):A.disable(32823),P.polygonOffset_enable=Mc);pd=v[0];Fc=v[1];if(pd!==w[0]||Fc!==w[1])A.polygonOffset(pd,Fc),w[0]=pd,w[1]=Fc;fd=R.sample_alpha;fd!==P.sample_alpha&&(fd?A.enable(32926):A.disable(32926),P.sample_alpha=fd);
Rc=R.sample_enable;Rc!==P.sample_enable&&(Rc?A.enable(32928):A.disable(32928),P.sample_enable=Rc);Jc=da[0];Cb=da[1];if(Jc!==ua[0]||Cb!==ua[1])A.sampleCoverage(Jc,Cb),ua[0]=Jc,ua[1]=Cb;Gb=R.stencil_enable;Gb!==P.stencil_enable&&(Gb?A.enable(2960):A.disable(2960),P.stencil_enable=Gb);Gc=R.stencil_mask;Gc!==P.stencil_mask&&(A.stencilMask(Gc),P.stencil_mask=Gc);xb=Ib[0];wc=Ib[1];Db=Ib[2];if(xb!==ba[0]||wc!==ba[1]||Db!==ba[2])A.stencilFunc(xb,wc,Db),ba[0]=xb,ba[1]=wc,ba[2]=Db;Kc=Fa[0];kc=Fa[1];Hc=Fa[2];
gd=Fa[3];if(Kc!==sa[0]||kc!==sa[1]||Hc!==sa[2]||gd!==sa[3])A.stencilOpSeparate(Kc,kc,Hc,gd),sa[0]=Kc,sa[1]=kc,sa[2]=Hc,sa[3]=gd;Xc=O[0];Dc=O[1];dc=O[2];Ic=O[3];if(Xc!==va[0]||Dc!==va[1]||dc!==va[2]||Ic!==va[3])A.stencilOpSeparate(Xc,Dc,dc,Ic),va[0]=Xc,va[1]=Dc,va[2]=dc,va[3]=Ic;oc=R.scissor_enable;oc!==P.scissor_enable&&(oc?A.enable(3089):A.disable(3089),P.scissor_enable=oc);qc=Da[0];lc=Da[1];pc=Da[2];db=Da[3];if(qc!==lb[0]||lc!==lb[1]||pc!==lb[2]||db!==lb[3])A.scissor(qc,lc,pc,db),lb[0]=qc,lb[1]=
lc,lb[2]=pc,lb[3]=db;zc=xa[0];yb=xa[1];ab=xa[2];Nb=xa[3];if(zc!==wa[0]||yb!==wa[1]||ab!==wa[2]||Nb!==wa[3])A.viewport(zc,yb,ab,Nb),wa[0]=zc,wa[1]=yb,wa[2]=ab,wa[3]=Nb}A.enable(2884);P.cull_enable=!0;A.cullFace(1029);P.cull_face=1029;if(h=P.profile)n=performance.now(),x.count+=b;A.useProgram(W.program);var Ya,ob;Ba.setVAO(null);Ya=G.call(this,r,y,l);I(Ya)&&16===Ya.length||g.commandRaise(D,t);A.uniformMatrix4fv(X.location,!1,Array.isArray(Ya)||Ya instanceof Float32Array?Ya:(ma[0]=Ya[0],ma[1]=Ya[1],
ma[2]=Ya[2],ma[3]=Ya[3],ma[4]=Ya[4],ma[5]=Ya[5],ma[6]=Ya[6],ma[7]=Ya[7],ma[8]=Ya[8],ma[9]=Ya[9],ma[10]=Ya[10],ma[11]=Ya[11],ma[12]=Ya[12],ma[13]=Ya[13],ma[14]=Ya[14],ma[15]=Ya[15],ma));ob=r.view;I(ob)&&16===ob.length||g.commandRaise(k,t);A.uniformMatrix4fv(T.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Ga[0]=ob[0],Ga[1]=ob[1],Ga[2]=ob[2],Ga[3]=ob[3],Ga[4]=ob[4],Ga[5]=ob[5],Ga[6]=ob[6],Ga[7]=ob[7],Ga[8]=ob[8],Ga[9]=ob[9],Ga[10]=ob[10],Ga[11]=ob[11],Ga[12]=ob[12],Ga[13]=ob[13],Ga[14]=
ob[14],Ga[15]=ob[15],Ga));for(l=0;l<b;++l){y=a[l];var Za,Nc,Ob,Jb,rc,Pb,jb,Hb,Eb,wb,hb,Zb,Qb,qb,Ua,Vb,zb,hc,ib,pb,Ia,rb,Ja,cb,eb,Ka,kb,Sa,tb,sb,Oa,Cc,Qa,Kb,Fb,La,Hd,Va,Lb,Mb,mb,Na,$b,Pa,ub,vb,Ra,nb,ec,Ac,uc,$a,ic,sd,Ta;(Za=y.position)&&("object"===typeof Za||"function"===typeof Za)&&(ga(Za)||N.getBuffer(Za)||N.getBuffer(Za.buffer)||ga(Za.buffer)||"constant"in Za&&("number"===typeof Za.constant||I(Za.constant)))||g.commandRaise(B,t);Nc=!1;Ob=null;Jb=!1;Pb=rc=0;jb=1;Hb=0;Eb=5126;Qb=Zb=hb=wb=0;ga(Za)?
(Nc=!0,Ob=N.createStream(34962,Za),Eb=Ob.dtype):(Ob=N.getBuffer(Za))?Eb=Ob.dtype:"constant"in Za?(jb=2,"number"===typeof Za.constant?(hb=Za.constant,Zb=Qb=wb=0):(hb=0<Za.constant.length?Za.constant[0]:0,Zb=1<Za.constant.length?Za.constant[1]:0,Qb=2<Za.constant.length?Za.constant[2]:0,wb=3<Za.constant.length?Za.constant[3]:0)):(Ob=ga(Za.buffer)?N.createStream(34962,Za.buffer):N.getBuffer(Za.buffer),Eb="type"in Za?ka[Za.type]:Ob.dtype,Jb=!!Za.normalized,Pb=Za.size|0,rc=Za.offset|0,Hb=Za.stride|0);qb=
Z.location;Ua=S[qb];if(1===jb){if(Ua.buffer||A.enableVertexAttribArray(qb),Vb=Pb||3,Ua.type!==Eb||Ua.size!==Vb||Ua.buffer!==Ob||Ua.normalized!==Jb||Ua.offset!==rc||Ua.stride!==Hb)A.bindBuffer(34962,Ob.buffer),A.vertexAttribPointer(qb,Vb,Eb,Jb,Hb,rc),Ua.type=Eb,Ua.size=Vb,Ua.buffer=Ob,Ua.normalized=Jb,Ua.offset=rc,Ua.stride=Hb}else if(Ua.buffer&&(A.disableVertexAttribArray(qb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Zb||Ua.z!==Qb||Ua.w!==wb)A.vertexAttrib4f(qb,hb,Zb,Qb,wb),Ua.x=hb,Ua.y=Zb,Ua.z=Qb,Ua.w=wb;
(zb=y.normal)&&("object"===typeof zb||"function"===typeof zb)&&(ga(zb)||N.getBuffer(zb)||N.getBuffer(zb.buffer)||ga(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||I(zb.constant)))||g.commandRaise(z,t);hc=!1;ib=null;pb=!1;rb=Ia=0;Ja=1;cb=0;eb=5126;tb=Sa=kb=Ka=0;ga(zb)?(hc=!0,ib=N.createStream(34962,zb),eb=ib.dtype):(ib=N.getBuffer(zb))?eb=ib.dtype:"constant"in zb?(Ja=2,"number"===typeof zb.constant?(kb=zb.constant,Sa=tb=Ka=0):(kb=0<zb.constant.length?zb.constant[0]:0,Sa=1<zb.constant.length?
zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,Ka=3<zb.constant.length?zb.constant[3]:0)):(ib=ga(zb.buffer)?N.createStream(34962,zb.buffer):N.getBuffer(zb.buffer),eb="type"in zb?ka[zb.type]:ib.dtype,pb=!!zb.normalized,rb=zb.size|0,Ia=zb.offset|0,cb=zb.stride|0);sb=la.location;Oa=S[sb];if(1===Ja){if(Oa.buffer||A.enableVertexAttribArray(sb),Cc=rb||3,Oa.type!==eb||Oa.size!==Cc||Oa.buffer!==ib||Oa.normalized!==pb||Oa.offset!==Ia||Oa.stride!==cb)A.bindBuffer(34962,ib.buffer),A.vertexAttribPointer(sb,
Cc,eb,pb,cb,Ia),Oa.type=eb,Oa.size=Cc,Oa.buffer=ib,Oa.normalized=pb,Oa.offset=Ia,Oa.stride=cb}else if(Oa.buffer&&(A.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Sa||Oa.z!==tb||Oa.w!==Ka)A.vertexAttrib4f(sb,kb,Sa,tb,Ka),Oa.x=kb,Oa.y=Sa,Oa.z=tb,Oa.w=Ka;(Qa=y.uv)&&("object"===typeof Qa||"function"===typeof Qa)&&(ga(Qa)||N.getBuffer(Qa)||N.getBuffer(Qa.buffer)||ga(Qa.buffer)||"constant"in Qa&&("number"===typeof Qa.constant||I(Qa.constant)))||g.commandRaise(M,t);Kb=!1;Fb=null;La=!1;Va=
Hd=0;Lb=1;Mb=0;mb=5126;ub=Pa=$b=Na=0;ga(Qa)?(Kb=!0,Fb=N.createStream(34962,Qa),mb=Fb.dtype):(Fb=N.getBuffer(Qa))?mb=Fb.dtype:"constant"in Qa?(Lb=2,"number"===typeof Qa.constant?($b=Qa.constant,Pa=ub=Na=0):($b=0<Qa.constant.length?Qa.constant[0]:0,Pa=1<Qa.constant.length?Qa.constant[1]:0,ub=2<Qa.constant.length?Qa.constant[2]:0,Na=3<Qa.constant.length?Qa.constant[3]:0)):(Fb=ga(Qa.buffer)?N.createStream(34962,Qa.buffer):N.getBuffer(Qa.buffer),mb="type"in Qa?ka[Qa.type]:Fb.dtype,La=!!Qa.normalized,Va=
Qa.size|0,Hd=Qa.offset|0,Mb=Qa.stride|0);vb=ea.location;Ra=S[vb];if(1===Lb){if(Ra.buffer||A.enableVertexAttribArray(vb),nb=Va||2,Ra.type!==mb||Ra.size!==nb||Ra.buffer!==Fb||Ra.normalized!==La||Ra.offset!==Hd||Ra.stride!==Mb)A.bindBuffer(34962,Fb.buffer),A.vertexAttribPointer(vb,nb,mb,La,Mb,Hd),Ra.type=mb,Ra.size=nb,Ra.buffer=Fb,Ra.normalized=La,Ra.offset=Hd,Ra.stride=Mb}else if(Ra.buffer&&(A.disableVertexAttribArray(vb),Ra.buffer=null),Ra.x!==$b||Ra.y!==Pa||Ra.z!==ub||Ra.w!==Na)A.vertexAttrib4f(vb,
$b,Pa,ub,Na),Ra.x=$b,Ra.y=Pa,Ra.z=ub,Ra.w=Na;(ec=y.atlas)&&"framebuffer"===ec._reglType&&(ec=ec.color[0]);"function"===typeof ec&&"texture2d"===ec._reglType||g.commandRaise(V,t);Ac=ec._texture;A.uniform1i(H.location,Ac.bind());uc=y.elements;$a=null;(ic=ga(uc))?$a=qa.createStream(uc):($a=qa.getElements(uc),uc&&!$a&&g.commandRaise(f,t));$a&&A.bindBuffer(34963,$a.buffer.buffer);sd=$a?$a.primType:4;Ta=$a?$a.vertCount:-1;0<=Ta||g.commandRaise(Ea,t);Ta&&($a?A.drawElements(sd,Ta,$a.type,0<<($a.type-5121>>
1)):A.drawArrays(sd,0,Ta),Nc&&N.destroyStream(Ob),hc&&N.destroyStream(ib),Kb&&N.destroyStream(Fb),Ac.unbind(),ic&&qa.destroyStream($a))}P.dirty=!0;Ba.setVAO(null);r.view=e;h&&(x.cpuTime+=performance.now()-n)}}},"$7,color,position":function(a,g,t,x,h,e,c,d,y,l){var F,K,q,m,E,M,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V,f,Ea,H,la,Z,X,ea,T,S,N,r,P,Q;F=a.attributes;K=a.context;q=a.current;m=a.draw;E=a.elements;M=a.framebuffer;C=a.gl;L=a.next;u=a.shader;J=a.uniforms;aa=a.vao;b=L.blend_color;n=q.blend_color;U=
L.blend_equation;p=q.blend_equation;W=L.blend_func;B=q.blend_func;z=L.colorMask;Y=q.colorMask;G=L.depth_range;D=q.depth_range;k=L.polygonOffset_offset;V=q.polygonOffset_offset;f=L.sample_coverage;Ea=q.sample_coverage;H=L.scissor_box;la=q.scissor_box;Z=L.stencil_func;X=q.stencil_func;ea=L.stencil_opBack;T=q.stencil_opBack;S=L.stencil_opFront;N=q.stencil_opFront;r=L.viewport;P=q.viewport;Q=[1,0,0,1];return{draw:function(a){var d,g,c,t;a=M.next;a!==M.cur&&(a?C.bindFramebuffer(36160,a.framebuffer):C.bindFramebuffer(36160,
null),M.cur=a);if(q.dirty){a=L.dither;a!==q.dither&&(a?C.enable(3024):C.disable(3024),q.dither=a);a=L.blend_enable;a!==q.blend_enable&&(a?C.enable(3042):C.disable(3042),q.blend_enable=a);a=b[0];g=b[1];c=b[2];t=b[3];if(a!==n[0]||g!==n[1]||c!==n[2]||t!==n[3])C.blendColor(a,g,c,t),n[0]=a,n[1]=g,n[2]=c,n[3]=t;a=U[0];g=U[1];if(a!==p[0]||g!==p[1])C.blendEquationSeparate(a,g),p[0]=a,p[1]=g;a=W[0];g=W[1];c=W[2];t=W[3];if(a!==B[0]||g!==B[1]||c!==B[2]||t!==B[3])C.blendFuncSeparate(a,g,c,t),B[0]=a,B[1]=g,B[2]=
c,B[3]=t;a=L.depth_enable;a!==q.depth_enable&&(a?C.enable(2929):C.disable(2929),q.depth_enable=a);a=L.depth_func;a!==q.depth_func&&(C.depthFunc(a),q.depth_func=a);a=G[0];g=G[1];if(a!==D[0]||g!==D[1])C.depthRange(a,g),D[0]=a,D[1]=g;a=L.depth_mask;a!==q.depth_mask&&(C.depthMask(a),q.depth_mask=a);a=z[0];g=z[1];c=z[2];t=z[3];if(a!==Y[0]||g!==Y[1]||c!==Y[2]||t!==Y[3])C.colorMask(a,g,c,t),Y[0]=a,Y[1]=g,Y[2]=c,Y[3]=t;a=L.cull_enable;a!==q.cull_enable&&(a?C.enable(2884):C.disable(2884),q.cull_enable=a);
a=L.cull_face;a!==q.cull_face&&(C.cullFace(a),q.cull_face=a);a=L.frontFace;a!==q.frontFace&&(C.frontFace(a),q.frontFace=a);a=L.lineWidth;a!==q.lineWidth&&(C.lineWidth(a),q.lineWidth=a);a=L.polygonOffset_enable;a!==q.polygonOffset_enable&&(a?C.enable(32823):C.disable(32823),q.polygonOffset_enable=a);a=k[0];g=k[1];if(a!==V[0]||g!==V[1])C.polygonOffset(a,g),V[0]=a,V[1]=g;a=L.sample_alpha;a!==q.sample_alpha&&(a?C.enable(32926):C.disable(32926),q.sample_alpha=a);a=L.sample_enable;a!==q.sample_enable&&
(a?C.enable(32928):C.disable(32928),q.sample_enable=a);a=f[0];g=f[1];if(a!==Ea[0]||g!==Ea[1])C.sampleCoverage(a,g),Ea[0]=a,Ea[1]=g;a=L.stencil_enable;a!==q.stencil_enable&&(a?C.enable(2960):C.disable(2960),q.stencil_enable=a);a=L.stencil_mask;a!==q.stencil_mask&&(C.stencilMask(a),q.stencil_mask=a);a=Z[0];g=Z[1];c=Z[2];if(a!==X[0]||g!==X[1]||c!==X[2])C.stencilFunc(a,g,c),X[0]=a,X[1]=g,X[2]=c;a=S[0];g=S[1];c=S[2];t=S[3];if(a!==N[0]||g!==N[1]||c!==N[2]||t!==N[3])C.stencilOpSeparate(a,g,c,t),N[0]=a,N[1]=
g,N[2]=c,N[3]=t;a=ea[0];g=ea[1];c=ea[2];t=ea[3];if(a!==T[0]||g!==T[1]||c!==T[2]||t!==T[3])C.stencilOpSeparate(a,g,c,t),T[0]=a,T[1]=g,T[2]=c,T[3]=t;a=L.scissor_enable;a!==q.scissor_enable&&(a?C.enable(3089):C.disable(3089),q.scissor_enable=a);a=H[0];g=H[1];c=H[2];t=H[3];if(a!==la[0]||g!==la[1]||c!==la[2]||t!==la[3])C.scissor(a,g,c,t),la[0]=a,la[1]=g,la[2]=c,la[3]=t;a=r[0];g=r[1];c=r[2];t=r[3];if(a!==P[0]||g!==P[1]||c!==P[2]||t!==P[3])C.viewport(a,g,c,t),P[0]=a,P[1]=g,P[2]=c,P[3]=t;q.dirty=!1}if(a=
q.profile)d=performance.now(),x.count++;C.useProgram(h.program);aa.setVAO(null);g=l.location;c=F[g];c.buffer||C.enableVertexAttribArray(g);if(c.type!==e.dtype||2!==c.size||c.buffer!==e||!1!==c.normalized||0!==c.offset||0!==c.stride)C.bindBuffer(34962,e.buffer),C.vertexAttribPointer(g,2,e.dtype,!1,0,0),c.type=e.dtype,c.size=2,c.buffer=e,c.normalized=!1,c.offset=0,c.stride=0;C.uniform4f(y.location,1,0,0,1);(g=m.elements)?C.bindBuffer(34963,g.buffer.buffer):aa.currentVAO&&(g=E.getElements(aa.currentVAO.elements))&&
C.bindBuffer(34963,g.buffer.buffer);c=m.primitive;t=m.offset;g?C.drawElements(c,3,g.type,t<<(g.type-5121>>1)):C.drawArrays(c,t,3);aa.setVAO(null);a&&(x.cpuTime+=performance.now()-d)},scope:function(a,b,d){var f,g,k,h,n,r,t,p,B,l,y,z,C,D,G,H,v,w;if(f=q.profile)g=performance.now(),x.count++;k=m.count;m.count=3;h=J[3];J[3]=Q;n=c.buffer;c.buffer=e;r=c.divisor;c.divisor=0;t=c.normalized;c.normalized=!1;p=c.offset;c.offset=0;B=c.size;c.size=0;l=c.state;c.state=1;y=c.stride;c.stride=0;z=c.type;c.type=e.dtype;
C=c.w;c.w=0;D=c.x;c.x=0;G=c.y;c.y=0;H=c.z;c.z=0;v=u.vert;u.vert=2;w=u.frag;u.frag=1;b(K,a,d);f&&(x.cpuTime+=performance.now()-g);m.count=k;J[3]=h;c.buffer=n;c.divisor=r;c.normalized=t;c.offset=p;c.size=B;c.state=l;c.stride=y;c.type=z;c.w=C;c.x=D;c.y=G;c.z=H;u.vert=v;u.frag=w},batch:function(a,g){var c,h,t;c=M.next;c!==M.cur&&(c?C.bindFramebuffer(36160,c.framebuffer):C.bindFramebuffer(36160,null),M.cur=c);if(q.dirty){var R,u;c=L.dither;c!==q.dither&&(c?C.enable(3024):C.disable(3024),q.dither=c);c=
L.blend_enable;c!==q.blend_enable&&(c?C.enable(3042):C.disable(3042),q.blend_enable=c);c=b[0];t=b[1];R=b[2];u=b[3];if(c!==n[0]||t!==n[1]||R!==n[2]||u!==n[3])C.blendColor(c,t,R,u),n[0]=c,n[1]=t,n[2]=R,n[3]=u;c=U[0];t=U[1];if(c!==p[0]||t!==p[1])C.blendEquationSeparate(c,t),p[0]=c,p[1]=t;c=W[0];t=W[1];R=W[2];u=W[3];if(c!==B[0]||t!==B[1]||R!==B[2]||u!==B[3])C.blendFuncSeparate(c,t,R,u),B[0]=c,B[1]=t,B[2]=R,B[3]=u;c=L.depth_enable;c!==q.depth_enable&&(c?C.enable(2929):C.disable(2929),q.depth_enable=c);
c=L.depth_func;c!==q.depth_func&&(C.depthFunc(c),q.depth_func=c);c=G[0];t=G[1];if(c!==D[0]||t!==D[1])C.depthRange(c,t),D[0]=c,D[1]=t;c=L.depth_mask;c!==q.depth_mask&&(C.depthMask(c),q.depth_mask=c);c=z[0];t=z[1];R=z[2];u=z[3];if(c!==Y[0]||t!==Y[1]||R!==Y[2]||u!==Y[3])C.colorMask(c,t,R,u),Y[0]=c,Y[1]=t,Y[2]=R,Y[3]=u;c=L.cull_enable;c!==q.cull_enable&&(c?C.enable(2884):C.disable(2884),q.cull_enable=c);c=L.cull_face;c!==q.cull_face&&(C.cullFace(c),q.cull_face=c);c=L.frontFace;c!==q.frontFace&&(C.frontFace(c),
q.frontFace=c);c=L.lineWidth;c!==q.lineWidth&&(C.lineWidth(c),q.lineWidth=c);c=L.polygonOffset_enable;c!==q.polygonOffset_enable&&(c?C.enable(32823):C.disable(32823),q.polygonOffset_enable=c);c=k[0];t=k[1];if(c!==V[0]||t!==V[1])C.polygonOffset(c,t),V[0]=c,V[1]=t;c=L.sample_alpha;c!==q.sample_alpha&&(c?C.enable(32926):C.disable(32926),q.sample_alpha=c);c=L.sample_enable;c!==q.sample_enable&&(c?C.enable(32928):C.disable(32928),q.sample_enable=c);c=f[0];t=f[1];if(c!==Ea[0]||t!==Ea[1])C.sampleCoverage(c,
t),Ea[0]=c,Ea[1]=t;c=L.stencil_enable;c!==q.stencil_enable&&(c?C.enable(2960):C.disable(2960),q.stencil_enable=c);c=L.stencil_mask;c!==q.stencil_mask&&(C.stencilMask(c),q.stencil_mask=c);c=Z[0];t=Z[1];R=Z[2];if(c!==X[0]||t!==X[1]||R!==X[2])C.stencilFunc(c,t,R),X[0]=c,X[1]=t,X[2]=R;c=S[0];t=S[1];R=S[2];u=S[3];if(c!==N[0]||t!==N[1]||R!==N[2]||u!==N[3])C.stencilOpSeparate(c,t,R,u),N[0]=c,N[1]=t,N[2]=R,N[3]=u;c=ea[0];t=ea[1];R=ea[2];u=ea[3];if(c!==T[0]||t!==T[1]||R!==T[2]||u!==T[3])C.stencilOpSeparate(c,
t,R,u),T[0]=c,T[1]=t,T[2]=R,T[3]=u;c=L.scissor_enable;c!==q.scissor_enable&&(c?C.enable(3089):C.disable(3089),q.scissor_enable=c);c=H[0];t=H[1];R=H[2];u=H[3];if(c!==la[0]||t!==la[1]||R!==la[2]||u!==la[3])C.scissor(c,t,R,u),la[0]=c,la[1]=t,la[2]=R,la[3]=u;c=r[0];t=r[1];R=r[2];u=r[3];if(c!==P[0]||t!==P[1]||R!==P[2]||u!==P[3])C.viewport(c,t,R,u),P[0]=c,P[1]=t,P[2]=R,P[3]=u;q.dirty=!1}if(c=q.profile)h=performance.now(),x.count+=g;C.useProgram(d.program);var K;aa.setVAO(null);t=l.location;R=F[t];R.buffer||
C.enableVertexAttribArray(t);if(R.type!==e.dtype||2!==R.size||R.buffer!==e||!1!==R.normalized||0!==R.offset||0!==R.stride)C.bindBuffer(34962,e.buffer),C.vertexAttribPointer(t,2,e.dtype,!1,0,0),R.type=e.dtype,R.size=2,R.buffer=e,R.normalized=!1,R.offset=0,R.stride=0;C.uniform4f(y.location,1,0,0,1);(R=m.elements)?C.bindBuffer(34963,R.buffer.buffer):aa.currentVAO&&(R=E.getElements(aa.currentVAO.elements))&&C.bindBuffer(34963,R.buffer.buffer);u=m.primitive;K=m.offset;for(t=0;t<g;++t)R?C.drawElements(u,
3,R.type,K<<(R.type-5121>>1)):C.drawArrays(u,K,3);aa.setVAO(null);c&&(x.cpuTime+=performance.now()-h)}}},"$19,angle,color,offset,position":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M,C,L,u,J,aa,b,n,U){var p,W,B,z,Y,G,D,k,V,f,Ea,H,la,Z,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa;p=a.attributes;W=a.context;B=a.current;z=a.draw;Y=a.elements;G=a.framebuffer;D=a.gl;k=a.isArrayLike;V=a.next;f=a.shader;Ea=a.uniforms;H=a.vao;la=V.blend_color;Z=B.blend_color;X=V.blend_equation;ea=B.blend_equation;
T=V.blend_func;S=B.blend_func;N=V.colorMask;r=B.colorMask;P=V.depth_range;Q=B.depth_range;qa=V.polygonOffset_offset;pa=B.polygonOffset_offset;A=V.sample_coverage;I=B.sample_coverage;ga=V.scissor_box;R=B.scissor_box;na=V.stencil_func;ra=B.stencil_func;Ba=V.stencil_opBack;ya=B.stencil_opBack;ha=V.stencil_opFront;Ca=B.stencil_opFront;ja=V.viewport;oa=B.viewport;return{draw:function(a){var f,C,m,q;f=G.next;f!==G.cur&&(f?D.bindFramebuffer(36160,f.framebuffer):D.bindFramebuffer(36160,null),G.cur=f);if(B.dirty){var v;
f=V.dither;f!==B.dither&&(f?D.enable(3024):D.disable(3024),B.dither=f);f=V.blend_enable;f!==B.blend_enable&&(f?D.enable(3042):D.disable(3042),B.blend_enable=f);f=la[0];m=la[1];q=la[2];v=la[3];if(f!==Z[0]||m!==Z[1]||q!==Z[2]||v!==Z[3])D.blendColor(f,m,q,v),Z[0]=f,Z[1]=m,Z[2]=q,Z[3]=v;f=X[0];m=X[1];if(f!==ea[0]||m!==ea[1])D.blendEquationSeparate(f,m),ea[0]=f,ea[1]=m;f=T[0];m=T[1];q=T[2];v=T[3];if(f!==S[0]||m!==S[1]||q!==S[2]||v!==S[3])D.blendFuncSeparate(f,m,q,v),S[0]=f,S[1]=m,S[2]=q,S[3]=v;f=V.depth_func;
f!==B.depth_func&&(D.depthFunc(f),B.depth_func=f);f=P[0];m=P[1];if(f!==Q[0]||m!==Q[1])D.depthRange(f,m),Q[0]=f,Q[1]=m;f=V.depth_mask;f!==B.depth_mask&&(D.depthMask(f),B.depth_mask=f);f=N[0];m=N[1];q=N[2];v=N[3];if(f!==r[0]||m!==r[1]||q!==r[2]||v!==r[3])D.colorMask(f,m,q,v),r[0]=f,r[1]=m,r[2]=q,r[3]=v;f=V.cull_enable;f!==B.cull_enable&&(f?D.enable(2884):D.disable(2884),B.cull_enable=f);f=V.cull_face;f!==B.cull_face&&(D.cullFace(f),B.cull_face=f);f=V.frontFace;f!==B.frontFace&&(D.frontFace(f),B.frontFace=
f);f=V.lineWidth;f!==B.lineWidth&&(D.lineWidth(f),B.lineWidth=f);f=V.polygonOffset_enable;f!==B.polygonOffset_enable&&(f?D.enable(32823):D.disable(32823),B.polygonOffset_enable=f);f=qa[0];m=qa[1];if(f!==pa[0]||m!==pa[1])D.polygonOffset(f,m),pa[0]=f,pa[1]=m;f=V.sample_alpha;f!==B.sample_alpha&&(f?D.enable(32926):D.disable(32926),B.sample_alpha=f);f=V.sample_enable;f!==B.sample_enable&&(f?D.enable(32928):D.disable(32928),B.sample_enable=f);f=A[0];m=A[1];if(f!==I[0]||m!==I[1])D.sampleCoverage(f,m),I[0]=
f,I[1]=m;f=V.stencil_enable;f!==B.stencil_enable&&(f?D.enable(2960):D.disable(2960),B.stencil_enable=f);f=V.stencil_mask;f!==B.stencil_mask&&(D.stencilMask(f),B.stencil_mask=f);f=na[0];m=na[1];q=na[2];if(f!==ra[0]||m!==ra[1]||q!==ra[2])D.stencilFunc(f,m,q),ra[0]=f,ra[1]=m,ra[2]=q;f=ha[0];m=ha[1];q=ha[2];v=ha[3];if(f!==Ca[0]||m!==Ca[1]||q!==Ca[2]||v!==Ca[3])D.stencilOpSeparate(f,m,q,v),Ca[0]=f,Ca[1]=m,Ca[2]=q,Ca[3]=v;f=Ba[0];m=Ba[1];q=Ba[2];v=Ba[3];if(f!==ya[0]||m!==ya[1]||q!==ya[2]||v!==ya[3])D.stencilOpSeparate(f,
m,q,v),ya[0]=f,ya[1]=m,ya[2]=q,ya[3]=v;f=V.scissor_enable;f!==B.scissor_enable&&(f?D.enable(3089):D.disable(3089),B.scissor_enable=f);f=ga[0];m=ga[1];q=ga[2];v=ga[3];if(f!==R[0]||m!==R[1]||q!==R[2]||v!==R[3])D.scissor(f,m,q,v),R[0]=f,R[1]=m,R[2]=q,R[3]=v;f=ja[0];m=ja[1];q=ja[2];v=ja[3];if(f!==oa[0]||m!==oa[1]||q!==oa[2]||v!==oa[3])D.viewport(f,m,q,v),oa[0]=f,oa[1]=m,oa[2]=q,oa[3]=v}D.disable(2929);B.depth_enable=!1;if(f=B.profile)C=performance.now(),x.count++;D.useProgram(h.program);H.setVAO(null);
m=U.location;q=p[m];q.buffer||D.enableVertexAttribArray(m);if(q.type!==e.dtype||2!==q.size||q.buffer!==e||!1!==q.normalized||0!==q.offset||0!==q.stride)D.bindBuffer(34962,e.buffer),D.vertexAttribPointer(m,2,e.dtype,!1,0,0),q.type=e.dtype,q.size=2,q.buffer=e,q.normalized=!1,q.offset=0,q.stride=0;m=c.call(this,W,a,0);"number"!==typeof m&&g.commandRaise(d,t);D.uniform1f(aa.location,m);m=a.offset;k(m)&&2===m.length||g.commandRaise(y,t);D.uniform2f(n.location,m[0],m[1]);a=l.call(this,W,a,0);k(a)&&4===
a.length||g.commandRaise(F,t);D.uniform4f(b.location,a[0],a[1],a[2],a[3]);(a=z.elements)?D.bindBuffer(34963,a.buffer.buffer):H.currentVAO&&(a=Y.getElements(H.currentVAO.elements))&&D.bindBuffer(34963,a.buffer.buffer);m=z.primitive;q=z.offset;a?D.drawElements(m,3,a.type,q<<(a.type-5121>>1)):D.drawArrays(m,q,3);B.dirty=!0;H.setVAO(null);f&&(x.cpuTime+=performance.now()-C)},scope:function(a,b,d){var c,g,k,h,n,t,r,p,A,l,O,y,C,D,u,G,R,H,ha,E,I;c=V.depth_enable;V.depth_enable=!1;if(g=B.profile)k=performance.now(),
x.count++;h=z.count;z.count=3;n=K.call(this,W,a,d);t=Ea[3];Ea[3]=n;r=q.call(this,W,a,d);n=Ea[5];Ea[5]=r;p=a.offset;r=Ea[4];Ea[4]=p;p=m.buffer;m.buffer=e;A=m.divisor;m.divisor=0;l=m.normalized;m.normalized=!1;O=m.offset;m.offset=0;y=m.size;m.size=0;C=m.state;m.state=1;D=m.stride;m.stride=0;u=m.type;m.type=e.dtype;G=m.w;m.w=0;R=m.x;m.x=0;H=m.y;m.y=0;ha=m.z;m.z=0;E=f.vert;f.vert=2;I=f.frag;f.frag=1;B.dirty=!0;b(W,a,d);V.depth_enable=c;g&&(x.cpuTime+=performance.now()-k);z.count=h;Ea[3]=t;Ea[5]=n;Ea[4]=
r;m.buffer=p;m.divisor=A;m.normalized=l;m.offset=O;m.size=y;m.state=C;m.stride=D;m.type=u;m.w=G;m.x=R;m.y=H;m.z=ha;f.vert=E;f.frag=I;B.dirty=!0},batch:function(a,f){var d,c,h,v;d=G.next;d!==G.cur&&(d?D.bindFramebuffer(36160,d.framebuffer):D.bindFramebuffer(36160,null),G.cur=d);if(B.dirty){var w,m,l;d=V.dither;d!==B.dither&&(d?D.enable(3024):D.disable(3024),B.dither=d);d=V.blend_enable;d!==B.blend_enable&&(d?D.enable(3042):D.disable(3042),B.blend_enable=d);d=la[0];w=la[1];m=la[2];l=la[3];if(d!==Z[0]||
w!==Z[1]||m!==Z[2]||l!==Z[3])D.blendColor(d,w,m,l),Z[0]=d,Z[1]=w,Z[2]=m,Z[3]=l;d=X[0];w=X[1];if(d!==ea[0]||w!==ea[1])D.blendEquationSeparate(d,w),ea[0]=d,ea[1]=w;d=T[0];w=T[1];m=T[2];l=T[3];if(d!==S[0]||w!==S[1]||m!==S[2]||l!==S[3])D.blendFuncSeparate(d,w,m,l),S[0]=d,S[1]=w,S[2]=m,S[3]=l;d=V.depth_func;d!==B.depth_func&&(D.depthFunc(d),B.depth_func=d);d=P[0];w=P[1];if(d!==Q[0]||w!==Q[1])D.depthRange(d,w),Q[0]=d,Q[1]=w;d=V.depth_mask;d!==B.depth_mask&&(D.depthMask(d),B.depth_mask=d);d=N[0];w=N[1];
m=N[2];l=N[3];if(d!==r[0]||w!==r[1]||m!==r[2]||l!==r[3])D.colorMask(d,w,m,l),r[0]=d,r[1]=w,r[2]=m,r[3]=l;d=V.cull_enable;d!==B.cull_enable&&(d?D.enable(2884):D.disable(2884),B.cull_enable=d);d=V.cull_face;d!==B.cull_face&&(D.cullFace(d),B.cull_face=d);d=V.frontFace;d!==B.frontFace&&(D.frontFace(d),B.frontFace=d);d=V.lineWidth;d!==B.lineWidth&&(D.lineWidth(d),B.lineWidth=d);d=V.polygonOffset_enable;d!==B.polygonOffset_enable&&(d?D.enable(32823):D.disable(32823),B.polygonOffset_enable=d);d=qa[0];w=
qa[1];if(d!==pa[0]||w!==pa[1])D.polygonOffset(d,w),pa[0]=d,pa[1]=w;d=V.sample_alpha;d!==B.sample_alpha&&(d?D.enable(32926):D.disable(32926),B.sample_alpha=d);d=V.sample_enable;d!==B.sample_enable&&(d?D.enable(32928):D.disable(32928),B.sample_enable=d);d=A[0];w=A[1];if(d!==I[0]||w!==I[1])D.sampleCoverage(d,w),I[0]=d,I[1]=w;d=V.stencil_enable;d!==B.stencil_enable&&(d?D.enable(2960):D.disable(2960),B.stencil_enable=d);d=V.stencil_mask;d!==B.stencil_mask&&(D.stencilMask(d),B.stencil_mask=d);d=na[0];w=
na[1];m=na[2];if(d!==ra[0]||w!==ra[1]||m!==ra[2])D.stencilFunc(d,w,m),ra[0]=d,ra[1]=w,ra[2]=m;d=ha[0];w=ha[1];m=ha[2];l=ha[3];if(d!==Ca[0]||w!==Ca[1]||m!==Ca[2]||l!==Ca[3])D.stencilOpSeparate(d,w,m,l),Ca[0]=d,Ca[1]=w,Ca[2]=m,Ca[3]=l;d=Ba[0];w=Ba[1];m=Ba[2];l=Ba[3];if(d!==ya[0]||w!==ya[1]||m!==ya[2]||l!==ya[3])D.stencilOpSeparate(d,w,m,l),ya[0]=d,ya[1]=w,ya[2]=m,ya[3]=l;d=V.scissor_enable;d!==B.scissor_enable&&(d?D.enable(3089):D.disable(3089),B.scissor_enable=d);d=ga[0];w=ga[1];m=ga[2];l=ga[3];if(d!==
R[0]||w!==R[1]||m!==R[2]||l!==R[3])D.scissor(d,w,m,l),R[0]=d,R[1]=w,R[2]=m,R[3]=l;d=ja[0];w=ja[1];m=ja[2];l=ja[3];if(d!==oa[0]||w!==oa[1]||m!==oa[2]||l!==oa[3])D.viewport(d,w,m,l),oa[0]=d,oa[1]=w,oa[2]=m,oa[3]=l}D.disable(2929);B.depth_enable=!1;if(d=B.profile)c=performance.now(),x.count+=f;D.useProgram(E.program);H.setVAO(null);w=U.location;m=p[w];m.buffer||D.enableVertexAttribArray(w);if(m.type!==e.dtype||2!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||0!==m.stride)D.bindBuffer(34962,
e.buffer),D.vertexAttribPointer(w,2,e.dtype,!1,0,0),m.type=e.dtype,m.size=2,m.buffer=e,m.normalized=!1,m.offset=0,m.stride=0;h=M.call(this,W,v,h);"number"!==typeof h&&g.commandRaise(C,t);D.uniform1f(aa.location,h);(w=z.elements)?D.bindBuffer(34963,w.buffer.buffer):H.currentVAO&&(w=Y.getElements(H.currentVAO.elements))&&D.bindBuffer(34963,w.buffer.buffer);m=z.primitive;l=z.offset;for(h=0;h<f;++h){v=a[h];var y,q,F,ba,O,K,Fa,sa,xa;y=v.offset;k(y)&&2===y.length||g.commandRaise(L,t);q=y[0];y=y[1];h&&F===
q&&ba===y||(F=q,ba=y,D.uniform2f(n.location,q,y));O=u.call(this,W,v,h);k(O)&&4===O.length||g.commandRaise(J,t);v=O[0];q=O[1];y=O[2];O=O[3];h&&K===v&&Fa===q&&sa===y&&xa===O||(K=v,Fa=q,sa=y,xa=O,D.uniform4f(b.location,v,q,y,O));w?D.drawElements(m,3,w.type,l<<(w.type-5121>>1)):D.drawArrays(m,l,3)}B.dirty=!0;H.setVAO(null);d&&(x.cpuTime+=performance.now()-c)}}},"$23,model,position,projection,view":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M,C,L,u,J,aa,b,n,U,p,W,B,z){var Y,G,D,k,V,f,Z,H,la,ma,X,ea,T,S,N,
r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da;Y=a.attributes;G=a.context;D=a.current;k=a.draw;V=a.framebuffer;f=a.gl;Z=a.isArrayLike;H=a.next;la=a.shader;ma=a.uniforms;X=a.vao;ea=H.blend_color;T=D.blend_color;S=H.blend_equation;N=D.blend_equation;r=H.blend_func;P=D.blend_func;Q=H.colorMask;qa=D.colorMask;pa=H.depth_range;A=D.depth_range;I=H.polygonOffset_offset;ga=D.polygonOffset_offset;R=H.sample_coverage;na=D.sample_coverage;ra=H.scissor_box;Ba=D.scissor_box;ya=H.stencil_func;
ha=D.stencil_func;Ca=H.stencil_opBack;ja=D.stencil_opBack;oa=H.stencil_opFront;za=D.stencil_opFront;Ma=H.viewport;Aa=D.viewport;Bb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Xa=new Float32Array(16);v=new Float32Array(16);w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];da=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);Da=new Float32Array(16);return{draw:function(a){var b,k,n,w;b=V.next;b!==V.cur&&(b?f.bindFramebuffer(36160,b.framebuffer):f.bindFramebuffer(36160,null),V.cur=
b);if(D.dirty){var m;b=H.dither;b!==D.dither&&(b?f.enable(3024):f.disable(3024),D.dither=b);b=H.blend_enable;b!==D.blend_enable&&(b?f.enable(3042):f.disable(3042),D.blend_enable=b);b=ea[0];n=ea[1];w=ea[2];m=ea[3];if(b!==T[0]||n!==T[1]||w!==T[2]||m!==T[3])f.blendColor(b,n,w,m),T[0]=b,T[1]=n,T[2]=w,T[3]=m;b=S[0];n=S[1];if(b!==N[0]||n!==N[1])f.blendEquationSeparate(b,n),N[0]=b,N[1]=n;b=r[0];n=r[1];w=r[2];m=r[3];if(b!==P[0]||n!==P[1]||w!==P[2]||m!==P[3])f.blendFuncSeparate(b,n,w,m),P[0]=b,P[1]=n,P[2]=
w,P[3]=m;b=H.depth_enable;b!==D.depth_enable&&(b?f.enable(2929):f.disable(2929),D.depth_enable=b);b=H.depth_func;b!==D.depth_func&&(f.depthFunc(b),D.depth_func=b);b=pa[0];n=pa[1];if(b!==A[0]||n!==A[1])f.depthRange(b,n),A[0]=b,A[1]=n;b=H.depth_mask;b!==D.depth_mask&&(f.depthMask(b),D.depth_mask=b);b=Q[0];n=Q[1];w=Q[2];m=Q[3];if(b!==qa[0]||n!==qa[1]||w!==qa[2]||m!==qa[3])f.colorMask(b,n,w,m),qa[0]=b,qa[1]=n,qa[2]=w,qa[3]=m;b=H.cull_enable;b!==D.cull_enable&&(b?f.enable(2884):f.disable(2884),D.cull_enable=
b);b=H.cull_face;b!==D.cull_face&&(f.cullFace(b),D.cull_face=b);b=H.frontFace;b!==D.frontFace&&(f.frontFace(b),D.frontFace=b);b=H.lineWidth;b!==D.lineWidth&&(f.lineWidth(b),D.lineWidth=b);b=H.polygonOffset_enable;b!==D.polygonOffset_enable&&(b?f.enable(32823):f.disable(32823),D.polygonOffset_enable=b);b=I[0];n=I[1];if(b!==ga[0]||n!==ga[1])f.polygonOffset(b,n),ga[0]=b,ga[1]=n;b=H.sample_alpha;b!==D.sample_alpha&&(b?f.enable(32926):f.disable(32926),D.sample_alpha=b);b=H.sample_enable;b!==D.sample_enable&&
(b?f.enable(32928):f.disable(32928),D.sample_enable=b);b=R[0];n=R[1];if(b!==na[0]||n!==na[1])f.sampleCoverage(b,n),na[0]=b,na[1]=n;b=H.stencil_enable;b!==D.stencil_enable&&(b?f.enable(2960):f.disable(2960),D.stencil_enable=b);b=H.stencil_mask;b!==D.stencil_mask&&(f.stencilMask(b),D.stencil_mask=b);b=ya[0];n=ya[1];w=ya[2];if(b!==ha[0]||n!==ha[1]||w!==ha[2])f.stencilFunc(b,n,w),ha[0]=b,ha[1]=n,ha[2]=w;b=oa[0];n=oa[1];w=oa[2];m=oa[3];if(b!==za[0]||n!==za[1]||w!==za[2]||m!==za[3])f.stencilOpSeparate(b,
n,w,m),za[0]=b,za[1]=n,za[2]=w,za[3]=m;b=Ca[0];n=Ca[1];w=Ca[2];m=Ca[3];if(b!==ja[0]||n!==ja[1]||w!==ja[2]||m!==ja[3])f.stencilOpSeparate(b,n,w,m),ja[0]=b,ja[1]=n,ja[2]=w,ja[3]=m;b=H.scissor_enable;b!==D.scissor_enable&&(b?f.enable(3089):f.disable(3089),D.scissor_enable=b);b=ra[0];n=ra[1];w=ra[2];m=ra[3];if(b!==Ba[0]||n!==Ba[1]||w!==Ba[2]||m!==Ba[3])f.scissor(b,n,w,m),Ba[0]=b,Ba[1]=n,Ba[2]=w,Ba[3]=m;b=Ma[0];n=Ma[1];w=Ma[2];m=Ma[3];if(b!==Aa[0]||n!==Aa[1]||w!==Aa[2]||m!==Aa[3])f.viewport(b,n,w,m),Aa[0]=
b,Aa[1]=n,Aa[2]=w,Aa[3]=m;D.dirty=!1}if(b=D.profile)k=performance.now(),x.count++;f.useProgram(h.program);X.setVAO(null);n=W.location;w=Y[n];w.buffer||f.enableVertexAttribArray(n);if(w.type!==e.dtype||3!==w.size||w.buffer!==e||!1!==w.normalized||0!==w.offset||0!==w.stride)f.bindBuffer(34962,e.buffer),f.vertexAttribPointer(n,3,e.dtype,!1,0,0),w.type=e.dtype,w.size=3,w.buffer=e,w.normalized=!1,w.offset=0,w.stride=0;f.uniformMatrix4fv(p.location,!1,Bb);n=c.call(this,G,a,0);Z(n)&&16===n.length||g.commandRaise(d,
t);f.uniformMatrix4fv(z.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Xa[0]=n[0],Xa[1]=n[1],Xa[2]=n[2],Xa[3]=n[3],Xa[4]=n[4],Xa[5]=n[5],Xa[6]=n[6],Xa[7]=n[7],Xa[8]=n[8],Xa[9]=n[9],Xa[10]=n[10],Xa[11]=n[11],Xa[12]=n[12],Xa[13]=n[13],Xa[14]=n[14],Xa[15]=n[15],Xa));a=y.call(this,G,a,0);Z(a)&&16===a.length||g.commandRaise(l,t);f.uniformMatrix4fv(B.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(v[0]=a[0],v[1]=a[1],v[2]=a[2],v[3]=a[3],v[4]=a[4],v[5]=a[5],v[6]=a[6],v[7]=a[7],v[8]=
a[8],v[9]=a[9],v[10]=a[10],v[11]=a[11],v[12]=a[12],v[13]=a[13],v[14]=a[14],v[15]=a[15],v));F&&f.bindBuffer(34963,F.buffer.buffer);a=F.primType;n=F.vertCount-0;0<=n||g.commandRaise(K,t);n&&(f.drawElements(a,n,F.type,0<<(F.type-5121>>1)),X.setVAO(null),b&&(x.cpuTime+=performance.now()-k))},scope:function(a,b,d){var f,c,h,n,v,r,p,l,B,A,y,z,da,u,R,H,ha,I,F,K,Aa,J,L;if(f=D.profile)c=performance.now(),x.count++;h=k.elements;k.elements=q;n=k.offset;k.offset=0;v=q.vertCount-0;0<=v||g.commandRaise(m,t);r=
k.count;k.count=v;p=q.primType;v=k.primitive;k.primitive=p;p=ma[3];ma[3]=w;l=E.call(this,G,a,d);B=ma[5];ma[5]=l;A=M.call(this,G,a,d);l=ma[4];ma[4]=A;A=C.buffer;C.buffer=e;y=C.divisor;C.divisor=0;z=C.normalized;C.normalized=!1;da=C.offset;C.offset=0;u=C.size;C.size=0;R=C.state;C.state=1;H=C.stride;C.stride=0;ha=C.type;C.type=e.dtype;I=C.w;C.w=0;F=C.x;C.x=0;K=C.y;C.y=0;Aa=C.z;C.z=0;J=la.vert;la.vert=2;L=la.frag;la.frag=1;b(G,a,d);f&&(x.cpuTime+=performance.now()-c);k.elements=h;k.offset=n;k.count=r;
k.primitive=v;ma[3]=p;ma[5]=B;ma[4]=l;C.buffer=A;C.divisor=y;C.normalized=z;C.offset=da;C.size=u;C.state=R;C.stride=H;C.type=ha;C.w=I;C.x=F;C.y=K;C.z=Aa;la.vert=J;la.frag=L},batch:function(a,d){var c,k,h;c=V.next;c!==V.cur&&(c?f.bindFramebuffer(36160,c.framebuffer):f.bindFramebuffer(36160,null),V.cur=c);if(D.dirty){var v,w,m;c=H.dither;c!==D.dither&&(c?f.enable(3024):f.disable(3024),D.dither=c);c=H.blend_enable;c!==D.blend_enable&&(c?f.enable(3042):f.disable(3042),D.blend_enable=c);c=ea[0];v=ea[1];
w=ea[2];m=ea[3];if(c!==T[0]||v!==T[1]||w!==T[2]||m!==T[3])f.blendColor(c,v,w,m),T[0]=c,T[1]=v,T[2]=w,T[3]=m;c=S[0];v=S[1];if(c!==N[0]||v!==N[1])f.blendEquationSeparate(c,v),N[0]=c,N[1]=v;c=r[0];v=r[1];w=r[2];m=r[3];if(c!==P[0]||v!==P[1]||w!==P[2]||m!==P[3])f.blendFuncSeparate(c,v,w,m),P[0]=c,P[1]=v,P[2]=w,P[3]=m;c=H.depth_enable;c!==D.depth_enable&&(c?f.enable(2929):f.disable(2929),D.depth_enable=c);c=H.depth_func;c!==D.depth_func&&(f.depthFunc(c),D.depth_func=c);c=pa[0];v=pa[1];if(c!==A[0]||v!==
A[1])f.depthRange(c,v),A[0]=c,A[1]=v;c=H.depth_mask;c!==D.depth_mask&&(f.depthMask(c),D.depth_mask=c);c=Q[0];v=Q[1];w=Q[2];m=Q[3];if(c!==qa[0]||v!==qa[1]||w!==qa[2]||m!==qa[3])f.colorMask(c,v,w,m),qa[0]=c,qa[1]=v,qa[2]=w,qa[3]=m;c=H.cull_enable;c!==D.cull_enable&&(c?f.enable(2884):f.disable(2884),D.cull_enable=c);c=H.cull_face;c!==D.cull_face&&(f.cullFace(c),D.cull_face=c);c=H.frontFace;c!==D.frontFace&&(f.frontFace(c),D.frontFace=c);c=H.lineWidth;c!==D.lineWidth&&(f.lineWidth(c),D.lineWidth=c);c=
H.polygonOffset_enable;c!==D.polygonOffset_enable&&(c?f.enable(32823):f.disable(32823),D.polygonOffset_enable=c);c=I[0];v=I[1];if(c!==ga[0]||v!==ga[1])f.polygonOffset(c,v),ga[0]=c,ga[1]=v;c=H.sample_alpha;c!==D.sample_alpha&&(c?f.enable(32926):f.disable(32926),D.sample_alpha=c);c=H.sample_enable;c!==D.sample_enable&&(c?f.enable(32928):f.disable(32928),D.sample_enable=c);c=R[0];v=R[1];if(c!==na[0]||v!==na[1])f.sampleCoverage(c,v),na[0]=c,na[1]=v;c=H.stencil_enable;c!==D.stencil_enable&&(c?f.enable(2960):
f.disable(2960),D.stencil_enable=c);c=H.stencil_mask;c!==D.stencil_mask&&(f.stencilMask(c),D.stencil_mask=c);c=ya[0];v=ya[1];w=ya[2];if(c!==ha[0]||v!==ha[1]||w!==ha[2])f.stencilFunc(c,v,w),ha[0]=c,ha[1]=v,ha[2]=w;c=oa[0];v=oa[1];w=oa[2];m=oa[3];if(c!==za[0]||v!==za[1]||w!==za[2]||m!==za[3])f.stencilOpSeparate(c,v,w,m),za[0]=c,za[1]=v,za[2]=w,za[3]=m;c=Ca[0];v=Ca[1];w=Ca[2];m=Ca[3];if(c!==ja[0]||v!==ja[1]||w!==ja[2]||m!==ja[3])f.stencilOpSeparate(c,v,w,m),ja[0]=c,ja[1]=v,ja[2]=w,ja[3]=m;c=H.scissor_enable;
c!==D.scissor_enable&&(c?f.enable(3089):f.disable(3089),D.scissor_enable=c);c=ra[0];v=ra[1];w=ra[2];m=ra[3];if(c!==Ba[0]||v!==Ba[1]||w!==Ba[2]||m!==Ba[3])f.scissor(c,v,w,m),Ba[0]=c,Ba[1]=v,Ba[2]=w,Ba[3]=m;c=Ma[0];v=Ma[1];w=Ma[2];m=Ma[3];if(c!==Aa[0]||v!==Aa[1]||w!==Aa[2]||m!==Aa[3])f.viewport(c,v,w,m),Aa[0]=c,Aa[1]=v,Aa[2]=w,Aa[3]=m;D.dirty=!1}if(c=D.profile)k=performance.now(),x.count+=d;f.useProgram(L.program);X.setVAO(null);v=W.location;w=Y[v];w.buffer||f.enableVertexAttribArray(v);if(w.type!==
e.dtype||3!==w.size||w.buffer!==e||!1!==w.normalized||0!==w.offset||0!==w.stride)f.bindBuffer(34962,e.buffer),f.vertexAttribPointer(v,3,e.dtype,!1,0,0),w.type=e.dtype,w.size=3,w.buffer=e,w.normalized=!1,w.offset=0,w.stride=0;f.uniformMatrix4fv(p.location,!1,da);v=u.call(this,G,void 0,h);Z(v)&&16===v.length||g.commandRaise(J,t);f.uniformMatrix4fv(z.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(ua[0]=v[0],ua[1]=v[1],ua[2]=v[2],ua[3]=v[3],ua[4]=v[4],ua[5]=v[5],ua[6]=v[6],ua[7]=v[7],ua[8]=
v[8],ua[9]=v[9],ua[10]=v[10],ua[11]=v[11],ua[12]=v[12],ua[13]=v[13],ua[14]=v[14],ua[15]=v[15],ua));h=aa.call(this,G,void 0,h);Z(h)&&16===h.length||g.commandRaise(b,t);f.uniformMatrix4fv(B.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Da[0]=h[0],Da[1]=h[1],Da[2]=h[2],Da[3]=h[3],Da[4]=h[4],Da[5]=h[5],Da[6]=h[6],Da[7]=h[7],Da[8]=h[8],Da[9]=h[9],Da[10]=h[10],Da[11]=h[11],Da[12]=h[12],Da[13]=h[13],Da[14]=h[14],Da[15]=h[15],Da));n&&f.bindBuffer(34963,n.buffer.buffer);v=n.primType;w=n.vertCount-
0;0<=w||g.commandRaise(U,t);for(h=0;h<d;++h)w&&f.drawElements(v,w,n.type,0<<(n.type-5121>>1));X.setVAO(null);c&&(x.cpuTime+=performance.now()-k)}}},$20:function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M,C,L,u,J,aa){var b,n,U,p,W,B,z,Y,G,D,k,V,f,Z,H,la,ma,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba;b=a.context;n=a.current;U=a.framebuffer;p=a.gl;W=a.next;B=a.shader;z=a.uniforms;Y=a.vao;G=W.blend_color;D=n.blend_color;k=W.blend_equation;V=n.blend_equation;f=W.blend_func;Z=n.blend_func;H=W.colorMask;la=n.colorMask;
ma=W.depth_range;X=n.depth_range;ea=W.polygonOffset_offset;T=n.polygonOffset_offset;S=W.sample_coverage;N=n.sample_coverage;r=W.scissor_box;P=n.scissor_box;Q=W.stencil_func;qa=n.stencil_func;pa=W.stencil_opBack;A=n.stencil_opBack;I=W.stencil_opFront;ga=n.stencil_opFront;R=W.viewport;na=n.viewport;ra={};Ba={};return{draw:function(a){var g,m,C,z,q,u,E,F,K,v,w,da,J;g=b.center;m=b.distance;C=b.eye;z=b.phi;q=b.projection;u=c.call(this,b,a,0);E=b.theta;F=b.up;K=b.view;b.center=h;b.distance=2.302585092994046;
b.eye=e;b.phi=0;b.projection=u;b.theta=0;b.up=d;b.view=y;u=U.next;u!==U.cur&&(u?p.bindFramebuffer(36160,u.framebuffer):p.bindFramebuffer(36160,null),U.cur=u);if(n.dirty){u=W.dither;u!==n.dither&&(u?p.enable(3024):p.disable(3024),n.dither=u);u=W.blend_enable;u!==n.blend_enable&&(u?p.enable(3042):p.disable(3042),n.blend_enable=u);u=G[0];w=G[1];da=G[2];J=G[3];if(u!==D[0]||w!==D[1]||da!==D[2]||J!==D[3])p.blendColor(u,w,da,J),D[0]=u,D[1]=w,D[2]=da,D[3]=J;u=k[0];w=k[1];if(u!==V[0]||w!==V[1])p.blendEquationSeparate(u,
w),V[0]=u,V[1]=w;u=f[0];w=f[1];da=f[2];J=f[3];if(u!==Z[0]||w!==Z[1]||da!==Z[2]||J!==Z[3])p.blendFuncSeparate(u,w,da,J),Z[0]=u,Z[1]=w,Z[2]=da,Z[3]=J;u=W.depth_enable;u!==n.depth_enable&&(u?p.enable(2929):p.disable(2929),n.depth_enable=u);u=W.depth_func;u!==n.depth_func&&(p.depthFunc(u),n.depth_func=u);u=ma[0];w=ma[1];if(u!==X[0]||w!==X[1])p.depthRange(u,w),X[0]=u,X[1]=w;u=W.depth_mask;u!==n.depth_mask&&(p.depthMask(u),n.depth_mask=u);u=H[0];w=H[1];da=H[2];J=H[3];if(u!==la[0]||w!==la[1]||da!==la[2]||
J!==la[3])p.colorMask(u,w,da,J),la[0]=u,la[1]=w,la[2]=da,la[3]=J;u=W.cull_enable;u!==n.cull_enable&&(u?p.enable(2884):p.disable(2884),n.cull_enable=u);u=W.cull_face;u!==n.cull_face&&(p.cullFace(u),n.cull_face=u);u=W.frontFace;u!==n.frontFace&&(p.frontFace(u),n.frontFace=u);u=W.lineWidth;u!==n.lineWidth&&(p.lineWidth(u),n.lineWidth=u);u=W.polygonOffset_enable;u!==n.polygonOffset_enable&&(u?p.enable(32823):p.disable(32823),n.polygonOffset_enable=u);u=ea[0];w=ea[1];if(u!==T[0]||w!==T[1])p.polygonOffset(u,
w),T[0]=u,T[1]=w;u=W.sample_alpha;u!==n.sample_alpha&&(u?p.enable(32926):p.disable(32926),n.sample_alpha=u);u=W.sample_enable;u!==n.sample_enable&&(u?p.enable(32928):p.disable(32928),n.sample_enable=u);u=S[0];w=S[1];if(u!==N[0]||w!==N[1])p.sampleCoverage(u,w),N[0]=u,N[1]=w;u=W.stencil_enable;u!==n.stencil_enable&&(u?p.enable(2960):p.disable(2960),n.stencil_enable=u);u=W.stencil_mask;u!==n.stencil_mask&&(p.stencilMask(u),n.stencil_mask=u);u=Q[0];w=Q[1];da=Q[2];if(u!==qa[0]||w!==qa[1]||da!==qa[2])p.stencilFunc(u,
w,da),qa[0]=u,qa[1]=w,qa[2]=da;u=I[0];w=I[1];da=I[2];J=I[3];if(u!==ga[0]||w!==ga[1]||da!==ga[2]||J!==ga[3])p.stencilOpSeparate(u,w,da,J),ga[0]=u,ga[1]=w,ga[2]=da,ga[3]=J;u=pa[0];w=pa[1];da=pa[2];J=pa[3];if(u!==A[0]||w!==A[1]||da!==A[2]||J!==A[3])p.stencilOpSeparate(u,w,da,J),A[0]=u,A[1]=w,A[2]=da,A[3]=J;u=W.scissor_enable;u!==n.scissor_enable&&(u?p.enable(3089):p.disable(3089),n.scissor_enable=u);u=r[0];w=r[1];da=r[2];J=r[3];if(u!==P[0]||w!==P[1]||da!==P[2]||J!==P[3])p.scissor(u,w,da,J),P[0]=u,P[1]=
w,P[2]=da,P[3]=J;u=R[0];w=R[1];da=R[2];J=R[3];if(u!==na[0]||w!==na[1]||da!==na[2]||J!==na[3])p.viewport(u,w,da,J),na[0]=u,na[1]=w,na[2]=da,na[3]=J;n.dirty=!1}if(u=n.profile)v=performance.now(),x.count++;w=B.program(B.vert,B.frag,t);p.useProgram(w.program);Y.setVAO(null);da=w.id;(J=ra[da])||(J=ra[da]=l(w));J.call(this,a);Y.setVAO(null);b.center=g;b.distance=m;b.eye=C;b.phi=z;b.projection=q;b.theta=E;b.up=F;b.view=K;u&&(x.cpuTime+=performance.now()-v)},scope:function(a,e,d){var c,f,g,k,h,r,t,v,w,p,
l,u,B,A,y,C,D,G,R;c=b.center;f=b.distance;g=b.eye;k=b.phi;h=b.projection;r=q.call(this,b,a,d);t=b.theta;v=b.up;w=b.view;b.center=F;b.distance=2.302585092994046;b.eye=K;b.phi=0;b.projection=r;b.theta=0;b.up=m;b.view=E;if(r=n.profile)p=performance.now(),x.count++;l=b.center;u=z[1];z[1]=l;B=b.distance;l=z[2];z[2]=B;A=b.eye;B=z[3];z[3]=A;y=b.phi;A=z[4];z[4]=y;C=b.projection;y=z[5];z[5]=C;D=b.theta;C=z[6];z[6]=D;G=b.up;D=z[7];z[7]=G;G=b.view;R=z[8];z[8]=G;e(b,a,d);b.center=c;b.distance=f;b.eye=g;b.phi=
k;b.projection=h;b.theta=t;b.up=v;b.view=w;r&&(x.cpuTime+=performance.now()-p);z[1]=u;z[2]=l;z[3]=B;z[4]=A;z[5]=y;z[6]=C;z[7]=D;z[8]=R},batch:function(a,e){var d,c,g,h,m,l,y,z,v,w,q,E,F;d=b.center;c=b.distance;g=b.eye;h=b.phi;m=b.projection;l=L.call(this,b,a,0);y=b.theta;z=b.up;v=b.view;b.center=M;b.distance=2.302585092994046;b.eye=C;b.phi=0;b.projection=l;b.theta=0;b.up=u;b.view=J;l=U.next;l!==U.cur&&(l?p.bindFramebuffer(36160,l.framebuffer):p.bindFramebuffer(36160,null),U.cur=l);if(n.dirty){l=W.dither;
l!==n.dither&&(l?p.enable(3024):p.disable(3024),n.dither=l);l=W.blend_enable;l!==n.blend_enable&&(l?p.enable(3042):p.disable(3042),n.blend_enable=l);l=G[0];q=G[1];E=G[2];F=G[3];if(l!==D[0]||q!==D[1]||E!==D[2]||F!==D[3])p.blendColor(l,q,E,F),D[0]=l,D[1]=q,D[2]=E,D[3]=F;l=k[0];q=k[1];if(l!==V[0]||q!==V[1])p.blendEquationSeparate(l,q),V[0]=l,V[1]=q;l=f[0];q=f[1];E=f[2];F=f[3];if(l!==Z[0]||q!==Z[1]||E!==Z[2]||F!==Z[3])p.blendFuncSeparate(l,q,E,F),Z[0]=l,Z[1]=q,Z[2]=E,Z[3]=F;l=W.depth_enable;l!==n.depth_enable&&
(l?p.enable(2929):p.disable(2929),n.depth_enable=l);l=W.depth_func;l!==n.depth_func&&(p.depthFunc(l),n.depth_func=l);l=ma[0];q=ma[1];if(l!==X[0]||q!==X[1])p.depthRange(l,q),X[0]=l,X[1]=q;l=W.depth_mask;l!==n.depth_mask&&(p.depthMask(l),n.depth_mask=l);l=H[0];q=H[1];E=H[2];F=H[3];if(l!==la[0]||q!==la[1]||E!==la[2]||F!==la[3])p.colorMask(l,q,E,F),la[0]=l,la[1]=q,la[2]=E,la[3]=F;l=W.cull_enable;l!==n.cull_enable&&(l?p.enable(2884):p.disable(2884),n.cull_enable=l);l=W.cull_face;l!==n.cull_face&&(p.cullFace(l),
n.cull_face=l);l=W.frontFace;l!==n.frontFace&&(p.frontFace(l),n.frontFace=l);l=W.lineWidth;l!==n.lineWidth&&(p.lineWidth(l),n.lineWidth=l);l=W.polygonOffset_enable;l!==n.polygonOffset_enable&&(l?p.enable(32823):p.disable(32823),n.polygonOffset_enable=l);l=ea[0];q=ea[1];if(l!==T[0]||q!==T[1])p.polygonOffset(l,q),T[0]=l,T[1]=q;l=W.sample_alpha;l!==n.sample_alpha&&(l?p.enable(32926):p.disable(32926),n.sample_alpha=l);l=W.sample_enable;l!==n.sample_enable&&(l?p.enable(32928):p.disable(32928),n.sample_enable=
l);l=S[0];q=S[1];if(l!==N[0]||q!==N[1])p.sampleCoverage(l,q),N[0]=l,N[1]=q;l=W.stencil_enable;l!==n.stencil_enable&&(l?p.enable(2960):p.disable(2960),n.stencil_enable=l);l=W.stencil_mask;l!==n.stencil_mask&&(p.stencilMask(l),n.stencil_mask=l);l=Q[0];q=Q[1];E=Q[2];if(l!==qa[0]||q!==qa[1]||E!==qa[2])p.stencilFunc(l,q,E),qa[0]=l,qa[1]=q,qa[2]=E;l=I[0];q=I[1];E=I[2];F=I[3];if(l!==ga[0]||q!==ga[1]||E!==ga[2]||F!==ga[3])p.stencilOpSeparate(l,q,E,F),ga[0]=l,ga[1]=q,ga[2]=E,ga[3]=F;l=pa[0];q=pa[1];E=pa[2];
F=pa[3];if(l!==A[0]||q!==A[1]||E!==A[2]||F!==A[3])p.stencilOpSeparate(l,q,E,F),A[0]=l,A[1]=q,A[2]=E,A[3]=F;l=W.scissor_enable;l!==n.scissor_enable&&(l?p.enable(3089):p.disable(3089),n.scissor_enable=l);l=r[0];q=r[1];E=r[2];F=r[3];if(l!==P[0]||q!==P[1]||E!==P[2]||F!==P[3])p.scissor(l,q,E,F),P[0]=l,P[1]=q,P[2]=E,P[3]=F;l=R[0];q=R[1];E=R[2];F=R[3];if(l!==na[0]||q!==na[1]||E!==na[2]||F!==na[3])p.viewport(l,q,E,F),na[0]=l,na[1]=q,na[2]=E,na[3]=F;n.dirty=!1}if(l=n.profile)w=performance.now(),x.count+=e;
q=B.program(B.vert,B.frag,t);p.useProgram(q.program);Y.setVAO(null);E=q.id;(F=Ba[E])||(F=Ba[E]=aa(q));F.call(this,a,e);Y.setVAO(null);b.center=d;b.distance=c;b.eye=g;b.phi=h;b.projection=m;b.theta=y;b.up=z;b.view=v;l&&(x.cpuTime+=performance.now()-w)}}},"$27,position,projection,tex,uv,view":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M,C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,k,V){var f,Z,H,la,ma,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa,Bb,Xa,v,w,da,ua,Da,lb,Ib;f=a.attributes;Z=a.context;
H=a.current;la=a.draw;ma=a.framebuffer;X=a.gl;ea=a.isArrayLike;T=a.next;S=a.shader;N=a.uniforms;r=a.vao;P=T.blend_color;Q=H.blend_color;qa=T.blend_equation;pa=H.blend_equation;A=T.blend_func;I=H.blend_func;ga=T.colorMask;R=H.colorMask;na=T.depth_range;ra=H.depth_range;Ba=T.polygonOffset_offset;ya=H.polygonOffset_offset;ha=T.sample_coverage;Ca=H.sample_coverage;ja=T.scissor_box;oa=H.scissor_box;za=T.stencil_func;Ma=H.stencil_func;Aa=T.stencil_opBack;Bb=H.stencil_opBack;Xa=T.stencil_opFront;v=H.stencil_opFront;
w=T.viewport;da=H.viewport;ua=new Float32Array(16);Da=new Float32Array(16);lb=new Float32Array(16);Ib=new Float32Array(16);return{draw:function(a){var b,n,p,u;b=ma.next;b!==ma.cur&&(b?X.bindFramebuffer(36160,b.framebuffer):X.bindFramebuffer(36160,null),ma.cur=b);if(H.dirty){var B;b=T.dither;b!==H.dither&&(b?X.enable(3024):X.disable(3024),H.dither=b);b=T.blend_enable;b!==H.blend_enable&&(b?X.enable(3042):X.disable(3042),H.blend_enable=b);b=P[0];p=P[1];u=P[2];B=P[3];if(b!==Q[0]||p!==Q[1]||u!==Q[2]||
B!==Q[3])X.blendColor(b,p,u,B),Q[0]=b,Q[1]=p,Q[2]=u,Q[3]=B;b=qa[0];p=qa[1];if(b!==pa[0]||p!==pa[1])X.blendEquationSeparate(b,p),pa[0]=b,pa[1]=p;b=A[0];p=A[1];u=A[2];B=A[3];if(b!==I[0]||p!==I[1]||u!==I[2]||B!==I[3])X.blendFuncSeparate(b,p,u,B),I[0]=b,I[1]=p,I[2]=u,I[3]=B;b=T.depth_enable;b!==H.depth_enable&&(b?X.enable(2929):X.disable(2929),H.depth_enable=b);b=T.depth_func;b!==H.depth_func&&(X.depthFunc(b),H.depth_func=b);b=na[0];p=na[1];if(b!==ra[0]||p!==ra[1])X.depthRange(b,p),ra[0]=b,ra[1]=p;b=
T.depth_mask;b!==H.depth_mask&&(X.depthMask(b),H.depth_mask=b);b=ga[0];p=ga[1];u=ga[2];B=ga[3];if(b!==R[0]||p!==R[1]||u!==R[2]||B!==R[3])X.colorMask(b,p,u,B),R[0]=b,R[1]=p,R[2]=u,R[3]=B;b=T.cull_enable;b!==H.cull_enable&&(b?X.enable(2884):X.disable(2884),H.cull_enable=b);b=T.cull_face;b!==H.cull_face&&(X.cullFace(b),H.cull_face=b);b=T.frontFace;b!==H.frontFace&&(X.frontFace(b),H.frontFace=b);b=T.lineWidth;b!==H.lineWidth&&(X.lineWidth(b),H.lineWidth=b);b=T.polygonOffset_enable;b!==H.polygonOffset_enable&&
(b?X.enable(32823):X.disable(32823),H.polygonOffset_enable=b);b=Ba[0];p=Ba[1];if(b!==ya[0]||p!==ya[1])X.polygonOffset(b,p),ya[0]=b,ya[1]=p;b=T.sample_alpha;b!==H.sample_alpha&&(b?X.enable(32926):X.disable(32926),H.sample_alpha=b);b=T.sample_enable;b!==H.sample_enable&&(b?X.enable(32928):X.disable(32928),H.sample_enable=b);b=ha[0];p=ha[1];if(b!==Ca[0]||p!==Ca[1])X.sampleCoverage(b,p),Ca[0]=b,Ca[1]=p;b=T.stencil_enable;b!==H.stencil_enable&&(b?X.enable(2960):X.disable(2960),H.stencil_enable=b);b=T.stencil_mask;
b!==H.stencil_mask&&(X.stencilMask(b),H.stencil_mask=b);b=za[0];p=za[1];u=za[2];if(b!==Ma[0]||p!==Ma[1]||u!==Ma[2])X.stencilFunc(b,p,u),Ma[0]=b,Ma[1]=p,Ma[2]=u;b=Xa[0];p=Xa[1];u=Xa[2];B=Xa[3];if(b!==v[0]||p!==v[1]||u!==v[2]||B!==v[3])X.stencilOpSeparate(b,p,u,B),v[0]=b,v[1]=p,v[2]=u,v[3]=B;b=Aa[0];p=Aa[1];u=Aa[2];B=Aa[3];if(b!==Bb[0]||p!==Bb[1]||u!==Bb[2]||B!==Bb[3])X.stencilOpSeparate(b,p,u,B),Bb[0]=b,Bb[1]=p,Bb[2]=u,Bb[3]=B;b=T.scissor_enable;b!==H.scissor_enable&&(b?X.enable(3089):X.disable(3089),
H.scissor_enable=b);b=ja[0];p=ja[1];u=ja[2];B=ja[3];if(b!==oa[0]||p!==oa[1]||u!==oa[2]||B!==oa[3])X.scissor(b,p,u,B),oa[0]=b,oa[1]=p,oa[2]=u,oa[3]=B;b=w[0];p=w[1];u=w[2];B=w[3];if(b!==da[0]||p!==da[1]||u!==da[2]||B!==da[3])X.viewport(b,p,u,B),da[0]=b,da[1]=p,da[2]=u,da[3]=B;H.dirty=!1}if(b=H.profile)n=performance.now(),x.count++;X.useProgram(h.program);r.setVAO(null);p=Y.location;u=f[p];u.buffer||X.enableVertexAttribArray(p);if(u.type!==e.dtype||3!==u.size||u.buffer!==e||!1!==u.normalized||0!==u.offset||
0!==u.stride)X.bindBuffer(34962,e.buffer),X.vertexAttribPointer(p,3,e.dtype,!1,0,0),u.type=e.dtype,u.size=3,u.buffer=e,u.normalized=!1,u.offset=0,u.stride=0;p=k.location;u=f[p];u.buffer||X.enableVertexAttribArray(p);if(u.type!==c.dtype||2!==u.size||u.buffer!==c||!1!==u.normalized||0!==u.offset||0!==u.stride)X.bindBuffer(34962,c.buffer),X.vertexAttribPointer(p,2,c.dtype,!1,0,0),u.type=c.dtype,u.size=2,u.buffer=c,u.normalized=!1,u.offset=0,u.stride=0;p=d.call(this,Z,a,0);ea(p)&&16===p.length||g.commandRaise(y,
t);X.uniformMatrix4fv(G.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(ua[0]=p[0],ua[1]=p[1],ua[2]=p[2],ua[3]=p[3],ua[4]=p[4],ua[5]=p[5],ua[6]=p[6],ua[7]=p[7],ua[8]=p[8],ua[9]=p[9],ua[10]=p[10],ua[11]=p[11],ua[12]=p[12],ua[13]=p[13],ua[14]=p[14],ua[15]=p[15],ua));p=l.call(this,Z,a,0);ea(p)&&16===p.length||g.commandRaise(F,t);X.uniformMatrix4fv(V.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Da[0]=p[0],Da[1]=p[1],Da[2]=p[2],Da[3]=p[3],Da[4]=p[4],Da[5]=p[5],Da[6]=p[6],Da[7]=
p[7],Da[8]=p[8],Da[9]=p[9],Da[10]=p[10],Da[11]=p[11],Da[12]=p[12],Da[13]=p[13],Da[14]=p[14],Da[15]=p[15],Da));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||g.commandRaise(K,t);a=a._texture;X.uniform1i(D.location,a.bind());q&&X.bindBuffer(34963,q.buffer.buffer);p=q.primType;u=q.vertCount-0;0<=u||g.commandRaise(m,t);u&&(X.drawElements(p,u,q.type,0<<(q.type-5121>>1)),r.setVAO(null),b&&(x.cpuTime+=performance.now()-n),a.unbind())},scope:function(a,
b,d){var f,k,h,n,v,w,r,p,l,m,B,A,q,y,z,D,G,da,R,F,ha,I,K,P,Q,aa,U,Bb,ra,ya,T,W,V,X,ja;if(f=H.profile)k=performance.now(),x.count++;h=la.elements;la.elements=E;n=la.offset;la.offset=0;v=E.vertCount-0;0<=v||g.commandRaise(M,t);w=la.count;la.count=v;r=E.primType;v=la.primitive;la.primitive=r;p=C.call(this,Z,a,d);r=N[3];N[3]=p;l=a.texture;p=N[5];N[5]=l;m=L.call(this,Z,a,d);l=N[4];N[4]=m;m=u.buffer;u.buffer=e;B=u.divisor;u.divisor=0;A=u.normalized;u.normalized=!1;q=u.offset;u.offset=0;y=u.size;u.size=
0;z=u.state;u.state=1;D=u.stride;u.stride=0;G=u.type;u.type=e.dtype;da=u.w;u.w=0;R=u.x;u.x=0;F=u.y;u.y=0;ha=u.z;u.z=0;I=J.buffer;J.buffer=c;K=J.divisor;J.divisor=0;P=J.normalized;J.normalized=!1;Q=J.offset;J.offset=0;aa=J.size;J.size=0;U=J.state;J.state=1;Bb=J.stride;J.stride=0;ra=J.type;J.type=c.dtype;ya=J.w;J.w=0;T=J.x;J.x=0;W=J.y;J.y=0;V=J.z;J.z=0;X=S.vert;S.vert=2;ja=S.frag;S.frag=1;b(Z,a,d);f&&(x.cpuTime+=performance.now()-k);la.elements=h;la.offset=n;la.count=w;la.primitive=v;N[3]=r;N[5]=p;
N[4]=l;u.buffer=m;u.divisor=B;u.normalized=A;u.offset=q;u.size=y;u.state=z;u.stride=D;u.type=G;u.w=da;u.x=R;u.y=F;u.z=ha;J.buffer=I;J.divisor=K;J.normalized=P;J.offset=Q;J.size=aa;J.state=U;J.stride=Bb;J.type=ra;J.w=ya;J.x=T;J.y=W;J.z=V;S.vert=X;S.frag=ja},batch:function(a,d){var h,l,m,u;h=ma.next;h!==ma.cur&&(h?X.bindFramebuffer(36160,h.framebuffer):X.bindFramebuffer(36160,null),ma.cur=h);if(H.dirty){var q,y,C;h=T.dither;h!==H.dither&&(h?X.enable(3024):X.disable(3024),H.dither=h);h=T.blend_enable;
h!==H.blend_enable&&(h?X.enable(3042):X.disable(3042),H.blend_enable=h);h=P[0];q=P[1];y=P[2];C=P[3];if(h!==Q[0]||q!==Q[1]||y!==Q[2]||C!==Q[3])X.blendColor(h,q,y,C),Q[0]=h,Q[1]=q,Q[2]=y,Q[3]=C;h=qa[0];q=qa[1];if(h!==pa[0]||q!==pa[1])X.blendEquationSeparate(h,q),pa[0]=h,pa[1]=q;h=A[0];q=A[1];y=A[2];C=A[3];if(h!==I[0]||q!==I[1]||y!==I[2]||C!==I[3])X.blendFuncSeparate(h,q,y,C),I[0]=h,I[1]=q,I[2]=y,I[3]=C;h=T.depth_enable;h!==H.depth_enable&&(h?X.enable(2929):X.disable(2929),H.depth_enable=h);h=T.depth_func;
h!==H.depth_func&&(X.depthFunc(h),H.depth_func=h);h=na[0];q=na[1];if(h!==ra[0]||q!==ra[1])X.depthRange(h,q),ra[0]=h,ra[1]=q;h=T.depth_mask;h!==H.depth_mask&&(X.depthMask(h),H.depth_mask=h);h=ga[0];q=ga[1];y=ga[2];C=ga[3];if(h!==R[0]||q!==R[1]||y!==R[2]||C!==R[3])X.colorMask(h,q,y,C),R[0]=h,R[1]=q,R[2]=y,R[3]=C;h=T.cull_enable;h!==H.cull_enable&&(h?X.enable(2884):X.disable(2884),H.cull_enable=h);h=T.cull_face;h!==H.cull_face&&(X.cullFace(h),H.cull_face=h);h=T.frontFace;h!==H.frontFace&&(X.frontFace(h),
H.frontFace=h);h=T.lineWidth;h!==H.lineWidth&&(X.lineWidth(h),H.lineWidth=h);h=T.polygonOffset_enable;h!==H.polygonOffset_enable&&(h?X.enable(32823):X.disable(32823),H.polygonOffset_enable=h);h=Ba[0];q=Ba[1];if(h!==ya[0]||q!==ya[1])X.polygonOffset(h,q),ya[0]=h,ya[1]=q;h=T.sample_alpha;h!==H.sample_alpha&&(h?X.enable(32926):X.disable(32926),H.sample_alpha=h);h=T.sample_enable;h!==H.sample_enable&&(h?X.enable(32928):X.disable(32928),H.sample_enable=h);h=ha[0];q=ha[1];if(h!==Ca[0]||q!==Ca[1])X.sampleCoverage(h,
q),Ca[0]=h,Ca[1]=q;h=T.stencil_enable;h!==H.stencil_enable&&(h?X.enable(2960):X.disable(2960),H.stencil_enable=h);h=T.stencil_mask;h!==H.stencil_mask&&(X.stencilMask(h),H.stencil_mask=h);h=za[0];q=za[1];y=za[2];if(h!==Ma[0]||q!==Ma[1]||y!==Ma[2])X.stencilFunc(h,q,y),Ma[0]=h,Ma[1]=q,Ma[2]=y;h=Xa[0];q=Xa[1];y=Xa[2];C=Xa[3];if(h!==v[0]||q!==v[1]||y!==v[2]||C!==v[3])X.stencilOpSeparate(h,q,y,C),v[0]=h,v[1]=q,v[2]=y,v[3]=C;h=Aa[0];q=Aa[1];y=Aa[2];C=Aa[3];if(h!==Bb[0]||q!==Bb[1]||y!==Bb[2]||C!==Bb[3])X.stencilOpSeparate(h,
q,y,C),Bb[0]=h,Bb[1]=q,Bb[2]=y,Bb[3]=C;h=T.scissor_enable;h!==H.scissor_enable&&(h?X.enable(3089):X.disable(3089),H.scissor_enable=h);h=ja[0];q=ja[1];y=ja[2];C=ja[3];if(h!==oa[0]||q!==oa[1]||y!==oa[2]||C!==oa[3])X.scissor(h,q,y,C),oa[0]=h,oa[1]=q,oa[2]=y,oa[3]=C;h=w[0];q=w[1];y=w[2];C=w[3];if(h!==da[0]||q!==da[1]||y!==da[2]||C!==da[3])X.viewport(h,q,y,C),da[0]=h,da[1]=q,da[2]=y,da[3]=C;H.dirty=!1}if(h=H.profile)l=performance.now(),x.count+=d;X.useProgram(aa.program);r.setVAO(null);q=Y.location;y=
f[q];y.buffer||X.enableVertexAttribArray(q);if(y.type!==e.dtype||3!==y.size||y.buffer!==e||!1!==y.normalized||0!==y.offset||0!==y.stride)X.bindBuffer(34962,e.buffer),X.vertexAttribPointer(q,3,e.dtype,!1,0,0),y.type=e.dtype,y.size=3,y.buffer=e,y.normalized=!1,y.offset=0,y.stride=0;q=k.location;y=f[q];y.buffer||X.enableVertexAttribArray(q);if(y.type!==c.dtype||2!==y.size||y.buffer!==c||!1!==y.normalized||0!==y.offset||0!==y.stride)X.bindBuffer(34962,c.buffer),X.vertexAttribPointer(q,2,c.dtype,!1,0,
0),y.type=c.dtype,y.size=2,y.buffer=c,y.normalized=!1,y.offset=0,y.stride=0;q=b.call(this,Z,u,m);ea(q)&&16===q.length||g.commandRaise(n,t);X.uniformMatrix4fv(G.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(lb[0]=q[0],lb[1]=q[1],lb[2]=q[2],lb[3]=q[3],lb[4]=q[4],lb[5]=q[5],lb[6]=q[6],lb[7]=q[7],lb[8]=q[8],lb[9]=q[9],lb[10]=q[10],lb[11]=q[11],lb[12]=q[12],lb[13]=q[13],lb[14]=q[14],lb[15]=q[15],lb));m=U.call(this,Z,u,m);ea(m)&&16===m.length||g.commandRaise(p,t);X.uniformMatrix4fv(V.location,
!1,Array.isArray(m)||m instanceof Float32Array?m:(Ib[0]=m[0],Ib[1]=m[1],Ib[2]=m[2],Ib[3]=m[3],Ib[4]=m[4],Ib[5]=m[5],Ib[6]=m[6],Ib[7]=m[7],Ib[8]=m[8],Ib[9]=m[9],Ib[10]=m[10],Ib[11]=m[11],Ib[12]=m[12],Ib[13]=m[13],Ib[14]=m[14],Ib[15]=m[15],Ib));B&&X.bindBuffer(34963,B.buffer.buffer);q=B.primType;y=B.vertCount-0;0<=y||g.commandRaise(z,t);for(m=0;m<d;++m)u=a[m],(u=u.texture)&&"framebuffer"===u._reglType&&(u=u.color[0]),"function"===typeof u&&"texture2d"===u._reglType||g.commandRaise(W,t),u=u._texture,
X.uniform1i(D.location,u.bind()),y&&(X.drawElements(q,y,B.type,0<<(B.type-5121>>1)),u.unbind());r.setVAO(null);h&&(x.cpuTime+=performance.now()-l)}}},"$19,normal,position,projection,view":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M,C,L,u,J,aa,b,n,U){var p,W,B,z,Y,G,D,k,V,f,Z,H,la,ma,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za,Ma,Aa;p=a.attributes;W=a.context;B=a.current;z=a.draw;Y=a.framebuffer;G=a.gl;D=a.isArrayLike;k=a.next;V=a.shader;f=a.uniforms;Z=a.vao;H=k.blend_color;la=B.blend_color;
ma=k.blend_equation;X=B.blend_equation;ea=k.blend_func;T=B.blend_func;S=k.colorMask;N=B.colorMask;r=k.depth_range;P=B.depth_range;Q=k.polygonOffset_offset;qa=B.polygonOffset_offset;pa=k.sample_coverage;A=B.sample_coverage;I=k.scissor_box;ga=B.scissor_box;R=k.stencil_func;na=B.stencil_func;ra=k.stencil_opBack;Ba=B.stencil_opBack;ya=k.stencil_opFront;ha=B.stencil_opFront;Ca=k.viewport;ja=B.viewport;oa=new Float32Array(16);za=new Float32Array(16);Ma=new Float32Array(16);Aa=new Float32Array(16);return{draw:function(a){var m,
v,w;a=Y.next;a!==Y.cur&&(a?G.bindFramebuffer(36160,a.framebuffer):G.bindFramebuffer(36160,null),Y.cur=a);if(B.dirty){var u;a=k.dither;a!==B.dither&&(a?G.enable(3024):G.disable(3024),B.dither=a);a=k.blend_enable;a!==B.blend_enable&&(a?G.enable(3042):G.disable(3042),B.blend_enable=a);a=H[0];v=H[1];w=H[2];u=H[3];if(a!==la[0]||v!==la[1]||w!==la[2]||u!==la[3])G.blendColor(a,v,w,u),la[0]=a,la[1]=v,la[2]=w,la[3]=u;a=ma[0];v=ma[1];if(a!==X[0]||v!==X[1])G.blendEquationSeparate(a,v),X[0]=a,X[1]=v;a=ea[0];v=
ea[1];w=ea[2];u=ea[3];if(a!==T[0]||v!==T[1]||w!==T[2]||u!==T[3])G.blendFuncSeparate(a,v,w,u),T[0]=a,T[1]=v,T[2]=w,T[3]=u;a=k.depth_enable;a!==B.depth_enable&&(a?G.enable(2929):G.disable(2929),B.depth_enable=a);a=k.depth_func;a!==B.depth_func&&(G.depthFunc(a),B.depth_func=a);a=r[0];v=r[1];if(a!==P[0]||v!==P[1])G.depthRange(a,v),P[0]=a,P[1]=v;a=k.depth_mask;a!==B.depth_mask&&(G.depthMask(a),B.depth_mask=a);a=S[0];v=S[1];w=S[2];u=S[3];if(a!==N[0]||v!==N[1]||w!==N[2]||u!==N[3])G.colorMask(a,v,w,u),N[0]=
a,N[1]=v,N[2]=w,N[3]=u;a=k.cull_enable;a!==B.cull_enable&&(a?G.enable(2884):G.disable(2884),B.cull_enable=a);a=k.cull_face;a!==B.cull_face&&(G.cullFace(a),B.cull_face=a);a=k.frontFace;a!==B.frontFace&&(G.frontFace(a),B.frontFace=a);a=k.lineWidth;a!==B.lineWidth&&(G.lineWidth(a),B.lineWidth=a);a=k.polygonOffset_enable;a!==B.polygonOffset_enable&&(a?G.enable(32823):G.disable(32823),B.polygonOffset_enable=a);a=Q[0];v=Q[1];if(a!==qa[0]||v!==qa[1])G.polygonOffset(a,v),qa[0]=a,qa[1]=v;a=k.sample_alpha;
a!==B.sample_alpha&&(a?G.enable(32926):G.disable(32926),B.sample_alpha=a);a=k.sample_enable;a!==B.sample_enable&&(a?G.enable(32928):G.disable(32928),B.sample_enable=a);a=pa[0];v=pa[1];if(a!==A[0]||v!==A[1])G.sampleCoverage(a,v),A[0]=a,A[1]=v;a=k.stencil_enable;a!==B.stencil_enable&&(a?G.enable(2960):G.disable(2960),B.stencil_enable=a);a=k.stencil_mask;a!==B.stencil_mask&&(G.stencilMask(a),B.stencil_mask=a);a=R[0];v=R[1];w=R[2];if(a!==na[0]||v!==na[1]||w!==na[2])G.stencilFunc(a,v,w),na[0]=a,na[1]=
v,na[2]=w;a=ya[0];v=ya[1];w=ya[2];u=ya[3];if(a!==ha[0]||v!==ha[1]||w!==ha[2]||u!==ha[3])G.stencilOpSeparate(a,v,w,u),ha[0]=a,ha[1]=v,ha[2]=w,ha[3]=u;a=ra[0];v=ra[1];w=ra[2];u=ra[3];if(a!==Ba[0]||v!==Ba[1]||w!==Ba[2]||u!==Ba[3])G.stencilOpSeparate(a,v,w,u),Ba[0]=a,Ba[1]=v,Ba[2]=w,Ba[3]=u;a=k.scissor_enable;a!==B.scissor_enable&&(a?G.enable(3089):G.disable(3089),B.scissor_enable=a);a=I[0];v=I[1];w=I[2];u=I[3];if(a!==ga[0]||v!==ga[1]||w!==ga[2]||u!==ga[3])G.scissor(a,v,w,u),ga[0]=a,ga[1]=v,ga[2]=w,ga[3]=
u;a=Ca[0];v=Ca[1];w=Ca[2];u=Ca[3];if(a!==ja[0]||v!==ja[1]||w!==ja[2]||u!==ja[3])G.viewport(a,v,w,u),ja[0]=a,ja[1]=v,ja[2]=w,ja[3]=u;B.dirty=!1}if(a=B.profile)m=performance.now(),x.count++;G.useProgram(h.program);Z.setVAO(null);v=b.location;w=p[v];w.buffer||G.enableVertexAttribArray(v);if(w.type!==e.dtype||3!==w.size||w.buffer!==e||!1!==w.normalized||0!==w.offset||0!==w.stride)G.bindBuffer(34962,e.buffer),G.vertexAttribPointer(v,3,e.dtype,!1,0,0),w.type=e.dtype,w.size=3,w.buffer=e,w.normalized=!1,
w.offset=0,w.stride=0;v=aa.location;w=p[v];w.buffer||G.enableVertexAttribArray(v);if(w.type!==c.dtype||3!==w.size||w.buffer!==c||!1!==w.normalized||0!==w.offset||0!==w.stride)G.bindBuffer(34962,c.buffer),G.vertexAttribPointer(v,3,c.dtype,!1,0,0),w.type=c.dtype,w.size=3,w.buffer=c,w.normalized=!1,w.offset=0,w.stride=0;v=f[5];D(v)&&16===v.length||g.commandRaise(d,t);G.uniformMatrix4fv(n.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(oa[0]=v[0],oa[1]=v[1],oa[2]=v[2],oa[3]=v[3],oa[4]=v[4],
oa[5]=v[5],oa[6]=v[6],oa[7]=v[7],oa[8]=v[8],oa[9]=v[9],oa[10]=v[10],oa[11]=v[11],oa[12]=v[12],oa[13]=v[13],oa[14]=v[14],oa[15]=v[15],oa));v=f[8];D(v)&&16===v.length||g.commandRaise(y,t);G.uniformMatrix4fv(U.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(za[0]=v[0],za[1]=v[1],za[2]=v[2],za[3]=v[3],za[4]=v[4],za[5]=v[5],za[6]=v[6],za[7]=v[7],za[8]=v[8],za[9]=v[9],za[10]=v[10],za[11]=v[11],za[12]=v[12],za[13]=v[13],za[14]=v[14],za[15]=v[15],za));l&&G.bindBuffer(34963,l.buffer.buffer);v=l.primType;
w=l.vertCount-0;0<=w||g.commandRaise(F,t);w&&(G.drawElements(v,w,l.type,0<<(l.type-5121>>1)),Z.setVAO(null),a&&(x.cpuTime+=performance.now()-m))},scope:function(a,b,d){var f,k,h,n,r,p,l,u,y,A,C,D,G,R,F,H,ha,I,J,L,N,P,Q,S,aa,U,ra,ya,M,T,X,ja;if(f=B.profile)k=performance.now(),x.count++;h=z.elements;z.elements=K;n=z.offset;z.offset=0;r=K.vertCount-0;0<=r||g.commandRaise(q,t);p=z.count;z.count=r;l=K.primType;r=z.primitive;z.primitive=l;l=m.buffer;m.buffer=c;u=m.divisor;m.divisor=0;y=m.normalized;m.normalized=
!1;A=m.offset;m.offset=0;C=m.size;m.size=0;D=m.state;m.state=1;G=m.stride;m.stride=0;R=m.type;m.type=c.dtype;F=m.w;m.w=0;H=m.x;m.x=0;ha=m.y;m.y=0;I=m.z;m.z=0;J=E.buffer;E.buffer=e;L=E.divisor;E.divisor=0;N=E.normalized;E.normalized=!1;P=E.offset;E.offset=0;Q=E.size;E.size=0;S=E.state;E.state=1;aa=E.stride;E.stride=0;U=E.type;E.type=e.dtype;ra=E.w;E.w=0;ya=E.x;E.x=0;M=E.y;E.y=0;T=E.z;E.z=0;X=V.vert;V.vert=10;ja=V.frag;V.frag=9;b(W,a,d);f&&(x.cpuTime+=performance.now()-k);z.elements=h;z.offset=n;z.count=
p;z.primitive=r;m.buffer=l;m.divisor=u;m.normalized=y;m.offset=A;m.size=C;m.state=D;m.stride=G;m.type=R;m.w=F;m.x=H;m.y=ha;m.z=I;E.buffer=J;E.divisor=L;E.normalized=N;E.offset=P;E.size=Q;E.state=S;E.stride=aa;E.type=U;E.w=ra;E.x=ya;E.y=M;E.z=T;V.vert=X;V.frag=ja},batch:function(a,d){var h,w,l;h=Y.next;h!==Y.cur&&(h?G.bindFramebuffer(36160,h.framebuffer):G.bindFramebuffer(36160,null),Y.cur=h);if(B.dirty){var m,q;h=k.dither;h!==B.dither&&(h?G.enable(3024):G.disable(3024),B.dither=h);h=k.blend_enable;
h!==B.blend_enable&&(h?G.enable(3042):G.disable(3042),B.blend_enable=h);h=H[0];l=H[1];m=H[2];q=H[3];if(h!==la[0]||l!==la[1]||m!==la[2]||q!==la[3])G.blendColor(h,l,m,q),la[0]=h,la[1]=l,la[2]=m,la[3]=q;h=ma[0];l=ma[1];if(h!==X[0]||l!==X[1])G.blendEquationSeparate(h,l),X[0]=h,X[1]=l;h=ea[0];l=ea[1];m=ea[2];q=ea[3];if(h!==T[0]||l!==T[1]||m!==T[2]||q!==T[3])G.blendFuncSeparate(h,l,m,q),T[0]=h,T[1]=l,T[2]=m,T[3]=q;h=k.depth_enable;h!==B.depth_enable&&(h?G.enable(2929):G.disable(2929),B.depth_enable=h);
h=k.depth_func;h!==B.depth_func&&(G.depthFunc(h),B.depth_func=h);h=r[0];l=r[1];if(h!==P[0]||l!==P[1])G.depthRange(h,l),P[0]=h,P[1]=l;h=k.depth_mask;h!==B.depth_mask&&(G.depthMask(h),B.depth_mask=h);h=S[0];l=S[1];m=S[2];q=S[3];if(h!==N[0]||l!==N[1]||m!==N[2]||q!==N[3])G.colorMask(h,l,m,q),N[0]=h,N[1]=l,N[2]=m,N[3]=q;h=k.cull_enable;h!==B.cull_enable&&(h?G.enable(2884):G.disable(2884),B.cull_enable=h);h=k.cull_face;h!==B.cull_face&&(G.cullFace(h),B.cull_face=h);h=k.frontFace;h!==B.frontFace&&(G.frontFace(h),
B.frontFace=h);h=k.lineWidth;h!==B.lineWidth&&(G.lineWidth(h),B.lineWidth=h);h=k.polygonOffset_enable;h!==B.polygonOffset_enable&&(h?G.enable(32823):G.disable(32823),B.polygonOffset_enable=h);h=Q[0];l=Q[1];if(h!==qa[0]||l!==qa[1])G.polygonOffset(h,l),qa[0]=h,qa[1]=l;h=k.sample_alpha;h!==B.sample_alpha&&(h?G.enable(32926):G.disable(32926),B.sample_alpha=h);h=k.sample_enable;h!==B.sample_enable&&(h?G.enable(32928):G.disable(32928),B.sample_enable=h);h=pa[0];l=pa[1];if(h!==A[0]||l!==A[1])G.sampleCoverage(h,
l),A[0]=h,A[1]=l;h=k.stencil_enable;h!==B.stencil_enable&&(h?G.enable(2960):G.disable(2960),B.stencil_enable=h);h=k.stencil_mask;h!==B.stencil_mask&&(G.stencilMask(h),B.stencil_mask=h);h=R[0];l=R[1];m=R[2];if(h!==na[0]||l!==na[1]||m!==na[2])G.stencilFunc(h,l,m),na[0]=h,na[1]=l,na[2]=m;h=ya[0];l=ya[1];m=ya[2];q=ya[3];if(h!==ha[0]||l!==ha[1]||m!==ha[2]||q!==ha[3])G.stencilOpSeparate(h,l,m,q),ha[0]=h,ha[1]=l,ha[2]=m,ha[3]=q;h=ra[0];l=ra[1];m=ra[2];q=ra[3];if(h!==Ba[0]||l!==Ba[1]||m!==Ba[2]||q!==Ba[3])G.stencilOpSeparate(h,
l,m,q),Ba[0]=h,Ba[1]=l,Ba[2]=m,Ba[3]=q;h=k.scissor_enable;h!==B.scissor_enable&&(h?G.enable(3089):G.disable(3089),B.scissor_enable=h);h=I[0];l=I[1];m=I[2];q=I[3];if(h!==ga[0]||l!==ga[1]||m!==ga[2]||q!==ga[3])G.scissor(h,l,m,q),ga[0]=h,ga[1]=l,ga[2]=m,ga[3]=q;h=Ca[0];l=Ca[1];m=Ca[2];q=Ca[3];if(h!==ja[0]||l!==ja[1]||m!==ja[2]||q!==ja[3])G.viewport(h,l,m,q),ja[0]=h,ja[1]=l,ja[2]=m,ja[3]=q;B.dirty=!1}if(h=B.profile)w=performance.now(),x.count+=d;G.useProgram(M.program);Z.setVAO(null);l=b.location;m=p[l];
m.buffer||G.enableVertexAttribArray(l);if(m.type!==e.dtype||3!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||0!==m.stride)G.bindBuffer(34962,e.buffer),G.vertexAttribPointer(l,3,e.dtype,!1,0,0),m.type=e.dtype,m.size=3,m.buffer=e,m.normalized=!1,m.offset=0,m.stride=0;l=aa.location;m=p[l];m.buffer||G.enableVertexAttribArray(l);if(m.type!==c.dtype||3!==m.size||m.buffer!==c||!1!==m.normalized||0!==m.offset||0!==m.stride)G.bindBuffer(34962,c.buffer),G.vertexAttribPointer(l,3,c.dtype,!1,0,0),m.type=
c.dtype,m.size=3,m.buffer=c,m.normalized=!1,m.offset=0,m.stride=0;l=f[5];D(l)&&16===l.length||g.commandRaise(C,t);G.uniformMatrix4fv(n.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ma[0]=l[0],Ma[1]=l[1],Ma[2]=l[2],Ma[3]=l[3],Ma[4]=l[4],Ma[5]=l[5],Ma[6]=l[6],Ma[7]=l[7],Ma[8]=l[8],Ma[9]=l[9],Ma[10]=l[10],Ma[11]=l[11],Ma[12]=l[12],Ma[13]=l[13],Ma[14]=l[14],Ma[15]=l[15],Ma));l=f[8];D(l)&&16===l.length||g.commandRaise(L,t);G.uniformMatrix4fv(U.location,!1,Array.isArray(l)||l instanceof Float32Array?
l:(Aa[0]=l[0],Aa[1]=l[1],Aa[2]=l[2],Aa[3]=l[3],Aa[4]=l[4],Aa[5]=l[5],Aa[6]=l[6],Aa[7]=l[7],Aa[8]=l[8],Aa[9]=l[9],Aa[10]=l[10],Aa[11]=l[11],Aa[12]=l[12],Aa[13]=l[13],Aa[14]=l[14],Aa[15]=l[15],Aa));u&&G.bindBuffer(34963,u.buffer.buffer);m=u.primType;q=u.vertCount-0;0<=q||g.commandRaise(J,t);for(l=0;l<d;++l)q&&G.drawElements(m,q,u.type,0<<(u.type-5121>>1));Z.setVAO(null);h&&(x.cpuTime+=performance.now()-w)}}},"$14,angle,color,position":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M,C,L){var u,J,aa,b,n,U,p,
W,B,z,Y,G,D,k,V,f,Z,H,la,ma,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra;u=a.attributes;J=a.context;aa=a.current;b=a.draw;n=a.elements;U=a.framebuffer;p=a.gl;W=a.isArrayLike;B=a.next;z=a.shader;Y=a.uniforms;G=a.vao;D=B.blend_color;k=aa.blend_color;V=B.blend_equation;f=aa.blend_equation;Z=B.blend_func;H=aa.blend_func;la=B.colorMask;ma=aa.colorMask;X=B.depth_range;ea=aa.depth_range;T=B.polygonOffset_offset;S=aa.polygonOffset_offset;N=B.sample_coverage;r=aa.sample_coverage;P=B.scissor_box;Q=aa.scissor_box;
qa=B.stencil_func;pa=aa.stencil_func;A=B.stencil_opBack;I=aa.stencil_opBack;ga=B.stencil_opFront;R=aa.stencil_opFront;na=B.viewport;ra=aa.viewport;return{draw:function(a){var l,m,q,z;l=U.next;l!==U.cur&&(l?p.bindFramebuffer(36160,l.framebuffer):p.bindFramebuffer(36160,null),U.cur=l);if(aa.dirty){var E;l=B.dither;l!==aa.dither&&(l?p.enable(3024):p.disable(3024),aa.dither=l);l=B.blend_enable;l!==aa.blend_enable&&(l?p.enable(3042):p.disable(3042),aa.blend_enable=l);l=D[0];q=D[1];z=D[2];E=D[3];if(l!==
k[0]||q!==k[1]||z!==k[2]||E!==k[3])p.blendColor(l,q,z,E),k[0]=l,k[1]=q,k[2]=z,k[3]=E;l=V[0];q=V[1];if(l!==f[0]||q!==f[1])p.blendEquationSeparate(l,q),f[0]=l,f[1]=q;l=Z[0];q=Z[1];z=Z[2];E=Z[3];if(l!==H[0]||q!==H[1]||z!==H[2]||E!==H[3])p.blendFuncSeparate(l,q,z,E),H[0]=l,H[1]=q,H[2]=z,H[3]=E;l=B.depth_func;l!==aa.depth_func&&(p.depthFunc(l),aa.depth_func=l);l=X[0];q=X[1];if(l!==ea[0]||q!==ea[1])p.depthRange(l,q),ea[0]=l,ea[1]=q;l=B.depth_mask;l!==aa.depth_mask&&(p.depthMask(l),aa.depth_mask=l);l=la[0];
q=la[1];z=la[2];E=la[3];if(l!==ma[0]||q!==ma[1]||z!==ma[2]||E!==ma[3])p.colorMask(l,q,z,E),ma[0]=l,ma[1]=q,ma[2]=z,ma[3]=E;l=B.cull_enable;l!==aa.cull_enable&&(l?p.enable(2884):p.disable(2884),aa.cull_enable=l);l=B.cull_face;l!==aa.cull_face&&(p.cullFace(l),aa.cull_face=l);l=B.frontFace;l!==aa.frontFace&&(p.frontFace(l),aa.frontFace=l);l=B.lineWidth;l!==aa.lineWidth&&(p.lineWidth(l),aa.lineWidth=l);l=B.polygonOffset_enable;l!==aa.polygonOffset_enable&&(l?p.enable(32823):p.disable(32823),aa.polygonOffset_enable=
l);l=T[0];q=T[1];if(l!==S[0]||q!==S[1])p.polygonOffset(l,q),S[0]=l,S[1]=q;l=B.sample_alpha;l!==aa.sample_alpha&&(l?p.enable(32926):p.disable(32926),aa.sample_alpha=l);l=B.sample_enable;l!==aa.sample_enable&&(l?p.enable(32928):p.disable(32928),aa.sample_enable=l);l=N[0];q=N[1];if(l!==r[0]||q!==r[1])p.sampleCoverage(l,q),r[0]=l,r[1]=q;l=B.stencil_enable;l!==aa.stencil_enable&&(l?p.enable(2960):p.disable(2960),aa.stencil_enable=l);l=B.stencil_mask;l!==aa.stencil_mask&&(p.stencilMask(l),aa.stencil_mask=
l);l=qa[0];q=qa[1];z=qa[2];if(l!==pa[0]||q!==pa[1]||z!==pa[2])p.stencilFunc(l,q,z),pa[0]=l,pa[1]=q,pa[2]=z;l=ga[0];q=ga[1];z=ga[2];E=ga[3];if(l!==R[0]||q!==R[1]||z!==R[2]||E!==R[3])p.stencilOpSeparate(l,q,z,E),R[0]=l,R[1]=q,R[2]=z,R[3]=E;l=A[0];q=A[1];z=A[2];E=A[3];if(l!==I[0]||q!==I[1]||z!==I[2]||E!==I[3])p.stencilOpSeparate(l,q,z,E),I[0]=l,I[1]=q,I[2]=z,I[3]=E;l=B.scissor_enable;l!==aa.scissor_enable&&(l?p.enable(3089):p.disable(3089),aa.scissor_enable=l);l=P[0];q=P[1];z=P[2];E=P[3];if(l!==Q[0]||
q!==Q[1]||z!==Q[2]||E!==Q[3])p.scissor(l,q,z,E),Q[0]=l,Q[1]=q,Q[2]=z,Q[3]=E;l=na[0];q=na[1];z=na[2];E=na[3];if(l!==ra[0]||q!==ra[1]||z!==ra[2]||E!==ra[3])p.viewport(l,q,z,E),ra[0]=l,ra[1]=q,ra[2]=z,ra[3]=E}p.disable(2929);aa.depth_enable=!1;if(l=aa.profile)m=performance.now(),x.count++;p.useProgram(h.program);G.setVAO(null);q=L.location;z=u[q];z.buffer||p.enableVertexAttribArray(q);if(z.type!==e.dtype||2!==z.size||z.buffer!==e||!1!==z.normalized||0!==z.offset||0!==z.stride)p.bindBuffer(34962,e.buffer),
p.vertexAttribPointer(q,2,e.dtype,!1,0,0),z.type=e.dtype,z.size=2,z.buffer=e,z.normalized=!1,z.offset=0,z.stride=0;q=c.call(this,J,a,0);"number"!==typeof q&&g.commandRaise(d,t);p.uniform1f(M.location,q);a=a.color;W(a)&&4===a.length||g.commandRaise(y,t);p.uniform4f(C.location,a[0],a[1],a[2],a[3]);(a=b.elements)?p.bindBuffer(34963,a.buffer.buffer):G.currentVAO&&(a=n.getElements(G.currentVAO.elements))&&p.bindBuffer(34963,a.buffer.buffer);q=b.primitive;z=b.offset;a?p.drawElements(q,3,a.type,z<<(a.type-
5121>>1)):p.drawArrays(q,z,3);aa.dirty=!0;G.setVAO(null);l&&(x.cpuTime+=performance.now()-m)},scope:function(a,d,c){var f,g,h,k,n,r,m,t,v,w,p,q,u,y,A,C,D,E,G,R;f=B.depth_enable;B.depth_enable=!1;if(g=aa.profile)h=performance.now(),x.count++;k=b.count;b.count=3;n=l.call(this,J,a,c);r=Y[3];Y[3]=n;m=a.color;n=Y[4];Y[4]=m;m=F.buffer;F.buffer=e;t=F.divisor;F.divisor=0;v=F.normalized;F.normalized=!1;w=F.offset;F.offset=0;p=F.size;F.size=0;q=F.state;F.state=1;u=F.stride;F.stride=0;y=F.type;F.type=e.dtype;
A=F.w;F.w=0;C=F.x;F.x=0;D=F.y;F.y=0;E=F.z;F.z=0;G=z.vert;z.vert=2;R=z.frag;z.frag=1;aa.dirty=!0;d(J,a,c);B.depth_enable=f;g&&(x.cpuTime+=performance.now()-h);b.count=k;Y[3]=r;Y[4]=n;F.buffer=m;F.divisor=t;F.normalized=v;F.offset=w;F.size=p;F.state=q;F.stride=u;F.type=y;F.w=A;F.x=C;F.y=D;F.z=E;z.vert=G;z.frag=R;aa.dirty=!0},batch:function(a,d){var c,h,l,y;c=U.next;c!==U.cur&&(c?p.bindFramebuffer(36160,c.framebuffer):p.bindFramebuffer(36160,null),U.cur=c);if(aa.dirty){var z,F,Y;c=B.dither;c!==aa.dither&&
(c?p.enable(3024):p.disable(3024),aa.dither=c);c=B.blend_enable;c!==aa.blend_enable&&(c?p.enable(3042):p.disable(3042),aa.blend_enable=c);c=D[0];z=D[1];F=D[2];Y=D[3];if(c!==k[0]||z!==k[1]||F!==k[2]||Y!==k[3])p.blendColor(c,z,F,Y),k[0]=c,k[1]=z,k[2]=F,k[3]=Y;c=V[0];z=V[1];if(c!==f[0]||z!==f[1])p.blendEquationSeparate(c,z),f[0]=c,f[1]=z;c=Z[0];z=Z[1];F=Z[2];Y=Z[3];if(c!==H[0]||z!==H[1]||F!==H[2]||Y!==H[3])p.blendFuncSeparate(c,z,F,Y),H[0]=c,H[1]=z,H[2]=F,H[3]=Y;c=B.depth_func;c!==aa.depth_func&&(p.depthFunc(c),
aa.depth_func=c);c=X[0];z=X[1];if(c!==ea[0]||z!==ea[1])p.depthRange(c,z),ea[0]=c,ea[1]=z;c=B.depth_mask;c!==aa.depth_mask&&(p.depthMask(c),aa.depth_mask=c);c=la[0];z=la[1];F=la[2];Y=la[3];if(c!==ma[0]||z!==ma[1]||F!==ma[2]||Y!==ma[3])p.colorMask(c,z,F,Y),ma[0]=c,ma[1]=z,ma[2]=F,ma[3]=Y;c=B.cull_enable;c!==aa.cull_enable&&(c?p.enable(2884):p.disable(2884),aa.cull_enable=c);c=B.cull_face;c!==aa.cull_face&&(p.cullFace(c),aa.cull_face=c);c=B.frontFace;c!==aa.frontFace&&(p.frontFace(c),aa.frontFace=c);
c=B.lineWidth;c!==aa.lineWidth&&(p.lineWidth(c),aa.lineWidth=c);c=B.polygonOffset_enable;c!==aa.polygonOffset_enable&&(c?p.enable(32823):p.disable(32823),aa.polygonOffset_enable=c);c=T[0];z=T[1];if(c!==S[0]||z!==S[1])p.polygonOffset(c,z),S[0]=c,S[1]=z;c=B.sample_alpha;c!==aa.sample_alpha&&(c?p.enable(32926):p.disable(32926),aa.sample_alpha=c);c=B.sample_enable;c!==aa.sample_enable&&(c?p.enable(32928):p.disable(32928),aa.sample_enable=c);c=N[0];z=N[1];if(c!==r[0]||z!==r[1])p.sampleCoverage(c,z),r[0]=
c,r[1]=z;c=B.stencil_enable;c!==aa.stencil_enable&&(c?p.enable(2960):p.disable(2960),aa.stencil_enable=c);c=B.stencil_mask;c!==aa.stencil_mask&&(p.stencilMask(c),aa.stencil_mask=c);c=qa[0];z=qa[1];F=qa[2];if(c!==pa[0]||z!==pa[1]||F!==pa[2])p.stencilFunc(c,z,F),pa[0]=c,pa[1]=z,pa[2]=F;c=ga[0];z=ga[1];F=ga[2];Y=ga[3];if(c!==R[0]||z!==R[1]||F!==R[2]||Y!==R[3])p.stencilOpSeparate(c,z,F,Y),R[0]=c,R[1]=z,R[2]=F,R[3]=Y;c=A[0];z=A[1];F=A[2];Y=A[3];if(c!==I[0]||z!==I[1]||F!==I[2]||Y!==I[3])p.stencilOpSeparate(c,
z,F,Y),I[0]=c,I[1]=z,I[2]=F,I[3]=Y;c=B.scissor_enable;c!==aa.scissor_enable&&(c?p.enable(3089):p.disable(3089),aa.scissor_enable=c);c=P[0];z=P[1];F=P[2];Y=P[3];if(c!==Q[0]||z!==Q[1]||F!==Q[2]||Y!==Q[3])p.scissor(c,z,F,Y),Q[0]=c,Q[1]=z,Q[2]=F,Q[3]=Y;c=na[0];z=na[1];F=na[2];Y=na[3];if(c!==ra[0]||z!==ra[1]||F!==ra[2]||Y!==ra[3])p.viewport(c,z,F,Y),ra[0]=c,ra[1]=z,ra[2]=F,ra[3]=Y}p.disable(2929);aa.depth_enable=!1;if(c=aa.profile)h=performance.now(),x.count+=d;p.useProgram(K.program);G.setVAO(null);z=
L.location;F=u[z];F.buffer||p.enableVertexAttribArray(z);if(F.type!==e.dtype||2!==F.size||F.buffer!==e||!1!==F.normalized||0!==F.offset||0!==F.stride)p.bindBuffer(34962,e.buffer),p.vertexAttribPointer(z,2,e.dtype,!1,0,0),F.type=e.dtype,F.size=2,F.buffer=e,F.normalized=!1,F.offset=0,F.stride=0;l=q.call(this,J,y,l);"number"!==typeof l&&g.commandRaise(m,t);p.uniform1f(M.location,l);(z=b.elements)?p.bindBuffer(34963,z.buffer.buffer):G.currentVAO&&(z=n.getElements(G.currentVAO.elements))&&p.bindBuffer(34963,
z.buffer.buffer);F=b.primitive;Y=b.offset;for(l=0;l<d;++l){y=a[l];var Bb,Xa,v,w,da,ua,Da;Bb=y.color;W(Bb)&&4===Bb.length||g.commandRaise(E,t);y=Bb[0];v=Bb[1];da=Bb[2];Bb=Bb[3];l&&Xa===y&&w===v&&ua===da&&Da===Bb||(Xa=y,w=v,ua=da,Da=Bb,p.uniform4f(C.location,y,v,da,Bb));z?p.drawElements(F,3,z.type,Y<<(z.type-5121>>1)):p.drawArrays(F,Y,3)}aa.dirty=!0;G.setVAO(null);c&&(x.cpuTime+=performance.now()-h)}}},"$13,color,position":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M){var C,L,u,J,aa,b,n,U,p,W,B,z,Y,G,D,
k,V,f,Z,H,la,ma,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga;C=a.attributes;L=a.context;u=a.current;J=a.draw;aa=a.framebuffer;b=a.gl;n=a.next;U=a.shader;p=a.uniforms;W=a.vao;B=n.blend_color;z=u.blend_color;Y=n.blend_equation;G=u.blend_equation;D=n.blend_func;k=u.blend_func;V=n.colorMask;f=u.colorMask;Z=n.depth_range;H=u.depth_range;la=n.polygonOffset_offset;ma=u.polygonOffset_offset;X=n.sample_coverage;ea=u.sample_coverage;T=n.scissor_box;S=u.scissor_box;N=n.stencil_func;r=u.stencil_func;P=n.stencil_opBack;Q=u.stencil_opBack;
qa=n.stencil_opFront;pa=u.stencil_opFront;A=n.viewport;I=u.viewport;ga=[1,0,0,1];return{draw:function(a){var l,m,p;a=aa.next;a!==aa.cur&&(a?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null),aa.cur=a);if(u.dirty){var q;a=n.dither;a!==u.dither&&(a?b.enable(3024):b.disable(3024),u.dither=a);a=n.blend_enable;a!==u.blend_enable&&(a?b.enable(3042):b.disable(3042),u.blend_enable=a);a=B[0];m=B[1];p=B[2];q=B[3];if(a!==z[0]||m!==z[1]||p!==z[2]||q!==z[3])b.blendColor(a,m,p,q),z[0]=a,z[1]=
m,z[2]=p,z[3]=q;a=Y[0];m=Y[1];if(a!==G[0]||m!==G[1])b.blendEquationSeparate(a,m),G[0]=a,G[1]=m;a=D[0];m=D[1];p=D[2];q=D[3];if(a!==k[0]||m!==k[1]||p!==k[2]||q!==k[3])b.blendFuncSeparate(a,m,p,q),k[0]=a,k[1]=m,k[2]=p,k[3]=q;a=n.depth_enable;a!==u.depth_enable&&(a?b.enable(2929):b.disable(2929),u.depth_enable=a);a=n.depth_func;a!==u.depth_func&&(b.depthFunc(a),u.depth_func=a);a=Z[0];m=Z[1];if(a!==H[0]||m!==H[1])b.depthRange(a,m),H[0]=a,H[1]=m;a=n.depth_mask;a!==u.depth_mask&&(b.depthMask(a),u.depth_mask=
a);a=V[0];m=V[1];p=V[2];q=V[3];if(a!==f[0]||m!==f[1]||p!==f[2]||q!==f[3])b.colorMask(a,m,p,q),f[0]=a,f[1]=m,f[2]=p,f[3]=q;a=n.cull_enable;a!==u.cull_enable&&(a?b.enable(2884):b.disable(2884),u.cull_enable=a);a=n.cull_face;a!==u.cull_face&&(b.cullFace(a),u.cull_face=a);a=n.frontFace;a!==u.frontFace&&(b.frontFace(a),u.frontFace=a);a=n.polygonOffset_enable;a!==u.polygonOffset_enable&&(a?b.enable(32823):b.disable(32823),u.polygonOffset_enable=a);a=la[0];m=la[1];if(a!==ma[0]||m!==ma[1])b.polygonOffset(a,
m),ma[0]=a,ma[1]=m;a=n.sample_alpha;a!==u.sample_alpha&&(a?b.enable(32926):b.disable(32926),u.sample_alpha=a);a=n.sample_enable;a!==u.sample_enable&&(a?b.enable(32928):b.disable(32928),u.sample_enable=a);a=X[0];m=X[1];if(a!==ea[0]||m!==ea[1])b.sampleCoverage(a,m),ea[0]=a,ea[1]=m;a=n.stencil_enable;a!==u.stencil_enable&&(a?b.enable(2960):b.disable(2960),u.stencil_enable=a);a=n.stencil_mask;a!==u.stencil_mask&&(b.stencilMask(a),u.stencil_mask=a);a=N[0];m=N[1];p=N[2];if(a!==r[0]||m!==r[1]||p!==r[2])b.stencilFunc(a,
m,p),r[0]=a,r[1]=m,r[2]=p;a=qa[0];m=qa[1];p=qa[2];q=qa[3];if(a!==pa[0]||m!==pa[1]||p!==pa[2]||q!==pa[3])b.stencilOpSeparate(a,m,p,q),pa[0]=a,pa[1]=m,pa[2]=p,pa[3]=q;a=P[0];m=P[1];p=P[2];q=P[3];if(a!==Q[0]||m!==Q[1]||p!==Q[2]||q!==Q[3])b.stencilOpSeparate(a,m,p,q),Q[0]=a,Q[1]=m,Q[2]=p,Q[3]=q;a=n.scissor_enable;a!==u.scissor_enable&&(a?b.enable(3089):b.disable(3089),u.scissor_enable=a);a=T[0];m=T[1];p=T[2];q=T[3];if(a!==S[0]||m!==S[1]||p!==S[2]||q!==S[3])b.scissor(a,m,p,q),S[0]=a,S[1]=m,S[2]=p,S[3]=
q;a=A[0];m=A[1];p=A[2];q=A[3];if(a!==I[0]||m!==I[1]||p!==I[2]||q!==I[3])b.viewport(a,m,p,q),I[0]=a,I[1]=m,I[2]=p,I[3]=q}b.lineWidth(1);u.lineWidth=1;if(a=u.profile)l=performance.now(),x.count++;b.useProgram(h.program);W.setVAO(null);m=M.location;p=C[m];p.buffer||b.enableVertexAttribArray(m);if(p.type!==e.dtype||2!==p.size||p.buffer!==e||!1!==p.normalized||0!==p.offset||0!==p.stride)b.bindBuffer(34962,e.buffer),b.vertexAttribPointer(m,2,e.dtype,!1,0,0),p.type=e.dtype,p.size=2,p.buffer=e,p.normalized=
!1,p.offset=0,p.stride=0;b.uniform4f(E.location,1,0,0,1);c&&b.bindBuffer(34963,c.buffer.buffer);m=c.primType;p=c.vertCount-0;0<=p||g.commandRaise(d,t);p&&(b.drawElements(m,p,c.type,0<<(c.type-5121>>1)),u.dirty=!0,W.setVAO(null),a&&(x.cpuTime+=performance.now()-l))},scope:function(a,b,c){var d,f,h,k,m,r,q,z,B,A,C,v,w,D,E,G,H,I,K,O,N,P;d=n.lineWidth;n.lineWidth=1;if(f=u.profile)h=performance.now(),x.count++;k=J.elements;J.elements=y;m=J.offset;J.offset=0;r=y.vertCount-0;0<=r||g.commandRaise(l,t);q=
J.count;J.count=r;z=y.primType;r=J.primitive;J.primitive=z;z=p[3];p[3]=ga;B=F.buffer;F.buffer=e;A=F.divisor;F.divisor=0;C=F.normalized;F.normalized=!1;v=F.offset;F.offset=0;w=F.size;F.size=0;D=F.state;F.state=1;E=F.stride;F.stride=0;G=F.type;F.type=e.dtype;H=F.w;F.w=0;I=F.x;F.x=0;K=F.y;F.y=0;O=F.z;F.z=0;N=U.vert;U.vert=2;P=U.frag;U.frag=1;u.dirty=!0;b(L,a,c);n.lineWidth=d;f&&(x.cpuTime+=performance.now()-h);J.elements=k;J.offset=m;J.count=q;J.primitive=r;p[3]=z;F.buffer=B;F.divisor=A;F.normalized=
C;F.offset=v;F.size=w;F.state=D;F.stride=E;F.type=G;F.w=H;F.x=I;F.y=K;F.z=O;U.vert=N;U.frag=P;u.dirty=!0},batch:function(a,c){var d,h,l;d=aa.next;d!==aa.cur&&(d?b.bindFramebuffer(36160,d.framebuffer):b.bindFramebuffer(36160,null),aa.cur=d);if(u.dirty){var p,y;d=n.dither;d!==u.dither&&(d?b.enable(3024):b.disable(3024),u.dither=d);d=n.blend_enable;d!==u.blend_enable&&(d?b.enable(3042):b.disable(3042),u.blend_enable=d);d=B[0];l=B[1];p=B[2];y=B[3];if(d!==z[0]||l!==z[1]||p!==z[2]||y!==z[3])b.blendColor(d,
l,p,y),z[0]=d,z[1]=l,z[2]=p,z[3]=y;d=Y[0];l=Y[1];if(d!==G[0]||l!==G[1])b.blendEquationSeparate(d,l),G[0]=d,G[1]=l;d=D[0];l=D[1];p=D[2];y=D[3];if(d!==k[0]||l!==k[1]||p!==k[2]||y!==k[3])b.blendFuncSeparate(d,l,p,y),k[0]=d,k[1]=l,k[2]=p,k[3]=y;d=n.depth_enable;d!==u.depth_enable&&(d?b.enable(2929):b.disable(2929),u.depth_enable=d);d=n.depth_func;d!==u.depth_func&&(b.depthFunc(d),u.depth_func=d);d=Z[0];l=Z[1];if(d!==H[0]||l!==H[1])b.depthRange(d,l),H[0]=d,H[1]=l;d=n.depth_mask;d!==u.depth_mask&&(b.depthMask(d),
u.depth_mask=d);d=V[0];l=V[1];p=V[2];y=V[3];if(d!==f[0]||l!==f[1]||p!==f[2]||y!==f[3])b.colorMask(d,l,p,y),f[0]=d,f[1]=l,f[2]=p,f[3]=y;d=n.cull_enable;d!==u.cull_enable&&(d?b.enable(2884):b.disable(2884),u.cull_enable=d);d=n.cull_face;d!==u.cull_face&&(b.cullFace(d),u.cull_face=d);d=n.frontFace;d!==u.frontFace&&(b.frontFace(d),u.frontFace=d);d=n.polygonOffset_enable;d!==u.polygonOffset_enable&&(d?b.enable(32823):b.disable(32823),u.polygonOffset_enable=d);d=la[0];l=la[1];if(d!==ma[0]||l!==ma[1])b.polygonOffset(d,
l),ma[0]=d,ma[1]=l;d=n.sample_alpha;d!==u.sample_alpha&&(d?b.enable(32926):b.disable(32926),u.sample_alpha=d);d=n.sample_enable;d!==u.sample_enable&&(d?b.enable(32928):b.disable(32928),u.sample_enable=d);d=X[0];l=X[1];if(d!==ea[0]||l!==ea[1])b.sampleCoverage(d,l),ea[0]=d,ea[1]=l;d=n.stencil_enable;d!==u.stencil_enable&&(d?b.enable(2960):b.disable(2960),u.stencil_enable=d);d=n.stencil_mask;d!==u.stencil_mask&&(b.stencilMask(d),u.stencil_mask=d);d=N[0];l=N[1];p=N[2];if(d!==r[0]||l!==r[1]||p!==r[2])b.stencilFunc(d,
l,p),r[0]=d,r[1]=l,r[2]=p;d=qa[0];l=qa[1];p=qa[2];y=qa[3];if(d!==pa[0]||l!==pa[1]||p!==pa[2]||y!==pa[3])b.stencilOpSeparate(d,l,p,y),pa[0]=d,pa[1]=l,pa[2]=p,pa[3]=y;d=P[0];l=P[1];p=P[2];y=P[3];if(d!==Q[0]||l!==Q[1]||p!==Q[2]||y!==Q[3])b.stencilOpSeparate(d,l,p,y),Q[0]=d,Q[1]=l,Q[2]=p,Q[3]=y;d=n.scissor_enable;d!==u.scissor_enable&&(d?b.enable(3089):b.disable(3089),u.scissor_enable=d);d=T[0];l=T[1];p=T[2];y=T[3];if(d!==S[0]||l!==S[1]||p!==S[2]||y!==S[3])b.scissor(d,l,p,y),S[0]=d,S[1]=l,S[2]=p,S[3]=
y;d=A[0];l=A[1];p=A[2];y=A[3];if(d!==I[0]||l!==I[1]||p!==I[2]||y!==I[3])b.viewport(d,l,p,y),I[0]=d,I[1]=l,I[2]=p,I[3]=y}b.lineWidth(1);u.lineWidth=1;if(d=u.profile)h=performance.now(),x.count+=c;b.useProgram(K.program);W.setVAO(null);l=M.location;p=C[l];p.buffer||b.enableVertexAttribArray(l);if(p.type!==e.dtype||2!==p.size||p.buffer!==e||!1!==p.normalized||0!==p.offset||0!==p.stride)b.bindBuffer(34962,e.buffer),b.vertexAttribPointer(l,2,e.dtype,!1,0,0),p.type=e.dtype,p.size=2,p.buffer=e,p.normalized=
!1,p.offset=0,p.stride=0;b.uniform4f(E.location,1,0,0,1);q&&b.bindBuffer(34963,q.buffer.buffer);p=q.primType;y=q.vertCount-0;0<=y||g.commandRaise(m,t);for(l=0;l<c;++l)y&&b.drawElements(p,y,q.type,0<<(q.type-5121>>1));u.dirty=!0;W.setVAO(null);d&&(x.cpuTime+=performance.now()-h)}}},"$20,mouse,position,t,texture":function(a,g,t,x,h,e,c,d,y,l,F,K,q,m,E,M,C,L,u,J,aa,b,n,U,p){var W,B,z,Y,G,D,k,V,f,Z,H,la,ma,X,ea,T,S,N,r,P,Q,qa,pa,A,I,ga,R,na,ra,Ba,ya,ha,Ca,ja,oa,za;W=a.attributes;B=a.context;z=a.current;
Y=a.draw;G=a.elements;D=a.framebuffer;k=a.gl;V=a.isArrayLike;f=a.next;Z=a.shader;H=a.uniforms;la=a.vao;ma=f.blend_color;X=z.blend_color;ea=f.blend_equation;T=z.blend_equation;S=f.blend_func;N=z.blend_func;r=f.colorMask;P=z.colorMask;Q=f.depth_range;qa=z.depth_range;pa=f.polygonOffset_offset;A=z.polygonOffset_offset;I=f.sample_coverage;ga=z.sample_coverage;R=f.scissor_box;na=z.scissor_box;ra=f.stencil_func;Ba=z.stencil_func;ya=f.stencil_opBack;ha=z.stencil_opBack;Ca=f.stencil_opFront;ja=z.stencil_opFront;
oa=f.viewport;za=z.viewport;return{draw:function(a){var m,q,u,v;m=D.next;m!==D.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),D.cur=m);if(z.dirty){var w;m=f.dither;m!==z.dither&&(m?k.enable(3024):k.disable(3024),z.dither=m);m=f.blend_enable;m!==z.blend_enable&&(m?k.enable(3042):k.disable(3042),z.blend_enable=m);m=ma[0];u=ma[1];v=ma[2];w=ma[3];if(m!==X[0]||u!==X[1]||v!==X[2]||w!==X[3])k.blendColor(m,u,v,w),X[0]=m,X[1]=u,X[2]=v,X[3]=w;m=ea[0];u=ea[1];if(m!==T[0]||u!==T[1])k.blendEquationSeparate(m,
u),T[0]=m,T[1]=u;m=S[0];u=S[1];v=S[2];w=S[3];if(m!==N[0]||u!==N[1]||v!==N[2]||w!==N[3])k.blendFuncSeparate(m,u,v,w),N[0]=m,N[1]=u,N[2]=v,N[3]=w;m=f.depth_enable;m!==z.depth_enable&&(m?k.enable(2929):k.disable(2929),z.depth_enable=m);m=f.depth_func;m!==z.depth_func&&(k.depthFunc(m),z.depth_func=m);m=Q[0];u=Q[1];if(m!==qa[0]||u!==qa[1])k.depthRange(m,u),qa[0]=m,qa[1]=u;m=f.depth_mask;m!==z.depth_mask&&(k.depthMask(m),z.depth_mask=m);m=r[0];u=r[1];v=r[2];w=r[3];if(m!==P[0]||u!==P[1]||v!==P[2]||w!==P[3])k.colorMask(m,
u,v,w),P[0]=m,P[1]=u,P[2]=v,P[3]=w;m=f.cull_enable;m!==z.cull_enable&&(m?k.enable(2884):k.disable(2884),z.cull_enable=m);m=f.cull_face;m!==z.cull_face&&(k.cullFace(m),z.cull_face=m);m=f.frontFace;m!==z.frontFace&&(k.frontFace(m),z.frontFace=m);m=f.lineWidth;m!==z.lineWidth&&(k.lineWidth(m),z.lineWidth=m);m=f.polygonOffset_enable;m!==z.polygonOffset_enable&&(m?k.enable(32823):k.disable(32823),z.polygonOffset_enable=m);m=pa[0];u=pa[1];if(m!==A[0]||u!==A[1])k.polygonOffset(m,u),A[0]=m,A[1]=u;m=f.sample_alpha;
m!==z.sample_alpha&&(m?k.enable(32926):k.disable(32926),z.sample_alpha=m);m=f.sample_enable;m!==z.sample_enable&&(m?k.enable(32928):k.disable(32928),z.sample_enable=m);m=I[0];u=I[1];if(m!==ga[0]||u!==ga[1])k.sampleCoverage(m,u),ga[0]=m,ga[1]=u;m=f.stencil_enable;m!==z.stencil_enable&&(m?k.enable(2960):k.disable(2960),z.stencil_enable=m);m=f.stencil_mask;m!==z.stencil_mask&&(k.stencilMask(m),z.stencil_mask=m);m=ra[0];u=ra[1];v=ra[2];if(m!==Ba[0]||u!==Ba[1]||v!==Ba[2])k.stencilFunc(m,u,v),Ba[0]=m,Ba[1]=
u,Ba[2]=v;m=Ca[0];u=Ca[1];v=Ca[2];w=Ca[3];if(m!==ja[0]||u!==ja[1]||v!==ja[2]||w!==ja[3])k.stencilOpSeparate(m,u,v,w),ja[0]=m,ja[1]=u,ja[2]=v,ja[3]=w;m=ya[0];u=ya[1];v=ya[2];w=ya[3];if(m!==ha[0]||u!==ha[1]||v!==ha[2]||w!==ha[3])k.stencilOpSeparate(m,u,v,w),ha[0]=m,ha[1]=u,ha[2]=v,ha[3]=w;m=f.scissor_enable;m!==z.scissor_enable&&(m?k.enable(3089):k.disable(3089),z.scissor_enable=m);m=R[0];u=R[1];v=R[2];w=R[3];if(m!==na[0]||u!==na[1]||v!==na[2]||w!==na[3])k.scissor(m,u,v,w),na[0]=m,na[1]=u,na[2]=v,na[3]=
w;m=oa[0];u=oa[1];v=oa[2];w=oa[3];if(m!==za[0]||u!==za[1]||v!==za[2]||w!==za[3])k.viewport(m,u,v,w),za[0]=m,za[1]=u,za[2]=v,za[3]=w;z.dirty=!1}if(m=z.profile)q=performance.now(),x.count++;k.useProgram(h.program);la.setVAO(null);u=n.location;v=W[u];v.buffer||k.enableVertexAttribArray(u);if(v.type!==e.dtype||2!==v.size||v.buffer!==e||!1!==v.normalized||0!==v.offset||0!==v.stride)k.bindBuffer(34962,e.buffer),k.vertexAttribPointer(u,2,e.dtype,!1,0,0),v.type=e.dtype,v.size=2,v.buffer=e,v.normalized=!1,
v.offset=0,v.stride=0;u=c.call(this,B,a,0);V(u)&&2===u.length||g.commandRaise(d,t);k.uniform2f(b.location,u[0],u[1]);a=y.call(this,B,a,0);"number"!==typeof a&&g.commandRaise(l,t);k.uniform1f(U.location,a);k.uniform1i(p.location,F.bind());(a=Y.elements)?k.bindBuffer(34963,a.buffer.buffer):la.currentVAO&&(a=G.getElements(la.currentVAO.elements))&&k.bindBuffer(34963,a.buffer.buffer);u=Y.primitive;v=Y.offset;a?k.drawElements(u,3,a.type,v<<(a.type-5121>>1)):k.drawArrays(u,v,3);la.setVAO(null);m&&(x.cpuTime+=
performance.now()-q);F.unbind()},scope:function(a,b,d){var c,f,g,h,k,l,n,p,r,t,u,y,A,C,D,F,G,I,J,L;if(c=z.profile)f=performance.now(),x.count++;g=Y.count;Y.count=3;h=K.call(this,B,a,d);k=H[3];H[3]=h;l=q.call(this,B,a,d);h=H[4];H[4]=l;l=H[5];H[5]=m;n=E.buffer;E.buffer=e;p=E.divisor;E.divisor=0;r=E.normalized;E.normalized=!1;t=E.offset;E.offset=0;u=E.size;E.size=0;y=E.state;E.state=1;A=E.stride;E.stride=0;C=E.type;E.type=e.dtype;D=E.w;E.w=0;F=E.x;E.x=0;G=E.y;E.y=0;I=E.z;E.z=0;J=Z.vert;Z.vert=2;L=Z.frag;
Z.frag=1;b(B,a,d);c&&(x.cpuTime+=performance.now()-f);Y.count=g;H[3]=k;H[4]=h;H[5]=l;E.buffer=n;E.divisor=p;E.normalized=r;E.offset=t;E.size=u;E.state=y;E.stride=A;E.type=C;E.w=D;E.x=F;E.y=G;E.z=I;Z.vert=J;Z.frag=L},batch:function(a,d){var c,h,l;c=D.next;c!==D.cur&&(c?k.bindFramebuffer(36160,c.framebuffer):k.bindFramebuffer(36160,null),D.cur=c);if(z.dirty){var m,q,y;c=f.dither;c!==z.dither&&(c?k.enable(3024):k.disable(3024),z.dither=c);c=f.blend_enable;c!==z.blend_enable&&(c?k.enable(3042):k.disable(3042),
z.blend_enable=c);c=ma[0];m=ma[1];q=ma[2];y=ma[3];if(c!==X[0]||m!==X[1]||q!==X[2]||y!==X[3])k.blendColor(c,m,q,y),X[0]=c,X[1]=m,X[2]=q,X[3]=y;c=ea[0];m=ea[1];if(c!==T[0]||m!==T[1])k.blendEquationSeparate(c,m),T[0]=c,T[1]=m;c=S[0];m=S[1];q=S[2];y=S[3];if(c!==N[0]||m!==N[1]||q!==N[2]||y!==N[3])k.blendFuncSeparate(c,m,q,y),N[0]=c,N[1]=m,N[2]=q,N[3]=y;c=f.depth_enable;c!==z.depth_enable&&(c?k.enable(2929):k.disable(2929),z.depth_enable=c);c=f.depth_func;c!==z.depth_func&&(k.depthFunc(c),z.depth_func=
c);c=Q[0];m=Q[1];if(c!==qa[0]||m!==qa[1])k.depthRange(c,m),qa[0]=c,qa[1]=m;c=f.depth_mask;c!==z.depth_mask&&(k.depthMask(c),z.depth_mask=c);c=r[0];m=r[1];q=r[2];y=r[3];if(c!==P[0]||m!==P[1]||q!==P[2]||y!==P[3])k.colorMask(c,m,q,y),P[0]=c,P[1]=m,P[2]=q,P[3]=y;c=f.cull_enable;c!==z.cull_enable&&(c?k.enable(2884):k.disable(2884),z.cull_enable=c);c=f.cull_face;c!==z.cull_face&&(k.cullFace(c),z.cull_face=c);c=f.frontFace;c!==z.frontFace&&(k.frontFace(c),z.frontFace=c);c=f.lineWidth;c!==z.lineWidth&&(k.lineWidth(c),
z.lineWidth=c);c=f.polygonOffset_enable;c!==z.polygonOffset_enable&&(c?k.enable(32823):k.disable(32823),z.polygonOffset_enable=c);c=pa[0];m=pa[1];if(c!==A[0]||m!==A[1])k.polygonOffset(c,m),A[0]=c,A[1]=m;c=f.sample_alpha;c!==z.sample_alpha&&(c?k.enable(32926):k.disable(32926),z.sample_alpha=c);c=f.sample_enable;c!==z.sample_enable&&(c?k.enable(32928):k.disable(32928),z.sample_enable=c);c=I[0];m=I[1];if(c!==ga[0]||m!==ga[1])k.sampleCoverage(c,m),ga[0]=c,ga[1]=m;c=f.stencil_enable;c!==z.stencil_enable&&
(c?k.enable(2960):k.disable(2960),z.stencil_enable=c);c=f.stencil_mask;c!==z.stencil_mask&&(k.stencilMask(c),z.stencil_mask=c);c=ra[0];m=ra[1];q=ra[2];if(c!==Ba[0]||m!==Ba[1]||q!==Ba[2])k.stencilFunc(c,m,q),Ba[0]=c,Ba[1]=m,Ba[2]=q;c=Ca[0];m=Ca[1];q=Ca[2];y=Ca[3];if(c!==ja[0]||m!==ja[1]||q!==ja[2]||y!==ja[3])k.stencilOpSeparate(c,m,q,y),ja[0]=c,ja[1]=m,ja[2]=q,ja[3]=y;c=ya[0];m=ya[1];q=ya[2];y=ya[3];if(c!==ha[0]||m!==ha[1]||q!==ha[2]||y!==ha[3])k.stencilOpSeparate(c,m,q,y),ha[0]=c,ha[1]=m,ha[2]=q,
ha[3]=y;c=f.scissor_enable;c!==z.scissor_enable&&(c?k.enable(3089):k.disable(3089),z.scissor_enable=c);c=R[0];m=R[1];q=R[2];y=R[3];if(c!==na[0]||m!==na[1]||q!==na[2]||y!==na[3])k.scissor(c,m,q,y),na[0]=c,na[1]=m,na[2]=q,na[3]=y;c=oa[0];m=oa[1];q=oa[2];y=oa[3];if(c!==za[0]||m!==za[1]||q!==za[2]||y!==za[3])k.viewport(c,m,q,y),za[0]=c,za[1]=m,za[2]=q,za[3]=y;z.dirty=!1}if(c=z.profile)h=performance.now(),x.count+=d;k.useProgram(M.program);la.setVAO(null);m=n.location;q=W[m];q.buffer||k.enableVertexAttribArray(m);
if(q.type!==e.dtype||2!==q.size||q.buffer!==e||!1!==q.normalized||0!==q.offset||0!==q.stride)k.bindBuffer(34962,e.buffer),k.vertexAttribPointer(m,2,e.dtype,!1,0,0),q.type=e.dtype,q.size=2,q.buffer=e,q.normalized=!1,q.offset=0,q.stride=0;m=C.call(this,B,void 0,l);V(m)&&2===m.length||g.commandRaise(L,t);k.uniform2f(b.location,m[0],m[1]);l=u.call(this,B,void 0,l);"number"!==typeof l&&g.commandRaise(J,t);k.uniform1f(U.location,l);k.uniform1i(p.location,aa.bind());(m=Y.elements)?k.bindBuffer(34963,m.buffer.buffer):
la.currentVAO&&(m=G.getElements(la.currentVAO.elements))&&k.bindBuffer(34963,m.buffer.buffer);q=Y.primitive;y=Y.offset;for(l=0;l<d;++l)m?k.drawElements(q,3,m.type,y<<(m.type-5121>>1)):k.drawArrays(q,y,3);aa.unbind();la.setVAO(null);c&&(x.cpuTime+=performance.now()-h)}}}}},{}],25:[function(M,Z,ma){var a=M("./sorted-object-keys");Z.exports=function(g,t){for(var x=a(t),h=0;h<x.length;++h)g[x[h]]=t[x[h]];return g}},{"./sorted-object-keys":34}],26:[function(M,Z,ma){function a(a,g,e,c,d,t){for(var l=0;l<
g;++l)for(var F=a[l],K=0;K<e;++K)for(var q=F[K],m=0;m<c;++m)d[t++]=q[m]}function g(t,h,e,c,d){for(var y=1,l=e+1;l<h.length;++l)y*=h[l];var F=h[e];if(4===h.length-e){var K=h[e+1],q=h[e+2];h=h[e+3];for(l=0;l<F;++l)a(t[l],K,q,h,c,d),d+=y}else for(l=0;l<F;++l)g(t[l],h,e+1,c,d),d+=y}var t=M("./pool");Z.exports={shape:function(a){for(var g=[];a.length;a=a[0])g.push(a.length);return g},flatten:function(x,h,e,c){var d=1;if(h.length)for(var y=0;y<h.length;++y)d*=h[y];else d=0;e=c||t.allocType(e,d);switch(h.length){case 0:break;
case 1:c=h[0];for(h=0;h<c;++h)e[h]=x[h];break;case 2:c=h[0];h=h[1];for(y=d=0;y<c;++y)for(var l=x[y],F=0;F<h;++F)e[d++]=l[F];break;case 3:a(x,h[0],h[1],h[2],e,0);break;default:g(x,h,0,e,0)}return e}}},{"./pool":32}],27:[function(M,Z,ma){var a=M("./is-typed-array");Z.exports=function(g){return Array.isArray(g)||a(g)}},{"./is-typed-array":30}],28:[function(M,Z,ma){var a=M("./is-typed-array");Z.exports=function(g){return!!g&&"object"===typeof g&&Array.isArray(g.shape)&&Array.isArray(g.stride)&&"number"===
typeof g.offset&&g.shape.length===g.stride.length&&(Array.isArray(g.data)||a(g.data))}},{"./is-typed-array":30}],29:[function(M,Z,ma){Z.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(M,Z,ma){Z.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(M,Z,ma){Z.exports=
function(a,g){for(var t=Array(a),x=0;x<a;++x)t[x]=g(x);return t}},{}],32:[function(M,Z,ma){function a(a){var g,e;g=(65535<a)<<4;a>>>=g;e=(255<a)<<3;a>>>=e;g|=e;e=(15<a)<<2;a>>>=e;g|=e;e=(3<a)<<1;return g|e|a>>>e>>1}function g(){function g(c){a:{for(var d=16;268435456>=d;d*=16)if(c<=d){c=d;break a}c=0}d=e[a(c)>>2];return 0<d.length?d.pop():new ArrayBuffer(c)}function h(c){e[a(c.byteLength)>>2].push(c)}var e=t(8,function(){return[]});return{alloc:g,free:h,allocType:function(a,d){var e=null;switch(a){case 5120:e=
new Int8Array(g(d),0,d);break;case 5121:e=new Uint8Array(g(d),0,d);break;case 5122:e=new Int16Array(g(2*d),0,d);break;case 5123:e=new Uint16Array(g(2*d),0,d);break;case 5124:e=new Int32Array(g(4*d),0,d);break;case 5125:e=new Uint32Array(g(4*d),0,d);break;case 5126:e=new Float32Array(g(4*d),0,d);break;default:return null}return e.length!==d?e.subarray(0,d):e},freeType:function(a){h(a.buffer)}}}var t=M("./loop");M=g();M.zero=g();Z.exports=M},{"./loop":31}],33:[function(M,Z,ma){Z.exports={next:"function"===
typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(M,Z,ma){Z.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(M,Z,ma){var a=M("./pool"),g=new Float32Array(1),t=new Uint32Array(g.buffer);Z.exports=function(x){for(var h=a.allocType(5123,x.length),e=0;e<x.length;++e)if(isNaN(x[e]))h[e]=65535;else if(Infinity===
x[e])h[e]=31744;else if(-Infinity===x[e])h[e]=64512;else{g[0]=x[e];var c=t[0],d=c>>>31<<15,y=(c<<1>>>24)-127,c=c>>13&1023;h[e]=-24>y?d:-14>y?d+(c+1024>>-14-y):15<y?d+31744:d+(y+15<<10)+c}return h}},{"./pool":32}],36:[function(M,Z,ma){var a=M("./sorted-object-keys");Z.exports=function(g){return a(g).map(function(a){return g[a]})}},{"./sorted-object-keys":34}],37:[function(M,Z,ma){function a(a,d,g){function h(){var d=window.innerWidth,e=window.innerHeight;a!==document.body&&(e=t.getBoundingClientRect(),
d=e.right-e.left,e=e.bottom-e.top);t.width=g*d;t.height=g*e}var t=document.createElement("canvas");e(t.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(t);a===document.body&&(t.style.position="absolute",e(a.style,{margin:0,padding:0}));var x;a!==document.body&&"function"===typeof ResizeObserver?(x=new ResizeObserver(function(){setTimeout(h)}),x.observe(a)):window.addEventListener("resize",h,!1);h();return{canvas:t,onDestroy:function(){x?x.disconnect():window.removeEventListener("resize",
h);a.removeChild(t)}}}function g(a,d){function e(g){try{return a.getContext(g,d)}catch(h){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function t(a){if("string"===typeof a)return a.split();h(Array.isArray(a),"invalid extension array");return a}function x(a){return"string"===typeof a?(h("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var h=M("./util/check"),e=M("./util/extend");Z.exports=function(c){var d=c||{},e,l,F,K;
c={};var q=[],m=[],E="undefined"===typeof window?1:window.devicePixelRatio,M=!1,C=function(a){a&&h.raise(a)},L=function(){};"string"===typeof d?(h("undefined"!==typeof document,"selector queries only supported in DOM environments"),e=document.querySelector(d),h(e,"invalid query string for element")):"object"===typeof d?"string"===typeof d.nodeName&&"function"===typeof d.appendChild&&"function"===typeof d.getBoundingClientRect?e=d:"function"===typeof d.drawArrays||"function"===typeof d.drawElements?
(K=d,F=K.canvas):(h.constructor(d),"gl"in d?K=d.gl:"canvas"in d?F=x(d.canvas):"container"in d&&(l=x(d.container)),"attributes"in d&&(c=d.attributes,h.type(c,"object","invalid context attributes")),"extensions"in d&&(q=t(d.extensions)),"optionalExtensions"in d&&(m=t(d.optionalExtensions)),"onDone"in d&&(h.type(d.onDone,"function","invalid or missing onDone callback"),C=d.onDone),"profile"in d&&(M=!!d.profile),"pixelRatio"in d&&(E=+d.pixelRatio,h(0<E,"invalid pixel ratio"))):h.raise("invalid arguments to regl");
e&&("canvas"===e.nodeName.toLowerCase()?F=e:l=e);if(!K){if(!F){h("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");e=a(l||document.body,C,E);if(!e)return null;F=e.canvas;L=e.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);K=g(F,c)}return K?{gl:K,canvas:F,container:l,extensions:q,optionalExtensions:m,pixelRatio:E,profile:M,onDone:C,onDestroy:L}:(L(),C("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(M,Z,ma){Z.exports=function(a,g){var t=g[0],x=g[1],h=g[2],e=g[3],c=g[4],d=g[5],y=g[6],l=g[7],F=g[8],K=g[9],q=g[10],m=g[11],E=g[12],M=g[13],C=g[14],L=g[15];a[0]=d*(q*L-m*C)-K*(y*L-l*C)+M*(y*m-l*q);a[1]=-(x*(q*L-m*C)-K*(h*L-e*C)+M*(h*m-e*q));a[2]=x*(y*L-l*C)-d*(h*L-e*C)+M*(h*l-e*y);a[3]=-(x*(y*m-l*q)-d*(h*m-e*q)+K*(h*l-e*y));a[4]=-(c*(q*L-m*C)-F*(y*L-l*C)+E*(y*m-l*q));a[5]=t*(q*L-m*C)-F*(h*L-e*C)+E*(h*m-e*q);a[6]=-(t*(y*L-l*C)-c*(h*L-e*C)+
E*(h*l-e*y));a[7]=t*(y*m-l*q)-c*(h*m-e*q)+F*(h*l-e*y);a[8]=c*(K*L-m*M)-F*(d*L-l*M)+E*(d*m-l*K);a[9]=-(t*(K*L-m*M)-F*(x*L-e*M)+E*(x*m-e*K));a[10]=t*(d*L-l*M)-c*(x*L-e*M)+E*(x*l-e*d);a[11]=-(t*(d*m-l*K)-c*(x*m-e*K)+F*(x*l-e*d));a[12]=-(c*(K*C-q*M)-F*(d*C-y*M)+E*(d*q-y*K));a[13]=t*(K*C-q*M)-F*(x*C-h*M)+E*(x*q-h*K);a[14]=-(t*(d*C-y*M)-c*(x*C-h*M)+E*(x*y-h*d));a[15]=t*(d*q-y*K)-c*(x*q-h*K)+F*(x*y-h*d);return a}},{}],39:[function(M,Z,ma){Z.exports=function(a){var g=new Float32Array(16);g[0]=a[0];g[1]=a[1];
g[2]=a[2];g[3]=a[3];g[4]=a[4];g[5]=a[5];g[6]=a[6];g[7]=a[7];g[8]=a[8];g[9]=a[9];g[10]=a[10];g[11]=a[11];g[12]=a[12];g[13]=a[13];g[14]=a[14];g[15]=a[15];return g}},{}],40:[function(M,Z,ma){Z.exports=function(a,g){a[0]=g[0];a[1]=g[1];a[2]=g[2];a[3]=g[3];a[4]=g[4];a[5]=g[5];a[6]=g[6];a[7]=g[7];a[8]=g[8];a[9]=g[9];a[10]=g[10];a[11]=g[11];a[12]=g[12];a[13]=g[13];a[14]=g[14];a[15]=g[15];return a}},{}],41:[function(M,Z,ma){Z.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=
0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],42:[function(M,Z,ma){Z.exports=function(a){var g=a[0],t=a[1],x=a[2],h=a[3],e=a[4],c=a[5],d=a[6],y=a[7],l=a[8],F=a[9],K=a[10],q=a[11],m=a[12],E=a[13],M=a[14];a=a[15];return(g*c-t*e)*(K*a-q*M)-(g*d-x*e)*(F*a-q*E)+(g*y-h*e)*(F*M-K*E)+(t*d-x*c)*(l*a-q*m)-(t*y-h*c)*(l*M-K*m)+(x*y-h*d)*(l*E-F*m)}},{}],43:[function(M,Z,ma){Z.exports=function(a,g){var t=g[0],x=g[1],h=g[2],e=g[3],c=t+t,d=x+x,y=h+h,t=t*c,l=x*
c,x=x*d,F=h*c,K=h*d,h=h*y,c=e*c,d=e*d,e=e*y;a[0]=1-x-h;a[1]=l+e;a[2]=F-d;a[3]=0;a[4]=l-e;a[5]=1-t-h;a[6]=K+c;a[7]=0;a[8]=F+d;a[9]=K-c;a[10]=1-t-x;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],44:[function(M,Z,ma){Z.exports=function(a,g,t){var x,h,e=t[0],c=t[1];t=t[2];x=Math.sqrt(e*e+c*c+t*t);if(1E-6>Math.abs(x))return null;x=1/x;e*=x;c*=x;t*=x;x=Math.sin(g);g=Math.cos(g);h=1-g;a[0]=e*e*h+g;a[1]=c*e*h+t*x;a[2]=t*e*h-c*x;a[3]=0;a[4]=e*c*h-t*x;a[5]=c*c*h+g;a[6]=t*c*h+e*x;a[7]=0;a[8]=e*t*h+c*
x;a[9]=c*t*h-e*x;a[10]=t*t*h+g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],45:[function(M,Z,ma){Z.exports=function(a,g,t){var x=g[0],h=g[1],e=g[2],c=g[3],d=x+x,y=h+h,l=e+e;g=x*d;var F=x*y,x=x*l,K=h*y,h=h*l,e=e*l,d=c*d,y=c*y,c=c*l;a[0]=1-(K+e);a[1]=F+c;a[2]=x-y;a[3]=0;a[4]=F-c;a[5]=1-(g+e);a[6]=h+d;a[7]=0;a[8]=x+y;a[9]=h-d;a[10]=1-(g+K);a[11]=0;a[12]=t[0];a[13]=t[1];a[14]=t[2];a[15]=1;return a}},{}],46:[function(M,Z,ma){Z.exports=function(a,g){a[0]=g[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
g[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=g[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],47:[function(M,Z,ma){Z.exports=function(a,g){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}},{}],48:[function(M,Z,ma){Z.exports=function(a,g){var t=Math.sin(g),x=Math.cos(g);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=x;a[6]=t;a[7]=0;a[8]=0;a[9]=-t;a[10]=x;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],49:[function(M,
Z,ma){Z.exports=function(a,g){var t=Math.sin(g),x=Math.cos(g);a[0]=x;a[1]=0;a[2]=-t;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=t;a[9]=0;a[10]=x;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(M,Z,ma){Z.exports=function(a,g){var t=Math.sin(g),x=Math.cos(g);a[0]=x;a[1]=t;a[2]=0;a[3]=0;a[4]=-t;a[5]=x;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(M,Z,ma){Z.exports=function(a,g,t,x,h,e,c){var d=1/(t-g),y=1/(h-x),l=1/(e-c);a[0]=
2*e*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*e*y;a[6]=0;a[7]=0;a[8]=(t+g)*d;a[9]=(h+x)*y;a[10]=(c+e)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=c*e*2*l;a[15]=0;return a}},{}],52:[function(M,Z,ma){Z.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(M,Z,ma){Z.exports={create:M("./create"),clone:M("./clone"),copy:M("./copy"),identity:M("./identity"),transpose:M("./transpose"),invert:M("./invert"),adjoint:M("./adjoint"),
determinant:M("./determinant"),multiply:M("./multiply"),translate:M("./translate"),scale:M("./scale"),rotate:M("./rotate"),rotateX:M("./rotateX"),rotateY:M("./rotateY"),rotateZ:M("./rotateZ"),fromRotation:M("./fromRotation"),fromRotationTranslation:M("./fromRotationTranslation"),fromScaling:M("./fromScaling"),fromTranslation:M("./fromTranslation"),fromXRotation:M("./fromXRotation"),fromYRotation:M("./fromYRotation"),fromZRotation:M("./fromZRotation"),fromQuat:M("./fromQuat"),frustum:M("./frustum"),
perspective:M("./perspective"),perspectiveFromFieldOfView:M("./perspectiveFromFieldOfView"),ortho:M("./ortho"),lookAt:M("./lookAt"),str:M("./str")}},{"./adjoint":38,"./clone":39,"./copy":40,"./create":41,"./determinant":42,"./fromQuat":43,"./fromRotation":44,"./fromRotationTranslation":45,"./fromScaling":46,"./fromTranslation":47,"./fromXRotation":48,"./fromYRotation":49,"./fromZRotation":50,"./frustum":51,"./identity":52,"./invert":54,"./lookAt":55,"./multiply":56,"./ortho":57,"./perspective":58,
"./perspectiveFromFieldOfView":59,"./rotate":60,"./rotateX":61,"./rotateY":62,"./rotateZ":63,"./scale":64,"./str":65,"./translate":66,"./transpose":67}],54:[function(M,Z,ma){Z.exports=function(a,g){var t=g[0],x=g[1],h=g[2],e=g[3],c=g[4],d=g[5],y=g[6],l=g[7],F=g[8],K=g[9],q=g[10],m=g[11],E=g[12],M=g[13],C=g[14],L=g[15],u=t*d-x*c,J=t*y-h*c,aa=t*l-e*c,b=x*y-h*d,n=x*l-e*d,U=h*l-e*y,p=F*M-K*E,W=F*C-q*E,B=F*L-m*E,z=K*C-q*M,Y=K*L-m*M,G=q*L-m*C,D=u*G-J*Y+aa*z+b*B-n*W+U*p;if(!D)return null;D=1/D;a[0]=(d*G-
y*Y+l*z)*D;a[1]=(h*Y-x*G-e*z)*D;a[2]=(M*U-C*n+L*b)*D;a[3]=(q*n-K*U-m*b)*D;a[4]=(y*B-c*G-l*W)*D;a[5]=(t*G-h*B+e*W)*D;a[6]=(C*aa-E*U-L*J)*D;a[7]=(F*U-q*aa+m*J)*D;a[8]=(c*Y-d*B+l*p)*D;a[9]=(x*B-t*Y-e*p)*D;a[10]=(E*n-M*aa+L*u)*D;a[11]=(K*aa-F*n-m*u)*D;a[12]=(d*W-c*z-y*p)*D;a[13]=(t*z-x*W+h*p)*D;a[14]=(M*J-E*b-C*u)*D;a[15]=(F*b-K*J+q*u)*D;return a}},{}],55:[function(M,Z,ma){var a=M("./identity");Z.exports=function(g,t,x,h){var e,c,d,y,l,F,K,q,m=t[0],E=t[1];t=t[2];d=h[0];y=h[1];c=h[2];K=x[0];h=x[1];e=x[2];
if(1E-6>Math.abs(m-K)&&1E-6>Math.abs(E-h)&&1E-6>Math.abs(t-e))return a(g);x=m-K;h=E-h;K=t-e;q=1/Math.sqrt(x*x+h*h+K*K);x*=q;h*=q;K*=q;e=y*K-c*h;c=c*x-d*K;d=d*h-y*x;(q=Math.sqrt(e*e+c*c+d*d))?(q=1/q,e*=q,c*=q,d*=q):d=c=e=0;y=h*d-K*c;l=K*e-x*d;F=x*c-h*e;(q=Math.sqrt(y*y+l*l+F*F))?(q=1/q,y*=q,l*=q,F*=q):F=l=y=0;g[0]=e;g[1]=y;g[2]=x;g[3]=0;g[4]=c;g[5]=l;g[6]=h;g[7]=0;g[8]=d;g[9]=F;g[10]=K;g[11]=0;g[12]=-(e*m+c*E+d*t);g[13]=-(y*m+l*E+F*t);g[14]=-(x*m+h*E+K*t);g[15]=1;return g}},{"./identity":52}],56:[function(M,
Z,ma){Z.exports=function(a,g,t){var x=g[0],h=g[1],e=g[2],c=g[3],d=g[4],y=g[5],l=g[6],F=g[7],K=g[8],q=g[9],m=g[10],E=g[11],M=g[12],C=g[13],L=g[14];g=g[15];var u=t[0],J=t[1],aa=t[2],b=t[3];a[0]=u*x+J*d+aa*K+b*M;a[1]=u*h+J*y+aa*q+b*C;a[2]=u*e+J*l+aa*m+b*L;a[3]=u*c+J*F+aa*E+b*g;u=t[4];J=t[5];aa=t[6];b=t[7];a[4]=u*x+J*d+aa*K+b*M;a[5]=u*h+J*y+aa*q+b*C;a[6]=u*e+J*l+aa*m+b*L;a[7]=u*c+J*F+aa*E+b*g;u=t[8];J=t[9];aa=t[10];b=t[11];a[8]=u*x+J*d+aa*K+b*M;a[9]=u*h+J*y+aa*q+b*C;a[10]=u*e+J*l+aa*m+b*L;a[11]=u*c+J*
F+aa*E+b*g;u=t[12];J=t[13];aa=t[14];b=t[15];a[12]=u*x+J*d+aa*K+b*M;a[13]=u*h+J*y+aa*q+b*C;a[14]=u*e+J*l+aa*m+b*L;a[15]=u*c+J*F+aa*E+b*g;return a}},{}],57:[function(M,Z,ma){Z.exports=function(a,g,t,x,h,e,c){var d=1/(g-t),y=1/(x-h),l=1/(e-c);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*y;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(g+t)*d;a[13]=(h+x)*y;a[14]=(c+e)*l;a[15]=1;return a}},{}],58:[function(M,Z,ma){Z.exports=function(a,g,t,x,h){g=1/Math.tan(g/2);var e=1/(x-h);a[0]=g/t;a[1]=0;a[2]=
0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+x)*e;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*h*x*e;a[15]=0;return a}},{}],59:[function(M,Z,ma){Z.exports=function(a,g,t,x){var h=Math.tan(g.upDegrees*Math.PI/180),e=Math.tan(g.downDegrees*Math.PI/180),c=Math.tan(g.leftDegrees*Math.PI/180);g=Math.tan(g.rightDegrees*Math.PI/180);var d=2/(c+g),y=2/(h+e);a[0]=d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=y;a[6]=0;a[7]=0;a[8]=-((c-g)*d*.5);a[9]=(h-e)*y*.5;a[10]=x/(t-x);a[11]=-1;a[12]=0;a[13]=0;a[14]=x*t/(t-x);
a[15]=0;return a}},{}],60:[function(M,Z,ma){Z.exports=function(a,g,t,x){var h=x[0],e=x[1];x=x[2];var c=Math.sqrt(h*h+e*e+x*x),d,y,l,F,K,q,m,E,M,C,L,u,J,aa,b,n,U,p,W,B;if(1E-6>Math.abs(c))return null;c=1/c;h*=c;e*=c;x*=c;d=Math.sin(t);y=Math.cos(t);l=1-y;t=g[0];c=g[1];F=g[2];K=g[3];q=g[4];m=g[5];E=g[6];M=g[7];C=g[8];L=g[9];u=g[10];J=g[11];aa=h*h*l+y;b=e*h*l+x*d;n=x*h*l-e*d;U=h*e*l-x*d;p=e*e*l+y;W=x*e*l+h*d;B=h*x*l+e*d;h=e*x*l-h*d;e=x*x*l+y;a[0]=t*aa+q*b+C*n;a[1]=c*aa+m*b+L*n;a[2]=F*aa+E*b+u*n;a[3]=
K*aa+M*b+J*n;a[4]=t*U+q*p+C*W;a[5]=c*U+m*p+L*W;a[6]=F*U+E*p+u*W;a[7]=K*U+M*p+J*W;a[8]=t*B+q*h+C*e;a[9]=c*B+m*h+L*e;a[10]=F*B+E*h+u*e;a[11]=K*B+M*h+J*e;g!==a&&(a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);return a}},{}],61:[function(M,Z,ma){Z.exports=function(a,g,t){var x=Math.sin(t);t=Math.cos(t);var h=g[4],e=g[5],c=g[6],d=g[7],y=g[8],l=g[9],F=g[10],K=g[11];g!==a&&(a[0]=g[0],a[1]=g[1],a[2]=g[2],a[3]=g[3],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[4]=h*t+y*x;a[5]=e*t+l*x;a[6]=c*t+F*x;a[7]=
d*t+K*x;a[8]=y*t-h*x;a[9]=l*t-e*x;a[10]=F*t-c*x;a[11]=K*t-d*x;return a}},{}],62:[function(M,Z,ma){Z.exports=function(a,g,t){var x=Math.sin(t);t=Math.cos(t);var h=g[0],e=g[1],c=g[2],d=g[3],y=g[8],l=g[9],F=g[10],K=g[11];g!==a&&(a[4]=g[4],a[5]=g[5],a[6]=g[6],a[7]=g[7],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[0]=h*t-y*x;a[1]=e*t-l*x;a[2]=c*t-F*x;a[3]=d*t-K*x;a[8]=h*x+y*t;a[9]=e*x+l*t;a[10]=c*x+F*t;a[11]=d*x+K*t;return a}},{}],63:[function(M,Z,ma){Z.exports=function(a,g,t){var x=Math.sin(t);
t=Math.cos(t);var h=g[0],e=g[1],c=g[2],d=g[3],y=g[4],l=g[5],F=g[6],K=g[7];g!==a&&(a[8]=g[8],a[9]=g[9],a[10]=g[10],a[11]=g[11],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[0]=h*t+y*x;a[1]=e*t+l*x;a[2]=c*t+F*x;a[3]=d*t+K*x;a[4]=y*t-h*x;a[5]=l*t-e*x;a[6]=F*t-c*x;a[7]=K*t-d*x;return a}},{}],64:[function(M,Z,ma){Z.exports=function(a,g,t){var x=t[0],h=t[1];t=t[2];a[0]=g[0]*x;a[1]=g[1]*x;a[2]=g[2]*x;a[3]=g[3]*x;a[4]=g[4]*h;a[5]=g[5]*h;a[6]=g[6]*h;a[7]=g[7]*h;a[8]=g[8]*t;a[9]=g[9]*t;a[10]=g[10]*t;a[11]=
g[11]*t;a[12]=g[12];a[13]=g[13];a[14]=g[14];a[15]=g[15];return a}},{}],65:[function(M,Z,ma){Z.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],66:[function(M,Z,ma){Z.exports=function(a,g,t){var x=t[0],h=t[1];t=t[2];var e,c,d,y,l,F,K,q,m,E,M,C;g===a?(a[12]=g[0]*x+g[4]*h+g[8]*t+g[12],a[13]=g[1]*x+g[5]*h+g[9]*t+g[13],a[14]=g[2]*x+g[6]*h+g[10]*t+g[14],
a[15]=g[3]*x+g[7]*h+g[11]*t+g[15]):(e=g[0],c=g[1],d=g[2],y=g[3],l=g[4],F=g[5],K=g[6],q=g[7],m=g[8],E=g[9],M=g[10],C=g[11],a[0]=e,a[1]=c,a[2]=d,a[3]=y,a[4]=l,a[5]=F,a[6]=K,a[7]=q,a[8]=m,a[9]=E,a[10]=M,a[11]=C,a[12]=e*x+l*h+m*t+g[12],a[13]=c*x+F*h+E*t+g[13],a[14]=d*x+K*h+M*t+g[14],a[15]=y*x+q*h+C*t+g[15]);return a}},{}],67:[function(M,Z,ma){Z.exports=function(a,g){if(a===g){var t=g[1],x=g[2],h=g[3],e=g[6],c=g[7],d=g[11];a[1]=g[4];a[2]=g[8];a[3]=g[12];a[4]=t;a[6]=g[9];a[7]=g[13];a[8]=x;a[9]=e;a[11]=
g[14];a[12]=h;a[13]=c;a[14]=d}else a[0]=g[0],a[1]=g[4],a[2]=g[8],a[3]=g[12],a[4]=g[1],a[5]=g[5],a[6]=g[9],a[7]=g[13],a[8]=g[2],a[9]=g[6],a[10]=g[10],a[11]=g[14],a[12]=g[3],a[13]=g[7],a[14]=g[11],a[15]=g[15];return a}},{}],68:[function(M,Z,ma){function a(a){throw Error("resl: "+a);}function g(c,d,e){Object.keys(c).forEach(function(c){0>d.indexOf(c)&&a('invalid parameter "'+c+'" in '+e)})}function t(a,d){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=d}var x=["manifest","onDone",
"onProgress","onError"],h=["type","src","stream","credentials","parser"],e=["onData","onDone"];Z.exports=function(c){function d(d,b){if(d in c){var e=c[d];"function"!==typeof e&&a('invalid callback "'+d+'"');return e}return null}function y(a){function b(){if(!(2>h.readyState||1===l.state||-1===l.state)){if(200!==h.status)return F('error loading resource "'+a.name+'"');if(2<h.readyState&&0===l.state){var b;b="binary"===a.type?h.response:h.responseText;if(g.data)try{m=g.data(b)}catch(d){return F(d)}else m=
b}if(3<h.readyState&&0===l.state){if(g.done)try{m=g.done()}catch(d){return F(d)}l.state=1}C[c]=m;l.progress=.75*l.progress+.25;l.ready=a.stream&&!!m||1===l.state;K()}}var c=a.name,d=a.stream,e="binary"===a.type,g=a.parser,h=new XMLHttpRequest,m=null,l=new t(c,function(){1!==l.state&&-1!==l.state&&(h.onreadystatechange=null,h.abort(),l.state=-1)});h.onreadystatechange=d?b:function(){4===h.readyState&&b()};e&&(h.responseType="arraybuffer");a.credentials&&(h.withCredentials=!0);h.open("GET",a.src,!0);
h.send();return l}function l(a,b){function c(){if(0===q.state)if(m.data)try{u=m.data(b)}catch(a){return F(a)}else u=b}function d(a){c();C[l]=u;q.progress=a.lengthComputable?Math.max(q.progress,a.loaded/a.total):.75*q.progress+.25;K(l)}function e(){c();if(0===q.state){if(m.done)try{u=m.done()}catch(a){return F(a)}q.state=1}q.progress=1;q.ready=!0;C[l]=u;h();K("finish "+l)}function g(){F('error loading asset "'+l+'"')}function h(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",
e):b.addEventListener("canplay",e);b.removeEventListener("error",g)}var l=a.name,m=a.parser,q=new t(l,function(){1!==q.state&&-1!==q.state&&(q.state=-1,h(),b.src="")}),u=b;a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",e);else{var k=!1,x=!1;b.addEventListener("loadedmetadata",function(){x=!0;k&&e()});b.addEventListener("canplay",function(){k=!0;x&&e()})}b.addEventListener("error",g);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return q}
function F(a){-1!==L&&1!==L&&(L=-1,J.forEach(function(a){a.cancel()}),M?"string"===typeof a?M(Error("resl: "+a)):M(a):console.error("resl error:",a))}function K(a){if(-1!==L&&1!==L){var b=0,c=0;J.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===J.length?(L=1,m(C)):E&&E(b/J.length,a)}}"object"===typeof c&&c||a("invalid or missing configuration");g(c,x,"config");var q=c.manifest;"object"===typeof q&&q||a("missing manifest");var m=d("onDone");m||a("missing onDone() callback");var E=d("onProgress"),
M=d("onError"),C={},L=0,u={text:y,binary:function(a){return y(a)},image:function(a){return l(a,document.createElement("img"))},video:function(a){return l(a,document.createElement("video"))},audio:function(a){return l(a,document.createElement("audio"))}},J=Object.keys(q).map(function(c){function b(b,c){if(b in d.parser){var e=d.parser[b];"function"!==typeof e&&a("invalid parser callback "+b+' for asset "'+b+'"');return e}return c}var d=q[c];"string"===typeof d?d={src:d}:"object"===typeof d&&d||a('invalid asset definition "'+
c+'"');g(d,h,'asset "'+c+'"');var l={};"parser"in d&&("function"===typeof d.parser?l={data:d.parser}:"object"===typeof d.parser&&d.parser?(g(l,e,'parser for asset "'+c+'"'),"onData"in l||a('missing onData callback for parser in asset "'+c+'"'),l={data:b("onData"),done:b("onDone")}):a('invalid parser for asset "'+c+'"'));return{name:c,type:function(b,e,g){b in d&&(g=d[b]);0>e.indexOf(g)&&a("invalid "+b+' "'+g+'" for asset "'+c+'", possible values: '+e);return g}("type",Object.keys(u),"text"),stream:!!d.stream,
credentials:!!d.credentials,src:function(b,e,g){b in d?g=d[b]:e&&a("missing "+b+' for asset "'+c+'"');"string"!==typeof g&&a("invalid "+b+' for asset "'+c+'", must be a string');return g}("src",!0,""),parser:l}}).map(function(a){return u[a.type](a)});0===J.length&&setTimeout(function(){K("done")},1)}},{}],69:[function(M,Z,ma){function a(a,c){for(var d=0;d<a.length;++d)if(a[d]===c)return d;return-1}var g=M("./lib/util/check"),t=M("./lib/util/extend"),x=M("./lib/dynamic"),h=M("./lib/util/raf"),e=M("./lib/util/clock"),
c=M("./lib/strings"),d=M("./lib/webgl"),y=M("./lib/extension"),l=M("./lib/limits"),F=M("./lib/buffer"),K=M("./lib/elements"),q=M("./lib/texture"),m=M("./lib/renderbuffer"),E=M("./lib/framebuffer"),ia=M("./lib/attribute"),C=M("./lib/shader"),L=M("./lib/read"),u=M("./lib/core"),J=M("./lib/stats"),aa=M("./lib/timer");Z.exports=function(b){function n(){if(0===Ca.length)S&&S.update(),Ma=null;else{Ma=h.next(n);k();for(var a=Ca.length-1;0<=a;--a){var b=Ca[a];b&&b(Q,null,0)}Z.flush();S&&S.update()}}function M(){!Ma&&
0<Ca.length&&(Ma=h.next(n))}function p(){Ma&&(h.cancel(n),Ma=null)}function W(a){a.preventDefault();la=!0;p();ja.forEach(function(a){a()})}function B(a){Z.getError();la=!1;ma.restore();ga.restore();pa.restore();R.restore();na.restore();ra.restore();I.restore();S&&S.restore();Ba.procs.refresh();M();oa.forEach(function(a){a()})}function z(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(x.isDynamic(f))e[b]=x.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(x.isDynamic(f[g])){e[b]=
x.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}g(!!a,"invalid args to regl({...})");g.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=t({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=Ba.compile(a,f,e,d,h),l=k.draw,m=k.batch,n=k.scope,p=[];return t(function(a,b){var d;la&&g.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function Y(a,b){var c=0;Ba.procs.poll();var d=b.color;d&&(Z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Z.clearDepth(+b.depth),c|=256);"stencil"in b&&(Z.clearStencil(b.stencil|0),c|=1024);g(!!c,"called regl.clear with no buffer specified");
Z.clear(c)}function G(b){g.type(b,"function","regl.frame() callback must be a function");Ca.push(b);M();return{cancel:function(){function c(){var b=a(Ca,c);Ca[b]=Ca[Ca.length-1];--Ca.length;0>=Ca.length&&p()}var d=a(Ca,b);g(0<=d,"cannot cancel a frame twice");Ca[d]=c}}}function D(){var a=ya.viewport,b=ya.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=Z.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=Z.drawingBufferHeight}
function k(){Q.tick+=1;Q.time=f();D();Ba.procs.poll()}function V(){R.refresh();D();Ba.procs.refresh();S&&S.update()}function f(){return(e()-N)/1E3}console.log("REGL args are:",b);b=d(b);console.log("REGL configs are:",b);if(!b)return null;var Z=b.gl,H=Z.getContextAttributes(),la=Z.isContextLost(),ma=y(Z,b);if(!ma)return null;var X=c(),ea=J(),T=ma.extensions,S=aa(Z,T),N=e(),r=Z.drawingBufferWidth,P=Z.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:r,viewportHeight:P,framebufferWidth:r,framebufferHeight:P,
drawingBufferWidth:r,drawingBufferHeight:P,pixelRatio:b.pixelRatio},r={elements:null,primitive:4,count:-1,offset:0,instances:-1},qa=l(Z,T),pa=F(Z,ea,b,function(a){return I.destroyBuffer(a)}),A=K(Z,T,pa,ea),I=ia(Z,T,qa,ea,pa,A,r),ga=C(Z,X,ea,b),R=q(Z,T,qa,function(){Ba.procs.poll()},Q,ea,b),na=m(Z,T,qa,ea,b),ra=E(Z,T,qa,R,na,ea),Ba=u(Z,X,T,qa,pa,A,R,ra,{},I,ga,r,Q,S,b),X=L(Z,ra,Ba.procs.poll,Q,H,T,qa),ya=Ba.next,ha=Z.canvas,Ca=[],ja=[],oa=[],za=[b.onDestroy],Ma=null;ha&&(ha.addEventListener("webglcontextlost",
W,!1),ha.addEventListener("webglcontextrestored",B,!1));var Aa=ra.setFBO=z({framebuffer:x.define.call(null,1,"framebuffer")});V();H=t(z,{clear:function(a){g("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)Aa(t({framebuffer:a.framebuffer.faces[b]},a),Y);else Aa(a,Y);else Y(null,a)},prop:x.define.bind(null,1),context:x.define.bind(null,2),"this":x.define.bind(null,3),draw:z({}),buffer:function(a){return pa.create(a,
34962,!1,!1)},elements:function(a){return A.create(a,!1)},texture:R.create2D,cube:R.createCube,renderbuffer:na.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:I.createVAO,attributes:H,frame:G,on:function(a,b){g.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return G(b);case "lost":c=ja;break;case "restore":c=oa;break;case "destroy":c=za;break;default:g.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:qa,hasExtension:function(a){return 0<=qa.extensions.indexOf(a.toLowerCase())},read:X,destroy:function(){Ca.length=0;p();ha&&(ha.removeEventListener("webglcontextlost",W),ha.removeEventListener("webglcontextrestored",B));ga.clear();ra.clear();na.clear();I.clear();R.clear();A.clear();pa.clear();S&&S.clear();za.forEach(function(a){a()})},_gl:Z,_refresh:V,poll:function(){k();S&&S.update()},now:f,stats:ea});b.onDone(null,H);return H}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
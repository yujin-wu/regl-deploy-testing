(function(){function U(ia,Ba,e){function R(m,g){if(!Ba[m]){if(!ia[m]){var h="function"==typeof require&&require;if(!g&&h)return h(m,!0);if(D)return D(m,!0);h=Error("Cannot find module '"+m+"'");throw h.code="MODULE_NOT_FOUND",h;}h=Ba[m]={exports:{}};ia[m][0].call(h.exports,function(b){return R(ia[m][1][b]||b)},h,h.exports,U,ia,Ba,e)}return Ba[m].exports}for(var D="function"==typeof require&&require,M=0;M<e.length;M++)R(e[M]);return R}return U})()({1:[function(U,ia,Ba){function e(b){return[b%64,b/
64|0]}function R(b){var g=b.tick;J({framebuffer:E[0]},function(){D.clear({color:[0,0,0,1]});V();O({vertexState:h[(g+1)%2]})});for(b=0;4>b;++b)X({dest:E[(b+1)%2],src:E[b%2],axis:b%2});x({dest:E[1],src:E[0]});u({dest:h[(g+1)%2],src:h[g%2]});F({dest:h[g%2],src:h[(g+1)%2],field:E[1]})}var D=U("../regl")({extensions:["webgl_draw_buffers","oes_texture_float"]}),M=U("mouse-change")();U=.5/64;var m=new Float32Array(16384),g=new Float32Array(8192);(function(){for(var b=0;64>b;++b)for(var h=0;64>h;++h){var t=
64*b+h;g[2*t]=b/64;g[2*t+1]=h/64;m[4*t]=Math.random();m[4*t+1]=Math.random()}})();ia=D.buffer(g);var h=[D.framebuffer({color:D.texture({radius:64,data:m,type:"float"}),depthStencil:!1}),D.framebuffer({radius:64,colorType:"float",depthStencil:!1})],b=[];(function(){for(var g=0;64>g;++g)for(var h=0;64>h;++h){if(63>g){var m=g+64*h,d=g+1+64*h;b.push([m,d],[d,m])}63>h&&(m=g+64*h,d=g+64*(h+1),b.push([m,d],[d,m]))}})();var E=[D.framebuffer({color:D.texture({type:"float",wrap:"repeat",radius:1024}),depthStencil:!1}),
D.framebuffer({color:D.texture({type:"float",wrap:"repeat",radius:1024}),depthStencil:!1})],J=D({framebuffer:D.prop("framebuffer")}),O=D({vert:"\n  precision highp float;\n  attribute vec2 id;\n  uniform sampler2D vertexState;\n  void main () {\n    vec4 state = texture2D(vertexState, id);\n    gl_Position = vec4(2.0 * fract(state.xy) - 1.0, 0, 1);\n  }",frag:"\n  precision highp float;\n  void main () {\n    gl_FragColor = vec4(1, 0, 0, 0);\n  }",attributes:{id:ia},uniforms:{vertexState:D.prop("vertexState")},
blend:{enable:!0,func:{src:1,dst:1},equation:"add"},depth:{enable:!1,mask:!1},primitive:"points",count:4096,elements:null}),X=D({framebuffer:D.prop("dest"),vert:"\n  precision highp float;\n  attribute vec2 p;\n  varying vec2 uv;\n  void main () {\n    uv = 0.5 * (p + 1.0);\n    gl_Position = vec4(p, 0, 1);\n  }",frag:"\n  precision highp float;\n  uniform sampler2D src;\n  uniform vec2 axis;\n  varying vec2 uv;\n  void main () {\n    float f = 0.0;\n    for (int i = -16; i <= 16; ++i) {\n      f += (17.0 - abs(float(i))) / 33.0 *\n          texture2D(src, axis * float(i) + uv).r;\n    }\n    gl_FragColor = vec4(f, 0, 0, 1);\n  }",
attributes:{p:[-4,0,4,4,4,-4]},uniforms:{src:function(b,g){return g.src},axis:function(b,g){var h=[0,0];h[g.axis]=1/1024;return h}},depth:{enable:!1,mask:!1},count:3}),x=D({framebuffer:D.prop("dest"),vert:"\n  precision highp float;\n  attribute vec2 p;\n  varying vec2 uv;\n  void main () {\n    uv = 0.5 * (p + 1.0);\n    gl_Position = vec4(p, 0, 1);\n  }",frag:"\n  precision highp float;\n  uniform sampler2D src;\n  uniform vec2 deriv;\n  varying vec2 uv;\n  void main () {\n    float f01 = texture2D(src, uv - vec2(deriv.x, 0)).x;\n    float f21 = texture2D(src, uv + vec2(deriv.x, 0)).x;\n    float f10 = texture2D(src, uv - vec2(0, deriv.y)).x;\n    float f12 = texture2D(src, uv + vec2(0, deriv.y)).x;\n    gl_FragColor = vec4(f21 - f01, f12 - f10, 0, 1);\n  }",
attributes:{p:[-4,0,4,4,4,-4]},uniforms:{src:D.prop("src"),deriv:function(b,g){return[1/g.src.width,1/g.src.height]}},depth:{enable:!1,mask:!1},count:3}),u=D({framebuffer:D.prop("dest"),vert:"\n  precision highp float;\n  attribute vec4 edge;\n  varying vec2 force;\n  uniform sampler2D vertexState;\n  uniform float restLength, stiffness;\n  void main () {\n    vec4 s0 = texture2D(vertexState, edge.rg);\n    vec4 s1 = texture2D(vertexState, edge.ba);\n    vec2 d = s1.xy - s0.xy;\n    float l = max(length(d), 0.001);\n    force = stiffness * log(l / restLength) * d / l;\n    gl_Position = vec4(2.0 * edge.xy - 1.0 + 1.0 / 64.0, 0, 1);\n  }",
frag:"\n  precision highp float;\n  varying vec2 force;\n  void main () {\n    gl_FragColor = vec4(0, 0, force);\n  }",attributes:{edge:b.map(function(b){var g=e(b[0]);b=e(b[1]);return[g[0]/64,g[1]/64,b[0]/64,b[1]/64]})},uniforms:{vertexState:D.prop("src"),restLength:U,stiffness:.08},blend:{enable:!0,func:{src:1,dst:1},equation:"add"},depth:{enable:!1,mask:!1},count:b.length,primitive:"points"}),F=D({framebuffer:D.prop("dest"),vert:"\n  precision highp float;\n  attribute vec2 p;\n  varying vec2 id;\n  void main () {\n    id = 0.5 * (p + 1.0);\n    gl_Position = vec4(p, 0, 1);\n  }",
frag:"\n  precision highp float;\n  uniform sampler2D vertexState, field;\n  uniform float temperature, t;\n  varying vec2 id;\n\n  float rnd (vec2 co) {\n    return fract(sin(t*0.1+dot(co.xy, vec2(12.9898,78.233))) * 43758.5453);\n  }\n\n  void main () {\n    vec4 state = texture2D(vertexState, id);\n    vec2 p = state.rg;\n    vec2 v = state.ba;\n    vec2 force = texture2D(field, p).xy;\n    p += 1.0E-4 * v;\n    v = float(0.98) * (v - float(0.05) * force);\n    vec2 jitter = vec2(rnd(id), rnd(id + 1000.0)) - 0.5;\n    gl_FragColor = vec4(p + temperature * jitter, v);\n  }",
attributes:{p:[-4,0,4,-4,4,4]},uniforms:{vertexState:D.prop("src"),field:D.prop("field"),temperature:function(b){return 1/(.5*b.tick+20)},t:D.context("tick")},count:3}),Y=D({vert:"\n  precision highp float;\n  attribute vec2 id;\n  uniform sampler2D vertexState;\n  void main () {\n    vec4 state = texture2D(vertexState, id);\n    gl_PointSize = 2.0;\n    gl_Position = vec4(2.0 * fract(state.xy) - 1.0, 0, 1);\n  }",frag:"\n  precision highp float;\n  void main () {\n    gl_FragColor = vec4(0, 0, 0, 1);\n  }",
attributes:{id:ia},uniforms:{vertexState:function(b){return h[b.tick%2]}},depth:{enable:!1,mask:!1},primitive:"points",count:4096,elements:null});U=2;U>D.limits.lineWidthDims[1]&&(U=D.limits.lineWidthDims[1]);var t=D({vert:"\n  precision highp float;\n  attribute vec4 id;\n  attribute float arcDir;\n  uniform float dir;\n  uniform sampler2D vertexState;\n  void main () {\n    float side = arcDir + dir - 2.0 * dir * arcDir;\n    vec2 s0 = texture2D(vertexState, id.rg).xy;\n    vec2 s1 = texture2D(vertexState, id.ba).xy;\n    vec2 shift = mix(fract(s0) - s0, fract(s1) - s1, side);\n    gl_Position = vec4(2.0 * (s0.xy + shift) - 1.0, 0, 1);\n  }",
frag:"\n  void main () {\n    gl_FragColor = vec4(0.1, 0, 1, 1);\n  }",attributes:{id:b.map(function(b){var g=e(b[0]);b=e(b[1]);return[g[0]/64,g[1]/64,b[0]/64,b[1]/64]}),arcDir:b.map(function(b,g){return g%2})},uniforms:{vertexState:function(b){return h[b.tick%2]},dir:D.prop("dir")},depth:{enable:!1,mask:!1},count:b.length,primitive:"lines",lineWidth:U}),V=D({vert:"\n  uniform vec2 mouse;\n  attribute float p;\n  void main () {\n    gl_PointSize = 32.0;\n    gl_Position = vec4(mouse, p, 1);\n  }",
frag:"\n  precision highp float;\n  uniform float strength;\n  void main () {\n    float s = strength * exp(-16.0 * dot(gl_PointCoord.xy, gl_PointCoord.xy));\n    gl_FragColor = vec4(s, 0, 0, 1);\n  }",attributes:{p:[0]},uniforms:{mouse:function(b){var g=b.pixelRatio;return[2*g*M.x/b.drawingBufferWidth-1,1-2*g*M.y/b.drawingBufferHeight]},strength:function(){return M.buttons?5:1}},count:1,primitive:"points"});D.frame(function(b){R(b);D.clear({color:[1,1,1,1]});t([{dir:0},{dir:1}]);Y()})},{"../regl":40,
"mouse-change":38}],2:[function(U,ia,Ba){function e(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var R=U("./util/sorted-object-keys"),D=U("./util/check"),M=U("./util/values"),m=U("./constants/dtypes.json"),g=U("./util/is-typed-array"),h=U("./util/is-ndarray"),b=U("./constants/primitives.json"),E="attributes elements offset count primitive instances".split(" ");ia.exports=function(J,O,X,x,u,F,Y){function t(b){if(b!==
ca.currentVAO){var g=O.oes_vertex_array_object;b?g.bindVertexArrayOES(b.vao):g.bindVertexArrayOES(null);ca.currentVAO=b}}function V(b){if(b!==ca.currentVAO){if(b)b.bindAttrs();else{for(var g=O.angle_instanced_arrays,d=0;d<z.length;++d){var h=z[d];h.buffer?(J.enableVertexAttribArray(d),h.buffer.bind(),J.vertexAttribPointer(d,h.size,h.type,h.normalized,h.stride,h.offfset),g&&h.divisor&&g.vertexAttribDivisorANGLE(d,h.divisor)):(J.disableVertexAttribArray(d),J.vertexAttrib4f(d,h.x,h.y,h.z,h.w))}Y.elements?
J.bindBuffer(34963,Y.elements.buffer.buffer):J.bindBuffer(34963,null)}ca.currentVAO=b}}function k(){M(f).forEach(function(b){b.destroy()})}function w(){this.id=++W;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=O.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;f[this.id]=this;this.buffers=[]}function sa(){O.oes_vertex_array_object&&M(f).forEach(function(b){b.refresh()})}var d=X.maxAttributes,z=Array(d);
for(X=0;X<d;++X)z[X]=new e;var W=0,f={},ca={Record:e,scope:{},state:z,currentVAO:null,targetVAO:null,restore:O.oes_vertex_array_object?sa:function(){},createVAO:function(G){function p(G){var z;if(Array.isArray(G))z=G,f.elements&&f.ownsElements&&f.elements.destroy(),f.elements=null,f.ownsElements=!1,f.offset=0,f.count=0,f.instances=-1,f.primitive=4;else{D("object"===typeof G,"invalid arguments for create vao");D("attributes"in G,"must specify attributes for vao");if(G.elements){var c=G.elements;f.ownsElements?
("function"===typeof c&&"elements"===c._reglType?f.elements.destroy():f.elements(c),f.ownsElements=!1):F.getElements(G.elements)?(f.elements=G.elements,f.ownsElements=!1):(f.elements=F.create(G.elements),f.ownsElements=!0)}else f.elements=null,f.ownsElements=!1;z=G.attributes;f.offset=0;f.count=-1;f.instances=-1;f.primitive=4;f.elements&&(f.count=f.elements._elements.vertCount,f.primitive=f.elements._elements.primType);"offset"in G&&(f.offset=G.offset|0);"count"in G&&(f.count=G.count|0);"instances"in
G&&(f.instances=G.instances|0);"primitive"in G&&(D(G.primitive in b,"bad primitive type: "+G.primitive),f.primitive=b[G.primitive]);D.optional(function(){for(var a=R(G),c=0;c<a.length;++c)D(0<=E.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+E)});D(Array.isArray(z),"attributes must be an array")}D(z.length<d,"too many attributes");D(0<z.length,"must specify at least one attribute");var c={},l=f.attributes;l.length=z.length;for(var a=0;a<z.length;++a){var k=z[a],A=l[a]=new e,
W=k.data||k;if(Array.isArray(W)||g(W)||h(W)){var t;f.buffers[a]&&(t=f.buffers[a],g(W)&&t._buffer.byteLength>=W.byteLength?t.subdata(W):(t.destroy(),f.buffers[a]=null));f.buffers[a]||(t=f.buffers[a]=u.create(k,34962,!1,!0));A.buffer=u.getBuffer(t);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;c[a]=1}else u.getBuffer(k)?(A.buffer=u.getBuffer(k),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=0,A.stride=0,A.divisor=
0,A.state=1):u.getBuffer(k.buffer)?(A.buffer=u.getBuffer(k.buffer),A.size=(+k.size||A.buffer.dimension)|0,A.normalized=!!k.normalized||!1,"type"in k?(D.parameter(k.type,m,"invalid buffer type"),A.type=m[k.type]):A.type=A.buffer.dtype,A.offset=(k.offset||0)|0,A.stride=(k.stride||0)|0,A.divisor=(k.divisor||0)|0,A.state=1,D(1<=A.size&&4>=A.size,"size must be between 1 and 4"),D(0<=A.offset,"invalid offset"),D(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),D(0<=A.divisor,"divisor must be positive"),
D(!A.divisor||!!O.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in k?(D(0<a,"first attribute must not be a constant"),A.x=+k.x||0,A.y=+k.y||0,A.z=+k.z||0,A.w=+k.w||0,A.state=2):D(!1,"invalid attribute spec for location "+a)}for(t=0;t<f.buffers.length;++t)!c[t]&&f.buffers[t]&&(f.buffers[t].destroy(),f.buffers[t]=null);f.refresh();return p}var f=new w;x.vaoCount+=1;p.destroy=function(){for(var b=0;b<f.buffers.length;++b)f.buffers[b]&&f.buffers[b].destroy();f.buffers.length=
0;f.ownsElements&&(f.elements.destroy(),f.elements=null,f.ownsElements=!1);f.destroy()};p._vao=f;p._reglType="vao";return p(G)},getVAO:function(b){return"function"===typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var g=0;g<z.length;++g){var d=z[g];d.buffer===b&&(J.disableVertexAttribArray(g),d.buffer=null)}},setVAO:O.oes_vertex_array_object?t:V,clear:O.oes_vertex_array_object?k:function(){}};w.prototype.bindAttrs=function(){for(var b=O.angle_instanced_arrays,g=this.attributes,h=0;h<g.length;++h){var f=
g[h];f.buffer?(J.enableVertexAttribArray(h),J.bindBuffer(34962,f.buffer.buffer),J.vertexAttribPointer(h,f.size,f.type,f.normalized,f.stride,f.offset),b&&f.divisor&&b.vertexAttribDivisorANGLE(h,f.divisor)):(J.disableVertexAttribArray(h),J.vertexAttrib4f(h,f.x,f.y,f.z,f.w))}for(b=g.length;b<d;++b)J.disableVertexAttribArray(b);(b=F.getElements(this.elements))?J.bindBuffer(34963,b.buffer.buffer):J.bindBuffer(34963,null)};w.prototype.refresh=function(){var b=O.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),
this.bindAttrs(),ca.currentVAO=null,b.bindVertexArrayOES(null))};w.prototype.destroy=function(){if(this.vao){var b=O.oes_vertex_array_object;this===ca.currentVAO&&(ca.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);f[this.id]&&(delete f[this.id],--x.vaoCount)};return ca}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,
"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(U,ia,Ba){function e(b){return X[Object.prototype.toString.call(b)]|0}function R(b,g){for(var h=0;h<g.length;++h)b[h]=g[h]}function D(b,g,h,k,m,e,d){for(var z=0,W=0;W<h;++W)for(var f=0;f<k;++f)b[z++]=g[m*W+e*f+d]}var M=U("./util/sorted-object-keys"),m=U("./util/check"),g=U("./util/is-typed-array"),h=U("./util/is-ndarray"),b=U("./util/values"),E=U("./util/pool");Ba=U("./util/flatten");var J=Ba.flatten,O=Ba.shape,
X=U("./constants/arraytypes.json"),x=U("./constants/dtypes.json"),u=U("./constants/usage.json"),F=[];F[5120]=1;F[5122]=2;F[5124]=4;F[5121]=1;F[5123]=2;F[5125]=4;F[5126]=4;ia.exports=function(X,t,V,k){function w(b){this.id=W++;this.buffer=X.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;V.profile&&(this.stats={size:0})}function sa(b,g,d){b.byteLength=g.byteLength;X.bufferData(b.type,g,d)}function d(b,d,f,z,k,c){b.usage=f;if(Array.isArray(d)){if(b.dtype=
z||5126,0<d.length)if(Array.isArray(d[0])){k=O(d);for(var l=z=1;l<k.length;++l)z*=k[l];b.dimension=z;d=J(d,k,b.dtype);sa(b,d,f);c?b.persistentData=d:E.freeType(d)}else"number"===typeof d[0]?(b.dimension=k,k=E.allocType(b.dtype,d.length),R(k,d),sa(b,k,f),c?b.persistentData=k:E.freeType(k)):g(d[0])?(b.dimension=d[0].length,b.dtype=z||e(d[0])||5126,d=J(d,[d.length,d[0].length],b.dtype),sa(b,d,f),c?b.persistentData=d:E.freeType(d)):m.raise("invalid buffer data")}else if(g(d))b.dtype=z||e(d),b.dimension=
k,sa(b,d,f),c&&(b.persistentData=new Uint8Array(new Uint8Array(d.buffer)));else if(h(d)){k=d.shape;var a=d.stride,l=d.offset,W=0,A=0,t=0,w=0;1===k.length?(W=k[0],A=1,t=a[0],w=0):2===k.length?(W=k[0],A=k[1],t=a[0],w=a[1]):m.raise("invalid shape");b.dtype=z||e(d.data)||5126;b.dimension=A;k=E.allocType(b.dtype,W*A);D(k,d.data,W,A,t,w,l);sa(b,k,f);c?b.persistentData=k:E.freeType(k)}else d instanceof ArrayBuffer?(b.dtype=5121,b.dimension=k,sa(b,d,f),c&&(b.persistentData=new Uint8Array(new Uint8Array(d)))):
m.raise("invalid buffer data")}function z(b){t.bufferCount--;k(b);var d=b.buffer;m(d,"buffer must not be deleted already");X.deleteBuffer(d);b.buffer=null;delete f[b.id]}var W=0,f={};w.prototype.bind=function(){X.bindBuffer(this.type,this.buffer)};w.prototype.destroy=function(){z(this)};var ca=[];V.profile&&(t.getTotalBufferSize=function(){var b=0;M(f).forEach(function(d){b+=f[d].stats.size});return b});return{create:function(b,p,k,W){function B(a){var c=35044,b=null,f=0,p=0,G=1;Array.isArray(a)||
g(a)||h(a)||a instanceof ArrayBuffer?b=a:"number"===typeof a?f=a|0:a&&(m.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(m(null===b||Array.isArray(b)||g(b)||h(b),"invalid data for buffer"),b=a.data),"usage"in a&&(m.parameter(a.usage,u,"invalid buffer usage"),c=u[a.usage]),"type"in a&&(m.parameter(a.type,x,"invalid buffer type"),p=x[a.type]),"dimension"in a&&(m.type(a.dimension,"number","invalid dimension"),G=a.dimension|0),"length"in a&&(m.nni(f,"buffer length must be a nonnegative integer"),
f=a.length|0));l.bind();b?d(l,b,c,p,G,W):(f&&X.bufferData(l.type,f,c),l.dtype=p||5121,l.usage=c,l.dimension=G,l.byteLength=f);V.profile&&(l.stats.size=l.byteLength*F[l.dtype]);return B}function c(a,c){m(c+a.byteLength<=l.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+c+" to a buffer of size "+l.byteLength);X.bufferSubData(l.type,c,a)}t.bufferCount++;var l=new w(p);f[l.id]=l;k||B(b);B._reglType="buffer";B._buffer=l;B.subdata=
function(a,b){var d=(b||0)|0,f;l.bind();if(g(a)||a instanceof ArrayBuffer)c(a,d);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var p=E.allocType(l.dtype,a.length);R(p,a);c(p,d);E.freeType(p)}else Array.isArray(a[0])||g(a[0])?(f=O(a),p=J(a,f,l.dtype),c(p,d),E.freeType(p)):m.raise("invalid buffer data")}else if(h(a)){f=a.shape;var G=a.stride,k=p=0,z=0,K=0;1===f.length?(p=f[0],k=1,z=G[0],K=0):2===f.length?(p=f[0],k=f[1],z=G[0],K=G[1]):m.raise("invalid shape");f=Array.isArray(a.data)?
l.dtype:e(a.data);f=E.allocType(f,p*k);D(f,a.data,p,k,z,K,a.offset);c(f,d);E.freeType(f)}else m.raise("invalid data for buffer subdata");return B};V.profile&&(B.stats=l.stats);B.destroy=function(){z(l)};return B},createStream:function(b,g){var f=ca.pop();f||(f=new w(b));f.bind();d(f,g,35040,0,1,!1);return f},destroyStream:function(b){ca.push(b)},clear:function(){b(f).forEach(z);ca.forEach(z)},getBuffer:function(b){return b&&b._buffer instanceof w?b._buffer:null},restore:function(){b(f).forEach(function(b){b.buffer=
X.createBuffer();X.bindBuffer(b.type,b.buffer);X.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:d}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(U,ia,Ba){ia.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(U,ia,Ba){ia.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(U,ia,Ba){ia.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(U,ia,Ba){ia.exports=
{"static":35044,dynamic:35048,stream:35040}},{}],8:[function(U,ia,Ba){function e(b){return Array.isArray(b)||X(b)||x(b)}function R(b){return b.sort(function(b,d){return"viewport"===b?-1:"viewport"===d?1:b<d?-1:1})}function D(b,d,g,f){this.thisDep=b;this.contextDep=d;this.propDep=g;this.append=f}function M(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function m(b){return new D(!1,!1,!1,b)}function g(b,d){var g=b.type;if(0===g)return g=b.data.length,new D(!0,1<=g,2<=g,d);if(4===g)return g=b.data,
new D(g.thisDep,g.contextDep,g.propDep,d);if(5===g)return new D(!1,!1,!1,d);if(6===g){for(var f=g=!1,h=!1,c=0;c<b.data.length;++c){var l=b.data[c];1===l.type?h=!0:2===l.type?f=!0:3===l.type?g=!0:0===l.type?(g=!0,l=l.data,1<=l&&(f=!0),2<=l&&(h=!0)):4===l.type&&(g=g||l.data.thisDep,f=f||l.data.contextDep,h=h||l.data.propDep)}return new D(g,f,h,d)}return new D(3===g,2===g,1===g,d)}var h=U("./util/sorted-object-keys"),b=U("./util/check"),E=U("./util/extend"),J=U("./util/codegen"),O=U("./util/loop"),X=
U("./util/is-typed-array"),x=U("./util/is-ndarray"),u=U("./util/is-array-like"),F=U("./dynamic"),Y=U("./constants/primitives.json"),t=U("./constants/dtypes.json"),V=["x","y","z","w"],k="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),w={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},sa="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),d={never:512,less:513,
"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},W={frag:35632,vert:35633},f={cw:2304,ccw:2305},ca=new D(!1,!1,!1,function(){});ia.exports=function(G,p,x,C,B,c,l,a,X,A,ma,hd,Z,ga,S){function K(b){return b.replace(".","_")}function y(b,a,c){var d=K(b);ua.push(b);aa[d]=ka[d]=!!c;
Ka[d]=a}function q(b,a,c){var d=K(b);ua.push(b);Array.isArray(c)?(ka[d]=c.slice(),aa[d]=c.slice()):ka[d]=aa[d]=c;Fa[d]=a}function P(){var a=J(),c=a.link,d=a.global;a.id=zd++;a.batchId="0";var g=c(gb),q=a.shared={props:"a0"};h(gb).forEach(function(a){q[a]=d.def(g,".",a)});b.optional(function(){a.CHECK=c(b);a.commandStr=b.guessCommand();a.command=c(a.commandStr);a.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",c(d),",",this.command,");")};fa.invalidBlendCombinations=sa});var n=
a.next={},v=a.current={};h(Fa).forEach(function(a){Array.isArray(ka[a])&&(n[a]=d.def(q.next,".",a),v[a]=d.def(q.current,".",a))});var r=a.constants={};h(fa).forEach(function(a){r[a]=d.def(JSON.stringify(fa[a]))});a.invoke=function(b,d){switch(d.type){case 0:var g=["this",q.context,q.props,a.batchId];return b.def(c(d.data),".call(",g.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(q.props,d.data);case 2:return b.def(q.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,
b),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(c){return a.invoke(b,c)})}};a.attribCache={};var f={};a.scopeAttrib=function(a){a=p.id(a);if(a in f)return f[a];var b=A.scope[a];b||(b=A.scope[a]=new ra);return f[a]=c(b)};return a}function Q(a){var b=a["static"];a=a.dynamic;var c;if("profile"in b){var d=!!b.profile;c=m(function(a,b){return d});c.enable=d}else if("profile"in a){var q=a.profile;c=g(q,function(a,b){return a.invoke(b,q)})}return c}function xa(c,d){var q=
c["static"],n=c.dynamic;if("framebuffer"in q){var v=q.framebuffer;return v?(v=a.getFramebuffer(v),b.command(v,"invalid framebuffer object"),m(function(a,b){var c=a.link(v),d=a.shared;b.set(d.framebuffer,".next",c);d=d.context;b.set(d,".framebufferWidth",c+".width");b.set(d,".framebufferHeight",c+".height");return c})):m(function(a,b){var c=a.shared;b.set(c.framebuffer,".next","null");c=c.context;b.set(c,".framebufferWidth",c+".drawingBufferWidth");b.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in n){var r=n.framebuffer;return g(r,function(a,c){var d=a.invoke(c,r),g=a.shared,q=g.framebuffer,v=c.def(q,".getFramebuffer(",d,")");b.optional(function(){a.assert(c,"!"+d+"||"+v,"invalid framebuffer object")});c.set(q,".next",v);g=g.context;c.set(g,".framebufferWidth",v+"?"+v+".width:"+g+".drawingBufferWidth");c.set(g,".framebufferHeight",v+"?"+v+".height:"+g+".drawingBufferHeight");return v})}return null}function oa(a,c,d){function q(a){if(a in v){var r=v[a];b.commandType(r,
"object","invalid "+a,d.commandStr);var f=!0,h=r.x|0,I=r.y|0,N,L;"width"in r?(N=r.width|0,b.command(0<=N,"invalid "+a,d.commandStr)):f=!1;"height"in r?(L=r.height|0,b.command(0<=L,"invalid "+a,d.commandStr)):f=!1;return new D(!f&&c&&c.thisDep,!f&&c&&c.contextDep,!f&&c&&c.propDep,function(a,b){var c=a.shared.context,d=N;"width"in r||(d=b.def(c,".","framebufferWidth","-",h));var g=L;"height"in r||(g=b.def(c,".","framebufferHeight","-",I));return[h,I,d,g]})}if(a in n){var p=n[a],f=g(p,function(c,d){var g=
c.invoke(d,p);b.optional(function(){c.assert(d,g+"&&typeof "+g+'==="object"',"invalid "+a)});var q=c.shared.context,v=d.def(g,".x|0"),r=d.def(g,".y|0"),n=d.def('"width" in ',g,"?",g,".width|0:","(",q,".","framebufferWidth","-",v,")"),f=d.def('"height" in ',g,"?",g,".height|0:","(",q,".","framebufferHeight","-",r,")");b.optional(function(){c.assert(d,n+">=0&&"+f+">=0","invalid "+a)});return[v,r,n,f]});c&&(f.thisDep=f.thisDep||c.thisDep,f.contextDep=f.contextDep||c.contextDep,f.propDep=f.propDep||c.propDep);
return f}return c?new D(c.thisDep,c.contextDep,c.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".","framebufferWidth"),b.def(c,".","framebufferHeight")]}):null}var v=a["static"],n=a.dynamic;if(a=q("viewport")){var r=a;a=new D(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=r.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",c[2]);b.set(d,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:q("scissor.box")}}function n(a,c){var d=a["static"];if("string"===typeof d.frag&&
"string"===typeof d.vert){if(0<h(c.dynamic).length)return null;var d=c["static"],g=h(d);if(0<g.length&&"number"===typeof d[g[0]]){for(var q=[],v=0;v<g.length;++v)b("number"===typeof d[g[v]],"must specify all vertex attribute locations when using vaos"),q.push([d[g[v]]|0,g[v]]);return q}}return null}function H(a,c,d){function q(a){if(a in v){var c=p.id(v[a]);b.optional(function(){ma.shader(W[a],c,b.guessCommand())});var d=m(function(){return c});d.id=c;return d}if(a in r){var n=r[a];return g(n,function(c,
d){var g=c.invoke(d,n),q=d.def(c.shared.strings,".id(",g,")");b.optional(function(){d(c.shared.shader,".shader(",W[a],",",q,",",c.command,");")});return q})}return null}var v=a["static"],r=a.dynamic,n=q("frag"),f=q("vert"),h=null;M(n)&&M(f)?(h=ma.program(f.id,n.id,null,d),a=m(function(a,c){return a.link(h)})):a=new D(n&&n.thisDep||f&&f.thisDep,n&&n.contextDep||f&&f.contextDep,n&&n.propDep||f&&f.propDep,function(a,c){var d=a.shared.shader,g;g=n?n.append(a,c):c.def(d,".","frag");var q;q=f?f.append(a,
c):c.def(d,".","vert");var v=d+".program("+q+","+g;b.optional(function(){v+=","+a.command});return c.def(v+")")});return{frag:n,vert:f,progVar:a,program:h}}function ea(a,d){function q(a,c){if(a in v){var h=v[a]|0;c?r.offset=h:r.instances=h;b.command(!c||0<=h,"invalid "+a,d.commandStr);return m(function(a,b){c&&(a.OFFSET=h);return h})}if(a in n){var L=n[a];return g(L,function(d,g){var v=d.invoke(g,L);c&&(d.OFFSET=v,b.optional(function(){d.assert(g,v+">=0","invalid "+a)}));return v})}if(c){if(N)return m(function(a,
c){return a.OFFSET=0});if(f)return new D(I.thisDep,I.contextDep,I.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(f)return new D(I.thisDep,I.contextDep,I.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var v=a["static"],n=a.dynamic,r={},f=!1,I=function(){if("vao"in v){var a=v.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));f=!0;r.vao=a;return m(function(c){var b=
A.getVAO(a);return b?c.link(b):"null"})}if("vao"in n){f=!0;var c=n.vao;return g(c,function(a,b){var d=a.invoke(b,c);return b.def(a.shared.vao+".getVAO("+d+")")})}return null}(),N=!1,L=function(){if("elements"in v){var a=v.elements;r.elements=a;if(e(a)){var q=r.elements=c.create(a,!0),a=c.getElements(q);N=!0}else a&&(a=c.getElements(a),N=!0,b.command(a,"invalid elements",d.commandStr));q=m(function(c,b){if(a){var d=c.link(a);return c.ELEMENTS=d}return c.ELEMENTS=null});q.value=a;return q}if("elements"in
n){N=!0;var h=n.elements;return g(h,function(a,c){var d=a.shared,g=d.isBufferArgs,d=d.elements,v=a.invoke(c,h),q=c.def("null"),g=c.def(g,"(",v,")"),n=a.cond(g).then(q,"=",d,".createStream(",v,");")["else"](q,"=",d,".getElements(",v,");");b.optional(function(){a.assert(n["else"],"!"+v+"||"+q,"invalid elements")});c.entry(n);c.exit(a.cond(g).then(d,".destroyStream(",q,");"));return a.ELEMENTS=q})}return f?new D(I.thisDep,I.contextDep,I.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),p=q("offset",!0),l=function(){if("primitive"in v){var a=v.primitive;r.primitive=a;b.commandParameter(a,Y,"invalid primitve",d.commandStr);return m(function(c,b){return Y[a]})}if("primitive"in n){var c=n.primitive;return g(c,function(a,d){var g=a.constants.primTypes,v=a.invoke(d,c);b.optional(function(){a.assert(d,v+" in "+g,"invalid primitive, must be one of "+h(Y))});return d.def(g,"[",v,"]")})}return N?M(L)?L.value?
m(function(a,c){return c.def(a.ELEMENTS,".primType")}):m(function(){return 4}):new D(L.thisDep,L.contextDep,L.propDep,function(a,c){var b=a.ELEMENTS;return c.def(b,"?",b,".primType:",4)}):f?new D(I.thisDep,I.contextDep,I.propDep,function(a,c){return c.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),k=function(){if("count"in v){var a=v.count|0;r.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",d.commandStr);return m(function(){return a})}if("count"in
n){var c=n.count;return g(c,function(a,d){var g=a.invoke(d,c);b.optional(function(){a.assert(d,"typeof "+g+'==="number"&&'+g+">=0&&"+g+"===("+g+"|0)","invalid vertex count")});return g})}if(N){if(M(L)){if(L)return p?new D(p.thisDep,p.contextDep,p.propDep,function(a,c){var d=c.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(c,d+">=0","invalid vertex offset/element buffer too small")});return d}):m(function(a,c){return c.def(a.ELEMENTS,".vertCount")});var q=m(function(){return-1});
b.optional(function(){q.MISSING=!0});return q}var h=new D(L.thisDep||p.thisDep,L.contextDep||p.contextDep,L.propDep||p.propDep,function(a,c){var b=a.ELEMENTS;return a.OFFSET?c.def(b,"?",b,".vertCount-",a.OFFSET,":-1"):c.def(b,"?",b,".vertCount:-1")});b.optional(function(){h.DYNAMIC=!0});return h}return f?new D(I.thisDep,I.contextDep,I.propDep,function(a,c){return c.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),K=q("instances",!1);return{elements:L,primitive:l,count:k,
instances:K,offset:p,vao:I,vaoActive:f,elementsActive:N,"static":r}}function T(a,c){var v=a["static"],q=a.dynamic,n={};ua.forEach(function(a){function r(c,b){if(a in v){var d=c(v[a]);n[I]=m(function(){return d})}else if(a in q){var f=q[a];n[I]=g(f,function(a,c){return b(a,c,a.invoke(c,f))})}}var I=K(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return r(function(d){b.commandType(d,
"boolean",a,c.commandStr);return d},function(c,d,g){b.optional(function(){c.assert(d,"typeof "+g+'==="boolean"',"invalid flag "+a,c.commandStr)});return g});case "depth.func":return r(function(g){b.commandParameter(g,d,"invalid "+a,c.commandStr);return d[g]},function(c,g,v){var q=c.constants.compareFuncs;b.optional(function(){c.assert(g,v+" in "+q,"invalid "+a+", must be one of "+h(d))});return g.def(q,"[",v,"]")});case "depth.range":return r(function(a){b.command(u(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",c.commandStr);return a},function(a,c,d){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var g=c.def("+",d,"[0]"),v=c.def("+",d,"[1]");return[g,v]});case "blend.func":return r(function(a){b.commandType(a,"object","blend.func",c.commandStr);var d="srcRGB"in a?a.srcRGB:a.src,g="srcAlpha"in a?a.srcAlpha:
a.src,v="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(d,w,I+".srcRGB",c.commandStr);b.commandParameter(g,w,I+".srcAlpha",c.commandStr);b.commandParameter(v,w,I+".dstRGB",c.commandStr);b.commandParameter(a,w,I+".dstAlpha",c.commandStr);b.command(-1===sa.indexOf(d+", "+v),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+v+")",c.commandStr);return[w[d],w[v],w[g],w[a]]},function(c,d,g){function v(n,r){var f=d.def('"',n,r,'" in ',g,"?",g,".",n,r,":",g,".",
n);b.optional(function(){c.assert(d,f+" in "+q,"invalid "+a+"."+n+r+", must be one of "+h(w))});return f}var q=c.constants.blendFuncs;b.optional(function(){c.assert(d,g+"&&typeof "+g+'==="object"',"invalid blend func, must be an object")});var n=v("src","RGB"),r=v("dst","RGB");b.optional(function(){c.assert(d,c.constants.invalidBlendCombinations+".indexOf("+n+'+", "+'+r+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=d.def(q,"[",n,"]"),I=d.def(q,"[",v("src","Alpha"),"]"),
L=d.def(q,"[",r,"]"),N=d.def(q,"[",v("dst","Alpha"),"]");return[f,L,I,N]});case "blend.equation":return r(function(d){if("string"===typeof d)return b.commandParameter(d,Ga,"invalid "+a,c.commandStr),[Ga[d],Ga[d]];if("object"===typeof d)return b.commandParameter(d.rgb,Ga,a+".rgb",c.commandStr),b.commandParameter(d.alpha,Ga,a+".alpha",c.commandStr),[Ga[d.rgb],Ga[d.alpha]];b.commandRaise("invalid blend.equation",c.commandStr)},function(c,d,g){var v=c.constants.blendEquations,q=d.def(),n=d.def(),r=c.cond("typeof ",
g,'==="string"');b.optional(function(){function b(a,d,g){c.assert(a,g+" in "+v,"invalid "+d+", must be one of "+h(Ga))}b(r.then,a,g);c.assert(r["else"],g+"&&typeof "+g+'==="object"',"invalid "+a);b(r["else"],a+".rgb",g+".rgb");b(r["else"],a+".alpha",g+".alpha")});r.then(q,"=",n,"=",v,"[",g,"];");r["else"](q,"=",v,"[",g,".rgb];",n,"=",v,"[",g,".alpha];");d(r);return[q,n]});case "blend.color":return r(function(a){b.command(u(a)&&4===a.length,"blend.color must be a 4d array",c.commandStr);return O(4,
function(c){return+a[c]})},function(a,c,d){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+d+")&&"+d+".length===4","blend.color must be a 4d array")});return O(4,function(a){return c.def("+",d,"[",a,"]")})});case "stencil.mask":return r(function(a){b.commandType(a,"number",I,c.commandStr);return a|0},function(a,c,d){b.optional(function(){a.assert(c,"typeof "+d+'==="number"',"invalid stencil.mask")});return c.def(d,"|0")});case "stencil.func":return r(function(g){b.commandType(g,"object",
I,c.commandStr);var v=g.cmp||"keep",q=g.ref||0;g="mask"in g?g.mask:-1;b.commandParameter(v,d,a+".cmp",c.commandStr);b.commandType(q,"number",a+".ref",c.commandStr);b.commandType(g,"number",a+".mask",c.commandStr);return[d[v],q,g]},function(a,c,d){var g=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(c,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(d+"&&typeof ",d,'==="object"');b('!("cmp" in ',d,")||(",d,".cmp in ",g,")")});var v=c.def('"cmp" in ',d,"?",g,"[",
d,".cmp]",":",7680),q=c.def(d,".ref|0"),n=c.def('"mask" in ',d,"?",d,".mask|0:-1");return[v,q,n]});case "stencil.opFront":case "stencil.opBack":return r(function(d){b.commandType(d,"object",I,c.commandStr);var g=d.fail||"keep",v=d.zfail||"keep";d=d.zpass||"keep";b.commandParameter(g,z,a+".fail",c.commandStr);b.commandParameter(v,z,a+".zfail",c.commandStr);b.commandParameter(d,z,a+".zpass",c.commandStr);return["stencil.opBack"===a?1029:1028,z[g],z[v],z[d]]},function(c,d,g){function v(n){b.optional(function(){c.assert(d,
'!("'+n+'" in '+g+")||("+g+"."+n+" in "+q+")","invalid "+a+"."+n+", must be one of "+h(z))});return d.def('"',n,'" in ',g,"?",q,"[",g,".",n,"]:",7680)}var q=c.constants.stencilOps;b.optional(function(){c.assert(d,g+"&&typeof "+g+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,v("fail"),v("zfail"),v("zpass")]});case "polygonOffset.offset":return r(function(a){b.commandType(a,"object",I,c.commandStr);var d=a.factor|0;a=a.units|0;b.commandType(d,"number",I+".factor",c.commandStr);
b.commandType(a,"number",I+".units",c.commandStr);return[d,a]},function(c,d,g){b.optional(function(){c.assert(d,g+"&&typeof "+g+'==="object"',"invalid "+a)});var v=d.def(g,".factor|0"),q=d.def(g,".units|0");return[v,q]});case "cull.face":return r(function(a){var d=0;"front"===a?d=1028:"back"===a&&(d=1029);b.command(!!d,I,c.commandStr);return d},function(a,c,d){b.optional(function(){a.assert(c,d+'==="front"||'+d+'==="back"',"invalid cull.face")});return c.def(d,'==="front"?',1028,":",1029)});case "lineWidth":return r(function(a){b.command("number"===
typeof a&&a>=C.lineWidthDims[0]&&a<=C.lineWidthDims[1],"invalid line width, must be a positive number between "+C.lineWidthDims[0]+" and "+C.lineWidthDims[1],c.commandStr);return a},function(a,c,d){b.optional(function(){a.assert(c,"typeof "+d+'==="number"&&'+d+">="+C.lineWidthDims[0]+"&&"+d+"<="+C.lineWidthDims[1],"invalid line width")});return d});case "frontFace":return r(function(a){b.commandParameter(a,f,I,c.commandStr);return f[a]},function(a,c,d){b.optional(function(){a.assert(c,d+'==="cw"||'+
d+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return c.def(d+'==="cw"?2304:2305')});case "colorMask":return r(function(a){b.command(u(a)&&4===a.length,"color.mask must be length 4 array",c.commandStr);return a.map(function(a){return!!a})},function(a,c,d){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+d+")&&"+d+".length===4","invalid color.mask")});return O(4,function(a){return"!!"+d+"["+a+"]"})});case "sample.coverage":return r(function(a){b.command("object"===typeof a&&a,
I,c.commandStr);var d="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",c.commandStr);return[d,a]},function(a,c,d){b.optional(function(){a.assert(c,d+"&&typeof "+d+'==="object"',"invalid sample.coverage")});var g=c.def('"value" in ',d,"?+",d,".value:1"),v=c.def("!!",d,".invert");return[g,v]})}});return n}function la(a,c){var d=a["static"],v=a.dynamic,q={};h(d).forEach(function(a){var g=d[a],v;if("number"===typeof g||
"boolean"===typeof g)v=m(function(){return g});else if("function"===typeof g){var n=g._reglType;"texture2d"===n||"textureCube"===n?v=m(function(a){return a.link(g)}):"framebuffer"===n||"framebufferCube"===n?(b.command(0<g.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',c.commandStr),v=m(function(a){return a.link(g.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',c.commandStr)}else u(g)?v=m(function(c){return c.global.def("[",O(g.length,function(d){b.command("number"===
typeof g[d]||"boolean"===typeof g[d],"invalid uniform "+a,c.commandStr);return g[d]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',c.commandStr);v.value=g;q[a]=v});h(v).forEach(function(a){var c=v[a];q[a]=g(c,function(a,d){return a.invoke(d,c)})});return q}function qa(a,c){var d=a["static"],v=a.dynamic,q={};h(d).forEach(function(a){var g=d[a],v=p.id(a),n=new ra;if(e(g))n.state=1,n.buffer=B.getBuffer(B.create(g,34962,!1,!0)),n.type=0;else{var r=B.getBuffer(g);if(r)n.state=1,
n.buffer=r,n.type=0;else if(b.command("object"===typeof g&&g,"invalid data for attribute "+a,c.commandStr),"constant"in g){var f=g.constant;n.buffer="null";n.state=2;"number"===typeof f?n.x=f:(b.command(u(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,c.commandStr),V.forEach(function(a,c){c<f.length&&(n[a]=f[c])}))}else{r=e(g.buffer)?B.getBuffer(B.create(g.buffer,34962,!1,!0)):B.getBuffer(g.buffer);b.command(!!r,'missing buffer for attribute "'+a+'"',c.commandStr);var I=g.offset|
0;b.command(0<=I,'invalid offset for attribute "'+a+'"',c.commandStr);var L=g.stride|0;b.command(0<=L&&256>L,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var N=g.size|0;b.command(!("size"in g)||0<N&&4>=N,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var l=!!g.normalized,k=0;"type"in g&&(b.commandParameter(g.type,t,"invalid type for attribute "+a,c.commandStr),k=t[g.type]);var K=g.divisor|0;b.optional(function(){"divisor"in g&&(b.command(0===
K||na,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),b.command(0<=K,'invalid divisor for attribute "'+a+'"',c.commandStr));var d=c.commandStr,v="buffer offset divisor normalized type size stride".split(" ");h(g).forEach(function(c){b.command(0<=v.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+a+'" (valid parameters are '+v+")",d)})});n.buffer=r;n.state=1;n.size=N;n.normalized=l;n.type=k||r.dtype;n.offset=I;n.stride=L;n.divisor=K}}q[a]=m(function(a,
c){var d=a.attribCache;if(v in d)return d[v];var b={isStream:!1};h(n).forEach(function(a){b[a]=n[a]});n.buffer&&(b.buffer=a.link(n.buffer),b.type=b.type||b.buffer+".dtype");return d[v]=b})});h(v).forEach(function(a){var c=v[a];q[a]=g(c,function(d,g){function v(a){g(L[a],"=",n,".",a,"|0;")}var n=d.invoke(g,c),q=d.shared,r=d.constants,f=q.isBufferArgs,I=q.buffer;b.optional(function(){d.assert(g,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+f+"("+n+")||"+I+".getBuffer("+n+")||"+I+".getBuffer("+
n+".buffer)||"+f+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+q.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+a+'"')});var L={isStream:g.def(!1)},N=new ra;N.state=1;h(N).forEach(function(a){L[a]=g.def(""+N[a])});var p=L.buffer,l=L.type;g("if(",f,"(",n,")){",L.isStream,"=true;",p,"=",I,".createStream(",34962,",",n,");",l,"=",p,".dtype;","}else{",p,"=",I,".getBuffer(",n,");","if(",p,"){",l,"=",p,".dtype;",'}else if("constant" in ',n,"){",L.state,"=",
2,";","if(typeof "+n+'.constant === "number"){',L[V[0]],"=",n,".constant;",V.slice(1).map(function(a){return L[a]}).join("="),"=0;","}else{",V.map(function(a,c){return L[a]+"="+n+".constant.length>"+c+"?"+n+".constant["+c+"]:0;"}).join(""),"}}else{","if(",f,"(",n,".buffer)){",p,"=",I,".createStream(",34962,",",n,".buffer);","}else{",p,"=",I,".getBuffer(",n,".buffer);","}",l,'="type" in ',n,"?",r.glTypes,"[",n,".type]:",p,".dtype;",L.normalized,"=!!",n,".normalized;");v("size");v("offset");v("stride");
v("divisor");g("}}");g.exit("if(",L.isStream,"){",I,".destroyStream(",p,");","}");return L})});return q}function Da(a){var c=a["static"],d=a.dynamic,b={};h(c).forEach(function(a){var d=c[a];b[a]=m(function(a,c){return"number"===typeof d||"boolean"===typeof d?""+d:a.link(d)})});h(d).forEach(function(a){var c=d[a];b[a]=g(c,function(a,d){return a.invoke(d,c)})});return b}function za(a,c,d,g,v){function q(a){var c=N[a];c&&(l[a]=c)}var r=a["static"],f=a.dynamic;b.optional(function(){function a(d){h(d).forEach(function(a){b.command(0<=
c.indexOf(a),'unknown parameter "'+a+'"',v.commandStr)})}var c="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);a(r);a(f)});var I=n(a,c),L=xa(a,v),N=oa(a,L,v),p=ea(a,v),l=T(a,v),k=H(a,v,I);q("viewport");q(K("scissor.box"));var z=0<h(l).length,L={framebuffer:L,draw:p,shader:k,state:l,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};L.profile=Q(a,v);L.uniforms=la(d,v);L.drawVAO=L.scopeVAO=p.vao;if(!L.drawVAO&&k.program&&!I&&x.angle_instanced_arrays&&
p["static"].elements){var ra=!0;a=k.program.attributes.map(function(a){a=c["static"][a];ra=ra&&!!a;return a});if(ra&&0<a.length){var Ia=A.getVAO(A.createVAO({attributes:a,elements:p["static"].elements}));L.drawVAO=new D(null,null,null,function(a,c){return a.link(Ia)});L.useVAO=!0}}I?L.useVAO=!0:L.attributes=qa(c,v);L.context=Da(g,v);return L}function ha(a,c,d){var b=a.shared.context,g=a.scope();h(d).forEach(function(v){c.save(b,"."+v);var n=d[v].append(a,c);Array.isArray(n)?g(b,".",v,"=[",n.join(),
"];"):g(b,".",v,"=",n,";")});c(g)}function Ea(a,c,d,b){var g=a.shared,v=g.gl,n=g.framebuffer,q;ya&&(q=c.def(g.extensions,".webgl_draw_buffers"));var r=a.constants,g=r.drawBuffer,r=r.backBuffer;a=d?d.append(a,c):c.def(n,".next");b||c("if(",a,"!==",n,".cur){");c("if(",a,"){",v,".bindFramebuffer(",36160,",",a,".framebuffer);");ya&&c(q,".drawBuffersWEBGL(",g,"[",a,".colorAttachments.length]);");c("}else{",v,".bindFramebuffer(",36160,",null);");ya&&c(q,".drawBuffersWEBGL(",r,");");c("}",n,".cur=",a,";");
b||c("}")}function ja(a,c,d){var b=a.shared,g=b.gl,v=a.current,n=a.next,q=b.current,r=b.next,f=a.cond(q,".dirty");ua.forEach(function(c){c=K(c);if(!(c in d.state)){var b,I;if(c in n){b=n[c];I=v[c];var h=O(ka[c].length,function(a){return f.def(b,"[",a,"]")});f(a.cond(h.map(function(a,c){return a+"!=="+I+"["+c+"]"}).join("||")).then(g,".",Fa[c],"(",h,");",h.map(function(a,c){return I+"["+c+"]="+a}).join(";"),";"))}else b=f.def(r,".",c),h=a.cond(b,"!==",q,".",c),f(h),c in Ka?h(a.cond(b).then(g,".enable(",
Ka[c],");")["else"](g,".disable(",Ka[c],");"),q,".",c,"=",b,";"):h(g,".",Fa[c],"(",b,");",q,".",c,"=",b,";")}});0===h(d.state).length&&f(q,".dirty=false;");c(f)}function pa(a,c,d,b){var g=a.shared,v=a.current,n=g.current,q=g.gl;R(h(d)).forEach(function(g){var r=d[g];if(!b||b(r)){var f=r.append(a,c);if(Ka[g]){var I=Ka[g];M(r)?f?c(q,".enable(",I,");"):c(q,".disable(",I,");"):c(a.cond(f).then(q,".enable(",I,");")["else"](q,".disable(",I,");"));c(n,".",g,"=",f,";")}else if(u(f)){var h=v[g];c(q,".",Fa[g],
"(",f,");",f.map(function(a,c){return h+"["+c+"]="+a}).join(";"),";")}else c(q,".",Fa[g],"(",f,");",n,".",g,"=",f,";")}})}function Aa(a,c){na&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function Ia(a,c,d,b,g){function v(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function n(a){N=c.def();a(N,"=",v(),";");"string"===typeof g?a(I,".count+=",g,";"):a(I,".count++;");ga&&(b?(p=c.def(),a(p,"=",L,".getNumPendingQueries();")):a(L,".beginQuery(",I,");"))}
function q(a){a(I,".cpuTime+=",v(),"-",N,";");ga&&(b?a(L,".pushScopeStats(",p,",",L,".getNumPendingQueries(),",I,");"):a(L,".endQuery();"))}function r(a){var d=c.def(h,".profile");c(h,".profile=",a,";");c.exit(h,".profile=",d,";")}var f=a.shared,I=a.stats,h=f.current,L=f.timer;d=d.profile;var N,p;if(d){if(M(d)){d.enable?(n(c),q(c.exit),r("true")):r("false");return}d=d.append(a,c);r(d)}else d=c.def(h,".profile");f=a.block();n(f);c("if(",d,"){",f,"}");a=a.block();q(a);c.exit("if(",d,"){",a,"}")}function L(a,
c,d,g,v){function n(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function q(d,b,g){function v(){c("if(!",h,".buffer){",f,".enableVertexAttribArray(",I,");}");var d=g.type,n;n=g.size?c.def(g.size,"||",b):b;c("if(",h,".type!==",d,"||",h,".size!==",n,"||",p.map(function(a){return h+"."+a+"!=="+g[a]}).join("||"),"){",f,".bindBuffer(",34962,",",L,".buffer);",f,".vertexAttribPointer(",[I,n,d,
g.normalized,g.stride,g.offset],");",h,".type=",d,";",h,".size=",n,";",p.map(function(a){return h+"."+a+"="+g[a]+";"}).join(""),"}");na&&(d=g.divisor,c("if(",h,".divisor!==",d,"){",a.instancing,".vertexAttribDivisorANGLE(",[I,d],");",h,".divisor=",d,";}"))}function n(){c("if(",h,".buffer){",f,".disableVertexAttribArray(",I,");",h,".buffer=null;","}if(",V.map(function(a,c){return h+"."+a+"!=="+N[c]}).join("||"),"){",f,".vertexAttrib4f(",I,",",N,");",V.map(function(a,c){return h+"."+a+"="+N[c]+";"}).join(""),
"}")}var f=r.gl,I=c.def(d,".location"),h=c.def(r.attributes,"[",I,"]");d=g.state;var L=g.buffer,N=[g.x,g.y,g.z,g.w],p=["buffer","normalized","offset","stride"];1===d?v():2===d?n():(c("if(",d,"===",1,"){"),v(),c("}else{"),n(),c("}"))}var r=a.shared;g.forEach(function(g){var r=g.name,f=d.attributes[r],I;if(f){if(!v(f))return;I=f.append(a,c)}else{if(!v(ca))return;var L=a.scopeAttrib(r);b.optional(function(){a.assert(c,L+".state","missing attribute "+r)});I={};h(new ra).forEach(function(a){I[a]=c.def(L,
".",a)})}q(a.link(g),n(g.info.type),I)})}function ac(a,c,d,g,v,n){for(var q=a.shared,r=q.gl,f,I=0;I<g.length;++I){var h=g[I],L=h.name,N=h.info.type,l=d.uniforms[L],h=a.link(h)+".location",k;if(l){if(!v(l))continue;if(M(l)){var K=l.value;b.command(null!==K&&"undefined"!==typeof K,'missing uniform "'+L+'"',a.commandStr);if(35678===N||35680===N)b.command("function"===typeof K&&(35678===N&&("texture2d"===K._reglType||"framebuffer"===K._reglType)||35680===N&&("textureCube"===K._reglType||"framebufferCube"===
K._reglType)),"invalid texture for uniform "+L,a.commandStr),l=a.link(K._texture||K.color[0]._texture),c(r,".uniform1i(",h,",",l+".bind());"),c.exit(l,".unbind();");else if(35674===N||35675===N||35676===N){b.optional(function(){b.command(u(K),"invalid matrix for uniform "+L,a.commandStr);b.command(35674===N&&4===K.length||35675===N&&9===K.length||35676===N&&16===K.length,"invalid length for matrix uniform "+L,a.commandStr)});var l=a.global.def("new Float32Array(["+Array.prototype.slice.call(K)+"])"),
ra=2;35675===N?ra=3:35676===N&&(ra=4);c(r,".uniformMatrix",ra,"fv(",h,",false,",l,");")}else{switch(N){case 5126:b.commandType(K,"number","uniform "+L,a.commandStr);f="1f";break;case 35664:b.command(u(K)&&2===K.length,"uniform "+L,a.commandStr);f="2f";break;case 35665:b.command(u(K)&&3===K.length,"uniform "+L,a.commandStr);f="3f";break;case 35666:b.command(u(K)&&4===K.length,"uniform "+L,a.commandStr);f="4f";break;case 35670:b.commandType(K,"boolean","uniform "+L,a.commandStr);f="1i";break;case 5124:b.commandType(K,
"number","uniform "+L,a.commandStr);f="1i";break;case 35671:b.command(u(K)&&2===K.length,"uniform "+L,a.commandStr);f="2i";break;case 35667:b.command(u(K)&&2===K.length,"uniform "+L,a.commandStr);f="2i";break;case 35672:b.command(u(K)&&3===K.length,"uniform "+L,a.commandStr);f="3i";break;case 35668:b.command(u(K)&&3===K.length,"uniform "+L,a.commandStr);f="3i";break;case 35673:b.command(u(K)&&4===K.length,"uniform "+L,a.commandStr);f="4i";break;case 35669:b.command(u(K)&&4===K.length,"uniform "+L,
a.commandStr),f="4i"}c(r,".uniform",f,"(",h,",",u(K)?Array.prototype.slice.call(K):K,");")}continue}else k=l.append(a,c)}else{if(!v(ca))continue;k=c.def(q.uniforms,"[",p.id(L),"]")}35678===N?(b(!Array.isArray(k),"must specify a scalar prop for textures"),c("if(",k,"&&",k,'._reglType==="framebuffer"){',k,"=",k,".color[0];","}")):35680===N&&(b(!Array.isArray(k),"must specify a scalar prop for cube maps"),c("if(",k,"&&",k,'._reglType==="framebufferCube"){',k,"=",k,".color[0];","}"));b.optional(function(){function d(b,
g){a.assert(c,b,'bad data or missing for uniform "'+L+'".  '+g)}function g(a){b(!Array.isArray(k),"must not specify an array type for uniform");d("typeof "+k+'==="'+a+'"',"invalid type, expected "+a)}function v(c,g){Array.isArray(k)?b(k.length===c,"must have length "+c):d(q.isArrayLike+"("+k+")&&"+k+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function n(c){b(!Array.isArray(k),"must not specify a value type");d("typeof "+k+'==="function"&&'+k+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(N){case 5124:g("number");break;case 35667:v(2,"number");break;case 35668:v(3,"number");break;case 35669:v(4,"number");break;case 5126:g("number");break;case 35664:v(2,"number");break;case 35665:v(3,"number");break;case 35666:v(4,"number");break;case 35670:g("boolean");break;case 35671:v(2,"boolean");break;case 35672:v(3,"boolean");break;case 35673:v(4,"boolean");break;case 35674:v(4,"number");break;case 35675:v(9,"number");break;case 35676:v(16,
"number");break;case 35678:n(3553);break;case 35680:n(34067)}});l=1;switch(N){case 35678:case 35680:l=c.def(k,"._texture");c(r,".uniform1i(",h,",",l,".bind());");c.exit(l,".unbind();");continue;case 5124:case 35670:f="1i";break;case 35667:case 35671:f="2i";l=2;break;case 35668:case 35672:f="3i";l=3;break;case 35669:case 35673:f="4i";l=4;break;case 5126:f="1f";break;case 35664:f="2f";l=2;break;case 35665:f="3f";l=3;break;case 35666:f="4f";l=4;break;case 35674:f="Matrix2fv";break;case 35675:f="Matrix3fv";
break;case 35676:f="Matrix4fv"}if("M"===f.charAt(0)){c(r,".uniform",f,"(",h,",");var h=Math.pow(N-35674+2,2),z=a.global.def("new Float32Array(",h,")");Array.isArray(k)?c("false,(",O(h,function(a){return z+"["+a+"]="+k[a]}),",",z,")"):c("false,(Array.isArray(",k,")||",k," instanceof Float32Array)?",k,":(",O(h,function(a){return z+"["+a+"]="+k+"["+a+"]"}),",",z,")");c(");")}else{if(1<l){for(var ra=[],Ia=[],Ga=0;Ga<l;++Ga)Array.isArray(k)?Ia.push(k[Ga]):Ia.push(c.def(k+"["+Ga+"]")),n&&ra.push(c.def());
n&&c("if(!",a.batchId,"||",ra.map(function(a,c){return a+"!=="+Ia[c]}).join("||"),"){",ra.map(function(a,c){return a+"="+Ia[c]+";"}).join(""));c(r,".uniform",f,"(",h,",",Ia.join(","),");")}else b(!Array.isArray(k),"uniform value must not be an array"),n&&(l=c.def(),c("if(!",a.batchId,"||",l,"!==",k,"){",l,"=",k,";")),c(r,".uniform",f,"(",h,",",k,");");n&&c("}")}}}function Ta(a,c,d,g){function v(b){var n=h[b];return n?n.contextDep&&g.contextDynamic||n.propDep?n.append(a,d):n.append(a,c):c.def(I,".",
b)}function n(){function a(){d(K,".drawElementsInstancedANGLE(",[N,k,ra,p+"<<(("+ra+"-5121)>>1)",l],");")}function c(){d(K,".drawArraysInstancedANGLE(",[N,p,k,l],");")}L&&"null"!==L?z?a():(d("if(",L,"){"),a(),d("}else{"),c(),d("}")):c()}function q(){function a(){d(r+".drawElements("+[N,k,ra,p+"<<(("+ra+"-5121)>>1)"]+");")}function c(){d(r+".drawArrays("+[N,p,k]+");")}L&&"null"!==L?z?a():(d("if(",L,"){"),a(),d("}else{"),c(),d("}")):c()}var f=a.shared,r=f.gl,I=f.draw,h=g.draw,L=function(){var b=h.elements,
v=c;if(b){if(b.contextDep&&g.contextDynamic||b.propDep)v=d;b=b.append(a,v);h.elementsActive&&v("if("+b+")"+r+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=v.def(),v(b,"=",I,".","elements",";","if(",b,"){",r,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",f.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+f.vao,".currentVAO.elements);",Ca?"":"if("+b+")"+r+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),N=v("primitive"),p=v("offset"),k=function(){var v=h.count,n,
q=c;if(v){if(v.contextDep&&g.contextDynamic||v.propDep)q=d;n=v.append(a,q);b.optional(function(){v.MISSING&&a.assert(c,"false","missing vertex count");v.DYNAMIC&&a.assert(q,n+">=0","missing vertex count")})}else n=q.def(I,".","count"),b.optional(function(){a.assert(q,n+">=0","missing vertex count")});return n}();if("number"===typeof k){if(0===k)return}else d("if(",k,"){"),d.exit("}");var l,K;na&&(l=v("instances"),K=a.instancing);var ra=L+".type",z=h.elements&&M(h.elements)&&!h.vaoActive;na&&("number"!==
typeof l||0<=l)?"string"===typeof l?(d("if(",l,">0){"),n(),d("}else if(",l,"<0){"),q(),d("}")):n():q()}function v(a,c,d,g,v){var n=P();v=n.proc("body",v);b.optional(function(){n.commandStr=c.commandStr;n.command=n.link(c.commandStr)});na&&(n.instancing=v.def(n.shared.extensions,".angle_instanced_arrays"));a(n,v,d,g);return n.compile().body}function r(a,c,d,b){Aa(a,c);d.useVAO?d.drawVAO?c(a.shared.vao,".setVAO(",d.drawVAO.append(a,c),");"):c(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(c(a.shared.vao,
".setVAO(null);"),L(a,c,d,b.attributes,function(){return!0}));ac(a,c,d,b.uniforms,function(){return!0},!1);Ta(a,c,c,d)}function N(a,c){var d=a.proc("draw",1);Aa(a,d);ha(a,d,c.context);Ea(a,d,c.framebuffer);ja(a,d,c);pa(a,d,c.state);Ia(a,d,c,!1,!0);var b=c.shader.progVar.append(a,d);d(a.shared.gl,".useProgram(",b,".program);");if(c.shader.program)r(a,d,c,c.shader.program);else{d(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),n=d.def(b,".id"),q=d.def(g,"[",n,"]");d(a.cond(q).then(q,".call(this,a0);")["else"](q,
"=",g,"[",n,"]=",a.link(function(d){return v(r,a,c,d,1)}),"(",b,");",q,".call(this,a0);"))}0<h(c.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function ta(a,c,d,b){function g(){return!0}a.batchId="a1";Aa(a,c);L(a,c,d,b.attributes,g);ac(a,c,d,b.uniforms,g,!1);Ta(a,c,c,d)}function va(a,c,d,b){function g(a){return a.contextDep&&q||a.propDep}function n(a){return!g(a)}Aa(a,c);var q=d.contextDep,f=c.def(),r=c.def();a.shared.props=r;a.batchId=f;var I=a.scope(),
h=a.scope();c(I.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",r,"=","a0","[",f,"];",h,"}",I.exit);d.needsContext&&ha(a,h,d.context);d.needsFramebuffer&&Ea(a,h,d.framebuffer);pa(a,h,d.state,g);d.profile&&g(d.profile)&&Ia(a,h,d,!1,!0);b?(d.useVAO?d.drawVAO?g(d.drawVAO)?h(a.shared.vao,".setVAO(",d.drawVAO.append(a,h),");"):I(a.shared.vao,".setVAO(",d.drawVAO.append(a,I),");"):I(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(I(a.shared.vao,".setVAO(null);"),L(a,I,d,b.attributes,n),L(a,h,d,b.attributes,
g)),ac(a,I,d,b.uniforms,n,!1),ac(a,h,d,b.uniforms,g,!0),Ta(a,I,h,d)):(c=a.global.def("{}"),b=d.shader.progVar.append(a,h),r=h.def(b,".id"),I=h.def(c,"[",r,"]"),h(a.shared.gl,".useProgram(",b,".program);","if(!",I,"){",I,"=",c,"[",r,"]=",a.link(function(c){return v(ta,a,d,c,2)}),"(",b,");}",I,".call(this,a0[",f,"],",f,");"))}function dd(a,c){function d(a){return a.contextDep&&g||a.propDep}var b=a.proc("batch",2);a.batchId="0";Aa(a,b);var g=!1,n=!0;h(c.context).forEach(function(a){g=g||c.context[a].propDep});
g||(ha(a,b,c.context),n=!1);var q=c.framebuffer,f=!1;q?(q.propDep?g=f=!0:q.contextDep&&g&&(f=!0),f||Ea(a,b,q)):Ea(a,b,null);c.state.viewport&&c.state.viewport.propDep&&(g=!0);ja(a,b,c);pa(a,b,c.state,function(a){return!d(a)});c.profile&&d(c.profile)||Ia(a,b,c,!1,"a1");c.contextDep=g;c.needsContext=n;c.needsFramebuffer=f;n=c.shader.progVar;if(n.contextDep&&g||n.propDep)va(a,b,c,null);else if(n=n.append(a,b),b(a.shared.gl,".useProgram(",n,".program);"),c.shader.program)va(a,b,c,c.shader.program);else{b(a.shared.vao,
".setVAO(null);");var q=a.global.def("{}"),f=b.def(n,".id"),r=b.def(q,"[",f,"]");b(a.cond(r).then(r,".call(this,a0,a1);")["else"](r,"=",q,"[",f,"]=",a.link(function(d){return v(va,a,c,d,2)}),"(",n,");",r,".call(this,a0,a1);"))}0<h(c.state).length&&b(a.shared.current,".dirty=true;");a.shared.vao&&b(a.shared.vao,".setVAO(null);")}function Gb(a,c){function d(n){var v=c.shader[n];v&&b.set(g.shader,"."+n,v.append(a,b))}var b=a.proc("scope",3);a.batchId="a2";var g=a.shared,n=g.current;ha(a,b,c.context);
c.framebuffer&&c.framebuffer.append(a,b);R(h(c.state)).forEach(function(d){var n=c.state[d].append(a,b);u(n)?n.forEach(function(c,g){b.set(a.next[d],"["+g+"]",c)}):b.set(g.next,"."+d,n)});Ia(a,b,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var n=c.draw[d];n&&b.set(g.draw,"."+d,""+n.append(a,b))});h(c.uniforms).forEach(function(d){var n=c.uniforms[d].append(a,b);Array.isArray(n)&&(n="["+n.join()+"]");b.set(g.uniforms,"["+p.id(d)+"]",n)});h(c.attributes).forEach(function(d){var g=
c.attributes[d].append(a,b),n=a.scopeAttrib(d);h(new ra).forEach(function(a){b.set(n,"."+a,g[a])})});c.scopeVAO&&b.set(g.vao,".targetVAO",c.scopeVAO.append(a,b));d("vert");d("frag");0<h(c.state).length&&(b(n,".dirty=true;"),b.exit(n,".dirty=true;"));b("a1(",a.shared.context,",a0,",a.batchId,");")}function ba(a){if("object"===typeof a&&!u(a)){for(var c=h(a),d=0;d<c.length;++d)if(F.isDynamic(a[c[d]]))return!0;return!1}}function I(a,c,d){function b(a,c){q.forEach(function(d){var b=n[d];F.isDynamic(b)&&
(b=a.invoke(c,b),c(L,".",d,"=",b,";"))})}var n=c["static"][d];if(n&&ba(n)){var v=a.global,q=h(n),f=!1,r=!1,I=!1,L=a.global.def("{}");q.forEach(function(c){var d=n[c];if(F.isDynamic(d))"function"===typeof d&&(d=n[c]=F.unbox(d)),c=g(d,null),f=f||c.thisDep,I=I||c.propDep,r=r||c.contextDep;else{v(L,".",c,"=");switch(typeof d){case "number":v(d);break;case "string":v('"',d,'"');break;case "object":Array.isArray(d)&&v("[",d.join(),"]");break;default:v(a.link(d))}v(";")}});c.dynamic[d]=new F.DynamicVariable(4,
{thisDep:f,contextDep:r,propDep:I,ref:L,append:b});delete c["static"][d]}}var ra=A.Record,Ga={add:32774,subtract:32778,"reverse subtract":32779};x.ext_blend_minmax&&(Ga.min=32775,Ga.max=32776);var na=x.angle_instanced_arrays,ya=x.webgl_draw_buffers,Ca=x.oes_vertex_array_object,ka={dirty:!0,profile:S.profile},aa={},ua=[],Ka={},Fa={};y("dither",3024);y("blend.enable",3042);q("blend.color","blendColor",[0,0,0,0]);q("blend.equation","blendEquationSeparate",[32774,32774]);q("blend.func","blendFuncSeparate",
[1,0,1,0]);y("depth.enable",2929,!0);q("depth.func","depthFunc",513);q("depth.range","depthRange",[0,1]);q("depth.mask","depthMask",!0);q("colorMask","colorMask",[!0,!0,!0,!0]);y("cull.enable",2884);q("cull.face","cullFace",1029);q("frontFace","frontFace",2305);q("lineWidth","lineWidth",1);y("polygonOffset.enable",32823);q("polygonOffset.offset","polygonOffset",[0,0]);y("sample.alpha",32926);y("sample.enable",32928);q("sample.coverage","sampleCoverage",[1,!1]);y("stencil.enable",2960);q("stencil.mask",
"stencilMask",-1);q("stencil.func","stencilFunc",[519,0,-1]);q("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);q("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);y("scissor.enable",3089);q("scissor.box","scissor",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);q("viewport","viewport",[0,0,G.drawingBufferWidth,G.drawingBufferHeight]);var gb={gl:G,context:Z,strings:p,next:aa,current:ka,draw:hd,elements:c,buffer:B,shader:ma,attributes:A.state,vao:A,uniforms:X,framebuffer:a,
extensions:x,timer:ga,isBufferArgs:e},fa={primTypes:Y,compareFuncs:d,blendFuncs:w,blendEquations:Ga,stencilOps:z,glTypes:t,orientationType:f};b.optional(function(){gb.isArrayLike=u});ya&&(fa.backBuffer=[1029],fa.drawBuffer=O(C.maxDrawbuffers,function(a){return 0===a?[0]:O(a,function(a){return 36064+a})}));var zd=0;return{next:aa,current:ka,procs:function(){var a=P(),c=a.proc("poll"),d=a.proc("refresh"),b=a.block();c(b);d(b);var g=a.shared,n=g.gl,v=g.next,q=g.current;b(q,".dirty=false;");Ea(a,c);Ea(a,
d,null,!0);var f;na&&(f=a.link(na));x.oes_vertex_array_object&&d(a.link(x.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var r=0;r<C.maxAttributes;++r){var I=d.def(g.attributes,"[",r,"]"),L=a.cond(I,".buffer");L.then(n,".enableVertexAttribArray(",r,");",n,".bindBuffer(",34962,",",I,".buffer.buffer);",n,".vertexAttribPointer(",r,",",I,".size,",I,".type,",I,".normalized,",I,".stride,",I,".offset);")["else"](n,".disableVertexAttribArray(",r,");",n,".vertexAttrib4f(",r,",",I,".x,",I,".y,",
I,".z,",I,".w);",I,".buffer=null;");d(L);na&&d(f,".vertexAttribDivisorANGLE(",r,",",I,".divisor);")}d(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");h(Ka).forEach(function(g){var f=Ka[g],r=b.def(v,".",g),I=a.block();I("if(",r,"){",n,".enable(",f,")}else{",n,".disable(",f,")}",q,".",g,"=",r,";");d(I);c("if(",r,"!==",q,".",g,"){",I,"}")});h(Fa).forEach(function(g){var f=Fa[g],r=ka[g],I,h,L=a.block();L(n,".",f,"(");u(r)?(f=r.length,I=a.global.def(v,".",g),h=a.global.def(q,
".",g),L(O(f,function(a){return I+"["+a+"]"}),");",O(f,function(a){return h+"["+a+"]="+I+"["+a+"];"}).join("")),c("if(",O(f,function(a){return I+"["+a+"]!=="+h+"["+a+"]"}).join("||"),"){",L,"}")):(I=b.def(v,".",g),h=b.def(q,".",g),L(I,");",q,".",g,"=",I,";"),c("if(",I,"!==",h,"){",L,"}"));d(L)});return a.compile()}(),compile:function(a,c,d,b,g){var n=P();n.stats=n.link(g);h(c["static"]).forEach(function(a){I(n,c,a)});k.forEach(function(c){I(n,a,c)});var v=za(a,c,d,b,n);N(n,v);Gb(n,v);dd(n,v);return E(n.compile(),
{destroy:function(){v.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(U,ia,Ba){function e(h,b){this.id=g++;this.type=h;this.data=b}function R(g){if(0===g.length)return[];var b=g.charAt(0),m=g.charAt(g.length-1);if(1<g.length&&b===m&&('"'===b||"'"===
b))return['"'+g.substr(1,g.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(g))return R(g.substr(0,b.index)).concat(R(b[1])).concat(R(g.substr(b.index+b[0].length)));b=g.split(".");if(1===b.length)return['"'+g.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];g=[];for(m=0;m<b.length;++m)g=g.concat(R(b[m]));return g}function D(g){return"["+R(g).join("][")+"]"}function M(g,b){if("function"===typeof g)return new e(0,g);if("number"===typeof g||
"boolean"===typeof g)return new e(5,g);if(Array.isArray(g))return new e(6,g.map(function(g,h){return M(g,b+"["+h+"]")}));if(g instanceof e)return g;m(!1,"invalid option type in uniform "+b)}var m=U("./util/check"),g=0;ia.exports={DynamicVariable:e,define:function(g,b){return new e(g,D(b+""))},isDynamic:function(g){return"function"===typeof g&&!g._reglType||g instanceof e},unbox:M,accessor:D}},{"./util/check":21}],10:[function(U,ia,Ba){var e=U("./util/check"),R=U("./util/is-typed-array"),D=U("./util/is-ndarray"),
M=U("./util/values"),m=U("./constants/primitives.json"),g=U("./constants/usage.json");ia.exports=function(h,b,E,J){function O(b){this.id=F++;u[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function X(g,k,m,t,d,z,W){g.buffer.bind();var f;k?((f=W)||R(k)&&(!D(k)||R(k.data))||(f=b.oes_element_index_uint?5125:5123),E._initBuffer(g.buffer,k,m,f,3)):(h.bufferData(34963,z,m),g.buffer.dtype=f||5121,g.buffer.usage=m,g.buffer.dimension=3,g.buffer.byteLength=z);f=W;if(!W){switch(g.buffer.dtype){case 5121:case 5120:f=
5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125;break;default:e.raise("unsupported type for element array")}g.buffer.dtype=f}g.type=f;e(5125!==f||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");k=d;0>k&&(k=g.buffer.byteLength,5123===f?k>>=1:5125===f&&(k>>=2));g.vertCount=k;k=t;0>t&&(k=4,t=g.buffer.dimension,1===t&&(k=0),2===t&&(k=1),3===t&&(k=4));g.primType=k}function x(g){J.elementsCount--;e(null!==g.buffer,"must not double destroy elements");
delete u[g.id];g.buffer.destroy();g.buffer=null}var u={},F=0,Y={uint8:5121,uint16:5123};b.oes_element_index_uint&&(Y.uint32=5125);O.prototype.bind=function(){this.buffer.bind()};var t=[];return{create:function(b,h){function t(b){if(b)if("number"===typeof b)u(b),d.primType=4,d.vertCount=b|0,d.type=5121;else{var h=null,f=35044,k=-1,G=-1,p=0,x=0;if(Array.isArray(b)||R(b)||D(b))h=b;else if(e.type(b,"object","invalid arguments for elements"),"data"in b&&(h=b.data,e(Array.isArray(h)||R(h)||D(h),"invalid data for element buffer")),
"usage"in b&&(e.parameter(b.usage,g,"invalid element buffer usage"),f=g[b.usage]),"primitive"in b&&(e.parameter(b.primitive,m,"invalid element buffer primitive"),k=m[b.primitive]),"count"in b&&(e("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),G=b.count|0),"type"in b&&(e.parameter(b.type,Y,"invalid buffer type"),x=Y[b.type]),"length"in b)p=b.length|0;else if(p=G,5123===x||5122===x)p*=2;else if(5125===x||5124===x)p*=4;X(d,h,f,k,G,p,x)}else u(),d.primType=4,d.vertCount=0,
d.type=5121;return t}var u=E.create(null,34963,!0),d=new O(u._buffer);J.elementsCount++;t(b);t._reglType="elements";t._elements=d;t.subdata=function(d,b){u.subdata(d,b);return t};t.destroy=function(){x(d)};return t},createStream:function(b){var g=t.pop();g||(g=new O(E.create(null,34963,!0,!1)._buffer));X(g,b,35040,-1,-1,0,0);return g},destroyStream:function(b){t.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof O?b._elements:null},clear:function(){M(u).forEach(x)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(U,ia,Ba){var e=U("./util/sorted-object-keys"),R=U("./util/check");ia.exports=function(D,M){function m(b){R.type(b,"string","extension name must be string");b=b.toLowerCase();var h;try{h=g[b]=D.getExtension(b)}catch(m){}return!!h}for(var g={},h=0;h<M.extensions.length;++h){var b=M.extensions[h];if(!m(b))return M.onDestroy(),M.onDone('"'+b+
'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}M.optionalExtensions.forEach(m);return{extensions:g,restore:function(){e(g).forEach(function(b){if(g[b]&&!m(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(U,ia,Ba){var e=U("./util/check"),R=U("./util/values"),D=U("./util/extend"),M=[6407,6408],m=[];m[6408]=4;m[6407]=3;var g=[];g[5121]=1;g[5126]=4;g[36193]=
2;var h=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ia.exports=function(E,J,O,X,x,u){function F(a,c,d){this.target=a;this.texture=c;this.renderbuffer=d;var b=a=0;c?(a=c.width,b=c.height):d&&(a=d.width,b=d.height);this.width=a;this.height=b}function Y(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function t(a,
c,d){if(a){if(a.texture){a=a.texture._texture;var b=Math.max(1,a.height);e(Math.max(1,a.width)===c&&b===d,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,e(a.width===c&&a.height===d,"inconsistent width/height for renderbuffer");a.refCount+=1}}function V(a,c){c&&(c.texture?E.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):E.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function k(a){var c=3553,d=null,b=null,
g=a;"object"===typeof a&&(g=a.data,"target"in a&&(c=a.target|0));e.type(g,"function","invalid attachment data");a=g._reglType;"texture2d"===a?(d=g,e(3553===c)):"textureCube"===a?(d=g,e(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===a?(b=g,c=36161):e.raise("invalid regl object for attachment");return new F(c,d,b)}function w(a,c,d,b,g){if(d)return a=X.create2D({width:a,height:c,format:b,type:g}),a._texture.refCount=0,new F(3553,a,null);a=x.create({width:a,height:c,format:b});a._renderbuffer.refCount=
0;return new F(36161,null,a)}function sa(a){return a&&(a.texture||a.renderbuffer)}function d(a,c,d){a&&(a.texture?a.texture.resize(c,d):a.renderbuffer&&a.renderbuffer.resize(c,d),a.width=c,a.height=d)}function z(){this.id=c++;l[this.id]=this;this.framebuffer=E.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function W(a){a.colorAttachments.forEach(Y);Y(a.depthAttachment);Y(a.stencilAttachment);Y(a.depthStencilAttachment)}
function f(a){var c=a.framebuffer;e(c,"must not double destroy framebuffer");E.deleteFramebuffer(c);a.framebuffer=null;u.framebufferCount--;delete l[a.id]}function ca(a){var c;E.bindFramebuffer(36160,a.framebuffer);var d=a.colorAttachments;for(c=0;c<d.length;++c)V(36064+c,d[c]);for(c=d.length;c<O.maxColorAttachments;++c)E.framebufferTexture2D(36160,36064+c,3553,null,0);E.framebufferTexture2D(36160,33306,3553,null,0);E.framebufferTexture2D(36160,36096,3553,null,0);E.framebufferTexture2D(36160,36128,
3553,null,0);V(36096,a.depthAttachment);V(36128,a.stencilAttachment);V(33306,a.depthStencilAttachment);a=E.checkFramebufferStatus(36160);E.isContextLost()||36053===a||e.raise("framebuffer configuration not supported, status = "+b[a]);E.bindFramebuffer(36160,p.next?p.next.framebuffer:null);p.cur=p.next;E.getError()}function G(a,c){function b(a,c){var d;e(p.next!==l,"can not update framebuffer which is currently in use");var f=0,K=0,y=!0,q=!0;d=null;var G=!0,z="rgba",u="uint8",x=1,n=null,H=null,ea=
null,T=!1;if("number"===typeof a)f=a|0,K=c|0||f;else if(a){e.type(a,"object","invalid arguments for framebuffer");"shape"in a?(K=a.shape,e(Array.isArray(K)&&2<=K.length,"invalid shape for framebuffer"),f=K[0],K=K[1]):("radius"in a&&(f=K=a.radius),"width"in a&&(f=a.width),"height"in a&&(K=a.height));if("color"in a||"colors"in a)d=a.color||a.colors,Array.isArray(d)&&e(1===d.length||J.webgl_draw_buffers,"multiple render targets not supported");if(!d){"colorCount"in a&&(x=a.colorCount|0,e(0<x,"invalid color buffer count"));
"colorTexture"in a&&(G=!!a.colorTexture,z="rgba4");if("colorType"in a){u=a.colorType;if(G)e(J.oes_texture_float||!("float"===u||"float32"===u),"you must enable OES_texture_float in order to use floating point framebuffer objects"),e(J.oes_texture_half_float||!("half float"===u||"float16"===u),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===u||"float16"===u)e(J.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
z="rgba16f";else if("float"===u||"float32"===u)e(J.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),z="rgba32f";e.oneOf(u,B,"invalid color type")}"colorFormat"in a&&(z=a.colorFormat,0<=da.indexOf(z)?G=!0:0<=C.indexOf(z)?G=!1:e.optional(function(){if(G)e.oneOf(a.colorFormat,da,"invalid color format for texture");else e.oneOf(a.colorFormat,C,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in
a)T=!(!a.depthTexture&&!a.depthStencilTexture),e(!T||J.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?y=a.depth:(n=a.depth,q=!1));"stencil"in a&&("boolean"===typeof a.stencil?q=a.stencil:(H=a.stencil,y=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?y=q=a.depthStencil:(ea=a.depthStencil,q=y=!1))}else f=K=1;var D=null,F=null,X=null,R=null;if(Array.isArray(d))D=d.map(k);else if(d)D=[k(d)];else for(D=Array(x),d=0;d<x;++d)D[d]=w(f,
K,G,z,u);e(J.webgl_draw_buffers||1>=D.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");e(D.length<=O.maxColorAttachments,"too many color attachments, not supported");f=f||D[0].width;K=K||D[0].height;n?F=k(n):y&&!q&&(F=w(f,K,T,"depth","uint32"));H?X=k(H):q&&!y&&(X=w(f,K,!1,"stencil","uint8"));ea?R=k(ea):!n&&!H&&q&&y&&(R=w(f,K,T,"depth stencil","depth stencil"));e(1>=!!n+!!H+!!ea,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
y=null;for(d=0;d<D.length;++d)t(D[d],f,K),e(!D[d]||D[d].texture&&0<=M.indexOf(D[d].texture._texture.format)||D[d].renderbuffer&&0<=h.indexOf(D[d].renderbuffer._renderbuffer.format),"framebuffer color attachment "+d+" is invalid"),D[d]&&D[d].texture&&(q=m[D[d].texture._texture.format]*g[D[d].texture._texture.type],null===y?y=q:e(y===q,"all color attachments much have the same number of bits per pixel."));t(F,f,K);e(!F||F.texture&&6402===F.texture._texture.format||F.renderbuffer&&33189===F.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");t(X,f,K);e(!X||X.renderbuffer&&36168===X.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");t(R,f,K);e(!R||R.texture&&34041===R.texture._texture.format||R.renderbuffer&&34041===R.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");W(l);l.width=f;l.height=K;l.colorAttachments=D;l.depthAttachment=F;l.stencilAttachment=X;l.depthStencilAttachment=R;b.color=D.map(sa);b.depth=
sa(F);b.stencil=sa(X);b.depthStencil=sa(R);b.width=l.width;b.height=l.height;ca(l);return b}var l=new z;u.framebufferCount++;b(a,c);return D(b,{resize:function(a,c){e(p.next!==l,"can not resize a framebuffer which is currently in use");var g=Math.max(a|0,1),f=Math.max(c|0||g,1);if(g===l.width&&f===l.height)return b;for(var h=l.colorAttachments,k=0;k<h.length;++k)d(h[k],g,f);d(l.depthAttachment,g,f);d(l.stencilAttachment,g,f);d(l.depthStencilAttachment,g,f);l.width=b.width=g;l.height=b.height=f;ca(l);
return b},_reglType:"framebuffer",_framebuffer:l,destroy:function(){f(l);W(l)},use:function(a){p.setFBO({framebuffer:b},a)}})}var p={cur:null,next:null,dirty:!1,setFBO:null},da=["rgba"],C=["rgba4","rgb565","rgb5 a1"];J.ext_srgb&&C.push("srgba");J.ext_color_buffer_half_float&&C.push("rgba16f","rgb16f");J.webgl_color_buffer_float&&C.push("rgba32f");var B=["uint8"];J.oes_texture_half_float&&B.push("half float","float16");J.oes_texture_float&&B.push("float","float32");var c=0,l={};return D(p,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof z)?a:null},create:G,createCube:function(a){function c(a){var b;e(0>d.indexOf(p.next),"can not update framebuffer which is currently in use");var g={color:null},f=0,h=null;b="rgba";var l="uint8",k=1;if("number"===typeof a)f=a|0;else if(a){e.type(a,"object","invalid arguments for framebuffer");"shape"in a?(f=a.shape,e(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),e(f[0]===f[1],"cube framebuffer must be square"),f=
f[0]):("radius"in a&&(f=a.radius|0),"width"in a?(f=a.width|0,"height"in a&&e(a.height===f,"must be square")):"height"in a&&(f=a.height|0));if("color"in a||"colors"in a)h=a.color||a.colors,Array.isArray(h)&&e(1===h.length||J.webgl_draw_buffers,"multiple render targets not supported");h||("colorCount"in a&&(k=a.colorCount|0,e(0<k,"invalid color buffer count")),"colorType"in a&&(e.oneOf(a.colorType,B,"invalid color type"),l=a.colorType),"colorFormat"in a&&(b=a.colorFormat,e.oneOf(a.colorFormat,da,"invalid color format for texture")));
"depth"in a&&(g.depth=a.depth);"stencil"in a&&(g.stencil=a.stencil);"depthStencil"in a&&(g.depthStencil=a.depthStencil)}else f=1;if(h)if(Array.isArray(h))for(a=[],b=0;b<h.length;++b)a[b]=h[b];else a=[h];else for(a=Array(k),h={radius:f,format:b,type:l},b=0;b<k;++b)a[b]=X.createCube(h);g.color=Array(a.length);for(b=0;b<a.length;++b)k=a[b],e("function"===typeof k&&"textureCube"===k._reglType,"invalid cube map"),f=f||k.width,e(k.width===f&&k.height===f,"invalid cube map shape"),g.color[b]={target:34069,
data:a[b]};for(b=0;6>b;++b){for(k=0;k<a.length;++k)g.color[k].target=34069+b;0<b&&(g.depth=d[0].depth,g.stencil=d[0].stencil,g.depthStencil=d[0].depthStencil);if(d[b])d[b](g);else d[b]=G(g)}return D(c,{width:f,height:f,color:a})}var d=Array(6);c(a);return D(c,{faces:d,resize:function(a){var b=a|0;e(0<b&&b<=O.maxCubeMapSize,"invalid radius for cube fbo");if(b===c.width)return c;var g=c.color;for(a=0;a<g.length;++a)g[a].resize(b);for(a=0;6>a;++a)d[a].resize(b);c.width=c.height=b;return c},_reglType:"framebufferCube",
destroy:function(){d.forEach(function(a){a.destroy()})}})},clear:function(){R(l).forEach(f)},restore:function(){p.cur=null;p.next=null;p.dirty=!0;R(l).forEach(function(a){a.framebuffer=E.createFramebuffer();ca(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(U,ia,Ba){var e=U("./util/sorted-object-keys"),R=U("./util/pool");ia.exports=function(D,M){var m=1;M.ext_texture_filter_anisotropic&&(m=D.getParameter(34047));var g=1,h=1;M.webgl_draw_buffers&&(g=D.getParameter(34852),
h=D.getParameter(36063));var b=!!M.oes_texture_float;if(b){b=D.createTexture();D.bindTexture(3553,b);D.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var E=D.createFramebuffer();D.bindFramebuffer(36160,E);D.framebufferTexture2D(36160,36064,3553,b,0);D.bindTexture(3553,null);if(36053!==D.checkFramebufferStatus(36160))b=!1;else{D.viewport(0,0,1,1);D.clearColor(1,0,0,1);D.clear(16384);var J=R.allocType(5126,4);D.readPixels(0,0,1,1,6408,5126,J);D.getError()?b=!1:(D.deleteFramebuffer(E),D.deleteTexture(b),
b=1===J[0]);R.freeType(J)}}J=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(J=D.createTexture(),E=R.allocType(5121,36),D.activeTexture(33984),D.bindTexture(34067,J),D.texImage2D(34069,0,6408,3,3,0,6408,5121,E),R.freeType(E),D.bindTexture(34067,null),D.deleteTexture(J),J=!D.getError());return{colorBits:[D.getParameter(3410),D.getParameter(3411),D.getParameter(3412),D.getParameter(3413)],depthBits:D.getParameter(3414),
stencilBits:D.getParameter(3415),subpixelBits:D.getParameter(3408),extensions:e(M).filter(function(b){return!!M[b]}),maxAnisotropic:m,maxDrawbuffers:g,maxColorAttachments:h,pointSizeDims:D.getParameter(33901),lineWidthDims:D.getParameter(33902),maxViewportDims:D.getParameter(3386),maxCombinedTextureUnits:D.getParameter(35661),maxCubeMapSize:D.getParameter(34076),maxRenderbufferSize:D.getParameter(34024),maxTextureUnits:D.getParameter(34930),maxTextureSize:D.getParameter(3379),maxAttributes:D.getParameter(34921),
maxVertexUniforms:D.getParameter(36347),maxVertexTextureUnits:D.getParameter(35660),maxVaryingVectors:D.getParameter(36348),maxFragmentUniforms:D.getParameter(36349),glsl:D.getParameter(35724),renderer:D.getParameter(7937),vendor:D.getParameter(7936),version:D.getParameter(7938),readFloat:b,npotTextureCube:J}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(U,ia,Ba){var e=U("./util/check"),R=U("./util/is-typed-array");ia.exports=function(D,M,m,g,h,b,E){function J(X){var x;null===
M.next?(e(h.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),x=5121):(e(null!==M.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),x=M.next.colorAttachments[0].texture._texture.type,e.optional(function(){b.oes_texture_float?(e(5121===x||5126===x,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===x&&e(E.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
e(5121===x,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var u=0,F=0,J=g.framebufferWidth,t=g.framebufferHeight,V=null;R(X)?V=X:X&&(e.type(X,"object","invalid arguments to regl.read()"),u=X.x|0,F=X.y|0,e(0<=u&&u<g.framebufferWidth,"invalid x offset for regl.read"),e(0<=F&&F<g.framebufferHeight,"invalid y offset for regl.read"),J=(X.width||g.framebufferWidth-u)|0,t=(X.height||g.framebufferHeight-F)|0,V=X.data||null);V&&(5121===x?e(V instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===x&&e(V instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));e(0<J&&J+u<=g.framebufferWidth,"invalid width for read pixels");e(0<t&&t+F<=g.framebufferHeight,"invalid height for read pixels");m();X=J*t*4;V||(5121===x?V=new Uint8Array(X):5126===x&&(V=V||new Float32Array(X)));e.isTypedArray(V,"data buffer for regl.read() must be a typedarray");e(V.byteLength>=X,"data buffer for regl.read() too small");D.pixelStorei(3333,4);D.readPixels(u,F,J,
t,6408,x,V);return V}function O(b){var g;M.setFBO({framebuffer:b.framebuffer},function(){g=J(b)});return g}return function(b){return b&&"framebuffer"in b?O(b):J(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(U,ia,Ba){var e=U("./util/sorted-object-keys"),R=U("./util/check"),D=U("./util/values"),M=[];M[32854]=2;M[32855]=2;M[36194]=2;M[33189]=2;M[36168]=1;M[34041]=4;M[35907]=4;M[34836]=16;M[34842]=8;M[34843]=6;ia.exports=function(m,g,h,b,E){function J(b){this.id=u++;this.refCount=
1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;E.profile&&(this.stats={size:0})}function O(g){var h=g.renderbuffer;R(h,"must not double destroy renderbuffer");m.bindRenderbuffer(36161,null);m.deleteRenderbuffer(h);g.renderbuffer=null;g.refCount=0;delete F[g.id];b.renderbufferCount--}var X={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};g.ext_srgb&&(X.srgba=35907);g.ext_color_buffer_half_float&&(X.rgba16f=34842,X.rgb16f=34843);g.webgl_color_buffer_float&&
(X.rgba32f=34836);var x=[];e(X).forEach(function(b){x[X[b]]=b});var u=0,F={};J.prototype.decRef=function(){0>=--this.refCount&&O(this)};E.profile&&(b.getTotalRenderbufferSize=function(){var b=0;e(F).forEach(function(g){b+=F[g].stats.size});return b});return{create:function(g,t){function e(b,g){var d=0,z=0,t=32854;"object"===typeof b&&b?("shape"in b?(z=b.shape,R(Array.isArray(z)&&2<=z.length,"invalid renderbuffer shape"),d=z[0]|0,z=z[1]|0):("radius"in b&&(d=z=b.radius|0),"width"in b&&(d=b.width|0),
"height"in b&&(z=b.height|0)),"format"in b&&(R.parameter(b.format,X,"invalid renderbuffer format"),t=X[b.format])):"number"===typeof b?(d=b|0,z="number"===typeof g?g|0:d):b?R.raise("invalid arguments to renderbuffer constructor"):d=z=1;R(0<d&&0<z&&d<=h.maxRenderbufferSize&&z<=h.maxRenderbufferSize,"invalid renderbuffer size");if(d!==k.width||z!==k.height||t!==k.format)return e.width=k.width=d,e.height=k.height=z,k.format=t,m.bindRenderbuffer(36161,k.renderbuffer),m.renderbufferStorage(36161,t,d,z),
R(0===m.getError(),"invalid render buffer format"),E.profile&&(k.stats.size=M[k.format]*k.width*k.height),e.format=x[k.format],e}var k=new J(m.createRenderbuffer());F[k.id]=k;b.renderbufferCount++;e(g,t);e.resize=function(b,g){var d=b|0,z=g|0||d;if(d===k.width&&z===k.height)return e;R(0<d&&0<z&&d<=h.maxRenderbufferSize&&z<=h.maxRenderbufferSize,"invalid renderbuffer size");e.width=k.width=d;e.height=k.height=z;m.bindRenderbuffer(36161,k.renderbuffer);m.renderbufferStorage(36161,k.format,d,z);R(0===
m.getError(),"invalid render buffer format");E.profile&&(k.stats.size=M[k.format]*k.width*k.height);return e};e._reglType="renderbuffer";e._renderbuffer=k;E.profile&&(e.stats=k.stats);e.destroy=function(){k.decRef()};return e},clear:function(){D(F).forEach(O)},restore:function(){D(F).forEach(function(b){b.renderbuffer=m.createRenderbuffer();m.bindRenderbuffer(36161,b.renderbuffer);m.renderbufferStorage(36161,b.format,b.width,b.height)});m.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,
"./util/values":36}],16:[function(U,ia,Ba){var e=U("./util/sorted-object-keys"),R=U("./util/check"),D=U("./util/extend"),M=U("./util/values");ia.exports=function(m,g,h,b){function E(b,g,h,d){this.name=b;this.id=g;this.location=h;this.info=d}function J(b,g){for(var h=0;h<b.length;++h)if(b[h].id===g.id){b[h].location=g.location;return}b.push(g)}function O(b,h,t){var d=35632===b?u:F,z=d[h];if(!z){var e=g.str(h),z=m.createShader(b);m.shaderSource(z,e);m.compileShader(z);R.shaderError(m,z,e,b,t);d[h]=
z}return z}function X(g,h){this.id=V++;this.fragId=g;this.vertId=h;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function x(h,t,e){var d;d=O(35632,h.fragId);var z=O(35633,h.vertId),W=h.program=m.createProgram();m.attachShader(W,d);m.attachShader(W,z);if(e)for(d=0;d<e.length;++d)z=e[d],m.bindAttribLocation(W,z[0],z[1]);m.linkProgram(W);R.linkError(m,W,g.str(h.fragId),g.str(h.vertId),t);e=m.getProgramParameter(W,35718);
b.profile&&(h.stats.uniformsCount=e);z=h.uniforms;for(d=0;d<e;++d)if(t=m.getActiveUniform(W,d))if(1<t.size)for(var f=0;f<t.size;++f){var u=t.name.replace("[0]","["+f+"]");J(z,new E(u,g.id(u),m.getUniformLocation(W,u),t))}else J(z,new E(t.name,g.id(t.name),m.getUniformLocation(W,t.name),t));e=m.getProgramParameter(W,35721);b.profile&&(h.stats.attributesCount=e);h=h.attributes;for(d=0;d<e;++d)(t=m.getActiveAttrib(W,d))&&J(h,new E(t.name,g.id(t.name),m.getAttribLocation(W,t.name),t))}var u={},F={},Y=
{},t=[],V=0;b.profile&&(h.getMaxUniformsCount=function(){var b=0;t.forEach(function(g){g.stats.uniformsCount>b&&(b=g.stats.uniformsCount)});return b},h.getMaxAttributesCount=function(){var b=0;t.forEach(function(g){g.stats.attributesCount>b&&(b=g.stats.attributesCount)});return b});return{clear:function(){var b=m.deleteShader.bind(m);M(u).forEach(b);u={};M(F).forEach(b);F={};t.forEach(function(b){m.deleteProgram(b.program)});t.length=0;Y={};h.shaderCount=0},program:function(b,g,M,d){R.command(0<=
b,"missing vertex shader",M);R.command(0<=g,"missing fragment shader",M);var z=Y[g];z||(z=Y[g]={});var W=z[b];if(W&&(W.refCount++,!d))return W;var f=new X(g,b);h.shaderCount++;x(f,M,d);W||(z[b]=f);t.push(f);return D(f,{destroy:function(){f.refCount--;if(0>=f.refCount){m.deleteProgram(f.program);var b=t.indexOf(f);t.splice(b,1);h.shaderCount--}0>=z[f.vertId].refCount&&(m.deleteShader(F[f.vertId]),delete F[f.vertId],delete Y[f.fragId][f.vertId]);e(Y[f.fragId]).length||(m.deleteShader(u[f.fragId]),delete u[f.fragId],
delete Y[f.fragId])}})},restore:function(){u={};F={};for(var b=0;b<t.length;++b)x(t[b],null,t[b].attributes.map(function(b){return[b.location,b.name]}))},shader:O,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(U,ia,Ba){ia.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(U,ia,Ba){ia.exports=
function(){var e={"":0},R=[""];return{id:function(D){var M=e[D];if(M)return M;M=e[D]=R.length;R.push(D);return M},str:function(e){return R[e]}}}},{}],19:[function(U,ia,Ba){function e(c){return"[object "+c+"]"}function R(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function D(c){return Array.isArray(c)&&0!==c.length&&Y(c[0])?!0:!1}function M(c){return Object.prototype.toString.call(c)}function m(c){if(!c)return!1;var b=M(c);return 0<=da.indexOf(b)?!0:R(c)||D(c)||x(c)}function g(c,
b){36193===c.type?(c.data=F(b),u.freeType(b)):c.data=b}function h(c,b,a,g,f,h){c="undefined"!==typeof B[c]?B[c]:d[c]*C[b];h&&(c*=6);if(f){for(g=0;1<=a;)g+=c*a*a,a/=2;return g}return c*a*g}var b=U("./util/sorted-object-keys"),E=U("./util/check"),J=U("./util/extend"),O=U("./util/values"),X=U("./util/is-typed-array"),x=U("./util/is-ndarray"),u=U("./util/pool"),F=U("./util/to-half-float"),Y=U("./util/is-array-like"),t=U("./util/flatten"),V=U("./util/is-pow2");Ba=U("./constants/arraytypes.json");var k=
U("./constants/arraytypes.json"),w=[9984,9986,9985,9987],sa=[0,6409,6410,6407,6408],d={};d[6409]=d[6406]=d[6402]=1;d[34041]=d[6410]=2;d[6407]=d[35904]=3;d[6408]=d[35906]=4;var z=e("HTMLCanvasElement"),W=e("OffscreenCanvas"),f=e("CanvasRenderingContext2D"),ca=e("ImageBitmap"),G=e("HTMLImageElement"),p=e("HTMLVideoElement"),da=b(Ba).concat([z,W,f,ca,G,p]),C=[];C[5121]=1;C[5126]=4;C[36193]=2;C[5123]=2;C[5125]=4;var B=[];B[32854]=2;B[32855]=2;B[36194]=2;B[34041]=4;B[33776]=.5;B[33777]=.5;B[33778]=1;B[33779]=
1;B[35986]=.5;B[35987]=1;B[34798]=1;B[35840]=.5;B[35841]=.25;B[35842]=.5;B[35843]=.25;B[36196]=.5;ia.exports=function(c,l,a,e,A,B,C){function Z(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ga(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=
c.unpackAlignment;a.colorSpace=c.colorSpace;a.width=c.width;a.height=c.height;a.channels=c.channels}function S(c,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(E.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),c.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(E.type(b.flipY,"boolean","invalid texture flip"),c.flipY=b.flipY);"alignment"in b&&(E.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),c.unpackAlignment=b.alignment);"colorSpace"in b&&(E.parameter(b.colorSpace,
Ta,"invalid colorSpace"),c.colorSpace=Ta[b.colorSpace]);if("type"in b){var g=b.type;E(l.oes_texture_float||!("float"===g||"float32"===g),"you must enable the OES_texture_float extension in order to use floating point textures.");E(l.oes_texture_half_float||!("half float"===g||"float16"===g),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");E(l.webgl_depth_texture||!("uint16"===g||"uint32"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
E.parameter(g,v,"invalid texture type");c.type=v[g]}var n=c.width,f=c.height,q=c.channels,g=!1;"shape"in b?(E(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),n=b.shape[0],f=b.shape[1],3===b.shape.length&&(q=b.shape[2],E(0<q&&4>=q,"invalid number of channels"),g=!0),E(0<=n&&n<=a.maxTextureSize,"invalid width"),E(0<=f&&f<=a.maxTextureSize,"invalid height")):("radius"in b&&(n=f=b.radius,E(0<=n&&n<=a.maxTextureSize,"invalid radius")),"width"in b&&(n=b.width,E(0<=n&&n<=a.maxTextureSize,
"invalid width")),"height"in b&&(f=b.height,E(0<=f&&f<=a.maxTextureSize,"invalid height")),"channels"in b&&(q=b.channels,E(0<q&&4>=q,"invalid number of channels"),g=!0));c.width=n|0;c.height=f|0;c.channels=q|0;n=!1;"format"in b&&(n=b.format,E(l.webgl_depth_texture||!("depth"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(n,r,"invalid texture format"),f=c.internalformat=r[n],c.format=Ga[f],n in v&&!("type"in b)&&(c.type=
v[n]),n in N&&(c.compressed=!0),n=!0);!g&&n?c.channels=d[c.format]:g&&!n?c.channels!==sa[c.format]&&(c.format=c.internalformat=sa[c.channels]):n&&g&&E(c.channels===d[c.format],"number of channels inconsistent with specified format")}}function K(a){c.pixelStorei(37440,a.flipY);c.pixelStorei(37441,a.premultiplyAlpha);c.pixelStorei(37443,a.colorSpace);c.pixelStorei(3317,a.unpackAlignment)}function y(){Z.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function q(c,b){var d=null;m(b)?d=b:b&&(E.type(b,"object","invalid pixel data type"),S(c,b),"x"in b&&(c.xOffset=b.x|0),"y"in b&&(c.yOffset=b.y|0),m(b.data)&&(d=b.data));E(!c.compressed||d instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(b.copy){E(!d,"can not specify copy and data field for the same texture");var n=A.viewportWidth,v=A.viewportHeight;c.width=c.width||n-c.xOffset;c.height=c.height||v-c.yOffset;c.needsCopy=!0;E(0<=c.xOffset&&c.xOffset<n&&0<=c.yOffset&&
c.yOffset<v&&0<c.width&&c.width<=n&&0<c.height&&c.height<=v,"copy texture read out of bounds")}else if(!d)c.width=c.width||1,c.height=c.height||1,c.channels=c.channels||4;else if(X(d))c.channels=c.channels||4,c.data=d,"type"in b||5121!==c.type||(c.type=k[Object.prototype.toString.call(d)]|0);else if(R(d)){c.channels=c.channels||4;n=d;v=n.length;switch(c.type){case 5121:case 5123:case 5125:case 5126:v=u.allocType(c.type,v);v.set(n);c.data=v;break;case 36193:c.data=F(n);break;default:E.raise("unsupported texture type, must specify a typed array")}c.alignment=
1;c.needsFree=!0}else if(x(d)){n=d.data;Array.isArray(n)||5121!==c.type||(c.type=k[Object.prototype.toString.call(n)]|0);var v=d.shape,q=d.stride,r,I,h,L;3===v.length?(h=v[2],L=q[2]):(E(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),L=h=1);r=v[0];I=v[1];v=q[0];q=q[1];c.alignment=1;c.width=r;c.height=I;c.channels=h;c.format=c.internalformat=sa[h];c.needsFree=!0;r=L;d=d.offset;h=c.width;L=c.height;I=c.channels;for(var N=u.allocType(36193===c.type?5126:c.type,h*L*I),l=0,K=0;K<L;++K)for(var ra=
0;ra<h;++ra)for(var Ia=0;Ia<I;++Ia)N[l++]=n[v*ra+q*K+r*Ia+d];g(c,N)}else if(M(d)===z||M(d)===W||M(d)===f)M(d)===z||M(d)===W?c.element=d:c.element=d.canvas,c.width=c.element.width,c.height=c.element.height,c.channels=4;else if(M(d)===ca)c.element=d,c.width=d.width,c.height=d.height,c.channels=4;else if(M(d)===G)c.element=d,c.width=d.naturalWidth,c.height=d.naturalHeight,c.channels=4;else if(M(d)===p)c.element=d,c.width=d.videoWidth,c.height=d.videoHeight,c.channels=4;else if(D(d)){n=c.width||d[0].length;
v=c.height||d.length;q=c.channels;q=Y(d[0][0])?q||d[0][0].length:q||1;r=t.shape(d);h=1;for(L=0;L<r.length;++L)h*=r[L];h=u.allocType(36193===c.type?5126:c.type,h);t.flatten(d,r,"",h);g(c,h);c.alignment=1;c.width=n;c.height=v;c.channels=q;c.format=c.internalformat=sa[q];c.needsFree=!0}5126===c.type?E(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===c.type&&E(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function P(a,b,d,g,n){var v=a.element,f=a.data,q=a.internalformat,r=a.format,h=a.type,I=a.width,L=a.height;K(a);v?c.texSubImage2D(b,n,d,g,r,h,v):a.compressed?c.compressedTexSubImage2D(b,n,d,g,q,I,L,f):a.needsCopy?(e(),c.copyTexSubImage2D(b,n,d,g,a.xOffset,a.yOffset,I,L)):c.texSubImage2D(b,n,d,g,I,L,r,h,f)}function Q(){return na.pop()||new y}function xa(a){a.needsFree&&u.freeType(a.data);y.call(a);na.push(a)}function oa(){Z.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function n(a,c,b){var d=a.images[0]=Q();a.mipmask=1;d.width=a.width=c;d.height=a.height=b;d.channels=a.channels=4}function H(a,c){var b=null;if(m(c))b=a.images[0]=Q(),ga(b,a),q(b,c),a.mipmask=1;else if(S(a,c),Array.isArray(c.mipmap))for(var d=c.mipmap,g=0;g<d.length;++g)b=a.images[g]=Q(),ga(b,a),b.width>>=g,b.height>>=g,q(b,d[g]),a.mipmask|=1<<g;else b=a.images[0]=Q(),ga(b,a),q(b,c),a.mipmask=1;ga(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||E(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ea(a,b){for(var d=a.images,g=0;g<d.length&&d[g];++g){var n=d[g],v=b,f=g,q=n.element,r=n.data,h=n.internalformat,I=n.format,L=n.type,N=n.width,l=n.height;K(n);q?c.texImage2D(v,f,I,I,L,q):n.compressed?c.compressedTexImage2D(v,f,h,N,l,0,r):n.needsCopy?(e(),c.copyTexImage2D(v,f,I,n.xOffset,n.yOffset,N,l,0)):c.texImage2D(v,
f,I,N,l,0,I,L,r||null)}}function T(){var a=ya.pop()||new oa;Z.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function la(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&xa(c[b]),c[b]=null;ya.push(a)}function qa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function da(c,b){if("min"in b){var d=b.min;E.parameter(d,ac);c.minFilter=ac[d];0<=w.indexOf(c.minFilter)&&!("faces"in b)&&(c.genMipmaps=!0)}"mag"in b&&
(d=b.mag,E.parameter(d,L),c.magFilter=L[d]);var d=c.wrapS,g=c.wrapT;if("wrap"in b){var n=b.wrap;"string"===typeof n?(E.parameter(n,Ia),d=g=Ia[n]):Array.isArray(n)&&(E.parameter(n[0],Ia),E.parameter(n[1],Ia),d=Ia[n[0]],g=Ia[n[1]])}else"wrapS"in b&&(d=b.wrapS,E.parameter(d,Ia),d=Ia[d]),"wrapT"in b&&(g=b.wrapT,E.parameter(g,Ia),g=Ia[g]);c.wrapS=d;c.wrapT=g;"anisotropic"in b&&(d=b.anisotropic,E("number"===typeof d&&1<=d&&d<=a.maxAnisotropic,"aniso samples must be between 1 and "),c.anisotropic=b.anisotropic);
if("mipmap"in b){d=!1;switch(typeof b.mipmap){case "string":E.parameter(b.mipmap,Aa,"invalid mipmap hint");c.mipmapHint=Aa[b.mipmap];d=c.genMipmaps=!0;break;case "boolean":d=c.genMipmaps=b.mipmap;break;case "object":E(Array.isArray(b.mipmap),"invalid mipmap type");c.genMipmaps=!1;d=!0;break;default:E.raise("invalid mipmap type")}!d||"min"in b||(c.minFilter=9984)}}function za(a,b){c.texParameteri(b,10241,a.minFilter);c.texParameteri(b,10240,a.magFilter);c.texParameteri(b,10242,a.wrapS);c.texParameteri(b,
10243,a.wrapT);l.ext_texture_filter_anisotropic&&c.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(c.hint(33170,a.mipmapHint),c.generateMipmap(b))}function ha(a){Z.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ca++;this.refCount=1;this.target=a;this.texture=c.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new qa;C.profile&&(this.stats={size:0})}function Ea(a){c.activeTexture(33984);c.bindTexture(a.target,a.texture)}function ja(){var a=ua[0];a?c.bindTexture(a.target,a.texture):
c.bindTexture(3553,null)}function pa(a){var b=a.texture;E(b,"must not double destroy texture");var d=a.unit,g=a.target;0<=d&&(c.activeTexture(33984+d),c.bindTexture(g,null),ua[d]=null);c.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete ka[a.id];B.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ia={repeat:10497,clamp:33071,mirror:33648},L={nearest:9728,linear:9729},ac=J({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},L),Ta={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},r={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},N={};l.ext_srgb&&(r.srgb=35904,r.srgba=35906);l.oes_texture_float&&(v.float32=v["float"]=5126);l.oes_texture_half_float&&(v.float16=v["half float"]=36193);l.webgl_depth_texture&&(J(r,{depth:6402,"depth stencil":34041}),J(v,{uint16:5123,uint32:5125,
"depth stencil":34042}));l.webgl_compressed_texture_s3tc&&J(N,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});l.webgl_compressed_texture_atc&&J(N,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});l.webgl_compressed_texture_pvrtc&&J(N,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});l.webgl_compressed_texture_etc1&&(N["rgb etc1"]=36196);var ta=Array.prototype.slice.call(c.getParameter(34467));
b(N).forEach(function(a){var c=N[a];0<=ta.indexOf(c)&&(r[a]=c)});var va=b(r);a.textureFormats=va;var dd=[];b(r).forEach(function(a){dd[r[a]]=a});var Gb=[];b(v).forEach(function(a){Gb[v[a]]=a});var ba=[];b(L).forEach(function(a){ba[L[a]]=a});var I=[];b(ac).forEach(function(a){I[ac[a]]=a});var ra=[];b(Ia).forEach(function(a){ra[Ia[a]]=a});var Ga=va.reduce(function(a,c){var b=r[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||l.ext_srgb&&(35904===b||35906===b)?a[b]=b:32855===b||0<=c.indexOf("rgba")?
a[b]=6408:a[b]=6407;return a},{}),na=[],ya=[],Ca=0,ka={},aa=a.maxTextureUnits,ua=Array(aa).map(function(){return null});J(ha.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<aa;++b){var d=ua[b];if(d){if(0<d.bindCount)continue;d.unit=-1}ua[b]=this;a=b;break}a>=aa&&E.raise("insufficient number of texture units");C.profile&&B.maxTextureUnits<a+1&&(B.maxTextureUnits=a+1);this.unit=a;c.activeTexture(33984+a);c.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});C.profile&&(B.getTotalTextureSize=function(){var a=0;b(ka).forEach(function(c){a+=ka[c].stats.size});return a});return{create2D:function(b,d){function g(c,b){var d=v.texInfo;qa.call(d);var f=T();"number"===typeof c?"number"===typeof b?n(f,c|0,b|0):n(f,c|0,c|0):c?(E.type(c,"object","invalid arguments to regl.texture"),da(d,c),H(f,c)):n(f,1,1);d.genMipmaps&&(f.mipmask=(f.width<<1)-1);v.mipmask=f.mipmask;ga(v,f);E.texture2D(d,f,a);v.internalformat=f.internalformat;
g.width=f.width;g.height=f.height;Ea(v);ea(f,3553);za(d,3553);ja();la(f);C.profile&&(v.stats.size=h(v.internalformat,v.type,f.width,f.height,d.genMipmaps,!1));g.format=dd[v.internalformat];g.type=Gb[v.type];g.mag=ba[d.magFilter];g.min=I[d.minFilter];g.wrapS=ra[d.wrapS];g.wrapT=ra[d.wrapT];return g}var v=new ha(3553);ka[v.id]=v;B.textureCount++;g(b,d);g.subimage=function(a,c,b,d){E(!!a,"must specify image data");c|=0;b|=0;d|=0;var n=Q();ga(n,v);n.width=0;n.height=0;q(n,a);n.width=n.width||(v.width>>
d)-c;n.height=n.height||(v.height>>d)-b;E(v.type===n.type&&v.format===n.format&&v.internalformat===n.internalformat,"incompatible format for texture.subimage");E(0<=c&&0<=b&&c+n.width<=v.width&&b+n.height<=v.height,"texture.subimage write out of bounds");E(v.mipmask&1<<d,"missing mipmap data");E(n.data||n.element||n.needsCopy,"missing image data");Ea(v);P(n,3553,c,b,d);ja();xa(n);return g};g.resize=function(a,b){var d=a|0,n=b|0||d;if(d===v.width&&n===v.height)return g;g.width=v.width=d;g.height=v.height=
n;Ea(v);for(var f=0;v.mipmask>>f;++f){var q=d>>f,r=n>>f;if(!q||!r)break;c.texImage2D(3553,f,v.format,q,r,0,v.format,v.type,null)}ja();C.profile&&(v.stats.size=h(v.internalformat,v.type,d,n,!1,!1));return g};g._reglType="texture2d";g._texture=v;C.profile&&(g.stats=v.stats);g.destroy=function(){v.decRef()};return g},createCube:function(b,d,g,v,f,r){function L(c,b,d,g,v,f){var q,r=N.texInfo;qa.call(r);for(q=0;6>q;++q)l[q]=T();if("number"!==typeof c&&c)if("object"===typeof c)if(b)H(l[0],c),H(l[1],b),
H(l[2],d),H(l[3],g),H(l[4],v),H(l[5],f);else if(da(r,c),S(N,c),"faces"in c)for(c=c.faces,E(Array.isArray(c)&&6===c.length,"cube faces must be a length 6 array"),q=0;6>q;++q)E("object"===typeof c[q]&&!!c[q],"invalid input for cube map face"),ga(l[q],N),H(l[q],c[q]);else for(q=0;6>q;++q)H(l[q],c);else E.raise("invalid arguments to cube map");else for(c=c|0||1,q=0;6>q;++q)n(l[q],c,c);ga(N,l[0]);E.optional(function(){a.npotTextureCube||E(V(N.width)&&V(N.height),"your browser does not support non power or two texture dimensions")});
N.mipmask=r.genMipmaps?(l[0].width<<1)-1:l[0].mipmask;E.textureCube(N,r,l,a);N.internalformat=l[0].internalformat;L.width=l[0].width;L.height=l[0].height;Ea(N);for(q=0;6>q;++q)ea(l[q],34069+q);za(r,34067);ja();C.profile&&(N.stats.size=h(N.internalformat,N.type,L.width,L.height,r.genMipmaps,!0));L.format=dd[N.internalformat];L.type=Gb[N.type];L.mag=ba[r.magFilter];L.min=I[r.minFilter];L.wrapS=ra[r.wrapS];L.wrapT=ra[r.wrapT];for(q=0;6>q;++q)la(l[q]);return L}var N=new ha(34067);ka[N.id]=N;B.cubeCount++;
var l=Array(6);L(b,d,g,v,f,r);L.subimage=function(a,c,b,d,g){E(!!c,"must specify image data");E("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");b|=0;d|=0;g|=0;var n=Q();ga(n,N);n.width=0;n.height=0;q(n,c);n.width=n.width||(N.width>>g)-b;n.height=n.height||(N.height>>g)-d;E(N.type===n.type&&N.format===n.format&&N.internalformat===n.internalformat,"incompatible format for texture.subimage");E(0<=b&&0<=d&&b+n.width<=N.width&&d+n.height<=N.height,"texture.subimage write out of bounds");E(N.mipmask&
1<<g,"missing mipmap data");E(n.data||n.element||n.needsCopy,"missing image data");Ea(N);P(n,34069+a,b,d,g);ja();xa(n);return L};L.resize=function(a){a|=0;if(a!==N.width){L.width=N.width=a;L.height=N.height=a;Ea(N);for(var b=0;6>b;++b)for(var d=0;N.mipmask>>d;++d)c.texImage2D(34069+b,d,N.format,a>>d,a>>d,0,N.format,N.type,null);ja();C.profile&&(N.stats.size=h(N.internalformat,N.type,L.width,L.height,!1,!0));return L}};L._reglType="textureCube";L._texture=N;C.profile&&(L.stats=N.stats);L.destroy=function(){N.decRef()};
return L},clear:function(){for(var a=0;a<aa;++a)c.activeTexture(33984+a),c.bindTexture(3553,null),ua[a]=null;O(ka).forEach(pa);B.cubeCount=0;B.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<aa;++a){var b=ua[a];b&&(b.bindCount=0,b.unit=-1,ua[a]=null)}O(ka).forEach(function(a){a.texture=c.createTexture();c.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)c.texImage2D(3553,b,a.internalformat,a.width>>b,a.height>>b,0,
a.internalformat,a.type,null);else for(var d=0;6>d;++d)c.texImage2D(34069+d,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);za(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<aa;++a){var b=ua[a];b&&(b.bindCount=0,b.unit=-1,ua[a]=null);c.activeTexture(33984+a);c.bindTexture(3553,null);c.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,
"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(U,ia,Ba){ia.exports=function(e,R){function D(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function M(g,m,e){var u=h.pop()||new D;u.startQueryIndex=g;u.endQueryIndex=m;u.sum=0;u.stats=e;b.push(u)}if(!R.ext_disjoint_timer_query)return null;var m=[],g=[],h=[],b=[],E=[],J=[];return{beginQuery:function(b){var h=m.pop()||R.ext_disjoint_timer_query.createQueryEXT();
R.ext_disjoint_timer_query.beginQueryEXT(35007,h);g.push(h);M(g.length-1,g.length,b)},endQuery:function(){R.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:M,update:function(){var e,D;e=g.length;if(0!==e){J.length=Math.max(J.length,e+1);E.length=Math.max(E.length,e+1);E[0]=0;var x=J[0]=0;for(D=e=0;D<g.length;++D){var u=g[D];R.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(x+=R.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),m.push(u)):g[e++]=u;E[D+1]=x;J[D+1]=e}g.length=e;for(D=
e=0;D<b.length;++D){var x=b[D],M=x.startQueryIndex,u=x.endQueryIndex;x.sum+=E[u]-E[M];M=J[M];u=J[u];u===M?(x.stats.gpuTime+=x.sum/1E6,h.push(x)):(x.startQueryIndex=M,x.endQueryIndex=u,b[e++]=x)}b.length=e}},getNumPendingQueries:function(){return g.length},clear:function(){m.push.apply(m,g);for(var b=0;b<m.length;b++)R.ext_disjoint_timer_query.deleteQueryEXT(m[b]);g.length=0;m.length=0},restore:function(){g.length=0;m.length=0}}}},{}],21:[function(U,ia,Ba){function e(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function R(b){b=Error("(regl) "+b);console.error(b);throw b;}function D(b,d){b||R(d)}function M(b){return b?": "+b:""}function m(b,d){switch(d){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function g(b,d,g){0>d.indexOf(b)&&R("invalid value"+
M(g)+". must be one of: "+d)}function h(b,d){for(b+="";b.length<d;)b=" "+b;return b}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function E(b,d){this.number=b;this.line=d;this.errors=[]}function J(b,d,g){this.file=b;this.line=d;this.message=g}function O(){var b=Error(),b=(b.stack||b).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return d?d[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function X(){var b=Error(),b=(b.stack||b).toString(),
d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return d?d[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function x(d,g){var h=d.split("\n"),k=1,p=0,z={unknown:new b,0:new b};z.unknown.name=z[0].name=g||O();z.unknown.lines.push(new E(0,""));for(var t=0;t<h.length;++t){var m=h[t],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(m);if(c)switch(c[1]){case "line":if(c=/(\d+)(\s+\d+)?/.exec(c[2]))k=c[1]|0,c[2]&&(p=c[2]|0,p in z||(z[p]=new b));break;case "define":if(c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]))z[p].name=
c[1]?e(c[2]):c[2]}z[p].lines.push(new E(k++,m))}w(z).forEach(function(c){var a=z[c];a.lines.forEach(function(c){a.index[c.number]=c})});return z}function u(b){var d=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var g=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);g?d.push(new J(g[1]|0,g[2]|0,g[3].trim())):0<b.length&&d.push(new J("unknown",0,b))}});return d}function F(b,d){d.forEach(function(d){var g=b[d.file];if(g){var f=g.index[d.line];if(f){f.errors.push(d);g.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(d)})}function Y(b){b._commandRef=O()}function t(b,d){var g=X();R(b+" in command "+(d||O())+("unknown"===g?"":" called from "+g))}function V(b,d,g,h){m(b,d)||t("invalid parameter type"+M(g)+". expected "+d+", got "+typeof b,h||O())}function k(b,d){return 32820===b||32819===b||33635===b?2:34042===b?4:z[b]*d}var w=U("./sorted-object-keys"),sa=U("./is-typed-array");U=U("./extend");var d="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
z={};z[5120]=z[5121]=1;z[5122]=z[5123]=z[36193]=z[33635]=z[32819]=z[32820]=2;z[5124]=z[5125]=z[5126]=z[34042]=4;ia.exports=U(D,{optional:function(b){b()},raise:R,commandRaise:t,command:function(b,d,g){b||t(d,g||O())},parameter:function(b,d,g){b in d||R("unknown parameter ("+b+")"+M(g)+". possible values: "+w(d).join())},commandParameter:function(b,d,g,h){b in d||t("unknown parameter ("+b+")"+M(g)+". possible values: "+w(d).join(),h||O())},constructor:function(b){w(b).forEach(function(b){0>d.indexOf(b)&&
R('invalid regl constructor argument "'+b+'". must be one of '+d)})},type:function(b,d,g){m(b,d)||R("invalid parameter type"+M(g)+". expected "+d+", got "+typeof b)},commandType:V,isTypedArray:function(b,d){sa(b)||R("invalid parameter type"+M(d)+". must be a typed array")},nni:function(b,d){0<=b&&(b|0)===b||R("invalid parameter type, ("+b+")"+M(d)+". must be a nonnegative integer")},oneOf:g,shaderError:function(b,d,g,k,p){if(!b.getShaderParameter(d,b.COMPILE_STATUS)){d=b.getShaderInfoLog(d);b=k===
b.FRAGMENT_SHADER?"fragment":"vertex";V(g,"string",b+" shader source must be a string",p);var z=x(g,p);g=u(d);F(z,g);w(z).forEach(function(b){function d(c,b){g.push(c);a.push(b||"")}var c=z[b];if(c.hasErrors){var g=[""],a=[""];d("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){d(h(a.number,4)+"|  ","background-color:yellow; font-weight:bold");d(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(b){b=b.message;var g=/^\s*'(.*)'\s*:\s*(.*)$/.exec(b);if(g){var f=g[1];b=g[2];switch(f){case "assign":f="="}c=Math.max(a.line.indexOf(f,c),0)}else c=0;d(h("| ",6));d(h("^^^",c+3)+"\n","font-weight:bold");d(h("| ",6));d(b+"\n","font-weight:bold")});d(h("| ",6)+"\n")}else d(h(a.number,4)+"|  "),d(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(g.join("")):(a[0]=g.join("%c"),console.log.apply(console,a))}});D.raise("Error compiling "+
b+" shader, "+z[0].name)}},linkError:function(b,d,g,h,p){b.getProgramParameter(d,b.LINK_STATUS)||(b=b.getProgramInfoLog(d),g=x(g,p),h='Error linking program with vertex shader, "'+x(h,p)[0].name+'", and fragment shader "'+g[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(h+"\n"+b),D.raise(h))},callSite:X,saveCommandRef:Y,saveDrawInfo:function(b,d,g,h){function p(b){return b?h.id(b):0}function k(b,
c){w(c).forEach(function(c){b[h.id(c)]=!0})}Y(b);b._fragId=p(b["static"].frag);b._vertId=p(b["static"].vert);var z=b._uniformSet={};k(z,d["static"]);k(z,d.dynamic);d=b._attributeSet={};k(d,g["static"]);k(d,g.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,d,h){b.texture?g(b.texture._texture.internalformat,d,"unsupported texture format for attachment"):g(b.renderbuffer._renderbuffer.format,h,"unsupported renderbuffer format for attachment")},
guessCommand:O,texture2D:function(b,d,g){var h=d.width,p=d.height,z=d.channels;D(0<h&&h<=g.maxTextureSize&&0<p&&p<=g.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||D(!(h&h-1)&&!!h&&!(p&p-1)&&!!p,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==h&&1!==p&&D(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(D(!(h&h-1)&&!!h&&!(p&p-1)&&!!p,"texture must be a square power of 2 to support mipmapping"),
D(d.mipmask===(h<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&D(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),D(!b.genMipmaps,"mipmap generation not supported with float textures"));var t=d.images;for(g=0;16>g;++g)if(t[g]){var m=h>>g,c=p>>g;D(d.mipmask&1<<g,"missing mipmap data");var l=t[g];D(l.width===m&&l.height===c,"invalid shape for mip images");D(l.format===d.format&&l.internalformat===
d.internalformat&&l.type===d.type,"incompatible type for mip image");!l.compressed&&l.data&&(m=Math.ceil(k(l.type,z)*m/l.unpackAlignment)*l.unpackAlignment,D(l.data.byteLength===m*c,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||D(0===(d.mipmask&1<<g),"extra mipmap data");d.compressed&&D(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,d,g,h){var p=b.width,z=b.height,t=b.channels;D(0<p&&p<=h.maxTextureSize&&
0<z&&z<=h.maxTextureSize,"invalid texture shape");D(p===z,"cube map must be square");D(33071===d.wrapS&&33071===d.wrapT,"wrap mode not supported by cube map");for(h=0;h<g.length;++h){var m=g[h];D(m.width===p&&m.height===z,"inconsistent cube map face shape");d.genMipmaps&&(D(!m.compressed,"can not generate mipmap for compressed textures"),D(1===m.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=m.images,l=0;16>l;++l){var a=c[l];if(a){var e=p>>l,u=z>>l;D(m.mipmask&1<<l,"missing mipmap data");
D(a.width===e&&a.height===u,"invalid shape for mip images");D(a.format===b.format&&a.internalformat===b.internalformat&&a.type===b.type,"incompatible type for mip image");a.compressed||a.data&&D(a.data.byteLength===e*u*Math.max(k(a.type,t),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(U,ia,Ba){ia.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(U,ia,Ba){function e(m){return Array.prototype.slice.call(m)}function R(m){return e(m).join("")}var D=U("./extend"),M=U("./compiled-fns");ia.exports=function(){function m(){var g=[],h=[];return D(function(){g.push.apply(g,e(arguments))},{def:function(){var m="v"+b;b++;h.push(m);0<arguments.length&&(g.push(m,"="),g.push.apply(g,e(arguments)),g.push(";"));return m},toString:function(){return R([0<h.length?"var "+h.join(",")+";":"",R(g)])}})}function g(){function b(m,
e){h(m,e,"=",g.def(m,e),";")}var g=m(),h=m(),M=g.toString,R=h.toString;return D(function(){g.apply(g,e(arguments))},{def:g.def,entry:g,exit:h,save:b,set:function(h,m,k){b(h,m);g(h,m,"=",k,";")},toString:function(){return M()+R()}})}var h=0,b=0,E={},J=m(),O={};return{global:J,link:function(b){var g="$"+h,m=!1;"object"===typeof b&&b.name&&(g=b.name.replace(/ /g,"_"),m=!0);if(g in E)return g;E[g]=b;m||h++;return g},block:m,proc:function(b,h){function m(){var b="a"+e.length;e.push(b);return b}var e=[];
h=h||0;for(var M=0;M<h;++M)m();var M=g(),t=M.toString;return O[b]=D(M,{arg:m,toString:function(){return R(["function(",e.join(),"){",t(),"}"])}})},scope:g,cond:function(){var b=R(arguments),h=g(),m=g(),M=h.toString,J=m.toString;return D(h,{then:function(){h.apply(h,e(arguments));return this},"else":function(){m.apply(m,e(arguments));return this},toString:function(){var g=J();g&&(g="else{"+g+"}");return R(["if(",b,"){",M(),"}",g])}})},compile:function(){var b=[],g=[];Object.keys(E).sort(function(b,
g){var h="$"===b.charAt(0),m="$"===g.charAt(0);return h||m?h&&m?+b.slice(1)<+g.slice(1)?-1:1:h&&!m?-1:1:b.localeCompare(g)}).forEach(function(h){var k=E[h];b.push(h);g.push(k)});for(var h=0,m=b.length-1;-1<m;m--)if("$"===b[m].charAt(0)){h=m;break}var e=['"use strict";',J,"return {"];Object.keys(O).forEach(function(b){e.push('"',b,'":',O[b].toString(),",")});e.push("}");var m=R(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),h=b.slice(h).join(),t=M[h];if(!t)throw console.log("src code is:"),
console.log(m),console.log("compiled values:",g),console.log("linked names:",b),console.log("Keys available:",Object.keys(M)),console.log("Key:",h),console.log('"'+h+'": function('+b.join(", ")+") \n{\n"+m+"\n},"),Error("missing precompiled function with key: "+h);return t.apply(null,g)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(U,ia,Ba){ia.exports={$0:function(e){var R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B;R=e.attributes;D=e.current;M=e.framebuffer;m=e.gl;g=e.next;
h=e.vao;b=g.blend_color;E=D.blend_color;J=g.blend_equation;O=D.blend_equation;X=g.blend_func;x=D.blend_func;u=g.colorMask;F=D.colorMask;Y=g.depth_range;t=D.depth_range;V=g.polygonOffset_offset;k=D.polygonOffset_offset;w=g.sample_coverage;sa=D.sample_coverage;d=g.scissor_box;z=D.scissor_box;W=g.stencil_func;f=D.stencil_func;ca=g.stencil_opBack;G=D.stencil_opBack;p=g.stencil_opFront;da=D.stencil_opFront;C=g.viewport;B=D.viewport;return{poll:function(){var c,h,a,e,A,R,hd,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,
T,la;D.dirty=!1;h=g.blend_enable;a=g.cull_enable;e=g.depth_enable;A=g.dither;R=g.polygonOffset_enable;hd=g.sample_alpha;Z=g.sample_enable;ga=g.scissor_enable;S=g.stencil_enable;K=g.cull_face;y=D.cull_face;q=g.depth_func;P=D.depth_func;Q=g.depth_mask;xa=D.depth_mask;oa=g.frontFace;n=D.frontFace;H=g.lineWidth;ea=D.lineWidth;T=g.stencil_mask;la=D.stencil_mask;c=M.next;c!==M.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null),M.cur=c);h!==D.blend_enable&&(h?m.enable(3042):m.disable(3042),
D.blend_enable=h);a!==D.cull_enable&&(a?m.enable(2884):m.disable(2884),D.cull_enable=a);e!==D.depth_enable&&(e?m.enable(2929):m.disable(2929),D.depth_enable=e);A!==D.dither&&(A?m.enable(3024):m.disable(3024),D.dither=A);R!==D.polygonOffset_enable&&(R?m.enable(32823):m.disable(32823),D.polygonOffset_enable=R);hd!==D.sample_alpha&&(hd?m.enable(32926):m.disable(32926),D.sample_alpha=hd);Z!==D.sample_enable&&(Z?m.enable(32928):m.disable(32928),D.sample_enable=Z);ga!==D.scissor_enable&&(ga?m.enable(3089):
m.disable(3089),D.scissor_enable=ga);S!==D.stencil_enable&&(S?m.enable(2960):m.disable(2960),D.stencil_enable=S);if(b[0]!==E[0]||b[1]!==E[1]||b[2]!==E[2]||b[3]!==E[3])m.blendColor(b[0],b[1],b[2],b[3]),E[0]=b[0],E[1]=b[1],E[2]=b[2],E[3]=b[3];if(J[0]!==O[0]||J[1]!==O[1])m.blendEquationSeparate(J[0],J[1]),O[0]=J[0],O[1]=J[1];if(X[0]!==x[0]||X[1]!==x[1]||X[2]!==x[2]||X[3]!==x[3])m.blendFuncSeparate(X[0],X[1],X[2],X[3]),x[0]=X[0],x[1]=X[1],x[2]=X[2],x[3]=X[3];if(u[0]!==F[0]||u[1]!==F[1]||u[2]!==F[2]||
u[3]!==F[3])m.colorMask(u[0],u[1],u[2],u[3]),F[0]=u[0],F[1]=u[1],F[2]=u[2],F[3]=u[3];K!==y&&(m.cullFace(K),D.cull_face=K);q!==P&&(m.depthFunc(q),D.depth_func=q);Q!==xa&&(m.depthMask(Q),D.depth_mask=Q);if(Y[0]!==t[0]||Y[1]!==t[1])m.depthRange(Y[0],Y[1]),t[0]=Y[0],t[1]=Y[1];oa!==n&&(m.frontFace(oa),D.frontFace=oa);H!==ea&&(m.lineWidth(H),D.lineWidth=H);if(V[0]!==k[0]||V[1]!==k[1])m.polygonOffset(V[0],V[1]),k[0]=V[0],k[1]=V[1];if(w[0]!==sa[0]||w[1]!==sa[1])m.sampleCoverage(w[0],w[1]),sa[0]=w[0],sa[1]=
w[1];if(d[0]!==z[0]||d[1]!==z[1]||d[2]!==z[2]||d[3]!==z[3])m.scissor(d[0],d[1],d[2],d[3]),z[0]=d[0],z[1]=d[1],z[2]=d[2],z[3]=d[3];if(W[0]!==f[0]||W[1]!==f[1]||W[2]!==f[2])m.stencilFunc(W[0],W[1],W[2]),f[0]=W[0],f[1]=W[1],f[2]=W[2];T!==la&&(m.stencilMask(T),D.stencil_mask=T);if(ca[0]!==G[0]||ca[1]!==G[1]||ca[2]!==G[2]||ca[3]!==G[3])m.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]),G[0]=ca[0],G[1]=ca[1],G[2]=ca[2],G[3]=ca[3];if(p[0]!==da[0]||p[1]!==da[1]||p[2]!==da[2]||p[3]!==da[3])m.stencilOpSeparate(p[0],
p[1],p[2],p[3]),da[0]=p[0],da[1]=p[1],da[2]=p[2],da[3]=p[3];if(C[0]!==B[0]||C[1]!==B[1]||C[2]!==B[2]||C[3]!==B[3])m.viewport(C[0],C[1],C[2],C[3]),B[0]=C[0],B[1]=C[1],B[2]=C[2],B[3]=C[3]},refresh:function(){var c,l,a,e,A,ma,hd,Z,ga,S,K,y,q,P,Q,xa;D.dirty=!1;l=g.blend_enable;a=g.cull_enable;e=g.depth_enable;A=g.dither;ma=g.polygonOffset_enable;hd=g.sample_alpha;Z=g.sample_enable;ga=g.scissor_enable;S=g.stencil_enable;K=g.cull_face;y=g.depth_func;q=g.depth_mask;P=g.frontFace;Q=g.lineWidth;xa=g.stencil_mask;
(c=M.next)?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null);M.cur=c;c=R[0];c.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);c=R[1];c.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(1),
m.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);c=R[2];c.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);c=R[3];c.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,c.x,c.y,c.z,
c.w),c.buffer=null);c=R[4];c.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=null);c=R[5];c.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);c=R[6];c.buffer?
(m.enableVertexAttribArray(6),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);c=R[7];c.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);c=R[8];c.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,
c.buffer.buffer),m.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);c=R[9];c.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);c=R[10];c.buffer?(m.enableVertexAttribArray(10),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(10,
c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);c=R[11];c.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);c=R[12];c.buffer?(m.enableVertexAttribArray(12),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(12,c.size,c.type,c.normalized,
c.stride,c.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);c=R[13];c.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);c=R[14];c.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(14),
m.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);c=R[15];c.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,c.buffer.buffer),m.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,c.x,c.y,c.z,c.w),c.buffer=null);h.currentVAO=null;h.setVAO(h.targetVAO);l?m.enable(3042):m.disable(3042);D.blend_enable=l;a?m.enable(2884):m.disable(2884);D.cull_enable=a;e?m.enable(2929):m.disable(2929);D.depth_enable=e;A?m.enable(3024):m.disable(3024);
D.dither=A;ma?m.enable(32823):m.disable(32823);D.polygonOffset_enable=ma;hd?m.enable(32926):m.disable(32926);D.sample_alpha=hd;Z?m.enable(32928):m.disable(32928);D.sample_enable=Z;ga?m.enable(3089):m.disable(3089);D.scissor_enable=ga;S?m.enable(2960):m.disable(2960);D.stencil_enable=S;m.blendColor(b[0],b[1],b[2],b[3]);E[0]=b[0];E[1]=b[1];E[2]=b[2];E[3]=b[3];m.blendEquationSeparate(J[0],J[1]);O[0]=J[0];O[1]=J[1];m.blendFuncSeparate(X[0],X[1],X[2],X[3]);x[0]=X[0];x[1]=X[1];x[2]=X[2];x[3]=X[3];m.colorMask(u[0],
u[1],u[2],u[3]);F[0]=u[0];F[1]=u[1];F[2]=u[2];F[3]=u[3];m.cullFace(K);D.cull_face=K;m.depthFunc(y);D.depth_func=y;m.depthMask(q);D.depth_mask=q;m.depthRange(Y[0],Y[1]);t[0]=Y[0];t[1]=Y[1];m.frontFace(P);D.frontFace=P;m.lineWidth(Q);D.lineWidth=Q;m.polygonOffset(V[0],V[1]);k[0]=V[0];k[1]=V[1];m.sampleCoverage(w[0],w[1]);sa[0]=w[0];sa[1]=w[1];m.scissor(d[0],d[1],d[2],d[3]);z[0]=d[0];z[1]=d[1];z[2]=d[2];z[3]=d[3];m.stencilFunc(W[0],W[1],W[2]);f[0]=W[0];f[1]=W[1];f[2]=W[2];m.stencilMask(xa);D.stencil_mask=
xa;m.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]);G[0]=ca[0];G[1]=ca[1];G[2]=ca[2];G[3]=ca[3];m.stencilOpSeparate(p[0],p[1],p[2],p[3]);da[0]=p[0];da[1]=p[1];da[2]=p[2];da[3]=p[3];m.viewport(C[0],C[1],C[2],C[3]);B[0]=C[0];B[1]=C[1];B[2]=C[2];B[3]=C[3]}}},$3:function(e,R,D,M){var m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma;m=e.context;g=e.current;h=e.framebuffer;b=e.gl;E=e.next;J=e.shader;O=e.vao;X=E.blend_color;x=g.blend_color;u=E.blend_equation;F=g.blend_equation;Y=E.blend_func;
t=g.blend_func;V=E.colorMask;k=g.colorMask;w=E.depth_range;sa=g.depth_range;d=E.polygonOffset_offset;z=g.polygonOffset_offset;W=E.sample_coverage;f=g.sample_coverage;ca=E.scissor_box;G=g.scissor_box;p=E.stencil_func;da=g.stencil_func;C=E.stencil_opBack;B=g.stencil_opBack;c=E.stencil_opFront;l=g.stencil_opFront;a=E.viewport;wa=g.viewport;A={};ma={};return{batch:function(m,e){var A,S,K,y,q;A=h.next;A!==h.cur&&(A?b.bindFramebuffer(36160,A.framebuffer):b.bindFramebuffer(36160,null),h.cur=A);if(g.dirty){A=
E.dither;A!==g.dither&&(A?b.enable(3024):b.disable(3024),g.dither=A);A=E.blend_enable;A!==g.blend_enable&&(A?b.enable(3042):b.disable(3042),g.blend_enable=A);A=X[0];K=X[1];y=X[2];q=X[3];if(A!==x[0]||K!==x[1]||y!==x[2]||q!==x[3])b.blendColor(A,K,y,q),x[0]=A,x[1]=K,x[2]=y,x[3]=q;A=u[0];K=u[1];if(A!==F[0]||K!==F[1])b.blendEquationSeparate(A,K),F[0]=A,F[1]=K;A=Y[0];K=Y[1];y=Y[2];q=Y[3];if(A!==t[0]||K!==t[1]||y!==t[2]||q!==t[3])b.blendFuncSeparate(A,K,y,q),t[0]=A,t[1]=K,t[2]=y,t[3]=q;A=E.depth_enable;
A!==g.depth_enable&&(A?b.enable(2929):b.disable(2929),g.depth_enable=A);A=E.depth_func;A!==g.depth_func&&(b.depthFunc(A),g.depth_func=A);A=w[0];K=w[1];if(A!==sa[0]||K!==sa[1])b.depthRange(A,K),sa[0]=A,sa[1]=K;A=E.depth_mask;A!==g.depth_mask&&(b.depthMask(A),g.depth_mask=A);A=V[0];K=V[1];y=V[2];q=V[3];if(A!==k[0]||K!==k[1]||y!==k[2]||q!==k[3])b.colorMask(A,K,y,q),k[0]=A,k[1]=K,k[2]=y,k[3]=q;A=E.cull_enable;A!==g.cull_enable&&(A?b.enable(2884):b.disable(2884),g.cull_enable=A);A=E.cull_face;A!==g.cull_face&&
(b.cullFace(A),g.cull_face=A);A=E.frontFace;A!==g.frontFace&&(b.frontFace(A),g.frontFace=A);A=E.lineWidth;A!==g.lineWidth&&(b.lineWidth(A),g.lineWidth=A);A=E.polygonOffset_enable;A!==g.polygonOffset_enable&&(A?b.enable(32823):b.disable(32823),g.polygonOffset_enable=A);A=d[0];K=d[1];if(A!==z[0]||K!==z[1])b.polygonOffset(A,K),z[0]=A,z[1]=K;A=E.sample_alpha;A!==g.sample_alpha&&(A?b.enable(32926):b.disable(32926),g.sample_alpha=A);A=E.sample_enable;A!==g.sample_enable&&(A?b.enable(32928):b.disable(32928),
g.sample_enable=A);A=W[0];K=W[1];if(A!==f[0]||K!==f[1])b.sampleCoverage(A,K),f[0]=A,f[1]=K;A=E.stencil_enable;A!==g.stencil_enable&&(A?b.enable(2960):b.disable(2960),g.stencil_enable=A);A=E.stencil_mask;A!==g.stencil_mask&&(b.stencilMask(A),g.stencil_mask=A);A=p[0];K=p[1];y=p[2];if(A!==da[0]||K!==da[1]||y!==da[2])b.stencilFunc(A,K,y),da[0]=A,da[1]=K,da[2]=y;A=c[0];K=c[1];y=c[2];q=c[3];if(A!==l[0]||K!==l[1]||y!==l[2]||q!==l[3])b.stencilOpSeparate(A,K,y,q),l[0]=A,l[1]=K,l[2]=y,l[3]=q;A=C[0];K=C[1];
y=C[2];q=C[3];if(A!==B[0]||K!==B[1]||y!==B[2]||q!==B[3])b.stencilOpSeparate(A,K,y,q),B[0]=A,B[1]=K,B[2]=y,B[3]=q;A=E.scissor_enable;A!==g.scissor_enable&&(A?b.enable(3089):b.disable(3089),g.scissor_enable=A);A=ca[0];K=ca[1];y=ca[2];q=ca[3];if(A!==G[0]||K!==G[1]||y!==G[2]||q!==G[3])b.scissor(A,K,y,q),G[0]=A,G[1]=K,G[2]=y,G[3]=q;A=a[0];K=a[1];y=a[2];q=a[3];if(A!==wa[0]||K!==wa[1]||y!==wa[2]||q!==wa[3])b.viewport(A,K,y,q),wa[0]=A,wa[1]=K,wa[2]=y,wa[3]=q;g.dirty=!1}if(A=g.profile)S=performance.now(),
R.count+=e;K=J.program(J.vert,J.frag);b.useProgram(K.program);O.setVAO(null);y=K.id;(q=ma[y])||(q=ma[y]=M(K));q.call(this,m,e);O.setVAO(null);A&&(R.cpuTime+=performance.now()-S)},draw:function(m){var e,M,S,K,y;e=h.next;e!==h.cur&&(e?b.bindFramebuffer(36160,e.framebuffer):b.bindFramebuffer(36160,null),h.cur=e);if(g.dirty){e=E.dither;e!==g.dither&&(e?b.enable(3024):b.disable(3024),g.dither=e);e=E.blend_enable;e!==g.blend_enable&&(e?b.enable(3042):b.disable(3042),g.blend_enable=e);e=X[0];S=X[1];K=X[2];
y=X[3];if(e!==x[0]||S!==x[1]||K!==x[2]||y!==x[3])b.blendColor(e,S,K,y),x[0]=e,x[1]=S,x[2]=K,x[3]=y;e=u[0];S=u[1];if(e!==F[0]||S!==F[1])b.blendEquationSeparate(e,S),F[0]=e,F[1]=S;e=Y[0];S=Y[1];K=Y[2];y=Y[3];if(e!==t[0]||S!==t[1]||K!==t[2]||y!==t[3])b.blendFuncSeparate(e,S,K,y),t[0]=e,t[1]=S,t[2]=K,t[3]=y;e=E.depth_enable;e!==g.depth_enable&&(e?b.enable(2929):b.disable(2929),g.depth_enable=e);e=E.depth_func;e!==g.depth_func&&(b.depthFunc(e),g.depth_func=e);e=w[0];S=w[1];if(e!==sa[0]||S!==sa[1])b.depthRange(e,
S),sa[0]=e,sa[1]=S;e=E.depth_mask;e!==g.depth_mask&&(b.depthMask(e),g.depth_mask=e);e=V[0];S=V[1];K=V[2];y=V[3];if(e!==k[0]||S!==k[1]||K!==k[2]||y!==k[3])b.colorMask(e,S,K,y),k[0]=e,k[1]=S,k[2]=K,k[3]=y;e=E.cull_enable;e!==g.cull_enable&&(e?b.enable(2884):b.disable(2884),g.cull_enable=e);e=E.cull_face;e!==g.cull_face&&(b.cullFace(e),g.cull_face=e);e=E.frontFace;e!==g.frontFace&&(b.frontFace(e),g.frontFace=e);e=E.lineWidth;e!==g.lineWidth&&(b.lineWidth(e),g.lineWidth=e);e=E.polygonOffset_enable;e!==
g.polygonOffset_enable&&(e?b.enable(32823):b.disable(32823),g.polygonOffset_enable=e);e=d[0];S=d[1];if(e!==z[0]||S!==z[1])b.polygonOffset(e,S),z[0]=e,z[1]=S;e=E.sample_alpha;e!==g.sample_alpha&&(e?b.enable(32926):b.disable(32926),g.sample_alpha=e);e=E.sample_enable;e!==g.sample_enable&&(e?b.enable(32928):b.disable(32928),g.sample_enable=e);e=W[0];S=W[1];if(e!==f[0]||S!==f[1])b.sampleCoverage(e,S),f[0]=e,f[1]=S;e=E.stencil_enable;e!==g.stencil_enable&&(e?b.enable(2960):b.disable(2960),g.stencil_enable=
e);e=E.stencil_mask;e!==g.stencil_mask&&(b.stencilMask(e),g.stencil_mask=e);e=p[0];S=p[1];K=p[2];if(e!==da[0]||S!==da[1]||K!==da[2])b.stencilFunc(e,S,K),da[0]=e,da[1]=S,da[2]=K;e=c[0];S=c[1];K=c[2];y=c[3];if(e!==l[0]||S!==l[1]||K!==l[2]||y!==l[3])b.stencilOpSeparate(e,S,K,y),l[0]=e,l[1]=S,l[2]=K,l[3]=y;e=C[0];S=C[1];K=C[2];y=C[3];if(e!==B[0]||S!==B[1]||K!==B[2]||y!==B[3])b.stencilOpSeparate(e,S,K,y),B[0]=e,B[1]=S,B[2]=K,B[3]=y;e=E.scissor_enable;e!==g.scissor_enable&&(e?b.enable(3089):b.disable(3089),
g.scissor_enable=e);e=ca[0];S=ca[1];K=ca[2];y=ca[3];if(e!==G[0]||S!==G[1]||K!==G[2]||y!==G[3])b.scissor(e,S,K,y),G[0]=e,G[1]=S,G[2]=K,G[3]=y;e=a[0];S=a[1];K=a[2];y=a[3];if(e!==wa[0]||S!==wa[1]||K!==wa[2]||y!==wa[3])b.viewport(e,S,K,y),wa[0]=e,wa[1]=S,wa[2]=K,wa[3]=y;g.dirty=!1}if(e=g.profile)M=performance.now(),R.count++;S=J.program(J.vert,J.frag);b.useProgram(S.program);O.setVAO(null);K=S.id;(y=A[K])||(y=A[K]=D(S));y.call(this,m);O.setVAO(null);e&&(R.cpuTime+=performance.now()-M)},scope:function(a,
b,c){var d,h;if(d=g.profile)h=performance.now(),R.count++;b(m,a,c);d&&(R.cpuTime+=performance.now()-h)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,hd,Z,ga,S,K,y,q,P,Q,xa,
oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,dd,Gb,ba,I,ra,Ga,na,ya,Ca){var ka,aa,ua,Ka,Fa,gb,fa,zd,Zb,Ha,$b,Rb,U,Cd,yd,Vd,ye,se,Ud,ne,Ad,Dd,ce,he,be,ze,Ye,Qe,Fd,Ae,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va;ka=e.attributes;aa=e.context;ua=e.current;Ka=e.draw;Fa=e.elements;gb=e.framebuffer;fa=e.gl;zd=e.next;Zb=e.shader;Ha=e.uniforms;$b=e.vao;Rb=zd.blend_color;U=ua.blend_color;Cd=zd.blend_equation;yd=ua.blend_equation;
Vd=zd.blend_func;ye=ua.blend_func;se=zd.colorMask;Ud=ua.colorMask;ne=zd.depth_range;Ad=ua.depth_range;Dd=zd.polygonOffset_offset;ce=ua.polygonOffset_offset;he=zd.sample_coverage;be=ua.sample_coverage;ze=zd.scissor_box;Ye=ua.scissor_box;Qe=zd.stencil_func;Fd=ua.stencil_func;Ae=zd.stencil_opBack;te=ua.stencil_opBack;$d=zd.stencil_opFront;Wd=ua.stencil_opFront;Ld=zd.viewport;md=ua.viewport;$c={};sd={};Kc=new Float32Array(16);pd=new Float32Array(16);Ec=new Float32Array(16);ed=new Float32Array(16);Oc=
new Float32Array(16);ld=new Float32Array(16);Ab=new Float32Array(16);Eb=new Float32Array(16);tc=new Float32Array(16);wb=new Float32Array(16);wc=new Float32Array(16);Bb=new Float32Array(16);Ic=new Float32Array(16);lc=new Float32Array(16);Fc=new Float32Array(16);Wc=new Float32Array(16);Vc=new Float32Array(16);Cc=new Float32Array(16);ec=new Float32Array(16);Gc=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);mc=new Float32Array(16);fc=new Float32Array(16);$a=new Float32Array(16);
Hc=new Float32Array(16);xb=new Float32Array(16);cb=new Float32Array(16);Mb=new Float32Array(16);ab=new Float32Array(16);nb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,c){var d,f,e,l;d=gb.next;d!==gb.cur&&(d?fa.bindFramebuffer(36160,d.framebuffer):fa.bindFramebuffer(36160,null),gb.cur=d);if(ua.dirty){var p,A,z,G,C,B,D,R,w,W,ca,sa,Ha,wa,ma,da,Rb,Zb,Ma,Eb,Oc,Ab,Bb,Pa,ze;p=se[0];A=se[1];z=se[2];G=se[3];if(p!==Ud[0]||A!==Ud[1]||z!==Ud[2]||G!==Ud[3])fa.colorMask(p,A,z,G),Ud[0]=
p,Ud[1]=A,Ud[2]=z,Ud[3]=G;C=zd.frontFace;C!==ua.frontFace&&(fa.frontFace(C),ua.frontFace=C);B=zd.polygonOffset_enable;B!==ua.polygonOffset_enable&&(B?fa.enable(32823):fa.disable(32823),ua.polygonOffset_enable=B);D=Dd[0];R=Dd[1];if(D!==ce[0]||R!==ce[1])fa.polygonOffset(D,R),ce[0]=D,ce[1]=R;w=zd.sample_alpha;w!==ua.sample_alpha&&(w?fa.enable(32926):fa.disable(32926),ua.sample_alpha=w);W=zd.sample_enable;W!==ua.sample_enable&&(W?fa.enable(32928):fa.disable(32928),ua.sample_enable=W);ca=he[0];sa=he[1];
if(ca!==be[0]||sa!==be[1])fa.sampleCoverage(ca,sa),be[0]=ca,be[1]=sa;Ha=zd.stencil_enable;Ha!==ua.stencil_enable&&(Ha?fa.enable(2960):fa.disable(2960),ua.stencil_enable=Ha);wa=zd.stencil_mask;wa!==ua.stencil_mask&&(fa.stencilMask(wa),ua.stencil_mask=wa);ma=Qe[0];da=Qe[1];Rb=Qe[2];if(ma!==Fd[0]||da!==Fd[1]||Rb!==Fd[2])fa.stencilFunc(ma,da,Rb),Fd[0]=ma,Fd[1]=da,Fd[2]=Rb;Zb=$d[0];Ma=$d[1];Eb=$d[2];Oc=$d[3];if(Zb!==Wd[0]||Ma!==Wd[1]||Eb!==Wd[2]||Oc!==Wd[3])fa.stencilOpSeparate(Zb,Ma,Eb,Oc),Wd[0]=Zb,Wd[1]=
Ma,Wd[2]=Eb,Wd[3]=Oc;Ab=Ae[0];Bb=Ae[1];Pa=Ae[2];ze=Ae[3];if(Ab!==te[0]||Bb!==te[1]||Pa!==te[2]||ze!==te[3])fa.stencilOpSeparate(Ab,Bb,Pa,ze),te[0]=Ab,te[1]=Bb,te[2]=Pa,te[3]=ze}fa.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;fa.disable(3042);ua.blend_enable=!1;fa.blendEquationSeparate(32774,32774);yd[0]=32774;yd[1]=32774;fa.blendFuncSeparate(770,771,1,1);ye[0]=770;ye[1]=771;ye[2]=1;ye[3]=1;fa.enable(2884);ua.cull_enable=!0;fa.cullFace(1029);ua.cull_face=1029;fa.enable(2929);ua.depth_enable=!0;
fa.depthFunc(513);ua.depth_func=513;fa.depthMask(!0);ua.depth_mask=!0;fa.depthRange(0,1);Ad[0]=0;Ad[1]=1;fa.disable(3024);ua.dither=!1;fa.lineWidth(2);ua.lineWidth=2;fa.enable(3089);ua.scissor_enable=!0;f=ua.profile;ua.profile=!1;fa.useProgram(hd.program);var Ra,wb,ld,Na,lc,Ya,Ec,Vd,lb,Oa,tc,Qa,tb,ub,Sa,mb,pd,Cd,Fc,bb,Ic,ed,Xa,Kc,zb,Za,ne,wc,Vb,Pb,Ld,Qb,Wc;$b.setVAO(null);Ra=Aa.location;wb=ka[Ra];wb.buffer||fa.enableVertexAttribArray(Ra);if(wb.type!==M.dtype||4!==wb.size||wb.buffer!==M||!1!==wb.normalized||
0!==wb.offset||0!==wb.stride)fa.bindBuffer(34962,M.buffer),fa.vertexAttribPointer(Ra,4,M.dtype,!1,0,0),wb.type=M.dtype,wb.size=4,wb.buffer=M,wb.normalized=!1,wb.offset=0,wb.stride=0;ld=Ia.location;Na=ka[ld];Na.buffer||fa.enableVertexAttribArray(ld);if(Na.type!==m.dtype||4!==Na.size||Na.buffer!==m||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(ld,4,m.dtype,!1,0,0),Na.type=m.dtype,Na.size=4,Na.buffer=m,Na.normalized=!1,Na.offset=0,Na.stride=0;
lc=L.location;Ya=ka[lc];Ya.buffer||fa.enableVertexAttribArray(lc);if(Ya.type!==g.dtype||4!==Ya.size||Ya.buffer!==g||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)fa.bindBuffer(34962,g.buffer),fa.vertexAttribPointer(lc,4,g.dtype,!1,0,0),Ya.type=g.dtype,Ya.size=4,Ya.buffer=g,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ec=ac.location;Vd=ka[Ec];Vd.buffer||fa.enableVertexAttribArray(Ec);if(Vd.type!==h.dtype||4!==Vd.size||Vd.buffer!==h||!1!==Vd.normalized||0!==Vd.offset||0!==Vd.stride)fa.bindBuffer(34962,
h.buffer),fa.vertexAttribPointer(Ec,4,h.dtype,!1,0,0),Vd.type=h.dtype,Vd.size=4,Vd.buffer=h,Vd.normalized=!1,Vd.offset=0,Vd.stride=0;lb=Ta.location;Oa=ka[lb];Oa.buffer||fa.enableVertexAttribArray(lb);if(Oa.type!==b.dtype||4!==Oa.size||Oa.buffer!==b||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)fa.bindBuffer(34962,b.buffer),fa.vertexAttribPointer(lb,4,b.dtype,!1,0,0),Oa.type=b.dtype,Oa.size=4,Oa.buffer=b,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;tc=v.location;Qa=ka[tc];Qa.buffer||fa.enableVertexAttribArray(tc);
if(Qa.type!==E.dtype||4!==Qa.size||Qa.buffer!==E||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)fa.bindBuffer(34962,E.buffer),fa.vertexAttribPointer(tc,4,E.dtype,!1,0,0),Qa.type=E.dtype,Qa.size=4,Qa.buffer=E,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;tb=r.location;ub=ka[tb];ub.buffer||fa.enableVertexAttribArray(tb);if(ub.type!==J.dtype||4!==ub.size||ub.buffer!==J||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)fa.bindBuffer(34962,J.buffer),fa.vertexAttribPointer(tb,4,J.dtype,!1,0,0),ub.type=J.dtype,
ub.size=4,ub.buffer=J,ub.normalized=!1,ub.offset=0,ub.stride=0;Sa=N.location;mb=ka[Sa];mb.buffer||fa.enableVertexAttribArray(Sa);if(mb.type!==O.dtype||4!==mb.size||mb.buffer!==O||!1!==mb.normalized||0!==mb.offset||0!==mb.stride)fa.bindBuffer(34962,O.buffer),fa.vertexAttribPointer(Sa,4,O.dtype,!1,0,0),mb.type=O.dtype,mb.size=4,mb.buffer=O,mb.normalized=!1,mb.offset=0,mb.stride=0;pd=ta.location;Cd=ka[pd];Cd.buffer||fa.enableVertexAttribArray(pd);if(Cd.type!==X.dtype||4!==Cd.size||Cd.buffer!==X||!1!==
Cd.normalized||0!==Cd.offset||0!==Cd.stride)fa.bindBuffer(34962,X.buffer),fa.vertexAttribPointer(pd,4,X.dtype,!1,0,0),Cd.type=X.dtype,Cd.size=4,Cd.buffer=X,Cd.normalized=!1,Cd.offset=0,Cd.stride=0;Fc=va.location;bb=ka[Fc];bb.buffer||fa.enableVertexAttribArray(Fc);if(bb.type!==x.dtype||4!==bb.size||bb.buffer!==x||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)fa.bindBuffer(34962,x.buffer),fa.vertexAttribPointer(Fc,4,x.dtype,!1,0,0),bb.type=x.dtype,bb.size=4,bb.buffer=x,bb.normalized=!1,bb.offset=
0,bb.stride=0;Ic=dd.location;ed=ka[Ic];ed.buffer||fa.enableVertexAttribArray(Ic);if(ed.type!==u.dtype||4!==ed.size||ed.buffer!==u||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(Ic,4,u.dtype,!1,0,0),ed.type=u.dtype,ed.size=4,ed.buffer=u,ed.normalized=!1,ed.offset=0,ed.stride=0;Xa=Gb.location;Kc=ka[Xa];Kc.buffer||fa.enableVertexAttribArray(Xa);if(Kc.type!==F.dtype||4!==Kc.size||Kc.buffer!==F||!1!==Kc.normalized||0!==Kc.offset||0!==Kc.stride)fa.bindBuffer(34962,
F.buffer),fa.vertexAttribPointer(Xa,4,F.dtype,!1,0,0),Kc.type=F.dtype,Kc.size=4,Kc.buffer=F,Kc.normalized=!1,Kc.offset=0,Kc.stride=0;zb=ba.location;Za=ka[zb];Za.buffer||fa.enableVertexAttribArray(zb);if(Za.type!==Y.dtype||4!==Za.size||Za.buffer!==Y||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)fa.bindBuffer(34962,Y.buffer),fa.vertexAttribPointer(zb,4,Y.dtype,!1,0,0),Za.type=Y.dtype,Za.size=4,Za.buffer=Y,Za.normalized=!1,Za.offset=0,Za.stride=0;ne=I.location;wc=ka[ne];wc.buffer||fa.enableVertexAttribArray(ne);
if(wc.type!==t.dtype||4!==wc.size||wc.buffer!==t||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)fa.bindBuffer(34962,t.buffer),fa.vertexAttribPointer(ne,4,t.dtype,!1,0,0),wc.type=t.dtype,wc.size=4,wc.buffer=t,wc.normalized=!1,wc.offset=0,wc.stride=0;Vb=ra.location;Pb=ka[Vb];Pb.buffer||fa.enableVertexAttribArray(Vb);if(Pb.type!==V.dtype||4!==Pb.size||Pb.buffer!==V||!1!==Pb.normalized||0!==Pb.offset||0!==Pb.stride)fa.bindBuffer(34962,V.buffer),fa.vertexAttribPointer(Vb,4,V.dtype,!1,0,0),Pb.type=V.dtype,
Pb.size=4,Pb.buffer=V,Pb.normalized=!1,Pb.offset=0,Pb.stride=0;Ld=ga.location;Qb=ka[Ld];Qb.buffer||fa.enableVertexAttribArray(Ld);if(Qb.type!==k.dtype||4!==Qb.size||Qb.buffer!==k||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)fa.bindBuffer(34962,k.buffer),fa.vertexAttribPointer(Ld,4,k.dtype,!1,0,0),Qb.type=k.dtype,Qb.size=4,Qb.buffer=k,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;fa.uniform1i(Ga.location,Z.bind());(Wc=Ka.elements)?fa.bindBuffer(34963,Wc.buffer.buffer):$b.currentVAO&&(Wc=Fa.getElements($b.currentVAO.elements))&&
fa.bindBuffer(34963,Wc.buffer.buffer);for(e=0;e<c;++e){l=a[e];var Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,ia,Be,jd,mf,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,Ba,ue,ke,je,ie,ve,fe;$c.height=l.viewportHeight;$c.width=l.viewportWidth;$c.x=l.viewportX;$c.y=l.viewportY;Dc=$c.x|0;ud=$c.y|0;Mc="width"in $c?$c.width|0:aa.framebufferWidth-Dc;fd="height"in $c?$c.height|0:aa.framebufferHeight-ud;qd=aa.viewportWidth;aa.viewportWidth=Mc;nc=aa.viewportHeight;
aa.viewportHeight=fd;fa.viewport(Dc,ud,Mc,fd);md[0]=Dc;md[1]=ud;md[2]=Mc;md[3]=fd;sd.height=l.scissorHeight;sd.width=l.scissorWidth;sd.x=l.scissorX;sd.y=l.scissorY;vc=sd.x|0;hc=sd.y|0;db="width"in sd?sd.width|0:aa.framebufferWidth-vc;rc="height"in sd?sd.height|0:aa.framebufferHeight-hc;fa.scissor(vc,hc,db,rc);Ye[0]=vc;Ye[1]=hc;Ye[2]=db;Ye[3]=rc;Sb=l.dim0A;fa.uniformMatrix4fv(K.location,!1,Array.isArray(Sb)||Sb instanceof Float32Array?Sb:(Vc[0]=Sb[0],Vc[1]=Sb[1],Vc[2]=Sb[2],Vc[3]=Sb[3],Vc[4]=Sb[4],
Vc[5]=Sb[5],Vc[6]=Sb[6],Vc[7]=Sb[7],Vc[8]=Sb[8],Vc[9]=Sb[9],Vc[10]=Sb[10],Vc[11]=Sb[11],Vc[12]=Sb[12],Vc[13]=Sb[13],Vc[14]=Sb[14],Vc[15]=Sb[15],Vc));Wb=l.dim1A;fa.uniformMatrix4fv(Q.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:(Cc[0]=Wb[0],Cc[1]=Wb[1],Cc[2]=Wb[2],Cc[3]=Wb[3],Cc[4]=Wb[4],Cc[5]=Wb[5],Cc[6]=Wb[6],Cc[7]=Wb[7],Cc[8]=Wb[8],Cc[9]=Wb[9],Cc[10]=Wb[10],Cc[11]=Wb[11],Cc[12]=Wb[12],Cc[13]=Wb[13],Cc[14]=Wb[14],Cc[15]=Wb[15],Cc));dc=l.dim0B;fa.uniformMatrix4fv(y.location,!1,Array.isArray(dc)||
dc instanceof Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));ic=l.dim1B;fa.uniformMatrix4fv(xa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Gc[0]=ic[0],Gc[1]=ic[1],Gc[2]=ic[2],Gc[3]=ic[3],Gc[4]=ic[4],Gc[5]=ic[5],Gc[6]=ic[6],Gc[7]=ic[7],Gc[8]=ic[8],Gc[9]=ic[9],Gc[10]=ic[10],Gc[11]=ic[11],Gc[12]=ic[12],Gc[13]=
ic[13],Gc[14]=ic[14],Gc[15]=ic[15],Gc));xc=l.dim0C;fa.uniformMatrix4fv(q.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));Ac=l.dim1C;fa.uniformMatrix4fv(oa.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(pc[0]=Ac[0],pc[1]=Ac[1],pc[2]=Ac[2],pc[3]=Ac[3],pc[4]=Ac[4],pc[5]=
Ac[5],pc[6]=Ac[6],pc[7]=Ac[7],pc[8]=Ac[8],pc[9]=Ac[9],pc[10]=Ac[10],pc[11]=Ac[11],pc[12]=Ac[12],pc[13]=Ac[13],pc[14]=Ac[14],pc[15]=Ac[15],pc));ad=l.dim0D;fa.uniformMatrix4fv(P.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(mc[0]=ad[0],mc[1]=ad[1],mc[2]=ad[2],mc[3]=ad[3],mc[4]=ad[4],mc[5]=ad[5],mc[6]=ad[6],mc[7]=ad[7],mc[8]=ad[8],mc[9]=ad[9],mc[10]=ad[10],mc[11]=ad[11],mc[12]=ad[12],mc[13]=ad[13],mc[14]=ad[14],mc[15]=ad[15],mc));Pc=l.dim1D;fa.uniformMatrix4fv(n.location,!1,Array.isArray(Pc)||
Pc instanceof Float32Array?Pc:(fc[0]=Pc[0],fc[1]=Pc[1],fc[2]=Pc[2],fc[3]=Pc[3],fc[4]=Pc[4],fc[5]=Pc[5],fc[6]=Pc[6],fc[7]=Pc[7],fc[8]=Pc[8],fc[9]=Pc[9],fc[10]=Pc[10],fc[11]=Pc[11],fc[12]=Pc[12],fc[13]=Pc[13],fc[14]=Pc[14],fc[15]=Pc[15],fc));Qc=l.loA;fa.uniformMatrix4fv(Da.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:($a[0]=Qc[0],$a[1]=Qc[1],$a[2]=Qc[2],$a[3]=Qc[3],$a[4]=Qc[4],$a[5]=Qc[5],$a[6]=Qc[6],$a[7]=Qc[7],$a[8]=Qc[8],$a[9]=Qc[9],$a[10]=Qc[10],$a[11]=Qc[11],$a[12]=Qc[12],$a[13]=
Qc[13],$a[14]=Qc[14],$a[15]=Qc[15],$a));Rc=l.hiA;fa.uniformMatrix4fv(ea.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(Hc[0]=Rc[0],Hc[1]=Rc[1],Hc[2]=Rc[2],Hc[3]=Rc[3],Hc[4]=Rc[4],Hc[5]=Rc[5],Hc[6]=Rc[6],Hc[7]=Rc[7],Hc[8]=Rc[8],Hc[9]=Rc[9],Hc[10]=Rc[10],Hc[11]=Rc[11],Hc[12]=Rc[12],Hc[13]=Rc[13],Hc[14]=Rc[14],Hc[15]=Rc[15],Hc));Xc=l.loB;fa.uniformMatrix4fv(za.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(xb[0]=Xc[0],xb[1]=Xc[1],xb[2]=Xc[2],xb[3]=Xc[3],xb[4]=Xc[4],xb[5]=
Xc[5],xb[6]=Xc[6],xb[7]=Xc[7],xb[8]=Xc[8],xb[9]=Xc[9],xb[10]=Xc[10],xb[11]=Xc[11],xb[12]=Xc[12],xb[13]=Xc[13],xb[14]=Xc[14],xb[15]=Xc[15],xb));wd=l.hiB;fa.uniformMatrix4fv(T.location,!1,Array.isArray(wd)||wd instanceof Float32Array?wd:(cb[0]=wd[0],cb[1]=wd[1],cb[2]=wd[2],cb[3]=wd[3],cb[4]=wd[4],cb[5]=wd[5],cb[6]=wd[6],cb[7]=wd[7],cb[8]=wd[8],cb[9]=wd[9],cb[10]=wd[10],cb[11]=wd[11],cb[12]=wd[12],cb[13]=wd[13],cb[14]=wd[14],cb[15]=wd[15],cb));bd=l.loC;fa.uniformMatrix4fv(ha.location,!1,Array.isArray(bd)||
bd instanceof Float32Array?bd:(Mb[0]=bd[0],Mb[1]=bd[1],Mb[2]=bd[2],Mb[3]=bd[3],Mb[4]=bd[4],Mb[5]=bd[5],Mb[6]=bd[6],Mb[7]=bd[7],Mb[8]=bd[8],Mb[9]=bd[9],Mb[10]=bd[10],Mb[11]=bd[11],Mb[12]=bd[12],Mb[13]=bd[13],Mb[14]=bd[14],Mb[15]=bd[15],Mb));Yc=l.hiC;fa.uniformMatrix4fv(la.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(ab[0]=Yc[0],ab[1]=Yc[1],ab[2]=Yc[2],ab[3]=Yc[3],ab[4]=Yc[4],ab[5]=Yc[5],ab[6]=Yc[6],ab[7]=Yc[7],ab[8]=Yc[8],ab[9]=Yc[9],ab[10]=Yc[10],ab[11]=Yc[11],ab[12]=Yc[12],ab[13]=
Yc[13],ab[14]=Yc[14],ab[15]=Yc[15],ab));kc=l.loD;fa.uniformMatrix4fv(Ea.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(nb[0]=kc[0],nb[1]=kc[1],nb[2]=kc[2],nb[3]=kc[3],nb[4]=kc[4],nb[5]=kc[5],nb[6]=kc[6],nb[7]=kc[7],nb[8]=kc[8],nb[9]=kc[9],nb[10]=kc[10],nb[11]=kc[11],nb[12]=kc[12],nb[13]=kc[13],nb[14]=kc[14],nb[15]=kc[15],nb));cc=l.hiD;fa.uniformMatrix4fv(qa.location,!1,Array.isArray(cc)||cc instanceof Float32Array?cc:(Va[0]=cc[0],Va[1]=cc[1],Va[2]=cc[2],Va[3]=cc[3],Va[4]=cc[4],Va[5]=
cc[5],Va[6]=cc[6],Va[7]=cc[7],Va[8]=cc[8],Va[9]=cc[9],Va[10]=cc[10],Va[11]=cc[11],Va[12]=cc[12],Va[13]=cc[13],Va[14]=cc[14],Va[15]=cc[15],Va));Zc=l.resolution;Uc=Zc[0];yc=Zc[1];e&&cd===Uc&&id===yc||(cd=Uc,id=yc,fa.uniform2f(na.location,Uc,yc));rd=l.viewBoxPos;ia=rd[0];jd=rd[1];e&&Be===ia&&mf===jd||(Be=ia,mf=jd,fa.uniform2f(ya.location,ia,jd));Nd=l.viewBoxSize;Yd=Nd[0];Od=Nd[1];e&&ee===Yd&&Id===Od||(ee=Yd,Id=Od,fa.uniform2f(Ca.location,Yd,Od));Gd=l.maskHeight;e&&od===Gd||(od=Gd,fa.uniform1f(ja.location,
Gd));Sc=l.drwLayer;e&&vd===Sc||(vd=Sc,fa.uniform1f(H.location,Sc));td=l.contextColor;kd=td[0];Bd=td[1];oe=td[2];ue=td[3];e&&xd===kd&&Ed===Bd&&Ba===oe&&ke===ue||(xd=kd,Ed=Bd,Ba=oe,ke=ue,fa.uniform4f(S.location,kd,Bd,oe,ue));(je=l.maskTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);ie=je._texture;fa.uniform1i(pa.location,ie.bind());ve=l.offset;if(fe=l.count)Wc?fa.drawElements(1,fe,Wc.type,ve<<(Wc.type-5121>>1)):fa.drawArrays(1,ve,fe),aa.viewportWidth=qd,aa.viewportHeight=nc,ie.unbind()}Z.unbind();
ua.dirty=!0;$b.setVAO(null);ua.profile=f},draw:function(a){var c,d,f,l,e,p;c=gb.next;c!==gb.cur&&(c?fa.bindFramebuffer(36160,c.framebuffer):fa.bindFramebuffer(36160,null),gb.cur=c);if(ua.dirty){c=se[0];p=se[1];d=se[2];f=se[3];if(c!==Ud[0]||p!==Ud[1]||d!==Ud[2]||f!==Ud[3])fa.colorMask(c,p,d,f),Ud[0]=c,Ud[1]=p,Ud[2]=d,Ud[3]=f;c=zd.frontFace;c!==ua.frontFace&&(fa.frontFace(c),ua.frontFace=c);c=zd.polygonOffset_enable;c!==ua.polygonOffset_enable&&(c?fa.enable(32823):fa.disable(32823),ua.polygonOffset_enable=
c);c=Dd[0];p=Dd[1];if(c!==ce[0]||p!==ce[1])fa.polygonOffset(c,p),ce[0]=c,ce[1]=p;c=zd.sample_alpha;c!==ua.sample_alpha&&(c?fa.enable(32926):fa.disable(32926),ua.sample_alpha=c);c=zd.sample_enable;c!==ua.sample_enable&&(c?fa.enable(32928):fa.disable(32928),ua.sample_enable=c);c=he[0];p=he[1];if(c!==be[0]||p!==be[1])fa.sampleCoverage(c,p),be[0]=c,be[1]=p;c=zd.stencil_enable;c!==ua.stencil_enable&&(c?fa.enable(2960):fa.disable(2960),ua.stencil_enable=c);c=zd.stencil_mask;c!==ua.stencil_mask&&(fa.stencilMask(c),
ua.stencil_mask=c);c=Qe[0];p=Qe[1];d=Qe[2];if(c!==Fd[0]||p!==Fd[1]||d!==Fd[2])fa.stencilFunc(c,p,d),Fd[0]=c,Fd[1]=p,Fd[2]=d;c=$d[0];p=$d[1];d=$d[2];f=$d[3];if(c!==Wd[0]||p!==Wd[1]||d!==Wd[2]||f!==Wd[3])fa.stencilOpSeparate(c,p,d,f),Wd[0]=c,Wd[1]=p,Wd[2]=d,Wd[3]=f;c=Ae[0];p=Ae[1];d=Ae[2];f=Ae[3];if(c!==te[0]||p!==te[1]||d!==te[2]||f!==te[3])fa.stencilOpSeparate(c,p,d,f),te[0]=c,te[1]=p,te[2]=d,te[3]=f}$c.height=a.viewportHeight;$c.width=a.viewportWidth;$c.x=a.viewportX;$c.y=a.viewportY;d=$c.x|0;f=
$c.y|0;l="width"in $c?$c.width|0:aa.framebufferWidth-d;e="height"in $c?$c.height|0:aa.framebufferHeight-f;c=aa.viewportWidth;aa.viewportWidth=l;p=aa.viewportHeight;aa.viewportHeight=e;fa.viewport(d,f,l,e);md[0]=d;md[1]=f;md[2]=l;md[3]=e;fa.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;fa.disable(3042);ua.blend_enable=!1;fa.blendEquationSeparate(32774,32774);yd[0]=32774;yd[1]=32774;fa.blendFuncSeparate(770,771,1,1);ye[0]=770;ye[1]=771;ye[2]=1;ye[3]=1;fa.enable(2884);ua.cull_enable=!0;fa.cullFace(1029);
ua.cull_face=1029;fa.enable(2929);ua.depth_enable=!0;fa.depthFunc(513);ua.depth_func=513;fa.depthMask(!0);ua.depth_mask=!0;fa.depthRange(0,1);Ad[0]=0;Ad[1]=1;fa.disable(3024);ua.dither=!1;fa.lineWidth(2);ua.lineWidth=2;sd.height=a.scissorHeight;sd.width=a.scissorWidth;sd.x=a.scissorX;sd.y=a.scissorY;d=sd.x|0;f=sd.y|0;l="width"in sd?sd.width|0:aa.framebufferWidth-d;e="height"in sd?sd.height|0:aa.framebufferHeight-f;fa.scissor(d,f,l,e);Ye[0]=d;Ye[1]=f;Ye[2]=l;Ye[3]=e;fa.enable(3089);ua.scissor_enable=
!0;d=ua.profile;ua.profile=!1;fa.useProgram(D.program);$b.setVAO(null);f=Aa.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==M.dtype||4!==l.size||l.buffer!==M||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,M.buffer),fa.vertexAttribPointer(f,4,M.dtype,!1,0,0),l.type=M.dtype,l.size=4,l.buffer=M,l.normalized=!1,l.offset=0,l.stride=0;f=Ia.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==m.dtype||4!==l.size||l.buffer!==m||!1!==l.normalized||0!==
l.offset||0!==l.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(f,4,m.dtype,!1,0,0),l.type=m.dtype,l.size=4,l.buffer=m,l.normalized=!1,l.offset=0,l.stride=0;f=L.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==g.dtype||4!==l.size||l.buffer!==g||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,g.buffer),fa.vertexAttribPointer(f,4,g.dtype,!1,0,0),l.type=g.dtype,l.size=4,l.buffer=g,l.normalized=!1,l.offset=0,l.stride=0;f=ac.location;l=ka[f];l.buffer||
fa.enableVertexAttribArray(f);if(l.type!==h.dtype||4!==l.size||l.buffer!==h||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,h.buffer),fa.vertexAttribPointer(f,4,h.dtype,!1,0,0),l.type=h.dtype,l.size=4,l.buffer=h,l.normalized=!1,l.offset=0,l.stride=0;f=Ta.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==b.dtype||4!==l.size||l.buffer!==b||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,b.buffer),fa.vertexAttribPointer(f,4,b.dtype,!1,0,0),l.type=
b.dtype,l.size=4,l.buffer=b,l.normalized=!1,l.offset=0,l.stride=0;f=v.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==E.dtype||4!==l.size||l.buffer!==E||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,E.buffer),fa.vertexAttribPointer(f,4,E.dtype,!1,0,0),l.type=E.dtype,l.size=4,l.buffer=E,l.normalized=!1,l.offset=0,l.stride=0;f=r.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==J.dtype||4!==l.size||l.buffer!==J||!1!==l.normalized||0!==l.offset||
0!==l.stride)fa.bindBuffer(34962,J.buffer),fa.vertexAttribPointer(f,4,J.dtype,!1,0,0),l.type=J.dtype,l.size=4,l.buffer=J,l.normalized=!1,l.offset=0,l.stride=0;f=N.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==O.dtype||4!==l.size||l.buffer!==O||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,O.buffer),fa.vertexAttribPointer(f,4,O.dtype,!1,0,0),l.type=O.dtype,l.size=4,l.buffer=O,l.normalized=!1,l.offset=0,l.stride=0;f=ta.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);
if(l.type!==X.dtype||4!==l.size||l.buffer!==X||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,X.buffer),fa.vertexAttribPointer(f,4,X.dtype,!1,0,0),l.type=X.dtype,l.size=4,l.buffer=X,l.normalized=!1,l.offset=0,l.stride=0;f=va.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==x.dtype||4!==l.size||l.buffer!==x||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,x.buffer),fa.vertexAttribPointer(f,4,x.dtype,!1,0,0),l.type=x.dtype,l.size=4,l.buffer=x,
l.normalized=!1,l.offset=0,l.stride=0;f=dd.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==u.dtype||4!==l.size||l.buffer!==u||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(f,4,u.dtype,!1,0,0),l.type=u.dtype,l.size=4,l.buffer=u,l.normalized=!1,l.offset=0,l.stride=0;f=Gb.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==F.dtype||4!==l.size||l.buffer!==F||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,
F.buffer),fa.vertexAttribPointer(f,4,F.dtype,!1,0,0),l.type=F.dtype,l.size=4,l.buffer=F,l.normalized=!1,l.offset=0,l.stride=0;f=ba.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==Y.dtype||4!==l.size||l.buffer!==Y||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,Y.buffer),fa.vertexAttribPointer(f,4,Y.dtype,!1,0,0),l.type=Y.dtype,l.size=4,l.buffer=Y,l.normalized=!1,l.offset=0,l.stride=0;f=I.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==t.dtype||
4!==l.size||l.buffer!==t||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,t.buffer),fa.vertexAttribPointer(f,4,t.dtype,!1,0,0),l.type=t.dtype,l.size=4,l.buffer=t,l.normalized=!1,l.offset=0,l.stride=0;f=ra.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==V.dtype||4!==l.size||l.buffer!==V||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,V.buffer),fa.vertexAttribPointer(f,4,V.dtype,!1,0,0),l.type=V.dtype,l.size=4,l.buffer=V,l.normalized=!1,l.offset=
0,l.stride=0;f=ga.location;l=ka[f];l.buffer||fa.enableVertexAttribArray(f);if(l.type!==k.dtype||4!==l.size||l.buffer!==k||!1!==l.normalized||0!==l.offset||0!==l.stride)fa.bindBuffer(34962,k.buffer),fa.vertexAttribPointer(f,4,k.dtype,!1,0,0),l.type=k.dtype,l.size=4,l.buffer=k,l.normalized=!1,l.offset=0,l.stride=0;f=a.dim0A;fa.uniformMatrix4fv(K.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Kc[0]=f[0],Kc[1]=f[1],Kc[2]=f[2],Kc[3]=f[3],Kc[4]=f[4],Kc[5]=f[5],Kc[6]=f[6],Kc[7]=f[7],Kc[8]=f[8],
Kc[9]=f[9],Kc[10]=f[10],Kc[11]=f[11],Kc[12]=f[12],Kc[13]=f[13],Kc[14]=f[14],Kc[15]=f[15],Kc));f=a.dim1A;fa.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(pd[0]=f[0],pd[1]=f[1],pd[2]=f[2],pd[3]=f[3],pd[4]=f[4],pd[5]=f[5],pd[6]=f[6],pd[7]=f[7],pd[8]=f[8],pd[9]=f[9],pd[10]=f[10],pd[11]=f[11],pd[12]=f[12],pd[13]=f[13],pd[14]=f[14],pd[15]=f[15],pd));f=a.dim0B;fa.uniformMatrix4fv(y.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ec[0]=f[0],Ec[1]=f[1],Ec[2]=f[2],
Ec[3]=f[3],Ec[4]=f[4],Ec[5]=f[5],Ec[6]=f[6],Ec[7]=f[7],Ec[8]=f[8],Ec[9]=f[9],Ec[10]=f[10],Ec[11]=f[11],Ec[12]=f[12],Ec[13]=f[13],Ec[14]=f[14],Ec[15]=f[15],Ec));f=a.dim1B;fa.uniformMatrix4fv(xa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ed[0]=f[0],ed[1]=f[1],ed[2]=f[2],ed[3]=f[3],ed[4]=f[4],ed[5]=f[5],ed[6]=f[6],ed[7]=f[7],ed[8]=f[8],ed[9]=f[9],ed[10]=f[10],ed[11]=f[11],ed[12]=f[12],ed[13]=f[13],ed[14]=f[14],ed[15]=f[15],ed));f=a.dim0C;fa.uniformMatrix4fv(q.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Oc[0]=f[0],Oc[1]=f[1],Oc[2]=f[2],Oc[3]=f[3],Oc[4]=f[4],Oc[5]=f[5],Oc[6]=f[6],Oc[7]=f[7],Oc[8]=f[8],Oc[9]=f[9],Oc[10]=f[10],Oc[11]=f[11],Oc[12]=f[12],Oc[13]=f[13],Oc[14]=f[14],Oc[15]=f[15],Oc));f=a.dim1C;fa.uniformMatrix4fv(oa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ld[0]=f[0],ld[1]=f[1],ld[2]=f[2],ld[3]=f[3],ld[4]=f[4],ld[5]=f[5],ld[6]=f[6],ld[7]=f[7],ld[8]=f[8],ld[9]=f[9],ld[10]=f[10],ld[11]=f[11],ld[12]=f[12],ld[13]=f[13],ld[14]=f[14],ld[15]=f[15],
ld));f=a.dim0D;fa.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ab[0]=f[0],Ab[1]=f[1],Ab[2]=f[2],Ab[3]=f[3],Ab[4]=f[4],Ab[5]=f[5],Ab[6]=f[6],Ab[7]=f[7],Ab[8]=f[8],Ab[9]=f[9],Ab[10]=f[10],Ab[11]=f[11],Ab[12]=f[12],Ab[13]=f[13],Ab[14]=f[14],Ab[15]=f[15],Ab));f=a.dim1D;fa.uniformMatrix4fv(n.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Eb[0]=f[0],Eb[1]=f[1],Eb[2]=f[2],Eb[3]=f[3],Eb[4]=f[4],Eb[5]=f[5],Eb[6]=f[6],Eb[7]=f[7],Eb[8]=f[8],Eb[9]=f[9],Eb[10]=f[10],
Eb[11]=f[11],Eb[12]=f[12],Eb[13]=f[13],Eb[14]=f[14],Eb[15]=f[15],Eb));f=a.loA;fa.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(tc[0]=f[0],tc[1]=f[1],tc[2]=f[2],tc[3]=f[3],tc[4]=f[4],tc[5]=f[5],tc[6]=f[6],tc[7]=f[7],tc[8]=f[8],tc[9]=f[9],tc[10]=f[10],tc[11]=f[11],tc[12]=f[12],tc[13]=f[13],tc[14]=f[14],tc[15]=f[15],tc));f=a.hiA;fa.uniformMatrix4fv(ea.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wb[0]=f[0],wb[1]=f[1],wb[2]=f[2],wb[3]=f[3],wb[4]=f[4],wb[5]=
f[5],wb[6]=f[6],wb[7]=f[7],wb[8]=f[8],wb[9]=f[9],wb[10]=f[10],wb[11]=f[11],wb[12]=f[12],wb[13]=f[13],wb[14]=f[14],wb[15]=f[15],wb));f=a.loB;fa.uniformMatrix4fv(za.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(wc[0]=f[0],wc[1]=f[1],wc[2]=f[2],wc[3]=f[3],wc[4]=f[4],wc[5]=f[5],wc[6]=f[6],wc[7]=f[7],wc[8]=f[8],wc[9]=f[9],wc[10]=f[10],wc[11]=f[11],wc[12]=f[12],wc[13]=f[13],wc[14]=f[14],wc[15]=f[15],wc));f=a.hiB;fa.uniformMatrix4fv(T.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.loC;fa.uniformMatrix4fv(ha.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ic[0]=f[0],Ic[1]=f[1],Ic[2]=f[2],Ic[3]=f[3],Ic[4]=f[4],Ic[5]=f[5],Ic[6]=f[6],Ic[7]=f[7],Ic[8]=f[8],Ic[9]=f[9],Ic[10]=f[10],Ic[11]=f[11],Ic[12]=f[12],Ic[13]=f[13],Ic[14]=f[14],Ic[15]=f[15],Ic));f=a.hiC;fa.uniformMatrix4fv(la.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(lc[0]=f[0],lc[1]=f[1],lc[2]=f[2],lc[3]=f[3],lc[4]=f[4],lc[5]=f[5],lc[6]=f[6],lc[7]=f[7],lc[8]=f[8],lc[9]=f[9],lc[10]=f[10],lc[11]=f[11],lc[12]=f[12],lc[13]=f[13],lc[14]=f[14],lc[15]=f[15],lc));f=a.loD;fa.uniformMatrix4fv(Ea.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fc[0]=f[0],Fc[1]=f[1],Fc[2]=f[2],Fc[3]=f[3],Fc[4]=f[4],Fc[5]=f[5],Fc[6]=f[6],Fc[7]=f[7],Fc[8]=f[8],Fc[9]=f[9],Fc[10]=f[10],Fc[11]=f[11],Fc[12]=f[12],Fc[13]=f[13],Fc[14]=
f[14],Fc[15]=f[15],Fc));f=a.hiD;fa.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Wc[0]=f[0],Wc[1]=f[1],Wc[2]=f[2],Wc[3]=f[3],Wc[4]=f[4],Wc[5]=f[5],Wc[6]=f[6],Wc[7]=f[7],Wc[8]=f[8],Wc[9]=f[9],Wc[10]=f[10],Wc[11]=f[11],Wc[12]=f[12],Wc[13]=f[13],Wc[14]=f[14],Wc[15]=f[15],Wc));f=a.resolution;fa.uniform2f(na.location,f[0],f[1]);f=a.viewBoxPos;fa.uniform2f(ya.location,f[0],f[1]);f=a.viewBoxSize;fa.uniform2f(Ca.location,f[0],f[1]);fa.uniform1f(ja.location,a.maskHeight);fa.uniform1f(H.location,
a.drwLayer);f=a.contextColor;fa.uniform4f(S.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;fa.uniform1i(pa.location,f.bind());fa.uniform1i(Ga.location,w.bind());(l=Ka.elements)?fa.bindBuffer(34963,l.buffer.buffer):$b.currentVAO&&(l=Fa.getElements($b.currentVAO.elements))&&fa.bindBuffer(34963,l.buffer.buffer);e=a.offset;if(a=a.count)l?fa.drawElements(1,a,l.type,e<<(l.type-5121>>1)):fa.drawArrays(1,e,a),ua.dirty=!0,$b.setVAO(null),aa.viewportWidth=
c,aa.viewportHeight=p,ua.profile=d,f.unbind(),w.unbind()},scope:function(n,v,q){var r,I,L,N,e,K,ra,Ia,Ga,H,y,T,ac,ha,na,ba,S,ka,Q,D,ta,P,ea,ya,R,Ca,fa,xa,w,qa,za,ja,Z,Ta,ga,Aa,va,pa,Ea,oa,la,Gb,Da,dd,Fa,gb,hd,$a,ec,Eb,Oc,Ab,fc,oc,wb,Bb,be,Ae,mc,$b,$d,pc,cb,ab,Va,U,Gc,Qe,ld,lc,nb,Ec,te,ed,Fd,Kc,tc,xb,wc,yd,pd,Fc,Cc,Ic,Ud,md,Wd,Mb,Dd,Hc,Ye,Vc,Jf,Wc,he,se,ye,ce,Ad,ia,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,Ba,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,
Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,Ve,Td,ae,We,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Pe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=n.viewportHeight;$c.width=n.viewportWidth;$c.x=n.viewportX;$c.y=n.viewportY;
r=$c.x|0;I=$c.y|0;L="width"in $c?$c.width|0:aa.framebufferWidth-r;N="height"in $c?$c.height|0:aa.framebufferHeight-I;e=aa.viewportWidth;aa.viewportWidth=L;K=aa.viewportHeight;aa.viewportHeight=N;ra=Ld[0];Ld[0]=r;Ia=Ld[1];Ld[1]=I;Ga=Ld[2];Ld[2]=L;H=Ld[3];Ld[3]=N;y=Rb[0];Rb[0]=0;T=Rb[1];Rb[1]=0;ac=Rb[2];Rb[2]=0;ha=Rb[3];Rb[3]=0;na=zd.blend_enable;zd.blend_enable=!1;ba=Cd[0];Cd[0]=32774;S=Cd[1];Cd[1]=32774;ka=Vd[0];Vd[0]=770;Q=Vd[1];Vd[1]=771;D=Vd[2];Vd[2]=1;ta=Vd[3];Vd[3]=1;P=zd.cull_enable;zd.cull_enable=
!0;ea=zd.cull_face;zd.cull_face=1029;ya=zd.depth_enable;zd.depth_enable=!0;R=zd.depth_func;zd.depth_func=513;Ca=zd.depth_mask;zd.depth_mask=!0;fa=ne[0];ne[0]=0;xa=ne[1];ne[1]=1;w=zd.dither;zd.dither=!1;qa=zd.lineWidth;zd.lineWidth=2;sd.height=n.scissorHeight;sd.width=n.scissorWidth;sd.x=n.scissorX;sd.y=n.scissorY;za=sd.x|0;ja=sd.y|0;Z="width"in sd?sd.width|0:aa.framebufferWidth-za;Ta="height"in sd?sd.height|0:aa.framebufferHeight-ja;ga=ze[0];ze[0]=za;Aa=ze[1];ze[1]=ja;va=ze[2];ze[2]=Z;pa=ze[3];ze[3]=
Ta;Ea=zd.scissor_enable;zd.scissor_enable=!0;oa=ua.profile;ua.profile=!1;la=n.offset;Gb=Ka.offset;Ka.offset=la;Da=n.count;dd=Ka.count;Ka.count=Da;Fa=Ka.primitive;Ka.primitive=1;gb=n.contextColor;hd=Ha[24];Ha[24]=gb;$a=n.dim0A;ec=Ha[3];Ha[3]=$a;Eb=n.dim0B;Oc=Ha[5];Ha[5]=Eb;Ab=n.dim0C;fc=Ha[7];Ha[7]=Ab;oc=n.dim0D;wb=Ha[9];Ha[9]=oc;Bb=n.dim1A;be=Ha[4];Ha[4]=Bb;Ae=n.dim1B;mc=Ha[6];Ha[6]=Ae;$b=n.dim1C;$d=Ha[8];Ha[8]=$b;pc=n.dim1D;cb=Ha[10];Ha[10]=pc;ab=n.drwLayer;Va=Ha[23];Ha[23]=ab;U=n.hiA;Gc=Ha[12];
Ha[12]=U;Qe=n.hiB;ld=Ha[14];Ha[14]=Qe;lc=n.hiC;nb=Ha[16];Ha[16]=lc;Ec=n.hiD;te=Ha[18];Ha[18]=Ec;ed=n.loA;Fd=Ha[11];Ha[11]=ed;Kc=n.loB;tc=Ha[13];Ha[13]=Kc;xb=n.loC;wc=Ha[15];Ha[15]=xb;yd=n.loD;pd=Ha[17];Ha[17]=yd;Fc=n.maskHeight;Cc=Ha[22];Ha[22]=Fc;Ic=n.maskTexture;Ud=Ha[25];Ha[25]=Ic;md=Ha[26];Ha[26]=sa;Wd=n.resolution;Mb=Ha[19];Ha[19]=Wd;Dd=n.viewBoxPos;Hc=Ha[20];Ha[20]=Dd;Ye=n.viewBoxSize;Vc=Ha[21];Ha[21]=Ye;Jf=d.buffer;d.buffer=k;Wc=d.divisor;d.divisor=0;he=d.normalized;d.normalized=!1;se=d.offset;
d.offset=0;ye=d.size;d.size=0;ce=d.state;d.state=1;Ad=d.stride;d.stride=0;ia=d.type;d.type=k.dtype;Od=d.w;d.w=0;Id=d.x;d.x=0;Gd=d.y;d.y=0;od=d.z;d.z=0;Sc=z.buffer;z.buffer=M;vd=z.divisor;z.divisor=0;td=z.normalized;z.normalized=!1;kd=z.offset;z.offset=0;xd=z.size;z.size=0;Bd=z.state;z.state=1;Ed=z.stride;z.stride=0;Ba=z.type;z.type=M.dtype;qe=z.w;z.w=0;ue=z.x;z.x=0;ke=z.y;z.y=0;je=z.z;z.z=0;ie=W.buffer;W.buffer=m;ve=W.divisor;W.divisor=0;fe=W.normalized;W.normalized=!1;le=W.offset;W.offset=0;Nc=W.size;
W.size=0;gd=W.state;W.state=1;we=W.stride;W.stride=0;pe=W.type;W.type=m.dtype;Kd=W.w;W.w=0;Pd=W.x;W.x=0;Qd=W.y;W.y=0;Rd=W.z;W.z=0;me=f.buffer;f.buffer=g;He=f.divisor;f.divisor=0;Ce=f.normalized;f.normalized=!1;re=f.offset;f.offset=0;Re=f.size;f.size=0;Se=f.state;f.state=1;Ne=f.stride;f.stride=0;xe=f.type;f.type=g.dtype;Fe=f.w;f.w=0;Ie=f.x;f.x=0;Je=f.y;f.y=0;Ke=f.z;f.z=0;Ge=ca.buffer;ca.buffer=h;Md=ca.divisor;ca.divisor=0;Zd=ca.normalized;ca.normalized=!1;de=ca.offset;ca.offset=0;ge=ca.size;ca.size=
0;Le=ca.state;ca.state=1;Hd=ca.stride;ca.stride=0;Sd=ca.type;ca.type=h.dtype;De=ca.w;ca.w=0;Me=ca.x;ca.x=0;bf=ca.y;ca.y=0;af=ca.z;ca.z=0;Te=G.buffer;G.buffer=b;Oe=G.divisor;G.divisor=0;$e=G.normalized;G.normalized=!1;Xe=G.offset;G.offset=0;Ue=G.size;G.size=0;Ve=G.state;G.state=1;Td=G.stride;G.stride=0;ae=G.type;G.type=b.dtype;We=G.w;G.w=0;hf=G.x;G.x=0;nf=G.y;G.y=0;ef=G.z;G.z=0;jf=p.buffer;p.buffer=E;kf=p.divisor;p.divisor=0;lf=p.normalized;p.normalized=!1;rf=p.offset;p.offset=0;of=p.size;p.size=0;
sf=p.state;p.state=1;Bf=p.stride;p.stride=0;Cf=p.type;p.type=E.dtype;Pe=p.w;p.w=0;Ee=p.x;p.x=0;pf=p.y;p.y=0;qf=p.z;p.z=0;Df=da.buffer;da.buffer=J;Gf=da.divisor;da.divisor=0;Af=da.normalized;da.normalized=!1;Ef=da.offset;da.offset=0;Ff=da.size;da.size=0;wf=da.state;da.state=1;xf=da.stride;da.stride=0;vf=da.type;da.type=J.dtype;yf=da.w;da.w=0;zf=da.x;da.x=0;If=da.y;da.y=0;Kf=da.z;da.z=0;Lf=C.buffer;C.buffer=O;Mf=C.divisor;C.divisor=0;tf=C.normalized;C.normalized=!1;Rf=C.offset;C.offset=0;Hf=C.size;
C.size=0;uf=C.state;C.state=1;dg=C.stride;C.stride=0;Sf=C.type;C.type=O.dtype;Tf=C.w;C.w=0;qg=C.x;C.x=0;ff=C.y;C.y=0;cf=C.z;C.z=0;Nf=B.buffer;B.buffer=X;Of=B.divisor;B.divisor=0;eg=B.normalized;B.normalized=!1;fg=B.offset;B.offset=0;gg=B.size;B.size=0;hg=B.state;B.state=1;ig=B.stride;B.stride=0;Wf=B.type;B.type=X.dtype;Uf=B.w;B.w=0;Xf=B.x;B.x=0;Yf=B.y;B.y=0;Zf=B.z;B.z=0;jg=c.buffer;c.buffer=x;rg=c.divisor;c.divisor=0;sg=c.normalized;c.normalized=!1;tg=c.offset;c.offset=0;ug=c.size;c.size=0;vg=c.state;
c.state=1;wg=c.stride;c.stride=0;xg=c.type;c.type=x.dtype;yg=c.w;c.w=0;zg=c.x;c.x=0;Ag=c.y;c.y=0;Bg=c.z;c.z=0;gf=l.buffer;l.buffer=u;df=l.divisor;l.divisor=0;Pf=l.normalized;l.normalized=!1;Qf=l.offset;l.offset=0;kg=l.size;l.size=0;lg=l.state;l.state=1;mg=l.stride;l.stride=0;ng=l.type;l.type=u.dtype;og=l.w;l.w=0;$f=l.x;l.x=0;Vf=l.y;l.y=0;ag=l.z;l.z=0;bg=a.buffer;a.buffer=F;cg=a.divisor;a.divisor=0;pg=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;
a.stride=0;Gg=a.type;a.type=F.dtype;Hg=a.w;a.w=0;Ig=a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=wa.buffer;wa.buffer=Y;Mg=wa.divisor;wa.divisor=0;Ng=wa.normalized;wa.normalized=!1;Og=wa.offset;wa.offset=0;Pg=wa.size;wa.size=0;Qg=wa.state;wa.state=1;Rg=wa.stride;wa.stride=0;Sg=wa.type;wa.type=Y.dtype;Tg=wa.w;wa.w=0;Ug=wa.x;wa.x=0;Vg=wa.y;wa.y=0;Wg=wa.z;wa.z=0;Xg=A.buffer;A.buffer=t;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=
A.stride;A.stride=0;dh=A.type;A.type=t.dtype;eh=A.w;A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ma.buffer;ma.buffer=V;jh=ma.divisor;ma.divisor=0;kh=ma.normalized;ma.normalized=!1;lh=ma.offset;ma.offset=0;mh=ma.size;ma.size=0;nh=ma.state;ma.state=1;oh=ma.stride;ma.stride=0;ph=ma.type;ma.type=V.dtype;qh=ma.w;ma.w=0;rh=ma.x;ma.x=0;sh=ma.y;ma.y=0;th=ma.z;ma.z=0;uh=Zb.vert;Zb.vert=2;vh=Zb.frag;Zb.frag=1;ua.dirty=!0;v(aa,n,q);aa.viewportWidth=e;aa.viewportHeight=K;Ld[0]=ra;Ld[1]=Ia;Ld[2]=Ga;Ld[3]=H;
Rb[0]=y;Rb[1]=T;Rb[2]=ac;Rb[3]=ha;zd.blend_enable=na;Cd[0]=ba;Cd[1]=S;Vd[0]=ka;Vd[1]=Q;Vd[2]=D;Vd[3]=ta;zd.cull_enable=P;zd.cull_face=ea;zd.depth_enable=ya;zd.depth_func=R;zd.depth_mask=Ca;ne[0]=fa;ne[1]=xa;zd.dither=w;zd.lineWidth=qa;ze[0]=ga;ze[1]=Aa;ze[2]=va;ze[3]=pa;zd.scissor_enable=Ea;ua.profile=oa;Ka.offset=Gb;Ka.count=dd;Ka.primitive=Fa;Ha[24]=hd;Ha[3]=ec;Ha[5]=Oc;Ha[7]=fc;Ha[9]=wb;Ha[4]=be;Ha[6]=mc;Ha[8]=$d;Ha[10]=cb;Ha[23]=Va;Ha[12]=Gc;Ha[14]=ld;Ha[16]=nb;Ha[18]=te;Ha[11]=Fd;Ha[13]=tc;Ha[15]=
wc;Ha[17]=pd;Ha[22]=Cc;Ha[25]=Ud;Ha[26]=md;Ha[19]=Mb;Ha[20]=Hc;Ha[21]=Vc;d.buffer=Jf;d.divisor=Wc;d.normalized=he;d.offset=se;d.size=ye;d.state=ce;d.stride=Ad;d.type=ia;d.w=Od;d.x=Id;d.y=Gd;d.z=od;z.buffer=Sc;z.divisor=vd;z.normalized=td;z.offset=kd;z.size=xd;z.state=Bd;z.stride=Ed;z.type=Ba;z.w=qe;z.x=ue;z.y=ke;z.z=je;W.buffer=ie;W.divisor=ve;W.normalized=fe;W.offset=le;W.size=Nc;W.state=gd;W.stride=we;W.type=pe;W.w=Kd;W.x=Pd;W.y=Qd;W.z=Rd;f.buffer=me;f.divisor=He;f.normalized=Ce;f.offset=re;f.size=
Re;f.state=Se;f.stride=Ne;f.type=xe;f.w=Fe;f.x=Ie;f.y=Je;f.z=Ke;ca.buffer=Ge;ca.divisor=Md;ca.normalized=Zd;ca.offset=de;ca.size=ge;ca.state=Le;ca.stride=Hd;ca.type=Sd;ca.w=De;ca.x=Me;ca.y=bf;ca.z=af;G.buffer=Te;G.divisor=Oe;G.normalized=$e;G.offset=Xe;G.size=Ue;G.state=Ve;G.stride=Td;G.type=ae;G.w=We;G.x=hf;G.y=nf;G.z=ef;p.buffer=jf;p.divisor=kf;p.normalized=lf;p.offset=rf;p.size=of;p.state=sf;p.stride=Bf;p.type=Cf;p.w=Pe;p.x=Ee;p.y=pf;p.z=qf;da.buffer=Df;da.divisor=Gf;da.normalized=Af;da.offset=
Ef;da.size=Ff;da.state=wf;da.stride=xf;da.type=vf;da.w=yf;da.x=zf;da.y=If;da.z=Kf;C.buffer=Lf;C.divisor=Mf;C.normalized=tf;C.offset=Rf;C.size=Hf;C.state=uf;C.stride=dg;C.type=Sf;C.w=Tf;C.x=qg;C.y=ff;C.z=cf;B.buffer=Nf;B.divisor=Of;B.normalized=eg;B.offset=fg;B.size=gg;B.state=hg;B.stride=ig;B.type=Wf;B.w=Uf;B.x=Xf;B.y=Yf;B.z=Zf;c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;l.buffer=gf;l.divisor=df;l.normalized=Pf;l.offset=
Qf;l.size=kg;l.state=lg;l.stride=mg;l.type=ng;l.w=og;l.x=$f;l.y=Vf;l.z=ag;a.buffer=bg;a.divisor=cg;a.normalized=pg;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;wa.buffer=Lg;wa.divisor=Mg;wa.normalized=Ng;wa.offset=Og;wa.size=Pg;wa.state=Qg;wa.stride=Rg;wa.type=Sg;wa.w=Tg;wa.x=Ug;wa.y=Vg;wa.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ma.buffer=ih;ma.divisor=jh;ma.normalized=kh;
ma.offset=lh;ma.size=mh;ma.state=nh;ma.stride=oh;ma.type=ph;ma.w=qh;ma.x=rh;ma.y=sh;ma.z=th;Zb.vert=uh;Zb.frag=vh;ua.dirty=!0}}},$1:function(e,R){var D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c;D=e.attributes;M=e.current;m=e.framebuffer;g=e.gl;h=e.next;b=e.vao;E=h.blend_color;J=M.blend_color;O=h.blend_equation;X=M.blend_equation;x=h.blend_func;u=M.blend_func;F=h.colorMask;Y=M.colorMask;t=h.depth_range;V=M.depth_range;k=h.polygonOffset_offset;w=M.polygonOffset_offset;sa=h.sample_coverage;
d=M.sample_coverage;z=h.scissor_box;W=M.scissor_box;f=h.stencil_func;ca=M.stencil_func;G=h.stencil_opBack;p=M.stencil_opBack;da=h.stencil_opFront;C=M.stencil_opFront;B=h.viewport;c=M.viewport;return{poll:function(){var b,a,e,A,D,R,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa;M.dirty=!1;a=h.blend_enable;e=h.cull_enable;A=h.depth_enable;D=h.dither;R=h.polygonOffset_enable;Z=h.sample_alpha;ga=h.sample_enable;S=h.scissor_enable;K=h.stencil_enable;y=h.cull_face;q=M.cull_face;P=h.depth_func;Q=M.depth_func;xa=
h.depth_mask;oa=M.depth_mask;n=h.frontFace;H=M.frontFace;ea=h.lineWidth;T=M.lineWidth;la=h.stencil_mask;qa=M.stencil_mask;b=m.next;b!==m.cur&&(b?g.bindFramebuffer(36160,b.framebuffer):g.bindFramebuffer(36160,null),m.cur=b);a!==M.blend_enable&&(a?g.enable(3042):g.disable(3042),M.blend_enable=a);e!==M.cull_enable&&(e?g.enable(2884):g.disable(2884),M.cull_enable=e);A!==M.depth_enable&&(A?g.enable(2929):g.disable(2929),M.depth_enable=A);D!==M.dither&&(D?g.enable(3024):g.disable(3024),M.dither=D);R!==
M.polygonOffset_enable&&(R?g.enable(32823):g.disable(32823),M.polygonOffset_enable=R);Z!==M.sample_alpha&&(Z?g.enable(32926):g.disable(32926),M.sample_alpha=Z);ga!==M.sample_enable&&(ga?g.enable(32928):g.disable(32928),M.sample_enable=ga);S!==M.scissor_enable&&(S?g.enable(3089):g.disable(3089),M.scissor_enable=S);K!==M.stencil_enable&&(K?g.enable(2960):g.disable(2960),M.stencil_enable=K);if(E[0]!==J[0]||E[1]!==J[1]||E[2]!==J[2]||E[3]!==J[3])g.blendColor(E[0],E[1],E[2],E[3]),J[0]=E[0],J[1]=E[1],J[2]=
E[2],J[3]=E[3];if(O[0]!==X[0]||O[1]!==X[1])g.blendEquationSeparate(O[0],O[1]),X[0]=O[0],X[1]=O[1];if(x[0]!==u[0]||x[1]!==u[1]||x[2]!==u[2]||x[3]!==u[3])g.blendFuncSeparate(x[0],x[1],x[2],x[3]),u[0]=x[0],u[1]=x[1],u[2]=x[2],u[3]=x[3];if(F[0]!==Y[0]||F[1]!==Y[1]||F[2]!==Y[2]||F[3]!==Y[3])g.colorMask(F[0],F[1],F[2],F[3]),Y[0]=F[0],Y[1]=F[1],Y[2]=F[2],Y[3]=F[3];y!==q&&(g.cullFace(y),M.cull_face=y);P!==Q&&(g.depthFunc(P),M.depth_func=P);xa!==oa&&(g.depthMask(xa),M.depth_mask=xa);if(t[0]!==V[0]||t[1]!==
V[1])g.depthRange(t[0],t[1]),V[0]=t[0],V[1]=t[1];n!==H&&(g.frontFace(n),M.frontFace=n);ea!==T&&(g.lineWidth(ea),M.lineWidth=ea);if(k[0]!==w[0]||k[1]!==w[1])g.polygonOffset(k[0],k[1]),w[0]=k[0],w[1]=k[1];if(sa[0]!==d[0]||sa[1]!==d[1])g.sampleCoverage(sa[0],sa[1]),d[0]=sa[0],d[1]=sa[1];if(z[0]!==W[0]||z[1]!==W[1]||z[2]!==W[2]||z[3]!==W[3])g.scissor(z[0],z[1],z[2],z[3]),W[0]=z[0],W[1]=z[1],W[2]=z[2],W[3]=z[3];if(f[0]!==ca[0]||f[1]!==ca[1]||f[2]!==ca[2])g.stencilFunc(f[0],f[1],f[2]),ca[0]=f[0],ca[1]=
f[1],ca[2]=f[2];la!==qa&&(g.stencilMask(la),M.stencil_mask=la);if(G[0]!==p[0]||G[1]!==p[1]||G[2]!==p[2]||G[3]!==p[3])g.stencilOpSeparate(G[0],G[1],G[2],G[3]),p[0]=G[0],p[1]=G[1],p[2]=G[2],p[3]=G[3];if(da[0]!==C[0]||da[1]!==C[1]||da[2]!==C[2]||da[3]!==C[3])g.stencilOpSeparate(da[0],da[1],da[2],da[3]),C[0]=da[0],C[1]=da[1],C[2]=da[2],C[3]=da[3];if(B[0]!==c[0]||B[1]!==c[1]||B[2]!==c[2]||B[3]!==c[3])g.viewport(B[0],B[1],B[2],B[3]),c[0]=B[0],c[1]=B[1],c[2]=B[2],c[3]=B[3]},refresh:function(){var l,a,e,
A,ma,hd,Z,ga,S,K,y,q,P,Q,xa,oa;M.dirty=!1;a=h.blend_enable;e=h.cull_enable;A=h.depth_enable;ma=h.dither;hd=h.polygonOffset_enable;Z=h.sample_alpha;ga=h.sample_enable;S=h.scissor_enable;K=h.stencil_enable;y=h.cull_face;q=h.depth_func;P=h.depth_mask;Q=h.frontFace;xa=h.lineWidth;oa=h.stencil_mask;(l=m.next)?g.bindFramebuffer(36160,l.framebuffer):g.bindFramebuffer(36160,null);m.cur=l;l=D[0];l.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(0,l.size,l.type,
l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(0,l.divisor);l=D[1];l.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(1,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(1),g.vertexAttrib4f(1,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(1,l.divisor);l=D[2];l.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,l.buffer.buffer),
g.vertexAttribPointer(2,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(2,l.divisor);l=D[3];l.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(3,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(3,l.divisor);l=D[4];l.buffer?(g.enableVertexAttribArray(4),
g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(4,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(4,l.divisor);l=D[5];l.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(5,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(5,l.divisor);
l=D[6];l.buffer?(g.enableVertexAttribArray(6),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(6,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(6,l.divisor);l=D[7];l.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(7,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,l.x,l.y,l.z,l.w),l.buffer=
null);R.vertexAttribDivisorANGLE(7,l.divisor);l=D[8];l.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(8,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(8,l.divisor);l=D[9];l.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(9,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(9),
g.vertexAttrib4f(9,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(9,l.divisor);l=D[10];l.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(10,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(10,l.divisor);l=D[11];l.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(11,l.size,l.type,l.normalized,
l.stride,l.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(11,l.divisor);l=D[12];l.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(12,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(12,l.divisor);l=D[13];l.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,l.buffer.buffer),
g.vertexAttribPointer(13,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(13,l.divisor);l=D[14];l.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(14,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(14),g.vertexAttrib4f(14,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(14,l.divisor);l=D[15];l.buffer?(g.enableVertexAttribArray(15),
g.bindBuffer(34962,l.buffer.buffer),g.vertexAttribPointer(15,l.size,l.type,l.normalized,l.stride,l.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,l.x,l.y,l.z,l.w),l.buffer=null);R.vertexAttribDivisorANGLE(15,l.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);a?g.enable(3042):g.disable(3042);M.blend_enable=a;e?g.enable(2884):g.disable(2884);M.cull_enable=e;A?g.enable(2929):g.disable(2929);M.depth_enable=A;ma?g.enable(3024):g.disable(3024);M.dither=ma;hd?g.enable(32823):g.disable(32823);
M.polygonOffset_enable=hd;Z?g.enable(32926):g.disable(32926);M.sample_alpha=Z;ga?g.enable(32928):g.disable(32928);M.sample_enable=ga;S?g.enable(3089):g.disable(3089);M.scissor_enable=S;K?g.enable(2960):g.disable(2960);M.stencil_enable=K;g.blendColor(E[0],E[1],E[2],E[3]);J[0]=E[0];J[1]=E[1];J[2]=E[2];J[3]=E[3];g.blendEquationSeparate(O[0],O[1]);X[0]=O[0];X[1]=O[1];g.blendFuncSeparate(x[0],x[1],x[2],x[3]);u[0]=x[0];u[1]=x[1];u[2]=x[2];u[3]=x[3];g.colorMask(F[0],F[1],F[2],F[3]);Y[0]=F[0];Y[1]=F[1];Y[2]=
F[2];Y[3]=F[3];g.cullFace(y);M.cull_face=y;g.depthFunc(q);M.depth_func=q;g.depthMask(P);M.depth_mask=P;g.depthRange(t[0],t[1]);V[0]=t[0];V[1]=t[1];g.frontFace(Q);M.frontFace=Q;g.lineWidth(xa);M.lineWidth=xa;g.polygonOffset(k[0],k[1]);w[0]=k[0];w[1]=k[1];g.sampleCoverage(sa[0],sa[1]);d[0]=sa[0];d[1]=sa[1];g.scissor(z[0],z[1],z[2],z[3]);W[0]=z[0];W[1]=z[1];W[2]=z[2];W[3]=z[3];g.stencilFunc(f[0],f[1],f[2]);ca[0]=f[0];ca[1]=f[1];ca[2]=f[2];g.stencilMask(oa);M.stencil_mask=oa;g.stencilOpSeparate(G[0],
G[1],G[2],G[3]);p[0]=G[0];p[1]=G[1];p[2]=G[2];p[3]=G[3];g.stencilOpSeparate(da[0],da[1],da[2],da[3]);C[0]=da[0];C[1]=da[1];C[2]=da[2];C[3]=da[3];g.viewport(B[0],B[1],B[2],B[3]);c[0]=B[0];c[1]=B[1];c[2]=B[2];c[3]=B[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,hd,Z,ga,S,K,y,q,P,Q,xa,oa){var n,H,ea,T,la,qa,
Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,dd,Gb,ba,I,ra,Ga,na,ya,Ca,ka,aa,ua,Ka,Fa,gb,fa,zd,Zb,Ha,$b,Rb;n=e.attributes;H=e.buffer;ea=e.context;T=e.current;la=e.draw;qa=e.elements;Da=e.extensions;za=e.framebuffer;ha=e.gl;Ea=e.isBufferArgs;ja=e.next;pa=e.shader;Aa=e.uniforms;Ia=e.vao;L=ja.blend_color;ac=T.blend_color;Ta=ja.blend_equation;v=T.blend_equation;r=ja.blend_func;N=T.blend_func;ta=ja.colorMask;va=T.colorMask;dd=ja.depth_range;Gb=T.depth_range;ba=ja.polygonOffset_offset;I=T.polygonOffset_offset;
ra=ja.sample_coverage;Ga=T.sample_coverage;na=ja.scissor_box;ya=T.scissor_box;Ca=ja.stencil_func;ka=T.stencil_func;aa=ja.stencil_opBack;ua=T.stencil_opBack;Ka=ja.stencil_opFront;Fa=T.stencil_opFront;gb=ja.viewport;fa=T.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Zb={};Zb.buffer=D;Zb.divisor=1;Ha={};Ha.buffer=M;Ha.divisor=1;$b={};$b.buffer=m;$b.divisor=1;Rb={};Rb.buffer=g;Rb.divisor=1;return{batch:function(b,d){var g,f,h,r,L,e;g=za.next;
g!==za.cur&&(g?ha.bindFramebuffer(36160,g.framebuffer):ha.bindFramebuffer(36160,null),za.cur=g);if(T.dirty){var k,m,z,t,G,na,D,M,J,w,F,E,W,O,V,Ta,ca,Aa,Y,pa,sa,gb,U,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc;k=ja.dither;k!==T.dither&&(k?ha.enable(3024):ha.disable(3024),T.dither=k);m=ja.depth_func;m!==T.depth_func&&(ha.depthFunc(m),T.depth_func=m);z=dd[0];t=dd[1];if(z!==Gb[0]||t!==Gb[1])ha.depthRange(z,t),Gb[0]=z,Gb[1]=t;G=ja.depth_mask;G!==T.depth_mask&&(ha.depthMask(G),T.depth_mask=G);na=ta[0];D=ta[1];M=ta[2];
J=ta[3];if(na!==va[0]||D!==va[1]||M!==va[2]||J!==va[3])ha.colorMask(na,D,M,J),va[0]=na,va[1]=D,va[2]=M,va[3]=J;w=ja.cull_enable;w!==T.cull_enable&&(w?ha.enable(2884):ha.disable(2884),T.cull_enable=w);F=ja.cull_face;F!==T.cull_face&&(ha.cullFace(F),T.cull_face=F);E=ja.frontFace;E!==T.frontFace&&(ha.frontFace(E),T.frontFace=E);W=ja.lineWidth;W!==T.lineWidth&&(ha.lineWidth(W),T.lineWidth=W);O=ja.polygonOffset_enable;O!==T.polygonOffset_enable&&(O?ha.enable(32823):ha.disable(32823),T.polygonOffset_enable=
O);V=ba[0];Ta=ba[1];if(V!==I[0]||Ta!==I[1])ha.polygonOffset(V,Ta),I[0]=V,I[1]=Ta;ca=ja.sample_alpha;ca!==T.sample_alpha&&(ca?ha.enable(32926):ha.disable(32926),T.sample_alpha=ca);Aa=ja.sample_enable;Aa!==T.sample_enable&&(Aa?ha.enable(32928):ha.disable(32928),T.sample_enable=Aa);Y=ra[0];pa=ra[1];if(Y!==Ga[0]||pa!==Ga[1])ha.sampleCoverage(Y,pa),Ga[0]=Y,Ga[1]=pa;sa=ja.stencil_enable;sa!==T.stencil_enable&&(sa?ha.enable(2960):ha.disable(2960),T.stencil_enable=sa);gb=ja.stencil_mask;gb!==T.stencil_mask&&
(ha.stencilMask(gb),T.stencil_mask=gb);U=Ca[0];Ab=Ca[1];Eb=Ca[2];if(U!==ka[0]||Ab!==ka[1]||Eb!==ka[2])ha.stencilFunc(U,Ab,Eb),ka[0]=U,ka[1]=Ab,ka[2]=Eb;tc=Ka[0];wb=Ka[1];wc=Ka[2];Bb=Ka[3];if(tc!==Fa[0]||wb!==Fa[1]||wc!==Fa[2]||Bb!==Fa[3])ha.stencilOpSeparate(tc,wb,wc,Bb),Fa[0]=tc,Fa[1]=wb,Fa[2]=wc,Fa[3]=Bb;Ic=aa[0];lc=aa[1];Fc=aa[2];Wc=aa[3];if(Ic!==ua[0]||lc!==ua[1]||Fc!==ua[2]||Wc!==ua[3])ha.stencilOpSeparate(Ic,lc,Fc,Wc),ua[0]=Ic,ua[1]=lc,ua[2]=Fc,ua[3]=Wc}ha.blendColor(0,0,0,0);ac[0]=0;ac[1]=
0;ac[2]=0;ac[3]=0;ha.enable(3042);T.blend_enable=!0;ha.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ha.blendFuncSeparate(770,771,773,1);N[0]=770;N[1]=771;N[2]=773;N[3]=1;ha.disable(2929);T.depth_enable=!1;ha.enable(3089);T.scissor_enable=!0;if(f=T.profile)h=performance.now(),R.count+=d;ha.useProgram(p.program);r=Da.angle_instanced_arrays;var Vc,Cc,ec,Gc,oc,pc,mc,fc;Ia.setVAO(null);Vc=ma.location;Cc=n[Vc];Cc.buffer||ha.enableVertexAttribArray(Vc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==
X||!1!==Cc.normalized||0!==Cc.offset||24!==Cc.stride)ha.bindBuffer(34962,X.buffer),ha.vertexAttribPointer(Vc,2,5126,!1,24,0),Cc.type=5126,Cc.size=2,Cc.buffer=X,Cc.normalized=!1,Cc.offset=0,Cc.stride=24;0!==Cc.divisor&&(r.vertexAttribDivisorANGLE(Vc,0),Cc.divisor=0);ec=Z.location;Gc=n[ec];Gc.buffer||ha.enableVertexAttribArray(ec);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==x||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)ha.bindBuffer(34962,x.buffer),ha.vertexAttribPointer(ec,2,5126,!1,24,8),Gc.type=
5126,Gc.size=2,Gc.buffer=x,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(r.vertexAttribDivisorANGLE(ec,0),Gc.divisor=0);oc=a.location;pc=n[oc];pc.buffer||ha.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==u||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)ha.bindBuffer(34962,u.buffer),ha.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=u,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(r.vertexAttribDivisorANGLE(oc,0),pc.divisor=
0);(mc=la.elements)?ha.bindBuffer(34963,mc.buffer.buffer):Ia.currentVAO&&(mc=qa.getElements(Ia.currentVAO.elements))&&ha.bindBuffer(34963,mc.buffer.buffer);fc=la.offset;for(L=0;L<d;++L){e=b[L];var $a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,ia,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,
id,rd,Ze,Be,jd,Ba,Nd,Yd,ee,Od,Id,Gd,od,Sc;$a=e.viewport;Hc=$a.x|0;xb=$a.y|0;cb="width"in $a?$a.width|0:ea.framebufferWidth-Hc;Mb="height"in $a?$a.height|0:ea.framebufferHeight-xb;ab=ea.viewportWidth;ea.viewportWidth=cb;nb=ea.viewportHeight;ea.viewportHeight=Mb;ha.viewport(Hc,xb,cb,Mb);fa[0]=Hc;fa[1]=xb;fa[2]=cb;fa[3]=Mb;Va=e.viewport;Tc=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:ea.framebufferWidth-Tc;qc="height"in Va?Va.height|0:ea.framebufferHeight-Hb;ha.scissor(Tc,Hb,Ib,qc);ya[0]=Tc;ya[1]=Hb;
ya[2]=Ib;ya[3]=qc;Nb=da.call(this,ea,e,L);$b.offset=Nb;jb=!1;Fb=null;Cb=0;vb=!1;Xb=hb=0;Ob=1;pb=0;Ua=5126;ib=bc=yb=Tb=0;Ea($b)?(jb=!0,Fb=H.createStream(34962,$b),Ua=Fb.dtype):(Fb=H.getBuffer($b))?Ua=Fb.dtype:"constant"in $b?(Ob=2,"number"===typeof $b.constant?(yb=$b.constant,bc=ib=Tb=0):(yb=0<$b.constant.length?$b.constant[0]:0,bc=1<$b.constant.length?$b.constant[1]:0,ib=2<$b.constant.length?$b.constant[2]:0,Tb=3<$b.constant.length?$b.constant[3]:0)):(Fb=Ea($b.buffer)?H.createStream(34962,$b.buffer):
H.getBuffer($b.buffer),Ua="type"in $b?zd[$b.type]:Fb.dtype,vb=!!$b.normalized,Xb=$b.size|0,hb=$b.offset|0,pb=$b.stride|0,Cb=$b.divisor|0);ob=K.location;Ja=n[ob];if(1===Ob){Ja.buffer||ha.enableVertexAttribArray(ob);qb=Xb||2;if(Ja.type!==Ua||Ja.size!==qb||Ja.buffer!==Fb||Ja.normalized!==vb||Ja.offset!==hb||Ja.stride!==pb)ha.bindBuffer(34962,Fb.buffer),ha.vertexAttribPointer(ob,qb,Ua,vb,pb,hb),Ja.type=Ua,Ja.size=qb,Ja.buffer=Fb,Ja.normalized=vb,Ja.offset=hb,Ja.stride=pb;Ja.divisor!==Cb&&(r.vertexAttribDivisorANGLE(ob,
Cb),Ja.divisor=Cb)}else if(Ja.buffer&&(ha.disableVertexAttribArray(ob),Ja.buffer=null),Ja.x!==yb||Ja.y!==bc||Ja.z!==ib||Ja.w!==Tb)ha.vertexAttrib4f(ob,yb,bc,ib,Tb),Ja.x=yb,Ja.y=bc,Ja.z=ib,Ja.w=Tb;La=C.call(this,ea,e,L);Rb.offset=La;eb=!1;fb=null;Ma=0;kb=!1;sb=Wa=0;rb=1;Pa=0;Bc=5126;Na=Db=Jb=Ra=0;Ea(Rb)?(eb=!0,fb=H.createStream(34962,Rb),Bc=fb.dtype):(fb=H.getBuffer(Rb))?Bc=fb.dtype:"constant"in Rb?(rb=2,"number"===typeof Rb.constant?(Jb=Rb.constant,Db=Na=Ra=0):(Jb=0<Rb.constant.length?Rb.constant[0]:
0,Db=1<Rb.constant.length?Rb.constant[1]:0,Na=2<Rb.constant.length?Rb.constant[2]:0,Ra=3<Rb.constant.length?Rb.constant[3]:0)):(fb=Ea(Rb.buffer)?H.createStream(34962,Rb.buffer):H.getBuffer(Rb.buffer),Bc="type"in Rb?zd[Rb.type]:fb.dtype,kb=!!Rb.normalized,sb=Rb.size|0,Wa=Rb.offset|0,Pa=Rb.stride|0,Ma=Rb.divisor|0);Jd=y.location;Ya=n[Jd];if(1===rb){Ya.buffer||ha.enableVertexAttribArray(Jd);Kb=sb||2;if(Ya.type!==Bc||Ya.size!==Kb||Ya.buffer!==fb||Ya.normalized!==kb||Ya.offset!==Wa||Ya.stride!==Pa)ha.bindBuffer(34962,
fb.buffer),ha.vertexAttribPointer(Jd,Kb,Bc,kb,Pa,Wa),Ya.type=Bc,Ya.size=Kb,Ya.buffer=fb,Ya.normalized=kb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==Ma&&(r.vertexAttribDivisorANGLE(Jd,Ma),Ya.divisor=Ma)}else if(Ya.buffer&&(ha.disableVertexAttribArray(Jd),Ya.buffer=null),Ya.x!==Jb||Ya.y!==Db||Ya.z!==Na||Ya.w!==Ra)ha.vertexAttrib4f(Jd,Jb,Db,Na,Ra),Ya.x=Jb,Ya.y=Db,Ya.z=Na,Ya.w=Ra;Lb=B.call(this,ea,e,L);Ha.offset=Lb;lb=!1;Oa=null;Yb=0;Qa=!1;ub=tb=0;Sa=1;mb=0;gc=5126;jc=bb=uc=zc=0;Ea(Ha)?(lb=!0,Oa=H.createStream(34962,
Ha),gc=Oa.dtype):(Oa=H.getBuffer(Ha))?gc=Oa.dtype:"constant"in Ha?(Sa=2,"number"===typeof Ha.constant?(uc=Ha.constant,bb=jc=zc=0):(uc=0<Ha.constant.length?Ha.constant[0]:0,bb=1<Ha.constant.length?Ha.constant[1]:0,jc=2<Ha.constant.length?Ha.constant[2]:0,zc=3<Ha.constant.length?Ha.constant[3]:0)):(Oa=Ea(Ha.buffer)?H.createStream(34962,Ha.buffer):H.getBuffer(Ha.buffer),gc="type"in Ha?zd[Ha.type]:Oa.dtype,Qa=!!Ha.normalized,ub=Ha.size|0,tb=Ha.offset|0,mb=Ha.stride|0,Yb=Ha.divisor|0);nd=hd.location;Xa=
n[nd];if(1===Sa){Xa.buffer||ha.enableVertexAttribArray(nd);Lc=ub||4;if(Xa.type!==gc||Xa.size!==Lc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)ha.bindBuffer(34962,Oa.buffer),ha.vertexAttribPointer(nd,Lc,gc,Qa,mb,tb),Xa.type=gc,Xa.size=Lc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Yb&&(r.vertexAttribDivisorANGLE(nd,Yb),Xa.divisor=Yb)}else if(Xa.buffer&&(ha.disableVertexAttribArray(nd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)ha.vertexAttrib4f(nd,
uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;zb=c.call(this,ea,e,L);Zb.offset=zb;Za=!1;Ub=null;sc=0;Vb=!1;Jc=Pb=0;Qb=1;ia=0;Dc=5126;qd=fd=Mc=ud=0;Ea(Zb)?(Za=!0,Ub=H.createStream(34962,Zb),Dc=Ub.dtype):(Ub=H.getBuffer(Zb))?Dc=Ub.dtype:"constant"in Zb?(Qb=2,"number"===typeof Zb.constant?(Mc=Zb.constant,fd=qd=ud=0):(Mc=0<Zb.constant.length?Zb.constant[0]:0,fd=1<Zb.constant.length?Zb.constant[1]:0,qd=2<Zb.constant.length?Zb.constant[2]:0,ud=3<Zb.constant.length?Zb.constant[3]:0)):(Ub=Ea(Zb.buffer)?H.createStream(34962,
Zb.buffer):H.getBuffer(Zb.buffer),Dc="type"in Zb?zd[Zb.type]:Ub.dtype,Vb=!!Zb.normalized,Jc=Zb.size|0,Pb=Zb.offset|0,ia=Zb.stride|0,sc=Zb.divisor|0);nc=A.location;vc=n[nc];if(1===Qb){vc.buffer||ha.enableVertexAttribArray(nc);hc=Jc||4;if(vc.type!==Dc||vc.size!==hc||vc.buffer!==Ub||vc.normalized!==Vb||vc.offset!==Pb||vc.stride!==ia)ha.bindBuffer(34962,Ub.buffer),ha.vertexAttribPointer(nc,hc,Dc,Vb,ia,Pb),vc.type=Dc,vc.size=hc,vc.buffer=Ub,vc.normalized=Vb,vc.offset=Pb,vc.stride=ia;vc.divisor!==sc&&(r.vertexAttribDivisorANGLE(nc,
sc),vc.divisor=sc)}else if(vc.buffer&&(ha.disableVertexAttribArray(nc),vc.buffer=null),vc.x!==Mc||vc.y!==fd||vc.z!==qd||vc.w!==ud)ha.vertexAttrib4f(nc,Mc,fd,qd,ud),vc.x=Mc,vc.y=fd,vc.z=qd,vc.w=ud;db=l.call(this,ea,e,L);rc=db[0];Wb=db[1];ic=db[2];Ac=db[3];L&&Sb===rc&&dc===Wb&&xc===ic&&ad===Ac||(Sb=rc,dc=Wb,xc=ic,ad=Ac,ha.uniform4f(oa.location,rc,Wb,ic,Ac));Pc=e.lineWidth;L&&Qc===Pc||(Qc=Pc,ha.uniform1f(ga.location,Pc));Rc=e.capSize;L&&Xc===Rc||(Xc=Rc,ha.uniform1f(wa.location,Rc));wd=e.scale;bd=wd[0];
kc=wd[1];L&&Yc===bd&&cc===kc||(Yc=bd,cc=kc,ha.uniform2f(q.location,bd,kc));Zc=e.scaleFract;Uc=Zc[0];yc=Zc[1];L&&cd===Uc&&id===yc||(cd=Uc,id=yc,ha.uniform2f(P.location,Uc,yc));rd=e.translate;Ze=rd[0];jd=rd[1];L&&Be===Ze&&Ba===jd||(Be=Ze,Ba=jd,ha.uniform2f(Q.location,Ze,jd));Nd=e.translateFract;Yd=Nd[0];Od=Nd[1];L&&ee===Yd&&Id===Od||(ee=Yd,Id=Od,ha.uniform2f(xa.location,Yd,Od));Gd=e.opacity;L&&od===Gd||(od=Gd,ha.uniform1f(S.location,Gd));Sc=e.count;0<Sc?mc?r.drawElementsInstancedANGLE(4,36,mc.type,
fc<<(mc.type-5121>>1),Sc):r.drawArraysInstancedANGLE(4,fc,36,Sc):0>Sc&&(mc?ha.drawElements(4,36,mc.type,fc<<(mc.type-5121>>1)):ha.drawArrays(4,fc,36));ea.viewportWidth=ab;ea.viewportHeight=nb;jb&&H.destroyStream(Fb);eb&&H.destroyStream(fb);lb&&H.destroyStream(Oa);Za&&H.destroyStream(Ub)}T.dirty=!0;Ia.setVAO(null);f&&(R.cpuTime+=performance.now()-h)},draw:function(c){var d,g,f,l,r,L,e,p,k,m,z,t,G,na,C,D,B,M,w,W,V,Ta,ca,Aa,Y,pa,sa,da,gb,U,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,
xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb;d=za.next;d!==za.cur&&(d?ha.bindFramebuffer(36160,d.framebuffer):ha.bindFramebuffer(36160,null),za.cur=d);if(T.dirty){var Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ia,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb;Qa=ja.dither;Qa!==T.dither&&(Qa?ha.enable(3024):ha.disable(3024),T.dither=Qa);tb=ja.depth_func;tb!==T.depth_func&&(ha.depthFunc(tb),T.depth_func=
tb);ub=dd[0];Sa=dd[1];if(ub!==Gb[0]||Sa!==Gb[1])ha.depthRange(ub,Sa),Gb[0]=ub,Gb[1]=Sa;mb=ja.depth_mask;mb!==T.depth_mask&&(ha.depthMask(mb),T.depth_mask=mb);gc=ta[0];zc=ta[1];uc=ta[2];bb=ta[3];if(gc!==va[0]||zc!==va[1]||uc!==va[2]||bb!==va[3])ha.colorMask(gc,zc,uc,bb),va[0]=gc,va[1]=zc,va[2]=uc,va[3]=bb;jc=ja.cull_enable;jc!==T.cull_enable&&(jc?ha.enable(2884):ha.disable(2884),T.cull_enable=jc);ia=ja.cull_face;ia!==T.cull_face&&(ha.cullFace(ia),T.cull_face=ia);Xa=ja.frontFace;Xa!==T.frontFace&&(ha.frontFace(Xa),
T.frontFace=Xa);Lc=ja.lineWidth;Lc!==T.lineWidth&&(ha.lineWidth(Lc),T.lineWidth=Lc);zb=ja.polygonOffset_enable;zb!==T.polygonOffset_enable&&(zb?ha.enable(32823):ha.disable(32823),T.polygonOffset_enable=zb);Za=ba[0];Ub=ba[1];if(Za!==I[0]||Ub!==I[1])ha.polygonOffset(Za,Ub),I[0]=Za,I[1]=Ub;sc=ja.sample_alpha;sc!==T.sample_alpha&&(sc?ha.enable(32926):ha.disable(32926),T.sample_alpha=sc);Vb=ja.sample_enable;Vb!==T.sample_enable&&(Vb?ha.enable(32928):ha.disable(32928),T.sample_enable=Vb);Pb=ra[0];Jc=ra[1];
if(Pb!==Ga[0]||Jc!==Ga[1])ha.sampleCoverage(Pb,Jc),Ga[0]=Pb,Ga[1]=Jc;Qb=ja.stencil_enable;Qb!==T.stencil_enable&&(Qb?ha.enable(2960):ha.disable(2960),T.stencil_enable=Qb);Xd=ja.stencil_mask;Xd!==T.stencil_mask&&(ha.stencilMask(Xd),T.stencil_mask=Xd);Dc=Ca[0];ud=Ca[1];Mc=Ca[2];if(Dc!==ka[0]||ud!==ka[1]||Mc!==ka[2])ha.stencilFunc(Dc,ud,Mc),ka[0]=Dc,ka[1]=ud,ka[2]=Mc;fd=Ka[0];qd=Ka[1];nc=Ka[2];vc=Ka[3];if(fd!==Fa[0]||qd!==Fa[1]||nc!==Fa[2]||vc!==Fa[3])ha.stencilOpSeparate(fd,qd,nc,vc),Fa[0]=fd,Fa[1]=
qd,Fa[2]=nc,Fa[3]=vc;hc=aa[0];db=aa[1];rc=aa[2];Sb=aa[3];if(hc!==ua[0]||db!==ua[1]||rc!==ua[2]||Sb!==ua[3])ha.stencilOpSeparate(hc,db,rc,Sb),ua[0]=hc,ua[1]=db,ua[2]=rc,ua[3]=Sb}g=c.viewport;f=g.x|0;l=g.y|0;r="width"in g?g.width|0:ea.framebufferWidth-f;L="height"in g?g.height|0:ea.framebufferHeight-l;e=ea.viewportWidth;ea.viewportWidth=r;p=ea.viewportHeight;ea.viewportHeight=L;ha.viewport(f,l,r,L);fa[0]=f;fa[1]=l;fa[2]=r;fa[3]=L;ha.blendColor(0,0,0,0);ac[0]=0;ac[1]=0;ac[2]=0;ac[3]=0;ha.enable(3042);
T.blend_enable=!0;ha.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;ha.blendFuncSeparate(770,771,773,1);N[0]=770;N[1]=771;N[2]=773;N[3]=1;ha.disable(2929);T.depth_enable=!1;k=c.viewport;m=k.x|0;z=k.y|0;t="width"in k?k.width|0:ea.framebufferWidth-m;G="height"in k?k.height|0:ea.framebufferHeight-z;ha.scissor(m,z,t,G);ya[0]=m;ya[1]=z;ya[2]=t;ya[3]=G;ha.enable(3089);T.scissor_enable=!0;if(na=T.profile)C=performance.now(),R.count++;ha.useProgram(h.program);D=Da.angle_instanced_arrays;Ia.setVAO(null);
B=b.call(this,ea,c,0);$b.offset=B;M=!1;w=null;W=0;V=!1;ca=Ta=0;Aa=1;Y=0;pa=5126;U=gb=da=sa=0;Ea($b)?(M=!0,w=H.createStream(34962,$b),pa=w.dtype):(w=H.getBuffer($b))?pa=w.dtype:"constant"in $b?(Aa=2,"number"===typeof $b.constant?(da=$b.constant,gb=U=sa=0):(da=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,U=2<$b.constant.length?$b.constant[2]:0,sa=3<$b.constant.length?$b.constant[3]:0)):(w=Ea($b.buffer)?H.createStream(34962,$b.buffer):H.getBuffer($b.buffer),pa="type"in
$b?zd[$b.type]:w.dtype,V=!!$b.normalized,ca=$b.size|0,Ta=$b.offset|0,Y=$b.stride|0,W=$b.divisor|0);Ab=K.location;Eb=n[Ab];if(1===Aa){Eb.buffer||ha.enableVertexAttribArray(Ab);tc=ca||2;if(Eb.type!==pa||Eb.size!==tc||Eb.buffer!==w||Eb.normalized!==V||Eb.offset!==Ta||Eb.stride!==Y)ha.bindBuffer(34962,w.buffer),ha.vertexAttribPointer(Ab,tc,pa,V,Y,Ta),Eb.type=pa,Eb.size=tc,Eb.buffer=w,Eb.normalized=V,Eb.offset=Ta,Eb.stride=Y;Eb.divisor!==W&&(D.vertexAttribDivisorANGLE(Ab,W),Eb.divisor=W)}else if(Eb.buffer&&
(ha.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==da||Eb.y!==gb||Eb.z!==U||Eb.w!==sa)ha.vertexAttrib4f(Ab,da,gb,U,sa),Eb.x=da,Eb.y=gb,Eb.z=U,Eb.w=sa;wb=E.call(this,ea,c,0);Rb.offset=wb;wc=!1;Bb=null;Ic=0;lc=!1;Wc=Fc=0;Vc=1;Cc=0;ec=5126;mc=pc=oc=Gc=0;Ea(Rb)?(wc=!0,Bb=H.createStream(34962,Rb),ec=Bb.dtype):(Bb=H.getBuffer(Rb))?ec=Bb.dtype:"constant"in Rb?(Vc=2,"number"===typeof Rb.constant?(oc=Rb.constant,pc=mc=Gc=0):(oc=0<Rb.constant.length?Rb.constant[0]:0,pc=1<Rb.constant.length?Rb.constant[1]:
0,mc=2<Rb.constant.length?Rb.constant[2]:0,Gc=3<Rb.constant.length?Rb.constant[3]:0)):(Bb=Ea(Rb.buffer)?H.createStream(34962,Rb.buffer):H.getBuffer(Rb.buffer),ec="type"in Rb?zd[Rb.type]:Bb.dtype,lc=!!Rb.normalized,Wc=Rb.size|0,Fc=Rb.offset|0,Cc=Rb.stride|0,Ic=Rb.divisor|0);fc=y.location;$a=n[fc];if(1===Vc){$a.buffer||ha.enableVertexAttribArray(fc);Hc=Wc||2;if($a.type!==ec||$a.size!==Hc||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Fc||$a.stride!==Cc)ha.bindBuffer(34962,Bb.buffer),ha.vertexAttribPointer(fc,
Hc,ec,lc,Cc,Fc),$a.type=ec,$a.size=Hc,$a.buffer=Bb,$a.normalized=lc,$a.offset=Fc,$a.stride=Cc;$a.divisor!==Ic&&(D.vertexAttribDivisorANGLE(fc,Ic),$a.divisor=Ic)}else if($a.buffer&&(ha.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Gc)ha.vertexAttrib4f(fc,oc,pc,mc,Gc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Gc;xb=J.call(this,ea,c,0);Ha.offset=xb;cb=!1;Mb=null;ab=0;nb=!1;Tc=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=jb=Nb=0;Ea(Ha)?(cb=!0,Mb=H.createStream(34962,Ha),qc=Mb.dtype):(Mb=H.getBuffer(Ha))?
qc=Mb.dtype:"constant"in Ha?(Hb=2,"number"===typeof Ha.constant?(jb=Ha.constant,Fb=Cb=Nb=0):(jb=0<Ha.constant.length?Ha.constant[0]:0,Fb=1<Ha.constant.length?Ha.constant[1]:0,Cb=2<Ha.constant.length?Ha.constant[2]:0,Nb=3<Ha.constant.length?Ha.constant[3]:0)):(Mb=Ea(Ha.buffer)?H.createStream(34962,Ha.buffer):H.getBuffer(Ha.buffer),qc="type"in Ha?zd[Ha.type]:Mb.dtype,nb=!!Ha.normalized,Tc=Ha.size|0,Va=Ha.offset|0,Ib=Ha.stride|0,ab=Ha.divisor|0);vb=hd.location;hb=n[vb];if(1===Hb){hb.buffer||ha.enableVertexAttribArray(vb);
Xb=Tc||4;if(hb.type!==qc||hb.size!==Xb||hb.buffer!==Mb||hb.normalized!==nb||hb.offset!==Va||hb.stride!==Ib)ha.bindBuffer(34962,Mb.buffer),ha.vertexAttribPointer(vb,Xb,qc,nb,Ib,Va),hb.type=qc,hb.size=Xb,hb.buffer=Mb,hb.normalized=nb,hb.offset=Va,hb.stride=Ib;hb.divisor!==ab&&(D.vertexAttribDivisorANGLE(vb,ab),hb.divisor=ab)}else if(hb.buffer&&(ha.disableVertexAttribArray(vb),hb.buffer=null),hb.x!==jb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)ha.vertexAttrib4f(vb,jb,Fb,Cb,Nb),hb.x=jb,hb.y=Fb,hb.z=Cb,hb.w=Nb;
Ob=O.call(this,ea,c,0);Zb.offset=Ob;pb=!1;Ua=null;Tb=0;yb=!1;ib=bc=0;ob=1;Ja=0;qb=5126;Ma=fb=eb=La=0;Ea(Zb)?(pb=!0,Ua=H.createStream(34962,Zb),qb=Ua.dtype):(Ua=H.getBuffer(Zb))?qb=Ua.dtype:"constant"in Zb?(ob=2,"number"===typeof Zb.constant?(eb=Zb.constant,fb=Ma=La=0):(eb=0<Zb.constant.length?Zb.constant[0]:0,fb=1<Zb.constant.length?Zb.constant[1]:0,Ma=2<Zb.constant.length?Zb.constant[2]:0,La=3<Zb.constant.length?Zb.constant[3]:0)):(Ua=Ea(Zb.buffer)?H.createStream(34962,Zb.buffer):H.getBuffer(Zb.buffer),
qb="type"in Zb?zd[Zb.type]:Ua.dtype,yb=!!Zb.normalized,ib=Zb.size|0,bc=Zb.offset|0,Ja=Zb.stride|0,Tb=Zb.divisor|0);kb=A.location;Wa=n[kb];if(1===ob){Wa.buffer||ha.enableVertexAttribArray(kb);sb=ib||4;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Ua||Wa.normalized!==yb||Wa.offset!==bc||Wa.stride!==Ja)ha.bindBuffer(34962,Ua.buffer),ha.vertexAttribPointer(kb,sb,qb,yb,Ja,bc),Wa.type=qb,Wa.size=sb,Wa.buffer=Ua,Wa.normalized=yb,Wa.offset=bc,Wa.stride=Ja;Wa.divisor!==Tb&&(D.vertexAttribDivisorANGLE(kb,Tb),
Wa.divisor=Tb)}else if(Wa.buffer&&(ha.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==Ma||Wa.w!==La)ha.vertexAttrib4f(kb,eb,fb,Ma,La),Wa.x=eb,Wa.y=fb,Wa.z=Ma,Wa.w=La;rb=ma.location;Pa=n[rb];Pa.buffer||ha.enableVertexAttribArray(rb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==X||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ha.bindBuffer(34962,X.buffer),ha.vertexAttribPointer(rb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=X,Pa.normalized=!1,Pa.offset=0,Pa.stride=
24;0!==Pa.divisor&&(D.vertexAttribDivisorANGLE(rb,0),Pa.divisor=0);Bc=Z.location;Ra=n[Bc];Ra.buffer||ha.enableVertexAttribArray(Bc);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==x||!1!==Ra.normalized||8!==Ra.offset||24!==Ra.stride)ha.bindBuffer(34962,x.buffer),ha.vertexAttribPointer(Bc,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=x,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(D.vertexAttribDivisorANGLE(Bc,0),Ra.divisor=0);Jb=a.location;Db=n[Jb];Db.buffer||ha.enableVertexAttribArray(Jb);
if(5126!==Db.type||2!==Db.size||Db.buffer!==u||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)ha.bindBuffer(34962,u.buffer),ha.vertexAttribPointer(Jb,2,5126,!1,24,16),Db.type=5126,Db.size=2,Db.buffer=u,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(D.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Na=F.call(this,ea,c,0);ha.uniform4f(oa.location,Na[0],Na[1],Na[2],Na[3]);ha.uniform1f(ga.location,c.lineWidth);ha.uniform1f(wa.location,c.capSize);Jd=c.scale;ha.uniform2f(q.location,Jd[0],
Jd[1]);Ya=c.scaleFract;ha.uniform2f(P.location,Ya[0],Ya[1]);Kb=c.translate;ha.uniform2f(Q.location,Kb[0],Kb[1]);Lb=c.translateFract;ha.uniform2f(xa.location,Lb[0],Lb[1]);ha.uniform1f(S.location,c.opacity);(lb=la.elements)?ha.bindBuffer(34963,lb.buffer.buffer):Ia.currentVAO&&(lb=qa.getElements(Ia.currentVAO.elements))&&ha.bindBuffer(34963,lb.buffer.buffer);Oa=la.offset;Yb=c.count;0<Yb?lb?D.drawElementsInstancedANGLE(4,36,lb.type,Oa<<(lb.type-5121>>1),Yb):D.drawArraysInstancedANGLE(4,Oa,36,Yb):0>Yb&&
(lb?ha.drawElements(4,36,lb.type,Oa<<(lb.type-5121>>1)):ha.drawArrays(4,Oa,36));T.dirty=!0;Ia.setVAO(null);ea.viewportWidth=e;ea.viewportHeight=p;na&&(R.cpuTime+=performance.now()-C);M&&H.destroyStream(w);wc&&H.destroyStream(Bb);cb&&H.destroyStream(Mb);pb&&H.destroyStream(Ua)},scope:function(a,c,b){var g,n,v,l,q,h,I,e,N,p,K,m,A,ra,Ia,Ga,y,ac,ha,ba,S,D,ka,C,Q,B,aa,M,ta,P,ya,Ca,J,F,fa,xa,E,qa,za,O,Z,ua,ga,va,oa,Gb,da,wa,ma,Da,dd,Fa,Ka,hd,U,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,
La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Ze,Be,jd,Ba,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md;g=a.viewport;n=g.x|0;v=g.y|0;l="width"in g?g.width|0:ea.framebufferWidth-n;q="height"in g?g.height|0:ea.framebufferHeight-v;h=ea.viewportWidth;
ea.viewportWidth=l;I=ea.viewportHeight;ea.viewportHeight=q;e=gb[0];gb[0]=n;N=gb[1];gb[1]=v;p=gb[2];gb[2]=l;K=gb[3];gb[3]=q;m=L[0];L[0]=0;A=L[1];L[1]=0;ra=L[2];L[2]=0;Ia=L[3];L[3]=0;Ga=ja.blend_enable;ja.blend_enable=!0;y=Ta[0];Ta[0]=32774;ac=Ta[1];Ta[1]=32774;ha=r[0];r[0]=770;ba=r[1];r[1]=771;S=r[2];r[2]=773;D=r[3];r[3]=1;ka=ja.depth_enable;ja.depth_enable=!1;C=a.viewport;Q=C.x|0;B=C.y|0;aa="width"in C?C.width|0:ea.framebufferWidth-Q;M="height"in C?C.height|0:ea.framebufferHeight-B;ta=na[0];na[0]=
Q;P=na[1];na[1]=B;ya=na[2];na[2]=aa;Ca=na[3];na[3]=M;J=ja.scissor_enable;ja.scissor_enable=!0;if(F=T.profile)fa=performance.now(),R.count++;xa=la.count;la.count=36;E=a.count;qa=la.instances;la.instances=E;za=la.primitive;la.primitive=4;O=a.capSize;Z=Aa[5];Aa[5]=O;ua=a.lineWidth;ga=Aa[4];Aa[4]=ua;va=a.opacity;oa=Aa[10];Aa[10]=va;Gb=a.range;da=Aa[18];Aa[18]=Gb;wa=a.scale;ma=Aa[6];Aa[6]=wa;Da=a.scaleFract;dd=Aa[7];Aa[7]=Da;Fa=a.translate;Ka=Aa[8];Aa[8]=Fa;hd=a.translateFract;U=Aa[9];Aa[9]=hd;Hb=Y.call(this,
ea,a,b);Ib=Aa[3];Aa[3]=Hb;qc=t.buffer;t.buffer=u;Nb=t.divisor;t.divisor=0;jb=t.normalized;t.normalized=!1;Fb=t.offset;t.offset=16;Cb=t.size;t.size=0;vb=t.state;t.state=1;hb=t.stride;t.stride=24;Xb=t.type;t.type=5126;Ob=t.w;t.w=0;pb=t.x;t.x=0;Ua=t.y;t.y=0;Tb=t.z;t.z=0;yb=V.call(this,ea,a,b);Zb.offset=yb;bc=!1;ib=null;ob=0;Ja=!1;La=qb=0;eb=1;fb=0;Ma=5126;rb=sb=Wa=kb=0;Ea(Zb)?(bc=!0,ib=H.createStream(34962,Zb),Ma=ib.dtype):(ib=H.getBuffer(Zb))?Ma=ib.dtype:"constant"in Zb?(eb=2,"number"===typeof Zb.constant?
(Wa=Zb.constant,sb=rb=kb=0):(Wa=0<Zb.constant.length?Zb.constant[0]:0,sb=1<Zb.constant.length?Zb.constant[1]:0,rb=2<Zb.constant.length?Zb.constant[2]:0,kb=3<Zb.constant.length?Zb.constant[3]:0)):(ib=Ea(Zb.buffer)?H.createStream(34962,Zb.buffer):H.getBuffer(Zb.buffer),Ma="type"in Zb?zd[Zb.type]:ib.dtype,Ja=!!Zb.normalized,La=Zb.size|0,qb=Zb.offset|0,fb=Zb.stride|0,ob=Zb.divisor|0);Pa=k.buffer;k.buffer=ib;Bc=k.divisor;k.divisor=ob;Ra=k.normalized;k.normalized=Ja;Jb=k.offset;k.offset=qb;Db=k.size;k.size=
La;Na=k.state;k.state=eb;ia=k.stride;k.stride=fb;Ya=k.type;k.type=Ma;Kb=k.w;k.w=kb;Lb=k.x;k.x=Wa;lb=k.y;k.y=sb;Oa=k.z;k.z=rb;Yb=w.buffer;w.buffer=X;Qa=w.divisor;w.divisor=0;tb=w.normalized;w.normalized=!1;ub=w.offset;w.offset=0;Sa=w.size;w.size=0;mb=w.state;w.state=1;gc=w.stride;w.stride=24;zc=w.type;w.type=5126;uc=w.w;w.w=0;bb=w.x;w.x=0;jc=w.y;w.y=0;nd=w.z;w.z=0;Xa=sa.call(this,ea,a,b);Ha.offset=Xa;Lc=!1;zb=null;Za=0;Ub=!1;Vb=sc=0;Pb=1;Jc=0;Qb=5126;Mc=ud=Dc=Xd=0;Ea(Ha)?(Lc=!0,zb=H.createStream(34962,
Ha),Qb=zb.dtype):(zb=H.getBuffer(Ha))?Qb=zb.dtype:"constant"in Ha?(Pb=2,"number"===typeof Ha.constant?(Dc=Ha.constant,ud=Mc=Xd=0):(Dc=0<Ha.constant.length?Ha.constant[0]:0,ud=1<Ha.constant.length?Ha.constant[1]:0,Mc=2<Ha.constant.length?Ha.constant[2]:0,Xd=3<Ha.constant.length?Ha.constant[3]:0)):(zb=Ea(Ha.buffer)?H.createStream(34962,Ha.buffer):H.getBuffer(Ha.buffer),Qb="type"in Ha?zd[Ha.type]:zb.dtype,Ub=!!Ha.normalized,Vb=Ha.size|0,sc=Ha.offset|0,Jc=Ha.stride|0,Za=Ha.divisor|0);fd=d.buffer;d.buffer=
zb;qd=d.divisor;d.divisor=Za;nc=d.normalized;d.normalized=Ub;vc=d.offset;d.offset=sc;hc=d.size;d.size=Vb;db=d.state;d.state=Pb;rc=d.stride;d.stride=Jc;Sb=d.type;d.type=Qb;Wb=d.w;d.w=Xd;dc=d.x;d.x=Dc;ic=d.y;d.y=ud;xc=d.z;d.z=Mc;Ac=z.buffer;z.buffer=x;ad=z.divisor;z.divisor=0;Pc=z.normalized;z.normalized=!1;Qc=z.offset;z.offset=8;Rc=z.size;z.size=0;Xc=z.state;z.state=1;wd=z.stride;z.stride=24;bd=z.type;z.type=5126;Yc=z.w;z.w=0;kc=z.x;z.x=0;cc=z.y;z.y=0;Zc=z.z;z.z=0;Uc=W.call(this,ea,a,b);$b.offset=
Uc;cd=!1;yc=null;id=0;rd=!1;Be=Ze=0;jd=1;Ba=0;Nd=5126;Id=Od=ee=Yd=0;Ea($b)?(cd=!0,yc=H.createStream(34962,$b),Nd=yc.dtype):(yc=H.getBuffer($b))?Nd=yc.dtype:"constant"in $b?(jd=2,"number"===typeof $b.constant?(ee=$b.constant,Od=Id=Yd=0):(ee=0<$b.constant.length?$b.constant[0]:0,Od=1<$b.constant.length?$b.constant[1]:0,Id=2<$b.constant.length?$b.constant[2]:0,Yd=3<$b.constant.length?$b.constant[3]:0)):(yc=Ea($b.buffer)?H.createStream(34962,$b.buffer):H.getBuffer($b.buffer),Nd="type"in $b?zd[$b.type]:
yc.dtype,rd=!!$b.normalized,Be=$b.size|0,Ze=$b.offset|0,Ba=$b.stride|0,id=$b.divisor|0);Gd=f.buffer;f.buffer=yc;od=f.divisor;f.divisor=id;Sc=f.normalized;f.normalized=rd;vd=f.offset;f.offset=Ze;td=f.size;f.size=Be;kd=f.state;f.state=jd;xd=f.stride;f.stride=Ba;Bd=f.type;f.type=Nd;Ed=f.w;f.w=Yd;oe=f.x;f.x=ee;qe=f.y;f.y=Od;ue=f.z;f.z=Id;ke=ca.call(this,ea,a,b);Rb.offset=ke;je=!1;ie=null;ve=0;fe=!1;Nc=le=0;gd=1;we=0;pe=5126;Rd=Qd=Pd=Kd=0;Ea(Rb)?(je=!0,ie=H.createStream(34962,Rb),pe=ie.dtype):(ie=H.getBuffer(Rb))?
pe=ie.dtype:"constant"in Rb?(gd=2,"number"===typeof Rb.constant?(Pd=Rb.constant,Qd=Rd=Kd=0):(Pd=0<Rb.constant.length?Rb.constant[0]:0,Qd=1<Rb.constant.length?Rb.constant[1]:0,Rd=2<Rb.constant.length?Rb.constant[2]:0,Kd=3<Rb.constant.length?Rb.constant[3]:0)):(ie=Ea(Rb.buffer)?H.createStream(34962,Rb.buffer):H.getBuffer(Rb.buffer),pe="type"in Rb?zd[Rb.type]:ie.dtype,fe=!!Rb.normalized,Nc=Rb.size|0,le=Rb.offset|0,we=Rb.stride|0,ve=Rb.divisor|0);me=G.buffer;G.buffer=ie;He=G.divisor;G.divisor=ve;Ce=G.normalized;
G.normalized=fe;re=G.offset;G.offset=le;Re=G.size;G.size=Nc;Se=G.state;G.state=gd;Ne=G.stride;G.stride=we;xe=G.type;G.type=pe;Fe=G.w;G.w=Kd;Ie=G.x;G.x=Pd;Je=G.y;G.y=Qd;Ke=G.z;G.z=Rd;Ge=pa.vert;pa.vert=2;Md=pa.frag;pa.frag=1;T.dirty=!0;c(ea,a,b);ea.viewportWidth=h;ea.viewportHeight=I;gb[0]=e;gb[1]=N;gb[2]=p;gb[3]=K;L[0]=m;L[1]=A;L[2]=ra;L[3]=Ia;ja.blend_enable=Ga;Ta[0]=y;Ta[1]=ac;r[0]=ha;r[1]=ba;r[2]=S;r[3]=D;ja.depth_enable=ka;na[0]=ta;na[1]=P;na[2]=ya;na[3]=Ca;ja.scissor_enable=J;F&&(R.cpuTime+=
performance.now()-fa);la.count=xa;la.instances=qa;la.primitive=za;Aa[5]=Z;Aa[4]=ga;Aa[10]=oa;Aa[18]=da;Aa[6]=ma;Aa[7]=dd;Aa[8]=Ka;Aa[9]=U;Aa[3]=Ib;t.buffer=qc;t.divisor=Nb;t.normalized=jb;t.offset=Fb;t.size=Cb;t.state=vb;t.stride=hb;t.type=Xb;t.w=Ob;t.x=pb;t.y=Ua;t.z=Tb;bc&&H.destroyStream(ib);k.buffer=Pa;k.divisor=Bc;k.normalized=Ra;k.offset=Jb;k.size=Db;k.state=Na;k.stride=ia;k.type=Ya;k.w=Kb;k.x=Lb;k.y=lb;k.z=Oa;w.buffer=Yb;w.divisor=Qa;w.normalized=tb;w.offset=ub;w.size=Sa;w.state=mb;w.stride=
gc;w.type=zc;w.w=uc;w.x=bb;w.y=jc;w.z=nd;Lc&&H.destroyStream(zb);d.buffer=fd;d.divisor=qd;d.normalized=nc;d.offset=vc;d.size=hc;d.state=db;d.stride=rc;d.type=Sb;d.w=Wb;d.x=dc;d.y=ic;d.z=xc;z.buffer=Ac;z.divisor=ad;z.normalized=Pc;z.offset=Qc;z.size=Rc;z.state=Xc;z.stride=wd;z.type=bd;z.w=Yc;z.x=kc;z.y=cc;z.z=Zc;cd&&H.destroyStream(yc);f.buffer=Gd;f.divisor=od;f.normalized=Sc;f.offset=vd;f.size=td;f.state=kd;f.stride=xd;f.type=Bd;f.w=Ed;f.x=oe;f.y=qe;f.z=ue;je&&H.destroyStream(ie);G.buffer=me;G.divisor=
He;G.normalized=Ce;G.offset=re;G.size=Re;G.state=Se;G.stride=Ne;G.type=xe;G.w=Fe;G.x=Ie;G.y=Je;G.z=Ke;pa.vert=Ge;pa.frag=Md;T.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma){var hd,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,dd,Gb,ba,I,ra,Ga,na,ya,
Ca,ka,aa;hd=e.attributes;Z=e.buffer;ga=e.context;S=e.current;K=e.draw;y=e.elements;q=e.extensions;P=e.framebuffer;Q=e.gl;xa=e.isBufferArgs;oa=e.next;n=e.shader;H=e.uniforms;ea=e.vao;T=oa.blend_color;la=S.blend_color;qa=oa.blend_equation;Da=S.blend_equation;za=oa.blend_func;ha=S.blend_func;Ea=oa.colorMask;ja=S.colorMask;pa=oa.depth_range;Aa=S.depth_range;Ia=oa.polygonOffset_offset;L=S.polygonOffset_offset;ac=oa.sample_coverage;Ta=S.sample_coverage;v=oa.scissor_box;r=S.scissor_box;N=oa.stencil_func;
ta=S.stencil_func;va=oa.stencil_opBack;dd=S.stencil_opBack;Gb=oa.stencil_opFront;ba=S.stencil_opFront;I=oa.viewport;ra=S.viewport;Ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};na={divisor:1,offset:8,stride:8};ya={divisor:1,offset:8,stride:8};Ca={divisor:1,offset:16,stride:8};ka={divisor:1,offset:16,stride:8};aa={divisor:1,offset:0,stride:4};return{batch:function(b,n){var v,h,I,e,t,H;v=P.next;v!==P.cur&&(v?Q.bindFramebuffer(36160,v.framebuffer):Q.bindFramebuffer(36160,
null),P.cur=v);if(S.dirty){var T,D,u,M,x,J,F,E,qa,za,O,X,Y,U,be,ze,Ye,Qe,Fd,Ae,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc;T=oa.dither;T!==S.dither&&(T?Q.enable(3024):Q.disable(3024),S.dither=T);D=oa.depth_func;D!==S.depth_func&&(Q.depthFunc(D),S.depth_func=D);u=pa[0];M=pa[1];if(u!==Aa[0]||M!==Aa[1])Q.depthRange(u,M),Aa[0]=u,Aa[1]=M;x=oa.depth_mask;x!==S.depth_mask&&(Q.depthMask(x),S.depth_mask=x);J=Ea[0];F=Ea[1];E=Ea[2];qa=Ea[3];if(J!==ja[0]||F!==ja[1]||E!==ja[2]||qa!==ja[3])Q.colorMask(J,F,E,qa),ja[0]=
J,ja[1]=F,ja[2]=E,ja[3]=qa;za=oa.cull_enable;za!==S.cull_enable&&(za?Q.enable(2884):Q.disable(2884),S.cull_enable=za);O=oa.cull_face;O!==S.cull_face&&(Q.cullFace(O),S.cull_face=O);X=oa.frontFace;X!==S.frontFace&&(Q.frontFace(X),S.frontFace=X);Y=oa.lineWidth;Y!==S.lineWidth&&(Q.lineWidth(Y),S.lineWidth=Y);U=oa.polygonOffset_enable;U!==S.polygonOffset_enable&&(U?Q.enable(32823):Q.disable(32823),S.polygonOffset_enable=U);be=Ia[0];ze=Ia[1];if(be!==L[0]||ze!==L[1])Q.polygonOffset(be,ze),L[0]=be,L[1]=ze;
Ye=oa.sample_alpha;Ye!==S.sample_alpha&&(Ye?Q.enable(32926):Q.disable(32926),S.sample_alpha=Ye);Qe=oa.sample_enable;Qe!==S.sample_enable&&(Qe?Q.enable(32928):Q.disable(32928),S.sample_enable=Qe);Fd=ac[0];Ae=ac[1];if(Fd!==Ta[0]||Ae!==Ta[1])Q.sampleCoverage(Fd,Ae),Ta[0]=Fd,Ta[1]=Ae;te=oa.stencil_mask;te!==S.stencil_mask&&(Q.stencilMask(te),S.stencil_mask=te);$d=N[0];Wd=N[1];Ld=N[2];if($d!==ta[0]||Wd!==ta[1]||Ld!==ta[2])Q.stencilFunc($d,Wd,Ld),ta[0]=$d,ta[1]=Wd,ta[2]=Ld;md=Gb[0];$c=Gb[1];sd=Gb[2];Kc=
Gb[3];if(md!==ba[0]||$c!==ba[1]||sd!==ba[2]||Kc!==ba[3])Q.stencilOpSeparate(md,$c,sd,Kc),ba[0]=md,ba[1]=$c,ba[2]=sd,ba[3]=Kc;pd=va[0];Ec=va[1];ed=va[2];Oc=va[3];if(pd!==dd[0]||Ec!==dd[1]||ed!==dd[2]||Oc!==dd[3])Q.stencilOpSeparate(pd,Ec,ed,Oc),dd[0]=pd,dd[1]=Ec,dd[2]=ed,dd[3]=Oc}Q.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;Q.enable(3042);S.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;Q.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;
Q.enable(3089);S.scissor_enable=!0;Q.disable(2960);S.stencil_enable=!1;if(h=S.profile)I=performance.now(),R.count+=n;Q.useProgram(V.program);e=q.angle_instanced_arrays;var ld,Ab,Eb,tc,wb;ea.setVAO(null);ld=da.location;Ab=hd[ld];Ab.buffer||Q.enableVertexAttribArray(ld);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==m||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(ld,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=m,Ab.normalized=!1,Ab.offset=0,Ab.stride=
8;0!==Ab.divisor&&(e.vertexAttribDivisorANGLE(ld,0),Ab.divisor=0);Eb=C.location;tc=hd[Eb];tc.buffer||Q.enableVertexAttribArray(Eb);if(5126!==tc.type||1!==tc.size||tc.buffer!==g||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)Q.bindBuffer(34962,g.buffer),Q.vertexAttribPointer(Eb,1,5126,!1,8,4),tc.type=5126,tc.size=1,tc.buffer=g,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(e.vertexAttribDivisorANGLE(Eb,0),tc.divisor=0);(wb=K.elements)?Q.bindBuffer(34963,wb.buffer.buffer):ea.currentVAO&&
(wb=y.getElements(ea.currentVAO.elements))&&Q.bindBuffer(34963,wb.buffer.buffer);for(t=0;t<n;++t){H=b[t];var wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Ze,Be,jd,Ba,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,
td,kd;wc=H.viewport;Bb=wc.x|0;Ic=wc.y|0;lc="width"in wc?wc.width|0:ga.framebufferWidth-Bb;Fc="height"in wc?wc.height|0:ga.framebufferHeight-Ic;Wc=ga.viewportWidth;ga.viewportWidth=lc;Vc=ga.viewportHeight;ga.viewportHeight=Fc;Q.viewport(Bb,Ic,lc,Fc);ra[0]=Bb;ra[1]=Ic;ra[2]=lc;ra[3]=Fc;(Cc=k.call(this,ga,H,t))?Q.enable(2929):Q.disable(2929);S.depth_enable=Cc;ec=H.viewport;Gc=ec.x|0;oc=ec.y|0;pc="width"in ec?ec.width|0:ga.framebufferWidth-Gc;mc="height"in ec?ec.height|0:ga.framebufferHeight-oc;Q.scissor(Gc,
oc,pc,mc);r[0]=Gc;r[1]=oc;r[2]=pc;r[3]=mc;na.buffer=H.positionBuffer;fc=!1;$a=null;Hc=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=Tc=0;xa(na)?(fc=!0,$a=Z.createStream(34962,na),Va=$a.dtype):($a=Z.getBuffer(na))?Va=$a.dtype:"constant"in na?(ab=2,"number"===typeof na.constant?(Hb=na.constant,Ib=qc=Tc=0):(Hb=0<na.constant.length?na.constant[0]:0,Ib=1<na.constant.length?na.constant[1]:0,qc=2<na.constant.length?na.constant[2]:0,Tc=3<na.constant.length?na.constant[3]:0)):($a=xa(na.buffer)?Z.createStream(34962,
na.buffer):Z.getBuffer(na.buffer),Va="type"in na?Ga[na.type]:$a.dtype,xb=!!na.normalized,Mb=na.size|0,cb=na.offset|0,nb=na.stride|0,Hc=na.divisor|0);Nb=sa.location;jb=hd[Nb];if(1===ab){jb.buffer||Q.enableVertexAttribArray(Nb);Fb=Mb||2;if(jb.type!==Va||jb.size!==Fb||jb.buffer!==$a||jb.normalized!==xb||jb.offset!==cb||jb.stride!==nb)Q.bindBuffer(34962,$a.buffer),Q.vertexAttribPointer(Nb,Fb,Va,xb,nb,cb),jb.type=Va,jb.size=Fb,jb.buffer=$a,jb.normalized=xb,jb.offset=cb,jb.stride=nb;jb.divisor!==Hc&&(e.vertexAttribDivisorANGLE(Nb,
Hc),jb.divisor=Hc)}else if(jb.buffer&&(Q.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==Ib||jb.z!==qc||jb.w!==Tc)Q.vertexAttrib4f(Nb,Hb,Ib,qc,Tc),jb.x=Hb,jb.y=Ib,jb.z=qc,jb.w=Tc;Ca.buffer=H.positionBuffer;Cb=!1;vb=null;hb=0;Xb=!1;pb=Ob=0;Ua=1;Tb=0;yb=5126;Ja=ob=ib=bc=0;xa(Ca)?(Cb=!0,vb=Z.createStream(34962,Ca),yb=vb.dtype):(vb=Z.getBuffer(Ca))?yb=vb.dtype:"constant"in Ca?(Ua=2,"number"===typeof Ca.constant?(ib=Ca.constant,ob=Ja=bc=0):(ib=0<Ca.constant.length?Ca.constant[0]:0,ob=1<
Ca.constant.length?Ca.constant[1]:0,Ja=2<Ca.constant.length?Ca.constant[2]:0,bc=3<Ca.constant.length?Ca.constant[3]:0)):(vb=xa(Ca.buffer)?Z.createStream(34962,Ca.buffer):Z.getBuffer(Ca.buffer),yb="type"in Ca?Ga[Ca.type]:vb.dtype,Xb=!!Ca.normalized,pb=Ca.size|0,Ob=Ca.offset|0,Tb=Ca.stride|0,hb=Ca.divisor|0);qb=z.location;La=hd[qb];if(1===Ua){La.buffer||Q.enableVertexAttribArray(qb);eb=pb||2;if(La.type!==yb||La.size!==eb||La.buffer!==vb||La.normalized!==Xb||La.offset!==Ob||La.stride!==Tb)Q.bindBuffer(34962,
vb.buffer),Q.vertexAttribPointer(qb,eb,yb,Xb,Tb,Ob),La.type=yb,La.size=eb,La.buffer=vb,La.normalized=Xb,La.offset=Ob,La.stride=Tb;La.divisor!==hb&&(e.vertexAttribDivisorANGLE(qb,hb),La.divisor=hb)}else if(La.buffer&&(Q.disableVertexAttribArray(qb),La.buffer=null),La.x!==ib||La.y!==ob||La.z!==Ja||La.w!==bc)Q.vertexAttrib4f(qb,ib,ob,Ja,bc),La.x=ib,La.y=ob,La.z=Ja,La.w=bc;ya.buffer=H.positionFractBuffer;fb=!1;Ma=null;kb=0;Wa=!1;rb=sb=0;Pa=1;Bc=0;Ra=5126;ia=Na=Db=Jb=0;xa(ya)?(fb=!0,Ma=Z.createStream(34962,
ya),Ra=Ma.dtype):(Ma=Z.getBuffer(ya))?Ra=Ma.dtype:"constant"in ya?(Pa=2,"number"===typeof ya.constant?(Db=ya.constant,Na=ia=Jb=0):(Db=0<ya.constant.length?ya.constant[0]:0,Na=1<ya.constant.length?ya.constant[1]:0,ia=2<ya.constant.length?ya.constant[2]:0,Jb=3<ya.constant.length?ya.constant[3]:0)):(Ma=xa(ya.buffer)?Z.createStream(34962,ya.buffer):Z.getBuffer(ya.buffer),Ra="type"in ya?Ga[ya.type]:Ma.dtype,Wa=!!ya.normalized,rb=ya.size|0,sb=ya.offset|0,Bc=ya.stride|0,kb=ya.divisor|0);Ya=d.location;Kb=
hd[Ya];if(1===Pa){Kb.buffer||Q.enableVertexAttribArray(Ya);Lb=rb||2;if(Kb.type!==Ra||Kb.size!==Lb||Kb.buffer!==Ma||Kb.normalized!==Wa||Kb.offset!==sb||Kb.stride!==Bc)Q.bindBuffer(34962,Ma.buffer),Q.vertexAttribPointer(Ya,Lb,Ra,Wa,Bc,sb),Kb.type=Ra,Kb.size=Lb,Kb.buffer=Ma,Kb.normalized=Wa,Kb.offset=sb,Kb.stride=Bc;Kb.divisor!==kb&&(e.vertexAttribDivisorANGLE(Ya,kb),Kb.divisor=kb)}else if(Kb.buffer&&(Q.disableVertexAttribArray(Ya),Kb.buffer=null),Kb.x!==Db||Kb.y!==Na||Kb.z!==ia||Kb.w!==Jb)Q.vertexAttrib4f(Ya,
Db,Na,ia,Jb),Kb.x=Db,Kb.y=Na,Kb.z=ia,Kb.w=Jb;ka.buffer=H.positionFractBuffer;lb=!1;Oa=null;Yb=0;Qa=!1;ub=tb=0;Sa=1;mb=0;gc=5126;jc=bb=uc=zc=0;xa(ka)?(lb=!0,Oa=Z.createStream(34962,ka),gc=Oa.dtype):(Oa=Z.getBuffer(ka))?gc=Oa.dtype:"constant"in ka?(Sa=2,"number"===typeof ka.constant?(uc=ka.constant,bb=jc=zc=0):(uc=0<ka.constant.length?ka.constant[0]:0,bb=1<ka.constant.length?ka.constant[1]:0,jc=2<ka.constant.length?ka.constant[2]:0,zc=3<ka.constant.length?ka.constant[3]:0)):(Oa=xa(ka.buffer)?Z.createStream(34962,
ka.buffer):Z.getBuffer(ka.buffer),gc="type"in ka?Ga[ka.type]:Oa.dtype,Qa=!!ka.normalized,ub=ka.size|0,tb=ka.offset|0,mb=ka.stride|0,Yb=ka.divisor|0);nd=W.location;Xa=hd[nd];if(1===Sa){Xa.buffer||Q.enableVertexAttribArray(nd);Lc=ub||2;if(Xa.type!==gc||Xa.size!==Lc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)Q.bindBuffer(34962,Oa.buffer),Q.vertexAttribPointer(nd,Lc,gc,Qa,mb,tb),Xa.type=gc,Xa.size=Lc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Yb&&(e.vertexAttribDivisorANGLE(nd,
Yb),Xa.divisor=Yb)}else if(Xa.buffer&&(Q.disableVertexAttribArray(nd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)Q.vertexAttrib4f(nd,uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;aa.buffer=H.colorBuffer;zb=!1;Za=null;Ub=0;sc=!1;Pb=Vb=0;Jc=1;Qb=0;Xd=5126;fd=Mc=ud=Dc=0;xa(aa)?(zb=!0,Za=Z.createStream(34962,aa),Xd=Za.dtype):(Za=Z.getBuffer(aa))?Xd=Za.dtype:"constant"in aa?(Jc=2,"number"===typeof aa.constant?(ud=aa.constant,Mc=fd=Dc=0):(ud=0<aa.constant.length?aa.constant[0]:0,Mc=1<aa.constant.length?
aa.constant[1]:0,fd=2<aa.constant.length?aa.constant[2]:0,Dc=3<aa.constant.length?aa.constant[3]:0)):(Za=xa(aa.buffer)?Z.createStream(34962,aa.buffer):Z.getBuffer(aa.buffer),Xd="type"in aa?Ga[aa.type]:Za.dtype,sc=!!aa.normalized,Pb=aa.size|0,Vb=aa.offset|0,Qb=aa.stride|0,Ub=aa.divisor|0);qd=f.location;nc=hd[qd];if(1===Jc){nc.buffer||Q.enableVertexAttribArray(qd);vc=Pb||4;if(nc.type!==Xd||nc.size!==vc||nc.buffer!==Za||nc.normalized!==sc||nc.offset!==Vb||nc.stride!==Qb)Q.bindBuffer(34962,Za.buffer),
Q.vertexAttribPointer(qd,vc,Xd,sc,Qb,Vb),nc.type=Xd,nc.size=vc,nc.buffer=Za,nc.normalized=sc,nc.offset=Vb,nc.stride=Qb;nc.divisor!==Ub&&(e.vertexAttribDivisorANGLE(qd,Ub),nc.divisor=Ub)}else if(nc.buffer&&(Q.disableVertexAttribArray(qd),nc.buffer=null),nc.x!==ud||nc.y!==Mc||nc.z!==fd||nc.w!==Dc)Q.vertexAttrib4f(qd,ud,Mc,fd,Dc),nc.x=ud,nc.y=Mc,nc.z=fd,nc.w=Dc;hc=H.scale;db=hc[0];Sb=hc[1];t&&rc===db&&Wb===Sb||(rc=db,Wb=Sb,Q.uniform2f(c.location,db,Sb));dc=H.scaleFract;ic=dc[0];Ac=dc[1];t&&xc===ic&&
ad===Ac||(xc=ic,ad=Ac,Q.uniform2f(l.location,ic,Ac));Pc=H.translate;Qc=Pc[0];Xc=Pc[1];t&&Rc===Qc&&wd===Xc||(Rc=Qc,wd=Xc,Q.uniform2f(wa.location,Qc,Xc));bd=H.translateFract;Yc=bd[0];cc=bd[1];t&&kc===Yc&&Zc===cc||(kc=Yc,Zc=cc,Q.uniform2f(A.location,Yc,cc));Uc=H.thickness;t&&cd===Uc||(cd=Uc,Q.uniform1f(a.location,Uc));yc=H.depth;t&&id===yc||(id=yc,Q.uniform1f(p.location,yc));rd=w.call(this,ga,H,t);Ze=rd[0];jd=rd[1];Nd=rd[2];ee=rd[3];t&&Be===Ze&&Ba===jd&&Yd===Nd&&Od===ee||(Be=Ze,Ba=jd,Yd=Nd,Od=ee,Q.uniform4f(ma.location,
Ze,jd,Nd,ee));Id=H.dashLength;t&&Gd===Id||(Gd=Id,Q.uniform1f(ca.location,Id));od=H.opacity;t&&Sc===od||(Sc=od,Q.uniform1f(B.location,od));(vd=H.dashTexture)&&"framebuffer"===vd._reglType&&(vd=vd.color[0]);td=vd._texture;Q.uniform1i(G.location,td.bind());kd=H.count;0<kd?wb?e.drawElementsInstancedANGLE(5,4,wb.type,0<<(wb.type-5121>>1),kd):e.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(wb?Q.drawElements(5,4,wb.type,0<<(wb.type-5121>>1)):Q.drawArrays(5,0,4));ga.viewportWidth=Wc;ga.viewportHeight=Vc;fc&&
Z.destroyStream($a);Cb&&Z.destroyStream(vb);fb&&Z.destroyStream(Ma);lb&&Z.destroyStream(Oa);zb&&Z.destroyStream(Za);td.unbind()}S.dirty=!0;ea.setVAO(null);h&&(R.cpuTime+=performance.now()-I)},draw:function(b){var n,v,I,e,k,H,t,T,u,x,J,w,F,E,qa,za,O,X,V,Y,U,be,ze,Ye,Qe,Fd,Ae,te,$d,Wd,ia,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,
Kb,Lb,lb,Oa,Yb,Qa,tb;n=P.next;n!==P.cur&&(n?Q.bindFramebuffer(36160,n.framebuffer):Q.bindFramebuffer(36160,null),P.cur=n);if(S.dirty){var ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb;ub=oa.dither;ub!==S.dither&&(ub?Q.enable(3024):Q.disable(3024),S.dither=ub);Sa=oa.depth_func;Sa!==S.depth_func&&(Q.depthFunc(Sa),S.depth_func=Sa);mb=pa[0];gc=pa[1];if(mb!==Aa[0]||gc!==Aa[1])Q.depthRange(mb,gc),Aa[0]=mb,Aa[1]=gc;zc=oa.depth_mask;zc!==S.depth_mask&&(Q.depthMask(zc),
S.depth_mask=zc);uc=Ea[0];bb=Ea[1];jc=Ea[2];nd=Ea[3];if(uc!==ja[0]||bb!==ja[1]||jc!==ja[2]||nd!==ja[3])Q.colorMask(uc,bb,jc,nd),ja[0]=uc,ja[1]=bb,ja[2]=jc,ja[3]=nd;Xa=oa.cull_enable;Xa!==S.cull_enable&&(Xa?Q.enable(2884):Q.disable(2884),S.cull_enable=Xa);Lc=oa.cull_face;Lc!==S.cull_face&&(Q.cullFace(Lc),S.cull_face=Lc);zb=oa.frontFace;zb!==S.frontFace&&(Q.frontFace(zb),S.frontFace=zb);Za=oa.lineWidth;Za!==S.lineWidth&&(Q.lineWidth(Za),S.lineWidth=Za);Ub=oa.polygonOffset_enable;Ub!==S.polygonOffset_enable&&
(Ub?Q.enable(32823):Q.disable(32823),S.polygonOffset_enable=Ub);sc=Ia[0];Vb=Ia[1];if(sc!==L[0]||Vb!==L[1])Q.polygonOffset(sc,Vb),L[0]=sc,L[1]=Vb;Pb=oa.sample_alpha;Pb!==S.sample_alpha&&(Pb?Q.enable(32926):Q.disable(32926),S.sample_alpha=Pb);Jc=oa.sample_enable;Jc!==S.sample_enable&&(Jc?Q.enable(32928):Q.disable(32928),S.sample_enable=Jc);Qb=ac[0];Xd=ac[1];if(Qb!==Ta[0]||Xd!==Ta[1])Q.sampleCoverage(Qb,Xd),Ta[0]=Qb,Ta[1]=Xd;Dc=oa.stencil_mask;Dc!==S.stencil_mask&&(Q.stencilMask(Dc),S.stencil_mask=Dc);
ud=N[0];Mc=N[1];fd=N[2];if(ud!==ta[0]||Mc!==ta[1]||fd!==ta[2])Q.stencilFunc(ud,Mc,fd),ta[0]=ud,ta[1]=Mc,ta[2]=fd;qd=Gb[0];nc=Gb[1];vc=Gb[2];hc=Gb[3];if(qd!==ba[0]||nc!==ba[1]||vc!==ba[2]||hc!==ba[3])Q.stencilOpSeparate(qd,nc,vc,hc),ba[0]=qd,ba[1]=nc,ba[2]=vc,ba[3]=hc;db=va[0];rc=va[1];Sb=va[2];Wb=va[3];if(db!==dd[0]||rc!==dd[1]||Sb!==dd[2]||Wb!==dd[3])Q.stencilOpSeparate(db,rc,Sb,Wb),dd[0]=db,dd[1]=rc,dd[2]=Sb,dd[3]=Wb}v=b.viewport;I=v.x|0;e=v.y|0;k="width"in v?v.width|0:ga.framebufferWidth-I;H="height"in
v?v.height|0:ga.framebufferHeight-e;t=ga.viewportWidth;ga.viewportWidth=k;T=ga.viewportHeight;ga.viewportHeight=H;Q.viewport(I,e,k,H);ra[0]=I;ra[1]=e;ra[2]=k;ra[3]=H;Q.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;Q.enable(3042);S.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;Q.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;(u=D.call(this,ga,b,0))?Q.enable(2929):Q.disable(2929);S.depth_enable=u;x=b.viewport;J=x.x|0;w=x.y|0;F="width"in x?
x.width|0:ga.framebufferWidth-J;E="height"in x?x.height|0:ga.framebufferHeight-w;Q.scissor(J,w,F,E);r[0]=J;r[1]=w;r[2]=F;r[3]=E;Q.enable(3089);S.scissor_enable=!0;Q.disable(2960);S.stencil_enable=!1;if(qa=S.profile)za=performance.now(),R.count++;Q.useProgram(M.program);O=q.angle_instanced_arrays;ea.setVAO(null);na.buffer=b.positionBuffer;X=!1;V=null;Y=0;U=!1;ze=be=0;Ye=1;Qe=0;Fd=5126;Wd=$d=te=Ae=0;xa(na)?(X=!0,V=Z.createStream(34962,na),Fd=V.dtype):(V=Z.getBuffer(na))?Fd=V.dtype:"constant"in na?(Ye=
2,"number"===typeof na.constant?(te=na.constant,$d=Wd=Ae=0):(te=0<na.constant.length?na.constant[0]:0,$d=1<na.constant.length?na.constant[1]:0,Wd=2<na.constant.length?na.constant[2]:0,Ae=3<na.constant.length?na.constant[3]:0)):(V=xa(na.buffer)?Z.createStream(34962,na.buffer):Z.getBuffer(na.buffer),Fd="type"in na?Ga[na.type]:V.dtype,U=!!na.normalized,ze=na.size|0,be=na.offset|0,Qe=na.stride|0,Y=na.divisor|0);ia=sa.location;md=hd[ia];if(1===Ye){md.buffer||Q.enableVertexAttribArray(ia);$c=ze||2;if(md.type!==
Fd||md.size!==$c||md.buffer!==V||md.normalized!==U||md.offset!==be||md.stride!==Qe)Q.bindBuffer(34962,V.buffer),Q.vertexAttribPointer(ia,$c,Fd,U,Qe,be),md.type=Fd,md.size=$c,md.buffer=V,md.normalized=U,md.offset=be,md.stride=Qe;md.divisor!==Y&&(O.vertexAttribDivisorANGLE(ia,Y),md.divisor=Y)}else if(md.buffer&&(Q.disableVertexAttribArray(ia),md.buffer=null),md.x!==te||md.y!==$d||md.z!==Wd||md.w!==Ae)Q.vertexAttrib4f(ia,te,$d,Wd,Ae),md.x=te,md.y=$d,md.z=Wd,md.w=Ae;Ca.buffer=b.positionBuffer;sd=!1;Kc=
null;pd=0;Ec=!1;Oc=ed=0;ld=1;Ab=0;Eb=5126;Bb=wc=wb=tc=0;xa(Ca)?(sd=!0,Kc=Z.createStream(34962,Ca),Eb=Kc.dtype):(Kc=Z.getBuffer(Ca))?Eb=Kc.dtype:"constant"in Ca?(ld=2,"number"===typeof Ca.constant?(wb=Ca.constant,wc=Bb=tc=0):(wb=0<Ca.constant.length?Ca.constant[0]:0,wc=1<Ca.constant.length?Ca.constant[1]:0,Bb=2<Ca.constant.length?Ca.constant[2]:0,tc=3<Ca.constant.length?Ca.constant[3]:0)):(Kc=xa(Ca.buffer)?Z.createStream(34962,Ca.buffer):Z.getBuffer(Ca.buffer),Eb="type"in Ca?Ga[Ca.type]:Kc.dtype,Ec=
!!Ca.normalized,Oc=Ca.size|0,ed=Ca.offset|0,Ab=Ca.stride|0,pd=Ca.divisor|0);Ic=z.location;lc=hd[Ic];if(1===ld){lc.buffer||Q.enableVertexAttribArray(Ic);Fc=Oc||2;if(lc.type!==Eb||lc.size!==Fc||lc.buffer!==Kc||lc.normalized!==Ec||lc.offset!==ed||lc.stride!==Ab)Q.bindBuffer(34962,Kc.buffer),Q.vertexAttribPointer(Ic,Fc,Eb,Ec,Ab,ed),lc.type=Eb,lc.size=Fc,lc.buffer=Kc,lc.normalized=Ec,lc.offset=ed,lc.stride=Ab;lc.divisor!==pd&&(O.vertexAttribDivisorANGLE(Ic,pd),lc.divisor=pd)}else if(lc.buffer&&(Q.disableVertexAttribArray(Ic),
lc.buffer=null),lc.x!==wb||lc.y!==wc||lc.z!==Bb||lc.w!==tc)Q.vertexAttrib4f(Ic,wb,wc,Bb,tc),lc.x=wb,lc.y=wc,lc.z=Bb,lc.w=tc;ya.buffer=b.positionFractBuffer;Wc=!1;Vc=null;Cc=0;ec=!1;oc=Gc=0;pc=1;mc=0;fc=5126;cb=xb=Hc=$a=0;xa(ya)?(Wc=!0,Vc=Z.createStream(34962,ya),fc=Vc.dtype):(Vc=Z.getBuffer(ya))?fc=Vc.dtype:"constant"in ya?(pc=2,"number"===typeof ya.constant?(Hc=ya.constant,xb=cb=$a=0):(Hc=0<ya.constant.length?ya.constant[0]:0,xb=1<ya.constant.length?ya.constant[1]:0,cb=2<ya.constant.length?ya.constant[2]:
0,$a=3<ya.constant.length?ya.constant[3]:0)):(Vc=xa(ya.buffer)?Z.createStream(34962,ya.buffer):Z.getBuffer(ya.buffer),fc="type"in ya?Ga[ya.type]:Vc.dtype,ec=!!ya.normalized,oc=ya.size|0,Gc=ya.offset|0,mc=ya.stride|0,Cc=ya.divisor|0);Mb=d.location;ab=hd[Mb];if(1===pc){ab.buffer||Q.enableVertexAttribArray(Mb);nb=oc||2;if(ab.type!==fc||ab.size!==nb||ab.buffer!==Vc||ab.normalized!==ec||ab.offset!==Gc||ab.stride!==mc)Q.bindBuffer(34962,Vc.buffer),Q.vertexAttribPointer(Mb,nb,fc,ec,mc,Gc),ab.type=fc,ab.size=
nb,ab.buffer=Vc,ab.normalized=ec,ab.offset=Gc,ab.stride=mc;ab.divisor!==Cc&&(O.vertexAttribDivisorANGLE(Mb,Cc),ab.divisor=Cc)}else if(ab.buffer&&(Q.disableVertexAttribArray(Mb),ab.buffer=null),ab.x!==Hc||ab.y!==xb||ab.z!==cb||ab.w!==$a)Q.vertexAttrib4f(Mb,Hc,xb,cb,$a),ab.x=Hc,ab.y=xb,ab.z=cb,ab.w=$a;ka.buffer=b.positionFractBuffer;Va=!1;Tc=null;Hb=0;Ib=!1;Nb=qc=0;jb=1;Fb=0;Cb=5126;Ob=Xb=hb=vb=0;xa(ka)?(Va=!0,Tc=Z.createStream(34962,ka),Cb=Tc.dtype):(Tc=Z.getBuffer(ka))?Cb=Tc.dtype:"constant"in ka?
(jb=2,"number"===typeof ka.constant?(hb=ka.constant,Xb=Ob=vb=0):(hb=0<ka.constant.length?ka.constant[0]:0,Xb=1<ka.constant.length?ka.constant[1]:0,Ob=2<ka.constant.length?ka.constant[2]:0,vb=3<ka.constant.length?ka.constant[3]:0)):(Tc=xa(ka.buffer)?Z.createStream(34962,ka.buffer):Z.getBuffer(ka.buffer),Cb="type"in ka?Ga[ka.type]:Tc.dtype,Ib=!!ka.normalized,Nb=ka.size|0,qc=ka.offset|0,Fb=ka.stride|0,Hb=ka.divisor|0);pb=W.location;Ua=hd[pb];if(1===jb){Ua.buffer||Q.enableVertexAttribArray(pb);Tb=Nb||
2;if(Ua.type!==Cb||Ua.size!==Tb||Ua.buffer!==Tc||Ua.normalized!==Ib||Ua.offset!==qc||Ua.stride!==Fb)Q.bindBuffer(34962,Tc.buffer),Q.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=Tb,Ua.buffer=Tc,Ua.normalized=Ib,Ua.offset=qc,Ua.stride=Fb;Ua.divisor!==Hb&&(O.vertexAttribDivisorANGLE(pb,Hb),Ua.divisor=Hb)}else if(Ua.buffer&&(Q.disableVertexAttribArray(pb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Xb||Ua.z!==Ob||Ua.w!==vb)Q.vertexAttrib4f(pb,hb,Xb,Ob,vb),Ua.x=hb,Ua.y=Xb,Ua.z=Ob,Ua.w=vb;aa.buffer=
b.colorBuffer;yb=!1;bc=null;ib=0;ob=!1;qb=Ja=0;La=1;eb=0;fb=5126;sb=Wa=kb=Ma=0;xa(aa)?(yb=!0,bc=Z.createStream(34962,aa),fb=bc.dtype):(bc=Z.getBuffer(aa))?fb=bc.dtype:"constant"in aa?(La=2,"number"===typeof aa.constant?(kb=aa.constant,Wa=sb=Ma=0):(kb=0<aa.constant.length?aa.constant[0]:0,Wa=1<aa.constant.length?aa.constant[1]:0,sb=2<aa.constant.length?aa.constant[2]:0,Ma=3<aa.constant.length?aa.constant[3]:0)):(bc=xa(aa.buffer)?Z.createStream(34962,aa.buffer):Z.getBuffer(aa.buffer),fb="type"in aa?
Ga[aa.type]:bc.dtype,ob=!!aa.normalized,qb=aa.size|0,Ja=aa.offset|0,eb=aa.stride|0,ib=aa.divisor|0);rb=f.location;Pa=hd[rb];if(1===La){Pa.buffer||Q.enableVertexAttribArray(rb);Bc=qb||4;if(Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==bc||Pa.normalized!==ob||Pa.offset!==Ja||Pa.stride!==eb)Q.bindBuffer(34962,bc.buffer),Q.vertexAttribPointer(rb,Bc,fb,ob,eb,Ja),Pa.type=fb,Pa.size=Bc,Pa.buffer=bc,Pa.normalized=ob,Pa.offset=Ja,Pa.stride=eb;Pa.divisor!==ib&&(O.vertexAttribDivisorANGLE(rb,ib),Pa.divisor=ib)}else if(Pa.buffer&&
(Q.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==Ma)Q.vertexAttrib4f(rb,kb,Wa,sb,Ma),Pa.x=kb,Pa.y=Wa,Pa.z=sb,Pa.w=Ma;Ra=da.location;Jb=hd[Ra];Jb.buffer||Q.enableVertexAttribArray(Ra);if(5126!==Jb.type||1!==Jb.size||Jb.buffer!==m||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Ra,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=m,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(O.vertexAttribDivisorANGLE(Ra,
0),Jb.divisor=0);Db=C.location;Na=hd[Db];Na.buffer||Q.enableVertexAttribArray(Db);if(5126!==Na.type||1!==Na.size||Na.buffer!==g||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)Q.bindBuffer(34962,g.buffer),Q.vertexAttribPointer(Db,1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=g,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(O.vertexAttribDivisorANGLE(Db,0),Na.divisor=0);Jd=b.scale;Q.uniform2f(c.location,Jd[0],Jd[1]);Ya=b.scaleFract;Q.uniform2f(l.location,Ya[0],Ya[1]);Kb=b.translate;
Q.uniform2f(wa.location,Kb[0],Kb[1]);Lb=b.translateFract;Q.uniform2f(A.location,Lb[0],Lb[1]);Q.uniform1f(a.location,b.thickness);Q.uniform1f(p.location,b.depth);lb=h.call(this,ga,b,0);Q.uniform4f(ma.location,lb[0],lb[1],lb[2],lb[3]);Q.uniform1f(ca.location,b.dashLength);Q.uniform1f(B.location,b.opacity);(Oa=b.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);Yb=Oa._texture;Q.uniform1i(G.location,Yb.bind());(Qa=K.elements)?Q.bindBuffer(34963,Qa.buffer.buffer):ea.currentVAO&&(Qa=y.getElements(ea.currentVAO.elements))&&
Q.bindBuffer(34963,Qa.buffer.buffer);tb=b.count;0<tb?Qa?O.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),tb):O.drawArraysInstancedANGLE(5,0,4,tb):0>tb&&(Qa?Q.drawElements(5,4,Qa.type,0<<(Qa.type-5121>>1)):Q.drawArrays(5,0,4));S.dirty=!0;ea.setVAO(null);ga.viewportWidth=t;ga.viewportHeight=T;qa&&(R.cpuTime+=performance.now()-za);X&&Z.destroyStream(V);sd&&Z.destroyStream(Kc);Wc&&Z.destroyStream(Vc);Va&&Z.destroyStream(Tc);yb&&Z.destroyStream(bc);Yb.unbind()},scope:function(a,c,d){var f,
l,q,h,r,L,e,N,p,k,A,z,ra,Ia,y,ac,G,ha,ba,D,C,Q,B,M,ta,P,ea,w,V,W,ja,Ta,ca,Aa,pa,va,Ea,sa,Gb,la,da,wa,ma,Da,dd,hd,U,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,ia,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Ze,Be,jd,Ba,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,
Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe;f=a.viewport;l=f.x|0;q=f.y|0;h="width"in f?f.width|0:ga.framebufferWidth-l;r="height"in f?f.height|0:ga.framebufferHeight-q;L=ga.viewportWidth;ga.viewportWidth=h;e=ga.viewportHeight;ga.viewportHeight=r;N=I[0];I[0]=l;p=I[1];I[1]=q;k=I[2];I[2]=h;A=I[3];I[3]=r;z=T[0];T[0]=0;ra=T[1];T[1]=0;Ia=T[2];T[2]=0;y=T[3];T[3]=0;ac=oa.blend_enable;oa.blend_enable=!0;G=qa[0];qa[0]=
32774;ha=qa[1];qa[1]=32774;ba=za[0];za[0]=770;D=za[1];za[1]=771;C=za[2];za[2]=773;Q=za[3];za[3]=1;B=b.call(this,ga,a,d);M=oa.depth_enable;oa.depth_enable=B;ta=a.viewport;P=ta.x|0;ea=ta.y|0;w="width"in ta?ta.width|0:ga.framebufferWidth-P;V="height"in ta?ta.height|0:ga.framebufferHeight-ea;W=v[0];v[0]=P;ja=v[1];v[1]=ea;Ta=v[2];v[2]=w;ca=v[3];v[3]=V;Aa=oa.scissor_enable;oa.scissor_enable=!0;pa=oa.stencil_enable;oa.stencil_enable=!1;if(va=S.profile)Ea=performance.now(),R.count++;sa=K.offset;K.offset=
0;Gb=K.count;K.count=4;la=a.count;da=K.instances;K.instances=la;wa=K.primitive;K.primitive=5;ma=a.dashLength;Da=H[23];H[23]=ma;dd=a.dashTexture;hd=H[24];H[24]=dd;U=a.depth;Wc=H[22];H[22]=U;Vc=a.id;Cc=H[31];H[31]=Vc;ec=a.miterLimit;Gc=H[32];H[32]=ec;oc=E.call(this,ga,a,d);pc=H[33];H[33]=oc;mc=a.opacity;fc=H[10];H[10]=mc;$a=ga.pixelRatio;Hc=H[34];H[34]=$a;xb=a.scale;cb=H[6];H[6]=xb;Mb=a.scaleFract;ab=H[7];H[7]=Mb;nb=a.thickness;Va=H[21];H[21]=nb;ia=a.translate;Hb=H[8];H[8]=ia;Ib=a.translateFract;qc=
H[9];H[9]=Ib;Nb=J.call(this,ga,a,d);jb=H[3];H[3]=Nb;na.buffer=a.positionBuffer;Fb=!1;Cb=null;vb=0;hb=!1;Ob=Xb=0;pb=1;Ua=0;Tb=5126;ob=ib=bc=yb=0;xa(na)?(Fb=!0,Cb=Z.createStream(34962,na),Tb=Cb.dtype):(Cb=Z.getBuffer(na))?Tb=Cb.dtype:"constant"in na?(pb=2,"number"===typeof na.constant?(bc=na.constant,ib=ob=yb=0):(bc=0<na.constant.length?na.constant[0]:0,ib=1<na.constant.length?na.constant[1]:0,ob=2<na.constant.length?na.constant[2]:0,yb=3<na.constant.length?na.constant[3]:0)):(Cb=xa(na.buffer)?Z.createStream(34962,
na.buffer):Z.getBuffer(na.buffer),Tb="type"in na?Ga[na.type]:Cb.dtype,hb=!!na.normalized,Ob=na.size|0,Xb=na.offset|0,Ua=na.stride|0,vb=na.divisor|0);Ja=O.buffer;O.buffer=Cb;qb=O.divisor;O.divisor=vb;La=O.normalized;O.normalized=hb;eb=O.offset;O.offset=Xb;fb=O.size;O.size=Ob;Ma=O.state;O.state=pb;kb=O.stride;O.stride=Ua;Wa=O.type;O.type=Tb;sb=O.w;O.w=yb;rb=O.x;O.x=bc;Pa=O.y;O.y=ib;Bc=O.z;O.z=ob;ya.buffer=a.positionFractBuffer;Ra=!1;Jb=null;Db=0;Na=!1;Ya=Jd=0;Kb=1;Lb=0;lb=5126;tb=Qa=Yb=Oa=0;xa(ya)?
(Ra=!0,Jb=Z.createStream(34962,ya),lb=Jb.dtype):(Jb=Z.getBuffer(ya))?lb=Jb.dtype:"constant"in ya?(Kb=2,"number"===typeof ya.constant?(Yb=ya.constant,Qa=tb=Oa=0):(Yb=0<ya.constant.length?ya.constant[0]:0,Qa=1<ya.constant.length?ya.constant[1]:0,tb=2<ya.constant.length?ya.constant[2]:0,Oa=3<ya.constant.length?ya.constant[3]:0)):(Jb=xa(ya.buffer)?Z.createStream(34962,ya.buffer):Z.getBuffer(ya.buffer),lb="type"in ya?Ga[ya.type]:Jb.dtype,Na=!!ya.normalized,Ya=ya.size|0,Jd=ya.offset|0,Lb=ya.stride|0,Db=
ya.divisor|0);ub=X.buffer;X.buffer=Jb;Sa=X.divisor;X.divisor=Db;mb=X.normalized;X.normalized=Na;gc=X.offset;X.offset=Jd;zc=X.size;X.size=Ya;uc=X.state;X.state=Kb;bb=X.stride;X.stride=Lb;jc=X.type;X.type=lb;nd=X.w;X.w=Oa;Xa=X.x;X.x=Yb;Lc=X.y;X.y=Qa;zb=X.z;X.z=tb;Ca.buffer=a.positionBuffer;Za=!1;Ub=null;sc=0;Vb=!1;Jc=Pb=0;Qb=1;Xd=0;Dc=5126;qd=fd=Mc=ud=0;xa(Ca)?(Za=!0,Ub=Z.createStream(34962,Ca),Dc=Ub.dtype):(Ub=Z.getBuffer(Ca))?Dc=Ub.dtype:"constant"in Ca?(Qb=2,"number"===typeof Ca.constant?(Mc=Ca.constant,
fd=qd=ud=0):(Mc=0<Ca.constant.length?Ca.constant[0]:0,fd=1<Ca.constant.length?Ca.constant[1]:0,qd=2<Ca.constant.length?Ca.constant[2]:0,ud=3<Ca.constant.length?Ca.constant[3]:0)):(Ub=xa(Ca.buffer)?Z.createStream(34962,Ca.buffer):Z.getBuffer(Ca.buffer),Dc="type"in Ca?Ga[Ca.type]:Ub.dtype,Vb=!!Ca.normalized,Jc=Ca.size|0,Pb=Ca.offset|0,Xd=Ca.stride|0,sc=Ca.divisor|0);nc=x.buffer;x.buffer=Ub;vc=x.divisor;x.divisor=sc;hc=x.normalized;x.normalized=Vb;db=x.offset;x.offset=Pb;rc=x.size;x.size=Jc;Sb=x.state;
x.state=Qb;Wb=x.stride;x.stride=Xd;dc=x.type;x.type=Dc;ic=x.w;x.w=ud;xc=x.x;x.x=Mc;Ac=x.y;x.y=fd;ad=x.z;x.z=qd;ka.buffer=a.positionFractBuffer;Pc=!1;Qc=null;Rc=0;Xc=!1;bd=wd=0;Yc=1;kc=0;cc=5126;yc=cd=Uc=Zc=0;xa(ka)?(Pc=!0,Qc=Z.createStream(34962,ka),cc=Qc.dtype):(Qc=Z.getBuffer(ka))?cc=Qc.dtype:"constant"in ka?(Yc=2,"number"===typeof ka.constant?(Uc=ka.constant,cd=yc=Zc=0):(Uc=0<ka.constant.length?ka.constant[0]:0,cd=1<ka.constant.length?ka.constant[1]:0,yc=2<ka.constant.length?ka.constant[2]:0,Zc=
3<ka.constant.length?ka.constant[3]:0)):(Qc=xa(ka.buffer)?Z.createStream(34962,ka.buffer):Z.getBuffer(ka.buffer),cc="type"in ka?Ga[ka.type]:Qc.dtype,Xc=!!ka.normalized,bd=ka.size|0,wd=ka.offset|0,kc=ka.stride|0,Rc=ka.divisor|0);id=u.buffer;u.buffer=Qc;rd=u.divisor;u.divisor=Rc;Ze=u.normalized;u.normalized=Xc;Be=u.offset;u.offset=wd;jd=u.size;u.size=bd;Ba=u.state;u.state=Yc;Nd=u.stride;u.stride=kc;Yd=u.type;u.type=cc;ee=u.w;u.w=Zc;Od=u.x;u.x=Uc;Id=u.y;u.y=cd;Gd=u.z;u.z=yc;aa.buffer=a.colorBuffer;od=
!1;Sc=null;vd=0;td=!1;xd=kd=0;Bd=1;Ed=0;oe=5126;je=ke=ue=qe=0;xa(aa)?(od=!0,Sc=Z.createStream(34962,aa),oe=Sc.dtype):(Sc=Z.getBuffer(aa))?oe=Sc.dtype:"constant"in aa?(Bd=2,"number"===typeof aa.constant?(ue=aa.constant,ke=je=qe=0):(ue=0<aa.constant.length?aa.constant[0]:0,ke=1<aa.constant.length?aa.constant[1]:0,je=2<aa.constant.length?aa.constant[2]:0,qe=3<aa.constant.length?aa.constant[3]:0)):(Sc=xa(aa.buffer)?Z.createStream(34962,aa.buffer):Z.getBuffer(aa.buffer),oe="type"in aa?Ga[aa.type]:Sc.dtype,
td=!!aa.normalized,xd=aa.size|0,kd=aa.offset|0,Ed=aa.stride|0,vd=aa.divisor|0);ie=F.buffer;F.buffer=Sc;ve=F.divisor;F.divisor=vd;fe=F.normalized;F.normalized=td;le=F.offset;F.offset=kd;Nc=F.size;F.size=xd;gd=F.state;F.state=Bd;we=F.stride;F.stride=Ed;pe=F.type;F.type=oe;Kd=F.w;F.w=qe;Pd=F.x;F.x=ue;Qd=F.y;F.y=ke;Rd=F.z;F.z=je;me=Y.buffer;Y.buffer=m;He=Y.divisor;Y.divisor=0;Ce=Y.normalized;Y.normalized=!1;re=Y.offset;Y.offset=0;Re=Y.size;Y.size=0;Se=Y.state;Y.state=1;Ne=Y.stride;Y.stride=8;xe=Y.type;
Y.type=5126;Fe=Y.w;Y.w=0;Ie=Y.x;Y.x=0;Je=Y.y;Y.y=0;Ke=Y.z;Y.z=0;Ge=t.buffer;t.buffer=g;Md=t.divisor;t.divisor=0;Zd=t.normalized;t.normalized=!1;de=t.offset;t.offset=4;ge=t.size;t.size=0;Le=t.state;t.state=1;Hd=t.stride;t.stride=8;Sd=t.type;t.type=5126;De=t.w;t.w=0;Me=t.x;t.x=0;bf=t.y;t.y=0;af=t.z;t.z=0;Te=n.vert;n.vert=20;Oe=n.frag;n.frag=19;S.dirty=!0;c(ga,a,d);ga.viewportWidth=L;ga.viewportHeight=e;I[0]=N;I[1]=p;I[2]=k;I[3]=A;T[0]=z;T[1]=ra;T[2]=Ia;T[3]=y;oa.blend_enable=ac;qa[0]=G;qa[1]=ha;za[0]=
ba;za[1]=D;za[2]=C;za[3]=Q;oa.depth_enable=M;v[0]=W;v[1]=ja;v[2]=Ta;v[3]=ca;oa.scissor_enable=Aa;oa.stencil_enable=pa;va&&(R.cpuTime+=performance.now()-Ea);K.offset=sa;K.count=Gb;K.instances=da;K.primitive=wa;H[23]=Da;H[24]=hd;H[22]=Wc;H[31]=Cc;H[32]=Gc;H[33]=pc;H[10]=fc;H[34]=Hc;H[6]=cb;H[7]=ab;H[21]=Va;H[8]=Hb;H[9]=qc;H[3]=jb;Fb&&Z.destroyStream(Cb);O.buffer=Ja;O.divisor=qb;O.normalized=La;O.offset=eb;O.size=fb;O.state=Ma;O.stride=kb;O.type=Wa;O.w=sb;O.x=rb;O.y=Pa;O.z=Bc;Ra&&Z.destroyStream(Jb);
X.buffer=ub;X.divisor=Sa;X.normalized=mb;X.offset=gc;X.size=zc;X.state=uc;X.stride=bb;X.type=jc;X.w=nd;X.x=Xa;X.y=Lc;X.z=zb;Za&&Z.destroyStream(Ub);x.buffer=nc;x.divisor=vc;x.normalized=hc;x.offset=db;x.size=rc;x.state=Sb;x.stride=Wb;x.type=dc;x.w=ic;x.x=xc;x.y=Ac;x.z=ad;Pc&&Z.destroyStream(Qc);u.buffer=id;u.divisor=rd;u.normalized=Ze;u.offset=Be;u.size=jd;u.state=Ba;u.stride=Nd;u.type=Yd;u.w=ee;u.x=Od;u.y=Id;u.z=Gd;od&&Z.destroyStream(Sc);F.buffer=ie;F.divisor=ve;F.normalized=fe;F.offset=le;F.size=
Nc;F.state=gd;F.stride=we;F.type=pe;F.w=Kd;F.x=Pd;F.y=Qd;F.z=Rd;Y.buffer=me;Y.divisor=He;Y.normalized=Ce;Y.offset=re;Y.size=Re;Y.state=Se;Y.stride=Ne;Y.type=xe;Y.w=Fe;Y.x=Ie;Y.y=Je;Y.z=Ke;t.buffer=Ge;t.divisor=Md;t.normalized=Zd;t.offset=de;t.size=ge;t.state=Le;t.stride=Hd;t.type=Sd;t.w=De;t.x=Me;t.y=bf;t.z=af;n.vert=Te;n.frag=Oe;S.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(e,
R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,hd,Z,ga,S){var K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,dd,Gb,ba,I,ra,Ga,na,ya,Ca,ka,aa,ua,Ka,Fa,gb,fa;K=e.attributes;y=e.buffer;q=e.context;P=e.current;Q=e.draw;xa=e.elements;oa=e.extensions;n=e.framebuffer;H=e.gl;ea=e.isBufferArgs;T=e.next;la=e.shader;qa=e.uniforms;Da=e.vao;za=T.blend_color;ha=P.blend_color;Ea=T.blend_equation;ja=P.blend_equation;pa=T.blend_func;Aa=P.blend_func;Ia=T.colorMask;
L=P.colorMask;ac=T.depth_range;Ta=P.depth_range;v=T.polygonOffset_offset;r=P.polygonOffset_offset;N=T.sample_coverage;ta=P.sample_coverage;va=T.scissor_box;dd=P.scissor_box;Gb=T.stencil_func;ba=P.stencil_func;I=T.stencil_opBack;ra=P.stencil_opBack;Ga=T.stencil_opFront;na=P.stencil_opFront;ya=T.viewport;Ca=P.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ka={divisor:1,offset:4,
stride:4};Fa={divisor:1,offset:16,stride:8};gb={divisor:1,offset:24,stride:8};fa={divisor:1,offset:0,stride:8};return{batch:function(b,h){var e,k,t,D,u,M;e=n.next;e!==n.cur&&(e?H.bindFramebuffer(36160,e.framebuffer):H.bindFramebuffer(36160,null),n.cur=e);if(P.dirty){var x,ya,J,F,E,qa,za,O,V,X,Y,pa,va,Ea,la,U,$d,ia,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb;x=T.dither;x!==P.dither&&(x?H.enable(3024):H.disable(3024),P.dither=x);ya=T.depth_func;ya!==P.depth_func&&(H.depthFunc(ya),P.depth_func=ya);J=ac[0];F=
ac[1];if(J!==Ta[0]||F!==Ta[1])H.depthRange(J,F),Ta[0]=J,Ta[1]=F;E=T.depth_mask;E!==P.depth_mask&&(H.depthMask(E),P.depth_mask=E);qa=Ia[0];za=Ia[1];O=Ia[2];V=Ia[3];if(qa!==L[0]||za!==L[1]||O!==L[2]||V!==L[3])H.colorMask(qa,za,O,V),L[0]=qa,L[1]=za,L[2]=O,L[3]=V;X=T.frontFace;X!==P.frontFace&&(H.frontFace(X),P.frontFace=X);Y=T.lineWidth;Y!==P.lineWidth&&(H.lineWidth(Y),P.lineWidth=Y);pa=T.polygonOffset_enable;pa!==P.polygonOffset_enable&&(pa?H.enable(32823):H.disable(32823),P.polygonOffset_enable=pa);
va=v[0];Ea=v[1];if(va!==r[0]||Ea!==r[1])H.polygonOffset(va,Ea),r[0]=va,r[1]=Ea;la=T.sample_alpha;la!==P.sample_alpha&&(la?H.enable(32926):H.disable(32926),P.sample_alpha=la);U=T.sample_enable;U!==P.sample_enable&&(U?H.enable(32928):H.disable(32928),P.sample_enable=U);$d=N[0];ia=N[1];if($d!==ta[0]||ia!==ta[1])H.sampleCoverage($d,ia),ta[0]=$d,ta[1]=ia;Ld=T.stencil_mask;Ld!==P.stencil_mask&&(H.stencilMask(Ld),P.stencil_mask=Ld);md=Gb[0];$c=Gb[1];sd=Gb[2];if(md!==ba[0]||$c!==ba[1]||sd!==ba[2])H.stencilFunc(md,
$c,sd),ba[0]=md,ba[1]=$c,ba[2]=sd;Kc=Ga[0];pd=Ga[1];Ec=Ga[2];ed=Ga[3];if(Kc!==na[0]||pd!==na[1]||Ec!==na[2]||ed!==na[3])H.stencilOpSeparate(Kc,pd,Ec,ed),na[0]=Kc,na[1]=pd,na[2]=Ec,na[3]=ed;Oc=I[0];ld=I[1];Ab=I[2];Eb=I[3];if(Oc!==ra[0]||ld!==ra[1]||Ab!==ra[2]||Eb!==ra[3])H.stencilOpSeparate(Oc,ld,Ab,Eb),ra[0]=Oc,ra[1]=ld,ra[2]=Ab,ra[3]=Eb}H.blendColor(0,0,0,0);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=0;H.enable(3042);P.blend_enable=!0;H.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;H.blendFuncSeparate(770,
771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;H.enable(2884);P.cull_enable=!0;H.cullFace(1029);P.cull_face=1029;H.enable(3089);P.scissor_enable=!0;H.disable(2960);P.stencil_enable=!1;if(k=P.profile)t=performance.now(),R.count+=h;H.useProgram(w.program);D=oa.angle_instanced_arrays;var tc,wb,wc,Bb,Ic;Da.setVAO(null);tc=B.location;wb=K[tc];wb.buffer||H.enableVertexAttribArray(tc);if(5126!==wb.type||1!==wb.size||wb.buffer!==m||!1!==wb.normalized||0!==wb.offset||8!==wb.stride)H.bindBuffer(34962,m.buffer),
H.vertexAttribPointer(tc,1,5126,!1,8,0),wb.type=5126,wb.size=1,wb.buffer=m,wb.normalized=!1,wb.offset=0,wb.stride=8;0!==wb.divisor&&(D.vertexAttribDivisorANGLE(tc,0),wb.divisor=0);wc=c.location;Bb=K[wc];Bb.buffer||H.enableVertexAttribArray(wc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==g||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)H.bindBuffer(34962,g.buffer),H.vertexAttribPointer(wc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=g,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&
(D.vertexAttribDivisorANGLE(wc,0),Bb.divisor=0);(Ic=Q.elements)?H.bindBuffer(34963,Ic.buffer.buffer):Da.currentVAO&&(Ic=xa.getElements(Da.currentVAO.elements))&&H.bindBuffer(34963,Ic.buffer.buffer);for(u=0;u<h;++u){M=b[u];var lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,
rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Ze,Be,jd,Ba,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc;lc=M.viewport;Fc=lc.x|0;Wc=lc.y|0;Vc="width"in lc?lc.width|0:q.framebufferWidth-Fc;Cc="height"in lc?lc.height|0:q.framebufferHeight-Wc;ec=q.viewportWidth;q.viewportWidth=Vc;Gc=q.viewportHeight;q.viewportHeight=Cc;H.viewport(Fc,Wc,Vc,Cc);Ca[0]=Fc;Ca[1]=Wc;Ca[2]=Vc;Ca[3]=Cc;(oc=sa.call(this,q,M,u))?H.enable(2929):H.disable(2929);P.depth_enable=oc;pc=
M.viewport;mc=pc.x|0;fc=pc.y|0;$a="width"in pc?pc.width|0:q.framebufferWidth-mc;Hc="height"in pc?pc.height|0:q.framebufferHeight-fc;H.scissor(mc,fc,$a,Hc);dd[0]=mc;dd[1]=fc;dd[2]=$a;dd[3]=Hc;ua.buffer=M.positionBuffer;xb=!1;cb=null;Mb=0;ab=!1;Va=nb=0;Tc=1;Hb=0;Ib=5126;Fb=jb=Nb=qc=0;ea(ua)?(xb=!0,cb=y.createStream(34962,ua),Ib=cb.dtype):(cb=y.getBuffer(ua))?Ib=cb.dtype:"constant"in ua?(Tc=2,"number"===typeof ua.constant?(Nb=ua.constant,jb=Fb=qc=0):(Nb=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?
ua.constant[1]:0,Fb=2<ua.constant.length?ua.constant[2]:0,qc=3<ua.constant.length?ua.constant[3]:0)):(cb=ea(ua.buffer)?y.createStream(34962,ua.buffer):y.getBuffer(ua.buffer),Ib="type"in ua?ka[ua.type]:cb.dtype,ab=!!ua.normalized,Va=ua.size|0,nb=ua.offset|0,Hb=ua.stride|0,Mb=ua.divisor|0);Cb=f.location;vb=K[Cb];if(1===Tc){vb.buffer||H.enableVertexAttribArray(Cb);hb=Va||2;if(vb.type!==Ib||vb.size!==hb||vb.buffer!==cb||vb.normalized!==ab||vb.offset!==nb||vb.stride!==Hb)H.bindBuffer(34962,cb.buffer),
H.vertexAttribPointer(Cb,hb,Ib,ab,Hb,nb),vb.type=Ib,vb.size=hb,vb.buffer=cb,vb.normalized=ab,vb.offset=nb,vb.stride=Hb;vb.divisor!==Mb&&(D.vertexAttribDivisorANGLE(Cb,Mb),vb.divisor=Mb)}else if(vb.buffer&&(H.disableVertexAttribArray(Cb),vb.buffer=null),vb.x!==Nb||vb.y!==jb||vb.z!==Fb||vb.w!==qc)H.vertexAttrib4f(Cb,Nb,jb,Fb,qc),vb.x=Nb,vb.y=jb,vb.z=Fb,vb.w=qc;Fa.buffer=M.positionBuffer;Xb=!1;Ob=null;pb=0;Ua=!1;yb=Tb=0;bc=1;ib=0;ob=5126;eb=La=qb=Ja=0;ea(Fa)?(Xb=!0,Ob=y.createStream(34962,Fa),ob=Ob.dtype):
(Ob=y.getBuffer(Fa))?ob=Ob.dtype:"constant"in Fa?(bc=2,"number"===typeof Fa.constant?(qb=Fa.constant,La=eb=Ja=0):(qb=0<Fa.constant.length?Fa.constant[0]:0,La=1<Fa.constant.length?Fa.constant[1]:0,eb=2<Fa.constant.length?Fa.constant[2]:0,Ja=3<Fa.constant.length?Fa.constant[3]:0)):(Ob=ea(Fa.buffer)?y.createStream(34962,Fa.buffer):y.getBuffer(Fa.buffer),ob="type"in Fa?ka[Fa.type]:Ob.dtype,Ua=!!Fa.normalized,yb=Fa.size|0,Tb=Fa.offset|0,ib=Fa.stride|0,pb=Fa.divisor|0);fb=G.location;Ma=K[fb];if(1===bc){Ma.buffer||
H.enableVertexAttribArray(fb);kb=yb||2;if(Ma.type!==ob||Ma.size!==kb||Ma.buffer!==Ob||Ma.normalized!==Ua||Ma.offset!==Tb||Ma.stride!==ib)H.bindBuffer(34962,Ob.buffer),H.vertexAttribPointer(fb,kb,ob,Ua,ib,Tb),Ma.type=ob,Ma.size=kb,Ma.buffer=Ob,Ma.normalized=Ua,Ma.offset=Tb,Ma.stride=ib;Ma.divisor!==pb&&(D.vertexAttribDivisorANGLE(fb,pb),Ma.divisor=pb)}else if(Ma.buffer&&(H.disableVertexAttribArray(fb),Ma.buffer=null),Ma.x!==qb||Ma.y!==La||Ma.z!==eb||Ma.w!==Ja)H.vertexAttrib4f(fb,qb,La,eb,Ja),Ma.x=
qb,Ma.y=La,Ma.z=eb,Ma.w=Ja;gb.buffer=M.positionBuffer;Wa=!1;sb=null;rb=0;Pa=!1;Ra=Bc=0;Jb=1;Db=0;Na=5126;Lb=Kb=Ya=Jd=0;ea(gb)?(Wa=!0,sb=y.createStream(34962,gb),Na=sb.dtype):(sb=y.getBuffer(gb))?Na=sb.dtype:"constant"in gb?(Jb=2,"number"===typeof gb.constant?(Ya=gb.constant,Kb=Lb=Jd=0):(Ya=0<gb.constant.length?gb.constant[0]:0,Kb=1<gb.constant.length?gb.constant[1]:0,Lb=2<gb.constant.length?gb.constant[2]:0,Jd=3<gb.constant.length?gb.constant[3]:0)):(sb=ea(gb.buffer)?y.createStream(34962,gb.buffer):
y.getBuffer(gb.buffer),Na="type"in gb?ka[gb.type]:sb.dtype,Pa=!!gb.normalized,Ra=gb.size|0,Bc=gb.offset|0,Db=gb.stride|0,rb=gb.divisor|0);lb=wa.location;Oa=K[lb];if(1===Jb){Oa.buffer||H.enableVertexAttribArray(lb);Yb=Ra||2;if(Oa.type!==Na||Oa.size!==Yb||Oa.buffer!==sb||Oa.normalized!==Pa||Oa.offset!==Bc||Oa.stride!==Db)H.bindBuffer(34962,sb.buffer),H.vertexAttribPointer(lb,Yb,Na,Pa,Db,Bc),Oa.type=Na,Oa.size=Yb,Oa.buffer=sb,Oa.normalized=Pa,Oa.offset=Bc,Oa.stride=Db;Oa.divisor!==rb&&(D.vertexAttribDivisorANGLE(lb,
rb),Oa.divisor=rb)}else if(Oa.buffer&&(H.disableVertexAttribArray(lb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==Jd)H.vertexAttrib4f(lb,Ya,Kb,Lb,Jd),Oa.x=Ya,Oa.y=Kb,Oa.z=Lb,Oa.w=Jd;fa.buffer=M.positionBuffer;Qa=!1;tb=null;ub=0;Sa=!1;gc=mb=0;zc=1;uc=0;bb=5126;Lc=Xa=nd=jc=0;ea(fa)?(Qa=!0,tb=y.createStream(34962,fa),bb=tb.dtype):(tb=y.getBuffer(fa))?bb=tb.dtype:"constant"in fa?(zc=2,"number"===typeof fa.constant?(nd=fa.constant,Xa=Lc=jc=0):(nd=0<fa.constant.length?fa.constant[0]:0,Xa=1<
fa.constant.length?fa.constant[1]:0,Lc=2<fa.constant.length?fa.constant[2]:0,jc=3<fa.constant.length?fa.constant[3]:0)):(tb=ea(fa.buffer)?y.createStream(34962,fa.buffer):y.getBuffer(fa.buffer),bb="type"in fa?ka[fa.type]:tb.dtype,Sa=!!fa.normalized,gc=fa.size|0,mb=fa.offset|0,uc=fa.stride|0,ub=fa.divisor|0);zb=ma.location;Za=K[zb];if(1===zc){Za.buffer||H.enableVertexAttribArray(zb);Ub=gc||2;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)H.bindBuffer(34962,
tb.buffer),H.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(D.vertexAttribDivisorANGLE(zb,ub),Za.divisor=ub)}else if(Za.buffer&&(H.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==nd||Za.y!==Xa||Za.z!==Lc||Za.w!==jc)H.vertexAttrib4f(zb,nd,Xa,Lc,jc),Za.x=nd,Za.y=Xa,Za.z=Lc,Za.w=jc;aa.buffer=M.colorBuffer;sc=!1;Vb=null;Pb=0;Jc=!1;Xd=Qb=0;Dc=1;ud=0;Mc=5126;vc=nc=qd=fd=0;ea(aa)?(sc=!0,Vb=y.createStream(34962,aa),
Mc=Vb.dtype):(Vb=y.getBuffer(aa))?Mc=Vb.dtype:"constant"in aa?(Dc=2,"number"===typeof aa.constant?(qd=aa.constant,nc=vc=fd=0):(qd=0<aa.constant.length?aa.constant[0]:0,nc=1<aa.constant.length?aa.constant[1]:0,vc=2<aa.constant.length?aa.constant[2]:0,fd=3<aa.constant.length?aa.constant[3]:0)):(Vb=ea(aa.buffer)?y.createStream(34962,aa.buffer):y.getBuffer(aa.buffer),Mc="type"in aa?ka[aa.type]:Vb.dtype,Jc=!!aa.normalized,Xd=aa.size|0,Qb=aa.offset|0,ud=aa.stride|0,Pb=aa.divisor|0);hc=W.location;db=K[hc];
if(1===Dc){db.buffer||H.enableVertexAttribArray(hc);rc=Xd||4;if(db.type!==Mc||db.size!==rc||db.buffer!==Vb||db.normalized!==Jc||db.offset!==Qb||db.stride!==ud)H.bindBuffer(34962,Vb.buffer),H.vertexAttribPointer(hc,rc,Mc,Jc,ud,Qb),db.type=Mc,db.size=rc,db.buffer=Vb,db.normalized=Jc,db.offset=Qb,db.stride=ud;db.divisor!==Pb&&(D.vertexAttribDivisorANGLE(hc,Pb),db.divisor=Pb)}else if(db.buffer&&(H.disableVertexAttribArray(hc),db.buffer=null),db.x!==qd||db.y!==nc||db.z!==vc||db.w!==fd)H.vertexAttrib4f(hc,
qd,nc,vc,fd),db.x=qd,db.y=nc,db.z=vc,db.w=fd;Ka.buffer=M.colorBuffer;Sb=!1;Wb=null;dc=0;ic=!1;Ac=xc=0;ad=1;Pc=0;Qc=5126;bd=wd=Xc=Rc=0;ea(Ka)?(Sb=!0,Wb=y.createStream(34962,Ka),Qc=Wb.dtype):(Wb=y.getBuffer(Ka))?Qc=Wb.dtype:"constant"in Ka?(ad=2,"number"===typeof Ka.constant?(Xc=Ka.constant,wd=bd=Rc=0):(Xc=0<Ka.constant.length?Ka.constant[0]:0,wd=1<Ka.constant.length?Ka.constant[1]:0,bd=2<Ka.constant.length?Ka.constant[2]:0,Rc=3<Ka.constant.length?Ka.constant[3]:0)):(Wb=ea(Ka.buffer)?y.createStream(34962,
Ka.buffer):y.getBuffer(Ka.buffer),Qc="type"in Ka?ka[Ka.type]:Wb.dtype,ic=!!Ka.normalized,Ac=Ka.size|0,xc=Ka.offset|0,Pc=Ka.stride|0,dc=Ka.divisor|0);Yc=ca.location;kc=K[Yc];if(1===ad){kc.buffer||H.enableVertexAttribArray(Yc);cc=Ac||4;if(kc.type!==Qc||kc.size!==cc||kc.buffer!==Wb||kc.normalized!==ic||kc.offset!==xc||kc.stride!==Pc)H.bindBuffer(34962,Wb.buffer),H.vertexAttribPointer(Yc,cc,Qc,ic,Pc,xc),kc.type=Qc,kc.size=cc,kc.buffer=Wb,kc.normalized=ic,kc.offset=xc,kc.stride=Pc;kc.divisor!==dc&&(D.vertexAttribDivisorANGLE(Yc,
dc),kc.divisor=dc)}else if(kc.buffer&&(H.disableVertexAttribArray(Yc),kc.buffer=null),kc.x!==Xc||kc.y!==wd||kc.z!==bd||kc.w!==Rc)H.vertexAttrib4f(Yc,Xc,wd,bd,Rc),kc.x=Xc,kc.y=wd,kc.z=bd,kc.w=Rc;Zc=M.scale;Uc=Zc[0];yc=Zc[1];u&&cd===Uc&&id===yc||(cd=Uc,id=yc,H.uniform2f(hd.location,Uc,yc));rd=M.translate;Ze=rd[0];jd=rd[1];u&&Be===Ze&&Ba===jd||(Be=Ze,Ba=jd,H.uniform2f(ga.location,Ze,jd));Nd=M.thickness;u&&Yd===Nd||(Yd=Nd,H.uniform1f(Z.location,Nd));ee=M.depth;u&&Od===ee||(Od=ee,H.uniform1f(C.location,
ee));Id=d.call(this,q,M,u);Gd=Id[0];Sc=Id[1];td=Id[2];xd=Id[3];u&&od===Gd&&vd===Sc&&kd===td&&Bd===xd||(od=Gd,vd=Sc,kd=td,Bd=xd,H.uniform4f(S.location,Gd,Sc,td,xd));Ed=M.miterLimit;u&&oe===Ed||(oe=Ed,H.uniform1f(l.location,Ed));qe=z.call(this,q,M,u);u&&ue===qe||(ue=qe,H.uniform1f(a.location,qe));ke=M.dashLength;u&&je===ke||(je=ke,H.uniform1f(p.location,ke));ie=M.opacity;u&&ve===ie||(ve=ie,H.uniform1f(A.location,ie));(fe=M.dashTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);le=fe._texture;
H.uniform1i(da.location,le.bind());Nc=M.count;0<Nc?Ic?D.drawElementsInstancedANGLE(5,4,Ic.type,0<<(Ic.type-5121>>1),Nc):D.drawArraysInstancedANGLE(5,0,4,Nc):0>Nc&&(Ic?H.drawElements(5,4,Ic.type,0<<(Ic.type-5121>>1)):H.drawArrays(5,0,4));q.viewportWidth=ec;q.viewportHeight=Gc;xb&&y.destroyStream(cb);Xb&&y.destroyStream(Ob);Wa&&y.destroyStream(sb);Qa&&y.destroyStream(tb);sc&&y.destroyStream(Vb);Sb&&y.destroyStream(Wb);le.unbind()}P.dirty=!0;Da.setVAO(null);k&&(R.cpuTime+=performance.now()-t)},draw:function(d){var e,
k,z,t,u,x,ya,J,w,F,E,qa,za,O,V,X,Y,pa,va,Ea,la,sa,U,$d,ia,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd;e=n.next;e!==n.cur&&(e?H.bindFramebuffer(36160,e.framebuffer):H.bindFramebuffer(36160,null),n.cur=e);if(P.dirty){var Dc,ud,Mc,fd,qd,nc,vc,hc,db,
rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc;Dc=T.dither;Dc!==P.dither&&(Dc?H.enable(3024):H.disable(3024),P.dither=Dc);ud=T.depth_func;ud!==P.depth_func&&(H.depthFunc(ud),P.depth_func=ud);Mc=ac[0];fd=ac[1];if(Mc!==Ta[0]||fd!==Ta[1])H.depthRange(Mc,fd),Ta[0]=Mc,Ta[1]=fd;qd=T.depth_mask;qd!==P.depth_mask&&(H.depthMask(qd),P.depth_mask=qd);nc=Ia[0];vc=Ia[1];hc=Ia[2];db=Ia[3];if(nc!==L[0]||vc!==L[1]||hc!==L[2]||db!==L[3])H.colorMask(nc,vc,hc,db),L[0]=nc,L[1]=vc,L[2]=hc,L[3]=db;rc=T.frontFace;
rc!==P.frontFace&&(H.frontFace(rc),P.frontFace=rc);Sb=T.lineWidth;Sb!==P.lineWidth&&(H.lineWidth(Sb),P.lineWidth=Sb);Wb=T.polygonOffset_enable;Wb!==P.polygonOffset_enable&&(Wb?H.enable(32823):H.disable(32823),P.polygonOffset_enable=Wb);dc=v[0];ic=v[1];if(dc!==r[0]||ic!==r[1])H.polygonOffset(dc,ic),r[0]=dc,r[1]=ic;xc=T.sample_alpha;xc!==P.sample_alpha&&(xc?H.enable(32926):H.disable(32926),P.sample_alpha=xc);Ac=T.sample_enable;Ac!==P.sample_enable&&(Ac?H.enable(32928):H.disable(32928),P.sample_enable=
Ac);ad=N[0];Pc=N[1];if(ad!==ta[0]||Pc!==ta[1])H.sampleCoverage(ad,Pc),ta[0]=ad,ta[1]=Pc;Qc=T.stencil_mask;Qc!==P.stencil_mask&&(H.stencilMask(Qc),P.stencil_mask=Qc);Rc=Gb[0];Xc=Gb[1];wd=Gb[2];if(Rc!==ba[0]||Xc!==ba[1]||wd!==ba[2])H.stencilFunc(Rc,Xc,wd),ba[0]=Rc,ba[1]=Xc,ba[2]=wd;bd=Ga[0];Yc=Ga[1];kc=Ga[2];cc=Ga[3];if(bd!==na[0]||Yc!==na[1]||kc!==na[2]||cc!==na[3])H.stencilOpSeparate(bd,Yc,kc,cc),na[0]=bd,na[1]=Yc,na[2]=kc,na[3]=cc;Zc=I[0];Uc=I[1];cd=I[2];yc=I[3];if(Zc!==ra[0]||Uc!==ra[1]||cd!==ra[2]||
yc!==ra[3])H.stencilOpSeparate(Zc,Uc,cd,yc),ra[0]=Zc,ra[1]=Uc,ra[2]=cd,ra[3]=yc}k=d.viewport;z=k.x|0;t=k.y|0;u="width"in k?k.width|0:q.framebufferWidth-z;x="height"in k?k.height|0:q.framebufferHeight-t;ya=q.viewportWidth;q.viewportWidth=u;J=q.viewportHeight;q.viewportHeight=x;H.viewport(z,t,u,x);Ca[0]=z;Ca[1]=t;Ca[2]=u;Ca[3]=x;H.blendColor(0,0,0,0);ha[0]=0;ha[1]=0;ha[2]=0;ha[3]=0;H.enable(3042);P.blend_enable=!0;H.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;H.blendFuncSeparate(770,
771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;H.enable(2884);P.cull_enable=!0;H.cullFace(1029);P.cull_face=1029;(w=D.call(this,q,d,0))?H.enable(2929):H.disable(2929);P.depth_enable=w;F=d.viewport;E=F.x|0;qa=F.y|0;za="width"in F?F.width|0:q.framebufferWidth-E;O="height"in F?F.height|0:q.framebufferHeight-qa;H.scissor(E,qa,za,O);dd[0]=E;dd[1]=qa;dd[2]=za;dd[3]=O;H.enable(3089);P.scissor_enable=!0;H.disable(2960);P.stencil_enable=!1;if(V=P.profile)X=performance.now(),R.count++;H.useProgram(M.program);
Y=oa.angle_instanced_arrays;Da.setVAO(null);ua.buffer=d.positionBuffer;pa=!1;va=null;Ea=0;la=!1;U=sa=0;$d=1;ia=0;Ld=5126;Kc=sd=$c=md=0;ea(ua)?(pa=!0,va=y.createStream(34962,ua),Ld=va.dtype):(va=y.getBuffer(ua))?Ld=va.dtype:"constant"in ua?($d=2,"number"===typeof ua.constant?($c=ua.constant,sd=Kc=md=0):($c=0<ua.constant.length?ua.constant[0]:0,sd=1<ua.constant.length?ua.constant[1]:0,Kc=2<ua.constant.length?ua.constant[2]:0,md=3<ua.constant.length?ua.constant[3]:0)):(va=ea(ua.buffer)?y.createStream(34962,
ua.buffer):y.getBuffer(ua.buffer),Ld="type"in ua?ka[ua.type]:va.dtype,la=!!ua.normalized,U=ua.size|0,sa=ua.offset|0,ia=ua.stride|0,Ea=ua.divisor|0);pd=f.location;Ec=K[pd];if(1===$d){Ec.buffer||H.enableVertexAttribArray(pd);ed=U||2;if(Ec.type!==Ld||Ec.size!==ed||Ec.buffer!==va||Ec.normalized!==la||Ec.offset!==sa||Ec.stride!==ia)H.bindBuffer(34962,va.buffer),H.vertexAttribPointer(pd,ed,Ld,la,ia,sa),Ec.type=Ld,Ec.size=ed,Ec.buffer=va,Ec.normalized=la,Ec.offset=sa,Ec.stride=ia;Ec.divisor!==Ea&&(Y.vertexAttribDivisorANGLE(pd,
Ea),Ec.divisor=Ea)}else if(Ec.buffer&&(H.disableVertexAttribArray(pd),Ec.buffer=null),Ec.x!==$c||Ec.y!==sd||Ec.z!==Kc||Ec.w!==md)H.vertexAttrib4f(pd,$c,sd,Kc,md),Ec.x=$c,Ec.y=sd,Ec.z=Kc,Ec.w=md;Fa.buffer=d.positionBuffer;Oc=!1;ld=null;Ab=0;Eb=!1;wb=tc=0;wc=1;Bb=0;Ic=5126;Vc=Wc=Fc=lc=0;ea(Fa)?(Oc=!0,ld=y.createStream(34962,Fa),Ic=ld.dtype):(ld=y.getBuffer(Fa))?Ic=ld.dtype:"constant"in Fa?(wc=2,"number"===typeof Fa.constant?(Fc=Fa.constant,Wc=Vc=lc=0):(Fc=0<Fa.constant.length?Fa.constant[0]:0,Wc=1<
Fa.constant.length?Fa.constant[1]:0,Vc=2<Fa.constant.length?Fa.constant[2]:0,lc=3<Fa.constant.length?Fa.constant[3]:0)):(ld=ea(Fa.buffer)?y.createStream(34962,Fa.buffer):y.getBuffer(Fa.buffer),Ic="type"in Fa?ka[Fa.type]:ld.dtype,Eb=!!Fa.normalized,wb=Fa.size|0,tc=Fa.offset|0,Bb=Fa.stride|0,Ab=Fa.divisor|0);Cc=G.location;ec=K[Cc];if(1===wc){ec.buffer||H.enableVertexAttribArray(Cc);Gc=wb||2;if(ec.type!==Ic||ec.size!==Gc||ec.buffer!==ld||ec.normalized!==Eb||ec.offset!==tc||ec.stride!==Bb)H.bindBuffer(34962,
ld.buffer),H.vertexAttribPointer(Cc,Gc,Ic,Eb,Bb,tc),ec.type=Ic,ec.size=Gc,ec.buffer=ld,ec.normalized=Eb,ec.offset=tc,ec.stride=Bb;ec.divisor!==Ab&&(Y.vertexAttribDivisorANGLE(Cc,Ab),ec.divisor=Ab)}else if(ec.buffer&&(H.disableVertexAttribArray(Cc),ec.buffer=null),ec.x!==Fc||ec.y!==Wc||ec.z!==Vc||ec.w!==lc)H.vertexAttrib4f(Cc,Fc,Wc,Vc,lc),ec.x=Fc,ec.y=Wc,ec.z=Vc,ec.w=lc;gb.buffer=d.positionBuffer;oc=!1;pc=null;mc=0;fc=!1;Hc=$a=0;xb=1;cb=0;Mb=5126;Tc=Va=nb=ab=0;ea(gb)?(oc=!0,pc=y.createStream(34962,
gb),Mb=pc.dtype):(pc=y.getBuffer(gb))?Mb=pc.dtype:"constant"in gb?(xb=2,"number"===typeof gb.constant?(nb=gb.constant,Va=Tc=ab=0):(nb=0<gb.constant.length?gb.constant[0]:0,Va=1<gb.constant.length?gb.constant[1]:0,Tc=2<gb.constant.length?gb.constant[2]:0,ab=3<gb.constant.length?gb.constant[3]:0)):(pc=ea(gb.buffer)?y.createStream(34962,gb.buffer):y.getBuffer(gb.buffer),Mb="type"in gb?ka[gb.type]:pc.dtype,fc=!!gb.normalized,Hc=gb.size|0,$a=gb.offset|0,cb=gb.stride|0,mc=gb.divisor|0);Hb=wa.location;Ib=
K[Hb];if(1===xb){Ib.buffer||H.enableVertexAttribArray(Hb);qc=Hc||2;if(Ib.type!==Mb||Ib.size!==qc||Ib.buffer!==pc||Ib.normalized!==fc||Ib.offset!==$a||Ib.stride!==cb)H.bindBuffer(34962,pc.buffer),H.vertexAttribPointer(Hb,qc,Mb,fc,cb,$a),Ib.type=Mb,Ib.size=qc,Ib.buffer=pc,Ib.normalized=fc,Ib.offset=$a,Ib.stride=cb;Ib.divisor!==mc&&(Y.vertexAttribDivisorANGLE(Hb,mc),Ib.divisor=mc)}else if(Ib.buffer&&(H.disableVertexAttribArray(Hb),Ib.buffer=null),Ib.x!==nb||Ib.y!==Va||Ib.z!==Tc||Ib.w!==ab)H.vertexAttrib4f(Hb,
nb,Va,Tc,ab),Ib.x=nb,Ib.y=Va,Ib.z=Tc,Ib.w=ab;fa.buffer=d.positionBuffer;Nb=!1;jb=null;Fb=0;Cb=!1;hb=vb=0;Xb=1;Ob=0;pb=5126;bc=yb=Tb=Ua=0;ea(fa)?(Nb=!0,jb=y.createStream(34962,fa),pb=jb.dtype):(jb=y.getBuffer(fa))?pb=jb.dtype:"constant"in fa?(Xb=2,"number"===typeof fa.constant?(Tb=fa.constant,yb=bc=Ua=0):(Tb=0<fa.constant.length?fa.constant[0]:0,yb=1<fa.constant.length?fa.constant[1]:0,bc=2<fa.constant.length?fa.constant[2]:0,Ua=3<fa.constant.length?fa.constant[3]:0)):(jb=ea(fa.buffer)?y.createStream(34962,
fa.buffer):y.getBuffer(fa.buffer),pb="type"in fa?ka[fa.type]:jb.dtype,Cb=!!fa.normalized,hb=fa.size|0,vb=fa.offset|0,Ob=fa.stride|0,Fb=fa.divisor|0);ib=ma.location;ob=K[ib];if(1===Xb){ob.buffer||H.enableVertexAttribArray(ib);Ja=hb||2;if(ob.type!==pb||ob.size!==Ja||ob.buffer!==jb||ob.normalized!==Cb||ob.offset!==vb||ob.stride!==Ob)H.bindBuffer(34962,jb.buffer),H.vertexAttribPointer(ib,Ja,pb,Cb,Ob,vb),ob.type=pb,ob.size=Ja,ob.buffer=jb,ob.normalized=Cb,ob.offset=vb,ob.stride=Ob;ob.divisor!==Fb&&(Y.vertexAttribDivisorANGLE(ib,
Fb),ob.divisor=Fb)}else if(ob.buffer&&(H.disableVertexAttribArray(ib),ob.buffer=null),ob.x!==Tb||ob.y!==yb||ob.z!==bc||ob.w!==Ua)H.vertexAttrib4f(ib,Tb,yb,bc,Ua),ob.x=Tb,ob.y=yb,ob.z=bc,ob.w=Ua;aa.buffer=d.colorBuffer;qb=!1;La=null;eb=0;fb=!1;kb=Ma=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=Pa=0;ea(aa)?(qb=!0,La=y.createStream(34962,aa),rb=La.dtype):(La=y.getBuffer(aa))?rb=La.dtype:"constant"in aa?(Wa=2,"number"===typeof aa.constant?(Bc=aa.constant,Ra=Jb=Pa=0):(Bc=0<aa.constant.length?aa.constant[0]:0,Ra=1<aa.constant.length?
aa.constant[1]:0,Jb=2<aa.constant.length?aa.constant[2]:0,Pa=3<aa.constant.length?aa.constant[3]:0)):(La=ea(aa.buffer)?y.createStream(34962,aa.buffer):y.getBuffer(aa.buffer),rb="type"in aa?ka[aa.type]:La.dtype,fb=!!aa.normalized,kb=aa.size|0,Ma=aa.offset|0,sb=aa.stride|0,eb=aa.divisor|0);Db=W.location;Na=K[Db];if(1===Wa){Na.buffer||H.enableVertexAttribArray(Db);Jd=kb||4;if(Na.type!==rb||Na.size!==Jd||Na.buffer!==La||Na.normalized!==fb||Na.offset!==Ma||Na.stride!==sb)H.bindBuffer(34962,La.buffer),
H.vertexAttribPointer(Db,Jd,rb,fb,sb,Ma),Na.type=rb,Na.size=Jd,Na.buffer=La,Na.normalized=fb,Na.offset=Ma,Na.stride=sb;Na.divisor!==eb&&(Y.vertexAttribDivisorANGLE(Db,eb),Na.divisor=eb)}else if(Na.buffer&&(H.disableVertexAttribArray(Db),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)H.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ka.buffer=d.colorBuffer;Ya=!1;Kb=null;Lb=0;lb=!1;Yb=Oa=0;Qa=1;tb=0;ub=5126;zc=gc=mb=Sa=0;ea(Ka)?(Ya=!0,Kb=y.createStream(34962,Ka),ub=Kb.dtype):
(Kb=y.getBuffer(Ka))?ub=Kb.dtype:"constant"in Ka?(Qa=2,"number"===typeof Ka.constant?(mb=Ka.constant,gc=zc=Sa=0):(mb=0<Ka.constant.length?Ka.constant[0]:0,gc=1<Ka.constant.length?Ka.constant[1]:0,zc=2<Ka.constant.length?Ka.constant[2]:0,Sa=3<Ka.constant.length?Ka.constant[3]:0)):(Kb=ea(Ka.buffer)?y.createStream(34962,Ka.buffer):y.getBuffer(Ka.buffer),ub="type"in Ka?ka[Ka.type]:Kb.dtype,lb=!!Ka.normalized,Yb=Ka.size|0,Oa=Ka.offset|0,tb=Ka.stride|0,Lb=Ka.divisor|0);uc=ca.location;bb=K[uc];if(1===Qa){bb.buffer||
H.enableVertexAttribArray(uc);jc=Yb||4;if(bb.type!==ub||bb.size!==jc||bb.buffer!==Kb||bb.normalized!==lb||bb.offset!==Oa||bb.stride!==tb)H.bindBuffer(34962,Kb.buffer),H.vertexAttribPointer(uc,jc,ub,lb,tb,Oa),bb.type=ub,bb.size=jc,bb.buffer=Kb,bb.normalized=lb,bb.offset=Oa,bb.stride=tb;bb.divisor!==Lb&&(Y.vertexAttribDivisorANGLE(uc,Lb),bb.divisor=Lb)}else if(bb.buffer&&(H.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==mb||bb.y!==gc||bb.z!==zc||bb.w!==Sa)H.vertexAttrib4f(uc,mb,gc,zc,Sa),bb.x=
mb,bb.y=gc,bb.z=zc,bb.w=Sa;nd=B.location;Xa=K[nd];Xa.buffer||H.enableVertexAttribArray(nd);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==m||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)H.bindBuffer(34962,m.buffer),H.vertexAttribPointer(nd,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=m,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(Y.vertexAttribDivisorANGLE(nd,0),Xa.divisor=0);Lc=c.location;zb=K[Lc];zb.buffer||H.enableVertexAttribArray(Lc);if(5126!==zb.type||1!==zb.size||zb.buffer!==
g||!1!==zb.normalized||4!==zb.offset||8!==zb.stride)H.bindBuffer(34962,g.buffer),H.vertexAttribPointer(Lc,1,5126,!1,8,4),zb.type=5126,zb.size=1,zb.buffer=g,zb.normalized=!1,zb.offset=4,zb.stride=8;0!==zb.divisor&&(Y.vertexAttribDivisorANGLE(Lc,0),zb.divisor=0);Za=d.scale;H.uniform2f(hd.location,Za[0],Za[1]);Ub=d.translate;H.uniform2f(ga.location,Ub[0],Ub[1]);H.uniform1f(Z.location,d.thickness);H.uniform1f(C.location,d.depth);sc=h.call(this,q,d,0);H.uniform4f(S.location,sc[0],sc[1],sc[2],sc[3]);H.uniform1f(l.location,
d.miterLimit);Vb=b.call(this,q,d,0);H.uniform1f(a.location,Vb);H.uniform1f(p.location,d.dashLength);H.uniform1f(A.location,d.opacity);(Pb=d.dashTexture)&&"framebuffer"===Pb._reglType&&(Pb=Pb.color[0]);Jc=Pb._texture;H.uniform1i(da.location,Jc.bind());(Qb=Q.elements)?H.bindBuffer(34963,Qb.buffer.buffer):Da.currentVAO&&(Qb=xa.getElements(Da.currentVAO.elements))&&H.bindBuffer(34963,Qb.buffer.buffer);Xd=d.count;0<Xd?Qb?Y.drawElementsInstancedANGLE(5,4,Qb.type,0<<(Qb.type-5121>>1),Xd):Y.drawArraysInstancedANGLE(5,
0,4,Xd):0>Xd&&(Qb?H.drawElements(5,4,Qb.type,0<<(Qb.type-5121>>1)):H.drawArrays(5,0,4));P.dirty=!0;Da.setVAO(null);q.viewportWidth=ya;q.viewportHeight=J;V&&(R.cpuTime+=performance.now()-X);pa&&y.destroyStream(va);Oc&&y.destroyStream(ld);oc&&y.destroyStream(pc);Nb&&y.destroyStream(jb);qb&&y.destroyStream(La);Ya&&y.destroyStream(Kb);Jc.unbind()},scope:function(a,c,b){var d,f,n,v,l,h,r,I,L,e,N,p,K,z,A,ra,Ia,H,Ga,ac,G,na,ha,ba,S,D,M,C,B,ta,w,Ca,xa,W,ja,Ta,Z,ca,Aa,ga,sa,Gb,oa,da,wa,ma,Da,dd,U,hd,fc,$a,
ia,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Ba,Be,jd,mf,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,
Ve,Td,ae,We,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Pe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;d=a.viewport;f=d.x|0;n=d.y|0;v="width"in d?d.width|0:q.framebufferWidth-f;l="height"in d?d.height|0:q.framebufferHeight-n;h=q.viewportWidth;q.viewportWidth=v;r=q.viewportHeight;q.viewportHeight=l;I=ya[0];ya[0]=f;L=ya[1];ya[1]=n;e=ya[2];ya[2]=v;N=ya[3];ya[3]=l;p=za[0];za[0]=0;K=za[1];za[1]=0;z=za[2];za[2]=0;A=za[3];za[3]=0;ra=T.blend_enable;T.blend_enable=!0;Ia=Ea[0];Ea[0]=32774;H=Ea[1];Ea[1]=32774;Ga=pa[0];pa[0]=
770;ac=pa[1];pa[1]=771;G=pa[2];pa[2]=773;na=pa[3];pa[3]=1;ha=T.cull_enable;T.cull_enable=!0;ba=T.cull_face;T.cull_face=1029;S=E.call(this,q,a,b);D=T.depth_enable;T.depth_enable=S;M=a.viewport;C=M.x|0;B=M.y|0;ta="width"in M?M.width|0:q.framebufferWidth-C;w="height"in M?M.height|0:q.framebufferHeight-B;Ca=va[0];va[0]=C;xa=va[1];va[1]=B;W=va[2];va[2]=ta;ja=va[3];va[3]=w;Ta=T.scissor_enable;T.scissor_enable=!0;Z=T.stencil_enable;T.stencil_enable=!1;if(ca=P.profile)Aa=performance.now(),R.count++;ga=Q.offset;
Q.offset=0;sa=Q.count;Q.count=4;Gb=a.count;oa=Q.instances;Q.instances=Gb;da=Q.primitive;Q.primitive=5;wa=a.dashLength;ma=qa[23];qa[23]=wa;Da=a.dashTexture;dd=qa[24];qa[24]=Da;U=a.depth;hd=qa[22];qa[22]=U;fc=a.id;$a=qa[31];qa[31]=fc;ia=a.miterLimit;xb=qa[32];qa[32]=ia;cb=J.call(this,q,a,b);Mb=qa[33];qa[33]=cb;ab=a.opacity;nb=qa[10];qa[10]=ab;Va=q.pixelRatio;Tc=qa[34];qa[34]=Va;Hb=a.scale;Ib=qa[6];qa[6]=Hb;qc=a.scaleFract;Nb=qa[7];qa[7]=qc;jb=a.thickness;Fb=qa[21];qa[21]=jb;Cb=a.translate;vb=qa[8];
qa[8]=Cb;hb=a.translateFract;Xb=qa[9];qa[9]=hb;Ob=O.call(this,q,a,b);pb=qa[3];qa[3]=Ob;aa.buffer=a.colorBuffer;Ua=!1;Tb=null;yb=0;bc=!1;ob=ib=0;Ja=1;qb=0;La=5126;kb=Ma=fb=eb=0;ea(aa)?(Ua=!0,Tb=y.createStream(34962,aa),La=Tb.dtype):(Tb=y.getBuffer(aa))?La=Tb.dtype:"constant"in aa?(Ja=2,"number"===typeof aa.constant?(fb=aa.constant,Ma=kb=eb=0):(fb=0<aa.constant.length?aa.constant[0]:0,Ma=1<aa.constant.length?aa.constant[1]:0,kb=2<aa.constant.length?aa.constant[2]:0,eb=3<aa.constant.length?aa.constant[3]:
0)):(Tb=ea(aa.buffer)?y.createStream(34962,aa.buffer):y.getBuffer(aa.buffer),La="type"in aa?ka[aa.type]:Tb.dtype,bc=!!aa.normalized,ob=aa.size|0,ib=aa.offset|0,qb=aa.stride|0,yb=aa.divisor|0);Wa=X.buffer;X.buffer=Tb;sb=X.divisor;X.divisor=yb;rb=X.normalized;X.normalized=bc;Pa=X.offset;X.offset=ib;Bc=X.size;X.size=ob;Ra=X.state;X.state=Ja;Jb=X.stride;X.stride=qb;Db=X.type;X.type=La;Na=X.w;X.w=eb;Jd=X.x;X.x=fb;Ya=X.y;X.y=Ma;Kb=X.z;X.z=kb;ua.buffer=a.positionBuffer;Lb=!1;lb=null;Oa=0;Yb=!1;tb=Qa=0;ub=
1;Sa=0;mb=5126;bb=uc=zc=gc=0;ea(ua)?(Lb=!0,lb=y.createStream(34962,ua),mb=lb.dtype):(lb=y.getBuffer(ua))?mb=lb.dtype:"constant"in ua?(ub=2,"number"===typeof ua.constant?(zc=ua.constant,uc=bb=gc=0):(zc=0<ua.constant.length?ua.constant[0]:0,uc=1<ua.constant.length?ua.constant[1]:0,bb=2<ua.constant.length?ua.constant[2]:0,gc=3<ua.constant.length?ua.constant[3]:0)):(lb=ea(ua.buffer)?y.createStream(34962,ua.buffer):y.getBuffer(ua.buffer),mb="type"in ua?ka[ua.type]:lb.dtype,Yb=!!ua.normalized,tb=ua.size|
0,Qa=ua.offset|0,Sa=ua.stride|0,Oa=ua.divisor|0);jc=x.buffer;x.buffer=lb;nd=x.divisor;x.divisor=Oa;Xa=x.normalized;x.normalized=Yb;Lc=x.offset;x.offset=Qa;zb=x.size;x.size=tb;Za=x.state;x.state=ub;Ub=x.stride;x.stride=Sa;sc=x.type;x.type=mb;Vb=x.w;x.w=gc;Pb=x.x;x.x=zc;Jc=x.y;x.y=uc;Qb=x.z;x.z=bb;Ka.buffer=a.colorBuffer;Xd=!1;Dc=null;ud=0;Mc=!1;qd=fd=0;nc=1;vc=0;hc=5126;Wb=Sb=rc=db=0;ea(Ka)?(Xd=!0,Dc=y.createStream(34962,Ka),hc=Dc.dtype):(Dc=y.getBuffer(Ka))?hc=Dc.dtype:"constant"in Ka?(nc=2,"number"===
typeof Ka.constant?(rc=Ka.constant,Sb=Wb=db=0):(rc=0<Ka.constant.length?Ka.constant[0]:0,Sb=1<Ka.constant.length?Ka.constant[1]:0,Wb=2<Ka.constant.length?Ka.constant[2]:0,db=3<Ka.constant.length?Ka.constant[3]:0)):(Dc=ea(Ka.buffer)?y.createStream(34962,Ka.buffer):y.getBuffer(Ka.buffer),hc="type"in Ka?ka[Ka.type]:Dc.dtype,Mc=!!Ka.normalized,qd=Ka.size|0,fd=Ka.offset|0,vc=Ka.stride|0,ud=Ka.divisor|0);dc=u.buffer;u.buffer=Dc;ic=u.divisor;u.divisor=ud;xc=u.normalized;u.normalized=Mc;Ac=u.offset;u.offset=
fd;ad=u.size;u.size=qd;Pc=u.state;u.state=nc;Qc=u.stride;u.stride=vc;Rc=u.type;u.type=hc;Xc=u.w;u.w=db;wd=u.x;u.x=rc;bd=u.y;u.y=Sb;Yc=u.z;u.z=Wb;Fa.buffer=a.positionBuffer;kc=!1;cc=null;Zc=0;Uc=!1;yc=cd=0;id=1;rd=0;Ba=5126;Nd=mf=jd=Be=0;ea(Fa)?(kc=!0,cc=y.createStream(34962,Fa),Ba=cc.dtype):(cc=y.getBuffer(Fa))?Ba=cc.dtype:"constant"in Fa?(id=2,"number"===typeof Fa.constant?(jd=Fa.constant,mf=Nd=Be=0):(jd=0<Fa.constant.length?Fa.constant[0]:0,mf=1<Fa.constant.length?Fa.constant[1]:0,Nd=2<Fa.constant.length?
Fa.constant[2]:0,Be=3<Fa.constant.length?Fa.constant[3]:0)):(cc=ea(Fa.buffer)?y.createStream(34962,Fa.buffer):y.getBuffer(Fa.buffer),Ba="type"in Fa?ka[Fa.type]:cc.dtype,Uc=!!Fa.normalized,yc=Fa.size|0,cd=Fa.offset|0,rd=Fa.stride|0,Zc=Fa.divisor|0);Yd=F.buffer;F.buffer=cc;ee=F.divisor;F.divisor=Zc;Od=F.normalized;F.normalized=Uc;Id=F.offset;F.offset=cd;Gd=F.size;F.size=yc;od=F.state;F.state=id;Sc=F.stride;F.stride=rd;vd=F.type;F.type=Ba;td=F.w;F.w=Be;kd=F.x;F.x=jd;xd=F.y;F.y=mf;Bd=F.z;F.z=Nd;Ed=Y.buffer;
Y.buffer=m;oe=Y.divisor;Y.divisor=0;qe=Y.normalized;Y.normalized=!1;ue=Y.offset;Y.offset=0;ke=Y.size;Y.size=0;je=Y.state;Y.state=1;ie=Y.stride;Y.stride=8;ve=Y.type;Y.type=5126;fe=Y.w;Y.w=0;le=Y.x;Y.x=0;Nc=Y.y;Y.y=0;gd=Y.z;Y.z=0;we=t.buffer;t.buffer=g;pe=t.divisor;t.divisor=0;Kd=t.normalized;t.normalized=!1;Pd=t.offset;t.offset=4;Qd=t.size;t.size=0;Rd=t.state;t.state=1;me=t.stride;t.stride=8;He=t.type;t.type=5126;Ce=t.w;t.w=0;re=t.x;t.x=0;Re=t.y;t.y=0;Se=t.z;t.z=0;gb.buffer=a.positionBuffer;Ne=!1;
xe=null;Fe=0;Ie=!1;Ke=Je=0;Ge=1;Md=0;Zd=5126;Hd=Le=ge=de=0;ea(gb)?(Ne=!0,xe=y.createStream(34962,gb),Zd=xe.dtype):(xe=y.getBuffer(gb))?Zd=xe.dtype:"constant"in gb?(Ge=2,"number"===typeof gb.constant?(ge=gb.constant,Le=Hd=de=0):(ge=0<gb.constant.length?gb.constant[0]:0,Le=1<gb.constant.length?gb.constant[1]:0,Hd=2<gb.constant.length?gb.constant[2]:0,de=3<gb.constant.length?gb.constant[3]:0)):(xe=ea(gb.buffer)?y.createStream(34962,gb.buffer):y.getBuffer(gb.buffer),Zd="type"in gb?ka[gb.type]:xe.dtype,
Ie=!!gb.normalized,Ke=gb.size|0,Je=gb.offset|0,Md=gb.stride|0,Fe=gb.divisor|0);Sd=V.buffer;V.buffer=xe;De=V.divisor;V.divisor=Fe;Me=V.normalized;V.normalized=Ie;bf=V.offset;V.offset=Je;af=V.size;V.size=Ke;Te=V.state;V.state=Ge;Oe=V.stride;V.stride=Md;$e=V.type;V.type=Zd;Xe=V.w;V.w=de;Ue=V.x;V.x=ge;Ve=V.y;V.y=Le;Td=V.z;V.z=Hd;fa.buffer=a.positionBuffer;ae=!1;We=null;hf=0;nf=!1;jf=ef=0;kf=1;lf=0;rf=5126;Cf=Bf=sf=of=0;ea(fa)?(ae=!0,We=y.createStream(34962,fa),rf=We.dtype):(We=y.getBuffer(fa))?rf=We.dtype:
"constant"in fa?(kf=2,"number"===typeof fa.constant?(sf=fa.constant,Bf=Cf=of=0):(sf=0<fa.constant.length?fa.constant[0]:0,Bf=1<fa.constant.length?fa.constant[1]:0,Cf=2<fa.constant.length?fa.constant[2]:0,of=3<fa.constant.length?fa.constant[3]:0)):(We=ea(fa.buffer)?y.createStream(34962,fa.buffer):y.getBuffer(fa.buffer),rf="type"in fa?ka[fa.type]:We.dtype,nf=!!fa.normalized,jf=fa.size|0,ef=fa.offset|0,lf=fa.stride|0,hf=fa.divisor|0);Pe=k.buffer;k.buffer=We;Ee=k.divisor;k.divisor=hf;pf=k.normalized;
k.normalized=nf;qf=k.offset;k.offset=ef;Df=k.size;k.size=jf;Gf=k.state;k.state=kf;Af=k.stride;k.stride=lf;Ef=k.type;k.type=rf;Ff=k.w;k.w=of;wf=k.x;k.x=sf;xf=k.y;k.y=Bf;vf=k.z;k.z=Cf;yf=la.vert;la.vert=36;zf=la.frag;la.frag=35;P.dirty=!0;c(q,a,b);q.viewportWidth=h;q.viewportHeight=r;ya[0]=I;ya[1]=L;ya[2]=e;ya[3]=N;za[0]=p;za[1]=K;za[2]=z;za[3]=A;T.blend_enable=ra;Ea[0]=Ia;Ea[1]=H;pa[0]=Ga;pa[1]=ac;pa[2]=G;pa[3]=na;T.cull_enable=ha;T.cull_face=ba;T.depth_enable=D;va[0]=Ca;va[1]=xa;va[2]=W;va[3]=ja;
T.scissor_enable=Ta;T.stencil_enable=Z;ca&&(R.cpuTime+=performance.now()-Aa);Q.offset=ga;Q.count=sa;Q.instances=oa;Q.primitive=da;qa[23]=ma;qa[24]=dd;qa[22]=hd;qa[31]=$a;qa[32]=xb;qa[33]=Mb;qa[10]=nb;qa[34]=Tc;qa[6]=Ib;qa[7]=Nb;qa[21]=Fb;qa[8]=vb;qa[9]=Xb;qa[3]=pb;Ua&&y.destroyStream(Tb);X.buffer=Wa;X.divisor=sb;X.normalized=rb;X.offset=Pa;X.size=Bc;X.state=Ra;X.stride=Jb;X.type=Db;X.w=Na;X.x=Jd;X.y=Ya;X.z=Kb;Lb&&y.destroyStream(lb);x.buffer=jc;x.divisor=nd;x.normalized=Xa;x.offset=Lc;x.size=zb;x.state=
Za;x.stride=Ub;x.type=sc;x.w=Vb;x.x=Pb;x.y=Jc;x.z=Qb;Xd&&y.destroyStream(Dc);u.buffer=dc;u.divisor=ic;u.normalized=xc;u.offset=Ac;u.size=ad;u.state=Pc;u.stride=Qc;u.type=Rc;u.w=Xc;u.x=wd;u.y=bd;u.z=Yc;kc&&y.destroyStream(cc);F.buffer=Yd;F.divisor=ee;F.normalized=Od;F.offset=Id;F.size=Gd;F.state=od;F.stride=Sc;F.type=vd;F.w=td;F.x=kd;F.y=xd;F.z=Bd;Y.buffer=Ed;Y.divisor=oe;Y.normalized=qe;Y.offset=ue;Y.size=ke;Y.state=je;Y.stride=ie;Y.type=ve;Y.w=fe;Y.x=le;Y.y=Nc;Y.z=gd;t.buffer=we;t.divisor=pe;t.normalized=
Kd;t.offset=Pd;t.size=Qd;t.state=Rd;t.stride=me;t.type=He;t.w=Ce;t.x=re;t.y=Re;t.z=Se;Ne&&y.destroyStream(xe);V.buffer=Sd;V.divisor=De;V.normalized=Me;V.offset=bf;V.size=af;V.state=Te;V.stride=Oe;V.type=$e;V.w=Xe;V.x=Ue;V.y=Ve;V.z=Td;ae&&y.destroyStream(We);k.buffer=Pe;k.divisor=Ee;k.normalized=pf;k.offset=qf;k.size=Df;k.state=Gf;k.stride=Af;k.type=Ef;k.w=Ff;k.x=wf;k.y=xf;k.z=vf;la.vert=yf;la.frag=zf;P.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(e,
R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k){var w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa;w=e.attributes;sa=e.buffer;d=e.context;z=e.current;W=e.draw;f=e.elements;ca=e.extensions;G=e.framebuffer;p=e.gl;da=e.isBufferArgs;C=e.next;B=e.shader;c=e.uniforms;l=e.vao;a=C.blend_color;wa=z.blend_color;A=C.blend_equation;ma=z.blend_equation;U=C.blend_func;Z=z.blend_func;ga=C.colorMask;S=z.colorMask;K=C.depth_range;y=z.depth_range;q=C.polygonOffset_offset;P=
z.polygonOffset_offset;Q=C.sample_coverage;xa=z.sample_coverage;oa=C.scissor_box;n=z.scissor_box;H=C.stencil_func;ea=z.stencil_func;T=C.stencil_opBack;la=z.stencil_opBack;qa=C.stencil_opFront;Da=z.stencil_opFront;za=C.viewport;ha=z.viewport;Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,c){var b,g,h,v,r,e;b=G.next;b!==G.cur&&(b?p.bindFramebuffer(36160,b.framebuffer):p.bindFramebuffer(36160,
null),G.cur=b);if(z.dirty){var A,m,D,M,ba,I,ra,Ga,na,B,Ca,ka,aa,za,oa,U,gb,fa,hd,Zb,Ha,$b,Rb,ia,Cd,yd,Vd,ye,Ba,Ud,ne,Ad;A=C.dither;A!==z.dither&&(A?p.enable(3024):p.disable(3024),z.dither=A);m=C.depth_func;m!==z.depth_func&&(p.depthFunc(m),z.depth_func=m);D=K[0];M=K[1];if(D!==y[0]||M!==y[1])p.depthRange(D,M),y[0]=D,y[1]=M;ba=C.depth_mask;ba!==z.depth_mask&&(p.depthMask(ba),z.depth_mask=ba);I=ga[0];ra=ga[1];Ga=ga[2];na=ga[3];if(I!==S[0]||ra!==S[1]||Ga!==S[2]||na!==S[3])p.colorMask(I,ra,Ga,na),S[0]=
I,S[1]=ra,S[2]=Ga,S[3]=na;B=C.cull_enable;B!==z.cull_enable&&(B?p.enable(2884):p.disable(2884),z.cull_enable=B);Ca=C.cull_face;Ca!==z.cull_face&&(p.cullFace(Ca),z.cull_face=Ca);ka=C.frontFace;ka!==z.frontFace&&(p.frontFace(ka),z.frontFace=ka);aa=C.lineWidth;aa!==z.lineWidth&&(p.lineWidth(aa),z.lineWidth=aa);za=C.polygonOffset_enable;za!==z.polygonOffset_enable&&(za?p.enable(32823):p.disable(32823),z.polygonOffset_enable=za);oa=q[0];U=q[1];if(oa!==P[0]||U!==P[1])p.polygonOffset(oa,U),P[0]=oa,P[1]=
U;gb=C.sample_alpha;gb!==z.sample_alpha&&(gb?p.enable(32926):p.disable(32926),z.sample_alpha=gb);fa=C.sample_enable;fa!==z.sample_enable&&(fa?p.enable(32928):p.disable(32928),z.sample_enable=fa);hd=Q[0];Zb=Q[1];if(hd!==xa[0]||Zb!==xa[1])p.sampleCoverage(hd,Zb),xa[0]=hd,xa[1]=Zb;Ha=C.stencil_mask;Ha!==z.stencil_mask&&(p.stencilMask(Ha),z.stencil_mask=Ha);$b=H[0];Rb=H[1];ia=H[2];if($b!==ea[0]||Rb!==ea[1]||ia!==ea[2])p.stencilFunc($b,Rb,ia),ea[0]=$b,ea[1]=Rb,ea[2]=ia;Cd=qa[0];yd=qa[1];Vd=qa[2];ye=qa[3];
if(Cd!==Da[0]||yd!==Da[1]||Vd!==Da[2]||ye!==Da[3])p.stencilOpSeparate(Cd,yd,Vd,ye),Da[0]=Cd,Da[1]=yd,Da[2]=Vd,Da[3]=ye;Ba=T[0];Ud=T[1];ne=T[2];Ad=T[3];if(Ba!==la[0]||Ud!==la[1]||ne!==la[2]||Ad!==la[3])p.stencilOpSeparate(Ba,Ud,ne,Ad),la[0]=Ba,la[1]=Ud,la[2]=ne,la[3]=Ad}p.blendColor(0,0,0,0);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=0;p.enable(3042);z.blend_enable=!0;p.blendEquationSeparate(32774,32774);ma[0]=32774;ma[1]=32774;p.blendFuncSeparate(770,771,773,1);Z[0]=770;Z[1]=771;Z[2]=773;Z[3]=1;p.disable(2929);
z.depth_enable=!1;p.enable(3089);z.scissor_enable=!0;p.disable(2960);z.stencil_enable=!1;if(g=z.profile)h=performance.now(),R.count+=c;p.useProgram(E.program);v=ca.angle_instanced_arrays;var Dd;l.setVAO(null);Dd=W.instances;for(r=0;r<c;++r){e=a[r];var ce,he,be,ze,Ye,Qe,Fd,Ae,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db;ce=e.viewport;
he=ce.x|0;be=ce.y|0;ze="width"in ce?ce.width|0:d.framebufferWidth-he;Ye="height"in ce?ce.height|0:d.framebufferHeight-be;Qe=d.viewportWidth;d.viewportWidth=ze;Fd=d.viewportHeight;d.viewportHeight=Ye;p.viewport(he,be,ze,Ye);ha[0]=he;ha[1]=be;ha[2]=ze;ha[3]=Ye;Ae=e.viewport;te=Ae.x|0;$d=Ae.y|0;Wd="width"in Ae?Ae.width|0:d.framebufferWidth-te;Ld="height"in Ae?Ae.height|0:d.framebufferHeight-$d;p.scissor(te,$d,Wd,Ld);n[0]=te;n[1]=$d;n[2]=Wd;n[3]=Ld;ja.buffer=e.positionBuffer;md=!1;$c=null;sd=0;Kc=!1;
Ec=pd=0;ed=1;Oc=0;ld=5126;wb=tc=Eb=Ab=0;da(ja)?(md=!0,$c=sa.createStream(34962,ja),ld=$c.dtype):($c=sa.getBuffer(ja))?ld=$c.dtype:"constant"in ja?(ed=2,"number"===typeof ja.constant?(Eb=ja.constant,tc=wb=Ab=0):(Eb=0<ja.constant.length?ja.constant[0]:0,tc=1<ja.constant.length?ja.constant[1]:0,wb=2<ja.constant.length?ja.constant[2]:0,Ab=3<ja.constant.length?ja.constant[3]:0)):($c=da(ja.buffer)?sa.createStream(34962,ja.buffer):sa.getBuffer(ja.buffer),ld="type"in ja?Ea[ja.type]:$c.dtype,Kc=!!ja.normalized,
Ec=ja.size|0,pd=ja.offset|0,Oc=ja.stride|0,sd=ja.divisor|0);wc=u.location;Bb=w[wc];if(1===ed){Bb.buffer||p.enableVertexAttribArray(wc);Ic=Ec||2;if(Bb.type!==ld||Bb.size!==Ic||Bb.buffer!==$c||Bb.normalized!==Kc||Bb.offset!==pd||Bb.stride!==Oc)p.bindBuffer(34962,$c.buffer),p.vertexAttribPointer(wc,Ic,ld,Kc,Oc,pd),Bb.type=ld,Bb.size=Ic,Bb.buffer=$c,Bb.normalized=Kc,Bb.offset=pd,Bb.stride=Oc;Bb.divisor!==sd&&(v.vertexAttribDivisorANGLE(wc,sd),Bb.divisor=sd)}else if(Bb.buffer&&(p.disableVertexAttribArray(wc),
Bb.buffer=null),Bb.x!==Eb||Bb.y!==tc||Bb.z!==wb||Bb.w!==Ab)p.vertexAttrib4f(wc,Eb,tc,wb,Ab),Bb.x=Eb,Bb.y=tc,Bb.z=wb,Bb.w=Ab;pa.buffer=e.positionFractBuffer;lc=!1;Fc=null;Wc=0;Vc=!1;ec=Cc=0;Gc=1;oc=0;pc=5126;Hc=$a=fc=mc=0;da(pa)?(lc=!0,Fc=sa.createStream(34962,pa),pc=Fc.dtype):(Fc=sa.getBuffer(pa))?pc=Fc.dtype:"constant"in pa?(Gc=2,"number"===typeof pa.constant?(fc=pa.constant,$a=Hc=mc=0):(fc=0<pa.constant.length?pa.constant[0]:0,$a=1<pa.constant.length?pa.constant[1]:0,Hc=2<pa.constant.length?pa.constant[2]:
0,mc=3<pa.constant.length?pa.constant[3]:0)):(Fc=da(pa.buffer)?sa.createStream(34962,pa.buffer):sa.getBuffer(pa.buffer),pc="type"in pa?Ea[pa.type]:Fc.dtype,Vc=!!pa.normalized,ec=pa.size|0,Cc=pa.offset|0,oc=pa.stride|0,Wc=pa.divisor|0);xb=F.location;cb=w[xb];if(1===Gc){cb.buffer||p.enableVertexAttribArray(xb);Mb=ec||2;if(cb.type!==pc||cb.size!==Mb||cb.buffer!==Fc||cb.normalized!==Vc||cb.offset!==Cc||cb.stride!==oc)p.bindBuffer(34962,Fc.buffer),p.vertexAttribPointer(xb,Mb,pc,Vc,oc,Cc),cb.type=pc,cb.size=
Mb,cb.buffer=Fc,cb.normalized=Vc,cb.offset=Cc,cb.stride=oc;cb.divisor!==Wc&&(v.vertexAttribDivisorANGLE(xb,Wc),cb.divisor=Wc)}else if(cb.buffer&&(p.disableVertexAttribArray(xb),cb.buffer=null),cb.x!==fc||cb.y!==$a||cb.z!==Hc||cb.w!==mc)p.vertexAttrib4f(xb,fc,$a,Hc,mc),cb.x=fc,cb.y=$a,cb.z=Hc,cb.w=mc;ab=e.fill;nb=ab[0];Tc=ab[1];Ib=ab[2];Nb=ab[3];r&&Va===nb&&Hb===Tc&&qc===Ib&&jb===Nb||(Va=nb,Hb=Tc,qc=Ib,jb=Nb,p.uniform4f(O.location,nb,Tc,Ib,Nb));Fb=e.scale;Cb=Fb[0];hb=Fb[1];r&&vb===Cb&&Xb===hb||(vb=
Cb,Xb=hb,p.uniform2f(Y.location,Cb,hb));Ob=e.scaleFract;pb=Ob[0];Tb=Ob[1];r&&Ua===pb&&yb===Tb||(Ua=pb,yb=Tb,p.uniform2f(t.location,pb,Tb));bc=e.translate;ib=bc[0];Ja=bc[1];r&&ob===ib&&qb===Ja||(ob=ib,qb=Ja,p.uniform2f(V.location,ib,Ja));La=e.translateFract;eb=La[0];Ma=La[1];r&&fb===eb&&kb===Ma||(fb=eb,kb=Ma,p.uniform2f(k.location,eb,Ma));Wa=e.id;r&&sb===Wa||(sb=Wa,p.uniform1f(X.location,Wa));rb=e.opacity;r&&Pa===rb||(Pa=rb,p.uniform1f(x.location,rb));Bc=J.call(this,d,e,r);Ra=null;(Ra=(Jb=da(Bc))?
f.createStream(Bc):f.getElements(Bc))&&p.bindBuffer(34963,Ra.buffer.buffer);if(Db=Ra?Ra.vertCount:-1)0<Dd?Ra?v.drawElementsInstancedANGLE(4,Db,Ra.type,0<<(Ra.type-5121>>1),Dd):v.drawArraysInstancedANGLE(4,0,Db,Dd):0>Dd&&(Ra?p.drawElements(4,Db,Ra.type,0<<(Ra.type-5121>>1)):p.drawArrays(4,0,Db)),d.viewportWidth=Qe,d.viewportHeight=Fd,md&&sa.destroyStream($c),lc&&sa.destroyStream(Fc),Jb&&f.destroyStream(Ra)}z.dirty=!0;l.setVAO(null);g&&(R.cpuTime+=performance.now()-h)},draw:function(a){var c,b,g,h,
v,r,e,A,m,B,J,ba,I,ra,Ga,na,ya,Ca,ka,aa,E,za;c=G.next;c!==G.cur&&(c?p.bindFramebuffer(36160,c.framebuffer):p.bindFramebuffer(36160,null),G.cur=c);if(z.dirty){c=C.dither;c!==z.dither&&(c?p.enable(3024):p.disable(3024),z.dither=c);c=C.depth_func;c!==z.depth_func&&(p.depthFunc(c),z.depth_func=c);c=K[0];r=K[1];if(c!==y[0]||r!==y[1])p.depthRange(c,r),y[0]=c,y[1]=r;c=C.depth_mask;c!==z.depth_mask&&(p.depthMask(c),z.depth_mask=c);c=ga[0];r=ga[1];b=ga[2];g=ga[3];if(c!==S[0]||r!==S[1]||b!==S[2]||g!==S[3])p.colorMask(c,
r,b,g),S[0]=c,S[1]=r,S[2]=b,S[3]=g;c=C.cull_enable;c!==z.cull_enable&&(c?p.enable(2884):p.disable(2884),z.cull_enable=c);c=C.cull_face;c!==z.cull_face&&(p.cullFace(c),z.cull_face=c);c=C.frontFace;c!==z.frontFace&&(p.frontFace(c),z.frontFace=c);c=C.lineWidth;c!==z.lineWidth&&(p.lineWidth(c),z.lineWidth=c);c=C.polygonOffset_enable;c!==z.polygonOffset_enable&&(c?p.enable(32823):p.disable(32823),z.polygonOffset_enable=c);c=q[0];r=q[1];if(c!==P[0]||r!==P[1])p.polygonOffset(c,r),P[0]=c,P[1]=r;c=C.sample_alpha;
c!==z.sample_alpha&&(c?p.enable(32926):p.disable(32926),z.sample_alpha=c);c=C.sample_enable;c!==z.sample_enable&&(c?p.enable(32928):p.disable(32928),z.sample_enable=c);c=Q[0];r=Q[1];if(c!==xa[0]||r!==xa[1])p.sampleCoverage(c,r),xa[0]=c,xa[1]=r;c=C.stencil_mask;c!==z.stencil_mask&&(p.stencilMask(c),z.stencil_mask=c);c=H[0];r=H[1];b=H[2];if(c!==ea[0]||r!==ea[1]||b!==ea[2])p.stencilFunc(c,r,b),ea[0]=c,ea[1]=r,ea[2]=b;c=qa[0];r=qa[1];b=qa[2];g=qa[3];if(c!==Da[0]||r!==Da[1]||b!==Da[2]||g!==Da[3])p.stencilOpSeparate(c,
r,b,g),Da[0]=c,Da[1]=r,Da[2]=b,Da[3]=g;c=T[0];r=T[1];b=T[2];g=T[3];if(c!==la[0]||r!==la[1]||b!==la[2]||g!==la[3])p.stencilOpSeparate(c,r,b,g),la[0]=c,la[1]=r,la[2]=b,la[3]=g}c=a.viewport;b=c.x|0;g=c.y|0;h="width"in c?c.width|0:d.framebufferWidth-b;v="height"in c?c.height|0:d.framebufferHeight-g;c=d.viewportWidth;d.viewportWidth=h;r=d.viewportHeight;d.viewportHeight=v;p.viewport(b,g,h,v);ha[0]=b;ha[1]=g;ha[2]=h;ha[3]=v;p.blendColor(0,0,0,0);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=0;p.enable(3042);z.blend_enable=
!0;p.blendEquationSeparate(32774,32774);ma[0]=32774;ma[1]=32774;p.blendFuncSeparate(770,771,773,1);Z[0]=770;Z[1]=771;Z[2]=773;Z[3]=1;p.disable(2929);z.depth_enable=!1;v=a.viewport;b=v.x|0;g=v.y|0;h="width"in v?v.width|0:d.framebufferWidth-b;v="height"in v?v.height|0:d.framebufferHeight-g;p.scissor(b,g,h,v);n[0]=b;n[1]=g;n[2]=h;n[3]=v;p.enable(3089);z.scissor_enable=!0;p.disable(2960);z.stencil_enable=!1;if(b=z.profile)e=performance.now(),R.count++;p.useProgram(D.program);g=ca.angle_instanced_arrays;
l.setVAO(null);ja.buffer=a.positionBuffer;h=!1;A=0;m=!1;J=B=0;ba=1;I=0;ra=5126;Ca=ya=na=Ga=0;da(ja)?(h=!0,v=sa.createStream(34962,ja),ra=v.dtype):(v=sa.getBuffer(ja))?ra=v.dtype:"constant"in ja?(ba=2,"number"===typeof ja.constant?(na=ja.constant,ya=Ca=Ga=0):(na=0<ja.constant.length?ja.constant[0]:0,ya=1<ja.constant.length?ja.constant[1]:0,Ca=2<ja.constant.length?ja.constant[2]:0,Ga=3<ja.constant.length?ja.constant[3]:0)):(v=da(ja.buffer)?sa.createStream(34962,ja.buffer):sa.getBuffer(ja.buffer),ra=
"type"in ja?Ea[ja.type]:v.dtype,m=!!ja.normalized,J=ja.size|0,B=ja.offset|0,I=ja.stride|0,A=ja.divisor|0);ka=u.location;aa=w[ka];if(1===ba){aa.buffer||p.enableVertexAttribArray(ka);J=J||2;if(aa.type!==ra||aa.size!==J||aa.buffer!==v||aa.normalized!==m||aa.offset!==B||aa.stride!==I)p.bindBuffer(34962,v.buffer),p.vertexAttribPointer(ka,J,ra,m,I,B),aa.type=ra,aa.size=J,aa.buffer=v,aa.normalized=m,aa.offset=B,aa.stride=I;aa.divisor!==A&&(g.vertexAttribDivisorANGLE(ka,A),aa.divisor=A)}else if(aa.buffer&&
(p.disableVertexAttribArray(ka),aa.buffer=null),aa.x!==na||aa.y!==ya||aa.z!==Ca||aa.w!==Ga)p.vertexAttrib4f(ka,na,ya,Ca,Ga),aa.x=na,aa.y=ya,aa.z=Ca,aa.w=Ga;pa.buffer=a.positionFractBuffer;A=!1;B=0;I=!1;Ga=ra=0;na=1;ka=0;aa=5126;za=E=Ca=ya=0;da(pa)?(A=!0,m=sa.createStream(34962,pa),aa=m.dtype):(m=sa.getBuffer(pa))?aa=m.dtype:"constant"in pa?(na=2,"number"===typeof pa.constant?(Ca=pa.constant,E=za=ya=0):(Ca=0<pa.constant.length?pa.constant[0]:0,E=1<pa.constant.length?pa.constant[1]:0,za=2<pa.constant.length?
pa.constant[2]:0,ya=3<pa.constant.length?pa.constant[3]:0)):(m=da(pa.buffer)?sa.createStream(34962,pa.buffer):sa.getBuffer(pa.buffer),aa="type"in pa?Ea[pa.type]:m.dtype,I=!!pa.normalized,Ga=pa.size|0,ra=pa.offset|0,ka=pa.stride|0,B=pa.divisor|0);J=F.location;ba=w[J];if(1===na){ba.buffer||p.enableVertexAttribArray(J);Ga=Ga||2;if(ba.type!==aa||ba.size!==Ga||ba.buffer!==m||ba.normalized!==I||ba.offset!==ra||ba.stride!==ka)p.bindBuffer(34962,m.buffer),p.vertexAttribPointer(J,Ga,aa,I,ka,ra),ba.type=aa,
ba.size=Ga,ba.buffer=m,ba.normalized=I,ba.offset=ra,ba.stride=ka;ba.divisor!==B&&(g.vertexAttribDivisorANGLE(J,B),ba.divisor=B)}else if(ba.buffer&&(p.disableVertexAttribArray(J),ba.buffer=null),ba.x!==Ca||ba.y!==E||ba.z!==za||ba.w!==ya)p.vertexAttrib4f(J,Ca,E,za,ya),ba.x=Ca,ba.y=E,ba.z=za,ba.w=ya;B=a.fill;p.uniform4f(O.location,B[0],B[1],B[2],B[3]);B=a.scale;p.uniform2f(Y.location,B[0],B[1]);B=a.scaleFract;p.uniform2f(t.location,B[0],B[1]);B=a.translate;p.uniform2f(V.location,B[0],B[1]);B=a.translateFract;
p.uniform2f(k.location,B[0],B[1]);p.uniform1f(X.location,a.id);p.uniform1f(x.location,a.opacity);B=M.call(this,d,a,0);(B=(a=da(B))?f.createStream(B):f.getElements(B))&&p.bindBuffer(34963,B.buffer.buffer);if(I=B?B.vertCount:-1)ra=W.instances,0<ra?B?g.drawElementsInstancedANGLE(4,I,B.type,0<<(B.type-5121>>1),ra):g.drawArraysInstancedANGLE(4,0,I,ra):0>ra&&(B?p.drawElements(4,I,B.type,0<<(B.type-5121>>1)):p.drawArrays(4,0,I)),z.dirty=!0,l.setVAO(null),d.viewportWidth=c,d.viewportHeight=r,b&&(R.cpuTime+=
performance.now()-e),h&&sa.destroyStream(v),A&&sa.destroyStream(m),a&&f.destroyStream(B)},scope:function(n,l,q){var e,p,v,r,N,k,K,t,H,y,I,ra,Ga,T,G,ha,D,S,M,u,Q,x,P,ea,J,w,F,E,xa,qa,O,V,X,Z,Y,ca,ga,la,wa,ma,Da,ze,ia,Qe,Fd,Ae,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb;e=n.viewport;p=e.x|0;v=e.y|0;r="width"in e?e.width|0:d.framebufferWidth-
p;N="height"in e?e.height|0:d.framebufferHeight-v;k=d.viewportWidth;d.viewportWidth=r;K=d.viewportHeight;d.viewportHeight=N;t=za[0];za[0]=p;H=za[1];za[1]=v;y=za[2];za[2]=r;I=za[3];za[3]=N;ra=a[0];a[0]=0;Ga=a[1];a[1]=0;T=a[2];a[2]=0;G=a[3];a[3]=0;ha=C.blend_enable;C.blend_enable=!0;D=A[0];A[0]=32774;S=A[1];A[1]=32774;M=U[0];U[0]=770;u=U[1];U[1]=771;Q=U[2];U[2]=773;x=U[3];U[3]=1;P=C.depth_enable;C.depth_enable=!1;ea=n.viewport;J=ea.x|0;w=ea.y|0;F="width"in ea?ea.width|0:d.framebufferWidth-J;E="height"in
ea?ea.height|0:d.framebufferHeight-w;xa=oa[0];oa[0]=J;qa=oa[1];oa[1]=w;O=oa[2];oa[2]=F;V=oa[3];oa[3]=E;X=C.scissor_enable;C.scissor_enable=!0;Z=C.stencil_enable;C.stencil_enable=!1;if(Y=z.profile)ca=performance.now(),R.count++;ga=m.call(this,d,n,q);la=null;la=(wa=da(ga))?f.createStream(ga):f.getElements(ga);ma=W.elements;W.elements=la;Da=W.offset;W.offset=0;ze=la?la.vertCount:-1;ia=W.count;W.count=ze;Qe=W.primitive;W.primitive=4;Fd=n.fill;Ae=c[14];c[14]=Fd;te=n.id;$d=c[31];c[31]=te;Wd=n.opacity;Ld=
c[10];c[10]=Wd;md=d.pixelRatio;$c=c[34];c[34]=md;sd=n.scale;Kc=c[6];c[6]=sd;pd=n.scaleFract;Ec=c[7];c[7]=pd;ed=n.translate;Oc=c[8];c[8]=ed;ld=n.translateFract;Ab=c[9];c[9]=ld;Eb=g.call(this,d,n,q);tc=c[3];c[3]=Eb;ja.buffer=n.positionBuffer;wb=!1;wc=null;Bb=0;Ic=!1;Fc=lc=0;Wc=1;Vc=0;Cc=5126;pc=oc=Gc=ec=0;da(ja)?(wb=!0,wc=sa.createStream(34962,ja),Cc=wc.dtype):(wc=sa.getBuffer(ja))?Cc=wc.dtype:"constant"in ja?(Wc=2,"number"===typeof ja.constant?(Gc=ja.constant,oc=pc=ec=0):(Gc=0<ja.constant.length?ja.constant[0]:
0,oc=1<ja.constant.length?ja.constant[1]:0,pc=2<ja.constant.length?ja.constant[2]:0,ec=3<ja.constant.length?ja.constant[3]:0)):(wc=da(ja.buffer)?sa.createStream(34962,ja.buffer):sa.getBuffer(ja.buffer),Cc="type"in ja?Ea[ja.type]:wc.dtype,Ic=!!ja.normalized,Fc=ja.size|0,lc=ja.offset|0,Vc=ja.stride|0,Bb=ja.divisor|0);mc=h.buffer;h.buffer=wc;fc=h.divisor;h.divisor=Bb;$a=h.normalized;h.normalized=Ic;Hc=h.offset;h.offset=lc;xb=h.size;h.size=Fc;cb=h.state;h.state=Wc;Mb=h.stride;h.stride=Vc;ab=h.type;h.type=
Cc;nb=h.w;h.w=ec;Va=h.x;h.x=Gc;Tc=h.y;h.y=oc;Hb=h.z;h.z=pc;pa.buffer=n.positionFractBuffer;Ib=!1;qc=null;Nb=0;jb=!1;Cb=Fb=0;vb=1;hb=0;Xb=5126;Tb=Ua=pb=Ob=0;da(pa)?(Ib=!0,qc=sa.createStream(34962,pa),Xb=qc.dtype):(qc=sa.getBuffer(pa))?Xb=qc.dtype:"constant"in pa?(vb=2,"number"===typeof pa.constant?(pb=pa.constant,Ua=Tb=Ob=0):(pb=0<pa.constant.length?pa.constant[0]:0,Ua=1<pa.constant.length?pa.constant[1]:0,Tb=2<pa.constant.length?pa.constant[2]:0,Ob=3<pa.constant.length?pa.constant[3]:0)):(qc=da(pa.buffer)?
sa.createStream(34962,pa.buffer):sa.getBuffer(pa.buffer),Xb="type"in pa?Ea[pa.type]:qc.dtype,jb=!!pa.normalized,Cb=pa.size|0,Fb=pa.offset|0,hb=pa.stride|0,Nb=pa.divisor|0);yb=b.buffer;b.buffer=qc;bc=b.divisor;b.divisor=Nb;ib=b.normalized;b.normalized=jb;ob=b.offset;b.offset=Fb;Ja=b.size;b.size=Cb;qb=b.state;b.state=vb;La=b.stride;b.stride=hb;eb=b.type;b.type=Xb;fb=b.w;b.w=Ob;Ma=b.x;b.x=pb;kb=b.y;b.y=Ua;Wa=b.z;b.z=Tb;sb=B.vert;B.vert=42;rb=B.frag;B.frag=41;z.dirty=!0;l(d,n,q);d.viewportWidth=k;d.viewportHeight=
K;za[0]=t;za[1]=H;za[2]=y;za[3]=I;a[0]=ra;a[1]=Ga;a[2]=T;a[3]=G;C.blend_enable=ha;A[0]=D;A[1]=S;U[0]=M;U[1]=u;U[2]=Q;U[3]=x;C.depth_enable=P;oa[0]=xa;oa[1]=qa;oa[2]=O;oa[3]=V;C.scissor_enable=X;C.stencil_enable=Z;Y&&(R.cpuTime+=performance.now()-ca);wa&&f.destroyStream(la);W.elements=ma;W.offset=Da;W.count=ia;W.primitive=Qe;c[14]=Ae;c[31]=$d;c[10]=Ld;c[34]=$c;c[6]=Kc;c[7]=Ec;c[8]=Oc;c[9]=Ab;c[3]=tc;wb&&sa.destroyStream(wc);h.buffer=mc;h.divisor=fc;h.normalized=$a;h.offset=Hc;h.size=xb;h.state=cb;
h.stride=Mb;h.type=ab;h.w=nb;h.x=Va;h.y=Tc;h.z=Hb;Ib&&sa.destroyStream(qc);b.buffer=yb;b.divisor=bc;b.normalized=ib;b.offset=ob;b.size=Ja;b.state=qb;b.stride=La;b.type=eb;b.w=fb;b.x=Ma;b.y=kb;b.z=Wa;B.vert=sb;B.frag=rb;z.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,
wa,A,ma,U,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta){var v,r,N,ta,va,dd,Gb,ba,I,ra,Ga,na,ya,Ca,ka,aa,ua,Ka,Fa,gb,fa,ia,Zb,Ha,$b,Rb,Ba,Cd,yd,Vd,ye,se,Ud,ne,Ad,Dd,ce,he,be;v=e.attributes;r=e.buffer;N=e.context;ta=e.current;va=e.draw;dd=e.elements;Gb=e.extensions;ba=e.framebuffer;I=e.gl;ra=e.isBufferArgs;Ga=e.next;na=e.shader;ya=e.uniforms;Ca=e.vao;ka=Ga.blend_color;aa=ta.blend_color;ua=Ga.blend_equation;Ka=ta.blend_equation;Fa=Ga.blend_func;gb=ta.blend_func;fa=Ga.colorMask;
ia=ta.colorMask;Zb=Ga.depth_range;Ha=ta.depth_range;$b=Ga.polygonOffset_offset;Rb=ta.polygonOffset_offset;Ba=Ga.sample_coverage;Cd=ta.sample_coverage;yd=Ga.scissor_box;Vd=ta.scissor_box;ye=Ga.stencil_func;se=ta.stencil_func;Ud=Ga.stencil_opBack;ne=ta.stencil_opBack;Ad=Ga.stencil_opFront;Dd=ta.stencil_opFront;ce=Ga.viewport;he=ta.viewport;be={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,d,g,f,l,h;b=ba.next;b!==ba.cur&&
(b?I.bindFramebuffer(36160,b.framebuffer):I.bindFramebuffer(36160,null),ba.cur=b);if(ta.dirty){var e,p,k,m,z,t,G,B,D,na,M,u,C,ka,x,J,w,F,ya,E,O,V,X,W,Y,ca,sa,da,Fa,Hc,xb,cb,Mb,ab;e=Ga.dither;e!==ta.dither&&(e?I.enable(3024):I.disable(3024),ta.dither=e);p=ua[0];k=ua[1];if(p!==Ka[0]||k!==Ka[1])I.blendEquationSeparate(p,k),Ka[0]=p,Ka[1]=k;m=Ga.depth_func;m!==ta.depth_func&&(I.depthFunc(m),ta.depth_func=m);z=Zb[0];t=Zb[1];if(z!==Ha[0]||t!==Ha[1])I.depthRange(z,t),Ha[0]=z,Ha[1]=t;G=Ga.depth_mask;G!==ta.depth_mask&&
(I.depthMask(G),ta.depth_mask=G);B=fa[0];D=fa[1];na=fa[2];M=fa[3];if(B!==ia[0]||D!==ia[1]||na!==ia[2]||M!==ia[3])I.colorMask(B,D,na,M),ia[0]=B,ia[1]=D,ia[2]=na,ia[3]=M;u=Ga.cull_enable;u!==ta.cull_enable&&(u?I.enable(2884):I.disable(2884),ta.cull_enable=u);C=Ga.cull_face;C!==ta.cull_face&&(I.cullFace(C),ta.cull_face=C);ka=Ga.frontFace;ka!==ta.frontFace&&(I.frontFace(ka),ta.frontFace=ka);x=Ga.lineWidth;x!==ta.lineWidth&&(I.lineWidth(x),ta.lineWidth=x);J=Ga.polygonOffset_enable;J!==ta.polygonOffset_enable&&
(J?I.enable(32823):I.disable(32823),ta.polygonOffset_enable=J);w=$b[0];F=$b[1];if(w!==Rb[0]||F!==Rb[1])I.polygonOffset(w,F),Rb[0]=w,Rb[1]=F;ya=Ga.sample_alpha;ya!==ta.sample_alpha&&(ya?I.enable(32926):I.disable(32926),ta.sample_alpha=ya);E=Ga.sample_enable;E!==ta.sample_enable&&(E?I.enable(32928):I.disable(32928),ta.sample_enable=E);O=Ba[0];V=Ba[1];if(O!==Cd[0]||V!==Cd[1])I.sampleCoverage(O,V),Cd[0]=O,Cd[1]=V;X=Ga.stencil_mask;X!==ta.stencil_mask&&(I.stencilMask(X),ta.stencil_mask=X);W=ye[0];Y=ye[1];
ca=ye[2];if(W!==se[0]||Y!==se[1]||ca!==se[2])I.stencilFunc(W,Y,ca),se[0]=W,se[1]=Y,se[2]=ca;sa=Ad[0];da=Ad[1];Fa=Ad[2];Hc=Ad[3];if(sa!==Dd[0]||da!==Dd[1]||Fa!==Dd[2]||Hc!==Dd[3])I.stencilOpSeparate(sa,da,Fa,Hc),Dd[0]=sa,Dd[1]=da,Dd[2]=Fa,Dd[3]=Hc;xb=Ud[0];cb=Ud[1];Mb=Ud[2];ab=Ud[3];if(xb!==ne[0]||cb!==ne[1]||Mb!==ne[2]||ab!==ne[3])I.stencilOpSeparate(xb,cb,Mb,ab),ne[0]=xb,ne[1]=cb,ne[2]=Mb,ne[3]=ab}I.blendColor(0,0,0,1);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=1;I.enable(3042);ta.blend_enable=!0;I.blendFuncSeparate(770,
771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;I.disable(2929);ta.depth_enable=!1;I.enable(3089);ta.scissor_enable=!0;I.disable(2960);ta.stencil_enable=!1;if(d=ta.profile)g=performance.now(),R.count+=c;I.useProgram(wa.program);f=Gb.angle_instanced_arrays;var nb;Ca.setVAO(null);I.uniform1i(H.location,!1);I.uniform1i(Da.location,P.bind());nb=va.instances;for(l=0;l<c;++l){h=a[l];var Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,
Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,yd,ce,jd,mf,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,Ve,Td,ae,We,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Pe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf;Va=h.viewport;Tc=
Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:N.framebufferWidth-Tc;qc="height"in Va?Va.height|0:N.framebufferHeight-Hb;Nb=N.viewportWidth;N.viewportWidth=Ib;jb=N.viewportHeight;N.viewportHeight=qc;I.viewport(Tc,Hb,Ib,qc);he[0]=Tc;he[1]=Hb;he[2]=Ib;he[3]=qc;Fb=h.viewport;Cb=Fb.x|0;vb=Fb.y|0;hb="width"in Fb?Fb.width|0:N.framebufferWidth-Cb;Xb="height"in Fb?Fb.height|0:N.framebufferHeight-vb;I.scissor(Cb,vb,hb,Xb);Vd[0]=Cb;Vd[1]=vb;Vd[2]=hb;Vd[3]=Xb;Ob=A.call(this,N,h,l);pb=!1;Ua=null;Tb=0;yb=!1;ib=bc=
0;ob=1;Ja=0;qb=5126;Ma=fb=eb=La=0;ra(Ob)?(pb=!0,Ua=r.createStream(34962,Ob),qb=Ua.dtype):(Ua=r.getBuffer(Ob))?qb=Ua.dtype:"constant"in Ob?(ob=2,"number"===typeof Ob.constant?(eb=Ob.constant,fb=Ma=La=0):(eb=0<Ob.constant.length?Ob.constant[0]:0,fb=1<Ob.constant.length?Ob.constant[1]:0,Ma=2<Ob.constant.length?Ob.constant[2]:0,La=3<Ob.constant.length?Ob.constant[3]:0)):(Ua=ra(Ob.buffer)?r.createStream(34962,Ob.buffer):r.getBuffer(Ob.buffer),qb="type"in Ob?be[Ob.type]:Ua.dtype,yb=!!Ob.normalized,ib=Ob.size|
0,bc=Ob.offset|0,Ja=Ob.stride|0,Tb=Ob.divisor|0);kb=Ia.location;Wa=v[kb];if(1===ob){Wa.buffer||I.enableVertexAttribArray(kb);sb=ib||1;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Ua||Wa.normalized!==yb||Wa.offset!==bc||Wa.stride!==Ja)I.bindBuffer(34962,Ua.buffer),I.vertexAttribPointer(kb,sb,qb,yb,Ja,bc),Wa.type=qb,Wa.size=sb,Wa.buffer=Ua,Wa.normalized=yb,Wa.offset=bc,Wa.stride=Ja;Wa.divisor!==Tb&&(f.vertexAttribDivisorANGLE(kb,Tb),Wa.divisor=Tb)}else if(Wa.buffer&&(I.disableVertexAttribArray(kb),Wa.buffer=
null),Wa.x!==eb||Wa.y!==fb||Wa.z!==Ma||Wa.w!==La)I.vertexAttrib4f(kb,eb,fb,Ma,La),Wa.x=eb,Wa.y=fb,Wa.z=Ma,Wa.w=La;rb=ma.call(this,N,h,l);Pa=!1;Bc=null;Ra=0;Jb=!1;Na=Db=0;Jd=1;Ya=0;Kb=5126;Yb=Oa=lb=Lb=0;ra(rb)?(Pa=!0,Bc=r.createStream(34962,rb),Kb=Bc.dtype):(Bc=r.getBuffer(rb))?Kb=Bc.dtype:"constant"in rb?(Jd=2,"number"===typeof rb.constant?(lb=rb.constant,Oa=Yb=Lb=0):(lb=0<rb.constant.length?rb.constant[0]:0,Oa=1<rb.constant.length?rb.constant[1]:0,Yb=2<rb.constant.length?rb.constant[2]:0,Lb=3<rb.constant.length?
rb.constant[3]:0)):(Bc=ra(rb.buffer)?r.createStream(34962,rb.buffer):r.getBuffer(rb.buffer),Kb="type"in rb?be[rb.type]:Bc.dtype,Jb=!!rb.normalized,Na=rb.size|0,Db=rb.offset|0,Ya=rb.stride|0,Ra=rb.divisor|0);Qa=ac.location;tb=v[Qa];if(1===Jd){tb.buffer||I.enableVertexAttribArray(Qa);ub=Na||1;if(tb.type!==Kb||tb.size!==ub||tb.buffer!==Bc||tb.normalized!==Jb||tb.offset!==Db||tb.stride!==Ya)I.bindBuffer(34962,Bc.buffer),I.vertexAttribPointer(Qa,ub,Kb,Jb,Ya,Db),tb.type=Kb,tb.size=ub,tb.buffer=Bc,tb.normalized=
Jb,tb.offset=Db,tb.stride=Ya;tb.divisor!==Ra&&(f.vertexAttribDivisorANGLE(Qa,Ra),tb.divisor=Ra)}else if(tb.buffer&&(I.disableVertexAttribArray(Qa),tb.buffer=null),tb.x!==lb||tb.y!==Oa||tb.z!==Yb||tb.w!==Lb)I.vertexAttrib4f(Qa,lb,Oa,Yb,Lb),tb.x=lb,tb.y=Oa,tb.z=Yb,tb.w=Lb;Sa=U.call(this,N,h,l);mb=!1;gc=null;zc=0;uc=!1;jc=bb=0;nd=1;Xa=0;Lc=5126;sc=Ub=Za=zb=0;ra(Sa)?(mb=!0,gc=r.createStream(34962,Sa),Lc=gc.dtype):(gc=r.getBuffer(Sa))?Lc=gc.dtype:"constant"in Sa?(nd=2,"number"===typeof Sa.constant?(Za=
Sa.constant,Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?Sa.constant[3]:0)):(gc=ra(Sa.buffer)?r.createStream(34962,Sa.buffer):r.getBuffer(Sa.buffer),Lc="type"in Sa?be[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,zc=Sa.divisor|0);Vb=L.location;Pb=v[Vb];if(1===nd){Pb.buffer||I.enableVertexAttribArray(Vb);Jc=jc||1;if(Pb.type!==Lc||Pb.size!==Jc||Pb.buffer!==
gc||Pb.normalized!==uc||Pb.offset!==bb||Pb.stride!==Xa)I.bindBuffer(34962,gc.buffer),I.vertexAttribPointer(Vb,Jc,Lc,uc,Xa,bb),Pb.type=Lc,Pb.size=Jc,Pb.buffer=gc,Pb.normalized=uc,Pb.offset=bb,Pb.stride=Xa;Pb.divisor!==zc&&(f.vertexAttribDivisorANGLE(Vb,zc),Pb.divisor=zc)}else if(Pb.buffer&&(I.disableVertexAttribArray(Vb),Pb.buffer=null),Pb.x!==Za||Pb.y!==Ub||Pb.z!==sc||Pb.w!==zb)I.vertexAttrib4f(Vb,Za,Ub,sc,zb),Pb.x=Za,Pb.y=Ub,Pb.z=sc,Pb.w=zb;Qb=Z.call(this,N,h,l);Xd=!1;Dc=null;ud=0;Mc=!1;qd=fd=0;
nc=1;vc=0;hc=5126;Wb=Sb=rc=db=0;ra(Qb)?(Xd=!0,Dc=r.createStream(34962,Qb),hc=Dc.dtype):(Dc=r.getBuffer(Qb))?hc=Dc.dtype:"constant"in Qb?(nc=2,"number"===typeof Qb.constant?(rc=Qb.constant,Sb=Wb=db=0):(rc=0<Qb.constant.length?Qb.constant[0]:0,Sb=1<Qb.constant.length?Qb.constant[1]:0,Wb=2<Qb.constant.length?Qb.constant[2]:0,db=3<Qb.constant.length?Qb.constant[3]:0)):(Dc=ra(Qb.buffer)?r.createStream(34962,Qb.buffer):r.getBuffer(Qb.buffer),hc="type"in Qb?be[Qb.type]:Dc.dtype,Mc=!!Qb.normalized,qd=Qb.size|
0,fd=Qb.offset|0,vc=Qb.stride|0,ud=Qb.divisor|0);dc=Ta.location;ic=v[dc];if(1===nc){ic.buffer||I.enableVertexAttribArray(dc);xc=qd||1;if(ic.type!==hc||ic.size!==xc||ic.buffer!==Dc||ic.normalized!==Mc||ic.offset!==fd||ic.stride!==vc)I.bindBuffer(34962,Dc.buffer),I.vertexAttribPointer(dc,xc,hc,Mc,vc,fd),ic.type=hc,ic.size=xc,ic.buffer=Dc,ic.normalized=Mc,ic.offset=fd,ic.stride=vc;ic.divisor!==ud&&(f.vertexAttribDivisorANGLE(dc,ud),ic.divisor=ud)}else if(ic.buffer&&(I.disableVertexAttribArray(dc),ic.buffer=
null),ic.x!==rc||ic.y!==Sb||ic.z!==Wb||ic.w!==db)I.vertexAttrib4f(dc,rc,Sb,Wb,db),ic.x=rc,ic.y=Sb,ic.z=Wb,ic.w=db;Ac=ga.call(this,N,h,l);ad=!1;Pc=null;Qc=0;Rc=!1;wd=Xc=0;bd=1;Yc=0;kc=5126;cd=Uc=Zc=cc=0;ra(Ac)?(ad=!0,Pc=r.createStream(34962,Ac),kc=Pc.dtype):(Pc=r.getBuffer(Ac))?kc=Pc.dtype:"constant"in Ac?(bd=2,"number"===typeof Ac.constant?(Zc=Ac.constant,Uc=cd=cc=0):(Zc=0<Ac.constant.length?Ac.constant[0]:0,Uc=1<Ac.constant.length?Ac.constant[1]:0,cd=2<Ac.constant.length?Ac.constant[2]:0,cc=3<Ac.constant.length?
Ac.constant[3]:0)):(Pc=ra(Ac.buffer)?r.createStream(34962,Ac.buffer):r.getBuffer(Ac.buffer),kc="type"in Ac?be[Ac.type]:Pc.dtype,Rc=!!Ac.normalized,wd=Ac.size|0,Xc=Ac.offset|0,Yc=Ac.stride|0,Qc=Ac.divisor|0);yc=ja.location;id=v[yc];if(1===bd){id.buffer||I.enableVertexAttribArray(yc);rd=wd||1;if(id.type!==kc||id.size!==rd||id.buffer!==Pc||id.normalized!==Rc||id.offset!==Xc||id.stride!==Yc)I.bindBuffer(34962,Pc.buffer),I.vertexAttribPointer(yc,rd,kc,Rc,Yc,Xc),id.type=kc,id.size=rd,id.buffer=Pc,id.normalized=
Rc,id.offset=Xc,id.stride=Yc;id.divisor!==Qc&&(f.vertexAttribDivisorANGLE(yc,Qc),id.divisor=Qc)}else if(id.buffer&&(I.disableVertexAttribArray(yc),id.buffer=null),id.x!==Zc||id.y!==Uc||id.z!==cd||id.w!==cc)I.vertexAttrib4f(yc,Zc,Uc,cd,cc),id.x=Zc,id.y=Uc,id.z=cd,id.w=cc;yd=S.call(this,N,h,l);ce=!1;jd=null;mf=0;Nd=!1;ee=Yd=0;Od=1;Id=0;Gd=5126;td=vd=Sc=od=0;ra(yd)?(ce=!0,jd=r.createStream(34962,yd),Gd=jd.dtype):(jd=r.getBuffer(yd))?Gd=jd.dtype:"constant"in yd?(Od=2,"number"===typeof yd.constant?(Sc=
yd.constant,vd=td=od=0):(Sc=0<yd.constant.length?yd.constant[0]:0,vd=1<yd.constant.length?yd.constant[1]:0,td=2<yd.constant.length?yd.constant[2]:0,od=3<yd.constant.length?yd.constant[3]:0)):(jd=ra(yd.buffer)?r.createStream(34962,yd.buffer):r.getBuffer(yd.buffer),Gd="type"in yd?be[yd.type]:jd.dtype,Nd=!!yd.normalized,ee=yd.size|0,Yd=yd.offset|0,Id=yd.stride|0,mf=yd.divisor|0);kd=oa.location;xd=v[kd];if(1===Od){xd.buffer||I.enableVertexAttribArray(kd);Bd=ee||1;if(xd.type!==Gd||xd.size!==Bd||xd.buffer!==
jd||xd.normalized!==Nd||xd.offset!==Yd||xd.stride!==Id)I.bindBuffer(34962,jd.buffer),I.vertexAttribPointer(kd,Bd,Gd,Nd,Id,Yd),xd.type=Gd,xd.size=Bd,xd.buffer=jd,xd.normalized=Nd,xd.offset=Yd,xd.stride=Id;xd.divisor!==mf&&(f.vertexAttribDivisorANGLE(kd,mf),xd.divisor=mf)}else if(xd.buffer&&(I.disableVertexAttribArray(kd),xd.buffer=null),xd.x!==Sc||xd.y!==vd||xd.z!==td||xd.w!==od)I.vertexAttrib4f(kd,Sc,vd,td,od),xd.x=Sc,xd.y=vd,xd.z=td,xd.w=od;Ed=K.call(this,N,h,l);oe=!1;qe=null;ue=0;ke=!1;ie=je=0;
ve=1;fe=0;le=5126;pe=we=gd=Nc=0;ra(Ed)?(oe=!0,qe=r.createStream(34962,Ed),le=qe.dtype):(qe=r.getBuffer(Ed))?le=qe.dtype:"constant"in Ed?(ve=2,"number"===typeof Ed.constant?(gd=Ed.constant,we=pe=Nc=0):(gd=0<Ed.constant.length?Ed.constant[0]:0,we=1<Ed.constant.length?Ed.constant[1]:0,pe=2<Ed.constant.length?Ed.constant[2]:0,Nc=3<Ed.constant.length?Ed.constant[3]:0)):(qe=ra(Ed.buffer)?r.createStream(34962,Ed.buffer):r.getBuffer(Ed.buffer),le="type"in Ed?be[Ed.type]:qe.dtype,ke=!!Ed.normalized,ie=Ed.size|
0,je=Ed.offset|0,fe=Ed.stride|0,ue=Ed.divisor|0);Kd=n.location;Pd=v[Kd];if(1===ve){Pd.buffer||I.enableVertexAttribArray(Kd);Qd=ie||4;if(Pd.type!==le||Pd.size!==Qd||Pd.buffer!==qe||Pd.normalized!==ke||Pd.offset!==je||Pd.stride!==fe)I.bindBuffer(34962,qe.buffer),I.vertexAttribPointer(Kd,Qd,le,ke,fe,je),Pd.type=le,Pd.size=Qd,Pd.buffer=qe,Pd.normalized=ke,Pd.offset=je,Pd.stride=fe;Pd.divisor!==ue&&(f.vertexAttribDivisorANGLE(Kd,ue),Pd.divisor=ue)}else if(Pd.buffer&&(I.disableVertexAttribArray(Kd),Pd.buffer=
null),Pd.x!==gd||Pd.y!==we||Pd.z!==pe||Pd.w!==Nc)I.vertexAttrib4f(Kd,gd,we,pe,Nc),Pd.x=gd,Pd.y=we,Pd.z=pe,Pd.w=Nc;Rd=y.call(this,N,h,l);me=!1;He=null;Ce=0;re=!1;Se=Re=0;Ne=1;xe=0;Fe=5126;Ge=Ke=Je=Ie=0;ra(Rd)?(me=!0,He=r.createStream(34962,Rd),Fe=He.dtype):(He=r.getBuffer(Rd))?Fe=He.dtype:"constant"in Rd?(Ne=2,"number"===typeof Rd.constant?(Je=Rd.constant,Ke=Ge=Ie=0):(Je=0<Rd.constant.length?Rd.constant[0]:0,Ke=1<Rd.constant.length?Rd.constant[1]:0,Ge=2<Rd.constant.length?Rd.constant[2]:0,Ie=3<Rd.constant.length?
Rd.constant[3]:0)):(He=ra(Rd.buffer)?r.createStream(34962,Rd.buffer):r.getBuffer(Rd.buffer),Fe="type"in Rd?be[Rd.type]:He.dtype,re=!!Rd.normalized,Se=Rd.size|0,Re=Rd.offset|0,xe=Rd.stride|0,Ce=Rd.divisor|0);Md=xa.location;Zd=v[Md];if(1===Ne){Zd.buffer||I.enableVertexAttribArray(Md);de=Se||4;if(Zd.type!==Fe||Zd.size!==de||Zd.buffer!==He||Zd.normalized!==re||Zd.offset!==Re||Zd.stride!==xe)I.bindBuffer(34962,He.buffer),I.vertexAttribPointer(Md,de,Fe,re,xe,Re),Zd.type=Fe,Zd.size=de,Zd.buffer=He,Zd.normalized=
re,Zd.offset=Re,Zd.stride=xe;Zd.divisor!==Ce&&(f.vertexAttribDivisorANGLE(Md,Ce),Zd.divisor=Ce)}else if(Zd.buffer&&(I.disableVertexAttribArray(Md),Zd.buffer=null),Zd.x!==Je||Zd.y!==Ke||Zd.z!==Ge||Zd.w!==Ie)I.vertexAttrib4f(Md,Je,Ke,Ge,Ie),Zd.x=Je,Zd.y=Ke,Zd.z=Ge,Zd.w=Ie;ge=q.call(this,N,h,l);Le=!1;Hd=null;Sd=0;De=!1;bf=Me=0;af=1;Te=0;Oe=5126;Ve=Ue=Xe=$e=0;ra(ge)?(Le=!0,Hd=r.createStream(34962,ge),Oe=Hd.dtype):(Hd=r.getBuffer(ge))?Oe=Hd.dtype:"constant"in ge?(af=2,"number"===typeof ge.constant?(Xe=
ge.constant,Ue=Ve=$e=0):(Xe=0<ge.constant.length?ge.constant[0]:0,Ue=1<ge.constant.length?ge.constant[1]:0,Ve=2<ge.constant.length?ge.constant[2]:0,$e=3<ge.constant.length?ge.constant[3]:0)):(Hd=ra(ge.buffer)?r.createStream(34962,ge.buffer):r.getBuffer(ge.buffer),Oe="type"in ge?be[ge.type]:Hd.dtype,De=!!ge.normalized,bf=ge.size|0,Me=ge.offset|0,Te=ge.stride|0,Sd=ge.divisor|0);Td=ea.location;ae=v[Td];if(1===af){ae.buffer||I.enableVertexAttribArray(Td);We=bf||1;if(ae.type!==Oe||ae.size!==We||ae.buffer!==
Hd||ae.normalized!==De||ae.offset!==Me||ae.stride!==Te)I.bindBuffer(34962,Hd.buffer),I.vertexAttribPointer(Td,We,Oe,De,Te,Me),ae.type=Oe,ae.size=We,ae.buffer=Hd,ae.normalized=De,ae.offset=Me,ae.stride=Te;ae.divisor!==Sd&&(f.vertexAttribDivisorANGLE(Td,Sd),ae.divisor=Sd)}else if(ae.buffer&&(I.disableVertexAttribArray(Td),ae.buffer=null),ae.x!==Xe||ae.y!==Ue||ae.z!==Ve||ae.w!==$e)I.vertexAttrib4f(Td,Xe,Ue,Ve,$e),ae.x=Xe,ae.y=Ue,ae.z=Ve,ae.w=$e;hf=N.pixelRatio;l&&nf===hf||(nf=hf,I.uniform1f(za.location,
hf));ef=h.scale;jf=ef[0];lf=ef[1];l&&kf===jf&&rf===lf||(kf=jf,rf=lf,I.uniform2f(ha.location,jf,lf));of=h.scaleFract;sf=of[0];Cf=of[1];l&&Bf===sf&&Pe===Cf||(Bf=sf,Pe=Cf,I.uniform2f(Ea.location,sf,Cf));Ee=h.translate;pf=Ee[0];Df=Ee[1];l&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,I.uniform2f(pa.location,pf,Df));Af=h.translateFract;Ef=Af[0];wf=Af[1];l&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,I.uniform2f(Aa.location,Ef,wf));vf=Q.call(this,N,h,l);yf=vf[0];If=vf[1];l&&zf===yf&&Kf===If||(zf=yf,Kf=If,I.uniform2f(qa.location,
yf,If));Lf=h.opacity;l&&Mf===Lf||(Mf=Lf,I.uniform1f(la.location,Lf));(tf=h.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;I.uniform1i(T.location,Rf.bind());Hf=h.elements;uf=null;(uf=(dg=ra(Hf))?dd.createStream(Hf):dd.getElements(Hf))&&I.bindBuffer(34963,uf.buffer.buffer);Sf=h.offset;if(Tf=h.count)0<nb?uf?f.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),nb):f.drawArraysInstancedANGLE(0,Sf,Tf,nb):0>nb&&(uf?I.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>
1)):I.drawArrays(0,Sf,Tf)),N.viewportWidth=Nb,N.viewportHeight=jb,pb&&r.destroyStream(Ua),Pa&&r.destroyStream(Bc),mb&&r.destroyStream(gc),Xd&&r.destroyStream(Dc),ad&&r.destroyStream(Pc),ce&&r.destroyStream(jd),oe&&r.destroyStream(qe),me&&r.destroyStream(He),Le&&r.destroyStream(Hd),Rf.unbind(),dg&&dd.destroyStream(uf)}P.unbind();ta.dirty=!0;Ca.setVAO(null);d&&(R.cpuTime+=performance.now()-g)},draw:function(a){var c,d,f,l,q,e,p,k,K,A,z,t,y,G,B,na,S,C,ka,Q,P,w,F,ya,V,W,Z,Y,ca,ga,sa,da,wa,ma,U,Fa,hd,
xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,yd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,ce,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Ze,Be,jd,mf,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe;c=ba.next;c!==ba.cur&&(c?I.bindFramebuffer(36160,c.framebuffer):I.bindFramebuffer(36160,
null),ba.cur=c);if(ta.dirty){var Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,Ve,Td,ae,We,hf,nf,ef,jf,kf,lf,rf,of,sf;Fe=Ga.dither;Fe!==ta.dither&&(Fe?I.enable(3024):I.disable(3024),ta.dither=Fe);Ie=ua[0];Je=ua[1];if(Ie!==Ka[0]||Je!==Ka[1])I.blendEquationSeparate(Ie,Je),Ka[0]=Ie,Ka[1]=Je;Ke=Ga.depth_func;Ke!==ta.depth_func&&(I.depthFunc(Ke),ta.depth_func=Ke);Ge=Zb[0];Md=Zb[1];if(Ge!==Ha[0]||Md!==Ha[1])I.depthRange(Ge,Md),Ha[0]=Ge,Ha[1]=Md;Zd=Ga.depth_mask;Zd!==ta.depth_mask&&(I.depthMask(Zd),
ta.depth_mask=Zd);de=fa[0];ge=fa[1];Le=fa[2];Hd=fa[3];if(de!==ia[0]||ge!==ia[1]||Le!==ia[2]||Hd!==ia[3])I.colorMask(de,ge,Le,Hd),ia[0]=de,ia[1]=ge,ia[2]=Le,ia[3]=Hd;Sd=Ga.cull_enable;Sd!==ta.cull_enable&&(Sd?I.enable(2884):I.disable(2884),ta.cull_enable=Sd);De=Ga.cull_face;De!==ta.cull_face&&(I.cullFace(De),ta.cull_face=De);Me=Ga.frontFace;Me!==ta.frontFace&&(I.frontFace(Me),ta.frontFace=Me);bf=Ga.lineWidth;bf!==ta.lineWidth&&(I.lineWidth(bf),ta.lineWidth=bf);af=Ga.polygonOffset_enable;af!==ta.polygonOffset_enable&&
(af?I.enable(32823):I.disable(32823),ta.polygonOffset_enable=af);Te=$b[0];Oe=$b[1];if(Te!==Rb[0]||Oe!==Rb[1])I.polygonOffset(Te,Oe),Rb[0]=Te,Rb[1]=Oe;$e=Ga.sample_alpha;$e!==ta.sample_alpha&&($e?I.enable(32926):I.disable(32926),ta.sample_alpha=$e);Xe=Ga.sample_enable;Xe!==ta.sample_enable&&(Xe?I.enable(32928):I.disable(32928),ta.sample_enable=Xe);Ue=Ba[0];Ve=Ba[1];if(Ue!==Cd[0]||Ve!==Cd[1])I.sampleCoverage(Ue,Ve),Cd[0]=Ue,Cd[1]=Ve;Td=Ga.stencil_mask;Td!==ta.stencil_mask&&(I.stencilMask(Td),ta.stencil_mask=
Td);ae=ye[0];We=ye[1];hf=ye[2];if(ae!==se[0]||We!==se[1]||hf!==se[2])I.stencilFunc(ae,We,hf),se[0]=ae,se[1]=We,se[2]=hf;nf=Ad[0];ef=Ad[1];jf=Ad[2];kf=Ad[3];if(nf!==Dd[0]||ef!==Dd[1]||jf!==Dd[2]||kf!==Dd[3])I.stencilOpSeparate(nf,ef,jf,kf),Dd[0]=nf,Dd[1]=ef,Dd[2]=jf,Dd[3]=kf;lf=Ud[0];rf=Ud[1];of=Ud[2];sf=Ud[3];if(lf!==ne[0]||rf!==ne[1]||of!==ne[2]||sf!==ne[3])I.stencilOpSeparate(lf,rf,of,sf),ne[0]=lf,ne[1]=rf,ne[2]=of,ne[3]=sf}d=a.viewport;f=d.x|0;l=d.y|0;q="width"in d?d.width|0:N.framebufferWidth-
f;e="height"in d?d.height|0:N.framebufferHeight-l;p=N.viewportWidth;N.viewportWidth=q;k=N.viewportHeight;N.viewportHeight=e;I.viewport(f,l,q,e);he[0]=f;he[1]=l;he[2]=q;he[3]=e;I.blendColor(0,0,0,1);aa[0]=0;aa[1]=0;aa[2]=0;aa[3]=1;I.enable(3042);ta.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;I.disable(2929);ta.depth_enable=!1;K=a.viewport;A=K.x|0;z=K.y|0;t="width"in K?K.width|0:N.framebufferWidth-A;y="height"in K?K.height|0:N.framebufferHeight-z;I.scissor(A,
z,t,y);Vd[0]=A;Vd[1]=z;Vd[2]=t;Vd[3]=y;I.enable(3089);ta.scissor_enable=!0;I.disable(2960);ta.stencil_enable=!1;if(G=ta.profile)B=performance.now(),R.count++;I.useProgram(D.program);na=Gb.angle_instanced_arrays;Ca.setVAO(null);S=M.call(this,N,a,0);C=!1;ka=null;Q=0;P=!1;F=w=0;ya=1;V=0;W=5126;ga=ca=Y=Z=0;ra(S)?(C=!0,ka=r.createStream(34962,S),W=ka.dtype):(ka=r.getBuffer(S))?W=ka.dtype:"constant"in S?(ya=2,"number"===typeof S.constant?(Y=S.constant,ca=ga=Z=0):(Y=0<S.constant.length?S.constant[0]:0,ca=
1<S.constant.length?S.constant[1]:0,ga=2<S.constant.length?S.constant[2]:0,Z=3<S.constant.length?S.constant[3]:0)):(ka=ra(S.buffer)?r.createStream(34962,S.buffer):r.getBuffer(S.buffer),W="type"in S?be[S.type]:ka.dtype,P=!!S.normalized,F=S.size|0,w=S.offset|0,V=S.stride|0,Q=S.divisor|0);sa=Ia.location;da=v[sa];if(1===ya){da.buffer||I.enableVertexAttribArray(sa);wa=F||1;if(da.type!==W||da.size!==wa||da.buffer!==ka||da.normalized!==P||da.offset!==w||da.stride!==V)I.bindBuffer(34962,ka.buffer),I.vertexAttribPointer(sa,
wa,W,P,V,w),da.type=W,da.size=wa,da.buffer=ka,da.normalized=P,da.offset=w,da.stride=V;da.divisor!==Q&&(na.vertexAttribDivisorANGLE(sa,Q),da.divisor=Q)}else if(da.buffer&&(I.disableVertexAttribArray(sa),da.buffer=null),da.x!==Y||da.y!==ca||da.z!==ga||da.w!==Z)I.vertexAttrib4f(sa,Y,ca,ga,Z),da.x=Y,da.y=ca,da.z=ga,da.w=Z;ma=m.call(this,N,a,0);U=!1;Fa=null;hd=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=Tc=0;ra(ma)?(U=!0,Fa=r.createStream(34962,ma),Va=Fa.dtype):(Fa=r.getBuffer(ma))?Va=Fa.dtype:"constant"in
ma?(ab=2,"number"===typeof ma.constant?(Hb=ma.constant,Ib=qc=Tc=0):(Hb=0<ma.constant.length?ma.constant[0]:0,Ib=1<ma.constant.length?ma.constant[1]:0,qc=2<ma.constant.length?ma.constant[2]:0,Tc=3<ma.constant.length?ma.constant[3]:0)):(Fa=ra(ma.buffer)?r.createStream(34962,ma.buffer):r.getBuffer(ma.buffer),Va="type"in ma?be[ma.type]:Fa.dtype,xb=!!ma.normalized,Mb=ma.size|0,cb=ma.offset|0,nb=ma.stride|0,hd=ma.divisor|0);Nb=ac.location;jb=v[Nb];if(1===ab){jb.buffer||I.enableVertexAttribArray(Nb);Fb=
Mb||1;if(jb.type!==Va||jb.size!==Fb||jb.buffer!==Fa||jb.normalized!==xb||jb.offset!==cb||jb.stride!==nb)I.bindBuffer(34962,Fa.buffer),I.vertexAttribPointer(Nb,Fb,Va,xb,nb,cb),jb.type=Va,jb.size=Fb,jb.buffer=Fa,jb.normalized=xb,jb.offset=cb,jb.stride=nb;jb.divisor!==hd&&(na.vertexAttribDivisorANGLE(Nb,hd),jb.divisor=hd)}else if(jb.buffer&&(I.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==Ib||jb.z!==qc||jb.w!==Tc)I.vertexAttrib4f(Nb,Hb,Ib,qc,Tc),jb.x=Hb,jb.y=Ib,jb.z=qc,jb.w=Tc;Cb=g.call(this,
N,a,0);vb=!1;hb=null;Xb=0;Ob=!1;Ua=pb=0;Tb=1;yb=0;bc=5126;qb=Ja=ob=ib=0;ra(Cb)?(vb=!0,hb=r.createStream(34962,Cb),bc=hb.dtype):(hb=r.getBuffer(Cb))?bc=hb.dtype:"constant"in Cb?(Tb=2,"number"===typeof Cb.constant?(ob=Cb.constant,Ja=qb=ib=0):(ob=0<Cb.constant.length?Cb.constant[0]:0,Ja=1<Cb.constant.length?Cb.constant[1]:0,qb=2<Cb.constant.length?Cb.constant[2]:0,ib=3<Cb.constant.length?Cb.constant[3]:0)):(hb=ra(Cb.buffer)?r.createStream(34962,Cb.buffer):r.getBuffer(Cb.buffer),bc="type"in Cb?be[Cb.type]:
hb.dtype,Ob=!!Cb.normalized,Ua=Cb.size|0,pb=Cb.offset|0,yb=Cb.stride|0,Xb=Cb.divisor|0);La=L.location;eb=v[La];if(1===Tb){eb.buffer||I.enableVertexAttribArray(La);fb=Ua||1;if(eb.type!==bc||eb.size!==fb||eb.buffer!==hb||eb.normalized!==Ob||eb.offset!==pb||eb.stride!==yb)I.bindBuffer(34962,hb.buffer),I.vertexAttribPointer(La,fb,bc,Ob,yb,pb),eb.type=bc,eb.size=fb,eb.buffer=hb,eb.normalized=Ob,eb.offset=pb,eb.stride=yb;eb.divisor!==Xb&&(na.vertexAttribDivisorANGLE(La,Xb),eb.divisor=Xb)}else if(eb.buffer&&
(I.disableVertexAttribArray(La),eb.buffer=null),eb.x!==ob||eb.y!==Ja||eb.z!==qb||eb.w!==ib)I.vertexAttrib4f(La,ob,Ja,qb,ib),eb.x=ob,eb.y=Ja,eb.z=qb,eb.w=ib;Ma=h.call(this,N,a,0);kb=!1;Wa=null;sb=0;rb=!1;Bc=Pa=0;Ra=1;Jb=0;Db=5126;Kb=Ya=yd=Na=0;ra(Ma)?(kb=!0,Wa=r.createStream(34962,Ma),Db=Wa.dtype):(Wa=r.getBuffer(Ma))?Db=Wa.dtype:"constant"in Ma?(Ra=2,"number"===typeof Ma.constant?(yd=Ma.constant,Ya=Kb=Na=0):(yd=0<Ma.constant.length?Ma.constant[0]:0,Ya=1<Ma.constant.length?Ma.constant[1]:0,Kb=2<Ma.constant.length?
Ma.constant[2]:0,Na=3<Ma.constant.length?Ma.constant[3]:0)):(Wa=ra(Ma.buffer)?r.createStream(34962,Ma.buffer):r.getBuffer(Ma.buffer),Db="type"in Ma?be[Ma.type]:Wa.dtype,rb=!!Ma.normalized,Bc=Ma.size|0,Pa=Ma.offset|0,Jb=Ma.stride|0,sb=Ma.divisor|0);Lb=Ta.location;lb=v[Lb];if(1===Ra){lb.buffer||I.enableVertexAttribArray(Lb);Oa=Bc||1;if(lb.type!==Db||lb.size!==Oa||lb.buffer!==Wa||lb.normalized!==rb||lb.offset!==Pa||lb.stride!==Jb)I.bindBuffer(34962,Wa.buffer),I.vertexAttribPointer(Lb,Oa,Db,rb,Jb,Pa),
lb.type=Db,lb.size=Oa,lb.buffer=Wa,lb.normalized=rb,lb.offset=Pa,lb.stride=Jb;lb.divisor!==sb&&(na.vertexAttribDivisorANGLE(Lb,sb),lb.divisor=sb)}else if(lb.buffer&&(I.disableVertexAttribArray(Lb),lb.buffer=null),lb.x!==yd||lb.y!==Ya||lb.z!==Kb||lb.w!==Na)I.vertexAttrib4f(Lb,yd,Ya,Kb,Na),lb.x=yd,lb.y=Ya,lb.z=Kb,lb.w=Na;Yb=b.call(this,N,a,0);Qa=!1;tb=null;ub=0;Sa=!1;gc=mb=0;zc=1;uc=0;bb=5126;Lc=Xa=nd=jc=0;ra(Yb)?(Qa=!0,tb=r.createStream(34962,Yb),bb=tb.dtype):(tb=r.getBuffer(Yb))?bb=tb.dtype:"constant"in
Yb?(zc=2,"number"===typeof Yb.constant?(nd=Yb.constant,Xa=Lc=jc=0):(nd=0<Yb.constant.length?Yb.constant[0]:0,Xa=1<Yb.constant.length?Yb.constant[1]:0,Lc=2<Yb.constant.length?Yb.constant[2]:0,jc=3<Yb.constant.length?Yb.constant[3]:0)):(tb=ra(Yb.buffer)?r.createStream(34962,Yb.buffer):r.getBuffer(Yb.buffer),bb="type"in Yb?be[Yb.type]:tb.dtype,Sa=!!Yb.normalized,gc=Yb.size|0,mb=Yb.offset|0,uc=Yb.stride|0,ub=Yb.divisor|0);zb=ja.location;Za=v[zb];if(1===zc){Za.buffer||I.enableVertexAttribArray(zb);Ub=
gc||1;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)I.bindBuffer(34962,tb.buffer),I.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(na.vertexAttribDivisorANGLE(zb,ub),Za.divisor=ub)}else if(Za.buffer&&(I.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==nd||Za.y!==Xa||Za.z!==Lc||Za.w!==jc)I.vertexAttrib4f(zb,nd,Xa,Lc,jc),Za.x=nd,Za.y=Xa,Za.z=Lc,Za.w=jc;sc=E.call(this,
N,a,0);Vb=!1;Pb=null;Jc=0;Qb=!1;Dc=ce=0;ud=1;Mc=0;fd=5126;hc=vc=nc=qd=0;ra(sc)?(Vb=!0,Pb=r.createStream(34962,sc),fd=Pb.dtype):(Pb=r.getBuffer(sc))?fd=Pb.dtype:"constant"in sc?(ud=2,"number"===typeof sc.constant?(nc=sc.constant,vc=hc=qd=0):(nc=0<sc.constant.length?sc.constant[0]:0,vc=1<sc.constant.length?sc.constant[1]:0,hc=2<sc.constant.length?sc.constant[2]:0,qd=3<sc.constant.length?sc.constant[3]:0)):(Pb=ra(sc.buffer)?r.createStream(34962,sc.buffer):r.getBuffer(sc.buffer),fd="type"in sc?be[sc.type]:
Pb.dtype,Qb=!!sc.normalized,Dc=sc.size|0,ce=sc.offset|0,Mc=sc.stride|0,Jc=sc.divisor|0);db=oa.location;rc=v[db];if(1===ud){rc.buffer||I.enableVertexAttribArray(db);Sb=Dc||1;if(rc.type!==fd||rc.size!==Sb||rc.buffer!==Pb||rc.normalized!==Qb||rc.offset!==ce||rc.stride!==Mc)I.bindBuffer(34962,Pb.buffer),I.vertexAttribPointer(db,Sb,fd,Qb,Mc,ce),rc.type=fd,rc.size=Sb,rc.buffer=Pb,rc.normalized=Qb,rc.offset=ce,rc.stride=Mc;rc.divisor!==Jc&&(na.vertexAttribDivisorANGLE(db,Jc),rc.divisor=Jc)}else if(rc.buffer&&
(I.disableVertexAttribArray(db),rc.buffer=null),rc.x!==nc||rc.y!==vc||rc.z!==hc||rc.w!==qd)I.vertexAttrib4f(db,nc,vc,hc,qd),rc.x=nc,rc.y=vc,rc.z=hc,rc.w=qd;Wb=J.call(this,N,a,0);dc=!1;ic=null;xc=0;Ac=!1;Pc=ad=0;Qc=1;Rc=0;Xc=5126;kc=Yc=bd=wd=0;ra(Wb)?(dc=!0,ic=r.createStream(34962,Wb),Xc=ic.dtype):(ic=r.getBuffer(Wb))?Xc=ic.dtype:"constant"in Wb?(Qc=2,"number"===typeof Wb.constant?(bd=Wb.constant,Yc=kc=wd=0):(bd=0<Wb.constant.length?Wb.constant[0]:0,Yc=1<Wb.constant.length?Wb.constant[1]:0,kc=2<Wb.constant.length?
Wb.constant[2]:0,wd=3<Wb.constant.length?Wb.constant[3]:0)):(ic=ra(Wb.buffer)?r.createStream(34962,Wb.buffer):r.getBuffer(Wb.buffer),Xc="type"in Wb?be[Wb.type]:ic.dtype,Ac=!!Wb.normalized,Pc=Wb.size|0,ad=Wb.offset|0,Rc=Wb.stride|0,xc=Wb.divisor|0);cc=n.location;Zc=v[cc];if(1===Qc){Zc.buffer||I.enableVertexAttribArray(cc);Uc=Pc||4;if(Zc.type!==Xc||Zc.size!==Uc||Zc.buffer!==ic||Zc.normalized!==Ac||Zc.offset!==ad||Zc.stride!==Rc)I.bindBuffer(34962,ic.buffer),I.vertexAttribPointer(cc,Uc,Xc,Ac,Rc,ad),
Zc.type=Xc,Zc.size=Uc,Zc.buffer=ic,Zc.normalized=Ac,Zc.offset=ad,Zc.stride=Rc;Zc.divisor!==xc&&(na.vertexAttribDivisorANGLE(cc,xc),Zc.divisor=xc)}else if(Zc.buffer&&(I.disableVertexAttribArray(cc),Zc.buffer=null),Zc.x!==bd||Zc.y!==Yc||Zc.z!==kc||Zc.w!==wd)I.vertexAttrib4f(cc,bd,Yc,kc,wd),Zc.x=bd,Zc.y=Yc,Zc.z=kc,Zc.w=wd;cd=O.call(this,N,a,0);yc=!1;id=null;rd=0;Ze=!1;jd=Be=0;mf=1;Nd=0;Yd=5126;Gd=Id=Od=ee=0;ra(cd)?(yc=!0,id=r.createStream(34962,cd),Yd=id.dtype):(id=r.getBuffer(cd))?Yd=id.dtype:"constant"in
cd?(mf=2,"number"===typeof cd.constant?(Od=cd.constant,Id=Gd=ee=0):(Od=0<cd.constant.length?cd.constant[0]:0,Id=1<cd.constant.length?cd.constant[1]:0,Gd=2<cd.constant.length?cd.constant[2]:0,ee=3<cd.constant.length?cd.constant[3]:0)):(id=ra(cd.buffer)?r.createStream(34962,cd.buffer):r.getBuffer(cd.buffer),Yd="type"in cd?be[cd.type]:id.dtype,Ze=!!cd.normalized,jd=cd.size|0,Be=cd.offset|0,Nd=cd.stride|0,rd=cd.divisor|0);od=xa.location;Sc=v[od];if(1===mf){Sc.buffer||I.enableVertexAttribArray(od);vd=
jd||4;if(Sc.type!==Yd||Sc.size!==vd||Sc.buffer!==id||Sc.normalized!==Ze||Sc.offset!==Be||Sc.stride!==Nd)I.bindBuffer(34962,id.buffer),I.vertexAttribPointer(od,vd,Yd,Ze,Nd,Be),Sc.type=Yd,Sc.size=vd,Sc.buffer=id,Sc.normalized=Ze,Sc.offset=Be,Sc.stride=Nd;Sc.divisor!==rd&&(na.vertexAttribDivisorANGLE(od,rd),Sc.divisor=rd)}else if(Sc.buffer&&(I.disableVertexAttribArray(od),Sc.buffer=null),Sc.x!==Od||Sc.y!==Id||Sc.z!==Gd||Sc.w!==ee)I.vertexAttrib4f(od,Od,Id,Gd,ee),Sc.x=Od,Sc.y=Id,Sc.z=Gd,Sc.w=ee;td=X.call(this,
N,a,0);kd=!1;xd=null;Bd=0;Ed=!1;qe=oe=0;ue=1;ke=0;je=5126;le=fe=ve=ie=0;ra(td)?(kd=!0,xd=r.createStream(34962,td),je=xd.dtype):(xd=r.getBuffer(td))?je=xd.dtype:"constant"in td?(ue=2,"number"===typeof td.constant?(ve=td.constant,fe=le=ie=0):(ve=0<td.constant.length?td.constant[0]:0,fe=1<td.constant.length?td.constant[1]:0,le=2<td.constant.length?td.constant[2]:0,ie=3<td.constant.length?td.constant[3]:0)):(xd=ra(td.buffer)?r.createStream(34962,td.buffer):r.getBuffer(td.buffer),je="type"in td?be[td.type]:
xd.dtype,Ed=!!td.normalized,qe=td.size|0,oe=td.offset|0,ke=td.stride|0,Bd=td.divisor|0);Nc=ea.location;gd=v[Nc];if(1===ue){gd.buffer||I.enableVertexAttribArray(Nc);we=qe||1;if(gd.type!==je||gd.size!==we||gd.buffer!==xd||gd.normalized!==Ed||gd.offset!==oe||gd.stride!==ke)I.bindBuffer(34962,xd.buffer),I.vertexAttribPointer(Nc,we,je,Ed,ke,oe),gd.type=je,gd.size=we,gd.buffer=xd,gd.normalized=Ed,gd.offset=oe,gd.stride=ke;gd.divisor!==Bd&&(na.vertexAttribDivisorANGLE(Nc,Bd),gd.divisor=Bd)}else if(gd.buffer&&
(I.disableVertexAttribArray(Nc),gd.buffer=null),gd.x!==ve||gd.y!==fe||gd.z!==le||gd.w!==ie)I.vertexAttrib4f(Nc,ve,fe,le,ie),gd.x=ve,gd.y=fe,gd.z=le,gd.w=ie;I.uniform1i(H.location,!1);I.uniform1f(za.location,N.pixelRatio);pe=a.scale;I.uniform2f(ha.location,pe[0],pe[1]);Kd=a.scaleFract;I.uniform2f(Ea.location,Kd[0],Kd[1]);Pd=a.translate;I.uniform2f(pa.location,Pd[0],Pd[1]);Qd=a.translateFract;I.uniform2f(Aa.location,Qd[0],Qd[1]);Rd=x.call(this,N,a,0);I.uniform2f(qa.location,Rd[0],Rd[1]);I.uniform1f(la.location,
a.opacity);I.uniform1i(Da.location,u.bind());(me=a.markerTexture)&&"framebuffer"===me._reglType&&(me=me.color[0]);He=me._texture;I.uniform1i(T.location,He.bind());Ce=a.elements;re=null;(re=(Re=ra(Ce))?dd.createStream(Ce):dd.getElements(Ce))&&I.bindBuffer(34963,re.buffer.buffer);Se=a.offset;if(Ne=a.count)xe=va.instances,0<xe?re?na.drawElementsInstancedANGLE(0,Ne,re.type,Se<<(re.type-5121>>1),xe):na.drawArraysInstancedANGLE(0,Se,Ne,xe):0>xe&&(re?I.drawElements(0,Ne,re.type,Se<<(re.type-5121>>1)):I.drawArrays(0,
Se,Ne)),ta.dirty=!0,Ca.setVAO(null),N.viewportWidth=p,N.viewportHeight=k,G&&(R.cpuTime+=performance.now()-B),C&&r.destroyStream(ka),U&&r.destroyStream(Fa),vb&&r.destroyStream(hb),kb&&r.destroyStream(Wa),Qa&&r.destroyStream(tb),Vb&&r.destroyStream(Pb),dc&&r.destroyStream(ic),yc&&r.destroyStream(id),kd&&r.destroyStream(xd),u.unbind(),He.unbind(),Re&&dd.destroyStream(re)},scope:function(b,g,n){var v,h,q,e,I,L,K,m,A,H,y,T,S,D,ha,M,ba,u,ac,Ia,Q,x,P,aa,ea,J,E,Ca,za,xa,qa,O,fa,X,ja,Z,ga,Ta,pa,Ea,la,Aa,ma,
oa,wa,ua,Gb,Da,U,Ha,hd,gb,Ka,Rb,ia,Zb,$b,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Vd,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,Cd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Ba,Dc,Ud,Mc,fd,he,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,ye,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Dd,ne,jd,Ad,se,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,Jf,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,Ve,Td,ae,We,hf,nf,ef,jf,kf,lf,
rf,of,sf,Bf,Cf,Pe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;v=b.viewport;h=v.x|0;q=v.y|0;e="width"in v?v.width|0:N.framebufferWidth-h;I="height"in v?v.height|0:N.framebufferHeight-q;L=N.viewportWidth;N.viewportWidth=e;K=N.viewportHeight;N.viewportHeight=I;m=ce[0];ce[0]=h;A=ce[1];ce[1]=q;H=ce[2];ce[2]=e;
y=ce[3];ce[3]=I;T=ka[0];ka[0]=0;S=ka[1];ka[1]=0;D=ka[2];ka[2]=0;ha=ka[3];ka[3]=1;M=Ga.blend_enable;Ga.blend_enable=!0;ba=Fa[0];Fa[0]=770;u=Fa[1];Fa[1]=771;ac=Fa[2];Fa[2]=773;Ia=Fa[3];Fa[3]=1;Q=Ga.depth_enable;Ga.depth_enable=!1;x=b.viewport;P=x.x|0;aa=x.y|0;ea="width"in x?x.width|0:N.framebufferWidth-P;J="height"in x?x.height|0:N.framebufferHeight-aa;E=yd[0];yd[0]=P;Ca=yd[1];yd[1]=aa;za=yd[2];yd[2]=ea;xa=yd[3];yd[3]=J;qa=Ga.scissor_enable;Ga.scissor_enable=!0;O=Ga.stencil_enable;Ga.stencil_enable=
!1;if(fa=ta.profile)X=performance.now(),R.count++;ja=b.elements;Z=null;Z=(ga=ra(ja))?dd.createStream(ja):dd.getElements(ja);Ta=va.elements;va.elements=Z;pa=b.offset;Ea=va.offset;va.offset=pa;la=b.count;Aa=va.count;va.count=la;ma=va.primitive;va.primitive=0;oa=ya[45];ya[45]=!1;wa=b.markerTexture;ua=ya[48];ya[48]=wa;Gb=b.opacity;Da=ya[10];ya[10]=Gb;U=F.call(this,N,b,n);Ha=ya[46];ya[46]=U;hd=ya[47];ya[47]=Y;gb=N.pixelRatio;Ka=ya[34];ya[34]=gb;Rb=b.scale;ia=ya[6];ya[6]=Rb;Zb=b.scaleFract;$b=ya[7];ya[7]=
Zb;bc=b.translate;ib=ya[8];ya[8]=bc;ob=b.translateFract;Ja=ya[9];ya[9]=ob;qb=t.call(this,N,b,n);La=!1;eb=null;fb=0;Ma=!1;Wa=kb=0;sb=1;rb=0;Pa=5126;Db=Jb=Ra=Vd=0;ra(qb)?(La=!0,eb=r.createStream(34962,qb),Pa=eb.dtype):(eb=r.getBuffer(qb))?Pa=eb.dtype:"constant"in qb?(sb=2,"number"===typeof qb.constant?(Ra=qb.constant,Jb=Db=Vd=0):(Ra=0<qb.constant.length?qb.constant[0]:0,Jb=1<qb.constant.length?qb.constant[1]:0,Db=2<qb.constant.length?qb.constant[2]:0,Vd=3<qb.constant.length?qb.constant[3]:0)):(eb=ra(qb.buffer)?
r.createStream(34962,qb.buffer):r.getBuffer(qb.buffer),Pa="type"in qb?be[qb.type]:eb.dtype,Ma=!!qb.normalized,Wa=qb.size|0,kb=qb.offset|0,rb=qb.stride|0,fb=qb.divisor|0);Na=V.buffer;V.buffer=eb;zd=V.divisor;V.divisor=fb;Ya=V.normalized;V.normalized=Ma;Kb=V.offset;V.offset=kb;Lb=V.size;V.size=Wa;lb=V.state;V.state=sb;Oa=V.stride;V.stride=rb;Yb=V.type;V.type=Pa;Qa=V.w;V.w=Vd;tb=V.x;V.x=Ra;ub=V.y;V.y=Jb;Sa=V.z;V.z=Db;mb=k.call(this,N,b,n);gc=!1;zc=null;uc=0;bb=!1;Cd=jc=0;Xa=1;Lc=0;zb=5126;Vb=sc=Ub=Za=
0;ra(mb)?(gc=!0,zc=r.createStream(34962,mb),zb=zc.dtype):(zc=r.getBuffer(mb))?zb=zc.dtype:"constant"in mb?(Xa=2,"number"===typeof mb.constant?(Ub=mb.constant,sc=Vb=Za=0):(Ub=0<mb.constant.length?mb.constant[0]:0,sc=1<mb.constant.length?mb.constant[1]:0,Vb=2<mb.constant.length?mb.constant[2]:0,Za=3<mb.constant.length?mb.constant[3]:0)):(zc=ra(mb.buffer)?r.createStream(34962,mb.buffer):r.getBuffer(mb.buffer),zb="type"in mb?be[mb.type]:zc.dtype,bb=!!mb.normalized,Cd=mb.size|0,jc=mb.offset|0,Lc=mb.stride|
0,uc=mb.divisor|0);Pb=w.buffer;w.buffer=zc;Jc=w.divisor;w.divisor=uc;Qb=w.normalized;w.normalized=bb;Ba=w.offset;w.offset=jc;Dc=w.size;w.size=Cd;Ud=w.state;w.state=Xa;Mc=w.stride;w.stride=Lc;fd=w.type;w.type=zb;he=w.w;w.w=Za;nc=w.x;w.x=Ub;vc=w.y;w.y=sc;hc=w.z;w.z=Vb;db=sa.call(this,N,b,n);rc=!1;Sb=null;Wb=0;dc=!1;xc=ic=0;Ac=1;ad=0;Pc=5126;ye=Xc=Rc=Qc=0;ra(db)?(rc=!0,Sb=r.createStream(34962,db),Pc=Sb.dtype):(Sb=r.getBuffer(db))?Pc=Sb.dtype:"constant"in db?(Ac=2,"number"===typeof db.constant?(Rc=db.constant,
Xc=ye=Qc=0):(Rc=0<db.constant.length?db.constant[0]:0,Xc=1<db.constant.length?db.constant[1]:0,ye=2<db.constant.length?db.constant[2]:0,Qc=3<db.constant.length?db.constant[3]:0)):(Sb=ra(db.buffer)?r.createStream(34962,db.buffer):r.getBuffer(db.buffer),Pc="type"in db?be[db.type]:Sb.dtype,dc=!!db.normalized,xc=db.size|0,ic=db.offset|0,ad=db.stride|0,Wb=db.divisor|0);bd=d.buffer;d.buffer=Sb;Yc=d.divisor;d.divisor=Wb;kc=d.normalized;d.normalized=dc;cc=d.offset;d.offset=ic;Zc=d.size;d.size=xc;Uc=d.state;
d.state=Ac;cd=d.stride;d.stride=ad;yc=d.type;d.type=Pc;id=d.w;d.w=Qc;rd=d.x;d.x=Rc;Dd=d.y;d.y=Xc;ne=d.z;d.z=ye;jd=z.call(this,N,b,n);Ad=!1;se=null;Yd=0;ee=!1;Id=Od=0;Gd=1;od=0;Sc=5126;xd=kd=td=vd=0;ra(jd)?(Ad=!0,se=r.createStream(34962,jd),Sc=se.dtype):(se=r.getBuffer(jd))?Sc=se.dtype:"constant"in jd?(Gd=2,"number"===typeof jd.constant?(td=jd.constant,kd=xd=vd=0):(td=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,xd=2<jd.constant.length?jd.constant[2]:0,vd=3<jd.constant.length?
jd.constant[3]:0)):(se=ra(jd.buffer)?r.createStream(34962,jd.buffer):r.getBuffer(jd.buffer),Sc="type"in jd?be[jd.type]:se.dtype,ee=!!jd.normalized,Id=jd.size|0,Od=jd.offset|0,od=jd.stride|0,Yd=jd.divisor|0);Bd=W.buffer;W.buffer=se;Ed=W.divisor;W.divisor=Yd;oe=W.normalized;W.normalized=ee;qe=W.offset;W.offset=Od;ue=W.size;W.size=Id;ke=W.state;W.state=Gd;je=W.stride;W.stride=od;ie=W.type;W.type=Sc;ve=W.w;W.w=vd;fe=W.x;W.x=td;le=W.y;W.y=kd;Nc=W.z;W.z=xd;gd=f.call(this,N,b,n);we=!1;pe=null;Kd=0;Pd=!1;
Rd=Qd=0;me=1;Jf=0;Ce=5126;Ne=Se=Re=re=0;ra(gd)?(we=!0,pe=r.createStream(34962,gd),Ce=pe.dtype):(pe=r.getBuffer(gd))?Ce=pe.dtype:"constant"in gd?(me=2,"number"===typeof gd.constant?(Re=gd.constant,Se=Ne=re=0):(Re=0<gd.constant.length?gd.constant[0]:0,Se=1<gd.constant.length?gd.constant[1]:0,Ne=2<gd.constant.length?gd.constant[2]:0,re=3<gd.constant.length?gd.constant[3]:0)):(pe=ra(gd.buffer)?r.createStream(34962,gd.buffer):r.getBuffer(gd.buffer),Ce="type"in gd?be[gd.type]:pe.dtype,Pd=!!gd.normalized,
Rd=gd.size|0,Qd=gd.offset|0,Jf=gd.stride|0,Kd=gd.divisor|0);xe=ca.buffer;ca.buffer=pe;Fe=ca.divisor;ca.divisor=Kd;Ie=ca.normalized;ca.normalized=Pd;Je=ca.offset;ca.offset=Qd;Ke=ca.size;ca.size=Rd;Ge=ca.state;ca.state=me;Md=ca.stride;ca.stride=Jf;Zd=ca.type;ca.type=Ce;de=ca.w;ca.w=re;ge=ca.x;ca.x=Re;Le=ca.y;ca.y=Se;Hd=ca.z;ca.z=Ne;Sd=G.call(this,N,b,n);De=!1;Me=null;bf=0;af=!1;Oe=Te=0;$e=1;Xe=0;Ue=5126;We=ae=Td=Ve=0;ra(Sd)?(De=!0,Me=r.createStream(34962,Sd),Ue=Me.dtype):(Me=r.getBuffer(Sd))?Ue=Me.dtype:
"constant"in Sd?($e=2,"number"===typeof Sd.constant?(Td=Sd.constant,ae=We=Ve=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,ae=1<Sd.constant.length?Sd.constant[1]:0,We=2<Sd.constant.length?Sd.constant[2]:0,Ve=3<Sd.constant.length?Sd.constant[3]:0)):(Me=ra(Sd.buffer)?r.createStream(34962,Sd.buffer):r.getBuffer(Sd.buffer),Ue="type"in Sd?be[Sd.type]:Me.dtype,af=!!Sd.normalized,Oe=Sd.size|0,Te=Sd.offset|0,Xe=Sd.stride|0,bf=Sd.divisor|0);hf=p.buffer;p.buffer=Me;nf=p.divisor;p.divisor=bf;ef=p.normalized;
p.normalized=af;jf=p.offset;p.offset=Te;kf=p.size;p.size=Oe;lf=p.state;p.state=$e;rf=p.stride;p.stride=Xe;of=p.type;p.type=Ue;sf=p.w;p.w=Ve;Bf=p.x;p.x=Td;Cf=p.y;p.y=ae;Pe=p.z;p.z=We;Ee=da.call(this,N,b,n);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;ra(Ee)?(pf=!0,qf=r.createStream(34962,Ee),xf=qf.dtype):(qf=r.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?
Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=ra(Ee.buffer)?r.createStream(34962,Ee.buffer):r.getBuffer(Ee.buffer),xf="type"in Ee?be[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Kf=C.buffer;C.buffer=qf;Lf=C.divisor;C.divisor=Df;Mf=C.normalized;C.normalized=Gf;tf=C.offset;C.offset=Af;Rf=C.size;C.size=Ef;Hf=C.state;C.state=Ff;uf=C.stride;C.stride=wf;dg=C.type;C.type=xf;Sf=C.w;C.w=vf;Tf=C.x;
C.x=yf;qg=C.y;C.y=zf;ff=C.z;C.z=If;cf=B.call(this,N,b,n);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ra(cf)?(Nf=!0,Of=r.createStream(34962,cf),Uf=Of.dtype):(Of=r.getBuffer(cf))?Uf=Of.dtype:"constant"in cf?(ig=2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Of=ra(cf.buffer)?r.createStream(34962,cf.buffer):
r.getBuffer(cf.buffer),Uf="type"in cf?be[cf.type]:Of.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=c.buffer;c.buffer=Of;sg=c.divisor;c.divisor=eg;tg=c.normalized;c.normalized=fg;ug=c.offset;c.offset=gg;vg=c.size;c.size=hg;wg=c.state;c.state=ig;xg=c.stride;c.stride=Wf;yg=c.type;c.type=Uf;zg=c.w;c.w=Xf;Ag=c.x;c.x=Yf;Bg=c.y;c.y=Zf;gf=c.z;c.z=jg;df=l.call(this,N,b,n);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ra(df)?(Pf=!0,Qf=r.createStream(34962,
df),Vf=Qf.dtype):(Qf=r.getBuffer(df))?Vf=Qf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Qf=ra(df.buffer)?r.createStream(34962,df.buffer):r.getBuffer(df.buffer),Vf="type"in df?be[df.type]:Qf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=a.buffer;a.buffer=
Qf;Dg=a.divisor;a.divisor=kg;Eg=a.normalized;a.normalized=lg;Fg=a.offset;a.offset=mg;Gg=a.size;a.size=ng;Hg=a.state;a.state=og;Ig=a.stride;a.stride=$f;Jg=a.type;a.type=Vf;Kg=a.w;a.w=ag;Lg=a.x;a.x=bg;Mg=a.y;a.y=cg;Ng=a.z;a.z=pg;Og=na.vert;na.vert=44;Pg=na.frag;na.frag=43;ta.dirty=!0;g(N,b,n);N.viewportWidth=L;N.viewportHeight=K;ce[0]=m;ce[1]=A;ce[2]=H;ce[3]=y;ka[0]=T;ka[1]=S;ka[2]=D;ka[3]=ha;Ga.blend_enable=M;Fa[0]=ba;Fa[1]=u;Fa[2]=ac;Fa[3]=Ia;Ga.depth_enable=Q;yd[0]=E;yd[1]=Ca;yd[2]=za;yd[3]=xa;Ga.scissor_enable=
qa;Ga.stencil_enable=O;fa&&(R.cpuTime+=performance.now()-X);ga&&dd.destroyStream(Z);va.elements=Ta;va.offset=Ea;va.count=Aa;va.primitive=ma;ya[45]=oa;ya[48]=ua;ya[10]=Da;ya[46]=Ha;ya[47]=hd;ya[34]=Ka;ya[6]=ia;ya[7]=$b;ya[8]=ib;ya[9]=Ja;La&&r.destroyStream(eb);V.buffer=Na;V.divisor=zd;V.normalized=Ya;V.offset=Kb;V.size=Lb;V.state=lb;V.stride=Oa;V.type=Yb;V.w=Qa;V.x=tb;V.y=ub;V.z=Sa;gc&&r.destroyStream(zc);w.buffer=Pb;w.divisor=Jc;w.normalized=Qb;w.offset=Ba;w.size=Dc;w.state=Ud;w.stride=Mc;w.type=
fd;w.w=he;w.x=nc;w.y=vc;w.z=hc;rc&&r.destroyStream(Sb);d.buffer=bd;d.divisor=Yc;d.normalized=kc;d.offset=cc;d.size=Zc;d.state=Uc;d.stride=cd;d.type=yc;d.w=id;d.x=rd;d.y=Dd;d.z=ne;Ad&&r.destroyStream(se);W.buffer=Bd;W.divisor=Ed;W.normalized=oe;W.offset=qe;W.size=ue;W.state=ke;W.stride=je;W.type=ie;W.w=ve;W.x=fe;W.y=le;W.z=Nc;we&&r.destroyStream(pe);ca.buffer=xe;ca.divisor=Fe;ca.normalized=Ie;ca.offset=Je;ca.size=Ke;ca.state=Ge;ca.stride=Md;ca.type=Zd;ca.w=de;ca.x=ge;ca.y=Le;ca.z=Hd;De&&r.destroyStream(Me);
p.buffer=hf;p.divisor=nf;p.normalized=ef;p.offset=jf;p.size=kf;p.state=lf;p.stride=rf;p.type=of;p.w=sf;p.x=Bf;p.y=Cf;p.z=Pe;pf&&r.destroyStream(qf);C.buffer=Kf;C.divisor=Lf;C.normalized=Mf;C.offset=tf;C.size=Rf;C.state=Hf;C.stride=uf;C.type=dg;C.w=Sf;C.x=Tf;C.y=qg;C.z=ff;Nf&&r.destroyStream(Of);c.buffer=rg;c.divisor=sg;c.normalized=tg;c.offset=ug;c.size=vg;c.state=wg;c.stride=xg;c.type=yg;c.w=zg;c.x=Ag;c.y=Bg;c.z=gf;Pf&&r.destroyStream(Qf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=
Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;na.vert=Og;na.frag=Pg;ta.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac){var Ta,v,r,N,ta,va,dd,Gb,ba,I,ra,Ga,na,ya,Ca,ka,aa,ua,Ka,Fa,gb,fa,ia,
Zb,Ha,$b,Rb,Ba,Cd,yd,Vd,ye,se,Ud,ne,Ad,Dd,ce,he;Ta=e.attributes;v=e.buffer;r=e.context;N=e.current;ta=e.draw;va=e.elements;dd=e.extensions;Gb=e.framebuffer;ba=e.gl;I=e.isBufferArgs;ra=e.next;Ga=e.shader;na=e.uniforms;ya=e.vao;Ca=ra.blend_color;ka=N.blend_color;aa=ra.blend_equation;ua=N.blend_equation;Ka=ra.blend_func;Fa=N.blend_func;gb=ra.colorMask;fa=N.colorMask;ia=ra.depth_range;Zb=N.depth_range;Ha=ra.polygonOffset_offset;$b=N.polygonOffset_offset;Rb=ra.sample_coverage;Ba=N.sample_coverage;Cd=ra.scissor_box;
yd=N.scissor_box;Vd=ra.stencil_func;ye=N.stencil_func;se=ra.stencil_opBack;Ud=N.stencil_opBack;ne=ra.stencil_opFront;Ad=N.stencil_opFront;Dd=ra.viewport;ce=N.viewport;he={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,d,g,f,l,h;b=Gb.next;b!==Gb.cur&&(b?ba.bindFramebuffer(36160,b.framebuffer):ba.bindFramebuffer(36160,null),Gb.cur=b);if(N.dirty){var e,p,k,m,z,t,Ga,G,B,na,D,M,u,C,x,J,w,F,E,Ca,O,V,X,W,Y,ca,sa,da,Ka,$a,Hc,
xb,cb,Mb;e=ra.dither;e!==N.dither&&(e?ba.enable(3024):ba.disable(3024),N.dither=e);p=aa[0];k=aa[1];if(p!==ua[0]||k!==ua[1])ba.blendEquationSeparate(p,k),ua[0]=p,ua[1]=k;m=ra.depth_func;m!==N.depth_func&&(ba.depthFunc(m),N.depth_func=m);z=ia[0];t=ia[1];if(z!==Zb[0]||t!==Zb[1])ba.depthRange(z,t),Zb[0]=z,Zb[1]=t;Ga=ra.depth_mask;Ga!==N.depth_mask&&(ba.depthMask(Ga),N.depth_mask=Ga);G=gb[0];B=gb[1];na=gb[2];D=gb[3];if(G!==fa[0]||B!==fa[1]||na!==fa[2]||D!==fa[3])ba.colorMask(G,B,na,D),fa[0]=G,fa[1]=B,
fa[2]=na,fa[3]=D;M=ra.cull_enable;M!==N.cull_enable&&(M?ba.enable(2884):ba.disable(2884),N.cull_enable=M);u=ra.cull_face;u!==N.cull_face&&(ba.cullFace(u),N.cull_face=u);C=ra.frontFace;C!==N.frontFace&&(ba.frontFace(C),N.frontFace=C);x=ra.lineWidth;x!==N.lineWidth&&(ba.lineWidth(x),N.lineWidth=x);J=ra.polygonOffset_enable;J!==N.polygonOffset_enable&&(J?ba.enable(32823):ba.disable(32823),N.polygonOffset_enable=J);w=Ha[0];F=Ha[1];if(w!==$b[0]||F!==$b[1])ba.polygonOffset(w,F),$b[0]=w,$b[1]=F;E=ra.sample_alpha;
E!==N.sample_alpha&&(E?ba.enable(32926):ba.disable(32926),N.sample_alpha=E);Ca=ra.sample_enable;Ca!==N.sample_enable&&(Ca?ba.enable(32928):ba.disable(32928),N.sample_enable=Ca);O=Rb[0];V=Rb[1];if(O!==Ba[0]||V!==Ba[1])ba.sampleCoverage(O,V),Ba[0]=O,Ba[1]=V;X=ra.stencil_mask;X!==N.stencil_mask&&(ba.stencilMask(X),N.stencil_mask=X);W=Vd[0];Y=Vd[1];ca=Vd[2];if(W!==ye[0]||Y!==ye[1]||ca!==ye[2])ba.stencilFunc(W,Y,ca),ye[0]=W,ye[1]=Y,ye[2]=ca;sa=ne[0];da=ne[1];Ka=ne[2];$a=ne[3];if(sa!==Ad[0]||da!==Ad[1]||
Ka!==Ad[2]||$a!==Ad[3])ba.stencilOpSeparate(sa,da,Ka,$a),Ad[0]=sa,Ad[1]=da,Ad[2]=Ka,Ad[3]=$a;Hc=se[0];xb=se[1];cb=se[2];Mb=se[3];if(Hc!==Ud[0]||xb!==Ud[1]||cb!==Ud[2]||Mb!==Ud[3])ba.stencilOpSeparate(Hc,xb,cb,Mb),Ud[0]=Hc,Ud[1]=xb,Ud[2]=cb,Ud[3]=Mb}ba.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ba.enable(3042);N.blend_enable=!0;ba.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;ba.disable(2929);N.depth_enable=!1;ba.enable(3089);N.scissor_enable=!0;ba.disable(2960);N.stencil_enable=
!1;if(d=N.profile)g=performance.now(),R.count+=c;ba.useProgram(wa.program);f=dd.angle_instanced_arrays;var ab;ya.setVAO(null);ba.uniform1i(H.location,!1);ba.uniform1i(qa.location,P.bind());ab=ta.instances;for(l=0;l<c;++l){h=a[l];var nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Cd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Dd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,
kc,cc,Zc,Uc,cd,yc,id,rd,Ze,Be,jd,mf,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,Ve,Td,ae,We,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Pe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf;nb=h.viewport;Va=nb.x|0;Tc=nb.y|0;Hb="width"in nb?nb.width|0:r.framebufferWidth-Va;Ib="height"in nb?nb.height|0:r.framebufferHeight-Tc;qc=r.viewportWidth;r.viewportWidth=Hb;Nb=
r.viewportHeight;r.viewportHeight=Ib;ba.viewport(Va,Tc,Hb,Ib);ce[0]=Va;ce[1]=Tc;ce[2]=Hb;ce[3]=Ib;jb=h.viewport;Fb=jb.x|0;Cb=jb.y|0;vb="width"in jb?jb.width|0:r.framebufferWidth-Fb;hb="height"in jb?jb.height|0:r.framebufferHeight-Cb;ba.scissor(Fb,Cb,vb,hb);yd[0]=Fb;yd[1]=Cb;yd[2]=vb;yd[3]=hb;Xb=A.call(this,r,h,l);Ob=!1;pb=null;Ua=0;Tb=!1;bc=yb=0;ib=1;ob=0;Ja=5126;fb=eb=La=qb=0;I(Xb)?(Ob=!0,pb=v.createStream(34962,Xb),Ja=pb.dtype):(pb=v.getBuffer(Xb))?Ja=pb.dtype:"constant"in Xb?(ib=2,"number"===typeof Xb.constant?
(La=Xb.constant,eb=fb=qb=0):(La=0<Xb.constant.length?Xb.constant[0]:0,eb=1<Xb.constant.length?Xb.constant[1]:0,fb=2<Xb.constant.length?Xb.constant[2]:0,qb=3<Xb.constant.length?Xb.constant[3]:0)):(pb=I(Xb.buffer)?v.createStream(34962,Xb.buffer):v.getBuffer(Xb.buffer),Ja="type"in Xb?he[Xb.type]:pb.dtype,Tb=!!Xb.normalized,bc=Xb.size|0,yb=Xb.offset|0,ob=Xb.stride|0,Ua=Xb.divisor|0);Ma=Aa.location;kb=Ta[Ma];if(1===ib){kb.buffer||ba.enableVertexAttribArray(Ma);Wa=bc||1;if(kb.type!==Ja||kb.size!==Wa||kb.buffer!==
pb||kb.normalized!==Tb||kb.offset!==yb||kb.stride!==ob)ba.bindBuffer(34962,pb.buffer),ba.vertexAttribPointer(Ma,Wa,Ja,Tb,ob,yb),kb.type=Ja,kb.size=Wa,kb.buffer=pb,kb.normalized=Tb,kb.offset=yb,kb.stride=ob;kb.divisor!==Ua&&(f.vertexAttribDivisorANGLE(Ma,Ua),kb.divisor=Ua)}else if(kb.buffer&&(ba.disableVertexAttribArray(Ma),kb.buffer=null),kb.x!==La||kb.y!==eb||kb.z!==fb||kb.w!==qb)ba.vertexAttrib4f(Ma,La,eb,fb,qb),kb.x=La,kb.y=eb,kb.z=fb,kb.w=qb;sb=ma.call(this,r,h,l);rb=!1;Pa=null;Bc=0;Ra=!1;Db=
Jb=0;Na=1;Cd=0;Ya=5126;Oa=lb=Lb=Kb=0;I(sb)?(rb=!0,Pa=v.createStream(34962,sb),Ya=Pa.dtype):(Pa=v.getBuffer(sb))?Ya=Pa.dtype:"constant"in sb?(Na=2,"number"===typeof sb.constant?(Lb=sb.constant,lb=Oa=Kb=0):(Lb=0<sb.constant.length?sb.constant[0]:0,lb=1<sb.constant.length?sb.constant[1]:0,Oa=2<sb.constant.length?sb.constant[2]:0,Kb=3<sb.constant.length?sb.constant[3]:0)):(Pa=I(sb.buffer)?v.createStream(34962,sb.buffer):v.getBuffer(sb.buffer),Ya="type"in sb?he[sb.type]:Pa.dtype,Ra=!!sb.normalized,Db=
sb.size|0,Jb=sb.offset|0,Cd=sb.stride|0,Bc=sb.divisor|0);Yb=L.location;Qa=Ta[Yb];if(1===Na){Qa.buffer||ba.enableVertexAttribArray(Yb);tb=Db||1;if(Qa.type!==Ya||Qa.size!==tb||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Jb||Qa.stride!==Cd)ba.bindBuffer(34962,Pa.buffer),ba.vertexAttribPointer(Yb,tb,Ya,Ra,Cd,Jb),Qa.type=Ya,Qa.size=tb,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Jb,Qa.stride=Cd;Qa.divisor!==Bc&&(f.vertexAttribDivisorANGLE(Yb,Bc),Qa.divisor=Bc)}else if(Qa.buffer&&(ba.disableVertexAttribArray(Yb),
Qa.buffer=null),Qa.x!==Lb||Qa.y!==lb||Qa.z!==Oa||Qa.w!==Kb)ba.vertexAttrib4f(Yb,Lb,lb,Oa,Kb),Qa.x=Lb,Qa.y=lb,Qa.z=Oa,Qa.w=Kb;ub=U.call(this,r,h,l);Sa=!1;mb=null;gc=0;zc=!1;bb=uc=0;jc=1;nd=0;Xa=5126;Ub=Za=zb=Lc=0;I(ub)?(Sa=!0,mb=v.createStream(34962,ub),Xa=mb.dtype):(mb=v.getBuffer(ub))?Xa=mb.dtype:"constant"in ub?(jc=2,"number"===typeof ub.constant?(zb=ub.constant,Za=Ub=Lc=0):(zb=0<ub.constant.length?ub.constant[0]:0,Za=1<ub.constant.length?ub.constant[1]:0,Ub=2<ub.constant.length?ub.constant[2]:
0,Lc=3<ub.constant.length?ub.constant[3]:0)):(mb=I(ub.buffer)?v.createStream(34962,ub.buffer):v.getBuffer(ub.buffer),Xa="type"in ub?he[ub.type]:mb.dtype,zc=!!ub.normalized,bb=ub.size|0,uc=ub.offset|0,nd=ub.stride|0,gc=ub.divisor|0);sc=Ia.location;Vb=Ta[sc];if(1===jc){Vb.buffer||ba.enableVertexAttribArray(sc);Pb=bb||1;if(Vb.type!==Xa||Vb.size!==Pb||Vb.buffer!==mb||Vb.normalized!==zc||Vb.offset!==uc||Vb.stride!==nd)ba.bindBuffer(34962,mb.buffer),ba.vertexAttribPointer(sc,Pb,Xa,zc,nd,uc),Vb.type=Xa,
Vb.size=Pb,Vb.buffer=mb,Vb.normalized=zc,Vb.offset=uc,Vb.stride=nd;Vb.divisor!==gc&&(f.vertexAttribDivisorANGLE(sc,gc),Vb.divisor=gc)}else if(Vb.buffer&&(ba.disableVertexAttribArray(sc),Vb.buffer=null),Vb.x!==zb||Vb.y!==Za||Vb.z!==Ub||Vb.w!==Lc)ba.vertexAttrib4f(sc,zb,Za,Ub,Lc),Vb.x=zb,Vb.y=Za,Vb.z=Ub,Vb.w=Lc;Jc=Z.call(this,r,h,l);Qb=!1;Dd=null;Dc=0;ud=!1;fd=Mc=0;qd=1;nc=0;vc=5126;Sb=rc=db=hc=0;I(Jc)?(Qb=!0,Dd=v.createStream(34962,Jc),vc=Dd.dtype):(Dd=v.getBuffer(Jc))?vc=Dd.dtype:"constant"in Jc?
(qd=2,"number"===typeof Jc.constant?(db=Jc.constant,rc=Sb=hc=0):(db=0<Jc.constant.length?Jc.constant[0]:0,rc=1<Jc.constant.length?Jc.constant[1]:0,Sb=2<Jc.constant.length?Jc.constant[2]:0,hc=3<Jc.constant.length?Jc.constant[3]:0)):(Dd=I(Jc.buffer)?v.createStream(34962,Jc.buffer):v.getBuffer(Jc.buffer),vc="type"in Jc?he[Jc.type]:Dd.dtype,ud=!!Jc.normalized,fd=Jc.size|0,Mc=Jc.offset|0,nc=Jc.stride|0,Dc=Jc.divisor|0);Wb=ac.location;dc=Ta[Wb];if(1===qd){dc.buffer||ba.enableVertexAttribArray(Wb);ic=fd||
1;if(dc.type!==vc||dc.size!==ic||dc.buffer!==Dd||dc.normalized!==ud||dc.offset!==Mc||dc.stride!==nc)ba.bindBuffer(34962,Dd.buffer),ba.vertexAttribPointer(Wb,ic,vc,ud,nc,Mc),dc.type=vc,dc.size=ic,dc.buffer=Dd,dc.normalized=ud,dc.offset=Mc,dc.stride=nc;dc.divisor!==Dc&&(f.vertexAttribDivisorANGLE(Wb,Dc),dc.divisor=Dc)}else if(dc.buffer&&(ba.disableVertexAttribArray(Wb),dc.buffer=null),dc.x!==db||dc.y!==rc||dc.z!==Sb||dc.w!==hc)ba.vertexAttrib4f(Wb,db,rc,Sb,hc),dc.x=db,dc.y=rc,dc.z=Sb,dc.w=hc;xc=ga.call(this,
r,h,l);Ac=!1;ad=null;Pc=0;Qc=!1;Xc=Rc=0;wd=1;bd=0;Yc=5126;Uc=Zc=cc=kc=0;I(xc)?(Ac=!0,ad=v.createStream(34962,xc),Yc=ad.dtype):(ad=v.getBuffer(xc))?Yc=ad.dtype:"constant"in xc?(wd=2,"number"===typeof xc.constant?(cc=xc.constant,Zc=Uc=kc=0):(cc=0<xc.constant.length?xc.constant[0]:0,Zc=1<xc.constant.length?xc.constant[1]:0,Uc=2<xc.constant.length?xc.constant[2]:0,kc=3<xc.constant.length?xc.constant[3]:0)):(ad=I(xc.buffer)?v.createStream(34962,xc.buffer):v.getBuffer(xc.buffer),Yc="type"in xc?he[xc.type]:
ad.dtype,Qc=!!xc.normalized,Xc=xc.size|0,Rc=xc.offset|0,bd=xc.stride|0,Pc=xc.divisor|0);cd=Ea.location;yc=Ta[cd];if(1===wd){yc.buffer||ba.enableVertexAttribArray(cd);id=Xc||1;if(yc.type!==Yc||yc.size!==id||yc.buffer!==ad||yc.normalized!==Qc||yc.offset!==Rc||yc.stride!==bd)ba.bindBuffer(34962,ad.buffer),ba.vertexAttribPointer(cd,id,Yc,Qc,bd,Rc),yc.type=Yc,yc.size=id,yc.buffer=ad,yc.normalized=Qc,yc.offset=Rc,yc.stride=bd;yc.divisor!==Pc&&(f.vertexAttribDivisorANGLE(cd,Pc),yc.divisor=Pc)}else if(yc.buffer&&
(ba.disableVertexAttribArray(cd),yc.buffer=null),yc.x!==cc||yc.y!==Zc||yc.z!==Uc||yc.w!==kc)ba.vertexAttrib4f(cd,cc,Zc,Uc,kc),yc.x=cc,yc.y=Zc,yc.z=Uc,yc.w=kc;rd=S.call(this,r,h,l);Ze=!1;Be=null;jd=0;mf=!1;Yd=Nd=0;ee=1;Od=0;Id=5126;vd=Sc=od=Gd=0;I(rd)?(Ze=!0,Be=v.createStream(34962,rd),Id=Be.dtype):(Be=v.getBuffer(rd))?Id=Be.dtype:"constant"in rd?(ee=2,"number"===typeof rd.constant?(od=rd.constant,Sc=vd=Gd=0):(od=0<rd.constant.length?rd.constant[0]:0,Sc=1<rd.constant.length?rd.constant[1]:0,vd=2<rd.constant.length?
rd.constant[2]:0,Gd=3<rd.constant.length?rd.constant[3]:0)):(Be=I(rd.buffer)?v.createStream(34962,rd.buffer):v.getBuffer(rd.buffer),Id="type"in rd?he[rd.type]:Be.dtype,mf=!!rd.normalized,Yd=rd.size|0,Nd=rd.offset|0,Od=rd.stride|0,jd=rd.divisor|0);td=oa.location;kd=Ta[td];if(1===ee){kd.buffer||ba.enableVertexAttribArray(td);xd=Yd||1;if(kd.type!==Id||kd.size!==xd||kd.buffer!==Be||kd.normalized!==mf||kd.offset!==Nd||kd.stride!==Od)ba.bindBuffer(34962,Be.buffer),ba.vertexAttribPointer(td,xd,Id,mf,Od,
Nd),kd.type=Id,kd.size=xd,kd.buffer=Be,kd.normalized=mf,kd.offset=Nd,kd.stride=Od;kd.divisor!==jd&&(f.vertexAttribDivisorANGLE(td,jd),kd.divisor=jd)}else if(kd.buffer&&(ba.disableVertexAttribArray(td),kd.buffer=null),kd.x!==od||kd.y!==Sc||kd.z!==vd||kd.w!==Gd)ba.vertexAttrib4f(td,od,Sc,vd,Gd),kd.x=od,kd.y=Sc,kd.z=vd,kd.w=Gd;Bd=K.call(this,r,h,l);Ed=!1;oe=null;qe=0;ue=!1;je=ke=0;ie=1;ve=0;fe=5126;we=gd=Nc=le=0;I(Bd)?(Ed=!0,oe=v.createStream(34962,Bd),fe=oe.dtype):(oe=v.getBuffer(Bd))?fe=oe.dtype:"constant"in
Bd?(ie=2,"number"===typeof Bd.constant?(Nc=Bd.constant,gd=we=le=0):(Nc=0<Bd.constant.length?Bd.constant[0]:0,gd=1<Bd.constant.length?Bd.constant[1]:0,we=2<Bd.constant.length?Bd.constant[2]:0,le=3<Bd.constant.length?Bd.constant[3]:0)):(oe=I(Bd.buffer)?v.createStream(34962,Bd.buffer):v.getBuffer(Bd.buffer),fe="type"in Bd?he[Bd.type]:oe.dtype,ue=!!Bd.normalized,je=Bd.size|0,ke=Bd.offset|0,ve=Bd.stride|0,qe=Bd.divisor|0);pe=n.location;Kd=Ta[pe];if(1===ie){Kd.buffer||ba.enableVertexAttribArray(pe);Pd=
je||4;if(Kd.type!==fe||Kd.size!==Pd||Kd.buffer!==oe||Kd.normalized!==ue||Kd.offset!==ke||Kd.stride!==ve)ba.bindBuffer(34962,oe.buffer),ba.vertexAttribPointer(pe,Pd,fe,ue,ve,ke),Kd.type=fe,Kd.size=Pd,Kd.buffer=oe,Kd.normalized=ue,Kd.offset=ke,Kd.stride=ve;Kd.divisor!==qe&&(f.vertexAttribDivisorANGLE(pe,qe),Kd.divisor=qe)}else if(Kd.buffer&&(ba.disableVertexAttribArray(pe),Kd.buffer=null),Kd.x!==Nc||Kd.y!==gd||Kd.z!==we||Kd.w!==le)ba.vertexAttrib4f(pe,Nc,gd,we,le),Kd.x=Nc,Kd.y=gd,Kd.z=we,Kd.w=le;Qd=
y.call(this,r,h,l);Rd=!1;me=null;He=0;Ce=!1;Re=re=0;Se=1;Ne=0;xe=5126;Ke=Je=Ie=Fe=0;I(Qd)?(Rd=!0,me=v.createStream(34962,Qd),xe=me.dtype):(me=v.getBuffer(Qd))?xe=me.dtype:"constant"in Qd?(Se=2,"number"===typeof Qd.constant?(Ie=Qd.constant,Je=Ke=Fe=0):(Ie=0<Qd.constant.length?Qd.constant[0]:0,Je=1<Qd.constant.length?Qd.constant[1]:0,Ke=2<Qd.constant.length?Qd.constant[2]:0,Fe=3<Qd.constant.length?Qd.constant[3]:0)):(me=I(Qd.buffer)?v.createStream(34962,Qd.buffer):v.getBuffer(Qd.buffer),xe="type"in
Qd?he[Qd.type]:me.dtype,Ce=!!Qd.normalized,Re=Qd.size|0,re=Qd.offset|0,Ne=Qd.stride|0,He=Qd.divisor|0);Ge=xa.location;Md=Ta[Ge];if(1===Se){Md.buffer||ba.enableVertexAttribArray(Ge);Zd=Re||4;if(Md.type!==xe||Md.size!==Zd||Md.buffer!==me||Md.normalized!==Ce||Md.offset!==re||Md.stride!==Ne)ba.bindBuffer(34962,me.buffer),ba.vertexAttribPointer(Ge,Zd,xe,Ce,Ne,re),Md.type=xe,Md.size=Zd,Md.buffer=me,Md.normalized=Ce,Md.offset=re,Md.stride=Ne;Md.divisor!==He&&(f.vertexAttribDivisorANGLE(Ge,He),Md.divisor=
He)}else if(Md.buffer&&(ba.disableVertexAttribArray(Ge),Md.buffer=null),Md.x!==Ie||Md.y!==Je||Md.z!==Ke||Md.w!==Fe)ba.vertexAttrib4f(Ge,Ie,Je,Ke,Fe),Md.x=Ie,Md.y=Je,Md.z=Ke,Md.w=Fe;de=q.call(this,r,h,l);ge=!1;Le=null;Hd=0;Sd=!1;Me=De=0;bf=1;af=0;Te=5126;Ue=Xe=$e=Oe=0;I(de)?(ge=!0,Le=v.createStream(34962,de),Te=Le.dtype):(Le=v.getBuffer(de))?Te=Le.dtype:"constant"in de?(bf=2,"number"===typeof de.constant?($e=de.constant,Xe=Ue=Oe=0):($e=0<de.constant.length?de.constant[0]:0,Xe=1<de.constant.length?
de.constant[1]:0,Ue=2<de.constant.length?de.constant[2]:0,Oe=3<de.constant.length?de.constant[3]:0)):(Le=I(de.buffer)?v.createStream(34962,de.buffer):v.getBuffer(de.buffer),Te="type"in de?he[de.type]:Le.dtype,Sd=!!de.normalized,Me=de.size|0,De=de.offset|0,af=de.stride|0,Hd=de.divisor|0);Ve=ea.location;Td=Ta[Ve];if(1===bf){Td.buffer||ba.enableVertexAttribArray(Ve);ae=Me||1;if(Td.type!==Te||Td.size!==ae||Td.buffer!==Le||Td.normalized!==Sd||Td.offset!==De||Td.stride!==af)ba.bindBuffer(34962,Le.buffer),
ba.vertexAttribPointer(Ve,ae,Te,Sd,af,De),Td.type=Te,Td.size=ae,Td.buffer=Le,Td.normalized=Sd,Td.offset=De,Td.stride=af;Td.divisor!==Hd&&(f.vertexAttribDivisorANGLE(Ve,Hd),Td.divisor=Hd)}else if(Td.buffer&&(ba.disableVertexAttribArray(Ve),Td.buffer=null),Td.x!==$e||Td.y!==Xe||Td.z!==Ue||Td.w!==Oe)ba.vertexAttrib4f(Ve,$e,Xe,Ue,Oe),Td.x=$e,Td.y=Xe,Td.z=Ue,Td.w=Oe;We=r.pixelRatio;l&&hf===We||(hf=We,ba.uniform1f(Da.location,We));nf=Q.call(this,r,h,l);ef=nf[0];kf=nf[1];l&&jf===ef&&lf===kf||(jf=ef,lf=kf,
ba.uniform2f(la.location,ef,kf));rf=h.scale;of=rf[0];Bf=rf[1];l&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ba.uniform2f(za.location,of,Bf));Pe=h.scaleFract;Ee=Pe[0];qf=Pe[1];l&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ba.uniform2f(ha.location,Ee,qf));Gf=h.translate;Af=Gf[0];Ff=Gf[1];l&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ba.uniform2f(ja.location,Af,Ff));xf=h.translateFract;vf=xf[0];zf=xf[1];l&&yf===vf&&If===zf||(yf=vf,If=zf,ba.uniform2f(pa.location,vf,zf));Kf=h.opacity;l&&Lf===Kf||(Lf=Kf,ba.uniform1f(T.location,Kf));Mf=h.elements;
tf=null;(tf=(Rf=I(Mf))?va.createStream(Mf):va.getElements(Mf))&&ba.bindBuffer(34963,tf.buffer.buffer);Hf=h.offset;if(uf=h.count)0<ab?tf?f.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),ab):f.drawArraysInstancedANGLE(0,Hf,uf,ab):0>ab&&(tf?ba.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ba.drawArrays(0,Hf,uf)),r.viewportWidth=qc,r.viewportHeight=Nb,Ob&&v.destroyStream(pb),rb&&v.destroyStream(Pa),Sa&&v.destroyStream(mb),Qb&&v.destroyStream(Dd),Ac&&v.destroyStream(ad),Ze&&v.destroyStream(Be),
Ed&&v.destroyStream(oe),Rd&&v.destroyStream(me),ge&&v.destroyStream(Le),Rf&&va.destroyStream(tf)}P.unbind();N.dirty=!0;ya.setVAO(null);d&&(R.cpuTime+=performance.now()-g)},draw:function(a){var c,d,f,l,q,e,p,k,K,A,z,t,Ga,y,G,S,B,na,C,Q,P,w,F,Ca,V,W,Z,Y,ca,ga,sa,da,ma,wa,U,hd,Ka,Hc,xb,cb,Mb,ab,nb,Va,Cd,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Dd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,
qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,Ze,Be,jd,mf,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re;c=Gb.next;c!==Gb.cur&&(c?ba.bindFramebuffer(36160,c.framebuffer):ba.bindFramebuffer(36160,null),Gb.cur=c);if(N.dirty){var Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,Ve,Td,ae,We,hf,nf,ef,jf,kf,lf;Se=ra.dither;Se!==N.dither&&(Se?ba.enable(3024):ba.disable(3024),N.dither=
Se);Ne=aa[0];xe=aa[1];if(Ne!==ua[0]||xe!==ua[1])ba.blendEquationSeparate(Ne,xe),ua[0]=Ne,ua[1]=xe;Fe=ra.depth_func;Fe!==N.depth_func&&(ba.depthFunc(Fe),N.depth_func=Fe);Ie=ia[0];Je=ia[1];if(Ie!==Zb[0]||Je!==Zb[1])ba.depthRange(Ie,Je),Zb[0]=Ie,Zb[1]=Je;Ke=ra.depth_mask;Ke!==N.depth_mask&&(ba.depthMask(Ke),N.depth_mask=Ke);Ge=gb[0];Md=gb[1];Zd=gb[2];de=gb[3];if(Ge!==fa[0]||Md!==fa[1]||Zd!==fa[2]||de!==fa[3])ba.colorMask(Ge,Md,Zd,de),fa[0]=Ge,fa[1]=Md,fa[2]=Zd,fa[3]=de;ge=ra.cull_enable;ge!==N.cull_enable&&
(ge?ba.enable(2884):ba.disable(2884),N.cull_enable=ge);Le=ra.cull_face;Le!==N.cull_face&&(ba.cullFace(Le),N.cull_face=Le);Hd=ra.frontFace;Hd!==N.frontFace&&(ba.frontFace(Hd),N.frontFace=Hd);Sd=ra.lineWidth;Sd!==N.lineWidth&&(ba.lineWidth(Sd),N.lineWidth=Sd);De=ra.polygonOffset_enable;De!==N.polygonOffset_enable&&(De?ba.enable(32823):ba.disable(32823),N.polygonOffset_enable=De);Me=Ha[0];bf=Ha[1];if(Me!==$b[0]||bf!==$b[1])ba.polygonOffset(Me,bf),$b[0]=Me,$b[1]=bf;af=ra.sample_alpha;af!==N.sample_alpha&&
(af?ba.enable(32926):ba.disable(32926),N.sample_alpha=af);Te=ra.sample_enable;Te!==N.sample_enable&&(Te?ba.enable(32928):ba.disable(32928),N.sample_enable=Te);Oe=Rb[0];$e=Rb[1];if(Oe!==Ba[0]||$e!==Ba[1])ba.sampleCoverage(Oe,$e),Ba[0]=Oe,Ba[1]=$e;Xe=ra.stencil_mask;Xe!==N.stencil_mask&&(ba.stencilMask(Xe),N.stencil_mask=Xe);Ue=Vd[0];Ve=Vd[1];Td=Vd[2];if(Ue!==ye[0]||Ve!==ye[1]||Td!==ye[2])ba.stencilFunc(Ue,Ve,Td),ye[0]=Ue,ye[1]=Ve,ye[2]=Td;ae=ne[0];We=ne[1];hf=ne[2];nf=ne[3];if(ae!==Ad[0]||We!==Ad[1]||
hf!==Ad[2]||nf!==Ad[3])ba.stencilOpSeparate(ae,We,hf,nf),Ad[0]=ae,Ad[1]=We,Ad[2]=hf,Ad[3]=nf;ef=se[0];jf=se[1];kf=se[2];lf=se[3];if(ef!==Ud[0]||jf!==Ud[1]||kf!==Ud[2]||lf!==Ud[3])ba.stencilOpSeparate(ef,jf,kf,lf),Ud[0]=ef,Ud[1]=jf,Ud[2]=kf,Ud[3]=lf}d=a.viewport;f=d.x|0;l=d.y|0;q="width"in d?d.width|0:r.framebufferWidth-f;e="height"in d?d.height|0:r.framebufferHeight-l;p=r.viewportWidth;r.viewportWidth=q;k=r.viewportHeight;r.viewportHeight=e;ba.viewport(f,l,q,e);ce[0]=f;ce[1]=l;ce[2]=q;ce[3]=e;ba.blendColor(0,
0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ba.enable(3042);N.blend_enable=!0;ba.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;ba.disable(2929);N.depth_enable=!1;K=a.viewport;A=K.x|0;z=K.y|0;t="width"in K?K.width|0:r.framebufferWidth-A;Ga="height"in K?K.height|0:r.framebufferHeight-z;ba.scissor(A,z,t,Ga);yd[0]=A;yd[1]=z;yd[2]=t;yd[3]=Ga;ba.enable(3089);N.scissor_enable=!0;ba.disable(2960);N.stencil_enable=!1;if(y=N.profile)G=performance.now(),R.count++;ba.useProgram(D.program);
S=dd.angle_instanced_arrays;ya.setVAO(null);B=M.call(this,r,a,0);na=!1;C=null;Q=0;P=!1;F=w=0;Ca=1;V=0;W=5126;ga=ca=Y=Z=0;I(B)?(na=!0,C=v.createStream(34962,B),W=C.dtype):(C=v.getBuffer(B))?W=C.dtype:"constant"in B?(Ca=2,"number"===typeof B.constant?(Y=B.constant,ca=ga=Z=0):(Y=0<B.constant.length?B.constant[0]:0,ca=1<B.constant.length?B.constant[1]:0,ga=2<B.constant.length?B.constant[2]:0,Z=3<B.constant.length?B.constant[3]:0)):(C=I(B.buffer)?v.createStream(34962,B.buffer):v.getBuffer(B.buffer),W=
"type"in B?he[B.type]:C.dtype,P=!!B.normalized,F=B.size|0,w=B.offset|0,V=B.stride|0,Q=B.divisor|0);sa=Aa.location;da=Ta[sa];if(1===Ca){da.buffer||ba.enableVertexAttribArray(sa);ma=F||1;if(da.type!==W||da.size!==ma||da.buffer!==C||da.normalized!==P||da.offset!==w||da.stride!==V)ba.bindBuffer(34962,C.buffer),ba.vertexAttribPointer(sa,ma,W,P,V,w),da.type=W,da.size=ma,da.buffer=C,da.normalized=P,da.offset=w,da.stride=V;da.divisor!==Q&&(S.vertexAttribDivisorANGLE(sa,Q),da.divisor=Q)}else if(da.buffer&&
(ba.disableVertexAttribArray(sa),da.buffer=null),da.x!==Y||da.y!==ca||da.z!==ga||da.w!==Z)ba.vertexAttrib4f(sa,Y,ca,ga,Z),da.x=Y,da.y=ca,da.z=ga,da.w=Z;wa=m.call(this,r,a,0);U=!1;hd=null;Ka=0;Hc=!1;cb=xb=0;Mb=1;ab=0;nb=5126;Ib=Hb=Cd=Va=0;I(wa)?(U=!0,hd=v.createStream(34962,wa),nb=hd.dtype):(hd=v.getBuffer(wa))?nb=hd.dtype:"constant"in wa?(Mb=2,"number"===typeof wa.constant?(Cd=wa.constant,Hb=Ib=Va=0):(Cd=0<wa.constant.length?wa.constant[0]:0,Hb=1<wa.constant.length?wa.constant[1]:0,Ib=2<wa.constant.length?
wa.constant[2]:0,Va=3<wa.constant.length?wa.constant[3]:0)):(hd=I(wa.buffer)?v.createStream(34962,wa.buffer):v.getBuffer(wa.buffer),nb="type"in wa?he[wa.type]:hd.dtype,Hc=!!wa.normalized,cb=wa.size|0,xb=wa.offset|0,ab=wa.stride|0,Ka=wa.divisor|0);qc=L.location;Nb=Ta[qc];if(1===Mb){Nb.buffer||ba.enableVertexAttribArray(qc);jb=cb||1;if(Nb.type!==nb||Nb.size!==jb||Nb.buffer!==hd||Nb.normalized!==Hc||Nb.offset!==xb||Nb.stride!==ab)ba.bindBuffer(34962,hd.buffer),ba.vertexAttribPointer(qc,jb,nb,Hc,ab,xb),
Nb.type=nb,Nb.size=jb,Nb.buffer=hd,Nb.normalized=Hc,Nb.offset=xb,Nb.stride=ab;Nb.divisor!==Ka&&(S.vertexAttribDivisorANGLE(qc,Ka),Nb.divisor=Ka)}else if(Nb.buffer&&(ba.disableVertexAttribArray(qc),Nb.buffer=null),Nb.x!==Cd||Nb.y!==Hb||Nb.z!==Ib||Nb.w!==Va)ba.vertexAttrib4f(qc,Cd,Hb,Ib,Va),Nb.x=Cd,Nb.y=Hb,Nb.z=Ib,Nb.w=Va;Fb=g.call(this,r,a,0);Cb=!1;vb=null;hb=0;Xb=!1;pb=Ob=0;Ua=1;Tb=0;yb=5126;Ja=ob=ib=bc=0;I(Fb)?(Cb=!0,vb=v.createStream(34962,Fb),yb=vb.dtype):(vb=v.getBuffer(Fb))?yb=vb.dtype:"constant"in
Fb?(Ua=2,"number"===typeof Fb.constant?(ib=Fb.constant,ob=Ja=bc=0):(ib=0<Fb.constant.length?Fb.constant[0]:0,ob=1<Fb.constant.length?Fb.constant[1]:0,Ja=2<Fb.constant.length?Fb.constant[2]:0,bc=3<Fb.constant.length?Fb.constant[3]:0)):(vb=I(Fb.buffer)?v.createStream(34962,Fb.buffer):v.getBuffer(Fb.buffer),yb="type"in Fb?he[Fb.type]:vb.dtype,Xb=!!Fb.normalized,pb=Fb.size|0,Ob=Fb.offset|0,Tb=Fb.stride|0,hb=Fb.divisor|0);qb=Ia.location;La=Ta[qb];if(1===Ua){La.buffer||ba.enableVertexAttribArray(qb);eb=
pb||1;if(La.type!==yb||La.size!==eb||La.buffer!==vb||La.normalized!==Xb||La.offset!==Ob||La.stride!==Tb)ba.bindBuffer(34962,vb.buffer),ba.vertexAttribPointer(qb,eb,yb,Xb,Tb,Ob),La.type=yb,La.size=eb,La.buffer=vb,La.normalized=Xb,La.offset=Ob,La.stride=Tb;La.divisor!==hb&&(S.vertexAttribDivisorANGLE(qb,hb),La.divisor=hb)}else if(La.buffer&&(ba.disableVertexAttribArray(qb),La.buffer=null),La.x!==ib||La.y!==ob||La.z!==Ja||La.w!==bc)ba.vertexAttrib4f(qb,ib,ob,Ja,bc),La.x=ib,La.y=ob,La.z=Ja,La.w=bc;fb=
h.call(this,r,a,0);Ma=!1;kb=null;Wa=0;sb=!1;Pa=rb=0;Bc=1;Ra=0;Jb=5126;Ya=Dd=Na=Db=0;I(fb)?(Ma=!0,kb=v.createStream(34962,fb),Jb=kb.dtype):(kb=v.getBuffer(fb))?Jb=kb.dtype:"constant"in fb?(Bc=2,"number"===typeof fb.constant?(Na=fb.constant,Dd=Ya=Db=0):(Na=0<fb.constant.length?fb.constant[0]:0,Dd=1<fb.constant.length?fb.constant[1]:0,Ya=2<fb.constant.length?fb.constant[2]:0,Db=3<fb.constant.length?fb.constant[3]:0)):(kb=I(fb.buffer)?v.createStream(34962,fb.buffer):v.getBuffer(fb.buffer),Jb="type"in
fb?he[fb.type]:kb.dtype,sb=!!fb.normalized,Pa=fb.size|0,rb=fb.offset|0,Ra=fb.stride|0,Wa=fb.divisor|0);Kb=ac.location;Lb=Ta[Kb];if(1===Bc){Lb.buffer||ba.enableVertexAttribArray(Kb);lb=Pa||1;if(Lb.type!==Jb||Lb.size!==lb||Lb.buffer!==kb||Lb.normalized!==sb||Lb.offset!==rb||Lb.stride!==Ra)ba.bindBuffer(34962,kb.buffer),ba.vertexAttribPointer(Kb,lb,Jb,sb,Ra,rb),Lb.type=Jb,Lb.size=lb,Lb.buffer=kb,Lb.normalized=sb,Lb.offset=rb,Lb.stride=Ra;Lb.divisor!==Wa&&(S.vertexAttribDivisorANGLE(Kb,Wa),Lb.divisor=
Wa)}else if(Lb.buffer&&(ba.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Na||Lb.y!==Dd||Lb.z!==Ya||Lb.w!==Db)ba.vertexAttrib4f(Kb,Na,Dd,Ya,Db),Lb.x=Na,Lb.y=Dd,Lb.z=Ya,Lb.w=Db;Oa=b.call(this,r,a,0);Yb=!1;Qa=null;tb=0;ub=!1;mb=Sa=0;gc=1;zc=0;uc=5126;Xa=nd=jc=bb=0;I(Oa)?(Yb=!0,Qa=v.createStream(34962,Oa),uc=Qa.dtype):(Qa=v.getBuffer(Oa))?uc=Qa.dtype:"constant"in Oa?(gc=2,"number"===typeof Oa.constant?(jc=Oa.constant,nd=Xa=bb=0):(jc=0<Oa.constant.length?Oa.constant[0]:0,nd=1<Oa.constant.length?
Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=I(Oa.buffer)?v.createStream(34962,Oa.buffer):v.getBuffer(Oa.buffer),uc="type"in Oa?he[Oa.type]:Qa.dtype,ub=!!Oa.normalized,mb=Oa.size|0,Sa=Oa.offset|0,zc=Oa.stride|0,tb=Oa.divisor|0);Lc=Ea.location;zb=Ta[Lc];if(1===gc){zb.buffer||ba.enableVertexAttribArray(Lc);Za=mb||1;if(zb.type!==uc||zb.size!==Za||zb.buffer!==Qa||zb.normalized!==ub||zb.offset!==Sa||zb.stride!==zc)ba.bindBuffer(34962,Qa.buffer),
ba.vertexAttribPointer(Lc,Za,uc,ub,zc,Sa),zb.type=uc,zb.size=Za,zb.buffer=Qa,zb.normalized=ub,zb.offset=Sa,zb.stride=zc;zb.divisor!==tb&&(S.vertexAttribDivisorANGLE(Lc,tb),zb.divisor=tb)}else if(zb.buffer&&(ba.disableVertexAttribArray(Lc),zb.buffer=null),zb.x!==jc||zb.y!==nd||zb.z!==Xa||zb.w!==bb)ba.vertexAttrib4f(Lc,jc,nd,Xa,bb),zb.x=jc,zb.y=nd,zb.z=Xa,zb.w=bb;Ub=E.call(this,r,a,0);sc=!1;Vb=null;Pb=0;Jc=!1;Xd=Qb=0;Dc=1;ud=0;Mc=5126;vc=nc=qd=fd=0;I(Ub)?(sc=!0,Vb=v.createStream(34962,Ub),Mc=Vb.dtype):
(Vb=v.getBuffer(Ub))?Mc=Vb.dtype:"constant"in Ub?(Dc=2,"number"===typeof Ub.constant?(qd=Ub.constant,nc=vc=fd=0):(qd=0<Ub.constant.length?Ub.constant[0]:0,nc=1<Ub.constant.length?Ub.constant[1]:0,vc=2<Ub.constant.length?Ub.constant[2]:0,fd=3<Ub.constant.length?Ub.constant[3]:0)):(Vb=I(Ub.buffer)?v.createStream(34962,Ub.buffer):v.getBuffer(Ub.buffer),Mc="type"in Ub?he[Ub.type]:Vb.dtype,Jc=!!Ub.normalized,Xd=Ub.size|0,Qb=Ub.offset|0,ud=Ub.stride|0,Pb=Ub.divisor|0);hc=oa.location;db=Ta[hc];if(1===Dc){db.buffer||
ba.enableVertexAttribArray(hc);rc=Xd||1;if(db.type!==Mc||db.size!==rc||db.buffer!==Vb||db.normalized!==Jc||db.offset!==Qb||db.stride!==ud)ba.bindBuffer(34962,Vb.buffer),ba.vertexAttribPointer(hc,rc,Mc,Jc,ud,Qb),db.type=Mc,db.size=rc,db.buffer=Vb,db.normalized=Jc,db.offset=Qb,db.stride=ud;db.divisor!==Pb&&(S.vertexAttribDivisorANGLE(hc,Pb),db.divisor=Pb)}else if(db.buffer&&(ba.disableVertexAttribArray(hc),db.buffer=null),db.x!==qd||db.y!==nc||db.z!==vc||db.w!==fd)ba.vertexAttrib4f(hc,qd,nc,vc,fd),
db.x=qd,db.y=nc,db.z=vc,db.w=fd;Sb=J.call(this,r,a,0);Wb=!1;dc=null;ic=0;xc=!1;ad=Ac=0;Pc=1;Qc=0;Rc=5126;Yc=bd=wd=Xc=0;I(Sb)?(Wb=!0,dc=v.createStream(34962,Sb),Rc=dc.dtype):(dc=v.getBuffer(Sb))?Rc=dc.dtype:"constant"in Sb?(Pc=2,"number"===typeof Sb.constant?(wd=Sb.constant,bd=Yc=Xc=0):(wd=0<Sb.constant.length?Sb.constant[0]:0,bd=1<Sb.constant.length?Sb.constant[1]:0,Yc=2<Sb.constant.length?Sb.constant[2]:0,Xc=3<Sb.constant.length?Sb.constant[3]:0)):(dc=I(Sb.buffer)?v.createStream(34962,Sb.buffer):
v.getBuffer(Sb.buffer),Rc="type"in Sb?he[Sb.type]:dc.dtype,xc=!!Sb.normalized,ad=Sb.size|0,Ac=Sb.offset|0,Qc=Sb.stride|0,ic=Sb.divisor|0);kc=n.location;cc=Ta[kc];if(1===Pc){cc.buffer||ba.enableVertexAttribArray(kc);Zc=ad||4;if(cc.type!==Rc||cc.size!==Zc||cc.buffer!==dc||cc.normalized!==xc||cc.offset!==Ac||cc.stride!==Qc)ba.bindBuffer(34962,dc.buffer),ba.vertexAttribPointer(kc,Zc,Rc,xc,Qc,Ac),cc.type=Rc,cc.size=Zc,cc.buffer=dc,cc.normalized=xc,cc.offset=Ac,cc.stride=Qc;cc.divisor!==ic&&(S.vertexAttribDivisorANGLE(kc,
ic),cc.divisor=ic)}else if(cc.buffer&&(ba.disableVertexAttribArray(kc),cc.buffer=null),cc.x!==wd||cc.y!==bd||cc.z!==Yc||cc.w!==Xc)ba.vertexAttrib4f(kc,wd,bd,Yc,Xc),cc.x=wd,cc.y=bd,cc.z=Yc,cc.w=Xc;Uc=O.call(this,r,a,0);cd=!1;yc=null;id=0;rd=!1;Be=Ze=0;jd=1;mf=0;Nd=5126;Id=Od=ee=Yd=0;I(Uc)?(cd=!0,yc=v.createStream(34962,Uc),Nd=yc.dtype):(yc=v.getBuffer(Uc))?Nd=yc.dtype:"constant"in Uc?(jd=2,"number"===typeof Uc.constant?(ee=Uc.constant,Od=Id=Yd=0):(ee=0<Uc.constant.length?Uc.constant[0]:0,Od=1<Uc.constant.length?
Uc.constant[1]:0,Id=2<Uc.constant.length?Uc.constant[2]:0,Yd=3<Uc.constant.length?Uc.constant[3]:0)):(yc=I(Uc.buffer)?v.createStream(34962,Uc.buffer):v.getBuffer(Uc.buffer),Nd="type"in Uc?he[Uc.type]:yc.dtype,rd=!!Uc.normalized,Be=Uc.size|0,Ze=Uc.offset|0,mf=Uc.stride|0,id=Uc.divisor|0);Gd=xa.location;od=Ta[Gd];if(1===jd){od.buffer||ba.enableVertexAttribArray(Gd);Sc=Be||4;if(od.type!==Nd||od.size!==Sc||od.buffer!==yc||od.normalized!==rd||od.offset!==Ze||od.stride!==mf)ba.bindBuffer(34962,yc.buffer),
ba.vertexAttribPointer(Gd,Sc,Nd,rd,mf,Ze),od.type=Nd,od.size=Sc,od.buffer=yc,od.normalized=rd,od.offset=Ze,od.stride=mf;od.divisor!==id&&(S.vertexAttribDivisorANGLE(Gd,id),od.divisor=id)}else if(od.buffer&&(ba.disableVertexAttribArray(Gd),od.buffer=null),od.x!==ee||od.y!==Od||od.z!==Id||od.w!==Yd)ba.vertexAttrib4f(Gd,ee,Od,Id,Yd),od.x=ee,od.y=Od,od.z=Id,od.w=Yd;vd=X.call(this,r,a,0);td=!1;kd=null;xd=0;Bd=!1;oe=Ed=0;qe=1;ue=0;ke=5126;fe=ve=ie=je=0;I(vd)?(td=!0,kd=v.createStream(34962,vd),ke=kd.dtype):
(kd=v.getBuffer(vd))?ke=kd.dtype:"constant"in vd?(qe=2,"number"===typeof vd.constant?(ie=vd.constant,ve=fe=je=0):(ie=0<vd.constant.length?vd.constant[0]:0,ve=1<vd.constant.length?vd.constant[1]:0,fe=2<vd.constant.length?vd.constant[2]:0,je=3<vd.constant.length?vd.constant[3]:0)):(kd=I(vd.buffer)?v.createStream(34962,vd.buffer):v.getBuffer(vd.buffer),ke="type"in vd?he[vd.type]:kd.dtype,Bd=!!vd.normalized,oe=vd.size|0,Ed=vd.offset|0,ue=vd.stride|0,xd=vd.divisor|0);le=ea.location;Nc=Ta[le];if(1===qe){Nc.buffer||
ba.enableVertexAttribArray(le);gd=oe||1;if(Nc.type!==ke||Nc.size!==gd||Nc.buffer!==kd||Nc.normalized!==Bd||Nc.offset!==Ed||Nc.stride!==ue)ba.bindBuffer(34962,kd.buffer),ba.vertexAttribPointer(le,gd,ke,Bd,ue,Ed),Nc.type=ke,Nc.size=gd,Nc.buffer=kd,Nc.normalized=Bd,Nc.offset=Ed,Nc.stride=ue;Nc.divisor!==xd&&(S.vertexAttribDivisorANGLE(le,xd),Nc.divisor=xd)}else if(Nc.buffer&&(ba.disableVertexAttribArray(le),Nc.buffer=null),Nc.x!==ie||Nc.y!==ve||Nc.z!==fe||Nc.w!==je)ba.vertexAttrib4f(le,ie,ve,fe,je),
Nc.x=ie,Nc.y=ve,Nc.z=fe,Nc.w=je;ba.uniform1i(H.location,!1);ba.uniform1f(Da.location,r.pixelRatio);we=x.call(this,r,a,0);ba.uniform2f(la.location,we[0],we[1]);pe=a.scale;ba.uniform2f(za.location,pe[0],pe[1]);Kd=a.scaleFract;ba.uniform2f(ha.location,Kd[0],Kd[1]);Pd=a.translate;ba.uniform2f(ja.location,Pd[0],Pd[1]);Qd=a.translateFract;ba.uniform2f(pa.location,Qd[0],Qd[1]);ba.uniform1f(T.location,a.opacity);ba.uniform1i(qa.location,u.bind());Rd=a.elements;me=null;(me=(He=I(Rd))?va.createStream(Rd):va.getElements(Rd))&&
ba.bindBuffer(34963,me.buffer.buffer);Ce=a.offset;if(re=a.count)Re=ta.instances,0<Re?me?S.drawElementsInstancedANGLE(0,re,me.type,Ce<<(me.type-5121>>1),Re):S.drawArraysInstancedANGLE(0,Ce,re,Re):0>Re&&(me?ba.drawElements(0,re,me.type,Ce<<(me.type-5121>>1)):ba.drawArrays(0,Ce,re)),N.dirty=!0,ya.setVAO(null),r.viewportWidth=p,r.viewportHeight=k,y&&(R.cpuTime+=performance.now()-G),na&&v.destroyStream(C),U&&v.destroyStream(hd),Cb&&v.destroyStream(vb),Ma&&v.destroyStream(kb),Yb&&v.destroyStream(Qa),sc&&
v.destroyStream(Vb),Wb&&v.destroyStream(dc),cd&&v.destroyStream(yc),td&&v.destroyStream(kd),u.unbind(),He&&va.destroyStream(me)},scope:function(b,g,n){var h,q,e,L,K,m,A,H,y,S,T,D,ha,M,ba,u,ac,ka,Ia,Q,x,P,J,aa,ea,ya,E,za,xa,qa,O,X,fa,ja,Z,ga,Ta,pa,Ea,la,Aa,wa,ma,oa,ua,Gb,Da,U,Ha,Fa,hd,dd,gb,Rb,ia,Ua,Zb,$b,Vd,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,yd,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,Ba,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Ud,Dc,ye,Mc,ce,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,
Pc,Qc,Rc,Xc,ne,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd,se,Ad,jd,Jf,Nd,Yd,ee,Od,Id,Gd,od,Sc,vd,td,kd,xd,Bd,Ed,oe,qe,ue,ke,je,ie,ve,fe,le,Nc,gd,we,pe,Kd,Pd,Qd,Rd,me,He,Ce,re,Re,Se,Ne,xe,Fe,Ie,Je,Ke,Ge,Md,Zd,de,ge,Le,Hd,Sd,De,Me,bf,af,Te,Oe,$e,Xe,Ue,Ve,Td,ae,We,hf,nf,ef,jf,kf,lf,rf,of,sf,Bf,Cf,Pe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Kf,Lf,Mf,tf,Rf,Hf,uf,dg,Sf,Tf,qg,ff,cf,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,
Ig,Jg,Kg,Lg,Mg,Ng,Og;h=b.viewport;q=h.x|0;e=h.y|0;L="width"in h?h.width|0:r.framebufferWidth-q;K="height"in h?h.height|0:r.framebufferHeight-e;m=r.viewportWidth;r.viewportWidth=L;A=r.viewportHeight;r.viewportHeight=K;H=Dd[0];Dd[0]=q;y=Dd[1];Dd[1]=e;S=Dd[2];Dd[2]=L;T=Dd[3];Dd[3]=K;D=Ca[0];Ca[0]=0;ha=Ca[1];Ca[1]=0;M=Ca[2];Ca[2]=0;ba=Ca[3];Ca[3]=1;u=ra.blend_enable;ra.blend_enable=!0;ac=Ka[0];Ka[0]=770;ka=Ka[1];Ka[1]=771;Ia=Ka[2];Ka[2]=773;Q=Ka[3];Ka[3]=1;x=ra.depth_enable;ra.depth_enable=!1;P=b.viewport;
J=P.x|0;aa=P.y|0;ea="width"in P?P.width|0:r.framebufferWidth-J;ya="height"in P?P.height|0:r.framebufferHeight-aa;E=Cd[0];Cd[0]=J;za=Cd[1];Cd[1]=aa;xa=Cd[2];Cd[2]=ea;qa=Cd[3];Cd[3]=ya;O=ra.scissor_enable;ra.scissor_enable=!0;X=ra.stencil_enable;ra.stencil_enable=!1;if(fa=N.profile)ja=performance.now(),R.count++;Z=b.elements;ga=null;ga=(Ta=I(Z))?va.createStream(Z):va.getElements(Z);pa=ta.elements;ta.elements=ga;Ea=b.offset;la=ta.offset;ta.offset=Ea;Aa=b.count;wa=ta.count;ta.count=Aa;ma=ta.primitive;
ta.primitive=0;oa=na[45];na[45]=!1;ua=b.markerTexture;Gb=na[48];na[48]=ua;Da=b.opacity;U=na[10];na[10]=Da;Ha=F.call(this,r,b,n);Fa=na[46];na[46]=Ha;hd=na[47];na[47]=Y;dd=r.pixelRatio;gb=na[34];na[34]=dd;Rb=b.scale;ia=na[6];na[6]=Rb;Ua=b.scaleFract;Zb=na[7];na[7]=Ua;$b=b.translate;Vd=na[8];na[8]=$b;ib=b.translateFract;ob=na[9];na[9]=ib;Ja=t.call(this,r,b,n);qb=!1;La=null;eb=0;fb=!1;kb=Ma=0;Wa=1;sb=0;rb=5126;Jb=Ra=yd=Pa=0;I(Ja)?(qb=!0,La=v.createStream(34962,Ja),rb=La.dtype):(La=v.getBuffer(Ja))?rb=
La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(yd=Ja.constant,Ra=Jb=Pa=0):(yd=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=I(Ja.buffer)?v.createStream(34962,Ja.buffer):v.getBuffer(Ja.buffer),rb="type"in Ja?he[Ja.type]:La.dtype,fb=!!Ja.normalized,kb=Ja.size|0,Ma=Ja.offset|0,sb=Ja.stride|0,eb=Ja.divisor|0);Db=V.buffer;V.buffer=La;Na=V.divisor;V.divisor=eb;zd=V.normalized;
V.normalized=fb;Ya=V.offset;V.offset=Ma;Kb=V.size;V.size=kb;Lb=V.state;V.state=Wa;lb=V.stride;V.stride=sb;Oa=V.type;V.type=rb;Yb=V.w;V.w=Pa;Qa=V.x;V.x=yd;tb=V.y;V.y=Ra;ub=V.z;V.z=Jb;Sa=k.call(this,r,b,n);mb=!1;gc=null;zc=0;uc=!1;jc=bb=0;Ba=1;Xa=0;Lc=5126;sc=Ub=Za=zb=0;I(Sa)?(mb=!0,gc=v.createStream(34962,Sa),Lc=gc.dtype):(gc=v.getBuffer(Sa))?Lc=gc.dtype:"constant"in Sa?(Ba=2,"number"===typeof Sa.constant?(Za=Sa.constant,Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?
Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?Sa.constant[3]:0)):(gc=I(Sa.buffer)?v.createStream(34962,Sa.buffer):v.getBuffer(Sa.buffer),Lc="type"in Sa?he[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,zc=Sa.divisor|0);Vb=w.buffer;w.buffer=gc;Pb=w.divisor;w.divisor=zc;Jc=w.normalized;w.normalized=uc;Qb=w.offset;w.offset=bb;Ud=w.size;w.size=jc;Dc=w.state;w.state=Ba;ye=w.stride;w.stride=Xa;Mc=w.type;w.type=Lc;ce=w.w;w.w=zb;qd=w.x;
w.x=Za;nc=w.y;w.y=Ub;vc=w.z;w.z=sc;hc=sa.call(this,r,b,n);db=!1;rc=null;Sb=0;Wb=!1;ic=dc=0;xc=1;Ac=0;ad=5126;Xc=Rc=Qc=Pc=0;I(hc)?(db=!0,rc=v.createStream(34962,hc),ad=rc.dtype):(rc=v.getBuffer(hc))?ad=rc.dtype:"constant"in hc?(xc=2,"number"===typeof hc.constant?(Qc=hc.constant,Rc=Xc=Pc=0):(Qc=0<hc.constant.length?hc.constant[0]:0,Rc=1<hc.constant.length?hc.constant[1]:0,Xc=2<hc.constant.length?hc.constant[2]:0,Pc=3<hc.constant.length?hc.constant[3]:0)):(rc=I(hc.buffer)?v.createStream(34962,hc.buffer):
v.getBuffer(hc.buffer),ad="type"in hc?he[hc.type]:rc.dtype,Wb=!!hc.normalized,ic=hc.size|0,dc=hc.offset|0,Ac=hc.stride|0,Sb=hc.divisor|0);ne=d.buffer;d.buffer=rc;bd=d.divisor;d.divisor=Sb;Yc=d.normalized;d.normalized=Wb;kc=d.offset;d.offset=dc;cc=d.size;d.size=ic;Zc=d.state;d.state=xc;Uc=d.stride;d.stride=Ac;cd=d.type;d.type=ad;yc=d.w;d.w=Pc;id=d.x;d.x=Qc;rd=d.y;d.y=Rc;se=d.z;d.z=Xc;Ad=z.call(this,r,b,n);jd=!1;Jf=null;Nd=0;Yd=!1;Od=ee=0;Id=1;Gd=0;od=5126;kd=td=vd=Sc=0;I(Ad)?(jd=!0,Jf=v.createStream(34962,
Ad),od=Jf.dtype):(Jf=v.getBuffer(Ad))?od=Jf.dtype:"constant"in Ad?(Id=2,"number"===typeof Ad.constant?(vd=Ad.constant,td=kd=Sc=0):(vd=0<Ad.constant.length?Ad.constant[0]:0,td=1<Ad.constant.length?Ad.constant[1]:0,kd=2<Ad.constant.length?Ad.constant[2]:0,Sc=3<Ad.constant.length?Ad.constant[3]:0)):(Jf=I(Ad.buffer)?v.createStream(34962,Ad.buffer):v.getBuffer(Ad.buffer),od="type"in Ad?he[Ad.type]:Jf.dtype,Yd=!!Ad.normalized,Od=Ad.size|0,ee=Ad.offset|0,Gd=Ad.stride|0,Nd=Ad.divisor|0);xd=W.buffer;W.buffer=
Jf;Bd=W.divisor;W.divisor=Nd;Ed=W.normalized;W.normalized=Yd;oe=W.offset;W.offset=ee;qe=W.size;W.size=Od;ue=W.state;W.state=Id;ke=W.stride;W.stride=Gd;je=W.type;W.type=od;ie=W.w;W.w=Sc;ve=W.x;W.x=vd;fe=W.y;W.y=td;le=W.z;W.z=kd;Nc=f.call(this,r,b,n);gd=!1;we=null;pe=0;Kd=!1;Qd=Pd=0;Rd=1;me=0;He=5126;Se=Re=re=Ce=0;I(Nc)?(gd=!0,we=v.createStream(34962,Nc),He=we.dtype):(we=v.getBuffer(Nc))?He=we.dtype:"constant"in Nc?(Rd=2,"number"===typeof Nc.constant?(re=Nc.constant,Re=Se=Ce=0):(re=0<Nc.constant.length?
Nc.constant[0]:0,Re=1<Nc.constant.length?Nc.constant[1]:0,Se=2<Nc.constant.length?Nc.constant[2]:0,Ce=3<Nc.constant.length?Nc.constant[3]:0)):(we=I(Nc.buffer)?v.createStream(34962,Nc.buffer):v.getBuffer(Nc.buffer),He="type"in Nc?he[Nc.type]:we.dtype,Kd=!!Nc.normalized,Qd=Nc.size|0,Pd=Nc.offset|0,me=Nc.stride|0,pe=Nc.divisor|0);Ne=ca.buffer;ca.buffer=we;xe=ca.divisor;ca.divisor=pe;Fe=ca.normalized;ca.normalized=Kd;Ie=ca.offset;ca.offset=Pd;Je=ca.size;ca.size=Qd;Ke=ca.state;ca.state=Rd;Ge=ca.stride;
ca.stride=me;Md=ca.type;ca.type=He;Zd=ca.w;ca.w=Ce;de=ca.x;ca.x=re;ge=ca.y;ca.y=Re;Le=ca.z;ca.z=Se;Hd=G.call(this,r,b,n);Sd=!1;De=null;Me=0;bf=!1;Te=af=0;Oe=1;$e=0;Xe=5126;ae=Td=Ve=Ue=0;I(Hd)?(Sd=!0,De=v.createStream(34962,Hd),Xe=De.dtype):(De=v.getBuffer(Hd))?Xe=De.dtype:"constant"in Hd?(Oe=2,"number"===typeof Hd.constant?(Ve=Hd.constant,Td=ae=Ue=0):(Ve=0<Hd.constant.length?Hd.constant[0]:0,Td=1<Hd.constant.length?Hd.constant[1]:0,ae=2<Hd.constant.length?Hd.constant[2]:0,Ue=3<Hd.constant.length?
Hd.constant[3]:0)):(De=I(Hd.buffer)?v.createStream(34962,Hd.buffer):v.getBuffer(Hd.buffer),Xe="type"in Hd?he[Hd.type]:De.dtype,bf=!!Hd.normalized,Te=Hd.size|0,af=Hd.offset|0,$e=Hd.stride|0,Me=Hd.divisor|0);We=p.buffer;p.buffer=De;hf=p.divisor;p.divisor=Me;nf=p.normalized;p.normalized=bf;ef=p.offset;p.offset=af;jf=p.size;p.size=Te;kf=p.state;p.state=Oe;lf=p.stride;p.stride=$e;rf=p.type;p.type=Xe;of=p.w;p.w=Ue;sf=p.x;p.x=Ve;Bf=p.y;p.y=Td;Cf=p.z;p.z=ae;Pe=da.call(this,r,b,n);Ee=!1;pf=null;qf=0;Df=!1;
Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;I(Pe)?(Ee=!0,pf=v.createStream(34962,Pe),wf=pf.dtype):(pf=v.getBuffer(Pe))?wf=pf.dtype:"constant"in Pe?(Ef=2,"number"===typeof Pe.constant?(vf=Pe.constant,yf=zf=xf=0):(vf=0<Pe.constant.length?Pe.constant[0]:0,yf=1<Pe.constant.length?Pe.constant[1]:0,zf=2<Pe.constant.length?Pe.constant[2]:0,xf=3<Pe.constant.length?Pe.constant[3]:0)):(pf=I(Pe.buffer)?v.createStream(34962,Pe.buffer):v.getBuffer(Pe.buffer),wf="type"in Pe?he[Pe.type]:pf.dtype,Df=!!Pe.normalized,
Af=Pe.size|0,Gf=Pe.offset|0,Ff=Pe.stride|0,qf=Pe.divisor|0);If=C.buffer;C.buffer=pf;Kf=C.divisor;C.divisor=qf;Lf=C.normalized;C.normalized=Df;Mf=C.offset;C.offset=Gf;tf=C.size;C.size=Af;Rf=C.state;C.state=Ef;Hf=C.stride;C.stride=Ff;uf=C.type;C.type=wf;dg=C.w;C.w=xf;Sf=C.x;C.x=vf;Tf=C.y;C.y=yf;qg=C.z;C.z=zf;ff=B.call(this,r,b,n);cf=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;I(ff)?(cf=!0,Nf=v.createStream(34962,ff),Wf=Nf.dtype):(Nf=v.getBuffer(ff))?Wf=Nf.dtype:"constant"in ff?(hg=
2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Nf=I(ff.buffer)?v.createStream(34962,ff.buffer):v.getBuffer(ff.buffer),Wf="type"in ff?he[ff.type]:Nf.dtype,eg=!!ff.normalized,gg=ff.size|0,fg=ff.offset|0,ig=ff.stride|0,Of=ff.divisor|0);jg=c.buffer;c.buffer=Nf;rg=c.divisor;c.divisor=Of;sg=c.normalized;c.normalized=eg;tg=c.offset;
c.offset=fg;ug=c.size;c.size=gg;vg=c.state;c.state=hg;wg=c.stride;c.stride=ig;xg=c.type;c.type=Wf;yg=c.w;c.w=Uf;zg=c.x;c.x=Xf;Ag=c.y;c.y=Yf;Bg=c.z;c.z=Zf;gf=l.call(this,r,b,n);df=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;I(gf)?(df=!0,Pf=v.createStream(34962,gf),$f=Pf.dtype):(Pf=v.getBuffer(gf))?$f=Pf.dtype:"constant"in gf?(ng=2,"number"===typeof gf.constant?(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?
gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Pf=I(gf.buffer)?v.createStream(34962,gf.buffer):v.getBuffer(gf.buffer),$f="type"in gf?he[gf.type]:Pf.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Qf=gf.divisor|0);pg=a.buffer;a.buffer=Pf;Cg=a.divisor;a.divisor=Qf;Dg=a.normalized;a.normalized=kg;Eg=a.offset;a.offset=lg;Fg=a.size;a.size=mg;Gg=a.state;a.state=ng;Hg=a.stride;a.stride=og;Ig=a.type;a.type=$f;Jg=a.w;a.w=Vf;Kg=a.x;a.x=ag;Lg=a.y;a.y=bg;Mg=a.z;a.z=cg;Ng=Ga.vert;
Ga.vert=59;Og=Ga.frag;Ga.frag=58;N.dirty=!0;g(r,b,n);r.viewportWidth=m;r.viewportHeight=A;Dd[0]=H;Dd[1]=y;Dd[2]=S;Dd[3]=T;Ca[0]=D;Ca[1]=ha;Ca[2]=M;Ca[3]=ba;ra.blend_enable=u;Ka[0]=ac;Ka[1]=ka;Ka[2]=Ia;Ka[3]=Q;ra.depth_enable=x;Cd[0]=E;Cd[1]=za;Cd[2]=xa;Cd[3]=qa;ra.scissor_enable=O;ra.stencil_enable=X;fa&&(R.cpuTime+=performance.now()-ja);Ta&&va.destroyStream(ga);ta.elements=pa;ta.offset=la;ta.count=wa;ta.primitive=ma;na[45]=oa;na[48]=Gb;na[10]=U;na[46]=Fa;na[47]=hd;na[34]=gb;na[6]=ia;na[7]=Zb;na[8]=
Vd;na[9]=ob;qb&&v.destroyStream(La);V.buffer=Db;V.divisor=Na;V.normalized=zd;V.offset=Ya;V.size=Kb;V.state=Lb;V.stride=lb;V.type=Oa;V.w=Yb;V.x=Qa;V.y=tb;V.z=ub;mb&&v.destroyStream(gc);w.buffer=Vb;w.divisor=Pb;w.normalized=Jc;w.offset=Qb;w.size=Ud;w.state=Dc;w.stride=ye;w.type=Mc;w.w=ce;w.x=qd;w.y=nc;w.z=vc;db&&v.destroyStream(rc);d.buffer=ne;d.divisor=bd;d.normalized=Yc;d.offset=kc;d.size=cc;d.state=Zc;d.stride=Uc;d.type=cd;d.w=yc;d.x=id;d.y=rd;d.z=se;jd&&v.destroyStream(Jf);W.buffer=xd;W.divisor=
Bd;W.normalized=Ed;W.offset=oe;W.size=qe;W.state=ue;W.stride=ke;W.type=je;W.w=ie;W.x=ve;W.y=fe;W.z=le;gd&&v.destroyStream(we);ca.buffer=Ne;ca.divisor=xe;ca.normalized=Fe;ca.offset=Ie;ca.size=Je;ca.state=Ke;ca.stride=Ge;ca.type=Md;ca.w=Zd;ca.x=de;ca.y=ge;ca.z=Le;Sd&&v.destroyStream(De);p.buffer=We;p.divisor=hf;p.normalized=nf;p.offset=ef;p.size=jf;p.state=kf;p.stride=lf;p.type=rf;p.w=of;p.x=sf;p.y=Bf;p.z=Cf;Ee&&v.destroyStream(pf);C.buffer=If;C.divisor=Kf;C.normalized=Lf;C.offset=Mf;C.size=tf;C.state=
Rf;C.stride=Hf;C.type=uf;C.w=dg;C.x=Sf;C.y=Tf;C.z=qg;cf&&v.destroyStream(Nf);c.buffer=jg;c.divisor=rg;c.normalized=sg;c.offset=tg;c.size=ug;c.state=vg;c.stride=wg;c.type=xg;c.w=yg;c.x=zg;c.y=Ag;c.z=Bg;df&&v.destroyStream(Pf);a.buffer=pg;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Ga.vert=Ng;Ga.frag=Og;N.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(e,
R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z,ga){var S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,dd,Gb,ba,I,ra,Ga,na,ya,Ca,ka,aa;S=e.attributes;K=e.buffer;y=e.context;q=e.current;P=e.draw;Q=e.elements;xa=e.extensions;oa=e.framebuffer;n=e.gl;H=e.isBufferArgs;ea=e.next;T=e.shader;la=e.uniforms;qa=e.vao;Da=ea.blend_color;za=q.blend_color;ha=ea.blend_equation;Ea=q.blend_equation;ja=ea.blend_func;pa=q.blend_func;Aa=ea.colorMask;Ia=q.colorMask;
L=ea.depth_range;ac=q.depth_range;Ta=ea.polygonOffset_offset;v=q.polygonOffset_offset;r=ea.sample_coverage;N=q.sample_coverage;ta=ea.scissor_box;va=q.scissor_box;dd=ea.stencil_func;Gb=q.stencil_func;ba=ea.stencil_opBack;I=q.stencil_opBack;ra=ea.stencil_opFront;Ga=q.stencil_opFront;na=ea.viewport;ya=q.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:4,stride:8};aa={offset:0,stride:8};return{batch:function(b,g){var h,e,m,t,T,na,D,
M,u,x,J,F,E;h=oa.next;h!==oa.cur&&(h?n.bindFramebuffer(36160,h.framebuffer):n.bindFramebuffer(36160,null),oa.cur=h);if(q.dirty){var O,X,ja,Y,la,Da,ia,Ba,ze,Ye,Qe,Fd,Ae,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec;O=ea.dither;O!==q.dither&&(O?n.enable(3024):n.disable(3024),q.dither=O);X=ha[0];ja=ha[1];if(X!==Ea[0]||ja!==Ea[1])n.blendEquationSeparate(X,ja),Ea[0]=X,Ea[1]=ja;Y=ea.depth_func;Y!==q.depth_func&&(n.depthFunc(Y),q.depth_func=Y);la=L[0];Da=L[1];if(la!==ac[0]||
Da!==ac[1])n.depthRange(la,Da),ac[0]=la,ac[1]=Da;ia=ea.depth_mask;ia!==q.depth_mask&&(n.depthMask(ia),q.depth_mask=ia);Ba=Aa[0];ze=Aa[1];Ye=Aa[2];Qe=Aa[3];if(Ba!==Ia[0]||ze!==Ia[1]||Ye!==Ia[2]||Qe!==Ia[3])n.colorMask(Ba,ze,Ye,Qe),Ia[0]=Ba,Ia[1]=ze,Ia[2]=Ye,Ia[3]=Qe;Fd=ea.cull_enable;Fd!==q.cull_enable&&(Fd?n.enable(2884):n.disable(2884),q.cull_enable=Fd);Ae=ea.cull_face;Ae!==q.cull_face&&(n.cullFace(Ae),q.cull_face=Ae);te=ea.frontFace;te!==q.frontFace&&(n.frontFace(te),q.frontFace=te);$d=ea.lineWidth;
$d!==q.lineWidth&&(n.lineWidth($d),q.lineWidth=$d);Wd=ea.polygonOffset_enable;Wd!==q.polygonOffset_enable&&(Wd?n.enable(32823):n.disable(32823),q.polygonOffset_enable=Wd);Ld=Ta[0];md=Ta[1];if(Ld!==v[0]||md!==v[1])n.polygonOffset(Ld,md),v[0]=Ld,v[1]=md;$c=ea.sample_alpha;$c!==q.sample_alpha&&($c?n.enable(32926):n.disable(32926),q.sample_alpha=$c);sd=ea.sample_enable;sd!==q.sample_enable&&(sd?n.enable(32928):n.disable(32928),q.sample_enable=sd);Kc=r[0];pd=r[1];if(Kc!==N[0]||pd!==N[1])n.sampleCoverage(Kc,
pd),N[0]=Kc,N[1]=pd;Ec=ea.stencil_mask;Ec!==q.stencil_mask&&(n.stencilMask(Ec),q.stencil_mask=Ec);ed=dd[0];Oc=dd[1];ld=dd[2];if(ed!==Gb[0]||Oc!==Gb[1]||ld!==Gb[2])n.stencilFunc(ed,Oc,ld),Gb[0]=ed,Gb[1]=Oc,Gb[2]=ld;Ab=ra[0];Eb=ra[1];tc=ra[2];wb=ra[3];if(Ab!==Ga[0]||Eb!==Ga[1]||tc!==Ga[2]||wb!==Ga[3])n.stencilOpSeparate(Ab,Eb,tc,wb),Ga[0]=Ab,Ga[1]=Eb,Ga[2]=tc,Ga[3]=wb;wc=ba[0];Bb=ba[1];Ic=ba[2];lc=ba[3];if(wc!==I[0]||Bb!==I[1]||Ic!==I[2]||lc!==I[3])n.stencilOpSeparate(wc,Bb,Ic,lc),I[0]=wc,I[1]=Bb,I[2]=
Ic,I[3]=lc;Fc=ea.scissor_enable;Fc!==q.scissor_enable&&(Fc?n.enable(3089):n.disable(3089),q.scissor_enable=Fc);Wc=ta[0];Vc=ta[1];Cc=ta[2];ec=ta[3];if(Wc!==va[0]||Vc!==va[1]||Cc!==va[2]||ec!==va[3])n.scissor(Wc,Vc,Cc,ec),va[0]=Wc,va[1]=Vc,va[2]=Cc,va[3]=ec}e=this.viewport;m=e.x|0;t=e.y|0;T="width"in e?e.width|0:y.framebufferWidth-m;na="height"in e?e.height|0:y.framebufferHeight-t;D=y.viewportWidth;y.viewportWidth=T;M=y.viewportHeight;y.viewportHeight=na;n.viewport(m,t,T,na);ya[0]=m;ya[1]=t;ya[2]=T;
ya[3]=na;n.blendColor(0,0,0,1);za[0]=0;za[1]=0;za[2]=0;za[3]=1;n.enable(3042);q.blend_enable=!0;n.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;n.disable(2929);q.depth_enable=!1;n.disable(2960);q.stencil_enable=!1;if(u=q.profile)x=performance.now(),R.count+=g;n.useProgram(V.program);J=xa.angle_instanced_arrays;var Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,
Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub;qa.setVAO(null);aa.buffer=this.sizeBuffer;Gc=!1;oc=null;pc=0;mc=!1;$a=fc=0;Hc=1;xb=0;cb=5126;Va=nb=ab=Mb=0;H(aa)?(Gc=!0,oc=K.createStream(34962,aa),cb=oc.dtype):(oc=K.getBuffer(aa))?cb=oc.dtype:"constant"in aa?(Hc=2,"number"===typeof aa.constant?(ab=aa.constant,nb=Va=Mb=0):(ab=0<aa.constant.length?aa.constant[0]:0,nb=1<aa.constant.length?aa.constant[1]:0,Va=2<aa.constant.length?aa.constant[2]:0,Mb=3<aa.constant.length?aa.constant[3]:0)):(oc=H(aa.buffer)?
K.createStream(34962,aa.buffer):K.getBuffer(aa.buffer),cb="type"in aa?Ca[aa.type]:oc.dtype,mc=!!aa.normalized,$a=aa.size|0,fc=aa.offset|0,xb=aa.stride|0,pc=aa.divisor|0);Tc=ga.location;Hb=S[Tc];if(1===Hc){Hb.buffer||n.enableVertexAttribArray(Tc);Ib=$a||1;if(Hb.type!==cb||Hb.size!==Ib||Hb.buffer!==oc||Hb.normalized!==mc||Hb.offset!==fc||Hb.stride!==xb)n.bindBuffer(34962,oc.buffer),n.vertexAttribPointer(Tc,Ib,cb,mc,xb,fc),Hb.type=cb,Hb.size=Ib,Hb.buffer=oc,Hb.normalized=mc,Hb.offset=fc,Hb.stride=xb;
Hb.divisor!==pc&&(J.vertexAttribDivisorANGLE(Tc,pc),Hb.divisor=pc)}else if(Hb.buffer&&(n.disableVertexAttribArray(Tc),Hb.buffer=null),Hb.x!==ab||Hb.y!==nb||Hb.z!==Va||Hb.w!==Mb)n.vertexAttrib4f(Tc,ab,nb,Va,Mb),Hb.x=ab,Hb.y=nb,Hb.z=Va,Hb.w=Mb;ka.buffer=this.sizeBuffer;qc=!1;Nb=null;jb=0;Fb=!1;vb=Cb=0;hb=1;Xb=0;Ob=5126;yb=Tb=Ua=pb=0;H(ka)?(qc=!0,Nb=K.createStream(34962,ka),Ob=Nb.dtype):(Nb=K.getBuffer(ka))?Ob=Nb.dtype:"constant"in ka?(hb=2,"number"===typeof ka.constant?(Ua=ka.constant,Tb=yb=pb=0):(Ua=
0<ka.constant.length?ka.constant[0]:0,Tb=1<ka.constant.length?ka.constant[1]:0,yb=2<ka.constant.length?ka.constant[2]:0,pb=3<ka.constant.length?ka.constant[3]:0)):(Nb=H(ka.buffer)?K.createStream(34962,ka.buffer):K.getBuffer(ka.buffer),Ob="type"in ka?Ca[ka.type]:Nb.dtype,Fb=!!ka.normalized,vb=ka.size|0,Cb=ka.offset|0,Xb=ka.stride|0,jb=ka.divisor|0);bc=C.location;ib=S[bc];if(1===hb){ib.buffer||n.enableVertexAttribArray(bc);ob=vb||1;if(ib.type!==Ob||ib.size!==ob||ib.buffer!==Nb||ib.normalized!==Fb||
ib.offset!==Cb||ib.stride!==Xb)n.bindBuffer(34962,Nb.buffer),n.vertexAttribPointer(bc,ob,Ob,Fb,Xb,Cb),ib.type=Ob,ib.size=ob,ib.buffer=Nb,ib.normalized=Fb,ib.offset=Cb,ib.stride=Xb;ib.divisor!==jb&&(J.vertexAttribDivisorANGLE(bc,jb),ib.divisor=jb)}else if(ib.buffer&&(n.disableVertexAttribArray(bc),ib.buffer=null),ib.x!==Ua||ib.y!==Tb||ib.z!==yb||ib.w!==pb)n.vertexAttrib4f(bc,Ua,Tb,yb,pb),ib.x=Ua,ib.y=Tb,ib.z=yb,ib.w=pb;Ja=this.charBuffer;qb=!1;La=null;eb=0;fb=!1;kb=Ma=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=
Pa=0;H(Ja)?(qb=!0,La=K.createStream(34962,Ja),rb=La.dtype):(La=K.getBuffer(Ja))?rb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Bc=Ja.constant,Ra=Jb=Pa=0):(Bc=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Jb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=H(Ja.buffer)?K.createStream(34962,Ja.buffer):K.getBuffer(Ja.buffer),rb="type"in Ja?Ca[Ja.type]:La.dtype,fb=!!Ja.normalized,kb=Ja.size|0,Ma=Ja.offset|0,sb=Ja.stride|
0,eb=Ja.divisor|0);Db=da.location;Na=S[Db];if(1===Wa){Na.buffer||n.enableVertexAttribArray(Db);Jd=kb||1;if(Na.type!==rb||Na.size!==Jd||Na.buffer!==La||Na.normalized!==fb||Na.offset!==Ma||Na.stride!==sb)n.bindBuffer(34962,La.buffer),n.vertexAttribPointer(Db,Jd,rb,fb,sb,Ma),Na.type=rb,Na.size=Jd,Na.buffer=La,Na.normalized=fb,Na.offset=Ma,Na.stride=sb;Na.divisor!==eb&&(J.vertexAttribDivisorANGLE(Db,eb),Na.divisor=eb)}else if(Na.buffer&&(n.disableVertexAttribArray(Db),Na.buffer=null),Na.x!==Bc||Na.y!==
Ra||Na.z!==Jb||Na.w!==Pa)n.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ya=this.position;Kb=!1;Lb=null;lb=0;Oa=!1;Qa=Yb=0;tb=1;ub=0;Sa=5126;uc=zc=gc=mb=0;H(Ya)?(Kb=!0,Lb=K.createStream(34962,Ya),Sa=Lb.dtype):(Lb=K.getBuffer(Ya))?Sa=Lb.dtype:"constant"in Ya?(tb=2,"number"===typeof Ya.constant?(gc=Ya.constant,zc=uc=mb=0):(gc=0<Ya.constant.length?Ya.constant[0]:0,zc=1<Ya.constant.length?Ya.constant[1]:0,uc=2<Ya.constant.length?Ya.constant[2]:0,mb=3<Ya.constant.length?Ya.constant[3]:
0)):(Lb=H(Ya.buffer)?K.createStream(34962,Ya.buffer):K.getBuffer(Ya.buffer),Sa="type"in Ya?Ca[Ya.type]:Lb.dtype,Oa=!!Ya.normalized,Qa=Ya.size|0,Yb=Ya.offset|0,ub=Ya.stride|0,lb=Ya.divisor|0);bb=wa.location;jc=S[bb];if(1===tb){jc.buffer||n.enableVertexAttribArray(bb);nd=Qa||2;if(jc.type!==Sa||jc.size!==nd||jc.buffer!==Lb||jc.normalized!==Oa||jc.offset!==Yb||jc.stride!==ub)n.bindBuffer(34962,Lb.buffer),n.vertexAttribPointer(bb,nd,Sa,Oa,ub,Yb),jc.type=Sa,jc.size=nd,jc.buffer=Lb,jc.normalized=Oa,jc.offset=
Yb,jc.stride=ub;jc.divisor!==lb&&(J.vertexAttribDivisorANGLE(bb,lb),jc.divisor=lb)}else if(jc.buffer&&(n.disableVertexAttribArray(bb),jc.buffer=null),jc.x!==gc||jc.y!==zc||jc.z!==uc||jc.w!==mb)n.vertexAttrib4f(bb,gc,zc,uc,mb),jc.x=gc,jc.y=zc,jc.z=uc,jc.w=mb;Xa=this.viewportArray;n.uniform4f(Z.location,Xa[0],Xa[1],Xa[2],Xa[3]);Lc=this.scale;n.uniform2f(ma.location,Lc[0],Lc[1]);zb=this.translate;n.uniform2f(U.location,zb[0],zb[1]);(Za=P.elements)?n.bindBuffer(34963,Za.buffer.buffer):qa.currentVAO&&
(Za=Q.getElements(qa.currentVAO.elements))&&n.bindBuffer(34963,Za.buffer.buffer);Ub=P.instances;for(F=0;F<g;++F){E=b[F];var sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id,rd;sc=k.call(this,y,E,F);F&&Vb===sc||(Vb=sc,n.uniform1f(B.location,sc));Pb=w.call(this,y,E,F);F&&Jc===Pb||(Jc=Pb,n.uniform1f(l.location,Pb));Qb=E.align;F&&Xd===Qb||(Xd=Qb,n.uniform1f(W.location,Qb));Dc=E.baseline;F&&ud===Dc||(ud=Dc,n.uniform1f(p.location,Dc));Mc=E.color;
fd=Mc[0];nc=Mc[1];hc=Mc[2];rc=Mc[3];F&&qd===fd&&vc===nc&&db===hc&&Sb===rc||(qd=fd,vc=nc,db=hc,Sb=rc,n.uniform4f(c.location,fd,nc,hc,rc));Wb=sa.call(this,y,E,F);dc=Wb[0];xc=Wb[1];F&&ic===dc&&Ac===xc||(ic=dc,Ac=xc,n.uniform2f(G.location,dc,xc));ad=d.call(this,y,E,F);Pc=ad[0];Rc=ad[1];F&&Qc===Pc&&Xc===Rc||(Qc=Pc,Xc=Rc,n.uniform2f(ca.location,Pc,Rc));wd=E.positionOffset;bd=wd[0];kc=wd[1];F&&Yc===bd&&cc===kc||(Yc=bd,cc=kc,n.uniform2f(A.location,bd,kc));Zc=E.opacity;F&&Uc===Zc||(Uc=Zc,n.uniform1f(a.location,
Zc));(cd=z.call(this,y,E,F))&&"framebuffer"===cd._reglType&&(cd=cd.color[0]);yc=cd._texture;n.uniform1i(f.location,yc.bind());id=E.offset;if(rd=E.count)0<Ub?Za?J.drawElementsInstancedANGLE(0,rd,Za.type,id<<(Za.type-5121>>1),Ub):J.drawArraysInstancedANGLE(0,id,rd,Ub):0>Ub&&(Za?n.drawElements(0,rd,Za.type,id<<(Za.type-5121>>1)):n.drawArrays(0,id,rd)),yc.unbind()}Gc&&K.destroyStream(oc);qc&&K.destroyStream(Nb);qb&&K.destroyStream(La);Kb&&K.destroyStream(Lb);q.dirty=!0;qa.setVAO(null);y.viewportWidth=
D;y.viewportHeight=M;u&&(R.cpuTime+=performance.now()-x)},draw:function(d){var e,k,z,t,T,na,u,x,J,F,w,E,O,V,X,ja,Y,sa,la,Da,ia,Ba,ze,Ye,Qe,Fd,Ae,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb;e=oa.next;e!==oa.cur&&(e?n.bindFramebuffer(36160,e.framebuffer):n.bindFramebuffer(36160,null),oa.cur=e);if(q.dirty){var Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,
Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc;Wa=ea.dither;Wa!==q.dither&&(Wa?n.enable(3024):n.disable(3024),q.dither=Wa);sb=ha[0];rb=ha[1];if(sb!==Ea[0]||rb!==Ea[1])n.blendEquationSeparate(sb,rb),Ea[0]=sb,Ea[1]=rb;Pa=ea.depth_func;Pa!==q.depth_func&&(n.depthFunc(Pa),q.depth_func=Pa);Bc=L[0];Ra=L[1];if(Bc!==ac[0]||Ra!==ac[1])n.depthRange(Bc,Ra),ac[0]=Bc,ac[1]=Ra;Jb=ea.depth_mask;Jb!==q.depth_mask&&(n.depthMask(Jb),q.depth_mask=Jb);Db=Aa[0];Na=Aa[1];Jd=Aa[2];Ya=Aa[3];if(Db!==
Ia[0]||Na!==Ia[1]||Jd!==Ia[2]||Ya!==Ia[3])n.colorMask(Db,Na,Jd,Ya),Ia[0]=Db,Ia[1]=Na,Ia[2]=Jd,Ia[3]=Ya;Kb=ea.cull_enable;Kb!==q.cull_enable&&(Kb?n.enable(2884):n.disable(2884),q.cull_enable=Kb);Lb=ea.cull_face;Lb!==q.cull_face&&(n.cullFace(Lb),q.cull_face=Lb);lb=ea.frontFace;lb!==q.frontFace&&(n.frontFace(lb),q.frontFace=lb);Oa=ea.lineWidth;Oa!==q.lineWidth&&(n.lineWidth(Oa),q.lineWidth=Oa);Yb=ea.polygonOffset_enable;Yb!==q.polygonOffset_enable&&(Yb?n.enable(32823):n.disable(32823),q.polygonOffset_enable=
Yb);Qa=Ta[0];tb=Ta[1];if(Qa!==v[0]||tb!==v[1])n.polygonOffset(Qa,tb),v[0]=Qa,v[1]=tb;ub=ea.sample_alpha;ub!==q.sample_alpha&&(ub?n.enable(32926):n.disable(32926),q.sample_alpha=ub);Sa=ea.sample_enable;Sa!==q.sample_enable&&(Sa?n.enable(32928):n.disable(32928),q.sample_enable=Sa);mb=r[0];gc=r[1];if(mb!==N[0]||gc!==N[1])n.sampleCoverage(mb,gc),N[0]=mb,N[1]=gc;zc=ea.stencil_mask;zc!==q.stencil_mask&&(n.stencilMask(zc),q.stencil_mask=zc);uc=dd[0];bb=dd[1];jc=dd[2];if(uc!==Gb[0]||bb!==Gb[1]||jc!==Gb[2])n.stencilFunc(uc,
bb,jc),Gb[0]=uc,Gb[1]=bb,Gb[2]=jc;nd=ra[0];Xa=ra[1];Lc=ra[2];zb=ra[3];if(nd!==Ga[0]||Xa!==Ga[1]||Lc!==Ga[2]||zb!==Ga[3])n.stencilOpSeparate(nd,Xa,Lc,zb),Ga[0]=nd,Ga[1]=Xa,Ga[2]=Lc,Ga[3]=zb;Za=ba[0];Ub=ba[1];sc=ba[2];Vb=ba[3];if(Za!==I[0]||Ub!==I[1]||sc!==I[2]||Vb!==I[3])n.stencilOpSeparate(Za,Ub,sc,Vb),I[0]=Za,I[1]=Ub,I[2]=sc,I[3]=Vb;Pb=ea.scissor_enable;Pb!==q.scissor_enable&&(Pb?n.enable(3089):n.disable(3089),q.scissor_enable=Pb);Jc=ta[0];Qb=ta[1];Xd=ta[2];Dc=ta[3];if(Jc!==va[0]||Qb!==va[1]||Xd!==
va[2]||Dc!==va[3])n.scissor(Jc,Qb,Xd,Dc),va[0]=Jc,va[1]=Qb,va[2]=Xd,va[3]=Dc}k=this.viewport;z=k.x|0;t=k.y|0;T="width"in k?k.width|0:y.framebufferWidth-z;na="height"in k?k.height|0:y.framebufferHeight-t;u=y.viewportWidth;y.viewportWidth=T;x=y.viewportHeight;y.viewportHeight=na;n.viewport(z,t,T,na);ya[0]=z;ya[1]=t;ya[2]=T;ya[3]=na;n.blendColor(0,0,0,1);za[0]=0;za[1]=0;za[2]=0;za[3]=1;n.enable(3042);q.blend_enable=!0;n.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;n.disable(2929);
q.depth_enable=!1;n.disable(2960);q.stencil_enable=!1;if(J=q.profile)F=performance.now(),R.count++;n.useProgram(D.program);w=xa.angle_instanced_arrays;qa.setVAO(null);aa.buffer=this.sizeBuffer;E=!1;O=null;V=0;X=!1;Y=ja=0;sa=1;la=0;Da=5126;Ye=ze=Ba=ia=0;H(aa)?(E=!0,O=K.createStream(34962,aa),Da=O.dtype):(O=K.getBuffer(aa))?Da=O.dtype:"constant"in aa?(sa=2,"number"===typeof aa.constant?(Ba=aa.constant,ze=Ye=ia=0):(Ba=0<aa.constant.length?aa.constant[0]:0,ze=1<aa.constant.length?aa.constant[1]:0,Ye=
2<aa.constant.length?aa.constant[2]:0,ia=3<aa.constant.length?aa.constant[3]:0)):(O=H(aa.buffer)?K.createStream(34962,aa.buffer):K.getBuffer(aa.buffer),Da="type"in aa?Ca[aa.type]:O.dtype,X=!!aa.normalized,Y=aa.size|0,ja=aa.offset|0,la=aa.stride|0,V=aa.divisor|0);Qe=ga.location;Fd=S[Qe];if(1===sa){Fd.buffer||n.enableVertexAttribArray(Qe);Ae=Y||1;if(Fd.type!==Da||Fd.size!==Ae||Fd.buffer!==O||Fd.normalized!==X||Fd.offset!==ja||Fd.stride!==la)n.bindBuffer(34962,O.buffer),n.vertexAttribPointer(Qe,Ae,Da,
X,la,ja),Fd.type=Da,Fd.size=Ae,Fd.buffer=O,Fd.normalized=X,Fd.offset=ja,Fd.stride=la;Fd.divisor!==V&&(w.vertexAttribDivisorANGLE(Qe,V),Fd.divisor=V)}else if(Fd.buffer&&(n.disableVertexAttribArray(Qe),Fd.buffer=null),Fd.x!==Ba||Fd.y!==ze||Fd.z!==Ye||Fd.w!==ia)n.vertexAttrib4f(Qe,Ba,ze,Ye,ia),Fd.x=Ba,Fd.y=ze,Fd.z=Ye,Fd.w=ia;ka.buffer=this.sizeBuffer;te=!1;$d=null;Wd=0;Ld=!1;$c=md=0;sd=1;Kc=0;pd=5126;ld=Oc=ed=Ec=0;H(ka)?(te=!0,$d=K.createStream(34962,ka),pd=$d.dtype):($d=K.getBuffer(ka))?pd=$d.dtype:
"constant"in ka?(sd=2,"number"===typeof ka.constant?(ed=ka.constant,Oc=ld=Ec=0):(ed=0<ka.constant.length?ka.constant[0]:0,Oc=1<ka.constant.length?ka.constant[1]:0,ld=2<ka.constant.length?ka.constant[2]:0,Ec=3<ka.constant.length?ka.constant[3]:0)):($d=H(ka.buffer)?K.createStream(34962,ka.buffer):K.getBuffer(ka.buffer),pd="type"in ka?Ca[ka.type]:$d.dtype,Ld=!!ka.normalized,$c=ka.size|0,md=ka.offset|0,Kc=ka.stride|0,Wd=ka.divisor|0);Ab=C.location;Eb=S[Ab];if(1===sd){Eb.buffer||n.enableVertexAttribArray(Ab);
tc=$c||1;if(Eb.type!==pd||Eb.size!==tc||Eb.buffer!==$d||Eb.normalized!==Ld||Eb.offset!==md||Eb.stride!==Kc)n.bindBuffer(34962,$d.buffer),n.vertexAttribPointer(Ab,tc,pd,Ld,Kc,md),Eb.type=pd,Eb.size=tc,Eb.buffer=$d,Eb.normalized=Ld,Eb.offset=md,Eb.stride=Kc;Eb.divisor!==Wd&&(w.vertexAttribDivisorANGLE(Ab,Wd),Eb.divisor=Wd)}else if(Eb.buffer&&(n.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==ed||Eb.y!==Oc||Eb.z!==ld||Eb.w!==Ec)n.vertexAttrib4f(Ab,ed,Oc,ld,Ec),Eb.x=ed,Eb.y=Oc,Eb.z=ld,Eb.w=Ec;wb=
this.charBuffer;wc=!1;Bb=null;Ic=0;lc=!1;Wc=Fc=0;Vc=1;Cc=0;ec=5126;mc=pc=oc=Gc=0;H(wb)?(wc=!0,Bb=K.createStream(34962,wb),ec=Bb.dtype):(Bb=K.getBuffer(wb))?ec=Bb.dtype:"constant"in wb?(Vc=2,"number"===typeof wb.constant?(oc=wb.constant,pc=mc=Gc=0):(oc=0<wb.constant.length?wb.constant[0]:0,pc=1<wb.constant.length?wb.constant[1]:0,mc=2<wb.constant.length?wb.constant[2]:0,Gc=3<wb.constant.length?wb.constant[3]:0)):(Bb=H(wb.buffer)?K.createStream(34962,wb.buffer):K.getBuffer(wb.buffer),ec="type"in wb?
Ca[wb.type]:Bb.dtype,lc=!!wb.normalized,Wc=wb.size|0,Fc=wb.offset|0,Cc=wb.stride|0,Ic=wb.divisor|0);fc=da.location;$a=S[fc];if(1===Vc){$a.buffer||n.enableVertexAttribArray(fc);Hc=Wc||1;if($a.type!==ec||$a.size!==Hc||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Fc||$a.stride!==Cc)n.bindBuffer(34962,Bb.buffer),n.vertexAttribPointer(fc,Hc,ec,lc,Cc,Fc),$a.type=ec,$a.size=Hc,$a.buffer=Bb,$a.normalized=lc,$a.offset=Fc,$a.stride=Cc;$a.divisor!==Ic&&(w.vertexAttribDivisorANGLE(fc,Ic),$a.divisor=Ic)}else if($a.buffer&&
(n.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Gc)n.vertexAttrib4f(fc,oc,pc,mc,Gc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Gc;xb=this.position;cb=!1;Mb=null;ab=0;nb=!1;Tc=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=jb=Nb=0;H(xb)?(cb=!0,Mb=K.createStream(34962,xb),qc=Mb.dtype):(Mb=K.getBuffer(xb))?qc=Mb.dtype:"constant"in xb?(Hb=2,"number"===typeof xb.constant?(jb=xb.constant,Fb=Cb=Nb=0):(jb=0<xb.constant.length?xb.constant[0]:0,Fb=1<xb.constant.length?xb.constant[1]:0,Cb=2<xb.constant.length?
xb.constant[2]:0,Nb=3<xb.constant.length?xb.constant[3]:0)):(Mb=H(xb.buffer)?K.createStream(34962,xb.buffer):K.getBuffer(xb.buffer),qc="type"in xb?Ca[xb.type]:Mb.dtype,nb=!!xb.normalized,Tc=xb.size|0,Va=xb.offset|0,Ib=xb.stride|0,ab=xb.divisor|0);vb=wa.location;hb=S[vb];if(1===Hb){hb.buffer||n.enableVertexAttribArray(vb);Xb=Tc||2;if(hb.type!==qc||hb.size!==Xb||hb.buffer!==Mb||hb.normalized!==nb||hb.offset!==Va||hb.stride!==Ib)n.bindBuffer(34962,Mb.buffer),n.vertexAttribPointer(vb,Xb,qc,nb,Ib,Va),
hb.type=qc,hb.size=Xb,hb.buffer=Mb,hb.normalized=nb,hb.offset=Va,hb.stride=Ib;hb.divisor!==ab&&(w.vertexAttribDivisorANGLE(vb,ab),hb.divisor=ab)}else if(hb.buffer&&(n.disableVertexAttribArray(vb),hb.buffer=null),hb.x!==jb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)n.vertexAttrib4f(vb,jb,Fb,Cb,Nb),hb.x=jb,hb.y=Fb,hb.z=Cb,hb.w=Nb;Ob=M.call(this,y,d,0);n.uniform1f(B.location,Ob);pb=m.call(this,y,d,0);n.uniform1f(l.location,pb);n.uniform1f(W.location,d.align);n.uniform1f(p.location,d.baseline);Ua=this.viewportArray;
n.uniform4f(Z.location,Ua[0],Ua[1],Ua[2],Ua[3]);Tb=d.color;n.uniform4f(c.location,Tb[0],Tb[1],Tb[2],Tb[3]);yb=g.call(this,y,d,0);n.uniform2f(G.location,yb[0],yb[1]);bc=h.call(this,y,d,0);n.uniform2f(ca.location,bc[0],bc[1]);ib=this.scale;n.uniform2f(ma.location,ib[0],ib[1]);ob=this.translate;n.uniform2f(U.location,ob[0],ob[1]);Ja=d.positionOffset;n.uniform2f(A.location,Ja[0],Ja[1]);n.uniform1f(a.location,d.opacity);(qb=b.call(this,y,d,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);La=qb._texture;
n.uniform1i(f.location,La.bind());(eb=P.elements)?n.bindBuffer(34963,eb.buffer.buffer):qa.currentVAO&&(eb=Q.getElements(qa.currentVAO.elements))&&n.bindBuffer(34963,eb.buffer.buffer);fb=d.offset;if(Ma=d.count)kb=P.instances,0<kb?eb?w.drawElementsInstancedANGLE(0,Ma,eb.type,fb<<(eb.type-5121>>1),kb):w.drawArraysInstancedANGLE(0,fb,Ma,kb):0>kb&&(eb?n.drawElements(0,Ma,eb.type,fb<<(eb.type-5121>>1)):n.drawArrays(0,fb,Ma)),q.dirty=!0,qa.setVAO(null),y.viewportWidth=u,y.viewportHeight=x,J&&(R.cpuTime+=
performance.now()-F),E&&K.destroyStream(O),te&&K.destroyStream($d),wc&&K.destroyStream(Bb),cb&&K.destroyStream(Mb),La.unbind()},scope:function(a,c,b){var d,g,f,n,l,v,h,r,e,I,L,N,p,k,m,A,z,ra,Ga,B,S,G,D,M,ha,C,ba,ac,Ia,Q,w,ta,ya,za,xa,V,qa,W,Z,ca,ga,Ta,da,sa,pa,Ea,Aa,wa,ma,oa,va,Gb,U,hd,dd,ia,$a,Ba,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,
Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,cc,Zc,Uc,cd,yc,id;d=this.viewport;g=d.x|0;f=d.y|0;n="width"in d?d.width|0:y.framebufferWidth-g;l="height"in d?d.height|0:y.framebufferHeight-f;v=y.viewportWidth;y.viewportWidth=n;h=y.viewportHeight;y.viewportHeight=l;r=na[0];na[0]=g;e=na[1];na[1]=f;I=na[2];na[2]=n;L=na[3];na[3]=l;N=Da[0];Da[0]=0;p=Da[1];Da[1]=0;k=Da[2];Da[2]=0;m=Da[3];Da[3]=1;A=ea.blend_enable;ea.blend_enable=!0;z=ja[0];ja[0]=770;ra=ja[1];ja[1]=771;Ga=
ja[2];ja[2]=773;B=ja[3];ja[3]=1;S=ea.depth_enable;ea.depth_enable=!1;G=ea.stencil_enable;ea.stencil_enable=!1;if(D=q.profile)M=performance.now(),R.count++;ha=a.offset;C=P.offset;P.offset=ha;ba=a.count;ac=P.count;P.count=ba;Ia=P.primitive;P.primitive=0;Q=a.align;w=la[64];la[64]=Q;ta=E.call(this,y,a,b);ya=la[69];la[69]=ta;za=J.call(this,y,a,b);xa=la[67];la[67]=za;V=O.call(this,y,a,b);qa=la[66];la[66]=V;W=a.baseline;Z=la[65];la[65]=W;ca=X.call(this,y,a,b);ga=la[62];la[62]=ca;Ta=a.color;da=la[14];la[14]=
Ta;sa=x.call(this,y,a,b);pa=la[63];la[63]=sa;Ea=a.opacity;Aa=la[10];la[10]=Ea;wa=a.positionOffset;ma=la[68];la[68]=wa;oa=this.scale;va=la[6];la[6]=oa;Gb=this.translate;U=la[8];la[8]=Gb;hd=this.viewportArray;dd=la[3];la[3]=hd;ia=this.charBuffer;$a=!1;Ba=null;xb=0;cb=!1;ab=Mb=0;nb=1;Va=0;Tc=5126;Nb=qc=Ib=Hb=0;H(ia)?($a=!0,Ba=K.createStream(34962,ia),Tc=Ba.dtype):(Ba=K.getBuffer(ia))?Tc=Ba.dtype:"constant"in ia?(nb=2,"number"===typeof ia.constant?(Ib=ia.constant,qc=Nb=Hb=0):(Ib=0<ia.constant.length?
ia.constant[0]:0,qc=1<ia.constant.length?ia.constant[1]:0,Nb=2<ia.constant.length?ia.constant[2]:0,Hb=3<ia.constant.length?ia.constant[3]:0)):(Ba=H(ia.buffer)?K.createStream(34962,ia.buffer):K.getBuffer(ia.buffer),Tc="type"in ia?Ca[ia.type]:Ba.dtype,cb=!!ia.normalized,ab=ia.size|0,Mb=ia.offset|0,Va=ia.stride|0,xb=ia.divisor|0);jb=u.buffer;u.buffer=Ba;Fb=u.divisor;u.divisor=xb;Cb=u.normalized;u.normalized=cb;vb=u.offset;u.offset=Mb;hb=u.size;u.size=ab;Xb=u.state;u.state=nb;Ob=u.stride;u.stride=Va;
pb=u.type;u.type=Tc;Ua=u.w;u.w=Hb;Tb=u.x;u.x=Ib;yb=u.y;u.y=qc;bc=u.z;u.z=Nb;ka.buffer=this.sizeBuffer;ib=!1;ob=null;Ja=0;qb=!1;eb=La=0;fb=1;Ma=0;kb=5126;Pa=rb=sb=Wa=0;H(ka)?(ib=!0,ob=K.createStream(34962,ka),kb=ob.dtype):(ob=K.getBuffer(ka))?kb=ob.dtype:"constant"in ka?(fb=2,"number"===typeof ka.constant?(sb=ka.constant,rb=Pa=Wa=0):(sb=0<ka.constant.length?ka.constant[0]:0,rb=1<ka.constant.length?ka.constant[1]:0,Pa=2<ka.constant.length?ka.constant[2]:0,Wa=3<ka.constant.length?ka.constant[3]:0)):
(ob=H(ka.buffer)?K.createStream(34962,ka.buffer):K.getBuffer(ka.buffer),kb="type"in ka?Ca[ka.type]:ob.dtype,qb=!!ka.normalized,eb=ka.size|0,La=ka.offset|0,Ma=ka.stride|0,Ja=ka.divisor|0);Bc=F.buffer;F.buffer=ob;Ra=F.divisor;F.divisor=Ja;Jb=F.normalized;F.normalized=qb;Db=F.offset;F.offset=La;Na=F.size;F.size=eb;Jd=F.state;F.state=fb;Ya=F.stride;F.stride=Ma;Kb=F.type;F.type=kb;Lb=F.w;F.w=Wa;lb=F.x;F.x=sb;Oa=F.y;F.y=rb;Yb=F.z;F.z=Pa;Qa=this.position;tb=!1;ub=null;Sa=0;mb=!1;zc=gc=0;uc=1;bb=0;jc=5126;
zb=Lc=Xa=nd=0;H(Qa)?(tb=!0,ub=K.createStream(34962,Qa),jc=ub.dtype):(ub=K.getBuffer(Qa))?jc=ub.dtype:"constant"in Qa?(uc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,Lc=zb=nd=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,Lc=1<Qa.constant.length?Qa.constant[1]:0,zb=2<Qa.constant.length?Qa.constant[2]:0,nd=3<Qa.constant.length?Qa.constant[3]:0)):(ub=H(Qa.buffer)?K.createStream(34962,Qa.buffer):K.getBuffer(Qa.buffer),jc="type"in Qa?Ca[Qa.type]:ub.dtype,mb=!!Qa.normalized,zc=Qa.size|0,gc=Qa.offset|
0,bb=Qa.stride|0,Sa=Qa.divisor|0);Za=Y.buffer;Y.buffer=ub;Ub=Y.divisor;Y.divisor=Sa;sc=Y.normalized;Y.normalized=mb;Vb=Y.offset;Y.offset=gc;Pb=Y.size;Y.size=zc;Jc=Y.state;Y.state=uc;Qb=Y.stride;Y.stride=bb;Xd=Y.type;Y.type=jc;Dc=Y.w;Y.w=nd;ud=Y.x;Y.x=Xa;Mc=Y.y;Y.y=Lc;fd=Y.z;Y.z=zb;aa.buffer=this.sizeBuffer;qd=!1;nc=null;vc=0;hc=!1;rc=db=0;Sb=1;Wb=0;dc=5126;ad=Ac=xc=ic=0;H(aa)?(qd=!0,nc=K.createStream(34962,aa),dc=nc.dtype):(nc=K.getBuffer(aa))?dc=nc.dtype:"constant"in aa?(Sb=2,"number"===typeof aa.constant?
(xc=aa.constant,Ac=ad=ic=0):(xc=0<aa.constant.length?aa.constant[0]:0,Ac=1<aa.constant.length?aa.constant[1]:0,ad=2<aa.constant.length?aa.constant[2]:0,ic=3<aa.constant.length?aa.constant[3]:0)):(nc=H(aa.buffer)?K.createStream(34962,aa.buffer):K.getBuffer(aa.buffer),dc="type"in aa?Ca[aa.type]:nc.dtype,hc=!!aa.normalized,rc=aa.size|0,db=aa.offset|0,Wb=aa.stride|0,vc=aa.divisor|0);Pc=t.buffer;t.buffer=nc;Qc=t.divisor;t.divisor=vc;Rc=t.normalized;t.normalized=hc;Xc=t.offset;t.offset=db;wd=t.size;t.size=
rc;bd=t.state;t.state=Sb;Yc=t.stride;t.stride=Wb;kc=t.type;t.type=dc;cc=t.w;t.w=ic;Zc=t.x;t.x=xc;Uc=t.y;t.y=Ac;cd=t.z;t.z=ad;yc=T.vert;T.vert=61;id=T.frag;T.frag=60;q.dirty=!0;c(y,a,b);y.viewportWidth=v;y.viewportHeight=h;na[0]=r;na[1]=e;na[2]=I;na[3]=L;Da[0]=N;Da[1]=p;Da[2]=k;Da[3]=m;ea.blend_enable=A;ja[0]=z;ja[1]=ra;ja[2]=Ga;ja[3]=B;ea.depth_enable=S;ea.stencil_enable=G;D&&(R.cpuTime+=performance.now()-M);P.offset=C;P.count=ac;P.primitive=Ia;la[64]=w;la[69]=ya;la[67]=xa;la[66]=qa;la[65]=Z;la[62]=
ga;la[14]=da;la[63]=pa;la[10]=Aa;la[68]=ma;la[6]=va;la[8]=U;la[3]=dd;$a&&K.destroyStream(Ba);u.buffer=jb;u.divisor=Fb;u.normalized=Cb;u.offset=vb;u.size=hb;u.state=Xb;u.stride=Ob;u.type=pb;u.w=Ua;u.x=Tb;u.y=yb;u.z=bc;ib&&K.destroyStream(ob);F.buffer=Bc;F.divisor=Ra;F.normalized=Jb;F.offset=Db;F.size=Na;F.state=Jd;F.stride=Ya;F.type=Kb;F.w=Lb;F.x=lb;F.y=Oa;F.z=Yb;tb&&K.destroyStream(ub);Y.buffer=Za;Y.divisor=Ub;Y.normalized=sc;Y.offset=Vb;Y.size=Pb;Y.state=Jc;Y.stride=Qb;Y.type=Xd;Y.w=Dc;Y.x=ud;Y.y=
Mc;Y.z=fd;qd&&K.destroyStream(nc);t.buffer=Pc;t.divisor=Qc;t.normalized=Rc;t.offset=Xc;t.size=wd;t.state=bd;t.stride=Yc;t.type=kc;t.w=cc;t.x=Zc;t.y=Uc;t.z=cd;T.vert=yc;T.frag=id;q.dirty=!0}}},$2:function(e,R,D){var M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l;M=e.attributes;m=e.current;g=e.framebuffer;h=e.gl;b=e.next;E=e.vao;J=b.blend_color;O=m.blend_color;X=b.blend_equation;x=m.blend_equation;u=b.blend_func;F=m.blend_func;Y=b.colorMask;t=m.colorMask;V=b.depth_range;k=m.depth_range;
w=b.polygonOffset_offset;sa=m.polygonOffset_offset;d=b.sample_coverage;z=m.sample_coverage;W=b.scissor_box;f=m.scissor_box;ca=b.stencil_func;G=m.stencil_func;p=b.stencil_opBack;da=m.stencil_opBack;C=b.stencil_opFront;B=m.stencil_opFront;c=b.viewport;l=m.viewport;return{poll:function(){var a,e,A,D,M,E,R,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da;m.dirty=!1;e=b.blend_enable;A=b.cull_enable;D=b.depth_enable;M=b.dither;E=b.polygonOffset_enable;R=b.sample_alpha;S=b.sample_enable;K=b.scissor_enable;y=b.stencil_enable;
q=b.cull_face;P=m.cull_face;Q=b.depth_func;xa=m.depth_func;oa=b.depth_mask;n=m.depth_mask;H=b.frontFace;ea=m.frontFace;T=b.lineWidth;la=m.lineWidth;qa=b.stencil_mask;Da=m.stencil_mask;a=g.next;a!==g.cur&&(a?h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null),g.cur=a);e!==m.blend_enable&&(e?h.enable(3042):h.disable(3042),m.blend_enable=e);A!==m.cull_enable&&(A?h.enable(2884):h.disable(2884),m.cull_enable=A);D!==m.depth_enable&&(D?h.enable(2929):h.disable(2929),m.depth_enable=D);M!==
m.dither&&(M?h.enable(3024):h.disable(3024),m.dither=M);E!==m.polygonOffset_enable&&(E?h.enable(32823):h.disable(32823),m.polygonOffset_enable=E);R!==m.sample_alpha&&(R?h.enable(32926):h.disable(32926),m.sample_alpha=R);S!==m.sample_enable&&(S?h.enable(32928):h.disable(32928),m.sample_enable=S);K!==m.scissor_enable&&(K?h.enable(3089):h.disable(3089),m.scissor_enable=K);y!==m.stencil_enable&&(y?h.enable(2960):h.disable(2960),m.stencil_enable=y);if(J[0]!==O[0]||J[1]!==O[1]||J[2]!==O[2]||J[3]!==O[3])h.blendColor(J[0],
J[1],J[2],J[3]),O[0]=J[0],O[1]=J[1],O[2]=J[2],O[3]=J[3];if(X[0]!==x[0]||X[1]!==x[1])h.blendEquationSeparate(X[0],X[1]),x[0]=X[0],x[1]=X[1];if(u[0]!==F[0]||u[1]!==F[1]||u[2]!==F[2]||u[3]!==F[3])h.blendFuncSeparate(u[0],u[1],u[2],u[3]),F[0]=u[0],F[1]=u[1],F[2]=u[2],F[3]=u[3];if(Y[0]!==t[0]||Y[1]!==t[1]||Y[2]!==t[2]||Y[3]!==t[3])h.colorMask(Y[0],Y[1],Y[2],Y[3]),t[0]=Y[0],t[1]=Y[1],t[2]=Y[2],t[3]=Y[3];q!==P&&(h.cullFace(q),m.cull_face=q);Q!==xa&&(h.depthFunc(Q),m.depth_func=Q);oa!==n&&(h.depthMask(oa),
m.depth_mask=oa);if(V[0]!==k[0]||V[1]!==k[1])h.depthRange(V[0],V[1]),k[0]=V[0],k[1]=V[1];H!==ea&&(h.frontFace(H),m.frontFace=H);T!==la&&(h.lineWidth(T),m.lineWidth=T);if(w[0]!==sa[0]||w[1]!==sa[1])h.polygonOffset(w[0],w[1]),sa[0]=w[0],sa[1]=w[1];if(d[0]!==z[0]||d[1]!==z[1])h.sampleCoverage(d[0],d[1]),z[0]=d[0],z[1]=d[1];if(W[0]!==f[0]||W[1]!==f[1]||W[2]!==f[2]||W[3]!==f[3])h.scissor(W[0],W[1],W[2],W[3]),f[0]=W[0],f[1]=W[1],f[2]=W[2],f[3]=W[3];if(ca[0]!==G[0]||ca[1]!==G[1]||ca[2]!==G[2])h.stencilFunc(ca[0],
ca[1],ca[2]),G[0]=ca[0],G[1]=ca[1],G[2]=ca[2];qa!==Da&&(h.stencilMask(qa),m.stencil_mask=qa);if(p[0]!==da[0]||p[1]!==da[1]||p[2]!==da[2]||p[3]!==da[3])h.stencilOpSeparate(p[0],p[1],p[2],p[3]),da[0]=p[0],da[1]=p[1],da[2]=p[2],da[3]=p[3];if(C[0]!==B[0]||C[1]!==B[1]||C[2]!==B[2]||C[3]!==B[3])h.stencilOpSeparate(C[0],C[1],C[2],C[3]),B[0]=C[0],B[1]=C[1],B[2]=C[2],B[3]=C[3];if(c[0]!==l[0]||c[1]!==l[1]||c[2]!==l[2]||c[3]!==l[3])h.viewport(c[0],c[1],c[2],c[3]),l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3]},refresh:function(){var a,
e,A,D,R,Z,ga,S,K,y,q,P,Q,xa,oa,n;m.dirty=!1;e=b.blend_enable;A=b.cull_enable;D=b.depth_enable;R=b.dither;Z=b.polygonOffset_enable;ga=b.sample_alpha;S=b.sample_enable;K=b.scissor_enable;y=b.stencil_enable;q=b.cull_face;P=b.depth_func;Q=b.depth_mask;xa=b.frontFace;oa=b.lineWidth;n=b.stencil_mask;(a=g.next)?h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null);g.cur=a;a=M[0];a.buffer?(h.enableVertexAttribArray(0),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(0,a.size,a.type,
a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(0),h.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=M[1];a.buffer?(h.enableVertexAttribArray(1),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(1),h.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=M[2];a.buffer?(h.enableVertexAttribArray(2),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):
(h.disableVertexAttribArray(2),h.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=M[3];a.buffer?(h.enableVertexAttribArray(3),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(3),h.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=M[4];a.buffer?(h.enableVertexAttribArray(4),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(4),
h.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=M[5];a.buffer?(h.enableVertexAttribArray(5),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(5),h.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=M[6];a.buffer?(h.enableVertexAttribArray(6),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(6),h.vertexAttrib4f(6,a.x,a.y,a.z,
a.w),a.buffer=null);a=M[7];a.buffer?(h.enableVertexAttribArray(7),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(7),h.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=M[8];a.buffer?(h.enableVertexAttribArray(8),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(8),h.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=M[9];a.buffer?
(h.enableVertexAttribArray(9),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(9),h.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=M[10];a.buffer?(h.enableVertexAttribArray(10),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(10),h.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=M[11];a.buffer?(h.enableVertexAttribArray(11),
h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(11),h.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=M[12];a.buffer?(h.enableVertexAttribArray(12),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(12),h.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=M[13];a.buffer?(h.enableVertexAttribArray(13),h.bindBuffer(34962,a.buffer.buffer),
h.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(13),h.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=M[14];a.buffer?(h.enableVertexAttribArray(14),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(14),h.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=M[15];a.buffer?(h.enableVertexAttribArray(15),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(15,
a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(15),h.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);E.currentVAO=null;E.setVAO(E.targetVAO);e?h.enable(3042):h.disable(3042);m.blend_enable=e;A?h.enable(2884):h.disable(2884);m.cull_enable=A;D?h.enable(2929):h.disable(2929);m.depth_enable=D;R?h.enable(3024):h.disable(3024);m.dither=R;Z?h.enable(32823):h.disable(32823);m.polygonOffset_enable=Z;ga?h.enable(32926):h.disable(32926);m.sample_alpha=ga;S?h.enable(32928):h.disable(32928);
m.sample_enable=S;K?h.enable(3089):h.disable(3089);m.scissor_enable=K;y?h.enable(2960):h.disable(2960);m.stencil_enable=y;h.blendColor(J[0],J[1],J[2],J[3]);O[0]=J[0];O[1]=J[1];O[2]=J[2];O[3]=J[3];h.blendEquationSeparate(X[0],X[1]);x[0]=X[0];x[1]=X[1];h.blendFuncSeparate(u[0],u[1],u[2],u[3]);F[0]=u[0];F[1]=u[1];F[2]=u[2];F[3]=u[3];h.colorMask(Y[0],Y[1],Y[2],Y[3]);t[0]=Y[0];t[1]=Y[1];t[2]=Y[2];t[3]=Y[3];h.cullFace(q);m.cull_face=q;h.depthFunc(P);m.depth_func=P;h.depthMask(Q);m.depth_mask=Q;h.depthRange(V[0],
V[1]);k[0]=V[0];k[1]=V[1];h.frontFace(xa);m.frontFace=xa;h.lineWidth(oa);m.lineWidth=oa;h.polygonOffset(w[0],w[1]);sa[0]=w[0];sa[1]=w[1];h.sampleCoverage(d[0],d[1]);z[0]=d[0];z[1]=d[1];h.scissor(W[0],W[1],W[2],W[3]);f[0]=W[0];f[1]=W[1];f[2]=W[2];f[3]=W[3];h.stencilFunc(ca[0],ca[1],ca[2]);G[0]=ca[0];G[1]=ca[1];G[2]=ca[2];h.stencilMask(n);m.stencil_mask=n;h.stencilOpSeparate(p[0],p[1],p[2],p[3]);da[0]=p[0];da[1]=p[1];da[2]=p[2];da[3]=p[3];h.stencilOpSeparate(C[0],C[1],C[2],C[3]);B[0]=C[0];B[1]=C[1];
B[2]=C[2];B[3]=C[3];h.viewport(c[0],c[1],c[2],c[3]);l[0]=c[0];l[1]=c[1];l[2]=c[2];l[3]=c[3]}}},$7:function(e,R,D,M,m,g,h,b){var E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z,ga,S;E=e.context;J=e.current;O=e.framebuffer;X=e.gl;x=e.next;u=e.shader;F=e.vao;Y=x.blend_color;t=J.blend_color;V=x.blend_equation;k=J.blend_equation;w=x.blend_func;sa=J.blend_func;d=x.colorMask;z=J.colorMask;W=x.depth_range;f=J.depth_range;ca=x.polygonOffset_offset;G=J.polygonOffset_offset;p=x.sample_coverage;
da=J.sample_coverage;C=x.scissor_box;B=J.scissor_box;c=x.stencil_func;l=J.stencil_func;a=x.stencil_opBack;wa=J.stencil_opBack;A=x.stencil_opFront;ma=J.stencil_opFront;U=x.viewport;Z=J.viewport;ga={};S={};return{draw:function(b){var h,q,e,S,C,oa,n,H,ea,T;h=b.framebuffer;q=O.getFramebuffer(h);h&&!q&&R.commandRaise(m,D);h=O.next;O.next=q;e=E.framebufferWidth;E.framebufferWidth=q?q.width:E.drawingBufferWidth;S=E.framebufferHeight;E.framebufferHeight=q?q.height:E.drawingBufferHeight;q!==O.cur&&(q?X.bindFramebuffer(36160,
q.framebuffer):X.bindFramebuffer(36160,null),O.cur=q);if(J.dirty){q=x.dither;q!==J.dither&&(q?X.enable(3024):X.disable(3024),J.dither=q);q=x.blend_enable;q!==J.blend_enable&&(q?X.enable(3042):X.disable(3042),J.blend_enable=q);q=Y[0];n=Y[1];C=Y[2];oa=Y[3];if(q!==t[0]||n!==t[1]||C!==t[2]||oa!==t[3])X.blendColor(q,n,C,oa),t[0]=q,t[1]=n,t[2]=C,t[3]=oa;q=V[0];n=V[1];if(q!==k[0]||n!==k[1])X.blendEquationSeparate(q,n),k[0]=q,k[1]=n;q=w[0];n=w[1];C=w[2];oa=w[3];if(q!==sa[0]||n!==sa[1]||C!==sa[2]||oa!==sa[3])X.blendFuncSeparate(q,
n,C,oa),sa[0]=q,sa[1]=n,sa[2]=C,sa[3]=oa;q=x.depth_enable;q!==J.depth_enable&&(q?X.enable(2929):X.disable(2929),J.depth_enable=q);q=x.depth_func;q!==J.depth_func&&(X.depthFunc(q),J.depth_func=q);q=W[0];n=W[1];if(q!==f[0]||n!==f[1])X.depthRange(q,n),f[0]=q,f[1]=n;q=x.depth_mask;q!==J.depth_mask&&(X.depthMask(q),J.depth_mask=q);q=d[0];n=d[1];C=d[2];oa=d[3];if(q!==z[0]||n!==z[1]||C!==z[2]||oa!==z[3])X.colorMask(q,n,C,oa),z[0]=q,z[1]=n,z[2]=C,z[3]=oa;q=x.cull_enable;q!==J.cull_enable&&(q?X.enable(2884):
X.disable(2884),J.cull_enable=q);q=x.cull_face;q!==J.cull_face&&(X.cullFace(q),J.cull_face=q);q=x.frontFace;q!==J.frontFace&&(X.frontFace(q),J.frontFace=q);q=x.lineWidth;q!==J.lineWidth&&(X.lineWidth(q),J.lineWidth=q);q=x.polygonOffset_enable;q!==J.polygonOffset_enable&&(q?X.enable(32823):X.disable(32823),J.polygonOffset_enable=q);q=ca[0];n=ca[1];if(q!==G[0]||n!==G[1])X.polygonOffset(q,n),G[0]=q,G[1]=n;q=x.sample_alpha;q!==J.sample_alpha&&(q?X.enable(32926):X.disable(32926),J.sample_alpha=q);q=x.sample_enable;
q!==J.sample_enable&&(q?X.enable(32928):X.disable(32928),J.sample_enable=q);q=p[0];n=p[1];if(q!==da[0]||n!==da[1])X.sampleCoverage(q,n),da[0]=q,da[1]=n;q=x.stencil_enable;q!==J.stencil_enable&&(q?X.enable(2960):X.disable(2960),J.stencil_enable=q);q=x.stencil_mask;q!==J.stencil_mask&&(X.stencilMask(q),J.stencil_mask=q);q=c[0];n=c[1];C=c[2];if(q!==l[0]||n!==l[1]||C!==l[2])X.stencilFunc(q,n,C),l[0]=q,l[1]=n,l[2]=C;q=A[0];n=A[1];C=A[2];oa=A[3];if(q!==ma[0]||n!==ma[1]||C!==ma[2]||oa!==ma[3])X.stencilOpSeparate(q,
n,C,oa),ma[0]=q,ma[1]=n,ma[2]=C,ma[3]=oa;q=a[0];n=a[1];C=a[2];oa=a[3];if(q!==wa[0]||n!==wa[1]||C!==wa[2]||oa!==wa[3])X.stencilOpSeparate(q,n,C,oa),wa[0]=q,wa[1]=n,wa[2]=C,wa[3]=oa;q=x.scissor_enable;q!==J.scissor_enable&&(q?X.enable(3089):X.disable(3089),J.scissor_enable=q)}C=E.framebufferWidth;oa=E.framebufferHeight;q=E.viewportWidth;E.viewportWidth=C;n=E.viewportHeight;E.viewportHeight=oa;X.viewport(0,0,C,oa);Z[0]=0;Z[1]=0;Z[2]=C;Z[3]=oa;C=E.framebufferWidth;oa=E.framebufferHeight;X.scissor(0,0,
C,oa);B[0]=0;B[1]=0;B[2]=C;B[3]=oa;if(C=J.profile)H=performance.now(),M.count++;oa=u.program(u.vert,u.frag,D);X.useProgram(oa.program);F.setVAO(null);ea=oa.id;(T=ga[ea])||(T=ga[ea]=g(oa));T.call(this,b);J.dirty=!0;F.setVAO(null);O.next=h;E.framebufferWidth=e;E.framebufferHeight=S;E.viewportWidth=q;E.viewportHeight=n;C&&(M.cpuTime+=performance.now()-H)},scope:function(a,c,b){var d,g,f,l,n,e,p,k,m,A,z,t,B,S,G;d=a.framebuffer;g=O.getFramebuffer(d);d&&!g&&R.commandRaise(h,D);d=O.next;O.next=g;f=E.framebufferWidth;
E.framebufferWidth=g?g.width:E.drawingBufferWidth;l=E.framebufferHeight;E.framebufferHeight=g?g.height:E.drawingBufferHeight;n=E.framebufferWidth;e=E.framebufferHeight;g=E.viewportWidth;E.viewportWidth=n;p=E.viewportHeight;E.viewportHeight=e;k=U[0];U[0]=0;m=U[1];U[1]=0;A=U[2];U[2]=n;n=U[3];U[3]=e;z=E.framebufferWidth;t=E.framebufferHeight;e=C[0];C[0]=0;B=C[1];C[1]=0;S=C[2];C[2]=z;z=C[3];C[3]=t;if(t=J.profile)G=performance.now(),M.count++;J.dirty=!0;c(E,a,b);O.next=d;E.framebufferWidth=f;E.framebufferHeight=
l;E.viewportWidth=g;E.viewportHeight=p;U[0]=k;U[1]=m;U[2]=A;U[3]=n;C[0]=e;C[1]=B;C[2]=S;C[3]=z;t&&(M.cpuTime+=performance.now()-G);J.dirty=!0},batch:function(g,h){var q,e,m,B,C;if(J.dirty){q=x.dither;q!==J.dither&&(q?X.enable(3024):X.disable(3024),J.dither=q);q=x.blend_enable;q!==J.blend_enable&&(q?X.enable(3042):X.disable(3042),J.blend_enable=q);q=Y[0];m=Y[1];B=Y[2];C=Y[3];if(q!==t[0]||m!==t[1]||B!==t[2]||C!==t[3])X.blendColor(q,m,B,C),t[0]=q,t[1]=m,t[2]=B,t[3]=C;q=V[0];m=V[1];if(q!==k[0]||m!==k[1])X.blendEquationSeparate(q,
m),k[0]=q,k[1]=m;q=w[0];m=w[1];B=w[2];C=w[3];if(q!==sa[0]||m!==sa[1]||B!==sa[2]||C!==sa[3])X.blendFuncSeparate(q,m,B,C),sa[0]=q,sa[1]=m,sa[2]=B,sa[3]=C;q=x.depth_enable;q!==J.depth_enable&&(q?X.enable(2929):X.disable(2929),J.depth_enable=q);q=x.depth_func;q!==J.depth_func&&(X.depthFunc(q),J.depth_func=q);q=W[0];m=W[1];if(q!==f[0]||m!==f[1])X.depthRange(q,m),f[0]=q,f[1]=m;q=x.depth_mask;q!==J.depth_mask&&(X.depthMask(q),J.depth_mask=q);q=d[0];m=d[1];B=d[2];C=d[3];if(q!==z[0]||m!==z[1]||B!==z[2]||C!==
z[3])X.colorMask(q,m,B,C),z[0]=q,z[1]=m,z[2]=B,z[3]=C;q=x.cull_enable;q!==J.cull_enable&&(q?X.enable(2884):X.disable(2884),J.cull_enable=q);q=x.cull_face;q!==J.cull_face&&(X.cullFace(q),J.cull_face=q);q=x.frontFace;q!==J.frontFace&&(X.frontFace(q),J.frontFace=q);q=x.lineWidth;q!==J.lineWidth&&(X.lineWidth(q),J.lineWidth=q);q=x.polygonOffset_enable;q!==J.polygonOffset_enable&&(q?X.enable(32823):X.disable(32823),J.polygonOffset_enable=q);q=ca[0];m=ca[1];if(q!==G[0]||m!==G[1])X.polygonOffset(q,m),G[0]=
q,G[1]=m;q=x.sample_alpha;q!==J.sample_alpha&&(q?X.enable(32926):X.disable(32926),J.sample_alpha=q);q=x.sample_enable;q!==J.sample_enable&&(q?X.enable(32928):X.disable(32928),J.sample_enable=q);q=p[0];m=p[1];if(q!==da[0]||m!==da[1])X.sampleCoverage(q,m),da[0]=q,da[1]=m;q=x.stencil_enable;q!==J.stencil_enable&&(q?X.enable(2960):X.disable(2960),J.stencil_enable=q);q=x.stencil_mask;q!==J.stencil_mask&&(X.stencilMask(q),J.stencil_mask=q);q=c[0];m=c[1];B=c[2];if(q!==l[0]||m!==l[1]||B!==l[2])X.stencilFunc(q,
m,B),l[0]=q,l[1]=m,l[2]=B;q=A[0];m=A[1];B=A[2];C=A[3];if(q!==ma[0]||m!==ma[1]||B!==ma[2]||C!==ma[3])X.stencilOpSeparate(q,m,B,C),ma[0]=q,ma[1]=m,ma[2]=B,ma[3]=C;q=a[0];m=a[1];B=a[2];C=a[3];if(q!==wa[0]||m!==wa[1]||B!==wa[2]||C!==wa[3])X.stencilOpSeparate(q,m,B,C),wa[0]=q,wa[1]=m,wa[2]=B,wa[3]=C;q=x.scissor_enable;q!==J.scissor_enable&&(q?X.enable(3089):X.disable(3089),J.scissor_enable=q)}if(q=J.profile)e=performance.now(),M.count+=h;m=u.program(u.vert,u.frag,D);X.useProgram(m.program);F.setVAO(null);
B=m.id;(C=S[B])||(C=S[B]=b(m));C.call(this,g,h);J.dirty=!0;F.setVAO(null);q&&(M.cpuTime+=performance.now()-e)}}},$5:function(e,R,D,M,m,g){var h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z;h=e.context;b=e.current;E=e.framebuffer;J=e.gl;O=e.next;X=e.shader;x=e.vao;u=O.blend_color;F=b.blend_color;Y=O.blend_equation;t=b.blend_equation;V=O.blend_func;k=b.blend_func;w=O.colorMask;sa=b.colorMask;d=O.depth_range;z=b.depth_range;W=O.polygonOffset_offset;f=b.polygonOffset_offset;ca=
O.sample_coverage;G=b.sample_coverage;p=O.scissor_box;da=b.scissor_box;C=O.stencil_func;B=b.stencil_func;c=O.stencil_opBack;l=b.stencil_opBack;a=O.stencil_opFront;wa=b.stencil_opFront;A=O.viewport;ma=b.viewport;U={};Z={};return{draw:function(g){var h,e,y,q,P;h=E.next;h!==E.cur&&(h?J.bindFramebuffer(36160,h.framebuffer):J.bindFramebuffer(36160,null),E.cur=h);if(b.dirty){h=O.dither;h!==b.dither&&(h?J.enable(3024):J.disable(3024),b.dither=h);h=O.blend_enable;h!==b.blend_enable&&(h?J.enable(3042):J.disable(3042),
b.blend_enable=h);h=u[0];y=u[1];q=u[2];P=u[3];if(h!==F[0]||y!==F[1]||q!==F[2]||P!==F[3])J.blendColor(h,y,q,P),F[0]=h,F[1]=y,F[2]=q,F[3]=P;h=Y[0];y=Y[1];if(h!==t[0]||y!==t[1])J.blendEquationSeparate(h,y),t[0]=h,t[1]=y;h=V[0];y=V[1];q=V[2];P=V[3];if(h!==k[0]||y!==k[1]||q!==k[2]||P!==k[3])J.blendFuncSeparate(h,y,q,P),k[0]=h,k[1]=y,k[2]=q,k[3]=P;h=O.depth_enable;h!==b.depth_enable&&(h?J.enable(2929):J.disable(2929),b.depth_enable=h);h=O.depth_func;h!==b.depth_func&&(J.depthFunc(h),b.depth_func=h);h=d[0];
y=d[1];if(h!==z[0]||y!==z[1])J.depthRange(h,y),z[0]=h,z[1]=y;h=O.depth_mask;h!==b.depth_mask&&(J.depthMask(h),b.depth_mask=h);h=w[0];y=w[1];q=w[2];P=w[3];if(h!==sa[0]||y!==sa[1]||q!==sa[2]||P!==sa[3])J.colorMask(h,y,q,P),sa[0]=h,sa[1]=y,sa[2]=q,sa[3]=P;h=O.cull_enable;h!==b.cull_enable&&(h?J.enable(2884):J.disable(2884),b.cull_enable=h);h=O.cull_face;h!==b.cull_face&&(J.cullFace(h),b.cull_face=h);h=O.frontFace;h!==b.frontFace&&(J.frontFace(h),b.frontFace=h);h=O.lineWidth;h!==b.lineWidth&&(J.lineWidth(h),
b.lineWidth=h);h=O.polygonOffset_enable;h!==b.polygonOffset_enable&&(h?J.enable(32823):J.disable(32823),b.polygonOffset_enable=h);h=W[0];y=W[1];if(h!==f[0]||y!==f[1])J.polygonOffset(h,y),f[0]=h,f[1]=y;h=O.sample_alpha;h!==b.sample_alpha&&(h?J.enable(32926):J.disable(32926),b.sample_alpha=h);h=O.sample_enable;h!==b.sample_enable&&(h?J.enable(32928):J.disable(32928),b.sample_enable=h);h=ca[0];y=ca[1];if(h!==G[0]||y!==G[1])J.sampleCoverage(h,y),G[0]=h,G[1]=y;h=O.stencil_enable;h!==b.stencil_enable&&
(h?J.enable(2960):J.disable(2960),b.stencil_enable=h);h=O.stencil_mask;h!==b.stencil_mask&&(J.stencilMask(h),b.stencil_mask=h);h=C[0];y=C[1];q=C[2];if(h!==B[0]||y!==B[1]||q!==B[2])J.stencilFunc(h,y,q),B[0]=h,B[1]=y,B[2]=q;h=a[0];y=a[1];q=a[2];P=a[3];if(h!==wa[0]||y!==wa[1]||q!==wa[2]||P!==wa[3])J.stencilOpSeparate(h,y,q,P),wa[0]=h,wa[1]=y,wa[2]=q,wa[3]=P;h=c[0];y=c[1];q=c[2];P=c[3];if(h!==l[0]||y!==l[1]||q!==l[2]||P!==l[3])J.stencilOpSeparate(h,y,q,P),l[0]=h,l[1]=y,l[2]=q,l[3]=P;h=O.scissor_enable;
h!==b.scissor_enable&&(h?J.enable(3089):J.disable(3089),b.scissor_enable=h);h=p[0];y=p[1];q=p[2];P=p[3];if(h!==da[0]||y!==da[1]||q!==da[2]||P!==da[3])J.scissor(h,y,q,P),da[0]=h,da[1]=y,da[2]=q,da[3]=P;h=A[0];y=A[1];q=A[2];P=A[3];if(h!==ma[0]||y!==ma[1]||q!==ma[2]||P!==ma[3])J.viewport(h,y,q,P),ma[0]=h,ma[1]=y,ma[2]=q,ma[3]=P;b.dirty=!1}if(h=b.profile)e=performance.now(),M.count++;y=X.program(X.vert,X.frag,D);J.useProgram(y.program);x.setVAO(null);q=y.id;(P=U[q])||(P=U[q]=m(y));P.call(this,g);x.setVAO(null);
h&&(M.cpuTime+=performance.now()-e)},scope:function(a,c,d){var g,f;if(g=b.profile)f=performance.now(),M.count++;c(h,a,d);g&&(M.cpuTime+=performance.now()-f)},batch:function(h,e){var m,y,q,P,Q;m=E.next;m!==E.cur&&(m?J.bindFramebuffer(36160,m.framebuffer):J.bindFramebuffer(36160,null),E.cur=m);if(b.dirty){m=O.dither;m!==b.dither&&(m?J.enable(3024):J.disable(3024),b.dither=m);m=O.blend_enable;m!==b.blend_enable&&(m?J.enable(3042):J.disable(3042),b.blend_enable=m);m=u[0];q=u[1];P=u[2];Q=u[3];if(m!==F[0]||
q!==F[1]||P!==F[2]||Q!==F[3])J.blendColor(m,q,P,Q),F[0]=m,F[1]=q,F[2]=P,F[3]=Q;m=Y[0];q=Y[1];if(m!==t[0]||q!==t[1])J.blendEquationSeparate(m,q),t[0]=m,t[1]=q;m=V[0];q=V[1];P=V[2];Q=V[3];if(m!==k[0]||q!==k[1]||P!==k[2]||Q!==k[3])J.blendFuncSeparate(m,q,P,Q),k[0]=m,k[1]=q,k[2]=P,k[3]=Q;m=O.depth_enable;m!==b.depth_enable&&(m?J.enable(2929):J.disable(2929),b.depth_enable=m);m=O.depth_func;m!==b.depth_func&&(J.depthFunc(m),b.depth_func=m);m=d[0];q=d[1];if(m!==z[0]||q!==z[1])J.depthRange(m,q),z[0]=m,z[1]=
q;m=O.depth_mask;m!==b.depth_mask&&(J.depthMask(m),b.depth_mask=m);m=w[0];q=w[1];P=w[2];Q=w[3];if(m!==sa[0]||q!==sa[1]||P!==sa[2]||Q!==sa[3])J.colorMask(m,q,P,Q),sa[0]=m,sa[1]=q,sa[2]=P,sa[3]=Q;m=O.cull_enable;m!==b.cull_enable&&(m?J.enable(2884):J.disable(2884),b.cull_enable=m);m=O.cull_face;m!==b.cull_face&&(J.cullFace(m),b.cull_face=m);m=O.frontFace;m!==b.frontFace&&(J.frontFace(m),b.frontFace=m);m=O.lineWidth;m!==b.lineWidth&&(J.lineWidth(m),b.lineWidth=m);m=O.polygonOffset_enable;m!==b.polygonOffset_enable&&
(m?J.enable(32823):J.disable(32823),b.polygonOffset_enable=m);m=W[0];q=W[1];if(m!==f[0]||q!==f[1])J.polygonOffset(m,q),f[0]=m,f[1]=q;m=O.sample_alpha;m!==b.sample_alpha&&(m?J.enable(32926):J.disable(32926),b.sample_alpha=m);m=O.sample_enable;m!==b.sample_enable&&(m?J.enable(32928):J.disable(32928),b.sample_enable=m);m=ca[0];q=ca[1];if(m!==G[0]||q!==G[1])J.sampleCoverage(m,q),G[0]=m,G[1]=q;m=O.stencil_enable;m!==b.stencil_enable&&(m?J.enable(2960):J.disable(2960),b.stencil_enable=m);m=O.stencil_mask;
m!==b.stencil_mask&&(J.stencilMask(m),b.stencil_mask=m);m=C[0];q=C[1];P=C[2];if(m!==B[0]||q!==B[1]||P!==B[2])J.stencilFunc(m,q,P),B[0]=m,B[1]=q,B[2]=P;m=a[0];q=a[1];P=a[2];Q=a[3];if(m!==wa[0]||q!==wa[1]||P!==wa[2]||Q!==wa[3])J.stencilOpSeparate(m,q,P,Q),wa[0]=m,wa[1]=q,wa[2]=P,wa[3]=Q;m=c[0];q=c[1];P=c[2];Q=c[3];if(m!==l[0]||q!==l[1]||P!==l[2]||Q!==l[3])J.stencilOpSeparate(m,q,P,Q),l[0]=m,l[1]=q,l[2]=P,l[3]=Q;m=O.scissor_enable;m!==b.scissor_enable&&(m?J.enable(3089):J.disable(3089),b.scissor_enable=
m);m=p[0];q=p[1];P=p[2];Q=p[3];if(m!==da[0]||q!==da[1]||P!==da[2]||Q!==da[3])J.scissor(m,q,P,Q),da[0]=m,da[1]=q,da[2]=P,da[3]=Q;m=A[0];q=A[1];P=A[2];Q=A[3];if(m!==ma[0]||q!==ma[1]||P!==ma[2]||Q!==ma[3])J.viewport(m,q,P,Q),ma[0]=m,ma[1]=q,ma[2]=P,ma[3]=Q;b.dirty=!1}if(m=b.profile)y=performance.now(),M.count+=e;q=X.program(X.vert,X.frag,D);J.useProgram(q.program);x.setVAO(null);P=q.id;(Q=Z[P])||(Q=Z[P]=g(q));Q.call(this,h,e);x.setVAO(null);m&&(M.cpuTime+=performance.now()-y)}}},"$26,color,freq,phase,projection,time,view":function(e,
R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l){var a,wa,A,ma,U,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,ia,Gb,ba;a=e.attributes;wa=e.context;A=e.current;ma=e.draw;U=e.elements;Z=e.framebuffer;ga=e.gl;S=e.isArrayLike;K=e.next;y=e.shader;q=e.uniforms;P=e.vao;Q=K.blend_color;xa=A.blend_color;oa=K.blend_equation;n=A.blend_equation;H=K.blend_func;ea=A.blend_func;T=K.colorMask;la=A.colorMask;qa=K.depth_range;Da=A.depth_range;za=K.polygonOffset_offset;
ha=A.polygonOffset_offset;Ea=K.sample_coverage;ja=A.sample_coverage;pa=K.scissor_box;Aa=A.scissor_box;Ia=K.stencil_func;L=A.stencil_func;ac=K.stencil_opBack;Ta=A.stencil_opBack;v=K.stencil_opFront;r=A.stencil_opFront;N=K.viewport;ta=A.viewport;va=new Float32Array(16);ia=new Float32Array(16);Gb=new Float32Array(16);ba=new Float32Array(16);return{draw:function(d){var f,q,e,k;f=Z.next;f!==Z.cur&&(f?ga.bindFramebuffer(36160,f.framebuffer):ga.bindFramebuffer(36160,null),Z.cur=f);if(A.dirty){var z;f=K.dither;
f!==A.dither&&(f?ga.enable(3024):ga.disable(3024),A.dither=f);f=K.blend_enable;f!==A.blend_enable&&(f?ga.enable(3042):ga.disable(3042),A.blend_enable=f);f=Q[0];e=Q[1];k=Q[2];z=Q[3];if(f!==xa[0]||e!==xa[1]||k!==xa[2]||z!==xa[3])ga.blendColor(f,e,k,z),xa[0]=f,xa[1]=e,xa[2]=k,xa[3]=z;f=oa[0];e=oa[1];if(f!==n[0]||e!==n[1])ga.blendEquationSeparate(f,e),n[0]=f,n[1]=e;f=H[0];e=H[1];k=H[2];z=H[3];if(f!==ea[0]||e!==ea[1]||k!==ea[2]||z!==ea[3])ga.blendFuncSeparate(f,e,k,z),ea[0]=f,ea[1]=e,ea[2]=k,ea[3]=z;f=
K.depth_enable;f!==A.depth_enable&&(f?ga.enable(2929):ga.disable(2929),A.depth_enable=f);f=K.depth_func;f!==A.depth_func&&(ga.depthFunc(f),A.depth_func=f);f=qa[0];e=qa[1];if(f!==Da[0]||e!==Da[1])ga.depthRange(f,e),Da[0]=f,Da[1]=e;f=K.depth_mask;f!==A.depth_mask&&(ga.depthMask(f),A.depth_mask=f);f=T[0];e=T[1];k=T[2];z=T[3];if(f!==la[0]||e!==la[1]||k!==la[2]||z!==la[3])ga.colorMask(f,e,k,z),la[0]=f,la[1]=e,la[2]=k,la[3]=z;f=K.cull_enable;f!==A.cull_enable&&(f?ga.enable(2884):ga.disable(2884),A.cull_enable=
f);f=K.cull_face;f!==A.cull_face&&(ga.cullFace(f),A.cull_face=f);f=K.frontFace;f!==A.frontFace&&(ga.frontFace(f),A.frontFace=f);f=K.lineWidth;f!==A.lineWidth&&(ga.lineWidth(f),A.lineWidth=f);f=K.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?ga.enable(32823):ga.disable(32823),A.polygonOffset_enable=f);f=za[0];e=za[1];if(f!==ha[0]||e!==ha[1])ga.polygonOffset(f,e),ha[0]=f,ha[1]=e;f=K.sample_alpha;f!==A.sample_alpha&&(f?ga.enable(32926):ga.disable(32926),A.sample_alpha=f);f=K.sample_enable;f!==
A.sample_enable&&(f?ga.enable(32928):ga.disable(32928),A.sample_enable=f);f=Ea[0];e=Ea[1];if(f!==ja[0]||e!==ja[1])ga.sampleCoverage(f,e),ja[0]=f,ja[1]=e;f=K.stencil_enable;f!==A.stencil_enable&&(f?ga.enable(2960):ga.disable(2960),A.stencil_enable=f);f=K.stencil_mask;f!==A.stencil_mask&&(ga.stencilMask(f),A.stencil_mask=f);f=Ia[0];e=Ia[1];k=Ia[2];if(f!==L[0]||e!==L[1]||k!==L[2])ga.stencilFunc(f,e,k),L[0]=f,L[1]=e,L[2]=k;f=v[0];e=v[1];k=v[2];z=v[3];if(f!==r[0]||e!==r[1]||k!==r[2]||z!==r[3])ga.stencilOpSeparate(f,
e,k,z),r[0]=f,r[1]=e,r[2]=k,r[3]=z;f=ac[0];e=ac[1];k=ac[2];z=ac[3];if(f!==Ta[0]||e!==Ta[1]||k!==Ta[2]||z!==Ta[3])ga.stencilOpSeparate(f,e,k,z),Ta[0]=f,Ta[1]=e,Ta[2]=k,Ta[3]=z;f=K.scissor_enable;f!==A.scissor_enable&&(f?ga.enable(3089):ga.disable(3089),A.scissor_enable=f);f=pa[0];e=pa[1];k=pa[2];z=pa[3];if(f!==Aa[0]||e!==Aa[1]||k!==Aa[2]||z!==Aa[3])ga.scissor(f,e,k,z),Aa[0]=f,Aa[1]=e,Aa[2]=k,Aa[3]=z;f=N[0];e=N[1];k=N[2];z=N[3];if(f!==ta[0]||e!==ta[1]||k!==ta[2]||z!==ta[3])ga.viewport(f,e,k,z),ta[0]=
f,ta[1]=e,ta[2]=k,ta[3]=z;A.dirty=!1}if(f=A.profile)q=performance.now(),M.count++;ga.useProgram(m.program);P.setVAO(null);e=da.location;k=a[e];k.buffer||ga.enableVertexAttribArray(e);if(5126!==k.type||4!==k.size||k.buffer!==g||!1!==k.normalized||0!==k.offset||44!==k.stride)ga.bindBuffer(34962,g.buffer),ga.vertexAttribPointer(e,4,5126,!1,44,0),k.type=5126,k.size=4,k.buffer=g,k.normalized=!1,k.offset=0,k.stride=44;e=C.location;k=a[e];k.buffer||ga.enableVertexAttribArray(e);if(5126!==k.type||4!==k.size||
k.buffer!==h||!1!==k.normalized||16!==k.offset||44!==k.stride)ga.bindBuffer(34962,h.buffer),ga.vertexAttribPointer(e,4,5126,!1,44,16),k.type=5126,k.size=4,k.buffer=h,k.normalized=!1,k.offset=16,k.stride=44;e=p.location;k=a[e];k.buffer||ga.enableVertexAttribArray(e);if(5126!==k.type||3!==k.size||k.buffer!==b||!1!==k.normalized||32!==k.offset||44!==k.stride)ga.bindBuffer(34962,b.buffer),ga.vertexAttribPointer(e,3,5126,!1,44,32),k.type=5126,k.size=3,k.buffer=b,k.normalized=!1,k.offset=32,k.stride=44;
e=E.call(this,wa,d,0);"number"!==typeof e&&R.commandRaise(J,D);ga.uniform1f(c.location,e);e=O.call(this,wa,d,0);S(e)&&16===e.length||R.commandRaise(X,D);ga.uniformMatrix4fv(l.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(va[0]=e[0],va[1]=e[1],va[2]=e[2],va[3]=e[3],va[4]=e[4],va[5]=e[5],va[6]=e[6],va[7]=e[7],va[8]=e[8],va[9]=e[9],va[10]=e[10],va[11]=e[11],va[12]=e[12],va[13]=e[13],va[14]=e[14],va[15]=e[15],va));d=x.call(this,wa,d,0);S(d)&&16===d.length||R.commandRaise(u,D);ga.uniformMatrix4fv(B.location,
!1,Array.isArray(d)||d instanceof Float32Array?d:(ia[0]=d[0],ia[1]=d[1],ia[2]=d[2],ia[3]=d[3],ia[4]=d[4],ia[5]=d[5],ia[6]=d[6],ia[7]=d[7],ia[8]=d[8],ia[9]=d[9],ia[10]=d[10],ia[11]=d[11],ia[12]=d[12],ia[13]=d[13],ia[14]=d[14],ia[15]=d[15],ia));(d=ma.elements)?ga.bindBuffer(34963,d.buffer.buffer):P.currentVAO&&(d=U.getElements(P.currentVAO.elements))&&ga.bindBuffer(34963,d.buffer.buffer);e=ma.offset;d?ga.drawElements(0,1E4,d.type,e<<(d.type-5121>>1)):ga.drawArrays(0,e,1E4);P.setVAO(null);f&&(M.cpuTime+=
performance.now()-q)},scope:function(a,c,d){var f,n,l,v,e,r,m,L,N,p,z,B,H,C,G,T,D,ha,K,u,ba,ac,Ia,x,J,P,E,ea,ta,S,Q,R,O,za,qa,X,W,ja,Z,ca,xa,Ta,ga,da,sa;if(f=A.profile)n=performance.now(),M.count++;l=ma.count;ma.count=1E4;v=ma.primitive;ma.primitive=0;e=F.call(this,wa,a,d);r=q[5];q[5]=e;m=Y.call(this,wa,a,d);e=q[3];q[3]=m;L=t.call(this,wa,a,d);m=q[4];q[4]=L;L=V.buffer;V.buffer=b;N=V.divisor;V.divisor=0;p=V.normalized;V.normalized=!1;z=V.offset;V.offset=32;B=V.size;V.size=0;H=V.state;V.state=1;C=V.stride;
V.stride=44;G=V.type;V.type=5126;T=V.w;V.w=0;D=V.x;V.x=0;ha=V.y;V.y=0;K=V.z;V.z=0;u=k.buffer;k.buffer=g;ba=k.divisor;k.divisor=0;ac=k.normalized;k.normalized=!1;Ia=k.offset;k.offset=0;x=k.size;k.size=0;J=k.state;k.state=1;P=k.stride;k.stride=44;E=k.type;k.type=5126;ea=k.w;k.w=0;ta=k.x;k.x=0;S=k.y;k.y=0;Q=k.z;k.z=0;R=w.buffer;w.buffer=h;O=w.divisor;w.divisor=0;za=w.normalized;w.normalized=!1;qa=w.offset;w.offset=16;X=w.size;w.size=0;W=w.state;w.state=1;ja=w.stride;w.stride=44;Z=w.type;w.type=5126;
ca=w.w;w.w=0;xa=w.x;w.x=0;Ta=w.y;w.y=0;ga=w.z;w.z=0;da=y.vert;y.vert=2;sa=y.frag;y.frag=1;c(wa,a,d);f&&(M.cpuTime+=performance.now()-n);ma.count=l;ma.primitive=v;q[5]=r;q[3]=e;q[4]=m;V.buffer=L;V.divisor=N;V.normalized=p;V.offset=z;V.size=B;V.state=H;V.stride=C;V.type=G;V.w=T;V.x=D;V.y=ha;V.z=K;k.buffer=u;k.divisor=ba;k.normalized=ac;k.offset=Ia;k.size=x;k.state=J;k.stride=P;k.type=E;k.w=ea;k.x=ta;k.y=S;k.z=Q;w.buffer=R;w.divisor=O;w.normalized=za;w.offset=qa;w.size=X;w.state=W;w.stride=ja;w.type=
Z;w.w=ca;w.x=xa;w.y=Ta;w.z=ga;y.vert=da;y.frag=sa},batch:function(e,q){var m,k,t;m=Z.next;m!==Z.cur&&(m?ga.bindFramebuffer(36160,m.framebuffer):ga.bindFramebuffer(36160,null),Z.cur=m);if(A.dirty){var y,u,x;m=K.dither;m!==A.dither&&(m?ga.enable(3024):ga.disable(3024),A.dither=m);m=K.blend_enable;m!==A.blend_enable&&(m?ga.enable(3042):ga.disable(3042),A.blend_enable=m);m=Q[0];y=Q[1];u=Q[2];x=Q[3];if(m!==xa[0]||y!==xa[1]||u!==xa[2]||x!==xa[3])ga.blendColor(m,y,u,x),xa[0]=m,xa[1]=y,xa[2]=u,xa[3]=x;m=
oa[0];y=oa[1];if(m!==n[0]||y!==n[1])ga.blendEquationSeparate(m,y),n[0]=m,n[1]=y;m=H[0];y=H[1];u=H[2];x=H[3];if(m!==ea[0]||y!==ea[1]||u!==ea[2]||x!==ea[3])ga.blendFuncSeparate(m,y,u,x),ea[0]=m,ea[1]=y,ea[2]=u,ea[3]=x;m=K.depth_enable;m!==A.depth_enable&&(m?ga.enable(2929):ga.disable(2929),A.depth_enable=m);m=K.depth_func;m!==A.depth_func&&(ga.depthFunc(m),A.depth_func=m);m=qa[0];y=qa[1];if(m!==Da[0]||y!==Da[1])ga.depthRange(m,y),Da[0]=m,Da[1]=y;m=K.depth_mask;m!==A.depth_mask&&(ga.depthMask(m),A.depth_mask=
m);m=T[0];y=T[1];u=T[2];x=T[3];if(m!==la[0]||y!==la[1]||u!==la[2]||x!==la[3])ga.colorMask(m,y,u,x),la[0]=m,la[1]=y,la[2]=u,la[3]=x;m=K.cull_enable;m!==A.cull_enable&&(m?ga.enable(2884):ga.disable(2884),A.cull_enable=m);m=K.cull_face;m!==A.cull_face&&(ga.cullFace(m),A.cull_face=m);m=K.frontFace;m!==A.frontFace&&(ga.frontFace(m),A.frontFace=m);m=K.lineWidth;m!==A.lineWidth&&(ga.lineWidth(m),A.lineWidth=m);m=K.polygonOffset_enable;m!==A.polygonOffset_enable&&(m?ga.enable(32823):ga.disable(32823),A.polygonOffset_enable=
m);m=za[0];y=za[1];if(m!==ha[0]||y!==ha[1])ga.polygonOffset(m,y),ha[0]=m,ha[1]=y;m=K.sample_alpha;m!==A.sample_alpha&&(m?ga.enable(32926):ga.disable(32926),A.sample_alpha=m);m=K.sample_enable;m!==A.sample_enable&&(m?ga.enable(32928):ga.disable(32928),A.sample_enable=m);m=Ea[0];y=Ea[1];if(m!==ja[0]||y!==ja[1])ga.sampleCoverage(m,y),ja[0]=m,ja[1]=y;m=K.stencil_enable;m!==A.stencil_enable&&(m?ga.enable(2960):ga.disable(2960),A.stencil_enable=m);m=K.stencil_mask;m!==A.stencil_mask&&(ga.stencilMask(m),
A.stencil_mask=m);m=Ia[0];y=Ia[1];u=Ia[2];if(m!==L[0]||y!==L[1]||u!==L[2])ga.stencilFunc(m,y,u),L[0]=m,L[1]=y,L[2]=u;m=v[0];y=v[1];u=v[2];x=v[3];if(m!==r[0]||y!==r[1]||u!==r[2]||x!==r[3])ga.stencilOpSeparate(m,y,u,x),r[0]=m,r[1]=y,r[2]=u,r[3]=x;m=ac[0];y=ac[1];u=ac[2];x=ac[3];if(m!==Ta[0]||y!==Ta[1]||u!==Ta[2]||x!==Ta[3])ga.stencilOpSeparate(m,y,u,x),Ta[0]=m,Ta[1]=y,Ta[2]=u,Ta[3]=x;m=K.scissor_enable;m!==A.scissor_enable&&(m?ga.enable(3089):ga.disable(3089),A.scissor_enable=m);m=pa[0];y=pa[1];u=pa[2];
x=pa[3];if(m!==Aa[0]||y!==Aa[1]||u!==Aa[2]||x!==Aa[3])ga.scissor(m,y,u,x),Aa[0]=m,Aa[1]=y,Aa[2]=u,Aa[3]=x;m=N[0];y=N[1];u=N[2];x=N[3];if(m!==ta[0]||y!==ta[1]||u!==ta[2]||x!==ta[3])ga.viewport(m,y,u,x),ta[0]=m,ta[1]=y,ta[2]=u,ta[3]=x;A.dirty=!1}if(m=A.profile)k=performance.now(),M.count+=q;ga.useProgram(sa.program);P.setVAO(null);y=da.location;u=a[y];u.buffer||ga.enableVertexAttribArray(y);if(5126!==u.type||4!==u.size||u.buffer!==g||!1!==u.normalized||0!==u.offset||44!==u.stride)ga.bindBuffer(34962,
g.buffer),ga.vertexAttribPointer(y,4,5126,!1,44,0),u.type=5126,u.size=4,u.buffer=g,u.normalized=!1,u.offset=0,u.stride=44;y=C.location;u=a[y];u.buffer||ga.enableVertexAttribArray(y);if(5126!==u.type||4!==u.size||u.buffer!==h||!1!==u.normalized||16!==u.offset||44!==u.stride)ga.bindBuffer(34962,h.buffer),ga.vertexAttribPointer(y,4,5126,!1,44,16),u.type=5126,u.size=4,u.buffer=h,u.normalized=!1,u.offset=16,u.stride=44;y=p.location;u=a[y];u.buffer||ga.enableVertexAttribArray(y);if(5126!==u.type||3!==u.size||
u.buffer!==b||!1!==u.normalized||32!==u.offset||44!==u.stride)ga.bindBuffer(34962,b.buffer),ga.vertexAttribPointer(y,3,5126,!1,44,32),u.type=5126,u.size=3,u.buffer=b,u.normalized=!1,u.offset=32,u.stride=44;y=d.call(this,wa,void 0,t);"number"!==typeof y&&R.commandRaise(z,D);ga.uniform1f(c.location,y);y=W.call(this,wa,void 0,t);S(y)&&16===y.length||R.commandRaise(f,D);ga.uniformMatrix4fv(l.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(Gb[0]=y[0],Gb[1]=y[1],Gb[2]=y[2],Gb[3]=y[3],Gb[4]=y[4],
Gb[5]=y[5],Gb[6]=y[6],Gb[7]=y[7],Gb[8]=y[8],Gb[9]=y[9],Gb[10]=y[10],Gb[11]=y[11],Gb[12]=y[12],Gb[13]=y[13],Gb[14]=y[14],Gb[15]=y[15],Gb));t=ca.call(this,wa,void 0,t);S(t)&&16===t.length||R.commandRaise(G,D);ga.uniformMatrix4fv(B.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(ba[0]=t[0],ba[1]=t[1],ba[2]=t[2],ba[3]=t[3],ba[4]=t[4],ba[5]=t[5],ba[6]=t[6],ba[7]=t[7],ba[8]=t[8],ba[9]=t[9],ba[10]=t[10],ba[11]=t[11],ba[12]=t[12],ba[13]=t[13],ba[14]=t[14],ba[15]=t[15],ba));(y=ma.elements)?ga.bindBuffer(34963,
y.buffer.buffer):P.currentVAO&&(y=U.getElements(P.currentVAO.elements))&&ga.bindBuffer(34963,y.buffer.buffer);u=ma.offset;for(t=0;t<q;++t)y?ga.drawElements(0,1E4,y.type,u<<(y.type-5121>>1)):ga.drawArrays(0,u,1E4);P.setVAO(null);m&&(M.cpuTime+=performance.now()-k)}}},"$34,atlas,normal,position,projection,uv,view":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z,ga,S){var K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,ia,Gb,ba,I,
ra,Ga,na,ya,Ca,ka,aa,ua,Ka,Fa;K=e.attributes;y=e.buffer;q=e.context;P=e.current;Q=e.draw;xa=e.elements;oa=e.framebuffer;n=e.gl;H=e.isArrayLike;ea=e.isBufferArgs;T=e.next;la=e.shader;qa=e.uniforms;Da=e.vao;za=T.blend_color;ha=P.blend_color;Ea=T.blend_equation;ja=P.blend_equation;pa=T.blend_func;Aa=P.blend_func;Ia=T.colorMask;L=P.colorMask;ac=T.depth_range;Ta=P.depth_range;v=T.polygonOffset_offset;r=P.polygonOffset_offset;N=T.sample_coverage;ta=P.sample_coverage;va=T.scissor_box;ia=P.scissor_box;Gb=
T.stencil_func;ba=P.stencil_func;I=T.stencil_opBack;ra=P.stencil_opBack;Ga=T.stencil_opFront;na=P.stencil_opFront;ya=T.viewport;Ca=P.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa=new Float32Array(16);ua=new Float32Array(16);Ka=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(a){var c,d,f,l,e,k,p,z,t,B,C,G,w,Q,V,qa,W,Y,ca,da,sa,la,wa,Fa,Ka,Ba,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,
pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb;c=q.view;d=m.call(this,q,a,0);q.view=d;f=oa.next;f!==oa.cur&&(f?n.bindFramebuffer(36160,f.framebuffer):n.bindFramebuffer(36160,null),oa.cur=f);if(P.dirty){var Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb;Va=T.dither;Va!==P.dither&&(Va?n.enable(3024):n.disable(3024),P.dither=Va);Tc=T.blend_enable;Tc!==P.blend_enable&&(Tc?n.enable(3042):n.disable(3042),P.blend_enable=
Tc);Hb=za[0];Ib=za[1];qc=za[2];Nb=za[3];if(Hb!==ha[0]||Ib!==ha[1]||qc!==ha[2]||Nb!==ha[3])n.blendColor(Hb,Ib,qc,Nb),ha[0]=Hb,ha[1]=Ib,ha[2]=qc,ha[3]=Nb;jb=Ea[0];Fb=Ea[1];if(jb!==ja[0]||Fb!==ja[1])n.blendEquationSeparate(jb,Fb),ja[0]=jb,ja[1]=Fb;Cb=pa[0];vb=pa[1];hb=pa[2];Xb=pa[3];if(Cb!==Aa[0]||vb!==Aa[1]||hb!==Aa[2]||Xb!==Aa[3])n.blendFuncSeparate(Cb,vb,hb,Xb),Aa[0]=Cb,Aa[1]=vb,Aa[2]=hb,Aa[3]=Xb;Ob=T.depth_enable;Ob!==P.depth_enable&&(Ob?n.enable(2929):n.disable(2929),P.depth_enable=Ob);pb=T.depth_func;
pb!==P.depth_func&&(n.depthFunc(pb),P.depth_func=pb);Ua=ac[0];Tb=ac[1];if(Ua!==Ta[0]||Tb!==Ta[1])n.depthRange(Ua,Tb),Ta[0]=Ua,Ta[1]=Tb;yb=T.depth_mask;yb!==P.depth_mask&&(n.depthMask(yb),P.depth_mask=yb);bc=Ia[0];ib=Ia[1];ob=Ia[2];Ja=Ia[3];if(bc!==L[0]||ib!==L[1]||ob!==L[2]||Ja!==L[3])n.colorMask(bc,ib,ob,Ja),L[0]=bc,L[1]=ib,L[2]=ob,L[3]=Ja;qb=T.frontFace;qb!==P.frontFace&&(n.frontFace(qb),P.frontFace=qb);La=T.lineWidth;La!==P.lineWidth&&(n.lineWidth(La),P.lineWidth=La);eb=T.polygonOffset_enable;
eb!==P.polygonOffset_enable&&(eb?n.enable(32823):n.disable(32823),P.polygonOffset_enable=eb);fb=v[0];Ma=v[1];if(fb!==r[0]||Ma!==r[1])n.polygonOffset(fb,Ma),r[0]=fb,r[1]=Ma;kb=T.sample_alpha;kb!==P.sample_alpha&&(kb?n.enable(32926):n.disable(32926),P.sample_alpha=kb);Wa=T.sample_enable;Wa!==P.sample_enable&&(Wa?n.enable(32928):n.disable(32928),P.sample_enable=Wa);sb=N[0];rb=N[1];if(sb!==ta[0]||rb!==ta[1])n.sampleCoverage(sb,rb),ta[0]=sb,ta[1]=rb;Pa=T.stencil_enable;Pa!==P.stencil_enable&&(Pa?n.enable(2960):
n.disable(2960),P.stencil_enable=Pa);Bc=T.stencil_mask;Bc!==P.stencil_mask&&(n.stencilMask(Bc),P.stencil_mask=Bc);Ra=Gb[0];Jb=Gb[1];Db=Gb[2];if(Ra!==ba[0]||Jb!==ba[1]||Db!==ba[2])n.stencilFunc(Ra,Jb,Db),ba[0]=Ra,ba[1]=Jb,ba[2]=Db;Na=Ga[0];Jd=Ga[1];Ya=Ga[2];Kb=Ga[3];if(Na!==na[0]||Jd!==na[1]||Ya!==na[2]||Kb!==na[3])n.stencilOpSeparate(Na,Jd,Ya,Kb),na[0]=Na,na[1]=Jd,na[2]=Ya,na[3]=Kb;Lb=I[0];lb=I[1];Oa=I[2];Yb=I[3];if(Lb!==ra[0]||lb!==ra[1]||Oa!==ra[2]||Yb!==ra[3])n.stencilOpSeparate(Lb,lb,Oa,Yb),ra[0]=
Lb,ra[1]=lb,ra[2]=Oa,ra[3]=Yb;Qa=T.scissor_enable;Qa!==P.scissor_enable&&(Qa?n.enable(3089):n.disable(3089),P.scissor_enable=Qa);tb=va[0];ub=va[1];Sa=va[2];mb=va[3];if(tb!==ia[0]||ub!==ia[1]||Sa!==ia[2]||mb!==ia[3])n.scissor(tb,ub,Sa,mb),ia[0]=tb,ia[1]=ub,ia[2]=Sa,ia[3]=mb;gc=ya[0];zc=ya[1];uc=ya[2];bb=ya[3];if(gc!==Ca[0]||zc!==Ca[1]||uc!==Ca[2]||bb!==Ca[3])n.viewport(gc,zc,uc,bb),Ca[0]=gc,Ca[1]=zc,Ca[2]=uc,Ca[3]=bb}n.enable(2884);P.cull_enable=!0;n.cullFace(1029);P.cull_face=1029;if(l=P.profile)e=
performance.now(),M.count++;n.useProgram(g.program);Da.setVAO(null);(k=a.position)&&("object"===typeof k||"function"===typeof k)&&(ea(k)||y.getBuffer(k)||y.getBuffer(k.buffer)||ea(k.buffer)||"constant"in k&&("number"===typeof k.constant||H(k.constant)))||R.commandRaise(h,D);p=!1;z=null;t=!1;C=B=0;G=1;w=0;Q=5126;Y=W=qa=V=0;ea(k)?(p=!0,z=y.createStream(34962,k),Q=z.dtype):(z=y.getBuffer(k))?Q=z.dtype:"constant"in k?(G=2,"number"===typeof k.constant?(qa=k.constant,W=Y=V=0):(qa=0<k.constant.length?k.constant[0]:
0,W=1<k.constant.length?k.constant[1]:0,Y=2<k.constant.length?k.constant[2]:0,V=3<k.constant.length?k.constant[3]:0)):(z=ea(k.buffer)?y.createStream(34962,k.buffer):y.getBuffer(k.buffer),Q="type"in k?ka[k.type]:z.dtype,t=!!k.normalized,C=k.size|0,B=k.offset|0,w=k.stride|0);ca=U.location;da=K[ca];if(1===G){if(da.buffer||n.enableVertexAttribArray(ca),sa=C||3,da.type!==Q||da.size!==sa||da.buffer!==z||da.normalized!==t||da.offset!==B||da.stride!==w)n.bindBuffer(34962,z.buffer),n.vertexAttribPointer(ca,
sa,Q,t,w,B),da.type=Q,da.size=sa,da.buffer=z,da.normalized=t,da.offset=B,da.stride=w}else if(da.buffer&&(n.disableVertexAttribArray(ca),da.buffer=null),da.x!==qa||da.y!==W||da.z!==Y||da.w!==V)n.vertexAttrib4f(ca,qa,W,Y,V),da.x=qa,da.y=W,da.z=Y,da.w=V;(la=a.normal)&&("object"===typeof la||"function"===typeof la)&&(ea(la)||y.getBuffer(la)||y.getBuffer(la.buffer)||ea(la.buffer)||"constant"in la&&("number"===typeof la.constant||H(la.constant)))||R.commandRaise(b,D);wa=!1;Fa=null;Ka=!1;Wd=Ba=0;Ld=1;md=
0;$c=5126;Ec=pd=Kc=sd=0;ea(la)?(wa=!0,Fa=y.createStream(34962,la),$c=Fa.dtype):(Fa=y.getBuffer(la))?$c=Fa.dtype:"constant"in la?(Ld=2,"number"===typeof la.constant?(Kc=la.constant,pd=Ec=sd=0):(Kc=0<la.constant.length?la.constant[0]:0,pd=1<la.constant.length?la.constant[1]:0,Ec=2<la.constant.length?la.constant[2]:0,sd=3<la.constant.length?la.constant[3]:0)):(Fa=ea(la.buffer)?y.createStream(34962,la.buffer):y.getBuffer(la.buffer),$c="type"in la?ka[la.type]:Fa.dtype,Ka=!!la.normalized,Wd=la.size|0,Ba=
la.offset|0,md=la.stride|0);ed=ma.location;Oc=K[ed];if(1===Ld){if(Oc.buffer||n.enableVertexAttribArray(ed),ld=Wd||3,Oc.type!==$c||Oc.size!==ld||Oc.buffer!==Fa||Oc.normalized!==Ka||Oc.offset!==Ba||Oc.stride!==md)n.bindBuffer(34962,Fa.buffer),n.vertexAttribPointer(ed,ld,$c,Ka,md,Ba),Oc.type=$c,Oc.size=ld,Oc.buffer=Fa,Oc.normalized=Ka,Oc.offset=Ba,Oc.stride=md}else if(Oc.buffer&&(n.disableVertexAttribArray(ed),Oc.buffer=null),Oc.x!==Kc||Oc.y!==pd||Oc.z!==Ec||Oc.w!==sd)n.vertexAttrib4f(ed,Kc,pd,Ec,sd),
Oc.x=Kc,Oc.y=pd,Oc.z=Ec,Oc.w=sd;(Ab=a.uv)&&("object"===typeof Ab||"function"===typeof Ab)&&(ea(Ab)||y.getBuffer(Ab)||y.getBuffer(Ab.buffer)||ea(Ab.buffer)||"constant"in Ab&&("number"===typeof Ab.constant||H(Ab.constant)))||R.commandRaise(E,D);Eb=!1;tc=null;wb=!1;Bb=wc=0;Ic=1;lc=0;Fc=5126;ec=Cc=Vc=Wc=0;ea(Ab)?(Eb=!0,tc=y.createStream(34962,Ab),Fc=tc.dtype):(tc=y.getBuffer(Ab))?Fc=tc.dtype:"constant"in Ab?(Ic=2,"number"===typeof Ab.constant?(Vc=Ab.constant,Cc=ec=Wc=0):(Vc=0<Ab.constant.length?Ab.constant[0]:
0,Cc=1<Ab.constant.length?Ab.constant[1]:0,ec=2<Ab.constant.length?Ab.constant[2]:0,Wc=3<Ab.constant.length?Ab.constant[3]:0)):(tc=ea(Ab.buffer)?y.createStream(34962,Ab.buffer):y.getBuffer(Ab.buffer),Fc="type"in Ab?ka[Ab.type]:tc.dtype,wb=!!Ab.normalized,Bb=Ab.size|0,wc=Ab.offset|0,lc=Ab.stride|0);Gc=ga.location;oc=K[Gc];if(1===Ic){if(oc.buffer||n.enableVertexAttribArray(Gc),pc=Bb||2,oc.type!==Fc||oc.size!==pc||oc.buffer!==tc||oc.normalized!==wb||oc.offset!==wc||oc.stride!==lc)n.bindBuffer(34962,
tc.buffer),n.vertexAttribPointer(Gc,pc,Fc,wb,lc,wc),oc.type=Fc,oc.size=pc,oc.buffer=tc,oc.normalized=wb,oc.offset=wc,oc.stride=lc}else if(oc.buffer&&(n.disableVertexAttribArray(Gc),oc.buffer=null),oc.x!==Vc||oc.y!==Cc||oc.z!==ec||oc.w!==Wc)n.vertexAttrib4f(Gc,Vc,Cc,ec,Wc),oc.x=Vc,oc.y=Cc,oc.z=ec,oc.w=Wc;mc=J.call(this,q,a,0);H(mc)&&16===mc.length||R.commandRaise(O,D);n.uniformMatrix4fv(Z.location,!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(aa[0]=mc[0],aa[1]=mc[1],aa[2]=mc[2],aa[3]=mc[3],
aa[4]=mc[4],aa[5]=mc[5],aa[6]=mc[6],aa[7]=mc[7],aa[8]=mc[8],aa[9]=mc[9],aa[10]=mc[10],aa[11]=mc[11],aa[12]=mc[12],aa[13]=mc[13],aa[14]=mc[14],aa[15]=mc[15],aa));fc=q.view;H(fc)&&16===fc.length||R.commandRaise(X,D);n.uniformMatrix4fv(S.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(ua[0]=fc[0],ua[1]=fc[1],ua[2]=fc[2],ua[3]=fc[3],ua[4]=fc[4],ua[5]=fc[5],ua[6]=fc[6],ua[7]=fc[7],ua[8]=fc[8],ua[9]=fc[9],ua[10]=fc[10],ua[11]=fc[11],ua[12]=fc[12],ua[13]=fc[13],ua[14]=fc[14],ua[15]=fc[15],
ua));($a=a.atlas)&&"framebuffer"===$a._reglType&&($a=$a.color[0]);"function"===typeof $a&&"texture2d"===$a._reglType||R.commandRaise(x,D);Hc=$a._texture;n.uniform1i(A.location,Hc.bind());xb=a.elements;cb=null;(Mb=ea(xb))?cb=xa.createStream(xb):(cb=xa.getElements(xb),xb&&!cb&&R.commandRaise(u,D));cb&&n.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;nb=cb?cb.vertCount:-1;0<=nb||R.commandRaise(F,D);nb&&(cb?n.drawElements(ab,nb,cb.type,0<<(cb.type-5121>>1)):n.drawArrays(ab,0,nb),P.dirty=!0,Da.setVAO(null),
q.view=c,l&&(M.cpuTime+=performance.now()-e),p&&y.destroyStream(z),wa&&y.destroyStream(Fa),Eb&&y.destroyStream(tc),Hc.unbind(),Mb&&xa.destroyStream(cb))},scope:function(a,c,b){var f,g,n,h,l,v,e,m,r,I,L,N,p,A,B,u,C,G,ha,x,K,ba,ac,Ia,J,ra,F,E,Ga,ta,na,S,aa,O,za,X,ja,Z,ca,da,Ta,ga,ya,pa,Ea,Aa,wa,va,ma,Ca,Da,U,Gb,oa,ia,ua,Fa,Ka,hd,dd,Va,Ba,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb;f=q.view;g=Y.call(this,q,a,b);q.view=g;n=T.cull_enable;
T.cull_enable=!0;h=T.cull_face;T.cull_face=1029;if(l=P.profile)v=performance.now(),M.count++;e=a.elements;m=null;(r=ea(e))?m=xa.createStream(e):(m=xa.getElements(e),e&&!m&&R.commandRaise(t,D));I=Q.elements;Q.elements=m;L=Q.offset;Q.offset=0;N=m?m.vertCount:-1;p=Q.count;Q.count=N;A=m?m.primType:4;B=Q.primitive;Q.primitive=A;u=a.atlas;C=qa[5];qa[5]=u;G=V.call(this,q,a,b);ha=qa[3];qa[3]=G;x=q.view;K=qa[4];qa[4]=x;(ba=a.normal)&&("object"===typeof ba||"function"===typeof ba)&&(ea(ba)||y.getBuffer(ba)||
y.getBuffer(ba.buffer)||ea(ba.buffer)||"constant"in ba&&("number"===typeof ba.constant||H(ba.constant)))||R.commandRaise(k,D);ac=!1;Ia=null;J=0;ra=!1;E=F=0;Ga=1;ta=0;na=5126;za=O=aa=S=0;ea(ba)?(ac=!0,Ia=y.createStream(34962,ba),na=Ia.dtype):(Ia=y.getBuffer(ba))?na=Ia.dtype:"constant"in ba?(Ga=2,"number"===typeof ba.constant?(aa=ba.constant,O=za=S=0):(aa=0<ba.constant.length?ba.constant[0]:0,O=1<ba.constant.length?ba.constant[1]:0,za=2<ba.constant.length?ba.constant[2]:0,S=3<ba.constant.length?ba.constant[3]:
0)):(Ia=ea(ba.buffer)?y.createStream(34962,ba.buffer):y.getBuffer(ba.buffer),na="type"in ba?ka[ba.type]:Ia.dtype,ra=!!ba.normalized,E=ba.size|0,F=ba.offset|0,ta=ba.stride|0,J=ba.divisor|0);X=w.buffer;w.buffer=Ia;ja=w.divisor;w.divisor=J;Z=w.normalized;w.normalized=ra;ca=w.offset;w.offset=F;da=w.size;w.size=E;Ta=w.state;w.state=Ga;ga=w.stride;w.stride=ta;ya=w.type;w.type=na;pa=w.w;w.w=S;Ea=w.x;w.x=aa;Aa=w.y;w.y=O;wa=w.z;w.z=za;(va=a.position)&&("object"===typeof va||"function"===typeof va)&&(ea(va)||
y.getBuffer(va)||y.getBuffer(va.buffer)||ea(va.buffer)||"constant"in va&&("number"===typeof va.constant||H(va.constant)))||R.commandRaise(sa,D);ma=!1;Ca=null;Da=0;U=!1;oa=Gb=0;ia=1;ua=0;Fa=5126;Va=dd=hd=Ka=0;ea(va)?(ma=!0,Ca=y.createStream(34962,va),Fa=Ca.dtype):(Ca=y.getBuffer(va))?Fa=Ca.dtype:"constant"in va?(ia=2,"number"===typeof va.constant?(hd=va.constant,dd=Va=Ka=0):(hd=0<va.constant.length?va.constant[0]:0,dd=1<va.constant.length?va.constant[1]:0,Va=2<va.constant.length?va.constant[2]:0,Ka=
3<va.constant.length?va.constant[3]:0)):(Ca=ea(va.buffer)?y.createStream(34962,va.buffer):y.getBuffer(va.buffer),Fa="type"in va?ka[va.type]:Ca.dtype,U=!!va.normalized,oa=va.size|0,Gb=va.offset|0,ua=va.stride|0,Da=va.divisor|0);Ba=d.buffer;d.buffer=Ca;Hb=d.divisor;d.divisor=Da;Ib=d.normalized;d.normalized=U;qc=d.offset;d.offset=Gb;Nb=d.size;d.size=oa;jb=d.state;d.state=ia;Fb=d.stride;d.stride=ua;Cb=d.type;d.type=Fa;vb=d.w;d.w=Ka;hb=d.x;d.x=hd;Xb=d.y;d.y=dd;Ob=d.z;d.z=Va;(pb=a.uv)&&("object"===typeof pb||
"function"===typeof pb)&&(ea(pb)||y.getBuffer(pb)||y.getBuffer(pb.buffer)||ea(pb.buffer)||"constant"in pb&&("number"===typeof pb.constant||H(pb.constant)))||R.commandRaise(z,D);Ua=!1;Tb=null;yb=0;bc=!1;ob=ib=0;Ja=1;qb=0;La=5126;kb=Ma=fb=eb=0;ea(pb)?(Ua=!0,Tb=y.createStream(34962,pb),La=Tb.dtype):(Tb=y.getBuffer(pb))?La=Tb.dtype:"constant"in pb?(Ja=2,"number"===typeof pb.constant?(fb=pb.constant,Ma=kb=eb=0):(fb=0<pb.constant.length?pb.constant[0]:0,Ma=1<pb.constant.length?pb.constant[1]:0,kb=2<pb.constant.length?
pb.constant[2]:0,eb=3<pb.constant.length?pb.constant[3]:0)):(Tb=ea(pb.buffer)?y.createStream(34962,pb.buffer):y.getBuffer(pb.buffer),La="type"in pb?ka[pb.type]:Tb.dtype,bc=!!pb.normalized,ob=pb.size|0,ib=pb.offset|0,qb=pb.stride|0,yb=pb.divisor|0);Wa=W.buffer;W.buffer=Tb;sb=W.divisor;W.divisor=yb;rb=W.normalized;W.normalized=bc;Pa=W.offset;W.offset=ib;Bc=W.size;W.size=ob;Ra=W.state;W.state=Ja;Jb=W.stride;W.stride=qb;Db=W.type;W.type=La;Na=W.w;W.w=eb;Jd=W.x;W.x=fb;Ya=W.y;W.y=Ma;Kb=W.z;W.z=kb;Lb=la.vert;
la.vert=2;lb=la.frag;la.frag=1;P.dirty=!0;c(q,a,b);q.view=f;T.cull_enable=n;T.cull_face=h;l&&(M.cpuTime+=performance.now()-v);r&&xa.destroyStream(m);Q.elements=I;Q.offset=L;Q.count=p;Q.primitive=B;qa[5]=C;qa[3]=ha;qa[4]=K;ac&&y.destroyStream(Ia);w.buffer=X;w.divisor=ja;w.normalized=Z;w.offset=ca;w.size=da;w.state=Ta;w.stride=ga;w.type=ya;w.w=pa;w.x=Ea;w.y=Aa;w.z=wa;ma&&y.destroyStream(Ca);d.buffer=Ba;d.divisor=Hb;d.normalized=Ib;d.offset=qc;d.size=Nb;d.state=jb;d.stride=Fb;d.type=Cb;d.w=vb;d.x=hb;
d.y=Xb;d.z=Ob;Ua&&y.destroyStream(Tb);W.buffer=Wa;W.divisor=sb;W.normalized=rb;W.offset=Pa;W.size=Bc;W.state=Ra;W.stride=Jb;W.type=Db;W.w=Na;W.x=Jd;W.y=Ya;W.z=Kb;la.vert=Lb;la.frag=lb;P.dirty=!0},batch:function(b,d){var g,h,e,m,k,z,t;g=q.view;h=f.call(this,q,b,0);q.view=h;e=oa.next;e!==oa.cur&&(e?n.bindFramebuffer(36160,e.framebuffer):n.bindFramebuffer(36160,null),oa.cur=e);if(P.dirty){var u,x,J,F,w,E,Q,aa,O,V,qa,W,X,Y,la,sa,ua,Ba,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,
Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb;u=T.dither;u!==P.dither&&(u?n.enable(3024):n.disable(3024),P.dither=u);x=T.blend_enable;x!==P.blend_enable&&(x?n.enable(3042):n.disable(3042),P.blend_enable=x);J=za[0];F=za[1];w=za[2];E=za[3];if(J!==ha[0]||F!==ha[1]||w!==ha[2]||E!==ha[3])n.blendColor(J,F,w,E),ha[0]=J,ha[1]=F,ha[2]=w,ha[3]=E;Q=Ea[0];aa=Ea[1];if(Q!==ja[0]||aa!==ja[1])n.blendEquationSeparate(Q,aa),ja[0]=Q,ja[1]=aa;O=pa[0];V=pa[1];qa=pa[2];W=pa[3];if(O!==Aa[0]||V!==Aa[1]||qa!==Aa[2]||W!==Aa[3])n.blendFuncSeparate(O,
V,qa,W),Aa[0]=O,Aa[1]=V,Aa[2]=qa,Aa[3]=W;X=T.depth_enable;X!==P.depth_enable&&(X?n.enable(2929):n.disable(2929),P.depth_enable=X);Y=T.depth_func;Y!==P.depth_func&&(n.depthFunc(Y),P.depth_func=Y);la=ac[0];sa=ac[1];if(la!==Ta[0]||sa!==Ta[1])n.depthRange(la,sa),Ta[0]=la,Ta[1]=sa;ua=T.depth_mask;ua!==P.depth_mask&&(n.depthMask(ua),P.depth_mask=ua);Ba=Ia[0];Wd=Ia[1];Ld=Ia[2];md=Ia[3];if(Ba!==L[0]||Wd!==L[1]||Ld!==L[2]||md!==L[3])n.colorMask(Ba,Wd,Ld,md),L[0]=Ba,L[1]=Wd,L[2]=Ld,L[3]=md;$c=T.frontFace;$c!==
P.frontFace&&(n.frontFace($c),P.frontFace=$c);sd=T.lineWidth;sd!==P.lineWidth&&(n.lineWidth(sd),P.lineWidth=sd);Kc=T.polygonOffset_enable;Kc!==P.polygonOffset_enable&&(Kc?n.enable(32823):n.disable(32823),P.polygonOffset_enable=Kc);pd=v[0];Ec=v[1];if(pd!==r[0]||Ec!==r[1])n.polygonOffset(pd,Ec),r[0]=pd,r[1]=Ec;ed=T.sample_alpha;ed!==P.sample_alpha&&(ed?n.enable(32926):n.disable(32926),P.sample_alpha=ed);Oc=T.sample_enable;Oc!==P.sample_enable&&(Oc?n.enable(32928):n.disable(32928),P.sample_enable=Oc);
ld=N[0];Ab=N[1];if(ld!==ta[0]||Ab!==ta[1])n.sampleCoverage(ld,Ab),ta[0]=ld,ta[1]=Ab;Eb=T.stencil_enable;Eb!==P.stencil_enable&&(Eb?n.enable(2960):n.disable(2960),P.stencil_enable=Eb);tc=T.stencil_mask;tc!==P.stencil_mask&&(n.stencilMask(tc),P.stencil_mask=tc);wb=Gb[0];wc=Gb[1];Bb=Gb[2];if(wb!==ba[0]||wc!==ba[1]||Bb!==ba[2])n.stencilFunc(wb,wc,Bb),ba[0]=wb,ba[1]=wc,ba[2]=Bb;Ic=Ga[0];lc=Ga[1];Fc=Ga[2];Wc=Ga[3];if(Ic!==na[0]||lc!==na[1]||Fc!==na[2]||Wc!==na[3])n.stencilOpSeparate(Ic,lc,Fc,Wc),na[0]=
Ic,na[1]=lc,na[2]=Fc,na[3]=Wc;Vc=I[0];Cc=I[1];ec=I[2];Gc=I[3];if(Vc!==ra[0]||Cc!==ra[1]||ec!==ra[2]||Gc!==ra[3])n.stencilOpSeparate(Vc,Cc,ec,Gc),ra[0]=Vc,ra[1]=Cc,ra[2]=ec,ra[3]=Gc;oc=T.scissor_enable;oc!==P.scissor_enable&&(oc?n.enable(3089):n.disable(3089),P.scissor_enable=oc);pc=va[0];mc=va[1];fc=va[2];$a=va[3];if(pc!==ia[0]||mc!==ia[1]||fc!==ia[2]||$a!==ia[3])n.scissor(pc,mc,fc,$a),ia[0]=pc,ia[1]=mc,ia[2]=fc,ia[3]=$a;Hc=ya[0];xb=ya[1];cb=ya[2];Mb=ya[3];if(Hc!==Ca[0]||xb!==Ca[1]||cb!==Ca[2]||Mb!==
Ca[3])n.viewport(Hc,xb,cb,Mb),Ca[0]=Hc,Ca[1]=xb,Ca[2]=cb,Ca[3]=Mb}n.enable(2884);P.cull_enable=!0;n.cullFace(1029);P.cull_face=1029;if(m=P.profile)k=performance.now(),M.count+=d;n.useProgram(ca.program);var ab,nb;Da.setVAO(null);ab=C.call(this,q,t,z);H(ab)&&16===ab.length||R.commandRaise(B,D);n.uniformMatrix4fv(Z.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ka[0]=ab[0],Ka[1]=ab[1],Ka[2]=ab[2],Ka[3]=ab[3],Ka[4]=ab[4],Ka[5]=ab[5],Ka[6]=ab[6],Ka[7]=ab[7],Ka[8]=ab[8],Ka[9]=ab[9],Ka[10]=
ab[10],Ka[11]=ab[11],Ka[12]=ab[12],Ka[13]=ab[13],Ka[14]=ab[14],Ka[15]=ab[15],Ka));nb=q.view;H(nb)&&16===nb.length||R.commandRaise(c,D);n.uniformMatrix4fv(S.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(Fa[0]=nb[0],Fa[1]=nb[1],Fa[2]=nb[2],Fa[3]=nb[3],Fa[4]=nb[4],Fa[5]=nb[5],Fa[6]=nb[6],Fa[7]=nb[7],Fa[8]=nb[8],Fa[9]=nb[9],Fa[10]=nb[10],Fa[11]=nb[11],Fa[12]=nb[12],Fa[13]=nb[13],Fa[14]=nb[14],Fa[15]=nb[15],Fa));for(z=0;z<d;++z){t=b[z];var Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,
yb,bc,ib,ob,Ja,qb,La,eb,fb,Ma,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa;(Va=t.position)&&("object"===typeof Va||"function"===typeof Va)&&(ea(Va)||y.getBuffer(Va)||y.getBuffer(Va.buffer)||ea(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||H(Va.constant)))||R.commandRaise(G,D);Tc=!1;Hb=null;Ib=!1;Nb=qc=0;jb=1;Fb=0;Cb=5126;Ob=Xb=hb=vb=0;ea(Va)?(Tc=!0,Hb=y.createStream(34962,Va),Cb=Hb.dtype):(Hb=y.getBuffer(Va))?Cb=Hb.dtype:"constant"in Va?(jb=
2,"number"===typeof Va.constant?(hb=Va.constant,Xb=Ob=vb=0):(hb=0<Va.constant.length?Va.constant[0]:0,Xb=1<Va.constant.length?Va.constant[1]:0,Ob=2<Va.constant.length?Va.constant[2]:0,vb=3<Va.constant.length?Va.constant[3]:0)):(Hb=ea(Va.buffer)?y.createStream(34962,Va.buffer):y.getBuffer(Va.buffer),Cb="type"in Va?ka[Va.type]:Hb.dtype,Ib=!!Va.normalized,Nb=Va.size|0,qc=Va.offset|0,Fb=Va.stride|0);pb=U.location;Ua=K[pb];if(1===jb){if(Ua.buffer||n.enableVertexAttribArray(pb),Tb=Nb||3,Ua.type!==Cb||Ua.size!==
Tb||Ua.buffer!==Hb||Ua.normalized!==Ib||Ua.offset!==qc||Ua.stride!==Fb)n.bindBuffer(34962,Hb.buffer),n.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=Tb,Ua.buffer=Hb,Ua.normalized=Ib,Ua.offset=qc,Ua.stride=Fb}else if(Ua.buffer&&(n.disableVertexAttribArray(pb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Xb||Ua.z!==Ob||Ua.w!==vb)n.vertexAttrib4f(pb,hb,Xb,Ob,vb),Ua.x=hb,Ua.y=Xb,Ua.z=Ob,Ua.w=vb;(yb=t.normal)&&("object"===typeof yb||"function"===typeof yb)&&(ea(yb)||y.getBuffer(yb)||y.getBuffer(yb.buffer)||
ea(yb.buffer)||"constant"in yb&&("number"===typeof yb.constant||H(yb.constant)))||R.commandRaise(p,D);bc=!1;ib=null;ob=!1;qb=Ja=0;La=1;eb=0;fb=5126;sb=Wa=kb=Ma=0;ea(yb)?(bc=!0,ib=y.createStream(34962,yb),fb=ib.dtype):(ib=y.getBuffer(yb))?fb=ib.dtype:"constant"in yb?(La=2,"number"===typeof yb.constant?(kb=yb.constant,Wa=sb=Ma=0):(kb=0<yb.constant.length?yb.constant[0]:0,Wa=1<yb.constant.length?yb.constant[1]:0,sb=2<yb.constant.length?yb.constant[2]:0,Ma=3<yb.constant.length?yb.constant[3]:0)):(ib=
ea(yb.buffer)?y.createStream(34962,yb.buffer):y.getBuffer(yb.buffer),fb="type"in yb?ka[yb.type]:ib.dtype,ob=!!yb.normalized,qb=yb.size|0,Ja=yb.offset|0,eb=yb.stride|0);rb=ma.location;Pa=K[rb];if(1===La){if(Pa.buffer||n.enableVertexAttribArray(rb),Bc=qb||3,Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==ib||Pa.normalized!==ob||Pa.offset!==Ja||Pa.stride!==eb)n.bindBuffer(34962,ib.buffer),n.vertexAttribPointer(rb,Bc,fb,ob,eb,Ja),Pa.type=fb,Pa.size=Bc,Pa.buffer=ib,Pa.normalized=ob,Pa.offset=Ja,Pa.stride=eb}else if(Pa.buffer&&
(n.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==Ma)n.vertexAttrib4f(rb,kb,Wa,sb,Ma),Pa.x=kb,Pa.y=Wa,Pa.z=sb,Pa.w=Ma;(Ra=t.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(ea(Ra)||y.getBuffer(Ra)||y.getBuffer(Ra.buffer)||ea(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||H(Ra.constant)))||R.commandRaise(da,D);Jb=!1;Db=null;Na=!1;Ya=Jd=0;Kb=1;Lb=0;lb=5126;tb=Qa=Yb=Oa=0;ea(Ra)?(Jb=!0,Db=y.createStream(34962,Ra),lb=Db.dtype):(Db=y.getBuffer(Ra))?
lb=Db.dtype:"constant"in Ra?(Kb=2,"number"===typeof Ra.constant?(Yb=Ra.constant,Qa=tb=Oa=0):(Yb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,tb=2<Ra.constant.length?Ra.constant[2]:0,Oa=3<Ra.constant.length?Ra.constant[3]:0)):(Db=ea(Ra.buffer)?y.createStream(34962,Ra.buffer):y.getBuffer(Ra.buffer),lb="type"in Ra?ka[Ra.type]:Db.dtype,Na=!!Ra.normalized,Ya=Ra.size|0,Jd=Ra.offset|0,Lb=Ra.stride|0);ub=ga.location;Sa=K[ub];if(1===Kb){if(Sa.buffer||n.enableVertexAttribArray(ub),
mb=Ya||2,Sa.type!==lb||Sa.size!==mb||Sa.buffer!==Db||Sa.normalized!==Na||Sa.offset!==Jd||Sa.stride!==Lb)n.bindBuffer(34962,Db.buffer),n.vertexAttribPointer(ub,mb,lb,Na,Lb,Jd),Sa.type=lb,Sa.size=mb,Sa.buffer=Db,Sa.normalized=Na,Sa.offset=Jd,Sa.stride=Lb}else if(Sa.buffer&&(n.disableVertexAttribArray(ub),Sa.buffer=null),Sa.x!==Yb||Sa.y!==Qa||Sa.z!==tb||Sa.w!==Oa)n.vertexAttrib4f(ub,Yb,Qa,tb,Oa),Sa.x=Yb,Sa.y=Qa,Sa.z=tb,Sa.w=Oa;(gc=t.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===
typeof gc&&"texture2d"===gc._reglType||R.commandRaise(l,D);zc=gc._texture;n.uniform1i(A.location,zc.bind());uc=t.elements;bb=null;(jc=ea(uc))?bb=xa.createStream(uc):(bb=xa.getElements(uc),uc&&!bb&&R.commandRaise(a,D));bb&&n.bindBuffer(34963,bb.buffer.buffer);nd=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||R.commandRaise(wa,D);Xa&&(bb?n.drawElements(nd,Xa,bb.type,0<<(bb.type-5121>>1)):n.drawArrays(nd,0,Xa),Tc&&y.destroyStream(Hb),bc&&y.destroyStream(ib),Jb&&y.destroyStream(Db),zc.unbind(),jc&&xa.destroyStream(bb))}P.dirty=
!0;Da.setVAO(null);q.view=g;m&&(M.cpuTime+=performance.now()-k)}}},"$7,color,position":function(e,R,D,M,m,g,h,b,E,J){var O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z,ga,S,K,y,q,P,Q;O=e.attributes;X=e.context;x=e.current;u=e.draw;F=e.elements;Y=e.framebuffer;t=e.gl;V=e.next;k=e.shader;w=e.uniforms;sa=e.vao;d=V.blend_color;z=x.blend_color;W=V.blend_equation;f=x.blend_equation;ca=V.blend_func;G=x.blend_func;p=V.colorMask;da=x.colorMask;C=V.depth_range;B=x.depth_range;c=V.polygonOffset_offset;
l=x.polygonOffset_offset;a=V.sample_coverage;wa=x.sample_coverage;A=V.scissor_box;ma=x.scissor_box;U=V.stencil_func;Z=x.stencil_func;ga=V.stencil_opBack;S=x.stencil_opBack;K=V.stencil_opFront;y=x.stencil_opFront;q=V.viewport;P=x.viewport;Q=[1,0,0,1];return{draw:function(b){var h,n,e,k;b=Y.next;b!==Y.cur&&(b?t.bindFramebuffer(36160,b.framebuffer):t.bindFramebuffer(36160,null),Y.cur=b);if(x.dirty){b=V.dither;b!==x.dither&&(b?t.enable(3024):t.disable(3024),x.dither=b);b=V.blend_enable;b!==x.blend_enable&&
(b?t.enable(3042):t.disable(3042),x.blend_enable=b);b=d[0];n=d[1];e=d[2];k=d[3];if(b!==z[0]||n!==z[1]||e!==z[2]||k!==z[3])t.blendColor(b,n,e,k),z[0]=b,z[1]=n,z[2]=e,z[3]=k;b=W[0];n=W[1];if(b!==f[0]||n!==f[1])t.blendEquationSeparate(b,n),f[0]=b,f[1]=n;b=ca[0];n=ca[1];e=ca[2];k=ca[3];if(b!==G[0]||n!==G[1]||e!==G[2]||k!==G[3])t.blendFuncSeparate(b,n,e,k),G[0]=b,G[1]=n,G[2]=e,G[3]=k;b=V.depth_enable;b!==x.depth_enable&&(b?t.enable(2929):t.disable(2929),x.depth_enable=b);b=V.depth_func;b!==x.depth_func&&
(t.depthFunc(b),x.depth_func=b);b=C[0];n=C[1];if(b!==B[0]||n!==B[1])t.depthRange(b,n),B[0]=b,B[1]=n;b=V.depth_mask;b!==x.depth_mask&&(t.depthMask(b),x.depth_mask=b);b=p[0];n=p[1];e=p[2];k=p[3];if(b!==da[0]||n!==da[1]||e!==da[2]||k!==da[3])t.colorMask(b,n,e,k),da[0]=b,da[1]=n,da[2]=e,da[3]=k;b=V.cull_enable;b!==x.cull_enable&&(b?t.enable(2884):t.disable(2884),x.cull_enable=b);b=V.cull_face;b!==x.cull_face&&(t.cullFace(b),x.cull_face=b);b=V.frontFace;b!==x.frontFace&&(t.frontFace(b),x.frontFace=b);
b=V.lineWidth;b!==x.lineWidth&&(t.lineWidth(b),x.lineWidth=b);b=V.polygonOffset_enable;b!==x.polygonOffset_enable&&(b?t.enable(32823):t.disable(32823),x.polygonOffset_enable=b);b=c[0];n=c[1];if(b!==l[0]||n!==l[1])t.polygonOffset(b,n),l[0]=b,l[1]=n;b=V.sample_alpha;b!==x.sample_alpha&&(b?t.enable(32926):t.disable(32926),x.sample_alpha=b);b=V.sample_enable;b!==x.sample_enable&&(b?t.enable(32928):t.disable(32928),x.sample_enable=b);b=a[0];n=a[1];if(b!==wa[0]||n!==wa[1])t.sampleCoverage(b,n),wa[0]=b,
wa[1]=n;b=V.stencil_enable;b!==x.stencil_enable&&(b?t.enable(2960):t.disable(2960),x.stencil_enable=b);b=V.stencil_mask;b!==x.stencil_mask&&(t.stencilMask(b),x.stencil_mask=b);b=U[0];n=U[1];e=U[2];if(b!==Z[0]||n!==Z[1]||e!==Z[2])t.stencilFunc(b,n,e),Z[0]=b,Z[1]=n,Z[2]=e;b=K[0];n=K[1];e=K[2];k=K[3];if(b!==y[0]||n!==y[1]||e!==y[2]||k!==y[3])t.stencilOpSeparate(b,n,e,k),y[0]=b,y[1]=n,y[2]=e,y[3]=k;b=ga[0];n=ga[1];e=ga[2];k=ga[3];if(b!==S[0]||n!==S[1]||e!==S[2]||k!==S[3])t.stencilOpSeparate(b,n,e,k),
S[0]=b,S[1]=n,S[2]=e,S[3]=k;b=V.scissor_enable;b!==x.scissor_enable&&(b?t.enable(3089):t.disable(3089),x.scissor_enable=b);b=A[0];n=A[1];e=A[2];k=A[3];if(b!==ma[0]||n!==ma[1]||e!==ma[2]||k!==ma[3])t.scissor(b,n,e,k),ma[0]=b,ma[1]=n,ma[2]=e,ma[3]=k;b=q[0];n=q[1];e=q[2];k=q[3];if(b!==P[0]||n!==P[1]||e!==P[2]||k!==P[3])t.viewport(b,n,e,k),P[0]=b,P[1]=n,P[2]=e,P[3]=k;x.dirty=!1}if(b=x.profile)h=performance.now(),M.count++;t.useProgram(m.program);sa.setVAO(null);n=J.location;e=O[n];e.buffer||t.enableVertexAttribArray(n);
if(e.type!==g.dtype||2!==e.size||e.buffer!==g||!1!==e.normalized||0!==e.offset||0!==e.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(n,2,g.dtype,!1,0,0),e.type=g.dtype,e.size=2,e.buffer=g,e.normalized=!1,e.offset=0,e.stride=0;t.uniform4f(E.location,1,0,0,1);(n=u.elements)?t.bindBuffer(34963,n.buffer.buffer):sa.currentVAO&&(n=F.getElements(sa.currentVAO.elements))&&t.bindBuffer(34963,n.buffer.buffer);e=u.primitive;k=u.offset;n?t.drawElements(e,3,n.type,k<<(n.type-5121>>1)):t.drawArrays(e,
k,3);sa.setVAO(null);b&&(M.cpuTime+=performance.now()-h)},scope:function(a,b,c){var d,f,e,l,m,q,p,z,t,A,y,B,C,L,G,D,v,r;if(d=x.profile)f=performance.now(),M.count++;e=u.count;u.count=3;l=w[3];w[3]=Q;m=h.buffer;h.buffer=g;q=h.divisor;h.divisor=0;p=h.normalized;h.normalized=!1;z=h.offset;h.offset=0;t=h.size;h.size=0;A=h.state;h.state=1;y=h.stride;h.stride=0;B=h.type;h.type=g.dtype;C=h.w;h.w=0;L=h.x;h.x=0;G=h.y;h.y=0;D=h.z;h.z=0;v=k.vert;k.vert=2;r=k.frag;k.frag=1;b(X,a,c);d&&(M.cpuTime+=performance.now()-
f);u.count=e;w[3]=l;h.buffer=m;h.divisor=q;h.normalized=p;h.offset=z;h.size=t;h.state=A;h.stride=y;h.type=B;h.w=C;h.x=L;h.y=G;h.z=D;k.vert=v;k.frag=r},batch:function(h,e){var n,m,k;n=Y.next;n!==Y.cur&&(n?t.bindFramebuffer(36160,n.framebuffer):t.bindFramebuffer(36160,null),Y.cur=n);if(x.dirty){var T,D;n=V.dither;n!==x.dither&&(n?t.enable(3024):t.disable(3024),x.dither=n);n=V.blend_enable;n!==x.blend_enable&&(n?t.enable(3042):t.disable(3042),x.blend_enable=n);n=d[0];k=d[1];T=d[2];D=d[3];if(n!==z[0]||
k!==z[1]||T!==z[2]||D!==z[3])t.blendColor(n,k,T,D),z[0]=n,z[1]=k,z[2]=T,z[3]=D;n=W[0];k=W[1];if(n!==f[0]||k!==f[1])t.blendEquationSeparate(n,k),f[0]=n,f[1]=k;n=ca[0];k=ca[1];T=ca[2];D=ca[3];if(n!==G[0]||k!==G[1]||T!==G[2]||D!==G[3])t.blendFuncSeparate(n,k,T,D),G[0]=n,G[1]=k,G[2]=T,G[3]=D;n=V.depth_enable;n!==x.depth_enable&&(n?t.enable(2929):t.disable(2929),x.depth_enable=n);n=V.depth_func;n!==x.depth_func&&(t.depthFunc(n),x.depth_func=n);n=C[0];k=C[1];if(n!==B[0]||k!==B[1])t.depthRange(n,k),B[0]=
n,B[1]=k;n=V.depth_mask;n!==x.depth_mask&&(t.depthMask(n),x.depth_mask=n);n=p[0];k=p[1];T=p[2];D=p[3];if(n!==da[0]||k!==da[1]||T!==da[2]||D!==da[3])t.colorMask(n,k,T,D),da[0]=n,da[1]=k,da[2]=T,da[3]=D;n=V.cull_enable;n!==x.cull_enable&&(n?t.enable(2884):t.disable(2884),x.cull_enable=n);n=V.cull_face;n!==x.cull_face&&(t.cullFace(n),x.cull_face=n);n=V.frontFace;n!==x.frontFace&&(t.frontFace(n),x.frontFace=n);n=V.lineWidth;n!==x.lineWidth&&(t.lineWidth(n),x.lineWidth=n);n=V.polygonOffset_enable;n!==
x.polygonOffset_enable&&(n?t.enable(32823):t.disable(32823),x.polygonOffset_enable=n);n=c[0];k=c[1];if(n!==l[0]||k!==l[1])t.polygonOffset(n,k),l[0]=n,l[1]=k;n=V.sample_alpha;n!==x.sample_alpha&&(n?t.enable(32926):t.disable(32926),x.sample_alpha=n);n=V.sample_enable;n!==x.sample_enable&&(n?t.enable(32928):t.disable(32928),x.sample_enable=n);n=a[0];k=a[1];if(n!==wa[0]||k!==wa[1])t.sampleCoverage(n,k),wa[0]=n,wa[1]=k;n=V.stencil_enable;n!==x.stencil_enable&&(n?t.enable(2960):t.disable(2960),x.stencil_enable=
n);n=V.stencil_mask;n!==x.stencil_mask&&(t.stencilMask(n),x.stencil_mask=n);n=U[0];k=U[1];T=U[2];if(n!==Z[0]||k!==Z[1]||T!==Z[2])t.stencilFunc(n,k,T),Z[0]=n,Z[1]=k,Z[2]=T;n=K[0];k=K[1];T=K[2];D=K[3];if(n!==y[0]||k!==y[1]||T!==y[2]||D!==y[3])t.stencilOpSeparate(n,k,T,D),y[0]=n,y[1]=k,y[2]=T,y[3]=D;n=ga[0];k=ga[1];T=ga[2];D=ga[3];if(n!==S[0]||k!==S[1]||T!==S[2]||D!==S[3])t.stencilOpSeparate(n,k,T,D),S[0]=n,S[1]=k,S[2]=T,S[3]=D;n=V.scissor_enable;n!==x.scissor_enable&&(n?t.enable(3089):t.disable(3089),
x.scissor_enable=n);n=A[0];k=A[1];T=A[2];D=A[3];if(n!==ma[0]||k!==ma[1]||T!==ma[2]||D!==ma[3])t.scissor(n,k,T,D),ma[0]=n,ma[1]=k,ma[2]=T,ma[3]=D;n=q[0];k=q[1];T=q[2];D=q[3];if(n!==P[0]||k!==P[1]||T!==P[2]||D!==P[3])t.viewport(n,k,T,D),P[0]=n,P[1]=k,P[2]=T,P[3]=D;x.dirty=!1}if(n=x.profile)m=performance.now(),M.count+=e;t.useProgram(b.program);var w;sa.setVAO(null);k=J.location;T=O[k];T.buffer||t.enableVertexAttribArray(k);if(T.type!==g.dtype||2!==T.size||T.buffer!==g||!1!==T.normalized||0!==T.offset||
0!==T.stride)t.bindBuffer(34962,g.buffer),t.vertexAttribPointer(k,2,g.dtype,!1,0,0),T.type=g.dtype,T.size=2,T.buffer=g,T.normalized=!1,T.offset=0,T.stride=0;t.uniform4f(E.location,1,0,0,1);(T=u.elements)?t.bindBuffer(34963,T.buffer.buffer):sa.currentVAO&&(T=F.getElements(sa.currentVAO.elements))&&t.bindBuffer(34963,T.buffer.buffer);D=u.primitive;w=u.offset;for(k=0;k<e;++k)T?t.drawElements(D,3,T.type,w<<(T.type-5121>>1)):t.drawArrays(D,w,3);sa.setVAO(null);n&&(M.cpuTime+=performance.now()-m)}}},"$19,angle,color,offset,position":function(e,
R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W){var f,ca,G,p,da,C,B,c,l,a,wa,A,ma,U,Z,ga,S,K,y,q,P,Q,ia,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa;f=e.attributes;ca=e.context;G=e.current;p=e.draw;da=e.elements;C=e.framebuffer;B=e.gl;c=e.isArrayLike;l=e.next;a=e.shader;wa=e.uniforms;A=e.vao;ma=l.blend_color;U=G.blend_color;Z=l.blend_equation;ga=G.blend_equation;S=l.blend_func;K=G.blend_func;y=l.colorMask;q=G.colorMask;P=l.depth_range;Q=G.depth_range;ia=l.polygonOffset_offset;oa=G.polygonOffset_offset;n=l.sample_coverage;
H=G.sample_coverage;ea=l.scissor_box;T=G.scissor_box;la=l.stencil_func;qa=G.stencil_func;Da=l.stencil_opBack;za=G.stencil_opBack;ha=l.stencil_opFront;Ea=G.stencil_opFront;ja=l.viewport;pa=G.viewport;return{draw:function(a){var e,k,t,u;e=C.next;e!==C.cur&&(e?B.bindFramebuffer(36160,e.framebuffer):B.bindFramebuffer(36160,null),C.cur=e);if(G.dirty){var v;e=l.dither;e!==G.dither&&(e?B.enable(3024):B.disable(3024),G.dither=e);e=l.blend_enable;e!==G.blend_enable&&(e?B.enable(3042):B.disable(3042),G.blend_enable=
e);e=ma[0];t=ma[1];u=ma[2];v=ma[3];if(e!==U[0]||t!==U[1]||u!==U[2]||v!==U[3])B.blendColor(e,t,u,v),U[0]=e,U[1]=t,U[2]=u,U[3]=v;e=Z[0];t=Z[1];if(e!==ga[0]||t!==ga[1])B.blendEquationSeparate(e,t),ga[0]=e,ga[1]=t;e=S[0];t=S[1];u=S[2];v=S[3];if(e!==K[0]||t!==K[1]||u!==K[2]||v!==K[3])B.blendFuncSeparate(e,t,u,v),K[0]=e,K[1]=t,K[2]=u,K[3]=v;e=l.depth_func;e!==G.depth_func&&(B.depthFunc(e),G.depth_func=e);e=P[0];t=P[1];if(e!==Q[0]||t!==Q[1])B.depthRange(e,t),Q[0]=e,Q[1]=t;e=l.depth_mask;e!==G.depth_mask&&
(B.depthMask(e),G.depth_mask=e);e=y[0];t=y[1];u=y[2];v=y[3];if(e!==q[0]||t!==q[1]||u!==q[2]||v!==q[3])B.colorMask(e,t,u,v),q[0]=e,q[1]=t,q[2]=u,q[3]=v;e=l.cull_enable;e!==G.cull_enable&&(e?B.enable(2884):B.disable(2884),G.cull_enable=e);e=l.cull_face;e!==G.cull_face&&(B.cullFace(e),G.cull_face=e);e=l.frontFace;e!==G.frontFace&&(B.frontFace(e),G.frontFace=e);e=l.lineWidth;e!==G.lineWidth&&(B.lineWidth(e),G.lineWidth=e);e=l.polygonOffset_enable;e!==G.polygonOffset_enable&&(e?B.enable(32823):B.disable(32823),
G.polygonOffset_enable=e);e=ia[0];t=ia[1];if(e!==oa[0]||t!==oa[1])B.polygonOffset(e,t),oa[0]=e,oa[1]=t;e=l.sample_alpha;e!==G.sample_alpha&&(e?B.enable(32926):B.disable(32926),G.sample_alpha=e);e=l.sample_enable;e!==G.sample_enable&&(e?B.enable(32928):B.disable(32928),G.sample_enable=e);e=n[0];t=n[1];if(e!==H[0]||t!==H[1])B.sampleCoverage(e,t),H[0]=e,H[1]=t;e=l.stencil_enable;e!==G.stencil_enable&&(e?B.enable(2960):B.disable(2960),G.stencil_enable=e);e=l.stencil_mask;e!==G.stencil_mask&&(B.stencilMask(e),
G.stencil_mask=e);e=la[0];t=la[1];u=la[2];if(e!==qa[0]||t!==qa[1]||u!==qa[2])B.stencilFunc(e,t,u),qa[0]=e,qa[1]=t,qa[2]=u;e=ha[0];t=ha[1];u=ha[2];v=ha[3];if(e!==Ea[0]||t!==Ea[1]||u!==Ea[2]||v!==Ea[3])B.stencilOpSeparate(e,t,u,v),Ea[0]=e,Ea[1]=t,Ea[2]=u,Ea[3]=v;e=Da[0];t=Da[1];u=Da[2];v=Da[3];if(e!==za[0]||t!==za[1]||u!==za[2]||v!==za[3])B.stencilOpSeparate(e,t,u,v),za[0]=e,za[1]=t,za[2]=u,za[3]=v;e=l.scissor_enable;e!==G.scissor_enable&&(e?B.enable(3089):B.disable(3089),G.scissor_enable=e);e=ea[0];
t=ea[1];u=ea[2];v=ea[3];if(e!==T[0]||t!==T[1]||u!==T[2]||v!==T[3])B.scissor(e,t,u,v),T[0]=e,T[1]=t,T[2]=u,T[3]=v;e=ja[0];t=ja[1];u=ja[2];v=ja[3];if(e!==pa[0]||t!==pa[1]||u!==pa[2]||v!==pa[3])B.viewport(e,t,u,v),pa[0]=e,pa[1]=t,pa[2]=u,pa[3]=v}B.disable(2929);G.depth_enable=!1;if(e=G.profile)k=performance.now(),M.count++;B.useProgram(m.program);A.setVAO(null);t=W.location;u=f[t];u.buffer||B.enableVertexAttribArray(t);if(u.type!==g.dtype||2!==u.size||u.buffer!==g||!1!==u.normalized||0!==u.offset||0!==
u.stride)B.bindBuffer(34962,g.buffer),B.vertexAttribPointer(t,2,g.dtype,!1,0,0),u.type=g.dtype,u.size=2,u.buffer=g,u.normalized=!1,u.offset=0,u.stride=0;t=h.call(this,ca,a,0);"number"!==typeof t&&R.commandRaise(b,D);B.uniform1f(sa.location,t);t=a.offset;c(t)&&2===t.length||R.commandRaise(E,D);B.uniform2f(z.location,t[0],t[1]);a=J.call(this,ca,a,0);c(a)&&4===a.length||R.commandRaise(O,D);B.uniform4f(d.location,a[0],a[1],a[2],a[3]);(a=p.elements)?B.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=
da.getElements(A.currentVAO.elements))&&B.bindBuffer(34963,a.buffer.buffer);t=p.primitive;u=p.offset;a?B.drawElements(t,3,a.type,u<<(a.type-5121>>1)):B.drawArrays(t,u,3);G.dirty=!0;A.setVAO(null);e&&(M.cpuTime+=performance.now()-k)},scope:function(b,c,d){var f,e,n,h,m,q,k,t,z,A,I,y,B,C,D,T,H,K,ha,J,w;f=l.depth_enable;l.depth_enable=!1;if(e=G.profile)n=performance.now(),M.count++;h=p.count;p.count=3;m=X.call(this,ca,b,d);q=wa[3];wa[3]=m;k=x.call(this,ca,b,d);m=wa[5];wa[5]=k;t=b.offset;k=wa[4];wa[4]=
t;t=u.buffer;u.buffer=g;z=u.divisor;u.divisor=0;A=u.normalized;u.normalized=!1;I=u.offset;u.offset=0;y=u.size;u.size=0;B=u.state;u.state=1;C=u.stride;u.stride=0;D=u.type;u.type=g.dtype;T=u.w;u.w=0;H=u.x;u.x=0;K=u.y;u.y=0;ha=u.z;u.z=0;J=a.vert;a.vert=2;w=a.frag;a.frag=1;G.dirty=!0;c(ca,b,d);l.depth_enable=f;e&&(M.cpuTime+=performance.now()-n);p.count=h;wa[3]=q;wa[5]=m;wa[4]=k;u.buffer=t;u.divisor=z;u.normalized=A;u.offset=I;u.size=y;u.state=B;u.stride=C;u.type=D;u.w=T;u.x=H;u.y=K;u.z=ha;a.vert=J;a.frag=
w;G.dirty=!0},batch:function(a,b){var e,h,m,v;e=C.next;e!==C.cur&&(e?B.bindFramebuffer(36160,e.framebuffer):B.bindFramebuffer(36160,null),C.cur=e);if(G.dirty){var r,N,u;e=l.dither;e!==G.dither&&(e?B.enable(3024):B.disable(3024),G.dither=e);e=l.blend_enable;e!==G.blend_enable&&(e?B.enable(3042):B.disable(3042),G.blend_enable=e);e=ma[0];r=ma[1];N=ma[2];u=ma[3];if(e!==U[0]||r!==U[1]||N!==U[2]||u!==U[3])B.blendColor(e,r,N,u),U[0]=e,U[1]=r,U[2]=N,U[3]=u;e=Z[0];r=Z[1];if(e!==ga[0]||r!==ga[1])B.blendEquationSeparate(e,
r),ga[0]=e,ga[1]=r;e=S[0];r=S[1];N=S[2];u=S[3];if(e!==K[0]||r!==K[1]||N!==K[2]||u!==K[3])B.blendFuncSeparate(e,r,N,u),K[0]=e,K[1]=r,K[2]=N,K[3]=u;e=l.depth_func;e!==G.depth_func&&(B.depthFunc(e),G.depth_func=e);e=P[0];r=P[1];if(e!==Q[0]||r!==Q[1])B.depthRange(e,r),Q[0]=e,Q[1]=r;e=l.depth_mask;e!==G.depth_mask&&(B.depthMask(e),G.depth_mask=e);e=y[0];r=y[1];N=y[2];u=y[3];if(e!==q[0]||r!==q[1]||N!==q[2]||u!==q[3])B.colorMask(e,r,N,u),q[0]=e,q[1]=r,q[2]=N,q[3]=u;e=l.cull_enable;e!==G.cull_enable&&(e?
B.enable(2884):B.disable(2884),G.cull_enable=e);e=l.cull_face;e!==G.cull_face&&(B.cullFace(e),G.cull_face=e);e=l.frontFace;e!==G.frontFace&&(B.frontFace(e),G.frontFace=e);e=l.lineWidth;e!==G.lineWidth&&(B.lineWidth(e),G.lineWidth=e);e=l.polygonOffset_enable;e!==G.polygonOffset_enable&&(e?B.enable(32823):B.disable(32823),G.polygonOffset_enable=e);e=ia[0];r=ia[1];if(e!==oa[0]||r!==oa[1])B.polygonOffset(e,r),oa[0]=e,oa[1]=r;e=l.sample_alpha;e!==G.sample_alpha&&(e?B.enable(32926):B.disable(32926),G.sample_alpha=
e);e=l.sample_enable;e!==G.sample_enable&&(e?B.enable(32928):B.disable(32928),G.sample_enable=e);e=n[0];r=n[1];if(e!==H[0]||r!==H[1])B.sampleCoverage(e,r),H[0]=e,H[1]=r;e=l.stencil_enable;e!==G.stencil_enable&&(e?B.enable(2960):B.disable(2960),G.stencil_enable=e);e=l.stencil_mask;e!==G.stencil_mask&&(B.stencilMask(e),G.stencil_mask=e);e=la[0];r=la[1];N=la[2];if(e!==qa[0]||r!==qa[1]||N!==qa[2])B.stencilFunc(e,r,N),qa[0]=e,qa[1]=r,qa[2]=N;e=ha[0];r=ha[1];N=ha[2];u=ha[3];if(e!==Ea[0]||r!==Ea[1]||N!==
Ea[2]||u!==Ea[3])B.stencilOpSeparate(e,r,N,u),Ea[0]=e,Ea[1]=r,Ea[2]=N,Ea[3]=u;e=Da[0];r=Da[1];N=Da[2];u=Da[3];if(e!==za[0]||r!==za[1]||N!==za[2]||u!==za[3])B.stencilOpSeparate(e,r,N,u),za[0]=e,za[1]=r,za[2]=N,za[3]=u;e=l.scissor_enable;e!==G.scissor_enable&&(e?B.enable(3089):B.disable(3089),G.scissor_enable=e);e=ea[0];r=ea[1];N=ea[2];u=ea[3];if(e!==T[0]||r!==T[1]||N!==T[2]||u!==T[3])B.scissor(e,r,N,u),T[0]=e,T[1]=r,T[2]=N,T[3]=u;e=ja[0];r=ja[1];N=ja[2];u=ja[3];if(e!==pa[0]||r!==pa[1]||N!==pa[2]||
u!==pa[3])B.viewport(e,r,N,u),pa[0]=e,pa[1]=r,pa[2]=N,pa[3]=u}B.disable(2929);G.depth_enable=!1;if(e=G.profile)h=performance.now(),M.count+=b;B.useProgram(F.program);A.setVAO(null);r=W.location;N=f[r];N.buffer||B.enableVertexAttribArray(r);if(N.type!==g.dtype||2!==N.size||N.buffer!==g||!1!==N.normalized||0!==N.offset||0!==N.stride)B.bindBuffer(34962,g.buffer),B.vertexAttribPointer(r,2,g.dtype,!1,0,0),N.type=g.dtype,N.size=2,N.buffer=g,N.normalized=!1,N.offset=0,N.stride=0;m=Y.call(this,ca,v,m);"number"!==
typeof m&&R.commandRaise(t,D);B.uniform1f(sa.location,m);(r=p.elements)?B.bindBuffer(34963,r.buffer.buffer):A.currentVAO&&(r=da.getElements(A.currentVAO.elements))&&B.bindBuffer(34963,r.buffer.buffer);N=p.primitive;u=p.offset;for(m=0;m<b;++m){v=a[m];var x,J,E,ba,I,ra,Ga,na,O;x=v.offset;c(x)&&2===x.length||R.commandRaise(V,D);J=x[0];x=x[1];m&&E===J&&ba===x||(E=J,ba=x,B.uniform2f(z.location,J,x));I=k.call(this,ca,v,m);c(I)&&4===I.length||R.commandRaise(w,D);v=I[0];J=I[1];x=I[2];I=I[3];m&&ra===v&&Ga===
J&&na===x&&O===I||(ra=v,Ga=J,na=x,O=I,B.uniform4f(d.location,v,J,x,I));r?B.drawElements(N,3,r.type,u<<(r.type-5121>>1)):B.drawArrays(N,u,3)}G.dirty=!0;A.setVAO(null);e&&(M.cpuTime+=performance.now()-h)}}},"$23,model,position,projection,view":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p){var da,C,B,c,l,a,U,A,ma,ia,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va;da=e.attributes;C=e.context;B=e.current;c=e.draw;l=e.framebuffer;a=e.gl;U=e.isArrayLike;
A=e.next;ma=e.shader;ia=e.uniforms;Z=e.vao;ga=A.blend_color;S=B.blend_color;K=A.blend_equation;y=B.blend_equation;q=A.blend_func;P=B.blend_func;Q=A.colorMask;xa=B.colorMask;oa=A.depth_range;n=B.depth_range;H=A.polygonOffset_offset;ea=B.polygonOffset_offset;T=A.sample_coverage;la=B.sample_coverage;qa=A.scissor_box;Da=B.scissor_box;za=A.stencil_func;ha=B.stencil_func;Ea=A.stencil_opBack;ja=B.stencil_opBack;pa=A.stencil_opFront;Aa=B.stencil_opFront;Ia=A.viewport;L=B.viewport;ac=new Float32Array([1,0,
0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);v=new Float32Array(16);r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];N=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ta=new Float32Array(16);va=new Float32Array(16);return{draw:function(c){var d,e,k,r;d=l.next;d!==l.cur&&(d?a.bindFramebuffer(36160,d.framebuffer):a.bindFramebuffer(36160,null),l.cur=d);if(B.dirty){var t;d=A.dither;d!==B.dither&&(d?a.enable(3024):a.disable(3024),B.dither=d);d=A.blend_enable;d!==B.blend_enable&&(d?a.enable(3042):a.disable(3042),
B.blend_enable=d);d=ga[0];k=ga[1];r=ga[2];t=ga[3];if(d!==S[0]||k!==S[1]||r!==S[2]||t!==S[3])a.blendColor(d,k,r,t),S[0]=d,S[1]=k,S[2]=r,S[3]=t;d=K[0];k=K[1];if(d!==y[0]||k!==y[1])a.blendEquationSeparate(d,k),y[0]=d,y[1]=k;d=q[0];k=q[1];r=q[2];t=q[3];if(d!==P[0]||k!==P[1]||r!==P[2]||t!==P[3])a.blendFuncSeparate(d,k,r,t),P[0]=d,P[1]=k,P[2]=r,P[3]=t;d=A.depth_enable;d!==B.depth_enable&&(d?a.enable(2929):a.disable(2929),B.depth_enable=d);d=A.depth_func;d!==B.depth_func&&(a.depthFunc(d),B.depth_func=d);
d=oa[0];k=oa[1];if(d!==n[0]||k!==n[1])a.depthRange(d,k),n[0]=d,n[1]=k;d=A.depth_mask;d!==B.depth_mask&&(a.depthMask(d),B.depth_mask=d);d=Q[0];k=Q[1];r=Q[2];t=Q[3];if(d!==xa[0]||k!==xa[1]||r!==xa[2]||t!==xa[3])a.colorMask(d,k,r,t),xa[0]=d,xa[1]=k,xa[2]=r,xa[3]=t;d=A.cull_enable;d!==B.cull_enable&&(d?a.enable(2884):a.disable(2884),B.cull_enable=d);d=A.cull_face;d!==B.cull_face&&(a.cullFace(d),B.cull_face=d);d=A.frontFace;d!==B.frontFace&&(a.frontFace(d),B.frontFace=d);d=A.lineWidth;d!==B.lineWidth&&
(a.lineWidth(d),B.lineWidth=d);d=A.polygonOffset_enable;d!==B.polygonOffset_enable&&(d?a.enable(32823):a.disable(32823),B.polygonOffset_enable=d);d=H[0];k=H[1];if(d!==ea[0]||k!==ea[1])a.polygonOffset(d,k),ea[0]=d,ea[1]=k;d=A.sample_alpha;d!==B.sample_alpha&&(d?a.enable(32926):a.disable(32926),B.sample_alpha=d);d=A.sample_enable;d!==B.sample_enable&&(d?a.enable(32928):a.disable(32928),B.sample_enable=d);d=T[0];k=T[1];if(d!==la[0]||k!==la[1])a.sampleCoverage(d,k),la[0]=d,la[1]=k;d=A.stencil_enable;
d!==B.stencil_enable&&(d?a.enable(2960):a.disable(2960),B.stencil_enable=d);d=A.stencil_mask;d!==B.stencil_mask&&(a.stencilMask(d),B.stencil_mask=d);d=za[0];k=za[1];r=za[2];if(d!==ha[0]||k!==ha[1]||r!==ha[2])a.stencilFunc(d,k,r),ha[0]=d,ha[1]=k,ha[2]=r;d=pa[0];k=pa[1];r=pa[2];t=pa[3];if(d!==Aa[0]||k!==Aa[1]||r!==Aa[2]||t!==Aa[3])a.stencilOpSeparate(d,k,r,t),Aa[0]=d,Aa[1]=k,Aa[2]=r,Aa[3]=t;d=Ea[0];k=Ea[1];r=Ea[2];t=Ea[3];if(d!==ja[0]||k!==ja[1]||r!==ja[2]||t!==ja[3])a.stencilOpSeparate(d,k,r,t),ja[0]=
d,ja[1]=k,ja[2]=r,ja[3]=t;d=A.scissor_enable;d!==B.scissor_enable&&(d?a.enable(3089):a.disable(3089),B.scissor_enable=d);d=qa[0];k=qa[1];r=qa[2];t=qa[3];if(d!==Da[0]||k!==Da[1]||r!==Da[2]||t!==Da[3])a.scissor(d,k,r,t),Da[0]=d,Da[1]=k,Da[2]=r,Da[3]=t;d=Ia[0];k=Ia[1];r=Ia[2];t=Ia[3];if(d!==L[0]||k!==L[1]||r!==L[2]||t!==L[3])a.viewport(d,k,r,t),L[0]=d,L[1]=k,L[2]=r,L[3]=t;B.dirty=!1}if(d=B.profile)e=performance.now(),M.count++;a.useProgram(m.program);Z.setVAO(null);k=ca.location;r=da[k];r.buffer||a.enableVertexAttribArray(k);
if(r.type!==g.dtype||3!==r.size||r.buffer!==g||!1!==r.normalized||0!==r.offset||0!==r.stride)a.bindBuffer(34962,g.buffer),a.vertexAttribPointer(k,3,g.dtype,!1,0,0),r.type=g.dtype,r.size=3,r.buffer=g,r.normalized=!1,r.offset=0,r.stride=0;a.uniformMatrix4fv(f.location,!1,ac);k=h.call(this,C,c,0);U(k)&&16===k.length||R.commandRaise(b,D);a.uniformMatrix4fv(p.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ta[0]=k[0],Ta[1]=k[1],Ta[2]=k[2],Ta[3]=k[3],Ta[4]=k[4],Ta[5]=k[5],Ta[6]=k[6],Ta[7]=k[7],
Ta[8]=k[8],Ta[9]=k[9],Ta[10]=k[10],Ta[11]=k[11],Ta[12]=k[12],Ta[13]=k[13],Ta[14]=k[14],Ta[15]=k[15],Ta));c=E.call(this,C,c,0);U(c)&&16===c.length||R.commandRaise(J,D);a.uniformMatrix4fv(G.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(v[0]=c[0],v[1]=c[1],v[2]=c[2],v[3]=c[3],v[4]=c[4],v[5]=c[5],v[6]=c[6],v[7]=c[7],v[8]=c[8],v[9]=c[9],v[10]=c[10],v[11]=c[11],v[12]=c[12],v[13]=c[13],v[14]=c[14],v[15]=c[15],v));O&&a.bindBuffer(34963,O.buffer.buffer);c=O.primType;k=O.vertCount-0;0<=k||R.commandRaise(X,
D);k&&(a.drawElements(c,k,O.type,0<<(O.type-5121>>1)),Z.setVAO(null),d&&(M.cpuTime+=performance.now()-e))},scope:function(a,b,d){var f,e,n,h,l,v,m,k,q,p,N,z,A,y,L,G,T,H,K,ha,J,w,E;if(f=B.profile)e=performance.now(),M.count++;n=c.elements;c.elements=x;h=c.offset;c.offset=0;l=x.vertCount-0;0<=l||R.commandRaise(u,D);v=c.count;c.count=l;m=x.primType;l=c.primitive;c.primitive=m;m=ia[3];ia[3]=r;k=F.call(this,C,a,d);q=ia[5];ia[5]=k;p=Y.call(this,C,a,d);k=ia[4];ia[4]=p;p=t.buffer;t.buffer=g;N=t.divisor;t.divisor=
0;z=t.normalized;t.normalized=!1;A=t.offset;t.offset=0;y=t.size;t.size=0;L=t.state;t.state=1;G=t.stride;t.stride=0;T=t.type;t.type=g.dtype;H=t.w;t.w=0;K=t.x;t.x=0;ha=t.y;t.y=0;J=t.z;t.z=0;w=ma.vert;ma.vert=2;E=ma.frag;ma.frag=1;b(C,a,d);f&&(M.cpuTime+=performance.now()-e);c.elements=n;c.offset=h;c.count=v;c.primitive=l;ia[3]=m;ia[5]=q;ia[4]=k;t.buffer=p;t.divisor=N;t.normalized=z;t.offset=A;t.size=y;t.state=L;t.stride=G;t.type=T;t.w=H;t.x=K;t.y=ha;t.z=J;ma.vert=w;ma.frag=E},batch:function(b,c){var e,
h,v;e=l.next;e!==l.cur&&(e?a.bindFramebuffer(36160,e.framebuffer):a.bindFramebuffer(36160,null),l.cur=e);if(B.dirty){var m,r,t;e=A.dither;e!==B.dither&&(e?a.enable(3024):a.disable(3024),B.dither=e);e=A.blend_enable;e!==B.blend_enable&&(e?a.enable(3042):a.disable(3042),B.blend_enable=e);e=ga[0];m=ga[1];r=ga[2];t=ga[3];if(e!==S[0]||m!==S[1]||r!==S[2]||t!==S[3])a.blendColor(e,m,r,t),S[0]=e,S[1]=m,S[2]=r,S[3]=t;e=K[0];m=K[1];if(e!==y[0]||m!==y[1])a.blendEquationSeparate(e,m),y[0]=e,y[1]=m;e=q[0];m=q[1];
r=q[2];t=q[3];if(e!==P[0]||m!==P[1]||r!==P[2]||t!==P[3])a.blendFuncSeparate(e,m,r,t),P[0]=e,P[1]=m,P[2]=r,P[3]=t;e=A.depth_enable;e!==B.depth_enable&&(e?a.enable(2929):a.disable(2929),B.depth_enable=e);e=A.depth_func;e!==B.depth_func&&(a.depthFunc(e),B.depth_func=e);e=oa[0];m=oa[1];if(e!==n[0]||m!==n[1])a.depthRange(e,m),n[0]=e,n[1]=m;e=A.depth_mask;e!==B.depth_mask&&(a.depthMask(e),B.depth_mask=e);e=Q[0];m=Q[1];r=Q[2];t=Q[3];if(e!==xa[0]||m!==xa[1]||r!==xa[2]||t!==xa[3])a.colorMask(e,m,r,t),xa[0]=
e,xa[1]=m,xa[2]=r,xa[3]=t;e=A.cull_enable;e!==B.cull_enable&&(e?a.enable(2884):a.disable(2884),B.cull_enable=e);e=A.cull_face;e!==B.cull_face&&(a.cullFace(e),B.cull_face=e);e=A.frontFace;e!==B.frontFace&&(a.frontFace(e),B.frontFace=e);e=A.lineWidth;e!==B.lineWidth&&(a.lineWidth(e),B.lineWidth=e);e=A.polygonOffset_enable;e!==B.polygonOffset_enable&&(e?a.enable(32823):a.disable(32823),B.polygonOffset_enable=e);e=H[0];m=H[1];if(e!==ea[0]||m!==ea[1])a.polygonOffset(e,m),ea[0]=e,ea[1]=m;e=A.sample_alpha;
e!==B.sample_alpha&&(e?a.enable(32926):a.disable(32926),B.sample_alpha=e);e=A.sample_enable;e!==B.sample_enable&&(e?a.enable(32928):a.disable(32928),B.sample_enable=e);e=T[0];m=T[1];if(e!==la[0]||m!==la[1])a.sampleCoverage(e,m),la[0]=e,la[1]=m;e=A.stencil_enable;e!==B.stencil_enable&&(e?a.enable(2960):a.disable(2960),B.stencil_enable=e);e=A.stencil_mask;e!==B.stencil_mask&&(a.stencilMask(e),B.stencil_mask=e);e=za[0];m=za[1];r=za[2];if(e!==ha[0]||m!==ha[1]||r!==ha[2])a.stencilFunc(e,m,r),ha[0]=e,ha[1]=
m,ha[2]=r;e=pa[0];m=pa[1];r=pa[2];t=pa[3];if(e!==Aa[0]||m!==Aa[1]||r!==Aa[2]||t!==Aa[3])a.stencilOpSeparate(e,m,r,t),Aa[0]=e,Aa[1]=m,Aa[2]=r,Aa[3]=t;e=Ea[0];m=Ea[1];r=Ea[2];t=Ea[3];if(e!==ja[0]||m!==ja[1]||r!==ja[2]||t!==ja[3])a.stencilOpSeparate(e,m,r,t),ja[0]=e,ja[1]=m,ja[2]=r,ja[3]=t;e=A.scissor_enable;e!==B.scissor_enable&&(e?a.enable(3089):a.disable(3089),B.scissor_enable=e);e=qa[0];m=qa[1];r=qa[2];t=qa[3];if(e!==Da[0]||m!==Da[1]||r!==Da[2]||t!==Da[3])a.scissor(e,m,r,t),Da[0]=e,Da[1]=m,Da[2]=
r,Da[3]=t;e=Ia[0];m=Ia[1];r=Ia[2];t=Ia[3];if(e!==L[0]||m!==L[1]||r!==L[2]||t!==L[3])a.viewport(e,m,r,t),L[0]=e,L[1]=m,L[2]=r,L[3]=t;B.dirty=!1}if(e=B.profile)h=performance.now(),M.count+=c;a.useProgram(V.program);Z.setVAO(null);m=ca.location;r=da[m];r.buffer||a.enableVertexAttribArray(m);if(r.type!==g.dtype||3!==r.size||r.buffer!==g||!1!==r.normalized||0!==r.offset||0!==r.stride)a.bindBuffer(34962,g.buffer),a.vertexAttribPointer(m,3,g.dtype,!1,0,0),r.type=g.dtype,r.size=3,r.buffer=g,r.normalized=
!1,r.offset=0,r.stride=0;a.uniformMatrix4fv(f.location,!1,N);m=k.call(this,C,void 0,v);U(m)&&16===m.length||R.commandRaise(w,D);a.uniformMatrix4fv(p.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(ta[0]=m[0],ta[1]=m[1],ta[2]=m[2],ta[3]=m[3],ta[4]=m[4],ta[5]=m[5],ta[6]=m[6],ta[7]=m[7],ta[8]=m[8],ta[9]=m[9],ta[10]=m[10],ta[11]=m[11],ta[12]=m[12],ta[13]=m[13],ta[14]=m[14],ta[15]=m[15],ta));v=sa.call(this,C,void 0,v);U(v)&&16===v.length||R.commandRaise(d,D);a.uniformMatrix4fv(G.location,!1,
Array.isArray(v)||v instanceof Float32Array?v:(va[0]=v[0],va[1]=v[1],va[2]=v[2],va[3]=v[3],va[4]=v[4],va[5]=v[5],va[6]=v[6],va[7]=v[7],va[8]=v[8],va[9]=v[9],va[10]=v[10],va[11]=v[11],va[12]=v[12],va[13]=v[13],va[14]=v[14],va[15]=v[15],va));z&&a.bindBuffer(34963,z.buffer.buffer);m=z.primType;r=z.vertCount-0;0<=r||R.commandRaise(W,D);for(v=0;v<c;++v)r&&a.drawElements(m,r,z.type,0<<(z.type-5121>>1));Z.setVAO(null);e&&(M.cpuTime+=performance.now()-h)}}},$20:function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,
V,k,w,sa){var d,z,W,f,ca,G,p,da,C,B,c,l,a,U,A,ma,ia,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da;d=e.context;z=e.current;W=e.framebuffer;f=e.gl;ca=e.next;G=e.shader;p=e.uniforms;da=e.vao;C=ca.blend_color;B=z.blend_color;c=ca.blend_equation;l=z.blend_equation;a=ca.blend_func;U=z.blend_func;A=ca.colorMask;ma=z.colorMask;ia=ca.depth_range;Z=z.depth_range;ga=ca.polygonOffset_offset;S=z.polygonOffset_offset;K=ca.sample_coverage;y=z.sample_coverage;q=ca.scissor_box;P=z.scissor_box;Q=ca.stencil_func;xa=z.stencil_func;
oa=ca.stencil_opBack;n=z.stencil_opBack;H=ca.stencil_opFront;ea=z.stencil_opFront;T=ca.viewport;la=z.viewport;qa={};Da={};return{draw:function(e){var k,t,p,u,x,w,L,F,O,v,r,N,R;k=d.center;t=d.distance;p=d.eye;u=d.phi;x=d.projection;w=h.call(this,d,e,0);L=d.theta;F=d.up;O=d.view;d.center=m;d.distance=2.302585092994046;d.eye=g;d.phi=0;d.projection=w;d.theta=0;d.up=b;d.view=E;w=W.next;w!==W.cur&&(w?f.bindFramebuffer(36160,w.framebuffer):f.bindFramebuffer(36160,null),W.cur=w);if(z.dirty){w=ca.dither;w!==
z.dither&&(w?f.enable(3024):f.disable(3024),z.dither=w);w=ca.blend_enable;w!==z.blend_enable&&(w?f.enable(3042):f.disable(3042),z.blend_enable=w);w=C[0];r=C[1];N=C[2];R=C[3];if(w!==B[0]||r!==B[1]||N!==B[2]||R!==B[3])f.blendColor(w,r,N,R),B[0]=w,B[1]=r,B[2]=N,B[3]=R;w=c[0];r=c[1];if(w!==l[0]||r!==l[1])f.blendEquationSeparate(w,r),l[0]=w,l[1]=r;w=a[0];r=a[1];N=a[2];R=a[3];if(w!==U[0]||r!==U[1]||N!==U[2]||R!==U[3])f.blendFuncSeparate(w,r,N,R),U[0]=w,U[1]=r,U[2]=N,U[3]=R;w=ca.depth_enable;w!==z.depth_enable&&
(w?f.enable(2929):f.disable(2929),z.depth_enable=w);w=ca.depth_func;w!==z.depth_func&&(f.depthFunc(w),z.depth_func=w);w=ia[0];r=ia[1];if(w!==Z[0]||r!==Z[1])f.depthRange(w,r),Z[0]=w,Z[1]=r;w=ca.depth_mask;w!==z.depth_mask&&(f.depthMask(w),z.depth_mask=w);w=A[0];r=A[1];N=A[2];R=A[3];if(w!==ma[0]||r!==ma[1]||N!==ma[2]||R!==ma[3])f.colorMask(w,r,N,R),ma[0]=w,ma[1]=r,ma[2]=N,ma[3]=R;w=ca.cull_enable;w!==z.cull_enable&&(w?f.enable(2884):f.disable(2884),z.cull_enable=w);w=ca.cull_face;w!==z.cull_face&&(f.cullFace(w),
z.cull_face=w);w=ca.frontFace;w!==z.frontFace&&(f.frontFace(w),z.frontFace=w);w=ca.lineWidth;w!==z.lineWidth&&(f.lineWidth(w),z.lineWidth=w);w=ca.polygonOffset_enable;w!==z.polygonOffset_enable&&(w?f.enable(32823):f.disable(32823),z.polygonOffset_enable=w);w=ga[0];r=ga[1];if(w!==S[0]||r!==S[1])f.polygonOffset(w,r),S[0]=w,S[1]=r;w=ca.sample_alpha;w!==z.sample_alpha&&(w?f.enable(32926):f.disable(32926),z.sample_alpha=w);w=ca.sample_enable;w!==z.sample_enable&&(w?f.enable(32928):f.disable(32928),z.sample_enable=
w);w=K[0];r=K[1];if(w!==y[0]||r!==y[1])f.sampleCoverage(w,r),y[0]=w,y[1]=r;w=ca.stencil_enable;w!==z.stencil_enable&&(w?f.enable(2960):f.disable(2960),z.stencil_enable=w);w=ca.stencil_mask;w!==z.stencil_mask&&(f.stencilMask(w),z.stencil_mask=w);w=Q[0];r=Q[1];N=Q[2];if(w!==xa[0]||r!==xa[1]||N!==xa[2])f.stencilFunc(w,r,N),xa[0]=w,xa[1]=r,xa[2]=N;w=H[0];r=H[1];N=H[2];R=H[3];if(w!==ea[0]||r!==ea[1]||N!==ea[2]||R!==ea[3])f.stencilOpSeparate(w,r,N,R),ea[0]=w,ea[1]=r,ea[2]=N,ea[3]=R;w=oa[0];r=oa[1];N=oa[2];
R=oa[3];if(w!==n[0]||r!==n[1]||N!==n[2]||R!==n[3])f.stencilOpSeparate(w,r,N,R),n[0]=w,n[1]=r,n[2]=N,n[3]=R;w=ca.scissor_enable;w!==z.scissor_enable&&(w?f.enable(3089):f.disable(3089),z.scissor_enable=w);w=q[0];r=q[1];N=q[2];R=q[3];if(w!==P[0]||r!==P[1]||N!==P[2]||R!==P[3])f.scissor(w,r,N,R),P[0]=w,P[1]=r,P[2]=N,P[3]=R;w=T[0];r=T[1];N=T[2];R=T[3];if(w!==la[0]||r!==la[1]||N!==la[2]||R!==la[3])f.viewport(w,r,N,R),la[0]=w,la[1]=r,la[2]=N,la[3]=R;z.dirty=!1}if(w=z.profile)v=performance.now(),M.count++;
r=G.program(G.vert,G.frag,D);f.useProgram(r.program);da.setVAO(null);N=r.id;(R=qa[N])||(R=qa[N]=J(r));R.call(this,e);da.setVAO(null);d.center=k;d.distance=t;d.eye=p;d.phi=u;d.projection=x;d.theta=L;d.up=F;d.view=O;w&&(M.cpuTime+=performance.now()-v)},scope:function(a,b,c){var f,g,e,n,h,m,l,v,r,k,q,t,A,y,B,I,w,C,D;f=d.center;g=d.distance;e=d.eye;n=d.phi;h=d.projection;m=x.call(this,d,a,c);l=d.theta;v=d.up;r=d.view;d.center=O;d.distance=2.302585092994046;d.eye=X;d.phi=0;d.projection=m;d.theta=0;d.up=
u;d.view=F;if(m=z.profile)k=performance.now(),M.count++;q=d.center;t=p[1];p[1]=q;A=d.distance;q=p[2];p[2]=A;y=d.eye;A=p[3];p[3]=y;B=d.phi;y=p[4];p[4]=B;I=d.projection;B=p[5];p[5]=I;w=d.theta;I=p[6];p[6]=w;C=d.up;w=p[7];p[7]=C;C=d.view;D=p[8];p[8]=C;b(d,a,c);d.center=f;d.distance=g;d.eye=e;d.phi=n;d.projection=h;d.theta=l;d.up=v;d.view=r;m&&(M.cpuTime+=performance.now()-k);p[1]=t;p[2]=q;p[3]=A;p[4]=y;p[5]=B;p[6]=I;p[7]=w;p[8]=D},batch:function(b,g){var e,h,m,p,u,L,x,J,v,r,N,F,E;e=d.center;h=d.distance;
m=d.eye;p=d.phi;u=d.projection;L=V.call(this,d,b,0);x=d.theta;J=d.up;v=d.view;d.center=Y;d.distance=2.302585092994046;d.eye=t;d.phi=0;d.projection=L;d.theta=0;d.up=k;d.view=w;L=W.next;L!==W.cur&&(L?f.bindFramebuffer(36160,L.framebuffer):f.bindFramebuffer(36160,null),W.cur=L);if(z.dirty){L=ca.dither;L!==z.dither&&(L?f.enable(3024):f.disable(3024),z.dither=L);L=ca.blend_enable;L!==z.blend_enable&&(L?f.enable(3042):f.disable(3042),z.blend_enable=L);L=C[0];N=C[1];F=C[2];E=C[3];if(L!==B[0]||N!==B[1]||
F!==B[2]||E!==B[3])f.blendColor(L,N,F,E),B[0]=L,B[1]=N,B[2]=F,B[3]=E;L=c[0];N=c[1];if(L!==l[0]||N!==l[1])f.blendEquationSeparate(L,N),l[0]=L,l[1]=N;L=a[0];N=a[1];F=a[2];E=a[3];if(L!==U[0]||N!==U[1]||F!==U[2]||E!==U[3])f.blendFuncSeparate(L,N,F,E),U[0]=L,U[1]=N,U[2]=F,U[3]=E;L=ca.depth_enable;L!==z.depth_enable&&(L?f.enable(2929):f.disable(2929),z.depth_enable=L);L=ca.depth_func;L!==z.depth_func&&(f.depthFunc(L),z.depth_func=L);L=ia[0];N=ia[1];if(L!==Z[0]||N!==Z[1])f.depthRange(L,N),Z[0]=L,Z[1]=N;
L=ca.depth_mask;L!==z.depth_mask&&(f.depthMask(L),z.depth_mask=L);L=A[0];N=A[1];F=A[2];E=A[3];if(L!==ma[0]||N!==ma[1]||F!==ma[2]||E!==ma[3])f.colorMask(L,N,F,E),ma[0]=L,ma[1]=N,ma[2]=F,ma[3]=E;L=ca.cull_enable;L!==z.cull_enable&&(L?f.enable(2884):f.disable(2884),z.cull_enable=L);L=ca.cull_face;L!==z.cull_face&&(f.cullFace(L),z.cull_face=L);L=ca.frontFace;L!==z.frontFace&&(f.frontFace(L),z.frontFace=L);L=ca.lineWidth;L!==z.lineWidth&&(f.lineWidth(L),z.lineWidth=L);L=ca.polygonOffset_enable;L!==z.polygonOffset_enable&&
(L?f.enable(32823):f.disable(32823),z.polygonOffset_enable=L);L=ga[0];N=ga[1];if(L!==S[0]||N!==S[1])f.polygonOffset(L,N),S[0]=L,S[1]=N;L=ca.sample_alpha;L!==z.sample_alpha&&(L?f.enable(32926):f.disable(32926),z.sample_alpha=L);L=ca.sample_enable;L!==z.sample_enable&&(L?f.enable(32928):f.disable(32928),z.sample_enable=L);L=K[0];N=K[1];if(L!==y[0]||N!==y[1])f.sampleCoverage(L,N),y[0]=L,y[1]=N;L=ca.stencil_enable;L!==z.stencil_enable&&(L?f.enable(2960):f.disable(2960),z.stencil_enable=L);L=ca.stencil_mask;
L!==z.stencil_mask&&(f.stencilMask(L),z.stencil_mask=L);L=Q[0];N=Q[1];F=Q[2];if(L!==xa[0]||N!==xa[1]||F!==xa[2])f.stencilFunc(L,N,F),xa[0]=L,xa[1]=N,xa[2]=F;L=H[0];N=H[1];F=H[2];E=H[3];if(L!==ea[0]||N!==ea[1]||F!==ea[2]||E!==ea[3])f.stencilOpSeparate(L,N,F,E),ea[0]=L,ea[1]=N,ea[2]=F,ea[3]=E;L=oa[0];N=oa[1];F=oa[2];E=oa[3];if(L!==n[0]||N!==n[1]||F!==n[2]||E!==n[3])f.stencilOpSeparate(L,N,F,E),n[0]=L,n[1]=N,n[2]=F,n[3]=E;L=ca.scissor_enable;L!==z.scissor_enable&&(L?f.enable(3089):f.disable(3089),z.scissor_enable=
L);L=q[0];N=q[1];F=q[2];E=q[3];if(L!==P[0]||N!==P[1]||F!==P[2]||E!==P[3])f.scissor(L,N,F,E),P[0]=L,P[1]=N,P[2]=F,P[3]=E;L=T[0];N=T[1];F=T[2];E=T[3];if(L!==la[0]||N!==la[1]||F!==la[2]||E!==la[3])f.viewport(L,N,F,E),la[0]=L,la[1]=N,la[2]=F,la[3]=E;z.dirty=!1}if(L=z.profile)r=performance.now(),M.count+=g;N=G.program(G.vert,G.frag,D);f.useProgram(N.program);da.setVAO(null);F=N.id;(E=Da[F])||(E=Da[F]=sa(N));E.call(this,b,g);da.setVAO(null);d.center=e;d.distance=h;d.eye=m;d.phi=p;d.projection=u;d.theta=
x;d.up=J;d.view=v;L&&(M.cpuTime+=performance.now()-r)}}},"$27,position,projection,tex,uv,view":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W,f,ca,G,p,da,C,B,c,l){var a,U,A,ma,ia,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L,ac,Ta,v,r,N,ta,va,Ba,Gb;a=e.attributes;U=e.context;A=e.current;ma=e.draw;ia=e.framebuffer;Z=e.gl;ga=e.isArrayLike;S=e.next;K=e.shader;y=e.uniforms;q=e.vao;P=S.blend_color;Q=A.blend_color;xa=S.blend_equation;oa=A.blend_equation;n=S.blend_func;H=A.blend_func;
ea=S.colorMask;T=A.colorMask;la=S.depth_range;qa=A.depth_range;Da=S.polygonOffset_offset;za=A.polygonOffset_offset;ha=S.sample_coverage;Ea=A.sample_coverage;ja=S.scissor_box;pa=A.scissor_box;Aa=S.stencil_func;Ia=A.stencil_func;L=S.stencil_opBack;ac=A.stencil_opBack;Ta=S.stencil_opFront;v=A.stencil_opFront;r=S.viewport;N=A.viewport;ta=new Float32Array(16);va=new Float32Array(16);Ba=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(d){var f,e,k,t;f=ia.next;f!==ia.cur&&(f?Z.bindFramebuffer(36160,
f.framebuffer):Z.bindFramebuffer(36160,null),ia.cur=f);if(A.dirty){var p;f=S.dither;f!==A.dither&&(f?Z.enable(3024):Z.disable(3024),A.dither=f);f=S.blend_enable;f!==A.blend_enable&&(f?Z.enable(3042):Z.disable(3042),A.blend_enable=f);f=P[0];k=P[1];t=P[2];p=P[3];if(f!==Q[0]||k!==Q[1]||t!==Q[2]||p!==Q[3])Z.blendColor(f,k,t,p),Q[0]=f,Q[1]=k,Q[2]=t,Q[3]=p;f=xa[0];k=xa[1];if(f!==oa[0]||k!==oa[1])Z.blendEquationSeparate(f,k),oa[0]=f,oa[1]=k;f=n[0];k=n[1];t=n[2];p=n[3];if(f!==H[0]||k!==H[1]||t!==H[2]||p!==
H[3])Z.blendFuncSeparate(f,k,t,p),H[0]=f,H[1]=k,H[2]=t,H[3]=p;f=S.depth_enable;f!==A.depth_enable&&(f?Z.enable(2929):Z.disable(2929),A.depth_enable=f);f=S.depth_func;f!==A.depth_func&&(Z.depthFunc(f),A.depth_func=f);f=la[0];k=la[1];if(f!==qa[0]||k!==qa[1])Z.depthRange(f,k),qa[0]=f,qa[1]=k;f=S.depth_mask;f!==A.depth_mask&&(Z.depthMask(f),A.depth_mask=f);f=ea[0];k=ea[1];t=ea[2];p=ea[3];if(f!==T[0]||k!==T[1]||t!==T[2]||p!==T[3])Z.colorMask(f,k,t,p),T[0]=f,T[1]=k,T[2]=t,T[3]=p;f=S.cull_enable;f!==A.cull_enable&&
(f?Z.enable(2884):Z.disable(2884),A.cull_enable=f);f=S.cull_face;f!==A.cull_face&&(Z.cullFace(f),A.cull_face=f);f=S.frontFace;f!==A.frontFace&&(Z.frontFace(f),A.frontFace=f);f=S.lineWidth;f!==A.lineWidth&&(Z.lineWidth(f),A.lineWidth=f);f=S.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?Z.enable(32823):Z.disable(32823),A.polygonOffset_enable=f);f=Da[0];k=Da[1];if(f!==za[0]||k!==za[1])Z.polygonOffset(f,k),za[0]=f,za[1]=k;f=S.sample_alpha;f!==A.sample_alpha&&(f?Z.enable(32926):Z.disable(32926),
A.sample_alpha=f);f=S.sample_enable;f!==A.sample_enable&&(f?Z.enable(32928):Z.disable(32928),A.sample_enable=f);f=ha[0];k=ha[1];if(f!==Ea[0]||k!==Ea[1])Z.sampleCoverage(f,k),Ea[0]=f,Ea[1]=k;f=S.stencil_enable;f!==A.stencil_enable&&(f?Z.enable(2960):Z.disable(2960),A.stencil_enable=f);f=S.stencil_mask;f!==A.stencil_mask&&(Z.stencilMask(f),A.stencil_mask=f);f=Aa[0];k=Aa[1];t=Aa[2];if(f!==Ia[0]||k!==Ia[1]||t!==Ia[2])Z.stencilFunc(f,k,t),Ia[0]=f,Ia[1]=k,Ia[2]=t;f=Ta[0];k=Ta[1];t=Ta[2];p=Ta[3];if(f!==
v[0]||k!==v[1]||t!==v[2]||p!==v[3])Z.stencilOpSeparate(f,k,t,p),v[0]=f,v[1]=k,v[2]=t,v[3]=p;f=L[0];k=L[1];t=L[2];p=L[3];if(f!==ac[0]||k!==ac[1]||t!==ac[2]||p!==ac[3])Z.stencilOpSeparate(f,k,t,p),ac[0]=f,ac[1]=k,ac[2]=t,ac[3]=p;f=S.scissor_enable;f!==A.scissor_enable&&(f?Z.enable(3089):Z.disable(3089),A.scissor_enable=f);f=ja[0];k=ja[1];t=ja[2];p=ja[3];if(f!==pa[0]||k!==pa[1]||t!==pa[2]||p!==pa[3])Z.scissor(f,k,t,p),pa[0]=f,pa[1]=k,pa[2]=t,pa[3]=p;f=r[0];k=r[1];t=r[2];p=r[3];if(f!==N[0]||k!==N[1]||
t!==N[2]||p!==N[3])Z.viewport(f,k,t,p),N[0]=f,N[1]=k,N[2]=t,N[3]=p;A.dirty=!1}if(f=A.profile)e=performance.now(),M.count++;Z.useProgram(m.program);q.setVAO(null);k=da.location;t=a[k];t.buffer||Z.enableVertexAttribArray(k);if(t.type!==g.dtype||3!==t.size||t.buffer!==g||!1!==t.normalized||0!==t.offset||0!==t.stride)Z.bindBuffer(34962,g.buffer),Z.vertexAttribPointer(k,3,g.dtype,!1,0,0),t.type=g.dtype,t.size=3,t.buffer=g,t.normalized=!1,t.offset=0,t.stride=0;k=c.location;t=a[k];t.buffer||Z.enableVertexAttribArray(k);
if(t.type!==h.dtype||2!==t.size||t.buffer!==h||!1!==t.normalized||0!==t.offset||0!==t.stride)Z.bindBuffer(34962,h.buffer),Z.vertexAttribPointer(k,2,h.dtype,!1,0,0),t.type=h.dtype,t.size=2,t.buffer=h,t.normalized=!1,t.offset=0,t.stride=0;k=b.call(this,U,d,0);ga(k)&&16===k.length||R.commandRaise(E,D);Z.uniformMatrix4fv(C.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(ta[0]=k[0],ta[1]=k[1],ta[2]=k[2],ta[3]=k[3],ta[4]=k[4],ta[5]=k[5],ta[6]=k[6],ta[7]=k[7],ta[8]=k[8],ta[9]=k[9],ta[10]=k[10],
ta[11]=k[11],ta[12]=k[12],ta[13]=k[13],ta[14]=k[14],ta[15]=k[15],ta));k=J.call(this,U,d,0);ga(k)&&16===k.length||R.commandRaise(O,D);Z.uniformMatrix4fv(l.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(va[0]=k[0],va[1]=k[1],va[2]=k[2],va[3]=k[3],va[4]=k[4],va[5]=k[5],va[6]=k[6],va[7]=k[7],va[8]=k[8],va[9]=k[9],va[10]=k[10],va[11]=k[11],va[12]=k[12],va[13]=k[13],va[14]=k[14],va[15]=k[15],va));(d=d.texture)&&"framebuffer"===d._reglType&&(d=d.color[0]);"function"===typeof d&&"texture2d"===
d._reglType||R.commandRaise(X,D);d=d._texture;Z.uniform1i(B.location,d.bind());x&&Z.bindBuffer(34963,x.buffer.buffer);k=x.primType;t=x.vertCount-0;0<=t||R.commandRaise(u,D);t&&(Z.drawElements(k,t,x.type,0<<(x.type-5121>>1)),q.setVAO(null),f&&(M.cpuTime+=performance.now()-e),d.unbind())},scope:function(a,b,c){var d,f,e,n,m,l,v,r,q,p,N,z,u,L,B,C,G,T,x,H,ha,E,J,P,Q,S,O,ac,W,X,qa,za,Z,ja,ca;if(d=A.profile)f=performance.now(),M.count++;e=ma.elements;ma.elements=F;n=ma.offset;ma.offset=0;m=F.vertCount-
0;0<=m||R.commandRaise(Y,D);l=ma.count;ma.count=m;v=F.primType;m=ma.primitive;ma.primitive=v;r=t.call(this,U,a,c);v=y[3];y[3]=r;q=a.texture;r=y[5];y[5]=q;p=V.call(this,U,a,c);q=y[4];y[4]=p;p=k.buffer;k.buffer=g;N=k.divisor;k.divisor=0;z=k.normalized;k.normalized=!1;u=k.offset;k.offset=0;L=k.size;k.size=0;B=k.state;k.state=1;C=k.stride;k.stride=0;G=k.type;k.type=g.dtype;T=k.w;k.w=0;x=k.x;k.x=0;H=k.y;k.y=0;ha=k.z;k.z=0;E=w.buffer;w.buffer=h;J=w.divisor;w.divisor=0;P=w.normalized;w.normalized=!1;Q=w.offset;
w.offset=0;S=w.size;w.size=0;O=w.state;w.state=1;ac=w.stride;w.stride=0;W=w.type;w.type=h.dtype;X=w.w;w.w=0;qa=w.x;w.x=0;za=w.y;w.y=0;Z=w.z;w.z=0;ja=K.vert;K.vert=2;ca=K.frag;K.frag=1;b(U,a,c);d&&(M.cpuTime+=performance.now()-f);ma.elements=e;ma.offset=n;ma.count=l;ma.primitive=m;y[3]=v;y[5]=r;y[4]=q;k.buffer=p;k.divisor=N;k.normalized=z;k.offset=u;k.size=L;k.state=B;k.stride=C;k.type=G;k.w=T;k.x=x;k.y=H;k.z=ha;w.buffer=E;w.divisor=J;w.normalized=P;w.offset=Q;w.size=S;w.state=O;w.stride=ac;w.type=
W;w.w=X;w.x=qa;w.y=za;w.z=Z;K.vert=ja;K.frag=ca},batch:function(b,e){var k,m,t,u;k=ia.next;k!==ia.cur&&(k?Z.bindFramebuffer(36160,k.framebuffer):Z.bindFramebuffer(36160,null),ia.cur=k);if(A.dirty){var y,w,x;k=S.dither;k!==A.dither&&(k?Z.enable(3024):Z.disable(3024),A.dither=k);k=S.blend_enable;k!==A.blend_enable&&(k?Z.enable(3042):Z.disable(3042),A.blend_enable=k);k=P[0];y=P[1];w=P[2];x=P[3];if(k!==Q[0]||y!==Q[1]||w!==Q[2]||x!==Q[3])Z.blendColor(k,y,w,x),Q[0]=k,Q[1]=y,Q[2]=w,Q[3]=x;k=xa[0];y=xa[1];
if(k!==oa[0]||y!==oa[1])Z.blendEquationSeparate(k,y),oa[0]=k,oa[1]=y;k=n[0];y=n[1];w=n[2];x=n[3];if(k!==H[0]||y!==H[1]||w!==H[2]||x!==H[3])Z.blendFuncSeparate(k,y,w,x),H[0]=k,H[1]=y,H[2]=w,H[3]=x;k=S.depth_enable;k!==A.depth_enable&&(k?Z.enable(2929):Z.disable(2929),A.depth_enable=k);k=S.depth_func;k!==A.depth_func&&(Z.depthFunc(k),A.depth_func=k);k=la[0];y=la[1];if(k!==qa[0]||y!==qa[1])Z.depthRange(k,y),qa[0]=k,qa[1]=y;k=S.depth_mask;k!==A.depth_mask&&(Z.depthMask(k),A.depth_mask=k);k=ea[0];y=ea[1];
w=ea[2];x=ea[3];if(k!==T[0]||y!==T[1]||w!==T[2]||x!==T[3])Z.colorMask(k,y,w,x),T[0]=k,T[1]=y,T[2]=w,T[3]=x;k=S.cull_enable;k!==A.cull_enable&&(k?Z.enable(2884):Z.disable(2884),A.cull_enable=k);k=S.cull_face;k!==A.cull_face&&(Z.cullFace(k),A.cull_face=k);k=S.frontFace;k!==A.frontFace&&(Z.frontFace(k),A.frontFace=k);k=S.lineWidth;k!==A.lineWidth&&(Z.lineWidth(k),A.lineWidth=k);k=S.polygonOffset_enable;k!==A.polygonOffset_enable&&(k?Z.enable(32823):Z.disable(32823),A.polygonOffset_enable=k);k=Da[0];
y=Da[1];if(k!==za[0]||y!==za[1])Z.polygonOffset(k,y),za[0]=k,za[1]=y;k=S.sample_alpha;k!==A.sample_alpha&&(k?Z.enable(32926):Z.disable(32926),A.sample_alpha=k);k=S.sample_enable;k!==A.sample_enable&&(k?Z.enable(32928):Z.disable(32928),A.sample_enable=k);k=ha[0];y=ha[1];if(k!==Ea[0]||y!==Ea[1])Z.sampleCoverage(k,y),Ea[0]=k,Ea[1]=y;k=S.stencil_enable;k!==A.stencil_enable&&(k?Z.enable(2960):Z.disable(2960),A.stencil_enable=k);k=S.stencil_mask;k!==A.stencil_mask&&(Z.stencilMask(k),A.stencil_mask=k);k=
Aa[0];y=Aa[1];w=Aa[2];if(k!==Ia[0]||y!==Ia[1]||w!==Ia[2])Z.stencilFunc(k,y,w),Ia[0]=k,Ia[1]=y,Ia[2]=w;k=Ta[0];y=Ta[1];w=Ta[2];x=Ta[3];if(k!==v[0]||y!==v[1]||w!==v[2]||x!==v[3])Z.stencilOpSeparate(k,y,w,x),v[0]=k,v[1]=y,v[2]=w,v[3]=x;k=L[0];y=L[1];w=L[2];x=L[3];if(k!==ac[0]||y!==ac[1]||w!==ac[2]||x!==ac[3])Z.stencilOpSeparate(k,y,w,x),ac[0]=k,ac[1]=y,ac[2]=w,ac[3]=x;k=S.scissor_enable;k!==A.scissor_enable&&(k?Z.enable(3089):Z.disable(3089),A.scissor_enable=k);k=ja[0];y=ja[1];w=ja[2];x=ja[3];if(k!==
pa[0]||y!==pa[1]||w!==pa[2]||x!==pa[3])Z.scissor(k,y,w,x),pa[0]=k,pa[1]=y,pa[2]=w,pa[3]=x;k=r[0];y=r[1];w=r[2];x=r[3];if(k!==N[0]||y!==N[1]||w!==N[2]||x!==N[3])Z.viewport(k,y,w,x),N[0]=k,N[1]=y,N[2]=w,N[3]=x;A.dirty=!1}if(k=A.profile)m=performance.now(),M.count+=e;Z.useProgram(sa.program);q.setVAO(null);y=da.location;w=a[y];w.buffer||Z.enableVertexAttribArray(y);if(w.type!==g.dtype||3!==w.size||w.buffer!==g||!1!==w.normalized||0!==w.offset||0!==w.stride)Z.bindBuffer(34962,g.buffer),Z.vertexAttribPointer(y,
3,g.dtype,!1,0,0),w.type=g.dtype,w.size=3,w.buffer=g,w.normalized=!1,w.offset=0,w.stride=0;y=c.location;w=a[y];w.buffer||Z.enableVertexAttribArray(y);if(w.type!==h.dtype||2!==w.size||w.buffer!==h||!1!==w.normalized||0!==w.offset||0!==w.stride)Z.bindBuffer(34962,h.buffer),Z.vertexAttribPointer(y,2,h.dtype,!1,0,0),w.type=h.dtype,w.size=2,w.buffer=h,w.normalized=!1,w.offset=0,w.stride=0;y=d.call(this,U,u,t);ga(y)&&16===y.length||R.commandRaise(z,D);Z.uniformMatrix4fv(C.location,!1,Array.isArray(y)||
y instanceof Float32Array?y:(Ba[0]=y[0],Ba[1]=y[1],Ba[2]=y[2],Ba[3]=y[3],Ba[4]=y[4],Ba[5]=y[5],Ba[6]=y[6],Ba[7]=y[7],Ba[8]=y[8],Ba[9]=y[9],Ba[10]=y[10],Ba[11]=y[11],Ba[12]=y[12],Ba[13]=y[13],Ba[14]=y[14],Ba[15]=y[15],Ba));t=W.call(this,U,u,t);ga(t)&&16===t.length||R.commandRaise(f,D);Z.uniformMatrix4fv(l.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Gb[0]=t[0],Gb[1]=t[1],Gb[2]=t[2],Gb[3]=t[3],Gb[4]=t[4],Gb[5]=t[5],Gb[6]=t[6],Gb[7]=t[7],Gb[8]=t[8],Gb[9]=t[9],Gb[10]=t[10],Gb[11]=t[11],
Gb[12]=t[12],Gb[13]=t[13],Gb[14]=t[14],Gb[15]=t[15],Gb));G&&Z.bindBuffer(34963,G.buffer.buffer);y=G.primType;w=G.vertCount-0;0<=w||R.commandRaise(p,D);for(t=0;t<e;++t)u=b[t],(u=u.texture)&&"framebuffer"===u._reglType&&(u=u.color[0]),"function"===typeof u&&"texture2d"===u._reglType||R.commandRaise(ca,D),u=u._texture,Z.uniform1i(B.location,u.bind()),w&&(Z.drawElements(y,w,G.type,0<<(G.type-5121>>1)),u.unbind());q.setVAO(null);k&&(M.cpuTime+=performance.now()-m)}}},"$19,normal,position,projection,view":function(e,
R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V,k,w,sa,d,z,W){var f,ca,G,p,da,C,B,c,l,a,U,A,ma,ia,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa,Ia,L;f=e.attributes;ca=e.context;G=e.current;p=e.draw;da=e.framebuffer;C=e.gl;B=e.isArrayLike;c=e.next;l=e.shader;a=e.uniforms;U=e.vao;A=c.blend_color;ma=G.blend_color;ia=c.blend_equation;Z=G.blend_equation;ga=c.blend_func;S=G.blend_func;K=c.colorMask;y=G.colorMask;q=c.depth_range;P=G.depth_range;Q=c.polygonOffset_offset;xa=G.polygonOffset_offset;oa=c.sample_coverage;
n=G.sample_coverage;H=c.scissor_box;ea=G.scissor_box;T=c.stencil_func;la=G.stencil_func;qa=c.stencil_opBack;Da=G.stencil_opBack;za=c.stencil_opFront;ha=G.stencil_opFront;Ea=c.viewport;ja=G.viewport;pa=new Float32Array(16);Aa=new Float32Array(16);Ia=new Float32Array(16);L=new Float32Array(16);return{draw:function(e){var k,l,r;e=da.next;e!==da.cur&&(e?C.bindFramebuffer(36160,e.framebuffer):C.bindFramebuffer(36160,null),da.cur=e);if(G.dirty){var t;e=c.dither;e!==G.dither&&(e?C.enable(3024):C.disable(3024),
G.dither=e);e=c.blend_enable;e!==G.blend_enable&&(e?C.enable(3042):C.disable(3042),G.blend_enable=e);e=A[0];l=A[1];r=A[2];t=A[3];if(e!==ma[0]||l!==ma[1]||r!==ma[2]||t!==ma[3])C.blendColor(e,l,r,t),ma[0]=e,ma[1]=l,ma[2]=r,ma[3]=t;e=ia[0];l=ia[1];if(e!==Z[0]||l!==Z[1])C.blendEquationSeparate(e,l),Z[0]=e,Z[1]=l;e=ga[0];l=ga[1];r=ga[2];t=ga[3];if(e!==S[0]||l!==S[1]||r!==S[2]||t!==S[3])C.blendFuncSeparate(e,l,r,t),S[0]=e,S[1]=l,S[2]=r,S[3]=t;e=c.depth_enable;e!==G.depth_enable&&(e?C.enable(2929):C.disable(2929),
G.depth_enable=e);e=c.depth_func;e!==G.depth_func&&(C.depthFunc(e),G.depth_func=e);e=q[0];l=q[1];if(e!==P[0]||l!==P[1])C.depthRange(e,l),P[0]=e,P[1]=l;e=c.depth_mask;e!==G.depth_mask&&(C.depthMask(e),G.depth_mask=e);e=K[0];l=K[1];r=K[2];t=K[3];if(e!==y[0]||l!==y[1]||r!==y[2]||t!==y[3])C.colorMask(e,l,r,t),y[0]=e,y[1]=l,y[2]=r,y[3]=t;e=c.cull_enable;e!==G.cull_enable&&(e?C.enable(2884):C.disable(2884),G.cull_enable=e);e=c.cull_face;e!==G.cull_face&&(C.cullFace(e),G.cull_face=e);e=c.frontFace;e!==G.frontFace&&
(C.frontFace(e),G.frontFace=e);e=c.lineWidth;e!==G.lineWidth&&(C.lineWidth(e),G.lineWidth=e);e=c.polygonOffset_enable;e!==G.polygonOffset_enable&&(e?C.enable(32823):C.disable(32823),G.polygonOffset_enable=e);e=Q[0];l=Q[1];if(e!==xa[0]||l!==xa[1])C.polygonOffset(e,l),xa[0]=e,xa[1]=l;e=c.sample_alpha;e!==G.sample_alpha&&(e?C.enable(32926):C.disable(32926),G.sample_alpha=e);e=c.sample_enable;e!==G.sample_enable&&(e?C.enable(32928):C.disable(32928),G.sample_enable=e);e=oa[0];l=oa[1];if(e!==n[0]||l!==
n[1])C.sampleCoverage(e,l),n[0]=e,n[1]=l;e=c.stencil_enable;e!==G.stencil_enable&&(e?C.enable(2960):C.disable(2960),G.stencil_enable=e);e=c.stencil_mask;e!==G.stencil_mask&&(C.stencilMask(e),G.stencil_mask=e);e=T[0];l=T[1];r=T[2];if(e!==la[0]||l!==la[1]||r!==la[2])C.stencilFunc(e,l,r),la[0]=e,la[1]=l,la[2]=r;e=za[0];l=za[1];r=za[2];t=za[3];if(e!==ha[0]||l!==ha[1]||r!==ha[2]||t!==ha[3])C.stencilOpSeparate(e,l,r,t),ha[0]=e,ha[1]=l,ha[2]=r,ha[3]=t;e=qa[0];l=qa[1];r=qa[2];t=qa[3];if(e!==Da[0]||l!==Da[1]||
r!==Da[2]||t!==Da[3])C.stencilOpSeparate(e,l,r,t),Da[0]=e,Da[1]=l,Da[2]=r,Da[3]=t;e=c.scissor_enable;e!==G.scissor_enable&&(e?C.enable(3089):C.disable(3089),G.scissor_enable=e);e=H[0];l=H[1];r=H[2];t=H[3];if(e!==ea[0]||l!==ea[1]||r!==ea[2]||t!==ea[3])C.scissor(e,l,r,t),ea[0]=e,ea[1]=l,ea[2]=r,ea[3]=t;e=Ea[0];l=Ea[1];r=Ea[2];t=Ea[3];if(e!==ja[0]||l!==ja[1]||r!==ja[2]||t!==ja[3])C.viewport(e,l,r,t),ja[0]=e,ja[1]=l,ja[2]=r,ja[3]=t;G.dirty=!1}if(e=G.profile)k=performance.now(),M.count++;C.useProgram(m.program);
U.setVAO(null);l=d.location;r=f[l];r.buffer||C.enableVertexAttribArray(l);if(r.type!==g.dtype||3!==r.size||r.buffer!==g||!1!==r.normalized||0!==r.offset||0!==r.stride)C.bindBuffer(34962,g.buffer),C.vertexAttribPointer(l,3,g.dtype,!1,0,0),r.type=g.dtype,r.size=3,r.buffer=g,r.normalized=!1,r.offset=0,r.stride=0;l=sa.location;r=f[l];r.buffer||C.enableVertexAttribArray(l);if(r.type!==h.dtype||3!==r.size||r.buffer!==h||!1!==r.normalized||0!==r.offset||0!==r.stride)C.bindBuffer(34962,h.buffer),C.vertexAttribPointer(l,
3,h.dtype,!1,0,0),r.type=h.dtype,r.size=3,r.buffer=h,r.normalized=!1,r.offset=0,r.stride=0;l=a[5];B(l)&&16===l.length||R.commandRaise(b,D);C.uniformMatrix4fv(z.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(pa[0]=l[0],pa[1]=l[1],pa[2]=l[2],pa[3]=l[3],pa[4]=l[4],pa[5]=l[5],pa[6]=l[6],pa[7]=l[7],pa[8]=l[8],pa[9]=l[9],pa[10]=l[10],pa[11]=l[11],pa[12]=l[12],pa[13]=l[13],pa[14]=l[14],pa[15]=l[15],pa));l=a[8];B(l)&&16===l.length||R.commandRaise(E,D);C.uniformMatrix4fv(W.location,!1,Array.isArray(l)||
l instanceof Float32Array?l:(Aa[0]=l[0],Aa[1]=l[1],Aa[2]=l[2],Aa[3]=l[3],Aa[4]=l[4],Aa[5]=l[5],Aa[6]=l[6],Aa[7]=l[7],Aa[8]=l[8],Aa[9]=l[9],Aa[10]=l[10],Aa[11]=l[11],Aa[12]=l[12],Aa[13]=l[13],Aa[14]=l[14],Aa[15]=l[15],Aa));J&&C.bindBuffer(34963,J.buffer.buffer);l=J.primType;r=J.vertCount-0;0<=r||R.commandRaise(O,D);r&&(C.drawElements(l,r,J.type,0<<(J.type-5121>>1)),U.setVAO(null),e&&(M.cpuTime+=performance.now()-k))},scope:function(a,b,c){var d,f,e,k,n,m,q,t,y,z,w,A,L,B,C,T,H,K,ha,E,J,P,Q,S,O,V,W,
qa,za,Y,Z,ja;if(d=G.profile)f=performance.now(),M.count++;e=p.elements;p.elements=X;k=p.offset;p.offset=0;n=X.vertCount-0;0<=n||R.commandRaise(x,D);m=p.count;p.count=n;q=X.primType;n=p.primitive;p.primitive=q;q=u.buffer;u.buffer=h;t=u.divisor;u.divisor=0;y=u.normalized;u.normalized=!1;z=u.offset;u.offset=0;w=u.size;u.size=0;A=u.state;u.state=1;L=u.stride;u.stride=0;B=u.type;u.type=h.dtype;C=u.w;u.w=0;T=u.x;u.x=0;H=u.y;u.y=0;K=u.z;u.z=0;ha=F.buffer;F.buffer=g;E=F.divisor;F.divisor=0;J=F.normalized;
F.normalized=!1;P=F.offset;F.offset=0;Q=F.size;F.size=0;S=F.state;F.state=1;O=F.stride;F.stride=0;V=F.type;F.type=g.dtype;W=F.w;F.w=0;qa=F.x;F.x=0;za=F.y;F.y=0;Y=F.z;F.z=0;Z=l.vert;l.vert=10;ja=l.frag;l.frag=9;b(ca,a,c);d&&(M.cpuTime+=performance.now()-f);p.elements=e;p.offset=k;p.count=m;p.primitive=n;u.buffer=q;u.divisor=t;u.normalized=y;u.offset=z;u.size=w;u.state=A;u.stride=L;u.type=B;u.w=C;u.x=T;u.y=H;u.z=K;F.buffer=ha;F.divisor=E;F.normalized=J;F.offset=P;F.size=Q;F.state=S;F.stride=O;F.type=
V;F.w=W;F.x=qa;F.y=za;F.z=Y;l.vert=Z;l.frag=ja},batch:function(b,e){var l,m,p;l=da.next;l!==da.cur&&(l?C.bindFramebuffer(36160,l.framebuffer):C.bindFramebuffer(36160,null),da.cur=l);if(G.dirty){var u,x;l=c.dither;l!==G.dither&&(l?C.enable(3024):C.disable(3024),G.dither=l);l=c.blend_enable;l!==G.blend_enable&&(l?C.enable(3042):C.disable(3042),G.blend_enable=l);l=A[0];p=A[1];u=A[2];x=A[3];if(l!==ma[0]||p!==ma[1]||u!==ma[2]||x!==ma[3])C.blendColor(l,p,u,x),ma[0]=l,ma[1]=p,ma[2]=u,ma[3]=x;l=ia[0];p=ia[1];
if(l!==Z[0]||p!==Z[1])C.blendEquationSeparate(l,p),Z[0]=l,Z[1]=p;l=ga[0];p=ga[1];u=ga[2];x=ga[3];if(l!==S[0]||p!==S[1]||u!==S[2]||x!==S[3])C.blendFuncSeparate(l,p,u,x),S[0]=l,S[1]=p,S[2]=u,S[3]=x;l=c.depth_enable;l!==G.depth_enable&&(l?C.enable(2929):C.disable(2929),G.depth_enable=l);l=c.depth_func;l!==G.depth_func&&(C.depthFunc(l),G.depth_func=l);l=q[0];p=q[1];if(l!==P[0]||p!==P[1])C.depthRange(l,p),P[0]=l,P[1]=p;l=c.depth_mask;l!==G.depth_mask&&(C.depthMask(l),G.depth_mask=l);l=K[0];p=K[1];u=K[2];
x=K[3];if(l!==y[0]||p!==y[1]||u!==y[2]||x!==y[3])C.colorMask(l,p,u,x),y[0]=l,y[1]=p,y[2]=u,y[3]=x;l=c.cull_enable;l!==G.cull_enable&&(l?C.enable(2884):C.disable(2884),G.cull_enable=l);l=c.cull_face;l!==G.cull_face&&(C.cullFace(l),G.cull_face=l);l=c.frontFace;l!==G.frontFace&&(C.frontFace(l),G.frontFace=l);l=c.lineWidth;l!==G.lineWidth&&(C.lineWidth(l),G.lineWidth=l);l=c.polygonOffset_enable;l!==G.polygonOffset_enable&&(l?C.enable(32823):C.disable(32823),G.polygonOffset_enable=l);l=Q[0];p=Q[1];if(l!==
xa[0]||p!==xa[1])C.polygonOffset(l,p),xa[0]=l,xa[1]=p;l=c.sample_alpha;l!==G.sample_alpha&&(l?C.enable(32926):C.disable(32926),G.sample_alpha=l);l=c.sample_enable;l!==G.sample_enable&&(l?C.enable(32928):C.disable(32928),G.sample_enable=l);l=oa[0];p=oa[1];if(l!==n[0]||p!==n[1])C.sampleCoverage(l,p),n[0]=l,n[1]=p;l=c.stencil_enable;l!==G.stencil_enable&&(l?C.enable(2960):C.disable(2960),G.stencil_enable=l);l=c.stencil_mask;l!==G.stencil_mask&&(C.stencilMask(l),G.stencil_mask=l);l=T[0];p=T[1];u=T[2];
if(l!==la[0]||p!==la[1]||u!==la[2])C.stencilFunc(l,p,u),la[0]=l,la[1]=p,la[2]=u;l=za[0];p=za[1];u=za[2];x=za[3];if(l!==ha[0]||p!==ha[1]||u!==ha[2]||x!==ha[3])C.stencilOpSeparate(l,p,u,x),ha[0]=l,ha[1]=p,ha[2]=u,ha[3]=x;l=qa[0];p=qa[1];u=qa[2];x=qa[3];if(l!==Da[0]||p!==Da[1]||u!==Da[2]||x!==Da[3])C.stencilOpSeparate(l,p,u,x),Da[0]=l,Da[1]=p,Da[2]=u,Da[3]=x;l=c.scissor_enable;l!==G.scissor_enable&&(l?C.enable(3089):C.disable(3089),G.scissor_enable=l);l=H[0];p=H[1];u=H[2];x=H[3];if(l!==ea[0]||p!==ea[1]||
u!==ea[2]||x!==ea[3])C.scissor(l,p,u,x),ea[0]=l,ea[1]=p,ea[2]=u,ea[3]=x;l=Ea[0];p=Ea[1];u=Ea[2];x=Ea[3];if(l!==ja[0]||p!==ja[1]||u!==ja[2]||x!==ja[3])C.viewport(l,p,u,x),ja[0]=l,ja[1]=p,ja[2]=u,ja[3]=x;G.dirty=!1}if(l=G.profile)m=performance.now(),M.count+=e;C.useProgram(Y.program);U.setVAO(null);p=d.location;u=f[p];u.buffer||C.enableVertexAttribArray(p);if(u.type!==g.dtype||3!==u.size||u.buffer!==g||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,g.buffer),C.vertexAttribPointer(p,
3,g.dtype,!1,0,0),u.type=g.dtype,u.size=3,u.buffer=g,u.normalized=!1,u.offset=0,u.stride=0;p=sa.location;u=f[p];u.buffer||C.enableVertexAttribArray(p);if(u.type!==h.dtype||3!==u.size||u.buffer!==h||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,h.buffer),C.vertexAttribPointer(p,3,h.dtype,!1,0,0),u.type=h.dtype,u.size=3,u.buffer=h,u.normalized=!1,u.offset=0,u.stride=0;p=a[5];B(p)&&16===p.length||R.commandRaise(t,D);C.uniformMatrix4fv(z.location,!1,Array.isArray(p)||p instanceof Float32Array?
p:(Ia[0]=p[0],Ia[1]=p[1],Ia[2]=p[2],Ia[3]=p[3],Ia[4]=p[4],Ia[5]=p[5],Ia[6]=p[6],Ia[7]=p[7],Ia[8]=p[8],Ia[9]=p[9],Ia[10]=p[10],Ia[11]=p[11],Ia[12]=p[12],Ia[13]=p[13],Ia[14]=p[14],Ia[15]=p[15],Ia));p=a[8];B(p)&&16===p.length||R.commandRaise(V,D);C.uniformMatrix4fv(W.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(L[0]=p[0],L[1]=p[1],L[2]=p[2],L[3]=p[3],L[4]=p[4],L[5]=p[5],L[6]=p[6],L[7]=p[7],L[8]=p[8],L[9]=p[9],L[10]=p[10],L[11]=p[11],L[12]=p[12],L[13]=p[13],L[14]=p[14],L[15]=p[15],L));k&&
C.bindBuffer(34963,k.buffer.buffer);u=k.primType;x=k.vertCount-0;0<=x||R.commandRaise(w,D);for(p=0;p<e;++p)x&&C.drawElements(u,x,k.type,0<<(k.type-5121>>1));U.setVAO(null);l&&(M.cpuTime+=performance.now()-m)}}},"$14,angle,color,position":function(e,R,D,M,m,g,h,b,E,J,O,X,x,u,F,Y,t,V){var k,w,U,d,z,W,f,ca,G,p,da,C,B,c,l,a,ia,A,ma,Ba,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa;k=e.attributes;w=e.context;U=e.current;d=e.draw;z=e.elements;W=e.framebuffer;f=e.gl;ca=e.isArrayLike;G=e.next;p=e.shader;da=e.uniforms;
C=e.vao;B=G.blend_color;c=U.blend_color;l=G.blend_equation;a=U.blend_equation;ia=G.blend_func;A=U.blend_func;ma=G.colorMask;Ba=U.colorMask;Z=G.depth_range;ga=U.depth_range;S=G.polygonOffset_offset;K=U.polygonOffset_offset;y=G.sample_coverage;q=U.sample_coverage;P=G.scissor_box;Q=U.scissor_box;xa=G.stencil_func;oa=U.stencil_func;n=G.stencil_opBack;H=U.stencil_opBack;ea=G.stencil_opFront;T=U.stencil_opFront;la=G.viewport;qa=U.viewport;return{draw:function(e){var p,u,x,F;p=W.next;p!==W.cur&&(p?f.bindFramebuffer(36160,
p.framebuffer):f.bindFramebuffer(36160,null),W.cur=p);if(U.dirty){var J;p=G.dither;p!==U.dither&&(p?f.enable(3024):f.disable(3024),U.dither=p);p=G.blend_enable;p!==U.blend_enable&&(p?f.enable(3042):f.disable(3042),U.blend_enable=p);p=B[0];x=B[1];F=B[2];J=B[3];if(p!==c[0]||x!==c[1]||F!==c[2]||J!==c[3])f.blendColor(p,x,F,J),c[0]=p,c[1]=x,c[2]=F,c[3]=J;p=l[0];x=l[1];if(p!==a[0]||x!==a[1])f.blendEquationSeparate(p,x),a[0]=p,a[1]=x;p=ia[0];x=ia[1];F=ia[2];J=ia[3];if(p!==A[0]||x!==A[1]||F!==A[2]||J!==A[3])f.blendFuncSeparate(p,
x,F,J),A[0]=p,A[1]=x,A[2]=F,A[3]=J;p=G.depth_func;p!==U.depth_func&&(f.depthFunc(p),U.depth_func=p);p=Z[0];x=Z[1];if(p!==ga[0]||x!==ga[1])f.depthRange(p,x),ga[0]=p,ga[1]=x;p=G.depth_mask;p!==U.depth_mask&&(f.depthMask(p),U.depth_mask=p);p=ma[0];x=ma[1];F=ma[2];J=ma[3];if(p!==Ba[0]||x!==Ba[1]||F!==Ba[2]||J!==Ba[3])f.colorMask(p,x,F,J),Ba[0]=p,Ba[1]=x,Ba[2]=F,Ba[3]=J;p=G.cull_enable;p!==U.cull_enable&&(p?f.enable(2884):f.disable(2884),U.cull_enable=p);p=G.cull_face;p!==U.cull_face&&(f.cullFace(p),U.cull_face=
p);p=G.frontFace;p!==U.frontFace&&(f.frontFace(p),U.frontFace=p);p=G.lineWidth;p!==U.lineWidth&&(f.lineWidth(p),U.lineWidth=p);p=G.polygonOffset_enable;p!==U.polygonOffset_enable&&(p?f.enable(32823):f.disable(32823),U.polygonOffset_enable=p);p=S[0];x=S[1];if(p!==K[0]||x!==K[1])f.polygonOffset(p,x),K[0]=p,K[1]=x;p=G.sample_alpha;p!==U.sample_alpha&&(p?f.enable(32926):f.disable(32926),U.sample_alpha=p);p=G.sample_enable;p!==U.sample_enable&&(p?f.enable(32928):f.disable(32928),U.sample_enable=p);p=y[0];
x=y[1];if(p!==q[0]||x!==q[1])f.sampleCoverage(p,x),q[0]=p,q[1]=x;p=G.stencil_enable;p!==U.stencil_enable&&(p?f.enable(2960):f.disable(2960),U.stencil_enable=p);p=G.stencil_mask;p!==U.stencil_mask&&(f.stencilMask(p),U.stencil_mask=p);p=xa[0];x=xa[1];F=xa[2];if(p!==oa[0]||x!==oa[1]||F!==oa[2])f.stencilFunc(p,x,F),oa[0]=p,oa[1]=x,oa[2]=F;p=ea[0];x=ea[1];F=ea[2];J=ea[3];if(p!==T[0]||x!==T[1]||F!==T[2]||J!==T[3])f.stencilOpSeparate(p,x,F,J),T[0]=p,T[1]=x,T[2]=F,T[3]=J;p=n[0];x=n[1];F=n[2];J=n[3];if(p!==
H[0]||x!==H[1]||F!==H[2]||J!==H[3])f.stencilOpSeparate(p,x,F,J),H[0]=p,H[1]=x,H[2]=F,H[3]=J;p=G.scissor_enable;p!==U.scissor_enable&&(p?f.enable(3089):f.disable(3089),U.scissor_enable=p);p=P[0];x=P[1];F=P[2];J=P[3];if(p!==Q[0]||x!==Q[1]||F!==Q[2]||J!==Q[3])f.scissor(p,x,F,J),Q[0]=p,Q[1]=x,Q[2]=F,Q[3]=J;p=la[0];x=la[1];F=la[2];J=la[3];if(p!==qa[0]||x!==qa[1]||F!==qa[2]||J!==qa[3])f.viewport(p,x,F,J),qa[0]=p,qa[1]=x,qa[2]=F,qa[3]=J}f.disable(2929);U.depth_enable=!1;if(p=U.profile)u=performance.now(),
M.count++;f.useProgram(m.program);C.setVAO(null);x=V.location;F=k[x];F.buffer||f.enableVertexAttribArray(x);if(F.type!==g.dtype||2!==F.size||F.buffer!==g||!1!==F.normalized||0!==F.offset||0!==F.stride)f.bindBuffer(34962,g.buffer),f.vertexAttribPointer(x,2,g.dtype,!1,0,0),F.type=g.dtype,F.size=2,F.buffer=g,F.normalized=!1,F.offset=0,F.stride=0;x=h.call(this,w,e,0);"number"!==typeof x&&R.commandRaise(b,D);f.uniform1f(Y.location,x);e=e.color;ca(e)&&4===e.length||R.commandRaise(E,D);f.uniform4f(t.location,
e[0],e[1],e[2],e[3]);(e=d.elements)?f.bindBuffer(34963,e.buffer.buffer):C.currentVAO&&(e=z.getElements(C.currentVAO.elements))&&f.bindBuffer(34963,e.buffer.buffer);x=d.primitive;F=d.offset;e?f.drawElements(x,3,e.type,F<<(e.type-5121>>1)):f.drawArrays(x,F,3);U.dirty=!0;C.setVAO(null);p&&(M.cpuTime+=performance.now()-u)},scope:function(a,b,c){var f,e,l,k,n,h,m,q,t,r,u,y,z,x,A,B,C,D,F,T;f=G.depth_enable;G.depth_enable=!1;if(e=U.profile)l=performance.now(),M.count++;k=d.count;d.count=3;n=J.call(this,
w,a,c);h=da[3];da[3]=n;m=a.color;n=da[4];da[4]=m;m=O.buffer;O.buffer=g;q=O.divisor;O.divisor=0;t=O.normalized;O.normalized=!1;r=O.offset;O.offset=0;u=O.size;O.size=0;y=O.state;O.state=1;z=O.stride;O.stride=0;x=O.type;O.type=g.dtype;A=O.w;O.w=0;B=O.x;O.x=0;C=O.y;O.y=0;D=O.z;O.z=0;F=p.vert;p.vert=2;T=p.frag;p.frag=1;U.dirty=!0;b(w,a,c);G.depth_enable=f;e&&(M.cpuTime+=performance.now()-l);d.count=k;da[3]=h;da[4]=n;O.buffer=m;O.divisor=q;O.normalized=t;O.offset=r;O.size=u;O.state=y;O.stride=z;O.type=
x;O.w=A;O.x=B;O.y=C;O.z=D;p.vert=F;p.frag=T;U.dirty=!0},batch:function(b,e){var h,m,p,J;h=W.next;h!==W.cur&&(h?f.bindFramebuffer(36160,h.framebuffer):f.bindFramebuffer(36160,null),W.cur=h);if(U.dirty){var E,O,L;h=G.dither;h!==U.dither&&(h?f.enable(3024):f.disable(3024),U.dither=h);h=G.blend_enable;h!==U.blend_enable&&(h?f.enable(3042):f.disable(3042),U.blend_enable=h);h=B[0];E=B[1];O=B[2];L=B[3];if(h!==c[0]||E!==c[1]||O!==c[2]||L!==c[3])f.blendColor(h,E,O,L),c[0]=h,c[1]=E,c[2]=O,c[3]=L;h=l[0];E=l[1];
if(h!==a[0]||E!==a[1])f.blendEquationSeparate(h,E),a[0]=h,a[1]=E;h=ia[0];E=ia[1];O=ia[2];L=ia[3];if(h!==A[0]||E!==A[1]||O!==A[2]||L!==A[3])f.blendFuncSeparate(h,E,O,L),A[0]=h,A[1]=E,A[2]=O,A[3]=L;h=G.depth_func;h!==U.depth_func&&(f.depthFunc(h),U.depth_func=h);h=Z[0];E=Z[1];if(h!==ga[0]||E!==ga[1])f.depthRange(h,E),ga[0]=h,ga[1]=E;h=G.depth_mask;h!==U.depth_mask&&(f.depthMask(h),U.depth_mask=h);h=ma[0];E=ma[1];O=ma[2];L=ma[3];if(h!==Ba[0]||E!==Ba[1]||O!==Ba[2]||L!==Ba[3])f.colorMask(h,E,O,L),Ba[0]=
h,Ba[1]=E,Ba[2]=O,Ba[3]=L;h=G.cull_enable;h!==U.cull_enable&&(h?f.enable(2884):f.disable(2884),U.cull_enable=h);h=G.cull_face;h!==U.cull_face&&(f.cullFace(h),U.cull_face=h);h=G.frontFace;h!==U.frontFace&&(f.frontFace(h),U.frontFace=h);h=G.lineWidth;h!==U.lineWidth&&(f.lineWidth(h),U.lineWidth=h);h=G.polygonOffset_enable;h!==U.polygonOffset_enable&&(h?f.enable(32823):f.disable(32823),U.polygonOffset_enable=h);h=S[0];E=S[1];if(h!==K[0]||E!==K[1])f.polygonOffset(h,E),K[0]=h,K[1]=E;h=G.sample_alpha;h!==
U.sample_alpha&&(h?f.enable(32926):f.disable(32926),U.sample_alpha=h);h=G.sample_enable;h!==U.sample_enable&&(h?f.enable(32928):f.disable(32928),U.sample_enable=h);h=y[0];E=y[1];if(h!==q[0]||E!==q[1])f.sampleCoverage(h,E),q[0]=h,q[1]=E;h=G.stencil_enable;h!==U.stencil_enable&&(h?f.enable(2960):f.disable(2960),U.stencil_enable=h);h=G.stencil_mask;h!==U.stencil_mask&&(f.stencilMask(h),U.stencil_mask=h);h=xa[0];E=xa[1];O=xa[2];if(h!==oa[0]||E!==oa[1]||O!==oa[2])f.stencilFunc(h,E,O),oa[0]=h,oa[1]=E,oa[2]=
O;h=ea[0];E=ea[1];O=ea[2];L=ea[3];if(h!==T[0]||E!==T[1]||O!==T[2]||L!==T[3])f.stencilOpSeparate(h,E,O,L),T[0]=h,T[1]=E,T[2]=O,T[3]=L;h=n[0];E=n[1];O=n[2];L=n[3];if(h!==H[0]||E!==H[1]||O!==H[2]||L!==H[3])f.stencilOpSeparate(h,E,O,L),H[0]=h,H[1]=E,H[2]=O,H[3]=L;h=G.scissor_enable;h!==U.scissor_enable&&(h?f.enable(3089):f.disable(3089),U.scissor_enable=h);h=P[0];E=P[1];O=P[2];L=P[3];if(h!==Q[0]||E!==Q[1]||O!==Q[2]||L!==Q[3])f.scissor(h,E,O,L),Q[0]=h,Q[1]=E,Q[2]=O,Q[3]=L;h=la[0];E=la[1];O=la[2];L=la[3];
if(h!==qa[0]||E!==qa[1]||O!==qa[2]||L!==qa[3])f.viewport(h,E,O,L),qa[0]=h,qa[1]=E,qa[2]=O,qa[3]=L}f.disable(2929);U.depth_enable=!1;if(h=U.profile)m=performance.now(),M.count+=e;f.useProgram(X.program);C.setVAO(null);E=V.location;O=k[E];O.buffer||f.enableVertexAttribArray(E);if(O.type!==g.dtype||2!==O.size||O.buffer!==g||!1!==O.normalized||0!==O.offset||0!==O.stride)f.bindBuffer(34962,g.buffer),f.vertexAttribPointer(E,2,g.dtype,!1,0,0),O.type=g.dtype,O.size=2,O.buffer=g,O.normalized=!1,O.offset=0,
O.stride=0;p=x.call(this,w,J,p);"number"!==typeof p&&R.commandRaise(u,D);f.uniform1f(Y.location,p);(E=d.elements)?f.bindBuffer(34963,E.buffer.buffer):C.currentVAO&&(E=z.getElements(C.currentVAO.elements))&&f.bindBuffer(34963,E.buffer.buffer);O=d.primitive;L=d.offset;for(p=0;p<e;++p){J=b[p];var da,Ta,v,r,N,ta,va;da=J.color;ca(da)&&4===da.length||R.commandRaise(F,D);J=da[0];v=da[1];N=da[2];da=da[3];p&&Ta===J&&r===v&&ta===N&&va===da||(Ta=J,r=v,ta=N,va=da,f.uniform4f(t.location,J,v,N,da));E?f.drawElements(O,
3,E.type,L<<(E.type-5121>>1)):f.drawArrays(O,L,3)}U.dirty=!0;C.setVAO(null);h&&(M.cpuTime+=performance.now()-m)}}},"$13,color,position":function(e,R,D,M,m,g,h,b,E,J,O,U,x,u,F,Y){var t,V,k,w,ia,d,z,W,f,ca,G,p,da,C,B,c,l,a,wa,A,ma,Ba,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea;t=e.attributes;V=e.context;k=e.current;w=e.draw;ia=e.framebuffer;d=e.gl;z=e.next;W=e.shader;f=e.uniforms;ca=e.vao;G=z.blend_color;p=k.blend_color;da=z.blend_equation;C=k.blend_equation;B=z.blend_func;c=k.blend_func;l=z.colorMask;a=k.colorMask;
wa=z.depth_range;A=k.depth_range;ma=z.polygonOffset_offset;Ba=k.polygonOffset_offset;Z=z.sample_coverage;ga=k.sample_coverage;S=z.scissor_box;K=k.scissor_box;y=z.stencil_func;q=k.stencil_func;P=z.stencil_opBack;Q=k.stencil_opBack;xa=z.stencil_opFront;oa=k.stencil_opFront;n=z.viewport;H=k.viewport;ea=[1,0,0,1];return{draw:function(f){var e,u,w;f=ia.next;f!==ia.cur&&(f?d.bindFramebuffer(36160,f.framebuffer):d.bindFramebuffer(36160,null),ia.cur=f);if(k.dirty){var x;f=z.dither;f!==k.dither&&(f?d.enable(3024):
d.disable(3024),k.dither=f);f=z.blend_enable;f!==k.blend_enable&&(f?d.enable(3042):d.disable(3042),k.blend_enable=f);f=G[0];u=G[1];w=G[2];x=G[3];if(f!==p[0]||u!==p[1]||w!==p[2]||x!==p[3])d.blendColor(f,u,w,x),p[0]=f,p[1]=u,p[2]=w,p[3]=x;f=da[0];u=da[1];if(f!==C[0]||u!==C[1])d.blendEquationSeparate(f,u),C[0]=f,C[1]=u;f=B[0];u=B[1];w=B[2];x=B[3];if(f!==c[0]||u!==c[1]||w!==c[2]||x!==c[3])d.blendFuncSeparate(f,u,w,x),c[0]=f,c[1]=u,c[2]=w,c[3]=x;f=z.depth_enable;f!==k.depth_enable&&(f?d.enable(2929):d.disable(2929),
k.depth_enable=f);f=z.depth_func;f!==k.depth_func&&(d.depthFunc(f),k.depth_func=f);f=wa[0];u=wa[1];if(f!==A[0]||u!==A[1])d.depthRange(f,u),A[0]=f,A[1]=u;f=z.depth_mask;f!==k.depth_mask&&(d.depthMask(f),k.depth_mask=f);f=l[0];u=l[1];w=l[2];x=l[3];if(f!==a[0]||u!==a[1]||w!==a[2]||x!==a[3])d.colorMask(f,u,w,x),a[0]=f,a[1]=u,a[2]=w,a[3]=x;f=z.cull_enable;f!==k.cull_enable&&(f?d.enable(2884):d.disable(2884),k.cull_enable=f);f=z.cull_face;f!==k.cull_face&&(d.cullFace(f),k.cull_face=f);f=z.frontFace;f!==
k.frontFace&&(d.frontFace(f),k.frontFace=f);f=z.polygonOffset_enable;f!==k.polygonOffset_enable&&(f?d.enable(32823):d.disable(32823),k.polygonOffset_enable=f);f=ma[0];u=ma[1];if(f!==Ba[0]||u!==Ba[1])d.polygonOffset(f,u),Ba[0]=f,Ba[1]=u;f=z.sample_alpha;f!==k.sample_alpha&&(f?d.enable(32926):d.disable(32926),k.sample_alpha=f);f=z.sample_enable;f!==k.sample_enable&&(f?d.enable(32928):d.disable(32928),k.sample_enable=f);f=Z[0];u=Z[1];if(f!==ga[0]||u!==ga[1])d.sampleCoverage(f,u),ga[0]=f,ga[1]=u;f=z.stencil_enable;
f!==k.stencil_enable&&(f?d.enable(2960):d.disable(2960),k.stencil_enable=f);f=z.stencil_mask;f!==k.stencil_mask&&(d.stencilMask(f),k.stencil_mask=f);f=y[0];u=y[1];w=y[2];if(f!==q[0]||u!==q[1]||w!==q[2])d.stencilFunc(f,u,w),q[0]=f,q[1]=u,q[2]=w;f=xa[0];u=xa[1];w=xa[2];x=xa[3];if(f!==oa[0]||u!==oa[1]||w!==oa[2]||x!==oa[3])d.stencilOpSeparate(f,u,w,x),oa[0]=f,oa[1]=u,oa[2]=w,oa[3]=x;f=P[0];u=P[1];w=P[2];x=P[3];if(f!==Q[0]||u!==Q[1]||w!==Q[2]||x!==Q[3])d.stencilOpSeparate(f,u,w,x),Q[0]=f,Q[1]=u,Q[2]=
w,Q[3]=x;f=z.scissor_enable;f!==k.scissor_enable&&(f?d.enable(3089):d.disable(3089),k.scissor_enable=f);f=S[0];u=S[1];w=S[2];x=S[3];if(f!==K[0]||u!==K[1]||w!==K[2]||x!==K[3])d.scissor(f,u,w,x),K[0]=f,K[1]=u,K[2]=w,K[3]=x;f=n[0];u=n[1];w=n[2];x=n[3];if(f!==H[0]||u!==H[1]||w!==H[2]||x!==H[3])d.viewport(f,u,w,x),H[0]=f,H[1]=u,H[2]=w,H[3]=x}d.lineWidth(1);k.lineWidth=1;if(f=k.profile)e=performance.now(),M.count++;d.useProgram(m.program);ca.setVAO(null);u=Y.location;w=t[u];w.buffer||d.enableVertexAttribArray(u);
if(w.type!==g.dtype||2!==w.size||w.buffer!==g||!1!==w.normalized||0!==w.offset||0!==w.stride)d.bindBuffer(34962,g.buffer),d.vertexAttribPointer(u,2,g.dtype,!1,0,0),w.type=g.dtype,w.size=2,w.buffer=g,w.normalized=!1,w.offset=0,w.stride=0;d.uniform4f(F.location,1,0,0,1);h&&d.bindBuffer(34963,h.buffer.buffer);u=h.primType;w=h.vertCount-0;0<=w||R.commandRaise(b,D);w&&(d.drawElements(u,w,h.type,0<<(h.type-5121>>1)),k.dirty=!0,ca.setVAO(null),f&&(M.cpuTime+=performance.now()-e))},scope:function(a,b,c){var d,
e,l,h,n,m,p,q,t,u,y,v,r,x,A,B,C,F,G,I,H,K;d=z.lineWidth;z.lineWidth=1;if(e=k.profile)l=performance.now(),M.count++;h=w.elements;w.elements=E;n=w.offset;w.offset=0;m=E.vertCount-0;0<=m||R.commandRaise(J,D);p=w.count;w.count=m;q=E.primType;m=w.primitive;w.primitive=q;q=f[3];f[3]=ea;t=O.buffer;O.buffer=g;u=O.divisor;O.divisor=0;y=O.normalized;O.normalized=!1;v=O.offset;O.offset=0;r=O.size;O.size=0;x=O.state;O.state=1;A=O.stride;O.stride=0;B=O.type;O.type=g.dtype;C=O.w;O.w=0;F=O.x;O.x=0;G=O.y;O.y=0;I=
O.z;O.z=0;H=W.vert;W.vert=2;K=W.frag;W.frag=1;k.dirty=!0;b(V,a,c);z.lineWidth=d;e&&(M.cpuTime+=performance.now()-l);w.elements=h;w.offset=n;w.count=p;w.primitive=m;f[3]=q;O.buffer=t;O.divisor=u;O.normalized=y;O.offset=v;O.size=r;O.state=x;O.stride=A;O.type=B;O.w=C;O.x=F;O.y=G;O.z=I;W.vert=H;W.frag=K;k.dirty=!0},batch:function(b,f){var e,h,m;e=ia.next;e!==ia.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),ia.cur=e);if(k.dirty){var w,E;e=z.dither;e!==k.dither&&(e?d.enable(3024):
d.disable(3024),k.dither=e);e=z.blend_enable;e!==k.blend_enable&&(e?d.enable(3042):d.disable(3042),k.blend_enable=e);e=G[0];m=G[1];w=G[2];E=G[3];if(e!==p[0]||m!==p[1]||w!==p[2]||E!==p[3])d.blendColor(e,m,w,E),p[0]=e,p[1]=m,p[2]=w,p[3]=E;e=da[0];m=da[1];if(e!==C[0]||m!==C[1])d.blendEquationSeparate(e,m),C[0]=e,C[1]=m;e=B[0];m=B[1];w=B[2];E=B[3];if(e!==c[0]||m!==c[1]||w!==c[2]||E!==c[3])d.blendFuncSeparate(e,m,w,E),c[0]=e,c[1]=m,c[2]=w,c[3]=E;e=z.depth_enable;e!==k.depth_enable&&(e?d.enable(2929):d.disable(2929),
k.depth_enable=e);e=z.depth_func;e!==k.depth_func&&(d.depthFunc(e),k.depth_func=e);e=wa[0];m=wa[1];if(e!==A[0]||m!==A[1])d.depthRange(e,m),A[0]=e,A[1]=m;e=z.depth_mask;e!==k.depth_mask&&(d.depthMask(e),k.depth_mask=e);e=l[0];m=l[1];w=l[2];E=l[3];if(e!==a[0]||m!==a[1]||w!==a[2]||E!==a[3])d.colorMask(e,m,w,E),a[0]=e,a[1]=m,a[2]=w,a[3]=E;e=z.cull_enable;e!==k.cull_enable&&(e?d.enable(2884):d.disable(2884),k.cull_enable=e);e=z.cull_face;e!==k.cull_face&&(d.cullFace(e),k.cull_face=e);e=z.frontFace;e!==
k.frontFace&&(d.frontFace(e),k.frontFace=e);e=z.polygonOffset_enable;e!==k.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),k.polygonOffset_enable=e);e=ma[0];m=ma[1];if(e!==Ba[0]||m!==Ba[1])d.polygonOffset(e,m),Ba[0]=e,Ba[1]=m;e=z.sample_alpha;e!==k.sample_alpha&&(e?d.enable(32926):d.disable(32926),k.sample_alpha=e);e=z.sample_enable;e!==k.sample_enable&&(e?d.enable(32928):d.disable(32928),k.sample_enable=e);e=Z[0];m=Z[1];if(e!==ga[0]||m!==ga[1])d.sampleCoverage(e,m),ga[0]=e,ga[1]=m;e=z.stencil_enable;
e!==k.stencil_enable&&(e?d.enable(2960):d.disable(2960),k.stencil_enable=e);e=z.stencil_mask;e!==k.stencil_mask&&(d.stencilMask(e),k.stencil_mask=e);e=y[0];m=y[1];w=y[2];if(e!==q[0]||m!==q[1]||w!==q[2])d.stencilFunc(e,m,w),q[0]=e,q[1]=m,q[2]=w;e=xa[0];m=xa[1];w=xa[2];E=xa[3];if(e!==oa[0]||m!==oa[1]||w!==oa[2]||E!==oa[3])d.stencilOpSeparate(e,m,w,E),oa[0]=e,oa[1]=m,oa[2]=w,oa[3]=E;e=P[0];m=P[1];w=P[2];E=P[3];if(e!==Q[0]||m!==Q[1]||w!==Q[2]||E!==Q[3])d.stencilOpSeparate(e,m,w,E),Q[0]=e,Q[1]=m,Q[2]=
w,Q[3]=E;e=z.scissor_enable;e!==k.scissor_enable&&(e?d.enable(3089):d.disable(3089),k.scissor_enable=e);e=S[0];m=S[1];w=S[2];E=S[3];if(e!==K[0]||m!==K[1]||w!==K[2]||E!==K[3])d.scissor(e,m,w,E),K[0]=e,K[1]=m,K[2]=w,K[3]=E;e=n[0];m=n[1];w=n[2];E=n[3];if(e!==H[0]||m!==H[1]||w!==H[2]||E!==H[3])d.viewport(e,m,w,E),H[0]=e,H[1]=m,H[2]=w,H[3]=E}d.lineWidth(1);k.lineWidth=1;if(e=k.profile)h=performance.now(),M.count+=f;d.useProgram(U.program);ca.setVAO(null);m=Y.location;w=t[m];w.buffer||d.enableVertexAttribArray(m);
if(w.type!==g.dtype||2!==w.size||w.buffer!==g||!1!==w.normalized||0!==w.offset||0!==w.stride)d.bindBuffer(34962,g.buffer),d.vertexAttribPointer(m,2,g.dtype,!1,0,0),w.type=g.dtype,w.size=2,w.buffer=g,w.normalized=!1,w.offset=0,w.stride=0;d.uniform4f(F.location,1,0,0,1);x&&d.bindBuffer(34963,x.buffer.buffer);w=x.primType;E=x.vertCount-0;0<=E||R.commandRaise(u,D);for(m=0;m<f;++m)E&&d.drawElements(w,E,x.type,0<<(x.type-5121>>1));k.dirty=!0;ca.setVAO(null);e&&(M.cpuTime+=performance.now()-h)}}},"$20,mouse,position,t,texture":function(e,
R,D,M,m,g,h,b,E,J,O,U,x,u,F,Y,t,V,k,w,ia,d,z,W,f){var ca,G,p,da,C,B,c,l,a,wa,A,ma,Ba,Z,ga,S,K,y,q,P,Q,xa,oa,n,H,ea,T,la,qa,Da,za,ha,Ea,ja,pa,Aa;ca=e.attributes;G=e.context;p=e.current;da=e.draw;C=e.elements;B=e.framebuffer;c=e.gl;l=e.isArrayLike;a=e.next;wa=e.shader;A=e.uniforms;ma=e.vao;Ba=a.blend_color;Z=p.blend_color;ga=a.blend_equation;S=p.blend_equation;K=a.blend_func;y=p.blend_func;q=a.colorMask;P=p.colorMask;Q=a.depth_range;xa=p.depth_range;oa=a.polygonOffset_offset;n=p.polygonOffset_offset;
H=a.sample_coverage;ea=p.sample_coverage;T=a.scissor_box;la=p.scissor_box;qa=a.stencil_func;Da=p.stencil_func;za=a.stencil_opBack;ha=p.stencil_opBack;Ea=a.stencil_opFront;ja=p.stencil_opFront;pa=a.viewport;Aa=p.viewport;return{draw:function(e){var k,t,u,v;k=B.next;k!==B.cur&&(k?c.bindFramebuffer(36160,k.framebuffer):c.bindFramebuffer(36160,null),B.cur=k);if(p.dirty){var r;k=a.dither;k!==p.dither&&(k?c.enable(3024):c.disable(3024),p.dither=k);k=a.blend_enable;k!==p.blend_enable&&(k?c.enable(3042):
c.disable(3042),p.blend_enable=k);k=Ba[0];u=Ba[1];v=Ba[2];r=Ba[3];if(k!==Z[0]||u!==Z[1]||v!==Z[2]||r!==Z[3])c.blendColor(k,u,v,r),Z[0]=k,Z[1]=u,Z[2]=v,Z[3]=r;k=ga[0];u=ga[1];if(k!==S[0]||u!==S[1])c.blendEquationSeparate(k,u),S[0]=k,S[1]=u;k=K[0];u=K[1];v=K[2];r=K[3];if(k!==y[0]||u!==y[1]||v!==y[2]||r!==y[3])c.blendFuncSeparate(k,u,v,r),y[0]=k,y[1]=u,y[2]=v,y[3]=r;k=a.depth_enable;k!==p.depth_enable&&(k?c.enable(2929):c.disable(2929),p.depth_enable=k);k=a.depth_func;k!==p.depth_func&&(c.depthFunc(k),
p.depth_func=k);k=Q[0];u=Q[1];if(k!==xa[0]||u!==xa[1])c.depthRange(k,u),xa[0]=k,xa[1]=u;k=a.depth_mask;k!==p.depth_mask&&(c.depthMask(k),p.depth_mask=k);k=q[0];u=q[1];v=q[2];r=q[3];if(k!==P[0]||u!==P[1]||v!==P[2]||r!==P[3])c.colorMask(k,u,v,r),P[0]=k,P[1]=u,P[2]=v,P[3]=r;k=a.cull_enable;k!==p.cull_enable&&(k?c.enable(2884):c.disable(2884),p.cull_enable=k);k=a.cull_face;k!==p.cull_face&&(c.cullFace(k),p.cull_face=k);k=a.frontFace;k!==p.frontFace&&(c.frontFace(k),p.frontFace=k);k=a.lineWidth;k!==p.lineWidth&&
(c.lineWidth(k),p.lineWidth=k);k=a.polygonOffset_enable;k!==p.polygonOffset_enable&&(k?c.enable(32823):c.disable(32823),p.polygonOffset_enable=k);k=oa[0];u=oa[1];if(k!==n[0]||u!==n[1])c.polygonOffset(k,u),n[0]=k,n[1]=u;k=a.sample_alpha;k!==p.sample_alpha&&(k?c.enable(32926):c.disable(32926),p.sample_alpha=k);k=a.sample_enable;k!==p.sample_enable&&(k?c.enable(32928):c.disable(32928),p.sample_enable=k);k=H[0];u=H[1];if(k!==ea[0]||u!==ea[1])c.sampleCoverage(k,u),ea[0]=k,ea[1]=u;k=a.stencil_enable;k!==
p.stencil_enable&&(k?c.enable(2960):c.disable(2960),p.stencil_enable=k);k=a.stencil_mask;k!==p.stencil_mask&&(c.stencilMask(k),p.stencil_mask=k);k=qa[0];u=qa[1];v=qa[2];if(k!==Da[0]||u!==Da[1]||v!==Da[2])c.stencilFunc(k,u,v),Da[0]=k,Da[1]=u,Da[2]=v;k=Ea[0];u=Ea[1];v=Ea[2];r=Ea[3];if(k!==ja[0]||u!==ja[1]||v!==ja[2]||r!==ja[3])c.stencilOpSeparate(k,u,v,r),ja[0]=k,ja[1]=u,ja[2]=v,ja[3]=r;k=za[0];u=za[1];v=za[2];r=za[3];if(k!==ha[0]||u!==ha[1]||v!==ha[2]||r!==ha[3])c.stencilOpSeparate(k,u,v,r),ha[0]=
k,ha[1]=u,ha[2]=v,ha[3]=r;k=a.scissor_enable;k!==p.scissor_enable&&(k?c.enable(3089):c.disable(3089),p.scissor_enable=k);k=T[0];u=T[1];v=T[2];r=T[3];if(k!==la[0]||u!==la[1]||v!==la[2]||r!==la[3])c.scissor(k,u,v,r),la[0]=k,la[1]=u,la[2]=v,la[3]=r;k=pa[0];u=pa[1];v=pa[2];r=pa[3];if(k!==Aa[0]||u!==Aa[1]||v!==Aa[2]||r!==Aa[3])c.viewport(k,u,v,r),Aa[0]=k,Aa[1]=u,Aa[2]=v,Aa[3]=r;p.dirty=!1}if(k=p.profile)t=performance.now(),M.count++;c.useProgram(m.program);ma.setVAO(null);u=z.location;v=ca[u];v.buffer||
c.enableVertexAttribArray(u);if(v.type!==g.dtype||2!==v.size||v.buffer!==g||!1!==v.normalized||0!==v.offset||0!==v.stride)c.bindBuffer(34962,g.buffer),c.vertexAttribPointer(u,2,g.dtype,!1,0,0),v.type=g.dtype,v.size=2,v.buffer=g,v.normalized=!1,v.offset=0,v.stride=0;u=h.call(this,G,e,0);l(u)&&2===u.length||R.commandRaise(b,D);c.uniform2f(d.location,u[0],u[1]);e=E.call(this,G,e,0);"number"!==typeof e&&R.commandRaise(J,D);c.uniform1f(W.location,e);c.uniform1i(f.location,O.bind());(e=da.elements)?c.bindBuffer(34963,
e.buffer.buffer):ma.currentVAO&&(e=C.getElements(ma.currentVAO.elements))&&c.bindBuffer(34963,e.buffer.buffer);u=da.primitive;v=da.offset;e?c.drawElements(u,3,e.type,v<<(e.type-5121>>1)):c.drawArrays(u,v,3);ma.setVAO(null);k&&(M.cpuTime+=performance.now()-t);O.unbind()},scope:function(a,b,c){var d,f,e,k,l,h,n,m,q,t,w,y,z,B,E,C,D,J,H,K;if(d=p.profile)f=performance.now(),M.count++;e=da.count;da.count=3;k=U.call(this,G,a,c);l=A[3];A[3]=k;h=x.call(this,G,a,c);k=A[4];A[4]=h;h=A[5];A[5]=u;n=F.buffer;F.buffer=
g;m=F.divisor;F.divisor=0;q=F.normalized;F.normalized=!1;t=F.offset;F.offset=0;w=F.size;F.size=0;y=F.state;F.state=1;z=F.stride;F.stride=0;B=F.type;F.type=g.dtype;E=F.w;F.w=0;C=F.x;F.x=0;D=F.y;F.y=0;J=F.z;F.z=0;H=wa.vert;wa.vert=2;K=wa.frag;wa.frag=1;b(G,a,c);d&&(M.cpuTime+=performance.now()-f);da.count=e;A[3]=l;A[4]=k;A[5]=h;F.buffer=n;F.divisor=m;F.normalized=q;F.offset=t;F.size=w;F.state=y;F.stride=z;F.type=B;F.w=E;F.x=C;F.y=D;F.z=J;wa.vert=H;wa.frag=K},batch:function(b,e){var h,m,u;h=B.next;h!==
B.cur&&(h?c.bindFramebuffer(36160,h.framebuffer):c.bindFramebuffer(36160,null),B.cur=h);if(p.dirty){var r,x,A;h=a.dither;h!==p.dither&&(h?c.enable(3024):c.disable(3024),p.dither=h);h=a.blend_enable;h!==p.blend_enable&&(h?c.enable(3042):c.disable(3042),p.blend_enable=h);h=Ba[0];r=Ba[1];x=Ba[2];A=Ba[3];if(h!==Z[0]||r!==Z[1]||x!==Z[2]||A!==Z[3])c.blendColor(h,r,x,A),Z[0]=h,Z[1]=r,Z[2]=x,Z[3]=A;h=ga[0];r=ga[1];if(h!==S[0]||r!==S[1])c.blendEquationSeparate(h,r),S[0]=h,S[1]=r;h=K[0];r=K[1];x=K[2];A=K[3];
if(h!==y[0]||r!==y[1]||x!==y[2]||A!==y[3])c.blendFuncSeparate(h,r,x,A),y[0]=h,y[1]=r,y[2]=x,y[3]=A;h=a.depth_enable;h!==p.depth_enable&&(h?c.enable(2929):c.disable(2929),p.depth_enable=h);h=a.depth_func;h!==p.depth_func&&(c.depthFunc(h),p.depth_func=h);h=Q[0];r=Q[1];if(h!==xa[0]||r!==xa[1])c.depthRange(h,r),xa[0]=h,xa[1]=r;h=a.depth_mask;h!==p.depth_mask&&(c.depthMask(h),p.depth_mask=h);h=q[0];r=q[1];x=q[2];A=q[3];if(h!==P[0]||r!==P[1]||x!==P[2]||A!==P[3])c.colorMask(h,r,x,A),P[0]=h,P[1]=r,P[2]=x,
P[3]=A;h=a.cull_enable;h!==p.cull_enable&&(h?c.enable(2884):c.disable(2884),p.cull_enable=h);h=a.cull_face;h!==p.cull_face&&(c.cullFace(h),p.cull_face=h);h=a.frontFace;h!==p.frontFace&&(c.frontFace(h),p.frontFace=h);h=a.lineWidth;h!==p.lineWidth&&(c.lineWidth(h),p.lineWidth=h);h=a.polygonOffset_enable;h!==p.polygonOffset_enable&&(h?c.enable(32823):c.disable(32823),p.polygonOffset_enable=h);h=oa[0];r=oa[1];if(h!==n[0]||r!==n[1])c.polygonOffset(h,r),n[0]=h,n[1]=r;h=a.sample_alpha;h!==p.sample_alpha&&
(h?c.enable(32926):c.disable(32926),p.sample_alpha=h);h=a.sample_enable;h!==p.sample_enable&&(h?c.enable(32928):c.disable(32928),p.sample_enable=h);h=H[0];r=H[1];if(h!==ea[0]||r!==ea[1])c.sampleCoverage(h,r),ea[0]=h,ea[1]=r;h=a.stencil_enable;h!==p.stencil_enable&&(h?c.enable(2960):c.disable(2960),p.stencil_enable=h);h=a.stencil_mask;h!==p.stencil_mask&&(c.stencilMask(h),p.stencil_mask=h);h=qa[0];r=qa[1];x=qa[2];if(h!==Da[0]||r!==Da[1]||x!==Da[2])c.stencilFunc(h,r,x),Da[0]=h,Da[1]=r,Da[2]=x;h=Ea[0];
r=Ea[1];x=Ea[2];A=Ea[3];if(h!==ja[0]||r!==ja[1]||x!==ja[2]||A!==ja[3])c.stencilOpSeparate(h,r,x,A),ja[0]=h,ja[1]=r,ja[2]=x,ja[3]=A;h=za[0];r=za[1];x=za[2];A=za[3];if(h!==ha[0]||r!==ha[1]||x!==ha[2]||A!==ha[3])c.stencilOpSeparate(h,r,x,A),ha[0]=h,ha[1]=r,ha[2]=x,ha[3]=A;h=a.scissor_enable;h!==p.scissor_enable&&(h?c.enable(3089):c.disable(3089),p.scissor_enable=h);h=T[0];r=T[1];x=T[2];A=T[3];if(h!==la[0]||r!==la[1]||x!==la[2]||A!==la[3])c.scissor(h,r,x,A),la[0]=h,la[1]=r,la[2]=x,la[3]=A;h=pa[0];r=pa[1];
x=pa[2];A=pa[3];if(h!==Aa[0]||r!==Aa[1]||x!==Aa[2]||A!==Aa[3])c.viewport(h,r,x,A),Aa[0]=h,Aa[1]=r,Aa[2]=x,Aa[3]=A;p.dirty=!1}if(h=p.profile)m=performance.now(),M.count+=e;c.useProgram(Y.program);ma.setVAO(null);r=z.location;x=ca[r];x.buffer||c.enableVertexAttribArray(r);if(x.type!==g.dtype||2!==x.size||x.buffer!==g||!1!==x.normalized||0!==x.offset||0!==x.stride)c.bindBuffer(34962,g.buffer),c.vertexAttribPointer(r,2,g.dtype,!1,0,0),x.type=g.dtype,x.size=2,x.buffer=g,x.normalized=!1,x.offset=0,x.stride=
0;r=t.call(this,G,void 0,u);l(r)&&2===r.length||R.commandRaise(V,D);c.uniform2f(d.location,r[0],r[1]);u=k.call(this,G,void 0,u);"number"!==typeof u&&R.commandRaise(w,D);c.uniform1f(W.location,u);c.uniform1i(f.location,ia.bind());(r=da.elements)?c.bindBuffer(34963,r.buffer.buffer):ma.currentVAO&&(r=C.getElements(ma.currentVAO.elements))&&c.bindBuffer(34963,r.buffer.buffer);x=da.primitive;A=da.offset;for(u=0;u<e;++u)r?c.drawElements(x,3,r.type,A<<(r.type-5121>>1)):c.drawArrays(x,A,3);ia.unbind();ma.setVAO(null);
h&&(M.cpuTime+=performance.now()-m)}}}}},{}],25:[function(U,ia,Ba){var e=U("./sorted-object-keys");ia.exports=function(R,D){for(var M=e(D),m=0;m<M.length;++m)R[M[m]]=D[M[m]];return R}},{"./sorted-object-keys":34}],26:[function(U,ia,Ba){function e(e,m,g,h,b,E){for(var D=0;D<m;++D)for(var O=e[D],R=0;R<g;++R)for(var x=O[R],u=0;u<h;++u)b[E++]=x[u]}function R(D,m,g,h,b){for(var E=1,J=g+1;J<m.length;++J)E*=m[J];var O=m[g];if(4===m.length-g){var U=m[g+1],x=m[g+2];m=m[g+3];for(J=0;J<O;++J)e(D[J],U,x,m,h,
b),b+=E}else for(J=0;J<O;++J)R(D[J],m,g+1,h,b),b+=E}var D=U("./pool");ia.exports={shape:function(e){for(var m=[];e.length;e=e[0])m.push(e.length);return m},flatten:function(M,m,g,h){var b=1;if(m.length)for(var E=0;E<m.length;++E)b*=m[E];else b=0;g=h||D.allocType(g,b);switch(m.length){case 0:break;case 1:h=m[0];for(m=0;m<h;++m)g[m]=M[m];break;case 2:h=m[0];m=m[1];for(E=b=0;E<h;++E)for(var J=M[E],O=0;O<m;++O)g[b++]=J[O];break;case 3:e(M,m[0],m[1],m[2],g,0);break;default:R(M,m,0,g,0)}return g}}},{"./pool":32}],
27:[function(U,ia,Ba){var e=U("./is-typed-array");ia.exports=function(R){return Array.isArray(R)||e(R)}},{"./is-typed-array":30}],28:[function(U,ia,Ba){var e=U("./is-typed-array");ia.exports=function(R){return!!R&&"object"===typeof R&&Array.isArray(R.shape)&&Array.isArray(R.stride)&&"number"===typeof R.offset&&R.shape.length===R.stride.length&&(Array.isArray(R.data)||e(R.data))}},{"./is-typed-array":30}],29:[function(U,ia,Ba){ia.exports=function(e){return!(e&e-1)&&!!e}},{}],30:[function(U,ia,Ba){ia.exports=
function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray}},{}],31:[function(U,ia,Ba){ia.exports=function(e,R){for(var D=Array(e),M=0;M<e;++M)D[M]=R(M);return D}},{}],32:[function(U,ia,Ba){function e(e){var m,g;m=(65535<e)<<4;e>>>=m;g=(255<e)<<3;e>>>=g;m|=g;g=(15<e)<<2;e>>>=g;m|=g;g=(3<e)<<1;return m|g|
e>>>g>>1}function R(){function M(h){a:{for(var b=16;268435456>=b;b*=16)if(h<=b){h=b;break a}h=0}b=g[e(h)>>2];return 0<b.length?b.pop():new ArrayBuffer(h)}function m(h){g[e(h.byteLength)>>2].push(h)}var g=D(8,function(){return[]});return{alloc:M,free:m,allocType:function(e,b){var g=null;switch(e){case 5120:g=new Int8Array(M(b),0,b);break;case 5121:g=new Uint8Array(M(b),0,b);break;case 5122:g=new Int16Array(M(2*b),0,b);break;case 5123:g=new Uint16Array(M(2*b),0,b);break;case 5124:g=new Int32Array(M(4*
b),0,b);break;case 5125:g=new Uint32Array(M(4*b),0,b);break;case 5126:g=new Float32Array(M(4*b),0,b);break;default:return null}return g.length!==b?g.subarray(0,b):g},freeType:function(e){m(e.buffer)}}}var D=U("./loop");U=R();U.zero=R();ia.exports=U},{"./loop":31}],33:[function(U,ia,Ba){ia.exports={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:
clearTimeout}},{}],34:[function(U,ia,Ba){ia.exports=function(e){return Object.keys(e).sort()}},{}],35:[function(U,ia,Ba){var e=U("./pool"),R=new Float32Array(1),D=new Uint32Array(R.buffer);ia.exports=function(M){for(var m=e.allocType(5123,M.length),g=0;g<M.length;++g)if(isNaN(M[g]))m[g]=65535;else if(Infinity===M[g])m[g]=31744;else if(-Infinity===M[g])m[g]=64512;else{R[0]=M[g];var h=D[0],b=h>>>31<<15,E=(h<<1>>>24)-127,h=h>>13&1023;m[g]=-24>E?b:-14>E?b+(h+1024>>-14-E):15<E?b+31744:b+(E+15<<10)+h}return m}},
{"./pool":32}],36:[function(U,ia,Ba){var e=U("./sorted-object-keys");ia.exports=function(R){return e(R).map(function(e){return R[e]})}},{"./sorted-object-keys":34}],37:[function(U,ia,Ba){function e(e,b,m){function D(){var b=window.innerWidth,g=window.innerHeight;e!==document.body&&(g=M.getBoundingClientRect(),b=g.right-g.left,g=g.bottom-g.top);M.width=m*b;M.height=m*g}var M=document.createElement("canvas");g(M.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});e.appendChild(M);
e===document.body&&(M.style.position="absolute",g(e.style,{margin:0,padding:0}));var R;e!==document.body&&"function"===typeof ResizeObserver?(R=new ResizeObserver(function(){setTimeout(D)}),R.observe(e)):window.addEventListener("resize",D,!1);D();return{canvas:M,onDestroy:function(){R?R.disconnect():window.removeEventListener("resize",D);e.removeChild(M)}}}function R(e,b){function g(m){try{return e.getContext(m,b)}catch(D){return null}}return g("webgl")||g("experimental-webgl")||g("webgl-experimental")}
function D(e){if("string"===typeof e)return e.split();m(Array.isArray(e),"invalid extension array");return e}function M(e){return"string"===typeof e?(m("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(e)):e}var m=U("./util/check"),g=U("./util/extend");ia.exports=function(g){var b=g||{},E,J,O,U;g={};var x=[],u=[],F="undefined"===typeof window?1:window.devicePixelRatio,Y=!1,t=function(b){b&&m.raise(b)},V=function(){};"string"===typeof b?(m("undefined"!==typeof document,
"selector queries only supported in DOM environments"),E=document.querySelector(b),m(E,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?E=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(U=b,O=U.canvas):(m.constructor(b),"gl"in b?U=b.gl:"canvas"in b?O=M(b.canvas):"container"in b&&(J=M(b.container)),"attributes"in b&&(g=b.attributes,m.type(g,"object","invalid context attributes")),
"extensions"in b&&(x=D(b.extensions)),"optionalExtensions"in b&&(u=D(b.optionalExtensions)),"onDone"in b&&(m.type(b.onDone,"function","invalid or missing onDone callback"),t=b.onDone),"profile"in b&&(Y=!!b.profile),"pixelRatio"in b&&(F=+b.pixelRatio,m(0<F,"invalid pixel ratio"))):m.raise("invalid arguments to regl");E&&("canvas"===E.nodeName.toLowerCase()?O=E:J=E);if(!U){if(!O){m("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");E=e(J||document.body,
t,F);if(!E)return null;O=E.canvas;V=E.onDestroy}void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!0);U=R(O,g)}return U?{gl:U,canvas:O,container:J,extensions:x,optionalExtensions:u,pixelRatio:F,profile:Y,onDone:t,onDestroy:V}:(V(),t("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(U,ia,Ba){ia.exports=function(R,D){function M(b){var e=!1;"altKey"in b&&(e=e||b.altKey!==Y.alt,Y.alt=!!b.altKey);
"shiftKey"in b&&(e=e||b.shiftKey!==Y.shift,Y.shift=!!b.shiftKey);"ctrlKey"in b&&(e=e||b.ctrlKey!==Y.control,Y.control=!!b.ctrlKey);"metaKey"in b&&(e=e||b.metaKey!==Y.meta,Y.meta=!!b.metaKey);return e}function m(b,g){var h=e.x(g),d=e.y(g);"buttons"in g&&(b=g.buttons|0);if(b!==x||h!==u||d!==F||M(g))x=b|0,u=h||0,F=d||0,D&&D(x,u,F,Y)}function g(b){m(0,b)}function h(){if(x||u||F||Y.shift||Y.alt||Y.meta||Y.control)x=u=F=0,Y.shift=Y.alt=Y.control=Y.meta=!1,D&&D(0,0,0,Y)}function b(b){M(b)&&D&&D(x,u,F,Y)}
function E(b){0===e.buttons(b)?m(0,b):m(x,b)}function J(b){m(x|e.buttons(b),b)}function O(b){m(x&~e.buttons(b),b)}function U(){t||(t=!0,R.addEventListener("mousemove",E),R.addEventListener("mousedown",J),R.addEventListener("mouseup",O),R.addEventListener("mouseleave",g),R.addEventListener("mouseenter",g),R.addEventListener("mouseout",g),R.addEventListener("mouseover",g),R.addEventListener("blur",h),R.addEventListener("keyup",b),R.addEventListener("keydown",b),R.addEventListener("keypress",b),R!==
window&&(window.addEventListener("blur",h),window.addEventListener("keyup",b),window.addEventListener("keydown",b),window.addEventListener("keypress",b)))}D||(D=R,R=window);var x=0,u=0,F=0,Y={shift:!1,alt:!1,control:!1,meta:!1},t=!1;U();var V={element:R};Object.defineProperties(V,{enabled:{get:function(){return t},set:function(e){e?U():t&&(t=!1,R.removeEventListener("mousemove",E),R.removeEventListener("mousedown",J),R.removeEventListener("mouseup",O),R.removeEventListener("mouseleave",g),R.removeEventListener("mouseenter",
g),R.removeEventListener("mouseout",g),R.removeEventListener("mouseover",g),R.removeEventListener("blur",h),R.removeEventListener("keyup",b),R.removeEventListener("keydown",b),R.removeEventListener("keypress",b),R!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",b),window.removeEventListener("keydown",b),window.removeEventListener("keypress",b)))},enumerable:!0},buttons:{get:function(){return x},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return F},
enumerable:!0},mods:{get:function(){return Y},enumerable:!0}});return V};var e=U("mouse-event")},{"mouse-event":39}],39:[function(U,ia,Ba){function e(e){return e.target||e.srcElement||window}Ba.buttons=function(e){if("object"===typeof e){if("buttons"in e)return e.buttons;if("which"in e){e=e.which;if(2===e)return 4;if(3===e)return 2;if(0<e)return 1<<e-1}else if("button"in e){e=e.button;if(1===e)return 4;if(2===e)return 2;if(0<=e)return 1<<e}}return 0};Ba.element=e;Ba.x=function(R){if("object"===typeof R){if("offsetX"in
R)return R.offsetX;var D=e(R).getBoundingClientRect();return R.clientX-D.left}return 0};Ba.y=function(R){if("object"===typeof R){if("offsetY"in R)return R.offsetY;var D=e(R).getBoundingClientRect();return R.clientY-D.top}return 0}},{}],40:[function(U,ia,Ba){function e(b,e){for(var g=0;g<b.length;++g)if(b[g]===e)return g;return-1}var R=U("./lib/util/check"),D=U("./lib/util/extend"),M=U("./lib/dynamic"),m=U("./lib/util/raf"),g=U("./lib/util/clock"),h=U("./lib/strings"),b=U("./lib/webgl"),E=U("./lib/extension"),
J=U("./lib/limits"),O=U("./lib/buffer"),X=U("./lib/elements"),x=U("./lib/texture"),u=U("./lib/renderbuffer"),F=U("./lib/framebuffer"),Y=U("./lib/attribute"),t=U("./lib/shader"),V=U("./lib/read"),k=U("./lib/core"),w=U("./lib/stats"),sa=U("./lib/timer");ia.exports=function(d){function z(){if(0===Ea.length)K&&K.update(),Ia=null;else{Ia=m.next(z);c();for(var a=Ea.length-1;0<=a;--a){var b=Ea[a];b&&b(Q,null,0)}ia.flush();K&&K.update()}}function U(){!Ia&&0<Ea.length&&(Ia=m.next(z))}function f(){Ia&&(m.cancel(z),
Ia=null)}function ca(a){a.preventDefault();ma=!0;f();ja.forEach(function(a){a()})}function G(a){ia.getError();ma=!1;Ba.restore();ea.restore();oa.restore();T.restore();la.restore();qa.restore();H.restore();K&&K.restore();Da.procs.refresh();U();pa.forEach(function(a){a()})}function p(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(M.isDynamic(f))e[b]=M.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(M.isDynamic(f[g])){e[b]=M.unbox(f,b);return}d[b]=
f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<a;)n.push(null);return n}R(!!a,"invalid args to regl({...})");R.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=D({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=
c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Da.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return D(function(a,b){var d;ma&&R.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,
a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function da(a,b){var c=0;Da.procs.poll();var d=b.color;d&&(ia.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ia.clearDepth(+b.depth),c|=256);"stencil"in b&&(ia.clearStencil(b.stencil|0),c|=1024);R(!!c,"called regl.clear with no buffer specified");
ia.clear(c)}function C(a){R.type(a,"function","regl.frame() callback must be a function");Ea.push(a);U();return{cancel:function(){function b(){var a=e(Ea,b);Ea[a]=Ea[Ea.length-1];--Ea.length;0>=Ea.length&&f()}var c=e(Ea,a);R(0<=c,"cannot cancel a frame twice");Ea[c]=b}}}function B(){var a=za.viewport,b=za.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=ia.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=ia.drawingBufferHeight}
function c(){Q.tick+=1;Q.time=a();B();Da.procs.poll()}function l(){T.refresh();B();Da.procs.refresh();K&&K.update()}function a(){return(g()-y)/1E3}console.log("REGL args are:",d);d=b(d);console.log("REGL configs are:",d);if(!d)return null;var ia=d.gl,A=ia.getContextAttributes(),ma=ia.isContextLost(),Ba=E(ia,d);if(!Ba)return null;var Z=h(),ga=w(),S=Ba.extensions,K=sa(ia,S),y=g(),q=ia.drawingBufferWidth,P=ia.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:q,viewportHeight:P,framebufferWidth:q,framebufferHeight:P,
drawingBufferWidth:q,drawingBufferHeight:P,pixelRatio:d.pixelRatio},q={elements:null,primitive:4,count:-1,offset:0,instances:-1},xa=J(ia,S),oa=O(ia,ga,d,function(a){return H.destroyBuffer(a)}),n=X(ia,S,oa,ga),H=Y(ia,S,xa,ga,oa,n,q),ea=t(ia,Z,ga,d),T=x(ia,S,xa,function(){Da.procs.poll()},Q,ga,d),la=u(ia,S,xa,ga,d),qa=F(ia,S,xa,T,la,ga),Da=k(ia,Z,S,xa,oa,n,T,qa,{},H,ea,q,Q,K,d),Z=V(ia,qa,Da.procs.poll,Q,A,S,xa),za=Da.next,ha=ia.canvas,Ea=[],ja=[],pa=[],Aa=[d.onDestroy],Ia=null;ha&&(ha.addEventListener("webglcontextlost",
ca,!1),ha.addEventListener("webglcontextrestored",G,!1));var L=qa.setFBO=p({framebuffer:M.define.call(null,1,"framebuffer")});l();A=D(p,{clear:function(a){R("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)L(D({framebuffer:a.framebuffer.faces[b]},a),da);else L(a,da);else da(null,a)},prop:M.define.bind(null,1),context:M.define.bind(null,2),"this":M.define.bind(null,3),draw:p({}),buffer:function(a){return oa.create(a,
34962,!1,!1)},elements:function(a){return n.create(a,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:la.create,framebuffer:qa.create,framebufferCube:qa.createCube,vao:H.createVAO,attributes:A,frame:C,on:function(a,b){R.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return C(b);case "lost":c=ja;break;case "restore":c=pa;break;case "destroy":c=Aa;break;default:R.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:xa,hasExtension:function(a){return 0<=xa.extensions.indexOf(a.toLowerCase())},read:Z,destroy:function(){Ea.length=0;f();ha&&(ha.removeEventListener("webglcontextlost",ca),ha.removeEventListener("webglcontextrestored",G));ea.clear();qa.clear();la.clear();H.clear();T.clear();n.clear();oa.clear();K&&K.clear();Aa.forEach(function(a){a()})},_gl:ia,_refresh:l,poll:function(){c();K&&K.update()},now:a,stats:ga});d.onDone(null,A);return A}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

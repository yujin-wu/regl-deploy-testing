<!DOCTYPE html>
      <html>
        <head>
          <title>example/cloth.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        var $jscomp={scope:{},getGlobal:function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global?global:f}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return"jscomp_symbol_"+f+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();if(f[$jscomp.global.Symbol.iterator])return f[$jscomp.global.Symbol.iterator]();var t=0;return{next:function(){return t==f.length?{done:!0}:{done:!1,value:f[t++]}}}};
$jscomp.arrayFromIterator=function(f){for(var t,x=[];!(t=f.next()).done;)x.push(t.value);return x};$jscomp.arrayFromIterable=function(f){return f instanceof Array?f:$jscomp.arrayFromIterator($jscomp.makeIterator(f))};
$jscomp.inherits=function(f,t){function x(){}x.prototype=t.prototype;f.prototype=new x;f.prototype.constructor=f;for(var a in t)if($jscomp.global.Object.defineProperties){var d=$jscomp.global.Object.getOwnPropertyDescriptor(t,a);d&&$jscomp.global.Object.defineProperty(f,a,d)}else f[a]=t[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(f,t){f instanceof String&&(f=String(f));var x=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},d=(a.next=function(){if(x<f.length){var a=x++;return{value:t(a,f[a]),done:!1}}d.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return d},a);return d};
$jscomp.array.findInternal_=function(f,t,x){f instanceof String&&(f=String(f));for(var a=f.length,d=0;d<a;d++){var C=f[d];if(t.call(x,C,d,f))return{i:d,v:C}}return{i:-1,v:void 0}};
$jscomp.array.from=function(f,t,x){t=void 0===t?function(d){return d}:t;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(f[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();f=f[Symbol.iterator]();for(var d;!(d=f.next()).done;)a.push(t.call(x,d.value))}else{d=f.length;for(var C=0;C<d;C++)a.push(t.call(x,f[C]))}return a};$jscomp.array.of=function(f){for(var t=[],x=0;x<arguments.length;++x)t[x-0]=arguments[x];return $jscomp.array.from(t)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(f,t){return[f,t]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(f){return f})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(f,t){return t})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(f,t,x){var a=this.length;f=Number(f);t=Number(t);x=Number(null!=x?x:a);if(f<t)for(x=Math.min(x,a);t<x;)t in this?this[f++]=this[t++]:(delete this[f++],t++);else for(x=Math.min(x,a+t-f),f+=x-t;x>t;)--x in this?this[--f]=this[x]:delete this[f];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(f,t,x){null!=x&&f.length||(x=this.length||0);x=Number(x);for(t=Number((void 0===t?0:t)||0);t<x;t++)this[t]=f;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(f,t){return $jscomp.array.findInternal_(this,f,t).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(f,t){return $jscomp.array.findInternal_(this,f,t).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(f){f=void 0===f?[]:f;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(f){f=$jscomp.makeIterator(f);for(var t=f.next();!t.done;t=f.next())t=t.value,this.set(t[0],t[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var f=$jscomp.global.Map;if(!f||!f.prototype.entries||!Object.seal)return!1;try{var t=Object.seal({x:4}),x=new f($jscomp.makeIterator([[t,"s"]]));if("s"!=x.get(t)||1!=x.size||x.get({x:4})||x.set({x:4},"t")!=x||2!=x.size)return!1;var a=x.entries(),d=a.next();if(d.done||d.value[0]!=t||"s"!=d.value[1])return!1;d=a.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!a.next().done?!1:!0}catch(C){return!1}};
$jscomp.Map.createHead_=function(){var f={};return f.previous=f.next=f.head=f};$jscomp.Map.getId_=function(f){if(!(f instanceof Object))return String(f);$jscomp.Map.key_ in f||f instanceof Object&&Object.isExtensible&&Object.isExtensible(f)&&$jscomp.Map.defineProperty_(f,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in f?f[$jscomp.Map.key_]:" "+f};
$jscomp.Map.prototype.set=function(f,t){var x=this.maybeGetEntry_(f),a=x.id,d=x.list,x=x.entry;d||(d=this.data_[a]=[]);x?x.value=t:(x={next:this.head_,previous:this.head_.previous,head:this.head_,key:f,value:t},d.push(x),this.head_.previous.next=x,this.head_.previous=x,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(f){var t=this.maybeGetEntry_(f);f=t.id;var x=t.list,a=t.index;return(t=t.entry)&&x?(x.splice(a,1),x.length||delete this.data_[f],t.previous.next=t.next,t.next.previous=t.previous,t.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(f){return!!this.maybeGetEntry_(f).entry};
$jscomp.Map.prototype.get=function(f){return(f=this.maybeGetEntry_(f).entry)&&f.value};$jscomp.Map.prototype.maybeGetEntry_=function(f){var t=$jscomp.Map.getId_(f),x=this.data_[t];if(x)for(var a=0;a<x.length;a++){var d=x[a];if(f!==f&&d.key!==d.key||f===d.key)return{id:t,list:x,index:a,entry:d}}return{id:t,list:x,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(f){return[f.key,f.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(f){return f.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(f){return f.value})};$jscomp.Map.prototype.forEach=function(f,t){for(var x=$jscomp.makeIterator(this.entries()),a=x.next();!a.done;a=x.next())a=a.value,f.call(t,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(f){var t=this,x=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(x){for(;x.head!=t.head_;)x=x.previous;for(;x.next!=x.head;)return x=x.next,{done:!1,value:f(x)};x=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(f,t,x){Object.defineProperty(f,t,{value:String(x)})}:function(f,t,x){f[t]=String(x)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(f){f=Number(f)>>>0;if(0===f)return 32;var t=0;0===(f&4294901760)&&(f<<=16,t+=16);0===(f&4278190080)&&(f<<=8,t+=8);0===(f&4026531840)&&(f<<=4,t+=4);0===(f&3221225472)&&(f<<=2,t+=2);0===(f&2147483648)&&t++;return t};$jscomp.math.imul=function(f,t){f=Number(f);t=Number(t);var x=f&65535,a=t&65535;return x*a+((f>>>16&65535)*a+x*(t>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(f){f=Number(f);return 0===f||isNaN(f)?f:0<f?1:-1};
$jscomp.math.log10=function(f){return Math.log(f)/Math.LN10};$jscomp.math.log2=function(f){return Math.log(f)/Math.LN2};$jscomp.math.log1p=function(f){f=Number(f);if(.25>f&&-.25<f){for(var t=f,x=1,a=f,d=0,C=1;d!=a;)t*=f,C*=-1,a=(d=a)+C*t/++x;return a}return Math.log(1+f)};$jscomp.math.expm1=function(f){f=Number(f);if(.25>f&&-.25<f){for(var t=f,x=1,a=f,d=0;d!=a;)t*=f/++x,a=(d=a)+t;return a}return Math.exp(f)-1};$jscomp.math.cosh=function(f){f=Number(f);return(Math.exp(f)+Math.exp(-f))/2};
$jscomp.math.sinh=function(f){f=Number(f);return 0===f?f:(Math.exp(f)-Math.exp(-f))/2};$jscomp.math.tanh=function(f){f=Number(f);if(0===f)return f;var t=Math.exp(2*-Math.abs(f)),t=(1-t)/(1+t);return 0>f?-t:t};$jscomp.math.acosh=function(f){f=Number(f);return Math.log(f+Math.sqrt(f*f-1))};$jscomp.math.asinh=function(f){f=Number(f);if(0===f)return f;var t=Math.log(Math.abs(f)+Math.sqrt(f*f+1));return 0>f?-t:t};
$jscomp.math.atanh=function(f){f=Number(f);return($jscomp.math.log1p(f)-$jscomp.math.log1p(-f))/2};
$jscomp.math.hypot=function(f,t,x){for(var a=[],d=2;d<arguments.length;++d)a[d-2]=arguments[d];f=Number(f);t=Number(t);for(var C=Math.max(Math.abs(f),Math.abs(t)),r=$jscomp.makeIterator(a),d=r.next();!d.done;d=r.next())C=Math.max(C,Math.abs(d.value));if(1E100<C||1E-100>C){f/=C;t/=C;r=f*f+t*t;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d)/C,r+=d*d;return Math.sqrt(r)*C}C=f*f+t*t;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d),C+=
d*d;return Math.sqrt(C)};$jscomp.math.trunc=function(f){f=Number(f);if(isNaN(f)||Infinity===f||-Infinity===f||0===f)return f;var t=Math.floor(Math.abs(f));return 0>f?-t:t};$jscomp.math.cbrt=function(f){if(0===f)return f;f=Number(f);var t=Math.pow(Math.abs(f),1/3);return 0>f?-t:t};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(f){return"number"!==typeof f?!1:!isNaN(f)&&Infinity!==f&&-Infinity!==f};
$jscomp.number.isInteger=function(f){return $jscomp.number.isFinite(f)?f===Math.floor(f):!1};$jscomp.number.isNaN=function(f){return"number"===typeof f&&isNaN(f)};$jscomp.number.isSafeInteger=function(f){return $jscomp.number.isInteger(f)&&Math.abs(f)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(f,t){for(var x=[],a=1;a<arguments.length;++a)x[a-1]=arguments[a];x=$jscomp.makeIterator(x);for(a=x.next();!a.done;a=x.next())if(a=a.value)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(f[d]=a[d]);return f};$jscomp.object.is=function(f,t){return f===t?0!==f||1/f===1/t:f!==f&&t!==t};$jscomp.Set=function(f){f=void 0===f?[]:f;this.map_=new $jscomp.Map;if(f){f=$jscomp.makeIterator(f);for(var t=f.next();!t.done;t=f.next())this.add(t.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var f=$jscomp.global.Set;if(!f||!f.prototype.entries||!Object.seal)return!1;var t=Object.seal({x:4}),f=new f($jscomp.makeIterator([t]));if(f.has(t)||1!=f.size||f.add(t)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var f=f.entries(),x=f.next();if(x.done||x.value[0]!=t||x.value[1]!=t)return!1;x=f.next();return x.done||x.value[0]==t||4!=x.value[0].x||x.value[1]!=x.value[0]?!1:f.next().done};
$jscomp.Set.prototype.add=function(f){this.map_.set(f,f);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(f){f=this.map_["delete"](f);this.size=this.map_.size;return f};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(f){return this.map_.has(f)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(f,t){var x=this;this.map_.forEach(function(a){return f.call(t,a,a,x)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(f,t){if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+t+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(f){for(var t=[],x=0;x<arguments.length;++x)t[x-0]=arguments[x];for(var x="",t=$jscomp.makeIterator(t),a=t.next();!a.done;a=t.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?x+=String.fromCharCode(a):(a-=65536,x+=String.fromCharCode(a>>>10&1023|55296),x+=String.fromCharCode(a&1023|56320))}return x};
$jscomp.string.repeat=function(f){var t=this.toString();if(0>f||1342177279<f)throw new RangeError("Invalid count value");f|=0;for(var x="";f;)if(f&1&&(x+=t),f>>>=1)t+=t;return x};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(f){var t=this.toString(),x=t.length;f=Number(f)||0;if(0<=f&&f<x){f|=0;var a=t.charCodeAt(f);if(55296>a||56319<a||f+1===x)return a;f=t.charCodeAt(f+1);return 56320>f||57343<f?a:1024*(a-55296)+f+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(f,t){t=void 0===t?0:t;$jscomp.string.noRegExp_(f,"includes");return-1!==this.toString().indexOf(f,t)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(f,t){t=void 0===t?0:t;$jscomp.string.noRegExp_(f,"startsWith");var x=this.toString();f+="";for(var a=x.length,d=f.length,C=Math.max(0,Math.min(t|0,x.length)),r=0;r<d&&C<a;)if(x[C++]!=f[r++])return!1;return r>=d};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(f,t){$jscomp.string.noRegExp_(f,"endsWith");var x=this.toString();f+="";void 0===t&&(t=x.length);for(var a=Math.max(0,Math.min(t|0,x.length)),d=f.length;0<d&&0<a;)if(x[--a]!=f[--d])return!1;return 0>=d};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function f(t,x,a){function d(r,m){if(!x[r]){if(!t[r]){var b="function"==typeof require&&require;if(!m&&b)return b(r,!0);if(C)return C(r,!0);b=Error("Cannot find module '"+r+"'");throw b.code="MODULE_NOT_FOUND",b;}b=x[r]={exports:{}};t[r][0].call(b.exports,function(b){return d(t[r][1][b]||b)},b,b.exports,f,t,x,a)}return x[r].exports}for(var C="function"==typeof require&&require,r=0;r<a.length;r++)d(a[r]);return d}return f})()({1:[function(f,t,x){function a(c,b){this.i0=c;this.i1=b;this.restLength=
q.distance(g[c],g[b])}t=document.body.appendChild(document.createElement("canvas"));x=f("canvas-fit");var d=f("../regl")(t),C=f("gl-mat4"),r=f("canvas-orbit-camera")(t);window.addEventListener("resize",x(t),!1);var q=f("gl-vec3");r.view(C.lookAt([],[0,3,30],[0,0,-5.5],[0,1,0]));r.rotate([0,0],[.471,0]);var m=[],b=[],g=[],c=[],h=[],B=[];for(t=0;20>=t;++t){var v=t/20*11+-5.5,e=t/20;for(x=0;20>=x;++x){var l=x/20*11+-5.5,p=x/20;g.push([l,0,v]);c.push([l,0,v]);m.push([p,e])}}var n=d.buffer({length:12*
g.length,type:"float",usage:"dynamic"}),k,u,w,D;for(k=0;k<g.length;++k)h.push([0,0,0]);var Ea=d.buffer({length:12*h.length,type:"float",usage:"dynamic"});for(t=0;19>=t;++t)for(x=0;19>=x;++x)k=21*t+x,u=k+0,w=k+1,D=k+21+0,v=k+21+1,b.push([v,w,u]),b.push([u,D,v]);for(t=0;20>=t;++t)for(x=0;20>=x;++x)k=21*t+x,u=k+0,w=k+1,D=k+21+0,v=k+21+1,20>x&&B.push(new a(u,w)),20>t&&B.push(new a(u,D)),20>x&&20>t&&B.push(new a(u,v));var y=d({cull:{enable:!1},context:{view:function(){return r.view()}},frag:"\n  precision mediump float;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform sampler2D texture;\n\n  void main () {\n    vec3 tex = texture2D(texture, vUv*1.0).xyz;\n    vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));\n\n    vec3 n = vNormal;\n\n    // for the back faces we need to use the opposite normals.\n    if(gl_FrontFacing == false) {\n      n = -n;\n    }\n\n    vec3 ambient = 0.3 * tex;\n    vec3 diffuse = 0.7 * tex * clamp( dot(n, lightDir ), 0.0, 1.0 );\n\n    gl_FragColor = vec4(ambient + diffuse, 1.0);\n  }",
vert:"\n  precision mediump float;\n\n  attribute vec3 position;\n  attribute vec3 normal;\n  attribute vec2 uv;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform mat4 projection, view;\n\n  void main() {\n    vUv = uv;\n    vNormal = normal;\n    gl_Position = projection * view * vec4(position, 1);\n  }",uniforms:{view:d.context("view"),projection:function(c){return C.perspective([],Math.PI/4,c.viewportWidth/c.viewportHeight,.01,1E3)},texture:d.prop("clothTexture")},attributes:{position:{buffer:n,
normalized:!0},uv:d.prop("uv"),normal:{buffer:Ea,normalized:!0}},elements:d.prop("elements")});f("resl")({manifest:{clothTexture:{type:"image",src:"assets/cloth.png",parser:function(c){return d.texture({mag:"nearest",mipmap:!0,min:"linear mipmap linear",data:c,wrap:"repeat"})}}},onDone:function(e){var l=e.clothTexture;d.frame(function(e){var a=e.tick;d.clear({color:[0,0,0,255],depth:1});e=[];var p=[],v=[0,-4,0],a=[Math.sin(a/2),Math.cos(a/3),Math.sin(a/1)];q.normalize(a,a);q.scale(a,a,20.6);for(k=
0;k<g.length;++k)q.subtract(e,g[k],c[k]),e=[e[0],e[1],e[2]],p=[g[k][0],g[k][1],g[k][2]],q.add(p,p,e),q.scaleAndAdd(p,p,v,.017*.017),q.scaleAndAdd(p,p,a,.017*.017),c[k]=[g[k][0],g[k][1],g[k][2]],g[k]=[p[0],p[1],p[2]];v=[];for(k=0;15>k;++k)for(a=0;a<B.length;a++){var C=B[a];e=g[C.i0];p=g[C.i1];q.subtract(v,p,e);var f=q.length(v),C=(f-C.restLength)/f;q.scaleAndAdd(e,e,v,.5*C);q.scaleAndAdd(p,p,v,-.5*C)}for(k=0;20>=k;++k)g[k]=[c[k][0],c[k][1],c[k][2]];for(k=0;k<h.length;k++)h[k]=[0,0,0];for(k=0;k<b.length;k++)u=
b[k][0],w=b[k][1],D=b[k][2],v=g[u],p=g[w],a=g[D],e=[0,0,0],q.subtract(e,v,p),p=[0,0,0],q.subtract(p,v,a),v=[0,0,0],q.cross(v,e,p),q.normalize(v,v),q.add(h[u],h[u],v),q.add(h[w],h[w],v),q.add(h[D],h[D],v);for(k=0;k<h.length;k++)q.normalize(h[k],h[k]);n.subdata(g);Ea.subdata(h);y({elements:b,uv:m,clothTexture:l});r.tick()})}})},{"../regl":128,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59,"gl-vec3":93,resl:124}],2:[function(f,t,x){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var d=f("./util/sorted-object-keys"),C=f("./util/check"),r=f("./util/values"),q=f("./constants/dtypes.json"),m=f("./util/is-typed-array"),b=f("./util/is-ndarray"),g=f("./constants/primitives.json"),c="attributes elements offset count primitive instances".split(" ");t.exports=function(h,B,v,e,l,p,n){function k(c){if(c!==S.currentVAO){var b=B.oes_vertex_array_object;c?b.bindVertexArrayOES(c.vao):b.bindVertexArrayOES(null);
S.currentVAO=c}}function u(c){if(c!==S.currentVAO){if(c)c.bindAttrs();else{for(var b=B.angle_instanced_arrays,e=0;e<G.length;++e){var d=G[e];d.buffer?(h.enableVertexAttribArray(e),d.buffer.bind(),h.vertexAttribPointer(e,d.size,d.type,d.normalized,d.stride,d.offfset),b&&d.divisor&&b.vertexAttribDivisorANGLE(e,d.divisor)):(h.disableVertexAttribArray(e),h.vertexAttrib4f(e,d.x,d.y,d.z,d.w))}n.elements?h.bindBuffer(34963,n.elements.buffer.buffer):h.bindBuffer(34963,null)}S.currentVAO=c}}function w(){r(I).forEach(function(c){c.destroy()})}
function D(){this.id=++ob;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var c=B.oes_vertex_array_object;this.vao=c?c.createVertexArrayOES():null;I[this.id]=this;this.buffers=[]}function f(){B.oes_vertex_array_object&&r(I).forEach(function(c){c.refresh()})}var y=v.maxAttributes,G=Array(y);for(v=0;v<y;++v)G[v]=new a;var ob=0,I={},S={Record:a,scope:{},state:G,currentVAO:null,targetVAO:null,restore:B.oes_vertex_array_object?f:function(){},
createVAO:function(h){function k(e){var h;if(Array.isArray(e))h=e,n.elements&&n.ownsElements&&n.elements.destroy(),n.elements=null,n.ownsElements=!1,n.offset=0,n.count=0,n.instances=-1,n.primitive=4;else{C("object"===typeof e,"invalid arguments for create vao");C("attributes"in e,"must specify attributes for vao");if(e.elements){var u=e.elements;n.ownsElements?("function"===typeof u&&"elements"===u._reglType?n.elements.destroy():n.elements(u),n.ownsElements=!1):p.getElements(e.elements)?(n.elements=
e.elements,n.ownsElements=!1):(n.elements=p.create(e.elements),n.ownsElements=!0)}else n.elements=null,n.ownsElements=!1;h=e.attributes;n.offset=0;n.count=-1;n.instances=-1;n.primitive=4;n.elements&&(n.count=n.elements._elements.vertCount,n.primitive=n.elements._elements.primType);"offset"in e&&(n.offset=e.offset|0);"count"in e&&(n.count=e.count|0);"instances"in e&&(n.instances=e.instances|0);"primitive"in e&&(C(e.primitive in g,"bad primitive type: "+e.primitive),n.primitive=g[e.primitive]);C.optional(function(){for(var b=
d(e),a=0;a<b.length;++a)C(0<=c.indexOf(b[a]),'invalid option for vao: "'+b[a]+'" valid options are '+c)});C(Array.isArray(h),"attributes must be an array")}C(h.length<y,"too many attributes");C(0<h.length,"must specify at least one attribute");var u={},w=n.attributes;w.length=h.length;for(var D=0;D<h.length;++D){var r=h[D],v=w[D]=new a,f=r.data||r;if(Array.isArray(f)||m(f)||b(f)){var H;n.buffers[D]&&(H=n.buffers[D],m(f)&&H._buffer.byteLength>=f.byteLength?H.subdata(f):(H.destroy(),n.buffers[D]=null));
n.buffers[D]||(H=n.buffers[D]=l.create(r,34962,!1,!0));v.buffer=l.getBuffer(H);v.size=v.buffer.dimension|0;v.normalized=!1;v.type=v.buffer.dtype;v.offset=0;v.stride=0;v.divisor=0;v.state=1;u[D]=1}else l.getBuffer(r)?(v.buffer=l.getBuffer(r),v.size=v.buffer.dimension|0,v.normalized=!1,v.type=v.buffer.dtype,v.offset=0,v.stride=0,v.divisor=0,v.state=1):l.getBuffer(r.buffer)?(v.buffer=l.getBuffer(r.buffer),v.size=(+r.size||v.buffer.dimension)|0,v.normalized=!!r.normalized||!1,"type"in r?(C.parameter(r.type,
q,"invalid buffer type"),v.type=q[r.type]):v.type=v.buffer.dtype,v.offset=(r.offset||0)|0,v.stride=(r.stride||0)|0,v.divisor=(r.divisor||0)|0,v.state=1,C(1<=v.size&&4>=v.size,"size must be between 1 and 4"),C(0<=v.offset,"invalid offset"),C(0<=v.stride&&255>=v.stride,"stride must be between 0 and 255"),C(0<=v.divisor,"divisor must be positive"),C(!v.divisor||!!B.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in r?(C(0<D,"first attribute must not be a constant"),
v.x=+r.x||0,v.y=+r.y||0,v.z=+r.z||0,v.w=+r.w||0,v.state=2):C(!1,"invalid attribute spec for location "+D)}for(H=0;H<n.buffers.length;++H)!u[H]&&n.buffers[H]&&(n.buffers[H].destroy(),n.buffers[H]=null);n.refresh();return k}var n=new D;e.vaoCount+=1;k.destroy=function(){for(var c=0;c<n.buffers.length;++c)n.buffers[c]&&n.buffers[c].destroy();n.buffers.length=0;n.ownsElements&&(n.elements.destroy(),n.elements=null,n.ownsElements=!1);n.destroy()};k._vao=n;k._reglType="vao";return k(h)},getVAO:function(c){return"function"===
typeof c&&c._vao?c._vao:null},destroyBuffer:function(c){for(var b=0;b<G.length;++b){var e=G[b];e.buffer===c&&(h.disableVertexAttribArray(b),e.buffer=null)}},setVAO:B.oes_vertex_array_object?k:u,clear:B.oes_vertex_array_object?w:function(){}};D.prototype.bindAttrs=function(){for(var c=B.angle_instanced_arrays,b=this.attributes,e=0;e<b.length;++e){var d=b[e];d.buffer?(h.enableVertexAttribArray(e),h.bindBuffer(34962,d.buffer.buffer),h.vertexAttribPointer(e,d.size,d.type,d.normalized,d.stride,d.offset),
c&&d.divisor&&c.vertexAttribDivisorANGLE(e,d.divisor)):(h.disableVertexAttribArray(e),h.vertexAttrib4f(e,d.x,d.y,d.z,d.w))}for(c=b.length;c<y;++c)h.disableVertexAttribArray(c);(c=p.getElements(this.elements))?h.bindBuffer(34963,c.buffer.buffer):h.bindBuffer(34963,null)};D.prototype.refresh=function(){var c=B.oes_vertex_array_object;c&&(c.bindVertexArrayOES(this.vao),this.bindAttrs(),S.currentVAO=null,c.bindVertexArrayOES(null))};D.prototype.destroy=function(){if(this.vao){var c=B.oes_vertex_array_object;
this===S.currentVAO&&(S.currentVAO=null,c.bindVertexArrayOES(null));c.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);I[this.id]&&(delete I[this.id],--e.vaoCount)};return S}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(f,t,x){function a(c){return v[Object.prototype.toString.call(c)]|
0}function d(c,b){for(var e=0;e<b.length;++e)c[e]=b[e]}function C(c,b,e,d,a,l,g){for(var h=0,p=0;p<e;++p)for(var m=0;m<d;++m)c[h++]=b[a*p+l*m+g]}var r=f("./util/sorted-object-keys"),q=f("./util/check"),m=f("./util/is-typed-array"),b=f("./util/is-ndarray"),g=f("./util/values"),c=f("./util/pool");x=f("./util/flatten");var h=x.flatten,B=x.shape,v=f("./constants/arraytypes.json"),e=f("./constants/dtypes.json"),l=f("./constants/usage.json"),p=[];p[5120]=1;p[5122]=2;p[5124]=4;p[5121]=1;p[5123]=2;p[5125]=
4;p[5126]=4;t.exports=function(n,k,u,w){function v(c){this.id=ob++;this.buffer=n.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;u.profile&&(this.stats={size:0})}function f(c,b,e){c.byteLength=b.byteLength;n.bufferData(c.type,b,e)}function y(e,l,g,p,k,n){e.usage=g;if(Array.isArray(l)){if(e.dtype=p||5126,0<l.length)if(Array.isArray(l[0])){k=B(l);for(var u=p=1;u<k.length;++u)p*=k[u];e.dimension=p;l=h(l,k,e.dtype);f(e,l,g);n?e.persistentData=
l:c.freeType(l)}else"number"===typeof l[0]?(e.dimension=k,k=c.allocType(e.dtype,l.length),d(k,l),f(e,k,g),n?e.persistentData=k:c.freeType(k)):m(l[0])?(e.dimension=l[0].length,e.dtype=p||a(l[0])||5126,l=h(l,[l.length,l[0].length],e.dtype),f(e,l,g),n?e.persistentData=l:c.freeType(l)):q.raise("invalid buffer data")}else if(m(l))e.dtype=p||a(l),e.dimension=k,f(e,l,g),n&&(e.persistentData=new Uint8Array(new Uint8Array(l.buffer)));else if(b(l)){k=l.shape;var w=l.stride,u=l.offset,v=0,r=0,D=0,y=0;1===k.length?
(v=k[0],r=1,D=w[0],y=0):2===k.length?(v=k[0],r=k[1],D=w[0],y=w[1]):q.raise("invalid shape");e.dtype=p||a(l.data)||5126;e.dimension=r;k=c.allocType(e.dtype,v*r);C(k,l.data,v,r,D,y,u);f(e,k,g);n?e.persistentData=k:c.freeType(k)}else l instanceof ArrayBuffer?(e.dtype=5121,e.dimension=k,f(e,l,g),n&&(e.persistentData=new Uint8Array(new Uint8Array(l)))):q.raise("invalid buffer data")}function G(c){k.bufferCount--;w(c);var e=c.buffer;q(e,"buffer must not be deleted already");n.deleteBuffer(e);c.buffer=null;
delete I[c.id]}var ob=0,I={};v.prototype.bind=function(){n.bindBuffer(this.type,this.buffer)};v.prototype.destroy=function(){G(this)};var S=[];u.profile&&(k.getTotalBufferSize=function(){var c=0;r(I).forEach(function(e){c+=I[e].stats.size});return c});return{create:function(g,w,r,f){function Ea(c){var d=35044,a=null,g=0,h=0,k=1;Array.isArray(c)||m(c)||b(c)||c instanceof ArrayBuffer?a=c:"number"===typeof c?g=c|0:c&&(q.type(c,"object","buffer arguments must be an object, a number or an array"),"data"in
c&&(q(null===a||Array.isArray(a)||m(a)||b(a),"invalid data for buffer"),a=c.data),"usage"in c&&(q.parameter(c.usage,l,"invalid buffer usage"),d=l[c.usage]),"type"in c&&(q.parameter(c.type,e,"invalid buffer type"),h=e[c.type]),"dimension"in c&&(q.type(c.dimension,"number","invalid dimension"),k=c.dimension|0),"length"in c&&(q.nni(g,"buffer length must be a nonnegative integer"),g=c.length|0));ob.bind();a?y(ob,a,d,h,k,f):(g&&n.bufferData(ob.type,g,d),ob.dtype=h||5121,ob.usage=d,ob.dimension=k,ob.byteLength=
g);u.profile&&(ob.stats.size=ob.byteLength*p[ob.dtype]);return Ea}function E(c,e){q(e+c.byteLength<=ob.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+c.byteLength+" starting from offset "+e+" to a buffer of size "+ob.byteLength);n.bufferSubData(ob.type,e,c)}k.bufferCount++;var ob=new v(w);I[ob.id]=ob;r||Ea(g);Ea._reglType="buffer";Ea._buffer=ob;Ea.subdata=function(e,l){var g=(l||0)|0,k;ob.bind();if(m(e)||e instanceof ArrayBuffer)E(e,g);else if(Array.isArray(e)){if(0<
e.length)if("number"===typeof e[0]){var p=c.allocType(ob.dtype,e.length);d(p,e);E(p,g);c.freeType(p)}else Array.isArray(e[0])||m(e[0])?(k=B(e),p=h(e,k,ob.dtype),E(p,g),c.freeType(p)):q.raise("invalid buffer data")}else if(b(e)){k=e.shape;var n=e.stride,u=p=0,w=0,v=0;1===k.length?(p=k[0],u=1,w=n[0],v=0):2===k.length?(p=k[0],u=k[1],w=n[0],v=n[1]):q.raise("invalid shape");k=Array.isArray(e.data)?ob.dtype:a(e.data);k=c.allocType(k,p*u);C(k,e.data,p,u,w,v,e.offset);E(k,g);c.freeType(k)}else q.raise("invalid data for buffer subdata");
return Ea};u.profile&&(Ea.stats=ob.stats);Ea.destroy=function(){G(ob)};return Ea},createStream:function(c,e){var b=S.pop();b||(b=new v(c));b.bind();y(b,e,35040,0,1,!1);return b},destroyStream:function(c){S.push(c)},clear:function(){g(I).forEach(G);S.forEach(G)},getBuffer:function(c){return c&&c._buffer instanceof v?c._buffer:null},restore:function(){g(I).forEach(function(c){c.buffer=n.createBuffer();n.bindBuffer(c.type,c.buffer);n.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:y}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(f,t,x){t.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(f,t,x){t.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(f,t,x){t.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(f,t,x){t.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(f,t,x){function a(c){return Array.isArray(c)||v(c)||e(c)}function d(c){return c.sort(function(c,
e){return"viewport"===c?-1:"viewport"===e?1:c<e?-1:1})}function C(c,e,b,d){this.thisDep=c;this.contextDep=e;this.propDep=b;this.append=d}function r(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function q(c){return new C(!1,!1,!1,c)}function m(c,e){var b=c.type;if(0===b)return b=c.data.length,new C(!0,1<=b,2<=b,e);if(4===b)return b=c.data,new C(b.thisDep,b.contextDep,b.propDep,e);if(5===b)return new C(!1,!1,!1,e);if(6===b){for(var d=b=!1,l=!1,a=0;a<c.data.length;++a){var g=c.data[a];1===g.type?
l=!0:2===g.type?d=!0:3===g.type?b=!0:0===g.type?(b=!0,g=g.data,1<=g&&(d=!0),2<=g&&(l=!0)):4===g.type&&(b=b||g.data.thisDep,d=d||g.data.contextDep,l=l||g.data.propDep)}return new C(b,d,l,e)}return new C(3===b,2===b,1===b,e)}var b=f("./util/sorted-object-keys"),g=f("./util/check"),c=f("./util/extend"),h=f("./util/codegen"),B=f("./util/loop"),v=f("./util/is-typed-array"),e=f("./util/is-ndarray"),l=f("./util/is-array-like"),p=f("./dynamic"),n=f("./constants/primitives.json"),k=f("./constants/dtypes.json"),
u=["x","y","z","w"],w="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),D={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ea="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
y={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},G={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ob={frag:35632,vert:35633},I={cw:2304,ccw:2305},S=new C(!1,!1,!1,function(){});t.exports=function(e,v,f,J,F,E,ea,z,t,M,la,oa,U,V,T){function P(c){return c.replace(".","_")}function N(c,e,b){var d=P(c);ta.push(c);
Y[d]=ia[d]=!!b;Ia[d]=e}function O(c,e,b){var d=P(c);ta.push(c);Array.isArray(b)?(ia[d]=b.slice(),Y[d]=b.slice()):ia[d]=Y[d]=b;Ja[d]=e}function Q(){var c=h(),e=c.link,d=c.global;c.id=Gc++;c.batchId="0";var l=e(Oa),a=c.shared={props:"a0"};b(Oa).forEach(function(c){a[c]=d.def(l,".",c)});g.optional(function(){c.CHECK=e(g);c.commandStr=g.guessCommand();c.command=e(c.commandStr);c.assert=function(c,b,d){c("if(!(",b,"))",this.CHECK,".commandRaise(",e(d),",",this.command,");")};Z.invalidBlendCombinations=
Ea});var k=c.next={},p=c.current={};b(Ja).forEach(function(c){Array.isArray(ia[c])&&(k[c]=d.def(a.next,".",c),p[c]=d.def(a.current,".",c))});var n=c.constants={};b(Z).forEach(function(c){n[c]=d.def(JSON.stringify(Z[c]))});c.invoke=function(b,d){switch(d.type){case 0:var l=["this",a.context,a.props,c.batchId];return b.def(e(d.data),".call(",l.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(a.props,d.data);case 2:return b.def(a.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(c,
b),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(e){return c.invoke(b,e)})}};c.attribCache={};var u={};c.scopeAttrib=function(c){c=v.id(c);if(c in u)return u[c];var b=M.scope[c];b||(b=M.scope[c]=new xa);return u[c]=e(b)};return c}function R(c){var e=c["static"];c=c.dynamic;var b;if("profile"in e){var d=!!e.profile;b=q(function(c,e){return d});b.enable=d}else if("profile"in c){var l=c.profile;b=m(l,function(c,e){return c.invoke(e,l)})}return b}function ra(c,e){var b=
c["static"],d=c.dynamic;if("framebuffer"in b){var l=b.framebuffer;return l?(l=z.getFramebuffer(l),g.command(l,"invalid framebuffer object"),q(function(c,e){var b=c.link(l),d=c.shared;e.set(d.framebuffer,".next",b);d=d.context;e.set(d,".framebufferWidth",b+".width");e.set(d,".framebufferHeight",b+".height");return b})):q(function(c,e){var b=c.shared;e.set(b.framebuffer,".next","null");b=b.context;e.set(b,".framebufferWidth",b+".drawingBufferWidth");e.set(b,".framebufferHeight",b+".drawingBufferHeight");
return"null"})}if("framebuffer"in d){var a=d.framebuffer;return m(a,function(c,e){var b=c.invoke(e,a),d=c.shared,l=d.framebuffer,k=e.def(l,".getFramebuffer(",b,")");g.optional(function(){c.assert(e,"!"+b+"||"+k,"invalid framebuffer object")});e.set(l,".next",k);d=d.context;e.set(d,".framebufferWidth",k+"?"+k+".width:"+d+".drawingBufferWidth");e.set(d,".framebufferHeight",k+"?"+k+".height:"+d+".drawingBufferHeight");return k})}return null}function x(c,e,b){function d(c){if(c in l){var k=l[c];g.commandType(k,
"object","invalid "+c,b.commandStr);var h=!0,p=k.x|0,n=k.y|0,u,w;"width"in k?(u=k.width|0,g.command(0<=u,"invalid "+c,b.commandStr)):h=!1;"height"in k?(w=k.height|0,g.command(0<=w,"invalid "+c,b.commandStr)):h=!1;return new C(!h&&e&&e.thisDep,!h&&e&&e.contextDep,!h&&e&&e.propDep,function(c,e){var b=c.shared.context,d=u;"width"in k||(d=e.def(b,".","framebufferWidth","-",p));var l=w;"height"in k||(l=e.def(b,".","framebufferHeight","-",n));return[p,n,d,l]})}if(c in a){var v=a[c],h=m(v,function(e,b){var d=
e.invoke(b,v);g.optional(function(){e.assert(b,d+"&&typeof "+d+'==="object"',"invalid "+c)});var l=e.shared.context,a=b.def(d,".x|0"),k=b.def(d,".y|0"),h=b.def('"width" in ',d,"?",d,".width|0:","(",l,".","framebufferWidth","-",a,")"),p=b.def('"height" in ',d,"?",d,".height|0:","(",l,".","framebufferHeight","-",k,")");g.optional(function(){e.assert(b,h+">=0&&"+p+">=0","invalid "+c)});return[a,k,h,p]});e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep);
return h}return e?new C(e.thisDep,e.contextDep,e.propDep,function(c,e){var b=c.shared.context;return[0,0,e.def(b,".","framebufferWidth"),e.def(b,".","framebufferHeight")]}):null}var l=c["static"],a=c.dynamic;if(c=d("viewport")){var k=c;c=new C(c.thisDep,c.contextDep,c.propDep,function(c,e){var b=k.append(c,e),d=c.shared.context;e.set(d,".viewportWidth",b[2]);e.set(d,".viewportHeight",b[3]);return b})}return{viewport:c,scissor_box:d("scissor.box")}}function K(c,e){var d=c["static"];if("string"===typeof d.frag&&
"string"===typeof d.vert){if(0<b(e.dynamic).length)return null;var d=e["static"],l=b(d);if(0<l.length&&"number"===typeof d[l[0]]){for(var a=[],k=0;k<l.length;++k)g("number"===typeof d[l[k]],"must specify all vertex attribute locations when using vaos"),a.push([d[l[k]]|0,l[k]]);return a}}return null}function L(c,e,b){function d(c){if(c in l){var e=v.id(l[c]);g.optional(function(){la.shader(ob[c],e,g.guessCommand())});var b=q(function(){return e});b.id=e;return b}if(c in a){var k=a[c];return m(k,function(e,
b){var d=e.invoke(b,k),l=b.def(e.shared.strings,".id(",d,")");g.optional(function(){b(e.shared.shader,".shader(",ob[c],",",l,",",e.command,");")});return l})}return null}var l=c["static"],a=c.dynamic,k=d("frag"),h=d("vert"),p=null;r(k)&&r(h)?(p=la.program(h.id,k.id,null,b),c=q(function(c,e){return c.link(p)})):c=new C(k&&k.thisDep||h&&h.thisDep,k&&k.contextDep||h&&h.contextDep,k&&k.propDep||h&&h.propDep,function(c,e){var b=c.shared.shader,d;d=k?k.append(c,e):e.def(b,".","frag");var l;l=h?h.append(c,
e):e.def(b,".","vert");var a=b+".program("+l+","+d;g.optional(function(){a+=","+c.command});return e.def(a+")")});return{frag:k,vert:h,progVar:c,program:p}}function da(c,e){function d(c,b){if(c in l){var a=l[c]|0;b?h.offset=a:h.instances=a;g.command(!b||0<=a,"invalid "+c,e.commandStr);return q(function(c,e){b&&(c.OFFSET=a);return a})}if(c in k){var n=k[c];return m(n,function(e,d){var l=e.invoke(d,n);b&&(e.OFFSET=l,g.optional(function(){e.assert(d,l+">=0","invalid "+c)}));return l})}if(b){if(w)return q(function(c,
e){return c.OFFSET=0});if(p)return new C(u.thisDep,u.contextDep,u.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.offset:0")})}else if(p)return new C(u.thisDep,u.contextDep,u.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.instances:-1")});return null}var l=c["static"],k=c.dynamic,h={},p=!1,u=function(){if("vao"in l){var c=l.vao;null!==c&&null===M.getVAO(c)&&(c=M.createVAO(c));p=!0;h.vao=c;return q(function(e){var b=
M.getVAO(c);return b?e.link(b):"null"})}if("vao"in k){p=!0;var e=k.vao;return m(e,function(c,b){var d=c.invoke(b,e);return b.def(c.shared.vao+".getVAO("+d+")")})}return null}(),w=!1,v=function(){if("elements"in l){var c=l.elements;h.elements=c;if(a(c)){var b=h.elements=E.create(c,!0),c=E.getElements(b);w=!0}else c&&(c=E.getElements(c),w=!0,g.command(c,"invalid elements",e.commandStr));b=q(function(e,b){if(c){var d=e.link(c);return e.ELEMENTS=d}return e.ELEMENTS=null});b.value=c;return b}if("elements"in
k){w=!0;var d=k.elements;return m(d,function(c,e){var b=c.shared,l=b.isBufferArgs,b=b.elements,a=c.invoke(e,d),k=e.def("null"),l=e.def(l,"(",a,")"),h=c.cond(l).then(k,"=",b,".createStream(",a,");")["else"](k,"=",b,".getElements(",a,");");g.optional(function(){c.assert(h["else"],"!"+a+"||"+k,"invalid elements")});e.entry(h);e.exit(c.cond(l).then(b,".destroyStream(",k,");"));return c.ELEMENTS=k})}return p?new C(u.thisDep,u.contextDep,u.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+
c.shared.elements+".getElements("+c.shared.vao+".currentVAO.elements):null")}):null}(),D=d("offset",!0),y=function(){if("primitive"in l){var c=l.primitive;h.primitive=c;g.commandParameter(c,n,"invalid primitve",e.commandStr);return q(function(e,b){return n[c]})}if("primitive"in k){var d=k.primitive;return m(d,function(c,e){var l=c.constants.primTypes,a=c.invoke(e,d);g.optional(function(){c.assert(e,a+" in "+l,"invalid primitive, must be one of "+b(n))});return e.def(l,"[",a,"]")})}return w?r(v)?v.value?
q(function(c,e){return e.def(c.ELEMENTS,".primType")}):q(function(){return 4}):new C(v.thisDep,v.contextDep,v.propDep,function(c,e){var b=c.ELEMENTS;return e.def(b,"?",b,".primType:",4)}):p?new C(u.thisDep,u.contextDep,u.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.primitive:4")}):null}(),B=function(){if("count"in l){var c=l.count|0;h.count=c;g.command("number"===typeof c&&0<=c,"invalid vertex count",e.commandStr);return q(function(){return c})}if("count"in
k){var b=k.count;return m(b,function(c,e){var d=c.invoke(e,b);g.optional(function(){c.assert(e,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(w){if(r(v)){if(v)return D?new C(D.thisDep,D.contextDep,D.propDep,function(c,e){var b=e.def(c.ELEMENTS,".vertCount-",c.OFFSET);g.optional(function(){c.assert(e,b+">=0","invalid vertex offset/element buffer too small")});return b}):q(function(c,e){return e.def(c.ELEMENTS,".vertCount")});var d=q(function(){return-1});
g.optional(function(){d.MISSING=!0});return d}var a=new C(v.thisDep||D.thisDep,v.contextDep||D.contextDep,v.propDep||D.propDep,function(c,e){var b=c.ELEMENTS;return c.OFFSET?e.def(b,"?",b,".vertCount-",c.OFFSET,":-1"):e.def(b,"?",b,".vertCount:-1")});g.optional(function(){a.DYNAMIC=!0});return a}return p?new C(u.thisDep,u.contextDep,u.propDep,function(c,e){return e.def(c.shared.vao,".currentVAO?",c.shared.vao,".currentVAO.count:-1")}):null}(),z=d("instances",!1);return{elements:v,primitive:y,count:B,
instances:z,offset:D,vao:u,vaoActive:p,elementsActive:w,"static":h}}function X(c,e){var d=c["static"],a=c.dynamic,k={};ta.forEach(function(c){function h(e,b){if(c in d){var l=e(d[c]);k[p]=q(function(){return l})}else if(c in a){var g=a[c];k[p]=m(g,function(c,e){return b(c,e,c.invoke(e,g))})}}var p=P(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(b){g.commandType(b,
"boolean",c,e.commandStr);return b},function(e,b,d){g.optional(function(){e.assert(b,"typeof "+d+'==="boolean"',"invalid flag "+c,e.commandStr)});return d});case "depth.func":return h(function(b){g.commandParameter(b,y,"invalid "+c,e.commandStr);return y[b]},function(e,d,l){var a=e.constants.compareFuncs;g.optional(function(){e.assert(d,l+" in "+a,"invalid "+c+", must be one of "+b(y))});return d.def(a,"[",l,"]")});case "depth.range":return h(function(c){g.command(l(c)&&2===c.length&&"number"===typeof c[0]&&
"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",e.commandStr);return c},function(c,e,b){g.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===2&&typeof "+b+'[0]==="number"&&typeof '+b+'[1]==="number"&&'+b+"[0]<="+b+"[1]","depth range must be a 2d array")});var d=e.def("+",b,"[0]"),l=e.def("+",b,"[1]");return[d,l]});case "blend.func":return h(function(c){g.commandType(c,"object","blend.func",e.commandStr);var b="srcRGB"in c?c.srcRGB:c.src,d="srcAlpha"in c?c.srcAlpha:
c.src,l="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;g.commandParameter(b,D,p+".srcRGB",e.commandStr);g.commandParameter(d,D,p+".srcAlpha",e.commandStr);g.commandParameter(l,D,p+".dstRGB",e.commandStr);g.commandParameter(c,D,p+".dstAlpha",e.commandStr);g.command(-1===Ea.indexOf(b+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+l+")",e.commandStr);return[D[b],D[l],D[d],D[c]]},function(e,d,l){function a(h,p){var n=d.def('"',h,p,'" in ',l,"?",l,".",h,p,":",l,".",
h);g.optional(function(){e.assert(d,n+" in "+k,"invalid "+c+"."+h+p+", must be one of "+b(D))});return n}var k=e.constants.blendFuncs;g.optional(function(){e.assert(d,l+"&&typeof "+l+'==="object"',"invalid blend func, must be an object")});var h=a("src","RGB"),p=a("dst","RGB");g.optional(function(){e.assert(d,e.constants.invalidBlendCombinations+".indexOf("+h+'+", "+'+p+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var n=d.def(k,"[",h,"]"),u=d.def(k,"[",a("src","Alpha"),"]"),
w=d.def(k,"[",p,"]"),v=d.def(k,"[",a("dst","Alpha"),"]");return[n,w,u,v]});case "blend.equation":return h(function(b){if("string"===typeof b)return g.commandParameter(b,Fa,"invalid "+c,e.commandStr),[Fa[b],Fa[b]];if("object"===typeof b)return g.commandParameter(b.rgb,Fa,c+".rgb",e.commandStr),g.commandParameter(b.alpha,Fa,c+".alpha",e.commandStr),[Fa[b.rgb],Fa[b.alpha]];g.commandRaise("invalid blend.equation",e.commandStr)},function(e,d,l){var a=e.constants.blendEquations,k=d.def(),h=d.def(),p=e.cond("typeof ",
l,'==="string"');g.optional(function(){function d(c,l,g){e.assert(c,g+" in "+a,"invalid "+l+", must be one of "+b(Fa))}d(p.then,c,l);e.assert(p["else"],l+"&&typeof "+l+'==="object"',"invalid "+c);d(p["else"],c+".rgb",l+".rgb");d(p["else"],c+".alpha",l+".alpha")});p.then(k,"=",h,"=",a,"[",l,"];");p["else"](k,"=",a,"[",l,".rgb];",h,"=",a,"[",l,".alpha];");d(p);return[k,h]});case "blend.color":return h(function(c){g.command(l(c)&&4===c.length,"blend.color must be a 4d array",e.commandStr);return B(4,
function(e){return+c[e]})},function(c,e,b){g.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","blend.color must be a 4d array")});return B(4,function(c){return e.def("+",b,"[",c,"]")})});case "stencil.mask":return h(function(c){g.commandType(c,"number",p,e.commandStr);return c|0},function(c,e,b){g.optional(function(){c.assert(e,"typeof "+b+'==="number"',"invalid stencil.mask")});return e.def(b,"|0")});case "stencil.func":return h(function(b){g.commandType(b,"object",
p,e.commandStr);var d=b.cmp||"keep",l=b.ref||0;b="mask"in b?b.mask:-1;g.commandParameter(d,y,c+".cmp",e.commandStr);g.commandType(l,"number",c+".ref",e.commandStr);g.commandType(b,"number",c+".mask",e.commandStr);return[y[d],l,b]},function(c,e,b){var d=c.constants.compareFuncs;g.optional(function(){function l(){c.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}l(b+"&&typeof ",b,'==="object"');l('!("cmp" in ',b,")||(",b,".cmp in ",d,")")});var l=e.def('"cmp" in ',b,"?",d,"[",
b,".cmp]",":",7680),a=e.def(b,".ref|0"),k=e.def('"mask" in ',b,"?",b,".mask|0:-1");return[l,a,k]});case "stencil.opFront":case "stencil.opBack":return h(function(b){g.commandType(b,"object",p,e.commandStr);var d=b.fail||"keep",l=b.zfail||"keep";b=b.zpass||"keep";g.commandParameter(d,G,c+".fail",e.commandStr);g.commandParameter(l,G,c+".zfail",e.commandStr);g.commandParameter(b,G,c+".zpass",e.commandStr);return["stencil.opBack"===c?1029:1028,G[d],G[l],G[b]]},function(e,d,l){function a(h){g.optional(function(){e.assert(d,
'!("'+h+'" in '+l+")||("+l+"."+h+" in "+k+")","invalid "+c+"."+h+", must be one of "+b(G))});return d.def('"',h,'" in ',l,"?",k,"[",l,".",h,"]:",7680)}var k=e.constants.stencilOps;g.optional(function(){e.assert(d,l+"&&typeof "+l+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,a("fail"),a("zfail"),a("zpass")]});case "polygonOffset.offset":return h(function(c){g.commandType(c,"object",p,e.commandStr);var b=c.factor|0;c=c.units|0;g.commandType(b,"number",p+".factor",e.commandStr);
g.commandType(c,"number",p+".units",e.commandStr);return[b,c]},function(e,b,d){g.optional(function(){e.assert(b,d+"&&typeof "+d+'==="object"',"invalid "+c)});var l=b.def(d,".factor|0"),a=b.def(d,".units|0");return[l,a]});case "cull.face":return h(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);g.command(!!b,p,e.commandStr);return b},function(c,e,b){g.optional(function(){c.assert(e,b+'==="front"||'+b+'==="back"',"invalid cull.face")});return e.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(c){g.command("number"===
typeof c&&c>=J.lineWidthDims[0]&&c<=J.lineWidthDims[1],"invalid line width, must be a positive number between "+J.lineWidthDims[0]+" and "+J.lineWidthDims[1],e.commandStr);return c},function(c,e,b){g.optional(function(){c.assert(e,"typeof "+b+'==="number"&&'+b+">="+J.lineWidthDims[0]+"&&"+b+"<="+J.lineWidthDims[1],"invalid line width")});return b});case "frontFace":return h(function(c){g.commandParameter(c,I,p,e.commandStr);return I[c]},function(c,e,b){g.optional(function(){c.assert(e,b+'==="cw"||'+
b+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(b+'==="cw"?2304:2305')});case "colorMask":return h(function(c){g.command(l(c)&&4===c.length,"color.mask must be length 4 array",e.commandStr);return c.map(function(c){return!!c})},function(c,e,b){g.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","invalid color.mask")});return B(4,function(c){return"!!"+b+"["+c+"]"})});case "sample.coverage":return h(function(c){g.command("object"===typeof c&&c,
p,e.commandStr);var b="value"in c?c.value:1;c=!!c.invert;g.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",e.commandStr);return[b,c]},function(c,e,b){g.optional(function(){c.assert(e,b+"&&typeof "+b+'==="object"',"invalid sample.coverage")});var d=e.def('"value" in ',b,"?+",b,".value:1"),l=e.def("!!",b,".invert");return[d,l]})}});return k}function ma(c,e){var d=c["static"],a=c.dynamic,k={};b(d).forEach(function(c){var b=d[c],a;if("number"===typeof b||
"boolean"===typeof b)a=q(function(){return b});else if("function"===typeof b){var h=b._reglType;"texture2d"===h||"textureCube"===h?a=q(function(c){return c.link(b)}):"framebuffer"===h||"framebufferCube"===h?(g.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',e.commandStr),a=q(function(c){return c.link(b.color[0])})):g.commandRaise('invalid data for uniform "'+c+'"',e.commandStr)}else l(b)?a=q(function(e){return e.global.def("[",B(b.length,function(d){g.command("number"===
typeof b[d]||"boolean"===typeof b[d],"invalid uniform "+c,e.commandStr);return b[d]}),"]")}):g.commandRaise('invalid or missing data for uniform "'+c+'"',e.commandStr);a.value=b;k[c]=a});b(a).forEach(function(c){var e=a[c];k[c]=m(e,function(c,b){return c.invoke(b,e)})});return k}function ga(c,e){var d=c["static"],h=c.dynamic,p={};b(d).forEach(function(c){var h=d[c],n=v.id(c),w=new xa;if(a(h))w.state=1,w.buffer=F.getBuffer(F.create(h,34962,!1,!0)),w.type=0;else{var m=F.getBuffer(h);if(m)w.state=1,
w.buffer=m,w.type=0;else if(g.command("object"===typeof h&&h,"invalid data for attribute "+c,e.commandStr),"constant"in h){var r=h.constant;w.buffer="null";w.state=2;"number"===typeof r?w.x=r:(g.command(l(r)&&0<r.length&&4>=r.length,"invalid constant for attribute "+c,e.commandStr),u.forEach(function(c,e){e<r.length&&(w[c]=r[e])}))}else{m=a(h.buffer)?F.getBuffer(F.create(h.buffer,34962,!1,!0)):F.getBuffer(h.buffer);g.command(!!m,'missing buffer for attribute "'+c+'"',e.commandStr);var D=h.offset|
0;g.command(0<=D,'invalid offset for attribute "'+c+'"',e.commandStr);var y=h.stride|0;g.command(0<=y&&256>y,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',e.commandStr);var B=h.size|0;g.command(!("size"in h)||0<B&&4>=B,'invalid size for attribute "'+c+'", must be 1,2,3,4',e.commandStr);var C=!!h.normalized,E=0;"type"in h&&(g.commandParameter(h.type,k,"invalid type for attribute "+c,e.commandStr),E=k[h.type]);var z=h.divisor|0;g.optional(function(){"divisor"in h&&(g.command(0===
z||qa,'cannot specify divisor for attribute "'+c+'", instancing not supported',e.commandStr),g.command(0<=z,'invalid divisor for attribute "'+c+'"',e.commandStr));var d=e.commandStr,l="buffer offset divisor normalized type size stride".split(" ");b(h).forEach(function(e){g.command(0<=l.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+c+'" (valid parameters are '+l+")",d)})});w.buffer=m;w.state=1;w.size=B;w.normalized=C;w.type=E||m.dtype;w.offset=D;w.stride=y;w.divisor=z}}p[c]=q(function(c,
e){var d=c.attribCache;if(n in d)return d[n];var l={isStream:!1};b(w).forEach(function(c){l[c]=w[c]});w.buffer&&(l.buffer=c.link(w.buffer),l.type=l.type||l.buffer+".dtype");return d[n]=l})});b(h).forEach(function(c){var e=h[c];p[c]=m(e,function(d,l){function a(c){l(v[c],"=",h,".",c,"|0;")}var h=d.invoke(l,e),k=d.shared,p=d.constants,n=k.isBufferArgs,w=k.buffer;g.optional(function(){d.assert(l,h+"&&(typeof "+h+'==="object"||typeof '+h+'==="function")&&('+n+"("+h+")||"+w+".getBuffer("+h+")||"+w+".getBuffer("+
h+".buffer)||"+n+"("+h+'.buffer)||("constant" in '+h+"&&(typeof "+h+'.constant==="number"||'+k.isArrayLike+"("+h+".constant))))",'invalid dynamic attribute "'+c+'"')});var v={isStream:l.def(!1)},m=new xa;m.state=1;b(m).forEach(function(c){v[c]=l.def(""+m[c])});var r=v.buffer,D=v.type;l("if(",n,"(",h,")){",v.isStream,"=true;",r,"=",w,".createStream(",34962,",",h,");",D,"=",r,".dtype;","}else{",r,"=",w,".getBuffer(",h,");","if(",r,"){",D,"=",r,".dtype;",'}else if("constant" in ',h,"){",v.state,"=",
2,";","if(typeof "+h+'.constant === "number"){',v[u[0]],"=",h,".constant;",u.slice(1).map(function(c){return v[c]}).join("="),"=0;","}else{",u.map(function(c,e){return v[c]+"="+h+".constant.length>"+e+"?"+h+".constant["+e+"]:0;"}).join(""),"}}else{","if(",n,"(",h,".buffer)){",r,"=",w,".createStream(",34962,",",h,".buffer);","}else{",r,"=",w,".getBuffer(",h,".buffer);","}",D,'="type" in ',h,"?",p.glTypes,"[",h,".type]:",r,".dtype;",v.normalized,"=!!",h,".normalized;");a("size");a("offset");a("stride");
a("divisor");l("}}");l.exit("if(",v.isStream,"){",w,".destroyStream(",r,");","}");return v})});return p}function Ba(c){var e=c["static"],d=c.dynamic,l={};b(e).forEach(function(c){var b=e[c];l[c]=q(function(c,e){return"number"===typeof b||"boolean"===typeof b?""+b:c.link(b)})});b(d).forEach(function(c){var e=d[c];l[c]=m(e,function(c,b){return c.invoke(b,e)})});return l}function va(c,e,d,l,a){function h(c){var e=w[c];e&&(m[c]=e)}var k=c["static"],p=c.dynamic;g.optional(function(){function c(d){b(d).forEach(function(c){g.command(0<=
e.indexOf(c),'unknown parameter "'+c+'"',a.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);c(k);c(p)});var n=K(c,e),u=ra(c,a),w=x(c,u,a),v=da(c,a),m=X(c,a),r=L(c,a,n);h("viewport");h(P("scissor.box"));var D=0<b(m).length,u={framebuffer:u,draw:v,shader:r,state:m,dirty:D,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};u.profile=R(c,a);u.uniforms=ma(d,a);u.drawVAO=u.scopeVAO=v.vao;if(!u.drawVAO&&r.program&&!n&&f.angle_instanced_arrays&&
v["static"].elements){var y=!0;c=r.program.attributes.map(function(c){c=e["static"][c];y=y&&!!c;return c});if(y&&0<c.length){var B=M.getVAO(M.createVAO({attributes:c,elements:v["static"].elements}));u.drawVAO=new C(null,null,null,function(c,e){return c.link(B)});u.useVAO=!0}}n?u.useVAO=!0:u.attributes=ga(e,a);u.context=Ba(l,a);return u}function ca(c,e,d){var l=c.shared.context,a=c.scope();b(d).forEach(function(b){e.save(l,"."+b);var g=d[b].append(c,e);Array.isArray(g)?a(l,".",b,"=[",g.join(),"];"):
a(l,".",b,"=",g,";")});e(a)}function Da(c,e,b,d){var l=c.shared,a=l.gl,g=l.framebuffer,h;ya&&(h=e.def(l.extensions,".webgl_draw_buffers"));var k=c.constants,l=k.drawBuffer,k=k.backBuffer;c=b?b.append(c,e):e.def(g,".next");d||e("if(",c,"!==",g,".cur){");e("if(",c,"){",a,".bindFramebuffer(",36160,",",c,".framebuffer);");ya&&e(h,".drawBuffersWEBGL(",l,"[",c,".colorAttachments.length]);");e("}else{",a,".bindFramebuffer(",36160,",null);");ya&&e(h,".drawBuffersWEBGL(",k,");");e("}",g,".cur=",c,";");d||
e("}")}function ja(c,e,d){var l=c.shared,a=l.gl,g=c.current,h=c.next,k=l.current,p=l.next,n=c.cond(k,".dirty");ta.forEach(function(e){e=P(e);if(!(e in d.state)){var b,l;if(e in h){b=h[e];l=g[e];var u=B(ia[e].length,function(c){return n.def(b,"[",c,"]")});n(c.cond(u.map(function(c,e){return c+"!=="+l+"["+e+"]"}).join("||")).then(a,".",Ja[e],"(",u,");",u.map(function(c,e){return l+"["+e+"]="+c}).join(";"),";"))}else b=n.def(p,".",e),u=c.cond(b,"!==",k,".",e),n(u),e in Ia?u(c.cond(b).then(a,".enable(",
Ia[e],");")["else"](a,".disable(",Ia[e],");"),k,".",e,"=",b,";"):u(a,".",Ja[e],"(",b,");",k,".",e,"=",b,";")}});0===b(d.state).length&&n(k,".dirty=false;");e(n)}function na(c,e,a,g){var h=c.shared,k=c.current,p=h.current,n=h.gl;d(b(a)).forEach(function(b){var d=a[b];if(!g||g(d)){var h=d.append(c,e);if(Ia[b]){var u=Ia[b];r(d)?h?e(n,".enable(",u,");"):e(n,".disable(",u,");"):e(c.cond(h).then(n,".enable(",u,");")["else"](n,".disable(",u,");"));e(p,".",b,"=",h,";")}else if(l(h)){var w=k[b];e(n,".",Ja[b],
"(",h,");",h.map(function(c,e){return w+"["+e+"]="+c}).join(";"),";")}else e(n,".",Ja[b],"(",h,");",p,".",b,"=",h,";")}})}function Aa(c,e){qa&&(c.instancing=e.def(c.shared.extensions,".angle_instanced_arrays"))}function Pa(c,e,b,d,l){function a(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function h(c){v=e.def();c(v,"=",a(),";");"string"===typeof l?c(n,".count+=",l,";"):c(n,".count++;");V&&(d?(m=e.def(),c(m,"=",w,".getNumPendingQueries();")):c(w,".beginQuery(",n,");"))}
function g(c){c(n,".cpuTime+=",a(),"-",v,";");V&&(d?c(w,".pushScopeStats(",m,",",w,".getNumPendingQueries(),",n,");"):c(w,".endQuery();"))}function k(c){var b=e.def(u,".profile");e(u,".profile=",c,";");e.exit(u,".profile=",b,";")}var p=c.shared,n=c.stats,u=p.current,w=p.timer;b=b.profile;var v,m;if(b){if(r(b)){b.enable?(h(e),g(e.exit),k("true")):k("false");return}b=b.append(c,e);k(b)}else b=e.def(u,".profile");p=c.block();h(p);e("if(",b,"){",p,"}");c=c.block();g(c);e.exit("if(",b,"){",c,"}")}function za(c,
e,d,l,a){function h(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function k(b,d,l){function a(){e("if(!",w,".buffer){",g,".enableVertexAttribArray(",n,");}");var b=l.type,h;h=l.size?e.def(l.size,"||",d):d;e("if(",w,".type!==",b,"||",w,".size!==",h,"||",r.map(function(c){return w+"."+c+"!=="+l[c]}).join("||"),"){",g,".bindBuffer(",34962,",",v,".buffer);",g,".vertexAttribPointer(",[n,h,b,
l.normalized,l.stride,l.offset],");",w,".type=",b,";",w,".size=",h,";",r.map(function(c){return w+"."+c+"="+l[c]+";"}).join(""),"}");qa&&(b=l.divisor,e("if(",w,".divisor!==",b,"){",c.instancing,".vertexAttribDivisorANGLE(",[n,b],");",w,".divisor=",b,";}"))}function h(){e("if(",w,".buffer){",g,".disableVertexAttribArray(",n,");",w,".buffer=null;","}if(",u.map(function(c,e){return w+"."+c+"!=="+m[e]}).join("||"),"){",g,".vertexAttrib4f(",n,",",m,");",u.map(function(c,e){return w+"."+c+"="+m[e]+";"}).join(""),
"}")}var g=p.gl,n=e.def(b,".location"),w=e.def(p.attributes,"[",n,"]");b=l.state;var v=l.buffer,m=[l.x,l.y,l.z,l.w],r=["buffer","normalized","offset","stride"];1===b?a():2===b?h():(e("if(",b,"===",1,"){"),a(),e("}else{"),h(),e("}"))}var p=c.shared;l.forEach(function(l){var p=l.name,n=d.attributes[p],u;if(n){if(!a(n))return;u=n.append(c,e)}else{if(!a(S))return;var w=c.scopeAttrib(p);g.optional(function(){c.assert(e,w+".state","missing attribute "+p)});u={};b(new xa).forEach(function(c){u[c]=e.def(w,
".",c)})}k(c.link(l),h(l.info.type),u)})}function Xb(c,e,b,d,a,h){for(var k=c.shared,p=k.gl,n,u=0;u<d.length;++u){var w=d[u],m=w.name,D=w.info.type,y=b.uniforms[m],w=c.link(w)+".location",q;if(y){if(!a(y))continue;if(r(y)){var C=y.value;g.command(null!==C&&"undefined"!==typeof C,'missing uniform "'+m+'"',c.commandStr);if(35678===D||35680===D)g.command("function"===typeof C&&(35678===D&&("texture2d"===C._reglType||"framebuffer"===C._reglType)||35680===D&&("textureCube"===C._reglType||"framebufferCube"===
C._reglType)),"invalid texture for uniform "+m,c.commandStr),y=c.link(C._texture||C.color[0]._texture),e(p,".uniform1i(",w,",",y+".bind());"),e.exit(y,".unbind();");else if(35674===D||35675===D||35676===D){g.optional(function(){g.command(l(C),"invalid matrix for uniform "+m,c.commandStr);g.command(35674===D&&4===C.length||35675===D&&9===C.length||35676===D&&16===C.length,"invalid length for matrix uniform "+m,c.commandStr)});var y=c.global.def("new Float32Array(["+Array.prototype.slice.call(C)+"])"),
E=2;35675===D?E=3:35676===D&&(E=4);e(p,".uniformMatrix",E,"fv(",w,",false,",y,");")}else{switch(D){case 5126:g.commandType(C,"number","uniform "+m,c.commandStr);n="1f";break;case 35664:g.command(l(C)&&2===C.length,"uniform "+m,c.commandStr);n="2f";break;case 35665:g.command(l(C)&&3===C.length,"uniform "+m,c.commandStr);n="3f";break;case 35666:g.command(l(C)&&4===C.length,"uniform "+m,c.commandStr);n="4f";break;case 35670:g.commandType(C,"boolean","uniform "+m,c.commandStr);n="1i";break;case 5124:g.commandType(C,
"number","uniform "+m,c.commandStr);n="1i";break;case 35671:g.command(l(C)&&2===C.length,"uniform "+m,c.commandStr);n="2i";break;case 35667:g.command(l(C)&&2===C.length,"uniform "+m,c.commandStr);n="2i";break;case 35672:g.command(l(C)&&3===C.length,"uniform "+m,c.commandStr);n="3i";break;case 35668:g.command(l(C)&&3===C.length,"uniform "+m,c.commandStr);n="3i";break;case 35673:g.command(l(C)&&4===C.length,"uniform "+m,c.commandStr);n="4i";break;case 35669:g.command(l(C)&&4===C.length,"uniform "+m,
c.commandStr),n="4i"}e(p,".uniform",n,"(",w,",",l(C)?Array.prototype.slice.call(C):C,");")}continue}else q=y.append(c,e)}else{if(!a(S))continue;q=e.def(k.uniforms,"[",v.id(m),"]")}35678===D?(g(!Array.isArray(q),"must specify a scalar prop for textures"),e("if(",q,"&&",q,'._reglType==="framebuffer"){',q,"=",q,".color[0];","}")):35680===D&&(g(!Array.isArray(q),"must specify a scalar prop for cube maps"),e("if(",q,"&&",q,'._reglType==="framebufferCube"){',q,"=",q,".color[0];","}"));g.optional(function(){function b(d,
l){c.assert(e,d,'bad data or missing for uniform "'+m+'".  '+l)}function d(c){g(!Array.isArray(q),"must not specify an array type for uniform");b("typeof "+q+'==="'+c+'"',"invalid type, expected "+c)}function l(e,d){Array.isArray(q)?g(q.length===e,"must have length "+e):b(k.isArrayLike+"("+q+")&&"+q+".length==="+e,"invalid vector, should have length "+e,c.commandStr)}function a(e){g(!Array.isArray(q),"must not specify a value type");b("typeof "+q+'==="function"&&'+q+'._reglType==="texture'+(3553===
e?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(D){case 5124:d("number");break;case 35667:l(2,"number");break;case 35668:l(3,"number");break;case 35669:l(4,"number");break;case 5126:d("number");break;case 35664:l(2,"number");break;case 35665:l(3,"number");break;case 35666:l(4,"number");break;case 35670:d("boolean");break;case 35671:l(2,"boolean");break;case 35672:l(3,"boolean");break;case 35673:l(4,"boolean");break;case 35674:l(4,"number");break;case 35675:l(9,"number");break;case 35676:l(16,
"number");break;case 35678:a(3553);break;case 35680:a(34067)}});y=1;switch(D){case 35678:case 35680:y=e.def(q,"._texture");e(p,".uniform1i(",w,",",y,".bind());");e.exit(y,".unbind();");continue;case 5124:case 35670:n="1i";break;case 35667:case 35671:n="2i";y=2;break;case 35668:case 35672:n="3i";y=3;break;case 35669:case 35673:n="4i";y=4;break;case 5126:n="1f";break;case 35664:n="2f";y=2;break;case 35665:n="3f";y=3;break;case 35666:n="4f";y=4;break;case 35674:n="Matrix2fv";break;case 35675:n="Matrix3fv";
break;case 35676:n="Matrix4fv"}if("M"===n.charAt(0)){e(p,".uniform",n,"(",w,",");var w=Math.pow(D-35674+2,2),z=c.global.def("new Float32Array(",w,")");Array.isArray(q)?e("false,(",B(w,function(c){return z+"["+c+"]="+q[c]}),",",z,")"):e("false,(Array.isArray(",q,")||",q," instanceof Float32Array)?",q,":(",B(w,function(c){return z+"["+c+"]="+q+"["+c+"]"}),",",z,")");e(");")}else{if(1<y){for(var E=[],f=[],G=0;G<y;++G)Array.isArray(q)?f.push(q[G]):f.push(e.def(q+"["+G+"]")),h&&E.push(e.def());h&&e("if(!",
c.batchId,"||",E.map(function(c,e){return c+"!=="+f[e]}).join("||"),"){",E.map(function(c,e){return c+"="+f[e]+";"}).join(""));e(p,".uniform",n,"(",w,",",f.join(","),");")}else g(!Array.isArray(q),"uniform value must not be an array"),h&&(y=e.def(),e("if(!",c.batchId,"||",y,"!==",q,"){",y,"=",q,";")),e(p,".uniform",n,"(",w,",",q,");");h&&e("}")}}}function Ua(c,e,b,d){function l(a){var h=u[a];return h?h.contextDep&&d.contextDynamic||h.propDep?h.append(c,b):h.append(c,e):e.def(n,".",a)}function a(){function c(){b(q,
".drawElementsInstancedANGLE(",[m,D,B,v+"<<(("+B+"-5121)>>1)",y],");")}function e(){b(q,".drawArraysInstancedANGLE(",[m,v,D,y],");")}w&&"null"!==w?C?c():(b("if(",w,"){"),c(),b("}else{"),e(),b("}")):e()}function h(){function c(){b(p+".drawElements("+[m,D,B,v+"<<(("+B+"-5121)>>1)"]+");")}function e(){b(p+".drawArrays("+[m,v,D]+");")}w&&"null"!==w?C?c():(b("if(",w,"){"),c(),b("}else{"),e(),b("}")):e()}var k=c.shared,p=k.gl,n=k.draw,u=d.draw,w=function(){var l=u.elements,a=e;if(l){if(l.contextDep&&d.contextDynamic||
l.propDep)a=b;l=l.append(c,a);u.elementsActive&&a("if("+l+")"+p+".bindBuffer(34963,"+l+".buffer.buffer);")}else l=a.def(),a(l,"=",n,".","elements",";","if(",l,"){",p,".bindBuffer(",34963,",",l,".buffer.buffer);}","else if(",k.vao,".currentVAO){",l,"=",c.shared.elements+".getElements("+k.vao,".currentVAO.elements);",wa?"":"if("+l+")"+p+".bindBuffer(34963,"+l+".buffer.buffer);","}");return l}(),m=l("primitive"),v=l("offset"),D=function(){var l=u.count,a,h=e;if(l){if(l.contextDep&&d.contextDynamic||
l.propDep)h=b;a=l.append(c,h);g.optional(function(){l.MISSING&&c.assert(e,"false","missing vertex count");l.DYNAMIC&&c.assert(h,a+">=0","missing vertex count")})}else a=h.def(n,".","count"),g.optional(function(){c.assert(h,a+">=0","missing vertex count")});return a}();if("number"===typeof D){if(0===D)return}else b("if(",D,"){"),b.exit("}");var y,q;qa&&(y=l("instances"),q=c.instancing);var B=w+".type",C=u.elements&&r(u.elements)&&!u.vaoActive;qa&&("number"!==typeof y||0<=y)?"string"===typeof y?(b("if(",
y,">0){"),a(),b("}else if(",y,"<0){"),h(),b("}")):a():h()}function ha(c,e,b,d,l){var a=Q();l=a.proc("body",l);g.optional(function(){a.commandStr=e.commandStr;a.command=a.link(e.commandStr)});qa&&(a.instancing=l.def(a.shared.extensions,".angle_instanced_arrays"));c(a,l,b,d);return a.compile().body}function fa(c,e,b,d){Aa(c,e);b.useVAO?b.drawVAO?e(c.shared.vao,".setVAO(",b.drawVAO.append(c,e),");"):e(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(e(c.shared.vao,".setVAO(null);"),za(c,e,b,d.attributes,
function(){return!0}));Xb(c,e,b,d.uniforms,function(){return!0},!1);Ua(c,e,e,b)}function sa(c,e){var d=c.proc("draw",1);Aa(c,d);ca(c,d,e.context);Da(c,d,e.framebuffer);ja(c,d,e);na(c,d,e.state);Pa(c,d,e,!1,!0);var l=e.shader.progVar.append(c,d);d(c.shared.gl,".useProgram(",l,".program);");if(e.shader.program)fa(c,d,e,e.shader.program);else{d(c.shared.vao,".setVAO(null);");var a=c.global.def("{}"),h=d.def(l,".id"),g=d.def(a,"[",h,"]");d(c.cond(g).then(g,".call(this,a0);")["else"](g,"=",a,"[",h,"]=",
c.link(function(b){return ha(fa,c,e,b,1)}),"(",l,");",g,".call(this,a0);"))}0<b(e.state).length&&d(c.shared.current,".dirty=true;");c.shared.vao&&d(c.shared.vao,".setVAO(null);")}function ua(c,e,b,d){function l(){return!0}c.batchId="a1";Aa(c,e);za(c,e,b,d.attributes,l);Xb(c,e,b,d.uniforms,l,!1);Ua(c,e,e,b)}function Ca(c,e,b,d){function l(c){return c.contextDep&&h||c.propDep}function a(c){return!l(c)}Aa(c,e);var h=b.contextDep,g=e.def(),k=e.def();c.shared.props=k;c.batchId=g;var p=c.scope(),n=c.scope();
e(p.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",k,"=","a0","[",g,"];",n,"}",p.exit);b.needsContext&&ca(c,n,b.context);b.needsFramebuffer&&Da(c,n,b.framebuffer);na(c,n,b.state,l);b.profile&&l(b.profile)&&Pa(c,n,b,!1,!0);d?(b.useVAO?b.drawVAO?l(b.drawVAO)?n(c.shared.vao,".setVAO(",b.drawVAO.append(c,n),");"):p(c.shared.vao,".setVAO(",b.drawVAO.append(c,p),");"):p(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(p(c.shared.vao,".setVAO(null);"),za(c,p,b,d.attributes,a),za(c,n,b,d.attributes,l)),
Xb(c,p,b,d.uniforms,a,!1),Xb(c,n,b,d.uniforms,l,!0),Ua(c,p,n,b)):(e=c.global.def("{}"),d=b.shader.progVar.append(c,n),k=n.def(d,".id"),p=n.def(e,"[",k,"]"),n(c.shared.gl,".useProgram(",d,".program);","if(!",p,"){",p,"=",e,"[",k,"]=",c.link(function(e){return ha(ua,c,b,e,2)}),"(",d,");}",p,".call(this,a0[",g,"],",g,");"))}function lb(c,e){function d(c){return c.contextDep&&a||c.propDep}var l=c.proc("batch",2);c.batchId="0";Aa(c,l);var a=!1,h=!0;b(e.context).forEach(function(c){a=a||e.context[c].propDep});
a||(ca(c,l,e.context),h=!1);var g=e.framebuffer,k=!1;g?(g.propDep?a=k=!0:g.contextDep&&a&&(k=!0),k||Da(c,l,g)):Da(c,l,null);e.state.viewport&&e.state.viewport.propDep&&(a=!0);ja(c,l,e);na(c,l,e.state,function(c){return!d(c)});e.profile&&d(e.profile)||Pa(c,l,e,!1,"a1");e.contextDep=a;e.needsContext=h;e.needsFramebuffer=k;h=e.shader.progVar;if(h.contextDep&&a||h.propDep)Ca(c,l,e,null);else if(h=h.append(c,l),l(c.shared.gl,".useProgram(",h,".program);"),e.shader.program)Ca(c,l,e,e.shader.program);else{l(c.shared.vao,
".setVAO(null);");var g=c.global.def("{}"),k=l.def(h,".id"),p=l.def(g,"[",k,"]");l(c.cond(p).then(p,".call(this,a0,a1);")["else"](p,"=",g,"[",k,"]=",c.link(function(b){return ha(Ca,c,e,b,2)}),"(",h,");",p,".call(this,a0,a1);"))}0<b(e.state).length&&l(c.shared.current,".dirty=true;");c.shared.vao&&l(c.shared.vao,".setVAO(null);")}function Fb(c,e){function a(b){var d=e.shader[b];d&&h.set(g.shader,"."+b,d.append(c,h))}var h=c.proc("scope",3);c.batchId="a2";var g=c.shared,k=g.current;ca(c,h,e.context);
e.framebuffer&&e.framebuffer.append(c,h);d(b(e.state)).forEach(function(b){var d=e.state[b].append(c,h);l(d)?d.forEach(function(e,d){h.set(c.next[b],"["+d+"]",e)}):h.set(g.next,"."+b,d)});Pa(c,h,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var d=e.draw[b];d&&h.set(g.draw,"."+b,""+d.append(c,h))});b(e.uniforms).forEach(function(b){var d=e.uniforms[b].append(c,h);Array.isArray(d)&&(d="["+d.join()+"]");h.set(g.uniforms,"["+v.id(b)+"]",d)});b(e.attributes).forEach(function(d){var l=
e.attributes[d].append(c,h),a=c.scopeAttrib(d);b(new xa).forEach(function(c){h.set(a,"."+c,l[c])})});e.scopeVAO&&h.set(g.vao,".targetVAO",e.scopeVAO.append(c,h));a("vert");a("frag");0<b(e.state).length&&(h(k,".dirty=true;"),h.exit(k,".dirty=true;"));h("a1(",c.shared.context,",a0,",c.batchId,");")}function aa(c){if("object"===typeof c&&!l(c)){for(var e=b(c),d=0;d<e.length;++d)if(p.isDynamic(c[e[d]]))return!0;return!1}}function W(c,e,d){function l(c,e){g.forEach(function(b){var d=a[b];p.isDynamic(d)&&
(d=c.invoke(e,d),e(w,".",b,"=",d,";"))})}var a=e["static"][d];if(a&&aa(a)){var h=c.global,g=b(a),k=!1,n=!1,u=!1,w=c.global.def("{}");g.forEach(function(e){var b=a[e];if(p.isDynamic(b))"function"===typeof b&&(b=a[e]=p.unbox(b)),e=m(b,null),k=k||e.thisDep,u=u||e.propDep,n=n||e.contextDep;else{h(w,".",e,"=");switch(typeof b){case "number":h(b);break;case "string":h('"',b,'"');break;case "object":Array.isArray(b)&&h("[",b.join(),"]");break;default:h(c.link(b))}h(";")}});e.dynamic[d]=new p.DynamicVariable(4,
{thisDep:k,contextDep:n,propDep:u,ref:w,append:l});delete e["static"][d]}}var xa=M.Record,Fa={add:32774,subtract:32778,"reverse subtract":32779};f.ext_blend_minmax&&(Fa.min=32775,Fa.max=32776);var qa=f.angle_instanced_arrays,ya=f.webgl_draw_buffers,wa=f.oes_vertex_array_object,ia={dirty:!0,profile:T.profile},Y={},ta=[],Ia={},Ja={};N("dither",3024);N("blend.enable",3042);O("blend.color","blendColor",[0,0,0,0]);O("blend.equation","blendEquationSeparate",[32774,32774]);O("blend.func","blendFuncSeparate",
[1,0,1,0]);N("depth.enable",2929,!0);O("depth.func","depthFunc",513);O("depth.range","depthRange",[0,1]);O("depth.mask","depthMask",!0);O("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);O("cull.face","cullFace",1029);O("frontFace","frontFace",2305);O("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);O("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);O("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);O("stencil.mask",
"stencilMask",-1);O("stencil.func","stencilFunc",[519,0,-1]);O("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);O("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);O("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);O("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var Oa={gl:e,context:U,strings:v,next:Y,current:ia,draw:oa,elements:E,buffer:F,shader:la,attributes:M.state,vao:M,uniforms:t,framebuffer:z,extensions:f,
timer:V,isBufferArgs:a},Z={primTypes:n,compareFuncs:y,blendFuncs:D,blendEquations:Fa,stencilOps:G,glTypes:k,orientationType:I};g.optional(function(){Oa.isArrayLike=l});ya&&(Z.backBuffer=[1029],Z.drawBuffer=B(J.maxDrawbuffers,function(c){return 0===c?[0]:B(c,function(c){return 36064+c})}));var Gc=0;return{next:Y,current:ia,procs:function(){var c=Q(),e=c.proc("poll"),d=c.proc("refresh"),a=c.block();e(a);d(a);var h=c.shared,g=h.gl,k=h.next,p=h.current;a(p,".dirty=false;");Da(c,e);Da(c,d,null,!0);var n;
qa&&(n=c.link(qa));f.oes_vertex_array_object&&d(c.link(f.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var u=0;u<J.maxAttributes;++u){var w=d.def(h.attributes,"[",u,"]"),m=c.cond(w,".buffer");m.then(g,".enableVertexAttribArray(",u,");",g,".bindBuffer(",34962,",",w,".buffer.buffer);",g,".vertexAttribPointer(",u,",",w,".size,",w,".type,",w,".normalized,",w,".stride,",w,".offset);")["else"](g,".disableVertexAttribArray(",u,");",g,".vertexAttrib4f(",u,",",w,".x,",w,".y,",w,".z,",w,".w);",
w,".buffer=null;");d(m);qa&&d(n,".vertexAttribDivisorANGLE(",u,",",w,".divisor);")}d(c.shared.vao,".currentVAO=null;",c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);");b(Ia).forEach(function(b){var l=Ia[b],h=a.def(k,".",b),n=c.block();n("if(",h,"){",g,".enable(",l,")}else{",g,".disable(",l,")}",p,".",b,"=",h,";");d(n);e("if(",h,"!==",p,".",b,"){",n,"}")});b(Ja).forEach(function(b){var h=Ja[b],n=ia[b],u,w,m=c.block();m(g,".",h,"(");l(n)?(h=n.length,u=c.global.def(k,".",b),w=c.global.def(p,".",b),
m(B(h,function(c){return u+"["+c+"]"}),");",B(h,function(c){return w+"["+c+"]="+u+"["+c+"];"}).join("")),e("if(",B(h,function(c){return u+"["+c+"]!=="+w+"["+c+"]"}).join("||"),"){",m,"}")):(u=a.def(k,".",b),w=a.def(p,".",b),m(u,");",p,".",b,"=",u,";"),e("if(",u,"!==",w,"){",m,"}"));d(m)});return c.compile()}(),compile:function(e,d,l,a,h){var g=Q();g.stats=g.link(h);b(d["static"]).forEach(function(c){W(g,d,c)});w.forEach(function(c){W(g,e,c)});var k=va(e,d,l,a,g);sa(g,k);Fb(g,k);lb(g,k);return c(g.compile(),
{destroy:function(){k.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(f,t,x){function a(b,d){this.id=m++;this.type=b;this.data=d}function d(b){if(0===b.length)return[];var a=b.charAt(0),c=b.charAt(b.length-1);if(1<b.length&&a===c&&('"'===a||"'"===
a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return d(b.substr(0,a.index)).concat(d(a[1])).concat(d(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(c=0;c<a.length;++c)b=b.concat(d(a[c]));return b}function C(b){return"["+d(b).join("][")+"]"}function r(b,d){if("function"===typeof b)return new a(0,b);if("number"===typeof b||
"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(c,b){return r(c,d+"["+b+"]")}));if(b instanceof a)return b;q(!1,"invalid option type in uniform "+d)}var q=f("./util/check"),m=0;t.exports={DynamicVariable:a,define:function(b,d){return new a(b,C(d+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:r,accessor:C}},{"./util/check":21}],10:[function(f,t,x){var a=f("./util/check"),d=f("./util/is-typed-array"),C=f("./util/is-ndarray"),
r=f("./util/values"),q=f("./constants/primitives.json"),m=f("./constants/usage.json");t.exports=function(b,g,c,h){function B(c){this.id=p++;l[this.id]=this;this.buffer=c;this.primType=4;this.type=this.vertCount=0}function v(e,l,h,k,p,n,m){e.buffer.bind();var v;l?((v=m)||d(l)&&(!C(l)||d(l.data))||(v=g.oes_element_index_uint?5125:5123),c._initBuffer(e.buffer,l,h,v,3)):(b.bufferData(34963,n,h),e.buffer.dtype=v||5121,e.buffer.usage=h,e.buffer.dimension=3,e.buffer.byteLength=n);v=m;if(!m){switch(e.buffer.dtype){case 5121:case 5120:v=
5121;break;case 5123:case 5122:v=5123;break;case 5125:case 5124:v=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=v}e.type=v;a(5125!==v||!!g.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");l=p;0>l&&(l=e.buffer.byteLength,5123===v?l>>=1:5125===v&&(l>>=2));e.vertCount=l;l=k;0>k&&(l=4,k=e.buffer.dimension,1===k&&(l=0),2===k&&(l=1),3===k&&(l=4));e.primType=l}function e(c){h.elementsCount--;a(null!==c.buffer,"must not double destroy elements");
delete l[c.id];c.buffer.destroy();c.buffer=null}var l={},p=0,n={uint8:5121,uint16:5123};g.oes_element_index_uint&&(n.uint32=5125);B.prototype.bind=function(){this.buffer.bind()};var k=[];return{create:function(b,l){function g(c){if(c)if("number"===typeof c)k(c),p.primType=4,p.vertCount=c|0,p.type=5121;else{var e=null,b=35044,l=-1,h=-1,u=0,w=0;if(Array.isArray(c)||d(c)||C(c))e=c;else if(a.type(c,"object","invalid arguments for elements"),"data"in c&&(e=c.data,a(Array.isArray(e)||d(e)||C(e),"invalid data for element buffer")),
"usage"in c&&(a.parameter(c.usage,m,"invalid element buffer usage"),b=m[c.usage]),"primitive"in c&&(a.parameter(c.primitive,q,"invalid element buffer primitive"),l=q[c.primitive]),"count"in c&&(a("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),h=c.count|0),"type"in c&&(a.parameter(c.type,n,"invalid buffer type"),w=n[c.type]),"length"in c)u=c.length|0;else if(u=h,5123===w||5122===w)u*=2;else if(5125===w||5124===w)u*=4;v(p,e,b,l,h,u,w)}else k(),p.primType=4,p.vertCount=0,
p.type=5121;return g}var k=c.create(null,34963,!0),p=new B(k._buffer);h.elementsCount++;g(b);g._reglType="elements";g._elements=p;g.subdata=function(c,e){k.subdata(c,e);return g};g.destroy=function(){e(p)};return g},createStream:function(e){var b=k.pop();b||(b=new B(c.create(null,34963,!0,!1)._buffer));v(b,e,35040,-1,-1,0,0);return b},destroyStream:function(c){k.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof B?c._elements:null},clear:function(){r(l).forEach(e)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(f,t,x){var a=f("./util/sorted-object-keys"),d=f("./util/check");t.exports=function(C,r){function q(c){d.type(c,"string","extension name must be string");c=c.toLowerCase();var b;try{b=m[c]=C.getExtension(c)}catch(a){}return!!b}for(var m={},b=0;b<r.extensions.length;++b){var g=r.extensions[b];if(!q(g))return r.onDestroy(),r.onDone('"'+g+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}r.optionalExtensions.forEach(q);return{extensions:m,restore:function(){a(m).forEach(function(c){if(m[c]&&!q(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(f,t,x){var a=f("./util/check"),d=f("./util/values"),C=f("./util/extend"),r=[6407,6408],q=[];q[6408]=4;q[6407]=3;var m=[];m[5121]=1;m[5126]=4;m[36193]=2;var b=[32854,32855,36194,35907,34842,34843,34836],g={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};t.exports=function(c,h,B,v,e,l){function p(c,e,b){this.target=c;this.texture=e;this.renderbuffer=b;var d=c=0;e?(c=e.width,d=e.height):b&&(c=b.width,d=b.height);this.width=c;this.height=d}function n(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function k(c,e,b){if(c){if(c.texture){c=c.texture._texture;var d=Math.max(1,c.height);a(Math.max(1,c.width)===e&&d===b,"inconsistent width/height for supplied texture")}else c=
c.renderbuffer._renderbuffer,a(c.width===e&&c.height===b,"inconsistent width/height for renderbuffer");c.refCount+=1}}function u(e,b){b&&(b.texture?c.framebufferTexture2D(36160,e,b.target,b.texture._texture.texture,0):c.framebufferRenderbuffer(36160,e,36161,b.renderbuffer._renderbuffer.renderbuffer))}function w(c){var e=3553,b=null,d=null,l=c;"object"===typeof c&&(l=c.data,"target"in c&&(e=c.target|0));a.type(l,"function","invalid attachment data");c=l._reglType;"texture2d"===c?(b=l,a(3553===e)):
"textureCube"===c?(b=l,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===c?(d=l,e=36161):a.raise("invalid regl object for attachment");return new p(e,b,d)}function D(c,b,d,l,a){if(d)return c=v.create2D({width:c,height:b,format:l,type:a}),c._texture.refCount=0,new p(3553,c,null);c=e.create({width:c,height:b,format:l});c._renderbuffer.refCount=0;return new p(36161,null,c)}function f(c){return c&&(c.texture||c.renderbuffer)}function y(c,e,b){c&&(c.texture?c.texture.resize(e,b):c.renderbuffer&&
c.renderbuffer.resize(e,b),c.width=e,c.height=b)}function G(){this.id=E++;ea[this.id]=this;this.framebuffer=c.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function ob(c){c.colorAttachments.forEach(n);n(c.depthAttachment);n(c.stencilAttachment);n(c.depthStencilAttachment)}function I(e){var b=e.framebuffer;a(b,"must not double destroy framebuffer");c.deleteFramebuffer(b);e.framebuffer=null;l.framebufferCount--;
delete ea[e.id]}function t(e){var b;c.bindFramebuffer(36160,e.framebuffer);var d=e.colorAttachments;for(b=0;b<d.length;++b)u(36064+b,d[b]);for(b=d.length;b<B.maxColorAttachments;++b)c.framebufferTexture2D(36160,36064+b,3553,null,0);c.framebufferTexture2D(36160,33306,3553,null,0);c.framebufferTexture2D(36160,36096,3553,null,0);c.framebufferTexture2D(36160,36128,3553,null,0);u(36096,e.depthAttachment);u(36128,e.stencilAttachment);u(33306,e.depthStencilAttachment);e=c.checkFramebufferStatus(36160);c.isContextLost()||
36053===e||a.raise("framebuffer configuration not supported, status = "+g[e]);c.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;c.getError()}function H(c,e){function d(c,e){var l;a(A.next!==g,"can not update framebuffer which is currently in use");var p=0,n=0,u=!0,v=!0;l=null;var y=!0,C="rgba",E="uint8",z=1,G=null,I=null,H=null,ea=!1;if("number"===typeof c)p=c|0,n=e|0||p;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(n=c.shape,a(Array.isArray(n)&&
2<=n.length,"invalid shape for framebuffer"),p=n[0],n=n[1]):("radius"in c&&(p=n=c.radius),"width"in c&&(p=c.width),"height"in c&&(n=c.height));if("color"in c||"colors"in c)l=c.color||c.colors,Array.isArray(l)&&a(1===l.length||h.webgl_draw_buffers,"multiple render targets not supported");if(!l){"colorCount"in c&&(z=c.colorCount|0,a(0<z,"invalid color buffer count"));"colorTexture"in c&&(y=!!c.colorTexture,C="rgba4");if("colorType"in c){E=c.colorType;if(y)a(h.oes_texture_float||!("float"===E||"float32"===
E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(h.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===E||"float16"===E)a(h.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),C="rgba16f";else if("float"===E||"float32"===E)a(h.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
C="rgba32f";a.oneOf(E,F,"invalid color type")}"colorFormat"in c&&(C=c.colorFormat,0<=ka.indexOf(C)?y=!0:0<=J.indexOf(C)?y=!1:a.optional(function(){if(y)a.oneOf(c.colorFormat,ka,"invalid color format for texture");else a.oneOf(c.colorFormat,J,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)ea=!(!c.depthTexture&&!c.depthStencilTexture),a(!ea||h.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?u=c.depth:
(G=c.depth,v=!1));"stencil"in c&&("boolean"===typeof c.stencil?v=c.stencil:(I=c.stencil,u=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?u=v=c.depthStencil:(H=c.depthStencil,v=u=!1))}else p=n=1;var ba=null,ga=null,x=null,va=null;if(Array.isArray(l))ba=l.map(w);else if(l)ba=[w(l)];else for(ba=Array(z),l=0;l<z;++l)ba[l]=D(p,n,y,C,E);a(h.webgl_draw_buffers||1>=ba.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(ba.length<=B.maxColorAttachments,
"too many color attachments, not supported");p=p||ba[0].width;n=n||ba[0].height;G?ga=w(G):u&&!v&&(ga=D(p,n,ea,"depth","uint32"));I?x=w(I):v&&!u&&(x=D(p,n,!1,"stencil","uint8"));H?va=w(H):!G&&!I&&v&&u&&(va=D(p,n,ea,"depth stencil","depth stencil"));a(1>=!!G+!!I+!!H,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");u=null;for(l=0;l<ba.length;++l)k(ba[l],p,n),a(!ba[l]||ba[l].texture&&0<=r.indexOf(ba[l].texture._texture.format)||ba[l].renderbuffer&&0<=b.indexOf(ba[l].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+l+" is invalid"),ba[l]&&ba[l].texture&&(v=q[ba[l].texture._texture.format]*m[ba[l].texture._texture.type],null===u?u=v:a(u===v,"all color attachments much have the same number of bits per pixel."));k(ga,p,n);a(!ga||ga.texture&&6402===ga.texture._texture.format||ga.renderbuffer&&33189===ga.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");k(x,p,n);a(!x||x.renderbuffer&&36168===x.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
k(va,p,n);a(!va||va.texture&&34041===va.texture._texture.format||va.renderbuffer&&34041===va.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");ob(g);g.width=p;g.height=n;g.colorAttachments=ba;g.depthAttachment=ga;g.stencilAttachment=x;g.depthStencilAttachment=va;d.color=ba.map(f);d.depth=f(ga);d.stencil=f(x);d.depthStencil=f(va);d.width=g.width;d.height=g.height;t(g);return d}var g=new G;l.framebufferCount++;d(c,e);return C(d,{resize:function(c,e){a(A.next!==
g,"can not resize a framebuffer which is currently in use");var b=Math.max(c|0,1),l=Math.max(e|0||b,1);if(b===g.width&&l===g.height)return d;for(var h=g.colorAttachments,k=0;k<h.length;++k)y(h[k],b,l);y(g.depthAttachment,b,l);y(g.stencilAttachment,b,l);y(g.depthStencilAttachment,b,l);g.width=d.width=b;g.height=d.height=l;t(g);return d},_reglType:"framebuffer",_framebuffer:g,destroy:function(){I(g);ob(g)},use:function(c){A.setFBO({framebuffer:d},c)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},
ka=["rgba"],J=["rgba4","rgb565","rgb5 a1"];h.ext_srgb&&J.push("srgba");h.ext_color_buffer_half_float&&J.push("rgba16f","rgb16f");h.webgl_color_buffer_float&&J.push("rgba32f");var F=["uint8"];h.oes_texture_half_float&&F.push("half float","float16");h.oes_texture_float&&F.push("float","float32");var E=0,ea={};return C(A,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof G)?c:null},create:H,createCube:function(c){function e(c){var d;a(0>
b.indexOf(A.next),"can not update framebuffer which is currently in use");var l={color:null},g=0,k=null;d="rgba";var p="uint8",n=1;if("number"===typeof c)g=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(g=c.shape,a(Array.isArray(g)&&2<=g.length,"invalid shape for framebuffer"),a(g[0]===g[1],"cube framebuffer must be square"),g=g[0]):("radius"in c&&(g=c.radius|0),"width"in c?(g=c.width|0,"height"in c&&a(c.height===g,"must be square")):"height"in c&&(g=c.height|0));
if("color"in c||"colors"in c)k=c.color||c.colors,Array.isArray(k)&&a(1===k.length||h.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in c&&(n=c.colorCount|0,a(0<n,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,F,"invalid color type"),p=c.colorType),"colorFormat"in c&&(d=c.colorFormat,a.oneOf(c.colorFormat,ka,"invalid color format for texture")));"depth"in c&&(l.depth=c.depth);"stencil"in c&&(l.stencil=c.stencil);"depthStencil"in c&&(l.depthStencil=
c.depthStencil)}else g=1;if(k)if(Array.isArray(k))for(c=[],d=0;d<k.length;++d)c[d]=k[d];else c=[k];else for(c=Array(n),k={radius:g,format:d,type:p},d=0;d<n;++d)c[d]=v.createCube(k);l.color=Array(c.length);for(d=0;d<c.length;++d)n=c[d],a("function"===typeof n&&"textureCube"===n._reglType,"invalid cube map"),g=g||n.width,a(n.width===g&&n.height===g,"invalid cube map shape"),l.color[d]={target:34069,data:c[d]};for(d=0;6>d;++d){for(n=0;n<c.length;++n)l.color[n].target=34069+d;0<d&&(l.depth=b[0].depth,
l.stencil=b[0].stencil,l.depthStencil=b[0].depthStencil);if(b[d])b[d](l);else b[d]=H(l)}return C(e,{width:g,height:g,color:c})}var b=Array(6);e(c);return C(e,{faces:b,resize:function(c){var d=c|0;a(0<d&&d<=B.maxCubeMapSize,"invalid radius for cube fbo");if(d===e.width)return e;var l=e.color;for(c=0;c<l.length;++c)l[c].resize(d);for(c=0;6>c;++c)b[c].resize(d);e.width=e.height=d;return e},_reglType:"framebufferCube",destroy:function(){b.forEach(function(c){c.destroy()})}})},clear:function(){d(ea).forEach(I)},
restore:function(){A.cur=null;A.next=null;A.dirty=!0;d(ea).forEach(function(e){e.framebuffer=c.createFramebuffer();t(e)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(f,t,x){var a=f("./util/sorted-object-keys"),d=f("./util/pool");t.exports=function(C,r){var q=1;r.ext_texture_filter_anisotropic&&(q=C.getParameter(34047));var m=1,b=1;r.webgl_draw_buffers&&(m=C.getParameter(34852),b=C.getParameter(36063));var g=!!r.oes_texture_float;if(g){g=C.createTexture();C.bindTexture(3553,
g);C.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var c=C.createFramebuffer();C.bindFramebuffer(36160,c);C.framebufferTexture2D(36160,36064,3553,g,0);C.bindTexture(3553,null);if(36053!==C.checkFramebufferStatus(36160))g=!1;else{C.viewport(0,0,1,1);C.clearColor(1,0,0,1);C.clear(16384);var h=d.allocType(5126,4);C.readPixels(0,0,1,1,6408,5126,h);C.getError()?g=!1:(C.deleteFramebuffer(c),C.deleteTexture(g),g=1===h[0]);d.freeType(h)}}h=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(h=C.createTexture(),c=d.allocType(5121,36),C.activeTexture(33984),C.bindTexture(34067,h),C.texImage2D(34069,0,6408,3,3,0,6408,5121,c),d.freeType(c),C.bindTexture(34067,null),C.deleteTexture(h),h=!C.getError());return{colorBits:[C.getParameter(3410),C.getParameter(3411),C.getParameter(3412),C.getParameter(3413)],depthBits:C.getParameter(3414),stencilBits:C.getParameter(3415),subpixelBits:C.getParameter(3408),extensions:a(r).filter(function(c){return!!r[c]}),
maxAnisotropic:q,maxDrawbuffers:m,maxColorAttachments:b,pointSizeDims:C.getParameter(33901),lineWidthDims:C.getParameter(33902),maxViewportDims:C.getParameter(3386),maxCombinedTextureUnits:C.getParameter(35661),maxCubeMapSize:C.getParameter(34076),maxRenderbufferSize:C.getParameter(34024),maxTextureUnits:C.getParameter(34930),maxTextureSize:C.getParameter(3379),maxAttributes:C.getParameter(34921),maxVertexUniforms:C.getParameter(36347),maxVertexTextureUnits:C.getParameter(35660),maxVaryingVectors:C.getParameter(36348),
maxFragmentUniforms:C.getParameter(36349),glsl:C.getParameter(35724),renderer:C.getParameter(7937),vendor:C.getParameter(7936),version:C.getParameter(7938),readFloat:g,npotTextureCube:h}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(f,t,x){var a=f("./util/check"),d=f("./util/is-typed-array");t.exports=function(C,r,q,m,b,g,c){function h(h){var e;null===r.next?(a(b.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(a(null!==r.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=r.next.colorAttachments[0].texture._texture.type,a.optional(function(){g.oes_texture_float?(a(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&a(c.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var l=0,p=0,n=m.framebufferWidth,k=m.framebufferHeight,u=null;d(h)?u=h:h&&(a.type(h,"object","invalid arguments to regl.read()"),l=h.x|0,p=h.y|0,a(0<=l&&l<m.framebufferWidth,"invalid x offset for regl.read"),a(0<=p&&p<m.framebufferHeight,"invalid y offset for regl.read"),n=(h.width||m.framebufferWidth-l)|0,k=(h.height||m.framebufferHeight-p)|0,u=h.data||null);u&&(5121===e?a(u instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&a(u instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<n&&n+l<=m.framebufferWidth,"invalid width for read pixels");a(0<k&&k+p<=m.framebufferHeight,"invalid height for read pixels");q();h=n*k*4;u||(5121===e?u=new Uint8Array(h):5126===e&&(u=u||new Float32Array(h)));a.isTypedArray(u,"data buffer for regl.read() must be a typedarray");a(u.byteLength>=h,"data buffer for regl.read() too small");C.pixelStorei(3333,4);C.readPixels(l,p,n,k,6408,e,u);return u}function B(c){var e;
r.setFBO({framebuffer:c.framebuffer},function(){e=h(c)});return e}return function(c){return c&&"framebuffer"in c?B(c):h(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(f,t,x){var a=f("./util/sorted-object-keys"),d=f("./util/check"),C=f("./util/values"),r=[];r[32854]=2;r[32855]=2;r[36194]=2;r[33189]=2;r[36168]=1;r[34041]=4;r[35907]=4;r[34836]=16;r[34842]=8;r[34843]=6;t.exports=function(q,m,b,g,c){function h(e){this.id=l++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;c.profile&&(this.stats={size:0})}function B(c){var e=c.renderbuffer;d(e,"must not double destroy renderbuffer");q.bindRenderbuffer(36161,null);q.deleteRenderbuffer(e);c.renderbuffer=null;c.refCount=0;delete p[c.id];g.renderbufferCount--}var v={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};m.ext_srgb&&(v.srgba=35907);m.ext_color_buffer_half_float&&(v.rgba16f=34842,v.rgb16f=34843);m.webgl_color_buffer_float&&(v.rgba32f=34836);var e=[];a(v).forEach(function(c){e[v[c]]=
c});var l=0,p={};h.prototype.decRef=function(){0>=--this.refCount&&B(this)};c.profile&&(g.getTotalRenderbufferSize=function(){var c=0;a(p).forEach(function(e){c+=p[e].stats.size});return c});return{create:function(l,a){function u(l,a){var h=0,g=0,k=32854;"object"===typeof l&&l?("shape"in l?(g=l.shape,d(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),h=g[0]|0,g=g[1]|0):("radius"in l&&(h=g=l.radius|0),"width"in l&&(h=l.width|0),"height"in l&&(g=l.height|0)),"format"in l&&(d.parameter(l.format,
v,"invalid renderbuffer format"),k=v[l.format])):"number"===typeof l?(h=l|0,g="number"===typeof a?a|0:h):l?d.raise("invalid arguments to renderbuffer constructor"):h=g=1;d(0<h&&0<g&&h<=b.maxRenderbufferSize&&g<=b.maxRenderbufferSize,"invalid renderbuffer size");if(h!==w.width||g!==w.height||k!==w.format)return u.width=w.width=h,u.height=w.height=g,w.format=k,q.bindRenderbuffer(36161,w.renderbuffer),q.renderbufferStorage(36161,k,h,g),d(0===q.getError(),"invalid render buffer format"),c.profile&&(w.stats.size=
r[w.format]*w.width*w.height),u.format=e[w.format],u}var w=new h(q.createRenderbuffer());p[w.id]=w;g.renderbufferCount++;u(l,a);u.resize=function(e,l){var a=e|0,h=l|0||a;if(a===w.width&&h===w.height)return u;d(0<a&&0<h&&a<=b.maxRenderbufferSize&&h<=b.maxRenderbufferSize,"invalid renderbuffer size");u.width=w.width=a;u.height=w.height=h;q.bindRenderbuffer(36161,w.renderbuffer);q.renderbufferStorage(36161,w.format,a,h);d(0===q.getError(),"invalid render buffer format");c.profile&&(w.stats.size=r[w.format]*
w.width*w.height);return u};u._reglType="renderbuffer";u._renderbuffer=w;c.profile&&(u.stats=w.stats);u.destroy=function(){w.decRef()};return u},clear:function(){C(p).forEach(B)},restore:function(){C(p).forEach(function(c){c.renderbuffer=q.createRenderbuffer();q.bindRenderbuffer(36161,c.renderbuffer);q.renderbufferStorage(36161,c.format,c.width,c.height)});q.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(f,t,x){var a=f("./util/sorted-object-keys"),
d=f("./util/check"),C=f("./util/extend"),r=f("./util/values");t.exports=function(q,m,b,g){function c(c,e,b,d){this.name=c;this.id=e;this.location=b;this.info=d}function h(c,e){for(var b=0;b<c.length;++b)if(c[b].id===e.id){c[b].location=e.location;return}c.push(e)}function B(c,e,b){var a=35632===c?l:p,h=a[e];if(!h){var g=m.str(e),h=q.createShader(c);q.shaderSource(h,g);q.compileShader(h);d.shaderError(q,h,g,c,b);a[e]=h}return h}function v(c,e){this.id=u++;this.fragId=c;this.vertId=e;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;g.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(e,b,l){var a;a=B(35632,e.fragId);var k=B(35633,e.vertId),p=e.program=q.createProgram();q.attachShader(p,a);q.attachShader(p,k);if(l)for(a=0;a<l.length;++a)k=l[a],q.bindAttribLocation(p,k[0],k[1]);q.linkProgram(p);d.linkError(q,p,m.str(e.fragId),m.str(e.vertId),b);l=q.getProgramParameter(p,35718);g.profile&&(e.stats.uniformsCount=l);k=e.uniforms;for(a=0;a<l;++a)if(b=q.getActiveUniform(p,
a))if(1<b.size)for(var n=0;n<b.size;++n){var u=b.name.replace("[0]","["+n+"]");h(k,new c(u,m.id(u),q.getUniformLocation(p,u),b))}else h(k,new c(b.name,m.id(b.name),q.getUniformLocation(p,b.name),b));l=q.getProgramParameter(p,35721);g.profile&&(e.stats.attributesCount=l);e=e.attributes;for(a=0;a<l;++a)(b=q.getActiveAttrib(p,a))&&h(e,new c(b.name,m.id(b.name),q.getAttribLocation(p,b.name),b))}var l={},p={},n={},k=[],u=0;g.profile&&(b.getMaxUniformsCount=function(){var c=0;k.forEach(function(e){e.stats.uniformsCount>
c&&(c=e.stats.uniformsCount)});return c},b.getMaxAttributesCount=function(){var c=0;k.forEach(function(e){e.stats.attributesCount>c&&(c=e.stats.attributesCount)});return c});return{clear:function(){var c=q.deleteShader.bind(q);r(l).forEach(c);l={};r(p).forEach(c);p={};k.forEach(function(c){q.deleteProgram(c.program)});k.length=0;n={};b.shaderCount=0},program:function(c,h,g,u){d.command(0<=c,"missing vertex shader",g);d.command(0<=h,"missing fragment shader",g);var m=n[h];m||(m=n[h]={});var r=m[c];
if(r&&(r.refCount++,!u))return r;var B=new v(h,c);b.shaderCount++;e(B,g,u);r||(m[c]=B);k.push(B);return C(B,{destroy:function(){B.refCount--;if(0>=B.refCount){q.deleteProgram(B.program);var c=k.indexOf(B);k.splice(c,1);b.shaderCount--}0>=m[B.vertId].refCount&&(q.deleteShader(p[B.vertId]),delete p[B.vertId],delete n[B.fragId][B.vertId]);a(n[B.fragId]).length||(q.deleteShader(l[B.fragId]),delete l[B.fragId],delete n[B.fragId])}})},restore:function(){l={};p={};for(var c=0;c<k.length;++c)e(k[c],null,
k[c].attributes.map(function(c){return[c.location,c.name]}))},shader:B,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(f,t,x){t.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(f,t,x){t.exports=function(){var a={"":0},d=[""];return{id:function(C){var r=a[C];if(r)return r;r=a[C]=d.length;d.push(C);
return r},str:function(a){return d[a]}}}},{}],19:[function(f,t,x){function a(c){return"[object "+c+"]"}function d(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function C(c){return Array.isArray(c)&&0!==c.length&&n(c[0])?!0:!1}function r(c){return Object.prototype.toString.call(c)}function q(c){if(!c)return!1;var b=r(c);return 0<=ka.indexOf(b)?!0:d(c)||C(c)||e(c)}function m(c,e){36193===c.type?(c.data=p(e),l.freeType(e)):c.data=e}function b(c,e,b,d,l,a){c="undefined"!==typeof F[c]?
F[c]:y[c]*J[e];a&&(c*=6);if(l){for(d=0;1<=b;)d+=c*b*b,b/=2;return d}return c*b*d}var g=f("./util/sorted-object-keys"),c=f("./util/check"),h=f("./util/extend"),B=f("./util/values"),v=f("./util/is-typed-array"),e=f("./util/is-ndarray"),l=f("./util/pool"),p=f("./util/to-half-float"),n=f("./util/is-array-like"),k=f("./util/flatten"),u=f("./util/is-pow2");x=f("./constants/arraytypes.json");var w=f("./constants/arraytypes.json"),D=[9984,9986,9985,9987],Ea=[0,6409,6410,6407,6408],y={};y[6409]=y[6406]=y[6402]=
1;y[34041]=y[6410]=2;y[6407]=y[35904]=3;y[6408]=y[35906]=4;var G=a("HTMLCanvasElement"),ob=a("OffscreenCanvas"),I=a("CanvasRenderingContext2D"),S=a("ImageBitmap"),H=a("HTMLImageElement"),A=a("HTMLVideoElement"),ka=g(x).concat([G,ob,I,S,H,A]),J=[];J[5121]=1;J[5126]=4;J[36193]=2;J[5123]=2;J[5125]=4;var F=[];F[32854]=2;F[32855]=2;F[36194]=2;F[34041]=4;F[33776]=.5;F[33777]=.5;F[33778]=1;F[33779]=1;F[35986]=.5;F[35987]=1;F[34798]=1;F[35840]=.5;F[35841]=.25;F[35842]=.5;F[35843]=.25;F[36196]=.5;t.exports=
function(a,f,z,J,F,t,ka){function U(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function V(c,e){c.internalformat=e.internalformat;c.format=e.format;c.type=e.type;c.compressed=e.compressed;c.premultiplyAlpha=e.premultiplyAlpha;c.flipY=e.flipY;c.unpackAlignment=e.unpackAlignment;c.colorSpace=e.colorSpace;c.width=e.width;c.height=e.height;c.channels=e.channels}
function T(e,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(c.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(c.type(b.flipY,"boolean","invalid texture flip"),e.flipY=b.flipY);"alignment"in b&&(c.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=b.alignment);"colorSpace"in b&&(c.parameter(b.colorSpace,Ua,"invalid colorSpace"),e.colorSpace=Ua[b.colorSpace]);if("type"in b){var d=b.type;c(f.oes_texture_float||
!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");c(f.oes_texture_half_float||!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");c(f.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");c.parameter(d,ha,"invalid texture type");e.type=
ha[d]}var l=e.width,a=e.height,h=e.channels,d=!1;"shape"in b?(c(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),l=b.shape[0],a=b.shape[1],3===b.shape.length&&(h=b.shape[2],c(0<h&&4>=h,"invalid number of channels"),d=!0),c(0<=l&&l<=z.maxTextureSize,"invalid width"),c(0<=a&&a<=z.maxTextureSize,"invalid height")):("radius"in b&&(l=a=b.radius,c(0<=l&&l<=z.maxTextureSize,"invalid radius")),"width"in b&&(l=b.width,c(0<=l&&l<=z.maxTextureSize,"invalid width")),"height"in b&&(a=b.height,
c(0<=a&&a<=z.maxTextureSize,"invalid height")),"channels"in b&&(h=b.channels,c(0<h&&4>=h,"invalid number of channels"),d=!0));e.width=l|0;e.height=a|0;e.channels=h|0;l=!1;"format"in b&&(l=b.format,c(f.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(l,fa,"invalid texture format"),a=e.internalformat=fa[l],e.format=Fa[a],l in ha&&!("type"in b)&&(e.type=ha[l]),l in sa&&(e.compressed=!0),l=
!0);!d&&l?e.channels=y[e.format]:d&&!l?e.channels!==Ea[e.format]&&(e.format=e.internalformat=Ea[e.channels]):l&&d&&c(e.channels===y[e.format],"number of channels inconsistent with specified format")}}function P(c){a.pixelStorei(37440,c.flipY);a.pixelStorei(37441,c.premultiplyAlpha);a.pixelStorei(37443,c.colorSpace);a.pixelStorei(3317,c.unpackAlignment)}function N(){U.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function O(b,a){var h=null;
q(a)?h=a:a&&(c.type(a,"object","invalid pixel data type"),T(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),q(a.data)&&(h=a.data));c(!b.compressed||h instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){c(!h,"can not specify copy and data field for the same texture");var g=F.viewportWidth,u=F.viewportHeight;b.width=b.width||g-b.xOffset;b.height=b.height||u-b.yOffset;b.needsCopy=!0;c(0<=b.xOffset&&b.xOffset<g&&0<=b.yOffset&&b.yOffset<u&&0<b.width&&b.width<=
g&&0<b.height&&b.height<=u,"copy texture read out of bounds")}else if(!h)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(v(h))b.channels=b.channels||4,b.data=h,"type"in a||5121!==b.type||(b.type=w[Object.prototype.toString.call(h)]|0);else if(d(h)){b.channels=b.channels||4;g=h;u=g.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:u=l.allocType(b.type,u);u.set(g);b.data=u;break;case 36193:b.data=p(g);break;default:c.raise("unsupported texture type, must specify a typed array")}b.alignment=
1;b.needsFree=!0}else if(e(h)){g=h.data;Array.isArray(g)||5121!==b.type||(b.type=w[Object.prototype.toString.call(g)]|0);var u=h.shape,B=h.stride,y,D,f,E;3===u.length?(f=u[2],E=B[2]):(c(2===u.length,"invalid ndarray pixel data, must be 2 or 3D"),E=f=1);y=u[0];D=u[1];u=B[0];B=B[1];b.alignment=1;b.width=y;b.height=D;b.channels=f;b.format=b.internalformat=Ea[f];b.needsFree=!0;y=E;h=h.offset;f=b.width;E=b.height;D=b.channels;for(var ha=l.allocType(36193===b.type?5126:b.type,f*E*D),K=0,O=0;O<E;++O)for(var fa=
0;fa<f;++fa)for(var W=0;W<D;++W)ha[K++]=g[u*fa+B*O+y*W+h];m(b,ha)}else if(r(h)===G||r(h)===ob||r(h)===I)r(h)===G||r(h)===ob?b.element=h:b.element=h.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(r(h)===S)b.element=h,b.width=h.width,b.height=h.height,b.channels=4;else if(r(h)===H)b.element=h,b.width=h.naturalWidth,b.height=h.naturalHeight,b.channels=4;else if(r(h)===A)b.element=h,b.width=h.videoWidth,b.height=h.videoHeight,b.channels=4;else if(C(h)){g=b.width||h[0].length;
u=b.height||h.length;B=b.channels;B=n(h[0][0])?B||h[0][0].length:B||1;y=k.shape(h);f=1;for(E=0;E<y.length;++E)f*=y[E];f=l.allocType(36193===b.type?5126:b.type,f);k.flatten(h,y,"",f);m(b,f);b.alignment=1;b.width=g;b.height=u;b.channels=B;b.format=b.internalformat=Ea[B];b.needsFree=!0}5126===b.type?c(0<=z.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===b.type&&c(0<=z.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function Q(c,e,b,d,l){var h=c.element,g=c.data,k=c.internalformat,p=c.format,n=c.type,u=c.width,m=c.height;P(c);h?a.texSubImage2D(e,l,b,d,p,n,h):c.compressed?a.compressedTexSubImage2D(e,l,b,d,k,u,m,g):c.needsCopy?(J(),a.copyTexSubImage2D(e,l,b,d,c.xOffset,c.yOffset,u,m)):a.texSubImage2D(e,l,b,d,u,m,p,n,g)}function R(){return qa.pop()||new N}function ra(c){c.needsFree&&l.freeType(c.data);N.call(c);qa.push(c)}function x(){U.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function K(c,e,b){var d=c.images[0]=R();c.mipmask=1;d.width=c.width=e;d.height=c.height=b;d.channels=c.channels=4}function L(e,b){var d=null;if(q(b))d=e.images[0]=R(),V(d,e),O(d,b),e.mipmask=1;else if(T(e,b),Array.isArray(b.mipmap))for(var l=b.mipmap,a=0;a<l.length;++a)d=e.images[a]=R(),V(d,e),d.width>>=a,d.height>>=a,O(d,l[a]),e.mipmask|=1<<a;else d=e.images[0]=R(),V(d,e),O(d,b),e.mipmask=1;V(e,e.images[0]);!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==e.internalformat&&
33779!==e.internalformat||c(0===e.width%4&&0===e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(c,e){for(var b=c.images,d=0;d<b.length&&b[d];++d){var l=b[d],h=e,g=d,k=l.element,p=l.data,n=l.internalformat,u=l.format,m=l.type,w=l.width,v=l.height;P(l);k?a.texImage2D(h,g,u,u,m,k):l.compressed?a.compressedTexImage2D(h,g,n,w,v,0,p):l.needsCopy?(J(),a.copyTexImage2D(h,g,u,l.xOffset,l.yOffset,w,v,0)):a.texImage2D(h,g,u,w,v,0,u,
m,p||null)}}function X(){var c=ya.pop()||new x;U.call(c);for(var e=c.mipmask=0;16>e;++e)c.images[e]=null;return c}function ma(c){for(var e=c.images,b=0;b<e.length;++b)e[b]&&ra(e[b]),e[b]=null;ya.push(c)}function ga(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ba(e,b){if("min"in b){var d=b.min;c.parameter(d,Xb);e.minFilter=Xb[d];0<=D.indexOf(e.minFilter)&&!("faces"in b)&&(e.genMipmaps=!0)}"mag"in b&&(d=b.mag,c.parameter(d,
za),e.magFilter=za[d]);var d=e.wrapS,l=e.wrapT;if("wrap"in b){var a=b.wrap;"string"===typeof a?(c.parameter(a,Pa),d=l=Pa[a]):Array.isArray(a)&&(c.parameter(a[0],Pa),c.parameter(a[1],Pa),d=Pa[a[0]],l=Pa[a[1]])}else"wrapS"in b&&(d=b.wrapS,c.parameter(d,Pa),d=Pa[d]),"wrapT"in b&&(l=b.wrapT,c.parameter(l,Pa),l=Pa[l]);e.wrapS=d;e.wrapT=l;"anisotropic"in b&&(d=b.anisotropic,c("number"===typeof d&&1<=d&&d<=z.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=b.anisotropic);if("mipmap"in
b){d=!1;switch(typeof b.mipmap){case "string":c.parameter(b.mipmap,Aa,"invalid mipmap hint");e.mipmapHint=Aa[b.mipmap];d=e.genMipmaps=!0;break;case "boolean":d=e.genMipmaps=b.mipmap;break;case "object":c(Array.isArray(b.mipmap),"invalid mipmap type");e.genMipmaps=!1;d=!0;break;default:c.raise("invalid mipmap type")}!d||"min"in b||(e.minFilter=9984)}}function va(c,e){a.texParameteri(e,10241,c.minFilter);a.texParameteri(e,10240,c.magFilter);a.texParameteri(e,10242,c.wrapS);a.texParameteri(e,10243,c.wrapT);
f.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(e))}function ca(c){U.call(this);this.mipmask=0;this.internalformat=6408;this.id=wa++;this.refCount=1;this.target=c;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ga;ka.profile&&(this.stats={size:0})}function Da(c){a.activeTexture(33984);a.bindTexture(c.target,c.texture)}function ja(){var c=ta[0];c?a.bindTexture(c.target,c.texture):a.bindTexture(3553,
null)}function na(e){var b=e.texture;c(b,"must not double destroy texture");var d=e.unit,l=e.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(l,null),ta[d]=null);a.deleteTexture(b);e.texture=null;e.params=null;e.pixels=null;e.refCount=0;delete ia[e.id];t.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Pa={repeat:10497,clamp:33071,mirror:33648},za={nearest:9728,linear:9729},Xb=h({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,
"linear mipmap linear":9987},za),Ua={none:0,browser:37444},ha={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},fa={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sa={};f.ext_srgb&&(fa.srgb=35904,fa.srgba=35906);f.oes_texture_float&&(ha.float32=ha["float"]=5126);f.oes_texture_half_float&&(ha.float16=ha["half float"]=36193);f.webgl_depth_texture&&(h(fa,{depth:6402,"depth stencil":34041}),h(ha,{uint16:5123,uint32:5125,"depth stencil":34042}));
f.webgl_compressed_texture_s3tc&&h(sa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});f.webgl_compressed_texture_atc&&h(sa,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});f.webgl_compressed_texture_pvrtc&&h(sa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});f.webgl_compressed_texture_etc1&&(sa["rgb etc1"]=36196);var ua=Array.prototype.slice.call(a.getParameter(34467));
g(sa).forEach(function(c){var e=sa[c];0<=ua.indexOf(e)&&(fa[c]=e)});var Ca=g(fa);z.textureFormats=Ca;var lb=[];g(fa).forEach(function(c){lb[fa[c]]=c});var Fb=[];g(ha).forEach(function(c){Fb[ha[c]]=c});var aa=[];g(za).forEach(function(c){aa[za[c]]=c});var W=[];g(Xb).forEach(function(c){W[Xb[c]]=c});var xa=[];g(Pa).forEach(function(c){xa[Pa[c]]=c});var Fa=Ca.reduce(function(c,e){var b=fa[e];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||f.ext_srgb&&(35904===b||35906===b)?c[b]=b:32855===
b||0<=e.indexOf("rgba")?c[b]=6408:c[b]=6407;return c},{}),qa=[],ya=[],wa=0,ia={},Y=z.maxTextureUnits,ta=Array(Y).map(function(){return null});h(ca.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var b=0;b<Y;++b){var d=ta[b];if(d){if(0<d.bindCount)continue;d.unit=-1}ta[b]=this;e=b;break}e>=Y&&c.raise("insufficient number of texture units");ka.profile&&t.maxTextureUnits<e+1&&(t.maxTextureUnits=e+1);this.unit=e;a.activeTexture(33984+e);a.bindTexture(this.target,this.texture)}return e},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&na(this)}});ka.profile&&(t.getTotalTextureSize=function(){var c=0;g(ia).forEach(function(e){c+=ia[e].stats.size});return c});return{create2D:function(e,d){function l(e,d){var a=h.texInfo;ga.call(a);var g=X();"number"===typeof e?"number"===typeof d?K(g,e|0,d|0):K(g,e|0,e|0):e?(c.type(e,"object","invalid arguments to regl.texture"),Ba(a,e),L(g,e)):K(g,1,1);a.genMipmaps&&(g.mipmask=(g.width<<1)-1);h.mipmask=g.mipmask;V(h,g);c.texture2D(a,
g,z);h.internalformat=g.internalformat;l.width=g.width;l.height=g.height;Da(h);da(g,3553);va(a,3553);ja();ma(g);ka.profile&&(h.stats.size=b(h.internalformat,h.type,g.width,g.height,a.genMipmaps,!1));l.format=lb[h.internalformat];l.type=Fb[h.type];l.mag=aa[a.magFilter];l.min=W[a.minFilter];l.wrapS=xa[a.wrapS];l.wrapT=xa[a.wrapT];return l}var h=new ca(3553);ia[h.id]=h;t.textureCount++;l(e,d);l.subimage=function(e,b,d,a){c(!!e,"must specify image data");b|=0;d|=0;a|=0;var g=R();V(g,h);g.width=0;g.height=
0;O(g,e);g.width=g.width||(h.width>>a)-b;g.height=g.height||(h.height>>a)-d;c(h.type===g.type&&h.format===g.format&&h.internalformat===g.internalformat,"incompatible format for texture.subimage");c(0<=b&&0<=d&&b+g.width<=h.width&&d+g.height<=h.height,"texture.subimage write out of bounds");c(h.mipmask&1<<a,"missing mipmap data");c(g.data||g.element||g.needsCopy,"missing image data");Da(h);Q(g,3553,b,d,a);ja();ra(g);return l};l.resize=function(c,e){var d=c|0,g=e|0||d;if(d===h.width&&g===h.height)return l;
l.width=h.width=d;l.height=h.height=g;Da(h);for(var k=0;h.mipmask>>k;++k){var p=d>>k,n=g>>k;if(!p||!n)break;a.texImage2D(3553,k,h.format,p,n,0,h.format,h.type,null)}ja();ka.profile&&(h.stats.size=b(h.internalformat,h.type,d,g,!1,!1));return l};l._reglType="texture2d";l._texture=h;ka.profile&&(l.stats=h.stats);l.destroy=function(){h.decRef()};return l},createCube:function(e,d,l,h,g,k){function p(e,d,l,a,h,g){var k,w=n.texInfo;ga.call(w);for(k=0;6>k;++k)m[k]=X();if("number"!==typeof e&&e)if("object"===
typeof e)if(d)L(m[0],e),L(m[1],d),L(m[2],l),L(m[3],a),L(m[4],h),L(m[5],g);else if(Ba(w,e),T(n,e),"faces"in e)for(e=e.faces,c(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),k=0;6>k;++k)c("object"===typeof e[k]&&!!e[k],"invalid input for cube map face"),V(m[k],n),L(m[k],e[k]);else for(k=0;6>k;++k)L(m[k],e);else c.raise("invalid arguments to cube map");else for(e=e|0||1,k=0;6>k;++k)K(m[k],e,e);V(n,m[0]);c.optional(function(){z.npotTextureCube||c(u(n.width)&&u(n.height),"your browser does not support non power or two texture dimensions")});
n.mipmask=w.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;c.textureCube(n,w,m,z);n.internalformat=m[0].internalformat;p.width=m[0].width;p.height=m[0].height;Da(n);for(k=0;6>k;++k)da(m[k],34069+k);va(w,34067);ja();ka.profile&&(n.stats.size=b(n.internalformat,n.type,p.width,p.height,w.genMipmaps,!0));p.format=lb[n.internalformat];p.type=Fb[n.type];p.mag=aa[w.magFilter];p.min=W[w.minFilter];p.wrapS=xa[w.wrapS];p.wrapT=xa[w.wrapT];for(k=0;6>k;++k)ma(m[k]);return p}var n=new ca(34067);ia[n.id]=n;t.cubeCount++;
var m=Array(6);p(e,d,l,h,g,k);p.subimage=function(e,b,d,l,a){c(!!b,"must specify image data");c("number"===typeof e&&e===(e|0)&&0<=e&&6>e,"invalid face");d|=0;l|=0;a|=0;var h=R();V(h,n);h.width=0;h.height=0;O(h,b);h.width=h.width||(n.width>>a)-d;h.height=h.height||(n.height>>a)-l;c(n.type===h.type&&n.format===h.format&&n.internalformat===h.internalformat,"incompatible format for texture.subimage");c(0<=d&&0<=l&&d+h.width<=n.width&&l+h.height<=n.height,"texture.subimage write out of bounds");c(n.mipmask&
1<<a,"missing mipmap data");c(h.data||h.element||h.needsCopy,"missing image data");Da(n);Q(h,34069+e,d,l,a);ja();ra(h);return p};p.resize=function(c){c|=0;if(c!==n.width){p.width=n.width=c;p.height=n.height=c;Da(n);for(var e=0;6>e;++e)for(var d=0;n.mipmask>>d;++d)a.texImage2D(34069+e,d,n.format,c>>d,c>>d,0,n.format,n.type,null);ja();ka.profile&&(n.stats.size=b(n.internalformat,n.type,p.width,p.height,!1,!0));return p}};p._reglType="textureCube";p._texture=n;ka.profile&&(p.stats=n.stats);p.destroy=
function(){n.decRef()};return p},clear:function(){for(var c=0;c<Y;++c)a.activeTexture(33984+c),a.bindTexture(3553,null),ta[c]=null;B(ia).forEach(na);t.cubeCount=0;t.textureCount=0},getTexture:function(c){return null},restore:function(){for(var c=0;c<Y;++c){var e=ta[c];e&&(e.bindCount=0,e.unit=-1,ta[c]=null)}B(ia).forEach(function(c){c.texture=a.createTexture();a.bindTexture(c.target,c.texture);for(var e=0;32>e;++e)if(0!==(c.mipmask&1<<e))if(3553===c.target)a.texImage2D(3553,e,c.internalformat,c.width>>
e,c.height>>e,0,c.internalformat,c.type,null);else for(var b=0;6>b;++b)a.texImage2D(34069+b,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);va(c.texInfo,c.target)})},refresh:function(){for(var c=0;c<Y;++c){var e=ta[c];e&&(e.bindCount=0,e.unit=-1,ta[c]=null);a.activeTexture(33984+c);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(f,t,x){t.exports=function(a,d){function C(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function r(c,d,e){var l=b.pop()||new C;l.startQueryIndex=c;l.endQueryIndex=d;l.sum=0;l.stats=e;g.push(l)}if(!d.ext_disjoint_timer_query)return null;var q=[],m=[],b=[],g=[],c=[],h=[];return{beginQuery:function(c){var b=q.pop()||d.ext_disjoint_timer_query.createQueryEXT();
d.ext_disjoint_timer_query.beginQueryEXT(35007,b);m.push(b);r(m.length-1,m.length,c)},endQuery:function(){d.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:r,update:function(){var a,v;a=m.length;if(0!==a){h.length=Math.max(h.length,a+1);c.length=Math.max(c.length,a+1);c[0]=0;var e=h[0]=0;for(v=a=0;v<m.length;++v){var l=m[v];d.ext_disjoint_timer_query.getQueryObjectEXT(l,34919)?(e+=d.ext_disjoint_timer_query.getQueryObjectEXT(l,34918),q.push(l)):m[a++]=l;c[v+1]=e;h[v+1]=a}m.length=a;for(v=
a=0;v<g.length;++v){var e=g[v],p=e.startQueryIndex,l=e.endQueryIndex;e.sum+=c[l]-c[p];p=h[p];l=h[l];l===p?(e.stats.gpuTime+=e.sum/1E6,b.push(e)):(e.startQueryIndex=p,e.endQueryIndex=l,g[a++]=e)}g.length=a}},getNumPendingQueries:function(){return m.length},clear:function(){q.push.apply(q,m);for(var c=0;c<q.length;c++)d.ext_disjoint_timer_query.deleteQueryEXT(q[c]);m.length=0;q.length=0},restore:function(){m.length=0;q.length=0}}}},{}],21:[function(f,t,x){function a(c){return"undefined"!==typeof atob?
atob(c):"base64:"+c}function d(c){c=Error("(regl) "+c);console.error(c);throw c;}function C(c,e){c||d(e)}function r(c){return c?": "+c:""}function q(c,e){switch(e){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function m(c,e,b){0>e.indexOf(c)&&d("invalid value"+
r(b)+". must be one of: "+e)}function b(c,e){for(c+="";c.length<e;)c=" "+c;return c}function g(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function c(c,e){this.number=c;this.line=e;this.errors=[]}function h(c,e,b){this.file=c;this.line=e;this.message=b}function B(){var c=Error(),c=(c.stack||c).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return e?e[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function v(){var c=Error(),c=(c.stack||c).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);return e?e[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function e(e,b){var d=e.split("\n"),l=1,h=0,k={unknown:new g,0:new g};k.unknown.name=k[0].name=b||B();k.unknown.lines.push(new c(0,""));for(var p=0;p<d.length;++p){var n=d[p],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(n);if(u)switch(u[1]){case "line":if(u=/(\d+)(\s+\d+)?/.exec(u[2]))l=u[1]|0,u[2]&&(h=u[2]|0,h in k||(k[h]=new g));break;case "define":if(u=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]))k[h].name=
u[1]?a(u[2]):u[2]}k[h].lines.push(new c(l++,n))}D(k).forEach(function(c){var e=k[c];e.lines.forEach(function(c){e.index[c.number]=c})});return k}function l(c){var e=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var b=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);b?e.push(new h(b[1]|0,b[2]|0,b[3].trim())):0<c.length&&e.push(new h("unknown",0,c))}});return e}function p(c,e){e.forEach(function(e){var b=c[e.file];if(b){var d=b.index[e.line];if(d){d.errors.push(e);b.hasErrors=!0;return}}c.unknown.hasErrors=
!0;c.unknown.lines[0].errors.push(e)})}function n(c){c._commandRef=B()}function k(c,e){var b=v();d(c+" in command "+(e||B())+("unknown"===b?"":" called from "+b))}function u(c,e,b,d){q(c,e)||k("invalid parameter type"+r(b)+". expected "+e+", got "+typeof c,d||B())}function w(c,e){return 32820===c||32819===c||33635===c?2:34042===c?4:G[c]*e}var D=f("./sorted-object-keys"),Ea=f("./is-typed-array");f=f("./extend");var y="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
G={};G[5120]=G[5121]=1;G[5122]=G[5123]=G[36193]=G[33635]=G[32819]=G[32820]=2;G[5124]=G[5125]=G[5126]=G[34042]=4;t.exports=f(C,{optional:function(c){c()},raise:d,commandRaise:k,command:function(c,e,b){c||k(e,b||B())},parameter:function(c,e,b){c in e||d("unknown parameter ("+c+")"+r(b)+". possible values: "+D(e).join())},commandParameter:function(c,e,b,d){c in e||k("unknown parameter ("+c+")"+r(b)+". possible values: "+D(e).join(),d||B())},constructor:function(c){D(c).forEach(function(c){0>y.indexOf(c)&&
d('invalid regl constructor argument "'+c+'". must be one of '+y)})},type:function(c,e,b){q(c,e)||d("invalid parameter type"+r(b)+". expected "+e+", got "+typeof c)},commandType:u,isTypedArray:function(c,e){Ea(c)||d("invalid parameter type"+r(e)+". must be a typed array")},nni:function(c,e){0<=c&&(c|0)===c||d("invalid parameter type, ("+c+")"+r(e)+". must be a nonnegative integer")},oneOf:m,shaderError:function(c,d,a,h,g){if(!c.getShaderParameter(d,c.COMPILE_STATUS)){d=c.getShaderInfoLog(d);c=h===
c.FRAGMENT_SHADER?"fragment":"vertex";u(a,"string",c+" shader source must be a string",g);var k=e(a,g);a=l(d);p(k,a);D(k).forEach(function(c){function e(c,b){l.push(c);a.push(b||"")}var d=k[c];if(d.hasErrors){var l=[""],a=[""];e("file number "+c+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(c){if(0<c.errors.length){e(b(c.number,4)+"|  ","background-color:yellow; font-weight:bold");e(c.line+"\n","color:red; background-color:yellow; font-weight:bold");
var d=0;c.errors.forEach(function(l){l=l.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(l);if(a){var h=a[1];l=a[2];switch(h){case "assign":h="="}d=Math.max(c.line.indexOf(h,d),0)}else d=0;e(b("| ",6));e(b("^^^",d+3)+"\n","font-weight:bold");e(b("| ",6));e(l+"\n","font-weight:bold")});e(b("| ",6)+"\n")}else e(b(c.number,4)+"|  "),e(c.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(l.join("")):(a[0]=l.join("%c"),console.log.apply(console,a))}});C.raise("Error compiling "+
c+" shader, "+k[0].name)}},linkError:function(c,b,d,l,a){c.getProgramParameter(b,c.LINK_STATUS)||(c=c.getProgramInfoLog(b),d=e(d,a),l='Error linking program with vertex shader, "'+e(l,a)[0].name+'", and fragment shader "'+d[0].name+'"',"undefined"!==typeof document?console.log("%c"+l+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+"\n"+c),C.raise(l))},callSite:v,saveCommandRef:n,saveDrawInfo:function(c,e,b,d){function l(c){return c?d.id(c):0}function a(c,
e){D(e).forEach(function(e){c[d.id(e)]=!0})}n(c);c._fragId=l(c["static"].frag);c._vertId=l(c["static"].vert);var h=c._uniformSet={};a(h,e["static"]);a(h,e.dynamic);e=c._attributeSet={};a(e,b["static"]);a(e,b.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,e,b){c.texture?m(c.texture._texture.internalformat,e,"unsupported texture format for attachment"):m(c.renderbuffer._renderbuffer.format,b,"unsupported renderbuffer format for attachment")},
guessCommand:B,texture2D:function(c,e,b){var d=e.width,l=e.height,a=e.channels;C(0<d&&d<=b.maxTextureSize&&0<l&&l<=b.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||C(!(d&d-1)&&!!d&&!(l&l-1)&&!!l,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==d&&1!==l&&C(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(C(!(d&d-1)&&!!d&&!(l&l-1)&&!!l,"texture must be a square power of 2 to support mipmapping"),
C(e.mipmask===(d<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>b.extensions.indexOf("oes_texture_float_linear")&&C(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),C(!c.genMipmaps,"mipmap generation not supported with float textures"));var h=e.images;for(b=0;16>b;++b)if(h[b]){var g=d>>b,k=l>>b;C(e.mipmask&1<<b,"missing mipmap data");var p=h[b];C(p.width===g&&p.height===k,"invalid shape for mip images");C(p.format===e.format&&p.internalformat===
e.internalformat&&p.type===e.type,"incompatible type for mip image");!p.compressed&&p.data&&(g=Math.ceil(w(p.type,a)*g/p.unpackAlignment)*p.unpackAlignment,C(p.data.byteLength===g*k,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||C(0===(e.mipmask&1<<b),"extra mipmap data");e.compressed&&C(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,e,b,d){var l=c.width,a=c.height,h=c.channels;C(0<l&&l<=d.maxTextureSize&&
0<a&&a<=d.maxTextureSize,"invalid texture shape");C(l===a,"cube map must be square");C(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(d=0;d<b.length;++d){var g=b[d];C(g.width===l&&g.height===a,"inconsistent cube map face shape");e.genMipmaps&&(C(!g.compressed,"can not generate mipmap for compressed textures"),C(1===g.mipmask,"can not specify mipmaps and generate mipmaps"));for(var k=g.images,p=0;16>p;++p){var n=k[p];if(n){var u=l>>p,m=a>>p;C(g.mipmask&1<<p,"missing mipmap data");
C(n.width===u&&n.height===m,"invalid shape for mip images");C(n.format===c.format&&n.internalformat===c.internalformat&&n.type===c.type,"incompatible type for mip image");n.compressed||n.data&&C(n.data.byteLength===u*m*Math.max(w(n.type,h),n.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(f,t,x){t.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(f,t,x){function a(d){return Array.prototype.slice.call(d)}function d(d){return a(d).join("")}var C=f("./extend"),r=f("./compiled-fns");t.exports=function(){function q(){var c=[],e=[];return C(function(){c.push.apply(c,a(arguments))},{def:function(){var b="v"+g;g++;e.push(b);0<arguments.length&&(c.push(b,"="),c.push.apply(c,a(arguments)),c.push(";"));return b},toString:function(){return d([0<e.length?"var "+e.join(",")+";":"",d(c)])}})}function m(){function c(d,
a){b(d,a,"=",e.def(d,a),";")}var e=q(),b=q(),d=e.toString,h=b.toString;return C(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:b,save:c,set:function(b,d,l){c(b,d);e(b,d,"=",l,";")},toString:function(){return d()+h()}})}var b=0,g=0,c={},h=q(),B={};return{global:h,link:function(d){var e="$"+b,l=!1;"object"===typeof d&&d.name&&(e=d.name.replace(/ /g,"_"),l=!0);if(e in c)return e;c[e]=d;l||b++;return e},block:q,proc:function(c,e){function b(){var c="a"+a.length;a.push(c);return c}var a=[];
e=e||0;for(var h=0;h<e;++h)b();var h=m(),g=h.toString;return B[c]=C(h,{arg:b,toString:function(){return d(["function(",a.join(),"){",g(),"}"])}})},scope:m,cond:function(){var c=d(arguments),e=m(),b=m(),h=e.toString,g=b.toString;return C(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){b.apply(b,a(arguments));return this},toString:function(){var e=g();e&&(e="else{"+e+"}");return d(["if(",c,"){",h(),"}",e])}})},compile:function(){var b=[],e=[];Object.keys(c).sort(function(c,
e){var b="$"===c.charAt(0),d="$"===e.charAt(0);return b||d?b&&d?+c.slice(1)<+e.slice(1)?-1:1:b&&!d?-1:1:c.localeCompare(e)}).forEach(function(d){var l=c[d];b.push(d);e.push(l)});for(var l=0,a=b.length-1;-1<a;a--)if("$"===b[a].charAt(0)){l=a;break}var g=['"use strict";',h,"return {"];Object.keys(B).forEach(function(c){g.push('"',c,'":',B[c].toString(),",")});g.push("}");var a=d(g).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),l=b.slice(l).join(),k=r[l];if(!k)throw console.log("src code is:"),
console.log(a),console.log("compiled values:",e),console.log("linked names:",b),console.log("Keys available:",Object.keys(r)),console.log("Key:",l),console.log('"'+l+'": function('+b.join(", ")+") \n{\n"+a+"\n},"),Error("missing precompiled function with key: "+l);return k.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(f,t,x){t.exports={$0:function(a){var d,C,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,f,y,G,t,I,S,H,A,ka,J,F;d=a.attributes;C=a.current;r=a.framebuffer;q=a.gl;m=a.next;b=
a.vao;g=m.blend_color;c=C.blend_color;h=m.blend_equation;B=C.blend_equation;v=m.blend_func;e=C.blend_func;l=m.colorMask;p=C.colorMask;n=m.depth_range;k=C.depth_range;u=m.polygonOffset_offset;w=C.polygonOffset_offset;D=m.sample_coverage;f=C.sample_coverage;y=m.scissor_box;G=C.scissor_box;t=m.stencil_func;I=C.stencil_func;S=m.stencil_opBack;H=C.stencil_opBack;A=m.stencil_opFront;ka=C.stencil_opFront;J=m.viewport;F=C.viewport;return{poll:function(){var b,d,a,x,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,
ma;C.dirty=!1;d=m.blend_enable;a=m.cull_enable;x=m.depth_enable;M=m.dither;la=m.polygonOffset_enable;oa=m.sample_alpha;U=m.sample_enable;V=m.scissor_enable;T=m.stencil_enable;P=m.cull_face;N=C.cull_face;O=m.depth_func;Q=C.depth_func;R=m.depth_mask;ra=C.depth_mask;pa=m.frontFace;K=C.frontFace;L=m.lineWidth;da=C.lineWidth;X=m.stencil_mask;ma=C.stencil_mask;b=r.next;b!==r.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),r.cur=b);d!==C.blend_enable&&(d?q.enable(3042):q.disable(3042),
C.blend_enable=d);a!==C.cull_enable&&(a?q.enable(2884):q.disable(2884),C.cull_enable=a);x!==C.depth_enable&&(x?q.enable(2929):q.disable(2929),C.depth_enable=x);M!==C.dither&&(M?q.enable(3024):q.disable(3024),C.dither=M);la!==C.polygonOffset_enable&&(la?q.enable(32823):q.disable(32823),C.polygonOffset_enable=la);oa!==C.sample_alpha&&(oa?q.enable(32926):q.disable(32926),C.sample_alpha=oa);U!==C.sample_enable&&(U?q.enable(32928):q.disable(32928),C.sample_enable=U);V!==C.scissor_enable&&(V?q.enable(3089):
q.disable(3089),C.scissor_enable=V);T!==C.stencil_enable&&(T?q.enable(2960):q.disable(2960),C.stencil_enable=T);if(g[0]!==c[0]||g[1]!==c[1]||g[2]!==c[2]||g[3]!==c[3])q.blendColor(g[0],g[1],g[2],g[3]),c[0]=g[0],c[1]=g[1],c[2]=g[2],c[3]=g[3];if(h[0]!==B[0]||h[1]!==B[1])q.blendEquationSeparate(h[0],h[1]),B[0]=h[0],B[1]=h[1];if(v[0]!==e[0]||v[1]!==e[1]||v[2]!==e[2]||v[3]!==e[3])q.blendFuncSeparate(v[0],v[1],v[2],v[3]),e[0]=v[0],e[1]=v[1],e[2]=v[2],e[3]=v[3];if(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==
p[3])q.colorMask(l[0],l[1],l[2],l[3]),p[0]=l[0],p[1]=l[1],p[2]=l[2],p[3]=l[3];P!==N&&(q.cullFace(P),C.cull_face=P);O!==Q&&(q.depthFunc(O),C.depth_func=O);R!==ra&&(q.depthMask(R),C.depth_mask=R);if(n[0]!==k[0]||n[1]!==k[1])q.depthRange(n[0],n[1]),k[0]=n[0],k[1]=n[1];pa!==K&&(q.frontFace(pa),C.frontFace=pa);L!==da&&(q.lineWidth(L),C.lineWidth=L);if(u[0]!==w[0]||u[1]!==w[1])q.polygonOffset(u[0],u[1]),w[0]=u[0],w[1]=u[1];if(D[0]!==f[0]||D[1]!==f[1])q.sampleCoverage(D[0],D[1]),f[0]=D[0],f[1]=D[1];if(y[0]!==
G[0]||y[1]!==G[1]||y[2]!==G[2]||y[3]!==G[3])q.scissor(y[0],y[1],y[2],y[3]),G[0]=y[0],G[1]=y[1],G[2]=y[2],G[3]=y[3];if(t[0]!==I[0]||t[1]!==I[1]||t[2]!==I[2])q.stencilFunc(t[0],t[1],t[2]),I[0]=t[0],I[1]=t[1],I[2]=t[2];X!==ma&&(q.stencilMask(X),C.stencil_mask=X);if(S[0]!==H[0]||S[1]!==H[1]||S[2]!==H[2]||S[3]!==H[3])q.stencilOpSeparate(S[0],S[1],S[2],S[3]),H[0]=S[0],H[1]=S[1],H[2]=S[2],H[3]=S[3];if(A[0]!==ka[0]||A[1]!==ka[1]||A[2]!==ka[2]||A[3]!==ka[3])q.stencilOpSeparate(A[0],A[1],A[2],A[3]),ka[0]=A[0],
ka[1]=A[1],ka[2]=A[2],ka[3]=A[3];if(J[0]!==F[0]||J[1]!==F[1]||J[2]!==F[2]||J[3]!==F[3])q.viewport(J[0],J[1],J[2],J[3]),F[0]=J[0],F[1]=J[1],F[2]=J[2],F[3]=J[3]},refresh:function(){var a,ea,z,x,M,la,oa,U,V,T,P,N,O,Q,R,ra;C.dirty=!1;ea=m.blend_enable;z=m.cull_enable;x=m.depth_enable;M=m.dither;la=m.polygonOffset_enable;oa=m.sample_alpha;U=m.sample_enable;V=m.scissor_enable;T=m.stencil_enable;P=m.cull_face;N=m.depth_func;O=m.depth_mask;Q=m.frontFace;R=m.lineWidth;ra=m.stencil_mask;(a=r.next)?q.bindFramebuffer(36160,
a.framebuffer):q.bindFramebuffer(36160,null);r.cur=a;a=d[0];a.buffer?(q.enableVertexAttribArray(0),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=d[1];a.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,a.x,a.y,a.z,
a.w),a.buffer=null);a=d[2];a.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=d[3];a.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=d[4];a.buffer?
(q.enableVertexAttribArray(4),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=d[5];a.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=d[6];a.buffer?(q.enableVertexAttribArray(6),q.bindBuffer(34962,
a.buffer.buffer),q.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=d[7];a.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=d[8];a.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(8,
a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(8),q.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=d[9];a.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=d[10];a.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,
a.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=d[11];a.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=d[12];a.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(12),
q.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=d[13];a.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=d[14];a.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(14),q.vertexAttrib4f(14,a.x,
a.y,a.z,a.w),a.buffer=null);a=d[15];a.buffer?(q.enableVertexAttribArray(15),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);b.currentVAO=null;b.setVAO(b.targetVAO);ea?q.enable(3042):q.disable(3042);C.blend_enable=ea;z?q.enable(2884):q.disable(2884);C.cull_enable=z;x?q.enable(2929):q.disable(2929);C.depth_enable=x;M?q.enable(3024):q.disable(3024);C.dither=
M;la?q.enable(32823):q.disable(32823);C.polygonOffset_enable=la;oa?q.enable(32926):q.disable(32926);C.sample_alpha=oa;U?q.enable(32928):q.disable(32928);C.sample_enable=U;V?q.enable(3089):q.disable(3089);C.scissor_enable=V;T?q.enable(2960):q.disable(2960);C.stencil_enable=T;q.blendColor(g[0],g[1],g[2],g[3]);c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];q.blendEquationSeparate(h[0],h[1]);B[0]=h[0];B[1]=h[1];q.blendFuncSeparate(v[0],v[1],v[2],v[3]);e[0]=v[0];e[1]=v[1];e[2]=v[2];e[3]=v[3];q.colorMask(l[0],
l[1],l[2],l[3]);p[0]=l[0];p[1]=l[1];p[2]=l[2];p[3]=l[3];q.cullFace(P);C.cull_face=P;q.depthFunc(N);C.depth_func=N;q.depthMask(O);C.depth_mask=O;q.depthRange(n[0],n[1]);k[0]=n[0];k[1]=n[1];q.frontFace(Q);C.frontFace=Q;q.lineWidth(R);C.lineWidth=R;q.polygonOffset(u[0],u[1]);w[0]=u[0];w[1]=u[1];q.sampleCoverage(D[0],D[1]);f[0]=D[0];f[1]=D[1];q.scissor(y[0],y[1],y[2],y[3]);G[0]=y[0];G[1]=y[1];G[2]=y[2];G[3]=y[3];q.stencilFunc(t[0],t[1],t[2]);I[0]=t[0];I[1]=t[1];I[2]=t[2];q.stencilMask(ra);C.stencil_mask=
ra;q.stencilOpSeparate(S[0],S[1],S[2],S[3]);H[0]=S[0];H[1]=S[1];H[2]=S[2];H[3]=S[3];q.stencilOpSeparate(A[0],A[1],A[2],A[3]);ka[0]=A[0];ka[1]=A[1];ka[2]=A[2];ka[3]=A[3];q.viewport(J[0],J[1],J[2],J[3]);F[0]=J[0];F[1]=J[1];F[2]=J[2];F[3]=J[3]}}},$3:function(a,d,C,r){var q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,f,y,G,t,I,S,H,A,ka,J,F,E,ea,z,x,M,la;q=a.context;m=a.current;b=a.framebuffer;g=a.gl;c=a.next;h=a.shader;B=a.vao;v=c.blend_color;e=m.blend_color;l=c.blend_equation;p=m.blend_equation;n=c.blend_func;k=m.blend_func;
u=c.colorMask;w=m.colorMask;D=c.depth_range;f=m.depth_range;y=c.polygonOffset_offset;G=m.polygonOffset_offset;t=c.sample_coverage;I=m.sample_coverage;S=c.scissor_box;H=m.scissor_box;A=c.stencil_func;ka=m.stencil_func;J=c.stencil_opBack;F=m.stencil_opBack;E=c.stencil_opFront;ea=m.stencil_opFront;z=c.viewport;x=m.viewport;M={};la={};return{batch:function(a,q){var C,T,P,N,O;C=b.next;C!==b.cur&&(C?g.bindFramebuffer(36160,C.framebuffer):g.bindFramebuffer(36160,null),b.cur=C);if(m.dirty){C=c.dither;C!==
m.dither&&(C?g.enable(3024):g.disable(3024),m.dither=C);C=c.blend_enable;C!==m.blend_enable&&(C?g.enable(3042):g.disable(3042),m.blend_enable=C);C=v[0];P=v[1];N=v[2];O=v[3];if(C!==e[0]||P!==e[1]||N!==e[2]||O!==e[3])g.blendColor(C,P,N,O),e[0]=C,e[1]=P,e[2]=N,e[3]=O;C=l[0];P=l[1];if(C!==p[0]||P!==p[1])g.blendEquationSeparate(C,P),p[0]=C,p[1]=P;C=n[0];P=n[1];N=n[2];O=n[3];if(C!==k[0]||P!==k[1]||N!==k[2]||O!==k[3])g.blendFuncSeparate(C,P,N,O),k[0]=C,k[1]=P,k[2]=N,k[3]=O;C=c.depth_enable;C!==m.depth_enable&&
(C?g.enable(2929):g.disable(2929),m.depth_enable=C);C=c.depth_func;C!==m.depth_func&&(g.depthFunc(C),m.depth_func=C);C=D[0];P=D[1];if(C!==f[0]||P!==f[1])g.depthRange(C,P),f[0]=C,f[1]=P;C=c.depth_mask;C!==m.depth_mask&&(g.depthMask(C),m.depth_mask=C);C=u[0];P=u[1];N=u[2];O=u[3];if(C!==w[0]||P!==w[1]||N!==w[2]||O!==w[3])g.colorMask(C,P,N,O),w[0]=C,w[1]=P,w[2]=N,w[3]=O;C=c.cull_enable;C!==m.cull_enable&&(C?g.enable(2884):g.disable(2884),m.cull_enable=C);C=c.cull_face;C!==m.cull_face&&(g.cullFace(C),
m.cull_face=C);C=c.frontFace;C!==m.frontFace&&(g.frontFace(C),m.frontFace=C);C=c.lineWidth;C!==m.lineWidth&&(g.lineWidth(C),m.lineWidth=C);C=c.polygonOffset_enable;C!==m.polygonOffset_enable&&(C?g.enable(32823):g.disable(32823),m.polygonOffset_enable=C);C=y[0];P=y[1];if(C!==G[0]||P!==G[1])g.polygonOffset(C,P),G[0]=C,G[1]=P;C=c.sample_alpha;C!==m.sample_alpha&&(C?g.enable(32926):g.disable(32926),m.sample_alpha=C);C=c.sample_enable;C!==m.sample_enable&&(C?g.enable(32928):g.disable(32928),m.sample_enable=
C);C=t[0];P=t[1];if(C!==I[0]||P!==I[1])g.sampleCoverage(C,P),I[0]=C,I[1]=P;C=c.stencil_enable;C!==m.stencil_enable&&(C?g.enable(2960):g.disable(2960),m.stencil_enable=C);C=c.stencil_mask;C!==m.stencil_mask&&(g.stencilMask(C),m.stencil_mask=C);C=A[0];P=A[1];N=A[2];if(C!==ka[0]||P!==ka[1]||N!==ka[2])g.stencilFunc(C,P,N),ka[0]=C,ka[1]=P,ka[2]=N;C=E[0];P=E[1];N=E[2];O=E[3];if(C!==ea[0]||P!==ea[1]||N!==ea[2]||O!==ea[3])g.stencilOpSeparate(C,P,N,O),ea[0]=C,ea[1]=P,ea[2]=N,ea[3]=O;C=J[0];P=J[1];N=J[2];O=
J[3];if(C!==F[0]||P!==F[1]||N!==F[2]||O!==F[3])g.stencilOpSeparate(C,P,N,O),F[0]=C,F[1]=P,F[2]=N,F[3]=O;C=c.scissor_enable;C!==m.scissor_enable&&(C?g.enable(3089):g.disable(3089),m.scissor_enable=C);C=S[0];P=S[1];N=S[2];O=S[3];if(C!==H[0]||P!==H[1]||N!==H[2]||O!==H[3])g.scissor(C,P,N,O),H[0]=C,H[1]=P,H[2]=N,H[3]=O;C=z[0];P=z[1];N=z[2];O=z[3];if(C!==x[0]||P!==x[1]||N!==x[2]||O!==x[3])g.viewport(C,P,N,O),x[0]=C,x[1]=P,x[2]=N,x[3]=O;m.dirty=!1}if(C=m.profile)T=performance.now(),d.count+=q;P=h.program(h.vert,
h.frag);g.useProgram(P.program);B.setVAO(null);N=P.id;(O=la[N])||(O=la[N]=r(P));O.call(this,a,q);B.setVAO(null);C&&(d.cpuTime+=performance.now()-T)},draw:function(a){var r,q,T,P,N;r=b.next;r!==b.cur&&(r?g.bindFramebuffer(36160,r.framebuffer):g.bindFramebuffer(36160,null),b.cur=r);if(m.dirty){r=c.dither;r!==m.dither&&(r?g.enable(3024):g.disable(3024),m.dither=r);r=c.blend_enable;r!==m.blend_enable&&(r?g.enable(3042):g.disable(3042),m.blend_enable=r);r=v[0];T=v[1];P=v[2];N=v[3];if(r!==e[0]||T!==e[1]||
P!==e[2]||N!==e[3])g.blendColor(r,T,P,N),e[0]=r,e[1]=T,e[2]=P,e[3]=N;r=l[0];T=l[1];if(r!==p[0]||T!==p[1])g.blendEquationSeparate(r,T),p[0]=r,p[1]=T;r=n[0];T=n[1];P=n[2];N=n[3];if(r!==k[0]||T!==k[1]||P!==k[2]||N!==k[3])g.blendFuncSeparate(r,T,P,N),k[0]=r,k[1]=T,k[2]=P,k[3]=N;r=c.depth_enable;r!==m.depth_enable&&(r?g.enable(2929):g.disable(2929),m.depth_enable=r);r=c.depth_func;r!==m.depth_func&&(g.depthFunc(r),m.depth_func=r);r=D[0];T=D[1];if(r!==f[0]||T!==f[1])g.depthRange(r,T),f[0]=r,f[1]=T;r=c.depth_mask;
r!==m.depth_mask&&(g.depthMask(r),m.depth_mask=r);r=u[0];T=u[1];P=u[2];N=u[3];if(r!==w[0]||T!==w[1]||P!==w[2]||N!==w[3])g.colorMask(r,T,P,N),w[0]=r,w[1]=T,w[2]=P,w[3]=N;r=c.cull_enable;r!==m.cull_enable&&(r?g.enable(2884):g.disable(2884),m.cull_enable=r);r=c.cull_face;r!==m.cull_face&&(g.cullFace(r),m.cull_face=r);r=c.frontFace;r!==m.frontFace&&(g.frontFace(r),m.frontFace=r);r=c.lineWidth;r!==m.lineWidth&&(g.lineWidth(r),m.lineWidth=r);r=c.polygonOffset_enable;r!==m.polygonOffset_enable&&(r?g.enable(32823):
g.disable(32823),m.polygonOffset_enable=r);r=y[0];T=y[1];if(r!==G[0]||T!==G[1])g.polygonOffset(r,T),G[0]=r,G[1]=T;r=c.sample_alpha;r!==m.sample_alpha&&(r?g.enable(32926):g.disable(32926),m.sample_alpha=r);r=c.sample_enable;r!==m.sample_enable&&(r?g.enable(32928):g.disable(32928),m.sample_enable=r);r=t[0];T=t[1];if(r!==I[0]||T!==I[1])g.sampleCoverage(r,T),I[0]=r,I[1]=T;r=c.stencil_enable;r!==m.stencil_enable&&(r?g.enable(2960):g.disable(2960),m.stencil_enable=r);r=c.stencil_mask;r!==m.stencil_mask&&
(g.stencilMask(r),m.stencil_mask=r);r=A[0];T=A[1];P=A[2];if(r!==ka[0]||T!==ka[1]||P!==ka[2])g.stencilFunc(r,T,P),ka[0]=r,ka[1]=T,ka[2]=P;r=E[0];T=E[1];P=E[2];N=E[3];if(r!==ea[0]||T!==ea[1]||P!==ea[2]||N!==ea[3])g.stencilOpSeparate(r,T,P,N),ea[0]=r,ea[1]=T,ea[2]=P,ea[3]=N;r=J[0];T=J[1];P=J[2];N=J[3];if(r!==F[0]||T!==F[1]||P!==F[2]||N!==F[3])g.stencilOpSeparate(r,T,P,N),F[0]=r,F[1]=T,F[2]=P,F[3]=N;r=c.scissor_enable;r!==m.scissor_enable&&(r?g.enable(3089):g.disable(3089),m.scissor_enable=r);r=S[0];
T=S[1];P=S[2];N=S[3];if(r!==H[0]||T!==H[1]||P!==H[2]||N!==H[3])g.scissor(r,T,P,N),H[0]=r,H[1]=T,H[2]=P,H[3]=N;r=z[0];T=z[1];P=z[2];N=z[3];if(r!==x[0]||T!==x[1]||P!==x[2]||N!==x[3])g.viewport(r,T,P,N),x[0]=r,x[1]=T,x[2]=P,x[3]=N;m.dirty=!1}if(r=m.profile)q=performance.now(),d.count++;T=h.program(h.vert,h.frag);g.useProgram(T.program);B.setVAO(null);P=T.id;(N=M[P])||(N=M[P]=C(T));N.call(this,a);B.setVAO(null);r&&(d.cpuTime+=performance.now()-q)},scope:function(c,e,b){var a,l;if(a=m.profile)l=performance.now(),
d.count++;e(q,c,b);a&&(d.cpuTime+=performance.now()-l)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,d,C,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,f,y,G,t,I,S,H,A,x,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,
ha,fa,sa,ua,Ca,lb,Fb,aa,W,xa,Fa,qa,ya,wa){var ia,Y,ta,Ia,Ja,Oa,Z,Gc,ac,Ga,bc,Qb,Ae,Id,Ad,Sd,De,Dd,$d,se,oe,yd,Pd,Nd,Bd,Be,Qe,Ue,Jd,Ee,le,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa;ia=a.attributes;Y=a.context;ta=a.current;Ia=a.draw;Ja=a.elements;Oa=a.framebuffer;Z=a.gl;Gc=a.next;ac=a.shader;Ga=a.uniforms;bc=a.vao;Qb=Gc.blend_color;Ae=ta.blend_color;Id=Gc.blend_equation;Ad=ta.blend_equation;Sd=Gc.blend_func;De=ta.blend_func;Dd=Gc.colorMask;
$d=ta.colorMask;se=Gc.depth_range;oe=ta.depth_range;yd=Gc.polygonOffset_offset;Pd=ta.polygonOffset_offset;Nd=Gc.sample_coverage;Bd=ta.sample_coverage;Be=Gc.scissor_box;Qe=ta.scissor_box;Ue=Gc.stencil_func;Jd=ta.stencil_func;Ee=Gc.stencil_opBack;le=ta.stencil_opBack;ce=Gc.stencil_opFront;Td=ta.stencil_opFront;Ed=Gc.viewport;pd=ta.viewport;bd={};td={};Oc=new Float32Array(16);rd=new Float32Array(16);Hc=new Float32Array(16);gd=new Float32Array(16);Sc=new Float32Array(16);md=new Float32Array(16);Tb=new Float32Array(16);
yc=new Float32Array(16);uc=new Float32Array(16);zb=new Float32Array(16);xc=new Float32Array(16);Bb=new Float32Array(16);Lc=new Float32Array(16);lc=new Float32Array(16);Ic=new Float32Array(16);hd=new Float32Array(16);cd=new Float32Array(16);Ec=new Float32Array(16);ec=new Float32Array(16);Jc=new Float32Array(16);oc=new Float32Array(16);qc=new Float32Array(16);mc=new Float32Array(16);pc=new Float32Array(16);pb=new Float32Array(16);Pc=new Float32Array(16);Yb=new Float32Array(16);fb=new Float32Array(16);
Kb=new Float32Array(16);Wa=new Float32Array(16);ib=new Float32Array(16);Xa=new Float32Array(16);return{batch:function(a,d){var C,y,D,f;C=Oa.next;C!==Oa.cur&&(C?Z.bindFramebuffer(36160,C.framebuffer):Z.bindFramebuffer(36160,null),Oa.cur=C);if(ta.dirty){var z,G,Ea,A,H,I,t,J,E,ea,F,M,ob,S,x,ka,ba,la,Ga,Qb,ac,yc,Sc,Tb,Bb;z=Dd[0];G=Dd[1];Ea=Dd[2];A=Dd[3];if(z!==$d[0]||G!==$d[1]||Ea!==$d[2]||A!==$d[3])Z.colorMask(z,G,Ea,A),$d[0]=z,$d[1]=G,$d[2]=Ea,$d[3]=A;H=Gc.frontFace;H!==ta.frontFace&&(Z.frontFace(H),
ta.frontFace=H);I=Gc.polygonOffset_enable;I!==ta.polygonOffset_enable&&(I?Z.enable(32823):Z.disable(32823),ta.polygonOffset_enable=I);t=yd[0];J=yd[1];if(t!==Pd[0]||J!==Pd[1])Z.polygonOffset(t,J),Pd[0]=t,Pd[1]=J;E=Gc.sample_alpha;E!==ta.sample_alpha&&(E?Z.enable(32926):Z.disable(32926),ta.sample_alpha=E);ea=Gc.sample_enable;ea!==ta.sample_enable&&(ea?Z.enable(32928):Z.disable(32928),ta.sample_enable=ea);F=Nd[0];M=Nd[1];if(F!==Bd[0]||M!==Bd[1])Z.sampleCoverage(F,M),Bd[0]=F,Bd[1]=M;ob=Gc.stencil_enable;
ob!==ta.stencil_enable&&(ob?Z.enable(2960):Z.disable(2960),ta.stencil_enable=ob);S=Gc.stencil_mask;S!==ta.stencil_mask&&(Z.stencilMask(S),ta.stencil_mask=S);x=Ue[0];ka=Ue[1];ba=Ue[2];if(x!==Jd[0]||ka!==Jd[1]||ba!==Jd[2])Z.stencilFunc(x,ka,ba),Jd[0]=x,Jd[1]=ka,Jd[2]=ba;la=ce[0];Ga=ce[1];Qb=ce[2];ac=ce[3];if(la!==Td[0]||Ga!==Td[1]||Qb!==Td[2]||ac!==Td[3])Z.stencilOpSeparate(la,Ga,Qb,ac),Td[0]=la,Td[1]=Ga,Td[2]=Qb,Td[3]=ac;yc=Ee[0];Sc=Ee[1];Tb=Ee[2];Bb=Ee[3];if(yc!==le[0]||Sc!==le[1]||Tb!==le[2]||Bb!==
le[3])Z.stencilOpSeparate(yc,Sc,Tb,Bb),le[0]=yc,le[1]=Sc,le[2]=Tb,le[3]=Bb}Z.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;Z.disable(3042);ta.blend_enable=!1;Z.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;Z.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;Z.enable(2884);ta.cull_enable=!0;Z.cullFace(1029);ta.cull_face=1029;Z.enable(2929);ta.depth_enable=!0;Z.depthFunc(513);ta.depth_func=513;Z.depthMask(!0);ta.depth_mask=!0;Z.depthRange(0,1);oe[0]=0;oe[1]=1;Z.disable(3024);
ta.dither=!1;Z.lineWidth(2);ta.lineWidth=2;Z.enable(3089);ta.scissor_enable=!0;y=ta.profile;ta.profile=!1;Z.useProgram(oa.program);var Be,zb,md,La,lc,$a,Hc,Sd,mb,Na,uc,Qa,wb,xb,Ta,nb,rd,Id,Ic,cb,Lc,gd,Za,Oc,Ab,ab,se,xc,Vb,Ob,Ed,Pb,hd;bc.setVAO(null);Be=Aa.location;zb=ia[Be];zb.buffer||Z.enableVertexAttribArray(Be);if(zb.type!==r.dtype||4!==zb.size||zb.buffer!==r||!1!==zb.normalized||0!==zb.offset||0!==zb.stride)Z.bindBuffer(34962,r.buffer),Z.vertexAttribPointer(Be,4,r.dtype,!1,0,0),zb.type=r.dtype,
zb.size=4,zb.buffer=r,zb.normalized=!1,zb.offset=0,zb.stride=0;md=Pa.location;La=ia[md];La.buffer||Z.enableVertexAttribArray(md);if(La.type!==q.dtype||4!==La.size||La.buffer!==q||!1!==La.normalized||0!==La.offset||0!==La.stride)Z.bindBuffer(34962,q.buffer),Z.vertexAttribPointer(md,4,q.dtype,!1,0,0),La.type=q.dtype,La.size=4,La.buffer=q,La.normalized=!1,La.offset=0,La.stride=0;lc=za.location;$a=ia[lc];$a.buffer||Z.enableVertexAttribArray(lc);if($a.type!==m.dtype||4!==$a.size||$a.buffer!==m||!1!==$a.normalized||
0!==$a.offset||0!==$a.stride)Z.bindBuffer(34962,m.buffer),Z.vertexAttribPointer(lc,4,m.dtype,!1,0,0),$a.type=m.dtype,$a.size=4,$a.buffer=m,$a.normalized=!1,$a.offset=0,$a.stride=0;Hc=Xb.location;Sd=ia[Hc];Sd.buffer||Z.enableVertexAttribArray(Hc);if(Sd.type!==b.dtype||4!==Sd.size||Sd.buffer!==b||!1!==Sd.normalized||0!==Sd.offset||0!==Sd.stride)Z.bindBuffer(34962,b.buffer),Z.vertexAttribPointer(Hc,4,b.dtype,!1,0,0),Sd.type=b.dtype,Sd.size=4,Sd.buffer=b,Sd.normalized=!1,Sd.offset=0,Sd.stride=0;mb=Ua.location;
Na=ia[mb];Na.buffer||Z.enableVertexAttribArray(mb);if(Na.type!==g.dtype||4!==Na.size||Na.buffer!==g||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)Z.bindBuffer(34962,g.buffer),Z.vertexAttribPointer(mb,4,g.dtype,!1,0,0),Na.type=g.dtype,Na.size=4,Na.buffer=g,Na.normalized=!1,Na.offset=0,Na.stride=0;uc=ha.location;Qa=ia[uc];Qa.buffer||Z.enableVertexAttribArray(uc);if(Qa.type!==c.dtype||4!==Qa.size||Qa.buffer!==c||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)Z.bindBuffer(34962,c.buffer),Z.vertexAttribPointer(uc,
4,c.dtype,!1,0,0),Qa.type=c.dtype,Qa.size=4,Qa.buffer=c,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;wb=fa.location;xb=ia[wb];xb.buffer||Z.enableVertexAttribArray(wb);if(xb.type!==h.dtype||4!==xb.size||xb.buffer!==h||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)Z.bindBuffer(34962,h.buffer),Z.vertexAttribPointer(wb,4,h.dtype,!1,0,0),xb.type=h.dtype,xb.size=4,xb.buffer=h,xb.normalized=!1,xb.offset=0,xb.stride=0;Ta=sa.location;nb=ia[Ta];nb.buffer||Z.enableVertexAttribArray(Ta);if(nb.type!==B.dtype||
4!==nb.size||nb.buffer!==B||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)Z.bindBuffer(34962,B.buffer),Z.vertexAttribPointer(Ta,4,B.dtype,!1,0,0),nb.type=B.dtype,nb.size=4,nb.buffer=B,nb.normalized=!1,nb.offset=0,nb.stride=0;rd=ua.location;Id=ia[rd];Id.buffer||Z.enableVertexAttribArray(rd);if(Id.type!==v.dtype||4!==Id.size||Id.buffer!==v||!1!==Id.normalized||0!==Id.offset||0!==Id.stride)Z.bindBuffer(34962,v.buffer),Z.vertexAttribPointer(rd,4,v.dtype,!1,0,0),Id.type=v.dtype,Id.size=4,Id.buffer=
v,Id.normalized=!1,Id.offset=0,Id.stride=0;Ic=Ca.location;cb=ia[Ic];cb.buffer||Z.enableVertexAttribArray(Ic);if(cb.type!==e.dtype||4!==cb.size||cb.buffer!==e||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)Z.bindBuffer(34962,e.buffer),Z.vertexAttribPointer(Ic,4,e.dtype,!1,0,0),cb.type=e.dtype,cb.size=4,cb.buffer=e,cb.normalized=!1,cb.offset=0,cb.stride=0;Lc=lb.location;gd=ia[Lc];gd.buffer||Z.enableVertexAttribArray(Lc);if(gd.type!==l.dtype||4!==gd.size||gd.buffer!==l||!1!==gd.normalized||0!==gd.offset||
0!==gd.stride)Z.bindBuffer(34962,l.buffer),Z.vertexAttribPointer(Lc,4,l.dtype,!1,0,0),gd.type=l.dtype,gd.size=4,gd.buffer=l,gd.normalized=!1,gd.offset=0,gd.stride=0;Za=Fb.location;Oc=ia[Za];Oc.buffer||Z.enableVertexAttribArray(Za);if(Oc.type!==p.dtype||4!==Oc.size||Oc.buffer!==p||!1!==Oc.normalized||0!==Oc.offset||0!==Oc.stride)Z.bindBuffer(34962,p.buffer),Z.vertexAttribPointer(Za,4,p.dtype,!1,0,0),Oc.type=p.dtype,Oc.size=4,Oc.buffer=p,Oc.normalized=!1,Oc.offset=0,Oc.stride=0;Ab=aa.location;ab=ia[Ab];
ab.buffer||Z.enableVertexAttribArray(Ab);if(ab.type!==n.dtype||4!==ab.size||ab.buffer!==n||!1!==ab.normalized||0!==ab.offset||0!==ab.stride)Z.bindBuffer(34962,n.buffer),Z.vertexAttribPointer(Ab,4,n.dtype,!1,0,0),ab.type=n.dtype,ab.size=4,ab.buffer=n,ab.normalized=!1,ab.offset=0,ab.stride=0;se=W.location;xc=ia[se];xc.buffer||Z.enableVertexAttribArray(se);if(xc.type!==k.dtype||4!==xc.size||xc.buffer!==k||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)Z.bindBuffer(34962,k.buffer),Z.vertexAttribPointer(se,
4,k.dtype,!1,0,0),xc.type=k.dtype,xc.size=4,xc.buffer=k,xc.normalized=!1,xc.offset=0,xc.stride=0;Vb=xa.location;Ob=ia[Vb];Ob.buffer||Z.enableVertexAttribArray(Vb);if(Ob.type!==u.dtype||4!==Ob.size||Ob.buffer!==u||!1!==Ob.normalized||0!==Ob.offset||0!==Ob.stride)Z.bindBuffer(34962,u.buffer),Z.vertexAttribPointer(Vb,4,u.dtype,!1,0,0),Ob.type=u.dtype,Ob.size=4,Ob.buffer=u,Ob.normalized=!1,Ob.offset=0,Ob.stride=0;Ed=V.location;Pb=ia[Ed];Pb.buffer||Z.enableVertexAttribArray(Ed);if(Pb.type!==w.dtype||4!==
Pb.size||Pb.buffer!==w||!1!==Pb.normalized||0!==Pb.offset||0!==Pb.stride)Z.bindBuffer(34962,w.buffer),Z.vertexAttribPointer(Ed,4,w.dtype,!1,0,0),Pb.type=w.dtype,Pb.size=4,Pb.buffer=w,Pb.normalized=!1,Pb.offset=0,Pb.stride=0;Z.uniform1i(Fa.location,U.bind());(hd=Ia.elements)?Z.bindBuffer(34963,hd.buffer.buffer):bc.currentVAO&&(hd=Ja.getElements(bc.currentVAO.elements))&&Z.bindBuffer(34963,hd.buffer.buffer);for(D=0;D<d;++D){f=a[D];var Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,
ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe;bd.height=f.viewportHeight;bd.width=f.viewportWidth;bd.x=f.viewportX;bd.y=f.viewportY;Fc=bd.x|0;vd=bd.y|0;Qc="width"in bd?bd.width|0:Y.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:Y.framebufferHeight-vd;sd=Y.viewportWidth;Y.viewportWidth=Qc;nc=Y.viewportHeight;Y.viewportHeight=Yc;Z.viewport(Fc,vd,Qc,Yc);pd[0]=Fc;pd[1]=vd;pd[2]=Qc;pd[3]=Yc;td.height=f.scissorHeight;td.width=f.scissorWidth;
td.x=f.scissorX;td.y=f.scissorY;wc=td.x|0;gc=td.y|0;bb="width"in td?td.width|0:Y.framebufferWidth-wc;sc="height"in td?td.height|0:Y.framebufferHeight-gc;Z.scissor(wc,gc,bb,sc);Qe[0]=wc;Qe[1]=gc;Qe[2]=bb;Qe[3]=sc;Rb=f.dim0A;Z.uniformMatrix4fv(P.location,!1,Array.isArray(Rb)||Rb instanceof Float32Array?Rb:(cd[0]=Rb[0],cd[1]=Rb[1],cd[2]=Rb[2],cd[3]=Rb[3],cd[4]=Rb[4],cd[5]=Rb[5],cd[6]=Rb[6],cd[7]=Rb[7],cd[8]=Rb[8],cd[9]=Rb[9],cd[10]=Rb[10],cd[11]=Rb[11],cd[12]=Rb[12],cd[13]=Rb[13],cd[14]=Rb[14],cd[15]=
Rb[15],cd));Wb=f.dim1A;Z.uniformMatrix4fv(R.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:(Ec[0]=Wb[0],Ec[1]=Wb[1],Ec[2]=Wb[2],Ec[3]=Wb[3],Ec[4]=Wb[4],Ec[5]=Wb[5],Ec[6]=Wb[6],Ec[7]=Wb[7],Ec[8]=Wb[8],Ec[9]=Wb[9],Ec[10]=Wb[10],Ec[11]=Wb[11],Ec[12]=Wb[12],Ec[13]=Wb[13],Ec[14]=Wb[14],Ec[15]=Wb[15],Ec));dc=f.dim0B;Z.uniformMatrix4fv(N.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],
ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));hc=f.dim1B;Z.uniformMatrix4fv(ra.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Jc[0]=hc[0],Jc[1]=hc[1],Jc[2]=hc[2],Jc[3]=hc[3],Jc[4]=hc[4],Jc[5]=hc[5],Jc[6]=hc[6],Jc[7]=hc[7],Jc[8]=hc[8],Jc[9]=hc[9],Jc[10]=hc[10],Jc[11]=hc[11],Jc[12]=hc[12],Jc[13]=hc[13],Jc[14]=hc[14],Jc[15]=hc[15],Jc));zc=f.dim0C;Z.uniformMatrix4fv(O.location,!1,Array.isArray(zc)||zc instanceof Float32Array?
zc:(oc[0]=zc[0],oc[1]=zc[1],oc[2]=zc[2],oc[3]=zc[3],oc[4]=zc[4],oc[5]=zc[5],oc[6]=zc[6],oc[7]=zc[7],oc[8]=zc[8],oc[9]=zc[9],oc[10]=zc[10],oc[11]=zc[11],oc[12]=zc[12],oc[13]=zc[13],oc[14]=zc[14],oc[15]=zc[15],oc));Cc=f.dim1C;Z.uniformMatrix4fv(pa.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(qc[0]=Cc[0],qc[1]=Cc[1],qc[2]=Cc[2],qc[3]=Cc[3],qc[4]=Cc[4],qc[5]=Cc[5],qc[6]=Cc[6],qc[7]=Cc[7],qc[8]=Cc[8],qc[9]=Cc[9],qc[10]=Cc[10],qc[11]=Cc[11],qc[12]=Cc[12],qc[13]=Cc[13],qc[14]=Cc[14],qc[15]=
Cc[15],qc));dd=f.dim0D;Z.uniformMatrix4fv(Q.location,!1,Array.isArray(dd)||dd instanceof Float32Array?dd:(mc[0]=dd[0],mc[1]=dd[1],mc[2]=dd[2],mc[3]=dd[3],mc[4]=dd[4],mc[5]=dd[5],mc[6]=dd[6],mc[7]=dd[7],mc[8]=dd[8],mc[9]=dd[9],mc[10]=dd[10],mc[11]=dd[11],mc[12]=dd[12],mc[13]=dd[13],mc[14]=dd[14],mc[15]=dd[15],mc));Tc=f.dim1D;Z.uniformMatrix4fv(K.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?Tc:(pc[0]=Tc[0],pc[1]=Tc[1],pc[2]=Tc[2],pc[3]=Tc[3],pc[4]=Tc[4],pc[5]=Tc[5],pc[6]=Tc[6],pc[7]=Tc[7],
pc[8]=Tc[8],pc[9]=Tc[9],pc[10]=Tc[10],pc[11]=Tc[11],pc[12]=Tc[12],pc[13]=Tc[13],pc[14]=Tc[14],pc[15]=Tc[15],pc));Uc=f.loA;Z.uniformMatrix4fv(Ba.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(pb[0]=Uc[0],pb[1]=Uc[1],pb[2]=Uc[2],pb[3]=Uc[3],pb[4]=Uc[4],pb[5]=Uc[5],pb[6]=Uc[6],pb[7]=Uc[7],pb[8]=Uc[8],pb[9]=Uc[9],pb[10]=Uc[10],pb[11]=Uc[11],pb[12]=Uc[12],pb[13]=Uc[13],pb[14]=Uc[14],pb[15]=Uc[15],pb));Vc=f.hiA;Z.uniformMatrix4fv(da.location,!1,Array.isArray(Vc)||Vc instanceof Float32Array?
Vc:(Pc[0]=Vc[0],Pc[1]=Vc[1],Pc[2]=Vc[2],Pc[3]=Vc[3],Pc[4]=Vc[4],Pc[5]=Vc[5],Pc[6]=Vc[6],Pc[7]=Vc[7],Pc[8]=Vc[8],Pc[9]=Vc[9],Pc[10]=Vc[10],Pc[11]=Vc[11],Pc[12]=Vc[12],Pc[13]=Vc[13],Pc[14]=Vc[14],Pc[15]=Vc[15],Pc));Zc=f.loB;Z.uniformMatrix4fv(va.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Yb[0]=Zc[0],Yb[1]=Zc[1],Yb[2]=Zc[2],Yb[3]=Zc[3],Yb[4]=Zc[4],Yb[5]=Zc[5],Yb[6]=Zc[6],Yb[7]=Zc[7],Yb[8]=Zc[8],Yb[9]=Zc[9],Yb[10]=Zc[10],Yb[11]=Zc[11],Yb[12]=Zc[12],Yb[13]=Zc[13],Yb[14]=Zc[14],Yb[15]=
Zc[15],Yb));od=f.hiB;Z.uniformMatrix4fv(X.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(fb[0]=od[0],fb[1]=od[1],fb[2]=od[2],fb[3]=od[3],fb[4]=od[4],fb[5]=od[5],fb[6]=od[6],fb[7]=od[7],fb[8]=od[8],fb[9]=od[9],fb[10]=od[10],fb[11]=od[11],fb[12]=od[12],fb[13]=od[13],fb[14]=od[14],fb[15]=od[15],fb));ed=f.loC;Z.uniformMatrix4fv(ca.location,!1,Array.isArray(ed)||ed instanceof Float32Array?ed:(Kb[0]=ed[0],Kb[1]=ed[1],Kb[2]=ed[2],Kb[3]=ed[3],Kb[4]=ed[4],Kb[5]=ed[5],Kb[6]=ed[6],Kb[7]=ed[7],
Kb[8]=ed[8],Kb[9]=ed[9],Kb[10]=ed[10],Kb[11]=ed[11],Kb[12]=ed[12],Kb[13]=ed[13],Kb[14]=ed[14],Kb[15]=ed[15],Kb));$c=f.hiC;Z.uniformMatrix4fv(ma.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Wa[0]=$c[0],Wa[1]=$c[1],Wa[2]=$c[2],Wa[3]=$c[3],Wa[4]=$c[4],Wa[5]=$c[5],Wa[6]=$c[6],Wa[7]=$c[7],Wa[8]=$c[8],Wa[9]=$c[9],Wa[10]=$c[10],Wa[11]=$c[11],Wa[12]=$c[12],Wa[13]=$c[13],Wa[14]=$c[14],Wa[15]=$c[15],Wa));kc=f.loD;Z.uniformMatrix4fv(Da.location,!1,Array.isArray(kc)||kc instanceof Float32Array?
kc:(ib[0]=kc[0],ib[1]=kc[1],ib[2]=kc[2],ib[3]=kc[3],ib[4]=kc[4],ib[5]=kc[5],ib[6]=kc[6],ib[7]=kc[7],ib[8]=kc[8],ib[9]=kc[9],ib[10]=kc[10],ib[11]=kc[11],ib[12]=kc[12],ib[13]=kc[13],ib[14]=kc[14],ib[15]=kc[15],ib));cc=f.hiD;Z.uniformMatrix4fv(ga.location,!1,Array.isArray(cc)||cc instanceof Float32Array?cc:(Xa[0]=cc[0],Xa[1]=cc[1],Xa[2]=cc[2],Xa[3]=cc[3],Xa[4]=cc[4],Xa[5]=cc[5],Xa[6]=cc[6],Xa[7]=cc[7],Xa[8]=cc[8],Xa[9]=cc[9],Xa[10]=cc[10],Xa[11]=cc[11],Xa[12]=cc[12],Xa[13]=cc[13],Xa[14]=cc[14],Xa[15]=
cc[15],Xa));ad=f.resolution;Xc=ad[0];Ac=ad[1];D&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,Z.uniform2f(qa.location,Xc,Ac));Cd=f.viewBoxPos;ze=Cd[0];kd=Cd[1];D&&pe===ze&&Fe===kd||(pe=ze,Fe=kd,Z.uniform2f(ya.location,ze,kd));Fd=f.viewBoxSize;he=Fd[0];Ud=Fd[1];D&&ae===he&&Md===Ud||(ae=he,Md=Ud,Z.uniform2f(wa.location,he,Ud));Kd=f.maskHeight;D&&qd===Kd||(qd=Kd,Z.uniform1f(ja.location,Kd));Wc=f.drwLayer;D&&wd===Wc||(wd=Wc,Z.uniform1f(L.location,Wc));ud=f.contextColor;ld=ud[0];Gd=ud[1];je=ud[2];ve=ud[3];D&&xd===ld&&
Hd===Gd&&me===je&&ne===ve||(xd=ld,Hd=Gd,me=je,ne=ve,Z.uniform4f(T.location,ld,Gd,je,ve));(ke=f.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);ie=ke._texture;Z.uniform1i(na.location,ie.bind());we=f.offset;if(fe=f.count)hd?Z.drawElements(1,fe,hd.type,we<<(hd.type-5121>>1)):Z.drawArrays(1,we,fe),Y.viewportWidth=sd,Y.viewportHeight=nc,ie.unbind()}U.unbind();ta.dirty=!0;bc.setVAO(null);ta.profile=y},draw:function(a){var d,y,f,z,G,Ea;d=Oa.next;d!==Oa.cur&&(d?Z.bindFramebuffer(36160,d.framebuffer):
Z.bindFramebuffer(36160,null),Oa.cur=d);if(ta.dirty){d=Dd[0];Ea=Dd[1];y=Dd[2];f=Dd[3];if(d!==$d[0]||Ea!==$d[1]||y!==$d[2]||f!==$d[3])Z.colorMask(d,Ea,y,f),$d[0]=d,$d[1]=Ea,$d[2]=y,$d[3]=f;d=Gc.frontFace;d!==ta.frontFace&&(Z.frontFace(d),ta.frontFace=d);d=Gc.polygonOffset_enable;d!==ta.polygonOffset_enable&&(d?Z.enable(32823):Z.disable(32823),ta.polygonOffset_enable=d);d=yd[0];Ea=yd[1];if(d!==Pd[0]||Ea!==Pd[1])Z.polygonOffset(d,Ea),Pd[0]=d,Pd[1]=Ea;d=Gc.sample_alpha;d!==ta.sample_alpha&&(d?Z.enable(32926):
Z.disable(32926),ta.sample_alpha=d);d=Gc.sample_enable;d!==ta.sample_enable&&(d?Z.enable(32928):Z.disable(32928),ta.sample_enable=d);d=Nd[0];Ea=Nd[1];if(d!==Bd[0]||Ea!==Bd[1])Z.sampleCoverage(d,Ea),Bd[0]=d,Bd[1]=Ea;d=Gc.stencil_enable;d!==ta.stencil_enable&&(d?Z.enable(2960):Z.disable(2960),ta.stencil_enable=d);d=Gc.stencil_mask;d!==ta.stencil_mask&&(Z.stencilMask(d),ta.stencil_mask=d);d=Ue[0];Ea=Ue[1];y=Ue[2];if(d!==Jd[0]||Ea!==Jd[1]||y!==Jd[2])Z.stencilFunc(d,Ea,y),Jd[0]=d,Jd[1]=Ea,Jd[2]=y;d=ce[0];
Ea=ce[1];y=ce[2];f=ce[3];if(d!==Td[0]||Ea!==Td[1]||y!==Td[2]||f!==Td[3])Z.stencilOpSeparate(d,Ea,y,f),Td[0]=d,Td[1]=Ea,Td[2]=y,Td[3]=f;d=Ee[0];Ea=Ee[1];y=Ee[2];f=Ee[3];if(d!==le[0]||Ea!==le[1]||y!==le[2]||f!==le[3])Z.stencilOpSeparate(d,Ea,y,f),le[0]=d,le[1]=Ea,le[2]=y,le[3]=f}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;y=bd.x|0;f=bd.y|0;z="width"in bd?bd.width|0:Y.framebufferWidth-y;G="height"in bd?bd.height|0:Y.framebufferHeight-f;d=Y.viewportWidth;Y.viewportWidth=
z;Ea=Y.viewportHeight;Y.viewportHeight=G;Z.viewport(y,f,z,G);pd[0]=y;pd[1]=f;pd[2]=z;pd[3]=G;Z.blendColor(0,0,0,0);Ae[0]=0;Ae[1]=0;Ae[2]=0;Ae[3]=0;Z.disable(3042);ta.blend_enable=!1;Z.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;Z.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;Z.enable(2884);ta.cull_enable=!0;Z.cullFace(1029);ta.cull_face=1029;Z.enable(2929);ta.depth_enable=!0;Z.depthFunc(513);ta.depth_func=513;Z.depthMask(!0);ta.depth_mask=!0;Z.depthRange(0,1);oe[0]=
0;oe[1]=1;Z.disable(3024);ta.dither=!1;Z.lineWidth(2);ta.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;y=td.x|0;f=td.y|0;z="width"in td?td.width|0:Y.framebufferWidth-y;G="height"in td?td.height|0:Y.framebufferHeight-f;Z.scissor(y,f,z,G);Qe[0]=y;Qe[1]=f;Qe[2]=z;Qe[3]=G;Z.enable(3089);ta.scissor_enable=!0;y=ta.profile;ta.profile=!1;Z.useProgram(C.program);bc.setVAO(null);f=Aa.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==r.dtype||
4!==z.size||z.buffer!==r||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,r.buffer),Z.vertexAttribPointer(f,4,r.dtype,!1,0,0),z.type=r.dtype,z.size=4,z.buffer=r,z.normalized=!1,z.offset=0,z.stride=0;f=Pa.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==q.dtype||4!==z.size||z.buffer!==q||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,q.buffer),Z.vertexAttribPointer(f,4,q.dtype,!1,0,0),z.type=q.dtype,z.size=4,z.buffer=q,z.normalized=!1,z.offset=
0,z.stride=0;f=za.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==m.dtype||4!==z.size||z.buffer!==m||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,m.buffer),Z.vertexAttribPointer(f,4,m.dtype,!1,0,0),z.type=m.dtype,z.size=4,z.buffer=m,z.normalized=!1,z.offset=0,z.stride=0;f=Xb.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==b.dtype||4!==z.size||z.buffer!==b||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,b.buffer),Z.vertexAttribPointer(f,
4,b.dtype,!1,0,0),z.type=b.dtype,z.size=4,z.buffer=b,z.normalized=!1,z.offset=0,z.stride=0;f=Ua.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==g.dtype||4!==z.size||z.buffer!==g||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,g.buffer),Z.vertexAttribPointer(f,4,g.dtype,!1,0,0),z.type=g.dtype,z.size=4,z.buffer=g,z.normalized=!1,z.offset=0,z.stride=0;f=ha.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==c.dtype||4!==z.size||z.buffer!==c||!1!==
z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,c.buffer),Z.vertexAttribPointer(f,4,c.dtype,!1,0,0),z.type=c.dtype,z.size=4,z.buffer=c,z.normalized=!1,z.offset=0,z.stride=0;f=fa.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==h.dtype||4!==z.size||z.buffer!==h||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,h.buffer),Z.vertexAttribPointer(f,4,h.dtype,!1,0,0),z.type=h.dtype,z.size=4,z.buffer=h,z.normalized=!1,z.offset=0,z.stride=0;f=sa.location;z=ia[f];
z.buffer||Z.enableVertexAttribArray(f);if(z.type!==B.dtype||4!==z.size||z.buffer!==B||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,B.buffer),Z.vertexAttribPointer(f,4,B.dtype,!1,0,0),z.type=B.dtype,z.size=4,z.buffer=B,z.normalized=!1,z.offset=0,z.stride=0;f=ua.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==v.dtype||4!==z.size||z.buffer!==v||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,v.buffer),Z.vertexAttribPointer(f,4,v.dtype,!1,0,0),
z.type=v.dtype,z.size=4,z.buffer=v,z.normalized=!1,z.offset=0,z.stride=0;f=Ca.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==e.dtype||4!==z.size||z.buffer!==e||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,e.buffer),Z.vertexAttribPointer(f,4,e.dtype,!1,0,0),z.type=e.dtype,z.size=4,z.buffer=e,z.normalized=!1,z.offset=0,z.stride=0;f=lb.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==l.dtype||4!==z.size||z.buffer!==l||!1!==z.normalized||0!==
z.offset||0!==z.stride)Z.bindBuffer(34962,l.buffer),Z.vertexAttribPointer(f,4,l.dtype,!1,0,0),z.type=l.dtype,z.size=4,z.buffer=l,z.normalized=!1,z.offset=0,z.stride=0;f=Fb.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==p.dtype||4!==z.size||z.buffer!==p||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,p.buffer),Z.vertexAttribPointer(f,4,p.dtype,!1,0,0),z.type=p.dtype,z.size=4,z.buffer=p,z.normalized=!1,z.offset=0,z.stride=0;f=aa.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);
if(z.type!==n.dtype||4!==z.size||z.buffer!==n||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,n.buffer),Z.vertexAttribPointer(f,4,n.dtype,!1,0,0),z.type=n.dtype,z.size=4,z.buffer=n,z.normalized=!1,z.offset=0,z.stride=0;f=W.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==k.dtype||4!==z.size||z.buffer!==k||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,k.buffer),Z.vertexAttribPointer(f,4,k.dtype,!1,0,0),z.type=k.dtype,z.size=4,z.buffer=k,z.normalized=
!1,z.offset=0,z.stride=0;f=xa.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==u.dtype||4!==z.size||z.buffer!==u||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,u.buffer),Z.vertexAttribPointer(f,4,u.dtype,!1,0,0),z.type=u.dtype,z.size=4,z.buffer=u,z.normalized=!1,z.offset=0,z.stride=0;f=V.location;z=ia[f];z.buffer||Z.enableVertexAttribArray(f);if(z.type!==w.dtype||4!==z.size||z.buffer!==w||!1!==z.normalized||0!==z.offset||0!==z.stride)Z.bindBuffer(34962,w.buffer),
Z.vertexAttribPointer(f,4,w.dtype,!1,0,0),z.type=w.dtype,z.size=4,z.buffer=w,z.normalized=!1,z.offset=0,z.stride=0;f=a.dim0A;Z.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Oc[0]=f[0],Oc[1]=f[1],Oc[2]=f[2],Oc[3]=f[3],Oc[4]=f[4],Oc[5]=f[5],Oc[6]=f[6],Oc[7]=f[7],Oc[8]=f[8],Oc[9]=f[9],Oc[10]=f[10],Oc[11]=f[11],Oc[12]=f[12],Oc[13]=f[13],Oc[14]=f[14],Oc[15]=f[15],Oc));f=a.dim1A;Z.uniformMatrix4fv(R.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(rd[0]=f[0],rd[1]=
f[1],rd[2]=f[2],rd[3]=f[3],rd[4]=f[4],rd[5]=f[5],rd[6]=f[6],rd[7]=f[7],rd[8]=f[8],rd[9]=f[9],rd[10]=f[10],rd[11]=f[11],rd[12]=f[12],rd[13]=f[13],rd[14]=f[14],rd[15]=f[15],rd));f=a.dim0B;Z.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=f[14],Hc[15]=f[15],Hc));f=a.dim1B;Z.uniformMatrix4fv(ra.location,!1,
Array.isArray(f)||f instanceof Float32Array?f:(gd[0]=f[0],gd[1]=f[1],gd[2]=f[2],gd[3]=f[3],gd[4]=f[4],gd[5]=f[5],gd[6]=f[6],gd[7]=f[7],gd[8]=f[8],gd[9]=f[9],gd[10]=f[10],gd[11]=f[11],gd[12]=f[12],gd[13]=f[13],gd[14]=f[14],gd[15]=f[15],gd));f=a.dim0C;Z.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Sc[0]=f[0],Sc[1]=f[1],Sc[2]=f[2],Sc[3]=f[3],Sc[4]=f[4],Sc[5]=f[5],Sc[6]=f[6],Sc[7]=f[7],Sc[8]=f[8],Sc[9]=f[9],Sc[10]=f[10],Sc[11]=f[11],Sc[12]=f[12],Sc[13]=f[13],Sc[14]=f[14],
Sc[15]=f[15],Sc));f=a.dim1C;Z.uniformMatrix4fv(pa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(md[0]=f[0],md[1]=f[1],md[2]=f[2],md[3]=f[3],md[4]=f[4],md[5]=f[5],md[6]=f[6],md[7]=f[7],md[8]=f[8],md[9]=f[9],md[10]=f[10],md[11]=f[11],md[12]=f[12],md[13]=f[13],md[14]=f[14],md[15]=f[15],md));f=a.dim0D;Z.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Tb[0]=f[0],Tb[1]=f[1],Tb[2]=f[2],Tb[3]=f[3],Tb[4]=f[4],Tb[5]=f[5],Tb[6]=f[6],Tb[7]=f[7],Tb[8]=f[8],Tb[9]=f[9],
Tb[10]=f[10],Tb[11]=f[11],Tb[12]=f[12],Tb[13]=f[13],Tb[14]=f[14],Tb[15]=f[15],Tb));f=a.dim1D;Z.uniformMatrix4fv(K.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(yc[0]=f[0],yc[1]=f[1],yc[2]=f[2],yc[3]=f[3],yc[4]=f[4],yc[5]=f[5],yc[6]=f[6],yc[7]=f[7],yc[8]=f[8],yc[9]=f[9],yc[10]=f[10],yc[11]=f[11],yc[12]=f[12],yc[13]=f[13],yc[14]=f[14],yc[15]=f[15],yc));f=a.loA;Z.uniformMatrix4fv(Ba.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(uc[0]=f[0],uc[1]=f[1],uc[2]=f[2],uc[3]=f[3],uc[4]=
f[4],uc[5]=f[5],uc[6]=f[6],uc[7]=f[7],uc[8]=f[8],uc[9]=f[9],uc[10]=f[10],uc[11]=f[11],uc[12]=f[12],uc[13]=f[13],uc[14]=f[14],uc[15]=f[15],uc));f=a.hiA;Z.uniformMatrix4fv(da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(zb[0]=f[0],zb[1]=f[1],zb[2]=f[2],zb[3]=f[3],zb[4]=f[4],zb[5]=f[5],zb[6]=f[6],zb[7]=f[7],zb[8]=f[8],zb[9]=f[9],zb[10]=f[10],zb[11]=f[11],zb[12]=f[12],zb[13]=f[13],zb[14]=f[14],zb[15]=f[15],zb));f=a.loB;Z.uniformMatrix4fv(va.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(xc[0]=f[0],xc[1]=f[1],xc[2]=f[2],xc[3]=f[3],xc[4]=f[4],xc[5]=f[5],xc[6]=f[6],xc[7]=f[7],xc[8]=f[8],xc[9]=f[9],xc[10]=f[10],xc[11]=f[11],xc[12]=f[12],xc[13]=f[13],xc[14]=f[14],xc[15]=f[15],xc));f=a.hiB;Z.uniformMatrix4fv(X.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.loC;Z.uniformMatrix4fv(ca.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],Lc[8]=f[8],Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.hiC;Z.uniformMatrix4fv(ma.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(lc[0]=f[0],lc[1]=f[1],lc[2]=f[2],lc[3]=f[3],lc[4]=f[4],lc[5]=f[5],lc[6]=f[6],lc[7]=f[7],lc[8]=f[8],lc[9]=f[9],lc[10]=f[10],lc[11]=f[11],lc[12]=f[12],lc[13]=f[13],lc[14]=
f[14],lc[15]=f[15],lc));f=a.loD;Z.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Ic[0]=f[0],Ic[1]=f[1],Ic[2]=f[2],Ic[3]=f[3],Ic[4]=f[4],Ic[5]=f[5],Ic[6]=f[6],Ic[7]=f[7],Ic[8]=f[8],Ic[9]=f[9],Ic[10]=f[10],Ic[11]=f[11],Ic[12]=f[12],Ic[13]=f[13],Ic[14]=f[14],Ic[15]=f[15],Ic));f=a.hiD;Z.uniformMatrix4fv(ga.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(hd[0]=f[0],hd[1]=f[1],hd[2]=f[2],hd[3]=f[3],hd[4]=f[4],hd[5]=f[5],hd[6]=f[6],hd[7]=f[7],hd[8]=f[8],hd[9]=f[9],
hd[10]=f[10],hd[11]=f[11],hd[12]=f[12],hd[13]=f[13],hd[14]=f[14],hd[15]=f[15],hd));f=a.resolution;Z.uniform2f(qa.location,f[0],f[1]);f=a.viewBoxPos;Z.uniform2f(ya.location,f[0],f[1]);f=a.viewBoxSize;Z.uniform2f(wa.location,f[0],f[1]);Z.uniform1f(ja.location,a.maskHeight);Z.uniform1f(L.location,a.drwLayer);f=a.contextColor;Z.uniform4f(T.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;Z.uniform1i(na.location,f.bind());Z.uniform1i(Fa.location,
D.bind());(z=Ia.elements)?Z.bindBuffer(34963,z.buffer.buffer):bc.currentVAO&&(z=Ja.getElements(bc.currentVAO.elements))&&Z.bindBuffer(34963,z.buffer.buffer);G=a.offset;if(a=a.count)z?Z.drawElements(1,a,z.type,G<<(z.type-5121>>1)):Z.drawArrays(1,G,a),ta.dirty=!0,bc.setVAO(null),Y.viewportWidth=d,Y.viewportHeight=Ea,ta.profile=y,f.unbind(),D.unbind()},scope:function(d,a,C){var D,ha,O,fa,K,W,sa,za,xa,Pa,Fa,L,P,Xb,N,X,T,ca,qa,aa,ia,R,ua,Q,da,ya,wa,Z,ra,ga,va,U,ja,Ua,V,Aa,Ca,na,Da,ma,Fb,pa,Ba,lb,Ja,oa,
Oa,pb,ec,yc,Sc,Tb,pc,oc,zb,Bb,Bd,Ee,mc,bc,ce,qc,fb,Wa,Xa,Jc,Ue,md,lc,bb,ib,Hc,le,gd,Jd,Oc,uc,Yb,xc,Ad,rd,Ic,Ec,Lc,$d,pd,Ae,Td,Kb,yd,Pc,Qe,cd,hd,Nd,Dd,De,Pd,oe,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,
rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=d.viewportHeight;bd.width=d.viewportWidth;bd.x=d.viewportX;bd.y=d.viewportY;D=bd.x|0;ha=bd.y|0;O="width"in bd?bd.width|0:Y.framebufferWidth-D;fa="height"in bd?bd.height|0:Y.framebufferHeight-ha;K=Y.viewportWidth;Y.viewportWidth=O;W=Y.viewportHeight;Y.viewportHeight=fa;sa=
Ed[0];Ed[0]=D;za=Ed[1];Ed[1]=ha;xa=Ed[2];Ed[2]=O;Pa=Ed[3];Ed[3]=fa;Fa=Qb[0];Qb[0]=0;L=Qb[1];Qb[1]=0;P=Qb[2];Qb[2]=0;Xb=Qb[3];Qb[3]=0;N=Gc.blend_enable;Gc.blend_enable=!1;X=Id[0];Id[0]=32774;T=Id[1];Id[1]=32774;ca=Sd[0];Sd[0]=770;qa=Sd[1];Sd[1]=771;aa=Sd[2];Sd[2]=1;ia=Sd[3];Sd[3]=1;R=Gc.cull_enable;Gc.cull_enable=!0;ua=Gc.cull_face;Gc.cull_face=1029;Q=Gc.depth_enable;Gc.depth_enable=!0;da=Gc.depth_func;Gc.depth_func=513;ya=Gc.depth_mask;Gc.depth_mask=!0;wa=se[0];se[0]=0;Z=se[1];se[1]=1;ra=Gc.dither;
Gc.dither=!1;ga=Gc.lineWidth;Gc.lineWidth=2;td.height=d.scissorHeight;td.width=d.scissorWidth;td.x=d.scissorX;td.y=d.scissorY;va=td.x|0;U=td.y|0;ja="width"in td?td.width|0:Y.framebufferWidth-va;Ua="height"in td?td.height|0:Y.framebufferHeight-U;V=Be[0];Be[0]=va;Aa=Be[1];Be[1]=U;Ca=Be[2];Be[2]=ja;na=Be[3];Be[3]=Ua;Da=Gc.scissor_enable;Gc.scissor_enable=!0;ma=ta.profile;ta.profile=!1;Fb=d.offset;pa=Ia.offset;Ia.offset=Fb;Ba=d.count;lb=Ia.count;Ia.count=Ba;Ja=Ia.primitive;Ia.primitive=1;oa=d.contextColor;
Oa=Ga[24];Ga[24]=oa;pb=d.dim0A;ec=Ga[3];Ga[3]=pb;yc=d.dim0B;Sc=Ga[5];Ga[5]=yc;Tb=d.dim0C;pc=Ga[7];Ga[7]=Tb;oc=d.dim0D;zb=Ga[9];Ga[9]=oc;Bb=d.dim1A;Bd=Ga[4];Ga[4]=Bb;Ee=d.dim1B;mc=Ga[6];Ga[6]=Ee;bc=d.dim1C;ce=Ga[8];Ga[8]=bc;qc=d.dim1D;fb=Ga[10];Ga[10]=qc;Wa=d.drwLayer;Xa=Ga[23];Ga[23]=Wa;Jc=d.hiA;Ue=Ga[12];Ga[12]=Jc;md=d.hiB;lc=Ga[14];Ga[14]=md;bb=d.hiC;ib=Ga[16];Ga[16]=bb;Hc=d.hiD;le=Ga[18];Ga[18]=Hc;gd=d.loA;Jd=Ga[11];Ga[11]=gd;Oc=d.loB;uc=Ga[13];Ga[13]=Oc;Yb=d.loC;xc=Ga[15];Ga[15]=Yb;Ad=d.loD;rd=
Ga[17];Ga[17]=Ad;Ic=d.maskHeight;Ec=Ga[22];Ga[22]=Ic;Lc=d.maskTexture;$d=Ga[25];Ga[25]=Lc;pd=Ga[26];Ga[26]=f;Ae=d.resolution;Td=Ga[19];Ga[19]=Ae;Kb=d.viewBoxPos;yd=Ga[20];Ga[20]=Kb;Pc=d.viewBoxSize;Qe=Ga[21];Ga[21]=Pc;cd=y.buffer;y.buffer=w;hd=y.divisor;y.divisor=0;Nd=y.normalized;y.normalized=!1;Dd=y.offset;y.offset=0;De=y.size;y.size=0;Pd=y.state;y.state=1;oe=y.stride;y.stride=0;ae=y.type;y.type=w.dtype;Ud=y.w;y.w=0;Md=y.x;y.x=0;Kd=y.y;y.y=0;qd=y.z;y.z=0;Wc=G.buffer;G.buffer=r;wd=G.divisor;G.divisor=
0;ud=G.normalized;G.normalized=!1;ld=G.offset;G.offset=0;xd=G.size;G.size=0;Gd=G.state;G.state=1;Hd=G.stride;G.stride=0;je=G.type;G.type=r.dtype;me=G.w;G.w=0;ve=G.x;G.x=0;ne=G.y;G.y=0;ke=G.z;G.z=0;ie=t.buffer;t.buffer=q;we=t.divisor;t.divisor=0;fe=t.normalized;t.normalized=!1;qe=t.offset;t.offset=0;Rc=t.size;t.size=0;id=t.state;t.state=1;xe=t.stride;t.stride=0;te=t.type;t.type=q.dtype;Qd=t.w;t.w=0;Vd=t.x;t.x=0;Wd=t.y;t.y=0;Xd=t.z;t.z=0;re=I.buffer;I.buffer=m;Ce=I.divisor;I.divisor=0;Ge=I.normalized;
I.normalized=!1;ue=I.offset;I.offset=0;Ve=I.size;I.size=0;We=I.state;I.state=1;Re=I.stride;I.stride=0;ye=I.type;I.type=m.dtype;Je=I.w;I.w=0;Le=I.x;I.x=0;Me=I.y;I.y=0;Ne=I.z;I.z=0;Ke=S.buffer;S.buffer=b;Rd=S.divisor;S.divisor=0;be=S.normalized;S.normalized=!1;ee=S.offset;S.offset=0;ge=S.size;S.size=0;Oe=S.state;S.state=1;Ld=S.stride;S.stride=0;Yd=S.type;S.type=b.dtype;He=S.w;S.w=0;Pe=S.x;S.x=0;df=S.y;S.y=0;cf=S.z;S.z=0;Xe=H.buffer;H.buffer=g;Se=H.divisor;H.divisor=0;bf=H.normalized;H.normalized=!1;
af=H.offset;H.offset=0;Ye=H.size;H.size=0;Ze=H.state;H.state=1;Zd=H.stride;H.stride=0;de=H.type;H.type=g.dtype;$e=H.w;H.w=0;kf=H.x;H.x=0;of=H.y;H.y=0;gf=H.z;H.z=0;lf=A.buffer;A.buffer=c;mf=A.divisor;A.divisor=0;nf=A.normalized;A.normalized=!1;sf=A.offset;A.offset=0;pf=A.size;A.size=0;tf=A.state;A.state=1;Cf=A.stride;A.stride=0;Df=A.type;A.type=c.dtype;Te=A.w;A.w=0;Ie=A.x;A.x=0;qf=A.y;A.y=0;rf=A.z;A.z=0;Ef=x.buffer;x.buffer=h;Hf=x.divisor;x.divisor=0;Bf=x.normalized;x.normalized=!1;Ff=x.offset;x.offset=
0;Gf=x.size;x.size=0;xf=x.state;x.state=1;yf=x.stride;x.stride=0;wf=x.type;x.type=h.dtype;zf=x.w;x.w=0;Af=x.x;x.x=0;Jf=x.y;x.y=0;Kf=x.z;x.z=0;Lf=J.buffer;J.buffer=B;Mf=J.divisor;J.divisor=0;uf=J.normalized;J.normalized=!1;Rf=J.offset;J.offset=0;If=J.size;J.size=0;vf=J.state;J.state=1;dg=J.stride;J.stride=0;Sf=J.type;J.type=B.dtype;Tf=J.w;J.w=0;qg=J.x;J.x=0;hf=J.y;J.y=0;ef=J.z;J.z=0;Nf=F.buffer;F.buffer=v;Of=F.divisor;F.divisor=0;eg=F.normalized;F.normalized=!1;fg=F.offset;F.offset=0;gg=F.size;F.size=
0;hg=F.state;F.state=1;ig=F.stride;F.stride=0;Wf=F.type;F.type=v.dtype;Uf=F.w;F.w=0;Xf=F.x;F.x=0;Yf=F.y;F.y=0;Zf=F.z;F.z=0;jg=E.buffer;E.buffer=e;rg=E.divisor;E.divisor=0;sg=E.normalized;E.normalized=!1;tg=E.offset;E.offset=0;ug=E.size;E.size=0;vg=E.state;E.state=1;wg=E.stride;E.stride=0;xg=E.type;E.type=e.dtype;yg=E.w;E.w=0;zg=E.x;E.x=0;Ag=E.y;E.y=0;Bg=E.z;E.z=0;jf=ea.buffer;ea.buffer=l;ff=ea.divisor;ea.divisor=0;Pf=ea.normalized;ea.normalized=!1;Qf=ea.offset;ea.offset=0;kg=ea.size;ea.size=0;lg=
ea.state;ea.state=1;mg=ea.stride;ea.stride=0;ng=ea.type;ea.type=l.dtype;og=ea.w;ea.w=0;$f=ea.x;ea.x=0;Vf=ea.y;ea.y=0;ag=ea.z;ea.z=0;bg=z.buffer;z.buffer=p;cg=z.divisor;z.divisor=0;pg=z.normalized;z.normalized=!1;Cg=z.offset;z.offset=0;Dg=z.size;z.size=0;Eg=z.state;z.state=1;Fg=z.stride;z.stride=0;Gg=z.type;z.type=p.dtype;Hg=z.w;z.w=0;Ig=z.x;z.x=0;Jg=z.y;z.y=0;Kg=z.z;z.z=0;Lg=ba.buffer;ba.buffer=n;Mg=ba.divisor;ba.divisor=0;Ng=ba.normalized;ba.normalized=!1;Og=ba.offset;ba.offset=0;Pg=ba.size;ba.size=
0;Qg=ba.state;ba.state=1;Rg=ba.stride;ba.stride=0;Sg=ba.type;ba.type=n.dtype;Tg=ba.w;ba.w=0;Ug=ba.x;ba.x=0;Vg=ba.y;ba.y=0;Wg=ba.z;ba.z=0;Xg=M.buffer;M.buffer=k;Yg=M.divisor;M.divisor=0;Zg=M.normalized;M.normalized=!1;$g=M.offset;M.offset=0;ah=M.size;M.size=0;bh=M.state;M.state=1;ch=M.stride;M.stride=0;dh=M.type;M.type=k.dtype;eh=M.w;M.w=0;fh=M.x;M.x=0;gh=M.y;M.y=0;hh=M.z;M.z=0;ih=la.buffer;la.buffer=u;jh=la.divisor;la.divisor=0;kh=la.normalized;la.normalized=!1;lh=la.offset;la.offset=0;mh=la.size;
la.size=0;nh=la.state;la.state=1;oh=la.stride;la.stride=0;ph=la.type;la.type=u.dtype;qh=la.w;la.w=0;rh=la.x;la.x=0;sh=la.y;la.y=0;th=la.z;la.z=0;uh=ac.vert;ac.vert=2;vh=ac.frag;ac.frag=1;ta.dirty=!0;a(Y,d,C);Y.viewportWidth=K;Y.viewportHeight=W;Ed[0]=sa;Ed[1]=za;Ed[2]=xa;Ed[3]=Pa;Qb[0]=Fa;Qb[1]=L;Qb[2]=P;Qb[3]=Xb;Gc.blend_enable=N;Id[0]=X;Id[1]=T;Sd[0]=ca;Sd[1]=qa;Sd[2]=aa;Sd[3]=ia;Gc.cull_enable=R;Gc.cull_face=ua;Gc.depth_enable=Q;Gc.depth_func=da;Gc.depth_mask=ya;se[0]=wa;se[1]=Z;Gc.dither=ra;Gc.lineWidth=
ga;Be[0]=V;Be[1]=Aa;Be[2]=Ca;Be[3]=na;Gc.scissor_enable=Da;ta.profile=ma;Ia.offset=pa;Ia.count=lb;Ia.primitive=Ja;Ga[24]=Oa;Ga[3]=ec;Ga[5]=Sc;Ga[7]=pc;Ga[9]=zb;Ga[4]=Bd;Ga[6]=mc;Ga[8]=ce;Ga[10]=fb;Ga[23]=Xa;Ga[12]=Ue;Ga[14]=lc;Ga[16]=ib;Ga[18]=le;Ga[11]=Jd;Ga[13]=uc;Ga[15]=xc;Ga[17]=rd;Ga[22]=Ec;Ga[25]=$d;Ga[26]=pd;Ga[19]=Td;Ga[20]=yd;Ga[21]=Qe;y.buffer=cd;y.divisor=hd;y.normalized=Nd;y.offset=Dd;y.size=De;y.state=Pd;y.stride=oe;y.type=ae;y.w=Ud;y.x=Md;y.y=Kd;y.z=qd;G.buffer=Wc;G.divisor=wd;G.normalized=
ud;G.offset=ld;G.size=xd;G.state=Gd;G.stride=Hd;G.type=je;G.w=me;G.x=ve;G.y=ne;G.z=ke;t.buffer=ie;t.divisor=we;t.normalized=fe;t.offset=qe;t.size=Rc;t.state=id;t.stride=xe;t.type=te;t.w=Qd;t.x=Vd;t.y=Wd;t.z=Xd;I.buffer=re;I.divisor=Ce;I.normalized=Ge;I.offset=ue;I.size=Ve;I.state=We;I.stride=Re;I.type=ye;I.w=Je;I.x=Le;I.y=Me;I.z=Ne;S.buffer=Ke;S.divisor=Rd;S.normalized=be;S.offset=ee;S.size=ge;S.state=Oe;S.stride=Ld;S.type=Yd;S.w=He;S.x=Pe;S.y=df;S.z=cf;H.buffer=Xe;H.divisor=Se;H.normalized=bf;H.offset=
af;H.size=Ye;H.state=Ze;H.stride=Zd;H.type=de;H.w=$e;H.x=kf;H.y=of;H.z=gf;A.buffer=lf;A.divisor=mf;A.normalized=nf;A.offset=sf;A.size=pf;A.state=tf;A.stride=Cf;A.type=Df;A.w=Te;A.x=Ie;A.y=qf;A.z=rf;x.buffer=Ef;x.divisor=Hf;x.normalized=Bf;x.offset=Ff;x.size=Gf;x.state=xf;x.stride=yf;x.type=wf;x.w=zf;x.x=Af;x.y=Jf;x.z=Kf;J.buffer=Lf;J.divisor=Mf;J.normalized=uf;J.offset=Rf;J.size=If;J.state=vf;J.stride=dg;J.type=Sf;J.w=Tf;J.x=qg;J.y=hf;J.z=ef;F.buffer=Nf;F.divisor=Of;F.normalized=eg;F.offset=fg;F.size=
gg;F.state=hg;F.stride=ig;F.type=Wf;F.w=Uf;F.x=Xf;F.y=Yf;F.z=Zf;E.buffer=jg;E.divisor=rg;E.normalized=sg;E.offset=tg;E.size=ug;E.state=vg;E.stride=wg;E.type=xg;E.w=yg;E.x=zg;E.y=Ag;E.z=Bg;ea.buffer=jf;ea.divisor=ff;ea.normalized=Pf;ea.offset=Qf;ea.size=kg;ea.state=lg;ea.stride=mg;ea.type=ng;ea.w=og;ea.x=$f;ea.y=Vf;ea.z=ag;z.buffer=bg;z.divisor=cg;z.normalized=pg;z.offset=Cg;z.size=Dg;z.state=Eg;z.stride=Fg;z.type=Gg;z.w=Hg;z.x=Ig;z.y=Jg;z.z=Kg;ba.buffer=Lg;ba.divisor=Mg;ba.normalized=Ng;ba.offset=
Og;ba.size=Pg;ba.state=Qg;ba.stride=Rg;ba.type=Sg;ba.w=Tg;ba.x=Ug;ba.y=Vg;ba.z=Wg;M.buffer=Xg;M.divisor=Yg;M.normalized=Zg;M.offset=$g;M.size=ah;M.state=bh;M.stride=ch;M.type=dh;M.w=eh;M.x=fh;M.y=gh;M.z=hh;la.buffer=ih;la.divisor=jh;la.normalized=kh;la.offset=lh;la.size=mh;la.state=nh;la.stride=oh;la.type=ph;la.w=qh;la.x=rh;la.y=sh;la.z=th;ac.vert=uh;ac.frag=vh;ta.dirty=!0}}},$1:function(a,d){var f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,Ea,y,G,t,I,S,H,A,x,J,F,E;f=a.attributes;r=a.current;q=a.framebuffer;
m=a.gl;b=a.next;g=a.vao;c=b.blend_color;h=r.blend_color;B=b.blend_equation;v=r.blend_equation;e=b.blend_func;l=r.blend_func;p=b.colorMask;n=r.colorMask;k=b.depth_range;u=r.depth_range;w=b.polygonOffset_offset;D=r.polygonOffset_offset;Ea=b.sample_coverage;y=r.sample_coverage;G=b.scissor_box;t=r.scissor_box;I=b.stencil_func;S=r.stencil_func;H=b.stencil_opBack;A=r.stencil_opBack;x=b.stencil_opFront;J=r.stencil_opFront;F=b.viewport;E=r.viewport;return{poll:function(){var d,a,g,f,C,oa,U,V,T,P,N,O,Q,R,
ra,pa,K,L,da,X,ma,ga;r.dirty=!1;a=b.blend_enable;g=b.cull_enable;f=b.depth_enable;C=b.dither;oa=b.polygonOffset_enable;U=b.sample_alpha;V=b.sample_enable;T=b.scissor_enable;P=b.stencil_enable;N=b.cull_face;O=r.cull_face;Q=b.depth_func;R=r.depth_func;ra=b.depth_mask;pa=r.depth_mask;K=b.frontFace;L=r.frontFace;da=b.lineWidth;X=r.lineWidth;ma=b.stencil_mask;ga=r.stencil_mask;d=q.next;d!==q.cur&&(d?m.bindFramebuffer(36160,d.framebuffer):m.bindFramebuffer(36160,null),q.cur=d);a!==r.blend_enable&&(a?m.enable(3042):
m.disable(3042),r.blend_enable=a);g!==r.cull_enable&&(g?m.enable(2884):m.disable(2884),r.cull_enable=g);f!==r.depth_enable&&(f?m.enable(2929):m.disable(2929),r.depth_enable=f);C!==r.dither&&(C?m.enable(3024):m.disable(3024),r.dither=C);oa!==r.polygonOffset_enable&&(oa?m.enable(32823):m.disable(32823),r.polygonOffset_enable=oa);U!==r.sample_alpha&&(U?m.enable(32926):m.disable(32926),r.sample_alpha=U);V!==r.sample_enable&&(V?m.enable(32928):m.disable(32928),r.sample_enable=V);T!==r.scissor_enable&&
(T?m.enable(3089):m.disable(3089),r.scissor_enable=T);P!==r.stencil_enable&&(P?m.enable(2960):m.disable(2960),r.stencil_enable=P);if(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3])m.blendColor(c[0],c[1],c[2],c[3]),h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3];if(B[0]!==v[0]||B[1]!==v[1])m.blendEquationSeparate(B[0],B[1]),v[0]=B[0],v[1]=B[1];if(e[0]!==l[0]||e[1]!==l[1]||e[2]!==l[2]||e[3]!==l[3])m.blendFuncSeparate(e[0],e[1],e[2],e[3]),l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=e[3];if(p[0]!==n[0]||p[1]!==n[1]||
p[2]!==n[2]||p[3]!==n[3])m.colorMask(p[0],p[1],p[2],p[3]),n[0]=p[0],n[1]=p[1],n[2]=p[2],n[3]=p[3];N!==O&&(m.cullFace(N),r.cull_face=N);Q!==R&&(m.depthFunc(Q),r.depth_func=Q);ra!==pa&&(m.depthMask(ra),r.depth_mask=ra);if(k[0]!==u[0]||k[1]!==u[1])m.depthRange(k[0],k[1]),u[0]=k[0],u[1]=k[1];K!==L&&(m.frontFace(K),r.frontFace=K);da!==X&&(m.lineWidth(da),r.lineWidth=da);if(w[0]!==D[0]||w[1]!==D[1])m.polygonOffset(w[0],w[1]),D[0]=w[0],D[1]=w[1];if(Ea[0]!==y[0]||Ea[1]!==y[1])m.sampleCoverage(Ea[0],Ea[1]),
y[0]=Ea[0],y[1]=Ea[1];if(G[0]!==t[0]||G[1]!==t[1]||G[2]!==t[2]||G[3]!==t[3])m.scissor(G[0],G[1],G[2],G[3]),t[0]=G[0],t[1]=G[1],t[2]=G[2],t[3]=G[3];if(I[0]!==S[0]||I[1]!==S[1]||I[2]!==S[2])m.stencilFunc(I[0],I[1],I[2]),S[0]=I[0],S[1]=I[1],S[2]=I[2];ma!==ga&&(m.stencilMask(ma),r.stencil_mask=ma);if(H[0]!==A[0]||H[1]!==A[1]||H[2]!==A[2]||H[3]!==A[3])m.stencilOpSeparate(H[0],H[1],H[2],H[3]),A[0]=H[0],A[1]=H[1],A[2]=H[2],A[3]=H[3];if(x[0]!==J[0]||x[1]!==J[1]||x[2]!==J[2]||x[3]!==J[3])m.stencilOpSeparate(x[0],
x[1],x[2],x[3]),J[0]=x[0],J[1]=x[1],J[2]=x[2],J[3]=x[3];if(F[0]!==E[0]||F[1]!==E[1]||F[2]!==E[2]||F[3]!==E[3])m.viewport(F[0],F[1],F[2],F[3]),E[0]=F[0],E[1]=F[1],E[2]=F[2],E[3]=F[3]},refresh:function(){var a,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa;r.dirty=!1;z=b.blend_enable;ba=b.cull_enable;M=b.depth_enable;la=b.dither;oa=b.polygonOffset_enable;U=b.sample_alpha;V=b.sample_enable;T=b.scissor_enable;P=b.stencil_enable;N=b.cull_face;O=b.depth_func;Q=b.depth_mask;R=b.frontFace;ra=b.lineWidth;pa=b.stencil_mask;
(a=q.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);q.cur=a;a=f[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(0,a.divisor);a=f[1];a.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,
a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(1,a.divisor);a=f[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(2,a.divisor);a=f[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(3,a.divisor);a=f[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(4,a.divisor);a=f[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,
a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(5,a.divisor);a=f[6];a.buffer?(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(6,a.divisor);a=f[7];a.buffer?
(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(7,a.divisor);a=f[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(8,
a.divisor);a=f[9];a.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(9,a.divisor);a=f[10];a.buffer?(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,
a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(10,a.divisor);a=f[11];a.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(11,a.divisor);a=f[12];a.buffer?(m.enableVertexAttribArray(12),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):
(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(12,a.divisor);a=f[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(13,a.divisor);a=f[14];a.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(14,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(14,a.divisor);a=f[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(15,a.divisor);g.currentVAO=null;g.setVAO(g.targetVAO);z?m.enable(3042):
m.disable(3042);r.blend_enable=z;ba?m.enable(2884):m.disable(2884);r.cull_enable=ba;M?m.enable(2929):m.disable(2929);r.depth_enable=M;la?m.enable(3024):m.disable(3024);r.dither=la;oa?m.enable(32823):m.disable(32823);r.polygonOffset_enable=oa;U?m.enable(32926):m.disable(32926);r.sample_alpha=U;V?m.enable(32928):m.disable(32928);r.sample_enable=V;T?m.enable(3089):m.disable(3089);r.scissor_enable=T;P?m.enable(2960):m.disable(2960);r.stencil_enable=P;m.blendColor(c[0],c[1],c[2],c[3]);h[0]=c[0];h[1]=c[1];
h[2]=c[2];h[3]=c[3];m.blendEquationSeparate(B[0],B[1]);v[0]=B[0];v[1]=B[1];m.blendFuncSeparate(e[0],e[1],e[2],e[3]);l[0]=e[0];l[1]=e[1];l[2]=e[2];l[3]=e[3];m.colorMask(p[0],p[1],p[2],p[3]);n[0]=p[0];n[1]=p[1];n[2]=p[2];n[3]=p[3];m.cullFace(N);r.cull_face=N;m.depthFunc(O);r.depth_func=O;m.depthMask(Q);r.depth_mask=Q;m.depthRange(k[0],k[1]);u[0]=k[0];u[1]=k[1];m.frontFace(R);r.frontFace=R;m.lineWidth(ra);r.lineWidth=ra;m.polygonOffset(w[0],w[1]);D[0]=w[0];D[1]=w[1];m.sampleCoverage(Ea[0],Ea[1]);y[0]=
Ea[0];y[1]=Ea[1];m.scissor(G[0],G[1],G[2],G[3]);t[0]=G[0];t[1]=G[1];t[2]=G[2];t[3]=G[3];m.stencilFunc(I[0],I[1],I[2]);S[0]=I[0];S[1]=I[1];S[2]=I[2];m.stencilMask(pa);r.stencil_mask=pa;m.stencilOpSeparate(H[0],H[1],H[2],H[3]);A[0]=H[0];A[1]=H[1];A[2]=H[2];A[3]=H[3];m.stencilOpSeparate(x[0],x[1],x[2],x[3]);J[0]=x[0];J[1]=x[1];J[2]=x[2];J[3]=x[3];m.viewport(F[0],F[1],F[2],F[3]);E[0]=F[0];E[1]=F[1];E[2]=F[2];E[3]=F[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,
d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,Ea,y,G,t,I,S,H,A,x,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa){var K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca,lb,Fb,aa,W,xa,Fa,qa,ya,wa,ia,Y,ta,Ia,Ja,Oa,Z,Gc,ac,Ga,bc,Qb;K=a.attributes;L=a.buffer;da=a.context;X=a.current;ma=a.draw;ga=a.elements;Ba=a.extensions;va=a.framebuffer;ca=a.gl;Da=a.isBufferArgs;ja=a.next;na=a.shader;Aa=a.uniforms;Pa=a.vao;za=ja.blend_color;Xb=X.blend_color;Ua=ja.blend_equation;ha=X.blend_equation;fa=ja.blend_func;
sa=X.blend_func;ua=ja.colorMask;Ca=X.colorMask;lb=ja.depth_range;Fb=X.depth_range;aa=ja.polygonOffset_offset;W=X.polygonOffset_offset;xa=ja.sample_coverage;Fa=X.sample_coverage;qa=ja.scissor_box;ya=X.scissor_box;wa=ja.stencil_func;ia=X.stencil_func;Y=ja.stencil_opBack;ta=X.stencil_opBack;Ia=ja.stencil_opFront;Ja=X.stencil_opFront;Oa=ja.viewport;Z=X.viewport;Gc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ac={};ac.buffer=f;ac.divisor=1;Ga={};Ga.buffer=
r;Ga.divisor=1;bc={};bc.buffer=q;bc.divisor=1;Qb={};Qb.buffer=m;Qb.divisor=1;return{batch:function(c,b){var a,h,g,k,p,n;a=va.next;a!==va.cur&&(a?ca.bindFramebuffer(36160,a.framebuffer):ca.bindFramebuffer(36160,null),va.cur=a);if(X.dirty){var f,u,r,m,w,C,y,B,q,D,fa,G,Ea,za,t,H,I,qa,S,ob,Ua,Aa,na,Oa,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd;f=ja.dither;f!==X.dither&&(f?ca.enable(3024):ca.disable(3024),X.dither=f);u=ja.depth_func;u!==X.depth_func&&(ca.depthFunc(u),X.depth_func=u);r=lb[0];m=lb[1];if(r!==Fb[0]||m!==
Fb[1])ca.depthRange(r,m),Fb[0]=r,Fb[1]=m;w=ja.depth_mask;w!==X.depth_mask&&(ca.depthMask(w),X.depth_mask=w);C=ua[0];y=ua[1];B=ua[2];q=ua[3];if(C!==Ca[0]||y!==Ca[1]||B!==Ca[2]||q!==Ca[3])ca.colorMask(C,y,B,q),Ca[0]=C,Ca[1]=y,Ca[2]=B,Ca[3]=q;D=ja.cull_enable;D!==X.cull_enable&&(D?ca.enable(2884):ca.disable(2884),X.cull_enable=D);fa=ja.cull_face;fa!==X.cull_face&&(ca.cullFace(fa),X.cull_face=fa);G=ja.frontFace;G!==X.frontFace&&(ca.frontFace(G),X.frontFace=G);Ea=ja.lineWidth;Ea!==X.lineWidth&&(ca.lineWidth(Ea),
X.lineWidth=Ea);za=ja.polygonOffset_enable;za!==X.polygonOffset_enable&&(za?ca.enable(32823):ca.disable(32823),X.polygonOffset_enable=za);t=aa[0];H=aa[1];if(t!==W[0]||H!==W[1])ca.polygonOffset(t,H),W[0]=t,W[1]=H;I=ja.sample_alpha;I!==X.sample_alpha&&(I?ca.enable(32926):ca.disable(32926),X.sample_alpha=I);qa=ja.sample_enable;qa!==X.sample_enable&&(qa?ca.enable(32928):ca.disable(32928),X.sample_enable=qa);S=xa[0];ob=xa[1];if(S!==Fa[0]||ob!==Fa[1])ca.sampleCoverage(S,ob),Fa[0]=S,Fa[1]=ob;Ua=ja.stencil_enable;
Ua!==X.stencil_enable&&(Ua?ca.enable(2960):ca.disable(2960),X.stencil_enable=Ua);Aa=ja.stencil_mask;Aa!==X.stencil_mask&&(ca.stencilMask(Aa),X.stencil_mask=Aa);na=wa[0];Oa=wa[1];yc=wa[2];if(na!==ia[0]||Oa!==ia[1]||yc!==ia[2])ca.stencilFunc(na,Oa,yc),ia[0]=na,ia[1]=Oa,ia[2]=yc;uc=Ia[0];zb=Ia[1];xc=Ia[2];Bb=Ia[3];if(uc!==Ja[0]||zb!==Ja[1]||xc!==Ja[2]||Bb!==Ja[3])ca.stencilOpSeparate(uc,zb,xc,Bb),Ja[0]=uc,Ja[1]=zb,Ja[2]=xc,Ja[3]=Bb;Lc=Y[0];lc=Y[1];Ic=Y[2];hd=Y[3];if(Lc!==ta[0]||lc!==ta[1]||Ic!==ta[2]||
hd!==ta[3])ca.stencilOpSeparate(Lc,lc,Ic,hd),ta[0]=Lc,ta[1]=lc,ta[2]=Ic,ta[3]=hd}ca.blendColor(0,0,0,0);Xb[0]=0;Xb[1]=0;Xb[2]=0;Xb[3]=0;ca.enable(3042);X.blend_enable=!0;ca.blendEquationSeparate(32774,32774);ha[0]=32774;ha[1]=32774;ca.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;ca.disable(2929);X.depth_enable=!1;ca.enable(3089);X.scissor_enable=!0;if(h=X.profile)g=performance.now(),d.count+=b;ca.useProgram(A.program);k=Ba.angle_instanced_arrays;var cd,Ec,ec,Jc,oc,qc,mc,
pc;Pa.setVAO(null);cd=la.location;Ec=K[cd];Ec.buffer||ca.enableVertexAttribArray(cd);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==v||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(cd,2,5126,!1,24,0),Ec.type=5126,Ec.size=2,Ec.buffer=v,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(k.vertexAttribDivisorANGLE(cd,0),Ec.divisor=0);ec=U.location;Jc=K[ec];Jc.buffer||ca.enableVertexAttribArray(ec);if(5126!==Jc.type||2!==Jc.size||Jc.buffer!==
e||!1!==Jc.normalized||8!==Jc.offset||24!==Jc.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(ec,2,5126,!1,24,8),Jc.type=5126,Jc.size=2,Jc.buffer=e,Jc.normalized=!1,Jc.offset=8,Jc.stride=24;0!==Jc.divisor&&(k.vertexAttribDivisorANGLE(ec,0),Jc.divisor=0);oc=z.location;qc=K[oc];qc.buffer||ca.enableVertexAttribArray(oc);if(5126!==qc.type||2!==qc.size||qc.buffer!==l||!1!==qc.normalized||16!==qc.offset||24!==qc.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(oc,2,5126,!1,24,16),
qc.type=5126,qc.size=2,qc.buffer=l,qc.normalized=!1,qc.offset=16,qc.stride=24;0!==qc.divisor&&(k.vertexAttribDivisorANGLE(oc,0),qc.divisor=0);(mc=ma.elements)?ca.bindBuffer(34963,mc.buffer.buffer):Pa.currentVAO&&(mc=ga.getElements(Pa.currentVAO.elements))&&ca.bindBuffer(34963,mc.buffer.buffer);pc=ma.offset;for(p=0;p<b;++p){n=c[p];var pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,
fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc;pb=n.viewport;Pc=pb.x|0;Yb=pb.y|0;fb="width"in pb?pb.width|0:da.framebufferWidth-Pc;Kb="height"in pb?pb.height|0:da.framebufferHeight-Yb;Wa=da.viewportWidth;da.viewportWidth=fb;ib=da.viewportHeight;da.viewportHeight=Kb;ca.viewport(Pc,Yb,fb,Kb);Z[0]=Pc;Z[1]=Yb;Z[2]=fb;Z[3]=Kb;Xa=n.viewport;Kc=Xa.x|0;Lb=Xa.y|0;Gb="width"in
Xa?Xa.width|0:da.framebufferWidth-Kc;rc="height"in Xa?Xa.height|0:da.framebufferHeight-Lb;ca.scissor(Kc,Lb,Gb,rc);ya[0]=Kc;ya[1]=Lb;ya[2]=Gb;ya[3]=rc;Mb=x.call(this,da,n,p);bc.offset=Mb;jb=!1;Eb=null;Cb=0;yb=!1;Zb=gb=0;Nb=1;rb=0;Sa=5126;hb=ic=sb=Sb=0;Da(bc)?(jb=!0,Eb=L.createStream(34962,bc),Sa=Eb.dtype):(Eb=L.getBuffer(bc))?Sa=Eb.dtype:"constant"in bc?(Nb=2,"number"===typeof bc.constant?(sb=bc.constant,ic=hb=Sb=0):(sb=0<bc.constant.length?bc.constant[0]:0,ic=1<bc.constant.length?bc.constant[1]:0,
hb=2<bc.constant.length?bc.constant[2]:0,Sb=3<bc.constant.length?bc.constant[3]:0)):(Eb=Da(bc.buffer)?L.createStream(34962,bc.buffer):L.getBuffer(bc.buffer),Sa="type"in bc?Gc[bc.type]:Eb.dtype,yb=!!bc.normalized,Zb=bc.size|0,gb=bc.offset|0,rb=bc.stride|0,Cb=bc.divisor|0);qb=P.location;Ha=K[qb];if(1===Nb){Ha.buffer||ca.enableVertexAttribArray(qb);tb=Zb||2;if(Ha.type!==Sa||Ha.size!==tb||Ha.buffer!==Eb||Ha.normalized!==yb||Ha.offset!==gb||Ha.stride!==rb)ca.bindBuffer(34962,Eb.buffer),ca.vertexAttribPointer(qb,
tb,Sa,yb,rb,gb),Ha.type=Sa,Ha.size=tb,Ha.buffer=Eb,Ha.normalized=yb,Ha.offset=gb,Ha.stride=rb;Ha.divisor!==Cb&&(k.vertexAttribDivisorANGLE(qb,Cb),Ha.divisor=Cb)}else if(Ha.buffer&&(ca.disableVertexAttribArray(qb),Ha.buffer=null),Ha.x!==sb||Ha.y!==ic||Ha.z!==hb||Ha.w!==Sb)ca.vertexAttrib4f(qb,sb,ic,hb,Sb),Ha.x=sb,Ha.y=ic,Ha.z=hb,Ha.w=Sb;Ka=J.call(this,da,n,p);Qb.offset=Ka;db=!1;eb=null;Ma=0;kb=!1;vb=Ya=0;ub=1;Ra=0;Dc=5126;La=Db=Hb=Va=0;Da(Qb)?(db=!0,eb=L.createStream(34962,Qb),Dc=eb.dtype):(eb=L.getBuffer(Qb))?
Dc=eb.dtype:"constant"in Qb?(ub=2,"number"===typeof Qb.constant?(Hb=Qb.constant,Db=La=Va=0):(Hb=0<Qb.constant.length?Qb.constant[0]:0,Db=1<Qb.constant.length?Qb.constant[1]:0,La=2<Qb.constant.length?Qb.constant[2]:0,Va=3<Qb.constant.length?Qb.constant[3]:0)):(eb=Da(Qb.buffer)?L.createStream(34962,Qb.buffer):L.getBuffer(Qb.buffer),Dc="type"in Qb?Gc[Qb.type]:eb.dtype,kb=!!Qb.normalized,vb=Qb.size|0,Ya=Qb.offset|0,Ra=Qb.stride|0,Ma=Qb.divisor|0);zd=N.location;$a=K[zd];if(1===ub){$a.buffer||ca.enableVertexAttribArray(zd);
Ib=vb||2;if($a.type!==Dc||$a.size!==Ib||$a.buffer!==eb||$a.normalized!==kb||$a.offset!==Ya||$a.stride!==Ra)ca.bindBuffer(34962,eb.buffer),ca.vertexAttribPointer(zd,Ib,Dc,kb,Ra,Ya),$a.type=Dc,$a.size=Ib,$a.buffer=eb,$a.normalized=kb,$a.offset=Ya,$a.stride=Ra;$a.divisor!==Ma&&(k.vertexAttribDivisorANGLE(zd,Ma),$a.divisor=Ma)}else if($a.buffer&&(ca.disableVertexAttribArray(zd),$a.buffer=null),$a.x!==Hb||$a.y!==Db||$a.z!==La||$a.w!==Va)ca.vertexAttrib4f(zd,Hb,Db,La,Va),$a.x=Hb,$a.y=Db,$a.z=La,$a.w=Va;
Jb=F.call(this,da,n,p);Ga.offset=Jb;mb=!1;Na=null;$b=0;Qa=!1;xb=wb=0;Ta=1;nb=0;fc=5126;jc=cb=vc=Bc=0;Da(Ga)?(mb=!0,Na=L.createStream(34962,Ga),fc=Na.dtype):(Na=L.getBuffer(Ga))?fc=Na.dtype:"constant"in Ga?(Ta=2,"number"===typeof Ga.constant?(vc=Ga.constant,cb=jc=Bc=0):(vc=0<Ga.constant.length?Ga.constant[0]:0,cb=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,Bc=3<Ga.constant.length?Ga.constant[3]:0)):(Na=Da(Ga.buffer)?L.createStream(34962,Ga.buffer):L.getBuffer(Ga.buffer),
fc="type"in Ga?Gc[Ga.type]:Na.dtype,Qa=!!Ga.normalized,xb=Ga.size|0,wb=Ga.offset|0,nb=Ga.stride|0,$b=Ga.divisor|0);Mc=oa.location;Za=K[Mc];if(1===Ta){Za.buffer||ca.enableVertexAttribArray(Mc);nd=xb||4;if(Za.type!==fc||Za.size!==nd||Za.buffer!==Na||Za.normalized!==Qa||Za.offset!==wb||Za.stride!==nb)ca.bindBuffer(34962,Na.buffer),ca.vertexAttribPointer(Mc,nd,fc,Qa,nb,wb),Za.type=fc,Za.size=nd,Za.buffer=Na,Za.normalized=Qa,Za.offset=wb,Za.stride=nb;Za.divisor!==$b&&(k.vertexAttribDivisorANGLE(Mc,$b),
Za.divisor=$b)}else if(Za.buffer&&(ca.disableVertexAttribArray(Mc),Za.buffer=null),Za.x!==vc||Za.y!==cb||Za.z!==jc||Za.w!==Bc)ca.vertexAttrib4f(Mc,vc,cb,jc,Bc),Za.x=vc,Za.y=cb,Za.z=jc,Za.w=Bc;Ab=E.call(this,da,n,p);ac.offset=Ab;ab=!1;Ub=null;tc=0;Vb=!1;Nc=Ob=0;Pb=1;Od=0;Fc=5126;sd=Yc=Qc=vd=0;Da(ac)?(ab=!0,Ub=L.createStream(34962,ac),Fc=Ub.dtype):(Ub=L.getBuffer(ac))?Fc=Ub.dtype:"constant"in ac?(Pb=2,"number"===typeof ac.constant?(Qc=ac.constant,Yc=sd=vd=0):(Qc=0<ac.constant.length?ac.constant[0]:
0,Yc=1<ac.constant.length?ac.constant[1]:0,sd=2<ac.constant.length?ac.constant[2]:0,vd=3<ac.constant.length?ac.constant[3]:0)):(Ub=Da(ac.buffer)?L.createStream(34962,ac.buffer):L.getBuffer(ac.buffer),Fc="type"in ac?Gc[ac.type]:Ub.dtype,Vb=!!ac.normalized,Nc=ac.size|0,Ob=ac.offset|0,Od=ac.stride|0,tc=ac.divisor|0);nc=M.location;wc=K[nc];if(1===Pb){wc.buffer||ca.enableVertexAttribArray(nc);gc=Nc||4;if(wc.type!==Fc||wc.size!==gc||wc.buffer!==Ub||wc.normalized!==Vb||wc.offset!==Ob||wc.stride!==Od)ca.bindBuffer(34962,
Ub.buffer),ca.vertexAttribPointer(nc,gc,Fc,Vb,Od,Ob),wc.type=Fc,wc.size=gc,wc.buffer=Ub,wc.normalized=Vb,wc.offset=Ob,wc.stride=Od;wc.divisor!==tc&&(k.vertexAttribDivisorANGLE(nc,tc),wc.divisor=tc)}else if(wc.buffer&&(ca.disableVertexAttribArray(nc),wc.buffer=null),wc.x!==Qc||wc.y!==Yc||wc.z!==sd||wc.w!==vd)ca.vertexAttrib4f(nc,Qc,Yc,sd,vd),wc.x=Qc,wc.y=Yc,wc.z=sd,wc.w=vd;bb=ea.call(this,da,n,p);sc=bb[0];Wb=bb[1];hc=bb[2];Cc=bb[3];p&&Rb===sc&&dc===Wb&&zc===hc&&dd===Cc||(Rb=sc,dc=Wb,zc=hc,dd=Cc,ca.uniform4f(pa.location,
sc,Wb,hc,Cc));Tc=n.lineWidth;p&&Uc===Tc||(Uc=Tc,ca.uniform1f(V.location,Tc));Vc=n.capSize;p&&Zc===Vc||(Zc=Vc,ca.uniform1f(ba.location,Vc));od=n.scale;ed=od[0];kc=od[1];p&&$c===ed&&cc===kc||($c=ed,cc=kc,ca.uniform2f(O.location,ed,kc));ad=n.scaleFract;Xc=ad[0];Ac=ad[1];p&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,ca.uniform2f(Q.location,Xc,Ac));Cd=n.translate;ze=Cd[0];kd=Cd[1];p&&pe===ze&&Fe===kd||(pe=ze,Fe=kd,ca.uniform2f(R.location,ze,kd));Fd=n.translateFract;he=Fd[0];Ud=Fd[1];p&&ae===he&&Md===Ud||(ae=he,Md=
Ud,ca.uniform2f(ra.location,he,Ud));Kd=n.opacity;p&&qd===Kd||(qd=Kd,ca.uniform1f(T.location,Kd));Wc=n.count;0<Wc?mc?k.drawElementsInstancedANGLE(4,36,mc.type,pc<<(mc.type-5121>>1),Wc):k.drawArraysInstancedANGLE(4,pc,36,Wc):0>Wc&&(mc?ca.drawElements(4,36,mc.type,pc<<(mc.type-5121>>1)):ca.drawArrays(4,pc,36));da.viewportWidth=Wa;da.viewportHeight=ib;jb&&L.destroyStream(Eb);db&&L.destroyStream(eb);mb&&L.destroyStream(Na);ab&&L.destroyStream(Ub)}X.dirty=!0;Pa.setVAO(null);h&&(d.cpuTime+=performance.now()-
g)},draw:function(a){var k,n,f,u,r,m,w,C,y,q,D,fa,G,Ea,za,A,t,H,I,J,E,qa,F,S,ob,x,Ua,Aa,na,ea,ka,Oa,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b;k=va.next;k!==va.cur&&(k?ca.bindFramebuffer(36160,k.framebuffer):ca.bindFramebuffer(36160,null),va.cur=k);if(X.dirty){var Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,
nc,wc,gc,bb,sc,Rb;Qa=ja.dither;Qa!==X.dither&&(Qa?ca.enable(3024):ca.disable(3024),X.dither=Qa);wb=ja.depth_func;wb!==X.depth_func&&(ca.depthFunc(wb),X.depth_func=wb);xb=lb[0];Ta=lb[1];if(xb!==Fb[0]||Ta!==Fb[1])ca.depthRange(xb,Ta),Fb[0]=xb,Fb[1]=Ta;nb=ja.depth_mask;nb!==X.depth_mask&&(ca.depthMask(nb),X.depth_mask=nb);fc=ua[0];Bc=ua[1];vc=ua[2];cb=ua[3];if(fc!==Ca[0]||Bc!==Ca[1]||vc!==Ca[2]||cb!==Ca[3])ca.colorMask(fc,Bc,vc,cb),Ca[0]=fc,Ca[1]=Bc,Ca[2]=vc,Ca[3]=cb;jc=ja.cull_enable;jc!==X.cull_enable&&
(jc?ca.enable(2884):ca.disable(2884),X.cull_enable=jc);Mc=ja.cull_face;Mc!==X.cull_face&&(ca.cullFace(Mc),X.cull_face=Mc);Za=ja.frontFace;Za!==X.frontFace&&(ca.frontFace(Za),X.frontFace=Za);nd=ja.lineWidth;nd!==X.lineWidth&&(ca.lineWidth(nd),X.lineWidth=nd);Ab=ja.polygonOffset_enable;Ab!==X.polygonOffset_enable&&(Ab?ca.enable(32823):ca.disable(32823),X.polygonOffset_enable=Ab);ab=aa[0];Ub=aa[1];if(ab!==W[0]||Ub!==W[1])ca.polygonOffset(ab,Ub),W[0]=ab,W[1]=Ub;tc=ja.sample_alpha;tc!==X.sample_alpha&&
(tc?ca.enable(32926):ca.disable(32926),X.sample_alpha=tc);Vb=ja.sample_enable;Vb!==X.sample_enable&&(Vb?ca.enable(32928):ca.disable(32928),X.sample_enable=Vb);Ob=xa[0];Nc=xa[1];if(Ob!==Fa[0]||Nc!==Fa[1])ca.sampleCoverage(Ob,Nc),Fa[0]=Ob,Fa[1]=Nc;Pb=ja.stencil_enable;Pb!==X.stencil_enable&&(Pb?ca.enable(2960):ca.disable(2960),X.stencil_enable=Pb);Od=ja.stencil_mask;Od!==X.stencil_mask&&(ca.stencilMask(Od),X.stencil_mask=Od);Fc=wa[0];vd=wa[1];Qc=wa[2];if(Fc!==ia[0]||vd!==ia[1]||Qc!==ia[2])ca.stencilFunc(Fc,
vd,Qc),ia[0]=Fc,ia[1]=vd,ia[2]=Qc;Yc=Ia[0];sd=Ia[1];nc=Ia[2];wc=Ia[3];if(Yc!==Ja[0]||sd!==Ja[1]||nc!==Ja[2]||wc!==Ja[3])ca.stencilOpSeparate(Yc,sd,nc,wc),Ja[0]=Yc,Ja[1]=sd,Ja[2]=nc,Ja[3]=wc;gc=Y[0];bb=Y[1];sc=Y[2];Rb=Y[3];if(gc!==ta[0]||bb!==ta[1]||sc!==ta[2]||Rb!==ta[3])ca.stencilOpSeparate(gc,bb,sc,Rb),ta[0]=gc,ta[1]=bb,ta[2]=sc,ta[3]=Rb}n=a.viewport;f=n.x|0;u=n.y|0;r="width"in n?n.width|0:da.framebufferWidth-f;m="height"in n?n.height|0:da.framebufferHeight-u;w=da.viewportWidth;da.viewportWidth=
r;C=da.viewportHeight;da.viewportHeight=m;ca.viewport(f,u,r,m);Z[0]=f;Z[1]=u;Z[2]=r;Z[3]=m;ca.blendColor(0,0,0,0);Xb[0]=0;Xb[1]=0;Xb[2]=0;Xb[3]=0;ca.enable(3042);X.blend_enable=!0;ca.blendEquationSeparate(32774,32774);ha[0]=32774;ha[1]=32774;ca.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;ca.disable(2929);X.depth_enable=!1;y=a.viewport;q=y.x|0;D=y.y|0;fa="width"in y?y.width|0:da.framebufferWidth-q;G="height"in y?y.height|0:da.framebufferHeight-D;ca.scissor(q,D,fa,G);ya[0]=
q;ya[1]=D;ya[2]=fa;ya[3]=G;ca.enable(3089);X.scissor_enable=!0;if(Ea=X.profile)za=performance.now(),d.count++;ca.useProgram(b.program);A=Ba.angle_instanced_arrays;Pa.setVAO(null);t=g.call(this,da,a,0);bc.offset=t;H=!1;I=null;J=0;E=!1;F=qa=0;S=1;ob=0;x=5126;ea=na=Aa=Ua=0;Da(bc)?(H=!0,I=L.createStream(34962,bc),x=I.dtype):(I=L.getBuffer(bc))?x=I.dtype:"constant"in bc?(S=2,"number"===typeof bc.constant?(Aa=bc.constant,na=ea=Ua=0):(Aa=0<bc.constant.length?bc.constant[0]:0,na=1<bc.constant.length?bc.constant[1]:
0,ea=2<bc.constant.length?bc.constant[2]:0,Ua=3<bc.constant.length?bc.constant[3]:0)):(I=Da(bc.buffer)?L.createStream(34962,bc.buffer):L.getBuffer(bc.buffer),x="type"in bc?Gc[bc.type]:I.dtype,E=!!bc.normalized,F=bc.size|0,qa=bc.offset|0,ob=bc.stride|0,J=bc.divisor|0);ka=P.location;Oa=K[ka];if(1===S){Oa.buffer||ca.enableVertexAttribArray(ka);uc=F||2;if(Oa.type!==x||Oa.size!==uc||Oa.buffer!==I||Oa.normalized!==E||Oa.offset!==qa||Oa.stride!==ob)ca.bindBuffer(34962,I.buffer),ca.vertexAttribPointer(ka,
uc,x,E,ob,qa),Oa.type=x,Oa.size=uc,Oa.buffer=I,Oa.normalized=E,Oa.offset=qa,Oa.stride=ob;Oa.divisor!==J&&(A.vertexAttribDivisorANGLE(ka,J),Oa.divisor=J)}else if(Oa.buffer&&(ca.disableVertexAttribArray(ka),Oa.buffer=null),Oa.x!==Aa||Oa.y!==na||Oa.z!==ea||Oa.w!==Ua)ca.vertexAttrib4f(ka,Aa,na,ea,Ua),Oa.x=Aa,Oa.y=na,Oa.z=ea,Oa.w=Ua;zb=c.call(this,da,a,0);Qb.offset=zb;xc=!1;Bb=null;Lc=0;lc=!1;hd=Ic=0;cd=1;Ec=0;ec=5126;mc=qc=oc=Jc=0;Da(Qb)?(xc=!0,Bb=L.createStream(34962,Qb),ec=Bb.dtype):(Bb=L.getBuffer(Qb))?
ec=Bb.dtype:"constant"in Qb?(cd=2,"number"===typeof Qb.constant?(oc=Qb.constant,qc=mc=Jc=0):(oc=0<Qb.constant.length?Qb.constant[0]:0,qc=1<Qb.constant.length?Qb.constant[1]:0,mc=2<Qb.constant.length?Qb.constant[2]:0,Jc=3<Qb.constant.length?Qb.constant[3]:0)):(Bb=Da(Qb.buffer)?L.createStream(34962,Qb.buffer):L.getBuffer(Qb.buffer),ec="type"in Qb?Gc[Qb.type]:Bb.dtype,lc=!!Qb.normalized,hd=Qb.size|0,Ic=Qb.offset|0,Ec=Qb.stride|0,Lc=Qb.divisor|0);pc=N.location;pb=K[pc];if(1===cd){pb.buffer||ca.enableVertexAttribArray(pc);
Pc=hd||2;if(pb.type!==ec||pb.size!==Pc||pb.buffer!==Bb||pb.normalized!==lc||pb.offset!==Ic||pb.stride!==Ec)ca.bindBuffer(34962,Bb.buffer),ca.vertexAttribPointer(pc,Pc,ec,lc,Ec,Ic),pb.type=ec,pb.size=Pc,pb.buffer=Bb,pb.normalized=lc,pb.offset=Ic,pb.stride=Ec;pb.divisor!==Lc&&(A.vertexAttribDivisorANGLE(pc,Lc),pb.divisor=Lc)}else if(pb.buffer&&(ca.disableVertexAttribArray(pc),pb.buffer=null),pb.x!==oc||pb.y!==qc||pb.z!==mc||pb.w!==Jc)ca.vertexAttrib4f(pc,oc,qc,mc,Jc),pb.x=oc,pb.y=qc,pb.z=mc,pb.w=Jc;
Yb=h.call(this,da,a,0);Ga.offset=Yb;fb=!1;Kb=null;Wa=0;ib=!1;Kc=Xa=0;Lb=1;Gb=0;rc=5126;Cb=Eb=jb=Mb=0;Da(Ga)?(fb=!0,Kb=L.createStream(34962,Ga),rc=Kb.dtype):(Kb=L.getBuffer(Ga))?rc=Kb.dtype:"constant"in Ga?(Lb=2,"number"===typeof Ga.constant?(jb=Ga.constant,Eb=Cb=Mb=0):(jb=0<Ga.constant.length?Ga.constant[0]:0,Eb=1<Ga.constant.length?Ga.constant[1]:0,Cb=2<Ga.constant.length?Ga.constant[2]:0,Mb=3<Ga.constant.length?Ga.constant[3]:0)):(Kb=Da(Ga.buffer)?L.createStream(34962,Ga.buffer):L.getBuffer(Ga.buffer),
rc="type"in Ga?Gc[Ga.type]:Kb.dtype,ib=!!Ga.normalized,Kc=Ga.size|0,Xa=Ga.offset|0,Gb=Ga.stride|0,Wa=Ga.divisor|0);yb=oa.location;gb=K[yb];if(1===Lb){gb.buffer||ca.enableVertexAttribArray(yb);Zb=Kc||4;if(gb.type!==rc||gb.size!==Zb||gb.buffer!==Kb||gb.normalized!==ib||gb.offset!==Xa||gb.stride!==Gb)ca.bindBuffer(34962,Kb.buffer),ca.vertexAttribPointer(yb,Zb,rc,ib,Gb,Xa),gb.type=rc,gb.size=Zb,gb.buffer=Kb,gb.normalized=ib,gb.offset=Xa,gb.stride=Gb;gb.divisor!==Wa&&(A.vertexAttribDivisorANGLE(yb,Wa),
gb.divisor=Wa)}else if(gb.buffer&&(ca.disableVertexAttribArray(yb),gb.buffer=null),gb.x!==jb||gb.y!==Eb||gb.z!==Cb||gb.w!==Mb)ca.vertexAttrib4f(yb,jb,Eb,Cb,Mb),gb.x=jb,gb.y=Eb,gb.z=Cb,gb.w=Mb;Nb=B.call(this,da,a,0);ac.offset=Nb;rb=!1;Sa=null;Sb=0;sb=!1;hb=ic=0;qb=1;Ha=0;tb=5126;Ma=eb=db=Ka=0;Da(ac)?(rb=!0,Sa=L.createStream(34962,ac),tb=Sa.dtype):(Sa=L.getBuffer(ac))?tb=Sa.dtype:"constant"in ac?(qb=2,"number"===typeof ac.constant?(db=ac.constant,eb=Ma=Ka=0):(db=0<ac.constant.length?ac.constant[0]:
0,eb=1<ac.constant.length?ac.constant[1]:0,Ma=2<ac.constant.length?ac.constant[2]:0,Ka=3<ac.constant.length?ac.constant[3]:0)):(Sa=Da(ac.buffer)?L.createStream(34962,ac.buffer):L.getBuffer(ac.buffer),tb="type"in ac?Gc[ac.type]:Sa.dtype,sb=!!ac.normalized,hb=ac.size|0,ic=ac.offset|0,Ha=ac.stride|0,Sb=ac.divisor|0);kb=M.location;Ya=K[kb];if(1===qb){Ya.buffer||ca.enableVertexAttribArray(kb);vb=hb||4;if(Ya.type!==tb||Ya.size!==vb||Ya.buffer!==Sa||Ya.normalized!==sb||Ya.offset!==ic||Ya.stride!==Ha)ca.bindBuffer(34962,
Sa.buffer),ca.vertexAttribPointer(kb,vb,tb,sb,Ha,ic),Ya.type=tb,Ya.size=vb,Ya.buffer=Sa,Ya.normalized=sb,Ya.offset=ic,Ya.stride=Ha;Ya.divisor!==Sb&&(A.vertexAttribDivisorANGLE(kb,Sb),Ya.divisor=Sb)}else if(Ya.buffer&&(ca.disableVertexAttribArray(kb),Ya.buffer=null),Ya.x!==db||Ya.y!==eb||Ya.z!==Ma||Ya.w!==Ka)ca.vertexAttrib4f(kb,db,eb,Ma,Ka),Ya.x=db,Ya.y=eb,Ya.z=Ma,Ya.w=Ka;ub=la.location;Ra=K[ub];Ra.buffer||ca.enableVertexAttribArray(ub);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==v||!1!==Ra.normalized||
0!==Ra.offset||24!==Ra.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(ub,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=v,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(A.vertexAttribDivisorANGLE(ub,0),Ra.divisor=0);Dc=U.location;Va=K[Dc];Va.buffer||ca.enableVertexAttribArray(Dc);if(5126!==Va.type||2!==Va.size||Va.buffer!==e||!1!==Va.normalized||8!==Va.offset||24!==Va.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(Dc,2,5126,!1,24,8),Va.type=5126,Va.size=2,Va.buffer=
e,Va.normalized=!1,Va.offset=8,Va.stride=24;0!==Va.divisor&&(A.vertexAttribDivisorANGLE(Dc,0),Va.divisor=0);Hb=z.location;Db=K[Hb];Db.buffer||ca.enableVertexAttribArray(Hb);if(5126!==Db.type||2!==Db.size||Db.buffer!==l||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(Hb,2,5126,!1,24,16),Db.type=5126,Db.size=2,Db.buffer=l,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(A.vertexAttribDivisorANGLE(Hb,0),Db.divisor=0);La=p.call(this,
da,a,0);ca.uniform4f(pa.location,La[0],La[1],La[2],La[3]);ca.uniform1f(V.location,a.lineWidth);ca.uniform1f(ba.location,a.capSize);zd=a.scale;ca.uniform2f(O.location,zd[0],zd[1]);$a=a.scaleFract;ca.uniform2f(Q.location,$a[0],$a[1]);Ib=a.translate;ca.uniform2f(R.location,Ib[0],Ib[1]);Jb=a.translateFract;ca.uniform2f(ra.location,Jb[0],Jb[1]);ca.uniform1f(T.location,a.opacity);(mb=ma.elements)?ca.bindBuffer(34963,mb.buffer.buffer):Pa.currentVAO&&(mb=ga.getElements(Pa.currentVAO.elements))&&ca.bindBuffer(34963,
mb.buffer.buffer);Na=ma.offset;$b=a.count;0<$b?mb?A.drawElementsInstancedANGLE(4,36,mb.type,Na<<(mb.type-5121>>1),$b):A.drawArraysInstancedANGLE(4,Na,36,$b):0>$b&&(mb?ca.drawElements(4,36,mb.type,Na<<(mb.type-5121>>1)):ca.drawArrays(4,Na,36));X.dirty=!0;Pa.setVAO(null);da.viewportWidth=w;da.viewportHeight=C;Ea&&(d.cpuTime+=performance.now()-za);H&&L.destroyStream(I);xc&&L.destroyStream(Bb);fb&&L.destroyStream(Kb);rb&&L.destroyStream(Sa)},scope:function(c,b,a){var h,g,p,f,r,m,C,z,q,B,ha,O,K,W,A,sa,
xa,Pa,Fa,P,J,Xb,N,E,T,ca,aa,F,ia,R,Y,ua,Q,M,ya,x,wa,Z,ra,ga,va,U,ta,V,Ca,ea,ka,Fb,ba,pa,la,Ba,lb,Ja,Ia,oa,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,
ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd;h=c.viewport;g=h.x|0;p=h.y|0;f="width"in h?h.width|0:da.framebufferWidth-g;r="height"in h?h.height|0:da.framebufferHeight-p;m=da.viewportWidth;da.viewportWidth=f;C=da.viewportHeight;da.viewportHeight=r;z=Oa[0];Oa[0]=g;q=Oa[1];Oa[1]=p;B=Oa[2];Oa[2]=f;ha=Oa[3];Oa[3]=r;O=za[0];za[0]=0;K=za[1];za[1]=0;W=za[2];za[2]=0;A=za[3];za[3]=0;sa=ja.blend_enable;ja.blend_enable=!0;xa=Ua[0];Ua[0]=32774;Pa=Ua[1];Ua[1]=32774;Fa=fa[0];fa[0]=770;P=fa[1];fa[1]=771;J=fa[2];fa[2]=773;Xb=
fa[3];fa[3]=1;N=ja.depth_enable;ja.depth_enable=!1;E=c.viewport;T=E.x|0;ca=E.y|0;aa="width"in E?E.width|0:da.framebufferWidth-T;F="height"in E?E.height|0:da.framebufferHeight-ca;ia=qa[0];qa[0]=T;R=qa[1];qa[1]=ca;Y=qa[2];qa[2]=aa;ua=qa[3];qa[3]=F;Q=ja.scissor_enable;ja.scissor_enable=!0;if(M=X.profile)ya=performance.now(),d.count++;x=ma.count;ma.count=36;wa=c.count;Z=ma.instances;ma.instances=wa;ra=ma.primitive;ma.primitive=4;ga=c.capSize;va=Aa[5];Aa[5]=ga;U=c.lineWidth;ta=Aa[4];Aa[4]=U;V=c.opacity;
Ca=Aa[10];Aa[10]=V;ea=c.range;ka=Aa[18];Aa[18]=ea;Fb=c.scale;ba=Aa[6];Aa[6]=Fb;pa=c.scaleFract;la=Aa[7];Aa[7]=pa;Ba=c.translate;lb=Aa[8];Aa[8]=Ba;Ja=c.translateFract;Ia=Aa[9];Aa[9]=Ja;oa=n.call(this,da,c,a);Gb=Aa[3];Aa[3]=oa;rc=k.buffer;k.buffer=l;Mb=k.divisor;k.divisor=0;jb=k.normalized;k.normalized=!1;Eb=k.offset;k.offset=16;Cb=k.size;k.size=0;yb=k.state;k.state=1;gb=k.stride;k.stride=24;Zb=k.type;k.type=5126;Nb=k.w;k.w=0;rb=k.x;k.x=0;Sa=k.y;k.y=0;Sb=k.z;k.z=0;sb=u.call(this,da,c,a);ac.offset=sb;
ic=!1;hb=null;qb=0;Ha=!1;Ka=tb=0;db=1;eb=0;Ma=5126;ub=vb=Ya=kb=0;Da(ac)?(ic=!0,hb=L.createStream(34962,ac),Ma=hb.dtype):(hb=L.getBuffer(ac))?Ma=hb.dtype:"constant"in ac?(db=2,"number"===typeof ac.constant?(Ya=ac.constant,vb=ub=kb=0):(Ya=0<ac.constant.length?ac.constant[0]:0,vb=1<ac.constant.length?ac.constant[1]:0,ub=2<ac.constant.length?ac.constant[2]:0,kb=3<ac.constant.length?ac.constant[3]:0)):(hb=Da(ac.buffer)?L.createStream(34962,ac.buffer):L.getBuffer(ac.buffer),Ma="type"in ac?Gc[ac.type]:hb.dtype,
Ha=!!ac.normalized,Ka=ac.size|0,tb=ac.offset|0,eb=ac.stride|0,qb=ac.divisor|0);Ra=w.buffer;w.buffer=hb;Dc=w.divisor;w.divisor=qb;Va=w.normalized;w.normalized=Ha;Hb=w.offset;w.offset=tb;Db=w.size;w.size=Ka;La=w.state;w.state=db;zd=w.stride;w.stride=eb;$a=w.type;w.type=Ma;Ib=w.w;w.w=kb;Jb=w.x;w.x=Ya;mb=w.y;w.y=vb;Na=w.z;w.z=ub;$b=D.buffer;D.buffer=v;Qa=D.divisor;D.divisor=0;wb=D.normalized;D.normalized=!1;xb=D.offset;D.offset=0;Ta=D.size;D.size=0;nb=D.state;D.state=1;fc=D.stride;D.stride=24;Bc=D.type;
D.type=5126;vc=D.w;D.w=0;cb=D.x;D.x=0;jc=D.y;D.y=0;Mc=D.z;D.z=0;Za=Ea.call(this,da,c,a);Ga.offset=Za;nd=!1;Ab=null;ab=0;Ub=!1;Vb=tc=0;Ob=1;Nc=0;Pb=5126;Qc=vd=Fc=Od=0;Da(Ga)?(nd=!0,Ab=L.createStream(34962,Ga),Pb=Ab.dtype):(Ab=L.getBuffer(Ga))?Pb=Ab.dtype:"constant"in Ga?(Ob=2,"number"===typeof Ga.constant?(Fc=Ga.constant,vd=Qc=Od=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,vd=1<Ga.constant.length?Ga.constant[1]:0,Qc=2<Ga.constant.length?Ga.constant[2]:0,Od=3<Ga.constant.length?Ga.constant[3]:0)):
(Ab=Da(Ga.buffer)?L.createStream(34962,Ga.buffer):L.getBuffer(Ga.buffer),Pb="type"in Ga?Gc[Ga.type]:Ab.dtype,Ub=!!Ga.normalized,Vb=Ga.size|0,tc=Ga.offset|0,Nc=Ga.stride|0,ab=Ga.divisor|0);Yc=y.buffer;y.buffer=Ab;sd=y.divisor;y.divisor=ab;nc=y.normalized;y.normalized=Ub;wc=y.offset;y.offset=tc;gc=y.size;y.size=Vb;bb=y.state;y.state=Ob;sc=y.stride;y.stride=Nc;Rb=y.type;y.type=Pb;Wb=y.w;y.w=Od;dc=y.x;y.x=Fc;hc=y.y;y.y=vd;zc=y.z;y.z=Qc;Cc=G.buffer;G.buffer=e;dd=G.divisor;G.divisor=0;Tc=G.normalized;G.normalized=
!1;Uc=G.offset;G.offset=8;Vc=G.size;G.size=0;Zc=G.state;G.state=1;od=G.stride;G.stride=24;ed=G.type;G.type=5126;$c=G.w;G.w=0;kc=G.x;G.x=0;cc=G.y;G.y=0;ad=G.z;G.z=0;Xc=t.call(this,da,c,a);bc.offset=Xc;fd=!1;Ac=null;jd=0;Cd=!1;pe=ze=0;kd=1;Fe=0;Fd=5126;Md=Ud=ae=he=0;Da(bc)?(fd=!0,Ac=L.createStream(34962,bc),Fd=Ac.dtype):(Ac=L.getBuffer(bc))?Fd=Ac.dtype:"constant"in bc?(kd=2,"number"===typeof bc.constant?(ae=bc.constant,Ud=Md=he=0):(ae=0<bc.constant.length?bc.constant[0]:0,Ud=1<bc.constant.length?bc.constant[1]:
0,Md=2<bc.constant.length?bc.constant[2]:0,he=3<bc.constant.length?bc.constant[3]:0)):(Ac=Da(bc.buffer)?L.createStream(34962,bc.buffer):L.getBuffer(bc.buffer),Fd="type"in bc?Gc[bc.type]:Ac.dtype,Cd=!!bc.normalized,pe=bc.size|0,ze=bc.offset|0,Fe=bc.stride|0,jd=bc.divisor|0);Kd=I.buffer;I.buffer=Ac;qd=I.divisor;I.divisor=jd;Wc=I.normalized;I.normalized=Cd;wd=I.offset;I.offset=ze;ud=I.size;I.size=pe;ld=I.state;I.state=kd;xd=I.stride;I.stride=Fe;Gd=I.type;I.type=Fd;Hd=I.w;I.w=he;je=I.x;I.x=ae;me=I.y;
I.y=Ud;ve=I.z;I.z=Md;ne=S.call(this,da,c,a);Qb.offset=ne;ke=!1;ie=null;we=0;fe=!1;Rc=qe=0;id=1;xe=0;te=5126;Xd=Wd=Vd=Qd=0;Da(Qb)?(ke=!0,ie=L.createStream(34962,Qb),te=ie.dtype):(ie=L.getBuffer(Qb))?te=ie.dtype:"constant"in Qb?(id=2,"number"===typeof Qb.constant?(Vd=Qb.constant,Wd=Xd=Qd=0):(Vd=0<Qb.constant.length?Qb.constant[0]:0,Wd=1<Qb.constant.length?Qb.constant[1]:0,Xd=2<Qb.constant.length?Qb.constant[2]:0,Qd=3<Qb.constant.length?Qb.constant[3]:0)):(ie=Da(Qb.buffer)?L.createStream(34962,Qb.buffer):
L.getBuffer(Qb.buffer),te="type"in Qb?Gc[Qb.type]:ie.dtype,fe=!!Qb.normalized,Rc=Qb.size|0,qe=Qb.offset|0,xe=Qb.stride|0,we=Qb.divisor|0);re=H.buffer;H.buffer=ie;Ce=H.divisor;H.divisor=we;Ge=H.normalized;H.normalized=fe;ue=H.offset;H.offset=qe;Ve=H.size;H.size=Rc;We=H.state;H.state=id;Re=H.stride;H.stride=xe;ye=H.type;H.type=te;Je=H.w;H.w=Qd;Le=H.x;H.x=Vd;Me=H.y;H.y=Wd;Ne=H.z;H.z=Xd;Ke=na.vert;na.vert=2;Rd=na.frag;na.frag=1;X.dirty=!0;b(da,c,a);da.viewportWidth=m;da.viewportHeight=C;Oa[0]=z;Oa[1]=
q;Oa[2]=B;Oa[3]=ha;za[0]=O;za[1]=K;za[2]=W;za[3]=A;ja.blend_enable=sa;Ua[0]=xa;Ua[1]=Pa;fa[0]=Fa;fa[1]=P;fa[2]=J;fa[3]=Xb;ja.depth_enable=N;qa[0]=ia;qa[1]=R;qa[2]=Y;qa[3]=ua;ja.scissor_enable=Q;M&&(d.cpuTime+=performance.now()-ya);ma.count=x;ma.instances=Z;ma.primitive=ra;Aa[5]=va;Aa[4]=ta;Aa[10]=Ca;Aa[18]=ka;Aa[6]=ba;Aa[7]=la;Aa[8]=lb;Aa[9]=Ia;Aa[3]=Gb;k.buffer=rc;k.divisor=Mb;k.normalized=jb;k.offset=Eb;k.size=Cb;k.state=yb;k.stride=gb;k.type=Zb;k.w=Nb;k.x=rb;k.y=Sa;k.z=Sb;ic&&L.destroyStream(hb);
w.buffer=Ra;w.divisor=Dc;w.normalized=Va;w.offset=Hb;w.size=Db;w.state=La;w.stride=zd;w.type=$a;w.w=Ib;w.x=Jb;w.y=mb;w.z=Na;D.buffer=$b;D.divisor=Qa;D.normalized=wb;D.offset=xb;D.size=Ta;D.state=nb;D.stride=fc;D.type=Bc;D.w=vc;D.x=cb;D.y=jc;D.z=Mc;nd&&L.destroyStream(Ab);y.buffer=Yc;y.divisor=sd;y.normalized=nc;y.offset=wc;y.size=gc;y.state=bb;y.stride=sc;y.type=Rb;y.w=Wb;y.x=dc;y.y=hc;y.z=zc;G.buffer=Cc;G.divisor=dd;G.normalized=Tc;G.offset=Uc;G.size=Vc;G.state=Zc;G.stride=od;G.type=ed;G.w=$c;G.x=
kc;G.y=cc;G.z=ad;fd&&L.destroyStream(Ac);I.buffer=Kd;I.divisor=qd;I.normalized=Wc;I.offset=wd;I.size=ud;I.state=ld;I.stride=xd;I.type=Gd;I.w=Hd;I.x=je;I.y=me;I.z=ve;ke&&L.destroyStream(ie);H.buffer=re;H.divisor=Ce;H.normalized=Ge;H.offset=ue;H.size=Ve;H.state=We;H.stride=Re;H.type=ye;H.w=Je;H.x=Le;H.y=Me;H.z=Ne;na.vert=Ke;na.frag=Rd;X.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,Ea,y,G,t,I,S,H,A,x,J,F,E,ea,z,ba,M,la){var oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca,lb,Fb,aa,W,xa,Fa,qa,ya,wa,ia,Y;oa=a.attributes;U=a.buffer;V=a.context;T=a.current;P=a.draw;N=a.elements;O=a.extensions;Q=a.framebuffer;R=a.gl;ra=a.isBufferArgs;pa=a.next;K=a.shader;L=a.uniforms;da=a.vao;X=pa.blend_color;ma=T.blend_color;ga=pa.blend_equation;Ba=T.blend_equation;va=pa.blend_func;ca=T.blend_func;Da=pa.colorMask;ja=T.colorMask;
na=pa.depth_range;Aa=T.depth_range;Pa=pa.polygonOffset_offset;za=T.polygonOffset_offset;Xb=pa.sample_coverage;Ua=T.sample_coverage;ha=pa.scissor_box;fa=T.scissor_box;sa=pa.stencil_func;ua=T.stencil_func;Ca=pa.stencil_opBack;lb=T.stencil_opBack;Fb=pa.stencil_opFront;aa=T.stencil_opFront;W=pa.viewport;xa=T.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};qa={divisor:1,offset:8,stride:8};ya={divisor:1,offset:8,stride:8};wa={divisor:1,offset:16,
stride:8};ia={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(c,e){var b,a,l,h,g,k;b=Q.next;b!==Q.cur&&(b?R.bindFramebuffer(36160,b.framebuffer):R.bindFramebuffer(36160,null),Q.cur=b);if(T.dirty){var p,n,f,r,C,v,B,ha,K,W,L,X,ga,va,Bd,Be,Qe,Ue,Jd,Ee,le,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc;p=pa.dither;p!==T.dither&&(p?R.enable(3024):R.disable(3024),T.dither=p);n=pa.depth_func;n!==T.depth_func&&(R.depthFunc(n),T.depth_func=n);f=na[0];r=na[1];if(f!==Aa[0]||r!==Aa[1])R.depthRange(f,
r),Aa[0]=f,Aa[1]=r;C=pa.depth_mask;C!==T.depth_mask&&(R.depthMask(C),T.depth_mask=C);v=Da[0];B=Da[1];ha=Da[2];K=Da[3];if(v!==ja[0]||B!==ja[1]||ha!==ja[2]||K!==ja[3])R.colorMask(v,B,ha,K),ja[0]=v,ja[1]=B,ja[2]=ha,ja[3]=K;W=pa.cull_enable;W!==T.cull_enable&&(W?R.enable(2884):R.disable(2884),T.cull_enable=W);L=pa.cull_face;L!==T.cull_face&&(R.cullFace(L),T.cull_face=L);X=pa.frontFace;X!==T.frontFace&&(R.frontFace(X),T.frontFace=X);ga=pa.lineWidth;ga!==T.lineWidth&&(R.lineWidth(ga),T.lineWidth=ga);va=
pa.polygonOffset_enable;va!==T.polygonOffset_enable&&(va?R.enable(32823):R.disable(32823),T.polygonOffset_enable=va);Bd=Pa[0];Be=Pa[1];if(Bd!==za[0]||Be!==za[1])R.polygonOffset(Bd,Be),za[0]=Bd,za[1]=Be;Qe=pa.sample_alpha;Qe!==T.sample_alpha&&(Qe?R.enable(32926):R.disable(32926),T.sample_alpha=Qe);Ue=pa.sample_enable;Ue!==T.sample_enable&&(Ue?R.enable(32928):R.disable(32928),T.sample_enable=Ue);Jd=Xb[0];Ee=Xb[1];if(Jd!==Ua[0]||Ee!==Ua[1])R.sampleCoverage(Jd,Ee),Ua[0]=Jd,Ua[1]=Ee;le=pa.stencil_mask;
le!==T.stencil_mask&&(R.stencilMask(le),T.stencil_mask=le);ce=sa[0];Td=sa[1];Ed=sa[2];if(ce!==ua[0]||Td!==ua[1]||Ed!==ua[2])R.stencilFunc(ce,Td,Ed),ua[0]=ce,ua[1]=Td,ua[2]=Ed;pd=Fb[0];bd=Fb[1];td=Fb[2];Oc=Fb[3];if(pd!==aa[0]||bd!==aa[1]||td!==aa[2]||Oc!==aa[3])R.stencilOpSeparate(pd,bd,td,Oc),aa[0]=pd,aa[1]=bd,aa[2]=td,aa[3]=Oc;rd=Ca[0];Hc=Ca[1];gd=Ca[2];Sc=Ca[3];if(rd!==lb[0]||Hc!==lb[1]||gd!==lb[2]||Sc!==lb[3])R.stencilOpSeparate(rd,Hc,gd,Sc),lb[0]=rd,lb[1]=Hc,lb[2]=gd,lb[3]=Sc}R.blendColor(0,0,
0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;R.enable(3042);T.blend_enable=!0;R.blendEquationSeparate(32774,32774);Ba[0]=32774;Ba[1]=32774;R.blendFuncSeparate(770,771,773,1);ca[0]=770;ca[1]=771;ca[2]=773;ca[3]=1;R.enable(3089);T.scissor_enable=!0;R.disable(2960);T.stencil_enable=!1;if(a=T.profile)l=performance.now(),d.count+=e;R.useProgram(u.program);h=O.angle_instanced_arrays;var md,Tb,yc,uc,zb;da.setVAO(null);md=x.location;Tb=oa[md];Tb.buffer||R.enableVertexAttribArray(md);if(5126!==Tb.type||1!==Tb.size||
Tb.buffer!==q||!1!==Tb.normalized||0!==Tb.offset||8!==Tb.stride)R.bindBuffer(34962,q.buffer),R.vertexAttribPointer(md,1,5126,!1,8,0),Tb.type=5126,Tb.size=1,Tb.buffer=q,Tb.normalized=!1,Tb.offset=0,Tb.stride=8;0!==Tb.divisor&&(h.vertexAttribDivisorANGLE(md,0),Tb.divisor=0);yc=J.location;uc=oa[yc];uc.buffer||R.enableVertexAttribArray(yc);if(5126!==uc.type||1!==uc.size||uc.buffer!==m||!1!==uc.normalized||4!==uc.offset||8!==uc.stride)R.bindBuffer(34962,m.buffer),R.vertexAttribPointer(yc,1,5126,!1,8,4),
uc.type=5126,uc.size=1,uc.buffer=m,uc.normalized=!1,uc.offset=4,uc.stride=8;0!==uc.divisor&&(h.vertexAttribDivisorANGLE(yc,0),uc.divisor=0);(zb=P.elements)?R.bindBuffer(34963,zb.buffer.buffer):da.currentVAO&&(zb=N.getElements(da.currentVAO.elements))&&R.bindBuffer(34963,zb.buffer.buffer);for(g=0;g<e;++g){k=c[g];var xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,
Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld;xc=k.viewport;Bb=xc.x|0;Lc=xc.y|0;lc="width"in xc?xc.width|0:V.framebufferWidth-Bb;Ic="height"in xc?xc.height|0:V.framebufferHeight-Lc;hd=V.viewportWidth;V.viewportWidth=lc;cd=V.viewportHeight;V.viewportHeight=Ic;R.viewport(Bb,Lc,lc,Ic);xa[0]=Bb;xa[1]=Lc;xa[2]=lc;xa[3]=Ic;(Ec=w.call(this,
V,k,g))?R.enable(2929):R.disable(2929);T.depth_enable=Ec;ec=k.viewport;Jc=ec.x|0;oc=ec.y|0;qc="width"in ec?ec.width|0:V.framebufferWidth-Jc;mc="height"in ec?ec.height|0:V.framebufferHeight-oc;R.scissor(Jc,oc,qc,mc);fa[0]=Jc;fa[1]=oc;fa[2]=qc;fa[3]=mc;qa.buffer=k.positionBuffer;pc=!1;pb=null;Pc=0;Yb=!1;Kb=fb=0;Wa=1;ib=0;Xa=5126;rc=Gb=Lb=Kc=0;ra(qa)?(pc=!0,pb=U.createStream(34962,qa),Xa=pb.dtype):(pb=U.getBuffer(qa))?Xa=pb.dtype:"constant"in qa?(Wa=2,"number"===typeof qa.constant?(Lb=qa.constant,Gb=
rc=Kc=0):(Lb=0<qa.constant.length?qa.constant[0]:0,Gb=1<qa.constant.length?qa.constant[1]:0,rc=2<qa.constant.length?qa.constant[2]:0,Kc=3<qa.constant.length?qa.constant[3]:0)):(pb=ra(qa.buffer)?U.createStream(34962,qa.buffer):U.getBuffer(qa.buffer),Xa="type"in qa?Fa[qa.type]:pb.dtype,Yb=!!qa.normalized,Kb=qa.size|0,fb=qa.offset|0,ib=qa.stride|0,Pc=qa.divisor|0);Mb=Ea.location;jb=oa[Mb];if(1===Wa){jb.buffer||R.enableVertexAttribArray(Mb);Eb=Kb||2;if(jb.type!==Xa||jb.size!==Eb||jb.buffer!==pb||jb.normalized!==
Yb||jb.offset!==fb||jb.stride!==ib)R.bindBuffer(34962,pb.buffer),R.vertexAttribPointer(Mb,Eb,Xa,Yb,ib,fb),jb.type=Xa,jb.size=Eb,jb.buffer=pb,jb.normalized=Yb,jb.offset=fb,jb.stride=ib;jb.divisor!==Pc&&(h.vertexAttribDivisorANGLE(Mb,Pc),jb.divisor=Pc)}else if(jb.buffer&&(R.disableVertexAttribArray(Mb),jb.buffer=null),jb.x!==Lb||jb.y!==Gb||jb.z!==rc||jb.w!==Kc)R.vertexAttrib4f(Mb,Lb,Gb,rc,Kc),jb.x=Lb,jb.y=Gb,jb.z=rc,jb.w=Kc;wa.buffer=k.positionBuffer;Cb=!1;yb=null;gb=0;Zb=!1;rb=Nb=0;Sa=1;Sb=0;sb=5126;
Ha=qb=hb=ic=0;ra(wa)?(Cb=!0,yb=U.createStream(34962,wa),sb=yb.dtype):(yb=U.getBuffer(wa))?sb=yb.dtype:"constant"in wa?(Sa=2,"number"===typeof wa.constant?(hb=wa.constant,qb=Ha=ic=0):(hb=0<wa.constant.length?wa.constant[0]:0,qb=1<wa.constant.length?wa.constant[1]:0,Ha=2<wa.constant.length?wa.constant[2]:0,ic=3<wa.constant.length?wa.constant[3]:0)):(yb=ra(wa.buffer)?U.createStream(34962,wa.buffer):U.getBuffer(wa.buffer),sb="type"in wa?Fa[wa.type]:yb.dtype,Zb=!!wa.normalized,rb=wa.size|0,Nb=wa.offset|
0,Sb=wa.stride|0,gb=wa.divisor|0);tb=G.location;Ka=oa[tb];if(1===Sa){Ka.buffer||R.enableVertexAttribArray(tb);db=rb||2;if(Ka.type!==sb||Ka.size!==db||Ka.buffer!==yb||Ka.normalized!==Zb||Ka.offset!==Nb||Ka.stride!==Sb)R.bindBuffer(34962,yb.buffer),R.vertexAttribPointer(tb,db,sb,Zb,Sb,Nb),Ka.type=sb,Ka.size=db,Ka.buffer=yb,Ka.normalized=Zb,Ka.offset=Nb,Ka.stride=Sb;Ka.divisor!==gb&&(h.vertexAttribDivisorANGLE(tb,gb),Ka.divisor=gb)}else if(Ka.buffer&&(R.disableVertexAttribArray(tb),Ka.buffer=null),Ka.x!==
hb||Ka.y!==qb||Ka.z!==Ha||Ka.w!==ic)R.vertexAttrib4f(tb,hb,qb,Ha,ic),Ka.x=hb,Ka.y=qb,Ka.z=Ha,Ka.w=ic;ya.buffer=k.positionFractBuffer;eb=!1;Ma=null;kb=0;Ya=!1;ub=vb=0;Ra=1;Dc=0;Va=5126;zd=La=Db=Hb=0;ra(ya)?(eb=!0,Ma=U.createStream(34962,ya),Va=Ma.dtype):(Ma=U.getBuffer(ya))?Va=Ma.dtype:"constant"in ya?(Ra=2,"number"===typeof ya.constant?(Db=ya.constant,La=zd=Hb=0):(Db=0<ya.constant.length?ya.constant[0]:0,La=1<ya.constant.length?ya.constant[1]:0,zd=2<ya.constant.length?ya.constant[2]:0,Hb=3<ya.constant.length?
ya.constant[3]:0)):(Ma=ra(ya.buffer)?U.createStream(34962,ya.buffer):U.getBuffer(ya.buffer),Va="type"in ya?Fa[ya.type]:Ma.dtype,Ya=!!ya.normalized,ub=ya.size|0,vb=ya.offset|0,Dc=ya.stride|0,kb=ya.divisor|0);$a=y.location;Ib=oa[$a];if(1===Ra){Ib.buffer||R.enableVertexAttribArray($a);Jb=ub||2;if(Ib.type!==Va||Ib.size!==Jb||Ib.buffer!==Ma||Ib.normalized!==Ya||Ib.offset!==vb||Ib.stride!==Dc)R.bindBuffer(34962,Ma.buffer),R.vertexAttribPointer($a,Jb,Va,Ya,Dc,vb),Ib.type=Va,Ib.size=Jb,Ib.buffer=Ma,Ib.normalized=
Ya,Ib.offset=vb,Ib.stride=Dc;Ib.divisor!==kb&&(h.vertexAttribDivisorANGLE($a,kb),Ib.divisor=kb)}else if(Ib.buffer&&(R.disableVertexAttribArray($a),Ib.buffer=null),Ib.x!==Db||Ib.y!==La||Ib.z!==zd||Ib.w!==Hb)R.vertexAttrib4f($a,Db,La,zd,Hb),Ib.x=Db,Ib.y=La,Ib.z=zd,Ib.w=Hb;ia.buffer=k.positionFractBuffer;mb=!1;Na=null;$b=0;Qa=!1;xb=wb=0;Ta=1;nb=0;fc=5126;jc=cb=vc=Bc=0;ra(ia)?(mb=!0,Na=U.createStream(34962,ia),fc=Na.dtype):(Na=U.getBuffer(ia))?fc=Na.dtype:"constant"in ia?(Ta=2,"number"===typeof ia.constant?
(vc=ia.constant,cb=jc=Bc=0):(vc=0<ia.constant.length?ia.constant[0]:0,cb=1<ia.constant.length?ia.constant[1]:0,jc=2<ia.constant.length?ia.constant[2]:0,Bc=3<ia.constant.length?ia.constant[3]:0)):(Na=ra(ia.buffer)?U.createStream(34962,ia.buffer):U.getBuffer(ia.buffer),fc="type"in ia?Fa[ia.type]:Na.dtype,Qa=!!ia.normalized,xb=ia.size|0,wb=ia.offset|0,nb=ia.stride|0,$b=ia.divisor|0);Mc=t.location;Za=oa[Mc];if(1===Ta){Za.buffer||R.enableVertexAttribArray(Mc);nd=xb||2;if(Za.type!==fc||Za.size!==nd||Za.buffer!==
Na||Za.normalized!==Qa||Za.offset!==wb||Za.stride!==nb)R.bindBuffer(34962,Na.buffer),R.vertexAttribPointer(Mc,nd,fc,Qa,nb,wb),Za.type=fc,Za.size=nd,Za.buffer=Na,Za.normalized=Qa,Za.offset=wb,Za.stride=nb;Za.divisor!==$b&&(h.vertexAttribDivisorANGLE(Mc,$b),Za.divisor=$b)}else if(Za.buffer&&(R.disableVertexAttribArray(Mc),Za.buffer=null),Za.x!==vc||Za.y!==cb||Za.z!==jc||Za.w!==Bc)R.vertexAttrib4f(Mc,vc,cb,jc,Bc),Za.x=vc,Za.y=cb,Za.z=jc,Za.w=Bc;Y.buffer=k.colorBuffer;Ab=!1;ab=null;Ub=0;tc=!1;Ob=Vb=0;
Nc=1;Pb=0;Od=5126;Yc=Qc=vd=Fc=0;ra(Y)?(Ab=!0,ab=U.createStream(34962,Y),Od=ab.dtype):(ab=U.getBuffer(Y))?Od=ab.dtype:"constant"in Y?(Nc=2,"number"===typeof Y.constant?(vd=Y.constant,Qc=Yc=Fc=0):(vd=0<Y.constant.length?Y.constant[0]:0,Qc=1<Y.constant.length?Y.constant[1]:0,Yc=2<Y.constant.length?Y.constant[2]:0,Fc=3<Y.constant.length?Y.constant[3]:0)):(ab=ra(Y.buffer)?U.createStream(34962,Y.buffer):U.getBuffer(Y.buffer),Od="type"in Y?Fa[Y.type]:ab.dtype,tc=!!Y.normalized,Ob=Y.size|0,Vb=Y.offset|0,
Pb=Y.stride|0,Ub=Y.divisor|0);sd=I.location;nc=oa[sd];if(1===Nc){nc.buffer||R.enableVertexAttribArray(sd);wc=Ob||4;if(nc.type!==Od||nc.size!==wc||nc.buffer!==ab||nc.normalized!==tc||nc.offset!==Vb||nc.stride!==Pb)R.bindBuffer(34962,ab.buffer),R.vertexAttribPointer(sd,wc,Od,tc,Pb,Vb),nc.type=Od,nc.size=wc,nc.buffer=ab,nc.normalized=tc,nc.offset=Vb,nc.stride=Pb;nc.divisor!==Ub&&(h.vertexAttribDivisorANGLE(sd,Ub),nc.divisor=Ub)}else if(nc.buffer&&(R.disableVertexAttribArray(sd),nc.buffer=null),nc.x!==
vd||nc.y!==Qc||nc.z!==Yc||nc.w!==Fc)R.vertexAttrib4f(sd,vd,Qc,Yc,Fc),nc.x=vd,nc.y=Qc,nc.z=Yc,nc.w=Fc;gc=k.scale;bb=gc[0];Rb=gc[1];g&&sc===bb&&Wb===Rb||(sc=bb,Wb=Rb,R.uniform2f(E.location,bb,Rb));dc=k.scaleFract;hc=dc[0];Cc=dc[1];g&&zc===hc&&dd===Cc||(zc=hc,dd=Cc,R.uniform2f(ea.location,hc,Cc));Tc=k.translate;Uc=Tc[0];Zc=Tc[1];g&&Vc===Uc&&od===Zc||(Vc=Uc,od=Zc,R.uniform2f(ba.location,Uc,Zc));ed=k.translateFract;$c=ed[0];cc=ed[1];g&&kc===$c&&ad===cc||(kc=$c,ad=cc,R.uniform2f(M.location,$c,cc));Xc=k.thickness;
g&&fd===Xc||(fd=Xc,R.uniform1f(z.location,Xc));Ac=k.depth;g&&jd===Ac||(jd=Ac,R.uniform1f(A.location,Ac));Cd=D.call(this,V,k,g);ze=Cd[0];kd=Cd[1];Fd=Cd[2];ae=Cd[3];g&&pe===ze&&Fe===kd&&he===Fd&&Ud===ae||(pe=ze,Fe=kd,he=Fd,Ud=ae,R.uniform4f(la.location,ze,kd,Fd,ae));Md=k.dashLength;g&&Kd===Md||(Kd=Md,R.uniform1f(S.location,Md));qd=k.opacity;g&&Wc===qd||(Wc=qd,R.uniform1f(F.location,qd));(wd=k.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);ud=wd._texture;R.uniform1i(H.location,ud.bind());
ld=k.count;0<ld?zb?h.drawElementsInstancedANGLE(5,4,zb.type,0<<(zb.type-5121>>1),ld):h.drawArraysInstancedANGLE(5,0,4,ld):0>ld&&(zb?R.drawElements(5,4,zb.type,0<<(zb.type-5121>>1)):R.drawArrays(5,0,4));V.viewportWidth=hd;V.viewportHeight=cd;pc&&U.destroyStream(pb);Cb&&U.destroyStream(yb);eb&&U.destroyStream(Ma);mb&&U.destroyStream(Na);Ab&&U.destroyStream(ab);ud.unbind()}T.dirty=!0;da.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(c){var e,a,l,h,g,k,p,n,u,w,v,B,D,ha,K,W,L,X,ga,va,
Nd,Bd,Be,Qe,Ue,Jd,Ee,le,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb;e=Q.next;e!==Q.cur&&(e?R.bindFramebuffer(36160,e.framebuffer):R.bindFramebuffer(36160,null),Q.cur=e);if(T.dirty){var xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb;xb=pa.dither;xb!==
T.dither&&(xb?R.enable(3024):R.disable(3024),T.dither=xb);Ta=pa.depth_func;Ta!==T.depth_func&&(R.depthFunc(Ta),T.depth_func=Ta);nb=na[0];fc=na[1];if(nb!==Aa[0]||fc!==Aa[1])R.depthRange(nb,fc),Aa[0]=nb,Aa[1]=fc;Bc=pa.depth_mask;Bc!==T.depth_mask&&(R.depthMask(Bc),T.depth_mask=Bc);vc=Da[0];cb=Da[1];jc=Da[2];Mc=Da[3];if(vc!==ja[0]||cb!==ja[1]||jc!==ja[2]||Mc!==ja[3])R.colorMask(vc,cb,jc,Mc),ja[0]=vc,ja[1]=cb,ja[2]=jc,ja[3]=Mc;Za=pa.cull_enable;Za!==T.cull_enable&&(Za?R.enable(2884):R.disable(2884),T.cull_enable=
Za);nd=pa.cull_face;nd!==T.cull_face&&(R.cullFace(nd),T.cull_face=nd);Ab=pa.frontFace;Ab!==T.frontFace&&(R.frontFace(Ab),T.frontFace=Ab);ab=pa.lineWidth;ab!==T.lineWidth&&(R.lineWidth(ab),T.lineWidth=ab);Ub=pa.polygonOffset_enable;Ub!==T.polygonOffset_enable&&(Ub?R.enable(32823):R.disable(32823),T.polygonOffset_enable=Ub);tc=Pa[0];Vb=Pa[1];if(tc!==za[0]||Vb!==za[1])R.polygonOffset(tc,Vb),za[0]=tc,za[1]=Vb;Ob=pa.sample_alpha;Ob!==T.sample_alpha&&(Ob?R.enable(32926):R.disable(32926),T.sample_alpha=
Ob);Nc=pa.sample_enable;Nc!==T.sample_enable&&(Nc?R.enable(32928):R.disable(32928),T.sample_enable=Nc);Pb=Xb[0];Od=Xb[1];if(Pb!==Ua[0]||Od!==Ua[1])R.sampleCoverage(Pb,Od),Ua[0]=Pb,Ua[1]=Od;Fc=pa.stencil_mask;Fc!==T.stencil_mask&&(R.stencilMask(Fc),T.stencil_mask=Fc);vd=sa[0];Qc=sa[1];Yc=sa[2];if(vd!==ua[0]||Qc!==ua[1]||Yc!==ua[2])R.stencilFunc(vd,Qc,Yc),ua[0]=vd,ua[1]=Qc,ua[2]=Yc;sd=Fb[0];nc=Fb[1];wc=Fb[2];gc=Fb[3];if(sd!==aa[0]||nc!==aa[1]||wc!==aa[2]||gc!==aa[3])R.stencilOpSeparate(sd,nc,wc,gc),
aa[0]=sd,aa[1]=nc,aa[2]=wc,aa[3]=gc;bb=Ca[0];sc=Ca[1];Rb=Ca[2];Wb=Ca[3];if(bb!==lb[0]||sc!==lb[1]||Rb!==lb[2]||Wb!==lb[3])R.stencilOpSeparate(bb,sc,Rb,Wb),lb[0]=bb,lb[1]=sc,lb[2]=Rb,lb[3]=Wb}a=c.viewport;l=a.x|0;h=a.y|0;g="width"in a?a.width|0:V.framebufferWidth-l;k="height"in a?a.height|0:V.framebufferHeight-h;p=V.viewportWidth;V.viewportWidth=g;n=V.viewportHeight;V.viewportHeight=k;R.viewport(l,h,g,k);xa[0]=l;xa[1]=h;xa[2]=g;xa[3]=k;R.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;R.enable(3042);
T.blend_enable=!0;R.blendEquationSeparate(32774,32774);Ba[0]=32774;Ba[1]=32774;R.blendFuncSeparate(770,771,773,1);ca[0]=770;ca[1]=771;ca[2]=773;ca[3]=1;(u=f.call(this,V,c,0))?R.enable(2929):R.disable(2929);T.depth_enable=u;w=c.viewport;v=w.x|0;B=w.y|0;D="width"in w?w.width|0:V.framebufferWidth-v;ha="height"in w?w.height|0:V.framebufferHeight-B;R.scissor(v,B,D,ha);fa[0]=v;fa[1]=B;fa[2]=D;fa[3]=ha;R.enable(3089);T.scissor_enable=!0;R.disable(2960);T.stencil_enable=!1;if(K=T.profile)W=performance.now(),
d.count++;R.useProgram(r.program);L=O.angle_instanced_arrays;da.setVAO(null);qa.buffer=c.positionBuffer;X=!1;ga=null;va=0;Nd=!1;Be=Bd=0;Qe=1;Ue=0;Jd=5126;Td=ce=le=Ee=0;ra(qa)?(X=!0,ga=U.createStream(34962,qa),Jd=ga.dtype):(ga=U.getBuffer(qa))?Jd=ga.dtype:"constant"in qa?(Qe=2,"number"===typeof qa.constant?(le=qa.constant,ce=Td=Ee=0):(le=0<qa.constant.length?qa.constant[0]:0,ce=1<qa.constant.length?qa.constant[1]:0,Td=2<qa.constant.length?qa.constant[2]:0,Ee=3<qa.constant.length?qa.constant[3]:0)):
(ga=ra(qa.buffer)?U.createStream(34962,qa.buffer):U.getBuffer(qa.buffer),Jd="type"in qa?Fa[qa.type]:ga.dtype,Nd=!!qa.normalized,Be=qa.size|0,Bd=qa.offset|0,Ue=qa.stride|0,va=qa.divisor|0);Ed=Ea.location;pd=oa[Ed];if(1===Qe){pd.buffer||R.enableVertexAttribArray(Ed);bd=Be||2;if(pd.type!==Jd||pd.size!==bd||pd.buffer!==ga||pd.normalized!==Nd||pd.offset!==Bd||pd.stride!==Ue)R.bindBuffer(34962,ga.buffer),R.vertexAttribPointer(Ed,bd,Jd,Nd,Ue,Bd),pd.type=Jd,pd.size=bd,pd.buffer=ga,pd.normalized=Nd,pd.offset=
Bd,pd.stride=Ue;pd.divisor!==va&&(L.vertexAttribDivisorANGLE(Ed,va),pd.divisor=va)}else if(pd.buffer&&(R.disableVertexAttribArray(Ed),pd.buffer=null),pd.x!==le||pd.y!==ce||pd.z!==Td||pd.w!==Ee)R.vertexAttrib4f(Ed,le,ce,Td,Ee),pd.x=le,pd.y=ce,pd.z=Td,pd.w=Ee;wa.buffer=c.positionBuffer;td=!1;Oc=null;rd=0;Hc=!1;Sc=gd=0;md=1;Tb=0;yc=5126;Bb=xc=zb=uc=0;ra(wa)?(td=!0,Oc=U.createStream(34962,wa),yc=Oc.dtype):(Oc=U.getBuffer(wa))?yc=Oc.dtype:"constant"in wa?(md=2,"number"===typeof wa.constant?(zb=wa.constant,
xc=Bb=uc=0):(zb=0<wa.constant.length?wa.constant[0]:0,xc=1<wa.constant.length?wa.constant[1]:0,Bb=2<wa.constant.length?wa.constant[2]:0,uc=3<wa.constant.length?wa.constant[3]:0)):(Oc=ra(wa.buffer)?U.createStream(34962,wa.buffer):U.getBuffer(wa.buffer),yc="type"in wa?Fa[wa.type]:Oc.dtype,Hc=!!wa.normalized,Sc=wa.size|0,gd=wa.offset|0,Tb=wa.stride|0,rd=wa.divisor|0);Lc=G.location;lc=oa[Lc];if(1===md){lc.buffer||R.enableVertexAttribArray(Lc);Ic=Sc||2;if(lc.type!==yc||lc.size!==Ic||lc.buffer!==Oc||lc.normalized!==
Hc||lc.offset!==gd||lc.stride!==Tb)R.bindBuffer(34962,Oc.buffer),R.vertexAttribPointer(Lc,Ic,yc,Hc,Tb,gd),lc.type=yc,lc.size=Ic,lc.buffer=Oc,lc.normalized=Hc,lc.offset=gd,lc.stride=Tb;lc.divisor!==rd&&(L.vertexAttribDivisorANGLE(Lc,rd),lc.divisor=rd)}else if(lc.buffer&&(R.disableVertexAttribArray(Lc),lc.buffer=null),lc.x!==zb||lc.y!==xc||lc.z!==Bb||lc.w!==uc)R.vertexAttrib4f(Lc,zb,xc,Bb,uc),lc.x=zb,lc.y=xc,lc.z=Bb,lc.w=uc;ya.buffer=c.positionFractBuffer;hd=!1;cd=null;Ec=0;ec=!1;oc=Jc=0;qc=1;mc=0;
pc=5126;fb=Yb=Pc=pb=0;ra(ya)?(hd=!0,cd=U.createStream(34962,ya),pc=cd.dtype):(cd=U.getBuffer(ya))?pc=cd.dtype:"constant"in ya?(qc=2,"number"===typeof ya.constant?(Pc=ya.constant,Yb=fb=pb=0):(Pc=0<ya.constant.length?ya.constant[0]:0,Yb=1<ya.constant.length?ya.constant[1]:0,fb=2<ya.constant.length?ya.constant[2]:0,pb=3<ya.constant.length?ya.constant[3]:0)):(cd=ra(ya.buffer)?U.createStream(34962,ya.buffer):U.getBuffer(ya.buffer),pc="type"in ya?Fa[ya.type]:cd.dtype,ec=!!ya.normalized,oc=ya.size|0,Jc=
ya.offset|0,mc=ya.stride|0,Ec=ya.divisor|0);Kb=y.location;Wa=oa[Kb];if(1===qc){Wa.buffer||R.enableVertexAttribArray(Kb);ib=oc||2;if(Wa.type!==pc||Wa.size!==ib||Wa.buffer!==cd||Wa.normalized!==ec||Wa.offset!==Jc||Wa.stride!==mc)R.bindBuffer(34962,cd.buffer),R.vertexAttribPointer(Kb,ib,pc,ec,mc,Jc),Wa.type=pc,Wa.size=ib,Wa.buffer=cd,Wa.normalized=ec,Wa.offset=Jc,Wa.stride=mc;Wa.divisor!==Ec&&(L.vertexAttribDivisorANGLE(Kb,Ec),Wa.divisor=Ec)}else if(Wa.buffer&&(R.disableVertexAttribArray(Kb),Wa.buffer=
null),Wa.x!==Pc||Wa.y!==Yb||Wa.z!==fb||Wa.w!==pb)R.vertexAttrib4f(Kb,Pc,Yb,fb,pb),Wa.x=Pc,Wa.y=Yb,Wa.z=fb,Wa.w=pb;ia.buffer=c.positionFractBuffer;Xa=!1;Kc=null;Lb=0;Gb=!1;Mb=rc=0;jb=1;Eb=0;Cb=5126;Nb=Zb=gb=yb=0;ra(ia)?(Xa=!0,Kc=U.createStream(34962,ia),Cb=Kc.dtype):(Kc=U.getBuffer(ia))?Cb=Kc.dtype:"constant"in ia?(jb=2,"number"===typeof ia.constant?(gb=ia.constant,Zb=Nb=yb=0):(gb=0<ia.constant.length?ia.constant[0]:0,Zb=1<ia.constant.length?ia.constant[1]:0,Nb=2<ia.constant.length?ia.constant[2]:
0,yb=3<ia.constant.length?ia.constant[3]:0)):(Kc=ra(ia.buffer)?U.createStream(34962,ia.buffer):U.getBuffer(ia.buffer),Cb="type"in ia?Fa[ia.type]:Kc.dtype,Gb=!!ia.normalized,Mb=ia.size|0,rc=ia.offset|0,Eb=ia.stride|0,Lb=ia.divisor|0);rb=t.location;Sa=oa[rb];if(1===jb){Sa.buffer||R.enableVertexAttribArray(rb);Sb=Mb||2;if(Sa.type!==Cb||Sa.size!==Sb||Sa.buffer!==Kc||Sa.normalized!==Gb||Sa.offset!==rc||Sa.stride!==Eb)R.bindBuffer(34962,Kc.buffer),R.vertexAttribPointer(rb,Sb,Cb,Gb,Eb,rc),Sa.type=Cb,Sa.size=
Sb,Sa.buffer=Kc,Sa.normalized=Gb,Sa.offset=rc,Sa.stride=Eb;Sa.divisor!==Lb&&(L.vertexAttribDivisorANGLE(rb,Lb),Sa.divisor=Lb)}else if(Sa.buffer&&(R.disableVertexAttribArray(rb),Sa.buffer=null),Sa.x!==gb||Sa.y!==Zb||Sa.z!==Nb||Sa.w!==yb)R.vertexAttrib4f(rb,gb,Zb,Nb,yb),Sa.x=gb,Sa.y=Zb,Sa.z=Nb,Sa.w=yb;Y.buffer=c.colorBuffer;sb=!1;ic=null;hb=0;qb=!1;tb=Ha=0;Ka=1;db=0;eb=5126;vb=Ya=kb=Ma=0;ra(Y)?(sb=!0,ic=U.createStream(34962,Y),eb=ic.dtype):(ic=U.getBuffer(Y))?eb=ic.dtype:"constant"in Y?(Ka=2,"number"===
typeof Y.constant?(kb=Y.constant,Ya=vb=Ma=0):(kb=0<Y.constant.length?Y.constant[0]:0,Ya=1<Y.constant.length?Y.constant[1]:0,vb=2<Y.constant.length?Y.constant[2]:0,Ma=3<Y.constant.length?Y.constant[3]:0)):(ic=ra(Y.buffer)?U.createStream(34962,Y.buffer):U.getBuffer(Y.buffer),eb="type"in Y?Fa[Y.type]:ic.dtype,qb=!!Y.normalized,tb=Y.size|0,Ha=Y.offset|0,db=Y.stride|0,hb=Y.divisor|0);ub=I.location;Ra=oa[ub];if(1===Ka){Ra.buffer||R.enableVertexAttribArray(ub);Dc=tb||4;if(Ra.type!==eb||Ra.size!==Dc||Ra.buffer!==
ic||Ra.normalized!==qb||Ra.offset!==Ha||Ra.stride!==db)R.bindBuffer(34962,ic.buffer),R.vertexAttribPointer(ub,Dc,eb,qb,db,Ha),Ra.type=eb,Ra.size=Dc,Ra.buffer=ic,Ra.normalized=qb,Ra.offset=Ha,Ra.stride=db;Ra.divisor!==hb&&(L.vertexAttribDivisorANGLE(ub,hb),Ra.divisor=hb)}else if(Ra.buffer&&(R.disableVertexAttribArray(ub),Ra.buffer=null),Ra.x!==kb||Ra.y!==Ya||Ra.z!==vb||Ra.w!==Ma)R.vertexAttrib4f(ub,kb,Ya,vb,Ma),Ra.x=kb,Ra.y=Ya,Ra.z=vb,Ra.w=Ma;Va=x.location;Hb=oa[Va];Hb.buffer||R.enableVertexAttribArray(Va);
if(5126!==Hb.type||1!==Hb.size||Hb.buffer!==q||!1!==Hb.normalized||0!==Hb.offset||8!==Hb.stride)R.bindBuffer(34962,q.buffer),R.vertexAttribPointer(Va,1,5126,!1,8,0),Hb.type=5126,Hb.size=1,Hb.buffer=q,Hb.normalized=!1,Hb.offset=0,Hb.stride=8;0!==Hb.divisor&&(L.vertexAttribDivisorANGLE(Va,0),Hb.divisor=0);Db=J.location;La=oa[Db];La.buffer||R.enableVertexAttribArray(Db);if(5126!==La.type||1!==La.size||La.buffer!==m||!1!==La.normalized||4!==La.offset||8!==La.stride)R.bindBuffer(34962,m.buffer),R.vertexAttribPointer(Db,
1,5126,!1,8,4),La.type=5126,La.size=1,La.buffer=m,La.normalized=!1,La.offset=4,La.stride=8;0!==La.divisor&&(L.vertexAttribDivisorANGLE(Db,0),La.divisor=0);zd=c.scale;R.uniform2f(E.location,zd[0],zd[1]);$a=c.scaleFract;R.uniform2f(ea.location,$a[0],$a[1]);Ib=c.translate;R.uniform2f(ba.location,Ib[0],Ib[1]);Jb=c.translateFract;R.uniform2f(M.location,Jb[0],Jb[1]);R.uniform1f(z.location,c.thickness);R.uniform1f(A.location,c.depth);mb=b.call(this,V,c,0);R.uniform4f(la.location,mb[0],mb[1],mb[2],mb[3]);
R.uniform1f(S.location,c.dashLength);R.uniform1f(F.location,c.opacity);(Na=c.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);$b=Na._texture;R.uniform1i(H.location,$b.bind());(Qa=P.elements)?R.bindBuffer(34963,Qa.buffer.buffer):da.currentVAO&&(Qa=N.getElements(da.currentVAO.elements))&&R.bindBuffer(34963,Qa.buffer.buffer);wb=c.count;0<wb?Qa?L.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),wb):L.drawArraysInstancedANGLE(5,0,4,wb):0>wb&&(Qa?R.drawElements(5,4,Qa.type,0<<(Qa.type-
5121>>1)):R.drawArrays(5,0,4));T.dirty=!0;da.setVAO(null);V.viewportWidth=p;V.viewportHeight=n;K&&(d.cpuTime+=performance.now()-W);X&&U.destroyStream(ga);td&&U.destroyStream(Oc);hd&&U.destroyStream(cd);Xa&&U.destroyStream(Kc);sb&&U.destroyStream(ic);$b.unbind()},scope:function(b,a,f){var u,r,w,C,y,z,D,fa,O,G,Ea,A,za,sa,t,I,H,xa,Pa,J,E,Xb,N,ca,aa,F,R,ua,Q,S,M,da,ob,x,ja,Ua,Aa,na,Ca,Da,ea,Fb,ba,ka,ma,la,Ba,lb,oa,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,
Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se;u=b.viewport;r=u.x|0;w=u.y|0;C="width"in u?u.width|0:V.framebufferWidth-
r;y="height"in u?u.height|0:V.framebufferHeight-w;z=V.viewportWidth;V.viewportWidth=C;D=V.viewportHeight;V.viewportHeight=y;fa=W[0];W[0]=r;O=W[1];W[1]=w;G=W[2];W[2]=C;Ea=W[3];W[3]=y;A=X[0];X[0]=0;za=X[1];X[1]=0;sa=X[2];X[2]=0;t=X[3];X[3]=0;I=pa.blend_enable;pa.blend_enable=!0;H=ga[0];ga[0]=32774;xa=ga[1];ga[1]=32774;Pa=va[0];va[0]=770;J=va[1];va[1]=771;E=va[2];va[2]=773;Xb=va[3];va[3]=1;N=g.call(this,V,b,f);ca=pa.depth_enable;pa.depth_enable=N;aa=b.viewport;F=aa.x|0;R=aa.y|0;ua="width"in aa?aa.width|
0:V.framebufferWidth-F;Q="height"in aa?aa.height|0:V.framebufferHeight-R;S=ha[0];ha[0]=F;M=ha[1];ha[1]=R;da=ha[2];ha[2]=ua;ob=ha[3];ha[3]=Q;x=pa.scissor_enable;pa.scissor_enable=!0;ja=pa.stencil_enable;pa.stencil_enable=!1;if(Ua=T.profile)Aa=performance.now(),d.count++;na=P.offset;P.offset=0;Ca=P.count;P.count=4;Da=b.count;ea=P.instances;P.instances=Da;Fb=P.primitive;P.primitive=5;ba=b.dashLength;ka=L[23];L[23]=ba;ma=b.dashTexture;la=L[24];L[24]=ma;Ba=b.depth;lb=L[22];L[22]=Ba;oa=b.id;Ec=L[31];L[31]=
oa;ec=b.miterLimit;Jc=L[32];L[32]=ec;oc=c.call(this,V,b,f);qc=L[33];L[33]=oc;mc=b.opacity;pc=L[10];L[10]=mc;pb=V.pixelRatio;Pc=L[34];L[34]=pb;Yb=b.scale;fb=L[6];L[6]=Yb;Kb=b.scaleFract;Wa=L[7];L[7]=Kb;ib=b.thickness;Xa=L[21];L[21]=ib;Kc=b.translate;Lb=L[8];L[8]=Kc;Gb=b.translateFract;rc=L[9];L[9]=Gb;Mb=h.call(this,V,b,f);jb=L[3];L[3]=Mb;qa.buffer=b.positionBuffer;Eb=!1;Cb=null;yb=0;gb=!1;Nb=Zb=0;rb=1;Sa=0;Sb=5126;qb=hb=ic=sb=0;ra(qa)?(Eb=!0,Cb=U.createStream(34962,qa),Sb=Cb.dtype):(Cb=U.getBuffer(qa))?
Sb=Cb.dtype:"constant"in qa?(rb=2,"number"===typeof qa.constant?(ic=qa.constant,hb=qb=sb=0):(ic=0<qa.constant.length?qa.constant[0]:0,hb=1<qa.constant.length?qa.constant[1]:0,qb=2<qa.constant.length?qa.constant[2]:0,sb=3<qa.constant.length?qa.constant[3]:0)):(Cb=ra(qa.buffer)?U.createStream(34962,qa.buffer):U.getBuffer(qa.buffer),Sb="type"in qa?Fa[qa.type]:Cb.dtype,gb=!!qa.normalized,Nb=qa.size|0,Zb=qa.offset|0,Sa=qa.stride|0,yb=qa.divisor|0);Ha=B.buffer;B.buffer=Cb;tb=B.divisor;B.divisor=yb;Ka=B.normalized;
B.normalized=gb;db=B.offset;B.offset=Zb;eb=B.size;B.size=Nb;Ma=B.state;B.state=rb;kb=B.stride;B.stride=Sa;Ya=B.type;B.type=Sb;vb=B.w;B.w=sb;ub=B.x;B.x=ic;Ra=B.y;B.y=hb;Dc=B.z;B.z=qb;ya.buffer=b.positionFractBuffer;Va=!1;Hb=null;Db=0;La=!1;$a=zd=0;Ib=1;Jb=0;mb=5126;wb=Qa=$b=Na=0;ra(ya)?(Va=!0,Hb=U.createStream(34962,ya),mb=Hb.dtype):(Hb=U.getBuffer(ya))?mb=Hb.dtype:"constant"in ya?(Ib=2,"number"===typeof ya.constant?($b=ya.constant,Qa=wb=Na=0):($b=0<ya.constant.length?ya.constant[0]:0,Qa=1<ya.constant.length?
ya.constant[1]:0,wb=2<ya.constant.length?ya.constant[2]:0,Na=3<ya.constant.length?ya.constant[3]:0)):(Hb=ra(ya.buffer)?U.createStream(34962,ya.buffer):U.getBuffer(ya.buffer),mb="type"in ya?Fa[ya.type]:Hb.dtype,La=!!ya.normalized,$a=ya.size|0,zd=ya.offset|0,Jb=ya.stride|0,Db=ya.divisor|0);xb=v.buffer;v.buffer=Hb;Ta=v.divisor;v.divisor=Db;nb=v.normalized;v.normalized=La;fc=v.offset;v.offset=zd;Bc=v.size;v.size=$a;vc=v.state;v.state=Ib;cb=v.stride;v.stride=Jb;jc=v.type;v.type=mb;Mc=v.w;v.w=Na;Za=v.x;
v.x=$b;nd=v.y;v.y=Qa;Ab=v.z;v.z=wb;wa.buffer=b.positionBuffer;ab=!1;Ub=null;tc=0;Vb=!1;Nc=Ob=0;Pb=1;Od=0;Fc=5126;sd=Yc=Qc=vd=0;ra(wa)?(ab=!0,Ub=U.createStream(34962,wa),Fc=Ub.dtype):(Ub=U.getBuffer(wa))?Fc=Ub.dtype:"constant"in wa?(Pb=2,"number"===typeof wa.constant?(Qc=wa.constant,Yc=sd=vd=0):(Qc=0<wa.constant.length?wa.constant[0]:0,Yc=1<wa.constant.length?wa.constant[1]:0,sd=2<wa.constant.length?wa.constant[2]:0,vd=3<wa.constant.length?wa.constant[3]:0)):(Ub=ra(wa.buffer)?U.createStream(34962,
wa.buffer):U.getBuffer(wa.buffer),Fc="type"in wa?Fa[wa.type]:Ub.dtype,Vb=!!wa.normalized,Nc=wa.size|0,Ob=wa.offset|0,Od=wa.stride|0,tc=wa.divisor|0);nc=e.buffer;e.buffer=Ub;wc=e.divisor;e.divisor=tc;gc=e.normalized;e.normalized=Vb;bb=e.offset;e.offset=Ob;sc=e.size;e.size=Nc;Rb=e.state;e.state=Pb;Wb=e.stride;e.stride=Od;dc=e.type;e.type=Fc;hc=e.w;e.w=vd;zc=e.x;e.x=Qc;Cc=e.y;e.y=Yc;dd=e.z;e.z=sd;ia.buffer=b.positionFractBuffer;Tc=!1;Uc=null;Vc=0;Zc=!1;ed=od=0;$c=1;kc=0;cc=5126;Ac=fd=Xc=ad=0;ra(ia)?
(Tc=!0,Uc=U.createStream(34962,ia),cc=Uc.dtype):(Uc=U.getBuffer(ia))?cc=Uc.dtype:"constant"in ia?($c=2,"number"===typeof ia.constant?(Xc=ia.constant,fd=Ac=ad=0):(Xc=0<ia.constant.length?ia.constant[0]:0,fd=1<ia.constant.length?ia.constant[1]:0,Ac=2<ia.constant.length?ia.constant[2]:0,ad=3<ia.constant.length?ia.constant[3]:0)):(Uc=ra(ia.buffer)?U.createStream(34962,ia.buffer):U.getBuffer(ia.buffer),cc="type"in ia?Fa[ia.type]:Uc.dtype,Zc=!!ia.normalized,ed=ia.size|0,od=ia.offset|0,kc=ia.stride|0,Vc=
ia.divisor|0);jd=l.buffer;l.buffer=Uc;Cd=l.divisor;l.divisor=Vc;ze=l.normalized;l.normalized=Zc;pe=l.offset;l.offset=od;kd=l.size;l.size=ed;Fe=l.state;l.state=$c;Fd=l.stride;l.stride=kc;he=l.type;l.type=cc;ae=l.w;l.w=ad;Ud=l.x;l.x=Xc;Md=l.y;l.y=fd;Kd=l.z;l.z=Ac;Y.buffer=b.colorBuffer;qd=!1;Wc=null;wd=0;ud=!1;xd=ld=0;Gd=1;Hd=0;je=5126;ke=ne=ve=me=0;ra(Y)?(qd=!0,Wc=U.createStream(34962,Y),je=Wc.dtype):(Wc=U.getBuffer(Y))?je=Wc.dtype:"constant"in Y?(Gd=2,"number"===typeof Y.constant?(ve=Y.constant,ne=
ke=me=0):(ve=0<Y.constant.length?Y.constant[0]:0,ne=1<Y.constant.length?Y.constant[1]:0,ke=2<Y.constant.length?Y.constant[2]:0,me=3<Y.constant.length?Y.constant[3]:0)):(Wc=ra(Y.buffer)?U.createStream(34962,Y.buffer):U.getBuffer(Y.buffer),je="type"in Y?Fa[Y.type]:Wc.dtype,ud=!!Y.normalized,xd=Y.size|0,ld=Y.offset|0,Hd=Y.stride|0,wd=Y.divisor|0);ie=p.buffer;p.buffer=Wc;we=p.divisor;p.divisor=wd;fe=p.normalized;p.normalized=ud;qe=p.offset;p.offset=ld;Rc=p.size;p.size=xd;id=p.state;p.state=Gd;xe=p.stride;
p.stride=Hd;te=p.type;p.type=je;Qd=p.w;p.w=me;Vd=p.x;p.x=ve;Wd=p.y;p.y=ne;Xd=p.z;p.z=ke;re=n.buffer;n.buffer=q;Ce=n.divisor;n.divisor=0;Ge=n.normalized;n.normalized=!1;ue=n.offset;n.offset=0;Ve=n.size;n.size=0;We=n.state;n.state=1;Re=n.stride;n.stride=8;ye=n.type;n.type=5126;Je=n.w;n.w=0;Le=n.x;n.x=0;Me=n.y;n.y=0;Ne=n.z;n.z=0;Ke=k.buffer;k.buffer=m;Rd=k.divisor;k.divisor=0;be=k.normalized;k.normalized=!1;ee=k.offset;k.offset=4;ge=k.size;k.size=0;Oe=k.state;k.state=1;Ld=k.stride;k.stride=8;Yd=k.type;
k.type=5126;He=k.w;k.w=0;Pe=k.x;k.x=0;df=k.y;k.y=0;cf=k.z;k.z=0;Xe=K.vert;K.vert=20;Se=K.frag;K.frag=19;T.dirty=!0;a(V,b,f);V.viewportWidth=z;V.viewportHeight=D;W[0]=fa;W[1]=O;W[2]=G;W[3]=Ea;X[0]=A;X[1]=za;X[2]=sa;X[3]=t;pa.blend_enable=I;ga[0]=H;ga[1]=xa;va[0]=Pa;va[1]=J;va[2]=E;va[3]=Xb;pa.depth_enable=ca;ha[0]=S;ha[1]=M;ha[2]=da;ha[3]=ob;pa.scissor_enable=x;pa.stencil_enable=ja;Ua&&(d.cpuTime+=performance.now()-Aa);P.offset=na;P.count=Ca;P.instances=ea;P.primitive=Fb;L[23]=ka;L[24]=la;L[22]=lb;
L[31]=Ec;L[32]=Jc;L[33]=qc;L[10]=pc;L[34]=Pc;L[6]=fb;L[7]=Wa;L[21]=Xa;L[8]=Lb;L[9]=rc;L[3]=jb;Eb&&U.destroyStream(Cb);B.buffer=Ha;B.divisor=tb;B.normalized=Ka;B.offset=db;B.size=eb;B.state=Ma;B.stride=kb;B.type=Ya;B.w=vb;B.x=ub;B.y=Ra;B.z=Dc;Va&&U.destroyStream(Hb);v.buffer=xb;v.divisor=Ta;v.normalized=nb;v.offset=fc;v.size=Bc;v.state=vc;v.stride=cb;v.type=jc;v.w=Mc;v.x=Za;v.y=nd;v.z=Ab;ab&&U.destroyStream(Ub);e.buffer=nc;e.divisor=wc;e.normalized=gc;e.offset=bb;e.size=sc;e.state=Rb;e.stride=Wb;e.type=
dc;e.w=hc;e.x=zc;e.y=Cc;e.z=dd;Tc&&U.destroyStream(Uc);l.buffer=jd;l.divisor=Cd;l.normalized=ze;l.offset=pe;l.size=kd;l.state=Fe;l.stride=Fd;l.type=he;l.w=ae;l.x=Ud;l.y=Md;l.z=Kd;qd&&U.destroyStream(Wc);p.buffer=ie;p.divisor=we;p.normalized=fe;p.offset=qe;p.size=Rc;p.state=id;p.stride=xe;p.type=te;p.w=Qd;p.x=Vd;p.y=Wd;p.z=Xd;n.buffer=re;n.divisor=Ce;n.normalized=Ge;n.offset=ue;n.size=Ve;n.state=We;n.stride=Re;n.type=ye;n.w=Je;n.x=Le;n.y=Me;n.z=Ne;k.buffer=Ke;k.divisor=Rd;k.normalized=be;k.offset=
ee;k.size=ge;k.state=Oe;k.stride=Ld;k.type=Yd;k.w=He;k.x=Pe;k.y=df;k.z=cf;K.vert=Xe;K.frag=Se;T.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,Ea,y,G,t,I,S,H,A,x,J,F,E,ea,z,ba,M,la,oa,U,V,T){var P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca,lb,Fb,aa,W,xa,Fa,qa,ya,wa,ia,Y,ta,Ia,Ja,Oa,Z;P=a.attributes;
N=a.buffer;O=a.context;Q=a.current;R=a.draw;ra=a.elements;pa=a.extensions;K=a.framebuffer;L=a.gl;da=a.isBufferArgs;X=a.next;ma=a.shader;ga=a.uniforms;Ba=a.vao;va=X.blend_color;ca=Q.blend_color;Da=X.blend_equation;ja=Q.blend_equation;na=X.blend_func;Aa=Q.blend_func;Pa=X.colorMask;za=Q.colorMask;Xb=X.depth_range;Ua=Q.depth_range;ha=X.polygonOffset_offset;fa=Q.polygonOffset_offset;sa=X.sample_coverage;ua=Q.sample_coverage;Ca=X.scissor_box;lb=Q.scissor_box;Fb=X.stencil_func;aa=Q.stencil_func;W=X.stencil_opBack;
xa=Q.stencil_opBack;Fa=X.stencil_opFront;qa=Q.stencil_opFront;ya=X.viewport;wa=Q.viewport;ia={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};Ia={divisor:1,offset:4,stride:4};Ja={divisor:1,offset:16,stride:8};Oa={divisor:1,offset:24,stride:8};Z={divisor:1,offset:0,stride:8};return{batch:function(c,e){var b,a,l,h,g,k;b=K.next;b!==K.cur&&(b?L.bindFramebuffer(36160,b.framebuffer):L.bindFramebuffer(36160,
null),K.cur=b);if(Q.dirty){var p,n,f,u,r,w,C,v,B,ya,ga,va,na,Ca,Da,ma,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc;p=X.dither;p!==Q.dither&&(p?L.enable(3024):L.disable(3024),Q.dither=p);n=X.depth_func;n!==Q.depth_func&&(L.depthFunc(n),Q.depth_func=n);f=Xb[0];u=Xb[1];if(f!==Ua[0]||u!==Ua[1])L.depthRange(f,u),Ua[0]=f,Ua[1]=u;r=X.depth_mask;r!==Q.depth_mask&&(L.depthMask(r),Q.depth_mask=r);w=Pa[0];C=Pa[1];v=Pa[2];B=Pa[3];if(w!==za[0]||C!==za[1]||v!==za[2]||B!==za[3])L.colorMask(w,C,v,B),za[0]=w,za[1]=C,
za[2]=v,za[3]=B;ya=X.frontFace;ya!==Q.frontFace&&(L.frontFace(ya),Q.frontFace=ya);ga=X.lineWidth;ga!==Q.lineWidth&&(L.lineWidth(ga),Q.lineWidth=ga);va=X.polygonOffset_enable;va!==Q.polygonOffset_enable&&(va?L.enable(32823):L.disable(32823),Q.polygonOffset_enable=va);na=ha[0];Ca=ha[1];if(na!==fa[0]||Ca!==fa[1])L.polygonOffset(na,Ca),fa[0]=na,fa[1]=Ca;Da=X.sample_alpha;Da!==Q.sample_alpha&&(Da?L.enable(32926):L.disable(32926),Q.sample_alpha=Da);ma=X.sample_enable;ma!==Q.sample_enable&&(ma?L.enable(32928):
L.disable(32928),Q.sample_enable=ma);ce=sa[0];Td=sa[1];if(ce!==ua[0]||Td!==ua[1])L.sampleCoverage(ce,Td),ua[0]=ce,ua[1]=Td;Ed=X.stencil_mask;Ed!==Q.stencil_mask&&(L.stencilMask(Ed),Q.stencil_mask=Ed);pd=Fb[0];bd=Fb[1];td=Fb[2];if(pd!==aa[0]||bd!==aa[1]||td!==aa[2])L.stencilFunc(pd,bd,td),aa[0]=pd,aa[1]=bd,aa[2]=td;Oc=Fa[0];rd=Fa[1];Hc=Fa[2];gd=Fa[3];if(Oc!==qa[0]||rd!==qa[1]||Hc!==qa[2]||gd!==qa[3])L.stencilOpSeparate(Oc,rd,Hc,gd),qa[0]=Oc,qa[1]=rd,qa[2]=Hc,qa[3]=gd;Sc=W[0];md=W[1];Tb=W[2];yc=W[3];
if(Sc!==xa[0]||md!==xa[1]||Tb!==xa[2]||yc!==xa[3])L.stencilOpSeparate(Sc,md,Tb,yc),xa[0]=Sc,xa[1]=md,xa[2]=Tb,xa[3]=yc}L.blendColor(0,0,0,0);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=0;L.enable(3042);Q.blend_enable=!0;L.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;L.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;L.enable(2884);Q.cull_enable=!0;L.cullFace(1029);Q.cull_face=1029;L.enable(3089);Q.scissor_enable=!0;L.disable(2960);Q.stencil_enable=!1;if(a=Q.profile)l=performance.now(),
d.count+=e;L.useProgram(D.program);h=pa.angle_instanced_arrays;var uc,zb,xc,Bb,Lc;Ba.setVAO(null);uc=F.location;zb=P[uc];zb.buffer||L.enableVertexAttribArray(uc);if(5126!==zb.type||1!==zb.size||zb.buffer!==q||!1!==zb.normalized||0!==zb.offset||8!==zb.stride)L.bindBuffer(34962,q.buffer),L.vertexAttribPointer(uc,1,5126,!1,8,0),zb.type=5126,zb.size=1,zb.buffer=q,zb.normalized=!1,zb.offset=0,zb.stride=8;0!==zb.divisor&&(h.vertexAttribDivisorANGLE(uc,0),zb.divisor=0);xc=E.location;Bb=P[xc];Bb.buffer||
L.enableVertexAttribArray(xc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==m||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)L.bindBuffer(34962,m.buffer),L.vertexAttribPointer(xc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=m,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&(h.vertexAttribDivisorANGLE(xc,0),Bb.divisor=0);(Lc=R.elements)?L.bindBuffer(34963,Lc.buffer.buffer):Ba.currentVAO&&(Lc=ra.getElements(Ba.currentVAO.elements))&&L.bindBuffer(34963,Lc.buffer.buffer);for(g=0;g<e;++g){k=
c[g];var lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc;lc=k.viewport;Ic=lc.x|0;hd=lc.y|0;cd="width"in lc?lc.width|0:O.framebufferWidth-
Ic;Ec="height"in lc?lc.height|0:O.framebufferHeight-hd;ec=O.viewportWidth;O.viewportWidth=cd;Jc=O.viewportHeight;O.viewportHeight=Ec;L.viewport(Ic,hd,cd,Ec);wa[0]=Ic;wa[1]=hd;wa[2]=cd;wa[3]=Ec;(oc=Ea.call(this,O,k,g))?L.enable(2929):L.disable(2929);Q.depth_enable=oc;qc=k.viewport;mc=qc.x|0;pc=qc.y|0;pb="width"in qc?qc.width|0:O.framebufferWidth-mc;Pc="height"in qc?qc.height|0:O.framebufferHeight-pc;L.scissor(mc,pc,pb,Pc);lb[0]=mc;lb[1]=pc;lb[2]=pb;lb[3]=Pc;ta.buffer=k.positionBuffer;Yb=!1;fb=null;
Kb=0;Wa=!1;Xa=ib=0;Kc=1;Lb=0;Gb=5126;Eb=jb=Mb=rc=0;da(ta)?(Yb=!0,fb=N.createStream(34962,ta),Gb=fb.dtype):(fb=N.getBuffer(ta))?Gb=fb.dtype:"constant"in ta?(Kc=2,"number"===typeof ta.constant?(Mb=ta.constant,jb=Eb=rc=0):(Mb=0<ta.constant.length?ta.constant[0]:0,jb=1<ta.constant.length?ta.constant[1]:0,Eb=2<ta.constant.length?ta.constant[2]:0,rc=3<ta.constant.length?ta.constant[3]:0)):(fb=da(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),Gb="type"in ta?ia[ta.type]:fb.dtype,Wa=!!ta.normalized,
Xa=ta.size|0,ib=ta.offset|0,Lb=ta.stride|0,Kb=ta.divisor|0);Cb=I.location;yb=P[Cb];if(1===Kc){yb.buffer||L.enableVertexAttribArray(Cb);gb=Xa||2;if(yb.type!==Gb||yb.size!==gb||yb.buffer!==fb||yb.normalized!==Wa||yb.offset!==ib||yb.stride!==Lb)L.bindBuffer(34962,fb.buffer),L.vertexAttribPointer(Cb,gb,Gb,Wa,Lb,ib),yb.type=Gb,yb.size=gb,yb.buffer=fb,yb.normalized=Wa,yb.offset=ib,yb.stride=Lb;yb.divisor!==Kb&&(h.vertexAttribDivisorANGLE(Cb,Kb),yb.divisor=Kb)}else if(yb.buffer&&(L.disableVertexAttribArray(Cb),
yb.buffer=null),yb.x!==Mb||yb.y!==jb||yb.z!==Eb||yb.w!==rc)L.vertexAttrib4f(Cb,Mb,jb,Eb,rc),yb.x=Mb,yb.y=jb,yb.z=Eb,yb.w=rc;Ja.buffer=k.positionBuffer;Zb=!1;Nb=null;rb=0;Sa=!1;sb=Sb=0;ic=1;hb=0;qb=5126;db=Ka=tb=Ha=0;da(Ja)?(Zb=!0,Nb=N.createStream(34962,Ja),qb=Nb.dtype):(Nb=N.getBuffer(Ja))?qb=Nb.dtype:"constant"in Ja?(ic=2,"number"===typeof Ja.constant?(tb=Ja.constant,Ka=db=Ha=0):(tb=0<Ja.constant.length?Ja.constant[0]:0,Ka=1<Ja.constant.length?Ja.constant[1]:0,db=2<Ja.constant.length?Ja.constant[2]:
0,Ha=3<Ja.constant.length?Ja.constant[3]:0)):(Nb=da(Ja.buffer)?N.createStream(34962,Ja.buffer):N.getBuffer(Ja.buffer),qb="type"in Ja?ia[Ja.type]:Nb.dtype,Sa=!!Ja.normalized,sb=Ja.size|0,Sb=Ja.offset|0,hb=Ja.stride|0,rb=Ja.divisor|0);eb=H.location;Ma=P[eb];if(1===ic){Ma.buffer||L.enableVertexAttribArray(eb);kb=sb||2;if(Ma.type!==qb||Ma.size!==kb||Ma.buffer!==Nb||Ma.normalized!==Sa||Ma.offset!==Sb||Ma.stride!==hb)L.bindBuffer(34962,Nb.buffer),L.vertexAttribPointer(eb,kb,qb,Sa,hb,Sb),Ma.type=qb,Ma.size=
kb,Ma.buffer=Nb,Ma.normalized=Sa,Ma.offset=Sb,Ma.stride=hb;Ma.divisor!==rb&&(h.vertexAttribDivisorANGLE(eb,rb),Ma.divisor=rb)}else if(Ma.buffer&&(L.disableVertexAttribArray(eb),Ma.buffer=null),Ma.x!==tb||Ma.y!==Ka||Ma.z!==db||Ma.w!==Ha)L.vertexAttrib4f(eb,tb,Ka,db,Ha),Ma.x=tb,Ma.y=Ka,Ma.z=db,Ma.w=Ha;Oa.buffer=k.positionBuffer;Ya=!1;vb=null;ub=0;Ra=!1;Va=Dc=0;Hb=1;Db=0;La=5126;Jb=Ib=$a=zd=0;da(Oa)?(Ya=!0,vb=N.createStream(34962,Oa),La=vb.dtype):(vb=N.getBuffer(Oa))?La=vb.dtype:"constant"in Oa?(Hb=
2,"number"===typeof Oa.constant?($a=Oa.constant,Ib=Jb=zd=0):($a=0<Oa.constant.length?Oa.constant[0]:0,Ib=1<Oa.constant.length?Oa.constant[1]:0,Jb=2<Oa.constant.length?Oa.constant[2]:0,zd=3<Oa.constant.length?Oa.constant[3]:0)):(vb=da(Oa.buffer)?N.createStream(34962,Oa.buffer):N.getBuffer(Oa.buffer),La="type"in Oa?ia[Oa.type]:vb.dtype,Ra=!!Oa.normalized,Va=Oa.size|0,Dc=Oa.offset|0,Db=Oa.stride|0,ub=Oa.divisor|0);mb=ba.location;Na=P[mb];if(1===Hb){Na.buffer||L.enableVertexAttribArray(mb);$b=Va||2;if(Na.type!==
La||Na.size!==$b||Na.buffer!==vb||Na.normalized!==Ra||Na.offset!==Dc||Na.stride!==Db)L.bindBuffer(34962,vb.buffer),L.vertexAttribPointer(mb,$b,La,Ra,Db,Dc),Na.type=La,Na.size=$b,Na.buffer=vb,Na.normalized=Ra,Na.offset=Dc,Na.stride=Db;Na.divisor!==ub&&(h.vertexAttribDivisorANGLE(mb,ub),Na.divisor=ub)}else if(Na.buffer&&(L.disableVertexAttribArray(mb),Na.buffer=null),Na.x!==$a||Na.y!==Ib||Na.z!==Jb||Na.w!==zd)L.vertexAttrib4f(mb,$a,Ib,Jb,zd),Na.x=$a,Na.y=Ib,Na.z=Jb,Na.w=zd;Z.buffer=k.positionBuffer;
Qa=!1;wb=null;xb=0;Ta=!1;fc=nb=0;Bc=1;vc=0;cb=5126;nd=Za=Mc=jc=0;da(Z)?(Qa=!0,wb=N.createStream(34962,Z),cb=wb.dtype):(wb=N.getBuffer(Z))?cb=wb.dtype:"constant"in Z?(Bc=2,"number"===typeof Z.constant?(Mc=Z.constant,Za=nd=jc=0):(Mc=0<Z.constant.length?Z.constant[0]:0,Za=1<Z.constant.length?Z.constant[1]:0,nd=2<Z.constant.length?Z.constant[2]:0,jc=3<Z.constant.length?Z.constant[3]:0)):(wb=da(Z.buffer)?N.createStream(34962,Z.buffer):N.getBuffer(Z.buffer),cb="type"in Z?ia[Z.type]:wb.dtype,Ta=!!Z.normalized,
fc=Z.size|0,nb=Z.offset|0,vc=Z.stride|0,xb=Z.divisor|0);Ab=la.location;ab=P[Ab];if(1===Bc){ab.buffer||L.enableVertexAttribArray(Ab);Ub=fc||2;if(ab.type!==cb||ab.size!==Ub||ab.buffer!==wb||ab.normalized!==Ta||ab.offset!==nb||ab.stride!==vc)L.bindBuffer(34962,wb.buffer),L.vertexAttribPointer(Ab,Ub,cb,Ta,vc,nb),ab.type=cb,ab.size=Ub,ab.buffer=wb,ab.normalized=Ta,ab.offset=nb,ab.stride=vc;ab.divisor!==xb&&(h.vertexAttribDivisorANGLE(Ab,xb),ab.divisor=xb)}else if(ab.buffer&&(L.disableVertexAttribArray(Ab),
ab.buffer=null),ab.x!==Mc||ab.y!==Za||ab.z!==nd||ab.w!==jc)L.vertexAttrib4f(Ab,Mc,Za,nd,jc),ab.x=Mc,ab.y=Za,ab.z=nd,ab.w=jc;Y.buffer=k.colorBuffer;tc=!1;Vb=null;Ob=0;Nc=!1;Od=Pb=0;Fc=1;vd=0;Qc=5126;wc=nc=sd=Yc=0;da(Y)?(tc=!0,Vb=N.createStream(34962,Y),Qc=Vb.dtype):(Vb=N.getBuffer(Y))?Qc=Vb.dtype:"constant"in Y?(Fc=2,"number"===typeof Y.constant?(sd=Y.constant,nc=wc=Yc=0):(sd=0<Y.constant.length?Y.constant[0]:0,nc=1<Y.constant.length?Y.constant[1]:0,wc=2<Y.constant.length?Y.constant[2]:0,Yc=3<Y.constant.length?
Y.constant[3]:0)):(Vb=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),Qc="type"in Y?ia[Y.type]:Vb.dtype,Nc=!!Y.normalized,Od=Y.size|0,Pb=Y.offset|0,vd=Y.stride|0,Ob=Y.divisor|0);gc=t.location;bb=P[gc];if(1===Fc){bb.buffer||L.enableVertexAttribArray(gc);sc=Od||4;if(bb.type!==Qc||bb.size!==sc||bb.buffer!==Vb||bb.normalized!==Nc||bb.offset!==Pb||bb.stride!==vd)L.bindBuffer(34962,Vb.buffer),L.vertexAttribPointer(gc,sc,Qc,Nc,vd,Pb),bb.type=Qc,bb.size=sc,bb.buffer=Vb,bb.normalized=Nc,
bb.offset=Pb,bb.stride=vd;bb.divisor!==Ob&&(h.vertexAttribDivisorANGLE(gc,Ob),bb.divisor=Ob)}else if(bb.buffer&&(L.disableVertexAttribArray(gc),bb.buffer=null),bb.x!==sd||bb.y!==nc||bb.z!==wc||bb.w!==Yc)L.vertexAttrib4f(gc,sd,nc,wc,Yc),bb.x=sd,bb.y=nc,bb.z=wc,bb.w=Yc;Ia.buffer=k.colorBuffer;Rb=!1;Wb=null;dc=0;hc=!1;Cc=zc=0;dd=1;Tc=0;Uc=5126;ed=od=Zc=Vc=0;da(Ia)?(Rb=!0,Wb=N.createStream(34962,Ia),Uc=Wb.dtype):(Wb=N.getBuffer(Ia))?Uc=Wb.dtype:"constant"in Ia?(dd=2,"number"===typeof Ia.constant?(Zc=
Ia.constant,od=ed=Vc=0):(Zc=0<Ia.constant.length?Ia.constant[0]:0,od=1<Ia.constant.length?Ia.constant[1]:0,ed=2<Ia.constant.length?Ia.constant[2]:0,Vc=3<Ia.constant.length?Ia.constant[3]:0)):(Wb=da(Ia.buffer)?N.createStream(34962,Ia.buffer):N.getBuffer(Ia.buffer),Uc="type"in Ia?ia[Ia.type]:Wb.dtype,hc=!!Ia.normalized,Cc=Ia.size|0,zc=Ia.offset|0,Tc=Ia.stride|0,dc=Ia.divisor|0);$c=S.location;kc=P[$c];if(1===dd){kc.buffer||L.enableVertexAttribArray($c);cc=Cc||4;if(kc.type!==Uc||kc.size!==cc||kc.buffer!==
Wb||kc.normalized!==hc||kc.offset!==zc||kc.stride!==Tc)L.bindBuffer(34962,Wb.buffer),L.vertexAttribPointer($c,cc,Uc,hc,Tc,zc),kc.type=Uc,kc.size=cc,kc.buffer=Wb,kc.normalized=hc,kc.offset=zc,kc.stride=Tc;kc.divisor!==dc&&(h.vertexAttribDivisorANGLE($c,dc),kc.divisor=dc)}else if(kc.buffer&&(L.disableVertexAttribArray($c),kc.buffer=null),kc.x!==Zc||kc.y!==od||kc.z!==ed||kc.w!==Vc)L.vertexAttrib4f($c,Zc,od,ed,Vc),kc.x=Zc,kc.y=od,kc.z=ed,kc.w=Vc;ad=k.scale;Xc=ad[0];Ac=ad[1];g&&fd===Xc&&jd===Ac||(fd=Xc,
jd=Ac,L.uniform2f(oa.location,Xc,Ac));Cd=k.translate;ze=Cd[0];kd=Cd[1];g&&pe===ze&&Fe===kd||(pe=ze,Fe=kd,L.uniform2f(V.location,ze,kd));Fd=k.thickness;g&&he===Fd||(he=Fd,L.uniform1f(U.location,Fd));ae=k.depth;g&&Ud===ae||(Ud=ae,L.uniform1f(J.location,ae));Md=y.call(this,O,k,g);Kd=Md[0];Wc=Md[1];ud=Md[2];xd=Md[3];g&&qd===Kd&&wd===Wc&&ld===ud&&Gd===xd||(qd=Kd,wd=Wc,ld=ud,Gd=xd,L.uniform4f(T.location,Kd,Wc,ud,xd));Hd=k.miterLimit;g&&je===Hd||(je=Hd,L.uniform1f(ea.location,Hd));me=G.call(this,O,k,g);
g&&ve===me||(ve=me,L.uniform1f(z.location,me));ne=k.dashLength;g&&ke===ne||(ke=ne,L.uniform1f(A.location,ne));ie=k.opacity;g&&we===ie||(we=ie,L.uniform1f(M.location,ie));(fe=k.dashTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);qe=fe._texture;L.uniform1i(x.location,qe.bind());Rc=k.count;0<Rc?Lc?h.drawElementsInstancedANGLE(5,4,Lc.type,0<<(Lc.type-5121>>1),Rc):h.drawArraysInstancedANGLE(5,0,4,Rc):0>Rc&&(Lc?L.drawElements(5,4,Lc.type,0<<(Lc.type-5121>>1)):L.drawArrays(5,0,4));O.viewportWidth=
ec;O.viewportHeight=Jc;Yb&&N.destroyStream(fb);Zb&&N.destroyStream(Nb);Ya&&N.destroyStream(vb);Qa&&N.destroyStream(wb);tc&&N.destroyStream(Vb);Rb&&N.destroyStream(Wb);qe.unbind()}Q.dirty=!0;Ba.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(c){var e,a,l,h,k,p,n,u,w,v,y,B,D,G,Ea,ya,ga,va,na,Ca,Da,ma,le,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,
eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od;e=K.next;e!==K.cur&&(e?L.bindFramebuffer(36160,e.framebuffer):L.bindFramebuffer(36160,null),K.cur=e);if(Q.dirty){var Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac;Fc=X.dither;Fc!==Q.dither&&(Fc?L.enable(3024):L.disable(3024),Q.dither=Fc);vd=X.depth_func;vd!==Q.depth_func&&(L.depthFunc(vd),Q.depth_func=vd);Qc=Xb[0];Yc=Xb[1];if(Qc!==Ua[0]||
Yc!==Ua[1])L.depthRange(Qc,Yc),Ua[0]=Qc,Ua[1]=Yc;sd=X.depth_mask;sd!==Q.depth_mask&&(L.depthMask(sd),Q.depth_mask=sd);nc=Pa[0];wc=Pa[1];gc=Pa[2];bb=Pa[3];if(nc!==za[0]||wc!==za[1]||gc!==za[2]||bb!==za[3])L.colorMask(nc,wc,gc,bb),za[0]=nc,za[1]=wc,za[2]=gc,za[3]=bb;sc=X.frontFace;sc!==Q.frontFace&&(L.frontFace(sc),Q.frontFace=sc);Rb=X.lineWidth;Rb!==Q.lineWidth&&(L.lineWidth(Rb),Q.lineWidth=Rb);Wb=X.polygonOffset_enable;Wb!==Q.polygonOffset_enable&&(Wb?L.enable(32823):L.disable(32823),Q.polygonOffset_enable=
Wb);dc=ha[0];hc=ha[1];if(dc!==fa[0]||hc!==fa[1])L.polygonOffset(dc,hc),fa[0]=dc,fa[1]=hc;zc=X.sample_alpha;zc!==Q.sample_alpha&&(zc?L.enable(32926):L.disable(32926),Q.sample_alpha=zc);Cc=X.sample_enable;Cc!==Q.sample_enable&&(Cc?L.enable(32928):L.disable(32928),Q.sample_enable=Cc);dd=sa[0];Tc=sa[1];if(dd!==ua[0]||Tc!==ua[1])L.sampleCoverage(dd,Tc),ua[0]=dd,ua[1]=Tc;Uc=X.stencil_mask;Uc!==Q.stencil_mask&&(L.stencilMask(Uc),Q.stencil_mask=Uc);Vc=Fb[0];Zc=Fb[1];od=Fb[2];if(Vc!==aa[0]||Zc!==aa[1]||od!==
aa[2])L.stencilFunc(Vc,Zc,od),aa[0]=Vc,aa[1]=Zc,aa[2]=od;ed=Fa[0];$c=Fa[1];kc=Fa[2];cc=Fa[3];if(ed!==qa[0]||$c!==qa[1]||kc!==qa[2]||cc!==qa[3])L.stencilOpSeparate(ed,$c,kc,cc),qa[0]=ed,qa[1]=$c,qa[2]=kc,qa[3]=cc;ad=W[0];Xc=W[1];fd=W[2];Ac=W[3];if(ad!==xa[0]||Xc!==xa[1]||fd!==xa[2]||Ac!==xa[3])L.stencilOpSeparate(ad,Xc,fd,Ac),xa[0]=ad,xa[1]=Xc,xa[2]=fd,xa[3]=Ac}a=c.viewport;l=a.x|0;h=a.y|0;k="width"in a?a.width|0:O.framebufferWidth-l;p="height"in a?a.height|0:O.framebufferHeight-h;n=O.viewportWidth;
O.viewportWidth=k;u=O.viewportHeight;O.viewportHeight=p;L.viewport(l,h,k,p);wa[0]=l;wa[1]=h;wa[2]=k;wa[3]=p;L.blendColor(0,0,0,0);ca[0]=0;ca[1]=0;ca[2]=0;ca[3]=0;L.enable(3042);Q.blend_enable=!0;L.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;L.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;L.enable(2884);Q.cull_enable=!0;L.cullFace(1029);Q.cull_face=1029;(w=f.call(this,O,c,0))?L.enable(2929):L.disable(2929);Q.depth_enable=w;v=c.viewport;y=v.x|0;B=v.y|0;D="width"in
v?v.width|0:O.framebufferWidth-y;G="height"in v?v.height|0:O.framebufferHeight-B;L.scissor(y,B,D,G);lb[0]=y;lb[1]=B;lb[2]=D;lb[3]=G;L.enable(3089);Q.scissor_enable=!0;L.disable(2960);Q.stencil_enable=!1;if(Ea=Q.profile)ya=performance.now(),d.count++;L.useProgram(r.program);ga=pa.angle_instanced_arrays;Ba.setVAO(null);ta.buffer=c.positionBuffer;va=!1;na=null;Ca=0;Da=!1;le=ma=0;ce=1;Td=0;Ed=5126;Oc=td=bd=pd=0;da(ta)?(va=!0,na=N.createStream(34962,ta),Ed=na.dtype):(na=N.getBuffer(ta))?Ed=na.dtype:"constant"in
ta?(ce=2,"number"===typeof ta.constant?(bd=ta.constant,td=Oc=pd=0):(bd=0<ta.constant.length?ta.constant[0]:0,td=1<ta.constant.length?ta.constant[1]:0,Oc=2<ta.constant.length?ta.constant[2]:0,pd=3<ta.constant.length?ta.constant[3]:0)):(na=da(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),Ed="type"in ta?ia[ta.type]:na.dtype,Da=!!ta.normalized,le=ta.size|0,ma=ta.offset|0,Td=ta.stride|0,Ca=ta.divisor|0);rd=I.location;Hc=P[rd];if(1===ce){Hc.buffer||L.enableVertexAttribArray(rd);gd=le||
2;if(Hc.type!==Ed||Hc.size!==gd||Hc.buffer!==na||Hc.normalized!==Da||Hc.offset!==ma||Hc.stride!==Td)L.bindBuffer(34962,na.buffer),L.vertexAttribPointer(rd,gd,Ed,Da,Td,ma),Hc.type=Ed,Hc.size=gd,Hc.buffer=na,Hc.normalized=Da,Hc.offset=ma,Hc.stride=Td;Hc.divisor!==Ca&&(ga.vertexAttribDivisorANGLE(rd,Ca),Hc.divisor=Ca)}else if(Hc.buffer&&(L.disableVertexAttribArray(rd),Hc.buffer=null),Hc.x!==bd||Hc.y!==td||Hc.z!==Oc||Hc.w!==pd)L.vertexAttrib4f(rd,bd,td,Oc,pd),Hc.x=bd,Hc.y=td,Hc.z=Oc,Hc.w=pd;Ja.buffer=
c.positionBuffer;Sc=!1;md=null;Tb=0;yc=!1;zb=uc=0;xc=1;Bb=0;Lc=5126;cd=hd=Ic=lc=0;da(Ja)?(Sc=!0,md=N.createStream(34962,Ja),Lc=md.dtype):(md=N.getBuffer(Ja))?Lc=md.dtype:"constant"in Ja?(xc=2,"number"===typeof Ja.constant?(Ic=Ja.constant,hd=cd=lc=0):(Ic=0<Ja.constant.length?Ja.constant[0]:0,hd=1<Ja.constant.length?Ja.constant[1]:0,cd=2<Ja.constant.length?Ja.constant[2]:0,lc=3<Ja.constant.length?Ja.constant[3]:0)):(md=da(Ja.buffer)?N.createStream(34962,Ja.buffer):N.getBuffer(Ja.buffer),Lc="type"in
Ja?ia[Ja.type]:md.dtype,yc=!!Ja.normalized,zb=Ja.size|0,uc=Ja.offset|0,Bb=Ja.stride|0,Tb=Ja.divisor|0);Ec=H.location;ec=P[Ec];if(1===xc){ec.buffer||L.enableVertexAttribArray(Ec);Jc=zb||2;if(ec.type!==Lc||ec.size!==Jc||ec.buffer!==md||ec.normalized!==yc||ec.offset!==uc||ec.stride!==Bb)L.bindBuffer(34962,md.buffer),L.vertexAttribPointer(Ec,Jc,Lc,yc,Bb,uc),ec.type=Lc,ec.size=Jc,ec.buffer=md,ec.normalized=yc,ec.offset=uc,ec.stride=Bb;ec.divisor!==Tb&&(ga.vertexAttribDivisorANGLE(Ec,Tb),ec.divisor=Tb)}else if(ec.buffer&&
(L.disableVertexAttribArray(Ec),ec.buffer=null),ec.x!==Ic||ec.y!==hd||ec.z!==cd||ec.w!==lc)L.vertexAttrib4f(Ec,Ic,hd,cd,lc),ec.x=Ic,ec.y=hd,ec.z=cd,ec.w=lc;Oa.buffer=c.positionBuffer;oc=!1;qc=null;mc=0;pc=!1;Pc=pb=0;Yb=1;fb=0;Kb=5126;Kc=Xa=ib=Wa=0;da(Oa)?(oc=!0,qc=N.createStream(34962,Oa),Kb=qc.dtype):(qc=N.getBuffer(Oa))?Kb=qc.dtype:"constant"in Oa?(Yb=2,"number"===typeof Oa.constant?(ib=Oa.constant,Xa=Kc=Wa=0):(ib=0<Oa.constant.length?Oa.constant[0]:0,Xa=1<Oa.constant.length?Oa.constant[1]:0,Kc=
2<Oa.constant.length?Oa.constant[2]:0,Wa=3<Oa.constant.length?Oa.constant[3]:0)):(qc=da(Oa.buffer)?N.createStream(34962,Oa.buffer):N.getBuffer(Oa.buffer),Kb="type"in Oa?ia[Oa.type]:qc.dtype,pc=!!Oa.normalized,Pc=Oa.size|0,pb=Oa.offset|0,fb=Oa.stride|0,mc=Oa.divisor|0);Lb=ba.location;Gb=P[Lb];if(1===Yb){Gb.buffer||L.enableVertexAttribArray(Lb);rc=Pc||2;if(Gb.type!==Kb||Gb.size!==rc||Gb.buffer!==qc||Gb.normalized!==pc||Gb.offset!==pb||Gb.stride!==fb)L.bindBuffer(34962,qc.buffer),L.vertexAttribPointer(Lb,
rc,Kb,pc,fb,pb),Gb.type=Kb,Gb.size=rc,Gb.buffer=qc,Gb.normalized=pc,Gb.offset=pb,Gb.stride=fb;Gb.divisor!==mc&&(ga.vertexAttribDivisorANGLE(Lb,mc),Gb.divisor=mc)}else if(Gb.buffer&&(L.disableVertexAttribArray(Lb),Gb.buffer=null),Gb.x!==ib||Gb.y!==Xa||Gb.z!==Kc||Gb.w!==Wa)L.vertexAttrib4f(Lb,ib,Xa,Kc,Wa),Gb.x=ib,Gb.y=Xa,Gb.z=Kc,Gb.w=Wa;Z.buffer=c.positionBuffer;Mb=!1;jb=null;Eb=0;Cb=!1;gb=yb=0;Zb=1;Nb=0;rb=5126;ic=sb=Sb=Sa=0;da(Z)?(Mb=!0,jb=N.createStream(34962,Z),rb=jb.dtype):(jb=N.getBuffer(Z))?
rb=jb.dtype:"constant"in Z?(Zb=2,"number"===typeof Z.constant?(Sb=Z.constant,sb=ic=Sa=0):(Sb=0<Z.constant.length?Z.constant[0]:0,sb=1<Z.constant.length?Z.constant[1]:0,ic=2<Z.constant.length?Z.constant[2]:0,Sa=3<Z.constant.length?Z.constant[3]:0)):(jb=da(Z.buffer)?N.createStream(34962,Z.buffer):N.getBuffer(Z.buffer),rb="type"in Z?ia[Z.type]:jb.dtype,Cb=!!Z.normalized,gb=Z.size|0,yb=Z.offset|0,Nb=Z.stride|0,Eb=Z.divisor|0);hb=la.location;qb=P[hb];if(1===Zb){qb.buffer||L.enableVertexAttribArray(hb);
Ha=gb||2;if(qb.type!==rb||qb.size!==Ha||qb.buffer!==jb||qb.normalized!==Cb||qb.offset!==yb||qb.stride!==Nb)L.bindBuffer(34962,jb.buffer),L.vertexAttribPointer(hb,Ha,rb,Cb,Nb,yb),qb.type=rb,qb.size=Ha,qb.buffer=jb,qb.normalized=Cb,qb.offset=yb,qb.stride=Nb;qb.divisor!==Eb&&(ga.vertexAttribDivisorANGLE(hb,Eb),qb.divisor=Eb)}else if(qb.buffer&&(L.disableVertexAttribArray(hb),qb.buffer=null),qb.x!==Sb||qb.y!==sb||qb.z!==ic||qb.w!==Sa)L.vertexAttrib4f(hb,Sb,sb,ic,Sa),qb.x=Sb,qb.y=sb,qb.z=ic,qb.w=Sa;Y.buffer=
c.colorBuffer;tb=!1;Ka=null;db=0;eb=!1;kb=Ma=0;Ya=1;vb=0;ub=5126;Hb=Va=Dc=Ra=0;da(Y)?(tb=!0,Ka=N.createStream(34962,Y),ub=Ka.dtype):(Ka=N.getBuffer(Y))?ub=Ka.dtype:"constant"in Y?(Ya=2,"number"===typeof Y.constant?(Dc=Y.constant,Va=Hb=Ra=0):(Dc=0<Y.constant.length?Y.constant[0]:0,Va=1<Y.constant.length?Y.constant[1]:0,Hb=2<Y.constant.length?Y.constant[2]:0,Ra=3<Y.constant.length?Y.constant[3]:0)):(Ka=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),ub="type"in Y?ia[Y.type]:Ka.dtype,
eb=!!Y.normalized,kb=Y.size|0,Ma=Y.offset|0,vb=Y.stride|0,db=Y.divisor|0);Db=t.location;La=P[Db];if(1===Ya){La.buffer||L.enableVertexAttribArray(Db);zd=kb||4;if(La.type!==ub||La.size!==zd||La.buffer!==Ka||La.normalized!==eb||La.offset!==Ma||La.stride!==vb)L.bindBuffer(34962,Ka.buffer),L.vertexAttribPointer(Db,zd,ub,eb,vb,Ma),La.type=ub,La.size=zd,La.buffer=Ka,La.normalized=eb,La.offset=Ma,La.stride=vb;La.divisor!==db&&(ga.vertexAttribDivisorANGLE(Db,db),La.divisor=db)}else if(La.buffer&&(L.disableVertexAttribArray(Db),
La.buffer=null),La.x!==Dc||La.y!==Va||La.z!==Hb||La.w!==Ra)L.vertexAttrib4f(Db,Dc,Va,Hb,Ra),La.x=Dc,La.y=Va,La.z=Hb,La.w=Ra;Ia.buffer=c.colorBuffer;$a=!1;Ib=null;Jb=0;mb=!1;$b=Na=0;Qa=1;wb=0;xb=5126;Bc=fc=nb=Ta=0;da(Ia)?($a=!0,Ib=N.createStream(34962,Ia),xb=Ib.dtype):(Ib=N.getBuffer(Ia))?xb=Ib.dtype:"constant"in Ia?(Qa=2,"number"===typeof Ia.constant?(nb=Ia.constant,fc=Bc=Ta=0):(nb=0<Ia.constant.length?Ia.constant[0]:0,fc=1<Ia.constant.length?Ia.constant[1]:0,Bc=2<Ia.constant.length?Ia.constant[2]:
0,Ta=3<Ia.constant.length?Ia.constant[3]:0)):(Ib=da(Ia.buffer)?N.createStream(34962,Ia.buffer):N.getBuffer(Ia.buffer),xb="type"in Ia?ia[Ia.type]:Ib.dtype,mb=!!Ia.normalized,$b=Ia.size|0,Na=Ia.offset|0,wb=Ia.stride|0,Jb=Ia.divisor|0);vc=S.location;cb=P[vc];if(1===Qa){cb.buffer||L.enableVertexAttribArray(vc);jc=$b||4;if(cb.type!==xb||cb.size!==jc||cb.buffer!==Ib||cb.normalized!==mb||cb.offset!==Na||cb.stride!==wb)L.bindBuffer(34962,Ib.buffer),L.vertexAttribPointer(vc,jc,xb,mb,wb,Na),cb.type=xb,cb.size=
jc,cb.buffer=Ib,cb.normalized=mb,cb.offset=Na,cb.stride=wb;cb.divisor!==Jb&&(ga.vertexAttribDivisorANGLE(vc,Jb),cb.divisor=Jb)}else if(cb.buffer&&(L.disableVertexAttribArray(vc),cb.buffer=null),cb.x!==nb||cb.y!==fc||cb.z!==Bc||cb.w!==Ta)L.vertexAttrib4f(vc,nb,fc,Bc,Ta),cb.x=nb,cb.y=fc,cb.z=Bc,cb.w=Ta;Mc=F.location;Za=P[Mc];Za.buffer||L.enableVertexAttribArray(Mc);if(5126!==Za.type||1!==Za.size||Za.buffer!==q||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)L.bindBuffer(34962,q.buffer),L.vertexAttribPointer(Mc,
1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=q,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(ga.vertexAttribDivisorANGLE(Mc,0),Za.divisor=0);nd=E.location;Ab=P[nd];Ab.buffer||L.enableVertexAttribArray(nd);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==m||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)L.bindBuffer(34962,m.buffer),L.vertexAttribPointer(nd,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=m,Ab.normalized=!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ga.vertexAttribDivisorANGLE(nd,
0),Ab.divisor=0);ab=c.scale;L.uniform2f(oa.location,ab[0],ab[1]);Ub=c.translate;L.uniform2f(V.location,Ub[0],Ub[1]);L.uniform1f(U.location,c.thickness);L.uniform1f(J.location,c.depth);tc=b.call(this,O,c,0);L.uniform4f(T.location,tc[0],tc[1],tc[2],tc[3]);L.uniform1f(ea.location,c.miterLimit);Vb=g.call(this,O,c,0);L.uniform1f(z.location,Vb);L.uniform1f(A.location,c.dashLength);L.uniform1f(M.location,c.opacity);(Ob=c.dashTexture)&&"framebuffer"===Ob._reglType&&(Ob=Ob.color[0]);Nc=Ob._texture;L.uniform1i(x.location,
Nc.bind());(Pb=R.elements)?L.bindBuffer(34963,Pb.buffer.buffer):Ba.currentVAO&&(Pb=ra.getElements(Ba.currentVAO.elements))&&L.bindBuffer(34963,Pb.buffer.buffer);Od=c.count;0<Od?Pb?ga.drawElementsInstancedANGLE(5,4,Pb.type,0<<(Pb.type-5121>>1),Od):ga.drawArraysInstancedANGLE(5,0,4,Od):0>Od&&(Pb?L.drawElements(5,4,Pb.type,0<<(Pb.type-5121>>1)):L.drawArrays(5,0,4));Q.dirty=!0;Ba.setVAO(null);O.viewportWidth=n;O.viewportHeight=u;Ea&&(d.cpuTime+=performance.now()-ya);va&&N.destroyStream(na);Sc&&N.destroyStream(md);
oc&&N.destroyStream(qc);Mb&&N.destroyStream(jb);tb&&N.destroyStream(Ka);$a&&N.destroyStream(Ib);Nc.unbind()},scope:function(b,a,g){var f,r,C,y,z,D,ha,fa,K,G,Ea,W,A,za,sa,t,I,H,xa,Pa,Fa,L,P,J,E,Xb,qa,aa,ca,T,F,ua,S,M,x,ob,wa,ra,U,ja,Ua,Aa,V,ea,Fb,ba,la,ka,pa,Ba,lb,oa,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,
gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;f=b.viewport;r=f.x|0;C=f.y|0;y="width"in f?f.width|0:O.framebufferWidth-r;z="height"in f?f.height|0:O.framebufferHeight-C;D=O.viewportWidth;O.viewportWidth=
y;ha=O.viewportHeight;O.viewportHeight=z;fa=ya[0];ya[0]=r;K=ya[1];ya[1]=C;G=ya[2];ya[2]=y;Ea=ya[3];ya[3]=z;W=va[0];va[0]=0;A=va[1];va[1]=0;za=va[2];va[2]=0;sa=va[3];va[3]=0;t=X.blend_enable;X.blend_enable=!0;I=Da[0];Da[0]=32774;H=Da[1];Da[1]=32774;xa=na[0];na[0]=770;Pa=na[1];na[1]=771;Fa=na[2];na[2]=773;L=na[3];na[3]=1;P=X.cull_enable;X.cull_enable=!0;J=X.cull_face;X.cull_face=1029;E=c.call(this,O,b,g);Xb=X.depth_enable;X.depth_enable=E;qa=b.viewport;aa=qa.x|0;ca=qa.y|0;T="width"in qa?qa.width|0:
O.framebufferWidth-aa;F="height"in qa?qa.height|0:O.framebufferHeight-ca;ua=Ca[0];Ca[0]=aa;S=Ca[1];Ca[1]=ca;M=Ca[2];Ca[2]=T;x=Ca[3];Ca[3]=F;ob=X.scissor_enable;X.scissor_enable=!0;wa=X.stencil_enable;X.stencil_enable=!1;if(ra=Q.profile)U=performance.now(),d.count++;ja=R.offset;R.offset=0;Ua=R.count;R.count=4;Aa=b.count;V=R.instances;R.instances=Aa;ea=R.primitive;R.primitive=5;Fb=b.dashLength;ba=ga[23];ga[23]=Fb;la=b.dashTexture;ka=ga[24];ga[24]=la;pa=b.depth;Ba=ga[22];ga[22]=pa;lb=b.id;oa=ga[31];
ga[31]=lb;Pc=b.miterLimit;Yb=ga[32];ga[32]=Pc;fb=h.call(this,O,b,g);Kb=ga[33];ga[33]=fb;Wa=b.opacity;ib=ga[10];ga[10]=Wa;Xa=O.pixelRatio;Kc=ga[34];ga[34]=Xa;Lb=b.scale;Gb=ga[6];ga[6]=Lb;rc=b.scaleFract;Mb=ga[7];ga[7]=rc;jb=b.thickness;Eb=ga[21];ga[21]=jb;Cb=b.translate;yb=ga[8];ga[8]=Cb;gb=b.translateFract;Zb=ga[9];ga[9]=gb;Nb=B.call(this,O,b,g);rb=ga[3];ga[3]=Nb;Y.buffer=b.colorBuffer;Sa=!1;Sb=null;sb=0;ic=!1;qb=hb=0;Ha=1;tb=0;Ka=5126;kb=Ma=eb=db=0;da(Y)?(Sa=!0,Sb=N.createStream(34962,Y),Ka=Sb.dtype):
(Sb=N.getBuffer(Y))?Ka=Sb.dtype:"constant"in Y?(Ha=2,"number"===typeof Y.constant?(eb=Y.constant,Ma=kb=db=0):(eb=0<Y.constant.length?Y.constant[0]:0,Ma=1<Y.constant.length?Y.constant[1]:0,kb=2<Y.constant.length?Y.constant[2]:0,db=3<Y.constant.length?Y.constant[3]:0)):(Sb=da(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),Ka="type"in Y?ia[Y.type]:Sb.dtype,ic=!!Y.normalized,qb=Y.size|0,hb=Y.offset|0,tb=Y.stride|0,sb=Y.divisor|0);Ya=v.buffer;v.buffer=Sb;vb=v.divisor;v.divisor=sb;ub=v.normalized;
v.normalized=ic;Ra=v.offset;v.offset=hb;Dc=v.size;v.size=qb;Va=v.state;v.state=Ha;Hb=v.stride;v.stride=tb;Db=v.type;v.type=Ka;La=v.w;v.w=db;zd=v.x;v.x=eb;$a=v.y;v.y=Ma;Ib=v.z;v.z=kb;ta.buffer=b.positionBuffer;Jb=!1;mb=null;Na=0;$b=!1;wb=Qa=0;xb=1;Ta=0;nb=5126;cb=vc=Bc=fc=0;da(ta)?(Jb=!0,mb=N.createStream(34962,ta),nb=mb.dtype):(mb=N.getBuffer(ta))?nb=mb.dtype:"constant"in ta?(xb=2,"number"===typeof ta.constant?(Bc=ta.constant,vc=cb=fc=0):(Bc=0<ta.constant.length?ta.constant[0]:0,vc=1<ta.constant.length?
ta.constant[1]:0,cb=2<ta.constant.length?ta.constant[2]:0,fc=3<ta.constant.length?ta.constant[3]:0)):(mb=da(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),nb="type"in ta?ia[ta.type]:mb.dtype,$b=!!ta.normalized,wb=ta.size|0,Qa=ta.offset|0,Ta=ta.stride|0,Na=ta.divisor|0);jc=e.buffer;e.buffer=mb;Mc=e.divisor;e.divisor=Na;Za=e.normalized;e.normalized=$b;nd=e.offset;e.offset=Qa;Ab=e.size;e.size=wb;ab=e.state;e.state=xb;Ub=e.stride;e.stride=Ta;tc=e.type;e.type=nb;Vb=e.w;e.w=fc;Ob=e.x;
e.x=Bc;Nc=e.y;e.y=vc;Pb=e.z;e.z=cb;Ia.buffer=b.colorBuffer;Od=!1;Fc=null;vd=0;Qc=!1;sd=Yc=0;nc=1;wc=0;gc=5126;Wb=Rb=sc=bb=0;da(Ia)?(Od=!0,Fc=N.createStream(34962,Ia),gc=Fc.dtype):(Fc=N.getBuffer(Ia))?gc=Fc.dtype:"constant"in Ia?(nc=2,"number"===typeof Ia.constant?(sc=Ia.constant,Rb=Wb=bb=0):(sc=0<Ia.constant.length?Ia.constant[0]:0,Rb=1<Ia.constant.length?Ia.constant[1]:0,Wb=2<Ia.constant.length?Ia.constant[2]:0,bb=3<Ia.constant.length?Ia.constant[3]:0)):(Fc=da(Ia.buffer)?N.createStream(34962,Ia.buffer):
N.getBuffer(Ia.buffer),gc="type"in Ia?ia[Ia.type]:Fc.dtype,Qc=!!Ia.normalized,sd=Ia.size|0,Yc=Ia.offset|0,wc=Ia.stride|0,vd=Ia.divisor|0);dc=l.buffer;l.buffer=Fc;hc=l.divisor;l.divisor=vd;zc=l.normalized;l.normalized=Qc;Cc=l.offset;l.offset=Yc;dd=l.size;l.size=sd;Tc=l.state;l.state=nc;Uc=l.stride;l.stride=wc;Vc=l.type;l.type=gc;Zc=l.w;l.w=bb;od=l.x;l.x=sc;ed=l.y;l.y=Rb;$c=l.z;l.z=Wb;Ja.buffer=b.positionBuffer;kc=!1;cc=null;ad=0;Xc=!1;Ac=fd=0;jd=1;Cd=0;ze=5126;Fd=Fe=kd=pe=0;da(Ja)?(kc=!0,cc=N.createStream(34962,
Ja),ze=cc.dtype):(cc=N.getBuffer(Ja))?ze=cc.dtype:"constant"in Ja?(jd=2,"number"===typeof Ja.constant?(kd=Ja.constant,Fe=Fd=pe=0):(kd=0<Ja.constant.length?Ja.constant[0]:0,Fe=1<Ja.constant.length?Ja.constant[1]:0,Fd=2<Ja.constant.length?Ja.constant[2]:0,pe=3<Ja.constant.length?Ja.constant[3]:0)):(cc=da(Ja.buffer)?N.createStream(34962,Ja.buffer):N.getBuffer(Ja.buffer),ze="type"in Ja?ia[Ja.type]:cc.dtype,Xc=!!Ja.normalized,Ac=Ja.size|0,fd=Ja.offset|0,Cd=Ja.stride|0,ad=Ja.divisor|0);he=p.buffer;p.buffer=
cc;ae=p.divisor;p.divisor=ad;Ud=p.normalized;p.normalized=Xc;Md=p.offset;p.offset=fd;Kd=p.size;p.size=Ac;qd=p.state;p.state=jd;Wc=p.stride;p.stride=Cd;wd=p.type;p.type=ze;ud=p.w;p.w=pe;ld=p.x;p.x=kd;xd=p.y;p.y=Fe;Gd=p.z;p.z=Fd;Hd=n.buffer;n.buffer=q;je=n.divisor;n.divisor=0;me=n.normalized;n.normalized=!1;ve=n.offset;n.offset=0;ne=n.size;n.size=0;ke=n.state;n.state=1;ie=n.stride;n.stride=8;we=n.type;n.type=5126;fe=n.w;n.w=0;qe=n.x;n.x=0;Rc=n.y;n.y=0;id=n.z;n.z=0;xe=k.buffer;k.buffer=m;te=k.divisor;
k.divisor=0;Qd=k.normalized;k.normalized=!1;Vd=k.offset;k.offset=4;Wd=k.size;k.size=0;Xd=k.state;k.state=1;re=k.stride;k.stride=8;Ce=k.type;k.type=5126;Ge=k.w;k.w=0;ue=k.x;k.x=0;Ve=k.y;k.y=0;We=k.z;k.z=0;Oa.buffer=b.positionBuffer;Re=!1;ye=null;Je=0;Le=!1;Ne=Me=0;Ke=1;Rd=0;be=5126;Ld=Oe=ge=ee=0;da(Oa)?(Re=!0,ye=N.createStream(34962,Oa),be=ye.dtype):(ye=N.getBuffer(Oa))?be=ye.dtype:"constant"in Oa?(Ke=2,"number"===typeof Oa.constant?(ge=Oa.constant,Oe=Ld=ee=0):(ge=0<Oa.constant.length?Oa.constant[0]:
0,Oe=1<Oa.constant.length?Oa.constant[1]:0,Ld=2<Oa.constant.length?Oa.constant[2]:0,ee=3<Oa.constant.length?Oa.constant[3]:0)):(ye=da(Oa.buffer)?N.createStream(34962,Oa.buffer):N.getBuffer(Oa.buffer),be="type"in Oa?ia[Oa.type]:ye.dtype,Le=!!Oa.normalized,Ne=Oa.size|0,Me=Oa.offset|0,Rd=Oa.stride|0,Je=Oa.divisor|0);Yd=u.buffer;u.buffer=ye;He=u.divisor;u.divisor=Je;Pe=u.normalized;u.normalized=Le;df=u.offset;u.offset=Me;cf=u.size;u.size=Ne;Xe=u.state;u.state=Ke;Se=u.stride;u.stride=Rd;bf=u.type;u.type=
be;af=u.w;u.w=ee;Ye=u.x;u.x=ge;Ze=u.y;u.y=Oe;Zd=u.z;u.z=Ld;Z.buffer=b.positionBuffer;de=!1;$e=null;kf=0;of=!1;lf=gf=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;da(Z)?(de=!0,$e=N.createStream(34962,Z),sf=$e.dtype):($e=N.getBuffer(Z))?sf=$e.dtype:"constant"in Z?(mf=2,"number"===typeof Z.constant?(tf=Z.constant,Cf=Df=pf=0):(tf=0<Z.constant.length?Z.constant[0]:0,Cf=1<Z.constant.length?Z.constant[1]:0,Df=2<Z.constant.length?Z.constant[2]:0,pf=3<Z.constant.length?Z.constant[3]:0)):($e=da(Z.buffer)?N.createStream(34962,
Z.buffer):N.getBuffer(Z.buffer),sf="type"in Z?ia[Z.type]:$e.dtype,of=!!Z.normalized,lf=Z.size|0,gf=Z.offset|0,nf=Z.stride|0,kf=Z.divisor|0);Te=w.buffer;w.buffer=$e;Ie=w.divisor;w.divisor=kf;qf=w.normalized;w.normalized=of;rf=w.offset;w.offset=gf;Ef=w.size;w.size=lf;Hf=w.state;w.state=mf;Bf=w.stride;w.stride=nf;Ff=w.type;w.type=sf;Gf=w.w;w.w=pf;xf=w.x;w.x=tf;yf=w.y;w.y=Cf;wf=w.z;w.z=Df;zf=ma.vert;ma.vert=36;Af=ma.frag;ma.frag=35;Q.dirty=!0;a(O,b,g);O.viewportWidth=D;O.viewportHeight=ha;ya[0]=fa;ya[1]=
K;ya[2]=G;ya[3]=Ea;va[0]=W;va[1]=A;va[2]=za;va[3]=sa;X.blend_enable=t;Da[0]=I;Da[1]=H;na[0]=xa;na[1]=Pa;na[2]=Fa;na[3]=L;X.cull_enable=P;X.cull_face=J;X.depth_enable=Xb;Ca[0]=ua;Ca[1]=S;Ca[2]=M;Ca[3]=x;X.scissor_enable=ob;X.stencil_enable=wa;ra&&(d.cpuTime+=performance.now()-U);R.offset=ja;R.count=Ua;R.instances=V;R.primitive=ea;ga[23]=ba;ga[24]=ka;ga[22]=Ba;ga[31]=oa;ga[32]=Yb;ga[33]=Kb;ga[10]=ib;ga[34]=Kc;ga[6]=Gb;ga[7]=Mb;ga[21]=Eb;ga[8]=yb;ga[9]=Zb;ga[3]=rb;Sa&&N.destroyStream(Sb);v.buffer=Ya;
v.divisor=vb;v.normalized=ub;v.offset=Ra;v.size=Dc;v.state=Va;v.stride=Hb;v.type=Db;v.w=La;v.x=zd;v.y=$a;v.z=Ib;Jb&&N.destroyStream(mb);e.buffer=jc;e.divisor=Mc;e.normalized=Za;e.offset=nd;e.size=Ab;e.state=ab;e.stride=Ub;e.type=tc;e.w=Vb;e.x=Ob;e.y=Nc;e.z=Pb;Od&&N.destroyStream(Fc);l.buffer=dc;l.divisor=hc;l.normalized=zc;l.offset=Cc;l.size=dd;l.state=Tc;l.stride=Uc;l.type=Vc;l.w=Zc;l.x=od;l.y=ed;l.z=$c;kc&&N.destroyStream(cc);p.buffer=he;p.divisor=ae;p.normalized=Ud;p.offset=Md;p.size=Kd;p.state=
qd;p.stride=Wc;p.type=wd;p.w=ud;p.x=ld;p.y=xd;p.z=Gd;n.buffer=Hd;n.divisor=je;n.normalized=me;n.offset=ve;n.size=ne;n.state=ke;n.stride=ie;n.type=we;n.w=fe;n.x=qe;n.y=Rc;n.z=id;k.buffer=xe;k.divisor=te;k.normalized=Qd;k.offset=Vd;k.size=Wd;k.state=Xd;k.stride=re;k.type=Ce;k.w=Ge;k.x=ue;k.y=Ve;k.z=We;Re&&N.destroyStream(ye);u.buffer=Yd;u.divisor=He;u.normalized=Pe;u.offset=df;u.size=cf;u.state=Xe;u.stride=Se;u.type=bf;u.w=af;u.x=Ye;u.y=Ze;u.z=Zd;de&&N.destroyStream($e);w.buffer=Te;w.divisor=Ie;w.normalized=
qf;w.offset=rf;w.size=Ef;w.state=Hf;w.stride=Bf;w.type=Ff;w.w=Gf;w.x=xf;w.y=yf;w.z=wf;ma.vert=zf;ma.frag=Af;Q.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w){var D,Ea,y,G,t,I,S,H,A,x,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na;D=a.attributes;Ea=a.buffer;y=a.context;G=a.current;t=a.draw;I=a.elements;S=a.extensions;H=a.framebuffer;A=a.gl;x=a.isBufferArgs;J=a.next;F=a.shader;
E=a.uniforms;ea=a.vao;z=J.blend_color;ba=G.blend_color;M=J.blend_equation;la=G.blend_equation;oa=J.blend_func;U=G.blend_func;V=J.colorMask;T=G.colorMask;P=J.depth_range;N=G.depth_range;O=J.polygonOffset_offset;Q=G.polygonOffset_offset;R=J.sample_coverage;ra=G.sample_coverage;pa=J.scissor_box;K=G.scissor_box;L=J.stencil_func;da=G.stencil_func;X=J.stencil_opBack;ma=G.stencil_opBack;ga=J.stencil_opFront;Ba=G.stencil_opFront;va=J.viewport;ca=G.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,
uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};na={offset:8,stride:8};return{batch:function(b,a){var g,f,r,m,C,z;g=H.next;g!==H.cur&&(g?A.bindFramebuffer(36160,g.framebuffer):A.bindFramebuffer(36160,null),H.cur=g);if(G.dirty){var q,E,F,M,aa,W,xa,Fa,qa,ya,wa,ia,Y,va,pa,oa,Oa,Z,Gc,ac,Ga,bc,Qb,Ae,Id,Ad,Sd,De,Dd,$d,se,oe;q=J.dither;q!==G.dither&&(q?A.enable(3024):A.disable(3024),G.dither=q);E=J.depth_func;E!==G.depth_func&&(A.depthFunc(E),G.depth_func=E);F=P[0];M=P[1];if(F!==N[0]||M!==
N[1])A.depthRange(F,M),N[0]=F,N[1]=M;aa=J.depth_mask;aa!==G.depth_mask&&(A.depthMask(aa),G.depth_mask=aa);W=V[0];xa=V[1];Fa=V[2];qa=V[3];if(W!==T[0]||xa!==T[1]||Fa!==T[2]||qa!==T[3])A.colorMask(W,xa,Fa,qa),T[0]=W,T[1]=xa,T[2]=Fa,T[3]=qa;ya=J.cull_enable;ya!==G.cull_enable&&(ya?A.enable(2884):A.disable(2884),G.cull_enable=ya);wa=J.cull_face;wa!==G.cull_face&&(A.cullFace(wa),G.cull_face=wa);ia=J.frontFace;ia!==G.frontFace&&(A.frontFace(ia),G.frontFace=ia);Y=J.lineWidth;Y!==G.lineWidth&&(A.lineWidth(Y),
G.lineWidth=Y);va=J.polygonOffset_enable;va!==G.polygonOffset_enable&&(va?A.enable(32823):A.disable(32823),G.polygonOffset_enable=va);pa=O[0];oa=O[1];if(pa!==Q[0]||oa!==Q[1])A.polygonOffset(pa,oa),Q[0]=pa,Q[1]=oa;Oa=J.sample_alpha;Oa!==G.sample_alpha&&(Oa?A.enable(32926):A.disable(32926),G.sample_alpha=Oa);Z=J.sample_enable;Z!==G.sample_enable&&(Z?A.enable(32928):A.disable(32928),G.sample_enable=Z);Gc=R[0];ac=R[1];if(Gc!==ra[0]||ac!==ra[1])A.sampleCoverage(Gc,ac),ra[0]=Gc,ra[1]=ac;Ga=J.stencil_mask;
Ga!==G.stencil_mask&&(A.stencilMask(Ga),G.stencil_mask=Ga);bc=L[0];Qb=L[1];Ae=L[2];if(bc!==da[0]||Qb!==da[1]||Ae!==da[2])A.stencilFunc(bc,Qb,Ae),da[0]=bc,da[1]=Qb,da[2]=Ae;Id=ga[0];Ad=ga[1];Sd=ga[2];De=ga[3];if(Id!==Ba[0]||Ad!==Ba[1]||Sd!==Ba[2]||De!==Ba[3])A.stencilOpSeparate(Id,Ad,Sd,De),Ba[0]=Id,Ba[1]=Ad,Ba[2]=Sd,Ba[3]=De;Dd=X[0];$d=X[1];se=X[2];oe=X[3];if(Dd!==ma[0]||$d!==ma[1]||se!==ma[2]||oe!==ma[3])A.stencilOpSeparate(Dd,$d,se,oe),ma[0]=Dd,ma[1]=$d,ma[2]=se,ma[3]=oe}A.blendColor(0,0,0,0);ba[0]=
0;ba[1]=0;ba[2]=0;ba[3]=0;A.enable(3042);G.blend_enable=!0;A.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;A.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;A.disable(2929);G.depth_enable=!1;A.enable(3089);G.scissor_enable=!0;A.disable(2960);G.stencil_enable=!1;if(f=G.profile)r=performance.now(),d.count+=a;A.useProgram(c.program);m=S.angle_instanced_arrays;var yd;ea.setVAO(null);yd=t.instances;for(C=0;C<a;++C){z=b[C];var Pd,Nd,Bd,Be,Qe,Ue,Jd,Ee,le,ce,Td,Ed,pd,bd,td,
Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db;Pd=z.viewport;Nd=Pd.x|0;Bd=Pd.y|0;Be="width"in Pd?Pd.width|0:y.framebufferWidth-Nd;Qe="height"in Pd?Pd.height|0:y.framebufferHeight-Bd;Ue=y.viewportWidth;y.viewportWidth=Be;Jd=y.viewportHeight;y.viewportHeight=Qe;A.viewport(Nd,Bd,Be,Qe);ca[0]=Nd;ca[1]=Bd;ca[2]=Be;ca[3]=Qe;Ee=z.viewport;le=Ee.x|0;ce=Ee.y|
0;Td="width"in Ee?Ee.width|0:y.framebufferWidth-le;Ed="height"in Ee?Ee.height|0:y.framebufferHeight-ce;A.scissor(le,ce,Td,Ed);K[0]=le;K[1]=ce;K[2]=Td;K[3]=Ed;ja.buffer=z.positionBuffer;pd=!1;bd=null;td=0;Oc=!1;Hc=rd=0;gd=1;Sc=0;md=5126;zb=uc=yc=Tb=0;x(ja)?(pd=!0,bd=Ea.createStream(34962,ja),md=bd.dtype):(bd=Ea.getBuffer(ja))?md=bd.dtype:"constant"in ja?(gd=2,"number"===typeof ja.constant?(yc=ja.constant,uc=zb=Tb=0):(yc=0<ja.constant.length?ja.constant[0]:0,uc=1<ja.constant.length?ja.constant[1]:0,
zb=2<ja.constant.length?ja.constant[2]:0,Tb=3<ja.constant.length?ja.constant[3]:0)):(bd=x(ja.buffer)?Ea.createStream(34962,ja.buffer):Ea.getBuffer(ja.buffer),md="type"in ja?Da[ja.type]:bd.dtype,Oc=!!ja.normalized,Hc=ja.size|0,rd=ja.offset|0,Sc=ja.stride|0,td=ja.divisor|0);xc=l.location;Bb=D[xc];if(1===gd){Bb.buffer||A.enableVertexAttribArray(xc);Lc=Hc||2;if(Bb.type!==md||Bb.size!==Lc||Bb.buffer!==bd||Bb.normalized!==Oc||Bb.offset!==rd||Bb.stride!==Sc)A.bindBuffer(34962,bd.buffer),A.vertexAttribPointer(xc,
Lc,md,Oc,Sc,rd),Bb.type=md,Bb.size=Lc,Bb.buffer=bd,Bb.normalized=Oc,Bb.offset=rd,Bb.stride=Sc;Bb.divisor!==td&&(m.vertexAttribDivisorANGLE(xc,td),Bb.divisor=td)}else if(Bb.buffer&&(A.disableVertexAttribArray(xc),Bb.buffer=null),Bb.x!==yc||Bb.y!==uc||Bb.z!==zb||Bb.w!==Tb)A.vertexAttrib4f(xc,yc,uc,zb,Tb),Bb.x=yc,Bb.y=uc,Bb.z=zb,Bb.w=Tb;na.buffer=z.positionFractBuffer;lc=!1;Ic=null;hd=0;cd=!1;ec=Ec=0;Jc=1;oc=0;qc=5126;Pc=pb=pc=mc=0;x(na)?(lc=!0,Ic=Ea.createStream(34962,na),qc=Ic.dtype):(Ic=Ea.getBuffer(na))?
qc=Ic.dtype:"constant"in na?(Jc=2,"number"===typeof na.constant?(pc=na.constant,pb=Pc=mc=0):(pc=0<na.constant.length?na.constant[0]:0,pb=1<na.constant.length?na.constant[1]:0,Pc=2<na.constant.length?na.constant[2]:0,mc=3<na.constant.length?na.constant[3]:0)):(Ic=x(na.buffer)?Ea.createStream(34962,na.buffer):Ea.getBuffer(na.buffer),qc="type"in na?Da[na.type]:Ic.dtype,cd=!!na.normalized,ec=na.size|0,Ec=na.offset|0,oc=na.stride|0,hd=na.divisor|0);Yb=p.location;fb=D[Yb];if(1===Jc){fb.buffer||A.enableVertexAttribArray(Yb);
Kb=ec||2;if(fb.type!==qc||fb.size!==Kb||fb.buffer!==Ic||fb.normalized!==cd||fb.offset!==Ec||fb.stride!==oc)A.bindBuffer(34962,Ic.buffer),A.vertexAttribPointer(Yb,Kb,qc,cd,oc,Ec),fb.type=qc,fb.size=Kb,fb.buffer=Ic,fb.normalized=cd,fb.offset=Ec,fb.stride=oc;fb.divisor!==hd&&(m.vertexAttribDivisorANGLE(Yb,hd),fb.divisor=hd)}else if(fb.buffer&&(A.disableVertexAttribArray(Yb),fb.buffer=null),fb.x!==pc||fb.y!==pb||fb.z!==Pc||fb.w!==mc)A.vertexAttrib4f(Yb,pc,pb,Pc,mc),fb.x=pc,fb.y=pb,fb.z=Pc,fb.w=mc;Wa=
z.fill;ib=Wa[0];Kc=Wa[1];Gb=Wa[2];Mb=Wa[3];C&&Xa===ib&&Lb===Kc&&rc===Gb&&jb===Mb||(Xa=ib,Lb=Kc,rc=Gb,jb=Mb,A.uniform4f(B.location,ib,Kc,Gb,Mb));Eb=z.scale;Cb=Eb[0];gb=Eb[1];C&&yb===Cb&&Zb===gb||(yb=Cb,Zb=gb,A.uniform2f(n.location,Cb,gb));Nb=z.scaleFract;rb=Nb[0];Sb=Nb[1];C&&Sa===rb&&sb===Sb||(Sa=rb,sb=Sb,A.uniform2f(k.location,rb,Sb));ic=z.translate;hb=ic[0];Ha=ic[1];C&&qb===hb&&tb===Ha||(qb=hb,tb=Ha,A.uniform2f(u.location,hb,Ha));Ka=z.translateFract;db=Ka[0];Ma=Ka[1];C&&eb===db&&kb===Ma||(eb=db,
kb=Ma,A.uniform2f(w.location,db,Ma));Ya=z.id;C&&vb===Ya||(vb=Ya,A.uniform1f(v.location,Ya));ub=z.opacity;C&&Ra===ub||(Ra=ub,A.uniform1f(e.location,ub));Dc=h.call(this,y,z,C);Va=null;(Va=(Hb=x(Dc))?I.createStream(Dc):I.getElements(Dc))&&A.bindBuffer(34963,Va.buffer.buffer);if(Db=Va?Va.vertCount:-1)0<yd?Va?m.drawElementsInstancedANGLE(4,Db,Va.type,0<<(Va.type-5121>>1),yd):m.drawArraysInstancedANGLE(4,0,Db,yd):0>yd&&(Va?A.drawElements(4,Db,Va.type,0<<(Va.type-5121>>1)):A.drawArrays(4,0,Db)),y.viewportWidth=
Ue,y.viewportHeight=Jd,pd&&Ea.destroyStream(bd),lc&&Ea.destroyStream(Ic),Hb&&I.destroyStream(Va)}G.dirty=!0;ea.setVAO(null);f&&(d.cpuTime+=performance.now()-r)},draw:function(c){var b,a,h,g,m,z,q,E,F,M,va,aa,W,xa,Fa,qa,ya,wa,ia,Y,pa,oa;b=H.next;b!==H.cur&&(b?A.bindFramebuffer(36160,b.framebuffer):A.bindFramebuffer(36160,null),H.cur=b);if(G.dirty){b=J.dither;b!==G.dither&&(b?A.enable(3024):A.disable(3024),G.dither=b);b=J.depth_func;b!==G.depth_func&&(A.depthFunc(b),G.depth_func=b);b=P[0];z=P[1];if(b!==
N[0]||z!==N[1])A.depthRange(b,z),N[0]=b,N[1]=z;b=J.depth_mask;b!==G.depth_mask&&(A.depthMask(b),G.depth_mask=b);b=V[0];z=V[1];a=V[2];h=V[3];if(b!==T[0]||z!==T[1]||a!==T[2]||h!==T[3])A.colorMask(b,z,a,h),T[0]=b,T[1]=z,T[2]=a,T[3]=h;b=J.cull_enable;b!==G.cull_enable&&(b?A.enable(2884):A.disable(2884),G.cull_enable=b);b=J.cull_face;b!==G.cull_face&&(A.cullFace(b),G.cull_face=b);b=J.frontFace;b!==G.frontFace&&(A.frontFace(b),G.frontFace=b);b=J.lineWidth;b!==G.lineWidth&&(A.lineWidth(b),G.lineWidth=b);
b=J.polygonOffset_enable;b!==G.polygonOffset_enable&&(b?A.enable(32823):A.disable(32823),G.polygonOffset_enable=b);b=O[0];z=O[1];if(b!==Q[0]||z!==Q[1])A.polygonOffset(b,z),Q[0]=b,Q[1]=z;b=J.sample_alpha;b!==G.sample_alpha&&(b?A.enable(32926):A.disable(32926),G.sample_alpha=b);b=J.sample_enable;b!==G.sample_enable&&(b?A.enable(32928):A.disable(32928),G.sample_enable=b);b=R[0];z=R[1];if(b!==ra[0]||z!==ra[1])A.sampleCoverage(b,z),ra[0]=b,ra[1]=z;b=J.stencil_mask;b!==G.stencil_mask&&(A.stencilMask(b),
G.stencil_mask=b);b=L[0];z=L[1];a=L[2];if(b!==da[0]||z!==da[1]||a!==da[2])A.stencilFunc(b,z,a),da[0]=b,da[1]=z,da[2]=a;b=ga[0];z=ga[1];a=ga[2];h=ga[3];if(b!==Ba[0]||z!==Ba[1]||a!==Ba[2]||h!==Ba[3])A.stencilOpSeparate(b,z,a,h),Ba[0]=b,Ba[1]=z,Ba[2]=a,Ba[3]=h;b=X[0];z=X[1];a=X[2];h=X[3];if(b!==ma[0]||z!==ma[1]||a!==ma[2]||h!==ma[3])A.stencilOpSeparate(b,z,a,h),ma[0]=b,ma[1]=z,ma[2]=a,ma[3]=h}b=c.viewport;a=b.x|0;h=b.y|0;g="width"in b?b.width|0:y.framebufferWidth-a;m="height"in b?b.height|0:y.framebufferHeight-
h;b=y.viewportWidth;y.viewportWidth=g;z=y.viewportHeight;y.viewportHeight=m;A.viewport(a,h,g,m);ca[0]=a;ca[1]=h;ca[2]=g;ca[3]=m;A.blendColor(0,0,0,0);ba[0]=0;ba[1]=0;ba[2]=0;ba[3]=0;A.enable(3042);G.blend_enable=!0;A.blendEquationSeparate(32774,32774);la[0]=32774;la[1]=32774;A.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;A.disable(2929);G.depth_enable=!1;m=c.viewport;a=m.x|0;h=m.y|0;g="width"in m?m.width|0:y.framebufferWidth-a;m="height"in m?m.height|0:y.framebufferHeight-h;
A.scissor(a,h,g,m);K[0]=a;K[1]=h;K[2]=g;K[3]=m;A.enable(3089);G.scissor_enable=!0;A.disable(2960);G.stencil_enable=!1;if(a=G.profile)q=performance.now(),d.count++;A.useProgram(f.program);h=S.angle_instanced_arrays;ea.setVAO(null);ja.buffer=c.positionBuffer;g=!1;E=0;F=!1;va=M=0;aa=1;W=0;xa=5126;wa=ya=qa=Fa=0;x(ja)?(g=!0,m=Ea.createStream(34962,ja),xa=m.dtype):(m=Ea.getBuffer(ja))?xa=m.dtype:"constant"in ja?(aa=2,"number"===typeof ja.constant?(qa=ja.constant,ya=wa=Fa=0):(qa=0<ja.constant.length?ja.constant[0]:
0,ya=1<ja.constant.length?ja.constant[1]:0,wa=2<ja.constant.length?ja.constant[2]:0,Fa=3<ja.constant.length?ja.constant[3]:0)):(m=x(ja.buffer)?Ea.createStream(34962,ja.buffer):Ea.getBuffer(ja.buffer),xa="type"in ja?Da[ja.type]:m.dtype,F=!!ja.normalized,va=ja.size|0,M=ja.offset|0,W=ja.stride|0,E=ja.divisor|0);ia=l.location;Y=D[ia];if(1===aa){Y.buffer||A.enableVertexAttribArray(ia);va=va||2;if(Y.type!==xa||Y.size!==va||Y.buffer!==m||Y.normalized!==F||Y.offset!==M||Y.stride!==W)A.bindBuffer(34962,m.buffer),
A.vertexAttribPointer(ia,va,xa,F,W,M),Y.type=xa,Y.size=va,Y.buffer=m,Y.normalized=F,Y.offset=M,Y.stride=W;Y.divisor!==E&&(h.vertexAttribDivisorANGLE(ia,E),Y.divisor=E)}else if(Y.buffer&&(A.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==qa||Y.y!==ya||Y.z!==wa||Y.w!==Fa)A.vertexAttrib4f(ia,qa,ya,wa,Fa),Y.x=qa,Y.y=ya,Y.z=wa,Y.w=Fa;na.buffer=c.positionFractBuffer;E=!1;M=0;W=!1;Fa=xa=0;qa=1;ia=0;Y=5126;oa=pa=wa=ya=0;x(na)?(E=!0,F=Ea.createStream(34962,na),Y=F.dtype):(F=Ea.getBuffer(na))?Y=F.dtype:"constant"in
na?(qa=2,"number"===typeof na.constant?(wa=na.constant,pa=oa=ya=0):(wa=0<na.constant.length?na.constant[0]:0,pa=1<na.constant.length?na.constant[1]:0,oa=2<na.constant.length?na.constant[2]:0,ya=3<na.constant.length?na.constant[3]:0)):(F=x(na.buffer)?Ea.createStream(34962,na.buffer):Ea.getBuffer(na.buffer),Y="type"in na?Da[na.type]:F.dtype,W=!!na.normalized,Fa=na.size|0,xa=na.offset|0,ia=na.stride|0,M=na.divisor|0);va=p.location;aa=D[va];if(1===qa){aa.buffer||A.enableVertexAttribArray(va);Fa=Fa||2;
if(aa.type!==Y||aa.size!==Fa||aa.buffer!==F||aa.normalized!==W||aa.offset!==xa||aa.stride!==ia)A.bindBuffer(34962,F.buffer),A.vertexAttribPointer(va,Fa,Y,W,ia,xa),aa.type=Y,aa.size=Fa,aa.buffer=F,aa.normalized=W,aa.offset=xa,aa.stride=ia;aa.divisor!==M&&(h.vertexAttribDivisorANGLE(va,M),aa.divisor=M)}else if(aa.buffer&&(A.disableVertexAttribArray(va),aa.buffer=null),aa.x!==wa||aa.y!==pa||aa.z!==oa||aa.w!==ya)A.vertexAttrib4f(va,wa,pa,oa,ya),aa.x=wa,aa.y=pa,aa.z=oa,aa.w=ya;M=c.fill;A.uniform4f(B.location,
M[0],M[1],M[2],M[3]);M=c.scale;A.uniform2f(n.location,M[0],M[1]);M=c.scaleFract;A.uniform2f(k.location,M[0],M[1]);M=c.translate;A.uniform2f(u.location,M[0],M[1]);M=c.translateFract;A.uniform2f(w.location,M[0],M[1]);A.uniform1f(v.location,c.id);A.uniform1f(e.location,c.opacity);M=r.call(this,y,c,0);(M=(c=x(M))?I.createStream(M):I.getElements(M))&&A.bindBuffer(34963,M.buffer.buffer);if(W=M?M.vertCount:-1)xa=t.instances,0<xa?M?h.drawElementsInstancedANGLE(4,W,M.type,0<<(M.type-5121>>1),xa):h.drawArraysInstancedANGLE(4,
0,W,xa):0>xa&&(M?A.drawElements(4,W,M.type,0<<(M.type-5121>>1)):A.drawArrays(4,0,W)),G.dirty=!0,ea.setVAO(null),y.viewportWidth=b,y.viewportHeight=z,a&&(d.cpuTime+=performance.now()-q),g&&Ea.destroyStream(m),E&&Ea.destroyStream(F),c&&I.destroyStream(M)},scope:function(c,e,a){var l,h,k,p,n,f,u,r,w,C,v,B,D,K,O,A,H,L,P,X,N,ca,T,R,Q,S,da,ga,ra,U,V,ma,ea,ba,la,Ba,oe,yd,Pd,Nd,Bd,Be,Qe,Ue,Jd,Ee,le,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,
ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub;l=c.viewport;h=l.x|0;k=l.y|0;p="width"in l?l.width|0:y.framebufferWidth-h;n="height"in l?l.height|0:y.framebufferHeight-k;f=y.viewportWidth;y.viewportWidth=p;u=y.viewportHeight;y.viewportHeight=n;r=va[0];va[0]=h;w=va[1];va[1]=k;C=va[2];va[2]=p;v=va[3];va[3]=n;B=z[0];z[0]=0;D=z[1];z[1]=0;K=z[2];z[2]=0;O=z[3];z[3]=0;A=J.blend_enable;J.blend_enable=!0;H=M[0];M[0]=32774;L=M[1];M[1]=32774;P=oa[0];oa[0]=770;X=oa[1];
oa[1]=771;N=oa[2];oa[2]=773;ca=oa[3];oa[3]=1;T=J.depth_enable;J.depth_enable=!1;R=c.viewport;Q=R.x|0;S=R.y|0;da="width"in R?R.width|0:y.framebufferWidth-Q;ga="height"in R?R.height|0:y.framebufferHeight-S;ra=pa[0];pa[0]=Q;U=pa[1];pa[1]=S;V=pa[2];pa[2]=da;ma=pa[3];pa[3]=ga;ea=J.scissor_enable;J.scissor_enable=!0;ba=J.stencil_enable;J.stencil_enable=!1;if(la=G.profile)Ba=performance.now(),d.count++;oe=q.call(this,y,c,a);yd=null;yd=(Pd=x(oe))?I.createStream(oe):I.getElements(oe);Nd=t.elements;t.elements=
yd;Bd=t.offset;t.offset=0;Be=yd?yd.vertCount:-1;Qe=t.count;t.count=Be;Ue=t.primitive;t.primitive=4;Jd=c.fill;Ee=E[14];E[14]=Jd;le=c.id;ce=E[31];E[31]=le;Td=c.opacity;Ed=E[10];E[10]=Td;pd=y.pixelRatio;bd=E[34];E[34]=pd;td=c.scale;Oc=E[6];E[6]=td;rd=c.scaleFract;Hc=E[7];E[7]=rd;gd=c.translate;Sc=E[8];E[8]=gd;md=c.translateFract;Tb=E[9];E[9]=md;yc=m.call(this,y,c,a);uc=E[3];E[3]=yc;ja.buffer=c.positionBuffer;zb=!1;xc=null;Bb=0;Lc=!1;Ic=lc=0;hd=1;cd=0;Ec=5126;qc=oc=Jc=ec=0;x(ja)?(zb=!0,xc=Ea.createStream(34962,
ja),Ec=xc.dtype):(xc=Ea.getBuffer(ja))?Ec=xc.dtype:"constant"in ja?(hd=2,"number"===typeof ja.constant?(Jc=ja.constant,oc=qc=ec=0):(Jc=0<ja.constant.length?ja.constant[0]:0,oc=1<ja.constant.length?ja.constant[1]:0,qc=2<ja.constant.length?ja.constant[2]:0,ec=3<ja.constant.length?ja.constant[3]:0)):(xc=x(ja.buffer)?Ea.createStream(34962,ja.buffer):Ea.getBuffer(ja.buffer),Ec="type"in ja?Da[ja.type]:xc.dtype,Lc=!!ja.normalized,Ic=ja.size|0,lc=ja.offset|0,cd=ja.stride|0,Bb=ja.divisor|0);mc=b.buffer;b.buffer=
xc;pc=b.divisor;b.divisor=Bb;pb=b.normalized;b.normalized=Lc;Pc=b.offset;b.offset=lc;Yb=b.size;b.size=Ic;fb=b.state;b.state=hd;Kb=b.stride;b.stride=cd;Wa=b.type;b.type=Ec;ib=b.w;b.w=ec;Xa=b.x;b.x=Jc;Kc=b.y;b.y=oc;Lb=b.z;b.z=qc;na.buffer=c.positionFractBuffer;Gb=!1;rc=null;Mb=0;jb=!1;Cb=Eb=0;yb=1;gb=0;Zb=5126;Sb=Sa=rb=Nb=0;x(na)?(Gb=!0,rc=Ea.createStream(34962,na),Zb=rc.dtype):(rc=Ea.getBuffer(na))?Zb=rc.dtype:"constant"in na?(yb=2,"number"===typeof na.constant?(rb=na.constant,Sa=Sb=Nb=0):(rb=0<na.constant.length?
na.constant[0]:0,Sa=1<na.constant.length?na.constant[1]:0,Sb=2<na.constant.length?na.constant[2]:0,Nb=3<na.constant.length?na.constant[3]:0)):(rc=x(na.buffer)?Ea.createStream(34962,na.buffer):Ea.getBuffer(na.buffer),Zb="type"in na?Da[na.type]:rc.dtype,jb=!!na.normalized,Cb=na.size|0,Eb=na.offset|0,gb=na.stride|0,Mb=na.divisor|0);sb=g.buffer;g.buffer=rc;ic=g.divisor;g.divisor=Mb;hb=g.normalized;g.normalized=jb;qb=g.offset;g.offset=Eb;Ha=g.size;g.size=Cb;tb=g.state;g.state=yb;Ka=g.stride;g.stride=gb;
db=g.type;g.type=Zb;eb=g.w;g.w=Nb;Ma=g.x;g.x=rb;kb=g.y;g.y=Sa;Ya=g.z;g.z=Sb;vb=F.vert;F.vert=42;ub=F.frag;F.frag=41;G.dirty=!0;e(y,c,a);y.viewportWidth=f;y.viewportHeight=u;va[0]=r;va[1]=w;va[2]=C;va[3]=v;z[0]=B;z[1]=D;z[2]=K;z[3]=O;J.blend_enable=A;M[0]=H;M[1]=L;oa[0]=P;oa[1]=X;oa[2]=N;oa[3]=ca;J.depth_enable=T;pa[0]=ra;pa[1]=U;pa[2]=V;pa[3]=ma;J.scissor_enable=ea;J.stencil_enable=ba;la&&(d.cpuTime+=performance.now()-Ba);Pd&&I.destroyStream(yd);t.elements=Nd;t.offset=Bd;t.count=Qe;t.primitive=Ue;
E[14]=Ee;E[31]=ce;E[10]=Ed;E[34]=bd;E[6]=Oc;E[7]=Hc;E[8]=Sc;E[9]=Tb;E[3]=uc;zb&&Ea.destroyStream(xc);b.buffer=mc;b.divisor=pc;b.normalized=pb;b.offset=Pc;b.size=Yb;b.state=fb;b.stride=Kb;b.type=Wa;b.w=ib;b.x=Xa;b.y=Kc;b.z=Lb;Gb&&Ea.destroyStream(rc);g.buffer=sb;g.divisor=ic;g.normalized=hb;g.offset=qb;g.size=Ha;g.state=tb;g.stride=Ka;g.type=db;g.w=eb;g.x=Ma;g.y=kb;g.z=Ya;F.vert=vb;F.frag=ub;G.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,Ea,y,G,t,I,x,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua){var ha,fa,sa,ua,Ca,lb,Fb,aa,W,xa,Fa,qa,ya,wa,ia,Y,ta,Ia,Ja,Oa,Z,Gc,ac,Ga,bc,Qb,Ae,Id,Ad,Sd,De,Dd,$d,se,oe,yd,Pd,Nd,Bd;ha=a.attributes;fa=a.buffer;sa=a.context;ua=a.current;Ca=a.draw;lb=a.elements;Fb=a.extensions;aa=a.framebuffer;W=a.gl;xa=a.isBufferArgs;Fa=a.next;qa=a.shader;ya=a.uniforms;wa=a.vao;ia=Fa.blend_color;Y=ua.blend_color;ta=Fa.blend_equation;
Ia=ua.blend_equation;Ja=Fa.blend_func;Oa=ua.blend_func;Z=Fa.colorMask;Gc=ua.colorMask;ac=Fa.depth_range;Ga=ua.depth_range;bc=Fa.polygonOffset_offset;Qb=ua.polygonOffset_offset;Ae=Fa.sample_coverage;Id=ua.sample_coverage;Ad=Fa.scissor_box;Sd=ua.scissor_box;De=Fa.stencil_func;Dd=ua.stencil_func;$d=Fa.stencil_opBack;se=ua.stencil_opBack;oe=Fa.stencil_opFront;yd=ua.stencil_opFront;Pd=Fa.viewport;Nd=ua.viewport;Bd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(c,e){var b,a,l,h,g,k;b=aa.next;b!==aa.cur&&(b?W.bindFramebuffer(36160,b.framebuffer):W.bindFramebuffer(36160,null),aa.cur=b);if(ua.dirty){var p,n,f,u,r,m,w,C,v,z,y,B,D,q,G,t,Ea,A,H,I,E,J,F,qa,x,ia,ya,S,ob,ea,ka,Ja,Kb,Wa;p=Fa.dither;p!==ua.dither&&(p?W.enable(3024):W.disable(3024),ua.dither=p);n=ta[0];f=ta[1];if(n!==Ia[0]||f!==Ia[1])W.blendEquationSeparate(n,f),Ia[0]=n,Ia[1]=f;u=Fa.depth_func;u!==ua.depth_func&&(W.depthFunc(u),ua.depth_func=u);r=ac[0];m=ac[1];if(r!==Ga[0]||m!==
Ga[1])W.depthRange(r,m),Ga[0]=r,Ga[1]=m;w=Fa.depth_mask;w!==ua.depth_mask&&(W.depthMask(w),ua.depth_mask=w);C=Z[0];v=Z[1];z=Z[2];y=Z[3];if(C!==Gc[0]||v!==Gc[1]||z!==Gc[2]||y!==Gc[3])W.colorMask(C,v,z,y),Gc[0]=C,Gc[1]=v,Gc[2]=z,Gc[3]=y;B=Fa.cull_enable;B!==ua.cull_enable&&(B?W.enable(2884):W.disable(2884),ua.cull_enable=B);D=Fa.cull_face;D!==ua.cull_face&&(W.cullFace(D),ua.cull_face=D);q=Fa.frontFace;q!==ua.frontFace&&(W.frontFace(q),ua.frontFace=q);G=Fa.lineWidth;G!==ua.lineWidth&&(W.lineWidth(G),
ua.lineWidth=G);t=Fa.polygonOffset_enable;t!==ua.polygonOffset_enable&&(t?W.enable(32823):W.disable(32823),ua.polygonOffset_enable=t);Ea=bc[0];A=bc[1];if(Ea!==Qb[0]||A!==Qb[1])W.polygonOffset(Ea,A),Qb[0]=Ea,Qb[1]=A;H=Fa.sample_alpha;H!==ua.sample_alpha&&(H?W.enable(32926):W.disable(32926),ua.sample_alpha=H);I=Fa.sample_enable;I!==ua.sample_enable&&(I?W.enable(32928):W.disable(32928),ua.sample_enable=I);E=Ae[0];J=Ae[1];if(E!==Id[0]||J!==Id[1])W.sampleCoverage(E,J),Id[0]=E,Id[1]=J;F=Fa.stencil_mask;
F!==ua.stencil_mask&&(W.stencilMask(F),ua.stencil_mask=F);qa=De[0];x=De[1];ia=De[2];if(qa!==Dd[0]||x!==Dd[1]||ia!==Dd[2])W.stencilFunc(qa,x,ia),Dd[0]=qa,Dd[1]=x,Dd[2]=ia;ya=oe[0];S=oe[1];ob=oe[2];ea=oe[3];if(ya!==yd[0]||S!==yd[1]||ob!==yd[2]||ea!==yd[3])W.stencilOpSeparate(ya,S,ob,ea),yd[0]=ya,yd[1]=S,yd[2]=ob,yd[3]=ea;ka=$d[0];Ja=$d[1];Kb=$d[2];Wa=$d[3];if(ka!==se[0]||Ja!==se[1]||Kb!==se[2]||Wa!==se[3])W.stencilOpSeparate(ka,Ja,Kb,Wa),se[0]=ka,se[1]=Ja,se[2]=Kb,se[3]=Wa}W.blendColor(0,0,0,1);Y[0]=
0;Y[1]=0;Y[2]=0;Y[3]=1;W.enable(3042);ua.blend_enable=!0;W.blendFuncSeparate(770,771,773,1);Oa[0]=770;Oa[1]=771;Oa[2]=773;Oa[3]=1;W.disable(2929);ua.depth_enable=!1;W.enable(3089);ua.scissor_enable=!0;W.disable(2960);ua.stencil_enable=!1;if(a=ua.profile)l=performance.now(),d.count+=e;W.useProgram(ba.program);h=Fb.angle_instanced_arrays;var ib;wa.setVAO(null);W.uniform1i(L.location,!1);W.uniform1i(Ba.location,Q.bind());ib=Ca.instances;for(g=0;g<e;++g){k=c[g];var Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,
Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Pd,Ad,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,
rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Xa=k.viewport;Kc=Xa.x|0;Lb=Xa.y|0;Gb="width"in Xa?Xa.width|0:sa.framebufferWidth-Kc;rc="height"in Xa?Xa.height|0:sa.framebufferHeight-Lb;Mb=sa.viewportWidth;sa.viewportWidth=Gb;jb=sa.viewportHeight;sa.viewportHeight=rc;W.viewport(Kc,Lb,Gb,rc);Nd[0]=Kc;Nd[1]=Lb;Nd[2]=Gb;Nd[3]=rc;Eb=k.viewport;Cb=Eb.x|0;yb=Eb.y|0;gb="width"in Eb?Eb.width|0:sa.framebufferWidth-Cb;Zb="height"in Eb?Eb.height|0:sa.framebufferHeight-yb;W.scissor(Cb,yb,gb,
Zb);Sd[0]=Cb;Sd[1]=yb;Sd[2]=gb;Sd[3]=Zb;Nb=M.call(this,sa,k,g);rb=!1;Sa=null;Sb=0;sb=!1;hb=ic=0;qb=1;Ha=0;tb=5126;Ma=eb=db=Ka=0;xa(Nb)?(rb=!0,Sa=fa.createStream(34962,Nb),tb=Sa.dtype):(Sa=fa.getBuffer(Nb))?tb=Sa.dtype:"constant"in Nb?(qb=2,"number"===typeof Nb.constant?(db=Nb.constant,eb=Ma=Ka=0):(db=0<Nb.constant.length?Nb.constant[0]:0,eb=1<Nb.constant.length?Nb.constant[1]:0,Ma=2<Nb.constant.length?Nb.constant[2]:0,Ka=3<Nb.constant.length?Nb.constant[3]:0)):(Sa=xa(Nb.buffer)?fa.createStream(34962,
Nb.buffer):fa.getBuffer(Nb.buffer),tb="type"in Nb?Bd[Nb.type]:Sa.dtype,sb=!!Nb.normalized,hb=Nb.size|0,ic=Nb.offset|0,Ha=Nb.stride|0,Sb=Nb.divisor|0);kb=Pa.location;Ya=ha[kb];if(1===qb){Ya.buffer||W.enableVertexAttribArray(kb);vb=hb||1;if(Ya.type!==tb||Ya.size!==vb||Ya.buffer!==Sa||Ya.normalized!==sb||Ya.offset!==ic||Ya.stride!==Ha)W.bindBuffer(34962,Sa.buffer),W.vertexAttribPointer(kb,vb,tb,sb,Ha,ic),Ya.type=tb,Ya.size=vb,Ya.buffer=Sa,Ya.normalized=sb,Ya.offset=ic,Ya.stride=Ha;Ya.divisor!==Sb&&(h.vertexAttribDivisorANGLE(kb,
Sb),Ya.divisor=Sb)}else if(Ya.buffer&&(W.disableVertexAttribArray(kb),Ya.buffer=null),Ya.x!==db||Ya.y!==eb||Ya.z!==Ma||Ya.w!==Ka)W.vertexAttrib4f(kb,db,eb,Ma,Ka),Ya.x=db,Ya.y=eb,Ya.z=Ma,Ya.w=Ka;ub=la.call(this,sa,k,g);Ra=!1;Dc=null;Va=0;Hb=!1;La=Db=0;zd=1;$a=0;Ib=5126;$b=Na=mb=Jb=0;xa(ub)?(Ra=!0,Dc=fa.createStream(34962,ub),Ib=Dc.dtype):(Dc=fa.getBuffer(ub))?Ib=Dc.dtype:"constant"in ub?(zd=2,"number"===typeof ub.constant?(mb=ub.constant,Na=$b=Jb=0):(mb=0<ub.constant.length?ub.constant[0]:0,Na=1<ub.constant.length?
ub.constant[1]:0,$b=2<ub.constant.length?ub.constant[2]:0,Jb=3<ub.constant.length?ub.constant[3]:0)):(Dc=xa(ub.buffer)?fa.createStream(34962,ub.buffer):fa.getBuffer(ub.buffer),Ib="type"in ub?Bd[ub.type]:Dc.dtype,Hb=!!ub.normalized,La=ub.size|0,Db=ub.offset|0,$a=ub.stride|0,Va=ub.divisor|0);Qa=Xb.location;wb=ha[Qa];if(1===zd){wb.buffer||W.enableVertexAttribArray(Qa);xb=La||1;if(wb.type!==Ib||wb.size!==xb||wb.buffer!==Dc||wb.normalized!==Hb||wb.offset!==Db||wb.stride!==$a)W.bindBuffer(34962,Dc.buffer),
W.vertexAttribPointer(Qa,xb,Ib,Hb,$a,Db),wb.type=Ib,wb.size=xb,wb.buffer=Dc,wb.normalized=Hb,wb.offset=Db,wb.stride=$a;wb.divisor!==Va&&(h.vertexAttribDivisorANGLE(Qa,Va),wb.divisor=Va)}else if(wb.buffer&&(W.disableVertexAttribArray(Qa),wb.buffer=null),wb.x!==mb||wb.y!==Na||wb.z!==$b||wb.w!==Jb)W.vertexAttrib4f(Qa,mb,Na,$b,Jb),wb.x=mb,wb.y=Na,wb.z=$b,wb.w=Jb;Ta=oa.call(this,sa,k,g);nb=!1;fc=null;Bc=0;vc=!1;jc=cb=0;Mc=1;Za=0;nd=5126;tc=Ub=ab=Ab=0;xa(Ta)?(nb=!0,fc=fa.createStream(34962,Ta),nd=fc.dtype):
(fc=fa.getBuffer(Ta))?nd=fc.dtype:"constant"in Ta?(Mc=2,"number"===typeof Ta.constant?(ab=Ta.constant,Ub=tc=Ab=0):(ab=0<Ta.constant.length?Ta.constant[0]:0,Ub=1<Ta.constant.length?Ta.constant[1]:0,tc=2<Ta.constant.length?Ta.constant[2]:0,Ab=3<Ta.constant.length?Ta.constant[3]:0)):(fc=xa(Ta.buffer)?fa.createStream(34962,Ta.buffer):fa.getBuffer(Ta.buffer),nd="type"in Ta?Bd[Ta.type]:fc.dtype,vc=!!Ta.normalized,jc=Ta.size|0,cb=Ta.offset|0,Za=Ta.stride|0,Bc=Ta.divisor|0);Vb=za.location;Ob=ha[Vb];if(1===
Mc){Ob.buffer||W.enableVertexAttribArray(Vb);Nc=jc||1;if(Ob.type!==nd||Ob.size!==Nc||Ob.buffer!==fc||Ob.normalized!==vc||Ob.offset!==cb||Ob.stride!==Za)W.bindBuffer(34962,fc.buffer),W.vertexAttribPointer(Vb,Nc,nd,vc,Za,cb),Ob.type=nd,Ob.size=Nc,Ob.buffer=fc,Ob.normalized=vc,Ob.offset=cb,Ob.stride=Za;Ob.divisor!==Bc&&(h.vertexAttribDivisorANGLE(Vb,Bc),Ob.divisor=Bc)}else if(Ob.buffer&&(W.disableVertexAttribArray(Vb),Ob.buffer=null),Ob.x!==ab||Ob.y!==Ub||Ob.z!==tc||Ob.w!==Ab)W.vertexAttrib4f(Vb,ab,
Ub,tc,Ab),Ob.x=ab,Ob.y=Ub,Ob.z=tc,Ob.w=Ab;Pb=U.call(this,sa,k,g);Od=!1;Fc=null;vd=0;Qc=!1;sd=Yc=0;nc=1;wc=0;gc=5126;Wb=Rb=sc=bb=0;xa(Pb)?(Od=!0,Fc=fa.createStream(34962,Pb),gc=Fc.dtype):(Fc=fa.getBuffer(Pb))?gc=Fc.dtype:"constant"in Pb?(nc=2,"number"===typeof Pb.constant?(sc=Pb.constant,Rb=Wb=bb=0):(sc=0<Pb.constant.length?Pb.constant[0]:0,Rb=1<Pb.constant.length?Pb.constant[1]:0,Wb=2<Pb.constant.length?Pb.constant[2]:0,bb=3<Pb.constant.length?Pb.constant[3]:0)):(Fc=xa(Pb.buffer)?fa.createStream(34962,
Pb.buffer):fa.getBuffer(Pb.buffer),gc="type"in Pb?Bd[Pb.type]:Fc.dtype,Qc=!!Pb.normalized,sd=Pb.size|0,Yc=Pb.offset|0,wc=Pb.stride|0,vd=Pb.divisor|0);dc=Ua.location;hc=ha[dc];if(1===nc){hc.buffer||W.enableVertexAttribArray(dc);zc=sd||1;if(hc.type!==gc||hc.size!==zc||hc.buffer!==Fc||hc.normalized!==Qc||hc.offset!==Yc||hc.stride!==wc)W.bindBuffer(34962,Fc.buffer),W.vertexAttribPointer(dc,zc,gc,Qc,wc,Yc),hc.type=gc,hc.size=zc,hc.buffer=Fc,hc.normalized=Qc,hc.offset=Yc,hc.stride=wc;hc.divisor!==vd&&(h.vertexAttribDivisorANGLE(dc,
vd),hc.divisor=vd)}else if(hc.buffer&&(W.disableVertexAttribArray(dc),hc.buffer=null),hc.x!==sc||hc.y!==Rb||hc.z!==Wb||hc.w!==bb)W.vertexAttrib4f(dc,sc,Rb,Wb,bb),hc.x=sc,hc.y=Rb,hc.z=Wb,hc.w=bb;Cc=V.call(this,sa,k,g);dd=!1;Tc=null;Uc=0;Vc=!1;od=Zc=0;ed=1;$c=0;kc=5126;fd=Xc=ad=cc=0;xa(Cc)?(dd=!0,Tc=fa.createStream(34962,Cc),kc=Tc.dtype):(Tc=fa.getBuffer(Cc))?kc=Tc.dtype:"constant"in Cc?(ed=2,"number"===typeof Cc.constant?(ad=Cc.constant,Xc=fd=cc=0):(ad=0<Cc.constant.length?Cc.constant[0]:0,Xc=1<Cc.constant.length?
Cc.constant[1]:0,fd=2<Cc.constant.length?Cc.constant[2]:0,cc=3<Cc.constant.length?Cc.constant[3]:0)):(Tc=xa(Cc.buffer)?fa.createStream(34962,Cc.buffer):fa.getBuffer(Cc.buffer),kc="type"in Cc?Bd[Cc.type]:Tc.dtype,Vc=!!Cc.normalized,od=Cc.size|0,Zc=Cc.offset|0,$c=Cc.stride|0,Uc=Cc.divisor|0);Ac=ja.location;jd=ha[Ac];if(1===ed){jd.buffer||W.enableVertexAttribArray(Ac);Pd=od||1;if(jd.type!==kc||jd.size!==Pd||jd.buffer!==Tc||jd.normalized!==Vc||jd.offset!==Zc||jd.stride!==$c)W.bindBuffer(34962,Tc.buffer),
W.vertexAttribPointer(Ac,Pd,kc,Vc,$c,Zc),jd.type=kc,jd.size=Pd,jd.buffer=Tc,jd.normalized=Vc,jd.offset=Zc,jd.stride=$c;jd.divisor!==Uc&&(h.vertexAttribDivisorANGLE(Ac,Uc),jd.divisor=Uc)}else if(jd.buffer&&(W.disableVertexAttribArray(Ac),jd.buffer=null),jd.x!==ad||jd.y!==Xc||jd.z!==fd||jd.w!==cc)W.vertexAttrib4f(Ac,ad,Xc,fd,cc),jd.x=ad,jd.y=Xc,jd.z=fd,jd.w=cc;Ad=T.call(this,sa,k,g);pe=!1;kd=null;Fe=0;Fd=!1;ae=he=0;Ud=1;Md=0;Kd=5126;ud=wd=Wc=qd=0;xa(Ad)?(pe=!0,kd=fa.createStream(34962,Ad),Kd=kd.dtype):
(kd=fa.getBuffer(Ad))?Kd=kd.dtype:"constant"in Ad?(Ud=2,"number"===typeof Ad.constant?(Wc=Ad.constant,wd=ud=qd=0):(Wc=0<Ad.constant.length?Ad.constant[0]:0,wd=1<Ad.constant.length?Ad.constant[1]:0,ud=2<Ad.constant.length?Ad.constant[2]:0,qd=3<Ad.constant.length?Ad.constant[3]:0)):(kd=xa(Ad.buffer)?fa.createStream(34962,Ad.buffer):fa.getBuffer(Ad.buffer),Kd="type"in Ad?Bd[Ad.type]:kd.dtype,Fd=!!Ad.normalized,ae=Ad.size|0,he=Ad.offset|0,Md=Ad.stride|0,Fe=Ad.divisor|0);ld=pa.location;xd=ha[ld];if(1===
Ud){xd.buffer||W.enableVertexAttribArray(ld);Gd=ae||1;if(xd.type!==Kd||xd.size!==Gd||xd.buffer!==kd||xd.normalized!==Fd||xd.offset!==he||xd.stride!==Md)W.bindBuffer(34962,kd.buffer),W.vertexAttribPointer(ld,Gd,Kd,Fd,Md,he),xd.type=Kd,xd.size=Gd,xd.buffer=kd,xd.normalized=Fd,xd.offset=he,xd.stride=Md;xd.divisor!==Fe&&(h.vertexAttribDivisorANGLE(ld,Fe),xd.divisor=Fe)}else if(xd.buffer&&(W.disableVertexAttribArray(ld),xd.buffer=null),xd.x!==Wc||xd.y!==wd||xd.z!==ud||xd.w!==qd)W.vertexAttrib4f(ld,Wc,
wd,ud,qd),xd.x=Wc,xd.y=wd,xd.z=ud,xd.w=qd;Hd=P.call(this,sa,k,g);je=!1;me=null;ve=0;ne=!1;ie=ke=0;we=1;fe=0;qe=5126;te=xe=id=Rc=0;xa(Hd)?(je=!0,me=fa.createStream(34962,Hd),qe=me.dtype):(me=fa.getBuffer(Hd))?qe=me.dtype:"constant"in Hd?(we=2,"number"===typeof Hd.constant?(id=Hd.constant,xe=te=Rc=0):(id=0<Hd.constant.length?Hd.constant[0]:0,xe=1<Hd.constant.length?Hd.constant[1]:0,te=2<Hd.constant.length?Hd.constant[2]:0,Rc=3<Hd.constant.length?Hd.constant[3]:0)):(me=xa(Hd.buffer)?fa.createStream(34962,
Hd.buffer):fa.getBuffer(Hd.buffer),qe="type"in Hd?Bd[Hd.type]:me.dtype,ne=!!Hd.normalized,ie=Hd.size|0,ke=Hd.offset|0,fe=Hd.stride|0,ve=Hd.divisor|0);Qd=K.location;Vd=ha[Qd];if(1===we){Vd.buffer||W.enableVertexAttribArray(Qd);Wd=ie||4;if(Vd.type!==qe||Vd.size!==Wd||Vd.buffer!==me||Vd.normalized!==ne||Vd.offset!==ke||Vd.stride!==fe)W.bindBuffer(34962,me.buffer),W.vertexAttribPointer(Qd,Wd,qe,ne,fe,ke),Vd.type=qe,Vd.size=Wd,Vd.buffer=me,Vd.normalized=ne,Vd.offset=ke,Vd.stride=fe;Vd.divisor!==ve&&(h.vertexAttribDivisorANGLE(Qd,
ve),Vd.divisor=ve)}else if(Vd.buffer&&(W.disableVertexAttribArray(Qd),Vd.buffer=null),Vd.x!==id||Vd.y!==xe||Vd.z!==te||Vd.w!==Rc)W.vertexAttrib4f(Qd,id,xe,te,Rc),Vd.x=id,Vd.y=xe,Vd.z=te,Vd.w=Rc;Xd=N.call(this,sa,k,g);re=!1;Ce=null;Ge=0;ue=!1;We=Ve=0;Re=1;ye=0;Je=5126;Ke=Ne=Me=Le=0;xa(Xd)?(re=!0,Ce=fa.createStream(34962,Xd),Je=Ce.dtype):(Ce=fa.getBuffer(Xd))?Je=Ce.dtype:"constant"in Xd?(Re=2,"number"===typeof Xd.constant?(Me=Xd.constant,Ne=Ke=Le=0):(Me=0<Xd.constant.length?Xd.constant[0]:0,Ne=1<Xd.constant.length?
Xd.constant[1]:0,Ke=2<Xd.constant.length?Xd.constant[2]:0,Le=3<Xd.constant.length?Xd.constant[3]:0)):(Ce=xa(Xd.buffer)?fa.createStream(34962,Xd.buffer):fa.getBuffer(Xd.buffer),Je="type"in Xd?Bd[Xd.type]:Ce.dtype,ue=!!Xd.normalized,We=Xd.size|0,Ve=Xd.offset|0,ye=Xd.stride|0,Ge=Xd.divisor|0);Rd=ra.location;be=ha[Rd];if(1===Re){be.buffer||W.enableVertexAttribArray(Rd);ee=We||4;if(be.type!==Je||be.size!==ee||be.buffer!==Ce||be.normalized!==ue||be.offset!==Ve||be.stride!==ye)W.bindBuffer(34962,Ce.buffer),
W.vertexAttribPointer(Rd,ee,Je,ue,ye,Ve),be.type=Je,be.size=ee,be.buffer=Ce,be.normalized=ue,be.offset=Ve,be.stride=ye;be.divisor!==Ge&&(h.vertexAttribDivisorANGLE(Rd,Ge),be.divisor=Ge)}else if(be.buffer&&(W.disableVertexAttribArray(Rd),be.buffer=null),be.x!==Me||be.y!==Ne||be.z!==Ke||be.w!==Le)W.vertexAttrib4f(Rd,Me,Ne,Ke,Le),be.x=Me,be.y=Ne,be.z=Ke,be.w=Le;ge=O.call(this,sa,k,g);Oe=!1;Ld=null;Yd=0;He=!1;df=Pe=0;cf=1;Xe=0;Se=5126;Ze=Ye=af=bf=0;xa(ge)?(Oe=!0,Ld=fa.createStream(34962,ge),Se=Ld.dtype):
(Ld=fa.getBuffer(ge))?Se=Ld.dtype:"constant"in ge?(cf=2,"number"===typeof ge.constant?(af=ge.constant,Ye=Ze=bf=0):(af=0<ge.constant.length?ge.constant[0]:0,Ye=1<ge.constant.length?ge.constant[1]:0,Ze=2<ge.constant.length?ge.constant[2]:0,bf=3<ge.constant.length?ge.constant[3]:0)):(Ld=xa(ge.buffer)?fa.createStream(34962,ge.buffer):fa.getBuffer(ge.buffer),Se="type"in ge?Bd[ge.type]:Ld.dtype,He=!!ge.normalized,df=ge.size|0,Pe=ge.offset|0,Xe=ge.stride|0,Yd=ge.divisor|0);Zd=da.location;de=ha[Zd];if(1===
cf){de.buffer||W.enableVertexAttribArray(Zd);$e=df||1;if(de.type!==Se||de.size!==$e||de.buffer!==Ld||de.normalized!==He||de.offset!==Pe||de.stride!==Xe)W.bindBuffer(34962,Ld.buffer),W.vertexAttribPointer(Zd,$e,Se,He,Xe,Pe),de.type=Se,de.size=$e,de.buffer=Ld,de.normalized=He,de.offset=Pe,de.stride=Xe;de.divisor!==Yd&&(h.vertexAttribDivisorANGLE(Zd,Yd),de.divisor=Yd)}else if(de.buffer&&(W.disableVertexAttribArray(Zd),de.buffer=null),de.x!==af||de.y!==Ye||de.z!==Ze||de.w!==bf)W.vertexAttrib4f(Zd,af,
Ye,Ze,bf),de.x=af,de.y=Ye,de.z=Ze,de.w=bf;kf=sa.pixelRatio;g&&of===kf||(of=kf,W.uniform1f(va.location,kf));gf=k.scale;lf=gf[0];nf=gf[1];g&&mf===lf&&sf===nf||(mf=lf,sf=nf,W.uniform2f(ca.location,lf,nf));pf=k.scaleFract;tf=pf[0];Df=pf[1];g&&Cf===tf&&Te===Df||(Cf=tf,Te=Df,W.uniform2f(Da.location,tf,Df));Ie=k.translate;qf=Ie[0];Ef=Ie[1];g&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,W.uniform2f(na.location,qf,Ef));Bf=k.translateFract;Ff=Bf[0];xf=Bf[1];g&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,W.uniform2f(Aa.location,Ff,xf));
wf=R.call(this,sa,k,g);zf=wf[0];Jf=wf[1];g&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,W.uniform2f(ga.location,zf,Jf));Lf=k.opacity;g&&Mf===Lf||(Mf=Lf,W.uniform1f(ma.location,Lf));(uf=k.markerTexture)&&"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;W.uniform1i(X.location,Rf.bind());If=k.elements;vf=null;(vf=(dg=xa(If))?lb.createStream(If):lb.getElements(If))&&W.bindBuffer(34963,vf.buffer.buffer);Sf=k.offset;if(Tf=k.count)0<ib?vf?h.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),ib):
h.drawArraysInstancedANGLE(0,Sf,Tf,ib):0>ib&&(vf?W.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):W.drawArrays(0,Sf,Tf)),sa.viewportWidth=Mb,sa.viewportHeight=jb,rb&&fa.destroyStream(Sa),Ra&&fa.destroyStream(Dc),nb&&fa.destroyStream(fc),Od&&fa.destroyStream(Fc),dd&&fa.destroyStream(Tc),pe&&fa.destroyStream(kd),je&&fa.destroyStream(me),re&&fa.destroyStream(Ce),Oe&&fa.destroyStream(Ld),Rf.unbind(),dg&&lb.destroyStream(vf)}Q.unbind();ua.dirty=!0;wa.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},
draw:function(a){var k,p,n,u,w,z,y,D,G,O,t,Ea,A,H,I,E,P,J,N,F,qa,T,M,x,ia,R,Q,ya,S,ob,U,V,ea,ba,la,ka,oa,Ja,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,Ad,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Pd,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,
te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye;k=aa.next;k!==aa.cur&&(k?W.bindFramebuffer(36160,k.framebuffer):W.bindFramebuffer(36160,null),aa.cur=k);if(ua.dirty){var Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf;Je=Fa.dither;Je!==ua.dither&&(Je?W.enable(3024):W.disable(3024),ua.dither=Je);Le=ta[0];Me=ta[1];if(Le!==Ia[0]||Me!==Ia[1])W.blendEquationSeparate(Le,Me),Ia[0]=Le,Ia[1]=Me;Ne=Fa.depth_func;Ne!==ua.depth_func&&(W.depthFunc(Ne),ua.depth_func=
Ne);Ke=ac[0];Rd=ac[1];if(Ke!==Ga[0]||Rd!==Ga[1])W.depthRange(Ke,Rd),Ga[0]=Ke,Ga[1]=Rd;be=Fa.depth_mask;be!==ua.depth_mask&&(W.depthMask(be),ua.depth_mask=be);ee=Z[0];ge=Z[1];Oe=Z[2];Ld=Z[3];if(ee!==Gc[0]||ge!==Gc[1]||Oe!==Gc[2]||Ld!==Gc[3])W.colorMask(ee,ge,Oe,Ld),Gc[0]=ee,Gc[1]=ge,Gc[2]=Oe,Gc[3]=Ld;Yd=Fa.cull_enable;Yd!==ua.cull_enable&&(Yd?W.enable(2884):W.disable(2884),ua.cull_enable=Yd);He=Fa.cull_face;He!==ua.cull_face&&(W.cullFace(He),ua.cull_face=He);Pe=Fa.frontFace;Pe!==ua.frontFace&&(W.frontFace(Pe),
ua.frontFace=Pe);df=Fa.lineWidth;df!==ua.lineWidth&&(W.lineWidth(df),ua.lineWidth=df);cf=Fa.polygonOffset_enable;cf!==ua.polygonOffset_enable&&(cf?W.enable(32823):W.disable(32823),ua.polygonOffset_enable=cf);Xe=bc[0];Se=bc[1];if(Xe!==Qb[0]||Se!==Qb[1])W.polygonOffset(Xe,Se),Qb[0]=Xe,Qb[1]=Se;bf=Fa.sample_alpha;bf!==ua.sample_alpha&&(bf?W.enable(32926):W.disable(32926),ua.sample_alpha=bf);af=Fa.sample_enable;af!==ua.sample_enable&&(af?W.enable(32928):W.disable(32928),ua.sample_enable=af);Ye=Ae[0];
Ze=Ae[1];if(Ye!==Id[0]||Ze!==Id[1])W.sampleCoverage(Ye,Ze),Id[0]=Ye,Id[1]=Ze;Zd=Fa.stencil_mask;Zd!==ua.stencil_mask&&(W.stencilMask(Zd),ua.stencil_mask=Zd);de=De[0];$e=De[1];kf=De[2];if(de!==Dd[0]||$e!==Dd[1]||kf!==Dd[2])W.stencilFunc(de,$e,kf),Dd[0]=de,Dd[1]=$e,Dd[2]=kf;of=oe[0];gf=oe[1];lf=oe[2];mf=oe[3];if(of!==yd[0]||gf!==yd[1]||lf!==yd[2]||mf!==yd[3])W.stencilOpSeparate(of,gf,lf,mf),yd[0]=of,yd[1]=gf,yd[2]=lf,yd[3]=mf;nf=$d[0];sf=$d[1];pf=$d[2];tf=$d[3];if(nf!==se[0]||sf!==se[1]||pf!==se[2]||
tf!==se[3])W.stencilOpSeparate(nf,sf,pf,tf),se[0]=nf,se[1]=sf,se[2]=pf,se[3]=tf}p=a.viewport;n=p.x|0;u=p.y|0;w="width"in p?p.width|0:sa.framebufferWidth-n;z="height"in p?p.height|0:sa.framebufferHeight-u;y=sa.viewportWidth;sa.viewportWidth=w;D=sa.viewportHeight;sa.viewportHeight=z;W.viewport(n,u,w,z);Nd[0]=n;Nd[1]=u;Nd[2]=w;Nd[3]=z;W.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;W.enable(3042);ua.blend_enable=!0;W.blendFuncSeparate(770,771,773,1);Oa[0]=770;Oa[1]=771;Oa[2]=773;Oa[3]=1;W.disable(2929);
ua.depth_enable=!1;G=a.viewport;O=G.x|0;t=G.y|0;Ea="width"in G?G.width|0:sa.framebufferWidth-O;A="height"in G?G.height|0:sa.framebufferHeight-t;W.scissor(O,t,Ea,A);Sd[0]=O;Sd[1]=t;Sd[2]=Ea;Sd[3]=A;W.enable(3089);ua.scissor_enable=!0;W.disable(2960);ua.stencil_enable=!1;if(H=ua.profile)I=performance.now(),d.count++;W.useProgram(f.program);E=Fb.angle_instanced_arrays;wa.setVAO(null);P=r.call(this,sa,a,0);J=!1;N=null;F=0;qa=!1;M=T=0;x=1;ia=0;R=5126;ob=S=ya=Q=0;xa(P)?(J=!0,N=fa.createStream(34962,P),
R=N.dtype):(N=fa.getBuffer(P))?R=N.dtype:"constant"in P?(x=2,"number"===typeof P.constant?(ya=P.constant,S=ob=Q=0):(ya=0<P.constant.length?P.constant[0]:0,S=1<P.constant.length?P.constant[1]:0,ob=2<P.constant.length?P.constant[2]:0,Q=3<P.constant.length?P.constant[3]:0)):(N=xa(P.buffer)?fa.createStream(34962,P.buffer):fa.getBuffer(P.buffer),R="type"in P?Bd[P.type]:N.dtype,qa=!!P.normalized,M=P.size|0,T=P.offset|0,ia=P.stride|0,F=P.divisor|0);U=Pa.location;V=ha[U];if(1===x){V.buffer||W.enableVertexAttribArray(U);
ea=M||1;if(V.type!==R||V.size!==ea||V.buffer!==N||V.normalized!==qa||V.offset!==T||V.stride!==ia)W.bindBuffer(34962,N.buffer),W.vertexAttribPointer(U,ea,R,qa,ia,T),V.type=R,V.size=ea,V.buffer=N,V.normalized=qa,V.offset=T,V.stride=ia;V.divisor!==F&&(E.vertexAttribDivisorANGLE(U,F),V.divisor=F)}else if(V.buffer&&(W.disableVertexAttribArray(U),V.buffer=null),V.x!==ya||V.y!==S||V.z!==ob||V.w!==Q)W.vertexAttrib4f(U,ya,S,ob,Q),V.x=ya,V.y=S,V.z=ob,V.w=Q;ba=q.call(this,sa,a,0);la=!1;ka=null;oa=0;Ja=!1;Kb=
fb=0;Wa=1;ib=0;Xa=5126;rc=Gb=Lb=Kc=0;xa(ba)?(la=!0,ka=fa.createStream(34962,ba),Xa=ka.dtype):(ka=fa.getBuffer(ba))?Xa=ka.dtype:"constant"in ba?(Wa=2,"number"===typeof ba.constant?(Lb=ba.constant,Gb=rc=Kc=0):(Lb=0<ba.constant.length?ba.constant[0]:0,Gb=1<ba.constant.length?ba.constant[1]:0,rc=2<ba.constant.length?ba.constant[2]:0,Kc=3<ba.constant.length?ba.constant[3]:0)):(ka=xa(ba.buffer)?fa.createStream(34962,ba.buffer):fa.getBuffer(ba.buffer),Xa="type"in ba?Bd[ba.type]:ka.dtype,Ja=!!ba.normalized,
Kb=ba.size|0,fb=ba.offset|0,ib=ba.stride|0,oa=ba.divisor|0);Mb=Xb.location;jb=ha[Mb];if(1===Wa){jb.buffer||W.enableVertexAttribArray(Mb);Eb=Kb||1;if(jb.type!==Xa||jb.size!==Eb||jb.buffer!==ka||jb.normalized!==Ja||jb.offset!==fb||jb.stride!==ib)W.bindBuffer(34962,ka.buffer),W.vertexAttribPointer(Mb,Eb,Xa,Ja,ib,fb),jb.type=Xa,jb.size=Eb,jb.buffer=ka,jb.normalized=Ja,jb.offset=fb,jb.stride=ib;jb.divisor!==oa&&(E.vertexAttribDivisorANGLE(Mb,oa),jb.divisor=oa)}else if(jb.buffer&&(W.disableVertexAttribArray(Mb),
jb.buffer=null),jb.x!==Lb||jb.y!==Gb||jb.z!==rc||jb.w!==Kc)W.vertexAttrib4f(Mb,Lb,Gb,rc,Kc),jb.x=Lb,jb.y=Gb,jb.z=rc,jb.w=Kc;Cb=m.call(this,sa,a,0);yb=!1;gb=null;Zb=0;Nb=!1;Sa=rb=0;Sb=1;sb=0;ic=5126;tb=Ha=qb=hb=0;xa(Cb)?(yb=!0,gb=fa.createStream(34962,Cb),ic=gb.dtype):(gb=fa.getBuffer(Cb))?ic=gb.dtype:"constant"in Cb?(Sb=2,"number"===typeof Cb.constant?(qb=Cb.constant,Ha=tb=hb=0):(qb=0<Cb.constant.length?Cb.constant[0]:0,Ha=1<Cb.constant.length?Cb.constant[1]:0,tb=2<Cb.constant.length?Cb.constant[2]:
0,hb=3<Cb.constant.length?Cb.constant[3]:0)):(gb=xa(Cb.buffer)?fa.createStream(34962,Cb.buffer):fa.getBuffer(Cb.buffer),ic="type"in Cb?Bd[Cb.type]:gb.dtype,Nb=!!Cb.normalized,Sa=Cb.size|0,rb=Cb.offset|0,sb=Cb.stride|0,Zb=Cb.divisor|0);Ka=za.location;db=ha[Ka];if(1===Sb){db.buffer||W.enableVertexAttribArray(Ka);eb=Sa||1;if(db.type!==ic||db.size!==eb||db.buffer!==gb||db.normalized!==Nb||db.offset!==rb||db.stride!==sb)W.bindBuffer(34962,gb.buffer),W.vertexAttribPointer(Ka,eb,ic,Nb,sb,rb),db.type=ic,
db.size=eb,db.buffer=gb,db.normalized=Nb,db.offset=rb,db.stride=sb;db.divisor!==Zb&&(E.vertexAttribDivisorANGLE(Ka,Zb),db.divisor=Zb)}else if(db.buffer&&(W.disableVertexAttribArray(Ka),db.buffer=null),db.x!==qb||db.y!==Ha||db.z!==tb||db.w!==hb)W.vertexAttrib4f(Ka,qb,Ha,tb,hb),db.x=qb,db.y=Ha,db.z=tb,db.w=hb;Ma=b.call(this,sa,a,0);kb=!1;Ya=null;vb=0;ub=!1;Dc=Ra=0;Va=1;Hb=0;Db=5126;Ib=$a=Ad=La=0;xa(Ma)?(kb=!0,Ya=fa.createStream(34962,Ma),Db=Ya.dtype):(Ya=fa.getBuffer(Ma))?Db=Ya.dtype:"constant"in Ma?
(Va=2,"number"===typeof Ma.constant?(Ad=Ma.constant,$a=Ib=La=0):(Ad=0<Ma.constant.length?Ma.constant[0]:0,$a=1<Ma.constant.length?Ma.constant[1]:0,Ib=2<Ma.constant.length?Ma.constant[2]:0,La=3<Ma.constant.length?Ma.constant[3]:0)):(Ya=xa(Ma.buffer)?fa.createStream(34962,Ma.buffer):fa.getBuffer(Ma.buffer),Db="type"in Ma?Bd[Ma.type]:Ya.dtype,ub=!!Ma.normalized,Dc=Ma.size|0,Ra=Ma.offset|0,Hb=Ma.stride|0,vb=Ma.divisor|0);Jb=Ua.location;mb=ha[Jb];if(1===Va){mb.buffer||W.enableVertexAttribArray(Jb);Na=
Dc||1;if(mb.type!==Db||mb.size!==Na||mb.buffer!==Ya||mb.normalized!==ub||mb.offset!==Ra||mb.stride!==Hb)W.bindBuffer(34962,Ya.buffer),W.vertexAttribPointer(Jb,Na,Db,ub,Hb,Ra),mb.type=Db,mb.size=Na,mb.buffer=Ya,mb.normalized=ub,mb.offset=Ra,mb.stride=Hb;mb.divisor!==vb&&(E.vertexAttribDivisorANGLE(Jb,vb),mb.divisor=vb)}else if(mb.buffer&&(W.disableVertexAttribArray(Jb),mb.buffer=null),mb.x!==Ad||mb.y!==$a||mb.z!==Ib||mb.w!==La)W.vertexAttrib4f(Jb,Ad,$a,Ib,La),mb.x=Ad,mb.y=$a,mb.z=Ib,mb.w=La;$b=g.call(this,
sa,a,0);Qa=!1;wb=null;xb=0;Ta=!1;fc=nb=0;Bc=1;vc=0;cb=5126;nd=Za=Mc=jc=0;xa($b)?(Qa=!0,wb=fa.createStream(34962,$b),cb=wb.dtype):(wb=fa.getBuffer($b))?cb=wb.dtype:"constant"in $b?(Bc=2,"number"===typeof $b.constant?(Mc=$b.constant,Za=nd=jc=0):(Mc=0<$b.constant.length?$b.constant[0]:0,Za=1<$b.constant.length?$b.constant[1]:0,nd=2<$b.constant.length?$b.constant[2]:0,jc=3<$b.constant.length?$b.constant[3]:0)):(wb=xa($b.buffer)?fa.createStream(34962,$b.buffer):fa.getBuffer($b.buffer),cb="type"in $b?Bd[$b.type]:
wb.dtype,Ta=!!$b.normalized,fc=$b.size|0,nb=$b.offset|0,vc=$b.stride|0,xb=$b.divisor|0);Ab=ja.location;ab=ha[Ab];if(1===Bc){ab.buffer||W.enableVertexAttribArray(Ab);Ub=fc||1;if(ab.type!==cb||ab.size!==Ub||ab.buffer!==wb||ab.normalized!==Ta||ab.offset!==nb||ab.stride!==vc)W.bindBuffer(34962,wb.buffer),W.vertexAttribPointer(Ab,Ub,cb,Ta,vc,nb),ab.type=cb,ab.size=Ub,ab.buffer=wb,ab.normalized=Ta,ab.offset=nb,ab.stride=vc;ab.divisor!==xb&&(E.vertexAttribDivisorANGLE(Ab,xb),ab.divisor=xb)}else if(ab.buffer&&
(W.disableVertexAttribArray(Ab),ab.buffer=null),ab.x!==Mc||ab.y!==Za||ab.z!==nd||ab.w!==jc)W.vertexAttrib4f(Ab,Mc,Za,nd,jc),ab.x=Mc,ab.y=Za,ab.z=nd,ab.w=jc;tc=c.call(this,sa,a,0);Vb=!1;Ob=null;Nc=0;Pb=!1;Fc=Pd=0;vd=1;Qc=0;Yc=5126;gc=wc=nc=sd=0;xa(tc)?(Vb=!0,Ob=fa.createStream(34962,tc),Yc=Ob.dtype):(Ob=fa.getBuffer(tc))?Yc=Ob.dtype:"constant"in tc?(vd=2,"number"===typeof tc.constant?(nc=tc.constant,wc=gc=sd=0):(nc=0<tc.constant.length?tc.constant[0]:0,wc=1<tc.constant.length?tc.constant[1]:0,gc=2<
tc.constant.length?tc.constant[2]:0,sd=3<tc.constant.length?tc.constant[3]:0)):(Ob=xa(tc.buffer)?fa.createStream(34962,tc.buffer):fa.getBuffer(tc.buffer),Yc="type"in tc?Bd[tc.type]:Ob.dtype,Pb=!!tc.normalized,Fc=tc.size|0,Pd=tc.offset|0,Qc=tc.stride|0,Nc=tc.divisor|0);bb=pa.location;sc=ha[bb];if(1===vd){sc.buffer||W.enableVertexAttribArray(bb);Rb=Fc||1;if(sc.type!==Yc||sc.size!==Rb||sc.buffer!==Ob||sc.normalized!==Pb||sc.offset!==Pd||sc.stride!==Qc)W.bindBuffer(34962,Ob.buffer),W.vertexAttribPointer(bb,
Rb,Yc,Pb,Qc,Pd),sc.type=Yc,sc.size=Rb,sc.buffer=Ob,sc.normalized=Pb,sc.offset=Pd,sc.stride=Qc;sc.divisor!==Nc&&(E.vertexAttribDivisorANGLE(bb,Nc),sc.divisor=Nc)}else if(sc.buffer&&(W.disableVertexAttribArray(bb),sc.buffer=null),sc.x!==nc||sc.y!==wc||sc.z!==gc||sc.w!==sd)W.vertexAttrib4f(bb,nc,wc,gc,sd),sc.x=nc,sc.y=wc,sc.z=gc,sc.w=sd;Wb=h.call(this,sa,a,0);dc=!1;hc=null;zc=0;Cc=!1;Tc=dd=0;Uc=1;Vc=0;Zc=5126;kc=$c=ed=od=0;xa(Wb)?(dc=!0,hc=fa.createStream(34962,Wb),Zc=hc.dtype):(hc=fa.getBuffer(Wb))?
Zc=hc.dtype:"constant"in Wb?(Uc=2,"number"===typeof Wb.constant?(ed=Wb.constant,$c=kc=od=0):(ed=0<Wb.constant.length?Wb.constant[0]:0,$c=1<Wb.constant.length?Wb.constant[1]:0,kc=2<Wb.constant.length?Wb.constant[2]:0,od=3<Wb.constant.length?Wb.constant[3]:0)):(hc=xa(Wb.buffer)?fa.createStream(34962,Wb.buffer):fa.getBuffer(Wb.buffer),Zc="type"in Wb?Bd[Wb.type]:hc.dtype,Cc=!!Wb.normalized,Tc=Wb.size|0,dd=Wb.offset|0,Vc=Wb.stride|0,zc=Wb.divisor|0);cc=K.location;ad=ha[cc];if(1===Uc){ad.buffer||W.enableVertexAttribArray(cc);
Xc=Tc||4;if(ad.type!==Zc||ad.size!==Xc||ad.buffer!==hc||ad.normalized!==Cc||ad.offset!==dd||ad.stride!==Vc)W.bindBuffer(34962,hc.buffer),W.vertexAttribPointer(cc,Xc,Zc,Cc,Vc,dd),ad.type=Zc,ad.size=Xc,ad.buffer=hc,ad.normalized=Cc,ad.offset=dd,ad.stride=Vc;ad.divisor!==zc&&(E.vertexAttribDivisorANGLE(cc,zc),ad.divisor=zc)}else if(ad.buffer&&(W.disableVertexAttribArray(cc),ad.buffer=null),ad.x!==ed||ad.y!==$c||ad.z!==kc||ad.w!==od)W.vertexAttrib4f(cc,ed,$c,kc,od),ad.x=ed,ad.y=$c,ad.z=kc,ad.w=od;fd=
B.call(this,sa,a,0);Ac=!1;jd=null;Cd=0;ze=!1;kd=pe=0;Fe=1;Fd=0;he=5126;Kd=Md=Ud=ae=0;xa(fd)?(Ac=!0,jd=fa.createStream(34962,fd),he=jd.dtype):(jd=fa.getBuffer(fd))?he=jd.dtype:"constant"in fd?(Fe=2,"number"===typeof fd.constant?(Ud=fd.constant,Md=Kd=ae=0):(Ud=0<fd.constant.length?fd.constant[0]:0,Md=1<fd.constant.length?fd.constant[1]:0,Kd=2<fd.constant.length?fd.constant[2]:0,ae=3<fd.constant.length?fd.constant[3]:0)):(jd=xa(fd.buffer)?fa.createStream(34962,fd.buffer):fa.getBuffer(fd.buffer),he="type"in
fd?Bd[fd.type]:jd.dtype,ze=!!fd.normalized,kd=fd.size|0,pe=fd.offset|0,Fd=fd.stride|0,Cd=fd.divisor|0);qd=ra.location;Wc=ha[qd];if(1===Fe){Wc.buffer||W.enableVertexAttribArray(qd);wd=kd||4;if(Wc.type!==he||Wc.size!==wd||Wc.buffer!==jd||Wc.normalized!==ze||Wc.offset!==pe||Wc.stride!==Fd)W.bindBuffer(34962,jd.buffer),W.vertexAttribPointer(qd,wd,he,ze,Fd,pe),Wc.type=he,Wc.size=wd,Wc.buffer=jd,Wc.normalized=ze,Wc.offset=pe,Wc.stride=Fd;Wc.divisor!==Cd&&(E.vertexAttribDivisorANGLE(qd,Cd),Wc.divisor=Cd)}else if(Wc.buffer&&
(W.disableVertexAttribArray(qd),Wc.buffer=null),Wc.x!==Ud||Wc.y!==Md||Wc.z!==Kd||Wc.w!==ae)W.vertexAttrib4f(qd,Ud,Md,Kd,ae),Wc.x=Ud,Wc.y=Md,Wc.z=Kd,Wc.w=ae;ud=v.call(this,sa,a,0);ld=!1;xd=null;Gd=0;Hd=!1;me=je=0;ve=1;ne=0;ke=5126;qe=fe=we=ie=0;xa(ud)?(ld=!0,xd=fa.createStream(34962,ud),ke=xd.dtype):(xd=fa.getBuffer(ud))?ke=xd.dtype:"constant"in ud?(ve=2,"number"===typeof ud.constant?(we=ud.constant,fe=qe=ie=0):(we=0<ud.constant.length?ud.constant[0]:0,fe=1<ud.constant.length?ud.constant[1]:0,qe=2<
ud.constant.length?ud.constant[2]:0,ie=3<ud.constant.length?ud.constant[3]:0)):(xd=xa(ud.buffer)?fa.createStream(34962,ud.buffer):fa.getBuffer(ud.buffer),ke="type"in ud?Bd[ud.type]:xd.dtype,Hd=!!ud.normalized,me=ud.size|0,je=ud.offset|0,ne=ud.stride|0,Gd=ud.divisor|0);Rc=da.location;id=ha[Rc];if(1===ve){id.buffer||W.enableVertexAttribArray(Rc);xe=me||1;if(id.type!==ke||id.size!==xe||id.buffer!==xd||id.normalized!==Hd||id.offset!==je||id.stride!==ne)W.bindBuffer(34962,xd.buffer),W.vertexAttribPointer(Rc,
xe,ke,Hd,ne,je),id.type=ke,id.size=xe,id.buffer=xd,id.normalized=Hd,id.offset=je,id.stride=ne;id.divisor!==Gd&&(E.vertexAttribDivisorANGLE(Rc,Gd),id.divisor=Gd)}else if(id.buffer&&(W.disableVertexAttribArray(Rc),id.buffer=null),id.x!==we||id.y!==fe||id.z!==qe||id.w!==ie)W.vertexAttrib4f(Rc,we,fe,qe,ie),id.x=we,id.y=fe,id.z=qe,id.w=ie;W.uniform1i(L.location,!1);W.uniform1f(va.location,sa.pixelRatio);te=a.scale;W.uniform2f(ca.location,te[0],te[1]);Qd=a.scaleFract;W.uniform2f(Da.location,Qd[0],Qd[1]);
Vd=a.translate;W.uniform2f(na.location,Vd[0],Vd[1]);Wd=a.translateFract;W.uniform2f(Aa.location,Wd[0],Wd[1]);Xd=e.call(this,sa,a,0);W.uniform2f(ga.location,Xd[0],Xd[1]);W.uniform1f(ma.location,a.opacity);W.uniform1i(Ba.location,l.bind());(re=a.markerTexture)&&"framebuffer"===re._reglType&&(re=re.color[0]);Ce=re._texture;W.uniform1i(X.location,Ce.bind());Ge=a.elements;ue=null;(ue=(Ve=xa(Ge))?lb.createStream(Ge):lb.getElements(Ge))&&W.bindBuffer(34963,ue.buffer.buffer);We=a.offset;if(Re=a.count)ye=
Ca.instances,0<ye?ue?E.drawElementsInstancedANGLE(0,Re,ue.type,We<<(ue.type-5121>>1),ye):E.drawArraysInstancedANGLE(0,We,Re,ye):0>ye&&(ue?W.drawElements(0,Re,ue.type,We<<(ue.type-5121>>1)):W.drawArrays(0,We,Re)),ua.dirty=!0,wa.setVAO(null),sa.viewportWidth=y,sa.viewportHeight=D,H&&(d.cpuTime+=performance.now()-I),J&&fa.destroyStream(N),la&&fa.destroyStream(ka),yb&&fa.destroyStream(gb),kb&&fa.destroyStream(Ya),Qa&&fa.destroyStream(wb),Vb&&fa.destroyStream(Ob),dc&&fa.destroyStream(hc),Ac&&fa.destroyStream(jd),
ld&&fa.destroyStream(xd),l.unbind(),Ce.unbind(),Ve&&lb.destroyStream(ue)},scope:function(c,e,b){var a,l,h,g,f,r,m,C,v,B,q,K,O,ha,W,za,P,L,N,X,T,ca,aa,Xb,M,R,Pa,Q,Y,da,ga,va,wa,ra,Z,U,ja,V,Ua,na,ba,Da,Aa,ma,pa,la,ta,Ba,Fb,oa,Oa,Ga,Ia,Qb,Sa,ac,bc,Gc,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Sd,Va,Hb,Db,La,Id,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,Nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,$d,Fc,yd,Qc,Yc,De,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,se,oe,pe,kd,Dd,Fd,Ae,
ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=c.viewport;l=a.x|0;h=a.y|0;g="width"in
a?a.width|0:sa.framebufferWidth-l;f="height"in a?a.height|0:sa.framebufferHeight-h;r=sa.viewportWidth;sa.viewportWidth=g;m=sa.viewportHeight;sa.viewportHeight=f;C=Pd[0];Pd[0]=l;v=Pd[1];Pd[1]=h;B=Pd[2];Pd[2]=g;q=Pd[3];Pd[3]=f;K=ia[0];ia[0]=0;O=ia[1];ia[1]=0;ha=ia[2];ia[2]=0;W=ia[3];ia[3]=1;za=Fa.blend_enable;Fa.blend_enable=!0;P=Ja[0];Ja[0]=770;L=Ja[1];Ja[1]=771;N=Ja[2];Ja[2]=773;X=Ja[3];Ja[3]=1;T=Fa.depth_enable;Fa.depth_enable=!1;ca=c.viewport;aa=ca.x|0;Xb=ca.y|0;M="width"in ca?ca.width|0:sa.framebufferWidth-
aa;R="height"in ca?ca.height|0:sa.framebufferHeight-Xb;Pa=Ad[0];Ad[0]=aa;Q=Ad[1];Ad[1]=Xb;Y=Ad[2];Ad[2]=M;da=Ad[3];Ad[3]=R;ga=Fa.scissor_enable;Fa.scissor_enable=!0;va=Fa.stencil_enable;Fa.stencil_enable=!1;if(wa=ua.profile)ra=performance.now(),d.count++;Z=c.elements;U=null;U=(ja=xa(Z))?lb.createStream(Z):lb.getElements(Z);V=Ca.elements;Ca.elements=U;Ua=c.offset;na=Ca.offset;Ca.offset=Ua;ba=c.count;Da=Ca.count;Ca.count=ba;Aa=Ca.primitive;Ca.primitive=0;ma=ya[45];ya[45]=!1;pa=c.markerTexture;la=ya[48];
ya[48]=pa;ta=c.opacity;Ba=ya[10];ya[10]=ta;Fb=p.call(this,sa,c,b);oa=ya[46];ya[46]=Fb;Oa=ya[47];ya[47]=n;Ga=sa.pixelRatio;Ia=ya[34];ya[34]=Ga;Qb=c.scale;Sa=ya[6];ya[6]=Qb;ac=c.scaleFract;bc=ya[7];ya[7]=ac;Gc=c.translate;hb=ya[8];ya[8]=Gc;qb=c.translateFract;Ha=ya[9];ya[9]=qb;tb=k.call(this,sa,c,b);Ka=!1;db=null;eb=0;Ma=!1;Ya=kb=0;vb=1;ub=0;Ra=5126;Db=Hb=Va=Sd=0;xa(tb)?(Ka=!0,db=fa.createStream(34962,tb),Ra=db.dtype):(db=fa.getBuffer(tb))?Ra=db.dtype:"constant"in tb?(vb=2,"number"===typeof tb.constant?
(Va=tb.constant,Hb=Db=Sd=0):(Va=0<tb.constant.length?tb.constant[0]:0,Hb=1<tb.constant.length?tb.constant[1]:0,Db=2<tb.constant.length?tb.constant[2]:0,Sd=3<tb.constant.length?tb.constant[3]:0)):(db=xa(tb.buffer)?fa.createStream(34962,tb.buffer):fa.getBuffer(tb.buffer),Ra="type"in tb?Bd[tb.type]:db.dtype,Ma=!!tb.normalized,Ya=tb.size|0,kb=tb.offset|0,ub=tb.stride|0,eb=tb.divisor|0);La=u.buffer;u.buffer=db;Id=u.divisor;u.divisor=eb;$a=u.normalized;u.normalized=Ma;Ib=u.offset;u.offset=kb;Jb=u.size;
u.size=Ya;mb=u.state;u.state=vb;Na=u.stride;u.stride=ub;$b=u.type;u.type=Ra;Qa=u.w;u.w=Sd;wb=u.x;u.x=Va;xb=u.y;u.y=Hb;Ta=u.z;u.z=Db;nb=w.call(this,sa,c,b);fc=!1;Bc=null;vc=0;cb=!1;Mc=jc=0;Za=1;Nd=0;Ab=5126;Vb=tc=Ub=ab=0;xa(nb)?(fc=!0,Bc=fa.createStream(34962,nb),Ab=Bc.dtype):(Bc=fa.getBuffer(nb))?Ab=Bc.dtype:"constant"in nb?(Za=2,"number"===typeof nb.constant?(Ub=nb.constant,tc=Vb=ab=0):(Ub=0<nb.constant.length?nb.constant[0]:0,tc=1<nb.constant.length?nb.constant[1]:0,Vb=2<nb.constant.length?nb.constant[2]:
0,ab=3<nb.constant.length?nb.constant[3]:0)):(Bc=xa(nb.buffer)?fa.createStream(34962,nb.buffer):fa.getBuffer(nb.buffer),Ab="type"in nb?Bd[nb.type]:Bc.dtype,cb=!!nb.normalized,Mc=nb.size|0,jc=nb.offset|0,Nd=nb.stride|0,vc=nb.divisor|0);Ob=D.buffer;D.buffer=Bc;Nc=D.divisor;D.divisor=vc;Pb=D.normalized;D.normalized=cb;$d=D.offset;D.offset=jc;Fc=D.size;D.size=Mc;yd=D.state;D.state=Za;Qc=D.stride;D.stride=Nd;Yc=D.type;D.type=Ab;De=D.w;D.w=ab;nc=D.x;D.x=Ub;wc=D.y;D.y=tc;gc=D.z;D.z=Vb;bb=Ea.call(this,sa,
c,b);sc=!1;Rb=null;Wb=0;dc=!1;zc=hc=0;Cc=1;dd=0;Tc=5126;od=Zc=Vc=Uc=0;xa(bb)?(sc=!0,Rb=fa.createStream(34962,bb),Tc=Rb.dtype):(Rb=fa.getBuffer(bb))?Tc=Rb.dtype:"constant"in bb?(Cc=2,"number"===typeof bb.constant?(Vc=bb.constant,Zc=od=Uc=0):(Vc=0<bb.constant.length?bb.constant[0]:0,Zc=1<bb.constant.length?bb.constant[1]:0,od=2<bb.constant.length?bb.constant[2]:0,Uc=3<bb.constant.length?bb.constant[3]:0)):(Rb=xa(bb.buffer)?fa.createStream(34962,bb.buffer):fa.getBuffer(bb.buffer),Tc="type"in bb?Bd[bb.type]:
Rb.dtype,dc=!!bb.normalized,zc=bb.size|0,hc=bb.offset|0,dd=bb.stride|0,Wb=bb.divisor|0);ed=y.buffer;y.buffer=Rb;$c=y.divisor;y.divisor=Wb;kc=y.normalized;y.normalized=dc;cc=y.offset;y.offset=hc;ad=y.size;y.size=zc;Xc=y.state;y.state=Cc;fd=y.stride;y.stride=dd;Ac=y.type;y.type=Tc;jd=y.w;y.w=Uc;se=y.x;y.x=Vc;oe=y.y;y.y=Zc;pe=y.z;y.z=od;kd=G.call(this,sa,c,b);Dd=!1;Fd=null;Ae=0;ae=!1;Md=Ud=0;Kd=1;qd=0;Wc=5126;xd=ld=ud=wd=0;xa(kd)?(Dd=!0,Fd=fa.createStream(34962,kd),Wc=Fd.dtype):(Fd=fa.getBuffer(kd))?
Wc=Fd.dtype:"constant"in kd?(Kd=2,"number"===typeof kd.constant?(ud=kd.constant,ld=xd=wd=0):(ud=0<kd.constant.length?kd.constant[0]:0,ld=1<kd.constant.length?kd.constant[1]:0,xd=2<kd.constant.length?kd.constant[2]:0,wd=3<kd.constant.length?kd.constant[3]:0)):(Fd=xa(kd.buffer)?fa.createStream(34962,kd.buffer):fa.getBuffer(kd.buffer),Wc="type"in kd?Bd[kd.type]:Fd.dtype,ae=!!kd.normalized,Md=kd.size|0,Ud=kd.offset|0,qd=kd.stride|0,Ae=kd.divisor|0);Gd=t.buffer;t.buffer=Fd;Hd=t.divisor;t.divisor=Ae;je=
t.normalized;t.normalized=ae;me=t.offset;t.offset=Ud;ve=t.size;t.size=Md;ne=t.state;t.state=Kd;ke=t.stride;t.stride=qd;ie=t.type;t.type=Wc;we=t.w;t.w=wd;fe=t.x;t.x=ud;qe=t.y;t.y=ld;Rc=t.z;t.z=xd;id=I.call(this,sa,c,b);xe=!1;te=null;Qd=0;Vd=!1;Xd=Wd=0;re=1;Ce=0;Ge=5126;Re=We=Ve=ue=0;xa(id)?(xe=!0,te=fa.createStream(34962,id),Ge=te.dtype):(te=fa.getBuffer(id))?Ge=te.dtype:"constant"in id?(re=2,"number"===typeof id.constant?(Ve=id.constant,We=Re=ue=0):(Ve=0<id.constant.length?id.constant[0]:0,We=1<id.constant.length?
id.constant[1]:0,Re=2<id.constant.length?id.constant[2]:0,ue=3<id.constant.length?id.constant[3]:0)):(te=xa(id.buffer)?fa.createStream(34962,id.buffer):fa.getBuffer(id.buffer),Ge="type"in id?Bd[id.type]:te.dtype,Vd=!!id.normalized,Xd=id.size|0,Wd=id.offset|0,Ce=id.stride|0,Qd=id.divisor|0);ye=x.buffer;x.buffer=te;Je=x.divisor;x.divisor=Qd;Le=x.normalized;x.normalized=Vd;Me=x.offset;x.offset=Wd;Ne=x.size;x.size=Xd;Ke=x.state;x.state=re;Rd=x.stride;x.stride=Ce;be=x.type;x.type=Ge;ee=x.w;x.w=ue;ge=x.x;
x.x=Ve;Oe=x.y;x.y=We;Ld=x.z;x.z=Re;Yd=H.call(this,sa,c,b);He=!1;Pe=null;df=0;cf=!1;Se=Xe=0;bf=1;af=0;Ye=5126;$e=de=Zd=Ze=0;xa(Yd)?(He=!0,Pe=fa.createStream(34962,Yd),Ye=Pe.dtype):(Pe=fa.getBuffer(Yd))?Ye=Pe.dtype:"constant"in Yd?(bf=2,"number"===typeof Yd.constant?(Zd=Yd.constant,de=$e=Ze=0):(Zd=0<Yd.constant.length?Yd.constant[0]:0,de=1<Yd.constant.length?Yd.constant[1]:0,$e=2<Yd.constant.length?Yd.constant[2]:0,Ze=3<Yd.constant.length?Yd.constant[3]:0)):(Pe=xa(Yd.buffer)?fa.createStream(34962,Yd.buffer):
fa.getBuffer(Yd.buffer),Ye="type"in Yd?Bd[Yd.type]:Pe.dtype,cf=!!Yd.normalized,Se=Yd.size|0,Xe=Yd.offset|0,af=Yd.stride|0,df=Yd.divisor|0);kf=A.buffer;A.buffer=Pe;of=A.divisor;A.divisor=df;gf=A.normalized;A.normalized=cf;lf=A.offset;A.offset=Xe;mf=A.size;A.size=Se;nf=A.state;A.state=bf;sf=A.stride;A.stride=af;pf=A.type;A.type=Ye;tf=A.w;A.w=Ze;Cf=A.x;A.x=Zd;Df=A.y;A.y=de;Te=A.z;A.z=$e;Ie=ka.call(this,sa,c,b);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;xa(Ie)?(qf=!0,rf=fa.createStream(34962,
Ie),yf=rf.dtype):(rf=fa.getBuffer(Ie))?yf=rf.dtype:"constant"in Ie?(Gf=2,"number"===typeof Ie.constant?(zf=Ie.constant,Af=Jf=wf=0):(zf=0<Ie.constant.length?Ie.constant[0]:0,Af=1<Ie.constant.length?Ie.constant[1]:0,Jf=2<Ie.constant.length?Ie.constant[2]:0,wf=3<Ie.constant.length?Ie.constant[3]:0)):(rf=xa(Ie.buffer)?fa.createStream(34962,Ie.buffer):fa.getBuffer(Ie.buffer),yf="type"in Ie?Bd[Ie.type]:rf.dtype,Hf=!!Ie.normalized,Ff=Ie.size|0,Bf=Ie.offset|0,xf=Ie.stride|0,Ef=Ie.divisor|0);Kf=J.buffer;J.buffer=
rf;Lf=J.divisor;J.divisor=Ef;Mf=J.normalized;J.normalized=Hf;uf=J.offset;J.offset=Bf;Rf=J.size;J.size=Ff;If=J.state;J.state=Gf;vf=J.stride;J.stride=xf;dg=J.type;J.type=yf;Sf=J.w;J.w=wf;Tf=J.x;J.x=zf;qg=J.y;J.y=Af;hf=J.z;J.z=Jf;ef=F.call(this,sa,c,b);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;xa(ef)?(Nf=!0,Of=fa.createStream(34962,ef),Uf=Of.dtype):(Of=fa.getBuffer(ef))?Uf=Of.dtype:"constant"in ef?(ig=2,"number"===typeof ef.constant?(Yf=ef.constant,Zf=jg=Xf=0):(Yf=0<ef.constant.length?
ef.constant[0]:0,Zf=1<ef.constant.length?ef.constant[1]:0,jg=2<ef.constant.length?ef.constant[2]:0,Xf=3<ef.constant.length?ef.constant[3]:0)):(Of=xa(ef.buffer)?fa.createStream(34962,ef.buffer):fa.getBuffer(ef.buffer),Uf="type"in ef?Bd[ef.type]:Of.dtype,fg=!!ef.normalized,hg=ef.size|0,gg=ef.offset|0,Wf=ef.stride|0,eg=ef.divisor|0);rg=E.buffer;E.buffer=Of;sg=E.divisor;E.divisor=eg;tg=E.normalized;E.normalized=fg;ug=E.offset;E.offset=gg;vg=E.size;E.size=hg;wg=E.state;E.state=ig;xg=E.stride;E.stride=
Wf;yg=E.type;E.type=Uf;zg=E.w;E.w=Xf;Ag=E.x;E.x=Yf;Bg=E.y;E.y=Zf;jf=E.z;E.z=jg;ff=ea.call(this,sa,c,b);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;xa(ff)?(Pf=!0,Qf=fa.createStream(34962,ff),Vf=Qf.dtype):(Qf=fa.getBuffer(ff))?Vf=Qf.dtype:"constant"in ff?(og=2,"number"===typeof ff.constant?(bg=ff.constant,cg=pg=ag=0):(bg=0<ff.constant.length?ff.constant[0]:0,cg=1<ff.constant.length?ff.constant[1]:0,pg=2<ff.constant.length?ff.constant[2]:0,ag=3<ff.constant.length?ff.constant[3]:
0)):(Qf=xa(ff.buffer)?fa.createStream(34962,ff.buffer):fa.getBuffer(ff.buffer),Vf="type"in ff?Bd[ff.type]:Qf.dtype,lg=!!ff.normalized,ng=ff.size|0,mg=ff.offset|0,$f=ff.stride|0,kg=ff.divisor|0);Cg=z.buffer;z.buffer=Qf;Dg=z.divisor;z.divisor=kg;Eg=z.normalized;z.normalized=lg;Fg=z.offset;z.offset=mg;Gg=z.size;z.size=ng;Hg=z.state;z.state=og;Ig=z.stride;z.stride=$f;Jg=z.type;z.type=Vf;Kg=z.w;z.w=ag;Lg=z.x;z.x=bg;Mg=z.y;z.y=cg;Ng=z.z;z.z=pg;Og=qa.vert;qa.vert=44;Pg=qa.frag;qa.frag=43;ua.dirty=!0;e(sa,
c,b);sa.viewportWidth=r;sa.viewportHeight=m;Pd[0]=C;Pd[1]=v;Pd[2]=B;Pd[3]=q;ia[0]=K;ia[1]=O;ia[2]=ha;ia[3]=W;Fa.blend_enable=za;Ja[0]=P;Ja[1]=L;Ja[2]=N;Ja[3]=X;Fa.depth_enable=T;Ad[0]=Pa;Ad[1]=Q;Ad[2]=Y;Ad[3]=da;Fa.scissor_enable=ga;Fa.stencil_enable=va;wa&&(d.cpuTime+=performance.now()-ra);ja&&lb.destroyStream(U);Ca.elements=V;Ca.offset=na;Ca.count=Da;Ca.primitive=Aa;ya[45]=ma;ya[48]=la;ya[10]=Ba;ya[46]=oa;ya[47]=Oa;ya[34]=Ia;ya[6]=Sa;ya[7]=bc;ya[8]=hb;ya[9]=Ha;Ka&&fa.destroyStream(db);u.buffer=
La;u.divisor=Id;u.normalized=$a;u.offset=Ib;u.size=Jb;u.state=mb;u.stride=Na;u.type=$b;u.w=Qa;u.x=wb;u.y=xb;u.z=Ta;fc&&fa.destroyStream(Bc);D.buffer=Ob;D.divisor=Nc;D.normalized=Pb;D.offset=$d;D.size=Fc;D.state=yd;D.stride=Qc;D.type=Yc;D.w=De;D.x=nc;D.y=wc;D.z=gc;sc&&fa.destroyStream(Rb);y.buffer=ed;y.divisor=$c;y.normalized=kc;y.offset=cc;y.size=ad;y.state=Xc;y.stride=fd;y.type=Ac;y.w=jd;y.x=se;y.y=oe;y.z=pe;Dd&&fa.destroyStream(Fd);t.buffer=Gd;t.divisor=Hd;t.normalized=je;t.offset=me;t.size=ve;
t.state=ne;t.stride=ke;t.type=ie;t.w=we;t.x=fe;t.y=qe;t.z=Rc;xe&&fa.destroyStream(te);x.buffer=ye;x.divisor=Je;x.normalized=Le;x.offset=Me;x.size=Ne;x.state=Ke;x.stride=Rd;x.type=be;x.w=ee;x.x=ge;x.y=Oe;x.z=Ld;He&&fa.destroyStream(Pe);A.buffer=kf;A.divisor=of;A.normalized=gf;A.offset=lf;A.size=mf;A.state=nf;A.stride=sf;A.type=pf;A.w=tf;A.x=Cf;A.y=Df;A.z=Te;qf&&fa.destroyStream(rf);J.buffer=Kf;J.divisor=Lf;J.normalized=Mf;J.offset=uf;J.size=Rf;J.state=If;J.stride=vf;J.type=dg;J.w=Sf;J.x=Tf;J.y=qg;
J.z=hf;Nf&&fa.destroyStream(Of);E.buffer=rg;E.divisor=sg;E.normalized=tg;E.offset=ug;E.size=vg;E.state=wg;E.stride=xg;E.type=yg;E.w=zg;E.x=Ag;E.y=Bg;E.z=jf;Pf&&fa.destroyStream(Qf);z.buffer=Cg;z.divisor=Dg;z.normalized=Eg;z.offset=Fg;z.size=Gg;z.state=Hg;z.stride=Ig;z.type=Jg;z.w=Kg;z.x=Lg;z.y=Mg;z.z=Ng;qa.vert=Og;qa.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb){var Ua,ha,fa,sa,ua,Ca,lb,Fb,aa,W,xa,Fa,qa,ya,wa,ia,Y,ta,Ia,Ja,Oa,Z,Gc,ac,Ga,bc,Qb,Ae,Id,Ad,Sd,De,Dd,$d,se,oe,yd,Pd,Nd;Ua=a.attributes;ha=a.buffer;fa=a.context;sa=a.current;ua=a.draw;Ca=a.elements;lb=a.extensions;Fb=a.framebuffer;aa=a.gl;W=a.isBufferArgs;xa=a.next;Fa=a.shader;qa=a.uniforms;ya=a.vao;wa=xa.blend_color;ia=sa.blend_color;Y=xa.blend_equation;
ta=sa.blend_equation;Ia=xa.blend_func;Ja=sa.blend_func;Oa=xa.colorMask;Z=sa.colorMask;Gc=xa.depth_range;ac=sa.depth_range;Ga=xa.polygonOffset_offset;bc=sa.polygonOffset_offset;Qb=xa.sample_coverage;Ae=sa.sample_coverage;Id=xa.scissor_box;Ad=sa.scissor_box;Sd=xa.stencil_func;De=sa.stencil_func;Dd=xa.stencil_opBack;$d=sa.stencil_opBack;se=xa.stencil_opFront;oe=sa.stencil_opFront;yd=xa.viewport;Pd=sa.viewport;Nd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(c,e){var b,a,l,h,g,k;b=Fb.next;b!==Fb.cur&&(b?aa.bindFramebuffer(36160,b.framebuffer):aa.bindFramebuffer(36160,null),Fb.cur=b);if(sa.dirty){var p,n,f,u,r,m,w,C,v,z,y,B,D,q,G,t,Ea,A,H,I,E,Fa,J,F,x,qa,S,wa,ob,ea,ka,Ia,fb,Kb;p=xa.dither;p!==sa.dither&&(p?aa.enable(3024):aa.disable(3024),sa.dither=p);n=Y[0];f=Y[1];if(n!==ta[0]||f!==ta[1])aa.blendEquationSeparate(n,f),ta[0]=n,ta[1]=f;u=xa.depth_func;u!==sa.depth_func&&(aa.depthFunc(u),sa.depth_func=u);r=Gc[0];m=Gc[1];if(r!==ac[0]||
m!==ac[1])aa.depthRange(r,m),ac[0]=r,ac[1]=m;w=xa.depth_mask;w!==sa.depth_mask&&(aa.depthMask(w),sa.depth_mask=w);C=Oa[0];v=Oa[1];z=Oa[2];y=Oa[3];if(C!==Z[0]||v!==Z[1]||z!==Z[2]||y!==Z[3])aa.colorMask(C,v,z,y),Z[0]=C,Z[1]=v,Z[2]=z,Z[3]=y;B=xa.cull_enable;B!==sa.cull_enable&&(B?aa.enable(2884):aa.disable(2884),sa.cull_enable=B);D=xa.cull_face;D!==sa.cull_face&&(aa.cullFace(D),sa.cull_face=D);q=xa.frontFace;q!==sa.frontFace&&(aa.frontFace(q),sa.frontFace=q);G=xa.lineWidth;G!==sa.lineWidth&&(aa.lineWidth(G),
sa.lineWidth=G);t=xa.polygonOffset_enable;t!==sa.polygonOffset_enable&&(t?aa.enable(32823):aa.disable(32823),sa.polygonOffset_enable=t);Ea=Ga[0];A=Ga[1];if(Ea!==bc[0]||A!==bc[1])aa.polygonOffset(Ea,A),bc[0]=Ea,bc[1]=A;H=xa.sample_alpha;H!==sa.sample_alpha&&(H?aa.enable(32926):aa.disable(32926),sa.sample_alpha=H);I=xa.sample_enable;I!==sa.sample_enable&&(I?aa.enable(32928):aa.disable(32928),sa.sample_enable=I);E=Qb[0];Fa=Qb[1];if(E!==Ae[0]||Fa!==Ae[1])aa.sampleCoverage(E,Fa),Ae[0]=E,Ae[1]=Fa;J=xa.stencil_mask;
J!==sa.stencil_mask&&(aa.stencilMask(J),sa.stencil_mask=J);F=Sd[0];x=Sd[1];qa=Sd[2];if(F!==De[0]||x!==De[1]||qa!==De[2])aa.stencilFunc(F,x,qa),De[0]=F,De[1]=x,De[2]=qa;S=se[0];wa=se[1];ob=se[2];ea=se[3];if(S!==oe[0]||wa!==oe[1]||ob!==oe[2]||ea!==oe[3])aa.stencilOpSeparate(S,wa,ob,ea),oe[0]=S,oe[1]=wa,oe[2]=ob,oe[3]=ea;ka=Dd[0];Ia=Dd[1];fb=Dd[2];Kb=Dd[3];if(ka!==$d[0]||Ia!==$d[1]||fb!==$d[2]||Kb!==$d[3])aa.stencilOpSeparate(ka,Ia,fb,Kb),$d[0]=ka,$d[1]=Ia,$d[2]=fb,$d[3]=Kb}aa.blendColor(0,0,0,1);ia[0]=
0;ia[1]=0;ia[2]=0;ia[3]=1;aa.enable(3042);sa.blend_enable=!0;aa.blendFuncSeparate(770,771,773,1);Ja[0]=770;Ja[1]=771;Ja[2]=773;Ja[3]=1;aa.disable(2929);sa.depth_enable=!1;aa.enable(3089);sa.scissor_enable=!0;aa.disable(2960);sa.stencil_enable=!1;if(a=sa.profile)l=performance.now(),d.count+=e;aa.useProgram(ba.program);h=lb.angle_instanced_arrays;var Wa;ya.setVAO(null);aa.uniform1i(L.location,!1);aa.uniform1i(ga.location,Q.bind());Wa=ua.instances;for(g=0;g<e;++g){k=c[g];var ib,Xa,Kc,Lb,Gb,rc,Mb,jb,
Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,Id,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,yd,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,
Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;ib=k.viewport;Xa=ib.x|0;Kc=ib.y|0;Lb="width"in ib?ib.width|0:fa.framebufferWidth-Xa;Gb="height"in ib?ib.height|0:fa.framebufferHeight-Kc;rc=fa.viewportWidth;fa.viewportWidth=Lb;Mb=fa.viewportHeight;fa.viewportHeight=Gb;aa.viewport(Xa,Kc,Lb,Gb);Pd[0]=Xa;Pd[1]=Kc;Pd[2]=Lb;Pd[3]=Gb;jb=k.viewport;Eb=jb.x|0;Cb=jb.y|0;yb="width"in jb?jb.width|0:fa.framebufferWidth-Eb;gb="height"in jb?jb.height|0:fa.framebufferHeight-Cb;aa.scissor(Eb,
Cb,yb,gb);Ad[0]=Eb;Ad[1]=Cb;Ad[2]=yb;Ad[3]=gb;Zb=M.call(this,fa,k,g);Nb=!1;rb=null;Sa=0;Sb=!1;ic=sb=0;hb=1;qb=0;Ha=5126;eb=db=Ka=tb=0;W(Zb)?(Nb=!0,rb=ha.createStream(34962,Zb),Ha=rb.dtype):(rb=ha.getBuffer(Zb))?Ha=rb.dtype:"constant"in Zb?(hb=2,"number"===typeof Zb.constant?(Ka=Zb.constant,db=eb=tb=0):(Ka=0<Zb.constant.length?Zb.constant[0]:0,db=1<Zb.constant.length?Zb.constant[1]:0,eb=2<Zb.constant.length?Zb.constant[2]:0,tb=3<Zb.constant.length?Zb.constant[3]:0)):(rb=W(Zb.buffer)?ha.createStream(34962,
Zb.buffer):ha.getBuffer(Zb.buffer),Ha="type"in Zb?Nd[Zb.type]:rb.dtype,Sb=!!Zb.normalized,ic=Zb.size|0,sb=Zb.offset|0,qb=Zb.stride|0,Sa=Zb.divisor|0);Ma=Aa.location;kb=Ua[Ma];if(1===hb){kb.buffer||aa.enableVertexAttribArray(Ma);Ya=ic||1;if(kb.type!==Ha||kb.size!==Ya||kb.buffer!==rb||kb.normalized!==Sb||kb.offset!==sb||kb.stride!==qb)aa.bindBuffer(34962,rb.buffer),aa.vertexAttribPointer(Ma,Ya,Ha,Sb,qb,sb),kb.type=Ha,kb.size=Ya,kb.buffer=rb,kb.normalized=Sb,kb.offset=sb,kb.stride=qb;kb.divisor!==Sa&&
(h.vertexAttribDivisorANGLE(Ma,Sa),kb.divisor=Sa)}else if(kb.buffer&&(aa.disableVertexAttribArray(Ma),kb.buffer=null),kb.x!==Ka||kb.y!==db||kb.z!==eb||kb.w!==tb)aa.vertexAttrib4f(Ma,Ka,db,eb,tb),kb.x=Ka,kb.y=db,kb.z=eb,kb.w=tb;vb=la.call(this,fa,k,g);ub=!1;Ra=null;Dc=0;Va=!1;Db=Hb=0;La=1;Id=0;$a=5126;Na=mb=Jb=Ib=0;W(vb)?(ub=!0,Ra=ha.createStream(34962,vb),$a=Ra.dtype):(Ra=ha.getBuffer(vb))?$a=Ra.dtype:"constant"in vb?(La=2,"number"===typeof vb.constant?(Jb=vb.constant,mb=Na=Ib=0):(Jb=0<vb.constant.length?
vb.constant[0]:0,mb=1<vb.constant.length?vb.constant[1]:0,Na=2<vb.constant.length?vb.constant[2]:0,Ib=3<vb.constant.length?vb.constant[3]:0)):(Ra=W(vb.buffer)?ha.createStream(34962,vb.buffer):ha.getBuffer(vb.buffer),$a="type"in vb?Nd[vb.type]:Ra.dtype,Va=!!vb.normalized,Db=vb.size|0,Hb=vb.offset|0,Id=vb.stride|0,Dc=vb.divisor|0);$b=za.location;Qa=Ua[$b];if(1===La){Qa.buffer||aa.enableVertexAttribArray($b);wb=Db||1;if(Qa.type!==$a||Qa.size!==wb||Qa.buffer!==Ra||Qa.normalized!==Va||Qa.offset!==Hb||
Qa.stride!==Id)aa.bindBuffer(34962,Ra.buffer),aa.vertexAttribPointer($b,wb,$a,Va,Id,Hb),Qa.type=$a,Qa.size=wb,Qa.buffer=Ra,Qa.normalized=Va,Qa.offset=Hb,Qa.stride=Id;Qa.divisor!==Dc&&(h.vertexAttribDivisorANGLE($b,Dc),Qa.divisor=Dc)}else if(Qa.buffer&&(aa.disableVertexAttribArray($b),Qa.buffer=null),Qa.x!==Jb||Qa.y!==mb||Qa.z!==Na||Qa.w!==Ib)aa.vertexAttrib4f($b,Jb,mb,Na,Ib),Qa.x=Jb,Qa.y=mb,Qa.z=Na,Qa.w=Ib;xb=oa.call(this,fa,k,g);Ta=!1;nb=null;fc=0;Bc=!1;cb=vc=0;jc=1;Mc=0;Za=5126;Ub=ab=Ab=nd=0;W(xb)?
(Ta=!0,nb=ha.createStream(34962,xb),Za=nb.dtype):(nb=ha.getBuffer(xb))?Za=nb.dtype:"constant"in xb?(jc=2,"number"===typeof xb.constant?(Ab=xb.constant,ab=Ub=nd=0):(Ab=0<xb.constant.length?xb.constant[0]:0,ab=1<xb.constant.length?xb.constant[1]:0,Ub=2<xb.constant.length?xb.constant[2]:0,nd=3<xb.constant.length?xb.constant[3]:0)):(nb=W(xb.buffer)?ha.createStream(34962,xb.buffer):ha.getBuffer(xb.buffer),Za="type"in xb?Nd[xb.type]:nb.dtype,Bc=!!xb.normalized,cb=xb.size|0,vc=xb.offset|0,Mc=xb.stride|0,
fc=xb.divisor|0);tc=Pa.location;Vb=Ua[tc];if(1===jc){Vb.buffer||aa.enableVertexAttribArray(tc);Ob=cb||1;if(Vb.type!==Za||Vb.size!==Ob||Vb.buffer!==nb||Vb.normalized!==Bc||Vb.offset!==vc||Vb.stride!==Mc)aa.bindBuffer(34962,nb.buffer),aa.vertexAttribPointer(tc,Ob,Za,Bc,Mc,vc),Vb.type=Za,Vb.size=Ob,Vb.buffer=nb,Vb.normalized=Bc,Vb.offset=vc,Vb.stride=Mc;Vb.divisor!==fc&&(h.vertexAttribDivisorANGLE(tc,fc),Vb.divisor=fc)}else if(Vb.buffer&&(aa.disableVertexAttribArray(tc),Vb.buffer=null),Vb.x!==Ab||Vb.y!==
ab||Vb.z!==Ub||Vb.w!==nd)aa.vertexAttrib4f(tc,Ab,ab,Ub,nd),Vb.x=Ab,Vb.y=ab,Vb.z=Ub,Vb.w=nd;Nc=U.call(this,fa,k,g);Pb=!1;yd=null;Fc=0;vd=!1;Yc=Qc=0;sd=1;nc=0;wc=5126;Rb=sc=bb=gc=0;W(Nc)?(Pb=!0,yd=ha.createStream(34962,Nc),wc=yd.dtype):(yd=ha.getBuffer(Nc))?wc=yd.dtype:"constant"in Nc?(sd=2,"number"===typeof Nc.constant?(bb=Nc.constant,sc=Rb=gc=0):(bb=0<Nc.constant.length?Nc.constant[0]:0,sc=1<Nc.constant.length?Nc.constant[1]:0,Rb=2<Nc.constant.length?Nc.constant[2]:0,gc=3<Nc.constant.length?Nc.constant[3]:
0)):(yd=W(Nc.buffer)?ha.createStream(34962,Nc.buffer):ha.getBuffer(Nc.buffer),wc="type"in Nc?Nd[Nc.type]:yd.dtype,vd=!!Nc.normalized,Yc=Nc.size|0,Qc=Nc.offset|0,nc=Nc.stride|0,Fc=Nc.divisor|0);Wb=Xb.location;dc=Ua[Wb];if(1===sd){dc.buffer||aa.enableVertexAttribArray(Wb);hc=Yc||1;if(dc.type!==wc||dc.size!==hc||dc.buffer!==yd||dc.normalized!==vd||dc.offset!==Qc||dc.stride!==nc)aa.bindBuffer(34962,yd.buffer),aa.vertexAttribPointer(Wb,hc,wc,vd,nc,Qc),dc.type=wc,dc.size=hc,dc.buffer=yd,dc.normalized=vd,
dc.offset=Qc,dc.stride=nc;dc.divisor!==Fc&&(h.vertexAttribDivisorANGLE(Wb,Fc),dc.divisor=Fc)}else if(dc.buffer&&(aa.disableVertexAttribArray(Wb),dc.buffer=null),dc.x!==bb||dc.y!==sc||dc.z!==Rb||dc.w!==gc)aa.vertexAttrib4f(Wb,bb,sc,Rb,gc),dc.x=bb,dc.y=sc,dc.z=Rb,dc.w=gc;zc=V.call(this,fa,k,g);Cc=!1;dd=null;Tc=0;Uc=!1;Zc=Vc=0;od=1;ed=0;$c=5126;Xc=ad=cc=kc=0;W(zc)?(Cc=!0,dd=ha.createStream(34962,zc),$c=dd.dtype):(dd=ha.getBuffer(zc))?$c=dd.dtype:"constant"in zc?(od=2,"number"===typeof zc.constant?(cc=
zc.constant,ad=Xc=kc=0):(cc=0<zc.constant.length?zc.constant[0]:0,ad=1<zc.constant.length?zc.constant[1]:0,Xc=2<zc.constant.length?zc.constant[2]:0,kc=3<zc.constant.length?zc.constant[3]:0)):(dd=W(zc.buffer)?ha.createStream(34962,zc.buffer):ha.getBuffer(zc.buffer),$c="type"in zc?Nd[zc.type]:dd.dtype,Uc=!!zc.normalized,Zc=zc.size|0,Vc=zc.offset|0,ed=zc.stride|0,Tc=zc.divisor|0);fd=Da.location;Ac=Ua[fd];if(1===od){Ac.buffer||aa.enableVertexAttribArray(fd);jd=Zc||1;if(Ac.type!==$c||Ac.size!==jd||Ac.buffer!==
dd||Ac.normalized!==Uc||Ac.offset!==Vc||Ac.stride!==ed)aa.bindBuffer(34962,dd.buffer),aa.vertexAttribPointer(fd,jd,$c,Uc,ed,Vc),Ac.type=$c,Ac.size=jd,Ac.buffer=dd,Ac.normalized=Uc,Ac.offset=Vc,Ac.stride=ed;Ac.divisor!==Tc&&(h.vertexAttribDivisorANGLE(fd,Tc),Ac.divisor=Tc)}else if(Ac.buffer&&(aa.disableVertexAttribArray(fd),Ac.buffer=null),Ac.x!==cc||Ac.y!==ad||Ac.z!==Xc||Ac.w!==kc)aa.vertexAttrib4f(fd,cc,ad,Xc,kc),Ac.x=cc,Ac.y=ad,Ac.z=Xc,Ac.w=kc;Cd=T.call(this,fa,k,g);ze=!1;pe=null;kd=0;Fe=!1;he=
Fd=0;ae=1;Ud=0;Md=5126;wd=Wc=qd=Kd=0;W(Cd)?(ze=!0,pe=ha.createStream(34962,Cd),Md=pe.dtype):(pe=ha.getBuffer(Cd))?Md=pe.dtype:"constant"in Cd?(ae=2,"number"===typeof Cd.constant?(qd=Cd.constant,Wc=wd=Kd=0):(qd=0<Cd.constant.length?Cd.constant[0]:0,Wc=1<Cd.constant.length?Cd.constant[1]:0,wd=2<Cd.constant.length?Cd.constant[2]:0,Kd=3<Cd.constant.length?Cd.constant[3]:0)):(pe=W(Cd.buffer)?ha.createStream(34962,Cd.buffer):ha.getBuffer(Cd.buffer),Md="type"in Cd?Nd[Cd.type]:pe.dtype,Fe=!!Cd.normalized,
he=Cd.size|0,Fd=Cd.offset|0,Ud=Cd.stride|0,kd=Cd.divisor|0);ud=pa.location;ld=Ua[ud];if(1===ae){ld.buffer||aa.enableVertexAttribArray(ud);xd=he||1;if(ld.type!==Md||ld.size!==xd||ld.buffer!==pe||ld.normalized!==Fe||ld.offset!==Fd||ld.stride!==Ud)aa.bindBuffer(34962,pe.buffer),aa.vertexAttribPointer(ud,xd,Md,Fe,Ud,Fd),ld.type=Md,ld.size=xd,ld.buffer=pe,ld.normalized=Fe,ld.offset=Fd,ld.stride=Ud;ld.divisor!==kd&&(h.vertexAttribDivisorANGLE(ud,kd),ld.divisor=kd)}else if(ld.buffer&&(aa.disableVertexAttribArray(ud),
ld.buffer=null),ld.x!==qd||ld.y!==Wc||ld.z!==wd||ld.w!==Kd)aa.vertexAttrib4f(ud,qd,Wc,wd,Kd),ld.x=qd,ld.y=Wc,ld.z=wd,ld.w=Kd;Gd=P.call(this,fa,k,g);Hd=!1;je=null;me=0;ve=!1;ke=ne=0;ie=1;we=0;fe=5126;xe=id=Rc=qe=0;W(Gd)?(Hd=!0,je=ha.createStream(34962,Gd),fe=je.dtype):(je=ha.getBuffer(Gd))?fe=je.dtype:"constant"in Gd?(ie=2,"number"===typeof Gd.constant?(Rc=Gd.constant,id=xe=qe=0):(Rc=0<Gd.constant.length?Gd.constant[0]:0,id=1<Gd.constant.length?Gd.constant[1]:0,xe=2<Gd.constant.length?Gd.constant[2]:
0,qe=3<Gd.constant.length?Gd.constant[3]:0)):(je=W(Gd.buffer)?ha.createStream(34962,Gd.buffer):ha.getBuffer(Gd.buffer),fe="type"in Gd?Nd[Gd.type]:je.dtype,ve=!!Gd.normalized,ke=Gd.size|0,ne=Gd.offset|0,we=Gd.stride|0,me=Gd.divisor|0);te=K.location;Qd=Ua[te];if(1===ie){Qd.buffer||aa.enableVertexAttribArray(te);Vd=ke||4;if(Qd.type!==fe||Qd.size!==Vd||Qd.buffer!==je||Qd.normalized!==ve||Qd.offset!==ne||Qd.stride!==we)aa.bindBuffer(34962,je.buffer),aa.vertexAttribPointer(te,Vd,fe,ve,we,ne),Qd.type=fe,
Qd.size=Vd,Qd.buffer=je,Qd.normalized=ve,Qd.offset=ne,Qd.stride=we;Qd.divisor!==me&&(h.vertexAttribDivisorANGLE(te,me),Qd.divisor=me)}else if(Qd.buffer&&(aa.disableVertexAttribArray(te),Qd.buffer=null),Qd.x!==Rc||Qd.y!==id||Qd.z!==xe||Qd.w!==qe)aa.vertexAttrib4f(te,Rc,id,xe,qe),Qd.x=Rc,Qd.y=id,Qd.z=xe,Qd.w=qe;Wd=N.call(this,fa,k,g);Xd=!1;re=null;Ce=0;Ge=!1;Ve=ue=0;We=1;Re=0;ye=5126;Ne=Me=Le=Je=0;W(Wd)?(Xd=!0,re=ha.createStream(34962,Wd),ye=re.dtype):(re=ha.getBuffer(Wd))?ye=re.dtype:"constant"in Wd?
(We=2,"number"===typeof Wd.constant?(Le=Wd.constant,Me=Ne=Je=0):(Le=0<Wd.constant.length?Wd.constant[0]:0,Me=1<Wd.constant.length?Wd.constant[1]:0,Ne=2<Wd.constant.length?Wd.constant[2]:0,Je=3<Wd.constant.length?Wd.constant[3]:0)):(re=W(Wd.buffer)?ha.createStream(34962,Wd.buffer):ha.getBuffer(Wd.buffer),ye="type"in Wd?Nd[Wd.type]:re.dtype,Ge=!!Wd.normalized,Ve=Wd.size|0,ue=Wd.offset|0,Re=Wd.stride|0,Ce=Wd.divisor|0);Ke=ra.location;Rd=Ua[Ke];if(1===We){Rd.buffer||aa.enableVertexAttribArray(Ke);be=
Ve||4;if(Rd.type!==ye||Rd.size!==be||Rd.buffer!==re||Rd.normalized!==Ge||Rd.offset!==ue||Rd.stride!==Re)aa.bindBuffer(34962,re.buffer),aa.vertexAttribPointer(Ke,be,ye,Ge,Re,ue),Rd.type=ye,Rd.size=be,Rd.buffer=re,Rd.normalized=Ge,Rd.offset=ue,Rd.stride=Re;Rd.divisor!==Ce&&(h.vertexAttribDivisorANGLE(Ke,Ce),Rd.divisor=Ce)}else if(Rd.buffer&&(aa.disableVertexAttribArray(Ke),Rd.buffer=null),Rd.x!==Le||Rd.y!==Me||Rd.z!==Ne||Rd.w!==Je)aa.vertexAttrib4f(Ke,Le,Me,Ne,Je),Rd.x=Le,Rd.y=Me,Rd.z=Ne,Rd.w=Je;ee=
O.call(this,fa,k,g);ge=!1;Oe=null;Ld=0;Yd=!1;Pe=He=0;df=1;cf=0;Xe=5126;Ye=af=bf=Se=0;W(ee)?(ge=!0,Oe=ha.createStream(34962,ee),Xe=Oe.dtype):(Oe=ha.getBuffer(ee))?Xe=Oe.dtype:"constant"in ee?(df=2,"number"===typeof ee.constant?(bf=ee.constant,af=Ye=Se=0):(bf=0<ee.constant.length?ee.constant[0]:0,af=1<ee.constant.length?ee.constant[1]:0,Ye=2<ee.constant.length?ee.constant[2]:0,Se=3<ee.constant.length?ee.constant[3]:0)):(Oe=W(ee.buffer)?ha.createStream(34962,ee.buffer):ha.getBuffer(ee.buffer),Xe="type"in
ee?Nd[ee.type]:Oe.dtype,Yd=!!ee.normalized,Pe=ee.size|0,He=ee.offset|0,cf=ee.stride|0,Ld=ee.divisor|0);Ze=da.location;Zd=Ua[Ze];if(1===df){Zd.buffer||aa.enableVertexAttribArray(Ze);de=Pe||1;if(Zd.type!==Xe||Zd.size!==de||Zd.buffer!==Oe||Zd.normalized!==Yd||Zd.offset!==He||Zd.stride!==cf)aa.bindBuffer(34962,Oe.buffer),aa.vertexAttribPointer(Ze,de,Xe,Yd,cf,He),Zd.type=Xe,Zd.size=de,Zd.buffer=Oe,Zd.normalized=Yd,Zd.offset=He,Zd.stride=cf;Zd.divisor!==Ld&&(h.vertexAttribDivisorANGLE(Ze,Ld),Zd.divisor=
Ld)}else if(Zd.buffer&&(aa.disableVertexAttribArray(Ze),Zd.buffer=null),Zd.x!==bf||Zd.y!==af||Zd.z!==Ye||Zd.w!==Se)aa.vertexAttrib4f(Ze,bf,af,Ye,Se),Zd.x=bf,Zd.y=af,Zd.z=Ye,Zd.w=Se;$e=fa.pixelRatio;g&&kf===$e||(kf=$e,aa.uniform1f(Ba.location,$e));of=R.call(this,fa,k,g);gf=of[0];mf=of[1];g&&lf===gf&&nf===mf||(lf=gf,nf=mf,aa.uniform2f(ma.location,gf,mf));sf=k.scale;pf=sf[0];Cf=sf[1];g&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,aa.uniform2f(va.location,pf,Cf));Te=k.scaleFract;Ie=Te[0];rf=Te[1];g&&qf===Ie&&Ef===
rf||(qf=Ie,Ef=rf,aa.uniform2f(ca.location,Ie,rf));Hf=k.translate;Bf=Hf[0];Gf=Hf[1];g&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,aa.uniform2f(ja.location,Bf,Gf));yf=k.translateFract;wf=yf[0];Af=yf[1];g&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,aa.uniform2f(na.location,wf,Af));Kf=k.opacity;g&&Lf===Kf||(Lf=Kf,aa.uniform1f(X.location,Kf));Mf=k.elements;uf=null;(uf=(Rf=W(Mf))?Ca.createStream(Mf):Ca.getElements(Mf))&&aa.bindBuffer(34963,uf.buffer.buffer);If=k.offset;if(vf=k.count)0<Wa?uf?h.drawElementsInstancedANGLE(0,vf,uf.type,
If<<(uf.type-5121>>1),Wa):h.drawArraysInstancedANGLE(0,If,vf,Wa):0>Wa&&(uf?aa.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):aa.drawArrays(0,If,vf)),fa.viewportWidth=rc,fa.viewportHeight=Mb,Nb&&ha.destroyStream(rb),ub&&ha.destroyStream(Ra),Ta&&ha.destroyStream(nb),Pb&&ha.destroyStream(yd),Cc&&ha.destroyStream(dd),ze&&ha.destroyStream(pe),Hd&&ha.destroyStream(je),Xd&&ha.destroyStream(re),ge&&ha.destroyStream(Oe),Rf&&Ca.destroyStream(uf)}Q.unbind();sa.dirty=!0;ya.setVAO(null);a&&(d.cpuTime+=performance.now()-
l)},draw:function(a){var k,p,n,u,w,z,y,D,G,O,t,Ea,A,H,I,P,E,Fa,J,N,F,x,qa,T,M,R,Q,S,wa,U,V,ob,ba,ea,la,ka,oa,Ia,Yb,fb,Kb,Wa,ib,Xa,Id,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,yd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd,ze,pe,kd,Fe,Fd,he,ae,Ud,Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,
id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve;k=Fb.next;k!==Fb.cur&&(k?aa.bindFramebuffer(36160,k.framebuffer):aa.bindFramebuffer(36160,null),Fb.cur=k);if(sa.dirty){var We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf;We=xa.dither;We!==sa.dither&&(We?aa.enable(3024):aa.disable(3024),sa.dither=We);Re=Y[0];ye=Y[1];if(Re!==ta[0]||ye!==ta[1])aa.blendEquationSeparate(Re,ye),ta[0]=Re,ta[1]=ye;Je=xa.depth_func;Je!==sa.depth_func&&(aa.depthFunc(Je),sa.depth_func=
Je);Le=Gc[0];Me=Gc[1];if(Le!==ac[0]||Me!==ac[1])aa.depthRange(Le,Me),ac[0]=Le,ac[1]=Me;Ne=xa.depth_mask;Ne!==sa.depth_mask&&(aa.depthMask(Ne),sa.depth_mask=Ne);Ke=Oa[0];Rd=Oa[1];be=Oa[2];ee=Oa[3];if(Ke!==Z[0]||Rd!==Z[1]||be!==Z[2]||ee!==Z[3])aa.colorMask(Ke,Rd,be,ee),Z[0]=Ke,Z[1]=Rd,Z[2]=be,Z[3]=ee;ge=xa.cull_enable;ge!==sa.cull_enable&&(ge?aa.enable(2884):aa.disable(2884),sa.cull_enable=ge);Oe=xa.cull_face;Oe!==sa.cull_face&&(aa.cullFace(Oe),sa.cull_face=Oe);Ld=xa.frontFace;Ld!==sa.frontFace&&(aa.frontFace(Ld),
sa.frontFace=Ld);Yd=xa.lineWidth;Yd!==sa.lineWidth&&(aa.lineWidth(Yd),sa.lineWidth=Yd);He=xa.polygonOffset_enable;He!==sa.polygonOffset_enable&&(He?aa.enable(32823):aa.disable(32823),sa.polygonOffset_enable=He);Pe=Ga[0];df=Ga[1];if(Pe!==bc[0]||df!==bc[1])aa.polygonOffset(Pe,df),bc[0]=Pe,bc[1]=df;cf=xa.sample_alpha;cf!==sa.sample_alpha&&(cf?aa.enable(32926):aa.disable(32926),sa.sample_alpha=cf);Xe=xa.sample_enable;Xe!==sa.sample_enable&&(Xe?aa.enable(32928):aa.disable(32928),sa.sample_enable=Xe);Se=
Qb[0];bf=Qb[1];if(Se!==Ae[0]||bf!==Ae[1])aa.sampleCoverage(Se,bf),Ae[0]=Se,Ae[1]=bf;af=xa.stencil_mask;af!==sa.stencil_mask&&(aa.stencilMask(af),sa.stencil_mask=af);Ye=Sd[0];Ze=Sd[1];Zd=Sd[2];if(Ye!==De[0]||Ze!==De[1]||Zd!==De[2])aa.stencilFunc(Ye,Ze,Zd),De[0]=Ye,De[1]=Ze,De[2]=Zd;de=se[0];$e=se[1];kf=se[2];of=se[3];if(de!==oe[0]||$e!==oe[1]||kf!==oe[2]||of!==oe[3])aa.stencilOpSeparate(de,$e,kf,of),oe[0]=de,oe[1]=$e,oe[2]=kf,oe[3]=of;gf=Dd[0];lf=Dd[1];mf=Dd[2];nf=Dd[3];if(gf!==$d[0]||lf!==$d[1]||
mf!==$d[2]||nf!==$d[3])aa.stencilOpSeparate(gf,lf,mf,nf),$d[0]=gf,$d[1]=lf,$d[2]=mf,$d[3]=nf}p=a.viewport;n=p.x|0;u=p.y|0;w="width"in p?p.width|0:fa.framebufferWidth-n;z="height"in p?p.height|0:fa.framebufferHeight-u;y=fa.viewportWidth;fa.viewportWidth=w;D=fa.viewportHeight;fa.viewportHeight=z;aa.viewport(n,u,w,z);Pd[0]=n;Pd[1]=u;Pd[2]=w;Pd[3]=z;aa.blendColor(0,0,0,1);ia[0]=0;ia[1]=0;ia[2]=0;ia[3]=1;aa.enable(3042);sa.blend_enable=!0;aa.blendFuncSeparate(770,771,773,1);Ja[0]=770;Ja[1]=771;Ja[2]=773;
Ja[3]=1;aa.disable(2929);sa.depth_enable=!1;G=a.viewport;O=G.x|0;t=G.y|0;Ea="width"in G?G.width|0:fa.framebufferWidth-O;A="height"in G?G.height|0:fa.framebufferHeight-t;aa.scissor(O,t,Ea,A);Ad[0]=O;Ad[1]=t;Ad[2]=Ea;Ad[3]=A;aa.enable(3089);sa.scissor_enable=!0;aa.disable(2960);sa.stencil_enable=!1;if(H=sa.profile)I=performance.now(),d.count++;aa.useProgram(f.program);P=lb.angle_instanced_arrays;ya.setVAO(null);E=r.call(this,fa,a,0);Fa=!1;J=null;N=0;F=!1;qa=x=0;T=1;M=0;R=5126;U=wa=S=Q=0;W(E)?(Fa=!0,
J=ha.createStream(34962,E),R=J.dtype):(J=ha.getBuffer(E))?R=J.dtype:"constant"in E?(T=2,"number"===typeof E.constant?(S=E.constant,wa=U=Q=0):(S=0<E.constant.length?E.constant[0]:0,wa=1<E.constant.length?E.constant[1]:0,U=2<E.constant.length?E.constant[2]:0,Q=3<E.constant.length?E.constant[3]:0)):(J=W(E.buffer)?ha.createStream(34962,E.buffer):ha.getBuffer(E.buffer),R="type"in E?Nd[E.type]:J.dtype,F=!!E.normalized,qa=E.size|0,x=E.offset|0,M=E.stride|0,N=E.divisor|0);V=Aa.location;ob=Ua[V];if(1===T){ob.buffer||
aa.enableVertexAttribArray(V);ba=qa||1;if(ob.type!==R||ob.size!==ba||ob.buffer!==J||ob.normalized!==F||ob.offset!==x||ob.stride!==M)aa.bindBuffer(34962,J.buffer),aa.vertexAttribPointer(V,ba,R,F,M,x),ob.type=R,ob.size=ba,ob.buffer=J,ob.normalized=F,ob.offset=x,ob.stride=M;ob.divisor!==N&&(P.vertexAttribDivisorANGLE(V,N),ob.divisor=N)}else if(ob.buffer&&(aa.disableVertexAttribArray(V),ob.buffer=null),ob.x!==S||ob.y!==wa||ob.z!==U||ob.w!==Q)aa.vertexAttrib4f(V,S,wa,U,Q),ob.x=S,ob.y=wa,ob.z=U,ob.w=Q;
ea=q.call(this,fa,a,0);la=!1;ka=null;oa=0;Ia=!1;fb=Yb=0;Kb=1;Wa=0;ib=5126;Gb=Lb=Id=Xa=0;W(ea)?(la=!0,ka=ha.createStream(34962,ea),ib=ka.dtype):(ka=ha.getBuffer(ea))?ib=ka.dtype:"constant"in ea?(Kb=2,"number"===typeof ea.constant?(Id=ea.constant,Lb=Gb=Xa=0):(Id=0<ea.constant.length?ea.constant[0]:0,Lb=1<ea.constant.length?ea.constant[1]:0,Gb=2<ea.constant.length?ea.constant[2]:0,Xa=3<ea.constant.length?ea.constant[3]:0)):(ka=W(ea.buffer)?ha.createStream(34962,ea.buffer):ha.getBuffer(ea.buffer),ib=
"type"in ea?Nd[ea.type]:ka.dtype,Ia=!!ea.normalized,fb=ea.size|0,Yb=ea.offset|0,Wa=ea.stride|0,oa=ea.divisor|0);rc=za.location;Mb=Ua[rc];if(1===Kb){Mb.buffer||aa.enableVertexAttribArray(rc);jb=fb||1;if(Mb.type!==ib||Mb.size!==jb||Mb.buffer!==ka||Mb.normalized!==Ia||Mb.offset!==Yb||Mb.stride!==Wa)aa.bindBuffer(34962,ka.buffer),aa.vertexAttribPointer(rc,jb,ib,Ia,Wa,Yb),Mb.type=ib,Mb.size=jb,Mb.buffer=ka,Mb.normalized=Ia,Mb.offset=Yb,Mb.stride=Wa;Mb.divisor!==oa&&(P.vertexAttribDivisorANGLE(rc,oa),Mb.divisor=
oa)}else if(Mb.buffer&&(aa.disableVertexAttribArray(rc),Mb.buffer=null),Mb.x!==Id||Mb.y!==Lb||Mb.z!==Gb||Mb.w!==Xa)aa.vertexAttrib4f(rc,Id,Lb,Gb,Xa),Mb.x=Id,Mb.y=Lb,Mb.z=Gb,Mb.w=Xa;Eb=m.call(this,fa,a,0);Cb=!1;yb=null;gb=0;Zb=!1;rb=Nb=0;Sa=1;Sb=0;sb=5126;Ha=qb=hb=ic=0;W(Eb)?(Cb=!0,yb=ha.createStream(34962,Eb),sb=yb.dtype):(yb=ha.getBuffer(Eb))?sb=yb.dtype:"constant"in Eb?(Sa=2,"number"===typeof Eb.constant?(hb=Eb.constant,qb=Ha=ic=0):(hb=0<Eb.constant.length?Eb.constant[0]:0,qb=1<Eb.constant.length?
Eb.constant[1]:0,Ha=2<Eb.constant.length?Eb.constant[2]:0,ic=3<Eb.constant.length?Eb.constant[3]:0)):(yb=W(Eb.buffer)?ha.createStream(34962,Eb.buffer):ha.getBuffer(Eb.buffer),sb="type"in Eb?Nd[Eb.type]:yb.dtype,Zb=!!Eb.normalized,rb=Eb.size|0,Nb=Eb.offset|0,Sb=Eb.stride|0,gb=Eb.divisor|0);tb=Pa.location;Ka=Ua[tb];if(1===Sa){Ka.buffer||aa.enableVertexAttribArray(tb);db=rb||1;if(Ka.type!==sb||Ka.size!==db||Ka.buffer!==yb||Ka.normalized!==Zb||Ka.offset!==Nb||Ka.stride!==Sb)aa.bindBuffer(34962,yb.buffer),
aa.vertexAttribPointer(tb,db,sb,Zb,Sb,Nb),Ka.type=sb,Ka.size=db,Ka.buffer=yb,Ka.normalized=Zb,Ka.offset=Nb,Ka.stride=Sb;Ka.divisor!==gb&&(P.vertexAttribDivisorANGLE(tb,gb),Ka.divisor=gb)}else if(Ka.buffer&&(aa.disableVertexAttribArray(tb),Ka.buffer=null),Ka.x!==hb||Ka.y!==qb||Ka.z!==Ha||Ka.w!==ic)aa.vertexAttrib4f(tb,hb,qb,Ha,ic),Ka.x=hb,Ka.y=qb,Ka.z=Ha,Ka.w=ic;eb=b.call(this,fa,a,0);Ma=!1;kb=null;Ya=0;vb=!1;Ra=ub=0;Dc=1;Va=0;Hb=5126;$a=yd=La=Db=0;W(eb)?(Ma=!0,kb=ha.createStream(34962,eb),Hb=kb.dtype):
(kb=ha.getBuffer(eb))?Hb=kb.dtype:"constant"in eb?(Dc=2,"number"===typeof eb.constant?(La=eb.constant,yd=$a=Db=0):(La=0<eb.constant.length?eb.constant[0]:0,yd=1<eb.constant.length?eb.constant[1]:0,$a=2<eb.constant.length?eb.constant[2]:0,Db=3<eb.constant.length?eb.constant[3]:0)):(kb=W(eb.buffer)?ha.createStream(34962,eb.buffer):ha.getBuffer(eb.buffer),Hb="type"in eb?Nd[eb.type]:kb.dtype,vb=!!eb.normalized,Ra=eb.size|0,ub=eb.offset|0,Va=eb.stride|0,Ya=eb.divisor|0);Ib=Xb.location;Jb=Ua[Ib];if(1===
Dc){Jb.buffer||aa.enableVertexAttribArray(Ib);mb=Ra||1;if(Jb.type!==Hb||Jb.size!==mb||Jb.buffer!==kb||Jb.normalized!==vb||Jb.offset!==ub||Jb.stride!==Va)aa.bindBuffer(34962,kb.buffer),aa.vertexAttribPointer(Ib,mb,Hb,vb,Va,ub),Jb.type=Hb,Jb.size=mb,Jb.buffer=kb,Jb.normalized=vb,Jb.offset=ub,Jb.stride=Va;Jb.divisor!==Ya&&(P.vertexAttribDivisorANGLE(Ib,Ya),Jb.divisor=Ya)}else if(Jb.buffer&&(aa.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==La||Jb.y!==yd||Jb.z!==$a||Jb.w!==Db)aa.vertexAttrib4f(Ib,
La,yd,$a,Db),Jb.x=La,Jb.y=yd,Jb.z=$a,Jb.w=Db;Na=g.call(this,fa,a,0);$b=!1;Qa=null;wb=0;xb=!1;nb=Ta=0;fc=1;Bc=0;vc=5126;Za=Mc=jc=cb=0;W(Na)?($b=!0,Qa=ha.createStream(34962,Na),vc=Qa.dtype):(Qa=ha.getBuffer(Na))?vc=Qa.dtype:"constant"in Na?(fc=2,"number"===typeof Na.constant?(jc=Na.constant,Mc=Za=cb=0):(jc=0<Na.constant.length?Na.constant[0]:0,Mc=1<Na.constant.length?Na.constant[1]:0,Za=2<Na.constant.length?Na.constant[2]:0,cb=3<Na.constant.length?Na.constant[3]:0)):(Qa=W(Na.buffer)?ha.createStream(34962,
Na.buffer):ha.getBuffer(Na.buffer),vc="type"in Na?Nd[Na.type]:Qa.dtype,xb=!!Na.normalized,nb=Na.size|0,Ta=Na.offset|0,Bc=Na.stride|0,wb=Na.divisor|0);nd=Da.location;Ab=Ua[nd];if(1===fc){Ab.buffer||aa.enableVertexAttribArray(nd);ab=nb||1;if(Ab.type!==vc||Ab.size!==ab||Ab.buffer!==Qa||Ab.normalized!==xb||Ab.offset!==Ta||Ab.stride!==Bc)aa.bindBuffer(34962,Qa.buffer),aa.vertexAttribPointer(nd,ab,vc,xb,Bc,Ta),Ab.type=vc,Ab.size=ab,Ab.buffer=Qa,Ab.normalized=xb,Ab.offset=Ta,Ab.stride=Bc;Ab.divisor!==wb&&
(P.vertexAttribDivisorANGLE(nd,wb),Ab.divisor=wb)}else if(Ab.buffer&&(aa.disableVertexAttribArray(nd),Ab.buffer=null),Ab.x!==jc||Ab.y!==Mc||Ab.z!==Za||Ab.w!==cb)aa.vertexAttrib4f(nd,jc,Mc,Za,cb),Ab.x=jc,Ab.y=Mc,Ab.z=Za,Ab.w=cb;Ub=c.call(this,fa,a,0);tc=!1;Vb=null;Ob=0;Nc=!1;Od=Pb=0;Fc=1;vd=0;Qc=5126;wc=nc=sd=Yc=0;W(Ub)?(tc=!0,Vb=ha.createStream(34962,Ub),Qc=Vb.dtype):(Vb=ha.getBuffer(Ub))?Qc=Vb.dtype:"constant"in Ub?(Fc=2,"number"===typeof Ub.constant?(sd=Ub.constant,nc=wc=Yc=0):(sd=0<Ub.constant.length?
Ub.constant[0]:0,nc=1<Ub.constant.length?Ub.constant[1]:0,wc=2<Ub.constant.length?Ub.constant[2]:0,Yc=3<Ub.constant.length?Ub.constant[3]:0)):(Vb=W(Ub.buffer)?ha.createStream(34962,Ub.buffer):ha.getBuffer(Ub.buffer),Qc="type"in Ub?Nd[Ub.type]:Vb.dtype,Nc=!!Ub.normalized,Od=Ub.size|0,Pb=Ub.offset|0,vd=Ub.stride|0,Ob=Ub.divisor|0);gc=pa.location;bb=Ua[gc];if(1===Fc){bb.buffer||aa.enableVertexAttribArray(gc);sc=Od||1;if(bb.type!==Qc||bb.size!==sc||bb.buffer!==Vb||bb.normalized!==Nc||bb.offset!==Pb||
bb.stride!==vd)aa.bindBuffer(34962,Vb.buffer),aa.vertexAttribPointer(gc,sc,Qc,Nc,vd,Pb),bb.type=Qc,bb.size=sc,bb.buffer=Vb,bb.normalized=Nc,bb.offset=Pb,bb.stride=vd;bb.divisor!==Ob&&(P.vertexAttribDivisorANGLE(gc,Ob),bb.divisor=Ob)}else if(bb.buffer&&(aa.disableVertexAttribArray(gc),bb.buffer=null),bb.x!==sd||bb.y!==nc||bb.z!==wc||bb.w!==Yc)aa.vertexAttrib4f(gc,sd,nc,wc,Yc),bb.x=sd,bb.y=nc,bb.z=wc,bb.w=Yc;Rb=h.call(this,fa,a,0);Wb=!1;dc=null;hc=0;zc=!1;dd=Cc=0;Tc=1;Uc=0;Vc=5126;$c=ed=od=Zc=0;W(Rb)?
(Wb=!0,dc=ha.createStream(34962,Rb),Vc=dc.dtype):(dc=ha.getBuffer(Rb))?Vc=dc.dtype:"constant"in Rb?(Tc=2,"number"===typeof Rb.constant?(od=Rb.constant,ed=$c=Zc=0):(od=0<Rb.constant.length?Rb.constant[0]:0,ed=1<Rb.constant.length?Rb.constant[1]:0,$c=2<Rb.constant.length?Rb.constant[2]:0,Zc=3<Rb.constant.length?Rb.constant[3]:0)):(dc=W(Rb.buffer)?ha.createStream(34962,Rb.buffer):ha.getBuffer(Rb.buffer),Vc="type"in Rb?Nd[Rb.type]:dc.dtype,zc=!!Rb.normalized,dd=Rb.size|0,Cc=Rb.offset|0,Uc=Rb.stride|0,
hc=Rb.divisor|0);kc=K.location;cc=Ua[kc];if(1===Tc){cc.buffer||aa.enableVertexAttribArray(kc);ad=dd||4;if(cc.type!==Vc||cc.size!==ad||cc.buffer!==dc||cc.normalized!==zc||cc.offset!==Cc||cc.stride!==Uc)aa.bindBuffer(34962,dc.buffer),aa.vertexAttribPointer(kc,ad,Vc,zc,Uc,Cc),cc.type=Vc,cc.size=ad,cc.buffer=dc,cc.normalized=zc,cc.offset=Cc,cc.stride=Uc;cc.divisor!==hc&&(P.vertexAttribDivisorANGLE(kc,hc),cc.divisor=hc)}else if(cc.buffer&&(aa.disableVertexAttribArray(kc),cc.buffer=null),cc.x!==od||cc.y!==
ed||cc.z!==$c||cc.w!==Zc)aa.vertexAttrib4f(kc,od,ed,$c,Zc),cc.x=od,cc.y=ed,cc.z=$c,cc.w=Zc;Xc=B.call(this,fa,a,0);fd=!1;Ac=null;jd=0;Cd=!1;pe=ze=0;kd=1;Fe=0;Fd=5126;Md=Ud=ae=he=0;W(Xc)?(fd=!0,Ac=ha.createStream(34962,Xc),Fd=Ac.dtype):(Ac=ha.getBuffer(Xc))?Fd=Ac.dtype:"constant"in Xc?(kd=2,"number"===typeof Xc.constant?(ae=Xc.constant,Ud=Md=he=0):(ae=0<Xc.constant.length?Xc.constant[0]:0,Ud=1<Xc.constant.length?Xc.constant[1]:0,Md=2<Xc.constant.length?Xc.constant[2]:0,he=3<Xc.constant.length?Xc.constant[3]:
0)):(Ac=W(Xc.buffer)?ha.createStream(34962,Xc.buffer):ha.getBuffer(Xc.buffer),Fd="type"in Xc?Nd[Xc.type]:Ac.dtype,Cd=!!Xc.normalized,pe=Xc.size|0,ze=Xc.offset|0,Fe=Xc.stride|0,jd=Xc.divisor|0);Kd=ra.location;qd=Ua[Kd];if(1===kd){qd.buffer||aa.enableVertexAttribArray(Kd);Wc=pe||4;if(qd.type!==Fd||qd.size!==Wc||qd.buffer!==Ac||qd.normalized!==Cd||qd.offset!==ze||qd.stride!==Fe)aa.bindBuffer(34962,Ac.buffer),aa.vertexAttribPointer(Kd,Wc,Fd,Cd,Fe,ze),qd.type=Fd,qd.size=Wc,qd.buffer=Ac,qd.normalized=Cd,
qd.offset=ze,qd.stride=Fe;qd.divisor!==jd&&(P.vertexAttribDivisorANGLE(Kd,jd),qd.divisor=jd)}else if(qd.buffer&&(aa.disableVertexAttribArray(Kd),qd.buffer=null),qd.x!==ae||qd.y!==Ud||qd.z!==Md||qd.w!==he)aa.vertexAttrib4f(Kd,ae,Ud,Md,he),qd.x=ae,qd.y=Ud,qd.z=Md,qd.w=he;wd=v.call(this,fa,a,0);ud=!1;ld=null;xd=0;Gd=!1;je=Hd=0;me=1;ve=0;ne=5126;fe=we=ie=ke=0;W(wd)?(ud=!0,ld=ha.createStream(34962,wd),ne=ld.dtype):(ld=ha.getBuffer(wd))?ne=ld.dtype:"constant"in wd?(me=2,"number"===typeof wd.constant?(ie=
wd.constant,we=fe=ke=0):(ie=0<wd.constant.length?wd.constant[0]:0,we=1<wd.constant.length?wd.constant[1]:0,fe=2<wd.constant.length?wd.constant[2]:0,ke=3<wd.constant.length?wd.constant[3]:0)):(ld=W(wd.buffer)?ha.createStream(34962,wd.buffer):ha.getBuffer(wd.buffer),ne="type"in wd?Nd[wd.type]:ld.dtype,Gd=!!wd.normalized,je=wd.size|0,Hd=wd.offset|0,ve=wd.stride|0,xd=wd.divisor|0);qe=da.location;Rc=Ua[qe];if(1===me){Rc.buffer||aa.enableVertexAttribArray(qe);id=je||1;if(Rc.type!==ne||Rc.size!==id||Rc.buffer!==
ld||Rc.normalized!==Gd||Rc.offset!==Hd||Rc.stride!==ve)aa.bindBuffer(34962,ld.buffer),aa.vertexAttribPointer(qe,id,ne,Gd,ve,Hd),Rc.type=ne,Rc.size=id,Rc.buffer=ld,Rc.normalized=Gd,Rc.offset=Hd,Rc.stride=ve;Rc.divisor!==xd&&(P.vertexAttribDivisorANGLE(qe,xd),Rc.divisor=xd)}else if(Rc.buffer&&(aa.disableVertexAttribArray(qe),Rc.buffer=null),Rc.x!==ie||Rc.y!==we||Rc.z!==fe||Rc.w!==ke)aa.vertexAttrib4f(qe,ie,we,fe,ke),Rc.x=ie,Rc.y=we,Rc.z=fe,Rc.w=ke;aa.uniform1i(L.location,!1);aa.uniform1f(Ba.location,
fa.pixelRatio);xe=e.call(this,fa,a,0);aa.uniform2f(ma.location,xe[0],xe[1]);te=a.scale;aa.uniform2f(va.location,te[0],te[1]);Qd=a.scaleFract;aa.uniform2f(ca.location,Qd[0],Qd[1]);Vd=a.translate;aa.uniform2f(ja.location,Vd[0],Vd[1]);Wd=a.translateFract;aa.uniform2f(na.location,Wd[0],Wd[1]);aa.uniform1f(X.location,a.opacity);aa.uniform1i(ga.location,l.bind());Xd=a.elements;re=null;(re=(Ce=W(Xd))?Ca.createStream(Xd):Ca.getElements(Xd))&&aa.bindBuffer(34963,re.buffer.buffer);Ge=a.offset;if(ue=a.count)Ve=
ua.instances,0<Ve?re?P.drawElementsInstancedANGLE(0,ue,re.type,Ge<<(re.type-5121>>1),Ve):P.drawArraysInstancedANGLE(0,Ge,ue,Ve):0>Ve&&(re?aa.drawElements(0,ue,re.type,Ge<<(re.type-5121>>1)):aa.drawArrays(0,Ge,ue)),sa.dirty=!0,ya.setVAO(null),fa.viewportWidth=y,fa.viewportHeight=D,H&&(d.cpuTime+=performance.now()-I),Fa&&ha.destroyStream(J),la&&ha.destroyStream(ka),Cb&&ha.destroyStream(yb),Ma&&ha.destroyStream(kb),$b&&ha.destroyStream(Qa),tc&&ha.destroyStream(Vb),Wb&&ha.destroyStream(dc),fd&&ha.destroyStream(Ac),
ud&&ha.destroyStream(ld),l.unbind(),Ce&&Ca.destroyStream(re)},scope:function(c,e,b){var a,l,h,g,f,r,m,C,v,B,q,O,K,P,za,L,N,X,T,ca,aa,M,Xb,R,ia,Pa,Q,Y,ya,da,ga,va,ra,U,Z,V,ja,Ua,ba,na,Da,Aa,ma,la,pa,ta,Ba,Fb,oa,Oa,Ga,Ja,lb,Qb,ac,Sa,bc,sb,Gc,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Sd,Va,Hb,Db,La,Ad,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,Pd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,$d,Fc,De,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,se,oe,Dd,kd,Ae,Fd,he,ae,Ud,
Md,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ve,ne,ke,ie,we,fe,qe,Rc,id,xe,te,Qd,Vd,Wd,Xd,re,Ce,Ge,ue,Ve,We,Re,ye,Je,Le,Me,Ne,Ke,Rd,be,ee,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,de,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;a=c.viewport;l=a.x|0;h=a.y|0;g="width"in a?a.width|
0:fa.framebufferWidth-l;f="height"in a?a.height|0:fa.framebufferHeight-h;r=fa.viewportWidth;fa.viewportWidth=g;m=fa.viewportHeight;fa.viewportHeight=f;C=yd[0];yd[0]=l;v=yd[1];yd[1]=h;B=yd[2];yd[2]=g;q=yd[3];yd[3]=f;O=wa[0];wa[0]=0;K=wa[1];wa[1]=0;P=wa[2];wa[2]=0;za=wa[3];wa[3]=1;L=xa.blend_enable;xa.blend_enable=!0;N=Ia[0];Ia[0]=770;X=Ia[1];Ia[1]=771;T=Ia[2];Ia[2]=773;ca=Ia[3];Ia[3]=1;aa=xa.depth_enable;xa.depth_enable=!1;M=c.viewport;Xb=M.x|0;R=M.y|0;ia="width"in M?M.width|0:fa.framebufferWidth-
Xb;Pa="height"in M?M.height|0:fa.framebufferHeight-R;Q=Id[0];Id[0]=Xb;Y=Id[1];Id[1]=R;ya=Id[2];Id[2]=ia;da=Id[3];Id[3]=Pa;ga=xa.scissor_enable;xa.scissor_enable=!0;va=xa.stencil_enable;xa.stencil_enable=!1;if(ra=sa.profile)U=performance.now(),d.count++;Z=c.elements;V=null;V=(ja=W(Z))?Ca.createStream(Z):Ca.getElements(Z);Ua=ua.elements;ua.elements=V;ba=c.offset;na=ua.offset;ua.offset=ba;Da=c.count;Aa=ua.count;ua.count=Da;ma=ua.primitive;ua.primitive=0;la=qa[45];qa[45]=!1;pa=c.markerTexture;ta=qa[48];
qa[48]=pa;Ba=c.opacity;Fb=qa[10];qa[10]=Ba;oa=p.call(this,fa,c,b);Oa=qa[46];qa[46]=oa;Ga=qa[47];qa[47]=n;Ja=fa.pixelRatio;lb=qa[34];qa[34]=Ja;Qb=c.scale;ac=qa[6];qa[6]=Qb;Sa=c.scaleFract;bc=qa[7];qa[7]=Sa;sb=c.translate;Gc=qa[8];qa[8]=sb;hb=c.translateFract;qb=qa[9];qa[9]=hb;Ha=k.call(this,fa,c,b);tb=!1;Ka=null;db=0;eb=!1;kb=Ma=0;Ya=1;vb=0;ub=5126;Hb=Va=Sd=Ra=0;W(Ha)?(tb=!0,Ka=ha.createStream(34962,Ha),ub=Ka.dtype):(Ka=ha.getBuffer(Ha))?ub=Ka.dtype:"constant"in Ha?(Ya=2,"number"===typeof Ha.constant?
(Sd=Ha.constant,Va=Hb=Ra=0):(Sd=0<Ha.constant.length?Ha.constant[0]:0,Va=1<Ha.constant.length?Ha.constant[1]:0,Hb=2<Ha.constant.length?Ha.constant[2]:0,Ra=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=W(Ha.buffer)?ha.createStream(34962,Ha.buffer):ha.getBuffer(Ha.buffer),ub="type"in Ha?Nd[Ha.type]:Ka.dtype,eb=!!Ha.normalized,kb=Ha.size|0,Ma=Ha.offset|0,vb=Ha.stride|0,db=Ha.divisor|0);Db=u.buffer;u.buffer=Ka;La=u.divisor;u.divisor=db;Ad=u.normalized;u.normalized=eb;$a=u.offset;u.offset=Ma;Ib=u.size;u.size=
kb;Jb=u.state;u.state=Ya;mb=u.stride;u.stride=vb;Na=u.type;u.type=ub;$b=u.w;u.w=Ra;Qa=u.x;u.x=Sd;wb=u.y;u.y=Va;xb=u.z;u.z=Hb;Ta=w.call(this,fa,c,b);nb=!1;fc=null;Bc=0;vc=!1;jc=cb=0;Mc=1;Za=0;Pd=5126;tc=Ub=ab=Ab=0;W(Ta)?(nb=!0,fc=ha.createStream(34962,Ta),Pd=fc.dtype):(fc=ha.getBuffer(Ta))?Pd=fc.dtype:"constant"in Ta?(Mc=2,"number"===typeof Ta.constant?(ab=Ta.constant,Ub=tc=Ab=0):(ab=0<Ta.constant.length?Ta.constant[0]:0,Ub=1<Ta.constant.length?Ta.constant[1]:0,tc=2<Ta.constant.length?Ta.constant[2]:
0,Ab=3<Ta.constant.length?Ta.constant[3]:0)):(fc=W(Ta.buffer)?ha.createStream(34962,Ta.buffer):ha.getBuffer(Ta.buffer),Pd="type"in Ta?Nd[Ta.type]:fc.dtype,vc=!!Ta.normalized,jc=Ta.size|0,cb=Ta.offset|0,Za=Ta.stride|0,Bc=Ta.divisor|0);Vb=D.buffer;D.buffer=fc;Ob=D.divisor;D.divisor=Bc;Nc=D.normalized;D.normalized=vc;Pb=D.offset;D.offset=cb;$d=D.size;D.size=jc;Fc=D.state;D.state=Mc;De=D.stride;D.stride=Za;Qc=D.type;D.type=Pd;Yc=D.w;D.w=Ab;sd=D.x;D.x=ab;nc=D.y;D.y=Ub;wc=D.z;D.z=tc;gc=t.call(this,fa,c,
b);bb=!1;sc=null;Rb=0;Wb=!1;hc=dc=0;zc=1;Cc=0;dd=5126;Zc=Vc=Uc=Tc=0;W(gc)?(bb=!0,sc=ha.createStream(34962,gc),dd=sc.dtype):(sc=ha.getBuffer(gc))?dd=sc.dtype:"constant"in gc?(zc=2,"number"===typeof gc.constant?(Uc=gc.constant,Vc=Zc=Tc=0):(Uc=0<gc.constant.length?gc.constant[0]:0,Vc=1<gc.constant.length?gc.constant[1]:0,Zc=2<gc.constant.length?gc.constant[2]:0,Tc=3<gc.constant.length?gc.constant[3]:0)):(sc=W(gc.buffer)?ha.createStream(34962,gc.buffer):ha.getBuffer(gc.buffer),dd="type"in gc?Nd[gc.type]:
sc.dtype,Wb=!!gc.normalized,hc=gc.size|0,dc=gc.offset|0,Cc=gc.stride|0,Rb=gc.divisor|0);od=y.buffer;y.buffer=sc;ed=y.divisor;y.divisor=Rb;$c=y.normalized;y.normalized=Wb;kc=y.offset;y.offset=dc;cc=y.size;y.size=hc;ad=y.state;y.state=zc;Xc=y.stride;y.stride=Cc;fd=y.type;y.type=dd;Ac=y.w;y.w=Tc;jd=y.x;y.x=Uc;se=y.y;y.y=Vc;oe=y.z;y.z=Zc;Dd=G.call(this,fa,c,b);kd=!1;Ae=null;Fd=0;he=!1;Ud=ae=0;Md=1;Kd=0;qd=5126;ld=ud=wd=Wc=0;W(Dd)?(kd=!0,Ae=ha.createStream(34962,Dd),qd=Ae.dtype):(Ae=ha.getBuffer(Dd))?
qd=Ae.dtype:"constant"in Dd?(Md=2,"number"===typeof Dd.constant?(wd=Dd.constant,ud=ld=Wc=0):(wd=0<Dd.constant.length?Dd.constant[0]:0,ud=1<Dd.constant.length?Dd.constant[1]:0,ld=2<Dd.constant.length?Dd.constant[2]:0,Wc=3<Dd.constant.length?Dd.constant[3]:0)):(Ae=W(Dd.buffer)?ha.createStream(34962,Dd.buffer):ha.getBuffer(Dd.buffer),qd="type"in Dd?Nd[Dd.type]:Ae.dtype,he=!!Dd.normalized,Ud=Dd.size|0,ae=Dd.offset|0,Kd=Dd.stride|0,Fd=Dd.divisor|0);xd=x.buffer;x.buffer=Ae;Gd=x.divisor;x.divisor=Fd;Hd=
x.normalized;x.normalized=he;je=x.offset;x.offset=ae;me=x.size;x.size=Ud;ve=x.state;x.state=Md;ne=x.stride;x.stride=Kd;ke=x.type;x.type=qd;ie=x.w;x.w=Wc;we=x.x;x.x=wd;fe=x.y;x.y=ud;qe=x.z;x.z=ld;Rc=I.call(this,fa,c,b);id=!1;xe=null;te=0;Qd=!1;Wd=Vd=0;Xd=1;re=0;Ce=5126;We=Ve=ue=Ge=0;W(Rc)?(id=!0,xe=ha.createStream(34962,Rc),Ce=xe.dtype):(xe=ha.getBuffer(Rc))?Ce=xe.dtype:"constant"in Rc?(Xd=2,"number"===typeof Rc.constant?(ue=Rc.constant,Ve=We=Ge=0):(ue=0<Rc.constant.length?Rc.constant[0]:0,Ve=1<Rc.constant.length?
Rc.constant[1]:0,We=2<Rc.constant.length?Rc.constant[2]:0,Ge=3<Rc.constant.length?Rc.constant[3]:0)):(xe=W(Rc.buffer)?ha.createStream(34962,Rc.buffer):ha.getBuffer(Rc.buffer),Ce="type"in Rc?Nd[Rc.type]:xe.dtype,Qd=!!Rc.normalized,Wd=Rc.size|0,Vd=Rc.offset|0,re=Rc.stride|0,te=Rc.divisor|0);Re=S.buffer;S.buffer=xe;ye=S.divisor;S.divisor=te;Je=S.normalized;S.normalized=Qd;Le=S.offset;S.offset=Vd;Me=S.size;S.size=Wd;Ne=S.state;S.state=Xd;Ke=S.stride;S.stride=re;Rd=S.type;S.type=Ce;be=S.w;S.w=Ge;ee=S.x;
S.x=ue;ge=S.y;S.y=Ve;Oe=S.z;S.z=We;Ld=H.call(this,fa,c,b);Yd=!1;He=null;Pe=0;df=!1;Xe=cf=0;Se=1;bf=0;af=5126;de=Zd=Ze=Ye=0;W(Ld)?(Yd=!0,He=ha.createStream(34962,Ld),af=He.dtype):(He=ha.getBuffer(Ld))?af=He.dtype:"constant"in Ld?(Se=2,"number"===typeof Ld.constant?(Ze=Ld.constant,Zd=de=Ye=0):(Ze=0<Ld.constant.length?Ld.constant[0]:0,Zd=1<Ld.constant.length?Ld.constant[1]:0,de=2<Ld.constant.length?Ld.constant[2]:0,Ye=3<Ld.constant.length?Ld.constant[3]:0)):(He=W(Ld.buffer)?ha.createStream(34962,Ld.buffer):
ha.getBuffer(Ld.buffer),af="type"in Ld?Nd[Ld.type]:He.dtype,df=!!Ld.normalized,Xe=Ld.size|0,cf=Ld.offset|0,bf=Ld.stride|0,Pe=Ld.divisor|0);$e=A.buffer;A.buffer=He;kf=A.divisor;A.divisor=Pe;of=A.normalized;A.normalized=df;gf=A.offset;A.offset=cf;lf=A.size;A.size=Xe;mf=A.state;A.state=Se;nf=A.stride;A.stride=bf;sf=A.type;A.type=af;pf=A.w;A.w=Ye;tf=A.x;A.x=Ze;Cf=A.y;A.y=Zd;Df=A.z;A.z=de;Te=ka.call(this,fa,c,b);Ie=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;W(Te)?(Ie=!0,qf=ha.createStream(34962,
Te),xf=qf.dtype):(qf=ha.getBuffer(Te))?xf=qf.dtype:"constant"in Te?(Ff=2,"number"===typeof Te.constant?(wf=Te.constant,zf=Af=yf=0):(wf=0<Te.constant.length?Te.constant[0]:0,zf=1<Te.constant.length?Te.constant[1]:0,Af=2<Te.constant.length?Te.constant[2]:0,yf=3<Te.constant.length?Te.constant[3]:0)):(qf=W(Te.buffer)?ha.createStream(34962,Te.buffer):ha.getBuffer(Te.buffer),xf="type"in Te?Nd[Te.type]:qf.dtype,Ef=!!Te.normalized,Bf=Te.size|0,Hf=Te.offset|0,Gf=Te.stride|0,rf=Te.divisor|0);Jf=J.buffer;J.buffer=
qf;Kf=J.divisor;J.divisor=rf;Lf=J.normalized;J.normalized=Ef;Mf=J.offset;J.offset=Hf;uf=J.size;J.size=Bf;Rf=J.state;J.state=Ff;If=J.stride;J.stride=Gf;vf=J.type;J.type=xf;dg=J.w;J.w=yf;Sf=J.x;J.x=wf;Tf=J.y;J.y=zf;qg=J.z;J.z=Af;hf=F.call(this,fa,c,b);ef=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;W(hf)?(ef=!0,Nf=ha.createStream(34962,hf),Wf=Nf.dtype):(Nf=ha.getBuffer(hf))?Wf=Nf.dtype:"constant"in hf?(hg=2,"number"===typeof hf.constant?(Xf=hf.constant,Yf=Zf=Uf=0):(Xf=0<hf.constant.length?
hf.constant[0]:0,Yf=1<hf.constant.length?hf.constant[1]:0,Zf=2<hf.constant.length?hf.constant[2]:0,Uf=3<hf.constant.length?hf.constant[3]:0)):(Nf=W(hf.buffer)?ha.createStream(34962,hf.buffer):ha.getBuffer(hf.buffer),Wf="type"in hf?Nd[hf.type]:Nf.dtype,eg=!!hf.normalized,gg=hf.size|0,fg=hf.offset|0,ig=hf.stride|0,Of=hf.divisor|0);jg=E.buffer;E.buffer=Nf;rg=E.divisor;E.divisor=Of;sg=E.normalized;E.normalized=eg;tg=E.offset;E.offset=fg;ug=E.size;E.size=gg;vg=E.state;E.state=hg;wg=E.stride;E.stride=ig;
xg=E.type;E.type=Wf;yg=E.w;E.w=Uf;zg=E.x;E.x=Xf;Ag=E.y;E.y=Yf;Bg=E.z;E.z=Zf;jf=ea.call(this,fa,c,b);ff=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;W(jf)?(ff=!0,Pf=ha.createStream(34962,jf),$f=Pf.dtype):(Pf=ha.getBuffer(jf))?$f=Pf.dtype:"constant"in jf?(ng=2,"number"===typeof jf.constant?(ag=jf.constant,bg=cg=Vf=0):(ag=0<jf.constant.length?jf.constant[0]:0,bg=1<jf.constant.length?jf.constant[1]:0,cg=2<jf.constant.length?jf.constant[2]:0,Vf=3<jf.constant.length?jf.constant[3]:0)):
(Pf=W(jf.buffer)?ha.createStream(34962,jf.buffer):ha.getBuffer(jf.buffer),$f="type"in jf?Nd[jf.type]:Pf.dtype,kg=!!jf.normalized,mg=jf.size|0,lg=jf.offset|0,og=jf.stride|0,Qf=jf.divisor|0);pg=z.buffer;z.buffer=Pf;Cg=z.divisor;z.divisor=Qf;Dg=z.normalized;z.normalized=kg;Eg=z.offset;z.offset=lg;Fg=z.size;z.size=mg;Gg=z.state;z.state=ng;Hg=z.stride;z.stride=og;Ig=z.type;z.type=$f;Jg=z.w;z.w=Vf;Kg=z.x;z.x=ag;Lg=z.y;z.y=bg;Mg=z.z;z.z=cg;Ng=Fa.vert;Fa.vert=59;Og=Fa.frag;Fa.frag=58;sa.dirty=!0;e(fa,c,b);
fa.viewportWidth=r;fa.viewportHeight=m;yd[0]=C;yd[1]=v;yd[2]=B;yd[3]=q;wa[0]=O;wa[1]=K;wa[2]=P;wa[3]=za;xa.blend_enable=L;Ia[0]=N;Ia[1]=X;Ia[2]=T;Ia[3]=ca;xa.depth_enable=aa;Id[0]=Q;Id[1]=Y;Id[2]=ya;Id[3]=da;xa.scissor_enable=ga;xa.stencil_enable=va;ra&&(d.cpuTime+=performance.now()-U);ja&&Ca.destroyStream(V);ua.elements=Ua;ua.offset=na;ua.count=Aa;ua.primitive=ma;qa[45]=la;qa[48]=ta;qa[10]=Fb;qa[46]=Oa;qa[47]=Ga;qa[34]=lb;qa[6]=ac;qa[7]=bc;qa[8]=Gc;qa[9]=qb;tb&&ha.destroyStream(Ka);u.buffer=Db;u.divisor=
La;u.normalized=Ad;u.offset=$a;u.size=Ib;u.state=Jb;u.stride=mb;u.type=Na;u.w=$b;u.x=Qa;u.y=wb;u.z=xb;nb&&ha.destroyStream(fc);D.buffer=Vb;D.divisor=Ob;D.normalized=Nc;D.offset=Pb;D.size=$d;D.state=Fc;D.stride=De;D.type=Qc;D.w=Yc;D.x=sd;D.y=nc;D.z=wc;bb&&ha.destroyStream(sc);y.buffer=od;y.divisor=ed;y.normalized=$c;y.offset=kc;y.size=cc;y.state=ad;y.stride=Xc;y.type=fd;y.w=Ac;y.x=jd;y.y=se;y.z=oe;kd&&ha.destroyStream(Ae);x.buffer=xd;x.divisor=Gd;x.normalized=Hd;x.offset=je;x.size=me;x.state=ve;x.stride=
ne;x.type=ke;x.w=ie;x.x=we;x.y=fe;x.z=qe;id&&ha.destroyStream(xe);S.buffer=Re;S.divisor=ye;S.normalized=Je;S.offset=Le;S.size=Me;S.state=Ne;S.stride=Ke;S.type=Rd;S.w=be;S.x=ee;S.y=ge;S.z=Oe;Yd&&ha.destroyStream(He);A.buffer=$e;A.divisor=kf;A.normalized=of;A.offset=gf;A.size=lf;A.state=mf;A.stride=nf;A.type=sf;A.w=pf;A.x=tf;A.y=Cf;A.z=Df;Ie&&ha.destroyStream(qf);J.buffer=Jf;J.divisor=Kf;J.normalized=Lf;J.offset=Mf;J.size=uf;J.state=Rf;J.stride=If;J.type=vf;J.w=dg;J.x=Sf;J.y=Tf;J.z=qg;ef&&ha.destroyStream(Nf);
E.buffer=jg;E.divisor=rg;E.normalized=sg;E.offset=tg;E.size=ug;E.state=vg;E.stride=wg;E.type=xg;E.w=yg;E.x=zg;E.y=Ag;E.z=Bg;ff&&ha.destroyStream(Pf);z.buffer=pg;z.divisor=Cg;z.normalized=Dg;z.offset=Eg;z.size=Fg;z.state=Gg;z.stride=Hg;z.type=Ig;z.w=Jg;z.x=Kg;z.y=Lg;z.z=Mg;Fa.vert=Ng;Fa.frag=Og;sa.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,
t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V){var T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca,lb,Fb,aa,W,xa,Fa,qa,ya,wa,ia,Y;T=a.attributes;P=a.buffer;N=a.context;O=a.current;Q=a.draw;R=a.elements;ra=a.extensions;pa=a.framebuffer;K=a.gl;L=a.isBufferArgs;da=a.next;X=a.shader;ma=a.uniforms;ga=a.vao;Ba=da.blend_color;va=O.blend_color;ca=da.blend_equation;Da=O.blend_equation;ja=da.blend_func;na=O.blend_func;Aa=da.colorMask;Pa=O.colorMask;za=da.depth_range;Xb=O.depth_range;
Ua=da.polygonOffset_offset;ha=O.polygonOffset_offset;fa=da.sample_coverage;sa=O.sample_coverage;ua=da.scissor_box;Ca=O.scissor_box;lb=da.stencil_func;Fb=O.stencil_func;aa=da.stencil_opBack;W=O.stencil_opBack;xa=da.stencil_opFront;Fa=O.stencil_opFront;qa=da.viewport;ya=O.viewport;wa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ia={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(c,b){var e,a,l,h,g,k,p,n,f,r,m,C,v;e=pa.next;e!==pa.cur&&
(e?K.bindFramebuffer(36160,e.framebuffer):K.bindFramebuffer(36160,null),pa.cur=e);if(O.dirty){var B,q,X,qa,ja,ma,Ba,Bd,Be,Qe,Ue,Jd,Ee,le,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec;B=da.dither;B!==O.dither&&(B?K.enable(3024):K.disable(3024),O.dither=B);q=ca[0];X=ca[1];if(q!==Da[0]||X!==Da[1])K.blendEquationSeparate(q,X),Da[0]=q,Da[1]=X;qa=da.depth_func;qa!==O.depth_func&&(K.depthFunc(qa),O.depth_func=qa);ja=za[0];ma=za[1];if(ja!==Xb[0]||ma!==Xb[1])K.depthRange(ja,ma),
Xb[0]=ja,Xb[1]=ma;Ba=da.depth_mask;Ba!==O.depth_mask&&(K.depthMask(Ba),O.depth_mask=Ba);Bd=Aa[0];Be=Aa[1];Qe=Aa[2];Ue=Aa[3];if(Bd!==Pa[0]||Be!==Pa[1]||Qe!==Pa[2]||Ue!==Pa[3])K.colorMask(Bd,Be,Qe,Ue),Pa[0]=Bd,Pa[1]=Be,Pa[2]=Qe,Pa[3]=Ue;Jd=da.cull_enable;Jd!==O.cull_enable&&(Jd?K.enable(2884):K.disable(2884),O.cull_enable=Jd);Ee=da.cull_face;Ee!==O.cull_face&&(K.cullFace(Ee),O.cull_face=Ee);le=da.frontFace;le!==O.frontFace&&(K.frontFace(le),O.frontFace=le);ce=da.lineWidth;ce!==O.lineWidth&&(K.lineWidth(ce),
O.lineWidth=ce);Td=da.polygonOffset_enable;Td!==O.polygonOffset_enable&&(Td?K.enable(32823):K.disable(32823),O.polygonOffset_enable=Td);Ed=Ua[0];pd=Ua[1];if(Ed!==ha[0]||pd!==ha[1])K.polygonOffset(Ed,pd),ha[0]=Ed,ha[1]=pd;bd=da.sample_alpha;bd!==O.sample_alpha&&(bd?K.enable(32926):K.disable(32926),O.sample_alpha=bd);td=da.sample_enable;td!==O.sample_enable&&(td?K.enable(32928):K.disable(32928),O.sample_enable=td);Oc=fa[0];rd=fa[1];if(Oc!==sa[0]||rd!==sa[1])K.sampleCoverage(Oc,rd),sa[0]=Oc,sa[1]=rd;
Hc=da.stencil_mask;Hc!==O.stencil_mask&&(K.stencilMask(Hc),O.stencil_mask=Hc);gd=lb[0];Sc=lb[1];md=lb[2];if(gd!==Fb[0]||Sc!==Fb[1]||md!==Fb[2])K.stencilFunc(gd,Sc,md),Fb[0]=gd,Fb[1]=Sc,Fb[2]=md;Tb=xa[0];yc=xa[1];uc=xa[2];zb=xa[3];if(Tb!==Fa[0]||yc!==Fa[1]||uc!==Fa[2]||zb!==Fa[3])K.stencilOpSeparate(Tb,yc,uc,zb),Fa[0]=Tb,Fa[1]=yc,Fa[2]=uc,Fa[3]=zb;xc=aa[0];Bb=aa[1];Lc=aa[2];lc=aa[3];if(xc!==W[0]||Bb!==W[1]||Lc!==W[2]||lc!==W[3])K.stencilOpSeparate(xc,Bb,Lc,lc),W[0]=xc,W[1]=Bb,W[2]=Lc,W[3]=lc;Ic=da.scissor_enable;
Ic!==O.scissor_enable&&(Ic?K.enable(3089):K.disable(3089),O.scissor_enable=Ic);hd=ua[0];cd=ua[1];Ec=ua[2];ec=ua[3];if(hd!==Ca[0]||cd!==Ca[1]||Ec!==Ca[2]||ec!==Ca[3])K.scissor(hd,cd,Ec,ec),Ca[0]=hd,Ca[1]=cd,Ca[2]=Ec,Ca[3]=ec}a=this.viewport;l=a.x|0;h=a.y|0;g="width"in a?a.width|0:N.framebufferWidth-l;k="height"in a?a.height|0:N.framebufferHeight-h;p=N.viewportWidth;N.viewportWidth=g;n=N.viewportHeight;N.viewportHeight=k;K.viewport(l,h,g,k);ya[0]=l;ya[1]=h;ya[2]=g;ya[3]=k;K.blendColor(0,0,0,1);va[0]=
0;va[1]=0;va[2]=0;va[3]=1;K.enable(3042);O.blend_enable=!0;K.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;K.disable(2929);O.depth_enable=!1;K.disable(2960);O.stencil_enable=!1;if(f=O.profile)r=performance.now(),d.count+=b;K.useProgram(u.program);m=ra.angle_instanced_arrays;var Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,
Za,nd,Ab,ab,Ub;ga.setVAO(null);Y.buffer=this.sizeBuffer;Jc=!1;oc=null;qc=0;mc=!1;pb=pc=0;Pc=1;Yb=0;fb=5126;Xa=ib=Wa=Kb=0;L(Y)?(Jc=!0,oc=P.createStream(34962,Y),fb=oc.dtype):(oc=P.getBuffer(Y))?fb=oc.dtype:"constant"in Y?(Pc=2,"number"===typeof Y.constant?(Wa=Y.constant,ib=Xa=Kb=0):(Wa=0<Y.constant.length?Y.constant[0]:0,ib=1<Y.constant.length?Y.constant[1]:0,Xa=2<Y.constant.length?Y.constant[2]:0,Kb=3<Y.constant.length?Y.constant[3]:0)):(oc=L(Y.buffer)?P.createStream(34962,Y.buffer):P.getBuffer(Y.buffer),
fb="type"in Y?wa[Y.type]:oc.dtype,mc=!!Y.normalized,pb=Y.size|0,pc=Y.offset|0,Yb=Y.stride|0,qc=Y.divisor|0);Kc=V.location;Lb=T[Kc];if(1===Pc){Lb.buffer||K.enableVertexAttribArray(Kc);Gb=pb||1;if(Lb.type!==fb||Lb.size!==Gb||Lb.buffer!==oc||Lb.normalized!==mc||Lb.offset!==pc||Lb.stride!==Yb)K.bindBuffer(34962,oc.buffer),K.vertexAttribPointer(Kc,Gb,fb,mc,Yb,pc),Lb.type=fb,Lb.size=Gb,Lb.buffer=oc,Lb.normalized=mc,Lb.offset=pc,Lb.stride=Yb;Lb.divisor!==qc&&(m.vertexAttribDivisorANGLE(Kc,qc),Lb.divisor=
qc)}else if(Lb.buffer&&(K.disableVertexAttribArray(Kc),Lb.buffer=null),Lb.x!==Wa||Lb.y!==ib||Lb.z!==Xa||Lb.w!==Kb)K.vertexAttrib4f(Kc,Wa,ib,Xa,Kb),Lb.x=Wa,Lb.y=ib,Lb.z=Xa,Lb.w=Kb;ia.buffer=this.sizeBuffer;rc=!1;Mb=null;jb=0;Eb=!1;yb=Cb=0;gb=1;Zb=0;Nb=5126;sb=Sb=Sa=rb=0;L(ia)?(rc=!0,Mb=P.createStream(34962,ia),Nb=Mb.dtype):(Mb=P.getBuffer(ia))?Nb=Mb.dtype:"constant"in ia?(gb=2,"number"===typeof ia.constant?(Sa=ia.constant,Sb=sb=rb=0):(Sa=0<ia.constant.length?ia.constant[0]:0,Sb=1<ia.constant.length?
ia.constant[1]:0,sb=2<ia.constant.length?ia.constant[2]:0,rb=3<ia.constant.length?ia.constant[3]:0)):(Mb=L(ia.buffer)?P.createStream(34962,ia.buffer):P.getBuffer(ia.buffer),Nb="type"in ia?wa[ia.type]:Mb.dtype,Eb=!!ia.normalized,yb=ia.size|0,Cb=ia.offset|0,Zb=ia.stride|0,jb=ia.divisor|0);ic=J.location;hb=T[ic];if(1===gb){hb.buffer||K.enableVertexAttribArray(ic);qb=yb||1;if(hb.type!==Nb||hb.size!==qb||hb.buffer!==Mb||hb.normalized!==Eb||hb.offset!==Cb||hb.stride!==Zb)K.bindBuffer(34962,Mb.buffer),K.vertexAttribPointer(ic,
qb,Nb,Eb,Zb,Cb),hb.type=Nb,hb.size=qb,hb.buffer=Mb,hb.normalized=Eb,hb.offset=Cb,hb.stride=Zb;hb.divisor!==jb&&(m.vertexAttribDivisorANGLE(ic,jb),hb.divisor=jb)}else if(hb.buffer&&(K.disableVertexAttribArray(ic),hb.buffer=null),hb.x!==Sa||hb.y!==Sb||hb.z!==sb||hb.w!==rb)K.vertexAttrib4f(ic,Sa,Sb,sb,rb),hb.x=Sa,hb.y=Sb,hb.z=sb,hb.w=rb;Ha=this.charBuffer;tb=!1;Ka=null;db=0;eb=!1;kb=Ma=0;Ya=1;vb=0;ub=5126;Hb=Va=Dc=Ra=0;L(Ha)?(tb=!0,Ka=P.createStream(34962,Ha),ub=Ka.dtype):(Ka=P.getBuffer(Ha))?ub=Ka.dtype:
"constant"in Ha?(Ya=2,"number"===typeof Ha.constant?(Dc=Ha.constant,Va=Hb=Ra=0):(Dc=0<Ha.constant.length?Ha.constant[0]:0,Va=1<Ha.constant.length?Ha.constant[1]:0,Hb=2<Ha.constant.length?Ha.constant[2]:0,Ra=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=L(Ha.buffer)?P.createStream(34962,Ha.buffer):P.getBuffer(Ha.buffer),ub="type"in Ha?wa[Ha.type]:Ka.dtype,eb=!!Ha.normalized,kb=Ha.size|0,Ma=Ha.offset|0,vb=Ha.stride|0,db=Ha.divisor|0);Db=ka.location;La=T[Db];if(1===Ya){La.buffer||K.enableVertexAttribArray(Db);
zd=kb||1;if(La.type!==ub||La.size!==zd||La.buffer!==Ka||La.normalized!==eb||La.offset!==Ma||La.stride!==vb)K.bindBuffer(34962,Ka.buffer),K.vertexAttribPointer(Db,zd,ub,eb,vb,Ma),La.type=ub,La.size=zd,La.buffer=Ka,La.normalized=eb,La.offset=Ma,La.stride=vb;La.divisor!==db&&(m.vertexAttribDivisorANGLE(Db,db),La.divisor=db)}else if(La.buffer&&(K.disableVertexAttribArray(Db),La.buffer=null),La.x!==Dc||La.y!==Va||La.z!==Hb||La.w!==Ra)K.vertexAttrib4f(Db,Dc,Va,Hb,Ra),La.x=Dc,La.y=Va,La.z=Hb,La.w=Ra;$a=
this.position;Ib=!1;Jb=null;mb=0;Na=!1;Qa=$b=0;wb=1;xb=0;Ta=5126;vc=Bc=fc=nb=0;L($a)?(Ib=!0,Jb=P.createStream(34962,$a),Ta=Jb.dtype):(Jb=P.getBuffer($a))?Ta=Jb.dtype:"constant"in $a?(wb=2,"number"===typeof $a.constant?(fc=$a.constant,Bc=vc=nb=0):(fc=0<$a.constant.length?$a.constant[0]:0,Bc=1<$a.constant.length?$a.constant[1]:0,vc=2<$a.constant.length?$a.constant[2]:0,nb=3<$a.constant.length?$a.constant[3]:0)):(Jb=L($a.buffer)?P.createStream(34962,$a.buffer):P.getBuffer($a.buffer),Ta="type"in $a?wa[$a.type]:
Jb.dtype,Na=!!$a.normalized,Qa=$a.size|0,$b=$a.offset|0,xb=$a.stride|0,mb=$a.divisor|0);cb=ba.location;jc=T[cb];if(1===wb){jc.buffer||K.enableVertexAttribArray(cb);Mc=Qa||2;if(jc.type!==Ta||jc.size!==Mc||jc.buffer!==Jb||jc.normalized!==Na||jc.offset!==$b||jc.stride!==xb)K.bindBuffer(34962,Jb.buffer),K.vertexAttribPointer(cb,Mc,Ta,Na,xb,$b),jc.type=Ta,jc.size=Mc,jc.buffer=Jb,jc.normalized=Na,jc.offset=$b,jc.stride=xb;jc.divisor!==mb&&(m.vertexAttribDivisorANGLE(cb,mb),jc.divisor=mb)}else if(jc.buffer&&
(K.disableVertexAttribArray(cb),jc.buffer=null),jc.x!==fc||jc.y!==Bc||jc.z!==vc||jc.w!==nb)K.vertexAttrib4f(cb,fc,Bc,vc,nb),jc.x=fc,jc.y=Bc,jc.z=vc,jc.w=nb;Za=this.viewportArray;K.uniform4f(U.location,Za[0],Za[1],Za[2],Za[3]);nd=this.scale;K.uniform2f(la.location,nd[0],nd[1]);Ab=this.translate;K.uniform2f(oa.location,Ab[0],Ab[1]);(ab=Q.elements)?K.bindBuffer(34963,ab.buffer.buffer):ga.currentVAO&&(ab=R.getElements(ga.currentVAO.elements))&&K.bindBuffer(34963,ab.buffer.buffer);Ub=Q.instances;for(C=
0;C<b;++C){v=c[C];var tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd,Cd;tc=w.call(this,N,v,C);C&&Vb===tc||(Vb=tc,K.uniform1f(F.location,tc));Ob=D.call(this,N,v,C);C&&Nc===Ob||(Nc=Ob,K.uniform1f(ea.location,Ob));Pb=v.align;C&&Od===Pb||(Od=Pb,K.uniform1f(x.location,Pb));Fc=v.baseline;C&&vd===Fc||(vd=Fc,K.uniform1f(A.location,Fc));Qc=v.color;Yc=Qc[0];nc=Qc[1];gc=Qc[2];sc=Qc[3];C&&sd===Yc&&wc===nc&&bb===gc&&Rb===sc||(sd=Yc,wc=nc,bb=gc,Rb=
sc,K.uniform4f(E.location,Yc,nc,gc,sc));Wb=t.call(this,N,v,C);dc=Wb[0];zc=Wb[1];C&&hc===dc&&Cc===zc||(hc=dc,Cc=zc,K.uniform2f(H.location,dc,zc));dd=y.call(this,N,v,C);Tc=dd[0];Vc=dd[1];C&&Uc===Tc&&Zc===Vc||(Uc=Tc,Zc=Vc,K.uniform2f(S.location,Tc,Vc));od=v.positionOffset;ed=od[0];kc=od[1];C&&$c===ed&&cc===kc||($c=ed,cc=kc,K.uniform2f(M.location,ed,kc));ad=v.opacity;C&&Xc===ad||(Xc=ad,K.uniform1f(z.location,ad));(fd=G.call(this,N,v,C))&&"framebuffer"===fd._reglType&&(fd=fd.color[0]);Ac=fd._texture;K.uniform1i(I.location,
Ac.bind());jd=v.offset;if(Cd=v.count)0<Ub?ab?m.drawElementsInstancedANGLE(0,Cd,ab.type,jd<<(ab.type-5121>>1),Ub):m.drawArraysInstancedANGLE(0,jd,Cd,Ub):0>Ub&&(ab?K.drawElements(0,Cd,ab.type,jd<<(ab.type-5121>>1)):K.drawArrays(0,jd,Cd)),Ac.unbind()}Jc&&P.destroyStream(oc);rc&&P.destroyStream(Mb);tb&&P.destroyStream(Ka);Ib&&P.destroyStream(Jb);O.dirty=!0;ga.setVAO(null);N.viewportWidth=p;N.viewportHeight=n;f&&(d.cpuTime+=performance.now()-r)},draw:function(c){var e,a,l,h,k,p,n,u,w,v,y,B,D,G,t,Ea,X,
qa,ja,ma,Ba,Bd,Be,Qe,Ue,Jd,Ee,le,ce,Td,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb;e=pa.next;e!==pa.cur&&(e?K.bindFramebuffer(36160,e.framebuffer):K.bindFramebuffer(36160,null),pa.cur=e);if(O.dirty){var Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc;Ya=da.dither;Ya!==O.dither&&(Ya?K.enable(3024):
K.disable(3024),O.dither=Ya);vb=ca[0];ub=ca[1];if(vb!==Da[0]||ub!==Da[1])K.blendEquationSeparate(vb,ub),Da[0]=vb,Da[1]=ub;Ra=da.depth_func;Ra!==O.depth_func&&(K.depthFunc(Ra),O.depth_func=Ra);Dc=za[0];Va=za[1];if(Dc!==Xb[0]||Va!==Xb[1])K.depthRange(Dc,Va),Xb[0]=Dc,Xb[1]=Va;Hb=da.depth_mask;Hb!==O.depth_mask&&(K.depthMask(Hb),O.depth_mask=Hb);Db=Aa[0];La=Aa[1];zd=Aa[2];$a=Aa[3];if(Db!==Pa[0]||La!==Pa[1]||zd!==Pa[2]||$a!==Pa[3])K.colorMask(Db,La,zd,$a),Pa[0]=Db,Pa[1]=La,Pa[2]=zd,Pa[3]=$a;Ib=da.cull_enable;
Ib!==O.cull_enable&&(Ib?K.enable(2884):K.disable(2884),O.cull_enable=Ib);Jb=da.cull_face;Jb!==O.cull_face&&(K.cullFace(Jb),O.cull_face=Jb);mb=da.frontFace;mb!==O.frontFace&&(K.frontFace(mb),O.frontFace=mb);Na=da.lineWidth;Na!==O.lineWidth&&(K.lineWidth(Na),O.lineWidth=Na);$b=da.polygonOffset_enable;$b!==O.polygonOffset_enable&&($b?K.enable(32823):K.disable(32823),O.polygonOffset_enable=$b);Qa=Ua[0];wb=Ua[1];if(Qa!==ha[0]||wb!==ha[1])K.polygonOffset(Qa,wb),ha[0]=Qa,ha[1]=wb;xb=da.sample_alpha;xb!==
O.sample_alpha&&(xb?K.enable(32926):K.disable(32926),O.sample_alpha=xb);Ta=da.sample_enable;Ta!==O.sample_enable&&(Ta?K.enable(32928):K.disable(32928),O.sample_enable=Ta);nb=fa[0];fc=fa[1];if(nb!==sa[0]||fc!==sa[1])K.sampleCoverage(nb,fc),sa[0]=nb,sa[1]=fc;Bc=da.stencil_mask;Bc!==O.stencil_mask&&(K.stencilMask(Bc),O.stencil_mask=Bc);vc=lb[0];cb=lb[1];jc=lb[2];if(vc!==Fb[0]||cb!==Fb[1]||jc!==Fb[2])K.stencilFunc(vc,cb,jc),Fb[0]=vc,Fb[1]=cb,Fb[2]=jc;Mc=xa[0];Za=xa[1];nd=xa[2];Ab=xa[3];if(Mc!==Fa[0]||
Za!==Fa[1]||nd!==Fa[2]||Ab!==Fa[3])K.stencilOpSeparate(Mc,Za,nd,Ab),Fa[0]=Mc,Fa[1]=Za,Fa[2]=nd,Fa[3]=Ab;ab=aa[0];Ub=aa[1];tc=aa[2];Vb=aa[3];if(ab!==W[0]||Ub!==W[1]||tc!==W[2]||Vb!==W[3])K.stencilOpSeparate(ab,Ub,tc,Vb),W[0]=ab,W[1]=Ub,W[2]=tc,W[3]=Vb;Ob=da.scissor_enable;Ob!==O.scissor_enable&&(Ob?K.enable(3089):K.disable(3089),O.scissor_enable=Ob);Nc=ua[0];Pb=ua[1];Od=ua[2];Fc=ua[3];if(Nc!==Ca[0]||Pb!==Ca[1]||Od!==Ca[2]||Fc!==Ca[3])K.scissor(Nc,Pb,Od,Fc),Ca[0]=Nc,Ca[1]=Pb,Ca[2]=Od,Ca[3]=Fc}a=this.viewport;
l=a.x|0;h=a.y|0;k="width"in a?a.width|0:N.framebufferWidth-l;p="height"in a?a.height|0:N.framebufferHeight-h;n=N.viewportWidth;N.viewportWidth=k;u=N.viewportHeight;N.viewportHeight=p;K.viewport(l,h,k,p);ya[0]=l;ya[1]=h;ya[2]=k;ya[3]=p;K.blendColor(0,0,0,1);va[0]=0;va[1]=0;va[2]=0;va[3]=1;K.enable(3042);O.blend_enable=!0;K.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;K.disable(2929);O.depth_enable=!1;K.disable(2960);O.stencil_enable=!1;if(w=O.profile)v=performance.now(),d.count++;
K.useProgram(f.program);y=ra.angle_instanced_arrays;ga.setVAO(null);Y.buffer=this.sizeBuffer;B=!1;D=null;G=0;t=!1;X=Ea=0;qa=1;ja=0;ma=5126;Qe=Be=Bd=Ba=0;L(Y)?(B=!0,D=P.createStream(34962,Y),ma=D.dtype):(D=P.getBuffer(Y))?ma=D.dtype:"constant"in Y?(qa=2,"number"===typeof Y.constant?(Bd=Y.constant,Be=Qe=Ba=0):(Bd=0<Y.constant.length?Y.constant[0]:0,Be=1<Y.constant.length?Y.constant[1]:0,Qe=2<Y.constant.length?Y.constant[2]:0,Ba=3<Y.constant.length?Y.constant[3]:0)):(D=L(Y.buffer)?P.createStream(34962,
Y.buffer):P.getBuffer(Y.buffer),ma="type"in Y?wa[Y.type]:D.dtype,t=!!Y.normalized,X=Y.size|0,Ea=Y.offset|0,ja=Y.stride|0,G=Y.divisor|0);Ue=V.location;Jd=T[Ue];if(1===qa){Jd.buffer||K.enableVertexAttribArray(Ue);Ee=X||1;if(Jd.type!==ma||Jd.size!==Ee||Jd.buffer!==D||Jd.normalized!==t||Jd.offset!==Ea||Jd.stride!==ja)K.bindBuffer(34962,D.buffer),K.vertexAttribPointer(Ue,Ee,ma,t,ja,Ea),Jd.type=ma,Jd.size=Ee,Jd.buffer=D,Jd.normalized=t,Jd.offset=Ea,Jd.stride=ja;Jd.divisor!==G&&(y.vertexAttribDivisorANGLE(Ue,
G),Jd.divisor=G)}else if(Jd.buffer&&(K.disableVertexAttribArray(Ue),Jd.buffer=null),Jd.x!==Bd||Jd.y!==Be||Jd.z!==Qe||Jd.w!==Ba)K.vertexAttrib4f(Ue,Bd,Be,Qe,Ba),Jd.x=Bd,Jd.y=Be,Jd.z=Qe,Jd.w=Ba;ia.buffer=this.sizeBuffer;le=!1;ce=null;Td=0;Ed=!1;bd=pd=0;td=1;Oc=0;rd=5126;md=Sc=gd=Hc=0;L(ia)?(le=!0,ce=P.createStream(34962,ia),rd=ce.dtype):(ce=P.getBuffer(ia))?rd=ce.dtype:"constant"in ia?(td=2,"number"===typeof ia.constant?(gd=ia.constant,Sc=md=Hc=0):(gd=0<ia.constant.length?ia.constant[0]:0,Sc=1<ia.constant.length?
ia.constant[1]:0,md=2<ia.constant.length?ia.constant[2]:0,Hc=3<ia.constant.length?ia.constant[3]:0)):(ce=L(ia.buffer)?P.createStream(34962,ia.buffer):P.getBuffer(ia.buffer),rd="type"in ia?wa[ia.type]:ce.dtype,Ed=!!ia.normalized,bd=ia.size|0,pd=ia.offset|0,Oc=ia.stride|0,Td=ia.divisor|0);Tb=J.location;yc=T[Tb];if(1===td){yc.buffer||K.enableVertexAttribArray(Tb);uc=bd||1;if(yc.type!==rd||yc.size!==uc||yc.buffer!==ce||yc.normalized!==Ed||yc.offset!==pd||yc.stride!==Oc)K.bindBuffer(34962,ce.buffer),K.vertexAttribPointer(Tb,
uc,rd,Ed,Oc,pd),yc.type=rd,yc.size=uc,yc.buffer=ce,yc.normalized=Ed,yc.offset=pd,yc.stride=Oc;yc.divisor!==Td&&(y.vertexAttribDivisorANGLE(Tb,Td),yc.divisor=Td)}else if(yc.buffer&&(K.disableVertexAttribArray(Tb),yc.buffer=null),yc.x!==gd||yc.y!==Sc||yc.z!==md||yc.w!==Hc)K.vertexAttrib4f(Tb,gd,Sc,md,Hc),yc.x=gd,yc.y=Sc,yc.z=md,yc.w=Hc;zb=this.charBuffer;xc=!1;Bb=null;Lc=0;lc=!1;hd=Ic=0;cd=1;Ec=0;ec=5126;mc=qc=oc=Jc=0;L(zb)?(xc=!0,Bb=P.createStream(34962,zb),ec=Bb.dtype):(Bb=P.getBuffer(zb))?ec=Bb.dtype:
"constant"in zb?(cd=2,"number"===typeof zb.constant?(oc=zb.constant,qc=mc=Jc=0):(oc=0<zb.constant.length?zb.constant[0]:0,qc=1<zb.constant.length?zb.constant[1]:0,mc=2<zb.constant.length?zb.constant[2]:0,Jc=3<zb.constant.length?zb.constant[3]:0)):(Bb=L(zb.buffer)?P.createStream(34962,zb.buffer):P.getBuffer(zb.buffer),ec="type"in zb?wa[zb.type]:Bb.dtype,lc=!!zb.normalized,hd=zb.size|0,Ic=zb.offset|0,Ec=zb.stride|0,Lc=zb.divisor|0);pc=ka.location;pb=T[pc];if(1===cd){pb.buffer||K.enableVertexAttribArray(pc);
Pc=hd||1;if(pb.type!==ec||pb.size!==Pc||pb.buffer!==Bb||pb.normalized!==lc||pb.offset!==Ic||pb.stride!==Ec)K.bindBuffer(34962,Bb.buffer),K.vertexAttribPointer(pc,Pc,ec,lc,Ec,Ic),pb.type=ec,pb.size=Pc,pb.buffer=Bb,pb.normalized=lc,pb.offset=Ic,pb.stride=Ec;pb.divisor!==Lc&&(y.vertexAttribDivisorANGLE(pc,Lc),pb.divisor=Lc)}else if(pb.buffer&&(K.disableVertexAttribArray(pc),pb.buffer=null),pb.x!==oc||pb.y!==qc||pb.z!==mc||pb.w!==Jc)K.vertexAttrib4f(pc,oc,qc,mc,Jc),pb.x=oc,pb.y=qc,pb.z=mc,pb.w=Jc;Yb=
this.position;fb=!1;Kb=null;Wa=0;ib=!1;Kc=Xa=0;Lb=1;Gb=0;rc=5126;Cb=Eb=jb=Mb=0;L(Yb)?(fb=!0,Kb=P.createStream(34962,Yb),rc=Kb.dtype):(Kb=P.getBuffer(Yb))?rc=Kb.dtype:"constant"in Yb?(Lb=2,"number"===typeof Yb.constant?(jb=Yb.constant,Eb=Cb=Mb=0):(jb=0<Yb.constant.length?Yb.constant[0]:0,Eb=1<Yb.constant.length?Yb.constant[1]:0,Cb=2<Yb.constant.length?Yb.constant[2]:0,Mb=3<Yb.constant.length?Yb.constant[3]:0)):(Kb=L(Yb.buffer)?P.createStream(34962,Yb.buffer):P.getBuffer(Yb.buffer),rc="type"in Yb?wa[Yb.type]:
Kb.dtype,ib=!!Yb.normalized,Kc=Yb.size|0,Xa=Yb.offset|0,Gb=Yb.stride|0,Wa=Yb.divisor|0);yb=ba.location;gb=T[yb];if(1===Lb){gb.buffer||K.enableVertexAttribArray(yb);Zb=Kc||2;if(gb.type!==rc||gb.size!==Zb||gb.buffer!==Kb||gb.normalized!==ib||gb.offset!==Xa||gb.stride!==Gb)K.bindBuffer(34962,Kb.buffer),K.vertexAttribPointer(yb,Zb,rc,ib,Gb,Xa),gb.type=rc,gb.size=Zb,gb.buffer=Kb,gb.normalized=ib,gb.offset=Xa,gb.stride=Gb;gb.divisor!==Wa&&(y.vertexAttribDivisorANGLE(yb,Wa),gb.divisor=Wa)}else if(gb.buffer&&
(K.disableVertexAttribArray(yb),gb.buffer=null),gb.x!==jb||gb.y!==Eb||gb.z!==Cb||gb.w!==Mb)K.vertexAttrib4f(yb,jb,Eb,Cb,Mb),gb.x=jb,gb.y=Eb,gb.z=Cb,gb.w=Mb;Nb=r.call(this,N,c,0);K.uniform1f(F.location,Nb);rb=q.call(this,N,c,0);K.uniform1f(ea.location,rb);K.uniform1f(x.location,c.align);K.uniform1f(A.location,c.baseline);Sa=this.viewportArray;K.uniform4f(U.location,Sa[0],Sa[1],Sa[2],Sa[3]);Sb=c.color;K.uniform4f(E.location,Sb[0],Sb[1],Sb[2],Sb[3]);sb=m.call(this,N,c,0);K.uniform2f(H.location,sb[0],
sb[1]);ic=b.call(this,N,c,0);K.uniform2f(S.location,ic[0],ic[1]);hb=this.scale;K.uniform2f(la.location,hb[0],hb[1]);qb=this.translate;K.uniform2f(oa.location,qb[0],qb[1]);Ha=c.positionOffset;K.uniform2f(M.location,Ha[0],Ha[1]);K.uniform1f(z.location,c.opacity);(tb=g.call(this,N,c,0))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);Ka=tb._texture;K.uniform1i(I.location,Ka.bind());(db=Q.elements)?K.bindBuffer(34963,db.buffer.buffer):ga.currentVAO&&(db=R.getElements(ga.currentVAO.elements))&&K.bindBuffer(34963,
db.buffer.buffer);eb=c.offset;if(Ma=c.count)kb=Q.instances,0<kb?db?y.drawElementsInstancedANGLE(0,Ma,db.type,eb<<(db.type-5121>>1),kb):y.drawArraysInstancedANGLE(0,eb,Ma,kb):0>kb&&(db?K.drawElements(0,Ma,db.type,eb<<(db.type-5121>>1)):K.drawArrays(0,eb,Ma)),O.dirty=!0,ga.setVAO(null),N.viewportWidth=n,N.viewportHeight=u,w&&(d.cpuTime+=performance.now()-v),B&&P.destroyStream(D),le&&P.destroyStream(ce),xc&&P.destroyStream(Bb),fb&&P.destroyStream(Kb),Ka.unbind()},scope:function(b,a,g){var f,u,m,r,w,
C,z,y,D,q,G,K,t,Ea,ha,W,fa,A,H,I,E,sa,za,xa,Fa,J,F,x,T,ca,aa,M,Xb,R,Pa,ya,ua,ga,va,S,ra,U,ob,V,Ua,ea,ba,na,Da,Aa,la,pa,ka,Ca,Fb,oa,lb,Pc,Yb,fb,Kb,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za,nd,Ab,ab,Ub,tc,Vb,Ob,Nc,Pb,Od,Fc,vd,Qc,Yc,sd,nc,wc,gc,bb,sc,Rb,Wb,dc,hc,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,kc,cc,ad,Xc,fd,Ac,jd;f=this.viewport;u=f.x|0;m=f.y|0;r="width"in f?f.width|0:N.framebufferWidth-
u;w="height"in f?f.height|0:N.framebufferHeight-m;C=N.viewportWidth;N.viewportWidth=r;z=N.viewportHeight;N.viewportHeight=w;y=qa[0];qa[0]=u;D=qa[1];qa[1]=m;q=qa[2];qa[2]=r;G=qa[3];qa[3]=w;K=Ba[0];Ba[0]=0;t=Ba[1];Ba[1]=0;Ea=Ba[2];Ba[2]=0;ha=Ba[3];Ba[3]=1;W=da.blend_enable;da.blend_enable=!0;fa=ja[0];ja[0]=770;A=ja[1];ja[1]=771;H=ja[2];ja[2]=773;I=ja[3];ja[3]=1;E=da.depth_enable;da.depth_enable=!1;sa=da.stencil_enable;da.stencil_enable=!1;if(za=O.profile)xa=performance.now(),d.count++;Fa=b.offset;J=
Q.offset;Q.offset=Fa;F=b.count;x=Q.count;Q.count=F;T=Q.primitive;Q.primitive=0;ca=b.align;aa=ma[64];ma[64]=ca;M=c.call(this,N,b,g);Xb=ma[69];ma[69]=M;R=h.call(this,N,b,g);Pa=ma[67];ma[67]=R;ya=B.call(this,N,b,g);ua=ma[66];ma[66]=ya;ga=b.baseline;va=ma[65];ma[65]=ga;S=v.call(this,N,b,g);ra=ma[62];ma[62]=S;U=b.color;ob=ma[14];ma[14]=U;V=e.call(this,N,b,g);Ua=ma[63];ma[63]=V;ea=b.opacity;ba=ma[10];ma[10]=ea;na=b.positionOffset;Da=ma[68];ma[68]=na;Aa=this.scale;la=ma[6];ma[6]=Aa;pa=this.translate;ka=
ma[8];ma[8]=pa;Ca=this.viewportArray;Fb=ma[3];ma[3]=Ca;oa=this.charBuffer;lb=!1;Pc=null;Yb=0;fb=!1;Wa=Kb=0;ib=1;Xa=0;Kc=5126;Mb=rc=Gb=Lb=0;L(oa)?(lb=!0,Pc=P.createStream(34962,oa),Kc=Pc.dtype):(Pc=P.getBuffer(oa))?Kc=Pc.dtype:"constant"in oa?(ib=2,"number"===typeof oa.constant?(Gb=oa.constant,rc=Mb=Lb=0):(Gb=0<oa.constant.length?oa.constant[0]:0,rc=1<oa.constant.length?oa.constant[1]:0,Mb=2<oa.constant.length?oa.constant[2]:0,Lb=3<oa.constant.length?oa.constant[3]:0)):(Pc=L(oa.buffer)?P.createStream(34962,
oa.buffer):P.getBuffer(oa.buffer),Kc="type"in oa?wa[oa.type]:Pc.dtype,fb=!!oa.normalized,Wa=oa.size|0,Kb=oa.offset|0,Xa=oa.stride|0,Yb=oa.divisor|0);jb=l.buffer;l.buffer=Pc;Eb=l.divisor;l.divisor=Yb;Cb=l.normalized;l.normalized=fb;yb=l.offset;l.offset=Kb;gb=l.size;l.size=Wa;Zb=l.state;l.state=ib;Nb=l.stride;l.stride=Xa;rb=l.type;l.type=Kc;Sa=l.w;l.w=Lb;Sb=l.x;l.x=Gb;sb=l.y;l.y=rc;ic=l.z;l.z=Mb;ia.buffer=this.sizeBuffer;hb=!1;qb=null;Ha=0;tb=!1;db=Ka=0;eb=1;Ma=0;kb=5126;Ra=ub=vb=Ya=0;L(ia)?(hb=!0,
qb=P.createStream(34962,ia),kb=qb.dtype):(qb=P.getBuffer(ia))?kb=qb.dtype:"constant"in ia?(eb=2,"number"===typeof ia.constant?(vb=ia.constant,ub=Ra=Ya=0):(vb=0<ia.constant.length?ia.constant[0]:0,ub=1<ia.constant.length?ia.constant[1]:0,Ra=2<ia.constant.length?ia.constant[2]:0,Ya=3<ia.constant.length?ia.constant[3]:0)):(qb=L(ia.buffer)?P.createStream(34962,ia.buffer):P.getBuffer(ia.buffer),kb="type"in ia?wa[ia.type]:qb.dtype,tb=!!ia.normalized,db=ia.size|0,Ka=ia.offset|0,Ma=ia.stride|0,Ha=ia.divisor|
0);Dc=p.buffer;p.buffer=qb;Va=p.divisor;p.divisor=Ha;Hb=p.normalized;p.normalized=tb;Db=p.offset;p.offset=Ka;La=p.size;p.size=db;zd=p.state;p.state=eb;$a=p.stride;p.stride=Ma;Ib=p.type;p.type=kb;Jb=p.w;p.w=Ya;mb=p.x;p.x=vb;Na=p.y;p.y=ub;$b=p.z;p.z=Ra;Qa=this.position;wb=!1;xb=null;Ta=0;nb=!1;Bc=fc=0;vc=1;cb=0;jc=5126;Ab=nd=Za=Mc=0;L(Qa)?(wb=!0,xb=P.createStream(34962,Qa),jc=xb.dtype):(xb=P.getBuffer(Qa))?jc=xb.dtype:"constant"in Qa?(vc=2,"number"===typeof Qa.constant?(Za=Qa.constant,nd=Ab=Mc=0):(Za=
0<Qa.constant.length?Qa.constant[0]:0,nd=1<Qa.constant.length?Qa.constant[1]:0,Ab=2<Qa.constant.length?Qa.constant[2]:0,Mc=3<Qa.constant.length?Qa.constant[3]:0)):(xb=L(Qa.buffer)?P.createStream(34962,Qa.buffer):P.getBuffer(Qa.buffer),jc="type"in Qa?wa[Qa.type]:xb.dtype,nb=!!Qa.normalized,Bc=Qa.size|0,fc=Qa.offset|0,cb=Qa.stride|0,Ta=Qa.divisor|0);ab=n.buffer;n.buffer=xb;Ub=n.divisor;n.divisor=Ta;tc=n.normalized;n.normalized=nb;Vb=n.offset;n.offset=fc;Ob=n.size;n.size=Bc;Nc=n.state;n.state=vc;Pb=
n.stride;n.stride=cb;Od=n.type;n.type=jc;Fc=n.w;n.w=Mc;vd=n.x;n.x=Za;Qc=n.y;n.y=nd;Yc=n.z;n.z=Ab;Y.buffer=this.sizeBuffer;sd=!1;nc=null;wc=0;gc=!1;sc=bb=0;Rb=1;Wb=0;dc=5126;dd=Cc=zc=hc=0;L(Y)?(sd=!0,nc=P.createStream(34962,Y),dc=nc.dtype):(nc=P.getBuffer(Y))?dc=nc.dtype:"constant"in Y?(Rb=2,"number"===typeof Y.constant?(zc=Y.constant,Cc=dd=hc=0):(zc=0<Y.constant.length?Y.constant[0]:0,Cc=1<Y.constant.length?Y.constant[1]:0,dd=2<Y.constant.length?Y.constant[2]:0,hc=3<Y.constant.length?Y.constant[3]:
0)):(nc=L(Y.buffer)?P.createStream(34962,Y.buffer):P.getBuffer(Y.buffer),dc="type"in Y?wa[Y.type]:nc.dtype,gc=!!Y.normalized,sc=Y.size|0,bb=Y.offset|0,Wb=Y.stride|0,wc=Y.divisor|0);Tc=k.buffer;k.buffer=nc;Uc=k.divisor;k.divisor=wc;Vc=k.normalized;k.normalized=gc;Zc=k.offset;k.offset=bb;od=k.size;k.size=sc;ed=k.state;k.state=Rb;$c=k.stride;k.stride=Wb;kc=k.type;k.type=dc;cc=k.w;k.w=hc;ad=k.x;k.x=zc;Xc=k.y;k.y=Cc;fd=k.z;k.z=dd;Ac=X.vert;X.vert=61;jd=X.frag;X.frag=60;O.dirty=!0;a(N,b,g);N.viewportWidth=
C;N.viewportHeight=z;qa[0]=y;qa[1]=D;qa[2]=q;qa[3]=G;Ba[0]=K;Ba[1]=t;Ba[2]=Ea;Ba[3]=ha;da.blend_enable=W;ja[0]=fa;ja[1]=A;ja[2]=H;ja[3]=I;da.depth_enable=E;da.stencil_enable=sa;za&&(d.cpuTime+=performance.now()-xa);Q.offset=J;Q.count=x;Q.primitive=T;ma[64]=aa;ma[69]=Xb;ma[67]=Pa;ma[66]=ua;ma[65]=va;ma[62]=ra;ma[14]=ob;ma[63]=Ua;ma[10]=ba;ma[68]=Da;ma[6]=la;ma[8]=ka;ma[3]=Fb;lb&&P.destroyStream(Pc);l.buffer=jb;l.divisor=Eb;l.normalized=Cb;l.offset=yb;l.size=gb;l.state=Zb;l.stride=Nb;l.type=rb;l.w=
Sa;l.x=Sb;l.y=sb;l.z=ic;hb&&P.destroyStream(qb);p.buffer=Dc;p.divisor=Va;p.normalized=Hb;p.offset=Db;p.size=La;p.state=zd;p.stride=$a;p.type=Ib;p.w=Jb;p.x=mb;p.y=Na;p.z=$b;wb&&P.destroyStream(xb);n.buffer=ab;n.divisor=Ub;n.normalized=tc;n.offset=Vb;n.size=Ob;n.state=Nc;n.stride=Pb;n.type=Od;n.w=Fc;n.x=vd;n.y=Qc;n.z=Yc;sd&&P.destroyStream(nc);k.buffer=Tc;k.divisor=Uc;k.normalized=Vc;k.offset=Zc;k.size=od;k.state=ed;k.stride=$c;k.type=kc;k.w=cc;k.x=ad;k.y=Xc;k.z=fd;X.vert=Ac;X.frag=jd;O.dirty=!0}}},
$2:function(a,d,f){var r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea;r=a.attributes;q=a.current;m=a.framebuffer;b=a.gl;g=a.next;c=a.vao;h=g.blend_color;B=q.blend_color;v=g.blend_equation;e=q.blend_equation;l=g.blend_func;p=q.blend_func;n=g.colorMask;k=q.colorMask;u=g.depth_range;w=q.depth_range;D=g.polygonOffset_offset;t=q.polygonOffset_offset;y=g.sample_coverage;G=q.sample_coverage;x=g.scissor_box;I=q.scissor_box;S=g.stencil_func;H=q.stencil_func;A=g.stencil_opBack;ka=q.stencil_opBack;
J=g.stencil_opFront;F=q.stencil_opFront;E=g.viewport;ea=q.viewport;return{poll:function(){var c,a,d,f,r,C,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba;q.dirty=!1;a=g.blend_enable;d=g.cull_enable;f=g.depth_enable;r=g.dither;C=g.polygonOffset_enable;V=g.sample_alpha;T=g.sample_enable;P=g.scissor_enable;N=g.stencil_enable;O=g.cull_face;Q=q.cull_face;R=g.depth_func;ra=q.depth_func;pa=g.depth_mask;K=q.depth_mask;L=g.frontFace;da=q.frontFace;X=g.lineWidth;ma=q.lineWidth;ga=g.stencil_mask;Ba=q.stencil_mask;c=m.next;
c!==m.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),m.cur=c);a!==q.blend_enable&&(a?b.enable(3042):b.disable(3042),q.blend_enable=a);d!==q.cull_enable&&(d?b.enable(2884):b.disable(2884),q.cull_enable=d);f!==q.depth_enable&&(f?b.enable(2929):b.disable(2929),q.depth_enable=f);r!==q.dither&&(r?b.enable(3024):b.disable(3024),q.dither=r);C!==q.polygonOffset_enable&&(C?b.enable(32823):b.disable(32823),q.polygonOffset_enable=C);V!==q.sample_alpha&&(V?b.enable(32926):b.disable(32926),
q.sample_alpha=V);T!==q.sample_enable&&(T?b.enable(32928):b.disable(32928),q.sample_enable=T);P!==q.scissor_enable&&(P?b.enable(3089):b.disable(3089),q.scissor_enable=P);N!==q.stencil_enable&&(N?b.enable(2960):b.disable(2960),q.stencil_enable=N);if(h[0]!==B[0]||h[1]!==B[1]||h[2]!==B[2]||h[3]!==B[3])b.blendColor(h[0],h[1],h[2],h[3]),B[0]=h[0],B[1]=h[1],B[2]=h[2],B[3]=h[3];if(v[0]!==e[0]||v[1]!==e[1])b.blendEquationSeparate(v[0],v[1]),e[0]=v[0],e[1]=v[1];if(l[0]!==p[0]||l[1]!==p[1]||l[2]!==p[2]||l[3]!==
p[3])b.blendFuncSeparate(l[0],l[1],l[2],l[3]),p[0]=l[0],p[1]=l[1],p[2]=l[2],p[3]=l[3];if(n[0]!==k[0]||n[1]!==k[1]||n[2]!==k[2]||n[3]!==k[3])b.colorMask(n[0],n[1],n[2],n[3]),k[0]=n[0],k[1]=n[1],k[2]=n[2],k[3]=n[3];O!==Q&&(b.cullFace(O),q.cull_face=O);R!==ra&&(b.depthFunc(R),q.depth_func=R);pa!==K&&(b.depthMask(pa),q.depth_mask=pa);if(u[0]!==w[0]||u[1]!==w[1])b.depthRange(u[0],u[1]),w[0]=u[0],w[1]=u[1];L!==da&&(b.frontFace(L),q.frontFace=L);X!==ma&&(b.lineWidth(X),q.lineWidth=X);if(D[0]!==t[0]||D[1]!==
t[1])b.polygonOffset(D[0],D[1]),t[0]=D[0],t[1]=D[1];if(y[0]!==G[0]||y[1]!==G[1])b.sampleCoverage(y[0],y[1]),G[0]=y[0],G[1]=y[1];if(x[0]!==I[0]||x[1]!==I[1]||x[2]!==I[2]||x[3]!==I[3])b.scissor(x[0],x[1],x[2],x[3]),I[0]=x[0],I[1]=x[1],I[2]=x[2],I[3]=x[3];if(S[0]!==H[0]||S[1]!==H[1]||S[2]!==H[2])b.stencilFunc(S[0],S[1],S[2]),H[0]=S[0],H[1]=S[1],H[2]=S[2];ga!==Ba&&(b.stencilMask(ga),q.stencil_mask=ga);if(A[0]!==ka[0]||A[1]!==ka[1]||A[2]!==ka[2]||A[3]!==ka[3])b.stencilOpSeparate(A[0],A[1],A[2],A[3]),ka[0]=
A[0],ka[1]=A[1],ka[2]=A[2],ka[3]=A[3];if(J[0]!==F[0]||J[1]!==F[1]||J[2]!==F[2]||J[3]!==F[3])b.stencilOpSeparate(J[0],J[1],J[2],J[3]),F[0]=J[0],F[1]=J[1],F[2]=J[2],F[3]=J[3];if(E[0]!==ea[0]||E[1]!==ea[1]||E[2]!==ea[2]||E[3]!==ea[3])b.viewport(E[0],E[1],E[2],E[3]),ea[0]=E[0],ea[1]=E[1],ea[2]=E[2],ea[3]=E[3]},refresh:function(){var a,d,f,C,oa,U,V,T,P,N,O,Q,R,ra,pa,K;q.dirty=!1;d=g.blend_enable;f=g.cull_enable;C=g.depth_enable;oa=g.dither;U=g.polygonOffset_enable;V=g.sample_alpha;T=g.sample_enable;P=
g.scissor_enable;N=g.stencil_enable;O=g.cull_face;Q=g.depth_func;R=g.depth_mask;ra=g.frontFace;pa=g.lineWidth;K=g.stencil_mask;(a=m.next)?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null);m.cur=a;a=r[0];a.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=r[1];a.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,
a.buffer.buffer),b.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=r[2];a.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(2),b.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=r[3];a.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(3,
a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=r[4];a.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(4),b.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=r[5];a.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,
a.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=r[6];a.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=r[7];a.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(7),
b.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=r[8];a.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=r[9];a.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,a.x,a.y,a.z,
a.w),a.buffer=null);a=r[10];a.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=r[11];a.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=
r[12];a.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=r[13];a.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=r[14];a.buffer?(b.enableVertexAttribArray(14),
b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=r[15];a.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(15),b.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.currentVAO=null;c.setVAO(c.targetVAO);d?b.enable(3042):b.disable(3042);
q.blend_enable=d;f?b.enable(2884):b.disable(2884);q.cull_enable=f;C?b.enable(2929):b.disable(2929);q.depth_enable=C;oa?b.enable(3024):b.disable(3024);q.dither=oa;U?b.enable(32823):b.disable(32823);q.polygonOffset_enable=U;V?b.enable(32926):b.disable(32926);q.sample_alpha=V;T?b.enable(32928):b.disable(32928);q.sample_enable=T;P?b.enable(3089):b.disable(3089);q.scissor_enable=P;N?b.enable(2960):b.disable(2960);q.stencil_enable=N;b.blendColor(h[0],h[1],h[2],h[3]);B[0]=h[0];B[1]=h[1];B[2]=h[2];B[3]=h[3];
b.blendEquationSeparate(v[0],v[1]);e[0]=v[0];e[1]=v[1];b.blendFuncSeparate(l[0],l[1],l[2],l[3]);p[0]=l[0];p[1]=l[1];p[2]=l[2];p[3]=l[3];b.colorMask(n[0],n[1],n[2],n[3]);k[0]=n[0];k[1]=n[1];k[2]=n[2];k[3]=n[3];b.cullFace(O);q.cull_face=O;b.depthFunc(Q);q.depth_func=Q;b.depthMask(R);q.depth_mask=R;b.depthRange(u[0],u[1]);w[0]=u[0];w[1]=u[1];b.frontFace(ra);q.frontFace=ra;b.lineWidth(pa);q.lineWidth=pa;b.polygonOffset(D[0],D[1]);t[0]=D[0];t[1]=D[1];b.sampleCoverage(y[0],y[1]);G[0]=y[0];G[1]=y[1];b.scissor(x[0],
x[1],x[2],x[3]);I[0]=x[0];I[1]=x[1];I[2]=x[2];I[3]=x[3];b.stencilFunc(S[0],S[1],S[2]);H[0]=S[0];H[1]=S[1];H[2]=S[2];b.stencilMask(K);q.stencil_mask=K;b.stencilOpSeparate(A[0],A[1],A[2],A[3]);ka[0]=A[0];ka[1]=A[1];ka[2]=A[2];ka[3]=A[3];b.stencilOpSeparate(J[0],J[1],J[2],J[3]);F[0]=J[0];F[1]=J[1];F[2]=J[2];F[3]=J[3];b.viewport(E[0],E[1],E[2],E[3]);ea[0]=E[0];ea[1]=E[1];ea[2]=E[2];ea[3]=E[3]}}},$7:function(a,d,f,r,q,m,b,g){var c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T;c=
a.context;h=a.current;B=a.framebuffer;v=a.gl;e=a.next;l=a.shader;p=a.vao;n=e.blend_color;k=h.blend_color;u=e.blend_equation;w=h.blend_equation;D=e.blend_func;t=h.blend_func;y=e.colorMask;G=h.colorMask;x=e.depth_range;I=h.depth_range;S=e.polygonOffset_offset;H=h.polygonOffset_offset;A=e.sample_coverage;ka=h.sample_coverage;J=e.scissor_box;F=h.scissor_box;E=e.stencil_func;ea=h.stencil_func;z=e.stencil_opBack;ba=h.stencil_opBack;M=e.stencil_opFront;la=h.stencil_opFront;oa=e.viewport;U=h.viewport;V={};
T={};return{draw:function(a){var b,g,J,T,ra,pa,K,L,da,X;b=a.framebuffer;g=B.getFramebuffer(b);b&&!g&&d.commandRaise(q,f);b=B.next;B.next=g;J=c.framebufferWidth;c.framebufferWidth=g?g.width:c.drawingBufferWidth;T=c.framebufferHeight;c.framebufferHeight=g?g.height:c.drawingBufferHeight;g!==B.cur&&(g?v.bindFramebuffer(36160,g.framebuffer):v.bindFramebuffer(36160,null),B.cur=g);if(h.dirty){g=e.dither;g!==h.dither&&(g?v.enable(3024):v.disable(3024),h.dither=g);g=e.blend_enable;g!==h.blend_enable&&(g?v.enable(3042):
v.disable(3042),h.blend_enable=g);g=n[0];K=n[1];ra=n[2];pa=n[3];if(g!==k[0]||K!==k[1]||ra!==k[2]||pa!==k[3])v.blendColor(g,K,ra,pa),k[0]=g,k[1]=K,k[2]=ra,k[3]=pa;g=u[0];K=u[1];if(g!==w[0]||K!==w[1])v.blendEquationSeparate(g,K),w[0]=g,w[1]=K;g=D[0];K=D[1];ra=D[2];pa=D[3];if(g!==t[0]||K!==t[1]||ra!==t[2]||pa!==t[3])v.blendFuncSeparate(g,K,ra,pa),t[0]=g,t[1]=K,t[2]=ra,t[3]=pa;g=e.depth_enable;g!==h.depth_enable&&(g?v.enable(2929):v.disable(2929),h.depth_enable=g);g=e.depth_func;g!==h.depth_func&&(v.depthFunc(g),
h.depth_func=g);g=x[0];K=x[1];if(g!==I[0]||K!==I[1])v.depthRange(g,K),I[0]=g,I[1]=K;g=e.depth_mask;g!==h.depth_mask&&(v.depthMask(g),h.depth_mask=g);g=y[0];K=y[1];ra=y[2];pa=y[3];if(g!==G[0]||K!==G[1]||ra!==G[2]||pa!==G[3])v.colorMask(g,K,ra,pa),G[0]=g,G[1]=K,G[2]=ra,G[3]=pa;g=e.cull_enable;g!==h.cull_enable&&(g?v.enable(2884):v.disable(2884),h.cull_enable=g);g=e.cull_face;g!==h.cull_face&&(v.cullFace(g),h.cull_face=g);g=e.frontFace;g!==h.frontFace&&(v.frontFace(g),h.frontFace=g);g=e.lineWidth;g!==
h.lineWidth&&(v.lineWidth(g),h.lineWidth=g);g=e.polygonOffset_enable;g!==h.polygonOffset_enable&&(g?v.enable(32823):v.disable(32823),h.polygonOffset_enable=g);g=S[0];K=S[1];if(g!==H[0]||K!==H[1])v.polygonOffset(g,K),H[0]=g,H[1]=K;g=e.sample_alpha;g!==h.sample_alpha&&(g?v.enable(32926):v.disable(32926),h.sample_alpha=g);g=e.sample_enable;g!==h.sample_enable&&(g?v.enable(32928):v.disable(32928),h.sample_enable=g);g=A[0];K=A[1];if(g!==ka[0]||K!==ka[1])v.sampleCoverage(g,K),ka[0]=g,ka[1]=K;g=e.stencil_enable;
g!==h.stencil_enable&&(g?v.enable(2960):v.disable(2960),h.stencil_enable=g);g=e.stencil_mask;g!==h.stencil_mask&&(v.stencilMask(g),h.stencil_mask=g);g=E[0];K=E[1];ra=E[2];if(g!==ea[0]||K!==ea[1]||ra!==ea[2])v.stencilFunc(g,K,ra),ea[0]=g,ea[1]=K,ea[2]=ra;g=M[0];K=M[1];ra=M[2];pa=M[3];if(g!==la[0]||K!==la[1]||ra!==la[2]||pa!==la[3])v.stencilOpSeparate(g,K,ra,pa),la[0]=g,la[1]=K,la[2]=ra,la[3]=pa;g=z[0];K=z[1];ra=z[2];pa=z[3];if(g!==ba[0]||K!==ba[1]||ra!==ba[2]||pa!==ba[3])v.stencilOpSeparate(g,K,ra,
pa),ba[0]=g,ba[1]=K,ba[2]=ra,ba[3]=pa;g=e.scissor_enable;g!==h.scissor_enable&&(g?v.enable(3089):v.disable(3089),h.scissor_enable=g)}ra=c.framebufferWidth;pa=c.framebufferHeight;g=c.viewportWidth;c.viewportWidth=ra;K=c.viewportHeight;c.viewportHeight=pa;v.viewport(0,0,ra,pa);U[0]=0;U[1]=0;U[2]=ra;U[3]=pa;ra=c.framebufferWidth;pa=c.framebufferHeight;v.scissor(0,0,ra,pa);F[0]=0;F[1]=0;F[2]=ra;F[3]=pa;if(ra=h.profile)L=performance.now(),r.count++;pa=l.program(l.vert,l.frag,f);v.useProgram(pa.program);
p.setVAO(null);da=pa.id;(X=V[da])||(X=V[da]=m(pa));X.call(this,a);h.dirty=!0;p.setVAO(null);B.next=b;c.framebufferWidth=J;c.framebufferHeight=T;c.viewportWidth=g;c.viewportHeight=K;ra&&(r.cpuTime+=performance.now()-L)},scope:function(a,e,l){var g,k,p,n,u,m,w,v,y,D,q,z,t,G,Ea;g=a.framebuffer;k=B.getFramebuffer(g);g&&!k&&d.commandRaise(b,f);g=B.next;B.next=k;p=c.framebufferWidth;c.framebufferWidth=k?k.width:c.drawingBufferWidth;n=c.framebufferHeight;c.framebufferHeight=k?k.height:c.drawingBufferHeight;
u=c.framebufferWidth;m=c.framebufferHeight;k=c.viewportWidth;c.viewportWidth=u;w=c.viewportHeight;c.viewportHeight=m;v=oa[0];oa[0]=0;y=oa[1];oa[1]=0;D=oa[2];oa[2]=u;u=oa[3];oa[3]=m;q=c.framebufferWidth;z=c.framebufferHeight;m=J[0];J[0]=0;t=J[1];J[1]=0;G=J[2];J[2]=q;q=J[3];J[3]=z;if(z=h.profile)Ea=performance.now(),r.count++;h.dirty=!0;e(c,a,l);B.next=g;c.framebufferWidth=p;c.framebufferHeight=n;c.viewportWidth=k;c.viewportHeight=w;oa[0]=v;oa[1]=y;oa[2]=D;oa[3]=u;J[0]=m;J[1]=t;J[2]=G;J[3]=q;z&&(r.cpuTime+=
performance.now()-Ea);h.dirty=!0},batch:function(c,a){var b,d,m,B,q;if(h.dirty){b=e.dither;b!==h.dither&&(b?v.enable(3024):v.disable(3024),h.dither=b);b=e.blend_enable;b!==h.blend_enable&&(b?v.enable(3042):v.disable(3042),h.blend_enable=b);b=n[0];m=n[1];B=n[2];q=n[3];if(b!==k[0]||m!==k[1]||B!==k[2]||q!==k[3])v.blendColor(b,m,B,q),k[0]=b,k[1]=m,k[2]=B,k[3]=q;b=u[0];m=u[1];if(b!==w[0]||m!==w[1])v.blendEquationSeparate(b,m),w[0]=b,w[1]=m;b=D[0];m=D[1];B=D[2];q=D[3];if(b!==t[0]||m!==t[1]||B!==t[2]||q!==
t[3])v.blendFuncSeparate(b,m,B,q),t[0]=b,t[1]=m,t[2]=B,t[3]=q;b=e.depth_enable;b!==h.depth_enable&&(b?v.enable(2929):v.disable(2929),h.depth_enable=b);b=e.depth_func;b!==h.depth_func&&(v.depthFunc(b),h.depth_func=b);b=x[0];m=x[1];if(b!==I[0]||m!==I[1])v.depthRange(b,m),I[0]=b,I[1]=m;b=e.depth_mask;b!==h.depth_mask&&(v.depthMask(b),h.depth_mask=b);b=y[0];m=y[1];B=y[2];q=y[3];if(b!==G[0]||m!==G[1]||B!==G[2]||q!==G[3])v.colorMask(b,m,B,q),G[0]=b,G[1]=m,G[2]=B,G[3]=q;b=e.cull_enable;b!==h.cull_enable&&
(b?v.enable(2884):v.disable(2884),h.cull_enable=b);b=e.cull_face;b!==h.cull_face&&(v.cullFace(b),h.cull_face=b);b=e.frontFace;b!==h.frontFace&&(v.frontFace(b),h.frontFace=b);b=e.lineWidth;b!==h.lineWidth&&(v.lineWidth(b),h.lineWidth=b);b=e.polygonOffset_enable;b!==h.polygonOffset_enable&&(b?v.enable(32823):v.disable(32823),h.polygonOffset_enable=b);b=S[0];m=S[1];if(b!==H[0]||m!==H[1])v.polygonOffset(b,m),H[0]=b,H[1]=m;b=e.sample_alpha;b!==h.sample_alpha&&(b?v.enable(32926):v.disable(32926),h.sample_alpha=
b);b=e.sample_enable;b!==h.sample_enable&&(b?v.enable(32928):v.disable(32928),h.sample_enable=b);b=A[0];m=A[1];if(b!==ka[0]||m!==ka[1])v.sampleCoverage(b,m),ka[0]=b,ka[1]=m;b=e.stencil_enable;b!==h.stencil_enable&&(b?v.enable(2960):v.disable(2960),h.stencil_enable=b);b=e.stencil_mask;b!==h.stencil_mask&&(v.stencilMask(b),h.stencil_mask=b);b=E[0];m=E[1];B=E[2];if(b!==ea[0]||m!==ea[1]||B!==ea[2])v.stencilFunc(b,m,B),ea[0]=b,ea[1]=m,ea[2]=B;b=M[0];m=M[1];B=M[2];q=M[3];if(b!==la[0]||m!==la[1]||B!==la[2]||
q!==la[3])v.stencilOpSeparate(b,m,B,q),la[0]=b,la[1]=m,la[2]=B,la[3]=q;b=z[0];m=z[1];B=z[2];q=z[3];if(b!==ba[0]||m!==ba[1]||B!==ba[2]||q!==ba[3])v.stencilOpSeparate(b,m,B,q),ba[0]=b,ba[1]=m,ba[2]=B,ba[3]=q;b=e.scissor_enable;b!==h.scissor_enable&&(b?v.enable(3089):v.disable(3089),h.scissor_enable=b)}if(b=h.profile)d=performance.now(),r.count+=a;m=l.program(l.vert,l.frag,f);v.useProgram(m.program);p.setVAO(null);B=m.id;(q=T[B])||(q=T[B]=g(m));q.call(this,c,a);h.dirty=!0;p.setVAO(null);b&&(r.cpuTime+=
performance.now()-d)}}},$5:function(a,d,f,r,q,m){var b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U;b=a.context;g=a.current;c=a.framebuffer;h=a.gl;B=a.next;v=a.shader;e=a.vao;l=B.blend_color;p=g.blend_color;n=B.blend_equation;k=g.blend_equation;u=B.blend_func;w=g.blend_func;D=B.colorMask;t=g.colorMask;y=B.depth_range;G=g.depth_range;x=B.polygonOffset_offset;I=g.polygonOffset_offset;S=B.sample_coverage;H=g.sample_coverage;A=B.scissor_box;ka=g.scissor_box;J=B.stencil_func;F=
g.stencil_func;E=B.stencil_opBack;ea=g.stencil_opBack;z=B.stencil_opFront;ba=g.stencil_opFront;M=B.viewport;la=g.viewport;oa={};U={};return{draw:function(a){var b,d,m,O,Q;b=c.next;b!==c.cur&&(b?h.bindFramebuffer(36160,b.framebuffer):h.bindFramebuffer(36160,null),c.cur=b);if(g.dirty){b=B.dither;b!==g.dither&&(b?h.enable(3024):h.disable(3024),g.dither=b);b=B.blend_enable;b!==g.blend_enable&&(b?h.enable(3042):h.disable(3042),g.blend_enable=b);b=l[0];m=l[1];O=l[2];Q=l[3];if(b!==p[0]||m!==p[1]||O!==p[2]||
Q!==p[3])h.blendColor(b,m,O,Q),p[0]=b,p[1]=m,p[2]=O,p[3]=Q;b=n[0];m=n[1];if(b!==k[0]||m!==k[1])h.blendEquationSeparate(b,m),k[0]=b,k[1]=m;b=u[0];m=u[1];O=u[2];Q=u[3];if(b!==w[0]||m!==w[1]||O!==w[2]||Q!==w[3])h.blendFuncSeparate(b,m,O,Q),w[0]=b,w[1]=m,w[2]=O,w[3]=Q;b=B.depth_enable;b!==g.depth_enable&&(b?h.enable(2929):h.disable(2929),g.depth_enable=b);b=B.depth_func;b!==g.depth_func&&(h.depthFunc(b),g.depth_func=b);b=y[0];m=y[1];if(b!==G[0]||m!==G[1])h.depthRange(b,m),G[0]=b,G[1]=m;b=B.depth_mask;
b!==g.depth_mask&&(h.depthMask(b),g.depth_mask=b);b=D[0];m=D[1];O=D[2];Q=D[3];if(b!==t[0]||m!==t[1]||O!==t[2]||Q!==t[3])h.colorMask(b,m,O,Q),t[0]=b,t[1]=m,t[2]=O,t[3]=Q;b=B.cull_enable;b!==g.cull_enable&&(b?h.enable(2884):h.disable(2884),g.cull_enable=b);b=B.cull_face;b!==g.cull_face&&(h.cullFace(b),g.cull_face=b);b=B.frontFace;b!==g.frontFace&&(h.frontFace(b),g.frontFace=b);b=B.lineWidth;b!==g.lineWidth&&(h.lineWidth(b),g.lineWidth=b);b=B.polygonOffset_enable;b!==g.polygonOffset_enable&&(b?h.enable(32823):
h.disable(32823),g.polygonOffset_enable=b);b=x[0];m=x[1];if(b!==I[0]||m!==I[1])h.polygonOffset(b,m),I[0]=b,I[1]=m;b=B.sample_alpha;b!==g.sample_alpha&&(b?h.enable(32926):h.disable(32926),g.sample_alpha=b);b=B.sample_enable;b!==g.sample_enable&&(b?h.enable(32928):h.disable(32928),g.sample_enable=b);b=S[0];m=S[1];if(b!==H[0]||m!==H[1])h.sampleCoverage(b,m),H[0]=b,H[1]=m;b=B.stencil_enable;b!==g.stencil_enable&&(b?h.enable(2960):h.disable(2960),g.stencil_enable=b);b=B.stencil_mask;b!==g.stencil_mask&&
(h.stencilMask(b),g.stencil_mask=b);b=J[0];m=J[1];O=J[2];if(b!==F[0]||m!==F[1]||O!==F[2])h.stencilFunc(b,m,O),F[0]=b,F[1]=m,F[2]=O;b=z[0];m=z[1];O=z[2];Q=z[3];if(b!==ba[0]||m!==ba[1]||O!==ba[2]||Q!==ba[3])h.stencilOpSeparate(b,m,O,Q),ba[0]=b,ba[1]=m,ba[2]=O,ba[3]=Q;b=E[0];m=E[1];O=E[2];Q=E[3];if(b!==ea[0]||m!==ea[1]||O!==ea[2]||Q!==ea[3])h.stencilOpSeparate(b,m,O,Q),ea[0]=b,ea[1]=m,ea[2]=O,ea[3]=Q;b=B.scissor_enable;b!==g.scissor_enable&&(b?h.enable(3089):h.disable(3089),g.scissor_enable=b);b=A[0];
m=A[1];O=A[2];Q=A[3];if(b!==ka[0]||m!==ka[1]||O!==ka[2]||Q!==ka[3])h.scissor(b,m,O,Q),ka[0]=b,ka[1]=m,ka[2]=O,ka[3]=Q;b=M[0];m=M[1];O=M[2];Q=M[3];if(b!==la[0]||m!==la[1]||O!==la[2]||Q!==la[3])h.viewport(b,m,O,Q),la[0]=b,la[1]=m,la[2]=O,la[3]=Q;g.dirty=!1}if(b=g.profile)d=performance.now(),r.count++;m=v.program(v.vert,v.frag,f);h.useProgram(m.program);e.setVAO(null);O=m.id;(Q=oa[O])||(Q=oa[O]=q(m));Q.call(this,a);e.setVAO(null);b&&(r.cpuTime+=performance.now()-d)},scope:function(c,a,e){var d,l;if(d=
g.profile)l=performance.now(),r.count++;a(b,c,e);d&&(r.cpuTime+=performance.now()-l)},batch:function(b,a){var d,q,O,Q,R;d=c.next;d!==c.cur&&(d?h.bindFramebuffer(36160,d.framebuffer):h.bindFramebuffer(36160,null),c.cur=d);if(g.dirty){d=B.dither;d!==g.dither&&(d?h.enable(3024):h.disable(3024),g.dither=d);d=B.blend_enable;d!==g.blend_enable&&(d?h.enable(3042):h.disable(3042),g.blend_enable=d);d=l[0];O=l[1];Q=l[2];R=l[3];if(d!==p[0]||O!==p[1]||Q!==p[2]||R!==p[3])h.blendColor(d,O,Q,R),p[0]=d,p[1]=O,p[2]=
Q,p[3]=R;d=n[0];O=n[1];if(d!==k[0]||O!==k[1])h.blendEquationSeparate(d,O),k[0]=d,k[1]=O;d=u[0];O=u[1];Q=u[2];R=u[3];if(d!==w[0]||O!==w[1]||Q!==w[2]||R!==w[3])h.blendFuncSeparate(d,O,Q,R),w[0]=d,w[1]=O,w[2]=Q,w[3]=R;d=B.depth_enable;d!==g.depth_enable&&(d?h.enable(2929):h.disable(2929),g.depth_enable=d);d=B.depth_func;d!==g.depth_func&&(h.depthFunc(d),g.depth_func=d);d=y[0];O=y[1];if(d!==G[0]||O!==G[1])h.depthRange(d,O),G[0]=d,G[1]=O;d=B.depth_mask;d!==g.depth_mask&&(h.depthMask(d),g.depth_mask=d);
d=D[0];O=D[1];Q=D[2];R=D[3];if(d!==t[0]||O!==t[1]||Q!==t[2]||R!==t[3])h.colorMask(d,O,Q,R),t[0]=d,t[1]=O,t[2]=Q,t[3]=R;d=B.cull_enable;d!==g.cull_enable&&(d?h.enable(2884):h.disable(2884),g.cull_enable=d);d=B.cull_face;d!==g.cull_face&&(h.cullFace(d),g.cull_face=d);d=B.frontFace;d!==g.frontFace&&(h.frontFace(d),g.frontFace=d);d=B.lineWidth;d!==g.lineWidth&&(h.lineWidth(d),g.lineWidth=d);d=B.polygonOffset_enable;d!==g.polygonOffset_enable&&(d?h.enable(32823):h.disable(32823),g.polygonOffset_enable=
d);d=x[0];O=x[1];if(d!==I[0]||O!==I[1])h.polygonOffset(d,O),I[0]=d,I[1]=O;d=B.sample_alpha;d!==g.sample_alpha&&(d?h.enable(32926):h.disable(32926),g.sample_alpha=d);d=B.sample_enable;d!==g.sample_enable&&(d?h.enable(32928):h.disable(32928),g.sample_enable=d);d=S[0];O=S[1];if(d!==H[0]||O!==H[1])h.sampleCoverage(d,O),H[0]=d,H[1]=O;d=B.stencil_enable;d!==g.stencil_enable&&(d?h.enable(2960):h.disable(2960),g.stencil_enable=d);d=B.stencil_mask;d!==g.stencil_mask&&(h.stencilMask(d),g.stencil_mask=d);d=
J[0];O=J[1];Q=J[2];if(d!==F[0]||O!==F[1]||Q!==F[2])h.stencilFunc(d,O,Q),F[0]=d,F[1]=O,F[2]=Q;d=z[0];O=z[1];Q=z[2];R=z[3];if(d!==ba[0]||O!==ba[1]||Q!==ba[2]||R!==ba[3])h.stencilOpSeparate(d,O,Q,R),ba[0]=d,ba[1]=O,ba[2]=Q,ba[3]=R;d=E[0];O=E[1];Q=E[2];R=E[3];if(d!==ea[0]||O!==ea[1]||Q!==ea[2]||R!==ea[3])h.stencilOpSeparate(d,O,Q,R),ea[0]=d,ea[1]=O,ea[2]=Q,ea[3]=R;d=B.scissor_enable;d!==g.scissor_enable&&(d?h.enable(3089):h.disable(3089),g.scissor_enable=d);d=A[0];O=A[1];Q=A[2];R=A[3];if(d!==ka[0]||O!==
ka[1]||Q!==ka[2]||R!==ka[3])h.scissor(d,O,Q,R),ka[0]=d,ka[1]=O,ka[2]=Q,ka[3]=R;d=M[0];O=M[1];Q=M[2];R=M[3];if(d!==la[0]||O!==la[1]||Q!==la[2]||R!==la[3])h.viewport(d,O,Q,R),la[0]=d,la[1]=O,la[2]=Q,la[3]=R;g.dirty=!1}if(d=g.profile)q=performance.now(),r.count+=a;O=v.program(v.vert,v.frag,f);h.useProgram(O.program);e.setVAO(null);Q=O.id;(R=U[Q])||(R=U[Q]=m(O));R.call(this,b,a);e.setVAO(null);d&&(r.cpuTime+=performance.now()-q)}}},"$26,color,freq,phase,projection,time,view":function(a,d,f,r,q,m,b,g,
c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea){var z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca,lb,Fb,aa;z=a.attributes;ba=a.context;M=a.current;la=a.draw;oa=a.elements;U=a.framebuffer;V=a.gl;T=a.isArrayLike;P=a.next;N=a.shader;O=a.uniforms;Q=a.vao;R=P.blend_color;ra=M.blend_color;pa=P.blend_equation;K=M.blend_equation;L=P.blend_func;da=M.blend_func;X=P.colorMask;ma=M.colorMask;ga=P.depth_range;Ba=M.depth_range;va=P.polygonOffset_offset;ca=
M.polygonOffset_offset;Da=P.sample_coverage;ja=M.sample_coverage;na=P.scissor_box;Aa=M.scissor_box;Pa=P.stencil_func;za=M.stencil_func;Xb=P.stencil_opBack;Ua=M.stencil_opBack;ha=P.stencil_opFront;fa=M.stencil_opFront;sa=P.viewport;ua=M.viewport;Ca=new Float32Array(16);lb=new Float32Array(16);Fb=new Float32Array(16);aa=new Float32Array(16);return{draw:function(a){var k,p,n,u;k=U.next;k!==U.cur&&(k?V.bindFramebuffer(36160,k.framebuffer):V.bindFramebuffer(36160,null),U.cur=k);if(M.dirty){var w;k=P.dither;
k!==M.dither&&(k?V.enable(3024):V.disable(3024),M.dither=k);k=P.blend_enable;k!==M.blend_enable&&(k?V.enable(3042):V.disable(3042),M.blend_enable=k);k=R[0];n=R[1];u=R[2];w=R[3];if(k!==ra[0]||n!==ra[1]||u!==ra[2]||w!==ra[3])V.blendColor(k,n,u,w),ra[0]=k,ra[1]=n,ra[2]=u,ra[3]=w;k=pa[0];n=pa[1];if(k!==K[0]||n!==K[1])V.blendEquationSeparate(k,n),K[0]=k,K[1]=n;k=L[0];n=L[1];u=L[2];w=L[3];if(k!==da[0]||n!==da[1]||u!==da[2]||w!==da[3])V.blendFuncSeparate(k,n,u,w),da[0]=k,da[1]=n,da[2]=u,da[3]=w;k=P.depth_enable;
k!==M.depth_enable&&(k?V.enable(2929):V.disable(2929),M.depth_enable=k);k=P.depth_func;k!==M.depth_func&&(V.depthFunc(k),M.depth_func=k);k=ga[0];n=ga[1];if(k!==Ba[0]||n!==Ba[1])V.depthRange(k,n),Ba[0]=k,Ba[1]=n;k=P.depth_mask;k!==M.depth_mask&&(V.depthMask(k),M.depth_mask=k);k=X[0];n=X[1];u=X[2];w=X[3];if(k!==ma[0]||n!==ma[1]||u!==ma[2]||w!==ma[3])V.colorMask(k,n,u,w),ma[0]=k,ma[1]=n,ma[2]=u,ma[3]=w;k=P.cull_enable;k!==M.cull_enable&&(k?V.enable(2884):V.disable(2884),M.cull_enable=k);k=P.cull_face;
k!==M.cull_face&&(V.cullFace(k),M.cull_face=k);k=P.frontFace;k!==M.frontFace&&(V.frontFace(k),M.frontFace=k);k=P.lineWidth;k!==M.lineWidth&&(V.lineWidth(k),M.lineWidth=k);k=P.polygonOffset_enable;k!==M.polygonOffset_enable&&(k?V.enable(32823):V.disable(32823),M.polygonOffset_enable=k);k=va[0];n=va[1];if(k!==ca[0]||n!==ca[1])V.polygonOffset(k,n),ca[0]=k,ca[1]=n;k=P.sample_alpha;k!==M.sample_alpha&&(k?V.enable(32926):V.disable(32926),M.sample_alpha=k);k=P.sample_enable;k!==M.sample_enable&&(k?V.enable(32928):
V.disable(32928),M.sample_enable=k);k=Da[0];n=Da[1];if(k!==ja[0]||n!==ja[1])V.sampleCoverage(k,n),ja[0]=k,ja[1]=n;k=P.stencil_enable;k!==M.stencil_enable&&(k?V.enable(2960):V.disable(2960),M.stencil_enable=k);k=P.stencil_mask;k!==M.stencil_mask&&(V.stencilMask(k),M.stencil_mask=k);k=Pa[0];n=Pa[1];u=Pa[2];if(k!==za[0]||n!==za[1]||u!==za[2])V.stencilFunc(k,n,u),za[0]=k,za[1]=n,za[2]=u;k=ha[0];n=ha[1];u=ha[2];w=ha[3];if(k!==fa[0]||n!==fa[1]||u!==fa[2]||w!==fa[3])V.stencilOpSeparate(k,n,u,w),fa[0]=k,
fa[1]=n,fa[2]=u,fa[3]=w;k=Xb[0];n=Xb[1];u=Xb[2];w=Xb[3];if(k!==Ua[0]||n!==Ua[1]||u!==Ua[2]||w!==Ua[3])V.stencilOpSeparate(k,n,u,w),Ua[0]=k,Ua[1]=n,Ua[2]=u,Ua[3]=w;k=P.scissor_enable;k!==M.scissor_enable&&(k?V.enable(3089):V.disable(3089),M.scissor_enable=k);k=na[0];n=na[1];u=na[2];w=na[3];if(k!==Aa[0]||n!==Aa[1]||u!==Aa[2]||w!==Aa[3])V.scissor(k,n,u,w),Aa[0]=k,Aa[1]=n,Aa[2]=u,Aa[3]=w;k=sa[0];n=sa[1];u=sa[2];w=sa[3];if(k!==ua[0]||n!==ua[1]||u!==ua[2]||w!==ua[3])V.viewport(k,n,u,w),ua[0]=k,ua[1]=n,
ua[2]=u,ua[3]=w;M.dirty=!1}if(k=M.profile)p=performance.now(),r.count++;V.useProgram(q.program);Q.setVAO(null);n=ka.location;u=z[n];u.buffer||V.enableVertexAttribArray(n);if(5126!==u.type||4!==u.size||u.buffer!==m||!1!==u.normalized||0!==u.offset||44!==u.stride)V.bindBuffer(34962,m.buffer),V.vertexAttribPointer(n,4,5126,!1,44,0),u.type=5126,u.size=4,u.buffer=m,u.normalized=!1,u.offset=0,u.stride=44;n=J.location;u=z[n];u.buffer||V.enableVertexAttribArray(n);if(5126!==u.type||4!==u.size||u.buffer!==
b||!1!==u.normalized||16!==u.offset||44!==u.stride)V.bindBuffer(34962,b.buffer),V.vertexAttribPointer(n,4,5126,!1,44,16),u.type=5126,u.size=4,u.buffer=b,u.normalized=!1,u.offset=16,u.stride=44;n=A.location;u=z[n];u.buffer||V.enableVertexAttribArray(n);if(5126!==u.type||3!==u.size||u.buffer!==g||!1!==u.normalized||32!==u.offset||44!==u.stride)V.bindBuffer(34962,g.buffer),V.vertexAttribPointer(n,3,5126,!1,44,32),u.type=5126,u.size=3,u.buffer=g,u.normalized=!1,u.offset=32,u.stride=44;n=c.call(this,ba,
a,0);"number"!==typeof n&&d.commandRaise(h,f);V.uniform1f(E.location,n);n=B.call(this,ba,a,0);T(n)&&16===n.length||d.commandRaise(v,f);V.uniformMatrix4fv(ea.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ca[0]=n[0],Ca[1]=n[1],Ca[2]=n[2],Ca[3]=n[3],Ca[4]=n[4],Ca[5]=n[5],Ca[6]=n[6],Ca[7]=n[7],Ca[8]=n[8],Ca[9]=n[9],Ca[10]=n[10],Ca[11]=n[11],Ca[12]=n[12],Ca[13]=n[13],Ca[14]=n[14],Ca[15]=n[15],Ca));a=e.call(this,ba,a,0);T(a)&&16===a.length||d.commandRaise(l,f);V.uniformMatrix4fv(F.location,
!1,Array.isArray(a)||a instanceof Float32Array?a:(lb[0]=a[0],lb[1]=a[1],lb[2]=a[2],lb[3]=a[3],lb[4]=a[4],lb[5]=a[5],lb[6]=a[6],lb[7]=a[7],lb[8]=a[8],lb[9]=a[9],lb[10]=a[10],lb[11]=a[11],lb[12]=a[12],lb[13]=a[13],lb[14]=a[14],lb[15]=a[15],lb));(a=la.elements)?V.bindBuffer(34963,a.buffer.buffer):Q.currentVAO&&(a=oa.getElements(Q.currentVAO.elements))&&V.bindBuffer(34963,a.buffer.buffer);n=la.offset;a?V.drawElements(0,1E4,a.type,n<<(a.type-5121>>1)):V.drawArrays(0,n,1E4);Q.setVAO(null);k&&(r.cpuTime+=
performance.now()-p)},scope:function(c,a,e){var d,l,h,f,C,v,B,y,q,z,t,G,K,ha,fa,A,Ea,H,I,E,sa,x,za,J,L,F,X,ca,aa,Xb,Pa,P,Q,R,da,ua,ga,S,va,T,U,ra,ja,V,Ua;if(d=M.profile)l=performance.now(),r.count++;h=la.count;la.count=1E4;f=la.primitive;la.primitive=0;C=p.call(this,ba,c,e);v=O[5];O[5]=C;B=n.call(this,ba,c,e);C=O[3];O[3]=B;y=k.call(this,ba,c,e);B=O[4];O[4]=y;y=u.buffer;u.buffer=g;q=u.divisor;u.divisor=0;z=u.normalized;u.normalized=!1;t=u.offset;u.offset=32;G=u.size;u.size=0;K=u.state;u.state=1;ha=
u.stride;u.stride=44;fa=u.type;u.type=5126;A=u.w;u.w=0;Ea=u.x;u.x=0;H=u.y;u.y=0;I=u.z;u.z=0;E=w.buffer;w.buffer=m;sa=w.divisor;w.divisor=0;x=w.normalized;w.normalized=!1;za=w.offset;w.offset=0;J=w.size;w.size=0;L=w.state;w.state=1;F=w.stride;w.stride=44;X=w.type;w.type=5126;ca=w.w;w.w=0;aa=w.x;w.x=0;Xb=w.y;w.y=0;Pa=w.z;w.z=0;P=D.buffer;D.buffer=b;Q=D.divisor;D.divisor=0;R=D.normalized;D.normalized=!1;da=D.offset;D.offset=16;ua=D.size;D.size=0;ga=D.state;D.state=1;S=D.stride;D.stride=44;va=D.type;
D.type=5126;T=D.w;D.w=0;U=D.x;D.x=0;ra=D.y;D.y=0;ja=D.z;D.z=0;V=N.vert;N.vert=2;Ua=N.frag;N.frag=1;a(ba,c,e);d&&(r.cpuTime+=performance.now()-l);la.count=h;la.primitive=f;O[5]=v;O[3]=C;O[4]=B;u.buffer=y;u.divisor=q;u.normalized=z;u.offset=t;u.size=G;u.state=K;u.stride=ha;u.type=fa;u.w=A;u.x=Ea;u.y=H;u.z=I;w.buffer=E;w.divisor=sa;w.normalized=x;w.offset=za;w.size=J;w.state=L;w.stride=F;w.type=X;w.w=ca;w.x=aa;w.y=Xb;w.z=Pa;D.buffer=P;D.divisor=Q;D.normalized=R;D.offset=da;D.size=ua;D.state=ga;D.stride=
S;D.type=va;D.w=T;D.x=U;D.y=ra;D.z=ja;N.vert=V;N.frag=Ua},batch:function(c,a){var e,l,h;e=U.next;e!==U.cur&&(e?V.bindFramebuffer(36160,e.framebuffer):V.bindFramebuffer(36160,null),U.cur=e);if(M.dirty){var k,n,p;e=P.dither;e!==M.dither&&(e?V.enable(3024):V.disable(3024),M.dither=e);e=P.blend_enable;e!==M.blend_enable&&(e?V.enable(3042):V.disable(3042),M.blend_enable=e);e=R[0];k=R[1];n=R[2];p=R[3];if(e!==ra[0]||k!==ra[1]||n!==ra[2]||p!==ra[3])V.blendColor(e,k,n,p),ra[0]=e,ra[1]=k,ra[2]=n,ra[3]=p;e=
pa[0];k=pa[1];if(e!==K[0]||k!==K[1])V.blendEquationSeparate(e,k),K[0]=e,K[1]=k;e=L[0];k=L[1];n=L[2];p=L[3];if(e!==da[0]||k!==da[1]||n!==da[2]||p!==da[3])V.blendFuncSeparate(e,k,n,p),da[0]=e,da[1]=k,da[2]=n,da[3]=p;e=P.depth_enable;e!==M.depth_enable&&(e?V.enable(2929):V.disable(2929),M.depth_enable=e);e=P.depth_func;e!==M.depth_func&&(V.depthFunc(e),M.depth_func=e);e=ga[0];k=ga[1];if(e!==Ba[0]||k!==Ba[1])V.depthRange(e,k),Ba[0]=e,Ba[1]=k;e=P.depth_mask;e!==M.depth_mask&&(V.depthMask(e),M.depth_mask=
e);e=X[0];k=X[1];n=X[2];p=X[3];if(e!==ma[0]||k!==ma[1]||n!==ma[2]||p!==ma[3])V.colorMask(e,k,n,p),ma[0]=e,ma[1]=k,ma[2]=n,ma[3]=p;e=P.cull_enable;e!==M.cull_enable&&(e?V.enable(2884):V.disable(2884),M.cull_enable=e);e=P.cull_face;e!==M.cull_face&&(V.cullFace(e),M.cull_face=e);e=P.frontFace;e!==M.frontFace&&(V.frontFace(e),M.frontFace=e);e=P.lineWidth;e!==M.lineWidth&&(V.lineWidth(e),M.lineWidth=e);e=P.polygonOffset_enable;e!==M.polygonOffset_enable&&(e?V.enable(32823):V.disable(32823),M.polygonOffset_enable=
e);e=va[0];k=va[1];if(e!==ca[0]||k!==ca[1])V.polygonOffset(e,k),ca[0]=e,ca[1]=k;e=P.sample_alpha;e!==M.sample_alpha&&(e?V.enable(32926):V.disable(32926),M.sample_alpha=e);e=P.sample_enable;e!==M.sample_enable&&(e?V.enable(32928):V.disable(32928),M.sample_enable=e);e=Da[0];k=Da[1];if(e!==ja[0]||k!==ja[1])V.sampleCoverage(e,k),ja[0]=e,ja[1]=k;e=P.stencil_enable;e!==M.stencil_enable&&(e?V.enable(2960):V.disable(2960),M.stencil_enable=e);e=P.stencil_mask;e!==M.stencil_mask&&(V.stencilMask(e),M.stencil_mask=
e);e=Pa[0];k=Pa[1];n=Pa[2];if(e!==za[0]||k!==za[1]||n!==za[2])V.stencilFunc(e,k,n),za[0]=e,za[1]=k,za[2]=n;e=ha[0];k=ha[1];n=ha[2];p=ha[3];if(e!==fa[0]||k!==fa[1]||n!==fa[2]||p!==fa[3])V.stencilOpSeparate(e,k,n,p),fa[0]=e,fa[1]=k,fa[2]=n,fa[3]=p;e=Xb[0];k=Xb[1];n=Xb[2];p=Xb[3];if(e!==Ua[0]||k!==Ua[1]||n!==Ua[2]||p!==Ua[3])V.stencilOpSeparate(e,k,n,p),Ua[0]=e,Ua[1]=k,Ua[2]=n,Ua[3]=p;e=P.scissor_enable;e!==M.scissor_enable&&(e?V.enable(3089):V.disable(3089),M.scissor_enable=e);e=na[0];k=na[1];n=na[2];
p=na[3];if(e!==Aa[0]||k!==Aa[1]||n!==Aa[2]||p!==Aa[3])V.scissor(e,k,n,p),Aa[0]=e,Aa[1]=k,Aa[2]=n,Aa[3]=p;e=sa[0];k=sa[1];n=sa[2];p=sa[3];if(e!==ua[0]||k!==ua[1]||n!==ua[2]||p!==ua[3])V.viewport(e,k,n,p),ua[0]=e,ua[1]=k,ua[2]=n,ua[3]=p;M.dirty=!1}if(e=M.profile)l=performance.now(),r.count+=a;V.useProgram(t.program);Q.setVAO(null);k=ka.location;n=z[k];n.buffer||V.enableVertexAttribArray(k);if(5126!==n.type||4!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||44!==n.stride)V.bindBuffer(34962,
m.buffer),V.vertexAttribPointer(k,4,5126,!1,44,0),n.type=5126,n.size=4,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=44;k=J.location;n=z[k];n.buffer||V.enableVertexAttribArray(k);if(5126!==n.type||4!==n.size||n.buffer!==b||!1!==n.normalized||16!==n.offset||44!==n.stride)V.bindBuffer(34962,b.buffer),V.vertexAttribPointer(k,4,5126,!1,44,16),n.type=5126,n.size=4,n.buffer=b,n.normalized=!1,n.offset=16,n.stride=44;k=A.location;n=z[k];n.buffer||V.enableVertexAttribArray(k);if(5126!==n.type||3!==n.size||
n.buffer!==g||!1!==n.normalized||32!==n.offset||44!==n.stride)V.bindBuffer(34962,g.buffer),V.vertexAttribPointer(k,3,5126,!1,44,32),n.type=5126,n.size=3,n.buffer=g,n.normalized=!1,n.offset=32,n.stride=44;k=y.call(this,ba,void 0,h);"number"!==typeof k&&d.commandRaise(G,f);V.uniform1f(E.location,k);k=x.call(this,ba,void 0,h);T(k)&&16===k.length||d.commandRaise(I,f);V.uniformMatrix4fv(ea.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Fb[0]=k[0],Fb[1]=k[1],Fb[2]=k[2],Fb[3]=k[3],Fb[4]=k[4],
Fb[5]=k[5],Fb[6]=k[6],Fb[7]=k[7],Fb[8]=k[8],Fb[9]=k[9],Fb[10]=k[10],Fb[11]=k[11],Fb[12]=k[12],Fb[13]=k[13],Fb[14]=k[14],Fb[15]=k[15],Fb));h=S.call(this,ba,void 0,h);T(h)&&16===h.length||d.commandRaise(H,f);V.uniformMatrix4fv(F.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(aa[0]=h[0],aa[1]=h[1],aa[2]=h[2],aa[3]=h[3],aa[4]=h[4],aa[5]=h[5],aa[6]=h[6],aa[7]=h[7],aa[8]=h[8],aa[9]=h[9],aa[10]=h[10],aa[11]=h[11],aa[12]=h[12],aa[13]=h[13],aa[14]=h[14],aa[15]=h[15],aa));(k=la.elements)?V.bindBuffer(34963,
k.buffer.buffer):Q.currentVAO&&(k=oa.getElements(Q.currentVAO.elements))&&V.bindBuffer(34963,k.buffer.buffer);n=la.offset;for(h=0;h<a;++h)k?V.drawElements(0,1E4,k.type,n<<(k.type-5121>>1)):V.drawArrays(0,n,1E4);Q.setVAO(null);e&&(r.cpuTime+=performance.now()-l)}}},"$34,atlas,normal,position,projection,uv,view":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T){var P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca,lb,Fb,aa,
W,xa,Fa,qa,ya,wa,ia,Y,ta,Ia,Ja;P=a.attributes;N=a.buffer;O=a.context;Q=a.current;R=a.draw;ra=a.elements;pa=a.framebuffer;K=a.gl;L=a.isArrayLike;da=a.isBufferArgs;X=a.next;ma=a.shader;ga=a.uniforms;Ba=a.vao;va=X.blend_color;ca=Q.blend_color;Da=X.blend_equation;ja=Q.blend_equation;na=X.blend_func;Aa=Q.blend_func;Pa=X.colorMask;za=Q.colorMask;Xb=X.depth_range;Ua=Q.depth_range;ha=X.polygonOffset_offset;fa=Q.polygonOffset_offset;sa=X.sample_coverage;ua=Q.sample_coverage;Ca=X.scissor_box;lb=Q.scissor_box;
Fb=X.stencil_func;aa=Q.stencil_func;W=X.stencil_opBack;xa=Q.stencil_opBack;Fa=X.stencil_opFront;qa=Q.stencil_opFront;ya=X.viewport;wa=Q.viewport;ia={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);ta=new Float32Array(16);Ia=new Float32Array(16);Ja=new Float32Array(16);return{draw:function(a){var k,n,u,w,y,D,z,t,G,A,Ea,H,I,x,E,J,F,R,ga,S,ea,ba,ma,ob,ka,Ia,Ja,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,
oc,qc,mc,pc,pb,Pc,Yb,fb,Kb,Wa,ib;k=O.view;n=q.call(this,O,a,0);O.view=n;u=pa.next;u!==pa.cur&&(u?K.bindFramebuffer(36160,u.framebuffer):K.bindFramebuffer(36160,null),pa.cur=u);if(Q.dirty){var Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,Qa,wb,xb,Ta,nb,fc,Bc,vc,cb;Xa=X.dither;Xa!==Q.dither&&(Xa?K.enable(3024):K.disable(3024),Q.dither=Xa);Kc=X.blend_enable;Kc!==Q.blend_enable&&(Kc?K.enable(3042):K.disable(3042),Q.blend_enable=
Kc);Lb=va[0];Gb=va[1];rc=va[2];Mb=va[3];if(Lb!==ca[0]||Gb!==ca[1]||rc!==ca[2]||Mb!==ca[3])K.blendColor(Lb,Gb,rc,Mb),ca[0]=Lb,ca[1]=Gb,ca[2]=rc,ca[3]=Mb;jb=Da[0];Eb=Da[1];if(jb!==ja[0]||Eb!==ja[1])K.blendEquationSeparate(jb,Eb),ja[0]=jb,ja[1]=Eb;Cb=na[0];yb=na[1];gb=na[2];Zb=na[3];if(Cb!==Aa[0]||yb!==Aa[1]||gb!==Aa[2]||Zb!==Aa[3])K.blendFuncSeparate(Cb,yb,gb,Zb),Aa[0]=Cb,Aa[1]=yb,Aa[2]=gb,Aa[3]=Zb;Nb=X.depth_enable;Nb!==Q.depth_enable&&(Nb?K.enable(2929):K.disable(2929),Q.depth_enable=Nb);rb=X.depth_func;
rb!==Q.depth_func&&(K.depthFunc(rb),Q.depth_func=rb);Sa=Xb[0];Sb=Xb[1];if(Sa!==Ua[0]||Sb!==Ua[1])K.depthRange(Sa,Sb),Ua[0]=Sa,Ua[1]=Sb;sb=X.depth_mask;sb!==Q.depth_mask&&(K.depthMask(sb),Q.depth_mask=sb);ic=Pa[0];hb=Pa[1];qb=Pa[2];Ha=Pa[3];if(ic!==za[0]||hb!==za[1]||qb!==za[2]||Ha!==za[3])K.colorMask(ic,hb,qb,Ha),za[0]=ic,za[1]=hb,za[2]=qb,za[3]=Ha;tb=X.frontFace;tb!==Q.frontFace&&(K.frontFace(tb),Q.frontFace=tb);Ka=X.lineWidth;Ka!==Q.lineWidth&&(K.lineWidth(Ka),Q.lineWidth=Ka);db=X.polygonOffset_enable;
db!==Q.polygonOffset_enable&&(db?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=db);eb=ha[0];Ma=ha[1];if(eb!==fa[0]||Ma!==fa[1])K.polygonOffset(eb,Ma),fa[0]=eb,fa[1]=Ma;kb=X.sample_alpha;kb!==Q.sample_alpha&&(kb?K.enable(32926):K.disable(32926),Q.sample_alpha=kb);Ya=X.sample_enable;Ya!==Q.sample_enable&&(Ya?K.enable(32928):K.disable(32928),Q.sample_enable=Ya);vb=sa[0];ub=sa[1];if(vb!==ua[0]||ub!==ua[1])K.sampleCoverage(vb,ub),ua[0]=vb,ua[1]=ub;Ra=X.stencil_enable;Ra!==Q.stencil_enable&&(Ra?
K.enable(2960):K.disable(2960),Q.stencil_enable=Ra);Dc=X.stencil_mask;Dc!==Q.stencil_mask&&(K.stencilMask(Dc),Q.stencil_mask=Dc);Va=Fb[0];Hb=Fb[1];Db=Fb[2];if(Va!==aa[0]||Hb!==aa[1]||Db!==aa[2])K.stencilFunc(Va,Hb,Db),aa[0]=Va,aa[1]=Hb,aa[2]=Db;La=Fa[0];zd=Fa[1];$a=Fa[2];Ib=Fa[3];if(La!==qa[0]||zd!==qa[1]||$a!==qa[2]||Ib!==qa[3])K.stencilOpSeparate(La,zd,$a,Ib),qa[0]=La,qa[1]=zd,qa[2]=$a,qa[3]=Ib;Jb=W[0];mb=W[1];Na=W[2];$b=W[3];if(Jb!==xa[0]||mb!==xa[1]||Na!==xa[2]||$b!==xa[3])K.stencilOpSeparate(Jb,
mb,Na,$b),xa[0]=Jb,xa[1]=mb,xa[2]=Na,xa[3]=$b;Qa=X.scissor_enable;Qa!==Q.scissor_enable&&(Qa?K.enable(3089):K.disable(3089),Q.scissor_enable=Qa);wb=Ca[0];xb=Ca[1];Ta=Ca[2];nb=Ca[3];if(wb!==lb[0]||xb!==lb[1]||Ta!==lb[2]||nb!==lb[3])K.scissor(wb,xb,Ta,nb),lb[0]=wb,lb[1]=xb,lb[2]=Ta,lb[3]=nb;fc=ya[0];Bc=ya[1];vc=ya[2];cb=ya[3];if(fc!==wa[0]||Bc!==wa[1]||vc!==wa[2]||cb!==wa[3])K.viewport(fc,Bc,vc,cb),wa[0]=fc,wa[1]=Bc,wa[2]=vc,wa[3]=cb}K.enable(2884);Q.cull_enable=!0;K.cullFace(1029);Q.cull_face=1029;
if(w=Q.profile)y=performance.now(),r.count++;K.useProgram(m.program);Ba.setVAO(null);(D=a.position)&&("object"===typeof D||"function"===typeof D)&&(da(D)||N.getBuffer(D)||N.getBuffer(D.buffer)||da(D.buffer)||"constant"in D&&("number"===typeof D.constant||L(D.constant)))||d.commandRaise(b,f);z=!1;t=null;G=!1;Ea=A=0;H=1;I=0;x=5126;R=F=J=E=0;da(D)?(z=!0,t=N.createStream(34962,D),x=t.dtype):(t=N.getBuffer(D))?x=t.dtype:"constant"in D?(H=2,"number"===typeof D.constant?(J=D.constant,F=R=E=0):(J=0<D.constant.length?
D.constant[0]:0,F=1<D.constant.length?D.constant[1]:0,R=2<D.constant.length?D.constant[2]:0,E=3<D.constant.length?D.constant[3]:0)):(t=da(D.buffer)?N.createStream(34962,D.buffer):N.getBuffer(D.buffer),x="type"in D?ia[D.type]:t.dtype,G=!!D.normalized,Ea=D.size|0,A=D.offset|0,I=D.stride|0);ga=oa.location;S=P[ga];if(1===H){if(S.buffer||K.enableVertexAttribArray(ga),ea=Ea||3,S.type!==x||S.size!==ea||S.buffer!==t||S.normalized!==G||S.offset!==A||S.stride!==I)K.bindBuffer(34962,t.buffer),K.vertexAttribPointer(ga,
ea,x,G,I,A),S.type=x,S.size=ea,S.buffer=t,S.normalized=G,S.offset=A,S.stride=I}else if(S.buffer&&(K.disableVertexAttribArray(ga),S.buffer=null),S.x!==J||S.y!==F||S.z!==R||S.w!==E)K.vertexAttrib4f(ga,J,F,R,E),S.x=J,S.y=F,S.z=R,S.w=E;(ba=a.normal)&&("object"===typeof ba||"function"===typeof ba)&&(da(ba)||N.getBuffer(ba)||N.getBuffer(ba.buffer)||da(ba.buffer)||"constant"in ba&&("number"===typeof ba.constant||L(ba.constant)))||d.commandRaise(g,f);ma=!1;ob=null;ka=!1;Ja=Ia=0;Ed=1;pd=0;bd=5126;Hc=rd=Oc=
td=0;da(ba)?(ma=!0,ob=N.createStream(34962,ba),bd=ob.dtype):(ob=N.getBuffer(ba))?bd=ob.dtype:"constant"in ba?(Ed=2,"number"===typeof ba.constant?(Oc=ba.constant,rd=Hc=td=0):(Oc=0<ba.constant.length?ba.constant[0]:0,rd=1<ba.constant.length?ba.constant[1]:0,Hc=2<ba.constant.length?ba.constant[2]:0,td=3<ba.constant.length?ba.constant[3]:0)):(ob=da(ba.buffer)?N.createStream(34962,ba.buffer):N.getBuffer(ba.buffer),bd="type"in ba?ia[ba.type]:ob.dtype,ka=!!ba.normalized,Ja=ba.size|0,Ia=ba.offset|0,pd=ba.stride|
0);gd=la.location;Sc=P[gd];if(1===Ed){if(Sc.buffer||K.enableVertexAttribArray(gd),md=Ja||3,Sc.type!==bd||Sc.size!==md||Sc.buffer!==ob||Sc.normalized!==ka||Sc.offset!==Ia||Sc.stride!==pd)K.bindBuffer(34962,ob.buffer),K.vertexAttribPointer(gd,md,bd,ka,pd,Ia),Sc.type=bd,Sc.size=md,Sc.buffer=ob,Sc.normalized=ka,Sc.offset=Ia,Sc.stride=pd}else if(Sc.buffer&&(K.disableVertexAttribArray(gd),Sc.buffer=null),Sc.x!==Oc||Sc.y!==rd||Sc.z!==Hc||Sc.w!==td)K.vertexAttrib4f(gd,Oc,rd,Hc,td),Sc.x=Oc,Sc.y=rd,Sc.z=Hc,
Sc.w=td;(Tb=a.uv)&&("object"===typeof Tb||"function"===typeof Tb)&&(da(Tb)||N.getBuffer(Tb)||N.getBuffer(Tb.buffer)||da(Tb.buffer)||"constant"in Tb&&("number"===typeof Tb.constant||L(Tb.constant)))||d.commandRaise(c,f);yc=!1;uc=null;zb=!1;Bb=xc=0;Lc=1;lc=0;Ic=5126;ec=Ec=cd=hd=0;da(Tb)?(yc=!0,uc=N.createStream(34962,Tb),Ic=uc.dtype):(uc=N.getBuffer(Tb))?Ic=uc.dtype:"constant"in Tb?(Lc=2,"number"===typeof Tb.constant?(cd=Tb.constant,Ec=ec=hd=0):(cd=0<Tb.constant.length?Tb.constant[0]:0,Ec=1<Tb.constant.length?
Tb.constant[1]:0,ec=2<Tb.constant.length?Tb.constant[2]:0,hd=3<Tb.constant.length?Tb.constant[3]:0)):(uc=da(Tb.buffer)?N.createStream(34962,Tb.buffer):N.getBuffer(Tb.buffer),Ic="type"in Tb?ia[Tb.type]:uc.dtype,zb=!!Tb.normalized,Bb=Tb.size|0,xc=Tb.offset|0,lc=Tb.stride|0);Jc=V.location;oc=P[Jc];if(1===Lc){if(oc.buffer||K.enableVertexAttribArray(Jc),qc=Bb||2,oc.type!==Ic||oc.size!==qc||oc.buffer!==uc||oc.normalized!==zb||oc.offset!==xc||oc.stride!==lc)K.bindBuffer(34962,uc.buffer),K.vertexAttribPointer(Jc,
qc,Ic,zb,lc,xc),oc.type=Ic,oc.size=qc,oc.buffer=uc,oc.normalized=zb,oc.offset=xc,oc.stride=lc}else if(oc.buffer&&(K.disableVertexAttribArray(Jc),oc.buffer=null),oc.x!==cd||oc.y!==Ec||oc.z!==ec||oc.w!==hd)K.vertexAttrib4f(Jc,cd,Ec,ec,hd),oc.x=cd,oc.y=Ec,oc.z=ec,oc.w=hd;mc=h.call(this,O,a,0);L(mc)&&16===mc.length||d.commandRaise(B,f);K.uniformMatrix4fv(U.location,!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(Y[0]=mc[0],Y[1]=mc[1],Y[2]=mc[2],Y[3]=mc[3],Y[4]=mc[4],Y[5]=mc[5],Y[6]=mc[6],Y[7]=mc[7],
Y[8]=mc[8],Y[9]=mc[9],Y[10]=mc[10],Y[11]=mc[11],Y[12]=mc[12],Y[13]=mc[13],Y[14]=mc[14],Y[15]=mc[15],Y));pc=O.view;L(pc)&&16===pc.length||d.commandRaise(v,f);K.uniformMatrix4fv(T.location,!1,Array.isArray(pc)||pc instanceof Float32Array?pc:(ta[0]=pc[0],ta[1]=pc[1],ta[2]=pc[2],ta[3]=pc[3],ta[4]=pc[4],ta[5]=pc[5],ta[6]=pc[6],ta[7]=pc[7],ta[8]=pc[8],ta[9]=pc[9],ta[10]=pc[10],ta[11]=pc[11],ta[12]=pc[12],ta[13]=pc[13],ta[14]=pc[14],ta[15]=pc[15],ta));(pb=a.atlas)&&"framebuffer"===pb._reglType&&(pb=pb.color[0]);
"function"===typeof pb&&"texture2d"===pb._reglType||d.commandRaise(e,f);Pc=pb._texture;K.uniform1i(M.location,Pc.bind());Yb=a.elements;fb=null;(Kb=da(Yb))?fb=ra.createStream(Yb):(fb=ra.getElements(Yb),Yb&&!fb&&d.commandRaise(l,f));fb&&K.bindBuffer(34963,fb.buffer.buffer);Wa=fb?fb.primType:4;ib=fb?fb.vertCount:-1;0<=ib||d.commandRaise(p,f);ib&&(fb?K.drawElements(Wa,ib,fb.type,0<<(fb.type-5121>>1)):K.drawArrays(Wa,0,ib),Q.dirty=!0,Ba.setVAO(null),O.view=k,w&&(r.cpuTime+=performance.now()-y),z&&N.destroyStream(t),
ma&&N.destroyStream(ob),yc&&N.destroyStream(uc),Pc.unbind(),Kb&&ra.destroyStream(fb))},scope:function(c,b,a){var e,l,g,h,p,m,v,B,q,z,K,ha,A,fa,I,H,W,E,sa,za,J,F,ca,aa,Xb,M,Pa,S,P,xa,qa,Fa,ua,va,Y,T,U,ja,V,ba,Ua,ea,ya,na,Aa,ka,Da,wa,la,Ca,Ba,pa,Fb,oa,ta,lb,Ia,Ja,Wa,ib,Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb;e=O.view;l=n.call(this,O,c,a);O.view=l;g=X.cull_enable;X.cull_enable=!0;h=X.cull_face;X.cull_face=1029;if(p=Q.profile)m=
performance.now(),r.count++;v=c.elements;B=null;(q=da(v))?B=ra.createStream(v):(B=ra.getElements(v),v&&!B&&d.commandRaise(k,f));z=R.elements;R.elements=B;K=R.offset;R.offset=0;ha=B?B.vertCount:-1;A=R.count;R.count=ha;fa=B?B.primType:4;I=R.primitive;R.primitive=fa;H=c.atlas;W=ga[5];ga[5]=H;E=u.call(this,O,c,a);sa=ga[3];ga[3]=E;za=O.view;J=ga[4];ga[4]=za;(F=c.normal)&&("object"===typeof F||"function"===typeof F)&&(da(F)||N.getBuffer(F)||N.getBuffer(F.buffer)||da(F.buffer)||"constant"in F&&("number"===
typeof F.constant||L(F.constant)))||d.commandRaise(w,f);ca=!1;aa=null;Xb=0;M=!1;S=Pa=0;P=1;xa=0;qa=5126;Y=va=ua=Fa=0;da(F)?(ca=!0,aa=N.createStream(34962,F),qa=aa.dtype):(aa=N.getBuffer(F))?qa=aa.dtype:"constant"in F?(P=2,"number"===typeof F.constant?(ua=F.constant,va=Y=Fa=0):(ua=0<F.constant.length?F.constant[0]:0,va=1<F.constant.length?F.constant[1]:0,Y=2<F.constant.length?F.constant[2]:0,Fa=3<F.constant.length?F.constant[3]:0)):(aa=da(F.buffer)?N.createStream(34962,F.buffer):N.getBuffer(F.buffer),
qa="type"in F?ia[F.type]:aa.dtype,M=!!F.normalized,S=F.size|0,Pa=F.offset|0,xa=F.stride|0,Xb=F.divisor|0);T=D.buffer;D.buffer=aa;U=D.divisor;D.divisor=Xb;ja=D.normalized;D.normalized=M;V=D.offset;D.offset=Pa;ba=D.size;D.size=S;Ua=D.state;D.state=P;ea=D.stride;D.stride=xa;ya=D.type;D.type=qa;na=D.w;D.w=Fa;Aa=D.x;D.x=ua;ka=D.y;D.y=va;Da=D.z;D.z=Y;(wa=c.position)&&("object"===typeof wa||"function"===typeof wa)&&(da(wa)||N.getBuffer(wa)||N.getBuffer(wa.buffer)||da(wa.buffer)||"constant"in wa&&("number"===
typeof wa.constant||L(wa.constant)))||d.commandRaise(t,f);la=!1;Ca=null;Ba=0;pa=!1;oa=Fb=0;ta=1;lb=0;Ia=5126;Xa=ib=Wa=Ja=0;da(wa)?(la=!0,Ca=N.createStream(34962,wa),Ia=Ca.dtype):(Ca=N.getBuffer(wa))?Ia=Ca.dtype:"constant"in wa?(ta=2,"number"===typeof wa.constant?(Wa=wa.constant,ib=Xa=Ja=0):(Wa=0<wa.constant.length?wa.constant[0]:0,ib=1<wa.constant.length?wa.constant[1]:0,Xa=2<wa.constant.length?wa.constant[2]:0,Ja=3<wa.constant.length?wa.constant[3]:0)):(Ca=da(wa.buffer)?N.createStream(34962,wa.buffer):
N.getBuffer(wa.buffer),Ia="type"in wa?ia[wa.type]:Ca.dtype,pa=!!wa.normalized,oa=wa.size|0,Fb=wa.offset|0,lb=wa.stride|0,Ba=wa.divisor|0);Kc=y.buffer;y.buffer=Ca;Lb=y.divisor;y.divisor=Ba;Gb=y.normalized;y.normalized=pa;rc=y.offset;y.offset=Fb;Mb=y.size;y.size=oa;jb=y.state;y.state=ta;Eb=y.stride;y.stride=lb;Cb=y.type;y.type=Ia;yb=y.w;y.w=Ja;gb=y.x;y.x=Wa;Zb=y.y;y.y=ib;Nb=y.z;y.z=Xa;(rb=c.uv)&&("object"===typeof rb||"function"===typeof rb)&&(da(rb)||N.getBuffer(rb)||N.getBuffer(rb.buffer)||da(rb.buffer)||
"constant"in rb&&("number"===typeof rb.constant||L(rb.constant)))||d.commandRaise(G,f);Sa=!1;Sb=null;sb=0;ic=!1;qb=hb=0;Ha=1;tb=0;Ka=5126;kb=Ma=eb=db=0;da(rb)?(Sa=!0,Sb=N.createStream(34962,rb),Ka=Sb.dtype):(Sb=N.getBuffer(rb))?Ka=Sb.dtype:"constant"in rb?(Ha=2,"number"===typeof rb.constant?(eb=rb.constant,Ma=kb=db=0):(eb=0<rb.constant.length?rb.constant[0]:0,Ma=1<rb.constant.length?rb.constant[1]:0,kb=2<rb.constant.length?rb.constant[2]:0,db=3<rb.constant.length?rb.constant[3]:0)):(Sb=da(rb.buffer)?
N.createStream(34962,rb.buffer):N.getBuffer(rb.buffer),Ka="type"in rb?ia[rb.type]:Sb.dtype,ic=!!rb.normalized,qb=rb.size|0,hb=rb.offset|0,tb=rb.stride|0,sb=rb.divisor|0);Ya=x.buffer;x.buffer=Sb;vb=x.divisor;x.divisor=sb;ub=x.normalized;x.normalized=ic;Ra=x.offset;x.offset=hb;Dc=x.size;x.size=qb;Va=x.state;x.state=Ha;Hb=x.stride;x.stride=tb;Db=x.type;x.type=Ka;La=x.w;x.w=db;zd=x.x;x.x=eb;$a=x.y;x.y=Ma;Ib=x.z;x.z=kb;Jb=ma.vert;ma.vert=2;mb=ma.frag;ma.frag=1;Q.dirty=!0;b(O,c,a);O.view=e;X.cull_enable=
g;X.cull_face=h;p&&(r.cpuTime+=performance.now()-m);q&&ra.destroyStream(B);R.elements=z;R.offset=K;R.count=A;R.primitive=I;ga[5]=W;ga[3]=sa;ga[4]=J;ca&&N.destroyStream(aa);D.buffer=T;D.divisor=U;D.normalized=ja;D.offset=V;D.size=ba;D.state=Ua;D.stride=ea;D.type=ya;D.w=na;D.x=Aa;D.y=ka;D.z=Da;la&&N.destroyStream(Ca);y.buffer=Kc;y.divisor=Lb;y.normalized=Gb;y.offset=rc;y.size=Mb;y.state=jb;y.stride=Eb;y.type=Cb;y.w=yb;y.x=gb;y.y=Zb;y.z=Nb;Sa&&N.destroyStream(Sb);x.buffer=Ya;x.divisor=vb;x.normalized=
ub;x.offset=Ra;x.size=Dc;x.state=Va;x.stride=Hb;x.type=Db;x.w=La;x.x=zd;x.y=$a;x.z=Ib;ma.vert=Jb;ma.frag=mb;Q.dirty=!0},batch:function(c,b){var a,e,l,g,k,h,n;a=O.view;e=I.call(this,O,c,0);O.view=e;l=pa.next;l!==pa.cur&&(l?K.bindFramebuffer(36160,l.framebuffer):K.bindFramebuffer(36160,null),pa.cur=l);if(Q.dirty){var p,u,m,w,v,B,y,D,q,t,G,Ea,x,R,ga,Y,ob,ma,ta,Ed,pd,bd,td,Oc,rd,Hc,gd,Sc,md,Tb,yc,uc,zb,xc,Bb,Lc,lc,Ic,hd,cd,Ec,ec,Jc,oc,qc,mc,pc,pb,Pc,Yb,fb,Kb;p=X.dither;p!==Q.dither&&(p?K.enable(3024):
K.disable(3024),Q.dither=p);u=X.blend_enable;u!==Q.blend_enable&&(u?K.enable(3042):K.disable(3042),Q.blend_enable=u);m=va[0];w=va[1];v=va[2];B=va[3];if(m!==ca[0]||w!==ca[1]||v!==ca[2]||B!==ca[3])K.blendColor(m,w,v,B),ca[0]=m,ca[1]=w,ca[2]=v,ca[3]=B;y=Da[0];D=Da[1];if(y!==ja[0]||D!==ja[1])K.blendEquationSeparate(y,D),ja[0]=y,ja[1]=D;q=na[0];t=na[1];G=na[2];Ea=na[3];if(q!==Aa[0]||t!==Aa[1]||G!==Aa[2]||Ea!==Aa[3])K.blendFuncSeparate(q,t,G,Ea),Aa[0]=q,Aa[1]=t,Aa[2]=G,Aa[3]=Ea;x=X.depth_enable;x!==Q.depth_enable&&
(x?K.enable(2929):K.disable(2929),Q.depth_enable=x);R=X.depth_func;R!==Q.depth_func&&(K.depthFunc(R),Q.depth_func=R);ga=Xb[0];Y=Xb[1];if(ga!==Ua[0]||Y!==Ua[1])K.depthRange(ga,Y),Ua[0]=ga,Ua[1]=Y;ob=X.depth_mask;ob!==Q.depth_mask&&(K.depthMask(ob),Q.depth_mask=ob);ma=Pa[0];ta=Pa[1];Ed=Pa[2];pd=Pa[3];if(ma!==za[0]||ta!==za[1]||Ed!==za[2]||pd!==za[3])K.colorMask(ma,ta,Ed,pd),za[0]=ma,za[1]=ta,za[2]=Ed,za[3]=pd;bd=X.frontFace;bd!==Q.frontFace&&(K.frontFace(bd),Q.frontFace=bd);td=X.lineWidth;td!==Q.lineWidth&&
(K.lineWidth(td),Q.lineWidth=td);Oc=X.polygonOffset_enable;Oc!==Q.polygonOffset_enable&&(Oc?K.enable(32823):K.disable(32823),Q.polygonOffset_enable=Oc);rd=ha[0];Hc=ha[1];if(rd!==fa[0]||Hc!==fa[1])K.polygonOffset(rd,Hc),fa[0]=rd,fa[1]=Hc;gd=X.sample_alpha;gd!==Q.sample_alpha&&(gd?K.enable(32926):K.disable(32926),Q.sample_alpha=gd);Sc=X.sample_enable;Sc!==Q.sample_enable&&(Sc?K.enable(32928):K.disable(32928),Q.sample_enable=Sc);md=sa[0];Tb=sa[1];if(md!==ua[0]||Tb!==ua[1])K.sampleCoverage(md,Tb),ua[0]=
md,ua[1]=Tb;yc=X.stencil_enable;yc!==Q.stencil_enable&&(yc?K.enable(2960):K.disable(2960),Q.stencil_enable=yc);uc=X.stencil_mask;uc!==Q.stencil_mask&&(K.stencilMask(uc),Q.stencil_mask=uc);zb=Fb[0];xc=Fb[1];Bb=Fb[2];if(zb!==aa[0]||xc!==aa[1]||Bb!==aa[2])K.stencilFunc(zb,xc,Bb),aa[0]=zb,aa[1]=xc,aa[2]=Bb;Lc=Fa[0];lc=Fa[1];Ic=Fa[2];hd=Fa[3];if(Lc!==qa[0]||lc!==qa[1]||Ic!==qa[2]||hd!==qa[3])K.stencilOpSeparate(Lc,lc,Ic,hd),qa[0]=Lc,qa[1]=lc,qa[2]=Ic,qa[3]=hd;cd=W[0];Ec=W[1];ec=W[2];Jc=W[3];if(cd!==xa[0]||
Ec!==xa[1]||ec!==xa[2]||Jc!==xa[3])K.stencilOpSeparate(cd,Ec,ec,Jc),xa[0]=cd,xa[1]=Ec,xa[2]=ec,xa[3]=Jc;oc=X.scissor_enable;oc!==Q.scissor_enable&&(oc?K.enable(3089):K.disable(3089),Q.scissor_enable=oc);qc=Ca[0];mc=Ca[1];pc=Ca[2];pb=Ca[3];if(qc!==lb[0]||mc!==lb[1]||pc!==lb[2]||pb!==lb[3])K.scissor(qc,mc,pc,pb),lb[0]=qc,lb[1]=mc,lb[2]=pc,lb[3]=pb;Pc=ya[0];Yb=ya[1];fb=ya[2];Kb=ya[3];if(Pc!==wa[0]||Yb!==wa[1]||fb!==wa[2]||Kb!==wa[3])K.viewport(Pc,Yb,fb,Kb),wa[0]=Pc,wa[1]=Yb,wa[2]=fb,wa[3]=Kb}K.enable(2884);
Q.cull_enable=!0;K.cullFace(1029);Q.cull_face=1029;if(g=Q.profile)k=performance.now(),r.count+=b;K.useProgram(S.program);var Wa,ib;Ba.setVAO(null);Wa=J.call(this,O,n,h);L(Wa)&&16===Wa.length||d.commandRaise(F,f);K.uniformMatrix4fv(U.location,!1,Array.isArray(Wa)||Wa instanceof Float32Array?Wa:(Ia[0]=Wa[0],Ia[1]=Wa[1],Ia[2]=Wa[2],Ia[3]=Wa[3],Ia[4]=Wa[4],Ia[5]=Wa[5],Ia[6]=Wa[6],Ia[7]=Wa[7],Ia[8]=Wa[8],Ia[9]=Wa[9],Ia[10]=Wa[10],Ia[11]=Wa[11],Ia[12]=Wa[12],Ia[13]=Wa[13],Ia[14]=Wa[14],Ia[15]=Wa[15],Ia));
ib=O.view;L(ib)&&16===ib.length||d.commandRaise(E,f);K.uniformMatrix4fv(T.location,!1,Array.isArray(ib)||ib instanceof Float32Array?ib:(Ja[0]=ib[0],Ja[1]=ib[1],Ja[2]=ib[2],Ja[3]=ib[3],Ja[4]=ib[4],Ja[5]=ib[5],Ja[6]=ib[6],Ja[7]=ib[7],Ja[8]=ib[8],Ja[9]=ib[9],Ja[10]=ib[10],Ja[11]=ib[11],Ja[12]=ib[12],Ja[13]=ib[13],Ja[14]=ib[14],Ja[15]=ib[15],Ja));for(h=0;h<b;++h){n=c[h];var Xa,Kc,Lb,Gb,rc,Mb,jb,Eb,Cb,yb,gb,Zb,Nb,rb,Sa,Sb,sb,ic,hb,qb,Ha,tb,Ka,db,eb,Ma,kb,Ya,vb,ub,Ra,Dc,Va,Hb,Db,La,zd,$a,Ib,Jb,mb,Na,$b,
Qa,wb,xb,Ta,nb,fc,Bc,vc,cb,jc,Mc,Za;(Xa=n.position)&&("object"===typeof Xa||"function"===typeof Xa)&&(da(Xa)||N.getBuffer(Xa)||N.getBuffer(Xa.buffer)||da(Xa.buffer)||"constant"in Xa&&("number"===typeof Xa.constant||L(Xa.constant)))||d.commandRaise(H,f);Kc=!1;Lb=null;Gb=!1;Mb=rc=0;jb=1;Eb=0;Cb=5126;Nb=Zb=gb=yb=0;da(Xa)?(Kc=!0,Lb=N.createStream(34962,Xa),Cb=Lb.dtype):(Lb=N.getBuffer(Xa))?Cb=Lb.dtype:"constant"in Xa?(jb=2,"number"===typeof Xa.constant?(gb=Xa.constant,Zb=Nb=yb=0):(gb=0<Xa.constant.length?
Xa.constant[0]:0,Zb=1<Xa.constant.length?Xa.constant[1]:0,Nb=2<Xa.constant.length?Xa.constant[2]:0,yb=3<Xa.constant.length?Xa.constant[3]:0)):(Lb=da(Xa.buffer)?N.createStream(34962,Xa.buffer):N.getBuffer(Xa.buffer),Cb="type"in Xa?ia[Xa.type]:Lb.dtype,Gb=!!Xa.normalized,Mb=Xa.size|0,rc=Xa.offset|0,Eb=Xa.stride|0);rb=oa.location;Sa=P[rb];if(1===jb){if(Sa.buffer||K.enableVertexAttribArray(rb),Sb=Mb||3,Sa.type!==Cb||Sa.size!==Sb||Sa.buffer!==Lb||Sa.normalized!==Gb||Sa.offset!==rc||Sa.stride!==Eb)K.bindBuffer(34962,
Lb.buffer),K.vertexAttribPointer(rb,Sb,Cb,Gb,Eb,rc),Sa.type=Cb,Sa.size=Sb,Sa.buffer=Lb,Sa.normalized=Gb,Sa.offset=rc,Sa.stride=Eb}else if(Sa.buffer&&(K.disableVertexAttribArray(rb),Sa.buffer=null),Sa.x!==gb||Sa.y!==Zb||Sa.z!==Nb||Sa.w!==yb)K.vertexAttrib4f(rb,gb,Zb,Nb,yb),Sa.x=gb,Sa.y=Zb,Sa.z=Nb,Sa.w=yb;(sb=n.normal)&&("object"===typeof sb||"function"===typeof sb)&&(da(sb)||N.getBuffer(sb)||N.getBuffer(sb.buffer)||da(sb.buffer)||"constant"in sb&&("number"===typeof sb.constant||L(sb.constant)))||d.commandRaise(A,
f);ic=!1;hb=null;qb=!1;tb=Ha=0;Ka=1;db=0;eb=5126;vb=Ya=kb=Ma=0;da(sb)?(ic=!0,hb=N.createStream(34962,sb),eb=hb.dtype):(hb=N.getBuffer(sb))?eb=hb.dtype:"constant"in sb?(Ka=2,"number"===typeof sb.constant?(kb=sb.constant,Ya=vb=Ma=0):(kb=0<sb.constant.length?sb.constant[0]:0,Ya=1<sb.constant.length?sb.constant[1]:0,vb=2<sb.constant.length?sb.constant[2]:0,Ma=3<sb.constant.length?sb.constant[3]:0)):(hb=da(sb.buffer)?N.createStream(34962,sb.buffer):N.getBuffer(sb.buffer),eb="type"in sb?ia[sb.type]:hb.dtype,
qb=!!sb.normalized,tb=sb.size|0,Ha=sb.offset|0,db=sb.stride|0);ub=la.location;Ra=P[ub];if(1===Ka){if(Ra.buffer||K.enableVertexAttribArray(ub),Dc=tb||3,Ra.type!==eb||Ra.size!==Dc||Ra.buffer!==hb||Ra.normalized!==qb||Ra.offset!==Ha||Ra.stride!==db)K.bindBuffer(34962,hb.buffer),K.vertexAttribPointer(ub,Dc,eb,qb,db,Ha),Ra.type=eb,Ra.size=Dc,Ra.buffer=hb,Ra.normalized=qb,Ra.offset=Ha,Ra.stride=db}else if(Ra.buffer&&(K.disableVertexAttribArray(ub),Ra.buffer=null),Ra.x!==kb||Ra.y!==Ya||Ra.z!==vb||Ra.w!==
Ma)K.vertexAttrib4f(ub,kb,Ya,vb,Ma),Ra.x=kb,Ra.y=Ya,Ra.z=vb,Ra.w=Ma;(Va=n.uv)&&("object"===typeof Va||"function"===typeof Va)&&(da(Va)||N.getBuffer(Va)||N.getBuffer(Va.buffer)||da(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||L(Va.constant)))||d.commandRaise(ka,f);Hb=!1;Db=null;La=!1;$a=zd=0;Ib=1;Jb=0;mb=5126;wb=Qa=$b=Na=0;da(Va)?(Hb=!0,Db=N.createStream(34962,Va),mb=Db.dtype):(Db=N.getBuffer(Va))?mb=Db.dtype:"constant"in Va?(Ib=2,"number"===typeof Va.constant?($b=Va.constant,Qa=wb=
Na=0):($b=0<Va.constant.length?Va.constant[0]:0,Qa=1<Va.constant.length?Va.constant[1]:0,wb=2<Va.constant.length?Va.constant[2]:0,Na=3<Va.constant.length?Va.constant[3]:0)):(Db=da(Va.buffer)?N.createStream(34962,Va.buffer):N.getBuffer(Va.buffer),mb="type"in Va?ia[Va.type]:Db.dtype,La=!!Va.normalized,$a=Va.size|0,zd=Va.offset|0,Jb=Va.stride|0);xb=V.location;Ta=P[xb];if(1===Ib){if(Ta.buffer||K.enableVertexAttribArray(xb),nb=$a||2,Ta.type!==mb||Ta.size!==nb||Ta.buffer!==Db||Ta.normalized!==La||Ta.offset!==
zd||Ta.stride!==Jb)K.bindBuffer(34962,Db.buffer),K.vertexAttribPointer(xb,nb,mb,La,Jb,zd),Ta.type=mb,Ta.size=nb,Ta.buffer=Db,Ta.normalized=La,Ta.offset=zd,Ta.stride=Jb}else if(Ta.buffer&&(K.disableVertexAttribArray(xb),Ta.buffer=null),Ta.x!==$b||Ta.y!==Qa||Ta.z!==wb||Ta.w!==Na)K.vertexAttrib4f(xb,$b,Qa,wb,Na),Ta.x=$b,Ta.y=Qa,Ta.z=wb,Ta.w=Na;(fc=n.atlas)&&"framebuffer"===fc._reglType&&(fc=fc.color[0]);"function"===typeof fc&&"texture2d"===fc._reglType||d.commandRaise(ea,f);Bc=fc._texture;K.uniform1i(M.location,
Bc.bind());vc=n.elements;cb=null;(jc=da(vc))?cb=ra.createStream(vc):(cb=ra.getElements(vc),vc&&!cb&&d.commandRaise(z,f));cb&&K.bindBuffer(34963,cb.buffer.buffer);Mc=cb?cb.primType:4;Za=cb?cb.vertCount:-1;0<=Za||d.commandRaise(ba,f);Za&&(cb?K.drawElements(Mc,Za,cb.type,0<<(cb.type-5121>>1)):K.drawArrays(Mc,0,Za),Kc&&N.destroyStream(Lb),ic&&N.destroyStream(hb),Hb&&N.destroyStream(Db),Bc.unbind(),jc&&ra.destroyStream(cb))}Q.dirty=!0;Ba.setVAO(null);O.view=a;g&&(r.cpuTime+=performance.now()-k)}}},"$7,color,position":function(a,
d,f,r,q,m,b,g,c,h){var B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R;B=a.attributes;v=a.context;e=a.current;l=a.draw;p=a.elements;n=a.framebuffer;k=a.gl;u=a.next;w=a.shader;D=a.uniforms;t=a.vao;y=u.blend_color;G=e.blend_color;x=u.blend_equation;I=e.blend_equation;S=u.blend_func;H=e.blend_func;A=u.colorMask;ka=e.colorMask;J=u.depth_range;F=e.depth_range;E=u.polygonOffset_offset;ea=e.polygonOffset_offset;z=u.sample_coverage;ba=e.sample_coverage;M=u.scissor_box;la=e.scissor_box;
oa=u.stencil_func;U=e.stencil_func;V=u.stencil_opBack;T=e.stencil_opBack;P=u.stencil_opFront;N=e.stencil_opFront;O=u.viewport;Q=e.viewport;R=[1,0,0,1];return{draw:function(b){var a,d,g,f;b=n.next;b!==n.cur&&(b?k.bindFramebuffer(36160,b.framebuffer):k.bindFramebuffer(36160,null),n.cur=b);if(e.dirty){b=u.dither;b!==e.dither&&(b?k.enable(3024):k.disable(3024),e.dither=b);b=u.blend_enable;b!==e.blend_enable&&(b?k.enable(3042):k.disable(3042),e.blend_enable=b);b=y[0];d=y[1];g=y[2];f=y[3];if(b!==G[0]||
d!==G[1]||g!==G[2]||f!==G[3])k.blendColor(b,d,g,f),G[0]=b,G[1]=d,G[2]=g,G[3]=f;b=x[0];d=x[1];if(b!==I[0]||d!==I[1])k.blendEquationSeparate(b,d),I[0]=b,I[1]=d;b=S[0];d=S[1];g=S[2];f=S[3];if(b!==H[0]||d!==H[1]||g!==H[2]||f!==H[3])k.blendFuncSeparate(b,d,g,f),H[0]=b,H[1]=d,H[2]=g,H[3]=f;b=u.depth_enable;b!==e.depth_enable&&(b?k.enable(2929):k.disable(2929),e.depth_enable=b);b=u.depth_func;b!==e.depth_func&&(k.depthFunc(b),e.depth_func=b);b=J[0];d=J[1];if(b!==F[0]||d!==F[1])k.depthRange(b,d),F[0]=b,F[1]=
d;b=u.depth_mask;b!==e.depth_mask&&(k.depthMask(b),e.depth_mask=b);b=A[0];d=A[1];g=A[2];f=A[3];if(b!==ka[0]||d!==ka[1]||g!==ka[2]||f!==ka[3])k.colorMask(b,d,g,f),ka[0]=b,ka[1]=d,ka[2]=g,ka[3]=f;b=u.cull_enable;b!==e.cull_enable&&(b?k.enable(2884):k.disable(2884),e.cull_enable=b);b=u.cull_face;b!==e.cull_face&&(k.cullFace(b),e.cull_face=b);b=u.frontFace;b!==e.frontFace&&(k.frontFace(b),e.frontFace=b);b=u.lineWidth;b!==e.lineWidth&&(k.lineWidth(b),e.lineWidth=b);b=u.polygonOffset_enable;b!==e.polygonOffset_enable&&
(b?k.enable(32823):k.disable(32823),e.polygonOffset_enable=b);b=E[0];d=E[1];if(b!==ea[0]||d!==ea[1])k.polygonOffset(b,d),ea[0]=b,ea[1]=d;b=u.sample_alpha;b!==e.sample_alpha&&(b?k.enable(32926):k.disable(32926),e.sample_alpha=b);b=u.sample_enable;b!==e.sample_enable&&(b?k.enable(32928):k.disable(32928),e.sample_enable=b);b=z[0];d=z[1];if(b!==ba[0]||d!==ba[1])k.sampleCoverage(b,d),ba[0]=b,ba[1]=d;b=u.stencil_enable;b!==e.stencil_enable&&(b?k.enable(2960):k.disable(2960),e.stencil_enable=b);b=u.stencil_mask;
b!==e.stencil_mask&&(k.stencilMask(b),e.stencil_mask=b);b=oa[0];d=oa[1];g=oa[2];if(b!==U[0]||d!==U[1]||g!==U[2])k.stencilFunc(b,d,g),U[0]=b,U[1]=d,U[2]=g;b=P[0];d=P[1];g=P[2];f=P[3];if(b!==N[0]||d!==N[1]||g!==N[2]||f!==N[3])k.stencilOpSeparate(b,d,g,f),N[0]=b,N[1]=d,N[2]=g,N[3]=f;b=V[0];d=V[1];g=V[2];f=V[3];if(b!==T[0]||d!==T[1]||g!==T[2]||f!==T[3])k.stencilOpSeparate(b,d,g,f),T[0]=b,T[1]=d,T[2]=g,T[3]=f;b=u.scissor_enable;b!==e.scissor_enable&&(b?k.enable(3089):k.disable(3089),e.scissor_enable=b);
b=M[0];d=M[1];g=M[2];f=M[3];if(b!==la[0]||d!==la[1]||g!==la[2]||f!==la[3])k.scissor(b,d,g,f),la[0]=b,la[1]=d,la[2]=g,la[3]=f;b=O[0];d=O[1];g=O[2];f=O[3];if(b!==Q[0]||d!==Q[1]||g!==Q[2]||f!==Q[3])k.viewport(b,d,g,f),Q[0]=b,Q[1]=d,Q[2]=g,Q[3]=f;e.dirty=!1}if(b=e.profile)a=performance.now(),r.count++;k.useProgram(q.program);t.setVAO(null);d=h.location;g=B[d];g.buffer||k.enableVertexAttribArray(d);if(g.type!==m.dtype||2!==g.size||g.buffer!==m||!1!==g.normalized||0!==g.offset||0!==g.stride)k.bindBuffer(34962,
m.buffer),k.vertexAttribPointer(d,2,m.dtype,!1,0,0),g.type=m.dtype,g.size=2,g.buffer=m,g.normalized=!1,g.offset=0,g.stride=0;k.uniform4f(c.location,1,0,0,1);(d=l.elements)?k.bindBuffer(34963,d.buffer.buffer):t.currentVAO&&(d=p.getElements(t.currentVAO.elements))&&k.bindBuffer(34963,d.buffer.buffer);g=l.primitive;f=l.offset;d?k.drawElements(g,3,d.type,f<<(d.type-5121>>1)):k.drawArrays(g,f,3);t.setVAO(null);b&&(r.cpuTime+=performance.now()-a)},scope:function(c,a,d){var g,k,h,n,p,f,u,C,B,y,q,z,t,G,A,
x,ha,fa;if(g=e.profile)k=performance.now(),r.count++;h=l.count;l.count=3;n=D[3];D[3]=R;p=b.buffer;b.buffer=m;f=b.divisor;b.divisor=0;u=b.normalized;b.normalized=!1;C=b.offset;b.offset=0;B=b.size;b.size=0;y=b.state;b.state=1;q=b.stride;b.stride=0;z=b.type;b.type=m.dtype;t=b.w;b.w=0;G=b.x;b.x=0;A=b.y;b.y=0;x=b.z;b.z=0;ha=w.vert;w.vert=2;fa=w.frag;w.frag=1;a(v,c,d);g&&(r.cpuTime+=performance.now()-k);l.count=h;D[3]=n;b.buffer=p;b.divisor=f;b.normalized=u;b.offset=C;b.size=B;b.state=y;b.stride=q;b.type=
z;b.w=t;b.x=G;b.y=A;b.z=x;w.vert=ha;w.frag=fa},batch:function(b,a){var d,f,w;d=n.next;d!==n.cur&&(d?k.bindFramebuffer(36160,d.framebuffer):k.bindFramebuffer(36160,null),n.cur=d);if(e.dirty){var v,C;d=u.dither;d!==e.dither&&(d?k.enable(3024):k.disable(3024),e.dither=d);d=u.blend_enable;d!==e.blend_enable&&(d?k.enable(3042):k.disable(3042),e.blend_enable=d);d=y[0];w=y[1];v=y[2];C=y[3];if(d!==G[0]||w!==G[1]||v!==G[2]||C!==G[3])k.blendColor(d,w,v,C),G[0]=d,G[1]=w,G[2]=v,G[3]=C;d=x[0];w=x[1];if(d!==I[0]||
w!==I[1])k.blendEquationSeparate(d,w),I[0]=d,I[1]=w;d=S[0];w=S[1];v=S[2];C=S[3];if(d!==H[0]||w!==H[1]||v!==H[2]||C!==H[3])k.blendFuncSeparate(d,w,v,C),H[0]=d,H[1]=w,H[2]=v,H[3]=C;d=u.depth_enable;d!==e.depth_enable&&(d?k.enable(2929):k.disable(2929),e.depth_enable=d);d=u.depth_func;d!==e.depth_func&&(k.depthFunc(d),e.depth_func=d);d=J[0];w=J[1];if(d!==F[0]||w!==F[1])k.depthRange(d,w),F[0]=d,F[1]=w;d=u.depth_mask;d!==e.depth_mask&&(k.depthMask(d),e.depth_mask=d);d=A[0];w=A[1];v=A[2];C=A[3];if(d!==
ka[0]||w!==ka[1]||v!==ka[2]||C!==ka[3])k.colorMask(d,w,v,C),ka[0]=d,ka[1]=w,ka[2]=v,ka[3]=C;d=u.cull_enable;d!==e.cull_enable&&(d?k.enable(2884):k.disable(2884),e.cull_enable=d);d=u.cull_face;d!==e.cull_face&&(k.cullFace(d),e.cull_face=d);d=u.frontFace;d!==e.frontFace&&(k.frontFace(d),e.frontFace=d);d=u.lineWidth;d!==e.lineWidth&&(k.lineWidth(d),e.lineWidth=d);d=u.polygonOffset_enable;d!==e.polygonOffset_enable&&(d?k.enable(32823):k.disable(32823),e.polygonOffset_enable=d);d=E[0];w=E[1];if(d!==ea[0]||
w!==ea[1])k.polygonOffset(d,w),ea[0]=d,ea[1]=w;d=u.sample_alpha;d!==e.sample_alpha&&(d?k.enable(32926):k.disable(32926),e.sample_alpha=d);d=u.sample_enable;d!==e.sample_enable&&(d?k.enable(32928):k.disable(32928),e.sample_enable=d);d=z[0];w=z[1];if(d!==ba[0]||w!==ba[1])k.sampleCoverage(d,w),ba[0]=d,ba[1]=w;d=u.stencil_enable;d!==e.stencil_enable&&(d?k.enable(2960):k.disable(2960),e.stencil_enable=d);d=u.stencil_mask;d!==e.stencil_mask&&(k.stencilMask(d),e.stencil_mask=d);d=oa[0];w=oa[1];v=oa[2];if(d!==
U[0]||w!==U[1]||v!==U[2])k.stencilFunc(d,w,v),U[0]=d,U[1]=w,U[2]=v;d=P[0];w=P[1];v=P[2];C=P[3];if(d!==N[0]||w!==N[1]||v!==N[2]||C!==N[3])k.stencilOpSeparate(d,w,v,C),N[0]=d,N[1]=w,N[2]=v,N[3]=C;d=V[0];w=V[1];v=V[2];C=V[3];if(d!==T[0]||w!==T[1]||v!==T[2]||C!==T[3])k.stencilOpSeparate(d,w,v,C),T[0]=d,T[1]=w,T[2]=v,T[3]=C;d=u.scissor_enable;d!==e.scissor_enable&&(d?k.enable(3089):k.disable(3089),e.scissor_enable=d);d=M[0];w=M[1];v=M[2];C=M[3];if(d!==la[0]||w!==la[1]||v!==la[2]||C!==la[3])k.scissor(d,
w,v,C),la[0]=d,la[1]=w,la[2]=v,la[3]=C;d=O[0];w=O[1];v=O[2];C=O[3];if(d!==Q[0]||w!==Q[1]||v!==Q[2]||C!==Q[3])k.viewport(d,w,v,C),Q[0]=d,Q[1]=w,Q[2]=v,Q[3]=C;e.dirty=!1}if(d=e.profile)f=performance.now(),r.count+=a;k.useProgram(g.program);var D;t.setVAO(null);w=h.location;v=B[w];v.buffer||k.enableVertexAttribArray(w);if(v.type!==m.dtype||2!==v.size||v.buffer!==m||!1!==v.normalized||0!==v.offset||0!==v.stride)k.bindBuffer(34962,m.buffer),k.vertexAttribPointer(w,2,m.dtype,!1,0,0),v.type=m.dtype,v.size=
2,v.buffer=m,v.normalized=!1,v.offset=0,v.stride=0;k.uniform4f(c.location,1,0,0,1);(v=l.elements)?k.bindBuffer(34963,v.buffer.buffer):t.currentVAO&&(v=p.getElements(t.currentVAO.elements))&&k.bindBuffer(34963,v.buffer.buffer);C=l.primitive;D=l.offset;for(w=0;w<a;++w)v?k.drawElements(C,3,v.type,D<<(v.type-5121>>1)):k.drawArrays(C,D,3);t.setVAO(null);d&&(r.cpuTime+=performance.now()-f)}}},"$19,angle,color,offset,position":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x){var I,S,H,A,ka,J,F,
E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na;I=a.attributes;S=a.context;H=a.current;A=a.draw;ka=a.elements;J=a.framebuffer;F=a.gl;E=a.isArrayLike;ea=a.next;z=a.shader;ba=a.uniforms;M=a.vao;la=ea.blend_color;oa=H.blend_color;U=ea.blend_equation;V=H.blend_equation;T=ea.blend_func;P=H.blend_func;N=ea.colorMask;O=H.colorMask;Q=ea.depth_range;R=H.depth_range;ra=ea.polygonOffset_offset;pa=H.polygonOffset_offset;K=ea.sample_coverage;L=H.sample_coverage;da=ea.scissor_box;X=H.scissor_box;
ma=ea.stencil_func;ga=H.stencil_func;Ba=ea.stencil_opBack;va=H.stencil_opBack;ca=ea.stencil_opFront;Da=H.stencil_opFront;ja=ea.viewport;na=H.viewport;return{draw:function(a){var e,l,k,n;e=J.next;e!==J.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),J.cur=e);if(H.dirty){var p;e=ea.dither;e!==H.dither&&(e?F.enable(3024):F.disable(3024),H.dither=e);e=ea.blend_enable;e!==H.blend_enable&&(e?F.enable(3042):F.disable(3042),H.blend_enable=e);e=la[0];k=la[1];n=la[2];p=la[3];if(e!==
oa[0]||k!==oa[1]||n!==oa[2]||p!==oa[3])F.blendColor(e,k,n,p),oa[0]=e,oa[1]=k,oa[2]=n,oa[3]=p;e=U[0];k=U[1];if(e!==V[0]||k!==V[1])F.blendEquationSeparate(e,k),V[0]=e,V[1]=k;e=T[0];k=T[1];n=T[2];p=T[3];if(e!==P[0]||k!==P[1]||n!==P[2]||p!==P[3])F.blendFuncSeparate(e,k,n,p),P[0]=e,P[1]=k,P[2]=n,P[3]=p;e=ea.depth_func;e!==H.depth_func&&(F.depthFunc(e),H.depth_func=e);e=Q[0];k=Q[1];if(e!==R[0]||k!==R[1])F.depthRange(e,k),R[0]=e,R[1]=k;e=ea.depth_mask;e!==H.depth_mask&&(F.depthMask(e),H.depth_mask=e);e=
N[0];k=N[1];n=N[2];p=N[3];if(e!==O[0]||k!==O[1]||n!==O[2]||p!==O[3])F.colorMask(e,k,n,p),O[0]=e,O[1]=k,O[2]=n,O[3]=p;e=ea.cull_enable;e!==H.cull_enable&&(e?F.enable(2884):F.disable(2884),H.cull_enable=e);e=ea.cull_face;e!==H.cull_face&&(F.cullFace(e),H.cull_face=e);e=ea.frontFace;e!==H.frontFace&&(F.frontFace(e),H.frontFace=e);e=ea.lineWidth;e!==H.lineWidth&&(F.lineWidth(e),H.lineWidth=e);e=ea.polygonOffset_enable;e!==H.polygonOffset_enable&&(e?F.enable(32823):F.disable(32823),H.polygonOffset_enable=
e);e=ra[0];k=ra[1];if(e!==pa[0]||k!==pa[1])F.polygonOffset(e,k),pa[0]=e,pa[1]=k;e=ea.sample_alpha;e!==H.sample_alpha&&(e?F.enable(32926):F.disable(32926),H.sample_alpha=e);e=ea.sample_enable;e!==H.sample_enable&&(e?F.enable(32928):F.disable(32928),H.sample_enable=e);e=K[0];k=K[1];if(e!==L[0]||k!==L[1])F.sampleCoverage(e,k),L[0]=e,L[1]=k;e=ea.stencil_enable;e!==H.stencil_enable&&(e?F.enable(2960):F.disable(2960),H.stencil_enable=e);e=ea.stencil_mask;e!==H.stencil_mask&&(F.stencilMask(e),H.stencil_mask=
e);e=ma[0];k=ma[1];n=ma[2];if(e!==ga[0]||k!==ga[1]||n!==ga[2])F.stencilFunc(e,k,n),ga[0]=e,ga[1]=k,ga[2]=n;e=ca[0];k=ca[1];n=ca[2];p=ca[3];if(e!==Da[0]||k!==Da[1]||n!==Da[2]||p!==Da[3])F.stencilOpSeparate(e,k,n,p),Da[0]=e,Da[1]=k,Da[2]=n,Da[3]=p;e=Ba[0];k=Ba[1];n=Ba[2];p=Ba[3];if(e!==va[0]||k!==va[1]||n!==va[2]||p!==va[3])F.stencilOpSeparate(e,k,n,p),va[0]=e,va[1]=k,va[2]=n,va[3]=p;e=ea.scissor_enable;e!==H.scissor_enable&&(e?F.enable(3089):F.disable(3089),H.scissor_enable=e);e=da[0];k=da[1];n=da[2];
p=da[3];if(e!==X[0]||k!==X[1]||n!==X[2]||p!==X[3])F.scissor(e,k,n,p),X[0]=e,X[1]=k,X[2]=n,X[3]=p;e=ja[0];k=ja[1];n=ja[2];p=ja[3];if(e!==na[0]||k!==na[1]||n!==na[2]||p!==na[3])F.viewport(e,k,n,p),na[0]=e,na[1]=k,na[2]=n,na[3]=p}F.disable(2929);H.depth_enable=!1;if(e=H.profile)l=performance.now(),r.count++;F.useProgram(q.program);M.setVAO(null);k=x.location;n=I[k];n.buffer||F.enableVertexAttribArray(k);if(n.type!==m.dtype||2!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||0!==n.stride)F.bindBuffer(34962,
m.buffer),F.vertexAttribPointer(k,2,m.dtype,!1,0,0),n.type=m.dtype,n.size=2,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;k=b.call(this,S,a,0);"number"!==typeof k&&d.commandRaise(g,f);F.uniform1f(t.location,k);k=a.offset;E(k)&&2===k.length||d.commandRaise(c,f);F.uniform2f(G.location,k[0],k[1]);a=h.call(this,S,a,0);E(a)&&4===a.length||d.commandRaise(B,f);F.uniform4f(y.location,a[0],a[1],a[2],a[3]);(a=A.elements)?F.bindBuffer(34963,a.buffer.buffer):M.currentVAO&&(a=ka.getElements(M.currentVAO.elements))&&
F.bindBuffer(34963,a.buffer.buffer);k=A.primitive;n=A.offset;a?F.drawElements(k,3,a.type,n<<(a.type-5121>>1)):F.drawArrays(k,n,3);H.dirty=!0;M.setVAO(null);e&&(r.cpuTime+=performance.now()-l)},scope:function(c,b,a){var d,k,g,h,n,p,f,u,w,C,B,y,D,q,t,G,x,I,Ea,E,F;d=ea.depth_enable;ea.depth_enable=!1;if(k=H.profile)g=performance.now(),r.count++;h=A.count;A.count=3;n=v.call(this,S,c,a);p=ba[3];ba[3]=n;f=e.call(this,S,c,a);n=ba[5];ba[5]=f;u=c.offset;f=ba[4];ba[4]=u;u=l.buffer;l.buffer=m;w=l.divisor;l.divisor=
0;C=l.normalized;l.normalized=!1;B=l.offset;l.offset=0;y=l.size;l.size=0;D=l.state;l.state=1;q=l.stride;l.stride=0;t=l.type;l.type=m.dtype;G=l.w;l.w=0;x=l.x;l.x=0;I=l.y;l.y=0;Ea=l.z;l.z=0;E=z.vert;z.vert=2;F=z.frag;z.frag=1;H.dirty=!0;b(S,c,a);ea.depth_enable=d;k&&(r.cpuTime+=performance.now()-g);A.count=h;ba[3]=p;ba[5]=n;ba[4]=f;l.buffer=u;l.divisor=w;l.normalized=C;l.offset=B;l.size=y;l.state=D;l.stride=q;l.type=t;l.w=G;l.x=x;l.y=I;l.z=Ea;z.vert=E;z.frag=F;H.dirty=!0},batch:function(c,b){var a,
e,l,g;a=J.next;a!==J.cur&&(a?F.bindFramebuffer(36160,a.framebuffer):F.bindFramebuffer(36160,null),J.cur=a);if(H.dirty){var h,v,B;a=ea.dither;a!==H.dither&&(a?F.enable(3024):F.disable(3024),H.dither=a);a=ea.blend_enable;a!==H.blend_enable&&(a?F.enable(3042):F.disable(3042),H.blend_enable=a);a=la[0];h=la[1];v=la[2];B=la[3];if(a!==oa[0]||h!==oa[1]||v!==oa[2]||B!==oa[3])F.blendColor(a,h,v,B),oa[0]=a,oa[1]=h,oa[2]=v,oa[3]=B;a=U[0];h=U[1];if(a!==V[0]||h!==V[1])F.blendEquationSeparate(a,h),V[0]=a,V[1]=h;
a=T[0];h=T[1];v=T[2];B=T[3];if(a!==P[0]||h!==P[1]||v!==P[2]||B!==P[3])F.blendFuncSeparate(a,h,v,B),P[0]=a,P[1]=h,P[2]=v,P[3]=B;a=ea.depth_func;a!==H.depth_func&&(F.depthFunc(a),H.depth_func=a);a=Q[0];h=Q[1];if(a!==R[0]||h!==R[1])F.depthRange(a,h),R[0]=a,R[1]=h;a=ea.depth_mask;a!==H.depth_mask&&(F.depthMask(a),H.depth_mask=a);a=N[0];h=N[1];v=N[2];B=N[3];if(a!==O[0]||h!==O[1]||v!==O[2]||B!==O[3])F.colorMask(a,h,v,B),O[0]=a,O[1]=h,O[2]=v,O[3]=B;a=ea.cull_enable;a!==H.cull_enable&&(a?F.enable(2884):F.disable(2884),
H.cull_enable=a);a=ea.cull_face;a!==H.cull_face&&(F.cullFace(a),H.cull_face=a);a=ea.frontFace;a!==H.frontFace&&(F.frontFace(a),H.frontFace=a);a=ea.lineWidth;a!==H.lineWidth&&(F.lineWidth(a),H.lineWidth=a);a=ea.polygonOffset_enable;a!==H.polygonOffset_enable&&(a?F.enable(32823):F.disable(32823),H.polygonOffset_enable=a);a=ra[0];h=ra[1];if(a!==pa[0]||h!==pa[1])F.polygonOffset(a,h),pa[0]=a,pa[1]=h;a=ea.sample_alpha;a!==H.sample_alpha&&(a?F.enable(32926):F.disable(32926),H.sample_alpha=a);a=ea.sample_enable;
a!==H.sample_enable&&(a?F.enable(32928):F.disable(32928),H.sample_enable=a);a=K[0];h=K[1];if(a!==L[0]||h!==L[1])F.sampleCoverage(a,h),L[0]=a,L[1]=h;a=ea.stencil_enable;a!==H.stencil_enable&&(a?F.enable(2960):F.disable(2960),H.stencil_enable=a);a=ea.stencil_mask;a!==H.stencil_mask&&(F.stencilMask(a),H.stencil_mask=a);a=ma[0];h=ma[1];v=ma[2];if(a!==ga[0]||h!==ga[1]||v!==ga[2])F.stencilFunc(a,h,v),ga[0]=a,ga[1]=h,ga[2]=v;a=ca[0];h=ca[1];v=ca[2];B=ca[3];if(a!==Da[0]||h!==Da[1]||v!==Da[2]||B!==Da[3])F.stencilOpSeparate(a,
h,v,B),Da[0]=a,Da[1]=h,Da[2]=v,Da[3]=B;a=Ba[0];h=Ba[1];v=Ba[2];B=Ba[3];if(a!==va[0]||h!==va[1]||v!==va[2]||B!==va[3])F.stencilOpSeparate(a,h,v,B),va[0]=a,va[1]=h,va[2]=v,va[3]=B;a=ea.scissor_enable;a!==H.scissor_enable&&(a?F.enable(3089):F.disable(3089),H.scissor_enable=a);a=da[0];h=da[1];v=da[2];B=da[3];if(a!==X[0]||h!==X[1]||v!==X[2]||B!==X[3])F.scissor(a,h,v,B),X[0]=a,X[1]=h,X[2]=v,X[3]=B;a=ja[0];h=ja[1];v=ja[2];B=ja[3];if(a!==na[0]||h!==na[1]||v!==na[2]||B!==na[3])F.viewport(a,h,v,B),na[0]=a,
na[1]=h,na[2]=v,na[3]=B}F.disable(2929);H.depth_enable=!1;if(a=H.profile)e=performance.now(),r.count+=b;F.useProgram(p.program);M.setVAO(null);h=x.location;v=I[h];v.buffer||F.enableVertexAttribArray(h);if(v.type!==m.dtype||2!==v.size||v.buffer!==m||!1!==v.normalized||0!==v.offset||0!==v.stride)F.bindBuffer(34962,m.buffer),F.vertexAttribPointer(h,2,m.dtype,!1,0,0),v.type=m.dtype,v.size=2,v.buffer=m,v.normalized=!1,v.offset=0,v.stride=0;l=n.call(this,S,g,l);"number"!==typeof l&&d.commandRaise(k,f);
F.uniform1f(t.location,l);(h=A.elements)?F.bindBuffer(34963,h.buffer.buffer):M.currentVAO&&(h=ka.getElements(M.currentVAO.elements))&&F.bindBuffer(34963,h.buffer.buffer);v=A.primitive;B=A.offset;for(l=0;l<b;++l){g=c[l];var q,z,ba,aa,W,xa,Fa,qa,ya;q=g.offset;E(q)&&2===q.length||d.commandRaise(u,f);z=q[0];q=q[1];l&&ba===z&&aa===q||(ba=z,aa=q,F.uniform2f(G.location,z,q));W=w.call(this,S,g,l);E(W)&&4===W.length||d.commandRaise(D,f);g=W[0];z=W[1];q=W[2];W=W[3];l&&xa===g&&Fa===z&&qa===q&&ya===W||(xa=g,
Fa=z,qa=q,ya=W,F.uniform4f(y.location,g,z,q,W));h?F.drawElements(v,3,h.type,B<<(h.type-5121>>1)):F.drawArrays(v,B,3)}H.dirty=!0;M.setVAO(null);a&&(r.cpuTime+=performance.now()-e)}}},"$23,model,position,projection,view":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A){var ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca;ka=a.attributes;J=a.context;F=a.current;E=a.draw;ea=a.framebuffer;z=a.gl;ba=a.isArrayLike;M=a.next;la=
a.shader;oa=a.uniforms;U=a.vao;V=M.blend_color;T=F.blend_color;P=M.blend_equation;N=F.blend_equation;O=M.blend_func;Q=F.blend_func;R=M.colorMask;ra=F.colorMask;pa=M.depth_range;K=F.depth_range;L=M.polygonOffset_offset;da=F.polygonOffset_offset;X=M.sample_coverage;ma=F.sample_coverage;ga=M.scissor_box;Ba=F.scissor_box;va=M.stencil_func;ca=F.stencil_func;Da=M.stencil_opBack;ja=F.stencil_opBack;na=M.stencil_opFront;Aa=F.stencil_opFront;Pa=M.viewport;za=F.viewport;Xb=new Float32Array([1,0,0,0,0,1,0,0,
0,0,1,0,0,0,0,1]);Ua=new Float32Array(16);ha=new Float32Array(16);fa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];sa=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);Ca=new Float32Array(16);return{draw:function(a){var e,l,k,n;e=ea.next;e!==ea.cur&&(e?z.bindFramebuffer(36160,e.framebuffer):z.bindFramebuffer(36160,null),ea.cur=e);if(F.dirty){var p;e=M.dither;e!==F.dither&&(e?z.enable(3024):z.disable(3024),F.dither=e);e=M.blend_enable;e!==F.blend_enable&&(e?z.enable(3042):z.disable(3042),
F.blend_enable=e);e=V[0];k=V[1];n=V[2];p=V[3];if(e!==T[0]||k!==T[1]||n!==T[2]||p!==T[3])z.blendColor(e,k,n,p),T[0]=e,T[1]=k,T[2]=n,T[3]=p;e=P[0];k=P[1];if(e!==N[0]||k!==N[1])z.blendEquationSeparate(e,k),N[0]=e,N[1]=k;e=O[0];k=O[1];n=O[2];p=O[3];if(e!==Q[0]||k!==Q[1]||n!==Q[2]||p!==Q[3])z.blendFuncSeparate(e,k,n,p),Q[0]=e,Q[1]=k,Q[2]=n,Q[3]=p;e=M.depth_enable;e!==F.depth_enable&&(e?z.enable(2929):z.disable(2929),F.depth_enable=e);e=M.depth_func;e!==F.depth_func&&(z.depthFunc(e),F.depth_func=e);e=pa[0];
k=pa[1];if(e!==K[0]||k!==K[1])z.depthRange(e,k),K[0]=e,K[1]=k;e=M.depth_mask;e!==F.depth_mask&&(z.depthMask(e),F.depth_mask=e);e=R[0];k=R[1];n=R[2];p=R[3];if(e!==ra[0]||k!==ra[1]||n!==ra[2]||p!==ra[3])z.colorMask(e,k,n,p),ra[0]=e,ra[1]=k,ra[2]=n,ra[3]=p;e=M.cull_enable;e!==F.cull_enable&&(e?z.enable(2884):z.disable(2884),F.cull_enable=e);e=M.cull_face;e!==F.cull_face&&(z.cullFace(e),F.cull_face=e);e=M.frontFace;e!==F.frontFace&&(z.frontFace(e),F.frontFace=e);e=M.lineWidth;e!==F.lineWidth&&(z.lineWidth(e),
F.lineWidth=e);e=M.polygonOffset_enable;e!==F.polygonOffset_enable&&(e?z.enable(32823):z.disable(32823),F.polygonOffset_enable=e);e=L[0];k=L[1];if(e!==da[0]||k!==da[1])z.polygonOffset(e,k),da[0]=e,da[1]=k;e=M.sample_alpha;e!==F.sample_alpha&&(e?z.enable(32926):z.disable(32926),F.sample_alpha=e);e=M.sample_enable;e!==F.sample_enable&&(e?z.enable(32928):z.disable(32928),F.sample_enable=e);e=X[0];k=X[1];if(e!==ma[0]||k!==ma[1])z.sampleCoverage(e,k),ma[0]=e,ma[1]=k;e=M.stencil_enable;e!==F.stencil_enable&&
(e?z.enable(2960):z.disable(2960),F.stencil_enable=e);e=M.stencil_mask;e!==F.stencil_mask&&(z.stencilMask(e),F.stencil_mask=e);e=va[0];k=va[1];n=va[2];if(e!==ca[0]||k!==ca[1]||n!==ca[2])z.stencilFunc(e,k,n),ca[0]=e,ca[1]=k,ca[2]=n;e=na[0];k=na[1];n=na[2];p=na[3];if(e!==Aa[0]||k!==Aa[1]||n!==Aa[2]||p!==Aa[3])z.stencilOpSeparate(e,k,n,p),Aa[0]=e,Aa[1]=k,Aa[2]=n,Aa[3]=p;e=Da[0];k=Da[1];n=Da[2];p=Da[3];if(e!==ja[0]||k!==ja[1]||n!==ja[2]||p!==ja[3])z.stencilOpSeparate(e,k,n,p),ja[0]=e,ja[1]=k,ja[2]=n,
ja[3]=p;e=M.scissor_enable;e!==F.scissor_enable&&(e?z.enable(3089):z.disable(3089),F.scissor_enable=e);e=ga[0];k=ga[1];n=ga[2];p=ga[3];if(e!==Ba[0]||k!==Ba[1]||n!==Ba[2]||p!==Ba[3])z.scissor(e,k,n,p),Ba[0]=e,Ba[1]=k,Ba[2]=n,Ba[3]=p;e=Pa[0];k=Pa[1];n=Pa[2];p=Pa[3];if(e!==za[0]||k!==za[1]||n!==za[2]||p!==za[3])z.viewport(e,k,n,p),za[0]=e,za[1]=k,za[2]=n,za[3]=p;F.dirty=!1}if(e=F.profile)l=performance.now(),r.count++;z.useProgram(q.program);U.setVAO(null);k=S.location;n=ka[k];n.buffer||z.enableVertexAttribArray(k);
if(n.type!==m.dtype||3!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||0!==n.stride)z.bindBuffer(34962,m.buffer),z.vertexAttribPointer(k,3,m.dtype,!1,0,0),n.type=m.dtype,n.size=3,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;z.uniformMatrix4fv(I.location,!1,Xb);k=b.call(this,J,a,0);ba(k)&&16===k.length||d.commandRaise(g,f);z.uniformMatrix4fv(A.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ua[0]=k[0],Ua[1]=k[1],Ua[2]=k[2],Ua[3]=k[3],Ua[4]=k[4],Ua[5]=k[5],Ua[6]=k[6],Ua[7]=k[7],
Ua[8]=k[8],Ua[9]=k[9],Ua[10]=k[10],Ua[11]=k[11],Ua[12]=k[12],Ua[13]=k[13],Ua[14]=k[14],Ua[15]=k[15],Ua));a=c.call(this,J,a,0);ba(a)&&16===a.length||d.commandRaise(h,f);z.uniformMatrix4fv(H.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(ha[0]=a[0],ha[1]=a[1],ha[2]=a[2],ha[3]=a[3],ha[4]=a[4],ha[5]=a[5],ha[6]=a[6],ha[7]=a[7],ha[8]=a[8],ha[9]=a[9],ha[10]=a[10],ha[11]=a[11],ha[12]=a[12],ha[13]=a[13],ha[14]=a[14],ha[15]=a[15],ha));B&&z.bindBuffer(34963,B.buffer.buffer);a=B.primType;k=B.vertCount-
0;0<=k||d.commandRaise(v,f);k&&(z.drawElements(a,k,B.type,0<<(B.type-5121>>1)),U.setVAO(null),e&&(r.cpuTime+=performance.now()-l))},scope:function(c,a,b){var g,h,u,w,v,B,q,y,D,z,t,G,A,x,I,H,ha,Ea,sa,ca,K,L,M;if(g=F.profile)h=performance.now(),r.count++;u=E.elements;E.elements=e;w=E.offset;E.offset=0;v=e.vertCount-0;0<=v||d.commandRaise(l,f);B=E.count;E.count=v;q=e.primType;v=E.primitive;E.primitive=q;q=oa[3];oa[3]=fa;y=p.call(this,J,c,b);D=oa[5];oa[5]=y;z=n.call(this,J,c,b);y=oa[4];oa[4]=z;z=k.buffer;
k.buffer=m;t=k.divisor;k.divisor=0;G=k.normalized;k.normalized=!1;A=k.offset;k.offset=0;x=k.size;k.size=0;I=k.state;k.state=1;H=k.stride;k.stride=0;ha=k.type;k.type=m.dtype;Ea=k.w;k.w=0;sa=k.x;k.x=0;ca=k.y;k.y=0;K=k.z;k.z=0;L=la.vert;la.vert=2;M=la.frag;la.frag=1;a(J,c,b);g&&(r.cpuTime+=performance.now()-h);E.elements=u;E.offset=w;E.count=B;E.primitive=v;oa[3]=q;oa[5]=D;oa[4]=y;k.buffer=z;k.divisor=t;k.normalized=G;k.offset=A;k.size=x;k.state=I;k.stride=H;k.type=ha;k.w=Ea;k.x=sa;k.y=ca;k.z=K;la.vert=
L;la.frag=M},batch:function(c,a){var b,e,l;b=ea.next;b!==ea.cur&&(b?z.bindFramebuffer(36160,b.framebuffer):z.bindFramebuffer(36160,null),ea.cur=b);if(F.dirty){var k,g,h;b=M.dither;b!==F.dither&&(b?z.enable(3024):z.disable(3024),F.dither=b);b=M.blend_enable;b!==F.blend_enable&&(b?z.enable(3042):z.disable(3042),F.blend_enable=b);b=V[0];k=V[1];g=V[2];h=V[3];if(b!==T[0]||k!==T[1]||g!==T[2]||h!==T[3])z.blendColor(b,k,g,h),T[0]=b,T[1]=k,T[2]=g,T[3]=h;b=P[0];k=P[1];if(b!==N[0]||k!==N[1])z.blendEquationSeparate(b,
k),N[0]=b,N[1]=k;b=O[0];k=O[1];g=O[2];h=O[3];if(b!==Q[0]||k!==Q[1]||g!==Q[2]||h!==Q[3])z.blendFuncSeparate(b,k,g,h),Q[0]=b,Q[1]=k,Q[2]=g,Q[3]=h;b=M.depth_enable;b!==F.depth_enable&&(b?z.enable(2929):z.disable(2929),F.depth_enable=b);b=M.depth_func;b!==F.depth_func&&(z.depthFunc(b),F.depth_func=b);b=pa[0];k=pa[1];if(b!==K[0]||k!==K[1])z.depthRange(b,k),K[0]=b,K[1]=k;b=M.depth_mask;b!==F.depth_mask&&(z.depthMask(b),F.depth_mask=b);b=R[0];k=R[1];g=R[2];h=R[3];if(b!==ra[0]||k!==ra[1]||g!==ra[2]||h!==
ra[3])z.colorMask(b,k,g,h),ra[0]=b,ra[1]=k,ra[2]=g,ra[3]=h;b=M.cull_enable;b!==F.cull_enable&&(b?z.enable(2884):z.disable(2884),F.cull_enable=b);b=M.cull_face;b!==F.cull_face&&(z.cullFace(b),F.cull_face=b);b=M.frontFace;b!==F.frontFace&&(z.frontFace(b),F.frontFace=b);b=M.lineWidth;b!==F.lineWidth&&(z.lineWidth(b),F.lineWidth=b);b=M.polygonOffset_enable;b!==F.polygonOffset_enable&&(b?z.enable(32823):z.disable(32823),F.polygonOffset_enable=b);b=L[0];k=L[1];if(b!==da[0]||k!==da[1])z.polygonOffset(b,
k),da[0]=b,da[1]=k;b=M.sample_alpha;b!==F.sample_alpha&&(b?z.enable(32926):z.disable(32926),F.sample_alpha=b);b=M.sample_enable;b!==F.sample_enable&&(b?z.enable(32928):z.disable(32928),F.sample_enable=b);b=X[0];k=X[1];if(b!==ma[0]||k!==ma[1])z.sampleCoverage(b,k),ma[0]=b,ma[1]=k;b=M.stencil_enable;b!==F.stencil_enable&&(b?z.enable(2960):z.disable(2960),F.stencil_enable=b);b=M.stencil_mask;b!==F.stencil_mask&&(z.stencilMask(b),F.stencil_mask=b);b=va[0];k=va[1];g=va[2];if(b!==ca[0]||k!==ca[1]||g!==
ca[2])z.stencilFunc(b,k,g),ca[0]=b,ca[1]=k,ca[2]=g;b=na[0];k=na[1];g=na[2];h=na[3];if(b!==Aa[0]||k!==Aa[1]||g!==Aa[2]||h!==Aa[3])z.stencilOpSeparate(b,k,g,h),Aa[0]=b,Aa[1]=k,Aa[2]=g,Aa[3]=h;b=Da[0];k=Da[1];g=Da[2];h=Da[3];if(b!==ja[0]||k!==ja[1]||g!==ja[2]||h!==ja[3])z.stencilOpSeparate(b,k,g,h),ja[0]=b,ja[1]=k,ja[2]=g,ja[3]=h;b=M.scissor_enable;b!==F.scissor_enable&&(b?z.enable(3089):z.disable(3089),F.scissor_enable=b);b=ga[0];k=ga[1];g=ga[2];h=ga[3];if(b!==Ba[0]||k!==Ba[1]||g!==Ba[2]||h!==Ba[3])z.scissor(b,
k,g,h),Ba[0]=b,Ba[1]=k,Ba[2]=g,Ba[3]=h;b=Pa[0];k=Pa[1];g=Pa[2];h=Pa[3];if(b!==za[0]||k!==za[1]||g!==za[2]||h!==za[3])z.viewport(b,k,g,h),za[0]=b,za[1]=k,za[2]=g,za[3]=h;F.dirty=!1}if(b=F.profile)e=performance.now(),r.count+=a;z.useProgram(u.program);U.setVAO(null);k=S.location;g=ka[k];g.buffer||z.enableVertexAttribArray(k);if(g.type!==m.dtype||3!==g.size||g.buffer!==m||!1!==g.normalized||0!==g.offset||0!==g.stride)z.bindBuffer(34962,m.buffer),z.vertexAttribPointer(k,3,m.dtype,!1,0,0),g.type=m.dtype,
g.size=3,g.buffer=m,g.normalized=!1,g.offset=0,g.stride=0;z.uniformMatrix4fv(I.location,!1,sa);k=w.call(this,J,void 0,l);ba(k)&&16===k.length||d.commandRaise(D,f);z.uniformMatrix4fv(A.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(ua[0]=k[0],ua[1]=k[1],ua[2]=k[2],ua[3]=k[3],ua[4]=k[4],ua[5]=k[5],ua[6]=k[6],ua[7]=k[7],ua[8]=k[8],ua[9]=k[9],ua[10]=k[10],ua[11]=k[11],ua[12]=k[12],ua[13]=k[13],ua[14]=k[14],ua[15]=k[15],ua));l=t.call(this,J,void 0,l);ba(l)&&16===l.length||d.commandRaise(y,
f);z.uniformMatrix4fv(H.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ca[0]=l[0],Ca[1]=l[1],Ca[2]=l[2],Ca[3]=l[3],Ca[4]=l[4],Ca[5]=l[5],Ca[6]=l[6],Ca[7]=l[7],Ca[8]=l[8],Ca[9]=l[9],Ca[10]=l[10],Ca[11]=l[11],Ca[12]=l[12],Ca[13]=l[13],Ca[14]=l[14],Ca[15]=l[15],Ca));G&&z.bindBuffer(34963,G.buffer.buffer);k=G.primType;g=G.vertCount-0;0<=g||d.commandRaise(x,f);for(l=0;l<a;++l)g&&z.drawElements(k,g,G.type,0<<(G.type-5121>>1));U.setVAO(null);b&&(r.cpuTime+=performance.now()-e)}}},$20:function(a,
d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t){var y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba;y=a.context;G=a.current;x=a.framebuffer;I=a.gl;S=a.next;H=a.shader;A=a.uniforms;ka=a.vao;J=S.blend_color;F=G.blend_color;E=S.blend_equation;ea=G.blend_equation;z=S.blend_func;ba=G.blend_func;M=S.colorMask;la=G.colorMask;oa=S.depth_range;U=G.depth_range;V=S.polygonOffset_offset;T=G.polygonOffset_offset;P=S.sample_coverage;N=G.sample_coverage;O=S.scissor_box;Q=G.scissor_box;R=
S.stencil_func;ra=G.stencil_func;pa=S.stencil_opBack;K=G.stencil_opBack;L=S.stencil_opFront;da=G.stencil_opFront;X=S.viewport;ma=G.viewport;ga={};Ba={};return{draw:function(a){var e,d,l,k,n,p,u,w,v,B,D,t,A;e=y.center;d=y.distance;l=y.eye;k=y.phi;n=y.projection;p=b.call(this,y,a,0);u=y.theta;w=y.up;v=y.view;y.center=q;y.distance=2.302585092994046;y.eye=m;y.phi=0;y.projection=p;y.theta=0;y.up=g;y.view=c;p=x.next;p!==x.cur&&(p?I.bindFramebuffer(36160,p.framebuffer):I.bindFramebuffer(36160,null),x.cur=
p);if(G.dirty){p=S.dither;p!==G.dither&&(p?I.enable(3024):I.disable(3024),G.dither=p);p=S.blend_enable;p!==G.blend_enable&&(p?I.enable(3042):I.disable(3042),G.blend_enable=p);p=J[0];D=J[1];t=J[2];A=J[3];if(p!==F[0]||D!==F[1]||t!==F[2]||A!==F[3])I.blendColor(p,D,t,A),F[0]=p,F[1]=D,F[2]=t,F[3]=A;p=E[0];D=E[1];if(p!==ea[0]||D!==ea[1])I.blendEquationSeparate(p,D),ea[0]=p,ea[1]=D;p=z[0];D=z[1];t=z[2];A=z[3];if(p!==ba[0]||D!==ba[1]||t!==ba[2]||A!==ba[3])I.blendFuncSeparate(p,D,t,A),ba[0]=p,ba[1]=D,ba[2]=
t,ba[3]=A;p=S.depth_enable;p!==G.depth_enable&&(p?I.enable(2929):I.disable(2929),G.depth_enable=p);p=S.depth_func;p!==G.depth_func&&(I.depthFunc(p),G.depth_func=p);p=oa[0];D=oa[1];if(p!==U[0]||D!==U[1])I.depthRange(p,D),U[0]=p,U[1]=D;p=S.depth_mask;p!==G.depth_mask&&(I.depthMask(p),G.depth_mask=p);p=M[0];D=M[1];t=M[2];A=M[3];if(p!==la[0]||D!==la[1]||t!==la[2]||A!==la[3])I.colorMask(p,D,t,A),la[0]=p,la[1]=D,la[2]=t,la[3]=A;p=S.cull_enable;p!==G.cull_enable&&(p?I.enable(2884):I.disable(2884),G.cull_enable=
p);p=S.cull_face;p!==G.cull_face&&(I.cullFace(p),G.cull_face=p);p=S.frontFace;p!==G.frontFace&&(I.frontFace(p),G.frontFace=p);p=S.lineWidth;p!==G.lineWidth&&(I.lineWidth(p),G.lineWidth=p);p=S.polygonOffset_enable;p!==G.polygonOffset_enable&&(p?I.enable(32823):I.disable(32823),G.polygonOffset_enable=p);p=V[0];D=V[1];if(p!==T[0]||D!==T[1])I.polygonOffset(p,D),T[0]=p,T[1]=D;p=S.sample_alpha;p!==G.sample_alpha&&(p?I.enable(32926):I.disable(32926),G.sample_alpha=p);p=S.sample_enable;p!==G.sample_enable&&
(p?I.enable(32928):I.disable(32928),G.sample_enable=p);p=P[0];D=P[1];if(p!==N[0]||D!==N[1])I.sampleCoverage(p,D),N[0]=p,N[1]=D;p=S.stencil_enable;p!==G.stencil_enable&&(p?I.enable(2960):I.disable(2960),G.stencil_enable=p);p=S.stencil_mask;p!==G.stencil_mask&&(I.stencilMask(p),G.stencil_mask=p);p=R[0];D=R[1];t=R[2];if(p!==ra[0]||D!==ra[1]||t!==ra[2])I.stencilFunc(p,D,t),ra[0]=p,ra[1]=D,ra[2]=t;p=L[0];D=L[1];t=L[2];A=L[3];if(p!==da[0]||D!==da[1]||t!==da[2]||A!==da[3])I.stencilOpSeparate(p,D,t,A),da[0]=
p,da[1]=D,da[2]=t,da[3]=A;p=pa[0];D=pa[1];t=pa[2];A=pa[3];if(p!==K[0]||D!==K[1]||t!==K[2]||A!==K[3])I.stencilOpSeparate(p,D,t,A),K[0]=p,K[1]=D,K[2]=t,K[3]=A;p=S.scissor_enable;p!==G.scissor_enable&&(p?I.enable(3089):I.disable(3089),G.scissor_enable=p);p=O[0];D=O[1];t=O[2];A=O[3];if(p!==Q[0]||D!==Q[1]||t!==Q[2]||A!==Q[3])I.scissor(p,D,t,A),Q[0]=p,Q[1]=D,Q[2]=t,Q[3]=A;p=X[0];D=X[1];t=X[2];A=X[3];if(p!==ma[0]||D!==ma[1]||t!==ma[2]||A!==ma[3])I.viewport(p,D,t,A),ma[0]=p,ma[1]=D,ma[2]=t,ma[3]=A;G.dirty=
!1}if(p=G.profile)B=performance.now(),r.count++;D=H.program(H.vert,H.frag,f);I.useProgram(D.program);ka.setVAO(null);t=D.id;(A=ga[t])||(A=ga[t]=h(D));A.call(this,a);ka.setVAO(null);y.center=e;y.distance=d;y.eye=l;y.phi=k;y.projection=n;y.theta=u;y.up=w;y.view=v;p&&(r.cpuTime+=performance.now()-B)},scope:function(c,b,a){var d,k,g,h,n,f,u,m,w,C,D,q,t,z,x,I,H,Ea,E;d=y.center;k=y.distance;g=y.eye;h=y.phi;n=y.projection;f=e.call(this,y,c,a);u=y.theta;m=y.up;w=y.view;y.center=B;y.distance=2.302585092994046;
y.eye=v;y.phi=0;y.projection=f;y.theta=0;y.up=l;y.view=p;if(f=G.profile)C=performance.now(),r.count++;D=y.center;q=A[1];A[1]=D;t=y.distance;D=A[2];A[2]=t;z=y.eye;t=A[3];A[3]=z;x=y.phi;z=A[4];A[4]=x;I=y.projection;x=A[5];A[5]=I;H=y.theta;I=A[6];A[6]=H;Ea=y.up;H=A[7];A[7]=Ea;Ea=y.view;E=A[8];A[8]=Ea;b(y,c,a);y.center=d;y.distance=k;y.eye=g;y.phi=h;y.projection=n;y.theta=u;y.up=m;y.view=w;f&&(r.cpuTime+=performance.now()-C);A[1]=q;A[2]=D;A[3]=t;A[4]=z;A[5]=x;A[6]=I;A[7]=H;A[8]=E},batch:function(c,b){var a,
e,d,l,g,h,p,m,v,B,q,A,ga;a=y.center;e=y.distance;d=y.eye;l=y.phi;g=y.projection;h=u.call(this,y,c,0);p=y.theta;m=y.up;v=y.view;y.center=n;y.distance=2.302585092994046;y.eye=k;y.phi=0;y.projection=h;y.theta=0;y.up=w;y.view=D;h=x.next;h!==x.cur&&(h?I.bindFramebuffer(36160,h.framebuffer):I.bindFramebuffer(36160,null),x.cur=h);if(G.dirty){h=S.dither;h!==G.dither&&(h?I.enable(3024):I.disable(3024),G.dither=h);h=S.blend_enable;h!==G.blend_enable&&(h?I.enable(3042):I.disable(3042),G.blend_enable=h);h=J[0];
q=J[1];A=J[2];ga=J[3];if(h!==F[0]||q!==F[1]||A!==F[2]||ga!==F[3])I.blendColor(h,q,A,ga),F[0]=h,F[1]=q,F[2]=A,F[3]=ga;h=E[0];q=E[1];if(h!==ea[0]||q!==ea[1])I.blendEquationSeparate(h,q),ea[0]=h,ea[1]=q;h=z[0];q=z[1];A=z[2];ga=z[3];if(h!==ba[0]||q!==ba[1]||A!==ba[2]||ga!==ba[3])I.blendFuncSeparate(h,q,A,ga),ba[0]=h,ba[1]=q,ba[2]=A,ba[3]=ga;h=S.depth_enable;h!==G.depth_enable&&(h?I.enable(2929):I.disable(2929),G.depth_enable=h);h=S.depth_func;h!==G.depth_func&&(I.depthFunc(h),G.depth_func=h);h=oa[0];
q=oa[1];if(h!==U[0]||q!==U[1])I.depthRange(h,q),U[0]=h,U[1]=q;h=S.depth_mask;h!==G.depth_mask&&(I.depthMask(h),G.depth_mask=h);h=M[0];q=M[1];A=M[2];ga=M[3];if(h!==la[0]||q!==la[1]||A!==la[2]||ga!==la[3])I.colorMask(h,q,A,ga),la[0]=h,la[1]=q,la[2]=A,la[3]=ga;h=S.cull_enable;h!==G.cull_enable&&(h?I.enable(2884):I.disable(2884),G.cull_enable=h);h=S.cull_face;h!==G.cull_face&&(I.cullFace(h),G.cull_face=h);h=S.frontFace;h!==G.frontFace&&(I.frontFace(h),G.frontFace=h);h=S.lineWidth;h!==G.lineWidth&&(I.lineWidth(h),
G.lineWidth=h);h=S.polygonOffset_enable;h!==G.polygonOffset_enable&&(h?I.enable(32823):I.disable(32823),G.polygonOffset_enable=h);h=V[0];q=V[1];if(h!==T[0]||q!==T[1])I.polygonOffset(h,q),T[0]=h,T[1]=q;h=S.sample_alpha;h!==G.sample_alpha&&(h?I.enable(32926):I.disable(32926),G.sample_alpha=h);h=S.sample_enable;h!==G.sample_enable&&(h?I.enable(32928):I.disable(32928),G.sample_enable=h);h=P[0];q=P[1];if(h!==N[0]||q!==N[1])I.sampleCoverage(h,q),N[0]=h,N[1]=q;h=S.stencil_enable;h!==G.stencil_enable&&(h?
I.enable(2960):I.disable(2960),G.stencil_enable=h);h=S.stencil_mask;h!==G.stencil_mask&&(I.stencilMask(h),G.stencil_mask=h);h=R[0];q=R[1];A=R[2];if(h!==ra[0]||q!==ra[1]||A!==ra[2])I.stencilFunc(h,q,A),ra[0]=h,ra[1]=q,ra[2]=A;h=L[0];q=L[1];A=L[2];ga=L[3];if(h!==da[0]||q!==da[1]||A!==da[2]||ga!==da[3])I.stencilOpSeparate(h,q,A,ga),da[0]=h,da[1]=q,da[2]=A,da[3]=ga;h=pa[0];q=pa[1];A=pa[2];ga=pa[3];if(h!==K[0]||q!==K[1]||A!==K[2]||ga!==K[3])I.stencilOpSeparate(h,q,A,ga),K[0]=h,K[1]=q,K[2]=A,K[3]=ga;h=
S.scissor_enable;h!==G.scissor_enable&&(h?I.enable(3089):I.disable(3089),G.scissor_enable=h);h=O[0];q=O[1];A=O[2];ga=O[3];if(h!==Q[0]||q!==Q[1]||A!==Q[2]||ga!==Q[3])I.scissor(h,q,A,ga),Q[0]=h,Q[1]=q,Q[2]=A,Q[3]=ga;h=X[0];q=X[1];A=X[2];ga=X[3];if(h!==ma[0]||q!==ma[1]||A!==ma[2]||ga!==ma[3])I.viewport(h,q,A,ga),ma[0]=h,ma[1]=q,ma[2]=A,ma[3]=ga;G.dirty=!1}if(h=G.profile)B=performance.now(),r.count+=b;q=H.program(H.vert,H.frag,f);I.useProgram(q.program);ka.setVAO(null);A=q.id;(ga=Ba[A])||(ga=Ba[A]=t(q));
ga.call(this,c,b);ka.setVAO(null);y.center=a;y.distance=e;y.eye=d;y.phi=l;y.projection=g;y.theta=p;y.up=m;y.view=v;h&&(r.cpuTime+=performance.now()-B)}}},"$27,position,projection,tex,uv,view":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea){var z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za,Xb,Ua,ha,fa,sa,ua,Ca,lb,Fb;z=a.attributes;ba=a.context;M=a.current;la=a.draw;oa=a.framebuffer;U=a.gl;V=a.isArrayLike;T=a.next;P=a.shader;N=a.uniforms;
O=a.vao;Q=T.blend_color;R=M.blend_color;ra=T.blend_equation;pa=M.blend_equation;K=T.blend_func;L=M.blend_func;da=T.colorMask;X=M.colorMask;ma=T.depth_range;ga=M.depth_range;Ba=T.polygonOffset_offset;va=M.polygonOffset_offset;ca=T.sample_coverage;Da=M.sample_coverage;ja=T.scissor_box;na=M.scissor_box;Aa=T.stencil_func;Pa=M.stencil_func;za=T.stencil_opBack;Xb=M.stencil_opBack;Ua=T.stencil_opFront;ha=M.stencil_opFront;fa=T.viewport;sa=M.viewport;ua=new Float32Array(16);Ca=new Float32Array(16);lb=new Float32Array(16);
Fb=new Float32Array(16);return{draw:function(a){var k,p,n,u;k=oa.next;k!==oa.cur&&(k?U.bindFramebuffer(36160,k.framebuffer):U.bindFramebuffer(36160,null),oa.cur=k);if(M.dirty){var w;k=T.dither;k!==M.dither&&(k?U.enable(3024):U.disable(3024),M.dither=k);k=T.blend_enable;k!==M.blend_enable&&(k?U.enable(3042):U.disable(3042),M.blend_enable=k);k=Q[0];n=Q[1];u=Q[2];w=Q[3];if(k!==R[0]||n!==R[1]||u!==R[2]||w!==R[3])U.blendColor(k,n,u,w),R[0]=k,R[1]=n,R[2]=u,R[3]=w;k=ra[0];n=ra[1];if(k!==pa[0]||n!==pa[1])U.blendEquationSeparate(k,
n),pa[0]=k,pa[1]=n;k=K[0];n=K[1];u=K[2];w=K[3];if(k!==L[0]||n!==L[1]||u!==L[2]||w!==L[3])U.blendFuncSeparate(k,n,u,w),L[0]=k,L[1]=n,L[2]=u,L[3]=w;k=T.depth_enable;k!==M.depth_enable&&(k?U.enable(2929):U.disable(2929),M.depth_enable=k);k=T.depth_func;k!==M.depth_func&&(U.depthFunc(k),M.depth_func=k);k=ma[0];n=ma[1];if(k!==ga[0]||n!==ga[1])U.depthRange(k,n),ga[0]=k,ga[1]=n;k=T.depth_mask;k!==M.depth_mask&&(U.depthMask(k),M.depth_mask=k);k=da[0];n=da[1];u=da[2];w=da[3];if(k!==X[0]||n!==X[1]||u!==X[2]||
w!==X[3])U.colorMask(k,n,u,w),X[0]=k,X[1]=n,X[2]=u,X[3]=w;k=T.cull_enable;k!==M.cull_enable&&(k?U.enable(2884):U.disable(2884),M.cull_enable=k);k=T.cull_face;k!==M.cull_face&&(U.cullFace(k),M.cull_face=k);k=T.frontFace;k!==M.frontFace&&(U.frontFace(k),M.frontFace=k);k=T.lineWidth;k!==M.lineWidth&&(U.lineWidth(k),M.lineWidth=k);k=T.polygonOffset_enable;k!==M.polygonOffset_enable&&(k?U.enable(32823):U.disable(32823),M.polygonOffset_enable=k);k=Ba[0];n=Ba[1];if(k!==va[0]||n!==va[1])U.polygonOffset(k,
n),va[0]=k,va[1]=n;k=T.sample_alpha;k!==M.sample_alpha&&(k?U.enable(32926):U.disable(32926),M.sample_alpha=k);k=T.sample_enable;k!==M.sample_enable&&(k?U.enable(32928):U.disable(32928),M.sample_enable=k);k=ca[0];n=ca[1];if(k!==Da[0]||n!==Da[1])U.sampleCoverage(k,n),Da[0]=k,Da[1]=n;k=T.stencil_enable;k!==M.stencil_enable&&(k?U.enable(2960):U.disable(2960),M.stencil_enable=k);k=T.stencil_mask;k!==M.stencil_mask&&(U.stencilMask(k),M.stencil_mask=k);k=Aa[0];n=Aa[1];u=Aa[2];if(k!==Pa[0]||n!==Pa[1]||u!==
Pa[2])U.stencilFunc(k,n,u),Pa[0]=k,Pa[1]=n,Pa[2]=u;k=Ua[0];n=Ua[1];u=Ua[2];w=Ua[3];if(k!==ha[0]||n!==ha[1]||u!==ha[2]||w!==ha[3])U.stencilOpSeparate(k,n,u,w),ha[0]=k,ha[1]=n,ha[2]=u,ha[3]=w;k=za[0];n=za[1];u=za[2];w=za[3];if(k!==Xb[0]||n!==Xb[1]||u!==Xb[2]||w!==Xb[3])U.stencilOpSeparate(k,n,u,w),Xb[0]=k,Xb[1]=n,Xb[2]=u,Xb[3]=w;k=T.scissor_enable;k!==M.scissor_enable&&(k?U.enable(3089):U.disable(3089),M.scissor_enable=k);k=ja[0];n=ja[1];u=ja[2];w=ja[3];if(k!==na[0]||n!==na[1]||u!==na[2]||w!==na[3])U.scissor(k,
n,u,w),na[0]=k,na[1]=n,na[2]=u,na[3]=w;k=fa[0];n=fa[1];u=fa[2];w=fa[3];if(k!==sa[0]||n!==sa[1]||u!==sa[2]||w!==sa[3])U.viewport(k,n,u,w),sa[0]=k,sa[1]=n,sa[2]=u,sa[3]=w;M.dirty=!1}if(k=M.profile)p=performance.now(),r.count++;U.useProgram(q.program);O.setVAO(null);n=ka.location;u=z[n];u.buffer||U.enableVertexAttribArray(n);if(u.type!==m.dtype||3!==u.size||u.buffer!==m||!1!==u.normalized||0!==u.offset||0!==u.stride)U.bindBuffer(34962,m.buffer),U.vertexAttribPointer(n,3,m.dtype,!1,0,0),u.type=m.dtype,
u.size=3,u.buffer=m,u.normalized=!1,u.offset=0,u.stride=0;n=E.location;u=z[n];u.buffer||U.enableVertexAttribArray(n);if(u.type!==b.dtype||2!==u.size||u.buffer!==b||!1!==u.normalized||0!==u.offset||0!==u.stride)U.bindBuffer(34962,b.buffer),U.vertexAttribPointer(n,2,b.dtype,!1,0,0),u.type=b.dtype,u.size=2,u.buffer=b,u.normalized=!1,u.offset=0,u.stride=0;n=g.call(this,ba,a,0);V(n)&&16===n.length||d.commandRaise(c,f);U.uniformMatrix4fv(J.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(ua[0]=
n[0],ua[1]=n[1],ua[2]=n[2],ua[3]=n[3],ua[4]=n[4],ua[5]=n[5],ua[6]=n[6],ua[7]=n[7],ua[8]=n[8],ua[9]=n[9],ua[10]=n[10],ua[11]=n[11],ua[12]=n[12],ua[13]=n[13],ua[14]=n[14],ua[15]=n[15],ua));n=h.call(this,ba,a,0);V(n)&&16===n.length||d.commandRaise(B,f);U.uniformMatrix4fv(ea.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ca[0]=n[0],Ca[1]=n[1],Ca[2]=n[2],Ca[3]=n[3],Ca[4]=n[4],Ca[5]=n[5],Ca[6]=n[6],Ca[7]=n[7],Ca[8]=n[8],Ca[9]=n[9],Ca[10]=n[10],Ca[11]=n[11],Ca[12]=n[12],Ca[13]=n[13],Ca[14]=n[14],
Ca[15]=n[15],Ca));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||d.commandRaise(v,f);a=a._texture;U.uniform1i(F.location,a.bind());e&&U.bindBuffer(34963,e.buffer.buffer);n=e.primType;u=e.vertCount-0;0<=u||d.commandRaise(l,f);u&&(U.drawElements(n,u,e.type,0<<(e.type-5121>>1)),O.setVAO(null),k&&(r.cpuTime+=performance.now()-p),a.unbind())},scope:function(c,a,e){var l,h,g,v,q,B,y,t,z,G,A,x,I,H,Ea,ha,E,F,J,fa,K,ca,L,X,O,ga,S,Q,R,sa,va,Xb,T,
U,V;if(l=M.profile)h=performance.now(),r.count++;g=la.elements;la.elements=p;v=la.offset;la.offset=0;q=p.vertCount-0;0<=q||d.commandRaise(n,f);B=la.count;la.count=q;y=p.primType;q=la.primitive;la.primitive=y;t=k.call(this,ba,c,e);y=N[3];N[3]=t;z=c.texture;t=N[5];N[5]=z;G=u.call(this,ba,c,e);z=N[4];N[4]=G;G=w.buffer;w.buffer=m;A=w.divisor;w.divisor=0;x=w.normalized;w.normalized=!1;I=w.offset;w.offset=0;H=w.size;w.size=0;Ea=w.state;w.state=1;ha=w.stride;w.stride=0;E=w.type;w.type=m.dtype;F=w.w;w.w=
0;J=w.x;w.x=0;fa=w.y;w.y=0;K=w.z;w.z=0;ca=D.buffer;D.buffer=b;L=D.divisor;D.divisor=0;X=D.normalized;D.normalized=!1;O=D.offset;D.offset=0;ga=D.size;D.size=0;S=D.state;D.state=1;Q=D.stride;D.stride=0;R=D.type;D.type=b.dtype;sa=D.w;D.w=0;va=D.x;D.x=0;Xb=D.y;D.y=0;T=D.z;D.z=0;U=P.vert;P.vert=2;V=P.frag;P.frag=1;a(ba,c,e);l&&(r.cpuTime+=performance.now()-h);la.elements=g;la.offset=v;la.count=B;la.primitive=q;N[3]=y;N[5]=t;N[4]=z;w.buffer=G;w.divisor=A;w.normalized=x;w.offset=I;w.size=H;w.state=Ea;w.stride=
ha;w.type=E;w.w=F;w.x=J;w.y=fa;w.z=K;D.buffer=ca;D.divisor=L;D.normalized=X;D.offset=O;D.size=ga;D.state=S;D.stride=Q;D.type=R;D.w=sa;D.x=va;D.y=Xb;D.z=T;P.vert=U;P.frag=V},batch:function(c,a){var e,k,l,h;e=oa.next;e!==oa.cur&&(e?U.bindFramebuffer(36160,e.framebuffer):U.bindFramebuffer(36160,null),oa.cur=e);if(M.dirty){var g,n,p;e=T.dither;e!==M.dither&&(e?U.enable(3024):U.disable(3024),M.dither=e);e=T.blend_enable;e!==M.blend_enable&&(e?U.enable(3042):U.disable(3042),M.blend_enable=e);e=Q[0];g=Q[1];
n=Q[2];p=Q[3];if(e!==R[0]||g!==R[1]||n!==R[2]||p!==R[3])U.blendColor(e,g,n,p),R[0]=e,R[1]=g,R[2]=n,R[3]=p;e=ra[0];g=ra[1];if(e!==pa[0]||g!==pa[1])U.blendEquationSeparate(e,g),pa[0]=e,pa[1]=g;e=K[0];g=K[1];n=K[2];p=K[3];if(e!==L[0]||g!==L[1]||n!==L[2]||p!==L[3])U.blendFuncSeparate(e,g,n,p),L[0]=e,L[1]=g,L[2]=n,L[3]=p;e=T.depth_enable;e!==M.depth_enable&&(e?U.enable(2929):U.disable(2929),M.depth_enable=e);e=T.depth_func;e!==M.depth_func&&(U.depthFunc(e),M.depth_func=e);e=ma[0];g=ma[1];if(e!==ga[0]||
g!==ga[1])U.depthRange(e,g),ga[0]=e,ga[1]=g;e=T.depth_mask;e!==M.depth_mask&&(U.depthMask(e),M.depth_mask=e);e=da[0];g=da[1];n=da[2];p=da[3];if(e!==X[0]||g!==X[1]||n!==X[2]||p!==X[3])U.colorMask(e,g,n,p),X[0]=e,X[1]=g,X[2]=n,X[3]=p;e=T.cull_enable;e!==M.cull_enable&&(e?U.enable(2884):U.disable(2884),M.cull_enable=e);e=T.cull_face;e!==M.cull_face&&(U.cullFace(e),M.cull_face=e);e=T.frontFace;e!==M.frontFace&&(U.frontFace(e),M.frontFace=e);e=T.lineWidth;e!==M.lineWidth&&(U.lineWidth(e),M.lineWidth=e);
e=T.polygonOffset_enable;e!==M.polygonOffset_enable&&(e?U.enable(32823):U.disable(32823),M.polygonOffset_enable=e);e=Ba[0];g=Ba[1];if(e!==va[0]||g!==va[1])U.polygonOffset(e,g),va[0]=e,va[1]=g;e=T.sample_alpha;e!==M.sample_alpha&&(e?U.enable(32926):U.disable(32926),M.sample_alpha=e);e=T.sample_enable;e!==M.sample_enable&&(e?U.enable(32928):U.disable(32928),M.sample_enable=e);e=ca[0];g=ca[1];if(e!==Da[0]||g!==Da[1])U.sampleCoverage(e,g),Da[0]=e,Da[1]=g;e=T.stencil_enable;e!==M.stencil_enable&&(e?U.enable(2960):
U.disable(2960),M.stencil_enable=e);e=T.stencil_mask;e!==M.stencil_mask&&(U.stencilMask(e),M.stencil_mask=e);e=Aa[0];g=Aa[1];n=Aa[2];if(e!==Pa[0]||g!==Pa[1]||n!==Pa[2])U.stencilFunc(e,g,n),Pa[0]=e,Pa[1]=g,Pa[2]=n;e=Ua[0];g=Ua[1];n=Ua[2];p=Ua[3];if(e!==ha[0]||g!==ha[1]||n!==ha[2]||p!==ha[3])U.stencilOpSeparate(e,g,n,p),ha[0]=e,ha[1]=g,ha[2]=n,ha[3]=p;e=za[0];g=za[1];n=za[2];p=za[3];if(e!==Xb[0]||g!==Xb[1]||n!==Xb[2]||p!==Xb[3])U.stencilOpSeparate(e,g,n,p),Xb[0]=e,Xb[1]=g,Xb[2]=n,Xb[3]=p;e=T.scissor_enable;
e!==M.scissor_enable&&(e?U.enable(3089):U.disable(3089),M.scissor_enable=e);e=ja[0];g=ja[1];n=ja[2];p=ja[3];if(e!==na[0]||g!==na[1]||n!==na[2]||p!==na[3])U.scissor(e,g,n,p),na[0]=e,na[1]=g,na[2]=n,na[3]=p;e=fa[0];g=fa[1];n=fa[2];p=fa[3];if(e!==sa[0]||g!==sa[1]||n!==sa[2]||p!==sa[3])U.viewport(e,g,n,p),sa[0]=e,sa[1]=g,sa[2]=n,sa[3]=p;M.dirty=!1}if(e=M.profile)k=performance.now(),r.count+=a;U.useProgram(t.program);O.setVAO(null);g=ka.location;n=z[g];n.buffer||U.enableVertexAttribArray(g);if(n.type!==
m.dtype||3!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||0!==n.stride)U.bindBuffer(34962,m.buffer),U.vertexAttribPointer(g,3,m.dtype,!1,0,0),n.type=m.dtype,n.size=3,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;g=E.location;n=z[g];n.buffer||U.enableVertexAttribArray(g);if(n.type!==b.dtype||2!==n.size||n.buffer!==b||!1!==n.normalized||0!==n.offset||0!==n.stride)U.bindBuffer(34962,b.buffer),U.vertexAttribPointer(g,2,b.dtype,!1,0,0),n.type=b.dtype,n.size=2,n.buffer=b,n.normalized=!1,n.offset=
0,n.stride=0;g=y.call(this,ba,h,l);V(g)&&16===g.length||d.commandRaise(G,f);U.uniformMatrix4fv(J.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(lb[0]=g[0],lb[1]=g[1],lb[2]=g[2],lb[3]=g[3],lb[4]=g[4],lb[5]=g[5],lb[6]=g[6],lb[7]=g[7],lb[8]=g[8],lb[9]=g[9],lb[10]=g[10],lb[11]=g[11],lb[12]=g[12],lb[13]=g[13],lb[14]=g[14],lb[15]=g[15],lb));l=x.call(this,ba,h,l);V(l)&&16===l.length||d.commandRaise(I,f);U.uniformMatrix4fv(ea.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Fb[0]=l[0],
Fb[1]=l[1],Fb[2]=l[2],Fb[3]=l[3],Fb[4]=l[4],Fb[5]=l[5],Fb[6]=l[6],Fb[7]=l[7],Fb[8]=l[8],Fb[9]=l[9],Fb[10]=l[10],Fb[11]=l[11],Fb[12]=l[12],Fb[13]=l[13],Fb[14]=l[14],Fb[15]=l[15],Fb));H&&U.bindBuffer(34963,H.buffer.buffer);g=H.primType;n=H.vertCount-0;0<=n||d.commandRaise(A,f);for(l=0;l<a;++l)h=c[l],(h=h.texture)&&"framebuffer"===h._reglType&&(h=h.color[0]),"function"===typeof h&&"texture2d"===h._reglType||d.commandRaise(S,f),h=h._texture,U.uniform1i(F.location,h.bind()),n&&(U.drawElements(g,n,H.type,
0<<(H.type-5121>>1)),h.unbind());O.setVAO(null);e&&(r.cpuTime+=performance.now()-k)}}},"$19,normal,position,projection,view":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x){var I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa,Pa,za;I=a.attributes;S=a.context;H=a.current;A=a.draw;ka=a.framebuffer;J=a.gl;F=a.isArrayLike;E=a.next;ea=a.shader;z=a.uniforms;ba=a.vao;M=E.blend_color;la=H.blend_color;oa=E.blend_equation;U=H.blend_equation;V=E.blend_func;
T=H.blend_func;P=E.colorMask;N=H.colorMask;O=E.depth_range;Q=H.depth_range;R=E.polygonOffset_offset;ra=H.polygonOffset_offset;pa=E.sample_coverage;K=H.sample_coverage;L=E.scissor_box;da=H.scissor_box;X=E.stencil_func;ma=H.stencil_func;ga=E.stencil_opBack;Ba=H.stencil_opBack;va=E.stencil_opFront;ca=H.stencil_opFront;Da=E.viewport;ja=H.viewport;na=new Float32Array(16);Aa=new Float32Array(16);Pa=new Float32Array(16);za=new Float32Array(16);return{draw:function(e){var a,k,l;e=ka.next;e!==ka.cur&&(e?J.bindFramebuffer(36160,
e.framebuffer):J.bindFramebuffer(36160,null),ka.cur=e);if(H.dirty){var n;e=E.dither;e!==H.dither&&(e?J.enable(3024):J.disable(3024),H.dither=e);e=E.blend_enable;e!==H.blend_enable&&(e?J.enable(3042):J.disable(3042),H.blend_enable=e);e=M[0];k=M[1];l=M[2];n=M[3];if(e!==la[0]||k!==la[1]||l!==la[2]||n!==la[3])J.blendColor(e,k,l,n),la[0]=e,la[1]=k,la[2]=l,la[3]=n;e=oa[0];k=oa[1];if(e!==U[0]||k!==U[1])J.blendEquationSeparate(e,k),U[0]=e,U[1]=k;e=V[0];k=V[1];l=V[2];n=V[3];if(e!==T[0]||k!==T[1]||l!==T[2]||
n!==T[3])J.blendFuncSeparate(e,k,l,n),T[0]=e,T[1]=k,T[2]=l,T[3]=n;e=E.depth_enable;e!==H.depth_enable&&(e?J.enable(2929):J.disable(2929),H.depth_enable=e);e=E.depth_func;e!==H.depth_func&&(J.depthFunc(e),H.depth_func=e);e=O[0];k=O[1];if(e!==Q[0]||k!==Q[1])J.depthRange(e,k),Q[0]=e,Q[1]=k;e=E.depth_mask;e!==H.depth_mask&&(J.depthMask(e),H.depth_mask=e);e=P[0];k=P[1];l=P[2];n=P[3];if(e!==N[0]||k!==N[1]||l!==N[2]||n!==N[3])J.colorMask(e,k,l,n),N[0]=e,N[1]=k,N[2]=l,N[3]=n;e=E.cull_enable;e!==H.cull_enable&&
(e?J.enable(2884):J.disable(2884),H.cull_enable=e);e=E.cull_face;e!==H.cull_face&&(J.cullFace(e),H.cull_face=e);e=E.frontFace;e!==H.frontFace&&(J.frontFace(e),H.frontFace=e);e=E.lineWidth;e!==H.lineWidth&&(J.lineWidth(e),H.lineWidth=e);e=E.polygonOffset_enable;e!==H.polygonOffset_enable&&(e?J.enable(32823):J.disable(32823),H.polygonOffset_enable=e);e=R[0];k=R[1];if(e!==ra[0]||k!==ra[1])J.polygonOffset(e,k),ra[0]=e,ra[1]=k;e=E.sample_alpha;e!==H.sample_alpha&&(e?J.enable(32926):J.disable(32926),H.sample_alpha=
e);e=E.sample_enable;e!==H.sample_enable&&(e?J.enable(32928):J.disable(32928),H.sample_enable=e);e=pa[0];k=pa[1];if(e!==K[0]||k!==K[1])J.sampleCoverage(e,k),K[0]=e,K[1]=k;e=E.stencil_enable;e!==H.stencil_enable&&(e?J.enable(2960):J.disable(2960),H.stencil_enable=e);e=E.stencil_mask;e!==H.stencil_mask&&(J.stencilMask(e),H.stencil_mask=e);e=X[0];k=X[1];l=X[2];if(e!==ma[0]||k!==ma[1]||l!==ma[2])J.stencilFunc(e,k,l),ma[0]=e,ma[1]=k,ma[2]=l;e=va[0];k=va[1];l=va[2];n=va[3];if(e!==ca[0]||k!==ca[1]||l!==
ca[2]||n!==ca[3])J.stencilOpSeparate(e,k,l,n),ca[0]=e,ca[1]=k,ca[2]=l,ca[3]=n;e=ga[0];k=ga[1];l=ga[2];n=ga[3];if(e!==Ba[0]||k!==Ba[1]||l!==Ba[2]||n!==Ba[3])J.stencilOpSeparate(e,k,l,n),Ba[0]=e,Ba[1]=k,Ba[2]=l,Ba[3]=n;e=E.scissor_enable;e!==H.scissor_enable&&(e?J.enable(3089):J.disable(3089),H.scissor_enable=e);e=L[0];k=L[1];l=L[2];n=L[3];if(e!==da[0]||k!==da[1]||l!==da[2]||n!==da[3])J.scissor(e,k,l,n),da[0]=e,da[1]=k,da[2]=l,da[3]=n;e=Da[0];k=Da[1];l=Da[2];n=Da[3];if(e!==ja[0]||k!==ja[1]||l!==ja[2]||
n!==ja[3])J.viewport(e,k,l,n),ja[0]=e,ja[1]=k,ja[2]=l,ja[3]=n;H.dirty=!1}if(e=H.profile)a=performance.now(),r.count++;J.useProgram(q.program);ba.setVAO(null);k=y.location;l=I[k];l.buffer||J.enableVertexAttribArray(k);if(l.type!==m.dtype||3!==l.size||l.buffer!==m||!1!==l.normalized||0!==l.offset||0!==l.stride)J.bindBuffer(34962,m.buffer),J.vertexAttribPointer(k,3,m.dtype,!1,0,0),l.type=m.dtype,l.size=3,l.buffer=m,l.normalized=!1,l.offset=0,l.stride=0;k=t.location;l=I[k];l.buffer||J.enableVertexAttribArray(k);
if(l.type!==b.dtype||3!==l.size||l.buffer!==b||!1!==l.normalized||0!==l.offset||0!==l.stride)J.bindBuffer(34962,b.buffer),J.vertexAttribPointer(k,3,b.dtype,!1,0,0),l.type=b.dtype,l.size=3,l.buffer=b,l.normalized=!1,l.offset=0,l.stride=0;k=z[5];F(k)&&16===k.length||d.commandRaise(g,f);J.uniformMatrix4fv(G.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(na[0]=k[0],na[1]=k[1],na[2]=k[2],na[3]=k[3],na[4]=k[4],na[5]=k[5],na[6]=k[6],na[7]=k[7],na[8]=k[8],na[9]=k[9],na[10]=k[10],na[11]=k[11],
na[12]=k[12],na[13]=k[13],na[14]=k[14],na[15]=k[15],na));k=z[8];F(k)&&16===k.length||d.commandRaise(c,f);J.uniformMatrix4fv(x.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Aa[0]=k[0],Aa[1]=k[1],Aa[2]=k[2],Aa[3]=k[3],Aa[4]=k[4],Aa[5]=k[5],Aa[6]=k[6],Aa[7]=k[7],Aa[8]=k[8],Aa[9]=k[9],Aa[10]=k[10],Aa[11]=k[11],Aa[12]=k[12],Aa[13]=k[13],Aa[14]=k[14],Aa[15]=k[15],Aa));h&&J.bindBuffer(34963,h.buffer.buffer);k=h.primType;l=h.vertCount-0;0<=l||d.commandRaise(B,f);l&&(J.drawElements(k,l,h.type,
0<<(h.type-5121>>1)),ba.setVAO(null),e&&(r.cpuTime+=performance.now()-a))},scope:function(c,a,k){var h,g,n,u,w,q,D,B,y,t,z,G,x,I,Ea,E,F,J,K,ca,L,M,X,N,O,ga,P,Q,R,va,T,U;if(h=H.profile)g=performance.now(),r.count++;n=A.elements;A.elements=v;u=A.offset;A.offset=0;w=v.vertCount-0;0<=w||d.commandRaise(e,f);q=A.count;A.count=w;D=v.primType;w=A.primitive;A.primitive=D;D=l.buffer;l.buffer=b;B=l.divisor;l.divisor=0;y=l.normalized;l.normalized=!1;t=l.offset;l.offset=0;z=l.size;l.size=0;G=l.state;l.state=1;
x=l.stride;l.stride=0;I=l.type;l.type=b.dtype;Ea=l.w;l.w=0;E=l.x;l.x=0;F=l.y;l.y=0;J=l.z;l.z=0;K=p.buffer;p.buffer=m;ca=p.divisor;p.divisor=0;L=p.normalized;p.normalized=!1;M=p.offset;p.offset=0;X=p.size;p.size=0;N=p.state;p.state=1;O=p.stride;p.stride=0;ga=p.type;p.type=m.dtype;P=p.w;p.w=0;Q=p.x;p.x=0;R=p.y;p.y=0;va=p.z;p.z=0;T=ea.vert;ea.vert=10;U=ea.frag;ea.frag=9;a(S,c,k);h&&(r.cpuTime+=performance.now()-g);A.elements=n;A.offset=u;A.count=q;A.primitive=w;l.buffer=D;l.divisor=B;l.normalized=y;
l.offset=t;l.size=z;l.state=G;l.stride=x;l.type=I;l.w=Ea;l.x=E;l.y=F;l.z=J;p.buffer=K;p.divisor=ca;p.normalized=L;p.offset=M;p.size=X;p.state=N;p.stride=O;p.type=ga;p.w=P;p.x=Q;p.y=R;p.z=va;ea.vert=T;ea.frag=U},batch:function(c,e){var a,l,h;a=ka.next;a!==ka.cur&&(a?J.bindFramebuffer(36160,a.framebuffer):J.bindFramebuffer(36160,null),ka.cur=a);if(H.dirty){var g,p;a=E.dither;a!==H.dither&&(a?J.enable(3024):J.disable(3024),H.dither=a);a=E.blend_enable;a!==H.blend_enable&&(a?J.enable(3042):J.disable(3042),
H.blend_enable=a);a=M[0];h=M[1];g=M[2];p=M[3];if(a!==la[0]||h!==la[1]||g!==la[2]||p!==la[3])J.blendColor(a,h,g,p),la[0]=a,la[1]=h,la[2]=g,la[3]=p;a=oa[0];h=oa[1];if(a!==U[0]||h!==U[1])J.blendEquationSeparate(a,h),U[0]=a,U[1]=h;a=V[0];h=V[1];g=V[2];p=V[3];if(a!==T[0]||h!==T[1]||g!==T[2]||p!==T[3])J.blendFuncSeparate(a,h,g,p),T[0]=a,T[1]=h,T[2]=g,T[3]=p;a=E.depth_enable;a!==H.depth_enable&&(a?J.enable(2929):J.disable(2929),H.depth_enable=a);a=E.depth_func;a!==H.depth_func&&(J.depthFunc(a),H.depth_func=
a);a=O[0];h=O[1];if(a!==Q[0]||h!==Q[1])J.depthRange(a,h),Q[0]=a,Q[1]=h;a=E.depth_mask;a!==H.depth_mask&&(J.depthMask(a),H.depth_mask=a);a=P[0];h=P[1];g=P[2];p=P[3];if(a!==N[0]||h!==N[1]||g!==N[2]||p!==N[3])J.colorMask(a,h,g,p),N[0]=a,N[1]=h,N[2]=g,N[3]=p;a=E.cull_enable;a!==H.cull_enable&&(a?J.enable(2884):J.disable(2884),H.cull_enable=a);a=E.cull_face;a!==H.cull_face&&(J.cullFace(a),H.cull_face=a);a=E.frontFace;a!==H.frontFace&&(J.frontFace(a),H.frontFace=a);a=E.lineWidth;a!==H.lineWidth&&(J.lineWidth(a),
H.lineWidth=a);a=E.polygonOffset_enable;a!==H.polygonOffset_enable&&(a?J.enable(32823):J.disable(32823),H.polygonOffset_enable=a);a=R[0];h=R[1];if(a!==ra[0]||h!==ra[1])J.polygonOffset(a,h),ra[0]=a,ra[1]=h;a=E.sample_alpha;a!==H.sample_alpha&&(a?J.enable(32926):J.disable(32926),H.sample_alpha=a);a=E.sample_enable;a!==H.sample_enable&&(a?J.enable(32928):J.disable(32928),H.sample_enable=a);a=pa[0];h=pa[1];if(a!==K[0]||h!==K[1])J.sampleCoverage(a,h),K[0]=a,K[1]=h;a=E.stencil_enable;a!==H.stencil_enable&&
(a?J.enable(2960):J.disable(2960),H.stencil_enable=a);a=E.stencil_mask;a!==H.stencil_mask&&(J.stencilMask(a),H.stencil_mask=a);a=X[0];h=X[1];g=X[2];if(a!==ma[0]||h!==ma[1]||g!==ma[2])J.stencilFunc(a,h,g),ma[0]=a,ma[1]=h,ma[2]=g;a=va[0];h=va[1];g=va[2];p=va[3];if(a!==ca[0]||h!==ca[1]||g!==ca[2]||p!==ca[3])J.stencilOpSeparate(a,h,g,p),ca[0]=a,ca[1]=h,ca[2]=g,ca[3]=p;a=ga[0];h=ga[1];g=ga[2];p=ga[3];if(a!==Ba[0]||h!==Ba[1]||g!==Ba[2]||p!==Ba[3])J.stencilOpSeparate(a,h,g,p),Ba[0]=a,Ba[1]=h,Ba[2]=g,Ba[3]=
p;a=E.scissor_enable;a!==H.scissor_enable&&(a?J.enable(3089):J.disable(3089),H.scissor_enable=a);a=L[0];h=L[1];g=L[2];p=L[3];if(a!==da[0]||h!==da[1]||g!==da[2]||p!==da[3])J.scissor(a,h,g,p),da[0]=a,da[1]=h,da[2]=g,da[3]=p;a=Da[0];h=Da[1];g=Da[2];p=Da[3];if(a!==ja[0]||h!==ja[1]||g!==ja[2]||p!==ja[3])J.viewport(a,h,g,p),ja[0]=a,ja[1]=h,ja[2]=g,ja[3]=p;H.dirty=!1}if(a=H.profile)l=performance.now(),r.count+=e;J.useProgram(n.program);ba.setVAO(null);h=y.location;g=I[h];g.buffer||J.enableVertexAttribArray(h);
if(g.type!==m.dtype||3!==g.size||g.buffer!==m||!1!==g.normalized||0!==g.offset||0!==g.stride)J.bindBuffer(34962,m.buffer),J.vertexAttribPointer(h,3,m.dtype,!1,0,0),g.type=m.dtype,g.size=3,g.buffer=m,g.normalized=!1,g.offset=0,g.stride=0;h=t.location;g=I[h];g.buffer||J.enableVertexAttribArray(h);if(g.type!==b.dtype||3!==g.size||g.buffer!==b||!1!==g.normalized||0!==g.offset||0!==g.stride)J.bindBuffer(34962,b.buffer),J.vertexAttribPointer(h,3,b.dtype,!1,0,0),g.type=b.dtype,g.size=3,g.buffer=b,g.normalized=
!1,g.offset=0,g.stride=0;h=z[5];F(h)&&16===h.length||d.commandRaise(k,f);J.uniformMatrix4fv(G.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Pa[0]=h[0],Pa[1]=h[1],Pa[2]=h[2],Pa[3]=h[3],Pa[4]=h[4],Pa[5]=h[5],Pa[6]=h[6],Pa[7]=h[7],Pa[8]=h[8],Pa[9]=h[9],Pa[10]=h[10],Pa[11]=h[11],Pa[12]=h[12],Pa[13]=h[13],Pa[14]=h[14],Pa[15]=h[15],Pa));h=z[8];F(h)&&16===h.length||d.commandRaise(u,f);J.uniformMatrix4fv(x.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(za[0]=h[0],za[1]=h[1],za[2]=
h[2],za[3]=h[3],za[4]=h[4],za[5]=h[5],za[6]=h[6],za[7]=h[7],za[8]=h[8],za[9]=h[9],za[10]=h[10],za[11]=h[11],za[12]=h[12],za[13]=h[13],za[14]=h[14],za[15]=h[15],za));w&&J.bindBuffer(34963,w.buffer.buffer);g=w.primType;p=w.vertCount-0;0<=p||d.commandRaise(D,f);for(h=0;h<e;++h)p&&J.drawElements(g,p,w.type,0<<(w.type-5121>>1));ba.setVAO(null);a&&(r.cpuTime+=performance.now()-l)}}},"$14,angle,color,position":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u){var w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,
U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga;w=a.attributes;D=a.context;t=a.current;y=a.draw;G=a.elements;x=a.framebuffer;I=a.gl;S=a.isArrayLike;H=a.next;A=a.shader;ka=a.uniforms;J=a.vao;F=H.blend_color;E=t.blend_color;ea=H.blend_equation;z=t.blend_equation;ba=H.blend_func;M=t.blend_func;la=H.colorMask;oa=t.colorMask;U=H.depth_range;V=t.depth_range;T=H.polygonOffset_offset;P=t.polygonOffset_offset;N=H.sample_coverage;O=t.sample_coverage;Q=H.scissor_box;R=t.scissor_box;ra=H.stencil_func;pa=t.stencil_func;
K=H.stencil_opBack;L=t.stencil_opBack;da=H.stencil_opFront;X=t.stencil_opFront;ma=H.viewport;ga=t.viewport;return{draw:function(e){var a,l,h,p;a=x.next;a!==x.cur&&(a?I.bindFramebuffer(36160,a.framebuffer):I.bindFramebuffer(36160,null),x.cur=a);if(t.dirty){var v;a=H.dither;a!==t.dither&&(a?I.enable(3024):I.disable(3024),t.dither=a);a=H.blend_enable;a!==t.blend_enable&&(a?I.enable(3042):I.disable(3042),t.blend_enable=a);a=F[0];h=F[1];p=F[2];v=F[3];if(a!==E[0]||h!==E[1]||p!==E[2]||v!==E[3])I.blendColor(a,
h,p,v),E[0]=a,E[1]=h,E[2]=p,E[3]=v;a=ea[0];h=ea[1];if(a!==z[0]||h!==z[1])I.blendEquationSeparate(a,h),z[0]=a,z[1]=h;a=ba[0];h=ba[1];p=ba[2];v=ba[3];if(a!==M[0]||h!==M[1]||p!==M[2]||v!==M[3])I.blendFuncSeparate(a,h,p,v),M[0]=a,M[1]=h,M[2]=p,M[3]=v;a=H.depth_func;a!==t.depth_func&&(I.depthFunc(a),t.depth_func=a);a=U[0];h=U[1];if(a!==V[0]||h!==V[1])I.depthRange(a,h),V[0]=a,V[1]=h;a=H.depth_mask;a!==t.depth_mask&&(I.depthMask(a),t.depth_mask=a);a=la[0];h=la[1];p=la[2];v=la[3];if(a!==oa[0]||h!==oa[1]||
p!==oa[2]||v!==oa[3])I.colorMask(a,h,p,v),oa[0]=a,oa[1]=h,oa[2]=p,oa[3]=v;a=H.cull_enable;a!==t.cull_enable&&(a?I.enable(2884):I.disable(2884),t.cull_enable=a);a=H.cull_face;a!==t.cull_face&&(I.cullFace(a),t.cull_face=a);a=H.frontFace;a!==t.frontFace&&(I.frontFace(a),t.frontFace=a);a=H.lineWidth;a!==t.lineWidth&&(I.lineWidth(a),t.lineWidth=a);a=H.polygonOffset_enable;a!==t.polygonOffset_enable&&(a?I.enable(32823):I.disable(32823),t.polygonOffset_enable=a);a=T[0];h=T[1];if(a!==P[0]||h!==P[1])I.polygonOffset(a,
h),P[0]=a,P[1]=h;a=H.sample_alpha;a!==t.sample_alpha&&(a?I.enable(32926):I.disable(32926),t.sample_alpha=a);a=H.sample_enable;a!==t.sample_enable&&(a?I.enable(32928):I.disable(32928),t.sample_enable=a);a=N[0];h=N[1];if(a!==O[0]||h!==O[1])I.sampleCoverage(a,h),O[0]=a,O[1]=h;a=H.stencil_enable;a!==t.stencil_enable&&(a?I.enable(2960):I.disable(2960),t.stencil_enable=a);a=H.stencil_mask;a!==t.stencil_mask&&(I.stencilMask(a),t.stencil_mask=a);a=ra[0];h=ra[1];p=ra[2];if(a!==pa[0]||h!==pa[1]||p!==pa[2])I.stencilFunc(a,
h,p),pa[0]=a,pa[1]=h,pa[2]=p;a=da[0];h=da[1];p=da[2];v=da[3];if(a!==X[0]||h!==X[1]||p!==X[2]||v!==X[3])I.stencilOpSeparate(a,h,p,v),X[0]=a,X[1]=h,X[2]=p,X[3]=v;a=K[0];h=K[1];p=K[2];v=K[3];if(a!==L[0]||h!==L[1]||p!==L[2]||v!==L[3])I.stencilOpSeparate(a,h,p,v),L[0]=a,L[1]=h,L[2]=p,L[3]=v;a=H.scissor_enable;a!==t.scissor_enable&&(a?I.enable(3089):I.disable(3089),t.scissor_enable=a);a=Q[0];h=Q[1];p=Q[2];v=Q[3];if(a!==R[0]||h!==R[1]||p!==R[2]||v!==R[3])I.scissor(a,h,p,v),R[0]=a,R[1]=h,R[2]=p,R[3]=v;a=
ma[0];h=ma[1];p=ma[2];v=ma[3];if(a!==ga[0]||h!==ga[1]||p!==ga[2]||v!==ga[3])I.viewport(a,h,p,v),ga[0]=a,ga[1]=h,ga[2]=p,ga[3]=v}I.disable(2929);t.depth_enable=!1;if(a=t.profile)l=performance.now(),r.count++;I.useProgram(q.program);J.setVAO(null);h=u.location;p=w[h];p.buffer||I.enableVertexAttribArray(h);if(p.type!==m.dtype||2!==p.size||p.buffer!==m||!1!==p.normalized||0!==p.offset||0!==p.stride)I.bindBuffer(34962,m.buffer),I.vertexAttribPointer(h,2,m.dtype,!1,0,0),p.type=m.dtype,p.size=2,p.buffer=
m,p.normalized=!1,p.offset=0,p.stride=0;h=b.call(this,D,e,0);"number"!==typeof h&&d.commandRaise(g,f);I.uniform1f(n.location,h);e=e.color;S(e)&&4===e.length||d.commandRaise(c,f);I.uniform4f(k.location,e[0],e[1],e[2],e[3]);(e=y.elements)?I.bindBuffer(34963,e.buffer.buffer):J.currentVAO&&(e=G.getElements(J.currentVAO.elements))&&I.bindBuffer(34963,e.buffer.buffer);h=y.primitive;p=y.offset;e?I.drawElements(h,3,e.type,p<<(e.type-5121>>1)):I.drawArrays(h,p,3);t.dirty=!0;J.setVAO(null);a&&(r.cpuTime+=performance.now()-
l)},scope:function(c,a,e){var b,d,k,l,g,n,p,f,u,w,v,q,C,z,G,x,I,E,F,J;b=H.depth_enable;H.depth_enable=!1;if(d=t.profile)k=performance.now(),r.count++;l=y.count;y.count=3;g=h.call(this,D,c,e);n=ka[3];ka[3]=g;p=c.color;g=ka[4];ka[4]=p;p=B.buffer;B.buffer=m;f=B.divisor;B.divisor=0;u=B.normalized;B.normalized=!1;w=B.offset;B.offset=0;v=B.size;B.size=0;q=B.state;B.state=1;C=B.stride;B.stride=0;z=B.type;B.type=m.dtype;G=B.w;B.w=0;x=B.x;B.x=0;I=B.y;B.y=0;E=B.z;B.z=0;F=A.vert;A.vert=2;J=A.frag;A.frag=1;t.dirty=
!0;a(D,c,e);H.depth_enable=b;d&&(r.cpuTime+=performance.now()-k);y.count=l;ka[3]=n;ka[4]=g;B.buffer=p;B.divisor=f;B.normalized=u;B.offset=w;B.size=v;B.state=q;B.stride=C;B.type=z;B.w=G;B.x=x;B.y=I;B.z=E;A.vert=F;A.frag=J;t.dirty=!0},batch:function(c,a){var b,h,g,q;b=x.next;b!==x.cur&&(b?I.bindFramebuffer(36160,b.framebuffer):I.bindFramebuffer(36160,null),x.cur=b);if(t.dirty){var B,A,za;b=H.dither;b!==t.dither&&(b?I.enable(3024):I.disable(3024),t.dither=b);b=H.blend_enable;b!==t.blend_enable&&(b?I.enable(3042):
I.disable(3042),t.blend_enable=b);b=F[0];B=F[1];A=F[2];za=F[3];if(b!==E[0]||B!==E[1]||A!==E[2]||za!==E[3])I.blendColor(b,B,A,za),E[0]=b,E[1]=B,E[2]=A,E[3]=za;b=ea[0];B=ea[1];if(b!==z[0]||B!==z[1])I.blendEquationSeparate(b,B),z[0]=b,z[1]=B;b=ba[0];B=ba[1];A=ba[2];za=ba[3];if(b!==M[0]||B!==M[1]||A!==M[2]||za!==M[3])I.blendFuncSeparate(b,B,A,za),M[0]=b,M[1]=B,M[2]=A,M[3]=za;b=H.depth_func;b!==t.depth_func&&(I.depthFunc(b),t.depth_func=b);b=U[0];B=U[1];if(b!==V[0]||B!==V[1])I.depthRange(b,B),V[0]=b,V[1]=
B;b=H.depth_mask;b!==t.depth_mask&&(I.depthMask(b),t.depth_mask=b);b=la[0];B=la[1];A=la[2];za=la[3];if(b!==oa[0]||B!==oa[1]||A!==oa[2]||za!==oa[3])I.colorMask(b,B,A,za),oa[0]=b,oa[1]=B,oa[2]=A,oa[3]=za;b=H.cull_enable;b!==t.cull_enable&&(b?I.enable(2884):I.disable(2884),t.cull_enable=b);b=H.cull_face;b!==t.cull_face&&(I.cullFace(b),t.cull_face=b);b=H.frontFace;b!==t.frontFace&&(I.frontFace(b),t.frontFace=b);b=H.lineWidth;b!==t.lineWidth&&(I.lineWidth(b),t.lineWidth=b);b=H.polygonOffset_enable;b!==
t.polygonOffset_enable&&(b?I.enable(32823):I.disable(32823),t.polygonOffset_enable=b);b=T[0];B=T[1];if(b!==P[0]||B!==P[1])I.polygonOffset(b,B),P[0]=b,P[1]=B;b=H.sample_alpha;b!==t.sample_alpha&&(b?I.enable(32926):I.disable(32926),t.sample_alpha=b);b=H.sample_enable;b!==t.sample_enable&&(b?I.enable(32928):I.disable(32928),t.sample_enable=b);b=N[0];B=N[1];if(b!==O[0]||B!==O[1])I.sampleCoverage(b,B),O[0]=b,O[1]=B;b=H.stencil_enable;b!==t.stencil_enable&&(b?I.enable(2960):I.disable(2960),t.stencil_enable=
b);b=H.stencil_mask;b!==t.stencil_mask&&(I.stencilMask(b),t.stencil_mask=b);b=ra[0];B=ra[1];A=ra[2];if(b!==pa[0]||B!==pa[1]||A!==pa[2])I.stencilFunc(b,B,A),pa[0]=b,pa[1]=B,pa[2]=A;b=da[0];B=da[1];A=da[2];za=da[3];if(b!==X[0]||B!==X[1]||A!==X[2]||za!==X[3])I.stencilOpSeparate(b,B,A,za),X[0]=b,X[1]=B,X[2]=A,X[3]=za;b=K[0];B=K[1];A=K[2];za=K[3];if(b!==L[0]||B!==L[1]||A!==L[2]||za!==L[3])I.stencilOpSeparate(b,B,A,za),L[0]=b,L[1]=B,L[2]=A,L[3]=za;b=H.scissor_enable;b!==t.scissor_enable&&(b?I.enable(3089):
I.disable(3089),t.scissor_enable=b);b=Q[0];B=Q[1];A=Q[2];za=Q[3];if(b!==R[0]||B!==R[1]||A!==R[2]||za!==R[3])I.scissor(b,B,A,za),R[0]=b,R[1]=B,R[2]=A,R[3]=za;b=ma[0];B=ma[1];A=ma[2];za=ma[3];if(b!==ga[0]||B!==ga[1]||A!==ga[2]||za!==ga[3])I.viewport(b,B,A,za),ga[0]=b,ga[1]=B,ga[2]=A,ga[3]=za}I.disable(2929);t.depth_enable=!1;if(b=t.profile)h=performance.now(),r.count+=a;I.useProgram(v.program);J.setVAO(null);B=u.location;A=w[B];A.buffer||I.enableVertexAttribArray(B);if(A.type!==m.dtype||2!==A.size||
A.buffer!==m||!1!==A.normalized||0!==A.offset||0!==A.stride)I.bindBuffer(34962,m.buffer),I.vertexAttribPointer(B,2,m.dtype,!1,0,0),A.type=m.dtype,A.size=2,A.buffer=m,A.normalized=!1,A.offset=0,A.stride=0;g=e.call(this,D,q,g);"number"!==typeof g&&d.commandRaise(l,f);I.uniform1f(n.location,g);(B=y.elements)?I.bindBuffer(34963,B.buffer.buffer):J.currentVAO&&(B=G.getElements(J.currentVAO.elements))&&I.bindBuffer(34963,B.buffer.buffer);A=y.primitive;za=y.offset;for(g=0;g<a;++g){q=c[g];var ka,Ua,ha,fa,
sa,ua,Ca;ka=q.color;S(ka)&&4===ka.length||d.commandRaise(p,f);q=ka[0];ha=ka[1];sa=ka[2];ka=ka[3];g&&Ua===q&&fa===ha&&ua===sa&&Ca===ka||(Ua=q,fa=ha,ua=sa,Ca=ka,I.uniform4f(k.location,q,ha,sa,ka));B?I.drawElements(A,3,B.type,za<<(B.type-5121>>1)):I.drawArrays(A,za,3)}t.dirty=!0;J.setVAO(null);b&&(r.cpuTime+=performance.now()-h)}}},"$13,color,position":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n){var k,u,w,D,t,y,G,x,I,S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da;k=a.attributes;u=a.context;
w=a.current;D=a.draw;t=a.framebuffer;y=a.gl;G=a.next;x=a.shader;I=a.uniforms;S=a.vao;H=G.blend_color;A=w.blend_color;ka=G.blend_equation;J=w.blend_equation;F=G.blend_func;E=w.blend_func;ea=G.colorMask;z=w.colorMask;ba=G.depth_range;M=w.depth_range;la=G.polygonOffset_offset;oa=w.polygonOffset_offset;U=G.sample_coverage;V=w.sample_coverage;T=G.scissor_box;P=w.scissor_box;N=G.stencil_func;O=w.stencil_func;Q=G.stencil_opBack;R=w.stencil_opBack;ra=G.stencil_opFront;pa=w.stencil_opFront;K=G.viewport;L=
w.viewport;da=[1,0,0,1];return{draw:function(c){var a,e,h;c=t.next;c!==t.cur&&(c?y.bindFramebuffer(36160,c.framebuffer):y.bindFramebuffer(36160,null),t.cur=c);if(w.dirty){var l;c=G.dither;c!==w.dither&&(c?y.enable(3024):y.disable(3024),w.dither=c);c=G.blend_enable;c!==w.blend_enable&&(c?y.enable(3042):y.disable(3042),w.blend_enable=c);c=H[0];e=H[1];h=H[2];l=H[3];if(c!==A[0]||e!==A[1]||h!==A[2]||l!==A[3])y.blendColor(c,e,h,l),A[0]=c,A[1]=e,A[2]=h,A[3]=l;c=ka[0];e=ka[1];if(c!==J[0]||e!==J[1])y.blendEquationSeparate(c,
e),J[0]=c,J[1]=e;c=F[0];e=F[1];h=F[2];l=F[3];if(c!==E[0]||e!==E[1]||h!==E[2]||l!==E[3])y.blendFuncSeparate(c,e,h,l),E[0]=c,E[1]=e,E[2]=h,E[3]=l;c=G.depth_enable;c!==w.depth_enable&&(c?y.enable(2929):y.disable(2929),w.depth_enable=c);c=G.depth_func;c!==w.depth_func&&(y.depthFunc(c),w.depth_func=c);c=ba[0];e=ba[1];if(c!==M[0]||e!==M[1])y.depthRange(c,e),M[0]=c,M[1]=e;c=G.depth_mask;c!==w.depth_mask&&(y.depthMask(c),w.depth_mask=c);c=ea[0];e=ea[1];h=ea[2];l=ea[3];if(c!==z[0]||e!==z[1]||h!==z[2]||l!==
z[3])y.colorMask(c,e,h,l),z[0]=c,z[1]=e,z[2]=h,z[3]=l;c=G.cull_enable;c!==w.cull_enable&&(c?y.enable(2884):y.disable(2884),w.cull_enable=c);c=G.cull_face;c!==w.cull_face&&(y.cullFace(c),w.cull_face=c);c=G.frontFace;c!==w.frontFace&&(y.frontFace(c),w.frontFace=c);c=G.polygonOffset_enable;c!==w.polygonOffset_enable&&(c?y.enable(32823):y.disable(32823),w.polygonOffset_enable=c);c=la[0];e=la[1];if(c!==oa[0]||e!==oa[1])y.polygonOffset(c,e),oa[0]=c,oa[1]=e;c=G.sample_alpha;c!==w.sample_alpha&&(c?y.enable(32926):
y.disable(32926),w.sample_alpha=c);c=G.sample_enable;c!==w.sample_enable&&(c?y.enable(32928):y.disable(32928),w.sample_enable=c);c=U[0];e=U[1];if(c!==V[0]||e!==V[1])y.sampleCoverage(c,e),V[0]=c,V[1]=e;c=G.stencil_enable;c!==w.stencil_enable&&(c?y.enable(2960):y.disable(2960),w.stencil_enable=c);c=G.stencil_mask;c!==w.stencil_mask&&(y.stencilMask(c),w.stencil_mask=c);c=N[0];e=N[1];h=N[2];if(c!==O[0]||e!==O[1]||h!==O[2])y.stencilFunc(c,e,h),O[0]=c,O[1]=e,O[2]=h;c=ra[0];e=ra[1];h=ra[2];l=ra[3];if(c!==
pa[0]||e!==pa[1]||h!==pa[2]||l!==pa[3])y.stencilOpSeparate(c,e,h,l),pa[0]=c,pa[1]=e,pa[2]=h,pa[3]=l;c=Q[0];e=Q[1];h=Q[2];l=Q[3];if(c!==R[0]||e!==R[1]||h!==R[2]||l!==R[3])y.stencilOpSeparate(c,e,h,l),R[0]=c,R[1]=e,R[2]=h,R[3]=l;c=G.scissor_enable;c!==w.scissor_enable&&(c?y.enable(3089):y.disable(3089),w.scissor_enable=c);c=T[0];e=T[1];h=T[2];l=T[3];if(c!==P[0]||e!==P[1]||h!==P[2]||l!==P[3])y.scissor(c,e,h,l),P[0]=c,P[1]=e,P[2]=h,P[3]=l;c=K[0];e=K[1];h=K[2];l=K[3];if(c!==L[0]||e!==L[1]||h!==L[2]||l!==
L[3])y.viewport(c,e,h,l),L[0]=c,L[1]=e,L[2]=h,L[3]=l}y.lineWidth(1);w.lineWidth=1;if(c=w.profile)a=performance.now(),r.count++;y.useProgram(q.program);S.setVAO(null);e=n.location;h=k[e];h.buffer||y.enableVertexAttribArray(e);if(h.type!==m.dtype||2!==h.size||h.buffer!==m||!1!==h.normalized||0!==h.offset||0!==h.stride)y.bindBuffer(34962,m.buffer),y.vertexAttribPointer(e,2,m.dtype,!1,0,0),h.type=m.dtype,h.size=2,h.buffer=m,h.normalized=!1,h.offset=0,h.stride=0;y.uniform4f(p.location,1,0,0,1);b&&y.bindBuffer(34963,
b.buffer.buffer);e=b.primType;h=b.vertCount-0;0<=h||d.commandRaise(g,f);h&&(y.drawElements(e,h,b.type,0<<(b.type-5121>>1)),w.dirty=!0,S.setVAO(null),c&&(r.cpuTime+=performance.now()-a))},scope:function(e,a,b){var k,l,g,n,p,v,q,y,t,z,A,H,E,F,J,Ea,K,L,M,N,O,S;k=G.lineWidth;G.lineWidth=1;if(l=w.profile)g=performance.now(),r.count++;n=D.elements;D.elements=c;p=D.offset;D.offset=0;v=c.vertCount-0;0<=v||d.commandRaise(h,f);q=D.count;D.count=v;y=c.primType;v=D.primitive;D.primitive=y;y=I[3];I[3]=da;t=B.buffer;
B.buffer=m;z=B.divisor;B.divisor=0;A=B.normalized;B.normalized=!1;H=B.offset;B.offset=0;E=B.size;B.size=0;F=B.state;B.state=1;J=B.stride;B.stride=0;Ea=B.type;B.type=m.dtype;K=B.w;B.w=0;L=B.x;B.x=0;M=B.y;B.y=0;N=B.z;B.z=0;O=x.vert;x.vert=2;S=x.frag;x.frag=1;w.dirty=!0;a(u,e,b);G.lineWidth=k;l&&(r.cpuTime+=performance.now()-g);D.elements=n;D.offset=p;D.count=q;D.primitive=v;I[3]=y;B.buffer=t;B.divisor=z;B.normalized=A;B.offset=H;B.size=E;B.state=F;B.stride=J;B.type=Ea;B.w=K;B.x=L;B.y=M;B.z=N;x.vert=
O;x.frag=S;w.dirty=!0},batch:function(c,a){var b,h,g;b=t.next;b!==t.cur&&(b?y.bindFramebuffer(36160,b.framebuffer):y.bindFramebuffer(36160,null),t.cur=b);if(w.dirty){var u,B;b=G.dither;b!==w.dither&&(b?y.enable(3024):y.disable(3024),w.dither=b);b=G.blend_enable;b!==w.blend_enable&&(b?y.enable(3042):y.disable(3042),w.blend_enable=b);b=H[0];g=H[1];u=H[2];B=H[3];if(b!==A[0]||g!==A[1]||u!==A[2]||B!==A[3])y.blendColor(b,g,u,B),A[0]=b,A[1]=g,A[2]=u,A[3]=B;b=ka[0];g=ka[1];if(b!==J[0]||g!==J[1])y.blendEquationSeparate(b,
g),J[0]=b,J[1]=g;b=F[0];g=F[1];u=F[2];B=F[3];if(b!==E[0]||g!==E[1]||u!==E[2]||B!==E[3])y.blendFuncSeparate(b,g,u,B),E[0]=b,E[1]=g,E[2]=u,E[3]=B;b=G.depth_enable;b!==w.depth_enable&&(b?y.enable(2929):y.disable(2929),w.depth_enable=b);b=G.depth_func;b!==w.depth_func&&(y.depthFunc(b),w.depth_func=b);b=ba[0];g=ba[1];if(b!==M[0]||g!==M[1])y.depthRange(b,g),M[0]=b,M[1]=g;b=G.depth_mask;b!==w.depth_mask&&(y.depthMask(b),w.depth_mask=b);b=ea[0];g=ea[1];u=ea[2];B=ea[3];if(b!==z[0]||g!==z[1]||u!==z[2]||B!==
z[3])y.colorMask(b,g,u,B),z[0]=b,z[1]=g,z[2]=u,z[3]=B;b=G.cull_enable;b!==w.cull_enable&&(b?y.enable(2884):y.disable(2884),w.cull_enable=b);b=G.cull_face;b!==w.cull_face&&(y.cullFace(b),w.cull_face=b);b=G.frontFace;b!==w.frontFace&&(y.frontFace(b),w.frontFace=b);b=G.polygonOffset_enable;b!==w.polygonOffset_enable&&(b?y.enable(32823):y.disable(32823),w.polygonOffset_enable=b);b=la[0];g=la[1];if(b!==oa[0]||g!==oa[1])y.polygonOffset(b,g),oa[0]=b,oa[1]=g;b=G.sample_alpha;b!==w.sample_alpha&&(b?y.enable(32926):
y.disable(32926),w.sample_alpha=b);b=G.sample_enable;b!==w.sample_enable&&(b?y.enable(32928):y.disable(32928),w.sample_enable=b);b=U[0];g=U[1];if(b!==V[0]||g!==V[1])y.sampleCoverage(b,g),V[0]=b,V[1]=g;b=G.stencil_enable;b!==w.stencil_enable&&(b?y.enable(2960):y.disable(2960),w.stencil_enable=b);b=G.stencil_mask;b!==w.stencil_mask&&(y.stencilMask(b),w.stencil_mask=b);b=N[0];g=N[1];u=N[2];if(b!==O[0]||g!==O[1]||u!==O[2])y.stencilFunc(b,g,u),O[0]=b,O[1]=g,O[2]=u;b=ra[0];g=ra[1];u=ra[2];B=ra[3];if(b!==
pa[0]||g!==pa[1]||u!==pa[2]||B!==pa[3])y.stencilOpSeparate(b,g,u,B),pa[0]=b,pa[1]=g,pa[2]=u,pa[3]=B;b=Q[0];g=Q[1];u=Q[2];B=Q[3];if(b!==R[0]||g!==R[1]||u!==R[2]||B!==R[3])y.stencilOpSeparate(b,g,u,B),R[0]=b,R[1]=g,R[2]=u,R[3]=B;b=G.scissor_enable;b!==w.scissor_enable&&(b?y.enable(3089):y.disable(3089),w.scissor_enable=b);b=T[0];g=T[1];u=T[2];B=T[3];if(b!==P[0]||g!==P[1]||u!==P[2]||B!==P[3])y.scissor(b,g,u,B),P[0]=b,P[1]=g,P[2]=u,P[3]=B;b=K[0];g=K[1];u=K[2];B=K[3];if(b!==L[0]||g!==L[1]||u!==L[2]||B!==
L[3])y.viewport(b,g,u,B),L[0]=b,L[1]=g,L[2]=u,L[3]=B}y.lineWidth(1);w.lineWidth=1;if(b=w.profile)h=performance.now(),r.count+=a;y.useProgram(v.program);S.setVAO(null);g=n.location;u=k[g];u.buffer||y.enableVertexAttribArray(g);if(u.type!==m.dtype||2!==u.size||u.buffer!==m||!1!==u.normalized||0!==u.offset||0!==u.stride)y.bindBuffer(34962,m.buffer),y.vertexAttribPointer(g,2,m.dtype,!1,0,0),u.type=m.dtype,u.size=2,u.buffer=m,u.normalized=!1,u.offset=0,u.stride=0;y.uniform4f(p.location,1,0,0,1);e&&y.bindBuffer(34963,
e.buffer.buffer);u=e.primType;B=e.vertCount-0;0<=B||d.commandRaise(l,f);for(g=0;g<a;++g)B&&y.drawElements(u,B,e.type,0<<(e.type-5121>>1));w.dirty=!0;S.setVAO(null);b&&(r.cpuTime+=performance.now()-h)}}},"$20,mouse,position,t,texture":function(a,d,f,r,q,m,b,g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I){var S,H,A,ka,J,F,E,ea,z,ba,M,la,oa,U,V,T,P,N,O,Q,R,ra,pa,K,L,da,X,ma,ga,Ba,va,ca,Da,ja,na,Aa;S=a.attributes;H=a.context;A=a.current;ka=a.draw;J=a.elements;F=a.framebuffer;E=a.gl;ea=a.isArrayLike;z=a.next;ba=
a.shader;M=a.uniforms;la=a.vao;oa=z.blend_color;U=A.blend_color;V=z.blend_equation;T=A.blend_equation;P=z.blend_func;N=A.blend_func;O=z.colorMask;Q=A.colorMask;R=z.depth_range;ra=A.depth_range;pa=z.polygonOffset_offset;K=A.polygonOffset_offset;L=z.sample_coverage;da=A.sample_coverage;X=z.scissor_box;ma=A.scissor_box;ga=z.stencil_func;Ba=A.stencil_func;va=z.stencil_opBack;ca=A.stencil_opBack;Da=z.stencil_opFront;ja=A.stencil_opFront;na=z.viewport;Aa=A.viewport;return{draw:function(e){var a,k,l,n;a=
F.next;a!==F.cur&&(a?E.bindFramebuffer(36160,a.framebuffer):E.bindFramebuffer(36160,null),F.cur=a);if(A.dirty){var p;a=z.dither;a!==A.dither&&(a?E.enable(3024):E.disable(3024),A.dither=a);a=z.blend_enable;a!==A.blend_enable&&(a?E.enable(3042):E.disable(3042),A.blend_enable=a);a=oa[0];l=oa[1];n=oa[2];p=oa[3];if(a!==U[0]||l!==U[1]||n!==U[2]||p!==U[3])E.blendColor(a,l,n,p),U[0]=a,U[1]=l,U[2]=n,U[3]=p;a=V[0];l=V[1];if(a!==T[0]||l!==T[1])E.blendEquationSeparate(a,l),T[0]=a,T[1]=l;a=P[0];l=P[1];n=P[2];
p=P[3];if(a!==N[0]||l!==N[1]||n!==N[2]||p!==N[3])E.blendFuncSeparate(a,l,n,p),N[0]=a,N[1]=l,N[2]=n,N[3]=p;a=z.depth_enable;a!==A.depth_enable&&(a?E.enable(2929):E.disable(2929),A.depth_enable=a);a=z.depth_func;a!==A.depth_func&&(E.depthFunc(a),A.depth_func=a);a=R[0];l=R[1];if(a!==ra[0]||l!==ra[1])E.depthRange(a,l),ra[0]=a,ra[1]=l;a=z.depth_mask;a!==A.depth_mask&&(E.depthMask(a),A.depth_mask=a);a=O[0];l=O[1];n=O[2];p=O[3];if(a!==Q[0]||l!==Q[1]||n!==Q[2]||p!==Q[3])E.colorMask(a,l,n,p),Q[0]=a,Q[1]=l,
Q[2]=n,Q[3]=p;a=z.cull_enable;a!==A.cull_enable&&(a?E.enable(2884):E.disable(2884),A.cull_enable=a);a=z.cull_face;a!==A.cull_face&&(E.cullFace(a),A.cull_face=a);a=z.frontFace;a!==A.frontFace&&(E.frontFace(a),A.frontFace=a);a=z.lineWidth;a!==A.lineWidth&&(E.lineWidth(a),A.lineWidth=a);a=z.polygonOffset_enable;a!==A.polygonOffset_enable&&(a?E.enable(32823):E.disable(32823),A.polygonOffset_enable=a);a=pa[0];l=pa[1];if(a!==K[0]||l!==K[1])E.polygonOffset(a,l),K[0]=a,K[1]=l;a=z.sample_alpha;a!==A.sample_alpha&&
(a?E.enable(32926):E.disable(32926),A.sample_alpha=a);a=z.sample_enable;a!==A.sample_enable&&(a?E.enable(32928):E.disable(32928),A.sample_enable=a);a=L[0];l=L[1];if(a!==da[0]||l!==da[1])E.sampleCoverage(a,l),da[0]=a,da[1]=l;a=z.stencil_enable;a!==A.stencil_enable&&(a?E.enable(2960):E.disable(2960),A.stencil_enable=a);a=z.stencil_mask;a!==A.stencil_mask&&(E.stencilMask(a),A.stencil_mask=a);a=ga[0];l=ga[1];n=ga[2];if(a!==Ba[0]||l!==Ba[1]||n!==Ba[2])E.stencilFunc(a,l,n),Ba[0]=a,Ba[1]=l,Ba[2]=n;a=Da[0];
l=Da[1];n=Da[2];p=Da[3];if(a!==ja[0]||l!==ja[1]||n!==ja[2]||p!==ja[3])E.stencilOpSeparate(a,l,n,p),ja[0]=a,ja[1]=l,ja[2]=n,ja[3]=p;a=va[0];l=va[1];n=va[2];p=va[3];if(a!==ca[0]||l!==ca[1]||n!==ca[2]||p!==ca[3])E.stencilOpSeparate(a,l,n,p),ca[0]=a,ca[1]=l,ca[2]=n,ca[3]=p;a=z.scissor_enable;a!==A.scissor_enable&&(a?E.enable(3089):E.disable(3089),A.scissor_enable=a);a=X[0];l=X[1];n=X[2];p=X[3];if(a!==ma[0]||l!==ma[1]||n!==ma[2]||p!==ma[3])E.scissor(a,l,n,p),ma[0]=a,ma[1]=l,ma[2]=n,ma[3]=p;a=na[0];l=na[1];
n=na[2];p=na[3];if(a!==Aa[0]||l!==Aa[1]||n!==Aa[2]||p!==Aa[3])E.viewport(a,l,n,p),Aa[0]=a,Aa[1]=l,Aa[2]=n,Aa[3]=p;A.dirty=!1}if(a=A.profile)k=performance.now(),r.count++;E.useProgram(q.program);la.setVAO(null);l=G.location;n=S[l];n.buffer||E.enableVertexAttribArray(l);if(n.type!==m.dtype||2!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||0!==n.stride)E.bindBuffer(34962,m.buffer),E.vertexAttribPointer(l,2,m.dtype,!1,0,0),n.type=m.dtype,n.size=2,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=
0;l=b.call(this,H,e,0);ea(l)&&2===l.length||d.commandRaise(g,f);E.uniform2f(y.location,l[0],l[1]);e=c.call(this,H,e,0);"number"!==typeof e&&d.commandRaise(h,f);E.uniform1f(x.location,e);E.uniform1i(I.location,B.bind());(e=ka.elements)?E.bindBuffer(34963,e.buffer.buffer):la.currentVAO&&(e=J.getElements(la.currentVAO.elements))&&E.bindBuffer(34963,e.buffer.buffer);l=ka.primitive;n=ka.offset;e?E.drawElements(l,3,e.type,n<<(e.type-5121>>1)):E.drawArrays(l,n,3);la.setVAO(null);a&&(r.cpuTime+=performance.now()-
k);B.unbind()},scope:function(c,a,b){var d,k,h,g,n,f,u,w,B,q,D,C,y,t,z,G,x,I,E,F;if(d=A.profile)k=performance.now(),r.count++;h=ka.count;ka.count=3;g=v.call(this,H,c,b);n=M[3];M[3]=g;f=e.call(this,H,c,b);g=M[4];M[4]=f;f=M[5];M[5]=l;u=p.buffer;p.buffer=m;w=p.divisor;p.divisor=0;B=p.normalized;p.normalized=!1;q=p.offset;p.offset=0;D=p.size;p.size=0;C=p.state;p.state=1;y=p.stride;p.stride=0;t=p.type;p.type=m.dtype;z=p.w;p.w=0;G=p.x;p.x=0;x=p.y;p.y=0;I=p.z;p.z=0;E=ba.vert;ba.vert=2;F=ba.frag;ba.frag=
1;a(H,c,b);d&&(r.cpuTime+=performance.now()-k);ka.count=h;M[3]=n;M[4]=g;M[5]=f;p.buffer=u;p.divisor=w;p.normalized=B;p.offset=q;p.size=D;p.state=C;p.stride=y;p.type=t;p.w=z;p.x=G;p.y=x;p.z=I;ba.vert=E;ba.frag=F},batch:function(c,a){var b,e,h;b=F.next;b!==F.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),F.cur=b);if(A.dirty){var l,g,p;b=z.dither;b!==A.dither&&(b?E.enable(3024):E.disable(3024),A.dither=b);b=z.blend_enable;b!==A.blend_enable&&(b?E.enable(3042):E.disable(3042),
A.blend_enable=b);b=oa[0];l=oa[1];g=oa[2];p=oa[3];if(b!==U[0]||l!==U[1]||g!==U[2]||p!==U[3])E.blendColor(b,l,g,p),U[0]=b,U[1]=l,U[2]=g,U[3]=p;b=V[0];l=V[1];if(b!==T[0]||l!==T[1])E.blendEquationSeparate(b,l),T[0]=b,T[1]=l;b=P[0];l=P[1];g=P[2];p=P[3];if(b!==N[0]||l!==N[1]||g!==N[2]||p!==N[3])E.blendFuncSeparate(b,l,g,p),N[0]=b,N[1]=l,N[2]=g,N[3]=p;b=z.depth_enable;b!==A.depth_enable&&(b?E.enable(2929):E.disable(2929),A.depth_enable=b);b=z.depth_func;b!==A.depth_func&&(E.depthFunc(b),A.depth_func=b);
b=R[0];l=R[1];if(b!==ra[0]||l!==ra[1])E.depthRange(b,l),ra[0]=b,ra[1]=l;b=z.depth_mask;b!==A.depth_mask&&(E.depthMask(b),A.depth_mask=b);b=O[0];l=O[1];g=O[2];p=O[3];if(b!==Q[0]||l!==Q[1]||g!==Q[2]||p!==Q[3])E.colorMask(b,l,g,p),Q[0]=b,Q[1]=l,Q[2]=g,Q[3]=p;b=z.cull_enable;b!==A.cull_enable&&(b?E.enable(2884):E.disable(2884),A.cull_enable=b);b=z.cull_face;b!==A.cull_face&&(E.cullFace(b),A.cull_face=b);b=z.frontFace;b!==A.frontFace&&(E.frontFace(b),A.frontFace=b);b=z.lineWidth;b!==A.lineWidth&&(E.lineWidth(b),
A.lineWidth=b);b=z.polygonOffset_enable;b!==A.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),A.polygonOffset_enable=b);b=pa[0];l=pa[1];if(b!==K[0]||l!==K[1])E.polygonOffset(b,l),K[0]=b,K[1]=l;b=z.sample_alpha;b!==A.sample_alpha&&(b?E.enable(32926):E.disable(32926),A.sample_alpha=b);b=z.sample_enable;b!==A.sample_enable&&(b?E.enable(32928):E.disable(32928),A.sample_enable=b);b=L[0];l=L[1];if(b!==da[0]||l!==da[1])E.sampleCoverage(b,l),da[0]=b,da[1]=l;b=z.stencil_enable;b!==A.stencil_enable&&
(b?E.enable(2960):E.disable(2960),A.stencil_enable=b);b=z.stencil_mask;b!==A.stencil_mask&&(E.stencilMask(b),A.stencil_mask=b);b=ga[0];l=ga[1];g=ga[2];if(b!==Ba[0]||l!==Ba[1]||g!==Ba[2])E.stencilFunc(b,l,g),Ba[0]=b,Ba[1]=l,Ba[2]=g;b=Da[0];l=Da[1];g=Da[2];p=Da[3];if(b!==ja[0]||l!==ja[1]||g!==ja[2]||p!==ja[3])E.stencilOpSeparate(b,l,g,p),ja[0]=b,ja[1]=l,ja[2]=g,ja[3]=p;b=va[0];l=va[1];g=va[2];p=va[3];if(b!==ca[0]||l!==ca[1]||g!==ca[2]||p!==ca[3])E.stencilOpSeparate(b,l,g,p),ca[0]=b,ca[1]=l,ca[2]=g,
ca[3]=p;b=z.scissor_enable;b!==A.scissor_enable&&(b?E.enable(3089):E.disable(3089),A.scissor_enable=b);b=X[0];l=X[1];g=X[2];p=X[3];if(b!==ma[0]||l!==ma[1]||g!==ma[2]||p!==ma[3])E.scissor(b,l,g,p),ma[0]=b,ma[1]=l,ma[2]=g,ma[3]=p;b=na[0];l=na[1];g=na[2];p=na[3];if(b!==Aa[0]||l!==Aa[1]||g!==Aa[2]||p!==Aa[3])E.viewport(b,l,g,p),Aa[0]=b,Aa[1]=l,Aa[2]=g,Aa[3]=p;A.dirty=!1}if(b=A.profile)e=performance.now(),r.count+=a;E.useProgram(n.program);la.setVAO(null);l=G.location;g=S[l];g.buffer||E.enableVertexAttribArray(l);
if(g.type!==m.dtype||2!==g.size||g.buffer!==m||!1!==g.normalized||0!==g.offset||0!==g.stride)E.bindBuffer(34962,m.buffer),E.vertexAttribPointer(l,2,m.dtype,!1,0,0),g.type=m.dtype,g.size=2,g.buffer=m,g.normalized=!1,g.offset=0,g.stride=0;l=k.call(this,H,void 0,h);ea(l)&&2===l.length||d.commandRaise(u,f);E.uniform2f(y.location,l[0],l[1]);h=w.call(this,H,void 0,h);"number"!==typeof h&&d.commandRaise(D,f);E.uniform1f(x.location,h);E.uniform1i(I.location,t.bind());(l=ka.elements)?E.bindBuffer(34963,l.buffer.buffer):
la.currentVAO&&(l=J.getElements(la.currentVAO.elements))&&E.bindBuffer(34963,l.buffer.buffer);g=ka.primitive;p=ka.offset;for(h=0;h<a;++h)l?E.drawElements(g,3,l.type,p<<(l.type-5121>>1)):E.drawArrays(g,p,3);t.unbind();la.setVAO(null);b&&(r.cpuTime+=performance.now()-e)}}}}},{}],25:[function(f,t,x){var a=f("./sorted-object-keys");t.exports=function(d,f){for(var r=a(f),q=0;q<r.length;++q)d[r[q]]=f[r[q]];return d}},{"./sorted-object-keys":34}],26:[function(f,t,x){function a(a,d,f,b,g,c){for(var h=0;h<
d;++h)for(var B=a[h],v=0;v<f;++v)for(var e=B[v],l=0;l<b;++l)g[c++]=e[l]}function d(f,q,m,b,g){for(var c=1,h=m+1;h<q.length;++h)c*=q[h];var B=q[m];if(4===q.length-m){var v=q[m+1],e=q[m+2];q=q[m+3];for(h=0;h<B;++h)a(f[h],v,e,q,b,g),g+=c}else for(h=0;h<B;++h)d(f[h],q,m+1,b,g),g+=c}var C=f("./pool");t.exports={shape:function(a){for(var d=[];a.length;a=a[0])d.push(a.length);return d},flatten:function(f,q,m,b){var g=1;if(q.length)for(var c=0;c<q.length;++c)g*=q[c];else g=0;m=b||C.allocType(m,g);switch(q.length){case 0:break;
case 1:b=q[0];for(q=0;q<b;++q)m[q]=f[q];break;case 2:b=q[0];q=q[1];for(c=g=0;c<b;++c)for(var h=f[c],B=0;B<q;++B)m[g++]=h[B];break;case 3:a(f,q[0],q[1],q[2],m,0);break;default:d(f,q,0,m,0)}return m}}},{"./pool":32}],27:[function(f,t,x){var a=f("./is-typed-array");t.exports=function(d){return Array.isArray(d)||a(d)}},{"./is-typed-array":30}],28:[function(f,t,x){var a=f("./is-typed-array");t.exports=function(d){return!!d&&"object"===typeof d&&Array.isArray(d.shape)&&Array.isArray(d.stride)&&"number"===
typeof d.offset&&d.shape.length===d.stride.length&&(Array.isArray(d.data)||a(d.data))}},{"./is-typed-array":30}],29:[function(f,t,x){t.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(f,t,x){t.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(f,t,x){t.exports=
function(a,d){for(var f=Array(a),r=0;r<a;++r)f[r]=d(r);return f}},{}],32:[function(f,t,x){function a(a){var d,f;d=(65535<a)<<4;a>>>=d;f=(255<a)<<3;a>>>=f;d|=f;f=(15<a)<<2;a>>>=f;d|=f;f=(3<a)<<1;return d|f|a>>>f>>1}function d(){function d(b){a:{for(var g=16;268435456>=g;g*=16)if(b<=g){b=g;break a}b=0}g=m[a(b)>>2];return 0<g.length?g.pop():new ArrayBuffer(b)}function f(b){m[a(b.byteLength)>>2].push(b)}var m=C(8,function(){return[]});return{alloc:d,free:f,allocType:function(b,a){var c=null;switch(b){case 5120:c=
new Int8Array(d(a),0,a);break;case 5121:c=new Uint8Array(d(a),0,a);break;case 5122:c=new Int16Array(d(2*a),0,a);break;case 5123:c=new Uint16Array(d(2*a),0,a);break;case 5124:c=new Int32Array(d(4*a),0,a);break;case 5125:c=new Uint32Array(d(4*a),0,a);break;case 5126:c=new Float32Array(d(4*a),0,a);break;default:return null}return c.length!==a?c.subarray(0,a):c},freeType:function(b){f(b.buffer)}}}var C=f("./loop");f=d();f.zero=d();t.exports=f},{"./loop":31}],33:[function(f,t,x){t.exports={next:"function"===
typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(f,t,x){t.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(f,t,x){var a=f("./pool"),d=new Float32Array(1),C=new Uint32Array(d.buffer);t.exports=function(f){for(var q=a.allocType(5123,f.length),m=0;m<f.length;++m)if(isNaN(f[m]))q[m]=65535;else if(Infinity===
f[m])q[m]=31744;else if(-Infinity===f[m])q[m]=64512;else{d[0]=f[m];var b=C[0],g=b>>>31<<15,c=(b<<1>>>24)-127,b=b>>13&1023;q[m]=-24>c?g:-14>c?g+(b+1024>>-14-c):15<c?g+31744:g+(c+15<<10)+b}return q}},{"./pool":32}],36:[function(f,t,x){var a=f("./sorted-object-keys");t.exports=function(d){return a(d).map(function(a){return d[a]})}},{"./sorted-object-keys":34}],37:[function(f,t,x){function a(b,a,c){function d(){var a=window.innerWidth,l=window.innerHeight;b!==document.body&&(l=f.getBoundingClientRect(),
a=l.right-l.left,l=l.bottom-l.top);f.width=c*a;f.height=c*l}var f=document.createElement("canvas");m(f.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(f);b===document.body&&(f.style.position="absolute",m(b.style,{margin:0,padding:0}));var v;b!==document.body&&"function"===typeof ResizeObserver?(v=new ResizeObserver(function(){setTimeout(d)}),v.observe(b)):window.addEventListener("resize",d,!1);d();return{canvas:f,onDestroy:function(){v?v.disconnect():window.removeEventListener("resize",
d);b.removeChild(f)}}}function d(a,d){function c(c){try{return a.getContext(c,d)}catch(f){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function C(a){if("string"===typeof a)return a.split();q(Array.isArray(a),"invalid extension array");return a}function r(a){return"string"===typeof a?(q("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var q=f("./util/check"),m=f("./util/extend");t.exports=function(b){var g=b||{},c,h,f,m;
b={};var e=[],l=[],p="undefined"===typeof window?1:window.devicePixelRatio,n=!1,k=function(c){c&&q.raise(c)},u=function(){};"string"===typeof g?(q("undefined"!==typeof document,"selector queries only supported in DOM environments"),c=document.querySelector(g),q(c,"invalid query string for element")):"object"===typeof g?"string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?c=g:"function"===typeof g.drawArrays||"function"===typeof g.drawElements?
(m=g,f=m.canvas):(q.constructor(g),"gl"in g?m=g.gl:"canvas"in g?f=r(g.canvas):"container"in g&&(h=r(g.container)),"attributes"in g&&(b=g.attributes,q.type(b,"object","invalid context attributes")),"extensions"in g&&(e=C(g.extensions)),"optionalExtensions"in g&&(l=C(g.optionalExtensions)),"onDone"in g&&(q.type(g.onDone,"function","invalid or missing onDone callback"),k=g.onDone),"profile"in g&&(n=!!g.profile),"pixelRatio"in g&&(p=+g.pixelRatio,q(0<p,"invalid pixel ratio"))):q.raise("invalid arguments to regl");
c&&("canvas"===c.nodeName.toLowerCase()?f=c:h=c);if(!m){if(!f){q("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");c=a(h||document.body,k,p);if(!c)return null;f=c.canvas;u=c.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);m=d(f,b)}return m?{gl:m,canvas:f,container:h,extensions:e,optionalExtensions:l,pixelRatio:p,profile:n,onDone:k,onDestroy:u}:(u(),k("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(f,t,x){var a=f("element-size");t.exports=function(f,r,q){function m(){var g=m.parent||f.parentNode;if("function"===typeof g)var c=g(d)||d,g=c[0],c=c[1];else g&&g!==document.body?(c=a(g),g=c[0]|0,c=c[1]|0):(g=window.innerWidth,c=window.innerHeight);b?(f.setAttribute("width",g*m.scale+"px"),f.setAttribute("height",c*m.scale+"px")):(f.width=g*m.scale,f.height=c*m.scale);f.style.width=g+"px";f.style.height=c+"px";return m}var b="SVG"===f.nodeName.toUpperCase();
f.style.position=f.style.position||"absolute";f.style.top=0;f.style.left=0;m.scale=parseFloat(q||1);m.parent=r;return m()};var d=new Float32Array(2)},{"element-size":42}],39:[function(f,t,x){var a=f("orbit-camera"),d=f("scroll-speed"),C=f("mouse-position"),r=f("mouse-pressed"),q=f("key-pressed");t.exports=function(f,b){b=b||{};b.pan=!1!==b.pan;b.scale=!1!==b.scale;b.rotate=!1!==b.rotate;var g=d(f,b.scale),c=r(f,b.rotate),h=C(f),B=a([0,10,30],[0,0,0],[0,1,0]);B.tick=function(){var a=q("<control>")||
q("<alt>"),e=q("<shift>"),d=f.height,p=f.width;b.rotate&&c.left&&!a&&!e&&B.rotate([h.x/p-.5,h.y/d-.5],[h.prevX/p-.5,h.prevY/d-.5]);(b.pan&&c.right||c.left&&a&&!e)&&B.pan([1*(h.x-h.prevX)/p,1*(h.y-h.prevY)/d]);b.scale&&g[1]&&(B.distance*=Math.exp(g[1]/d));if(b.scale&&(c.middle||c.left&&!a&&e)){a=h.y-h.prevY;if(!a)return;B.distance*=Math.exp(a/d)}g.flush();h.flush()};return B}},{"key-pressed":121,"mouse-position":40,"mouse-pressed":41,"orbit-camera":122,"scroll-speed":125}],40:[function(f,t,x){var a=
f("events/");t.exports=function(d,f){var r=new a;r.x=0;r.y=0;r.prevX=0;r.prevY=0;r.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===typeof window)return r;f=f||d||window;d=d||document.body;f.addEventListener("mousemove",d===document.body||d===window?function(a){r.prevX=r.x;r.prevY=r.y;r.x=a.clientX;r.y=a.clientY;r.emit("move",a)}:function(a){r.prevX=r.x;r.prevY=r.y;var f=d.getBoundingClientRect();r.x=a.clientX-f.left;r.y=a.clientY-f.top;r.emit("move",a)},!1);return r}},{"events/":43}],
41:[function(f,t,x){var a=f("events/"),d=["left","middle","right"];t.exports=function(f,r){function q(a){b.right=!1;b[d[a.button]]=!0;b.emit("down",a);if(r){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function m(a){b.right=!1;b[d[a.button]]=!1;b.emit("up",a);r&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var b=new a;b.left=!1;b.right=!1;b.middle=!1;"undefined"!==typeof window&&(f=f||window,f.addEventListener("mousedown",q,!1),f.addEventListener("mouseup",m,
!1),r&&f.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return b}},{"events/":43}],42:[function(f,t,x){function a(a){return parseFloat(a)||0}t.exports=function(d){if(d===window||d===document.body)return[window.innerWidth,window.innerHeight];if(!d.parentNode){var f=!0;document.body.appendChild(d)}var r=d.getBoundingClientRect(),q=getComputedStyle(d),m=(r.height|0)+a(q.getPropertyValue("margin-top"))+a(q.getPropertyValue("margin-bottom")),r=(r.width|
0)+a(q.getPropertyValue("margin-left"))+a(q.getPropertyValue("margin-right"));f&&document.body.removeChild(d);return[r,m]}},{}],43:[function(f,t,x){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function d(a){return"function"===typeof a}function C(a){return"object"===typeof a&&null!==a}t.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||
0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var f,m,b,g;this._events||(this._events={});if("error"===a&&(!this._events.error||C(this._events.error)&&!this._events.error.length)){f=arguments[1];if(f instanceof Error)throw f;m=Error('Uncaught, unspecified "error" event. ('+f+")");m.context=f;throw m;}m=this._events[a];if(void 0===m)return!1;if(d(m))switch(arguments.length){case 1:m.call(this);break;case 2:m.call(this,arguments[1]);
break;case 3:m.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),m.apply(this,f)}else if(C(m))for(f=Array.prototype.slice.call(arguments,1),g=m.slice(),m=g.length,b=0;b<m;b++)g[b].apply(this,f);return!0};a.prototype.addListener=function(f,q){var m;if(!d(q))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",f,d(q.listener)?q.listener:q);this._events[f]?C(this._events[f])?this._events[f].push(q):
this._events[f]=[this._events[f],q]:this._events[f]=q;C(this._events[f])&&!this._events[f].warned&&(m=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<m&&this._events[f].length>m&&(this._events[f].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[f].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;
a.prototype.once=function(a,f){function m(){this.removeListener(a,m);b||(b=!0,f.apply(this,arguments))}if(!d(f))throw TypeError("listener must be a function");var b=!1;m.listener=f;this.on(a,m);return this};a.prototype.removeListener=function(a,f){var m,b,g;if(!d(f))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;m=this._events[a];g=m.length;b=-1;if(m===f||d(m.listener)&&m.listener===f)delete this._events[a],this._events.removeListener&&this.emit("removeListener",
a,f);else if(C(m)){for(;0<g--;)if(m[g]===f||m[g].listener&&m[g].listener===f){b=g;break}if(0>b)return this;1===m.length?(m.length=0,delete this._events[a]):m.splice(b,1);this._events.removeListener&&this.emit("removeListener",a,f)}return this};a.prototype.removeAllListeners=function(a){var f;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(f in this._events)"removeListener"!==
f&&this.removeAllListeners(f);this.removeAllListeners("removeListener");this._events={};return this}f=this._events[a];if(d(f))this.removeListener(a,f);else if(f)for(;f.length;)this.removeListener(a,f[f.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(d(a))return 1;if(a)return a.length}return 0};
a.listenerCount=function(a,d){return a.listenerCount(d)}},{}],44:[function(f,t,x){t.exports=function(a,d){var f=d[0],r=d[1],q=d[2],m=d[3],b=d[4],g=d[5],c=d[6],h=d[7],B=d[8],v=d[9],e=d[10],l=d[11],p=d[12],n=d[13],k=d[14],u=d[15];a[0]=g*(e*u-l*k)-v*(c*u-h*k)+n*(c*l-h*e);a[1]=-(r*(e*u-l*k)-v*(q*u-m*k)+n*(q*l-m*e));a[2]=r*(c*u-h*k)-g*(q*u-m*k)+n*(q*h-m*c);a[3]=-(r*(c*l-h*e)-g*(q*l-m*e)+v*(q*h-m*c));a[4]=-(b*(e*u-l*k)-B*(c*u-h*k)+p*(c*l-h*e));a[5]=f*(e*u-l*k)-B*(q*u-m*k)+p*(q*l-m*e);a[6]=-(f*(c*u-h*k)-
b*(q*u-m*k)+p*(q*h-m*c));a[7]=f*(c*l-h*e)-b*(q*l-m*e)+B*(q*h-m*c);a[8]=b*(v*u-l*n)-B*(g*u-h*n)+p*(g*l-h*v);a[9]=-(f*(v*u-l*n)-B*(r*u-m*n)+p*(r*l-m*v));a[10]=f*(g*u-h*n)-b*(r*u-m*n)+p*(r*h-m*g);a[11]=-(f*(g*l-h*v)-b*(r*l-m*v)+B*(r*h-m*g));a[12]=-(b*(v*k-e*n)-B*(g*k-c*n)+p*(g*e-c*v));a[13]=f*(v*k-e*n)-B*(r*k-q*n)+p*(r*e-q*v);a[14]=-(f*(g*k-c*n)-b*(r*k-q*n)+p*(r*c-q*g));a[15]=f*(g*e-c*v)-b*(r*e-q*v)+B*(r*c-q*g);return a}},{}],45:[function(f,t,x){t.exports=function(a){var d=new Float32Array(16);d[0]=
a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d}},{}],46:[function(f,t,x){t.exports=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a}},{}],47:[function(f,t,x){t.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;
a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(f,t,x){t.exports=function(a){var d=a[0],f=a[1],r=a[2],q=a[3],m=a[4],b=a[5],g=a[6],c=a[7],h=a[8],B=a[9],v=a[10],e=a[11],l=a[12],p=a[13],n=a[14];a=a[15];return(d*b-f*m)*(v*a-e*n)-(d*g-r*m)*(B*a-e*p)+(d*c-q*m)*(B*n-v*p)+(f*g-r*b)*(h*a-e*l)-(f*c-q*b)*(h*n-v*l)+(r*c-q*g)*(h*p-B*l)}},{}],49:[function(f,t,x){t.exports=function(a,d){var f=d[0],r=d[1],q=d[2],m=d[3],b=f+f,g=r+r,c=q+q,
f=f*b,h=r*b,r=r*g,B=q*b,v=q*g,q=q*c,b=m*b,g=m*g,m=m*c;a[0]=1-r-q;a[1]=h+m;a[2]=B-g;a[3]=0;a[4]=h-m;a[5]=1-f-q;a[6]=v+b;a[7]=0;a[8]=B+g;a[9]=v-b;a[10]=1-f-r;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(f,t,x){t.exports=function(a,d,f){var r,q,m=f[0],b=f[1];f=f[2];r=Math.sqrt(m*m+b*b+f*f);if(1E-6>Math.abs(r))return null;r=1/r;m*=r;b*=r;f*=r;r=Math.sin(d);d=Math.cos(d);q=1-d;a[0]=m*m*q+d;a[1]=b*m*q+f*r;a[2]=f*m*q-b*r;a[3]=0;a[4]=m*b*q-f*r;a[5]=b*b*q+d;a[6]=f*b*q+m*r;a[7]=0;a[8]=
m*f*q+b*r;a[9]=b*f*q-m*r;a[10]=f*f*q+d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(f,t,x){t.exports=function(a,d,f){var r=d[0],q=d[1],m=d[2],b=d[3],g=r+r,c=q+q,h=m+m;d=r*g;var B=r*c,r=r*h,v=q*c,q=q*h,m=m*h,g=b*g,c=b*c,b=b*h;a[0]=1-(v+m);a[1]=B+b;a[2]=r-c;a[3]=0;a[4]=B-b;a[5]=1-(d+m);a[6]=q+g;a[7]=0;a[8]=r+c;a[9]=q-g;a[10]=1-(d+v);a[11]=0;a[12]=f[0];a[13]=f[1];a[14]=f[2];a[15]=1;return a}},{}],52:[function(f,t,x){t.exports=function(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;
a[5]=d[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(f,t,x){t.exports=function(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}},{}],54:[function(f,t,x){t.exports=function(a,d){var f=Math.sin(d),r=Math.cos(d);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=r;a[6]=f;a[7]=0;a[8]=0;a[9]=-f;a[10]=r;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(f,
t,x){t.exports=function(a,d){var f=Math.sin(d),r=Math.cos(d);a[0]=r;a[1]=0;a[2]=-f;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=f;a[9]=0;a[10]=r;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],56:[function(f,t,x){t.exports=function(a,d){var f=Math.sin(d),r=Math.cos(d);a[0]=r;a[1]=f;a[2]=0;a[3]=0;a[4]=-f;a[5]=r;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(f,t,x){t.exports=function(a,d,f,r,q,m,b){var g=1/(f-d),c=1/(q-r),h=1/(m-b);a[0]=2*m*
g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*m*c;a[6]=0;a[7]=0;a[8]=(f+d)*g;a[9]=(q+r)*c;a[10]=(b+m)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=b*m*2*h;a[15]=0;return a}},{}],58:[function(f,t,x){t.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(f,t,x){t.exports={create:f("./create"),clone:f("./clone"),copy:f("./copy"),identity:f("./identity"),transpose:f("./transpose"),invert:f("./invert"),adjoint:f("./adjoint"),
determinant:f("./determinant"),multiply:f("./multiply"),translate:f("./translate"),scale:f("./scale"),rotate:f("./rotate"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),fromRotation:f("./fromRotation"),fromRotationTranslation:f("./fromRotationTranslation"),fromScaling:f("./fromScaling"),fromTranslation:f("./fromTranslation"),fromXRotation:f("./fromXRotation"),fromYRotation:f("./fromYRotation"),fromZRotation:f("./fromZRotation"),fromQuat:f("./fromQuat"),frustum:f("./frustum"),
perspective:f("./perspective"),perspectiveFromFieldOfView:f("./perspectiveFromFieldOfView"),ortho:f("./ortho"),lookAt:f("./lookAt"),str:f("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,
"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(f,t,x){t.exports=function(a,d){var f=d[0],r=d[1],q=d[2],m=d[3],b=d[4],g=d[5],c=d[6],h=d[7],B=d[8],v=d[9],e=d[10],l=d[11],p=d[12],n=d[13],k=d[14],u=d[15],w=f*g-r*b,D=f*c-q*b,t=f*h-m*b,y=r*c-q*g,G=r*h-m*g,x=q*h-m*c,I=B*n-v*p,S=B*k-e*p,H=B*u-l*p,A=v*k-e*n,ka=v*u-l*n,J=e*u-l*k,F=w*J-D*ka+t*A+y*H-G*S+x*I;if(!F)return null;F=1/F;a[0]=(g*J-
c*ka+h*A)*F;a[1]=(q*ka-r*J-m*A)*F;a[2]=(n*x-k*G+u*y)*F;a[3]=(e*G-v*x-l*y)*F;a[4]=(c*H-b*J-h*S)*F;a[5]=(f*J-q*H+m*S)*F;a[6]=(k*t-p*x-u*D)*F;a[7]=(B*x-e*t+l*D)*F;a[8]=(b*ka-g*H+h*I)*F;a[9]=(r*H-f*ka-m*I)*F;a[10]=(p*G-n*t+u*w)*F;a[11]=(v*t-B*G-l*w)*F;a[12]=(g*S-b*A-c*I)*F;a[13]=(f*A-r*S+q*I)*F;a[14]=(n*D-p*y-k*w)*F;a[15]=(B*y-v*D+e*w)*F;return a}},{}],61:[function(f,t,x){var a=f("./identity");t.exports=function(d,f,r,q){var m,b,g,c,h,B,v,e,l=f[0],p=f[1];f=f[2];g=q[0];c=q[1];b=q[2];v=r[0];q=r[1];m=r[2];
if(1E-6>Math.abs(l-v)&&1E-6>Math.abs(p-q)&&1E-6>Math.abs(f-m))return a(d);r=l-v;q=p-q;v=f-m;e=1/Math.sqrt(r*r+q*q+v*v);r*=e;q*=e;v*=e;m=c*v-b*q;b=b*r-g*v;g=g*q-c*r;(e=Math.sqrt(m*m+b*b+g*g))?(e=1/e,m*=e,b*=e,g*=e):g=b=m=0;c=q*g-v*b;h=v*m-r*g;B=r*b-q*m;(e=Math.sqrt(c*c+h*h+B*B))?(e=1/e,c*=e,h*=e,B*=e):B=h=c=0;d[0]=m;d[1]=c;d[2]=r;d[3]=0;d[4]=b;d[5]=h;d[6]=q;d[7]=0;d[8]=g;d[9]=B;d[10]=v;d[11]=0;d[12]=-(m*l+b*p+g*f);d[13]=-(c*l+h*p+B*f);d[14]=-(r*l+q*p+v*f);d[15]=1;return d}},{"./identity":58}],62:[function(f,
t,x){t.exports=function(a,d,f){var r=d[0],q=d[1],m=d[2],b=d[3],g=d[4],c=d[5],h=d[6],B=d[7],v=d[8],e=d[9],l=d[10],p=d[11],n=d[12],k=d[13],u=d[14];d=d[15];var w=f[0],D=f[1],t=f[2],y=f[3];a[0]=w*r+D*g+t*v+y*n;a[1]=w*q+D*c+t*e+y*k;a[2]=w*m+D*h+t*l+y*u;a[3]=w*b+D*B+t*p+y*d;w=f[4];D=f[5];t=f[6];y=f[7];a[4]=w*r+D*g+t*v+y*n;a[5]=w*q+D*c+t*e+y*k;a[6]=w*m+D*h+t*l+y*u;a[7]=w*b+D*B+t*p+y*d;w=f[8];D=f[9];t=f[10];y=f[11];a[8]=w*r+D*g+t*v+y*n;a[9]=w*q+D*c+t*e+y*k;a[10]=w*m+D*h+t*l+y*u;a[11]=w*b+D*B+t*p+y*d;w=f[12];
D=f[13];t=f[14];y=f[15];a[12]=w*r+D*g+t*v+y*n;a[13]=w*q+D*c+t*e+y*k;a[14]=w*m+D*h+t*l+y*u;a[15]=w*b+D*B+t*p+y*d;return a}},{}],63:[function(f,t,x){t.exports=function(a,d,f,r,q,m,b){var g=1/(d-f),c=1/(r-q),h=1/(m-b);a[0]=-2*g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*h;a[11]=0;a[12]=(d+f)*g;a[13]=(q+r)*c;a[14]=(b+m)*h;a[15]=1;return a}},{}],64:[function(f,t,x){t.exports=function(a,d,f,r,q){d=1/Math.tan(d/2);var m=1/(r-q);a[0]=d/f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=
0;a[7]=0;a[8]=0;a[9]=0;a[10]=(q+r)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*q*r*m;a[15]=0;return a}},{}],65:[function(f,t,x){t.exports=function(a,d,f,r){var q=Math.tan(d.upDegrees*Math.PI/180),m=Math.tan(d.downDegrees*Math.PI/180),b=Math.tan(d.leftDegrees*Math.PI/180);d=Math.tan(d.rightDegrees*Math.PI/180);var g=2/(b+d),c=2/(q+m);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=-((b-d)*g*.5);a[9]=(q-m)*c*.5;a[10]=r/(f-r);a[11]=-1;a[12]=0;a[13]=0;a[14]=r*f/(f-r);a[15]=0;return a}},{}],66:[function(f,
t,x){t.exports=function(a,d,f,r){var q=r[0],m=r[1];r=r[2];var b=Math.sqrt(q*q+m*m+r*r),g,c,h,B,v,e,l,p,n,k,u,w,D,t,y,G,x,I,S,H;if(1E-6>Math.abs(b))return null;b=1/b;q*=b;m*=b;r*=b;g=Math.sin(f);c=Math.cos(f);h=1-c;f=d[0];b=d[1];B=d[2];v=d[3];e=d[4];l=d[5];p=d[6];n=d[7];k=d[8];u=d[9];w=d[10];D=d[11];t=q*q*h+c;y=m*q*h+r*g;G=r*q*h-m*g;x=q*m*h-r*g;I=m*m*h+c;S=r*m*h+q*g;H=q*r*h+m*g;q=m*r*h-q*g;m=r*r*h+c;a[0]=f*t+e*y+k*G;a[1]=b*t+l*y+u*G;a[2]=B*t+p*y+w*G;a[3]=v*t+n*y+D*G;a[4]=f*x+e*I+k*S;a[5]=b*x+l*I+u*
S;a[6]=B*x+p*I+w*S;a[7]=v*x+n*I+D*S;a[8]=f*H+e*q+k*m;a[9]=b*H+l*q+u*m;a[10]=B*H+p*q+w*m;a[11]=v*H+n*q+D*m;d!==a&&(a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a}},{}],67:[function(f,t,x){t.exports=function(a,d,f){var r=Math.sin(f);f=Math.cos(f);var q=d[4],m=d[5],b=d[6],g=d[7],c=d[8],h=d[9],B=d[10],v=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[4]=q*f+c*r;a[5]=m*f+h*r;a[6]=b*f+B*r;a[7]=g*f+v*r;a[8]=c*f-q*r;a[9]=h*f-m*r;a[10]=B*
f-b*r;a[11]=v*f-g*r;return a}},{}],68:[function(f,t,x){t.exports=function(a,d,f){var r=Math.sin(f);f=Math.cos(f);var q=d[0],m=d[1],b=d[2],g=d[3],c=d[8],h=d[9],B=d[10],v=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=q*f-c*r;a[1]=m*f-h*r;a[2]=b*f-B*r;a[3]=g*f-v*r;a[8]=q*r+c*f;a[9]=m*r+h*f;a[10]=b*r+B*f;a[11]=g*r+v*f;return a}},{}],69:[function(f,t,x){t.exports=function(a,d,f){var r=Math.sin(f);f=Math.cos(f);var q=d[0],m=d[1],b=d[2],g=d[3],
c=d[4],h=d[5],B=d[6],v=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=q*f+c*r;a[1]=m*f+h*r;a[2]=b*f+B*r;a[3]=g*f+v*r;a[4]=c*f-q*r;a[5]=h*f-m*r;a[6]=B*f-b*r;a[7]=v*f-g*r;return a}},{}],70:[function(f,t,x){t.exports=function(a,d,f){var r=f[0],q=f[1];f=f[2];a[0]=d[0]*r;a[1]=d[1]*r;a[2]=d[2]*r;a[3]=d[3]*r;a[4]=d[4]*q;a[5]=d[5]*q;a[6]=d[6]*q;a[7]=d[7]*q;a[8]=d[8]*f;a[9]=d[9]*f;a[10]=d[10]*f;a[11]=d[11]*f;a[12]=d[12];a[13]=d[13];a[14]=d[14];
a[15]=d[15];return a}},{}],71:[function(f,t,x){t.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(f,t,x){t.exports=function(a,d,f){var r=f[0],q=f[1];f=f[2];var m,b,g,c,h,B,v,e,l,p,n,k;d===a?(a[12]=d[0]*r+d[4]*q+d[8]*f+d[12],a[13]=d[1]*r+d[5]*q+d[9]*f+d[13],a[14]=d[2]*r+d[6]*q+d[10]*f+d[14],a[15]=d[3]*r+d[7]*q+d[11]*f+d[15]):(m=d[0],
b=d[1],g=d[2],c=d[3],h=d[4],B=d[5],v=d[6],e=d[7],l=d[8],p=d[9],n=d[10],k=d[11],a[0]=m,a[1]=b,a[2]=g,a[3]=c,a[4]=h,a[5]=B,a[6]=v,a[7]=e,a[8]=l,a[9]=p,a[10]=n,a[11]=k,a[12]=m*r+h*q+l*f+d[12],a[13]=b*r+B*q+p*f+d[13],a[14]=g*r+v*q+n*f+d[14],a[15]=c*r+e*q+k*f+d[15]);return a}},{}],73:[function(f,t,x){t.exports=function(a,d){if(a===d){var f=d[1],r=d[2],q=d[3],m=d[6],b=d[7],g=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=f;a[6]=d[9];a[7]=d[13];a[8]=r;a[9]=m;a[11]=d[14];a[12]=q;a[13]=b;a[14]=g}else a[0]=d[0],
a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a}},{}],74:[function(f,t,x){!function(a,d){if("object"==typeof x&&"object"==typeof t)t.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var f=d(),r;for(r in f)("object"==typeof x?x:a)[r]=f[r]}}("undefined"!=typeof self?self:this,function(){return function(a){function d(r){if(f[r])return f[r].exports;var q=
f[r]={i:r,l:!1,exports:{}};return a[r].call(q.exports,q,q.exports,d),q.l=!0,q.exports}var f={};return d.m=a,d.c=f,d.d=function(a,f,m){d.o(a,f)||Object.defineProperty(a,f,{enumerable:!0,get:m})},d.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,f){if((1&f&&(a=d(a)),8&f)||4&f&&"object"==typeof a&&a&&
a.__esModule)return a;var m=Object.create(null);if(d.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:a}),2&f&&"string"!=typeof a)for(var b in a)d.d(m,b,function(b){return a[b]}.bind(null,b));return m},d.n=function(a){var f=a&&a.__esModule?function(){return a["default"]}:function(){return a};return d.d(f,"a",f),f},d.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)},d.p="",d(d.s=10)}([function(a,d,f){Object.defineProperty(d,"__esModule",{value:!0});d.setMatrixArrayType=function(a){d.ARRAY_TYPE=
a};d.toRadian=function(a){return a*q};d.equals=function(a,b){return Math.abs(a-b)<=r*Math.max(1,Math.abs(a),Math.abs(b))};var r=d.EPSILON=1E-6;d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;var q=Math.PI/180},function(a,d,f){function r(){var c=new v.ARRAY_TYPE(4);return v.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0),c}function q(c,a,b){return c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c}function m(c,a,b){return c[0]=a[0]*b[0],c[1]=
a[1]*b[1],c[2]=a[2]*b[2],c[3]=a[3]*b[3],c}function b(c,a,b){return c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c[3]=a[3]/b[3],c}function g(c,a){var b=a[0]-c[0],d=a[1]-c[1],k=a[2]-c[2],h=a[3]-c[3];return Math.sqrt(b*b+d*d+k*k+h*h)}function c(c,a){var b=a[0]-c[0],d=a[1]-c[1],k=a[2]-c[2],h=a[3]-c[3];return b*b+d*d+k*k+h*h}function h(c){var a=c[0],b=c[1],d=c[2];c=c[3];return Math.sqrt(a*a+b*b+d*d+c*c)}function B(c){var a=c[0],b=c[1],d=c[2];c=c[3];return a*a+b*b+d*d+c*c}Object.defineProperty(d,"__esModule",
{value:!0});d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(c){var a=new v.ARRAY_TYPE(4);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};d.fromValues=function(c,a,b,d){var k=new v.ARRAY_TYPE(4);return k[0]=c,k[1]=a,k[2]=b,k[3]=d,k};d.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};d.set=function(c,a,b,d,k){return c[0]=a,c[1]=b,c[2]=d,c[3]=k,c};d.add=function(c,a,b){return c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],
c};d.subtract=q;d.multiply=m;d.divide=b;d.ceil=function(c,a){return c[0]=Math.ceil(a[0]),c[1]=Math.ceil(a[1]),c[2]=Math.ceil(a[2]),c[3]=Math.ceil(a[3]),c};d.floor=function(c,a){return c[0]=Math.floor(a[0]),c[1]=Math.floor(a[1]),c[2]=Math.floor(a[2]),c[3]=Math.floor(a[3]),c};d.min=function(c,a,b){return c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.min(a[3],b[3]),c};d.max=function(c,a,b){return c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],
b[2]),c[3]=Math.max(a[3],b[3]),c};d.round=function(c,a){return c[0]=Math.round(a[0]),c[1]=Math.round(a[1]),c[2]=Math.round(a[2]),c[3]=Math.round(a[3]),c};d.scale=function(c,a,b){return c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c};d.scaleAndAdd=function(c,a,b,d){return c[0]=a[0]+b[0]*d,c[1]=a[1]+b[1]*d,c[2]=a[2]+b[2]*d,c[3]=a[3]+b[3]*d,c};d.distance=g;d.squaredDistance=c;d.length=h;d.squaredLength=B;d.negate=function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c[3]=-a[3],c};d.inverse=function(c,
a){return c[0]=1/a[0],c[1]=1/a[1],c[2]=1/a[2],c[3]=1/a[3],c};d.normalize=function(c,a){var b=a[0],d=a[1],k=a[2],h=a[3],g=b*b+d*d+k*k+h*h;0<g&&(g=1/Math.sqrt(g),c[0]=b*g,c[1]=d*g,c[2]=k*g,c[3]=h*g);return c};d.dot=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]};d.lerp=function(c,a,b,d){var k=a[0],h=a[1],g=a[2];a=a[3];return c[0]=k+d*(b[0]-k),c[1]=h+d*(b[1]-h),c[2]=g+d*(b[2]-g),c[3]=a+d*(b[3]-a),c};d.random=function(c,a){var b,d,h,g,f,m;a=a||1;do b=2*v.RANDOM()-1,d=2*v.RANDOM()-1,f=b*
b+d*d;while(1<=f);do h=2*v.RANDOM()-1,g=2*v.RANDOM()-1,m=h*h+g*g;while(1<=m);f=Math.sqrt((1-f)/m);return c[0]=a*b,c[1]=a*d,c[2]=a*h*f,c[3]=a*g*f,c};d.transformMat4=function(c,a,b){var d=a[0],h=a[1],g=a[2];a=a[3];return c[0]=b[0]*d+b[4]*h+b[8]*g+b[12]*a,c[1]=b[1]*d+b[5]*h+b[9]*g+b[13]*a,c[2]=b[2]*d+b[6]*h+b[10]*g+b[14]*a,c[3]=b[3]*d+b[7]*h+b[11]*g+b[15]*a,c};d.transformQuat=function(c,a,b){var d=a[0],h=a[1],g=a[2],f=b[0],m=b[1],v=b[2];b=b[3];var B=b*d+m*g-v*h,q=b*h+v*d-f*g,r=b*g+f*h-m*d,d=-f*d-m*h-
v*g;return c[0]=B*b+d*-f+q*-v-r*-m,c[1]=q*b+d*-m+r*-f-B*-v,c[2]=r*b+d*-v+B*-m-q*-f,c[3]=a[3],c};d.str=function(c){return"vec4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"};d.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]};d.equals=function(c,a){var b=c[0],d=c[1],h=c[2],g=c[3],f=a[0],m=a[1],B=a[2],q=a[3];return Math.abs(b-f)<=v.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))&&Math.abs(d-m)<=v.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(h-B)<=v.EPSILON*Math.max(1,
Math.abs(h),Math.abs(B))&&Math.abs(g-q)<=v.EPSILON*Math.max(1,Math.abs(g),Math.abs(q))};var v=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);return a["default"]=c,a}(f(0));d.sub=q;d.mul=m;d.div=b;d.dist=g;d.sqrDist=c;d.len=h;d.sqrLen=B;d.forEach=function(){var c=r();return function(a,b,d,h,g,f){var m=void 0,v=void 0;b||(b=4);d||(d=0);v=h?Math.min(h*b+d,a.length):a.length;for(m=d;m<v;m+=b)c[0]=a[m],c[1]=a[m+1],c[2]=
a[m+2],c[3]=a[m+3],g(c,c,f),a[m]=c[0],a[m+1]=c[1],a[m+2]=c[2],a[m+3]=c[3];return a}}()},function(a,d,f){function r(){var c=new p.ARRAY_TYPE(3);return p.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function q(c){var a=c[0],b=c[1];c=c[2];return Math.sqrt(a*a+b*b+c*c)}function m(c,a,b){var e=new p.ARRAY_TYPE(3);return e[0]=c,e[1]=a,e[2]=b,e}function b(c,a,b){return c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c}function g(c,a,b){return c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c}function c(c,
a,b){return c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c}function h(c,a){var b=a[0]-c[0],e=a[1]-c[1],d=a[2]-c[2];return Math.sqrt(b*b+e*e+d*d)}function B(c,a){var b=a[0]-c[0],e=a[1]-c[1],d=a[2]-c[2];return b*b+e*e+d*d}function v(c){var a=c[0],b=c[1];c=c[2];return a*a+b*b+c*c}function e(c,a){var b=a[0],e=a[1],d=a[2],b=b*b+e*e+d*d;return 0<b&&(b=1/Math.sqrt(b),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b),c}function l(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}Object.defineProperty(d,"__esModule",{value:!0});
d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(c){var a=new p.ARRAY_TYPE(3);return a[0]=c[0],a[1]=c[1],a[2]=c[2],a};d.length=q;d.fromValues=m;d.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c};d.set=function(c,a,b,e){return c[0]=a,c[1]=b,c[2]=e,c};d.add=function(c,a,b){return c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c};d.subtract=b;d.multiply=g;d.divide=c;d.ceil=function(c,a){return c[0]=Math.ceil(a[0]),c[1]=Math.ceil(a[1]),c[2]=Math.ceil(a[2]),
c};d.floor=function(c,a){return c[0]=Math.floor(a[0]),c[1]=Math.floor(a[1]),c[2]=Math.floor(a[2]),c};d.min=function(c,a,b){return c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c};d.max=function(c,a,b){return c[0]=Math.max(a[0],b[0]),c[1]=Math.max(a[1],b[1]),c[2]=Math.max(a[2],b[2]),c};d.round=function(c,a){return c[0]=Math.round(a[0]),c[1]=Math.round(a[1]),c[2]=Math.round(a[2]),c};d.scale=function(c,a,b){return c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c};d.scaleAndAdd=function(c,
a,b,e){return c[0]=a[0]+b[0]*e,c[1]=a[1]+b[1]*e,c[2]=a[2]+b[2]*e,c};d.distance=h;d.squaredDistance=B;d.squaredLength=v;d.negate=function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c};d.inverse=function(c,a){return c[0]=1/a[0],c[1]=1/a[1],c[2]=1/a[2],c};d.normalize=e;d.dot=l;d.cross=function(c,a,b){var e=a[0],d=a[1];a=a[2];var h=b[0],g=b[1];b=b[2];return c[0]=d*b-a*g,c[1]=a*h-e*b,c[2]=e*g-d*h,c};d.lerp=function(c,a,b,e){var d=a[0],h=a[1];a=a[2];return c[0]=d+e*(b[0]-d),c[1]=h+e*(b[1]-h),c[2]=a+e*
(b[2]-a),c};d.hermite=function(c,a,b,e,d,h){var g=h*h,l=g*(2*h-3)+1,f=g*(h-2)+h,p=g*(h-1);h=g*(3-2*h);return c[0]=a[0]*l+b[0]*f+e[0]*p+d[0]*h,c[1]=a[1]*l+b[1]*f+e[1]*p+d[1]*h,c[2]=a[2]*l+b[2]*f+e[2]*p+d[2]*h,c};d.bezier=function(c,a,b,e,d,h){var g=1-h,l=g*g,f=h*h,p=l*g,l=3*h*l,g=3*f*g;h*=f;return c[0]=a[0]*p+b[0]*l+e[0]*g+d[0]*h,c[1]=a[1]*p+b[1]*l+e[1]*g+d[1]*h,c[2]=a[2]*p+b[2]*l+e[2]*g+d[2]*h,c};d.random=function(c,a){a=a||1;var b=2*p.RANDOM()*Math.PI,e=2*p.RANDOM()-1,d=Math.sqrt(1-e*e)*a;return c[0]=
Math.cos(b)*d,c[1]=Math.sin(b)*d,c[2]=e*a,c};d.transformMat4=function(c,a,b){var e=a[0],d=a[1];a=a[2];var h=b[3]*e+b[7]*d+b[11]*a+b[15];return h=h||1,c[0]=(b[0]*e+b[4]*d+b[8]*a+b[12])/h,c[1]=(b[1]*e+b[5]*d+b[9]*a+b[13])/h,c[2]=(b[2]*e+b[6]*d+b[10]*a+b[14])/h,c};d.transformMat3=function(c,a,b){var e=a[0],d=a[1];a=a[2];return c[0]=e*b[0]+d*b[3]+a*b[6],c[1]=e*b[1]+d*b[4]+a*b[7],c[2]=e*b[2]+d*b[5]+a*b[8],c};d.transformQuat=function(c,a,b){var e=b[0],d=b[1],h=b[2],g=a[0],l=a[1];a=a[2];var f=d*a-h*l,p=
h*g-e*a,m=e*l-d*g,v=d*m-h*p,h=h*f-e*m,e=e*p-d*f;b=2*b[3];return f*=b,p*=b,m*=b,v*=2,h*=2,e*=2,c[0]=g+f+v,c[1]=l+p+h,c[2]=a+m+e,c};d.rotateX=function(c,a,b,e){var d=[],h=[];return d[0]=a[0]-b[0],d[1]=a[1]-b[1],d[2]=a[2]-b[2],h[0]=d[0],h[1]=d[1]*Math.cos(e)-d[2]*Math.sin(e),h[2]=d[1]*Math.sin(e)+d[2]*Math.cos(e),c[0]=h[0]+b[0],c[1]=h[1]+b[1],c[2]=h[2]+b[2],c};d.rotateY=function(c,a,b,e){var d=[],h=[];return d[0]=a[0]-b[0],d[1]=a[1]-b[1],d[2]=a[2]-b[2],h[0]=d[2]*Math.sin(e)+d[0]*Math.cos(e),h[1]=d[1],
h[2]=d[2]*Math.cos(e)-d[0]*Math.sin(e),c[0]=h[0]+b[0],c[1]=h[1]+b[1],c[2]=h[2]+b[2],c};d.rotateZ=function(c,a,b,e){var d=[],h=[];return d[0]=a[0]-b[0],d[1]=a[1]-b[1],d[2]=a[2]-b[2],h[0]=d[0]*Math.cos(e)-d[1]*Math.sin(e),h[1]=d[0]*Math.sin(e)+d[1]*Math.cos(e),h[2]=d[2],c[0]=h[0]+b[0],c[1]=h[1]+b[1],c[2]=h[2]+b[2],c};d.angle=function(c,a){var b=m(c[0],c[1],c[2]),d=m(a[0],a[1],a[2]);e(b,b);e(d,d);b=l(b,d);return 1<b?0:-1>b?Math.PI:Math.acos(b)};d.str=function(c){return"vec3("+c[0]+", "+c[1]+", "+c[2]+
")"};d.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]};d.equals=function(c,a){var b=c[0],e=c[1],d=c[2],h=a[0],g=a[1],l=a[2];return Math.abs(b-h)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(e-g)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(d-l)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))};var p=function(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);return a["default"]=c,a}(f(0));
d.sub=b;d.mul=g;d.div=c;d.dist=h;d.sqrDist=B;d.len=q;d.sqrLen=v;d.forEach=function(){var c=r();return function(a,b,e,d,h,g){var l=void 0,f=void 0;b||(b=3);e||(e=0);f=d?Math.min(d*b+e,a.length):a.length;for(l=e;l<f;l+=b)c[0]=a[l],c[1]=a[l+1],c[2]=a[l+2],h(c,c,g),a[l]=c[0],a[l+1]=c[1],a[l+2]=c[2];return a}}()},function(a,d,f){function r(c){if(c&&c.__esModule)return c;var a={};if(null!=c)for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b]);return a["default"]=c,a}function q(){var c=
new h.ARRAY_TYPE(4);return h.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function m(c,a,b){b*=.5;var e=Math.sin(b);return c[0]=e*a[0],c[1]=e*a[1],c[2]=e*a[2],c[3]=Math.cos(b),c}function b(c,a,b){var e=a[0],d=a[1],h=a[2];a=a[3];var g=b[0],f=b[1],m=b[2];b=b[3];return c[0]=e*b+a*g+d*m-h*f,c[1]=d*b+a*f+h*g-e*m,c[2]=h*b+a*m+e*f-d*g,c[3]=a*b-e*g-d*f-h*m,c}function g(c,a,b,e){var d=a[0],g=a[1],f=a[2];a=a[3];var m=b[0],v=b[1],B=b[2];b=b[3];var q=void 0,r=void 0,t=void 0,C=void 0,A=void 0;return 0>
(r=d*m+g*v+f*B+a*b)&&(r=-r,m=-m,v=-v,B=-B,b=-b),1-r>h.EPSILON?(q=Math.acos(r),t=Math.sin(q),C=Math.sin((1-e)*q)/t,A=Math.sin(e*q)/t):(C=1-e,A=e),c[0]=C*d+A*m,c[1]=C*g+A*v,c[2]=C*f+A*B,c[3]=C*a+A*b,c}function c(c,a){var b=a[0]+a[4]+a[8],e=void 0;if(0<b)e=Math.sqrt(b+1),c[3]=.5*e,e=.5/e,c[0]=(a[5]-a[7])*e,c[1]=(a[6]-a[2])*e,c[2]=(a[1]-a[3])*e;else{b=0;a[4]>a[0]&&(b=1);a[8]>a[3*b+b]&&(b=2);var d=(b+1)%3,h=(b+2)%3,e=Math.sqrt(a[3*b+b]-a[3*d+d]-a[3*h+h]+1);c[b]=.5*e;e=.5/e;c[3]=(a[3*d+h]-a[3*h+d])*e;c[d]=
(a[3*d+b]+a[3*b+d])*e;c[h]=(a[3*h+b]+a[3*b+h])*e}return c}Object.defineProperty(d,"__esModule",{value:!0});d.setAxes=d.sqlerp=d.rotationTo=d.equals=d.exactEquals=d.normalize=d.sqrLen=d.squaredLength=d.len=d.length=d.lerp=d.dot=d.scale=d.mul=d.add=d.set=d.copy=d.fromValues=d.clone=void 0;d.create=q;d.identity=function(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c};d.setAxisAngle=m;d.getAxisAngle=function(c,a){var b=2*Math.acos(a[3]),e=Math.sin(b/2);e>h.EPSILON?(c[0]=a[0]/e,c[1]=a[1]/e,c[2]=a[2]/e):(c[0]=
1,c[1]=0,c[2]=0);return b};d.multiply=b;d.rotateX=function(c,a,b){b*=.5;var e=a[0],d=a[1],h=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);return c[0]=e*b+a*g,c[1]=d*b+h*g,c[2]=h*b-d*g,c[3]=a*b-e*g,c};d.rotateY=function(c,a,b){b*=.5;var e=a[0],d=a[1],h=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);return c[0]=e*b-h*g,c[1]=d*b+a*g,c[2]=h*b+e*g,c[3]=a*b-d*g,c};d.rotateZ=function(c,a,b){b*=.5;var e=a[0],d=a[1],h=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);return c[0]=e*b+d*g,c[1]=d*b-e*g,c[2]=h*b+a*g,c[3]=
a*b-h*g,c};d.calculateW=function(c,a){var b=a[0],e=a[1],d=a[2];return c[0]=b,c[1]=e,c[2]=d,c[3]=Math.sqrt(Math.abs(1-b*b-e*e-d*d)),c};d.slerp=g;d.random=function(c){var a=h.RANDOM(),b=h.RANDOM(),e=h.RANDOM(),d=Math.sqrt(1-a),a=Math.sqrt(a);return c[0]=d*Math.sin(2*Math.PI*b),c[1]=d*Math.cos(2*Math.PI*b),c[2]=a*Math.sin(2*Math.PI*e),c[3]=a*Math.cos(2*Math.PI*e),c};d.invert=function(c,a){var b=a[0],e=a[1],d=a[2],h=a[3],g=b*b+e*e+d*d+h*h,g=g?1/g:0;return c[0]=-b*g,c[1]=-e*g,c[2]=-d*g,c[3]=h*g,c};d.conjugate=
function(c,a){return c[0]=-a[0],c[1]=-a[1],c[2]=-a[2],c[3]=a[3],c};d.fromMat3=c;d.fromEuler=function(c,a,b,e){var d=.5*Math.PI/180;a*=d;b*=d;e*=d;d=Math.sin(a);a=Math.cos(a);var h=Math.sin(b);b=Math.cos(b);var g=Math.sin(e);e=Math.cos(e);return c[0]=d*b*e-a*h*g,c[1]=a*h*e+d*b*g,c[2]=a*b*g-d*h*e,c[3]=a*b*e+d*h*g,c};d.str=function(c){return"quat("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"};var h=r(f(0)),B=r(f(5)),v=r(f(2));a=r(f(1));d.clone=a.clone;d.fromValues=a.fromValues;d.copy=a.copy;d.set=a.set;d.add=
a.add;d.mul=b;d.scale=a.scale;d.dot=a.dot;d.lerp=a.lerp;f=d.length=a.length;f=(d.len=f,d.squaredLength=a.squaredLength);var e=(d.sqrLen=f,d.normalize=a.normalize);d.exactEquals=a.exactEquals;d.equals=a.equals;d.rotationTo=function(){var c=v.create(),a=v.fromValues(1,0,0),b=v.fromValues(0,1,0);return function(d,h,g){var f=v.dot(h,g);return-.999999>f?(v.cross(c,a,h),1E-6>v.len(c)&&v.cross(c,b,h),v.normalize(c,c),m(d,c,Math.PI),d):.999999<f?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(v.cross(c,h,g),d[0]=c[0],d[1]=
c[1],d[2]=c[2],d[3]=1+f,e(d,d))}}();d.sqlerp=function(){var c=q(),a=q();return function(b,e,d,h,f,m){return g(c,e,f,m),g(a,d,h,m),g(b,c,a,2*m*(1-m)),b}}();d.setAxes=function(){var a=B.create();return function(b,d,h,g){return a[0]=h[0],a[3]=h[1],a[6]=h[2],a[1]=g[0],a[4]=g[1],a[7]=g[2],a[2]=-d[0],a[5]=-d[1],a[8]=-d[2],e(b,c(b,a))}}()},function(a,d,f){function r(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function q(c,
a,b){var d=a[0],e=a[1],g=a[2],f=a[3],n=a[4],k=a[5],m=a[6],w=a[7],q=a[8],r=a[9],t=a[10],C=a[11],x=a[12],I=a[13],S=a[14];a=a[15];var H=b[0],A=b[1],ka=b[2],J=b[3];return c[0]=H*d+A*n+ka*q+J*x,c[1]=H*e+A*k+ka*r+J*I,c[2]=H*g+A*m+ka*t+J*S,c[3]=H*f+A*w+ka*C+J*a,H=b[4],A=b[5],ka=b[6],J=b[7],c[4]=H*d+A*n+ka*q+J*x,c[5]=H*e+A*k+ka*r+J*I,c[6]=H*g+A*m+ka*t+J*S,c[7]=H*f+A*w+ka*C+J*a,H=b[8],A=b[9],ka=b[10],J=b[11],c[8]=H*d+A*n+ka*q+J*x,c[9]=H*e+A*k+ka*r+J*I,c[10]=H*g+A*m+ka*t+J*S,c[11]=H*f+A*w+ka*C+J*a,H=b[12],
A=b[13],ka=b[14],J=b[15],c[12]=H*d+A*n+ka*q+J*x,c[13]=H*e+A*k+ka*r+J*I,c[14]=H*g+A*m+ka*t+J*S,c[15]=H*f+A*w+ka*C+J*a,c}function m(c,a,b){var d=a[0],e=a[1],g=a[2],f=a[3],n=d+d,k=e+e,m=g+g;a=d*n;var w=d*k,d=d*m,q=e*k,e=e*m,g=g*m,n=f*n,k=f*k,f=f*m;return c[0]=1-(q+g),c[1]=w+f,c[2]=d-k,c[3]=0,c[4]=w-f,c[5]=1-(a+g),c[6]=e+n,c[7]=0,c[8]=d+k,c[9]=e-n,c[10]=1-(a+q),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c}function b(c,a,b){return c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c[4]=
a[4]-b[4],c[5]=a[5]-b[5],c[6]=a[6]-b[6],c[7]=a[7]-b[7],c[8]=a[8]-b[8],c[9]=a[9]-b[9],c[10]=a[10]-b[10],c[11]=a[11]-b[11],c[12]=a[12]-b[12],c[13]=a[13]-b[13],c[14]=a[14]-b[14],c[15]=a[15]-b[15],c}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var c=new g.ARRAY_TYPE(16);g.ARRAY_TYPE!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0);return c[0]=1,c[5]=1,c[10]=1,c[15]=1,c};d.clone=function(c){var a=new g.ARRAY_TYPE(16);
return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15],a};d.copy=function(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c};d.fromValues=function(a,b,d,f,e,l,p,n,k,m,w,q,r,t,C,x){var I=new g.ARRAY_TYPE(16);return I[0]=a,I[1]=b,I[2]=d,I[3]=f,
I[4]=e,I[5]=l,I[6]=p,I[7]=n,I[8]=k,I[9]=m,I[10]=w,I[11]=q,I[12]=r,I[13]=t,I[14]=C,I[15]=x,I};d.set=function(a,b,d,g,e,l,f,n,k,m,w,q,r,t,C,x,I){return a[0]=b,a[1]=d,a[2]=g,a[3]=e,a[4]=l,a[5]=f,a[6]=n,a[7]=k,a[8]=m,a[9]=w,a[10]=q,a[11]=r,a[12]=t,a[13]=C,a[14]=x,a[15]=I,a};d.identity=r;d.transpose=function(a,b){if(a===b){var d=b[1],g=b[2],e=b[3],l=b[6],f=b[7],n=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=g;a[9]=l;a[11]=b[14];a[12]=e;a[13]=f;a[14]=n}else a[0]=b[0],a[1]=b[4],
a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};d.invert=function(a,b){var d=b[0],g=b[1],e=b[2],l=b[3],f=b[4],n=b[5],k=b[6],m=b[7],w=b[8],q=b[9],r=b[10],t=b[11],C=b[12],x=b[13],I=b[14],S=b[15],H=d*n-g*f,A=d*k-e*f,ka=d*m-l*f,J=g*k-e*n,F=g*m-l*n,E=e*m-l*k,ea=w*x-q*C,z=w*I-r*C,ba=w*S-t*C,M=q*I-r*x,la=q*S-t*x,oa=r*S-t*I,U=H*oa-A*la+ka*M+J*ba-F*z+E*ea;return U?(U=1/U,a[0]=(n*oa-k*la+m*M)*U,
a[1]=(e*la-g*oa-l*M)*U,a[2]=(x*E-I*F+S*J)*U,a[3]=(r*F-q*E-t*J)*U,a[4]=(k*ba-f*oa-m*z)*U,a[5]=(d*oa-e*ba+l*z)*U,a[6]=(I*ka-C*E-S*A)*U,a[7]=(w*E-r*ka+t*A)*U,a[8]=(f*la-n*ba+m*ea)*U,a[9]=(g*ba-d*la-l*ea)*U,a[10]=(C*F-x*ka+S*H)*U,a[11]=(q*ka-w*F-t*H)*U,a[12]=(n*z-f*M-k*ea)*U,a[13]=(d*M-g*z+e*ea)*U,a[14]=(x*A-C*J-I*H)*U,a[15]=(w*J-q*A+r*H)*U,a):null};d.adjoint=function(a,b){var d=b[0],g=b[1],e=b[2],l=b[3],f=b[4],n=b[5],k=b[6],m=b[7],w=b[8],q=b[9],r=b[10],t=b[11],C=b[12],x=b[13],I=b[14],S=b[15];return a[0]=
n*(r*S-t*I)-q*(k*S-m*I)+x*(k*t-m*r),a[1]=-(g*(r*S-t*I)-q*(e*S-l*I)+x*(e*t-l*r)),a[2]=g*(k*S-m*I)-n*(e*S-l*I)+x*(e*m-l*k),a[3]=-(g*(k*t-m*r)-n*(e*t-l*r)+q*(e*m-l*k)),a[4]=-(f*(r*S-t*I)-w*(k*S-m*I)+C*(k*t-m*r)),a[5]=d*(r*S-t*I)-w*(e*S-l*I)+C*(e*t-l*r),a[6]=-(d*(k*S-m*I)-f*(e*S-l*I)+C*(e*m-l*k)),a[7]=d*(k*t-m*r)-f*(e*t-l*r)+w*(e*m-l*k),a[8]=f*(q*S-t*x)-w*(n*S-m*x)+C*(n*t-m*q),a[9]=-(d*(q*S-t*x)-w*(g*S-l*x)+C*(g*t-l*q)),a[10]=d*(n*S-m*x)-f*(g*S-l*x)+C*(g*m-l*n),a[11]=-(d*(n*t-m*q)-f*(g*t-l*q)+w*(g*m-
l*n)),a[12]=-(f*(q*I-r*x)-w*(n*I-k*x)+C*(n*r-k*q)),a[13]=d*(q*I-r*x)-w*(g*I-e*x)+C*(g*r-e*q),a[14]=-(d*(n*I-k*x)-f*(g*I-e*x)+C*(g*k-e*n)),a[15]=d*(n*r-k*q)-f*(g*r-e*q)+w*(g*k-e*n),a};d.determinant=function(a){var b=a[0],d=a[1],g=a[2],e=a[3],l=a[4],f=a[5],n=a[6],k=a[7],m=a[8],w=a[9],q=a[10],r=a[11],t=a[12],C=a[13],x=a[14];a=a[15];return(b*f-d*l)*(q*a-r*x)-(b*n-g*l)*(w*a-r*C)+(b*k-e*l)*(w*x-q*C)+(d*n-g*f)*(m*a-r*t)-(d*k-e*f)*(m*x-q*t)+(g*k-e*n)*(m*C-w*t)};d.multiply=q;d.translate=function(a,b,d){var g=
d[0],e=d[1];d=d[2];var l=void 0,f=void 0,n=void 0,k=void 0,m=void 0,q=void 0,r=void 0,t=void 0,y=void 0,C=void 0,x=void 0,I=void 0;b===a?(a[12]=b[0]*g+b[4]*e+b[8]*d+b[12],a[13]=b[1]*g+b[5]*e+b[9]*d+b[13],a[14]=b[2]*g+b[6]*e+b[10]*d+b[14],a[15]=b[3]*g+b[7]*e+b[11]*d+b[15]):(l=b[0],f=b[1],n=b[2],k=b[3],m=b[4],q=b[5],r=b[6],t=b[7],y=b[8],C=b[9],x=b[10],I=b[11],a[0]=l,a[1]=f,a[2]=n,a[3]=k,a[4]=m,a[5]=q,a[6]=r,a[7]=t,a[8]=y,a[9]=C,a[10]=x,a[11]=I,a[12]=l*g+m*e+y*d+b[12],a[13]=f*g+q*e+C*d+b[13],a[14]=n*
g+r*e+x*d+b[14],a[15]=k*g+t*e+I*d+b[15]);return a};d.scale=function(a,b,d){var g=d[0],e=d[1];d=d[2];return a[0]=b[0]*g,a[1]=b[1]*g,a[2]=b[2]*g,a[3]=b[3]*g,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};d.rotate=function(a,b,d,f){var e=f[0],l=f[1];f=f[2];var p=Math.sqrt(e*e+l*l+f*f),n=void 0,k=void 0,m=void 0,q=void 0,r=void 0,t=void 0,y=void 0,C=void 0,x=void 0,I=void 0,S=void 0,H=void 0,A=void 0,
ka=void 0,J=void 0,F=void 0,E=void 0,ea=void 0,z=void 0,ba=void 0,M=void 0,la=void 0,k=n=void 0;if(p<g.EPSILON)return null;e*=p=1/p;l*=p;f*=p;n=Math.sin(d);k=Math.cos(d);m=1-k;q=b[0];r=b[1];t=b[2];y=b[3];C=b[4];x=b[5];I=b[6];S=b[7];H=b[8];A=b[9];ka=b[10];J=b[11];F=e*e*m+k;E=l*e*m+f*n;ea=f*e*m-l*n;z=e*l*m-f*n;ba=l*l*m+k;M=f*l*m+e*n;la=e*f*m+l*n;n=l*f*m-e*n;k=f*f*m+k;a[0]=q*F+C*E+H*ea;a[1]=r*F+x*E+A*ea;a[2]=t*F+I*E+ka*ea;a[3]=y*F+S*E+J*ea;a[4]=q*z+C*ba+H*M;a[5]=r*z+x*ba+A*M;a[6]=t*z+I*ba+ka*M;a[7]=
y*z+S*ba+J*M;a[8]=q*la+C*n+H*k;a[9]=r*la+x*n+A*k;a[10]=t*la+I*n+ka*k;a[11]=y*la+S*n+J*k;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};d.rotateX=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var e=b[4],l=b[5],f=b[6],n=b[7],k=b[8],m=b[9],q=b[10],r=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[4]=e*d+k*g,a[5]=l*d+m*g,a[6]=f*d+q*g,a[7]=n*d+r*g,a[8]=k*d-e*g,a[9]=m*d-l*g,a[10]=q*d-f*g,a[11]=r*d-n*g,a};d.rotateY=function(a,
b,d){var g=Math.sin(d);d=Math.cos(d);var e=b[0],l=b[1],f=b[2],n=b[3],k=b[8],m=b[9],q=b[10],r=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[0]=e*d-k*g,a[1]=l*d-m*g,a[2]=f*d-q*g,a[3]=n*d-r*g,a[8]=e*g+k*d,a[9]=l*g+m*d,a[10]=f*g+q*d,a[11]=n*g+r*d,a};d.rotateZ=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var e=b[0],l=b[1],f=b[2],n=b[3],k=b[4],m=b[5],q=b[6],r=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],
a[14]=b[14],a[15]=b[15]);return a[0]=e*d+k*g,a[1]=l*d+m*g,a[2]=f*d+q*g,a[3]=n*d+r*g,a[4]=k*d-e*g,a[5]=m*d-l*g,a[6]=q*d-f*g,a[7]=r*d-n*g,a};d.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a};d.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromRotation=function(a,b,
d){var f=d[0],e=d[1];d=d[2];var l=Math.sqrt(f*f+e*e+d*d),p=void 0,n=void 0,k=void 0;return l<g.EPSILON?null:(f*=l=1/l,e*=l,d*=l,p=Math.sin(b),n=Math.cos(b),k=1-n,a[0]=f*f*k+n,a[1]=e*f*k+d*p,a[2]=d*f*k-e*p,a[3]=0,a[4]=f*e*k-d*p,a[5]=e*e*k+n,a[6]=d*e*k+f*p,a[7]=0,a[8]=f*d*k+e*p,a[9]=e*d*k-f*p,a[10]=d*d*k+n,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)};d.fromXRotation=function(a,b){var d=Math.sin(b),g=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=g,a[6]=d,a[7]=0,a[8]=0,a[9]=-d,a[10]=g,a[11]=
0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromYRotation=function(a,b){var d=Math.sin(b),g=Math.cos(b);return a[0]=g,a[1]=0,a[2]=-d,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=d,a[9]=0,a[10]=g,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromZRotation=function(a,b){var d=Math.sin(b),g=Math.cos(b);return a[0]=g,a[1]=d,a[2]=0,a[3]=0,a[4]=-d,a[5]=g,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromRotationTranslation=m;d.fromQuat2=function(a,b){var d=new g.ARRAY_TYPE(3),f=
-b[0],e=-b[1],l=-b[2],p=b[3],n=b[4],k=b[5],u=b[6],q=b[7],r=f*f+e*e+l*l+p*p;0<r?(d[0]=2*(n*p+q*f+k*l-u*e)/r,d[1]=2*(k*p+q*e+u*f-n*l)/r,d[2]=2*(u*p+q*l+n*e-k*f)/r):(d[0]=2*(n*p+q*f+k*l-u*e),d[1]=2*(k*p+q*e+u*f-n*l),d[2]=2*(u*p+q*l+n*e-k*f));return m(a,b,d),a};d.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a};d.getScaling=function(a,b){var d=b[0],g=b[1],e=b[2],l=b[4],f=b[5],n=b[6],k=b[8],m=b[9],q=b[10];return a[0]=Math.sqrt(d*d+g*g+e*e),a[1]=Math.sqrt(l*l+f*f+n*n),a[2]=Math.sqrt(k*
k+m*m+q*q),a};d.getRotation=function(a,b){var d=b[0]+b[5]+b[10],g=0;0<d?(g=2*Math.sqrt(d+1),a[3]=.25*g,a[0]=(b[6]-b[9])/g,a[1]=(b[8]-b[2])/g,a[2]=(b[1]-b[4])/g):b[0]>b[5]&&b[0]>b[10]?(g=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/g,a[0]=.25*g,a[1]=(b[1]+b[4])/g,a[2]=(b[8]+b[2])/g):b[5]>b[10]?(g=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/g,a[0]=(b[1]+b[4])/g,a[1]=.25*g,a[2]=(b[6]+b[9])/g):(g=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/g,a[0]=(b[8]+b[2])/g,a[1]=(b[6]+b[9])/g,a[2]=.25*g);
return a};d.fromRotationTranslationScale=function(a,b,d,g){var e=b[0],l=b[1],f=b[2],n=b[3],k=e+e,m=l+l,q=f+f;b=e*k;var r=e*m,e=e*q,t=l*m,l=l*q,f=f*q,k=n*k,m=n*m,n=n*q,q=g[0],y=g[1];g=g[2];return a[0]=(1-(t+f))*q,a[1]=(r+n)*q,a[2]=(e-m)*q,a[3]=0,a[4]=(r-n)*y,a[5]=(1-(b+f))*y,a[6]=(l+k)*y,a[7]=0,a[8]=(e+m)*g,a[9]=(l-k)*g,a[10]=(1-(b+t))*g,a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],a[15]=1,a};d.fromRotationTranslationScaleOrigin=function(a,b,d,g,e){var l=b[0],f=b[1],n=b[2],k=b[3],m=l+l,q=f+f,r=n+n;b=l*
m;var t=l*q,y=l*r,l=f*q,f=f*r,C=n*r,n=k*m,q=k*q,x=k*r,I=g[0],S=g[1],r=g[2];g=e[0];k=e[1];e=e[2];var m=(1-(l+C))*I,H=(t+x)*I,I=(y-q)*I,t=(t-x)*S,C=(1-(b+C))*S,S=(f+n)*S,y=(y+q)*r,f=(f-n)*r;b=(1-(b+l))*r;return a[0]=m,a[1]=H,a[2]=I,a[3]=0,a[4]=t,a[5]=C,a[6]=S,a[7]=0,a[8]=y,a[9]=f,a[10]=b,a[11]=0,a[12]=d[0]+g-(m*g+t*k+y*e),a[13]=d[1]+k-(H*g+C*k+f*e),a[14]=d[2]+e-(I*g+S*k+b*e),a[15]=1,a};d.fromQuat=function(a,b){var d=b[0],g=b[1],e=b[2],l=b[3],f=d+d,n=g+g,k=e+e,d=d*f,m=g*f,g=g*n,q=e*f,r=e*n,e=e*k,f=l*
f,n=l*n,l=l*k;return a[0]=1-g-e,a[1]=m+l,a[2]=q-n,a[3]=0,a[4]=m-l,a[5]=1-d-e,a[6]=r+f,a[7]=0,a[8]=q+n,a[9]=r-f,a[10]=1-d-g,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.frustum=function(a,b,d,g,e,l,f){var n=1/(d-b),k=1/(e-g),m=1/(l-f);return a[0]=2*l*n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*l*k,a[6]=0,a[7]=0,a[8]=(d+b)*n,a[9]=(e+g)*k,a[10]=(f+l)*m,a[11]=-1,a[12]=0,a[13]=0,a[14]=f*l*2*m,a[15]=0,a};d.perspective=function(a,b,d,g,e){b=1/Math.tan(b/2);var l=void 0;a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=e&&e!==1/0?(l=1/(g-e),a[10]=(e+g)*l,a[14]=2*e*g*l):(a[10]=-1,a[14]=-2*g);return a};d.perspectiveFromFieldOfView=function(a,b,d,g){var e=Math.tan(b.upDegrees*Math.PI/180),l=Math.tan(b.downDegrees*Math.PI/180),f=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var n=2/(f+b),k=2/(e+l);return a[0]=n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=k,a[6]=0,a[7]=0,a[8]=-(f-b)*n*.5,a[9]=(e-l)*k*.5,a[10]=g/(d-g),a[11]=-1,a[12]=
0,a[13]=0,a[14]=g*d/(d-g),a[15]=0,a};d.ortho=function(a,b,d,g,e,l,f){var n=1/(b-d),k=1/(g-e),m=1/(l-f);return a[0]=-2*n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*k,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*m,a[11]=0,a[12]=(b+d)*n,a[13]=(e+g)*k,a[14]=(f+l)*m,a[15]=1,a};d.lookAt=function(a,b,d,f){var e=void 0,l=void 0,p=void 0,n=void 0,k=void 0,m=void 0,q=void 0,t=void 0,C=void 0,y=void 0,x=b[0],ob=b[1];b=b[2];p=f[0];n=f[1];f=f[2];q=d[0];t=d[1];d=d[2];if(Math.abs(x-q)<g.EPSILON&&Math.abs(ob-t)<g.EPSILON&&Math.abs(b-
d)<g.EPSILON)return r(a);q=x-q;t=ob-t;C=b-d;y=1/Math.sqrt(q*q+t*t+C*C);e=n*(C*=y)-f*(t*=y);l=f*(q*=y)-p*C;p=p*t-n*q;(y=Math.sqrt(e*e+l*l+p*p))?(e*=y=1/y,l*=y,p*=y):(e=0,l=0,p=0);n=t*p-C*l;k=C*e-q*p;m=q*l-t*e;(y=Math.sqrt(n*n+k*k+m*m))?(n*=y=1/y,k*=y,m*=y):(n=0,k=0,m=0);return a[0]=e,a[1]=n,a[2]=q,a[3]=0,a[4]=l,a[5]=k,a[6]=t,a[7]=0,a[8]=p,a[9]=m,a[10]=C,a[11]=0,a[12]=-(e*x+l*ob+p*b),a[13]=-(n*x+k*ob+m*b),a[14]=-(q*x+t*ob+C*b),a[15]=1,a};d.targetTo=function(a,b,d,g){var e=b[0],f=b[1];b=b[2];var p=g[0],
n=g[1],k=g[2];g=e-d[0];var m=f-d[1];d=b-d[2];var q=g*g+m*m+d*d;0<q&&(q=1/Math.sqrt(q),g*=q,m*=q,d*=q);var r=n*d-k*m,k=k*g-p*d,p=p*m-n*g;0<(q=r*r+k*k+p*p)&&(q=1/Math.sqrt(q),r*=q,k*=q,p*=q);return a[0]=r,a[1]=k,a[2]=p,a[3]=0,a[4]=m*p-d*k,a[5]=d*r-g*p,a[6]=g*k-m*r,a[7]=0,a[8]=g,a[9]=m,a[10]=d,a[11]=0,a[12]=e,a[13]=f,a[14]=b,a[15]=1,a};d.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+
", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,b,d){return a[0]=b[0]+d[0],a[1]=b[1]+d[1],a[2]=b[2]+d[2],a[3]=b[3]+d[3],a[4]=b[4]+d[4],a[5]=b[5]+d[5],a[6]=b[6]+d[6],a[7]=b[7]+d[7],a[8]=b[8]+
d[8],a[9]=b[9]+d[9],a[10]=b[10]+d[10],a[11]=b[11]+d[11],a[12]=b[12]+d[12],a[13]=b[13]+d[13],a[14]=b[14]+d[14],a[15]=b[15]+d[15],a};d.subtract=b;d.multiplyScalar=function(a,b,d){return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*d,a[5]=b[5]*d,a[6]=b[6]*d,a[7]=b[7]*d,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12]*d,a[13]=b[13]*d,a[14]=b[14]*d,a[15]=b[15]*d,a};d.multiplyScalarAndAdd=function(a,b,d,g){return a[0]=b[0]+d[0]*g,a[1]=b[1]+d[1]*g,a[2]=b[2]+d[2]*g,a[3]=b[3]+d[3]*
g,a[4]=b[4]+d[4]*g,a[5]=b[5]+d[5]*g,a[6]=b[6]+d[6]*g,a[7]=b[7]+d[7]*g,a[8]=b[8]+d[8]*g,a[9]=b[9]+d[9]*g,a[10]=b[10]+d[10]*g,a[11]=b[11]+d[11]*g,a[12]=b[12]+d[12]*g,a[13]=b[13]+d[13]*g,a[14]=b[14]+d[14]*g,a[15]=b[15]+d[15]*g,a};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};d.equals=function(a,
b){var d=a[0],f=a[1],e=a[2],l=a[3],p=a[4],n=a[5],k=a[6],m=a[7],q=a[8],r=a[9],t=a[10],y=a[11],C=a[12],x=a[13],I=a[14],S=a[15],H=b[0],A=b[1],ka=b[2],J=b[3],F=b[4],E=b[5],ea=b[6],z=b[7],ba=b[8],M=b[9],la=b[10],oa=b[11],U=b[12],V=b[13],T=b[14],P=b[15];return Math.abs(d-H)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(H))&&Math.abs(f-A)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(e-ka)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(ka))&&Math.abs(l-J)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(J))&&
Math.abs(p-F)<=g.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(n-E)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(k-ea)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(ea))&&Math.abs(m-z)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(q-ba)<=g.EPSILON*Math.max(1,Math.abs(q),Math.abs(ba))&&Math.abs(r-M)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(t-la)<=g.EPSILON*Math.max(1,Math.abs(t),Math.abs(la))&&Math.abs(y-oa)<=g.EPSILON*Math.max(1,Math.abs(y),Math.abs(oa))&&
Math.abs(C-U)<=g.EPSILON*Math.max(1,Math.abs(C),Math.abs(U))&&Math.abs(x-V)<=g.EPSILON*Math.max(1,Math.abs(x),Math.abs(V))&&Math.abs(I-T)<=g.EPSILON*Math.max(1,Math.abs(I),Math.abs(T))&&Math.abs(S-P)<=g.EPSILON*Math.max(1,Math.abs(S),Math.abs(P))};var g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=a[d]);return b["default"]=a,b}(f(0));d.mul=q;d.sub=b},function(a,d,f){function r(a,d,c){var f=d[0],m=d[1],q=d[2],e=d[3],l=d[4],
p=d[5],n=d[6],k=d[7];d=d[8];var r=c[0],t=c[1],C=c[2],x=c[3],y=c[4],G=c[5],ob=c[6],I=c[7];c=c[8];return a[0]=r*f+t*e+C*n,a[1]=r*m+t*l+C*k,a[2]=r*q+t*p+C*d,a[3]=x*f+y*e+G*n,a[4]=x*m+y*l+G*k,a[5]=x*q+y*p+G*d,a[6]=ob*f+I*e+c*n,a[7]=ob*m+I*l+c*k,a[8]=ob*q+I*p+c*d,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a[6]=d[6]-c[6],a[7]=d[7]-c[7],a[8]=d[8]-c[8],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=
new m.ARRAY_TYPE(9);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};d.fromMat4=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[4],a[4]=d[5],a[5]=d[6],a[6]=d[8],a[7]=d[9],a[8]=d[10],a};d.clone=function(a){var d=new m.ARRAY_TYPE(9);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[8]=a[8],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],
a[8]=d[8],a};d.fromValues=function(a,d,c,f,q,r,e,l,p){var n=new m.ARRAY_TYPE(9);return n[0]=a,n[1]=d,n[2]=c,n[3]=f,n[4]=q,n[5]=r,n[6]=e,n[7]=l,n[8]=p,n};d.set=function(a,d,c,f,m,q,e,l,p,n){return a[0]=d,a[1]=c,a[2]=f,a[3]=m,a[4]=q,a[5]=e,a[6]=l,a[7]=p,a[8]=n,a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.transpose=function(a,d){if(a===d){var c=d[1],f=d[2],m=d[5];a[1]=d[3];a[2]=d[6];a[3]=c;a[5]=d[7];a[6]=f;a[7]=m}else a[0]=d[0],a[1]=d[3],a[2]=d[6],
a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=d[5],a[8]=d[8];return a};d.invert=function(a,d){var c=d[0],f=d[1],m=d[2],q=d[3],e=d[4],l=d[5],p=d[6],n=d[7],k=d[8],r=k*e-l*n,t=-k*q+l*p,C=n*q-e*p,x=c*r+f*t+m*C;return x?(x=1/x,a[0]=r*x,a[1]=(-k*f+m*n)*x,a[2]=(l*f-m*e)*x,a[3]=t*x,a[4]=(k*c-m*p)*x,a[5]=(-l*c+m*q)*x,a[6]=C*x,a[7]=(-n*c+f*p)*x,a[8]=(e*c-f*q)*x,a):null};d.adjoint=function(a,d){var c=d[0],f=d[1],m=d[2],q=d[3],e=d[4],l=d[5],p=d[6],n=d[7],k=d[8];return a[0]=e*k-l*n,a[1]=m*n-f*k,a[2]=f*l-m*e,a[3]=
l*p-q*k,a[4]=c*k-m*p,a[5]=m*q-c*l,a[6]=q*n-e*p,a[7]=f*p-c*n,a[8]=c*e-f*q,a};d.determinant=function(a){var d=a[3],c=a[4],f=a[5],m=a[6],q=a[7],e=a[8];return a[0]*(e*c-f*q)+a[1]*(-e*d+f*m)+a[2]*(q*d-c*m)};d.multiply=r;d.translate=function(a,d,c){var f=d[0],m=d[1],q=d[2],e=d[3],l=d[4],p=d[5],n=d[6],k=d[7];d=d[8];var r=c[0];c=c[1];return a[0]=f,a[1]=m,a[2]=q,a[3]=e,a[4]=l,a[5]=p,a[6]=r*f+c*e+n,a[7]=r*m+c*l+k,a[8]=r*q+c*p+d,a};d.rotate=function(a,d,c){var f=d[0],m=d[1],q=d[2],e=d[3],l=d[4],p=d[5],n=d[6],
k=d[7];d=d[8];var r=Math.sin(c);c=Math.cos(c);return a[0]=c*f+r*e,a[1]=c*m+r*l,a[2]=c*q+r*p,a[3]=c*e-r*f,a[4]=c*l-r*m,a[5]=c*p-r*q,a[6]=n,a[7]=k,a[8]=d,a};d.scale=function(a,d,c){var f=c[0];c=c[1];return a[0]=f*d[0],a[1]=f*d[1],a[2]=f*d[2],a[3]=c*d[3],a[4]=c*d[4],a[5]=c*d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=d[0],a[7]=d[1],a[8]=1,a};d.fromRotation=function(a,d){var c=Math.sin(d),f=Math.cos(d);return a[0]=f,a[1]=c,
a[2]=0,a[3]=-c,a[4]=f,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=0,a[4]=d[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromMat2d=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=0,a[3]=d[2],a[4]=d[3],a[5]=0,a[6]=d[4],a[7]=d[5],a[8]=1,a};d.fromQuat=function(a,d){var c=d[0],f=d[1],m=d[2],q=d[3],e=c+c,l=f+f,p=m+m,c=c*e,n=f*e,f=f*l,k=m*e,r=m*l,m=m*p,e=q*e,l=q*l,q=q*p;return a[0]=1-f-m,a[3]=n-q,a[6]=k+l,a[1]=n+q,a[4]=1-c-m,a[7]=r-e,a[2]=k-l,a[5]=r+e,a[8]=1-c-f,a};
d.normalFromMat4=function(a,d){var c=d[0],f=d[1],m=d[2],q=d[3],e=d[4],l=d[5],p=d[6],n=d[7],k=d[8],r=d[9],t=d[10],C=d[11],x=d[12],y=d[13],G=d[14],ob=d[15],I=c*l-f*e,S=c*p-m*e,H=c*n-q*e,A=f*p-m*l,ka=f*n-q*l,J=m*n-q*p,F=k*y-r*x,E=k*G-t*x,k=k*ob-C*x,ea=r*G-t*y,r=r*ob-C*y,t=t*ob-C*G;return(C=I*t-S*r+H*ea+A*k-ka*E+J*F)?(C=1/C,a[0]=(l*t-p*r+n*ea)*C,a[1]=(p*k-e*t-n*E)*C,a[2]=(e*r-l*k+n*F)*C,a[3]=(m*r-f*t-q*ea)*C,a[4]=(c*t-m*k+q*E)*C,a[5]=(f*k-c*r-q*F)*C,a[6]=(y*J-G*ka+ob*A)*C,a[7]=(G*H-x*J-ob*S)*C,a[8]=(x*
ka-y*H+ob*I)*C,a):null};d.projection=function(a,d,c){return a[0]=2/d,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/c,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};d.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],
a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a[6]=d[6]+c[6],a[7]=d[7]+c[7],a[8]=d[8]+c[8],a};d.subtract=q;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a[6]=d[6]*c,a[7]=d[7]*c,a[8]=d[8]*c,a};d.multiplyScalarAndAdd=function(a,d,c,f){return a[0]=d[0]+c[0]*f,a[1]=d[1]+c[1]*f,a[2]=d[2]+c[2]*f,a[3]=d[3]+c[3]*f,a[4]=d[4]+c[4]*f,a[5]=d[5]+c[5]*f,a[6]=d[6]+c[6]*f,a[7]=d[7]+c[7]*f,a[8]=d[8]+c[8]*f,a};d.exactEquals=function(a,
d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]};d.equals=function(a,d){var c=a[0],f=a[1],q=a[2],r=a[3],e=a[4],l=a[5],p=a[6],n=a[7],k=a[8],t=d[0],w=d[1],C=d[2],x=d[3],y=d[4],G=d[5],ob=d[6],I=d[7],S=d[8];return Math.abs(c-t)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(f-w)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(q-C)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(C))&&Math.abs(r-x)<=m.EPSILON*Math.max(1,
Math.abs(r),Math.abs(x))&&Math.abs(e-y)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(l-G)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(p-ob)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(ob))&&Math.abs(n-I)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(k-S)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(S))};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d["default"]=a,d}(f(0));
d.mul=r;d.sub=q},function(a,d,f){function r(){var a=new v.ARRAY_TYPE(2);return v.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0),a}function q(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function m(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a}function b(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a}function g(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)}function c(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d}function h(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function t(a){var b=
a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.sqrDist=d.dist=d.div=d.mul=d.sub=d.len=void 0;d.create=r;d.clone=function(a){var b=new v.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b};d.fromValues=function(a,b){var c=new v.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c};d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a};d.set=function(a,b,c){return a[0]=b,a[1]=c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a};d.subtract=q;d.multiply=m;d.divide=
b;d.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a};d.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a};d.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a};d.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};d.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a};d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};d.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*
d,a[1]=b[1]+c[1]*d,a};d.distance=g;d.squaredDistance=c;d.length=h;d.squaredLength=t;d.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};d.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a};d.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a};d.lerp=function(a,b,c,d){var g=b[0];b=b[1];return a[0]=g+d*(c[0]-g),a[1]=
b+d*(c[1]-b),a};d.random=function(a,b){b=b||1;var c=2*v.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};d.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a};d.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*b+c[5],a};d.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a};d.transformMat4=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*
d+c[4]*b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a};d.rotate=function(a,b,c,d){var g=b[0]-c[0];b=b[1]-c[1];var f=Math.sin(d);d=Math.cos(d);return a[0]=g*d-b*f+c[0],a[1]=g*f+b*d+c[1],a};d.angle=function(a,b){var c=a[0],d=a[1],g=b[0],f=b[1],h=c*c+d*d;0<h&&(h=1/Math.sqrt(h));var m=g*g+f*f;0<m&&(m=1/Math.sqrt(m));c=(c*g+d*f)*h*m;return 1<c?0:-1>c?Math.PI:Math.acos(c)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.equals=function(a,b){var c=a[0],
d=a[1],g=b[0],f=b[1];return Math.abs(c-g)<=v.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(d-f)<=v.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))};var v=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(f(0));d.len=h;d.sub=q;d.mul=m;d.div=b;d.dist=g;d.sqrDist=c;d.sqrLen=t;d.forEach=function(){var a=r();return function(b,c,d,g,f,h){var m=void 0,q=void 0;c||(c=2);d||(d=0);q=g?Math.min(g*c+d,
b.length):b.length;for(m=d;m<q;m+=c)a[0]=b[m],a[1]=b[m+1],f(a,a,h),b[m]=a[0],b[m+1]=a[1];return b}}()},function(a,d,f){function r(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function q(a,b,c){var d=.5*c[0],g=.5*c[1];c=.5*c[2];var f=b[0],h=b[1],m=b[2];b=b[3];return a[0]=f,a[1]=h,a[2]=m,a[3]=b,a[4]=d*b+g*m-c*h,a[5]=g*b+c*f-d*m,a[6]=c*b+d*h-g*f,a[7]=-d*f-g*h-c*m,a}function m(a,b){return a[0]=b[0],a[1]=
b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a}function b(a,b,c){var d=b[0],g=b[1],f=b[2],h=b[3],m=c[4],q=c[5],r=c[6],t=c[7],v=b[4],C=b[5],B=b[6];b=b[7];var x=c[0],A=c[1],ka=c[2];c=c[3];return a[0]=d*c+h*x+g*ka-f*A,a[1]=g*c+h*A+f*x-d*ka,a[2]=f*c+h*ka+d*A-g*x,a[3]=h*c-d*x-g*A-f*ka,a[4]=d*t+h*m+g*r-f*q+v*c+b*x+C*ka-B*A,a[5]=g*t+h*q+f*m-d*r+C*c+b*A+B*x-v*ka,a[6]=f*t+h*r+d*q-g*m+B*c+b*ka+v*A-C*x,a[7]=h*t-d*m-g*q-f*r+b*c-v*x-C*A-B*ka,a}Object.defineProperty(d,"__esModule",{value:!0});
d.sqrLen=d.squaredLength=d.len=d.length=d.dot=d.mul=d.setReal=d.getReal=void 0;d.create=function(){var a=new g.ARRAY_TYPE(8);g.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);return a[3]=1,a};d.clone=function(a){var b=new g.ARRAY_TYPE(8);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b};d.fromValues=function(a,b,c,d,f,h,m,q){var r=new g.ARRAY_TYPE(8);return r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=f,r[5]=h,r[6]=m,r[7]=q,r};d.fromRotationTranslationValues=
function(a,b,c,d,f,h,m){var q=new g.ARRAY_TYPE(8);q[0]=a;q[1]=b;q[2]=c;q[3]=d;f*=.5;h*=.5;m*=.5;return q[4]=f*d+h*c-m*b,q[5]=h*d+m*a-f*c,q[6]=m*d+f*b-h*a,q[7]=-f*a-h*b-m*c,q};d.fromRotationTranslation=q;d.fromTranslation=function(a,b){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=.5*b[0],a[5]=.5*b[1],a[6]=.5*b[2],a[7]=0,a};d.fromRotation=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.fromMat4=function(a,b){var d=c.create();h.getRotation(d,b);var f=new g.ARRAY_TYPE(3);
return h.getTranslation(f,b),q(a,d,f),a};d.copy=m;d.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.set=function(a,b,c,d,g,f,h,m,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=g,a[4]=f,a[5]=h,a[6]=m,a[7]=q,a};d.getDual=function(a,b){return a[0]=b[4],a[1]=b[5],a[2]=b[6],a[3]=b[7],a};d.setDual=function(a,b){return a[4]=b[0],a[5]=b[1],a[6]=b[2],a[7]=b[3],a};d.getTranslation=function(a,b){var c=b[4],d=b[5],g=b[6],f=b[7],h=-b[0],m=-b[1],q=-b[2],r=b[3];return a[0]=2*(c*r+f*
h+d*q-g*m),a[1]=2*(d*r+f*m+g*h-c*q),a[2]=2*(g*r+f*q+c*m-d*h),a};d.translate=function(a,b,c){var d=b[0],g=b[1],f=b[2],h=b[3],m=.5*c[0],q=.5*c[1];c=.5*c[2];var r=b[4],t=b[5],v=b[6];b=b[7];return a[0]=d,a[1]=g,a[2]=f,a[3]=h,a[4]=h*m+g*c-f*q+r,a[5]=h*q+f*m-d*c+t,a[6]=h*c+d*q-g*m+v,a[7]=-d*m-g*q-f*c+b,a};d.rotateX=function(a,b,d){var g=-b[0],f=-b[1],h=-b[2],m=b[3],q=b[4],r=b[5],t=b[6],v=b[7],C=q*m+v*g+r*h-t*f,B=r*m+v*f+t*g-q*h,x=t*m+v*h+q*f-r*g,q=v*m-q*g-r*f-t*h;return c.rotateX(a,b,d),g=a[0],f=a[1],h=
a[2],m=a[3],a[4]=C*m+q*g+B*h-x*f,a[5]=B*m+q*f+x*g-C*h,a[6]=x*m+q*h+C*f-B*g,a[7]=q*m-C*g-B*f-x*h,a};d.rotateY=function(a,b,d){var g=-b[0],f=-b[1],h=-b[2],m=b[3],q=b[4],r=b[5],t=b[6],v=b[7],C=q*m+v*g+r*h-t*f,B=r*m+v*f+t*g-q*h,x=t*m+v*h+q*f-r*g,q=v*m-q*g-r*f-t*h;return c.rotateY(a,b,d),g=a[0],f=a[1],h=a[2],m=a[3],a[4]=C*m+q*g+B*h-x*f,a[5]=B*m+q*f+x*g-C*h,a[6]=x*m+q*h+C*f-B*g,a[7]=q*m-C*g-B*f-x*h,a};d.rotateZ=function(a,b,d){var g=-b[0],f=-b[1],h=-b[2],m=b[3],q=b[4],r=b[5],t=b[6],v=b[7],C=q*m+v*g+r*h-
t*f,B=r*m+v*f+t*g-q*h,x=t*m+v*h+q*f-r*g,q=v*m-q*g-r*f-t*h;return c.rotateZ(a,b,d),g=a[0],f=a[1],h=a[2],m=a[3],a[4]=C*m+q*g+B*h-x*f,a[5]=B*m+q*f+x*g-C*h,a[6]=x*m+q*h+C*f-B*g,a[7]=q*m-C*g-B*f-x*h,a};d.rotateByQuatAppend=function(a,b,c){var d=c[0],g=c[1],f=c[2];c=c[3];var h=b[0],m=b[1],q=b[2],r=b[3];return a[0]=h*c+r*d+m*f-q*g,a[1]=m*c+r*g+q*d-h*f,a[2]=q*c+r*f+h*g-m*d,a[3]=r*c-h*d-m*g-q*f,h=b[4],m=b[5],q=b[6],r=b[7],a[4]=h*c+r*d+m*f-q*g,a[5]=m*c+r*g+q*d-h*f,a[6]=q*c+r*f+h*g-m*d,a[7]=r*c-h*d-m*g-q*f,
a};d.rotateByQuatPrepend=function(a,b,c){var d=b[0],g=b[1],f=b[2];b=b[3];var h=c[0],m=c[1],q=c[2],r=c[3];return a[0]=d*r+b*h+g*q-f*m,a[1]=g*r+b*m+f*h-d*q,a[2]=f*r+b*q+d*m-g*h,a[3]=b*r-d*h-g*m-f*q,h=c[4],m=c[5],q=c[6],r=c[7],a[4]=d*r+b*h+g*q-f*m,a[5]=g*r+b*m+f*h-d*q,a[6]=f*r+b*q+d*m-g*h,a[7]=b*r-d*h-g*m-f*q,a};d.rotateAroundAxis=function(a,b,c,d){if(Math.abs(d)<g.EPSILON)return m(a,b);var f=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);d*=.5;var h=Math.sin(d),q=h*c[0]/f,r=h*c[1]/f;c=h*c[2]/f;d=Math.cos(d);
var f=b[0],h=b[1],t=b[2],v=b[3];a[0]=f*d+v*q+h*c-t*r;a[1]=h*d+v*r+t*q-f*c;a[2]=t*d+v*c+f*r-h*q;a[3]=v*d-f*q-h*r-t*c;f=b[4];h=b[5];t=b[6];b=b[7];return a[4]=f*d+b*q+h*c-t*r,a[5]=h*d+b*r+t*q-f*c,a[6]=t*d+b*c+f*r-h*q,a[7]=b*d-f*q-h*r-t*c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a};d.multiply=b;d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*
c,a[6]=b[6]*c,a[7]=b[7]*c,a};d.lerp=function(a,b,c,d){var g=1-d;0>t(b,c)&&(d=-d);return a[0]=b[0]*g+c[0]*d,a[1]=b[1]*g+c[1]*d,a[2]=b[2]*g+c[2]*d,a[3]=b[3]*g+c[3]*d,a[4]=b[4]*g+c[4]*d,a[5]=b[5]*g+c[5]*d,a[6]=b[6]*g+c[6]*d,a[7]=b[7]*g+c[7]*d,a};d.invert=function(a,b){var c=v(b);return a[0]=-b[0]/c,a[1]=-b[1]/c,a[2]=-b[2]/c,a[3]=b[3]/c,a[4]=-b[4]/c,a[5]=-b[5]/c,a[6]=-b[6]/c,a[7]=b[7]/c,a};d.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a[4]=-b[4],a[5]=-b[5],a[6]=-b[6],a[7]=
b[7],a};d.normalize=function(a,b){var c=v(b);if(0<c){var c=Math.sqrt(c),d=b[0]/c,g=b[1]/c,f=b[2]/c,h=b[3]/c,m=b[4],q=b[5],r=b[6],t=b[7],C=d*m+g*q+f*r+h*t;a[0]=d;a[1]=g;a[2]=f;a[3]=h;a[4]=(m-d*C)/c;a[5]=(q-g*C)/c;a[6]=(r-f*C)/c;a[7]=(t-h*C)/c}return a};d.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};
d.equals=function(a,b){var c=a[0],d=a[1],f=a[2],h=a[3],m=a[4],q=a[5],r=a[6],t=a[7],v=b[0],C=b[1],B=b[2],x=b[3],H=b[4],A=b[5],ka=b[6],J=b[7];return Math.abs(c-v)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(d-C)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-B)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(h-x)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(m-H)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(H))&&Math.abs(q-A)<=g.EPSILON*Math.max(1,Math.abs(q),
Math.abs(A))&&Math.abs(r-ka)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(ka))&&Math.abs(t-J)<=g.EPSILON*Math.max(1,Math.abs(t),Math.abs(J))};var g=r(f(0)),c=r(f(3)),h=r(f(4));d.getReal=c.copy;d.setReal=c.copy;d.mul=b;var t=d.dot=c.dot;a=d.length=c.length;var v=(d.len=a,d.squaredLength=c.squaredLength);d.sqrLen=v},function(a,d,f){function r(a,d,c){var f=d[0],m=d[1],q=d[2],e=d[3],l=d[4];d=d[5];var p=c[0],n=c[1],k=c[2],r=c[3],t=c[4];c=c[5];return a[0]=f*p+q*n,a[1]=m*p+e*n,a[2]=f*k+q*r,a[3]=m*k+e*r,a[4]=
f*t+q*c+l,a[5]=m*t+e*c+d,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(6);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new m.ARRAY_TYPE(6);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],
a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};d.fromValues=function(a,d,c,f,q,r){var e=new m.ARRAY_TYPE(6);return e[0]=a,e[1]=d,e[2]=c,e[3]=f,e[4]=q,e[5]=r,e};d.set=function(a,d,c,f,m,q,e){return a[0]=d,a[1]=c,a[2]=f,a[3]=m,a[4]=q,a[5]=e,a};d.invert=function(a,d){var c=d[0],f=d[1],m=d[2],q=d[3],e=d[4],l=d[5],p=c*q-f*m;return p?(p=1/p,a[0]=q*p,a[1]=-f*p,a[2]=-m*p,a[3]=c*p,a[4]=(m*l-q*e)*p,a[5]=(f*e-c*l)*p,a):null};d.determinant=
function(a){return a[0]*a[3]-a[1]*a[2]};d.multiply=r;d.rotate=function(a,d,c){var f=d[0],m=d[1],q=d[2],e=d[3],l=d[4];d=d[5];var p=Math.sin(c);c=Math.cos(c);return a[0]=f*c+q*p,a[1]=m*c+e*p,a[2]=f*-p+q*c,a[3]=m*-p+e*c,a[4]=l,a[5]=d,a};d.scale=function(a,d,c){var f=d[1],m=d[2],q=d[3],e=d[4],l=d[5],p=c[0];c=c[1];return a[0]=d[0]*p,a[1]=f*p,a[2]=m*c,a[3]=q*c,a[4]=e,a[5]=l,a};d.translate=function(a,d,c){var f=d[0],m=d[1],q=d[2],e=d[3],l=d[4];d=d[5];var p=c[0];c=c[1];return a[0]=f,a[1]=m,a[2]=q,a[3]=e,
a[4]=f*p+q*c+l,a[5]=m*p+e*c+d,a};d.fromRotation=function(a,d){var c=Math.sin(d),f=Math.cos(d);return a[0]=f,a[1]=c,a[2]=-c,a[3]=f,a[4]=0,a[5]=0,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],a[4]=0,a[5]=0,a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=d[0],a[5]=d[1],a};d.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+
Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a};d.subtract=q;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a};d.multiplyScalarAndAdd=function(a,d,c,f){return a[0]=d[0]+c[0]*f,a[1]=d[1]+c[1]*f,a[2]=d[2]+c[2]*f,a[3]=d[3]+c[3]*f,a[4]=d[4]+c[4]*f,a[5]=d[5]+c[5]*f,a};d.exactEquals=function(a,d){return a[0]===d[0]&&
a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]};d.equals=function(a,d){var c=a[0],f=a[1],q=a[2],r=a[3],e=a[4],l=a[5],p=d[0],n=d[1],k=d[2],t=d[3],C=d[4],x=d[5];return Math.abs(c-p)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(f-n)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(n))&&Math.abs(q-k)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(k))&&Math.abs(r-t)<=m.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))&&Math.abs(e-C)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(C))&&Math.abs(l-
x)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d["default"]=a,d}(f(0));d.mul=r;d.sub=q},function(a,d,f){function r(a,d,c){var f=d[0],m=d[1],q=d[2];d=d[3];var e=c[0],l=c[1],p=c[2];c=c[3];return a[0]=f*e+q*l,a[1]=m*e+d*l,a[2]=f*p+q*c,a[3]=m*p+d*c,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a}Object.defineProperty(d,
"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(4);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new m.ARRAY_TYPE(4);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a};d.fromValues=function(a,d,c,f){var q=new m.ARRAY_TYPE(4);return q[0]=a,q[1]=d,q[2]=c,q[3]=f,q};d.set=function(a,d,c,
f,m){return a[0]=d,a[1]=c,a[2]=f,a[3]=m,a};d.transpose=function(a,d){if(a===d){var c=d[1];a[1]=d[2];a[2]=c}else a[0]=d[0],a[1]=d[2],a[2]=d[1],a[3]=d[3];return a};d.invert=function(a,d){var c=d[0],f=d[1],m=d[2],q=d[3],e=c*q-m*f;return e?(e=1/e,a[0]=q*e,a[1]=-f*e,a[2]=-m*e,a[3]=c*e,a):null};d.adjoint=function(a,d){var c=d[0];return a[0]=d[3],a[1]=-d[1],a[2]=-d[2],a[3]=c,a};d.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};d.multiply=r;d.rotate=function(a,d,c){var f=d[0],m=d[1],q=d[2];d=d[3];var e=
Math.sin(c);c=Math.cos(c);return a[0]=f*c+q*e,a[1]=m*c+d*e,a[2]=f*-e+q*c,a[3]=m*-e+d*c,a};d.scale=function(a,d,c){var f=d[1],m=d[2],q=d[3],e=c[0];c=c[1];return a[0]=d[0]*e,a[1]=f*e,a[2]=m*c,a[3]=q*c,a};d.fromRotation=function(a,d){var c=Math.sin(d),f=Math.cos(d);return a[0]=f,a[1]=c,a[2]=-c,a[3]=f,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],a};d.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],
2)+Math.pow(a[2],2)+Math.pow(a[3],2))};d.LDU=function(a,d,c,f){return a[2]=f[2]/f[0],c[0]=f[0],c[1]=f[1],c[3]=f[3]-a[2]*c[1],[a,d,c]};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a};d.subtract=q;d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]};d.equals=function(a,d){var c=a[0],f=a[1],q=a[2],r=a[3],e=d[0],l=d[1],p=d[2],n=d[3];return Math.abs(c-e)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(f-l)<=m.EPSILON*
Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(q-p)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(p))&&Math.abs(r-n)<=m.EPSILON*Math.max(1,Math.abs(r),Math.abs(n))};d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a};d.multiplyScalarAndAdd=function(a,d,c,f){return a[0]=d[0]+c[0]*f,a[1]=d[1]+c[1]*f,a[2]=d[2]+c[2]*f,a[3]=d[3]+c[3]*f,a};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=
a[c]);return d["default"]=a,d}(f(0));d.mul=r;d.sub=q},function(a,d,f){function r(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(d,"__esModule",{value:!0});d.vec4=d.vec3=d.vec2=d.quat2=d.quat=d.mat4=d.mat3=d.mat2d=d.mat2=d.glMatrix=void 0;a=r(f(0));var q=r(f(9)),m=r(f(8)),b=r(f(5)),g=r(f(4)),c=r(f(3)),h=r(f(7)),t=r(f(6)),v=r(f(2));f=r(f(1));d.glMatrix=a;d.mat2=q;d.mat2d=m;d.mat3=
b;d.mat4=g;d.quat=c;d.quat2=h;d.vec2=t;d.vec3=v;d.vec4=f}])})},{}],75:[function(f,t,x){t.exports=function(a,d,f){a[0]=d[0]+f[0];a[1]=d[1]+f[1];a[2]=d[2]+f[2];return a}},{}],76:[function(f,t,x){t.exports=function(f,q){var m=a(f[0],f[1],f[2]),b=a(q[0],q[1],q[2]);d(m,m);d(b,b);m=C(m,b);return 1<m?0:Math.acos(m)};var a=f("./fromValues"),d=f("./normalize"),C=f("./dot")},{"./dot":86,"./fromValues":92,"./normalize":103}],77:[function(f,t,x){t.exports=function(a,d){a[0]=Math.ceil(d[0]);a[1]=Math.ceil(d[1]);
a[2]=Math.ceil(d[2]);return a}},{}],78:[function(f,t,x){t.exports=function(a){var d=new Float32Array(3);d[0]=a[0];d[1]=a[1];d[2]=a[2];return d}},{}],79:[function(f,t,x){t.exports=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];return a}},{}],80:[function(f,t,x){t.exports=function(){var a=new Float32Array(3);a[0]=0;a[1]=0;a[2]=0;return a}},{}],81:[function(f,t,x){t.exports=function(a,d,f){var r=d[0],q=d[1];d=d[2];var m=f[0],b=f[1];f=f[2];a[0]=q*f-d*b;a[1]=d*m-r*f;a[2]=r*b-q*m;return a}},{}],82:[function(f,
t,x){t.exports=f("./distance")},{"./distance":83}],83:[function(f,t,x){t.exports=function(a,d){var f=d[0]-a[0],r=d[1]-a[1],q=d[2]-a[2];return Math.sqrt(f*f+r*r+q*q)}},{}],84:[function(f,t,x){t.exports=f("./divide")},{"./divide":85}],85:[function(f,t,x){t.exports=function(a,d,f){a[0]=d[0]/f[0];a[1]=d[1]/f[1];a[2]=d[2]/f[2];return a}},{}],86:[function(f,t,x){t.exports=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]}},{}],87:[function(f,t,x){t.exports=1E-6},{}],88:[function(f,t,x){t.exports=function(d,
f){var r=d[0],q=d[1],m=d[2],b=f[0],g=f[1],c=f[2];return Math.abs(r-b)<=a*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(q-g)<=a*Math.max(1,Math.abs(q),Math.abs(g))&&Math.abs(m-c)<=a*Math.max(1,Math.abs(m),Math.abs(c))};var a=f("./epsilon")},{"./epsilon":87}],89:[function(f,t,x){t.exports=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]}},{}],90:[function(f,t,x){t.exports=function(a,d){a[0]=Math.floor(d[0]);a[1]=Math.floor(d[1]);a[2]=Math.floor(d[2]);return a}},{}],91:[function(f,t,x){t.exports=
function(d,f,r,q,m,b){f||(f=3);r||(r=0);for(q=q?Math.min(q*f+r,d.length):d.length;r<q;r+=f)a[0]=d[r],a[1]=d[r+1],a[2]=d[r+2],m(a,a,b),d[r]=a[0],d[r+1]=a[1],d[r+2]=a[2];return d};var a=f("./create")()},{"./create":80}],92:[function(f,t,x){t.exports=function(a,d,f){var r=new Float32Array(3);r[0]=a;r[1]=d;r[2]=f;return r}},{}],93:[function(f,t,x){t.exports={EPSILON:f("./epsilon"),create:f("./create"),clone:f("./clone"),angle:f("./angle"),fromValues:f("./fromValues"),copy:f("./copy"),set:f("./set"),equals:f("./equals"),
exactEquals:f("./exactEquals"),add:f("./add"),subtract:f("./subtract"),sub:f("./sub"),multiply:f("./multiply"),mul:f("./mul"),divide:f("./divide"),div:f("./div"),min:f("./min"),max:f("./max"),floor:f("./floor"),ceil:f("./ceil"),round:f("./round"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),dist:f("./dist"),squaredDistance:f("./squaredDistance"),sqrDist:f("./sqrDist"),length:f("./length"),len:f("./len"),squaredLength:f("./squaredLength"),sqrLen:f("./sqrLen"),negate:f("./negate"),
inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),cross:f("./cross"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformMat3:f("./transformMat3"),transformQuat:f("./transformQuat"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),forEach:f("./forEach")}},{"./add":75,"./angle":76,"./ceil":77,"./clone":78,"./copy":79,"./create":80,"./cross":81,"./dist":82,"./distance":83,"./div":84,"./divide":85,"./dot":86,"./epsilon":87,"./equals":88,
"./exactEquals":89,"./floor":90,"./forEach":91,"./fromValues":92,"./inverse":94,"./len":95,"./length":96,"./lerp":97,"./max":98,"./min":99,"./mul":100,"./multiply":101,"./negate":102,"./normalize":103,"./random":104,"./rotateX":105,"./rotateY":106,"./rotateZ":107,"./round":108,"./scale":109,"./scaleAndAdd":110,"./set":111,"./sqrDist":112,"./sqrLen":113,"./squaredDistance":114,"./squaredLength":115,"./sub":116,"./subtract":117,"./transformMat3":118,"./transformMat4":119,"./transformQuat":120}],94:[function(f,
t,x){t.exports=function(a,d){a[0]=1/d[0];a[1]=1/d[1];a[2]=1/d[2];return a}},{}],95:[function(f,t,x){t.exports=f("./length")},{"./length":96}],96:[function(f,t,x){t.exports=function(a){var d=a[0],f=a[1];a=a[2];return Math.sqrt(d*d+f*f+a*a)}},{}],97:[function(f,t,x){t.exports=function(a,d,f,r){var q=d[0],m=d[1];d=d[2];a[0]=q+r*(f[0]-q);a[1]=m+r*(f[1]-m);a[2]=d+r*(f[2]-d);return a}},{}],98:[function(f,t,x){t.exports=function(a,d,f){a[0]=Math.max(d[0],f[0]);a[1]=Math.max(d[1],f[1]);a[2]=Math.max(d[2],
f[2]);return a}},{}],99:[function(f,t,x){t.exports=function(a,d,f){a[0]=Math.min(d[0],f[0]);a[1]=Math.min(d[1],f[1]);a[2]=Math.min(d[2],f[2]);return a}},{}],100:[function(f,t,x){t.exports=f("./multiply")},{"./multiply":101}],101:[function(f,t,x){t.exports=function(a,d,f){a[0]=d[0]*f[0];a[1]=d[1]*f[1];a[2]=d[2]*f[2];return a}},{}],102:[function(f,t,x){t.exports=function(a,d){a[0]=-d[0];a[1]=-d[1];a[2]=-d[2];return a}},{}],103:[function(f,t,x){t.exports=function(a,d){var f=d[0],r=d[1],q=d[2],f=f*f+
r*r+q*q;0<f&&(f=1/Math.sqrt(f),a[0]=d[0]*f,a[1]=d[1]*f,a[2]=d[2]*f);return a}},{}],104:[function(f,t,x){t.exports=function(a,d){d=d||1;var f=2*Math.random()*Math.PI,r=2*Math.random()-1,q=Math.sqrt(1-r*r)*d;a[0]=Math.cos(f)*q;a[1]=Math.sin(f)*q;a[2]=r*d;return a}},{}],105:[function(f,t,x){t.exports=function(a,d,f,r){var q=f[1];f=f[2];var m=d[1]-q,b=d[2]-f,g=Math.sin(r);r=Math.cos(r);a[0]=d[0];a[1]=q+m*r-b*g;a[2]=f+m*g+b*r;return a}},{}],106:[function(f,t,x){t.exports=function(a,d,f,r){var q=f[0];f=
f[2];var m=d[0]-q,b=d[2]-f,g=Math.sin(r);r=Math.cos(r);a[0]=q+b*g+m*r;a[1]=d[1];a[2]=f+b*r-m*g;return a}},{}],107:[function(f,t,x){t.exports=function(a,d,f,r){var q=f[0];f=f[1];var m=d[0]-q,b=d[1]-f,g=Math.sin(r);r=Math.cos(r);a[0]=q+m*r-b*g;a[1]=f+m*g+b*r;a[2]=d[2];return a}},{}],108:[function(f,t,x){t.exports=function(a,d){a[0]=Math.round(d[0]);a[1]=Math.round(d[1]);a[2]=Math.round(d[2]);return a}},{}],109:[function(f,t,x){t.exports=function(a,d,f){a[0]=d[0]*f;a[1]=d[1]*f;a[2]=d[2]*f;return a}},
{}],110:[function(f,t,x){t.exports=function(a,d,f,r){a[0]=d[0]+f[0]*r;a[1]=d[1]+f[1]*r;a[2]=d[2]+f[2]*r;return a}},{}],111:[function(f,t,x){t.exports=function(a,d,f,r){a[0]=d;a[1]=f;a[2]=r;return a}},{}],112:[function(f,t,x){t.exports=f("./squaredDistance")},{"./squaredDistance":114}],113:[function(f,t,x){t.exports=f("./squaredLength")},{"./squaredLength":115}],114:[function(f,t,x){t.exports=function(a,d){var f=d[0]-a[0],r=d[1]-a[1],q=d[2]-a[2];return f*f+r*r+q*q}},{}],115:[function(f,t,x){t.exports=
function(a){var d=a[0],f=a[1];a=a[2];return d*d+f*f+a*a}},{}],116:[function(f,t,x){t.exports=f("./subtract")},{"./subtract":117}],117:[function(f,t,x){t.exports=function(a,d,f){a[0]=d[0]-f[0];a[1]=d[1]-f[1];a[2]=d[2]-f[2];return a}},{}],118:[function(f,t,x){t.exports=function(a,d,f){var r=d[0],q=d[1];d=d[2];a[0]=r*f[0]+q*f[3]+d*f[6];a[1]=r*f[1]+q*f[4]+d*f[7];a[2]=r*f[2]+q*f[5]+d*f[8];return a}},{}],119:[function(f,t,x){t.exports=function(a,d,f){var r=d[0],q=d[1];d=d[2];var m=f[3]*r+f[7]*q+f[11]*d+
f[15],m=m||1;a[0]=(f[0]*r+f[4]*q+f[8]*d+f[12])/m;a[1]=(f[1]*r+f[5]*q+f[9]*d+f[13])/m;a[2]=(f[2]*r+f[6]*q+f[10]*d+f[14])/m;return a}},{}],120:[function(f,t,x){t.exports=function(a,d,f){var r=d[0],q=d[1],m=d[2];d=f[0];var b=f[1],g=f[2];f=f[3];var c=f*r+b*m-g*q,h=f*q+g*r-d*m,t=f*m+d*q-b*r,r=-d*r-b*q-g*m;a[0]=c*f+r*-d+h*-g-t*-b;a[1]=h*f+r*-b+t*-d-c*-g;a[2]=t*f+r*-g+c*-b-h*-d;return a}},{}],121:[function(f,t,x){(function(a){function d(){m.forEach(function(a){b[q[a]]=!1})}function x(a){b[q[a.keyCode]]=
!1}function r(a){b[q[a.keyCode]]=!0}var q=f("vkey"),m=Object.keys(q),b={};d();t.exports=function(a){return a?b[a]:b};a.browser&&(window.addEventListener("keydown",r,!1),window.addEventListener("keyup",x,!1),window.addEventListener("blur",d,!1))}).call(this,f("_process"))},{_process:123,vkey:126}],122:[function(f,t,x){function a(a,b,d){this.rotation=a;this.center=b;this.distance=d}function d(a,b){var d=b[0],f=b[1],d=d*d+f*f;1<d&&(d=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-d);a[3]=0}f=f("gl-matrix");
var C=f.vec3,r=f.mat3,q=f.mat4,m=f.quat,b=new Float32Array(16),g=new Float32Array(16);f=a.prototype;f.view=function(a){a||(a=q.create());g[0]=g[1]=0;g[2]=-this.distance;q.fromRotationTranslation(a,m.conjugate(b,this.rotation),g);q.translate(a,a,C.negate(b,this.center));return a};f.lookAt=function(a,d,f){q.lookAt(b,a,d,f);r.fromMat4(b,b);m.fromMat3(this.rotation,b);C.copy(this.center,d);this.distance=C.distance(a,d)};f.pan=function(a){var d=this.distance;b[0]=-d*(a[0]||0);b[1]=d*(a[1]||0);b[2]=d*(a[2]||
0);C.transformQuat(b,b,this.rotation);C.add(this.center,this.center,b)};f.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};f.rotate=function(a,f){d(b,a);d(g,f);m.invert(g,g);m.multiply(b,b,g);1E-6>m.length(b)||(m.multiply(this.rotation,this.rotation,b),m.normalize(this.rotation,this.rotation))};t.exports=function(b,d,f){b=b||[0,0,-1];d=d||[0,0,0];f=f||[0,1,0];var g=new a(m.create(),C.create(),1);g.lookAt(b,d,f);return g}},{"gl-matrix":74}],123:[function(f,t,x){function a(){throw Error("setTimeout has not been defined");
}function d(){throw Error("clearTimeout has not been defined");}function C(b){if(c===setTimeout)return setTimeout(b,0);if((c===a||!c)&&setTimeout)return c=setTimeout,setTimeout(b,0);try{return c(b,0)}catch(d){try{return c.call(null,b,0)}catch(e){return c.call(this,b,0)}}}function r(a){if(h===clearTimeout)return clearTimeout(a);if((h===d||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(a);try{return h(a)}catch(b){try{return h.call(null,a)}catch(c){return h.call(this,a)}}}function q(){v&&e&&(v=
!1,e.length?B=e.concat(B):l=-1,B.length&&m())}function m(){if(!v){var a=C(q);v=!0;for(var b=B.length;b;){e=B;for(B=[];++l<b;)e&&e[l].run();l=-1;b=B.length}e=null;v=!1;r(a)}}function b(a,b){this.fun=a;this.array=b}function g(){}f=t.exports={};var c,h;try{c="function"===typeof setTimeout?setTimeout:a}catch(p){c=a}try{h="function"===typeof clearTimeout?clearTimeout:d}catch(p){h=d}var B=[],v=!1,e,l=-1;f.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-
1]=arguments[d];B.push(new b(a,c));1!==B.length||v||C(m)};b.prototype.run=function(){this.fun.apply(null,this.array)};f.title="browser";f.browser=!0;f.env={};f.argv=[];f.version="";f.versions={};f.on=g;f.addListener=g;f.once=g;f.off=g;f.removeListener=g;f.removeAllListeners=g;f.emit=g;f.prependListener=g;f.prependOnceListener=g;f.listeners=function(a){return[]};f.binding=function(a){throw Error("process.binding is not supported");};f.cwd=function(){return"/"};f.chdir=function(a){throw Error("process.chdir is not supported");
};f.umask=function(){return 0}},{}],124:[function(f,t,x){function a(a){throw Error("resl: "+a);}function d(b,d,c){Object.keys(b).forEach(function(b){0>d.indexOf(b)&&a('invalid parameter "'+b+'" in '+c)})}function C(a,d){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=d}var r=["manifest","onDone","onProgress","onError"],q=["type","src","stream","credentials","parser"],m=["onData","onDone"];t.exports=function(b){function f(c,d){if(c in b){var e=b[c];"function"!==typeof e&&a('invalid callback "'+
c+'"');return e}return null}function c(a){function b(){if(!(2>g.readyState||1===l.state||-1===l.state)){if(200!==g.status)return t('error loading resource "'+a.name+'"');if(2<g.readyState&&0===l.state){var d;d="binary"===a.type?g.response:g.responseText;if(f.data)try{h=f.data(d)}catch(e){return t(e)}else h=d}if(3<g.readyState&&0===l.state){if(f.done)try{h=f.done()}catch(e){return t(e)}l.state=1}k[c]=h;l.progress=.75*l.progress+.25;l.ready=a.stream&&!!h||1===l.state;v()}}var c=a.name,d=a.stream,e=
"binary"===a.type,f=a.parser,g=new XMLHttpRequest,h=null,l=new C(c,function(){1!==l.state&&-1!==l.state&&(g.onreadystatechange=null,g.abort(),l.state=-1)});g.onreadystatechange=d?b:function(){4===g.readyState&&b()};e&&(g.responseType="arraybuffer");a.credentials&&(g.withCredentials=!0);g.open("GET",a.src,!0);g.send();return l}function h(a,b){function c(){if(0===m.state)if(l.data)try{n=l.data(b)}catch(a){return t(a)}else n=b}function d(a){c();k[h]=n;m.progress=a.lengthComputable?Math.max(m.progress,
a.loaded/a.total):.75*m.progress+.25;v(h)}function e(){c();if(0===m.state){if(l.done)try{n=l.done()}catch(a){return t(a)}m.state=1}m.progress=1;m.ready=!0;k[h]=n;g();v("finish "+h)}function f(){t('error loading asset "'+h+'"')}function g(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",e):b.addEventListener("canplay",e);b.removeEventListener("error",f)}var h=a.name,l=a.parser,m=new C(h,function(){1!==m.state&&-1!==m.state&&(m.state=-1,g(),b.src="")}),n=b;
a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",e);else{var p=!1,q=!1;b.addEventListener("loadedmetadata",function(){q=!0;p&&e()});b.addEventListener("canplay",function(){p=!0;q&&e()})}b.addEventListener("error",f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return m}function t(a){-1!==u&&1!==u&&(u=-1,x.forEach(function(a){a.cancel()}),n?"string"===typeof a?n(Error("resl: "+a)):n(a):console.error("resl error:",a))}function v(a){if(-1!==
u&&1!==u){var b=0,c=0;x.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===x.length?(u=1,l(k)):p&&p(b/x.length,a)}}"object"===typeof b&&b||a("invalid or missing configuration");d(b,r,"config");var e=b.manifest;"object"===typeof e&&e||a("missing manifest");var l=f("onDone");l||a("missing onDone() callback");var p=f("onProgress"),n=f("onError"),k={},u=0,w={text:c,binary:function(a){return c(a)},image:function(a){return h(a,document.createElement("img"))},video:function(a){return h(a,document.createElement("video"))},
audio:function(a){return h(a,document.createElement("audio"))}},x=Object.keys(e).map(function(b){function c(b,d){if(b in f.parser){var e=f.parser[b];"function"!==typeof e&&a("invalid parser callback "+b+' for asset "'+b+'"');return e}return d}var f=e[b];"string"===typeof f?f={src:f}:"object"===typeof f&&f||a('invalid asset definition "'+b+'"');d(f,q,'asset "'+b+'"');var g={};"parser"in f&&("function"===typeof f.parser?g={data:f.parser}:"object"===typeof f.parser&&f.parser?(d(g,m,'parser for asset "'+
b+'"'),"onData"in g||a('missing onData callback for parser in asset "'+b+'"'),g={data:c("onData"),done:c("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,d,e){c in f&&(e=f[c]);0>d.indexOf(e)&&a("invalid "+c+' "'+e+'" for asset "'+b+'", possible values: '+d);return e}("type",Object.keys(w),"text"),stream:!!f.stream,credentials:!!f.credentials,src:function(c,d,e){c in f?e=f[c]:d&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof e&&a("invalid "+c+' for asset "'+
b+'", must be a string');return e}("src",!0,""),parser:g}}).map(function(a){return w[a.type](a)});0===x.length&&setTimeout(function(){v("done")},1)}},{}],125:[function(f,t,x){var a=f("events/"),d=f("wheel");t.exports=function(f,r){function q(){m[0]=m[1]=m[2]=0}var m=new a;m.flush=q;q();if("undefined"===typeof window)return m;f=f||window;d(f,function(a){var d=1===a.deltaMode?12:1;m[0]+=d*(a.deltaX||0);m[1]+=d*(a.deltaY||0);m[2]+=d*(a.deltaZ||0);m.emit("scroll",m);r&&a.preventDefault&&(a.preventDefault(),
a.stopPropagation&&a.stopPropagation())},!1);return m}},{"events/":43,wheel:127}],126:[function(f,t,x){var a="undefined"!==typeof window?window.navigator.userAgent:"";f=/OS X/.test(a);x=/Opera/.test(a);a=!/like Gecko/.test(a)&&!x;f=t.exports={0:f?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",
24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:f?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",
144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:f&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",
183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:x?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(t=58;65>t;++t)f[t]=String.fromCharCode(t);for(t=48;58>t;++t)f[t]=t-48+"";for(t=65;91>t;++t)f[t]=String.fromCharCode(t);for(t=96;106>t;++t)f[t]="<num-"+(t-96)+">";for(t=112;136>
t;++t)f[t]="F"+(t-111)},{}],127:[function(f,t,x){function a(a,f,b,g){a[C](d+f,"wheel"==r?b:function(a){!a&&(a=window.event);var d={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==r?(d.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(d.deltaX=-.025*a.wheelDeltaX)):d.deltaY=a.detail;return b(d)},g||!1)}t.exports=function(d,f,b){a(d,r,f,b);"DOMMouseScroll"==
r&&a(d,"MozMousePixelScroll",f,b)};var d="",C,r;window.addEventListener?C="addEventListener":(C="attachEvent",d="on");r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],128:[function(f,t,x){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var d=f("./lib/util/check"),C=f("./lib/util/extend"),r=f("./lib/dynamic"),q=f("./lib/util/raf"),m=f("./lib/util/clock"),b=f("./lib/strings"),g=f("./lib/webgl"),c=f("./lib/extension"),
h=f("./lib/limits"),B=f("./lib/buffer"),v=f("./lib/elements"),e=f("./lib/texture"),l=f("./lib/renderbuffer"),p=f("./lib/framebuffer"),n=f("./lib/attribute"),k=f("./lib/shader"),u=f("./lib/read"),w=f("./lib/core"),D=f("./lib/stats"),Ea=f("./lib/timer");t.exports=function(f){function t(){if(0===Da.length)P&&P.update(),Pa=null;else{Pa=q.next(t);E();for(var a=Da.length-1;0<=a;--a){var b=Da[a];b&&b(R,null,0)}ba.flush();P&&P.update()}}function x(){!Pa&&0<Da.length&&(Pa=q.next(t))}function I(){Pa&&(q.cancel(t),
Pa=null)}function S(a){a.preventDefault();la=!0;I();ja.forEach(function(a){a()})}function H(a){ba.getError();la=!1;oa.restore();da.restore();pa.restore();X.restore();ma.restore();ga.restore();L.restore();P&&P.restore();Ba.procs.refresh();x();na.forEach(function(a){a()})}function A(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(r.isDynamic(f))e[b]=r.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(r.isDynamic(f[g])){e[b]=r.unbox(f,b);return}d[b]=
f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}d(!!a,"invalid args to regl({...})");d.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=C({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=
c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=Ba.compile(a,g,f,e,h),l=k.draw,m=k.batch,n=k.scope,p=[];return C(function(a,b){var e;la&&d.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)n.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)n.call(this,
a[e],b,e);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function ka(a,b){var c=0;Ba.procs.poll();var e=b.color;e&&(ba.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),c|=16384);"depth"in b&&(ba.clearDepth(+b.depth),c|=256);"stencil"in b&&(ba.clearStencil(b.stencil|0),c|=1024);d(!!c,"called regl.clear with no buffer specified");
ba.clear(c)}function J(b){d.type(b,"function","regl.frame() callback must be a function");Da.push(b);x();return{cancel:function(){function c(){var b=a(Da,c);Da[b]=Da[Da.length-1];--Da.length;0>=Da.length&&I()}var e=a(Da,b);d(0<=e,"cannot cancel a frame twice");Da[e]=c}}}function F(){var a=va.viewport,b=va.scissor_box;a[0]=a[1]=b[0]=b[1]=0;R.viewportWidth=R.framebufferWidth=R.drawingBufferWidth=a[2]=b[2]=ba.drawingBufferWidth;R.viewportHeight=R.framebufferHeight=R.drawingBufferHeight=a[3]=b[3]=ba.drawingBufferHeight}
function E(){R.tick+=1;R.time=z();F();Ba.procs.poll()}function ea(){X.refresh();F();Ba.procs.refresh();P&&P.update()}function z(){return(m()-N)/1E3}console.log("REGL args are:",f);f=g(f);console.log("REGL configs are:",f);if(!f)return null;var ba=f.gl,M=ba.getContextAttributes(),la=ba.isContextLost(),oa=c(ba,f);if(!oa)return null;var U=b(),V=D(),T=oa.extensions,P=Ea(ba,T),N=m(),O=ba.drawingBufferWidth,Q=ba.drawingBufferHeight,R={tick:0,time:0,viewportWidth:O,viewportHeight:Q,framebufferWidth:O,framebufferHeight:Q,
drawingBufferWidth:O,drawingBufferHeight:Q,pixelRatio:f.pixelRatio},O={elements:null,primitive:4,count:-1,offset:0,instances:-1},ra=h(ba,T),pa=B(ba,V,f,function(a){return L.destroyBuffer(a)}),K=v(ba,T,pa,V),L=n(ba,T,ra,V,pa,K,O),da=k(ba,U,V,f),X=e(ba,T,ra,function(){Ba.procs.poll()},R,V,f),ma=l(ba,T,ra,V,f),ga=p(ba,T,ra,X,ma,V),Ba=w(ba,U,T,ra,pa,K,X,ga,{},L,da,O,R,P,f),U=u(ba,ga,Ba.procs.poll,R,M,T,ra),va=Ba.next,ca=ba.canvas,Da=[],ja=[],na=[],Aa=[f.onDestroy],Pa=null;ca&&(ca.addEventListener("webglcontextlost",
S,!1),ca.addEventListener("webglcontextrestored",H,!1));var za=ga.setFBO=A({framebuffer:r.define.call(null,1,"framebuffer")});ea();M=C(A,{clear:function(a){d("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)za(C({framebuffer:a.framebuffer.faces[b]},a),ka);else za(a,ka);else ka(null,a)},prop:r.define.bind(null,1),context:r.define.bind(null,2),"this":r.define.bind(null,3),draw:A({}),
buffer:function(a){return pa.create(a,34962,!1,!1)},elements:function(a){return K.create(a,!1)},texture:X.create2D,cube:X.createCube,renderbuffer:ma.create,framebuffer:ga.create,framebufferCube:ga.createCube,vao:L.createVAO,attributes:M,frame:J,on:function(a,b){d.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return J(b);case "lost":c=ja;break;case "restore":c=na;break;case "destroy":c=Aa;break;default:d.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);
return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:ra,hasExtension:function(a){return 0<=ra.extensions.indexOf(a.toLowerCase())},read:U,destroy:function(){Da.length=0;I();ca&&(ca.removeEventListener("webglcontextlost",S),ca.removeEventListener("webglcontextrestored",H));da.clear();ga.clear();ma.clear();L.clear();X.clear();K.clear();pa.clear();P&&P.clear();Aa.forEach(function(a){a()})},_gl:ba,_refresh:ea,poll:function(){E();P&&P.update()},now:z,
stats:V});f.onDone(null,M);return M}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
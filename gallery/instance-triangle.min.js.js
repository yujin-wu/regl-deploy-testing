(function(){function Z(ha,ab,b){function ba(e,l){if(!ab[e]){if(!ha[e]){var p="function"==typeof require&&require;if(!l&&p)return p(e,!0);if(M)return M(e,!0);p=Error("Cannot find module '"+e+"'");throw p.code="MODULE_NOT_FOUND",p;}p=ab[e]={exports:{}};ha[e][0].call(p.exports,function(c){return ba(ha[e][1][c]||c)},p,p.exports,Z,ha,ab,b)}return ab[e].exports}for(var M="function"==typeof require&&require,L=0;L<b.length;L++)ba(b[L]);return ba}return Z})()({1:[function(Z,ha,ab){var b=Z("../regl")({extensions:["angle_instanced_arrays"]}),
ba=[];for(Z=0;100>Z;Z++)ba[Z]=2*Math.random()*Math.PI;var M=b.buffer({length:4*ba.length,type:"float",usage:"dynamic"}),L=b({frag:"\n  precision mediump float;\n\n  varying vec3 vColor;\n  void main() {\n    gl_FragColor = vec4(vColor, 1.0);\n  }",vert:"\n  precision mediump float;\n\n  attribute vec2 position;\n\n  // These three are instanced attributes.\n  attribute vec3 color;\n  attribute vec2 offset;\n  attribute float angle;\n\n  varying vec3 vColor;\n\n  void main() {\n    gl_Position = vec4(\n      cos(angle) * position.x + sin(angle) * position.y + offset.x,\n        -sin(angle) * position.x + cos(angle) * position.y + offset.y, 0, 1);\n    vColor = color;\n  }",
attributes:{position:[[0,-.05],[-.05,0],[.05,.05]],offset:{buffer:b.buffer(Array(100).fill().map(function(e,l){return[2*Math.floor(l/10)/10+-.9,l%10*2/10+-.9]})),divisor:1},color:{buffer:b.buffer(Array(100).fill().map(function(e,l){var p=Math.floor(l/10)/10,c=l%10/10;return[p,c,p*c+.2]})),divisor:1},angle:{buffer:M,divisor:1}},depth:{enable:!1},count:3,instances:100});b.frame(function(){b.clear({color:[0,0,0,1]});for(var e=0;100>e;e++)ba[e]+=.01;M.subdata(ba);L()})},{"../regl":38}],2:[function(Z,
ha,ab){function b(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var ba=Z("./util/sorted-object-keys"),M=Z("./util/check"),L=Z("./util/values"),e=Z("./constants/dtypes.json"),l=Z("./util/is-typed-array"),p=Z("./util/is-ndarray"),c=Z("./constants/primitives.json"),G="attributes elements offset count primitive instances".split(" ");ha.exports=function(H,B,U,m,u,y,ca){function w(f){if(f!==X.currentVAO){var x=
B.oes_vertex_array_object;f?x.bindVertexArrayOES(f.vao):x.bindVertexArrayOES(null);X.currentVAO=f}}function T(f){if(f!==X.currentVAO){if(f)f.bindAttrs();else{for(var x=B.angle_instanced_arrays,g=0;g<v.length;++g){var c=v[g];c.buffer?(H.enableVertexAttribArray(g),c.buffer.bind(),H.vertexAttribPointer(g,c.size,c.type,c.normalized,c.stride,c.offfset),x&&c.divisor&&x.vertexAttribDivisorANGLE(g,c.divisor)):(H.disableVertexAttribArray(g),H.vertexAttrib4f(g,c.x,c.y,c.z,c.w))}ca.elements?H.bindBuffer(34963,
ca.elements.buffer.buffer):H.bindBuffer(34963,null)}X.currentVAO=f}}function z(){L(k).forEach(function(f){f.destroy()})}function Q(){this.id=++S;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var f=B.oes_vertex_array_object;this.vao=f?f.createVertexArrayOES():null;k[this.id]=this;this.buffers=[]}function ia(){B.oes_vertex_array_object&&L(k).forEach(function(f){f.refresh()})}var g=U.maxAttributes,v=Array(g);for(U=0;U<g;++U)v[U]=
new b;var S=0,k={},X={Record:b,scope:{},state:v,currentVAO:null,targetVAO:null,restore:B.oes_vertex_array_object?ia:function(){},createVAO:function(f){function x(f){var v;if(Array.isArray(f))v=f,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{M("object"===typeof f,"invalid arguments for create vao");M("attributes"in f,"must specify attributes for vao");if(f.elements){var d=f.elements;k.ownsElements?("function"===
typeof d&&"elements"===d._reglType?k.elements.destroy():k.elements(d),k.ownsElements=!1):y.getElements(f.elements)?(k.elements=f.elements,k.ownsElements=!1):(k.elements=y.create(f.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;v=f.attributes;k.offset=0;k.count=-1;k.instances=-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in f&&(k.offset=f.offset|0);"count"in f&&(k.count=f.count|0);"instances"in f&&(k.instances=
f.instances|0);"primitive"in f&&(M(f.primitive in c,"bad primitive type: "+f.primitive),k.primitive=c[f.primitive]);M.optional(function(){for(var a=ba(f),d=0;d<a.length;++d)M(0<=G.indexOf(a[d]),'invalid option for vao: "'+a[d]+'" valid options are '+G)});M(Array.isArray(v),"attributes must be an array")}M(v.length<g,"too many attributes");M(0<v.length,"must specify at least one attribute");var d={},t=k.attributes;t.length=v.length;for(var a=0;a<v.length;++a){var S=v[a],A=t[a]=new b,z=S.data||S;if(Array.isArray(z)||
l(z)||p(z)){var w;k.buffers[a]&&(w=k.buffers[a],l(z)&&w._buffer.byteLength>=z.byteLength?w.subdata(z):(w.destroy(),k.buffers[a]=null));k.buffers[a]||(w=k.buffers[a]=u.create(S,34962,!1,!0));A.buffer=u.getBuffer(w);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;d[a]=1}else u.getBuffer(S)?(A.buffer=u.getBuffer(S),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=0,A.stride=0,A.divisor=0,A.state=1):u.getBuffer(S.buffer)?
(A.buffer=u.getBuffer(S.buffer),A.size=(+S.size||A.buffer.dimension)|0,A.normalized=!!S.normalized||!1,"type"in S?(M.parameter(S.type,e,"invalid buffer type"),A.type=e[S.type]):A.type=A.buffer.dtype,A.offset=(S.offset||0)|0,A.stride=(S.stride||0)|0,A.divisor=(S.divisor||0)|0,A.state=1,M(1<=A.size&&4>=A.size,"size must be between 1 and 4"),M(0<=A.offset,"invalid offset"),M(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),M(0<=A.divisor,"divisor must be positive"),M(!A.divisor||!!B.angle_instanced_arrays,
"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in S?(M(0<a,"first attribute must not be a constant"),A.x=+S.x||0,A.y=+S.y||0,A.z=+S.z||0,A.w=+S.w||0,A.state=2):M(!1,"invalid attribute spec for location "+a)}for(w=0;w<k.buffers.length;++w)!d[w]&&k.buffers[w]&&(k.buffers[w].destroy(),k.buffers[w]=null);k.refresh();return x}var k=new Q;m.vaoCount+=1;x.destroy=function(){for(var f=0;f<k.buffers.length;++f)k.buffers[f]&&k.buffers[f].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),
k.elements=null,k.ownsElements=!1);k.destroy()};x._vao=k;x._reglType="vao";return x(f)},getVAO:function(f){return"function"===typeof f&&f._vao?f._vao:null},destroyBuffer:function(f){for(var x=0;x<v.length;++x){var c=v[x];c.buffer===f&&(H.disableVertexAttribArray(x),c.buffer=null)}},setVAO:B.oes_vertex_array_object?w:T,clear:B.oes_vertex_array_object?z:function(){}};Q.prototype.bindAttrs=function(){for(var f=B.angle_instanced_arrays,x=this.attributes,c=0;c<x.length;++c){var l=x[c];l.buffer?(H.enableVertexAttribArray(c),
H.bindBuffer(34962,l.buffer.buffer),H.vertexAttribPointer(c,l.size,l.type,l.normalized,l.stride,l.offset),f&&l.divisor&&f.vertexAttribDivisorANGLE(c,l.divisor)):(H.disableVertexAttribArray(c),H.vertexAttrib4f(c,l.x,l.y,l.z,l.w))}for(f=x.length;f<g;++f)H.disableVertexAttribArray(f);(f=y.getElements(this.elements))?H.bindBuffer(34963,f.buffer.buffer):H.bindBuffer(34963,null)};Q.prototype.refresh=function(){var f=B.oes_vertex_array_object;f&&(f.bindVertexArrayOES(this.vao),this.bindAttrs(),X.currentVAO=
null,f.bindVertexArrayOES(null))};Q.prototype.destroy=function(){if(this.vao){var f=B.oes_vertex_array_object;this===X.currentVAO&&(X.currentVAO=null,f.bindVertexArrayOES(null));f.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);k[this.id]&&(delete k[this.id],--m.vaoCount)};return X}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,
"./util/values":36}],3:[function(Z,ha,ab){function b(c){return U[Object.prototype.toString.call(c)]|0}function ba(c,l){for(var p=0;p<l.length;++p)c[p]=l[p]}function M(c,l,p,e,b,u,g){for(var v=0,S=0;S<p;++S)for(var k=0;k<e;++k)c[v++]=l[b*S+u*k+g]}var L=Z("./util/sorted-object-keys"),e=Z("./util/check"),l=Z("./util/is-typed-array"),p=Z("./util/is-ndarray"),c=Z("./util/values"),G=Z("./util/pool");ab=Z("./util/flatten");var H=ab.flatten,B=ab.shape,U=Z("./constants/arraytypes.json"),m=Z("./constants/dtypes.json"),
u=Z("./constants/usage.json"),y=[];y[5120]=1;y[5122]=2;y[5124]=4;y[5121]=1;y[5123]=2;y[5125]=4;y[5126]=4;ha.exports=function(U,w,T,z){function Q(f){this.id=S++;this.buffer=U.createBuffer();this.type=f;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;T.profile&&(this.stats={size:0})}function ia(f,c,l){f.byteLength=c.byteLength;U.bufferData(f.type,c,l)}function g(f,c,g,k,v,d){f.usage=g;if(Array.isArray(c)){if(f.dtype=k||5126,0<c.length)if(Array.isArray(c[0])){v=
B(c);for(var t=k=1;t<v.length;++t)k*=v[t];f.dimension=k;c=H(c,v,f.dtype);ia(f,c,g);d?f.persistentData=c:G.freeType(c)}else"number"===typeof c[0]?(f.dimension=v,v=G.allocType(f.dtype,c.length),ba(v,c),ia(f,v,g),d?f.persistentData=v:G.freeType(v)):l(c[0])?(f.dimension=c[0].length,f.dtype=k||b(c[0])||5126,c=H(c,[c.length,c[0].length],f.dtype),ia(f,c,g),d?f.persistentData=c:G.freeType(c)):e.raise("invalid buffer data")}else if(l(c))f.dtype=k||b(c),f.dimension=v,ia(f,c,g),d&&(f.persistentData=new Uint8Array(new Uint8Array(c.buffer)));
else if(p(c)){v=c.shape;var a=c.stride,t=c.offset,S=0,A=0,z=0,w=0;1===v.length?(S=v[0],A=1,z=a[0],w=0):2===v.length?(S=v[0],A=v[1],z=a[0],w=a[1]):e.raise("invalid shape");f.dtype=k||b(c.data)||5126;f.dimension=A;v=G.allocType(f.dtype,S*A);M(v,c.data,S,A,z,w,t);ia(f,v,g);d?f.persistentData=v:G.freeType(v)}else c instanceof ArrayBuffer?(f.dtype=5121,f.dimension=v,ia(f,c,g),d&&(f.persistentData=new Uint8Array(new Uint8Array(c)))):e.raise("invalid buffer data")}function v(c){w.bufferCount--;z(c);var g=
c.buffer;e(g,"buffer must not be deleted already");U.deleteBuffer(g);c.buffer=null;delete k[c.id]}var S=0,k={};Q.prototype.bind=function(){U.bindBuffer(this.type,this.buffer)};Q.prototype.destroy=function(){v(this)};var X=[];T.profile&&(w.getTotalBufferSize=function(){var c=0;L(k).forEach(function(g){c+=k[g].stats.size});return c});return{create:function(c,x,S,z){function F(a){var d=35044,c=null,f=0,k=0,x=1;Array.isArray(a)||l(a)||p(a)||a instanceof ArrayBuffer?c=a:"number"===typeof a?f=a|0:a&&(e.type(a,
"object","buffer arguments must be an object, a number or an array"),"data"in a&&(e(null===c||Array.isArray(c)||l(c)||p(c),"invalid data for buffer"),c=a.data),"usage"in a&&(e.parameter(a.usage,u,"invalid buffer usage"),d=u[a.usage]),"type"in a&&(e.parameter(a.type,m,"invalid buffer type"),k=m[a.type]),"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),x=a.dimension|0),"length"in a&&(e.nni(f,"buffer length must be a nonnegative integer"),f=a.length|0));t.bind();c?g(t,c,d,k,x,z):(f&&
U.bufferData(t.type,f,d),t.dtype=k||5121,t.usage=d,t.dimension=x,t.byteLength=f);T.profile&&(t.stats.size=t.byteLength*y[t.dtype]);return F}function d(a,d){e(d+a.byteLength<=t.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+d+" to a buffer of size "+t.byteLength);U.bufferSubData(t.type,d,a)}w.bufferCount++;var t=new Q(x);k[t.id]=t;S||F(c);F._reglType="buffer";F._buffer=t;F.subdata=function(a,c){var f=(c||0)|0,g;t.bind();
if(l(a)||a instanceof ArrayBuffer)d(a,f);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var k=G.allocType(t.dtype,a.length);ba(k,a);d(k,f);G.freeType(k)}else Array.isArray(a[0])||l(a[0])?(g=B(a),k=H(a,g,t.dtype),d(k,f),G.freeType(k)):e.raise("invalid buffer data")}else if(p(a)){g=a.shape;var x=a.stride,v=k=0,R=0,O=0;1===g.length?(k=g[0],v=1,R=x[0],O=0):2===g.length?(k=g[0],v=g[1],R=x[0],O=x[1]):e.raise("invalid shape");g=Array.isArray(a.data)?t.dtype:b(a.data);g=G.allocType(g,
k*v);M(g,a.data,k,v,R,O,a.offset);d(g,f);G.freeType(g)}else e.raise("invalid data for buffer subdata");return F};T.profile&&(F.stats=t.stats);F.destroy=function(){v(t)};return F},createStream:function(c,l){var k=X.pop();k||(k=new Q(c));k.bind();g(k,l,35040,0,1,!1);return k},destroyStream:function(c){X.push(c)},clear:function(){c(k).forEach(v);X.forEach(v)},getBuffer:function(c){return c&&c._buffer instanceof Q?c._buffer:null},restore:function(){c(k).forEach(function(c){c.buffer=U.createBuffer();U.bindBuffer(c.type,
c.buffer);U.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:g}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(Z,ha,ab){ha.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(Z,ha,ab){ha.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(Z,ha,ab){ha.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(Z,ha,ab){ha.exports={"static":35044,dynamic:35048,
stream:35040}},{}],8:[function(Z,ha,ab){function b(c){return Array.isArray(c)||U(c)||m(c)}function ba(c){return c.sort(function(c,g){return"viewport"===c?-1:"viewport"===g?1:c<g?-1:1})}function M(c,g,l,k){this.thisDep=c;this.contextDep=g;this.propDep=l;this.append=k}function L(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function e(c){return new M(!1,!1,!1,c)}function l(c,g){var l=c.type;if(0===l)return l=c.data.length,new M(!0,1<=l,2<=l,g);if(4===l)return l=c.data,new M(l.thisDep,l.contextDep,
l.propDep,g);if(5===l)return new M(!1,!1,!1,g);if(6===l){for(var k=l=!1,p=!1,d=0;d<c.data.length;++d){var t=c.data[d];1===t.type?p=!0:2===t.type?k=!0:3===t.type?l=!0:0===t.type?(l=!0,t=t.data,1<=t&&(k=!0),2<=t&&(p=!0)):4===t.type&&(l=l||t.data.thisDep,k=k||t.data.contextDep,p=p||t.data.propDep)}return new M(l,k,p,g)}return new M(3===l,2===l,1===l,g)}var p=Z("./util/sorted-object-keys"),c=Z("./util/check"),G=Z("./util/extend"),H=Z("./util/codegen"),B=Z("./util/loop"),U=Z("./util/is-typed-array"),m=
Z("./util/is-ndarray"),u=Z("./util/is-array-like"),y=Z("./dynamic"),ca=Z("./constants/primitives.json"),w=Z("./constants/dtypes.json"),T=["x","y","z","w"],z="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Q={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ia="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),g={never:512,less:513,"<":513,equal:514,"=":514,
"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},v={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},S={frag:35632,vert:35633},k={cw:2304,ccw:2305},X=new M(!1,!1,!1,function(){});ha.exports=function(f,x,m,D,F,d,t,a,U,A,ja,Dc,W,ea,R){function O(a){return a.replace(".","_")}function E(a,d,c){var h=O(a);ua.push(a);V[h]=ma[h]=!!c;Fa[h]=d}function h(a,d,c){var h=
O(a);ua.push(a);Array.isArray(c)?(ma[h]=c.slice(),V[h]=c.slice()):ma[h]=V[h]=c;Ia[h]=d}function N(){var a=H(),d=a.link,h=a.global;a.id=yd++;a.batchId="0";var r=d(mb),q=a.shared={props:"a0"};p(mb).forEach(function(a){q[a]=h.def(r,".",a)});c.optional(function(){a.CHECK=d(c);a.commandStr=c.guessCommand();a.command=d(a.commandStr);a.assert=function(a,c,h){a("if(!(",c,"))",this.CHECK,".commandRaise(",d(h),",",this.command,");")};da.invalidBlendCombinations=ia});var g=a.next={},n=a.current={};p(Ia).forEach(function(a){Array.isArray(ma[a])&&
(g[a]=h.def(q.next,".",a),n[a]=h.def(q.current,".",a))});var l=a.constants={};p(da).forEach(function(a){l[a]=h.def(JSON.stringify(da[a]))});a.invoke=function(c,h){switch(h.type){case 0:var r=["this",q.context,q.props,a.batchId];return c.def(d(h.data),".call(",r.slice(0,Math.max(h.data.length+1,4)),")");case 1:return c.def(q.props,h.data);case 2:return c.def(q.context,h.data);case 3:return c.def("this",h.data);case 4:return h.data.append(a,c),h.data.ref;case 5:return h.data.toString();case 6:return h.data.map(function(d){return a.invoke(c,
d)})}};a.attribCache={};var k={};a.scopeAttrib=function(a){a=x.id(a);if(a in k)return k[a];var c=A.scope[a];c||(c=A.scope[a]=new sa);return k[a]=d(c)};return a}function K(a){var d=a["static"];a=a.dynamic;var c;if("profile"in d){var h=!!d.profile;c=e(function(a,d){return h});c.enable=h}else if("profile"in a){var q=a.profile;c=l(q,function(a,d){return a.invoke(d,q)})}return c}function Ca(d,h){var q=d["static"],r=d.dynamic;if("framebuffer"in q){var g=q.framebuffer;return g?(g=a.getFramebuffer(g),c.command(g,
"invalid framebuffer object"),e(function(a,d){var c=a.link(g),h=a.shared;d.set(h.framebuffer,".next",c);h=h.context;d.set(h,".framebufferWidth",c+".width");d.set(h,".framebufferHeight",c+".height");return c})):e(function(a,d){var c=a.shared;d.set(c.framebuffer,".next","null");c=c.context;d.set(c,".framebufferWidth",c+".drawingBufferWidth");d.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in r){var n=r.framebuffer;return l(n,function(a,d){var h=a.invoke(d,n),q=
a.shared,r=q.framebuffer,g=d.def(r,".getFramebuffer(",h,")");c.optional(function(){a.assert(d,"!"+h+"||"+g,"invalid framebuffer object")});d.set(r,".next",g);q=q.context;d.set(q,".framebufferWidth",g+"?"+g+".width:"+q+".drawingBufferWidth");d.set(q,".framebufferHeight",g+"?"+g+".height:"+q+".drawingBufferHeight");return g})}return null}function ra(a,d,h){function q(a){if(a in g){var n=g[a];c.commandType(n,"object","invalid "+a,h.commandStr);var k=!0,f=n.x|0,I=n.y|0,C,x;"width"in n?(C=n.width|0,c.command(0<=
C,"invalid "+a,h.commandStr)):k=!1;"height"in n?(x=n.height|0,c.command(0<=x,"invalid "+a,h.commandStr)):k=!1;return new M(!k&&d&&d.thisDep,!k&&d&&d.contextDep,!k&&d&&d.propDep,function(a,d){var c=a.shared.context,h=C;"width"in n||(h=d.def(c,".","framebufferWidth","-",f));var q=x;"height"in n||(q=d.def(c,".","framebufferHeight","-",I));return[f,I,h,q]})}if(a in r){var na=r[a],k=l(na,function(d,h){var q=d.invoke(h,na);c.optional(function(){d.assert(h,q+"&&typeof "+q+'==="object"',"invalid "+a)});var g=
d.shared.context,r=h.def(q,".x|0"),n=h.def(q,".y|0"),l=h.def('"width" in ',q,"?",q,".width|0:","(",g,".","framebufferWidth","-",r,")"),k=h.def('"height" in ',q,"?",q,".height|0:","(",g,".","framebufferHeight","-",n,")");c.optional(function(){d.assert(h,l+">=0&&"+k+">=0","invalid "+a)});return[r,n,l,k]});d&&(k.thisDep=k.thisDep||d.thisDep,k.contextDep=k.contextDep||d.contextDep,k.propDep=k.propDep||d.propDep);return k}return d?new M(d.thisDep,d.contextDep,d.propDep,function(a,d){var c=a.shared.context;
return[0,0,d.def(c,".","framebufferWidth"),d.def(c,".","framebufferHeight")]}):null}var g=a["static"],r=a.dynamic;if(a=q("viewport")){var n=a;a=new M(a.thisDep,a.contextDep,a.propDep,function(a,d){var c=n.append(a,d),h=a.shared.context;d.set(h,".viewportWidth",c[2]);d.set(h,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:q("scissor.box")}}function r(a,d){var h=a["static"];if("string"===typeof h.frag&&"string"===typeof h.vert){if(0<p(d.dynamic).length)return null;var h=d["static"],
q=p(h);if(0<q.length&&"number"===typeof h[q[0]]){for(var g=[],r=0;r<q.length;++r)c("number"===typeof h[q[r]],"must specify all vertex attribute locations when using vaos"),g.push([h[q[r]]|0,q[r]]);return g}}return null}function J(a,d,h){function q(a){if(a in r){var d=x.id(r[a]);c.optional(function(){ja.shader(S[a],d,c.guessCommand())});var h=e(function(){return d});h.id=d;return h}if(a in g){var n=g[a];return l(n,function(d,h){var q=d.invoke(h,n),r=h.def(d.shared.strings,".id(",q,")");c.optional(function(){h(d.shared.shader,
".shader(",S[a],",",r,",",d.command,");")});return r})}return null}var r=a["static"],g=a.dynamic,n=q("frag"),k=q("vert"),f=null;L(n)&&L(k)?(f=ja.program(k.id,n.id,null,h),a=e(function(a,d){return a.link(f)})):a=new M(n&&n.thisDep||k&&k.thisDep,n&&n.contextDep||k&&k.contextDep,n&&n.propDep||k&&k.propDep,function(a,d){var h=a.shared.shader,q;q=n?n.append(a,d):d.def(h,".","frag");var r;r=k?k.append(a,d):d.def(h,".","vert");var g=h+".program("+r+","+q;c.optional(function(){g+=","+a.command});return d.def(g+
")")});return{frag:n,vert:k,progVar:a,program:f}}function aa(a,h){function q(a,d){if(a in r){var C=r[a]|0;d?g.offset=C:g.instances=C;c.command(!d||0<=C,"invalid "+a,h.commandStr);return e(function(a,c){d&&(a.OFFSET=C);return C})}if(a in n){var x=n[a];return l(x,function(h,q){var r=h.invoke(q,x);d&&(h.OFFSET=r,c.optional(function(){h.assert(q,r+">=0","invalid "+a)}));return r})}if(d){if(I)return e(function(a,d){return a.OFFSET=0});if(k)return new M(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+
".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(k)return new M(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var r=a["static"],n=a.dynamic,g={},k=!1,f=function(){if("vao"in r){var a=r.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));k=!0;g.vao=a;return e(function(d){var c=A.getVAO(a);return c?d.link(c):"null"})}if("vao"in n){k=!0;var d=n.vao;return l(d,function(a,c){var h=a.invoke(c,
d);return c.def(a.shared.vao+".getVAO("+h+")")})}return null}(),I=!1,C=function(){if("elements"in r){var a=r.elements;g.elements=a;if(b(a)){var q=g.elements=d.create(a,!0),a=d.getElements(q);I=!0}else a&&(a=d.getElements(a),I=!0,c.command(a,"invalid elements",h.commandStr));q=e(function(d,c){if(a){var h=d.link(a);return d.ELEMENTS=h}return d.ELEMENTS=null});q.value=a;return q}if("elements"in n){I=!0;var C=n.elements;return l(C,function(a,d){var h=a.shared,q=h.isBufferArgs,h=h.elements,r=a.invoke(d,
C),n=d.def("null"),q=d.def(q,"(",r,")"),g=a.cond(q).then(n,"=",h,".createStream(",r,");")["else"](n,"=",h,".getElements(",r,");");c.optional(function(){a.assert(g["else"],"!"+r+"||"+n,"invalid elements")});d.entry(g);d.exit(a.cond(q).then(h,".destroyStream(",n,");"));return a.ELEMENTS=n})}return k?new M(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),x=q("offset",!0),na=function(){if("primitive"in
r){var a=r.primitive;g.primitive=a;c.commandParameter(a,ca,"invalid primitve",h.commandStr);return e(function(d,c){return ca[a]})}if("primitive"in n){var d=n.primitive;return l(d,function(a,h){var q=a.constants.primTypes,r=a.invoke(h,d);c.optional(function(){a.assert(h,r+" in "+q,"invalid primitive, must be one of "+p(ca))});return h.def(q,"[",r,"]")})}return I?L(C)?C.value?e(function(a,d){return d.def(a.ELEMENTS,".primType")}):e(function(){return 4}):new M(C.thisDep,C.contextDep,C.propDep,function(a,
d){var c=a.ELEMENTS;return d.def(c,"?",c,".primType:",4)}):k?new M(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),t=function(){if("count"in r){var a=r.count|0;g.count=a;c.command("number"===typeof a&&0<=a,"invalid vertex count",h.commandStr);return e(function(){return a})}if("count"in n){var d=n.count;return l(d,function(a,h){var q=a.invoke(h,d);c.optional(function(){a.assert(h,"typeof "+q+'==="number"&&'+q+
">=0&&"+q+"===("+q+"|0)","invalid vertex count")});return q})}if(I){if(L(C)){if(C)return x?new M(x.thisDep,x.contextDep,x.propDep,function(a,d){var h=d.def(a.ELEMENTS,".vertCount-",a.OFFSET);c.optional(function(){a.assert(d,h+">=0","invalid vertex offset/element buffer too small")});return h}):e(function(a,d){return d.def(a.ELEMENTS,".vertCount")});var q=e(function(){return-1});c.optional(function(){q.MISSING=!0});return q}var na=new M(C.thisDep||x.thisDep,C.contextDep||x.contextDep,C.propDep||x.propDep,
function(a,d){var c=a.ELEMENTS;return a.OFFSET?d.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):d.def(c,"?",c,".vertCount:-1")});c.optional(function(){na.DYNAMIC=!0});return na}return k?new M(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),v=q("instances",!1);return{elements:C,primitive:na,count:t,instances:v,offset:x,vao:f,vaoActive:k,elementsActive:I,"static":g}}function P(a,d){var h=a["static"],q=a.dynamic,r={};ua.forEach(function(a){function n(d,
c){if(a in h){var g=d(h[a]);r[f]=e(function(){return g})}else if(a in q){var k=q[a];r[f]=l(k,function(a,d){return c(a,d,a.invoke(d,k))})}}var f=O(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return n(function(h){c.commandType(h,"boolean",a,d.commandStr);return h},function(d,h,q){c.optional(function(){d.assert(h,"typeof "+q+'==="boolean"',
"invalid flag "+a,d.commandStr)});return q});case "depth.func":return n(function(h){c.commandParameter(h,g,"invalid "+a,d.commandStr);return g[h]},function(d,h,q){var n=d.constants.compareFuncs;c.optional(function(){d.assert(h,q+" in "+n,"invalid "+a+", must be one of "+p(g))});return h.def(n,"[",q,"]")});case "depth.range":return n(function(a){c.command(u(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",d.commandStr);return a},function(a,d,h){c.optional(function(){a.assert(d,
a.shared.isArrayLike+"("+h+")&&"+h+".length===2&&typeof "+h+'[0]==="number"&&typeof '+h+'[1]==="number"&&'+h+"[0]<="+h+"[1]","depth range must be a 2d array")});var q=d.def("+",h,"[0]"),n=d.def("+",h,"[1]");return[q,n]});case "blend.func":return n(function(a){c.commandType(a,"object","blend.func",d.commandStr);var h="srcRGB"in a?a.srcRGB:a.src,q="srcAlpha"in a?a.srcAlpha:a.src,n="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;c.commandParameter(h,Q,f+".srcRGB",d.commandStr);c.commandParameter(q,
Q,f+".srcAlpha",d.commandStr);c.commandParameter(n,Q,f+".dstRGB",d.commandStr);c.commandParameter(a,Q,f+".dstAlpha",d.commandStr);c.command(-1===ia.indexOf(h+", "+n),"unallowed blending combination (srcRGB, dstRGB) = ("+h+", "+n+")",d.commandStr);return[Q[h],Q[n],Q[q],Q[a]]},function(d,h,q){function n(g,k){var f=h.def('"',g,k,'" in ',q,"?",q,".",g,k,":",q,".",g);c.optional(function(){d.assert(h,f+" in "+r,"invalid "+a+"."+g+k+", must be one of "+p(Q))});return f}var r=d.constants.blendFuncs;c.optional(function(){d.assert(h,
q+"&&typeof "+q+'==="object"',"invalid blend func, must be an object")});var g=n("src","RGB"),k=n("dst","RGB");c.optional(function(){d.assert(h,d.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+k+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=h.def(r,"[",g,"]"),l=h.def(r,"[",n("src","Alpha"),"]"),I=h.def(r,"[",k,"]"),C=h.def(r,"[",n("dst","Alpha"),"]");return[f,I,l,C]});case "blend.equation":return n(function(h){if("string"===typeof h)return c.commandParameter(h,
Da,"invalid "+a,d.commandStr),[Da[h],Da[h]];if("object"===typeof h)return c.commandParameter(h.rgb,Da,a+".rgb",d.commandStr),c.commandParameter(h.alpha,Da,a+".alpha",d.commandStr),[Da[h.rgb],Da[h.alpha]];c.commandRaise("invalid blend.equation",d.commandStr)},function(d,h,q){var n=d.constants.blendEquations,r=h.def(),g=h.def(),k=d.cond("typeof ",q,'==="string"');c.optional(function(){function h(a,c,q){d.assert(a,q+" in "+n,"invalid "+c+", must be one of "+p(Da))}h(k.then,a,q);d.assert(k["else"],q+
"&&typeof "+q+'==="object"',"invalid "+a);h(k["else"],a+".rgb",q+".rgb");h(k["else"],a+".alpha",q+".alpha")});k.then(r,"=",g,"=",n,"[",q,"];");k["else"](r,"=",n,"[",q,".rgb];",g,"=",n,"[",q,".alpha];");h(k);return[r,g]});case "blend.color":return n(function(a){c.command(u(a)&&4===a.length,"blend.color must be a 4d array",d.commandStr);return B(4,function(d){return+a[d]})},function(a,d,h){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+h+")&&"+h+".length===4","blend.color must be a 4d array")});
return B(4,function(a){return d.def("+",h,"[",a,"]")})});case "stencil.mask":return n(function(a){c.commandType(a,"number",f,d.commandStr);return a|0},function(a,d,h){c.optional(function(){a.assert(d,"typeof "+h+'==="number"',"invalid stencil.mask")});return d.def(h,"|0")});case "stencil.func":return n(function(h){c.commandType(h,"object",f,d.commandStr);var q=h.cmp||"keep",n=h.ref||0;h="mask"in h?h.mask:-1;c.commandParameter(q,g,a+".cmp",d.commandStr);c.commandType(n,"number",a+".ref",d.commandStr);
c.commandType(h,"number",a+".mask",d.commandStr);return[g[q],n,h]},function(a,d,h){var q=a.constants.compareFuncs;c.optional(function(){function c(){a.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(h+"&&typeof ",h,'==="object"');c('!("cmp" in ',h,")||(",h,".cmp in ",q,")")});var n=d.def('"cmp" in ',h,"?",q,"[",h,".cmp]",":",7680),r=d.def(h,".ref|0"),g=d.def('"mask" in ',h,"?",h,".mask|0:-1");return[n,r,g]});case "stencil.opFront":case "stencil.opBack":return n(function(h){c.commandType(h,
"object",f,d.commandStr);var q=h.fail||"keep",n=h.zfail||"keep";h=h.zpass||"keep";c.commandParameter(q,v,a+".fail",d.commandStr);c.commandParameter(n,v,a+".zfail",d.commandStr);c.commandParameter(h,v,a+".zpass",d.commandStr);return["stencil.opBack"===a?1029:1028,v[q],v[n],v[h]]},function(d,h,q){function n(g){c.optional(function(){d.assert(h,'!("'+g+'" in '+q+")||("+q+"."+g+" in "+r+")","invalid "+a+"."+g+", must be one of "+p(v))});return h.def('"',g,'" in ',q,"?",r,"[",q,".",g,"]:",7680)}var r=d.constants.stencilOps;
c.optional(function(){d.assert(h,q+"&&typeof "+q+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,n("fail"),n("zfail"),n("zpass")]});case "polygonOffset.offset":return n(function(a){c.commandType(a,"object",f,d.commandStr);var h=a.factor|0;a=a.units|0;c.commandType(h,"number",f+".factor",d.commandStr);c.commandType(a,"number",f+".units",d.commandStr);return[h,a]},function(d,h,q){c.optional(function(){d.assert(h,q+"&&typeof "+q+'==="object"',"invalid "+a)});var n=h.def(q,".factor|0"),
r=h.def(q,".units|0");return[n,r]});case "cull.face":return n(function(a){var h=0;"front"===a?h=1028:"back"===a&&(h=1029);c.command(!!h,f,d.commandStr);return h},function(a,d,h){c.optional(function(){a.assert(d,h+'==="front"||'+h+'==="back"',"invalid cull.face")});return d.def(h,'==="front"?',1028,":",1029)});case "lineWidth":return n(function(a){c.command("number"===typeof a&&a>=D.lineWidthDims[0]&&a<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+
" and "+D.lineWidthDims[1],d.commandStr);return a},function(a,d,h){c.optional(function(){a.assert(d,"typeof "+h+'==="number"&&'+h+">="+D.lineWidthDims[0]+"&&"+h+"<="+D.lineWidthDims[1],"invalid line width")});return h});case "frontFace":return n(function(a){c.commandParameter(a,k,f,d.commandStr);return k[a]},function(a,d,h){c.optional(function(){a.assert(d,h+'==="cw"||'+h+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(h+'==="cw"?2304:2305')});case "colorMask":return n(function(a){c.command(u(a)&&
4===a.length,"color.mask must be length 4 array",d.commandStr);return a.map(function(a){return!!a})},function(a,d,h){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+h+")&&"+h+".length===4","invalid color.mask")});return B(4,function(a){return"!!"+h+"["+a+"]"})});case "sample.coverage":return n(function(a){c.command("object"===typeof a&&a,f,d.commandStr);var h="value"in a?a.value:1;a=!!a.invert;c.command("number"===typeof h&&0<=h&&1>=h,"sample.coverage.value must be a number between 0 and 1",
d.commandStr);return[h,a]},function(a,d,h){c.optional(function(){a.assert(d,h+"&&typeof "+h+'==="object"',"invalid sample.coverage")});var q=d.def('"value" in ',h,"?+",h,".value:1"),n=d.def("!!",h,".invert");return[q,n]})}});return r}function la(a,d){var h=a["static"],q=a.dynamic,n={};p(h).forEach(function(a){var q=h[a],r;if("number"===typeof q||"boolean"===typeof q)r=e(function(){return q});else if("function"===typeof q){var g=q._reglType;"texture2d"===g||"textureCube"===g?r=e(function(a){return a.link(q)}):
"framebuffer"===g||"framebufferCube"===g?(c.command(0<q.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',d.commandStr),r=e(function(a){return a.link(q.color[0])})):c.commandRaise('invalid data for uniform "'+a+'"',d.commandStr)}else u(q)?r=e(function(d){return d.global.def("[",B(q.length,function(h){c.command("number"===typeof q[h]||"boolean"===typeof q[h],"invalid uniform "+a,d.commandStr);return q[h]}),"]")}):c.commandRaise('invalid or missing data for uniform "'+
a+'"',d.commandStr);r.value=q;n[a]=r});p(q).forEach(function(a){var d=q[a];n[a]=l(d,function(a,h){return a.invoke(h,d)})});return n}function qa(a,d){var h=a["static"],q=a.dynamic,n={};p(h).forEach(function(a){var q=h[a],r=x.id(a),g=new sa;if(b(q))g.state=1,g.buffer=F.getBuffer(F.create(q,34962,!1,!0)),g.type=0;else{var k=F.getBuffer(q);if(k)g.state=1,g.buffer=k,g.type=0;else if(c.command("object"===typeof q&&q,"invalid data for attribute "+a,d.commandStr),"constant"in q){var f=q.constant;g.buffer=
"null";g.state=2;"number"===typeof f?g.x=f:(c.command(u(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,d.commandStr),T.forEach(function(a,d){d<f.length&&(g[a]=f[d])}))}else{k=b(q.buffer)?F.getBuffer(F.create(q.buffer,34962,!1,!0)):F.getBuffer(q.buffer);c.command(!!k,'missing buffer for attribute "'+a+'"',d.commandStr);var l=q.offset|0;c.command(0<=l,'invalid offset for attribute "'+a+'"',d.commandStr);var I=q.stride|0;c.command(0<=I&&256>I,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',
d.commandStr);var C=q.size|0;c.command(!("size"in q)||0<C&&4>=C,'invalid size for attribute "'+a+'", must be 1,2,3,4',d.commandStr);var na=!!q.normalized,t=0;"type"in q&&(c.commandParameter(q.type,w,"invalid type for attribute "+a,d.commandStr),t=w[q.type]);var v=q.divisor|0;c.optional(function(){"divisor"in q&&(c.command(0===v||oa,'cannot specify divisor for attribute "'+a+'", instancing not supported',d.commandStr),c.command(0<=v,'invalid divisor for attribute "'+a+'"',d.commandStr));var h=d.commandStr,
n="buffer offset divisor normalized type size stride".split(" ");p(q).forEach(function(d){c.command(0<=n.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+a+'" (valid parameters are '+n+")",h)})});g.buffer=k;g.state=1;g.size=C;g.normalized=na;g.type=t||k.dtype;g.offset=l;g.stride=I;g.divisor=v}}n[a]=e(function(a,d){var h=a.attribCache;if(r in h)return h[r];var q={isStream:!1};p(g).forEach(function(a){q[a]=g[a]});g.buffer&&(q.buffer=a.link(g.buffer),q.type=q.type||q.buffer+".dtype");return h[r]=
q})});p(q).forEach(function(a){var d=q[a];n[a]=l(d,function(h,q){function n(a){q(I[a],"=",g,".",a,"|0;")}var g=h.invoke(q,d),r=h.shared,k=h.constants,f=r.isBufferArgs,l=r.buffer;c.optional(function(){h.assert(q,g+"&&(typeof "+g+'==="object"||typeof '+g+'==="function")&&('+f+"("+g+")||"+l+".getBuffer("+g+")||"+l+".getBuffer("+g+".buffer)||"+f+"("+g+'.buffer)||("constant" in '+g+"&&(typeof "+g+'.constant==="number"||'+r.isArrayLike+"("+g+".constant))))",'invalid dynamic attribute "'+a+'"')});var I=
{isStream:q.def(!1)},C=new sa;C.state=1;p(C).forEach(function(a){I[a]=q.def(""+C[a])});var x=I.buffer,na=I.type;q("if(",f,"(",g,")){",I.isStream,"=true;",x,"=",l,".createStream(",34962,",",g,");",na,"=",x,".dtype;","}else{",x,"=",l,".getBuffer(",g,");","if(",x,"){",na,"=",x,".dtype;",'}else if("constant" in ',g,"){",I.state,"=",2,";","if(typeof "+g+'.constant === "number"){',I[T[0]],"=",g,".constant;",T.slice(1).map(function(a){return I[a]}).join("="),"=0;","}else{",T.map(function(a,d){return I[a]+
"="+g+".constant.length>"+d+"?"+g+".constant["+d+"]:0;"}).join(""),"}}else{","if(",f,"(",g,".buffer)){",x,"=",l,".createStream(",34962,",",g,".buffer);","}else{",x,"=",l,".getBuffer(",g,".buffer);","}",na,'="type" in ',g,"?",k.glTypes,"[",g,".type]:",x,".dtype;",I.normalized,"=!!",g,".normalized;");n("size");n("offset");n("stride");n("divisor");q("}}");q.exit("if(",I.isStream,"){",l,".destroyStream(",x,");","}");return I})});return n}function za(a){var d=a["static"],h=a.dynamic,q={};p(d).forEach(function(a){var h=
d[a];q[a]=e(function(a,d){return"number"===typeof h||"boolean"===typeof h?""+h:a.link(h)})});p(h).forEach(function(a){var d=h[a];q[a]=l(d,function(a,h){return a.invoke(h,d)})});return q}function wa(a,d,h,q,g){function n(a){var d=C[a];d&&(na[a]=d)}var k=a["static"],f=a.dynamic;c.optional(function(){function a(h){p(h).forEach(function(a){c.command(0<=d.indexOf(a),'unknown parameter "'+a+'"',g.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);
a(k);a(f)});var l=r(a,d),I=Ca(a,g),C=ra(a,I,g),x=aa(a,g),na=P(a,g),t=J(a,g,l);n("viewport");n(O("scissor.box"));var v=0<p(na).length,I={framebuffer:I,draw:x,shader:t,state:na,dirty:v,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};I.profile=K(a,g);I.uniforms=la(h,g);I.drawVAO=I.scopeVAO=x.vao;if(!I.drawVAO&&t.program&&!l&&m.angle_instanced_arrays&&x["static"].elements){var sa=!0;a=t.program.attributes.map(function(a){a=d["static"][a];sa=sa&&!!a;return a});if(sa&&0<a.length){var Ja=A.getVAO(A.createVAO({attributes:a,
elements:x["static"].elements}));I.drawVAO=new M(null,null,null,function(a,d){return a.link(Ja)});I.useVAO=!0}}l?I.useVAO=!0:I.attributes=qa(d,g);I.context=za(q,g);return I}function fa(a,d,h){var q=a.shared.context,c=a.scope();p(h).forEach(function(g){d.save(q,"."+g);var n=h[g].append(a,d);Array.isArray(n)?c(q,".",g,"=[",n.join(),"];"):c(q,".",g,"=",n,";")});d(c)}function Aa(a,d,h,q){var c=a.shared,g=c.gl,n=c.framebuffer,r;xa&&(r=d.def(c.extensions,".webgl_draw_buffers"));var k=a.constants,c=k.drawBuffer,
k=k.backBuffer;a=h?h.append(a,d):d.def(n,".next");q||d("if(",a,"!==",n,".cur){");d("if(",a,"){",g,".bindFramebuffer(",36160,",",a,".framebuffer);");xa&&d(r,".drawBuffersWEBGL(",c,"[",a,".colorAttachments.length]);");d("}else{",g,".bindFramebuffer(",36160,",null);");xa&&d(r,".drawBuffersWEBGL(",k,");");d("}",n,".cur=",a,";");q||d("}")}function ka(a,d,h){var q=a.shared,c=q.gl,g=a.current,n=a.next,r=q.current,k=q.next,f=a.cond(r,".dirty");ua.forEach(function(d){d=O(d);if(!(d in h.state)){var q,l;if(d in
n){q=n[d];l=g[d];var I=B(ma[d].length,function(a){return f.def(q,"[",a,"]")});f(a.cond(I.map(function(a,d){return a+"!=="+l+"["+d+"]"}).join("||")).then(c,".",Ia[d],"(",I,");",I.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";"))}else q=f.def(k,".",d),I=a.cond(q,"!==",r,".",d),f(I),d in Fa?I(a.cond(q).then(c,".enable(",Fa[d],");")["else"](c,".disable(",Fa[d],");"),r,".",d,"=",q,";"):I(c,".",Ia[d],"(",q,");",r,".",d,"=",q,";")}});0===p(h.state).length&&f(r,".dirty=false;");d(f)}function pa(a,
d,h,q){var c=a.shared,g=a.current,n=c.current,r=c.gl;ba(p(h)).forEach(function(c){var k=h[c];if(!q||q(k)){var f=k.append(a,d);if(Fa[c]){var l=Fa[c];L(k)?f?d(r,".enable(",l,");"):d(r,".disable(",l,");"):d(a.cond(f).then(r,".enable(",l,");")["else"](r,".disable(",l,");"));d(n,".",c,"=",f,";")}else if(u(f)){var I=g[c];d(r,".",Ia[c],"(",f,");",f.map(function(a,d){return I+"["+d+"]="+a}).join(";"),";")}else d(r,".",Ia[c],"(",f,");",n,".",c,"=",f,";")}})}function ya(a,d){oa&&(a.instancing=d.def(a.shared.extensions,
".angle_instanced_arrays"))}function Ja(a,d,h,q,c){function g(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function n(a){x=d.def();a(x,"=",g(),";");"string"===typeof c?a(l,".count+=",c,";"):a(l,".count++;");ea&&(q?(na=d.def(),a(na,"=",C,".getNumPendingQueries();")):a(C,".beginQuery(",l,");"))}function r(a){a(l,".cpuTime+=",g(),"-",x,";");ea&&(q?a(C,".pushScopeStats(",na,",",C,".getNumPendingQueries(),",l,");"):a(C,".endQuery();"))}function k(a){var h=d.def(I,".profile");
d(I,".profile=",a,";");d.exit(I,".profile=",h,";")}var f=a.shared,l=a.stats,I=f.current,C=f.timer;h=h.profile;var x,na;if(h){if(L(h)){h.enable?(n(d),r(d.exit),k("true")):k("false");return}h=h.append(a,d);k(h)}else h=d.def(I,".profile");f=a.block();n(f);d("if(",h,"){",f,"}");a=a.block();r(a);d.exit("if(",h,"){",a,"}")}function na(a,d,h,q,g){function n(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function r(h,q,c){function g(){d("if(!",I,".buffer){",f,".enableVertexAttribArray(",l,");}");var h=c.type,n;n=c.size?d.def(c.size,"||",q):q;d("if(",I,".type!==",h,"||",I,".size!==",n,"||",na.map(function(a){return I+"."+a+"!=="+c[a]}).join("||"),"){",f,".bindBuffer(",34962,",",C,".buffer);",f,".vertexAttribPointer(",[l,n,h,c.normalized,c.stride,c.offset],");",I,".type=",h,";",I,".size=",n,";",na.map(function(a){return I+"."+a+"="+c[a]+";"}).join(""),"}");oa&&(h=c.divisor,d("if(",I,".divisor!==",h,
"){",a.instancing,".vertexAttribDivisorANGLE(",[l,h],");",I,".divisor=",h,";}"))}function n(){d("if(",I,".buffer){",f,".disableVertexAttribArray(",l,");",I,".buffer=null;","}if(",T.map(function(a,d){return I+"."+a+"!=="+x[d]}).join("||"),"){",f,".vertexAttrib4f(",l,",",x,");",T.map(function(a,d){return I+"."+a+"="+x[d]+";"}).join(""),"}")}var f=k.gl,l=d.def(h,".location"),I=d.def(k.attributes,"[",l,"]");h=c.state;var C=c.buffer,x=[c.x,c.y,c.z,c.w],na=["buffer","normalized","offset","stride"];1===
h?g():2===h?n():(d("if(",h,"===",1,"){"),g(),d("}else{"),n(),d("}"))}var k=a.shared;q.forEach(function(q){var k=q.name,f=h.attributes[k],l;if(f){if(!g(f))return;l=f.append(a,d)}else{if(!g(X))return;var I=a.scopeAttrib(k);c.optional(function(){a.assert(d,I+".state","missing attribute "+k)});l={};p(new sa).forEach(function(a){l[a]=d.def(I,".",a)})}r(a.link(q),n(q.info.type),l)})}function $a(a,d,h,q,g,n){for(var r=a.shared,k=r.gl,f,l=0;l<q.length;++l){var I=q[l],C=I.name,na=I.info.type,p=h.uniforms[C],
I=a.link(I)+".location",t;if(p){if(!g(p))continue;if(L(p)){var v=p.value;c.command(null!==v&&"undefined"!==typeof v,'missing uniform "'+C+'"',a.commandStr);if(35678===na||35680===na)c.command("function"===typeof v&&(35678===na&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||35680===na&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+C,a.commandStr),p=a.link(v._texture||v.color[0]._texture),d(k,".uniform1i(",I,",",p+".bind());"),d.exit(p,".unbind();");
else if(35674===na||35675===na||35676===na){c.optional(function(){c.command(u(v),"invalid matrix for uniform "+C,a.commandStr);c.command(35674===na&&4===v.length||35675===na&&9===v.length||35676===na&&16===v.length,"invalid length for matrix uniform "+C,a.commandStr)});var p=a.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),O=2;35675===na?O=3:35676===na&&(O=4);d(k,".uniformMatrix",O,"fv(",I,",false,",p,");")}else{switch(na){case 5126:c.commandType(v,"number","uniform "+C,a.commandStr);
f="1f";break;case 35664:c.command(u(v)&&2===v.length,"uniform "+C,a.commandStr);f="2f";break;case 35665:c.command(u(v)&&3===v.length,"uniform "+C,a.commandStr);f="3f";break;case 35666:c.command(u(v)&&4===v.length,"uniform "+C,a.commandStr);f="4f";break;case 35670:c.commandType(v,"boolean","uniform "+C,a.commandStr);f="1i";break;case 5124:c.commandType(v,"number","uniform "+C,a.commandStr);f="1i";break;case 35671:c.command(u(v)&&2===v.length,"uniform "+C,a.commandStr);f="2i";break;case 35667:c.command(u(v)&&
2===v.length,"uniform "+C,a.commandStr);f="2i";break;case 35672:c.command(u(v)&&3===v.length,"uniform "+C,a.commandStr);f="3i";break;case 35668:c.command(u(v)&&3===v.length,"uniform "+C,a.commandStr);f="3i";break;case 35673:c.command(u(v)&&4===v.length,"uniform "+C,a.commandStr);f="4i";break;case 35669:c.command(u(v)&&4===v.length,"uniform "+C,a.commandStr),f="4i"}d(k,".uniform",f,"(",I,",",u(v)?Array.prototype.slice.call(v):v,");")}continue}else t=p.append(a,d)}else{if(!g(X))continue;t=d.def(r.uniforms,
"[",x.id(C),"]")}35678===na?(c(!Array.isArray(t),"must specify a scalar prop for textures"),d("if(",t,"&&",t,'._reglType==="framebuffer"){',t,"=",t,".color[0];","}")):35680===na&&(c(!Array.isArray(t),"must specify a scalar prop for cube maps"),d("if(",t,"&&",t,'._reglType==="framebufferCube"){',t,"=",t,".color[0];","}"));c.optional(function(){function h(q,c){a.assert(d,q,'bad data or missing for uniform "'+C+'".  '+c)}function q(a){c(!Array.isArray(t),"must not specify an array type for uniform");
h("typeof "+t+'==="'+a+'"',"invalid type, expected "+a)}function g(d,q){Array.isArray(t)?c(t.length===d,"must have length "+d):h(r.isArrayLike+"("+t+")&&"+t+".length==="+d,"invalid vector, should have length "+d,a.commandStr)}function n(d){c(!Array.isArray(t),"must not specify a value type");h("typeof "+t+'==="function"&&'+t+'._reglType==="texture'+(3553===d?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(na){case 5124:q("number");break;case 35667:g(2,"number");break;case 35668:g(3,"number");
break;case 35669:g(4,"number");break;case 5126:q("number");break;case 35664:g(2,"number");break;case 35665:g(3,"number");break;case 35666:g(4,"number");break;case 35670:q("boolean");break;case 35671:g(2,"boolean");break;case 35672:g(3,"boolean");break;case 35673:g(4,"boolean");break;case 35674:g(4,"number");break;case 35675:g(9,"number");break;case 35676:g(16,"number");break;case 35678:n(3553);break;case 35680:n(34067)}});p=1;switch(na){case 35678:case 35680:p=d.def(t,"._texture");d(k,".uniform1i(",
I,",",p,".bind());");d.exit(p,".unbind();");continue;case 5124:case 35670:f="1i";break;case 35667:case 35671:f="2i";p=2;break;case 35668:case 35672:f="3i";p=3;break;case 35669:case 35673:f="4i";p=4;break;case 5126:f="1f";break;case 35664:f="2f";p=2;break;case 35665:f="3f";p=3;break;case 35666:f="4f";p=4;break;case 35674:f="Matrix2fv";break;case 35675:f="Matrix3fv";break;case 35676:f="Matrix4fv"}if("M"===f.charAt(0)){d(k,".uniform",f,"(",I,",");var I=Math.pow(na-35674+2,2),sa=a.global.def("new Float32Array(",
I,")");Array.isArray(t)?d("false,(",B(I,function(a){return sa+"["+a+"]="+t[a]}),",",sa,")"):d("false,(Array.isArray(",t,")||",t," instanceof Float32Array)?",t,":(",B(I,function(a){return sa+"["+a+"]="+t+"["+a+"]"}),",",sa,")");d(");")}else{if(1<p){for(var O=[],Ja=[],Da=0;Da<p;++Da)Array.isArray(t)?Ja.push(t[Da]):Ja.push(d.def(t+"["+Da+"]")),n&&O.push(d.def());n&&d("if(!",a.batchId,"||",O.map(function(a,d){return a+"!=="+Ja[d]}).join("||"),"){",O.map(function(a,d){return a+"="+Ja[d]+";"}).join(""));
d(k,".uniform",f,"(",I,",",Ja.join(","),");")}else c(!Array.isArray(t),"uniform value must not be an array"),n&&(p=d.def(),d("if(!",a.batchId,"||",p,"!==",t,"){",p,"=",t,";")),d(k,".uniform",f,"(",I,",",t,");");n&&d("}")}}}function Ta(a,d,h,q){function g(c){var n=l[c];return n?n.contextDep&&q.contextDynamic||n.propDep?n.append(a,h):n.append(a,d):d.def(I,".",c)}function n(){function a(){h(p,".drawElementsInstancedANGLE(",[na,v,O,x+"<<(("+O+"-5121)>>1)",t],");")}function d(){h(p,".drawArraysInstancedANGLE(",
[na,x,v,t],");")}C&&"null"!==C?sa?a():(h("if(",C,"){"),a(),h("}else{"),d(),h("}")):d()}function r(){function a(){h(k+".drawElements("+[na,v,O,x+"<<(("+O+"-5121)>>1)"]+");")}function d(){h(k+".drawArrays("+[na,x,v]+");")}C&&"null"!==C?sa?a():(h("if(",C,"){"),a(),h("}else{"),d(),h("}")):d()}var f=a.shared,k=f.gl,I=f.draw,l=q.draw,C=function(){var c=l.elements,g=d;if(c){if(c.contextDep&&q.contextDynamic||c.propDep)g=h;c=c.append(a,g);l.elementsActive&&g("if("+c+")"+k+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=
g.def(),g(c,"=",I,".","elements",";","if(",c,"){",k,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",f.vao,".currentVAO){",c,"=",a.shared.elements+".getElements("+f.vao,".currentVAO.elements);",Ea?"":"if("+c+")"+k+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),na=g("primitive"),x=g("offset"),v=function(){var g=l.count,n,r=d;if(g){if(g.contextDep&&q.contextDynamic||g.propDep)r=h;n=g.append(a,r);c.optional(function(){g.MISSING&&a.assert(d,"false","missing vertex count");g.DYNAMIC&&
a.assert(r,n+">=0","missing vertex count")})}else n=r.def(I,".","count"),c.optional(function(){a.assert(r,n+">=0","missing vertex count")});return n}();if("number"===typeof v){if(0===v)return}else h("if(",v,"){"),h.exit("}");var t,p;oa&&(t=g("instances"),p=a.instancing);var O=C+".type",sa=l.elements&&L(l.elements)&&!l.vaoActive;oa&&("number"!==typeof t||0<=t)?"string"===typeof t?(h("if(",t,">0){"),n(),h("}else if(",t,"<0){"),r(),h("}")):n():r()}function q(a,d,h,q,g){var n=N();g=n.proc("body",g);c.optional(function(){n.commandStr=
d.commandStr;n.command=n.link(d.commandStr)});oa&&(n.instancing=g.def(n.shared.extensions,".angle_instanced_arrays"));a(n,g,h,q);return n.compile().body}function n(a,d,h,q){ya(a,d);h.useVAO?h.drawVAO?d(a.shared.vao,".setVAO(",h.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(d(a.shared.vao,".setVAO(null);"),na(a,d,h,q.attributes,function(){return!0}));$a(a,d,h,q.uniforms,function(){return!0},!1);Ta(a,d,d,h)}function C(a,d){var h=a.proc("draw",1);ya(a,h);fa(a,h,d.context);
Aa(a,h,d.framebuffer);ka(a,h,d);pa(a,h,d.state);Ja(a,h,d,!1,!0);var c=d.shader.progVar.append(a,h);h(a.shared.gl,".useProgram(",c,".program);");if(d.shader.program)n(a,h,d,d.shader.program);else{h(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),r=h.def(c,".id"),f=h.def(g,"[",r,"]");h(a.cond(f).then(f,".call(this,a0);")["else"](f,"=",g,"[",r,"]=",a.link(function(h){return q(n,a,d,h,1)}),"(",c,");",f,".call(this,a0);"))}0<p(d.state).length&&h(a.shared.current,".dirty=true;");a.shared.vao&&h(a.shared.vao,
".setVAO(null);")}function va(a,d,h,q){function c(){return!0}a.batchId="a1";ya(a,d);na(a,d,h,q.attributes,c);$a(a,d,h,q.uniforms,c,!1);Ta(a,d,d,h)}function Ba(a,d,h,c){function g(a){return a.contextDep&&r||a.propDep}function n(a){return!g(a)}ya(a,d);var r=h.contextDep,f=d.def(),k=d.def();a.shared.props=k;a.batchId=f;var I=a.scope(),l=a.scope();d(I.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",k,"=","a0","[",f,"];",l,"}",I.exit);h.needsContext&&fa(a,l,h.context);h.needsFramebuffer&&Aa(a,l,h.framebuffer);
pa(a,l,h.state,g);h.profile&&g(h.profile)&&Ja(a,l,h,!1,!0);c?(h.useVAO?h.drawVAO?g(h.drawVAO)?l(a.shared.vao,".setVAO(",h.drawVAO.append(a,l),");"):I(a.shared.vao,".setVAO(",h.drawVAO.append(a,I),");"):I(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(I(a.shared.vao,".setVAO(null);"),na(a,I,h,c.attributes,n),na(a,l,h,c.attributes,g)),$a(a,I,h,c.uniforms,n,!1),$a(a,l,h,c.uniforms,g,!0),Ta(a,I,l,h)):(d=a.global.def("{}"),c=h.shader.progVar.append(a,l),k=l.def(c,".id"),I=l.def(d,"[",k,"]"),l(a.shared.gl,
".useProgram(",c,".program);","if(!",I,"){",I,"=",d,"[",k,"]=",a.link(function(d){return q(va,a,h,d,2)}),"(",c,");}",I,".call(this,a0[",f,"],",f,");"))}function xd(a,d){function h(a){return a.contextDep&&g||a.propDep}var c=a.proc("batch",2);a.batchId="0";ya(a,c);var g=!1,n=!0;p(d.context).forEach(function(a){g=g||d.context[a].propDep});g||(fa(a,c,d.context),n=!1);var r=d.framebuffer,f=!1;r?(r.propDep?g=f=!0:r.contextDep&&g&&(f=!0),f||Aa(a,c,r)):Aa(a,c,null);d.state.viewport&&d.state.viewport.propDep&&
(g=!0);ka(a,c,d);pa(a,c,d.state,function(a){return!h(a)});d.profile&&h(d.profile)||Ja(a,c,d,!1,"a1");d.contextDep=g;d.needsContext=n;d.needsFramebuffer=f;n=d.shader.progVar;if(n.contextDep&&g||n.propDep)Ba(a,c,d,null);else if(n=n.append(a,c),c(a.shared.gl,".useProgram(",n,".program);"),d.shader.program)Ba(a,c,d,d.shader.program);else{c(a.shared.vao,".setVAO(null);");var r=a.global.def("{}"),f=c.def(n,".id"),k=c.def(r,"[",f,"]");c(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",r,"[",f,"]=",a.link(function(h){return q(Ba,
a,d,h,2)}),"(",n,");",k,".call(this,a0,a1);"))}0<p(d.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Hb(a,d){function h(g){var n=d.shader[g];n&&q.set(c.shader,"."+g,n.append(a,q))}var q=a.proc("scope",3);a.batchId="a2";var c=a.shared,g=c.current;fa(a,q,d.context);d.framebuffer&&d.framebuffer.append(a,q);ba(p(d.state)).forEach(function(h){var g=d.state[h].append(a,q);u(g)?g.forEach(function(d,c){q.set(a.next[h],"["+c+"]",d)}):q.set(c.next,"."+
h,g)});Ja(a,q,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(h){var g=d.draw[h];g&&q.set(c.draw,"."+h,""+g.append(a,q))});p(d.uniforms).forEach(function(h){var g=d.uniforms[h].append(a,q);Array.isArray(g)&&(g="["+g.join()+"]");q.set(c.uniforms,"["+x.id(h)+"]",g)});p(d.attributes).forEach(function(h){var c=d.attributes[h].append(a,q),g=a.scopeAttrib(h);p(new sa).forEach(function(a){q.set(g,"."+a,c[a])})});d.scopeVAO&&q.set(c.vao,".targetVAO",d.scopeVAO.append(a,q));
h("vert");h("frag");0<p(d.state).length&&(q(g,".dirty=true;"),q.exit(g,".dirty=true;"));q("a1(",a.shared.context,",a0,",a.batchId,");")}function ga(a){if("object"===typeof a&&!u(a)){for(var d=p(a),h=0;h<d.length;++h)if(y.isDynamic(a[d[h]]))return!0;return!1}}function I(a,d,h){function q(a,d){n.forEach(function(h){var q=c[h];y.isDynamic(q)&&(q=a.invoke(d,q),d(I,".",h,"=",q,";"))})}var c=d["static"][h];if(c&&ga(c)){var g=a.global,n=p(c),r=!1,f=!1,k=!1,I=a.global.def("{}");n.forEach(function(d){var h=
c[d];if(y.isDynamic(h))"function"===typeof h&&(h=c[d]=y.unbox(h)),d=l(h,null),r=r||d.thisDep,k=k||d.propDep,f=f||d.contextDep;else{g(I,".",d,"=");switch(typeof h){case "number":g(h);break;case "string":g('"',h,'"');break;case "object":Array.isArray(h)&&g("[",h.join(),"]");break;default:g(a.link(h))}g(";")}});d.dynamic[h]=new y.DynamicVariable(4,{thisDep:r,contextDep:f,propDep:k,ref:I,append:q});delete d["static"][h]}}var sa=A.Record,Da={add:32774,subtract:32778,"reverse subtract":32779};m.ext_blend_minmax&&
(Da.min=32775,Da.max=32776);var oa=m.angle_instanced_arrays,xa=m.webgl_draw_buffers,Ea=m.oes_vertex_array_object,ma={dirty:!0,profile:R.profile},V={},ua=[],Fa={},Ia={};E("dither",3024);E("blend.enable",3042);h("blend.color","blendColor",[0,0,0,0]);h("blend.equation","blendEquationSeparate",[32774,32774]);h("blend.func","blendFuncSeparate",[1,0,1,0]);E("depth.enable",2929,!0);h("depth.func","depthFunc",513);h("depth.range","depthRange",[0,1]);h("depth.mask","depthMask",!0);h("colorMask","colorMask",
[!0,!0,!0,!0]);E("cull.enable",2884);h("cull.face","cullFace",1029);h("frontFace","frontFace",2305);h("lineWidth","lineWidth",1);E("polygonOffset.enable",32823);h("polygonOffset.offset","polygonOffset",[0,0]);E("sample.alpha",32926);E("sample.enable",32928);h("sample.coverage","sampleCoverage",[1,!1]);E("stencil.enable",2960);h("stencil.mask","stencilMask",-1);h("stencil.func","stencilFunc",[519,0,-1]);h("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);h("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);E("scissor.enable",3089);h("scissor.box","scissor",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);h("viewport","viewport",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);var mb={gl:f,context:W,strings:x,next:V,current:ma,draw:Dc,elements:d,buffer:F,shader:ja,attributes:A.state,vao:A,uniforms:U,framebuffer:a,extensions:m,timer:ea,isBufferArgs:b},da={primTypes:ca,compareFuncs:g,blendFuncs:Q,blendEquations:Da,stencilOps:v,glTypes:w,orientationType:k};c.optional(function(){mb.isArrayLike=
u});xa&&(da.backBuffer=[1029],da.drawBuffer=B(D.maxDrawbuffers,function(a){return 0===a?[0]:B(a,function(a){return 36064+a})}));var yd=0;return{next:V,current:ma,procs:function(){var a=N(),d=a.proc("poll"),h=a.proc("refresh"),q=a.block();d(q);h(q);var c=a.shared,g=c.gl,n=c.next,r=c.current;q(r,".dirty=false;");Aa(a,d);Aa(a,h,null,!0);var f;oa&&(f=a.link(oa));m.oes_vertex_array_object&&h(a.link(m.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var k=0;k<D.maxAttributes;++k){var I=h.def(c.attributes,
"[",k,"]"),l=a.cond(I,".buffer");l.then(g,".enableVertexAttribArray(",k,");",g,".bindBuffer(",34962,",",I,".buffer.buffer);",g,".vertexAttribPointer(",k,",",I,".size,",I,".type,",I,".normalized,",I,".stride,",I,".offset);")["else"](g,".disableVertexAttribArray(",k,");",g,".vertexAttrib4f(",k,",",I,".x,",I,".y,",I,".z,",I,".w);",I,".buffer=null;");h(l);oa&&h(f,".vertexAttribDivisorANGLE(",k,",",I,".divisor);")}h(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");
p(Fa).forEach(function(c){var f=Fa[c],k=q.def(n,".",c),I=a.block();I("if(",k,"){",g,".enable(",f,")}else{",g,".disable(",f,")}",r,".",c,"=",k,";");h(I);d("if(",k,"!==",r,".",c,"){",I,"}")});p(Ia).forEach(function(c){var f=Ia[c],k=ma[c],I,l,C=a.block();C(g,".",f,"(");u(k)?(f=k.length,I=a.global.def(n,".",c),l=a.global.def(r,".",c),C(B(f,function(a){return I+"["+a+"]"}),");",B(f,function(a){return l+"["+a+"]="+I+"["+a+"];"}).join("")),d("if(",B(f,function(a){return I+"["+a+"]!=="+l+"["+a+"]"}).join("||"),
"){",C,"}")):(I=q.def(n,".",c),l=q.def(r,".",c),C(I,");",r,".",c,"=",I,";"),d("if(",I,"!==",l,"){",C,"}"));h(C)});return a.compile()}(),compile:function(a,d,h,q,c){var g=N();g.stats=g.link(c);p(d["static"]).forEach(function(a){I(g,d,a)});z.forEach(function(d){I(g,a,d)});var n=wa(a,d,h,q,g);C(g,n);Hb(g,n);xd(g,n);return G(g.compile(),{destroy:function(){n.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,
"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(Z,ha,ab){function b(p,c){this.id=l++;this.type=p;this.data=c}function ba(l){if(0===l.length)return[];var c=l.charAt(0),e=l.charAt(l.length-1);if(1<l.length&&c===e&&('"'===c||"'"===c))return['"'+l.substr(1,l.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(l))return ba(l.substr(0,c.index)).concat(ba(c[1])).concat(ba(l.substr(c.index+
c[0].length)));c=l.split(".");if(1===c.length)return['"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];l=[];for(e=0;e<c.length;++e)l=l.concat(ba(c[e]));return l}function M(l){return"["+ba(l).join("][")+"]"}function L(l,c){if("function"===typeof l)return new b(0,l);if("number"===typeof l||"boolean"===typeof l)return new b(5,l);if(Array.isArray(l))return new b(6,l.map(function(l,p){return L(l,c+"["+p+"]")}));if(l instanceof b)return l;e(!1,"invalid option type in uniform "+c)}var e=Z("./util/check"),
l=0;ha.exports={DynamicVariable:b,define:function(l,c){return new b(l,M(c+""))},isDynamic:function(l){return"function"===typeof l&&!l._reglType||l instanceof b},unbox:L,accessor:M}},{"./util/check":21}],10:[function(Z,ha,ab){var b=Z("./util/check"),ba=Z("./util/is-typed-array"),M=Z("./util/is-ndarray"),L=Z("./util/values"),e=Z("./constants/primitives.json"),l=Z("./constants/usage.json");ha.exports=function(p,c,G,H){function B(c){this.id=y++;u[this.id]=this;this.buffer=c;this.primType=4;this.type=
this.vertCount=0}function U(l,e,w,u,g,v,S){l.buffer.bind();var k;e?((k=S)||ba(e)&&(!M(e)||ba(e.data))||(k=c.oes_element_index_uint?5125:5123),G._initBuffer(l.buffer,e,w,k,3)):(p.bufferData(34963,v,w),l.buffer.dtype=k||5121,l.buffer.usage=w,l.buffer.dimension=3,l.buffer.byteLength=v);k=S;if(!S){switch(l.buffer.dtype){case 5121:case 5120:k=5121;break;case 5123:case 5122:k=5123;break;case 5125:case 5124:k=5125;break;default:b.raise("unsupported type for element array")}l.buffer.dtype=k}l.type=k;b(5125!==
k||!!c.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=g;0>e&&(e=l.buffer.byteLength,5123===k?e>>=1:5125===k&&(e>>=2));l.vertCount=e;e=u;0>u&&(e=4,u=l.buffer.dimension,1===u&&(e=0),2===u&&(e=1),3===u&&(e=4));l.primType=e}function m(c){H.elementsCount--;b(null!==c.buffer,"must not double destroy elements");delete u[c.id];c.buffer.destroy();c.buffer=null}var u={},y=0,ca={uint8:5121,uint16:5123};c.oes_element_index_uint&&(ca.uint32=5125);B.prototype.bind=
function(){this.buffer.bind()};var w=[];return{create:function(c,p){function w(c){if(c)if("number"===typeof c)u(c),g.primType=4,g.vertCount=c|0,g.type=5121;else{var p=null,k=35044,z=-1,f=-1,x=0,m=0;if(Array.isArray(c)||ba(c)||M(c))p=c;else if(b.type(c,"object","invalid arguments for elements"),"data"in c&&(p=c.data,b(Array.isArray(p)||ba(p)||M(p),"invalid data for element buffer")),"usage"in c&&(b.parameter(c.usage,l,"invalid element buffer usage"),k=l[c.usage]),"primitive"in c&&(b.parameter(c.primitive,
e,"invalid element buffer primitive"),z=e[c.primitive]),"count"in c&&(b("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),f=c.count|0),"type"in c&&(b.parameter(c.type,ca,"invalid buffer type"),m=ca[c.type]),"length"in c)x=c.length|0;else if(x=f,5123===m||5122===m)x*=2;else if(5125===m||5124===m)x*=4;U(g,p,k,z,f,x,m)}else u(),g.primType=4,g.vertCount=0,g.type=5121;return w}var u=G.create(null,34963,!0),g=new B(u._buffer);H.elementsCount++;w(c);w._reglType="elements";w._elements=
g;w.subdata=function(c,g){u.subdata(c,g);return w};w.destroy=function(){m(g)};return w},createStream:function(c){var l=w.pop();l||(l=new B(G.create(null,34963,!0,!1)._buffer));U(l,c,35040,-1,-1,0,0);return l},destroyStream:function(c){w.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof B?c._elements:null},clear:function(){L(u).forEach(m)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,
"./util/values":36}],11:[function(Z,ha,ab){var b=Z("./util/sorted-object-keys"),ba=Z("./util/check");ha.exports=function(M,L){function e(c){ba.type(c,"string","extension name must be string");c=c.toLowerCase();var p;try{p=l[c]=M.getExtension(c)}catch(e){}return!!p}for(var l={},p=0;p<L.extensions.length;++p){var c=L.extensions[p];if(!e(c))return L.onDestroy(),L.onDone('"'+c+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}L.optionalExtensions.forEach(e);
return{extensions:l,restore:function(){b(l).forEach(function(c){if(l[c]&&!e(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(Z,ha,ab){var b=Z("./util/check"),ba=Z("./util/values"),M=Z("./util/extend"),L=[6407,6408],e=[];e[6408]=4;e[6407]=3;var l=[];l[5121]=1;l[5126]=4;l[36193]=2;var p=[32854,32855,36194,35907,34842,34843,34836],c={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};ha.exports=function(G,H,B,U,m,u){function y(a,d,c){this.target=a;this.texture=d;this.renderbuffer=c;var g=a=0;d?(a=d.width,g=d.height):c&&(a=c.width,g=c.height);this.width=a;this.height=g}function ca(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function w(a,d,c){if(a){if(a.texture){a=a.texture._texture;var g=Math.max(1,a.height);b(Math.max(1,a.width)===d&&g===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,
b(a.width===d&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function T(a,d){d&&(d.texture?G.framebufferTexture2D(36160,a,d.target,d.texture._texture.texture,0):G.framebufferRenderbuffer(36160,a,36161,d.renderbuffer._renderbuffer.renderbuffer))}function z(a){var d=3553,c=null,g=null,l=a;"object"===typeof a&&(l=a.data,"target"in a&&(d=a.target|0));b.type(l,"function","invalid attachment data");a=l._reglType;"texture2d"===a?(c=l,b(3553===d)):"textureCube"===a?(c=l,b(34069<=
d&&34075>d,"invalid cube map target")):"renderbuffer"===a?(g=l,d=36161):b.raise("invalid regl object for attachment");return new y(d,c,g)}function Q(a,d,c,g,l){if(c)return a=U.create2D({width:a,height:d,format:g,type:l}),a._texture.refCount=0,new y(3553,a,null);a=m.create({width:a,height:d,format:g});a._renderbuffer.refCount=0;return new y(36161,null,a)}function ia(a){return a&&(a.texture||a.renderbuffer)}function g(a,d,c){a&&(a.texture?a.texture.resize(d,c):a.renderbuffer&&a.renderbuffer.resize(d,
c),a.width=d,a.height=c)}function v(){this.id=d++;t[this.id]=this;this.framebuffer=G.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function S(a){a.colorAttachments.forEach(ca);ca(a.depthAttachment);ca(a.stencilAttachment);ca(a.depthStencilAttachment)}function k(a){var d=a.framebuffer;b(d,"must not double destroy framebuffer");G.deleteFramebuffer(d);a.framebuffer=null;u.framebufferCount--;delete t[a.id]}
function X(a){var d;G.bindFramebuffer(36160,a.framebuffer);var g=a.colorAttachments;for(d=0;d<g.length;++d)T(36064+d,g[d]);for(d=g.length;d<B.maxColorAttachments;++d)G.framebufferTexture2D(36160,36064+d,3553,null,0);G.framebufferTexture2D(36160,33306,3553,null,0);G.framebufferTexture2D(36160,36096,3553,null,0);G.framebufferTexture2D(36160,36128,3553,null,0);T(36096,a.depthAttachment);T(36128,a.stencilAttachment);T(33306,a.depthStencilAttachment);a=G.checkFramebufferStatus(36160);G.isContextLost()||
36053===a||b.raise("framebuffer configuration not supported, status = "+c[a]);G.bindFramebuffer(36160,x.next?x.next.framebuffer:null);x.cur=x.next;G.getError()}function f(a,d){function c(a,d){var g;b(x.next!==f,"can not update framebuffer which is currently in use");var k=0,t=0,v=!0,h=!0;g=null;var u=!0,K="rgba",m="uint8",U=1,r=null,J=null,aa=null,P=!1;if("number"===typeof a)k=a|0,t=d|0||k;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(t=a.shape,b(Array.isArray(t)&&
2<=t.length,"invalid shape for framebuffer"),k=t[0],t=t[1]):("radius"in a&&(k=t=a.radius),"width"in a&&(k=a.width),"height"in a&&(t=a.height));if("color"in a||"colors"in a)g=a.color||a.colors,Array.isArray(g)&&b(1===g.length||H.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in a&&(U=a.colorCount|0,b(0<U,"invalid color buffer count"));"colorTexture"in a&&(u=!!a.colorTexture,K="rgba4");if("colorType"in a){m=a.colorType;if(u)b(H.oes_texture_float||!("float"===m||"float32"===
m),"you must enable OES_texture_float in order to use floating point framebuffer objects"),b(H.oes_texture_half_float||!("half float"===m||"float16"===m),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===m||"float16"===m)b(H.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),K="rgba16f";else if("float"===m||"float32"===m)b(H.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
K="rgba32f";b.oneOf(m,F,"invalid color type")}"colorFormat"in a&&(K=a.colorFormat,0<=Y.indexOf(K)?u=!0:0<=D.indexOf(K)?u=!1:b.optional(function(){if(u)b.oneOf(a.colorFormat,Y,"invalid color format for texture");else b.oneOf(a.colorFormat,D,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)P=!(!a.depthTexture&&!a.depthStencilTexture),b(!P||H.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?v=a.depth:
(r=a.depth,h=!1));"stencil"in a&&("boolean"===typeof a.stencil?h=a.stencil:(J=a.stencil,v=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?v=h=a.depthStencil:(aa=a.depthStencil,h=v=!1))}else k=t=1;var y=null,qa=null,T=null,wa=null;if(Array.isArray(g))y=g.map(z);else if(g)y=[z(g)];else for(y=Array(U),g=0;g<U;++g)y[g]=Q(k,t,u,K,m);b(H.webgl_draw_buffers||1>=y.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");b(y.length<=B.maxColorAttachments,
"too many color attachments, not supported");k=k||y[0].width;t=t||y[0].height;r?qa=z(r):v&&!h&&(qa=Q(k,t,P,"depth","uint32"));J?T=z(J):h&&!v&&(T=Q(k,t,!1,"stencil","uint8"));aa?wa=z(aa):!r&&!J&&h&&v&&(wa=Q(k,t,P,"depth stencil","depth stencil"));b(1>=!!r+!!J+!!aa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");v=null;for(g=0;g<y.length;++g)w(y[g],k,t),b(!y[g]||y[g].texture&&0<=L.indexOf(y[g].texture._texture.format)||y[g].renderbuffer&&0<=p.indexOf(y[g].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+g+" is invalid"),y[g]&&y[g].texture&&(h=e[y[g].texture._texture.format]*l[y[g].texture._texture.type],null===v?v=h:b(v===h,"all color attachments much have the same number of bits per pixel."));w(qa,k,t);b(!qa||qa.texture&&6402===qa.texture._texture.format||qa.renderbuffer&&33189===qa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");w(T,k,t);b(!T||T.renderbuffer&&36168===T.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
w(wa,k,t);b(!wa||wa.texture&&34041===wa.texture._texture.format||wa.renderbuffer&&34041===wa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");S(f);f.width=k;f.height=t;f.colorAttachments=y;f.depthAttachment=qa;f.stencilAttachment=T;f.depthStencilAttachment=wa;c.color=y.map(ia);c.depth=ia(qa);c.stencil=ia(T);c.depthStencil=ia(wa);c.width=f.width;c.height=f.height;X(f);return c}var f=new v;u.framebufferCount++;c(a,d);return M(c,{resize:function(a,d){b(x.next!==
f,"can not resize a framebuffer which is currently in use");var l=Math.max(a|0,1),k=Math.max(d|0||l,1);if(l===f.width&&k===f.height)return c;for(var t=f.colorAttachments,v=0;v<t.length;++v)g(t[v],l,k);g(f.depthAttachment,l,k);g(f.stencilAttachment,l,k);g(f.depthStencilAttachment,l,k);f.width=c.width=l;f.height=c.height=k;X(f);return c},_reglType:"framebuffer",_framebuffer:f,destroy:function(){k(f);S(f)},use:function(a){x.setFBO({framebuffer:c},a)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},
Y=["rgba"],D=["rgba4","rgb565","rgb5 a1"];H.ext_srgb&&D.push("srgba");H.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");H.webgl_color_buffer_float&&D.push("rgba32f");var F=["uint8"];H.oes_texture_half_float&&F.push("half float","float16");H.oes_texture_float&&F.push("float","float32");var d=0,t={};return M(x,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof v)?a:null},create:f,createCube:function(a){function d(a){var g;b(0>
c.indexOf(x.next),"can not update framebuffer which is currently in use");var l={color:null},k=0,t=null;g="rgba";var v="uint8",p=1;if("number"===typeof a)k=a|0;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(k=a.shape,b(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),b(k[0]===k[1],"cube framebuffer must be square"),k=k[0]):("radius"in a&&(k=a.radius|0),"width"in a?(k=a.width|0,"height"in a&&b(a.height===k,"must be square")):"height"in a&&(k=a.height|0));
if("color"in a||"colors"in a)t=a.color||a.colors,Array.isArray(t)&&b(1===t.length||H.webgl_draw_buffers,"multiple render targets not supported");t||("colorCount"in a&&(p=a.colorCount|0,b(0<p,"invalid color buffer count")),"colorType"in a&&(b.oneOf(a.colorType,F,"invalid color type"),v=a.colorType),"colorFormat"in a&&(g=a.colorFormat,b.oneOf(a.colorFormat,Y,"invalid color format for texture")));"depth"in a&&(l.depth=a.depth);"stencil"in a&&(l.stencil=a.stencil);"depthStencil"in a&&(l.depthStencil=
a.depthStencil)}else k=1;if(t)if(Array.isArray(t))for(a=[],g=0;g<t.length;++g)a[g]=t[g];else a=[t];else for(a=Array(p),t={radius:k,format:g,type:v},g=0;g<p;++g)a[g]=U.createCube(t);l.color=Array(a.length);for(g=0;g<a.length;++g)p=a[g],b("function"===typeof p&&"textureCube"===p._reglType,"invalid cube map"),k=k||p.width,b(p.width===k&&p.height===k,"invalid cube map shape"),l.color[g]={target:34069,data:a[g]};for(g=0;6>g;++g){for(p=0;p<a.length;++p)l.color[p].target=34069+g;0<g&&(l.depth=c[0].depth,
l.stencil=c[0].stencil,l.depthStencil=c[0].depthStencil);if(c[g])c[g](l);else c[g]=f(l)}return M(d,{width:k,height:k,color:a})}var c=Array(6);d(a);return M(d,{faces:c,resize:function(a){var g=a|0;b(0<g&&g<=B.maxCubeMapSize,"invalid radius for cube fbo");if(g===d.width)return d;var l=d.color;for(a=0;a<l.length;++a)l[a].resize(g);for(a=0;6>a;++a)c[a].resize(g);d.width=d.height=g;return d},_reglType:"framebufferCube",destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){ba(t).forEach(k)},
restore:function(){x.cur=null;x.next=null;x.dirty=!0;ba(t).forEach(function(a){a.framebuffer=G.createFramebuffer();X(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(Z,ha,ab){var b=Z("./util/sorted-object-keys"),ba=Z("./util/pool");ha.exports=function(M,L){var e=1;L.ext_texture_filter_anisotropic&&(e=M.getParameter(34047));var l=1,p=1;L.webgl_draw_buffers&&(l=M.getParameter(34852),p=M.getParameter(36063));var c=!!L.oes_texture_float;if(c){c=M.createTexture();M.bindTexture(3553,
c);M.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var G=M.createFramebuffer();M.bindFramebuffer(36160,G);M.framebufferTexture2D(36160,36064,3553,c,0);M.bindTexture(3553,null);if(36053!==M.checkFramebufferStatus(36160))c=!1;else{M.viewport(0,0,1,1);M.clearColor(1,0,0,1);M.clear(16384);var H=ba.allocType(5126,4);M.readPixels(0,0,1,1,6408,5126,H);M.getError()?c=!1:(M.deleteFramebuffer(G),M.deleteTexture(c),c=1===H[0]);ba.freeType(H)}}H=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(H=M.createTexture(),G=ba.allocType(5121,36),M.activeTexture(33984),M.bindTexture(34067,H),M.texImage2D(34069,0,6408,3,3,0,6408,5121,G),ba.freeType(G),M.bindTexture(34067,null),M.deleteTexture(H),H=!M.getError());return{colorBits:[M.getParameter(3410),M.getParameter(3411),M.getParameter(3412),M.getParameter(3413)],depthBits:M.getParameter(3414),stencilBits:M.getParameter(3415),subpixelBits:M.getParameter(3408),extensions:b(L).filter(function(c){return!!L[c]}),
maxAnisotropic:e,maxDrawbuffers:l,maxColorAttachments:p,pointSizeDims:M.getParameter(33901),lineWidthDims:M.getParameter(33902),maxViewportDims:M.getParameter(3386),maxCombinedTextureUnits:M.getParameter(35661),maxCubeMapSize:M.getParameter(34076),maxRenderbufferSize:M.getParameter(34024),maxTextureUnits:M.getParameter(34930),maxTextureSize:M.getParameter(3379),maxAttributes:M.getParameter(34921),maxVertexUniforms:M.getParameter(36347),maxVertexTextureUnits:M.getParameter(35660),maxVaryingVectors:M.getParameter(36348),
maxFragmentUniforms:M.getParameter(36349),glsl:M.getParameter(35724),renderer:M.getParameter(7937),vendor:M.getParameter(7936),version:M.getParameter(7938),readFloat:c,npotTextureCube:H}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(Z,ha,ab){var b=Z("./util/check"),ba=Z("./util/is-typed-array");ha.exports=function(M,L,e,l,p,c,G){function H(U){var m;null===L.next?(b(p.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
m=5121):(b(null!==L.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),m=L.next.colorAttachments[0].texture._texture.type,b.optional(function(){c.oes_texture_float?(b(5121===m||5126===m,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===m&&b(G.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):b(5121===m,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var u=0,y=0,H=l.framebufferWidth,w=l.framebufferHeight,T=null;ba(U)?T=U:U&&(b.type(U,"object","invalid arguments to regl.read()"),u=U.x|0,y=U.y|0,b(0<=u&&u<l.framebufferWidth,"invalid x offset for regl.read"),b(0<=y&&y<l.framebufferHeight,"invalid y offset for regl.read"),H=(U.width||l.framebufferWidth-u)|0,w=(U.height||l.framebufferHeight-y)|0,T=U.data||null);T&&(5121===m?b(T instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===m&&b(T instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));b(0<H&&H+u<=l.framebufferWidth,"invalid width for read pixels");b(0<w&&w+y<=l.framebufferHeight,"invalid height for read pixels");e();U=H*w*4;T||(5121===m?T=new Uint8Array(U):5126===m&&(T=T||new Float32Array(U)));b.isTypedArray(T,"data buffer for regl.read() must be a typedarray");b(T.byteLength>=U,"data buffer for regl.read() too small");M.pixelStorei(3333,4);M.readPixels(u,y,H,w,6408,m,T);return T}function B(c){var l;
L.setFBO({framebuffer:c.framebuffer},function(){l=H(c)});return l}return function(c){return c&&"framebuffer"in c?B(c):H(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(Z,ha,ab){var b=Z("./util/sorted-object-keys"),ba=Z("./util/check"),M=Z("./util/values"),L=[];L[32854]=2;L[32855]=2;L[36194]=2;L[33189]=2;L[36168]=1;L[34041]=4;L[35907]=4;L[34836]=16;L[34842]=8;L[34843]=6;ha.exports=function(e,l,p,c,G){function H(c){this.id=u++;this.refCount=1;this.renderbuffer=c;this.format=32854;
this.height=this.width=0;G.profile&&(this.stats={size:0})}function B(l){var p=l.renderbuffer;ba(p,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(p);l.renderbuffer=null;l.refCount=0;delete y[l.id];c.renderbufferCount--}var U={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};l.ext_srgb&&(U.srgba=35907);l.ext_color_buffer_half_float&&(U.rgba16f=34842,U.rgb16f=34843);l.webgl_color_buffer_float&&(U.rgba32f=34836);var m=
[];b(U).forEach(function(c){m[U[c]]=c});var u=0,y={};H.prototype.decRef=function(){0>=--this.refCount&&B(this)};G.profile&&(c.getTotalRenderbufferSize=function(){var c=0;b(y).forEach(function(l){c+=y[l].stats.size});return c});return{create:function(l,w){function b(c,l){var g=0,v=0,S=32854;"object"===typeof c&&c?("shape"in c?(v=c.shape,ba(Array.isArray(v)&&2<=v.length,"invalid renderbuffer shape"),g=v[0]|0,v=v[1]|0):("radius"in c&&(g=v=c.radius|0),"width"in c&&(g=c.width|0),"height"in c&&(v=c.height|
0)),"format"in c&&(ba.parameter(c.format,U,"invalid renderbuffer format"),S=U[c.format])):"number"===typeof c?(g=c|0,v="number"===typeof l?l|0:g):c?ba.raise("invalid arguments to renderbuffer constructor"):g=v=1;ba(0<g&&0<v&&g<=p.maxRenderbufferSize&&v<=p.maxRenderbufferSize,"invalid renderbuffer size");if(g!==z.width||v!==z.height||S!==z.format)return b.width=z.width=g,b.height=z.height=v,z.format=S,e.bindRenderbuffer(36161,z.renderbuffer),e.renderbufferStorage(36161,S,g,v),ba(0===e.getError(),"invalid render buffer format"),
G.profile&&(z.stats.size=L[z.format]*z.width*z.height),b.format=m[z.format],b}var z=new H(e.createRenderbuffer());y[z.id]=z;c.renderbufferCount++;b(l,w);b.resize=function(c,l){var g=c|0,v=l|0||g;if(g===z.width&&v===z.height)return b;ba(0<g&&0<v&&g<=p.maxRenderbufferSize&&v<=p.maxRenderbufferSize,"invalid renderbuffer size");b.width=z.width=g;b.height=z.height=v;e.bindRenderbuffer(36161,z.renderbuffer);e.renderbufferStorage(36161,z.format,g,v);ba(0===e.getError(),"invalid render buffer format");G.profile&&
(z.stats.size=L[z.format]*z.width*z.height);return b};b._reglType="renderbuffer";b._renderbuffer=z;G.profile&&(b.stats=z.stats);b.destroy=function(){z.decRef()};return b},clear:function(){M(y).forEach(B)},restore:function(){M(y).forEach(function(c){c.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,c.renderbuffer);e.renderbufferStorage(36161,c.format,c.width,c.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(Z,
ha,ab){var b=Z("./util/sorted-object-keys"),ba=Z("./util/check"),M=Z("./util/extend"),L=Z("./util/values");ha.exports=function(e,l,p,c){function G(c,l,p,g){this.name=c;this.id=l;this.location=p;this.info=g}function H(c,l){for(var p=0;p<c.length;++p)if(c[p].id===l.id){c[p].location=l.location;return}c.push(l)}function B(c,p,w){var g=35632===c?u:y,v=g[p];if(!v){var S=l.str(p),v=e.createShader(c);e.shaderSource(v,S);e.compileShader(v);ba.shaderError(e,v,S,c,w);g[p]=v}return v}function U(l,p){this.id=
T++;this.fragId=l;this.vertId=p;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;c.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function m(p,w,b){var g;g=B(35632,p.fragId);var v=B(35633,p.vertId),S=p.program=e.createProgram();e.attachShader(S,g);e.attachShader(S,v);if(b)for(g=0;g<b.length;++g)v=b[g],e.bindAttribLocation(S,v[0],v[1]);e.linkProgram(S);ba.linkError(e,S,l.str(p.fragId),l.str(p.vertId),w);b=e.getProgramParameter(S,35718);c.profile&&(p.stats.uniformsCount=
b);v=p.uniforms;for(g=0;g<b;++g)if(w=e.getActiveUniform(S,g))if(1<w.size)for(var k=0;k<w.size;++k){var u=w.name.replace("[0]","["+k+"]");H(v,new G(u,l.id(u),e.getUniformLocation(S,u),w))}else H(v,new G(w.name,l.id(w.name),e.getUniformLocation(S,w.name),w));b=e.getProgramParameter(S,35721);c.profile&&(p.stats.attributesCount=b);p=p.attributes;for(g=0;g<b;++g)(w=e.getActiveAttrib(S,g))&&H(p,new G(w.name,l.id(w.name),e.getAttribLocation(S,w.name),w))}var u={},y={},ca={},w=[],T=0;c.profile&&(p.getMaxUniformsCount=
function(){var c=0;w.forEach(function(l){l.stats.uniformsCount>c&&(c=l.stats.uniformsCount)});return c},p.getMaxAttributesCount=function(){var c=0;w.forEach(function(l){l.stats.attributesCount>c&&(c=l.stats.attributesCount)});return c});return{clear:function(){var c=e.deleteShader.bind(e);L(u).forEach(c);u={};L(y).forEach(c);y={};w.forEach(function(c){e.deleteProgram(c.program)});w.length=0;ca={};p.shaderCount=0},program:function(c,l,L,g){ba.command(0<=c,"missing vertex shader",L);ba.command(0<=l,
"missing fragment shader",L);var v=ca[l];v||(v=ca[l]={});var S=v[c];if(S&&(S.refCount++,!g))return S;var k=new U(l,c);p.shaderCount++;m(k,L,g);S||(v[c]=k);w.push(k);return M(k,{destroy:function(){k.refCount--;if(0>=k.refCount){e.deleteProgram(k.program);var c=w.indexOf(k);w.splice(c,1);p.shaderCount--}0>=v[k.vertId].refCount&&(e.deleteShader(y[k.vertId]),delete y[k.vertId],delete ca[k.fragId][k.vertId]);b(ca[k.fragId]).length||(e.deleteShader(u[k.fragId]),delete u[k.fragId],delete ca[k.fragId])}})},
restore:function(){u={};y={};for(var c=0;c<w.length;++c)m(w[c],null,w[c].attributes.map(function(c){return[c.location,c.name]}))},shader:B,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(Z,ha,ab){ha.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(Z,ha,ab){ha.exports=function(){var b={"":0},
ba=[""];return{id:function(M){var L=b[M];if(L)return L;L=b[M]=ba.length;ba.push(M);return L},str:function(b){return ba[b]}}}},{}],19:[function(Z,ha,ab){function b(d){return"[object "+d+"]"}function ba(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function M(d){return Array.isArray(d)&&0!==d.length&&ca(d[0])?!0:!1}function L(d){return Object.prototype.toString.call(d)}function e(d){if(!d)return!1;var c=L(d);return 0<=Y.indexOf(c)?!0:ba(d)||M(d)||m(d)}function l(d,c){36193===d.type?
(d.data=y(c),u.freeType(c)):d.data=c}function p(d,c,a,l,k,f){d="undefined"!==typeof F[d]?F[d]:g[d]*D[c];f&&(d*=6);if(k){for(l=0;1<=a;)l+=d*a*a,a/=2;return l}return d*a*l}var c=Z("./util/sorted-object-keys"),G=Z("./util/check"),H=Z("./util/extend"),B=Z("./util/values"),U=Z("./util/is-typed-array"),m=Z("./util/is-ndarray"),u=Z("./util/pool"),y=Z("./util/to-half-float"),ca=Z("./util/is-array-like"),w=Z("./util/flatten"),T=Z("./util/is-pow2");ab=Z("./constants/arraytypes.json");var z=Z("./constants/arraytypes.json"),
Q=[9984,9986,9985,9987],ia=[0,6409,6410,6407,6408],g={};g[6409]=g[6406]=g[6402]=1;g[34041]=g[6410]=2;g[6407]=g[35904]=3;g[6408]=g[35906]=4;var v=b("HTMLCanvasElement"),S=b("OffscreenCanvas"),k=b("CanvasRenderingContext2D"),X=b("ImageBitmap"),f=b("HTMLImageElement"),x=b("HTMLVideoElement"),Y=c(ab).concat([v,S,k,X,f,x]),D=[];D[5121]=1;D[5126]=4;D[36193]=2;D[5123]=2;D[5125]=4;var F=[];F[32854]=2;F[32855]=2;F[36194]=2;F[34041]=4;F[33776]=.5;F[33777]=.5;F[33778]=1;F[33779]=1;F[35986]=.5;F[35987]=1;F[34798]=
1;F[35840]=.5;F[35841]=.25;F[35842]=.5;F[35843]=.25;F[36196]=.5;ha.exports=function(d,t,a,b,A,F,D){function W(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(a,d){a.internalformat=d.internalformat;a.format=d.format;a.type=d.type;a.compressed=d.compressed;a.premultiplyAlpha=d.premultiplyAlpha;a.flipY=d.flipY;a.unpackAlignment=d.unpackAlignment;a.colorSpace=
d.colorSpace;a.width=d.width;a.height=d.height;a.channels=d.channels}function R(d,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(G.type(c.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),d.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(G.type(c.flipY,"boolean","invalid texture flip"),d.flipY=c.flipY);"alignment"in c&&(G.oneOf(c.alignment,[1,2,4,8],"invalid texture unpack alignment"),d.unpackAlignment=c.alignment);"colorSpace"in c&&(G.parameter(c.colorSpace,Ta,"invalid colorSpace"),
d.colorSpace=Ta[c.colorSpace]);if("type"in c){var h=c.type;G(t.oes_texture_float||!("float"===h||"float32"===h),"you must enable the OES_texture_float extension in order to use floating point textures.");G(t.oes_texture_half_float||!("half float"===h||"float16"===h),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");G(t.webgl_depth_texture||!("uint16"===h||"uint32"===h||"depth stencil"===h),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
G.parameter(h,q,"invalid texture type");d.type=q[h]}var l=d.width,r=d.height,k=d.channels,h=!1;"shape"in c?(G(Array.isArray(c.shape)&&2<=c.shape.length,"shape must be an array"),l=c.shape[0],r=c.shape[1],3===c.shape.length&&(k=c.shape[2],G(0<k&&4>=k,"invalid number of channels"),h=!0),G(0<=l&&l<=a.maxTextureSize,"invalid width"),G(0<=r&&r<=a.maxTextureSize,"invalid height")):("radius"in c&&(l=r=c.radius,G(0<=l&&l<=a.maxTextureSize,"invalid radius")),"width"in c&&(l=c.width,G(0<=l&&l<=a.maxTextureSize,
"invalid width")),"height"in c&&(r=c.height,G(0<=r&&r<=a.maxTextureSize,"invalid height")),"channels"in c&&(k=c.channels,G(0<k&&4>=k,"invalid number of channels"),h=!0));d.width=l|0;d.height=r|0;d.channels=k|0;l=!1;"format"in c&&(l=c.format,G(t.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),G.parameter(l,n,"invalid texture format"),r=d.internalformat=n[l],d.format=Da[r],l in q&&!("type"in c)&&(d.type=
q[l]),l in C&&(d.compressed=!0),l=!0);!h&&l?d.channels=g[d.format]:h&&!l?d.channels!==ia[d.format]&&(d.format=d.internalformat=ia[d.channels]):l&&h&&G(d.channels===g[d.format],"number of channels inconsistent with specified format")}}function O(a){d.pixelStorei(37440,a.flipY);d.pixelStorei(37441,a.premultiplyAlpha);d.pixelStorei(37443,a.colorSpace);d.pixelStorei(3317,a.unpackAlignment)}function E(){W.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function h(d,c){var h=null;e(c)?h=c:c&&(G.type(c,"object","invalid pixel data type"),R(d,c),"x"in c&&(d.xOffset=c.x|0),"y"in c&&(d.yOffset=c.y|0),e(c.data)&&(h=c.data));G(!d.compressed||h instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){G(!h,"can not specify copy and data field for the same texture");var g=A.viewportWidth,q=A.viewportHeight;d.width=d.width||g-d.xOffset;d.height=d.height||q-d.yOffset;d.needsCopy=!0;G(0<=d.xOffset&&d.xOffset<g&&0<=d.yOffset&&
d.yOffset<q&&0<d.width&&d.width<=g&&0<d.height&&d.height<=q,"copy texture read out of bounds")}else if(!h)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(U(h))d.channels=d.channels||4,d.data=h,"type"in c||5121!==d.type||(d.type=z[Object.prototype.toString.call(h)]|0);else if(ba(h)){d.channels=d.channels||4;g=h;q=g.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:q=u.allocType(d.type,q);q.set(g);d.data=q;break;case 36193:d.data=y(g);break;default:G.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(m(h)){g=h.data;Array.isArray(g)||5121!==d.type||(d.type=z[Object.prototype.toString.call(g)]|0);var q=h.shape,n=h.stride,r,I,C,t;3===q.length?(C=q[2],t=n[2]):(G(2===q.length,"invalid ndarray pixel data, must be 2 or 3D"),t=C=1);r=q[0];I=q[1];q=n[0];n=n[1];d.alignment=1;d.width=r;d.height=I;d.channels=C;d.format=d.internalformat=ia[C];d.needsFree=!0;r=t;h=h.offset;C=d.width;t=d.height;I=d.channels;for(var na=u.allocType(36193===d.type?5126:d.type,C*t*I),p=0,sa=0;sa<t;++sa)for(var Ja=
0;Ja<C;++Ja)for(var Da=0;Da<I;++Da)na[p++]=g[q*Ja+n*sa+r*Da+h];l(d,na)}else if(L(h)===v||L(h)===S||L(h)===k)L(h)===v||L(h)===S?d.element=h:d.element=h.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(L(h)===X)d.element=h,d.width=h.width,d.height=h.height,d.channels=4;else if(L(h)===f)d.element=h,d.width=h.naturalWidth,d.height=h.naturalHeight,d.channels=4;else if(L(h)===x)d.element=h,d.width=h.videoWidth,d.height=h.videoHeight,d.channels=4;else if(M(h)){g=d.width||h[0].length;
q=d.height||h.length;n=d.channels;n=ca(h[0][0])?n||h[0][0].length:n||1;r=w.shape(h);C=1;for(t=0;t<r.length;++t)C*=r[t];C=u.allocType(36193===d.type?5126:d.type,C);w.flatten(h,r,"",C);l(d,C);d.alignment=1;d.width=g;d.height=q;d.channels=n;d.format=d.internalformat=ia[n];d.needsFree=!0}5126===d.type?G(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&G(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function N(a,c,h,g,q){var l=a.element,n=a.data,r=a.internalformat,k=a.format,f=a.type,I=a.width,C=a.height;O(a);l?d.texSubImage2D(c,q,h,g,k,f,l):a.compressed?d.compressedTexSubImage2D(c,q,h,g,r,I,C,n):a.needsCopy?(b(),d.copyTexSubImage2D(c,q,h,g,a.xOffset,a.yOffset,I,C)):d.texSubImage2D(c,q,h,g,I,C,k,f,n)}function K(){return oa.pop()||new E}function Ca(a){a.needsFree&&u.freeType(a.data);E.call(a);oa.push(a)}function ra(){W.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function r(a,d,c){var h=a.images[0]=K();a.mipmask=1;h.width=a.width=d;h.height=a.height=c;h.channels=a.channels=4}function J(a,d){var c=null;if(e(d))c=a.images[0]=K(),ea(c,a),h(c,d),a.mipmask=1;else if(R(a,d),Array.isArray(d.mipmap))for(var g=d.mipmap,q=0;q<g.length;++q)c=a.images[q]=K(),ea(c,a),c.width>>=q,c.height>>=q,h(c,g[q]),a.mipmask|=1<<q;else c=a.images[0]=K(),ea(c,a),h(c,d),a.mipmask=1;ea(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||G(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function aa(a,c){for(var h=a.images,g=0;g<h.length&&h[g];++g){var q=h[g],l=c,n=g,r=q.element,k=q.data,f=q.internalformat,I=q.format,C=q.type,t=q.width,na=q.height;O(q);r?d.texImage2D(l,n,I,I,C,r):q.compressed?d.compressedTexImage2D(l,n,f,t,na,0,k):q.needsCopy?(b(),d.copyTexImage2D(l,n,I,q.xOffset,q.yOffset,t,na,0)):d.texImage2D(l,
n,I,t,na,0,I,C,k||null)}}function P(){var a=xa.pop()||new ra;W.call(a);for(var d=a.mipmask=0;16>d;++d)a.images[d]=null;return a}function la(a){for(var d=a.images,c=0;c<d.length;++c)d[c]&&Ca(d[c]),d[c]=null;xa.push(a)}function qa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Y(d,c){if("min"in c){var h=c.min;G.parameter(h,$a);d.minFilter=$a[h];0<=Q.indexOf(d.minFilter)&&!("faces"in c)&&(d.genMipmaps=!0)}"mag"in c&&
(h=c.mag,G.parameter(h,na),d.magFilter=na[h]);var h=d.wrapS,g=d.wrapT;if("wrap"in c){var q=c.wrap;"string"===typeof q?(G.parameter(q,Ja),h=g=Ja[q]):Array.isArray(q)&&(G.parameter(q[0],Ja),G.parameter(q[1],Ja),h=Ja[q[0]],g=Ja[q[1]])}else"wrapS"in c&&(h=c.wrapS,G.parameter(h,Ja),h=Ja[h]),"wrapT"in c&&(g=c.wrapT,G.parameter(g,Ja),g=Ja[g]);d.wrapS=h;d.wrapT=g;"anisotropic"in c&&(h=c.anisotropic,G("number"===typeof h&&1<=h&&h<=a.maxAnisotropic,"aniso samples must be between 1 and "),d.anisotropic=c.anisotropic);
if("mipmap"in c){h=!1;switch(typeof c.mipmap){case "string":G.parameter(c.mipmap,ya,"invalid mipmap hint");d.mipmapHint=ya[c.mipmap];h=d.genMipmaps=!0;break;case "boolean":h=d.genMipmaps=c.mipmap;break;case "object":G(Array.isArray(c.mipmap),"invalid mipmap type");d.genMipmaps=!1;h=!0;break;default:G.raise("invalid mipmap type")}!h||"min"in c||(d.minFilter=9984)}}function wa(a,c){d.texParameteri(c,10241,a.minFilter);d.texParameteri(c,10240,a.magFilter);d.texParameteri(c,10242,a.wrapS);d.texParameteri(c,
10243,a.wrapT);t.ext_texture_filter_anisotropic&&d.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(d.hint(33170,a.mipmapHint),d.generateMipmap(c))}function fa(a){W.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ea++;this.refCount=1;this.target=a;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new qa;D.profile&&(this.stats={size:0})}function Aa(a){d.activeTexture(33984);d.bindTexture(a.target,a.texture)}function ka(){var a=ua[0];a?d.bindTexture(a.target,a.texture):
d.bindTexture(3553,null)}function pa(a){var c=a.texture;G(c,"must not double destroy texture");var h=a.unit,g=a.target;0<=h&&(d.activeTexture(33984+h),d.bindTexture(g,null),ua[h]=null);d.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete ma[a.id];F.textureCount--}var ya={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ja={repeat:10497,clamp:33071,mirror:33648},na={nearest:9728,linear:9729},$a=H({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},na),Ta={none:0,browser:37444},q={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},n={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},C={};t.ext_srgb&&(n.srgb=35904,n.srgba=35906);t.oes_texture_float&&(q.float32=q["float"]=5126);t.oes_texture_half_float&&(q.float16=q["half float"]=36193);t.webgl_depth_texture&&(H(n,{depth:6402,"depth stencil":34041}),H(q,{uint16:5123,uint32:5125,
"depth stencil":34042}));t.webgl_compressed_texture_s3tc&&H(C,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});t.webgl_compressed_texture_atc&&H(C,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});t.webgl_compressed_texture_pvrtc&&H(C,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});t.webgl_compressed_texture_etc1&&(C["rgb etc1"]=36196);var va=Array.prototype.slice.call(d.getParameter(34467));
c(C).forEach(function(a){var d=C[a];0<=va.indexOf(d)&&(n[a]=d)});var Ba=c(n);a.textureFormats=Ba;var xd=[];c(n).forEach(function(a){xd[n[a]]=a});var Hb=[];c(q).forEach(function(a){Hb[q[a]]=a});var ga=[];c(na).forEach(function(a){ga[na[a]]=a});var I=[];c($a).forEach(function(a){I[$a[a]]=a});var sa=[];c(Ja).forEach(function(a){sa[Ja[a]]=a});var Da=Ba.reduce(function(a,d){var c=n[d];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||t.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=d.indexOf("rgba")?
a[c]=6408:a[c]=6407;return a},{}),oa=[],xa=[],Ea=0,ma={},V=a.maxTextureUnits,ua=Array(V).map(function(){return null});H(fa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<V;++c){var h=ua[c];if(h){if(0<h.bindCount)continue;h.unit=-1}ua[c]=this;a=c;break}a>=V&&G.raise("insufficient number of texture units");D.profile&&F.maxTextureUnits<a+1&&(F.maxTextureUnits=a+1);this.unit=a;d.activeTexture(33984+a);d.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});D.profile&&(F.getTotalTextureSize=function(){var a=0;c(ma).forEach(function(d){a+=ma[d].stats.size});return a});return{create2D:function(c,g){function q(d,c){var h=l.texInfo;qa.call(h);var g=P();"number"===typeof d?"number"===typeof c?r(g,d|0,c|0):r(g,d|0,d|0):d?(G.type(d,"object","invalid arguments to regl.texture"),Y(h,d),J(g,d)):r(g,1,1);h.genMipmaps&&(g.mipmask=(g.width<<1)-1);l.mipmask=g.mipmask;ea(l,g);G.texture2D(h,g,a);l.internalformat=g.internalformat;
q.width=g.width;q.height=g.height;Aa(l);aa(g,3553);wa(h,3553);ka();la(g);D.profile&&(l.stats.size=p(l.internalformat,l.type,g.width,g.height,h.genMipmaps,!1));q.format=xd[l.internalformat];q.type=Hb[l.type];q.mag=ga[h.magFilter];q.min=I[h.minFilter];q.wrapS=sa[h.wrapS];q.wrapT=sa[h.wrapT];return q}var l=new fa(3553);ma[l.id]=l;F.textureCount++;q(c,g);q.subimage=function(a,d,c,g){G(!!a,"must specify image data");d|=0;c|=0;g|=0;var n=K();ea(n,l);n.width=0;n.height=0;h(n,a);n.width=n.width||(l.width>>
g)-d;n.height=n.height||(l.height>>g)-c;G(l.type===n.type&&l.format===n.format&&l.internalformat===n.internalformat,"incompatible format for texture.subimage");G(0<=d&&0<=c&&d+n.width<=l.width&&c+n.height<=l.height,"texture.subimage write out of bounds");G(l.mipmask&1<<g,"missing mipmap data");G(n.data||n.element||n.needsCopy,"missing image data");Aa(l);N(n,3553,d,c,g);ka();Ca(n);return q};q.resize=function(a,c){var h=a|0,g=c|0||h;if(h===l.width&&g===l.height)return q;q.width=l.width=h;q.height=l.height=
g;Aa(l);for(var n=0;l.mipmask>>n;++n){var r=h>>n,k=g>>n;if(!r||!k)break;d.texImage2D(3553,n,l.format,r,k,0,l.format,l.type,null)}ka();D.profile&&(l.stats.size=p(l.internalformat,l.type,h,g,!1,!1));return q};q._reglType="texture2d";q._texture=l;D.profile&&(q.stats=l.stats);q.destroy=function(){l.decRef()};return q},createCube:function(c,g,q,l,n,k){function f(d,c,h,g,q,l){var n,k=C.texInfo;qa.call(k);for(n=0;6>n;++n)t[n]=P();if("number"!==typeof d&&d)if("object"===typeof d)if(c)J(t[0],d),J(t[1],c),
J(t[2],h),J(t[3],g),J(t[4],q),J(t[5],l);else if(Y(k,d),R(C,d),"faces"in d)for(d=d.faces,G(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),n=0;6>n;++n)G("object"===typeof d[n]&&!!d[n],"invalid input for cube map face"),ea(t[n],C),J(t[n],d[n]);else for(n=0;6>n;++n)J(t[n],d);else G.raise("invalid arguments to cube map");else for(d=d|0||1,n=0;6>n;++n)r(t[n],d,d);ea(C,t[0]);G.optional(function(){a.npotTextureCube||G(T(C.width)&&T(C.height),"your browser does not support non power or two texture dimensions")});
C.mipmask=k.genMipmaps?(t[0].width<<1)-1:t[0].mipmask;G.textureCube(C,k,t,a);C.internalformat=t[0].internalformat;f.width=t[0].width;f.height=t[0].height;Aa(C);for(n=0;6>n;++n)aa(t[n],34069+n);wa(k,34067);ka();D.profile&&(C.stats.size=p(C.internalformat,C.type,f.width,f.height,k.genMipmaps,!0));f.format=xd[C.internalformat];f.type=Hb[C.type];f.mag=ga[k.magFilter];f.min=I[k.minFilter];f.wrapS=sa[k.wrapS];f.wrapT=sa[k.wrapT];for(n=0;6>n;++n)la(t[n]);return f}var C=new fa(34067);ma[C.id]=C;F.cubeCount++;
var t=Array(6);f(c,g,q,l,n,k);f.subimage=function(a,d,c,g,q){G(!!d,"must specify image data");G("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;g|=0;q|=0;var n=K();ea(n,C);n.width=0;n.height=0;h(n,d);n.width=n.width||(C.width>>q)-c;n.height=n.height||(C.height>>q)-g;G(C.type===n.type&&C.format===n.format&&C.internalformat===n.internalformat,"incompatible format for texture.subimage");G(0<=c&&0<=g&&c+n.width<=C.width&&g+n.height<=C.height,"texture.subimage write out of bounds");G(C.mipmask&
1<<q,"missing mipmap data");G(n.data||n.element||n.needsCopy,"missing image data");Aa(C);N(n,34069+a,c,g,q);ka();Ca(n);return f};f.resize=function(a){a|=0;if(a!==C.width){f.width=C.width=a;f.height=C.height=a;Aa(C);for(var c=0;6>c;++c)for(var h=0;C.mipmask>>h;++h)d.texImage2D(34069+c,h,C.format,a>>h,a>>h,0,C.format,C.type,null);ka();D.profile&&(C.stats.size=p(C.internalformat,C.type,f.width,f.height,!1,!0));return f}};f._reglType="textureCube";f._texture=C;D.profile&&(f.stats=C.stats);f.destroy=function(){C.decRef()};
return f},clear:function(){for(var a=0;a<V;++a)d.activeTexture(33984+a),d.bindTexture(3553,null),ua[a]=null;B(ma).forEach(pa);F.cubeCount=0;F.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<V;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null)}B(ma).forEach(function(a){a.texture=d.createTexture();d.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)d.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,
a.type,null);else for(var h=0;6>h;++h)d.texImage2D(34069+h,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);wa(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<V;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null);d.activeTexture(33984+a);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(Z,ha,ab){ha.exports=function(b,ba){function M(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function L(l,e,b){var u=p.pop()||new M;u.startQueryIndex=l;u.endQueryIndex=e;u.sum=0;u.stats=b;c.push(u)}if(!ba.ext_disjoint_timer_query)return null;var e=[],l=[],p=[],c=[],G=[],H=[];return{beginQuery:function(c){var p=e.pop()||ba.ext_disjoint_timer_query.createQueryEXT();ba.ext_disjoint_timer_query.beginQueryEXT(35007,
p);l.push(p);L(l.length-1,l.length,c)},endQuery:function(){ba.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:L,update:function(){var b,L;b=l.length;if(0!==b){H.length=Math.max(H.length,b+1);G.length=Math.max(G.length,b+1);G[0]=0;var m=H[0]=0;for(L=b=0;L<l.length;++L){var u=l[L];ba.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(m+=ba.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),e.push(u)):l[b++]=u;G[L+1]=m;H[L+1]=b}l.length=b;for(L=b=0;L<c.length;++L){var m=c[L],y=m.startQueryIndex,
u=m.endQueryIndex;m.sum+=G[u]-G[y];y=H[y];u=H[u];u===y?(m.stats.gpuTime+=m.sum/1E6,p.push(m)):(m.startQueryIndex=y,m.endQueryIndex=u,c[b++]=m)}c.length=b}},getNumPendingQueries:function(){return l.length},clear:function(){e.push.apply(e,l);for(var c=0;c<e.length;c++)ba.ext_disjoint_timer_query.deleteQueryEXT(e[c]);l.length=0;e.length=0},restore:function(){l.length=0;e.length=0}}}},{}],21:[function(Z,ha,ab){function b(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function ba(c){c=Error("(regl) "+
c);console.error(c);throw c;}function M(c,g){c||ba(g)}function L(c){return c?": "+c:""}function e(c,g){switch(g){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function l(c,g,l){0>g.indexOf(c)&&ba("invalid value"+L(l)+". must be one of: "+g)}function p(c,
g){for(c+="";c.length<g;)c=" "+c;return c}function c(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function G(c,g){this.number=c;this.line=g;this.errors=[]}function H(c,g,l){this.file=c;this.line=g;this.message=l}function B(){var c=Error(),c=(c.stack||c).toString(),g=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return g?g[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function U(){var c=Error(),c=(c.stack||c).toString(),g=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return g?g[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function m(g,l){var p=g.split("\n"),f=1,x=0,v={unknown:new c,0:new c};v.unknown.name=v[0].name=l||B();v.unknown.lines.push(new G(0,""));for(var e=0;e<p.length;++e){var w=p[e],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(w);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))f=d[1]|0,d[2]&&(x=d[2]|0,x in v||(v[x]=new c));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))v[x].name=d[1]?b(d[2]):d[2]}v[x].lines.push(new G(f++,
w))}Q(v).forEach(function(d){var a=v[d];a.lines.forEach(function(d){a.index[d.number]=d})});return v}function u(c){var g=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var l=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);l?g.push(new H(l[1]|0,l[2]|0,l[3].trim())):0<c.length&&g.push(new H("unknown",0,c))}});return g}function y(c,g){g.forEach(function(g){var l=c[g.file];if(l){var k=l.index[g.line];if(k){k.errors.push(g);l.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(g)})}
function ca(c){c._commandRef=B()}function w(c,g){var l=U();ba(c+" in command "+(g||B())+("unknown"===l?"":" called from "+l))}function T(c,g,l,f){e(c,g)||w("invalid parameter type"+L(l)+". expected "+g+", got "+typeof c,f||B())}function z(c,g){return 32820===c||32819===c||33635===c?2:34042===c?4:v[c]*g}var Q=Z("./sorted-object-keys"),ia=Z("./is-typed-array");Z=Z("./extend");var g="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),v={};v[5120]=v[5121]=
1;v[5122]=v[5123]=v[36193]=v[33635]=v[32819]=v[32820]=2;v[5124]=v[5125]=v[5126]=v[34042]=4;ha.exports=Z(M,{optional:function(c){c()},raise:ba,commandRaise:w,command:function(c,g,l){c||w(g,l||B())},parameter:function(c,g,l){c in g||ba("unknown parameter ("+c+")"+L(l)+". possible values: "+Q(g).join())},commandParameter:function(c,g,l,f){c in g||w("unknown parameter ("+c+")"+L(l)+". possible values: "+Q(g).join(),f||B())},constructor:function(c){Q(c).forEach(function(c){0>g.indexOf(c)&&ba('invalid regl constructor argument "'+
c+'". must be one of '+g)})},type:function(c,g,l){e(c,g)||ba("invalid parameter type"+L(l)+". expected "+g+", got "+typeof c)},commandType:T,isTypedArray:function(c,g){ia(c)||ba("invalid parameter type"+L(g)+". must be a typed array")},nni:function(c,g){0<=c&&(c|0)===c||ba("invalid parameter type, ("+c+")"+L(g)+". must be a nonnegative integer")},oneOf:l,shaderError:function(c,g,l,f,x){if(!c.getShaderParameter(g,c.COMPILE_STATUS)){g=c.getShaderInfoLog(g);c=f===c.FRAGMENT_SHADER?"fragment":"vertex";
T(l,"string",c+" shader source must be a string",x);var v=m(l,x);l=u(g);y(v,l);Q(v).forEach(function(c){function g(d,c){l.push(d);a.push(c||"")}var d=v[c];if(d.hasErrors){var l=[""],a=[""];g("file number "+c+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(a){if(0<a.errors.length){g(p(a.number,4)+"|  ","background-color:yellow; font-weight:bold");g(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var d=0;a.errors.forEach(function(c){c=
c.message;var l=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(l){var f=l[1];c=l[2];switch(f){case "assign":f="="}d=Math.max(a.line.indexOf(f,d),0)}else d=0;g(p("| ",6));g(p("^^^",d+3)+"\n","font-weight:bold");g(p("| ",6));g(c+"\n","font-weight:bold")});g(p("| ",6)+"\n")}else g(p(a.number,4)+"|  "),g(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(l.join("")):(a[0]=l.join("%c"),console.log.apply(console,a))}});M.raise("Error compiling "+c+" shader, "+v[0].name)}},linkError:function(c,
g,l,f,p){c.getProgramParameter(g,c.LINK_STATUS)||(c=c.getProgramInfoLog(g),l=m(l,p),f='Error linking program with vertex shader, "'+m(f,p)[0].name+'", and fragment shader "'+l[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+c),M.raise(f))},callSite:U,saveCommandRef:ca,saveDrawInfo:function(c,g,l,f){function p(c){return c?f.id(c):0}function v(c,d){Q(d).forEach(function(d){c[f.id(d)]=!0})}ca(c);
c._fragId=p(c["static"].frag);c._vertId=p(c["static"].vert);var e=c._uniformSet={};v(e,g["static"]);v(e,g.dynamic);g=c._attributeSet={};v(g,l["static"]);v(g,l.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,g,p){c.texture?l(c.texture._texture.internalformat,g,"unsupported texture format for attachment"):l(c.renderbuffer._renderbuffer.format,p,"unsupported renderbuffer format for attachment")},guessCommand:B,
texture2D:function(c,g,l){var f=g.width,p=g.height,v=g.channels;M(0<f&&f<=l.maxTextureSize&&0<p&&p<=l.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||M(!(f&f-1)&&!!f&&!(p&p-1)&&!!p,"incompatible wrap mode for texture, both width and height must be power of 2");1===g.mipmask?1!==f&&1!==p&&M(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(M(!(f&f-1)&&!!f&&!(p&p-1)&&!!p,"texture must be a square power of 2 to support mipmapping"),
M(g.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===g.type&&(0>l.extensions.indexOf("oes_texture_float_linear")&&M(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),M(!c.genMipmaps,"mipmap generation not supported with float textures"));var e=g.images;for(l=0;16>l;++l)if(e[l]){var w=f>>l,d=p>>l;M(g.mipmask&1<<l,"missing mipmap data");var t=e[l];M(t.width===w&&t.height===d,"invalid shape for mip images");M(t.format===g.format&&t.internalformat===
g.internalformat&&t.type===g.type,"incompatible type for mip image");!t.compressed&&t.data&&(w=Math.ceil(z(t.type,v)*w/t.unpackAlignment)*t.unpackAlignment,M(t.data.byteLength===w*d,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||M(0===(g.mipmask&1<<l),"extra mipmap data");g.compressed&&M(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,g,l,f){var p=c.width,v=c.height,e=c.channels;M(0<p&&p<=f.maxTextureSize&&
0<v&&v<=f.maxTextureSize,"invalid texture shape");M(p===v,"cube map must be square");M(33071===g.wrapS&&33071===g.wrapT,"wrap mode not supported by cube map");for(f=0;f<l.length;++f){var w=l[f];M(w.width===p&&w.height===v,"inconsistent cube map face shape");g.genMipmaps&&(M(!w.compressed,"can not generate mipmap for compressed textures"),M(1===w.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=w.images,t=0;16>t;++t){var a=d[t];if(a){var b=p>>t,u=v>>t;M(w.mipmask&1<<t,"missing mipmap data");
M(a.width===b&&a.height===u,"invalid shape for mip images");M(a.format===c.format&&a.internalformat===c.internalformat&&a.type===c.type,"incompatible type for mip image");a.compressed||a.data&&M(a.data.byteLength===b*u*Math.max(z(a.type,e),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(Z,ha,ab){ha.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(Z,ha,ab){function b(e){return Array.prototype.slice.call(e)}function ba(e){return b(e).join("")}var M=Z("./extend"),L=Z("./compiled-fns");ha.exports=function(){function e(){var l=[],p=[];return M(function(){l.push.apply(l,b(arguments))},{def:function(){var e="v"+c;c++;p.push(e);0<arguments.length&&(l.push(e,"="),l.push.apply(l,b(arguments)),l.push(";"));return e},toString:function(){return ba([0<p.length?"var "+p.join(",")+";":"",ba(l)])}})}function l(){function c(e,
b){p(e,b,"=",l.def(e,b),";")}var l=e(),p=e(),L=l.toString,H=p.toString;return M(function(){l.apply(l,b(arguments))},{def:l.def,entry:l,exit:p,save:c,set:function(p,e,b){c(p,e);l(p,e,"=",b,";")},toString:function(){return L()+H()}})}var p=0,c=0,G={},H=e(),B={};return{global:H,link:function(c){var l="$"+p,e=!1;"object"===typeof c&&c.name&&(l=c.name.replace(/ /g,"_"),e=!0);if(l in G)return l;G[l]=c;e||p++;return l},block:e,proc:function(c,p){function e(){var c="a"+b.length;b.push(c);return c}var b=[];
p=p||0;for(var L=0;L<p;++L)e();var L=l(),w=L.toString;return B[c]=M(L,{arg:e,toString:function(){return ba(["function(",b.join(),"){",w(),"}"])}})},scope:l,cond:function(){var c=ba(arguments),p=l(),e=l(),L=p.toString,H=e.toString;return M(p,{then:function(){p.apply(p,b(arguments));return this},"else":function(){e.apply(e,b(arguments));return this},toString:function(){var l=H();l&&(l="else{"+l+"}");return ba(["if(",c,"){",L(),"}",l])}})},compile:function(){var c=[],l=[];Object.keys(G).sort(function(c,
l){var p="$"===c.charAt(0),e="$"===l.charAt(0);return p||e?p&&e?+c.slice(1)<+l.slice(1)?-1:1:p&&!e?-1:1:c.localeCompare(l)}).forEach(function(p){var e=G[p];c.push(p);l.push(e)});for(var p=0,e=c.length-1;-1<e;e--)if("$"===c[e].charAt(0)){p=e;break}var b=['"use strict";',H,"return {"];Object.keys(B).forEach(function(c){b.push('"',c,'":',B[c].toString(),",")});b.push("}");var e=ba(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),p=c.slice(p).join(),w=L[p];if(!w)throw console.log("src code is:"),
console.log(e),console.log("compiled values:",l),console.log("linked names:",c),console.log("Keys available:",Object.keys(L)),console.log("Key:",p),console.log('"'+p+'": function('+c.join(", ")+") \n{\n"+e+"\n},"),Error("missing precompiled function with key: "+p);return w.apply(null,l)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(Z,ha,ab){ha.exports={$0:function(b){var ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F;ba=b.attributes;M=b.current;L=b.framebuffer;e=b.gl;l=b.next;
p=b.vao;c=l.blend_color;G=M.blend_color;H=l.blend_equation;B=M.blend_equation;U=l.blend_func;m=M.blend_func;u=l.colorMask;y=M.colorMask;ca=l.depth_range;w=M.depth_range;T=l.polygonOffset_offset;z=M.polygonOffset_offset;Q=l.sample_coverage;ia=M.sample_coverage;g=l.scissor_box;v=M.scissor_box;S=l.stencil_func;k=M.stencil_func;X=l.stencil_opBack;f=M.stencil_opBack;x=l.stencil_opFront;Y=M.stencil_opFront;D=l.viewport;F=M.viewport;return{poll:function(){var d,p,a,b,A,ba,Dc,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,
P,la;M.dirty=!1;p=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;ba=l.polygonOffset_enable;Dc=l.sample_alpha;W=l.sample_enable;ea=l.scissor_enable;R=l.stencil_enable;O=l.cull_face;E=M.cull_face;h=l.depth_func;N=M.depth_func;K=l.depth_mask;Ca=M.depth_mask;ra=l.frontFace;r=M.frontFace;J=l.lineWidth;aa=M.lineWidth;P=l.stencil_mask;la=M.stencil_mask;d=L.next;d!==L.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null),L.cur=d);p!==M.blend_enable&&(p?e.enable(3042):e.disable(3042),
M.blend_enable=p);a!==M.cull_enable&&(a?e.enable(2884):e.disable(2884),M.cull_enable=a);b!==M.depth_enable&&(b?e.enable(2929):e.disable(2929),M.depth_enable=b);A!==M.dither&&(A?e.enable(3024):e.disable(3024),M.dither=A);ba!==M.polygonOffset_enable&&(ba?e.enable(32823):e.disable(32823),M.polygonOffset_enable=ba);Dc!==M.sample_alpha&&(Dc?e.enable(32926):e.disable(32926),M.sample_alpha=Dc);W!==M.sample_enable&&(W?e.enable(32928):e.disable(32928),M.sample_enable=W);ea!==M.scissor_enable&&(ea?e.enable(3089):
e.disable(3089),M.scissor_enable=ea);R!==M.stencil_enable&&(R?e.enable(2960):e.disable(2960),M.stencil_enable=R);if(c[0]!==G[0]||c[1]!==G[1]||c[2]!==G[2]||c[3]!==G[3])e.blendColor(c[0],c[1],c[2],c[3]),G[0]=c[0],G[1]=c[1],G[2]=c[2],G[3]=c[3];if(H[0]!==B[0]||H[1]!==B[1])e.blendEquationSeparate(H[0],H[1]),B[0]=H[0],B[1]=H[1];if(U[0]!==m[0]||U[1]!==m[1]||U[2]!==m[2]||U[3]!==m[3])e.blendFuncSeparate(U[0],U[1],U[2],U[3]),m[0]=U[0],m[1]=U[1],m[2]=U[2],m[3]=U[3];if(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||
u[3]!==y[3])e.colorMask(u[0],u[1],u[2],u[3]),y[0]=u[0],y[1]=u[1],y[2]=u[2],y[3]=u[3];O!==E&&(e.cullFace(O),M.cull_face=O);h!==N&&(e.depthFunc(h),M.depth_func=h);K!==Ca&&(e.depthMask(K),M.depth_mask=K);if(ca[0]!==w[0]||ca[1]!==w[1])e.depthRange(ca[0],ca[1]),w[0]=ca[0],w[1]=ca[1];ra!==r&&(e.frontFace(ra),M.frontFace=ra);J!==aa&&(e.lineWidth(J),M.lineWidth=J);if(T[0]!==z[0]||T[1]!==z[1])e.polygonOffset(T[0],T[1]),z[0]=T[0],z[1]=T[1];if(Q[0]!==ia[0]||Q[1]!==ia[1])e.sampleCoverage(Q[0],Q[1]),ia[0]=Q[0],
ia[1]=Q[1];if(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3])e.scissor(g[0],g[1],g[2],g[3]),v[0]=g[0],v[1]=g[1],v[2]=g[2],v[3]=g[3];if(S[0]!==k[0]||S[1]!==k[1]||S[2]!==k[2])e.stencilFunc(S[0],S[1],S[2]),k[0]=S[0],k[1]=S[1],k[2]=S[2];P!==la&&(e.stencilMask(P),M.stencil_mask=P);if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2]||X[3]!==f[3])e.stencilOpSeparate(X[0],X[1],X[2],X[3]),f[0]=X[0],f[1]=X[1],f[2]=X[2],f[3]=X[3];if(x[0]!==Y[0]||x[1]!==Y[1]||x[2]!==Y[2]||x[3]!==Y[3])e.stencilOpSeparate(x[0],x[1],x[2],
x[3]),Y[0]=x[0],Y[1]=x[1],Y[2]=x[2],Y[3]=x[3];if(D[0]!==F[0]||D[1]!==F[1]||D[2]!==F[2]||D[3]!==F[3])e.viewport(D[0],D[1],D[2],D[3]),F[0]=D[0],F[1]=D[1],F[2]=D[2],F[3]=D[3]},refresh:function(){var d,t,a,b,A,ja,Dc,W,ea,R,O,E,h,N,K,Ca;M.dirty=!1;t=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;ja=l.polygonOffset_enable;Dc=l.sample_alpha;W=l.sample_enable;ea=l.scissor_enable;R=l.stencil_enable;O=l.cull_face;E=l.depth_func;h=l.depth_mask;N=l.frontFace;K=l.lineWidth;Ca=l.stencil_mask;(d=L.next)?
e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null);L.cur=d;d=ba[0];d.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[1];d.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,
d.x,d.y,d.z,d.w),d.buffer=null);d=ba[2];d.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[3];d.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);
d=ba[4];d.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[5];d.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[6];d.buffer?(e.enableVertexAttribArray(6),
e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[7];d.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[8];d.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,d.buffer.buffer),
e.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[9];d.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[10];d.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(10,d.size,
d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[11];d.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[12];d.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[13];d.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[14];d.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):
(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=ba[15];d.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);p.currentVAO=null;p.setVAO(p.targetVAO);t?e.enable(3042):e.disable(3042);M.blend_enable=t;a?e.enable(2884):e.disable(2884);M.cull_enable=a;b?e.enable(2929):e.disable(2929);M.depth_enable=
b;A?e.enable(3024):e.disable(3024);M.dither=A;ja?e.enable(32823):e.disable(32823);M.polygonOffset_enable=ja;Dc?e.enable(32926):e.disable(32926);M.sample_alpha=Dc;W?e.enable(32928):e.disable(32928);M.sample_enable=W;ea?e.enable(3089):e.disable(3089);M.scissor_enable=ea;R?e.enable(2960):e.disable(2960);M.stencil_enable=R;e.blendColor(c[0],c[1],c[2],c[3]);G[0]=c[0];G[1]=c[1];G[2]=c[2];G[3]=c[3];e.blendEquationSeparate(H[0],H[1]);B[0]=H[0];B[1]=H[1];e.blendFuncSeparate(U[0],U[1],U[2],U[3]);m[0]=U[0];
m[1]=U[1];m[2]=U[2];m[3]=U[3];e.colorMask(u[0],u[1],u[2],u[3]);y[0]=u[0];y[1]=u[1];y[2]=u[2];y[3]=u[3];e.cullFace(O);M.cull_face=O;e.depthFunc(E);M.depth_func=E;e.depthMask(h);M.depth_mask=h;e.depthRange(ca[0],ca[1]);w[0]=ca[0];w[1]=ca[1];e.frontFace(N);M.frontFace=N;e.lineWidth(K);M.lineWidth=K;e.polygonOffset(T[0],T[1]);z[0]=T[0];z[1]=T[1];e.sampleCoverage(Q[0],Q[1]);ia[0]=Q[0];ia[1]=Q[1];e.scissor(g[0],g[1],g[2],g[3]);v[0]=g[0];v[1]=g[1];v[2]=g[2];v[3]=g[3];e.stencilFunc(S[0],S[1],S[2]);k[0]=S[0];
k[1]=S[1];k[2]=S[2];e.stencilMask(Ca);M.stencil_mask=Ca;e.stencilOpSeparate(X[0],X[1],X[2],X[3]);f[0]=X[0];f[1]=X[1];f[2]=X[2];f[3]=X[3];e.stencilOpSeparate(x[0],x[1],x[2],x[3]);Y[0]=x[0];Y[1]=x[1];Y[2]=x[2];Y[3]=x[3];e.viewport(D[0],D[1],D[2],D[3]);F[0]=D[0];F[1]=D[1];F[2]=D[2];F[3]=D[3]}}},$3:function(b,ba,M,L){var e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja;e=b.context;l=b.current;p=b.framebuffer;c=b.gl;G=b.next;H=b.shader;B=b.vao;U=G.blend_color;m=l.blend_color;u=G.blend_equation;
y=l.blend_equation;ca=G.blend_func;w=l.blend_func;T=G.colorMask;z=l.colorMask;Q=G.depth_range;ia=l.depth_range;g=G.polygonOffset_offset;v=l.polygonOffset_offset;S=G.sample_coverage;k=l.sample_coverage;X=G.scissor_box;f=l.scissor_box;x=G.stencil_func;Y=l.stencil_func;D=G.stencil_opBack;F=l.stencil_opBack;d=G.stencil_opFront;t=l.stencil_opFront;a=G.viewport;ta=l.viewport;A={};ja={};return{batch:function(e,b){var A,R,O,E,h;A=p.next;A!==p.cur&&(A?c.bindFramebuffer(36160,A.framebuffer):c.bindFramebuffer(36160,
null),p.cur=A);if(l.dirty){A=G.dither;A!==l.dither&&(A?c.enable(3024):c.disable(3024),l.dither=A);A=G.blend_enable;A!==l.blend_enable&&(A?c.enable(3042):c.disable(3042),l.blend_enable=A);A=U[0];O=U[1];E=U[2];h=U[3];if(A!==m[0]||O!==m[1]||E!==m[2]||h!==m[3])c.blendColor(A,O,E,h),m[0]=A,m[1]=O,m[2]=E,m[3]=h;A=u[0];O=u[1];if(A!==y[0]||O!==y[1])c.blendEquationSeparate(A,O),y[0]=A,y[1]=O;A=ca[0];O=ca[1];E=ca[2];h=ca[3];if(A!==w[0]||O!==w[1]||E!==w[2]||h!==w[3])c.blendFuncSeparate(A,O,E,h),w[0]=A,w[1]=
O,w[2]=E,w[3]=h;A=G.depth_enable;A!==l.depth_enable&&(A?c.enable(2929):c.disable(2929),l.depth_enable=A);A=G.depth_func;A!==l.depth_func&&(c.depthFunc(A),l.depth_func=A);A=Q[0];O=Q[1];if(A!==ia[0]||O!==ia[1])c.depthRange(A,O),ia[0]=A,ia[1]=O;A=G.depth_mask;A!==l.depth_mask&&(c.depthMask(A),l.depth_mask=A);A=T[0];O=T[1];E=T[2];h=T[3];if(A!==z[0]||O!==z[1]||E!==z[2]||h!==z[3])c.colorMask(A,O,E,h),z[0]=A,z[1]=O,z[2]=E,z[3]=h;A=G.cull_enable;A!==l.cull_enable&&(A?c.enable(2884):c.disable(2884),l.cull_enable=
A);A=G.cull_face;A!==l.cull_face&&(c.cullFace(A),l.cull_face=A);A=G.frontFace;A!==l.frontFace&&(c.frontFace(A),l.frontFace=A);A=G.lineWidth;A!==l.lineWidth&&(c.lineWidth(A),l.lineWidth=A);A=G.polygonOffset_enable;A!==l.polygonOffset_enable&&(A?c.enable(32823):c.disable(32823),l.polygonOffset_enable=A);A=g[0];O=g[1];if(A!==v[0]||O!==v[1])c.polygonOffset(A,O),v[0]=A,v[1]=O;A=G.sample_alpha;A!==l.sample_alpha&&(A?c.enable(32926):c.disable(32926),l.sample_alpha=A);A=G.sample_enable;A!==l.sample_enable&&
(A?c.enable(32928):c.disable(32928),l.sample_enable=A);A=S[0];O=S[1];if(A!==k[0]||O!==k[1])c.sampleCoverage(A,O),k[0]=A,k[1]=O;A=G.stencil_enable;A!==l.stencil_enable&&(A?c.enable(2960):c.disable(2960),l.stencil_enable=A);A=G.stencil_mask;A!==l.stencil_mask&&(c.stencilMask(A),l.stencil_mask=A);A=x[0];O=x[1];E=x[2];if(A!==Y[0]||O!==Y[1]||E!==Y[2])c.stencilFunc(A,O,E),Y[0]=A,Y[1]=O,Y[2]=E;A=d[0];O=d[1];E=d[2];h=d[3];if(A!==t[0]||O!==t[1]||E!==t[2]||h!==t[3])c.stencilOpSeparate(A,O,E,h),t[0]=A,t[1]=
O,t[2]=E,t[3]=h;A=D[0];O=D[1];E=D[2];h=D[3];if(A!==F[0]||O!==F[1]||E!==F[2]||h!==F[3])c.stencilOpSeparate(A,O,E,h),F[0]=A,F[1]=O,F[2]=E,F[3]=h;A=G.scissor_enable;A!==l.scissor_enable&&(A?c.enable(3089):c.disable(3089),l.scissor_enable=A);A=X[0];O=X[1];E=X[2];h=X[3];if(A!==f[0]||O!==f[1]||E!==f[2]||h!==f[3])c.scissor(A,O,E,h),f[0]=A,f[1]=O,f[2]=E,f[3]=h;A=a[0];O=a[1];E=a[2];h=a[3];if(A!==ta[0]||O!==ta[1]||E!==ta[2]||h!==ta[3])c.viewport(A,O,E,h),ta[0]=A,ta[1]=O,ta[2]=E,ta[3]=h;l.dirty=!1}if(A=l.profile)R=
performance.now(),ba.count+=b;O=H.program(H.vert,H.frag);c.useProgram(O.program);B.setVAO(null);E=O.id;(h=ja[E])||(h=ja[E]=L(O));h.call(this,e,b);B.setVAO(null);A&&(ba.cpuTime+=performance.now()-R)},draw:function(e){var b,L,R,O,E;b=p.next;b!==p.cur&&(b?c.bindFramebuffer(36160,b.framebuffer):c.bindFramebuffer(36160,null),p.cur=b);if(l.dirty){b=G.dither;b!==l.dither&&(b?c.enable(3024):c.disable(3024),l.dither=b);b=G.blend_enable;b!==l.blend_enable&&(b?c.enable(3042):c.disable(3042),l.blend_enable=b);
b=U[0];R=U[1];O=U[2];E=U[3];if(b!==m[0]||R!==m[1]||O!==m[2]||E!==m[3])c.blendColor(b,R,O,E),m[0]=b,m[1]=R,m[2]=O,m[3]=E;b=u[0];R=u[1];if(b!==y[0]||R!==y[1])c.blendEquationSeparate(b,R),y[0]=b,y[1]=R;b=ca[0];R=ca[1];O=ca[2];E=ca[3];if(b!==w[0]||R!==w[1]||O!==w[2]||E!==w[3])c.blendFuncSeparate(b,R,O,E),w[0]=b,w[1]=R,w[2]=O,w[3]=E;b=G.depth_enable;b!==l.depth_enable&&(b?c.enable(2929):c.disable(2929),l.depth_enable=b);b=G.depth_func;b!==l.depth_func&&(c.depthFunc(b),l.depth_func=b);b=Q[0];R=Q[1];if(b!==
ia[0]||R!==ia[1])c.depthRange(b,R),ia[0]=b,ia[1]=R;b=G.depth_mask;b!==l.depth_mask&&(c.depthMask(b),l.depth_mask=b);b=T[0];R=T[1];O=T[2];E=T[3];if(b!==z[0]||R!==z[1]||O!==z[2]||E!==z[3])c.colorMask(b,R,O,E),z[0]=b,z[1]=R,z[2]=O,z[3]=E;b=G.cull_enable;b!==l.cull_enable&&(b?c.enable(2884):c.disable(2884),l.cull_enable=b);b=G.cull_face;b!==l.cull_face&&(c.cullFace(b),l.cull_face=b);b=G.frontFace;b!==l.frontFace&&(c.frontFace(b),l.frontFace=b);b=G.lineWidth;b!==l.lineWidth&&(c.lineWidth(b),l.lineWidth=
b);b=G.polygonOffset_enable;b!==l.polygonOffset_enable&&(b?c.enable(32823):c.disable(32823),l.polygonOffset_enable=b);b=g[0];R=g[1];if(b!==v[0]||R!==v[1])c.polygonOffset(b,R),v[0]=b,v[1]=R;b=G.sample_alpha;b!==l.sample_alpha&&(b?c.enable(32926):c.disable(32926),l.sample_alpha=b);b=G.sample_enable;b!==l.sample_enable&&(b?c.enable(32928):c.disable(32928),l.sample_enable=b);b=S[0];R=S[1];if(b!==k[0]||R!==k[1])c.sampleCoverage(b,R),k[0]=b,k[1]=R;b=G.stencil_enable;b!==l.stencil_enable&&(b?c.enable(2960):
c.disable(2960),l.stencil_enable=b);b=G.stencil_mask;b!==l.stencil_mask&&(c.stencilMask(b),l.stencil_mask=b);b=x[0];R=x[1];O=x[2];if(b!==Y[0]||R!==Y[1]||O!==Y[2])c.stencilFunc(b,R,O),Y[0]=b,Y[1]=R,Y[2]=O;b=d[0];R=d[1];O=d[2];E=d[3];if(b!==t[0]||R!==t[1]||O!==t[2]||E!==t[3])c.stencilOpSeparate(b,R,O,E),t[0]=b,t[1]=R,t[2]=O,t[3]=E;b=D[0];R=D[1];O=D[2];E=D[3];if(b!==F[0]||R!==F[1]||O!==F[2]||E!==F[3])c.stencilOpSeparate(b,R,O,E),F[0]=b,F[1]=R,F[2]=O,F[3]=E;b=G.scissor_enable;b!==l.scissor_enable&&(b?
c.enable(3089):c.disable(3089),l.scissor_enable=b);b=X[0];R=X[1];O=X[2];E=X[3];if(b!==f[0]||R!==f[1]||O!==f[2]||E!==f[3])c.scissor(b,R,O,E),f[0]=b,f[1]=R,f[2]=O,f[3]=E;b=a[0];R=a[1];O=a[2];E=a[3];if(b!==ta[0]||R!==ta[1]||O!==ta[2]||E!==ta[3])c.viewport(b,R,O,E),ta[0]=b,ta[1]=R,ta[2]=O,ta[3]=E;l.dirty=!1}if(b=l.profile)L=performance.now(),ba.count++;R=H.program(H.vert,H.frag);c.useProgram(R.program);B.setVAO(null);O=R.id;(E=A[O])||(E=A[O]=M(R));E.call(this,e);B.setVAO(null);b&&(ba.cpuTime+=performance.now()-
L)},scope:function(a,d,c){var g,f;if(g=l.profile)f=performance.now(),ba.count++;d(e,a,c);g&&(ba.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,
Dc,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,xd,Hb,ga,I,sa,Da,oa,xa,Ea){var ma,V,ua,Fa,Ia,mb,da,yd,$b,Ga,ac,Sb,Z,Dd,re,Wd,ze,Ad,Rd,oe,ie,Ed,Yd,fe,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va;ma=b.attributes;V=b.context;ua=b.current;Fa=b.draw;Ia=b.elements;mb=b.framebuffer;da=b.gl;yd=b.next;$b=b.shader;Ga=b.uniforms;ac=b.vao;Sb=yd.blend_color;Z=ua.blend_color;Dd=yd.blend_equation;
re=ua.blend_equation;Wd=yd.blend_func;ze=ua.blend_func;Ad=yd.colorMask;Rd=ua.colorMask;oe=yd.depth_range;ie=ua.depth_range;Ed=yd.polygonOffset_offset;Yd=ua.polygonOffset_offset;fe=yd.sample_coverage;Md=ua.sample_coverage;Ye=yd.scissor_box;$e=ua.scissor_box;Re=yd.stencil_func;Gd=ua.stencil_func;Ae=yd.stencil_opBack;te=ua.stencil_opBack;Zd=yd.stencil_opFront;Bd=ua.stencil_opFront;$d=yd.viewport;ld=ua.viewport;ad={};pd={};Lc=new Float32Array(16);nd=new Float32Array(16);Gc=new Float32Array(16);ed=new Float32Array(16);
Pc=new Float32Array(16);kd=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);vc=new Float32Array(16);xb=new Float32Array(16);yc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);lc=new Float32Array(16);Hc=new Float32Array(16);Wc=new Float32Array(16);Vc=new Float32Array(16);Ec=new Float32Array(16);dc=new Float32Array(16);Ic=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);mc=new Float32Array(16);ec=new Float32Array(16);Ua=new Float32Array(16);
qc=new Float32Array(16);yb=new Float32Array(16);db=new Float32Array(16);Nb=new Float32Array(16);bb=new Float32Array(16);ob=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,d){var g,f,k,t;g=mb.next;g!==mb.cur&&(g?da.bindFramebuffer(36160,g.framebuffer):da.bindFramebuffer(36160,null),mb.cur=g);if(ua.dirty){var b,v,x,A,D,F,S,Q,M,ba,X,ia,Ga,ta,ja,Y,Sb,$b,La,Fb,Pc,Bb,Cb,Oa,Ye;b=Ad[0];v=Ad[1];x=Ad[2];A=Ad[3];if(b!==Rd[0]||v!==Rd[1]||x!==Rd[2]||A!==Rd[3])da.colorMask(b,v,x,A),Rd[0]=b,
Rd[1]=v,Rd[2]=x,Rd[3]=A;D=yd.frontFace;D!==ua.frontFace&&(da.frontFace(D),ua.frontFace=D);F=yd.polygonOffset_enable;F!==ua.polygonOffset_enable&&(F?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=F);S=Ed[0];Q=Ed[1];if(S!==Yd[0]||Q!==Yd[1])da.polygonOffset(S,Q),Yd[0]=S,Yd[1]=Q;M=yd.sample_alpha;M!==ua.sample_alpha&&(M?da.enable(32926):da.disable(32926),ua.sample_alpha=M);ba=yd.sample_enable;ba!==ua.sample_enable&&(ba?da.enable(32928):da.disable(32928),ua.sample_enable=ba);X=fe[0];ia=fe[1];
if(X!==Md[0]||ia!==Md[1])da.sampleCoverage(X,ia),Md[0]=X,Md[1]=ia;Ga=yd.stencil_enable;Ga!==ua.stencil_enable&&(Ga?da.enable(2960):da.disable(2960),ua.stencil_enable=Ga);ta=yd.stencil_mask;ta!==ua.stencil_mask&&(da.stencilMask(ta),ua.stencil_mask=ta);ja=Re[0];Y=Re[1];Sb=Re[2];if(ja!==Gd[0]||Y!==Gd[1]||Sb!==Gd[2])da.stencilFunc(ja,Y,Sb),Gd[0]=ja,Gd[1]=Y,Gd[2]=Sb;$b=Zd[0];La=Zd[1];Fb=Zd[2];Pc=Zd[3];if($b!==Bd[0]||La!==Bd[1]||Fb!==Bd[2]||Pc!==Bd[3])da.stencilOpSeparate($b,La,Fb,Pc),Bd[0]=$b,Bd[1]=La,
Bd[2]=Fb,Bd[3]=Pc;Bb=Ae[0];Cb=Ae[1];Oa=Ae[2];Ye=Ae[3];if(Bb!==te[0]||Cb!==te[1]||Oa!==te[2]||Ye!==te[3])da.stencilOpSeparate(Bb,Cb,Oa,Ye),te[0]=Bb,te[1]=Cb,te[2]=Oa,te[3]=Ye}da.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;da.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;da.depthFunc(513);
ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);ie[0]=0;ie[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;da.enable(3089);ua.scissor_enable=!0;f=ua.profile;ua.profile=!1;da.useProgram(Dc.program);var Qa,xb,kd,Ma,lc,Ya,Gc,Wd,lb,Na,vc,Pa,ub,vb,Sa,nb,nd,Dd,Hc,cb,Jc,ed,Xa,Lc,Ab,Za,oe,yc,Wb,Qb,$d,Rb,Wc;ac.setVAO(null);Qa=ya.location;xb=ma[Qa];xb.buffer||da.enableVertexAttribArray(Qa);if(xb.type!==L.dtype||4!==xb.size||xb.buffer!==L||!1!==xb.normalized||0!==xb.offset||
0!==xb.stride)da.bindBuffer(34962,L.buffer),da.vertexAttribPointer(Qa,4,L.dtype,!1,0,0),xb.type=L.dtype,xb.size=4,xb.buffer=L,xb.normalized=!1,xb.offset=0,xb.stride=0;kd=Ja.location;Ma=ma[kd];Ma.buffer||da.enableVertexAttribArray(kd);if(Ma.type!==e.dtype||4!==Ma.size||Ma.buffer!==e||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(kd,4,e.dtype,!1,0,0),Ma.type=e.dtype,Ma.size=4,Ma.buffer=e,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;lc=na.location;
Ya=ma[lc];Ya.buffer||da.enableVertexAttribArray(lc);if(Ya.type!==l.dtype||4!==Ya.size||Ya.buffer!==l||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)da.bindBuffer(34962,l.buffer),da.vertexAttribPointer(lc,4,l.dtype,!1,0,0),Ya.type=l.dtype,Ya.size=4,Ya.buffer=l,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Gc=$a.location;Wd=ma[Gc];Wd.buffer||da.enableVertexAttribArray(Gc);if(Wd.type!==p.dtype||4!==Wd.size||Wd.buffer!==p||!1!==Wd.normalized||0!==Wd.offset||0!==Wd.stride)da.bindBuffer(34962,p.buffer),da.vertexAttribPointer(Gc,
4,p.dtype,!1,0,0),Wd.type=p.dtype,Wd.size=4,Wd.buffer=p,Wd.normalized=!1,Wd.offset=0,Wd.stride=0;lb=Ta.location;Na=ma[lb];Na.buffer||da.enableVertexAttribArray(lb);if(Na.type!==c.dtype||4!==Na.size||Na.buffer!==c||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)da.bindBuffer(34962,c.buffer),da.vertexAttribPointer(lb,4,c.dtype,!1,0,0),Na.type=c.dtype,Na.size=4,Na.buffer=c,Na.normalized=!1,Na.offset=0,Na.stride=0;vc=q.location;Pa=ma[vc];Pa.buffer||da.enableVertexAttribArray(vc);if(Pa.type!==G.dtype||
4!==Pa.size||Pa.buffer!==G||!1!==Pa.normalized||0!==Pa.offset||0!==Pa.stride)da.bindBuffer(34962,G.buffer),da.vertexAttribPointer(vc,4,G.dtype,!1,0,0),Pa.type=G.dtype,Pa.size=4,Pa.buffer=G,Pa.normalized=!1,Pa.offset=0,Pa.stride=0;ub=n.location;vb=ma[ub];vb.buffer||da.enableVertexAttribArray(ub);if(vb.type!==H.dtype||4!==vb.size||vb.buffer!==H||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)da.bindBuffer(34962,H.buffer),da.vertexAttribPointer(ub,4,H.dtype,!1,0,0),vb.type=H.dtype,vb.size=4,vb.buffer=
H,vb.normalized=!1,vb.offset=0,vb.stride=0;Sa=C.location;nb=ma[Sa];nb.buffer||da.enableVertexAttribArray(Sa);if(nb.type!==B.dtype||4!==nb.size||nb.buffer!==B||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(Sa,4,B.dtype,!1,0,0),nb.type=B.dtype,nb.size=4,nb.buffer=B,nb.normalized=!1,nb.offset=0,nb.stride=0;nd=va.location;Dd=ma[nd];Dd.buffer||da.enableVertexAttribArray(nd);if(Dd.type!==U.dtype||4!==Dd.size||Dd.buffer!==U||!1!==Dd.normalized||0!==
Dd.offset||0!==Dd.stride)da.bindBuffer(34962,U.buffer),da.vertexAttribPointer(nd,4,U.dtype,!1,0,0),Dd.type=U.dtype,Dd.size=4,Dd.buffer=U,Dd.normalized=!1,Dd.offset=0,Dd.stride=0;Hc=Ba.location;cb=ma[Hc];cb.buffer||da.enableVertexAttribArray(Hc);if(cb.type!==m.dtype||4!==cb.size||cb.buffer!==m||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)da.bindBuffer(34962,m.buffer),da.vertexAttribPointer(Hc,4,m.dtype,!1,0,0),cb.type=m.dtype,cb.size=4,cb.buffer=m,cb.normalized=!1,cb.offset=0,cb.stride=0;Jc=xd.location;
ed=ma[Jc];ed.buffer||da.enableVertexAttribArray(Jc);if(ed.type!==u.dtype||4!==ed.size||ed.buffer!==u||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(Jc,4,u.dtype,!1,0,0),ed.type=u.dtype,ed.size=4,ed.buffer=u,ed.normalized=!1,ed.offset=0,ed.stride=0;Xa=Hb.location;Lc=ma[Xa];Lc.buffer||da.enableVertexAttribArray(Xa);if(Lc.type!==y.dtype||4!==Lc.size||Lc.buffer!==y||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)da.bindBuffer(34962,y.buffer),da.vertexAttribPointer(Xa,
4,y.dtype,!1,0,0),Lc.type=y.dtype,Lc.size=4,Lc.buffer=y,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=ga.location;Za=ma[Ab];Za.buffer||da.enableVertexAttribArray(Ab);if(Za.type!==ca.dtype||4!==Za.size||Za.buffer!==ca||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)da.bindBuffer(34962,ca.buffer),da.vertexAttribPointer(Ab,4,ca.dtype,!1,0,0),Za.type=ca.dtype,Za.size=4,Za.buffer=ca,Za.normalized=!1,Za.offset=0,Za.stride=0;oe=I.location;yc=ma[oe];yc.buffer||da.enableVertexAttribArray(oe);if(yc.type!==
w.dtype||4!==yc.size||yc.buffer!==w||!1!==yc.normalized||0!==yc.offset||0!==yc.stride)da.bindBuffer(34962,w.buffer),da.vertexAttribPointer(oe,4,w.dtype,!1,0,0),yc.type=w.dtype,yc.size=4,yc.buffer=w,yc.normalized=!1,yc.offset=0,yc.stride=0;Wb=sa.location;Qb=ma[Wb];Qb.buffer||da.enableVertexAttribArray(Wb);if(Qb.type!==T.dtype||4!==Qb.size||Qb.buffer!==T||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(Wb,4,T.dtype,!1,0,0),Qb.type=T.dtype,Qb.size=
4,Qb.buffer=T,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;$d=ea.location;Rb=ma[$d];Rb.buffer||da.enableVertexAttribArray($d);if(Rb.type!==z.dtype||4!==Rb.size||Rb.buffer!==z||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)da.bindBuffer(34962,z.buffer),da.vertexAttribPointer($d,4,z.dtype,!1,0,0),Rb.type=z.dtype,Rb.size=4,Rb.buffer=z,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;da.uniform1i(Da.location,W.bind());(Wc=Fa.elements)?da.bindBuffer(34963,Wc.buffer.buffer):ac.currentVAO&&(Wc=Ia.getElements(ac.currentVAO.elements))&&
da.bindBuffer(34963,Wc.buffer.buffer);for(k=0;k<d;++k){t=a[k];var Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd,wd,ue,id,ha,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de;ad.height=t.viewportHeight;ad.width=t.viewportWidth;ad.x=t.viewportX;ad.y=t.viewportY;Fc=ad.x|0;sd=ad.y|0;Nc="width"in ad?ad.width|0:V.framebufferWidth-Fc;Xc="height"in ad?ad.height|0:V.framebufferHeight-sd;td=V.viewportWidth;V.viewportWidth=Nc;nc=V.viewportHeight;
V.viewportHeight=Xc;da.viewport(Fc,sd,Nc,Xc);ld[0]=Fc;ld[1]=sd;ld[2]=Nc;ld[3]=Xc;pd.height=t.scissorHeight;pd.width=t.scissorWidth;pd.x=t.scissorX;pd.y=t.scissorY;xc=pd.x|0;gc=pd.y|0;eb="width"in pd?pd.width|0:V.framebufferWidth-xc;sc="height"in pd?pd.height|0:V.framebufferHeight-gc;da.scissor(xc,gc,eb,sc);$e[0]=xc;$e[1]=gc;$e[2]=eb;$e[3]=sc;Tb=t.dim0A;da.uniformMatrix4fv(O.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(Vc[0]=Tb[0],Vc[1]=Tb[1],Vc[2]=Tb[2],Vc[3]=Tb[3],Vc[4]=Tb[4],Vc[5]=
Tb[5],Vc[6]=Tb[6],Vc[7]=Tb[7],Vc[8]=Tb[8],Vc[9]=Tb[9],Vc[10]=Tb[10],Vc[11]=Tb[11],Vc[12]=Tb[12],Vc[13]=Tb[13],Vc[14]=Tb[14],Vc[15]=Tb[15],Vc));Xb=t.dim1A;da.uniformMatrix4fv(K.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Ec[0]=Xb[0],Ec[1]=Xb[1],Ec[2]=Xb[2],Ec[3]=Xb[3],Ec[4]=Xb[4],Ec[5]=Xb[5],Ec[6]=Xb[6],Ec[7]=Xb[7],Ec[8]=Xb[8],Ec[9]=Xb[9],Ec[10]=Xb[10],Ec[11]=Xb[11],Ec[12]=Xb[12],Ec[13]=Xb[13],Ec[14]=Xb[14],Ec[15]=Xb[15],Ec));cc=t.dim0B;da.uniformMatrix4fv(E.location,!1,Array.isArray(cc)||
cc instanceof Float32Array?cc:(dc[0]=cc[0],dc[1]=cc[1],dc[2]=cc[2],dc[3]=cc[3],dc[4]=cc[4],dc[5]=cc[5],dc[6]=cc[6],dc[7]=cc[7],dc[8]=cc[8],dc[9]=cc[9],dc[10]=cc[10],dc[11]=cc[11],dc[12]=cc[12],dc[13]=cc[13],dc[14]=cc[14],dc[15]=cc[15],dc));hc=t.dim1B;da.uniformMatrix4fv(Ca.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Ic[0]=hc[0],Ic[1]=hc[1],Ic[2]=hc[2],Ic[3]=hc[3],Ic[4]=hc[4],Ic[5]=hc[5],Ic[6]=hc[6],Ic[7]=hc[7],Ic[8]=hc[8],Ic[9]=hc[9],Ic[10]=hc[10],Ic[11]=hc[11],Ic[12]=hc[12],Ic[13]=
hc[13],Ic[14]=hc[14],Ic[15]=hc[15],Ic));zc=t.dim0C;da.uniformMatrix4fv(h.location,!1,Array.isArray(zc)||zc instanceof Float32Array?zc:(oc[0]=zc[0],oc[1]=zc[1],oc[2]=zc[2],oc[3]=zc[3],oc[4]=zc[4],oc[5]=zc[5],oc[6]=zc[6],oc[7]=zc[7],oc[8]=zc[8],oc[9]=zc[9],oc[10]=zc[10],oc[11]=zc[11],oc[12]=zc[12],oc[13]=zc[13],oc[14]=zc[14],oc[15]=zc[15],oc));Cc=t.dim1C;da.uniformMatrix4fv(ra.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(pc[0]=Cc[0],pc[1]=Cc[1],pc[2]=Cc[2],pc[3]=Cc[3],pc[4]=Cc[4],pc[5]=
Cc[5],pc[6]=Cc[6],pc[7]=Cc[7],pc[8]=Cc[8],pc[9]=Cc[9],pc[10]=Cc[10],pc[11]=Cc[11],pc[12]=Cc[12],pc[13]=Cc[13],pc[14]=Cc[14],pc[15]=Cc[15],pc));bd=t.dim0D;da.uniformMatrix4fv(N.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:(mc[0]=bd[0],mc[1]=bd[1],mc[2]=bd[2],mc[3]=bd[3],mc[4]=bd[4],mc[5]=bd[5],mc[6]=bd[6],mc[7]=bd[7],mc[8]=bd[8],mc[9]=bd[9],mc[10]=bd[10],mc[11]=bd[11],mc[12]=bd[12],mc[13]=bd[13],mc[14]=bd[14],mc[15]=bd[15],mc));Qc=t.dim1D;da.uniformMatrix4fv(r.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(ec[0]=Qc[0],ec[1]=Qc[1],ec[2]=Qc[2],ec[3]=Qc[3],ec[4]=Qc[4],ec[5]=Qc[5],ec[6]=Qc[6],ec[7]=Qc[7],ec[8]=Qc[8],ec[9]=Qc[9],ec[10]=Qc[10],ec[11]=Qc[11],ec[12]=Qc[12],ec[13]=Qc[13],ec[14]=Qc[14],ec[15]=Qc[15],ec));Rc=t.loA;da.uniformMatrix4fv(za.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(Ua[0]=Rc[0],Ua[1]=Rc[1],Ua[2]=Rc[2],Ua[3]=Rc[3],Ua[4]=Rc[4],Ua[5]=Rc[5],Ua[6]=Rc[6],Ua[7]=Rc[7],Ua[8]=Rc[8],Ua[9]=Rc[9],Ua[10]=Rc[10],Ua[11]=Rc[11],Ua[12]=Rc[12],Ua[13]=
Rc[13],Ua[14]=Rc[14],Ua[15]=Rc[15],Ua));Sc=t.hiA;da.uniformMatrix4fv(aa.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(qc[0]=Sc[0],qc[1]=Sc[1],qc[2]=Sc[2],qc[3]=Sc[3],qc[4]=Sc[4],qc[5]=Sc[5],qc[6]=Sc[6],qc[7]=Sc[7],qc[8]=Sc[8],qc[9]=Sc[9],qc[10]=Sc[10],qc[11]=Sc[11],qc[12]=Sc[12],qc[13]=Sc[13],qc[14]=Sc[14],qc[15]=Sc[15],qc));Yc=t.loB;da.uniformMatrix4fv(wa.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(yb[0]=Yc[0],yb[1]=Yc[1],yb[2]=Yc[2],yb[3]=Yc[3],yb[4]=Yc[4],yb[5]=
Yc[5],yb[6]=Yc[6],yb[7]=Yc[7],yb[8]=Yc[8],yb[9]=Yc[9],yb[10]=Yc[10],yb[11]=Yc[11],yb[12]=Yc[12],yb[13]=Yc[13],yb[14]=Yc[14],yb[15]=Yc[15],yb));od=t.hiB;da.uniformMatrix4fv(P.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(db[0]=od[0],db[1]=od[1],db[2]=od[2],db[3]=od[3],db[4]=od[4],db[5]=od[5],db[6]=od[6],db[7]=od[7],db[8]=od[8],db[9]=od[9],db[10]=od[10],db[11]=od[11],db[12]=od[12],db[13]=od[13],db[14]=od[14],db[15]=od[15],db));cd=t.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(cd)||
cd instanceof Float32Array?cd:(Nb[0]=cd[0],Nb[1]=cd[1],Nb[2]=cd[2],Nb[3]=cd[3],Nb[4]=cd[4],Nb[5]=cd[5],Nb[6]=cd[6],Nb[7]=cd[7],Nb[8]=cd[8],Nb[9]=cd[9],Nb[10]=cd[10],Nb[11]=cd[11],Nb[12]=cd[12],Nb[13]=cd[13],Nb[14]=cd[14],Nb[15]=cd[15],Nb));Zc=t.hiC;da.uniformMatrix4fv(la.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(bb[0]=Zc[0],bb[1]=Zc[1],bb[2]=Zc[2],bb[3]=Zc[3],bb[4]=Zc[4],bb[5]=Zc[5],bb[6]=Zc[6],bb[7]=Zc[7],bb[8]=Zc[8],bb[9]=Zc[9],bb[10]=Zc[10],bb[11]=Zc[11],bb[12]=Zc[12],bb[13]=
Zc[13],bb[14]=Zc[14],bb[15]=Zc[15],bb));kc=t.loD;da.uniformMatrix4fv(Aa.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(ob[0]=kc[0],ob[1]=kc[1],ob[2]=kc[2],ob[3]=kc[3],ob[4]=kc[4],ob[5]=kc[5],ob[6]=kc[6],ob[7]=kc[7],ob[8]=kc[8],ob[9]=kc[9],ob[10]=kc[10],ob[11]=kc[11],ob[12]=kc[12],ob[13]=kc[13],ob[14]=kc[14],ob[15]=kc[15],ob));bc=t.hiD;da.uniformMatrix4fv(qa.location,!1,Array.isArray(bc)||bc instanceof Float32Array?bc:(Va[0]=bc[0],Va[1]=bc[1],Va[2]=bc[2],Va[3]=bc[3],Va[4]=bc[4],Va[5]=
bc[5],Va[6]=bc[6],Va[7]=bc[7],Va[8]=bc[8],Va[9]=bc[9],Va[10]=bc[10],Va[11]=bc[11],Va[12]=bc[12],Va[13]=bc[13],Va[14]=bc[14],Va[15]=bc[15],Va));$c=t.resolution;Uc=$c[0];Ac=$c[1];k&&dd===Uc&&hd===Ac||(dd=Uc,hd=Ac,da.uniform2f(oa.location,Uc,Ac));Nd=t.viewBoxPos;wd=Nd[0];id=Nd[1];k&&ue===wd&&ha===id||(ue=wd,ha=id,da.uniform2f(xa.location,wd,id));Od=t.viewBoxSize;ge=Od[0];Pd=Od[1];k&&ce===ge&&Jd===Pd||(ce=ge,Jd=Pd,da.uniform2f(Ea.location,ge,Pd));Hd=t.maskHeight;k&&md===Hd||(md=Hd,da.uniform1f(ka.location,
Hd));Tc=t.drwLayer;k&&ud===Tc||(ud=Tc,da.uniform1f(J.location,Tc));rd=t.contextColor;jd=rd[0];Cd=rd[1];je=rd[2];Fe=rd[3];k&&vd===jd&&Fd===Cd&&ye===je&&le===Fe||(vd=jd,Fd=Cd,ye=je,le=Fe,da.uniform4f(R.location,jd,Cd,je,Fe));(ke=t.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);he=ke._texture;da.uniform1i(pa.location,he.bind());ve=t.offset;if(de=t.count)Wc?da.drawElements(1,de,Wc.type,ve<<(Wc.type-5121>>1)):da.drawArrays(1,ve,de),V.viewportWidth=td,V.viewportHeight=nc,he.unbind()}W.unbind();
ua.dirty=!0;ac.setVAO(null);ua.profile=f},draw:function(a){var d,g,f,k,t,b;d=mb.next;d!==mb.cur&&(d?da.bindFramebuffer(36160,d.framebuffer):da.bindFramebuffer(36160,null),mb.cur=d);if(ua.dirty){d=Ad[0];b=Ad[1];g=Ad[2];f=Ad[3];if(d!==Rd[0]||b!==Rd[1]||g!==Rd[2]||f!==Rd[3])da.colorMask(d,b,g,f),Rd[0]=d,Rd[1]=b,Rd[2]=g,Rd[3]=f;d=yd.frontFace;d!==ua.frontFace&&(da.frontFace(d),ua.frontFace=d);d=yd.polygonOffset_enable;d!==ua.polygonOffset_enable&&(d?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=
d);d=Ed[0];b=Ed[1];if(d!==Yd[0]||b!==Yd[1])da.polygonOffset(d,b),Yd[0]=d,Yd[1]=b;d=yd.sample_alpha;d!==ua.sample_alpha&&(d?da.enable(32926):da.disable(32926),ua.sample_alpha=d);d=yd.sample_enable;d!==ua.sample_enable&&(d?da.enable(32928):da.disable(32928),ua.sample_enable=d);d=fe[0];b=fe[1];if(d!==Md[0]||b!==Md[1])da.sampleCoverage(d,b),Md[0]=d,Md[1]=b;d=yd.stencil_enable;d!==ua.stencil_enable&&(d?da.enable(2960):da.disable(2960),ua.stencil_enable=d);d=yd.stencil_mask;d!==ua.stencil_mask&&(da.stencilMask(d),
ua.stencil_mask=d);d=Re[0];b=Re[1];g=Re[2];if(d!==Gd[0]||b!==Gd[1]||g!==Gd[2])da.stencilFunc(d,b,g),Gd[0]=d,Gd[1]=b,Gd[2]=g;d=Zd[0];b=Zd[1];g=Zd[2];f=Zd[3];if(d!==Bd[0]||b!==Bd[1]||g!==Bd[2]||f!==Bd[3])da.stencilOpSeparate(d,b,g,f),Bd[0]=d,Bd[1]=b,Bd[2]=g,Bd[3]=f;d=Ae[0];b=Ae[1];g=Ae[2];f=Ae[3];if(d!==te[0]||b!==te[1]||g!==te[2]||f!==te[3])da.stencilOpSeparate(d,b,g,f),te[0]=d,te[1]=b,te[2]=g,te[3]=f}ad.height=a.viewportHeight;ad.width=a.viewportWidth;ad.x=a.viewportX;ad.y=a.viewportY;g=ad.x|0;f=
ad.y|0;k="width"in ad?ad.width|0:V.framebufferWidth-g;t="height"in ad?ad.height|0:V.framebufferHeight-f;d=V.viewportWidth;V.viewportWidth=k;b=V.viewportHeight;V.viewportHeight=t;da.viewport(g,f,k,t);ld[0]=g;ld[1]=f;ld[2]=k;ld[3]=t;da.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;da.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);
ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;da.depthFunc(513);ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);ie[0]=0;ie[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;pd.height=a.scissorHeight;pd.width=a.scissorWidth;pd.x=a.scissorX;pd.y=a.scissorY;g=pd.x|0;f=pd.y|0;k="width"in pd?pd.width|0:V.framebufferWidth-g;t="height"in pd?pd.height|0:V.framebufferHeight-f;da.scissor(g,f,k,t);$e[0]=g;$e[1]=f;$e[2]=k;$e[3]=t;da.enable(3089);ua.scissor_enable=
!0;g=ua.profile;ua.profile=!1;da.useProgram(M.program);ac.setVAO(null);f=ya.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==L.dtype||4!==k.size||k.buffer!==L||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,L.buffer),da.vertexAttribPointer(f,4,L.dtype,!1,0,0),k.type=L.dtype,k.size=4,k.buffer=L,k.normalized=!1,k.offset=0,k.stride=0;f=Ja.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==
k.offset||0!==k.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(f,4,e.dtype,!1,0,0),k.type=e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;f=na.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==l.dtype||4!==k.size||k.buffer!==l||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,l.buffer),da.vertexAttribPointer(f,4,l.dtype,!1,0,0),k.type=l.dtype,k.size=4,k.buffer=l,k.normalized=!1,k.offset=0,k.stride=0;f=$a.location;k=ma[f];k.buffer||
da.enableVertexAttribArray(f);if(k.type!==p.dtype||4!==k.size||k.buffer!==p||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,p.buffer),da.vertexAttribPointer(f,4,p.dtype,!1,0,0),k.type=p.dtype,k.size=4,k.buffer=p,k.normalized=!1,k.offset=0,k.stride=0;f=Ta.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==c.dtype||4!==k.size||k.buffer!==c||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,c.buffer),da.vertexAttribPointer(f,4,c.dtype,!1,0,0),k.type=
c.dtype,k.size=4,k.buffer=c,k.normalized=!1,k.offset=0,k.stride=0;f=q.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==G.dtype||4!==k.size||k.buffer!==G||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,G.buffer),da.vertexAttribPointer(f,4,G.dtype,!1,0,0),k.type=G.dtype,k.size=4,k.buffer=G,k.normalized=!1,k.offset=0,k.stride=0;f=n.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==H.dtype||4!==k.size||k.buffer!==H||!1!==k.normalized||0!==k.offset||
0!==k.stride)da.bindBuffer(34962,H.buffer),da.vertexAttribPointer(f,4,H.dtype,!1,0,0),k.type=H.dtype,k.size=4,k.buffer=H,k.normalized=!1,k.offset=0,k.stride=0;f=C.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==B.dtype||4!==k.size||k.buffer!==B||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(f,4,B.dtype,!1,0,0),k.type=B.dtype,k.size=4,k.buffer=B,k.normalized=!1,k.offset=0,k.stride=0;f=va.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);
if(k.type!==U.dtype||4!==k.size||k.buffer!==U||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,U.buffer),da.vertexAttribPointer(f,4,U.dtype,!1,0,0),k.type=U.dtype,k.size=4,k.buffer=U,k.normalized=!1,k.offset=0,k.stride=0;f=Ba.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==m.dtype||4!==k.size||k.buffer!==m||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,m.buffer),da.vertexAttribPointer(f,4,m.dtype,!1,0,0),k.type=m.dtype,k.size=4,k.buffer=m,
k.normalized=!1,k.offset=0,k.stride=0;f=xd.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==u.dtype||4!==k.size||k.buffer!==u||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(f,4,u.dtype,!1,0,0),k.type=u.dtype,k.size=4,k.buffer=u,k.normalized=!1,k.offset=0,k.stride=0;f=Hb.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==y.dtype||4!==k.size||k.buffer!==y||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,
y.buffer),da.vertexAttribPointer(f,4,y.dtype,!1,0,0),k.type=y.dtype,k.size=4,k.buffer=y,k.normalized=!1,k.offset=0,k.stride=0;f=ga.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==ca.dtype||4!==k.size||k.buffer!==ca||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,ca.buffer),da.vertexAttribPointer(f,4,ca.dtype,!1,0,0),k.type=ca.dtype,k.size=4,k.buffer=ca,k.normalized=!1,k.offset=0,k.stride=0;f=I.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==
w.dtype||4!==k.size||k.buffer!==w||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,w.buffer),da.vertexAttribPointer(f,4,w.dtype,!1,0,0),k.type=w.dtype,k.size=4,k.buffer=w,k.normalized=!1,k.offset=0,k.stride=0;f=sa.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==T.dtype||4!==k.size||k.buffer!==T||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(f,4,T.dtype,!1,0,0),k.type=T.dtype,k.size=4,k.buffer=T,k.normalized=
!1,k.offset=0,k.stride=0;f=ea.location;k=ma[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==z.dtype||4!==k.size||k.buffer!==z||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,z.buffer),da.vertexAttribPointer(f,4,z.dtype,!1,0,0),k.type=z.dtype,k.size=4,k.buffer=z,k.normalized=!1,k.offset=0,k.stride=0;f=a.dim0A;da.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],
Lc[8]=f[8],Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.dim1A;da.uniformMatrix4fv(K.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(nd[0]=f[0],nd[1]=f[1],nd[2]=f[2],nd[3]=f[3],nd[4]=f[4],nd[5]=f[5],nd[6]=f[6],nd[7]=f[7],nd[8]=f[8],nd[9]=f[9],nd[10]=f[10],nd[11]=f[11],nd[12]=f[12],nd[13]=f[13],nd[14]=f[14],nd[15]=f[15],nd));f=a.dim0B;da.uniformMatrix4fv(E.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],
Gc[2]=f[2],Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=f[14],Gc[15]=f[15],Gc));f=a.dim1B;da.uniformMatrix4fv(Ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ed[0]=f[0],ed[1]=f[1],ed[2]=f[2],ed[3]=f[3],ed[4]=f[4],ed[5]=f[5],ed[6]=f[6],ed[7]=f[7],ed[8]=f[8],ed[9]=f[9],ed[10]=f[10],ed[11]=f[11],ed[12]=f[12],ed[13]=f[13],ed[14]=f[14],ed[15]=f[15],ed));f=a.dim0C;da.uniformMatrix4fv(h.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Pc[0]=f[0],Pc[1]=f[1],Pc[2]=f[2],Pc[3]=f[3],Pc[4]=f[4],Pc[5]=f[5],Pc[6]=f[6],Pc[7]=f[7],Pc[8]=f[8],Pc[9]=f[9],Pc[10]=f[10],Pc[11]=f[11],Pc[12]=f[12],Pc[13]=f[13],Pc[14]=f[14],Pc[15]=f[15],Pc));f=a.dim1C;da.uniformMatrix4fv(ra.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(kd[0]=f[0],kd[1]=f[1],kd[2]=f[2],kd[3]=f[3],kd[4]=f[4],kd[5]=f[5],kd[6]=f[6],kd[7]=f[7],kd[8]=f[8],kd[9]=f[9],kd[10]=f[10],kd[11]=f[11],kd[12]=f[12],kd[13]=f[13],kd[14]=f[14],kd[15]=f[15],
kd));f=a.dim0D;da.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.dim1D;da.uniformMatrix4fv(r.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fb[0]=f[0],Fb[1]=f[1],Fb[2]=f[2],Fb[3]=f[3],Fb[4]=f[4],Fb[5]=f[5],Fb[6]=f[6],Fb[7]=f[7],Fb[8]=f[8],Fb[9]=f[9],Fb[10]=f[10],
Fb[11]=f[11],Fb[12]=f[12],Fb[13]=f[13],Fb[14]=f[14],Fb[15]=f[15],Fb));f=a.loA;da.uniformMatrix4fv(za.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(vc[0]=f[0],vc[1]=f[1],vc[2]=f[2],vc[3]=f[3],vc[4]=f[4],vc[5]=f[5],vc[6]=f[6],vc[7]=f[7],vc[8]=f[8],vc[9]=f[9],vc[10]=f[10],vc[11]=f[11],vc[12]=f[12],vc[13]=f[13],vc[14]=f[14],vc[15]=f[15],vc));f=a.hiA;da.uniformMatrix4fv(aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xb[0]=f[0],xb[1]=f[1],xb[2]=f[2],xb[3]=f[3],xb[4]=f[4],xb[5]=
f[5],xb[6]=f[6],xb[7]=f[7],xb[8]=f[8],xb[9]=f[9],xb[10]=f[10],xb[11]=f[11],xb[12]=f[12],xb[13]=f[13],xb[14]=f[14],xb[15]=f[15],xb));f=a.loB;da.uniformMatrix4fv(wa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(yc[0]=f[0],yc[1]=f[1],yc[2]=f[2],yc[3]=f[3],yc[4]=f[4],yc[5]=f[5],yc[6]=f[6],yc[7]=f[7],yc[8]=f[8],yc[9]=f[9],yc[10]=f[10],yc[11]=f[11],yc[12]=f[12],yc[13]=f[13],yc[14]=f[14],yc[15]=f[15],yc));f=a.hiB;da.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Cb[0]=f[0],Cb[1]=f[1],Cb[2]=f[2],Cb[3]=f[3],Cb[4]=f[4],Cb[5]=f[5],Cb[6]=f[6],Cb[7]=f[7],Cb[8]=f[8],Cb[9]=f[9],Cb[10]=f[10],Cb[11]=f[11],Cb[12]=f[12],Cb[13]=f[13],Cb[14]=f[14],Cb[15]=f[15],Cb));f=a.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;da.uniformMatrix4fv(la.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(lc[0]=f[0],lc[1]=f[1],lc[2]=f[2],lc[3]=f[3],lc[4]=f[4],lc[5]=f[5],lc[6]=f[6],lc[7]=f[7],lc[8]=f[8],lc[9]=f[9],lc[10]=f[10],lc[11]=f[11],lc[12]=f[12],lc[13]=f[13],lc[14]=f[14],lc[15]=f[15],lc));f=a.loD;da.uniformMatrix4fv(Aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=
f[14],Hc[15]=f[15],Hc));f=a.hiD;da.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Wc[0]=f[0],Wc[1]=f[1],Wc[2]=f[2],Wc[3]=f[3],Wc[4]=f[4],Wc[5]=f[5],Wc[6]=f[6],Wc[7]=f[7],Wc[8]=f[8],Wc[9]=f[9],Wc[10]=f[10],Wc[11]=f[11],Wc[12]=f[12],Wc[13]=f[13],Wc[14]=f[14],Wc[15]=f[15],Wc));f=a.resolution;da.uniform2f(oa.location,f[0],f[1]);f=a.viewBoxPos;da.uniform2f(xa.location,f[0],f[1]);f=a.viewBoxSize;da.uniform2f(Ea.location,f[0],f[1]);da.uniform1f(ka.location,a.maskHeight);da.uniform1f(J.location,
a.drwLayer);f=a.contextColor;da.uniform4f(R.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;da.uniform1i(pa.location,f.bind());da.uniform1i(Da.location,Q.bind());(k=Fa.elements)?da.bindBuffer(34963,k.buffer.buffer):ac.currentVAO&&(k=Ia.getElements(ac.currentVAO.elements))&&da.bindBuffer(34963,k.buffer.buffer);t=a.offset;if(a=a.count)k?da.drawElements(1,a,k.type,t<<(k.type-5121>>1)):da.drawArrays(1,t,a),ua.dirty=!0,ac.setVAO(null),V.viewportWidth=
d,V.viewportHeight=b,ua.profile=g,f.unbind(),Q.unbind()},scope:function(h,q,n){var r,I,C,b,na,sa,Ja,Da,O,J,P,$a,E,R,fa,oa,ga,ma,K,va,N,aa,xa,Ea,da,Ca,qa,wa,Q,M,ka,ba,W,Ta,ea,ya,Ba,pa,Aa,ra,la,Hb,za,xd,Ia,mb,Dc,Ua,dc,Fb,Pc,Bb,ec,oc,xb,Cb,Md,Ae,mc,ac,Zd,pc,db,bb,Va,Ic,Z,Re,kd,lc,ob,Gc,te,ed,Gd,Lc,vc,yb,yc,re,nd,Hc,Ec,Jc,Rd,ld,Bd,Nb,Ed,qc,$e,Vc,pg,Wc,fe,Ad,ze,Yd,ie,ha,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,ab,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,
Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ad.height=h.viewportHeight;ad.width=h.viewportWidth;ad.x=h.viewportX;ad.y=h.viewportY;
r=ad.x|0;I=ad.y|0;C="width"in ad?ad.width|0:V.framebufferWidth-r;b="height"in ad?ad.height|0:V.framebufferHeight-I;na=V.viewportWidth;V.viewportWidth=C;sa=V.viewportHeight;V.viewportHeight=b;Ja=$d[0];$d[0]=r;Da=$d[1];$d[1]=I;O=$d[2];$d[2]=C;J=$d[3];$d[3]=b;P=Sb[0];Sb[0]=0;$a=Sb[1];Sb[1]=0;E=Sb[2];Sb[2]=0;R=Sb[3];Sb[3]=0;fa=yd.blend_enable;yd.blend_enable=!1;oa=Dd[0];Dd[0]=32774;ga=Dd[1];Dd[1]=32774;ma=Wd[0];Wd[0]=770;K=Wd[1];Wd[1]=771;va=Wd[2];Wd[2]=1;N=Wd[3];Wd[3]=1;aa=yd.cull_enable;yd.cull_enable=
!0;xa=yd.cull_face;yd.cull_face=1029;Ea=yd.depth_enable;yd.depth_enable=!0;da=yd.depth_func;yd.depth_func=513;Ca=yd.depth_mask;yd.depth_mask=!0;qa=oe[0];oe[0]=0;wa=oe[1];oe[1]=1;Q=yd.dither;yd.dither=!1;M=yd.lineWidth;yd.lineWidth=2;pd.height=h.scissorHeight;pd.width=h.scissorWidth;pd.x=h.scissorX;pd.y=h.scissorY;ka=pd.x|0;ba=pd.y|0;W="width"in pd?pd.width|0:V.framebufferWidth-ka;Ta="height"in pd?pd.height|0:V.framebufferHeight-ba;ea=Ye[0];Ye[0]=ka;ya=Ye[1];Ye[1]=ba;Ba=Ye[2];Ye[2]=W;pa=Ye[3];Ye[3]=
Ta;Aa=yd.scissor_enable;yd.scissor_enable=!0;ra=ua.profile;ua.profile=!1;la=h.offset;Hb=Fa.offset;Fa.offset=la;za=h.count;xd=Fa.count;Fa.count=za;Ia=Fa.primitive;Fa.primitive=1;mb=h.contextColor;Dc=Ga[24];Ga[24]=mb;Ua=h.dim0A;dc=Ga[3];Ga[3]=Ua;Fb=h.dim0B;Pc=Ga[5];Ga[5]=Fb;Bb=h.dim0C;ec=Ga[7];Ga[7]=Bb;oc=h.dim0D;xb=Ga[9];Ga[9]=oc;Cb=h.dim1A;Md=Ga[4];Ga[4]=Cb;Ae=h.dim1B;mc=Ga[6];Ga[6]=Ae;ac=h.dim1C;Zd=Ga[8];Ga[8]=ac;pc=h.dim1D;db=Ga[10];Ga[10]=pc;bb=h.drwLayer;Va=Ga[23];Ga[23]=bb;Ic=h.hiA;Z=Ga[12];
Ga[12]=Ic;Re=h.hiB;kd=Ga[14];Ga[14]=Re;lc=h.hiC;ob=Ga[16];Ga[16]=lc;Gc=h.hiD;te=Ga[18];Ga[18]=Gc;ed=h.loA;Gd=Ga[11];Ga[11]=ed;Lc=h.loB;vc=Ga[13];Ga[13]=Lc;yb=h.loC;yc=Ga[15];Ga[15]=yb;re=h.loD;nd=Ga[17];Ga[17]=re;Hc=h.maskHeight;Ec=Ga[22];Ga[22]=Hc;Jc=h.maskTexture;Rd=Ga[25];Ga[25]=Jc;ld=Ga[26];Ga[26]=ia;Bd=h.resolution;Nb=Ga[19];Ga[19]=Bd;Ed=h.viewBoxPos;qc=Ga[20];Ga[20]=Ed;$e=h.viewBoxSize;Vc=Ga[21];Ga[21]=$e;pg=g.buffer;g.buffer=z;Wc=g.divisor;g.divisor=0;fe=g.normalized;g.normalized=!1;Ad=g.offset;
g.offset=0;ze=g.size;g.size=0;Yd=g.state;g.state=1;ie=g.stride;g.stride=0;ha=g.type;g.type=z.dtype;Pd=g.w;g.w=0;Jd=g.x;g.x=0;Hd=g.y;g.y=0;md=g.z;g.z=0;Tc=v.buffer;v.buffer=L;ud=v.divisor;v.divisor=0;rd=v.normalized;v.normalized=!1;jd=v.offset;v.offset=0;vd=v.size;v.size=0;Cd=v.state;v.state=1;Fd=v.stride;v.stride=0;je=v.type;v.type=L.dtype;ye=v.w;v.w=0;Fe=v.x;v.x=0;le=v.y;v.y=0;ke=v.z;v.z=0;he=S.buffer;S.buffer=e;ve=S.divisor;S.divisor=0;de=S.normalized;S.normalized=!1;me=S.offset;S.offset=0;Oc=S.size;
S.size=0;fd=S.state;S.state=1;we=S.stride;S.stride=0;qe=S.type;S.type=e.dtype;Kd=S.w;S.w=0;Qd=S.x;S.x=0;Sd=S.y;S.y=0;Td=S.z;S.z=0;ne=k.buffer;k.buffer=l;ab=k.divisor;k.divisor=0;Be=k.normalized;k.normalized=!1;se=k.offset;k.offset=0;Se=k.size;k.size=0;Te=k.state;k.state=1;Oe=k.stride;k.stride=0;xe=k.type;k.type=l.dtype;He=k.w;k.w=0;Je=k.x;k.x=0;Ke=k.y;k.y=0;Le=k.z;k.z=0;Ie=X.buffer;X.buffer=p;Ld=X.divisor;X.divisor=0;Xd=X.normalized;X.normalized=!1;be=X.offset;X.offset=0;ee=X.size;X.size=0;Me=X.state;
X.state=1;Id=X.stride;X.stride=0;Ud=X.type;X.type=p.dtype;De=X.w;X.w=0;Ne=X.x;X.x=0;hf=X.y;X.y=0;bf=X.z;X.z=0;Ue=f.buffer;f.buffer=c;Pe=f.divisor;f.divisor=0;af=f.normalized;f.normalized=!1;Ze=f.offset;f.offset=0;Ve=f.size;f.size=0;We=f.state;f.state=1;Vd=f.stride;f.stride=0;ae=f.type;f.type=c.dtype;Xe=f.w;f.w=0;jf=f.x;f.x=0;nf=f.y;f.y=0;ef=f.z;f.z=0;kf=x.buffer;x.buffer=G;lf=x.divisor;x.divisor=0;mf=x.normalized;x.normalized=!1;rf=x.offset;x.offset=0;of=x.size;x.size=0;sf=x.state;x.state=1;Bf=x.stride;
x.stride=0;Cf=x.type;x.type=G.dtype;Qe=x.w;x.w=0;Ee=x.x;x.x=0;pf=x.y;x.y=0;qf=x.z;x.z=0;Df=Y.buffer;Y.buffer=H;Gf=Y.divisor;Y.divisor=0;Af=Y.normalized;Y.normalized=!1;Ef=Y.offset;Y.offset=0;Ff=Y.size;Y.size=0;wf=Y.state;Y.state=1;xf=Y.stride;Y.stride=0;vf=Y.type;Y.type=H.dtype;yf=Y.w;Y.w=0;zf=Y.x;Y.x=0;If=Y.y;Y.y=0;Jf=Y.z;Y.z=0;Kf=D.buffer;D.buffer=B;Lf=D.divisor;D.divisor=0;tf=D.normalized;D.normalized=!1;Qf=D.offset;D.offset=0;Hf=D.size;D.size=0;uf=D.state;D.state=1;cg=D.stride;D.stride=0;Rf=D.type;
D.type=B.dtype;Sf=D.w;D.w=0;qg=D.x;D.x=0;ff=D.y;D.y=0;cf=D.z;D.z=0;Mf=F.buffer;F.buffer=U;Nf=F.divisor;F.divisor=0;dg=F.normalized;F.normalized=!1;eg=F.offset;F.offset=0;fg=F.size;F.size=0;gg=F.state;F.state=1;hg=F.stride;F.stride=0;Vf=F.type;F.type=U.dtype;Tf=F.w;F.w=0;Wf=F.x;F.x=0;Xf=F.y;F.y=0;Yf=F.z;F.z=0;ig=d.buffer;d.buffer=m;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=0;xg=d.type;d.type=m.dtype;
yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;gf=t.buffer;t.buffer=u;df=t.divisor;t.divisor=0;Of=t.normalized;t.normalized=!1;Pf=t.offset;t.offset=0;jg=t.size;t.size=0;kg=t.state;t.state=1;lg=t.stride;t.stride=0;mg=t.type;t.type=u.dtype;ng=t.w;t.w=0;Zf=t.x;t.x=0;Uf=t.y;t.y=0;$f=t.z;t.z=0;ag=a.buffer;a.buffer=y;bg=a.divisor;a.divisor=0;og=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=y.dtype;Hg=a.w;a.w=0;Ig=
a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=ta.buffer;ta.buffer=ca;Mg=ta.divisor;ta.divisor=0;Ng=ta.normalized;ta.normalized=!1;Og=ta.offset;ta.offset=0;Pg=ta.size;ta.size=0;Qg=ta.state;ta.state=1;Rg=ta.stride;ta.stride=0;Sg=ta.type;ta.type=ca.dtype;Tg=ta.w;ta.w=0;Ug=ta.x;ta.x=0;Vg=ta.y;ta.y=0;Wg=ta.z;ta.z=0;Xg=A.buffer;A.buffer=w;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=w.dtype;eh=A.w;
A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ja.buffer;ja.buffer=T;jh=ja.divisor;ja.divisor=0;kh=ja.normalized;ja.normalized=!1;lh=ja.offset;ja.offset=0;mh=ja.size;ja.size=0;nh=ja.state;ja.state=1;oh=ja.stride;ja.stride=0;ph=ja.type;ja.type=T.dtype;qh=ja.w;ja.w=0;rh=ja.x;ja.x=0;sh=ja.y;ja.y=0;th=ja.z;ja.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ua.dirty=!0;q(V,h,n);V.viewportWidth=na;V.viewportHeight=sa;$d[0]=Ja;$d[1]=Da;$d[2]=O;$d[3]=J;Sb[0]=P;Sb[1]=$a;Sb[2]=E;Sb[3]=R;yd.blend_enable=fa;Dd[0]=
oa;Dd[1]=ga;Wd[0]=ma;Wd[1]=K;Wd[2]=va;Wd[3]=N;yd.cull_enable=aa;yd.cull_face=xa;yd.depth_enable=Ea;yd.depth_func=da;yd.depth_mask=Ca;oe[0]=qa;oe[1]=wa;yd.dither=Q;yd.lineWidth=M;Ye[0]=ea;Ye[1]=ya;Ye[2]=Ba;Ye[3]=pa;yd.scissor_enable=Aa;ua.profile=ra;Fa.offset=Hb;Fa.count=xd;Fa.primitive=Ia;Ga[24]=Dc;Ga[3]=dc;Ga[5]=Pc;Ga[7]=ec;Ga[9]=xb;Ga[4]=Md;Ga[6]=mc;Ga[8]=Zd;Ga[10]=db;Ga[23]=Va;Ga[12]=Z;Ga[14]=kd;Ga[16]=ob;Ga[18]=te;Ga[11]=Gd;Ga[13]=vc;Ga[15]=yc;Ga[17]=nd;Ga[22]=Ec;Ga[25]=Rd;Ga[26]=ld;Ga[19]=Nb;
Ga[20]=qc;Ga[21]=Vc;g.buffer=pg;g.divisor=Wc;g.normalized=fe;g.offset=Ad;g.size=ze;g.state=Yd;g.stride=ie;g.type=ha;g.w=Pd;g.x=Jd;g.y=Hd;g.z=md;v.buffer=Tc;v.divisor=ud;v.normalized=rd;v.offset=jd;v.size=vd;v.state=Cd;v.stride=Fd;v.type=je;v.w=ye;v.x=Fe;v.y=le;v.z=ke;S.buffer=he;S.divisor=ve;S.normalized=de;S.offset=me;S.size=Oc;S.state=fd;S.stride=we;S.type=qe;S.w=Kd;S.x=Qd;S.y=Sd;S.z=Td;k.buffer=ne;k.divisor=ab;k.normalized=Be;k.offset=se;k.size=Se;k.state=Te;k.stride=Oe;k.type=xe;k.w=He;k.x=Je;
k.y=Ke;k.z=Le;X.buffer=Ie;X.divisor=Ld;X.normalized=Xd;X.offset=be;X.size=ee;X.state=Me;X.stride=Id;X.type=Ud;X.w=De;X.x=Ne;X.y=hf;X.z=bf;f.buffer=Ue;f.divisor=Pe;f.normalized=af;f.offset=Ze;f.size=Ve;f.state=We;f.stride=Vd;f.type=ae;f.w=Xe;f.x=jf;f.y=nf;f.z=ef;x.buffer=kf;x.divisor=lf;x.normalized=mf;x.offset=rf;x.size=of;x.state=sf;x.stride=Bf;x.type=Cf;x.w=Qe;x.x=Ee;x.y=pf;x.z=qf;Y.buffer=Df;Y.divisor=Gf;Y.normalized=Af;Y.offset=Ef;Y.size=Ff;Y.state=wf;Y.stride=xf;Y.type=vf;Y.w=yf;Y.x=zf;Y.y=If;
Y.z=Jf;D.buffer=Kf;D.divisor=Lf;D.normalized=tf;D.offset=Qf;D.size=Hf;D.state=uf;D.stride=cg;D.type=Rf;D.w=Sf;D.x=qg;D.y=ff;D.z=cf;F.buffer=Mf;F.divisor=Nf;F.normalized=dg;F.offset=eg;F.size=fg;F.state=gg;F.stride=hg;F.type=Vf;F.w=Tf;F.x=Wf;F.y=Xf;F.z=Yf;d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;t.buffer=gf;t.divisor=df;t.normalized=Of;t.offset=Pf;t.size=jg;t.state=kg;t.stride=lg;t.type=mg;t.w=ng;t.x=Zf;t.y=Uf;t.z=$f;
a.buffer=ag;a.divisor=bg;a.normalized=og;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;ta.buffer=Lg;ta.divisor=Mg;ta.normalized=Ng;ta.offset=Og;ta.size=Pg;ta.state=Qg;ta.stride=Rg;ta.type=Sg;ta.w=Tg;ta.x=Ug;ta.y=Vg;ta.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ja.buffer=ih;ja.divisor=jh;ja.normalized=kh;ja.offset=lh;ja.size=mh;ja.state=nh;ja.stride=oh;ja.type=ph;ja.w=qh;ja.x=
rh;ja.y=sh;ja.z=th;$b.vert=uh;$b.frag=vh;ua.dirty=!0}}},$1:function(b,ba){var M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d;M=b.attributes;L=b.current;e=b.framebuffer;l=b.gl;p=b.next;c=b.vao;G=p.blend_color;H=L.blend_color;B=p.blend_equation;U=L.blend_equation;m=p.blend_func;u=L.blend_func;y=p.colorMask;ca=L.colorMask;w=p.depth_range;T=L.depth_range;z=p.polygonOffset_offset;Q=L.polygonOffset_offset;ia=p.sample_coverage;g=L.sample_coverage;v=p.scissor_box;S=L.scissor_box;k=p.stencil_func;
X=L.stencil_func;f=p.stencil_opBack;x=L.stencil_opBack;Y=p.stencil_opFront;D=L.stencil_opFront;F=p.viewport;d=L.viewport;return{poll:function(){var c,a,b,A,M,ba,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa;L.dirty=!1;a=p.blend_enable;b=p.cull_enable;A=p.depth_enable;M=p.dither;ba=p.polygonOffset_enable;W=p.sample_alpha;ea=p.sample_enable;R=p.scissor_enable;O=p.stencil_enable;E=p.cull_face;h=L.cull_face;N=p.depth_func;K=L.depth_func;Ca=p.depth_mask;ra=L.depth_mask;r=p.frontFace;J=L.frontFace;aa=p.lineWidth;
P=L.lineWidth;la=p.stencil_mask;qa=L.stencil_mask;c=e.next;c!==e.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),e.cur=c);a!==L.blend_enable&&(a?l.enable(3042):l.disable(3042),L.blend_enable=a);b!==L.cull_enable&&(b?l.enable(2884):l.disable(2884),L.cull_enable=b);A!==L.depth_enable&&(A?l.enable(2929):l.disable(2929),L.depth_enable=A);M!==L.dither&&(M?l.enable(3024):l.disable(3024),L.dither=M);ba!==L.polygonOffset_enable&&(ba?l.enable(32823):l.disable(32823),L.polygonOffset_enable=
ba);W!==L.sample_alpha&&(W?l.enable(32926):l.disable(32926),L.sample_alpha=W);ea!==L.sample_enable&&(ea?l.enable(32928):l.disable(32928),L.sample_enable=ea);R!==L.scissor_enable&&(R?l.enable(3089):l.disable(3089),L.scissor_enable=R);O!==L.stencil_enable&&(O?l.enable(2960):l.disable(2960),L.stencil_enable=O);if(G[0]!==H[0]||G[1]!==H[1]||G[2]!==H[2]||G[3]!==H[3])l.blendColor(G[0],G[1],G[2],G[3]),H[0]=G[0],H[1]=G[1],H[2]=G[2],H[3]=G[3];if(B[0]!==U[0]||B[1]!==U[1])l.blendEquationSeparate(B[0],B[1]),U[0]=
B[0],U[1]=B[1];if(m[0]!==u[0]||m[1]!==u[1]||m[2]!==u[2]||m[3]!==u[3])l.blendFuncSeparate(m[0],m[1],m[2],m[3]),u[0]=m[0],u[1]=m[1],u[2]=m[2],u[3]=m[3];if(y[0]!==ca[0]||y[1]!==ca[1]||y[2]!==ca[2]||y[3]!==ca[3])l.colorMask(y[0],y[1],y[2],y[3]),ca[0]=y[0],ca[1]=y[1],ca[2]=y[2],ca[3]=y[3];E!==h&&(l.cullFace(E),L.cull_face=E);N!==K&&(l.depthFunc(N),L.depth_func=N);Ca!==ra&&(l.depthMask(Ca),L.depth_mask=Ca);if(w[0]!==T[0]||w[1]!==T[1])l.depthRange(w[0],w[1]),T[0]=w[0],T[1]=w[1];r!==J&&(l.frontFace(r),L.frontFace=
r);aa!==P&&(l.lineWidth(aa),L.lineWidth=aa);if(z[0]!==Q[0]||z[1]!==Q[1])l.polygonOffset(z[0],z[1]),Q[0]=z[0],Q[1]=z[1];if(ia[0]!==g[0]||ia[1]!==g[1])l.sampleCoverage(ia[0],ia[1]),g[0]=ia[0],g[1]=ia[1];if(v[0]!==S[0]||v[1]!==S[1]||v[2]!==S[2]||v[3]!==S[3])l.scissor(v[0],v[1],v[2],v[3]),S[0]=v[0],S[1]=v[1],S[2]=v[2],S[3]=v[3];if(k[0]!==X[0]||k[1]!==X[1]||k[2]!==X[2])l.stencilFunc(k[0],k[1],k[2]),X[0]=k[0],X[1]=k[1],X[2]=k[2];la!==qa&&(l.stencilMask(la),L.stencil_mask=la);if(f[0]!==x[0]||f[1]!==x[1]||
f[2]!==x[2]||f[3]!==x[3])l.stencilOpSeparate(f[0],f[1],f[2],f[3]),x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3];if(Y[0]!==D[0]||Y[1]!==D[1]||Y[2]!==D[2]||Y[3]!==D[3])l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]),D[0]=Y[0],D[1]=Y[1],D[2]=Y[2],D[3]=Y[3];if(F[0]!==d[0]||F[1]!==d[1]||F[2]!==d[2]||F[3]!==d[3])l.viewport(F[0],F[1],F[2],F[3]),d[0]=F[0],d[1]=F[1],d[2]=F[2],d[3]=F[3]},refresh:function(){var t,a,b,A,ja,Dc,W,ea,R,O,E,h,N,K,Ca,ra;L.dirty=!1;a=p.blend_enable;b=p.cull_enable;A=p.depth_enable;ja=p.dither;
Dc=p.polygonOffset_enable;W=p.sample_alpha;ea=p.sample_enable;R=p.scissor_enable;O=p.stencil_enable;E=p.cull_face;h=p.depth_func;N=p.depth_mask;K=p.frontFace;Ca=p.lineWidth;ra=p.stencil_mask;(t=e.next)?l.bindFramebuffer(36160,t.framebuffer):l.bindFramebuffer(36160,null);e.cur=t;t=M[0];t.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(0,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,t.x,t.y,t.z,t.w),t.buffer=
null);ba.vertexAttribDivisorANGLE(0,t.divisor);t=M[1];t.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(1,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(1,t.divisor);t=M[2];t.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(2,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(2),
l.vertexAttrib4f(2,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(2,t.divisor);t=M[3];t.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(3,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(3,t.divisor);t=M[4];t.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(4,t.size,t.type,t.normalized,
t.stride,t.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(4,t.divisor);t=M[5];t.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(5,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(5,t.divisor);t=M[6];t.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,t.buffer.buffer),
l.vertexAttribPointer(6,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(6,t.divisor);t=M[7];t.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(7,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(7,t.divisor);t=M[8];t.buffer?(l.enableVertexAttribArray(8),
l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(8,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(8,t.divisor);t=M[9];t.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(9,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(9,t.divisor);
t=M[10];t.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(10,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(10,t.divisor);t=M[11];t.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(11,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,t.x,t.y,t.z,
t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(11,t.divisor);t=M[12];t.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(12,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(12,t.divisor);t=M[13];t.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(13,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(13),
l.vertexAttrib4f(13,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(13,t.divisor);t=M[14];t.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(14,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(14,t.divisor);t=M[15];t.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(15,t.size,t.type,t.normalized,
t.stride,t.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,t.x,t.y,t.z,t.w),t.buffer=null);ba.vertexAttribDivisorANGLE(15,t.divisor);c.currentVAO=null;c.setVAO(c.targetVAO);a?l.enable(3042):l.disable(3042);L.blend_enable=a;b?l.enable(2884):l.disable(2884);L.cull_enable=b;A?l.enable(2929):l.disable(2929);L.depth_enable=A;ja?l.enable(3024):l.disable(3024);L.dither=ja;Dc?l.enable(32823):l.disable(32823);L.polygonOffset_enable=Dc;W?l.enable(32926):l.disable(32926);L.sample_alpha=W;ea?l.enable(32928):
l.disable(32928);L.sample_enable=ea;R?l.enable(3089):l.disable(3089);L.scissor_enable=R;O?l.enable(2960):l.disable(2960);L.stencil_enable=O;l.blendColor(G[0],G[1],G[2],G[3]);H[0]=G[0];H[1]=G[1];H[2]=G[2];H[3]=G[3];l.blendEquationSeparate(B[0],B[1]);U[0]=B[0];U[1]=B[1];l.blendFuncSeparate(m[0],m[1],m[2],m[3]);u[0]=m[0];u[1]=m[1];u[2]=m[2];u[3]=m[3];l.colorMask(y[0],y[1],y[2],y[3]);ca[0]=y[0];ca[1]=y[1];ca[2]=y[2];ca[3]=y[3];l.cullFace(E);L.cull_face=E;l.depthFunc(h);L.depth_func=h;l.depthMask(N);L.depth_mask=
N;l.depthRange(w[0],w[1]);T[0]=w[0];T[1]=w[1];l.frontFace(K);L.frontFace=K;l.lineWidth(Ca);L.lineWidth=Ca;l.polygonOffset(z[0],z[1]);Q[0]=z[0];Q[1]=z[1];l.sampleCoverage(ia[0],ia[1]);g[0]=ia[0];g[1]=ia[1];l.scissor(v[0],v[1],v[2],v[3]);S[0]=v[0];S[1]=v[1];S[2]=v[2];S[3]=v[3];l.stencilFunc(k[0],k[1],k[2]);X[0]=k[0];X[1]=k[1];X[2]=k[2];l.stencilMask(ra);L.stencil_mask=ra;l.stencilOpSeparate(f[0],f[1],f[2],f[3]);x[0]=f[0];x[1]=f[1];x[2]=f[2];x[3]=f[3];l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]);D[0]=Y[0];
D[1]=Y[1];D[2]=Y[2];D[3]=Y[3];l.viewport(F[0],F[1],F[2],F[3]);d[0]=F[0];d[1]=F[1];d[2]=F[2];d[3]=F[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Dc,W,ea,R,O,E,h,N,K,Ca,ra){var r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,xd,Hb,ga,I,sa,Da,oa,xa,Ea,ma,V,ua,Fa,Ia,mb,da,yd,$b,Ga,ac,Sb;r=b.attributes;
J=b.buffer;aa=b.context;P=b.current;la=b.draw;qa=b.elements;za=b.extensions;wa=b.framebuffer;fa=b.gl;Aa=b.isBufferArgs;ka=b.next;pa=b.shader;ya=b.uniforms;Ja=b.vao;na=ka.blend_color;$a=P.blend_color;Ta=ka.blend_equation;q=P.blend_equation;n=ka.blend_func;C=P.blend_func;va=ka.colorMask;Ba=P.colorMask;xd=ka.depth_range;Hb=P.depth_range;ga=ka.polygonOffset_offset;I=P.polygonOffset_offset;sa=ka.sample_coverage;Da=P.sample_coverage;oa=ka.scissor_box;xa=P.scissor_box;Ea=ka.stencil_func;ma=P.stencil_func;
V=ka.stencil_opBack;ua=P.stencil_opBack;Fa=ka.stencil_opFront;Ia=P.stencil_opFront;mb=ka.viewport;da=P.viewport;yd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=M;$b.divisor=1;Ga={};Ga.buffer=L;Ga.divisor=1;ac={};ac.buffer=e;ac.divisor=1;Sb={};Sb.buffer=l;Sb.divisor=1;return{batch:function(c,f){var g,l,k,n,p,b;g=wa.next;g!==wa.cur&&(g?fa.bindFramebuffer(36160,g.framebuffer):fa.bindFramebuffer(36160,null),wa.cur=g);if(P.dirty){var v,
na,e,w,oa,L,z,y,H,M,S,Q,G,B,T,Ta,X,ya,pa,ca,ia,mb,Z,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc;v=ka.dither;v!==P.dither&&(v?fa.enable(3024):fa.disable(3024),P.dither=v);na=ka.depth_func;na!==P.depth_func&&(fa.depthFunc(na),P.depth_func=na);e=xd[0];w=xd[1];if(e!==Hb[0]||w!==Hb[1])fa.depthRange(e,w),Hb[0]=e,Hb[1]=w;oa=ka.depth_mask;oa!==P.depth_mask&&(fa.depthMask(oa),P.depth_mask=oa);L=va[0];z=va[1];y=va[2];H=va[3];if(L!==Ba[0]||z!==Ba[1]||y!==Ba[2]||H!==Ba[3])fa.colorMask(L,z,y,H),Ba[0]=L,Ba[1]=z,Ba[2]=y,Ba[3]=
H;M=ka.cull_enable;M!==P.cull_enable&&(M?fa.enable(2884):fa.disable(2884),P.cull_enable=M);S=ka.cull_face;S!==P.cull_face&&(fa.cullFace(S),P.cull_face=S);Q=ka.frontFace;Q!==P.frontFace&&(fa.frontFace(Q),P.frontFace=Q);G=ka.lineWidth;G!==P.lineWidth&&(fa.lineWidth(G),P.lineWidth=G);B=ka.polygonOffset_enable;B!==P.polygonOffset_enable&&(B?fa.enable(32823):fa.disable(32823),P.polygonOffset_enable=B);T=ga[0];Ta=ga[1];if(T!==I[0]||Ta!==I[1])fa.polygonOffset(T,Ta),I[0]=T,I[1]=Ta;X=ka.sample_alpha;X!==P.sample_alpha&&
(X?fa.enable(32926):fa.disable(32926),P.sample_alpha=X);ya=ka.sample_enable;ya!==P.sample_enable&&(ya?fa.enable(32928):fa.disable(32928),P.sample_enable=ya);pa=sa[0];ca=sa[1];if(pa!==Da[0]||ca!==Da[1])fa.sampleCoverage(pa,ca),Da[0]=pa,Da[1]=ca;ia=ka.stencil_enable;ia!==P.stencil_enable&&(ia?fa.enable(2960):fa.disable(2960),P.stencil_enable=ia);mb=ka.stencil_mask;mb!==P.stencil_mask&&(fa.stencilMask(mb),P.stencil_mask=mb);Z=Ea[0];Bb=Ea[1];Fb=Ea[2];if(Z!==ma[0]||Bb!==ma[1]||Fb!==ma[2])fa.stencilFunc(Z,
Bb,Fb),ma[0]=Z,ma[1]=Bb,ma[2]=Fb;vc=Fa[0];xb=Fa[1];yc=Fa[2];Cb=Fa[3];if(vc!==Ia[0]||xb!==Ia[1]||yc!==Ia[2]||Cb!==Ia[3])fa.stencilOpSeparate(vc,xb,yc,Cb),Ia[0]=vc,Ia[1]=xb,Ia[2]=yc,Ia[3]=Cb;Jc=V[0];lc=V[1];Hc=V[2];Wc=V[3];if(Jc!==ua[0]||lc!==ua[1]||Hc!==ua[2]||Wc!==ua[3])fa.stencilOpSeparate(Jc,lc,Hc,Wc),ua[0]=Jc,ua[1]=lc,ua[2]=Hc,ua[3]=Wc}fa.blendColor(0,0,0,0);$a[0]=0;$a[1]=0;$a[2]=0;$a[3]=0;fa.enable(3042);P.blend_enable=!0;fa.blendEquationSeparate(32774,32774);q[0]=32774;q[1]=32774;fa.blendFuncSeparate(770,
771,773,1);C[0]=770;C[1]=771;C[2]=773;C[3]=1;fa.disable(2929);P.depth_enable=!1;fa.enable(3089);P.scissor_enable=!0;if(l=P.profile)k=performance.now(),ba.count+=f;fa.useProgram(x.program);n=za.angle_instanced_arrays;var Vc,Ec,dc,Ic,oc,pc,mc,ec;Ja.setVAO(null);Vc=ja.location;Ec=r[Vc];Ec.buffer||fa.enableVertexAttribArray(Vc);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==U||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(Vc,2,5126,!1,24,0),Ec.type=
5126,Ec.size=2,Ec.buffer=U,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(n.vertexAttribDivisorANGLE(Vc,0),Ec.divisor=0);dc=W.location;Ic=r[dc];Ic.buffer||fa.enableVertexAttribArray(dc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==m||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(dc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=m,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(n.vertexAttribDivisorANGLE(dc,0),Ic.divisor=
0);oc=a.location;pc=r[oc];pc.buffer||fa.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==u||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=u,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(n.vertexAttribDivisorANGLE(oc,0),pc.divisor=0);(mc=la.elements)?fa.bindBuffer(34963,mc.buffer.buffer):Ja.currentVAO&&(mc=qa.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,
mc.buffer.buffer);ec=la.offset;for(p=0;p<f;++p){b=c[p];var Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,ha,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc;Ua=b.viewport;qc=Ua.x|0;yb=Ua.y|0;db="width"in Ua?Ua.width|0:aa.framebufferWidth-qc;Nb="height"in
Ua?Ua.height|0:aa.framebufferHeight-yb;bb=aa.viewportWidth;aa.viewportWidth=db;ob=aa.viewportHeight;aa.viewportHeight=Nb;fa.viewport(qc,yb,db,Nb);da[0]=qc;da[1]=yb;da[2]=db;da[3]=Nb;Va=b.viewport;gd=Va.x|0;Ib=Va.y|0;Jb="width"in Va?Va.width|0:aa.framebufferWidth-gd;rc="height"in Va?Va.height|0:aa.framebufferHeight-Ib;fa.scissor(gd,Ib,Jb,rc);xa[0]=gd;xa[1]=Ib;xa[2]=Jb;xa[3]=rc;Ob=Y.call(this,aa,b,p);ac.offset=Ob;jb=!1;Gb=null;Db=0;wb=!1;Yb=hb=0;Pb=1;qb=0;Ra=5126;ib=ic=zb=Ub=0;Aa(ac)?(jb=!0,Gb=J.createStream(34962,
ac),Ra=Gb.dtype):(Gb=J.getBuffer(ac))?Ra=Gb.dtype:"constant"in ac?(Pb=2,"number"===typeof ac.constant?(zb=ac.constant,ic=ib=Ub=0):(zb=0<ac.constant.length?ac.constant[0]:0,ic=1<ac.constant.length?ac.constant[1]:0,ib=2<ac.constant.length?ac.constant[2]:0,Ub=3<ac.constant.length?ac.constant[3]:0)):(Gb=Aa(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Ra="type"in ac?yd[ac.type]:Gb.dtype,wb=!!ac.normalized,Yb=ac.size|0,hb=ac.offset|0,qb=ac.stride|0,Db=ac.divisor|0);pb=O.location;Ha=
r[pb];if(1===Pb){Ha.buffer||fa.enableVertexAttribArray(pb);rb=Yb||2;if(Ha.type!==Ra||Ha.size!==rb||Ha.buffer!==Gb||Ha.normalized!==wb||Ha.offset!==hb||Ha.stride!==qb)fa.bindBuffer(34962,Gb.buffer),fa.vertexAttribPointer(pb,rb,Ra,wb,qb,hb),Ha.type=Ra,Ha.size=rb,Ha.buffer=Gb,Ha.normalized=wb,Ha.offset=hb,Ha.stride=qb;Ha.divisor!==Db&&(n.vertexAttribDivisorANGLE(pb,Db),Ha.divisor=Db)}else if(Ha.buffer&&(fa.disableVertexAttribArray(pb),Ha.buffer=null),Ha.x!==zb||Ha.y!==ic||Ha.z!==ib||Ha.w!==Ub)fa.vertexAttrib4f(pb,
zb,ic,ib,Ub),Ha.x=zb,Ha.y=ic,Ha.z=ib,Ha.w=Ub;Ka=D.call(this,aa,b,p);Sb.offset=Ka;fb=!1;gb=null;La=0;kb=!1;tb=Wa=0;sb=1;Oa=0;tc=5126;Ma=Eb=Kb=Qa=0;Aa(Sb)?(fb=!0,gb=J.createStream(34962,Sb),tc=gb.dtype):(gb=J.getBuffer(Sb))?tc=gb.dtype:"constant"in Sb?(sb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Ma=Qa=0):(Kb=0<Sb.constant.length?Sb.constant[0]:0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?Sb.constant[2]:0,Qa=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Aa(Sb.buffer)?J.createStream(34962,
Sb.buffer):J.getBuffer(Sb.buffer),tc="type"in Sb?yd[Sb.type]:gb.dtype,kb=!!Sb.normalized,tb=Sb.size|0,Wa=Sb.offset|0,Oa=Sb.stride|0,La=Sb.divisor|0);zd=E.location;Ya=r[zd];if(1===sb){Ya.buffer||fa.enableVertexAttribArray(zd);Lb=tb||2;if(Ya.type!==tc||Ya.size!==Lb||Ya.buffer!==gb||Ya.normalized!==kb||Ya.offset!==Wa||Ya.stride!==Oa)fa.bindBuffer(34962,gb.buffer),fa.vertexAttribPointer(zd,Lb,tc,kb,Oa,Wa),Ya.type=tc,Ya.size=Lb,Ya.buffer=gb,Ya.normalized=kb,Ya.offset=Wa,Ya.stride=Oa;Ya.divisor!==La&&(n.vertexAttribDivisorANGLE(zd,
La),Ya.divisor=La)}else if(Ya.buffer&&(fa.disableVertexAttribArray(zd),Ya.buffer=null),Ya.x!==Kb||Ya.y!==Eb||Ya.z!==Ma||Ya.w!==Qa)fa.vertexAttrib4f(zd,Kb,Eb,Ma,Qa),Ya.x=Kb,Ya.y=Eb,Ya.z=Ma,Ya.w=Qa;Mb=F.call(this,aa,b,p);Ga.offset=Mb;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;fc=5126;jc=cb=wc=Bc=0;Aa(Ga)?(lb=!0,Na=J.createStream(34962,Ga),fc=Na.dtype):(Na=J.getBuffer(Ga))?fc=Na.dtype:"constant"in Ga?(Sa=2,"number"===typeof Ga.constant?(wc=Ga.constant,cb=jc=Bc=0):(wc=0<Ga.constant.length?Ga.constant[0]:
0,cb=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,Bc=3<Ga.constant.length?Ga.constant[3]:0)):(Na=Aa(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),fc="type"in Ga?yd[Ga.type]:Na.dtype,Pa=!!Ga.normalized,vb=Ga.size|0,ub=Ga.offset|0,nb=Ga.stride|0,Zb=Ga.divisor|0);qd=Dc.location;Xa=r[qd];if(1===Sa){Xa.buffer||fa.enableVertexAttribArray(qd);Mc=vb||4;if(Xa.type!==fc||Xa.size!==Mc||Xa.buffer!==Na||Xa.normalized!==Pa||Xa.offset!==ub||Xa.stride!==nb)fa.bindBuffer(34962,
Na.buffer),fa.vertexAttribPointer(qd,Mc,fc,Pa,nb,ub),Xa.type=fc,Xa.size=Mc,Xa.buffer=Na,Xa.normalized=Pa,Xa.offset=ub,Xa.stride=nb;Xa.divisor!==Zb&&(n.vertexAttribDivisorANGLE(qd,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(fa.disableVertexAttribArray(qd),Xa.buffer=null),Xa.x!==wc||Xa.y!==cb||Xa.z!==jc||Xa.w!==Bc)fa.vertexAttrib4f(qd,wc,cb,jc,Bc),Xa.x=wc,Xa.y=cb,Xa.z=jc,Xa.w=Bc;Ab=d.call(this,aa,b,p);$b.offset=Ab;Za=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;pe=0;Fc=5126;td=Xc=Nc=sd=0;Aa($b)?(Za=!0,Vb=J.createStream(34962,
$b),Fc=Vb.dtype):(Vb=J.getBuffer($b))?Fc=Vb.dtype:"constant"in $b?(Rb=2,"number"===typeof $b.constant?(Nc=$b.constant,Xc=td=sd=0):(Nc=0<$b.constant.length?$b.constant[0]:0,Xc=1<$b.constant.length?$b.constant[1]:0,td=2<$b.constant.length?$b.constant[2]:0,sd=3<$b.constant.length?$b.constant[3]:0)):(Vb=Aa($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),Fc="type"in $b?yd[$b.type]:Vb.dtype,Wb=!!$b.normalized,Kc=$b.size|0,Qb=$b.offset|0,pe=$b.stride|0,uc=$b.divisor|0);nc=A.location;xc=
r[nc];if(1===Rb){xc.buffer||fa.enableVertexAttribArray(nc);gc=Kc||4;if(xc.type!==Fc||xc.size!==gc||xc.buffer!==Vb||xc.normalized!==Wb||xc.offset!==Qb||xc.stride!==pe)fa.bindBuffer(34962,Vb.buffer),fa.vertexAttribPointer(nc,gc,Fc,Wb,pe,Qb),xc.type=Fc,xc.size=gc,xc.buffer=Vb,xc.normalized=Wb,xc.offset=Qb,xc.stride=pe;xc.divisor!==uc&&(n.vertexAttribDivisorANGLE(nc,uc),xc.divisor=uc)}else if(xc.buffer&&(fa.disableVertexAttribArray(nc),xc.buffer=null),xc.x!==Nc||xc.y!==Xc||xc.z!==td||xc.w!==sd)fa.vertexAttrib4f(nc,
Nc,Xc,td,sd),xc.x=Nc,xc.y=Xc,xc.z=td,xc.w=sd;eb=t.call(this,aa,b,p);sc=eb[0];Xb=eb[1];hc=eb[2];Cc=eb[3];p&&Tb===sc&&cc===Xb&&zc===hc&&bd===Cc||(Tb=sc,cc=Xb,zc=hc,bd=Cc,fa.uniform4f(ra.location,sc,Xb,hc,Cc));Qc=b.lineWidth;p&&Rc===Qc||(Rc=Qc,fa.uniform1f(ea.location,Qc));Sc=b.capSize;p&&Yc===Sc||(Yc=Sc,fa.uniform1f(ta.location,Sc));od=b.scale;cd=od[0];kc=od[1];p&&Zc===cd&&bc===kc||(Zc=cd,bc=kc,fa.uniform2f(h.location,cd,kc));$c=b.scaleFract;Uc=$c[0];Ac=$c[1];p&&dd===Uc&&hd===Ac||(dd=Uc,hd=Ac,fa.uniform2f(N.location,
Uc,Ac));ha=b.translate;wd=ha[0];id=ha[1];p&&ue===wd&&Ce===id||(ue=wd,Ce=id,fa.uniform2f(K.location,wd,id));Od=b.translateFract;ge=Od[0];Pd=Od[1];p&&ce===ge&&Jd===Pd||(ce=ge,Jd=Pd,fa.uniform2f(Ca.location,ge,Pd));Hd=b.opacity;p&&md===Hd||(md=Hd,fa.uniform1f(R.location,Hd));Tc=b.count;0<Tc?mc?n.drawElementsInstancedANGLE(4,36,mc.type,ec<<(mc.type-5121>>1),Tc):n.drawArraysInstancedANGLE(4,ec,36,Tc):0>Tc&&(mc?fa.drawElements(4,36,mc.type,ec<<(mc.type-5121>>1)):fa.drawArrays(4,ec,36));aa.viewportWidth=
bb;aa.viewportHeight=ob;jb&&J.destroyStream(Gb);fb&&J.destroyStream(gb);lb&&J.destroyStream(Na);Za&&J.destroyStream(Vb)}P.dirty=!0;Ja.setVAO(null);l&&(ba.cpuTime+=performance.now()-k)},draw:function(d){var f,g,l,k,n,b,t,v,na,x,e,w,oa,D,F,L,z,M,S,Q,T,Ta,X,ya,pa,ca,ia,Y,mb,Z,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb;f=wa.next;f!==wa.cur&&(f?
fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),wa.cur=f);if(P.dirty){var Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,ha,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb;Pa=ka.dither;Pa!==P.dither&&(Pa?fa.enable(3024):fa.disable(3024),P.dither=Pa);ub=ka.depth_func;ub!==P.depth_func&&(fa.depthFunc(ub),P.depth_func=ub);vb=xd[0];Sa=xd[1];if(vb!==Hb[0]||Sa!==Hb[1])fa.depthRange(vb,Sa),Hb[0]=vb,Hb[1]=Sa;nb=ka.depth_mask;nb!==P.depth_mask&&(fa.depthMask(nb),P.depth_mask=nb);fc=
va[0];Bc=va[1];wc=va[2];cb=va[3];if(fc!==Ba[0]||Bc!==Ba[1]||wc!==Ba[2]||cb!==Ba[3])fa.colorMask(fc,Bc,wc,cb),Ba[0]=fc,Ba[1]=Bc,Ba[2]=wc,Ba[3]=cb;jc=ka.cull_enable;jc!==P.cull_enable&&(jc?fa.enable(2884):fa.disable(2884),P.cull_enable=jc);qd=ka.cull_face;qd!==P.cull_face&&(fa.cullFace(qd),P.cull_face=qd);Xa=ka.frontFace;Xa!==P.frontFace&&(fa.frontFace(Xa),P.frontFace=Xa);Mc=ka.lineWidth;Mc!==P.lineWidth&&(fa.lineWidth(Mc),P.lineWidth=Mc);Ab=ka.polygonOffset_enable;Ab!==P.polygonOffset_enable&&(Ab?
fa.enable(32823):fa.disable(32823),P.polygonOffset_enable=Ab);Za=ga[0];Vb=ga[1];if(Za!==I[0]||Vb!==I[1])fa.polygonOffset(Za,Vb),I[0]=Za,I[1]=Vb;uc=ka.sample_alpha;uc!==P.sample_alpha&&(uc?fa.enable(32926):fa.disable(32926),P.sample_alpha=uc);Wb=ka.sample_enable;Wb!==P.sample_enable&&(Wb?fa.enable(32928):fa.disable(32928),P.sample_enable=Wb);Qb=sa[0];Kc=sa[1];if(Qb!==Da[0]||Kc!==Da[1])fa.sampleCoverage(Qb,Kc),Da[0]=Qb,Da[1]=Kc;Rb=ka.stencil_enable;Rb!==P.stencil_enable&&(Rb?fa.enable(2960):fa.disable(2960),
P.stencil_enable=Rb);ha=ka.stencil_mask;ha!==P.stencil_mask&&(fa.stencilMask(ha),P.stencil_mask=ha);Fc=Ea[0];sd=Ea[1];Nc=Ea[2];if(Fc!==ma[0]||sd!==ma[1]||Nc!==ma[2])fa.stencilFunc(Fc,sd,Nc),ma[0]=Fc,ma[1]=sd,ma[2]=Nc;Xc=Fa[0];td=Fa[1];nc=Fa[2];xc=Fa[3];if(Xc!==Ia[0]||td!==Ia[1]||nc!==Ia[2]||xc!==Ia[3])fa.stencilOpSeparate(Xc,td,nc,xc),Ia[0]=Xc,Ia[1]=td,Ia[2]=nc,Ia[3]=xc;gc=V[0];eb=V[1];sc=V[2];Tb=V[3];if(gc!==ua[0]||eb!==ua[1]||sc!==ua[2]||Tb!==ua[3])fa.stencilOpSeparate(gc,eb,sc,Tb),ua[0]=gc,ua[1]=
eb,ua[2]=sc,ua[3]=Tb}g=d.viewport;l=g.x|0;k=g.y|0;n="width"in g?g.width|0:aa.framebufferWidth-l;b="height"in g?g.height|0:aa.framebufferHeight-k;t=aa.viewportWidth;aa.viewportWidth=n;v=aa.viewportHeight;aa.viewportHeight=b;fa.viewport(l,k,n,b);da[0]=l;da[1]=k;da[2]=n;da[3]=b;fa.blendColor(0,0,0,0);$a[0]=0;$a[1]=0;$a[2]=0;$a[3]=0;fa.enable(3042);P.blend_enable=!0;fa.blendEquationSeparate(32774,32774);q[0]=32774;q[1]=32774;fa.blendFuncSeparate(770,771,773,1);C[0]=770;C[1]=771;C[2]=773;C[3]=1;fa.disable(2929);
P.depth_enable=!1;na=d.viewport;x=na.x|0;e=na.y|0;w="width"in na?na.width|0:aa.framebufferWidth-x;oa="height"in na?na.height|0:aa.framebufferHeight-e;fa.scissor(x,e,w,oa);xa[0]=x;xa[1]=e;xa[2]=w;xa[3]=oa;fa.enable(3089);P.scissor_enable=!0;if(D=P.profile)F=performance.now(),ba.count++;fa.useProgram(p.program);L=za.angle_instanced_arrays;Ja.setVAO(null);z=c.call(this,aa,d,0);ac.offset=z;M=!1;S=null;Q=0;T=!1;X=Ta=0;ya=1;pa=0;ca=5126;Z=mb=Y=ia=0;Aa(ac)?(M=!0,S=J.createStream(34962,ac),ca=S.dtype):(S=
J.getBuffer(ac))?ca=S.dtype:"constant"in ac?(ya=2,"number"===typeof ac.constant?(Y=ac.constant,mb=Z=ia=0):(Y=0<ac.constant.length?ac.constant[0]:0,mb=1<ac.constant.length?ac.constant[1]:0,Z=2<ac.constant.length?ac.constant[2]:0,ia=3<ac.constant.length?ac.constant[3]:0)):(S=Aa(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),ca="type"in ac?yd[ac.type]:S.dtype,T=!!ac.normalized,X=ac.size|0,Ta=ac.offset|0,pa=ac.stride|0,Q=ac.divisor|0);Bb=O.location;Fb=r[Bb];if(1===ya){Fb.buffer||fa.enableVertexAttribArray(Bb);
vc=X||2;if(Fb.type!==ca||Fb.size!==vc||Fb.buffer!==S||Fb.normalized!==T||Fb.offset!==Ta||Fb.stride!==pa)fa.bindBuffer(34962,S.buffer),fa.vertexAttribPointer(Bb,vc,ca,T,pa,Ta),Fb.type=ca,Fb.size=vc,Fb.buffer=S,Fb.normalized=T,Fb.offset=Ta,Fb.stride=pa;Fb.divisor!==Q&&(L.vertexAttribDivisorANGLE(Bb,Q),Fb.divisor=Q)}else if(Fb.buffer&&(fa.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==Y||Fb.y!==mb||Fb.z!==Z||Fb.w!==ia)fa.vertexAttrib4f(Bb,Y,mb,Z,ia),Fb.x=Y,Fb.y=mb,Fb.z=Z,Fb.w=ia;xb=G.call(this,
aa,d,0);Sb.offset=xb;yc=!1;Cb=null;Jc=0;lc=!1;Wc=Hc=0;Vc=1;Ec=0;dc=5126;mc=pc=oc=Ic=0;Aa(Sb)?(yc=!0,Cb=J.createStream(34962,Sb),dc=Cb.dtype):(Cb=J.getBuffer(Sb))?dc=Cb.dtype:"constant"in Sb?(Vc=2,"number"===typeof Sb.constant?(oc=Sb.constant,pc=mc=Ic=0):(oc=0<Sb.constant.length?Sb.constant[0]:0,pc=1<Sb.constant.length?Sb.constant[1]:0,mc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Aa(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),dc="type"in
Sb?yd[Sb.type]:Cb.dtype,lc=!!Sb.normalized,Wc=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Jc=Sb.divisor|0);ec=E.location;Ua=r[ec];if(1===Vc){Ua.buffer||fa.enableVertexAttribArray(ec);qc=Wc||2;if(Ua.type!==dc||Ua.size!==qc||Ua.buffer!==Cb||Ua.normalized!==lc||Ua.offset!==Hc||Ua.stride!==Ec)fa.bindBuffer(34962,Cb.buffer),fa.vertexAttribPointer(ec,qc,dc,lc,Ec,Hc),Ua.type=dc,Ua.size=qc,Ua.buffer=Cb,Ua.normalized=lc,Ua.offset=Hc,Ua.stride=Ec;Ua.divisor!==Jc&&(L.vertexAttribDivisorANGLE(ec,Jc),Ua.divisor=Jc)}else if(Ua.buffer&&
(fa.disableVertexAttribArray(ec),Ua.buffer=null),Ua.x!==oc||Ua.y!==pc||Ua.z!==mc||Ua.w!==Ic)fa.vertexAttrib4f(ec,oc,pc,mc,Ic),Ua.x=oc,Ua.y=pc,Ua.z=mc,Ua.w=Ic;yb=H.call(this,aa,d,0);Ga.offset=yb;db=!1;Nb=null;bb=0;ob=!1;gd=Va=0;Ib=1;Jb=0;rc=5126;Db=Gb=jb=Ob=0;Aa(Ga)?(db=!0,Nb=J.createStream(34962,Ga),rc=Nb.dtype):(Nb=J.getBuffer(Ga))?rc=Nb.dtype:"constant"in Ga?(Ib=2,"number"===typeof Ga.constant?(jb=Ga.constant,Gb=Db=Ob=0):(jb=0<Ga.constant.length?Ga.constant[0]:0,Gb=1<Ga.constant.length?Ga.constant[1]:
0,Db=2<Ga.constant.length?Ga.constant[2]:0,Ob=3<Ga.constant.length?Ga.constant[3]:0)):(Nb=Aa(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),rc="type"in Ga?yd[Ga.type]:Nb.dtype,ob=!!Ga.normalized,gd=Ga.size|0,Va=Ga.offset|0,Jb=Ga.stride|0,bb=Ga.divisor|0);wb=Dc.location;hb=r[wb];if(1===Ib){hb.buffer||fa.enableVertexAttribArray(wb);Yb=gd||4;if(hb.type!==rc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Va||hb.stride!==Jb)fa.bindBuffer(34962,Nb.buffer),fa.vertexAttribPointer(wb,
Yb,rc,ob,Jb,Va),hb.type=rc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Va,hb.stride=Jb;hb.divisor!==bb&&(L.vertexAttribDivisorANGLE(wb,bb),hb.divisor=bb)}else if(hb.buffer&&(fa.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)fa.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=B.call(this,aa,d,0);$b.offset=Pb;qb=!1;Ra=null;Ub=0;zb=!1;ib=ic=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;Aa($b)?(qb=!0,Ra=J.createStream(34962,$b),rb=Ra.dtype):(Ra=J.getBuffer($b))?
rb=Ra.dtype:"constant"in $b?(pb=2,"number"===typeof $b.constant?(fb=$b.constant,gb=La=Ka=0):(fb=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,La=2<$b.constant.length?$b.constant[2]:0,Ka=3<$b.constant.length?$b.constant[3]:0)):(Ra=Aa($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),rb="type"in $b?yd[$b.type]:Ra.dtype,zb=!!$b.normalized,ib=$b.size|0,ic=$b.offset|0,Ha=$b.stride|0,Ub=$b.divisor|0);kb=A.location;Wa=r[kb];if(1===pb){Wa.buffer||fa.enableVertexAttribArray(kb);
tb=ib||4;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Ra||Wa.normalized!==zb||Wa.offset!==ic||Wa.stride!==Ha)fa.bindBuffer(34962,Ra.buffer),fa.vertexAttribPointer(kb,tb,rb,zb,Ha,ic),Wa.type=rb,Wa.size=tb,Wa.buffer=Ra,Wa.normalized=zb,Wa.offset=ic,Wa.stride=Ha;Wa.divisor!==Ub&&(L.vertexAttribDivisorANGLE(kb,Ub),Wa.divisor=Ub)}else if(Wa.buffer&&(fa.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==fb||Wa.y!==gb||Wa.z!==La||Wa.w!==Ka)fa.vertexAttrib4f(kb,fb,gb,La,Ka),Wa.x=fb,Wa.y=gb,Wa.z=La,Wa.w=Ka;
sb=ja.location;Oa=r[sb];Oa.buffer||fa.enableVertexAttribArray(sb);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==U||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(sb,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=U,Oa.normalized=!1,Oa.offset=0,Oa.stride=24;0!==Oa.divisor&&(L.vertexAttribDivisorANGLE(sb,0),Oa.divisor=0);tc=W.location;Qa=r[tc];Qa.buffer||fa.enableVertexAttribArray(tc);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==m||!1!==Qa.normalized||
8!==Qa.offset||24!==Qa.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(tc,2,5126,!1,24,8),Qa.type=5126,Qa.size=2,Qa.buffer=m,Qa.normalized=!1,Qa.offset=8,Qa.stride=24;0!==Qa.divisor&&(L.vertexAttribDivisorANGLE(tc,0),Qa.divisor=0);Kb=a.location;Eb=r[Kb];Eb.buffer||fa.enableVertexAttribArray(Kb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==u||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(Kb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,
Eb.buffer=u,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(L.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Ma=y.call(this,aa,d,0);fa.uniform4f(ra.location,Ma[0],Ma[1],Ma[2],Ma[3]);fa.uniform1f(ea.location,d.lineWidth);fa.uniform1f(ta.location,d.capSize);zd=d.scale;fa.uniform2f(h.location,zd[0],zd[1]);Ya=d.scaleFract;fa.uniform2f(N.location,Ya[0],Ya[1]);Lb=d.translate;fa.uniform2f(K.location,Lb[0],Lb[1]);Mb=d.translateFract;fa.uniform2f(Ca.location,Mb[0],Mb[1]);fa.uniform1f(R.location,
d.opacity);(lb=la.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ja.currentVAO&&(lb=qa.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Na=la.offset;Zb=d.count;0<Zb?lb?L.drawElementsInstancedANGLE(4,36,lb.type,Na<<(lb.type-5121>>1),Zb):L.drawArraysInstancedANGLE(4,Na,36,Zb):0>Zb&&(lb?fa.drawElements(4,36,lb.type,Na<<(lb.type-5121>>1)):fa.drawArrays(4,Na,36));P.dirty=!0;Ja.setVAO(null);aa.viewportWidth=t;aa.viewportHeight=v;D&&(ba.cpuTime+=performance.now()-F);M&&J.destroyStream(S);
yc&&J.destroyStream(Cb);db&&J.destroyStream(Nb);qb&&J.destroyStream(Ra)},scope:function(a,d,c){var h,q,l,r,I,C,b,p,t,x,e,A,sa,Ja,Da,O,$a,E,R,fa,ga,ma,K,D,F,L,V,va,N,xa,Ea,y,H,da,Ca,qa,M,wa,G,B,W,ua,ea,Ba,ra,Hb,Y,ta,ja,za,xd,Ia,Fa,Dc,Z,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,ha,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,
$c,Uc,dd,Ac,hd,Nd,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,ab,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld;h=a.viewport;q=h.x|0;l=h.y|0;r="width"in h?h.width|0:aa.framebufferWidth-q;I="height"in h?h.height|0:aa.framebufferHeight-l;C=aa.viewportWidth;aa.viewportWidth=r;b=aa.viewportHeight;aa.viewportHeight=I;p=mb[0];mb[0]=q;t=mb[1];mb[1]=l;x=mb[2];mb[2]=r;e=mb[3];mb[3]=I;A=na[0];na[0]=0;sa=na[1];na[1]=0;Ja=na[2];na[2]=0;Da=na[3];na[3]=0;O=ka.blend_enable;
ka.blend_enable=!0;$a=Ta[0];Ta[0]=32774;E=Ta[1];Ta[1]=32774;R=n[0];n[0]=770;fa=n[1];n[1]=771;ga=n[2];n[2]=773;ma=n[3];n[3]=1;K=ka.depth_enable;ka.depth_enable=!1;D=a.viewport;F=D.x|0;L=D.y|0;V="width"in D?D.width|0:aa.framebufferWidth-F;va="height"in D?D.height|0:aa.framebufferHeight-L;N=oa[0];oa[0]=F;xa=oa[1];oa[1]=L;Ea=oa[2];oa[2]=V;y=oa[3];oa[3]=va;H=ka.scissor_enable;ka.scissor_enable=!0;if(da=P.profile)Ca=performance.now(),ba.count++;qa=la.count;la.count=36;M=a.count;wa=la.instances;la.instances=
M;G=la.primitive;la.primitive=4;B=a.capSize;W=ya[5];ya[5]=B;ua=a.lineWidth;ea=ya[4];ya[4]=ua;Ba=a.opacity;ra=ya[10];ya[10]=Ba;Hb=a.range;Y=ya[18];ya[18]=Hb;ta=a.scale;ja=ya[6];ya[6]=ta;za=a.scaleFract;xd=ya[7];ya[7]=za;Ia=a.translate;Fa=ya[8];ya[8]=Ia;Dc=a.translateFract;Z=ya[9];ya[9]=Dc;Ib=ca.call(this,aa,a,c);Jb=ya[3];ya[3]=Ib;rc=w.buffer;w.buffer=u;Ob=w.divisor;w.divisor=0;jb=w.normalized;w.normalized=!1;Gb=w.offset;w.offset=16;Db=w.size;w.size=0;wb=w.state;w.state=1;hb=w.stride;w.stride=24;Yb=
w.type;w.type=5126;Pb=w.w;w.w=0;qb=w.x;w.x=0;Ra=w.y;w.y=0;Ub=w.z;w.z=0;zb=T.call(this,aa,a,c);$b.offset=zb;ic=!1;ib=null;pb=0;Ha=!1;Ka=rb=0;fb=1;gb=0;La=5126;sb=tb=Wa=kb=0;Aa($b)?(ic=!0,ib=J.createStream(34962,$b),La=ib.dtype):(ib=J.getBuffer($b))?La=ib.dtype:"constant"in $b?(fb=2,"number"===typeof $b.constant?(Wa=$b.constant,tb=sb=kb=0):(Wa=0<$b.constant.length?$b.constant[0]:0,tb=1<$b.constant.length?$b.constant[1]:0,sb=2<$b.constant.length?$b.constant[2]:0,kb=3<$b.constant.length?$b.constant[3]:
0)):(ib=Aa($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),La="type"in $b?yd[$b.type]:ib.dtype,Ha=!!$b.normalized,Ka=$b.size|0,rb=$b.offset|0,gb=$b.stride|0,pb=$b.divisor|0);Oa=z.buffer;z.buffer=ib;tc=z.divisor;z.divisor=pb;Qa=z.normalized;z.normalized=Ha;Kb=z.offset;z.offset=rb;Eb=z.size;z.size=Ka;Ma=z.state;z.state=fb;zd=z.stride;z.stride=gb;Ya=z.type;z.type=La;Lb=z.w;z.w=kb;Mb=z.x;z.x=Wa;lb=z.y;z.y=tb;Na=z.z;z.z=sb;Zb=Q.buffer;Q.buffer=U;Pa=Q.divisor;Q.divisor=0;ub=Q.normalized;
Q.normalized=!1;vb=Q.offset;Q.offset=0;Sa=Q.size;Q.size=0;nb=Q.state;Q.state=1;fc=Q.stride;Q.stride=24;Bc=Q.type;Q.type=5126;wc=Q.w;Q.w=0;cb=Q.x;Q.x=0;jc=Q.y;Q.y=0;qd=Q.z;Q.z=0;Xa=ia.call(this,aa,a,c);Ga.offset=Xa;Mc=!1;Ab=null;Za=0;Vb=!1;Wb=uc=0;Qb=1;Kc=0;Rb=5126;Nc=sd=Fc=ha=0;Aa(Ga)?(Mc=!0,Ab=J.createStream(34962,Ga),Rb=Ab.dtype):(Ab=J.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Fc=Ga.constant,sd=Nc=ha=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,sd=1<Ga.constant.length?
Ga.constant[1]:0,Nc=2<Ga.constant.length?Ga.constant[2]:0,ha=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Aa(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Rb="type"in Ga?yd[Ga.type]:Ab.dtype,Vb=!!Ga.normalized,Wb=Ga.size|0,uc=Ga.offset|0,Kc=Ga.stride|0,Za=Ga.divisor|0);Xc=g.buffer;g.buffer=Ab;td=g.divisor;g.divisor=Za;nc=g.normalized;g.normalized=Vb;xc=g.offset;g.offset=uc;gc=g.size;g.size=Wb;eb=g.state;g.state=Qb;sc=g.stride;g.stride=Kc;Tb=g.type;g.type=Rb;Xb=g.w;g.w=ha;cc=g.x;
g.x=Fc;hc=g.y;g.y=sd;zc=g.z;g.z=Nc;Cc=v.buffer;v.buffer=m;bd=v.divisor;v.divisor=0;Qc=v.normalized;v.normalized=!1;Rc=v.offset;v.offset=8;Sc=v.size;v.size=0;Yc=v.state;v.state=1;od=v.stride;v.stride=24;cd=v.type;v.type=5126;Zc=v.w;v.w=0;kc=v.x;v.x=0;bc=v.y;v.y=0;$c=v.z;v.z=0;Uc=S.call(this,aa,a,c);ac.offset=Uc;dd=!1;Ac=null;hd=0;Nd=!1;ue=wd=0;id=1;Ce=0;Od=5126;Jd=Pd=ce=ge=0;Aa(ac)?(dd=!0,Ac=J.createStream(34962,ac),Od=Ac.dtype):(Ac=J.getBuffer(ac))?Od=Ac.dtype:"constant"in ac?(id=2,"number"===typeof ac.constant?
(ce=ac.constant,Pd=Jd=ge=0):(ce=0<ac.constant.length?ac.constant[0]:0,Pd=1<ac.constant.length?ac.constant[1]:0,Jd=2<ac.constant.length?ac.constant[2]:0,ge=3<ac.constant.length?ac.constant[3]:0)):(Ac=Aa(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Od="type"in ac?yd[ac.type]:Ac.dtype,Nd=!!ac.normalized,ue=ac.size|0,wd=ac.offset|0,Ce=ac.stride|0,hd=ac.divisor|0);Hd=k.buffer;k.buffer=Ac;md=k.divisor;k.divisor=hd;Tc=k.normalized;k.normalized=Nd;ud=k.offset;k.offset=wd;rd=k.size;k.size=
ue;jd=k.state;k.state=id;vd=k.stride;k.stride=Ce;Cd=k.type;k.type=Od;Fd=k.w;k.w=ge;je=k.x;k.x=ce;ye=k.y;k.y=Pd;ab=k.z;k.z=Jd;le=X.call(this,aa,a,c);Sb.offset=le;ke=!1;he=null;ve=0;de=!1;Oc=me=0;fd=1;we=0;qe=5126;Td=Sd=Qd=Kd=0;Aa(Sb)?(ke=!0,he=J.createStream(34962,Sb),qe=he.dtype):(he=J.getBuffer(Sb))?qe=he.dtype:"constant"in Sb?(fd=2,"number"===typeof Sb.constant?(Qd=Sb.constant,Sd=Td=Kd=0):(Qd=0<Sb.constant.length?Sb.constant[0]:0,Sd=1<Sb.constant.length?Sb.constant[1]:0,Td=2<Sb.constant.length?
Sb.constant[2]:0,Kd=3<Sb.constant.length?Sb.constant[3]:0)):(he=Aa(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),qe="type"in Sb?yd[Sb.type]:he.dtype,de=!!Sb.normalized,Oc=Sb.size|0,me=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);ne=f.buffer;f.buffer=he;Ge=f.divisor;f.divisor=ve;Be=f.normalized;f.normalized=de;se=f.offset;f.offset=me;Se=f.size;f.size=Oc;Te=f.state;f.state=fd;Oe=f.stride;f.stride=we;xe=f.type;f.type=qe;He=f.w;f.w=Kd;Je=f.x;f.x=Qd;Ke=f.y;f.y=Sd;Le=f.z;f.z=Td;Ie=pa.vert;
pa.vert=2;Ld=pa.frag;pa.frag=1;P.dirty=!0;d(aa,a,c);aa.viewportWidth=C;aa.viewportHeight=b;mb[0]=p;mb[1]=t;mb[2]=x;mb[3]=e;na[0]=A;na[1]=sa;na[2]=Ja;na[3]=Da;ka.blend_enable=O;Ta[0]=$a;Ta[1]=E;n[0]=R;n[1]=fa;n[2]=ga;n[3]=ma;ka.depth_enable=K;oa[0]=N;oa[1]=xa;oa[2]=Ea;oa[3]=y;ka.scissor_enable=H;da&&(ba.cpuTime+=performance.now()-Ca);la.count=qa;la.instances=wa;la.primitive=G;ya[5]=W;ya[4]=ea;ya[10]=ra;ya[18]=Y;ya[6]=ja;ya[7]=xd;ya[8]=Fa;ya[9]=Z;ya[3]=Jb;w.buffer=rc;w.divisor=Ob;w.normalized=jb;w.offset=
Gb;w.size=Db;w.state=wb;w.stride=hb;w.type=Yb;w.w=Pb;w.x=qb;w.y=Ra;w.z=Ub;ic&&J.destroyStream(ib);z.buffer=Oa;z.divisor=tc;z.normalized=Qa;z.offset=Kb;z.size=Eb;z.state=Ma;z.stride=zd;z.type=Ya;z.w=Lb;z.x=Mb;z.y=lb;z.z=Na;Q.buffer=Zb;Q.divisor=Pa;Q.normalized=ub;Q.offset=vb;Q.size=Sa;Q.state=nb;Q.stride=fc;Q.type=Bc;Q.w=wc;Q.x=cb;Q.y=jc;Q.z=qd;Mc&&J.destroyStream(Ab);g.buffer=Xc;g.divisor=td;g.normalized=nc;g.offset=xc;g.size=gc;g.state=eb;g.stride=sc;g.type=Tb;g.w=Xb;g.x=cc;g.y=hc;g.z=zc;v.buffer=
Cc;v.divisor=bd;v.normalized=Qc;v.offset=Rc;v.size=Sc;v.state=Yc;v.stride=od;v.type=cd;v.w=Zc;v.x=kc;v.y=bc;v.z=$c;dd&&J.destroyStream(Ac);k.buffer=Hd;k.divisor=md;k.normalized=Tc;k.offset=ud;k.size=rd;k.state=jd;k.stride=vd;k.type=Cd;k.w=Fd;k.x=je;k.y=ye;k.z=ab;ke&&J.destroyStream(he);f.buffer=ne;f.divisor=Ge;f.normalized=Be;f.offset=se;f.size=Se;f.state=Te;f.stride=Oe;f.type=xe;f.w=He;f.x=Je;f.y=Ke;f.z=Le;pa.vert=Ie;pa.frag=Ld;P.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(b,
ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja){var Dc,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,xd,Hb,ga,I,sa,Da,oa,xa,Ea,ma,V;Dc=b.attributes;W=b.buffer;ea=b.context;R=b.current;O=b.draw;E=b.elements;h=b.extensions;N=b.framebuffer;K=b.gl;Ca=b.isBufferArgs;ra=b.next;r=b.shader;J=b.uniforms;aa=b.vao;P=ra.blend_color;la=R.blend_color;qa=ra.blend_equation;za=R.blend_equation;wa=ra.blend_func;fa=R.blend_func;Aa=ra.colorMask;ka=R.colorMask;
pa=ra.depth_range;ya=R.depth_range;Ja=ra.polygonOffset_offset;na=R.polygonOffset_offset;$a=ra.sample_coverage;Ta=R.sample_coverage;q=ra.scissor_box;n=R.scissor_box;C=ra.stencil_func;va=R.stencil_func;Ba=ra.stencil_opBack;xd=R.stencil_opBack;Hb=ra.stencil_opFront;ga=R.stencil_opFront;I=ra.viewport;sa=R.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};oa={divisor:1,offset:8,stride:8};xa={divisor:1,offset:8,stride:8};Ea={divisor:1,offset:16,stride:8};
ma={divisor:1,offset:16,stride:8};V={divisor:1,offset:0,stride:4};return{batch:function(c,q){var r,I,b,p,J,w;r=N.next;r!==N.cur&&(r?K.bindFramebuffer(36160,r.framebuffer):K.bindFramebuffer(36160,null),N.cur=r);if(R.dirty){var P,L,u,m,y,H,qa,M,wa,G,B,U,ca,Z,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc;P=ra.dither;P!==R.dither&&(P?K.enable(3024):K.disable(3024),R.dither=P);L=ra.depth_func;L!==R.depth_func&&(K.depthFunc(L),R.depth_func=L);u=pa[0];m=pa[1];if(u!==ya[0]||m!==ya[1])K.depthRange(u,
m),ya[0]=u,ya[1]=m;y=ra.depth_mask;y!==R.depth_mask&&(K.depthMask(y),R.depth_mask=y);H=Aa[0];qa=Aa[1];M=Aa[2];wa=Aa[3];if(H!==ka[0]||qa!==ka[1]||M!==ka[2]||wa!==ka[3])K.colorMask(H,qa,M,wa),ka[0]=H,ka[1]=qa,ka[2]=M,ka[3]=wa;G=ra.cull_enable;G!==R.cull_enable&&(G?K.enable(2884):K.disable(2884),R.cull_enable=G);B=ra.cull_face;B!==R.cull_face&&(K.cullFace(B),R.cull_face=B);U=ra.frontFace;U!==R.frontFace&&(K.frontFace(U),R.frontFace=U);ca=ra.lineWidth;ca!==R.lineWidth&&(K.lineWidth(ca),R.lineWidth=ca);
Z=ra.polygonOffset_enable;Z!==R.polygonOffset_enable&&(Z?K.enable(32823):K.disable(32823),R.polygonOffset_enable=Z);Md=Ja[0];Ye=Ja[1];if(Md!==na[0]||Ye!==na[1])K.polygonOffset(Md,Ye),na[0]=Md,na[1]=Ye;$e=ra.sample_alpha;$e!==R.sample_alpha&&($e?K.enable(32926):K.disable(32926),R.sample_alpha=$e);Re=ra.sample_enable;Re!==R.sample_enable&&(Re?K.enable(32928):K.disable(32928),R.sample_enable=Re);Gd=$a[0];Ae=$a[1];if(Gd!==Ta[0]||Ae!==Ta[1])K.sampleCoverage(Gd,Ae),Ta[0]=Gd,Ta[1]=Ae;te=ra.stencil_mask;
te!==R.stencil_mask&&(K.stencilMask(te),R.stencil_mask=te);Zd=C[0];Bd=C[1];$d=C[2];if(Zd!==va[0]||Bd!==va[1]||$d!==va[2])K.stencilFunc(Zd,Bd,$d),va[0]=Zd,va[1]=Bd,va[2]=$d;ld=Hb[0];ad=Hb[1];pd=Hb[2];Lc=Hb[3];if(ld!==ga[0]||ad!==ga[1]||pd!==ga[2]||Lc!==ga[3])K.stencilOpSeparate(ld,ad,pd,Lc),ga[0]=ld,ga[1]=ad,ga[2]=pd,ga[3]=Lc;nd=Ba[0];Gc=Ba[1];ed=Ba[2];Pc=Ba[3];if(nd!==xd[0]||Gc!==xd[1]||ed!==xd[2]||Pc!==xd[3])K.stencilOpSeparate(nd,Gc,ed,Pc),xd[0]=nd,xd[1]=Gc,xd[2]=ed,xd[3]=Pc}K.blendColor(0,0,0,
0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;K.enable(3042);R.blend_enable=!0;K.blendEquationSeparate(32774,32774);za[0]=32774;za[1]=32774;K.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;K.enable(3089);R.scissor_enable=!0;K.disable(2960);R.stencil_enable=!1;if(I=R.profile)b=performance.now(),ba.count+=q;K.useProgram(T.program);p=h.angle_instanced_arrays;var kd,Bb,Fb,vc,xb;aa.setVAO(null);kd=Y.location;Bb=Dc[kd];Bb.buffer||K.enableVertexAttribArray(kd);if(5126!==Bb.type||1!==Bb.size||
Bb.buffer!==e||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)K.bindBuffer(34962,e.buffer),K.vertexAttribPointer(kd,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=e,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(p.vertexAttribDivisorANGLE(kd,0),Bb.divisor=0);Fb=D.location;vc=Dc[Fb];vc.buffer||K.enableVertexAttribArray(Fb);if(5126!==vc.type||1!==vc.size||vc.buffer!==l||!1!==vc.normalized||4!==vc.offset||8!==vc.stride)K.bindBuffer(34962,l.buffer),K.vertexAttribPointer(Fb,1,5126,!1,8,4),
vc.type=5126,vc.size=1,vc.buffer=l,vc.normalized=!1,vc.offset=4,vc.stride=8;0!==vc.divisor&&(p.vertexAttribDivisorANGLE(Fb,0),vc.divisor=0);(xb=O.elements)?K.bindBuffer(34963,xb.buffer.buffer):aa.currentVAO&&(xb=E.getElements(aa.currentVAO.elements))&&K.bindBuffer(34963,xb.buffer.buffer);for(J=0;J<q;++J){w=c[J];var yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,ha,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd;yc=w.viewport;Cb=yc.x|0;Jc=yc.y|0;lc="width"in yc?yc.width|0:ea.framebufferWidth-Cb;Hc="height"in yc?yc.height|0:ea.framebufferHeight-Jc;Wc=ea.viewportWidth;ea.viewportWidth=lc;Vc=ea.viewportHeight;ea.viewportHeight=Hc;K.viewport(Cb,Jc,lc,Hc);sa[0]=Cb;sa[1]=Jc;sa[2]=lc;sa[3]=Hc;(Ec=z.call(this,
ea,w,J))?K.enable(2929):K.disable(2929);R.depth_enable=Ec;dc=w.viewport;Ic=dc.x|0;oc=dc.y|0;pc="width"in dc?dc.width|0:ea.framebufferWidth-Ic;mc="height"in dc?dc.height|0:ea.framebufferHeight-oc;K.scissor(Ic,oc,pc,mc);n[0]=Ic;n[1]=oc;n[2]=pc;n[3]=mc;oa.buffer=w.positionBuffer;ec=!1;Ua=null;qc=0;yb=!1;Nb=db=0;bb=1;ob=0;Va=5126;rc=Jb=Ib=gd=0;Ca(oa)?(ec=!0,Ua=W.createStream(34962,oa),Va=Ua.dtype):(Ua=W.getBuffer(oa))?Va=Ua.dtype:"constant"in oa?(bb=2,"number"===typeof oa.constant?(Ib=oa.constant,Jb=
rc=gd=0):(Ib=0<oa.constant.length?oa.constant[0]:0,Jb=1<oa.constant.length?oa.constant[1]:0,rc=2<oa.constant.length?oa.constant[2]:0,gd=3<oa.constant.length?oa.constant[3]:0)):(Ua=Ca(oa.buffer)?W.createStream(34962,oa.buffer):W.getBuffer(oa.buffer),Va="type"in oa?Da[oa.type]:Ua.dtype,yb=!!oa.normalized,Nb=oa.size|0,db=oa.offset|0,ob=oa.stride|0,qc=oa.divisor|0);Ob=ia.location;jb=Dc[Ob];if(1===bb){jb.buffer||K.enableVertexAttribArray(Ob);Gb=Nb||2;if(jb.type!==Va||jb.size!==Gb||jb.buffer!==Ua||jb.normalized!==
yb||jb.offset!==db||jb.stride!==ob)K.bindBuffer(34962,Ua.buffer),K.vertexAttribPointer(Ob,Gb,Va,yb,ob,db),jb.type=Va,jb.size=Gb,jb.buffer=Ua,jb.normalized=yb,jb.offset=db,jb.stride=ob;jb.divisor!==qc&&(p.vertexAttribDivisorANGLE(Ob,qc),jb.divisor=qc)}else if(jb.buffer&&(K.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==rc||jb.w!==gd)K.vertexAttrib4f(Ob,Ib,Jb,rc,gd),jb.x=Ib,jb.y=Jb,jb.z=rc,jb.w=gd;Ea.buffer=w.positionBuffer;Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;
Ha=pb=ib=ic=0;Ca(Ea)?(Db=!0,wb=W.createStream(34962,Ea),zb=wb.dtype):(wb=W.getBuffer(Ea))?zb=wb.dtype:"constant"in Ea?(Ra=2,"number"===typeof Ea.constant?(ib=Ea.constant,pb=Ha=ic=0):(ib=0<Ea.constant.length?Ea.constant[0]:0,pb=1<Ea.constant.length?Ea.constant[1]:0,Ha=2<Ea.constant.length?Ea.constant[2]:0,ic=3<Ea.constant.length?Ea.constant[3]:0)):(wb=Ca(Ea.buffer)?W.createStream(34962,Ea.buffer):W.getBuffer(Ea.buffer),zb="type"in Ea?Da[Ea.type]:wb.dtype,Yb=!!Ea.normalized,qb=Ea.size|0,Pb=Ea.offset|
0,Ub=Ea.stride|0,hb=Ea.divisor|0);rb=v.location;Ka=Dc[rb];if(1===Ra){Ka.buffer||K.enableVertexAttribArray(rb);fb=qb||2;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)K.bindBuffer(34962,wb.buffer),K.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(p.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(K.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==
ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==ic)K.vertexAttrib4f(rb,ib,pb,Ha,ic),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=ic;xa.buffer=w.positionFractBuffer;gb=!1;La=null;kb=0;Wa=!1;sb=tb=0;Oa=1;tc=0;Qa=5126;zd=Ma=Eb=Kb=0;Ca(xa)?(gb=!0,La=W.createStream(34962,xa),Qa=La.dtype):(La=W.getBuffer(xa))?Qa=La.dtype:"constant"in xa?(Oa=2,"number"===typeof xa.constant?(Eb=xa.constant,Ma=zd=Kb=0):(Eb=0<xa.constant.length?xa.constant[0]:0,Ma=1<xa.constant.length?xa.constant[1]:0,zd=2<xa.constant.length?xa.constant[2]:0,Kb=3<xa.constant.length?
xa.constant[3]:0)):(La=Ca(xa.buffer)?W.createStream(34962,xa.buffer):W.getBuffer(xa.buffer),Qa="type"in xa?Da[xa.type]:La.dtype,Wa=!!xa.normalized,sb=xa.size|0,tb=xa.offset|0,tc=xa.stride|0,kb=xa.divisor|0);Ya=g.location;Lb=Dc[Ya];if(1===Oa){Lb.buffer||K.enableVertexAttribArray(Ya);Mb=sb||2;if(Lb.type!==Qa||Lb.size!==Mb||Lb.buffer!==La||Lb.normalized!==Wa||Lb.offset!==tb||Lb.stride!==tc)K.bindBuffer(34962,La.buffer),K.vertexAttribPointer(Ya,Mb,Qa,Wa,tc,tb),Lb.type=Qa,Lb.size=Mb,Lb.buffer=La,Lb.normalized=
Wa,Lb.offset=tb,Lb.stride=tc;Lb.divisor!==kb&&(p.vertexAttribDivisorANGLE(Ya,kb),Lb.divisor=kb)}else if(Lb.buffer&&(K.disableVertexAttribArray(Ya),Lb.buffer=null),Lb.x!==Eb||Lb.y!==Ma||Lb.z!==zd||Lb.w!==Kb)K.vertexAttrib4f(Ya,Eb,Ma,zd,Kb),Lb.x=Eb,Lb.y=Ma,Lb.z=zd,Lb.w=Kb;ma.buffer=w.positionFractBuffer;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;fc=5126;jc=cb=wc=Bc=0;Ca(ma)?(lb=!0,Na=W.createStream(34962,ma),fc=Na.dtype):(Na=W.getBuffer(ma))?fc=Na.dtype:"constant"in ma?(Sa=2,"number"===typeof ma.constant?
(wc=ma.constant,cb=jc=Bc=0):(wc=0<ma.constant.length?ma.constant[0]:0,cb=1<ma.constant.length?ma.constant[1]:0,jc=2<ma.constant.length?ma.constant[2]:0,Bc=3<ma.constant.length?ma.constant[3]:0)):(Na=Ca(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),fc="type"in ma?Da[ma.type]:Na.dtype,Pa=!!ma.normalized,vb=ma.size|0,ub=ma.offset|0,nb=ma.stride|0,Zb=ma.divisor|0);ha=S.location;Xa=Dc[ha];if(1===Sa){Xa.buffer||K.enableVertexAttribArray(ha);Mc=vb||2;if(Xa.type!==fc||Xa.size!==Mc||Xa.buffer!==
Na||Xa.normalized!==Pa||Xa.offset!==ub||Xa.stride!==nb)K.bindBuffer(34962,Na.buffer),K.vertexAttribPointer(ha,Mc,fc,Pa,nb,ub),Xa.type=fc,Xa.size=Mc,Xa.buffer=Na,Xa.normalized=Pa,Xa.offset=ub,Xa.stride=nb;Xa.divisor!==Zb&&(p.vertexAttribDivisorANGLE(ha,Zb),Xa.divisor=Zb)}else if(Xa.buffer&&(K.disableVertexAttribArray(ha),Xa.buffer=null),Xa.x!==wc||Xa.y!==cb||Xa.z!==jc||Xa.w!==Bc)K.vertexAttrib4f(ha,wc,cb,jc,Bc),Xa.x=wc,Xa.y=cb,Xa.z=jc,Xa.w=Bc;V.buffer=w.colorBuffer;Ab=!1;Za=null;Vb=0;uc=!1;Qb=Wb=0;
Kc=1;Rb=0;pe=5126;Xc=Nc=sd=Fc=0;Ca(V)?(Ab=!0,Za=W.createStream(34962,V),pe=Za.dtype):(Za=W.getBuffer(V))?pe=Za.dtype:"constant"in V?(Kc=2,"number"===typeof V.constant?(sd=V.constant,Nc=Xc=Fc=0):(sd=0<V.constant.length?V.constant[0]:0,Nc=1<V.constant.length?V.constant[1]:0,Xc=2<V.constant.length?V.constant[2]:0,Fc=3<V.constant.length?V.constant[3]:0)):(Za=Ca(V.buffer)?W.createStream(34962,V.buffer):W.getBuffer(V.buffer),pe="type"in V?Da[V.type]:Za.dtype,uc=!!V.normalized,Qb=V.size|0,Wb=V.offset|0,
Rb=V.stride|0,Vb=V.divisor|0);td=k.location;nc=Dc[td];if(1===Kc){nc.buffer||K.enableVertexAttribArray(td);xc=Qb||4;if(nc.type!==pe||nc.size!==xc||nc.buffer!==Za||nc.normalized!==uc||nc.offset!==Wb||nc.stride!==Rb)K.bindBuffer(34962,Za.buffer),K.vertexAttribPointer(td,xc,pe,uc,Rb,Wb),nc.type=pe,nc.size=xc,nc.buffer=Za,nc.normalized=uc,nc.offset=Wb,nc.stride=Rb;nc.divisor!==Vb&&(p.vertexAttribDivisorANGLE(td,Vb),nc.divisor=Vb)}else if(nc.buffer&&(K.disableVertexAttribArray(td),nc.buffer=null),nc.x!==
sd||nc.y!==Nc||nc.z!==Xc||nc.w!==Fc)K.vertexAttrib4f(td,sd,Nc,Xc,Fc),nc.x=sd,nc.y=Nc,nc.z=Xc,nc.w=Fc;gc=w.scale;eb=gc[0];Tb=gc[1];J&&sc===eb&&Xb===Tb||(sc=eb,Xb=Tb,K.uniform2f(d.location,eb,Tb));cc=w.scaleFract;hc=cc[0];Cc=cc[1];J&&zc===hc&&bd===Cc||(zc=hc,bd=Cc,K.uniform2f(t.location,hc,Cc));Qc=w.translate;Rc=Qc[0];Yc=Qc[1];J&&Sc===Rc&&od===Yc||(Sc=Rc,od=Yc,K.uniform2f(ta.location,Rc,Yc));cd=w.translateFract;Zc=cd[0];bc=cd[1];J&&kc===Zc&&$c===bc||(kc=Zc,$c=bc,K.uniform2f(A.location,Zc,bc));Uc=w.thickness;
J&&dd===Uc||(dd=Uc,K.uniform1f(a.location,Uc));Ac=w.depth;J&&hd===Ac||(hd=Ac,K.uniform1f(x.location,Ac));Nd=Q.call(this,ea,w,J);wd=Nd[0];id=Nd[1];Od=Nd[2];ce=Nd[3];J&&ue===wd&&Ce===id&&ge===Od&&Pd===ce||(ue=wd,Ce=id,ge=Od,Pd=ce,K.uniform4f(ja.location,wd,id,Od,ce));Jd=w.dashLength;J&&Hd===Jd||(Hd=Jd,K.uniform1f(X.location,Jd));md=w.opacity;J&&Tc===md||(Tc=md,K.uniform1f(F.location,md));(ud=w.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);rd=ud._texture;K.uniform1i(f.location,rd.bind());
jd=w.count;0<jd?xb?p.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),jd):p.drawArraysInstancedANGLE(5,0,4,jd):0>jd&&(xb?K.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):K.drawArrays(5,0,4));ea.viewportWidth=Wc;ea.viewportHeight=Vc;ec&&W.destroyStream(Ua);Db&&W.destroyStream(wb);gb&&W.destroyStream(La);lb&&W.destroyStream(Na);Ab&&W.destroyStream(Za);rd.unbind()}R.dirty=!0;aa.setVAO(null);I&&(ba.cpuTime+=performance.now()-b)},draw:function(c){var q,r,I,b,J,w,P,u,z,m,y,H,qa,wa,Q,G,B,T,U,
ca,Z,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,ha,Ya,Lb,Mb,lb,Na,Zb,Pa,ub;q=N.next;q!==N.cur&&(q?K.bindFramebuffer(36160,q.framebuffer):K.bindFramebuffer(36160,null),N.cur=q);if(R.dirty){var vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb;vb=ra.dither;vb!==
R.dither&&(vb?K.enable(3024):K.disable(3024),R.dither=vb);Sa=ra.depth_func;Sa!==R.depth_func&&(K.depthFunc(Sa),R.depth_func=Sa);nb=pa[0];fc=pa[1];if(nb!==ya[0]||fc!==ya[1])K.depthRange(nb,fc),ya[0]=nb,ya[1]=fc;Bc=ra.depth_mask;Bc!==R.depth_mask&&(K.depthMask(Bc),R.depth_mask=Bc);wc=Aa[0];cb=Aa[1];jc=Aa[2];qd=Aa[3];if(wc!==ka[0]||cb!==ka[1]||jc!==ka[2]||qd!==ka[3])K.colorMask(wc,cb,jc,qd),ka[0]=wc,ka[1]=cb,ka[2]=jc,ka[3]=qd;Xa=ra.cull_enable;Xa!==R.cull_enable&&(Xa?K.enable(2884):K.disable(2884),R.cull_enable=
Xa);Mc=ra.cull_face;Mc!==R.cull_face&&(K.cullFace(Mc),R.cull_face=Mc);Ab=ra.frontFace;Ab!==R.frontFace&&(K.frontFace(Ab),R.frontFace=Ab);Za=ra.lineWidth;Za!==R.lineWidth&&(K.lineWidth(Za),R.lineWidth=Za);Vb=ra.polygonOffset_enable;Vb!==R.polygonOffset_enable&&(Vb?K.enable(32823):K.disable(32823),R.polygonOffset_enable=Vb);uc=Ja[0];Wb=Ja[1];if(uc!==na[0]||Wb!==na[1])K.polygonOffset(uc,Wb),na[0]=uc,na[1]=Wb;Qb=ra.sample_alpha;Qb!==R.sample_alpha&&(Qb?K.enable(32926):K.disable(32926),R.sample_alpha=
Qb);Kc=ra.sample_enable;Kc!==R.sample_enable&&(Kc?K.enable(32928):K.disable(32928),R.sample_enable=Kc);Rb=$a[0];pe=$a[1];if(Rb!==Ta[0]||pe!==Ta[1])K.sampleCoverage(Rb,pe),Ta[0]=Rb,Ta[1]=pe;Fc=ra.stencil_mask;Fc!==R.stencil_mask&&(K.stencilMask(Fc),R.stencil_mask=Fc);sd=C[0];Nc=C[1];Xc=C[2];if(sd!==va[0]||Nc!==va[1]||Xc!==va[2])K.stencilFunc(sd,Nc,Xc),va[0]=sd,va[1]=Nc,va[2]=Xc;td=Hb[0];nc=Hb[1];xc=Hb[2];gc=Hb[3];if(td!==ga[0]||nc!==ga[1]||xc!==ga[2]||gc!==ga[3])K.stencilOpSeparate(td,nc,xc,gc),ga[0]=
td,ga[1]=nc,ga[2]=xc,ga[3]=gc;eb=Ba[0];sc=Ba[1];Tb=Ba[2];Xb=Ba[3];if(eb!==xd[0]||sc!==xd[1]||Tb!==xd[2]||Xb!==xd[3])K.stencilOpSeparate(eb,sc,Tb,Xb),xd[0]=eb,xd[1]=sc,xd[2]=Tb,xd[3]=Xb}r=c.viewport;I=r.x|0;b=r.y|0;J="width"in r?r.width|0:ea.framebufferWidth-I;w="height"in r?r.height|0:ea.framebufferHeight-b;P=ea.viewportWidth;ea.viewportWidth=J;u=ea.viewportHeight;ea.viewportHeight=w;K.viewport(I,b,J,w);sa[0]=I;sa[1]=b;sa[2]=J;sa[3]=w;K.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;K.enable(3042);
R.blend_enable=!0;K.blendEquationSeparate(32774,32774);za[0]=32774;za[1]=32774;K.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(z=M.call(this,ea,c,0))?K.enable(2929):K.disable(2929);R.depth_enable=z;m=c.viewport;y=m.x|0;H=m.y|0;qa="width"in m?m.width|0:ea.framebufferWidth-y;wa="height"in m?m.height|0:ea.framebufferHeight-H;K.scissor(y,H,qa,wa);n[0]=y;n[1]=H;n[2]=qa;n[3]=wa;K.enable(3089);R.scissor_enable=!0;K.disable(2960);R.stencil_enable=!1;if(Q=R.profile)G=performance.now(),
ba.count++;K.useProgram(L.program);B=h.angle_instanced_arrays;aa.setVAO(null);oa.buffer=c.positionBuffer;T=!1;U=null;ca=0;Z=!1;Ye=Md=0;$e=1;Re=0;Gd=5126;Bd=Zd=te=Ae=0;Ca(oa)?(T=!0,U=W.createStream(34962,oa),Gd=U.dtype):(U=W.getBuffer(oa))?Gd=U.dtype:"constant"in oa?($e=2,"number"===typeof oa.constant?(te=oa.constant,Zd=Bd=Ae=0):(te=0<oa.constant.length?oa.constant[0]:0,Zd=1<oa.constant.length?oa.constant[1]:0,Bd=2<oa.constant.length?oa.constant[2]:0,Ae=3<oa.constant.length?oa.constant[3]:0)):(U=Ca(oa.buffer)?
W.createStream(34962,oa.buffer):W.getBuffer(oa.buffer),Gd="type"in oa?Da[oa.type]:U.dtype,Z=!!oa.normalized,Ye=oa.size|0,Md=oa.offset|0,Re=oa.stride|0,ca=oa.divisor|0);$d=ia.location;ld=Dc[$d];if(1===$e){ld.buffer||K.enableVertexAttribArray($d);ad=Ye||2;if(ld.type!==Gd||ld.size!==ad||ld.buffer!==U||ld.normalized!==Z||ld.offset!==Md||ld.stride!==Re)K.bindBuffer(34962,U.buffer),K.vertexAttribPointer($d,ad,Gd,Z,Re,Md),ld.type=Gd,ld.size=ad,ld.buffer=U,ld.normalized=Z,ld.offset=Md,ld.stride=Re;ld.divisor!==
ca&&(B.vertexAttribDivisorANGLE($d,ca),ld.divisor=ca)}else if(ld.buffer&&(K.disableVertexAttribArray($d),ld.buffer=null),ld.x!==te||ld.y!==Zd||ld.z!==Bd||ld.w!==Ae)K.vertexAttrib4f($d,te,Zd,Bd,Ae),ld.x=te,ld.y=Zd,ld.z=Bd,ld.w=Ae;Ea.buffer=c.positionBuffer;pd=!1;Lc=null;nd=0;Gc=!1;Pc=ed=0;kd=1;Bb=0;Fb=5126;Cb=yc=xb=vc=0;Ca(Ea)?(pd=!0,Lc=W.createStream(34962,Ea),Fb=Lc.dtype):(Lc=W.getBuffer(Ea))?Fb=Lc.dtype:"constant"in Ea?(kd=2,"number"===typeof Ea.constant?(xb=Ea.constant,yc=Cb=vc=0):(xb=0<Ea.constant.length?
Ea.constant[0]:0,yc=1<Ea.constant.length?Ea.constant[1]:0,Cb=2<Ea.constant.length?Ea.constant[2]:0,vc=3<Ea.constant.length?Ea.constant[3]:0)):(Lc=Ca(Ea.buffer)?W.createStream(34962,Ea.buffer):W.getBuffer(Ea.buffer),Fb="type"in Ea?Da[Ea.type]:Lc.dtype,Gc=!!Ea.normalized,Pc=Ea.size|0,ed=Ea.offset|0,Bb=Ea.stride|0,nd=Ea.divisor|0);Jc=v.location;lc=Dc[Jc];if(1===kd){lc.buffer||K.enableVertexAttribArray(Jc);Hc=Pc||2;if(lc.type!==Fb||lc.size!==Hc||lc.buffer!==Lc||lc.normalized!==Gc||lc.offset!==ed||lc.stride!==
Bb)K.bindBuffer(34962,Lc.buffer),K.vertexAttribPointer(Jc,Hc,Fb,Gc,Bb,ed),lc.type=Fb,lc.size=Hc,lc.buffer=Lc,lc.normalized=Gc,lc.offset=ed,lc.stride=Bb;lc.divisor!==nd&&(B.vertexAttribDivisorANGLE(Jc,nd),lc.divisor=nd)}else if(lc.buffer&&(K.disableVertexAttribArray(Jc),lc.buffer=null),lc.x!==xb||lc.y!==yc||lc.z!==Cb||lc.w!==vc)K.vertexAttrib4f(Jc,xb,yc,Cb,vc),lc.x=xb,lc.y=yc,lc.z=Cb,lc.w=vc;xa.buffer=c.positionFractBuffer;Wc=!1;Vc=null;Ec=0;dc=!1;oc=Ic=0;pc=1;mc=0;ec=5126;db=yb=qc=Ua=0;Ca(xa)?(Wc=
!0,Vc=W.createStream(34962,xa),ec=Vc.dtype):(Vc=W.getBuffer(xa))?ec=Vc.dtype:"constant"in xa?(pc=2,"number"===typeof xa.constant?(qc=xa.constant,yb=db=Ua=0):(qc=0<xa.constant.length?xa.constant[0]:0,yb=1<xa.constant.length?xa.constant[1]:0,db=2<xa.constant.length?xa.constant[2]:0,Ua=3<xa.constant.length?xa.constant[3]:0)):(Vc=Ca(xa.buffer)?W.createStream(34962,xa.buffer):W.getBuffer(xa.buffer),ec="type"in xa?Da[xa.type]:Vc.dtype,dc=!!xa.normalized,oc=xa.size|0,Ic=xa.offset|0,mc=xa.stride|0,Ec=xa.divisor|
0);Nb=g.location;bb=Dc[Nb];if(1===pc){bb.buffer||K.enableVertexAttribArray(Nb);ob=oc||2;if(bb.type!==ec||bb.size!==ob||bb.buffer!==Vc||bb.normalized!==dc||bb.offset!==Ic||bb.stride!==mc)K.bindBuffer(34962,Vc.buffer),K.vertexAttribPointer(Nb,ob,ec,dc,mc,Ic),bb.type=ec,bb.size=ob,bb.buffer=Vc,bb.normalized=dc,bb.offset=Ic,bb.stride=mc;bb.divisor!==Ec&&(B.vertexAttribDivisorANGLE(Nb,Ec),bb.divisor=Ec)}else if(bb.buffer&&(K.disableVertexAttribArray(Nb),bb.buffer=null),bb.x!==qc||bb.y!==yb||bb.z!==db||
bb.w!==Ua)K.vertexAttrib4f(Nb,qc,yb,db,Ua),bb.x=qc,bb.y=yb,bb.z=db,bb.w=Ua;ma.buffer=c.positionFractBuffer;Va=!1;gd=null;Ib=0;Jb=!1;Ob=rc=0;jb=1;Gb=0;Db=5126;Pb=Yb=hb=wb=0;Ca(ma)?(Va=!0,gd=W.createStream(34962,ma),Db=gd.dtype):(gd=W.getBuffer(ma))?Db=gd.dtype:"constant"in ma?(jb=2,"number"===typeof ma.constant?(hb=ma.constant,Yb=Pb=wb=0):(hb=0<ma.constant.length?ma.constant[0]:0,Yb=1<ma.constant.length?ma.constant[1]:0,Pb=2<ma.constant.length?ma.constant[2]:0,wb=3<ma.constant.length?ma.constant[3]:
0)):(gd=Ca(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),Db="type"in ma?Da[ma.type]:gd.dtype,Jb=!!ma.normalized,Ob=ma.size|0,rc=ma.offset|0,Gb=ma.stride|0,Ib=ma.divisor|0);qb=S.location;Ra=Dc[qb];if(1===jb){Ra.buffer||K.enableVertexAttribArray(qb);Ub=Ob||2;if(Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==gd||Ra.normalized!==Jb||Ra.offset!==rc||Ra.stride!==Gb)K.bindBuffer(34962,gd.buffer),K.vertexAttribPointer(qb,Ub,Db,Jb,Gb,rc),Ra.type=Db,Ra.size=Ub,Ra.buffer=gd,Ra.normalized=Jb,Ra.offset=
rc,Ra.stride=Gb;Ra.divisor!==Ib&&(B.vertexAttribDivisorANGLE(qb,Ib),Ra.divisor=Ib)}else if(Ra.buffer&&(K.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Yb||Ra.z!==Pb||Ra.w!==wb)K.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ra.x=hb,Ra.y=Yb,Ra.z=Pb,Ra.w=wb;V.buffer=c.colorBuffer;zb=!1;ic=null;ib=0;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Wa=kb=La=0;Ca(V)?(zb=!0,ic=W.createStream(34962,V),gb=ic.dtype):(ic=W.getBuffer(V))?gb=ic.dtype:"constant"in V?(Ka=2,"number"===typeof V.constant?(kb=V.constant,Wa=tb=
La=0):(kb=0<V.constant.length?V.constant[0]:0,Wa=1<V.constant.length?V.constant[1]:0,tb=2<V.constant.length?V.constant[2]:0,La=3<V.constant.length?V.constant[3]:0)):(ic=Ca(V.buffer)?W.createStream(34962,V.buffer):W.getBuffer(V.buffer),gb="type"in V?Da[V.type]:ic.dtype,pb=!!V.normalized,rb=V.size|0,Ha=V.offset|0,fb=V.stride|0,ib=V.divisor|0);sb=k.location;Oa=Dc[sb];if(1===Ka){Oa.buffer||K.enableVertexAttribArray(sb);tc=rb||4;if(Oa.type!==gb||Oa.size!==tc||Oa.buffer!==ic||Oa.normalized!==pb||Oa.offset!==
Ha||Oa.stride!==fb)K.bindBuffer(34962,ic.buffer),K.vertexAttribPointer(sb,tc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=tc,Oa.buffer=ic,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb;Oa.divisor!==ib&&(B.vertexAttribDivisorANGLE(sb,ib),Oa.divisor=ib)}else if(Oa.buffer&&(K.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Wa||Oa.z!==tb||Oa.w!==La)K.vertexAttrib4f(sb,kb,Wa,tb,La),Oa.x=kb,Oa.y=Wa,Oa.z=tb,Oa.w=La;Qa=Y.location;Kb=Dc[Qa];Kb.buffer||K.enableVertexAttribArray(Qa);if(5126!==Kb.type||1!==Kb.size||
Kb.buffer!==e||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)K.bindBuffer(34962,e.buffer),K.vertexAttribPointer(Qa,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=e,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(B.vertexAttribDivisorANGLE(Qa,0),Kb.divisor=0);Eb=D.location;Ma=Dc[Eb];Ma.buffer||K.enableVertexAttribArray(Eb);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==l||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)K.bindBuffer(34962,l.buffer),K.vertexAttribPointer(Eb,1,5126,!1,8,4),
Ma.type=5126,Ma.size=1,Ma.buffer=l,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(B.vertexAttribDivisorANGLE(Eb,0),Ma.divisor=0);ha=c.scale;K.uniform2f(d.location,ha[0],ha[1]);Ya=c.scaleFract;K.uniform2f(t.location,Ya[0],Ya[1]);Lb=c.translate;K.uniform2f(ta.location,Lb[0],Lb[1]);Mb=c.translateFract;K.uniform2f(A.location,Mb[0],Mb[1]);K.uniform1f(a.location,c.thickness);K.uniform1f(x.location,c.depth);lb=p.call(this,ea,c,0);K.uniform4f(ja.location,lb[0],lb[1],lb[2],lb[3]);K.uniform1f(X.location,
c.dashLength);K.uniform1f(F.location,c.opacity);(Na=c.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);Zb=Na._texture;K.uniform1i(f.location,Zb.bind());(Pa=O.elements)?K.bindBuffer(34963,Pa.buffer.buffer):aa.currentVAO&&(Pa=E.getElements(aa.currentVAO.elements))&&K.bindBuffer(34963,Pa.buffer.buffer);ub=c.count;0<ub?Pa?B.drawElementsInstancedANGLE(5,4,Pa.type,0<<(Pa.type-5121>>1),ub):B.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Pa?K.drawElements(5,4,Pa.type,0<<(Pa.type-5121>>1)):K.drawArrays(5,
0,4));R.dirty=!0;aa.setVAO(null);ea.viewportWidth=P;ea.viewportHeight=u;Q&&(ba.cpuTime+=performance.now()-G);T&&W.destroyStream(U);pd&&W.destroyStream(Lc);Wc&&W.destroyStream(Vc);Va&&W.destroyStream(gd);zb&&W.destroyStream(ic);Zb.unbind()},scope:function(a,d,h){var f,g,k,n,C,p,b,t,na,v,x,A,sa,Ja,$a,E,fa,ga,D,K,L,F,va,N,aa,z,M,S,Q,T,ka,Ta,X,ya,pa,Ba,Aa,Hb,ia,la,Y,ta,ja,za,xd,Dc,Z,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,
gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,ha,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ab,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe;f=a.viewport;g=f.x|0;k=f.y|0;n="width"in f?f.width|0:ea.framebufferWidth-g;C="height"in f?f.height|
0:ea.framebufferHeight-k;p=ea.viewportWidth;ea.viewportWidth=n;b=ea.viewportHeight;ea.viewportHeight=C;t=I[0];I[0]=g;na=I[1];I[1]=k;v=I[2];I[2]=n;x=I[3];I[3]=C;A=P[0];P[0]=0;sa=P[1];P[1]=0;Ja=P[2];P[2]=0;$a=P[3];P[3]=0;E=ra.blend_enable;ra.blend_enable=!0;fa=qa[0];qa[0]=32774;ga=qa[1];qa[1]=32774;D=wa[0];wa[0]=770;K=wa[1];wa[1]=771;L=wa[2];wa[2]=773;F=wa[3];wa[3]=1;va=c.call(this,ea,a,h);N=ra.depth_enable;ra.depth_enable=va;aa=a.viewport;z=aa.x|0;M=aa.y|0;S="width"in aa?aa.width|0:ea.framebufferWidth-
z;Q="height"in aa?aa.height|0:ea.framebufferHeight-M;T=q[0];q[0]=z;ka=q[1];q[1]=M;Ta=q[2];q[2]=S;X=q[3];q[3]=Q;ya=ra.scissor_enable;ra.scissor_enable=!0;pa=ra.stencil_enable;ra.stencil_enable=!1;if(Ba=R.profile)Aa=performance.now(),ba.count++;Hb=O.offset;O.offset=0;ia=O.count;O.count=4;la=a.count;Y=O.instances;O.instances=la;ta=O.primitive;O.primitive=5;ja=a.dashLength;za=J[23];J[23]=ja;xd=a.dashTexture;Dc=J[24];J[24]=xd;Z=a.depth;Wc=J[22];J[22]=Z;Vc=a.id;Ec=J[31];J[31]=Vc;dc=a.miterLimit;Ic=J[32];
J[32]=dc;oc=G.call(this,ea,a,h);pc=J[33];J[33]=oc;mc=a.opacity;ec=J[10];J[10]=mc;Ua=ea.pixelRatio;qc=J[34];J[34]=Ua;yb=a.scale;db=J[6];J[6]=yb;Nb=a.scaleFract;bb=J[7];J[7]=Nb;ob=a.thickness;Va=J[21];J[21]=ob;gd=a.translate;Ib=J[8];J[8]=gd;Jb=a.translateFract;rc=J[9];J[9]=Jb;Ob=H.call(this,ea,a,h);jb=J[3];J[3]=Ob;oa.buffer=a.positionBuffer;Gb=!1;Db=null;wb=0;hb=!1;Pb=Yb=0;qb=1;Ra=0;Ub=5126;pb=ib=ic=zb=0;Ca(oa)?(Gb=!0,Db=W.createStream(34962,oa),Ub=Db.dtype):(Db=W.getBuffer(oa))?Ub=Db.dtype:"constant"in
oa?(qb=2,"number"===typeof oa.constant?(ic=oa.constant,ib=pb=zb=0):(ic=0<oa.constant.length?oa.constant[0]:0,ib=1<oa.constant.length?oa.constant[1]:0,pb=2<oa.constant.length?oa.constant[2]:0,zb=3<oa.constant.length?oa.constant[3]:0)):(Db=Ca(oa.buffer)?W.createStream(34962,oa.buffer):W.getBuffer(oa.buffer),Ub="type"in oa?Da[oa.type]:Db.dtype,hb=!!oa.normalized,Pb=oa.size|0,Yb=oa.offset|0,Ra=oa.stride|0,wb=oa.divisor|0);Ha=B.buffer;B.buffer=Db;rb=B.divisor;B.divisor=wb;Ka=B.normalized;B.normalized=
hb;fb=B.offset;B.offset=Yb;gb=B.size;B.size=Pb;La=B.state;B.state=qb;kb=B.stride;B.stride=Ra;Wa=B.type;B.type=Ub;tb=B.w;B.w=zb;sb=B.x;B.x=ic;Oa=B.y;B.y=ib;tc=B.z;B.z=pb;xa.buffer=a.positionFractBuffer;Qa=!1;Kb=null;Eb=0;Ma=!1;Ya=ha=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;Ca(xa)?(Qa=!0,Kb=W.createStream(34962,xa),lb=Kb.dtype):(Kb=W.getBuffer(xa))?lb=Kb.dtype:"constant"in xa?(Lb=2,"number"===typeof xa.constant?(Zb=xa.constant,Pa=ub=Na=0):(Zb=0<xa.constant.length?xa.constant[0]:0,Pa=1<xa.constant.length?xa.constant[1]:
0,ub=2<xa.constant.length?xa.constant[2]:0,Na=3<xa.constant.length?xa.constant[3]:0)):(Kb=Ca(xa.buffer)?W.createStream(34962,xa.buffer):W.getBuffer(xa.buffer),lb="type"in xa?Da[xa.type]:Kb.dtype,Ma=!!xa.normalized,Ya=xa.size|0,ha=xa.offset|0,Mb=xa.stride|0,Eb=xa.divisor|0);vb=U.buffer;U.buffer=Kb;Sa=U.divisor;U.divisor=Eb;nb=U.normalized;U.normalized=Ma;fc=U.offset;U.offset=ha;Bc=U.size;U.size=Ya;wc=U.state;U.state=Lb;cb=U.stride;U.stride=Mb;jc=U.type;U.type=lb;qd=U.w;U.w=Na;Xa=U.x;U.x=Zb;Mc=U.y;
U.y=Pa;Ab=U.z;U.z=ub;Ea.buffer=a.positionBuffer;Za=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;pe=0;Fc=5126;td=Xc=Nc=sd=0;Ca(Ea)?(Za=!0,Vb=W.createStream(34962,Ea),Fc=Vb.dtype):(Vb=W.getBuffer(Ea))?Fc=Vb.dtype:"constant"in Ea?(Rb=2,"number"===typeof Ea.constant?(Nc=Ea.constant,Xc=td=sd=0):(Nc=0<Ea.constant.length?Ea.constant[0]:0,Xc=1<Ea.constant.length?Ea.constant[1]:0,td=2<Ea.constant.length?Ea.constant[2]:0,sd=3<Ea.constant.length?Ea.constant[3]:0)):(Vb=Ca(Ea.buffer)?W.createStream(34962,Ea.buffer):W.getBuffer(Ea.buffer),
Fc="type"in Ea?Da[Ea.type]:Vb.dtype,Wb=!!Ea.normalized,Kc=Ea.size|0,Qb=Ea.offset|0,pe=Ea.stride|0,uc=Ea.divisor|0);nc=m.buffer;m.buffer=Vb;xc=m.divisor;m.divisor=uc;gc=m.normalized;m.normalized=Wb;eb=m.offset;m.offset=Qb;sc=m.size;m.size=Kc;Tb=m.state;m.state=Rb;Xb=m.stride;m.stride=pe;cc=m.type;m.type=Fc;hc=m.w;m.w=sd;zc=m.x;m.x=Nc;Cc=m.y;m.y=Xc;bd=m.z;m.z=td;ma.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Sc=0;Yc=!1;cd=od=0;Zc=1;kc=0;bc=5126;Ac=dd=Uc=$c=0;Ca(ma)?(Qc=!0,Rc=W.createStream(34962,ma),
bc=Rc.dtype):(Rc=W.getBuffer(ma))?bc=Rc.dtype:"constant"in ma?(Zc=2,"number"===typeof ma.constant?(Uc=ma.constant,dd=Ac=$c=0):(Uc=0<ma.constant.length?ma.constant[0]:0,dd=1<ma.constant.length?ma.constant[1]:0,Ac=2<ma.constant.length?ma.constant[2]:0,$c=3<ma.constant.length?ma.constant[3]:0)):(Rc=Ca(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),bc="type"in ma?Da[ma.type]:Rc.dtype,Yc=!!ma.normalized,cd=ma.size|0,od=ma.offset|0,kc=ma.stride|0,Sc=ma.divisor|0);hd=u.buffer;u.buffer=
Rc;Nd=u.divisor;u.divisor=Sc;wd=u.normalized;u.normalized=Yc;ue=u.offset;u.offset=od;id=u.size;u.size=cd;Ce=u.state;u.state=Zc;Od=u.stride;u.stride=kc;ge=u.type;u.type=bc;ce=u.w;u.w=$c;Pd=u.x;u.x=Uc;Jd=u.y;u.y=dd;Hd=u.z;u.z=Ac;V.buffer=a.colorBuffer;md=!1;Tc=null;ud=0;rd=!1;vd=jd=0;Cd=1;Fd=0;je=5126;ke=le=Fe=ab=0;Ca(V)?(md=!0,Tc=W.createStream(34962,V),je=Tc.dtype):(Tc=W.getBuffer(V))?je=Tc.dtype:"constant"in V?(Cd=2,"number"===typeof V.constant?(Fe=V.constant,le=ke=ab=0):(Fe=0<V.constant.length?
V.constant[0]:0,le=1<V.constant.length?V.constant[1]:0,ke=2<V.constant.length?V.constant[2]:0,ab=3<V.constant.length?V.constant[3]:0)):(Tc=Ca(V.buffer)?W.createStream(34962,V.buffer):W.getBuffer(V.buffer),je="type"in V?Da[V.type]:Tc.dtype,rd=!!V.normalized,vd=V.size|0,jd=V.offset|0,Fd=V.stride|0,ud=V.divisor|0);he=y.buffer;y.buffer=Tc;ve=y.divisor;y.divisor=ud;de=y.normalized;y.normalized=rd;me=y.offset;y.offset=jd;Oc=y.size;y.size=vd;fd=y.state;y.state=Cd;we=y.stride;y.stride=Fd;qe=y.type;y.type=
je;Kd=y.w;y.w=ab;Qd=y.x;y.x=Fe;Sd=y.y;y.y=le;Td=y.z;y.z=ke;ne=ca.buffer;ca.buffer=e;Ge=ca.divisor;ca.divisor=0;Be=ca.normalized;ca.normalized=!1;se=ca.offset;ca.offset=0;Se=ca.size;ca.size=0;Te=ca.state;ca.state=1;Oe=ca.stride;ca.stride=8;xe=ca.type;ca.type=5126;He=ca.w;ca.w=0;Je=ca.x;ca.x=0;Ke=ca.y;ca.y=0;Le=ca.z;ca.z=0;Ie=w.buffer;w.buffer=l;Ld=w.divisor;w.divisor=0;Xd=w.normalized;w.normalized=!1;be=w.offset;w.offset=4;ee=w.size;w.size=0;Me=w.state;w.state=1;Id=w.stride;w.stride=8;Ud=w.type;w.type=
5126;De=w.w;w.w=0;Ne=w.x;w.x=0;hf=w.y;w.y=0;bf=w.z;w.z=0;Ue=r.vert;r.vert=20;Pe=r.frag;r.frag=19;R.dirty=!0;d(ea,a,h);ea.viewportWidth=p;ea.viewportHeight=b;I[0]=t;I[1]=na;I[2]=v;I[3]=x;P[0]=A;P[1]=sa;P[2]=Ja;P[3]=$a;ra.blend_enable=E;qa[0]=fa;qa[1]=ga;wa[0]=D;wa[1]=K;wa[2]=L;wa[3]=F;ra.depth_enable=N;q[0]=T;q[1]=ka;q[2]=Ta;q[3]=X;ra.scissor_enable=ya;ra.stencil_enable=pa;Ba&&(ba.cpuTime+=performance.now()-Aa);O.offset=Hb;O.count=ia;O.instances=Y;O.primitive=ta;J[23]=za;J[24]=Dc;J[22]=Wc;J[31]=Ec;
J[32]=Ic;J[33]=pc;J[10]=ec;J[34]=qc;J[6]=db;J[7]=bb;J[21]=Va;J[8]=Ib;J[9]=rc;J[3]=jb;Gb&&W.destroyStream(Db);B.buffer=Ha;B.divisor=rb;B.normalized=Ka;B.offset=fb;B.size=gb;B.state=La;B.stride=kb;B.type=Wa;B.w=tb;B.x=sb;B.y=Oa;B.z=tc;Qa&&W.destroyStream(Kb);U.buffer=vb;U.divisor=Sa;U.normalized=nb;U.offset=fc;U.size=Bc;U.state=wc;U.stride=cb;U.type=jc;U.w=qd;U.x=Xa;U.y=Mc;U.z=Ab;Za&&W.destroyStream(Vb);m.buffer=nc;m.divisor=xc;m.normalized=gc;m.offset=eb;m.size=sc;m.state=Tb;m.stride=Xb;m.type=cc;
m.w=hc;m.x=zc;m.y=Cc;m.z=bd;Qc&&W.destroyStream(Rc);u.buffer=hd;u.divisor=Nd;u.normalized=wd;u.offset=ue;u.size=id;u.state=Ce;u.stride=Od;u.type=ge;u.w=ce;u.x=Pd;u.y=Jd;u.z=Hd;md&&W.destroyStream(Tc);y.buffer=he;y.divisor=ve;y.normalized=de;y.offset=me;y.size=Oc;y.state=fd;y.stride=we;y.type=qe;y.w=Kd;y.x=Qd;y.y=Sd;y.z=Td;ca.buffer=ne;ca.divisor=Ge;ca.normalized=Be;ca.offset=se;ca.size=Se;ca.state=Te;ca.stride=Oe;ca.type=xe;ca.w=He;ca.x=Je;ca.y=Ke;ca.z=Le;w.buffer=Ie;w.divisor=Ld;w.normalized=Xd;
w.offset=be;w.size=ee;w.state=Me;w.stride=Id;w.type=Ud;w.w=De;w.x=Ne;w.y=hf;w.z=bf;r.vert=Ue;r.frag=Pe;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Dc,W,ea,R){var O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,xd,Hb,ga,I,sa,Da,oa,xa,Ea,ma,V,ua,Fa,Ia,mb,
da;O=b.attributes;E=b.buffer;h=b.context;N=b.current;K=b.draw;Ca=b.elements;ra=b.extensions;r=b.framebuffer;J=b.gl;aa=b.isBufferArgs;P=b.next;la=b.shader;qa=b.uniforms;za=b.vao;wa=P.blend_color;fa=N.blend_color;Aa=P.blend_equation;ka=N.blend_equation;pa=P.blend_func;ya=N.blend_func;Ja=P.colorMask;na=N.colorMask;$a=P.depth_range;Ta=N.depth_range;q=P.polygonOffset_offset;n=N.polygonOffset_offset;C=P.sample_coverage;va=N.sample_coverage;Ba=P.scissor_box;xd=N.scissor_box;Hb=P.stencil_func;ga=N.stencil_func;
I=P.stencil_opBack;sa=N.stencil_opBack;Da=P.stencil_opFront;oa=N.stencil_opFront;xa=P.viewport;Ea=N.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Fa={divisor:1,offset:4,stride:4};Ia={divisor:1,offset:16,stride:8};mb={divisor:1,offset:24,stride:8};da={divisor:1,offset:0,stride:8};return{batch:function(c,p){var b,w,L,u,z,m;b=r.next;b!==r.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):
J.bindFramebuffer(36160,null),r.cur=b);if(N.dirty){var xa,y,H,qa,M,wa,G,B,U,T,pa,Ba,ca,Aa,la,Z,Zd,Bd,ha,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb;xa=P.dither;xa!==N.dither&&(xa?J.enable(3024):J.disable(3024),N.dither=xa);y=P.depth_func;y!==N.depth_func&&(J.depthFunc(y),N.depth_func=y);H=$a[0];qa=$a[1];if(H!==Ta[0]||qa!==Ta[1])J.depthRange(H,qa),Ta[0]=H,Ta[1]=qa;M=P.depth_mask;M!==N.depth_mask&&(J.depthMask(M),N.depth_mask=M);wa=Ja[0];G=Ja[1];B=Ja[2];U=Ja[3];if(wa!==na[0]||G!==na[1]||B!==na[2]||U!==na[3])J.colorMask(wa,
G,B,U),na[0]=wa,na[1]=G,na[2]=B,na[3]=U;T=P.frontFace;T!==N.frontFace&&(J.frontFace(T),N.frontFace=T);pa=P.lineWidth;pa!==N.lineWidth&&(J.lineWidth(pa),N.lineWidth=pa);Ba=P.polygonOffset_enable;Ba!==N.polygonOffset_enable&&(Ba?J.enable(32823):J.disable(32823),N.polygonOffset_enable=Ba);ca=q[0];Aa=q[1];if(ca!==n[0]||Aa!==n[1])J.polygonOffset(ca,Aa),n[0]=ca,n[1]=Aa;la=P.sample_alpha;la!==N.sample_alpha&&(la?J.enable(32926):J.disable(32926),N.sample_alpha=la);Z=P.sample_enable;Z!==N.sample_enable&&(Z?
J.enable(32928):J.disable(32928),N.sample_enable=Z);Zd=C[0];Bd=C[1];if(Zd!==va[0]||Bd!==va[1])J.sampleCoverage(Zd,Bd),va[0]=Zd,va[1]=Bd;ha=P.stencil_mask;ha!==N.stencil_mask&&(J.stencilMask(ha),N.stencil_mask=ha);ld=Hb[0];ad=Hb[1];pd=Hb[2];if(ld!==ga[0]||ad!==ga[1]||pd!==ga[2])J.stencilFunc(ld,ad,pd),ga[0]=ld,ga[1]=ad,ga[2]=pd;Lc=Da[0];nd=Da[1];Gc=Da[2];ed=Da[3];if(Lc!==oa[0]||nd!==oa[1]||Gc!==oa[2]||ed!==oa[3])J.stencilOpSeparate(Lc,nd,Gc,ed),oa[0]=Lc,oa[1]=nd,oa[2]=Gc,oa[3]=ed;Pc=I[0];kd=I[1];Bb=
I[2];Fb=I[3];if(Pc!==sa[0]||kd!==sa[1]||Bb!==sa[2]||Fb!==sa[3])J.stencilOpSeparate(Pc,kd,Bb,Fb),sa[0]=Pc,sa[1]=kd,sa[2]=Bb,sa[3]=Fb}J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(w=N.profile)L=
performance.now(),ba.count+=p;J.useProgram(Q.program);u=ra.angle_instanced_arrays;var vc,xb,yc,Cb,Jc;za.setVAO(null);vc=F.location;xb=O[vc];xb.buffer||J.enableVertexAttribArray(vc);if(5126!==xb.type||1!==xb.size||xb.buffer!==e||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(vc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=e,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(u.vertexAttribDivisorANGLE(vc,0),xb.divisor=0);yc=d.location;Cb=
O[yc];Cb.buffer||J.enableVertexAttribArray(yc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==l||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(yc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=l,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(u.vertexAttribDivisorANGLE(yc,0),Cb.divisor=0);(Jc=K.elements)?J.bindBuffer(34963,Jc.buffer.buffer):za.currentVAO&&(Jc=Ca.getElements(za.currentVAO.elements))&&J.bindBuffer(34963,Jc.buffer.buffer);
for(z=0;z<p;++z){m=c[z];var lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd,wd,ue,id,ab,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc;lc=m.viewport;Hc=lc.x|0;Wc=lc.y|0;Vc="width"in
lc?lc.width|0:h.framebufferWidth-Hc;Ec="height"in lc?lc.height|0:h.framebufferHeight-Wc;dc=h.viewportWidth;h.viewportWidth=Vc;Ic=h.viewportHeight;h.viewportHeight=Ec;J.viewport(Hc,Wc,Vc,Ec);Ea[0]=Hc;Ea[1]=Wc;Ea[2]=Vc;Ea[3]=Ec;(oc=ia.call(this,h,m,z))?J.enable(2929):J.disable(2929);N.depth_enable=oc;pc=m.viewport;mc=pc.x|0;ec=pc.y|0;Ua="width"in pc?pc.width|0:h.framebufferWidth-mc;qc="height"in pc?pc.height|0:h.framebufferHeight-ec;J.scissor(mc,ec,Ua,qc);xd[0]=mc;xd[1]=ec;xd[2]=Ua;xd[3]=qc;ua.buffer=
m.positionBuffer;yb=!1;db=null;Nb=0;bb=!1;Va=ob=0;gd=1;Ib=0;Jb=5126;Gb=jb=Ob=rc=0;aa(ua)?(yb=!0,db=E.createStream(34962,ua),Jb=db.dtype):(db=E.getBuffer(ua))?Jb=db.dtype:"constant"in ua?(gd=2,"number"===typeof ua.constant?(Ob=ua.constant,jb=Gb=rc=0):(Ob=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,rc=3<ua.constant.length?ua.constant[3]:0)):(db=aa(ua.buffer)?E.createStream(34962,ua.buffer):E.getBuffer(ua.buffer),Jb="type"in
ua?ma[ua.type]:db.dtype,bb=!!ua.normalized,Va=ua.size|0,ob=ua.offset|0,Ib=ua.stride|0,Nb=ua.divisor|0);Db=k.location;wb=O[Db];if(1===gd){wb.buffer||J.enableVertexAttribArray(Db);hb=Va||2;if(wb.type!==Jb||wb.size!==hb||wb.buffer!==db||wb.normalized!==bb||wb.offset!==ob||wb.stride!==Ib)J.bindBuffer(34962,db.buffer),J.vertexAttribPointer(Db,hb,Jb,bb,Ib,ob),wb.type=Jb,wb.size=hb,wb.buffer=db,wb.normalized=bb,wb.offset=ob,wb.stride=Ib;wb.divisor!==Nb&&(u.vertexAttribDivisorANGLE(Db,Nb),wb.divisor=Nb)}else if(wb.buffer&&
(J.disableVertexAttribArray(Db),wb.buffer=null),wb.x!==Ob||wb.y!==jb||wb.z!==Gb||wb.w!==rc)J.vertexAttrib4f(Db,Ob,jb,Gb,rc),wb.x=Ob,wb.y=jb,wb.z=Gb,wb.w=rc;Ia.buffer=m.positionBuffer;Yb=!1;Pb=null;qb=0;Ra=!1;zb=Ub=0;ic=1;ib=0;pb=5126;fb=Ka=rb=Ha=0;aa(Ia)?(Yb=!0,Pb=E.createStream(34962,Ia),pb=Pb.dtype):(Pb=E.getBuffer(Ia))?pb=Pb.dtype:"constant"in Ia?(ic=2,"number"===typeof Ia.constant?(rb=Ia.constant,Ka=fb=Ha=0):(rb=0<Ia.constant.length?Ia.constant[0]:0,Ka=1<Ia.constant.length?Ia.constant[1]:0,fb=
2<Ia.constant.length?Ia.constant[2]:0,Ha=3<Ia.constant.length?Ia.constant[3]:0)):(Pb=aa(Ia.buffer)?E.createStream(34962,Ia.buffer):E.getBuffer(Ia.buffer),pb="type"in Ia?ma[Ia.type]:Pb.dtype,Ra=!!Ia.normalized,zb=Ia.size|0,Ub=Ia.offset|0,ib=Ia.stride|0,qb=Ia.divisor|0);gb=f.location;La=O[gb];if(1===ic){La.buffer||J.enableVertexAttribArray(gb);kb=zb||2;if(La.type!==pb||La.size!==kb||La.buffer!==Pb||La.normalized!==Ra||La.offset!==Ub||La.stride!==ib)J.bindBuffer(34962,Pb.buffer),J.vertexAttribPointer(gb,
kb,pb,Ra,ib,Ub),La.type=pb,La.size=kb,La.buffer=Pb,La.normalized=Ra,La.offset=Ub,La.stride=ib;La.divisor!==qb&&(u.vertexAttribDivisorANGLE(gb,qb),La.divisor=qb)}else if(La.buffer&&(J.disableVertexAttribArray(gb),La.buffer=null),La.x!==rb||La.y!==Ka||La.z!==fb||La.w!==Ha)J.vertexAttrib4f(gb,rb,Ka,fb,Ha),La.x=rb,La.y=Ka,La.z=fb,La.w=Ha;mb.buffer=m.positionBuffer;Wa=!1;tb=null;sb=0;Oa=!1;Qa=tc=0;Kb=1;Eb=0;Ma=5126;Mb=Lb=Ya=zd=0;aa(mb)?(Wa=!0,tb=E.createStream(34962,mb),Ma=tb.dtype):(tb=E.getBuffer(mb))?
Ma=tb.dtype:"constant"in mb?(Kb=2,"number"===typeof mb.constant?(Ya=mb.constant,Lb=Mb=zd=0):(Ya=0<mb.constant.length?mb.constant[0]:0,Lb=1<mb.constant.length?mb.constant[1]:0,Mb=2<mb.constant.length?mb.constant[2]:0,zd=3<mb.constant.length?mb.constant[3]:0)):(tb=aa(mb.buffer)?E.createStream(34962,mb.buffer):E.getBuffer(mb.buffer),Ma="type"in mb?ma[mb.type]:tb.dtype,Oa=!!mb.normalized,Qa=mb.size|0,tc=mb.offset|0,Eb=mb.stride|0,sb=mb.divisor|0);lb=ta.location;Na=O[lb];if(1===Kb){Na.buffer||J.enableVertexAttribArray(lb);
Zb=Qa||2;if(Na.type!==Ma||Na.size!==Zb||Na.buffer!==tb||Na.normalized!==Oa||Na.offset!==tc||Na.stride!==Eb)J.bindBuffer(34962,tb.buffer),J.vertexAttribPointer(lb,Zb,Ma,Oa,Eb,tc),Na.type=Ma,Na.size=Zb,Na.buffer=tb,Na.normalized=Oa,Na.offset=tc,Na.stride=Eb;Na.divisor!==sb&&(u.vertexAttribDivisorANGLE(lb,sb),Na.divisor=sb)}else if(Na.buffer&&(J.disableVertexAttribArray(lb),Na.buffer=null),Na.x!==Ya||Na.y!==Lb||Na.z!==Mb||Na.w!==zd)J.vertexAttrib4f(lb,Ya,Lb,Mb,zd),Na.x=Ya,Na.y=Lb,Na.z=Mb,Na.w=zd;da.buffer=
m.positionBuffer;Pa=!1;ub=null;vb=0;Sa=!1;fc=nb=0;Bc=1;wc=0;cb=5126;Mc=Xa=qd=jc=0;aa(da)?(Pa=!0,ub=E.createStream(34962,da),cb=ub.dtype):(ub=E.getBuffer(da))?cb=ub.dtype:"constant"in da?(Bc=2,"number"===typeof da.constant?(qd=da.constant,Xa=Mc=jc=0):(qd=0<da.constant.length?da.constant[0]:0,Xa=1<da.constant.length?da.constant[1]:0,Mc=2<da.constant.length?da.constant[2]:0,jc=3<da.constant.length?da.constant[3]:0)):(ub=aa(da.buffer)?E.createStream(34962,da.buffer):E.getBuffer(da.buffer),cb="type"in
da?ma[da.type]:ub.dtype,Sa=!!da.normalized,fc=da.size|0,nb=da.offset|0,wc=da.stride|0,vb=da.divisor|0);Ab=ja.location;Za=O[Ab];if(1===Bc){Za.buffer||J.enableVertexAttribArray(Ab);Vb=fc||2;if(Za.type!==cb||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==nb||Za.stride!==wc)J.bindBuffer(34962,ub.buffer),J.vertexAttribPointer(Ab,Vb,cb,Sa,wc,nb),Za.type=cb,Za.size=Vb,Za.buffer=ub,Za.normalized=Sa,Za.offset=nb,Za.stride=wc;Za.divisor!==vb&&(u.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&
(J.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==qd||Za.y!==Xa||Za.z!==Mc||Za.w!==jc)J.vertexAttrib4f(Ab,qd,Xa,Mc,jc),Za.x=qd,Za.y=Xa,Za.z=Mc,Za.w=jc;V.buffer=m.colorBuffer;uc=!1;Wb=null;Qb=0;Kc=!1;pe=Rb=0;Fc=1;sd=0;Nc=5126;xc=nc=td=Xc=0;aa(V)?(uc=!0,Wb=E.createStream(34962,V),Nc=Wb.dtype):(Wb=E.getBuffer(V))?Nc=Wb.dtype:"constant"in V?(Fc=2,"number"===typeof V.constant?(td=V.constant,nc=xc=Xc=0):(td=0<V.constant.length?V.constant[0]:0,nc=1<V.constant.length?V.constant[1]:0,xc=2<V.constant.length?
V.constant[2]:0,Xc=3<V.constant.length?V.constant[3]:0)):(Wb=aa(V.buffer)?E.createStream(34962,V.buffer):E.getBuffer(V.buffer),Nc="type"in V?ma[V.type]:Wb.dtype,Kc=!!V.normalized,pe=V.size|0,Rb=V.offset|0,sd=V.stride|0,Qb=V.divisor|0);gc=S.location;eb=O[gc];if(1===Fc){eb.buffer||J.enableVertexAttribArray(gc);sc=pe||4;if(eb.type!==Nc||eb.size!==sc||eb.buffer!==Wb||eb.normalized!==Kc||eb.offset!==Rb||eb.stride!==sd)J.bindBuffer(34962,Wb.buffer),J.vertexAttribPointer(gc,sc,Nc,Kc,sd,Rb),eb.type=Nc,eb.size=
sc,eb.buffer=Wb,eb.normalized=Kc,eb.offset=Rb,eb.stride=sd;eb.divisor!==Qb&&(u.vertexAttribDivisorANGLE(gc,Qb),eb.divisor=Qb)}else if(eb.buffer&&(J.disableVertexAttribArray(gc),eb.buffer=null),eb.x!==td||eb.y!==nc||eb.z!==xc||eb.w!==Xc)J.vertexAttrib4f(gc,td,nc,xc,Xc),eb.x=td,eb.y=nc,eb.z=xc,eb.w=Xc;Fa.buffer=m.colorBuffer;Tb=!1;Xb=null;cc=0;hc=!1;Cc=zc=0;bd=1;Qc=0;Rc=5126;cd=od=Yc=Sc=0;aa(Fa)?(Tb=!0,Xb=E.createStream(34962,Fa),Rc=Xb.dtype):(Xb=E.getBuffer(Fa))?Rc=Xb.dtype:"constant"in Fa?(bd=2,"number"===
typeof Fa.constant?(Yc=Fa.constant,od=cd=Sc=0):(Yc=0<Fa.constant.length?Fa.constant[0]:0,od=1<Fa.constant.length?Fa.constant[1]:0,cd=2<Fa.constant.length?Fa.constant[2]:0,Sc=3<Fa.constant.length?Fa.constant[3]:0)):(Xb=aa(Fa.buffer)?E.createStream(34962,Fa.buffer):E.getBuffer(Fa.buffer),Rc="type"in Fa?ma[Fa.type]:Xb.dtype,hc=!!Fa.normalized,Cc=Fa.size|0,zc=Fa.offset|0,Qc=Fa.stride|0,cc=Fa.divisor|0);Zc=X.location;kc=O[Zc];if(1===bd){kc.buffer||J.enableVertexAttribArray(Zc);bc=Cc||4;if(kc.type!==Rc||
kc.size!==bc||kc.buffer!==Xb||kc.normalized!==hc||kc.offset!==zc||kc.stride!==Qc)J.bindBuffer(34962,Xb.buffer),J.vertexAttribPointer(Zc,bc,Rc,hc,Qc,zc),kc.type=Rc,kc.size=bc,kc.buffer=Xb,kc.normalized=hc,kc.offset=zc,kc.stride=Qc;kc.divisor!==cc&&(u.vertexAttribDivisorANGLE(Zc,cc),kc.divisor=cc)}else if(kc.buffer&&(J.disableVertexAttribArray(Zc),kc.buffer=null),kc.x!==Yc||kc.y!==od||kc.z!==cd||kc.w!==Sc)J.vertexAttrib4f(Zc,Yc,od,cd,Sc),kc.x=Yc,kc.y=od,kc.z=cd,kc.w=Sc;$c=m.scale;Uc=$c[0];Ac=$c[1];
z&&dd===Uc&&hd===Ac||(dd=Uc,hd=Ac,J.uniform2f(Dc.location,Uc,Ac));Nd=m.translate;wd=Nd[0];id=Nd[1];z&&ue===wd&&ab===id||(ue=wd,ab=id,J.uniform2f(ea.location,wd,id));Od=m.thickness;z&&ge===Od||(ge=Od,J.uniform1f(W.location,Od));ce=m.depth;z&&Pd===ce||(Pd=ce,J.uniform1f(D.location,ce));Jd=g.call(this,h,m,z);Hd=Jd[0];Tc=Jd[1];rd=Jd[2];vd=Jd[3];z&&md===Hd&&ud===Tc&&jd===rd&&Cd===vd||(md=Hd,ud=Tc,jd=rd,Cd=vd,J.uniform4f(R.location,Hd,Tc,rd,vd));Fd=m.miterLimit;z&&je===Fd||(je=Fd,J.uniform1f(t.location,
Fd));ye=v.call(this,h,m,z);z&&Fe===ye||(Fe=ye,J.uniform1f(a.location,ye));le=m.dashLength;z&&ke===le||(ke=le,J.uniform1f(x.location,le));he=m.opacity;z&&ve===he||(ve=he,J.uniform1f(A.location,he));(de=m.dashTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);me=de._texture;J.uniform1i(Y.location,me.bind());Oc=m.count;0<Oc?Jc?u.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):u.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?J.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):J.drawArrays(5,
0,4));h.viewportWidth=dc;h.viewportHeight=Ic;yb&&E.destroyStream(db);Yb&&E.destroyStream(Pb);Wa&&E.destroyStream(tb);Pa&&E.destroyStream(ub);uc&&E.destroyStream(Wb);Tb&&E.destroyStream(Xb);me.unbind()}N.dirty=!0;za.setVAO(null);w&&(ba.cpuTime+=performance.now()-L)},draw:function(g){var b,v,w,u,m,z,xa,y,H,qa,wa,Q,G,B,U,T,pa,Ba,ca,Aa,la,ia,Z,Zd,Bd,ha,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,
zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe;b=r.next;b!==r.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):J.bindFramebuffer(36160,null),r.cur=b);if(N.dirty){var Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac;Fc=P.dither;Fc!==N.dither&&(Fc?J.enable(3024):J.disable(3024),N.dither=Fc);sd=P.depth_func;sd!==N.depth_func&&(J.depthFunc(sd),N.depth_func=sd);Nc=
$a[0];Xc=$a[1];if(Nc!==Ta[0]||Xc!==Ta[1])J.depthRange(Nc,Xc),Ta[0]=Nc,Ta[1]=Xc;td=P.depth_mask;td!==N.depth_mask&&(J.depthMask(td),N.depth_mask=td);nc=Ja[0];xc=Ja[1];gc=Ja[2];eb=Ja[3];if(nc!==na[0]||xc!==na[1]||gc!==na[2]||eb!==na[3])J.colorMask(nc,xc,gc,eb),na[0]=nc,na[1]=xc,na[2]=gc,na[3]=eb;sc=P.frontFace;sc!==N.frontFace&&(J.frontFace(sc),N.frontFace=sc);Tb=P.lineWidth;Tb!==N.lineWidth&&(J.lineWidth(Tb),N.lineWidth=Tb);Xb=P.polygonOffset_enable;Xb!==N.polygonOffset_enable&&(Xb?J.enable(32823):
J.disable(32823),N.polygonOffset_enable=Xb);cc=q[0];hc=q[1];if(cc!==n[0]||hc!==n[1])J.polygonOffset(cc,hc),n[0]=cc,n[1]=hc;zc=P.sample_alpha;zc!==N.sample_alpha&&(zc?J.enable(32926):J.disable(32926),N.sample_alpha=zc);Cc=P.sample_enable;Cc!==N.sample_enable&&(Cc?J.enable(32928):J.disable(32928),N.sample_enable=Cc);bd=C[0];Qc=C[1];if(bd!==va[0]||Qc!==va[1])J.sampleCoverage(bd,Qc),va[0]=bd,va[1]=Qc;Rc=P.stencil_mask;Rc!==N.stencil_mask&&(J.stencilMask(Rc),N.stencil_mask=Rc);Sc=Hb[0];Yc=Hb[1];od=Hb[2];
if(Sc!==ga[0]||Yc!==ga[1]||od!==ga[2])J.stencilFunc(Sc,Yc,od),ga[0]=Sc,ga[1]=Yc,ga[2]=od;cd=Da[0];Zc=Da[1];kc=Da[2];bc=Da[3];if(cd!==oa[0]||Zc!==oa[1]||kc!==oa[2]||bc!==oa[3])J.stencilOpSeparate(cd,Zc,kc,bc),oa[0]=cd,oa[1]=Zc,oa[2]=kc,oa[3]=bc;$c=I[0];Uc=I[1];dd=I[2];Ac=I[3];if($c!==sa[0]||Uc!==sa[1]||dd!==sa[2]||Ac!==sa[3])J.stencilOpSeparate($c,Uc,dd,Ac),sa[0]=$c,sa[1]=Uc,sa[2]=dd,sa[3]=Ac}v=g.viewport;w=v.x|0;u=v.y|0;m="width"in v?v.width|0:h.framebufferWidth-w;z="height"in v?v.height|0:h.framebufferHeight-
u;xa=h.viewportWidth;h.viewportWidth=m;y=h.viewportHeight;h.viewportHeight=z;J.viewport(w,u,m,z);Ea[0]=w;Ea[1]=u;Ea[2]=m;Ea[3]=z;J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;(H=M.call(this,h,g,0))?J.enable(2929):J.disable(2929);N.depth_enable=H;qa=g.viewport;
wa=qa.x|0;Q=qa.y|0;G="width"in qa?qa.width|0:h.framebufferWidth-wa;B="height"in qa?qa.height|0:h.framebufferHeight-Q;J.scissor(wa,Q,G,B);xd[0]=wa;xd[1]=Q;xd[2]=G;xd[3]=B;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(U=N.profile)T=performance.now(),ba.count++;J.useProgram(L.program);pa=ra.angle_instanced_arrays;za.setVAO(null);ua.buffer=g.positionBuffer;Ba=!1;ca=null;Aa=0;la=!1;Z=ia=0;Zd=1;Bd=0;ha=5126;Lc=pd=ad=ld=0;aa(ua)?(Ba=!0,ca=E.createStream(34962,ua),ha=ca.dtype):
(ca=E.getBuffer(ua))?ha=ca.dtype:"constant"in ua?(Zd=2,"number"===typeof ua.constant?(ad=ua.constant,pd=Lc=ld=0):(ad=0<ua.constant.length?ua.constant[0]:0,pd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,ld=3<ua.constant.length?ua.constant[3]:0)):(ca=aa(ua.buffer)?E.createStream(34962,ua.buffer):E.getBuffer(ua.buffer),ha="type"in ua?ma[ua.type]:ca.dtype,la=!!ua.normalized,Z=ua.size|0,ia=ua.offset|0,Bd=ua.stride|0,Aa=ua.divisor|0);nd=k.location;Gc=O[nd];if(1===Zd){Gc.buffer||
J.enableVertexAttribArray(nd);ed=Z||2;if(Gc.type!==ha||Gc.size!==ed||Gc.buffer!==ca||Gc.normalized!==la||Gc.offset!==ia||Gc.stride!==Bd)J.bindBuffer(34962,ca.buffer),J.vertexAttribPointer(nd,ed,ha,la,Bd,ia),Gc.type=ha,Gc.size=ed,Gc.buffer=ca,Gc.normalized=la,Gc.offset=ia,Gc.stride=Bd;Gc.divisor!==Aa&&(pa.vertexAttribDivisorANGLE(nd,Aa),Gc.divisor=Aa)}else if(Gc.buffer&&(J.disableVertexAttribArray(nd),Gc.buffer=null),Gc.x!==ad||Gc.y!==pd||Gc.z!==Lc||Gc.w!==ld)J.vertexAttrib4f(nd,ad,pd,Lc,ld),Gc.x=
ad,Gc.y=pd,Gc.z=Lc,Gc.w=ld;Ia.buffer=g.positionBuffer;Pc=!1;kd=null;Bb=0;Fb=!1;xb=vc=0;yc=1;Cb=0;Jc=5126;Vc=Wc=Hc=lc=0;aa(Ia)?(Pc=!0,kd=E.createStream(34962,Ia),Jc=kd.dtype):(kd=E.getBuffer(Ia))?Jc=kd.dtype:"constant"in Ia?(yc=2,"number"===typeof Ia.constant?(Hc=Ia.constant,Wc=Vc=lc=0):(Hc=0<Ia.constant.length?Ia.constant[0]:0,Wc=1<Ia.constant.length?Ia.constant[1]:0,Vc=2<Ia.constant.length?Ia.constant[2]:0,lc=3<Ia.constant.length?Ia.constant[3]:0)):(kd=aa(Ia.buffer)?E.createStream(34962,Ia.buffer):
E.getBuffer(Ia.buffer),Jc="type"in Ia?ma[Ia.type]:kd.dtype,Fb=!!Ia.normalized,xb=Ia.size|0,vc=Ia.offset|0,Cb=Ia.stride|0,Bb=Ia.divisor|0);Ec=f.location;dc=O[Ec];if(1===yc){dc.buffer||J.enableVertexAttribArray(Ec);Ic=xb||2;if(dc.type!==Jc||dc.size!==Ic||dc.buffer!==kd||dc.normalized!==Fb||dc.offset!==vc||dc.stride!==Cb)J.bindBuffer(34962,kd.buffer),J.vertexAttribPointer(Ec,Ic,Jc,Fb,Cb,vc),dc.type=Jc,dc.size=Ic,dc.buffer=kd,dc.normalized=Fb,dc.offset=vc,dc.stride=Cb;dc.divisor!==Bb&&(pa.vertexAttribDivisorANGLE(Ec,
Bb),dc.divisor=Bb)}else if(dc.buffer&&(J.disableVertexAttribArray(Ec),dc.buffer=null),dc.x!==Hc||dc.y!==Wc||dc.z!==Vc||dc.w!==lc)J.vertexAttrib4f(Ec,Hc,Wc,Vc,lc),dc.x=Hc,dc.y=Wc,dc.z=Vc,dc.w=lc;mb.buffer=g.positionBuffer;oc=!1;pc=null;mc=0;ec=!1;qc=Ua=0;yb=1;db=0;Nb=5126;gd=Va=ob=bb=0;aa(mb)?(oc=!0,pc=E.createStream(34962,mb),Nb=pc.dtype):(pc=E.getBuffer(mb))?Nb=pc.dtype:"constant"in mb?(yb=2,"number"===typeof mb.constant?(ob=mb.constant,Va=gd=bb=0):(ob=0<mb.constant.length?mb.constant[0]:0,Va=1<
mb.constant.length?mb.constant[1]:0,gd=2<mb.constant.length?mb.constant[2]:0,bb=3<mb.constant.length?mb.constant[3]:0)):(pc=aa(mb.buffer)?E.createStream(34962,mb.buffer):E.getBuffer(mb.buffer),Nb="type"in mb?ma[mb.type]:pc.dtype,ec=!!mb.normalized,qc=mb.size|0,Ua=mb.offset|0,db=mb.stride|0,mc=mb.divisor|0);Ib=ta.location;Jb=O[Ib];if(1===yb){Jb.buffer||J.enableVertexAttribArray(Ib);rc=qc||2;if(Jb.type!==Nb||Jb.size!==rc||Jb.buffer!==pc||Jb.normalized!==ec||Jb.offset!==Ua||Jb.stride!==db)J.bindBuffer(34962,
pc.buffer),J.vertexAttribPointer(Ib,rc,Nb,ec,db,Ua),Jb.type=Nb,Jb.size=rc,Jb.buffer=pc,Jb.normalized=ec,Jb.offset=Ua,Jb.stride=db;Jb.divisor!==mc&&(pa.vertexAttribDivisorANGLE(Ib,mc),Jb.divisor=mc)}else if(Jb.buffer&&(J.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==ob||Jb.y!==Va||Jb.z!==gd||Jb.w!==bb)J.vertexAttrib4f(Ib,ob,Va,gd,bb),Jb.x=ob,Jb.y=Va,Jb.z=gd,Jb.w=bb;da.buffer=g.positionBuffer;Ob=!1;jb=null;Gb=0;Db=!1;hb=wb=0;Yb=1;Pb=0;qb=5126;ic=zb=Ub=Ra=0;aa(da)?(Ob=!0,jb=E.createStream(34962,
da),qb=jb.dtype):(jb=E.getBuffer(da))?qb=jb.dtype:"constant"in da?(Yb=2,"number"===typeof da.constant?(Ub=da.constant,zb=ic=Ra=0):(Ub=0<da.constant.length?da.constant[0]:0,zb=1<da.constant.length?da.constant[1]:0,ic=2<da.constant.length?da.constant[2]:0,Ra=3<da.constant.length?da.constant[3]:0)):(jb=aa(da.buffer)?E.createStream(34962,da.buffer):E.getBuffer(da.buffer),qb="type"in da?ma[da.type]:jb.dtype,Db=!!da.normalized,hb=da.size|0,wb=da.offset|0,Pb=da.stride|0,Gb=da.divisor|0);ib=ja.location;pb=
O[ib];if(1===Yb){pb.buffer||J.enableVertexAttribArray(ib);Ha=hb||2;if(pb.type!==qb||pb.size!==Ha||pb.buffer!==jb||pb.normalized!==Db||pb.offset!==wb||pb.stride!==Pb)J.bindBuffer(34962,jb.buffer),J.vertexAttribPointer(ib,Ha,qb,Db,Pb,wb),pb.type=qb,pb.size=Ha,pb.buffer=jb,pb.normalized=Db,pb.offset=wb,pb.stride=Pb;pb.divisor!==Gb&&(pa.vertexAttribDivisorANGLE(ib,Gb),pb.divisor=Gb)}else if(pb.buffer&&(J.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==ic||pb.w!==Ra)J.vertexAttrib4f(ib,
Ub,zb,ic,Ra),pb.x=Ub,pb.y=zb,pb.z=ic,pb.w=Ra;V.buffer=g.colorBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Wa=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;aa(V)?(rb=!0,Ka=E.createStream(34962,V),sb=Ka.dtype):(Ka=E.getBuffer(V))?sb=Ka.dtype:"constant"in V?(Wa=2,"number"===typeof V.constant?(tc=V.constant,Qa=Kb=Oa=0):(tc=0<V.constant.length?V.constant[0]:0,Qa=1<V.constant.length?V.constant[1]:0,Kb=2<V.constant.length?V.constant[2]:0,Oa=3<V.constant.length?V.constant[3]:0)):(Ka=aa(V.buffer)?E.createStream(34962,V.buffer):
E.getBuffer(V.buffer),sb="type"in V?ma[V.type]:Ka.dtype,gb=!!V.normalized,kb=V.size|0,La=V.offset|0,tb=V.stride|0,fb=V.divisor|0);Eb=S.location;Ma=O[Eb];if(1===Wa){Ma.buffer||J.enableVertexAttribArray(Eb);zd=kb||4;if(Ma.type!==sb||Ma.size!==zd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)J.bindBuffer(34962,Ka.buffer),J.vertexAttribPointer(Eb,zd,sb,gb,tb,La),Ma.type=sb,Ma.size=zd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(pa.vertexAttribDivisorANGLE(Eb,
fb),Ma.divisor=fb)}else if(Ma.buffer&&(J.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==tc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)J.vertexAttrib4f(Eb,tc,Qa,Kb,Oa),Ma.x=tc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Fa.buffer=g.colorBuffer;Ya=!1;Lb=null;Mb=0;lb=!1;Zb=Na=0;Pa=1;ub=0;vb=5126;Bc=fc=nb=Sa=0;aa(Fa)?(Ya=!0,Lb=E.createStream(34962,Fa),vb=Lb.dtype):(Lb=E.getBuffer(Fa))?vb=Lb.dtype:"constant"in Fa?(Pa=2,"number"===typeof Fa.constant?(nb=Fa.constant,fc=Bc=Sa=0):(nb=0<Fa.constant.length?Fa.constant[0]:0,fc=1<Fa.constant.length?
Fa.constant[1]:0,Bc=2<Fa.constant.length?Fa.constant[2]:0,Sa=3<Fa.constant.length?Fa.constant[3]:0)):(Lb=aa(Fa.buffer)?E.createStream(34962,Fa.buffer):E.getBuffer(Fa.buffer),vb="type"in Fa?ma[Fa.type]:Lb.dtype,lb=!!Fa.normalized,Zb=Fa.size|0,Na=Fa.offset|0,ub=Fa.stride|0,Mb=Fa.divisor|0);wc=X.location;cb=O[wc];if(1===Pa){cb.buffer||J.enableVertexAttribArray(wc);jc=Zb||4;if(cb.type!==vb||cb.size!==jc||cb.buffer!==Lb||cb.normalized!==lb||cb.offset!==Na||cb.stride!==ub)J.bindBuffer(34962,Lb.buffer),
J.vertexAttribPointer(wc,jc,vb,lb,ub,Na),cb.type=vb,cb.size=jc,cb.buffer=Lb,cb.normalized=lb,cb.offset=Na,cb.stride=ub;cb.divisor!==Mb&&(pa.vertexAttribDivisorANGLE(wc,Mb),cb.divisor=Mb)}else if(cb.buffer&&(J.disableVertexAttribArray(wc),cb.buffer=null),cb.x!==nb||cb.y!==fc||cb.z!==Bc||cb.w!==Sa)J.vertexAttrib4f(wc,nb,fc,Bc,Sa),cb.x=nb,cb.y=fc,cb.z=Bc,cb.w=Sa;qd=F.location;Xa=O[qd];Xa.buffer||J.enableVertexAttribArray(qd);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==e||!1!==Xa.normalized||0!==Xa.offset||
8!==Xa.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(qd,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=e,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(pa.vertexAttribDivisorANGLE(qd,0),Xa.divisor=0);Mc=d.location;Ab=O[Mc];Ab.buffer||J.enableVertexAttribArray(Mc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==l||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(Mc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=l,Ab.normalized=
!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(pa.vertexAttribDivisorANGLE(Mc,0),Ab.divisor=0);Za=g.scale;J.uniform2f(Dc.location,Za[0],Za[1]);Vb=g.translate;J.uniform2f(ea.location,Vb[0],Vb[1]);J.uniform1f(W.location,g.thickness);J.uniform1f(D.location,g.depth);uc=p.call(this,h,g,0);J.uniform4f(R.location,uc[0],uc[1],uc[2],uc[3]);J.uniform1f(t.location,g.miterLimit);Wb=c.call(this,h,g,0);J.uniform1f(a.location,Wb);J.uniform1f(x.location,g.dashLength);J.uniform1f(A.location,g.opacity);(Qb=g.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;J.uniform1i(Y.location,Kc.bind());(Rb=K.elements)?J.bindBuffer(34963,Rb.buffer.buffer):za.currentVAO&&(Rb=Ca.getElements(za.currentVAO.elements))&&J.bindBuffer(34963,Rb.buffer.buffer);pe=g.count;0<pe?Rb?pa.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),pe):pa.drawArraysInstancedANGLE(5,0,4,pe):0>pe&&(Rb?J.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):J.drawArrays(5,0,4));N.dirty=!0;za.setVAO(null);h.viewportWidth=xa;h.viewportHeight=
y;U&&(ba.cpuTime+=performance.now()-T);Ba&&E.destroyStream(ca);Pc&&E.destroyStream(kd);oc&&E.destroyStream(pc);Ob&&E.destroyStream(jb);rb&&E.destroyStream(Ka);Ya&&E.destroyStream(Lb);Kc.unbind()},scope:function(a,d,c){var f,g,q,k,n,r,I,b,C,p,t,v,na,x,A,sa,Ja,J,Da,O,$a,oa,fa,R,ga,D,L,F,va,Ea,M,Ca,S,Q,ka,Ta,W,X,ya,ea,ia,Hb,ra,Y,ta,ja,za,xd,Dc,Z,ec,Ua,qc,yb,db,Nb,bb,ob,Va,ha,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,
ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd,wd,ue,id,ab,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;f=a.viewport;g=f.x|0;q=f.y|0;k="width"in f?f.width|0:h.framebufferWidth-
g;n="height"in f?f.height|0:h.framebufferHeight-q;r=h.viewportWidth;h.viewportWidth=k;I=h.viewportHeight;h.viewportHeight=n;b=xa[0];xa[0]=g;C=xa[1];xa[1]=q;p=xa[2];xa[2]=k;t=xa[3];xa[3]=n;v=wa[0];wa[0]=0;na=wa[1];wa[1]=0;x=wa[2];wa[2]=0;A=wa[3];wa[3]=0;sa=P.blend_enable;P.blend_enable=!0;Ja=Aa[0];Aa[0]=32774;J=Aa[1];Aa[1]=32774;Da=pa[0];pa[0]=770;O=pa[1];pa[1]=771;$a=pa[2];pa[2]=773;oa=pa[3];pa[3]=1;fa=P.cull_enable;P.cull_enable=!0;R=P.cull_face;P.cull_face=1029;ga=G.call(this,h,a,c);D=P.depth_enable;
P.depth_enable=ga;L=a.viewport;F=L.x|0;va=L.y|0;Ea="width"in L?L.width|0:h.framebufferWidth-F;M="height"in L?L.height|0:h.framebufferHeight-va;Ca=Ba[0];Ba[0]=F;S=Ba[1];Ba[1]=va;Q=Ba[2];Ba[2]=Ea;ka=Ba[3];Ba[3]=M;Ta=P.scissor_enable;P.scissor_enable=!0;W=P.stencil_enable;P.stencil_enable=!1;if(X=N.profile)ya=performance.now(),ba.count++;ea=K.offset;K.offset=0;ia=K.count;K.count=4;Hb=a.count;ra=K.instances;K.instances=Hb;Y=K.primitive;K.primitive=5;ta=a.dashLength;ja=qa[23];qa[23]=ta;za=a.dashTexture;
xd=qa[24];qa[24]=za;Dc=a.depth;Z=qa[22];qa[22]=Dc;ec=a.id;Ua=qa[31];qa[31]=ec;qc=a.miterLimit;yb=qa[32];qa[32]=qc;db=H.call(this,h,a,c);Nb=qa[33];qa[33]=db;bb=a.opacity;ob=qa[10];qa[10]=bb;Va=h.pixelRatio;ha=qa[34];qa[34]=Va;Ib=a.scale;Jb=qa[6];qa[6]=Ib;rc=a.scaleFract;Ob=qa[7];qa[7]=rc;jb=a.thickness;Gb=qa[21];qa[21]=jb;Db=a.translate;wb=qa[8];qa[8]=Db;hb=a.translateFract;Yb=qa[9];qa[9]=hb;Pb=B.call(this,h,a,c);qb=qa[3];qa[3]=Pb;V.buffer=a.colorBuffer;Ra=!1;Ub=null;zb=0;ic=!1;pb=ib=0;Ha=1;rb=0;Ka=
5126;kb=La=gb=fb=0;aa(V)?(Ra=!0,Ub=E.createStream(34962,V),Ka=Ub.dtype):(Ub=E.getBuffer(V))?Ka=Ub.dtype:"constant"in V?(Ha=2,"number"===typeof V.constant?(gb=V.constant,La=kb=fb=0):(gb=0<V.constant.length?V.constant[0]:0,La=1<V.constant.length?V.constant[1]:0,kb=2<V.constant.length?V.constant[2]:0,fb=3<V.constant.length?V.constant[3]:0)):(Ub=aa(V.buffer)?E.createStream(34962,V.buffer):E.getBuffer(V.buffer),Ka="type"in V?ma[V.type]:Ub.dtype,ic=!!V.normalized,pb=V.size|0,ib=V.offset|0,rb=V.stride|0,
zb=V.divisor|0);Wa=U.buffer;U.buffer=Ub;tb=U.divisor;U.divisor=zb;sb=U.normalized;U.normalized=ic;Oa=U.offset;U.offset=ib;tc=U.size;U.size=pb;Qa=U.state;U.state=Ha;Kb=U.stride;U.stride=rb;Eb=U.type;U.type=Ka;Ma=U.w;U.w=fb;zd=U.x;U.x=gb;Ya=U.y;U.y=La;Lb=U.z;U.z=kb;ua.buffer=a.positionBuffer;Mb=!1;lb=null;Na=0;Zb=!1;ub=Pa=0;vb=1;Sa=0;nb=5126;cb=wc=Bc=fc=0;aa(ua)?(Mb=!0,lb=E.createStream(34962,ua),nb=lb.dtype):(lb=E.getBuffer(ua))?nb=lb.dtype:"constant"in ua?(vb=2,"number"===typeof ua.constant?(Bc=ua.constant,
wc=cb=fc=0):(Bc=0<ua.constant.length?ua.constant[0]:0,wc=1<ua.constant.length?ua.constant[1]:0,cb=2<ua.constant.length?ua.constant[2]:0,fc=3<ua.constant.length?ua.constant[3]:0)):(lb=aa(ua.buffer)?E.createStream(34962,ua.buffer):E.getBuffer(ua.buffer),nb="type"in ua?ma[ua.type]:lb.dtype,Zb=!!ua.normalized,ub=ua.size|0,Pa=ua.offset|0,Sa=ua.stride|0,Na=ua.divisor|0);jc=m.buffer;m.buffer=lb;qd=m.divisor;m.divisor=Na;Xa=m.normalized;m.normalized=Zb;Mc=m.offset;m.offset=Pa;Ab=m.size;m.size=ub;Za=m.state;
m.state=vb;Vb=m.stride;m.stride=Sa;uc=m.type;m.type=nb;Wb=m.w;m.w=fc;Qb=m.x;m.x=Bc;Kc=m.y;m.y=wc;Rb=m.z;m.z=cb;Fa.buffer=a.colorBuffer;pe=!1;Fc=null;sd=0;Nc=!1;td=Xc=0;nc=1;xc=0;gc=5126;Xb=Tb=sc=eb=0;aa(Fa)?(pe=!0,Fc=E.createStream(34962,Fa),gc=Fc.dtype):(Fc=E.getBuffer(Fa))?gc=Fc.dtype:"constant"in Fa?(nc=2,"number"===typeof Fa.constant?(sc=Fa.constant,Tb=Xb=eb=0):(sc=0<Fa.constant.length?Fa.constant[0]:0,Tb=1<Fa.constant.length?Fa.constant[1]:0,Xb=2<Fa.constant.length?Fa.constant[2]:0,eb=3<Fa.constant.length?
Fa.constant[3]:0)):(Fc=aa(Fa.buffer)?E.createStream(34962,Fa.buffer):E.getBuffer(Fa.buffer),gc="type"in Fa?ma[Fa.type]:Fc.dtype,Nc=!!Fa.normalized,td=Fa.size|0,Xc=Fa.offset|0,xc=Fa.stride|0,sd=Fa.divisor|0);cc=u.buffer;u.buffer=Fc;hc=u.divisor;u.divisor=sd;zc=u.normalized;u.normalized=Nc;Cc=u.offset;u.offset=Xc;bd=u.size;u.size=td;Qc=u.state;u.state=nc;Rc=u.stride;u.stride=xc;Sc=u.type;u.type=gc;Yc=u.w;u.w=eb;od=u.x;u.x=sc;cd=u.y;u.y=Tb;Zc=u.z;u.z=Xb;Ia.buffer=a.positionBuffer;kc=!1;bc=null;$c=0;
Uc=!1;Ac=dd=0;hd=1;Nd=0;wd=5126;Od=ab=id=ue=0;aa(Ia)?(kc=!0,bc=E.createStream(34962,Ia),wd=bc.dtype):(bc=E.getBuffer(Ia))?wd=bc.dtype:"constant"in Ia?(hd=2,"number"===typeof Ia.constant?(id=Ia.constant,ab=Od=ue=0):(id=0<Ia.constant.length?Ia.constant[0]:0,ab=1<Ia.constant.length?Ia.constant[1]:0,Od=2<Ia.constant.length?Ia.constant[2]:0,ue=3<Ia.constant.length?Ia.constant[3]:0)):(bc=aa(Ia.buffer)?E.createStream(34962,Ia.buffer):E.getBuffer(Ia.buffer),wd="type"in Ia?ma[Ia.type]:bc.dtype,Uc=!!Ia.normalized,
Ac=Ia.size|0,dd=Ia.offset|0,Nd=Ia.stride|0,$c=Ia.divisor|0);ge=y.buffer;y.buffer=bc;ce=y.divisor;y.divisor=$c;Pd=y.normalized;y.normalized=Uc;Jd=y.offset;y.offset=dd;Hd=y.size;y.size=Ac;md=y.state;y.state=hd;Tc=y.stride;y.stride=Nd;ud=y.type;y.type=wd;rd=y.w;y.w=ue;jd=y.x;y.x=id;vd=y.y;y.y=ab;Cd=y.z;y.z=Od;Fd=ca.buffer;ca.buffer=e;je=ca.divisor;ca.divisor=0;ye=ca.normalized;ca.normalized=!1;Fe=ca.offset;ca.offset=0;le=ca.size;ca.size=0;ke=ca.state;ca.state=1;he=ca.stride;ca.stride=8;ve=ca.type;ca.type=
5126;de=ca.w;ca.w=0;me=ca.x;ca.x=0;Oc=ca.y;ca.y=0;fd=ca.z;ca.z=0;we=w.buffer;w.buffer=l;qe=w.divisor;w.divisor=0;Kd=w.normalized;w.normalized=!1;Qd=w.offset;w.offset=4;Sd=w.size;w.size=0;Td=w.state;w.state=1;ne=w.stride;w.stride=8;Ge=w.type;w.type=5126;Be=w.w;w.w=0;se=w.x;w.x=0;Se=w.y;w.y=0;Te=w.z;w.z=0;mb.buffer=a.positionBuffer;Oe=!1;xe=null;He=0;Je=!1;Le=Ke=0;Ie=1;Ld=0;Xd=5126;Id=Me=ee=be=0;aa(mb)?(Oe=!0,xe=E.createStream(34962,mb),Xd=xe.dtype):(xe=E.getBuffer(mb))?Xd=xe.dtype:"constant"in mb?
(Ie=2,"number"===typeof mb.constant?(ee=mb.constant,Me=Id=be=0):(ee=0<mb.constant.length?mb.constant[0]:0,Me=1<mb.constant.length?mb.constant[1]:0,Id=2<mb.constant.length?mb.constant[2]:0,be=3<mb.constant.length?mb.constant[3]:0)):(xe=aa(mb.buffer)?E.createStream(34962,mb.buffer):E.getBuffer(mb.buffer),Xd="type"in mb?ma[mb.type]:xe.dtype,Je=!!mb.normalized,Le=mb.size|0,Ke=mb.offset|0,Ld=mb.stride|0,He=mb.divisor|0);Ud=T.buffer;T.buffer=xe;De=T.divisor;T.divisor=He;Ne=T.normalized;T.normalized=Je;
hf=T.offset;T.offset=Ke;bf=T.size;T.size=Le;Ue=T.state;T.state=Ie;Pe=T.stride;T.stride=Ld;af=T.type;T.type=Xd;Ze=T.w;T.w=be;Ve=T.x;T.x=ee;We=T.y;T.y=Me;Vd=T.z;T.z=Id;da.buffer=a.positionBuffer;ae=!1;Xe=null;jf=0;nf=!1;kf=ef=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;aa(da)?(ae=!0,Xe=E.createStream(34962,da),rf=Xe.dtype):(Xe=E.getBuffer(da))?rf=Xe.dtype:"constant"in da?(lf=2,"number"===typeof da.constant?(sf=da.constant,Bf=Cf=of=0):(sf=0<da.constant.length?da.constant[0]:0,Bf=1<da.constant.length?da.constant[1]:
0,Cf=2<da.constant.length?da.constant[2]:0,of=3<da.constant.length?da.constant[3]:0)):(Xe=aa(da.buffer)?E.createStream(34962,da.buffer):E.getBuffer(da.buffer),rf="type"in da?ma[da.type]:Xe.dtype,nf=!!da.normalized,kf=da.size|0,ef=da.offset|0,mf=da.stride|0,jf=da.divisor|0);Qe=z.buffer;z.buffer=Xe;Ee=z.divisor;z.divisor=jf;pf=z.normalized;z.normalized=nf;qf=z.offset;z.offset=ef;Df=z.size;z.size=kf;Gf=z.state;z.state=lf;Af=z.stride;z.stride=mf;Ef=z.type;z.type=rf;Ff=z.w;z.w=of;wf=z.x;z.x=sf;xf=z.y;
z.y=Bf;vf=z.z;z.z=Cf;yf=la.vert;la.vert=36;zf=la.frag;la.frag=35;N.dirty=!0;d(h,a,c);h.viewportWidth=r;h.viewportHeight=I;xa[0]=b;xa[1]=C;xa[2]=p;xa[3]=t;wa[0]=v;wa[1]=na;wa[2]=x;wa[3]=A;P.blend_enable=sa;Aa[0]=Ja;Aa[1]=J;pa[0]=Da;pa[1]=O;pa[2]=$a;pa[3]=oa;P.cull_enable=fa;P.cull_face=R;P.depth_enable=D;Ba[0]=Ca;Ba[1]=S;Ba[2]=Q;Ba[3]=ka;P.scissor_enable=Ta;P.stencil_enable=W;X&&(ba.cpuTime+=performance.now()-ya);K.offset=ea;K.count=ia;K.instances=ra;K.primitive=Y;qa[23]=ja;qa[24]=xd;qa[22]=Z;qa[31]=
Ua;qa[32]=yb;qa[33]=Nb;qa[10]=ob;qa[34]=ha;qa[6]=Jb;qa[7]=Ob;qa[21]=Gb;qa[8]=wb;qa[9]=Yb;qa[3]=qb;Ra&&E.destroyStream(Ub);U.buffer=Wa;U.divisor=tb;U.normalized=sb;U.offset=Oa;U.size=tc;U.state=Qa;U.stride=Kb;U.type=Eb;U.w=Ma;U.x=zd;U.y=Ya;U.z=Lb;Mb&&E.destroyStream(lb);m.buffer=jc;m.divisor=qd;m.normalized=Xa;m.offset=Mc;m.size=Ab;m.state=Za;m.stride=Vb;m.type=uc;m.w=Wb;m.x=Qb;m.y=Kc;m.z=Rb;pe&&E.destroyStream(Fc);u.buffer=cc;u.divisor=hc;u.normalized=zc;u.offset=Cc;u.size=bd;u.state=Qc;u.stride=
Rc;u.type=Sc;u.w=Yc;u.x=od;u.y=cd;u.z=Zc;kc&&E.destroyStream(bc);y.buffer=ge;y.divisor=ce;y.normalized=Pd;y.offset=Jd;y.size=Hd;y.state=md;y.stride=Tc;y.type=ud;y.w=rd;y.x=jd;y.y=vd;y.z=Cd;ca.buffer=Fd;ca.divisor=je;ca.normalized=ye;ca.offset=Fe;ca.size=le;ca.state=ke;ca.stride=he;ca.type=ve;ca.w=de;ca.x=me;ca.y=Oc;ca.z=fd;w.buffer=we;w.divisor=qe;w.normalized=Kd;w.offset=Qd;w.size=Sd;w.state=Td;w.stride=ne;w.type=Ge;w.w=Be;w.x=se;w.y=Se;w.z=Te;Oe&&E.destroyStream(xe);T.buffer=Ud;T.divisor=De;T.normalized=
Ne;T.offset=hf;T.size=bf;T.state=Ue;T.stride=Pe;T.type=af;T.w=Ze;T.x=Ve;T.y=We;T.z=Vd;ae&&E.destroyStream(Xe);z.buffer=Qe;z.divisor=Ee;z.normalized=pf;z.offset=qf;z.size=Df;z.state=Gf;z.stride=Af;z.type=Ef;z.w=Ff;z.x=wf;z.y=xf;z.z=vf;la.vert=yf;la.frag=zf;N.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z){var Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Dc,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,
ka,pa;Q=b.attributes;ia=b.buffer;g=b.context;v=b.current;S=b.draw;k=b.elements;X=b.extensions;f=b.framebuffer;x=b.gl;Y=b.isBufferArgs;D=b.next;F=b.shader;d=b.uniforms;t=b.vao;a=D.blend_color;ta=v.blend_color;A=D.blend_equation;ja=v.blend_equation;Dc=D.blend_func;W=v.blend_func;ea=D.colorMask;R=v.colorMask;O=D.depth_range;E=v.depth_range;h=D.polygonOffset_offset;N=v.polygonOffset_offset;K=D.sample_coverage;Ca=v.sample_coverage;ra=D.scissor_box;r=v.scissor_box;J=D.stencil_func;aa=v.stencil_func;P=D.stencil_opBack;
la=v.stencil_opBack;qa=D.stencil_opFront;za=v.stencil_opFront;wa=D.viewport;fa=v.viewport;Aa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,d){var c,l,b,q,n,C;c=f.next;c!==f.cur&&(c?x.bindFramebuffer(36160,c.framebuffer):x.bindFramebuffer(36160,null),f.cur=c);if(v.dirty){var p,e,A,L,ga,I,sa,Da,oa,F,Ea,ma,V,M,wa,ra,Dc,da,Z,$b,Ga,ac,Sb,ha,Dd,re,Wd,ze,Ad,Rd,oe,ie;p=D.dither;p!==v.dither&&
(p?x.enable(3024):x.disable(3024),v.dither=p);e=D.depth_func;e!==v.depth_func&&(x.depthFunc(e),v.depth_func=e);A=O[0];L=O[1];if(A!==E[0]||L!==E[1])x.depthRange(A,L),E[0]=A,E[1]=L;ga=D.depth_mask;ga!==v.depth_mask&&(x.depthMask(ga),v.depth_mask=ga);I=ea[0];sa=ea[1];Da=ea[2];oa=ea[3];if(I!==R[0]||sa!==R[1]||Da!==R[2]||oa!==R[3])x.colorMask(I,sa,Da,oa),R[0]=I,R[1]=sa,R[2]=Da,R[3]=oa;F=D.cull_enable;F!==v.cull_enable&&(F?x.enable(2884):x.disable(2884),v.cull_enable=F);Ea=D.cull_face;Ea!==v.cull_face&&
(x.cullFace(Ea),v.cull_face=Ea);ma=D.frontFace;ma!==v.frontFace&&(x.frontFace(ma),v.frontFace=ma);V=D.lineWidth;V!==v.lineWidth&&(x.lineWidth(V),v.lineWidth=V);M=D.polygonOffset_enable;M!==v.polygonOffset_enable&&(M?x.enable(32823):x.disable(32823),v.polygonOffset_enable=M);wa=h[0];ra=h[1];if(wa!==N[0]||ra!==N[1])x.polygonOffset(wa,ra),N[0]=wa,N[1]=ra;Dc=D.sample_alpha;Dc!==v.sample_alpha&&(Dc?x.enable(32926):x.disable(32926),v.sample_alpha=Dc);da=D.sample_enable;da!==v.sample_enable&&(da?x.enable(32928):
x.disable(32928),v.sample_enable=da);Z=K[0];$b=K[1];if(Z!==Ca[0]||$b!==Ca[1])x.sampleCoverage(Z,$b),Ca[0]=Z,Ca[1]=$b;Ga=D.stencil_mask;Ga!==v.stencil_mask&&(x.stencilMask(Ga),v.stencil_mask=Ga);ac=J[0];Sb=J[1];ha=J[2];if(ac!==aa[0]||Sb!==aa[1]||ha!==aa[2])x.stencilFunc(ac,Sb,ha),aa[0]=ac,aa[1]=Sb,aa[2]=ha;Dd=qa[0];re=qa[1];Wd=qa[2];ze=qa[3];if(Dd!==za[0]||re!==za[1]||Wd!==za[2]||ze!==za[3])x.stencilOpSeparate(Dd,re,Wd,ze),za[0]=Dd,za[1]=re,za[2]=Wd,za[3]=ze;Ad=P[0];Rd=P[1];oe=P[2];ie=P[3];if(Ad!==
la[0]||Rd!==la[1]||oe!==la[2]||ie!==la[3])x.stencilOpSeparate(Ad,Rd,oe,ie),la[0]=Ad,la[1]=Rd,la[2]=oe,la[3]=ie}x.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;x.enable(3042);v.blend_enable=!0;x.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;x.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;x.disable(2929);v.depth_enable=!1;x.enable(3089);v.scissor_enable=!0;x.disable(2960);v.stencil_enable=!1;if(l=v.profile)b=performance.now(),ba.count+=d;x.useProgram(G.program);
q=X.angle_instanced_arrays;var Ed;t.setVAO(null);Ed=S.instances;for(n=0;n<d;++n){C=a[n];var Yd,fe,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb;Yd=C.viewport;fe=Yd.x|0;Md=Yd.y|0;Ye="width"in Yd?Yd.width|0:g.framebufferWidth-fe;$e="height"in Yd?Yd.height|0:g.framebufferHeight-Md;Re=g.viewportWidth;g.viewportWidth=
Ye;Gd=g.viewportHeight;g.viewportHeight=$e;x.viewport(fe,Md,Ye,$e);fa[0]=fe;fa[1]=Md;fa[2]=Ye;fa[3]=$e;Ae=C.viewport;te=Ae.x|0;Zd=Ae.y|0;Bd="width"in Ae?Ae.width|0:g.framebufferWidth-te;$d="height"in Ae?Ae.height|0:g.framebufferHeight-Zd;x.scissor(te,Zd,Bd,$d);r[0]=te;r[1]=Zd;r[2]=Bd;r[3]=$d;ka.buffer=C.positionBuffer;ld=!1;ad=null;pd=0;Lc=!1;Gc=nd=0;ed=1;Pc=0;kd=5126;xb=vc=Fb=Bb=0;Y(ka)?(ld=!0,ad=ia.createStream(34962,ka),kd=ad.dtype):(ad=ia.getBuffer(ka))?kd=ad.dtype:"constant"in ka?(ed=2,"number"===
typeof ka.constant?(Fb=ka.constant,vc=xb=Bb=0):(Fb=0<ka.constant.length?ka.constant[0]:0,vc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Bb=3<ka.constant.length?ka.constant[3]:0)):(ad=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),kd="type"in ka?Aa[ka.type]:ad.dtype,Lc=!!ka.normalized,Gc=ka.size|0,nd=ka.offset|0,Pc=ka.stride|0,pd=ka.divisor|0);yc=u.location;Cb=Q[yc];if(1===ed){Cb.buffer||x.enableVertexAttribArray(yc);Jc=Gc||2;if(Cb.type!==kd||
Cb.size!==Jc||Cb.buffer!==ad||Cb.normalized!==Lc||Cb.offset!==nd||Cb.stride!==Pc)x.bindBuffer(34962,ad.buffer),x.vertexAttribPointer(yc,Jc,kd,Lc,Pc,nd),Cb.type=kd,Cb.size=Jc,Cb.buffer=ad,Cb.normalized=Lc,Cb.offset=nd,Cb.stride=Pc;Cb.divisor!==pd&&(q.vertexAttribDivisorANGLE(yc,pd),Cb.divisor=pd)}else if(Cb.buffer&&(x.disableVertexAttribArray(yc),Cb.buffer=null),Cb.x!==Fb||Cb.y!==vc||Cb.z!==xb||Cb.w!==Bb)x.vertexAttrib4f(yc,Fb,vc,xb,Bb),Cb.x=Fb,Cb.y=vc,Cb.z=xb,Cb.w=Bb;pa.buffer=C.positionFractBuffer;
lc=!1;Hc=null;Wc=0;Vc=!1;dc=Ec=0;Ic=1;oc=0;pc=5126;qc=Ua=ec=mc=0;Y(pa)?(lc=!0,Hc=ia.createStream(34962,pa),pc=Hc.dtype):(Hc=ia.getBuffer(pa))?pc=Hc.dtype:"constant"in pa?(Ic=2,"number"===typeof pa.constant?(ec=pa.constant,Ua=qc=mc=0):(ec=0<pa.constant.length?pa.constant[0]:0,Ua=1<pa.constant.length?pa.constant[1]:0,qc=2<pa.constant.length?pa.constant[2]:0,mc=3<pa.constant.length?pa.constant[3]:0)):(Hc=Y(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),pc="type"in pa?Aa[pa.type]:
Hc.dtype,Vc=!!pa.normalized,dc=pa.size|0,Ec=pa.offset|0,oc=pa.stride|0,Wc=pa.divisor|0);yb=y.location;db=Q[yb];if(1===Ic){db.buffer||x.enableVertexAttribArray(yb);Nb=dc||2;if(db.type!==pc||db.size!==Nb||db.buffer!==Hc||db.normalized!==Vc||db.offset!==Ec||db.stride!==oc)x.bindBuffer(34962,Hc.buffer),x.vertexAttribPointer(yb,Nb,pc,Vc,oc,Ec),db.type=pc,db.size=Nb,db.buffer=Hc,db.normalized=Vc,db.offset=Ec,db.stride=oc;db.divisor!==Wc&&(q.vertexAttribDivisorANGLE(yb,Wc),db.divisor=Wc)}else if(db.buffer&&
(x.disableVertexAttribArray(yb),db.buffer=null),db.x!==ec||db.y!==Ua||db.z!==qc||db.w!==mc)x.vertexAttrib4f(yb,ec,Ua,qc,mc),db.x=ec,db.y=Ua,db.z=qc,db.w=mc;bb=C.fill;ob=bb[0];gd=bb[1];Jb=bb[2];Ob=bb[3];n&&Va===ob&&Ib===gd&&rc===Jb&&jb===Ob||(Va=ob,Ib=gd,rc=Jb,jb=Ob,x.uniform4f(B.location,ob,gd,Jb,Ob));Gb=C.scale;Db=Gb[0];hb=Gb[1];n&&wb===Db&&Yb===hb||(wb=Db,Yb=hb,x.uniform2f(ca.location,Db,hb));Pb=C.scaleFract;qb=Pb[0];Ub=Pb[1];n&&Ra===qb&&zb===Ub||(Ra=qb,zb=Ub,x.uniform2f(w.location,qb,Ub));ic=C.translate;
ib=ic[0];Ha=ic[1];n&&pb===ib&&rb===Ha||(pb=ib,rb=Ha,x.uniform2f(T.location,ib,Ha));Ka=C.translateFract;fb=Ka[0];La=Ka[1];n&&gb===fb&&kb===La||(gb=fb,kb=La,x.uniform2f(z.location,fb,La));Wa=C.id;n&&tb===Wa||(tb=Wa,x.uniform1f(U.location,Wa));sb=C.opacity;n&&Oa===sb||(Oa=sb,x.uniform1f(m.location,sb));tc=H.call(this,g,C,n);Qa=null;(Qa=(Kb=Y(tc))?k.createStream(tc):k.getElements(tc))&&x.bindBuffer(34963,Qa.buffer.buffer);if(Eb=Qa?Qa.vertCount:-1)0<Ed?Qa?q.drawElementsInstancedANGLE(4,Eb,Qa.type,0<<(Qa.type-
5121>>1),Ed):q.drawArraysInstancedANGLE(4,0,Eb,Ed):0>Ed&&(Qa?x.drawElements(4,Eb,Qa.type,0<<(Qa.type-5121>>1)):x.drawArrays(4,0,Eb)),g.viewportWidth=Re,g.viewportHeight=Gd,ld&&ia.destroyStream(ad),lc&&ia.destroyStream(Hc),Kb&&k.destroyStream(Qa)}v.dirty=!0;t.setVAO(null);l&&(ba.cpuTime+=performance.now()-b)},draw:function(a){var d,c,l,b,q,n,p,e,A,F,H,ga,I,sa,Da,oa,xa,Ea,ma,V,wa,G;d=f.next;d!==f.cur&&(d?x.bindFramebuffer(36160,d.framebuffer):x.bindFramebuffer(36160,null),f.cur=d);if(v.dirty){d=D.dither;
d!==v.dither&&(d?x.enable(3024):x.disable(3024),v.dither=d);d=D.depth_func;d!==v.depth_func&&(x.depthFunc(d),v.depth_func=d);d=O[0];n=O[1];if(d!==E[0]||n!==E[1])x.depthRange(d,n),E[0]=d,E[1]=n;d=D.depth_mask;d!==v.depth_mask&&(x.depthMask(d),v.depth_mask=d);d=ea[0];n=ea[1];c=ea[2];l=ea[3];if(d!==R[0]||n!==R[1]||c!==R[2]||l!==R[3])x.colorMask(d,n,c,l),R[0]=d,R[1]=n,R[2]=c,R[3]=l;d=D.cull_enable;d!==v.cull_enable&&(d?x.enable(2884):x.disable(2884),v.cull_enable=d);d=D.cull_face;d!==v.cull_face&&(x.cullFace(d),
v.cull_face=d);d=D.frontFace;d!==v.frontFace&&(x.frontFace(d),v.frontFace=d);d=D.lineWidth;d!==v.lineWidth&&(x.lineWidth(d),v.lineWidth=d);d=D.polygonOffset_enable;d!==v.polygonOffset_enable&&(d?x.enable(32823):x.disable(32823),v.polygonOffset_enable=d);d=h[0];n=h[1];if(d!==N[0]||n!==N[1])x.polygonOffset(d,n),N[0]=d,N[1]=n;d=D.sample_alpha;d!==v.sample_alpha&&(d?x.enable(32926):x.disable(32926),v.sample_alpha=d);d=D.sample_enable;d!==v.sample_enable&&(d?x.enable(32928):x.disable(32928),v.sample_enable=
d);d=K[0];n=K[1];if(d!==Ca[0]||n!==Ca[1])x.sampleCoverage(d,n),Ca[0]=d,Ca[1]=n;d=D.stencil_mask;d!==v.stencil_mask&&(x.stencilMask(d),v.stencil_mask=d);d=J[0];n=J[1];c=J[2];if(d!==aa[0]||n!==aa[1]||c!==aa[2])x.stencilFunc(d,n,c),aa[0]=d,aa[1]=n,aa[2]=c;d=qa[0];n=qa[1];c=qa[2];l=qa[3];if(d!==za[0]||n!==za[1]||c!==za[2]||l!==za[3])x.stencilOpSeparate(d,n,c,l),za[0]=d,za[1]=n,za[2]=c,za[3]=l;d=P[0];n=P[1];c=P[2];l=P[3];if(d!==la[0]||n!==la[1]||c!==la[2]||l!==la[3])x.stencilOpSeparate(d,n,c,l),la[0]=
d,la[1]=n,la[2]=c,la[3]=l}d=a.viewport;c=d.x|0;l=d.y|0;b="width"in d?d.width|0:g.framebufferWidth-c;q="height"in d?d.height|0:g.framebufferHeight-l;d=g.viewportWidth;g.viewportWidth=b;n=g.viewportHeight;g.viewportHeight=q;x.viewport(c,l,b,q);fa[0]=c;fa[1]=l;fa[2]=b;fa[3]=q;x.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;x.enable(3042);v.blend_enable=!0;x.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;x.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;x.disable(2929);
v.depth_enable=!1;q=a.viewport;c=q.x|0;l=q.y|0;b="width"in q?q.width|0:g.framebufferWidth-c;q="height"in q?q.height|0:g.framebufferHeight-l;x.scissor(c,l,b,q);r[0]=c;r[1]=l;r[2]=b;r[3]=q;x.enable(3089);v.scissor_enable=!0;x.disable(2960);v.stencil_enable=!1;if(c=v.profile)p=performance.now(),ba.count++;x.useProgram(M.program);l=X.angle_instanced_arrays;t.setVAO(null);ka.buffer=a.positionBuffer;b=!1;e=0;A=!1;H=F=0;ga=1;I=0;sa=5126;Ea=xa=oa=Da=0;Y(ka)?(b=!0,q=ia.createStream(34962,ka),sa=q.dtype):(q=
ia.getBuffer(ka))?sa=q.dtype:"constant"in ka?(ga=2,"number"===typeof ka.constant?(oa=ka.constant,xa=Ea=Da=0):(oa=0<ka.constant.length?ka.constant[0]:0,xa=1<ka.constant.length?ka.constant[1]:0,Ea=2<ka.constant.length?ka.constant[2]:0,Da=3<ka.constant.length?ka.constant[3]:0)):(q=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),sa="type"in ka?Aa[ka.type]:q.dtype,A=!!ka.normalized,H=ka.size|0,F=ka.offset|0,I=ka.stride|0,e=ka.divisor|0);ma=u.location;V=Q[ma];if(1===ga){V.buffer||
x.enableVertexAttribArray(ma);H=H||2;if(V.type!==sa||V.size!==H||V.buffer!==q||V.normalized!==A||V.offset!==F||V.stride!==I)x.bindBuffer(34962,q.buffer),x.vertexAttribPointer(ma,H,sa,A,I,F),V.type=sa,V.size=H,V.buffer=q,V.normalized=A,V.offset=F,V.stride=I;V.divisor!==e&&(l.vertexAttribDivisorANGLE(ma,e),V.divisor=e)}else if(V.buffer&&(x.disableVertexAttribArray(ma),V.buffer=null),V.x!==oa||V.y!==xa||V.z!==Ea||V.w!==Da)x.vertexAttrib4f(ma,oa,xa,Ea,Da),V.x=oa,V.y=xa,V.z=Ea,V.w=Da;pa.buffer=a.positionFractBuffer;
e=!1;F=0;I=!1;Da=sa=0;oa=1;ma=0;V=5126;G=wa=Ea=xa=0;Y(pa)?(e=!0,A=ia.createStream(34962,pa),V=A.dtype):(A=ia.getBuffer(pa))?V=A.dtype:"constant"in pa?(oa=2,"number"===typeof pa.constant?(Ea=pa.constant,wa=G=xa=0):(Ea=0<pa.constant.length?pa.constant[0]:0,wa=1<pa.constant.length?pa.constant[1]:0,G=2<pa.constant.length?pa.constant[2]:0,xa=3<pa.constant.length?pa.constant[3]:0)):(A=Y(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),V="type"in pa?Aa[pa.type]:A.dtype,I=!!pa.normalized,
Da=pa.size|0,sa=pa.offset|0,ma=pa.stride|0,F=pa.divisor|0);H=y.location;ga=Q[H];if(1===oa){ga.buffer||x.enableVertexAttribArray(H);Da=Da||2;if(ga.type!==V||ga.size!==Da||ga.buffer!==A||ga.normalized!==I||ga.offset!==sa||ga.stride!==ma)x.bindBuffer(34962,A.buffer),x.vertexAttribPointer(H,Da,V,I,ma,sa),ga.type=V,ga.size=Da,ga.buffer=A,ga.normalized=I,ga.offset=sa,ga.stride=ma;ga.divisor!==F&&(l.vertexAttribDivisorANGLE(H,F),ga.divisor=F)}else if(ga.buffer&&(x.disableVertexAttribArray(H),ga.buffer=null),
ga.x!==Ea||ga.y!==wa||ga.z!==G||ga.w!==xa)x.vertexAttrib4f(H,Ea,wa,G,xa),ga.x=Ea,ga.y=wa,ga.z=G,ga.w=xa;F=a.fill;x.uniform4f(B.location,F[0],F[1],F[2],F[3]);F=a.scale;x.uniform2f(ca.location,F[0],F[1]);F=a.scaleFract;x.uniform2f(w.location,F[0],F[1]);F=a.translate;x.uniform2f(T.location,F[0],F[1]);F=a.translateFract;x.uniform2f(z.location,F[0],F[1]);x.uniform1f(U.location,a.id);x.uniform1f(m.location,a.opacity);F=L.call(this,g,a,0);(F=(a=Y(F))?k.createStream(F):k.getElements(F))&&x.bindBuffer(34963,
F.buffer.buffer);if(I=F?F.vertCount:-1)sa=S.instances,0<sa?F?l.drawElementsInstancedANGLE(4,I,F.type,0<<(F.type-5121>>1),sa):l.drawArraysInstancedANGLE(4,0,I,sa):0>sa&&(F?x.drawElements(4,I,F.type,0<<(F.type-5121>>1)):x.drawArrays(4,0,I)),v.dirty=!0,t.setVAO(null),g.viewportWidth=d,g.viewportHeight=n,c&&(ba.cpuTime+=performance.now()-p),b&&ia.destroyStream(q),e&&ia.destroyStream(A),a&&k.destroyStream(F)},scope:function(h,f,r){var b,t,q,n,C,x,J,w,O,P,I,sa,Da,E,fa,R,L,u,K,m,z,aa,N,H,y,qa,M,Ca,G,Q,B,
U,T,W,X,ea,ca,la,ta,ja,za,Z,ha,Re,Gd,Ae,te,Zd,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb;b=h.viewport;t=b.x|0;q=b.y|0;n="width"in b?b.width|0:g.framebufferWidth-t;C="height"in b?b.height|0:g.framebufferHeight-q;x=g.viewportWidth;g.viewportWidth=n;J=g.viewportHeight;g.viewportHeight=C;w=wa[0];wa[0]=t;O=wa[1];wa[1]=q;P=wa[2];wa[2]=n;I=wa[3];wa[3]=
C;sa=a[0];a[0]=0;Da=a[1];a[1]=0;E=a[2];a[2]=0;fa=a[3];a[3]=0;R=D.blend_enable;D.blend_enable=!0;L=A[0];A[0]=32774;u=A[1];A[1]=32774;K=Dc[0];Dc[0]=770;m=Dc[1];Dc[1]=771;z=Dc[2];Dc[2]=773;aa=Dc[3];Dc[3]=1;N=D.depth_enable;D.depth_enable=!1;H=h.viewport;y=H.x|0;qa=H.y|0;M="width"in H?H.width|0:g.framebufferWidth-y;Ca="height"in H?H.height|0:g.framebufferHeight-qa;G=ra[0];ra[0]=y;Q=ra[1];ra[1]=qa;B=ra[2];ra[2]=M;U=ra[3];ra[3]=Ca;T=D.scissor_enable;D.scissor_enable=!0;W=D.stencil_enable;D.stencil_enable=
!1;if(X=v.profile)ea=performance.now(),ba.count++;ca=e.call(this,g,h,r);la=null;la=(ta=Y(ca))?k.createStream(ca):k.getElements(ca);ja=S.elements;S.elements=la;za=S.offset;S.offset=0;Z=la?la.vertCount:-1;ha=S.count;S.count=Z;Re=S.primitive;S.primitive=4;Gd=h.fill;Ae=d[14];d[14]=Gd;te=h.id;Zd=d[31];d[31]=te;Bd=h.opacity;$d=d[10];d[10]=Bd;ld=g.pixelRatio;ad=d[34];d[34]=ld;pd=h.scale;Lc=d[6];d[6]=pd;nd=h.scaleFract;Gc=d[7];d[7]=nd;ed=h.translate;Pc=d[8];d[8]=ed;kd=h.translateFract;Bb=d[9];d[9]=kd;Fb=
l.call(this,g,h,r);vc=d[3];d[3]=Fb;ka.buffer=h.positionBuffer;xb=!1;yc=null;Cb=0;Jc=!1;Hc=lc=0;Wc=1;Vc=0;Ec=5126;pc=oc=Ic=dc=0;Y(ka)?(xb=!0,yc=ia.createStream(34962,ka),Ec=yc.dtype):(yc=ia.getBuffer(ka))?Ec=yc.dtype:"constant"in ka?(Wc=2,"number"===typeof ka.constant?(Ic=ka.constant,oc=pc=dc=0):(Ic=0<ka.constant.length?ka.constant[0]:0,oc=1<ka.constant.length?ka.constant[1]:0,pc=2<ka.constant.length?ka.constant[2]:0,dc=3<ka.constant.length?ka.constant[3]:0)):(yc=Y(ka.buffer)?ia.createStream(34962,
ka.buffer):ia.getBuffer(ka.buffer),Ec="type"in ka?Aa[ka.type]:yc.dtype,Jc=!!ka.normalized,Hc=ka.size|0,lc=ka.offset|0,Vc=ka.stride|0,Cb=ka.divisor|0);mc=p.buffer;p.buffer=yc;ec=p.divisor;p.divisor=Cb;Ua=p.normalized;p.normalized=Jc;qc=p.offset;p.offset=lc;yb=p.size;p.size=Hc;db=p.state;p.state=Wc;Nb=p.stride;p.stride=Vc;bb=p.type;p.type=Ec;ob=p.w;p.w=dc;Va=p.x;p.x=Ic;gd=p.y;p.y=oc;Ib=p.z;p.z=pc;pa.buffer=h.positionFractBuffer;Jb=!1;rc=null;Ob=0;jb=!1;Db=Gb=0;wb=1;hb=0;Yb=5126;Ub=Ra=qb=Pb=0;Y(pa)?
(Jb=!0,rc=ia.createStream(34962,pa),Yb=rc.dtype):(rc=ia.getBuffer(pa))?Yb=rc.dtype:"constant"in pa?(wb=2,"number"===typeof pa.constant?(qb=pa.constant,Ra=Ub=Pb=0):(qb=0<pa.constant.length?pa.constant[0]:0,Ra=1<pa.constant.length?pa.constant[1]:0,Ub=2<pa.constant.length?pa.constant[2]:0,Pb=3<pa.constant.length?pa.constant[3]:0)):(rc=Y(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),Yb="type"in pa?Aa[pa.type]:rc.dtype,jb=!!pa.normalized,Db=pa.size|0,Gb=pa.offset|0,hb=pa.stride|0,
Ob=pa.divisor|0);zb=c.buffer;c.buffer=rc;ic=c.divisor;c.divisor=Ob;ib=c.normalized;c.normalized=jb;pb=c.offset;c.offset=Gb;Ha=c.size;c.size=Db;rb=c.state;c.state=wb;Ka=c.stride;c.stride=hb;fb=c.type;c.type=Yb;gb=c.w;c.w=Pb;La=c.x;c.x=qb;kb=c.y;c.y=Ra;Wa=c.z;c.z=Ub;tb=F.vert;F.vert=42;sb=F.frag;F.frag=41;v.dirty=!0;f(g,h,r);g.viewportWidth=x;g.viewportHeight=J;wa[0]=w;wa[1]=O;wa[2]=P;wa[3]=I;a[0]=sa;a[1]=Da;a[2]=E;a[3]=fa;D.blend_enable=R;A[0]=L;A[1]=u;Dc[0]=K;Dc[1]=m;Dc[2]=z;Dc[3]=aa;D.depth_enable=
N;ra[0]=G;ra[1]=Q;ra[2]=B;ra[3]=U;D.scissor_enable=T;D.stencil_enable=W;X&&(ba.cpuTime+=performance.now()-ea);ta&&k.destroyStream(la);S.elements=ja;S.offset=za;S.count=ha;S.primitive=Re;d[14]=Ae;d[31]=Zd;d[10]=$d;d[34]=ad;d[6]=Lc;d[7]=Gc;d[8]=Pc;d[9]=Bb;d[3]=vc;xb&&ia.destroyStream(yc);p.buffer=mc;p.divisor=ec;p.normalized=Ua;p.offset=qc;p.size=yb;p.state=db;p.stride=Nb;p.type=bb;p.w=ob;p.x=Va;p.y=gd;p.z=Ib;Jb&&ia.destroyStream(rc);c.buffer=zb;c.divisor=ic;c.normalized=ib;c.offset=pb;c.size=Ha;c.state=
rb;c.stride=Ka;c.type=fb;c.w=gb;c.x=La;c.y=kb;c.z=Wa;F.vert=tb;F.frag=sb;v.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Z,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta){var q,n,C,va,Ba,xd,Hb,ga,I,sa,Da,oa,xa,Ea,ma,V,ua,Fa,Ia,mb,da,ha,
$b,Ga,ac,Sb,ab,Dd,re,Wd,ze,Ad,Rd,oe,ie,Ed,Yd,fe,Md;q=b.attributes;n=b.buffer;C=b.context;va=b.current;Ba=b.draw;xd=b.elements;Hb=b.extensions;ga=b.framebuffer;I=b.gl;sa=b.isBufferArgs;Da=b.next;oa=b.shader;xa=b.uniforms;Ea=b.vao;ma=Da.blend_color;V=va.blend_color;ua=Da.blend_equation;Fa=va.blend_equation;Ia=Da.blend_func;mb=va.blend_func;da=Da.colorMask;ha=va.colorMask;$b=Da.depth_range;Ga=va.depth_range;ac=Da.polygonOffset_offset;Sb=va.polygonOffset_offset;ab=Da.sample_coverage;Dd=va.sample_coverage;
re=Da.scissor_box;Wd=va.scissor_box;ze=Da.stencil_func;Ad=va.stencil_func;Rd=Da.stencil_opBack;oe=va.stencil_opBack;ie=Da.stencil_opFront;Ed=va.stencil_opFront;Yd=Da.viewport;fe=va.viewport;Md={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,d){var c,f,g,l,k,b;c=ga.next;c!==ga.cur&&(c?I.bindFramebuffer(36160,c.framebuffer):I.bindFramebuffer(36160,null),ga.cur=c);if(va.dirty){var p,t,v,x,e,w,F,oa,L,D,u,ma,m,z,H,y,xa,M,G,Q,S,B,U,
T,X,ca,ia,Y,Ia,qc,yb,db,Nb,bb;p=Da.dither;p!==va.dither&&(p?I.enable(3024):I.disable(3024),va.dither=p);t=ua[0];v=ua[1];if(t!==Fa[0]||v!==Fa[1])I.blendEquationSeparate(t,v),Fa[0]=t,Fa[1]=v;x=Da.depth_func;x!==va.depth_func&&(I.depthFunc(x),va.depth_func=x);e=$b[0];w=$b[1];if(e!==Ga[0]||w!==Ga[1])I.depthRange(e,w),Ga[0]=e,Ga[1]=w;F=Da.depth_mask;F!==va.depth_mask&&(I.depthMask(F),va.depth_mask=F);oa=da[0];L=da[1];D=da[2];u=da[3];if(oa!==ha[0]||L!==ha[1]||D!==ha[2]||u!==ha[3])I.colorMask(oa,L,D,u),
ha[0]=oa,ha[1]=L,ha[2]=D,ha[3]=u;ma=Da.cull_enable;ma!==va.cull_enable&&(ma?I.enable(2884):I.disable(2884),va.cull_enable=ma);m=Da.cull_face;m!==va.cull_face&&(I.cullFace(m),va.cull_face=m);z=Da.frontFace;z!==va.frontFace&&(I.frontFace(z),va.frontFace=z);H=Da.lineWidth;H!==va.lineWidth&&(I.lineWidth(H),va.lineWidth=H);y=Da.polygonOffset_enable;y!==va.polygonOffset_enable&&(y?I.enable(32823):I.disable(32823),va.polygonOffset_enable=y);xa=ac[0];M=ac[1];if(xa!==Sb[0]||M!==Sb[1])I.polygonOffset(xa,M),
Sb[0]=xa,Sb[1]=M;G=Da.sample_alpha;G!==va.sample_alpha&&(G?I.enable(32926):I.disable(32926),va.sample_alpha=G);Q=Da.sample_enable;Q!==va.sample_enable&&(Q?I.enable(32928):I.disable(32928),va.sample_enable=Q);S=ab[0];B=ab[1];if(S!==Dd[0]||B!==Dd[1])I.sampleCoverage(S,B),Dd[0]=S,Dd[1]=B;U=Da.stencil_mask;U!==va.stencil_mask&&(I.stencilMask(U),va.stencil_mask=U);T=ze[0];X=ze[1];ca=ze[2];if(T!==Ad[0]||X!==Ad[1]||ca!==Ad[2])I.stencilFunc(T,X,ca),Ad[0]=T,Ad[1]=X,Ad[2]=ca;ia=ie[0];Y=ie[1];Ia=ie[2];qc=ie[3];
if(ia!==Ed[0]||Y!==Ed[1]||Ia!==Ed[2]||qc!==Ed[3])I.stencilOpSeparate(ia,Y,Ia,qc),Ed[0]=ia,Ed[1]=Y,Ed[2]=Ia,Ed[3]=qc;yb=Rd[0];db=Rd[1];Nb=Rd[2];bb=Rd[3];if(yb!==oe[0]||db!==oe[1]||Nb!==oe[2]||bb!==oe[3])I.stencilOpSeparate(yb,db,Nb,bb),oe[0]=yb,oe[1]=db,oe[2]=Nb,oe[3]=bb}I.blendColor(0,0,0,1);V[0]=0;V[1]=0;V[2]=0;V[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;I.enable(3089);va.scissor_enable=!0;I.disable(2960);
va.stencil_enable=!1;if(f=va.profile)g=performance.now(),ba.count+=d;I.useProgram(ta.program);l=Hb.angle_instanced_arrays;var ob;Ea.setVAO(null);I.uniform1i(J.location,!1);I.uniform1i(za.location,N.bind());ob=Ba.instances;for(k=0;k<d;++k){b=a[k];var Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,re,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,
Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Yd,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf;Va=b.viewport;gd=Va.x|0;Ib=Va.y|0;Jb="width"in Va?Va.width|0:C.framebufferWidth-gd;rc="height"in Va?Va.height|0:C.framebufferHeight-Ib;Ob=C.viewportWidth;
C.viewportWidth=Jb;jb=C.viewportHeight;C.viewportHeight=rc;I.viewport(gd,Ib,Jb,rc);fe[0]=gd;fe[1]=Ib;fe[2]=Jb;fe[3]=rc;Gb=b.viewport;Db=Gb.x|0;wb=Gb.y|0;hb="width"in Gb?Gb.width|0:C.framebufferWidth-Db;Yb="height"in Gb?Gb.height|0:C.framebufferHeight-wb;I.scissor(Db,wb,hb,Yb);Wd[0]=Db;Wd[1]=wb;Wd[2]=hb;Wd[3]=Yb;Pb=A.call(this,C,b,k);qb=!1;Ra=null;Ub=0;zb=!1;ib=ic=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;sa(Pb)?(qb=!0,Ra=n.createStream(34962,Pb),rb=Ra.dtype):(Ra=n.getBuffer(Pb))?rb=Ra.dtype:"constant"in Pb?
(pb=2,"number"===typeof Pb.constant?(fb=Pb.constant,gb=La=Ka=0):(fb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,La=2<Pb.constant.length?Pb.constant[2]:0,Ka=3<Pb.constant.length?Pb.constant[3]:0)):(Ra=sa(Pb.buffer)?n.createStream(34962,Pb.buffer):n.getBuffer(Pb.buffer),rb="type"in Pb?Md[Pb.type]:Ra.dtype,zb=!!Pb.normalized,ib=Pb.size|0,ic=Pb.offset|0,Ha=Pb.stride|0,Ub=Pb.divisor|0);kb=Ja.location;Wa=q[kb];if(1===pb){Wa.buffer||I.enableVertexAttribArray(kb);tb=ib||
1;if(Wa.type!==rb||Wa.size!==tb||Wa.buffer!==Ra||Wa.normalized!==zb||Wa.offset!==ic||Wa.stride!==Ha)I.bindBuffer(34962,Ra.buffer),I.vertexAttribPointer(kb,tb,rb,zb,Ha,ic),Wa.type=rb,Wa.size=tb,Wa.buffer=Ra,Wa.normalized=zb,Wa.offset=ic,Wa.stride=Ha;Wa.divisor!==Ub&&(l.vertexAttribDivisorANGLE(kb,Ub),Wa.divisor=Ub)}else if(Wa.buffer&&(I.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==fb||Wa.y!==gb||Wa.z!==La||Wa.w!==Ka)I.vertexAttrib4f(kb,fb,gb,La,Ka),Wa.x=fb,Wa.y=gb,Wa.z=La,Wa.w=Ka;sb=ja.call(this,
C,b,k);Oa=!1;tc=null;Qa=0;Kb=!1;Ma=Eb=0;zd=1;Ya=0;Lb=5126;Zb=Na=lb=Mb=0;sa(sb)?(Oa=!0,tc=n.createStream(34962,sb),Lb=tc.dtype):(tc=n.getBuffer(sb))?Lb=tc.dtype:"constant"in sb?(zd=2,"number"===typeof sb.constant?(lb=sb.constant,Na=Zb=Mb=0):(lb=0<sb.constant.length?sb.constant[0]:0,Na=1<sb.constant.length?sb.constant[1]:0,Zb=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?sb.constant[3]:0)):(tc=sa(sb.buffer)?n.createStream(34962,sb.buffer):n.getBuffer(sb.buffer),Lb="type"in sb?Md[sb.type]:
tc.dtype,Kb=!!sb.normalized,Ma=sb.size|0,Eb=sb.offset|0,Ya=sb.stride|0,Qa=sb.divisor|0);Pa=$a.location;ub=q[Pa];if(1===zd){ub.buffer||I.enableVertexAttribArray(Pa);vb=Ma||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==tc||ub.normalized!==Kb||ub.offset!==Eb||ub.stride!==Ya)I.bindBuffer(34962,tc.buffer),I.vertexAttribPointer(Pa,vb,Lb,Kb,Ya,Eb),ub.type=Lb,ub.size=vb,ub.buffer=tc,ub.normalized=Kb,ub.offset=Eb,ub.stride=Ya;ub.divisor!==Qa&&(l.vertexAttribDivisorANGLE(Pa,Qa),ub.divisor=Qa)}else if(ub.buffer&&
(I.disableVertexAttribArray(Pa),ub.buffer=null),ub.x!==lb||ub.y!==Na||ub.z!==Zb||ub.w!==Mb)I.vertexAttrib4f(Pa,lb,Na,Zb,Mb),ub.x=lb,ub.y=Na,ub.z=Zb,ub.w=Mb;Sa=Z.call(this,C,b,k);nb=!1;fc=null;Bc=0;wc=!1;jc=cb=0;qd=1;Xa=0;Mc=5126;uc=Vb=Za=Ab=0;sa(Sa)?(nb=!0,fc=n.createStream(34962,Sa),Mc=fc.dtype):(fc=n.getBuffer(Sa))?Mc=fc.dtype:"constant"in Sa?(qd=2,"number"===typeof Sa.constant?(Za=Sa.constant,Vb=uc=Ab=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?
Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(fc=sa(Sa.buffer)?n.createStream(34962,Sa.buffer):n.getBuffer(Sa.buffer),Mc="type"in Sa?Md[Sa.type]:fc.dtype,wc=!!Sa.normalized,jc=Sa.size|0,cb=Sa.offset|0,Xa=Sa.stride|0,Bc=Sa.divisor|0);Wb=na.location;Qb=q[Wb];if(1===qd){Qb.buffer||I.enableVertexAttribArray(Wb);Kc=jc||1;if(Qb.type!==Mc||Qb.size!==Kc||Qb.buffer!==fc||Qb.normalized!==wc||Qb.offset!==cb||Qb.stride!==Xa)I.bindBuffer(34962,fc.buffer),I.vertexAttribPointer(Wb,Kc,Mc,wc,Xa,cb),
Qb.type=Mc,Qb.size=Kc,Qb.buffer=fc,Qb.normalized=wc,Qb.offset=cb,Qb.stride=Xa;Qb.divisor!==Bc&&(l.vertexAttribDivisorANGLE(Wb,Bc),Qb.divisor=Bc)}else if(Qb.buffer&&(I.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==Za||Qb.y!==Vb||Qb.z!==uc||Qb.w!==Ab)I.vertexAttrib4f(Wb,Za,Vb,uc,Ab),Qb.x=Za,Qb.y=Vb,Qb.z=uc,Qb.w=Ab;Rb=W.call(this,C,b,k);re=!1;Fc=null;sd=0;Nc=!1;td=Xc=0;nc=1;xc=0;gc=5126;Xb=Tb=sc=eb=0;sa(Rb)?(re=!0,Fc=n.createStream(34962,Rb),gc=Fc.dtype):(Fc=n.getBuffer(Rb))?gc=Fc.dtype:"constant"in
Rb?(nc=2,"number"===typeof Rb.constant?(sc=Rb.constant,Tb=Xb=eb=0):(sc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Xb=2<Rb.constant.length?Rb.constant[2]:0,eb=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=sa(Rb.buffer)?n.createStream(34962,Rb.buffer):n.getBuffer(Rb.buffer),gc="type"in Rb?Md[Rb.type]:Fc.dtype,Nc=!!Rb.normalized,td=Rb.size|0,Xc=Rb.offset|0,xc=Rb.stride|0,sd=Rb.divisor|0);cc=Ta.location;hc=q[cc];if(1===nc){hc.buffer||I.enableVertexAttribArray(cc);zc=
td||1;if(hc.type!==gc||hc.size!==zc||hc.buffer!==Fc||hc.normalized!==Nc||hc.offset!==Xc||hc.stride!==xc)I.bindBuffer(34962,Fc.buffer),I.vertexAttribPointer(cc,zc,gc,Nc,xc,Xc),hc.type=gc,hc.size=zc,hc.buffer=Fc,hc.normalized=Nc,hc.offset=Xc,hc.stride=xc;hc.divisor!==sd&&(l.vertexAttribDivisorANGLE(cc,sd),hc.divisor=sd)}else if(hc.buffer&&(I.disableVertexAttribArray(cc),hc.buffer=null),hc.x!==sc||hc.y!==Tb||hc.z!==Xb||hc.w!==eb)I.vertexAttrib4f(cc,sc,Tb,Xb,eb),hc.x=sc,hc.y=Tb,hc.z=Xb,hc.w=eb;Cc=ea.call(this,
C,b,k);bd=!1;Qc=null;Rc=0;Sc=!1;od=Yc=0;cd=1;Zc=0;kc=5126;dd=Uc=$c=bc=0;sa(Cc)?(bd=!0,Qc=n.createStream(34962,Cc),kc=Qc.dtype):(Qc=n.getBuffer(Cc))?kc=Qc.dtype:"constant"in Cc?(cd=2,"number"===typeof Cc.constant?($c=Cc.constant,Uc=dd=bc=0):($c=0<Cc.constant.length?Cc.constant[0]:0,Uc=1<Cc.constant.length?Cc.constant[1]:0,dd=2<Cc.constant.length?Cc.constant[2]:0,bc=3<Cc.constant.length?Cc.constant[3]:0)):(Qc=sa(Cc.buffer)?n.createStream(34962,Cc.buffer):n.getBuffer(Cc.buffer),kc="type"in Cc?Md[Cc.type]:
Qc.dtype,Sc=!!Cc.normalized,od=Cc.size|0,Yc=Cc.offset|0,Zc=Cc.stride|0,Rc=Cc.divisor|0);Ac=ka.location;hd=q[Ac];if(1===cd){hd.buffer||I.enableVertexAttribArray(Ac);Yd=od||1;if(hd.type!==kc||hd.size!==Yd||hd.buffer!==Qc||hd.normalized!==Sc||hd.offset!==Yc||hd.stride!==Zc)I.bindBuffer(34962,Qc.buffer),I.vertexAttribPointer(Ac,Yd,kc,Sc,Zc,Yc),hd.type=kc,hd.size=Yd,hd.buffer=Qc,hd.normalized=Sc,hd.offset=Yc,hd.stride=Zc;hd.divisor!==Rc&&(l.vertexAttribDivisorANGLE(Ac,Rc),hd.divisor=Rc)}else if(hd.buffer&&
(I.disableVertexAttribArray(Ac),hd.buffer=null),hd.x!==$c||hd.y!==Uc||hd.z!==dd||hd.w!==bc)I.vertexAttrib4f(Ac,$c,Uc,dd,bc),hd.x=$c,hd.y=Uc,hd.z=dd,hd.w=bc;wd=R.call(this,C,b,k);ue=!1;id=null;Ce=0;Od=!1;ce=ge=0;Pd=1;Jd=0;Hd=5126;rd=ud=Tc=md=0;sa(wd)?(ue=!0,id=n.createStream(34962,wd),Hd=id.dtype):(id=n.getBuffer(wd))?Hd=id.dtype:"constant"in wd?(Pd=2,"number"===typeof wd.constant?(Tc=wd.constant,ud=rd=md=0):(Tc=0<wd.constant.length?wd.constant[0]:0,ud=1<wd.constant.length?wd.constant[1]:0,rd=2<wd.constant.length?
wd.constant[2]:0,md=3<wd.constant.length?wd.constant[3]:0)):(id=sa(wd.buffer)?n.createStream(34962,wd.buffer):n.getBuffer(wd.buffer),Hd="type"in wd?Md[wd.type]:id.dtype,Od=!!wd.normalized,ce=wd.size|0,ge=wd.offset|0,Jd=wd.stride|0,Ce=wd.divisor|0);jd=ra.location;vd=q[jd];if(1===Pd){vd.buffer||I.enableVertexAttribArray(jd);Cd=ce||1;if(vd.type!==Hd||vd.size!==Cd||vd.buffer!==id||vd.normalized!==Od||vd.offset!==ge||vd.stride!==Jd)I.bindBuffer(34962,id.buffer),I.vertexAttribPointer(jd,Cd,Hd,Od,Jd,ge),
vd.type=Hd,vd.size=Cd,vd.buffer=id,vd.normalized=Od,vd.offset=ge,vd.stride=Jd;vd.divisor!==Ce&&(l.vertexAttribDivisorANGLE(jd,Ce),vd.divisor=Ce)}else if(vd.buffer&&(I.disableVertexAttribArray(jd),vd.buffer=null),vd.x!==Tc||vd.y!==ud||vd.z!==rd||vd.w!==md)I.vertexAttrib4f(jd,Tc,ud,rd,md),vd.x=Tc,vd.y=ud,vd.z=rd,vd.w=md;Fd=O.call(this,C,b,k);je=!1;ye=null;Fe=0;le=!1;he=ke=0;ve=1;de=0;me=5126;qe=we=fd=Oc=0;sa(Fd)?(je=!0,ye=n.createStream(34962,Fd),me=ye.dtype):(ye=n.getBuffer(Fd))?me=ye.dtype:"constant"in
Fd?(ve=2,"number"===typeof Fd.constant?(fd=Fd.constant,we=qe=Oc=0):(fd=0<Fd.constant.length?Fd.constant[0]:0,we=1<Fd.constant.length?Fd.constant[1]:0,qe=2<Fd.constant.length?Fd.constant[2]:0,Oc=3<Fd.constant.length?Fd.constant[3]:0)):(ye=sa(Fd.buffer)?n.createStream(34962,Fd.buffer):n.getBuffer(Fd.buffer),me="type"in Fd?Md[Fd.type]:ye.dtype,le=!!Fd.normalized,he=Fd.size|0,ke=Fd.offset|0,de=Fd.stride|0,Fe=Fd.divisor|0);Kd=r.location;Qd=q[Kd];if(1===ve){Qd.buffer||I.enableVertexAttribArray(Kd);Sd=he||
4;if(Qd.type!==me||Qd.size!==Sd||Qd.buffer!==ye||Qd.normalized!==le||Qd.offset!==ke||Qd.stride!==de)I.bindBuffer(34962,ye.buffer),I.vertexAttribPointer(Kd,Sd,me,le,de,ke),Qd.type=me,Qd.size=Sd,Qd.buffer=ye,Qd.normalized=le,Qd.offset=ke,Qd.stride=de;Qd.divisor!==Fe&&(l.vertexAttribDivisorANGLE(Kd,Fe),Qd.divisor=Fe)}else if(Qd.buffer&&(I.disableVertexAttribArray(Kd),Qd.buffer=null),Qd.x!==fd||Qd.y!==we||Qd.z!==qe||Qd.w!==Oc)I.vertexAttrib4f(Kd,fd,we,qe,Oc),Qd.x=fd,Qd.y=we,Qd.z=qe,Qd.w=Oc;Td=E.call(this,
C,b,k);ne=!1;Ge=null;Be=0;se=!1;Te=Se=0;Oe=1;xe=0;He=5126;Ie=Le=Ke=Je=0;sa(Td)?(ne=!0,Ge=n.createStream(34962,Td),He=Ge.dtype):(Ge=n.getBuffer(Td))?He=Ge.dtype:"constant"in Td?(Oe=2,"number"===typeof Td.constant?(Ke=Td.constant,Le=Ie=Je=0):(Ke=0<Td.constant.length?Td.constant[0]:0,Le=1<Td.constant.length?Td.constant[1]:0,Ie=2<Td.constant.length?Td.constant[2]:0,Je=3<Td.constant.length?Td.constant[3]:0)):(Ge=sa(Td.buffer)?n.createStream(34962,Td.buffer):n.getBuffer(Td.buffer),He="type"in Td?Md[Td.type]:
Ge.dtype,se=!!Td.normalized,Te=Td.size|0,Se=Td.offset|0,xe=Td.stride|0,Be=Td.divisor|0);Ld=Ca.location;Xd=q[Ld];if(1===Oe){Xd.buffer||I.enableVertexAttribArray(Ld);be=Te||4;if(Xd.type!==He||Xd.size!==be||Xd.buffer!==Ge||Xd.normalized!==se||Xd.offset!==Se||Xd.stride!==xe)I.bindBuffer(34962,Ge.buffer),I.vertexAttribPointer(Ld,be,He,se,xe,Se),Xd.type=He,Xd.size=be,Xd.buffer=Ge,Xd.normalized=se,Xd.offset=Se,Xd.stride=xe;Xd.divisor!==Be&&(l.vertexAttribDivisorANGLE(Ld,Be),Xd.divisor=Be)}else if(Xd.buffer&&
(I.disableVertexAttribArray(Ld),Xd.buffer=null),Xd.x!==Ke||Xd.y!==Le||Xd.z!==Ie||Xd.w!==Je)I.vertexAttrib4f(Ld,Ke,Le,Ie,Je),Xd.x=Ke,Xd.y=Le,Xd.z=Ie,Xd.w=Je;ee=h.call(this,C,b,k);Me=!1;Id=null;Ud=0;De=!1;hf=Ne=0;bf=1;Ue=0;Pe=5126;We=Ve=Ze=af=0;sa(ee)?(Me=!0,Id=n.createStream(34962,ee),Pe=Id.dtype):(Id=n.getBuffer(ee))?Pe=Id.dtype:"constant"in ee?(bf=2,"number"===typeof ee.constant?(Ze=ee.constant,Ve=We=af=0):(Ze=0<ee.constant.length?ee.constant[0]:0,Ve=1<ee.constant.length?ee.constant[1]:0,We=2<ee.constant.length?
ee.constant[2]:0,af=3<ee.constant.length?ee.constant[3]:0)):(Id=sa(ee.buffer)?n.createStream(34962,ee.buffer):n.getBuffer(ee.buffer),Pe="type"in ee?Md[ee.type]:Id.dtype,De=!!ee.normalized,hf=ee.size|0,Ne=ee.offset|0,Ue=ee.stride|0,Ud=ee.divisor|0);Vd=aa.location;ae=q[Vd];if(1===bf){ae.buffer||I.enableVertexAttribArray(Vd);Xe=hf||1;if(ae.type!==Pe||ae.size!==Xe||ae.buffer!==Id||ae.normalized!==De||ae.offset!==Ne||ae.stride!==Ue)I.bindBuffer(34962,Id.buffer),I.vertexAttribPointer(Vd,Xe,Pe,De,Ue,Ne),
ae.type=Pe,ae.size=Xe,ae.buffer=Id,ae.normalized=De,ae.offset=Ne,ae.stride=Ue;ae.divisor!==Ud&&(l.vertexAttribDivisorANGLE(Vd,Ud),ae.divisor=Ud)}else if(ae.buffer&&(I.disableVertexAttribArray(Vd),ae.buffer=null),ae.x!==Ze||ae.y!==Ve||ae.z!==We||ae.w!==af)I.vertexAttrib4f(Vd,Ze,Ve,We,af),ae.x=Ze,ae.y=Ve,ae.z=We,ae.w=af;jf=C.pixelRatio;k&&nf===jf||(nf=jf,I.uniform1f(wa.location,jf));ef=b.scale;kf=ef[0];mf=ef[1];k&&lf===kf&&rf===mf||(lf=kf,rf=mf,I.uniform2f(fa.location,kf,mf));of=b.scaleFract;sf=of[0];
Cf=of[1];k&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,I.uniform2f(Aa.location,sf,Cf));Ee=b.translate;pf=Ee[0];Df=Ee[1];k&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,I.uniform2f(pa.location,pf,Df));Af=b.translateFract;Ef=Af[0];wf=Af[1];k&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,I.uniform2f(ya.location,Ef,wf));vf=K.call(this,C,b,k);yf=vf[0];If=vf[1];k&&zf===yf&&Jf===If||(zf=yf,Jf=If,I.uniform2f(qa.location,yf,If));Kf=b.opacity;k&&Lf===Kf||(Lf=Kf,I.uniform1f(la.location,Kf));(tf=b.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Qf=tf._texture;I.uniform1i(P.location,Qf.bind());Hf=b.elements;uf=null;(uf=(cg=sa(Hf))?xd.createStream(Hf):xd.getElements(Hf))&&I.bindBuffer(34963,uf.buffer.buffer);Rf=b.offset;if(Sf=b.count)0<ob?uf?l.drawElementsInstancedANGLE(0,Sf,uf.type,Rf<<(uf.type-5121>>1),ob):l.drawArraysInstancedANGLE(0,Rf,Sf,ob):0>ob&&(uf?I.drawElements(0,Sf,uf.type,Rf<<(uf.type-5121>>1)):I.drawArrays(0,Rf,Sf)),C.viewportWidth=Ob,C.viewportHeight=jb,qb&&n.destroyStream(Ra),Oa&&n.destroyStream(tc),nb&&n.destroyStream(fc),
re&&n.destroyStream(Fc),bd&&n.destroyStream(Qc),ue&&n.destroyStream(id),je&&n.destroyStream(ye),ne&&n.destroyStream(Ge),Me&&n.destroyStream(Id),Qf.unbind(),cg&&xd.destroyStream(uf)}N.unbind();va.dirty=!0;Ea.setVAO(null);f&&(ba.cpuTime+=performance.now()-g)},draw:function(a){var d,h,f,g,k,b,t,v,x,A,w,O,E,F,oa,R,D,ma,K,z,N,y,xa,Q,S,T,W,X,ea,ca,ia,Y,ta,ja,Z,Dc,Ia,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Yd,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,re,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe;d=ga.next;d!==ga.cur&&(d?I.bindFramebuffer(36160,d.framebuffer):I.bindFramebuffer(36160,null),ga.cur=d);if(va.dirty){var He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,
kf,lf,mf,rf,of,sf;He=Da.dither;He!==va.dither&&(He?I.enable(3024):I.disable(3024),va.dither=He);Je=ua[0];Ke=ua[1];if(Je!==Fa[0]||Ke!==Fa[1])I.blendEquationSeparate(Je,Ke),Fa[0]=Je,Fa[1]=Ke;Le=Da.depth_func;Le!==va.depth_func&&(I.depthFunc(Le),va.depth_func=Le);Ie=$b[0];Ld=$b[1];if(Ie!==Ga[0]||Ld!==Ga[1])I.depthRange(Ie,Ld),Ga[0]=Ie,Ga[1]=Ld;Xd=Da.depth_mask;Xd!==va.depth_mask&&(I.depthMask(Xd),va.depth_mask=Xd);be=da[0];ee=da[1];Me=da[2];Id=da[3];if(be!==ha[0]||ee!==ha[1]||Me!==ha[2]||Id!==ha[3])I.colorMask(be,
ee,Me,Id),ha[0]=be,ha[1]=ee,ha[2]=Me,ha[3]=Id;Ud=Da.cull_enable;Ud!==va.cull_enable&&(Ud?I.enable(2884):I.disable(2884),va.cull_enable=Ud);De=Da.cull_face;De!==va.cull_face&&(I.cullFace(De),va.cull_face=De);Ne=Da.frontFace;Ne!==va.frontFace&&(I.frontFace(Ne),va.frontFace=Ne);hf=Da.lineWidth;hf!==va.lineWidth&&(I.lineWidth(hf),va.lineWidth=hf);bf=Da.polygonOffset_enable;bf!==va.polygonOffset_enable&&(bf?I.enable(32823):I.disable(32823),va.polygonOffset_enable=bf);Ue=ac[0];Pe=ac[1];if(Ue!==Sb[0]||Pe!==
Sb[1])I.polygonOffset(Ue,Pe),Sb[0]=Ue,Sb[1]=Pe;af=Da.sample_alpha;af!==va.sample_alpha&&(af?I.enable(32926):I.disable(32926),va.sample_alpha=af);Ze=Da.sample_enable;Ze!==va.sample_enable&&(Ze?I.enable(32928):I.disable(32928),va.sample_enable=Ze);Ve=ab[0];We=ab[1];if(Ve!==Dd[0]||We!==Dd[1])I.sampleCoverage(Ve,We),Dd[0]=Ve,Dd[1]=We;Vd=Da.stencil_mask;Vd!==va.stencil_mask&&(I.stencilMask(Vd),va.stencil_mask=Vd);ae=ze[0];Xe=ze[1];jf=ze[2];if(ae!==Ad[0]||Xe!==Ad[1]||jf!==Ad[2])I.stencilFunc(ae,Xe,jf),
Ad[0]=ae,Ad[1]=Xe,Ad[2]=jf;nf=ie[0];ef=ie[1];kf=ie[2];lf=ie[3];if(nf!==Ed[0]||ef!==Ed[1]||kf!==Ed[2]||lf!==Ed[3])I.stencilOpSeparate(nf,ef,kf,lf),Ed[0]=nf,Ed[1]=ef,Ed[2]=kf,Ed[3]=lf;mf=Rd[0];rf=Rd[1];of=Rd[2];sf=Rd[3];if(mf!==oe[0]||rf!==oe[1]||of!==oe[2]||sf!==oe[3])I.stencilOpSeparate(mf,rf,of,sf),oe[0]=mf,oe[1]=rf,oe[2]=of,oe[3]=sf}h=a.viewport;f=h.x|0;g=h.y|0;k="width"in h?h.width|0:C.framebufferWidth-f;b="height"in h?h.height|0:C.framebufferHeight-g;t=C.viewportWidth;C.viewportWidth=k;v=C.viewportHeight;
C.viewportHeight=b;I.viewport(f,g,k,b);fe[0]=f;fe[1]=g;fe[2]=k;fe[3]=b;I.blendColor(0,0,0,1);V[0]=0;V[1]=0;V[2]=0;V[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;x=a.viewport;A=x.x|0;w=x.y|0;O="width"in x?x.width|0:C.framebufferWidth-A;E="height"in x?x.height|0:C.framebufferHeight-w;I.scissor(A,w,O,E);Wd[0]=A;Wd[1]=w;Wd[2]=O;Wd[3]=E;I.enable(3089);va.scissor_enable=!0;I.disable(2960);va.stencil_enable=
!1;if(F=va.profile)oa=performance.now(),ba.count++;I.useProgram(M.program);R=Hb.angle_instanced_arrays;Ea.setVAO(null);D=L.call(this,C,a,0);ma=!1;K=null;z=0;N=!1;xa=y=0;Q=1;S=0;T=5126;ca=ea=X=W=0;sa(D)?(ma=!0,K=n.createStream(34962,D),T=K.dtype):(K=n.getBuffer(D))?T=K.dtype:"constant"in D?(Q=2,"number"===typeof D.constant?(X=D.constant,ea=ca=W=0):(X=0<D.constant.length?D.constant[0]:0,ea=1<D.constant.length?D.constant[1]:0,ca=2<D.constant.length?D.constant[2]:0,W=3<D.constant.length?D.constant[3]:
0)):(K=sa(D.buffer)?n.createStream(34962,D.buffer):n.getBuffer(D.buffer),T="type"in D?Md[D.type]:K.dtype,N=!!D.normalized,xa=D.size|0,y=D.offset|0,S=D.stride|0,z=D.divisor|0);ia=Ja.location;Y=q[ia];if(1===Q){Y.buffer||I.enableVertexAttribArray(ia);ta=xa||1;if(Y.type!==T||Y.size!==ta||Y.buffer!==K||Y.normalized!==N||Y.offset!==y||Y.stride!==S)I.bindBuffer(34962,K.buffer),I.vertexAttribPointer(ia,ta,T,N,S,y),Y.type=T,Y.size=ta,Y.buffer=K,Y.normalized=N,Y.offset=y,Y.stride=S;Y.divisor!==z&&(R.vertexAttribDivisorANGLE(ia,
z),Y.divisor=z)}else if(Y.buffer&&(I.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ca||Y.w!==W)I.vertexAttrib4f(ia,X,ea,ca,W),Y.x=X,Y.y=ea,Y.z=ca,Y.w=W;ja=e.call(this,C,a,0);Z=!1;Dc=null;Ia=0;yb=!1;Nb=db=0;bb=1;ob=0;Va=5126;rc=Jb=Ib=gd=0;sa(ja)?(Z=!0,Dc=n.createStream(34962,ja),Va=Dc.dtype):(Dc=n.getBuffer(ja))?Va=Dc.dtype:"constant"in ja?(bb=2,"number"===typeof ja.constant?(Ib=ja.constant,Jb=rc=gd=0):(Ib=0<ja.constant.length?ja.constant[0]:0,Jb=1<ja.constant.length?ja.constant[1]:
0,rc=2<ja.constant.length?ja.constant[2]:0,gd=3<ja.constant.length?ja.constant[3]:0)):(Dc=sa(ja.buffer)?n.createStream(34962,ja.buffer):n.getBuffer(ja.buffer),Va="type"in ja?Md[ja.type]:Dc.dtype,yb=!!ja.normalized,Nb=ja.size|0,db=ja.offset|0,ob=ja.stride|0,Ia=ja.divisor|0);Ob=$a.location;jb=q[Ob];if(1===bb){jb.buffer||I.enableVertexAttribArray(Ob);Gb=Nb||1;if(jb.type!==Va||jb.size!==Gb||jb.buffer!==Dc||jb.normalized!==yb||jb.offset!==db||jb.stride!==ob)I.bindBuffer(34962,Dc.buffer),I.vertexAttribPointer(Ob,
Gb,Va,yb,ob,db),jb.type=Va,jb.size=Gb,jb.buffer=Dc,jb.normalized=yb,jb.offset=db,jb.stride=ob;jb.divisor!==Ia&&(R.vertexAttribDivisorANGLE(Ob,Ia),jb.divisor=Ia)}else if(jb.buffer&&(I.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==rc||jb.w!==gd)I.vertexAttrib4f(Ob,Ib,Jb,rc,gd),jb.x=Ib,jb.y=Jb,jb.z=rc,jb.w=gd;Db=l.call(this,C,a,0);wb=!1;hb=null;Yb=0;Pb=!1;Ra=qb=0;Ub=1;zb=0;ic=5126;rb=Ha=pb=ib=0;sa(Db)?(wb=!0,hb=n.createStream(34962,Db),ic=hb.dtype):(hb=n.getBuffer(Db))?ic=
hb.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(pb=Db.constant,Ha=rb=ib=0):(pb=0<Db.constant.length?Db.constant[0]:0,Ha=1<Db.constant.length?Db.constant[1]:0,rb=2<Db.constant.length?Db.constant[2]:0,ib=3<Db.constant.length?Db.constant[3]:0)):(hb=sa(Db.buffer)?n.createStream(34962,Db.buffer):n.getBuffer(Db.buffer),ic="type"in Db?Md[Db.type]:hb.dtype,Pb=!!Db.normalized,Ra=Db.size|0,qb=Db.offset|0,zb=Db.stride|0,Yb=Db.divisor|0);Ka=na.location;fb=q[Ka];if(1===Ub){fb.buffer||I.enableVertexAttribArray(Ka);
gb=Ra||1;if(fb.type!==ic||fb.size!==gb||fb.buffer!==hb||fb.normalized!==Pb||fb.offset!==qb||fb.stride!==zb)I.bindBuffer(34962,hb.buffer),I.vertexAttribPointer(Ka,gb,ic,Pb,zb,qb),fb.type=ic,fb.size=gb,fb.buffer=hb,fb.normalized=Pb,fb.offset=qb,fb.stride=zb;fb.divisor!==Yb&&(R.vertexAttribDivisorANGLE(Ka,Yb),fb.divisor=Yb)}else if(fb.buffer&&(I.disableVertexAttribArray(Ka),fb.buffer=null),fb.x!==pb||fb.y!==Ha||fb.z!==rb||fb.w!==ib)I.vertexAttrib4f(Ka,pb,Ha,rb,ib),fb.x=pb,fb.y=Ha,fb.z=rb,fb.w=ib;La=
p.call(this,C,a,0);kb=!1;Wa=null;tb=0;sb=!1;tc=Oa=0;Qa=1;Kb=0;Eb=5126;Lb=Ya=zd=Ma=0;sa(La)?(kb=!0,Wa=n.createStream(34962,La),Eb=Wa.dtype):(Wa=n.getBuffer(La))?Eb=Wa.dtype:"constant"in La?(Qa=2,"number"===typeof La.constant?(zd=La.constant,Ya=Lb=Ma=0):(zd=0<La.constant.length?La.constant[0]:0,Ya=1<La.constant.length?La.constant[1]:0,Lb=2<La.constant.length?La.constant[2]:0,Ma=3<La.constant.length?La.constant[3]:0)):(Wa=sa(La.buffer)?n.createStream(34962,La.buffer):n.getBuffer(La.buffer),Eb="type"in
La?Md[La.type]:Wa.dtype,sb=!!La.normalized,tc=La.size|0,Oa=La.offset|0,Kb=La.stride|0,tb=La.divisor|0);Mb=Ta.location;lb=q[Mb];if(1===Qa){lb.buffer||I.enableVertexAttribArray(Mb);Na=tc||1;if(lb.type!==Eb||lb.size!==Na||lb.buffer!==Wa||lb.normalized!==sb||lb.offset!==Oa||lb.stride!==Kb)I.bindBuffer(34962,Wa.buffer),I.vertexAttribPointer(Mb,Na,Eb,sb,Kb,Oa),lb.type=Eb,lb.size=Na,lb.buffer=Wa,lb.normalized=sb,lb.offset=Oa,lb.stride=Kb;lb.divisor!==tb&&(R.vertexAttribDivisorANGLE(Mb,tb),lb.divisor=tb)}else if(lb.buffer&&
(I.disableVertexAttribArray(Mb),lb.buffer=null),lb.x!==zd||lb.y!==Ya||lb.z!==Lb||lb.w!==Ma)I.vertexAttrib4f(Mb,zd,Ya,Lb,Ma),lb.x=zd,lb.y=Ya,lb.z=Lb,lb.w=Ma;Zb=c.call(this,C,a,0);Pa=!1;ub=null;vb=0;Sa=!1;fc=nb=0;Bc=1;wc=0;cb=5126;Mc=Xa=qd=jc=0;sa(Zb)?(Pa=!0,ub=n.createStream(34962,Zb),cb=ub.dtype):(ub=n.getBuffer(Zb))?cb=ub.dtype:"constant"in Zb?(Bc=2,"number"===typeof Zb.constant?(qd=Zb.constant,Xa=Mc=jc=0):(qd=0<Zb.constant.length?Zb.constant[0]:0,Xa=1<Zb.constant.length?Zb.constant[1]:0,Mc=2<Zb.constant.length?
Zb.constant[2]:0,jc=3<Zb.constant.length?Zb.constant[3]:0)):(ub=sa(Zb.buffer)?n.createStream(34962,Zb.buffer):n.getBuffer(Zb.buffer),cb="type"in Zb?Md[Zb.type]:ub.dtype,Sa=!!Zb.normalized,fc=Zb.size|0,nb=Zb.offset|0,wc=Zb.stride|0,vb=Zb.divisor|0);Ab=ka.location;Za=q[Ab];if(1===Bc){Za.buffer||I.enableVertexAttribArray(Ab);Vb=fc||1;if(Za.type!==cb||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==nb||Za.stride!==wc)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(Ab,Vb,cb,Sa,wc,nb),
Za.type=cb,Za.size=Vb,Za.buffer=ub,Za.normalized=Sa,Za.offset=nb,Za.stride=wc;Za.divisor!==vb&&(R.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&(I.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==qd||Za.y!==Xa||Za.z!==Mc||Za.w!==jc)I.vertexAttrib4f(Ab,qd,Xa,Mc,jc),Za.x=qd,Za.y=Xa,Za.z=Mc,Za.w=jc;uc=G.call(this,C,a,0);Wb=!1;Qb=null;Kc=0;Rb=!1;Fc=Yd=0;sd=1;Nc=0;Xc=5126;gc=xc=nc=td=0;sa(uc)?(Wb=!0,Qb=n.createStream(34962,uc),Xc=Qb.dtype):(Qb=n.getBuffer(uc))?Xc=Qb.dtype:"constant"in
uc?(sd=2,"number"===typeof uc.constant?(nc=uc.constant,xc=gc=td=0):(nc=0<uc.constant.length?uc.constant[0]:0,xc=1<uc.constant.length?uc.constant[1]:0,gc=2<uc.constant.length?uc.constant[2]:0,td=3<uc.constant.length?uc.constant[3]:0)):(Qb=sa(uc.buffer)?n.createStream(34962,uc.buffer):n.getBuffer(uc.buffer),Xc="type"in uc?Md[uc.type]:Qb.dtype,Rb=!!uc.normalized,Fc=uc.size|0,Yd=uc.offset|0,Nc=uc.stride|0,Kc=uc.divisor|0);eb=ra.location;sc=q[eb];if(1===sd){sc.buffer||I.enableVertexAttribArray(eb);Tb=
Fc||1;if(sc.type!==Xc||sc.size!==Tb||sc.buffer!==Qb||sc.normalized!==Rb||sc.offset!==Yd||sc.stride!==Nc)I.bindBuffer(34962,Qb.buffer),I.vertexAttribPointer(eb,Tb,Xc,Rb,Nc,Yd),sc.type=Xc,sc.size=Tb,sc.buffer=Qb,sc.normalized=Rb,sc.offset=Yd,sc.stride=Nc;sc.divisor!==Kc&&(R.vertexAttribDivisorANGLE(eb,Kc),sc.divisor=Kc)}else if(sc.buffer&&(I.disableVertexAttribArray(eb),sc.buffer=null),sc.x!==nc||sc.y!==xc||sc.z!==gc||sc.w!==td)I.vertexAttrib4f(eb,nc,xc,gc,td),sc.x=nc,sc.y=xc,sc.z=gc,sc.w=td;Xb=H.call(this,
C,a,0);cc=!1;hc=null;zc=0;Cc=!1;Qc=bd=0;Rc=1;Sc=0;Yc=5126;kc=Zc=cd=od=0;sa(Xb)?(cc=!0,hc=n.createStream(34962,Xb),Yc=hc.dtype):(hc=n.getBuffer(Xb))?Yc=hc.dtype:"constant"in Xb?(Rc=2,"number"===typeof Xb.constant?(cd=Xb.constant,Zc=kc=od=0):(cd=0<Xb.constant.length?Xb.constant[0]:0,Zc=1<Xb.constant.length?Xb.constant[1]:0,kc=2<Xb.constant.length?Xb.constant[2]:0,od=3<Xb.constant.length?Xb.constant[3]:0)):(hc=sa(Xb.buffer)?n.createStream(34962,Xb.buffer):n.getBuffer(Xb.buffer),Yc="type"in Xb?Md[Xb.type]:
hc.dtype,Cc=!!Xb.normalized,Qc=Xb.size|0,bd=Xb.offset|0,Sc=Xb.stride|0,zc=Xb.divisor|0);bc=r.location;$c=q[bc];if(1===Rc){$c.buffer||I.enableVertexAttribArray(bc);Uc=Qc||4;if($c.type!==Yc||$c.size!==Uc||$c.buffer!==hc||$c.normalized!==Cc||$c.offset!==bd||$c.stride!==Sc)I.bindBuffer(34962,hc.buffer),I.vertexAttribPointer(bc,Uc,Yc,Cc,Sc,bd),$c.type=Yc,$c.size=Uc,$c.buffer=hc,$c.normalized=Cc,$c.offset=bd,$c.stride=Sc;$c.divisor!==zc&&(R.vertexAttribDivisorANGLE(bc,zc),$c.divisor=zc)}else if($c.buffer&&
(I.disableVertexAttribArray(bc),$c.buffer=null),$c.x!==cd||$c.y!==Zc||$c.z!==kc||$c.w!==od)I.vertexAttrib4f(bc,cd,Zc,kc,od),$c.x=cd,$c.y=Zc,$c.z=kc,$c.w=od;dd=B.call(this,C,a,0);Ac=!1;hd=null;re=0;wd=!1;id=ue=0;Ce=1;Od=0;ge=5126;Hd=Jd=Pd=ce=0;sa(dd)?(Ac=!0,hd=n.createStream(34962,dd),ge=hd.dtype):(hd=n.getBuffer(dd))?ge=hd.dtype:"constant"in dd?(Ce=2,"number"===typeof dd.constant?(Pd=dd.constant,Jd=Hd=ce=0):(Pd=0<dd.constant.length?dd.constant[0]:0,Jd=1<dd.constant.length?dd.constant[1]:0,Hd=2<dd.constant.length?
dd.constant[2]:0,ce=3<dd.constant.length?dd.constant[3]:0)):(hd=sa(dd.buffer)?n.createStream(34962,dd.buffer):n.getBuffer(dd.buffer),ge="type"in dd?Md[dd.type]:hd.dtype,wd=!!dd.normalized,id=dd.size|0,ue=dd.offset|0,Od=dd.stride|0,re=dd.divisor|0);md=Ca.location;Tc=q[md];if(1===Ce){Tc.buffer||I.enableVertexAttribArray(md);ud=id||4;if(Tc.type!==ge||Tc.size!==ud||Tc.buffer!==hd||Tc.normalized!==wd||Tc.offset!==ue||Tc.stride!==Od)I.bindBuffer(34962,hd.buffer),I.vertexAttribPointer(md,ud,ge,wd,Od,ue),
Tc.type=ge,Tc.size=ud,Tc.buffer=hd,Tc.normalized=wd,Tc.offset=ue,Tc.stride=Od;Tc.divisor!==re&&(R.vertexAttribDivisorANGLE(md,re),Tc.divisor=re)}else if(Tc.buffer&&(I.disableVertexAttribArray(md),Tc.buffer=null),Tc.x!==Pd||Tc.y!==Jd||Tc.z!==Hd||Tc.w!==ce)I.vertexAttrib4f(md,Pd,Jd,Hd,ce),Tc.x=Pd,Tc.y=Jd,Tc.z=Hd,Tc.w=ce;rd=U.call(this,C,a,0);jd=!1;vd=null;Cd=0;Fd=!1;ye=je=0;Fe=1;le=0;ke=5126;me=de=ve=he=0;sa(rd)?(jd=!0,vd=n.createStream(34962,rd),ke=vd.dtype):(vd=n.getBuffer(rd))?ke=vd.dtype:"constant"in
rd?(Fe=2,"number"===typeof rd.constant?(ve=rd.constant,de=me=he=0):(ve=0<rd.constant.length?rd.constant[0]:0,de=1<rd.constant.length?rd.constant[1]:0,me=2<rd.constant.length?rd.constant[2]:0,he=3<rd.constant.length?rd.constant[3]:0)):(vd=sa(rd.buffer)?n.createStream(34962,rd.buffer):n.getBuffer(rd.buffer),ke="type"in rd?Md[rd.type]:vd.dtype,Fd=!!rd.normalized,ye=rd.size|0,je=rd.offset|0,le=rd.stride|0,Cd=rd.divisor|0);Oc=aa.location;fd=q[Oc];if(1===Fe){fd.buffer||I.enableVertexAttribArray(Oc);we=
ye||1;if(fd.type!==ke||fd.size!==we||fd.buffer!==vd||fd.normalized!==Fd||fd.offset!==je||fd.stride!==le)I.bindBuffer(34962,vd.buffer),I.vertexAttribPointer(Oc,we,ke,Fd,le,je),fd.type=ke,fd.size=we,fd.buffer=vd,fd.normalized=Fd,fd.offset=je,fd.stride=le;fd.divisor!==Cd&&(R.vertexAttribDivisorANGLE(Oc,Cd),fd.divisor=Cd)}else if(fd.buffer&&(I.disableVertexAttribArray(Oc),fd.buffer=null),fd.x!==ve||fd.y!==de||fd.z!==me||fd.w!==he)I.vertexAttrib4f(Oc,ve,de,me,he),fd.x=ve,fd.y=de,fd.z=me,fd.w=he;I.uniform1i(J.location,
!1);I.uniform1f(wa.location,C.pixelRatio);qe=a.scale;I.uniform2f(fa.location,qe[0],qe[1]);Kd=a.scaleFract;I.uniform2f(Aa.location,Kd[0],Kd[1]);Qd=a.translate;I.uniform2f(pa.location,Qd[0],Qd[1]);Sd=a.translateFract;I.uniform2f(ya.location,Sd[0],Sd[1]);Td=m.call(this,C,a,0);I.uniform2f(qa.location,Td[0],Td[1]);I.uniform1f(la.location,a.opacity);I.uniform1i(za.location,u.bind());(ne=a.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);Ge=ne._texture;I.uniform1i(P.location,Ge.bind());Be=
a.elements;se=null;(se=(Se=sa(Be))?xd.createStream(Be):xd.getElements(Be))&&I.bindBuffer(34963,se.buffer.buffer);Te=a.offset;if(Oe=a.count)xe=Ba.instances,0<xe?se?R.drawElementsInstancedANGLE(0,Oe,se.type,Te<<(se.type-5121>>1),xe):R.drawArraysInstancedANGLE(0,Te,Oe,xe):0>xe&&(se?I.drawElements(0,Oe,se.type,Te<<(se.type-5121>>1)):I.drawArrays(0,Te,Oe)),va.dirty=!0,Ea.setVAO(null),C.viewportWidth=t,C.viewportHeight=v,F&&(ba.cpuTime+=performance.now()-oa),ma&&n.destroyStream(K),Z&&n.destroyStream(Dc),
wb&&n.destroyStream(hb),kb&&n.destroyStream(Wa),Pa&&n.destroyStream(ub),Wb&&n.destroyStream(Qb),cc&&n.destroyStream(hc),Ac&&n.destroyStream(hd),jd&&n.destroyStream(vd),u.unbind(),Ge.unbind(),Se&&xd.destroyStream(se)},scope:function(c,h,l){var q,r,b,I,p,na,A,e,J,O,P,E,R,fa,ga,$a,L,K,Ja,u,m,V,N,H,aa,M,qa,wa,Ea,G,Ca,B,da,U,ka,W,Ta,ea,pa,Aa,la,ya,ja,ra,ta,ua,Hb,za,Dc,Z,Ga,mb,Fa,Sb,Ra,ha,$b,ac,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,Wd,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,Dd,Xa,
Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Rd,Fc,fe,Nc,Xc,ze,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Ed,wd,oe,id,Ad,ie,ab,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,pg,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;q=c.viewport;r=q.x|0;b=q.y|0;I="width"in q?q.width|0:C.framebufferWidth-r;p="height"in q?q.height|0:C.framebufferHeight-b;na=C.viewportWidth;C.viewportWidth=I;A=C.viewportHeight;C.viewportHeight=p;e=Yd[0];Yd[0]=r;J=Yd[1];Yd[1]=b;O=Yd[2];Yd[2]=I;P=Yd[3];Yd[3]=p;E=ma[0];ma[0]=0;R=ma[1];ma[1]=0;fa=ma[2];ma[2]=0;ga=ma[3];ma[3]=1;$a=Da.blend_enable;Da.blend_enable=!0;L=Ia[0];Ia[0]=770;K=Ia[1];Ia[1]=
771;Ja=Ia[2];Ia[2]=773;u=Ia[3];Ia[3]=1;m=Da.depth_enable;Da.depth_enable=!1;V=c.viewport;N=V.x|0;H=V.y|0;aa="width"in V?V.width|0:C.framebufferWidth-N;M="height"in V?V.height|0:C.framebufferHeight-H;qa=re[0];re[0]=N;wa=re[1];re[1]=H;Ea=re[2];re[2]=aa;G=re[3];re[3]=M;Ca=Da.scissor_enable;Da.scissor_enable=!0;B=Da.stencil_enable;Da.stencil_enable=!1;if(da=va.profile)U=performance.now(),ba.count++;ka=c.elements;W=null;W=(Ta=sa(ka))?xd.createStream(ka):xd.getElements(ka);ea=Ba.elements;Ba.elements=W;
pa=c.offset;Aa=Ba.offset;Ba.offset=pa;la=c.count;ya=Ba.count;Ba.count=la;ja=Ba.primitive;Ba.primitive=0;ra=xa[45];xa[45]=!1;ta=c.markerTexture;ua=xa[48];xa[48]=ta;Hb=c.opacity;za=xa[10];xa[10]=Hb;Dc=y.call(this,C,c,l);Z=xa[46];xa[46]=Dc;Ga=xa[47];xa[47]=ca;mb=C.pixelRatio;Fa=xa[34];xa[34]=mb;Sb=c.scale;Ra=xa[6];xa[6]=Sb;ha=c.scaleFract;$b=xa[7];xa[7]=ha;ac=c.translate;ib=xa[8];xa[8]=ac;pb=c.translateFract;Ha=xa[9];xa[9]=pb;rb=w.call(this,C,c,l);Ka=!1;fb=null;gb=0;La=!1;Wa=kb=0;tb=1;sb=0;Oa=5126;Eb=
Kb=Qa=Wd=0;sa(rb)?(Ka=!0,fb=n.createStream(34962,rb),Oa=fb.dtype):(fb=n.getBuffer(rb))?Oa=fb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Qa=rb.constant,Kb=Eb=Wd=0):(Qa=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Eb=2<rb.constant.length?rb.constant[2]:0,Wd=3<rb.constant.length?rb.constant[3]:0)):(fb=sa(rb.buffer)?n.createStream(34962,rb.buffer):n.getBuffer(rb.buffer),Oa="type"in rb?Md[rb.type]:fb.dtype,La=!!rb.normalized,Wa=rb.size|0,kb=rb.offset|0,
sb=rb.stride|0,gb=rb.divisor|0);Ma=T.buffer;T.buffer=fb;yd=T.divisor;T.divisor=gb;Ya=T.normalized;T.normalized=La;Lb=T.offset;T.offset=kb;Mb=T.size;T.size=Wa;lb=T.state;T.state=tb;Na=T.stride;T.stride=sb;Zb=T.type;T.type=Oa;Pa=T.w;T.w=Wd;ub=T.x;T.x=Qa;vb=T.y;T.y=Kb;Sa=T.z;T.z=Eb;nb=z.call(this,C,c,l);fc=!1;Bc=null;wc=0;cb=!1;Dd=jc=0;Xa=1;Mc=0;Ab=5126;Wb=uc=Vb=Za=0;sa(nb)?(fc=!0,Bc=n.createStream(34962,nb),Ab=Bc.dtype):(Bc=n.getBuffer(nb))?Ab=Bc.dtype:"constant"in nb?(Xa=2,"number"===typeof nb.constant?
(Vb=nb.constant,uc=Wb=Za=0):(Vb=0<nb.constant.length?nb.constant[0]:0,uc=1<nb.constant.length?nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,Za=3<nb.constant.length?nb.constant[3]:0)):(Bc=sa(nb.buffer)?n.createStream(34962,nb.buffer):n.getBuffer(nb.buffer),Ab="type"in nb?Md[nb.type]:Bc.dtype,cb=!!nb.normalized,Dd=nb.size|0,jc=nb.offset|0,Mc=nb.stride|0,wc=nb.divisor|0);Qb=Q.buffer;Q.buffer=Bc;Kc=Q.divisor;Q.divisor=wc;Rb=Q.normalized;Q.normalized=cb;Rd=Q.offset;Q.offset=jc;Fc=Q.size;Q.size=
Dd;fe=Q.state;Q.state=Xa;Nc=Q.stride;Q.stride=Mc;Xc=Q.type;Q.type=Ab;ze=Q.w;Q.w=Za;nc=Q.x;Q.x=Vb;xc=Q.y;Q.y=uc;gc=Q.z;Q.z=Wb;eb=ia.call(this,C,c,l);sc=!1;Tb=null;Xb=0;cc=!1;zc=hc=0;Cc=1;bd=0;Qc=5126;od=Yc=Sc=Rc=0;sa(eb)?(sc=!0,Tb=n.createStream(34962,eb),Qc=Tb.dtype):(Tb=n.getBuffer(eb))?Qc=Tb.dtype:"constant"in eb?(Cc=2,"number"===typeof eb.constant?(Sc=eb.constant,Yc=od=Rc=0):(Sc=0<eb.constant.length?eb.constant[0]:0,Yc=1<eb.constant.length?eb.constant[1]:0,od=2<eb.constant.length?eb.constant[2]:
0,Rc=3<eb.constant.length?eb.constant[3]:0)):(Tb=sa(eb.buffer)?n.createStream(34962,eb.buffer):n.getBuffer(eb.buffer),Qc="type"in eb?Md[eb.type]:Tb.dtype,cc=!!eb.normalized,zc=eb.size|0,hc=eb.offset|0,bd=eb.stride|0,Xb=eb.divisor|0);cd=g.buffer;g.buffer=Tb;Zc=g.divisor;g.divisor=Xb;kc=g.normalized;g.normalized=cc;bc=g.offset;g.offset=hc;$c=g.size;g.size=zc;Uc=g.state;g.state=Cc;dd=g.stride;g.stride=bd;Ac=g.type;g.type=Qc;hd=g.w;g.w=Rc;Ed=g.x;g.x=Sc;wd=g.y;g.y=Yc;oe=g.z;g.z=od;id=v.call(this,C,c,l);
Ad=!1;ie=null;ab=0;ce=!1;Jd=Pd=0;Hd=1;md=0;Tc=5126;vd=jd=rd=ud=0;sa(id)?(Ad=!0,ie=n.createStream(34962,id),Tc=ie.dtype):(ie=n.getBuffer(id))?Tc=ie.dtype:"constant"in id?(Hd=2,"number"===typeof id.constant?(rd=id.constant,jd=vd=ud=0):(rd=0<id.constant.length?id.constant[0]:0,jd=1<id.constant.length?id.constant[1]:0,vd=2<id.constant.length?id.constant[2]:0,ud=3<id.constant.length?id.constant[3]:0)):(ie=sa(id.buffer)?n.createStream(34962,id.buffer):n.getBuffer(id.buffer),Tc="type"in id?Md[id.type]:ie.dtype,
ce=!!id.normalized,Jd=id.size|0,Pd=id.offset|0,md=id.stride|0,ab=id.divisor|0);Cd=S.buffer;S.buffer=ie;Fd=S.divisor;S.divisor=ab;je=S.normalized;S.normalized=ce;ye=S.offset;S.offset=Pd;pg=S.size;S.size=Jd;le=S.state;S.state=Hd;ke=S.stride;S.stride=md;he=S.type;S.type=Tc;ve=S.w;S.w=ud;de=S.x;S.x=rd;me=S.y;S.y=jd;Oc=S.z;S.z=vd;fd=k.call(this,C,c,l);we=!1;qe=null;Kd=0;Qd=!1;Td=Sd=0;ne=1;Ge=0;Be=5126;Oe=Te=Se=se=0;sa(fd)?(we=!0,qe=n.createStream(34962,fd),Be=qe.dtype):(qe=n.getBuffer(fd))?Be=qe.dtype:
"constant"in fd?(ne=2,"number"===typeof fd.constant?(Se=fd.constant,Te=Oe=se=0):(Se=0<fd.constant.length?fd.constant[0]:0,Te=1<fd.constant.length?fd.constant[1]:0,Oe=2<fd.constant.length?fd.constant[2]:0,se=3<fd.constant.length?fd.constant[3]:0)):(qe=sa(fd.buffer)?n.createStream(34962,fd.buffer):n.getBuffer(fd.buffer),Be="type"in fd?Md[fd.type]:qe.dtype,Qd=!!fd.normalized,Td=fd.size|0,Sd=fd.offset|0,Ge=fd.stride|0,Kd=fd.divisor|0);xe=X.buffer;X.buffer=qe;He=X.divisor;X.divisor=Kd;Je=X.normalized;
X.normalized=Qd;Ke=X.offset;X.offset=Sd;Le=X.size;X.size=Td;Ie=X.state;X.state=ne;Ld=X.stride;X.stride=Ge;Xd=X.type;X.type=Be;be=X.w;X.w=se;ee=X.x;X.x=Se;Me=X.y;X.y=Te;Id=X.z;X.z=Oe;Ud=f.call(this,C,c,l);De=!1;Ne=null;hf=0;bf=!1;Pe=Ue=0;af=1;Ze=0;Ve=5126;Xe=ae=Vd=We=0;sa(Ud)?(De=!0,Ne=n.createStream(34962,Ud),Ve=Ne.dtype):(Ne=n.getBuffer(Ud))?Ve=Ne.dtype:"constant"in Ud?(af=2,"number"===typeof Ud.constant?(Vd=Ud.constant,ae=Xe=We=0):(Vd=0<Ud.constant.length?Ud.constant[0]:0,ae=1<Ud.constant.length?
Ud.constant[1]:0,Xe=2<Ud.constant.length?Ud.constant[2]:0,We=3<Ud.constant.length?Ud.constant[3]:0)):(Ne=sa(Ud.buffer)?n.createStream(34962,Ud.buffer):n.getBuffer(Ud.buffer),Ve="type"in Ud?Md[Ud.type]:Ne.dtype,bf=!!Ud.normalized,Pe=Ud.size|0,Ue=Ud.offset|0,Ze=Ud.stride|0,hf=Ud.divisor|0);jf=x.buffer;x.buffer=Ne;nf=x.divisor;x.divisor=hf;ef=x.normalized;x.normalized=bf;kf=x.offset;x.offset=Ue;lf=x.size;x.size=Pe;mf=x.state;x.state=af;rf=x.stride;x.stride=Ze;of=x.type;x.type=Ve;sf=x.w;x.w=We;Bf=x.x;
x.x=Vd;Cf=x.y;x.y=ae;Qe=x.z;x.z=Xe;Ee=Y.call(this,C,c,l);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Ee)?(pf=!0,qf=n.createStream(34962,Ee),xf=qf.dtype):(qf=n.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=sa(Ee.buffer)?n.createStream(34962,Ee.buffer):
n.getBuffer(Ee.buffer),xf="type"in Ee?Md[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Jf=D.buffer;D.buffer=qf;Kf=D.divisor;D.divisor=Df;Lf=D.normalized;D.normalized=Gf;tf=D.offset;D.offset=Af;Qf=D.size;D.size=Ef;Hf=D.state;D.state=Ff;uf=D.stride;D.stride=wf;cg=D.type;D.type=xf;Rf=D.w;D.w=vf;Sf=D.x;D.x=yf;qg=D.y;D.y=zf;ff=D.z;D.z=If;cf=F.call(this,C,c,l);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;sa(cf)?(Mf=!0,Nf=n.createStream(34962,
cf),Tf=Nf.dtype):(Nf=n.getBuffer(cf))?Tf=Nf.dtype:"constant"in cf?(hg=2,"number"===typeof cf.constant?(Xf=cf.constant,Yf=ig=Wf=0):(Xf=0<cf.constant.length?cf.constant[0]:0,Yf=1<cf.constant.length?cf.constant[1]:0,ig=2<cf.constant.length?cf.constant[2]:0,Wf=3<cf.constant.length?cf.constant[3]:0)):(Nf=sa(cf.buffer)?n.createStream(34962,cf.buffer):n.getBuffer(cf.buffer),Tf="type"in cf?Md[cf.type]:Nf.dtype,eg=!!cf.normalized,gg=cf.size|0,fg=cf.offset|0,Vf=cf.stride|0,dg=cf.divisor|0);rg=d.buffer;d.buffer=
Nf;sg=d.divisor;d.divisor=dg;tg=d.normalized;d.normalized=eg;ug=d.offset;d.offset=fg;vg=d.size;d.size=gg;wg=d.state;d.state=hg;xg=d.stride;d.stride=Vf;yg=d.type;d.type=Tf;zg=d.w;d.w=Wf;Ag=d.x;d.x=Xf;Bg=d.y;d.y=Yf;gf=d.z;d.z=ig;df=t.call(this,C,c,l);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;sa(df)?(Of=!0,Pf=n.createStream(34962,df),Uf=Pf.dtype):(Pf=n.getBuffer(df))?Uf=Pf.dtype:"constant"in df?(ng=2,"number"===typeof df.constant?(ag=df.constant,bg=og=$f=0):(ag=0<df.constant.length?
df.constant[0]:0,bg=1<df.constant.length?df.constant[1]:0,og=2<df.constant.length?df.constant[2]:0,$f=3<df.constant.length?df.constant[3]:0)):(Pf=sa(df.buffer)?n.createStream(34962,df.buffer):n.getBuffer(df.buffer),Uf="type"in df?Md[df.type]:Pf.dtype,kg=!!df.normalized,mg=df.size|0,lg=df.offset|0,Zf=df.stride|0,jg=df.divisor|0);Cg=a.buffer;a.buffer=Pf;Dg=a.divisor;a.divisor=jg;Eg=a.normalized;a.normalized=kg;Fg=a.offset;a.offset=lg;Gg=a.size;a.size=mg;Hg=a.state;a.state=ng;Ig=a.stride;a.stride=Zf;
Jg=a.type;a.type=Uf;Kg=a.w;a.w=$f;Lg=a.x;a.x=ag;Mg=a.y;a.y=bg;Ng=a.z;a.z=og;Og=oa.vert;oa.vert=44;Pg=oa.frag;oa.frag=43;va.dirty=!0;h(C,c,l);C.viewportWidth=na;C.viewportHeight=A;Yd[0]=e;Yd[1]=J;Yd[2]=O;Yd[3]=P;ma[0]=E;ma[1]=R;ma[2]=fa;ma[3]=ga;Da.blend_enable=$a;Ia[0]=L;Ia[1]=K;Ia[2]=Ja;Ia[3]=u;Da.depth_enable=m;re[0]=qa;re[1]=wa;re[2]=Ea;re[3]=G;Da.scissor_enable=Ca;Da.stencil_enable=B;da&&(ba.cpuTime+=performance.now()-U);Ta&&xd.destroyStream(W);Ba.elements=ea;Ba.offset=Aa;Ba.count=ya;Ba.primitive=
ja;xa[45]=ra;xa[48]=ua;xa[10]=za;xa[46]=Z;xa[47]=Ga;xa[34]=Fa;xa[6]=Ra;xa[7]=$b;xa[8]=ib;xa[9]=Ha;Ka&&n.destroyStream(fb);T.buffer=Ma;T.divisor=yd;T.normalized=Ya;T.offset=Lb;T.size=Mb;T.state=lb;T.stride=Na;T.type=Zb;T.w=Pa;T.x=ub;T.y=vb;T.z=Sa;fc&&n.destroyStream(Bc);Q.buffer=Qb;Q.divisor=Kc;Q.normalized=Rb;Q.offset=Rd;Q.size=Fc;Q.state=fe;Q.stride=Nc;Q.type=Xc;Q.w=ze;Q.x=nc;Q.y=xc;Q.z=gc;sc&&n.destroyStream(Tb);g.buffer=cd;g.divisor=Zc;g.normalized=kc;g.offset=bc;g.size=$c;g.state=Uc;g.stride=
dd;g.type=Ac;g.w=hd;g.x=Ed;g.y=wd;g.z=oe;Ad&&n.destroyStream(ie);S.buffer=Cd;S.divisor=Fd;S.normalized=je;S.offset=ye;S.size=pg;S.state=le;S.stride=ke;S.type=he;S.w=ve;S.x=de;S.y=me;S.z=Oc;we&&n.destroyStream(qe);X.buffer=xe;X.divisor=He;X.normalized=Je;X.offset=Ke;X.size=Le;X.state=Ie;X.stride=Ld;X.type=Xd;X.w=be;X.x=ee;X.y=Me;X.z=Id;De&&n.destroyStream(Ne);x.buffer=jf;x.divisor=nf;x.normalized=ef;x.offset=kf;x.size=lf;x.state=mf;x.stride=rf;x.type=of;x.w=sf;x.x=Bf;x.y=Cf;x.z=Qe;pf&&n.destroyStream(qf);
D.buffer=Jf;D.divisor=Kf;D.normalized=Lf;D.offset=tf;D.size=Qf;D.state=Hf;D.stride=uf;D.type=cg;D.w=Rf;D.x=Sf;D.y=qg;D.z=ff;Mf&&n.destroyStream(Nf);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;d.x=Ag;d.y=Bg;d.z=gf;Of&&n.destroyStream(Pf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;oa.vert=Og;oa.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,
ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Dc,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a){var Ta,q,n,C,va,Ba,Z,Hb,ga,I,sa,Da,oa,xa,Ea,ma,V,ua,Fa,Ia,mb,da,ha,$b,Ga,ac,Sb,ab,Dd,re,Wd,ze,Ad,Rd,oe,ie,Ed,Yd,fe;Ta=b.attributes;q=b.buffer;n=b.context;C=b.current;va=b.draw;Ba=b.elements;Z=b.extensions;Hb=b.framebuffer;ga=b.gl;I=b.isBufferArgs;sa=b.next;Da=b.shader;oa=b.uniforms;xa=b.vao;Ea=sa.blend_color;ma=C.blend_color;V=sa.blend_equation;ua=C.blend_equation;
Fa=sa.blend_func;Ia=C.blend_func;mb=sa.colorMask;da=C.colorMask;ha=sa.depth_range;$b=C.depth_range;Ga=sa.polygonOffset_offset;ac=C.polygonOffset_offset;Sb=sa.sample_coverage;ab=C.sample_coverage;Dd=sa.scissor_box;re=C.scissor_box;Wd=sa.stencil_func;ze=C.stencil_func;Ad=sa.stencil_opBack;Rd=C.stencil_opBack;oe=sa.stencil_opFront;ie=C.stencil_opFront;Ed=sa.viewport;Yd=C.viewport;fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
d){var c,f,g,l,k,b;c=Hb.next;c!==Hb.cur&&(c?ga.bindFramebuffer(36160,c.framebuffer):ga.bindFramebuffer(36160,null),Hb.cur=c);if(C.dirty){var p,t,v,x,e,w,Da,F,oa,D,L,u,m,z,H,y,M,S,Ea,Q,G,B,T,U,X,ca,ia,Y,Fa,Ua,qc,yb,db,Nb;p=sa.dither;p!==C.dither&&(p?ga.enable(3024):ga.disable(3024),C.dither=p);t=V[0];v=V[1];if(t!==ua[0]||v!==ua[1])ga.blendEquationSeparate(t,v),ua[0]=t,ua[1]=v;x=sa.depth_func;x!==C.depth_func&&(ga.depthFunc(x),C.depth_func=x);e=ha[0];w=ha[1];if(e!==$b[0]||w!==$b[1])ga.depthRange(e,
w),$b[0]=e,$b[1]=w;Da=sa.depth_mask;Da!==C.depth_mask&&(ga.depthMask(Da),C.depth_mask=Da);F=mb[0];oa=mb[1];D=mb[2];L=mb[3];if(F!==da[0]||oa!==da[1]||D!==da[2]||L!==da[3])ga.colorMask(F,oa,D,L),da[0]=F,da[1]=oa,da[2]=D,da[3]=L;u=sa.cull_enable;u!==C.cull_enable&&(u?ga.enable(2884):ga.disable(2884),C.cull_enable=u);m=sa.cull_face;m!==C.cull_face&&(ga.cullFace(m),C.cull_face=m);z=sa.frontFace;z!==C.frontFace&&(ga.frontFace(z),C.frontFace=z);H=sa.lineWidth;H!==C.lineWidth&&(ga.lineWidth(H),C.lineWidth=
H);y=sa.polygonOffset_enable;y!==C.polygonOffset_enable&&(y?ga.enable(32823):ga.disable(32823),C.polygonOffset_enable=y);M=Ga[0];S=Ga[1];if(M!==ac[0]||S!==ac[1])ga.polygonOffset(M,S),ac[0]=M,ac[1]=S;Ea=sa.sample_alpha;Ea!==C.sample_alpha&&(Ea?ga.enable(32926):ga.disable(32926),C.sample_alpha=Ea);Q=sa.sample_enable;Q!==C.sample_enable&&(Q?ga.enable(32928):ga.disable(32928),C.sample_enable=Q);G=Sb[0];B=Sb[1];if(G!==ab[0]||B!==ab[1])ga.sampleCoverage(G,B),ab[0]=G,ab[1]=B;T=sa.stencil_mask;T!==C.stencil_mask&&
(ga.stencilMask(T),C.stencil_mask=T);U=Wd[0];X=Wd[1];ca=Wd[2];if(U!==ze[0]||X!==ze[1]||ca!==ze[2])ga.stencilFunc(U,X,ca),ze[0]=U,ze[1]=X,ze[2]=ca;ia=oe[0];Y=oe[1];Fa=oe[2];Ua=oe[3];if(ia!==ie[0]||Y!==ie[1]||Fa!==ie[2]||Ua!==ie[3])ga.stencilOpSeparate(ia,Y,Fa,Ua),ie[0]=ia,ie[1]=Y,ie[2]=Fa,ie[3]=Ua;qc=Ad[0];yb=Ad[1];db=Ad[2];Nb=Ad[3];if(qc!==Rd[0]||yb!==Rd[1]||db!==Rd[2]||Nb!==Rd[3])ga.stencilOpSeparate(qc,yb,db,Nb),Rd[0]=qc,Rd[1]=yb,Rd[2]=db,Rd[3]=Nb}ga.blendColor(0,0,0,1);ma[0]=0;ma[1]=0;ma[2]=0;
ma[3]=1;ga.enable(3042);C.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;ga.disable(2929);C.depth_enable=!1;ga.enable(3089);C.scissor_enable=!0;ga.disable(2960);C.stencil_enable=!1;if(f=C.profile)g=performance.now(),ba.count+=d;ga.useProgram(ta.program);l=Z.angle_instanced_arrays;var bb;xa.setVAO(null);ga.uniform1i(J.location,!1);ga.uniform1i(qa.location,N.bind());bb=va.instances;for(k=0;k<d;++k){b=a[k];var ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,
Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,Dd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Ed,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,
Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf;ob=b.viewport;Va=ob.x|0;gd=ob.y|0;Ib="width"in ob?ob.width|0:n.framebufferWidth-Va;Jb="height"in ob?ob.height|0:n.framebufferHeight-gd;rc=n.viewportWidth;n.viewportWidth=Ib;Ob=n.viewportHeight;n.viewportHeight=Jb;ga.viewport(Va,gd,Ib,Jb);Yd[0]=Va;Yd[1]=gd;Yd[2]=Ib;Yd[3]=Jb;jb=b.viewport;Gb=jb.x|0;Db=jb.y|0;wb="width"in jb?jb.width|0:n.framebufferWidth-Gb;hb="height"in jb?jb.height|0:n.framebufferHeight-Db;ga.scissor(Gb,Db,wb,hb);re[0]=Gb;re[1]=Db;re[2]=
wb;re[3]=hb;Yb=A.call(this,n,b,k);Pb=!1;qb=null;Ra=0;Ub=!1;ic=zb=0;ib=1;pb=0;Ha=5126;gb=fb=Ka=rb=0;I(Yb)?(Pb=!0,qb=q.createStream(34962,Yb),Ha=qb.dtype):(qb=q.getBuffer(Yb))?Ha=qb.dtype:"constant"in Yb?(ib=2,"number"===typeof Yb.constant?(Ka=Yb.constant,fb=gb=rb=0):(Ka=0<Yb.constant.length?Yb.constant[0]:0,fb=1<Yb.constant.length?Yb.constant[1]:0,gb=2<Yb.constant.length?Yb.constant[2]:0,rb=3<Yb.constant.length?Yb.constant[3]:0)):(qb=I(Yb.buffer)?q.createStream(34962,Yb.buffer):q.getBuffer(Yb.buffer),
Ha="type"in Yb?fe[Yb.type]:qb.dtype,Ub=!!Yb.normalized,ic=Yb.size|0,zb=Yb.offset|0,pb=Yb.stride|0,Ra=Yb.divisor|0);La=ya.location;kb=Ta[La];if(1===ib){kb.buffer||ga.enableVertexAttribArray(La);Wa=ic||1;if(kb.type!==Ha||kb.size!==Wa||kb.buffer!==qb||kb.normalized!==Ub||kb.offset!==zb||kb.stride!==pb)ga.bindBuffer(34962,qb.buffer),ga.vertexAttribPointer(La,Wa,Ha,Ub,pb,zb),kb.type=Ha,kb.size=Wa,kb.buffer=qb,kb.normalized=Ub,kb.offset=zb,kb.stride=pb;kb.divisor!==Ra&&(l.vertexAttribDivisorANGLE(La,Ra),
kb.divisor=Ra)}else if(kb.buffer&&(ga.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==fb||kb.z!==gb||kb.w!==rb)ga.vertexAttrib4f(La,Ka,fb,gb,rb),kb.x=Ka,kb.y=fb,kb.z=gb,kb.w=rb;tb=ja.call(this,n,b,k);sb=!1;Oa=null;tc=0;Qa=!1;Eb=Kb=0;Ma=1;Dd=0;Ya=5126;Na=lb=Mb=Lb=0;I(tb)?(sb=!0,Oa=q.createStream(34962,tb),Ya=Oa.dtype):(Oa=q.getBuffer(tb))?Ya=Oa.dtype:"constant"in tb?(Ma=2,"number"===typeof tb.constant?(Mb=tb.constant,lb=Na=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,lb=1<tb.constant.length?
tb.constant[1]:0,Na=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Oa=I(tb.buffer)?q.createStream(34962,tb.buffer):q.getBuffer(tb.buffer),Ya="type"in tb?fe[tb.type]:Oa.dtype,Qa=!!tb.normalized,Eb=tb.size|0,Kb=tb.offset|0,Dd=tb.stride|0,tc=tb.divisor|0);Zb=na.location;Pa=Ta[Zb];if(1===Ma){Pa.buffer||ga.enableVertexAttribArray(Zb);ub=Eb||1;if(Pa.type!==Ya||Pa.size!==ub||Pa.buffer!==Oa||Pa.normalized!==Qa||Pa.offset!==Kb||Pa.stride!==Dd)ga.bindBuffer(34962,Oa.buffer),
ga.vertexAttribPointer(Zb,ub,Ya,Qa,Dd,Kb),Pa.type=Ya,Pa.size=ub,Pa.buffer=Oa,Pa.normalized=Qa,Pa.offset=Kb,Pa.stride=Dd;Pa.divisor!==tc&&(l.vertexAttribDivisorANGLE(Zb,tc),Pa.divisor=tc)}else if(Pa.buffer&&(ga.disableVertexAttribArray(Zb),Pa.buffer=null),Pa.x!==Mb||Pa.y!==lb||Pa.z!==Na||Pa.w!==Lb)ga.vertexAttrib4f(Zb,Mb,lb,Na,Lb),Pa.x=Mb,Pa.y=lb,Pa.z=Na,Pa.w=Lb;vb=Dc.call(this,n,b,k);Sa=!1;nb=null;fc=0;Bc=!1;cb=wc=0;jc=1;qd=0;Xa=5126;Vb=Za=Ab=Mc=0;I(vb)?(Sa=!0,nb=q.createStream(34962,vb),Xa=nb.dtype):
(nb=q.getBuffer(vb))?Xa=nb.dtype:"constant"in vb?(jc=2,"number"===typeof vb.constant?(Ab=vb.constant,Za=Vb=Mc=0):(Ab=0<vb.constant.length?vb.constant[0]:0,Za=1<vb.constant.length?vb.constant[1]:0,Vb=2<vb.constant.length?vb.constant[2]:0,Mc=3<vb.constant.length?vb.constant[3]:0)):(nb=I(vb.buffer)?q.createStream(34962,vb.buffer):q.getBuffer(vb.buffer),Xa="type"in vb?fe[vb.type]:nb.dtype,Bc=!!vb.normalized,cb=vb.size|0,wc=vb.offset|0,qd=vb.stride|0,fc=vb.divisor|0);uc=Ja.location;Wb=Ta[uc];if(1===jc){Wb.buffer||
ga.enableVertexAttribArray(uc);Qb=cb||1;if(Wb.type!==Xa||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==Bc||Wb.offset!==wc||Wb.stride!==qd)ga.bindBuffer(34962,nb.buffer),ga.vertexAttribPointer(uc,Qb,Xa,Bc,qd,wc),Wb.type=Xa,Wb.size=Qb,Wb.buffer=nb,Wb.normalized=Bc,Wb.offset=wc,Wb.stride=qd;Wb.divisor!==fc&&(l.vertexAttribDivisorANGLE(uc,fc),Wb.divisor=fc)}else if(Wb.buffer&&(ga.disableVertexAttribArray(uc),Wb.buffer=null),Wb.x!==Ab||Wb.y!==Za||Wb.z!==Vb||Wb.w!==Mc)ga.vertexAttrib4f(uc,Ab,Za,Vb,Mc),
Wb.x=Ab,Wb.y=Za,Wb.z=Vb,Wb.w=Mc;Kc=W.call(this,n,b,k);Rb=!1;Ed=null;Fc=0;sd=!1;Xc=Nc=0;td=1;nc=0;xc=5126;Tb=sc=eb=gc=0;I(Kc)?(Rb=!0,Ed=q.createStream(34962,Kc),xc=Ed.dtype):(Ed=q.getBuffer(Kc))?xc=Ed.dtype:"constant"in Kc?(td=2,"number"===typeof Kc.constant?(eb=Kc.constant,sc=Tb=gc=0):(eb=0<Kc.constant.length?Kc.constant[0]:0,sc=1<Kc.constant.length?Kc.constant[1]:0,Tb=2<Kc.constant.length?Kc.constant[2]:0,gc=3<Kc.constant.length?Kc.constant[3]:0)):(Ed=I(Kc.buffer)?q.createStream(34962,Kc.buffer):
q.getBuffer(Kc.buffer),xc="type"in Kc?fe[Kc.type]:Ed.dtype,sd=!!Kc.normalized,Xc=Kc.size|0,Nc=Kc.offset|0,nc=Kc.stride|0,Fc=Kc.divisor|0);Xb=$a.location;cc=Ta[Xb];if(1===td){cc.buffer||ga.enableVertexAttribArray(Xb);hc=Xc||1;if(cc.type!==xc||cc.size!==hc||cc.buffer!==Ed||cc.normalized!==sd||cc.offset!==Nc||cc.stride!==nc)ga.bindBuffer(34962,Ed.buffer),ga.vertexAttribPointer(Xb,hc,xc,sd,nc,Nc),cc.type=xc,cc.size=hc,cc.buffer=Ed,cc.normalized=sd,cc.offset=Nc,cc.stride=nc;cc.divisor!==Fc&&(l.vertexAttribDivisorANGLE(Xb,
Fc),cc.divisor=Fc)}else if(cc.buffer&&(ga.disableVertexAttribArray(Xb),cc.buffer=null),cc.x!==eb||cc.y!==sc||cc.z!==Tb||cc.w!==gc)ga.vertexAttrib4f(Xb,eb,sc,Tb,gc),cc.x=eb,cc.y=sc,cc.z=Tb,cc.w=gc;zc=ea.call(this,n,b,k);Cc=!1;bd=null;Qc=0;Rc=!1;Yc=Sc=0;od=1;cd=0;Zc=5126;Uc=$c=bc=kc=0;I(zc)?(Cc=!0,bd=q.createStream(34962,zc),Zc=bd.dtype):(bd=q.getBuffer(zc))?Zc=bd.dtype:"constant"in zc?(od=2,"number"===typeof zc.constant?(bc=zc.constant,$c=Uc=kc=0):(bc=0<zc.constant.length?zc.constant[0]:0,$c=1<zc.constant.length?
zc.constant[1]:0,Uc=2<zc.constant.length?zc.constant[2]:0,kc=3<zc.constant.length?zc.constant[3]:0)):(bd=I(zc.buffer)?q.createStream(34962,zc.buffer):q.getBuffer(zc.buffer),Zc="type"in zc?fe[zc.type]:bd.dtype,Rc=!!zc.normalized,Yc=zc.size|0,Sc=zc.offset|0,cd=zc.stride|0,Qc=zc.divisor|0);dd=Aa.location;Ac=Ta[dd];if(1===od){Ac.buffer||ga.enableVertexAttribArray(dd);hd=Yc||1;if(Ac.type!==Zc||Ac.size!==hd||Ac.buffer!==bd||Ac.normalized!==Rc||Ac.offset!==Sc||Ac.stride!==cd)ga.bindBuffer(34962,bd.buffer),
ga.vertexAttribPointer(dd,hd,Zc,Rc,cd,Sc),Ac.type=Zc,Ac.size=hd,Ac.buffer=bd,Ac.normalized=Rc,Ac.offset=Sc,Ac.stride=cd;Ac.divisor!==Qc&&(l.vertexAttribDivisorANGLE(dd,Qc),Ac.divisor=Qc)}else if(Ac.buffer&&(ga.disableVertexAttribArray(dd),Ac.buffer=null),Ac.x!==bc||Ac.y!==$c||Ac.z!==Uc||Ac.w!==kc)ga.vertexAttrib4f(dd,bc,$c,Uc,kc),Ac.x=bc,Ac.y=$c,Ac.z=Uc,Ac.w=kc;Nd=R.call(this,n,b,k);wd=!1;ue=null;id=0;Ce=!1;ge=Od=0;ce=1;Pd=0;Jd=5126;ud=Tc=md=Hd=0;I(Nd)?(wd=!0,ue=q.createStream(34962,Nd),Jd=ue.dtype):
(ue=q.getBuffer(Nd))?Jd=ue.dtype:"constant"in Nd?(ce=2,"number"===typeof Nd.constant?(md=Nd.constant,Tc=ud=Hd=0):(md=0<Nd.constant.length?Nd.constant[0]:0,Tc=1<Nd.constant.length?Nd.constant[1]:0,ud=2<Nd.constant.length?Nd.constant[2]:0,Hd=3<Nd.constant.length?Nd.constant[3]:0)):(ue=I(Nd.buffer)?q.createStream(34962,Nd.buffer):q.getBuffer(Nd.buffer),Jd="type"in Nd?fe[Nd.type]:ue.dtype,Ce=!!Nd.normalized,ge=Nd.size|0,Od=Nd.offset|0,Pd=Nd.stride|0,id=Nd.divisor|0);rd=ra.location;jd=Ta[rd];if(1===ce){jd.buffer||
ga.enableVertexAttribArray(rd);vd=ge||1;if(jd.type!==Jd||jd.size!==vd||jd.buffer!==ue||jd.normalized!==Ce||jd.offset!==Od||jd.stride!==Pd)ga.bindBuffer(34962,ue.buffer),ga.vertexAttribPointer(rd,vd,Jd,Ce,Pd,Od),jd.type=Jd,jd.size=vd,jd.buffer=ue,jd.normalized=Ce,jd.offset=Od,jd.stride=Pd;jd.divisor!==id&&(l.vertexAttribDivisorANGLE(rd,id),jd.divisor=id)}else if(jd.buffer&&(ga.disableVertexAttribArray(rd),jd.buffer=null),jd.x!==md||jd.y!==Tc||jd.z!==ud||jd.w!==Hd)ga.vertexAttrib4f(rd,md,Tc,ud,Hd),
jd.x=md,jd.y=Tc,jd.z=ud,jd.w=Hd;Cd=O.call(this,n,b,k);Fd=!1;je=null;ye=0;Fe=!1;ke=le=0;he=1;ve=0;de=5126;we=fd=Oc=me=0;I(Cd)?(Fd=!0,je=q.createStream(34962,Cd),de=je.dtype):(je=q.getBuffer(Cd))?de=je.dtype:"constant"in Cd?(he=2,"number"===typeof Cd.constant?(Oc=Cd.constant,fd=we=me=0):(Oc=0<Cd.constant.length?Cd.constant[0]:0,fd=1<Cd.constant.length?Cd.constant[1]:0,we=2<Cd.constant.length?Cd.constant[2]:0,me=3<Cd.constant.length?Cd.constant[3]:0)):(je=I(Cd.buffer)?q.createStream(34962,Cd.buffer):
q.getBuffer(Cd.buffer),de="type"in Cd?fe[Cd.type]:je.dtype,Fe=!!Cd.normalized,ke=Cd.size|0,le=Cd.offset|0,ve=Cd.stride|0,ye=Cd.divisor|0);qe=r.location;Kd=Ta[qe];if(1===he){Kd.buffer||ga.enableVertexAttribArray(qe);Qd=ke||4;if(Kd.type!==de||Kd.size!==Qd||Kd.buffer!==je||Kd.normalized!==Fe||Kd.offset!==le||Kd.stride!==ve)ga.bindBuffer(34962,je.buffer),ga.vertexAttribPointer(qe,Qd,de,Fe,ve,le),Kd.type=de,Kd.size=Qd,Kd.buffer=je,Kd.normalized=Fe,Kd.offset=le,Kd.stride=ve;Kd.divisor!==ye&&(l.vertexAttribDivisorANGLE(qe,
ye),Kd.divisor=ye)}else if(Kd.buffer&&(ga.disableVertexAttribArray(qe),Kd.buffer=null),Kd.x!==Oc||Kd.y!==fd||Kd.z!==we||Kd.w!==me)ga.vertexAttrib4f(qe,Oc,fd,we,me),Kd.x=Oc,Kd.y=fd,Kd.z=we,Kd.w=me;Sd=E.call(this,n,b,k);Td=!1;ne=null;Ge=0;Be=!1;Se=se=0;Te=1;Oe=0;xe=5126;Le=Ke=Je=He=0;I(Sd)?(Td=!0,ne=q.createStream(34962,Sd),xe=ne.dtype):(ne=q.getBuffer(Sd))?xe=ne.dtype:"constant"in Sd?(Te=2,"number"===typeof Sd.constant?(Je=Sd.constant,Ke=Le=He=0):(Je=0<Sd.constant.length?Sd.constant[0]:0,Ke=1<Sd.constant.length?
Sd.constant[1]:0,Le=2<Sd.constant.length?Sd.constant[2]:0,He=3<Sd.constant.length?Sd.constant[3]:0)):(ne=I(Sd.buffer)?q.createStream(34962,Sd.buffer):q.getBuffer(Sd.buffer),xe="type"in Sd?fe[Sd.type]:ne.dtype,Be=!!Sd.normalized,Se=Sd.size|0,se=Sd.offset|0,Oe=Sd.stride|0,Ge=Sd.divisor|0);Ie=Ca.location;Ld=Ta[Ie];if(1===Te){Ld.buffer||ga.enableVertexAttribArray(Ie);Xd=Se||4;if(Ld.type!==xe||Ld.size!==Xd||Ld.buffer!==ne||Ld.normalized!==Be||Ld.offset!==se||Ld.stride!==Oe)ga.bindBuffer(34962,ne.buffer),
ga.vertexAttribPointer(Ie,Xd,xe,Be,Oe,se),Ld.type=xe,Ld.size=Xd,Ld.buffer=ne,Ld.normalized=Be,Ld.offset=se,Ld.stride=Oe;Ld.divisor!==Ge&&(l.vertexAttribDivisorANGLE(Ie,Ge),Ld.divisor=Ge)}else if(Ld.buffer&&(ga.disableVertexAttribArray(Ie),Ld.buffer=null),Ld.x!==Je||Ld.y!==Ke||Ld.z!==Le||Ld.w!==He)ga.vertexAttrib4f(Ie,Je,Ke,Le,He),Ld.x=Je,Ld.y=Ke,Ld.z=Le,Ld.w=He;be=h.call(this,n,b,k);ee=!1;Me=null;Id=0;Ud=!1;Ne=De=0;hf=1;bf=0;Ue=5126;Ve=Ze=af=Pe=0;I(be)?(ee=!0,Me=q.createStream(34962,be),Ue=Me.dtype):
(Me=q.getBuffer(be))?Ue=Me.dtype:"constant"in be?(hf=2,"number"===typeof be.constant?(af=be.constant,Ze=Ve=Pe=0):(af=0<be.constant.length?be.constant[0]:0,Ze=1<be.constant.length?be.constant[1]:0,Ve=2<be.constant.length?be.constant[2]:0,Pe=3<be.constant.length?be.constant[3]:0)):(Me=I(be.buffer)?q.createStream(34962,be.buffer):q.getBuffer(be.buffer),Ue="type"in be?fe[be.type]:Me.dtype,Ud=!!be.normalized,Ne=be.size|0,De=be.offset|0,bf=be.stride|0,Id=be.divisor|0);We=aa.location;Vd=Ta[We];if(1===hf){Vd.buffer||
ga.enableVertexAttribArray(We);ae=Ne||1;if(Vd.type!==Ue||Vd.size!==ae||Vd.buffer!==Me||Vd.normalized!==Ud||Vd.offset!==De||Vd.stride!==bf)ga.bindBuffer(34962,Me.buffer),ga.vertexAttribPointer(We,ae,Ue,Ud,bf,De),Vd.type=Ue,Vd.size=ae,Vd.buffer=Me,Vd.normalized=Ud,Vd.offset=De,Vd.stride=bf;Vd.divisor!==Id&&(l.vertexAttribDivisorANGLE(We,Id),Vd.divisor=Id)}else if(Vd.buffer&&(ga.disableVertexAttribArray(We),Vd.buffer=null),Vd.x!==af||Vd.y!==Ze||Vd.z!==Ve||Vd.w!==Pe)ga.vertexAttrib4f(We,af,Ze,Ve,Pe),
Vd.x=af,Vd.y=Ze,Vd.z=Ve,Vd.w=Pe;Xe=n.pixelRatio;k&&jf===Xe||(jf=Xe,ga.uniform1f(za.location,Xe));nf=K.call(this,n,b,k);ef=nf[0];lf=nf[1];k&&kf===ef&&mf===lf||(kf=ef,mf=lf,ga.uniform2f(la.location,ef,lf));rf=b.scale;of=rf[0];Bf=rf[1];k&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ga.uniform2f(wa.location,of,Bf));Qe=b.scaleFract;Ee=Qe[0];qf=Qe[1];k&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ga.uniform2f(fa.location,Ee,qf));Gf=b.translate;Af=Gf[0];Ff=Gf[1];k&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ga.uniform2f(ka.location,Af,Ff));
xf=b.translateFract;vf=xf[0];zf=xf[1];k&&yf===vf&&If===zf||(yf=vf,If=zf,ga.uniform2f(pa.location,vf,zf));Jf=b.opacity;k&&Kf===Jf||(Kf=Jf,ga.uniform1f(P.location,Jf));Lf=b.elements;tf=null;(tf=(Qf=I(Lf))?Ba.createStream(Lf):Ba.getElements(Lf))&&ga.bindBuffer(34963,tf.buffer.buffer);Hf=b.offset;if(uf=b.count)0<bb?tf?l.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),bb):l.drawArraysInstancedANGLE(0,Hf,uf,bb):0>bb&&(tf?ga.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ga.drawArrays(0,
Hf,uf)),n.viewportWidth=rc,n.viewportHeight=Ob,Pb&&q.destroyStream(qb),sb&&q.destroyStream(Oa),Sa&&q.destroyStream(nb),Rb&&q.destroyStream(Ed),Cc&&q.destroyStream(bd),wd&&q.destroyStream(ue),Fd&&q.destroyStream(je),Td&&q.destroyStream(ne),ee&&q.destroyStream(Me),Qf&&Ba.destroyStream(tf)}N.unbind();C.dirty=!0;xa.setVAO(null);f&&(ba.cpuTime+=performance.now()-g)},draw:function(a){var d,h,f,g,k,b,t,v,x,A,w,Da,O,E,F,R,oa,D,K,z,N,y,S,Ea,Q,T,W,X,ea,ca,ia,Y,ja,ta,Dc,Fa,Ua,qc,yb,db,Nb,bb,ob,Va,Dd,Ib,Jb,rc,
Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,Ed,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd,wd,ue,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se;d=Hb.next;d!==Hb.cur&&(d?ga.bindFramebuffer(36160,d.framebuffer):ga.bindFramebuffer(36160,null),Hb.cur=d);
if(C.dirty){var Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf;Te=sa.dither;Te!==C.dither&&(Te?ga.enable(3024):ga.disable(3024),C.dither=Te);Oe=V[0];xe=V[1];if(Oe!==ua[0]||xe!==ua[1])ga.blendEquationSeparate(Oe,xe),ua[0]=Oe,ua[1]=xe;He=sa.depth_func;He!==C.depth_func&&(ga.depthFunc(He),C.depth_func=He);Je=ha[0];Ke=ha[1];if(Je!==$b[0]||Ke!==$b[1])ga.depthRange(Je,Ke),$b[0]=Je,$b[1]=Ke;Le=sa.depth_mask;Le!==C.depth_mask&&(ga.depthMask(Le),C.depth_mask=
Le);Ie=mb[0];Ld=mb[1];Xd=mb[2];be=mb[3];if(Ie!==da[0]||Ld!==da[1]||Xd!==da[2]||be!==da[3])ga.colorMask(Ie,Ld,Xd,be),da[0]=Ie,da[1]=Ld,da[2]=Xd,da[3]=be;ee=sa.cull_enable;ee!==C.cull_enable&&(ee?ga.enable(2884):ga.disable(2884),C.cull_enable=ee);Me=sa.cull_face;Me!==C.cull_face&&(ga.cullFace(Me),C.cull_face=Me);Id=sa.frontFace;Id!==C.frontFace&&(ga.frontFace(Id),C.frontFace=Id);Ud=sa.lineWidth;Ud!==C.lineWidth&&(ga.lineWidth(Ud),C.lineWidth=Ud);De=sa.polygonOffset_enable;De!==C.polygonOffset_enable&&
(De?ga.enable(32823):ga.disable(32823),C.polygonOffset_enable=De);Ne=Ga[0];hf=Ga[1];if(Ne!==ac[0]||hf!==ac[1])ga.polygonOffset(Ne,hf),ac[0]=Ne,ac[1]=hf;bf=sa.sample_alpha;bf!==C.sample_alpha&&(bf?ga.enable(32926):ga.disable(32926),C.sample_alpha=bf);Ue=sa.sample_enable;Ue!==C.sample_enable&&(Ue?ga.enable(32928):ga.disable(32928),C.sample_enable=Ue);Pe=Sb[0];af=Sb[1];if(Pe!==ab[0]||af!==ab[1])ga.sampleCoverage(Pe,af),ab[0]=Pe,ab[1]=af;Ze=sa.stencil_mask;Ze!==C.stencil_mask&&(ga.stencilMask(Ze),C.stencil_mask=
Ze);Ve=Wd[0];We=Wd[1];Vd=Wd[2];if(Ve!==ze[0]||We!==ze[1]||Vd!==ze[2])ga.stencilFunc(Ve,We,Vd),ze[0]=Ve,ze[1]=We,ze[2]=Vd;ae=oe[0];Xe=oe[1];jf=oe[2];nf=oe[3];if(ae!==ie[0]||Xe!==ie[1]||jf!==ie[2]||nf!==ie[3])ga.stencilOpSeparate(ae,Xe,jf,nf),ie[0]=ae,ie[1]=Xe,ie[2]=jf,ie[3]=nf;ef=Ad[0];kf=Ad[1];lf=Ad[2];mf=Ad[3];if(ef!==Rd[0]||kf!==Rd[1]||lf!==Rd[2]||mf!==Rd[3])ga.stencilOpSeparate(ef,kf,lf,mf),Rd[0]=ef,Rd[1]=kf,Rd[2]=lf,Rd[3]=mf}h=a.viewport;f=h.x|0;g=h.y|0;k="width"in h?h.width|0:n.framebufferWidth-
f;b="height"in h?h.height|0:n.framebufferHeight-g;t=n.viewportWidth;n.viewportWidth=k;v=n.viewportHeight;n.viewportHeight=b;ga.viewport(f,g,k,b);Yd[0]=f;Yd[1]=g;Yd[2]=k;Yd[3]=b;ga.blendColor(0,0,0,1);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=1;ga.enable(3042);C.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;ga.disable(2929);C.depth_enable=!1;x=a.viewport;A=x.x|0;w=x.y|0;Da="width"in x?x.width|0:n.framebufferWidth-A;O="height"in x?x.height|0:n.framebufferHeight-w;ga.scissor(A,
w,Da,O);re[0]=A;re[1]=w;re[2]=Da;re[3]=O;ga.enable(3089);C.scissor_enable=!0;ga.disable(2960);C.stencil_enable=!1;if(E=C.profile)F=performance.now(),ba.count++;ga.useProgram(M.program);R=Z.angle_instanced_arrays;xa.setVAO(null);oa=L.call(this,n,a,0);D=!1;K=null;z=0;N=!1;S=y=0;Ea=1;Q=0;T=5126;ca=ea=X=W=0;I(oa)?(D=!0,K=q.createStream(34962,oa),T=K.dtype):(K=q.getBuffer(oa))?T=K.dtype:"constant"in oa?(Ea=2,"number"===typeof oa.constant?(X=oa.constant,ea=ca=W=0):(X=0<oa.constant.length?oa.constant[0]:
0,ea=1<oa.constant.length?oa.constant[1]:0,ca=2<oa.constant.length?oa.constant[2]:0,W=3<oa.constant.length?oa.constant[3]:0)):(K=I(oa.buffer)?q.createStream(34962,oa.buffer):q.getBuffer(oa.buffer),T="type"in oa?fe[oa.type]:K.dtype,N=!!oa.normalized,S=oa.size|0,y=oa.offset|0,Q=oa.stride|0,z=oa.divisor|0);ia=ya.location;Y=Ta[ia];if(1===Ea){Y.buffer||ga.enableVertexAttribArray(ia);ja=S||1;if(Y.type!==T||Y.size!==ja||Y.buffer!==K||Y.normalized!==N||Y.offset!==y||Y.stride!==Q)ga.bindBuffer(34962,K.buffer),
ga.vertexAttribPointer(ia,ja,T,N,Q,y),Y.type=T,Y.size=ja,Y.buffer=K,Y.normalized=N,Y.offset=y,Y.stride=Q;Y.divisor!==z&&(R.vertexAttribDivisorANGLE(ia,z),Y.divisor=z)}else if(Y.buffer&&(ga.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ca||Y.w!==W)ga.vertexAttrib4f(ia,X,ea,ca,W),Y.x=X,Y.y=ea,Y.z=ca,Y.w=W;ta=e.call(this,n,a,0);Dc=!1;Fa=null;Ua=0;qc=!1;db=yb=0;Nb=1;bb=0;ob=5126;Jb=Ib=Dd=Va=0;I(ta)?(Dc=!0,Fa=q.createStream(34962,ta),ob=Fa.dtype):(Fa=q.getBuffer(ta))?ob=Fa.dtype:
"constant"in ta?(Nb=2,"number"===typeof ta.constant?(Dd=ta.constant,Ib=Jb=Va=0):(Dd=0<ta.constant.length?ta.constant[0]:0,Ib=1<ta.constant.length?ta.constant[1]:0,Jb=2<ta.constant.length?ta.constant[2]:0,Va=3<ta.constant.length?ta.constant[3]:0)):(Fa=I(ta.buffer)?q.createStream(34962,ta.buffer):q.getBuffer(ta.buffer),ob="type"in ta?fe[ta.type]:Fa.dtype,qc=!!ta.normalized,db=ta.size|0,yb=ta.offset|0,bb=ta.stride|0,Ua=ta.divisor|0);rc=na.location;Ob=Ta[rc];if(1===Nb){Ob.buffer||ga.enableVertexAttribArray(rc);
jb=db||1;if(Ob.type!==ob||Ob.size!==jb||Ob.buffer!==Fa||Ob.normalized!==qc||Ob.offset!==yb||Ob.stride!==bb)ga.bindBuffer(34962,Fa.buffer),ga.vertexAttribPointer(rc,jb,ob,qc,bb,yb),Ob.type=ob,Ob.size=jb,Ob.buffer=Fa,Ob.normalized=qc,Ob.offset=yb,Ob.stride=bb;Ob.divisor!==Ua&&(R.vertexAttribDivisorANGLE(rc,Ua),Ob.divisor=Ua)}else if(Ob.buffer&&(ga.disableVertexAttribArray(rc),Ob.buffer=null),Ob.x!==Dd||Ob.y!==Ib||Ob.z!==Jb||Ob.w!==Va)ga.vertexAttrib4f(rc,Dd,Ib,Jb,Va),Ob.x=Dd,Ob.y=Ib,Ob.z=Jb,Ob.w=Va;
Gb=l.call(this,n,a,0);Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;Ha=pb=ib=ic=0;I(Gb)?(Db=!0,wb=q.createStream(34962,Gb),zb=wb.dtype):(wb=q.getBuffer(Gb))?zb=wb.dtype:"constant"in Gb?(Ra=2,"number"===typeof Gb.constant?(ib=Gb.constant,pb=Ha=ic=0):(ib=0<Gb.constant.length?Gb.constant[0]:0,pb=1<Gb.constant.length?Gb.constant[1]:0,Ha=2<Gb.constant.length?Gb.constant[2]:0,ic=3<Gb.constant.length?Gb.constant[3]:0)):(wb=I(Gb.buffer)?q.createStream(34962,Gb.buffer):q.getBuffer(Gb.buffer),zb="type"in
Gb?fe[Gb.type]:wb.dtype,Yb=!!Gb.normalized,qb=Gb.size|0,Pb=Gb.offset|0,Ub=Gb.stride|0,hb=Gb.divisor|0);rb=Ja.location;Ka=Ta[rb];if(1===Ra){Ka.buffer||ga.enableVertexAttribArray(rb);fb=qb||1;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)ga.bindBuffer(34962,wb.buffer),ga.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(R.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=
hb)}else if(Ka.buffer&&(ga.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==ic)ga.vertexAttrib4f(rb,ib,pb,Ha,ic),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=ic;gb=p.call(this,n,a,0);La=!1;kb=null;Wa=0;tb=!1;Oa=sb=0;tc=1;Qa=0;Kb=5126;Ya=Ed=Ma=Eb=0;I(gb)?(La=!0,kb=q.createStream(34962,gb),Kb=kb.dtype):(kb=q.getBuffer(gb))?Kb=kb.dtype:"constant"in gb?(tc=2,"number"===typeof gb.constant?(Ma=gb.constant,Ed=Ya=Eb=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Ed=1<gb.constant.length?
gb.constant[1]:0,Ya=2<gb.constant.length?gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(kb=I(gb.buffer)?q.createStream(34962,gb.buffer):q.getBuffer(gb.buffer),Kb="type"in gb?fe[gb.type]:kb.dtype,tb=!!gb.normalized,Oa=gb.size|0,sb=gb.offset|0,Qa=gb.stride|0,Wa=gb.divisor|0);Lb=$a.location;Mb=Ta[Lb];if(1===tc){Mb.buffer||ga.enableVertexAttribArray(Lb);lb=Oa||1;if(Mb.type!==Kb||Mb.size!==lb||Mb.buffer!==kb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Qa)ga.bindBuffer(34962,kb.buffer),
ga.vertexAttribPointer(Lb,lb,Kb,tb,Qa,sb),Mb.type=Kb,Mb.size=lb,Mb.buffer=kb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Qa;Mb.divisor!==Wa&&(R.vertexAttribDivisorANGLE(Lb,Wa),Mb.divisor=Wa)}else if(Mb.buffer&&(ga.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Ma||Mb.y!==Ed||Mb.z!==Ya||Mb.w!==Eb)ga.vertexAttrib4f(Lb,Ma,Ed,Ya,Eb),Mb.x=Ma,Mb.y=Ed,Mb.z=Ya,Mb.w=Eb;Na=c.call(this,n,a,0);Zb=!1;Pa=null;ub=0;vb=!1;nb=Sa=0;fc=1;Bc=0;wc=5126;Xa=qd=jc=cb=0;I(Na)?(Zb=!0,Pa=q.createStream(34962,Na),wc=Pa.dtype):
(Pa=q.getBuffer(Na))?wc=Pa.dtype:"constant"in Na?(fc=2,"number"===typeof Na.constant?(jc=Na.constant,qd=Xa=cb=0):(jc=0<Na.constant.length?Na.constant[0]:0,qd=1<Na.constant.length?Na.constant[1]:0,Xa=2<Na.constant.length?Na.constant[2]:0,cb=3<Na.constant.length?Na.constant[3]:0)):(Pa=I(Na.buffer)?q.createStream(34962,Na.buffer):q.getBuffer(Na.buffer),wc="type"in Na?fe[Na.type]:Pa.dtype,vb=!!Na.normalized,nb=Na.size|0,Sa=Na.offset|0,Bc=Na.stride|0,ub=Na.divisor|0);Mc=Aa.location;Ab=Ta[Mc];if(1===fc){Ab.buffer||
ga.enableVertexAttribArray(Mc);Za=nb||1;if(Ab.type!==wc||Ab.size!==Za||Ab.buffer!==Pa||Ab.normalized!==vb||Ab.offset!==Sa||Ab.stride!==Bc)ga.bindBuffer(34962,Pa.buffer),ga.vertexAttribPointer(Mc,Za,wc,vb,Bc,Sa),Ab.type=wc,Ab.size=Za,Ab.buffer=Pa,Ab.normalized=vb,Ab.offset=Sa,Ab.stride=Bc;Ab.divisor!==ub&&(R.vertexAttribDivisorANGLE(Mc,ub),Ab.divisor=ub)}else if(Ab.buffer&&(ga.disableVertexAttribArray(Mc),Ab.buffer=null),Ab.x!==jc||Ab.y!==qd||Ab.z!==Xa||Ab.w!==cb)ga.vertexAttrib4f(Mc,jc,qd,Xa,cb),
Ab.x=jc,Ab.y=qd,Ab.z=Xa,Ab.w=cb;Vb=G.call(this,n,a,0);uc=!1;Wb=null;Qb=0;Kc=!1;pe=Rb=0;Fc=1;sd=0;Nc=5126;xc=nc=td=Xc=0;I(Vb)?(uc=!0,Wb=q.createStream(34962,Vb),Nc=Wb.dtype):(Wb=q.getBuffer(Vb))?Nc=Wb.dtype:"constant"in Vb?(Fc=2,"number"===typeof Vb.constant?(td=Vb.constant,nc=xc=Xc=0):(td=0<Vb.constant.length?Vb.constant[0]:0,nc=1<Vb.constant.length?Vb.constant[1]:0,xc=2<Vb.constant.length?Vb.constant[2]:0,Xc=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=I(Vb.buffer)?q.createStream(34962,Vb.buffer):
q.getBuffer(Vb.buffer),Nc="type"in Vb?fe[Vb.type]:Wb.dtype,Kc=!!Vb.normalized,pe=Vb.size|0,Rb=Vb.offset|0,sd=Vb.stride|0,Qb=Vb.divisor|0);gc=ra.location;eb=Ta[gc];if(1===Fc){eb.buffer||ga.enableVertexAttribArray(gc);sc=pe||1;if(eb.type!==Nc||eb.size!==sc||eb.buffer!==Wb||eb.normalized!==Kc||eb.offset!==Rb||eb.stride!==sd)ga.bindBuffer(34962,Wb.buffer),ga.vertexAttribPointer(gc,sc,Nc,Kc,sd,Rb),eb.type=Nc,eb.size=sc,eb.buffer=Wb,eb.normalized=Kc,eb.offset=Rb,eb.stride=sd;eb.divisor!==Qb&&(R.vertexAttribDivisorANGLE(gc,
Qb),eb.divisor=Qb)}else if(eb.buffer&&(ga.disableVertexAttribArray(gc),eb.buffer=null),eb.x!==td||eb.y!==nc||eb.z!==xc||eb.w!==Xc)ga.vertexAttrib4f(gc,td,nc,xc,Xc),eb.x=td,eb.y=nc,eb.z=xc,eb.w=Xc;Tb=H.call(this,n,a,0);Xb=!1;cc=null;hc=0;zc=!1;bd=Cc=0;Qc=1;Rc=0;Sc=5126;Zc=cd=od=Yc=0;I(Tb)?(Xb=!0,cc=q.createStream(34962,Tb),Sc=cc.dtype):(cc=q.getBuffer(Tb))?Sc=cc.dtype:"constant"in Tb?(Qc=2,"number"===typeof Tb.constant?(od=Tb.constant,cd=Zc=Yc=0):(od=0<Tb.constant.length?Tb.constant[0]:0,cd=1<Tb.constant.length?
Tb.constant[1]:0,Zc=2<Tb.constant.length?Tb.constant[2]:0,Yc=3<Tb.constant.length?Tb.constant[3]:0)):(cc=I(Tb.buffer)?q.createStream(34962,Tb.buffer):q.getBuffer(Tb.buffer),Sc="type"in Tb?fe[Tb.type]:cc.dtype,zc=!!Tb.normalized,bd=Tb.size|0,Cc=Tb.offset|0,Rc=Tb.stride|0,hc=Tb.divisor|0);kc=r.location;bc=Ta[kc];if(1===Qc){bc.buffer||ga.enableVertexAttribArray(kc);$c=bd||4;if(bc.type!==Sc||bc.size!==$c||bc.buffer!==cc||bc.normalized!==zc||bc.offset!==Cc||bc.stride!==Rc)ga.bindBuffer(34962,cc.buffer),
ga.vertexAttribPointer(kc,$c,Sc,zc,Rc,Cc),bc.type=Sc,bc.size=$c,bc.buffer=cc,bc.normalized=zc,bc.offset=Cc,bc.stride=Rc;bc.divisor!==hc&&(R.vertexAttribDivisorANGLE(kc,hc),bc.divisor=hc)}else if(bc.buffer&&(ga.disableVertexAttribArray(kc),bc.buffer=null),bc.x!==od||bc.y!==cd||bc.z!==Zc||bc.w!==Yc)ga.vertexAttrib4f(kc,od,cd,Zc,Yc),bc.x=od,bc.y=cd,bc.z=Zc,bc.w=Yc;Uc=B.call(this,n,a,0);dd=!1;Ac=null;hd=0;Nd=!1;ue=wd=0;id=1;Ce=0;Od=5126;Jd=Pd=ce=ge=0;I(Uc)?(dd=!0,Ac=q.createStream(34962,Uc),Od=Ac.dtype):
(Ac=q.getBuffer(Uc))?Od=Ac.dtype:"constant"in Uc?(id=2,"number"===typeof Uc.constant?(ce=Uc.constant,Pd=Jd=ge=0):(ce=0<Uc.constant.length?Uc.constant[0]:0,Pd=1<Uc.constant.length?Uc.constant[1]:0,Jd=2<Uc.constant.length?Uc.constant[2]:0,ge=3<Uc.constant.length?Uc.constant[3]:0)):(Ac=I(Uc.buffer)?q.createStream(34962,Uc.buffer):q.getBuffer(Uc.buffer),Od="type"in Uc?fe[Uc.type]:Ac.dtype,Nd=!!Uc.normalized,ue=Uc.size|0,wd=Uc.offset|0,Ce=Uc.stride|0,hd=Uc.divisor|0);Hd=Ca.location;md=Ta[Hd];if(1===id){md.buffer||
ga.enableVertexAttribArray(Hd);Tc=ue||4;if(md.type!==Od||md.size!==Tc||md.buffer!==Ac||md.normalized!==Nd||md.offset!==wd||md.stride!==Ce)ga.bindBuffer(34962,Ac.buffer),ga.vertexAttribPointer(Hd,Tc,Od,Nd,Ce,wd),md.type=Od,md.size=Tc,md.buffer=Ac,md.normalized=Nd,md.offset=wd,md.stride=Ce;md.divisor!==hd&&(R.vertexAttribDivisorANGLE(Hd,hd),md.divisor=hd)}else if(md.buffer&&(ga.disableVertexAttribArray(Hd),md.buffer=null),md.x!==ce||md.y!==Pd||md.z!==Jd||md.w!==ge)ga.vertexAttrib4f(Hd,ce,Pd,Jd,ge),
md.x=ce,md.y=Pd,md.z=Jd,md.w=ge;ud=U.call(this,n,a,0);rd=!1;jd=null;vd=0;Cd=!1;je=Fd=0;ye=1;Fe=0;le=5126;de=ve=he=ke=0;I(ud)?(rd=!0,jd=q.createStream(34962,ud),le=jd.dtype):(jd=q.getBuffer(ud))?le=jd.dtype:"constant"in ud?(ye=2,"number"===typeof ud.constant?(he=ud.constant,ve=de=ke=0):(he=0<ud.constant.length?ud.constant[0]:0,ve=1<ud.constant.length?ud.constant[1]:0,de=2<ud.constant.length?ud.constant[2]:0,ke=3<ud.constant.length?ud.constant[3]:0)):(jd=I(ud.buffer)?q.createStream(34962,ud.buffer):
q.getBuffer(ud.buffer),le="type"in ud?fe[ud.type]:jd.dtype,Cd=!!ud.normalized,je=ud.size|0,Fd=ud.offset|0,Fe=ud.stride|0,vd=ud.divisor|0);me=aa.location;Oc=Ta[me];if(1===ye){Oc.buffer||ga.enableVertexAttribArray(me);fd=je||1;if(Oc.type!==le||Oc.size!==fd||Oc.buffer!==jd||Oc.normalized!==Cd||Oc.offset!==Fd||Oc.stride!==Fe)ga.bindBuffer(34962,jd.buffer),ga.vertexAttribPointer(me,fd,le,Cd,Fe,Fd),Oc.type=le,Oc.size=fd,Oc.buffer=jd,Oc.normalized=Cd,Oc.offset=Fd,Oc.stride=Fe;Oc.divisor!==vd&&(R.vertexAttribDivisorANGLE(me,
vd),Oc.divisor=vd)}else if(Oc.buffer&&(ga.disableVertexAttribArray(me),Oc.buffer=null),Oc.x!==he||Oc.y!==ve||Oc.z!==de||Oc.w!==ke)ga.vertexAttrib4f(me,he,ve,de,ke),Oc.x=he,Oc.y=ve,Oc.z=de,Oc.w=ke;ga.uniform1i(J.location,!1);ga.uniform1f(za.location,n.pixelRatio);we=m.call(this,n,a,0);ga.uniform2f(la.location,we[0],we[1]);qe=a.scale;ga.uniform2f(wa.location,qe[0],qe[1]);Kd=a.scaleFract;ga.uniform2f(fa.location,Kd[0],Kd[1]);Qd=a.translate;ga.uniform2f(ka.location,Qd[0],Qd[1]);Sd=a.translateFract;ga.uniform2f(pa.location,
Sd[0],Sd[1]);ga.uniform1f(P.location,a.opacity);ga.uniform1i(qa.location,u.bind());Td=a.elements;ne=null;(ne=(Ge=I(Td))?Ba.createStream(Td):Ba.getElements(Td))&&ga.bindBuffer(34963,ne.buffer.buffer);Be=a.offset;if(se=a.count)Se=va.instances,0<Se?ne?R.drawElementsInstancedANGLE(0,se,ne.type,Be<<(ne.type-5121>>1),Se):R.drawArraysInstancedANGLE(0,Be,se,Se):0>Se&&(ne?ga.drawElements(0,se,ne.type,Be<<(ne.type-5121>>1)):ga.drawArrays(0,Be,se)),C.dirty=!0,xa.setVAO(null),n.viewportWidth=t,n.viewportHeight=
v,E&&(ba.cpuTime+=performance.now()-F),D&&q.destroyStream(K),Dc&&q.destroyStream(Fa),Db&&q.destroyStream(wb),La&&q.destroyStream(kb),Zb&&q.destroyStream(Pa),uc&&q.destroyStream(Wb),Xb&&q.destroyStream(cc),dd&&q.destroyStream(Ac),rd&&q.destroyStream(jd),u.unbind(),Ge&&Ba.destroyStream(ne)},scope:function(c,h,l){var r,b,p,na,A,e,J,O,E,P,R,fa,K,ga,L,$a,u,Ja,ma,m,N,V,H,aa,xa,M,qa,wa,G,Ca,B,U,da,ka,W,ea,Ta,pa,Aa,la,ya,ta,ja,ra,ua,Hb,za,Dc,Z,Ga,Ia,xd,mb,Sb,ha,Ra,$b,ac,Wd,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,
sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,Rd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Yd,Fc,re,Nc,Xc,ze,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,ab,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,ie,oe,Ad,id,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,ud,rd,jd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,fd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,pg,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,
Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;r=c.viewport;b=r.x|0;p=r.y|0;na="width"in r?r.width|0:n.framebufferWidth-b;A="height"in r?r.height|0:n.framebufferHeight-p;e=n.viewportWidth;n.viewportWidth=na;J=n.viewportHeight;n.viewportHeight=A;O=Ed[0];Ed[0]=b;E=Ed[1];Ed[1]=p;P=Ed[2];Ed[2]=na;R=Ed[3];Ed[3]=A;fa=Ea[0];Ea[0]=0;K=Ea[1];Ea[1]=0;ga=Ea[2];Ea[2]=0;L=Ea[3];
Ea[3]=1;$a=sa.blend_enable;sa.blend_enable=!0;u=Fa[0];Fa[0]=770;Ja=Fa[1];Fa[1]=771;ma=Fa[2];Fa[2]=773;m=Fa[3];Fa[3]=1;N=sa.depth_enable;sa.depth_enable=!1;V=c.viewport;H=V.x|0;aa=V.y|0;xa="width"in V?V.width|0:n.framebufferWidth-H;M="height"in V?V.height|0:n.framebufferHeight-aa;qa=Dd[0];Dd[0]=H;wa=Dd[1];Dd[1]=aa;G=Dd[2];Dd[2]=xa;Ca=Dd[3];Dd[3]=M;B=sa.scissor_enable;sa.scissor_enable=!0;U=sa.stencil_enable;sa.stencil_enable=!1;if(da=C.profile)ka=performance.now(),ba.count++;W=c.elements;ea=null;ea=
(Ta=I(W))?Ba.createStream(W):Ba.getElements(W);pa=va.elements;va.elements=ea;Aa=c.offset;la=va.offset;va.offset=Aa;ya=c.count;ta=va.count;va.count=ya;ja=va.primitive;va.primitive=0;ra=oa[45];oa[45]=!1;ua=c.markerTexture;Hb=oa[48];oa[48]=ua;za=c.opacity;Dc=oa[10];oa[10]=za;Z=y.call(this,n,c,l);Ga=oa[46];oa[46]=Z;Ia=oa[47];oa[47]=ca;xd=n.pixelRatio;mb=oa[34];oa[34]=xd;Sb=c.scale;ha=oa[6];oa[6]=Sb;Ra=c.scaleFract;$b=oa[7];oa[7]=Ra;ac=c.translate;Wd=oa[8];oa[8]=ac;ib=c.translateFract;pb=oa[9];oa[9]=ib;
Ha=w.call(this,n,c,l);rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Wa=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;I(Ha)?(rb=!0,Ka=q.createStream(34962,Ha),sb=Ka.dtype):(Ka=q.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Wa=2,"number"===typeof Ha.constant?(tc=Ha.constant,Qa=Kb=Oa=0):(tc=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=I(Ha.buffer)?q.createStream(34962,Ha.buffer):q.getBuffer(Ha.buffer),sb="type"in
Ha?fe[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=T.buffer;T.buffer=Ka;Ma=T.divisor;T.divisor=fb;yd=T.normalized;T.normalized=gb;Ya=T.offset;T.offset=La;Lb=T.size;T.size=kb;Mb=T.state;T.state=Wa;lb=T.stride;T.stride=tb;Na=T.type;T.type=sb;Zb=T.w;T.w=Oa;Pa=T.x;T.x=tc;ub=T.y;T.y=Qa;vb=T.z;T.z=Kb;Sa=z.call(this,n,c,l);nb=!1;fc=null;Bc=0;wc=!1;jc=cb=0;Rd=1;Xa=0;Mc=5126;uc=Vb=Za=Ab=0;I(Sa)?(nb=!0,fc=q.createStream(34962,Sa),Mc=fc.dtype):(fc=q.getBuffer(Sa))?
Mc=fc.dtype:"constant"in Sa?(Rd=2,"number"===typeof Sa.constant?(Za=Sa.constant,Vb=uc=Ab=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(fc=I(Sa.buffer)?q.createStream(34962,Sa.buffer):q.getBuffer(Sa.buffer),Mc="type"in Sa?fe[Sa.type]:fc.dtype,wc=!!Sa.normalized,jc=Sa.size|0,cb=Sa.offset|0,Xa=Sa.stride|0,Bc=Sa.divisor|0);Wb=Q.buffer;Q.buffer=fc;Qb=Q.divisor;Q.divisor=Bc;Kc=Q.normalized;
Q.normalized=wc;Rb=Q.offset;Q.offset=cb;Yd=Q.size;Q.size=jc;Fc=Q.state;Q.state=Rd;re=Q.stride;Q.stride=Xa;Nc=Q.type;Q.type=Mc;Xc=Q.w;Q.w=Ab;ze=Q.x;Q.x=Za;nc=Q.y;Q.y=Vb;xc=Q.z;Q.z=uc;gc=ia.call(this,n,c,l);eb=!1;sc=null;Tb=0;Xb=!1;hc=cc=0;zc=1;Cc=0;bd=5126;Yc=Sc=Rc=Qc=0;I(gc)?(eb=!0,sc=q.createStream(34962,gc),bd=sc.dtype):(sc=q.getBuffer(gc))?bd=sc.dtype:"constant"in gc?(zc=2,"number"===typeof gc.constant?(Rc=gc.constant,Sc=Yc=Qc=0):(Rc=0<gc.constant.length?gc.constant[0]:0,Sc=1<gc.constant.length?
gc.constant[1]:0,Yc=2<gc.constant.length?gc.constant[2]:0,Qc=3<gc.constant.length?gc.constant[3]:0)):(sc=I(gc.buffer)?q.createStream(34962,gc.buffer):q.getBuffer(gc.buffer),bd="type"in gc?fe[gc.type]:sc.dtype,Xb=!!gc.normalized,hc=gc.size|0,cc=gc.offset|0,Cc=gc.stride|0,Tb=gc.divisor|0);ab=g.buffer;g.buffer=sc;cd=g.divisor;g.divisor=Tb;Zc=g.normalized;g.normalized=Xb;kc=g.offset;g.offset=cc;bc=g.size;g.size=hc;$c=g.state;g.state=zc;Uc=g.stride;g.stride=Cc;dd=g.type;g.type=bd;Ac=g.w;g.w=Qc;hd=g.x;
g.x=Rc;ie=g.y;g.y=Sc;oe=g.z;g.z=Yc;Ad=v.call(this,n,c,l);id=!1;Ce=null;Od=0;ge=!1;Pd=ce=0;Jd=1;Hd=0;md=5126;jd=rd=ud=Tc=0;I(Ad)?(id=!0,Ce=q.createStream(34962,Ad),md=Ce.dtype):(Ce=q.getBuffer(Ad))?md=Ce.dtype:"constant"in Ad?(Jd=2,"number"===typeof Ad.constant?(ud=Ad.constant,rd=jd=Tc=0):(ud=0<Ad.constant.length?Ad.constant[0]:0,rd=1<Ad.constant.length?Ad.constant[1]:0,jd=2<Ad.constant.length?Ad.constant[2]:0,Tc=3<Ad.constant.length?Ad.constant[3]:0)):(Ce=I(Ad.buffer)?q.createStream(34962,Ad.buffer):
q.getBuffer(Ad.buffer),md="type"in Ad?fe[Ad.type]:Ce.dtype,ge=!!Ad.normalized,Pd=Ad.size|0,ce=Ad.offset|0,Hd=Ad.stride|0,Od=Ad.divisor|0);vd=S.buffer;S.buffer=Ce;Cd=S.divisor;S.divisor=Od;Fd=S.normalized;S.normalized=ge;je=S.offset;S.offset=ce;ye=S.size;S.size=Pd;Fe=S.state;S.state=Jd;le=S.stride;S.stride=Hd;ke=S.type;S.type=md;he=S.w;S.w=Tc;ve=S.x;S.x=ud;de=S.y;S.y=rd;me=S.z;S.z=jd;Oc=k.call(this,n,c,l);fd=!1;we=null;qe=0;Kd=!1;Sd=Qd=0;Td=1;ne=0;Ge=5126;Te=Se=se=Be=0;I(Oc)?(fd=!0,we=q.createStream(34962,
Oc),Ge=we.dtype):(we=q.getBuffer(Oc))?Ge=we.dtype:"constant"in Oc?(Td=2,"number"===typeof Oc.constant?(se=Oc.constant,Se=Te=Be=0):(se=0<Oc.constant.length?Oc.constant[0]:0,Se=1<Oc.constant.length?Oc.constant[1]:0,Te=2<Oc.constant.length?Oc.constant[2]:0,Be=3<Oc.constant.length?Oc.constant[3]:0)):(we=I(Oc.buffer)?q.createStream(34962,Oc.buffer):q.getBuffer(Oc.buffer),Ge="type"in Oc?fe[Oc.type]:we.dtype,Kd=!!Oc.normalized,Sd=Oc.size|0,Qd=Oc.offset|0,ne=Oc.stride|0,qe=Oc.divisor|0);Oe=X.buffer;X.buffer=
we;xe=X.divisor;X.divisor=qe;He=X.normalized;X.normalized=Kd;Je=X.offset;X.offset=Qd;Ke=X.size;X.size=Sd;Le=X.state;X.state=Td;Ie=X.stride;X.stride=ne;Ld=X.type;X.type=Ge;Xd=X.w;X.w=Be;be=X.x;X.x=se;ee=X.y;X.y=Se;Me=X.z;X.z=Te;Id=f.call(this,n,c,l);Ud=!1;De=null;Ne=0;pg=!1;Ue=bf=0;Pe=1;af=0;Ze=5126;ae=Vd=We=Ve=0;I(Id)?(Ud=!0,De=q.createStream(34962,Id),Ze=De.dtype):(De=q.getBuffer(Id))?Ze=De.dtype:"constant"in Id?(Pe=2,"number"===typeof Id.constant?(We=Id.constant,Vd=ae=Ve=0):(We=0<Id.constant.length?
Id.constant[0]:0,Vd=1<Id.constant.length?Id.constant[1]:0,ae=2<Id.constant.length?Id.constant[2]:0,Ve=3<Id.constant.length?Id.constant[3]:0)):(De=I(Id.buffer)?q.createStream(34962,Id.buffer):q.getBuffer(Id.buffer),Ze="type"in Id?fe[Id.type]:De.dtype,pg=!!Id.normalized,Ue=Id.size|0,bf=Id.offset|0,af=Id.stride|0,Ne=Id.divisor|0);Xe=x.buffer;x.buffer=De;jf=x.divisor;x.divisor=Ne;nf=x.normalized;x.normalized=pg;ef=x.offset;x.offset=bf;kf=x.size;x.size=Ue;lf=x.state;x.state=Pe;mf=x.stride;x.stride=af;
rf=x.type;x.type=Ze;of=x.w;x.w=Ve;sf=x.x;x.x=We;Bf=x.y;x.y=Vd;Cf=x.z;x.z=ae;Qe=Y.call(this,n,c,l);Ee=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;I(Qe)?(Ee=!0,pf=q.createStream(34962,Qe),wf=pf.dtype):(pf=q.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(pf=
I(Qe.buffer)?q.createStream(34962,Qe.buffer):q.getBuffer(Qe.buffer),wf="type"in Qe?fe[Qe.type]:pf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=D.buffer;D.buffer=pf;Jf=D.divisor;D.divisor=qf;Kf=D.normalized;D.normalized=Df;Lf=D.offset;D.offset=Gf;tf=D.size;D.size=Af;Qf=D.state;D.state=Ef;Hf=D.stride;D.stride=Ff;uf=D.type;D.type=wf;cg=D.w;D.w=xf;Rf=D.x;D.x=vf;Sf=D.y;D.y=yf;qg=D.z;D.z=zf;ff=F.call(this,n,c,l);cf=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;
Yf=Xf=Wf=Tf=0;I(ff)?(cf=!0,Mf=q.createStream(34962,ff),Vf=Mf.dtype):(Mf=q.getBuffer(ff))?Vf=Mf.dtype:"constant"in ff?(gg=2,"number"===typeof ff.constant?(Wf=ff.constant,Xf=Yf=Tf=0):(Wf=0<ff.constant.length?ff.constant[0]:0,Xf=1<ff.constant.length?ff.constant[1]:0,Yf=2<ff.constant.length?ff.constant[2]:0,Tf=3<ff.constant.length?ff.constant[3]:0)):(Mf=I(ff.buffer)?q.createStream(34962,ff.buffer):q.getBuffer(ff.buffer),Vf="type"in ff?fe[ff.type]:Mf.dtype,dg=!!ff.normalized,fg=ff.size|0,eg=ff.offset|
0,hg=ff.stride|0,Nf=ff.divisor|0);ig=d.buffer;d.buffer=Mf;rg=d.divisor;d.divisor=Nf;sg=d.normalized;d.normalized=dg;tg=d.offset;d.offset=eg;ug=d.size;d.size=fg;vg=d.state;d.state=gg;wg=d.stride;d.stride=hg;xg=d.type;d.type=Vf;yg=d.w;d.w=Tf;zg=d.x;d.x=Wf;Ag=d.y;d.y=Xf;Bg=d.z;d.z=Yf;gf=t.call(this,n,c,l);df=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;I(gf)?(df=!0,Of=q.createStream(34962,gf),Zf=Of.dtype):(Of=q.getBuffer(gf))?Zf=Of.dtype:"constant"in gf?(mg=2,"number"===typeof gf.constant?
($f=gf.constant,ag=bg=Uf=0):($f=0<gf.constant.length?gf.constant[0]:0,ag=1<gf.constant.length?gf.constant[1]:0,bg=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Of=I(gf.buffer)?q.createStream(34962,gf.buffer):q.getBuffer(gf.buffer),Zf="type"in gf?fe[gf.type]:Of.dtype,jg=!!gf.normalized,lg=gf.size|0,kg=gf.offset|0,ng=gf.stride|0,Pf=gf.divisor|0);og=a.buffer;a.buffer=Of;Cg=a.divisor;a.divisor=Pf;Dg=a.normalized;a.normalized=jg;Eg=a.offset;a.offset=kg;Fg=a.size;a.size=
lg;Gg=a.state;a.state=mg;Hg=a.stride;a.stride=ng;Ig=a.type;a.type=Zf;Jg=a.w;a.w=Uf;Kg=a.x;a.x=$f;Lg=a.y;a.y=ag;Mg=a.z;a.z=bg;Ng=Da.vert;Da.vert=59;Og=Da.frag;Da.frag=58;C.dirty=!0;h(n,c,l);n.viewportWidth=e;n.viewportHeight=J;Ed[0]=O;Ed[1]=E;Ed[2]=P;Ed[3]=R;Ea[0]=fa;Ea[1]=K;Ea[2]=ga;Ea[3]=L;sa.blend_enable=$a;Fa[0]=u;Fa[1]=Ja;Fa[2]=ma;Fa[3]=m;sa.depth_enable=N;Dd[0]=qa;Dd[1]=wa;Dd[2]=G;Dd[3]=Ca;sa.scissor_enable=B;sa.stencil_enable=U;da&&(ba.cpuTime+=performance.now()-ka);Ta&&Ba.destroyStream(ea);
va.elements=pa;va.offset=la;va.count=ta;va.primitive=ja;oa[45]=ra;oa[48]=Hb;oa[10]=Dc;oa[46]=Ga;oa[47]=Ia;oa[34]=mb;oa[6]=ha;oa[7]=$b;oa[8]=Wd;oa[9]=pb;rb&&q.destroyStream(Ka);T.buffer=Eb;T.divisor=Ma;T.normalized=yd;T.offset=Ya;T.size=Lb;T.state=Mb;T.stride=lb;T.type=Na;T.w=Zb;T.x=Pa;T.y=ub;T.z=vb;nb&&q.destroyStream(fc);Q.buffer=Wb;Q.divisor=Qb;Q.normalized=Kc;Q.offset=Rb;Q.size=Yd;Q.state=Fc;Q.stride=re;Q.type=Nc;Q.w=Xc;Q.x=ze;Q.y=nc;Q.z=xc;eb&&q.destroyStream(sc);g.buffer=ab;g.divisor=cd;g.normalized=
Zc;g.offset=kc;g.size=bc;g.state=$c;g.stride=Uc;g.type=dd;g.w=Ac;g.x=hd;g.y=ie;g.z=oe;id&&q.destroyStream(Ce);S.buffer=vd;S.divisor=Cd;S.normalized=Fd;S.offset=je;S.size=ye;S.state=Fe;S.stride=le;S.type=ke;S.w=he;S.x=ve;S.y=de;S.z=me;fd&&q.destroyStream(we);X.buffer=Oe;X.divisor=xe;X.normalized=He;X.offset=Je;X.size=Ke;X.state=Le;X.stride=Ie;X.type=Ld;X.w=Xd;X.x=be;X.y=ee;X.z=Me;Ud&&q.destroyStream(De);x.buffer=Xe;x.divisor=jf;x.normalized=nf;x.offset=ef;x.size=kf;x.state=lf;x.stride=mf;x.type=rf;
x.w=of;x.x=sf;x.y=Bf;x.z=Cf;Ee&&q.destroyStream(pf);D.buffer=If;D.divisor=Jf;D.normalized=Kf;D.offset=Lf;D.size=tf;D.state=Qf;D.stride=Hf;D.type=uf;D.w=cg;D.x=Rf;D.y=Sf;D.z=qg;cf&&q.destroyStream(Mf);d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;df&&q.destroyStream(Of);a.buffer=og;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Da.vert=Ng;Da.frag=Og;C.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Dc,W,ea){var R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,Z,Hb,ga,I,sa,Da,oa,xa,Ea,ma,V;R=b.attributes;O=b.buffer;E=b.context;h=b.current;N=b.draw;K=b.elements;Ca=b.extensions;ra=b.framebuffer;r=b.gl;J=b.isBufferArgs;aa=b.next;P=b.shader;
la=b.uniforms;qa=b.vao;za=aa.blend_color;wa=h.blend_color;fa=aa.blend_equation;Aa=h.blend_equation;ka=aa.blend_func;pa=h.blend_func;ya=aa.colorMask;Ja=h.colorMask;na=aa.depth_range;$a=h.depth_range;Ta=aa.polygonOffset_offset;q=h.polygonOffset_offset;n=aa.sample_coverage;C=h.sample_coverage;va=aa.scissor_box;Ba=h.scissor_box;Z=aa.stencil_func;Hb=h.stencil_func;ga=aa.stencil_opBack;I=h.stencil_opBack;sa=aa.stencil_opFront;Da=h.stencil_opFront;oa=aa.viewport;xa=h.viewport;Ea={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ma={offset:4,stride:8};V={offset:0,stride:8};return{batch:function(c,l){var b,p,e,w,oa,P,L,u,m,H,y,M,G;b=ra.next;b!==ra.cur&&(b?r.bindFramebuffer(36160,b.framebuffer):r.bindFramebuffer(36160,null),ra.cur=b);if(h.dirty){var B,U,ka,ca,la,za,ha,Md,ab,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc;B=aa.dither;B!==h.dither&&(B?r.enable(3024):r.disable(3024),h.dither=B);U=fa[0];ka=fa[1];if(U!==Aa[0]||
ka!==Aa[1])r.blendEquationSeparate(U,ka),Aa[0]=U,Aa[1]=ka;ca=aa.depth_func;ca!==h.depth_func&&(r.depthFunc(ca),h.depth_func=ca);la=na[0];za=na[1];if(la!==$a[0]||za!==$a[1])r.depthRange(la,za),$a[0]=la,$a[1]=za;ha=aa.depth_mask;ha!==h.depth_mask&&(r.depthMask(ha),h.depth_mask=ha);Md=ya[0];ab=ya[1];$e=ya[2];Re=ya[3];if(Md!==Ja[0]||ab!==Ja[1]||$e!==Ja[2]||Re!==Ja[3])r.colorMask(Md,ab,$e,Re),Ja[0]=Md,Ja[1]=ab,Ja[2]=$e,Ja[3]=Re;Gd=aa.cull_enable;Gd!==h.cull_enable&&(Gd?r.enable(2884):r.disable(2884),h.cull_enable=
Gd);Ae=aa.cull_face;Ae!==h.cull_face&&(r.cullFace(Ae),h.cull_face=Ae);te=aa.frontFace;te!==h.frontFace&&(r.frontFace(te),h.frontFace=te);Zd=aa.lineWidth;Zd!==h.lineWidth&&(r.lineWidth(Zd),h.lineWidth=Zd);Bd=aa.polygonOffset_enable;Bd!==h.polygonOffset_enable&&(Bd?r.enable(32823):r.disable(32823),h.polygonOffset_enable=Bd);$d=Ta[0];ld=Ta[1];if($d!==q[0]||ld!==q[1])r.polygonOffset($d,ld),q[0]=$d,q[1]=ld;ad=aa.sample_alpha;ad!==h.sample_alpha&&(ad?r.enable(32926):r.disable(32926),h.sample_alpha=ad);
pd=aa.sample_enable;pd!==h.sample_enable&&(pd?r.enable(32928):r.disable(32928),h.sample_enable=pd);Lc=n[0];nd=n[1];if(Lc!==C[0]||nd!==C[1])r.sampleCoverage(Lc,nd),C[0]=Lc,C[1]=nd;Gc=aa.stencil_mask;Gc!==h.stencil_mask&&(r.stencilMask(Gc),h.stencil_mask=Gc);ed=Z[0];Pc=Z[1];kd=Z[2];if(ed!==Hb[0]||Pc!==Hb[1]||kd!==Hb[2])r.stencilFunc(ed,Pc,kd),Hb[0]=ed,Hb[1]=Pc,Hb[2]=kd;Bb=sa[0];Fb=sa[1];vc=sa[2];xb=sa[3];if(Bb!==Da[0]||Fb!==Da[1]||vc!==Da[2]||xb!==Da[3])r.stencilOpSeparate(Bb,Fb,vc,xb),Da[0]=Bb,Da[1]=
Fb,Da[2]=vc,Da[3]=xb;yc=ga[0];Cb=ga[1];Jc=ga[2];lc=ga[3];if(yc!==I[0]||Cb!==I[1]||Jc!==I[2]||lc!==I[3])r.stencilOpSeparate(yc,Cb,Jc,lc),I[0]=yc,I[1]=Cb,I[2]=Jc,I[3]=lc;Hc=aa.scissor_enable;Hc!==h.scissor_enable&&(Hc?r.enable(3089):r.disable(3089),h.scissor_enable=Hc);Wc=va[0];Vc=va[1];Ec=va[2];dc=va[3];if(Wc!==Ba[0]||Vc!==Ba[1]||Ec!==Ba[2]||dc!==Ba[3])r.scissor(Wc,Vc,Ec,dc),Ba[0]=Wc,Ba[1]=Vc,Ba[2]=Ec,Ba[3]=dc}p=this.viewport;e=p.x|0;w=p.y|0;oa="width"in p?p.width|0:E.framebufferWidth-e;P="height"in
p?p.height|0:E.framebufferHeight-w;L=E.viewportWidth;E.viewportWidth=oa;u=E.viewportHeight;E.viewportHeight=P;r.viewport(e,w,oa,P);xa[0]=e;xa[1]=w;xa[2]=oa;xa[3]=P;r.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;r.enable(3042);h.blend_enable=!0;r.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;r.disable(2929);h.depth_enable=!1;r.disable(2960);h.stencil_enable=!1;if(m=h.profile)H=performance.now(),ba.count+=l;r.useProgram(T.program);y=Ca.angle_instanced_arrays;var Ic,oc,
pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb;qa.setVAO(null);V.buffer=this.sizeBuffer;Ic=!1;oc=null;pc=0;mc=!1;Ua=ec=0;qc=1;yb=0;db=5126;Va=ob=bb=Nb=0;J(V)?(Ic=!0,oc=O.createStream(34962,V),db=oc.dtype):(oc=O.getBuffer(V))?db=oc.dtype:"constant"in V?(qc=2,"number"===typeof V.constant?(bb=V.constant,ob=Va=Nb=0):(bb=0<V.constant.length?V.constant[0]:
0,ob=1<V.constant.length?V.constant[1]:0,Va=2<V.constant.length?V.constant[2]:0,Nb=3<V.constant.length?V.constant[3]:0)):(oc=J(V.buffer)?O.createStream(34962,V.buffer):O.getBuffer(V.buffer),db="type"in V?Ea[V.type]:oc.dtype,mc=!!V.normalized,Ua=V.size|0,ec=V.offset|0,yb=V.stride|0,pc=V.divisor|0);gd=ea.location;Ib=R[gd];if(1===qc){Ib.buffer||r.enableVertexAttribArray(gd);Jb=Ua||1;if(Ib.type!==db||Ib.size!==Jb||Ib.buffer!==oc||Ib.normalized!==mc||Ib.offset!==ec||Ib.stride!==yb)r.bindBuffer(34962,oc.buffer),
r.vertexAttribPointer(gd,Jb,db,mc,yb,ec),Ib.type=db,Ib.size=Jb,Ib.buffer=oc,Ib.normalized=mc,Ib.offset=ec,Ib.stride=yb;Ib.divisor!==pc&&(y.vertexAttribDivisorANGLE(gd,pc),Ib.divisor=pc)}else if(Ib.buffer&&(r.disableVertexAttribArray(gd),Ib.buffer=null),Ib.x!==bb||Ib.y!==ob||Ib.z!==Va||Ib.w!==Nb)r.vertexAttrib4f(gd,bb,ob,Va,Nb),Ib.x=bb,Ib.y=ob,Ib.z=Va,Ib.w=Nb;ma.buffer=this.sizeBuffer;rc=!1;Ob=null;jb=0;Gb=!1;wb=Db=0;hb=1;Yb=0;Pb=5126;zb=Ub=Ra=qb=0;J(ma)?(rc=!0,Ob=O.createStream(34962,ma),Pb=Ob.dtype):
(Ob=O.getBuffer(ma))?Pb=Ob.dtype:"constant"in ma?(hb=2,"number"===typeof ma.constant?(Ra=ma.constant,Ub=zb=qb=0):(Ra=0<ma.constant.length?ma.constant[0]:0,Ub=1<ma.constant.length?ma.constant[1]:0,zb=2<ma.constant.length?ma.constant[2]:0,qb=3<ma.constant.length?ma.constant[3]:0)):(Ob=J(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),Pb="type"in ma?Ea[ma.type]:Ob.dtype,Gb=!!ma.normalized,wb=ma.size|0,Db=ma.offset|0,Yb=ma.stride|0,jb=ma.divisor|0);ic=D.location;ib=R[ic];if(1===hb){ib.buffer||
r.enableVertexAttribArray(ic);pb=wb||1;if(ib.type!==Pb||ib.size!==pb||ib.buffer!==Ob||ib.normalized!==Gb||ib.offset!==Db||ib.stride!==Yb)r.bindBuffer(34962,Ob.buffer),r.vertexAttribPointer(ic,pb,Pb,Gb,Yb,Db),ib.type=Pb,ib.size=pb,ib.buffer=Ob,ib.normalized=Gb,ib.offset=Db,ib.stride=Yb;ib.divisor!==jb&&(y.vertexAttribDivisorANGLE(ic,jb),ib.divisor=jb)}else if(ib.buffer&&(r.disableVertexAttribArray(ic),ib.buffer=null),ib.x!==Ra||ib.y!==Ub||ib.z!==zb||ib.w!==qb)r.vertexAttrib4f(ic,Ra,Ub,zb,qb),ib.x=
Ra,ib.y=Ub,ib.z=zb,ib.w=qb;Ha=this.charBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Wa=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;J(Ha)?(rb=!0,Ka=O.createStream(34962,Ha),sb=Ka.dtype):(Ka=O.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Wa=2,"number"===typeof Ha.constant?(tc=Ha.constant,Qa=Kb=Oa=0):(tc=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=J(Ha.buffer)?O.createStream(34962,Ha.buffer):O.getBuffer(Ha.buffer),
sb="type"in Ha?Ea[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=Y.location;Ma=R[Eb];if(1===Wa){Ma.buffer||r.enableVertexAttribArray(Eb);zd=kb||1;if(Ma.type!==sb||Ma.size!==zd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)r.bindBuffer(34962,Ka.buffer),r.vertexAttribPointer(Eb,zd,sb,gb,tb,La),Ma.type=sb,Ma.size=zd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(y.vertexAttribDivisorANGLE(Eb,fb),Ma.divisor=
fb)}else if(Ma.buffer&&(r.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==tc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)r.vertexAttrib4f(Eb,tc,Qa,Kb,Oa),Ma.x=tc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Ya=this.position;Lb=!1;Mb=null;lb=0;Na=!1;Pa=Zb=0;ub=1;vb=0;Sa=5126;wc=Bc=fc=nb=0;J(Ya)?(Lb=!0,Mb=O.createStream(34962,Ya),Sa=Mb.dtype):(Mb=O.getBuffer(Ya))?Sa=Mb.dtype:"constant"in Ya?(ub=2,"number"===typeof Ya.constant?(fc=Ya.constant,Bc=wc=nb=0):(fc=0<Ya.constant.length?Ya.constant[0]:0,Bc=1<Ya.constant.length?Ya.constant[1]:
0,wc=2<Ya.constant.length?Ya.constant[2]:0,nb=3<Ya.constant.length?Ya.constant[3]:0)):(Mb=J(Ya.buffer)?O.createStream(34962,Ya.buffer):O.getBuffer(Ya.buffer),Sa="type"in Ya?Ea[Ya.type]:Mb.dtype,Na=!!Ya.normalized,Pa=Ya.size|0,Zb=Ya.offset|0,vb=Ya.stride|0,lb=Ya.divisor|0);cb=ta.location;jc=R[cb];if(1===ub){jc.buffer||r.enableVertexAttribArray(cb);qd=Pa||2;if(jc.type!==Sa||jc.size!==qd||jc.buffer!==Mb||jc.normalized!==Na||jc.offset!==Zb||jc.stride!==vb)r.bindBuffer(34962,Mb.buffer),r.vertexAttribPointer(cb,
qd,Sa,Na,vb,Zb),jc.type=Sa,jc.size=qd,jc.buffer=Mb,jc.normalized=Na,jc.offset=Zb,jc.stride=vb;jc.divisor!==lb&&(y.vertexAttribDivisorANGLE(cb,lb),jc.divisor=lb)}else if(jc.buffer&&(r.disableVertexAttribArray(cb),jc.buffer=null),jc.x!==fc||jc.y!==Bc||jc.z!==wc||jc.w!==nb)r.vertexAttrib4f(cb,fc,Bc,wc,nb),jc.x=fc,jc.y=Bc,jc.z=wc,jc.w=nb;Xa=this.viewportArray;r.uniform4f(W.location,Xa[0],Xa[1],Xa[2],Xa[3]);Mc=this.scale;r.uniform2f(ja.location,Mc[0],Mc[1]);Ab=this.translate;r.uniform2f(Dc.location,Ab[0],
Ab[1]);(Za=N.elements)?r.bindBuffer(34963,Za.buffer.buffer):qa.currentVAO&&(Za=K.getElements(qa.currentVAO.elements))&&r.bindBuffer(34963,Za.buffer.buffer);Vb=N.instances;for(M=0;M<l;++M){G=c[M];var uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd,Nd;uc=z.call(this,E,G,M);M&&Wb===uc||(Wb=uc,r.uniform1f(F.location,uc));Qb=Q.call(this,E,G,M);M&&Kc===Qb||(Kc=Qb,r.uniform1f(t.location,Qb));Rb=G.align;M&&pe===Rb||(pe=Rb,r.uniform1f(S.location,
Rb));Fc=G.baseline;M&&sd===Fc||(sd=Fc,r.uniform1f(x.location,Fc));Nc=G.color;Xc=Nc[0];nc=Nc[1];gc=Nc[2];sc=Nc[3];M&&td===Xc&&xc===nc&&eb===gc&&Tb===sc||(td=Xc,xc=nc,eb=gc,Tb=sc,r.uniform4f(d.location,Xc,nc,gc,sc));Xb=ia.call(this,E,G,M);cc=Xb[0];zc=Xb[1];M&&hc===cc&&Cc===zc||(hc=cc,Cc=zc,r.uniform2f(f.location,cc,zc));bd=g.call(this,E,G,M);Qc=bd[0];Sc=bd[1];M&&Rc===Qc&&Yc===Sc||(Rc=Qc,Yc=Sc,r.uniform2f(X.location,Qc,Sc));od=G.positionOffset;cd=od[0];kc=od[1];M&&Zc===cd&&bc===kc||(Zc=cd,bc=kc,r.uniform2f(A.location,
cd,kc));$c=G.opacity;M&&Uc===$c||(Uc=$c,r.uniform1f(a.location,$c));(dd=v.call(this,E,G,M))&&"framebuffer"===dd._reglType&&(dd=dd.color[0]);Ac=dd._texture;r.uniform1i(k.location,Ac.bind());hd=G.offset;if(Nd=G.count)0<Vb?Za?y.drawElementsInstancedANGLE(0,Nd,Za.type,hd<<(Za.type-5121>>1),Vb):y.drawArraysInstancedANGLE(0,hd,Nd,Vb):0>Vb&&(Za?r.drawElements(0,Nd,Za.type,hd<<(Za.type-5121>>1)):r.drawArrays(0,hd,Nd)),Ac.unbind()}Ic&&O.destroyStream(oc);rc&&O.destroyStream(Ob);rb&&O.destroyStream(Ka);Lb&&
O.destroyStream(Mb);h.dirty=!0;qa.setVAO(null);E.viewportWidth=L;E.viewportHeight=u;m&&(ba.cpuTime+=performance.now()-H)},draw:function(g){var b,v,w,oa,P,u,m,z,H,y,G,Q,B,T,U,ka,ca,ia,la,za,ha,ab,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob,Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb;b=ra.next;b!==ra.cur&&(b?r.bindFramebuffer(36160,b.framebuffer):r.bindFramebuffer(36160,null),ra.cur=
b);if(h.dirty){var Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc;Wa=aa.dither;Wa!==h.dither&&(Wa?r.enable(3024):r.disable(3024),h.dither=Wa);tb=fa[0];sb=fa[1];if(tb!==Aa[0]||sb!==Aa[1])r.blendEquationSeparate(tb,sb),Aa[0]=tb,Aa[1]=sb;Oa=aa.depth_func;Oa!==h.depth_func&&(r.depthFunc(Oa),h.depth_func=Oa);tc=na[0];Qa=na[1];if(tc!==$a[0]||Qa!==$a[1])r.depthRange(tc,Qa),$a[0]=tc,$a[1]=Qa;Kb=aa.depth_mask;Kb!==h.depth_mask&&(r.depthMask(Kb),
h.depth_mask=Kb);Eb=ya[0];Ma=ya[1];zd=ya[2];Ya=ya[3];if(Eb!==Ja[0]||Ma!==Ja[1]||zd!==Ja[2]||Ya!==Ja[3])r.colorMask(Eb,Ma,zd,Ya),Ja[0]=Eb,Ja[1]=Ma,Ja[2]=zd,Ja[3]=Ya;Lb=aa.cull_enable;Lb!==h.cull_enable&&(Lb?r.enable(2884):r.disable(2884),h.cull_enable=Lb);Mb=aa.cull_face;Mb!==h.cull_face&&(r.cullFace(Mb),h.cull_face=Mb);lb=aa.frontFace;lb!==h.frontFace&&(r.frontFace(lb),h.frontFace=lb);Na=aa.lineWidth;Na!==h.lineWidth&&(r.lineWidth(Na),h.lineWidth=Na);Zb=aa.polygonOffset_enable;Zb!==h.polygonOffset_enable&&
(Zb?r.enable(32823):r.disable(32823),h.polygonOffset_enable=Zb);Pa=Ta[0];ub=Ta[1];if(Pa!==q[0]||ub!==q[1])r.polygonOffset(Pa,ub),q[0]=Pa,q[1]=ub;vb=aa.sample_alpha;vb!==h.sample_alpha&&(vb?r.enable(32926):r.disable(32926),h.sample_alpha=vb);Sa=aa.sample_enable;Sa!==h.sample_enable&&(Sa?r.enable(32928):r.disable(32928),h.sample_enable=Sa);nb=n[0];fc=n[1];if(nb!==C[0]||fc!==C[1])r.sampleCoverage(nb,fc),C[0]=nb,C[1]=fc;Bc=aa.stencil_mask;Bc!==h.stencil_mask&&(r.stencilMask(Bc),h.stencil_mask=Bc);wc=
Z[0];cb=Z[1];jc=Z[2];if(wc!==Hb[0]||cb!==Hb[1]||jc!==Hb[2])r.stencilFunc(wc,cb,jc),Hb[0]=wc,Hb[1]=cb,Hb[2]=jc;qd=sa[0];Xa=sa[1];Mc=sa[2];Ab=sa[3];if(qd!==Da[0]||Xa!==Da[1]||Mc!==Da[2]||Ab!==Da[3])r.stencilOpSeparate(qd,Xa,Mc,Ab),Da[0]=qd,Da[1]=Xa,Da[2]=Mc,Da[3]=Ab;Za=ga[0];Vb=ga[1];uc=ga[2];Wb=ga[3];if(Za!==I[0]||Vb!==I[1]||uc!==I[2]||Wb!==I[3])r.stencilOpSeparate(Za,Vb,uc,Wb),I[0]=Za,I[1]=Vb,I[2]=uc,I[3]=Wb;Qb=aa.scissor_enable;Qb!==h.scissor_enable&&(Qb?r.enable(3089):r.disable(3089),h.scissor_enable=
Qb);Kc=va[0];Rb=va[1];pe=va[2];Fc=va[3];if(Kc!==Ba[0]||Rb!==Ba[1]||pe!==Ba[2]||Fc!==Ba[3])r.scissor(Kc,Rb,pe,Fc),Ba[0]=Kc,Ba[1]=Rb,Ba[2]=pe,Ba[3]=Fc}v=this.viewport;w=v.x|0;oa=v.y|0;P="width"in v?v.width|0:E.framebufferWidth-w;u="height"in v?v.height|0:E.framebufferHeight-oa;m=E.viewportWidth;E.viewportWidth=P;z=E.viewportHeight;E.viewportHeight=u;r.viewport(w,oa,P,u);xa[0]=w;xa[1]=oa;xa[2]=P;xa[3]=u;r.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;r.enable(3042);h.blend_enable=!0;r.blendFuncSeparate(770,
771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;r.disable(2929);h.depth_enable=!1;r.disable(2960);h.stencil_enable=!1;if(H=h.profile)y=performance.now(),ba.count++;r.useProgram(M.program);G=Ca.angle_instanced_arrays;qa.setVAO(null);V.buffer=this.sizeBuffer;Q=!1;B=null;T=0;U=!1;ca=ka=0;ia=1;la=0;za=5126;$e=Ye=ab=ha=0;J(V)?(Q=!0,B=O.createStream(34962,V),za=B.dtype):(B=O.getBuffer(V))?za=B.dtype:"constant"in V?(ia=2,"number"===typeof V.constant?(ab=V.constant,Ye=$e=ha=0):(ab=0<V.constant.length?V.constant[0]:
0,Ye=1<V.constant.length?V.constant[1]:0,$e=2<V.constant.length?V.constant[2]:0,ha=3<V.constant.length?V.constant[3]:0)):(B=J(V.buffer)?O.createStream(34962,V.buffer):O.getBuffer(V.buffer),za="type"in V?Ea[V.type]:B.dtype,U=!!V.normalized,ca=V.size|0,ka=V.offset|0,la=V.stride|0,T=V.divisor|0);Re=ea.location;Gd=R[Re];if(1===ia){Gd.buffer||r.enableVertexAttribArray(Re);Ae=ca||1;if(Gd.type!==za||Gd.size!==Ae||Gd.buffer!==B||Gd.normalized!==U||Gd.offset!==ka||Gd.stride!==la)r.bindBuffer(34962,B.buffer),
r.vertexAttribPointer(Re,Ae,za,U,la,ka),Gd.type=za,Gd.size=Ae,Gd.buffer=B,Gd.normalized=U,Gd.offset=ka,Gd.stride=la;Gd.divisor!==T&&(G.vertexAttribDivisorANGLE(Re,T),Gd.divisor=T)}else if(Gd.buffer&&(r.disableVertexAttribArray(Re),Gd.buffer=null),Gd.x!==ab||Gd.y!==Ye||Gd.z!==$e||Gd.w!==ha)r.vertexAttrib4f(Re,ab,Ye,$e,ha),Gd.x=ab,Gd.y=Ye,Gd.z=$e,Gd.w=ha;ma.buffer=this.sizeBuffer;te=!1;Zd=null;Bd=0;$d=!1;ad=ld=0;pd=1;Lc=0;nd=5126;kd=Pc=ed=Gc=0;J(ma)?(te=!0,Zd=O.createStream(34962,ma),nd=Zd.dtype):(Zd=
O.getBuffer(ma))?nd=Zd.dtype:"constant"in ma?(pd=2,"number"===typeof ma.constant?(ed=ma.constant,Pc=kd=Gc=0):(ed=0<ma.constant.length?ma.constant[0]:0,Pc=1<ma.constant.length?ma.constant[1]:0,kd=2<ma.constant.length?ma.constant[2]:0,Gc=3<ma.constant.length?ma.constant[3]:0)):(Zd=J(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),nd="type"in ma?Ea[ma.type]:Zd.dtype,$d=!!ma.normalized,ad=ma.size|0,ld=ma.offset|0,Lc=ma.stride|0,Bd=ma.divisor|0);Bb=D.location;Fb=R[Bb];if(1===pd){Fb.buffer||
r.enableVertexAttribArray(Bb);vc=ad||1;if(Fb.type!==nd||Fb.size!==vc||Fb.buffer!==Zd||Fb.normalized!==$d||Fb.offset!==ld||Fb.stride!==Lc)r.bindBuffer(34962,Zd.buffer),r.vertexAttribPointer(Bb,vc,nd,$d,Lc,ld),Fb.type=nd,Fb.size=vc,Fb.buffer=Zd,Fb.normalized=$d,Fb.offset=ld,Fb.stride=Lc;Fb.divisor!==Bd&&(G.vertexAttribDivisorANGLE(Bb,Bd),Fb.divisor=Bd)}else if(Fb.buffer&&(r.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==ed||Fb.y!==Pc||Fb.z!==kd||Fb.w!==Gc)r.vertexAttrib4f(Bb,ed,Pc,kd,Gc),Fb.x=
ed,Fb.y=Pc,Fb.z=kd,Fb.w=Gc;xb=this.charBuffer;yc=!1;Cb=null;Jc=0;lc=!1;Wc=Hc=0;Vc=1;Ec=0;dc=5126;mc=pc=oc=Ic=0;J(xb)?(yc=!0,Cb=O.createStream(34962,xb),dc=Cb.dtype):(Cb=O.getBuffer(xb))?dc=Cb.dtype:"constant"in xb?(Vc=2,"number"===typeof xb.constant?(oc=xb.constant,pc=mc=Ic=0):(oc=0<xb.constant.length?xb.constant[0]:0,pc=1<xb.constant.length?xb.constant[1]:0,mc=2<xb.constant.length?xb.constant[2]:0,Ic=3<xb.constant.length?xb.constant[3]:0)):(Cb=J(xb.buffer)?O.createStream(34962,xb.buffer):O.getBuffer(xb.buffer),
dc="type"in xb?Ea[xb.type]:Cb.dtype,lc=!!xb.normalized,Wc=xb.size|0,Hc=xb.offset|0,Ec=xb.stride|0,Jc=xb.divisor|0);ec=Y.location;Ua=R[ec];if(1===Vc){Ua.buffer||r.enableVertexAttribArray(ec);qc=Wc||1;if(Ua.type!==dc||Ua.size!==qc||Ua.buffer!==Cb||Ua.normalized!==lc||Ua.offset!==Hc||Ua.stride!==Ec)r.bindBuffer(34962,Cb.buffer),r.vertexAttribPointer(ec,qc,dc,lc,Ec,Hc),Ua.type=dc,Ua.size=qc,Ua.buffer=Cb,Ua.normalized=lc,Ua.offset=Hc,Ua.stride=Ec;Ua.divisor!==Jc&&(G.vertexAttribDivisorANGLE(ec,Jc),Ua.divisor=
Jc)}else if(Ua.buffer&&(r.disableVertexAttribArray(ec),Ua.buffer=null),Ua.x!==oc||Ua.y!==pc||Ua.z!==mc||Ua.w!==Ic)r.vertexAttrib4f(ec,oc,pc,mc,Ic),Ua.x=oc,Ua.y=pc,Ua.z=mc,Ua.w=Ic;yb=this.position;db=!1;Nb=null;bb=0;ob=!1;gd=Va=0;Ib=1;Jb=0;rc=5126;Db=Gb=jb=Ob=0;J(yb)?(db=!0,Nb=O.createStream(34962,yb),rc=Nb.dtype):(Nb=O.getBuffer(yb))?rc=Nb.dtype:"constant"in yb?(Ib=2,"number"===typeof yb.constant?(jb=yb.constant,Gb=Db=Ob=0):(jb=0<yb.constant.length?yb.constant[0]:0,Gb=1<yb.constant.length?yb.constant[1]:
0,Db=2<yb.constant.length?yb.constant[2]:0,Ob=3<yb.constant.length?yb.constant[3]:0)):(Nb=J(yb.buffer)?O.createStream(34962,yb.buffer):O.getBuffer(yb.buffer),rc="type"in yb?Ea[yb.type]:Nb.dtype,ob=!!yb.normalized,gd=yb.size|0,Va=yb.offset|0,Jb=yb.stride|0,bb=yb.divisor|0);wb=ta.location;hb=R[wb];if(1===Ib){hb.buffer||r.enableVertexAttribArray(wb);Yb=gd||2;if(hb.type!==rc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Va||hb.stride!==Jb)r.bindBuffer(34962,Nb.buffer),r.vertexAttribPointer(wb,
Yb,rc,ob,Jb,Va),hb.type=rc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Va,hb.stride=Jb;hb.divisor!==bb&&(G.vertexAttribDivisorANGLE(wb,bb),hb.divisor=bb)}else if(hb.buffer&&(r.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)r.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=L.call(this,E,g,0);r.uniform1f(F.location,Pb);qb=e.call(this,E,g,0);r.uniform1f(t.location,qb);r.uniform1f(S.location,g.align);r.uniform1f(x.location,g.baseline);
Ra=this.viewportArray;r.uniform4f(W.location,Ra[0],Ra[1],Ra[2],Ra[3]);Ub=g.color;r.uniform4f(d.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=l.call(this,E,g,0);r.uniform2f(f.location,zb[0],zb[1]);ic=p.call(this,E,g,0);r.uniform2f(X.location,ic[0],ic[1]);ib=this.scale;r.uniform2f(ja.location,ib[0],ib[1]);pb=this.translate;r.uniform2f(Dc.location,pb[0],pb[1]);Ha=g.positionOffset;r.uniform2f(A.location,Ha[0],Ha[1]);r.uniform1f(a.location,g.opacity);(rb=c.call(this,E,g,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);
Ka=rb._texture;r.uniform1i(k.location,Ka.bind());(fb=N.elements)?r.bindBuffer(34963,fb.buffer.buffer):qa.currentVAO&&(fb=K.getElements(qa.currentVAO.elements))&&r.bindBuffer(34963,fb.buffer.buffer);gb=g.offset;if(La=g.count)kb=N.instances,0<kb?fb?G.drawElementsInstancedANGLE(0,La,fb.type,gb<<(fb.type-5121>>1),kb):G.drawArraysInstancedANGLE(0,gb,La,kb):0>kb&&(fb?r.drawElements(0,La,fb.type,gb<<(fb.type-5121>>1)):r.drawArrays(0,gb,La)),h.dirty=!0,qa.setVAO(null),E.viewportWidth=m,E.viewportHeight=z,
H&&(ba.cpuTime+=performance.now()-y),Q&&O.destroyStream(B),te&&O.destroyStream(Zd),yc&&O.destroyStream(Cb),db&&O.destroyStream(Nb),Ka.unbind()},scope:function(a,d,c){var f,g,l,k,q,n,r,b,I,p,t,C,v,x,na,A,e,sa,Da,R,F,D,fa,K,ga,L,$a,Ja,z,M,va,xa,Q,qa,wa,S,Ca,T,W,X,ea,Ta,Y,pa,ia,Aa,ya,ta,ja,ra,Ba,Hb,Z,Dc,xd,ha,Ua,qc,yb,db,Nb,bb,ob,Va,ab,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa,Mc,Ab,Za,
Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Xc,td,nc,xc,gc,eb,sc,Tb,Xb,cc,hc,zc,Cc,bd,Qc,Rc,Sc,Yc,od,cd,Zc,kc,bc,$c,Uc,dd,Ac,hd;f=this.viewport;g=f.x|0;l=f.y|0;k="width"in f?f.width|0:E.framebufferWidth-g;q="height"in f?f.height|0:E.framebufferHeight-l;n=E.viewportWidth;E.viewportWidth=k;r=E.viewportHeight;E.viewportHeight=q;b=oa[0];oa[0]=g;I=oa[1];oa[1]=l;p=oa[2];oa[2]=k;t=oa[3];oa[3]=q;C=za[0];za[0]=0;v=za[1];za[1]=0;x=za[2];za[2]=0;na=za[3];za[3]=1;A=aa.blend_enable;aa.blend_enable=!0;e=ka[0];ka[0]=770;sa=ka[1];
ka[1]=771;Da=ka[2];ka[2]=773;R=ka[3];ka[3]=1;F=aa.depth_enable;aa.depth_enable=!1;D=aa.stencil_enable;aa.stencil_enable=!1;if(fa=h.profile)K=performance.now(),ba.count++;ga=a.offset;L=N.offset;N.offset=ga;$a=a.count;Ja=N.count;N.count=$a;z=N.primitive;N.primitive=0;M=a.align;va=la[64];la[64]=M;xa=G.call(this,E,a,c);Q=la[69];la[69]=xa;qa=H.call(this,E,a,c);wa=la[67];la[67]=qa;S=B.call(this,E,a,c);Ca=la[66];la[66]=S;T=a.baseline;W=la[65];la[65]=T;X=U.call(this,E,a,c);ea=la[62];la[62]=X;Ta=a.color;Y=
la[14];la[14]=Ta;pa=m.call(this,E,a,c);ia=la[63];la[63]=pa;Aa=a.opacity;ya=la[10];la[10]=Aa;ta=a.positionOffset;ja=la[68];la[68]=ta;ra=this.scale;Ba=la[6];la[6]=ra;Hb=this.translate;Z=la[8];la[8]=Hb;Dc=this.viewportArray;xd=la[3];la[3]=Dc;ha=this.charBuffer;Ua=!1;qc=null;yb=0;db=!1;bb=Nb=0;ob=1;Va=0;ab=5126;Ob=rc=Jb=Ib=0;J(ha)?(Ua=!0,qc=O.createStream(34962,ha),ab=qc.dtype):(qc=O.getBuffer(ha))?ab=qc.dtype:"constant"in ha?(ob=2,"number"===typeof ha.constant?(Jb=ha.constant,rc=Ob=Ib=0):(Jb=0<ha.constant.length?
ha.constant[0]:0,rc=1<ha.constant.length?ha.constant[1]:0,Ob=2<ha.constant.length?ha.constant[2]:0,Ib=3<ha.constant.length?ha.constant[3]:0)):(qc=J(ha.buffer)?O.createStream(34962,ha.buffer):O.getBuffer(ha.buffer),ab="type"in ha?Ea[ha.type]:qc.dtype,db=!!ha.normalized,bb=ha.size|0,Nb=ha.offset|0,Va=ha.stride|0,yb=ha.divisor|0);jb=u.buffer;u.buffer=qc;Gb=u.divisor;u.divisor=yb;Db=u.normalized;u.normalized=db;wb=u.offset;u.offset=Nb;hb=u.size;u.size=bb;Yb=u.state;u.state=ob;Pb=u.stride;u.stride=Va;
qb=u.type;u.type=ab;Ra=u.w;u.w=Ib;Ub=u.x;u.x=Jb;zb=u.y;u.y=rc;ic=u.z;u.z=Ob;ma.buffer=this.sizeBuffer;ib=!1;pb=null;Ha=0;rb=!1;fb=Ka=0;gb=1;La=0;kb=5126;Oa=sb=tb=Wa=0;J(ma)?(ib=!0,pb=O.createStream(34962,ma),kb=pb.dtype):(pb=O.getBuffer(ma))?kb=pb.dtype:"constant"in ma?(gb=2,"number"===typeof ma.constant?(tb=ma.constant,sb=Oa=Wa=0):(tb=0<ma.constant.length?ma.constant[0]:0,sb=1<ma.constant.length?ma.constant[1]:0,Oa=2<ma.constant.length?ma.constant[2]:0,Wa=3<ma.constant.length?ma.constant[3]:0)):
(pb=J(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),kb="type"in ma?Ea[ma.type]:pb.dtype,rb=!!ma.normalized,fb=ma.size|0,Ka=ma.offset|0,La=ma.stride|0,Ha=ma.divisor|0);tc=y.buffer;y.buffer=pb;Qa=y.divisor;y.divisor=Ha;Kb=y.normalized;y.normalized=rb;Eb=y.offset;y.offset=Ka;Ma=y.size;y.size=fb;zd=y.state;y.state=gb;Ya=y.stride;y.stride=La;Lb=y.type;y.type=kb;Mb=y.w;y.w=Wa;lb=y.x;y.x=tb;Na=y.y;y.y=sb;Zb=y.z;y.z=Oa;Pa=this.position;ub=!1;vb=null;Sa=0;nb=!1;Bc=fc=0;wc=1;cb=0;jc=5126;
Ab=Mc=Xa=qd=0;J(Pa)?(ub=!0,vb=O.createStream(34962,Pa),jc=vb.dtype):(vb=O.getBuffer(Pa))?jc=vb.dtype:"constant"in Pa?(wc=2,"number"===typeof Pa.constant?(Xa=Pa.constant,Mc=Ab=qd=0):(Xa=0<Pa.constant.length?Pa.constant[0]:0,Mc=1<Pa.constant.length?Pa.constant[1]:0,Ab=2<Pa.constant.length?Pa.constant[2]:0,qd=3<Pa.constant.length?Pa.constant[3]:0)):(vb=J(Pa.buffer)?O.createStream(34962,Pa.buffer):O.getBuffer(Pa.buffer),jc="type"in Pa?Ea[Pa.type]:vb.dtype,nb=!!Pa.normalized,Bc=Pa.size|0,fc=Pa.offset|
0,cb=Pa.stride|0,Sa=Pa.divisor|0);Za=ca.buffer;ca.buffer=vb;Vb=ca.divisor;ca.divisor=Sa;uc=ca.normalized;ca.normalized=nb;Wb=ca.offset;ca.offset=fc;Qb=ca.size;ca.size=Bc;Kc=ca.state;ca.state=wc;Rb=ca.stride;ca.stride=cb;pe=ca.type;ca.type=jc;Fc=ca.w;ca.w=qd;sd=ca.x;ca.x=Xa;Nc=ca.y;ca.y=Mc;Xc=ca.z;ca.z=Ab;V.buffer=this.sizeBuffer;td=!1;nc=null;xc=0;gc=!1;sc=eb=0;Tb=1;Xb=0;cc=5126;bd=Cc=zc=hc=0;J(V)?(td=!0,nc=O.createStream(34962,V),cc=nc.dtype):(nc=O.getBuffer(V))?cc=nc.dtype:"constant"in V?(Tb=2,
"number"===typeof V.constant?(zc=V.constant,Cc=bd=hc=0):(zc=0<V.constant.length?V.constant[0]:0,Cc=1<V.constant.length?V.constant[1]:0,bd=2<V.constant.length?V.constant[2]:0,hc=3<V.constant.length?V.constant[3]:0)):(nc=J(V.buffer)?O.createStream(34962,V.buffer):O.getBuffer(V.buffer),cc="type"in V?Ea[V.type]:nc.dtype,gc=!!V.normalized,sc=V.size|0,eb=V.offset|0,Xb=V.stride|0,xc=V.divisor|0);Qc=w.buffer;w.buffer=nc;Rc=w.divisor;w.divisor=xc;Sc=w.normalized;w.normalized=gc;Yc=w.offset;w.offset=eb;od=
w.size;w.size=sc;cd=w.state;w.state=Tb;Zc=w.stride;w.stride=Xb;kc=w.type;w.type=cc;bc=w.w;w.w=hc;$c=w.x;w.x=zc;Uc=w.y;w.y=Cc;dd=w.z;w.z=bd;Ac=P.vert;P.vert=61;hd=P.frag;P.frag=60;h.dirty=!0;d(E,a,c);E.viewportWidth=n;E.viewportHeight=r;oa[0]=b;oa[1]=I;oa[2]=p;oa[3]=t;za[0]=C;za[1]=v;za[2]=x;za[3]=na;aa.blend_enable=A;ka[0]=e;ka[1]=sa;ka[2]=Da;ka[3]=R;aa.depth_enable=F;aa.stencil_enable=D;fa&&(ba.cpuTime+=performance.now()-K);N.offset=L;N.count=Ja;N.primitive=z;la[64]=va;la[69]=Q;la[67]=wa;la[66]=
Ca;la[65]=W;la[62]=ea;la[14]=Y;la[63]=ia;la[10]=ya;la[68]=ja;la[6]=Ba;la[8]=Z;la[3]=xd;Ua&&O.destroyStream(qc);u.buffer=jb;u.divisor=Gb;u.normalized=Db;u.offset=wb;u.size=hb;u.state=Yb;u.stride=Pb;u.type=qb;u.w=Ra;u.x=Ub;u.y=zb;u.z=ic;ib&&O.destroyStream(pb);y.buffer=tc;y.divisor=Qa;y.normalized=Kb;y.offset=Eb;y.size=Ma;y.state=zd;y.stride=Ya;y.type=Lb;y.w=Mb;y.x=lb;y.y=Na;y.z=Zb;ub&&O.destroyStream(vb);ca.buffer=Za;ca.divisor=Vb;ca.normalized=uc;ca.offset=Wb;ca.size=Qb;ca.state=Kc;ca.stride=Rb;ca.type=
pe;ca.w=Fc;ca.x=sd;ca.y=Nc;ca.z=Xc;td&&O.destroyStream(nc);w.buffer=Qc;w.divisor=Rc;w.normalized=Sc;w.offset=Yc;w.size=od;w.state=cd;w.stride=Zc;w.type=kc;w.w=bc;w.x=$c;w.y=Uc;w.z=dd;P.vert=Ac;P.frag=hd;h.dirty=!0}}},$2:function(b,ba,M){var L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t;L=b.attributes;e=b.current;l=b.framebuffer;p=b.gl;c=b.next;G=b.vao;H=c.blend_color;B=e.blend_color;U=c.blend_equation;m=e.blend_equation;u=c.blend_func;y=e.blend_func;ca=c.colorMask;w=e.colorMask;T=
c.depth_range;z=e.depth_range;Q=c.polygonOffset_offset;ia=e.polygonOffset_offset;g=c.sample_coverage;v=e.sample_coverage;S=c.scissor_box;k=e.scissor_box;X=c.stencil_func;f=e.stencil_func;x=c.stencil_opBack;Y=e.stencil_opBack;D=c.stencil_opFront;F=e.stencil_opFront;d=c.viewport;t=e.viewport;return{poll:function(){var a,b,A,L,M,G,ea,R,O,E,h,N,K,Ca,ba,r,J,aa,P,la,qa,za;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;L=c.depth_enable;M=c.dither;G=c.polygonOffset_enable;ea=c.sample_alpha;R=c.sample_enable;
O=c.scissor_enable;E=c.stencil_enable;h=c.cull_face;N=e.cull_face;K=c.depth_func;Ca=e.depth_func;ba=c.depth_mask;r=e.depth_mask;J=c.frontFace;aa=e.frontFace;P=c.lineWidth;la=e.lineWidth;qa=c.stencil_mask;za=e.stencil_mask;a=l.next;a!==l.cur&&(a?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null),l.cur=a);b!==e.blend_enable&&(b?p.enable(3042):p.disable(3042),e.blend_enable=b);A!==e.cull_enable&&(A?p.enable(2884):p.disable(2884),e.cull_enable=A);L!==e.depth_enable&&(L?p.enable(2929):
p.disable(2929),e.depth_enable=L);M!==e.dither&&(M?p.enable(3024):p.disable(3024),e.dither=M);G!==e.polygonOffset_enable&&(G?p.enable(32823):p.disable(32823),e.polygonOffset_enable=G);ea!==e.sample_alpha&&(ea?p.enable(32926):p.disable(32926),e.sample_alpha=ea);R!==e.sample_enable&&(R?p.enable(32928):p.disable(32928),e.sample_enable=R);O!==e.scissor_enable&&(O?p.enable(3089):p.disable(3089),e.scissor_enable=O);E!==e.stencil_enable&&(E?p.enable(2960):p.disable(2960),e.stencil_enable=E);if(H[0]!==B[0]||
H[1]!==B[1]||H[2]!==B[2]||H[3]!==B[3])p.blendColor(H[0],H[1],H[2],H[3]),B[0]=H[0],B[1]=H[1],B[2]=H[2],B[3]=H[3];if(U[0]!==m[0]||U[1]!==m[1])p.blendEquationSeparate(U[0],U[1]),m[0]=U[0],m[1]=U[1];if(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||u[3]!==y[3])p.blendFuncSeparate(u[0],u[1],u[2],u[3]),y[0]=u[0],y[1]=u[1],y[2]=u[2],y[3]=u[3];if(ca[0]!==w[0]||ca[1]!==w[1]||ca[2]!==w[2]||ca[3]!==w[3])p.colorMask(ca[0],ca[1],ca[2],ca[3]),w[0]=ca[0],w[1]=ca[1],w[2]=ca[2],w[3]=ca[3];h!==N&&(p.cullFace(h),e.cull_face=
h);K!==Ca&&(p.depthFunc(K),e.depth_func=K);ba!==r&&(p.depthMask(ba),e.depth_mask=ba);if(T[0]!==z[0]||T[1]!==z[1])p.depthRange(T[0],T[1]),z[0]=T[0],z[1]=T[1];J!==aa&&(p.frontFace(J),e.frontFace=J);P!==la&&(p.lineWidth(P),e.lineWidth=P);if(Q[0]!==ia[0]||Q[1]!==ia[1])p.polygonOffset(Q[0],Q[1]),ia[0]=Q[0],ia[1]=Q[1];if(g[0]!==v[0]||g[1]!==v[1])p.sampleCoverage(g[0],g[1]),v[0]=g[0],v[1]=g[1];if(S[0]!==k[0]||S[1]!==k[1]||S[2]!==k[2]||S[3]!==k[3])p.scissor(S[0],S[1],S[2],S[3]),k[0]=S[0],k[1]=S[1],k[2]=S[2],
k[3]=S[3];if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2])p.stencilFunc(X[0],X[1],X[2]),f[0]=X[0],f[1]=X[1],f[2]=X[2];qa!==za&&(p.stencilMask(qa),e.stencil_mask=qa);if(x[0]!==Y[0]||x[1]!==Y[1]||x[2]!==Y[2]||x[3]!==Y[3])p.stencilOpSeparate(x[0],x[1],x[2],x[3]),Y[0]=x[0],Y[1]=x[1],Y[2]=x[2],Y[3]=x[3];if(D[0]!==F[0]||D[1]!==F[1]||D[2]!==F[2]||D[3]!==F[3])p.stencilOpSeparate(D[0],D[1],D[2],D[3]),F[0]=D[0],F[1]=D[1],F[2]=D[2],F[3]=D[3];if(d[0]!==t[0]||d[1]!==t[1]||d[2]!==t[2]||d[3]!==t[3])p.viewport(d[0],d[1],
d[2],d[3]),t[0]=d[0],t[1]=d[1],t[2]=d[2],t[3]=d[3]},refresh:function(){var a,b,A,M,ba,W,ea,R,O,E,h,N,K,Ca,ra,r;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;M=c.depth_enable;ba=c.dither;W=c.polygonOffset_enable;ea=c.sample_alpha;R=c.sample_enable;O=c.scissor_enable;E=c.stencil_enable;h=c.cull_face;N=c.depth_func;K=c.depth_mask;Ca=c.frontFace;ra=c.lineWidth;r=c.stencil_mask;(a=l.next)?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null);l.cur=a;a=L[0];a.buffer?(p.enableVertexAttribArray(0),
p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(0),p.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=L[1];a.buffer?(p.enableVertexAttribArray(1),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(1),p.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=L[2];a.buffer?(p.enableVertexAttribArray(2),p.bindBuffer(34962,a.buffer.buffer),
p.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(2),p.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=L[3];a.buffer?(p.enableVertexAttribArray(3),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(3),p.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=L[4];a.buffer?(p.enableVertexAttribArray(4),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(4,a.size,
a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(4),p.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=L[5];a.buffer?(p.enableVertexAttribArray(5),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(5),p.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=L[6];a.buffer?(p.enableVertexAttribArray(6),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):
(p.disableVertexAttribArray(6),p.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=L[7];a.buffer?(p.enableVertexAttribArray(7),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(7),p.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=L[8];a.buffer?(p.enableVertexAttribArray(8),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(8),
p.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=L[9];a.buffer?(p.enableVertexAttribArray(9),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(9),p.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=L[10];a.buffer?(p.enableVertexAttribArray(10),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(10),p.vertexAttrib4f(10,a.x,a.y,
a.z,a.w),a.buffer=null);a=L[11];a.buffer?(p.enableVertexAttribArray(11),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(11),p.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=L[12];a.buffer?(p.enableVertexAttribArray(12),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(12),p.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);
a=L[13];a.buffer?(p.enableVertexAttribArray(13),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(13),p.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=L[14];a.buffer?(p.enableVertexAttribArray(14),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(14),p.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=L[15];a.buffer?(p.enableVertexAttribArray(15),
p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(p.disableVertexAttribArray(15),p.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);G.currentVAO=null;G.setVAO(G.targetVAO);b?p.enable(3042):p.disable(3042);e.blend_enable=b;A?p.enable(2884):p.disable(2884);e.cull_enable=A;M?p.enable(2929):p.disable(2929);e.depth_enable=M;ba?p.enable(3024):p.disable(3024);e.dither=ba;W?p.enable(32823):p.disable(32823);e.polygonOffset_enable=W;ea?p.enable(32926):
p.disable(32926);e.sample_alpha=ea;R?p.enable(32928):p.disable(32928);e.sample_enable=R;O?p.enable(3089):p.disable(3089);e.scissor_enable=O;E?p.enable(2960):p.disable(2960);e.stencil_enable=E;p.blendColor(H[0],H[1],H[2],H[3]);B[0]=H[0];B[1]=H[1];B[2]=H[2];B[3]=H[3];p.blendEquationSeparate(U[0],U[1]);m[0]=U[0];m[1]=U[1];p.blendFuncSeparate(u[0],u[1],u[2],u[3]);y[0]=u[0];y[1]=u[1];y[2]=u[2];y[3]=u[3];p.colorMask(ca[0],ca[1],ca[2],ca[3]);w[0]=ca[0];w[1]=ca[1];w[2]=ca[2];w[3]=ca[3];p.cullFace(h);e.cull_face=
h;p.depthFunc(N);e.depth_func=N;p.depthMask(K);e.depth_mask=K;p.depthRange(T[0],T[1]);z[0]=T[0];z[1]=T[1];p.frontFace(Ca);e.frontFace=Ca;p.lineWidth(ra);e.lineWidth=ra;p.polygonOffset(Q[0],Q[1]);ia[0]=Q[0];ia[1]=Q[1];p.sampleCoverage(g[0],g[1]);v[0]=g[0];v[1]=g[1];p.scissor(S[0],S[1],S[2],S[3]);k[0]=S[0];k[1]=S[1];k[2]=S[2];k[3]=S[3];p.stencilFunc(X[0],X[1],X[2]);f[0]=X[0];f[1]=X[1];f[2]=X[2];p.stencilMask(r);e.stencil_mask=r;p.stencilOpSeparate(x[0],x[1],x[2],x[3]);Y[0]=x[0];Y[1]=x[1];Y[2]=x[2];
Y[3]=x[3];p.stencilOpSeparate(D[0],D[1],D[2],D[3]);F[0]=D[0];F[1]=D[1];F[2]=D[2];F[3]=D[3];p.viewport(d[0],d[1],d[2],d[3]);t[0]=d[0];t[1]=d[1];t[2]=d[2];t[3]=d[3]}}},$7:function(b,ba,M,L,e,l,p,c){var G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Z,W,ea,R;G=b.context;H=b.current;B=b.framebuffer;U=b.gl;m=b.next;u=b.shader;y=b.vao;ca=m.blend_color;w=H.blend_color;T=m.blend_equation;z=H.blend_equation;Q=m.blend_func;ia=H.blend_func;g=m.colorMask;v=H.colorMask;S=m.depth_range;k=H.depth_range;
X=m.polygonOffset_offset;f=H.polygonOffset_offset;x=m.sample_coverage;Y=H.sample_coverage;D=m.scissor_box;F=H.scissor_box;d=m.stencil_func;t=H.stencil_func;a=m.stencil_opBack;ta=H.stencil_opBack;A=m.stencil_opFront;ja=H.stencil_opFront;Z=m.viewport;W=H.viewport;ea={};R={};return{draw:function(c){var b,h,p,R,D,ra,r,J,aa,P;b=c.framebuffer;h=B.getFramebuffer(b);b&&!h&&ba.commandRaise(e,M);b=B.next;B.next=h;p=G.framebufferWidth;G.framebufferWidth=h?h.width:G.drawingBufferWidth;R=G.framebufferHeight;G.framebufferHeight=
h?h.height:G.drawingBufferHeight;h!==B.cur&&(h?U.bindFramebuffer(36160,h.framebuffer):U.bindFramebuffer(36160,null),B.cur=h);if(H.dirty){h=m.dither;h!==H.dither&&(h?U.enable(3024):U.disable(3024),H.dither=h);h=m.blend_enable;h!==H.blend_enable&&(h?U.enable(3042):U.disable(3042),H.blend_enable=h);h=ca[0];r=ca[1];D=ca[2];ra=ca[3];if(h!==w[0]||r!==w[1]||D!==w[2]||ra!==w[3])U.blendColor(h,r,D,ra),w[0]=h,w[1]=r,w[2]=D,w[3]=ra;h=T[0];r=T[1];if(h!==z[0]||r!==z[1])U.blendEquationSeparate(h,r),z[0]=h,z[1]=
r;h=Q[0];r=Q[1];D=Q[2];ra=Q[3];if(h!==ia[0]||r!==ia[1]||D!==ia[2]||ra!==ia[3])U.blendFuncSeparate(h,r,D,ra),ia[0]=h,ia[1]=r,ia[2]=D,ia[3]=ra;h=m.depth_enable;h!==H.depth_enable&&(h?U.enable(2929):U.disable(2929),H.depth_enable=h);h=m.depth_func;h!==H.depth_func&&(U.depthFunc(h),H.depth_func=h);h=S[0];r=S[1];if(h!==k[0]||r!==k[1])U.depthRange(h,r),k[0]=h,k[1]=r;h=m.depth_mask;h!==H.depth_mask&&(U.depthMask(h),H.depth_mask=h);h=g[0];r=g[1];D=g[2];ra=g[3];if(h!==v[0]||r!==v[1]||D!==v[2]||ra!==v[3])U.colorMask(h,
r,D,ra),v[0]=h,v[1]=r,v[2]=D,v[3]=ra;h=m.cull_enable;h!==H.cull_enable&&(h?U.enable(2884):U.disable(2884),H.cull_enable=h);h=m.cull_face;h!==H.cull_face&&(U.cullFace(h),H.cull_face=h);h=m.frontFace;h!==H.frontFace&&(U.frontFace(h),H.frontFace=h);h=m.lineWidth;h!==H.lineWidth&&(U.lineWidth(h),H.lineWidth=h);h=m.polygonOffset_enable;h!==H.polygonOffset_enable&&(h?U.enable(32823):U.disable(32823),H.polygonOffset_enable=h);h=X[0];r=X[1];if(h!==f[0]||r!==f[1])U.polygonOffset(h,r),f[0]=h,f[1]=r;h=m.sample_alpha;
h!==H.sample_alpha&&(h?U.enable(32926):U.disable(32926),H.sample_alpha=h);h=m.sample_enable;h!==H.sample_enable&&(h?U.enable(32928):U.disable(32928),H.sample_enable=h);h=x[0];r=x[1];if(h!==Y[0]||r!==Y[1])U.sampleCoverage(h,r),Y[0]=h,Y[1]=r;h=m.stencil_enable;h!==H.stencil_enable&&(h?U.enable(2960):U.disable(2960),H.stencil_enable=h);h=m.stencil_mask;h!==H.stencil_mask&&(U.stencilMask(h),H.stencil_mask=h);h=d[0];r=d[1];D=d[2];if(h!==t[0]||r!==t[1]||D!==t[2])U.stencilFunc(h,r,D),t[0]=h,t[1]=r,t[2]=
D;h=A[0];r=A[1];D=A[2];ra=A[3];if(h!==ja[0]||r!==ja[1]||D!==ja[2]||ra!==ja[3])U.stencilOpSeparate(h,r,D,ra),ja[0]=h,ja[1]=r,ja[2]=D,ja[3]=ra;h=a[0];r=a[1];D=a[2];ra=a[3];if(h!==ta[0]||r!==ta[1]||D!==ta[2]||ra!==ta[3])U.stencilOpSeparate(h,r,D,ra),ta[0]=h,ta[1]=r,ta[2]=D,ta[3]=ra;h=m.scissor_enable;h!==H.scissor_enable&&(h?U.enable(3089):U.disable(3089),H.scissor_enable=h)}D=G.framebufferWidth;ra=G.framebufferHeight;h=G.viewportWidth;G.viewportWidth=D;r=G.viewportHeight;G.viewportHeight=ra;U.viewport(0,
0,D,ra);W[0]=0;W[1]=0;W[2]=D;W[3]=ra;D=G.framebufferWidth;ra=G.framebufferHeight;U.scissor(0,0,D,ra);F[0]=0;F[1]=0;F[2]=D;F[3]=ra;if(D=H.profile)J=performance.now(),L.count++;ra=u.program(u.vert,u.frag,M);U.useProgram(ra.program);y.setVAO(null);aa=ra.id;(P=ea[aa])||(P=ea[aa]=l(ra));P.call(this,c);H.dirty=!0;y.setVAO(null);B.next=b;G.framebufferWidth=p;G.framebufferHeight=R;G.viewportWidth=h;G.viewportHeight=r;D&&(L.cpuTime+=performance.now()-J)},scope:function(a,d,c){var f,g,l,k,r,b,t,v,x,A,e,w,R,
F,u;f=a.framebuffer;g=B.getFramebuffer(f);f&&!g&&ba.commandRaise(p,M);f=B.next;B.next=g;l=G.framebufferWidth;G.framebufferWidth=g?g.width:G.drawingBufferWidth;k=G.framebufferHeight;G.framebufferHeight=g?g.height:G.drawingBufferHeight;r=G.framebufferWidth;b=G.framebufferHeight;g=G.viewportWidth;G.viewportWidth=r;t=G.viewportHeight;G.viewportHeight=b;v=Z[0];Z[0]=0;x=Z[1];Z[1]=0;A=Z[2];Z[2]=r;r=Z[3];Z[3]=b;e=G.framebufferWidth;w=G.framebufferHeight;b=D[0];D[0]=0;R=D[1];D[1]=0;F=D[2];D[2]=e;e=D[3];D[3]=
w;if(w=H.profile)u=performance.now(),L.count++;H.dirty=!0;d(G,a,c);B.next=f;G.framebufferWidth=l;G.framebufferHeight=k;G.viewportWidth=g;G.viewportHeight=t;Z[0]=v;Z[1]=x;Z[2]=A;Z[3]=r;D[0]=b;D[1]=R;D[2]=F;D[3]=e;w&&(L.cpuTime+=performance.now()-u);H.dirty=!0},batch:function(l,b){var h,p,e,D,F;if(H.dirty){h=m.dither;h!==H.dither&&(h?U.enable(3024):U.disable(3024),H.dither=h);h=m.blend_enable;h!==H.blend_enable&&(h?U.enable(3042):U.disable(3042),H.blend_enable=h);h=ca[0];e=ca[1];D=ca[2];F=ca[3];if(h!==
w[0]||e!==w[1]||D!==w[2]||F!==w[3])U.blendColor(h,e,D,F),w[0]=h,w[1]=e,w[2]=D,w[3]=F;h=T[0];e=T[1];if(h!==z[0]||e!==z[1])U.blendEquationSeparate(h,e),z[0]=h,z[1]=e;h=Q[0];e=Q[1];D=Q[2];F=Q[3];if(h!==ia[0]||e!==ia[1]||D!==ia[2]||F!==ia[3])U.blendFuncSeparate(h,e,D,F),ia[0]=h,ia[1]=e,ia[2]=D,ia[3]=F;h=m.depth_enable;h!==H.depth_enable&&(h?U.enable(2929):U.disable(2929),H.depth_enable=h);h=m.depth_func;h!==H.depth_func&&(U.depthFunc(h),H.depth_func=h);h=S[0];e=S[1];if(h!==k[0]||e!==k[1])U.depthRange(h,
e),k[0]=h,k[1]=e;h=m.depth_mask;h!==H.depth_mask&&(U.depthMask(h),H.depth_mask=h);h=g[0];e=g[1];D=g[2];F=g[3];if(h!==v[0]||e!==v[1]||D!==v[2]||F!==v[3])U.colorMask(h,e,D,F),v[0]=h,v[1]=e,v[2]=D,v[3]=F;h=m.cull_enable;h!==H.cull_enable&&(h?U.enable(2884):U.disable(2884),H.cull_enable=h);h=m.cull_face;h!==H.cull_face&&(U.cullFace(h),H.cull_face=h);h=m.frontFace;h!==H.frontFace&&(U.frontFace(h),H.frontFace=h);h=m.lineWidth;h!==H.lineWidth&&(U.lineWidth(h),H.lineWidth=h);h=m.polygonOffset_enable;h!==
H.polygonOffset_enable&&(h?U.enable(32823):U.disable(32823),H.polygonOffset_enable=h);h=X[0];e=X[1];if(h!==f[0]||e!==f[1])U.polygonOffset(h,e),f[0]=h,f[1]=e;h=m.sample_alpha;h!==H.sample_alpha&&(h?U.enable(32926):U.disable(32926),H.sample_alpha=h);h=m.sample_enable;h!==H.sample_enable&&(h?U.enable(32928):U.disable(32928),H.sample_enable=h);h=x[0];e=x[1];if(h!==Y[0]||e!==Y[1])U.sampleCoverage(h,e),Y[0]=h,Y[1]=e;h=m.stencil_enable;h!==H.stencil_enable&&(h?U.enable(2960):U.disable(2960),H.stencil_enable=
h);h=m.stencil_mask;h!==H.stencil_mask&&(U.stencilMask(h),H.stencil_mask=h);h=d[0];e=d[1];D=d[2];if(h!==t[0]||e!==t[1]||D!==t[2])U.stencilFunc(h,e,D),t[0]=h,t[1]=e,t[2]=D;h=A[0];e=A[1];D=A[2];F=A[3];if(h!==ja[0]||e!==ja[1]||D!==ja[2]||F!==ja[3])U.stencilOpSeparate(h,e,D,F),ja[0]=h,ja[1]=e,ja[2]=D,ja[3]=F;h=a[0];e=a[1];D=a[2];F=a[3];if(h!==ta[0]||e!==ta[1]||D!==ta[2]||F!==ta[3])U.stencilOpSeparate(h,e,D,F),ta[0]=h,ta[1]=e,ta[2]=D,ta[3]=F;h=m.scissor_enable;h!==H.scissor_enable&&(h?U.enable(3089):U.disable(3089),
H.scissor_enable=h)}if(h=H.profile)p=performance.now(),L.count+=b;e=u.program(u.vert,u.frag,M);U.useProgram(e.program);y.setVAO(null);D=e.id;(F=R[D])||(F=R[D]=c(e));F.call(this,l,b);H.dirty=!0;y.setVAO(null);h&&(L.cpuTime+=performance.now()-p)}}},$5:function(b,ba,M,L,e,l){var p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Z,W;p=b.context;c=b.current;G=b.framebuffer;H=b.gl;B=b.next;U=b.shader;m=b.vao;u=B.blend_color;y=c.blend_color;ca=B.blend_equation;w=c.blend_equation;T=B.blend_func;
z=c.blend_func;Q=B.colorMask;ia=c.colorMask;g=B.depth_range;v=c.depth_range;S=B.polygonOffset_offset;k=c.polygonOffset_offset;X=B.sample_coverage;f=c.sample_coverage;x=B.scissor_box;Y=c.scissor_box;D=B.stencil_func;F=c.stencil_func;d=B.stencil_opBack;t=c.stencil_opBack;a=B.stencil_opFront;ta=c.stencil_opFront;A=B.viewport;ja=c.viewport;Z={};W={};return{draw:function(l){var b,p,E,h,N;b=G.next;b!==G.cur&&(b?H.bindFramebuffer(36160,b.framebuffer):H.bindFramebuffer(36160,null),G.cur=b);if(c.dirty){b=
B.dither;b!==c.dither&&(b?H.enable(3024):H.disable(3024),c.dither=b);b=B.blend_enable;b!==c.blend_enable&&(b?H.enable(3042):H.disable(3042),c.blend_enable=b);b=u[0];E=u[1];h=u[2];N=u[3];if(b!==y[0]||E!==y[1]||h!==y[2]||N!==y[3])H.blendColor(b,E,h,N),y[0]=b,y[1]=E,y[2]=h,y[3]=N;b=ca[0];E=ca[1];if(b!==w[0]||E!==w[1])H.blendEquationSeparate(b,E),w[0]=b,w[1]=E;b=T[0];E=T[1];h=T[2];N=T[3];if(b!==z[0]||E!==z[1]||h!==z[2]||N!==z[3])H.blendFuncSeparate(b,E,h,N),z[0]=b,z[1]=E,z[2]=h,z[3]=N;b=B.depth_enable;
b!==c.depth_enable&&(b?H.enable(2929):H.disable(2929),c.depth_enable=b);b=B.depth_func;b!==c.depth_func&&(H.depthFunc(b),c.depth_func=b);b=g[0];E=g[1];if(b!==v[0]||E!==v[1])H.depthRange(b,E),v[0]=b,v[1]=E;b=B.depth_mask;b!==c.depth_mask&&(H.depthMask(b),c.depth_mask=b);b=Q[0];E=Q[1];h=Q[2];N=Q[3];if(b!==ia[0]||E!==ia[1]||h!==ia[2]||N!==ia[3])H.colorMask(b,E,h,N),ia[0]=b,ia[1]=E,ia[2]=h,ia[3]=N;b=B.cull_enable;b!==c.cull_enable&&(b?H.enable(2884):H.disable(2884),c.cull_enable=b);b=B.cull_face;b!==
c.cull_face&&(H.cullFace(b),c.cull_face=b);b=B.frontFace;b!==c.frontFace&&(H.frontFace(b),c.frontFace=b);b=B.lineWidth;b!==c.lineWidth&&(H.lineWidth(b),c.lineWidth=b);b=B.polygonOffset_enable;b!==c.polygonOffset_enable&&(b?H.enable(32823):H.disable(32823),c.polygonOffset_enable=b);b=S[0];E=S[1];if(b!==k[0]||E!==k[1])H.polygonOffset(b,E),k[0]=b,k[1]=E;b=B.sample_alpha;b!==c.sample_alpha&&(b?H.enable(32926):H.disable(32926),c.sample_alpha=b);b=B.sample_enable;b!==c.sample_enable&&(b?H.enable(32928):
H.disable(32928),c.sample_enable=b);b=X[0];E=X[1];if(b!==f[0]||E!==f[1])H.sampleCoverage(b,E),f[0]=b,f[1]=E;b=B.stencil_enable;b!==c.stencil_enable&&(b?H.enable(2960):H.disable(2960),c.stencil_enable=b);b=B.stencil_mask;b!==c.stencil_mask&&(H.stencilMask(b),c.stencil_mask=b);b=D[0];E=D[1];h=D[2];if(b!==F[0]||E!==F[1]||h!==F[2])H.stencilFunc(b,E,h),F[0]=b,F[1]=E,F[2]=h;b=a[0];E=a[1];h=a[2];N=a[3];if(b!==ta[0]||E!==ta[1]||h!==ta[2]||N!==ta[3])H.stencilOpSeparate(b,E,h,N),ta[0]=b,ta[1]=E,ta[2]=h,ta[3]=
N;b=d[0];E=d[1];h=d[2];N=d[3];if(b!==t[0]||E!==t[1]||h!==t[2]||N!==t[3])H.stencilOpSeparate(b,E,h,N),t[0]=b,t[1]=E,t[2]=h,t[3]=N;b=B.scissor_enable;b!==c.scissor_enable&&(b?H.enable(3089):H.disable(3089),c.scissor_enable=b);b=x[0];E=x[1];h=x[2];N=x[3];if(b!==Y[0]||E!==Y[1]||h!==Y[2]||N!==Y[3])H.scissor(b,E,h,N),Y[0]=b,Y[1]=E,Y[2]=h,Y[3]=N;b=A[0];E=A[1];h=A[2];N=A[3];if(b!==ja[0]||E!==ja[1]||h!==ja[2]||N!==ja[3])H.viewport(b,E,h,N),ja[0]=b,ja[1]=E,ja[2]=h,ja[3]=N;c.dirty=!1}if(b=c.profile)p=performance.now(),
L.count++;E=U.program(U.vert,U.frag,M);H.useProgram(E.program);m.setVAO(null);h=E.id;(N=Z[h])||(N=Z[h]=e(E));N.call(this,l);m.setVAO(null);b&&(L.cpuTime+=performance.now()-p)},scope:function(a,d,f){var g,h;if(g=c.profile)h=performance.now(),L.count++;d(p,a,f);g&&(L.cpuTime+=performance.now()-h)},batch:function(b,p){var e,E,h,N,K;e=G.next;e!==G.cur&&(e?H.bindFramebuffer(36160,e.framebuffer):H.bindFramebuffer(36160,null),G.cur=e);if(c.dirty){e=B.dither;e!==c.dither&&(e?H.enable(3024):H.disable(3024),
c.dither=e);e=B.blend_enable;e!==c.blend_enable&&(e?H.enable(3042):H.disable(3042),c.blend_enable=e);e=u[0];h=u[1];N=u[2];K=u[3];if(e!==y[0]||h!==y[1]||N!==y[2]||K!==y[3])H.blendColor(e,h,N,K),y[0]=e,y[1]=h,y[2]=N,y[3]=K;e=ca[0];h=ca[1];if(e!==w[0]||h!==w[1])H.blendEquationSeparate(e,h),w[0]=e,w[1]=h;e=T[0];h=T[1];N=T[2];K=T[3];if(e!==z[0]||h!==z[1]||N!==z[2]||K!==z[3])H.blendFuncSeparate(e,h,N,K),z[0]=e,z[1]=h,z[2]=N,z[3]=K;e=B.depth_enable;e!==c.depth_enable&&(e?H.enable(2929):H.disable(2929),c.depth_enable=
e);e=B.depth_func;e!==c.depth_func&&(H.depthFunc(e),c.depth_func=e);e=g[0];h=g[1];if(e!==v[0]||h!==v[1])H.depthRange(e,h),v[0]=e,v[1]=h;e=B.depth_mask;e!==c.depth_mask&&(H.depthMask(e),c.depth_mask=e);e=Q[0];h=Q[1];N=Q[2];K=Q[3];if(e!==ia[0]||h!==ia[1]||N!==ia[2]||K!==ia[3])H.colorMask(e,h,N,K),ia[0]=e,ia[1]=h,ia[2]=N,ia[3]=K;e=B.cull_enable;e!==c.cull_enable&&(e?H.enable(2884):H.disable(2884),c.cull_enable=e);e=B.cull_face;e!==c.cull_face&&(H.cullFace(e),c.cull_face=e);e=B.frontFace;e!==c.frontFace&&
(H.frontFace(e),c.frontFace=e);e=B.lineWidth;e!==c.lineWidth&&(H.lineWidth(e),c.lineWidth=e);e=B.polygonOffset_enable;e!==c.polygonOffset_enable&&(e?H.enable(32823):H.disable(32823),c.polygonOffset_enable=e);e=S[0];h=S[1];if(e!==k[0]||h!==k[1])H.polygonOffset(e,h),k[0]=e,k[1]=h;e=B.sample_alpha;e!==c.sample_alpha&&(e?H.enable(32926):H.disable(32926),c.sample_alpha=e);e=B.sample_enable;e!==c.sample_enable&&(e?H.enable(32928):H.disable(32928),c.sample_enable=e);e=X[0];h=X[1];if(e!==f[0]||h!==f[1])H.sampleCoverage(e,
h),f[0]=e,f[1]=h;e=B.stencil_enable;e!==c.stencil_enable&&(e?H.enable(2960):H.disable(2960),c.stencil_enable=e);e=B.stencil_mask;e!==c.stencil_mask&&(H.stencilMask(e),c.stencil_mask=e);e=D[0];h=D[1];N=D[2];if(e!==F[0]||h!==F[1]||N!==F[2])H.stencilFunc(e,h,N),F[0]=e,F[1]=h,F[2]=N;e=a[0];h=a[1];N=a[2];K=a[3];if(e!==ta[0]||h!==ta[1]||N!==ta[2]||K!==ta[3])H.stencilOpSeparate(e,h,N,K),ta[0]=e,ta[1]=h,ta[2]=N,ta[3]=K;e=d[0];h=d[1];N=d[2];K=d[3];if(e!==t[0]||h!==t[1]||N!==t[2]||K!==t[3])H.stencilOpSeparate(e,
h,N,K),t[0]=e,t[1]=h,t[2]=N,t[3]=K;e=B.scissor_enable;e!==c.scissor_enable&&(e?H.enable(3089):H.disable(3089),c.scissor_enable=e);e=x[0];h=x[1];N=x[2];K=x[3];if(e!==Y[0]||h!==Y[1]||N!==Y[2]||K!==Y[3])H.scissor(e,h,N,K),Y[0]=e,Y[1]=h,Y[2]=N,Y[3]=K;e=A[0];h=A[1];N=A[2];K=A[3];if(e!==ja[0]||h!==ja[1]||N!==ja[2]||K!==ja[3])H.viewport(e,h,N,K),ja[0]=e,ja[1]=h,ja[2]=N,ja[3]=K;c.dirty=!1}if(e=c.profile)E=performance.now(),L.count+=p;h=U.program(U.vert,U.frag,M);H.useProgram(h.program);m.setVAO(null);N=h.id;
(K=W[N])||(K=W[N]=l(h));K.call(this,b,p);m.setVAO(null);e&&(L.cpuTime+=performance.now()-E)}}},"$26,color,freq,phase,projection,time,view":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t){var a,ta,A,ja,Z,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,ha,Hb,ga;a=b.attributes;ta=b.context;A=b.current;ja=b.draw;Z=b.elements;W=b.framebuffer;ea=b.gl;R=b.isArrayLike;O=b.next;E=b.shader;h=b.uniforms;N=b.vao;K=O.blend_color;Ca=A.blend_color;
ra=O.blend_equation;r=A.blend_equation;J=O.blend_func;aa=A.blend_func;P=O.colorMask;la=A.colorMask;qa=O.depth_range;za=A.depth_range;wa=O.polygonOffset_offset;fa=A.polygonOffset_offset;Aa=O.sample_coverage;ka=A.sample_coverage;pa=O.scissor_box;ya=A.scissor_box;Ja=O.stencil_func;na=A.stencil_func;$a=O.stencil_opBack;Ta=A.stencil_opBack;q=O.stencil_opFront;n=A.stencil_opFront;C=O.viewport;va=A.viewport;Ba=new Float32Array(16);ha=new Float32Array(16);Hb=new Float32Array(16);ga=new Float32Array(16);return{draw:function(h){var f,
g,k,b;f=W.next;f!==W.cur&&(f?ea.bindFramebuffer(36160,f.framebuffer):ea.bindFramebuffer(36160,null),W.cur=f);if(A.dirty){var v;f=O.dither;f!==A.dither&&(f?ea.enable(3024):ea.disable(3024),A.dither=f);f=O.blend_enable;f!==A.blend_enable&&(f?ea.enable(3042):ea.disable(3042),A.blend_enable=f);f=K[0];k=K[1];b=K[2];v=K[3];if(f!==Ca[0]||k!==Ca[1]||b!==Ca[2]||v!==Ca[3])ea.blendColor(f,k,b,v),Ca[0]=f,Ca[1]=k,Ca[2]=b,Ca[3]=v;f=ra[0];k=ra[1];if(f!==r[0]||k!==r[1])ea.blendEquationSeparate(f,k),r[0]=f,r[1]=k;
f=J[0];k=J[1];b=J[2];v=J[3];if(f!==aa[0]||k!==aa[1]||b!==aa[2]||v!==aa[3])ea.blendFuncSeparate(f,k,b,v),aa[0]=f,aa[1]=k,aa[2]=b,aa[3]=v;f=O.depth_enable;f!==A.depth_enable&&(f?ea.enable(2929):ea.disable(2929),A.depth_enable=f);f=O.depth_func;f!==A.depth_func&&(ea.depthFunc(f),A.depth_func=f);f=qa[0];k=qa[1];if(f!==za[0]||k!==za[1])ea.depthRange(f,k),za[0]=f,za[1]=k;f=O.depth_mask;f!==A.depth_mask&&(ea.depthMask(f),A.depth_mask=f);f=P[0];k=P[1];b=P[2];v=P[3];if(f!==la[0]||k!==la[1]||b!==la[2]||v!==
la[3])ea.colorMask(f,k,b,v),la[0]=f,la[1]=k,la[2]=b,la[3]=v;f=O.cull_enable;f!==A.cull_enable&&(f?ea.enable(2884):ea.disable(2884),A.cull_enable=f);f=O.cull_face;f!==A.cull_face&&(ea.cullFace(f),A.cull_face=f);f=O.frontFace;f!==A.frontFace&&(ea.frontFace(f),A.frontFace=f);f=O.lineWidth;f!==A.lineWidth&&(ea.lineWidth(f),A.lineWidth=f);f=O.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=f);f=wa[0];k=wa[1];if(f!==fa[0]||k!==fa[1])ea.polygonOffset(f,
k),fa[0]=f,fa[1]=k;f=O.sample_alpha;f!==A.sample_alpha&&(f?ea.enable(32926):ea.disable(32926),A.sample_alpha=f);f=O.sample_enable;f!==A.sample_enable&&(f?ea.enable(32928):ea.disable(32928),A.sample_enable=f);f=Aa[0];k=Aa[1];if(f!==ka[0]||k!==ka[1])ea.sampleCoverage(f,k),ka[0]=f,ka[1]=k;f=O.stencil_enable;f!==A.stencil_enable&&(f?ea.enable(2960):ea.disable(2960),A.stencil_enable=f);f=O.stencil_mask;f!==A.stencil_mask&&(ea.stencilMask(f),A.stencil_mask=f);f=Ja[0];k=Ja[1];b=Ja[2];if(f!==na[0]||k!==na[1]||
b!==na[2])ea.stencilFunc(f,k,b),na[0]=f,na[1]=k,na[2]=b;f=q[0];k=q[1];b=q[2];v=q[3];if(f!==n[0]||k!==n[1]||b!==n[2]||v!==n[3])ea.stencilOpSeparate(f,k,b,v),n[0]=f,n[1]=k,n[2]=b,n[3]=v;f=$a[0];k=$a[1];b=$a[2];v=$a[3];if(f!==Ta[0]||k!==Ta[1]||b!==Ta[2]||v!==Ta[3])ea.stencilOpSeparate(f,k,b,v),Ta[0]=f,Ta[1]=k,Ta[2]=b,Ta[3]=v;f=O.scissor_enable;f!==A.scissor_enable&&(f?ea.enable(3089):ea.disable(3089),A.scissor_enable=f);f=pa[0];k=pa[1];b=pa[2];v=pa[3];if(f!==ya[0]||k!==ya[1]||b!==ya[2]||v!==ya[3])ea.scissor(f,
k,b,v),ya[0]=f,ya[1]=k,ya[2]=b,ya[3]=v;f=C[0];k=C[1];b=C[2];v=C[3];if(f!==va[0]||k!==va[1]||b!==va[2]||v!==va[3])ea.viewport(f,k,b,v),va[0]=f,va[1]=k,va[2]=b,va[3]=v;A.dirty=!1}if(f=A.profile)g=performance.now(),L.count++;ea.useProgram(e.program);N.setVAO(null);k=Y.location;b=a[k];b.buffer||ea.enableVertexAttribArray(k);if(5126!==b.type||4!==b.size||b.buffer!==l||!1!==b.normalized||0!==b.offset||44!==b.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(k,4,5126,!1,44,0),b.type=5126,b.size=
4,b.buffer=l,b.normalized=!1,b.offset=0,b.stride=44;k=D.location;b=a[k];b.buffer||ea.enableVertexAttribArray(k);if(5126!==b.type||4!==b.size||b.buffer!==p||!1!==b.normalized||16!==b.offset||44!==b.stride)ea.bindBuffer(34962,p.buffer),ea.vertexAttribPointer(k,4,5126,!1,44,16),b.type=5126,b.size=4,b.buffer=p,b.normalized=!1,b.offset=16,b.stride=44;k=x.location;b=a[k];b.buffer||ea.enableVertexAttribArray(k);if(5126!==b.type||3!==b.size||b.buffer!==c||!1!==b.normalized||32!==b.offset||44!==b.stride)ea.bindBuffer(34962,
c.buffer),ea.vertexAttribPointer(k,3,5126,!1,44,32),b.type=5126,b.size=3,b.buffer=c,b.normalized=!1,b.offset=32,b.stride=44;k=G.call(this,ta,h,0);"number"!==typeof k&&ba.commandRaise(H,M);ea.uniform1f(d.location,k);k=B.call(this,ta,h,0);R(k)&&16===k.length||ba.commandRaise(U,M);ea.uniformMatrix4fv(t.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ba[0]=k[0],Ba[1]=k[1],Ba[2]=k[2],Ba[3]=k[3],Ba[4]=k[4],Ba[5]=k[5],Ba[6]=k[6],Ba[7]=k[7],Ba[8]=k[8],Ba[9]=k[9],Ba[10]=k[10],Ba[11]=k[11],Ba[12]=
k[12],Ba[13]=k[13],Ba[14]=k[14],Ba[15]=k[15],Ba));h=m.call(this,ta,h,0);R(h)&&16===h.length||ba.commandRaise(u,M);ea.uniformMatrix4fv(F.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(ha[0]=h[0],ha[1]=h[1],ha[2]=h[2],ha[3]=h[3],ha[4]=h[4],ha[5]=h[5],ha[6]=h[6],ha[7]=h[7],ha[8]=h[8],ha[9]=h[9],ha[10]=h[10],ha[11]=h[11],ha[12]=h[12],ha[13]=h[13],ha[14]=h[14],ha[15]=h[15],ha));(h=ja.elements)?ea.bindBuffer(34963,h.buffer.buffer):N.currentVAO&&(h=Z.getElements(N.currentVAO.elements))&&ea.bindBuffer(34963,
h.buffer.buffer);k=ja.offset;h?ea.drawElements(0,1E4,h.type,k<<(h.type-5121>>1)):ea.drawArrays(0,k,1E4);N.setVAO(null);f&&(L.cpuTime+=performance.now()-g)},scope:function(a,d,f){var g,k,q,b,n,r,e,t,C,v,x,na,D,J,F,P,fa,ga,u,$a,Ja,m,H,M,N,aa,K,G,va,O,R,S,qa,wa,B,U,ka,W,ba,X,ea,Ca,Ta,Y,pa;if(g=A.profile)k=performance.now(),L.count++;q=ja.count;ja.count=1E4;b=ja.primitive;ja.primitive=0;n=y.call(this,ta,a,f);r=h[5];h[5]=n;e=ca.call(this,ta,a,f);n=h[3];h[3]=e;t=w.call(this,ta,a,f);e=h[4];h[4]=t;t=T.buffer;
T.buffer=c;C=T.divisor;T.divisor=0;v=T.normalized;T.normalized=!1;x=T.offset;T.offset=32;na=T.size;T.size=0;D=T.state;T.state=1;J=T.stride;T.stride=44;F=T.type;T.type=5126;P=T.w;T.w=0;fa=T.x;T.x=0;ga=T.y;T.y=0;u=T.z;T.z=0;$a=z.buffer;z.buffer=l;Ja=z.divisor;z.divisor=0;m=z.normalized;z.normalized=!1;H=z.offset;z.offset=0;M=z.size;z.size=0;N=z.state;z.state=1;aa=z.stride;z.stride=44;K=z.type;z.type=5126;G=z.w;z.w=0;va=z.x;z.x=0;O=z.y;z.y=0;R=z.z;z.z=0;S=Q.buffer;Q.buffer=p;qa=Q.divisor;Q.divisor=0;
wa=Q.normalized;Q.normalized=!1;B=Q.offset;Q.offset=16;U=Q.size;Q.size=0;ka=Q.state;Q.state=1;W=Q.stride;Q.stride=44;ba=Q.type;Q.type=5126;X=Q.w;Q.w=0;ea=Q.x;Q.x=0;Ca=Q.y;Q.y=0;Ta=Q.z;Q.z=0;Y=E.vert;E.vert=2;pa=E.frag;E.frag=1;d(ta,a,f);g&&(L.cpuTime+=performance.now()-k);ja.count=q;ja.primitive=b;h[5]=r;h[3]=n;h[4]=e;T.buffer=t;T.divisor=C;T.normalized=v;T.offset=x;T.size=na;T.state=D;T.stride=J;T.type=F;T.w=P;T.x=fa;T.y=ga;T.z=u;z.buffer=$a;z.divisor=Ja;z.normalized=m;z.offset=H;z.size=M;z.state=
N;z.stride=aa;z.type=K;z.w=G;z.x=va;z.y=O;z.z=R;Q.buffer=S;Q.divisor=qa;Q.normalized=wa;Q.offset=B;Q.size=U;Q.state=ka;Q.stride=W;Q.type=ba;Q.w=X;Q.x=ea;Q.y=Ca;Q.z=Ta;E.vert=Y;E.frag=pa},batch:function(h,b){var e,w,E;e=W.next;e!==W.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),W.cur=e);if(A.dirty){var u,m,z;e=O.dither;e!==A.dither&&(e?ea.enable(3024):ea.disable(3024),A.dither=e);e=O.blend_enable;e!==A.blend_enable&&(e?ea.enable(3042):ea.disable(3042),A.blend_enable=
e);e=K[0];u=K[1];m=K[2];z=K[3];if(e!==Ca[0]||u!==Ca[1]||m!==Ca[2]||z!==Ca[3])ea.blendColor(e,u,m,z),Ca[0]=e,Ca[1]=u,Ca[2]=m,Ca[3]=z;e=ra[0];u=ra[1];if(e!==r[0]||u!==r[1])ea.blendEquationSeparate(e,u),r[0]=e,r[1]=u;e=J[0];u=J[1];m=J[2];z=J[3];if(e!==aa[0]||u!==aa[1]||m!==aa[2]||z!==aa[3])ea.blendFuncSeparate(e,u,m,z),aa[0]=e,aa[1]=u,aa[2]=m,aa[3]=z;e=O.depth_enable;e!==A.depth_enable&&(e?ea.enable(2929):ea.disable(2929),A.depth_enable=e);e=O.depth_func;e!==A.depth_func&&(ea.depthFunc(e),A.depth_func=
e);e=qa[0];u=qa[1];if(e!==za[0]||u!==za[1])ea.depthRange(e,u),za[0]=e,za[1]=u;e=O.depth_mask;e!==A.depth_mask&&(ea.depthMask(e),A.depth_mask=e);e=P[0];u=P[1];m=P[2];z=P[3];if(e!==la[0]||u!==la[1]||m!==la[2]||z!==la[3])ea.colorMask(e,u,m,z),la[0]=e,la[1]=u,la[2]=m,la[3]=z;e=O.cull_enable;e!==A.cull_enable&&(e?ea.enable(2884):ea.disable(2884),A.cull_enable=e);e=O.cull_face;e!==A.cull_face&&(ea.cullFace(e),A.cull_face=e);e=O.frontFace;e!==A.frontFace&&(ea.frontFace(e),A.frontFace=e);e=O.lineWidth;e!==
A.lineWidth&&(ea.lineWidth(e),A.lineWidth=e);e=O.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=e);e=wa[0];u=wa[1];if(e!==fa[0]||u!==fa[1])ea.polygonOffset(e,u),fa[0]=e,fa[1]=u;e=O.sample_alpha;e!==A.sample_alpha&&(e?ea.enable(32926):ea.disable(32926),A.sample_alpha=e);e=O.sample_enable;e!==A.sample_enable&&(e?ea.enable(32928):ea.disable(32928),A.sample_enable=e);e=Aa[0];u=Aa[1];if(e!==ka[0]||u!==ka[1])ea.sampleCoverage(e,u),ka[0]=e,ka[1]=
u;e=O.stencil_enable;e!==A.stencil_enable&&(e?ea.enable(2960):ea.disable(2960),A.stencil_enable=e);e=O.stencil_mask;e!==A.stencil_mask&&(ea.stencilMask(e),A.stencil_mask=e);e=Ja[0];u=Ja[1];m=Ja[2];if(e!==na[0]||u!==na[1]||m!==na[2])ea.stencilFunc(e,u,m),na[0]=e,na[1]=u,na[2]=m;e=q[0];u=q[1];m=q[2];z=q[3];if(e!==n[0]||u!==n[1]||m!==n[2]||z!==n[3])ea.stencilOpSeparate(e,u,m,z),n[0]=e,n[1]=u,n[2]=m,n[3]=z;e=$a[0];u=$a[1];m=$a[2];z=$a[3];if(e!==Ta[0]||u!==Ta[1]||m!==Ta[2]||z!==Ta[3])ea.stencilOpSeparate(e,
u,m,z),Ta[0]=e,Ta[1]=u,Ta[2]=m,Ta[3]=z;e=O.scissor_enable;e!==A.scissor_enable&&(e?ea.enable(3089):ea.disable(3089),A.scissor_enable=e);e=pa[0];u=pa[1];m=pa[2];z=pa[3];if(e!==ya[0]||u!==ya[1]||m!==ya[2]||z!==ya[3])ea.scissor(e,u,m,z),ya[0]=e,ya[1]=u,ya[2]=m,ya[3]=z;e=C[0];u=C[1];m=C[2];z=C[3];if(e!==va[0]||u!==va[1]||m!==va[2]||z!==va[3])ea.viewport(e,u,m,z),va[0]=e,va[1]=u,va[2]=m,va[3]=z;A.dirty=!1}if(e=A.profile)w=performance.now(),L.count+=b;ea.useProgram(ia.program);N.setVAO(null);u=Y.location;
m=a[u];m.buffer||ea.enableVertexAttribArray(u);if(5126!==m.type||4!==m.size||m.buffer!==l||!1!==m.normalized||0!==m.offset||44!==m.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,0),m.type=5126,m.size=4,m.buffer=l,m.normalized=!1,m.offset=0,m.stride=44;u=D.location;m=a[u];m.buffer||ea.enableVertexAttribArray(u);if(5126!==m.type||4!==m.size||m.buffer!==p||!1!==m.normalized||16!==m.offset||44!==m.stride)ea.bindBuffer(34962,p.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,16),
m.type=5126,m.size=4,m.buffer=p,m.normalized=!1,m.offset=16,m.stride=44;u=x.location;m=a[u];m.buffer||ea.enableVertexAttribArray(u);if(5126!==m.type||3!==m.size||m.buffer!==c||!1!==m.normalized||32!==m.offset||44!==m.stride)ea.bindBuffer(34962,c.buffer),ea.vertexAttribPointer(u,3,5126,!1,44,32),m.type=5126,m.size=3,m.buffer=c,m.normalized=!1,m.offset=32,m.stride=44;u=g.call(this,ta,void 0,E);"number"!==typeof u&&ba.commandRaise(v,M);ea.uniform1f(d.location,u);u=S.call(this,ta,void 0,E);R(u)&&16===
u.length||ba.commandRaise(k,M);ea.uniformMatrix4fv(t.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(Hb[0]=u[0],Hb[1]=u[1],Hb[2]=u[2],Hb[3]=u[3],Hb[4]=u[4],Hb[5]=u[5],Hb[6]=u[6],Hb[7]=u[7],Hb[8]=u[8],Hb[9]=u[9],Hb[10]=u[10],Hb[11]=u[11],Hb[12]=u[12],Hb[13]=u[13],Hb[14]=u[14],Hb[15]=u[15],Hb));E=X.call(this,ta,void 0,E);R(E)&&16===E.length||ba.commandRaise(f,M);ea.uniformMatrix4fv(F.location,!1,Array.isArray(E)||E instanceof Float32Array?E:(ga[0]=E[0],ga[1]=E[1],ga[2]=E[2],ga[3]=E[3],ga[4]=
E[4],ga[5]=E[5],ga[6]=E[6],ga[7]=E[7],ga[8]=E[8],ga[9]=E[9],ga[10]=E[10],ga[11]=E[11],ga[12]=E[12],ga[13]=E[13],ga[14]=E[14],ga[15]=E[15],ga));(u=ja.elements)?ea.bindBuffer(34963,u.buffer.buffer):N.currentVAO&&(u=Z.getElements(N.currentVAO.elements))&&ea.bindBuffer(34963,u.buffer.buffer);m=ja.offset;for(E=0;E<b;++E)u?ea.drawElements(0,1E4,u.type,m<<(u.type-5121>>1)):ea.drawArrays(0,m,1E4);N.setVAO(null);e&&(L.cpuTime+=performance.now()-w)}}},"$34,atlas,normal,position,projection,uv,view":function(b,
ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Z,W,ea,R){var O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,ha,Hb,ga,I,sa,Da,oa,xa,Ea,ma,V,ua,Fa,Ia;O=b.attributes;E=b.buffer;h=b.context;N=b.current;K=b.draw;Ca=b.elements;ra=b.framebuffer;r=b.gl;J=b.isArrayLike;aa=b.isBufferArgs;P=b.next;la=b.shader;qa=b.uniforms;za=b.vao;wa=P.blend_color;fa=N.blend_color;Aa=P.blend_equation;ka=N.blend_equation;pa=P.blend_func;ya=N.blend_func;Ja=P.colorMask;
na=N.colorMask;$a=P.depth_range;Ta=N.depth_range;q=P.polygonOffset_offset;n=N.polygonOffset_offset;C=P.sample_coverage;va=N.sample_coverage;Ba=P.scissor_box;ha=N.scissor_box;Hb=P.stencil_func;ga=N.stencil_func;I=P.stencil_opBack;sa=N.stencil_opBack;Da=P.stencil_opFront;oa=N.stencil_opFront;xa=P.viewport;Ea=N.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V=new Float32Array(16);ua=new Float32Array(16);Fa=new Float32Array(16);Ia=new Float32Array(16);
return{draw:function(a){var d,f,g,k,b,t,v,x,w,D,F,z,K,Q,S,qa,T,X,ca,Y,ia,la,ta,Fa,Ia,ab,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb,bb,ob;d=h.view;f=e.call(this,h,a,0);h.view=f;g=ra.next;g!==ra.cur&&(g?r.bindFramebuffer(36160,g.framebuffer):r.bindFramebuffer(36160,null),ra.cur=g);if(N.dirty){var Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,
Bc,wc,cb;Va=P.dither;Va!==N.dither&&(Va?r.enable(3024):r.disable(3024),N.dither=Va);gd=P.blend_enable;gd!==N.blend_enable&&(gd?r.enable(3042):r.disable(3042),N.blend_enable=gd);Ib=wa[0];Jb=wa[1];rc=wa[2];Ob=wa[3];if(Ib!==fa[0]||Jb!==fa[1]||rc!==fa[2]||Ob!==fa[3])r.blendColor(Ib,Jb,rc,Ob),fa[0]=Ib,fa[1]=Jb,fa[2]=rc,fa[3]=Ob;jb=Aa[0];Gb=Aa[1];if(jb!==ka[0]||Gb!==ka[1])r.blendEquationSeparate(jb,Gb),ka[0]=jb,ka[1]=Gb;Db=pa[0];wb=pa[1];hb=pa[2];Yb=pa[3];if(Db!==ya[0]||wb!==ya[1]||hb!==ya[2]||Yb!==ya[3])r.blendFuncSeparate(Db,
wb,hb,Yb),ya[0]=Db,ya[1]=wb,ya[2]=hb,ya[3]=Yb;Pb=P.depth_enable;Pb!==N.depth_enable&&(Pb?r.enable(2929):r.disable(2929),N.depth_enable=Pb);qb=P.depth_func;qb!==N.depth_func&&(r.depthFunc(qb),N.depth_func=qb);Ra=$a[0];Ub=$a[1];if(Ra!==Ta[0]||Ub!==Ta[1])r.depthRange(Ra,Ub),Ta[0]=Ra,Ta[1]=Ub;zb=P.depth_mask;zb!==N.depth_mask&&(r.depthMask(zb),N.depth_mask=zb);ic=Ja[0];ib=Ja[1];pb=Ja[2];Ha=Ja[3];if(ic!==na[0]||ib!==na[1]||pb!==na[2]||Ha!==na[3])r.colorMask(ic,ib,pb,Ha),na[0]=ic,na[1]=ib,na[2]=pb,na[3]=
Ha;rb=P.frontFace;rb!==N.frontFace&&(r.frontFace(rb),N.frontFace=rb);Ka=P.lineWidth;Ka!==N.lineWidth&&(r.lineWidth(Ka),N.lineWidth=Ka);fb=P.polygonOffset_enable;fb!==N.polygonOffset_enable&&(fb?r.enable(32823):r.disable(32823),N.polygonOffset_enable=fb);gb=q[0];La=q[1];if(gb!==n[0]||La!==n[1])r.polygonOffset(gb,La),n[0]=gb,n[1]=La;kb=P.sample_alpha;kb!==N.sample_alpha&&(kb?r.enable(32926):r.disable(32926),N.sample_alpha=kb);Wa=P.sample_enable;Wa!==N.sample_enable&&(Wa?r.enable(32928):r.disable(32928),
N.sample_enable=Wa);tb=C[0];sb=C[1];if(tb!==va[0]||sb!==va[1])r.sampleCoverage(tb,sb),va[0]=tb,va[1]=sb;Oa=P.stencil_enable;Oa!==N.stencil_enable&&(Oa?r.enable(2960):r.disable(2960),N.stencil_enable=Oa);tc=P.stencil_mask;tc!==N.stencil_mask&&(r.stencilMask(tc),N.stencil_mask=tc);Qa=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Qa!==ga[0]||Kb!==ga[1]||Eb!==ga[2])r.stencilFunc(Qa,Kb,Eb),ga[0]=Qa,ga[1]=Kb,ga[2]=Eb;Ma=Da[0];zd=Da[1];Ya=Da[2];Lb=Da[3];if(Ma!==oa[0]||zd!==oa[1]||Ya!==oa[2]||Lb!==oa[3])r.stencilOpSeparate(Ma,
zd,Ya,Lb),oa[0]=Ma,oa[1]=zd,oa[2]=Ya,oa[3]=Lb;Mb=I[0];lb=I[1];Na=I[2];Zb=I[3];if(Mb!==sa[0]||lb!==sa[1]||Na!==sa[2]||Zb!==sa[3])r.stencilOpSeparate(Mb,lb,Na,Zb),sa[0]=Mb,sa[1]=lb,sa[2]=Na,sa[3]=Zb;Pa=P.scissor_enable;Pa!==N.scissor_enable&&(Pa?r.enable(3089):r.disable(3089),N.scissor_enable=Pa);ub=Ba[0];vb=Ba[1];Sa=Ba[2];nb=Ba[3];if(ub!==ha[0]||vb!==ha[1]||Sa!==ha[2]||nb!==ha[3])r.scissor(ub,vb,Sa,nb),ha[0]=ub,ha[1]=vb,ha[2]=Sa,ha[3]=nb;fc=xa[0];Bc=xa[1];wc=xa[2];cb=xa[3];if(fc!==Ea[0]||Bc!==Ea[1]||
wc!==Ea[2]||cb!==Ea[3])r.viewport(fc,Bc,wc,cb),Ea[0]=fc,Ea[1]=Bc,Ea[2]=wc,Ea[3]=cb}r.enable(2884);N.cull_enable=!0;r.cullFace(1029);N.cull_face=1029;if(k=N.profile)b=performance.now(),L.count++;r.useProgram(l.program);za.setVAO(null);(t=a.position)&&("object"===typeof t||"function"===typeof t)&&(aa(t)||E.getBuffer(t)||E.getBuffer(t.buffer)||aa(t.buffer)||"constant"in t&&("number"===typeof t.constant||J(t.constant)))||ba.commandRaise(p,M);v=!1;x=null;w=!1;F=D=0;z=1;K=0;Q=5126;X=T=qa=S=0;aa(t)?(v=!0,
x=E.createStream(34962,t),Q=x.dtype):(x=E.getBuffer(t))?Q=x.dtype:"constant"in t?(z=2,"number"===typeof t.constant?(qa=t.constant,T=X=S=0):(qa=0<t.constant.length?t.constant[0]:0,T=1<t.constant.length?t.constant[1]:0,X=2<t.constant.length?t.constant[2]:0,S=3<t.constant.length?t.constant[3]:0)):(x=aa(t.buffer)?E.createStream(34962,t.buffer):E.getBuffer(t.buffer),Q="type"in t?ma[t.type]:x.dtype,w=!!t.normalized,F=t.size|0,D=t.offset|0,K=t.stride|0);ca=Z.location;Y=O[ca];if(1===z){if(Y.buffer||r.enableVertexAttribArray(ca),
ia=F||3,Y.type!==Q||Y.size!==ia||Y.buffer!==x||Y.normalized!==w||Y.offset!==D||Y.stride!==K)r.bindBuffer(34962,x.buffer),r.vertexAttribPointer(ca,ia,Q,w,K,D),Y.type=Q,Y.size=ia,Y.buffer=x,Y.normalized=w,Y.offset=D,Y.stride=K}else if(Y.buffer&&(r.disableVertexAttribArray(ca),Y.buffer=null),Y.x!==qa||Y.y!==T||Y.z!==X||Y.w!==S)r.vertexAttrib4f(ca,qa,T,X,S),Y.x=qa,Y.y=T,Y.z=X,Y.w=S;(la=a.normal)&&("object"===typeof la||"function"===typeof la)&&(aa(la)||E.getBuffer(la)||E.getBuffer(la.buffer)||aa(la.buffer)||
"constant"in la&&("number"===typeof la.constant||J(la.constant)))||ba.commandRaise(c,M);ta=!1;Fa=null;Ia=!1;Bd=ab=0;$d=1;ld=0;ad=5126;Gc=nd=Lc=pd=0;aa(la)?(ta=!0,Fa=E.createStream(34962,la),ad=Fa.dtype):(Fa=E.getBuffer(la))?ad=Fa.dtype:"constant"in la?($d=2,"number"===typeof la.constant?(Lc=la.constant,nd=Gc=pd=0):(Lc=0<la.constant.length?la.constant[0]:0,nd=1<la.constant.length?la.constant[1]:0,Gc=2<la.constant.length?la.constant[2]:0,pd=3<la.constant.length?la.constant[3]:0)):(Fa=aa(la.buffer)?
E.createStream(34962,la.buffer):E.getBuffer(la.buffer),ad="type"in la?ma[la.type]:Fa.dtype,Ia=!!la.normalized,Bd=la.size|0,ab=la.offset|0,ld=la.stride|0);ed=ja.location;Pc=O[ed];if(1===$d){if(Pc.buffer||r.enableVertexAttribArray(ed),kd=Bd||3,Pc.type!==ad||Pc.size!==kd||Pc.buffer!==Fa||Pc.normalized!==Ia||Pc.offset!==ab||Pc.stride!==ld)r.bindBuffer(34962,Fa.buffer),r.vertexAttribPointer(ed,kd,ad,Ia,ld,ab),Pc.type=ad,Pc.size=kd,Pc.buffer=Fa,Pc.normalized=Ia,Pc.offset=ab,Pc.stride=ld}else if(Pc.buffer&&
(r.disableVertexAttribArray(ed),Pc.buffer=null),Pc.x!==Lc||Pc.y!==nd||Pc.z!==Gc||Pc.w!==pd)r.vertexAttrib4f(ed,Lc,nd,Gc,pd),Pc.x=Lc,Pc.y=nd,Pc.z=Gc,Pc.w=pd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(aa(Bb)||E.getBuffer(Bb)||E.getBuffer(Bb.buffer)||aa(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||J(Bb.constant)))||ba.commandRaise(G,M);Fb=!1;vc=null;xb=!1;Cb=yc=0;Jc=1;lc=0;Hc=5126;dc=Ec=Vc=Wc=0;aa(Bb)?(Fb=!0,vc=E.createStream(34962,Bb),Hc=vc.dtype):(vc=E.getBuffer(Bb))?
Hc=vc.dtype:"constant"in Bb?(Jc=2,"number"===typeof Bb.constant?(Vc=Bb.constant,Ec=dc=Wc=0):(Vc=0<Bb.constant.length?Bb.constant[0]:0,Ec=1<Bb.constant.length?Bb.constant[1]:0,dc=2<Bb.constant.length?Bb.constant[2]:0,Wc=3<Bb.constant.length?Bb.constant[3]:0)):(vc=aa(Bb.buffer)?E.createStream(34962,Bb.buffer):E.getBuffer(Bb.buffer),Hc="type"in Bb?ma[Bb.type]:vc.dtype,xb=!!Bb.normalized,Cb=Bb.size|0,yc=Bb.offset|0,lc=Bb.stride|0);Ic=ea.location;oc=O[Ic];if(1===Jc){if(oc.buffer||r.enableVertexAttribArray(Ic),
pc=Cb||2,oc.type!==Hc||oc.size!==pc||oc.buffer!==vc||oc.normalized!==xb||oc.offset!==yc||oc.stride!==lc)r.bindBuffer(34962,vc.buffer),r.vertexAttribPointer(Ic,pc,Hc,xb,lc,yc),oc.type=Hc,oc.size=pc,oc.buffer=vc,oc.normalized=xb,oc.offset=yc,oc.stride=lc}else if(oc.buffer&&(r.disableVertexAttribArray(Ic),oc.buffer=null),oc.x!==Vc||oc.y!==Ec||oc.z!==dc||oc.w!==Wc)r.vertexAttrib4f(Ic,Vc,Ec,dc,Wc),oc.x=Vc,oc.y=Ec,oc.z=dc,oc.w=Wc;mc=H.call(this,h,a,0);J(mc)&&16===mc.length||ba.commandRaise(B,M);r.uniformMatrix4fv(W.location,
!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(V[0]=mc[0],V[1]=mc[1],V[2]=mc[2],V[3]=mc[3],V[4]=mc[4],V[5]=mc[5],V[6]=mc[6],V[7]=mc[7],V[8]=mc[8],V[9]=mc[9],V[10]=mc[10],V[11]=mc[11],V[12]=mc[12],V[13]=mc[13],V[14]=mc[14],V[15]=mc[15],V));ec=h.view;J(ec)&&16===ec.length||ba.commandRaise(U,M);r.uniformMatrix4fv(R.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(ua[0]=ec[0],ua[1]=ec[1],ua[2]=ec[2],ua[3]=ec[3],ua[4]=ec[4],ua[5]=ec[5],ua[6]=ec[6],ua[7]=ec[7],ua[8]=ec[8],ua[9]=ec[9],
ua[10]=ec[10],ua[11]=ec[11],ua[12]=ec[12],ua[13]=ec[13],ua[14]=ec[14],ua[15]=ec[15],ua));(Ua=a.atlas)&&"framebuffer"===Ua._reglType&&(Ua=Ua.color[0]);"function"===typeof Ua&&"texture2d"===Ua._reglType||ba.commandRaise(m,M);qc=Ua._texture;r.uniform1i(A.location,qc.bind());yb=a.elements;db=null;(Nb=aa(yb))?db=Ca.createStream(yb):(db=Ca.getElements(yb),yb&&!db&&ba.commandRaise(u,M));db&&r.bindBuffer(34963,db.buffer.buffer);bb=db?db.primType:4;ob=db?db.vertCount:-1;0<=ob||ba.commandRaise(y,M);ob&&(db?
r.drawElements(bb,ob,db.type,0<<(db.type-5121>>1)):r.drawArrays(bb,0,ob),N.dirty=!0,za.setVAO(null),h.view=d,k&&(L.cpuTime+=performance.now()-b),v&&E.destroyStream(x),ta&&E.destroyStream(Fa),Fb&&E.destroyStream(vc),qc.unbind(),Nb&&Ca.destroyStream(db))},scope:function(a,d,c){var f,k,l,b,q,n,e,r,p,t,I,C,x,na,A,u,D,m,F,fa,ga,$a,Ja,H,sa,y,oa,Da,G,va,O,V,R,wa,B,U,ka,W,X,Y,ea,Ta,xa,pa,Aa,ya,ta,ja,Ea,Ba,za,Hb,ra,Z,ua,ha,Fa,Dc,Ia,xd,Va,ab,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,
gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb;f=h.view;k=ca.call(this,h,a,c);h.view=k;l=P.cull_enable;P.cull_enable=!0;b=P.cull_face;P.cull_face=1029;if(q=N.profile)n=performance.now(),L.count++;e=a.elements;r=null;(p=aa(e))?r=Ca.createStream(e):(r=Ca.getElements(e),e&&!r&&ba.commandRaise(w,M));t=K.elements;K.elements=r;I=K.offset;K.offset=0;C=r?r.vertCount:-1;x=K.count;K.count=C;na=r?r.primType:4;A=K.primitive;K.primitive=na;u=a.atlas;D=qa[5];qa[5]=u;m=T.call(this,h,a,c);F=qa[3];qa[3]=m;fa=
h.view;ga=qa[4];qa[4]=fa;($a=a.normal)&&("object"===typeof $a||"function"===typeof $a)&&(aa($a)||E.getBuffer($a)||E.getBuffer($a.buffer)||aa($a.buffer)||"constant"in $a&&("number"===typeof $a.constant||J($a.constant)))||ba.commandRaise(z,M);Ja=!1;H=null;sa=0;y=!1;Da=oa=0;G=1;va=0;O=5126;B=wa=R=V=0;aa($a)?(Ja=!0,H=E.createStream(34962,$a),O=H.dtype):(H=E.getBuffer($a))?O=H.dtype:"constant"in $a?(G=2,"number"===typeof $a.constant?(R=$a.constant,wa=B=V=0):(R=0<$a.constant.length?$a.constant[0]:0,wa=
1<$a.constant.length?$a.constant[1]:0,B=2<$a.constant.length?$a.constant[2]:0,V=3<$a.constant.length?$a.constant[3]:0)):(H=aa($a.buffer)?E.createStream(34962,$a.buffer):E.getBuffer($a.buffer),O="type"in $a?ma[$a.type]:H.dtype,y=!!$a.normalized,Da=$a.size|0,oa=$a.offset|0,va=$a.stride|0,sa=$a.divisor|0);U=Q.buffer;Q.buffer=H;ka=Q.divisor;Q.divisor=sa;W=Q.normalized;Q.normalized=y;X=Q.offset;Q.offset=oa;Y=Q.size;Q.size=Da;ea=Q.state;Q.state=G;Ta=Q.stride;Q.stride=va;xa=Q.type;Q.type=O;pa=Q.w;Q.w=V;
Aa=Q.x;Q.x=R;ya=Q.y;Q.y=wa;ta=Q.z;Q.z=B;(ja=a.position)&&("object"===typeof ja||"function"===typeof ja)&&(aa(ja)||E.getBuffer(ja)||E.getBuffer(ja.buffer)||aa(ja.buffer)||"constant"in ja&&("number"===typeof ja.constant||J(ja.constant)))||ba.commandRaise(ia,M);Ea=!1;Ba=null;za=0;Hb=!1;Z=ra=0;ua=1;ha=0;Fa=5126;Va=xd=Ia=Dc=0;aa(ja)?(Ea=!0,Ba=E.createStream(34962,ja),Fa=Ba.dtype):(Ba=E.getBuffer(ja))?Fa=Ba.dtype:"constant"in ja?(ua=2,"number"===typeof ja.constant?(Ia=ja.constant,xd=Va=Dc=0):(Ia=0<ja.constant.length?
ja.constant[0]:0,xd=1<ja.constant.length?ja.constant[1]:0,Va=2<ja.constant.length?ja.constant[2]:0,Dc=3<ja.constant.length?ja.constant[3]:0)):(Ba=aa(ja.buffer)?E.createStream(34962,ja.buffer):E.getBuffer(ja.buffer),Fa="type"in ja?ma[ja.type]:Ba.dtype,Hb=!!ja.normalized,Z=ja.size|0,ra=ja.offset|0,ha=ja.stride|0,za=ja.divisor|0);ab=g.buffer;g.buffer=Ba;Ib=g.divisor;g.divisor=za;Jb=g.normalized;g.normalized=Hb;rc=g.offset;g.offset=ra;Ob=g.size;g.size=Z;jb=g.state;g.state=ua;Gb=g.stride;g.stride=ha;Db=
g.type;g.type=Fa;wb=g.w;g.w=Dc;hb=g.x;g.x=Ia;Yb=g.y;g.y=xd;Pb=g.z;g.z=Va;(qb=a.uv)&&("object"===typeof qb||"function"===typeof qb)&&(aa(qb)||E.getBuffer(qb)||E.getBuffer(qb.buffer)||aa(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||J(qb.constant)))||ba.commandRaise(v,M);Ra=!1;Ub=null;zb=0;ic=!1;pb=ib=0;Ha=1;rb=0;Ka=5126;kb=La=gb=fb=0;aa(qb)?(Ra=!0,Ub=E.createStream(34962,qb),Ka=Ub.dtype):(Ub=E.getBuffer(qb))?Ka=Ub.dtype:"constant"in qb?(Ha=2,"number"===typeof qb.constant?(gb=qb.constant,
La=kb=fb=0):(gb=0<qb.constant.length?qb.constant[0]:0,La=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,fb=3<qb.constant.length?qb.constant[3]:0)):(Ub=aa(qb.buffer)?E.createStream(34962,qb.buffer):E.getBuffer(qb.buffer),Ka="type"in qb?ma[qb.type]:Ub.dtype,ic=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|0);Wa=S.buffer;S.buffer=Ub;tb=S.divisor;S.divisor=zb;sb=S.normalized;S.normalized=ic;Oa=S.offset;S.offset=ib;tc=S.size;S.size=pb;Qa=S.state;
S.state=Ha;Kb=S.stride;S.stride=rb;Eb=S.type;S.type=Ka;Ma=S.w;S.w=fb;zd=S.x;S.x=gb;Ya=S.y;S.y=La;Lb=S.z;S.z=kb;Mb=la.vert;la.vert=2;lb=la.frag;la.frag=1;N.dirty=!0;d(h,a,c);h.view=f;P.cull_enable=l;P.cull_face=b;q&&(L.cpuTime+=performance.now()-n);p&&Ca.destroyStream(r);K.elements=t;K.offset=I;K.count=x;K.primitive=A;qa[5]=D;qa[3]=F;qa[4]=ga;Ja&&E.destroyStream(H);Q.buffer=U;Q.divisor=ka;Q.normalized=W;Q.offset=X;Q.size=Y;Q.state=ea;Q.stride=Ta;Q.type=xa;Q.w=pa;Q.x=Aa;Q.y=ya;Q.z=ta;Ea&&E.destroyStream(Ba);
g.buffer=ab;g.divisor=Ib;g.normalized=Jb;g.offset=rc;g.size=Ob;g.state=jb;g.stride=Gb;g.type=Db;g.w=wb;g.x=hb;g.y=Yb;g.z=Pb;Ra&&E.destroyStream(Ub);S.buffer=Wa;S.divisor=tb;S.normalized=sb;S.offset=Oa;S.size=tc;S.state=Qa;S.stride=Kb;S.type=Eb;S.w=Ma;S.x=zd;S.y=Ya;S.z=Lb;la.vert=Mb;la.frag=lb;N.dirty=!0},batch:function(c,g){var l,b,e,p,v,w,u;l=h.view;b=k.call(this,h,c,0);h.view=b;e=ra.next;e!==ra.cur&&(e?r.bindFramebuffer(36160,e.framebuffer):r.bindFramebuffer(36160,null),ra.cur=e);if(N.dirty){var m,
z,H,y,K,G,V,Q,S,qa,B,T,U,ca,la,ia,ua,ab,Bd,$d,ld,ad,pd,Lc,nd,Gc,ed,Pc,kd,Bb,Fb,vc,xb,yc,Cb,Jc,lc,Hc,Wc,Vc,Ec,dc,Ic,oc,pc,mc,ec,Ua,qc,yb,db,Nb;m=P.dither;m!==N.dither&&(m?r.enable(3024):r.disable(3024),N.dither=m);z=P.blend_enable;z!==N.blend_enable&&(z?r.enable(3042):r.disable(3042),N.blend_enable=z);H=wa[0];y=wa[1];K=wa[2];G=wa[3];if(H!==fa[0]||y!==fa[1]||K!==fa[2]||G!==fa[3])r.blendColor(H,y,K,G),fa[0]=H,fa[1]=y,fa[2]=K,fa[3]=G;V=Aa[0];Q=Aa[1];if(V!==ka[0]||Q!==ka[1])r.blendEquationSeparate(V,Q),
ka[0]=V,ka[1]=Q;S=pa[0];qa=pa[1];B=pa[2];T=pa[3];if(S!==ya[0]||qa!==ya[1]||B!==ya[2]||T!==ya[3])r.blendFuncSeparate(S,qa,B,T),ya[0]=S,ya[1]=qa,ya[2]=B,ya[3]=T;U=P.depth_enable;U!==N.depth_enable&&(U?r.enable(2929):r.disable(2929),N.depth_enable=U);ca=P.depth_func;ca!==N.depth_func&&(r.depthFunc(ca),N.depth_func=ca);la=$a[0];ia=$a[1];if(la!==Ta[0]||ia!==Ta[1])r.depthRange(la,ia),Ta[0]=la,Ta[1]=ia;ua=P.depth_mask;ua!==N.depth_mask&&(r.depthMask(ua),N.depth_mask=ua);ab=Ja[0];Bd=Ja[1];$d=Ja[2];ld=Ja[3];
if(ab!==na[0]||Bd!==na[1]||$d!==na[2]||ld!==na[3])r.colorMask(ab,Bd,$d,ld),na[0]=ab,na[1]=Bd,na[2]=$d,na[3]=ld;ad=P.frontFace;ad!==N.frontFace&&(r.frontFace(ad),N.frontFace=ad);pd=P.lineWidth;pd!==N.lineWidth&&(r.lineWidth(pd),N.lineWidth=pd);Lc=P.polygonOffset_enable;Lc!==N.polygonOffset_enable&&(Lc?r.enable(32823):r.disable(32823),N.polygonOffset_enable=Lc);nd=q[0];Gc=q[1];if(nd!==n[0]||Gc!==n[1])r.polygonOffset(nd,Gc),n[0]=nd,n[1]=Gc;ed=P.sample_alpha;ed!==N.sample_alpha&&(ed?r.enable(32926):r.disable(32926),
N.sample_alpha=ed);Pc=P.sample_enable;Pc!==N.sample_enable&&(Pc?r.enable(32928):r.disable(32928),N.sample_enable=Pc);kd=C[0];Bb=C[1];if(kd!==va[0]||Bb!==va[1])r.sampleCoverage(kd,Bb),va[0]=kd,va[1]=Bb;Fb=P.stencil_enable;Fb!==N.stencil_enable&&(Fb?r.enable(2960):r.disable(2960),N.stencil_enable=Fb);vc=P.stencil_mask;vc!==N.stencil_mask&&(r.stencilMask(vc),N.stencil_mask=vc);xb=Hb[0];yc=Hb[1];Cb=Hb[2];if(xb!==ga[0]||yc!==ga[1]||Cb!==ga[2])r.stencilFunc(xb,yc,Cb),ga[0]=xb,ga[1]=yc,ga[2]=Cb;Jc=Da[0];
lc=Da[1];Hc=Da[2];Wc=Da[3];if(Jc!==oa[0]||lc!==oa[1]||Hc!==oa[2]||Wc!==oa[3])r.stencilOpSeparate(Jc,lc,Hc,Wc),oa[0]=Jc,oa[1]=lc,oa[2]=Hc,oa[3]=Wc;Vc=I[0];Ec=I[1];dc=I[2];Ic=I[3];if(Vc!==sa[0]||Ec!==sa[1]||dc!==sa[2]||Ic!==sa[3])r.stencilOpSeparate(Vc,Ec,dc,Ic),sa[0]=Vc,sa[1]=Ec,sa[2]=dc,sa[3]=Ic;oc=P.scissor_enable;oc!==N.scissor_enable&&(oc?r.enable(3089):r.disable(3089),N.scissor_enable=oc);pc=Ba[0];mc=Ba[1];ec=Ba[2];Ua=Ba[3];if(pc!==ha[0]||mc!==ha[1]||ec!==ha[2]||Ua!==ha[3])r.scissor(pc,mc,ec,
Ua),ha[0]=pc,ha[1]=mc,ha[2]=ec,ha[3]=Ua;qc=xa[0];yb=xa[1];db=xa[2];Nb=xa[3];if(qc!==Ea[0]||yb!==Ea[1]||db!==Ea[2]||Nb!==Ea[3])r.viewport(qc,yb,db,Nb),Ea[0]=qc,Ea[1]=yb,Ea[2]=db,Ea[3]=Nb}r.enable(2884);N.cull_enable=!0;r.cullFace(1029);N.cull_face=1029;if(p=N.profile)v=performance.now(),L.count+=g;r.useProgram(X.program);var bb,ob;za.setVAO(null);bb=D.call(this,h,u,w);J(bb)&&16===bb.length||ba.commandRaise(F,M);r.uniformMatrix4fv(W.location,!1,Array.isArray(bb)||bb instanceof Float32Array?bb:(Fa[0]=
bb[0],Fa[1]=bb[1],Fa[2]=bb[2],Fa[3]=bb[3],Fa[4]=bb[4],Fa[5]=bb[5],Fa[6]=bb[6],Fa[7]=bb[7],Fa[8]=bb[8],Fa[9]=bb[9],Fa[10]=bb[10],Fa[11]=bb[11],Fa[12]=bb[12],Fa[13]=bb[13],Fa[14]=bb[14],Fa[15]=bb[15],Fa));ob=h.view;J(ob)&&16===ob.length||ba.commandRaise(d,M);r.uniformMatrix4fv(R.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Ia[0]=ob[0],Ia[1]=ob[1],Ia[2]=ob[2],Ia[3]=ob[3],Ia[4]=ob[4],Ia[5]=ob[5],Ia[6]=ob[6],Ia[7]=ob[7],Ia[8]=ob[8],Ia[9]=ob[9],Ia[10]=ob[10],Ia[11]=ob[11],Ia[12]=ob[12],
Ia[13]=ob[13],Ia[14]=ob[14],Ia[15]=ob[15],Ia));for(w=0;w<g;++w){u=c[w];var Va,gd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Wa,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Bc,wc,cb,jc,qd,Xa;(Va=u.position)&&("object"===typeof Va||"function"===typeof Va)&&(aa(Va)||E.getBuffer(Va)||E.getBuffer(Va.buffer)||aa(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||J(Va.constant)))||ba.commandRaise(f,M);gd=!1;Ib=null;Jb=!1;Ob=rc=0;jb=1;Gb=0;Db=5126;
Pb=Yb=hb=wb=0;aa(Va)?(gd=!0,Ib=E.createStream(34962,Va),Db=Ib.dtype):(Ib=E.getBuffer(Va))?Db=Ib.dtype:"constant"in Va?(jb=2,"number"===typeof Va.constant?(hb=Va.constant,Yb=Pb=wb=0):(hb=0<Va.constant.length?Va.constant[0]:0,Yb=1<Va.constant.length?Va.constant[1]:0,Pb=2<Va.constant.length?Va.constant[2]:0,wb=3<Va.constant.length?Va.constant[3]:0)):(Ib=aa(Va.buffer)?E.createStream(34962,Va.buffer):E.getBuffer(Va.buffer),Db="type"in Va?ma[Va.type]:Ib.dtype,Jb=!!Va.normalized,Ob=Va.size|0,rc=Va.offset|
0,Gb=Va.stride|0);qb=Z.location;Ra=O[qb];if(1===jb){if(Ra.buffer||r.enableVertexAttribArray(qb),Ub=Ob||3,Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==Ib||Ra.normalized!==Jb||Ra.offset!==rc||Ra.stride!==Gb)r.bindBuffer(34962,Ib.buffer),r.vertexAttribPointer(qb,Ub,Db,Jb,Gb,rc),Ra.type=Db,Ra.size=Ub,Ra.buffer=Ib,Ra.normalized=Jb,Ra.offset=rc,Ra.stride=Gb}else if(Ra.buffer&&(r.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Yb||Ra.z!==Pb||Ra.w!==wb)r.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ra.x=hb,Ra.y=
Yb,Ra.z=Pb,Ra.w=wb;(zb=u.normal)&&("object"===typeof zb||"function"===typeof zb)&&(aa(zb)||E.getBuffer(zb)||E.getBuffer(zb.buffer)||aa(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||J(zb.constant)))||ba.commandRaise(x,M);ic=!1;ib=null;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Wa=kb=La=0;aa(zb)?(ic=!0,ib=E.createStream(34962,zb),gb=ib.dtype):(ib=E.getBuffer(zb))?gb=ib.dtype:"constant"in zb?(Ka=2,"number"===typeof zb.constant?(kb=zb.constant,Wa=tb=La=0):(kb=0<zb.constant.length?zb.constant[0]:
0,Wa=1<zb.constant.length?zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,La=3<zb.constant.length?zb.constant[3]:0)):(ib=aa(zb.buffer)?E.createStream(34962,zb.buffer):E.getBuffer(zb.buffer),gb="type"in zb?ma[zb.type]:ib.dtype,pb=!!zb.normalized,rb=zb.size|0,Ha=zb.offset|0,fb=zb.stride|0);sb=ja.location;Oa=O[sb];if(1===Ka){if(Oa.buffer||r.enableVertexAttribArray(sb),tc=rb||3,Oa.type!==gb||Oa.size!==tc||Oa.buffer!==ib||Oa.normalized!==pb||Oa.offset!==Ha||Oa.stride!==fb)r.bindBuffer(34962,
ib.buffer),r.vertexAttribPointer(sb,tc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=tc,Oa.buffer=ib,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb}else if(Oa.buffer&&(r.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Wa||Oa.z!==tb||Oa.w!==La)r.vertexAttrib4f(sb,kb,Wa,tb,La),Oa.x=kb,Oa.y=Wa,Oa.z=tb,Oa.w=La;(Qa=u.uv)&&("object"===typeof Qa||"function"===typeof Qa)&&(aa(Qa)||E.getBuffer(Qa)||E.getBuffer(Qa.buffer)||aa(Qa.buffer)||"constant"in Qa&&("number"===typeof Qa.constant||J(Qa.constant)))||ba.commandRaise(Y,
M);Kb=!1;Eb=null;Ma=!1;Ya=zd=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;aa(Qa)?(Kb=!0,Eb=E.createStream(34962,Qa),lb=Eb.dtype):(Eb=E.getBuffer(Qa))?lb=Eb.dtype:"constant"in Qa?(Lb=2,"number"===typeof Qa.constant?(Zb=Qa.constant,Pa=ub=Na=0):(Zb=0<Qa.constant.length?Qa.constant[0]:0,Pa=1<Qa.constant.length?Qa.constant[1]:0,ub=2<Qa.constant.length?Qa.constant[2]:0,Na=3<Qa.constant.length?Qa.constant[3]:0)):(Eb=aa(Qa.buffer)?E.createStream(34962,Qa.buffer):E.getBuffer(Qa.buffer),lb="type"in Qa?ma[Qa.type]:Eb.dtype,
Ma=!!Qa.normalized,Ya=Qa.size|0,zd=Qa.offset|0,Mb=Qa.stride|0);vb=ea.location;Sa=O[vb];if(1===Lb){if(Sa.buffer||r.enableVertexAttribArray(vb),nb=Ya||2,Sa.type!==lb||Sa.size!==nb||Sa.buffer!==Eb||Sa.normalized!==Ma||Sa.offset!==zd||Sa.stride!==Mb)r.bindBuffer(34962,Eb.buffer),r.vertexAttribPointer(vb,nb,lb,Ma,Mb,zd),Sa.type=lb,Sa.size=nb,Sa.buffer=Eb,Sa.normalized=Ma,Sa.offset=zd,Sa.stride=Mb}else if(Sa.buffer&&(r.disableVertexAttribArray(vb),Sa.buffer=null),Sa.x!==Zb||Sa.y!==Pa||Sa.z!==ub||Sa.w!==
Na)r.vertexAttrib4f(vb,Zb,Pa,ub,Na),Sa.x=Zb,Sa.y=Pa,Sa.z=ub,Sa.w=Na;(fc=u.atlas)&&"framebuffer"===fc._reglType&&(fc=fc.color[0]);"function"===typeof fc&&"texture2d"===fc._reglType||ba.commandRaise(t,M);Bc=fc._texture;r.uniform1i(A.location,Bc.bind());wc=u.elements;cb=null;(jc=aa(wc))?cb=Ca.createStream(wc):(cb=Ca.getElements(wc),wc&&!cb&&ba.commandRaise(a,M));cb&&r.bindBuffer(34963,cb.buffer.buffer);qd=cb?cb.primType:4;Xa=cb?cb.vertCount:-1;0<=Xa||ba.commandRaise(ta,M);Xa&&(cb?r.drawElements(qd,Xa,
cb.type,0<<(cb.type-5121>>1)):r.drawArrays(qd,0,Xa),gd&&E.destroyStream(Ib),ic&&E.destroyStream(ib),Kb&&E.destroyStream(Eb),Bc.unbind(),jc&&Ca.destroyStream(cb))}N.dirty=!0;za.setVAO(null);h.view=l;p&&(L.cpuTime+=performance.now()-v)}}},"$7,color,position":function(b,ba,M,L,e,l,p,c,G,H){var B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Z,W,ea,R,O,E,h,N,K;B=b.attributes;U=b.context;m=b.current;u=b.draw;y=b.elements;ca=b.framebuffer;w=b.gl;T=b.next;z=b.shader;Q=b.uniforms;ia=b.vao;g=T.blend_color;
v=m.blend_color;S=T.blend_equation;k=m.blend_equation;X=T.blend_func;f=m.blend_func;x=T.colorMask;Y=m.colorMask;D=T.depth_range;F=m.depth_range;d=T.polygonOffset_offset;t=m.polygonOffset_offset;a=T.sample_coverage;ta=m.sample_coverage;A=T.scissor_box;ja=m.scissor_box;Z=T.stencil_func;W=m.stencil_func;ea=T.stencil_opBack;R=m.stencil_opBack;O=T.stencil_opFront;E=m.stencil_opFront;h=T.viewport;N=m.viewport;K=[1,0,0,1];return{draw:function(c){var b,r,p,z;c=ca.next;c!==ca.cur&&(c?w.bindFramebuffer(36160,
c.framebuffer):w.bindFramebuffer(36160,null),ca.cur=c);if(m.dirty){c=T.dither;c!==m.dither&&(c?w.enable(3024):w.disable(3024),m.dither=c);c=T.blend_enable;c!==m.blend_enable&&(c?w.enable(3042):w.disable(3042),m.blend_enable=c);c=g[0];r=g[1];p=g[2];z=g[3];if(c!==v[0]||r!==v[1]||p!==v[2]||z!==v[3])w.blendColor(c,r,p,z),v[0]=c,v[1]=r,v[2]=p,v[3]=z;c=S[0];r=S[1];if(c!==k[0]||r!==k[1])w.blendEquationSeparate(c,r),k[0]=c,k[1]=r;c=X[0];r=X[1];p=X[2];z=X[3];if(c!==f[0]||r!==f[1]||p!==f[2]||z!==f[3])w.blendFuncSeparate(c,
r,p,z),f[0]=c,f[1]=r,f[2]=p,f[3]=z;c=T.depth_enable;c!==m.depth_enable&&(c?w.enable(2929):w.disable(2929),m.depth_enable=c);c=T.depth_func;c!==m.depth_func&&(w.depthFunc(c),m.depth_func=c);c=D[0];r=D[1];if(c!==F[0]||r!==F[1])w.depthRange(c,r),F[0]=c,F[1]=r;c=T.depth_mask;c!==m.depth_mask&&(w.depthMask(c),m.depth_mask=c);c=x[0];r=x[1];p=x[2];z=x[3];if(c!==Y[0]||r!==Y[1]||p!==Y[2]||z!==Y[3])w.colorMask(c,r,p,z),Y[0]=c,Y[1]=r,Y[2]=p,Y[3]=z;c=T.cull_enable;c!==m.cull_enable&&(c?w.enable(2884):w.disable(2884),
m.cull_enable=c);c=T.cull_face;c!==m.cull_face&&(w.cullFace(c),m.cull_face=c);c=T.frontFace;c!==m.frontFace&&(w.frontFace(c),m.frontFace=c);c=T.lineWidth;c!==m.lineWidth&&(w.lineWidth(c),m.lineWidth=c);c=T.polygonOffset_enable;c!==m.polygonOffset_enable&&(c?w.enable(32823):w.disable(32823),m.polygonOffset_enable=c);c=d[0];r=d[1];if(c!==t[0]||r!==t[1])w.polygonOffset(c,r),t[0]=c,t[1]=r;c=T.sample_alpha;c!==m.sample_alpha&&(c?w.enable(32926):w.disable(32926),m.sample_alpha=c);c=T.sample_enable;c!==
m.sample_enable&&(c?w.enable(32928):w.disable(32928),m.sample_enable=c);c=a[0];r=a[1];if(c!==ta[0]||r!==ta[1])w.sampleCoverage(c,r),ta[0]=c,ta[1]=r;c=T.stencil_enable;c!==m.stencil_enable&&(c?w.enable(2960):w.disable(2960),m.stencil_enable=c);c=T.stencil_mask;c!==m.stencil_mask&&(w.stencilMask(c),m.stencil_mask=c);c=Z[0];r=Z[1];p=Z[2];if(c!==W[0]||r!==W[1]||p!==W[2])w.stencilFunc(c,r,p),W[0]=c,W[1]=r,W[2]=p;c=O[0];r=O[1];p=O[2];z=O[3];if(c!==E[0]||r!==E[1]||p!==E[2]||z!==E[3])w.stencilOpSeparate(c,
r,p,z),E[0]=c,E[1]=r,E[2]=p,E[3]=z;c=ea[0];r=ea[1];p=ea[2];z=ea[3];if(c!==R[0]||r!==R[1]||p!==R[2]||z!==R[3])w.stencilOpSeparate(c,r,p,z),R[0]=c,R[1]=r,R[2]=p,R[3]=z;c=T.scissor_enable;c!==m.scissor_enable&&(c?w.enable(3089):w.disable(3089),m.scissor_enable=c);c=A[0];r=A[1];p=A[2];z=A[3];if(c!==ja[0]||r!==ja[1]||p!==ja[2]||z!==ja[3])w.scissor(c,r,p,z),ja[0]=c,ja[1]=r,ja[2]=p,ja[3]=z;c=h[0];r=h[1];p=h[2];z=h[3];if(c!==N[0]||r!==N[1]||p!==N[2]||z!==N[3])w.viewport(c,r,p,z),N[0]=c,N[1]=r,N[2]=p,N[3]=
z;m.dirty=!1}if(c=m.profile)b=performance.now(),L.count++;w.useProgram(e.program);ia.setVAO(null);r=H.location;p=B[r];p.buffer||w.enableVertexAttribArray(r);if(p.type!==l.dtype||2!==p.size||p.buffer!==l||!1!==p.normalized||0!==p.offset||0!==p.stride)w.bindBuffer(34962,l.buffer),w.vertexAttribPointer(r,2,l.dtype,!1,0,0),p.type=l.dtype,p.size=2,p.buffer=l,p.normalized=!1,p.offset=0,p.stride=0;w.uniform4f(G.location,1,0,0,1);(r=u.elements)?w.bindBuffer(34963,r.buffer.buffer):ia.currentVAO&&(r=y.getElements(ia.currentVAO.elements))&&
w.bindBuffer(34963,r.buffer.buffer);p=u.primitive;z=u.offset;r?w.drawElements(p,3,r.type,z<<(r.type-5121>>1)):w.drawArrays(p,z,3);ia.setVAO(null);c&&(L.cpuTime+=performance.now()-b)},scope:function(a,c,d){var f,h,g,k,b,e,t,v,x,A,w,D,F,na,E,H,q,n;if(f=m.profile)h=performance.now(),L.count++;g=u.count;u.count=3;k=Q[3];Q[3]=K;b=p.buffer;p.buffer=l;e=p.divisor;p.divisor=0;t=p.normalized;p.normalized=!1;v=p.offset;p.offset=0;x=p.size;p.size=0;A=p.state;p.state=1;w=p.stride;p.stride=0;D=p.type;p.type=l.dtype;
F=p.w;p.w=0;na=p.x;p.x=0;E=p.y;p.y=0;H=p.z;p.z=0;q=z.vert;z.vert=2;n=z.frag;z.frag=1;c(U,a,d);f&&(L.cpuTime+=performance.now()-h);u.count=g;Q[3]=k;p.buffer=b;p.divisor=e;p.normalized=t;p.offset=v;p.size=x;p.state=A;p.stride=w;p.type=D;p.w=F;p.x=na;p.y=E;p.z=H;z.vert=q;z.frag=n},batch:function(b,e){var r,p,z;r=ca.next;r!==ca.cur&&(r?w.bindFramebuffer(36160,r.framebuffer):w.bindFramebuffer(36160,null),ca.cur=r);if(m.dirty){var P,K;r=T.dither;r!==m.dither&&(r?w.enable(3024):w.disable(3024),m.dither=
r);r=T.blend_enable;r!==m.blend_enable&&(r?w.enable(3042):w.disable(3042),m.blend_enable=r);r=g[0];z=g[1];P=g[2];K=g[3];if(r!==v[0]||z!==v[1]||P!==v[2]||K!==v[3])w.blendColor(r,z,P,K),v[0]=r,v[1]=z,v[2]=P,v[3]=K;r=S[0];z=S[1];if(r!==k[0]||z!==k[1])w.blendEquationSeparate(r,z),k[0]=r,k[1]=z;r=X[0];z=X[1];P=X[2];K=X[3];if(r!==f[0]||z!==f[1]||P!==f[2]||K!==f[3])w.blendFuncSeparate(r,z,P,K),f[0]=r,f[1]=z,f[2]=P,f[3]=K;r=T.depth_enable;r!==m.depth_enable&&(r?w.enable(2929):w.disable(2929),m.depth_enable=
r);r=T.depth_func;r!==m.depth_func&&(w.depthFunc(r),m.depth_func=r);r=D[0];z=D[1];if(r!==F[0]||z!==F[1])w.depthRange(r,z),F[0]=r,F[1]=z;r=T.depth_mask;r!==m.depth_mask&&(w.depthMask(r),m.depth_mask=r);r=x[0];z=x[1];P=x[2];K=x[3];if(r!==Y[0]||z!==Y[1]||P!==Y[2]||K!==Y[3])w.colorMask(r,z,P,K),Y[0]=r,Y[1]=z,Y[2]=P,Y[3]=K;r=T.cull_enable;r!==m.cull_enable&&(r?w.enable(2884):w.disable(2884),m.cull_enable=r);r=T.cull_face;r!==m.cull_face&&(w.cullFace(r),m.cull_face=r);r=T.frontFace;r!==m.frontFace&&(w.frontFace(r),
m.frontFace=r);r=T.lineWidth;r!==m.lineWidth&&(w.lineWidth(r),m.lineWidth=r);r=T.polygonOffset_enable;r!==m.polygonOffset_enable&&(r?w.enable(32823):w.disable(32823),m.polygonOffset_enable=r);r=d[0];z=d[1];if(r!==t[0]||z!==t[1])w.polygonOffset(r,z),t[0]=r,t[1]=z;r=T.sample_alpha;r!==m.sample_alpha&&(r?w.enable(32926):w.disable(32926),m.sample_alpha=r);r=T.sample_enable;r!==m.sample_enable&&(r?w.enable(32928):w.disable(32928),m.sample_enable=r);r=a[0];z=a[1];if(r!==ta[0]||z!==ta[1])w.sampleCoverage(r,
z),ta[0]=r,ta[1]=z;r=T.stencil_enable;r!==m.stencil_enable&&(r?w.enable(2960):w.disable(2960),m.stencil_enable=r);r=T.stencil_mask;r!==m.stencil_mask&&(w.stencilMask(r),m.stencil_mask=r);r=Z[0];z=Z[1];P=Z[2];if(r!==W[0]||z!==W[1]||P!==W[2])w.stencilFunc(r,z,P),W[0]=r,W[1]=z,W[2]=P;r=O[0];z=O[1];P=O[2];K=O[3];if(r!==E[0]||z!==E[1]||P!==E[2]||K!==E[3])w.stencilOpSeparate(r,z,P,K),E[0]=r,E[1]=z,E[2]=P,E[3]=K;r=ea[0];z=ea[1];P=ea[2];K=ea[3];if(r!==R[0]||z!==R[1]||P!==R[2]||K!==R[3])w.stencilOpSeparate(r,
z,P,K),R[0]=r,R[1]=z,R[2]=P,R[3]=K;r=T.scissor_enable;r!==m.scissor_enable&&(r?w.enable(3089):w.disable(3089),m.scissor_enable=r);r=A[0];z=A[1];P=A[2];K=A[3];if(r!==ja[0]||z!==ja[1]||P!==ja[2]||K!==ja[3])w.scissor(r,z,P,K),ja[0]=r,ja[1]=z,ja[2]=P,ja[3]=K;r=h[0];z=h[1];P=h[2];K=h[3];if(r!==N[0]||z!==N[1]||P!==N[2]||K!==N[3])w.viewport(r,z,P,K),N[0]=r,N[1]=z,N[2]=P,N[3]=K;m.dirty=!1}if(r=m.profile)p=performance.now(),L.count+=e;w.useProgram(c.program);var M;ia.setVAO(null);z=H.location;P=B[z];P.buffer||
w.enableVertexAttribArray(z);if(P.type!==l.dtype||2!==P.size||P.buffer!==l||!1!==P.normalized||0!==P.offset||0!==P.stride)w.bindBuffer(34962,l.buffer),w.vertexAttribPointer(z,2,l.dtype,!1,0,0),P.type=l.dtype,P.size=2,P.buffer=l,P.normalized=!1,P.offset=0,P.stride=0;w.uniform4f(G.location,1,0,0,1);(P=u.elements)?w.bindBuffer(34963,P.buffer.buffer):ia.currentVAO&&(P=y.getElements(ia.currentVAO.elements))&&w.bindBuffer(34963,P.buffer.buffer);K=u.primitive;M=u.offset;for(z=0;z<e;++z)P?w.drawElements(K,
3,P.type,M<<(P.type-5121>>1)):w.drawArrays(K,M,3);ia.setVAO(null);r&&(L.cpuTime+=performance.now()-p)}}},"$19,angle,color,offset,position":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S){var k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Z,W,ea,R,O,E,h,N,K,ha,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa;k=b.attributes;X=b.context;f=b.current;x=b.draw;Y=b.elements;D=b.framebuffer;F=b.gl;d=b.isArrayLike;t=b.next;a=b.shader;ta=b.uniforms;A=b.vao;ja=t.blend_color;Z=f.blend_color;W=t.blend_equation;ea=f.blend_equation;
R=t.blend_func;O=f.blend_func;E=t.colorMask;h=f.colorMask;N=t.depth_range;K=f.depth_range;ha=t.polygonOffset_offset;ra=f.polygonOffset_offset;r=t.sample_coverage;J=f.sample_coverage;aa=t.scissor_box;P=f.scissor_box;la=t.stencil_func;qa=f.stencil_func;za=t.stencil_opBack;wa=f.stencil_opBack;fa=t.stencil_opFront;Aa=f.stencil_opFront;ka=t.viewport;pa=f.viewport;return{draw:function(a){var b,na,w,z;b=D.next;b!==D.cur&&(b?F.bindFramebuffer(36160,b.framebuffer):F.bindFramebuffer(36160,null),D.cur=b);if(f.dirty){var q;
b=t.dither;b!==f.dither&&(b?F.enable(3024):F.disable(3024),f.dither=b);b=t.blend_enable;b!==f.blend_enable&&(b?F.enable(3042):F.disable(3042),f.blend_enable=b);b=ja[0];w=ja[1];z=ja[2];q=ja[3];if(b!==Z[0]||w!==Z[1]||z!==Z[2]||q!==Z[3])F.blendColor(b,w,z,q),Z[0]=b,Z[1]=w,Z[2]=z,Z[3]=q;b=W[0];w=W[1];if(b!==ea[0]||w!==ea[1])F.blendEquationSeparate(b,w),ea[0]=b,ea[1]=w;b=R[0];w=R[1];z=R[2];q=R[3];if(b!==O[0]||w!==O[1]||z!==O[2]||q!==O[3])F.blendFuncSeparate(b,w,z,q),O[0]=b,O[1]=w,O[2]=z,O[3]=q;b=t.depth_func;
b!==f.depth_func&&(F.depthFunc(b),f.depth_func=b);b=N[0];w=N[1];if(b!==K[0]||w!==K[1])F.depthRange(b,w),K[0]=b,K[1]=w;b=t.depth_mask;b!==f.depth_mask&&(F.depthMask(b),f.depth_mask=b);b=E[0];w=E[1];z=E[2];q=E[3];if(b!==h[0]||w!==h[1]||z!==h[2]||q!==h[3])F.colorMask(b,w,z,q),h[0]=b,h[1]=w,h[2]=z,h[3]=q;b=t.cull_enable;b!==f.cull_enable&&(b?F.enable(2884):F.disable(2884),f.cull_enable=b);b=t.cull_face;b!==f.cull_face&&(F.cullFace(b),f.cull_face=b);b=t.frontFace;b!==f.frontFace&&(F.frontFace(b),f.frontFace=
b);b=t.lineWidth;b!==f.lineWidth&&(F.lineWidth(b),f.lineWidth=b);b=t.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?F.enable(32823):F.disable(32823),f.polygonOffset_enable=b);b=ha[0];w=ha[1];if(b!==ra[0]||w!==ra[1])F.polygonOffset(b,w),ra[0]=b,ra[1]=w;b=t.sample_alpha;b!==f.sample_alpha&&(b?F.enable(32926):F.disable(32926),f.sample_alpha=b);b=t.sample_enable;b!==f.sample_enable&&(b?F.enable(32928):F.disable(32928),f.sample_enable=b);b=r[0];w=r[1];if(b!==J[0]||w!==J[1])F.sampleCoverage(b,w),J[0]=
b,J[1]=w;b=t.stencil_enable;b!==f.stencil_enable&&(b?F.enable(2960):F.disable(2960),f.stencil_enable=b);b=t.stencil_mask;b!==f.stencil_mask&&(F.stencilMask(b),f.stencil_mask=b);b=la[0];w=la[1];z=la[2];if(b!==qa[0]||w!==qa[1]||z!==qa[2])F.stencilFunc(b,w,z),qa[0]=b,qa[1]=w,qa[2]=z;b=fa[0];w=fa[1];z=fa[2];q=fa[3];if(b!==Aa[0]||w!==Aa[1]||z!==Aa[2]||q!==Aa[3])F.stencilOpSeparate(b,w,z,q),Aa[0]=b,Aa[1]=w,Aa[2]=z,Aa[3]=q;b=za[0];w=za[1];z=za[2];q=za[3];if(b!==wa[0]||w!==wa[1]||z!==wa[2]||q!==wa[3])F.stencilOpSeparate(b,
w,z,q),wa[0]=b,wa[1]=w,wa[2]=z,wa[3]=q;b=t.scissor_enable;b!==f.scissor_enable&&(b?F.enable(3089):F.disable(3089),f.scissor_enable=b);b=aa[0];w=aa[1];z=aa[2];q=aa[3];if(b!==P[0]||w!==P[1]||z!==P[2]||q!==P[3])F.scissor(b,w,z,q),P[0]=b,P[1]=w,P[2]=z,P[3]=q;b=ka[0];w=ka[1];z=ka[2];q=ka[3];if(b!==pa[0]||w!==pa[1]||z!==pa[2]||q!==pa[3])F.viewport(b,w,z,q),pa[0]=b,pa[1]=w,pa[2]=z,pa[3]=q}F.disable(2929);f.depth_enable=!1;if(b=f.profile)na=performance.now(),L.count++;F.useProgram(e.program);A.setVAO(null);
w=S.location;z=k[w];z.buffer||F.enableVertexAttribArray(w);if(z.type!==l.dtype||2!==z.size||z.buffer!==l||!1!==z.normalized||0!==z.offset||0!==z.stride)F.bindBuffer(34962,l.buffer),F.vertexAttribPointer(w,2,l.dtype,!1,0,0),z.type=l.dtype,z.size=2,z.buffer=l,z.normalized=!1,z.offset=0,z.stride=0;w=p.call(this,X,a,0);"number"!==typeof w&&ba.commandRaise(c,M);F.uniform1f(ia.location,w);w=a.offset;d(w)&&2===w.length||ba.commandRaise(G,M);F.uniform2f(v.location,w[0],w[1]);a=H.call(this,X,a,0);d(a)&&4===
a.length||ba.commandRaise(B,M);F.uniform4f(g.location,a[0],a[1],a[2],a[3]);(a=x.elements)?F.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=Y.getElements(A.currentVAO.elements))&&F.bindBuffer(34963,a.buffer.buffer);w=x.primitive;z=x.offset;a?F.drawElements(w,3,a.type,z<<(a.type-5121>>1)):F.drawArrays(w,z,3);f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-na)},scope:function(c,d,h){var g,b,k,n,e,r,p,v,w,z,I,A,D,F,E,P,J,fa,K,H,y;g=t.depth_enable;t.depth_enable=!1;if(b=f.profile)k=performance.now(),
L.count++;n=x.count;x.count=3;e=U.call(this,X,c,h);r=ta[3];ta[3]=e;p=m.call(this,X,c,h);e=ta[5];ta[5]=p;v=c.offset;p=ta[4];ta[4]=v;v=u.buffer;u.buffer=l;w=u.divisor;u.divisor=0;z=u.normalized;u.normalized=!1;I=u.offset;u.offset=0;A=u.size;u.size=0;D=u.state;u.state=1;F=u.stride;u.stride=0;E=u.type;u.type=l.dtype;P=u.w;u.w=0;J=u.x;u.x=0;fa=u.y;u.y=0;K=u.z;u.z=0;H=a.vert;a.vert=2;y=a.frag;a.frag=1;f.dirty=!0;d(X,c,h);t.depth_enable=g;b&&(L.cpuTime+=performance.now()-k);x.count=n;ta[3]=r;ta[5]=e;ta[4]=
p;u.buffer=v;u.divisor=w;u.normalized=z;u.offset=I;u.size=A;u.state=D;u.stride=F;u.type=E;u.w=P;u.x=J;u.y=fa;u.z=K;a.vert=H;a.frag=y;f.dirty=!0},batch:function(a,c){var b,e,p,q;b=D.next;b!==D.cur&&(b?F.bindFramebuffer(36160,b.framebuffer):F.bindFramebuffer(36160,null),D.cur=b);if(f.dirty){var n,C,u;b=t.dither;b!==f.dither&&(b?F.enable(3024):F.disable(3024),f.dither=b);b=t.blend_enable;b!==f.blend_enable&&(b?F.enable(3042):F.disable(3042),f.blend_enable=b);b=ja[0];n=ja[1];C=ja[2];u=ja[3];if(b!==Z[0]||
n!==Z[1]||C!==Z[2]||u!==Z[3])F.blendColor(b,n,C,u),Z[0]=b,Z[1]=n,Z[2]=C,Z[3]=u;b=W[0];n=W[1];if(b!==ea[0]||n!==ea[1])F.blendEquationSeparate(b,n),ea[0]=b,ea[1]=n;b=R[0];n=R[1];C=R[2];u=R[3];if(b!==O[0]||n!==O[1]||C!==O[2]||u!==O[3])F.blendFuncSeparate(b,n,C,u),O[0]=b,O[1]=n,O[2]=C,O[3]=u;b=t.depth_func;b!==f.depth_func&&(F.depthFunc(b),f.depth_func=b);b=N[0];n=N[1];if(b!==K[0]||n!==K[1])F.depthRange(b,n),K[0]=b,K[1]=n;b=t.depth_mask;b!==f.depth_mask&&(F.depthMask(b),f.depth_mask=b);b=E[0];n=E[1];
C=E[2];u=E[3];if(b!==h[0]||n!==h[1]||C!==h[2]||u!==h[3])F.colorMask(b,n,C,u),h[0]=b,h[1]=n,h[2]=C,h[3]=u;b=t.cull_enable;b!==f.cull_enable&&(b?F.enable(2884):F.disable(2884),f.cull_enable=b);b=t.cull_face;b!==f.cull_face&&(F.cullFace(b),f.cull_face=b);b=t.frontFace;b!==f.frontFace&&(F.frontFace(b),f.frontFace=b);b=t.lineWidth;b!==f.lineWidth&&(F.lineWidth(b),f.lineWidth=b);b=t.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?F.enable(32823):F.disable(32823),f.polygonOffset_enable=b);b=ha[0];n=
ha[1];if(b!==ra[0]||n!==ra[1])F.polygonOffset(b,n),ra[0]=b,ra[1]=n;b=t.sample_alpha;b!==f.sample_alpha&&(b?F.enable(32926):F.disable(32926),f.sample_alpha=b);b=t.sample_enable;b!==f.sample_enable&&(b?F.enable(32928):F.disable(32928),f.sample_enable=b);b=r[0];n=r[1];if(b!==J[0]||n!==J[1])F.sampleCoverage(b,n),J[0]=b,J[1]=n;b=t.stencil_enable;b!==f.stencil_enable&&(b?F.enable(2960):F.disable(2960),f.stencil_enable=b);b=t.stencil_mask;b!==f.stencil_mask&&(F.stencilMask(b),f.stencil_mask=b);b=la[0];n=
la[1];C=la[2];if(b!==qa[0]||n!==qa[1]||C!==qa[2])F.stencilFunc(b,n,C),qa[0]=b,qa[1]=n,qa[2]=C;b=fa[0];n=fa[1];C=fa[2];u=fa[3];if(b!==Aa[0]||n!==Aa[1]||C!==Aa[2]||u!==Aa[3])F.stencilOpSeparate(b,n,C,u),Aa[0]=b,Aa[1]=n,Aa[2]=C,Aa[3]=u;b=za[0];n=za[1];C=za[2];u=za[3];if(b!==wa[0]||n!==wa[1]||C!==wa[2]||u!==wa[3])F.stencilOpSeparate(b,n,C,u),wa[0]=b,wa[1]=n,wa[2]=C,wa[3]=u;b=t.scissor_enable;b!==f.scissor_enable&&(b?F.enable(3089):F.disable(3089),f.scissor_enable=b);b=aa[0];n=aa[1];C=aa[2];u=aa[3];if(b!==
P[0]||n!==P[1]||C!==P[2]||u!==P[3])F.scissor(b,n,C,u),P[0]=b,P[1]=n,P[2]=C,P[3]=u;b=ka[0];n=ka[1];C=ka[2];u=ka[3];if(b!==pa[0]||n!==pa[1]||C!==pa[2]||u!==pa[3])F.viewport(b,n,C,u),pa[0]=b,pa[1]=n,pa[2]=C,pa[3]=u}F.disable(2929);f.depth_enable=!1;if(b=f.profile)e=performance.now(),L.count+=c;F.useProgram(y.program);A.setVAO(null);n=S.location;C=k[n];C.buffer||F.enableVertexAttribArray(n);if(C.type!==l.dtype||2!==C.size||C.buffer!==l||!1!==C.normalized||0!==C.offset||0!==C.stride)F.bindBuffer(34962,
l.buffer),F.vertexAttribPointer(n,2,l.dtype,!1,0,0),C.type=l.dtype,C.size=2,C.buffer=l,C.normalized=!1,C.offset=0,C.stride=0;p=ca.call(this,X,q,p);"number"!==typeof p&&ba.commandRaise(w,M);F.uniform1f(ia.location,p);(n=x.elements)?F.bindBuffer(34963,n.buffer.buffer):A.currentVAO&&(n=Y.getElements(A.currentVAO.elements))&&F.bindBuffer(34963,n.buffer.buffer);C=x.primitive;u=x.offset;for(p=0;p<c;++p){q=a[p];var m,H,G,ga,I,sa,Da,oa,B;m=q.offset;d(m)&&2===m.length||ba.commandRaise(T,M);H=m[0];m=m[1];p&&
G===H&&ga===m||(G=H,ga=m,F.uniform2f(v.location,H,m));I=z.call(this,X,q,p);d(I)&&4===I.length||ba.commandRaise(Q,M);q=I[0];H=I[1];m=I[2];I=I[3];p&&sa===q&&Da===H&&oa===m&&B===I||(sa=q,Da=H,oa=m,B=I,F.uniform4f(g.location,q,H,m,I));n?F.drawElements(C,3,n.type,u<<(n.type-5121>>1)):F.drawArrays(C,u,3)}f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-e)}}},"$23,model,position,projection,view":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x){var Y,D,F,d,t,a,ta,A,ja,Z,W,ea,
R,O,E,h,N,K,ha,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba;Y=b.attributes;D=b.context;F=b.current;d=b.draw;t=b.framebuffer;a=b.gl;ta=b.isArrayLike;A=b.next;ja=b.shader;Z=b.uniforms;W=b.vao;ea=A.blend_color;R=F.blend_color;O=A.blend_equation;E=F.blend_equation;h=A.blend_func;N=F.blend_func;K=A.colorMask;ha=F.colorMask;ra=A.depth_range;r=F.depth_range;J=A.polygonOffset_offset;aa=F.polygonOffset_offset;P=A.sample_coverage;la=F.sample_coverage;qa=A.scissor_box;za=F.scissor_box;wa=A.stencil_func;
fa=F.stencil_func;Aa=A.stencil_opBack;ka=F.stencil_opBack;pa=A.stencil_opFront;ya=F.stencil_opFront;Ja=A.viewport;na=F.viewport;$a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);q=new Float32Array(16);n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];C=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);Ba=new Float32Array(16);return{draw:function(d){var g,b,n,C;g=t.next;g!==t.cur&&(g?a.bindFramebuffer(36160,g.framebuffer):a.bindFramebuffer(36160,null),t.cur=
g);if(F.dirty){var v;g=A.dither;g!==F.dither&&(g?a.enable(3024):a.disable(3024),F.dither=g);g=A.blend_enable;g!==F.blend_enable&&(g?a.enable(3042):a.disable(3042),F.blend_enable=g);g=ea[0];n=ea[1];C=ea[2];v=ea[3];if(g!==R[0]||n!==R[1]||C!==R[2]||v!==R[3])a.blendColor(g,n,C,v),R[0]=g,R[1]=n,R[2]=C,R[3]=v;g=O[0];n=O[1];if(g!==E[0]||n!==E[1])a.blendEquationSeparate(g,n),E[0]=g,E[1]=n;g=h[0];n=h[1];C=h[2];v=h[3];if(g!==N[0]||n!==N[1]||C!==N[2]||v!==N[3])a.blendFuncSeparate(g,n,C,v),N[0]=g,N[1]=n,N[2]=
C,N[3]=v;g=A.depth_enable;g!==F.depth_enable&&(g?a.enable(2929):a.disable(2929),F.depth_enable=g);g=A.depth_func;g!==F.depth_func&&(a.depthFunc(g),F.depth_func=g);g=ra[0];n=ra[1];if(g!==r[0]||n!==r[1])a.depthRange(g,n),r[0]=g,r[1]=n;g=A.depth_mask;g!==F.depth_mask&&(a.depthMask(g),F.depth_mask=g);g=K[0];n=K[1];C=K[2];v=K[3];if(g!==ha[0]||n!==ha[1]||C!==ha[2]||v!==ha[3])a.colorMask(g,n,C,v),ha[0]=g,ha[1]=n,ha[2]=C,ha[3]=v;g=A.cull_enable;g!==F.cull_enable&&(g?a.enable(2884):a.disable(2884),F.cull_enable=
g);g=A.cull_face;g!==F.cull_face&&(a.cullFace(g),F.cull_face=g);g=A.frontFace;g!==F.frontFace&&(a.frontFace(g),F.frontFace=g);g=A.lineWidth;g!==F.lineWidth&&(a.lineWidth(g),F.lineWidth=g);g=A.polygonOffset_enable;g!==F.polygonOffset_enable&&(g?a.enable(32823):a.disable(32823),F.polygonOffset_enable=g);g=J[0];n=J[1];if(g!==aa[0]||n!==aa[1])a.polygonOffset(g,n),aa[0]=g,aa[1]=n;g=A.sample_alpha;g!==F.sample_alpha&&(g?a.enable(32926):a.disable(32926),F.sample_alpha=g);g=A.sample_enable;g!==F.sample_enable&&
(g?a.enable(32928):a.disable(32928),F.sample_enable=g);g=P[0];n=P[1];if(g!==la[0]||n!==la[1])a.sampleCoverage(g,n),la[0]=g,la[1]=n;g=A.stencil_enable;g!==F.stencil_enable&&(g?a.enable(2960):a.disable(2960),F.stencil_enable=g);g=A.stencil_mask;g!==F.stencil_mask&&(a.stencilMask(g),F.stencil_mask=g);g=wa[0];n=wa[1];C=wa[2];if(g!==fa[0]||n!==fa[1]||C!==fa[2])a.stencilFunc(g,n,C),fa[0]=g,fa[1]=n,fa[2]=C;g=pa[0];n=pa[1];C=pa[2];v=pa[3];if(g!==ya[0]||n!==ya[1]||C!==ya[2]||v!==ya[3])a.stencilOpSeparate(g,
n,C,v),ya[0]=g,ya[1]=n,ya[2]=C,ya[3]=v;g=Aa[0];n=Aa[1];C=Aa[2];v=Aa[3];if(g!==ka[0]||n!==ka[1]||C!==ka[2]||v!==ka[3])a.stencilOpSeparate(g,n,C,v),ka[0]=g,ka[1]=n,ka[2]=C,ka[3]=v;g=A.scissor_enable;g!==F.scissor_enable&&(g?a.enable(3089):a.disable(3089),F.scissor_enable=g);g=qa[0];n=qa[1];C=qa[2];v=qa[3];if(g!==za[0]||n!==za[1]||C!==za[2]||v!==za[3])a.scissor(g,n,C,v),za[0]=g,za[1]=n,za[2]=C,za[3]=v;g=Ja[0];n=Ja[1];C=Ja[2];v=Ja[3];if(g!==na[0]||n!==na[1]||C!==na[2]||v!==na[3])a.viewport(g,n,C,v),na[0]=
g,na[1]=n,na[2]=C,na[3]=v;F.dirty=!1}if(g=F.profile)b=performance.now(),L.count++;a.useProgram(e.program);W.setVAO(null);n=X.location;C=Y[n];C.buffer||a.enableVertexAttribArray(n);if(C.type!==l.dtype||3!==C.size||C.buffer!==l||!1!==C.normalized||0!==C.offset||0!==C.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(n,3,l.dtype,!1,0,0),C.type=l.dtype,C.size=3,C.buffer=l,C.normalized=!1,C.offset=0,C.stride=0;a.uniformMatrix4fv(k.location,!1,$a);n=p.call(this,D,d,0);ta(n)&&16===n.length||ba.commandRaise(c,
M);a.uniformMatrix4fv(x.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ta[0]=n[0],Ta[1]=n[1],Ta[2]=n[2],Ta[3]=n[3],Ta[4]=n[4],Ta[5]=n[5],Ta[6]=n[6],Ta[7]=n[7],Ta[8]=n[8],Ta[9]=n[9],Ta[10]=n[10],Ta[11]=n[11],Ta[12]=n[12],Ta[13]=n[13],Ta[14]=n[14],Ta[15]=n[15],Ta));d=G.call(this,D,d,0);ta(d)&&16===d.length||ba.commandRaise(H,M);a.uniformMatrix4fv(f.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(q[0]=d[0],q[1]=d[1],q[2]=d[2],q[3]=d[3],q[4]=d[4],q[5]=d[5],q[6]=d[6],q[7]=d[7],q[8]=
d[8],q[9]=d[9],q[10]=d[10],q[11]=d[11],q[12]=d[12],q[13]=d[13],q[14]=d[14],q[15]=d[15],q));B&&a.bindBuffer(34963,B.buffer.buffer);d=B.primType;n=B.vertCount-0;0<=n||ba.commandRaise(U,M);n&&(a.drawElements(d,n,B.type,0<<(B.type-5121>>1)),W.setVAO(null),g&&(L.cpuTime+=performance.now()-b))},scope:function(a,c,f){var g,h,b,k,q,e,r,p,t,C,v,x,z,A,E,P,na,J,fa,H,K,$a,G;if(g=F.profile)h=performance.now(),L.count++;b=d.elements;d.elements=m;k=d.offset;d.offset=0;q=m.vertCount-0;0<=q||ba.commandRaise(u,M);
e=d.count;d.count=q;r=m.primType;q=d.primitive;d.primitive=r;r=Z[3];Z[3]=n;p=y.call(this,D,a,f);t=Z[5];Z[5]=p;C=ca.call(this,D,a,f);p=Z[4];Z[4]=C;C=w.buffer;w.buffer=l;v=w.divisor;w.divisor=0;x=w.normalized;w.normalized=!1;z=w.offset;w.offset=0;A=w.size;w.size=0;E=w.state;w.state=1;P=w.stride;w.stride=0;na=w.type;w.type=l.dtype;J=w.w;w.w=0;fa=w.x;w.x=0;H=w.y;w.y=0;K=w.z;w.z=0;$a=ja.vert;ja.vert=2;G=ja.frag;ja.frag=1;c(D,a,f);g&&(L.cpuTime+=performance.now()-h);d.elements=b;d.offset=k;d.count=e;d.primitive=
q;Z[3]=r;Z[5]=t;Z[4]=p;w.buffer=C;w.divisor=v;w.normalized=x;w.offset=z;w.size=A;w.state=E;w.stride=P;w.type=na;w.w=J;w.x=fa;w.y=H;w.z=K;ja.vert=$a;ja.frag=G},batch:function(d,c){var b,q,n;b=t.next;b!==t.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),t.cur=b);if(F.dirty){var e,p,w;b=A.dither;b!==F.dither&&(b?a.enable(3024):a.disable(3024),F.dither=b);b=A.blend_enable;b!==F.blend_enable&&(b?a.enable(3042):a.disable(3042),F.blend_enable=b);b=ea[0];e=ea[1];p=ea[2];w=ea[3];
if(b!==R[0]||e!==R[1]||p!==R[2]||w!==R[3])a.blendColor(b,e,p,w),R[0]=b,R[1]=e,R[2]=p,R[3]=w;b=O[0];e=O[1];if(b!==E[0]||e!==E[1])a.blendEquationSeparate(b,e),E[0]=b,E[1]=e;b=h[0];e=h[1];p=h[2];w=h[3];if(b!==N[0]||e!==N[1]||p!==N[2]||w!==N[3])a.blendFuncSeparate(b,e,p,w),N[0]=b,N[1]=e,N[2]=p,N[3]=w;b=A.depth_enable;b!==F.depth_enable&&(b?a.enable(2929):a.disable(2929),F.depth_enable=b);b=A.depth_func;b!==F.depth_func&&(a.depthFunc(b),F.depth_func=b);b=ra[0];e=ra[1];if(b!==r[0]||e!==r[1])a.depthRange(b,
e),r[0]=b,r[1]=e;b=A.depth_mask;b!==F.depth_mask&&(a.depthMask(b),F.depth_mask=b);b=K[0];e=K[1];p=K[2];w=K[3];if(b!==ha[0]||e!==ha[1]||p!==ha[2]||w!==ha[3])a.colorMask(b,e,p,w),ha[0]=b,ha[1]=e,ha[2]=p,ha[3]=w;b=A.cull_enable;b!==F.cull_enable&&(b?a.enable(2884):a.disable(2884),F.cull_enable=b);b=A.cull_face;b!==F.cull_face&&(a.cullFace(b),F.cull_face=b);b=A.frontFace;b!==F.frontFace&&(a.frontFace(b),F.frontFace=b);b=A.lineWidth;b!==F.lineWidth&&(a.lineWidth(b),F.lineWidth=b);b=A.polygonOffset_enable;
b!==F.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),F.polygonOffset_enable=b);b=J[0];e=J[1];if(b!==aa[0]||e!==aa[1])a.polygonOffset(b,e),aa[0]=b,aa[1]=e;b=A.sample_alpha;b!==F.sample_alpha&&(b?a.enable(32926):a.disable(32926),F.sample_alpha=b);b=A.sample_enable;b!==F.sample_enable&&(b?a.enable(32928):a.disable(32928),F.sample_enable=b);b=P[0];e=P[1];if(b!==la[0]||e!==la[1])a.sampleCoverage(b,e),la[0]=b,la[1]=e;b=A.stencil_enable;b!==F.stencil_enable&&(b?a.enable(2960):a.disable(2960),
F.stencil_enable=b);b=A.stencil_mask;b!==F.stencil_mask&&(a.stencilMask(b),F.stencil_mask=b);b=wa[0];e=wa[1];p=wa[2];if(b!==fa[0]||e!==fa[1]||p!==fa[2])a.stencilFunc(b,e,p),fa[0]=b,fa[1]=e,fa[2]=p;b=pa[0];e=pa[1];p=pa[2];w=pa[3];if(b!==ya[0]||e!==ya[1]||p!==ya[2]||w!==ya[3])a.stencilOpSeparate(b,e,p,w),ya[0]=b,ya[1]=e,ya[2]=p,ya[3]=w;b=Aa[0];e=Aa[1];p=Aa[2];w=Aa[3];if(b!==ka[0]||e!==ka[1]||p!==ka[2]||w!==ka[3])a.stencilOpSeparate(b,e,p,w),ka[0]=b,ka[1]=e,ka[2]=p,ka[3]=w;b=A.scissor_enable;b!==F.scissor_enable&&
(b?a.enable(3089):a.disable(3089),F.scissor_enable=b);b=qa[0];e=qa[1];p=qa[2];w=qa[3];if(b!==za[0]||e!==za[1]||p!==za[2]||w!==za[3])a.scissor(b,e,p,w),za[0]=b,za[1]=e,za[2]=p,za[3]=w;b=Ja[0];e=Ja[1];p=Ja[2];w=Ja[3];if(b!==na[0]||e!==na[1]||p!==na[2]||w!==na[3])a.viewport(b,e,p,w),na[0]=b,na[1]=e,na[2]=p,na[3]=w;F.dirty=!1}if(b=F.profile)q=performance.now(),L.count+=c;a.useProgram(T.program);W.setVAO(null);e=X.location;p=Y[e];p.buffer||a.enableVertexAttribArray(e);if(p.type!==l.dtype||3!==p.size||
p.buffer!==l||!1!==p.normalized||0!==p.offset||0!==p.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(e,3,l.dtype,!1,0,0),p.type=l.dtype,p.size=3,p.buffer=l,p.normalized=!1,p.offset=0,p.stride=0;a.uniformMatrix4fv(k.location,!1,C);e=z.call(this,D,void 0,n);ta(e)&&16===e.length||ba.commandRaise(Q,M);a.uniformMatrix4fv(x.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(va[0]=e[0],va[1]=e[1],va[2]=e[2],va[3]=e[3],va[4]=e[4],va[5]=e[5],va[6]=e[6],va[7]=e[7],va[8]=e[8],va[9]=e[9],va[10]=
e[10],va[11]=e[11],va[12]=e[12],va[13]=e[13],va[14]=e[14],va[15]=e[15],va));n=ia.call(this,D,void 0,n);ta(n)&&16===n.length||ba.commandRaise(g,M);a.uniformMatrix4fv(f.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ba[0]=n[0],Ba[1]=n[1],Ba[2]=n[2],Ba[3]=n[3],Ba[4]=n[4],Ba[5]=n[5],Ba[6]=n[6],Ba[7]=n[7],Ba[8]=n[8],Ba[9]=n[9],Ba[10]=n[10],Ba[11]=n[11],Ba[12]=n[12],Ba[13]=n[13],Ba[14]=n[14],Ba[15]=n[15],Ba));v&&a.bindBuffer(34963,v.buffer.buffer);e=v.primType;p=v.vertCount-0;0<=p||ba.commandRaise(S,
M);for(n=0;n<c;++n)p&&a.drawElements(e,p,v.type,0<<(v.type-5121>>1));W.setVAO(null);b&&(L.cpuTime+=performance.now()-q)}}},$20:function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia){var g,v,S,k,X,f,x,Y,D,F,d,t,a,ta,A,ja,Z,W,ea,R,O,E,h,N,K,ha,ra,r,J,aa,P,la,qa,za;g=b.context;v=b.current;S=b.framebuffer;k=b.gl;X=b.next;f=b.shader;x=b.uniforms;Y=b.vao;D=X.blend_color;F=v.blend_color;d=X.blend_equation;t=v.blend_equation;a=X.blend_func;ta=v.blend_func;A=X.colorMask;ja=v.colorMask;Z=X.depth_range;W=v.depth_range;
ea=X.polygonOffset_offset;R=v.polygonOffset_offset;O=X.sample_coverage;E=v.sample_coverage;h=X.scissor_box;N=v.scissor_box;K=X.stencil_func;ha=v.stencil_func;ra=X.stencil_opBack;r=v.stencil_opBack;J=X.stencil_opFront;aa=v.stencil_opFront;P=X.viewport;la=v.viewport;qa={};za={};return{draw:function(b){var w,x,z,u,m,y,na,$a,Q,q,n,C,B;w=g.center;x=g.distance;z=g.eye;u=g.phi;m=g.projection;y=p.call(this,g,b,0);na=g.theta;$a=g.up;Q=g.view;g.center=e;g.distance=2.302585092994046;g.eye=l;g.phi=0;g.projection=
y;g.theta=0;g.up=c;g.view=G;y=S.next;y!==S.cur&&(y?k.bindFramebuffer(36160,y.framebuffer):k.bindFramebuffer(36160,null),S.cur=y);if(v.dirty){y=X.dither;y!==v.dither&&(y?k.enable(3024):k.disable(3024),v.dither=y);y=X.blend_enable;y!==v.blend_enable&&(y?k.enable(3042):k.disable(3042),v.blend_enable=y);y=D[0];n=D[1];C=D[2];B=D[3];if(y!==F[0]||n!==F[1]||C!==F[2]||B!==F[3])k.blendColor(y,n,C,B),F[0]=y,F[1]=n,F[2]=C,F[3]=B;y=d[0];n=d[1];if(y!==t[0]||n!==t[1])k.blendEquationSeparate(y,n),t[0]=y,t[1]=n;y=
a[0];n=a[1];C=a[2];B=a[3];if(y!==ta[0]||n!==ta[1]||C!==ta[2]||B!==ta[3])k.blendFuncSeparate(y,n,C,B),ta[0]=y,ta[1]=n,ta[2]=C,ta[3]=B;y=X.depth_enable;y!==v.depth_enable&&(y?k.enable(2929):k.disable(2929),v.depth_enable=y);y=X.depth_func;y!==v.depth_func&&(k.depthFunc(y),v.depth_func=y);y=Z[0];n=Z[1];if(y!==W[0]||n!==W[1])k.depthRange(y,n),W[0]=y,W[1]=n;y=X.depth_mask;y!==v.depth_mask&&(k.depthMask(y),v.depth_mask=y);y=A[0];n=A[1];C=A[2];B=A[3];if(y!==ja[0]||n!==ja[1]||C!==ja[2]||B!==ja[3])k.colorMask(y,
n,C,B),ja[0]=y,ja[1]=n,ja[2]=C,ja[3]=B;y=X.cull_enable;y!==v.cull_enable&&(y?k.enable(2884):k.disable(2884),v.cull_enable=y);y=X.cull_face;y!==v.cull_face&&(k.cullFace(y),v.cull_face=y);y=X.frontFace;y!==v.frontFace&&(k.frontFace(y),v.frontFace=y);y=X.lineWidth;y!==v.lineWidth&&(k.lineWidth(y),v.lineWidth=y);y=X.polygonOffset_enable;y!==v.polygonOffset_enable&&(y?k.enable(32823):k.disable(32823),v.polygonOffset_enable=y);y=ea[0];n=ea[1];if(y!==R[0]||n!==R[1])k.polygonOffset(y,n),R[0]=y,R[1]=n;y=X.sample_alpha;
y!==v.sample_alpha&&(y?k.enable(32926):k.disable(32926),v.sample_alpha=y);y=X.sample_enable;y!==v.sample_enable&&(y?k.enable(32928):k.disable(32928),v.sample_enable=y);y=O[0];n=O[1];if(y!==E[0]||n!==E[1])k.sampleCoverage(y,n),E[0]=y,E[1]=n;y=X.stencil_enable;y!==v.stencil_enable&&(y?k.enable(2960):k.disable(2960),v.stencil_enable=y);y=X.stencil_mask;y!==v.stencil_mask&&(k.stencilMask(y),v.stencil_mask=y);y=K[0];n=K[1];C=K[2];if(y!==ha[0]||n!==ha[1]||C!==ha[2])k.stencilFunc(y,n,C),ha[0]=y,ha[1]=n,
ha[2]=C;y=J[0];n=J[1];C=J[2];B=J[3];if(y!==aa[0]||n!==aa[1]||C!==aa[2]||B!==aa[3])k.stencilOpSeparate(y,n,C,B),aa[0]=y,aa[1]=n,aa[2]=C,aa[3]=B;y=ra[0];n=ra[1];C=ra[2];B=ra[3];if(y!==r[0]||n!==r[1]||C!==r[2]||B!==r[3])k.stencilOpSeparate(y,n,C,B),r[0]=y,r[1]=n,r[2]=C,r[3]=B;y=X.scissor_enable;y!==v.scissor_enable&&(y?k.enable(3089):k.disable(3089),v.scissor_enable=y);y=h[0];n=h[1];C=h[2];B=h[3];if(y!==N[0]||n!==N[1]||C!==N[2]||B!==N[3])k.scissor(y,n,C,B),N[0]=y,N[1]=n,N[2]=C,N[3]=B;y=P[0];n=P[1];C=
P[2];B=P[3];if(y!==la[0]||n!==la[1]||C!==la[2]||B!==la[3])k.viewport(y,n,C,B),la[0]=y,la[1]=n,la[2]=C,la[3]=B;v.dirty=!1}if(y=v.profile)q=performance.now(),L.count++;n=f.program(f.vert,f.frag,M);k.useProgram(n.program);Y.setVAO(null);C=n.id;(B=qa[C])||(B=qa[C]=H(n));B.call(this,b);Y.setVAO(null);g.center=w;g.distance=x;g.eye=z;g.phi=u;g.projection=m;g.theta=na;g.up=$a;g.view=Q;y&&(L.cpuTime+=performance.now()-q)},scope:function(a,d,c){var f,b,h,k,l,e,p,q,n,r,t,w,z,A,D,I,F,E,P;f=g.center;b=g.distance;
h=g.eye;k=g.phi;l=g.projection;e=m.call(this,g,a,c);p=g.theta;q=g.up;n=g.view;g.center=B;g.distance=2.302585092994046;g.eye=U;g.phi=0;g.projection=e;g.theta=0;g.up=u;g.view=y;if(e=v.profile)r=performance.now(),L.count++;t=g.center;w=x[1];x[1]=t;z=g.distance;t=x[2];x[2]=z;A=g.eye;z=x[3];x[3]=A;D=g.phi;A=x[4];x[4]=D;I=g.projection;D=x[5];x[5]=I;F=g.theta;I=x[6];x[6]=F;E=g.up;F=x[7];x[7]=E;E=g.view;P=x[8];x[8]=E;d(g,a,c);g.center=f;g.distance=b;g.eye=h;g.phi=k;g.projection=l;g.theta=p;g.up=q;g.view=
n;e&&(L.cpuTime+=performance.now()-r);x[1]=w;x[2]=t;x[3]=z;x[4]=A;x[5]=D;x[6]=I;x[7]=F;x[8]=P},batch:function(c,b){var l,e,p,x,u,m,y,H,q,n,C,B,G;l=g.center;e=g.distance;p=g.eye;x=g.phi;u=g.projection;m=T.call(this,g,c,0);y=g.theta;H=g.up;q=g.view;g.center=ca;g.distance=2.302585092994046;g.eye=w;g.phi=0;g.projection=m;g.theta=0;g.up=z;g.view=Q;m=S.next;m!==S.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),S.cur=m);if(v.dirty){m=X.dither;m!==v.dither&&(m?k.enable(3024):
k.disable(3024),v.dither=m);m=X.blend_enable;m!==v.blend_enable&&(m?k.enable(3042):k.disable(3042),v.blend_enable=m);m=D[0];C=D[1];B=D[2];G=D[3];if(m!==F[0]||C!==F[1]||B!==F[2]||G!==F[3])k.blendColor(m,C,B,G),F[0]=m,F[1]=C,F[2]=B,F[3]=G;m=d[0];C=d[1];if(m!==t[0]||C!==t[1])k.blendEquationSeparate(m,C),t[0]=m,t[1]=C;m=a[0];C=a[1];B=a[2];G=a[3];if(m!==ta[0]||C!==ta[1]||B!==ta[2]||G!==ta[3])k.blendFuncSeparate(m,C,B,G),ta[0]=m,ta[1]=C,ta[2]=B,ta[3]=G;m=X.depth_enable;m!==v.depth_enable&&(m?k.enable(2929):
k.disable(2929),v.depth_enable=m);m=X.depth_func;m!==v.depth_func&&(k.depthFunc(m),v.depth_func=m);m=Z[0];C=Z[1];if(m!==W[0]||C!==W[1])k.depthRange(m,C),W[0]=m,W[1]=C;m=X.depth_mask;m!==v.depth_mask&&(k.depthMask(m),v.depth_mask=m);m=A[0];C=A[1];B=A[2];G=A[3];if(m!==ja[0]||C!==ja[1]||B!==ja[2]||G!==ja[3])k.colorMask(m,C,B,G),ja[0]=m,ja[1]=C,ja[2]=B,ja[3]=G;m=X.cull_enable;m!==v.cull_enable&&(m?k.enable(2884):k.disable(2884),v.cull_enable=m);m=X.cull_face;m!==v.cull_face&&(k.cullFace(m),v.cull_face=
m);m=X.frontFace;m!==v.frontFace&&(k.frontFace(m),v.frontFace=m);m=X.lineWidth;m!==v.lineWidth&&(k.lineWidth(m),v.lineWidth=m);m=X.polygonOffset_enable;m!==v.polygonOffset_enable&&(m?k.enable(32823):k.disable(32823),v.polygonOffset_enable=m);m=ea[0];C=ea[1];if(m!==R[0]||C!==R[1])k.polygonOffset(m,C),R[0]=m,R[1]=C;m=X.sample_alpha;m!==v.sample_alpha&&(m?k.enable(32926):k.disable(32926),v.sample_alpha=m);m=X.sample_enable;m!==v.sample_enable&&(m?k.enable(32928):k.disable(32928),v.sample_enable=m);m=
O[0];C=O[1];if(m!==E[0]||C!==E[1])k.sampleCoverage(m,C),E[0]=m,E[1]=C;m=X.stencil_enable;m!==v.stencil_enable&&(m?k.enable(2960):k.disable(2960),v.stencil_enable=m);m=X.stencil_mask;m!==v.stencil_mask&&(k.stencilMask(m),v.stencil_mask=m);m=K[0];C=K[1];B=K[2];if(m!==ha[0]||C!==ha[1]||B!==ha[2])k.stencilFunc(m,C,B),ha[0]=m,ha[1]=C,ha[2]=B;m=J[0];C=J[1];B=J[2];G=J[3];if(m!==aa[0]||C!==aa[1]||B!==aa[2]||G!==aa[3])k.stencilOpSeparate(m,C,B,G),aa[0]=m,aa[1]=C,aa[2]=B,aa[3]=G;m=ra[0];C=ra[1];B=ra[2];G=ra[3];
if(m!==r[0]||C!==r[1]||B!==r[2]||G!==r[3])k.stencilOpSeparate(m,C,B,G),r[0]=m,r[1]=C,r[2]=B,r[3]=G;m=X.scissor_enable;m!==v.scissor_enable&&(m?k.enable(3089):k.disable(3089),v.scissor_enable=m);m=h[0];C=h[1];B=h[2];G=h[3];if(m!==N[0]||C!==N[1]||B!==N[2]||G!==N[3])k.scissor(m,C,B,G),N[0]=m,N[1]=C,N[2]=B,N[3]=G;m=P[0];C=P[1];B=P[2];G=P[3];if(m!==la[0]||C!==la[1]||B!==la[2]||G!==la[3])k.viewport(m,C,B,G),la[0]=m,la[1]=C,la[2]=B,la[3]=G;v.dirty=!1}if(m=v.profile)n=performance.now(),L.count+=b;C=f.program(f.vert,
f.frag,M);k.useProgram(C.program);Y.setVAO(null);B=C.id;(G=za[B])||(G=za[B]=ia(C));G.call(this,c,b);Y.setVAO(null);g.center=l;g.distance=e;g.eye=p;g.phi=x;g.projection=u;g.theta=y;g.up=H;g.view=q;m&&(L.cpuTime+=performance.now()-n)}}},"$27,position,projection,tex,uv,view":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t){var a,Z,A,ja,ha,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na,$a,Ta,q,n,C,va,Ba,ab,Hb;a=b.attributes;Z=b.context;A=b.current;ja=b.draw;
ha=b.framebuffer;W=b.gl;ea=b.isArrayLike;R=b.next;O=b.shader;E=b.uniforms;h=b.vao;N=R.blend_color;K=A.blend_color;Ca=R.blend_equation;ra=A.blend_equation;r=R.blend_func;J=A.blend_func;aa=R.colorMask;P=A.colorMask;la=R.depth_range;qa=A.depth_range;za=R.polygonOffset_offset;wa=A.polygonOffset_offset;fa=R.sample_coverage;Aa=A.sample_coverage;ka=R.scissor_box;pa=A.scissor_box;ya=R.stencil_func;Ja=A.stencil_func;na=R.stencil_opBack;$a=A.stencil_opBack;Ta=R.stencil_opFront;q=A.stencil_opFront;n=R.viewport;
C=A.viewport;va=new Float32Array(16);Ba=new Float32Array(16);ab=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(f){var b,g,k,v;b=ha.next;b!==ha.cur&&(b?W.bindFramebuffer(36160,b.framebuffer):W.bindFramebuffer(36160,null),ha.cur=b);if(A.dirty){var w;b=R.dither;b!==A.dither&&(b?W.enable(3024):W.disable(3024),A.dither=b);b=R.blend_enable;b!==A.blend_enable&&(b?W.enable(3042):W.disable(3042),A.blend_enable=b);b=N[0];k=N[1];v=N[2];w=N[3];if(b!==K[0]||k!==K[1]||v!==K[2]||w!==K[3])W.blendColor(b,
k,v,w),K[0]=b,K[1]=k,K[2]=v,K[3]=w;b=Ca[0];k=Ca[1];if(b!==ra[0]||k!==ra[1])W.blendEquationSeparate(b,k),ra[0]=b,ra[1]=k;b=r[0];k=r[1];v=r[2];w=r[3];if(b!==J[0]||k!==J[1]||v!==J[2]||w!==J[3])W.blendFuncSeparate(b,k,v,w),J[0]=b,J[1]=k,J[2]=v,J[3]=w;b=R.depth_enable;b!==A.depth_enable&&(b?W.enable(2929):W.disable(2929),A.depth_enable=b);b=R.depth_func;b!==A.depth_func&&(W.depthFunc(b),A.depth_func=b);b=la[0];k=la[1];if(b!==qa[0]||k!==qa[1])W.depthRange(b,k),qa[0]=b,qa[1]=k;b=R.depth_mask;b!==A.depth_mask&&
(W.depthMask(b),A.depth_mask=b);b=aa[0];k=aa[1];v=aa[2];w=aa[3];if(b!==P[0]||k!==P[1]||v!==P[2]||w!==P[3])W.colorMask(b,k,v,w),P[0]=b,P[1]=k,P[2]=v,P[3]=w;b=R.cull_enable;b!==A.cull_enable&&(b?W.enable(2884):W.disable(2884),A.cull_enable=b);b=R.cull_face;b!==A.cull_face&&(W.cullFace(b),A.cull_face=b);b=R.frontFace;b!==A.frontFace&&(W.frontFace(b),A.frontFace=b);b=R.lineWidth;b!==A.lineWidth&&(W.lineWidth(b),A.lineWidth=b);b=R.polygonOffset_enable;b!==A.polygonOffset_enable&&(b?W.enable(32823):W.disable(32823),
A.polygonOffset_enable=b);b=za[0];k=za[1];if(b!==wa[0]||k!==wa[1])W.polygonOffset(b,k),wa[0]=b,wa[1]=k;b=R.sample_alpha;b!==A.sample_alpha&&(b?W.enable(32926):W.disable(32926),A.sample_alpha=b);b=R.sample_enable;b!==A.sample_enable&&(b?W.enable(32928):W.disable(32928),A.sample_enable=b);b=fa[0];k=fa[1];if(b!==Aa[0]||k!==Aa[1])W.sampleCoverage(b,k),Aa[0]=b,Aa[1]=k;b=R.stencil_enable;b!==A.stencil_enable&&(b?W.enable(2960):W.disable(2960),A.stencil_enable=b);b=R.stencil_mask;b!==A.stencil_mask&&(W.stencilMask(b),
A.stencil_mask=b);b=ya[0];k=ya[1];v=ya[2];if(b!==Ja[0]||k!==Ja[1]||v!==Ja[2])W.stencilFunc(b,k,v),Ja[0]=b,Ja[1]=k,Ja[2]=v;b=Ta[0];k=Ta[1];v=Ta[2];w=Ta[3];if(b!==q[0]||k!==q[1]||v!==q[2]||w!==q[3])W.stencilOpSeparate(b,k,v,w),q[0]=b,q[1]=k,q[2]=v,q[3]=w;b=na[0];k=na[1];v=na[2];w=na[3];if(b!==$a[0]||k!==$a[1]||v!==$a[2]||w!==$a[3])W.stencilOpSeparate(b,k,v,w),$a[0]=b,$a[1]=k,$a[2]=v,$a[3]=w;b=R.scissor_enable;b!==A.scissor_enable&&(b?W.enable(3089):W.disable(3089),A.scissor_enable=b);b=ka[0];k=ka[1];
v=ka[2];w=ka[3];if(b!==pa[0]||k!==pa[1]||v!==pa[2]||w!==pa[3])W.scissor(b,k,v,w),pa[0]=b,pa[1]=k,pa[2]=v,pa[3]=w;b=n[0];k=n[1];v=n[2];w=n[3];if(b!==C[0]||k!==C[1]||v!==C[2]||w!==C[3])W.viewport(b,k,v,w),C[0]=b,C[1]=k,C[2]=v,C[3]=w;A.dirty=!1}if(b=A.profile)g=performance.now(),L.count++;W.useProgram(e.program);h.setVAO(null);k=Y.location;v=a[k];v.buffer||W.enableVertexAttribArray(k);if(v.type!==l.dtype||3!==v.size||v.buffer!==l||!1!==v.normalized||0!==v.offset||0!==v.stride)W.bindBuffer(34962,l.buffer),
W.vertexAttribPointer(k,3,l.dtype,!1,0,0),v.type=l.dtype,v.size=3,v.buffer=l,v.normalized=!1,v.offset=0,v.stride=0;k=d.location;v=a[k];v.buffer||W.enableVertexAttribArray(k);if(v.type!==p.dtype||2!==v.size||v.buffer!==p||!1!==v.normalized||0!==v.offset||0!==v.stride)W.bindBuffer(34962,p.buffer),W.vertexAttribPointer(k,2,p.dtype,!1,0,0),v.type=p.dtype,v.size=2,v.buffer=p,v.normalized=!1,v.offset=0,v.stride=0;k=c.call(this,Z,f,0);ea(k)&&16===k.length||ba.commandRaise(G,M);W.uniformMatrix4fv(D.location,
!1,Array.isArray(k)||k instanceof Float32Array?k:(va[0]=k[0],va[1]=k[1],va[2]=k[2],va[3]=k[3],va[4]=k[4],va[5]=k[5],va[6]=k[6],va[7]=k[7],va[8]=k[8],va[9]=k[9],va[10]=k[10],va[11]=k[11],va[12]=k[12],va[13]=k[13],va[14]=k[14],va[15]=k[15],va));k=H.call(this,Z,f,0);ea(k)&&16===k.length||ba.commandRaise(B,M);W.uniformMatrix4fv(t.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ba[0]=k[0],Ba[1]=k[1],Ba[2]=k[2],Ba[3]=k[3],Ba[4]=k[4],Ba[5]=k[5],Ba[6]=k[6],Ba[7]=k[7],Ba[8]=k[8],Ba[9]=k[9],Ba[10]=
k[10],Ba[11]=k[11],Ba[12]=k[12],Ba[13]=k[13],Ba[14]=k[14],Ba[15]=k[15],Ba));(f=f.texture)&&"framebuffer"===f._reglType&&(f=f.color[0]);"function"===typeof f&&"texture2d"===f._reglType||ba.commandRaise(U,M);f=f._texture;W.uniform1i(F.location,f.bind());m&&W.bindBuffer(34963,m.buffer.buffer);k=m.primType;v=m.vertCount-0;0<=v||ba.commandRaise(u,M);v&&(W.drawElements(k,v,m.type,0<<(m.type-5121>>1)),h.setVAO(null),b&&(L.cpuTime+=performance.now()-g),f.unbind())},scope:function(a,d,c){var b,f,g,h,k,n,q,
e,r,v,t,C,m,x,u,D,F,P,J,fa,H,K,B,G,$a,N,S,R,qa,wa,U,na,W,ka,X;if(b=A.profile)f=performance.now(),L.count++;g=ja.elements;ja.elements=y;h=ja.offset;ja.offset=0;k=y.vertCount-0;0<=k||ba.commandRaise(ca,M);n=ja.count;ja.count=k;q=y.primType;k=ja.primitive;ja.primitive=q;e=w.call(this,Z,a,c);q=E[3];E[3]=e;r=a.texture;e=E[5];E[5]=r;v=T.call(this,Z,a,c);r=E[4];E[4]=v;v=z.buffer;z.buffer=l;t=z.divisor;z.divisor=0;C=z.normalized;z.normalized=!1;m=z.offset;z.offset=0;x=z.size;z.size=0;u=z.state;z.state=1;
D=z.stride;z.stride=0;F=z.type;z.type=l.dtype;P=z.w;z.w=0;J=z.x;z.x=0;fa=z.y;z.y=0;H=z.z;z.z=0;K=Q.buffer;Q.buffer=p;B=Q.divisor;Q.divisor=0;G=Q.normalized;Q.normalized=!1;$a=Q.offset;Q.offset=0;N=Q.size;Q.size=0;S=Q.state;Q.state=1;R=Q.stride;Q.stride=0;qa=Q.type;Q.type=p.dtype;wa=Q.w;Q.w=0;U=Q.x;Q.x=0;na=Q.y;Q.y=0;W=Q.z;Q.z=0;ka=O.vert;O.vert=2;X=O.frag;O.frag=1;d(Z,a,c);b&&(L.cpuTime+=performance.now()-f);ja.elements=g;ja.offset=h;ja.count=n;ja.primitive=k;E[3]=q;E[5]=e;E[4]=r;z.buffer=v;z.divisor=
t;z.normalized=C;z.offset=m;z.size=x;z.state=u;z.stride=D;z.type=F;z.w=P;z.x=J;z.y=fa;z.z=H;Q.buffer=K;Q.divisor=B;Q.normalized=G;Q.offset=$a;Q.size=N;Q.state=S;Q.stride=R;Q.type=qa;Q.w=wa;Q.x=U;Q.y=na;Q.z=W;O.vert=ka;O.frag=X},batch:function(c,b){var e,w,m,z;e=ha.next;e!==ha.cur&&(e?W.bindFramebuffer(36160,e.framebuffer):W.bindFramebuffer(36160,null),ha.cur=e);if(A.dirty){var u,y,E;e=R.dither;e!==A.dither&&(e?W.enable(3024):W.disable(3024),A.dither=e);e=R.blend_enable;e!==A.blend_enable&&(e?W.enable(3042):
W.disable(3042),A.blend_enable=e);e=N[0];u=N[1];y=N[2];E=N[3];if(e!==K[0]||u!==K[1]||y!==K[2]||E!==K[3])W.blendColor(e,u,y,E),K[0]=e,K[1]=u,K[2]=y,K[3]=E;e=Ca[0];u=Ca[1];if(e!==ra[0]||u!==ra[1])W.blendEquationSeparate(e,u),ra[0]=e,ra[1]=u;e=r[0];u=r[1];y=r[2];E=r[3];if(e!==J[0]||u!==J[1]||y!==J[2]||E!==J[3])W.blendFuncSeparate(e,u,y,E),J[0]=e,J[1]=u,J[2]=y,J[3]=E;e=R.depth_enable;e!==A.depth_enable&&(e?W.enable(2929):W.disable(2929),A.depth_enable=e);e=R.depth_func;e!==A.depth_func&&(W.depthFunc(e),
A.depth_func=e);e=la[0];u=la[1];if(e!==qa[0]||u!==qa[1])W.depthRange(e,u),qa[0]=e,qa[1]=u;e=R.depth_mask;e!==A.depth_mask&&(W.depthMask(e),A.depth_mask=e);e=aa[0];u=aa[1];y=aa[2];E=aa[3];if(e!==P[0]||u!==P[1]||y!==P[2]||E!==P[3])W.colorMask(e,u,y,E),P[0]=e,P[1]=u,P[2]=y,P[3]=E;e=R.cull_enable;e!==A.cull_enable&&(e?W.enable(2884):W.disable(2884),A.cull_enable=e);e=R.cull_face;e!==A.cull_face&&(W.cullFace(e),A.cull_face=e);e=R.frontFace;e!==A.frontFace&&(W.frontFace(e),A.frontFace=e);e=R.lineWidth;
e!==A.lineWidth&&(W.lineWidth(e),A.lineWidth=e);e=R.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?W.enable(32823):W.disable(32823),A.polygonOffset_enable=e);e=za[0];u=za[1];if(e!==wa[0]||u!==wa[1])W.polygonOffset(e,u),wa[0]=e,wa[1]=u;e=R.sample_alpha;e!==A.sample_alpha&&(e?W.enable(32926):W.disable(32926),A.sample_alpha=e);e=R.sample_enable;e!==A.sample_enable&&(e?W.enable(32928):W.disable(32928),A.sample_enable=e);e=fa[0];u=fa[1];if(e!==Aa[0]||u!==Aa[1])W.sampleCoverage(e,u),Aa[0]=e,Aa[1]=
u;e=R.stencil_enable;e!==A.stencil_enable&&(e?W.enable(2960):W.disable(2960),A.stencil_enable=e);e=R.stencil_mask;e!==A.stencil_mask&&(W.stencilMask(e),A.stencil_mask=e);e=ya[0];u=ya[1];y=ya[2];if(e!==Ja[0]||u!==Ja[1]||y!==Ja[2])W.stencilFunc(e,u,y),Ja[0]=e,Ja[1]=u,Ja[2]=y;e=Ta[0];u=Ta[1];y=Ta[2];E=Ta[3];if(e!==q[0]||u!==q[1]||y!==q[2]||E!==q[3])W.stencilOpSeparate(e,u,y,E),q[0]=e,q[1]=u,q[2]=y,q[3]=E;e=na[0];u=na[1];y=na[2];E=na[3];if(e!==$a[0]||u!==$a[1]||y!==$a[2]||E!==$a[3])W.stencilOpSeparate(e,
u,y,E),$a[0]=e,$a[1]=u,$a[2]=y,$a[3]=E;e=R.scissor_enable;e!==A.scissor_enable&&(e?W.enable(3089):W.disable(3089),A.scissor_enable=e);e=ka[0];u=ka[1];y=ka[2];E=ka[3];if(e!==pa[0]||u!==pa[1]||y!==pa[2]||E!==pa[3])W.scissor(e,u,y,E),pa[0]=e,pa[1]=u,pa[2]=y,pa[3]=E;e=n[0];u=n[1];y=n[2];E=n[3];if(e!==C[0]||u!==C[1]||y!==C[2]||E!==C[3])W.viewport(e,u,y,E),C[0]=e,C[1]=u,C[2]=y,C[3]=E;A.dirty=!1}if(e=A.profile)w=performance.now(),L.count+=b;W.useProgram(ia.program);h.setVAO(null);u=Y.location;y=a[u];y.buffer||
W.enableVertexAttribArray(u);if(y.type!==l.dtype||3!==y.size||y.buffer!==l||!1!==y.normalized||0!==y.offset||0!==y.stride)W.bindBuffer(34962,l.buffer),W.vertexAttribPointer(u,3,l.dtype,!1,0,0),y.type=l.dtype,y.size=3,y.buffer=l,y.normalized=!1,y.offset=0,y.stride=0;u=d.location;y=a[u];y.buffer||W.enableVertexAttribArray(u);if(y.type!==p.dtype||2!==y.size||y.buffer!==p||!1!==y.normalized||0!==y.offset||0!==y.stride)W.bindBuffer(34962,p.buffer),W.vertexAttribPointer(u,2,p.dtype,!1,0,0),y.type=p.dtype,
y.size=2,y.buffer=p,y.normalized=!1,y.offset=0,y.stride=0;u=g.call(this,Z,z,m);ea(u)&&16===u.length||ba.commandRaise(v,M);W.uniformMatrix4fv(D.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(ab[0]=u[0],ab[1]=u[1],ab[2]=u[2],ab[3]=u[3],ab[4]=u[4],ab[5]=u[5],ab[6]=u[6],ab[7]=u[7],ab[8]=u[8],ab[9]=u[9],ab[10]=u[10],ab[11]=u[11],ab[12]=u[12],ab[13]=u[13],ab[14]=u[14],ab[15]=u[15],ab));m=S.call(this,Z,z,m);ea(m)&&16===m.length||ba.commandRaise(k,M);W.uniformMatrix4fv(t.location,!1,Array.isArray(m)||
m instanceof Float32Array?m:(Hb[0]=m[0],Hb[1]=m[1],Hb[2]=m[2],Hb[3]=m[3],Hb[4]=m[4],Hb[5]=m[5],Hb[6]=m[6],Hb[7]=m[7],Hb[8]=m[8],Hb[9]=m[9],Hb[10]=m[10],Hb[11]=m[11],Hb[12]=m[12],Hb[13]=m[13],Hb[14]=m[14],Hb[15]=m[15],Hb));f&&W.bindBuffer(34963,f.buffer.buffer);u=f.primType;y=f.vertCount-0;0<=y||ba.commandRaise(x,M);for(m=0;m<b;++m)z=c[m],(z=z.texture)&&"framebuffer"===z._reglType&&(z=z.color[0]),"function"===typeof z&&"texture2d"===z._reglType||ba.commandRaise(X,M),z=z._texture,W.uniform1i(F.location,
z.bind()),y&&(W.drawElements(u,y,f.type,0<<(f.type-5121>>1)),z.unbind());h.setVAO(null);e&&(L.cpuTime+=performance.now()-w)}}},"$19,normal,position,projection,view":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,ia,g,v,S){var k,X,f,x,Y,D,F,d,t,a,Z,A,ja,ha,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya,Ja,na;k=b.attributes;X=b.context;f=b.current;x=b.draw;Y=b.framebuffer;D=b.gl;F=b.isArrayLike;d=b.next;t=b.shader;a=b.uniforms;Z=b.vao;A=d.blend_color;ja=f.blend_color;ha=d.blend_equation;
W=f.blend_equation;ea=d.blend_func;R=f.blend_func;O=d.colorMask;E=f.colorMask;h=d.depth_range;N=f.depth_range;K=d.polygonOffset_offset;Ca=f.polygonOffset_offset;ra=d.sample_coverage;r=f.sample_coverage;J=d.scissor_box;aa=f.scissor_box;P=d.stencil_func;la=f.stencil_func;qa=d.stencil_opBack;za=f.stencil_opBack;wa=d.stencil_opFront;fa=f.stencil_opFront;Aa=d.viewport;ka=f.viewport;pa=new Float32Array(16);ya=new Float32Array(16);Ja=new Float32Array(16);na=new Float32Array(16);return{draw:function(b){var t,
q,n;b=Y.next;b!==Y.cur&&(b?D.bindFramebuffer(36160,b.framebuffer):D.bindFramebuffer(36160,null),Y.cur=b);if(f.dirty){var C;b=d.dither;b!==f.dither&&(b?D.enable(3024):D.disable(3024),f.dither=b);b=d.blend_enable;b!==f.blend_enable&&(b?D.enable(3042):D.disable(3042),f.blend_enable=b);b=A[0];q=A[1];n=A[2];C=A[3];if(b!==ja[0]||q!==ja[1]||n!==ja[2]||C!==ja[3])D.blendColor(b,q,n,C),ja[0]=b,ja[1]=q,ja[2]=n,ja[3]=C;b=ha[0];q=ha[1];if(b!==W[0]||q!==W[1])D.blendEquationSeparate(b,q),W[0]=b,W[1]=q;b=ea[0];q=
ea[1];n=ea[2];C=ea[3];if(b!==R[0]||q!==R[1]||n!==R[2]||C!==R[3])D.blendFuncSeparate(b,q,n,C),R[0]=b,R[1]=q,R[2]=n,R[3]=C;b=d.depth_enable;b!==f.depth_enable&&(b?D.enable(2929):D.disable(2929),f.depth_enable=b);b=d.depth_func;b!==f.depth_func&&(D.depthFunc(b),f.depth_func=b);b=h[0];q=h[1];if(b!==N[0]||q!==N[1])D.depthRange(b,q),N[0]=b,N[1]=q;b=d.depth_mask;b!==f.depth_mask&&(D.depthMask(b),f.depth_mask=b);b=O[0];q=O[1];n=O[2];C=O[3];if(b!==E[0]||q!==E[1]||n!==E[2]||C!==E[3])D.colorMask(b,q,n,C),E[0]=
b,E[1]=q,E[2]=n,E[3]=C;b=d.cull_enable;b!==f.cull_enable&&(b?D.enable(2884):D.disable(2884),f.cull_enable=b);b=d.cull_face;b!==f.cull_face&&(D.cullFace(b),f.cull_face=b);b=d.frontFace;b!==f.frontFace&&(D.frontFace(b),f.frontFace=b);b=d.lineWidth;b!==f.lineWidth&&(D.lineWidth(b),f.lineWidth=b);b=d.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?D.enable(32823):D.disable(32823),f.polygonOffset_enable=b);b=K[0];q=K[1];if(b!==Ca[0]||q!==Ca[1])D.polygonOffset(b,q),Ca[0]=b,Ca[1]=q;b=d.sample_alpha;
b!==f.sample_alpha&&(b?D.enable(32926):D.disable(32926),f.sample_alpha=b);b=d.sample_enable;b!==f.sample_enable&&(b?D.enable(32928):D.disable(32928),f.sample_enable=b);b=ra[0];q=ra[1];if(b!==r[0]||q!==r[1])D.sampleCoverage(b,q),r[0]=b,r[1]=q;b=d.stencil_enable;b!==f.stencil_enable&&(b?D.enable(2960):D.disable(2960),f.stencil_enable=b);b=d.stencil_mask;b!==f.stencil_mask&&(D.stencilMask(b),f.stencil_mask=b);b=P[0];q=P[1];n=P[2];if(b!==la[0]||q!==la[1]||n!==la[2])D.stencilFunc(b,q,n),la[0]=b,la[1]=
q,la[2]=n;b=wa[0];q=wa[1];n=wa[2];C=wa[3];if(b!==fa[0]||q!==fa[1]||n!==fa[2]||C!==fa[3])D.stencilOpSeparate(b,q,n,C),fa[0]=b,fa[1]=q,fa[2]=n,fa[3]=C;b=qa[0];q=qa[1];n=qa[2];C=qa[3];if(b!==za[0]||q!==za[1]||n!==za[2]||C!==za[3])D.stencilOpSeparate(b,q,n,C),za[0]=b,za[1]=q,za[2]=n,za[3]=C;b=d.scissor_enable;b!==f.scissor_enable&&(b?D.enable(3089):D.disable(3089),f.scissor_enable=b);b=J[0];q=J[1];n=J[2];C=J[3];if(b!==aa[0]||q!==aa[1]||n!==aa[2]||C!==aa[3])D.scissor(b,q,n,C),aa[0]=b,aa[1]=q,aa[2]=n,aa[3]=
C;b=Aa[0];q=Aa[1];n=Aa[2];C=Aa[3];if(b!==ka[0]||q!==ka[1]||n!==ka[2]||C!==ka[3])D.viewport(b,q,n,C),ka[0]=b,ka[1]=q,ka[2]=n,ka[3]=C;f.dirty=!1}if(b=f.profile)t=performance.now(),L.count++;D.useProgram(e.program);Z.setVAO(null);q=g.location;n=k[q];n.buffer||D.enableVertexAttribArray(q);if(n.type!==l.dtype||3!==n.size||n.buffer!==l||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(q,3,l.dtype,!1,0,0),n.type=l.dtype,n.size=3,n.buffer=l,n.normalized=!1,
n.offset=0,n.stride=0;q=ia.location;n=k[q];n.buffer||D.enableVertexAttribArray(q);if(n.type!==p.dtype||3!==n.size||n.buffer!==p||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,p.buffer),D.vertexAttribPointer(q,3,p.dtype,!1,0,0),n.type=p.dtype,n.size=3,n.buffer=p,n.normalized=!1,n.offset=0,n.stride=0;q=a[5];F(q)&&16===q.length||ba.commandRaise(c,M);D.uniformMatrix4fv(v.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(pa[0]=q[0],pa[1]=q[1],pa[2]=q[2],pa[3]=q[3],pa[4]=q[4],
pa[5]=q[5],pa[6]=q[6],pa[7]=q[7],pa[8]=q[8],pa[9]=q[9],pa[10]=q[10],pa[11]=q[11],pa[12]=q[12],pa[13]=q[13],pa[14]=q[14],pa[15]=q[15],pa));q=a[8];F(q)&&16===q.length||ba.commandRaise(G,M);D.uniformMatrix4fv(S.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(ya[0]=q[0],ya[1]=q[1],ya[2]=q[2],ya[3]=q[3],ya[4]=q[4],ya[5]=q[5],ya[6]=q[6],ya[7]=q[7],ya[8]=q[8],ya[9]=q[9],ya[10]=q[10],ya[11]=q[11],ya[12]=q[12],ya[13]=q[13],ya[14]=q[14],ya[15]=q[15],ya));H&&D.bindBuffer(34963,H.buffer.buffer);q=
H.primType;n=H.vertCount-0;0<=n||ba.commandRaise(B,M);n&&(D.drawElements(q,n,H.type,0<<(H.type-5121>>1)),Z.setVAO(null),b&&(L.cpuTime+=performance.now()-t))},scope:function(a,c,d){var b,g,h,k,e,r,v,w,z,A,D,E,F,P,J,fa,H,K,B,G,N,O,Q,S,R,qa,T,wa,na,W,ka,aa;if(b=f.profile)g=performance.now(),L.count++;h=x.elements;x.elements=U;k=x.offset;x.offset=0;e=U.vertCount-0;0<=e||ba.commandRaise(m,M);r=x.count;x.count=e;v=U.primType;e=x.primitive;x.primitive=v;v=u.buffer;u.buffer=p;w=u.divisor;u.divisor=0;z=u.normalized;
u.normalized=!1;A=u.offset;u.offset=0;D=u.size;u.size=0;E=u.state;u.state=1;F=u.stride;u.stride=0;P=u.type;u.type=p.dtype;J=u.w;u.w=0;fa=u.x;u.x=0;H=u.y;u.y=0;K=u.z;u.z=0;B=y.buffer;y.buffer=l;G=y.divisor;y.divisor=0;N=y.normalized;y.normalized=!1;O=y.offset;y.offset=0;Q=y.size;y.size=0;S=y.state;y.state=1;R=y.stride;y.stride=0;qa=y.type;y.type=l.dtype;T=y.w;y.w=0;wa=y.x;y.x=0;na=y.y;y.y=0;W=y.z;y.z=0;ka=t.vert;t.vert=10;aa=t.frag;t.frag=9;c(X,a,d);b&&(L.cpuTime+=performance.now()-g);x.elements=h;
x.offset=k;x.count=r;x.primitive=e;u.buffer=v;u.divisor=w;u.normalized=z;u.offset=A;u.size=D;u.state=E;u.stride=F;u.type=P;u.w=J;u.x=fa;u.y=H;u.z=K;y.buffer=B;y.divisor=G;y.normalized=N;y.offset=O;y.size=Q;y.state=S;y.stride=R;y.type=qa;y.w=T;y.x=wa;y.y=na;y.z=W;t.vert=ka;t.frag=aa},batch:function(c,b){var e,n,t;e=Y.next;e!==Y.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),Y.cur=e);if(f.dirty){var m,u;e=d.dither;e!==f.dither&&(e?D.enable(3024):D.disable(3024),f.dither=
e);e=d.blend_enable;e!==f.blend_enable&&(e?D.enable(3042):D.disable(3042),f.blend_enable=e);e=A[0];t=A[1];m=A[2];u=A[3];if(e!==ja[0]||t!==ja[1]||m!==ja[2]||u!==ja[3])D.blendColor(e,t,m,u),ja[0]=e,ja[1]=t,ja[2]=m,ja[3]=u;e=ha[0];t=ha[1];if(e!==W[0]||t!==W[1])D.blendEquationSeparate(e,t),W[0]=e,W[1]=t;e=ea[0];t=ea[1];m=ea[2];u=ea[3];if(e!==R[0]||t!==R[1]||m!==R[2]||u!==R[3])D.blendFuncSeparate(e,t,m,u),R[0]=e,R[1]=t,R[2]=m,R[3]=u;e=d.depth_enable;e!==f.depth_enable&&(e?D.enable(2929):D.disable(2929),
f.depth_enable=e);e=d.depth_func;e!==f.depth_func&&(D.depthFunc(e),f.depth_func=e);e=h[0];t=h[1];if(e!==N[0]||t!==N[1])D.depthRange(e,t),N[0]=e,N[1]=t;e=d.depth_mask;e!==f.depth_mask&&(D.depthMask(e),f.depth_mask=e);e=O[0];t=O[1];m=O[2];u=O[3];if(e!==E[0]||t!==E[1]||m!==E[2]||u!==E[3])D.colorMask(e,t,m,u),E[0]=e,E[1]=t,E[2]=m,E[3]=u;e=d.cull_enable;e!==f.cull_enable&&(e?D.enable(2884):D.disable(2884),f.cull_enable=e);e=d.cull_face;e!==f.cull_face&&(D.cullFace(e),f.cull_face=e);e=d.frontFace;e!==f.frontFace&&
(D.frontFace(e),f.frontFace=e);e=d.lineWidth;e!==f.lineWidth&&(D.lineWidth(e),f.lineWidth=e);e=d.polygonOffset_enable;e!==f.polygonOffset_enable&&(e?D.enable(32823):D.disable(32823),f.polygonOffset_enable=e);e=K[0];t=K[1];if(e!==Ca[0]||t!==Ca[1])D.polygonOffset(e,t),Ca[0]=e,Ca[1]=t;e=d.sample_alpha;e!==f.sample_alpha&&(e?D.enable(32926):D.disable(32926),f.sample_alpha=e);e=d.sample_enable;e!==f.sample_enable&&(e?D.enable(32928):D.disable(32928),f.sample_enable=e);e=ra[0];t=ra[1];if(e!==r[0]||t!==
r[1])D.sampleCoverage(e,t),r[0]=e,r[1]=t;e=d.stencil_enable;e!==f.stencil_enable&&(e?D.enable(2960):D.disable(2960),f.stencil_enable=e);e=d.stencil_mask;e!==f.stencil_mask&&(D.stencilMask(e),f.stencil_mask=e);e=P[0];t=P[1];m=P[2];if(e!==la[0]||t!==la[1]||m!==la[2])D.stencilFunc(e,t,m),la[0]=e,la[1]=t,la[2]=m;e=wa[0];t=wa[1];m=wa[2];u=wa[3];if(e!==fa[0]||t!==fa[1]||m!==fa[2]||u!==fa[3])D.stencilOpSeparate(e,t,m,u),fa[0]=e,fa[1]=t,fa[2]=m,fa[3]=u;e=qa[0];t=qa[1];m=qa[2];u=qa[3];if(e!==za[0]||t!==za[1]||
m!==za[2]||u!==za[3])D.stencilOpSeparate(e,t,m,u),za[0]=e,za[1]=t,za[2]=m,za[3]=u;e=d.scissor_enable;e!==f.scissor_enable&&(e?D.enable(3089):D.disable(3089),f.scissor_enable=e);e=J[0];t=J[1];m=J[2];u=J[3];if(e!==aa[0]||t!==aa[1]||m!==aa[2]||u!==aa[3])D.scissor(e,t,m,u),aa[0]=e,aa[1]=t,aa[2]=m,aa[3]=u;e=Aa[0];t=Aa[1];m=Aa[2];u=Aa[3];if(e!==ka[0]||t!==ka[1]||m!==ka[2]||u!==ka[3])D.viewport(e,t,m,u),ka[0]=e,ka[1]=t,ka[2]=m,ka[3]=u;f.dirty=!1}if(e=f.profile)n=performance.now(),L.count+=b;D.useProgram(ca.program);
Z.setVAO(null);t=g.location;m=k[t];m.buffer||D.enableVertexAttribArray(t);if(m.type!==l.dtype||3!==m.size||m.buffer!==l||!1!==m.normalized||0!==m.offset||0!==m.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(t,3,l.dtype,!1,0,0),m.type=l.dtype,m.size=3,m.buffer=l,m.normalized=!1,m.offset=0,m.stride=0;t=ia.location;m=k[t];m.buffer||D.enableVertexAttribArray(t);if(m.type!==p.dtype||3!==m.size||m.buffer!==p||!1!==m.normalized||0!==m.offset||0!==m.stride)D.bindBuffer(34962,p.buffer),D.vertexAttribPointer(t,
3,p.dtype,!1,0,0),m.type=p.dtype,m.size=3,m.buffer=p,m.normalized=!1,m.offset=0,m.stride=0;t=a[5];F(t)&&16===t.length||ba.commandRaise(w,M);D.uniformMatrix4fv(v.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Ja[0]=t[0],Ja[1]=t[1],Ja[2]=t[2],Ja[3]=t[3],Ja[4]=t[4],Ja[5]=t[5],Ja[6]=t[6],Ja[7]=t[7],Ja[8]=t[8],Ja[9]=t[9],Ja[10]=t[10],Ja[11]=t[11],Ja[12]=t[12],Ja[13]=t[13],Ja[14]=t[14],Ja[15]=t[15],Ja));t=a[8];F(t)&&16===t.length||ba.commandRaise(T,M);D.uniformMatrix4fv(S.location,!1,Array.isArray(t)||
t instanceof Float32Array?t:(na[0]=t[0],na[1]=t[1],na[2]=t[2],na[3]=t[3],na[4]=t[4],na[5]=t[5],na[6]=t[6],na[7]=t[7],na[8]=t[8],na[9]=t[9],na[10]=t[10],na[11]=t[11],na[12]=t[12],na[13]=t[13],na[14]=t[14],na[15]=t[15],na));z&&D.bindBuffer(34963,z.buffer.buffer);m=z.primType;u=z.vertCount-0;0<=u||ba.commandRaise(Q,M);for(t=0;t<b;++t)u&&D.drawElements(m,u,z.type,0<<(z.type-5121>>1));Z.setVAO(null);e&&(L.cpuTime+=performance.now()-n)}}},"$14,angle,color,position":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,
y,ca,w,T){var z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,Z,A,ja,ha,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa,P,la,qa;z=b.attributes;Q=b.context;ia=b.current;g=b.draw;v=b.elements;S=b.framebuffer;k=b.gl;X=b.isArrayLike;f=b.next;x=b.shader;Y=b.uniforms;D=b.vao;F=f.blend_color;d=ia.blend_color;t=f.blend_equation;a=ia.blend_equation;Z=f.blend_func;A=ia.blend_func;ja=f.colorMask;ha=ia.colorMask;W=f.depth_range;ea=ia.depth_range;R=f.polygonOffset_offset;O=ia.polygonOffset_offset;E=f.sample_coverage;h=ia.sample_coverage;N=f.scissor_box;
K=ia.scissor_box;Ca=f.stencil_func;ra=ia.stencil_func;r=f.stencil_opBack;J=ia.stencil_opBack;aa=f.stencil_opFront;P=ia.stencil_opFront;la=f.viewport;qa=ia.viewport;return{draw:function(b){var m,u,x,y;m=S.next;m!==S.cur&&(m?k.bindFramebuffer(36160,m.framebuffer):k.bindFramebuffer(36160,null),S.cur=m);if(ia.dirty){var H;m=f.dither;m!==ia.dither&&(m?k.enable(3024):k.disable(3024),ia.dither=m);m=f.blend_enable;m!==ia.blend_enable&&(m?k.enable(3042):k.disable(3042),ia.blend_enable=m);m=F[0];x=F[1];y=F[2];
H=F[3];if(m!==d[0]||x!==d[1]||y!==d[2]||H!==d[3])k.blendColor(m,x,y,H),d[0]=m,d[1]=x,d[2]=y,d[3]=H;m=t[0];x=t[1];if(m!==a[0]||x!==a[1])k.blendEquationSeparate(m,x),a[0]=m,a[1]=x;m=Z[0];x=Z[1];y=Z[2];H=Z[3];if(m!==A[0]||x!==A[1]||y!==A[2]||H!==A[3])k.blendFuncSeparate(m,x,y,H),A[0]=m,A[1]=x,A[2]=y,A[3]=H;m=f.depth_func;m!==ia.depth_func&&(k.depthFunc(m),ia.depth_func=m);m=W[0];x=W[1];if(m!==ea[0]||x!==ea[1])k.depthRange(m,x),ea[0]=m,ea[1]=x;m=f.depth_mask;m!==ia.depth_mask&&(k.depthMask(m),ia.depth_mask=
m);m=ja[0];x=ja[1];y=ja[2];H=ja[3];if(m!==ha[0]||x!==ha[1]||y!==ha[2]||H!==ha[3])k.colorMask(m,x,y,H),ha[0]=m,ha[1]=x,ha[2]=y,ha[3]=H;m=f.cull_enable;m!==ia.cull_enable&&(m?k.enable(2884):k.disable(2884),ia.cull_enable=m);m=f.cull_face;m!==ia.cull_face&&(k.cullFace(m),ia.cull_face=m);m=f.frontFace;m!==ia.frontFace&&(k.frontFace(m),ia.frontFace=m);m=f.lineWidth;m!==ia.lineWidth&&(k.lineWidth(m),ia.lineWidth=m);m=f.polygonOffset_enable;m!==ia.polygonOffset_enable&&(m?k.enable(32823):k.disable(32823),
ia.polygonOffset_enable=m);m=R[0];x=R[1];if(m!==O[0]||x!==O[1])k.polygonOffset(m,x),O[0]=m,O[1]=x;m=f.sample_alpha;m!==ia.sample_alpha&&(m?k.enable(32926):k.disable(32926),ia.sample_alpha=m);m=f.sample_enable;m!==ia.sample_enable&&(m?k.enable(32928):k.disable(32928),ia.sample_enable=m);m=E[0];x=E[1];if(m!==h[0]||x!==h[1])k.sampleCoverage(m,x),h[0]=m,h[1]=x;m=f.stencil_enable;m!==ia.stencil_enable&&(m?k.enable(2960):k.disable(2960),ia.stencil_enable=m);m=f.stencil_mask;m!==ia.stencil_mask&&(k.stencilMask(m),
ia.stencil_mask=m);m=Ca[0];x=Ca[1];y=Ca[2];if(m!==ra[0]||x!==ra[1]||y!==ra[2])k.stencilFunc(m,x,y),ra[0]=m,ra[1]=x,ra[2]=y;m=aa[0];x=aa[1];y=aa[2];H=aa[3];if(m!==P[0]||x!==P[1]||y!==P[2]||H!==P[3])k.stencilOpSeparate(m,x,y,H),P[0]=m,P[1]=x,P[2]=y,P[3]=H;m=r[0];x=r[1];y=r[2];H=r[3];if(m!==J[0]||x!==J[1]||y!==J[2]||H!==J[3])k.stencilOpSeparate(m,x,y,H),J[0]=m,J[1]=x,J[2]=y,J[3]=H;m=f.scissor_enable;m!==ia.scissor_enable&&(m?k.enable(3089):k.disable(3089),ia.scissor_enable=m);m=N[0];x=N[1];y=N[2];H=
N[3];if(m!==K[0]||x!==K[1]||y!==K[2]||H!==K[3])k.scissor(m,x,y,H),K[0]=m,K[1]=x,K[2]=y,K[3]=H;m=la[0];x=la[1];y=la[2];H=la[3];if(m!==qa[0]||x!==qa[1]||y!==qa[2]||H!==qa[3])k.viewport(m,x,y,H),qa[0]=m,qa[1]=x,qa[2]=y,qa[3]=H}k.disable(2929);ia.depth_enable=!1;if(m=ia.profile)u=performance.now(),L.count++;k.useProgram(e.program);D.setVAO(null);x=T.location;y=z[x];y.buffer||k.enableVertexAttribArray(x);if(y.type!==l.dtype||2!==y.size||y.buffer!==l||!1!==y.normalized||0!==y.offset||0!==y.stride)k.bindBuffer(34962,
l.buffer),k.vertexAttribPointer(x,2,l.dtype,!1,0,0),y.type=l.dtype,y.size=2,y.buffer=l,y.normalized=!1,y.offset=0,y.stride=0;x=p.call(this,Q,b,0);"number"!==typeof x&&ba.commandRaise(c,M);k.uniform1f(ca.location,x);b=b.color;X(b)&&4===b.length||ba.commandRaise(G,M);k.uniform4f(w.location,b[0],b[1],b[2],b[3]);(b=g.elements)?k.bindBuffer(34963,b.buffer.buffer):D.currentVAO&&(b=v.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,b.buffer.buffer);x=g.primitive;y=g.offset;b?k.drawElements(x,3,b.type,
y<<(b.type-5121>>1)):k.drawArrays(x,y,3);ia.dirty=!0;D.setVAO(null);m&&(L.cpuTime+=performance.now()-u)},scope:function(a,c,d){var b,h,k,e,p,t,r,m,q,n,v,u,w,y,z,A,D,E,F,P;b=f.depth_enable;f.depth_enable=!1;if(h=ia.profile)k=performance.now(),L.count++;e=g.count;g.count=3;p=H.call(this,Q,a,d);t=Y[3];Y[3]=p;r=a.color;p=Y[4];Y[4]=r;r=B.buffer;B.buffer=l;m=B.divisor;B.divisor=0;q=B.normalized;B.normalized=!1;n=B.offset;B.offset=0;v=B.size;B.size=0;u=B.state;B.state=1;w=B.stride;B.stride=0;y=B.type;B.type=
l.dtype;z=B.w;B.w=0;A=B.x;B.x=0;D=B.y;B.y=0;E=B.z;B.z=0;F=x.vert;x.vert=2;P=x.frag;x.frag=1;ia.dirty=!0;c(Q,a,d);f.depth_enable=b;h&&(L.cpuTime+=performance.now()-k);g.count=e;Y[3]=t;Y[4]=p;B.buffer=r;B.divisor=m;B.normalized=q;B.offset=n;B.size=v;B.state=u;B.stride=w;B.type=y;B.w=z;B.x=A;B.y=D;B.z=E;x.vert=F;x.frag=P;ia.dirty=!0},batch:function(c,b){var e,p,x,H;e=S.next;e!==S.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),S.cur=e);if(ia.dirty){var B,G,na;e=f.dither;
e!==ia.dither&&(e?k.enable(3024):k.disable(3024),ia.dither=e);e=f.blend_enable;e!==ia.blend_enable&&(e?k.enable(3042):k.disable(3042),ia.blend_enable=e);e=F[0];B=F[1];G=F[2];na=F[3];if(e!==d[0]||B!==d[1]||G!==d[2]||na!==d[3])k.blendColor(e,B,G,na),d[0]=e,d[1]=B,d[2]=G,d[3]=na;e=t[0];B=t[1];if(e!==a[0]||B!==a[1])k.blendEquationSeparate(e,B),a[0]=e,a[1]=B;e=Z[0];B=Z[1];G=Z[2];na=Z[3];if(e!==A[0]||B!==A[1]||G!==A[2]||na!==A[3])k.blendFuncSeparate(e,B,G,na),A[0]=e,A[1]=B,A[2]=G,A[3]=na;e=f.depth_func;
e!==ia.depth_func&&(k.depthFunc(e),ia.depth_func=e);e=W[0];B=W[1];if(e!==ea[0]||B!==ea[1])k.depthRange(e,B),ea[0]=e,ea[1]=B;e=f.depth_mask;e!==ia.depth_mask&&(k.depthMask(e),ia.depth_mask=e);e=ja[0];B=ja[1];G=ja[2];na=ja[3];if(e!==ha[0]||B!==ha[1]||G!==ha[2]||na!==ha[3])k.colorMask(e,B,G,na),ha[0]=e,ha[1]=B,ha[2]=G,ha[3]=na;e=f.cull_enable;e!==ia.cull_enable&&(e?k.enable(2884):k.disable(2884),ia.cull_enable=e);e=f.cull_face;e!==ia.cull_face&&(k.cullFace(e),ia.cull_face=e);e=f.frontFace;e!==ia.frontFace&&
(k.frontFace(e),ia.frontFace=e);e=f.lineWidth;e!==ia.lineWidth&&(k.lineWidth(e),ia.lineWidth=e);e=f.polygonOffset_enable;e!==ia.polygonOffset_enable&&(e?k.enable(32823):k.disable(32823),ia.polygonOffset_enable=e);e=R[0];B=R[1];if(e!==O[0]||B!==O[1])k.polygonOffset(e,B),O[0]=e,O[1]=B;e=f.sample_alpha;e!==ia.sample_alpha&&(e?k.enable(32926):k.disable(32926),ia.sample_alpha=e);e=f.sample_enable;e!==ia.sample_enable&&(e?k.enable(32928):k.disable(32928),ia.sample_enable=e);e=E[0];B=E[1];if(e!==h[0]||B!==
h[1])k.sampleCoverage(e,B),h[0]=e,h[1]=B;e=f.stencil_enable;e!==ia.stencil_enable&&(e?k.enable(2960):k.disable(2960),ia.stencil_enable=e);e=f.stencil_mask;e!==ia.stencil_mask&&(k.stencilMask(e),ia.stencil_mask=e);e=Ca[0];B=Ca[1];G=Ca[2];if(e!==ra[0]||B!==ra[1]||G!==ra[2])k.stencilFunc(e,B,G),ra[0]=e,ra[1]=B,ra[2]=G;e=aa[0];B=aa[1];G=aa[2];na=aa[3];if(e!==P[0]||B!==P[1]||G!==P[2]||na!==P[3])k.stencilOpSeparate(e,B,G,na),P[0]=e,P[1]=B,P[2]=G,P[3]=na;e=r[0];B=r[1];G=r[2];na=r[3];if(e!==J[0]||B!==J[1]||
G!==J[2]||na!==J[3])k.stencilOpSeparate(e,B,G,na),J[0]=e,J[1]=B,J[2]=G,J[3]=na;e=f.scissor_enable;e!==ia.scissor_enable&&(e?k.enable(3089):k.disable(3089),ia.scissor_enable=e);e=N[0];B=N[1];G=N[2];na=N[3];if(e!==K[0]||B!==K[1]||G!==K[2]||na!==K[3])k.scissor(e,B,G,na),K[0]=e,K[1]=B,K[2]=G,K[3]=na;e=la[0];B=la[1];G=la[2];na=la[3];if(e!==qa[0]||B!==qa[1]||G!==qa[2]||na!==qa[3])k.viewport(e,B,G,na),qa[0]=e,qa[1]=B,qa[2]=G,qa[3]=na}k.disable(2929);ia.depth_enable=!1;if(e=ia.profile)p=performance.now(),
L.count+=b;k.useProgram(U.program);D.setVAO(null);B=T.location;G=z[B];G.buffer||k.enableVertexAttribArray(B);if(G.type!==l.dtype||2!==G.size||G.buffer!==l||!1!==G.normalized||0!==G.offset||0!==G.stride)k.bindBuffer(34962,l.buffer),k.vertexAttribPointer(B,2,l.dtype,!1,0,0),G.type=l.dtype,G.size=2,G.buffer=l,G.normalized=!1,G.offset=0,G.stride=0;x=m.call(this,Q,H,x);"number"!==typeof x&&ba.commandRaise(u,M);k.uniform1f(ca.location,x);(B=g.elements)?k.bindBuffer(34963,B.buffer.buffer):D.currentVAO&&
(B=v.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,B.buffer.buffer);G=g.primitive;na=g.offset;for(x=0;x<b;++x){H=c[x];var Y,Ta,q,n,C,va,Ba;Y=H.color;X(Y)&&4===Y.length||ba.commandRaise(y,M);H=Y[0];q=Y[1];C=Y[2];Y=Y[3];x&&Ta===H&&n===q&&va===C&&Ba===Y||(Ta=H,n=q,va=C,Ba=Y,k.uniform4f(w.location,H,q,C,Y));B?k.drawElements(G,3,B.type,na<<(B.type-5121>>1)):k.drawArrays(G,na,3)}ia.dirty=!0;D.setVAO(null);e&&(L.cpuTime+=performance.now()-p)}}},"$13,color,position":function(b,ba,M,L,e,l,p,c,G,
H,B,U,m,u,y,ca){var w,T,z,Q,ia,g,v,S,k,X,f,x,Y,D,F,d,t,a,Z,A,ja,ha,W,ea,R,O,E,h,N,K,Ca,ra,r,J,aa;w=b.attributes;T=b.context;z=b.current;Q=b.draw;ia=b.framebuffer;g=b.gl;v=b.next;S=b.shader;k=b.uniforms;X=b.vao;f=v.blend_color;x=z.blend_color;Y=v.blend_equation;D=z.blend_equation;F=v.blend_func;d=z.blend_func;t=v.colorMask;a=z.colorMask;Z=v.depth_range;A=z.depth_range;ja=v.polygonOffset_offset;ha=z.polygonOffset_offset;W=v.sample_coverage;ea=z.sample_coverage;R=v.scissor_box;O=z.scissor_box;E=v.stencil_func;
h=z.stencil_func;N=v.stencil_opBack;K=z.stencil_opBack;Ca=v.stencil_opFront;ra=z.stencil_opFront;r=v.viewport;J=z.viewport;aa=[1,0,0,1];return{draw:function(b){var k,m,u;b=ia.next;b!==ia.cur&&(b?g.bindFramebuffer(36160,b.framebuffer):g.bindFramebuffer(36160,null),ia.cur=b);if(z.dirty){var B;b=v.dither;b!==z.dither&&(b?g.enable(3024):g.disable(3024),z.dither=b);b=v.blend_enable;b!==z.blend_enable&&(b?g.enable(3042):g.disable(3042),z.blend_enable=b);b=f[0];m=f[1];u=f[2];B=f[3];if(b!==x[0]||m!==x[1]||
u!==x[2]||B!==x[3])g.blendColor(b,m,u,B),x[0]=b,x[1]=m,x[2]=u,x[3]=B;b=Y[0];m=Y[1];if(b!==D[0]||m!==D[1])g.blendEquationSeparate(b,m),D[0]=b,D[1]=m;b=F[0];m=F[1];u=F[2];B=F[3];if(b!==d[0]||m!==d[1]||u!==d[2]||B!==d[3])g.blendFuncSeparate(b,m,u,B),d[0]=b,d[1]=m,d[2]=u,d[3]=B;b=v.depth_enable;b!==z.depth_enable&&(b?g.enable(2929):g.disable(2929),z.depth_enable=b);b=v.depth_func;b!==z.depth_func&&(g.depthFunc(b),z.depth_func=b);b=Z[0];m=Z[1];if(b!==A[0]||m!==A[1])g.depthRange(b,m),A[0]=b,A[1]=m;b=v.depth_mask;
b!==z.depth_mask&&(g.depthMask(b),z.depth_mask=b);b=t[0];m=t[1];u=t[2];B=t[3];if(b!==a[0]||m!==a[1]||u!==a[2]||B!==a[3])g.colorMask(b,m,u,B),a[0]=b,a[1]=m,a[2]=u,a[3]=B;b=v.cull_enable;b!==z.cull_enable&&(b?g.enable(2884):g.disable(2884),z.cull_enable=b);b=v.cull_face;b!==z.cull_face&&(g.cullFace(b),z.cull_face=b);b=v.frontFace;b!==z.frontFace&&(g.frontFace(b),z.frontFace=b);b=v.polygonOffset_enable;b!==z.polygonOffset_enable&&(b?g.enable(32823):g.disable(32823),z.polygonOffset_enable=b);b=ja[0];
m=ja[1];if(b!==ha[0]||m!==ha[1])g.polygonOffset(b,m),ha[0]=b,ha[1]=m;b=v.sample_alpha;b!==z.sample_alpha&&(b?g.enable(32926):g.disable(32926),z.sample_alpha=b);b=v.sample_enable;b!==z.sample_enable&&(b?g.enable(32928):g.disable(32928),z.sample_enable=b);b=W[0];m=W[1];if(b!==ea[0]||m!==ea[1])g.sampleCoverage(b,m),ea[0]=b,ea[1]=m;b=v.stencil_enable;b!==z.stencil_enable&&(b?g.enable(2960):g.disable(2960),z.stencil_enable=b);b=v.stencil_mask;b!==z.stencil_mask&&(g.stencilMask(b),z.stencil_mask=b);b=E[0];
m=E[1];u=E[2];if(b!==h[0]||m!==h[1]||u!==h[2])g.stencilFunc(b,m,u),h[0]=b,h[1]=m,h[2]=u;b=Ca[0];m=Ca[1];u=Ca[2];B=Ca[3];if(b!==ra[0]||m!==ra[1]||u!==ra[2]||B!==ra[3])g.stencilOpSeparate(b,m,u,B),ra[0]=b,ra[1]=m,ra[2]=u,ra[3]=B;b=N[0];m=N[1];u=N[2];B=N[3];if(b!==K[0]||m!==K[1]||u!==K[2]||B!==K[3])g.stencilOpSeparate(b,m,u,B),K[0]=b,K[1]=m,K[2]=u,K[3]=B;b=v.scissor_enable;b!==z.scissor_enable&&(b?g.enable(3089):g.disable(3089),z.scissor_enable=b);b=R[0];m=R[1];u=R[2];B=R[3];if(b!==O[0]||m!==O[1]||u!==
O[2]||B!==O[3])g.scissor(b,m,u,B),O[0]=b,O[1]=m,O[2]=u,O[3]=B;b=r[0];m=r[1];u=r[2];B=r[3];if(b!==J[0]||m!==J[1]||u!==J[2]||B!==J[3])g.viewport(b,m,u,B),J[0]=b,J[1]=m,J[2]=u,J[3]=B}g.lineWidth(1);z.lineWidth=1;if(b=z.profile)k=performance.now(),L.count++;g.useProgram(e.program);X.setVAO(null);m=ca.location;u=w[m];u.buffer||g.enableVertexAttribArray(m);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)g.bindBuffer(34962,l.buffer),g.vertexAttribPointer(m,2,
l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;g.uniform4f(y.location,1,0,0,1);p&&g.bindBuffer(34963,p.buffer.buffer);m=p.primType;u=p.vertCount-0;0<=u||ba.commandRaise(c,M);u&&(g.drawElements(m,u,p.type,0<<(p.type-5121>>1)),z.dirty=!0,X.setVAO(null),b&&(L.cpuTime+=performance.now()-k))},scope:function(a,c,b){var d,f,g,h,e,m,p,r,t,u,x,q,n,w,y,A,D,E,F,I,J,K;d=v.lineWidth;v.lineWidth=1;if(f=z.profile)g=performance.now(),L.count++;h=Q.elements;Q.elements=G;e=
Q.offset;Q.offset=0;m=G.vertCount-0;0<=m||ba.commandRaise(H,M);p=Q.count;Q.count=m;r=G.primType;m=Q.primitive;Q.primitive=r;r=k[3];k[3]=aa;t=B.buffer;B.buffer=l;u=B.divisor;B.divisor=0;x=B.normalized;B.normalized=!1;q=B.offset;B.offset=0;n=B.size;B.size=0;w=B.state;B.state=1;y=B.stride;B.stride=0;A=B.type;B.type=l.dtype;D=B.w;B.w=0;E=B.x;B.x=0;F=B.y;B.y=0;I=B.z;B.z=0;J=S.vert;S.vert=2;K=S.frag;S.frag=1;z.dirty=!0;c(T,a,b);v.lineWidth=d;f&&(L.cpuTime+=performance.now()-g);Q.elements=h;Q.offset=e;Q.count=
p;Q.primitive=m;k[3]=r;B.buffer=t;B.divisor=u;B.normalized=x;B.offset=q;B.size=n;B.state=w;B.stride=y;B.type=A;B.w=D;B.x=E;B.y=F;B.z=I;S.vert=J;S.frag=K;z.dirty=!0},batch:function(c,b){var e,k,p;e=ia.next;e!==ia.cur&&(e?g.bindFramebuffer(36160,e.framebuffer):g.bindFramebuffer(36160,null),ia.cur=e);if(z.dirty){var B,G;e=v.dither;e!==z.dither&&(e?g.enable(3024):g.disable(3024),z.dither=e);e=v.blend_enable;e!==z.blend_enable&&(e?g.enable(3042):g.disable(3042),z.blend_enable=e);e=f[0];p=f[1];B=f[2];G=
f[3];if(e!==x[0]||p!==x[1]||B!==x[2]||G!==x[3])g.blendColor(e,p,B,G),x[0]=e,x[1]=p,x[2]=B,x[3]=G;e=Y[0];p=Y[1];if(e!==D[0]||p!==D[1])g.blendEquationSeparate(e,p),D[0]=e,D[1]=p;e=F[0];p=F[1];B=F[2];G=F[3];if(e!==d[0]||p!==d[1]||B!==d[2]||G!==d[3])g.blendFuncSeparate(e,p,B,G),d[0]=e,d[1]=p,d[2]=B,d[3]=G;e=v.depth_enable;e!==z.depth_enable&&(e?g.enable(2929):g.disable(2929),z.depth_enable=e);e=v.depth_func;e!==z.depth_func&&(g.depthFunc(e),z.depth_func=e);e=Z[0];p=Z[1];if(e!==A[0]||p!==A[1])g.depthRange(e,
p),A[0]=e,A[1]=p;e=v.depth_mask;e!==z.depth_mask&&(g.depthMask(e),z.depth_mask=e);e=t[0];p=t[1];B=t[2];G=t[3];if(e!==a[0]||p!==a[1]||B!==a[2]||G!==a[3])g.colorMask(e,p,B,G),a[0]=e,a[1]=p,a[2]=B,a[3]=G;e=v.cull_enable;e!==z.cull_enable&&(e?g.enable(2884):g.disable(2884),z.cull_enable=e);e=v.cull_face;e!==z.cull_face&&(g.cullFace(e),z.cull_face=e);e=v.frontFace;e!==z.frontFace&&(g.frontFace(e),z.frontFace=e);e=v.polygonOffset_enable;e!==z.polygonOffset_enable&&(e?g.enable(32823):g.disable(32823),z.polygonOffset_enable=
e);e=ja[0];p=ja[1];if(e!==ha[0]||p!==ha[1])g.polygonOffset(e,p),ha[0]=e,ha[1]=p;e=v.sample_alpha;e!==z.sample_alpha&&(e?g.enable(32926):g.disable(32926),z.sample_alpha=e);e=v.sample_enable;e!==z.sample_enable&&(e?g.enable(32928):g.disable(32928),z.sample_enable=e);e=W[0];p=W[1];if(e!==ea[0]||p!==ea[1])g.sampleCoverage(e,p),ea[0]=e,ea[1]=p;e=v.stencil_enable;e!==z.stencil_enable&&(e?g.enable(2960):g.disable(2960),z.stencil_enable=e);e=v.stencil_mask;e!==z.stencil_mask&&(g.stencilMask(e),z.stencil_mask=
e);e=E[0];p=E[1];B=E[2];if(e!==h[0]||p!==h[1]||B!==h[2])g.stencilFunc(e,p,B),h[0]=e,h[1]=p,h[2]=B;e=Ca[0];p=Ca[1];B=Ca[2];G=Ca[3];if(e!==ra[0]||p!==ra[1]||B!==ra[2]||G!==ra[3])g.stencilOpSeparate(e,p,B,G),ra[0]=e,ra[1]=p,ra[2]=B,ra[3]=G;e=N[0];p=N[1];B=N[2];G=N[3];if(e!==K[0]||p!==K[1]||B!==K[2]||G!==K[3])g.stencilOpSeparate(e,p,B,G),K[0]=e,K[1]=p,K[2]=B,K[3]=G;e=v.scissor_enable;e!==z.scissor_enable&&(e?g.enable(3089):g.disable(3089),z.scissor_enable=e);e=R[0];p=R[1];B=R[2];G=R[3];if(e!==O[0]||p!==
O[1]||B!==O[2]||G!==O[3])g.scissor(e,p,B,G),O[0]=e,O[1]=p,O[2]=B,O[3]=G;e=r[0];p=r[1];B=r[2];G=r[3];if(e!==J[0]||p!==J[1]||B!==J[2]||G!==J[3])g.viewport(e,p,B,G),J[0]=e,J[1]=p,J[2]=B,J[3]=G}g.lineWidth(1);z.lineWidth=1;if(e=z.profile)k=performance.now(),L.count+=b;g.useProgram(U.program);X.setVAO(null);p=ca.location;B=w[p];B.buffer||g.enableVertexAttribArray(p);if(B.type!==l.dtype||2!==B.size||B.buffer!==l||!1!==B.normalized||0!==B.offset||0!==B.stride)g.bindBuffer(34962,l.buffer),g.vertexAttribPointer(p,
2,l.dtype,!1,0,0),B.type=l.dtype,B.size=2,B.buffer=l,B.normalized=!1,B.offset=0,B.stride=0;g.uniform4f(y.location,1,0,0,1);m&&g.bindBuffer(34963,m.buffer.buffer);B=m.primType;G=m.vertCount-0;0<=G||ba.commandRaise(u,M);for(p=0;p<b;++p)G&&g.drawElements(B,G,m.type,0<<(m.type-5121>>1));z.dirty=!0;X.setVAO(null);e&&(L.cpuTime+=performance.now()-k)}}},"$20,mouse,position,t,texture":function(b,ba,M,L,e,l,p,c,G,H,B,U,m,u,y,ca,w,T,z,Q,Z,g,v,S,k){var X,f,x,Y,D,F,d,t,a,ha,A,ja,ab,W,ea,R,O,E,h,N,K,Ca,ra,r,J,
aa,P,la,qa,za,wa,fa,Aa,ka,pa,ya;X=b.attributes;f=b.context;x=b.current;Y=b.draw;D=b.elements;F=b.framebuffer;d=b.gl;t=b.isArrayLike;a=b.next;ha=b.shader;A=b.uniforms;ja=b.vao;ab=a.blend_color;W=x.blend_color;ea=a.blend_equation;R=x.blend_equation;O=a.blend_func;E=x.blend_func;h=a.colorMask;N=x.colorMask;K=a.depth_range;Ca=x.depth_range;ra=a.polygonOffset_offset;r=x.polygonOffset_offset;J=a.sample_coverage;aa=x.sample_coverage;P=a.scissor_box;la=x.scissor_box;qa=a.stencil_func;za=x.stencil_func;wa=
a.stencil_opBack;fa=x.stencil_opBack;Aa=a.stencil_opFront;ka=x.stencil_opFront;pa=a.viewport;ya=x.viewport;return{draw:function(b){var m,u,w,q;m=F.next;m!==F.cur&&(m?d.bindFramebuffer(36160,m.framebuffer):d.bindFramebuffer(36160,null),F.cur=m);if(x.dirty){var n;m=a.dither;m!==x.dither&&(m?d.enable(3024):d.disable(3024),x.dither=m);m=a.blend_enable;m!==x.blend_enable&&(m?d.enable(3042):d.disable(3042),x.blend_enable=m);m=ab[0];w=ab[1];q=ab[2];n=ab[3];if(m!==W[0]||w!==W[1]||q!==W[2]||n!==W[3])d.blendColor(m,
w,q,n),W[0]=m,W[1]=w,W[2]=q,W[3]=n;m=ea[0];w=ea[1];if(m!==R[0]||w!==R[1])d.blendEquationSeparate(m,w),R[0]=m,R[1]=w;m=O[0];w=O[1];q=O[2];n=O[3];if(m!==E[0]||w!==E[1]||q!==E[2]||n!==E[3])d.blendFuncSeparate(m,w,q,n),E[0]=m,E[1]=w,E[2]=q,E[3]=n;m=a.depth_enable;m!==x.depth_enable&&(m?d.enable(2929):d.disable(2929),x.depth_enable=m);m=a.depth_func;m!==x.depth_func&&(d.depthFunc(m),x.depth_func=m);m=K[0];w=K[1];if(m!==Ca[0]||w!==Ca[1])d.depthRange(m,w),Ca[0]=m,Ca[1]=w;m=a.depth_mask;m!==x.depth_mask&&
(d.depthMask(m),x.depth_mask=m);m=h[0];w=h[1];q=h[2];n=h[3];if(m!==N[0]||w!==N[1]||q!==N[2]||n!==N[3])d.colorMask(m,w,q,n),N[0]=m,N[1]=w,N[2]=q,N[3]=n;m=a.cull_enable;m!==x.cull_enable&&(m?d.enable(2884):d.disable(2884),x.cull_enable=m);m=a.cull_face;m!==x.cull_face&&(d.cullFace(m),x.cull_face=m);m=a.frontFace;m!==x.frontFace&&(d.frontFace(m),x.frontFace=m);m=a.lineWidth;m!==x.lineWidth&&(d.lineWidth(m),x.lineWidth=m);m=a.polygonOffset_enable;m!==x.polygonOffset_enable&&(m?d.enable(32823):d.disable(32823),
x.polygonOffset_enable=m);m=ra[0];w=ra[1];if(m!==r[0]||w!==r[1])d.polygonOffset(m,w),r[0]=m,r[1]=w;m=a.sample_alpha;m!==x.sample_alpha&&(m?d.enable(32926):d.disable(32926),x.sample_alpha=m);m=a.sample_enable;m!==x.sample_enable&&(m?d.enable(32928):d.disable(32928),x.sample_enable=m);m=J[0];w=J[1];if(m!==aa[0]||w!==aa[1])d.sampleCoverage(m,w),aa[0]=m,aa[1]=w;m=a.stencil_enable;m!==x.stencil_enable&&(m?d.enable(2960):d.disable(2960),x.stencil_enable=m);m=a.stencil_mask;m!==x.stencil_mask&&(d.stencilMask(m),
x.stencil_mask=m);m=qa[0];w=qa[1];q=qa[2];if(m!==za[0]||w!==za[1]||q!==za[2])d.stencilFunc(m,w,q),za[0]=m,za[1]=w,za[2]=q;m=Aa[0];w=Aa[1];q=Aa[2];n=Aa[3];if(m!==ka[0]||w!==ka[1]||q!==ka[2]||n!==ka[3])d.stencilOpSeparate(m,w,q,n),ka[0]=m,ka[1]=w,ka[2]=q,ka[3]=n;m=wa[0];w=wa[1];q=wa[2];n=wa[3];if(m!==fa[0]||w!==fa[1]||q!==fa[2]||n!==fa[3])d.stencilOpSeparate(m,w,q,n),fa[0]=m,fa[1]=w,fa[2]=q,fa[3]=n;m=a.scissor_enable;m!==x.scissor_enable&&(m?d.enable(3089):d.disable(3089),x.scissor_enable=m);m=P[0];
w=P[1];q=P[2];n=P[3];if(m!==la[0]||w!==la[1]||q!==la[2]||n!==la[3])d.scissor(m,w,q,n),la[0]=m,la[1]=w,la[2]=q,la[3]=n;m=pa[0];w=pa[1];q=pa[2];n=pa[3];if(m!==ya[0]||w!==ya[1]||q!==ya[2]||n!==ya[3])d.viewport(m,w,q,n),ya[0]=m,ya[1]=w,ya[2]=q,ya[3]=n;x.dirty=!1}if(m=x.profile)u=performance.now(),L.count++;d.useProgram(e.program);ja.setVAO(null);w=v.location;q=X[w];q.buffer||d.enableVertexAttribArray(w);if(q.type!==l.dtype||2!==q.size||q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)d.bindBuffer(34962,
l.buffer),d.vertexAttribPointer(w,2,l.dtype,!1,0,0),q.type=l.dtype,q.size=2,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;w=p.call(this,f,b,0);t(w)&&2===w.length||ba.commandRaise(c,M);d.uniform2f(g.location,w[0],w[1]);b=G.call(this,f,b,0);"number"!==typeof b&&ba.commandRaise(H,M);d.uniform1f(S.location,b);d.uniform1i(k.location,B.bind());(b=Y.elements)?d.bindBuffer(34963,b.buffer.buffer):ja.currentVAO&&(b=D.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,b.buffer.buffer);w=Y.primitive;
q=Y.offset;b?d.drawElements(w,3,b.type,q<<(b.type-5121>>1)):d.drawArrays(w,q,3);ja.setVAO(null);m&&(L.cpuTime+=performance.now()-u);B.unbind()},scope:function(a,b,c){var d,e,g,h,k,p,r,t,v,w,z,B,D,E,F,G,H,J,K,M;if(d=x.profile)e=performance.now(),L.count++;g=Y.count;Y.count=3;h=U.call(this,f,a,c);k=A[3];A[3]=h;p=m.call(this,f,a,c);h=A[4];A[4]=p;p=A[5];A[5]=u;r=y.buffer;y.buffer=l;t=y.divisor;y.divisor=0;v=y.normalized;y.normalized=!1;w=y.offset;y.offset=0;z=y.size;y.size=0;B=y.state;y.state=1;D=y.stride;
y.stride=0;E=y.type;y.type=l.dtype;F=y.w;y.w=0;G=y.x;y.x=0;H=y.y;y.y=0;J=y.z;y.z=0;K=ha.vert;ha.vert=2;M=ha.frag;ha.frag=1;b(f,a,c);d&&(L.cpuTime+=performance.now()-e);Y.count=g;A[3]=k;A[4]=h;A[5]=p;y.buffer=r;y.divisor=t;y.normalized=v;y.offset=w;y.size=z;y.state=B;y.stride=D;y.type=E;y.w=F;y.x=G;y.y=H;y.z=J;ha.vert=K;ha.frag=M},batch:function(b,c){var e,m,p;e=F.next;e!==F.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),F.cur=e);if(x.dirty){var n,u,y;e=a.dither;e!==x.dither&&
(e?d.enable(3024):d.disable(3024),x.dither=e);e=a.blend_enable;e!==x.blend_enable&&(e?d.enable(3042):d.disable(3042),x.blend_enable=e);e=ab[0];n=ab[1];u=ab[2];y=ab[3];if(e!==W[0]||n!==W[1]||u!==W[2]||y!==W[3])d.blendColor(e,n,u,y),W[0]=e,W[1]=n,W[2]=u,W[3]=y;e=ea[0];n=ea[1];if(e!==R[0]||n!==R[1])d.blendEquationSeparate(e,n),R[0]=e,R[1]=n;e=O[0];n=O[1];u=O[2];y=O[3];if(e!==E[0]||n!==E[1]||u!==E[2]||y!==E[3])d.blendFuncSeparate(e,n,u,y),E[0]=e,E[1]=n,E[2]=u,E[3]=y;e=a.depth_enable;e!==x.depth_enable&&
(e?d.enable(2929):d.disable(2929),x.depth_enable=e);e=a.depth_func;e!==x.depth_func&&(d.depthFunc(e),x.depth_func=e);e=K[0];n=K[1];if(e!==Ca[0]||n!==Ca[1])d.depthRange(e,n),Ca[0]=e,Ca[1]=n;e=a.depth_mask;e!==x.depth_mask&&(d.depthMask(e),x.depth_mask=e);e=h[0];n=h[1];u=h[2];y=h[3];if(e!==N[0]||n!==N[1]||u!==N[2]||y!==N[3])d.colorMask(e,n,u,y),N[0]=e,N[1]=n,N[2]=u,N[3]=y;e=a.cull_enable;e!==x.cull_enable&&(e?d.enable(2884):d.disable(2884),x.cull_enable=e);e=a.cull_face;e!==x.cull_face&&(d.cullFace(e),
x.cull_face=e);e=a.frontFace;e!==x.frontFace&&(d.frontFace(e),x.frontFace=e);e=a.lineWidth;e!==x.lineWidth&&(d.lineWidth(e),x.lineWidth=e);e=a.polygonOffset_enable;e!==x.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),x.polygonOffset_enable=e);e=ra[0];n=ra[1];if(e!==r[0]||n!==r[1])d.polygonOffset(e,n),r[0]=e,r[1]=n;e=a.sample_alpha;e!==x.sample_alpha&&(e?d.enable(32926):d.disable(32926),x.sample_alpha=e);e=a.sample_enable;e!==x.sample_enable&&(e?d.enable(32928):d.disable(32928),x.sample_enable=
e);e=J[0];n=J[1];if(e!==aa[0]||n!==aa[1])d.sampleCoverage(e,n),aa[0]=e,aa[1]=n;e=a.stencil_enable;e!==x.stencil_enable&&(e?d.enable(2960):d.disable(2960),x.stencil_enable=e);e=a.stencil_mask;e!==x.stencil_mask&&(d.stencilMask(e),x.stencil_mask=e);e=qa[0];n=qa[1];u=qa[2];if(e!==za[0]||n!==za[1]||u!==za[2])d.stencilFunc(e,n,u),za[0]=e,za[1]=n,za[2]=u;e=Aa[0];n=Aa[1];u=Aa[2];y=Aa[3];if(e!==ka[0]||n!==ka[1]||u!==ka[2]||y!==ka[3])d.stencilOpSeparate(e,n,u,y),ka[0]=e,ka[1]=n,ka[2]=u,ka[3]=y;e=wa[0];n=wa[1];
u=wa[2];y=wa[3];if(e!==fa[0]||n!==fa[1]||u!==fa[2]||y!==fa[3])d.stencilOpSeparate(e,n,u,y),fa[0]=e,fa[1]=n,fa[2]=u,fa[3]=y;e=a.scissor_enable;e!==x.scissor_enable&&(e?d.enable(3089):d.disable(3089),x.scissor_enable=e);e=P[0];n=P[1];u=P[2];y=P[3];if(e!==la[0]||n!==la[1]||u!==la[2]||y!==la[3])d.scissor(e,n,u,y),la[0]=e,la[1]=n,la[2]=u,la[3]=y;e=pa[0];n=pa[1];u=pa[2];y=pa[3];if(e!==ya[0]||n!==ya[1]||u!==ya[2]||y!==ya[3])d.viewport(e,n,u,y),ya[0]=e,ya[1]=n,ya[2]=u,ya[3]=y;x.dirty=!1}if(e=x.profile)m=
performance.now(),L.count+=c;d.useProgram(ca.program);ja.setVAO(null);n=v.location;u=X[n];u.buffer||d.enableVertexAttribArray(n);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)d.bindBuffer(34962,l.buffer),d.vertexAttribPointer(n,2,l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;n=w.call(this,f,void 0,p);t(n)&&2===n.length||ba.commandRaise(T,M);d.uniform2f(g.location,n[0],n[1]);p=z.call(this,f,void 0,p);"number"!==
typeof p&&ba.commandRaise(Q,M);d.uniform1f(S.location,p);d.uniform1i(k.location,Z.bind());(n=Y.elements)?d.bindBuffer(34963,n.buffer.buffer):ja.currentVAO&&(n=D.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,n.buffer.buffer);u=Y.primitive;y=Y.offset;for(p=0;p<c;++p)n?d.drawElements(u,3,n.type,y<<(n.type-5121>>1)):d.drawArrays(u,y,3);Z.unbind();ja.setVAO(null);e&&(L.cpuTime+=performance.now()-m)}}}}},{}],25:[function(Z,ha,ab){var b=Z("./sorted-object-keys");ha.exports=function(ba,M){for(var L=
b(M),e=0;e<L.length;++e)ba[L[e]]=M[L[e]];return ba}},{"./sorted-object-keys":34}],26:[function(Z,ha,ab){function b(b,e,l,p,c,G){for(var H=0;H<e;++H)for(var B=b[H],M=0;M<l;++M)for(var m=B[M],u=0;u<p;++u)c[G++]=m[u]}function ba(L,e,l,p,c){for(var G=1,H=l+1;H<e.length;++H)G*=e[H];var B=e[l];if(4===e.length-l){var M=e[l+1],m=e[l+2];e=e[l+3];for(H=0;H<B;++H)b(L[H],M,m,e,p,c),c+=G}else for(H=0;H<B;++H)ba(L[H],e,l+1,p,c),c+=G}var M=Z("./pool");ha.exports={shape:function(b){for(var e=[];b.length;b=b[0])e.push(b.length);
return e},flatten:function(L,e,l,p){var c=1;if(e.length)for(var G=0;G<e.length;++G)c*=e[G];else c=0;l=p||M.allocType(l,c);switch(e.length){case 0:break;case 1:p=e[0];for(e=0;e<p;++e)l[e]=L[e];break;case 2:p=e[0];e=e[1];for(G=c=0;G<p;++G)for(var H=L[G],B=0;B<e;++B)l[c++]=H[B];break;case 3:b(L,e[0],e[1],e[2],l,0);break;default:ba(L,e,0,l,0)}return l}}},{"./pool":32}],27:[function(Z,ha,ab){var b=Z("./is-typed-array");ha.exports=function(ba){return Array.isArray(ba)||b(ba)}},{"./is-typed-array":30}],
28:[function(Z,ha,ab){var b=Z("./is-typed-array");ha.exports=function(ba){return!!ba&&"object"===typeof ba&&Array.isArray(ba.shape)&&Array.isArray(ba.stride)&&"number"===typeof ba.offset&&ba.shape.length===ba.stride.length&&(Array.isArray(ba.data)||b(ba.data))}},{"./is-typed-array":30}],29:[function(Z,ha,ab){ha.exports=function(b){return!(b&b-1)&&!!b}},{}],30:[function(Z,ha,ab){ha.exports=function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||
b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Uint8ClampedArray}},{}],31:[function(Z,ha,ab){ha.exports=function(b,ba){for(var M=Array(b),L=0;L<b;++L)M[L]=ba(L);return M}},{}],32:[function(Z,ha,ab){function b(b){var e,l;e=(65535<b)<<4;b>>>=e;l=(255<b)<<3;b>>>=l;e|=l;l=(15<b)<<2;b>>>=l;e|=l;l=(3<b)<<1;return e|l|b>>>l>>1}function ba(){function L(e){a:{for(var c=16;268435456>=c;c*=16)if(e<=c){e=c;break a}e=0}c=l[b(e)>>2];return 0<
c.length?c.pop():new ArrayBuffer(e)}function e(e){l[b(e.byteLength)>>2].push(e)}var l=M(8,function(){return[]});return{alloc:L,free:e,allocType:function(b,c){var e=null;switch(b){case 5120:e=new Int8Array(L(c),0,c);break;case 5121:e=new Uint8Array(L(c),0,c);break;case 5122:e=new Int16Array(L(2*c),0,c);break;case 5123:e=new Uint16Array(L(2*c),0,c);break;case 5124:e=new Int32Array(L(4*c),0,c);break;case 5125:e=new Uint32Array(L(4*c),0,c);break;case 5126:e=new Float32Array(L(4*c),0,c);break;default:return null}return e.length!==
c?e.subarray(0,c):e},freeType:function(b){e(b.buffer)}}}var M=Z("./loop");Z=ba();Z.zero=ba();ha.exports=Z},{"./loop":31}],33:[function(Z,ha,ab){ha.exports={next:"function"===typeof requestAnimationFrame?function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:clearTimeout}},{}],34:[function(Z,ha,ab){ha.exports=function(b){return Object.keys(b).sort()}},{}],35:[function(Z,ha,ab){var b=
Z("./pool"),ba=new Float32Array(1),M=new Uint32Array(ba.buffer);ha.exports=function(L){for(var e=b.allocType(5123,L.length),l=0;l<L.length;++l)if(isNaN(L[l]))e[l]=65535;else if(Infinity===L[l])e[l]=31744;else if(-Infinity===L[l])e[l]=64512;else{ba[0]=L[l];var p=M[0],c=p>>>31<<15,G=(p<<1>>>24)-127,p=p>>13&1023;e[l]=-24>G?c:-14>G?c+(p+1024>>-14-G):15<G?c+31744:c+(G+15<<10)+p}return e}},{"./pool":32}],36:[function(Z,ha,ab){var b=Z("./sorted-object-keys");ha.exports=function(ba){return b(ba).map(function(b){return ba[b]})}},
{"./sorted-object-keys":34}],37:[function(Z,ha,ab){function b(b,c,e){function H(){var c=window.innerWidth,l=window.innerHeight;b!==document.body&&(l=B.getBoundingClientRect(),c=l.right-l.left,l=l.bottom-l.top);B.width=e*c;B.height=e*l}var B=document.createElement("canvas");l(B.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(B);b===document.body&&(B.style.position="absolute",l(b.style,{margin:0,padding:0}));var L;b!==document.body&&"function"===typeof ResizeObserver?
(L=new ResizeObserver(function(){setTimeout(H)}),L.observe(b)):window.addEventListener("resize",H,!1);H();return{canvas:B,onDestroy:function(){L?L.disconnect():window.removeEventListener("resize",H);b.removeChild(B)}}}function ba(b,c){function e(l){try{return b.getContext(l,c)}catch(B){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function M(b){if("string"===typeof b)return b.split();e(Array.isArray(b),"invalid extension array");return b}function L(b){return"string"===
typeof b?(e("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(b)):b}var e=Z("./util/check"),l=Z("./util/extend");ha.exports=function(l){var c=l||{},G,H,B,U;l={};var m=[],u=[],y="undefined"===typeof window?1:window.devicePixelRatio,ca=!1,w=function(b){b&&e.raise(b)},T=function(){};"string"===typeof c?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),G=document.querySelector(c),e(G,"invalid query string for element")):"object"===
typeof c?"string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?G=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(U=c,B=U.canvas):(e.constructor(c),"gl"in c?U=c.gl:"canvas"in c?B=L(c.canvas):"container"in c&&(H=L(c.container)),"attributes"in c&&(l=c.attributes,e.type(l,"object","invalid context attributes")),"extensions"in c&&(m=M(c.extensions)),"optionalExtensions"in c&&(u=M(c.optionalExtensions)),"onDone"in c&&(e.type(c.onDone,
"function","invalid or missing onDone callback"),w=c.onDone),"profile"in c&&(ca=!!c.profile),"pixelRatio"in c&&(y=+c.pixelRatio,e(0<y,"invalid pixel ratio"))):e.raise("invalid arguments to regl");G&&("canvas"===G.nodeName.toLowerCase()?B=G:H=G);if(!U){if(!B){e("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");G=b(H||document.body,w,y);if(!G)return null;B=G.canvas;T=G.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0);U=ba(B,l)}return U?
{gl:U,canvas:B,container:H,extensions:m,optionalExtensions:u,pixelRatio:y,profile:ca,onDone:w,onDestroy:T}:(T(),w("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(Z,ha,ab){function b(b,c){for(var e=0;e<b.length;++e)if(b[e]===c)return e;return-1}var ba=Z("./lib/util/check"),M=Z("./lib/util/extend"),L=Z("./lib/dynamic"),e=Z("./lib/util/raf"),l=Z("./lib/util/clock"),p=Z("./lib/strings"),c=Z("./lib/webgl"),
G=Z("./lib/extension"),H=Z("./lib/limits"),B=Z("./lib/buffer"),U=Z("./lib/elements"),m=Z("./lib/texture"),u=Z("./lib/renderbuffer"),y=Z("./lib/framebuffer"),ca=Z("./lib/attribute"),w=Z("./lib/shader"),T=Z("./lib/read"),z=Z("./lib/core"),Q=Z("./lib/stats"),ia=Z("./lib/timer");ha.exports=function(g){function v(){if(0===Aa.length)O&&O.update(),Ja=null;else{Ja=e.next(v);d();for(var a=Aa.length-1;0<=a;--a){var b=Aa[a];b&&b(K,null,0)}Z.flush();O&&O.update()}}function S(){!Ja&&0<Aa.length&&(Ja=e.next(v))}
function k(){Ja&&(e.cancel(v),Ja=null)}function X(a){a.preventDefault();ha=!0;k();ka.forEach(function(a){a()})}function f(a){Z.getError();ha=!1;ab.restore();aa.restore();ra.restore();P.restore();la.restore();qa.restore();J.restore();O&&O.restore();za.procs.refresh();S();pa.forEach(function(a){a()})}function x(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(L.isDynamic(f))e[b]=L.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(L.isDynamic(f[g])){e[b]=
L.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}ba(!!a,"invalid args to regl({...})");ba.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=M({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=za.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,p=[];return M(function(a,b){var d;ha&&ba.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function Y(a,b){var c=0;za.procs.poll();var d=b.color;d&&(Z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Z.clearDepth(+b.depth),c|=256);"stencil"in b&&(Z.clearStencil(b.stencil|0),c|=1024);ba(!!c,"called regl.clear with no buffer specified");
Z.clear(c)}function D(a){ba.type(a,"function","regl.frame() callback must be a function");Aa.push(a);S();return{cancel:function(){function c(){var a=b(Aa,c);Aa[a]=Aa[Aa.length-1];--Aa.length;0>=Aa.length&&k()}var d=b(Aa,a);ba(0<=d,"cannot cancel a frame twice");Aa[d]=c}}}function F(){var a=wa.viewport,b=wa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;K.viewportWidth=K.framebufferWidth=K.drawingBufferWidth=a[2]=b[2]=Z.drawingBufferWidth;K.viewportHeight=K.framebufferHeight=K.drawingBufferHeight=a[3]=b[3]=Z.drawingBufferHeight}
function d(){K.tick+=1;K.time=a();F();za.procs.poll()}function t(){P.refresh();F();za.procs.refresh();O&&O.update()}function a(){return(l()-E)/1E3}console.log("REGL args are:",g);g=c(g);console.log("REGL configs are:",g);if(!g)return null;var Z=g.gl,A=Z.getContextAttributes(),ha=Z.isContextLost(),ab=G(Z,g);if(!ab)return null;var W=p(),ea=Q(),R=ab.extensions,O=ia(Z,R),E=l(),h=Z.drawingBufferWidth,N=Z.drawingBufferHeight,K={tick:0,time:0,viewportWidth:h,viewportHeight:N,framebufferWidth:h,framebufferHeight:N,
drawingBufferWidth:h,drawingBufferHeight:N,pixelRatio:g.pixelRatio},h={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ca=H(Z,R),ra=B(Z,ea,g,function(a){return J.destroyBuffer(a)}),r=U(Z,R,ra,ea),J=ca(Z,R,Ca,ea,ra,r,h),aa=w(Z,W,ea,g),P=m(Z,R,Ca,function(){za.procs.poll()},K,ea,g),la=u(Z,R,Ca,ea,g),qa=y(Z,R,Ca,P,la,ea),za=z(Z,W,R,Ca,ra,r,P,qa,{},J,aa,h,K,O,g),W=T(Z,qa,za.procs.poll,K,A,R,Ca),wa=za.next,fa=Z.canvas,Aa=[],ka=[],pa=[],ya=[g.onDestroy],Ja=null;fa&&(fa.addEventListener("webglcontextlost",
X,!1),fa.addEventListener("webglcontextrestored",f,!1));var na=qa.setFBO=x({framebuffer:L.define.call(null,1,"framebuffer")});t();A=M(x,{clear:function(a){ba("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)na(M({framebuffer:a.framebuffer.faces[b]},a),Y);else na(a,Y);else Y(null,a)},prop:L.define.bind(null,1),context:L.define.bind(null,2),"this":L.define.bind(null,3),draw:x({}),buffer:function(a){return ra.create(a,
34962,!1,!1)},elements:function(a){return r.create(a,!1)},texture:P.create2D,cube:P.createCube,renderbuffer:la.create,framebuffer:qa.create,framebufferCube:qa.createCube,vao:J.createVAO,attributes:A,frame:D,on:function(a,b){ba.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return D(b);case "lost":c=ka;break;case "restore":c=pa;break;case "destroy":c=ya;break;default:ba.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Ca,hasExtension:function(a){return 0<=Ca.extensions.indexOf(a.toLowerCase())},read:W,destroy:function(){Aa.length=0;k();fa&&(fa.removeEventListener("webglcontextlost",X),fa.removeEventListener("webglcontextrestored",f));aa.clear();qa.clear();la.clear();J.clear();P.clear();r.clear();ra.clear();O&&O.clear();ya.forEach(function(a){a()})},_gl:Z,_refresh:t,poll:function(){d();O&&O.update()},now:a,stats:ea});g.onDone(null,A);return A}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

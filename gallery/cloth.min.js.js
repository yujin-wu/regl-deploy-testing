var $jscomp={scope:{},getGlobal:function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global?global:d}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(d){return"jscomp_symbol_"+d+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(d){$jscomp.initSymbolIterator();if(d[$jscomp.global.Symbol.iterator])return d[$jscomp.global.Symbol.iterator]();var e=0;return{next:function(){return e==d.length?{done:!0}:{done:!1,value:d[e++]}}}};
$jscomp.arrayFromIterator=function(d){for(var e,r=[];!(e=d.next()).done;)r.push(e.value);return r};$jscomp.arrayFromIterable=function(d){return d instanceof Array?d:$jscomp.arrayFromIterator($jscomp.makeIterator(d))};
$jscomp.inherits=function(d,e){function r(){}r.prototype=e.prototype;d.prototype=new r;d.prototype.constructor=d;for(var a in e)if($jscomp.global.Object.defineProperties){var c=$jscomp.global.Object.getOwnPropertyDescriptor(e,a);c&&$jscomp.global.Object.defineProperty(d,a,c)}else d[a]=e[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(d,e){d instanceof String&&(d=String(d));var r=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},c=(a.next=function(){if(r<d.length){var a=r++;return{value:e(a,d[a]),done:!1}}c.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return c},a);return c};
$jscomp.array.findInternal_=function(d,e,r){d instanceof String&&(d=String(d));for(var a=d.length,c=0;c<a;c++){var z=d[c];if(e.call(r,z,c,d))return{i:c,v:z}}return{i:-1,v:void 0}};
$jscomp.array.from=function(d,e,r){e=void 0===e?function(c){return c}:e;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(d[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();d=d[Symbol.iterator]();for(var c;!(c=d.next()).done;)a.push(e.call(r,c.value))}else{c=d.length;for(var z=0;z<c;z++)a.push(e.call(r,d[z]))}return a};$jscomp.array.of=function(d){for(var e=[],r=0;r<arguments.length;++r)e[r-0]=arguments[r];return $jscomp.array.from(e)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(d,e){return[d,e]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(d){return d})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(d,e){return e})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(d,e,r){var a=this.length;d=Number(d);e=Number(e);r=Number(null!=r?r:a);if(d<e)for(r=Math.min(r,a);e<r;)e in this?this[d++]=this[e++]:(delete this[d++],e++);else for(r=Math.min(r,a+e-d),d+=r-e;r>e;)--r in this?this[--d]=this[r]:delete this[d];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(d,e,r){null!=r&&d.length||(r=this.length||0);r=Number(r);for(e=Number((void 0===e?0:e)||0);e<r;e++)this[e]=d;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(d,e){return $jscomp.array.findInternal_(this,d,e).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(d,e){return $jscomp.array.findInternal_(this,d,e).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(d){d=void 0===d?[]:d;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(d){d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())e=e.value,this.set(e[0],e[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var d=$jscomp.global.Map;if(!d||!d.prototype.entries||!Object.seal)return!1;try{var e=Object.seal({x:4}),r=new d($jscomp.makeIterator([[e,"s"]]));if("s"!=r.get(e)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var a=r.entries(),c=a.next();if(c.done||c.value[0]!=e||"s"!=c.value[1])return!1;c=a.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!a.next().done?!1:!0}catch(z){return!1}};
$jscomp.Map.createHead_=function(){var d={};return d.previous=d.next=d.head=d};$jscomp.Map.getId_=function(d){if(!(d instanceof Object))return String(d);$jscomp.Map.key_ in d||d instanceof Object&&Object.isExtensible&&Object.isExtensible(d)&&$jscomp.Map.defineProperty_(d,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in d?d[$jscomp.Map.key_]:" "+d};
$jscomp.Map.prototype.set=function(d,e){var r=this.maybeGetEntry_(d),a=r.id,c=r.list,r=r.entry;c||(c=this.data_[a]=[]);r?r.value=e:(r={next:this.head_,previous:this.head_.previous,head:this.head_,key:d,value:e},c.push(r),this.head_.previous.next=r,this.head_.previous=r,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(d){var e=this.maybeGetEntry_(d);d=e.id;var r=e.list,a=e.index;return(e=e.entry)&&r?(r.splice(a,1),r.length||delete this.data_[d],e.previous.next=e.next,e.next.previous=e.previous,e.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(d){return!!this.maybeGetEntry_(d).entry};
$jscomp.Map.prototype.get=function(d){return(d=this.maybeGetEntry_(d).entry)&&d.value};$jscomp.Map.prototype.maybeGetEntry_=function(d){var e=$jscomp.Map.getId_(d),r=this.data_[e];if(r)for(var a=0;a<r.length;a++){var c=r[a];if(d!==d&&c.key!==c.key||d===c.key)return{id:e,list:r,index:a,entry:c}}return{id:e,list:r,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(d){return[d.key,d.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(d){return d.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(d){return d.value})};$jscomp.Map.prototype.forEach=function(d,e){for(var r=$jscomp.makeIterator(this.entries()),a=r.next();!a.done;a=r.next())a=a.value,d.call(e,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(d){var e=this,r=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(r){for(;r.head!=e.head_;)r=r.previous;for(;r.next!=r.head;)return r=r.next,{done:!1,value:d(r)};r=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(d,e,r){Object.defineProperty(d,e,{value:String(r)})}:function(d,e,r){d[e]=String(r)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(d){d=Number(d)>>>0;if(0===d)return 32;var e=0;0===(d&4294901760)&&(d<<=16,e+=16);0===(d&4278190080)&&(d<<=8,e+=8);0===(d&4026531840)&&(d<<=4,e+=4);0===(d&3221225472)&&(d<<=2,e+=2);0===(d&2147483648)&&e++;return e};$jscomp.math.imul=function(d,e){d=Number(d);e=Number(e);var r=d&65535,a=e&65535;return r*a+((d>>>16&65535)*a+r*(e>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(d){d=Number(d);return 0===d||isNaN(d)?d:0<d?1:-1};
$jscomp.math.log10=function(d){return Math.log(d)/Math.LN10};$jscomp.math.log2=function(d){return Math.log(d)/Math.LN2};$jscomp.math.log1p=function(d){d=Number(d);if(.25>d&&-.25<d){for(var e=d,r=1,a=d,c=0,z=1;c!=a;)e*=d,z*=-1,a=(c=a)+z*e/++r;return a}return Math.log(1+d)};$jscomp.math.expm1=function(d){d=Number(d);if(.25>d&&-.25<d){for(var e=d,r=1,a=d,c=0;c!=a;)e*=d/++r,a=(c=a)+e;return a}return Math.exp(d)-1};$jscomp.math.cosh=function(d){d=Number(d);return(Math.exp(d)+Math.exp(-d))/2};
$jscomp.math.sinh=function(d){d=Number(d);return 0===d?d:(Math.exp(d)-Math.exp(-d))/2};$jscomp.math.tanh=function(d){d=Number(d);if(0===d)return d;var e=Math.exp(2*-Math.abs(d)),e=(1-e)/(1+e);return 0>d?-e:e};$jscomp.math.acosh=function(d){d=Number(d);return Math.log(d+Math.sqrt(d*d-1))};$jscomp.math.asinh=function(d){d=Number(d);if(0===d)return d;var e=Math.log(Math.abs(d)+Math.sqrt(d*d+1));return 0>d?-e:e};
$jscomp.math.atanh=function(d){d=Number(d);return($jscomp.math.log1p(d)-$jscomp.math.log1p(-d))/2};
$jscomp.math.hypot=function(d,e,r){for(var a=[],c=2;c<arguments.length;++c)a[c-2]=arguments[c];d=Number(d);e=Number(e);for(var z=Math.max(Math.abs(d),Math.abs(e)),D=$jscomp.makeIterator(a),c=D.next();!c.done;c=D.next())z=Math.max(z,Math.abs(c.value));if(1E100<z||1E-100>z){d/=z;e/=z;D=d*d+e*e;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c)/z,D+=c*c;return Math.sqrt(D)*z}z=d*d+e*e;a=$jscomp.makeIterator(a);for(c=a.next();!c.done;c=a.next())c=c.value,c=Number(c),z+=
c*c;return Math.sqrt(z)};$jscomp.math.trunc=function(d){d=Number(d);if(isNaN(d)||Infinity===d||-Infinity===d||0===d)return d;var e=Math.floor(Math.abs(d));return 0>d?-e:e};$jscomp.math.cbrt=function(d){if(0===d)return d;d=Number(d);var e=Math.pow(Math.abs(d),1/3);return 0>d?-e:e};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(d){return"number"!==typeof d?!1:!isNaN(d)&&Infinity!==d&&-Infinity!==d};
$jscomp.number.isInteger=function(d){return $jscomp.number.isFinite(d)?d===Math.floor(d):!1};$jscomp.number.isNaN=function(d){return"number"===typeof d&&isNaN(d)};$jscomp.number.isSafeInteger=function(d){return $jscomp.number.isInteger(d)&&Math.abs(d)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(d,e){for(var r=[],a=1;a<arguments.length;++a)r[a-1]=arguments[a];r=$jscomp.makeIterator(r);for(a=r.next();!a.done;a=r.next())if(a=a.value)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d};$jscomp.object.is=function(d,e){return d===e?0!==d||1/d===1/e:d!==d&&e!==e};$jscomp.Set=function(d){d=void 0===d?[]:d;this.map_=new $jscomp.Map;if(d){d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())this.add(e.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var d=$jscomp.global.Set;if(!d||!d.prototype.entries||!Object.seal)return!1;var e=Object.seal({x:4}),d=new d($jscomp.makeIterator([e]));if(d.has(e)||1!=d.size||d.add(e)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var d=d.entries(),r=d.next();if(r.done||r.value[0]!=e||r.value[1]!=e)return!1;r=d.next();return r.done||r.value[0]==e||4!=r.value[0].x||r.value[1]!=r.value[0]?!1:d.next().done};
$jscomp.Set.prototype.add=function(d){this.map_.set(d,d);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(d){d=this.map_["delete"](d);this.size=this.map_.size;return d};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(d){return this.map_.has(d)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(d,e){var r=this;this.map_.forEach(function(a){return d.call(e,a,a,r)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(d,e){if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(d){for(var e=[],r=0;r<arguments.length;++r)e[r-0]=arguments[r];for(var r="",e=$jscomp.makeIterator(e),a=e.next();!a.done;a=e.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),r+=String.fromCharCode(a&1023|56320))}return r};
$jscomp.string.repeat=function(d){var e=this.toString();if(0>d||1342177279<d)throw new RangeError("Invalid count value");d|=0;for(var r="";d;)if(d&1&&(r+=e),d>>>=1)e+=e;return r};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(d){var e=this.toString(),r=e.length;d=Number(d)||0;if(0<=d&&d<r){d|=0;var a=e.charCodeAt(d);if(55296>a||56319<a||d+1===r)return a;d=e.charCodeAt(d+1);return 56320>d||57343<d?a:1024*(a-55296)+d+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(d,e){e=void 0===e?0:e;$jscomp.string.noRegExp_(d,"includes");return-1!==this.toString().indexOf(d,e)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(d,e){e=void 0===e?0:e;$jscomp.string.noRegExp_(d,"startsWith");var r=this.toString();d+="";for(var a=r.length,c=d.length,z=Math.max(0,Math.min(e|0,r.length)),D=0;D<c&&z<a;)if(r[z++]!=d[D++])return!1;return D>=c};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(d,e){$jscomp.string.noRegExp_(d,"endsWith");var r=this.toString();d+="";void 0===e&&(e=r.length);for(var a=Math.max(0,Math.min(e|0,r.length)),c=d.length;0<c&&0<a;)if(r[--a]!=d[--c])return!1;return 0>=c};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function d(e,r,a){function c(m,k){if(!r[m]){if(!e[m]){var l="function"==typeof require&&require;if(!k&&l)return l(m,!0);if(z)return z(m,!0);l=Error("Cannot find module '"+m+"'");throw l.code="MODULE_NOT_FOUND",l;}l=r[m]={exports:{}};e[m][0].call(l.exports,function(a){return c(e[m][1][a]||a)},l,l.exports,d,e,r,a)}return r[m].exports}for(var z="function"==typeof require&&require,D=0;D<a.length;D++)c(a[D]);return c}return d})()({1:[function(d,e,r){function a(b,c){this.i0=b;this.i1=c;this.restLength=
m.distance(g[b],g[c])}e=document.body.appendChild(document.createElement("canvas"));r=d("canvas-fit");var c=d("../regl")(e),z=d("gl-mat4"),D=d("canvas-orbit-camera")(e);window.addEventListener("resize",r(e),!1);var m=d("gl-vec3");D.view(z.lookAt([],[0,3,30],[0,0,-5.5],[0,1,0]));D.rotate([0,0],[.471,0]);var k=[],l=[],g=[],b=[],p=[],H=[];for(e=0;20>=e;++e){var y=e/20*11+-5.5,h=e/20;for(r=0;20>=r;++r){var f=r/20*11+-5.5,n=r/20;g.push([f,0,y]);b.push([f,0,y]);k.push([n,h])}}var q=c.buffer({length:12*
g.length,type:"float",usage:"dynamic"}),t,v,G,w;for(t=0;t<g.length;++t)p.push([0,0,0]);var Ia=c.buffer({length:12*p.length,type:"float",usage:"dynamic"});for(e=0;19>=e;++e)for(r=0;19>=r;++r)t=21*e+r,v=t+0,G=t+1,w=t+21+0,y=t+21+1,l.push([y,G,v]),l.push([v,w,y]);for(e=0;20>=e;++e)for(r=0;20>=r;++r)t=21*e+r,v=t+0,G=t+1,w=t+21+0,y=t+21+1,20>r&&H.push(new a(v,G)),20>e&&H.push(new a(v,w)),20>r&&20>e&&H.push(new a(v,y));var x=c({cull:{enable:!1},context:{view:function(){return D.view()}},frag:"\n  precision mediump float;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform sampler2D texture;\n\n  void main () {\n    vec3 tex = texture2D(texture, vUv*1.0).xyz;\n    vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));\n\n    vec3 n = vNormal;\n\n    // for the back faces we need to use the opposite normals.\n    if(gl_FrontFacing == false) {\n      n = -n;\n    }\n\n    vec3 ambient = 0.3 * tex;\n    vec3 diffuse = 0.7 * tex * clamp( dot(n, lightDir ), 0.0, 1.0 );\n\n    gl_FragColor = vec4(ambient + diffuse, 1.0);\n  }",
vert:"\n  precision mediump float;\n\n  attribute vec3 position;\n  attribute vec3 normal;\n  attribute vec2 uv;\n\n  varying vec2 vUv;\n  varying vec3 vNormal;\n\n  uniform mat4 projection, view;\n\n  void main() {\n    vUv = uv;\n    vNormal = normal;\n    gl_Position = projection * view * vec4(position, 1);\n  }",uniforms:{view:c.context("view"),projection:function(b){return z.perspective([],Math.PI/4,b.viewportWidth/b.viewportHeight,.01,1E3)},texture:c.prop("clothTexture")},attributes:{position:{buffer:q,
normalized:!0},uv:c.prop("uv"),normal:{buffer:Ia,normalized:!0}},elements:c.prop("elements")});d("resl")({manifest:{clothTexture:{type:"image",src:"assets/cloth.png",parser:function(b){return c.texture({mag:"nearest",mipmap:!0,min:"linear mipmap linear",data:b,wrap:"repeat"})}}},onDone:function(f){var h=f.clothTexture;c.frame(function(f){var a=f.tick;c.clear({color:[0,0,0,255],depth:1});f=[];var n=[],d=[0,-4,0],a=[Math.sin(a/2),Math.cos(a/3),Math.sin(a/1)];m.normalize(a,a);m.scale(a,a,20.6);for(t=
0;t<g.length;++t)m.subtract(f,g[t],b[t]),f=[f[0],f[1],f[2]],n=[g[t][0],g[t][1],g[t][2]],m.add(n,n,f),m.scaleAndAdd(n,n,d,.017*.017),m.scaleAndAdd(n,n,a,.017*.017),b[t]=[g[t][0],g[t][1],g[t][2]],g[t]=[n[0],n[1],n[2]];d=[];for(t=0;15>t;++t)for(a=0;a<H.length;a++){var y=H[a];f=g[y.i0];n=g[y.i1];m.subtract(d,n,f);var z=m.length(d),y=(z-y.restLength)/z;m.scaleAndAdd(f,f,d,.5*y);m.scaleAndAdd(n,n,d,-.5*y)}for(t=0;20>=t;++t)g[t]=[b[t][0],b[t][1],b[t][2]];for(t=0;t<p.length;t++)p[t]=[0,0,0];for(t=0;t<l.length;t++)v=
l[t][0],G=l[t][1],w=l[t][2],d=g[v],n=g[G],a=g[w],f=[0,0,0],m.subtract(f,d,n),n=[0,0,0],m.subtract(n,d,a),d=[0,0,0],m.cross(d,f,n),m.normalize(d,d),m.add(p[v],p[v],d),m.add(p[G],p[G],d),m.add(p[w],p[w],d);for(t=0;t<p.length;t++)m.normalize(p[t],p[t]);q.subdata(g);Ia.subdata(p);x({elements:l,uv:k,clothTexture:h});D.tick()})}})},{"../regl":128,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59,"gl-vec3":93,resl:124}],2:[function(d,e,r){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var c=d("./util/sorted-object-keys"),z=d("./util/check"),D=d("./util/values"),m=d("./constants/dtypes.json"),k=d("./util/is-typed-array"),l=d("./util/is-ndarray"),g=d("./constants/primitives.json"),b="attributes elements offset count primitive instances".split(" ");e.exports=function(p,d,y,h,f,n,q){function t(b){if(b!==J.currentVAO){var c=d.oes_vertex_array_object;b?c.bindVertexArrayOES(b.vao):c.bindVertexArrayOES(null);
J.currentVAO=b}}function v(b){if(b!==J.currentVAO){if(b)b.bindAttrs();else{for(var c=d.angle_instanced_arrays,f=0;f<u.length;++f){var a=u[f];a.buffer?(p.enableVertexAttribArray(f),a.buffer.bind(),p.vertexAttribPointer(f,a.size,a.type,a.normalized,a.stride,a.offfset),c&&a.divisor&&c.vertexAttribDivisorANGLE(f,a.divisor)):(p.disableVertexAttribArray(f),p.vertexAttrib4f(f,a.x,a.y,a.z,a.w))}q.elements?p.bindBuffer(34963,q.elements.buffer.buffer):p.bindBuffer(34963,null)}J.currentVAO=b}}function G(){D(e).forEach(function(b){b.destroy()})}
function w(){this.id=++oa;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=d.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;e[this.id]=this;this.buffers=[]}function Ia(){d.oes_vertex_array_object&&D(e).forEach(function(b){b.refresh()})}var x=y.maxAttributes,u=Array(x);for(y=0;y<x;++y)u[y]=new a;var oa=0,e={},J={Record:a,scope:{},state:u,currentVAO:null,targetVAO:null,restore:d.oes_vertex_array_object?Ia:
function(){},createVAO:function(q){function p(h){var q;if(Array.isArray(h))q=h,t.elements&&t.ownsElements&&t.elements.destroy(),t.elements=null,t.ownsElements=!1,t.offset=0,t.count=0,t.instances=-1,t.primitive=4;else{z("object"===typeof h,"invalid arguments for create vao");z("attributes"in h,"must specify attributes for vao");if(h.elements){var v=h.elements;t.ownsElements?("function"===typeof v&&"elements"===v._reglType?t.elements.destroy():t.elements(v),t.ownsElements=!1):n.getElements(h.elements)?
(t.elements=h.elements,t.ownsElements=!1):(t.elements=n.create(h.elements),t.ownsElements=!0)}else t.elements=null,t.ownsElements=!1;q=h.attributes;t.offset=0;t.count=-1;t.instances=-1;t.primitive=4;t.elements&&(t.count=t.elements._elements.vertCount,t.primitive=t.elements._elements.primType);"offset"in h&&(t.offset=h.offset|0);"count"in h&&(t.count=h.count|0);"instances"in h&&(t.instances=h.instances|0);"primitive"in h&&(z(h.primitive in g,"bad primitive type: "+h.primitive),t.primitive=g[h.primitive]);
z.optional(function(){for(var f=c(h),a=0;a<f.length;++a)z(0<=b.indexOf(f[a]),'invalid option for vao: "'+f[a]+'" valid options are '+b)});z(Array.isArray(q),"attributes must be an array")}z(q.length<x,"too many attributes");z(0<q.length,"must specify at least one attribute");var v={},y=t.attributes;y.length=q.length;for(var D=0;D<q.length;++D){var G=q[D],w=y[D]=new a,oa=G.data||G;if(Array.isArray(oa)||k(oa)||l(oa)){var u;t.buffers[D]&&(u=t.buffers[D],k(oa)&&u._buffer.byteLength>=oa.byteLength?u.subdata(oa):
(u.destroy(),t.buffers[D]=null));t.buffers[D]||(u=t.buffers[D]=f.create(G,34962,!1,!0));w.buffer=f.getBuffer(u);w.size=w.buffer.dimension|0;w.normalized=!1;w.type=w.buffer.dtype;w.offset=0;w.stride=0;w.divisor=0;w.state=1;v[D]=1}else f.getBuffer(G)?(w.buffer=f.getBuffer(G),w.size=w.buffer.dimension|0,w.normalized=!1,w.type=w.buffer.dtype,w.offset=0,w.stride=0,w.divisor=0,w.state=1):f.getBuffer(G.buffer)?(w.buffer=f.getBuffer(G.buffer),w.size=(+G.size||w.buffer.dimension)|0,w.normalized=!!G.normalized||
!1,"type"in G?(z.parameter(G.type,m,"invalid buffer type"),w.type=m[G.type]):w.type=w.buffer.dtype,w.offset=(G.offset||0)|0,w.stride=(G.stride||0)|0,w.divisor=(G.divisor||0)|0,w.state=1,z(1<=w.size&&4>=w.size,"size must be between 1 and 4"),z(0<=w.offset,"invalid offset"),z(0<=w.stride&&255>=w.stride,"stride must be between 0 and 255"),z(0<=w.divisor,"divisor must be positive"),z(!w.divisor||!!d.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in G?(z(0<D,"first attribute must not be a constant"),
w.x=+G.x||0,w.y=+G.y||0,w.z=+G.z||0,w.w=+G.w||0,w.state=2):z(!1,"invalid attribute spec for location "+D)}for(u=0;u<t.buffers.length;++u)!v[u]&&t.buffers[u]&&(t.buffers[u].destroy(),t.buffers[u]=null);t.refresh();return p}var t=new w;h.vaoCount+=1;p.destroy=function(){for(var b=0;b<t.buffers.length;++b)t.buffers[b]&&t.buffers[b].destroy();t.buffers.length=0;t.ownsElements&&(t.elements.destroy(),t.elements=null,t.ownsElements=!1);t.destroy()};p._vao=t;p._reglType="vao";return p(q)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var c=0;c<u.length;++c){var f=u[c];f.buffer===b&&(p.disableVertexAttribArray(c),f.buffer=null)}},setVAO:d.oes_vertex_array_object?t:v,clear:d.oes_vertex_array_object?G:function(){}};w.prototype.bindAttrs=function(){for(var b=d.angle_instanced_arrays,c=this.attributes,f=0;f<c.length;++f){var a=c[f];a.buffer?(p.enableVertexAttribArray(f),p.bindBuffer(34962,a.buffer.buffer),p.vertexAttribPointer(f,a.size,a.type,a.normalized,a.stride,a.offset),
b&&a.divisor&&b.vertexAttribDivisorANGLE(f,a.divisor)):(p.disableVertexAttribArray(f),p.vertexAttrib4f(f,a.x,a.y,a.z,a.w))}for(b=c.length;b<x;++b)p.disableVertexAttribArray(b);(b=n.getElements(this.elements))?p.bindBuffer(34963,b.buffer.buffer):p.bindBuffer(34963,null)};w.prototype.refresh=function(){var b=d.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),J.currentVAO=null,b.bindVertexArrayOES(null))};w.prototype.destroy=function(){if(this.vao){var b=d.oes_vertex_array_object;
this===J.currentVAO&&(J.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);e[this.id]&&(delete e[this.id],--h.vaoCount)};return J}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(d,e,r){function a(b){return y[Object.prototype.toString.call(b)]|
0}function c(b,c){for(var f=0;f<c.length;++f)b[f]=c[f]}function z(b,c,f,a,h,l,g){for(var n=0,p=0;p<f;++p)for(var k=0;k<a;++k)b[n++]=c[h*p+l*k+g]}var D=d("./util/sorted-object-keys"),m=d("./util/check"),k=d("./util/is-typed-array"),l=d("./util/is-ndarray"),g=d("./util/values"),b=d("./util/pool");r=d("./util/flatten");var p=r.flatten,H=r.shape,y=d("./constants/arraytypes.json"),h=d("./constants/dtypes.json"),f=d("./constants/usage.json"),n=[];n[5120]=1;n[5122]=2;n[5124]=4;n[5121]=1;n[5123]=2;n[5125]=
4;n[5126]=4;e.exports=function(q,t,v,d){function w(b){this.id=oa++;this.buffer=q.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;v.profile&&(this.stats={size:0})}function y(b,c,f){b.byteLength=c.byteLength;q.bufferData(b.type,c,f)}function x(f,h,g,n,q,t){f.usage=g;if(Array.isArray(h)){if(f.dtype=n||5126,0<h.length)if(Array.isArray(h[0])){q=H(h);for(var v=n=1;v<q.length;++v)n*=q[v];f.dimension=n;h=p(h,q,f.dtype);y(f,h,g);t?f.persistentData=
h:b.freeType(h)}else"number"===typeof h[0]?(f.dimension=q,q=b.allocType(f.dtype,h.length),c(q,h),y(f,q,g),t?f.persistentData=q:b.freeType(q)):k(h[0])?(f.dimension=h[0].length,f.dtype=n||a(h[0])||5126,h=p(h,[h.length,h[0].length],f.dtype),y(f,h,g),t?f.persistentData=h:b.freeType(h)):m.raise("invalid buffer data")}else if(k(h))f.dtype=n||a(h),f.dimension=q,y(f,h,g),t&&(f.persistentData=new Uint8Array(new Uint8Array(h.buffer)));else if(l(h)){q=h.shape;var d=h.stride,v=h.offset,w=0,G=0,D=0,x=0;1===q.length?
(w=q[0],G=1,D=d[0],x=0):2===q.length?(w=q[0],G=q[1],D=d[0],x=d[1]):m.raise("invalid shape");f.dtype=n||a(h.data)||5126;f.dimension=G;q=b.allocType(f.dtype,w*G);z(q,h.data,w,G,D,x,v);y(f,q,g);t?f.persistentData=q:b.freeType(q)}else h instanceof ArrayBuffer?(f.dtype=5121,f.dimension=q,y(f,h,g),t&&(f.persistentData=new Uint8Array(new Uint8Array(h)))):m.raise("invalid buffer data")}function u(b){t.bufferCount--;d(b);var c=b.buffer;m(c,"buffer must not be deleted already");q.deleteBuffer(c);b.buffer=null;
delete e[b.id]}var oa=0,e={};w.prototype.bind=function(){q.bindBuffer(this.type,this.buffer)};w.prototype.destroy=function(){u(this)};var J=[];v.profile&&(t.getTotalBufferSize=function(){var b=0;D(e).forEach(function(c){b+=e[c].stats.size});return b});return{create:function(g,d,y,G){function D(b){var c=35044,a=null,g=0,t=0,p=1;Array.isArray(b)||k(b)||l(b)||b instanceof ArrayBuffer?a=b:"number"===typeof b?g=b|0:b&&(m.type(b,"object","buffer arguments must be an object, a number or an array"),"data"in
b&&(m(null===a||Array.isArray(a)||k(a)||l(a),"invalid data for buffer"),a=b.data),"usage"in b&&(m.parameter(b.usage,f,"invalid buffer usage"),c=f[b.usage]),"type"in b&&(m.parameter(b.type,h,"invalid buffer type"),t=h[b.type]),"dimension"in b&&(m.type(b.dimension,"number","invalid dimension"),p=b.dimension|0),"length"in b&&(m.nni(g,"buffer length must be a nonnegative integer"),g=b.length|0));Ia.bind();a?x(Ia,a,c,t,p,G):(g&&q.bufferData(Ia.type,g,c),Ia.dtype=t||5121,Ia.usage=c,Ia.dimension=p,Ia.byteLength=
g);v.profile&&(Ia.stats.size=Ia.byteLength*n[Ia.dtype]);return D}function oa(b,c){m(c+b.byteLength<=Ia.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+c+" to a buffer of size "+Ia.byteLength);q.bufferSubData(Ia.type,c,b)}t.bufferCount++;var Ia=new w(d);e[Ia.id]=Ia;y||D(g);D._reglType="buffer";D._buffer=Ia;D.subdata=function(f,h){var g=(h||0)|0,n;Ia.bind();if(k(f)||f instanceof ArrayBuffer)oa(f,g);else if(Array.isArray(f)){if(0<
f.length)if("number"===typeof f[0]){var q=b.allocType(Ia.dtype,f.length);c(q,f);oa(q,g);b.freeType(q)}else Array.isArray(f[0])||k(f[0])?(n=H(f),q=p(f,n,Ia.dtype),oa(q,g),b.freeType(q)):m.raise("invalid buffer data")}else if(l(f)){n=f.shape;var t=f.stride,v=q=0,d=0,y=0;1===n.length?(q=n[0],v=1,d=t[0],y=0):2===n.length?(q=n[0],v=n[1],d=t[0],y=t[1]):m.raise("invalid shape");n=Array.isArray(f.data)?Ia.dtype:a(f.data);n=b.allocType(n,q*v);z(n,f.data,q,v,d,y,f.offset);oa(n,g);b.freeType(n)}else m.raise("invalid data for buffer subdata");
return D};v.profile&&(D.stats=Ia.stats);D.destroy=function(){u(Ia)};return D},createStream:function(b,c){var f=J.pop();f||(f=new w(b));f.bind();x(f,c,35040,0,1,!1);return f},destroyStream:function(b){J.push(b)},clear:function(){g(e).forEach(u);J.forEach(u)},getBuffer:function(b){return b&&b._buffer instanceof w?b._buffer:null},restore:function(){g(e).forEach(function(b){b.buffer=q.createBuffer();q.bindBuffer(b.type,b.buffer);q.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:x}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(d,e,r){e.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(d,e,r){e.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(d,e,r){e.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(d,e,r){e.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(d,e,r){function a(b){return Array.isArray(b)||y(b)||h(b)}function c(b){return b.sort(function(b,
c){return"viewport"===b?-1:"viewport"===c?1:b<c?-1:1})}function z(b,c,f,h){this.thisDep=b;this.contextDep=c;this.propDep=f;this.append=h}function D(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function m(b){return new z(!1,!1,!1,b)}function k(b,c){var f=b.type;if(0===f)return f=b.data.length,new z(!0,1<=f,2<=f,c);if(4===f)return f=b.data,new z(f.thisDep,f.contextDep,f.propDep,c);if(5===f)return new z(!1,!1,!1,c);if(6===f){for(var h=f=!1,a=!1,l=0;l<b.data.length;++l){var g=b.data[l];1===g.type?
a=!0:2===g.type?h=!0:3===g.type?f=!0:0===g.type?(f=!0,g=g.data,1<=g&&(h=!0),2<=g&&(a=!0)):4===g.type&&(f=f||g.data.thisDep,h=h||g.data.contextDep,a=a||g.data.propDep)}return new z(f,h,a,c)}return new z(3===f,2===f,1===f,c)}var l=d("./util/sorted-object-keys"),g=d("./util/check"),b=d("./util/extend"),p=d("./util/codegen"),H=d("./util/loop"),y=d("./util/is-typed-array"),h=d("./util/is-ndarray"),f=d("./util/is-array-like"),n=d("./dynamic"),q=d("./constants/primitives.json"),t=d("./constants/dtypes.json"),
v=["x","y","z","w"],G="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),w={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ia="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
x={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},u={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},oa={frag:35632,vert:35633},ca={cw:2304,ccw:2305},J=new z(!1,!1,!1,function(){});e.exports=function(h,d,y,e,r,K,ja,W,ka,la,Sa,Cb,ea,Na,V){function P(b){return b.replace(".","_")}function O(b,c,f){var h=P(b);
ba.push(b);F[h]=M[h]=!!f;xa[h]=c}function T(b,c,f){var h=P(b);ba.push(b);Array.isArray(f)?(M[h]=f.slice(),F[h]=f.slice()):M[h]=F[h]=f;ya[h]=c}function na(){var b=p(),c=b.link,f=b.global;b.id=oc++;b.batchId="0";var h=c(Ja),a=b.shared={props:"a0"};l(Ja).forEach(function(b){a[b]=f.def(h,".",b)});g.optional(function(){b.CHECK=c(g);b.commandStr=g.guessCommand();b.command=c(b.commandStr);b.assert=function(b,f,h){b("if(!(",f,"))",this.CHECK,".commandRaise(",c(h),",",this.command,");")};C.invalidBlendCombinations=
Ia});var n=b.next={},q=b.current={};l(ya).forEach(function(b){Array.isArray(M[b])&&(n[b]=f.def(a.next,".",b),q[b]=f.def(a.current,".",b))});var t=b.constants={};l(C).forEach(function(b){t[b]=f.def(JSON.stringify(C[b]))});b.invoke=function(f,h){switch(h.type){case 0:var l=["this",a.context,a.props,b.batchId];return f.def(c(h.data),".call(",l.slice(0,Math.max(h.data.length+1,4)),")");case 1:return f.def(a.props,h.data);case 2:return f.def(a.context,h.data);case 3:return f.def("this",h.data);case 4:return h.data.append(b,
f),h.data.ref;case 5:return h.data.toString();case 6:return h.data.map(function(c){return b.invoke(f,c)})}};b.attribCache={};var v={};b.scopeAttrib=function(b){b=d.id(b);if(b in v)return v[b];var f=la.scope[b];f||(f=la.scope[b]=new ia);return v[b]=c(f)};return b}function Q(b){var c=b["static"];b=b.dynamic;var f;if("profile"in c){var h=!!c.profile;f=m(function(b,c){return h});f.enable=h}else if("profile"in b){var a=b.profile;f=k(a,function(b,c){return b.invoke(c,a)})}return f}function Gb(b,c){var f=
b["static"],h=b.dynamic;if("framebuffer"in f){var a=f.framebuffer;return a?(a=W.getFramebuffer(a),g.command(a,"invalid framebuffer object"),m(function(b,c){var f=b.link(a),h=b.shared;c.set(h.framebuffer,".next",f);h=h.context;c.set(h,".framebufferWidth",f+".width");c.set(h,".framebufferHeight",f+".height");return f})):m(function(b,c){var f=b.shared;c.set(f.framebuffer,".next","null");f=f.context;c.set(f,".framebufferWidth",f+".drawingBufferWidth");c.set(f,".framebufferHeight",f+".drawingBufferHeight");
return"null"})}if("framebuffer"in h){var l=h.framebuffer;return k(l,function(b,f){var c=b.invoke(f,l),h=b.shared,a=h.framebuffer,n=f.def(a,".getFramebuffer(",c,")");g.optional(function(){b.assert(f,"!"+c+"||"+n,"invalid framebuffer object")});f.set(a,".next",n);h=h.context;f.set(h,".framebufferWidth",n+"?"+n+".width:"+h+".drawingBufferWidth");f.set(h,".framebufferHeight",n+"?"+n+".height:"+h+".drawingBufferHeight");return n})}return null}function $a(b,f,c){function h(b){if(b in a){var n=a[b];g.commandType(n,
"object","invalid "+b,c.commandStr);var q=!0,t=n.x|0,p=n.y|0,v,d;"width"in n?(v=n.width|0,g.command(0<=v,"invalid "+b,c.commandStr)):q=!1;"height"in n?(d=n.height|0,g.command(0<=d,"invalid "+b,c.commandStr)):q=!1;return new z(!q&&f&&f.thisDep,!q&&f&&f.contextDep,!q&&f&&f.propDep,function(b,f){var c=b.shared.context,h=v;"width"in n||(h=f.def(c,".","framebufferWidth","-",t));var a=d;"height"in n||(a=f.def(c,".","framebufferHeight","-",p));return[t,p,h,a]})}if(b in l){var y=l[b],q=k(y,function(f,c){var h=
f.invoke(c,y);g.optional(function(){f.assert(c,h+"&&typeof "+h+'==="object"',"invalid "+b)});var a=f.shared.context,l=c.def(h,".x|0"),n=c.def(h,".y|0"),q=c.def('"width" in ',h,"?",h,".width|0:","(",a,".","framebufferWidth","-",l,")"),t=c.def('"height" in ',h,"?",h,".height|0:","(",a,".","framebufferHeight","-",n,")");g.optional(function(){f.assert(c,q+">=0&&"+t+">=0","invalid "+b)});return[l,n,q,t]});f&&(q.thisDep=q.thisDep||f.thisDep,q.contextDep=q.contextDep||f.contextDep,q.propDep=q.propDep||f.propDep);
return q}return f?new z(f.thisDep,f.contextDep,f.propDep,function(b,f){var c=b.shared.context;return[0,0,f.def(c,".","framebufferWidth"),f.def(c,".","framebufferHeight")]}):null}var a=b["static"],l=b.dynamic;if(b=h("viewport")){var n=b;b=new z(b.thisDep,b.contextDep,b.propDep,function(b,f){var c=n.append(b,f),h=b.shared.context;f.set(h,".viewportWidth",c[2]);f.set(h,".viewportHeight",c[3]);return c})}return{viewport:b,scissor_box:h("scissor.box")}}function S(b,f){var c=b["static"];if("string"===typeof c.frag&&
"string"===typeof c.vert){if(0<l(f.dynamic).length)return null;var c=f["static"],h=l(c);if(0<h.length&&"number"===typeof c[h[0]]){for(var a=[],n=0;n<h.length;++n)g("number"===typeof c[h[n]],"must specify all vertex attribute locations when using vaos"),a.push([c[h[n]]|0,h[n]]);return a}}return null}function B(b,f,c){function h(b){if(b in a){var f=d.id(a[b]);g.optional(function(){Sa.shader(oa[b],f,g.guessCommand())});var c=m(function(){return f});c.id=f;return c}if(b in l){var n=l[b];return k(n,function(f,
c){var h=f.invoke(c,n),a=c.def(f.shared.strings,".id(",h,")");g.optional(function(){c(f.shared.shader,".shader(",oa[b],",",a,",",f.command,");")});return a})}return null}var a=b["static"],l=b.dynamic,n=h("frag"),q=h("vert"),t=null;D(n)&&D(q)?(t=Sa.program(q.id,n.id,null,c),b=m(function(b,f){return b.link(t)})):b=new z(n&&n.thisDep||q&&q.thisDep,n&&n.contextDep||q&&q.contextDep,n&&n.propDep||q&&q.propDep,function(b,f){var c=b.shared.shader,h;h=n?n.append(b,f):f.def(c,".","frag");var a;a=q?q.append(b,
f):f.def(c,".","vert");var l=c+".program("+a+","+h;g.optional(function(){l+=","+b.command});return f.def(l+")")});return{frag:n,vert:q,progVar:b,program:t}}function ma(b,f){function c(b,a){if(b in h){var l=h[b]|0;a?t.offset=l:t.instances=l;g.command(!a||0<=l,"invalid "+b,f.commandStr);return m(function(b,f){a&&(b.OFFSET=l);return l})}if(b in n){var q=n[b];return k(q,function(f,c){var h=f.invoke(c,q);a&&(f.OFFSET=h,g.optional(function(){f.assert(c,h+">=0","invalid "+b)}));return h})}if(a){if(d)return m(function(b,
f){return b.OFFSET=0});if(p)return new z(v.thisDep,v.contextDep,v.propDep,function(b,f){return f.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.offset:0")})}else if(p)return new z(v.thisDep,v.contextDep,v.propDep,function(b,f){return f.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var h=b["static"],n=b.dynamic,t={},p=!1,v=function(){if("vao"in h){var b=h.vao;null!==b&&null===la.getVAO(b)&&(b=la.createVAO(b));p=!0;t.vao=b;return m(function(f){var c=
la.getVAO(b);return c?f.link(c):"null"})}if("vao"in n){p=!0;var f=n.vao;return k(f,function(b,c){var h=b.invoke(c,f);return c.def(b.shared.vao+".getVAO("+h+")")})}return null}(),d=!1,y=function(){if("elements"in h){var b=h.elements;t.elements=b;if(a(b)){var c=t.elements=K.create(b,!0),b=K.getElements(c);d=!0}else b&&(b=K.getElements(b),d=!0,g.command(b,"invalid elements",f.commandStr));c=m(function(f,c){if(b){var h=f.link(b);return f.ELEMENTS=h}return f.ELEMENTS=null});c.value=b;return c}if("elements"in
n){d=!0;var l=n.elements;return k(l,function(b,f){var c=b.shared,h=c.isBufferArgs,c=c.elements,a=b.invoke(f,l),n=f.def("null"),h=f.def(h,"(",a,")"),q=b.cond(h).then(n,"=",c,".createStream(",a,");")["else"](n,"=",c,".getElements(",a,");");g.optional(function(){b.assert(q["else"],"!"+a+"||"+n,"invalid elements")});f.entry(q);f.exit(b.cond(h).then(c,".destroyStream(",n,");"));return b.ELEMENTS=n})}return p?new z(v.thisDep,v.contextDep,v.propDep,function(b,f){return f.def(b.shared.vao+".currentVAO?"+
b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),w=c("offset",!0),G=function(){if("primitive"in h){var b=h.primitive;t.primitive=b;g.commandParameter(b,q,"invalid primitve",f.commandStr);return m(function(f,c){return q[b]})}if("primitive"in n){var c=n.primitive;return k(c,function(b,f){var h=b.constants.primTypes,a=b.invoke(f,c);g.optional(function(){b.assert(f,a+" in "+h,"invalid primitive, must be one of "+l(q))});return f.def(h,"[",a,"]")})}return d?D(y)?y.value?
m(function(b,f){return f.def(b.ELEMENTS,".primType")}):m(function(){return 4}):new z(y.thisDep,y.contextDep,y.propDep,function(b,f){var c=b.ELEMENTS;return f.def(c,"?",c,".primType:",4)}):p?new z(v.thisDep,v.contextDep,v.propDep,function(b,f){return f.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),H=function(){if("count"in h){var b=h.count|0;t.count=b;g.command("number"===typeof b&&0<=b,"invalid vertex count",f.commandStr);return m(function(){return b})}if("count"in
n){var c=n.count;return k(c,function(b,f){var h=b.invoke(f,c);g.optional(function(){b.assert(f,"typeof "+h+'==="number"&&'+h+">=0&&"+h+"===("+h+"|0)","invalid vertex count")});return h})}if(d){if(D(y)){if(y)return w?new z(w.thisDep,w.contextDep,w.propDep,function(b,f){var c=f.def(b.ELEMENTS,".vertCount-",b.OFFSET);g.optional(function(){b.assert(f,c+">=0","invalid vertex offset/element buffer too small")});return c}):m(function(b,f){return f.def(b.ELEMENTS,".vertCount")});var a=m(function(){return-1});
g.optional(function(){a.MISSING=!0});return a}var l=new z(y.thisDep||w.thisDep,y.contextDep||w.contextDep,y.propDep||w.propDep,function(b,f){var c=b.ELEMENTS;return b.OFFSET?f.def(c,"?",c,".vertCount-",b.OFFSET,":-1"):f.def(c,"?",c,".vertCount:-1")});g.optional(function(){l.DYNAMIC=!0});return l}return p?new z(v.thisDep,v.contextDep,v.propDep,function(b,f){return f.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),x=c("instances",!1);return{elements:y,primitive:G,count:H,
instances:x,offset:w,vao:v,vaoActive:p,elementsActive:d,"static":t}}function da(b,c){var h=b["static"],a=b.dynamic,n={};ba.forEach(function(b){function q(c,f){if(b in h){var l=c(h[b]);n[t]=m(function(){return l})}else if(b in a){var g=a[b];n[t]=k(g,function(b,c){return f(b,c,b.invoke(c,g))})}}var t=P(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return q(function(f){g.commandType(f,
"boolean",b,c.commandStr);return f},function(c,f,h){g.optional(function(){c.assert(f,"typeof "+h+'==="boolean"',"invalid flag "+b,c.commandStr)});return h});case "depth.func":return q(function(f){g.commandParameter(f,x,"invalid "+b,c.commandStr);return x[f]},function(c,f,h){var a=c.constants.compareFuncs;g.optional(function(){c.assert(f,h+" in "+a,"invalid "+b+", must be one of "+l(x))});return f.def(a,"[",h,"]")});case "depth.range":return q(function(b){g.command(f(b)&&2===b.length&&"number"===typeof b[0]&&
"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",c.commandStr);return b},function(b,c,f){g.optional(function(){b.assert(c,b.shared.isArrayLike+"("+f+")&&"+f+".length===2&&typeof "+f+'[0]==="number"&&typeof '+f+'[1]==="number"&&'+f+"[0]<="+f+"[1]","depth range must be a 2d array")});var h=c.def("+",f,"[0]"),a=c.def("+",f,"[1]");return[h,a]});case "blend.func":return q(function(b){g.commandType(b,"object","blend.func",c.commandStr);var f="srcRGB"in b?b.srcRGB:b.src,h="srcAlpha"in b?b.srcAlpha:
b.src,a="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;g.commandParameter(f,w,t+".srcRGB",c.commandStr);g.commandParameter(h,w,t+".srcAlpha",c.commandStr);g.commandParameter(a,w,t+".dstRGB",c.commandStr);g.commandParameter(b,w,t+".dstAlpha",c.commandStr);g.command(-1===Ia.indexOf(f+", "+a),"unallowed blending combination (srcRGB, dstRGB) = ("+f+", "+a+")",c.commandStr);return[w[f],w[a],w[h],w[b]]},function(f,c,h){function a(q,t){var p=c.def('"',q,t,'" in ',h,"?",h,".",q,t,":",h,".",
q);g.optional(function(){f.assert(c,p+" in "+n,"invalid "+b+"."+q+t+", must be one of "+l(w))});return p}var n=f.constants.blendFuncs;g.optional(function(){f.assert(c,h+"&&typeof "+h+'==="object"',"invalid blend func, must be an object")});var q=a("src","RGB"),t=a("dst","RGB");g.optional(function(){f.assert(c,f.constants.invalidBlendCombinations+".indexOf("+q+'+", "+'+t+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var p=c.def(n,"[",q,"]"),v=c.def(n,"[",a("src","Alpha"),"]"),
k=c.def(n,"[",t,"]"),d=c.def(n,"[",a("dst","Alpha"),"]");return[p,k,v,d]});case "blend.equation":return q(function(f){if("string"===typeof f)return g.commandParameter(f,sa,"invalid "+b,c.commandStr),[sa[f],sa[f]];if("object"===typeof f)return g.commandParameter(f.rgb,sa,b+".rgb",c.commandStr),g.commandParameter(f.alpha,sa,b+".alpha",c.commandStr),[sa[f.rgb],sa[f.alpha]];g.commandRaise("invalid blend.equation",c.commandStr)},function(f,c,h){var a=f.constants.blendEquations,n=c.def(),q=c.def(),t=f.cond("typeof ",
h,'==="string"');g.optional(function(){function c(b,h,g){f.assert(b,g+" in "+a,"invalid "+h+", must be one of "+l(sa))}c(t.then,b,h);f.assert(t["else"],h+"&&typeof "+h+'==="object"',"invalid "+b);c(t["else"],b+".rgb",h+".rgb");c(t["else"],b+".alpha",h+".alpha")});t.then(n,"=",q,"=",a,"[",h,"];");t["else"](n,"=",a,"[",h,".rgb];",q,"=",a,"[",h,".alpha];");c(t);return[n,q]});case "blend.color":return q(function(b){g.command(f(b)&&4===b.length,"blend.color must be a 4d array",c.commandStr);return H(4,
function(f){return+b[f]})},function(b,f,c){g.optional(function(){b.assert(f,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return H(4,function(b){return f.def("+",c,"[",b,"]")})});case "stencil.mask":return q(function(b){g.commandType(b,"number",t,c.commandStr);return b|0},function(b,f,c){g.optional(function(){b.assert(f,"typeof "+c+'==="number"',"invalid stencil.mask")});return f.def(c,"|0")});case "stencil.func":return q(function(f){g.commandType(f,"object",
t,c.commandStr);var h=f.cmp||"keep",a=f.ref||0;f="mask"in f?f.mask:-1;g.commandParameter(h,x,b+".cmp",c.commandStr);g.commandType(a,"number",b+".ref",c.commandStr);g.commandType(f,"number",b+".mask",c.commandStr);return[x[h],a,f]},function(b,f,c){var h=b.constants.compareFuncs;g.optional(function(){function a(){b.assert(f,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(c+"&&typeof ",c,'==="object"');a('!("cmp" in ',c,")||(",c,".cmp in ",h,")")});var a=f.def('"cmp" in ',c,"?",h,"[",
c,".cmp]",":",7680),l=f.def(c,".ref|0"),n=f.def('"mask" in ',c,"?",c,".mask|0:-1");return[a,l,n]});case "stencil.opFront":case "stencil.opBack":return q(function(f){g.commandType(f,"object",t,c.commandStr);var h=f.fail||"keep",a=f.zfail||"keep";f=f.zpass||"keep";g.commandParameter(h,u,b+".fail",c.commandStr);g.commandParameter(a,u,b+".zfail",c.commandStr);g.commandParameter(f,u,b+".zpass",c.commandStr);return["stencil.opBack"===b?1029:1028,u[h],u[a],u[f]]},function(f,c,h){function a(q){g.optional(function(){f.assert(c,
'!("'+q+'" in '+h+")||("+h+"."+q+" in "+n+")","invalid "+b+"."+q+", must be one of "+l(u))});return c.def('"',q,'" in ',h,"?",n,"[",h,".",q,"]:",7680)}var n=f.constants.stencilOps;g.optional(function(){f.assert(c,h+"&&typeof "+h+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,a("fail"),a("zfail"),a("zpass")]});case "polygonOffset.offset":return q(function(b){g.commandType(b,"object",t,c.commandStr);var f=b.factor|0;b=b.units|0;g.commandType(f,"number",t+".factor",c.commandStr);
g.commandType(b,"number",t+".units",c.commandStr);return[f,b]},function(f,c,h){g.optional(function(){f.assert(c,h+"&&typeof "+h+'==="object"',"invalid "+b)});var a=c.def(h,".factor|0"),l=c.def(h,".units|0");return[a,l]});case "cull.face":return q(function(b){var f=0;"front"===b?f=1028:"back"===b&&(f=1029);g.command(!!f,t,c.commandStr);return f},function(b,f,c){g.optional(function(){b.assert(f,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return f.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return q(function(b){g.command("number"===
typeof b&&b>=e.lineWidthDims[0]&&b<=e.lineWidthDims[1],"invalid line width, must be a positive number between "+e.lineWidthDims[0]+" and "+e.lineWidthDims[1],c.commandStr);return b},function(b,f,c){g.optional(function(){b.assert(f,"typeof "+c+'==="number"&&'+c+">="+e.lineWidthDims[0]+"&&"+c+"<="+e.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return q(function(b){g.commandParameter(b,ca,t,c.commandStr);return ca[b]},function(b,f,c){g.optional(function(){b.assert(f,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return f.def(c+'==="cw"?2304:2305')});case "colorMask":return q(function(b){g.command(f(b)&&4===b.length,"color.mask must be length 4 array",c.commandStr);return b.map(function(b){return!!b})},function(b,f,c){g.optional(function(){b.assert(f,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return H(4,function(b){return"!!"+c+"["+b+"]"})});case "sample.coverage":return q(function(b){g.command("object"===typeof b&&b,
t,c.commandStr);var f="value"in b?b.value:1;b=!!b.invert;g.command("number"===typeof f&&0<=f&&1>=f,"sample.coverage.value must be a number between 0 and 1",c.commandStr);return[f,b]},function(b,f,c){g.optional(function(){b.assert(f,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var h=f.def('"value" in ',c,"?+",c,".value:1"),a=f.def("!!",c,".invert");return[h,a]})}});return n}function Ba(b,c){var h=b["static"],a=b.dynamic,n={};l(h).forEach(function(b){var a=h[b],l;if("number"===typeof a||
"boolean"===typeof a)l=m(function(){return a});else if("function"===typeof a){var q=a._reglType;"texture2d"===q||"textureCube"===q?l=m(function(b){return b.link(a)}):"framebuffer"===q||"framebufferCube"===q?(g.command(0<a.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',c.commandStr),l=m(function(b){return b.link(a.color[0])})):g.commandRaise('invalid data for uniform "'+b+'"',c.commandStr)}else f(a)?l=m(function(f){return f.global.def("[",H(a.length,function(c){g.command("number"===
typeof a[c]||"boolean"===typeof a[c],"invalid uniform "+b,f.commandStr);return a[c]}),"]")}):g.commandRaise('invalid or missing data for uniform "'+b+'"',c.commandStr);l.value=a;n[b]=l});l(a).forEach(function(b){var f=a[b];n[b]=k(f,function(b,c){return b.invoke(c,f)})});return n}function Ea(b,c){var h=b["static"],n=b.dynamic,q={};l(h).forEach(function(b){var n=h[b],p=d.id(b),k=new ia;if(a(n))k.state=1,k.buffer=r.getBuffer(r.create(n,34962,!1,!0)),k.type=0;else{var y=r.getBuffer(n);if(y)k.state=1,
k.buffer=y,k.type=0;else if(g.command("object"===typeof n&&n,"invalid data for attribute "+b,c.commandStr),"constant"in n){var w=n.constant;k.buffer="null";k.state=2;"number"===typeof w?k.x=w:(g.command(f(w)&&0<w.length&&4>=w.length,"invalid constant for attribute "+b,c.commandStr),v.forEach(function(b,f){f<w.length&&(k[b]=w[f])}))}else{y=a(n.buffer)?r.getBuffer(r.create(n.buffer,34962,!1,!0)):r.getBuffer(n.buffer);g.command(!!y,'missing buffer for attribute "'+b+'"',c.commandStr);var D=n.offset|
0;g.command(0<=D,'invalid offset for attribute "'+b+'"',c.commandStr);var G=n.stride|0;g.command(0<=G&&256>G,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',c.commandStr);var z=n.size|0;g.command(!("size"in n)||0<z&&4>=z,'invalid size for attribute "'+b+'", must be 1,2,3,4',c.commandStr);var H=!!n.normalized,x=0;"type"in n&&(g.commandParameter(n.type,t,"invalid type for attribute "+b,c.commandStr),x=t[n.type]);var oa=n.divisor|0;g.optional(function(){"divisor"in n&&(g.command(0===
oa||X,'cannot specify divisor for attribute "'+b+'", instancing not supported',c.commandStr),g.command(0<=oa,'invalid divisor for attribute "'+b+'"',c.commandStr));var f=c.commandStr,h="buffer offset divisor normalized type size stride".split(" ");l(n).forEach(function(c){g.command(0<=h.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+b+'" (valid parameters are '+h+")",f)})});k.buffer=y;k.state=1;k.size=z;k.normalized=H;k.type=x||y.dtype;k.offset=D;k.stride=G;k.divisor=oa}}q[b]=m(function(b,
f){var c=b.attribCache;if(p in c)return c[p];var h={isStream:!1};l(k).forEach(function(b){h[b]=k[b]});k.buffer&&(h.buffer=b.link(k.buffer),h.type=h.type||h.buffer+".dtype");return c[p]=h})});l(n).forEach(function(b){var f=n[b];q[b]=k(f,function(c,h){function a(b){h(d[b],"=",n,".",b,"|0;")}var n=c.invoke(h,f),q=c.shared,t=c.constants,p=q.isBufferArgs,k=q.buffer;g.optional(function(){c.assert(h,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+p+"("+n+")||"+k+".getBuffer("+n+")||"+k+".getBuffer("+
n+".buffer)||"+p+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+q.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+b+'"')});var d={isStream:h.def(!1)},y=new ia;y.state=1;l(y).forEach(function(b){d[b]=h.def(""+y[b])});var w=d.buffer,m=d.type;h("if(",p,"(",n,")){",d.isStream,"=true;",w,"=",k,".createStream(",34962,",",n,");",m,"=",w,".dtype;","}else{",w,"=",k,".getBuffer(",n,");","if(",w,"){",m,"=",w,".dtype;",'}else if("constant" in ',n,"){",d.state,"=",
2,";","if(typeof "+n+'.constant === "number"){',d[v[0]],"=",n,".constant;",v.slice(1).map(function(b){return d[b]}).join("="),"=0;","}else{",v.map(function(b,f){return d[b]+"="+n+".constant.length>"+f+"?"+n+".constant["+f+"]:0;"}).join(""),"}}else{","if(",p,"(",n,".buffer)){",w,"=",k,".createStream(",34962,",",n,".buffer);","}else{",w,"=",k,".getBuffer(",n,".buffer);","}",m,'="type" in ',n,"?",t.glTypes,"[",n,".type]:",w,".dtype;",d.normalized,"=!!",n,".normalized;");a("size");a("offset");a("stride");
a("divisor");h("}}");h.exit("if(",d.isStream,"){",k,".destroyStream(",w,");","}");return d})});return q}function yb(b){var f=b["static"],c=b.dynamic,h={};l(f).forEach(function(b){var c=f[b];h[b]=m(function(b,f){return"number"===typeof c||"boolean"===typeof c?""+c:b.link(c)})});l(c).forEach(function(b){var f=c[b];h[b]=k(f,function(b,c){return b.invoke(c,f)})});return h}function Ka(b,f,c,h,a){function n(b){var f=k[b];f&&(w[b]=f)}var q=b["static"],t=b.dynamic;g.optional(function(){function b(c){l(c).forEach(function(b){g.command(0<=
f.indexOf(b),'unknown parameter "'+b+'"',a.commandStr)})}var f="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ba);b(q);b(t)});var p=S(b,f),v=Gb(b,a),k=$a(b,v,a),d=ma(b,a),w=da(b,a),m=B(b,a,p);n("viewport");n(P("scissor.box"));var D=0<l(w).length,v={framebuffer:v,draw:d,shader:m,state:w,dirty:D,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};v.profile=Q(b,a);v.uniforms=Ba(c,a);v.drawVAO=v.scopeVAO=d.vao;if(!v.drawVAO&&m.program&&!p&&y.angle_instanced_arrays&&
d["static"].elements){var G=!0;b=m.program.attributes.map(function(b){b=f["static"][b];G=G&&!!b;return b});if(G&&0<b.length){var H=la.getVAO(la.createVAO({attributes:b,elements:d["static"].elements}));v.drawVAO=new z(null,null,null,function(b,f){return b.link(H)});v.useVAO=!0}}p?v.useVAO=!0:v.attributes=Ea(f,a);v.context=yb(h,a);return v}function Y(b,f,c){var h=b.shared.context,a=b.scope();l(c).forEach(function(l){f.save(h,"."+l);var n=c[l].append(b,f);Array.isArray(n)?a(h,".",l,"=[",n.join(),"];"):
a(h,".",l,"=",n,";")});f(a)}function mb(b,f,c,h){var a=b.shared,l=a.gl,n=a.framebuffer,g;fa&&(g=f.def(a.extensions,".webgl_draw_buffers"));var q=b.constants,a=q.drawBuffer,q=q.backBuffer;b=c?c.append(b,f):f.def(n,".next");h||f("if(",b,"!==",n,".cur){");f("if(",b,"){",l,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&f(g,".drawBuffersWEBGL(",a,"[",b,".colorAttachments.length]);");f("}else{",l,".bindFramebuffer(",36160,",null);");fa&&f(g,".drawBuffersWEBGL(",q,");");f("}",n,".cur=",b,";");h||
f("}")}function ga(b,f,c){var h=b.shared,a=h.gl,n=b.current,g=b.next,q=h.current,t=h.next,p=b.cond(q,".dirty");ba.forEach(function(f){f=P(f);if(!(f in c.state)){var h,l;if(f in g){h=g[f];l=n[f];var v=H(M[f].length,function(b){return p.def(h,"[",b,"]")});p(b.cond(v.map(function(b,f){return b+"!=="+l+"["+f+"]"}).join("||")).then(a,".",ya[f],"(",v,");",v.map(function(b,f){return l+"["+f+"]="+b}).join(";"),";"))}else h=p.def(t,".",f),v=b.cond(h,"!==",q,".",f),p(v),f in xa?v(b.cond(h).then(a,".enable(",
xa[f],");")["else"](a,".disable(",xa[f],");"),q,".",f,"=",h,";"):v(a,".",ya[f],"(",h,");",q,".",f,"=",h,";")}});0===l(c.state).length&&p(q,".dirty=false;");f(p)}function qa(b,h,a,n){var g=b.shared,q=b.current,t=g.current,p=g.gl;c(l(a)).forEach(function(c){var l=a[c];if(!n||n(l)){var g=l.append(b,h);if(xa[c]){var v=xa[c];D(l)?g?h(p,".enable(",v,");"):h(p,".disable(",v,");"):h(b.cond(g).then(p,".enable(",v,");")["else"](p,".disable(",v,");"));h(t,".",c,"=",g,";")}else if(f(g)){var k=q[c];h(p,".",ya[c],
"(",g,");",g.map(function(b,f){return k+"["+f+"]="+b}).join(";"),";")}else h(p,".",ya[c],"(",g,");",t,".",c,"=",g,";")}})}function $b(b,f){X&&(b.instancing=f.def(b.shared.extensions,".angle_instanced_arrays"))}function sc(b,f,c,h,a){function l(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function n(b){d=f.def();b(d,"=",l(),";");"string"===typeof a?b(p,".count+=",a,";"):b(p,".count++;");Na&&(h?(y=f.def(),b(y,"=",k,".getNumPendingQueries();")):b(k,".beginQuery(",p,");"))}
function g(b){b(p,".cpuTime+=",l(),"-",d,";");Na&&(h?b(k,".pushScopeStats(",y,",",k,".getNumPendingQueries(),",p,");"):b(k,".endQuery();"))}function q(b){var c=f.def(v,".profile");f(v,".profile=",b,";");f.exit(v,".profile=",c,";")}var t=b.shared,p=b.stats,v=t.current,k=t.timer;c=c.profile;var d,y;if(c){if(D(c)){c.enable?(n(f),g(f.exit),q("true")):q("false");return}c=c.append(b,f);q(c)}else c=f.def(v,".profile");t=b.block();n(t);f("if(",c,"){",t,"}");b=b.block();g(b);f.exit("if(",c,"){",b,"}")}function ic(b,
f,c,h,a){function n(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function q(c,h,a){function l(){f("if(!",k,".buffer){",g,".enableVertexAttribArray(",p,");}");var c=a.type,n;n=a.size?f.def(a.size,"||",h):h;f("if(",k,".type!==",c,"||",k,".size!==",n,"||",w.map(function(b){return k+"."+b+"!=="+a[b]}).join("||"),"){",g,".bindBuffer(",34962,",",d,".buffer);",g,".vertexAttribPointer(",[p,n,c,
a.normalized,a.stride,a.offset],");",k,".type=",c,";",k,".size=",n,";",w.map(function(b){return k+"."+b+"="+a[b]+";"}).join(""),"}");X&&(c=a.divisor,f("if(",k,".divisor!==",c,"){",b.instancing,".vertexAttribDivisorANGLE(",[p,c],");",k,".divisor=",c,";}"))}function n(){f("if(",k,".buffer){",g,".disableVertexAttribArray(",p,");",k,".buffer=null;","}if(",v.map(function(b,f){return k+"."+b+"!=="+y[f]}).join("||"),"){",g,".vertexAttrib4f(",p,",",y,");",v.map(function(b,f){return k+"."+b+"="+y[f]+";"}).join(""),
"}")}var g=t.gl,p=f.def(c,".location"),k=f.def(t.attributes,"[",p,"]");c=a.state;var d=a.buffer,y=[a.x,a.y,a.z,a.w],w=["buffer","normalized","offset","stride"];1===c?l():2===c?n():(f("if(",c,"===",1,"){"),l(),f("}else{"),n(),f("}"))}var t=b.shared;h.forEach(function(h){var t=h.name,p=c.attributes[t],v;if(p){if(!a(p))return;v=p.append(b,f)}else{if(!a(J))return;var k=b.scopeAttrib(t);g.optional(function(){b.assert(f,k+".state","missing attribute "+t)});v={};l(new ia).forEach(function(b){v[b]=f.def(k,
".",b)})}q(b.link(h),n(h.info.type),v)})}function td(b,c,h,a,l,n){for(var q=b.shared,t=q.gl,p,v=0;v<a.length;++v){var k=a[v],y=k.name,w=k.info.type,m=h.uniforms[y],k=b.link(k)+".location",G;if(m){if(!l(m))continue;if(D(m)){var z=m.value;g.command(null!==z&&"undefined"!==typeof z,'missing uniform "'+y+'"',b.commandStr);if(35678===w||35680===w)g.command("function"===typeof z&&(35678===w&&("texture2d"===z._reglType||"framebuffer"===z._reglType)||35680===w&&("textureCube"===z._reglType||"framebufferCube"===
z._reglType)),"invalid texture for uniform "+y,b.commandStr),m=b.link(z._texture||z.color[0]._texture),c(t,".uniform1i(",k,",",m+".bind());"),c.exit(m,".unbind();");else if(35674===w||35675===w||35676===w){g.optional(function(){g.command(f(z),"invalid matrix for uniform "+y,b.commandStr);g.command(35674===w&&4===z.length||35675===w&&9===z.length||35676===w&&16===z.length,"invalid length for matrix uniform "+y,b.commandStr)});var m=b.global.def("new Float32Array(["+Array.prototype.slice.call(z)+"])"),
x=2;35675===w?x=3:35676===w&&(x=4);c(t,".uniformMatrix",x,"fv(",k,",false,",m,");")}else{switch(w){case 5126:g.commandType(z,"number","uniform "+y,b.commandStr);p="1f";break;case 35664:g.command(f(z)&&2===z.length,"uniform "+y,b.commandStr);p="2f";break;case 35665:g.command(f(z)&&3===z.length,"uniform "+y,b.commandStr);p="3f";break;case 35666:g.command(f(z)&&4===z.length,"uniform "+y,b.commandStr);p="4f";break;case 35670:g.commandType(z,"boolean","uniform "+y,b.commandStr);p="1i";break;case 5124:g.commandType(z,
"number","uniform "+y,b.commandStr);p="1i";break;case 35671:g.command(f(z)&&2===z.length,"uniform "+y,b.commandStr);p="2i";break;case 35667:g.command(f(z)&&2===z.length,"uniform "+y,b.commandStr);p="2i";break;case 35672:g.command(f(z)&&3===z.length,"uniform "+y,b.commandStr);p="3i";break;case 35668:g.command(f(z)&&3===z.length,"uniform "+y,b.commandStr);p="3i";break;case 35673:g.command(f(z)&&4===z.length,"uniform "+y,b.commandStr);p="4i";break;case 35669:g.command(f(z)&&4===z.length,"uniform "+y,
b.commandStr),p="4i"}c(t,".uniform",p,"(",k,",",f(z)?Array.prototype.slice.call(z):z,");")}continue}else G=m.append(b,c)}else{if(!l(J))continue;G=c.def(q.uniforms,"[",d.id(y),"]")}35678===w?(g(!Array.isArray(G),"must specify a scalar prop for textures"),c("if(",G,"&&",G,'._reglType==="framebuffer"){',G,"=",G,".color[0];","}")):35680===w&&(g(!Array.isArray(G),"must specify a scalar prop for cube maps"),c("if(",G,"&&",G,'._reglType==="framebufferCube"){',G,"=",G,".color[0];","}"));g.optional(function(){function f(h,
a){b.assert(c,h,'bad data or missing for uniform "'+y+'".  '+a)}function h(b){g(!Array.isArray(G),"must not specify an array type for uniform");f("typeof "+G+'==="'+b+'"',"invalid type, expected "+b)}function a(c,h){Array.isArray(G)?g(G.length===c,"must have length "+c):f(q.isArrayLike+"("+G+")&&"+G+".length==="+c,"invalid vector, should have length "+c,b.commandStr)}function l(c){g(!Array.isArray(G),"must not specify a value type");f("typeof "+G+'==="function"&&'+G+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(w){case 5124:h("number");break;case 35667:a(2,"number");break;case 35668:a(3,"number");break;case 35669:a(4,"number");break;case 5126:h("number");break;case 35664:a(2,"number");break;case 35665:a(3,"number");break;case 35666:a(4,"number");break;case 35670:h("boolean");break;case 35671:a(2,"boolean");break;case 35672:a(3,"boolean");break;case 35673:a(4,"boolean");break;case 35674:a(4,"number");break;case 35675:a(9,"number");break;case 35676:a(16,
"number");break;case 35678:l(3553);break;case 35680:l(34067)}});m=1;switch(w){case 35678:case 35680:m=c.def(G,"._texture");c(t,".uniform1i(",k,",",m,".bind());");c.exit(m,".unbind();");continue;case 5124:case 35670:p="1i";break;case 35667:case 35671:p="2i";m=2;break;case 35668:case 35672:p="3i";m=3;break;case 35669:case 35673:p="4i";m=4;break;case 5126:p="1f";break;case 35664:p="2f";m=2;break;case 35665:p="3f";m=3;break;case 35666:p="4f";m=4;break;case 35674:p="Matrix2fv";break;case 35675:p="Matrix3fv";
break;case 35676:p="Matrix4fv"}if("M"===p.charAt(0)){c(t,".uniform",p,"(",k,",");var k=Math.pow(w-35674+2,2),oa=b.global.def("new Float32Array(",k,")");Array.isArray(G)?c("false,(",H(k,function(b){return oa+"["+b+"]="+G[b]}),",",oa,")"):c("false,(Array.isArray(",G,")||",G," instanceof Float32Array)?",G,":(",H(k,function(b){return oa+"["+b+"]="+G+"["+b+"]"}),",",oa,")");c(");")}else{if(1<m){for(var x=[],u=[],K=0;K<m;++K)Array.isArray(G)?u.push(G[K]):u.push(c.def(G+"["+K+"]")),n&&x.push(c.def());n&&
c("if(!",b.batchId,"||",x.map(function(b,f){return b+"!=="+u[f]}).join("||"),"){",x.map(function(b,f){return b+"="+u[f]+";"}).join(""));c(t,".uniform",p,"(",k,",",u.join(","),");")}else g(!Array.isArray(G),"uniform value must not be an array"),n&&(m=c.def(),c("if(!",b.batchId,"||",m,"!==",G,"){",m,"=",G,";")),c(t,".uniform",p,"(",k,",",G,");");n&&c("}")}}}function zc(b,f,c,h){function a(l){var n=v[l];return n?n.contextDep&&h.contextDynamic||n.propDep?n.append(b,c):n.append(b,f):f.def(p,".",l)}function l(){function b(){c(G,
".drawElementsInstancedANGLE(",[d,w,z,y+"<<(("+z+"-5121)>>1)",m],");")}function f(){c(G,".drawArraysInstancedANGLE(",[d,y,w,m],");")}k&&"null"!==k?H?b():(c("if(",k,"){"),b(),c("}else{"),f(),c("}")):f()}function n(){function b(){c(t+".drawElements("+[d,w,z,y+"<<(("+z+"-5121)>>1)"]+");")}function f(){c(t+".drawArrays("+[d,y,w]+");")}k&&"null"!==k?H?b():(c("if(",k,"){"),b(),c("}else{"),f(),c("}")):f()}var q=b.shared,t=q.gl,p=q.draw,v=h.draw,k=function(){var a=v.elements,l=f;if(a){if(a.contextDep&&h.contextDynamic||
a.propDep)l=c;a=a.append(b,l);v.elementsActive&&l("if("+a+")"+t+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=l.def(),l(a,"=",p,".","elements",";","if(",a,"){",t,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",q.vao,".currentVAO){",a,"=",b.shared.elements+".getElements("+q.vao,".currentVAO.elements);",ra?"":"if("+a+")"+t+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),d=a("primitive"),y=a("offset"),w=function(){var a=v.count,l,n=f;if(a){if(a.contextDep&&h.contextDynamic||
a.propDep)n=c;l=a.append(b,n);g.optional(function(){a.MISSING&&b.assert(f,"false","missing vertex count");a.DYNAMIC&&b.assert(n,l+">=0","missing vertex count")})}else l=n.def(p,".","count"),g.optional(function(){b.assert(n,l+">=0","missing vertex count")});return l}();if("number"===typeof w){if(0===w)return}else c("if(",w,"){"),c.exit("}");var m,G;X&&(m=a("instances"),G=b.instancing);var z=k+".type",H=v.elements&&D(v.elements)&&!v.vaoActive;X&&("number"!==typeof m||0<=m)?"string"===typeof m?(c("if(",
m,">0){"),l(),c("}else if(",m,"<0){"),n(),c("}")):l():n()}function Z(b,f,c,h,a){var l=na();a=l.proc("body",a);g.optional(function(){l.commandStr=f.commandStr;l.command=l.link(f.commandStr)});X&&(l.instancing=a.def(l.shared.extensions,".angle_instanced_arrays"));b(l,a,c,h);return l.compile().body}function N(b,f,c,h){$b(b,f);c.useVAO?c.drawVAO?f(b.shared.vao,".setVAO(",c.drawVAO.append(b,f),");"):f(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(f(b.shared.vao,".setVAO(null);"),ic(b,f,c,h.attributes,
function(){return!0}));td(b,f,c,h.uniforms,function(){return!0},!1);zc(b,f,f,c)}function ha(b,f){var c=b.proc("draw",1);$b(b,c);Y(b,c,f.context);mb(b,c,f.framebuffer);ga(b,c,f);qa(b,c,f.state);sc(b,c,f,!1,!0);var h=f.shader.progVar.append(b,c);c(b.shared.gl,".useProgram(",h,".program);");if(f.shader.program)N(b,c,f,f.shader.program);else{c(b.shared.vao,".setVAO(null);");var a=b.global.def("{}"),n=c.def(h,".id"),g=c.def(a,"[",n,"]");c(b.cond(g).then(g,".call(this,a0);")["else"](g,"=",a,"[",n,"]=",
b.link(function(c){return Z(N,b,f,c,1)}),"(",h,");",g,".call(this,a0);"))}0<l(f.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function Fa(b,f,c,h){function a(){return!0}b.batchId="a1";$b(b,f);ic(b,f,c,h.attributes,a);td(b,f,c,h.uniforms,a,!1);zc(b,f,f,c)}function sb(b,f,c,h){function a(b){return b.contextDep&&n||b.propDep}function l(b){return!a(b)}$b(b,f);var n=c.contextDep,g=f.def(),q=f.def();b.shared.props=q;b.batchId=g;var t=b.scope(),p=b.scope();
f(t.entry,"for(",g,"=0;",g,"<","a1",";++",g,"){",q,"=","a0","[",g,"];",p,"}",t.exit);c.needsContext&&Y(b,p,c.context);c.needsFramebuffer&&mb(b,p,c.framebuffer);qa(b,p,c.state,a);c.profile&&a(c.profile)&&sc(b,p,c,!1,!0);h?(c.useVAO?c.drawVAO?a(c.drawVAO)?p(b.shared.vao,".setVAO(",c.drawVAO.append(b,p),");"):t(b.shared.vao,".setVAO(",c.drawVAO.append(b,t),");"):t(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(t(b.shared.vao,".setVAO(null);"),ic(b,t,c,h.attributes,l),ic(b,p,c,h.attributes,a)),
td(b,t,c,h.uniforms,l,!1),td(b,p,c,h.uniforms,a,!0),zc(b,t,p,c)):(f=b.global.def("{}"),h=c.shader.progVar.append(b,p),q=p.def(h,".id"),t=p.def(f,"[",q,"]"),p(b.shared.gl,".useProgram(",h,".program);","if(!",t,"){",t,"=",f,"[",q,"]=",b.link(function(f){return Z(Fa,b,c,f,2)}),"(",h,");}",t,".call(this,a0[",g,"],",g,");"))}function Pc(b,c){function f(b){return b.contextDep&&a||b.propDep}var h=b.proc("batch",2);b.batchId="0";$b(b,h);var a=!1,n=!0;l(c.context).forEach(function(b){a=a||c.context[b].propDep});
a||(Y(b,h,c.context),n=!1);var g=c.framebuffer,q=!1;g?(g.propDep?a=q=!0:g.contextDep&&a&&(q=!0),q||mb(b,h,g)):mb(b,h,null);c.state.viewport&&c.state.viewport.propDep&&(a=!0);ga(b,h,c);qa(b,h,c.state,function(b){return!f(b)});c.profile&&f(c.profile)||sc(b,h,c,!1,"a1");c.contextDep=a;c.needsContext=n;c.needsFramebuffer=q;n=c.shader.progVar;if(n.contextDep&&a||n.propDep)sb(b,h,c,null);else if(n=n.append(b,h),h(b.shared.gl,".useProgram(",n,".program);"),c.shader.program)sb(b,h,c,c.shader.program);else{h(b.shared.vao,
".setVAO(null);");var g=b.global.def("{}"),q=h.def(n,".id"),t=h.def(g,"[",q,"]");h(b.cond(t).then(t,".call(this,a0,a1);")["else"](t,"=",g,"[",q,"]=",b.link(function(f){return Z(sb,b,c,f,2)}),"(",n,");",t,".call(this,a0,a1);"))}0<l(c.state).length&&h(b.shared.current,".dirty=true;");b.shared.vao&&h(b.shared.vao,".setVAO(null);")}function Qc(b,h){function a(c){var f=h.shader[c];f&&n.set(g.shader,"."+c,f.append(b,n))}var n=b.proc("scope",3);b.batchId="a2";var g=b.shared,q=g.current;Y(b,n,h.context);
h.framebuffer&&h.framebuffer.append(b,n);c(l(h.state)).forEach(function(c){var a=h.state[c].append(b,n);f(a)?a.forEach(function(f,h){n.set(b.next[c],"["+h+"]",f)}):n.set(g.next,"."+c,a)});sc(b,n,h,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var f=h.draw[c];f&&n.set(g.draw,"."+c,""+f.append(b,n))});l(h.uniforms).forEach(function(c){var f=h.uniforms[c].append(b,n);Array.isArray(f)&&(f="["+f.join()+"]");n.set(g.uniforms,"["+d.id(c)+"]",f)});l(h.attributes).forEach(function(c){var f=
h.attributes[c].append(b,n),a=b.scopeAttrib(c);l(new ia).forEach(function(b){n.set(a,"."+b,f[b])})});h.scopeVAO&&n.set(g.vao,".targetVAO",h.scopeVAO.append(b,n));a("vert");a("frag");0<l(h.state).length&&(n(q,".dirty=true;"),n.exit(q,".dirty=true;"));n("a1(",b.shared.context,",a0,",b.batchId,");")}function L(b){if("object"===typeof b&&!f(b)){for(var c=l(b),h=0;h<c.length;++h)if(n.isDynamic(b[c[h]]))return!0;return!1}}function E(b,c,f){function h(b,c){q.forEach(function(f){var h=a[f];n.isDynamic(h)&&
(h=b.invoke(c,h),c(d,".",f,"=",h,";"))})}var a=c["static"][f];if(a&&L(a)){var g=b.global,q=l(a),t=!1,p=!1,v=!1,d=b.global.def("{}");q.forEach(function(c){var f=a[c];if(n.isDynamic(f))"function"===typeof f&&(f=a[c]=n.unbox(f)),c=k(f,null),t=t||c.thisDep,v=v||c.propDep,p=p||c.contextDep;else{g(d,".",c,"=");switch(typeof f){case "number":g(f);break;case "string":g('"',f,'"');break;case "object":Array.isArray(f)&&g("[",f.join(),"]");break;default:g(b.link(f))}g(";")}});c.dynamic[f]=new n.DynamicVariable(4,
{thisDep:t,contextDep:p,propDep:v,ref:d,append:h});delete c["static"][f]}}var ia=la.Record,sa={add:32774,subtract:32778,"reverse subtract":32779};y.ext_blend_minmax&&(sa.min=32775,sa.max=32776);var X=y.angle_instanced_arrays,fa=y.webgl_draw_buffers,ra=y.oes_vertex_array_object,M={dirty:!0,profile:V.profile},F={},ba=[],xa={},ya={};O("dither",3024);O("blend.enable",3042);T("blend.color","blendColor",[0,0,0,0]);T("blend.equation","blendEquationSeparate",[32774,32774]);T("blend.func","blendFuncSeparate",
[1,0,1,0]);O("depth.enable",2929,!0);T("depth.func","depthFunc",513);T("depth.range","depthRange",[0,1]);T("depth.mask","depthMask",!0);T("colorMask","colorMask",[!0,!0,!0,!0]);O("cull.enable",2884);T("cull.face","cullFace",1029);T("frontFace","frontFace",2305);T("lineWidth","lineWidth",1);O("polygonOffset.enable",32823);T("polygonOffset.offset","polygonOffset",[0,0]);O("sample.alpha",32926);O("sample.enable",32928);T("sample.coverage","sampleCoverage",[1,!1]);O("stencil.enable",2960);T("stencil.mask",
"stencilMask",-1);T("stencil.func","stencilFunc",[519,0,-1]);T("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);T("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);O("scissor.enable",3089);T("scissor.box","scissor",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);T("viewport","viewport",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);var Ja={gl:h,context:ea,strings:d,next:F,current:M,draw:Cb,elements:K,buffer:r,shader:Sa,attributes:la.state,vao:la,uniforms:ka,framebuffer:W,
extensions:y,timer:Na,isBufferArgs:a},C={primTypes:q,compareFuncs:x,blendFuncs:w,blendEquations:sa,stencilOps:u,glTypes:t,orientationType:ca};g.optional(function(){Ja.isArrayLike=f});fa&&(C.backBuffer=[1029],C.drawBuffer=H(e.maxDrawbuffers,function(b){return 0===b?[0]:H(b,function(b){return 36064+b})}));var oc=0;return{next:F,current:M,procs:function(){var b=na(),c=b.proc("poll"),h=b.proc("refresh"),a=b.block();c(a);h(a);var n=b.shared,g=n.gl,q=n.next,t=n.current;a(t,".dirty=false;");mb(b,c);mb(b,
h,null,!0);var p;X&&(p=b.link(X));y.oes_vertex_array_object&&h(b.link(y.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var v=0;v<e.maxAttributes;++v){var k=h.def(n.attributes,"[",v,"]"),d=b.cond(k,".buffer");d.then(g,".enableVertexAttribArray(",v,");",g,".bindBuffer(",34962,",",k,".buffer.buffer);",g,".vertexAttribPointer(",v,",",k,".size,",k,".type,",k,".normalized,",k,".stride,",k,".offset);")["else"](g,".disableVertexAttribArray(",v,");",g,".vertexAttrib4f(",v,",",k,".x,",k,".y,",k,
".z,",k,".w);",k,".buffer=null;");h(d);X&&h(p,".vertexAttribDivisorANGLE(",v,",",k,".divisor);")}h(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");l(xa).forEach(function(f){var l=xa[f],n=a.def(q,".",f),p=b.block();p("if(",n,"){",g,".enable(",l,")}else{",g,".disable(",l,")}",t,".",f,"=",n,";");h(p);c("if(",n,"!==",t,".",f,"){",p,"}")});l(ya).forEach(function(l){var n=ya[l],p=M[l],v,k,d=b.block();d(g,".",n,"(");f(p)?(n=p.length,v=b.global.def(q,".",l),k=b.global.def(t,
".",l),d(H(n,function(b){return v+"["+b+"]"}),");",H(n,function(b){return k+"["+b+"]="+v+"["+b+"];"}).join("")),c("if(",H(n,function(b){return v+"["+b+"]!=="+k+"["+b+"]"}).join("||"),"){",d,"}")):(v=a.def(q,".",l),k=a.def(t,".",l),d(v,");",t,".",l,"=",v,";"),c("if(",v,"!==",k,"){",d,"}"));h(d)});return b.compile()}(),compile:function(c,f,h,a,n){var g=na();g.stats=g.link(n);l(f["static"]).forEach(function(b){E(g,f,b)});G.forEach(function(b){E(g,c,b)});var q=Ka(c,f,h,a,g);ha(g,q);Qc(g,q);Pc(g,q);return b(g.compile(),
{destroy:function(){q.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(d,e,r){function a(c,a){this.id=k++;this.type=c;this.data=a}function c(a){if(0===a.length)return[];var g=a.charAt(0),b=a.charAt(a.length-1);if(1<a.length&&g===b&&('"'===g||"'"===
g))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(g=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return c(a.substr(0,g.index)).concat(c(g[1])).concat(c(a.substr(g.index+g[0].length)));g=a.split(".");if(1===g.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(b=0;b<g.length;++b)a=a.concat(c(g[b]));return a}function z(a){return"["+c(a).join("][")+"]"}function D(c,g){if("function"===typeof c)return new a(0,c);if("number"===typeof c||
"boolean"===typeof c)return new a(5,c);if(Array.isArray(c))return new a(6,c.map(function(b,c){return D(b,g+"["+c+"]")}));if(c instanceof a)return c;m(!1,"invalid option type in uniform "+g)}var m=d("./util/check"),k=0;e.exports={DynamicVariable:a,define:function(c,g){return new a(c,z(g+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof a},unbox:D,accessor:z}},{"./util/check":21}],10:[function(d,e,r){var a=d("./util/check"),c=d("./util/is-typed-array"),z=d("./util/is-ndarray"),
D=d("./util/values"),m=d("./constants/primitives.json"),k=d("./constants/usage.json");e.exports=function(l,g,b,p){function d(b){this.id=n++;f[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function y(f,h,n,q,t,p,k){f.buffer.bind();var d;h?((d=k)||c(h)&&(!z(h)||c(h.data))||(d=g.oes_element_index_uint?5125:5123),b._initBuffer(f.buffer,h,n,d,3)):(l.bufferData(34963,p,n),f.buffer.dtype=d||5121,f.buffer.usage=n,f.buffer.dimension=3,f.buffer.byteLength=p);d=k;if(!k){switch(f.buffer.dtype){case 5121:case 5120:d=
5121;break;case 5123:case 5122:d=5123;break;case 5125:case 5124:d=5125;break;default:a.raise("unsupported type for element array")}f.buffer.dtype=d}f.type=d;a(5125!==d||!!g.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");h=t;0>h&&(h=f.buffer.byteLength,5123===d?h>>=1:5125===d&&(h>>=2));f.vertCount=h;h=q;0>q&&(h=4,q=f.buffer.dimension,1===q&&(h=0),2===q&&(h=1),3===q&&(h=4));f.primType=h}function h(b){p.elementsCount--;a(null!==b.buffer,"must not double destroy elements");
delete f[b.id];b.buffer.destroy();b.buffer=null}var f={},n=0,q={uint8:5121,uint16:5123};g.oes_element_index_uint&&(q.uint32=5125);d.prototype.bind=function(){this.buffer.bind()};var t=[];return{create:function(f,n){function l(b){if(b)if("number"===typeof b)g(b),t.primType=4,t.vertCount=b|0,t.type=5121;else{var f=null,h=35044,n=-1,p=-1,v=0,d=0;if(Array.isArray(b)||c(b)||z(b))f=b;else if(a.type(b,"object","invalid arguments for elements"),"data"in b&&(f=b.data,a(Array.isArray(f)||c(f)||z(f),"invalid data for element buffer")),
"usage"in b&&(a.parameter(b.usage,k,"invalid element buffer usage"),h=k[b.usage]),"primitive"in b&&(a.parameter(b.primitive,m,"invalid element buffer primitive"),n=m[b.primitive]),"count"in b&&(a("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),p=b.count|0),"type"in b&&(a.parameter(b.type,q,"invalid buffer type"),d=q[b.type]),"length"in b)v=b.length|0;else if(v=p,5123===d||5122===d)v*=2;else if(5125===d||5124===d)v*=4;y(t,f,h,n,p,v,d)}else g(),t.primType=4,t.vertCount=0,
t.type=5121;return l}var g=b.create(null,34963,!0),t=new d(g._buffer);p.elementsCount++;l(f);l._reglType="elements";l._elements=t;l.subdata=function(b,c){g.subdata(b,c);return l};l.destroy=function(){h(t)};return l},createStream:function(c){var f=t.pop();f||(f=new d(b.create(null,34963,!0,!1)._buffer));y(f,c,35040,-1,-1,0,0);return f},destroyStream:function(b){t.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof d?b._elements:null},clear:function(){D(f).forEach(h)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(d,e,r){var a=d("./util/sorted-object-keys"),c=d("./util/check");e.exports=function(d,D){function m(b){c.type(b,"string","extension name must be string");b=b.toLowerCase();var a;try{a=k[b]=d.getExtension(b)}catch(l){}return!!a}for(var k={},l=0;l<D.extensions.length;++l){var g=D.extensions[l];if(!m(g))return D.onDestroy(),D.onDone('"'+g+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}D.optionalExtensions.forEach(m);return{extensions:k,restore:function(){a(k).forEach(function(b){if(k[b]&&!m(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(d,e,r){var a=d("./util/check"),c=d("./util/values"),z=d("./util/extend"),D=[6407,6408],m=[];m[6408]=4;m[6407]=3;var k=[];k[5121]=1;k[5126]=4;k[36193]=2;var l=[32854,32855,36194,35907,34842,34843,34836],g={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};e.exports=function(b,p,d,y,h,f){function n(b,c,f){this.target=b;this.texture=c;this.renderbuffer=f;var h=b=0;c?(b=c.width,h=c.height):f&&(b=f.width,h=f.height);this.width=b;this.height=h}function q(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function t(b,c,f){if(b){if(b.texture){b=b.texture._texture;var h=Math.max(1,b.height);a(Math.max(1,b.width)===c&&h===f,"inconsistent width/height for supplied texture")}else b=
b.renderbuffer._renderbuffer,a(b.width===c&&b.height===f,"inconsistent width/height for renderbuffer");b.refCount+=1}}function v(c,f){f&&(f.texture?b.framebufferTexture2D(36160,c,f.target,f.texture._texture.texture,0):b.framebufferRenderbuffer(36160,c,36161,f.renderbuffer._renderbuffer.renderbuffer))}function G(b){var c=3553,f=null,h=null,l=b;"object"===typeof b&&(l=b.data,"target"in b&&(c=b.target|0));a.type(l,"function","invalid attachment data");b=l._reglType;"texture2d"===b?(f=l,a(3553===c)):
"textureCube"===b?(f=l,a(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===b?(h=l,c=36161):a.raise("invalid regl object for attachment");return new n(c,f,h)}function w(b,c,f,a,l){if(f)return b=y.create2D({width:b,height:c,format:a,type:l}),b._texture.refCount=0,new n(3553,b,null);b=h.create({width:b,height:c,format:a});b._renderbuffer.refCount=0;return new n(36161,null,b)}function e(b){return b&&(b.texture||b.renderbuffer)}function x(b,c,f){b&&(b.texture?b.texture.resize(c,f):b.renderbuffer&&
b.renderbuffer.resize(c,f),b.width=c,b.height=f)}function u(){this.id=K++;ja[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function oa(b){b.colorAttachments.forEach(q);q(b.depthAttachment);q(b.stencilAttachment);q(b.depthStencilAttachment)}function ca(c){var h=c.framebuffer;a(h,"must not double destroy framebuffer");b.deleteFramebuffer(h);c.framebuffer=null;f.framebufferCount--;
delete ja[c.id]}function J(c){var f;b.bindFramebuffer(36160,c.framebuffer);var h=c.colorAttachments;for(f=0;f<h.length;++f)v(36064+f,h[f]);for(f=h.length;f<d.maxColorAttachments;++f)b.framebufferTexture2D(36160,36064+f,3553,null,0);b.framebufferTexture2D(36160,33306,3553,null,0);b.framebufferTexture2D(36160,36096,3553,null,0);b.framebufferTexture2D(36160,36128,3553,null,0);v(36096,c.depthAttachment);v(36128,c.stencilAttachment);v(33306,c.depthStencilAttachment);c=b.checkFramebufferStatus(36160);b.isContextLost()||
36053===c||a.raise("framebuffer configuration not supported, status = "+g[c]);b.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;b.getError()}function R(b,c){function h(b,c){var f;a(A.next!==n,"can not update framebuffer which is currently in use");var g=0,q=0,v=!0,y=!0;f=null;var z=!0,x="rgba",K="uint8",u=1,ca=null,ja=null,R=null,W=!1;if("number"===typeof b)g=b|0,q=c|0||g;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(q=b.shape,a(Array.isArray(q)&&
2<=q.length,"invalid shape for framebuffer"),g=q[0],q=q[1]):("radius"in b&&(g=q=b.radius),"width"in b&&(g=b.width),"height"in b&&(q=b.height));if("color"in b||"colors"in b)f=b.color||b.colors,Array.isArray(f)&&a(1===f.length||p.webgl_draw_buffers,"multiple render targets not supported");if(!f){"colorCount"in b&&(u=b.colorCount|0,a(0<u,"invalid color buffer count"));"colorTexture"in b&&(z=!!b.colorTexture,x="rgba4");if("colorType"in b){K=b.colorType;if(z)a(p.oes_texture_float||!("float"===K||"float32"===
K),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(p.oes_texture_half_float||!("half float"===K||"float16"===K),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===K||"float16"===K)a(p.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f";else if("float"===K||"float32"===K)a(p.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
x="rgba32f";a.oneOf(K,U,"invalid color type")}"colorFormat"in b&&(x=b.colorFormat,0<=r.indexOf(x)?z=!0:0<=I.indexOf(x)?z=!1:a.optional(function(){if(z)a.oneOf(b.colorFormat,r,"invalid color format for texture");else a.oneOf(b.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)W=!(!b.depthTexture&&!b.depthStencilTexture),a(!W||p.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?v=b.depth:
(ca=b.depth,y=!1));"stencil"in b&&("boolean"===typeof b.stencil?y=b.stencil:(ja=b.stencil,v=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?v=y=b.depthStencil:(R=b.depthStencil,y=v=!1))}else g=q=1;var ka=null,Ea=null,yb=null,Ka=null;if(Array.isArray(f))ka=f.map(G);else if(f)ka=[G(f)];else for(ka=Array(u),f=0;f<u;++f)ka[f]=w(g,q,z,x,K);a(p.webgl_draw_buffers||1>=ka.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(ka.length<=d.maxColorAttachments,
"too many color attachments, not supported");g=g||ka[0].width;q=q||ka[0].height;ca?Ea=G(ca):v&&!y&&(Ea=w(g,q,W,"depth","uint32"));ja?yb=G(ja):y&&!v&&(yb=w(g,q,!1,"stencil","uint8"));R?Ka=G(R):!ca&&!ja&&y&&v&&(Ka=w(g,q,W,"depth stencil","depth stencil"));a(1>=!!ca+!!ja+!!R,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");v=null;for(f=0;f<ka.length;++f)t(ka[f],g,q),a(!ka[f]||ka[f].texture&&0<=D.indexOf(ka[f].texture._texture.format)||ka[f].renderbuffer&&0<=l.indexOf(ka[f].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+f+" is invalid"),ka[f]&&ka[f].texture&&(y=m[ka[f].texture._texture.format]*k[ka[f].texture._texture.type],null===v?v=y:a(v===y,"all color attachments much have the same number of bits per pixel."));t(Ea,g,q);a(!Ea||Ea.texture&&6402===Ea.texture._texture.format||Ea.renderbuffer&&33189===Ea.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");t(yb,g,q);a(!yb||yb.renderbuffer&&36168===yb.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
t(Ka,g,q);a(!Ka||Ka.texture&&34041===Ka.texture._texture.format||Ka.renderbuffer&&34041===Ka.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");oa(n);n.width=g;n.height=q;n.colorAttachments=ka;n.depthAttachment=Ea;n.stencilAttachment=yb;n.depthStencilAttachment=Ka;h.color=ka.map(e);h.depth=e(Ea);h.stencil=e(yb);h.depthStencil=e(Ka);h.width=n.width;h.height=n.height;J(n);return h}var n=new u;f.framebufferCount++;h(b,c);return z(h,{resize:function(b,f){a(A.next!==
n,"can not resize a framebuffer which is currently in use");var c=Math.max(b|0,1),l=Math.max(f|0||c,1);if(c===n.width&&l===n.height)return h;for(var g=n.colorAttachments,q=0;q<g.length;++q)x(g[q],c,l);x(n.depthAttachment,c,l);x(n.stencilAttachment,c,l);x(n.depthStencilAttachment,c,l);n.width=h.width=c;n.height=h.height=l;J(n);return h},_reglType:"framebuffer",_framebuffer:n,destroy:function(){ca(n);oa(n)},use:function(b){A.setFBO({framebuffer:h},b)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},
r=["rgba"],I=["rgba4","rgb565","rgb5 a1"];p.ext_srgb&&I.push("srgba");p.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");p.webgl_color_buffer_float&&I.push("rgba32f");var U=["uint8"];p.oes_texture_half_float&&U.push("half float","float16");p.oes_texture_float&&U.push("float","float32");var K=0,ja={};return z(A,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof u)?b:null},create:R,createCube:function(b){function c(b){var h;a(0>
f.indexOf(A.next),"can not update framebuffer which is currently in use");var n={color:null},l=0,g=null;h="rgba";var q="uint8",t=1;if("number"===typeof b)l=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(l=b.shape,a(Array.isArray(l)&&2<=l.length,"invalid shape for framebuffer"),a(l[0]===l[1],"cube framebuffer must be square"),l=l[0]):("radius"in b&&(l=b.radius|0),"width"in b?(l=b.width|0,"height"in b&&a(b.height===l,"must be square")):"height"in b&&(l=b.height|0));
if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||p.webgl_draw_buffers,"multiple render targets not supported");g||("colorCount"in b&&(t=b.colorCount|0,a(0<t,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,U,"invalid color type"),q=b.colorType),"colorFormat"in b&&(h=b.colorFormat,a.oneOf(b.colorFormat,r,"invalid color format for texture")));"depth"in b&&(n.depth=b.depth);"stencil"in b&&(n.stencil=b.stencil);"depthStencil"in b&&(n.depthStencil=
b.depthStencil)}else l=1;if(g)if(Array.isArray(g))for(b=[],h=0;h<g.length;++h)b[h]=g[h];else b=[g];else for(b=Array(t),g={radius:l,format:h,type:q},h=0;h<t;++h)b[h]=y.createCube(g);n.color=Array(b.length);for(h=0;h<b.length;++h)t=b[h],a("function"===typeof t&&"textureCube"===t._reglType,"invalid cube map"),l=l||t.width,a(t.width===l&&t.height===l,"invalid cube map shape"),n.color[h]={target:34069,data:b[h]};for(h=0;6>h;++h){for(t=0;t<b.length;++t)n.color[t].target=34069+h;0<h&&(n.depth=f[0].depth,
n.stencil=f[0].stencil,n.depthStencil=f[0].depthStencil);if(f[h])f[h](n);else f[h]=R(n)}return z(c,{width:l,height:l,color:b})}var f=Array(6);c(b);return z(c,{faces:f,resize:function(b){var h=b|0;a(0<h&&h<=d.maxCubeMapSize,"invalid radius for cube fbo");if(h===c.width)return c;var n=c.color;for(b=0;b<n.length;++b)n[b].resize(h);for(b=0;6>b;++b)f[b].resize(h);c.width=c.height=h;return c},_reglType:"framebufferCube",destroy:function(){f.forEach(function(b){b.destroy()})}})},clear:function(){c(ja).forEach(ca)},
restore:function(){A.cur=null;A.next=null;A.dirty=!0;c(ja).forEach(function(c){c.framebuffer=b.createFramebuffer();J(c)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(d,e,r){var a=d("./util/sorted-object-keys"),c=d("./util/pool");e.exports=function(d,D){var m=1;D.ext_texture_filter_anisotropic&&(m=d.getParameter(34047));var k=1,l=1;D.webgl_draw_buffers&&(k=d.getParameter(34852),l=d.getParameter(36063));var g=!!D.oes_texture_float;if(g){g=d.createTexture();d.bindTexture(3553,
g);d.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var b=d.createFramebuffer();d.bindFramebuffer(36160,b);d.framebufferTexture2D(36160,36064,3553,g,0);d.bindTexture(3553,null);if(36053!==d.checkFramebufferStatus(36160))g=!1;else{d.viewport(0,0,1,1);d.clearColor(1,0,0,1);d.clear(16384);var p=c.allocType(5126,4);d.readPixels(0,0,1,1,6408,5126,p);d.getError()?g=!1:(d.deleteFramebuffer(b),d.deleteTexture(g),g=1===p[0]);c.freeType(p)}}p=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(p=d.createTexture(),b=c.allocType(5121,36),d.activeTexture(33984),d.bindTexture(34067,p),d.texImage2D(34069,0,6408,3,3,0,6408,5121,b),c.freeType(b),d.bindTexture(34067,null),d.deleteTexture(p),p=!d.getError());return{colorBits:[d.getParameter(3410),d.getParameter(3411),d.getParameter(3412),d.getParameter(3413)],depthBits:d.getParameter(3414),stencilBits:d.getParameter(3415),subpixelBits:d.getParameter(3408),extensions:a(D).filter(function(b){return!!D[b]}),
maxAnisotropic:m,maxDrawbuffers:k,maxColorAttachments:l,pointSizeDims:d.getParameter(33901),lineWidthDims:d.getParameter(33902),maxViewportDims:d.getParameter(3386),maxCombinedTextureUnits:d.getParameter(35661),maxCubeMapSize:d.getParameter(34076),maxRenderbufferSize:d.getParameter(34024),maxTextureUnits:d.getParameter(34930),maxTextureSize:d.getParameter(3379),maxAttributes:d.getParameter(34921),maxVertexUniforms:d.getParameter(36347),maxVertexTextureUnits:d.getParameter(35660),maxVaryingVectors:d.getParameter(36348),
maxFragmentUniforms:d.getParameter(36349),glsl:d.getParameter(35724),renderer:d.getParameter(7937),vendor:d.getParameter(7936),version:d.getParameter(7938),readFloat:g,npotTextureCube:p}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(d,e,r){var a=d("./util/check"),c=d("./util/is-typed-array");e.exports=function(d,D,m,k,l,g,b){function p(p){var h;null===D.next?(a(l.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
h=5121):(a(null!==D.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),h=D.next.colorAttachments[0].texture._texture.type,a.optional(function(){g.oes_texture_float?(a(5121===h||5126===h,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===h&&a(b.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===h,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var f=0,n=0,q=k.framebufferWidth,t=k.framebufferHeight,v=null;c(p)?v=p:p&&(a.type(p,"object","invalid arguments to regl.read()"),f=p.x|0,n=p.y|0,a(0<=f&&f<k.framebufferWidth,"invalid x offset for regl.read"),a(0<=n&&n<k.framebufferHeight,"invalid y offset for regl.read"),q=(p.width||k.framebufferWidth-f)|0,t=(p.height||k.framebufferHeight-n)|0,v=p.data||null);v&&(5121===h?a(v instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===h&&a(v instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<q&&q+f<=k.framebufferWidth,"invalid width for read pixels");a(0<t&&t+n<=k.framebufferHeight,"invalid height for read pixels");m();p=q*t*4;v||(5121===h?v=new Uint8Array(p):5126===h&&(v=v||new Float32Array(p)));a.isTypedArray(v,"data buffer for regl.read() must be a typedarray");a(v.byteLength>=p,"data buffer for regl.read() too small");d.pixelStorei(3333,4);d.readPixels(f,n,q,t,6408,h,v);return v}function H(b){var c;
D.setFBO({framebuffer:b.framebuffer},function(){c=p(b)});return c}return function(b){return b&&"framebuffer"in b?H(b):p(b)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(d,e,r){var a=d("./util/sorted-object-keys"),c=d("./util/check"),z=d("./util/values"),D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[33189]=2;D[36168]=1;D[34041]=4;D[35907]=4;D[34836]=16;D[34842]=8;D[34843]=6;e.exports=function(d,k,l,g,b){function p(c){this.id=f++;this.refCount=1;this.renderbuffer=c;this.format=32854;this.height=
this.width=0;b.profile&&(this.stats={size:0})}function H(b){var f=b.renderbuffer;c(f,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(f);b.renderbuffer=null;b.refCount=0;delete n[b.id];g.renderbufferCount--}var y={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};k.ext_srgb&&(y.srgba=35907);k.ext_color_buffer_half_float&&(y.rgba16f=34842,y.rgb16f=34843);k.webgl_color_buffer_float&&(y.rgba32f=34836);var h=[];a(y).forEach(function(b){h[y[b]]=
b});var f=0,n={};p.prototype.decRef=function(){0>=--this.refCount&&H(this)};b.profile&&(g.getTotalRenderbufferSize=function(){var b=0;a(n).forEach(function(c){b+=n[c].stats.size});return b});return{create:function(f,a){function v(f,a){var n=0,g=0,q=32854;"object"===typeof f&&f?("shape"in f?(g=f.shape,c(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),n=g[0]|0,g=g[1]|0):("radius"in f&&(n=g=f.radius|0),"width"in f&&(n=f.width|0),"height"in f&&(g=f.height|0)),"format"in f&&(c.parameter(f.format,
y,"invalid renderbuffer format"),q=y[f.format])):"number"===typeof f?(n=f|0,g="number"===typeof a?a|0:n):f?c.raise("invalid arguments to renderbuffer constructor"):n=g=1;c(0<n&&0<g&&n<=l.maxRenderbufferSize&&g<=l.maxRenderbufferSize,"invalid renderbuffer size");if(n!==k.width||g!==k.height||q!==k.format)return v.width=k.width=n,v.height=k.height=g,k.format=q,d.bindRenderbuffer(36161,k.renderbuffer),d.renderbufferStorage(36161,q,n,g),c(0===d.getError(),"invalid render buffer format"),b.profile&&(k.stats.size=
D[k.format]*k.width*k.height),v.format=h[k.format],v}var k=new p(d.createRenderbuffer());n[k.id]=k;g.renderbufferCount++;v(f,a);v.resize=function(f,h){var a=f|0,n=h|0||a;if(a===k.width&&n===k.height)return v;c(0<a&&0<n&&a<=l.maxRenderbufferSize&&n<=l.maxRenderbufferSize,"invalid renderbuffer size");v.width=k.width=a;v.height=k.height=n;d.bindRenderbuffer(36161,k.renderbuffer);d.renderbufferStorage(36161,k.format,a,n);c(0===d.getError(),"invalid render buffer format");b.profile&&(k.stats.size=D[k.format]*
k.width*k.height);return v};v._reglType="renderbuffer";v._renderbuffer=k;b.profile&&(v.stats=k.stats);v.destroy=function(){k.decRef()};return v},clear:function(){z(n).forEach(H)},restore:function(){z(n).forEach(function(b){b.renderbuffer=d.createRenderbuffer();d.bindRenderbuffer(36161,b.renderbuffer);d.renderbufferStorage(36161,b.format,b.width,b.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(d,e,r){var a=d("./util/sorted-object-keys"),
c=d("./util/check"),z=d("./util/extend"),D=d("./util/values");e.exports=function(d,k,l,g){function b(b,f,c,h){this.name=b;this.id=f;this.location=c;this.info=h}function p(b,f){for(var c=0;c<b.length;++c)if(b[c].id===f.id){b[c].location=f.location;return}b.push(f)}function H(b,h,a){var l=35632===b?f:n,g=l[h];if(!g){var q=k.str(h),g=d.createShader(b);d.shaderSource(g,q);d.compileShader(g);c.shaderError(d,g,q,b,a);l[h]=g}return g}function y(b,f){this.id=v++;this.fragId=b;this.vertId=f;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;g.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function h(f,h,a){var n;n=H(35632,f.fragId);var l=H(35633,f.vertId),q=f.program=d.createProgram();d.attachShader(q,n);d.attachShader(q,l);if(a)for(n=0;n<a.length;++n)l=a[n],d.bindAttribLocation(q,l[0],l[1]);d.linkProgram(q);c.linkError(d,q,k.str(f.fragId),k.str(f.vertId),h);a=d.getProgramParameter(q,35718);g.profile&&(f.stats.uniformsCount=a);l=f.uniforms;for(n=0;n<a;++n)if(h=d.getActiveUniform(q,
n))if(1<h.size)for(var t=0;t<h.size;++t){var v=h.name.replace("[0]","["+t+"]");p(l,new b(v,k.id(v),d.getUniformLocation(q,v),h))}else p(l,new b(h.name,k.id(h.name),d.getUniformLocation(q,h.name),h));a=d.getProgramParameter(q,35721);g.profile&&(f.stats.attributesCount=a);f=f.attributes;for(n=0;n<a;++n)(h=d.getActiveAttrib(q,n))&&p(f,new b(h.name,k.id(h.name),d.getAttribLocation(q,h.name),h))}var f={},n={},q={},t=[],v=0;g.profile&&(l.getMaxUniformsCount=function(){var b=0;t.forEach(function(f){f.stats.uniformsCount>
b&&(b=f.stats.uniformsCount)});return b},l.getMaxAttributesCount=function(){var b=0;t.forEach(function(f){f.stats.attributesCount>b&&(b=f.stats.attributesCount)});return b});return{clear:function(){var b=d.deleteShader.bind(d);D(f).forEach(b);f={};D(n).forEach(b);n={};t.forEach(function(b){d.deleteProgram(b.program)});t.length=0;q={};l.shaderCount=0},program:function(b,g,p,v){c.command(0<=b,"missing vertex shader",p);c.command(0<=g,"missing fragment shader",p);var k=q[g];k||(k=q[g]={});var D=k[b];
if(D&&(D.refCount++,!v))return D;var H=new y(g,b);l.shaderCount++;h(H,p,v);D||(k[b]=H);t.push(H);return z(H,{destroy:function(){H.refCount--;if(0>=H.refCount){d.deleteProgram(H.program);var b=t.indexOf(H);t.splice(b,1);l.shaderCount--}0>=k[H.vertId].refCount&&(d.deleteShader(n[H.vertId]),delete n[H.vertId],delete q[H.fragId][H.vertId]);a(q[H.fragId]).length||(d.deleteShader(f[H.fragId]),delete f[H.fragId],delete q[H.fragId])}})},restore:function(){f={};n={};for(var b=0;b<t.length;++b)h(t[b],null,
t[b].attributes.map(function(b){return[b.location,b.name]}))},shader:H,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(d,e,r){e.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(d,e,r){e.exports=function(){var a={"":0},c=[""];return{id:function(d){var D=a[d];if(D)return D;D=a[d]=c.length;c.push(d);
return D},str:function(a){return c[a]}}}},{}],19:[function(d,e,r){function a(b){return"[object "+b+"]"}function c(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function z(b){return Array.isArray(b)&&0!==b.length&&q(b[0])?!0:!1}function D(b){return Object.prototype.toString.call(b)}function m(b){if(!b)return!1;var f=D(b);return 0<=aa.indexOf(f)?!0:c(b)||z(b)||h(b)}function k(b,c){36193===b.type?(b.data=n(c),f.freeType(c)):b.data=c}function l(b,f,c,h,a,n){b="undefined"!==typeof U[b]?
U[b]:x[b]*I[f];n&&(b*=6);if(a){for(h=0;1<=c;)h+=b*c*c,c/=2;return h}return b*c*h}var g=d("./util/sorted-object-keys"),b=d("./util/check"),p=d("./util/extend"),H=d("./util/values"),y=d("./util/is-typed-array"),h=d("./util/is-ndarray"),f=d("./util/pool"),n=d("./util/to-half-float"),q=d("./util/is-array-like"),t=d("./util/flatten"),v=d("./util/is-pow2");r=d("./constants/arraytypes.json");var G=d("./constants/arraytypes.json"),w=[9984,9986,9985,9987],Ia=[0,6409,6410,6407,6408],x={};x[6409]=x[6406]=x[6402]=
1;x[34041]=x[6410]=2;x[6407]=x[35904]=3;x[6408]=x[35906]=4;var u=a("HTMLCanvasElement"),oa=a("OffscreenCanvas"),ca=a("CanvasRenderingContext2D"),J=a("ImageBitmap"),R=a("HTMLImageElement"),A=a("HTMLVideoElement"),aa=g(r).concat([u,oa,ca,J,R,A]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var U=[];U[32854]=2;U[32855]=2;U[36194]=2;U[34041]=4;U[33776]=.5;U[33777]=.5;U[33778]=1;U[33779]=1;U[35986]=.5;U[35987]=1;U[34798]=1;U[35840]=.5;U[35841]=.25;U[35842]=.5;U[35843]=.25;U[36196]=.5;e.exports=
function(a,d,e,r,I,aa,U){function ea(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Na(b,f){b.internalformat=f.internalformat;b.format=f.format;b.type=f.type;b.compressed=f.compressed;b.premultiplyAlpha=f.premultiplyAlpha;b.flipY=f.flipY;b.unpackAlignment=f.unpackAlignment;b.colorSpace=f.colorSpace;b.width=f.width;b.height=f.height;b.channels=f.channels}
function V(f,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(b.type(c.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),f.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(b.type(c.flipY,"boolean","invalid texture flip"),f.flipY=c.flipY);"alignment"in c&&(b.oneOf(c.alignment,[1,2,4,8],"invalid texture unpack alignment"),f.unpackAlignment=c.alignment);"colorSpace"in c&&(b.parameter(c.colorSpace,zc,"invalid colorSpace"),f.colorSpace=zc[c.colorSpace]);if("type"in c){var h=c.type;b(d.oes_texture_float||
!("float"===h||"float32"===h),"you must enable the OES_texture_float extension in order to use floating point textures.");b(d.oes_texture_half_float||!("half float"===h||"float16"===h),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");b(d.webgl_depth_texture||!("uint16"===h||"uint32"===h||"depth stencil"===h),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");b.parameter(h,Z,"invalid texture type");f.type=
Z[h]}var a=f.width,n=f.height,l=f.channels,h=!1;"shape"in c?(b(Array.isArray(c.shape)&&2<=c.shape.length,"shape must be an array"),a=c.shape[0],n=c.shape[1],3===c.shape.length&&(l=c.shape[2],b(0<l&&4>=l,"invalid number of channels"),h=!0),b(0<=a&&a<=e.maxTextureSize,"invalid width"),b(0<=n&&n<=e.maxTextureSize,"invalid height")):("radius"in c&&(a=n=c.radius,b(0<=a&&a<=e.maxTextureSize,"invalid radius")),"width"in c&&(a=c.width,b(0<=a&&a<=e.maxTextureSize,"invalid width")),"height"in c&&(n=c.height,
b(0<=n&&n<=e.maxTextureSize,"invalid height")),"channels"in c&&(l=c.channels,b(0<l&&4>=l,"invalid number of channels"),h=!0));f.width=a|0;f.height=n|0;f.channels=l|0;a=!1;"format"in c&&(a=c.format,b(d.webgl_depth_texture||!("depth"===a||"depth stencil"===a),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),b.parameter(a,N,"invalid texture format"),n=f.internalformat=N[a],f.format=sa[n],a in Z&&!("type"in c)&&(f.type=Z[a]),a in ha&&(f.compressed=!0),a=!0);
!h&&a?f.channels=x[f.format]:h&&!a?f.channels!==Ia[f.format]&&(f.format=f.internalformat=Ia[f.channels]):a&&h&&b(f.channels===x[f.format],"number of channels inconsistent with specified format")}}function P(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function O(){ea.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function T(a,l){var g=null;
m(l)?g=l:l&&(b.type(l,"object","invalid pixel data type"),V(a,l),"x"in l&&(a.xOffset=l.x|0),"y"in l&&(a.yOffset=l.y|0),m(l.data)&&(g=l.data));b(!a.compressed||g instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(l.copy){b(!g,"can not specify copy and data field for the same texture");var p=I.viewportWidth,d=I.viewportHeight;a.width=a.width||p-a.xOffset;a.height=a.height||d-a.yOffset;a.needsCopy=!0;b(0<=a.xOffset&&a.xOffset<p&&0<=a.yOffset&&a.yOffset<d&&0<a.width&&a.width<=
p&&0<a.height&&a.height<=d,"copy texture read out of bounds")}else if(!g)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(y(g))a.channels=a.channels||4,a.data=g,"type"in l||5121!==a.type||(a.type=G[Object.prototype.toString.call(g)]|0);else if(c(g)){a.channels=a.channels||4;p=g;d=p.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:d=f.allocType(a.type,d);d.set(p);a.data=d;break;case 36193:a.data=n(p);break;default:b.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(h(g)){p=g.data;Array.isArray(p)||5121!==a.type||(a.type=G[Object.prototype.toString.call(p)]|0);var d=g.shape,v=g.stride,w,H,x,K;3===d.length?(x=d[2],K=v[2]):(b(2===d.length,"invalid ndarray pixel data, must be 2 or 3D"),K=x=1);w=d[0];H=d[1];d=v[0];v=v[1];a.alignment=1;a.width=w;a.height=H;a.channels=x;a.format=a.internalformat=Ia[x];a.needsFree=!0;w=K;g=g.offset;x=a.width;K=a.height;H=a.channels;for(var ja=f.allocType(36193===a.type?5126:a.type,x*K*H),F=0,B=0;B<K;++B)for(var E=
0;E<x;++E)for(var N=0;N<H;++N)ja[F++]=p[d*E+v*B+w*N+g];k(a,ja)}else if(D(g)===u||D(g)===oa||D(g)===ca)D(g)===u||D(g)===oa?a.element=g:a.element=g.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(D(g)===J)a.element=g,a.width=g.width,a.height=g.height,a.channels=4;else if(D(g)===R)a.element=g,a.width=g.naturalWidth,a.height=g.naturalHeight,a.channels=4;else if(D(g)===A)a.element=g,a.width=g.videoWidth,a.height=g.videoHeight,a.channels=4;else if(z(g)){p=a.width||g[0].length;
d=a.height||g.length;v=a.channels;v=q(g[0][0])?v||g[0][0].length:v||1;w=t.shape(g);x=1;for(K=0;K<w.length;++K)x*=w[K];x=f.allocType(36193===a.type?5126:a.type,x);t.flatten(g,w,"",x);k(a,x);a.alignment=1;a.width=p;a.height=d;a.channels=v;a.format=a.internalformat=Ia[v];a.needsFree=!0}5126===a.type?b(0<=e.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&b(0<=e.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function na(b,f,c,h,n){var g=b.element,l=b.data,q=b.internalformat,t=b.format,p=b.type,d=b.width,v=b.height;P(b);g?a.texSubImage2D(f,n,c,h,t,p,g):b.compressed?a.compressedTexSubImage2D(f,n,c,h,q,d,v,l):b.needsCopy?(r(),a.copyTexSubImage2D(f,n,c,h,b.xOffset,b.yOffset,d,v)):a.texSubImage2D(f,n,c,h,d,v,t,p,l)}function Q(){return X.pop()||new O}function Gb(b){b.needsFree&&f.freeType(b.data);O.call(b);X.push(b)}function $a(){ea.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function S(b,f,c){var a=b.images[0]=Q();b.mipmask=1;a.width=b.width=f;a.height=b.height=c;a.channels=b.channels=4}function B(f,c){var a=null;if(m(c))a=f.images[0]=Q(),Na(a,f),T(a,c),f.mipmask=1;else if(V(f,c),Array.isArray(c.mipmap))for(var h=c.mipmap,n=0;n<h.length;++n)a=f.images[n]=Q(),Na(a,f),a.width>>=n,a.height>>=n,T(a,h[n]),f.mipmask|=1<<n;else a=f.images[0]=Q(),Na(a,f),T(a,c),f.mipmask=1;Na(f,f.images[0]);!f.compressed||33776!==f.internalformat&&33777!==f.internalformat&&33778!==
f.internalformat&&33779!==f.internalformat||b(0===f.width%4&&0===f.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ma(b,f){for(var c=b.images,h=0;h<c.length&&c[h];++h){var n=c[h],g=f,l=h,q=n.element,t=n.data,p=n.internalformat,d=n.format,v=n.type,k=n.width,y=n.height;P(n);q?a.texImage2D(g,l,d,d,v,q):n.compressed?a.compressedTexImage2D(g,l,p,k,y,0,t):n.needsCopy?(r(),a.copyTexImage2D(g,l,d,n.xOffset,n.yOffset,k,y,0)):a.texImage2D(g,
l,d,k,y,0,d,v,t||null)}}function da(){var b=fa.pop()||new $a;ea.call(b);for(var f=b.mipmask=0;16>f;++f)b.images[f]=null;return b}function Ba(b){for(var f=b.images,c=0;c<f.length;++c)f[c]&&Gb(f[c]),f[c]=null;fa.push(b)}function Ea(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function yb(f,c){if("min"in c){var a=c.min;b.parameter(a,td);f.minFilter=td[a];0<=w.indexOf(f.minFilter)&&!("faces"in c)&&(f.genMipmaps=!0)}"mag"in
c&&(a=c.mag,b.parameter(a,ic),f.magFilter=ic[a]);var a=f.wrapS,h=f.wrapT;if("wrap"in c){var n=c.wrap;"string"===typeof n?(b.parameter(n,sc),a=h=sc[n]):Array.isArray(n)&&(b.parameter(n[0],sc),b.parameter(n[1],sc),a=sc[n[0]],h=sc[n[1]])}else"wrapS"in c&&(a=c.wrapS,b.parameter(a,sc),a=sc[a]),"wrapT"in c&&(h=c.wrapT,b.parameter(h,sc),h=sc[h]);f.wrapS=a;f.wrapT=h;"anisotropic"in c&&(a=c.anisotropic,b("number"===typeof a&&1<=a&&a<=e.maxAnisotropic,"aniso samples must be between 1 and "),f.anisotropic=c.anisotropic);
if("mipmap"in c){a=!1;switch(typeof c.mipmap){case "string":b.parameter(c.mipmap,$b,"invalid mipmap hint");f.mipmapHint=$b[c.mipmap];a=f.genMipmaps=!0;break;case "boolean":a=f.genMipmaps=c.mipmap;break;case "object":b(Array.isArray(c.mipmap),"invalid mipmap type");f.genMipmaps=!1;a=!0;break;default:b.raise("invalid mipmap type")}!a||"min"in c||(f.minFilter=9984)}}function Ka(b,f){a.texParameteri(f,10241,b.minFilter);a.texParameteri(f,10240,b.magFilter);a.texParameteri(f,10242,b.wrapS);a.texParameteri(f,
10243,b.wrapT);d.ext_texture_filter_anisotropic&&a.texParameteri(f,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(f))}function Y(b){ea.call(this);this.mipmask=0;this.internalformat=6408;this.id=ra++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ea;U.profile&&(this.stats={size:0})}function mb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=ba[0];b?a.bindTexture(b.target,b.texture):
a.bindTexture(3553,null)}function qa(f){var c=f.texture;b(c,"must not double destroy texture");var h=f.unit,n=f.target;0<=h&&(a.activeTexture(33984+h),a.bindTexture(n,null),ba[h]=null);a.deleteTexture(c);f.texture=null;f.params=null;f.pixels=null;f.refCount=0;delete M[f.id];aa.textureCount--}var $b={"don't care":4352,"dont care":4352,nice:4354,fast:4353},sc={repeat:10497,clamp:33071,mirror:33648},ic={nearest:9728,linear:9729},td=p({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},ic),zc={none:0,browser:37444},Z={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},N={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ha={};d.ext_srgb&&(N.srgb=35904,N.srgba=35906);d.oes_texture_float&&(Z.float32=Z["float"]=5126);d.oes_texture_half_float&&(Z.float16=Z["half float"]=36193);d.webgl_depth_texture&&(p(N,{depth:6402,"depth stencil":34041}),p(Z,{uint16:5123,uint32:5125,
"depth stencil":34042}));d.webgl_compressed_texture_s3tc&&p(ha,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});d.webgl_compressed_texture_atc&&p(ha,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});d.webgl_compressed_texture_pvrtc&&p(ha,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});d.webgl_compressed_texture_etc1&&(ha["rgb etc1"]=36196);var Fa=Array.prototype.slice.call(a.getParameter(34467));
g(ha).forEach(function(b){var f=ha[b];0<=Fa.indexOf(f)&&(N[b]=f)});var sb=g(N);e.textureFormats=sb;var Pc=[];g(N).forEach(function(b){Pc[N[b]]=b});var Qc=[];g(Z).forEach(function(b){Qc[Z[b]]=b});var L=[];g(ic).forEach(function(b){L[ic[b]]=b});var E=[];g(td).forEach(function(b){E[td[b]]=b});var ia=[];g(sc).forEach(function(b){ia[sc[b]]=b});var sa=sb.reduce(function(b,f){var c=N[f];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||d.ext_srgb&&(35904===c||35906===c)?b[c]=c:32855===c||0<=f.indexOf("rgba")?
b[c]=6408:b[c]=6407;return b},{}),X=[],fa=[],ra=0,M={},F=e.maxTextureUnits,ba=Array(F).map(function(){return null});p(Y.prototype,{bind:function(){this.bindCount+=1;var f=this.unit;if(0>f){for(var c=0;c<F;++c){var h=ba[c];if(h){if(0<h.bindCount)continue;h.unit=-1}ba[c]=this;f=c;break}f>=F&&b.raise("insufficient number of texture units");U.profile&&aa.maxTextureUnits<f+1&&(aa.maxTextureUnits=f+1);this.unit=f;a.activeTexture(33984+f);a.bindTexture(this.target,this.texture)}return f},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&qa(this)}});U.profile&&(aa.getTotalTextureSize=function(){var b=0;g(M).forEach(function(f){b+=M[f].stats.size});return b});return{create2D:function(f,c){function h(f,c){var a=n.texInfo;Ea.call(a);var g=da();"number"===typeof f?"number"===typeof c?S(g,f|0,c|0):S(g,f|0,f|0):f?(b.type(f,"object","invalid arguments to regl.texture"),yb(a,f),B(g,f)):S(g,1,1);a.genMipmaps&&(g.mipmask=(g.width<<1)-1);n.mipmask=g.mipmask;Na(n,g);b.texture2D(a,g,e);n.internalformat=g.internalformat;
h.width=g.width;h.height=g.height;mb(n);ma(g,3553);Ka(a,3553);ga();Ba(g);U.profile&&(n.stats.size=l(n.internalformat,n.type,g.width,g.height,a.genMipmaps,!1));h.format=Pc[n.internalformat];h.type=Qc[n.type];h.mag=L[a.magFilter];h.min=E[a.minFilter];h.wrapS=ia[a.wrapS];h.wrapT=ia[a.wrapT];return h}var n=new Y(3553);M[n.id]=n;aa.textureCount++;h(f,c);h.subimage=function(f,c,a,g){b(!!f,"must specify image data");c|=0;a|=0;g|=0;var l=Q();Na(l,n);l.width=0;l.height=0;T(l,f);l.width=l.width||(n.width>>
g)-c;l.height=l.height||(n.height>>g)-a;b(n.type===l.type&&n.format===l.format&&n.internalformat===l.internalformat,"incompatible format for texture.subimage");b(0<=c&&0<=a&&c+l.width<=n.width&&a+l.height<=n.height,"texture.subimage write out of bounds");b(n.mipmask&1<<g,"missing mipmap data");b(l.data||l.element||l.needsCopy,"missing image data");mb(n);na(l,3553,c,a,g);ga();Gb(l);return h};h.resize=function(b,f){var c=b|0,g=f|0||c;if(c===n.width&&g===n.height)return h;h.width=n.width=c;h.height=
n.height=g;mb(n);for(var q=0;n.mipmask>>q;++q){var t=c>>q,p=g>>q;if(!t||!p)break;a.texImage2D(3553,q,n.format,t,p,0,n.format,n.type,null)}ga();U.profile&&(n.stats.size=l(n.internalformat,n.type,c,g,!1,!1));return h};h._reglType="texture2d";h._texture=n;U.profile&&(h.stats=n.stats);h.destroy=function(){n.decRef()};return h},createCube:function(f,c,h,n,g,q){function t(f,c,a,h,n,g){var q,k=p.texInfo;Ea.call(k);for(q=0;6>q;++q)d[q]=da();if("number"!==typeof f&&f)if("object"===typeof f)if(c)B(d[0],f),
B(d[1],c),B(d[2],a),B(d[3],h),B(d[4],n),B(d[5],g);else if(yb(k,f),V(p,f),"faces"in f)for(f=f.faces,b(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),q=0;6>q;++q)b("object"===typeof f[q]&&!!f[q],"invalid input for cube map face"),Na(d[q],p),B(d[q],f[q]);else for(q=0;6>q;++q)B(d[q],f);else b.raise("invalid arguments to cube map");else for(f=f|0||1,q=0;6>q;++q)S(d[q],f,f);Na(p,d[0]);b.optional(function(){e.npotTextureCube||b(v(p.width)&&v(p.height),"your browser does not support non power or two texture dimensions")});
p.mipmask=k.genMipmaps?(d[0].width<<1)-1:d[0].mipmask;b.textureCube(p,k,d,e);p.internalformat=d[0].internalformat;t.width=d[0].width;t.height=d[0].height;mb(p);for(q=0;6>q;++q)ma(d[q],34069+q);Ka(k,34067);ga();U.profile&&(p.stats.size=l(p.internalformat,p.type,t.width,t.height,k.genMipmaps,!0));t.format=Pc[p.internalformat];t.type=Qc[p.type];t.mag=L[k.magFilter];t.min=E[k.minFilter];t.wrapS=ia[k.wrapS];t.wrapT=ia[k.wrapT];for(q=0;6>q;++q)Ba(d[q]);return t}var p=new Y(34067);M[p.id]=p;aa.cubeCount++;
var d=Array(6);t(f,c,h,n,g,q);t.subimage=function(f,c,a,h,n){b(!!c,"must specify image data");b("number"===typeof f&&f===(f|0)&&0<=f&&6>f,"invalid face");a|=0;h|=0;n|=0;var g=Q();Na(g,p);g.width=0;g.height=0;T(g,c);g.width=g.width||(p.width>>n)-a;g.height=g.height||(p.height>>n)-h;b(p.type===g.type&&p.format===g.format&&p.internalformat===g.internalformat,"incompatible format for texture.subimage");b(0<=a&&0<=h&&a+g.width<=p.width&&h+g.height<=p.height,"texture.subimage write out of bounds");b(p.mipmask&
1<<n,"missing mipmap data");b(g.data||g.element||g.needsCopy,"missing image data");mb(p);na(g,34069+f,a,h,n);ga();Gb(g);return t};t.resize=function(b){b|=0;if(b!==p.width){t.width=p.width=b;t.height=p.height=b;mb(p);for(var f=0;6>f;++f)for(var c=0;p.mipmask>>c;++c)a.texImage2D(34069+f,c,p.format,b>>c,b>>c,0,p.format,p.type,null);ga();U.profile&&(p.stats.size=l(p.internalformat,p.type,t.width,t.height,!1,!0));return t}};t._reglType="textureCube";t._texture=p;U.profile&&(t.stats=p.stats);t.destroy=
function(){p.decRef()};return t},clear:function(){for(var b=0;b<F;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ba[b]=null;H(M).forEach(qa);aa.cubeCount=0;aa.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<F;++b){var f=ba[b];f&&(f.bindCount=0,f.unit=-1,ba[b]=null)}H(M).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var f=0;32>f;++f)if(0!==(b.mipmask&1<<f))if(3553===b.target)a.texImage2D(3553,f,b.internalformat,b.width>>
f,b.height>>f,0,b.internalformat,b.type,null);else for(var c=0;6>c;++c)a.texImage2D(34069+c,f,b.internalformat,b.width>>f,b.height>>f,0,b.internalformat,b.type,null);Ka(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<F;++b){var f=ba[b];f&&(f.bindCount=0,f.unit=-1,ba[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(d,e,r){e.exports=function(a,c){function d(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function D(b,c,a){var f=l.pop()||new d;f.startQueryIndex=b;f.endQueryIndex=c;f.sum=0;f.stats=a;g.push(f)}if(!c.ext_disjoint_timer_query)return null;var m=[],k=[],l=[],g=[],b=[],p=[];return{beginQuery:function(b){var a=m.pop()||c.ext_disjoint_timer_query.createQueryEXT();
c.ext_disjoint_timer_query.beginQueryEXT(35007,a);k.push(a);D(k.length-1,k.length,b)},endQuery:function(){c.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:D,update:function(){var a,d;a=k.length;if(0!==a){p.length=Math.max(p.length,a+1);b.length=Math.max(b.length,a+1);b[0]=0;var h=p[0]=0;for(d=a=0;d<k.length;++d){var f=k[d];c.ext_disjoint_timer_query.getQueryObjectEXT(f,34919)?(h+=c.ext_disjoint_timer_query.getQueryObjectEXT(f,34918),m.push(f)):k[a++]=f;b[d+1]=h;p[d+1]=a}k.length=a;for(d=
a=0;d<g.length;++d){var h=g[d],n=h.startQueryIndex,f=h.endQueryIndex;h.sum+=b[f]-b[n];n=p[n];f=p[f];f===n?(h.stats.gpuTime+=h.sum/1E6,l.push(h)):(h.startQueryIndex=n,h.endQueryIndex=f,g[a++]=h)}g.length=a}},getNumPendingQueries:function(){return k.length},clear:function(){m.push.apply(m,k);for(var b=0;b<m.length;b++)c.ext_disjoint_timer_query.deleteQueryEXT(m[b]);k.length=0;m.length=0},restore:function(){k.length=0;m.length=0}}}},{}],21:[function(d,e,r){function a(b){return"undefined"!==typeof atob?
atob(b):"base64:"+b}function c(b){b=Error("(regl) "+b);console.error(b);throw b;}function z(b,f){b||c(f)}function D(b){return b?": "+b:""}function m(b,f){switch(f){case "number":return"number"===typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function k(b,f,a){0>f.indexOf(b)&&c("invalid value"+
D(a)+". must be one of: "+f)}function l(b,f){for(b+="";b.length<f;)b=" "+b;return b}function g(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function b(b,f){this.number=b;this.line=f;this.errors=[]}function p(b,f,c){this.file=b;this.line=f;this.message=c}function H(){var b=Error(),b=(b.stack||b).toString(),f=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return f?f[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function y(){var b=Error(),b=(b.stack||b).toString(),
f=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return f?f[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function h(f,c){var h=f.split("\n"),n=1,l=0,q={unknown:new g,0:new g};q.unknown.name=q[0].name=c||H();q.unknown.lines.push(new b(0,""));for(var p=0;p<h.length;++p){var t=h[p],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(t);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))n=d[1]|0,d[2]&&(l=d[2]|0,l in q||(q[l]=new g));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))q[l].name=
d[1]?a(d[2]):d[2]}q[l].lines.push(new b(n++,t))}w(q).forEach(function(b){var f=q[b];f.lines.forEach(function(b){f.index[b.number]=b})});return q}function f(b){var f=[];b.split("\n").forEach(function(b){if(!(5>b.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);c?f.push(new p(c[1]|0,c[2]|0,c[3].trim())):0<b.length&&f.push(new p("unknown",0,b))}});return f}function n(b,f){f.forEach(function(f){var c=b[f.file];if(c){var a=c.index[f.line];if(a){a.errors.push(f);c.hasErrors=!0;return}}b.unknown.hasErrors=
!0;b.unknown.lines[0].errors.push(f)})}function q(b){b._commandRef=H()}function t(b,f){var a=y();c(b+" in command "+(f||H())+("unknown"===a?"":" called from "+a))}function v(b,f,c,a){m(b,f)||t("invalid parameter type"+D(c)+". expected "+f+", got "+typeof b,a||H())}function G(b,f){return 32820===b||32819===b||33635===b?2:34042===b?4:u[b]*f}var w=d("./sorted-object-keys"),Ia=d("./is-typed-array");d=d("./extend");var x="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
u={};u[5120]=u[5121]=1;u[5122]=u[5123]=u[36193]=u[33635]=u[32819]=u[32820]=2;u[5124]=u[5125]=u[5126]=u[34042]=4;e.exports=d(z,{optional:function(b){b()},raise:c,commandRaise:t,command:function(b,f,c){b||t(f,c||H())},parameter:function(b,f,a){b in f||c("unknown parameter ("+b+")"+D(a)+". possible values: "+w(f).join())},commandParameter:function(b,f,c,a){b in f||t("unknown parameter ("+b+")"+D(c)+". possible values: "+w(f).join(),a||H())},constructor:function(b){w(b).forEach(function(b){0>x.indexOf(b)&&
c('invalid regl constructor argument "'+b+'". must be one of '+x)})},type:function(b,f,a){m(b,f)||c("invalid parameter type"+D(a)+". expected "+f+", got "+typeof b)},commandType:v,isTypedArray:function(b,f){Ia(b)||c("invalid parameter type"+D(f)+". must be a typed array")},nni:function(b,f){0<=b&&(b|0)===b||c("invalid parameter type, ("+b+")"+D(f)+". must be a nonnegative integer")},oneOf:k,shaderError:function(b,c,a,g,q){if(!b.getShaderParameter(c,b.COMPILE_STATUS)){c=b.getShaderInfoLog(c);b=g===
b.FRAGMENT_SHADER?"fragment":"vertex";v(a,"string",b+" shader source must be a string",q);var p=h(a,q);a=f(c);n(p,a);w(p).forEach(function(b){function f(b,c){a.push(b);h.push(c||"")}var c=p[b];if(c.hasErrors){var a=[""],h=[""];f("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(b){if(0<b.errors.length){f(l(b.number,4)+"|  ","background-color:yellow; font-weight:bold");f(b.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;b.errors.forEach(function(a){a=a.message;var h=/^\s*'(.*)'\s*:\s*(.*)$/.exec(a);if(h){var n=h[1];a=h[2];switch(n){case "assign":n="="}c=Math.max(b.line.indexOf(n,c),0)}else c=0;f(l("| ",6));f(l("^^^",c+3)+"\n","font-weight:bold");f(l("| ",6));f(a+"\n","font-weight:bold")});f(l("| ",6)+"\n")}else f(l(b.number,4)+"|  "),f(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(a.join("")):(h[0]=a.join("%c"),console.log.apply(console,h))}});z.raise("Error compiling "+
b+" shader, "+p[0].name)}},linkError:function(b,f,c,a,n){b.getProgramParameter(f,b.LINK_STATUS)||(b=b.getProgramInfoLog(f),c=h(c,n),a='Error linking program with vertex shader, "'+h(a,n)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+a+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(a+"\n"+b),z.raise(a))},callSite:y,saveCommandRef:q,saveDrawInfo:function(b,f,c,a){function h(b){return b?a.id(b):0}function n(b,
f){w(f).forEach(function(f){b[a.id(f)]=!0})}q(b);b._fragId=h(b["static"].frag);b._vertId=h(b["static"].vert);var g=b._uniformSet={};n(g,f["static"]);n(g,f.dynamic);f=b._attributeSet={};n(f,c["static"]);n(f,c.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(b,f,c){b.texture?k(b.texture._texture.internalformat,f,"unsupported texture format for attachment"):k(b.renderbuffer._renderbuffer.format,c,"unsupported renderbuffer format for attachment")},
guessCommand:H,texture2D:function(b,f,c){var a=f.width,h=f.height,n=f.channels;z(0<a&&a<=c.maxTextureSize&&0<h&&h<=c.maxTextureSize,"invalid texture shape");33071===b.wrapS&&33071===b.wrapT||z(!(a&a-1)&&!!a&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===f.mipmask?1!==a&&1!==h&&z(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(z(!(a&a-1)&&!!a&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),
z(f.mipmask===(a<<1)-1,"missing or incomplete mipmap data"));5126===f.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&z(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),z(!b.genMipmaps,"mipmap generation not supported with float textures"));var g=f.images;for(c=0;16>c;++c)if(g[c]){var l=a>>c,q=h>>c;z(f.mipmask&1<<c,"missing mipmap data");var p=g[c];z(p.width===l&&p.height===q,"invalid shape for mip images");z(p.format===f.format&&p.internalformat===
f.internalformat&&p.type===f.type,"incompatible type for mip image");!p.compressed&&p.data&&(l=Math.ceil(G(p.type,n)*l/p.unpackAlignment)*p.unpackAlignment,z(p.data.byteLength===l*q,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||z(0===(f.mipmask&1<<c),"extra mipmap data");f.compressed&&z(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,f,c,a){var h=b.width,n=b.height,g=b.channels;z(0<h&&h<=a.maxTextureSize&&
0<n&&n<=a.maxTextureSize,"invalid texture shape");z(h===n,"cube map must be square");z(33071===f.wrapS&&33071===f.wrapT,"wrap mode not supported by cube map");for(a=0;a<c.length;++a){var l=c[a];z(l.width===h&&l.height===n,"inconsistent cube map face shape");f.genMipmaps&&(z(!l.compressed,"can not generate mipmap for compressed textures"),z(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var q=l.images,p=0;16>p;++p){var t=q[p];if(t){var d=h>>p,v=n>>p;z(l.mipmask&1<<p,"missing mipmap data");
z(t.width===d&&t.height===v,"invalid shape for mip images");z(t.format===b.format&&t.internalformat===b.internalformat&&t.type===b.type,"incompatible type for mip image");t.compressed||t.data&&z(t.data.byteLength===d*v*Math.max(G(t.type,g),t.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(d,e,r){e.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(d,e,r){function a(c){return Array.prototype.slice.call(c)}var c=d("./extend"),z=d("./compiled-fns");e.exports=function(){function d(){var b=[],g=[];return c(function(){b.push.apply(b,a(arguments))},{def:function(){var c="v"+l;l++;g.push(c);0<arguments.length&&(b.push(c,"="),b.push.apply(b,a(arguments)),b.push(";"));return c},toString:function(){return a([0<g.length?"var "+g.join(",")+";":"",a(b).join("")]).join("")}})}function m(){function b(f,c){l(f,
c,"=",g.def(f,c),";")}var g=d(),l=d(),h=g.toString,f=l.toString;return c(function(){g.apply(g,a(arguments))},{def:g.def,entry:g,exit:l,save:b,set:function(f,c,a){b(f,c);g(f,c,"=",a,";")},toString:function(){return h()+f()}})}var k=0,l=0,g={},b={};return{global:d(),link:function(b){var c="$"+k,a=!1;"object"===typeof b&&b.name&&(c=b.name.replace(/ /g,"_"),a=!0);if(c in g)return c;g[c]=b;a||k++;return c},block:d,proc:function(g,l){function d(){var b="a"+h.length;h.push(b);return b}var h=[];l=l||0;for(var f=
0;f<l;++f)d();var f=m(),n=f.toString;return b[g]=c(f,{arg:d,toString:function(){return a(["function(",h.join(),"){",n(),"}"]).join("")}})},scope:m,cond:function(){var b=a(arguments).join(""),g=m(),l=m(),h=g.toString,f=l.toString;return c(g,{then:function(){g.apply(g,a(arguments));return this},"else":function(){l.apply(l,a(arguments));return this},toString:function(){var c=f();c&&(c="else{"+c+"}");return a(["if(",b,"){",h(),"}",c]).join("")}})},compile:function(){var b=[],c=[];Object.keys(g).sort(function(b,
c){var a="$"===b.charAt(0),h="$"===c.charAt(0);return a||h?a&&h?+b.slice(1)<+c.slice(1)?-1:1:a&&!h?-1:1:b.localeCompare(c)}).forEach(function(f){var a=g[f];b.push(f);c.push(a)});for(var a=0,h=b.length-1;-1<h;h--)if("$"===b[h].charAt(0)){a=h;break}a=b.slice(a).join();h=z[a];if(!h)throw Error("missing precompiled function with key: "+a);return h.apply(null,c)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(d,e,r){e.exports={$0:function(a){var c,d,D,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,e,x,u,oa,r,J,
R,A,aa,I,U;c=a.attributes;d=a.current;D=a.framebuffer;m=a.gl;k=a.next;l=a.vao;g=k.blend_color;b=d.blend_color;p=k.blend_equation;H=d.blend_equation;y=k.blend_func;h=d.blend_func;f=k.colorMask;n=d.colorMask;q=k.depth_range;t=d.depth_range;v=k.polygonOffset_offset;G=d.polygonOffset_offset;w=k.sample_coverage;e=d.sample_coverage;x=k.scissor_box;u=d.scissor_box;oa=k.stencil_func;r=d.stencil_func;J=k.stencil_opBack;R=d.stencil_opBack;A=k.stencil_opFront;aa=d.stencil_opFront;I=k.viewport;U=d.viewport;return{poll:function(){var c,
a,l,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,Q,Gb,$a,S,B,ma,da,Ba;d.dirty=!1;a=k.blend_enable;l=k.cull_enable;ka=k.depth_enable;la=k.dither;Sa=k.polygonOffset_enable;Cb=k.sample_alpha;ea=k.sample_enable;Na=k.scissor_enable;V=k.stencil_enable;P=k.cull_face;O=d.cull_face;T=k.depth_func;na=d.depth_func;Q=k.depth_mask;Gb=d.depth_mask;$a=k.frontFace;S=d.frontFace;B=k.lineWidth;ma=d.lineWidth;da=k.stencil_mask;Ba=d.stencil_mask;c=D.next;c!==D.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,null),
D.cur=c);a!==d.blend_enable&&(a?m.enable(3042):m.disable(3042),d.blend_enable=a);l!==d.cull_enable&&(l?m.enable(2884):m.disable(2884),d.cull_enable=l);ka!==d.depth_enable&&(ka?m.enable(2929):m.disable(2929),d.depth_enable=ka);la!==d.dither&&(la?m.enable(3024):m.disable(3024),d.dither=la);Sa!==d.polygonOffset_enable&&(Sa?m.enable(32823):m.disable(32823),d.polygonOffset_enable=Sa);Cb!==d.sample_alpha&&(Cb?m.enable(32926):m.disable(32926),d.sample_alpha=Cb);ea!==d.sample_enable&&(ea?m.enable(32928):
m.disable(32928),d.sample_enable=ea);Na!==d.scissor_enable&&(Na?m.enable(3089):m.disable(3089),d.scissor_enable=Na);V!==d.stencil_enable&&(V?m.enable(2960):m.disable(2960),d.stencil_enable=V);if(g[0]!==b[0]||g[1]!==b[1]||g[2]!==b[2]||g[3]!==b[3])m.blendColor(g[0],g[1],g[2],g[3]),b[0]=g[0],b[1]=g[1],b[2]=g[2],b[3]=g[3];if(p[0]!==H[0]||p[1]!==H[1])m.blendEquationSeparate(p[0],p[1]),H[0]=p[0],H[1]=p[1];if(y[0]!==h[0]||y[1]!==h[1]||y[2]!==h[2]||y[3]!==h[3])m.blendFuncSeparate(y[0],y[1],y[2],y[3]),h[0]=
y[0],h[1]=y[1],h[2]=y[2],h[3]=y[3];if(f[0]!==n[0]||f[1]!==n[1]||f[2]!==n[2]||f[3]!==n[3])m.colorMask(f[0],f[1],f[2],f[3]),n[0]=f[0],n[1]=f[1],n[2]=f[2],n[3]=f[3];P!==O&&(m.cullFace(P),d.cull_face=P);T!==na&&(m.depthFunc(T),d.depth_func=T);Q!==Gb&&(m.depthMask(Q),d.depth_mask=Q);if(q[0]!==t[0]||q[1]!==t[1])m.depthRange(q[0],q[1]),t[0]=q[0],t[1]=q[1];$a!==S&&(m.frontFace($a),d.frontFace=$a);B!==ma&&(m.lineWidth(B),d.lineWidth=B);if(v[0]!==G[0]||v[1]!==G[1])m.polygonOffset(v[0],v[1]),G[0]=v[0],G[1]=
v[1];if(w[0]!==e[0]||w[1]!==e[1])m.sampleCoverage(w[0],w[1]),e[0]=w[0],e[1]=w[1];if(x[0]!==u[0]||x[1]!==u[1]||x[2]!==u[2]||x[3]!==u[3])m.scissor(x[0],x[1],x[2],x[3]),u[0]=x[0],u[1]=x[1],u[2]=x[2],u[3]=x[3];if(oa[0]!==r[0]||oa[1]!==r[1]||oa[2]!==r[2])m.stencilFunc(oa[0],oa[1],oa[2]),r[0]=oa[0],r[1]=oa[1],r[2]=oa[2];da!==Ba&&(m.stencilMask(da),d.stencil_mask=da);if(J[0]!==R[0]||J[1]!==R[1]||J[2]!==R[2]||J[3]!==R[3])m.stencilOpSeparate(J[0],J[1],J[2],J[3]),R[0]=J[0],R[1]=J[1],R[2]=J[2],R[3]=J[3];if(A[0]!==
aa[0]||A[1]!==aa[1]||A[2]!==aa[2]||A[3]!==aa[3])m.stencilOpSeparate(A[0],A[1],A[2],A[3]),aa[0]=A[0],aa[1]=A[1],aa[2]=A[2],aa[3]=A[3];if(I[0]!==U[0]||I[1]!==U[1]||I[2]!==U[2]||I[3]!==U[3])m.viewport(I[0],I[1],I[2],I[3]),U[0]=I[0],U[1]=I[1],U[2]=I[2],U[3]=I[3]},refresh:function(){var a,ja,W,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,Q,Gb;d.dirty=!1;ja=k.blend_enable;W=k.cull_enable;ka=k.depth_enable;la=k.dither;Sa=k.polygonOffset_enable;Cb=k.sample_alpha;ea=k.sample_enable;Na=k.scissor_enable;V=k.stencil_enable;
P=k.cull_face;O=k.depth_func;T=k.depth_mask;na=k.frontFace;Q=k.lineWidth;Gb=k.stencil_mask;(a=D.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);D.cur=a;a=c[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=c[1];a.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(1,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=c[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(2),m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=c[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,
a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=c[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=c[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(5),
m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=c[6];a.buffer?(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=c[7];a.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,a.x,a.y,a.z,
a.w),a.buffer=null);a=c[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=c[9];a.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=c[10];a.buffer?
(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=c[11];a.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=c[12];a.buffer?(m.enableVertexAttribArray(12),
m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=c[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(13),m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=c[14];a.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,a.buffer.buffer),
m.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=c[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);l.currentVAO=null;l.setVAO(l.targetVAO);ja?m.enable(3042):m.disable(3042);d.blend_enable=ja;W?m.enable(2884):
m.disable(2884);d.cull_enable=W;ka?m.enable(2929):m.disable(2929);d.depth_enable=ka;la?m.enable(3024):m.disable(3024);d.dither=la;Sa?m.enable(32823):m.disable(32823);d.polygonOffset_enable=Sa;Cb?m.enable(32926):m.disable(32926);d.sample_alpha=Cb;ea?m.enable(32928):m.disable(32928);d.sample_enable=ea;Na?m.enable(3089):m.disable(3089);d.scissor_enable=Na;V?m.enable(2960):m.disable(2960);d.stencil_enable=V;m.blendColor(g[0],g[1],g[2],g[3]);b[0]=g[0];b[1]=g[1];b[2]=g[2];b[3]=g[3];m.blendEquationSeparate(p[0],
p[1]);H[0]=p[0];H[1]=p[1];m.blendFuncSeparate(y[0],y[1],y[2],y[3]);h[0]=y[0];h[1]=y[1];h[2]=y[2];h[3]=y[3];m.colorMask(f[0],f[1],f[2],f[3]);n[0]=f[0];n[1]=f[1];n[2]=f[2];n[3]=f[3];m.cullFace(P);d.cull_face=P;m.depthFunc(O);d.depth_func=O;m.depthMask(T);d.depth_mask=T;m.depthRange(q[0],q[1]);t[0]=q[0];t[1]=q[1];m.frontFace(na);d.frontFace=na;m.lineWidth(Q);d.lineWidth=Q;m.polygonOffset(v[0],v[1]);G[0]=v[0];G[1]=v[1];m.sampleCoverage(w[0],w[1]);e[0]=w[0];e[1]=w[1];m.scissor(x[0],x[1],x[2],x[3]);u[0]=
x[0];u[1]=x[1];u[2]=x[2];u[3]=x[3];m.stencilFunc(oa[0],oa[1],oa[2]);r[0]=oa[0];r[1]=oa[1];r[2]=oa[2];m.stencilMask(Gb);d.stencil_mask=Gb;m.stencilOpSeparate(J[0],J[1],J[2],J[3]);R[0]=J[0];R[1]=J[1];R[2]=J[2];R[3]=J[3];m.stencilOpSeparate(A[0],A[1],A[2],A[3]);aa[0]=A[0];aa[1]=A[1];aa[2]=A[2];aa[3]=A[3];m.viewport(I[0],I[1],I[2],I[3]);U[0]=I[0];U[1]=I[1];U[2]=I[2];U[3]=I[3]}}},$3:function(a,c,d,D){var m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,e,x,u,oa,r,J,R,A,aa,I,U,K,ja,W,ka,la,Sa;m=a.context;k=a.current;l=
a.framebuffer;g=a.gl;b=a.next;p=a.shader;H=a.vao;y=b.blend_color;h=k.blend_color;f=b.blend_equation;n=k.blend_equation;q=b.blend_func;t=k.blend_func;v=b.colorMask;G=k.colorMask;w=b.depth_range;e=k.depth_range;x=b.polygonOffset_offset;u=k.polygonOffset_offset;oa=b.sample_coverage;r=k.sample_coverage;J=b.scissor_box;R=k.scissor_box;A=b.stencil_func;aa=k.stencil_func;I=b.stencil_opBack;U=k.stencil_opBack;K=b.stencil_opFront;ja=k.stencil_opFront;W=b.viewport;ka=k.viewport;la={};Sa={};return{batch:function(a,
d){var m,z,P,O,T;m=l.next;m!==l.cur&&(m?g.bindFramebuffer(36160,m.framebuffer):g.bindFramebuffer(36160,null),l.cur=m);if(k.dirty){m=b.dither;m!==k.dither&&(m?g.enable(3024):g.disable(3024),k.dither=m);m=b.blend_enable;m!==k.blend_enable&&(m?g.enable(3042):g.disable(3042),k.blend_enable=m);m=y[0];P=y[1];O=y[2];T=y[3];if(m!==h[0]||P!==h[1]||O!==h[2]||T!==h[3])g.blendColor(m,P,O,T),h[0]=m,h[1]=P,h[2]=O,h[3]=T;m=f[0];P=f[1];if(m!==n[0]||P!==n[1])g.blendEquationSeparate(m,P),n[0]=m,n[1]=P;m=q[0];P=q[1];
O=q[2];T=q[3];if(m!==t[0]||P!==t[1]||O!==t[2]||T!==t[3])g.blendFuncSeparate(m,P,O,T),t[0]=m,t[1]=P,t[2]=O,t[3]=T;m=b.depth_enable;m!==k.depth_enable&&(m?g.enable(2929):g.disable(2929),k.depth_enable=m);m=b.depth_func;m!==k.depth_func&&(g.depthFunc(m),k.depth_func=m);m=w[0];P=w[1];if(m!==e[0]||P!==e[1])g.depthRange(m,P),e[0]=m,e[1]=P;m=b.depth_mask;m!==k.depth_mask&&(g.depthMask(m),k.depth_mask=m);m=v[0];P=v[1];O=v[2];T=v[3];if(m!==G[0]||P!==G[1]||O!==G[2]||T!==G[3])g.colorMask(m,P,O,T),G[0]=m,G[1]=
P,G[2]=O,G[3]=T;m=b.cull_enable;m!==k.cull_enable&&(m?g.enable(2884):g.disable(2884),k.cull_enable=m);m=b.cull_face;m!==k.cull_face&&(g.cullFace(m),k.cull_face=m);m=b.frontFace;m!==k.frontFace&&(g.frontFace(m),k.frontFace=m);m=b.lineWidth;m!==k.lineWidth&&(g.lineWidth(m),k.lineWidth=m);m=b.polygonOffset_enable;m!==k.polygonOffset_enable&&(m?g.enable(32823):g.disable(32823),k.polygonOffset_enable=m);m=x[0];P=x[1];if(m!==u[0]||P!==u[1])g.polygonOffset(m,P),u[0]=m,u[1]=P;m=b.sample_alpha;m!==k.sample_alpha&&
(m?g.enable(32926):g.disable(32926),k.sample_alpha=m);m=b.sample_enable;m!==k.sample_enable&&(m?g.enable(32928):g.disable(32928),k.sample_enable=m);m=oa[0];P=oa[1];if(m!==r[0]||P!==r[1])g.sampleCoverage(m,P),r[0]=m,r[1]=P;m=b.stencil_enable;m!==k.stencil_enable&&(m?g.enable(2960):g.disable(2960),k.stencil_enable=m);m=b.stencil_mask;m!==k.stencil_mask&&(g.stencilMask(m),k.stencil_mask=m);m=A[0];P=A[1];O=A[2];if(m!==aa[0]||P!==aa[1]||O!==aa[2])g.stencilFunc(m,P,O),aa[0]=m,aa[1]=P,aa[2]=O;m=K[0];P=K[1];
O=K[2];T=K[3];if(m!==ja[0]||P!==ja[1]||O!==ja[2]||T!==ja[3])g.stencilOpSeparate(m,P,O,T),ja[0]=m,ja[1]=P,ja[2]=O,ja[3]=T;m=I[0];P=I[1];O=I[2];T=I[3];if(m!==U[0]||P!==U[1]||O!==U[2]||T!==U[3])g.stencilOpSeparate(m,P,O,T),U[0]=m,U[1]=P,U[2]=O,U[3]=T;m=b.scissor_enable;m!==k.scissor_enable&&(m?g.enable(3089):g.disable(3089),k.scissor_enable=m);m=J[0];P=J[1];O=J[2];T=J[3];if(m!==R[0]||P!==R[1]||O!==R[2]||T!==R[3])g.scissor(m,P,O,T),R[0]=m,R[1]=P,R[2]=O,R[3]=T;m=W[0];P=W[1];O=W[2];T=W[3];if(m!==ka[0]||
P!==ka[1]||O!==ka[2]||T!==ka[3])g.viewport(m,P,O,T),ka[0]=m,ka[1]=P,ka[2]=O,ka[3]=T;k.dirty=!1}if(m=k.profile)z=performance.now(),c.count+=d;P=p.program(p.vert,p.frag);g.useProgram(P.program);H.setVAO(null);O=P.id;(T=Sa[O])||(T=Sa[O]=D(P));T.call(this,a,d);H.setVAO(null);m&&(c.cpuTime+=performance.now()-z)},draw:function(a){var m,D,V,P,O;m=l.next;m!==l.cur&&(m?g.bindFramebuffer(36160,m.framebuffer):g.bindFramebuffer(36160,null),l.cur=m);if(k.dirty){m=b.dither;m!==k.dither&&(m?g.enable(3024):g.disable(3024),
k.dither=m);m=b.blend_enable;m!==k.blend_enable&&(m?g.enable(3042):g.disable(3042),k.blend_enable=m);m=y[0];V=y[1];P=y[2];O=y[3];if(m!==h[0]||V!==h[1]||P!==h[2]||O!==h[3])g.blendColor(m,V,P,O),h[0]=m,h[1]=V,h[2]=P,h[3]=O;m=f[0];V=f[1];if(m!==n[0]||V!==n[1])g.blendEquationSeparate(m,V),n[0]=m,n[1]=V;m=q[0];V=q[1];P=q[2];O=q[3];if(m!==t[0]||V!==t[1]||P!==t[2]||O!==t[3])g.blendFuncSeparate(m,V,P,O),t[0]=m,t[1]=V,t[2]=P,t[3]=O;m=b.depth_enable;m!==k.depth_enable&&(m?g.enable(2929):g.disable(2929),k.depth_enable=
m);m=b.depth_func;m!==k.depth_func&&(g.depthFunc(m),k.depth_func=m);m=w[0];V=w[1];if(m!==e[0]||V!==e[1])g.depthRange(m,V),e[0]=m,e[1]=V;m=b.depth_mask;m!==k.depth_mask&&(g.depthMask(m),k.depth_mask=m);m=v[0];V=v[1];P=v[2];O=v[3];if(m!==G[0]||V!==G[1]||P!==G[2]||O!==G[3])g.colorMask(m,V,P,O),G[0]=m,G[1]=V,G[2]=P,G[3]=O;m=b.cull_enable;m!==k.cull_enable&&(m?g.enable(2884):g.disable(2884),k.cull_enable=m);m=b.cull_face;m!==k.cull_face&&(g.cullFace(m),k.cull_face=m);m=b.frontFace;m!==k.frontFace&&(g.frontFace(m),
k.frontFace=m);m=b.lineWidth;m!==k.lineWidth&&(g.lineWidth(m),k.lineWidth=m);m=b.polygonOffset_enable;m!==k.polygonOffset_enable&&(m?g.enable(32823):g.disable(32823),k.polygonOffset_enable=m);m=x[0];V=x[1];if(m!==u[0]||V!==u[1])g.polygonOffset(m,V),u[0]=m,u[1]=V;m=b.sample_alpha;m!==k.sample_alpha&&(m?g.enable(32926):g.disable(32926),k.sample_alpha=m);m=b.sample_enable;m!==k.sample_enable&&(m?g.enable(32928):g.disable(32928),k.sample_enable=m);m=oa[0];V=oa[1];if(m!==r[0]||V!==r[1])g.sampleCoverage(m,
V),r[0]=m,r[1]=V;m=b.stencil_enable;m!==k.stencil_enable&&(m?g.enable(2960):g.disable(2960),k.stencil_enable=m);m=b.stencil_mask;m!==k.stencil_mask&&(g.stencilMask(m),k.stencil_mask=m);m=A[0];V=A[1];P=A[2];if(m!==aa[0]||V!==aa[1]||P!==aa[2])g.stencilFunc(m,V,P),aa[0]=m,aa[1]=V,aa[2]=P;m=K[0];V=K[1];P=K[2];O=K[3];if(m!==ja[0]||V!==ja[1]||P!==ja[2]||O!==ja[3])g.stencilOpSeparate(m,V,P,O),ja[0]=m,ja[1]=V,ja[2]=P,ja[3]=O;m=I[0];V=I[1];P=I[2];O=I[3];if(m!==U[0]||V!==U[1]||P!==U[2]||O!==U[3])g.stencilOpSeparate(m,
V,P,O),U[0]=m,U[1]=V,U[2]=P,U[3]=O;m=b.scissor_enable;m!==k.scissor_enable&&(m?g.enable(3089):g.disable(3089),k.scissor_enable=m);m=J[0];V=J[1];P=J[2];O=J[3];if(m!==R[0]||V!==R[1]||P!==R[2]||O!==R[3])g.scissor(m,V,P,O),R[0]=m,R[1]=V,R[2]=P,R[3]=O;m=W[0];V=W[1];P=W[2];O=W[3];if(m!==ka[0]||V!==ka[1]||P!==ka[2]||O!==ka[3])g.viewport(m,V,P,O),ka[0]=m,ka[1]=V,ka[2]=P,ka[3]=O;k.dirty=!1}if(m=k.profile)D=performance.now(),c.count++;V=p.program(p.vert,p.frag);g.useProgram(V.program);H.setVAO(null);P=V.id;
(O=la[P])||(O=la[P]=d(V));O.call(this,a);H.setVAO(null);m&&(c.cpuTime+=performance.now()-D)},scope:function(b,f,a){var h,n;if(h=k.profile)n=performance.now(),c.count++;f(m,b,a);h&&(c.cpuTime+=performance.now()-n)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
c,d,D,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,e,x,u,oa,r,J,R,A,aa,I,U,K,ja,W,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,Q,Gb,$a,S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa,$b,sc,ic,td,zc,Z,N,ha,Fa,sb,Pc,Qc,L,E,ia,sa,X,fa,ra){var M,F,ba,xa,ya,Ja,C,oc,Eb,pa,Fb,xb,Ye,xd,he,ee,we,ue,Od,ge,ve,yd,Cd,Gd,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb,hd,Hb,pc,Wa,Rc,ac,mc,Id,rd,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb;M=a.attributes;F=a.context;ba=a.current;xa=a.draw;ya=a.elements;Ja=a.framebuffer;C=a.gl;oc=a.next;Eb=
a.shader;pa=a.uniforms;Fb=a.vao;xb=oc.blend_color;Ye=ba.blend_color;xd=oc.blend_equation;he=ba.blend_equation;ee=oc.blend_func;we=ba.blend_func;ue=oc.colorMask;Od=ba.colorMask;ge=oc.depth_range;ve=ba.depth_range;yd=oc.polygonOffset_offset;Cd=ba.polygonOffset_offset;Gd=oc.sample_coverage;zd=ba.sample_coverage;xe=oc.scissor_box;Me=ba.scissor_box;Qe=oc.stencil_func;Ad=ba.stencil_func;Be=oc.stencil_opBack;Vd=ba.stencil_opBack;Wd=oc.stencil_opFront;ae=ba.stencil_opFront;Yd=oc.viewport;qd=ba.viewport;nd=
{};vd={};ad=new Float32Array(16);sd=new Float32Array(16);Uc=new Float32Array(16);Dd=new Float32Array(16);Nc=new Float32Array(16);Ic=new Float32Array(16);qc=new Float32Array(16);fb=new Float32Array(16);hd=new Float32Array(16);Hb=new Float32Array(16);pc=new Float32Array(16);Wa=new Float32Array(16);Rc=new Float32Array(16);ac=new Float32Array(16);mc=new Float32Array(16);Id=new Float32Array(16);rd=new Float32Array(16);Fc=new Float32Array(16);cc=new Float32Array(16);Cc=new Float32Array(16);Yc=new Float32Array(16);
Yb=new Float32Array(16);Gc=new Float32Array(16);Xa=new Float32Array(16);Ca=new Float32Array(16);ud=new Float32Array(16);Ib=new Float32Array(16);Ta=new Float32Array(16);Ub=new Float32Array(16);bb=new Float32Array(16);Dc=new Float32Array(16);Wb=new Float32Array(16);return{batch:function(c,a){var d,w,z,x;d=Ja.next;d!==Ja.cur&&(d?C.bindFramebuffer(36160,d.framebuffer):C.bindFramebuffer(36160,null),Ja.cur=d);if(ba.dirty){var e,u,Ia,r,A,oa,ja,J,I,R,ca,pa,K,aa,U,W,ka,fb,za,Eb,Wa,xb,Hb,Ra,ac;e=ue[0];u=ue[1];
Ia=ue[2];r=ue[3];if(e!==Od[0]||u!==Od[1]||Ia!==Od[2]||r!==Od[3])C.colorMask(e,u,Ia,r),Od[0]=e,Od[1]=u,Od[2]=Ia,Od[3]=r;A=oc.frontFace;A!==ba.frontFace&&(C.frontFace(A),ba.frontFace=A);oa=oc.polygonOffset_enable;oa!==ba.polygonOffset_enable&&(oa?C.enable(32823):C.disable(32823),ba.polygonOffset_enable=oa);ja=yd[0];J=yd[1];if(ja!==Cd[0]||J!==Cd[1])C.polygonOffset(ja,J),Cd[0]=ja,Cd[1]=J;I=oc.sample_alpha;I!==ba.sample_alpha&&(I?C.enable(32926):C.disable(32926),ba.sample_alpha=I);R=oc.sample_enable;R!==
ba.sample_enable&&(R?C.enable(32928):C.disable(32928),ba.sample_enable=R);ca=Gd[0];pa=Gd[1];if(ca!==zd[0]||pa!==zd[1])C.sampleCoverage(ca,pa),zd[0]=ca,zd[1]=pa;K=oc.stencil_enable;K!==ba.stencil_enable&&(K?C.enable(2960):C.disable(2960),ba.stencil_enable=K);aa=oc.stencil_mask;aa!==ba.stencil_mask&&(C.stencilMask(aa),ba.stencil_mask=aa);U=Qe[0];W=Qe[1];ka=Qe[2];if(U!==Ad[0]||W!==Ad[1]||ka!==Ad[2])C.stencilFunc(U,W,ka),Ad[0]=U,Ad[1]=W,Ad[2]=ka;fb=Wd[0];za=Wd[1];Eb=Wd[2];Wa=Wd[3];if(fb!==ae[0]||za!==
ae[1]||Eb!==ae[2]||Wa!==ae[3])C.stencilOpSeparate(fb,za,Eb,Wa),ae[0]=fb,ae[1]=za,ae[2]=Eb,ae[3]=Wa;xb=Be[0];Hb=Be[1];Ra=Be[2];ac=Be[3];if(xb!==Vd[0]||Hb!==Vd[1]||Ra!==Vd[2]||ac!==Vd[3])C.stencilOpSeparate(xb,Hb,Ra,ac),Vd[0]=xb,Vd[1]=Hb,Vd[2]=Ra,Vd[3]=ac}C.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;C.disable(3042);ba.blend_enable=!1;C.blendEquationSeparate(32774,32774);he[0]=32774;he[1]=32774;C.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;C.enable(2884);ba.cull_enable=
!0;C.cullFace(1029);ba.cull_face=1029;C.enable(2929);ba.depth_enable=!0;C.depthFunc(513);ba.depth_func=513;C.depthMask(!0);ba.depth_mask=!0;C.depthRange(0,1);ve[0]=0;ve[1]=1;C.disable(3024);ba.dither=!1;C.lineWidth(2);ba.lineWidth=2;C.enable(3089);ba.scissor_enable=!0;w=ba.profile;ba.profile=!1;C.useProgram(Cb.program);var Ic,Nc,qc,ua,xe,La,Uc,eb,hb,va,Rc,Da,pb,qb,Ya,Za,hd,mc,sd,Va,Mb,pc,Ga,ad,Qa,Aa,kb,ub,Bb,rb,Dd,vb,la;Fb.setVAO(null);Ic=$b.location;Nc=M[Ic];Nc.buffer||C.enableVertexAttribArray(Ic);
if(Nc.type!==D.dtype||4!==Nc.size||Nc.buffer!==D||!1!==Nc.normalized||0!==Nc.offset||0!==Nc.stride)C.bindBuffer(34962,D.buffer),C.vertexAttribPointer(Ic,4,D.dtype,!1,0,0),Nc.type=D.dtype,Nc.size=4,Nc.buffer=D,Nc.normalized=!1,Nc.offset=0,Nc.stride=0;qc=sc.location;ua=M[qc];ua.buffer||C.enableVertexAttribArray(qc);if(ua.type!==m.dtype||4!==ua.size||ua.buffer!==m||!1!==ua.normalized||0!==ua.offset||0!==ua.stride)C.bindBuffer(34962,m.buffer),C.vertexAttribPointer(qc,4,m.dtype,!1,0,0),ua.type=m.dtype,
ua.size=4,ua.buffer=m,ua.normalized=!1,ua.offset=0,ua.stride=0;xe=ic.location;La=M[xe];La.buffer||C.enableVertexAttribArray(xe);if(La.type!==k.dtype||4!==La.size||La.buffer!==k||!1!==La.normalized||0!==La.offset||0!==La.stride)C.bindBuffer(34962,k.buffer),C.vertexAttribPointer(xe,4,k.dtype,!1,0,0),La.type=k.dtype,La.size=4,La.buffer=k,La.normalized=!1,La.offset=0,La.stride=0;Uc=td.location;eb=M[Uc];eb.buffer||C.enableVertexAttribArray(Uc);if(eb.type!==l.dtype||4!==eb.size||eb.buffer!==l||!1!==eb.normalized||
0!==eb.offset||0!==eb.stride)C.bindBuffer(34962,l.buffer),C.vertexAttribPointer(Uc,4,l.dtype,!1,0,0),eb.type=l.dtype,eb.size=4,eb.buffer=l,eb.normalized=!1,eb.offset=0,eb.stride=0;hb=zc.location;va=M[hb];va.buffer||C.enableVertexAttribArray(hb);if(va.type!==g.dtype||4!==va.size||va.buffer!==g||!1!==va.normalized||0!==va.offset||0!==va.stride)C.bindBuffer(34962,g.buffer),C.vertexAttribPointer(hb,4,g.dtype,!1,0,0),va.type=g.dtype,va.size=4,va.buffer=g,va.normalized=!1,va.offset=0,va.stride=0;Rc=Z.location;
Da=M[Rc];Da.buffer||C.enableVertexAttribArray(Rc);if(Da.type!==b.dtype||4!==Da.size||Da.buffer!==b||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)C.bindBuffer(34962,b.buffer),C.vertexAttribPointer(Rc,4,b.dtype,!1,0,0),Da.type=b.dtype,Da.size=4,Da.buffer=b,Da.normalized=!1,Da.offset=0,Da.stride=0;pb=N.location;qb=M[pb];qb.buffer||C.enableVertexAttribArray(pb);if(qb.type!==p.dtype||4!==qb.size||qb.buffer!==p||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)C.bindBuffer(34962,p.buffer),C.vertexAttribPointer(pb,
4,p.dtype,!1,0,0),qb.type=p.dtype,qb.size=4,qb.buffer=p,qb.normalized=!1,qb.offset=0,qb.stride=0;Ya=ha.location;Za=M[Ya];Za.buffer||C.enableVertexAttribArray(Ya);if(Za.type!==H.dtype||4!==Za.size||Za.buffer!==H||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)C.bindBuffer(34962,H.buffer),C.vertexAttribPointer(Ya,4,H.dtype,!1,0,0),Za.type=H.dtype,Za.size=4,Za.buffer=H,Za.normalized=!1,Za.offset=0,Za.stride=0;hd=Fa.location;mc=M[hd];mc.buffer||C.enableVertexAttribArray(hd);if(mc.type!==y.dtype||4!==
mc.size||mc.buffer!==y||!1!==mc.normalized||0!==mc.offset||0!==mc.stride)C.bindBuffer(34962,y.buffer),C.vertexAttribPointer(hd,4,y.dtype,!1,0,0),mc.type=y.dtype,mc.size=4,mc.buffer=y,mc.normalized=!1,mc.offset=0,mc.stride=0;sd=sb.location;Va=M[sd];Va.buffer||C.enableVertexAttribArray(sd);if(Va.type!==h.dtype||4!==Va.size||Va.buffer!==h||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)C.bindBuffer(34962,h.buffer),C.vertexAttribPointer(sd,4,h.dtype,!1,0,0),Va.type=h.dtype,Va.size=4,Va.buffer=h,Va.normalized=
!1,Va.offset=0,Va.stride=0;Mb=Pc.location;pc=M[Mb];pc.buffer||C.enableVertexAttribArray(Mb);if(pc.type!==f.dtype||4!==pc.size||pc.buffer!==f||!1!==pc.normalized||0!==pc.offset||0!==pc.stride)C.bindBuffer(34962,f.buffer),C.vertexAttribPointer(Mb,4,f.dtype,!1,0,0),pc.type=f.dtype,pc.size=4,pc.buffer=f,pc.normalized=!1,pc.offset=0,pc.stride=0;Ga=Qc.location;ad=M[Ga];ad.buffer||C.enableVertexAttribArray(Ga);if(ad.type!==n.dtype||4!==ad.size||ad.buffer!==n||!1!==ad.normalized||0!==ad.offset||0!==ad.stride)C.bindBuffer(34962,
n.buffer),C.vertexAttribPointer(Ga,4,n.dtype,!1,0,0),ad.type=n.dtype,ad.size=4,ad.buffer=n,ad.normalized=!1,ad.offset=0,ad.stride=0;Qa=L.location;Aa=M[Qa];Aa.buffer||C.enableVertexAttribArray(Qa);if(Aa.type!==q.dtype||4!==Aa.size||Aa.buffer!==q||!1!==Aa.normalized||0!==Aa.offset||0!==Aa.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(Qa,4,q.dtype,!1,0,0),Aa.type=q.dtype,Aa.size=4,Aa.buffer=q,Aa.normalized=!1,Aa.offset=0,Aa.stride=0;kb=E.location;ub=M[kb];ub.buffer||C.enableVertexAttribArray(kb);
if(ub.type!==t.dtype||4!==ub.size||ub.buffer!==t||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)C.bindBuffer(34962,t.buffer),C.vertexAttribPointer(kb,4,t.dtype,!1,0,0),ub.type=t.dtype,ub.size=4,ub.buffer=t,ub.normalized=!1,ub.offset=0,ub.stride=0;Bb=ia.location;rb=M[Bb];rb.buffer||C.enableVertexAttribArray(Bb);if(rb.type!==v.dtype||4!==rb.size||rb.buffer!==v||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)C.bindBuffer(34962,v.buffer),C.vertexAttribPointer(Bb,4,v.dtype,!1,0,0),rb.type=v.dtype,
rb.size=4,rb.buffer=v,rb.normalized=!1,rb.offset=0,rb.stride=0;Dd=Na.location;vb=M[Dd];vb.buffer||C.enableVertexAttribArray(Dd);if(vb.type!==G.dtype||4!==vb.size||vb.buffer!==G||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)C.bindBuffer(34962,G.buffer),C.vertexAttribPointer(Dd,4,G.dtype,!1,0,0),vb.type=G.dtype,vb.size=4,vb.buffer=G,vb.normalized=!1,vb.offset=0,vb.stride=0;C.uniform1i(sa.location,ea.bind());(la=xa.elements)?C.bindBuffer(34963,la.buffer.buffer):Fb.currentVAO&&(la=ya.getElements(Fb.currentVAO.elements))&&
C.bindBuffer(34963,la.buffer.buffer);for(z=0;z<a;++z){x=c[z];var ee,ge,Yd,Id,Sa,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,xd,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be;nd.height=x.viewportHeight;nd.width=x.viewportWidth;nd.x=x.viewportX;nd.y=x.viewportY;ee=nd.x|0;ge=nd.y|0;Yd="width"in nd?nd.width|0:F.framebufferWidth-ee;Id="height"in nd?nd.height|0:F.framebufferHeight-ge;Sa=F.viewportWidth;F.viewportWidth=Yd;Vb=F.viewportHeight;
F.viewportHeight=Id;C.viewport(ee,ge,Yd,Id);qd[0]=ee;qd[1]=ge;qd[2]=Yd;qd[3]=Id;vd.height=x.scissorHeight;vd.width=x.scissorWidth;vd.x=x.scissorX;vd.y=x.scissorY;bc=vd.x|0;Pb=vd.y|0;Ha="width"in vd?vd.width|0:F.framebufferWidth-bc;Zb="height"in vd?vd.height|0:F.framebufferHeight-Pb;C.scissor(bc,Pb,Ha,Zb);Me[0]=bc;Me[1]=Pb;Me[2]=Ha;Me[3]=Zb;lb=x.dim0A;C.uniformMatrix4fv(P.location,!1,Array.isArray(lb)||lb instanceof Float32Array?lb:(rd[0]=lb[0],rd[1]=lb[1],rd[2]=lb[2],rd[3]=lb[3],rd[4]=lb[4],rd[5]=
lb[5],rd[6]=lb[6],rd[7]=lb[7],rd[8]=lb[8],rd[9]=lb[9],rd[10]=lb[10],rd[11]=lb[11],rd[12]=lb[12],rd[13]=lb[13],rd[14]=lb[14],rd[15]=lb[15],rd));wb=x.dim1A;C.uniformMatrix4fv(Q.location,!1,Array.isArray(wb)||wb instanceof Float32Array?wb:(Fc[0]=wb[0],Fc[1]=wb[1],Fc[2]=wb[2],Fc[3]=wb[3],Fc[4]=wb[4],Fc[5]=wb[5],Fc[6]=wb[6],Fc[7]=wb[7],Fc[8]=wb[8],Fc[9]=wb[9],Fc[10]=wb[10],Fc[11]=wb[11],Fc[12]=wb[12],Fc[13]=wb[13],Fc[14]=wb[14],Fc[15]=wb[15],Fc));Nb=x.dim0B;C.uniformMatrix4fv(O.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(cc[0]=Nb[0],cc[1]=Nb[1],cc[2]=Nb[2],cc[3]=Nb[3],cc[4]=Nb[4],cc[5]=Nb[5],cc[6]=Nb[6],cc[7]=Nb[7],cc[8]=Nb[8],cc[9]=Nb[9],cc[10]=Nb[10],cc[11]=Nb[11],cc[12]=Nb[12],cc[13]=Nb[13],cc[14]=Nb[14],cc[15]=Nb[15],cc));Qb=x.dim1B;C.uniformMatrix4fv(Gb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Cc[0]=Qb[0],Cc[1]=Qb[1],Cc[2]=Qb[2],Cc[3]=Qb[3],Cc[4]=Qb[4],Cc[5]=Qb[5],Cc[6]=Qb[6],Cc[7]=Qb[7],Cc[8]=Qb[8],Cc[9]=Qb[9],Cc[10]=Qb[10],Cc[11]=Qb[11],Cc[12]=Qb[12],Cc[13]=
Qb[13],Cc[14]=Qb[14],Cc[15]=Qb[15],Cc));ec=x.dim0C;C.uniformMatrix4fv(T.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(Yc[0]=ec[0],Yc[1]=ec[1],Yc[2]=ec[2],Yc[3]=ec[3],Yc[4]=ec[4],Yc[5]=ec[5],Yc[6]=ec[6],Yc[7]=ec[7],Yc[8]=ec[8],Yc[9]=ec[9],Yc[10]=ec[10],Yc[11]=ec[11],Yc[12]=ec[12],Yc[13]=ec[13],Yc[14]=ec[14],Yc[15]=ec[15],Yc));gc=x.dim1C;C.uniformMatrix4fv($a.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Yb[0]=gc[0],Yb[1]=gc[1],Yb[2]=gc[2],Yb[3]=gc[3],Yb[4]=gc[4],Yb[5]=
gc[5],Yb[6]=gc[6],Yb[7]=gc[7],Yb[8]=gc[8],Yb[9]=gc[9],Yb[10]=gc[10],Yb[11]=gc[11],Yb[12]=gc[12],Yb[13]=gc[13],Yb[14]=gc[14],Yb[15]=gc[15],Yb));xd=x.dim0D;C.uniformMatrix4fv(na.location,!1,Array.isArray(xd)||xd instanceof Float32Array?xd:(Gc[0]=xd[0],Gc[1]=xd[1],Gc[2]=xd[2],Gc[3]=xd[3],Gc[4]=xd[4],Gc[5]=xd[5],Gc[6]=xd[6],Gc[7]=xd[7],Gc[8]=xd[8],Gc[9]=xd[9],Gc[10]=xd[10],Gc[11]=xd[11],Gc[12]=xd[12],Gc[13]=xd[13],Gc[14]=xd[14],Gc[15]=xd[15],Gc));xc=x.dim1D;C.uniformMatrix4fv(S.location,!1,Array.isArray(xc)||
xc instanceof Float32Array?xc:(Xa[0]=xc[0],Xa[1]=xc[1],Xa[2]=xc[2],Xa[3]=xc[3],Xa[4]=xc[4],Xa[5]=xc[5],Xa[6]=xc[6],Xa[7]=xc[7],Xa[8]=xc[8],Xa[9]=xc[9],Xa[10]=xc[10],Xa[11]=xc[11],Xa[12]=xc[12],Xa[13]=xc[13],Xa[14]=xc[14],Xa[15]=xc[15],Xa));yc=x.loA;C.uniformMatrix4fv(yb.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(Ca[0]=yc[0],Ca[1]=yc[1],Ca[2]=yc[2],Ca[3]=yc[3],Ca[4]=yc[4],Ca[5]=yc[5],Ca[6]=yc[6],Ca[7]=yc[7],Ca[8]=yc[8],Ca[9]=yc[9],Ca[10]=yc[10],Ca[11]=yc[11],Ca[12]=yc[12],Ca[13]=
yc[13],Ca[14]=yc[14],Ca[15]=yc[15],Ca));Ac=x.hiA;C.uniformMatrix4fv(ma.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(ud[0]=Ac[0],ud[1]=Ac[1],ud[2]=Ac[2],ud[3]=Ac[3],ud[4]=Ac[4],ud[5]=Ac[5],ud[6]=Ac[6],ud[7]=Ac[7],ud[8]=Ac[8],ud[9]=Ac[9],ud[10]=Ac[10],ud[11]=Ac[11],ud[12]=Ac[12],ud[13]=Ac[13],ud[14]=Ac[14],ud[15]=Ac[15],ud));Kc=x.loB;C.uniformMatrix4fv(Ka.location,!1,Array.isArray(Kc)||Kc instanceof Float32Array?Kc:(Ib[0]=Kc[0],Ib[1]=Kc[1],Ib[2]=Kc[2],Ib[3]=Kc[3],Ib[4]=Kc[4],Ib[5]=
Kc[5],Ib[6]=Kc[6],Ib[7]=Kc[7],Ib[8]=Kc[8],Ib[9]=Kc[9],Ib[10]=Kc[10],Ib[11]=Kc[11],Ib[12]=Kc[12],Ib[13]=Kc[13],Ib[14]=Kc[14],Ib[15]=Kc[15],Ib));$c=x.hiB;C.uniformMatrix4fv(da.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Ta[0]=$c[0],Ta[1]=$c[1],Ta[2]=$c[2],Ta[3]=$c[3],Ta[4]=$c[4],Ta[5]=$c[5],Ta[6]=$c[6],Ta[7]=$c[7],Ta[8]=$c[8],Ta[9]=$c[9],Ta[10]=$c[10],Ta[11]=$c[11],Ta[12]=$c[12],Ta[13]=$c[13],Ta[14]=$c[14],Ta[15]=$c[15],Ta));Sc=x.loC;C.uniformMatrix4fv(Y.location,!1,Array.isArray(Sc)||
Sc instanceof Float32Array?Sc:(Ub[0]=Sc[0],Ub[1]=Sc[1],Ub[2]=Sc[2],Ub[3]=Sc[3],Ub[4]=Sc[4],Ub[5]=Sc[5],Ub[6]=Sc[6],Ub[7]=Sc[7],Ub[8]=Sc[8],Ub[9]=Sc[9],Ub[10]=Sc[10],Ub[11]=Sc[11],Ub[12]=Sc[12],Ub[13]=Sc[13],Ub[14]=Sc[14],Ub[15]=Sc[15],Ub));Lc=x.hiC;C.uniformMatrix4fv(Ba.location,!1,Array.isArray(Lc)||Lc instanceof Float32Array?Lc:(bb[0]=Lc[0],bb[1]=Lc[1],bb[2]=Lc[2],bb[3]=Lc[3],bb[4]=Lc[4],bb[5]=Lc[5],bb[6]=Lc[6],bb[7]=Lc[7],bb[8]=Lc[8],bb[9]=Lc[9],bb[10]=Lc[10],bb[11]=Lc[11],bb[12]=Lc[12],bb[13]=
Lc[13],bb[14]=Lc[14],bb[15]=Lc[15],bb));Kb=x.loD;C.uniformMatrix4fv(mb.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(Dc[0]=Kb[0],Dc[1]=Kb[1],Dc[2]=Kb[2],Dc[3]=Kb[3],Dc[4]=Kb[4],Dc[5]=Kb[5],Dc[6]=Kb[6],Dc[7]=Kb[7],Dc[8]=Kb[8],Dc[9]=Kb[9],Dc[10]=Kb[10],Dc[11]=Kb[11],Dc[12]=Kb[12],Dc[13]=Kb[13],Dc[14]=Kb[14],Dc[15]=Kb[15],Dc));Db=x.hiD;C.uniformMatrix4fv(Ea.location,!1,Array.isArray(Db)||Db instanceof Float32Array?Db:(Wb[0]=Db[0],Wb[1]=Db[1],Wb[2]=Db[2],Wb[3]=Db[3],Wb[4]=Db[4],Wb[5]=
Db[5],Wb[6]=Db[6],Wb[7]=Db[7],Wb[8]=Db[8],Wb[9]=Db[9],Wb[10]=Db[10],Wb[11]=Db[11],Wb[12]=Db[12],Wb[13]=Db[13],Wb[14]=Db[14],Wb[15]=Db[15],Wb));Mc=x.resolution;Ec=Mc[0];fc=Mc[1];z&&Tc===Ec&&Wc===fc||(Tc=Ec,Wc=fc,C.uniform2f(X.location,Ec,fc));gd=x.viewBoxPos;kd=gd[0];Xc=gd[1];z&&md===kd&&bf===Xc||(md=kd,bf=Xc,C.uniform2f(fa.location,kd,Xc));Zd=x.viewBoxSize;ke=Zd[0];me=Zd[1];z&&se===ke&&Md===me||(se=ke,Md=me,C.uniform2f(ra.location,ke,me));Kd=x.maskHeight;z&&id===Kd||(id=Kd,C.uniform1f(ga.location,
Kd));Bc=x.drwLayer;z&&od===Bc||(od=Bc,C.uniform1f(B.location,Bc));ld=x.contextColor;cd=ld[0];Fd=ld[1];te=ld[2];Ae=ld[3];z&&pd===cd&&Hd===Fd&&ze===te&&ne===Ae||(pd=cd,Hd=Fd,ze=te,ne=Ae,C.uniform4f(V.location,cd,Fd,te,Ae));(fe=x.maskTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);de=fe._texture;C.uniform1i(qa.location,de.bind());pe=x.offset;if(be=x.count)la?C.drawElements(1,be,la.type,pe<<(la.type-5121>>1)):C.drawArrays(1,pe,be),F.viewportWidth=Sa,F.viewportHeight=Vb,de.unbind()}ea.unbind();
ba.dirty=!0;Fb.setVAO(null);ba.profile=w},draw:function(c){var a,x,e,u,Ia,r;a=Ja.next;a!==Ja.cur&&(a?C.bindFramebuffer(36160,a.framebuffer):C.bindFramebuffer(36160,null),Ja.cur=a);if(ba.dirty){a=ue[0];r=ue[1];x=ue[2];e=ue[3];if(a!==Od[0]||r!==Od[1]||x!==Od[2]||e!==Od[3])C.colorMask(a,r,x,e),Od[0]=a,Od[1]=r,Od[2]=x,Od[3]=e;a=oc.frontFace;a!==ba.frontFace&&(C.frontFace(a),ba.frontFace=a);a=oc.polygonOffset_enable;a!==ba.polygonOffset_enable&&(a?C.enable(32823):C.disable(32823),ba.polygonOffset_enable=
a);a=yd[0];r=yd[1];if(a!==Cd[0]||r!==Cd[1])C.polygonOffset(a,r),Cd[0]=a,Cd[1]=r;a=oc.sample_alpha;a!==ba.sample_alpha&&(a?C.enable(32926):C.disable(32926),ba.sample_alpha=a);a=oc.sample_enable;a!==ba.sample_enable&&(a?C.enable(32928):C.disable(32928),ba.sample_enable=a);a=Gd[0];r=Gd[1];if(a!==zd[0]||r!==zd[1])C.sampleCoverage(a,r),zd[0]=a,zd[1]=r;a=oc.stencil_enable;a!==ba.stencil_enable&&(a?C.enable(2960):C.disable(2960),ba.stencil_enable=a);a=oc.stencil_mask;a!==ba.stencil_mask&&(C.stencilMask(a),
ba.stencil_mask=a);a=Qe[0];r=Qe[1];x=Qe[2];if(a!==Ad[0]||r!==Ad[1]||x!==Ad[2])C.stencilFunc(a,r,x),Ad[0]=a,Ad[1]=r,Ad[2]=x;a=Wd[0];r=Wd[1];x=Wd[2];e=Wd[3];if(a!==ae[0]||r!==ae[1]||x!==ae[2]||e!==ae[3])C.stencilOpSeparate(a,r,x,e),ae[0]=a,ae[1]=r,ae[2]=x,ae[3]=e;a=Be[0];r=Be[1];x=Be[2];e=Be[3];if(a!==Vd[0]||r!==Vd[1]||x!==Vd[2]||e!==Vd[3])C.stencilOpSeparate(a,r,x,e),Vd[0]=a,Vd[1]=r,Vd[2]=x,Vd[3]=e}nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;x=nd.x|0;e=nd.y|
0;u="width"in nd?nd.width|0:F.framebufferWidth-x;Ia="height"in nd?nd.height|0:F.framebufferHeight-e;a=F.viewportWidth;F.viewportWidth=u;r=F.viewportHeight;F.viewportHeight=Ia;C.viewport(x,e,u,Ia);qd[0]=x;qd[1]=e;qd[2]=u;qd[3]=Ia;C.blendColor(0,0,0,0);Ye[0]=0;Ye[1]=0;Ye[2]=0;Ye[3]=0;C.disable(3042);ba.blend_enable=!1;C.blendEquationSeparate(32774,32774);he[0]=32774;he[1]=32774;C.blendFuncSeparate(770,771,1,1);we[0]=770;we[1]=771;we[2]=1;we[3]=1;C.enable(2884);ba.cull_enable=!0;C.cullFace(1029);ba.cull_face=
1029;C.enable(2929);ba.depth_enable=!0;C.depthFunc(513);ba.depth_func=513;C.depthMask(!0);ba.depth_mask=!0;C.depthRange(0,1);ve[0]=0;ve[1]=1;C.disable(3024);ba.dither=!1;C.lineWidth(2);ba.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;x=vd.x|0;e=vd.y|0;u="width"in vd?vd.width|0:F.framebufferWidth-x;Ia="height"in vd?vd.height|0:F.framebufferHeight-e;C.scissor(x,e,u,Ia);Me[0]=x;Me[1]=e;Me[2]=u;Me[3]=Ia;C.enable(3089);ba.scissor_enable=!0;x=ba.profile;ba.profile=
!1;C.useProgram(d.program);Fb.setVAO(null);e=$b.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==D.dtype||4!==u.size||u.buffer!==D||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,D.buffer),C.vertexAttribPointer(e,4,D.dtype,!1,0,0),u.type=D.dtype,u.size=4,u.buffer=D,u.normalized=!1,u.offset=0,u.stride=0;e=sc.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==m.dtype||4!==u.size||u.buffer!==m||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,
m.buffer),C.vertexAttribPointer(e,4,m.dtype,!1,0,0),u.type=m.dtype,u.size=4,u.buffer=m,u.normalized=!1,u.offset=0,u.stride=0;e=ic.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==k.dtype||4!==u.size||u.buffer!==k||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,k.buffer),C.vertexAttribPointer(e,4,k.dtype,!1,0,0),u.type=k.dtype,u.size=4,u.buffer=k,u.normalized=!1,u.offset=0,u.stride=0;e=td.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==l.dtype||
4!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,l.buffer),C.vertexAttribPointer(e,4,l.dtype,!1,0,0),u.type=l.dtype,u.size=4,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;e=zc.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==g.dtype||4!==u.size||u.buffer!==g||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,g.buffer),C.vertexAttribPointer(e,4,g.dtype,!1,0,0),u.type=g.dtype,u.size=4,u.buffer=g,u.normalized=!1,u.offset=0,
u.stride=0;e=Z.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==b.dtype||4!==u.size||u.buffer!==b||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,b.buffer),C.vertexAttribPointer(e,4,b.dtype,!1,0,0),u.type=b.dtype,u.size=4,u.buffer=b,u.normalized=!1,u.offset=0,u.stride=0;e=N.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==p.dtype||4!==u.size||u.buffer!==p||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,p.buffer),C.vertexAttribPointer(e,
4,p.dtype,!1,0,0),u.type=p.dtype,u.size=4,u.buffer=p,u.normalized=!1,u.offset=0,u.stride=0;e=ha.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==H.dtype||4!==u.size||u.buffer!==H||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,H.buffer),C.vertexAttribPointer(e,4,H.dtype,!1,0,0),u.type=H.dtype,u.size=4,u.buffer=H,u.normalized=!1,u.offset=0,u.stride=0;e=Fa.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==y.dtype||4!==u.size||u.buffer!==y||!1!==u.normalized||
0!==u.offset||0!==u.stride)C.bindBuffer(34962,y.buffer),C.vertexAttribPointer(e,4,y.dtype,!1,0,0),u.type=y.dtype,u.size=4,u.buffer=y,u.normalized=!1,u.offset=0,u.stride=0;e=sb.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==h.dtype||4!==u.size||u.buffer!==h||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,h.buffer),C.vertexAttribPointer(e,4,h.dtype,!1,0,0),u.type=h.dtype,u.size=4,u.buffer=h,u.normalized=!1,u.offset=0,u.stride=0;e=Pc.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);
if(u.type!==f.dtype||4!==u.size||u.buffer!==f||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,f.buffer),C.vertexAttribPointer(e,4,f.dtype,!1,0,0),u.type=f.dtype,u.size=4,u.buffer=f,u.normalized=!1,u.offset=0,u.stride=0;e=Qc.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==n.dtype||4!==u.size||u.buffer!==n||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,n.buffer),C.vertexAttribPointer(e,4,n.dtype,!1,0,0),u.type=n.dtype,u.size=4,u.buffer=n,u.normalized=
!1,u.offset=0,u.stride=0;e=L.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==q.dtype||4!==u.size||u.buffer!==q||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(e,4,q.dtype,!1,0,0),u.type=q.dtype,u.size=4,u.buffer=q,u.normalized=!1,u.offset=0,u.stride=0;e=E.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==t.dtype||4!==u.size||u.buffer!==t||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,t.buffer),
C.vertexAttribPointer(e,4,t.dtype,!1,0,0),u.type=t.dtype,u.size=4,u.buffer=t,u.normalized=!1,u.offset=0,u.stride=0;e=ia.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==v.dtype||4!==u.size||u.buffer!==v||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,v.buffer),C.vertexAttribPointer(e,4,v.dtype,!1,0,0),u.type=v.dtype,u.size=4,u.buffer=v,u.normalized=!1,u.offset=0,u.stride=0;e=Na.location;u=M[e];u.buffer||C.enableVertexAttribArray(e);if(u.type!==G.dtype||4!==u.size||
u.buffer!==G||!1!==u.normalized||0!==u.offset||0!==u.stride)C.bindBuffer(34962,G.buffer),C.vertexAttribPointer(e,4,G.dtype,!1,0,0),u.type=G.dtype,u.size=4,u.buffer=G,u.normalized=!1,u.offset=0,u.stride=0;e=c.dim0A;C.uniformMatrix4fv(P.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ad[0]=e[0],ad[1]=e[1],ad[2]=e[2],ad[3]=e[3],ad[4]=e[4],ad[5]=e[5],ad[6]=e[6],ad[7]=e[7],ad[8]=e[8],ad[9]=e[9],ad[10]=e[10],ad[11]=e[11],ad[12]=e[12],ad[13]=e[13],ad[14]=e[14],ad[15]=e[15],ad));e=c.dim1A;C.uniformMatrix4fv(Q.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(sd[0]=e[0],sd[1]=e[1],sd[2]=e[2],sd[3]=e[3],sd[4]=e[4],sd[5]=e[5],sd[6]=e[6],sd[7]=e[7],sd[8]=e[8],sd[9]=e[9],sd[10]=e[10],sd[11]=e[11],sd[12]=e[12],sd[13]=e[13],sd[14]=e[14],sd[15]=e[15],sd));e=c.dim0B;C.uniformMatrix4fv(O.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Uc[0]=e[0],Uc[1]=e[1],Uc[2]=e[2],Uc[3]=e[3],Uc[4]=e[4],Uc[5]=e[5],Uc[6]=e[6],Uc[7]=e[7],Uc[8]=e[8],Uc[9]=e[9],Uc[10]=e[10],Uc[11]=e[11],Uc[12]=e[12],Uc[13]=e[13],Uc[14]=
e[14],Uc[15]=e[15],Uc));e=c.dim1B;C.uniformMatrix4fv(Gb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Dd[0]=e[0],Dd[1]=e[1],Dd[2]=e[2],Dd[3]=e[3],Dd[4]=e[4],Dd[5]=e[5],Dd[6]=e[6],Dd[7]=e[7],Dd[8]=e[8],Dd[9]=e[9],Dd[10]=e[10],Dd[11]=e[11],Dd[12]=e[12],Dd[13]=e[13],Dd[14]=e[14],Dd[15]=e[15],Dd));e=c.dim0C;C.uniformMatrix4fv(T.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Nc[0]=e[0],Nc[1]=e[1],Nc[2]=e[2],Nc[3]=e[3],Nc[4]=e[4],Nc[5]=e[5],Nc[6]=e[6],Nc[7]=e[7],Nc[8]=e[8],Nc[9]=
e[9],Nc[10]=e[10],Nc[11]=e[11],Nc[12]=e[12],Nc[13]=e[13],Nc[14]=e[14],Nc[15]=e[15],Nc));e=c.dim1C;C.uniformMatrix4fv($a.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ic[0]=e[0],Ic[1]=e[1],Ic[2]=e[2],Ic[3]=e[3],Ic[4]=e[4],Ic[5]=e[5],Ic[6]=e[6],Ic[7]=e[7],Ic[8]=e[8],Ic[9]=e[9],Ic[10]=e[10],Ic[11]=e[11],Ic[12]=e[12],Ic[13]=e[13],Ic[14]=e[14],Ic[15]=e[15],Ic));e=c.dim0D;C.uniformMatrix4fv(na.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(qc[0]=e[0],qc[1]=e[1],qc[2]=e[2],qc[3]=
e[3],qc[4]=e[4],qc[5]=e[5],qc[6]=e[6],qc[7]=e[7],qc[8]=e[8],qc[9]=e[9],qc[10]=e[10],qc[11]=e[11],qc[12]=e[12],qc[13]=e[13],qc[14]=e[14],qc[15]=e[15],qc));e=c.dim1D;C.uniformMatrix4fv(S.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(fb[0]=e[0],fb[1]=e[1],fb[2]=e[2],fb[3]=e[3],fb[4]=e[4],fb[5]=e[5],fb[6]=e[6],fb[7]=e[7],fb[8]=e[8],fb[9]=e[9],fb[10]=e[10],fb[11]=e[11],fb[12]=e[12],fb[13]=e[13],fb[14]=e[14],fb[15]=e[15],fb));e=c.loA;C.uniformMatrix4fv(yb.location,!1,Array.isArray(e)||e instanceof
Float32Array?e:(hd[0]=e[0],hd[1]=e[1],hd[2]=e[2],hd[3]=e[3],hd[4]=e[4],hd[5]=e[5],hd[6]=e[6],hd[7]=e[7],hd[8]=e[8],hd[9]=e[9],hd[10]=e[10],hd[11]=e[11],hd[12]=e[12],hd[13]=e[13],hd[14]=e[14],hd[15]=e[15],hd));e=c.hiA;C.uniformMatrix4fv(ma.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Hb[0]=e[0],Hb[1]=e[1],Hb[2]=e[2],Hb[3]=e[3],Hb[4]=e[4],Hb[5]=e[5],Hb[6]=e[6],Hb[7]=e[7],Hb[8]=e[8],Hb[9]=e[9],Hb[10]=e[10],Hb[11]=e[11],Hb[12]=e[12],Hb[13]=e[13],Hb[14]=e[14],Hb[15]=e[15],Hb));e=c.loB;C.uniformMatrix4fv(Ka.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(pc[0]=e[0],pc[1]=e[1],pc[2]=e[2],pc[3]=e[3],pc[4]=e[4],pc[5]=e[5],pc[6]=e[6],pc[7]=e[7],pc[8]=e[8],pc[9]=e[9],pc[10]=e[10],pc[11]=e[11],pc[12]=e[12],pc[13]=e[13],pc[14]=e[14],pc[15]=e[15],pc));e=c.hiB;C.uniformMatrix4fv(da.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Wa[0]=e[0],Wa[1]=e[1],Wa[2]=e[2],Wa[3]=e[3],Wa[4]=e[4],Wa[5]=e[5],Wa[6]=e[6],Wa[7]=e[7],Wa[8]=e[8],Wa[9]=e[9],Wa[10]=e[10],Wa[11]=e[11],Wa[12]=e[12],Wa[13]=e[13],Wa[14]=
e[14],Wa[15]=e[15],Wa));e=c.loC;C.uniformMatrix4fv(Y.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Rc[0]=e[0],Rc[1]=e[1],Rc[2]=e[2],Rc[3]=e[3],Rc[4]=e[4],Rc[5]=e[5],Rc[6]=e[6],Rc[7]=e[7],Rc[8]=e[8],Rc[9]=e[9],Rc[10]=e[10],Rc[11]=e[11],Rc[12]=e[12],Rc[13]=e[13],Rc[14]=e[14],Rc[15]=e[15],Rc));e=c.hiC;C.uniformMatrix4fv(Ba.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(ac[0]=e[0],ac[1]=e[1],ac[2]=e[2],ac[3]=e[3],ac[4]=e[4],ac[5]=e[5],ac[6]=e[6],ac[7]=e[7],ac[8]=e[8],ac[9]=e[9],
ac[10]=e[10],ac[11]=e[11],ac[12]=e[12],ac[13]=e[13],ac[14]=e[14],ac[15]=e[15],ac));e=c.loD;C.uniformMatrix4fv(mb.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(mc[0]=e[0],mc[1]=e[1],mc[2]=e[2],mc[3]=e[3],mc[4]=e[4],mc[5]=e[5],mc[6]=e[6],mc[7]=e[7],mc[8]=e[8],mc[9]=e[9],mc[10]=e[10],mc[11]=e[11],mc[12]=e[12],mc[13]=e[13],mc[14]=e[14],mc[15]=e[15],mc));e=c.hiD;C.uniformMatrix4fv(Ea.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Id[0]=e[0],Id[1]=e[1],Id[2]=e[2],Id[3]=e[3],Id[4]=
e[4],Id[5]=e[5],Id[6]=e[6],Id[7]=e[7],Id[8]=e[8],Id[9]=e[9],Id[10]=e[10],Id[11]=e[11],Id[12]=e[12],Id[13]=e[13],Id[14]=e[14],Id[15]=e[15],Id));e=c.resolution;C.uniform2f(X.location,e[0],e[1]);e=c.viewBoxPos;C.uniform2f(fa.location,e[0],e[1]);e=c.viewBoxSize;C.uniform2f(ra.location,e[0],e[1]);C.uniform1f(ga.location,c.maskHeight);C.uniform1f(B.location,c.drwLayer);e=c.contextColor;C.uniform4f(V.location,e[0],e[1],e[2],e[3]);(e=c.maskTexture)&&"framebuffer"===e._reglType&&(e=e.color[0]);e=e._texture;
C.uniform1i(qa.location,e.bind());C.uniform1i(sa.location,w.bind());(u=xa.elements)?C.bindBuffer(34963,u.buffer.buffer):Fb.currentVAO&&(u=ya.getElements(Fb.currentVAO.elements))&&C.bindBuffer(34963,u.buffer.buffer);Ia=c.offset;if(c=c.count)u?C.drawElements(1,c,u.type,Ia<<(u.type-5121>>1)):C.drawArrays(1,Ia,c),ba.dirty=!0,Fb.setVAO(null),F.viewportWidth=a,F.viewportHeight=r,ba.profile=x,e.unbind(),w.unbind()},scope:function(c,a,d){var w,z,C,B,E,N,M,L,Z,O,P,Q,T,S,Y,X,fa,ha,V,ia,da,ga,ma,ya,sa,Ca,sc,
fb,Ja,ra,Wa,ua,Fa,ea,Yb,zd,Hb,va,Nc,Da,Fb,Xa,Wd,ac,Cc,Ic,na,cc,Ta,Gc,Ga,qc,Qa,Aa,mc,Yc,td,qa,Ib,bb,Uc,pc,Ad,Vd,ad,Rc,hd,Fc,Ub,Ha,sb,lb,wb,qd,sd,ae,Pc,Wb,Dd,zc,ud,Dc,Od,Ba,rd,Kb,Db,Ye,he,yd,Me,Be,Ea,Id,$b,Na,Qe,$a,ic,Gd,ue,mb,Cd,we,Bc,Gb,ve,Ka,Qc,yb,Cb,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,
dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;nd.height=c.viewportHeight;nd.width=c.viewportWidth;nd.x=c.viewportX;nd.y=c.viewportY;w=nd.x|0;z=nd.y|0;C="width"in nd?nd.width|0:F.framebufferWidth-w;B="height"in nd?nd.height|0:F.framebufferHeight-z;E=F.viewportWidth;F.viewportWidth=
C;N=F.viewportHeight;F.viewportHeight=B;M=Yd[0];Yd[0]=w;L=Yd[1];Yd[1]=z;Z=Yd[2];Yd[2]=C;O=Yd[3];Yd[3]=B;P=xb[0];xb[0]=0;Q=xb[1];xb[1]=0;T=xb[2];xb[2]=0;S=xb[3];xb[3]=0;Y=oc.blend_enable;oc.blend_enable=!1;X=xd[0];xd[0]=32774;fa=xd[1];xd[1]=32774;ha=ee[0];ee[0]=770;V=ee[1];ee[1]=771;ia=ee[2];ee[2]=1;da=ee[3];ee[3]=1;ga=oc.cull_enable;oc.cull_enable=!0;ma=oc.cull_face;oc.cull_face=1029;ya=oc.depth_enable;oc.depth_enable=!0;sa=oc.depth_func;oc.depth_func=513;Ca=oc.depth_mask;oc.depth_mask=!0;sc=ge[0];
ge[0]=0;fb=ge[1];ge[1]=1;Ja=oc.dither;oc.dither=!1;ra=oc.lineWidth;oc.lineWidth=2;vd.height=c.scissorHeight;vd.width=c.scissorWidth;vd.x=c.scissorX;vd.y=c.scissorY;Wa=vd.x|0;ua=vd.y|0;Fa="width"in vd?vd.width|0:F.framebufferWidth-Wa;ea="height"in vd?vd.height|0:F.framebufferHeight-ua;Yb=xe[0];xe[0]=Wa;zd=xe[1];xe[1]=ua;Hb=xe[2];xe[2]=Fa;va=xe[3];xe[3]=ea;Nc=oc.scissor_enable;oc.scissor_enable=!0;Da=ba.profile;ba.profile=!1;Fb=c.offset;Xa=xa.offset;xa.offset=Fb;Wd=c.count;ac=xa.count;xa.count=Wd;Cc=
xa.primitive;xa.primitive=1;Ic=c.contextColor;na=pa[24];pa[24]=Ic;cc=c.dim0A;Ta=pa[3];pa[3]=cc;Gc=c.dim0B;Ga=pa[5];pa[5]=Gc;qc=c.dim0C;Qa=pa[7];pa[7]=qc;Aa=c.dim0D;mc=pa[9];pa[9]=Aa;Yc=c.dim1A;td=pa[4];pa[4]=Yc;qa=c.dim1B;Ib=pa[6];pa[6]=qa;bb=c.dim1C;Uc=pa[8];pa[8]=bb;pc=c.dim1D;Ad=pa[10];pa[10]=pc;Vd=c.drwLayer;ad=pa[23];pa[23]=Vd;Rc=c.hiA;hd=pa[12];pa[12]=Rc;Fc=c.hiB;Ub=pa[14];pa[14]=Fc;Ha=c.hiC;sb=pa[16];pa[16]=Ha;lb=c.hiD;wb=pa[18];pa[18]=lb;qd=c.loA;sd=pa[11];pa[11]=qd;ae=c.loB;Pc=pa[13];pa[13]=
ae;Wb=c.loC;Dd=pa[15];pa[15]=Wb;zc=c.loD;ud=pa[17];pa[17]=zc;Dc=c.maskHeight;Od=pa[22];pa[22]=Dc;Ba=c.maskTexture;rd=pa[25];pa[25]=Ba;Kb=pa[26];pa[26]=e;Db=c.resolution;Ye=pa[19];pa[19]=Db;he=c.viewBoxPos;yd=pa[20];pa[20]=he;Me=c.viewBoxSize;Be=pa[21];pa[21]=Me;Ea=x.buffer;x.buffer=G;Id=x.divisor;x.divisor=0;$b=x.normalized;x.normalized=!1;Na=x.offset;x.offset=0;Qe=x.size;x.size=0;$a=x.state;x.state=1;ic=x.stride;x.stride=0;Gd=x.type;x.type=G.dtype;ue=x.w;x.w=0;mb=x.x;x.x=0;Cd=x.y;x.y=0;we=x.z;x.z=
0;Bc=u.buffer;u.buffer=D;Gb=u.divisor;u.divisor=0;ve=u.normalized;u.normalized=!1;Ka=u.offset;u.offset=0;Qc=u.size;u.size=0;yb=u.state;u.state=1;Cb=u.stride;u.stride=0;te=u.type;u.type=D.dtype;ze=u.w;u.w=0;Ae=u.x;u.x=0;ne=u.y;u.y=0;fe=u.z;u.z=0;de=oa.buffer;oa.buffer=m;pe=oa.divisor;oa.divisor=0;be=oa.normalized;oa.normalized=!1;ie=oa.offset;oa.offset=0;wc=oa.size;oa.size=0;Vc=oa.state;oa.state=1;qe=oa.stride;oa.stride=0;le=oa.type;oa.type=m.dtype;Ld=oa.w;oa.w=0;Pd=oa.x;oa.x=0;Qd=oa.y;oa.y=0;Rd=oa.z;
oa.z=0;je=r.buffer;r.buffer=k;vf=r.divisor;r.divisor=0;Ce=r.normalized;r.normalized=!1;oe=r.offset;r.offset=0;Re=r.size;r.size=0;Se=r.state;r.state=1;Ne=r.stride;r.stride=0;re=r.type;r.type=k.dtype;Fe=r.w;r.w=0;He=r.x;r.x=0;Ie=r.y;r.y=0;Je=r.z;r.z=0;Ge=J.buffer;J.buffer=l;Nd=J.divisor;J.divisor=0;Ud=J.normalized;J.normalized=!1;$d=J.offset;J.offset=0;ce=J.size;J.size=0;Ke=J.state;J.state=1;Bd=J.stride;J.stride=0;Sd=J.type;J.type=l.dtype;De=J.w;J.w=0;Le=J.x;J.x=0;cf=J.y;J.y=0;af=J.z;J.z=0;Te=R.buffer;
R.buffer=g;Oe=R.divisor;R.divisor=0;$e=R.normalized;R.normalized=!1;Xe=R.offset;R.offset=0;Ue=R.size;R.size=0;Ve=R.state;R.state=1;Td=R.stride;R.stride=0;Xd=R.type;R.type=g.dtype;We=R.w;R.w=0;jf=R.x;R.x=0;nf=R.y;R.y=0;ff=R.z;R.z=0;kf=A.buffer;A.buffer=b;lf=A.divisor;A.divisor=0;mf=A.normalized;A.normalized=!1;rf=A.offset;A.offset=0;of=A.size;A.size=0;sf=A.state;A.state=1;Cf=A.stride;A.stride=0;Df=A.type;A.type=b.dtype;Pe=A.w;A.w=0;Ee=A.x;A.x=0;pf=A.y;A.y=0;qf=A.z;A.z=0;Ef=aa.buffer;aa.buffer=p;Hf=
aa.divisor;aa.divisor=0;Bf=aa.normalized;aa.normalized=!1;Ff=aa.offset;aa.offset=0;Gf=aa.size;aa.size=0;xf=aa.state;aa.state=1;yf=aa.stride;aa.stride=0;wf=aa.type;aa.type=p.dtype;zf=aa.w;aa.w=0;Af=aa.x;aa.x=0;Jf=aa.y;aa.y=0;Kf=aa.z;aa.z=0;Lf=I.buffer;I.buffer=H;Mf=I.divisor;I.divisor=0;tf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;If=I.size;I.size=0;uf=I.state;I.state=1;dg=I.stride;I.stride=0;Sf=I.type;I.type=H.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;gf=I.y;I.y=0;df=I.z;I.z=0;Nf=U.buffer;U.buffer=
y;Of=U.divisor;U.divisor=0;eg=U.normalized;U.normalized=!1;fg=U.offset;U.offset=0;gg=U.size;U.size=0;hg=U.state;U.state=1;ig=U.stride;U.stride=0;Wf=U.type;U.type=y.dtype;Uf=U.w;U.w=0;Xf=U.x;U.x=0;Yf=U.y;U.y=0;Zf=U.z;U.z=0;jg=K.buffer;K.buffer=h;rg=K.divisor;K.divisor=0;sg=K.normalized;K.normalized=!1;tg=K.offset;K.offset=0;ug=K.size;K.size=0;vg=K.state;K.state=1;wg=K.stride;K.stride=0;xg=K.type;K.type=h.dtype;yg=K.w;K.w=0;zg=K.x;K.x=0;Ag=K.y;K.y=0;Bg=K.z;K.z=0;hf=ja.buffer;ja.buffer=f;ef=ja.divisor;
ja.divisor=0;Pf=ja.normalized;ja.normalized=!1;Qf=ja.offset;ja.offset=0;kg=ja.size;ja.size=0;lg=ja.state;ja.state=1;mg=ja.stride;ja.stride=0;ng=ja.type;ja.type=f.dtype;og=ja.w;ja.w=0;$f=ja.x;ja.x=0;Vf=ja.y;ja.y=0;ag=ja.z;ja.z=0;bg=W.buffer;W.buffer=n;cg=W.divisor;W.divisor=0;pg=W.normalized;W.normalized=!1;Cg=W.offset;W.offset=0;Dg=W.size;W.size=0;Eg=W.state;W.state=1;Fg=W.stride;W.stride=0;Gg=W.type;W.type=n.dtype;Hg=W.w;W.w=0;Ig=W.x;W.x=0;Jg=W.y;W.y=0;Kg=W.z;W.z=0;Lg=ka.buffer;ka.buffer=q;Mg=ka.divisor;
ka.divisor=0;Ng=ka.normalized;ka.normalized=!1;Og=ka.offset;ka.offset=0;Pg=ka.size;ka.size=0;Qg=ka.state;ka.state=1;Rg=ka.stride;ka.stride=0;Sg=ka.type;ka.type=q.dtype;Tg=ka.w;ka.w=0;Ug=ka.x;ka.x=0;Vg=ka.y;ka.y=0;Wg=ka.z;ka.z=0;Xg=la.buffer;la.buffer=t;Yg=la.divisor;la.divisor=0;Zg=la.normalized;la.normalized=!1;$g=la.offset;la.offset=0;ah=la.size;la.size=0;bh=la.state;la.state=1;ch=la.stride;la.stride=0;dh=la.type;la.type=t.dtype;eh=la.w;la.w=0;fh=la.x;la.x=0;gh=la.y;la.y=0;hh=la.z;la.z=0;ih=Sa.buffer;
Sa.buffer=v;jh=Sa.divisor;Sa.divisor=0;kh=Sa.normalized;Sa.normalized=!1;lh=Sa.offset;Sa.offset=0;mh=Sa.size;Sa.size=0;nh=Sa.state;Sa.state=1;oh=Sa.stride;Sa.stride=0;ph=Sa.type;Sa.type=v.dtype;qh=Sa.w;Sa.w=0;rh=Sa.x;Sa.x=0;sh=Sa.y;Sa.y=0;th=Sa.z;Sa.z=0;uh=Eb.vert;Eb.vert=2;vh=Eb.frag;Eb.frag=1;ba.dirty=!0;a(F,c,d);F.viewportWidth=E;F.viewportHeight=N;Yd[0]=M;Yd[1]=L;Yd[2]=Z;Yd[3]=O;xb[0]=P;xb[1]=Q;xb[2]=T;xb[3]=S;oc.blend_enable=Y;xd[0]=X;xd[1]=fa;ee[0]=ha;ee[1]=V;ee[2]=ia;ee[3]=da;oc.cull_enable=
ga;oc.cull_face=ma;oc.depth_enable=ya;oc.depth_func=sa;oc.depth_mask=Ca;ge[0]=sc;ge[1]=fb;oc.dither=Ja;oc.lineWidth=ra;xe[0]=Yb;xe[1]=zd;xe[2]=Hb;xe[3]=va;oc.scissor_enable=Nc;ba.profile=Da;xa.offset=Xa;xa.count=ac;xa.primitive=Cc;pa[24]=na;pa[3]=Ta;pa[5]=Ga;pa[7]=Qa;pa[9]=mc;pa[4]=td;pa[6]=Ib;pa[8]=Uc;pa[10]=Ad;pa[23]=ad;pa[12]=hd;pa[14]=Ub;pa[16]=sb;pa[18]=wb;pa[11]=sd;pa[13]=Pc;pa[15]=Dd;pa[17]=ud;pa[22]=Od;pa[25]=rd;pa[26]=Kb;pa[19]=Ye;pa[20]=yd;pa[21]=Be;x.buffer=Ea;x.divisor=Id;x.normalized=
$b;x.offset=Na;x.size=Qe;x.state=$a;x.stride=ic;x.type=Gd;x.w=ue;x.x=mb;x.y=Cd;x.z=we;u.buffer=Bc;u.divisor=Gb;u.normalized=ve;u.offset=Ka;u.size=Qc;u.state=yb;u.stride=Cb;u.type=te;u.w=ze;u.x=Ae;u.y=ne;u.z=fe;oa.buffer=de;oa.divisor=pe;oa.normalized=be;oa.offset=ie;oa.size=wc;oa.state=Vc;oa.stride=qe;oa.type=le;oa.w=Ld;oa.x=Pd;oa.y=Qd;oa.z=Rd;r.buffer=je;r.divisor=vf;r.normalized=Ce;r.offset=oe;r.size=Re;r.state=Se;r.stride=Ne;r.type=re;r.w=Fe;r.x=He;r.y=Ie;r.z=Je;J.buffer=Ge;J.divisor=Nd;J.normalized=
Ud;J.offset=$d;J.size=ce;J.state=Ke;J.stride=Bd;J.type=Sd;J.w=De;J.x=Le;J.y=cf;J.z=af;R.buffer=Te;R.divisor=Oe;R.normalized=$e;R.offset=Xe;R.size=Ue;R.state=Ve;R.stride=Td;R.type=Xd;R.w=We;R.x=jf;R.y=nf;R.z=ff;A.buffer=kf;A.divisor=lf;A.normalized=mf;A.offset=rf;A.size=of;A.state=sf;A.stride=Cf;A.type=Df;A.w=Pe;A.x=Ee;A.y=pf;A.z=qf;aa.buffer=Ef;aa.divisor=Hf;aa.normalized=Bf;aa.offset=Ff;aa.size=Gf;aa.state=xf;aa.stride=yf;aa.type=wf;aa.w=zf;aa.x=Af;aa.y=Jf;aa.z=Kf;I.buffer=Lf;I.divisor=Mf;I.normalized=
tf;I.offset=Rf;I.size=If;I.state=uf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=gf;I.z=df;U.buffer=Nf;U.divisor=Of;U.normalized=eg;U.offset=fg;U.size=gg;U.state=hg;U.stride=ig;U.type=Wf;U.w=Uf;U.x=Xf;U.y=Yf;U.z=Zf;K.buffer=jg;K.divisor=rg;K.normalized=sg;K.offset=tg;K.size=ug;K.state=vg;K.stride=wg;K.type=xg;K.w=yg;K.x=zg;K.y=Ag;K.z=Bg;ja.buffer=hf;ja.divisor=ef;ja.normalized=Pf;ja.offset=Qf;ja.size=kg;ja.state=lg;ja.stride=mg;ja.type=ng;ja.w=og;ja.x=$f;ja.y=Vf;ja.z=ag;W.buffer=bg;W.divisor=cg;W.normalized=
pg;W.offset=Cg;W.size=Dg;W.state=Eg;W.stride=Fg;W.type=Gg;W.w=Hg;W.x=Ig;W.y=Jg;W.z=Kg;ka.buffer=Lg;ka.divisor=Mg;ka.normalized=Ng;ka.offset=Og;ka.size=Pg;ka.state=Qg;ka.stride=Rg;ka.type=Sg;ka.w=Tg;ka.x=Ug;ka.y=Vg;ka.z=Wg;la.buffer=Xg;la.divisor=Yg;la.normalized=Zg;la.offset=$g;la.size=ah;la.state=bh;la.stride=ch;la.type=dh;la.w=eh;la.x=fh;la.y=gh;la.z=hh;Sa.buffer=ih;Sa.divisor=jh;Sa.normalized=kh;Sa.offset=lh;Sa.size=mh;Sa.state=nh;Sa.stride=oh;Sa.type=ph;Sa.w=qh;Sa.x=rh;Sa.y=sh;Sa.z=th;Eb.vert=
uh;Eb.frag=vh;ba.dirty=!0}}},$1:function(a,c){var d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,Ia,x,u,r,ca,J,R,A,aa,I,U,K;d=a.attributes;e=a.current;m=a.framebuffer;k=a.gl;l=a.next;g=a.vao;b=l.blend_color;p=e.blend_color;H=l.blend_equation;y=e.blend_equation;h=l.blend_func;f=e.blend_func;n=l.colorMask;q=e.colorMask;t=l.depth_range;v=e.depth_range;G=l.polygonOffset_offset;w=e.polygonOffset_offset;Ia=l.sample_coverage;x=e.sample_coverage;u=l.scissor_box;r=e.scissor_box;ca=l.stencil_func;J=e.stencil_func;R=l.stencil_opBack;
A=e.stencil_opBack;aa=l.stencil_opFront;I=e.stencil_opFront;U=l.viewport;K=e.viewport;return{poll:function(){var c,a,g,d,z,Cb,ea,Na,V,P,O,T,na,Q,Gb,$a,S,B,ma,da,Ba,Ea;e.dirty=!1;a=l.blend_enable;g=l.cull_enable;d=l.depth_enable;z=l.dither;Cb=l.polygonOffset_enable;ea=l.sample_alpha;Na=l.sample_enable;V=l.scissor_enable;P=l.stencil_enable;O=l.cull_face;T=e.cull_face;na=l.depth_func;Q=e.depth_func;Gb=l.depth_mask;$a=e.depth_mask;S=l.frontFace;B=e.frontFace;ma=l.lineWidth;da=e.lineWidth;Ba=l.stencil_mask;
Ea=e.stencil_mask;c=m.next;c!==m.cur&&(c?k.bindFramebuffer(36160,c.framebuffer):k.bindFramebuffer(36160,null),m.cur=c);a!==e.blend_enable&&(a?k.enable(3042):k.disable(3042),e.blend_enable=a);g!==e.cull_enable&&(g?k.enable(2884):k.disable(2884),e.cull_enable=g);d!==e.depth_enable&&(d?k.enable(2929):k.disable(2929),e.depth_enable=d);z!==e.dither&&(z?k.enable(3024):k.disable(3024),e.dither=z);Cb!==e.polygonOffset_enable&&(Cb?k.enable(32823):k.disable(32823),e.polygonOffset_enable=Cb);ea!==e.sample_alpha&&
(ea?k.enable(32926):k.disable(32926),e.sample_alpha=ea);Na!==e.sample_enable&&(Na?k.enable(32928):k.disable(32928),e.sample_enable=Na);V!==e.scissor_enable&&(V?k.enable(3089):k.disable(3089),e.scissor_enable=V);P!==e.stencil_enable&&(P?k.enable(2960):k.disable(2960),e.stencil_enable=P);if(b[0]!==p[0]||b[1]!==p[1]||b[2]!==p[2]||b[3]!==p[3])k.blendColor(b[0],b[1],b[2],b[3]),p[0]=b[0],p[1]=b[1],p[2]=b[2],p[3]=b[3];if(H[0]!==y[0]||H[1]!==y[1])k.blendEquationSeparate(H[0],H[1]),y[0]=H[0],y[1]=H[1];if(h[0]!==
f[0]||h[1]!==f[1]||h[2]!==f[2]||h[3]!==f[3])k.blendFuncSeparate(h[0],h[1],h[2],h[3]),f[0]=h[0],f[1]=h[1],f[2]=h[2],f[3]=h[3];if(n[0]!==q[0]||n[1]!==q[1]||n[2]!==q[2]||n[3]!==q[3])k.colorMask(n[0],n[1],n[2],n[3]),q[0]=n[0],q[1]=n[1],q[2]=n[2],q[3]=n[3];O!==T&&(k.cullFace(O),e.cull_face=O);na!==Q&&(k.depthFunc(na),e.depth_func=na);Gb!==$a&&(k.depthMask(Gb),e.depth_mask=Gb);if(t[0]!==v[0]||t[1]!==v[1])k.depthRange(t[0],t[1]),v[0]=t[0],v[1]=t[1];S!==B&&(k.frontFace(S),e.frontFace=S);ma!==da&&(k.lineWidth(ma),
e.lineWidth=ma);if(G[0]!==w[0]||G[1]!==w[1])k.polygonOffset(G[0],G[1]),w[0]=G[0],w[1]=G[1];if(Ia[0]!==x[0]||Ia[1]!==x[1])k.sampleCoverage(Ia[0],Ia[1]),x[0]=Ia[0],x[1]=Ia[1];if(u[0]!==r[0]||u[1]!==r[1]||u[2]!==r[2]||u[3]!==r[3])k.scissor(u[0],u[1],u[2],u[3]),r[0]=u[0],r[1]=u[1],r[2]=u[2],r[3]=u[3];if(ca[0]!==J[0]||ca[1]!==J[1]||ca[2]!==J[2])k.stencilFunc(ca[0],ca[1],ca[2]),J[0]=ca[0],J[1]=ca[1],J[2]=ca[2];Ba!==Ea&&(k.stencilMask(Ba),e.stencil_mask=Ba);if(R[0]!==A[0]||R[1]!==A[1]||R[2]!==A[2]||R[3]!==
A[3])k.stencilOpSeparate(R[0],R[1],R[2],R[3]),A[0]=R[0],A[1]=R[1],A[2]=R[2],A[3]=R[3];if(aa[0]!==I[0]||aa[1]!==I[1]||aa[2]!==I[2]||aa[3]!==I[3])k.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]),I[0]=aa[0],I[1]=aa[1],I[2]=aa[2],I[3]=aa[3];if(U[0]!==K[0]||U[1]!==K[1]||U[2]!==K[2]||U[3]!==K[3])k.viewport(U[0],U[1],U[2],U[3]),K[0]=U[0],K[1]=U[1],K[2]=U[2],K[3]=U[3]},refresh:function(){var a,W,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,Q,Gb,$a;e.dirty=!1;W=l.blend_enable;ka=l.cull_enable;la=l.depth_enable;Sa=l.dither;Cb=
l.polygonOffset_enable;ea=l.sample_alpha;Na=l.sample_enable;V=l.scissor_enable;P=l.stencil_enable;O=l.cull_face;T=l.depth_func;na=l.depth_mask;Q=l.frontFace;Gb=l.lineWidth;$a=l.stencil_mask;(a=m.next)?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null);m.cur=a;a=d[0];a.buffer?(k.enableVertexAttribArray(0),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(0),k.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=
null);c.vertexAttribDivisorANGLE(0,a.divisor);a=d[1];a.buffer?(k.enableVertexAttribArray(1),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(1),k.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(1,a.divisor);a=d[2];a.buffer?(k.enableVertexAttribArray(2),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(2),
k.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(2,a.divisor);a=d[3];a.buffer?(k.enableVertexAttribArray(3),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(3),k.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(3,a.divisor);a=d[4];a.buffer?(k.enableVertexAttribArray(4),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,
a.offset)):(k.disableVertexAttribArray(4),k.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(4,a.divisor);a=d[5];a.buffer?(k.enableVertexAttribArray(5),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(5),k.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(5,a.divisor);a=d[6];a.buffer?(k.enableVertexAttribArray(6),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(6,
a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(6),k.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(6,a.divisor);a=d[7];a.buffer?(k.enableVertexAttribArray(7),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(7),k.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(7,a.divisor);a=d[8];a.buffer?(k.enableVertexAttribArray(8),k.bindBuffer(34962,
a.buffer.buffer),k.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(8),k.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(8,a.divisor);a=d[9];a.buffer?(k.enableVertexAttribArray(9),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(9),k.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(9,a.divisor);a=d[10];a.buffer?
(k.enableVertexAttribArray(10),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(10),k.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(10,a.divisor);a=d[11];a.buffer?(k.enableVertexAttribArray(11),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(11),k.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);
c.vertexAttribDivisorANGLE(11,a.divisor);a=d[12];a.buffer?(k.enableVertexAttribArray(12),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(12),k.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(12,a.divisor);a=d[13];a.buffer?(k.enableVertexAttribArray(13),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(13),
k.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(13,a.divisor);a=d[14];a.buffer?(k.enableVertexAttribArray(14),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(k.disableVertexAttribArray(14),k.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(14,a.divisor);a=d[15];a.buffer?(k.enableVertexAttribArray(15),k.bindBuffer(34962,a.buffer.buffer),k.vertexAttribPointer(15,a.size,a.type,a.normalized,
a.stride,a.offset)):(k.disableVertexAttribArray(15),k.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.vertexAttribDivisorANGLE(15,a.divisor);g.currentVAO=null;g.setVAO(g.targetVAO);W?k.enable(3042):k.disable(3042);e.blend_enable=W;ka?k.enable(2884):k.disable(2884);e.cull_enable=ka;la?k.enable(2929):k.disable(2929);e.depth_enable=la;Sa?k.enable(3024):k.disable(3024);e.dither=Sa;Cb?k.enable(32823):k.disable(32823);e.polygonOffset_enable=Cb;ea?k.enable(32926):k.disable(32926);e.sample_alpha=ea;Na?
k.enable(32928):k.disable(32928);e.sample_enable=Na;V?k.enable(3089):k.disable(3089);e.scissor_enable=V;P?k.enable(2960):k.disable(2960);e.stencil_enable=P;k.blendColor(b[0],b[1],b[2],b[3]);p[0]=b[0];p[1]=b[1];p[2]=b[2];p[3]=b[3];k.blendEquationSeparate(H[0],H[1]);y[0]=H[0];y[1]=H[1];k.blendFuncSeparate(h[0],h[1],h[2],h[3]);f[0]=h[0];f[1]=h[1];f[2]=h[2];f[3]=h[3];k.colorMask(n[0],n[1],n[2],n[3]);q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];k.cullFace(O);e.cull_face=O;k.depthFunc(T);e.depth_func=T;k.depthMask(na);
e.depth_mask=na;k.depthRange(t[0],t[1]);v[0]=t[0];v[1]=t[1];k.frontFace(Q);e.frontFace=Q;k.lineWidth(Gb);e.lineWidth=Gb;k.polygonOffset(G[0],G[1]);w[0]=G[0];w[1]=G[1];k.sampleCoverage(Ia[0],Ia[1]);x[0]=Ia[0];x[1]=Ia[1];k.scissor(u[0],u[1],u[2],u[3]);r[0]=u[0];r[1]=u[1];r[2]=u[2];r[3]=u[3];k.stencilFunc(ca[0],ca[1],ca[2]);J[0]=ca[0];J[1]=ca[1];J[2]=ca[2];k.stencilMask($a);e.stencil_mask=$a;k.stencilOpSeparate(R[0],R[1],R[2],R[3]);A[0]=R[0];A[1]=R[1];A[2]=R[2];A[3]=R[3];k.stencilOpSeparate(aa[0],aa[1],
aa[2],aa[3]);I[0]=aa[0];I[1]=aa[1];I[2]=aa[2];I[3]=aa[3];k.viewport(U[0],U[1],U[2],U[3]);K[0]=U[0];K[1]=U[1];K[2]=U[2];K[3]=U[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,c,d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,Ia,x,u,r,ca,J,R,A,aa,I,U,K,ja,W,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,Q,Gb,$a){var S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa,$b,sc,ic,td,zc,Z,N,ha,Fa,sb,Pc,Qc,L,E,ia,sa,X,fa,ra,M,F,ba,xa,ya,
Ja,C,oc,Eb,pa,Fb,xb;S=a.attributes;B=a.buffer;ma=a.context;da=a.current;Ba=a.draw;Ea=a.elements;yb=a.extensions;Ka=a.framebuffer;Y=a.gl;mb=a.isBufferArgs;ga=a.next;qa=a.shader;$b=a.uniforms;sc=a.vao;ic=ga.blend_color;td=da.blend_color;zc=ga.blend_equation;Z=da.blend_equation;N=ga.blend_func;ha=da.blend_func;Fa=ga.colorMask;sb=da.colorMask;Pc=ga.depth_range;Qc=da.depth_range;L=ga.polygonOffset_offset;E=da.polygonOffset_offset;ia=ga.sample_coverage;sa=da.sample_coverage;X=ga.scissor_box;fa=da.scissor_box;
ra=ga.stencil_func;M=da.stencil_func;F=ga.stencil_opBack;ba=da.stencil_opBack;xa=ga.stencil_opFront;ya=da.stencil_opFront;Ja=ga.viewport;C=da.viewport;oc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Eb={};Eb.buffer=d;Eb.divisor=1;pa={};pa.buffer=e;pa.divisor=1;Fb={};Fb.buffer=m;Fb.divisor=1;xb={};xb.buffer=k;xb.divisor=1;return{batch:function(b,a){var n,g,l,q,p,t;n=Ka.next;n!==Ka.cur&&(n?Y.bindFramebuffer(36160,n.framebuffer):Y.bindFramebuffer(36160,
null),Ka.cur=n);if(da.dirty){var d,e,m,v,k,w,u,H,G,D,z,x,Ia,r,oa,N,J,R,ca,X,Ja,Nc,Ic,qc,fb,qa,Hb,pc,Wa,Rc,ac,mc,zc;d=ga.dither;d!==da.dither&&(d?Y.enable(3024):Y.disable(3024),da.dither=d);e=ga.depth_func;e!==da.depth_func&&(Y.depthFunc(e),da.depth_func=e);m=Pc[0];v=Pc[1];if(m!==Qc[0]||v!==Qc[1])Y.depthRange(m,v),Qc[0]=m,Qc[1]=v;k=ga.depth_mask;k!==da.depth_mask&&(Y.depthMask(k),da.depth_mask=k);w=Fa[0];u=Fa[1];H=Fa[2];G=Fa[3];if(w!==sb[0]||u!==sb[1]||H!==sb[2]||G!==sb[3])Y.colorMask(w,u,H,G),sb[0]=
w,sb[1]=u,sb[2]=H,sb[3]=G;D=ga.cull_enable;D!==da.cull_enable&&(D?Y.enable(2884):Y.disable(2884),da.cull_enable=D);z=ga.cull_face;z!==da.cull_face&&(Y.cullFace(z),da.cull_face=z);x=ga.frontFace;x!==da.frontFace&&(Y.frontFace(x),da.frontFace=x);Ia=ga.lineWidth;Ia!==da.lineWidth&&(Y.lineWidth(Ia),da.lineWidth=Ia);r=ga.polygonOffset_enable;r!==da.polygonOffset_enable&&(r?Y.enable(32823):Y.disable(32823),da.polygonOffset_enable=r);oa=L[0];N=L[1];if(oa!==E[0]||N!==E[1])Y.polygonOffset(oa,N),E[0]=oa,E[1]=
N;J=ga.sample_alpha;J!==da.sample_alpha&&(J?Y.enable(32926):Y.disable(32926),da.sample_alpha=J);R=ga.sample_enable;R!==da.sample_enable&&(R?Y.enable(32928):Y.disable(32928),da.sample_enable=R);ca=ia[0];X=ia[1];if(ca!==sa[0]||X!==sa[1])Y.sampleCoverage(ca,X),sa[0]=ca,sa[1]=X;Ja=ga.stencil_enable;Ja!==da.stencil_enable&&(Ja?Y.enable(2960):Y.disable(2960),da.stencil_enable=Ja);Nc=ga.stencil_mask;Nc!==da.stencil_mask&&(Y.stencilMask(Nc),da.stencil_mask=Nc);Ic=ra[0];qc=ra[1];fb=ra[2];if(Ic!==M[0]||qc!==
M[1]||fb!==M[2])Y.stencilFunc(Ic,qc,fb),M[0]=Ic,M[1]=qc,M[2]=fb;qa=xa[0];Hb=xa[1];pc=xa[2];Wa=xa[3];if(qa!==ya[0]||Hb!==ya[1]||pc!==ya[2]||Wa!==ya[3])Y.stencilOpSeparate(qa,Hb,pc,Wa),ya[0]=qa,ya[1]=Hb,ya[2]=pc,ya[3]=Wa;Rc=F[0];ac=F[1];mc=F[2];zc=F[3];if(Rc!==ba[0]||ac!==ba[1]||mc!==ba[2]||zc!==ba[3])Y.stencilOpSeparate(Rc,ac,mc,zc),ba[0]=Rc,ba[1]=ac,ba[2]=mc,ba[3]=zc}Y.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;Y.enable(3042);da.blend_enable=!0;Y.blendEquationSeparate(32774,32774);Z[0]=32774;
Z[1]=32774;Y.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;Y.disable(2929);da.depth_enable=!1;Y.enable(3089);da.scissor_enable=!0;if(g=da.profile)l=performance.now(),c.count+=a;Y.useProgram(A.program);q=yb.angle_instanced_arrays;var rd,Fc,cc,Cc,Yc,Yb,Gc,Xa;sc.setVAO(null);rd=Sa.location;Fc=S[rd];Fc.buffer||Y.enableVertexAttribArray(rd);if(5126!==Fc.type||2!==Fc.size||Fc.buffer!==y||!1!==Fc.normalized||0!==Fc.offset||24!==Fc.stride)Y.bindBuffer(34962,y.buffer),Y.vertexAttribPointer(rd,
2,5126,!1,24,0),Fc.type=5126,Fc.size=2,Fc.buffer=y,Fc.normalized=!1,Fc.offset=0,Fc.stride=24;0!==Fc.divisor&&(q.vertexAttribDivisorANGLE(rd,0),Fc.divisor=0);cc=ea.location;Cc=S[cc];Cc.buffer||Y.enableVertexAttribArray(cc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==h||!1!==Cc.normalized||8!==Cc.offset||24!==Cc.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(cc,2,5126,!1,24,8),Cc.type=5126,Cc.size=2,Cc.buffer=h,Cc.normalized=!1,Cc.offset=8,Cc.stride=24;0!==Cc.divisor&&(q.vertexAttribDivisorANGLE(cc,
0),Cc.divisor=0);Yc=W.location;Yb=S[Yc];Yb.buffer||Y.enableVertexAttribArray(Yc);if(5126!==Yb.type||2!==Yb.size||Yb.buffer!==f||!1!==Yb.normalized||16!==Yb.offset||24!==Yb.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(Yc,2,5126,!1,24,16),Yb.type=5126,Yb.size=2,Yb.buffer=f,Yb.normalized=!1,Yb.offset=16,Yb.stride=24;0!==Yb.divisor&&(q.vertexAttribDivisorANGLE(Yc,0),Yb.divisor=0);(Gc=Ba.elements)?Y.bindBuffer(34963,Gc.buffer.buffer):sc.currentVAO&&(Gc=Ea.getElements(sc.currentVAO.elements))&&
Y.bindBuffer(34963,Gc.buffer.buffer);Xa=Ba.offset;for(p=0;p<a;++p){t=b[p];var Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,$b,jc,Rb,ic,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc;Ca=t.viewport;ud=Ca.x|0;Ib=Ca.y|0;Ta="width"in Ca?Ca.width|0:ma.framebufferWidth-
ud;Ub="height"in Ca?Ca.height|0:ma.framebufferHeight-Ib;bb=ma.viewportWidth;ma.viewportWidth=Ta;Dc=ma.viewportHeight;ma.viewportHeight=Ub;Y.viewport(ud,Ib,Ta,Ub);C[0]=ud;C[1]=Ib;C[2]=Ta;C[3]=Ub;Wb=t.viewport;$b=Wb.x|0;jc=Wb.y|0;Rb="width"in Wb?Wb.width|0:ma.framebufferWidth-$b;ic="height"in Wb?Wb.height|0:ma.framebufferHeight-jc;Y.scissor($b,jc,Rb,ic);fa[0]=$b;fa[1]=jc;fa[2]=Rb;fa[3]=ic;Sb=aa.call(this,ma,t,p);Fb.offset=Sb;Oa=!1;nb=null;tb=0;gb=!1;nc=Pa=0;Xb=1;bd=0;cb=5126;ib=hc=Zc=kc=0;mb(Fb)?(Oa=
!0,nb=B.createStream(34962,Fb),cb=nb.dtype):(nb=B.getBuffer(Fb))?cb=nb.dtype:"constant"in Fb?(Xb=2,"number"===typeof Fb.constant?(Zc=Fb.constant,hc=ib=kc=0):(Zc=0<Fb.constant.length?Fb.constant[0]:0,hc=1<Fb.constant.length?Fb.constant[1]:0,ib=2<Fb.constant.length?Fb.constant[2]:0,kc=3<Fb.constant.length?Fb.constant[3]:0)):(nb=mb(Fb.buffer)?B.createStream(34962,Fb.buffer):B.getBuffer(Fb.buffer),cb="type"in Fb?oc[Fb.type]:nb.dtype,gb=!!Fb.normalized,nc=Fb.size|0,Pa=Fb.offset|0,bd=Fb.stride|0,tb=Fb.divisor|
0);jb=P.location;ta=S[jb];if(1===Xb){ta.buffer||Y.enableVertexAttribArray(jb);ob=nc||2;if(ta.type!==cb||ta.size!==ob||ta.buffer!==nb||ta.normalized!==gb||ta.offset!==Pa||ta.stride!==bd)Y.bindBuffer(34962,nb.buffer),Y.vertexAttribPointer(jb,ob,cb,gb,bd,Pa),ta.type=cb,ta.size=ob,ta.buffer=nb,ta.normalized=gb,ta.offset=Pa,ta.stride=bd;ta.divisor!==tb&&(q.vertexAttribDivisorANGLE(jb,tb),ta.divisor=tb)}else if(ta.buffer&&(Y.disableVertexAttribArray(jb),ta.buffer=null),ta.x!==Zc||ta.y!==hc||ta.z!==ib||
ta.w!==kc)Y.vertexAttrib4f(jb,Zc,hc,ib,kc),ta.x=Zc,ta.y=hc,ta.z=ib,ta.w=kc;wa=I.call(this,ma,t,p);xb.offset=wa;Ua=!1;ab=null;za=0;db=!1;Ab=Ma=0;zb=1;Ra=0;Hc=5126;ua=Tb=Lb=Jb=0;mb(xb)?(Ua=!0,ab=B.createStream(34962,xb),Hc=ab.dtype):(ab=B.getBuffer(xb))?Hc=ab.dtype:"constant"in xb?(zb=2,"number"===typeof xb.constant?(Lb=xb.constant,Tb=ua=Jb=0):(Lb=0<xb.constant.length?xb.constant[0]:0,Tb=1<xb.constant.length?xb.constant[1]:0,ua=2<xb.constant.length?xb.constant[2]:0,Jb=3<xb.constant.length?xb.constant[3]:
0)):(ab=mb(xb.buffer)?B.createStream(34962,xb.buffer):B.getBuffer(xb.buffer),Hc="type"in xb?oc[xb.type]:ab.dtype,db=!!xb.normalized,Ab=xb.size|0,Ma=xb.offset|0,Ra=xb.stride|0,za=xb.divisor|0);Jd=O.location;La=S[Jd];if(1===zb){La.buffer||Y.enableVertexAttribArray(Jd);Ob=Ab||2;if(La.type!==Hc||La.size!==Ob||La.buffer!==ab||La.normalized!==db||La.offset!==Ma||La.stride!==Ra)Y.bindBuffer(34962,ab.buffer),Y.vertexAttribPointer(Jd,Ob,Hc,db,Ra,Ma),La.type=Hc,La.size=Ob,La.buffer=ab,La.normalized=db,La.offset=
Ma,La.stride=Ra;La.divisor!==za&&(q.vertexAttribDivisorANGLE(Jd,za),La.divisor=za)}else if(La.buffer&&(Y.disableVertexAttribArray(Jd),La.buffer=null),La.x!==Lb||La.y!==Tb||La.z!==ua||La.w!==Jb)Y.vertexAttrib4f(Jd,Lb,Tb,ua,Jb),La.x=Lb,La.y=Tb,La.z=ua,La.w=Jb;eb=U.call(this,ma,t,p);pa.offset=eb;hb=!1;va=null;dc=0;Da=!1;qb=pb=0;Ya=1;Za=0;lc=5126;Mb=Va=tc=dd=0;mb(pa)?(hb=!0,va=B.createStream(34962,pa),lc=va.dtype):(va=B.getBuffer(pa))?lc=va.dtype:"constant"in pa?(Ya=2,"number"===typeof pa.constant?(tc=
pa.constant,Va=Mb=dd=0):(tc=0<pa.constant.length?pa.constant[0]:0,Va=1<pa.constant.length?pa.constant[1]:0,Mb=2<pa.constant.length?pa.constant[2]:0,dd=3<pa.constant.length?pa.constant[3]:0)):(va=mb(pa.buffer)?B.createStream(34962,pa.buffer):B.getBuffer(pa.buffer),lc="type"in pa?oc[pa.type]:va.dtype,Da=!!pa.normalized,qb=pa.size|0,pb=pa.offset|0,Za=pa.stride|0,dc=pa.divisor|0);Oc=Cb.location;Ga=S[Oc];if(1===Ya){Ga.buffer||Y.enableVertexAttribArray(Oc);vc=qb||4;if(Ga.type!==lc||Ga.size!==vc||Ga.buffer!==
va||Ga.normalized!==Da||Ga.offset!==pb||Ga.stride!==Za)Y.bindBuffer(34962,va.buffer),Y.vertexAttribPointer(Oc,vc,lc,Da,Za,pb),Ga.type=lc,Ga.size=vc,Ga.buffer=va,Ga.normalized=Da,Ga.offset=pb,Ga.stride=Za;Ga.divisor!==dc&&(q.vertexAttribDivisorANGLE(Oc,dc),Ga.divisor=dc)}else if(Ga.buffer&&(Y.disableVertexAttribArray(Oc),Ga.buffer=null),Ga.x!==tc||Ga.y!==Va||Ga.z!==Mb||Ga.w!==dd)Y.vertexAttrib4f(Oc,tc,Va,Mb,dd),Ga.x=tc,Ga.y=Va,Ga.z=Mb,Ga.w=dd;Qa=K.call(this,ma,t,p);Eb.offset=Qa;Aa=!1;kb=null;ub=0;
Bb=!1;uc=rb=0;vb=1;wd=0;rc=5126;fd=ed=Jc=Ed=0;mb(Eb)?(Aa=!0,kb=B.createStream(34962,Eb),rc=kb.dtype):(kb=B.getBuffer(Eb))?rc=kb.dtype:"constant"in Eb?(vb=2,"number"===typeof Eb.constant?(Jc=Eb.constant,ed=fd=Ed=0):(Jc=0<Eb.constant.length?Eb.constant[0]:0,ed=1<Eb.constant.length?Eb.constant[1]:0,fd=2<Eb.constant.length?Eb.constant[2]:0,Ed=3<Eb.constant.length?Eb.constant[3]:0)):(kb=mb(Eb.buffer)?B.createStream(34962,Eb.buffer):B.getBuffer(Eb.buffer),rc="type"in Eb?oc[Eb.type]:kb.dtype,Bb=!!Eb.normalized,
uc=Eb.size|0,rb=Eb.offset|0,wd=Eb.stride|0,ub=Eb.divisor|0);Vb=la.location;bc=S[Vb];if(1===vb){bc.buffer||Y.enableVertexAttribArray(Vb);Pb=uc||4;if(bc.type!==rc||bc.size!==Pb||bc.buffer!==kb||bc.normalized!==Bb||bc.offset!==rb||bc.stride!==wd)Y.bindBuffer(34962,kb.buffer),Y.vertexAttribPointer(Vb,Pb,rc,Bb,wd,rb),bc.type=rc,bc.size=Pb,bc.buffer=kb,bc.normalized=Bb,bc.offset=rb,bc.stride=wd;bc.divisor!==ub&&(q.vertexAttribDivisorANGLE(Vb,ub),bc.divisor=ub)}else if(bc.buffer&&(Y.disableVertexAttribArray(Vb),
bc.buffer=null),bc.x!==Jc||bc.y!==ed||bc.z!==fd||bc.w!==Ed)Y.vertexAttrib4f(Vb,Jc,ed,fd,Ed),bc.x=Jc,bc.y=ed,bc.z=fd,bc.w=Ed;Ha=ja.call(this,ma,t,p);Zb=Ha[0];wb=Ha[1];Qb=Ha[2];gc=Ha[3];p&&lb===Zb&&Nb===wb&&ec===Qb&&Ze===gc||(lb=Zb,Nb=wb,ec=Qb,Ze=gc,Y.uniform4f($a.location,Zb,wb,Qb,gc));xc=t.lineWidth;p&&yc===xc||(yc=xc,Y.uniform1f(Na.location,xc));Ac=t.capSize;p&&Kc===Ac||(Kc=Ac,Y.uniform1f(ka.location,Ac));$c=t.scale;Sc=$c[0];Kb=$c[1];p&&Lc===Sc&&Db===Kb||(Lc=Sc,Db=Kb,Y.uniform2f(T.location,Sc,Kb));
Mc=t.scaleFract;Ec=Mc[0];fc=Mc[1];p&&Tc===Ec&&Wc===fc||(Tc=Ec,Wc=fc,Y.uniform2f(na.location,Ec,fc));gd=t.translate;kd=gd[0];Xc=gd[1];p&&md===kd&&bf===Xc||(md=kd,bf=Xc,Y.uniform2f(Q.location,kd,Xc));Zd=t.translateFract;ke=Zd[0];me=Zd[1];p&&se===ke&&Md===me||(se=ke,Md=me,Y.uniform2f(Gb.location,ke,me));Kd=t.opacity;p&&id===Kd||(id=Kd,Y.uniform1f(V.location,Kd));Bc=t.count;0<Bc?Gc?q.drawElementsInstancedANGLE(4,36,Gc.type,Xa<<(Gc.type-5121>>1),Bc):q.drawArraysInstancedANGLE(4,Xa,36,Bc):0>Bc&&(Gc?Y.drawElements(4,
36,Gc.type,Xa<<(Gc.type-5121>>1)):Y.drawArrays(4,Xa,36));ma.viewportWidth=bb;ma.viewportHeight=Dc;Oa&&B.destroyStream(nb);Ua&&B.destroyStream(ab);hb&&B.destroyStream(va);Aa&&B.destroyStream(kb)}da.dirty=!0;sc.setVAO(null);g&&(c.cpuTime+=performance.now()-l)},draw:function(a){var q,t,d,e,m,v,k,w,u,G,D,z,x,Ia,r,A,oa,N,J,I,R,ca,K,X,aa,U,Ja,qa,Nc,Ic,qc,fb,zc,Hb,pc,Wa,Rc,ac,mc,ja,$b,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ic,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,
db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc;q=Ka.next;q!==Ka.cur&&(q?Y.bindFramebuffer(36160,q.framebuffer):Y.bindFramebuffer(36160,null),Ka.cur=q);if(da.dirty){var Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb;Da=ga.dither;Da!==da.dither&&(Da?Y.enable(3024):Y.disable(3024),da.dither=Da);pb=ga.depth_func;pb!==da.depth_func&&(Y.depthFunc(pb),da.depth_func=pb);qb=Pc[0];Ya=Pc[1];if(qb!==Qc[0]||Ya!==Qc[1])Y.depthRange(qb,Ya),Qc[0]=qb,Qc[1]=Ya;
Za=ga.depth_mask;Za!==da.depth_mask&&(Y.depthMask(Za),da.depth_mask=Za);lc=Fa[0];dd=Fa[1];tc=Fa[2];Va=Fa[3];if(lc!==sb[0]||dd!==sb[1]||tc!==sb[2]||Va!==sb[3])Y.colorMask(lc,dd,tc,Va),sb[0]=lc,sb[1]=dd,sb[2]=tc,sb[3]=Va;Mb=ga.cull_enable;Mb!==da.cull_enable&&(Mb?Y.enable(2884):Y.disable(2884),da.cull_enable=Mb);Oc=ga.cull_face;Oc!==da.cull_face&&(Y.cullFace(Oc),da.cull_face=Oc);Ga=ga.frontFace;Ga!==da.frontFace&&(Y.frontFace(Ga),da.frontFace=Ga);vc=ga.lineWidth;vc!==da.lineWidth&&(Y.lineWidth(vc),
da.lineWidth=vc);Qa=ga.polygonOffset_enable;Qa!==da.polygonOffset_enable&&(Qa?Y.enable(32823):Y.disable(32823),da.polygonOffset_enable=Qa);Aa=L[0];kb=L[1];if(Aa!==E[0]||kb!==E[1])Y.polygonOffset(Aa,kb),E[0]=Aa,E[1]=kb;ub=ga.sample_alpha;ub!==da.sample_alpha&&(ub?Y.enable(32926):Y.disable(32926),da.sample_alpha=ub);Bb=ga.sample_enable;Bb!==da.sample_enable&&(Bb?Y.enable(32928):Y.disable(32928),da.sample_enable=Bb);rb=ia[0];uc=ia[1];if(rb!==sa[0]||uc!==sa[1])Y.sampleCoverage(rb,uc),sa[0]=rb,sa[1]=uc;
vb=ga.stencil_enable;vb!==da.stencil_enable&&(vb?Y.enable(2960):Y.disable(2960),da.stencil_enable=vb);wd=ga.stencil_mask;wd!==da.stencil_mask&&(Y.stencilMask(wd),da.stencil_mask=wd);rc=ra[0];Ed=ra[1];Jc=ra[2];if(rc!==M[0]||Ed!==M[1]||Jc!==M[2])Y.stencilFunc(rc,Ed,Jc),M[0]=rc,M[1]=Ed,M[2]=Jc;ed=xa[0];fd=xa[1];Vb=xa[2];bc=xa[3];if(ed!==ya[0]||fd!==ya[1]||Vb!==ya[2]||bc!==ya[3])Y.stencilOpSeparate(ed,fd,Vb,bc),ya[0]=ed,ya[1]=fd,ya[2]=Vb,ya[3]=bc;Pb=F[0];Ha=F[1];Zb=F[2];lb=F[3];if(Pb!==ba[0]||Ha!==ba[1]||
Zb!==ba[2]||lb!==ba[3])Y.stencilOpSeparate(Pb,Ha,Zb,lb),ba[0]=Pb,ba[1]=Ha,ba[2]=Zb,ba[3]=lb}t=a.viewport;d=t.x|0;e=t.y|0;m="width"in t?t.width|0:ma.framebufferWidth-d;v="height"in t?t.height|0:ma.framebufferHeight-e;k=ma.viewportWidth;ma.viewportWidth=m;w=ma.viewportHeight;ma.viewportHeight=v;Y.viewport(d,e,m,v);C[0]=d;C[1]=e;C[2]=m;C[3]=v;Y.blendColor(0,0,0,0);td[0]=0;td[1]=0;td[2]=0;td[3]=0;Y.enable(3042);da.blend_enable=!0;Y.blendEquationSeparate(32774,32774);Z[0]=32774;Z[1]=32774;Y.blendFuncSeparate(770,
771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;Y.disable(2929);da.depth_enable=!1;u=a.viewport;G=u.x|0;D=u.y|0;z="width"in u?u.width|0:ma.framebufferWidth-G;x="height"in u?u.height|0:ma.framebufferHeight-D;Y.scissor(G,D,z,x);fa[0]=G;fa[1]=D;fa[2]=z;fa[3]=x;Y.enable(3089);da.scissor_enable=!0;if(Ia=da.profile)r=performance.now(),c.count++;Y.useProgram(l.program);A=yb.angle_instanced_arrays;sc.setVAO(null);oa=g.call(this,ma,a,0);Fb.offset=oa;N=!1;J=null;I=0;R=!1;K=ca=0;X=1;aa=0;U=5126;Ic=Nc=qa=Ja=
0;mb(Fb)?(N=!0,J=B.createStream(34962,Fb),U=J.dtype):(J=B.getBuffer(Fb))?U=J.dtype:"constant"in Fb?(X=2,"number"===typeof Fb.constant?(qa=Fb.constant,Nc=Ic=Ja=0):(qa=0<Fb.constant.length?Fb.constant[0]:0,Nc=1<Fb.constant.length?Fb.constant[1]:0,Ic=2<Fb.constant.length?Fb.constant[2]:0,Ja=3<Fb.constant.length?Fb.constant[3]:0)):(J=mb(Fb.buffer)?B.createStream(34962,Fb.buffer):B.getBuffer(Fb.buffer),U="type"in Fb?oc[Fb.type]:J.dtype,R=!!Fb.normalized,K=Fb.size|0,ca=Fb.offset|0,aa=Fb.stride|0,I=Fb.divisor|
0);qc=P.location;fb=S[qc];if(1===X){fb.buffer||Y.enableVertexAttribArray(qc);zc=K||2;if(fb.type!==U||fb.size!==zc||fb.buffer!==J||fb.normalized!==R||fb.offset!==ca||fb.stride!==aa)Y.bindBuffer(34962,J.buffer),Y.vertexAttribPointer(qc,zc,U,R,aa,ca),fb.type=U,fb.size=zc,fb.buffer=J,fb.normalized=R,fb.offset=ca,fb.stride=aa;fb.divisor!==I&&(A.vertexAttribDivisorANGLE(qc,I),fb.divisor=I)}else if(fb.buffer&&(Y.disableVertexAttribArray(qc),fb.buffer=null),fb.x!==qa||fb.y!==Nc||fb.z!==Ic||fb.w!==Ja)Y.vertexAttrib4f(qc,
qa,Nc,Ic,Ja),fb.x=qa,fb.y=Nc,fb.z=Ic,fb.w=Ja;Hb=b.call(this,ma,a,0);xb.offset=Hb;pc=!1;Wa=null;Rc=0;ac=!1;ja=mc=0;$b=1;Fc=0;cc=5126;Gc=Yb=Yc=Cc=0;mb(xb)?(pc=!0,Wa=B.createStream(34962,xb),cc=Wa.dtype):(Wa=B.getBuffer(xb))?cc=Wa.dtype:"constant"in xb?($b=2,"number"===typeof xb.constant?(Yc=xb.constant,Yb=Gc=Cc=0):(Yc=0<xb.constant.length?xb.constant[0]:0,Yb=1<xb.constant.length?xb.constant[1]:0,Gc=2<xb.constant.length?xb.constant[2]:0,Cc=3<xb.constant.length?xb.constant[3]:0)):(Wa=mb(xb.buffer)?B.createStream(34962,
xb.buffer):B.getBuffer(xb.buffer),cc="type"in xb?oc[xb.type]:Wa.dtype,ac=!!xb.normalized,ja=xb.size|0,mc=xb.offset|0,Fc=xb.stride|0,Rc=xb.divisor|0);Xa=O.location;Ca=S[Xa];if(1===$b){Ca.buffer||Y.enableVertexAttribArray(Xa);ud=ja||2;if(Ca.type!==cc||Ca.size!==ud||Ca.buffer!==Wa||Ca.normalized!==ac||Ca.offset!==mc||Ca.stride!==Fc)Y.bindBuffer(34962,Wa.buffer),Y.vertexAttribPointer(Xa,ud,cc,ac,Fc,mc),Ca.type=cc,Ca.size=ud,Ca.buffer=Wa,Ca.normalized=ac,Ca.offset=mc,Ca.stride=Fc;Ca.divisor!==Rc&&(A.vertexAttribDivisorANGLE(Xa,
Rc),Ca.divisor=Rc)}else if(Ca.buffer&&(Y.disableVertexAttribArray(Xa),Ca.buffer=null),Ca.x!==Yc||Ca.y!==Yb||Ca.z!==Gc||Ca.w!==Cc)Y.vertexAttrib4f(Xa,Yc,Yb,Gc,Cc),Ca.x=Yc,Ca.y=Yb,Ca.z=Gc,Ca.w=Cc;Ib=p.call(this,ma,a,0);pa.offset=Ib;Ta=!1;Ub=null;bb=0;Dc=!1;ic=Wb=0;jc=1;Rb=0;jd=5126;tb=nb=Oa=Sb=0;mb(pa)?(Ta=!0,Ub=B.createStream(34962,pa),jd=Ub.dtype):(Ub=B.getBuffer(pa))?jd=Ub.dtype:"constant"in pa?(jc=2,"number"===typeof pa.constant?(Oa=pa.constant,nb=tb=Sb=0):(Oa=0<pa.constant.length?pa.constant[0]:
0,nb=1<pa.constant.length?pa.constant[1]:0,tb=2<pa.constant.length?pa.constant[2]:0,Sb=3<pa.constant.length?pa.constant[3]:0)):(Ub=mb(pa.buffer)?B.createStream(34962,pa.buffer):B.getBuffer(pa.buffer),jd="type"in pa?oc[pa.type]:Ub.dtype,Dc=!!pa.normalized,ic=pa.size|0,Wb=pa.offset|0,Rb=pa.stride|0,bb=pa.divisor|0);gb=Cb.location;Pa=S[gb];if(1===jc){Pa.buffer||Y.enableVertexAttribArray(gb);nc=ic||4;if(Pa.type!==jd||Pa.size!==nc||Pa.buffer!==Ub||Pa.normalized!==Dc||Pa.offset!==Wb||Pa.stride!==Rb)Y.bindBuffer(34962,
Ub.buffer),Y.vertexAttribPointer(gb,nc,jd,Dc,Rb,Wb),Pa.type=jd,Pa.size=nc,Pa.buffer=Ub,Pa.normalized=Dc,Pa.offset=Wb,Pa.stride=Rb;Pa.divisor!==bb&&(A.vertexAttribDivisorANGLE(gb,bb),Pa.divisor=bb)}else if(Pa.buffer&&(Y.disableVertexAttribArray(gb),Pa.buffer=null),Pa.x!==Oa||Pa.y!==nb||Pa.z!==tb||Pa.w!==Sb)Y.vertexAttrib4f(gb,Oa,nb,tb,Sb),Pa.x=Oa,Pa.y=nb,Pa.z=tb,Pa.w=Sb;Xb=H.call(this,ma,a,0);Eb.offset=Xb;bd=!1;cb=null;kc=0;Zc=!1;ib=hc=0;jb=1;ta=0;ob=5126;za=ab=Ua=wa=0;mb(Eb)?(bd=!0,cb=B.createStream(34962,
Eb),ob=cb.dtype):(cb=B.getBuffer(Eb))?ob=cb.dtype:"constant"in Eb?(jb=2,"number"===typeof Eb.constant?(Ua=Eb.constant,ab=za=wa=0):(Ua=0<Eb.constant.length?Eb.constant[0]:0,ab=1<Eb.constant.length?Eb.constant[1]:0,za=2<Eb.constant.length?Eb.constant[2]:0,wa=3<Eb.constant.length?Eb.constant[3]:0)):(cb=mb(Eb.buffer)?B.createStream(34962,Eb.buffer):B.getBuffer(Eb.buffer),ob="type"in Eb?oc[Eb.type]:cb.dtype,Zc=!!Eb.normalized,ib=Eb.size|0,hc=Eb.offset|0,ta=Eb.stride|0,kc=Eb.divisor|0);db=la.location;Ma=
S[db];if(1===jb){Ma.buffer||Y.enableVertexAttribArray(db);Ab=ib||4;if(Ma.type!==ob||Ma.size!==Ab||Ma.buffer!==cb||Ma.normalized!==Zc||Ma.offset!==hc||Ma.stride!==ta)Y.bindBuffer(34962,cb.buffer),Y.vertexAttribPointer(db,Ab,ob,Zc,ta,hc),Ma.type=ob,Ma.size=Ab,Ma.buffer=cb,Ma.normalized=Zc,Ma.offset=hc,Ma.stride=ta;Ma.divisor!==kc&&(A.vertexAttribDivisorANGLE(db,kc),Ma.divisor=kc)}else if(Ma.buffer&&(Y.disableVertexAttribArray(db),Ma.buffer=null),Ma.x!==Ua||Ma.y!==ab||Ma.z!==za||Ma.w!==wa)Y.vertexAttrib4f(db,
Ua,ab,za,wa),Ma.x=Ua,Ma.y=ab,Ma.z=za,Ma.w=wa;zb=Sa.location;Ra=S[zb];Ra.buffer||Y.enableVertexAttribArray(zb);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==y||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)Y.bindBuffer(34962,y.buffer),Y.vertexAttribPointer(zb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=y,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(A.vertexAttribDivisorANGLE(zb,0),Ra.divisor=0);Hc=ea.location;Jb=S[Hc];Jb.buffer||Y.enableVertexAttribArray(Hc);if(5126!==Jb.type||
2!==Jb.size||Jb.buffer!==h||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)Y.bindBuffer(34962,h.buffer),Y.vertexAttribPointer(Hc,2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=h,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(A.vertexAttribDivisorANGLE(Hc,0),Jb.divisor=0);Lb=W.location;Tb=S[Lb];Tb.buffer||Y.enableVertexAttribArray(Lb);if(5126!==Tb.type||2!==Tb.size||Tb.buffer!==f||!1!==Tb.normalized||16!==Tb.offset||24!==Tb.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(Lb,
2,5126,!1,24,16),Tb.type=5126,Tb.size=2,Tb.buffer=f,Tb.normalized=!1,Tb.offset=16,Tb.stride=24;0!==Tb.divisor&&(A.vertexAttribDivisorANGLE(Lb,0),Tb.divisor=0);ua=n.call(this,ma,a,0);Y.uniform4f($a.location,ua[0],ua[1],ua[2],ua[3]);Y.uniform1f(Na.location,a.lineWidth);Y.uniform1f(ka.location,a.capSize);Jd=a.scale;Y.uniform2f(T.location,Jd[0],Jd[1]);La=a.scaleFract;Y.uniform2f(na.location,La[0],La[1]);Ob=a.translate;Y.uniform2f(Q.location,Ob[0],Ob[1]);eb=a.translateFract;Y.uniform2f(Gb.location,eb[0],
eb[1]);Y.uniform1f(V.location,a.opacity);(hb=Ba.elements)?Y.bindBuffer(34963,hb.buffer.buffer):sc.currentVAO&&(hb=Ea.getElements(sc.currentVAO.elements))&&Y.bindBuffer(34963,hb.buffer.buffer);va=Ba.offset;dc=a.count;0<dc?hb?A.drawElementsInstancedANGLE(4,36,hb.type,va<<(hb.type-5121>>1),dc):A.drawArraysInstancedANGLE(4,va,36,dc):0>dc&&(hb?Y.drawElements(4,36,hb.type,va<<(hb.type-5121>>1)):Y.drawArrays(4,va,36));da.dirty=!0;sc.setVAO(null);ma.viewportWidth=k;ma.viewportHeight=w;Ia&&(c.cpuTime+=performance.now()-
r);N&&B.destroyStream(J);pc&&B.destroyStream(Wa);Ta&&B.destroyStream(Ub);bd&&B.destroyStream(cb)},scope:function(b,a,n){var g,l,p,d,e,m,k,D,H,z,A,C,F,E,I,M,L,ba,Z,O,P,K,Q,T,S,aa,Y,fa,ha,U,V,ia,W,ya,sa,sc,xa,ra,ka,Fa,ea,Cc,na,Yb,Gc,Xa,Ca,td,Ib,Ta,ja,bb,sb,Pc,la,jc,Rb,Ea,Sb,Oa,nb,tb,gb,Pa,Na,Xb,$a,cb,kc,Sa,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Gb,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,Ka,rc,Qc,Jc,yb,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Cb,
xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd;g=b.viewport;l=g.x|0;p=g.y|0;d="width"in g?g.width|0:ma.framebufferWidth-l;e="height"in g?g.height|0:ma.framebufferHeight-p;m=ma.viewportWidth;ma.viewportWidth=d;k=ma.viewportHeight;ma.viewportHeight=e;D=Ja[0];Ja[0]=l;H=Ja[1];Ja[1]=p;z=Ja[2];Ja[2]=d;A=Ja[3];Ja[3]=e;C=ic[0];ic[0]=0;F=ic[1];ic[1]=0;E=ic[2];ic[2]=
0;I=ic[3];ic[3]=0;M=ga.blend_enable;ga.blend_enable=!0;L=zc[0];zc[0]=32774;ba=zc[1];zc[1]=32774;Z=N[0];N[0]=770;O=N[1];N[1]=771;P=N[2];N[2]=773;K=N[3];N[3]=1;Q=ga.depth_enable;ga.depth_enable=!1;T=b.viewport;S=T.x|0;aa=T.y|0;Y="width"in T?T.width|0:ma.framebufferWidth-S;fa="height"in T?T.height|0:ma.framebufferHeight-aa;ha=X[0];X[0]=S;U=X[1];X[1]=aa;V=X[2];X[2]=Y;ia=X[3];X[3]=fa;W=ga.scissor_enable;ga.scissor_enable=!0;if(ya=da.profile)sa=performance.now(),c.count++;sc=Ba.count;Ba.count=36;xa=b.count;
ra=Ba.instances;Ba.instances=xa;ka=Ba.primitive;Ba.primitive=4;Fa=b.capSize;ea=$b[5];$b[5]=Fa;Cc=b.lineWidth;na=$b[4];$b[4]=Cc;Yb=b.opacity;Gc=$b[10];$b[10]=Yb;Xa=b.range;Ca=$b[18];$b[18]=Xa;td=b.scale;Ib=$b[6];$b[6]=td;Ta=b.scaleFract;ja=$b[7];$b[7]=Ta;bb=b.translate;sb=$b[8];$b[8]=bb;Pc=b.translateFract;la=$b[9];$b[9]=Pc;jc=q.call(this,ma,b,n);Rb=$b[3];$b[3]=jc;Ea=t.buffer;t.buffer=f;Sb=t.divisor;t.divisor=0;Oa=t.normalized;t.normalized=!1;nb=t.offset;t.offset=16;tb=t.size;t.size=0;gb=t.state;t.state=
1;Pa=t.stride;t.stride=24;Na=t.type;t.type=5126;Xb=t.w;t.w=0;$a=t.x;t.x=0;cb=t.y;t.y=0;kc=t.z;t.z=0;Sa=v.call(this,ma,b,n);Eb.offset=Sa;hc=!1;ib=null;jb=0;ta=!1;wa=ob=0;Ua=1;ab=0;za=5126;zb=Ab=Ma=db=0;mb(Eb)?(hc=!0,ib=B.createStream(34962,Eb),za=ib.dtype):(ib=B.getBuffer(Eb))?za=ib.dtype:"constant"in Eb?(Ua=2,"number"===typeof Eb.constant?(Ma=Eb.constant,Ab=zb=db=0):(Ma=0<Eb.constant.length?Eb.constant[0]:0,Ab=1<Eb.constant.length?Eb.constant[1]:0,zb=2<Eb.constant.length?Eb.constant[2]:0,db=3<Eb.constant.length?
Eb.constant[3]:0)):(ib=mb(Eb.buffer)?B.createStream(34962,Eb.buffer):B.getBuffer(Eb.buffer),za="type"in Eb?oc[Eb.type]:ib.dtype,ta=!!Eb.normalized,wa=Eb.size|0,ob=Eb.offset|0,ab=Eb.stride|0,jb=Eb.divisor|0);Ra=G.buffer;G.buffer=ib;Hc=G.divisor;G.divisor=jb;Jb=G.normalized;G.normalized=ta;Lb=G.offset;G.offset=ob;Tb=G.size;G.size=wa;ua=G.state;G.state=Ua;Gb=G.stride;G.stride=ab;La=G.type;G.type=za;Ob=G.w;G.w=db;eb=G.x;G.x=Ma;hb=G.y;G.y=Ab;va=G.z;G.z=zb;dc=w.buffer;w.buffer=y;Da=w.divisor;w.divisor=
0;pb=w.normalized;w.normalized=!1;qb=w.offset;w.offset=0;Ya=w.size;w.size=0;Za=w.state;w.state=1;lc=w.stride;w.stride=24;dd=w.type;w.type=5126;tc=w.w;w.w=0;Va=w.x;w.x=0;Mb=w.y;w.y=0;Oc=w.z;w.z=0;Ga=Ia.call(this,ma,b,n);pa.offset=Ga;vc=!1;Qa=null;Aa=0;kb=!1;Bb=ub=0;rb=1;uc=0;vb=5126;Jc=Qc=rc=Ka=0;mb(pa)?(vc=!0,Qa=B.createStream(34962,pa),vb=Qa.dtype):(Qa=B.getBuffer(pa))?vb=Qa.dtype:"constant"in pa?(rb=2,"number"===typeof pa.constant?(rc=pa.constant,Qc=Jc=Ka=0):(rc=0<pa.constant.length?pa.constant[0]:
0,Qc=1<pa.constant.length?pa.constant[1]:0,Jc=2<pa.constant.length?pa.constant[2]:0,Ka=3<pa.constant.length?pa.constant[3]:0)):(Qa=mb(pa.buffer)?B.createStream(34962,pa.buffer):B.getBuffer(pa.buffer),vb="type"in pa?oc[pa.type]:Qa.dtype,kb=!!pa.normalized,Bb=pa.size|0,ub=pa.offset|0,uc=pa.stride|0,Aa=pa.divisor|0);yb=x.buffer;x.buffer=Qa;fd=x.divisor;x.divisor=Aa;Vb=x.normalized;x.normalized=kb;bc=x.offset;x.offset=ub;Pb=x.size;x.size=Bb;Ha=x.state;x.state=rb;Zb=x.stride;x.stride=uc;lb=x.type;x.type=
vb;wb=x.w;x.w=Ka;Nb=x.x;x.x=rc;Qb=x.y;x.y=Qc;ec=x.z;x.z=Jc;gc=u.buffer;u.buffer=h;Cb=u.divisor;u.divisor=0;xc=u.normalized;u.normalized=!1;yc=u.offset;u.offset=8;Ac=u.size;u.size=0;Kc=u.state;u.state=1;$c=u.stride;u.stride=24;Sc=u.type;u.type=5126;Lc=u.w;u.w=0;Kb=u.x;u.x=0;Db=u.y;u.y=0;Mc=u.z;u.z=0;Ec=r.call(this,ma,b,n);Fb.offset=Ec;Tc=!1;fc=null;Wc=0;gd=!1;md=kd=0;Xc=1;bf=0;Zd=5126;Md=me=se=ke=0;mb(Fb)?(Tc=!0,fc=B.createStream(34962,Fb),Zd=fc.dtype):(fc=B.getBuffer(Fb))?Zd=fc.dtype:"constant"in
Fb?(Xc=2,"number"===typeof Fb.constant?(se=Fb.constant,me=Md=ke=0):(se=0<Fb.constant.length?Fb.constant[0]:0,me=1<Fb.constant.length?Fb.constant[1]:0,Md=2<Fb.constant.length?Fb.constant[2]:0,ke=3<Fb.constant.length?Fb.constant[3]:0)):(fc=mb(Fb.buffer)?B.createStream(34962,Fb.buffer):B.getBuffer(Fb.buffer),Zd="type"in Fb?oc[Fb.type]:fc.dtype,gd=!!Fb.normalized,md=Fb.size|0,kd=Fb.offset|0,bf=Fb.stride|0,Wc=Fb.divisor|0);Kd=ca.buffer;ca.buffer=fc;id=ca.divisor;ca.divisor=Wc;Bc=ca.normalized;ca.normalized=
gd;od=ca.offset;ca.offset=kd;ld=ca.size;ca.size=md;cd=ca.state;ca.state=Xc;pd=ca.stride;ca.stride=bf;Fd=ca.type;ca.type=Zd;Hd=ca.w;ca.w=ke;te=ca.x;ca.x=se;ze=ca.y;ca.y=me;Ae=ca.z;ca.z=Md;ne=J.call(this,ma,b,n);xb.offset=ne;fe=!1;de=null;pe=0;be=!1;wc=ie=0;Vc=1;qe=0;le=5126;Rd=Qd=Pd=Ld=0;mb(xb)?(fe=!0,de=B.createStream(34962,xb),le=de.dtype):(de=B.getBuffer(xb))?le=de.dtype:"constant"in xb?(Vc=2,"number"===typeof xb.constant?(Pd=xb.constant,Qd=Rd=Ld=0):(Pd=0<xb.constant.length?xb.constant[0]:0,Qd=
1<xb.constant.length?xb.constant[1]:0,Rd=2<xb.constant.length?xb.constant[2]:0,Ld=3<xb.constant.length?xb.constant[3]:0)):(de=mb(xb.buffer)?B.createStream(34962,xb.buffer):B.getBuffer(xb.buffer),le="type"in xb?oc[xb.type]:de.dtype,be=!!xb.normalized,wc=xb.size|0,ie=xb.offset|0,qe=xb.stride|0,pe=xb.divisor|0);je=R.buffer;R.buffer=de;vf=R.divisor;R.divisor=pe;Ce=R.normalized;R.normalized=be;oe=R.offset;R.offset=ie;Re=R.size;R.size=wc;Se=R.state;R.state=Vc;Ne=R.stride;R.stride=qe;re=R.type;R.type=le;
Fe=R.w;R.w=Ld;He=R.x;R.x=Pd;Ie=R.y;R.y=Qd;Je=R.z;R.z=Rd;Ge=qa.vert;qa.vert=2;Nd=qa.frag;qa.frag=1;da.dirty=!0;a(ma,b,n);ma.viewportWidth=m;ma.viewportHeight=k;Ja[0]=D;Ja[1]=H;Ja[2]=z;Ja[3]=A;ic[0]=C;ic[1]=F;ic[2]=E;ic[3]=I;ga.blend_enable=M;zc[0]=L;zc[1]=ba;N[0]=Z;N[1]=O;N[2]=P;N[3]=K;ga.depth_enable=Q;X[0]=ha;X[1]=U;X[2]=V;X[3]=ia;ga.scissor_enable=W;ya&&(c.cpuTime+=performance.now()-sa);Ba.count=sc;Ba.instances=ra;Ba.primitive=ka;$b[5]=ea;$b[4]=na;$b[10]=Gc;$b[18]=Ca;$b[6]=Ib;$b[7]=ja;$b[8]=sb;
$b[9]=la;$b[3]=Rb;t.buffer=Ea;t.divisor=Sb;t.normalized=Oa;t.offset=nb;t.size=tb;t.state=gb;t.stride=Pa;t.type=Na;t.w=Xb;t.x=$a;t.y=cb;t.z=kc;hc&&B.destroyStream(ib);G.buffer=Ra;G.divisor=Hc;G.normalized=Jb;G.offset=Lb;G.size=Tb;G.state=ua;G.stride=Gb;G.type=La;G.w=Ob;G.x=eb;G.y=hb;G.z=va;w.buffer=dc;w.divisor=Da;w.normalized=pb;w.offset=qb;w.size=Ya;w.state=Za;w.stride=lc;w.type=dd;w.w=tc;w.x=Va;w.y=Mb;w.z=Oc;vc&&B.destroyStream(Qa);x.buffer=yb;x.divisor=fd;x.normalized=Vb;x.offset=bc;x.size=Pb;
x.state=Ha;x.stride=Zb;x.type=lb;x.w=wb;x.x=Nb;x.y=Qb;x.z=ec;u.buffer=gc;u.divisor=Cb;u.normalized=xc;u.offset=yc;u.size=Ac;u.state=Kc;u.stride=$c;u.type=Sc;u.w=Lc;u.x=Kb;u.y=Db;u.z=Mc;Tc&&B.destroyStream(fc);ca.buffer=Kd;ca.divisor=id;ca.normalized=Bc;ca.offset=od;ca.size=ld;ca.state=cd;ca.stride=pd;ca.type=Fd;ca.w=Hd;ca.x=te;ca.y=ze;ca.z=Ae;fe&&B.destroyStream(de);R.buffer=je;R.divisor=vf;R.normalized=Ce;R.offset=oe;R.size=Re;R.state=Se;R.stride=Ne;R.type=re;R.w=Fe;R.x=He;R.y=Ie;R.z=Je;qa.vert=
Ge;qa.frag=Nd;da.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,c,d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,Ia,x,u,r,ca,J,R,A,aa,I,U,K,ja,W,ka,la,Sa){var Cb,ea,Na,V,P,O,T,na,Q,Gb,$a,S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa,$b,sc,ic,td,zc,Z,N,ha,Fa,sb,Pc,Qc,L,E,ia,sa,X,fa,ra,M,F;Cb=a.attributes;ea=a.buffer;Na=a.context;V=a.current;P=a.draw;O=a.elements;T=a.extensions;na=a.framebuffer;
Q=a.gl;Gb=a.isBufferArgs;$a=a.next;S=a.shader;B=a.uniforms;ma=a.vao;da=$a.blend_color;Ba=V.blend_color;Ea=$a.blend_equation;yb=V.blend_equation;Ka=$a.blend_func;Y=V.blend_func;mb=$a.colorMask;ga=V.colorMask;qa=$a.depth_range;$b=V.depth_range;sc=$a.polygonOffset_offset;ic=V.polygonOffset_offset;td=$a.sample_coverage;zc=V.sample_coverage;Z=$a.scissor_box;N=V.scissor_box;ha=$a.stencil_func;Fa=V.stencil_func;sb=$a.stencil_opBack;Pc=V.stencil_opBack;Qc=$a.stencil_opFront;L=V.stencil_opFront;E=$a.viewport;
ia=V.viewport;sa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};ra={divisor:1,offset:16,stride:8};M={divisor:1,offset:16,stride:8};F={divisor:1,offset:0,stride:4};return{batch:function(b,a){var f,h,n,g,l,q;f=na.next;f!==na.cur&&(f?Q.bindFramebuffer(36160,f.framebuffer):Q.bindFramebuffer(36160,null),na.cur=f);if(V.dirty){var t,p,d,e,y,H,D,z,B,E,Z,S,da,Ea,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,
nd,vd,ad,sd,Uc,Dd,Nc;t=$a.dither;t!==V.dither&&(t?Q.enable(3024):Q.disable(3024),V.dither=t);p=$a.depth_func;p!==V.depth_func&&(Q.depthFunc(p),V.depth_func=p);d=qa[0];e=qa[1];if(d!==$b[0]||e!==$b[1])Q.depthRange(d,e),$b[0]=d,$b[1]=e;y=$a.depth_mask;y!==V.depth_mask&&(Q.depthMask(y),V.depth_mask=y);H=mb[0];D=mb[1];z=mb[2];B=mb[3];if(H!==ga[0]||D!==ga[1]||z!==ga[2]||B!==ga[3])Q.colorMask(H,D,z,B),ga[0]=H,ga[1]=D,ga[2]=z,ga[3]=B;E=$a.cull_enable;E!==V.cull_enable&&(E?Q.enable(2884):Q.disable(2884),V.cull_enable=
E);Z=$a.cull_face;Z!==V.cull_face&&(Q.cullFace(Z),V.cull_face=Z);S=$a.frontFace;S!==V.frontFace&&(Q.frontFace(S),V.frontFace=S);da=$a.lineWidth;da!==V.lineWidth&&(Q.lineWidth(da),V.lineWidth=da);Ea=$a.polygonOffset_enable;Ea!==V.polygonOffset_enable&&(Ea?Q.enable(32823):Q.disable(32823),V.polygonOffset_enable=Ea);zd=sc[0];xe=sc[1];if(zd!==ic[0]||xe!==ic[1])Q.polygonOffset(zd,xe),ic[0]=zd,ic[1]=xe;Me=$a.sample_alpha;Me!==V.sample_alpha&&(Me?Q.enable(32926):Q.disable(32926),V.sample_alpha=Me);Qe=$a.sample_enable;
Qe!==V.sample_enable&&(Qe?Q.enable(32928):Q.disable(32928),V.sample_enable=Qe);Ad=td[0];Be=td[1];if(Ad!==zc[0]||Be!==zc[1])Q.sampleCoverage(Ad,Be),zc[0]=Ad,zc[1]=Be;Vd=$a.stencil_mask;Vd!==V.stencil_mask&&(Q.stencilMask(Vd),V.stencil_mask=Vd);Wd=ha[0];ae=ha[1];Yd=ha[2];if(Wd!==Fa[0]||ae!==Fa[1]||Yd!==Fa[2])Q.stencilFunc(Wd,ae,Yd),Fa[0]=Wd,Fa[1]=ae,Fa[2]=Yd;qd=Qc[0];nd=Qc[1];vd=Qc[2];ad=Qc[3];if(qd!==L[0]||nd!==L[1]||vd!==L[2]||ad!==L[3])Q.stencilOpSeparate(qd,nd,vd,ad),L[0]=qd,L[1]=nd,L[2]=vd,L[3]=
ad;sd=sb[0];Uc=sb[1];Dd=sb[2];Nc=sb[3];if(sd!==Pc[0]||Uc!==Pc[1]||Dd!==Pc[2]||Nc!==Pc[3])Q.stencilOpSeparate(sd,Uc,Dd,Nc),Pc[0]=sd,Pc[1]=Uc,Pc[2]=Dd,Pc[3]=Nc}Q.blendColor(0,0,0,0);Ba[0]=0;Ba[1]=0;Ba[2]=0;Ba[3]=0;Q.enable(3042);V.blend_enable=!0;Q.blendEquationSeparate(32774,32774);yb[0]=32774;yb[1]=32774;Q.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;Q.enable(3089);V.scissor_enable=!0;Q.disable(2960);V.stencil_enable=!1;if(h=V.profile)n=performance.now(),c.count+=a;Q.useProgram(v.program);
g=T.angle_instanced_arrays;var Ic,qc,fb,hd,Hb;ma.setVAO(null);Ic=aa.location;qc=Cb[Ic];qc.buffer||Q.enableVertexAttribArray(Ic);if(5126!==qc.type||1!==qc.size||qc.buffer!==m||!1!==qc.normalized||0!==qc.offset||8!==qc.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Ic,1,5126,!1,8,0),qc.type=5126,qc.size=1,qc.buffer=m,qc.normalized=!1,qc.offset=0,qc.stride=8;0!==qc.divisor&&(g.vertexAttribDivisorANGLE(Ic,0),qc.divisor=0);fb=I.location;hd=Cb[fb];hd.buffer||Q.enableVertexAttribArray(fb);if(5126!==
hd.type||1!==hd.size||hd.buffer!==k||!1!==hd.normalized||4!==hd.offset||8!==hd.stride)Q.bindBuffer(34962,k.buffer),Q.vertexAttribPointer(fb,1,5126,!1,8,4),hd.type=5126,hd.size=1,hd.buffer=k,hd.normalized=!1,hd.offset=4,hd.stride=8;0!==hd.divisor&&(g.vertexAttribDivisorANGLE(fb,0),hd.divisor=0);(Hb=P.elements)?Q.bindBuffer(34963,Hb.buffer.buffer):ma.currentVAO&&(Hb=O.getElements(ma.currentVAO.elements))&&Q.bindBuffer(34963,Hb.buffer.buffer);for(l=0;l<a;++l){q=b[l];var pc,Wa,Rc,ac,mc,Id,rd,Fc,cc,Cc,
Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,Ka,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd;pc=q.viewport;Wa=pc.x|0;Rc=pc.y|0;ac="width"in pc?pc.width|0:Na.framebufferWidth-Wa;mc="height"in pc?pc.height|0:Na.framebufferHeight-
Rc;Id=Na.viewportWidth;Na.viewportWidth=ac;rd=Na.viewportHeight;Na.viewportHeight=mc;Q.viewport(Wa,Rc,ac,mc);ia[0]=Wa;ia[1]=Rc;ia[2]=ac;ia[3]=mc;(Fc=G.call(this,Na,q,l))?Q.enable(2929):Q.disable(2929);V.depth_enable=Fc;cc=q.viewport;Cc=cc.x|0;Yc=cc.y|0;Yb="width"in cc?cc.width|0:Na.framebufferWidth-Cc;Gc="height"in cc?cc.height|0:Na.framebufferHeight-Yc;Q.scissor(Cc,Yc,Yb,Gc);N[0]=Cc;N[1]=Yc;N[2]=Yb;N[3]=Gc;X.buffer=q.positionBuffer;Xa=!1;Ca=null;ud=0;Ib=!1;Ub=Ta=0;bb=1;Dc=0;Wb=5126;jd=Rb=jc=Ka=0;
Gb(X)?(Xa=!0,Ca=ea.createStream(34962,X),Wb=Ca.dtype):(Ca=ea.getBuffer(X))?Wb=Ca.dtype:"constant"in X?(bb=2,"number"===typeof X.constant?(jc=X.constant,Rb=jd=Ka=0):(jc=0<X.constant.length?X.constant[0]:0,Rb=1<X.constant.length?X.constant[1]:0,jd=2<X.constant.length?X.constant[2]:0,Ka=3<X.constant.length?X.constant[3]:0)):(Ca=Gb(X.buffer)?ea.createStream(34962,X.buffer):ea.getBuffer(X.buffer),Wb="type"in X?sa[X.type]:Ca.dtype,Ib=!!X.normalized,Ub=X.size|0,Ta=X.offset|0,Dc=X.stride|0,ud=X.divisor|0);
Sb=Ia.location;Oa=Cb[Sb];if(1===bb){Oa.buffer||Q.enableVertexAttribArray(Sb);nb=Ub||2;if(Oa.type!==Wb||Oa.size!==nb||Oa.buffer!==Ca||Oa.normalized!==Ib||Oa.offset!==Ta||Oa.stride!==Dc)Q.bindBuffer(34962,Ca.buffer),Q.vertexAttribPointer(Sb,nb,Wb,Ib,Dc,Ta),Oa.type=Wb,Oa.size=nb,Oa.buffer=Ca,Oa.normalized=Ib,Oa.offset=Ta,Oa.stride=Dc;Oa.divisor!==ud&&(g.vertexAttribDivisorANGLE(Sb,ud),Oa.divisor=ud)}else if(Oa.buffer&&(Q.disableVertexAttribArray(Sb),Oa.buffer=null),Oa.x!==jc||Oa.y!==Rb||Oa.z!==jd||Oa.w!==
Ka)Q.vertexAttrib4f(Sb,jc,Rb,jd,Ka),Oa.x=jc,Oa.y=Rb,Oa.z=jd,Oa.w=Ka;ra.buffer=q.positionBuffer;tb=!1;gb=null;Pa=0;nc=!1;bd=Xb=0;cb=1;kc=0;Zc=5126;ta=jb=ib=hc=0;Gb(ra)?(tb=!0,gb=ea.createStream(34962,ra),Zc=gb.dtype):(gb=ea.getBuffer(ra))?Zc=gb.dtype:"constant"in ra?(cb=2,"number"===typeof ra.constant?(ib=ra.constant,jb=ta=hc=0):(ib=0<ra.constant.length?ra.constant[0]:0,jb=1<ra.constant.length?ra.constant[1]:0,ta=2<ra.constant.length?ra.constant[2]:0,hc=3<ra.constant.length?ra.constant[3]:0)):(gb=
Gb(ra.buffer)?ea.createStream(34962,ra.buffer):ea.getBuffer(ra.buffer),Zc="type"in ra?sa[ra.type]:gb.dtype,nc=!!ra.normalized,bd=ra.size|0,Xb=ra.offset|0,kc=ra.stride|0,Pa=ra.divisor|0);ob=u.location;wa=Cb[ob];if(1===cb){wa.buffer||Q.enableVertexAttribArray(ob);Ua=bd||2;if(wa.type!==Zc||wa.size!==Ua||wa.buffer!==gb||wa.normalized!==nc||wa.offset!==Xb||wa.stride!==kc)Q.bindBuffer(34962,gb.buffer),Q.vertexAttribPointer(ob,Ua,Zc,nc,kc,Xb),wa.type=Zc,wa.size=Ua,wa.buffer=gb,wa.normalized=nc,wa.offset=
Xb,wa.stride=kc;wa.divisor!==Pa&&(g.vertexAttribDivisorANGLE(ob,Pa),wa.divisor=Pa)}else if(wa.buffer&&(Q.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==ib||wa.y!==jb||wa.z!==ta||wa.w!==hc)Q.vertexAttrib4f(ob,ib,jb,ta,hc),wa.x=ib,wa.y=jb,wa.z=ta,wa.w=hc;fa.buffer=q.positionFractBuffer;ab=!1;za=null;db=0;Ma=!1;zb=Ab=0;Ra=1;Hc=0;Jb=5126;Jd=ua=Tb=Lb=0;Gb(fa)?(ab=!0,za=ea.createStream(34962,fa),Jb=za.dtype):(za=ea.getBuffer(fa))?Jb=za.dtype:"constant"in fa?(Ra=2,"number"===typeof fa.constant?(Tb=
fa.constant,ua=Jd=Lb=0):(Tb=0<fa.constant.length?fa.constant[0]:0,ua=1<fa.constant.length?fa.constant[1]:0,Jd=2<fa.constant.length?fa.constant[2]:0,Lb=3<fa.constant.length?fa.constant[3]:0)):(za=Gb(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),Jb="type"in fa?sa[fa.type]:za.dtype,Ma=!!fa.normalized,zb=fa.size|0,Ab=fa.offset|0,Hc=fa.stride|0,db=fa.divisor|0);La=x.location;Ob=Cb[La];if(1===Ra){Ob.buffer||Q.enableVertexAttribArray(La);eb=zb||2;if(Ob.type!==Jb||Ob.size!==eb||Ob.buffer!==
za||Ob.normalized!==Ma||Ob.offset!==Ab||Ob.stride!==Hc)Q.bindBuffer(34962,za.buffer),Q.vertexAttribPointer(La,eb,Jb,Ma,Hc,Ab),Ob.type=Jb,Ob.size=eb,Ob.buffer=za,Ob.normalized=Ma,Ob.offset=Ab,Ob.stride=Hc;Ob.divisor!==db&&(g.vertexAttribDivisorANGLE(La,db),Ob.divisor=db)}else if(Ob.buffer&&(Q.disableVertexAttribArray(La),Ob.buffer=null),Ob.x!==Tb||Ob.y!==ua||Ob.z!==Jd||Ob.w!==Lb)Q.vertexAttrib4f(La,Tb,ua,Jd,Lb),Ob.x=Tb,Ob.y=ua,Ob.z=Jd,Ob.w=Lb;M.buffer=q.positionFractBuffer;hb=!1;va=null;dc=0;Da=!1;
qb=pb=0;Ya=1;Za=0;lc=5126;Mb=Va=tc=dd=0;Gb(M)?(hb=!0,va=ea.createStream(34962,M),lc=va.dtype):(va=ea.getBuffer(M))?lc=va.dtype:"constant"in M?(Ya=2,"number"===typeof M.constant?(tc=M.constant,Va=Mb=dd=0):(tc=0<M.constant.length?M.constant[0]:0,Va=1<M.constant.length?M.constant[1]:0,Mb=2<M.constant.length?M.constant[2]:0,dd=3<M.constant.length?M.constant[3]:0)):(va=Gb(M.buffer)?ea.createStream(34962,M.buffer):ea.getBuffer(M.buffer),lc="type"in M?sa[M.type]:va.dtype,Da=!!M.normalized,qb=M.size|0,pb=
M.offset|0,Za=M.stride|0,dc=M.divisor|0);Oc=r.location;Ga=Cb[Oc];if(1===Ya){Ga.buffer||Q.enableVertexAttribArray(Oc);vc=qb||2;if(Ga.type!==lc||Ga.size!==vc||Ga.buffer!==va||Ga.normalized!==Da||Ga.offset!==pb||Ga.stride!==Za)Q.bindBuffer(34962,va.buffer),Q.vertexAttribPointer(Oc,vc,lc,Da,Za,pb),Ga.type=lc,Ga.size=vc,Ga.buffer=va,Ga.normalized=Da,Ga.offset=pb,Ga.stride=Za;Ga.divisor!==dc&&(g.vertexAttribDivisorANGLE(Oc,dc),Ga.divisor=dc)}else if(Ga.buffer&&(Q.disableVertexAttribArray(Oc),Ga.buffer=
null),Ga.x!==tc||Ga.y!==Va||Ga.z!==Mb||Ga.w!==dd)Q.vertexAttrib4f(Oc,tc,Va,Mb,dd),Ga.x=tc,Ga.y=Va,Ga.z=Mb,Ga.w=dd;F.buffer=q.colorBuffer;Qa=!1;Aa=null;kb=0;ub=!1;rb=Bb=0;uc=1;vb=0;wd=5126;ed=Jc=Ed=rc=0;Gb(F)?(Qa=!0,Aa=ea.createStream(34962,F),wd=Aa.dtype):(Aa=ea.getBuffer(F))?wd=Aa.dtype:"constant"in F?(uc=2,"number"===typeof F.constant?(Ed=F.constant,Jc=ed=rc=0):(Ed=0<F.constant.length?F.constant[0]:0,Jc=1<F.constant.length?F.constant[1]:0,ed=2<F.constant.length?F.constant[2]:0,rc=3<F.constant.length?
F.constant[3]:0)):(Aa=Gb(F.buffer)?ea.createStream(34962,F.buffer):ea.getBuffer(F.buffer),wd="type"in F?sa[F.type]:Aa.dtype,ub=!!F.normalized,rb=F.size|0,Bb=F.offset|0,vb=F.stride|0,kb=F.divisor|0);fd=ca.location;Vb=Cb[fd];if(1===uc){Vb.buffer||Q.enableVertexAttribArray(fd);bc=rb||4;if(Vb.type!==wd||Vb.size!==bc||Vb.buffer!==Aa||Vb.normalized!==ub||Vb.offset!==Bb||Vb.stride!==vb)Q.bindBuffer(34962,Aa.buffer),Q.vertexAttribPointer(fd,bc,wd,ub,vb,Bb),Vb.type=wd,Vb.size=bc,Vb.buffer=Aa,Vb.normalized=
ub,Vb.offset=Bb,Vb.stride=vb;Vb.divisor!==kb&&(g.vertexAttribDivisorANGLE(fd,kb),Vb.divisor=kb)}else if(Vb.buffer&&(Q.disableVertexAttribArray(fd),Vb.buffer=null),Vb.x!==Ed||Vb.y!==Jc||Vb.z!==ed||Vb.w!==rc)Q.vertexAttrib4f(fd,Ed,Jc,ed,rc),Vb.x=Ed,Vb.y=Jc,Vb.z=ed,Vb.w=rc;Pb=q.scale;Ha=Pb[0];lb=Pb[1];l&&Zb===Ha&&wb===lb||(Zb=Ha,wb=lb,Q.uniform2f(K.location,Ha,lb));Nb=q.scaleFract;Qb=Nb[0];gc=Nb[1];l&&ec===Qb&&Ze===gc||(ec=Qb,Ze=gc,Q.uniform2f(ja.location,Qb,gc));xc=q.translate;yc=xc[0];Kc=xc[1];l&&
Ac===yc&&$c===Kc||(Ac=yc,$c=Kc,Q.uniform2f(ka.location,yc,Kc));Sc=q.translateFract;Lc=Sc[0];Db=Sc[1];l&&Kb===Lc&&Mc===Db||(Kb=Lc,Mc=Db,Q.uniform2f(la.location,Lc,Db));Ec=q.thickness;l&&Tc===Ec||(Tc=Ec,Q.uniform1f(W.location,Ec));fc=q.depth;l&&Wc===fc||(Wc=fc,Q.uniform1f(A.location,fc));gd=w.call(this,Na,q,l);kd=gd[0];Xc=gd[1];Zd=gd[2];se=gd[3];l&&md===kd&&bf===Xc&&ke===Zd&&me===se||(md=kd,bf=Xc,ke=Zd,me=se,Q.uniform4f(Sa.location,kd,Xc,Zd,se));Md=q.dashLength;l&&Kd===Md||(Kd=Md,Q.uniform1f(J.location,
Md));id=q.opacity;l&&Bc===id||(Bc=id,Q.uniform1f(U.location,id));(od=q.dashTexture)&&"framebuffer"===od._reglType&&(od=od.color[0]);ld=od._texture;Q.uniform1i(R.location,ld.bind());cd=q.count;0<cd?Hb?g.drawElementsInstancedANGLE(5,4,Hb.type,0<<(Hb.type-5121>>1),cd):g.drawArraysInstancedANGLE(5,0,4,cd):0>cd&&(Hb?Q.drawElements(5,4,Hb.type,0<<(Hb.type-5121>>1)):Q.drawArrays(5,0,4));Na.viewportWidth=Id;Na.viewportHeight=rd;Xa&&ea.destroyStream(Ca);tb&&ea.destroyStream(gb);ab&&ea.destroyStream(za);hb&&
ea.destroyStream(va);Qa&&ea.destroyStream(Aa);ld.unbind()}V.dirty=!0;ma.setVAO(null);h&&(c.cpuTime+=performance.now()-n)},draw:function(b){var a,f,h,n,g,q,t,p,v,y,w,H,G,B,E,Z,S,da,Ea,Ka,Gd,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb,hd,Hb,pc,Wa,Rc,ac,mc,Id,rd,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb;a=na.next;a!==na.cur&&(a?Q.bindFramebuffer(36160,
a.framebuffer):Q.bindFramebuffer(36160,null),na.cur=a);if(V.dirty){var qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb;qb=$a.dither;qb!==V.dither&&(qb?Q.enable(3024):Q.disable(3024),V.dither=qb);Ya=$a.depth_func;Ya!==V.depth_func&&(Q.depthFunc(Ya),V.depth_func=Ya);Za=qa[0];lc=qa[1];if(Za!==$b[0]||lc!==$b[1])Q.depthRange(Za,lc),$b[0]=Za,$b[1]=lc;dd=$a.depth_mask;dd!==V.depth_mask&&(Q.depthMask(dd),V.depth_mask=dd);tc=mb[0];Va=mb[1];Mb=mb[2];Oc=mb[3];
if(tc!==ga[0]||Va!==ga[1]||Mb!==ga[2]||Oc!==ga[3])Q.colorMask(tc,Va,Mb,Oc),ga[0]=tc,ga[1]=Va,ga[2]=Mb,ga[3]=Oc;Ga=$a.cull_enable;Ga!==V.cull_enable&&(Ga?Q.enable(2884):Q.disable(2884),V.cull_enable=Ga);vc=$a.cull_face;vc!==V.cull_face&&(Q.cullFace(vc),V.cull_face=vc);Qa=$a.frontFace;Qa!==V.frontFace&&(Q.frontFace(Qa),V.frontFace=Qa);Aa=$a.lineWidth;Aa!==V.lineWidth&&(Q.lineWidth(Aa),V.lineWidth=Aa);kb=$a.polygonOffset_enable;kb!==V.polygonOffset_enable&&(kb?Q.enable(32823):Q.disable(32823),V.polygonOffset_enable=
kb);ub=sc[0];Bb=sc[1];if(ub!==ic[0]||Bb!==ic[1])Q.polygonOffset(ub,Bb),ic[0]=ub,ic[1]=Bb;rb=$a.sample_alpha;rb!==V.sample_alpha&&(rb?Q.enable(32926):Q.disable(32926),V.sample_alpha=rb);uc=$a.sample_enable;uc!==V.sample_enable&&(uc?Q.enable(32928):Q.disable(32928),V.sample_enable=uc);vb=td[0];wd=td[1];if(vb!==zc[0]||wd!==zc[1])Q.sampleCoverage(vb,wd),zc[0]=vb,zc[1]=wd;rc=$a.stencil_mask;rc!==V.stencil_mask&&(Q.stencilMask(rc),V.stencil_mask=rc);Ed=ha[0];Jc=ha[1];ed=ha[2];if(Ed!==Fa[0]||Jc!==Fa[1]||
ed!==Fa[2])Q.stencilFunc(Ed,Jc,ed),Fa[0]=Ed,Fa[1]=Jc,Fa[2]=ed;fd=Qc[0];Vb=Qc[1];bc=Qc[2];Pb=Qc[3];if(fd!==L[0]||Vb!==L[1]||bc!==L[2]||Pb!==L[3])Q.stencilOpSeparate(fd,Vb,bc,Pb),L[0]=fd,L[1]=Vb,L[2]=bc,L[3]=Pb;Ha=sb[0];Zb=sb[1];lb=sb[2];wb=sb[3];if(Ha!==Pc[0]||Zb!==Pc[1]||lb!==Pc[2]||wb!==Pc[3])Q.stencilOpSeparate(Ha,Zb,lb,wb),Pc[0]=Ha,Pc[1]=Zb,Pc[2]=lb,Pc[3]=wb}f=b.viewport;h=f.x|0;n=f.y|0;g="width"in f?f.width|0:Na.framebufferWidth-h;q="height"in f?f.height|0:Na.framebufferHeight-n;t=Na.viewportWidth;
Na.viewportWidth=g;p=Na.viewportHeight;Na.viewportHeight=q;Q.viewport(h,n,g,q);ia[0]=h;ia[1]=n;ia[2]=g;ia[3]=q;Q.blendColor(0,0,0,0);Ba[0]=0;Ba[1]=0;Ba[2]=0;Ba[3]=0;Q.enable(3042);V.blend_enable=!0;Q.blendEquationSeparate(32774,32774);yb[0]=32774;yb[1]=32774;Q.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;(v=d.call(this,Na,b,0))?Q.enable(2929):Q.disable(2929);V.depth_enable=v;y=b.viewport;w=y.x|0;H=y.y|0;G="width"in y?y.width|0:Na.framebufferWidth-w;B="height"in y?y.height|0:
Na.framebufferHeight-H;Q.scissor(w,H,G,B);N[0]=w;N[1]=H;N[2]=G;N[3]=B;Q.enable(3089);V.scissor_enable=!0;Q.disable(2960);V.stencil_enable=!1;if(E=V.profile)Z=performance.now(),c.count++;Q.useProgram(e.program);S=T.angle_instanced_arrays;ma.setVAO(null);X.buffer=b.positionBuffer;da=!1;Ea=null;Ka=0;Gd=!1;xe=zd=0;Me=1;Qe=0;Ad=5126;ae=Wd=Vd=Be=0;Gb(X)?(da=!0,Ea=ea.createStream(34962,X),Ad=Ea.dtype):(Ea=ea.getBuffer(X))?Ad=Ea.dtype:"constant"in X?(Me=2,"number"===typeof X.constant?(Vd=X.constant,Wd=ae=
Be=0):(Vd=0<X.constant.length?X.constant[0]:0,Wd=1<X.constant.length?X.constant[1]:0,ae=2<X.constant.length?X.constant[2]:0,Be=3<X.constant.length?X.constant[3]:0)):(Ea=Gb(X.buffer)?ea.createStream(34962,X.buffer):ea.getBuffer(X.buffer),Ad="type"in X?sa[X.type]:Ea.dtype,Gd=!!X.normalized,xe=X.size|0,zd=X.offset|0,Qe=X.stride|0,Ka=X.divisor|0);Yd=Ia.location;qd=Cb[Yd];if(1===Me){qd.buffer||Q.enableVertexAttribArray(Yd);nd=xe||2;if(qd.type!==Ad||qd.size!==nd||qd.buffer!==Ea||qd.normalized!==Gd||qd.offset!==
zd||qd.stride!==Qe)Q.bindBuffer(34962,Ea.buffer),Q.vertexAttribPointer(Yd,nd,Ad,Gd,Qe,zd),qd.type=Ad,qd.size=nd,qd.buffer=Ea,qd.normalized=Gd,qd.offset=zd,qd.stride=Qe;qd.divisor!==Ka&&(S.vertexAttribDivisorANGLE(Yd,Ka),qd.divisor=Ka)}else if(qd.buffer&&(Q.disableVertexAttribArray(Yd),qd.buffer=null),qd.x!==Vd||qd.y!==Wd||qd.z!==ae||qd.w!==Be)Q.vertexAttrib4f(Yd,Vd,Wd,ae,Be),qd.x=Vd,qd.y=Wd,qd.z=ae,qd.w=Be;ra.buffer=b.positionBuffer;vd=!1;ad=null;sd=0;Uc=!1;Nc=Dd=0;Ic=1;qc=0;fb=5126;Wa=pc=Hb=hd=0;
Gb(ra)?(vd=!0,ad=ea.createStream(34962,ra),fb=ad.dtype):(ad=ea.getBuffer(ra))?fb=ad.dtype:"constant"in ra?(Ic=2,"number"===typeof ra.constant?(Hb=ra.constant,pc=Wa=hd=0):(Hb=0<ra.constant.length?ra.constant[0]:0,pc=1<ra.constant.length?ra.constant[1]:0,Wa=2<ra.constant.length?ra.constant[2]:0,hd=3<ra.constant.length?ra.constant[3]:0)):(ad=Gb(ra.buffer)?ea.createStream(34962,ra.buffer):ea.getBuffer(ra.buffer),fb="type"in ra?sa[ra.type]:ad.dtype,Uc=!!ra.normalized,Nc=ra.size|0,Dd=ra.offset|0,qc=ra.stride|
0,sd=ra.divisor|0);Rc=u.location;ac=Cb[Rc];if(1===Ic){ac.buffer||Q.enableVertexAttribArray(Rc);mc=Nc||2;if(ac.type!==fb||ac.size!==mc||ac.buffer!==ad||ac.normalized!==Uc||ac.offset!==Dd||ac.stride!==qc)Q.bindBuffer(34962,ad.buffer),Q.vertexAttribPointer(Rc,mc,fb,Uc,qc,Dd),ac.type=fb,ac.size=mc,ac.buffer=ad,ac.normalized=Uc,ac.offset=Dd,ac.stride=qc;ac.divisor!==sd&&(S.vertexAttribDivisorANGLE(Rc,sd),ac.divisor=sd)}else if(ac.buffer&&(Q.disableVertexAttribArray(Rc),ac.buffer=null),ac.x!==Hb||ac.y!==
pc||ac.z!==Wa||ac.w!==hd)Q.vertexAttrib4f(Rc,Hb,pc,Wa,hd),ac.x=Hb,ac.y=pc,ac.z=Wa,ac.w=hd;fa.buffer=b.positionFractBuffer;Id=!1;rd=null;Fc=0;cc=!1;Yc=Cc=0;Yb=1;Gc=0;Xa=5126;Ta=Ib=ud=Ca=0;Gb(fa)?(Id=!0,rd=ea.createStream(34962,fa),Xa=rd.dtype):(rd=ea.getBuffer(fa))?Xa=rd.dtype:"constant"in fa?(Yb=2,"number"===typeof fa.constant?(ud=fa.constant,Ib=Ta=Ca=0):(ud=0<fa.constant.length?fa.constant[0]:0,Ib=1<fa.constant.length?fa.constant[1]:0,Ta=2<fa.constant.length?fa.constant[2]:0,Ca=3<fa.constant.length?
fa.constant[3]:0)):(rd=Gb(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),Xa="type"in fa?sa[fa.type]:rd.dtype,cc=!!fa.normalized,Yc=fa.size|0,Cc=fa.offset|0,Gc=fa.stride|0,Fc=fa.divisor|0);Ub=x.location;bb=Cb[Ub];if(1===Yb){bb.buffer||Q.enableVertexAttribArray(Ub);Dc=Yc||2;if(bb.type!==Xa||bb.size!==Dc||bb.buffer!==rd||bb.normalized!==cc||bb.offset!==Cc||bb.stride!==Gc)Q.bindBuffer(34962,rd.buffer),Q.vertexAttribPointer(Ub,Dc,Xa,cc,Gc,Cc),bb.type=Xa,bb.size=Dc,bb.buffer=rd,bb.normalized=
cc,bb.offset=Cc,bb.stride=Gc;bb.divisor!==Fc&&(S.vertexAttribDivisorANGLE(Ub,Fc),bb.divisor=Fc)}else if(bb.buffer&&(Q.disableVertexAttribArray(Ub),bb.buffer=null),bb.x!==ud||bb.y!==Ib||bb.z!==Ta||bb.w!==Ca)Q.vertexAttrib4f(Ub,ud,Ib,Ta,Ca),bb.x=ud,bb.y=Ib,bb.z=Ta,bb.w=Ca;M.buffer=b.positionFractBuffer;Wb=!1;ye=null;jc=0;Rb=!1;Sb=jd=0;Oa=1;nb=0;tb=5126;Xb=nc=Pa=gb=0;Gb(M)?(Wb=!0,ye=ea.createStream(34962,M),tb=ye.dtype):(ye=ea.getBuffer(M))?tb=ye.dtype:"constant"in M?(Oa=2,"number"===typeof M.constant?
(Pa=M.constant,nc=Xb=gb=0):(Pa=0<M.constant.length?M.constant[0]:0,nc=1<M.constant.length?M.constant[1]:0,Xb=2<M.constant.length?M.constant[2]:0,gb=3<M.constant.length?M.constant[3]:0)):(ye=Gb(M.buffer)?ea.createStream(34962,M.buffer):ea.getBuffer(M.buffer),tb="type"in M?sa[M.type]:ye.dtype,Rb=!!M.normalized,Sb=M.size|0,jd=M.offset|0,nb=M.stride|0,jc=M.divisor|0);bd=r.location;cb=Cb[bd];if(1===Oa){cb.buffer||Q.enableVertexAttribArray(bd);kc=Sb||2;if(cb.type!==tb||cb.size!==kc||cb.buffer!==ye||cb.normalized!==
Rb||cb.offset!==jd||cb.stride!==nb)Q.bindBuffer(34962,ye.buffer),Q.vertexAttribPointer(bd,kc,tb,Rb,nb,jd),cb.type=tb,cb.size=kc,cb.buffer=ye,cb.normalized=Rb,cb.offset=jd,cb.stride=nb;cb.divisor!==jc&&(S.vertexAttribDivisorANGLE(bd,jc),cb.divisor=jc)}else if(cb.buffer&&(Q.disableVertexAttribArray(bd),cb.buffer=null),cb.x!==Pa||cb.y!==nc||cb.z!==Xb||cb.w!==gb)Q.vertexAttrib4f(bd,Pa,nc,Xb,gb),cb.x=Pa,cb.y=nc,cb.z=Xb,cb.w=gb;F.buffer=b.colorBuffer;Zc=!1;hc=null;ib=0;jb=!1;ob=ta=0;wa=1;Ua=0;ab=5126;Ab=
Ma=db=za=0;Gb(F)?(Zc=!0,hc=ea.createStream(34962,F),ab=hc.dtype):(hc=ea.getBuffer(F))?ab=hc.dtype:"constant"in F?(wa=2,"number"===typeof F.constant?(db=F.constant,Ma=Ab=za=0):(db=0<F.constant.length?F.constant[0]:0,Ma=1<F.constant.length?F.constant[1]:0,Ab=2<F.constant.length?F.constant[2]:0,za=3<F.constant.length?F.constant[3]:0)):(hc=Gb(F.buffer)?ea.createStream(34962,F.buffer):ea.getBuffer(F.buffer),ab="type"in F?sa[F.type]:hc.dtype,jb=!!F.normalized,ob=F.size|0,ta=F.offset|0,Ua=F.stride|0,ib=
F.divisor|0);zb=ca.location;Ra=Cb[zb];if(1===wa){Ra.buffer||Q.enableVertexAttribArray(zb);Hc=ob||4;if(Ra.type!==ab||Ra.size!==Hc||Ra.buffer!==hc||Ra.normalized!==jb||Ra.offset!==ta||Ra.stride!==Ua)Q.bindBuffer(34962,hc.buffer),Q.vertexAttribPointer(zb,Hc,ab,jb,Ua,ta),Ra.type=ab,Ra.size=Hc,Ra.buffer=hc,Ra.normalized=jb,Ra.offset=ta,Ra.stride=Ua;Ra.divisor!==ib&&(S.vertexAttribDivisorANGLE(zb,ib),Ra.divisor=ib)}else if(Ra.buffer&&(Q.disableVertexAttribArray(zb),Ra.buffer=null),Ra.x!==db||Ra.y!==Ma||
Ra.z!==Ab||Ra.w!==za)Q.vertexAttrib4f(zb,db,Ma,Ab,za),Ra.x=db,Ra.y=Ma,Ra.z=Ab,Ra.w=za;Jb=aa.location;Lb=Cb[Jb];Lb.buffer||Q.enableVertexAttribArray(Jb);if(5126!==Lb.type||1!==Lb.size||Lb.buffer!==m||!1!==Lb.normalized||0!==Lb.offset||8!==Lb.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Jb,1,5126,!1,8,0),Lb.type=5126,Lb.size=1,Lb.buffer=m,Lb.normalized=!1,Lb.offset=0,Lb.stride=8;0!==Lb.divisor&&(S.vertexAttribDivisorANGLE(Jb,0),Lb.divisor=0);Tb=I.location;ua=Cb[Tb];ua.buffer||Q.enableVertexAttribArray(Tb);
if(5126!==ua.type||1!==ua.size||ua.buffer!==k||!1!==ua.normalized||4!==ua.offset||8!==ua.stride)Q.bindBuffer(34962,k.buffer),Q.vertexAttribPointer(Tb,1,5126,!1,8,4),ua.type=5126,ua.size=1,ua.buffer=k,ua.normalized=!1,ua.offset=4,ua.stride=8;0!==ua.divisor&&(S.vertexAttribDivisorANGLE(Tb,0),ua.divisor=0);Jd=b.scale;Q.uniform2f(K.location,Jd[0],Jd[1]);La=b.scaleFract;Q.uniform2f(ja.location,La[0],La[1]);Ob=b.translate;Q.uniform2f(ka.location,Ob[0],Ob[1]);eb=b.translateFract;Q.uniform2f(la.location,
eb[0],eb[1]);Q.uniform1f(W.location,b.thickness);Q.uniform1f(A.location,b.depth);hb=l.call(this,Na,b,0);Q.uniform4f(Sa.location,hb[0],hb[1],hb[2],hb[3]);Q.uniform1f(J.location,b.dashLength);Q.uniform1f(U.location,b.opacity);(va=b.dashTexture)&&"framebuffer"===va._reglType&&(va=va.color[0]);dc=va._texture;Q.uniform1i(R.location,dc.bind());(Da=P.elements)?Q.bindBuffer(34963,Da.buffer.buffer):ma.currentVAO&&(Da=O.getElements(ma.currentVAO.elements))&&Q.bindBuffer(34963,Da.buffer.buffer);pb=b.count;0<
pb?Da?S.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),pb):S.drawArraysInstancedANGLE(5,0,4,pb):0>pb&&(Da?Q.drawElements(5,4,Da.type,0<<(Da.type-5121>>1)):Q.drawArrays(5,0,4));V.dirty=!0;ma.setVAO(null);Na.viewportWidth=t;Na.viewportHeight=p;E&&(c.cpuTime+=performance.now()-Z);da&&ea.destroyStream(Ea);vd&&ea.destroyStream(ad);Id&&ea.destroyStream(rd);Wb&&ea.destroyStream(ye);Zc&&ea.destroyStream(hc);dc.unbind()},scope:function(a,l,d){var e,v,w,u,G,D,z,x,Ia,r,A,oa,N,J,I,L,R,ca,O,K,Q,T,
aa,Y,ha,U,ia,W,ga,ma,sc,ka,Fa,na,qa,td,Nc,Ic,qc,fb,zc,Hb,pc,Wa,ja,ac,mc,sb,Pc,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,$b,Ib,Ta,Ub,bb,Ba,Wb,la,ic,Rb,Sa,Sb,Oa,nb,tb,gb,Pa,nc,Xb,mb,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Qc,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,yb,rc,Cb,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,
le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe;e=a.viewport;v=e.x|0;w=e.y|0;u="width"in e?e.width|0:Na.framebufferWidth-v;G="height"in e?e.height|0:Na.framebufferHeight-w;D=Na.viewportWidth;Na.viewportWidth=u;z=Na.viewportHeight;Na.viewportHeight=G;x=E[0];E[0]=v;Ia=E[1];E[1]=w;r=E[2];E[2]=u;A=E[3];E[3]=G;oa=da[0];da[0]=0;N=da[1];da[1]=0;J=da[2];da[2]=0;I=da[3];da[3]=0;L=$a.blend_enable;$a.blend_enable=!0;R=Ea[0];Ea[0]=32774;ca=Ea[1];Ea[1]=32774;O=Ka[0];
Ka[0]=770;K=Ka[1];Ka[1]=771;Q=Ka[2];Ka[2]=773;T=Ka[3];Ka[3]=1;aa=g.call(this,Na,a,d);Y=$a.depth_enable;$a.depth_enable=aa;ha=a.viewport;U=ha.x|0;ia=ha.y|0;W="width"in ha?ha.width|0:Na.framebufferWidth-U;ga="height"in ha?ha.height|0:Na.framebufferHeight-ia;ma=Z[0];Z[0]=U;sc=Z[1];Z[1]=ia;ka=Z[2];Z[2]=W;Fa=Z[3];Z[3]=ga;na=$a.scissor_enable;$a.scissor_enable=!0;qa=$a.stencil_enable;$a.stencil_enable=!1;if(td=V.profile)Nc=performance.now(),c.count++;Ic=P.offset;P.offset=0;qc=P.count;P.count=4;fb=a.count;
zc=P.instances;P.instances=fb;Hb=P.primitive;P.primitive=5;pc=a.dashLength;Wa=B[23];B[23]=pc;ja=a.dashTexture;ac=B[24];B[24]=ja;mc=a.depth;sb=B[22];B[22]=mc;Pc=a.id;Fc=B[31];B[31]=Pc;cc=a.miterLimit;Cc=B[32];B[32]=cc;Yc=b.call(this,Na,a,d);Yb=B[33];B[33]=Yc;Gc=a.opacity;Xa=B[10];B[10]=Gc;Ca=Na.pixelRatio;$b=B[34];B[34]=Ca;Ib=a.scale;Ta=B[6];B[6]=Ib;Ub=a.scaleFract;bb=B[7];B[7]=Ub;Ba=a.thickness;Wb=B[21];B[21]=Ba;la=a.translate;ic=B[8];B[8]=la;Rb=a.translateFract;Sa=B[9];B[9]=Rb;Sb=p.call(this,Na,
a,d);Oa=B[3];B[3]=Sb;X.buffer=a.positionBuffer;nb=!1;tb=null;gb=0;Pa=!1;Xb=nc=0;mb=1;cb=0;kc=5126;jb=ib=hc=Zc=0;Gb(X)?(nb=!0,tb=ea.createStream(34962,X),kc=tb.dtype):(tb=ea.getBuffer(X))?kc=tb.dtype:"constant"in X?(mb=2,"number"===typeof X.constant?(hc=X.constant,ib=jb=Zc=0):(hc=0<X.constant.length?X.constant[0]:0,ib=1<X.constant.length?X.constant[1]:0,jb=2<X.constant.length?X.constant[2]:0,Zc=3<X.constant.length?X.constant[3]:0)):(tb=Gb(X.buffer)?ea.createStream(34962,X.buffer):ea.getBuffer(X.buffer),
kc="type"in X?sa[X.type]:tb.dtype,Pa=!!X.normalized,Xb=X.size|0,nc=X.offset|0,cb=X.stride|0,gb=X.divisor|0);ta=H.buffer;H.buffer=tb;ob=H.divisor;H.divisor=gb;wa=H.normalized;H.normalized=Pa;Ua=H.offset;H.offset=nc;ab=H.size;H.size=Xb;za=H.state;H.state=mb;db=H.stride;H.stride=cb;Ma=H.type;H.type=kc;Ab=H.w;H.w=Zc;zb=H.x;H.x=hc;Ra=H.y;H.y=ib;Hc=H.z;H.z=jb;fa.buffer=a.positionFractBuffer;Jb=!1;Lb=null;Tb=0;ua=!1;La=Qc=0;Ob=1;eb=0;hb=5126;pb=Da=dc=va=0;Gb(fa)?(Jb=!0,Lb=ea.createStream(34962,fa),hb=Lb.dtype):
(Lb=ea.getBuffer(fa))?hb=Lb.dtype:"constant"in fa?(Ob=2,"number"===typeof fa.constant?(dc=fa.constant,Da=pb=va=0):(dc=0<fa.constant.length?fa.constant[0]:0,Da=1<fa.constant.length?fa.constant[1]:0,pb=2<fa.constant.length?fa.constant[2]:0,va=3<fa.constant.length?fa.constant[3]:0)):(Lb=Gb(fa.buffer)?ea.createStream(34962,fa.buffer):ea.getBuffer(fa.buffer),hb="type"in fa?sa[fa.type]:Lb.dtype,ua=!!fa.normalized,La=fa.size|0,Qc=fa.offset|0,eb=fa.stride|0,Tb=fa.divisor|0);qb=y.buffer;y.buffer=Lb;Ya=y.divisor;
y.divisor=Tb;Za=y.normalized;y.normalized=ua;lc=y.offset;y.offset=Qc;dd=y.size;y.size=La;tc=y.state;y.state=Ob;Va=y.stride;y.stride=eb;Mb=y.type;y.type=hb;Oc=y.w;y.w=va;Ga=y.x;y.x=dc;vc=y.y;y.y=Da;Qa=y.z;y.z=pb;ra.buffer=a.positionBuffer;Aa=!1;kb=null;ub=0;Bb=!1;uc=rb=0;vb=1;yb=0;rc=5126;fd=ed=Jc=Cb=0;Gb(ra)?(Aa=!0,kb=ea.createStream(34962,ra),rc=kb.dtype):(kb=ea.getBuffer(ra))?rc=kb.dtype:"constant"in ra?(vb=2,"number"===typeof ra.constant?(Jc=ra.constant,ed=fd=Cb=0):(Jc=0<ra.constant.length?ra.constant[0]:
0,ed=1<ra.constant.length?ra.constant[1]:0,fd=2<ra.constant.length?ra.constant[2]:0,Cb=3<ra.constant.length?ra.constant[3]:0)):(kb=Gb(ra.buffer)?ea.createStream(34962,ra.buffer):ea.getBuffer(ra.buffer),rc="type"in ra?sa[ra.type]:kb.dtype,Bb=!!ra.normalized,uc=ra.size|0,rb=ra.offset|0,yb=ra.stride|0,ub=ra.divisor|0);Vb=h.buffer;h.buffer=kb;bc=h.divisor;h.divisor=ub;Pb=h.normalized;h.normalized=Bb;Ha=h.offset;h.offset=rb;Zb=h.size;h.size=uc;lb=h.state;h.state=vb;wb=h.stride;h.stride=yb;Nb=h.type;h.type=
rc;Qb=h.w;h.w=Cb;ec=h.x;h.x=Jc;gc=h.y;h.y=ed;Ze=h.z;h.z=fd;M.buffer=a.positionFractBuffer;xc=!1;yc=null;Ac=0;Kc=!1;Sc=$c=0;Lc=1;Kb=0;Db=5126;fc=Tc=Ec=Mc=0;Gb(M)?(xc=!0,yc=ea.createStream(34962,M),Db=yc.dtype):(yc=ea.getBuffer(M))?Db=yc.dtype:"constant"in M?(Lc=2,"number"===typeof M.constant?(Ec=M.constant,Tc=fc=Mc=0):(Ec=0<M.constant.length?M.constant[0]:0,Tc=1<M.constant.length?M.constant[1]:0,fc=2<M.constant.length?M.constant[2]:0,Mc=3<M.constant.length?M.constant[3]:0)):(yc=Gb(M.buffer)?ea.createStream(34962,
M.buffer):ea.getBuffer(M.buffer),Db="type"in M?sa[M.type]:yc.dtype,Kc=!!M.normalized,Sc=M.size|0,$c=M.offset|0,Kb=M.stride|0,Ac=M.divisor|0);Wc=f.buffer;f.buffer=yc;gd=f.divisor;f.divisor=Ac;kd=f.normalized;f.normalized=Kc;md=f.offset;f.offset=$c;Xc=f.size;f.size=Sc;bf=f.state;f.state=Lc;Zd=f.stride;f.stride=Kb;ke=f.type;f.type=Db;se=f.w;f.w=Mc;me=f.x;f.x=Ec;Md=f.y;f.y=Tc;Kd=f.z;f.z=fc;F.buffer=a.colorBuffer;id=!1;Bc=null;od=0;ld=!1;pd=cd=0;Fd=1;Hd=0;te=5126;fe=ne=Ae=ze=0;Gb(F)?(id=!0,Bc=ea.createStream(34962,
F),te=Bc.dtype):(Bc=ea.getBuffer(F))?te=Bc.dtype:"constant"in F?(Fd=2,"number"===typeof F.constant?(Ae=F.constant,ne=fe=ze=0):(Ae=0<F.constant.length?F.constant[0]:0,ne=1<F.constant.length?F.constant[1]:0,fe=2<F.constant.length?F.constant[2]:0,ze=3<F.constant.length?F.constant[3]:0)):(Bc=Gb(F.buffer)?ea.createStream(34962,F.buffer):ea.getBuffer(F.buffer),te="type"in F?sa[F.type]:Bc.dtype,ld=!!F.normalized,pd=F.size|0,cd=F.offset|0,Hd=F.stride|0,od=F.divisor|0);de=n.buffer;n.buffer=Bc;pe=n.divisor;
n.divisor=od;be=n.normalized;n.normalized=ld;ie=n.offset;n.offset=cd;wc=n.size;n.size=pd;Vc=n.state;n.state=Fd;qe=n.stride;n.stride=Hd;le=n.type;n.type=te;Ld=n.w;n.w=ze;Pd=n.x;n.x=Ae;Qd=n.y;n.y=ne;Rd=n.z;n.z=fe;je=q.buffer;q.buffer=m;vf=q.divisor;q.divisor=0;Ce=q.normalized;q.normalized=!1;oe=q.offset;q.offset=0;Re=q.size;q.size=0;Se=q.state;q.state=1;Ne=q.stride;q.stride=8;re=q.type;q.type=5126;Fe=q.w;q.w=0;He=q.x;q.x=0;Ie=q.y;q.y=0;Je=q.z;q.z=0;Ge=t.buffer;t.buffer=k;Nd=t.divisor;t.divisor=0;Ud=
t.normalized;t.normalized=!1;$d=t.offset;t.offset=4;ce=t.size;t.size=0;Ke=t.state;t.state=1;Bd=t.stride;t.stride=8;Sd=t.type;t.type=5126;De=t.w;t.w=0;Le=t.x;t.x=0;cf=t.y;t.y=0;af=t.z;t.z=0;Te=S.vert;S.vert=20;Oe=S.frag;S.frag=19;V.dirty=!0;l(Na,a,d);Na.viewportWidth=D;Na.viewportHeight=z;E[0]=x;E[1]=Ia;E[2]=r;E[3]=A;da[0]=oa;da[1]=N;da[2]=J;da[3]=I;$a.blend_enable=L;Ea[0]=R;Ea[1]=ca;Ka[0]=O;Ka[1]=K;Ka[2]=Q;Ka[3]=T;$a.depth_enable=Y;Z[0]=ma;Z[1]=sc;Z[2]=ka;Z[3]=Fa;$a.scissor_enable=na;$a.stencil_enable=
qa;td&&(c.cpuTime+=performance.now()-Nc);P.offset=Ic;P.count=qc;P.instances=zc;P.primitive=Hb;B[23]=Wa;B[24]=ac;B[22]=sb;B[31]=Fc;B[32]=Cc;B[33]=Yb;B[10]=Xa;B[34]=$b;B[6]=Ta;B[7]=bb;B[21]=Wb;B[8]=ic;B[9]=Sa;B[3]=Oa;nb&&ea.destroyStream(tb);H.buffer=ta;H.divisor=ob;H.normalized=wa;H.offset=Ua;H.size=ab;H.state=za;H.stride=db;H.type=Ma;H.w=Ab;H.x=zb;H.y=Ra;H.z=Hc;Jb&&ea.destroyStream(Lb);y.buffer=qb;y.divisor=Ya;y.normalized=Za;y.offset=lc;y.size=dd;y.state=tc;y.stride=Va;y.type=Mb;y.w=Oc;y.x=Ga;y.y=
vc;y.z=Qa;Aa&&ea.destroyStream(kb);h.buffer=Vb;h.divisor=bc;h.normalized=Pb;h.offset=Ha;h.size=Zb;h.state=lb;h.stride=wb;h.type=Nb;h.w=Qb;h.x=ec;h.y=gc;h.z=Ze;xc&&ea.destroyStream(yc);f.buffer=Wc;f.divisor=gd;f.normalized=kd;f.offset=md;f.size=Xc;f.state=bf;f.stride=Zd;f.type=ke;f.w=se;f.x=me;f.y=Md;f.z=Kd;id&&ea.destroyStream(Bc);n.buffer=de;n.divisor=pe;n.normalized=be;n.offset=ie;n.size=wc;n.state=Vc;n.stride=qe;n.type=le;n.w=Ld;n.x=Pd;n.y=Qd;n.z=Rd;q.buffer=je;q.divisor=vf;q.normalized=Ce;q.offset=
oe;q.size=Re;q.state=Se;q.stride=Ne;q.type=re;q.w=Fe;q.x=He;q.y=Ie;q.z=Je;t.buffer=Ge;t.divisor=Nd;t.normalized=Ud;t.offset=$d;t.size=ce;t.state=Ke;t.stride=Bd;t.type=Sd;t.w=De;t.x=Le;t.y=cf;t.z=af;S.vert=Te;S.frag=Oe;V.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,c,d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,Ia,x,u,r,ca,J,R,A,aa,I,U,K,ja,W,ka,la,Sa,Cb,ea,Na,V){var P,
O,T,na,Q,Gb,$a,S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa,$b,sc,ic,td,zc,Z,N,ha,Fa,sb,Pc,Qc,L,E,ia,sa,X,fa,ra,M,F,ba,xa,ya,Ja,C;P=a.attributes;O=a.buffer;T=a.context;na=a.current;Q=a.draw;Gb=a.elements;$a=a.extensions;S=a.framebuffer;B=a.gl;ma=a.isBufferArgs;da=a.next;Ba=a.shader;Ea=a.uniforms;yb=a.vao;Ka=da.blend_color;Y=na.blend_color;mb=da.blend_equation;ga=na.blend_equation;qa=da.blend_func;$b=na.blend_func;sc=da.colorMask;ic=na.colorMask;td=da.depth_range;zc=na.depth_range;Z=da.polygonOffset_offset;N=
na.polygonOffset_offset;ha=da.sample_coverage;Fa=na.sample_coverage;sb=da.scissor_box;Pc=na.scissor_box;Qc=da.stencil_func;L=na.stencil_func;E=da.stencil_opBack;ia=na.stencil_opBack;sa=da.stencil_opFront;X=na.stencil_opFront;fa=da.viewport;ra=na.viewport;M={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};F={divisor:1,offset:0,stride:4};ba={divisor:1,offset:8,stride:8};xa={divisor:1,offset:4,stride:4};ya={divisor:1,offset:16,stride:8};Ja={divisor:1,offset:24,
stride:8};C={divisor:1,offset:0,stride:8};return{batch:function(b,a){var f,h,n,g,l,q;f=S.next;f!==S.cur&&(f?B.bindFramebuffer(36160,f.framebuffer):B.bindFramebuffer(36160,null),S.cur=f);if(na.dirty){var t,p,d,e,v,y,H,G,D,z,fa,qa,Ea,sb,Ba,Vd,Wd,Ka,mb,qd,nd,vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb;t=da.dither;t!==na.dither&&(t?B.enable(3024):B.disable(3024),na.dither=t);p=da.depth_func;p!==na.depth_func&&(B.depthFunc(p),na.depth_func=p);d=td[0];e=td[1];if(d!==zc[0]||e!==zc[1])B.depthRange(d,e),zc[0]=d,zc[1]=e;v=
da.depth_mask;v!==na.depth_mask&&(B.depthMask(v),na.depth_mask=v);y=sc[0];H=sc[1];G=sc[2];D=sc[3];if(y!==ic[0]||H!==ic[1]||G!==ic[2]||D!==ic[3])B.colorMask(y,H,G,D),ic[0]=y,ic[1]=H,ic[2]=G,ic[3]=D;z=da.frontFace;z!==na.frontFace&&(B.frontFace(z),na.frontFace=z);fa=da.lineWidth;fa!==na.lineWidth&&(B.lineWidth(fa),na.lineWidth=fa);qa=da.polygonOffset_enable;qa!==na.polygonOffset_enable&&(qa?B.enable(32823):B.disable(32823),na.polygonOffset_enable=qa);Ea=Z[0];sb=Z[1];if(Ea!==N[0]||sb!==N[1])B.polygonOffset(Ea,
sb),N[0]=Ea,N[1]=sb;Ba=da.sample_alpha;Ba!==na.sample_alpha&&(Ba?B.enable(32926):B.disable(32926),na.sample_alpha=Ba);Vd=da.sample_enable;Vd!==na.sample_enable&&(Vd?B.enable(32928):B.disable(32928),na.sample_enable=Vd);Wd=ha[0];Ka=ha[1];if(Wd!==Fa[0]||Ka!==Fa[1])B.sampleCoverage(Wd,Ka),Fa[0]=Wd,Fa[1]=Ka;mb=da.stencil_mask;mb!==na.stencil_mask&&(B.stencilMask(mb),na.stencil_mask=mb);qd=Qc[0];nd=Qc[1];vd=Qc[2];if(qd!==L[0]||nd!==L[1]||vd!==L[2])B.stencilFunc(qd,nd,vd),L[0]=qd,L[1]=nd,L[2]=vd;ad=sa[0];
sd=sa[1];Uc=sa[2];Dd=sa[3];if(ad!==X[0]||sd!==X[1]||Uc!==X[2]||Dd!==X[3])B.stencilOpSeparate(ad,sd,Uc,Dd),X[0]=ad,X[1]=sd,X[2]=Uc,X[3]=Dd;Nc=E[0];Ic=E[1];qc=E[2];fb=E[3];if(Nc!==ia[0]||Ic!==ia[1]||qc!==ia[2]||fb!==ia[3])B.stencilOpSeparate(Nc,Ic,qc,fb),ia[0]=Nc,ia[1]=Ic,ia[2]=qc,ia[3]=fb}B.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;B.enable(3042);na.blend_enable=!0;B.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;B.blendFuncSeparate(770,771,773,1);$b[0]=770;$b[1]=771;$b[2]=773;$b[3]=
1;B.enable(2884);na.cull_enable=!0;B.cullFace(1029);na.cull_face=1029;B.enable(3089);na.scissor_enable=!0;B.disable(2960);na.stencil_enable=!1;if(h=na.profile)n=performance.now(),c.count+=a;B.useProgram(w.program);g=$a.angle_instanced_arrays;var hd,Hb,pc,Wa,Rc;yb.setVAO(null);hd=U.location;Hb=P[hd];Hb.buffer||B.enableVertexAttribArray(hd);if(5126!==Hb.type||1!==Hb.size||Hb.buffer!==m||!1!==Hb.normalized||0!==Hb.offset||8!==Hb.stride)B.bindBuffer(34962,m.buffer),B.vertexAttribPointer(hd,1,5126,!1,
8,0),Hb.type=5126,Hb.size=1,Hb.buffer=m,Hb.normalized=!1,Hb.offset=0,Hb.stride=8;0!==Hb.divisor&&(g.vertexAttribDivisorANGLE(hd,0),Hb.divisor=0);pc=K.location;Wa=P[pc];Wa.buffer||B.enableVertexAttribArray(pc);if(5126!==Wa.type||1!==Wa.size||Wa.buffer!==k||!1!==Wa.normalized||4!==Wa.offset||8!==Wa.stride)B.bindBuffer(34962,k.buffer),B.vertexAttribPointer(pc,1,5126,!1,8,4),Wa.type=5126,Wa.size=1,Wa.buffer=k,Wa.normalized=!1,Wa.offset=4,Wa.stride=8;0!==Wa.divisor&&(g.vertexAttribDivisorANGLE(pc,0),Wa.divisor=
0);(Rc=Q.elements)?B.bindBuffer(34963,Rc.buffer.buffer):yb.currentVAO&&(Rc=Gb.getElements(yb.currentVAO.elements))&&B.bindBuffer(34963,Rc.buffer.buffer);for(l=0;l<a;++l){q=b[l];var ac,mc,Id,rd,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,
Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc;ac=q.viewport;mc=ac.x|0;Id=ac.y|0;rd="width"in ac?ac.width|0:T.framebufferWidth-mc;Fc="height"in ac?ac.height|0:T.framebufferHeight-Id;cc=T.viewportWidth;T.viewportWidth=rd;Cc=T.viewportHeight;T.viewportHeight=Fc;B.viewport(mc,Id,rd,Fc);ra[0]=mc;ra[1]=Id;ra[2]=rd;ra[3]=Fc;(Yc=Ia.call(this,T,q,l))?B.enable(2929):B.disable(2929);na.depth_enable=Yc;Yb=q.viewport;Gc=Yb.x|0;Xa=Yb.y|0;Ca="width"in
Yb?Yb.width|0:T.framebufferWidth-Gc;ud="height"in Yb?Yb.height|0:T.framebufferHeight-Xa;B.scissor(Gc,Xa,Ca,ud);Pc[0]=Gc;Pc[1]=Xa;Pc[2]=Ca;Pc[3]=ud;ba.buffer=q.positionBuffer;Ib=!1;Ta=null;Ub=0;bb=!1;Wb=Dc=0;ye=1;jc=0;Rb=5126;nb=Oa=Sb=jd=0;ma(ba)?(Ib=!0,Ta=O.createStream(34962,ba),Rb=Ta.dtype):(Ta=O.getBuffer(ba))?Rb=Ta.dtype:"constant"in ba?(ye=2,"number"===typeof ba.constant?(Sb=ba.constant,Oa=nb=jd=0):(Sb=0<ba.constant.length?ba.constant[0]:0,Oa=1<ba.constant.length?ba.constant[1]:0,nb=2<ba.constant.length?
ba.constant[2]:0,jd=3<ba.constant.length?ba.constant[3]:0)):(Ta=ma(ba.buffer)?O.createStream(34962,ba.buffer):O.getBuffer(ba.buffer),Rb="type"in ba?M[ba.type]:Ta.dtype,bb=!!ba.normalized,Wb=ba.size|0,Dc=ba.offset|0,jc=ba.stride|0,Ub=ba.divisor|0);tb=ca.location;gb=P[tb];if(1===ye){gb.buffer||B.enableVertexAttribArray(tb);Pa=Wb||2;if(gb.type!==Rb||gb.size!==Pa||gb.buffer!==Ta||gb.normalized!==bb||gb.offset!==Dc||gb.stride!==jc)B.bindBuffer(34962,Ta.buffer),B.vertexAttribPointer(tb,Pa,Rb,bb,jc,Dc),
gb.type=Rb,gb.size=Pa,gb.buffer=Ta,gb.normalized=bb,gb.offset=Dc,gb.stride=jc;gb.divisor!==Ub&&(g.vertexAttribDivisorANGLE(tb,Ub),gb.divisor=Ub)}else if(gb.buffer&&(B.disableVertexAttribArray(tb),gb.buffer=null),gb.x!==Sb||gb.y!==Oa||gb.z!==nb||gb.w!==jd)B.vertexAttrib4f(tb,Sb,Oa,nb,jd),gb.x=Sb,gb.y=Oa,gb.z=nb,gb.w=jd;ya.buffer=q.positionBuffer;nc=!1;Xb=null;bd=0;cb=!1;Zc=kc=0;hc=1;ib=0;jb=5126;Ua=wa=ob=ta=0;ma(ya)?(nc=!0,Xb=O.createStream(34962,ya),jb=Xb.dtype):(Xb=O.getBuffer(ya))?jb=Xb.dtype:"constant"in
ya?(hc=2,"number"===typeof ya.constant?(ob=ya.constant,wa=Ua=ta=0):(ob=0<ya.constant.length?ya.constant[0]:0,wa=1<ya.constant.length?ya.constant[1]:0,Ua=2<ya.constant.length?ya.constant[2]:0,ta=3<ya.constant.length?ya.constant[3]:0)):(Xb=ma(ya.buffer)?O.createStream(34962,ya.buffer):O.getBuffer(ya.buffer),jb="type"in ya?M[ya.type]:Xb.dtype,cb=!!ya.normalized,Zc=ya.size|0,kc=ya.offset|0,ib=ya.stride|0,bd=ya.divisor|0);ab=R.location;za=P[ab];if(1===hc){za.buffer||B.enableVertexAttribArray(ab);db=Zc||
2;if(za.type!==jb||za.size!==db||za.buffer!==Xb||za.normalized!==cb||za.offset!==kc||za.stride!==ib)B.bindBuffer(34962,Xb.buffer),B.vertexAttribPointer(ab,db,jb,cb,ib,kc),za.type=jb,za.size=db,za.buffer=Xb,za.normalized=cb,za.offset=kc,za.stride=ib;za.divisor!==bd&&(g.vertexAttribDivisorANGLE(ab,bd),za.divisor=bd)}else if(za.buffer&&(B.disableVertexAttribArray(ab),za.buffer=null),za.x!==ob||za.y!==wa||za.z!==Ua||za.w!==ta)B.vertexAttrib4f(ab,ob,wa,Ua,ta),za.x=ob,za.y=wa,za.z=Ua,za.w=ta;Ja.buffer=
q.positionBuffer;Ma=!1;Ab=null;zb=0;Ra=!1;Jb=Hc=0;Lb=1;Tb=0;ua=5126;eb=Ob=La=Jd=0;ma(Ja)?(Ma=!0,Ab=O.createStream(34962,Ja),ua=Ab.dtype):(Ab=O.getBuffer(Ja))?ua=Ab.dtype:"constant"in Ja?(Lb=2,"number"===typeof Ja.constant?(La=Ja.constant,Ob=eb=Jd=0):(La=0<Ja.constant.length?Ja.constant[0]:0,Ob=1<Ja.constant.length?Ja.constant[1]:0,eb=2<Ja.constant.length?Ja.constant[2]:0,Jd=3<Ja.constant.length?Ja.constant[3]:0)):(Ab=ma(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),ua="type"in
Ja?M[Ja.type]:Ab.dtype,Ra=!!Ja.normalized,Jb=Ja.size|0,Hc=Ja.offset|0,Tb=Ja.stride|0,zb=Ja.divisor|0);hb=ka.location;va=P[hb];if(1===Lb){va.buffer||B.enableVertexAttribArray(hb);dc=Jb||2;if(va.type!==ua||va.size!==dc||va.buffer!==Ab||va.normalized!==Ra||va.offset!==Hc||va.stride!==Tb)B.bindBuffer(34962,Ab.buffer),B.vertexAttribPointer(hb,dc,ua,Ra,Tb,Hc),va.type=ua,va.size=dc,va.buffer=Ab,va.normalized=Ra,va.offset=Hc,va.stride=Tb;va.divisor!==zb&&(g.vertexAttribDivisorANGLE(hb,zb),va.divisor=zb)}else if(va.buffer&&
(B.disableVertexAttribArray(hb),va.buffer=null),va.x!==La||va.y!==Ob||va.z!==eb||va.w!==Jd)B.vertexAttrib4f(hb,La,Ob,eb,Jd),va.x=La,va.y=Ob,va.z=eb,va.w=Jd;C.buffer=q.positionBuffer;Da=!1;pb=null;qb=0;Ya=!1;lc=Za=0;dd=1;tc=0;Va=5126;vc=Ga=Oc=Mb=0;ma(C)?(Da=!0,pb=O.createStream(34962,C),Va=pb.dtype):(pb=O.getBuffer(C))?Va=pb.dtype:"constant"in C?(dd=2,"number"===typeof C.constant?(Oc=C.constant,Ga=vc=Mb=0):(Oc=0<C.constant.length?C.constant[0]:0,Ga=1<C.constant.length?C.constant[1]:0,vc=2<C.constant.length?
C.constant[2]:0,Mb=3<C.constant.length?C.constant[3]:0)):(pb=ma(C.buffer)?O.createStream(34962,C.buffer):O.getBuffer(C.buffer),Va="type"in C?M[C.type]:pb.dtype,Ya=!!C.normalized,lc=C.size|0,Za=C.offset|0,tc=C.stride|0,qb=C.divisor|0);Qa=Sa.location;Aa=P[Qa];if(1===dd){Aa.buffer||B.enableVertexAttribArray(Qa);kb=lc||2;if(Aa.type!==Va||Aa.size!==kb||Aa.buffer!==pb||Aa.normalized!==Ya||Aa.offset!==Za||Aa.stride!==tc)B.bindBuffer(34962,pb.buffer),B.vertexAttribPointer(Qa,kb,Va,Ya,tc,Za),Aa.type=Va,Aa.size=
kb,Aa.buffer=pb,Aa.normalized=Ya,Aa.offset=Za,Aa.stride=tc;Aa.divisor!==qb&&(g.vertexAttribDivisorANGLE(Qa,qb),Aa.divisor=qb)}else if(Aa.buffer&&(B.disableVertexAttribArray(Qa),Aa.buffer=null),Aa.x!==Oc||Aa.y!==Ga||Aa.z!==vc||Aa.w!==Mb)B.vertexAttrib4f(Qa,Oc,Ga,vc,Mb),Aa.x=Oc,Aa.y=Ga,Aa.z=vc,Aa.w=Mb;F.buffer=q.colorBuffer;ub=!1;Bb=null;rb=0;uc=!1;wd=vb=0;rc=1;Ed=0;Jc=5126;bc=Vb=fd=ed=0;ma(F)?(ub=!0,Bb=O.createStream(34962,F),Jc=Bb.dtype):(Bb=O.getBuffer(F))?Jc=Bb.dtype:"constant"in F?(rc=2,"number"===
typeof F.constant?(fd=F.constant,Vb=bc=ed=0):(fd=0<F.constant.length?F.constant[0]:0,Vb=1<F.constant.length?F.constant[1]:0,bc=2<F.constant.length?F.constant[2]:0,ed=3<F.constant.length?F.constant[3]:0)):(Bb=ma(F.buffer)?O.createStream(34962,F.buffer):O.getBuffer(F.buffer),Jc="type"in F?M[F.type]:Bb.dtype,uc=!!F.normalized,wd=F.size|0,vb=F.offset|0,Ed=F.stride|0,rb=F.divisor|0);Pb=r.location;Ha=P[Pb];if(1===rc){Ha.buffer||B.enableVertexAttribArray(Pb);Zb=wd||4;if(Ha.type!==Jc||Ha.size!==Zb||Ha.buffer!==
Bb||Ha.normalized!==uc||Ha.offset!==vb||Ha.stride!==Ed)B.bindBuffer(34962,Bb.buffer),B.vertexAttribPointer(Pb,Zb,Jc,uc,Ed,vb),Ha.type=Jc,Ha.size=Zb,Ha.buffer=Bb,Ha.normalized=uc,Ha.offset=vb,Ha.stride=Ed;Ha.divisor!==rb&&(g.vertexAttribDivisorANGLE(Pb,rb),Ha.divisor=rb)}else if(Ha.buffer&&(B.disableVertexAttribArray(Pb),Ha.buffer=null),Ha.x!==fd||Ha.y!==Vb||Ha.z!==bc||Ha.w!==ed)B.vertexAttrib4f(Pb,fd,Vb,bc,ed),Ha.x=fd,Ha.y=Vb,Ha.z=bc,Ha.w=ed;xa.buffer=q.colorBuffer;lb=!1;wb=null;Nb=0;Qb=!1;gc=ec=
0;Ze=1;xc=0;yc=5126;Sc=$c=Kc=Ac=0;ma(xa)?(lb=!0,wb=O.createStream(34962,xa),yc=wb.dtype):(wb=O.getBuffer(xa))?yc=wb.dtype:"constant"in xa?(Ze=2,"number"===typeof xa.constant?(Kc=xa.constant,$c=Sc=Ac=0):(Kc=0<xa.constant.length?xa.constant[0]:0,$c=1<xa.constant.length?xa.constant[1]:0,Sc=2<xa.constant.length?xa.constant[2]:0,Ac=3<xa.constant.length?xa.constant[3]:0)):(wb=ma(xa.buffer)?O.createStream(34962,xa.buffer):O.getBuffer(xa.buffer),yc="type"in xa?M[xa.type]:wb.dtype,Qb=!!xa.normalized,gc=xa.size|
0,ec=xa.offset|0,xc=xa.stride|0,Nb=xa.divisor|0);Lc=J.location;Kb=P[Lc];if(1===Ze){Kb.buffer||B.enableVertexAttribArray(Lc);Db=gc||4;if(Kb.type!==yc||Kb.size!==Db||Kb.buffer!==wb||Kb.normalized!==Qb||Kb.offset!==ec||Kb.stride!==xc)B.bindBuffer(34962,wb.buffer),B.vertexAttribPointer(Lc,Db,yc,Qb,xc,ec),Kb.type=yc,Kb.size=Db,Kb.buffer=wb,Kb.normalized=Qb,Kb.offset=ec,Kb.stride=xc;Kb.divisor!==Nb&&(g.vertexAttribDivisorANGLE(Lc,Nb),Kb.divisor=Nb)}else if(Kb.buffer&&(B.disableVertexAttribArray(Lc),Kb.buffer=
null),Kb.x!==Kc||Kb.y!==$c||Kb.z!==Sc||Kb.w!==Ac)B.vertexAttrib4f(Lc,Kc,$c,Sc,Ac),Kb.x=Kc,Kb.y=$c,Kb.z=Sc,Kb.w=Ac;Mc=q.scale;Ec=Mc[0];fc=Mc[1];l&&Tc===Ec&&Wc===fc||(Tc=Ec,Wc=fc,B.uniform2f(Cb.location,Ec,fc));gd=q.translate;kd=gd[0];Xc=gd[1];l&&md===kd&&bf===Xc||(md=kd,bf=Xc,B.uniform2f(Na.location,kd,Xc));Zd=q.thickness;l&&ke===Zd||(ke=Zd,B.uniform1f(ea.location,Zd));se=q.depth;l&&me===se||(me=se,B.uniform1f(I.location,se));Md=x.call(this,T,q,l);Kd=Md[0];Bc=Md[1];ld=Md[2];pd=Md[3];l&&id===Kd&&od===
Bc&&cd===ld&&Fd===pd||(id=Kd,od=Bc,cd=ld,Fd=pd,B.uniform4f(V.location,Kd,Bc,ld,pd));Hd=q.miterLimit;l&&te===Hd||(te=Hd,B.uniform1f(ja.location,Hd));ze=u.call(this,T,q,l);l&&Ae===ze||(Ae=ze,B.uniform1f(W.location,ze));ne=q.dashLength;l&&fe===ne||(fe=ne,B.uniform1f(A.location,ne));de=q.opacity;l&&pe===de||(pe=de,B.uniform1f(la.location,de));(be=q.dashTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);ie=be._texture;B.uniform1i(aa.location,ie.bind());wc=q.count;0<wc?Rc?g.drawElementsInstancedANGLE(5,
4,Rc.type,0<<(Rc.type-5121>>1),wc):g.drawArraysInstancedANGLE(5,0,4,wc):0>wc&&(Rc?B.drawElements(5,4,Rc.type,0<<(Rc.type-5121>>1)):B.drawArrays(5,0,4));T.viewportWidth=cc;T.viewportHeight=Cc;Ib&&O.destroyStream(Ta);nc&&O.destroyStream(Xb);Ma&&O.destroyStream(Ab);Da&&O.destroyStream(pb);ub&&O.destroyStream(Bb);lb&&O.destroyStream(wb);ie.unbind()}na.dirty=!0;yb.setVAO(null);h&&(c.cpuTime+=performance.now()-n)},draw:function(b){var a,f,h,n,q,t,p,v,y,w,u,H,G,x,Ia,fa,qa,Ea,sb,Ba,Ka,mb,Vd,Wd,ae,Yd,qd,nd,
vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb,hd,Hb,pc,Wa,Rc,ac,mc,Id,rd,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd;a=S.next;a!==S.cur&&(a?B.bindFramebuffer(36160,a.framebuffer):B.bindFramebuffer(36160,null),S.cur=a);if(na.dirty){var rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc;rc=
da.dither;rc!==na.dither&&(rc?B.enable(3024):B.disable(3024),na.dither=rc);Ed=da.depth_func;Ed!==na.depth_func&&(B.depthFunc(Ed),na.depth_func=Ed);Jc=td[0];ed=td[1];if(Jc!==zc[0]||ed!==zc[1])B.depthRange(Jc,ed),zc[0]=Jc,zc[1]=ed;fd=da.depth_mask;fd!==na.depth_mask&&(B.depthMask(fd),na.depth_mask=fd);Vb=sc[0];bc=sc[1];Pb=sc[2];Ha=sc[3];if(Vb!==ic[0]||bc!==ic[1]||Pb!==ic[2]||Ha!==ic[3])B.colorMask(Vb,bc,Pb,Ha),ic[0]=Vb,ic[1]=bc,ic[2]=Pb,ic[3]=Ha;Zb=da.frontFace;Zb!==na.frontFace&&(B.frontFace(Zb),na.frontFace=
Zb);lb=da.lineWidth;lb!==na.lineWidth&&(B.lineWidth(lb),na.lineWidth=lb);wb=da.polygonOffset_enable;wb!==na.polygonOffset_enable&&(wb?B.enable(32823):B.disable(32823),na.polygonOffset_enable=wb);Nb=Z[0];Qb=Z[1];if(Nb!==N[0]||Qb!==N[1])B.polygonOffset(Nb,Qb),N[0]=Nb,N[1]=Qb;ec=da.sample_alpha;ec!==na.sample_alpha&&(ec?B.enable(32926):B.disable(32926),na.sample_alpha=ec);gc=da.sample_enable;gc!==na.sample_enable&&(gc?B.enable(32928):B.disable(32928),na.sample_enable=gc);Ze=ha[0];xc=ha[1];if(Ze!==Fa[0]||
xc!==Fa[1])B.sampleCoverage(Ze,xc),Fa[0]=Ze,Fa[1]=xc;yc=da.stencil_mask;yc!==na.stencil_mask&&(B.stencilMask(yc),na.stencil_mask=yc);Ac=Qc[0];Kc=Qc[1];$c=Qc[2];if(Ac!==L[0]||Kc!==L[1]||$c!==L[2])B.stencilFunc(Ac,Kc,$c),L[0]=Ac,L[1]=Kc,L[2]=$c;Sc=sa[0];Lc=sa[1];Kb=sa[2];Db=sa[3];if(Sc!==X[0]||Lc!==X[1]||Kb!==X[2]||Db!==X[3])B.stencilOpSeparate(Sc,Lc,Kb,Db),X[0]=Sc,X[1]=Lc,X[2]=Kb,X[3]=Db;Mc=E[0];Ec=E[1];Tc=E[2];fc=E[3];if(Mc!==ia[0]||Ec!==ia[1]||Tc!==ia[2]||fc!==ia[3])B.stencilOpSeparate(Mc,Ec,Tc,
fc),ia[0]=Mc,ia[1]=Ec,ia[2]=Tc,ia[3]=fc}f=b.viewport;h=f.x|0;n=f.y|0;q="width"in f?f.width|0:T.framebufferWidth-h;t="height"in f?f.height|0:T.framebufferHeight-n;p=T.viewportWidth;T.viewportWidth=q;v=T.viewportHeight;T.viewportHeight=t;B.viewport(h,n,q,t);ra[0]=h;ra[1]=n;ra[2]=q;ra[3]=t;B.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;B.enable(3042);na.blend_enable=!0;B.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;B.blendFuncSeparate(770,771,773,1);$b[0]=770;$b[1]=771;$b[2]=773;$b[3]=
1;B.enable(2884);na.cull_enable=!0;B.cullFace(1029);na.cull_face=1029;(y=d.call(this,T,b,0))?B.enable(2929):B.disable(2929);na.depth_enable=y;w=b.viewport;u=w.x|0;H=w.y|0;G="width"in w?w.width|0:T.framebufferWidth-u;x="height"in w?w.height|0:T.framebufferHeight-H;B.scissor(u,H,G,x);Pc[0]=u;Pc[1]=H;Pc[2]=G;Pc[3]=x;B.enable(3089);na.scissor_enable=!0;B.disable(2960);na.stencil_enable=!1;if(Ia=na.profile)fa=performance.now(),c.count++;B.useProgram(e.program);qa=$a.angle_instanced_arrays;yb.setVAO(null);
ba.buffer=b.positionBuffer;Ea=!1;sb=null;Ba=0;Ka=!1;Vd=mb=0;Wd=1;ae=0;Yd=5126;ad=vd=nd=qd=0;ma(ba)?(Ea=!0,sb=O.createStream(34962,ba),Yd=sb.dtype):(sb=O.getBuffer(ba))?Yd=sb.dtype:"constant"in ba?(Wd=2,"number"===typeof ba.constant?(nd=ba.constant,vd=ad=qd=0):(nd=0<ba.constant.length?ba.constant[0]:0,vd=1<ba.constant.length?ba.constant[1]:0,ad=2<ba.constant.length?ba.constant[2]:0,qd=3<ba.constant.length?ba.constant[3]:0)):(sb=ma(ba.buffer)?O.createStream(34962,ba.buffer):O.getBuffer(ba.buffer),Yd=
"type"in ba?M[ba.type]:sb.dtype,Ka=!!ba.normalized,Vd=ba.size|0,mb=ba.offset|0,ae=ba.stride|0,Ba=ba.divisor|0);sd=ca.location;Uc=P[sd];if(1===Wd){Uc.buffer||B.enableVertexAttribArray(sd);Dd=Vd||2;if(Uc.type!==Yd||Uc.size!==Dd||Uc.buffer!==sb||Uc.normalized!==Ka||Uc.offset!==mb||Uc.stride!==ae)B.bindBuffer(34962,sb.buffer),B.vertexAttribPointer(sd,Dd,Yd,Ka,ae,mb),Uc.type=Yd,Uc.size=Dd,Uc.buffer=sb,Uc.normalized=Ka,Uc.offset=mb,Uc.stride=ae;Uc.divisor!==Ba&&(qa.vertexAttribDivisorANGLE(sd,Ba),Uc.divisor=
Ba)}else if(Uc.buffer&&(B.disableVertexAttribArray(sd),Uc.buffer=null),Uc.x!==nd||Uc.y!==vd||Uc.z!==ad||Uc.w!==qd)B.vertexAttrib4f(sd,nd,vd,ad,qd),Uc.x=nd,Uc.y=vd,Uc.z=ad,Uc.w=qd;ya.buffer=b.positionBuffer;Nc=!1;Ic=null;qc=0;fb=!1;Hb=hd=0;pc=1;Wa=0;Rc=5126;rd=Id=mc=ac=0;ma(ya)?(Nc=!0,Ic=O.createStream(34962,ya),Rc=Ic.dtype):(Ic=O.getBuffer(ya))?Rc=Ic.dtype:"constant"in ya?(pc=2,"number"===typeof ya.constant?(mc=ya.constant,Id=rd=ac=0):(mc=0<ya.constant.length?ya.constant[0]:0,Id=1<ya.constant.length?
ya.constant[1]:0,rd=2<ya.constant.length?ya.constant[2]:0,ac=3<ya.constant.length?ya.constant[3]:0)):(Ic=ma(ya.buffer)?O.createStream(34962,ya.buffer):O.getBuffer(ya.buffer),Rc="type"in ya?M[ya.type]:Ic.dtype,fb=!!ya.normalized,Hb=ya.size|0,hd=ya.offset|0,Wa=ya.stride|0,qc=ya.divisor|0);Fc=R.location;cc=P[Fc];if(1===pc){cc.buffer||B.enableVertexAttribArray(Fc);Cc=Hb||2;if(cc.type!==Rc||cc.size!==Cc||cc.buffer!==Ic||cc.normalized!==fb||cc.offset!==hd||cc.stride!==Wa)B.bindBuffer(34962,Ic.buffer),B.vertexAttribPointer(Fc,
Cc,Rc,fb,Wa,hd),cc.type=Rc,cc.size=Cc,cc.buffer=Ic,cc.normalized=fb,cc.offset=hd,cc.stride=Wa;cc.divisor!==qc&&(qa.vertexAttribDivisorANGLE(Fc,qc),cc.divisor=qc)}else if(cc.buffer&&(B.disableVertexAttribArray(Fc),cc.buffer=null),cc.x!==mc||cc.y!==Id||cc.z!==rd||cc.w!==ac)B.vertexAttrib4f(Fc,mc,Id,rd,ac),cc.x=mc,cc.y=Id,cc.z=rd,cc.w=ac;Ja.buffer=b.positionBuffer;Yc=!1;Yb=null;Gc=0;Xa=!1;ud=Ca=0;Ib=1;Ta=0;Ub=5126;ye=Wb=Dc=bb=0;ma(Ja)?(Yc=!0,Yb=O.createStream(34962,Ja),Ub=Yb.dtype):(Yb=O.getBuffer(Ja))?
Ub=Yb.dtype:"constant"in Ja?(Ib=2,"number"===typeof Ja.constant?(Dc=Ja.constant,Wb=ye=bb=0):(Dc=0<Ja.constant.length?Ja.constant[0]:0,Wb=1<Ja.constant.length?Ja.constant[1]:0,ye=2<Ja.constant.length?Ja.constant[2]:0,bb=3<Ja.constant.length?Ja.constant[3]:0)):(Yb=ma(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),Ub="type"in Ja?M[Ja.type]:Yb.dtype,Xa=!!Ja.normalized,ud=Ja.size|0,Ca=Ja.offset|0,Ta=Ja.stride|0,Gc=Ja.divisor|0);jc=ka.location;Rb=P[jc];if(1===Ib){Rb.buffer||B.enableVertexAttribArray(jc);
jd=ud||2;if(Rb.type!==Ub||Rb.size!==jd||Rb.buffer!==Yb||Rb.normalized!==Xa||Rb.offset!==Ca||Rb.stride!==Ta)B.bindBuffer(34962,Yb.buffer),B.vertexAttribPointer(jc,jd,Ub,Xa,Ta,Ca),Rb.type=Ub,Rb.size=jd,Rb.buffer=Yb,Rb.normalized=Xa,Rb.offset=Ca,Rb.stride=Ta;Rb.divisor!==Gc&&(qa.vertexAttribDivisorANGLE(jc,Gc),Rb.divisor=Gc)}else if(Rb.buffer&&(B.disableVertexAttribArray(jc),Rb.buffer=null),Rb.x!==Dc||Rb.y!==Wb||Rb.z!==ye||Rb.w!==bb)B.vertexAttrib4f(jc,Dc,Wb,ye,bb),Rb.x=Dc,Rb.y=Wb,Rb.z=ye,Rb.w=bb;C.buffer=
b.positionBuffer;Sb=!1;Oa=null;nb=0;tb=!1;Pa=gb=0;nc=1;Xb=0;bd=5126;hc=Zc=kc=cb=0;ma(C)?(Sb=!0,Oa=O.createStream(34962,C),bd=Oa.dtype):(Oa=O.getBuffer(C))?bd=Oa.dtype:"constant"in C?(nc=2,"number"===typeof C.constant?(kc=C.constant,Zc=hc=cb=0):(kc=0<C.constant.length?C.constant[0]:0,Zc=1<C.constant.length?C.constant[1]:0,hc=2<C.constant.length?C.constant[2]:0,cb=3<C.constant.length?C.constant[3]:0)):(Oa=ma(C.buffer)?O.createStream(34962,C.buffer):O.getBuffer(C.buffer),bd="type"in C?M[C.type]:Oa.dtype,
tb=!!C.normalized,Pa=C.size|0,gb=C.offset|0,Xb=C.stride|0,nb=C.divisor|0);ib=Sa.location;jb=P[ib];if(1===nc){jb.buffer||B.enableVertexAttribArray(ib);ta=Pa||2;if(jb.type!==bd||jb.size!==ta||jb.buffer!==Oa||jb.normalized!==tb||jb.offset!==gb||jb.stride!==Xb)B.bindBuffer(34962,Oa.buffer),B.vertexAttribPointer(ib,ta,bd,tb,Xb,gb),jb.type=bd,jb.size=ta,jb.buffer=Oa,jb.normalized=tb,jb.offset=gb,jb.stride=Xb;jb.divisor!==nb&&(qa.vertexAttribDivisorANGLE(ib,nb),jb.divisor=nb)}else if(jb.buffer&&(B.disableVertexAttribArray(ib),
jb.buffer=null),jb.x!==kc||jb.y!==Zc||jb.z!==hc||jb.w!==cb)B.vertexAttrib4f(ib,kc,Zc,hc,cb),jb.x=kc,jb.y=Zc,jb.z=hc,jb.w=cb;F.buffer=b.colorBuffer;ob=!1;wa=null;Ua=0;ab=!1;db=za=0;Ma=1;Ab=0;zb=5126;Lb=Jb=Hc=Ra=0;ma(F)?(ob=!0,wa=O.createStream(34962,F),zb=wa.dtype):(wa=O.getBuffer(F))?zb=wa.dtype:"constant"in F?(Ma=2,"number"===typeof F.constant?(Hc=F.constant,Jb=Lb=Ra=0):(Hc=0<F.constant.length?F.constant[0]:0,Jb=1<F.constant.length?F.constant[1]:0,Lb=2<F.constant.length?F.constant[2]:0,Ra=3<F.constant.length?
F.constant[3]:0)):(wa=ma(F.buffer)?O.createStream(34962,F.buffer):O.getBuffer(F.buffer),zb="type"in F?M[F.type]:wa.dtype,ab=!!F.normalized,db=F.size|0,za=F.offset|0,Ab=F.stride|0,Ua=F.divisor|0);Tb=r.location;ua=P[Tb];if(1===Ma){ua.buffer||B.enableVertexAttribArray(Tb);Jd=db||4;if(ua.type!==zb||ua.size!==Jd||ua.buffer!==wa||ua.normalized!==ab||ua.offset!==za||ua.stride!==Ab)B.bindBuffer(34962,wa.buffer),B.vertexAttribPointer(Tb,Jd,zb,ab,Ab,za),ua.type=zb,ua.size=Jd,ua.buffer=wa,ua.normalized=ab,ua.offset=
za,ua.stride=Ab;ua.divisor!==Ua&&(qa.vertexAttribDivisorANGLE(Tb,Ua),ua.divisor=Ua)}else if(ua.buffer&&(B.disableVertexAttribArray(Tb),ua.buffer=null),ua.x!==Hc||ua.y!==Jb||ua.z!==Lb||ua.w!==Ra)B.vertexAttrib4f(Tb,Hc,Jb,Lb,Ra),ua.x=Hc,ua.y=Jb,ua.z=Lb,ua.w=Ra;xa.buffer=b.colorBuffer;La=!1;Ob=null;eb=0;hb=!1;dc=va=0;Da=1;pb=0;qb=5126;dd=lc=Za=Ya=0;ma(xa)?(La=!0,Ob=O.createStream(34962,xa),qb=Ob.dtype):(Ob=O.getBuffer(xa))?qb=Ob.dtype:"constant"in xa?(Da=2,"number"===typeof xa.constant?(Za=xa.constant,
lc=dd=Ya=0):(Za=0<xa.constant.length?xa.constant[0]:0,lc=1<xa.constant.length?xa.constant[1]:0,dd=2<xa.constant.length?xa.constant[2]:0,Ya=3<xa.constant.length?xa.constant[3]:0)):(Ob=ma(xa.buffer)?O.createStream(34962,xa.buffer):O.getBuffer(xa.buffer),qb="type"in xa?M[xa.type]:Ob.dtype,hb=!!xa.normalized,dc=xa.size|0,va=xa.offset|0,pb=xa.stride|0,eb=xa.divisor|0);tc=J.location;Va=P[tc];if(1===Da){Va.buffer||B.enableVertexAttribArray(tc);Mb=dc||4;if(Va.type!==qb||Va.size!==Mb||Va.buffer!==Ob||Va.normalized!==
hb||Va.offset!==va||Va.stride!==pb)B.bindBuffer(34962,Ob.buffer),B.vertexAttribPointer(tc,Mb,qb,hb,pb,va),Va.type=qb,Va.size=Mb,Va.buffer=Ob,Va.normalized=hb,Va.offset=va,Va.stride=pb;Va.divisor!==eb&&(qa.vertexAttribDivisorANGLE(tc,eb),Va.divisor=eb)}else if(Va.buffer&&(B.disableVertexAttribArray(tc),Va.buffer=null),Va.x!==Za||Va.y!==lc||Va.z!==dd||Va.w!==Ya)B.vertexAttrib4f(tc,Za,lc,dd,Ya),Va.x=Za,Va.y=lc,Va.z=dd,Va.w=Ya;Oc=U.location;Ga=P[Oc];Ga.buffer||B.enableVertexAttribArray(Oc);if(5126!==
Ga.type||1!==Ga.size||Ga.buffer!==m||!1!==Ga.normalized||0!==Ga.offset||8!==Ga.stride)B.bindBuffer(34962,m.buffer),B.vertexAttribPointer(Oc,1,5126,!1,8,0),Ga.type=5126,Ga.size=1,Ga.buffer=m,Ga.normalized=!1,Ga.offset=0,Ga.stride=8;0!==Ga.divisor&&(qa.vertexAttribDivisorANGLE(Oc,0),Ga.divisor=0);vc=K.location;Qa=P[vc];Qa.buffer||B.enableVertexAttribArray(vc);if(5126!==Qa.type||1!==Qa.size||Qa.buffer!==k||!1!==Qa.normalized||4!==Qa.offset||8!==Qa.stride)B.bindBuffer(34962,k.buffer),B.vertexAttribPointer(vc,
1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=k,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(qa.vertexAttribDivisorANGLE(vc,0),Qa.divisor=0);Aa=b.scale;B.uniform2f(Cb.location,Aa[0],Aa[1]);kb=b.translate;B.uniform2f(Na.location,kb[0],kb[1]);B.uniform1f(ea.location,b.thickness);B.uniform1f(I.location,b.depth);ub=l.call(this,T,b,0);B.uniform4f(V.location,ub[0],ub[1],ub[2],ub[3]);B.uniform1f(ja.location,b.miterLimit);Bb=g.call(this,T,b,0);B.uniform1f(W.location,Bb);B.uniform1f(A.location,
b.dashLength);B.uniform1f(la.location,b.opacity);(rb=b.dashTexture)&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);uc=rb._texture;B.uniform1i(aa.location,uc.bind());(vb=Q.elements)?B.bindBuffer(34963,vb.buffer.buffer):yb.currentVAO&&(vb=Gb.getElements(yb.currentVAO.elements))&&B.bindBuffer(34963,vb.buffer.buffer);wd=b.count;0<wd?vb?qa.drawElementsInstancedANGLE(5,4,vb.type,0<<(vb.type-5121>>1),wd):qa.drawArraysInstancedANGLE(5,0,4,wd):0>wd&&(vb?B.drawElements(5,4,vb.type,0<<(vb.type-5121>>1)):B.drawArrays(5,
0,4));na.dirty=!0;yb.setVAO(null);T.viewportWidth=p;T.viewportHeight=v;Ia&&(c.cpuTime+=performance.now()-fa);Ea&&O.destroyStream(sb);Nc&&O.destroyStream(Ic);Yc&&O.destroyStream(Yb);Sb&&O.destroyStream(Oa);ob&&O.destroyStream(wa);La&&O.destroyStream(Ob);uc.unbind()},scope:function(a,g,l){var d,e,w,u,D,z,x,Ia,r,A,oa,B,E,N,J,I,L,R,Z,ca,P,K,S,aa,Y,ha,X,U,V,ia,W,ga,sa,sc,ra,ka,Fa,ea,Wa,td,ac,mc,zc,ja,Pc,cc,Cc,Yc,Yb,Gc,Xa,Ca,$b,Ib,Ta,Ub,bb,la,ic,Na,$a,Rb,Sa,Sb,Oa,nb,tb,gb,Pa,nc,Xb,Qc,cb,kc,Gb,hc,ib,jb,
ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,yb,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,Cb,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,
wf,zf,Af;d=a.viewport;e=d.x|0;w=d.y|0;u="width"in d?d.width|0:T.framebufferWidth-e;D="height"in d?d.height|0:T.framebufferHeight-w;z=T.viewportWidth;T.viewportWidth=u;x=T.viewportHeight;T.viewportHeight=D;Ia=fa[0];fa[0]=e;r=fa[1];fa[1]=w;A=fa[2];fa[2]=u;oa=fa[3];fa[3]=D;B=Ka[0];Ka[0]=0;E=Ka[1];Ka[1]=0;N=Ka[2];Ka[2]=0;J=Ka[3];Ka[3]=0;I=da.blend_enable;da.blend_enable=!0;L=mb[0];mb[0]=32774;R=mb[1];mb[1]=32774;Z=qa[0];qa[0]=770;ca=qa[1];qa[1]=771;P=qa[2];qa[2]=773;K=qa[3];qa[3]=1;S=da.cull_enable;da.cull_enable=
!0;aa=da.cull_face;da.cull_face=1029;Y=b.call(this,T,a,l);ha=da.depth_enable;da.depth_enable=Y;X=a.viewport;U=X.x|0;V=X.y|0;ia="width"in X?X.width|0:T.framebufferWidth-U;W="height"in X?X.height|0:T.framebufferHeight-V;ga=sb[0];sb[0]=U;sa=sb[1];sb[1]=V;sc=sb[2];sb[2]=ia;ra=sb[3];sb[3]=W;ka=da.scissor_enable;da.scissor_enable=!0;Fa=da.stencil_enable;da.stencil_enable=!1;if(ea=na.profile)Wa=performance.now(),c.count++;td=Q.offset;Q.offset=0;ac=Q.count;Q.count=4;mc=a.count;zc=Q.instances;Q.instances=
mc;ja=Q.primitive;Q.primitive=5;Pc=a.dashLength;cc=Ea[23];Ea[23]=Pc;Cc=a.dashTexture;Yc=Ea[24];Ea[24]=Cc;Yb=a.depth;Gc=Ea[22];Ea[22]=Yb;Xa=a.id;Ca=Ea[31];Ea[31]=Xa;$b=a.miterLimit;Ib=Ea[32];Ea[32]=$b;Ta=p.call(this,T,a,l);Ub=Ea[33];Ea[33]=Ta;bb=a.opacity;la=Ea[10];Ea[10]=bb;ic=T.pixelRatio;Na=Ea[34];Ea[34]=ic;$a=a.scale;Rb=Ea[6];Ea[6]=$a;Sa=a.scaleFract;Sb=Ea[7];Ea[7]=Sa;Oa=a.thickness;nb=Ea[21];Ea[21]=Oa;tb=a.translate;gb=Ea[8];Ea[8]=tb;Pa=a.translateFract;nc=Ea[9];Ea[9]=Pa;Xb=H.call(this,T,a,l);
Qc=Ea[3];Ea[3]=Xb;F.buffer=a.colorBuffer;cb=!1;kc=null;Gb=0;hc=!1;jb=ib=0;ta=1;ob=0;wa=5126;db=za=ab=Ua=0;ma(F)?(cb=!0,kc=O.createStream(34962,F),wa=kc.dtype):(kc=O.getBuffer(F))?wa=kc.dtype:"constant"in F?(ta=2,"number"===typeof F.constant?(ab=F.constant,za=db=Ua=0):(ab=0<F.constant.length?F.constant[0]:0,za=1<F.constant.length?F.constant[1]:0,db=2<F.constant.length?F.constant[2]:0,Ua=3<F.constant.length?F.constant[3]:0)):(kc=ma(F.buffer)?O.createStream(34962,F.buffer):O.getBuffer(F.buffer),wa="type"in
F?M[F.type]:kc.dtype,hc=!!F.normalized,jb=F.size|0,ib=F.offset|0,ob=F.stride|0,Gb=F.divisor|0);Ma=y.buffer;y.buffer=kc;Ab=y.divisor;y.divisor=Gb;zb=y.normalized;y.normalized=hc;Ra=y.offset;y.offset=ib;Hc=y.size;y.size=jb;Jb=y.state;y.state=ta;Lb=y.stride;y.stride=ob;Tb=y.type;y.type=wa;ua=y.w;y.w=Ua;yb=y.x;y.x=ab;La=y.y;y.y=za;Ob=y.z;y.z=db;ba.buffer=a.positionBuffer;eb=!1;hb=null;va=0;dc=!1;pb=Da=0;qb=1;Ya=0;Za=5126;Va=tc=dd=lc=0;ma(ba)?(eb=!0,hb=O.createStream(34962,ba),Za=hb.dtype):(hb=O.getBuffer(ba))?
Za=hb.dtype:"constant"in ba?(qb=2,"number"===typeof ba.constant?(dd=ba.constant,tc=Va=lc=0):(dd=0<ba.constant.length?ba.constant[0]:0,tc=1<ba.constant.length?ba.constant[1]:0,Va=2<ba.constant.length?ba.constant[2]:0,lc=3<ba.constant.length?ba.constant[3]:0)):(hb=ma(ba.buffer)?O.createStream(34962,ba.buffer):O.getBuffer(ba.buffer),Za="type"in ba?M[ba.type]:hb.dtype,dc=!!ba.normalized,pb=ba.size|0,Da=ba.offset|0,Ya=ba.stride|0,va=ba.divisor|0);Mb=h.buffer;h.buffer=hb;Oc=h.divisor;h.divisor=va;Ga=h.normalized;
h.normalized=dc;vc=h.offset;h.offset=Da;Qa=h.size;h.size=pb;Aa=h.state;h.state=qb;kb=h.stride;h.stride=Ya;ub=h.type;h.type=Za;Bb=h.w;h.w=lc;rb=h.x;h.x=dd;uc=h.y;h.y=tc;vb=h.z;h.z=Va;xa.buffer=a.colorBuffer;Cb=!1;rc=null;Ed=0;Jc=!1;fd=ed=0;Vb=1;bc=0;Pb=5126;wb=lb=Zb=Ha=0;ma(xa)?(Cb=!0,rc=O.createStream(34962,xa),Pb=rc.dtype):(rc=O.getBuffer(xa))?Pb=rc.dtype:"constant"in xa?(Vb=2,"number"===typeof xa.constant?(Zb=xa.constant,lb=wb=Ha=0):(Zb=0<xa.constant.length?xa.constant[0]:0,lb=1<xa.constant.length?
xa.constant[1]:0,wb=2<xa.constant.length?xa.constant[2]:0,Ha=3<xa.constant.length?xa.constant[3]:0)):(rc=ma(xa.buffer)?O.createStream(34962,xa.buffer):O.getBuffer(xa.buffer),Pb="type"in xa?M[xa.type]:rc.dtype,Jc=!!xa.normalized,fd=xa.size|0,ed=xa.offset|0,bc=xa.stride|0,Ed=xa.divisor|0);Nb=f.buffer;f.buffer=rc;Qb=f.divisor;f.divisor=Ed;ec=f.normalized;f.normalized=Jc;gc=f.offset;f.offset=ed;Ze=f.size;f.size=fd;xc=f.state;f.state=Vb;yc=f.stride;f.stride=bc;Ac=f.type;f.type=Pb;Kc=f.w;f.w=Ha;$c=f.x;
f.x=Zb;Sc=f.y;f.y=lb;Lc=f.z;f.z=wb;ya.buffer=a.positionBuffer;Kb=!1;Db=null;Mc=0;Ec=!1;fc=Tc=0;Wc=1;gd=0;kd=5126;Zd=bf=Xc=md=0;ma(ya)?(Kb=!0,Db=O.createStream(34962,ya),kd=Db.dtype):(Db=O.getBuffer(ya))?kd=Db.dtype:"constant"in ya?(Wc=2,"number"===typeof ya.constant?(Xc=ya.constant,bf=Zd=md=0):(Xc=0<ya.constant.length?ya.constant[0]:0,bf=1<ya.constant.length?ya.constant[1]:0,Zd=2<ya.constant.length?ya.constant[2]:0,md=3<ya.constant.length?ya.constant[3]:0)):(Db=ma(ya.buffer)?O.createStream(34962,
ya.buffer):O.getBuffer(ya.buffer),kd="type"in ya?M[ya.type]:Db.dtype,Ec=!!ya.normalized,fc=ya.size|0,Tc=ya.offset|0,gd=ya.stride|0,Mc=ya.divisor|0);ke=n.buffer;n.buffer=Db;se=n.divisor;n.divisor=Mc;me=n.normalized;n.normalized=Ec;Md=n.offset;n.offset=Tc;Kd=n.size;n.size=fc;id=n.state;n.state=Wc;Bc=n.stride;n.stride=gd;od=n.type;n.type=kd;ld=n.w;n.w=md;cd=n.x;n.x=Xc;pd=n.y;n.y=bf;Fd=n.z;n.z=Zd;Hd=q.buffer;q.buffer=m;te=q.divisor;q.divisor=0;ze=q.normalized;q.normalized=!1;Ae=q.offset;q.offset=0;ne=
q.size;q.size=0;fe=q.state;q.state=1;de=q.stride;q.stride=8;pe=q.type;q.type=5126;be=q.w;q.w=0;ie=q.x;q.x=0;wc=q.y;q.y=0;Vc=q.z;q.z=0;qe=t.buffer;t.buffer=k;le=t.divisor;t.divisor=0;Ld=t.normalized;t.normalized=!1;Pd=t.offset;t.offset=4;Qd=t.size;t.size=0;Rd=t.state;t.state=1;je=t.stride;t.stride=8;vf=t.type;t.type=5126;Ce=t.w;t.w=0;oe=t.x;t.x=0;Re=t.y;t.y=0;Se=t.z;t.z=0;Ja.buffer=a.positionBuffer;Ne=!1;re=null;Fe=0;He=!1;Je=Ie=0;Ge=1;Nd=0;Ud=5126;Bd=Ke=ce=$d=0;ma(Ja)?(Ne=!0,re=O.createStream(34962,
Ja),Ud=re.dtype):(re=O.getBuffer(Ja))?Ud=re.dtype:"constant"in Ja?(Ge=2,"number"===typeof Ja.constant?(ce=Ja.constant,Ke=Bd=$d=0):(ce=0<Ja.constant.length?Ja.constant[0]:0,Ke=1<Ja.constant.length?Ja.constant[1]:0,Bd=2<Ja.constant.length?Ja.constant[2]:0,$d=3<Ja.constant.length?Ja.constant[3]:0)):(re=ma(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),Ud="type"in Ja?M[Ja.type]:re.dtype,He=!!Ja.normalized,Je=Ja.size|0,Ie=Ja.offset|0,Nd=Ja.stride|0,Fe=Ja.divisor|0);Sd=v.buffer;v.buffer=
re;De=v.divisor;v.divisor=Fe;Le=v.normalized;v.normalized=He;cf=v.offset;v.offset=Ie;af=v.size;v.size=Je;Te=v.state;v.state=Ge;Oe=v.stride;v.stride=Nd;$e=v.type;v.type=Ud;Xe=v.w;v.w=$d;Ue=v.x;v.x=ce;Ve=v.y;v.y=Ke;Td=v.z;v.z=Bd;C.buffer=a.positionBuffer;Xd=!1;We=null;jf=0;nf=!1;kf=ff=0;lf=1;mf=0;rf=5126;Df=Cf=sf=of=0;ma(C)?(Xd=!0,We=O.createStream(34962,C),rf=We.dtype):(We=O.getBuffer(C))?rf=We.dtype:"constant"in C?(lf=2,"number"===typeof C.constant?(sf=C.constant,Cf=Df=of=0):(sf=0<C.constant.length?
C.constant[0]:0,Cf=1<C.constant.length?C.constant[1]:0,Df=2<C.constant.length?C.constant[2]:0,of=3<C.constant.length?C.constant[3]:0)):(We=ma(C.buffer)?O.createStream(34962,C.buffer):O.getBuffer(C.buffer),rf="type"in C?M[C.type]:We.dtype,nf=!!C.normalized,kf=C.size|0,ff=C.offset|0,mf=C.stride|0,jf=C.divisor|0);Pe=G.buffer;G.buffer=We;Ee=G.divisor;G.divisor=jf;pf=G.normalized;G.normalized=nf;qf=G.offset;G.offset=ff;Ef=G.size;G.size=kf;Hf=G.state;G.state=lf;Bf=G.stride;G.stride=mf;Ff=G.type;G.type=
rf;Gf=G.w;G.w=of;xf=G.x;G.x=sf;yf=G.y;G.y=Cf;wf=G.z;G.z=Df;zf=Ba.vert;Ba.vert=36;Af=Ba.frag;Ba.frag=35;na.dirty=!0;g(T,a,l);T.viewportWidth=z;T.viewportHeight=x;fa[0]=Ia;fa[1]=r;fa[2]=A;fa[3]=oa;Ka[0]=B;Ka[1]=E;Ka[2]=N;Ka[3]=J;da.blend_enable=I;mb[0]=L;mb[1]=R;qa[0]=Z;qa[1]=ca;qa[2]=P;qa[3]=K;da.cull_enable=S;da.cull_face=aa;da.depth_enable=ha;sb[0]=ga;sb[1]=sa;sb[2]=sc;sb[3]=ra;da.scissor_enable=ka;da.stencil_enable=Fa;ea&&(c.cpuTime+=performance.now()-Wa);Q.offset=td;Q.count=ac;Q.instances=zc;Q.primitive=
ja;Ea[23]=cc;Ea[24]=Yc;Ea[22]=Gc;Ea[31]=Ca;Ea[32]=Ib;Ea[33]=Ub;Ea[10]=la;Ea[34]=Na;Ea[6]=Rb;Ea[7]=Sb;Ea[21]=nb;Ea[8]=gb;Ea[9]=nc;Ea[3]=Qc;cb&&O.destroyStream(kc);y.buffer=Ma;y.divisor=Ab;y.normalized=zb;y.offset=Ra;y.size=Hc;y.state=Jb;y.stride=Lb;y.type=Tb;y.w=ua;y.x=yb;y.y=La;y.z=Ob;eb&&O.destroyStream(hb);h.buffer=Mb;h.divisor=Oc;h.normalized=Ga;h.offset=vc;h.size=Qa;h.state=Aa;h.stride=kb;h.type=ub;h.w=Bb;h.x=rb;h.y=uc;h.z=vb;Cb&&O.destroyStream(rc);f.buffer=Nb;f.divisor=Qb;f.normalized=ec;f.offset=
gc;f.size=Ze;f.state=xc;f.stride=yc;f.type=Ac;f.w=Kc;f.x=$c;f.y=Sc;f.z=Lc;Kb&&O.destroyStream(Db);n.buffer=ke;n.divisor=se;n.normalized=me;n.offset=Md;n.size=Kd;n.state=id;n.stride=Bc;n.type=od;n.w=ld;n.x=cd;n.y=pd;n.z=Fd;q.buffer=Hd;q.divisor=te;q.normalized=ze;q.offset=Ae;q.size=ne;q.state=fe;q.stride=de;q.type=pe;q.w=be;q.x=ie;q.y=wc;q.z=Vc;t.buffer=qe;t.divisor=le;t.normalized=Ld;t.offset=Pd;t.size=Qd;t.state=Rd;t.stride=je;t.type=vf;t.w=Ce;t.x=oe;t.y=Re;t.z=Se;Ne&&O.destroyStream(re);v.buffer=
Sd;v.divisor=De;v.normalized=Le;v.offset=cf;v.size=af;v.state=Te;v.stride=Oe;v.type=$e;v.w=Xe;v.x=Ue;v.y=Ve;v.z=Td;Xd&&O.destroyStream(We);G.buffer=Pe;G.divisor=Ee;G.normalized=pf;G.offset=qf;G.size=Ef;G.state=Hf;G.stride=Bf;G.type=Ff;G.w=Gf;G.x=xf;G.y=yf;G.z=wf;Ba.vert=zf;Ba.frag=Af;na.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,c,d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G){var w,Ia,x,u,r,ca,J,R,A,aa,I,U,K,ja,W,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,
Q,Gb,$a,S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa;w=a.attributes;Ia=a.buffer;x=a.context;u=a.current;r=a.draw;ca=a.elements;J=a.extensions;R=a.framebuffer;A=a.gl;aa=a.isBufferArgs;I=a.next;U=a.shader;K=a.uniforms;ja=a.vao;W=I.blend_color;ka=u.blend_color;la=I.blend_equation;Sa=u.blend_equation;Cb=I.blend_func;ea=u.blend_func;Na=I.colorMask;V=u.colorMask;P=I.depth_range;O=u.depth_range;T=I.polygonOffset_offset;na=u.polygonOffset_offset;Q=I.sample_coverage;Gb=u.sample_coverage;$a=I.scissor_box;S=u.scissor_box;
B=I.stencil_func;ma=u.stencil_func;da=I.stencil_opBack;Ba=u.stencil_opBack;Ea=I.stencil_opFront;yb=u.stencil_opFront;Ka=I.viewport;Y=u.viewport;mb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};qa={offset:8,stride:8};return{batch:function(a,g){var l,d,e,m,k,D;l=R.next;l!==R.cur&&(l?A.bindFramebuffer(36160,l.framebuffer):A.bindFramebuffer(36160,null),R.cur=l);if(u.dirty){var z,K,U,W,L,E,ia,sa,X,fa,ra,M,F,ba,xa,ya,Ja,C,la,Eb,pa,
Fb,xb,Ka,$a,Cb,ee,we,ue,Od,ge,ve;z=I.dither;z!==u.dither&&(z?A.enable(3024):A.disable(3024),u.dither=z);K=I.depth_func;K!==u.depth_func&&(A.depthFunc(K),u.depth_func=K);U=P[0];W=P[1];if(U!==O[0]||W!==O[1])A.depthRange(U,W),O[0]=U,O[1]=W;L=I.depth_mask;L!==u.depth_mask&&(A.depthMask(L),u.depth_mask=L);E=Na[0];ia=Na[1];sa=Na[2];X=Na[3];if(E!==V[0]||ia!==V[1]||sa!==V[2]||X!==V[3])A.colorMask(E,ia,sa,X),V[0]=E,V[1]=ia,V[2]=sa,V[3]=X;fa=I.cull_enable;fa!==u.cull_enable&&(fa?A.enable(2884):A.disable(2884),
u.cull_enable=fa);ra=I.cull_face;ra!==u.cull_face&&(A.cullFace(ra),u.cull_face=ra);M=I.frontFace;M!==u.frontFace&&(A.frontFace(M),u.frontFace=M);F=I.lineWidth;F!==u.lineWidth&&(A.lineWidth(F),u.lineWidth=F);ba=I.polygonOffset_enable;ba!==u.polygonOffset_enable&&(ba?A.enable(32823):A.disable(32823),u.polygonOffset_enable=ba);xa=T[0];ya=T[1];if(xa!==na[0]||ya!==na[1])A.polygonOffset(xa,ya),na[0]=xa,na[1]=ya;Ja=I.sample_alpha;Ja!==u.sample_alpha&&(Ja?A.enable(32926):A.disable(32926),u.sample_alpha=Ja);
C=I.sample_enable;C!==u.sample_enable&&(C?A.enable(32928):A.disable(32928),u.sample_enable=C);la=Q[0];Eb=Q[1];if(la!==Gb[0]||Eb!==Gb[1])A.sampleCoverage(la,Eb),Gb[0]=la,Gb[1]=Eb;pa=I.stencil_mask;pa!==u.stencil_mask&&(A.stencilMask(pa),u.stencil_mask=pa);Fb=B[0];xb=B[1];Ka=B[2];if(Fb!==ma[0]||xb!==ma[1]||Ka!==ma[2])A.stencilFunc(Fb,xb,Ka),ma[0]=Fb,ma[1]=xb,ma[2]=Ka;$a=Ea[0];Cb=Ea[1];ee=Ea[2];we=Ea[3];if($a!==yb[0]||Cb!==yb[1]||ee!==yb[2]||we!==yb[3])A.stencilOpSeparate($a,Cb,ee,we),yb[0]=$a,yb[1]=
Cb,yb[2]=ee,yb[3]=we;ue=da[0];Od=da[1];ge=da[2];ve=da[3];if(ue!==Ba[0]||Od!==Ba[1]||ge!==Ba[2]||ve!==Ba[3])A.stencilOpSeparate(ue,Od,ge,ve),Ba[0]=ue,Ba[1]=Od,Ba[2]=ge,Ba[3]=ve}A.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;A.enable(3042);u.blend_enable=!0;A.blendEquationSeparate(32774,32774);Sa[0]=32774;Sa[1]=32774;A.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;A.disable(2929);u.depth_enable=!1;A.enable(3089);u.scissor_enable=!0;A.disable(2960);u.stencil_enable=!1;
if(d=u.profile)e=performance.now(),c.count+=g;A.useProgram(b.program);m=J.angle_instanced_arrays;var yd;ja.setVAO(null);yd=r.instances;for(k=0;k<g;++k){D=a[k];var Cd,Gd,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb,hd,Hb,pc,Wa,Rc,ac,mc,Id,rd,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb;Cd=D.viewport;Gd=Cd.x|0;zd=Cd.y|0;xe="width"in Cd?Cd.width|0:x.framebufferWidth-Gd;Me="height"in
Cd?Cd.height|0:x.framebufferHeight-zd;Qe=x.viewportWidth;x.viewportWidth=xe;Ad=x.viewportHeight;x.viewportHeight=Me;A.viewport(Gd,zd,xe,Me);Y[0]=Gd;Y[1]=zd;Y[2]=xe;Y[3]=Me;Be=D.viewport;Vd=Be.x|0;Wd=Be.y|0;ae="width"in Be?Be.width|0:x.framebufferWidth-Vd;Yd="height"in Be?Be.height|0:x.framebufferHeight-Wd;A.scissor(Vd,Wd,ae,Yd);S[0]=Vd;S[1]=Wd;S[2]=ae;S[3]=Yd;ga.buffer=D.positionBuffer;qd=!1;nd=null;vd=0;ad=!1;Uc=sd=0;Dd=1;Nc=0;Ic=5126;Hb=hd=fb=qc=0;aa(ga)?(qd=!0,nd=Ia.createStream(34962,ga),Ic=nd.dtype):
(nd=Ia.getBuffer(ga))?Ic=nd.dtype:"constant"in ga?(Dd=2,"number"===typeof ga.constant?(fb=ga.constant,hd=Hb=qc=0):(fb=0<ga.constant.length?ga.constant[0]:0,hd=1<ga.constant.length?ga.constant[1]:0,Hb=2<ga.constant.length?ga.constant[2]:0,qc=3<ga.constant.length?ga.constant[3]:0)):(nd=aa(ga.buffer)?Ia.createStream(34962,ga.buffer):Ia.getBuffer(ga.buffer),Ic="type"in ga?mb[ga.type]:nd.dtype,ad=!!ga.normalized,Uc=ga.size|0,sd=ga.offset|0,Nc=ga.stride|0,vd=ga.divisor|0);pc=f.location;Wa=w[pc];if(1===
Dd){Wa.buffer||A.enableVertexAttribArray(pc);Rc=Uc||2;if(Wa.type!==Ic||Wa.size!==Rc||Wa.buffer!==nd||Wa.normalized!==ad||Wa.offset!==sd||Wa.stride!==Nc)A.bindBuffer(34962,nd.buffer),A.vertexAttribPointer(pc,Rc,Ic,ad,Nc,sd),Wa.type=Ic,Wa.size=Rc,Wa.buffer=nd,Wa.normalized=ad,Wa.offset=sd,Wa.stride=Nc;Wa.divisor!==vd&&(m.vertexAttribDivisorANGLE(pc,vd),Wa.divisor=vd)}else if(Wa.buffer&&(A.disableVertexAttribArray(pc),Wa.buffer=null),Wa.x!==fb||Wa.y!==hd||Wa.z!==Hb||Wa.w!==qc)A.vertexAttrib4f(pc,fb,
hd,Hb,qc),Wa.x=fb,Wa.y=hd,Wa.z=Hb,Wa.w=qc;qa.buffer=D.positionFractBuffer;ac=!1;mc=null;Id=0;rd=!1;cc=Fc=0;Cc=1;Yc=0;Yb=5126;ud=Ca=Xa=Gc=0;aa(qa)?(ac=!0,mc=Ia.createStream(34962,qa),Yb=mc.dtype):(mc=Ia.getBuffer(qa))?Yb=mc.dtype:"constant"in qa?(Cc=2,"number"===typeof qa.constant?(Xa=qa.constant,Ca=ud=Gc=0):(Xa=0<qa.constant.length?qa.constant[0]:0,Ca=1<qa.constant.length?qa.constant[1]:0,ud=2<qa.constant.length?qa.constant[2]:0,Gc=3<qa.constant.length?qa.constant[3]:0)):(mc=aa(qa.buffer)?Ia.createStream(34962,
qa.buffer):Ia.getBuffer(qa.buffer),Yb="type"in qa?mb[qa.type]:mc.dtype,rd=!!qa.normalized,cc=qa.size|0,Fc=qa.offset|0,Yc=qa.stride|0,Id=qa.divisor|0);Ib=n.location;Ta=w[Ib];if(1===Cc){Ta.buffer||A.enableVertexAttribArray(Ib);Ub=cc||2;if(Ta.type!==Yb||Ta.size!==Ub||Ta.buffer!==mc||Ta.normalized!==rd||Ta.offset!==Fc||Ta.stride!==Yc)A.bindBuffer(34962,mc.buffer),A.vertexAttribPointer(Ib,Ub,Yb,rd,Yc,Fc),Ta.type=Yb,Ta.size=Ub,Ta.buffer=mc,Ta.normalized=rd,Ta.offset=Fc,Ta.stride=Yc;Ta.divisor!==Id&&(m.vertexAttribDivisorANGLE(Ib,
Id),Ta.divisor=Id)}else if(Ta.buffer&&(A.disableVertexAttribArray(Ib),Ta.buffer=null),Ta.x!==Xa||Ta.y!==Ca||Ta.z!==ud||Ta.w!==Gc)A.vertexAttrib4f(Ib,Xa,Ca,ud,Gc),Ta.x=Xa,Ta.y=Ca,Ta.z=ud,Ta.w=Gc;bb=D.fill;Dc=bb[0];ye=bb[1];Rb=bb[2];Sb=bb[3];k&&Wb===Dc&&jc===ye&&jd===Rb&&Oa===Sb||(Wb=Dc,jc=ye,jd=Rb,Oa=Sb,A.uniform4f(H.location,Dc,ye,Rb,Sb));nb=D.scale;tb=nb[0];Pa=nb[1];k&&gb===tb&&nc===Pa||(gb=tb,nc=Pa,A.uniform2f(q.location,tb,Pa));Xb=D.scaleFract;bd=Xb[0];kc=Xb[1];k&&cb===bd&&Zc===kc||(cb=bd,Zc=kc,
A.uniform2f(t.location,bd,kc));hc=D.translate;ib=hc[0];ta=hc[1];k&&jb===ib&&ob===ta||(jb=ib,ob=ta,A.uniform2f(v.location,ib,ta));wa=D.translateFract;Ua=wa[0];za=wa[1];k&&ab===Ua&&db===za||(ab=Ua,db=za,A.uniform2f(G.location,Ua,za));Ma=D.id;k&&Ab===Ma||(Ab=Ma,A.uniform1f(y.location,Ma));zb=D.opacity;k&&Ra===zb||(Ra=zb,A.uniform1f(h.location,zb));Hc=p.call(this,x,D,k);Jb=null;(Jb=(Lb=aa(Hc))?ca.createStream(Hc):ca.getElements(Hc))&&A.bindBuffer(34963,Jb.buffer.buffer);if(Tb=Jb?Jb.vertCount:-1)0<yd?
Jb?m.drawElementsInstancedANGLE(4,Tb,Jb.type,0<<(Jb.type-5121>>1),yd):m.drawArraysInstancedANGLE(4,0,Tb,yd):0>yd&&(Jb?A.drawElements(4,Tb,Jb.type,0<<(Jb.type-5121>>1)):A.drawArrays(4,0,Tb)),x.viewportWidth=Qe,x.viewportHeight=Ad,qd&&Ia.destroyStream(nd),ac&&Ia.destroyStream(mc),Lb&&ca.destroyStream(Jb)}u.dirty=!0;ja.setVAO(null);d&&(c.cpuTime+=performance.now()-e)},draw:function(b){var a,g,l,p,m,k,K,U,W,la,Ka,L,E,ia,sa,X,fa,ra,M,F,ba,xa;a=R.next;a!==R.cur&&(a?A.bindFramebuffer(36160,a.framebuffer):
A.bindFramebuffer(36160,null),R.cur=a);if(u.dirty){a=I.dither;a!==u.dither&&(a?A.enable(3024):A.disable(3024),u.dither=a);a=I.depth_func;a!==u.depth_func&&(A.depthFunc(a),u.depth_func=a);a=P[0];k=P[1];if(a!==O[0]||k!==O[1])A.depthRange(a,k),O[0]=a,O[1]=k;a=I.depth_mask;a!==u.depth_mask&&(A.depthMask(a),u.depth_mask=a);a=Na[0];k=Na[1];g=Na[2];l=Na[3];if(a!==V[0]||k!==V[1]||g!==V[2]||l!==V[3])A.colorMask(a,k,g,l),V[0]=a,V[1]=k,V[2]=g,V[3]=l;a=I.cull_enable;a!==u.cull_enable&&(a?A.enable(2884):A.disable(2884),
u.cull_enable=a);a=I.cull_face;a!==u.cull_face&&(A.cullFace(a),u.cull_face=a);a=I.frontFace;a!==u.frontFace&&(A.frontFace(a),u.frontFace=a);a=I.lineWidth;a!==u.lineWidth&&(A.lineWidth(a),u.lineWidth=a);a=I.polygonOffset_enable;a!==u.polygonOffset_enable&&(a?A.enable(32823):A.disable(32823),u.polygonOffset_enable=a);a=T[0];k=T[1];if(a!==na[0]||k!==na[1])A.polygonOffset(a,k),na[0]=a,na[1]=k;a=I.sample_alpha;a!==u.sample_alpha&&(a?A.enable(32926):A.disable(32926),u.sample_alpha=a);a=I.sample_enable;
a!==u.sample_enable&&(a?A.enable(32928):A.disable(32928),u.sample_enable=a);a=Q[0];k=Q[1];if(a!==Gb[0]||k!==Gb[1])A.sampleCoverage(a,k),Gb[0]=a,Gb[1]=k;a=I.stencil_mask;a!==u.stencil_mask&&(A.stencilMask(a),u.stencil_mask=a);a=B[0];k=B[1];g=B[2];if(a!==ma[0]||k!==ma[1]||g!==ma[2])A.stencilFunc(a,k,g),ma[0]=a,ma[1]=k,ma[2]=g;a=Ea[0];k=Ea[1];g=Ea[2];l=Ea[3];if(a!==yb[0]||k!==yb[1]||g!==yb[2]||l!==yb[3])A.stencilOpSeparate(a,k,g,l),yb[0]=a,yb[1]=k,yb[2]=g,yb[3]=l;a=da[0];k=da[1];g=da[2];l=da[3];if(a!==
Ba[0]||k!==Ba[1]||g!==Ba[2]||l!==Ba[3])A.stencilOpSeparate(a,k,g,l),Ba[0]=a,Ba[1]=k,Ba[2]=g,Ba[3]=l}a=b.viewport;g=a.x|0;l=a.y|0;p="width"in a?a.width|0:x.framebufferWidth-g;m="height"in a?a.height|0:x.framebufferHeight-l;a=x.viewportWidth;x.viewportWidth=p;k=x.viewportHeight;x.viewportHeight=m;A.viewport(g,l,p,m);Y[0]=g;Y[1]=l;Y[2]=p;Y[3]=m;A.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;A.enable(3042);u.blend_enable=!0;A.blendEquationSeparate(32774,32774);Sa[0]=32774;Sa[1]=32774;A.blendFuncSeparate(770,
771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;A.disable(2929);u.depth_enable=!1;m=b.viewport;g=m.x|0;l=m.y|0;p="width"in m?m.width|0:x.framebufferWidth-g;m="height"in m?m.height|0:x.framebufferHeight-l;A.scissor(g,l,p,m);S[0]=g;S[1]=l;S[2]=p;S[3]=m;A.enable(3089);u.scissor_enable=!0;A.disable(2960);u.stencil_enable=!1;if(g=u.profile)K=performance.now(),c.count++;A.useProgram(d.program);l=J.angle_instanced_arrays;ja.setVAO(null);ga.buffer=b.positionBuffer;p=!1;U=0;W=!1;Ka=la=0;L=1;E=0;ia=5126;ra=
fa=X=sa=0;aa(ga)?(p=!0,m=Ia.createStream(34962,ga),ia=m.dtype):(m=Ia.getBuffer(ga))?ia=m.dtype:"constant"in ga?(L=2,"number"===typeof ga.constant?(X=ga.constant,fa=ra=sa=0):(X=0<ga.constant.length?ga.constant[0]:0,fa=1<ga.constant.length?ga.constant[1]:0,ra=2<ga.constant.length?ga.constant[2]:0,sa=3<ga.constant.length?ga.constant[3]:0)):(m=aa(ga.buffer)?Ia.createStream(34962,ga.buffer):Ia.getBuffer(ga.buffer),ia="type"in ga?mb[ga.type]:m.dtype,W=!!ga.normalized,Ka=ga.size|0,la=ga.offset|0,E=ga.stride|
0,U=ga.divisor|0);M=f.location;F=w[M];if(1===L){F.buffer||A.enableVertexAttribArray(M);Ka=Ka||2;if(F.type!==ia||F.size!==Ka||F.buffer!==m||F.normalized!==W||F.offset!==la||F.stride!==E)A.bindBuffer(34962,m.buffer),A.vertexAttribPointer(M,Ka,ia,W,E,la),F.type=ia,F.size=Ka,F.buffer=m,F.normalized=W,F.offset=la,F.stride=E;F.divisor!==U&&(l.vertexAttribDivisorANGLE(M,U),F.divisor=U)}else if(F.buffer&&(A.disableVertexAttribArray(M),F.buffer=null),F.x!==X||F.y!==fa||F.z!==ra||F.w!==sa)A.vertexAttrib4f(M,
X,fa,ra,sa),F.x=X,F.y=fa,F.z=ra,F.w=sa;qa.buffer=b.positionFractBuffer;U=!1;la=0;E=!1;sa=ia=0;X=1;M=0;F=5126;xa=ba=ra=fa=0;aa(qa)?(U=!0,W=Ia.createStream(34962,qa),F=W.dtype):(W=Ia.getBuffer(qa))?F=W.dtype:"constant"in qa?(X=2,"number"===typeof qa.constant?(ra=qa.constant,ba=xa=fa=0):(ra=0<qa.constant.length?qa.constant[0]:0,ba=1<qa.constant.length?qa.constant[1]:0,xa=2<qa.constant.length?qa.constant[2]:0,fa=3<qa.constant.length?qa.constant[3]:0)):(W=aa(qa.buffer)?Ia.createStream(34962,qa.buffer):
Ia.getBuffer(qa.buffer),F="type"in qa?mb[qa.type]:W.dtype,E=!!qa.normalized,sa=qa.size|0,ia=qa.offset|0,M=qa.stride|0,la=qa.divisor|0);Ka=n.location;L=w[Ka];if(1===X){L.buffer||A.enableVertexAttribArray(Ka);sa=sa||2;if(L.type!==F||L.size!==sa||L.buffer!==W||L.normalized!==E||L.offset!==ia||L.stride!==M)A.bindBuffer(34962,W.buffer),A.vertexAttribPointer(Ka,sa,F,E,M,ia),L.type=F,L.size=sa,L.buffer=W,L.normalized=E,L.offset=ia,L.stride=M;L.divisor!==la&&(l.vertexAttribDivisorANGLE(Ka,la),L.divisor=la)}else if(L.buffer&&
(A.disableVertexAttribArray(Ka),L.buffer=null),L.x!==ra||L.y!==ba||L.z!==xa||L.w!==fa)A.vertexAttrib4f(Ka,ra,ba,xa,fa),L.x=ra,L.y=ba,L.z=xa,L.w=fa;la=b.fill;A.uniform4f(H.location,la[0],la[1],la[2],la[3]);la=b.scale;A.uniform2f(q.location,la[0],la[1]);la=b.scaleFract;A.uniform2f(t.location,la[0],la[1]);la=b.translate;A.uniform2f(v.location,la[0],la[1]);la=b.translateFract;A.uniform2f(G.location,la[0],la[1]);A.uniform1f(y.location,b.id);A.uniform1f(h.location,b.opacity);la=e.call(this,x,b,0);(la=(b=
aa(la))?ca.createStream(la):ca.getElements(la))&&A.bindBuffer(34963,la.buffer.buffer);if(E=la?la.vertCount:-1)ia=r.instances,0<ia?la?l.drawElementsInstancedANGLE(4,E,la.type,0<<(la.type-5121>>1),ia):l.drawArraysInstancedANGLE(4,0,E,ia):0>ia&&(la?A.drawElements(4,E,la.type,0<<(la.type-5121>>1)):A.drawArrays(4,0,E)),u.dirty=!0,ja.setVAO(null),x.viewportWidth=a,x.viewportHeight=k,g&&(c.cpuTime+=performance.now()-K),p&&Ia.destroyStream(m),U&&Ia.destroyStream(W),b&&ca.destroyStream(la)},scope:function(b,
a,f){var h,n,q,p,t,d,e,v,y,w,D,H,G,z,A,B,J,F,R,O,P,Q,C,S,T,Y,V,da,ma,ka,ea,na,Ea,ja,Ba,Na,Sa,Gb,yb,Gd,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb,hd,Hb,pc,Wa,Rc,ac,mc,Id,rd,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb;h=b.viewport;n=h.x|0;q=h.y|0;p="width"in h?h.width|0:x.framebufferWidth-n;t="height"in h?h.height|0:x.framebufferHeight-q;d=x.viewportWidth;x.viewportWidth=p;e=x.viewportHeight;
x.viewportHeight=t;v=Ka[0];Ka[0]=n;y=Ka[1];Ka[1]=q;w=Ka[2];Ka[2]=p;D=Ka[3];Ka[3]=t;H=W[0];W[0]=0;G=W[1];W[1]=0;z=W[2];W[2]=0;A=W[3];W[3]=0;B=I.blend_enable;I.blend_enable=!0;J=la[0];la[0]=32774;F=la[1];la[1]=32774;R=Cb[0];Cb[0]=770;O=Cb[1];Cb[1]=771;P=Cb[2];Cb[2]=773;Q=Cb[3];Cb[3]=1;C=I.depth_enable;I.depth_enable=!1;S=b.viewport;T=S.x|0;Y=S.y|0;V="width"in S?S.width|0:x.framebufferWidth-T;da="height"in S?S.height|0:x.framebufferHeight-Y;ma=$a[0];$a[0]=T;ka=$a[1];$a[1]=Y;ea=$a[2];$a[2]=V;na=$a[3];
$a[3]=da;Ea=I.scissor_enable;I.scissor_enable=!0;ja=I.stencil_enable;I.stencil_enable=!1;if(Ba=u.profile)Na=performance.now(),c.count++;Sa=m.call(this,x,b,f);Gb=null;Gb=(yb=aa(Sa))?ca.createStream(Sa):ca.getElements(Sa);Gd=r.elements;r.elements=Gb;zd=r.offset;r.offset=0;xe=Gb?Gb.vertCount:-1;Me=r.count;r.count=xe;Qe=r.primitive;r.primitive=4;Ad=b.fill;Be=K[14];K[14]=Ad;Vd=b.id;Wd=K[31];K[31]=Vd;ae=b.opacity;Yd=K[10];K[10]=ae;qd=x.pixelRatio;nd=K[34];K[34]=qd;vd=b.scale;ad=K[6];K[6]=vd;sd=b.scaleFract;
Uc=K[7];K[7]=sd;Dd=b.translate;Nc=K[8];K[8]=Dd;Ic=b.translateFract;qc=K[9];K[9]=Ic;fb=k.call(this,x,b,f);hd=K[3];K[3]=fb;ga.buffer=b.positionBuffer;Hb=!1;pc=null;Wa=0;Rc=!1;mc=ac=0;Id=1;rd=0;Fc=5126;Yb=Yc=Cc=cc=0;aa(ga)?(Hb=!0,pc=Ia.createStream(34962,ga),Fc=pc.dtype):(pc=Ia.getBuffer(ga))?Fc=pc.dtype:"constant"in ga?(Id=2,"number"===typeof ga.constant?(Cc=ga.constant,Yc=Yb=cc=0):(Cc=0<ga.constant.length?ga.constant[0]:0,Yc=1<ga.constant.length?ga.constant[1]:0,Yb=2<ga.constant.length?ga.constant[2]:
0,cc=3<ga.constant.length?ga.constant[3]:0)):(pc=aa(ga.buffer)?Ia.createStream(34962,ga.buffer):Ia.getBuffer(ga.buffer),Fc="type"in ga?mb[ga.type]:pc.dtype,Rc=!!ga.normalized,mc=ga.size|0,ac=ga.offset|0,rd=ga.stride|0,Wa=ga.divisor|0);Gc=l.buffer;l.buffer=pc;Xa=l.divisor;l.divisor=Wa;Ca=l.normalized;l.normalized=Rc;ud=l.offset;l.offset=ac;Ib=l.size;l.size=mc;Ta=l.state;l.state=Id;Ub=l.stride;l.stride=rd;bb=l.type;l.type=Fc;Dc=l.w;l.w=cc;Wb=l.x;l.x=Cc;ye=l.y;l.y=Yc;jc=l.z;l.z=Yb;qa.buffer=b.positionFractBuffer;
Rb=!1;jd=null;Sb=0;Oa=!1;tb=nb=0;gb=1;Pa=0;nc=5126;kc=cb=bd=Xb=0;aa(qa)?(Rb=!0,jd=Ia.createStream(34962,qa),nc=jd.dtype):(jd=Ia.getBuffer(qa))?nc=jd.dtype:"constant"in qa?(gb=2,"number"===typeof qa.constant?(bd=qa.constant,cb=kc=Xb=0):(bd=0<qa.constant.length?qa.constant[0]:0,cb=1<qa.constant.length?qa.constant[1]:0,kc=2<qa.constant.length?qa.constant[2]:0,Xb=3<qa.constant.length?qa.constant[3]:0)):(jd=aa(qa.buffer)?Ia.createStream(34962,qa.buffer):Ia.getBuffer(qa.buffer),nc="type"in qa?mb[qa.type]:
jd.dtype,Oa=!!qa.normalized,tb=qa.size|0,nb=qa.offset|0,Pa=qa.stride|0,Sb=qa.divisor|0);Zc=g.buffer;g.buffer=jd;hc=g.divisor;g.divisor=Sb;ib=g.normalized;g.normalized=Oa;jb=g.offset;g.offset=nb;ta=g.size;g.size=tb;ob=g.state;g.state=gb;wa=g.stride;g.stride=Pa;Ua=g.type;g.type=nc;ab=g.w;g.w=Xb;za=g.x;g.x=bd;db=g.y;g.y=cb;Ma=g.z;g.z=kc;Ab=U.vert;U.vert=42;zb=U.frag;U.frag=41;u.dirty=!0;a(x,b,f);x.viewportWidth=d;x.viewportHeight=e;Ka[0]=v;Ka[1]=y;Ka[2]=w;Ka[3]=D;W[0]=H;W[1]=G;W[2]=z;W[3]=A;I.blend_enable=
B;la[0]=J;la[1]=F;Cb[0]=R;Cb[1]=O;Cb[2]=P;Cb[3]=Q;I.depth_enable=C;$a[0]=ma;$a[1]=ka;$a[2]=ea;$a[3]=na;I.scissor_enable=Ea;I.stencil_enable=ja;Ba&&(c.cpuTime+=performance.now()-Na);yb&&ca.destroyStream(Gb);r.elements=Gd;r.offset=zd;r.count=Me;r.primitive=Qe;K[14]=Be;K[31]=Wd;K[10]=Yd;K[34]=nd;K[6]=ad;K[7]=Uc;K[8]=Nc;K[9]=qc;K[3]=hd;Hb&&Ia.destroyStream(pc);l.buffer=Gc;l.divisor=Xa;l.normalized=Ca;l.offset=ud;l.size=Ib;l.state=Ta;l.stride=Ub;l.type=bb;l.w=Dc;l.x=Wb;l.y=ye;l.z=jc;Rb&&Ia.destroyStream(jd);
g.buffer=Zc;g.divisor=hc;g.normalized=ib;g.offset=jb;g.size=ta;g.state=ob;g.stride=wa;g.type=Ua;g.w=ab;g.x=za;g.y=db;g.z=Ma;U.vert=Ab;U.frag=zb;u.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,Ia,x,u,r,ca,J,R,A,aa,I,U,K,ja,W,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,Q,Gb,$a,S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa,$b,sc,
ic,td,zc){var Z,N,ha,Fa,sb,Pc,Qc,L,E,ia,sa,X,fa,ra,M,F,ba,xa,ya,Ja,C,oc,Eb,pa,Fb,xb,Ye,xd,he,ee,we,ue,Od,ge,ve,yd,Cd,Gd,zd;Z=a.attributes;N=a.buffer;ha=a.context;Fa=a.current;sb=a.draw;Pc=a.elements;Qc=a.extensions;L=a.framebuffer;E=a.gl;ia=a.isBufferArgs;sa=a.next;X=a.shader;fa=a.uniforms;ra=a.vao;M=sa.blend_color;F=Fa.blend_color;ba=sa.blend_equation;xa=Fa.blend_equation;ya=sa.blend_func;Ja=Fa.blend_func;C=sa.colorMask;oc=Fa.colorMask;Eb=sa.depth_range;pa=Fa.depth_range;Fb=sa.polygonOffset_offset;
xb=Fa.polygonOffset_offset;Ye=sa.sample_coverage;xd=Fa.sample_coverage;he=sa.scissor_box;ee=Fa.scissor_box;we=sa.stencil_func;ue=Fa.stencil_func;Od=sa.stencil_opBack;ge=Fa.stencil_opBack;ve=sa.stencil_opFront;yd=Fa.stencil_opFront;Cd=sa.viewport;Gd=Fa.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var f,h,g,n,l,q;f=L.next;f!==L.cur&&(f?E.bindFramebuffer(36160,f.framebuffer):E.bindFramebuffer(36160,null),L.cur=f);
if(Fa.dirty){var p,t,d,e,m,k,v,y,w,u,D,H,G,z,x,r,Ia,A,J,I,oa,M,R,ca,K,U,aa,X,W,fa,ya,Ta,ja,bb;p=sa.dither;p!==Fa.dither&&(p?E.enable(3024):E.disable(3024),Fa.dither=p);t=ba[0];d=ba[1];if(t!==xa[0]||d!==xa[1])E.blendEquationSeparate(t,d),xa[0]=t,xa[1]=d;e=sa.depth_func;e!==Fa.depth_func&&(E.depthFunc(e),Fa.depth_func=e);m=Eb[0];k=Eb[1];if(m!==pa[0]||k!==pa[1])E.depthRange(m,k),pa[0]=m,pa[1]=k;v=sa.depth_mask;v!==Fa.depth_mask&&(E.depthMask(v),Fa.depth_mask=v);y=C[0];w=C[1];u=C[2];D=C[3];if(y!==oc[0]||
w!==oc[1]||u!==oc[2]||D!==oc[3])E.colorMask(y,w,u,D),oc[0]=y,oc[1]=w,oc[2]=u,oc[3]=D;H=sa.cull_enable;H!==Fa.cull_enable&&(H?E.enable(2884):E.disable(2884),Fa.cull_enable=H);G=sa.cull_face;G!==Fa.cull_face&&(E.cullFace(G),Fa.cull_face=G);z=sa.frontFace;z!==Fa.frontFace&&(E.frontFace(z),Fa.frontFace=z);x=sa.lineWidth;x!==Fa.lineWidth&&(E.lineWidth(x),Fa.lineWidth=x);r=sa.polygonOffset_enable;r!==Fa.polygonOffset_enable&&(r?E.enable(32823):E.disable(32823),Fa.polygonOffset_enable=r);Ia=Fb[0];A=Fb[1];
if(Ia!==xb[0]||A!==xb[1])E.polygonOffset(Ia,A),xb[0]=Ia,xb[1]=A;J=sa.sample_alpha;J!==Fa.sample_alpha&&(J?E.enable(32926):E.disable(32926),Fa.sample_alpha=J);I=sa.sample_enable;I!==Fa.sample_enable&&(I?E.enable(32928):E.disable(32928),Fa.sample_enable=I);oa=Ye[0];M=Ye[1];if(oa!==xd[0]||M!==xd[1])E.sampleCoverage(oa,M),xd[0]=oa,xd[1]=M;R=sa.stencil_mask;R!==Fa.stencil_mask&&(E.stencilMask(R),Fa.stencil_mask=R);ca=we[0];K=we[1];U=we[2];if(ca!==ue[0]||K!==ue[1]||U!==ue[2])E.stencilFunc(ca,K,U),ue[0]=
ca,ue[1]=K,ue[2]=U;aa=ve[0];X=ve[1];W=ve[2];fa=ve[3];if(aa!==yd[0]||X!==yd[1]||W!==yd[2]||fa!==yd[3])E.stencilOpSeparate(aa,X,W,fa),yd[0]=aa,yd[1]=X,yd[2]=W,yd[3]=fa;ya=Od[0];Ta=Od[1];ja=Od[2];bb=Od[3];if(ya!==ge[0]||Ta!==ge[1]||ja!==ge[2]||bb!==ge[3])E.stencilOpSeparate(ya,Ta,ja,bb),ge[0]=ya,ge[1]=Ta,ge[2]=ja,ge[3]=bb}E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);Fa.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);Ja[0]=770;Ja[1]=771;Ja[2]=773;Ja[3]=1;E.disable(2929);Fa.depth_enable=
!1;E.enable(3089);Fa.scissor_enable=!0;E.disable(2960);Fa.stencil_enable=!1;if(h=Fa.profile)g=performance.now(),c.count+=a;E.useProgram(ka.program);n=Qc.angle_instanced_arrays;var Dc;ra.setVAO(null);E.uniform1i(B.location,!1);E.uniform1i(yb.location,na.bind());Dc=sb.instances;for(l=0;l<a;++l){q=b[l];var Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,
Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,Cd,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,he,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf;Wb=q.viewport;ye=Wb.x|0;jc=Wb.y|0;Rb="width"in Wb?Wb.width|0:ha.framebufferWidth-ye;jd="height"in
Wb?Wb.height|0:ha.framebufferHeight-jc;Sb=ha.viewportWidth;ha.viewportWidth=Rb;Oa=ha.viewportHeight;ha.viewportHeight=jd;E.viewport(ye,jc,Rb,jd);Gd[0]=ye;Gd[1]=jc;Gd[2]=Rb;Gd[3]=jd;nb=q.viewport;tb=nb.x|0;gb=nb.y|0;Pa="width"in nb?nb.width|0:ha.framebufferWidth-tb;nc="height"in nb?nb.height|0:ha.framebufferHeight-gb;E.scissor(tb,gb,Pa,nc);ee[0]=tb;ee[1]=gb;ee[2]=Pa;ee[3]=nc;Xb=la.call(this,ha,q,l);bd=!1;cb=null;kc=0;Zc=!1;ib=hc=0;jb=1;ta=0;ob=5126;za=ab=Ua=wa=0;ia(Xb)?(bd=!0,cb=N.createStream(34962,
Xb),ob=cb.dtype):(cb=N.getBuffer(Xb))?ob=cb.dtype:"constant"in Xb?(jb=2,"number"===typeof Xb.constant?(Ua=Xb.constant,ab=za=wa=0):(Ua=0<Xb.constant.length?Xb.constant[0]:0,ab=1<Xb.constant.length?Xb.constant[1]:0,za=2<Xb.constant.length?Xb.constant[2]:0,wa=3<Xb.constant.length?Xb.constant[3]:0)):(cb=ia(Xb.buffer)?N.createStream(34962,Xb.buffer):N.getBuffer(Xb.buffer),ob="type"in Xb?zd[Xb.type]:cb.dtype,Zc=!!Xb.normalized,ib=Xb.size|0,hc=Xb.offset|0,ta=Xb.stride|0,kc=Xb.divisor|0);db=sc.location;Ma=
Z[db];if(1===jb){Ma.buffer||E.enableVertexAttribArray(db);Ab=ib||1;if(Ma.type!==ob||Ma.size!==Ab||Ma.buffer!==cb||Ma.normalized!==Zc||Ma.offset!==hc||Ma.stride!==ta)E.bindBuffer(34962,cb.buffer),E.vertexAttribPointer(db,Ab,ob,Zc,ta,hc),Ma.type=ob,Ma.size=Ab,Ma.buffer=cb,Ma.normalized=Zc,Ma.offset=hc,Ma.stride=ta;Ma.divisor!==kc&&(n.vertexAttribDivisorANGLE(db,kc),Ma.divisor=kc)}else if(Ma.buffer&&(E.disableVertexAttribArray(db),Ma.buffer=null),Ma.x!==Ua||Ma.y!==ab||Ma.z!==za||Ma.w!==wa)E.vertexAttrib4f(db,
Ua,ab,za,wa),Ma.x=Ua,Ma.y=ab,Ma.z=za,Ma.w=wa;zb=Sa.call(this,ha,q,l);Ra=!1;Hc=null;Jb=0;Lb=!1;ua=Tb=0;Jd=1;La=0;Ob=5126;dc=va=hb=eb=0;ia(zb)?(Ra=!0,Hc=N.createStream(34962,zb),Ob=Hc.dtype):(Hc=N.getBuffer(zb))?Ob=Hc.dtype:"constant"in zb?(Jd=2,"number"===typeof zb.constant?(hb=zb.constant,va=dc=eb=0):(hb=0<zb.constant.length?zb.constant[0]:0,va=1<zb.constant.length?zb.constant[1]:0,dc=2<zb.constant.length?zb.constant[2]:0,eb=3<zb.constant.length?zb.constant[3]:0)):(Hc=ia(zb.buffer)?N.createStream(34962,
zb.buffer):N.getBuffer(zb.buffer),Ob="type"in zb?zd[zb.type]:Hc.dtype,Lb=!!zb.normalized,ua=zb.size|0,Tb=zb.offset|0,La=zb.stride|0,Jb=zb.divisor|0);Da=td.location;pb=Z[Da];if(1===Jd){pb.buffer||E.enableVertexAttribArray(Da);qb=ua||1;if(pb.type!==Ob||pb.size!==qb||pb.buffer!==Hc||pb.normalized!==Lb||pb.offset!==Tb||pb.stride!==La)E.bindBuffer(34962,Hc.buffer),E.vertexAttribPointer(Da,qb,Ob,Lb,La,Tb),pb.type=Ob,pb.size=qb,pb.buffer=Hc,pb.normalized=Lb,pb.offset=Tb,pb.stride=La;pb.divisor!==Jb&&(n.vertexAttribDivisorANGLE(Da,
Jb),pb.divisor=Jb)}else if(pb.buffer&&(E.disableVertexAttribArray(Da),pb.buffer=null),pb.x!==hb||pb.y!==va||pb.z!==dc||pb.w!==eb)E.vertexAttrib4f(Da,hb,va,dc,eb),pb.x=hb,pb.y=va,pb.z=dc,pb.w=eb;Ya=Cb.call(this,ha,q,l);Za=!1;lc=null;dd=0;tc=!1;Mb=Va=0;Oc=1;Ga=0;vc=5126;ub=kb=Aa=Qa=0;ia(Ya)?(Za=!0,lc=N.createStream(34962,Ya),vc=lc.dtype):(lc=N.getBuffer(Ya))?vc=lc.dtype:"constant"in Ya?(Oc=2,"number"===typeof Ya.constant?(Aa=Ya.constant,kb=ub=Qa=0):(Aa=0<Ya.constant.length?Ya.constant[0]:0,kb=1<Ya.constant.length?
Ya.constant[1]:0,ub=2<Ya.constant.length?Ya.constant[2]:0,Qa=3<Ya.constant.length?Ya.constant[3]:0)):(lc=ia(Ya.buffer)?N.createStream(34962,Ya.buffer):N.getBuffer(Ya.buffer),vc="type"in Ya?zd[Ya.type]:lc.dtype,tc=!!Ya.normalized,Mb=Ya.size|0,Va=Ya.offset|0,Ga=Ya.stride|0,dd=Ya.divisor|0);Bb=ic.location;rb=Z[Bb];if(1===Oc){rb.buffer||E.enableVertexAttribArray(Bb);uc=Mb||1;if(rb.type!==vc||rb.size!==uc||rb.buffer!==lc||rb.normalized!==tc||rb.offset!==Va||rb.stride!==Ga)E.bindBuffer(34962,lc.buffer),
E.vertexAttribPointer(Bb,uc,vc,tc,Ga,Va),rb.type=vc,rb.size=uc,rb.buffer=lc,rb.normalized=tc,rb.offset=Va,rb.stride=Ga;rb.divisor!==dd&&(n.vertexAttribDivisorANGLE(Bb,dd),rb.divisor=dd)}else if(rb.buffer&&(E.disableVertexAttribArray(Bb),rb.buffer=null),rb.x!==Aa||rb.y!==kb||rb.z!==ub||rb.w!==Qa)E.vertexAttrib4f(Bb,Aa,kb,ub,Qa),rb.x=Aa,rb.y=kb,rb.z=ub,rb.w=Qa;vb=ea.call(this,ha,q,l);wd=!1;rc=null;Ed=0;Jc=!1;fd=ed=0;Vb=1;bc=0;Pb=5126;wb=lb=Zb=Ha=0;ia(vb)?(wd=!0,rc=N.createStream(34962,vb),Pb=rc.dtype):
(rc=N.getBuffer(vb))?Pb=rc.dtype:"constant"in vb?(Vb=2,"number"===typeof vb.constant?(Zb=vb.constant,lb=wb=Ha=0):(Zb=0<vb.constant.length?vb.constant[0]:0,lb=1<vb.constant.length?vb.constant[1]:0,wb=2<vb.constant.length?vb.constant[2]:0,Ha=3<vb.constant.length?vb.constant[3]:0)):(rc=ia(vb.buffer)?N.createStream(34962,vb.buffer):N.getBuffer(vb.buffer),Pb="type"in vb?zd[vb.type]:rc.dtype,Jc=!!vb.normalized,fd=vb.size|0,ed=vb.offset|0,bc=vb.stride|0,Ed=vb.divisor|0);Nb=zc.location;Qb=Z[Nb];if(1===Vb){Qb.buffer||
E.enableVertexAttribArray(Nb);ec=fd||1;if(Qb.type!==Pb||Qb.size!==ec||Qb.buffer!==rc||Qb.normalized!==Jc||Qb.offset!==ed||Qb.stride!==bc)E.bindBuffer(34962,rc.buffer),E.vertexAttribPointer(Nb,ec,Pb,Jc,bc,ed),Qb.type=Pb,Qb.size=ec,Qb.buffer=rc,Qb.normalized=Jc,Qb.offset=ed,Qb.stride=bc;Qb.divisor!==Ed&&(n.vertexAttribDivisorANGLE(Nb,Ed),Qb.divisor=Ed)}else if(Qb.buffer&&(E.disableVertexAttribArray(Nb),Qb.buffer=null),Qb.x!==Zb||Qb.y!==lb||Qb.z!==wb||Qb.w!==Ha)E.vertexAttrib4f(Nb,Zb,lb,wb,Ha),Qb.x=
Zb,Qb.y=lb,Qb.z=wb,Qb.w=Ha;gc=Na.call(this,ha,q,l);Ze=!1;xc=null;yc=0;Ac=!1;$c=Kc=0;Sc=1;Lc=0;Kb=5126;Tc=Ec=Mc=Db=0;ia(gc)?(Ze=!0,xc=N.createStream(34962,gc),Kb=xc.dtype):(xc=N.getBuffer(gc))?Kb=xc.dtype:"constant"in gc?(Sc=2,"number"===typeof gc.constant?(Mc=gc.constant,Ec=Tc=Db=0):(Mc=0<gc.constant.length?gc.constant[0]:0,Ec=1<gc.constant.length?gc.constant[1]:0,Tc=2<gc.constant.length?gc.constant[2]:0,Db=3<gc.constant.length?gc.constant[3]:0)):(xc=ia(gc.buffer)?N.createStream(34962,gc.buffer):
N.getBuffer(gc.buffer),Kb="type"in gc?zd[gc.type]:xc.dtype,Ac=!!gc.normalized,$c=gc.size|0,Kc=gc.offset|0,Lc=gc.stride|0,yc=gc.divisor|0);fc=ga.location;Wc=Z[fc];if(1===Sc){Wc.buffer||E.enableVertexAttribArray(fc);gd=$c||1;if(Wc.type!==Kb||Wc.size!==gd||Wc.buffer!==xc||Wc.normalized!==Ac||Wc.offset!==Kc||Wc.stride!==Lc)E.bindBuffer(34962,xc.buffer),E.vertexAttribPointer(fc,gd,Kb,Ac,Lc,Kc),Wc.type=Kb,Wc.size=gd,Wc.buffer=xc,Wc.normalized=Ac,Wc.offset=Kc,Wc.stride=Lc;Wc.divisor!==yc&&(n.vertexAttribDivisorANGLE(fc,
yc),Wc.divisor=yc)}else if(Wc.buffer&&(E.disableVertexAttribArray(fc),Wc.buffer=null),Wc.x!==Mc||Wc.y!==Ec||Wc.z!==Tc||Wc.w!==Db)E.vertexAttrib4f(fc,Mc,Ec,Tc,Db),Wc.x=Mc,Wc.y=Ec,Wc.z=Tc,Wc.w=Db;kd=V.call(this,ha,q,l);md=!1;Xc=null;Cd=0;Zd=!1;se=ke=0;me=1;Md=0;Kd=5126;ld=od=Bc=id=0;ia(kd)?(md=!0,Xc=N.createStream(34962,kd),Kd=Xc.dtype):(Xc=N.getBuffer(kd))?Kd=Xc.dtype:"constant"in kd?(me=2,"number"===typeof kd.constant?(Bc=kd.constant,od=ld=id=0):(Bc=0<kd.constant.length?kd.constant[0]:0,od=1<kd.constant.length?
kd.constant[1]:0,ld=2<kd.constant.length?kd.constant[2]:0,id=3<kd.constant.length?kd.constant[3]:0)):(Xc=ia(kd.buffer)?N.createStream(34962,kd.buffer):N.getBuffer(kd.buffer),Kd="type"in kd?zd[kd.type]:Xc.dtype,Zd=!!kd.normalized,se=kd.size|0,ke=kd.offset|0,Md=kd.stride|0,Cd=kd.divisor|0);cd=$a.location;pd=Z[cd];if(1===me){pd.buffer||E.enableVertexAttribArray(cd);Fd=se||1;if(pd.type!==Kd||pd.size!==Fd||pd.buffer!==Xc||pd.normalized!==Zd||pd.offset!==ke||pd.stride!==Md)E.bindBuffer(34962,Xc.buffer),
E.vertexAttribPointer(cd,Fd,Kd,Zd,Md,ke),pd.type=Kd,pd.size=Fd,pd.buffer=Xc,pd.normalized=Zd,pd.offset=ke,pd.stride=Md;pd.divisor!==Cd&&(n.vertexAttribDivisorANGLE(cd,Cd),pd.divisor=Cd)}else if(pd.buffer&&(E.disableVertexAttribArray(cd),pd.buffer=null),pd.x!==Bc||pd.y!==od||pd.z!==ld||pd.w!==id)E.vertexAttrib4f(cd,Bc,od,ld,id),pd.x=Bc,pd.y=od,pd.z=ld,pd.w=id;Hd=P.call(this,ha,q,l);te=!1;ze=null;Ae=0;ne=!1;de=fe=0;pe=1;be=0;ie=5126;le=qe=Vc=wc=0;ia(Hd)?(te=!0,ze=N.createStream(34962,Hd),ie=ze.dtype):
(ze=N.getBuffer(Hd))?ie=ze.dtype:"constant"in Hd?(pe=2,"number"===typeof Hd.constant?(Vc=Hd.constant,qe=le=wc=0):(Vc=0<Hd.constant.length?Hd.constant[0]:0,qe=1<Hd.constant.length?Hd.constant[1]:0,le=2<Hd.constant.length?Hd.constant[2]:0,wc=3<Hd.constant.length?Hd.constant[3]:0)):(ze=ia(Hd.buffer)?N.createStream(34962,Hd.buffer):N.getBuffer(Hd.buffer),ie="type"in Hd?zd[Hd.type]:ze.dtype,ne=!!Hd.normalized,de=Hd.size|0,fe=Hd.offset|0,be=Hd.stride|0,Ae=Hd.divisor|0);Ld=S.location;Pd=Z[Ld];if(1===pe){Pd.buffer||
E.enableVertexAttribArray(Ld);Qd=de||4;if(Pd.type!==ie||Pd.size!==Qd||Pd.buffer!==ze||Pd.normalized!==ne||Pd.offset!==fe||Pd.stride!==be)E.bindBuffer(34962,ze.buffer),E.vertexAttribPointer(Ld,Qd,ie,ne,be,fe),Pd.type=ie,Pd.size=Qd,Pd.buffer=ze,Pd.normalized=ne,Pd.offset=fe,Pd.stride=be;Pd.divisor!==Ae&&(n.vertexAttribDivisorANGLE(Ld,Ae),Pd.divisor=Ae)}else if(Pd.buffer&&(E.disableVertexAttribArray(Ld),Pd.buffer=null),Pd.x!==Vc||Pd.y!==qe||Pd.z!==le||Pd.w!==wc)E.vertexAttrib4f(Ld,Vc,qe,le,wc),Pd.x=
Vc,Pd.y=qe,Pd.z=le,Pd.w=wc;Rd=O.call(this,ha,q,l);je=!1;he=null;Ce=0;oe=!1;Se=Re=0;Ne=1;re=0;Fe=5126;Ge=Je=Ie=He=0;ia(Rd)?(je=!0,he=N.createStream(34962,Rd),Fe=he.dtype):(he=N.getBuffer(Rd))?Fe=he.dtype:"constant"in Rd?(Ne=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ge=He=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?Rd.constant[1]:0,Ge=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(he=ia(Rd.buffer)?N.createStream(34962,Rd.buffer):N.getBuffer(Rd.buffer),
Fe="type"in Rd?zd[Rd.type]:he.dtype,oe=!!Rd.normalized,Se=Rd.size|0,Re=Rd.offset|0,re=Rd.stride|0,Ce=Rd.divisor|0);Nd=Gb.location;Ud=Z[Nd];if(1===Ne){Ud.buffer||E.enableVertexAttribArray(Nd);$d=Se||4;if(Ud.type!==Fe||Ud.size!==$d||Ud.buffer!==he||Ud.normalized!==oe||Ud.offset!==Re||Ud.stride!==re)E.bindBuffer(34962,he.buffer),E.vertexAttribPointer(Nd,$d,Fe,oe,re,Re),Ud.type=Fe,Ud.size=$d,Ud.buffer=he,Ud.normalized=oe,Ud.offset=Re,Ud.stride=re;Ud.divisor!==Ce&&(n.vertexAttribDivisorANGLE(Nd,Ce),Ud.divisor=
Ce)}else if(Ud.buffer&&(E.disableVertexAttribArray(Nd),Ud.buffer=null),Ud.x!==Ie||Ud.y!==Je||Ud.z!==Ge||Ud.w!==He)E.vertexAttrib4f(Nd,Ie,Je,Ge,He),Ud.x=Ie,Ud.y=Je,Ud.z=Ge,Ud.w=He;ce=T.call(this,ha,q,l);Ke=!1;Bd=null;Sd=0;De=!1;cf=Le=0;af=1;Te=0;Oe=5126;Ve=Ue=Xe=$e=0;ia(ce)?(Ke=!0,Bd=N.createStream(34962,ce),Oe=Bd.dtype):(Bd=N.getBuffer(ce))?Oe=Bd.dtype:"constant"in ce?(af=2,"number"===typeof ce.constant?(Xe=ce.constant,Ue=Ve=$e=0):(Xe=0<ce.constant.length?ce.constant[0]:0,Ue=1<ce.constant.length?
ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,$e=3<ce.constant.length?ce.constant[3]:0)):(Bd=ia(ce.buffer)?N.createStream(34962,ce.buffer):N.getBuffer(ce.buffer),Oe="type"in ce?zd[ce.type]:Bd.dtype,De=!!ce.normalized,cf=ce.size|0,Le=ce.offset|0,Te=ce.stride|0,Sd=ce.divisor|0);Td=ma.location;Xd=Z[Td];if(1===af){Xd.buffer||E.enableVertexAttribArray(Td);We=cf||1;if(Xd.type!==Oe||Xd.size!==We||Xd.buffer!==Bd||Xd.normalized!==De||Xd.offset!==Le||Xd.stride!==Te)E.bindBuffer(34962,Bd.buffer),
E.vertexAttribPointer(Td,We,Oe,De,Te,Le),Xd.type=Oe,Xd.size=We,Xd.buffer=Bd,Xd.normalized=De,Xd.offset=Le,Xd.stride=Te;Xd.divisor!==Sd&&(n.vertexAttribDivisorANGLE(Td,Sd),Xd.divisor=Sd)}else if(Xd.buffer&&(E.disableVertexAttribArray(Td),Xd.buffer=null),Xd.x!==Xe||Xd.y!==Ue||Xd.z!==Ve||Xd.w!==$e)E.vertexAttrib4f(Td,Xe,Ue,Ve,$e),Xd.x=Xe,Xd.y=Ue,Xd.z=Ve,Xd.w=$e;jf=ha.pixelRatio;l&&nf===jf||(nf=jf,E.uniform1f(Ka.location,jf));ff=q.scale;kf=ff[0];mf=ff[1];l&&lf===kf&&rf===mf||(lf=kf,rf=mf,E.uniform2f(Y.location,
kf,mf));of=q.scaleFract;sf=of[0];Df=of[1];l&&Cf===sf&&Pe===Df||(Cf=sf,Pe=Df,E.uniform2f(mb.location,sf,Df));Ee=q.translate;pf=Ee[0];Ef=Ee[1];l&&qf===pf&&Hf===Ef||(qf=pf,Hf=Ef,E.uniform2f(qa.location,pf,Ef));Bf=q.translateFract;Ff=Bf[0];xf=Bf[1];l&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,E.uniform2f($b.location,Ff,xf));wf=Q.call(this,ha,q,l);zf=wf[0];Jf=wf[1];l&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,E.uniform2f(Ea.location,zf,Jf));Lf=q.opacity;l&&Mf===Lf||(Mf=Lf,E.uniform1f(Ba.location,Lf));(tf=q.markerTexture)&&
"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;E.uniform1i(da.location,Rf.bind());If=q.elements;uf=null;(uf=(dg=ia(If))?Pc.createStream(If):Pc.getElements(If))&&E.bindBuffer(34963,uf.buffer.buffer);Sf=q.offset;if(Tf=q.count)0<Dc?uf?n.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),Dc):n.drawArraysInstancedANGLE(0,Sf,Tf,Dc):0>Dc&&(uf?E.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):E.drawArrays(0,Sf,Tf)),ha.viewportWidth=Sb,ha.viewportHeight=Oa,bd&&N.destroyStream(cb),
Ra&&N.destroyStream(Hc),Za&&N.destroyStream(lc),wd&&N.destroyStream(rc),Ze&&N.destroyStream(xc),md&&N.destroyStream(Xc),te&&N.destroyStream(ze),je&&N.destroyStream(he),Ke&&N.destroyStream(Bd),Rf.unbind(),dg&&Pc.destroyStream(uf)}na.unbind();Fa.dirty=!0;ra.setVAO(null);h&&(c.cpuTime+=performance.now()-g)},draw:function(a){var n,q,t,v,w,u,G,x,r,Ia,A,J,I,oa,M,R,ca,O,K,P,Q,U,T,aa,X,W,fa,V,ka,la,ya,ea,na,ja,Xa,Ca,Na,Ib,Ta,Ub,bb,Sa,Wb,Cb,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,
ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Cd,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,he,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re;n=L.next;n!==L.cur&&(n?E.bindFramebuffer(36160,n.framebuffer):E.bindFramebuffer(36160,null),L.cur=n);if(Fa.dirty){var Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,
De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf;Fe=sa.dither;Fe!==Fa.dither&&(Fe?E.enable(3024):E.disable(3024),Fa.dither=Fe);He=ba[0];Ie=ba[1];if(He!==xa[0]||Ie!==xa[1])E.blendEquationSeparate(He,Ie),xa[0]=He,xa[1]=Ie;Je=sa.depth_func;Je!==Fa.depth_func&&(E.depthFunc(Je),Fa.depth_func=Je);Ge=Eb[0];Nd=Eb[1];if(Ge!==pa[0]||Nd!==pa[1])E.depthRange(Ge,Nd),pa[0]=Ge,pa[1]=Nd;Ud=sa.depth_mask;Ud!==Fa.depth_mask&&(E.depthMask(Ud),Fa.depth_mask=Ud);$d=C[0];ce=C[1];Ke=C[2];Bd=C[3];if($d!==
oc[0]||ce!==oc[1]||Ke!==oc[2]||Bd!==oc[3])E.colorMask($d,ce,Ke,Bd),oc[0]=$d,oc[1]=ce,oc[2]=Ke,oc[3]=Bd;Sd=sa.cull_enable;Sd!==Fa.cull_enable&&(Sd?E.enable(2884):E.disable(2884),Fa.cull_enable=Sd);De=sa.cull_face;De!==Fa.cull_face&&(E.cullFace(De),Fa.cull_face=De);Le=sa.frontFace;Le!==Fa.frontFace&&(E.frontFace(Le),Fa.frontFace=Le);cf=sa.lineWidth;cf!==Fa.lineWidth&&(E.lineWidth(cf),Fa.lineWidth=cf);af=sa.polygonOffset_enable;af!==Fa.polygonOffset_enable&&(af?E.enable(32823):E.disable(32823),Fa.polygonOffset_enable=
af);Te=Fb[0];Oe=Fb[1];if(Te!==xb[0]||Oe!==xb[1])E.polygonOffset(Te,Oe),xb[0]=Te,xb[1]=Oe;$e=sa.sample_alpha;$e!==Fa.sample_alpha&&($e?E.enable(32926):E.disable(32926),Fa.sample_alpha=$e);Xe=sa.sample_enable;Xe!==Fa.sample_enable&&(Xe?E.enable(32928):E.disable(32928),Fa.sample_enable=Xe);Ue=Ye[0];Ve=Ye[1];if(Ue!==xd[0]||Ve!==xd[1])E.sampleCoverage(Ue,Ve),xd[0]=Ue,xd[1]=Ve;Td=sa.stencil_mask;Td!==Fa.stencil_mask&&(E.stencilMask(Td),Fa.stencil_mask=Td);Xd=we[0];We=we[1];jf=we[2];if(Xd!==ue[0]||We!==
ue[1]||jf!==ue[2])E.stencilFunc(Xd,We,jf),ue[0]=Xd,ue[1]=We,ue[2]=jf;nf=ve[0];ff=ve[1];kf=ve[2];lf=ve[3];if(nf!==yd[0]||ff!==yd[1]||kf!==yd[2]||lf!==yd[3])E.stencilOpSeparate(nf,ff,kf,lf),yd[0]=nf,yd[1]=ff,yd[2]=kf,yd[3]=lf;mf=Od[0];rf=Od[1];of=Od[2];sf=Od[3];if(mf!==ge[0]||rf!==ge[1]||of!==ge[2]||sf!==ge[3])E.stencilOpSeparate(mf,rf,of,sf),ge[0]=mf,ge[1]=rf,ge[2]=of,ge[3]=sf}q=a.viewport;t=q.x|0;v=q.y|0;w="width"in q?q.width|0:ha.framebufferWidth-t;u="height"in q?q.height|0:ha.framebufferHeight-
v;G=ha.viewportWidth;ha.viewportWidth=w;x=ha.viewportHeight;ha.viewportHeight=u;E.viewport(t,v,w,u);Gd[0]=t;Gd[1]=v;Gd[2]=w;Gd[3]=u;E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);Fa.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);Ja[0]=770;Ja[1]=771;Ja[2]=773;Ja[3]=1;E.disable(2929);Fa.depth_enable=!1;r=a.viewport;Ia=r.x|0;A=r.y|0;J="width"in r?r.width|0:ha.framebufferWidth-Ia;I="height"in r?r.height|0:ha.framebufferHeight-A;E.scissor(Ia,A,J,I);ee[0]=Ia;ee[1]=A;ee[2]=J;ee[3]=
I;E.enable(3089);Fa.scissor_enable=!0;E.disable(2960);Fa.stencil_enable=!1;if(oa=Fa.profile)M=performance.now(),c.count++;E.useProgram(d.program);R=Qc.angle_instanced_arrays;ra.setVAO(null);ca=e.call(this,ha,a,0);O=!1;K=null;P=0;Q=!1;T=U=0;aa=1;X=0;W=5126;la=ka=V=fa=0;ia(ca)?(O=!0,K=N.createStream(34962,ca),W=K.dtype):(K=N.getBuffer(ca))?W=K.dtype:"constant"in ca?(aa=2,"number"===typeof ca.constant?(V=ca.constant,ka=la=fa=0):(V=0<ca.constant.length?ca.constant[0]:0,ka=1<ca.constant.length?ca.constant[1]:
0,la=2<ca.constant.length?ca.constant[2]:0,fa=3<ca.constant.length?ca.constant[3]:0)):(K=ia(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),W="type"in ca?zd[ca.type]:K.dtype,Q=!!ca.normalized,T=ca.size|0,U=ca.offset|0,X=ca.stride|0,P=ca.divisor|0);ya=sc.location;ea=Z[ya];if(1===aa){ea.buffer||E.enableVertexAttribArray(ya);na=T||1;if(ea.type!==W||ea.size!==na||ea.buffer!==K||ea.normalized!==Q||ea.offset!==U||ea.stride!==X)E.bindBuffer(34962,K.buffer),E.vertexAttribPointer(ya,na,W,
Q,X,U),ea.type=W,ea.size=na,ea.buffer=K,ea.normalized=Q,ea.offset=U,ea.stride=X;ea.divisor!==P&&(R.vertexAttribDivisorANGLE(ya,P),ea.divisor=P)}else if(ea.buffer&&(E.disableVertexAttribArray(ya),ea.buffer=null),ea.x!==V||ea.y!==ka||ea.z!==la||ea.w!==fa)E.vertexAttrib4f(ya,V,ka,la,fa),ea.x=V,ea.y=ka,ea.z=la,ea.w=fa;ja=m.call(this,ha,a,0);Xa=!1;Ca=null;Na=0;Ib=!1;Ub=Ta=0;bb=1;Sa=0;Wb=5126;jd=Rb=jc=Cb=0;ia(ja)?(Xa=!0,Ca=N.createStream(34962,ja),Wb=Ca.dtype):(Ca=N.getBuffer(ja))?Wb=Ca.dtype:"constant"in
ja?(bb=2,"number"===typeof ja.constant?(jc=ja.constant,Rb=jd=Cb=0):(jc=0<ja.constant.length?ja.constant[0]:0,Rb=1<ja.constant.length?ja.constant[1]:0,jd=2<ja.constant.length?ja.constant[2]:0,Cb=3<ja.constant.length?ja.constant[3]:0)):(Ca=ia(ja.buffer)?N.createStream(34962,ja.buffer):N.getBuffer(ja.buffer),Wb="type"in ja?zd[ja.type]:Ca.dtype,Ib=!!ja.normalized,Ub=ja.size|0,Ta=ja.offset|0,Sa=ja.stride|0,Na=ja.divisor|0);Sb=td.location;Oa=Z[Sb];if(1===bb){Oa.buffer||E.enableVertexAttribArray(Sb);nb=
Ub||1;if(Oa.type!==Wb||Oa.size!==nb||Oa.buffer!==Ca||Oa.normalized!==Ib||Oa.offset!==Ta||Oa.stride!==Sa)E.bindBuffer(34962,Ca.buffer),E.vertexAttribPointer(Sb,nb,Wb,Ib,Sa,Ta),Oa.type=Wb,Oa.size=nb,Oa.buffer=Ca,Oa.normalized=Ib,Oa.offset=Ta,Oa.stride=Sa;Oa.divisor!==Na&&(R.vertexAttribDivisorANGLE(Sb,Na),Oa.divisor=Na)}else if(Oa.buffer&&(E.disableVertexAttribArray(Sb),Oa.buffer=null),Oa.x!==jc||Oa.y!==Rb||Oa.z!==jd||Oa.w!==Cb)E.vertexAttrib4f(Sb,jc,Rb,jd,Cb),Oa.x=jc,Oa.y=Rb,Oa.z=jd,Oa.w=Cb;tb=k.call(this,
ha,a,0);gb=!1;Pa=null;nc=0;Xb=!1;cb=bd=0;kc=1;Zc=0;hc=5126;ob=ta=jb=ib=0;ia(tb)?(gb=!0,Pa=N.createStream(34962,tb),hc=Pa.dtype):(Pa=N.getBuffer(tb))?hc=Pa.dtype:"constant"in tb?(kc=2,"number"===typeof tb.constant?(jb=tb.constant,ta=ob=ib=0):(jb=0<tb.constant.length?tb.constant[0]:0,ta=1<tb.constant.length?tb.constant[1]:0,ob=2<tb.constant.length?tb.constant[2]:0,ib=3<tb.constant.length?tb.constant[3]:0)):(Pa=ia(tb.buffer)?N.createStream(34962,tb.buffer):N.getBuffer(tb.buffer),hc="type"in tb?zd[tb.type]:
Pa.dtype,Xb=!!tb.normalized,cb=tb.size|0,bd=tb.offset|0,Zc=tb.stride|0,nc=tb.divisor|0);wa=ic.location;Ua=Z[wa];if(1===kc){Ua.buffer||E.enableVertexAttribArray(wa);ab=cb||1;if(Ua.type!==hc||Ua.size!==ab||Ua.buffer!==Pa||Ua.normalized!==Xb||Ua.offset!==bd||Ua.stride!==Zc)E.bindBuffer(34962,Pa.buffer),E.vertexAttribPointer(wa,ab,hc,Xb,Zc,bd),Ua.type=hc,Ua.size=ab,Ua.buffer=Pa,Ua.normalized=Xb,Ua.offset=bd,Ua.stride=Zc;Ua.divisor!==nc&&(R.vertexAttribDivisorANGLE(wa,nc),Ua.divisor=nc)}else if(Ua.buffer&&
(E.disableVertexAttribArray(wa),Ua.buffer=null),Ua.x!==jb||Ua.y!==ta||Ua.z!==ob||Ua.w!==ib)E.vertexAttrib4f(wa,jb,ta,ob,ib),Ua.x=jb,Ua.y=ta,Ua.z=ob,Ua.w=ib;za=l.call(this,ha,a,0);db=!1;Ma=null;Ab=0;zb=!1;Hc=Ra=0;Jb=1;Lb=0;Tb=5126;Ob=La=Jd=ua=0;ia(za)?(db=!0,Ma=N.createStream(34962,za),Tb=Ma.dtype):(Ma=N.getBuffer(za))?Tb=Ma.dtype:"constant"in za?(Jb=2,"number"===typeof za.constant?(Jd=za.constant,La=Ob=ua=0):(Jd=0<za.constant.length?za.constant[0]:0,La=1<za.constant.length?za.constant[1]:0,Ob=2<za.constant.length?
za.constant[2]:0,ua=3<za.constant.length?za.constant[3]:0)):(Ma=ia(za.buffer)?N.createStream(34962,za.buffer):N.getBuffer(za.buffer),Tb="type"in za?zd[za.type]:Ma.dtype,zb=!!za.normalized,Hc=za.size|0,Ra=za.offset|0,Lb=za.stride|0,Ab=za.divisor|0);eb=zc.location;hb=Z[eb];if(1===Jb){hb.buffer||E.enableVertexAttribArray(eb);va=Hc||1;if(hb.type!==Tb||hb.size!==va||hb.buffer!==Ma||hb.normalized!==zb||hb.offset!==Ra||hb.stride!==Lb)E.bindBuffer(34962,Ma.buffer),E.vertexAttribPointer(eb,va,Tb,zb,Lb,Ra),
hb.type=Tb,hb.size=va,hb.buffer=Ma,hb.normalized=zb,hb.offset=Ra,hb.stride=Lb;hb.divisor!==Ab&&(R.vertexAttribDivisorANGLE(eb,Ab),hb.divisor=Ab)}else if(hb.buffer&&(E.disableVertexAttribArray(eb),hb.buffer=null),hb.x!==Jd||hb.y!==La||hb.z!==Ob||hb.w!==ua)E.vertexAttrib4f(eb,Jd,La,Ob,ua),hb.x=Jd,hb.y=La,hb.z=Ob,hb.w=ua;dc=g.call(this,ha,a,0);Da=!1;pb=null;qb=0;Ya=!1;lc=Za=0;dd=1;tc=0;Va=5126;vc=Ga=Oc=Mb=0;ia(dc)?(Da=!0,pb=N.createStream(34962,dc),Va=pb.dtype):(pb=N.getBuffer(dc))?Va=pb.dtype:"constant"in
dc?(dd=2,"number"===typeof dc.constant?(Oc=dc.constant,Ga=vc=Mb=0):(Oc=0<dc.constant.length?dc.constant[0]:0,Ga=1<dc.constant.length?dc.constant[1]:0,vc=2<dc.constant.length?dc.constant[2]:0,Mb=3<dc.constant.length?dc.constant[3]:0)):(pb=ia(dc.buffer)?N.createStream(34962,dc.buffer):N.getBuffer(dc.buffer),Va="type"in dc?zd[dc.type]:pb.dtype,Ya=!!dc.normalized,lc=dc.size|0,Za=dc.offset|0,tc=dc.stride|0,qb=dc.divisor|0);Qa=ga.location;Aa=Z[Qa];if(1===dd){Aa.buffer||E.enableVertexAttribArray(Qa);kb=
lc||1;if(Aa.type!==Va||Aa.size!==kb||Aa.buffer!==pb||Aa.normalized!==Ya||Aa.offset!==Za||Aa.stride!==tc)E.bindBuffer(34962,pb.buffer),E.vertexAttribPointer(Qa,kb,Va,Ya,tc,Za),Aa.type=Va,Aa.size=kb,Aa.buffer=pb,Aa.normalized=Ya,Aa.offset=Za,Aa.stride=tc;Aa.divisor!==qb&&(R.vertexAttribDivisorANGLE(Qa,qb),Aa.divisor=qb)}else if(Aa.buffer&&(E.disableVertexAttribArray(Qa),Aa.buffer=null),Aa.x!==Oc||Aa.y!==Ga||Aa.z!==vc||Aa.w!==Mb)E.vertexAttrib4f(Qa,Oc,Ga,vc,Mb),Aa.x=Oc,Aa.y=Ga,Aa.z=vc,Aa.w=Mb;ub=b.call(this,
ha,a,0);Bb=!1;rb=null;uc=0;vb=!1;rc=wd=0;Ed=1;Jc=0;ed=5126;Pb=bc=Vb=fd=0;ia(ub)?(Bb=!0,rb=N.createStream(34962,ub),ed=rb.dtype):(rb=N.getBuffer(ub))?ed=rb.dtype:"constant"in ub?(Ed=2,"number"===typeof ub.constant?(Vb=ub.constant,bc=Pb=fd=0):(Vb=0<ub.constant.length?ub.constant[0]:0,bc=1<ub.constant.length?ub.constant[1]:0,Pb=2<ub.constant.length?ub.constant[2]:0,fd=3<ub.constant.length?ub.constant[3]:0)):(rb=ia(ub.buffer)?N.createStream(34962,ub.buffer):N.getBuffer(ub.buffer),ed="type"in ub?zd[ub.type]:
rb.dtype,vb=!!ub.normalized,rc=ub.size|0,wd=ub.offset|0,Jc=ub.stride|0,uc=ub.divisor|0);Ha=$a.location;Zb=Z[Ha];if(1===Ed){Zb.buffer||E.enableVertexAttribArray(Ha);lb=rc||1;if(Zb.type!==ed||Zb.size!==lb||Zb.buffer!==rb||Zb.normalized!==vb||Zb.offset!==wd||Zb.stride!==Jc)E.bindBuffer(34962,rb.buffer),E.vertexAttribPointer(Ha,lb,ed,vb,Jc,wd),Zb.type=ed,Zb.size=lb,Zb.buffer=rb,Zb.normalized=vb,Zb.offset=wd,Zb.stride=Jc;Zb.divisor!==uc&&(R.vertexAttribDivisorANGLE(Ha,uc),Zb.divisor=uc)}else if(Zb.buffer&&
(E.disableVertexAttribArray(Ha),Zb.buffer=null),Zb.x!==Vb||Zb.y!==bc||Zb.z!==Pb||Zb.w!==fd)E.vertexAttrib4f(Ha,Vb,bc,Pb,fd),Zb.x=Vb,Zb.y=bc,Zb.z=Pb,Zb.w=fd;wb=p.call(this,ha,a,0);Nb=!1;Qb=null;ec=0;gc=!1;xc=Cd=0;yc=1;Ac=0;Kc=5126;Kb=Lc=Sc=$c=0;ia(wb)?(Nb=!0,Qb=N.createStream(34962,wb),Kc=Qb.dtype):(Qb=N.getBuffer(wb))?Kc=Qb.dtype:"constant"in wb?(yc=2,"number"===typeof wb.constant?(Sc=wb.constant,Lc=Kb=$c=0):(Sc=0<wb.constant.length?wb.constant[0]:0,Lc=1<wb.constant.length?wb.constant[1]:0,Kb=2<wb.constant.length?
wb.constant[2]:0,$c=3<wb.constant.length?wb.constant[3]:0)):(Qb=ia(wb.buffer)?N.createStream(34962,wb.buffer):N.getBuffer(wb.buffer),Kc="type"in wb?zd[wb.type]:Qb.dtype,gc=!!wb.normalized,xc=wb.size|0,Cd=wb.offset|0,Ac=wb.stride|0,ec=wb.divisor|0);Db=S.location;Mc=Z[Db];if(1===yc){Mc.buffer||E.enableVertexAttribArray(Db);Ec=xc||4;if(Mc.type!==Kc||Mc.size!==Ec||Mc.buffer!==Qb||Mc.normalized!==gc||Mc.offset!==Cd||Mc.stride!==Ac)E.bindBuffer(34962,Qb.buffer),E.vertexAttribPointer(Db,Ec,Kc,gc,Ac,Cd),
Mc.type=Kc,Mc.size=Ec,Mc.buffer=Qb,Mc.normalized=gc,Mc.offset=Cd,Mc.stride=Ac;Mc.divisor!==ec&&(R.vertexAttribDivisorANGLE(Db,ec),Mc.divisor=ec)}else if(Mc.buffer&&(E.disableVertexAttribArray(Db),Mc.buffer=null),Mc.x!==Sc||Mc.y!==Lc||Mc.z!==Kb||Mc.w!==$c)E.vertexAttrib4f(Db,Sc,Lc,Kb,$c),Mc.x=Sc,Mc.y=Lc,Mc.z=Kb,Mc.w=$c;Tc=H.call(this,ha,a,0);fc=!1;Wc=null;gd=0;kd=!1;Xc=md=0;he=1;Zd=0;ke=5126;Kd=Md=me=se=0;ia(Tc)?(fc=!0,Wc=N.createStream(34962,Tc),ke=Wc.dtype):(Wc=N.getBuffer(Tc))?ke=Wc.dtype:"constant"in
Tc?(he=2,"number"===typeof Tc.constant?(me=Tc.constant,Md=Kd=se=0):(me=0<Tc.constant.length?Tc.constant[0]:0,Md=1<Tc.constant.length?Tc.constant[1]:0,Kd=2<Tc.constant.length?Tc.constant[2]:0,se=3<Tc.constant.length?Tc.constant[3]:0)):(Wc=ia(Tc.buffer)?N.createStream(34962,Tc.buffer):N.getBuffer(Tc.buffer),ke="type"in Tc?zd[Tc.type]:Wc.dtype,kd=!!Tc.normalized,Xc=Tc.size|0,md=Tc.offset|0,Zd=Tc.stride|0,gd=Tc.divisor|0);id=Gb.location;Bc=Z[id];if(1===he){Bc.buffer||E.enableVertexAttribArray(id);od=
Xc||4;if(Bc.type!==ke||Bc.size!==od||Bc.buffer!==Wc||Bc.normalized!==kd||Bc.offset!==md||Bc.stride!==Zd)E.bindBuffer(34962,Wc.buffer),E.vertexAttribPointer(id,od,ke,kd,Zd,md),Bc.type=ke,Bc.size=od,Bc.buffer=Wc,Bc.normalized=kd,Bc.offset=md,Bc.stride=Zd;Bc.divisor!==gd&&(R.vertexAttribDivisorANGLE(id,gd),Bc.divisor=gd)}else if(Bc.buffer&&(E.disableVertexAttribArray(id),Bc.buffer=null),Bc.x!==me||Bc.y!==Md||Bc.z!==Kd||Bc.w!==se)E.vertexAttrib4f(id,me,Md,Kd,se),Bc.x=me,Bc.y=Md,Bc.z=Kd,Bc.w=se;ld=y.call(this,
ha,a,0);cd=!1;pd=null;Fd=0;Hd=!1;ze=te=0;Ae=1;ne=0;fe=5126;ie=be=pe=de=0;ia(ld)?(cd=!0,pd=N.createStream(34962,ld),fe=pd.dtype):(pd=N.getBuffer(ld))?fe=pd.dtype:"constant"in ld?(Ae=2,"number"===typeof ld.constant?(pe=ld.constant,be=ie=de=0):(pe=0<ld.constant.length?ld.constant[0]:0,be=1<ld.constant.length?ld.constant[1]:0,ie=2<ld.constant.length?ld.constant[2]:0,de=3<ld.constant.length?ld.constant[3]:0)):(pd=ia(ld.buffer)?N.createStream(34962,ld.buffer):N.getBuffer(ld.buffer),fe="type"in ld?zd[ld.type]:
pd.dtype,Hd=!!ld.normalized,ze=ld.size|0,te=ld.offset|0,ne=ld.stride|0,Fd=ld.divisor|0);wc=ma.location;Vc=Z[wc];if(1===Ae){Vc.buffer||E.enableVertexAttribArray(wc);qe=ze||1;if(Vc.type!==fe||Vc.size!==qe||Vc.buffer!==pd||Vc.normalized!==Hd||Vc.offset!==te||Vc.stride!==ne)E.bindBuffer(34962,pd.buffer),E.vertexAttribPointer(wc,qe,fe,Hd,ne,te),Vc.type=fe,Vc.size=qe,Vc.buffer=pd,Vc.normalized=Hd,Vc.offset=te,Vc.stride=ne;Vc.divisor!==Fd&&(R.vertexAttribDivisorANGLE(wc,Fd),Vc.divisor=Fd)}else if(Vc.buffer&&
(E.disableVertexAttribArray(wc),Vc.buffer=null),Vc.x!==pe||Vc.y!==be||Vc.z!==ie||Vc.w!==de)E.vertexAttrib4f(wc,pe,be,ie,de),Vc.x=pe,Vc.y=be,Vc.z=ie,Vc.w=de;E.uniform1i(B.location,!1);E.uniform1f(Ka.location,ha.pixelRatio);le=a.scale;E.uniform2f(Y.location,le[0],le[1]);Ld=a.scaleFract;E.uniform2f(mb.location,Ld[0],Ld[1]);Pd=a.translate;E.uniform2f(qa.location,Pd[0],Pd[1]);Qd=a.translateFract;E.uniform2f($b.location,Qd[0],Qd[1]);Rd=h.call(this,ha,a,0);E.uniform2f(Ea.location,Rd[0],Rd[1]);E.uniform1f(Ba.location,
a.opacity);E.uniform1i(yb.location,f.bind());(je=a.markerTexture)&&"framebuffer"===je._reglType&&(je=je.color[0]);vf=je._texture;E.uniform1i(da.location,vf.bind());Ce=a.elements;oe=null;(oe=(Re=ia(Ce))?Pc.createStream(Ce):Pc.getElements(Ce))&&E.bindBuffer(34963,oe.buffer.buffer);Se=a.offset;if(Ne=a.count)re=sb.instances,0<re?oe?R.drawElementsInstancedANGLE(0,Ne,oe.type,Se<<(oe.type-5121>>1),re):R.drawArraysInstancedANGLE(0,Se,Ne,re):0>re&&(oe?E.drawElements(0,Ne,oe.type,Se<<(oe.type-5121>>1)):E.drawArrays(0,
Se,Ne)),Fa.dirty=!0,ra.setVAO(null),ha.viewportWidth=G,ha.viewportHeight=x,oa&&(c.cpuTime+=performance.now()-M),O&&N.destroyStream(K),Xa&&N.destroyStream(Ca),gb&&N.destroyStream(Pa),db&&N.destroyStream(Ma),Da&&N.destroyStream(pb),Bb&&N.destroyStream(rb),Nb&&N.destroyStream(Qb),fc&&N.destroyStream(Wc),cd&&N.destroyStream(pd),f.unbind(),vf.unbind(),Re&&Pc.destroyStream(oe)},scope:function(b,a,f){var h,g,l,p,d,e,m,k,y,D,H,z,C,B,F,E,L,O,P,Q,Z,S,ba,T,Y,V,da,ea,ga,ma,pa,ka,la,ra,qa,Ja,na,xa,Ea,Ka,Ba,Na,
xb,Eb,$a,Sa,Oa,nb,tb,gb,Pa,Fb,zc,mb,cb,td,Gb,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,oc,Jb,Lb,Tb,ua,Cb,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,yb,tc,Va,Mb,$b,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,sc,rc,ic,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Qc,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,Gd,ee,Od,xd,we,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,yd,ge,ue,ve,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,
lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;h=b.viewport;g=h.x|0;l=h.y|0;p="width"in h?h.width|0:ha.framebufferWidth-g;d="height"in h?h.height|0:ha.framebufferHeight-l;e=ha.viewportWidth;ha.viewportWidth=p;m=ha.viewportHeight;ha.viewportHeight=d;k=Cd[0];Cd[0]=g;y=Cd[1];Cd[1]=l;D=Cd[2];
Cd[2]=p;H=Cd[3];Cd[3]=d;z=M[0];M[0]=0;C=M[1];M[1]=0;B=M[2];M[2]=0;F=M[3];M[3]=1;E=sa.blend_enable;sa.blend_enable=!0;L=ya[0];ya[0]=770;O=ya[1];ya[1]=771;P=ya[2];ya[2]=773;Q=ya[3];ya[3]=1;Z=sa.depth_enable;sa.depth_enable=!1;S=b.viewport;ba=S.x|0;T=S.y|0;Y="width"in S?S.width|0:ha.framebufferWidth-ba;V="height"in S?S.height|0:ha.framebufferHeight-T;da=he[0];he[0]=ba;ea=he[1];he[1]=T;ga=he[2];he[2]=Y;ma=he[3];he[3]=V;pa=sa.scissor_enable;sa.scissor_enable=!0;ka=sa.stencil_enable;sa.stencil_enable=!1;
if(la=Fa.profile)ra=performance.now(),c.count++;qa=b.elements;Ja=null;Ja=(na=ia(qa))?Pc.createStream(qa):Pc.getElements(qa);xa=sb.elements;sb.elements=Ja;Ea=b.offset;Ka=sb.offset;sb.offset=Ea;Ba=b.count;Na=sb.count;sb.count=Ba;xb=sb.primitive;sb.primitive=0;Eb=fa[45];fa[45]=!1;$a=b.markerTexture;Sa=fa[48];fa[48]=$a;Oa=b.opacity;nb=fa[10];fa[10]=Oa;tb=n.call(this,ha,b,f);gb=fa[46];fa[46]=tb;Pa=fa[47];fa[47]=q;Fb=ha.pixelRatio;zc=fa[34];fa[34]=Fb;mb=b.scale;cb=fa[6];fa[6]=mb;td=b.scaleFract;Gb=fa[7];
fa[7]=td;hc=b.translate;ib=fa[8];fa[8]=hc;jb=b.translateFract;ta=fa[9];fa[9]=jb;ob=t.call(this,ha,b,f);wa=!1;Ua=null;ab=0;za=!1;Ma=db=0;Ab=1;zb=0;Ra=5126;Tb=Lb=Jb=oc=0;ia(ob)?(wa=!0,Ua=N.createStream(34962,ob),Ra=Ua.dtype):(Ua=N.getBuffer(ob))?Ra=Ua.dtype:"constant"in ob?(Ab=2,"number"===typeof ob.constant?(Jb=ob.constant,Lb=Tb=oc=0):(Jb=0<ob.constant.length?ob.constant[0]:0,Lb=1<ob.constant.length?ob.constant[1]:0,Tb=2<ob.constant.length?ob.constant[2]:0,oc=3<ob.constant.length?ob.constant[3]:0)):
(Ua=ia(ob.buffer)?N.createStream(34962,ob.buffer):N.getBuffer(ob.buffer),Ra="type"in ob?zd[ob.type]:Ua.dtype,za=!!ob.normalized,Ma=ob.size|0,db=ob.offset|0,zb=ob.stride|0,ab=ob.divisor|0);ua=v.buffer;v.buffer=Ua;Cb=v.divisor;v.divisor=ab;La=v.normalized;v.normalized=za;Ob=v.offset;v.offset=db;eb=v.size;v.size=Ma;hb=v.state;v.state=Ab;va=v.stride;v.stride=zb;dc=v.type;v.type=Ra;Da=v.w;v.w=oc;pb=v.x;v.x=Jb;qb=v.y;v.y=Lb;Ya=v.z;v.z=Tb;Za=G.call(this,ha,b,f);lc=!1;yb=null;tc=0;Va=!1;$b=Mb=0;Ga=1;vc=0;
Qa=5126;Bb=ub=kb=Aa=0;ia(Za)?(lc=!0,yb=N.createStream(34962,Za),Qa=yb.dtype):(yb=N.getBuffer(Za))?Qa=yb.dtype:"constant"in Za?(Ga=2,"number"===typeof Za.constant?(kb=Za.constant,ub=Bb=Aa=0):(kb=0<Za.constant.length?Za.constant[0]:0,ub=1<Za.constant.length?Za.constant[1]:0,Bb=2<Za.constant.length?Za.constant[2]:0,Aa=3<Za.constant.length?Za.constant[3]:0)):(yb=ia(Za.buffer)?N.createStream(34962,Za.buffer):N.getBuffer(Za.buffer),Qa="type"in Za?zd[Za.type]:yb.dtype,Va=!!Za.normalized,$b=Za.size|0,Mb=
Za.offset|0,vc=Za.stride|0,tc=Za.divisor|0);rb=w.buffer;w.buffer=yb;uc=w.divisor;w.divisor=tc;vb=w.normalized;w.normalized=Va;sc=w.offset;w.offset=Mb;rc=w.size;w.size=$b;ic=w.state;w.state=Ga;Jc=w.stride;w.stride=vc;ed=w.type;w.type=Qa;fd=w.w;w.w=Aa;Vb=w.x;w.x=kb;bc=w.y;w.y=ub;Pb=w.z;w.z=Bb;Ha=Ia.call(this,ha,b,f);Zb=!1;lb=null;wb=0;Nb=!1;ec=Qb=0;gc=1;Qc=0;xc=5126;$c=Kc=Ac=yc=0;ia(Ha)?(Zb=!0,lb=N.createStream(34962,Ha),xc=lb.dtype):(lb=N.getBuffer(Ha))?xc=lb.dtype:"constant"in Ha?(gc=2,"number"===
typeof Ha.constant?(Ac=Ha.constant,Kc=$c=yc=0):(Ac=0<Ha.constant.length?Ha.constant[0]:0,Kc=1<Ha.constant.length?Ha.constant[1]:0,$c=2<Ha.constant.length?Ha.constant[2]:0,yc=3<Ha.constant.length?Ha.constant[3]:0)):(lb=ia(Ha.buffer)?N.createStream(34962,Ha.buffer):N.getBuffer(Ha.buffer),xc="type"in Ha?zd[Ha.type]:lb.dtype,Nb=!!Ha.normalized,ec=Ha.size|0,Qb=Ha.offset|0,Qc=Ha.stride|0,wb=Ha.divisor|0);Sc=x.buffer;x.buffer=lb;Lc=x.divisor;x.divisor=wb;Kb=x.normalized;x.normalized=Nb;Db=x.offset;x.offset=
Qb;Mc=x.size;x.size=ec;Ec=x.state;x.state=gc;Tc=x.stride;x.stride=Qc;fc=x.type;x.type=xc;Wc=x.w;x.w=yc;gd=x.x;x.x=Ac;kd=x.y;x.y=Kc;md=x.z;x.z=$c;Xc=u.call(this,ha,b,f);Gd=!1;ee=null;Od=0;xd=!1;Md=we=0;Kd=1;id=0;Bc=5126;pd=cd=ld=od=0;ia(Xc)?(Gd=!0,ee=N.createStream(34962,Xc),Bc=ee.dtype):(ee=N.getBuffer(Xc))?Bc=ee.dtype:"constant"in Xc?(Kd=2,"number"===typeof Xc.constant?(ld=Xc.constant,cd=pd=od=0):(ld=0<Xc.constant.length?Xc.constant[0]:0,cd=1<Xc.constant.length?Xc.constant[1]:0,pd=2<Xc.constant.length?
Xc.constant[2]:0,od=3<Xc.constant.length?Xc.constant[3]:0)):(ee=ia(Xc.buffer)?N.createStream(34962,Xc.buffer):N.getBuffer(Xc.buffer),Bc="type"in Xc?zd[Xc.type]:ee.dtype,xd=!!Xc.normalized,Md=Xc.size|0,we=Xc.offset|0,id=Xc.stride|0,Od=Xc.divisor|0);Fd=r.buffer;r.buffer=ee;Hd=r.divisor;r.divisor=Od;yd=r.normalized;r.normalized=xd;ge=r.offset;r.offset=we;ue=r.size;r.size=Md;ve=r.state;r.state=Kd;fe=r.stride;r.stride=id;de=r.type;r.type=Bc;pe=r.w;r.w=od;be=r.x;r.x=ld;ie=r.y;r.y=cd;wc=r.z;r.z=pd;Vc=ca.call(this,
ha,b,f);qe=!1;le=null;Ld=0;Pd=!1;Rd=Qd=0;je=1;Ye=0;Ce=5126;Ne=Se=Re=oe=0;ia(Vc)?(qe=!0,le=N.createStream(34962,Vc),Ce=le.dtype):(le=N.getBuffer(Vc))?Ce=le.dtype:"constant"in Vc?(je=2,"number"===typeof Vc.constant?(Re=Vc.constant,Se=Ne=oe=0):(Re=0<Vc.constant.length?Vc.constant[0]:0,Se=1<Vc.constant.length?Vc.constant[1]:0,Ne=2<Vc.constant.length?Vc.constant[2]:0,oe=3<Vc.constant.length?Vc.constant[3]:0)):(le=ia(Vc.buffer)?N.createStream(34962,Vc.buffer):N.getBuffer(Vc.buffer),Ce="type"in Vc?zd[Vc.type]:
le.dtype,Pd=!!Vc.normalized,Rd=Vc.size|0,Qd=Vc.offset|0,Ye=Vc.stride|0,Ld=Vc.divisor|0);re=J.buffer;J.buffer=le;Fe=J.divisor;J.divisor=Ld;He=J.normalized;J.normalized=Pd;Ie=J.offset;J.offset=Qd;Je=J.size;J.size=Rd;Ge=J.state;J.state=je;Nd=J.stride;J.stride=Ye;Ud=J.type;J.type=Ce;$d=J.w;J.w=oe;ce=J.x;J.x=Re;Ke=J.y;J.y=Se;Bd=J.z;J.z=Ne;Sd=R.call(this,ha,b,f);De=!1;Le=null;cf=0;af=!1;Oe=Te=0;$e=1;Xe=0;Ue=5126;We=Xd=Td=Ve=0;ia(Sd)?(De=!0,Le=N.createStream(34962,Sd),Ue=Le.dtype):(Le=N.getBuffer(Sd))?Ue=
Le.dtype:"constant"in Sd?($e=2,"number"===typeof Sd.constant?(Td=Sd.constant,Xd=We=Ve=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,Xd=1<Sd.constant.length?Sd.constant[1]:0,We=2<Sd.constant.length?Sd.constant[2]:0,Ve=3<Sd.constant.length?Sd.constant[3]:0)):(Le=ia(Sd.buffer)?N.createStream(34962,Sd.buffer):N.getBuffer(Sd.buffer),Ue="type"in Sd?zd[Sd.type]:Le.dtype,af=!!Sd.normalized,Oe=Sd.size|0,Te=Sd.offset|0,Xe=Sd.stride|0,cf=Sd.divisor|0);jf=A.buffer;A.buffer=Le;nf=A.divisor;A.divisor=cf;ff=A.normalized;
A.normalized=af;kf=A.offset;A.offset=Te;lf=A.size;A.size=Oe;mf=A.state;A.state=$e;rf=A.stride;A.stride=Xe;of=A.type;A.type=Ue;sf=A.w;A.w=Ve;Cf=A.x;A.x=Td;Df=A.y;A.y=Xd;Pe=A.z;A.z=We;Ee=aa.call(this,ha,b,f);pf=!1;qf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ia(Ee)?(pf=!0,qf=N.createStream(34962,Ee),yf=qf.dtype):(qf=N.getBuffer(Ee))?yf=qf.dtype:"constant"in Ee?(Gf=2,"number"===typeof Ee.constant?(zf=Ee.constant,Af=Jf=wf=0):(zf=0<Ee.constant.length?Ee.constant[0]:0,Af=1<Ee.constant.length?
Ee.constant[1]:0,Jf=2<Ee.constant.length?Ee.constant[2]:0,wf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=ia(Ee.buffer)?N.createStream(34962,Ee.buffer):N.getBuffer(Ee.buffer),yf="type"in Ee?zd[Ee.type]:qf.dtype,Hf=!!Ee.normalized,Ff=Ee.size|0,Bf=Ee.offset|0,xf=Ee.stride|0,Ef=Ee.divisor|0);Kf=I.buffer;I.buffer=qf;Lf=I.divisor;I.divisor=Ef;Mf=I.normalized;I.normalized=Hf;tf=I.offset;I.offset=Bf;Rf=I.size;I.size=Ff;If=I.state;I.state=Gf;uf=I.stride;I.stride=xf;dg=I.type;I.type=yf;Sf=I.w;I.w=wf;Tf=I.x;
I.x=zf;qg=I.y;I.y=Af;gf=I.z;I.z=Jf;df=U.call(this,ha,b,f);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ia(df)?(Nf=!0,Of=N.createStream(34962,df),Uf=Of.dtype):(Of=N.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=ia(df.buffer)?N.createStream(34962,df.buffer):
N.getBuffer(df.buffer),Uf="type"in df?zd[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=K.buffer;K.buffer=Of;sg=K.divisor;K.divisor=eg;tg=K.normalized;K.normalized=fg;ug=K.offset;K.offset=gg;vg=K.size;K.size=hg;wg=K.state;K.state=ig;xg=K.stride;K.stride=Wf;yg=K.type;K.type=Uf;zg=K.w;K.w=Xf;Ag=K.x;K.x=Yf;Bg=K.y;K.y=Zf;hf=K.z;K.z=jg;ef=ja.call(this,ha,b,f);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ia(ef)?(Pf=!0,Qf=N.createStream(34962,
ef),Vf=Qf.dtype):(Qf=N.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=ia(ef.buffer)?N.createStream(34962,ef.buffer):N.getBuffer(ef.buffer),Vf="type"in ef?zd[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|0,$f=ef.stride|0,kg=ef.divisor|0);Cg=W.buffer;W.buffer=
Qf;Dg=W.divisor;W.divisor=kg;Eg=W.normalized;W.normalized=lg;Fg=W.offset;W.offset=mg;Gg=W.size;W.size=ng;Hg=W.state;W.state=og;Ig=W.stride;W.stride=$f;Jg=W.type;W.type=Vf;Kg=W.w;W.w=ag;Lg=W.x;W.x=bg;Mg=W.y;W.y=cg;Ng=W.z;W.z=pg;Og=X.vert;X.vert=44;Pg=X.frag;X.frag=43;Fa.dirty=!0;a(ha,b,f);ha.viewportWidth=e;ha.viewportHeight=m;Cd[0]=k;Cd[1]=y;Cd[2]=D;Cd[3]=H;M[0]=z;M[1]=C;M[2]=B;M[3]=F;sa.blend_enable=E;ya[0]=L;ya[1]=O;ya[2]=P;ya[3]=Q;sa.depth_enable=Z;he[0]=da;he[1]=ea;he[2]=ga;he[3]=ma;sa.scissor_enable=
pa;sa.stencil_enable=ka;la&&(c.cpuTime+=performance.now()-ra);na&&Pc.destroyStream(Ja);sb.elements=xa;sb.offset=Ka;sb.count=Na;sb.primitive=xb;fa[45]=Eb;fa[48]=Sa;fa[10]=nb;fa[46]=gb;fa[47]=Pa;fa[34]=zc;fa[6]=cb;fa[7]=Gb;fa[8]=ib;fa[9]=ta;wa&&N.destroyStream(Ua);v.buffer=ua;v.divisor=Cb;v.normalized=La;v.offset=Ob;v.size=eb;v.state=hb;v.stride=va;v.type=dc;v.w=Da;v.x=pb;v.y=qb;v.z=Ya;lc&&N.destroyStream(yb);w.buffer=rb;w.divisor=uc;w.normalized=vb;w.offset=sc;w.size=rc;w.state=ic;w.stride=Jc;w.type=
ed;w.w=fd;w.x=Vb;w.y=bc;w.z=Pb;Zb&&N.destroyStream(lb);x.buffer=Sc;x.divisor=Lc;x.normalized=Kb;x.offset=Db;x.size=Mc;x.state=Ec;x.stride=Tc;x.type=fc;x.w=Wc;x.x=gd;x.y=kd;x.z=md;Gd&&N.destroyStream(ee);r.buffer=Fd;r.divisor=Hd;r.normalized=yd;r.offset=ge;r.size=ue;r.state=ve;r.stride=fe;r.type=de;r.w=pe;r.x=be;r.y=ie;r.z=wc;qe&&N.destroyStream(le);J.buffer=re;J.divisor=Fe;J.normalized=He;J.offset=Ie;J.size=Je;J.state=Ge;J.stride=Nd;J.type=Ud;J.w=$d;J.x=ce;J.y=Ke;J.z=Bd;De&&N.destroyStream(Le);A.buffer=
jf;A.divisor=nf;A.normalized=ff;A.offset=kf;A.size=lf;A.state=mf;A.stride=rf;A.type=of;A.w=sf;A.x=Cf;A.y=Df;A.z=Pe;pf&&N.destroyStream(qf);I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=tf;I.size=Rf;I.state=If;I.stride=uf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=gf;Nf&&N.destroyStream(Of);K.buffer=rg;K.divisor=sg;K.normalized=tg;K.offset=ug;K.size=vg;K.state=wg;K.stride=xg;K.type=yg;K.w=zg;K.x=Ag;K.y=Bg;K.z=hf;Pf&&N.destroyStream(Qf);W.buffer=Cg;W.divisor=Dg;W.normalized=Eg;W.offset=Fg;W.size=Gg;W.state=
Hg;W.stride=Ig;W.type=Jg;W.w=Kg;W.x=Lg;W.y=Mg;W.z=Ng;X.vert=Og;X.frag=Pg;Fa.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,c,d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,r,x,u,oa,ca,J,R,A,aa,I,U,K,ja,W,ka,la,Sa,Cb,ea,Na,V,P,O,T,na,Q,Gb,$a,S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa,$b,sc,ic,td){var zc,Z,N,ha,Fa,sb,Pc,Qc,L,E,ia,sa,X,fa,ra,M,F,ba,xa,ya,Ja,C,oc,Eb,pa,Fb,xb,
Ye,xd,he,ee,we,ue,Od,ge,ve,yd,Cd,Gd;zc=a.attributes;Z=a.buffer;N=a.context;ha=a.current;Fa=a.draw;sb=a.elements;Pc=a.extensions;Qc=a.framebuffer;L=a.gl;E=a.isBufferArgs;ia=a.next;sa=a.shader;X=a.uniforms;fa=a.vao;ra=ia.blend_color;M=ha.blend_color;F=ia.blend_equation;ba=ha.blend_equation;xa=ia.blend_func;ya=ha.blend_func;Ja=ia.colorMask;C=ha.colorMask;oc=ia.depth_range;Eb=ha.depth_range;pa=ia.polygonOffset_offset;Fb=ha.polygonOffset_offset;xb=ia.sample_coverage;Ye=ha.sample_coverage;xd=ia.scissor_box;
he=ha.scissor_box;ee=ia.stencil_func;we=ha.stencil_func;ue=ia.stencil_opBack;Od=ha.stencil_opBack;ge=ia.stencil_opFront;ve=ha.stencil_opFront;yd=ia.viewport;Cd=ha.viewport;Gd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var f,h,g,n,l,q;f=Qc.next;f!==Qc.cur&&(f?L.bindFramebuffer(36160,f.framebuffer):L.bindFramebuffer(36160,null),Qc.cur=f);if(ha.dirty){var p,t,d,e,m,k,v,y,w,u,D,H,G,z,x,r,Ia,A,J,I,oa,R,ca,K,U,X,aa,W,sa,ra,ja,
xa,Ta,Ub;p=ia.dither;p!==ha.dither&&(p?L.enable(3024):L.disable(3024),ha.dither=p);t=F[0];d=F[1];if(t!==ba[0]||d!==ba[1])L.blendEquationSeparate(t,d),ba[0]=t,ba[1]=d;e=ia.depth_func;e!==ha.depth_func&&(L.depthFunc(e),ha.depth_func=e);m=oc[0];k=oc[1];if(m!==Eb[0]||k!==Eb[1])L.depthRange(m,k),Eb[0]=m,Eb[1]=k;v=ia.depth_mask;v!==ha.depth_mask&&(L.depthMask(v),ha.depth_mask=v);y=Ja[0];w=Ja[1];u=Ja[2];D=Ja[3];if(y!==C[0]||w!==C[1]||u!==C[2]||D!==C[3])L.colorMask(y,w,u,D),C[0]=y,C[1]=w,C[2]=u,C[3]=D;H=
ia.cull_enable;H!==ha.cull_enable&&(H?L.enable(2884):L.disable(2884),ha.cull_enable=H);G=ia.cull_face;G!==ha.cull_face&&(L.cullFace(G),ha.cull_face=G);z=ia.frontFace;z!==ha.frontFace&&(L.frontFace(z),ha.frontFace=z);x=ia.lineWidth;x!==ha.lineWidth&&(L.lineWidth(x),ha.lineWidth=x);r=ia.polygonOffset_enable;r!==ha.polygonOffset_enable&&(r?L.enable(32823):L.disable(32823),ha.polygonOffset_enable=r);Ia=pa[0];A=pa[1];if(Ia!==Fb[0]||A!==Fb[1])L.polygonOffset(Ia,A),Fb[0]=Ia,Fb[1]=A;J=ia.sample_alpha;J!==
ha.sample_alpha&&(J?L.enable(32926):L.disable(32926),ha.sample_alpha=J);I=ia.sample_enable;I!==ha.sample_enable&&(I?L.enable(32928):L.disable(32928),ha.sample_enable=I);oa=xb[0];R=xb[1];if(oa!==Ye[0]||R!==Ye[1])L.sampleCoverage(oa,R),Ye[0]=oa,Ye[1]=R;ca=ia.stencil_mask;ca!==ha.stencil_mask&&(L.stencilMask(ca),ha.stencil_mask=ca);K=ee[0];U=ee[1];X=ee[2];if(K!==we[0]||U!==we[1]||X!==we[2])L.stencilFunc(K,U,X),we[0]=K,we[1]=U,we[2]=X;aa=ge[0];W=ge[1];sa=ge[2];ra=ge[3];if(aa!==ve[0]||W!==ve[1]||sa!==
ve[2]||ra!==ve[3])L.stencilOpSeparate(aa,W,sa,ra),ve[0]=aa,ve[1]=W,ve[2]=sa,ve[3]=ra;ja=ue[0];xa=ue[1];Ta=ue[2];Ub=ue[3];if(ja!==Od[0]||xa!==Od[1]||Ta!==Od[2]||Ub!==Od[3])L.stencilOpSeparate(ja,xa,Ta,Ub),Od[0]=ja,Od[1]=xa,Od[2]=Ta,Od[3]=Ub}L.blendColor(0,0,0,1);M[0]=0;M[1]=0;M[2]=0;M[3]=1;L.enable(3042);ha.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;L.disable(2929);ha.depth_enable=!1;L.enable(3089);ha.scissor_enable=!0;L.disable(2960);ha.stencil_enable=
!1;if(h=ha.profile)g=performance.now(),c.count+=a;L.useProgram(ka.program);n=Pc.angle_instanced_arrays;var bb;fa.setVAO(null);L.uniform1i(B.location,!1);L.uniform1i(Ea.location,na.bind());bb=Fa.instances;for(l=0;l<a;++l){q=b[l];var Dc,Wb,xd,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,yd,xc,yc,Ac,Kc,$c,Sc,Lc,
Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf;Dc=q.viewport;Wb=Dc.x|0;xd=Dc.y|0;jc="width"in Dc?Dc.width|0:N.framebufferWidth-Wb;Rb="height"in Dc?Dc.height|0:N.framebufferHeight-xd;jd=N.viewportWidth;N.viewportWidth=jc;Sb=
N.viewportHeight;N.viewportHeight=Rb;L.viewport(Wb,xd,jc,Rb);Cd[0]=Wb;Cd[1]=xd;Cd[2]=jc;Cd[3]=Rb;Oa=q.viewport;nb=Oa.x|0;tb=Oa.y|0;gb="width"in Oa?Oa.width|0:N.framebufferWidth-nb;Pa="height"in Oa?Oa.height|0:N.framebufferHeight-tb;L.scissor(nb,tb,gb,Pa);he[0]=nb;he[1]=tb;he[2]=gb;he[3]=Pa;nc=la.call(this,N,q,l);Xb=!1;bd=null;cb=0;kc=!1;hc=Zc=0;ib=1;jb=0;ta=5126;ab=Ua=wa=ob=0;E(nc)?(Xb=!0,bd=Z.createStream(34962,nc),ta=bd.dtype):(bd=Z.getBuffer(nc))?ta=bd.dtype:"constant"in nc?(ib=2,"number"===typeof nc.constant?
(wa=nc.constant,Ua=ab=ob=0):(wa=0<nc.constant.length?nc.constant[0]:0,Ua=1<nc.constant.length?nc.constant[1]:0,ab=2<nc.constant.length?nc.constant[2]:0,ob=3<nc.constant.length?nc.constant[3]:0)):(bd=E(nc.buffer)?Z.createStream(34962,nc.buffer):Z.getBuffer(nc.buffer),ta="type"in nc?Gd[nc.type]:bd.dtype,kc=!!nc.normalized,hc=nc.size|0,Zc=nc.offset|0,jb=nc.stride|0,cb=nc.divisor|0);za=$b.location;db=zc[za];if(1===ib){db.buffer||L.enableVertexAttribArray(za);Ma=hc||1;if(db.type!==ta||db.size!==Ma||db.buffer!==
bd||db.normalized!==kc||db.offset!==Zc||db.stride!==jb)L.bindBuffer(34962,bd.buffer),L.vertexAttribPointer(za,Ma,ta,kc,jb,Zc),db.type=ta,db.size=Ma,db.buffer=bd,db.normalized=kc,db.offset=Zc,db.stride=jb;db.divisor!==cb&&(n.vertexAttribDivisorANGLE(za,cb),db.divisor=cb)}else if(db.buffer&&(L.disableVertexAttribArray(za),db.buffer=null),db.x!==wa||db.y!==Ua||db.z!==ab||db.w!==ob)L.vertexAttrib4f(za,wa,Ua,ab,ob),db.x=wa,db.y=Ua,db.z=ab,db.w=ob;Ab=Sa.call(this,N,q,l);zb=!1;Ra=null;Hc=0;Jb=!1;Tb=Lb=0;
ua=1;Jd=0;La=5126;va=hb=eb=Ob=0;E(Ab)?(zb=!0,Ra=Z.createStream(34962,Ab),La=Ra.dtype):(Ra=Z.getBuffer(Ab))?La=Ra.dtype:"constant"in Ab?(ua=2,"number"===typeof Ab.constant?(eb=Ab.constant,hb=va=Ob=0):(eb=0<Ab.constant.length?Ab.constant[0]:0,hb=1<Ab.constant.length?Ab.constant[1]:0,va=2<Ab.constant.length?Ab.constant[2]:0,Ob=3<Ab.constant.length?Ab.constant[3]:0)):(Ra=E(Ab.buffer)?Z.createStream(34962,Ab.buffer):Z.getBuffer(Ab.buffer),La="type"in Ab?Gd[Ab.type]:Ra.dtype,Jb=!!Ab.normalized,Tb=Ab.size|
0,Lb=Ab.offset|0,Jd=Ab.stride|0,Hc=Ab.divisor|0);dc=ic.location;Da=zc[dc];if(1===ua){Da.buffer||L.enableVertexAttribArray(dc);pb=Tb||1;if(Da.type!==La||Da.size!==pb||Da.buffer!==Ra||Da.normalized!==Jb||Da.offset!==Lb||Da.stride!==Jd)L.bindBuffer(34962,Ra.buffer),L.vertexAttribPointer(dc,pb,La,Jb,Jd,Lb),Da.type=La,Da.size=pb,Da.buffer=Ra,Da.normalized=Jb,Da.offset=Lb,Da.stride=Jd;Da.divisor!==Hc&&(n.vertexAttribDivisorANGLE(dc,Hc),Da.divisor=Hc)}else if(Da.buffer&&(L.disableVertexAttribArray(dc),Da.buffer=
null),Da.x!==eb||Da.y!==hb||Da.z!==va||Da.w!==Ob)L.vertexAttrib4f(dc,eb,hb,va,Ob),Da.x=eb,Da.y=hb,Da.z=va,Da.w=Ob;qb=Cb.call(this,N,q,l);Ya=!1;Za=null;lc=0;dd=!1;Va=tc=0;Mb=1;Oc=0;Ga=5126;kb=Aa=Qa=vc=0;E(qb)?(Ya=!0,Za=Z.createStream(34962,qb),Ga=Za.dtype):(Za=Z.getBuffer(qb))?Ga=Za.dtype:"constant"in qb?(Mb=2,"number"===typeof qb.constant?(Qa=qb.constant,Aa=kb=vc=0):(Qa=0<qb.constant.length?qb.constant[0]:0,Aa=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,vc=3<qb.constant.length?
qb.constant[3]:0)):(Za=E(qb.buffer)?Z.createStream(34962,qb.buffer):Z.getBuffer(qb.buffer),Ga="type"in qb?Gd[qb.type]:Za.dtype,dd=!!qb.normalized,Va=qb.size|0,tc=qb.offset|0,Oc=qb.stride|0,lc=qb.divisor|0);ub=sc.location;Bb=zc[ub];if(1===Mb){Bb.buffer||L.enableVertexAttribArray(ub);rb=Va||1;if(Bb.type!==Ga||Bb.size!==rb||Bb.buffer!==Za||Bb.normalized!==dd||Bb.offset!==tc||Bb.stride!==Oc)L.bindBuffer(34962,Za.buffer),L.vertexAttribPointer(ub,rb,Ga,dd,Oc,tc),Bb.type=Ga,Bb.size=rb,Bb.buffer=Za,Bb.normalized=
dd,Bb.offset=tc,Bb.stride=Oc;Bb.divisor!==lc&&(n.vertexAttribDivisorANGLE(ub,lc),Bb.divisor=lc)}else if(Bb.buffer&&(L.disableVertexAttribArray(ub),Bb.buffer=null),Bb.x!==Qa||Bb.y!==Aa||Bb.z!==kb||Bb.w!==vc)L.vertexAttrib4f(ub,Qa,Aa,kb,vc),Bb.x=Qa,Bb.y=Aa,Bb.z=kb,Bb.w=vc;uc=ea.call(this,N,q,l);vb=!1;wd=null;rc=0;Ed=!1;ed=Jc=0;fd=1;Vb=0;bc=5126;lb=Zb=Ha=Pb=0;E(uc)?(vb=!0,wd=Z.createStream(34962,uc),bc=wd.dtype):(wd=Z.getBuffer(uc))?bc=wd.dtype:"constant"in uc?(fd=2,"number"===typeof uc.constant?(Ha=
uc.constant,Zb=lb=Pb=0):(Ha=0<uc.constant.length?uc.constant[0]:0,Zb=1<uc.constant.length?uc.constant[1]:0,lb=2<uc.constant.length?uc.constant[2]:0,Pb=3<uc.constant.length?uc.constant[3]:0)):(wd=E(uc.buffer)?Z.createStream(34962,uc.buffer):Z.getBuffer(uc.buffer),bc="type"in uc?Gd[uc.type]:wd.dtype,Ed=!!uc.normalized,ed=uc.size|0,Jc=uc.offset|0,Vb=uc.stride|0,rc=uc.divisor|0);wb=td.location;Nb=zc[wb];if(1===fd){Nb.buffer||L.enableVertexAttribArray(wb);Qb=ed||1;if(Nb.type!==bc||Nb.size!==Qb||Nb.buffer!==
wd||Nb.normalized!==Ed||Nb.offset!==Jc||Nb.stride!==Vb)L.bindBuffer(34962,wd.buffer),L.vertexAttribPointer(wb,Qb,bc,Ed,Vb,Jc),Nb.type=bc,Nb.size=Qb,Nb.buffer=wd,Nb.normalized=Ed,Nb.offset=Jc,Nb.stride=Vb;Nb.divisor!==rc&&(n.vertexAttribDivisorANGLE(wb,rc),Nb.divisor=rc)}else if(Nb.buffer&&(L.disableVertexAttribArray(wb),Nb.buffer=null),Nb.x!==Ha||Nb.y!==Zb||Nb.z!==lb||Nb.w!==Pb)L.vertexAttrib4f(wb,Ha,Zb,lb,Pb),Nb.x=Ha,Nb.y=Zb,Nb.z=lb,Nb.w=Pb;ec=Na.call(this,N,q,l);gc=!1;yd=null;xc=0;yc=!1;Kc=Ac=0;
$c=1;Sc=0;Lc=5126;Ec=Mc=Db=Kb=0;E(ec)?(gc=!0,yd=Z.createStream(34962,ec),Lc=yd.dtype):(yd=Z.getBuffer(ec))?Lc=yd.dtype:"constant"in ec?($c=2,"number"===typeof ec.constant?(Db=ec.constant,Mc=Ec=Kb=0):(Db=0<ec.constant.length?ec.constant[0]:0,Mc=1<ec.constant.length?ec.constant[1]:0,Ec=2<ec.constant.length?ec.constant[2]:0,Kb=3<ec.constant.length?ec.constant[3]:0)):(yd=E(ec.buffer)?Z.createStream(34962,ec.buffer):Z.getBuffer(ec.buffer),Lc="type"in ec?Gd[ec.type]:yd.dtype,yc=!!ec.normalized,Kc=ec.size|
0,Ac=ec.offset|0,Sc=ec.stride|0,xc=ec.divisor|0);Tc=mb.location;fc=zc[Tc];if(1===$c){fc.buffer||L.enableVertexAttribArray(Tc);Wc=Kc||1;if(fc.type!==Lc||fc.size!==Wc||fc.buffer!==yd||fc.normalized!==yc||fc.offset!==Ac||fc.stride!==Sc)L.bindBuffer(34962,yd.buffer),L.vertexAttribPointer(Tc,Wc,Lc,yc,Sc,Ac),fc.type=Lc,fc.size=Wc,fc.buffer=yd,fc.normalized=yc,fc.offset=Ac,fc.stride=Sc;fc.divisor!==xc&&(n.vertexAttribDivisorANGLE(Tc,xc),fc.divisor=xc)}else if(fc.buffer&&(L.disableVertexAttribArray(Tc),fc.buffer=
null),fc.x!==Db||fc.y!==Mc||fc.z!==Ec||fc.w!==Kb)L.vertexAttrib4f(Tc,Db,Mc,Ec,Kb),fc.x=Db,fc.y=Mc,fc.z=Ec,fc.w=Kb;gd=V.call(this,N,q,l);kd=!1;md=null;Xc=0;bf=!1;ke=Zd=0;se=1;me=0;Md=5126;od=Bc=id=Kd=0;E(gd)?(kd=!0,md=Z.createStream(34962,gd),Md=md.dtype):(md=Z.getBuffer(gd))?Md=md.dtype:"constant"in gd?(se=2,"number"===typeof gd.constant?(id=gd.constant,Bc=od=Kd=0):(id=0<gd.constant.length?gd.constant[0]:0,Bc=1<gd.constant.length?gd.constant[1]:0,od=2<gd.constant.length?gd.constant[2]:0,Kd=3<gd.constant.length?
gd.constant[3]:0)):(md=E(gd.buffer)?Z.createStream(34962,gd.buffer):Z.getBuffer(gd.buffer),Md="type"in gd?Gd[gd.type]:md.dtype,bf=!!gd.normalized,ke=gd.size|0,Zd=gd.offset|0,me=gd.stride|0,Xc=gd.divisor|0);ld=$a.location;cd=zc[ld];if(1===se){cd.buffer||L.enableVertexAttribArray(ld);pd=ke||1;if(cd.type!==Md||cd.size!==pd||cd.buffer!==md||cd.normalized!==bf||cd.offset!==Zd||cd.stride!==me)L.bindBuffer(34962,md.buffer),L.vertexAttribPointer(ld,pd,Md,bf,me,Zd),cd.type=Md,cd.size=pd,cd.buffer=md,cd.normalized=
bf,cd.offset=Zd,cd.stride=me;cd.divisor!==Xc&&(n.vertexAttribDivisorANGLE(ld,Xc),cd.divisor=Xc)}else if(cd.buffer&&(L.disableVertexAttribArray(ld),cd.buffer=null),cd.x!==id||cd.y!==Bc||cd.z!==od||cd.w!==Kd)L.vertexAttrib4f(ld,id,Bc,od,Kd),cd.x=id,cd.y=Bc,cd.z=od,cd.w=Kd;Fd=P.call(this,N,q,l);Hd=!1;te=null;ze=0;Ae=!1;fe=ne=0;de=1;pe=0;be=5126;qe=Vc=wc=ie=0;E(Fd)?(Hd=!0,te=Z.createStream(34962,Fd),be=te.dtype):(te=Z.getBuffer(Fd))?be=te.dtype:"constant"in Fd?(de=2,"number"===typeof Fd.constant?(wc=
Fd.constant,Vc=qe=ie=0):(wc=0<Fd.constant.length?Fd.constant[0]:0,Vc=1<Fd.constant.length?Fd.constant[1]:0,qe=2<Fd.constant.length?Fd.constant[2]:0,ie=3<Fd.constant.length?Fd.constant[3]:0)):(te=E(Fd.buffer)?Z.createStream(34962,Fd.buffer):Z.getBuffer(Fd.buffer),be="type"in Fd?Gd[Fd.type]:te.dtype,Ae=!!Fd.normalized,fe=Fd.size|0,ne=Fd.offset|0,pe=Fd.stride|0,ze=Fd.divisor|0);le=S.location;Ld=zc[le];if(1===de){Ld.buffer||L.enableVertexAttribArray(le);Pd=fe||4;if(Ld.type!==be||Ld.size!==Pd||Ld.buffer!==
te||Ld.normalized!==Ae||Ld.offset!==ne||Ld.stride!==pe)L.bindBuffer(34962,te.buffer),L.vertexAttribPointer(le,Pd,be,Ae,pe,ne),Ld.type=be,Ld.size=Pd,Ld.buffer=te,Ld.normalized=Ae,Ld.offset=ne,Ld.stride=pe;Ld.divisor!==ze&&(n.vertexAttribDivisorANGLE(le,ze),Ld.divisor=ze)}else if(Ld.buffer&&(L.disableVertexAttribArray(le),Ld.buffer=null),Ld.x!==wc||Ld.y!==Vc||Ld.z!==qe||Ld.w!==ie)L.vertexAttrib4f(le,wc,Vc,qe,ie),Ld.x=wc,Ld.y=Vc,Ld.z=qe,Ld.w=ie;Qd=O.call(this,N,q,l);Rd=!1;je=null;vf=0;Ce=!1;Re=oe=0;
Se=1;Ne=0;re=5126;Je=Ie=He=Fe=0;E(Qd)?(Rd=!0,je=Z.createStream(34962,Qd),re=je.dtype):(je=Z.getBuffer(Qd))?re=je.dtype:"constant"in Qd?(Se=2,"number"===typeof Qd.constant?(He=Qd.constant,Ie=Je=Fe=0):(He=0<Qd.constant.length?Qd.constant[0]:0,Ie=1<Qd.constant.length?Qd.constant[1]:0,Je=2<Qd.constant.length?Qd.constant[2]:0,Fe=3<Qd.constant.length?Qd.constant[3]:0)):(je=E(Qd.buffer)?Z.createStream(34962,Qd.buffer):Z.getBuffer(Qd.buffer),re="type"in Qd?Gd[Qd.type]:je.dtype,Ce=!!Qd.normalized,Re=Qd.size|
0,oe=Qd.offset|0,Ne=Qd.stride|0,vf=Qd.divisor|0);Ge=Gb.location;Nd=zc[Ge];if(1===Se){Nd.buffer||L.enableVertexAttribArray(Ge);Ud=Re||4;if(Nd.type!==re||Nd.size!==Ud||Nd.buffer!==je||Nd.normalized!==Ce||Nd.offset!==oe||Nd.stride!==Ne)L.bindBuffer(34962,je.buffer),L.vertexAttribPointer(Ge,Ud,re,Ce,Ne,oe),Nd.type=re,Nd.size=Ud,Nd.buffer=je,Nd.normalized=Ce,Nd.offset=oe,Nd.stride=Ne;Nd.divisor!==vf&&(n.vertexAttribDivisorANGLE(Ge,vf),Nd.divisor=vf)}else if(Nd.buffer&&(L.disableVertexAttribArray(Ge),Nd.buffer=
null),Nd.x!==He||Nd.y!==Ie||Nd.z!==Je||Nd.w!==Fe)L.vertexAttrib4f(Ge,He,Ie,Je,Fe),Nd.x=He,Nd.y=Ie,Nd.z=Je,Nd.w=Fe;$d=T.call(this,N,q,l);ce=!1;Ke=null;Bd=0;Sd=!1;Le=De=0;cf=1;af=0;Te=5126;Ue=Xe=$e=Oe=0;E($d)?(ce=!0,Ke=Z.createStream(34962,$d),Te=Ke.dtype):(Ke=Z.getBuffer($d))?Te=Ke.dtype:"constant"in $d?(cf=2,"number"===typeof $d.constant?($e=$d.constant,Xe=Ue=Oe=0):($e=0<$d.constant.length?$d.constant[0]:0,Xe=1<$d.constant.length?$d.constant[1]:0,Ue=2<$d.constant.length?$d.constant[2]:0,Oe=3<$d.constant.length?
$d.constant[3]:0)):(Ke=E($d.buffer)?Z.createStream(34962,$d.buffer):Z.getBuffer($d.buffer),Te="type"in $d?Gd[$d.type]:Ke.dtype,Sd=!!$d.normalized,Le=$d.size|0,De=$d.offset|0,af=$d.stride|0,Bd=$d.divisor|0);Ve=ma.location;Td=zc[Ve];if(1===cf){Td.buffer||L.enableVertexAttribArray(Ve);Xd=Le||1;if(Td.type!==Te||Td.size!==Xd||Td.buffer!==Ke||Td.normalized!==Sd||Td.offset!==De||Td.stride!==af)L.bindBuffer(34962,Ke.buffer),L.vertexAttribPointer(Ve,Xd,Te,Sd,af,De),Td.type=Te,Td.size=Xd,Td.buffer=Ke,Td.normalized=
Sd,Td.offset=De,Td.stride=af;Td.divisor!==Bd&&(n.vertexAttribDivisorANGLE(Ve,Bd),Td.divisor=Bd)}else if(Td.buffer&&(L.disableVertexAttribArray(Ve),Td.buffer=null),Td.x!==$e||Td.y!==Xe||Td.z!==Ue||Td.w!==Oe)L.vertexAttrib4f(Ve,$e,Xe,Ue,Oe),Td.x=$e,Td.y=Xe,Td.z=Ue,Td.w=Oe;We=N.pixelRatio;l&&jf===We||(jf=We,L.uniform1f(yb.location,We));nf=Q.call(this,N,q,l);ff=nf[0];lf=nf[1];l&&kf===ff&&mf===lf||(kf=ff,mf=lf,L.uniform2f(Ba.location,ff,lf));rf=q.scale;of=rf[0];Cf=rf[1];l&&sf===of&&Df===Cf||(sf=of,Df=
Cf,L.uniform2f(Ka.location,of,Cf));Pe=q.scaleFract;Ee=Pe[0];qf=Pe[1];l&&pf===Ee&&Ef===qf||(pf=Ee,Ef=qf,L.uniform2f(Y.location,Ee,qf));Hf=q.translate;Bf=Hf[0];Gf=Hf[1];l&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,L.uniform2f(ga.location,Bf,Gf));yf=q.translateFract;wf=yf[0];Af=yf[1];l&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,L.uniform2f(qa.location,wf,Af));Kf=q.opacity;l&&Lf===Kf||(Lf=Kf,L.uniform1f(da.location,Kf));Mf=q.elements;tf=null;(tf=(Rf=E(Mf))?sb.createStream(Mf):sb.getElements(Mf))&&L.bindBuffer(34963,tf.buffer.buffer);
If=q.offset;if(uf=q.count)0<bb?tf?n.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),bb):n.drawArraysInstancedANGLE(0,If,uf,bb):0>bb&&(tf?L.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):L.drawArrays(0,If,uf)),N.viewportWidth=jd,N.viewportHeight=Sb,Xb&&Z.destroyStream(bd),zb&&Z.destroyStream(Ra),Ya&&Z.destroyStream(Za),vb&&Z.destroyStream(wd),gc&&Z.destroyStream(yd),kd&&Z.destroyStream(md),Hd&&Z.destroyStream(te),Rd&&Z.destroyStream(je),ce&&Z.destroyStream(Ke),Rf&&sb.destroyStream(tf)}na.unbind();
ha.dirty=!0;fa.setVAO(null);h&&(c.cpuTime+=performance.now()-g)},draw:function(a){var n,q,t,v,w,u,G,x,r,Ia,A,J,I,oa,R,ca,K,O,P,Q,U,T,X,aa,W,V,ea,sa,ka,la,ra,ja,xa,na,Na,Xa,Ca,Sa,Ib,Ta,Ub,bb,Cb,Wb,xd,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,yd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,bf,Zd,ke,
se,me,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,te,ze,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,vf,Ce,oe,Re;n=Qc.next;n!==Qc.cur&&(n?L.bindFramebuffer(36160,n.framebuffer):L.bindFramebuffer(36160,null),Qc.cur=n);if(ha.dirty){var Se,Ne,re,Fe,He,Ie,Je,Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf;Se=ia.dither;Se!==ha.dither&&(Se?L.enable(3024):L.disable(3024),ha.dither=Se);Ne=F[0];re=F[1];if(Ne!==ba[0]||re!==ba[1])L.blendEquationSeparate(Ne,re),ba[0]=Ne,ba[1]=re;Fe=ia.depth_func;
Fe!==ha.depth_func&&(L.depthFunc(Fe),ha.depth_func=Fe);He=oc[0];Ie=oc[1];if(He!==Eb[0]||Ie!==Eb[1])L.depthRange(He,Ie),Eb[0]=He,Eb[1]=Ie;Je=ia.depth_mask;Je!==ha.depth_mask&&(L.depthMask(Je),ha.depth_mask=Je);Ge=Ja[0];Nd=Ja[1];Ud=Ja[2];$d=Ja[3];if(Ge!==C[0]||Nd!==C[1]||Ud!==C[2]||$d!==C[3])L.colorMask(Ge,Nd,Ud,$d),C[0]=Ge,C[1]=Nd,C[2]=Ud,C[3]=$d;ce=ia.cull_enable;ce!==ha.cull_enable&&(ce?L.enable(2884):L.disable(2884),ha.cull_enable=ce);Ke=ia.cull_face;Ke!==ha.cull_face&&(L.cullFace(Ke),ha.cull_face=
Ke);Bd=ia.frontFace;Bd!==ha.frontFace&&(L.frontFace(Bd),ha.frontFace=Bd);Sd=ia.lineWidth;Sd!==ha.lineWidth&&(L.lineWidth(Sd),ha.lineWidth=Sd);De=ia.polygonOffset_enable;De!==ha.polygonOffset_enable&&(De?L.enable(32823):L.disable(32823),ha.polygonOffset_enable=De);Le=pa[0];cf=pa[1];if(Le!==Fb[0]||cf!==Fb[1])L.polygonOffset(Le,cf),Fb[0]=Le,Fb[1]=cf;af=ia.sample_alpha;af!==ha.sample_alpha&&(af?L.enable(32926):L.disable(32926),ha.sample_alpha=af);Te=ia.sample_enable;Te!==ha.sample_enable&&(Te?L.enable(32928):
L.disable(32928),ha.sample_enable=Te);Oe=xb[0];$e=xb[1];if(Oe!==Ye[0]||$e!==Ye[1])L.sampleCoverage(Oe,$e),Ye[0]=Oe,Ye[1]=$e;Xe=ia.stencil_mask;Xe!==ha.stencil_mask&&(L.stencilMask(Xe),ha.stencil_mask=Xe);Ue=ee[0];Ve=ee[1];Td=ee[2];if(Ue!==we[0]||Ve!==we[1]||Td!==we[2])L.stencilFunc(Ue,Ve,Td),we[0]=Ue,we[1]=Ve,we[2]=Td;Xd=ge[0];We=ge[1];jf=ge[2];nf=ge[3];if(Xd!==ve[0]||We!==ve[1]||jf!==ve[2]||nf!==ve[3])L.stencilOpSeparate(Xd,We,jf,nf),ve[0]=Xd,ve[1]=We,ve[2]=jf,ve[3]=nf;ff=ue[0];kf=ue[1];lf=ue[2];
mf=ue[3];if(ff!==Od[0]||kf!==Od[1]||lf!==Od[2]||mf!==Od[3])L.stencilOpSeparate(ff,kf,lf,mf),Od[0]=ff,Od[1]=kf,Od[2]=lf,Od[3]=mf}q=a.viewport;t=q.x|0;v=q.y|0;w="width"in q?q.width|0:N.framebufferWidth-t;u="height"in q?q.height|0:N.framebufferHeight-v;G=N.viewportWidth;N.viewportWidth=w;x=N.viewportHeight;N.viewportHeight=u;L.viewport(t,v,w,u);Cd[0]=t;Cd[1]=v;Cd[2]=w;Cd[3]=u;L.blendColor(0,0,0,1);M[0]=0;M[1]=0;M[2]=0;M[3]=1;L.enable(3042);ha.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);ya[0]=
770;ya[1]=771;ya[2]=773;ya[3]=1;L.disable(2929);ha.depth_enable=!1;r=a.viewport;Ia=r.x|0;A=r.y|0;J="width"in r?r.width|0:N.framebufferWidth-Ia;I="height"in r?r.height|0:N.framebufferHeight-A;L.scissor(Ia,A,J,I);he[0]=Ia;he[1]=A;he[2]=J;he[3]=I;L.enable(3089);ha.scissor_enable=!0;L.disable(2960);ha.stencil_enable=!1;if(oa=ha.profile)R=performance.now(),c.count++;L.useProgram(d.program);ca=Pc.angle_instanced_arrays;fa.setVAO(null);K=e.call(this,N,a,0);O=!1;P=null;Q=0;U=!1;X=T=0;aa=1;W=0;V=5126;la=ka=
sa=ea=0;E(K)?(O=!0,P=Z.createStream(34962,K),V=P.dtype):(P=Z.getBuffer(K))?V=P.dtype:"constant"in K?(aa=2,"number"===typeof K.constant?(sa=K.constant,ka=la=ea=0):(sa=0<K.constant.length?K.constant[0]:0,ka=1<K.constant.length?K.constant[1]:0,la=2<K.constant.length?K.constant[2]:0,ea=3<K.constant.length?K.constant[3]:0)):(P=E(K.buffer)?Z.createStream(34962,K.buffer):Z.getBuffer(K.buffer),V="type"in K?Gd[K.type]:P.dtype,U=!!K.normalized,X=K.size|0,T=K.offset|0,W=K.stride|0,Q=K.divisor|0);ra=$b.location;
ja=zc[ra];if(1===aa){ja.buffer||L.enableVertexAttribArray(ra);xa=X||1;if(ja.type!==V||ja.size!==xa||ja.buffer!==P||ja.normalized!==U||ja.offset!==T||ja.stride!==W)L.bindBuffer(34962,P.buffer),L.vertexAttribPointer(ra,xa,V,U,W,T),ja.type=V,ja.size=xa,ja.buffer=P,ja.normalized=U,ja.offset=T,ja.stride=W;ja.divisor!==Q&&(ca.vertexAttribDivisorANGLE(ra,Q),ja.divisor=Q)}else if(ja.buffer&&(L.disableVertexAttribArray(ra),ja.buffer=null),ja.x!==sa||ja.y!==ka||ja.z!==la||ja.w!==ea)L.vertexAttrib4f(ra,sa,ka,
la,ea),ja.x=sa,ja.y=ka,ja.z=la,ja.w=ea;na=m.call(this,N,a,0);Na=!1;Xa=null;Ca=0;Sa=!1;Ta=Ib=0;Ub=1;bb=0;Cb=5126;Rb=jc=xd=Wb=0;E(na)?(Na=!0,Xa=Z.createStream(34962,na),Cb=Xa.dtype):(Xa=Z.getBuffer(na))?Cb=Xa.dtype:"constant"in na?(Ub=2,"number"===typeof na.constant?(xd=na.constant,jc=Rb=Wb=0):(xd=0<na.constant.length?na.constant[0]:0,jc=1<na.constant.length?na.constant[1]:0,Rb=2<na.constant.length?na.constant[2]:0,Wb=3<na.constant.length?na.constant[3]:0)):(Xa=E(na.buffer)?Z.createStream(34962,na.buffer):
Z.getBuffer(na.buffer),Cb="type"in na?Gd[na.type]:Xa.dtype,Sa=!!na.normalized,Ta=na.size|0,Ib=na.offset|0,bb=na.stride|0,Ca=na.divisor|0);jd=ic.location;Sb=zc[jd];if(1===Ub){Sb.buffer||L.enableVertexAttribArray(jd);Oa=Ta||1;if(Sb.type!==Cb||Sb.size!==Oa||Sb.buffer!==Xa||Sb.normalized!==Sa||Sb.offset!==Ib||Sb.stride!==bb)L.bindBuffer(34962,Xa.buffer),L.vertexAttribPointer(jd,Oa,Cb,Sa,bb,Ib),Sb.type=Cb,Sb.size=Oa,Sb.buffer=Xa,Sb.normalized=Sa,Sb.offset=Ib,Sb.stride=bb;Sb.divisor!==Ca&&(ca.vertexAttribDivisorANGLE(jd,
Ca),Sb.divisor=Ca)}else if(Sb.buffer&&(L.disableVertexAttribArray(jd),Sb.buffer=null),Sb.x!==xd||Sb.y!==jc||Sb.z!==Rb||Sb.w!==Wb)L.vertexAttrib4f(jd,xd,jc,Rb,Wb),Sb.x=xd,Sb.y=jc,Sb.z=Rb,Sb.w=Wb;nb=k.call(this,N,a,0);tb=!1;gb=null;Pa=0;nc=!1;bd=Xb=0;cb=1;kc=0;Zc=5126;ta=jb=ib=hc=0;E(nb)?(tb=!0,gb=Z.createStream(34962,nb),Zc=gb.dtype):(gb=Z.getBuffer(nb))?Zc=gb.dtype:"constant"in nb?(cb=2,"number"===typeof nb.constant?(ib=nb.constant,jb=ta=hc=0):(ib=0<nb.constant.length?nb.constant[0]:0,jb=1<nb.constant.length?
nb.constant[1]:0,ta=2<nb.constant.length?nb.constant[2]:0,hc=3<nb.constant.length?nb.constant[3]:0)):(gb=E(nb.buffer)?Z.createStream(34962,nb.buffer):Z.getBuffer(nb.buffer),Zc="type"in nb?Gd[nb.type]:gb.dtype,nc=!!nb.normalized,bd=nb.size|0,Xb=nb.offset|0,kc=nb.stride|0,Pa=nb.divisor|0);ob=sc.location;wa=zc[ob];if(1===cb){wa.buffer||L.enableVertexAttribArray(ob);Ua=bd||1;if(wa.type!==Zc||wa.size!==Ua||wa.buffer!==gb||wa.normalized!==nc||wa.offset!==Xb||wa.stride!==kc)L.bindBuffer(34962,gb.buffer),
L.vertexAttribPointer(ob,Ua,Zc,nc,kc,Xb),wa.type=Zc,wa.size=Ua,wa.buffer=gb,wa.normalized=nc,wa.offset=Xb,wa.stride=kc;wa.divisor!==Pa&&(ca.vertexAttribDivisorANGLE(ob,Pa),wa.divisor=Pa)}else if(wa.buffer&&(L.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==ib||wa.y!==jb||wa.z!==ta||wa.w!==hc)L.vertexAttrib4f(ob,ib,jb,ta,hc),wa.x=ib,wa.y=jb,wa.z=ta,wa.w=hc;ab=l.call(this,N,a,0);za=!1;db=null;Ma=0;Ab=!1;Ra=zb=0;Hc=1;Jb=0;Lb=5126;La=yd=ua=Tb=0;E(ab)?(za=!0,db=Z.createStream(34962,ab),Lb=db.dtype):
(db=Z.getBuffer(ab))?Lb=db.dtype:"constant"in ab?(Hc=2,"number"===typeof ab.constant?(ua=ab.constant,yd=La=Tb=0):(ua=0<ab.constant.length?ab.constant[0]:0,yd=1<ab.constant.length?ab.constant[1]:0,La=2<ab.constant.length?ab.constant[2]:0,Tb=3<ab.constant.length?ab.constant[3]:0)):(db=E(ab.buffer)?Z.createStream(34962,ab.buffer):Z.getBuffer(ab.buffer),Lb="type"in ab?Gd[ab.type]:db.dtype,Ab=!!ab.normalized,Ra=ab.size|0,zb=ab.offset|0,Jb=ab.stride|0,Ma=ab.divisor|0);Ob=td.location;eb=zc[Ob];if(1===Hc){eb.buffer||
L.enableVertexAttribArray(Ob);hb=Ra||1;if(eb.type!==Lb||eb.size!==hb||eb.buffer!==db||eb.normalized!==Ab||eb.offset!==zb||eb.stride!==Jb)L.bindBuffer(34962,db.buffer),L.vertexAttribPointer(Ob,hb,Lb,Ab,Jb,zb),eb.type=Lb,eb.size=hb,eb.buffer=db,eb.normalized=Ab,eb.offset=zb,eb.stride=Jb;eb.divisor!==Ma&&(ca.vertexAttribDivisorANGLE(Ob,Ma),eb.divisor=Ma)}else if(eb.buffer&&(L.disableVertexAttribArray(Ob),eb.buffer=null),eb.x!==ua||eb.y!==yd||eb.z!==La||eb.w!==Tb)L.vertexAttrib4f(Ob,ua,yd,La,Tb),eb.x=
ua,eb.y=yd,eb.z=La,eb.w=Tb;va=g.call(this,N,a,0);dc=!1;Da=null;pb=0;qb=!1;Za=Ya=0;lc=1;dd=0;tc=5126;Ga=Oc=Mb=Va=0;E(va)?(dc=!0,Da=Z.createStream(34962,va),tc=Da.dtype):(Da=Z.getBuffer(va))?tc=Da.dtype:"constant"in va?(lc=2,"number"===typeof va.constant?(Mb=va.constant,Oc=Ga=Va=0):(Mb=0<va.constant.length?va.constant[0]:0,Oc=1<va.constant.length?va.constant[1]:0,Ga=2<va.constant.length?va.constant[2]:0,Va=3<va.constant.length?va.constant[3]:0)):(Da=E(va.buffer)?Z.createStream(34962,va.buffer):Z.getBuffer(va.buffer),
tc="type"in va?Gd[va.type]:Da.dtype,qb=!!va.normalized,Za=va.size|0,Ya=va.offset|0,dd=va.stride|0,pb=va.divisor|0);vc=mb.location;Qa=zc[vc];if(1===lc){Qa.buffer||L.enableVertexAttribArray(vc);Aa=Za||1;if(Qa.type!==tc||Qa.size!==Aa||Qa.buffer!==Da||Qa.normalized!==qb||Qa.offset!==Ya||Qa.stride!==dd)L.bindBuffer(34962,Da.buffer),L.vertexAttribPointer(vc,Aa,tc,qb,dd,Ya),Qa.type=tc,Qa.size=Aa,Qa.buffer=Da,Qa.normalized=qb,Qa.offset=Ya,Qa.stride=dd;Qa.divisor!==pb&&(ca.vertexAttribDivisorANGLE(vc,pb),
Qa.divisor=pb)}else if(Qa.buffer&&(L.disableVertexAttribArray(vc),Qa.buffer=null),Qa.x!==Mb||Qa.y!==Oc||Qa.z!==Ga||Qa.w!==Va)L.vertexAttrib4f(vc,Mb,Oc,Ga,Va),Qa.x=Mb,Qa.y=Oc,Qa.z=Ga,Qa.w=Va;kb=b.call(this,N,a,0);ub=!1;Bb=null;rb=0;uc=!1;wd=vb=0;rc=1;Ed=0;Jc=5126;bc=Vb=fd=ed=0;E(kb)?(ub=!0,Bb=Z.createStream(34962,kb),Jc=Bb.dtype):(Bb=Z.getBuffer(kb))?Jc=Bb.dtype:"constant"in kb?(rc=2,"number"===typeof kb.constant?(fd=kb.constant,Vb=bc=ed=0):(fd=0<kb.constant.length?kb.constant[0]:0,Vb=1<kb.constant.length?
kb.constant[1]:0,bc=2<kb.constant.length?kb.constant[2]:0,ed=3<kb.constant.length?kb.constant[3]:0)):(Bb=E(kb.buffer)?Z.createStream(34962,kb.buffer):Z.getBuffer(kb.buffer),Jc="type"in kb?Gd[kb.type]:Bb.dtype,uc=!!kb.normalized,wd=kb.size|0,vb=kb.offset|0,Ed=kb.stride|0,rb=kb.divisor|0);Pb=$a.location;Ha=zc[Pb];if(1===rc){Ha.buffer||L.enableVertexAttribArray(Pb);Zb=wd||1;if(Ha.type!==Jc||Ha.size!==Zb||Ha.buffer!==Bb||Ha.normalized!==uc||Ha.offset!==vb||Ha.stride!==Ed)L.bindBuffer(34962,Bb.buffer),
L.vertexAttribPointer(Pb,Zb,Jc,uc,Ed,vb),Ha.type=Jc,Ha.size=Zb,Ha.buffer=Bb,Ha.normalized=uc,Ha.offset=vb,Ha.stride=Ed;Ha.divisor!==rb&&(ca.vertexAttribDivisorANGLE(Pb,rb),Ha.divisor=rb)}else if(Ha.buffer&&(L.disableVertexAttribArray(Pb),Ha.buffer=null),Ha.x!==fd||Ha.y!==Vb||Ha.z!==bc||Ha.w!==ed)L.vertexAttrib4f(Pb,fd,Vb,bc,ed),Ha.x=fd,Ha.y=Vb,Ha.z=bc,Ha.w=ed;lb=p.call(this,N,a,0);wb=!1;Nb=null;Qb=0;ec=!1;Ze=gc=0;xc=1;yc=0;Ac=5126;Lc=Sc=$c=Kc=0;E(lb)?(wb=!0,Nb=Z.createStream(34962,lb),Ac=Nb.dtype):
(Nb=Z.getBuffer(lb))?Ac=Nb.dtype:"constant"in lb?(xc=2,"number"===typeof lb.constant?($c=lb.constant,Sc=Lc=Kc=0):($c=0<lb.constant.length?lb.constant[0]:0,Sc=1<lb.constant.length?lb.constant[1]:0,Lc=2<lb.constant.length?lb.constant[2]:0,Kc=3<lb.constant.length?lb.constant[3]:0)):(Nb=E(lb.buffer)?Z.createStream(34962,lb.buffer):Z.getBuffer(lb.buffer),Ac="type"in lb?Gd[lb.type]:Nb.dtype,ec=!!lb.normalized,Ze=lb.size|0,gc=lb.offset|0,yc=lb.stride|0,Qb=lb.divisor|0);Kb=S.location;Db=zc[Kb];if(1===xc){Db.buffer||
L.enableVertexAttribArray(Kb);Mc=Ze||4;if(Db.type!==Ac||Db.size!==Mc||Db.buffer!==Nb||Db.normalized!==ec||Db.offset!==gc||Db.stride!==yc)L.bindBuffer(34962,Nb.buffer),L.vertexAttribPointer(Kb,Mc,Ac,ec,yc,gc),Db.type=Ac,Db.size=Mc,Db.buffer=Nb,Db.normalized=ec,Db.offset=gc,Db.stride=yc;Db.divisor!==Qb&&(ca.vertexAttribDivisorANGLE(Kb,Qb),Db.divisor=Qb)}else if(Db.buffer&&(L.disableVertexAttribArray(Kb),Db.buffer=null),Db.x!==$c||Db.y!==Sc||Db.z!==Lc||Db.w!==Kc)L.vertexAttrib4f(Kb,$c,Sc,Lc,Kc),Db.x=
$c,Db.y=Sc,Db.z=Lc,Db.w=Kc;Ec=H.call(this,N,a,0);Tc=!1;fc=null;Wc=0;gd=!1;md=kd=0;Xc=1;bf=0;Zd=5126;Md=me=se=ke=0;E(Ec)?(Tc=!0,fc=Z.createStream(34962,Ec),Zd=fc.dtype):(fc=Z.getBuffer(Ec))?Zd=fc.dtype:"constant"in Ec?(Xc=2,"number"===typeof Ec.constant?(se=Ec.constant,me=Md=ke=0):(se=0<Ec.constant.length?Ec.constant[0]:0,me=1<Ec.constant.length?Ec.constant[1]:0,Md=2<Ec.constant.length?Ec.constant[2]:0,ke=3<Ec.constant.length?Ec.constant[3]:0)):(fc=E(Ec.buffer)?Z.createStream(34962,Ec.buffer):Z.getBuffer(Ec.buffer),
Zd="type"in Ec?Gd[Ec.type]:fc.dtype,gd=!!Ec.normalized,md=Ec.size|0,kd=Ec.offset|0,bf=Ec.stride|0,Wc=Ec.divisor|0);Kd=Gb.location;id=zc[Kd];if(1===Xc){id.buffer||L.enableVertexAttribArray(Kd);Bc=md||4;if(id.type!==Zd||id.size!==Bc||id.buffer!==fc||id.normalized!==gd||id.offset!==kd||id.stride!==bf)L.bindBuffer(34962,fc.buffer),L.vertexAttribPointer(Kd,Bc,Zd,gd,bf,kd),id.type=Zd,id.size=Bc,id.buffer=fc,id.normalized=gd,id.offset=kd,id.stride=bf;id.divisor!==Wc&&(ca.vertexAttribDivisorANGLE(Kd,Wc),
id.divisor=Wc)}else if(id.buffer&&(L.disableVertexAttribArray(Kd),id.buffer=null),id.x!==se||id.y!==me||id.z!==Md||id.w!==ke)L.vertexAttrib4f(Kd,se,me,Md,ke),id.x=se,id.y=me,id.z=Md,id.w=ke;od=y.call(this,N,a,0);ld=!1;cd=null;pd=0;Fd=!1;te=Hd=0;ze=1;Ae=0;ne=5126;be=pe=de=fe=0;E(od)?(ld=!0,cd=Z.createStream(34962,od),ne=cd.dtype):(cd=Z.getBuffer(od))?ne=cd.dtype:"constant"in od?(ze=2,"number"===typeof od.constant?(de=od.constant,pe=be=fe=0):(de=0<od.constant.length?od.constant[0]:0,pe=1<od.constant.length?
od.constant[1]:0,be=2<od.constant.length?od.constant[2]:0,fe=3<od.constant.length?od.constant[3]:0)):(cd=E(od.buffer)?Z.createStream(34962,od.buffer):Z.getBuffer(od.buffer),ne="type"in od?Gd[od.type]:cd.dtype,Fd=!!od.normalized,te=od.size|0,Hd=od.offset|0,Ae=od.stride|0,pd=od.divisor|0);ie=ma.location;wc=zc[ie];if(1===ze){wc.buffer||L.enableVertexAttribArray(ie);Vc=te||1;if(wc.type!==ne||wc.size!==Vc||wc.buffer!==cd||wc.normalized!==Fd||wc.offset!==Hd||wc.stride!==Ae)L.bindBuffer(34962,cd.buffer),
L.vertexAttribPointer(ie,Vc,ne,Fd,Ae,Hd),wc.type=ne,wc.size=Vc,wc.buffer=cd,wc.normalized=Fd,wc.offset=Hd,wc.stride=Ae;wc.divisor!==pd&&(ca.vertexAttribDivisorANGLE(ie,pd),wc.divisor=pd)}else if(wc.buffer&&(L.disableVertexAttribArray(ie),wc.buffer=null),wc.x!==de||wc.y!==pe||wc.z!==be||wc.w!==fe)L.vertexAttrib4f(ie,de,pe,be,fe),wc.x=de,wc.y=pe,wc.z=be,wc.w=fe;L.uniform1i(B.location,!1);L.uniform1f(yb.location,N.pixelRatio);qe=h.call(this,N,a,0);L.uniform2f(Ba.location,qe[0],qe[1]);le=a.scale;L.uniform2f(Ka.location,
le[0],le[1]);Ld=a.scaleFract;L.uniform2f(Y.location,Ld[0],Ld[1]);Pd=a.translate;L.uniform2f(ga.location,Pd[0],Pd[1]);Qd=a.translateFract;L.uniform2f(qa.location,Qd[0],Qd[1]);L.uniform1f(da.location,a.opacity);L.uniform1i(Ea.location,f.bind());Rd=a.elements;je=null;(je=(vf=E(Rd))?sb.createStream(Rd):sb.getElements(Rd))&&L.bindBuffer(34963,je.buffer.buffer);Ce=a.offset;if(oe=a.count)Re=Fa.instances,0<Re?je?ca.drawElementsInstancedANGLE(0,oe,je.type,Ce<<(je.type-5121>>1),Re):ca.drawArraysInstancedANGLE(0,
Ce,oe,Re):0>Re&&(je?L.drawElements(0,oe,je.type,Ce<<(je.type-5121>>1)):L.drawArrays(0,Ce,oe)),ha.dirty=!0,fa.setVAO(null),N.viewportWidth=G,N.viewportHeight=x,oa&&(c.cpuTime+=performance.now()-R),O&&Z.destroyStream(P),Na&&Z.destroyStream(Xa),tb&&Z.destroyStream(gb),za&&Z.destroyStream(db),dc&&Z.destroyStream(Da),ub&&Z.destroyStream(Bb),wb&&Z.destroyStream(Nb),Tc&&Z.destroyStream(fc),ld&&Z.destroyStream(cd),f.unbind(),vf&&sb.destroyStream(je)},scope:function(b,a,f){var h,l,g,p,d,e,m,k,y,D,H,z,C,B,
F,M,L,O,P,Q,S,T,ba,V,Y,fa,da,ea,ga,ma,ka,pa,la,na,ya,qa,Ja,Ea,Ka,Ba,Na,Sa,xb,Eb,$a,Fb,zc,Oa,nb,tb,gb,Pa,mb,Cb,td,cb,Gb,oc,yb,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,$b,Jb,Lb,Tb,ua,sc,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,ic,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,ee,rc,Qc,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Pc,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd,kd,md,Xc,Cd,Od,we,he,ge,Md,Kd,id,Bc,od,ld,cd,pd,Fd,Hd,ue,ve,Ae,ne,fe,de,pe,be,ie,wc,Vc,qe,le,Ld,Pd,Qd,Rd,je,Ye,Ce,oe,Re,Se,Ne,re,Fe,He,Ie,Je,
Ge,Nd,Ud,$d,ce,Ke,Bd,Sd,De,Le,cf,af,Te,Oe,$e,Xe,Ue,Ve,Td,Xd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Cf,Df,Pe,Ee,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;h=b.viewport;l=h.x|0;g=h.y|0;p="width"in h?h.width|0:N.framebufferWidth-l;d="height"in h?h.height|0:N.framebufferHeight-g;e=N.viewportWidth;N.viewportWidth=p;m=N.viewportHeight;
N.viewportHeight=d;k=yd[0];yd[0]=l;y=yd[1];yd[1]=g;D=yd[2];yd[2]=p;H=yd[3];yd[3]=d;z=ra[0];ra[0]=0;C=ra[1];ra[1]=0;B=ra[2];ra[2]=0;F=ra[3];ra[3]=1;M=ia.blend_enable;ia.blend_enable=!0;L=xa[0];xa[0]=770;O=xa[1];xa[1]=771;P=xa[2];xa[2]=773;Q=xa[3];xa[3]=1;S=ia.depth_enable;ia.depth_enable=!1;T=b.viewport;ba=T.x|0;V=T.y|0;Y="width"in T?T.width|0:N.framebufferWidth-ba;fa="height"in T?T.height|0:N.framebufferHeight-V;da=xd[0];xd[0]=ba;ea=xd[1];xd[1]=V;ga=xd[2];xd[2]=Y;ma=xd[3];xd[3]=fa;ka=ia.scissor_enable;
ia.scissor_enable=!0;pa=ia.stencil_enable;ia.stencil_enable=!1;if(la=ha.profile)na=performance.now(),c.count++;ya=b.elements;qa=null;qa=(Ja=E(ya))?sb.createStream(ya):sb.getElements(ya);Ea=Fa.elements;Fa.elements=qa;Ka=b.offset;Ba=Fa.offset;Fa.offset=Ka;Na=b.count;Sa=Fa.count;Fa.count=Na;xb=Fa.primitive;Fa.primitive=0;Eb=X[45];X[45]=!1;$a=b.markerTexture;Fb=X[48];X[48]=$a;zc=b.opacity;Oa=X[10];X[10]=zc;nb=n.call(this,N,b,f);tb=X[46];X[46]=nb;gb=X[47];X[47]=q;Pa=N.pixelRatio;mb=X[34];X[34]=Pa;Cb=b.scale;
td=X[6];X[6]=Cb;cb=b.scaleFract;Gb=X[7];X[7]=cb;oc=b.translate;yb=X[8];X[8]=oc;ib=b.translateFract;jb=X[9];X[9]=ib;ta=t.call(this,N,b,f);ob=!1;wa=null;Ua=0;ab=!1;db=za=0;Ma=1;Ab=0;zb=5126;Lb=Jb=$b=Ra=0;E(ta)?(ob=!0,wa=Z.createStream(34962,ta),zb=wa.dtype):(wa=Z.getBuffer(ta))?zb=wa.dtype:"constant"in ta?(Ma=2,"number"===typeof ta.constant?($b=ta.constant,Jb=Lb=Ra=0):($b=0<ta.constant.length?ta.constant[0]:0,Jb=1<ta.constant.length?ta.constant[1]:0,Lb=2<ta.constant.length?ta.constant[2]:0,Ra=3<ta.constant.length?
ta.constant[3]:0)):(wa=E(ta.buffer)?Z.createStream(34962,ta.buffer):Z.getBuffer(ta.buffer),zb="type"in ta?Gd[ta.type]:wa.dtype,ab=!!ta.normalized,db=ta.size|0,za=ta.offset|0,Ab=ta.stride|0,Ua=ta.divisor|0);Tb=v.buffer;v.buffer=wa;ua=v.divisor;v.divisor=Ua;sc=v.normalized;v.normalized=ab;La=v.offset;v.offset=za;Ob=v.size;v.size=db;eb=v.state;v.state=Ma;hb=v.stride;v.stride=Ab;va=v.type;v.type=zb;dc=v.w;v.w=Ra;Da=v.x;v.x=$b;pb=v.y;v.y=Jb;qb=v.z;v.z=Lb;Ya=G.call(this,N,b,f);Za=!1;lc=null;ic=0;tc=!1;
Mb=Va=0;Oc=1;Ga=0;vc=5126;ub=kb=Aa=Qa=0;E(Ya)?(Za=!0,lc=Z.createStream(34962,Ya),vc=lc.dtype):(lc=Z.getBuffer(Ya))?vc=lc.dtype:"constant"in Ya?(Oc=2,"number"===typeof Ya.constant?(Aa=Ya.constant,kb=ub=Qa=0):(Aa=0<Ya.constant.length?Ya.constant[0]:0,kb=1<Ya.constant.length?Ya.constant[1]:0,ub=2<Ya.constant.length?Ya.constant[2]:0,Qa=3<Ya.constant.length?Ya.constant[3]:0)):(lc=E(Ya.buffer)?Z.createStream(34962,Ya.buffer):Z.getBuffer(Ya.buffer),vc="type"in Ya?Gd[Ya.type]:lc.dtype,tc=!!Ya.normalized,
Mb=Ya.size|0,Va=Ya.offset|0,Ga=Ya.stride|0,ic=Ya.divisor|0);Bb=w.buffer;w.buffer=lc;rb=w.divisor;w.divisor=ic;uc=w.normalized;w.normalized=tc;vb=w.offset;w.offset=Va;ee=w.size;w.size=Mb;rc=w.state;w.state=Oc;Qc=w.stride;w.stride=Ga;Jc=w.type;w.type=vc;ed=w.w;w.w=Qa;fd=w.x;w.x=Aa;Vb=w.y;w.y=kb;bc=w.z;w.z=ub;Pb=r.call(this,N,b,f);Ha=!1;Zb=null;lb=0;wb=!1;Qb=Nb=0;ec=1;gc=0;Pc=5126;Kc=Ac=yc=xc=0;E(Pb)?(Ha=!0,Zb=Z.createStream(34962,Pb),Pc=Zb.dtype):(Zb=Z.getBuffer(Pb))?Pc=Zb.dtype:"constant"in Pb?(ec=
2,"number"===typeof Pb.constant?(yc=Pb.constant,Ac=Kc=xc=0):(yc=0<Pb.constant.length?Pb.constant[0]:0,Ac=1<Pb.constant.length?Pb.constant[1]:0,Kc=2<Pb.constant.length?Pb.constant[2]:0,xc=3<Pb.constant.length?Pb.constant[3]:0)):(Zb=E(Pb.buffer)?Z.createStream(34962,Pb.buffer):Z.getBuffer(Pb.buffer),Pc="type"in Pb?Gd[Pb.type]:Zb.dtype,wb=!!Pb.normalized,Qb=Pb.size|0,Nb=Pb.offset|0,gc=Pb.stride|0,lb=Pb.divisor|0);$c=x.buffer;x.buffer=Zb;Sc=x.divisor;x.divisor=lb;Lc=x.normalized;x.normalized=wb;Kb=x.offset;
x.offset=Nb;Db=x.size;x.size=Qb;Mc=x.state;x.state=ec;Ec=x.stride;x.stride=gc;Tc=x.type;x.type=Pc;fc=x.w;x.w=xc;Wc=x.x;x.x=yc;gd=x.y;x.y=Ac;kd=x.z;x.z=Kc;md=u.call(this,N,b,f);Xc=!1;Cd=null;Od=0;we=!1;ge=he=0;Md=1;Kd=0;id=5126;cd=ld=od=Bc=0;E(md)?(Xc=!0,Cd=Z.createStream(34962,md),id=Cd.dtype):(Cd=Z.getBuffer(md))?id=Cd.dtype:"constant"in md?(Md=2,"number"===typeof md.constant?(od=md.constant,ld=cd=Bc=0):(od=0<md.constant.length?md.constant[0]:0,ld=1<md.constant.length?md.constant[1]:0,cd=2<md.constant.length?
md.constant[2]:0,Bc=3<md.constant.length?md.constant[3]:0)):(Cd=E(md.buffer)?Z.createStream(34962,md.buffer):Z.getBuffer(md.buffer),id="type"in md?Gd[md.type]:Cd.dtype,we=!!md.normalized,ge=md.size|0,he=md.offset|0,Kd=md.stride|0,Od=md.divisor|0);pd=oa.buffer;oa.buffer=Cd;Fd=oa.divisor;oa.divisor=Od;Hd=oa.normalized;oa.normalized=we;ue=oa.offset;oa.offset=he;ve=oa.size;oa.size=ge;Ae=oa.state;oa.state=Md;ne=oa.stride;oa.stride=Kd;fe=oa.type;oa.type=id;de=oa.w;oa.w=Bc;pe=oa.x;oa.x=od;be=oa.y;oa.y=ld;
ie=oa.z;oa.z=cd;wc=ca.call(this,N,b,f);Vc=!1;qe=null;le=0;Ld=!1;Qd=Pd=0;Rd=1;je=0;Ye=5126;Se=Re=oe=Ce=0;E(wc)?(Vc=!0,qe=Z.createStream(34962,wc),Ye=qe.dtype):(qe=Z.getBuffer(wc))?Ye=qe.dtype:"constant"in wc?(Rd=2,"number"===typeof wc.constant?(oe=wc.constant,Re=Se=Ce=0):(oe=0<wc.constant.length?wc.constant[0]:0,Re=1<wc.constant.length?wc.constant[1]:0,Se=2<wc.constant.length?wc.constant[2]:0,Ce=3<wc.constant.length?wc.constant[3]:0)):(qe=E(wc.buffer)?Z.createStream(34962,wc.buffer):Z.getBuffer(wc.buffer),
Ye="type"in wc?Gd[wc.type]:qe.dtype,Ld=!!wc.normalized,Qd=wc.size|0,Pd=wc.offset|0,je=wc.stride|0,le=wc.divisor|0);Ne=J.buffer;J.buffer=qe;re=J.divisor;J.divisor=le;Fe=J.normalized;J.normalized=Ld;He=J.offset;J.offset=Pd;Ie=J.size;J.size=Qd;Je=J.state;J.state=Rd;Ge=J.stride;J.stride=je;Nd=J.type;J.type=Ye;Ud=J.w;J.w=Ce;$d=J.x;J.x=oe;ce=J.y;J.y=Re;Ke=J.z;J.z=Se;Bd=R.call(this,N,b,f);Sd=!1;De=null;Le=0;cf=!1;Te=af=0;Oe=1;$e=0;Xe=5126;Xd=Td=Ve=Ue=0;E(Bd)?(Sd=!0,De=Z.createStream(34962,Bd),Xe=De.dtype):
(De=Z.getBuffer(Bd))?Xe=De.dtype:"constant"in Bd?(Oe=2,"number"===typeof Bd.constant?(Ve=Bd.constant,Td=Xd=Ue=0):(Ve=0<Bd.constant.length?Bd.constant[0]:0,Td=1<Bd.constant.length?Bd.constant[1]:0,Xd=2<Bd.constant.length?Bd.constant[2]:0,Ue=3<Bd.constant.length?Bd.constant[3]:0)):(De=E(Bd.buffer)?Z.createStream(34962,Bd.buffer):Z.getBuffer(Bd.buffer),Xe="type"in Bd?Gd[Bd.type]:De.dtype,cf=!!Bd.normalized,Te=Bd.size|0,af=Bd.offset|0,$e=Bd.stride|0,Le=Bd.divisor|0);We=A.buffer;A.buffer=De;jf=A.divisor;
A.divisor=Le;nf=A.normalized;A.normalized=cf;ff=A.offset;A.offset=af;kf=A.size;A.size=Te;lf=A.state;A.state=Oe;mf=A.stride;A.stride=$e;rf=A.type;A.type=Xe;of=A.w;A.w=Ue;sf=A.x;A.x=Ve;Cf=A.y;A.y=Td;Df=A.z;A.z=Xd;Pe=aa.call(this,N,b,f);Ee=!1;pf=null;qf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;E(Pe)?(Ee=!0,pf=Z.createStream(34962,Pe),xf=pf.dtype):(pf=Z.getBuffer(Pe))?xf=pf.dtype:"constant"in Pe?(Ff=2,"number"===typeof Pe.constant?(wf=Pe.constant,zf=Af=yf=0):(wf=0<Pe.constant.length?Pe.constant[0]:
0,zf=1<Pe.constant.length?Pe.constant[1]:0,Af=2<Pe.constant.length?Pe.constant[2]:0,yf=3<Pe.constant.length?Pe.constant[3]:0)):(pf=E(Pe.buffer)?Z.createStream(34962,Pe.buffer):Z.getBuffer(Pe.buffer),xf="type"in Pe?Gd[Pe.type]:pf.dtype,Ef=!!Pe.normalized,Bf=Pe.size|0,Hf=Pe.offset|0,Gf=Pe.stride|0,qf=Pe.divisor|0);Jf=I.buffer;I.buffer=pf;Kf=I.divisor;I.divisor=qf;Lf=I.normalized;I.normalized=Ef;Mf=I.offset;I.offset=Hf;tf=I.size;I.size=Bf;Rf=I.state;I.state=Ff;If=I.stride;I.stride=Gf;uf=I.type;I.type=
xf;dg=I.w;I.w=yf;Sf=I.x;I.x=wf;Tf=I.y;I.y=zf;qg=I.z;I.z=Af;gf=U.call(this,N,b,f);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;E(gf)?(df=!0,Nf=Z.createStream(34962,gf),Wf=Nf.dtype):(Nf=Z.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=E(gf.buffer)?Z.createStream(34962,
gf.buffer):Z.getBuffer(gf.buffer),Wf="type"in gf?Gd[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|0,ig=gf.stride|0,Of=gf.divisor|0);jg=K.buffer;K.buffer=Nf;rg=K.divisor;K.divisor=Of;sg=K.normalized;K.normalized=eg;tg=K.offset;K.offset=fg;ug=K.size;K.size=gg;vg=K.state;K.state=hg;wg=K.stride;K.stride=ig;xg=K.type;K.type=Wf;yg=K.w;K.w=Uf;zg=K.x;K.x=Xf;Ag=K.y;K.y=Yf;Bg=K.z;K.z=Zf;hf=ja.call(this,N,b,f);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;E(hf)?(ef=!0,Pf=
Z.createStream(34962,hf),$f=Pf.dtype):(Pf=Z.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=E(hf.buffer)?Z.createStream(34962,hf.buffer):Z.getBuffer(hf.buffer),$f="type"in hf?Gd[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|
0);pg=W.buffer;W.buffer=Pf;Cg=W.divisor;W.divisor=Qf;Dg=W.normalized;W.normalized=kg;Eg=W.offset;W.offset=lg;Fg=W.size;W.size=mg;Gg=W.state;W.state=ng;Hg=W.stride;W.stride=og;Ig=W.type;W.type=$f;Jg=W.w;W.w=Vf;Kg=W.x;W.x=ag;Lg=W.y;W.y=bg;Mg=W.z;W.z=cg;Ng=sa.vert;sa.vert=59;Og=sa.frag;sa.frag=58;ha.dirty=!0;a(N,b,f);N.viewportWidth=e;N.viewportHeight=m;yd[0]=k;yd[1]=y;yd[2]=D;yd[3]=H;ra[0]=z;ra[1]=C;ra[2]=B;ra[3]=F;ia.blend_enable=M;xa[0]=L;xa[1]=O;xa[2]=P;xa[3]=Q;ia.depth_enable=S;xd[0]=da;xd[1]=ea;
xd[2]=ga;xd[3]=ma;ia.scissor_enable=ka;ia.stencil_enable=pa;la&&(c.cpuTime+=performance.now()-na);Ja&&sb.destroyStream(qa);Fa.elements=Ea;Fa.offset=Ba;Fa.count=Sa;Fa.primitive=xb;X[45]=Eb;X[48]=Fb;X[10]=Oa;X[46]=tb;X[47]=gb;X[34]=mb;X[6]=td;X[7]=Gb;X[8]=yb;X[9]=jb;ob&&Z.destroyStream(wa);v.buffer=Tb;v.divisor=ua;v.normalized=sc;v.offset=La;v.size=Ob;v.state=eb;v.stride=hb;v.type=va;v.w=dc;v.x=Da;v.y=pb;v.z=qb;Za&&Z.destroyStream(lc);w.buffer=Bb;w.divisor=rb;w.normalized=uc;w.offset=vb;w.size=ee;w.state=
rc;w.stride=Qc;w.type=Jc;w.w=ed;w.x=fd;w.y=Vb;w.z=bc;Ha&&Z.destroyStream(Zb);x.buffer=$c;x.divisor=Sc;x.normalized=Lc;x.offset=Kb;x.size=Db;x.state=Mc;x.stride=Ec;x.type=Tc;x.w=fc;x.x=Wc;x.y=gd;x.z=kd;Xc&&Z.destroyStream(Cd);oa.buffer=pd;oa.divisor=Fd;oa.normalized=Hd;oa.offset=ue;oa.size=ve;oa.state=Ae;oa.stride=ne;oa.type=fe;oa.w=de;oa.x=pe;oa.y=be;oa.z=ie;Vc&&Z.destroyStream(qe);J.buffer=Ne;J.divisor=re;J.normalized=Fe;J.offset=He;J.size=Ie;J.state=Je;J.stride=Ge;J.type=Nd;J.w=Ud;J.x=$d;J.y=ce;
J.z=Ke;Sd&&Z.destroyStream(De);A.buffer=We;A.divisor=jf;A.normalized=nf;A.offset=ff;A.size=kf;A.state=lf;A.stride=mf;A.type=rf;A.w=of;A.x=sf;A.y=Cf;A.z=Df;Ee&&Z.destroyStream(pf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=tf;I.state=Rf;I.stride=If;I.type=uf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;df&&Z.destroyStream(Nf);K.buffer=jg;K.divisor=rg;K.normalized=sg;K.offset=tg;K.size=ug;K.state=vg;K.stride=wg;K.type=xg;K.w=yg;K.x=zg;K.y=Ag;K.z=Bg;ef&&Z.destroyStream(Pf);W.buffer=pg;W.divisor=Cg;W.normalized=
Dg;W.offset=Eg;W.size=Fg;W.state=Gg;W.stride=Hg;W.type=Ig;W.w=Jg;W.x=Kg;W.y=Lg;W.z=Mg;sa.vert=Ng;sa.frag=Og;ha.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,c,d,e,m,k,l,g,b,p,H,y,h,f,n,q,t,v,G,w,r,x,u,oa,ca,J,R,A,aa,I,U,K,ja,W,ka,la,Sa,Cb,ea,Na){var V,P,O,T,na,Q,Gb,$a,S,B,ma,da,Ba,Ea,yb,Ka,Y,mb,ga,qa,$b,sc,ic,td,zc,Z,N,ha,Fa,sb,Pc,Qc,L,E,ia,sa,X,fa,ra,M,F;V=a.attributes;P=a.buffer;
O=a.context;T=a.current;na=a.draw;Q=a.elements;Gb=a.extensions;$a=a.framebuffer;S=a.gl;B=a.isBufferArgs;ma=a.next;da=a.shader;Ba=a.uniforms;Ea=a.vao;yb=ma.blend_color;Ka=T.blend_color;Y=ma.blend_equation;mb=T.blend_equation;ga=ma.blend_func;qa=T.blend_func;$b=ma.colorMask;sc=T.colorMask;ic=ma.depth_range;td=T.depth_range;zc=ma.polygonOffset_offset;Z=T.polygonOffset_offset;N=ma.sample_coverage;ha=T.sample_coverage;Fa=ma.scissor_box;sb=T.scissor_box;Pc=ma.stencil_func;Qc=T.stencil_func;L=ma.stencil_opBack;
E=T.stencil_opBack;ia=ma.stencil_opFront;sa=T.stencil_opFront;X=ma.viewport;fa=T.viewport;ra={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};M={offset:4,stride:8};F={offset:0,stride:8};return{batch:function(b,a){var f,h,n,l,g,q,p,t,d,e,m,k,y;f=$a.next;f!==$a.cur&&(f?S.bindFramebuffer(36160,f.framebuffer):S.bindFramebuffer(36160,null),$a.cur=f);if(T.dirty){var H,D,z,X,da,ga,Ba,yb,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb,hd,Hb,pc,Wa,
Rc,ac,mc,Id,rd,Fc,cc;H=ma.dither;H!==T.dither&&(H?S.enable(3024):S.disable(3024),T.dither=H);D=Y[0];z=Y[1];if(D!==mb[0]||z!==mb[1])S.blendEquationSeparate(D,z),mb[0]=D,mb[1]=z;X=ma.depth_func;X!==T.depth_func&&(S.depthFunc(X),T.depth_func=X);da=ic[0];ga=ic[1];if(da!==td[0]||ga!==td[1])S.depthRange(da,ga),td[0]=da,td[1]=ga;Ba=ma.depth_mask;Ba!==T.depth_mask&&(S.depthMask(Ba),T.depth_mask=Ba);yb=$b[0];xe=$b[1];Me=$b[2];Qe=$b[3];if(yb!==sc[0]||xe!==sc[1]||Me!==sc[2]||Qe!==sc[3])S.colorMask(yb,xe,Me,
Qe),sc[0]=yb,sc[1]=xe,sc[2]=Me,sc[3]=Qe;Ad=ma.cull_enable;Ad!==T.cull_enable&&(Ad?S.enable(2884):S.disable(2884),T.cull_enable=Ad);Be=ma.cull_face;Be!==T.cull_face&&(S.cullFace(Be),T.cull_face=Be);Vd=ma.frontFace;Vd!==T.frontFace&&(S.frontFace(Vd),T.frontFace=Vd);Wd=ma.lineWidth;Wd!==T.lineWidth&&(S.lineWidth(Wd),T.lineWidth=Wd);ae=ma.polygonOffset_enable;ae!==T.polygonOffset_enable&&(ae?S.enable(32823):S.disable(32823),T.polygonOffset_enable=ae);Yd=zc[0];qd=zc[1];if(Yd!==Z[0]||qd!==Z[1])S.polygonOffset(Yd,
qd),Z[0]=Yd,Z[1]=qd;nd=ma.sample_alpha;nd!==T.sample_alpha&&(nd?S.enable(32926):S.disable(32926),T.sample_alpha=nd);vd=ma.sample_enable;vd!==T.sample_enable&&(vd?S.enable(32928):S.disable(32928),T.sample_enable=vd);ad=N[0];sd=N[1];if(ad!==ha[0]||sd!==ha[1])S.sampleCoverage(ad,sd),ha[0]=ad,ha[1]=sd;Uc=ma.stencil_mask;Uc!==T.stencil_mask&&(S.stencilMask(Uc),T.stencil_mask=Uc);Dd=Pc[0];Nc=Pc[1];Ic=Pc[2];if(Dd!==Qc[0]||Nc!==Qc[1]||Ic!==Qc[2])S.stencilFunc(Dd,Nc,Ic),Qc[0]=Dd,Qc[1]=Nc,Qc[2]=Ic;qc=ia[0];
fb=ia[1];hd=ia[2];Hb=ia[3];if(qc!==sa[0]||fb!==sa[1]||hd!==sa[2]||Hb!==sa[3])S.stencilOpSeparate(qc,fb,hd,Hb),sa[0]=qc,sa[1]=fb,sa[2]=hd,sa[3]=Hb;pc=L[0];Wa=L[1];Rc=L[2];ac=L[3];if(pc!==E[0]||Wa!==E[1]||Rc!==E[2]||ac!==E[3])S.stencilOpSeparate(pc,Wa,Rc,ac),E[0]=pc,E[1]=Wa,E[2]=Rc,E[3]=ac;mc=ma.scissor_enable;mc!==T.scissor_enable&&(mc?S.enable(3089):S.disable(3089),T.scissor_enable=mc);Id=Fa[0];rd=Fa[1];Fc=Fa[2];cc=Fa[3];if(Id!==sb[0]||rd!==sb[1]||Fc!==sb[2]||cc!==sb[3])S.scissor(Id,rd,Fc,cc),sb[0]=
Id,sb[1]=rd,sb[2]=Fc,sb[3]=cc}h=this.viewport;n=h.x|0;l=h.y|0;g="width"in h?h.width|0:O.framebufferWidth-n;q="height"in h?h.height|0:O.framebufferHeight-l;p=O.viewportWidth;O.viewportWidth=g;t=O.viewportHeight;O.viewportHeight=q;S.viewport(n,l,g,q);fa[0]=n;fa[1]=l;fa[2]=g;fa[3]=q;S.blendColor(0,0,0,1);Ka[0]=0;Ka[1]=0;Ka[2]=0;Ka[3]=1;S.enable(3042);T.blend_enable=!0;S.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;S.disable(2929);T.depth_enable=!1;S.disable(2960);T.stencil_enable=
!1;if(d=T.profile)e=performance.now(),c.count+=a;S.useProgram(v.program);m=Gb.angle_instanced_arrays;var Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb;Ea.setVAO(null);F.buffer=this.sizeBuffer;Cc=!1;Yc=null;Yb=0;Gc=!1;Ca=Xa=0;ud=1;Ib=0;Ta=5126;Wb=Dc=bb=Ub=0;B(F)?(Cc=!0,Yc=P.createStream(34962,F),Ta=Yc.dtype):(Yc=P.getBuffer(F))?Ta=Yc.dtype:
"constant"in F?(ud=2,"number"===typeof F.constant?(bb=F.constant,Dc=Wb=Ub=0):(bb=0<F.constant.length?F.constant[0]:0,Dc=1<F.constant.length?F.constant[1]:0,Wb=2<F.constant.length?F.constant[2]:0,Ub=3<F.constant.length?F.constant[3]:0)):(Yc=B(F.buffer)?P.createStream(34962,F.buffer):P.getBuffer(F.buffer),Ta="type"in F?ra[F.type]:Yc.dtype,Gc=!!F.normalized,Ca=F.size|0,Xa=F.offset|0,Ib=F.stride|0,Yb=F.divisor|0);ye=Na.location;jc=V[ye];if(1===ud){jc.buffer||S.enableVertexAttribArray(ye);Rb=Ca||1;if(jc.type!==
Ta||jc.size!==Rb||jc.buffer!==Yc||jc.normalized!==Gc||jc.offset!==Xa||jc.stride!==Ib)S.bindBuffer(34962,Yc.buffer),S.vertexAttribPointer(ye,Rb,Ta,Gc,Ib,Xa),jc.type=Ta,jc.size=Rb,jc.buffer=Yc,jc.normalized=Gc,jc.offset=Xa,jc.stride=Ib;jc.divisor!==Yb&&(m.vertexAttribDivisorANGLE(ye,Yb),jc.divisor=Yb)}else if(jc.buffer&&(S.disableVertexAttribArray(ye),jc.buffer=null),jc.x!==bb||jc.y!==Dc||jc.z!==Wb||jc.w!==Ub)S.vertexAttrib4f(ye,bb,Dc,Wb,Ub),jc.x=bb,jc.y=Dc,jc.z=Wb,jc.w=Ub;M.buffer=this.sizeBuffer;
jd=!1;Sb=null;Oa=0;nb=!1;gb=tb=0;Pa=1;nc=0;Xb=5126;Zc=kc=cb=bd=0;B(M)?(jd=!0,Sb=P.createStream(34962,M),Xb=Sb.dtype):(Sb=P.getBuffer(M))?Xb=Sb.dtype:"constant"in M?(Pa=2,"number"===typeof M.constant?(cb=M.constant,kc=Zc=bd=0):(cb=0<M.constant.length?M.constant[0]:0,kc=1<M.constant.length?M.constant[1]:0,Zc=2<M.constant.length?M.constant[2]:0,bd=3<M.constant.length?M.constant[3]:0)):(Sb=B(M.buffer)?P.createStream(34962,M.buffer):P.getBuffer(M.buffer),Xb="type"in M?ra[M.type]:Sb.dtype,nb=!!M.normalized,
gb=M.size|0,tb=M.offset|0,nc=M.stride|0,Oa=M.divisor|0);hc=I.location;ib=V[hc];if(1===Pa){ib.buffer||S.enableVertexAttribArray(hc);jb=gb||1;if(ib.type!==Xb||ib.size!==jb||ib.buffer!==Sb||ib.normalized!==nb||ib.offset!==tb||ib.stride!==nc)S.bindBuffer(34962,Sb.buffer),S.vertexAttribPointer(hc,jb,Xb,nb,nc,tb),ib.type=Xb,ib.size=jb,ib.buffer=Sb,ib.normalized=nb,ib.offset=tb,ib.stride=nc;ib.divisor!==Oa&&(m.vertexAttribDivisorANGLE(hc,Oa),ib.divisor=Oa)}else if(ib.buffer&&(S.disableVertexAttribArray(hc),
ib.buffer=null),ib.x!==cb||ib.y!==kc||ib.z!==Zc||ib.w!==bd)S.vertexAttrib4f(hc,cb,kc,Zc,bd),ib.x=cb,ib.y=kc,ib.z=Zc,ib.w=bd;ta=this.charBuffer;ob=!1;wa=null;Ua=0;ab=!1;db=za=0;Ma=1;Ab=0;zb=5126;Lb=Jb=Hc=Ra=0;B(ta)?(ob=!0,wa=P.createStream(34962,ta),zb=wa.dtype):(wa=P.getBuffer(ta))?zb=wa.dtype:"constant"in ta?(Ma=2,"number"===typeof ta.constant?(Hc=ta.constant,Jb=Lb=Ra=0):(Hc=0<ta.constant.length?ta.constant[0]:0,Jb=1<ta.constant.length?ta.constant[1]:0,Lb=2<ta.constant.length?ta.constant[2]:0,Ra=
3<ta.constant.length?ta.constant[3]:0)):(wa=B(ta.buffer)?P.createStream(34962,ta.buffer):P.getBuffer(ta.buffer),zb="type"in ta?ra[ta.type]:wa.dtype,ab=!!ta.normalized,db=ta.size|0,za=ta.offset|0,Ab=ta.stride|0,Ua=ta.divisor|0);Tb=aa.location;ua=V[Tb];if(1===Ma){ua.buffer||S.enableVertexAttribArray(Tb);Jd=db||1;if(ua.type!==zb||ua.size!==Jd||ua.buffer!==wa||ua.normalized!==ab||ua.offset!==za||ua.stride!==Ab)S.bindBuffer(34962,wa.buffer),S.vertexAttribPointer(Tb,Jd,zb,ab,Ab,za),ua.type=zb,ua.size=Jd,
ua.buffer=wa,ua.normalized=ab,ua.offset=za,ua.stride=Ab;ua.divisor!==Ua&&(m.vertexAttribDivisorANGLE(Tb,Ua),ua.divisor=Ua)}else if(ua.buffer&&(S.disableVertexAttribArray(Tb),ua.buffer=null),ua.x!==Hc||ua.y!==Jb||ua.z!==Lb||ua.w!==Ra)S.vertexAttrib4f(Tb,Hc,Jb,Lb,Ra),ua.x=Hc,ua.y=Jb,ua.z=Lb,ua.w=Ra;La=this.position;Ob=!1;eb=null;hb=0;va=!1;Da=dc=0;pb=1;qb=0;Ya=5126;tc=dd=lc=Za=0;B(La)?(Ob=!0,eb=P.createStream(34962,La),Ya=eb.dtype):(eb=P.getBuffer(La))?Ya=eb.dtype:"constant"in La?(pb=2,"number"===typeof La.constant?
(lc=La.constant,dd=tc=Za=0):(lc=0<La.constant.length?La.constant[0]:0,dd=1<La.constant.length?La.constant[1]:0,tc=2<La.constant.length?La.constant[2]:0,Za=3<La.constant.length?La.constant[3]:0)):(eb=B(La.buffer)?P.createStream(34962,La.buffer):P.getBuffer(La.buffer),Ya="type"in La?ra[La.type]:eb.dtype,va=!!La.normalized,Da=La.size|0,dc=La.offset|0,qb=La.stride|0,hb=La.divisor|0);Va=ka.location;Mb=V[Va];if(1===pb){Mb.buffer||S.enableVertexAttribArray(Va);Oc=Da||2;if(Mb.type!==Ya||Mb.size!==Oc||Mb.buffer!==
eb||Mb.normalized!==va||Mb.offset!==dc||Mb.stride!==qb)S.bindBuffer(34962,eb.buffer),S.vertexAttribPointer(Va,Oc,Ya,va,qb,dc),Mb.type=Ya,Mb.size=Oc,Mb.buffer=eb,Mb.normalized=va,Mb.offset=dc,Mb.stride=qb;Mb.divisor!==hb&&(m.vertexAttribDivisorANGLE(Va,hb),Mb.divisor=hb)}else if(Mb.buffer&&(S.disableVertexAttribArray(Va),Mb.buffer=null),Mb.x!==lc||Mb.y!==dd||Mb.z!==tc||Mb.w!==Za)S.vertexAttrib4f(Va,lc,dd,tc,Za),Mb.x=lc,Mb.y=dd,Mb.z=tc,Mb.w=Za;Ga=this.viewportArray;S.uniform4f(ea.location,Ga[0],Ga[1],
Ga[2],Ga[3]);vc=this.scale;S.uniform2f(Sa.location,vc[0],vc[1]);Qa=this.translate;S.uniform2f(Cb.location,Qa[0],Qa[1]);(Aa=na.elements)?S.bindBuffer(34963,Aa.buffer.buffer):Ea.currentVAO&&(Aa=Q.getElements(Ea.currentVAO.elements))&&S.bindBuffer(34963,Aa.buffer.buffer);kb=na.instances;for(k=0;k<a;++k){y=b[k];var ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc,gd;ub=G.call(this,O,y,k);k&&Bb===ub||(Bb=ub,S.uniform1f(U.location,ub));rb=w.call(this,
O,y,k);k&&uc===rb||(uc=rb,S.uniform1f(ja.location,rb));vb=y.align;k&&wd===vb||(wd=vb,S.uniform1f(oa.location,vb));rc=y.baseline;k&&Ed===rc||(Ed=rc,S.uniform1f(A.location,rc));Jc=y.color;ed=Jc[0];Vb=Jc[1];Pb=Jc[2];Zb=Jc[3];k&&fd===ed&&bc===Vb&&Ha===Pb&&lb===Zb||(fd=ed,bc=Vb,Ha=Pb,lb=Zb,S.uniform4f(K.location,ed,Vb,Pb,Zb));wb=r.call(this,O,y,k);Nb=wb[0];ec=wb[1];k&&Qb===Nb&&gc===ec||(Qb=Nb,gc=ec,S.uniform2f(R.location,Nb,ec));Ze=x.call(this,O,y,k);xc=Ze[0];Ac=Ze[1];k&&yc===xc&&Kc===Ac||(yc=xc,Kc=Ac,
S.uniform2f(J.location,xc,Ac));$c=y.positionOffset;Sc=$c[0];Kb=$c[1];k&&Lc===Sc&&Db===Kb||(Lc=Sc,Db=Kb,S.uniform2f(la.location,Sc,Kb));Mc=y.opacity;k&&Ec===Mc||(Ec=Mc,S.uniform1f(W.location,Mc));(Tc=u.call(this,O,y,k))&&"framebuffer"===Tc._reglType&&(Tc=Tc.color[0]);fc=Tc._texture;S.uniform1i(ca.location,fc.bind());Wc=y.offset;if(gd=y.count)0<kb?Aa?m.drawElementsInstancedANGLE(0,gd,Aa.type,Wc<<(Aa.type-5121>>1),kb):m.drawArraysInstancedANGLE(0,Wc,gd,kb):0>kb&&(Aa?S.drawElements(0,gd,Aa.type,Wc<<(Aa.type-
5121>>1)):S.drawArrays(0,Wc,gd)),fc.unbind()}Cc&&P.destroyStream(Yc);jd&&P.destroyStream(Sb);ob&&P.destroyStream(wa);Ob&&P.destroyStream(eb);T.dirty=!0;Ea.setVAO(null);O.viewportWidth=p;O.viewportHeight=t;d&&(c.cpuTime+=performance.now()-e)},draw:function(b){var a,f,h,n,q,p,t,v,y,w,u,H,G,x,r,Ia,X,da,ga,Ba,yb,zd,xe,Me,Qe,Ad,Be,Vd,Wd,ae,Yd,qd,nd,vd,ad,sd,Uc,Dd,Nc,Ic,qc,fb,hd,Hb,pc,Wa,Rc,ac,mc,Id,rd,Fc,cc,Cc,Yc,Yb,Gc,Xa,Ca,ud,Ib,Ta,Ub,bb,Dc,Wb,ye,jc,Rb,jd,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,
ta,ob,wa,Ua,ab,za,db;a=$a.next;a!==$a.cur&&(a?S.bindFramebuffer(36160,a.framebuffer):S.bindFramebuffer(36160,null),$a.cur=a);if(T.dirty){var Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc;Ma=ma.dither;Ma!==T.dither&&(Ma?S.enable(3024):S.disable(3024),T.dither=Ma);Ab=Y[0];zb=Y[1];if(Ab!==mb[0]||zb!==mb[1])S.blendEquationSeparate(Ab,zb),mb[0]=Ab,mb[1]=zb;Ra=ma.depth_func;Ra!==T.depth_func&&(S.depthFunc(Ra),T.depth_func=Ra);Hc=ic[0];
Jb=ic[1];if(Hc!==td[0]||Jb!==td[1])S.depthRange(Hc,Jb),td[0]=Hc,td[1]=Jb;Lb=ma.depth_mask;Lb!==T.depth_mask&&(S.depthMask(Lb),T.depth_mask=Lb);Tb=$b[0];ua=$b[1];Jd=$b[2];La=$b[3];if(Tb!==sc[0]||ua!==sc[1]||Jd!==sc[2]||La!==sc[3])S.colorMask(Tb,ua,Jd,La),sc[0]=Tb,sc[1]=ua,sc[2]=Jd,sc[3]=La;Ob=ma.cull_enable;Ob!==T.cull_enable&&(Ob?S.enable(2884):S.disable(2884),T.cull_enable=Ob);eb=ma.cull_face;eb!==T.cull_face&&(S.cullFace(eb),T.cull_face=eb);hb=ma.frontFace;hb!==T.frontFace&&(S.frontFace(hb),T.frontFace=
hb);va=ma.lineWidth;va!==T.lineWidth&&(S.lineWidth(va),T.lineWidth=va);dc=ma.polygonOffset_enable;dc!==T.polygonOffset_enable&&(dc?S.enable(32823):S.disable(32823),T.polygonOffset_enable=dc);Da=zc[0];pb=zc[1];if(Da!==Z[0]||pb!==Z[1])S.polygonOffset(Da,pb),Z[0]=Da,Z[1]=pb;qb=ma.sample_alpha;qb!==T.sample_alpha&&(qb?S.enable(32926):S.disable(32926),T.sample_alpha=qb);Ya=ma.sample_enable;Ya!==T.sample_enable&&(Ya?S.enable(32928):S.disable(32928),T.sample_enable=Ya);Za=N[0];lc=N[1];if(Za!==ha[0]||lc!==
ha[1])S.sampleCoverage(Za,lc),ha[0]=Za,ha[1]=lc;dd=ma.stencil_mask;dd!==T.stencil_mask&&(S.stencilMask(dd),T.stencil_mask=dd);tc=Pc[0];Va=Pc[1];Mb=Pc[2];if(tc!==Qc[0]||Va!==Qc[1]||Mb!==Qc[2])S.stencilFunc(tc,Va,Mb),Qc[0]=tc,Qc[1]=Va,Qc[2]=Mb;Oc=ia[0];Ga=ia[1];vc=ia[2];Qa=ia[3];if(Oc!==sa[0]||Ga!==sa[1]||vc!==sa[2]||Qa!==sa[3])S.stencilOpSeparate(Oc,Ga,vc,Qa),sa[0]=Oc,sa[1]=Ga,sa[2]=vc,sa[3]=Qa;Aa=L[0];kb=L[1];ub=L[2];Bb=L[3];if(Aa!==E[0]||kb!==E[1]||ub!==E[2]||Bb!==E[3])S.stencilOpSeparate(Aa,kb,
ub,Bb),E[0]=Aa,E[1]=kb,E[2]=ub,E[3]=Bb;rb=ma.scissor_enable;rb!==T.scissor_enable&&(rb?S.enable(3089):S.disable(3089),T.scissor_enable=rb);uc=Fa[0];vb=Fa[1];wd=Fa[2];rc=Fa[3];if(uc!==sb[0]||vb!==sb[1]||wd!==sb[2]||rc!==sb[3])S.scissor(uc,vb,wd,rc),sb[0]=uc,sb[1]=vb,sb[2]=wd,sb[3]=rc}f=this.viewport;h=f.x|0;n=f.y|0;q="width"in f?f.width|0:O.framebufferWidth-h;p="height"in f?f.height|0:O.framebufferHeight-n;t=O.viewportWidth;O.viewportWidth=q;v=O.viewportHeight;O.viewportHeight=p;S.viewport(h,n,q,p);
fa[0]=h;fa[1]=n;fa[2]=q;fa[3]=p;S.blendColor(0,0,0,1);Ka[0]=0;Ka[1]=0;Ka[2]=0;Ka[3]=1;S.enable(3042);T.blend_enable=!0;S.blendFuncSeparate(770,771,773,1);qa[0]=770;qa[1]=771;qa[2]=773;qa[3]=1;S.disable(2929);T.depth_enable=!1;S.disable(2960);T.stencil_enable=!1;if(y=T.profile)w=performance.now(),c.count++;S.useProgram(d.program);u=Gb.angle_instanced_arrays;Ea.setVAO(null);F.buffer=this.sizeBuffer;H=!1;G=null;x=0;r=!1;X=Ia=0;da=1;ga=0;Ba=5126;Me=xe=zd=yb=0;B(F)?(H=!0,G=P.createStream(34962,F),Ba=G.dtype):
(G=P.getBuffer(F))?Ba=G.dtype:"constant"in F?(da=2,"number"===typeof F.constant?(zd=F.constant,xe=Me=yb=0):(zd=0<F.constant.length?F.constant[0]:0,xe=1<F.constant.length?F.constant[1]:0,Me=2<F.constant.length?F.constant[2]:0,yb=3<F.constant.length?F.constant[3]:0)):(G=B(F.buffer)?P.createStream(34962,F.buffer):P.getBuffer(F.buffer),Ba="type"in F?ra[F.type]:G.dtype,r=!!F.normalized,X=F.size|0,Ia=F.offset|0,ga=F.stride|0,x=F.divisor|0);Qe=Na.location;Ad=V[Qe];if(1===da){Ad.buffer||S.enableVertexAttribArray(Qe);
Be=X||1;if(Ad.type!==Ba||Ad.size!==Be||Ad.buffer!==G||Ad.normalized!==r||Ad.offset!==Ia||Ad.stride!==ga)S.bindBuffer(34962,G.buffer),S.vertexAttribPointer(Qe,Be,Ba,r,ga,Ia),Ad.type=Ba,Ad.size=Be,Ad.buffer=G,Ad.normalized=r,Ad.offset=Ia,Ad.stride=ga;Ad.divisor!==x&&(u.vertexAttribDivisorANGLE(Qe,x),Ad.divisor=x)}else if(Ad.buffer&&(S.disableVertexAttribArray(Qe),Ad.buffer=null),Ad.x!==zd||Ad.y!==xe||Ad.z!==Me||Ad.w!==yb)S.vertexAttrib4f(Qe,zd,xe,Me,yb),Ad.x=zd,Ad.y=xe,Ad.z=Me,Ad.w=yb;M.buffer=this.sizeBuffer;
Vd=!1;Wd=null;ae=0;Yd=!1;nd=qd=0;vd=1;ad=0;sd=5126;Ic=Nc=Dd=Uc=0;B(M)?(Vd=!0,Wd=P.createStream(34962,M),sd=Wd.dtype):(Wd=P.getBuffer(M))?sd=Wd.dtype:"constant"in M?(vd=2,"number"===typeof M.constant?(Dd=M.constant,Nc=Ic=Uc=0):(Dd=0<M.constant.length?M.constant[0]:0,Nc=1<M.constant.length?M.constant[1]:0,Ic=2<M.constant.length?M.constant[2]:0,Uc=3<M.constant.length?M.constant[3]:0)):(Wd=B(M.buffer)?P.createStream(34962,M.buffer):P.getBuffer(M.buffer),sd="type"in M?ra[M.type]:Wd.dtype,Yd=!!M.normalized,
nd=M.size|0,qd=M.offset|0,ad=M.stride|0,ae=M.divisor|0);qc=I.location;fb=V[qc];if(1===vd){fb.buffer||S.enableVertexAttribArray(qc);hd=nd||1;if(fb.type!==sd||fb.size!==hd||fb.buffer!==Wd||fb.normalized!==Yd||fb.offset!==qd||fb.stride!==ad)S.bindBuffer(34962,Wd.buffer),S.vertexAttribPointer(qc,hd,sd,Yd,ad,qd),fb.type=sd,fb.size=hd,fb.buffer=Wd,fb.normalized=Yd,fb.offset=qd,fb.stride=ad;fb.divisor!==ae&&(u.vertexAttribDivisorANGLE(qc,ae),fb.divisor=ae)}else if(fb.buffer&&(S.disableVertexAttribArray(qc),
fb.buffer=null),fb.x!==Dd||fb.y!==Nc||fb.z!==Ic||fb.w!==Uc)S.vertexAttrib4f(qc,Dd,Nc,Ic,Uc),fb.x=Dd,fb.y=Nc,fb.z=Ic,fb.w=Uc;Hb=this.charBuffer;pc=!1;Wa=null;Rc=0;ac=!1;Id=mc=0;rd=1;Fc=0;cc=5126;Gc=Yb=Yc=Cc=0;B(Hb)?(pc=!0,Wa=P.createStream(34962,Hb),cc=Wa.dtype):(Wa=P.getBuffer(Hb))?cc=Wa.dtype:"constant"in Hb?(rd=2,"number"===typeof Hb.constant?(Yc=Hb.constant,Yb=Gc=Cc=0):(Yc=0<Hb.constant.length?Hb.constant[0]:0,Yb=1<Hb.constant.length?Hb.constant[1]:0,Gc=2<Hb.constant.length?Hb.constant[2]:0,Cc=
3<Hb.constant.length?Hb.constant[3]:0)):(Wa=B(Hb.buffer)?P.createStream(34962,Hb.buffer):P.getBuffer(Hb.buffer),cc="type"in Hb?ra[Hb.type]:Wa.dtype,ac=!!Hb.normalized,Id=Hb.size|0,mc=Hb.offset|0,Fc=Hb.stride|0,Rc=Hb.divisor|0);Xa=aa.location;Ca=V[Xa];if(1===rd){Ca.buffer||S.enableVertexAttribArray(Xa);ud=Id||1;if(Ca.type!==cc||Ca.size!==ud||Ca.buffer!==Wa||Ca.normalized!==ac||Ca.offset!==mc||Ca.stride!==Fc)S.bindBuffer(34962,Wa.buffer),S.vertexAttribPointer(Xa,ud,cc,ac,Fc,mc),Ca.type=cc,Ca.size=ud,
Ca.buffer=Wa,Ca.normalized=ac,Ca.offset=mc,Ca.stride=Fc;Ca.divisor!==Rc&&(u.vertexAttribDivisorANGLE(Xa,Rc),Ca.divisor=Rc)}else if(Ca.buffer&&(S.disableVertexAttribArray(Xa),Ca.buffer=null),Ca.x!==Yc||Ca.y!==Yb||Ca.z!==Gc||Ca.w!==Cc)S.vertexAttrib4f(Xa,Yc,Yb,Gc,Cc),Ca.x=Yc,Ca.y=Yb,Ca.z=Gc,Ca.w=Cc;Ib=this.position;Ta=!1;Ub=null;bb=0;Dc=!1;ye=Wb=0;jc=1;Rb=0;jd=5126;tb=nb=Oa=Sb=0;B(Ib)?(Ta=!0,Ub=P.createStream(34962,Ib),jd=Ub.dtype):(Ub=P.getBuffer(Ib))?jd=Ub.dtype:"constant"in Ib?(jc=2,"number"===typeof Ib.constant?
(Oa=Ib.constant,nb=tb=Sb=0):(Oa=0<Ib.constant.length?Ib.constant[0]:0,nb=1<Ib.constant.length?Ib.constant[1]:0,tb=2<Ib.constant.length?Ib.constant[2]:0,Sb=3<Ib.constant.length?Ib.constant[3]:0)):(Ub=B(Ib.buffer)?P.createStream(34962,Ib.buffer):P.getBuffer(Ib.buffer),jd="type"in Ib?ra[Ib.type]:Ub.dtype,Dc=!!Ib.normalized,ye=Ib.size|0,Wb=Ib.offset|0,Rb=Ib.stride|0,bb=Ib.divisor|0);gb=ka.location;Pa=V[gb];if(1===jc){Pa.buffer||S.enableVertexAttribArray(gb);nc=ye||2;if(Pa.type!==jd||Pa.size!==nc||Pa.buffer!==
Ub||Pa.normalized!==Dc||Pa.offset!==Wb||Pa.stride!==Rb)S.bindBuffer(34962,Ub.buffer),S.vertexAttribPointer(gb,nc,jd,Dc,Rb,Wb),Pa.type=jd,Pa.size=nc,Pa.buffer=Ub,Pa.normalized=Dc,Pa.offset=Wb,Pa.stride=Rb;Pa.divisor!==bb&&(u.vertexAttribDivisorANGLE(gb,bb),Pa.divisor=bb)}else if(Pa.buffer&&(S.disableVertexAttribArray(gb),Pa.buffer=null),Pa.x!==Oa||Pa.y!==nb||Pa.z!==tb||Pa.w!==Sb)S.vertexAttrib4f(gb,Oa,nb,tb,Sb),Pa.x=Oa,Pa.y=nb,Pa.z=tb,Pa.w=Sb;Xb=e.call(this,O,b,0);S.uniform1f(U.location,Xb);bd=m.call(this,
O,b,0);S.uniform1f(ja.location,bd);S.uniform1f(oa.location,b.align);S.uniform1f(A.location,b.baseline);cb=this.viewportArray;S.uniform4f(ea.location,cb[0],cb[1],cb[2],cb[3]);kc=b.color;S.uniform4f(K.location,kc[0],kc[1],kc[2],kc[3]);Zc=k.call(this,O,b,0);S.uniform2f(R.location,Zc[0],Zc[1]);hc=l.call(this,O,b,0);S.uniform2f(J.location,hc[0],hc[1]);ib=this.scale;S.uniform2f(Sa.location,ib[0],ib[1]);jb=this.translate;S.uniform2f(Cb.location,jb[0],jb[1]);ta=b.positionOffset;S.uniform2f(la.location,ta[0],
ta[1]);S.uniform1f(W.location,b.opacity);(ob=g.call(this,O,b,0))&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);wa=ob._texture;S.uniform1i(ca.location,wa.bind());(Ua=na.elements)?S.bindBuffer(34963,Ua.buffer.buffer):Ea.currentVAO&&(Ua=Q.getElements(Ea.currentVAO.elements))&&S.bindBuffer(34963,Ua.buffer.buffer);ab=b.offset;if(za=b.count)db=na.instances,0<db?Ua?u.drawElementsInstancedANGLE(0,za,Ua.type,ab<<(Ua.type-5121>>1),db):u.drawArraysInstancedANGLE(0,ab,za,db):0>db&&(Ua?S.drawElements(0,za,Ua.type,
ab<<(Ua.type-5121>>1)):S.drawArrays(0,ab,za)),T.dirty=!0,Ea.setVAO(null),O.viewportWidth=t,O.viewportHeight=v,y&&(c.cpuTime+=performance.now()-w),H&&P.destroyStream(G),Vd&&P.destroyStream(Wd),pc&&P.destroyStream(Wa),Ta&&P.destroyStream(Ub),wa.unbind()},scope:function(a,l,g){var d,e,m,k,v,w,u,G,D,z,x,r,Ia,A,E,J,I,oa,ca,R,K,L,N,Q,S,U,Z,aa,W,V,Y,fa,ea,ha,ia,ja,ka,la,sa,qa,Fa,Ea,Ka,Na,Sa,$a,zc,sb,mb,Cb,td,Gb,$b,Yb,sc,Xa,Ca,ic,Ib,Ta,Ub,bb,Dc,Wb,Pc,jc,Rb,Qc,Sb,Oa,nb,tb,gb,Pa,nc,Xb,bd,cb,kc,Zc,hc,ib,jb,
ta,ob,wa,Ua,ab,za,db,Ma,Ab,zb,Ra,Hc,Jb,Lb,Tb,ua,Jd,La,Ob,eb,hb,va,dc,Da,pb,qb,Ya,Za,lc,dd,tc,Va,Mb,Oc,Ga,vc,Qa,Aa,kb,ub,Bb,rb,uc,vb,wd,rc,Ed,Jc,ed,fd,Vb,bc,Pb,Ha,Zb,lb,wb,Nb,Qb,ec,gc,Ze,xc,yc,Ac,Kc,$c,Sc,Lc,Kb,Db,Mc,Ec,Tc,fc,Wc;d=this.viewport;e=d.x|0;m=d.y|0;k="width"in d?d.width|0:O.framebufferWidth-e;v="height"in d?d.height|0:O.framebufferHeight-m;w=O.viewportWidth;O.viewportWidth=k;u=O.viewportHeight;O.viewportHeight=v;G=X[0];X[0]=e;D=X[1];X[1]=m;z=X[2];X[2]=k;x=X[3];X[3]=v;r=yb[0];yb[0]=0;Ia=
yb[1];yb[1]=0;A=yb[2];yb[2]=0;E=yb[3];yb[3]=1;J=ma.blend_enable;ma.blend_enable=!0;I=ga[0];ga[0]=770;oa=ga[1];ga[1]=771;ca=ga[2];ga[2]=773;R=ga[3];ga[3]=1;K=ma.depth_enable;ma.depth_enable=!1;L=ma.stencil_enable;ma.stencil_enable=!1;if(N=T.profile)Q=performance.now(),c.count++;S=a.offset;U=na.offset;na.offset=S;Z=a.count;aa=na.count;na.count=Z;W=na.primitive;na.primitive=0;V=a.align;Y=Ba[64];Ba[64]=V;fa=b.call(this,O,a,g);ea=Ba[69];Ba[69]=fa;ha=p.call(this,O,a,g);ia=Ba[67];Ba[67]=ha;ja=H.call(this,
O,a,g);ka=Ba[66];Ba[66]=ja;la=a.baseline;sa=Ba[65];Ba[65]=la;qa=y.call(this,O,a,g);Fa=Ba[62];Ba[62]=qa;Ea=a.color;Ka=Ba[14];Ba[14]=Ea;Na=h.call(this,O,a,g);Sa=Ba[63];Ba[63]=Na;$a=a.opacity;zc=Ba[10];Ba[10]=$a;sb=a.positionOffset;mb=Ba[68];Ba[68]=sb;Cb=this.scale;td=Ba[6];Ba[6]=Cb;Gb=this.translate;$b=Ba[8];Ba[8]=Gb;Yb=this.viewportArray;sc=Ba[3];Ba[3]=Yb;Xa=this.charBuffer;Ca=!1;ic=null;Ib=0;Ta=!1;bb=Ub=0;Dc=1;Wb=0;Pc=5126;Sb=Qc=Rb=jc=0;B(Xa)?(Ca=!0,ic=P.createStream(34962,Xa),Pc=ic.dtype):(ic=P.getBuffer(Xa))?
Pc=ic.dtype:"constant"in Xa?(Dc=2,"number"===typeof Xa.constant?(Rb=Xa.constant,Qc=Sb=jc=0):(Rb=0<Xa.constant.length?Xa.constant[0]:0,Qc=1<Xa.constant.length?Xa.constant[1]:0,Sb=2<Xa.constant.length?Xa.constant[2]:0,jc=3<Xa.constant.length?Xa.constant[3]:0)):(ic=B(Xa.buffer)?P.createStream(34962,Xa.buffer):P.getBuffer(Xa.buffer),Pc="type"in Xa?ra[Xa.type]:ic.dtype,Ta=!!Xa.normalized,bb=Xa.size|0,Ub=Xa.offset|0,Wb=Xa.stride|0,Ib=Xa.divisor|0);Oa=f.buffer;f.buffer=ic;nb=f.divisor;f.divisor=Ib;tb=f.normalized;
f.normalized=Ta;gb=f.offset;f.offset=Ub;Pa=f.size;f.size=bb;nc=f.state;f.state=Dc;Xb=f.stride;f.stride=Wb;bd=f.type;f.type=Pc;cb=f.w;f.w=jc;kc=f.x;f.x=Rb;Zc=f.y;f.y=Qc;hc=f.z;f.z=Sb;M.buffer=this.sizeBuffer;ib=!1;jb=null;ta=0;ob=!1;Ua=wa=0;ab=1;za=0;db=5126;Ra=zb=Ab=Ma=0;B(M)?(ib=!0,jb=P.createStream(34962,M),db=jb.dtype):(jb=P.getBuffer(M))?db=jb.dtype:"constant"in M?(ab=2,"number"===typeof M.constant?(Ab=M.constant,zb=Ra=Ma=0):(Ab=0<M.constant.length?M.constant[0]:0,zb=1<M.constant.length?M.constant[1]:
0,Ra=2<M.constant.length?M.constant[2]:0,Ma=3<M.constant.length?M.constant[3]:0)):(jb=B(M.buffer)?P.createStream(34962,M.buffer):P.getBuffer(M.buffer),db="type"in M?ra[M.type]:jb.dtype,ob=!!M.normalized,Ua=M.size|0,wa=M.offset|0,za=M.stride|0,ta=M.divisor|0);Hc=n.buffer;n.buffer=jb;Jb=n.divisor;n.divisor=ta;Lb=n.normalized;n.normalized=ob;Tb=n.offset;n.offset=wa;ua=n.size;n.size=Ua;Jd=n.state;n.state=ab;La=n.stride;n.stride=za;Ob=n.type;n.type=db;eb=n.w;n.w=Ma;hb=n.x;n.x=Ab;va=n.y;n.y=zb;dc=n.z;n.z=
Ra;Da=this.position;pb=!1;qb=null;Ya=0;Za=!1;dd=lc=0;tc=1;Va=0;Mb=5126;Qa=vc=Ga=Oc=0;B(Da)?(pb=!0,qb=P.createStream(34962,Da),Mb=qb.dtype):(qb=P.getBuffer(Da))?Mb=qb.dtype:"constant"in Da?(tc=2,"number"===typeof Da.constant?(Ga=Da.constant,vc=Qa=Oc=0):(Ga=0<Da.constant.length?Da.constant[0]:0,vc=1<Da.constant.length?Da.constant[1]:0,Qa=2<Da.constant.length?Da.constant[2]:0,Oc=3<Da.constant.length?Da.constant[3]:0)):(qb=B(Da.buffer)?P.createStream(34962,Da.buffer):P.getBuffer(Da.buffer),Mb="type"in
Da?ra[Da.type]:qb.dtype,Za=!!Da.normalized,dd=Da.size|0,lc=Da.offset|0,Va=Da.stride|0,Ya=Da.divisor|0);Aa=q.buffer;q.buffer=qb;kb=q.divisor;q.divisor=Ya;ub=q.normalized;q.normalized=Za;Bb=q.offset;q.offset=lc;rb=q.size;q.size=dd;uc=q.state;q.state=tc;vb=q.stride;q.stride=Va;wd=q.type;q.type=Mb;rc=q.w;q.w=Oc;Ed=q.x;q.x=Ga;Jc=q.y;q.y=vc;ed=q.z;q.z=Qa;F.buffer=this.sizeBuffer;fd=!1;Vb=null;bc=0;Pb=!1;Zb=Ha=0;lb=1;wb=0;Nb=5126;Ze=gc=ec=Qb=0;B(F)?(fd=!0,Vb=P.createStream(34962,F),Nb=Vb.dtype):(Vb=P.getBuffer(F))?
Nb=Vb.dtype:"constant"in F?(lb=2,"number"===typeof F.constant?(ec=F.constant,gc=Ze=Qb=0):(ec=0<F.constant.length?F.constant[0]:0,gc=1<F.constant.length?F.constant[1]:0,Ze=2<F.constant.length?F.constant[2]:0,Qb=3<F.constant.length?F.constant[3]:0)):(Vb=B(F.buffer)?P.createStream(34962,F.buffer):P.getBuffer(F.buffer),Nb="type"in F?ra[F.type]:Vb.dtype,Pb=!!F.normalized,Zb=F.size|0,Ha=F.offset|0,wb=F.stride|0,bc=F.divisor|0);xc=t.buffer;t.buffer=Vb;yc=t.divisor;t.divisor=bc;Ac=t.normalized;t.normalized=
Pb;Kc=t.offset;t.offset=Ha;$c=t.size;t.size=Zb;Sc=t.state;t.state=lb;Lc=t.stride;t.stride=wb;Kb=t.type;t.type=Nb;Db=t.w;t.w=Qb;Mc=t.x;t.x=ec;Ec=t.y;t.y=gc;Tc=t.z;t.z=Ze;fc=da.vert;da.vert=61;Wc=da.frag;da.frag=60;T.dirty=!0;l(O,a,g);O.viewportWidth=w;O.viewportHeight=u;X[0]=G;X[1]=D;X[2]=z;X[3]=x;yb[0]=r;yb[1]=Ia;yb[2]=A;yb[3]=E;ma.blend_enable=J;ga[0]=I;ga[1]=oa;ga[2]=ca;ga[3]=R;ma.depth_enable=K;ma.stencil_enable=L;N&&(c.cpuTime+=performance.now()-Q);na.offset=U;na.count=aa;na.primitive=W;Ba[64]=
Y;Ba[69]=ea;Ba[67]=ia;Ba[66]=ka;Ba[65]=sa;Ba[62]=Fa;Ba[14]=Ka;Ba[63]=Sa;Ba[10]=zc;Ba[68]=mb;Ba[6]=td;Ba[8]=$b;Ba[3]=sc;Ca&&P.destroyStream(ic);f.buffer=Oa;f.divisor=nb;f.normalized=tb;f.offset=gb;f.size=Pa;f.state=nc;f.stride=Xb;f.type=bd;f.w=cb;f.x=kc;f.y=Zc;f.z=hc;ib&&P.destroyStream(jb);n.buffer=Hc;n.divisor=Jb;n.normalized=Lb;n.offset=Tb;n.size=ua;n.state=Jd;n.stride=La;n.type=Ob;n.w=eb;n.x=hb;n.y=va;n.z=dc;pb&&P.destroyStream(qb);q.buffer=Aa;q.divisor=kb;q.normalized=ub;q.offset=Bb;q.size=rb;
q.state=uc;q.stride=vb;q.type=wd;q.w=rc;q.x=Ed;q.y=Jc;q.z=ed;fd&&P.destroyStream(Vb);t.buffer=xc;t.divisor=yc;t.normalized=Ac;t.offset=Kc;t.size=$c;t.state=Sc;t.stride=Lc;t.type=Kb;t.w=Db;t.x=Mc;t.y=Ec;t.z=Tc;da.vert=fc;da.frag=Wc;T.dirty=!0}}}}},{}],25:[function(d,e,r){var a=d("./sorted-object-keys");e.exports=function(c,d){for(var e=a(d),m=0;m<e.length;++m)c[e[m]]=d[e[m]];return c}},{"./sorted-object-keys":34}],26:[function(d,e,r){function a(a,c,d,l,g,b){for(var p=0;p<c;++p)for(var e=a[p],y=0;y<
d;++y)for(var h=e[y],f=0;f<l;++f)g[b++]=h[f]}function c(d,e,k,l,g){for(var b=1,p=k+1;p<e.length;++p)b*=e[p];var H=e[k];if(4===e.length-k){var y=e[k+1],h=e[k+2];e=e[k+3];for(p=0;p<H;++p)a(d[p],y,h,e,l,g),g+=b}else for(p=0;p<H;++p)c(d[p],e,k+1,l,g),g+=b}var z=d("./pool");e.exports={shape:function(a){for(var c=[];a.length;a=a[0])c.push(a.length);return c},flatten:function(d,e,k,l){var g=1;if(e.length)for(var b=0;b<e.length;++b)g*=e[b];else g=0;k=l||z.allocType(k,g);switch(e.length){case 0:break;case 1:l=
e[0];for(e=0;e<l;++e)k[e]=d[e];break;case 2:l=e[0];e=e[1];for(b=g=0;b<l;++b)for(var p=d[b],H=0;H<e;++H)k[g++]=p[H];break;case 3:a(d,e[0],e[1],e[2],k,0);break;default:c(d,e,0,k,0)}return k}}},{"./pool":32}],27:[function(d,e,r){var a=d("./is-typed-array");e.exports=function(c){return Array.isArray(c)||a(c)}},{"./is-typed-array":30}],28:[function(d,e,r){var a=d("./is-typed-array");e.exports=function(c){return!!c&&"object"===typeof c&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&"number"===typeof c.offset&&
c.shape.length===c.stride.length&&(Array.isArray(c.data)||a(c.data))}},{"./is-typed-array":30}],29:[function(d,e,r){e.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(d,e,r){e.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(d,e,r){e.exports=function(a,c){for(var d=
Array(a),e=0;e<a;++e)d[e]=c(e);return d}},{}],32:[function(d,e,r){function a(a){var c,d;c=(65535<a)<<4;a>>>=c;d=(255<a)<<3;a>>>=d;c|=d;d=(15<a)<<2;a>>>=d;c|=d;d=(3<a)<<1;return c|d|a>>>d>>1}function c(){function c(l){a:{for(var g=16;268435456>=g;g*=16)if(l<=g){l=g;break a}l=0}g=e[a(l)>>2];return 0<g.length?g.pop():new ArrayBuffer(l)}function d(c){e[a(c.byteLength)>>2].push(c)}var e=z(8,function(){return[]});return{alloc:c,free:d,allocType:function(a,g){var b=null;switch(a){case 5120:b=new Int8Array(c(g),
0,g);break;case 5121:b=new Uint8Array(c(g),0,g);break;case 5122:b=new Int16Array(c(2*g),0,g);break;case 5123:b=new Uint16Array(c(2*g),0,g);break;case 5124:b=new Int32Array(c(4*g),0,g);break;case 5125:b=new Uint32Array(c(4*g),0,g);break;case 5126:b=new Float32Array(c(4*g),0,g);break;default:return null}return b.length!==g?b.subarray(0,g):b},freeType:function(a){d(a.buffer)}}}var z=d("./loop");d=c();d.zero=c();e.exports=d},{"./loop":31}],33:[function(d,e,r){e.exports={next:"function"===typeof requestAnimationFrame?
function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(d,e,r){e.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(d,e,r){var a=d("./pool"),c=new Float32Array(1),z=new Uint32Array(c.buffer);e.exports=function(d){for(var e=a.allocType(5123,d.length),k=0;k<d.length;++k)if(isNaN(d[k]))e[k]=65535;else if(Infinity===d[k])e[k]=31744;else if(-Infinity===
d[k])e[k]=64512;else{c[0]=d[k];var l=z[0],g=l>>>31<<15,b=(l<<1>>>24)-127,l=l>>13&1023;e[k]=-24>b?g:-14>b?g+(l+1024>>-14-b):15<b?g+31744:g+(b+15<<10)+l}return e}},{"./pool":32}],36:[function(d,e,r){var a=d("./sorted-object-keys");e.exports=function(c){return a(c).map(function(a){return c[a]})}},{"./sorted-object-keys":34}],37:[function(d,e,r){function a(a,c,b){function p(){var c=window.innerWidth,f=window.innerHeight;a!==document.body&&(f=d.getBoundingClientRect(),c=f.right-f.left,f=f.bottom-f.top);
d.width=b*c;d.height=b*f}var d=document.createElement("canvas");k(d.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(d);a===document.body&&(d.style.position="absolute",k(a.style,{margin:0,padding:0}));var e;a!==document.body&&"function"===typeof ResizeObserver?(e=new ResizeObserver(function(){setTimeout(p)}),e.observe(a)):window.addEventListener("resize",p,!1);p();return{canvas:d,onDestroy:function(){e?e.disconnect():window.removeEventListener("resize",p);
a.removeChild(d)}}}function c(a,c){function b(b){try{return a.getContext(b,c)}catch(d){return null}}return b("webgl")||b("experimental-webgl")||b("webgl-experimental")}function z(a){if("string"===typeof a)return a.split();m(Array.isArray(a),"invalid extension array");return a}function D(a){return"string"===typeof a?(m("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var m=d("./util/check"),k=d("./util/extend");e.exports=function(l){var g=l||{},b,p,d,e;l={};
var h=[],f=[],n="undefined"===typeof window?1:window.devicePixelRatio,q=!1,t=function(b){b&&m.raise(b)},k=function(){};"string"===typeof g?(m("undefined"!==typeof document,"selector queries only supported in DOM environments"),b=document.querySelector(g),m(b,"invalid query string for element")):"object"===typeof g?"string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?b=g:"function"===typeof g.drawArrays||"function"===typeof g.drawElements?(e=
g,d=e.canvas):(m.constructor(g),"gl"in g?e=g.gl:"canvas"in g?d=D(g.canvas):"container"in g&&(p=D(g.container)),"attributes"in g&&(l=g.attributes,m.type(l,"object","invalid context attributes")),"extensions"in g&&(h=z(g.extensions)),"optionalExtensions"in g&&(f=z(g.optionalExtensions)),"onDone"in g&&(m.type(g.onDone,"function","invalid or missing onDone callback"),t=g.onDone),"profile"in g&&(q=!!g.profile),"pixelRatio"in g&&(n=+g.pixelRatio,m(0<n,"invalid pixel ratio"))):m.raise("invalid arguments to regl");
b&&("canvas"===b.nodeName.toLowerCase()?d=b:p=b);if(!e){if(!d){m("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");b=a(p||document.body,t,n);if(!b)return null;d=b.canvas;k=b.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0);e=c(d,l)}return e?{gl:e,canvas:d,container:p,extensions:h,optionalExtensions:f,pixelRatio:n,profile:q,onDone:t,onDestroy:k}:(k(),t("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(d,e,r){var a=d("element-size");e.exports=function(d,e,m){function k(){var g=k.parent||d.parentNode;if("function"===typeof g)var b=g(c)||c,g=b[0],b=b[1];else g&&g!==document.body?(b=a(g),g=b[0]|0,b=b[1]|0):(g=window.innerWidth,b=window.innerHeight);l?(d.setAttribute("width",g*k.scale+"px"),d.setAttribute("height",b*k.scale+"px")):(d.width=g*k.scale,d.height=b*k.scale);d.style.width=g+"px";d.style.height=b+"px";return k}var l="SVG"===d.nodeName.toUpperCase();
d.style.position=d.style.position||"absolute";d.style.top=0;d.style.left=0;k.scale=parseFloat(m||1);k.parent=e;return k()};var c=new Float32Array(2)},{"element-size":42}],39:[function(d,e,r){var a=d("orbit-camera"),c=d("scroll-speed"),z=d("mouse-position"),D=d("mouse-pressed"),m=d("key-pressed");e.exports=function(d,l){l=l||{};l.pan=!1!==l.pan;l.scale=!1!==l.scale;l.rotate=!1!==l.rotate;var g=c(d,l.scale),b=D(d,l.rotate),p=z(d),e=a([0,10,30],[0,0,0],[0,1,0]);e.tick=function(){var a=m("<control>")||
m("<alt>"),c=m("<shift>"),f=d.height,n=d.width;l.rotate&&b.left&&!a&&!c&&e.rotate([p.x/n-.5,p.y/f-.5],[p.prevX/n-.5,p.prevY/f-.5]);(l.pan&&b.right||b.left&&a&&!c)&&e.pan([1*(p.x-p.prevX)/n,1*(p.y-p.prevY)/f]);l.scale&&g[1]&&(e.distance*=Math.exp(g[1]/f));if(l.scale&&(b.middle||b.left&&!a&&c)){a=p.y-p.prevY;if(!a)return;e.distance*=Math.exp(a/f)}g.flush();p.flush()};return e}},{"key-pressed":121,"mouse-position":40,"mouse-pressed":41,"orbit-camera":122,"scroll-speed":125}],40:[function(d,e,r){var a=
d("events/");e.exports=function(c,d){var e=new a;e.x=0;e.y=0;e.prevX=0;e.prevY=0;e.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===typeof window)return e;d=d||c||window;c=c||document.body;d.addEventListener("mousemove",c===document.body||c===window?function(a){e.prevX=e.x;e.prevY=e.y;e.x=a.clientX;e.y=a.clientY;e.emit("move",a)}:function(a){e.prevX=e.x;e.prevY=e.y;var d=c.getBoundingClientRect();e.x=a.clientX-d.left;e.y=a.clientY-d.top;e.emit("move",a)},!1);return e}},{"events/":43}],
41:[function(d,e,r){var a=d("events/"),c=["left","middle","right"];e.exports=function(d,e){function m(a){l.right=!1;l[c[a.button]]=!0;l.emit("down",a);if(e){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function k(a){l.right=!1;l[c[a.button]]=!1;l.emit("up",a);e&&a.preventDefault&&(a.preventDefault(),a.stopPropagation())}var l=new a;l.left=!1;l.right=!1;l.middle=!1;"undefined"!==typeof window&&(d=d||window,d.addEventListener("mousedown",m,!1),d.addEventListener("mouseup",k,
!1),e&&d.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return l}},{"events/":43}],42:[function(d,e,r){function a(a){return parseFloat(a)||0}e.exports=function(c){if(c===window||c===document.body)return[window.innerWidth,window.innerHeight];if(!c.parentNode){var d=!0;document.body.appendChild(c)}var e=c.getBoundingClientRect(),m=getComputedStyle(c),k=(e.height|0)+a(m.getPropertyValue("margin-top"))+a(m.getPropertyValue("margin-bottom")),e=(e.width|
0)+a(m.getPropertyValue("margin-left"))+a(m.getPropertyValue("margin-right"));d&&document.body.removeChild(c);return[e,k]}},{}],43:[function(d,e,r){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function c(a){return"function"===typeof a}function z(a){return"object"===typeof a&&null!==a}e.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||
0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var d,e,l,g;this._events||(this._events={});if("error"===a&&(!this._events.error||z(this._events.error)&&!this._events.error.length)){d=arguments[1];if(d instanceof Error)throw d;e=Error('Uncaught, unspecified "error" event. ('+d+")");e.context=d;throw e;}e=this._events[a];if(void 0===e)return!1;if(c(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);
break;case 3:e.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),e.apply(this,d)}else if(z(e))for(d=Array.prototype.slice.call(arguments,1),g=e.slice(),e=g.length,l=0;l<e;l++)g[l].apply(this,d);return!0};a.prototype.addListener=function(d,e){var k;if(!c(e))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",d,c(e.listener)?e.listener:e);this._events[d]?z(this._events[d])?this._events[d].push(e):
this._events[d]=[this._events[d],e]:this._events[d]=e;z(this._events[d])&&!this._events[d].warned&&(k=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<k&&this._events[d].length>k&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[d].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;
a.prototype.once=function(a,d){function e(){this.removeListener(a,e);l||(l=!0,d.apply(this,arguments))}if(!c(d))throw TypeError("listener must be a function");var l=!1;e.listener=d;this.on(a,e);return this};a.prototype.removeListener=function(a,d){var e,l,g;if(!c(d))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;e=this._events[a];g=e.length;l=-1;if(e===d||c(e.listener)&&e.listener===d)delete this._events[a],this._events.removeListener&&this.emit("removeListener",
a,d);else if(z(e)){for(;0<g--;)if(e[g]===d||e[g].listener&&e[g].listener===d){l=g;break}if(0>l)return this;1===e.length?(e.length=0,delete this._events[a]):e.splice(l,1);this._events.removeListener&&this.emit("removeListener",a,d)}return this};a.prototype.removeAllListeners=function(a){var d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(d in this._events)"removeListener"!==
d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events={};return this}d=this._events[a];if(c(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(c(a))return 1;if(a)return a.length}return 0};
a.listenerCount=function(a,c){return a.listenerCount(c)}},{}],44:[function(d,e,r){e.exports=function(a,c){var d=c[0],e=c[1],m=c[2],k=c[3],l=c[4],g=c[5],b=c[6],p=c[7],H=c[8],y=c[9],h=c[10],f=c[11],n=c[12],q=c[13],t=c[14],v=c[15];a[0]=g*(h*v-f*t)-y*(b*v-p*t)+q*(b*f-p*h);a[1]=-(e*(h*v-f*t)-y*(m*v-k*t)+q*(m*f-k*h));a[2]=e*(b*v-p*t)-g*(m*v-k*t)+q*(m*p-k*b);a[3]=-(e*(b*f-p*h)-g*(m*f-k*h)+y*(m*p-k*b));a[4]=-(l*(h*v-f*t)-H*(b*v-p*t)+n*(b*f-p*h));a[5]=d*(h*v-f*t)-H*(m*v-k*t)+n*(m*f-k*h);a[6]=-(d*(b*v-p*t)-
l*(m*v-k*t)+n*(m*p-k*b));a[7]=d*(b*f-p*h)-l*(m*f-k*h)+H*(m*p-k*b);a[8]=l*(y*v-f*q)-H*(g*v-p*q)+n*(g*f-p*y);a[9]=-(d*(y*v-f*q)-H*(e*v-k*q)+n*(e*f-k*y));a[10]=d*(g*v-p*q)-l*(e*v-k*q)+n*(e*p-k*g);a[11]=-(d*(g*f-p*y)-l*(e*f-k*y)+H*(e*p-k*g));a[12]=-(l*(y*t-h*q)-H*(g*t-b*q)+n*(g*h-b*y));a[13]=d*(y*t-h*q)-H*(e*t-m*q)+n*(e*h-m*y);a[14]=-(d*(g*t-b*q)-l*(e*t-m*q)+n*(e*b-m*g));a[15]=d*(g*h-b*y)-l*(e*h-m*y)+H*(e*b-m*g);return a}},{}],45:[function(d,e,r){e.exports=function(a){var c=new Float32Array(16);c[0]=
a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c}},{}],46:[function(d,e,r){e.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],47:[function(d,e,r){e.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;
a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(d,e,r){e.exports=function(a){var c=a[0],d=a[1],e=a[2],m=a[3],k=a[4],l=a[5],g=a[6],b=a[7],p=a[8],H=a[9],y=a[10],h=a[11],f=a[12],n=a[13],q=a[14];a=a[15];return(c*l-d*k)*(y*a-h*q)-(c*g-e*k)*(H*a-h*n)+(c*b-m*k)*(H*q-y*n)+(d*g-e*l)*(p*a-h*f)-(d*b-m*l)*(p*q-y*f)+(e*b-m*g)*(p*n-H*f)}},{}],49:[function(d,e,r){e.exports=function(a,c){var d=c[0],e=c[1],m=c[2],k=c[3],l=d+d,g=e+e,b=m+m,
d=d*l,p=e*l,e=e*g,H=m*l,y=m*g,m=m*b,l=k*l,g=k*g,k=k*b;a[0]=1-e-m;a[1]=p+k;a[2]=H-g;a[3]=0;a[4]=p-k;a[5]=1-d-m;a[6]=y+l;a[7]=0;a[8]=H+g;a[9]=y-l;a[10]=1-d-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(d,e,r){e.exports=function(a,c,d){var e,m,k=d[0],l=d[1];d=d[2];e=Math.sqrt(k*k+l*l+d*d);if(1E-6>Math.abs(e))return null;e=1/e;k*=e;l*=e;d*=e;e=Math.sin(c);c=Math.cos(c);m=1-c;a[0]=k*k*m+c;a[1]=l*k*m+d*e;a[2]=d*k*m-l*e;a[3]=0;a[4]=k*l*m-d*e;a[5]=l*l*m+c;a[6]=d*l*m+k*e;a[7]=0;a[8]=
k*d*m+l*e;a[9]=l*d*m-k*e;a[10]=d*d*m+c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(d,e,r){e.exports=function(a,c,d){var e=c[0],m=c[1],k=c[2],l=c[3],g=e+e,b=m+m,p=k+k;c=e*g;var H=e*b,e=e*p,y=m*b,m=m*p,k=k*p,g=l*g,b=l*b,l=l*p;a[0]=1-(y+k);a[1]=H+l;a[2]=e-b;a[3]=0;a[4]=H-l;a[5]=1-(c+k);a[6]=m+g;a[7]=0;a[8]=e+b;a[9]=m-g;a[10]=1-(c+y);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}},{}],52:[function(d,e,r){e.exports=function(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;
a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(d,e,r){e.exports=function(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}},{}],54:[function(d,e,r){e.exports=function(a,c){var d=Math.sin(c),e=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(d,
e,r){e.exports=function(a,c){var d=Math.sin(c),e=Math.cos(c);a[0]=e;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],56:[function(d,e,r){e.exports=function(a,c){var d=Math.sin(c),e=Math.cos(c);a[0]=e;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(d,e,r){e.exports=function(a,c,d,e,m,k,l){var g=1/(d-c),b=1/(m-e),p=1/(k-l);a[0]=2*k*
g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*k*b;a[6]=0;a[7]=0;a[8]=(d+c)*g;a[9]=(m+e)*b;a[10]=(l+k)*p;a[11]=-1;a[12]=0;a[13]=0;a[14]=l*k*2*p;a[15]=0;return a}},{}],58:[function(d,e,r){e.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(d,e,r){e.exports={create:d("./create"),clone:d("./clone"),copy:d("./copy"),identity:d("./identity"),transpose:d("./transpose"),invert:d("./invert"),adjoint:d("./adjoint"),
determinant:d("./determinant"),multiply:d("./multiply"),translate:d("./translate"),scale:d("./scale"),rotate:d("./rotate"),rotateX:d("./rotateX"),rotateY:d("./rotateY"),rotateZ:d("./rotateZ"),fromRotation:d("./fromRotation"),fromRotationTranslation:d("./fromRotationTranslation"),fromScaling:d("./fromScaling"),fromTranslation:d("./fromTranslation"),fromXRotation:d("./fromXRotation"),fromYRotation:d("./fromYRotation"),fromZRotation:d("./fromZRotation"),fromQuat:d("./fromQuat"),frustum:d("./frustum"),
perspective:d("./perspective"),perspectiveFromFieldOfView:d("./perspectiveFromFieldOfView"),ortho:d("./ortho"),lookAt:d("./lookAt"),str:d("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,
"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(d,e,r){e.exports=function(a,c){var d=c[0],e=c[1],m=c[2],k=c[3],l=c[4],g=c[5],b=c[6],p=c[7],H=c[8],y=c[9],h=c[10],f=c[11],n=c[12],q=c[13],t=c[14],v=c[15],G=d*g-e*l,w=d*b-m*l,r=d*p-k*l,x=e*b-m*g,u=e*p-k*g,oa=m*p-k*b,ca=H*q-y*n,J=H*t-h*n,R=H*v-f*n,A=y*t-h*q,aa=y*v-f*q,I=h*v-f*t,U=G*I-w*aa+r*A+x*R-u*J+oa*ca;if(!U)return null;U=1/U;a[0]=(g*
I-b*aa+p*A)*U;a[1]=(m*aa-e*I-k*A)*U;a[2]=(q*oa-t*u+v*x)*U;a[3]=(h*u-y*oa-f*x)*U;a[4]=(b*R-l*I-p*J)*U;a[5]=(d*I-m*R+k*J)*U;a[6]=(t*r-n*oa-v*w)*U;a[7]=(H*oa-h*r+f*w)*U;a[8]=(l*aa-g*R+p*ca)*U;a[9]=(e*R-d*aa-k*ca)*U;a[10]=(n*u-q*r+v*G)*U;a[11]=(y*r-H*u-f*G)*U;a[12]=(g*J-l*A-b*ca)*U;a[13]=(d*A-e*J+m*ca)*U;a[14]=(q*w-n*x-t*G)*U;a[15]=(H*x-y*w+h*G)*U;return a}},{}],61:[function(d,e,r){var a=d("./identity");e.exports=function(c,d,e,m){var k,l,g,b,p,H,y,h,f=d[0],n=d[1];d=d[2];g=m[0];b=m[1];l=m[2];y=e[0];m=
e[1];k=e[2];if(1E-6>Math.abs(f-y)&&1E-6>Math.abs(n-m)&&1E-6>Math.abs(d-k))return a(c);e=f-y;m=n-m;y=d-k;h=1/Math.sqrt(e*e+m*m+y*y);e*=h;m*=h;y*=h;k=b*y-l*m;l=l*e-g*y;g=g*m-b*e;(h=Math.sqrt(k*k+l*l+g*g))?(h=1/h,k*=h,l*=h,g*=h):g=l=k=0;b=m*g-y*l;p=y*k-e*g;H=e*l-m*k;(h=Math.sqrt(b*b+p*p+H*H))?(h=1/h,b*=h,p*=h,H*=h):H=p=b=0;c[0]=k;c[1]=b;c[2]=e;c[3]=0;c[4]=l;c[5]=p;c[6]=m;c[7]=0;c[8]=g;c[9]=H;c[10]=y;c[11]=0;c[12]=-(k*f+l*n+g*d);c[13]=-(b*f+p*n+H*d);c[14]=-(e*f+m*n+y*d);c[15]=1;return c}},{"./identity":58}],
62:[function(d,e,r){e.exports=function(a,c,d){var e=c[0],m=c[1],k=c[2],l=c[3],g=c[4],b=c[5],p=c[6],H=c[7],y=c[8],h=c[9],f=c[10],n=c[11],q=c[12],t=c[13],v=c[14];c=c[15];var G=d[0],w=d[1],r=d[2],x=d[3];a[0]=G*e+w*g+r*y+x*q;a[1]=G*m+w*b+r*h+x*t;a[2]=G*k+w*p+r*f+x*v;a[3]=G*l+w*H+r*n+x*c;G=d[4];w=d[5];r=d[6];x=d[7];a[4]=G*e+w*g+r*y+x*q;a[5]=G*m+w*b+r*h+x*t;a[6]=G*k+w*p+r*f+x*v;a[7]=G*l+w*H+r*n+x*c;G=d[8];w=d[9];r=d[10];x=d[11];a[8]=G*e+w*g+r*y+x*q;a[9]=G*m+w*b+r*h+x*t;a[10]=G*k+w*p+r*f+x*v;a[11]=G*l+w*
H+r*n+x*c;G=d[12];w=d[13];r=d[14];x=d[15];a[12]=G*e+w*g+r*y+x*q;a[13]=G*m+w*b+r*h+x*t;a[14]=G*k+w*p+r*f+x*v;a[15]=G*l+w*H+r*n+x*c;return a}},{}],63:[function(d,e,r){e.exports=function(a,c,d,e,m,k,l){var g=1/(c-d),b=1/(e-m),p=1/(k-l);a[0]=-2*g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*p;a[11]=0;a[12]=(c+d)*g;a[13]=(m+e)*b;a[14]=(l+k)*p;a[15]=1;return a}},{}],64:[function(d,e,r){e.exports=function(a,c,d,e,m){c=1/Math.tan(c/2);var k=1/(e-m);a[0]=c/d;a[1]=0;a[2]=0;a[3]=
0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(m+e)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*m*e*k;a[15]=0;return a}},{}],65:[function(d,e,r){e.exports=function(a,c,d,e){var m=Math.tan(c.upDegrees*Math.PI/180),k=Math.tan(c.downDegrees*Math.PI/180),l=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);var g=2/(l+c),b=2/(m+k);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=-((l-c)*g*.5);a[9]=(m-k)*b*.5;a[10]=e/(d-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*d/(d-e);a[15]=0;
return a}},{}],66:[function(d,e,r){e.exports=function(a,c,d,e){var m=e[0],k=e[1];e=e[2];var l=Math.sqrt(m*m+k*k+e*e),g,b,p,H,y,h,f,n,q,t,v,G,w,r,x,u,oa,ca,J,R;if(1E-6>Math.abs(l))return null;l=1/l;m*=l;k*=l;e*=l;g=Math.sin(d);b=Math.cos(d);p=1-b;d=c[0];l=c[1];H=c[2];y=c[3];h=c[4];f=c[5];n=c[6];q=c[7];t=c[8];v=c[9];G=c[10];w=c[11];r=m*m*p+b;x=k*m*p+e*g;u=e*m*p-k*g;oa=m*k*p-e*g;ca=k*k*p+b;J=e*k*p+m*g;R=m*e*p+k*g;m=k*e*p-m*g;k=e*e*p+b;a[0]=d*r+h*x+t*u;a[1]=l*r+f*x+v*u;a[2]=H*r+n*x+G*u;a[3]=y*r+q*x+w*
u;a[4]=d*oa+h*ca+t*J;a[5]=l*oa+f*ca+v*J;a[6]=H*oa+n*ca+G*J;a[7]=y*oa+q*ca+w*J;a[8]=d*R+h*m+t*k;a[9]=l*R+f*m+v*k;a[10]=H*R+n*m+G*k;a[11]=y*R+q*m+w*k;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a}},{}],67:[function(d,e,r){e.exports=function(a,c,d){var e=Math.sin(d);d=Math.cos(d);var m=c[4],k=c[5],l=c[6],g=c[7],b=c[8],p=c[9],H=c[10],y=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=m*d+b*e;a[5]=k*d+p*e;a[6]=l*d+H*e;a[7]=
g*d+y*e;a[8]=b*d-m*e;a[9]=p*d-k*e;a[10]=H*d-l*e;a[11]=y*d-g*e;return a}},{}],68:[function(d,e,r){e.exports=function(a,c,d){var e=Math.sin(d);d=Math.cos(d);var m=c[0],k=c[1],l=c[2],g=c[3],b=c[8],p=c[9],H=c[10],y=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d-b*e;a[1]=k*d-p*e;a[2]=l*d-H*e;a[3]=g*d-y*e;a[8]=m*e+b*d;a[9]=k*e+p*d;a[10]=l*e+H*d;a[11]=g*e+y*d;return a}},{}],69:[function(d,e,r){e.exports=function(a,c,d){var e=Math.sin(d);d=
Math.cos(d);var m=c[0],k=c[1],l=c[2],g=c[3],b=c[4],p=c[5],H=c[6],y=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=m*d+b*e;a[1]=k*d+p*e;a[2]=l*d+H*e;a[3]=g*d+y*e;a[4]=b*d-m*e;a[5]=p*d-k*e;a[6]=H*d-l*e;a[7]=y*d-g*e;return a}},{}],70:[function(d,e,r){e.exports=function(a,c,d){var e=d[0],m=d[1];d=d[2];a[0]=c[0]*e;a[1]=c[1]*e;a[2]=c[2]*e;a[3]=c[3]*e;a[4]=c[4]*m;a[5]=c[5]*m;a[6]=c[6]*m;a[7]=c[7]*m;a[8]=c[8]*d;a[9]=c[9]*d;a[10]=c[10]*d;a[11]=
c[11]*d;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}},{}],71:[function(d,e,r){e.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(d,e,r){e.exports=function(a,c,d){var e=d[0],m=d[1];d=d[2];var k,l,g,b,p,H,y,h,f,n,q,t;c===a?(a[12]=c[0]*e+c[4]*m+c[8]*d+c[12],a[13]=c[1]*e+c[5]*m+c[9]*d+c[13],a[14]=c[2]*e+c[6]*m+c[10]*d+c[14],
a[15]=c[3]*e+c[7]*m+c[11]*d+c[15]):(k=c[0],l=c[1],g=c[2],b=c[3],p=c[4],H=c[5],y=c[6],h=c[7],f=c[8],n=c[9],q=c[10],t=c[11],a[0]=k,a[1]=l,a[2]=g,a[3]=b,a[4]=p,a[5]=H,a[6]=y,a[7]=h,a[8]=f,a[9]=n,a[10]=q,a[11]=t,a[12]=k*e+p*m+f*d+c[12],a[13]=l*e+H*m+n*d+c[13],a[14]=g*e+y*m+q*d+c[14],a[15]=b*e+h*m+t*d+c[15]);return a}},{}],73:[function(d,e,r){e.exports=function(a,c){if(a===c){var d=c[1],e=c[2],m=c[3],k=c[6],l=c[7],g=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=d;a[6]=c[9];a[7]=c[13];a[8]=e;a[9]=k;a[11]=c[14];
a[12]=m;a[13]=l;a[14]=g}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a}},{}],74:[function(d,e,r){!function(a,c){if("object"==typeof r&&"object"==typeof e)e.exports=c();else if("function"==typeof define&&define.amd)define([],c);else{var d=c(),D;for(D in d)("object"==typeof r?r:a)[D]=d[D]}}("undefined"!=typeof self?self:this,function(){return function(a){function c(e){if(d[e])return d[e].exports;
var m=d[e]={i:e,l:!1,exports:{}};return a[e].call(m.exports,m,m.exports,c),m.l=!0,m.exports}var d={};return c.m=a,c.c=d,c.d=function(a,d,e){c.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:e})},c.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,d){if((1&d&&(a=c(a)),8&d)||4&d&&"object"==typeof a&&
a&&a.__esModule)return a;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&d&&"string"!=typeof a)for(var l in a)c.d(e,l,function(c){return a[c]}.bind(null,l));return e},c.n=function(a){var d=a&&a.__esModule?function(){return a["default"]}:function(){return a};return c.d(d,"a",d),d},c.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},c.p="",c(c.s=10)}([function(a,c,d){Object.defineProperty(c,"__esModule",{value:!0});c.setMatrixArrayType=
function(a){c.ARRAY_TYPE=a};c.toRadian=function(a){return a*m};c.equals=function(a,c){return Math.abs(a-c)<=e*Math.max(1,Math.abs(a),Math.abs(c))};var e=c.EPSILON=1E-6;c.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;c.RANDOM=Math.random;var m=Math.PI/180},function(a,c,d){function e(){var b=new y.ARRAY_TYPE(4);return y.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b}function m(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b[3]=a[3]-c[3],b}function k(b,a,c){return b[0]=
a[0]*c[0],b[1]=a[1]*c[1],b[2]=a[2]*c[2],b[3]=a[3]*c[3],b}function l(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b[2]=a[2]/c[2],b[3]=a[3]/c[3],b}function g(b,a){var c=a[0]-b[0],g=a[1]-b[1],d=a[2]-b[2],l=a[3]-b[3];return Math.sqrt(c*c+g*g+d*d+l*l)}function b(b,a){var c=a[0]-b[0],g=a[1]-b[1],d=a[2]-b[2],l=a[3]-b[3];return c*c+g*g+d*d+l*l}function p(b){var a=b[0],c=b[1],g=b[2];b=b[3];return Math.sqrt(a*a+c*c+g*g+b*b)}function H(b){var a=b[0],c=b[1],g=b[2];b=b[3];return a*a+c*c+g*g+b*b}Object.defineProperty(c,
"__esModule",{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=e;c.clone=function(b){var a=new y.ARRAY_TYPE(4);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a};c.fromValues=function(b,a,c,g){var d=new y.ARRAY_TYPE(4);return d[0]=b,d[1]=a,d[2]=c,d[3]=g,d};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b};c.set=function(b,a,c,g,d){return b[0]=a,b[1]=c,b[2]=g,b[3]=d,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],
b[3]=a[3]+c[3],b};c.subtract=m;c.multiply=k;c.divide=l;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),b[2]=Math.ceil(a[2]),b[3]=Math.ceil(a[3]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b[3]=Math.floor(a[3]),b};c.min=function(b,a,c){return b[0]=Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b[2]=Math.min(a[2],c[2]),b[3]=Math.min(a[3],c[3]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),
b[2]=Math.max(a[2],c[2]),b[3]=Math.max(a[3],c[3]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b[3]=Math.round(a[3]),b};c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b};c.scaleAndAdd=function(b,a,c,g){return b[0]=a[0]+c[0]*g,b[1]=a[1]+c[1]*g,b[2]=a[2]+c[2]*g,b[3]=a[3]+c[3]*g,b};c.distance=g;c.squaredDistance=b;c.length=p;c.squaredLength=H;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],
b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b[2]=1/a[2],b[3]=1/a[3],b};c.normalize=function(b,a){var c=a[0],g=a[1],d=a[2],l=a[3],e=c*c+g*g+d*d+l*l;0<e&&(e=1/Math.sqrt(e),b[0]=c*e,b[1]=g*e,b[2]=d*e,b[3]=l*e);return b};c.dot=function(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]};c.lerp=function(b,a,c,g){var d=a[0],l=a[1],e=a[2];a=a[3];return b[0]=d+g*(c[0]-d),b[1]=l+g*(c[1]-l),b[2]=e+g*(c[2]-e),b[3]=a+g*(c[3]-a),b};c.random=function(b,a){var c,g,d,l,e,p;a=a||1;do c=2*y.RANDOM()-
1,g=2*y.RANDOM()-1,e=c*c+g*g;while(1<=e);do d=2*y.RANDOM()-1,l=2*y.RANDOM()-1,p=d*d+l*l;while(1<=p);e=Math.sqrt((1-e)/p);return b[0]=a*c,b[1]=a*g,b[2]=a*d*e,b[3]=a*l*e,b};c.transformMat4=function(b,a,c){var g=a[0],d=a[1],l=a[2];a=a[3];return b[0]=c[0]*g+c[4]*d+c[8]*l+c[12]*a,b[1]=c[1]*g+c[5]*d+c[9]*l+c[13]*a,b[2]=c[2]*g+c[6]*d+c[10]*l+c[14]*a,b[3]=c[3]*g+c[7]*d+c[11]*l+c[15]*a,b};c.transformQuat=function(b,a,c){var g=a[0],d=a[1],l=a[2],e=c[0],p=c[1],k=c[2];c=c[3];var m=c*g+p*l-k*d,y=c*d+k*g-e*l,H=
c*l+e*d-p*g,g=-e*g-p*d-k*l;return b[0]=m*c+g*-e+y*-k-H*-p,b[1]=y*c+g*-p+H*-e-m*-k,b[2]=H*c+g*-k+m*-p-y*-e,b[3]=a[3],b};c.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]};c.equals=function(b,a){var c=b[0],g=b[1],d=b[2],l=b[3],e=a[0],p=a[1],k=a[2],m=a[3];return Math.abs(c-e)<=y.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(g-p)<=y.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(d-
k)<=y.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(l-m)<=y.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))};var y=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=b,a}(d(0));c.sub=m;c.mul=k;c.div=l;c.dist=g;c.sqrDist=b;c.len=p;c.sqrLen=H;c.forEach=function(){var b=e();return function(a,c,g,d,l,e){var p=void 0,k=void 0;c||(c=4);g||(g=0);k=d?Math.min(d*c+g,a.length):a.length;for(p=g;p<k;p+=c)b[0]=
a[p],b[1]=a[p+1],b[2]=a[p+2],b[3]=a[p+3],l(b,b,e),a[p]=b[0],a[p+1]=b[1],a[p+2]=b[2],a[p+3]=b[3];return a}}()},function(a,c,d){function e(){var b=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function m(b){var a=b[0],c=b[1];b=b[2];return Math.sqrt(a*a+c*c+b*b)}function k(b,a,c){var f=new n.ARRAY_TYPE(3);return f[0]=b,f[1]=a,f[2]=c,f}function l(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],b[2]=a[2]-c[2],b}function g(b,a,c){return b[0]=a[0]*c[0],b[1]=a[1]*c[1],b[2]=a[2]*
c[2],b}function b(b,a,c){return b[0]=a[0]/c[0],b[1]=a[1]/c[1],b[2]=a[2]/c[2],b}function p(b,a){var c=a[0]-b[0],f=a[1]-b[1],h=a[2]-b[2];return Math.sqrt(c*c+f*f+h*h)}function H(b,a){var c=a[0]-b[0],f=a[1]-b[1],h=a[2]-b[2];return c*c+f*f+h*h}function y(b){var a=b[0],c=b[1];b=b[2];return a*a+c*c+b*b}function h(b,a){var c=a[0],f=a[1],h=a[2],c=c*c+f*f+h*h;return 0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c),b}function f(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}Object.defineProperty(c,"__esModule",
{value:!0});c.forEach=c.sqrLen=c.len=c.sqrDist=c.dist=c.div=c.mul=c.sub=void 0;c.create=e;c.clone=function(b){var a=new n.ARRAY_TYPE(3);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a};c.length=m;c.fromValues=k;c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b};c.set=function(b,a,c,f){return b[0]=a,b[1]=c,b[2]=f,b};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],b};c.subtract=l;c.multiply=g;c.divide=b;c.ceil=function(b,a){return b[0]=Math.ceil(a[0]),b[1]=Math.ceil(a[1]),
b[2]=Math.ceil(a[2]),b};c.floor=function(b,a){return b[0]=Math.floor(a[0]),b[1]=Math.floor(a[1]),b[2]=Math.floor(a[2]),b};c.min=function(b,a,c){return b[0]=Math.min(a[0],c[0]),b[1]=Math.min(a[1],c[1]),b[2]=Math.min(a[2],c[2]),b};c.max=function(b,a,c){return b[0]=Math.max(a[0],c[0]),b[1]=Math.max(a[1],c[1]),b[2]=Math.max(a[2],c[2]),b};c.round=function(b,a){return b[0]=Math.round(a[0]),b[1]=Math.round(a[1]),b[2]=Math.round(a[2]),b};c.scale=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,
b};c.scaleAndAdd=function(b,a,c,f){return b[0]=a[0]+c[0]*f,b[1]=a[1]+c[1]*f,b[2]=a[2]+c[2]*f,b};c.distance=p;c.squaredDistance=H;c.squaredLength=y;c.negate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b};c.inverse=function(b,a){return b[0]=1/a[0],b[1]=1/a[1],b[2]=1/a[2],b};c.normalize=h;c.dot=f;c.cross=function(b,a,c){var f=a[0],h=a[1];a=a[2];var g=c[0],d=c[1];c=c[2];return b[0]=h*c-a*d,b[1]=a*g-f*c,b[2]=f*d-h*g,b};c.lerp=function(b,a,c,f){var h=a[0],g=a[1];a=a[2];return b[0]=h+f*(c[0]-h),
b[1]=g+f*(c[1]-g),b[2]=a+f*(c[2]-a),b};c.hermite=function(b,a,c,f,h,g){var d=g*g,l=d*(2*g-3)+1,n=d*(g-2)+g,e=d*(g-1);g=d*(3-2*g);return b[0]=a[0]*l+c[0]*n+f[0]*e+h[0]*g,b[1]=a[1]*l+c[1]*n+f[1]*e+h[1]*g,b[2]=a[2]*l+c[2]*n+f[2]*e+h[2]*g,b};c.bezier=function(b,a,c,f,h,g){var d=1-g,l=d*d,n=g*g,e=l*d,l=3*g*l,d=3*n*d;g*=n;return b[0]=a[0]*e+c[0]*l+f[0]*d+h[0]*g,b[1]=a[1]*e+c[1]*l+f[1]*d+h[1]*g,b[2]=a[2]*e+c[2]*l+f[2]*d+h[2]*g,b};c.random=function(b,a){a=a||1;var c=2*n.RANDOM()*Math.PI,f=2*n.RANDOM()-1,
h=Math.sqrt(1-f*f)*a;return b[0]=Math.cos(c)*h,b[1]=Math.sin(c)*h,b[2]=f*a,b};c.transformMat4=function(b,a,c){var f=a[0],h=a[1];a=a[2];var g=c[3]*f+c[7]*h+c[11]*a+c[15];return g=g||1,b[0]=(c[0]*f+c[4]*h+c[8]*a+c[12])/g,b[1]=(c[1]*f+c[5]*h+c[9]*a+c[13])/g,b[2]=(c[2]*f+c[6]*h+c[10]*a+c[14])/g,b};c.transformMat3=function(b,a,c){var f=a[0],h=a[1];a=a[2];return b[0]=f*c[0]+h*c[3]+a*c[6],b[1]=f*c[1]+h*c[4]+a*c[7],b[2]=f*c[2]+h*c[5]+a*c[8],b};c.transformQuat=function(b,a,c){var f=c[0],h=c[1],g=c[2],d=a[0],
l=a[1];a=a[2];var n=h*a-g*l,e=g*d-f*a,p=f*l-h*d,k=h*p-g*e,g=g*n-f*p,f=f*e-h*n;c=2*c[3];return n*=c,e*=c,p*=c,k*=2,g*=2,f*=2,b[0]=d+n+k,b[1]=l+e+g,b[2]=a+p+f,b};c.rotateX=function(b,a,c,f){var h=[],g=[];return h[0]=a[0]-c[0],h[1]=a[1]-c[1],h[2]=a[2]-c[2],g[0]=h[0],g[1]=h[1]*Math.cos(f)-h[2]*Math.sin(f),g[2]=h[1]*Math.sin(f)+h[2]*Math.cos(f),b[0]=g[0]+c[0],b[1]=g[1]+c[1],b[2]=g[2]+c[2],b};c.rotateY=function(b,a,c,f){var h=[],g=[];return h[0]=a[0]-c[0],h[1]=a[1]-c[1],h[2]=a[2]-c[2],g[0]=h[2]*Math.sin(f)+
h[0]*Math.cos(f),g[1]=h[1],g[2]=h[2]*Math.cos(f)-h[0]*Math.sin(f),b[0]=g[0]+c[0],b[1]=g[1]+c[1],b[2]=g[2]+c[2],b};c.rotateZ=function(b,a,c,f){var h=[],g=[];return h[0]=a[0]-c[0],h[1]=a[1]-c[1],h[2]=a[2]-c[2],g[0]=h[0]*Math.cos(f)-h[1]*Math.sin(f),g[1]=h[0]*Math.sin(f)+h[1]*Math.cos(f),g[2]=h[2],b[0]=g[0]+c[0],b[1]=g[1]+c[1],b[2]=g[2]+c[2],b};c.angle=function(b,a){var c=k(b[0],b[1],b[2]),g=k(a[0],a[1],a[2]);h(c,c);h(g,g);c=f(c,g);return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=function(b){return"vec3("+
b[0]+", "+b[1]+", "+b[2]+")"};c.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]};c.equals=function(b,a){var c=b[0],f=b[1],h=b[2],g=a[0],d=a[1],l=a[2];return Math.abs(c-g)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-d)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))&&Math.abs(h-l)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(l))};var n=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);
return a["default"]=b,a}(d(0));c.sub=l;c.mul=g;c.div=b;c.dist=p;c.sqrDist=H;c.len=m;c.sqrLen=y;c.forEach=function(){var b=e();return function(a,c,f,h,g,d){var l=void 0,n=void 0;c||(c=3);f||(f=0);n=h?Math.min(h*c+f,a.length):a.length;for(l=f;l<n;l+=c)b[0]=a[l],b[1]=a[l+1],b[2]=a[l+2],g(b,b,d),a[l]=b[0],a[l+1]=b[1],a[l+2]=b[2];return a}}()},function(a,c,d){function e(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a["default"]=
b,a}function m(){var b=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function k(b,a,c){c*=.5;var h=Math.sin(c);return b[0]=h*a[0],b[1]=h*a[1],b[2]=h*a[2],b[3]=Math.cos(c),b}function l(b,a,c){var h=a[0],g=a[1],d=a[2];a=a[3];var l=c[0],e=c[1],p=c[2];c=c[3];return b[0]=h*c+a*l+g*p-d*e,b[1]=g*c+a*e+d*l-h*p,b[2]=d*c+a*p+h*e-g*l,b[3]=a*c-h*l-g*e-d*p,b}function g(b,a,c,h){var g=a[0],d=a[1],l=a[2];a=a[3];var e=c[0],k=c[1],m=c[2];c=c[3];var y=void 0,H=void 0,r=void 0,
z=void 0,A=void 0;return 0>(H=g*e+d*k+l*m+a*c)&&(H=-H,e=-e,k=-k,m=-m,c=-c),1-H>p.EPSILON?(y=Math.acos(H),r=Math.sin(y),z=Math.sin((1-h)*y)/r,A=Math.sin(h*y)/r):(z=1-h,A=h),b[0]=z*g+A*e,b[1]=z*d+A*k,b[2]=z*l+A*m,b[3]=z*a+A*c,b}function b(b,a){var c=a[0]+a[4]+a[8],h=void 0;if(0<c)h=Math.sqrt(c+1),b[3]=.5*h,h=.5/h,b[0]=(a[5]-a[7])*h,b[1]=(a[6]-a[2])*h,b[2]=(a[1]-a[3])*h;else{c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var g=(c+1)%3,d=(c+2)%3,h=Math.sqrt(a[3*c+c]-a[3*g+g]-a[3*d+d]+1);b[c]=.5*h;h=.5/h;b[3]=
(a[3*g+d]-a[3*d+g])*h;b[g]=(a[3*g+c]+a[3*c+g])*h;b[d]=(a[3*d+c]+a[3*c+d])*h}return b}Object.defineProperty(c,"__esModule",{value:!0});c.setAxes=c.sqlerp=c.rotationTo=c.equals=c.exactEquals=c.normalize=c.sqrLen=c.squaredLength=c.len=c.length=c.lerp=c.dot=c.scale=c.mul=c.add=c.set=c.copy=c.fromValues=c.clone=void 0;c.create=m;c.identity=function(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b};c.setAxisAngle=k;c.getAxisAngle=function(b,a){var c=2*Math.acos(a[3]),h=Math.sin(c/2);h>p.EPSILON?(b[0]=a[0]/h,b[1]=
a[1]/h,b[2]=a[2]/h):(b[0]=1,b[1]=0,b[2]=0);return c};c.multiply=l;c.rotateX=function(b,a,c){c*=.5;var h=a[0],g=a[1],d=a[2];a=a[3];var l=Math.sin(c);c=Math.cos(c);return b[0]=h*c+a*l,b[1]=g*c+d*l,b[2]=d*c-g*l,b[3]=a*c-h*l,b};c.rotateY=function(b,a,c){c*=.5;var h=a[0],g=a[1],d=a[2];a=a[3];var l=Math.sin(c);c=Math.cos(c);return b[0]=h*c-d*l,b[1]=g*c+a*l,b[2]=d*c+h*l,b[3]=a*c-g*l,b};c.rotateZ=function(b,a,c){c*=.5;var h=a[0],g=a[1],d=a[2];a=a[3];var l=Math.sin(c);c=Math.cos(c);return b[0]=h*c+g*l,b[1]=
g*c-h*l,b[2]=d*c+a*l,b[3]=a*c-d*l,b};c.calculateW=function(b,a){var c=a[0],h=a[1],g=a[2];return b[0]=c,b[1]=h,b[2]=g,b[3]=Math.sqrt(Math.abs(1-c*c-h*h-g*g)),b};c.slerp=g;c.random=function(b){var a=p.RANDOM(),c=p.RANDOM(),h=p.RANDOM(),g=Math.sqrt(1-a),a=Math.sqrt(a);return b[0]=g*Math.sin(2*Math.PI*c),b[1]=g*Math.cos(2*Math.PI*c),b[2]=a*Math.sin(2*Math.PI*h),b[3]=a*Math.cos(2*Math.PI*h),b};c.invert=function(b,a){var c=a[0],h=a[1],g=a[2],d=a[3],l=c*c+h*h+g*g+d*d,l=l?1/l:0;return b[0]=-c*l,b[1]=-h*l,
b[2]=-g*l,b[3]=d*l,b};c.conjugate=function(b,a){return b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b};c.fromMat3=b;c.fromEuler=function(b,a,c,h){var g=.5*Math.PI/180;a*=g;c*=g;h*=g;g=Math.sin(a);a=Math.cos(a);var d=Math.sin(c);c=Math.cos(c);var l=Math.sin(h);h=Math.cos(h);return b[0]=g*c*h-a*d*l,b[1]=a*d*h+g*c*l,b[2]=a*c*l-g*d*h,b[3]=a*c*h+g*d*l,b};c.str=function(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};var p=e(d(0)),H=e(d(5)),y=e(d(2));a=e(d(1));c.clone=a.clone;c.fromValues=a.fromValues;
c.copy=a.copy;c.set=a.set;c.add=a.add;c.mul=l;c.scale=a.scale;c.dot=a.dot;c.lerp=a.lerp;d=c.length=a.length;d=(c.len=d,c.squaredLength=a.squaredLength);var h=(c.sqrLen=d,c.normalize=a.normalize);c.exactEquals=a.exactEquals;c.equals=a.equals;c.rotationTo=function(){var b=y.create(),a=y.fromValues(1,0,0),c=y.fromValues(0,1,0);return function(g,d,l){var e=y.dot(d,l);return-.999999>e?(y.cross(b,a,d),1E-6>y.len(b)&&y.cross(b,c,d),y.normalize(b,b),k(g,b,Math.PI),g):.999999<e?(g[0]=0,g[1]=0,g[2]=0,g[3]=
1,g):(y.cross(b,d,l),g[0]=b[0],g[1]=b[1],g[2]=b[2],g[3]=1+e,h(g,g))}}();c.sqlerp=function(){var b=m(),a=m();return function(c,h,d,l,e,p){return g(b,h,e,p),g(a,d,l,p),g(c,b,a,2*p*(1-p)),c}}();c.setAxes=function(){var a=H.create();return function(c,g,d,l){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=l[0],a[4]=l[1],a[7]=l[2],a[2]=-g[0],a[5]=-g[1],a[8]=-g[2],h(c,b(c,a))}}()},function(a,c,d){function e(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,
b[13]=0,b[14]=0,b[15]=1,b}function m(b,a,c){var g=a[0],h=a[1],f=a[2],d=a[3],l=a[4],e=a[5],k=a[6],m=a[7],w=a[8],r=a[9],x=a[10],u=a[11],z=a[12],D=a[13],J=a[14];a=a[15];var R=c[0],A=c[1],aa=c[2],I=c[3];return b[0]=R*g+A*l+aa*w+I*z,b[1]=R*h+A*e+aa*r+I*D,b[2]=R*f+A*k+aa*x+I*J,b[3]=R*d+A*m+aa*u+I*a,R=c[4],A=c[5],aa=c[6],I=c[7],b[4]=R*g+A*l+aa*w+I*z,b[5]=R*h+A*e+aa*r+I*D,b[6]=R*f+A*k+aa*x+I*J,b[7]=R*d+A*m+aa*u+I*a,R=c[8],A=c[9],aa=c[10],I=c[11],b[8]=R*g+A*l+aa*w+I*z,b[9]=R*h+A*e+aa*r+I*D,b[10]=R*f+A*k+aa*
x+I*J,b[11]=R*d+A*m+aa*u+I*a,R=c[12],A=c[13],aa=c[14],I=c[15],b[12]=R*g+A*l+aa*w+I*z,b[13]=R*h+A*e+aa*r+I*D,b[14]=R*f+A*k+aa*x+I*J,b[15]=R*d+A*m+aa*u+I*a,b}function k(b,a,c){var g=a[0],h=a[1],f=a[2],d=a[3],l=g+g,e=h+h,k=f+f;a=g*l;var m=g*e,g=g*k,w=h*e,h=h*k,f=f*k,l=d*l,e=d*e,d=d*k;return b[0]=1-(w+f),b[1]=m+d,b[2]=g-e,b[3]=0,b[4]=m-d,b[5]=1-(a+f),b[6]=h+l,b[7]=0,b[8]=g+e,b[9]=h-l,b[10]=1-(a+w),b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b}function l(b,a,c){return b[0]=a[0]-c[0],b[1]=a[1]-c[1],
b[2]=a[2]-c[2],b[3]=a[3]-c[3],b[4]=a[4]-c[4],b[5]=a[5]-c[5],b[6]=a[6]-c[6],b[7]=a[7]-c[7],b[8]=a[8]-c[8],b[9]=a[9]-c[9],b[10]=a[10]-c[10],b[11]=a[11]-c[11],b[12]=a[12]-c[12],b[13]=a[13]-c[13],b[14]=a[14]-c[14],b[15]=a[15]-c[15],b}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var b=new g.ARRAY_TYPE(16);g.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0);return b[0]=1,b[5]=1,b[10]=1,b[15]=1,b};
c.clone=function(b){var a=new g.ARRAY_TYPE(16);return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};c.copy=function(b,a){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};c.fromValues=function(b,a,c,d,h,f,l,e,k,m,r,w,z,x,u,D){var ca=new g.ARRAY_TYPE(16);
return ca[0]=b,ca[1]=a,ca[2]=c,ca[3]=d,ca[4]=h,ca[5]=f,ca[6]=l,ca[7]=e,ca[8]=k,ca[9]=m,ca[10]=r,ca[11]=w,ca[12]=z,ca[13]=x,ca[14]=u,ca[15]=D,ca};c.set=function(b,a,c,g,h,f,d,l,e,k,m,w,r,x,u,z,D){return b[0]=a,b[1]=c,b[2]=g,b[3]=h,b[4]=f,b[5]=d,b[6]=l,b[7]=e,b[8]=k,b[9]=m,b[10]=w,b[11]=r,b[12]=x,b[13]=u,b[14]=z,b[15]=D,b};c.identity=e;c.transpose=function(b,a){if(b===a){var c=a[1],g=a[2],h=a[3],f=a[6],d=a[7],l=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=g;b[9]=f;b[11]=a[14];
b[12]=h;b[13]=d;b[14]=l}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};c.invert=function(b,a){var c=a[0],g=a[1],h=a[2],f=a[3],d=a[4],l=a[5],e=a[6],k=a[7],m=a[8],w=a[9],r=a[10],x=a[11],u=a[12],z=a[13],D=a[14],J=a[15],R=c*l-g*d,A=c*e-h*d,aa=c*k-f*d,I=g*e-h*l,U=g*k-f*l,K=h*k-f*e,ja=m*z-w*u,W=m*D-r*u,ka=m*J-x*u,la=w*D-r*z,Sa=w*J-x*z,Cb=r*J-x*D,ea=R*Cb-A*Sa+aa*la+
I*ka-U*W+K*ja;return ea?(ea=1/ea,b[0]=(l*Cb-e*Sa+k*la)*ea,b[1]=(h*Sa-g*Cb-f*la)*ea,b[2]=(z*K-D*U+J*I)*ea,b[3]=(r*U-w*K-x*I)*ea,b[4]=(e*ka-d*Cb-k*W)*ea,b[5]=(c*Cb-h*ka+f*W)*ea,b[6]=(D*aa-u*K-J*A)*ea,b[7]=(m*K-r*aa+x*A)*ea,b[8]=(d*Sa-l*ka+k*ja)*ea,b[9]=(g*ka-c*Sa-f*ja)*ea,b[10]=(u*U-z*aa+J*R)*ea,b[11]=(w*aa-m*U-x*R)*ea,b[12]=(l*W-d*la-e*ja)*ea,b[13]=(c*la-g*W+h*ja)*ea,b[14]=(z*A-u*I-D*R)*ea,b[15]=(m*I-w*A+r*R)*ea,b):null};c.adjoint=function(b,a){var c=a[0],g=a[1],h=a[2],f=a[3],d=a[4],l=a[5],e=a[6],
k=a[7],m=a[8],w=a[9],r=a[10],x=a[11],u=a[12],z=a[13],D=a[14],J=a[15];return b[0]=l*(r*J-x*D)-w*(e*J-k*D)+z*(e*x-k*r),b[1]=-(g*(r*J-x*D)-w*(h*J-f*D)+z*(h*x-f*r)),b[2]=g*(e*J-k*D)-l*(h*J-f*D)+z*(h*k-f*e),b[3]=-(g*(e*x-k*r)-l*(h*x-f*r)+w*(h*k-f*e)),b[4]=-(d*(r*J-x*D)-m*(e*J-k*D)+u*(e*x-k*r)),b[5]=c*(r*J-x*D)-m*(h*J-f*D)+u*(h*x-f*r),b[6]=-(c*(e*J-k*D)-d*(h*J-f*D)+u*(h*k-f*e)),b[7]=c*(e*x-k*r)-d*(h*x-f*r)+m*(h*k-f*e),b[8]=d*(w*J-x*z)-m*(l*J-k*z)+u*(l*x-k*w),b[9]=-(c*(w*J-x*z)-m*(g*J-f*z)+u*(g*x-f*w)),
b[10]=c*(l*J-k*z)-d*(g*J-f*z)+u*(g*k-f*l),b[11]=-(c*(l*x-k*w)-d*(g*x-f*w)+m*(g*k-f*l)),b[12]=-(d*(w*D-r*z)-m*(l*D-e*z)+u*(l*r-e*w)),b[13]=c*(w*D-r*z)-m*(g*D-h*z)+u*(g*r-h*w),b[14]=-(c*(l*D-e*z)-d*(g*D-h*z)+u*(g*e-h*l)),b[15]=c*(l*r-e*w)-d*(g*r-h*w)+m*(g*e-h*l),b};c.determinant=function(b){var a=b[0],c=b[1],g=b[2],h=b[3],f=b[4],d=b[5],l=b[6],e=b[7],k=b[8],m=b[9],w=b[10],r=b[11],x=b[12],u=b[13],z=b[14];b=b[15];return(a*d-c*f)*(w*b-r*z)-(a*l-g*f)*(m*b-r*u)+(a*e-h*f)*(m*z-w*u)+(c*l-g*d)*(k*b-r*x)-(c*
e-h*d)*(k*z-w*x)+(g*e-h*l)*(k*u-m*x)};c.multiply=m;c.translate=function(b,a,c){var g=c[0],h=c[1];c=c[2];var f=void 0,d=void 0,l=void 0,e=void 0,k=void 0,m=void 0,w=void 0,r=void 0,x=void 0,u=void 0,z=void 0,D=void 0;a===b?(b[12]=a[0]*g+a[4]*h+a[8]*c+a[12],b[13]=a[1]*g+a[5]*h+a[9]*c+a[13],b[14]=a[2]*g+a[6]*h+a[10]*c+a[14],b[15]=a[3]*g+a[7]*h+a[11]*c+a[15]):(f=a[0],d=a[1],l=a[2],e=a[3],k=a[4],m=a[5],w=a[6],r=a[7],x=a[8],u=a[9],z=a[10],D=a[11],b[0]=f,b[1]=d,b[2]=l,b[3]=e,b[4]=k,b[5]=m,b[6]=w,b[7]=r,
b[8]=x,b[9]=u,b[10]=z,b[11]=D,b[12]=f*g+k*h+x*c+a[12],b[13]=d*g+m*h+u*c+a[13],b[14]=l*g+w*h+z*c+a[14],b[15]=e*g+r*h+D*c+a[15]);return b};c.scale=function(b,a,c){var g=c[0],h=c[1];c=c[2];return b[0]=a[0]*g,b[1]=a[1]*g,b[2]=a[2]*g,b[3]=a[3]*g,b[4]=a[4]*h,b[5]=a[5]*h,b[6]=a[6]*h,b[7]=a[7]*h,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};c.rotate=function(b,a,c,d){var h=d[0],f=d[1];d=d[2];var l=Math.sqrt(h*h+f*f+d*d),e=void 0,k=void 0,m=void 0,r=
void 0,w=void 0,z=void 0,x=void 0,u=void 0,D=void 0,ca=void 0,J=void 0,R=void 0,A=void 0,aa=void 0,I=void 0,U=void 0,K=void 0,ja=void 0,W=void 0,ka=void 0,la=void 0,Sa=void 0,k=e=void 0;if(l<g.EPSILON)return null;h*=l=1/l;f*=l;d*=l;e=Math.sin(c);k=Math.cos(c);m=1-k;r=a[0];w=a[1];z=a[2];x=a[3];u=a[4];D=a[5];ca=a[6];J=a[7];R=a[8];A=a[9];aa=a[10];I=a[11];U=h*h*m+k;K=f*h*m+d*e;ja=d*h*m-f*e;W=h*f*m-d*e;ka=f*f*m+k;la=d*f*m+h*e;Sa=h*d*m+f*e;e=f*d*m-h*e;k=d*d*m+k;b[0]=r*U+u*K+R*ja;b[1]=w*U+D*K+A*ja;b[2]=
z*U+ca*K+aa*ja;b[3]=x*U+J*K+I*ja;b[4]=r*W+u*ka+R*la;b[5]=w*W+D*ka+A*la;b[6]=z*W+ca*ka+aa*la;b[7]=x*W+J*ka+I*la;b[8]=r*Sa+u*e+R*k;b[9]=w*Sa+D*e+A*k;b[10]=z*Sa+ca*e+aa*k;b[11]=x*Sa+J*e+I*k;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};c.rotateX=function(b,a,c){var g=Math.sin(c);c=Math.cos(c);var h=a[4],f=a[5],d=a[6],l=a[7],e=a[8],k=a[9],m=a[10],w=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[4]=h*c+e*g,b[5]=f*c+k*
g,b[6]=d*c+m*g,b[7]=l*c+w*g,b[8]=e*c-h*g,b[9]=k*c-f*g,b[10]=m*c-d*g,b[11]=w*c-l*g,b};c.rotateY=function(b,a,c){var g=Math.sin(c);c=Math.cos(c);var h=a[0],f=a[1],d=a[2],l=a[3],e=a[8],k=a[9],m=a[10],w=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[0]=h*c-e*g,b[1]=f*c-k*g,b[2]=d*c-m*g,b[3]=l*c-w*g,b[8]=h*g+e*c,b[9]=f*g+k*c,b[10]=d*g+m*c,b[11]=l*g+w*c,b};c.rotateZ=function(b,a,c){var g=Math.sin(c);c=Math.cos(c);var h=a[0],f=a[1],d=a[2],
l=a[3],e=a[4],k=a[5],m=a[6],w=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b[0]=h*c+e*g,b[1]=f*c+k*g,b[2]=d*c+m*g,b[3]=l*c+w*g,b[4]=e*c-h*g,b[5]=k*c-f*g,b[6]=m*c-d*g,b[7]=w*c-l*g,b};c.fromTranslation=function(b,a){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=a[0],b[13]=a[1],b[14]=a[2],b[15]=1,b};c.fromScaling=function(b,a){return b[0]=a[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a[1],
b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=a[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromRotation=function(b,a,c){var d=c[0],h=c[1];c=c[2];var f=Math.sqrt(d*d+h*h+c*c),l=void 0,e=void 0,k=void 0;return f<g.EPSILON?null:(d*=f=1/f,h*=f,c*=f,l=Math.sin(a),e=Math.cos(a),k=1-e,b[0]=d*d*k+e,b[1]=h*d*k+c*l,b[2]=c*d*k-h*l,b[3]=0,b[4]=d*h*k-c*l,b[5]=h*h*k+e,b[6]=c*h*k+d*l,b[7]=0,b[8]=d*c*k+h*l,b[9]=h*c*k-d*l,b[10]=c*c*k+e,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)};c.fromXRotation=function(b,a){var c=Math.sin(a),
g=Math.cos(a);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=g,b[6]=c,b[7]=0,b[8]=0,b[9]=-c,b[10]=g,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromYRotation=function(b,a){var c=Math.sin(a),g=Math.cos(a);return b[0]=g,b[1]=0,b[2]=-c,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=c,b[9]=0,b[10]=g,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.fromZRotation=function(b,a){var c=Math.sin(a),g=Math.cos(a);return b[0]=g,b[1]=c,b[2]=0,b[3]=0,b[4]=-c,b[5]=g,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=
0,b[14]=0,b[15]=1,b};c.fromRotationTranslation=k;c.fromQuat2=function(b,a){var c=new g.ARRAY_TYPE(3),d=-a[0],h=-a[1],f=-a[2],l=a[3],e=a[4],m=a[5],v=a[6],r=a[7],w=d*d+h*h+f*f+l*l;0<w?(c[0]=2*(e*l+r*d+m*f-v*h)/w,c[1]=2*(m*l+r*h+v*d-e*f)/w,c[2]=2*(v*l+r*f+e*h-m*d)/w):(c[0]=2*(e*l+r*d+m*f-v*h),c[1]=2*(m*l+r*h+v*d-e*f),c[2]=2*(v*l+r*f+e*h-m*d));return k(b,a,c),b};c.getTranslation=function(b,a){return b[0]=a[12],b[1]=a[13],b[2]=a[14],b};c.getScaling=function(b,a){var c=a[0],g=a[1],h=a[2],f=a[4],d=a[5],
l=a[6],e=a[8],k=a[9],m=a[10];return b[0]=Math.sqrt(c*c+g*g+h*h),b[1]=Math.sqrt(f*f+d*d+l*l),b[2]=Math.sqrt(e*e+k*k+m*m),b};c.getRotation=function(b,a){var c=a[0]+a[5]+a[10],g=0;0<c?(g=2*Math.sqrt(c+1),b[3]=.25*g,b[0]=(a[6]-a[9])/g,b[1]=(a[8]-a[2])/g,b[2]=(a[1]-a[4])/g):a[0]>a[5]&&a[0]>a[10]?(g=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/g,b[0]=.25*g,b[1]=(a[1]+a[4])/g,b[2]=(a[8]+a[2])/g):a[5]>a[10]?(g=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/g,b[0]=(a[1]+a[4])/g,b[1]=.25*g,b[2]=(a[6]+a[9])/
g):(g=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/g,b[0]=(a[8]+a[2])/g,b[1]=(a[6]+a[9])/g,b[2]=.25*g);return b};c.fromRotationTranslationScale=function(b,a,c,g){var h=a[0],f=a[1],d=a[2],l=a[3],e=h+h,k=f+f,m=d+d;a=h*e;var w=h*k,h=h*m,r=f*k,f=f*m,d=d*m,e=l*e,k=l*k,l=l*m,m=g[0],x=g[1];g=g[2];return b[0]=(1-(r+d))*m,b[1]=(w+l)*m,b[2]=(h-k)*m,b[3]=0,b[4]=(w-l)*x,b[5]=(1-(a+d))*x,b[6]=(f+e)*x,b[7]=0,b[8]=(h+k)*g,b[9]=(f-e)*g,b[10]=(1-(a+r))*g,b[11]=0,b[12]=c[0],b[13]=c[1],b[14]=c[2],b[15]=1,b};c.fromRotationTranslationScaleOrigin=
function(b,a,c,g,h){var f=a[0],d=a[1],l=a[2],e=a[3],k=f+f,m=d+d,w=l+l;a=f*k;var r=f*m,x=f*w,f=d*m,d=d*w,u=l*w,l=e*k,m=e*m,z=e*w,D=g[0],J=g[1],w=g[2];g=h[0];e=h[1];h=h[2];var k=(1-(f+u))*D,R=(r+z)*D,D=(x-m)*D,r=(r-z)*J,u=(1-(a+u))*J,J=(d+l)*J,x=(x+m)*w,d=(d-l)*w;a=(1-(a+f))*w;return b[0]=k,b[1]=R,b[2]=D,b[3]=0,b[4]=r,b[5]=u,b[6]=J,b[7]=0,b[8]=x,b[9]=d,b[10]=a,b[11]=0,b[12]=c[0]+g-(k*g+r*e+x*h),b[13]=c[1]+e-(R*g+u*e+d*h),b[14]=c[2]+h-(D*g+J*e+a*h),b[15]=1,b};c.fromQuat=function(b,a){var c=a[0],g=a[1],
h=a[2],f=a[3],d=c+c,l=g+g,e=h+h,c=c*d,k=g*d,g=g*l,m=h*d,w=h*l,h=h*e,d=f*d,l=f*l,f=f*e;return b[0]=1-g-h,b[1]=k+f,b[2]=m-l,b[3]=0,b[4]=k-f,b[5]=1-c-h,b[6]=w+d,b[7]=0,b[8]=m+l,b[9]=w-d,b[10]=1-c-g,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b};c.frustum=function(b,a,c,g,h,f,d){var l=1/(c-a),e=1/(h-g),k=1/(f-d);return b[0]=2*f*l,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=2*f*e,b[6]=0,b[7]=0,b[8]=(c+a)*l,b[9]=(h+g)*e,b[10]=(d+f)*k,b[11]=-1,b[12]=0,b[13]=0,b[14]=d*f*2*k,b[15]=0,b};c.perspective=function(b,a,c,g,h){a=
1/Math.tan(a/2);var f=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=h&&h!==1/0?(f=1/(g-h),b[10]=(h+g)*f,b[14]=2*h*g*f):(b[10]=-1,b[14]=-2*g);return b};c.perspectiveFromFieldOfView=function(b,a,c,g){var h=Math.tan(a.upDegrees*Math.PI/180),f=Math.tan(a.downDegrees*Math.PI/180),d=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var l=2/(d+a),e=2/(h+f);return b[0]=l,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=e,b[6]=
0,b[7]=0,b[8]=-(d-a)*l*.5,b[9]=(h-f)*e*.5,b[10]=g/(c-g),b[11]=-1,b[12]=0,b[13]=0,b[14]=g*c/(c-g),b[15]=0,b};c.ortho=function(b,a,c,g,h,f,d){var l=1/(a-c),e=1/(g-h),k=1/(f-d);return b[0]=-2*l,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*e,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*k,b[11]=0,b[12]=(a+c)*l,b[13]=(h+g)*e,b[14]=(d+f)*k,b[15]=1,b};c.lookAt=function(b,a,c,d){var h=void 0,f=void 0,l=void 0,k=void 0,m=void 0,v=void 0,r=void 0,w=void 0,z=void 0,x=void 0,u=a[0],oa=a[1];a=a[2];l=d[0];k=d[1];d=d[2];r=c[0];w=
c[1];c=c[2];if(Math.abs(u-r)<g.EPSILON&&Math.abs(oa-w)<g.EPSILON&&Math.abs(a-c)<g.EPSILON)return e(b);r=u-r;w=oa-w;z=a-c;x=1/Math.sqrt(r*r+w*w+z*z);h=k*(z*=x)-d*(w*=x);f=d*(r*=x)-l*z;l=l*w-k*r;(x=Math.sqrt(h*h+f*f+l*l))?(h*=x=1/x,f*=x,l*=x):(h=0,f=0,l=0);k=w*l-z*f;m=z*h-r*l;v=r*f-w*h;(x=Math.sqrt(k*k+m*m+v*v))?(k*=x=1/x,m*=x,v*=x):(k=0,m=0,v=0);return b[0]=h,b[1]=k,b[2]=r,b[3]=0,b[4]=f,b[5]=m,b[6]=w,b[7]=0,b[8]=l,b[9]=v,b[10]=z,b[11]=0,b[12]=-(h*u+f*oa+l*a),b[13]=-(k*u+m*oa+v*a),b[14]=-(r*u+w*oa+
z*a),b[15]=1,b};c.targetTo=function(b,a,c,g){var h=a[0],f=a[1];a=a[2];var d=g[0],l=g[1],e=g[2];g=h-c[0];var k=f-c[1];c=a-c[2];var m=g*g+k*k+c*c;0<m&&(m=1/Math.sqrt(m),g*=m,k*=m,c*=m);var w=l*c-e*k,e=e*g-d*c,d=d*k-l*g;0<(m=w*w+e*e+d*d)&&(m=1/Math.sqrt(m),w*=m,e*=m,d*=m);return b[0]=w,b[1]=e,b[2]=d,b[3]=0,b[4]=k*d-c*e,b[5]=c*w-g*d,b[6]=g*e-k*w,b[7]=0,b[8]=g,b[9]=k,b[10]=c,b[11]=0,b[12]=h,b[13]=f,b[14]=a,b[15]=1,b};c.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+
", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};c.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};c.add=function(b,a,c){return b[0]=a[0]+c[0],b[1]=a[1]+c[1],b[2]=a[2]+c[2],
b[3]=a[3]+c[3],b[4]=a[4]+c[4],b[5]=a[5]+c[5],b[6]=a[6]+c[6],b[7]=a[7]+c[7],b[8]=a[8]+c[8],b[9]=a[9]+c[9],b[10]=a[10]+c[10],b[11]=a[11]+c[11],b[12]=a[12]+c[12],b[13]=a[13]+c[13],b[14]=a[14]+c[14],b[15]=a[15]+c[15],b};c.subtract=l;c.multiplyScalar=function(b,a,c){return b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c,b[3]=a[3]*c,b[4]=a[4]*c,b[5]=a[5]*c,b[6]=a[6]*c,b[7]=a[7]*c,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12]*c,b[13]=a[13]*c,b[14]=a[14]*c,b[15]=a[15]*c,b};c.multiplyScalarAndAdd=function(b,
a,c,g){return b[0]=a[0]+c[0]*g,b[1]=a[1]+c[1]*g,b[2]=a[2]+c[2]*g,b[3]=a[3]+c[3]*g,b[4]=a[4]+c[4]*g,b[5]=a[5]+c[5]*g,b[6]=a[6]+c[6]*g,b[7]=a[7]+c[7]*g,b[8]=a[8]+c[8]*g,b[9]=a[9]+c[9]*g,b[10]=a[10]+c[10]*g,b[11]=a[11]+c[11]*g,b[12]=a[12]+c[12]*g,b[13]=a[13]+c[13]*g,b[14]=a[14]+c[14]*g,b[15]=a[15]+c[15]*g,b};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&
a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]};c.equals=function(a,c){var d=a[0],l=a[1],h=a[2],f=a[3],e=a[4],k=a[5],m=a[6],v=a[7],r=a[8],w=a[9],z=a[10],x=a[11],u=a[12],D=a[13],ca=a[14],J=a[15],R=c[0],A=c[1],aa=c[2],I=c[3],U=c[4],K=c[5],ja=c[6],W=c[7],ka=c[8],la=c[9],Sa=c[10],Cb=c[11],ea=c[12],Na=c[13],V=c[14],P=c[15];return Math.abs(d-R)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(l-A)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-aa)<=g.EPSILON*Math.max(1,Math.abs(h),
Math.abs(aa))&&Math.abs(f-I)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(e-U)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(U))&&Math.abs(k-K)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(K))&&Math.abs(m-ja)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(ja))&&Math.abs(v-W)<=g.EPSILON*Math.max(1,Math.abs(v),Math.abs(W))&&Math.abs(r-ka)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(ka))&&Math.abs(w-la)<=g.EPSILON*Math.max(1,Math.abs(w),Math.abs(la))&&Math.abs(z-Sa)<=g.EPSILON*Math.max(1,Math.abs(z),
Math.abs(Sa))&&Math.abs(x-Cb)<=g.EPSILON*Math.max(1,Math.abs(x),Math.abs(Cb))&&Math.abs(u-ea)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(ea))&&Math.abs(D-Na)<=g.EPSILON*Math.max(1,Math.abs(D),Math.abs(Na))&&Math.abs(ca-V)<=g.EPSILON*Math.max(1,Math.abs(ca),Math.abs(V))&&Math.abs(J-P)<=g.EPSILON*Math.max(1,Math.abs(J),Math.abs(P))};var g=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&(c[g]=a[g]);return c["default"]=a,c}(d(0));c.mul=
m;c.sub=l},function(a,c,d){function e(a,c,b){var d=c[0],k=c[1],m=c[2],h=c[3],f=c[4],n=c[5],q=c[6],t=c[7];c=c[8];var v=b[0],r=b[1],w=b[2],z=b[3],x=b[4],u=b[5],D=b[6],ca=b[7];b=b[8];return a[0]=v*d+r*h+w*q,a[1]=v*k+r*f+w*t,a[2]=v*m+r*n+w*c,a[3]=z*d+x*h+u*q,a[4]=z*k+x*f+u*t,a[5]=z*m+x*n+u*c,a[6]=D*d+ca*h+b*q,a[7]=D*k+ca*f+b*t,a[8]=D*m+ca*n+b*c,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=c[5]-b[5],a[6]=c[6]-b[6],a[7]=c[7]-b[7],a[8]=c[8]-b[8],
a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new k.ARRAY_TYPE(9);k.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};c.fromMat4=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[4],a[4]=c[5],a[5]=c[6],a[6]=c[8],a[7]=c[9],a[8]=c[10],a};c.clone=function(a){var c=new k.ARRAY_TYPE(9);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c};c.copy=function(a,
c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromValues=function(a,c,b,d,e,m,h,f,n){var q=new k.ARRAY_TYPE(9);return q[0]=a,q[1]=c,q[2]=b,q[3]=d,q[4]=e,q[5]=m,q[6]=h,q[7]=f,q[8]=n,q};c.set=function(a,c,b,d,e,k,h,f,n,m){return a[0]=c,a[1]=b,a[2]=d,a[3]=e,a[4]=k,a[5]=h,a[6]=f,a[7]=n,a[8]=m,a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.transpose=function(a,c){if(a===c){var b=c[1],d=c[2],
e=c[5];a[1]=c[3];a[2]=c[6];a[3]=b;a[5]=c[7];a[6]=d;a[7]=e}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a};c.invert=function(a,c){var b=c[0],d=c[1],e=c[2],k=c[3],h=c[4],f=c[5],n=c[6],m=c[7],t=c[8],v=t*h-f*m,r=-t*k+f*n,w=m*k-h*n,z=b*v+d*r+e*w;return z?(z=1/z,a[0]=v*z,a[1]=(-t*d+e*m)*z,a[2]=(f*d-e*h)*z,a[3]=r*z,a[4]=(t*b-e*n)*z,a[5]=(-f*b+e*k)*z,a[6]=w*z,a[7]=(-m*b+d*n)*z,a[8]=(h*b-d*k)*z,a):null};c.adjoint=function(a,c){var b=c[0],d=c[1],e=c[2],
k=c[3],h=c[4],f=c[5],n=c[6],m=c[7],t=c[8];return a[0]=h*t-f*m,a[1]=e*m-d*t,a[2]=d*f-e*h,a[3]=f*n-k*t,a[4]=b*t-e*n,a[5]=e*k-b*f,a[6]=k*m-h*n,a[7]=d*n-b*m,a[8]=b*h-d*k,a};c.determinant=function(a){var c=a[3],b=a[4],d=a[5],e=a[6],k=a[7],h=a[8];return a[0]*(h*b-d*k)+a[1]*(-h*c+d*e)+a[2]*(k*c-b*e)};c.multiply=e;c.translate=function(a,c,b){var d=c[0],e=c[1],k=c[2],h=c[3],f=c[4],n=c[5],m=c[6],t=c[7];c=c[8];var v=b[0];b=b[1];return a[0]=d,a[1]=e,a[2]=k,a[3]=h,a[4]=f,a[5]=n,a[6]=v*d+b*h+m,a[7]=v*e+b*f+t,a[8]=
v*k+b*n+c,a};c.rotate=function(a,c,b){var d=c[0],e=c[1],k=c[2],h=c[3],f=c[4],n=c[5],m=c[6],t=c[7];c=c[8];var v=Math.sin(b);b=Math.cos(b);return a[0]=b*d+v*h,a[1]=b*e+v*f,a[2]=b*k+v*n,a[3]=b*h-v*d,a[4]=b*f-v*e,a[5]=b*n-v*k,a[6]=m,a[7]=t,a[8]=c,a};c.scale=function(a,c,b){var d=b[0];b=b[1];return a[0]=d*c[0],a[1]=d*c[1],a[2]=d*c[2],a[3]=b*c[3],a[4]=b*c[4],a[5]=b*c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a};c.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=c[0],a[7]=c[1],
a[8]=1,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=0,a[3]=-b,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=0,a[4]=c[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};c.fromMat2d=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=0,a[3]=c[2],a[4]=c[3],a[5]=0,a[6]=c[4],a[7]=c[5],a[8]=1,a};c.fromQuat=function(a,c){var b=c[0],d=c[1],e=c[2],k=c[3],h=b+b,f=d+d,n=e+e,b=b*h,m=d*h,d=d*f,t=e*h,v=e*f,e=e*n,h=k*h,f=k*f,k=k*n;return a[0]=
1-d-e,a[3]=m-k,a[6]=t+f,a[1]=m+k,a[4]=1-b-e,a[7]=v-h,a[2]=t-f,a[5]=v+h,a[8]=1-b-d,a};c.normalFromMat4=function(a,c){var b=c[0],d=c[1],e=c[2],k=c[3],h=c[4],f=c[5],n=c[6],m=c[7],t=c[8],v=c[9],r=c[10],w=c[11],z=c[12],x=c[13],u=c[14],D=c[15],ca=b*f-d*h,J=b*n-e*h,R=b*m-k*h,A=d*n-e*f,aa=d*m-k*f,I=e*m-k*n,U=t*x-v*z,K=t*u-r*z,t=t*D-w*z,ja=v*u-r*x,v=v*D-w*x,r=r*D-w*u;return(w=ca*r-J*v+R*ja+A*t-aa*K+I*U)?(w=1/w,a[0]=(f*r-n*v+m*ja)*w,a[1]=(n*t-h*r-m*K)*w,a[2]=(h*v-f*t+m*U)*w,a[3]=(e*v-d*r-k*ja)*w,a[4]=(b*r-
e*t+k*K)*w,a[5]=(d*t-b*v-k*U)*w,a[6]=(x*I-u*aa+D*A)*w,a[7]=(u*R-z*I-D*J)*w,a[8]=(z*aa-x*R+D*ca)*w,a):null};c.projection=function(a,c,b){return a[0]=2/c,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/b,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};c.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],
2)+Math.pow(a[8],2))};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a[6]=c[6]+b[6],a[7]=c[7]+b[7],a[8]=c[8]+b[8],a};c.subtract=m;c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a[6]=c[6]*b,a[7]=c[7]*b,a[8]=c[8]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*
d,a[6]=c[6]+b[6]*d,a[7]=c[7]+b[7]*d,a[8]=c[8]+b[8]*d,a};c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]};c.equals=function(a,c){var b=a[0],d=a[1],e=a[2],m=a[3],h=a[4],f=a[5],n=a[6],q=a[7],t=a[8],v=c[0],r=c[1],w=c[2],z=c[3],x=c[4],u=c[5],D=c[6],ca=c[7],J=c[8];return Math.abs(b-v)<=k.EPSILON*Math.max(1,Math.abs(b),Math.abs(v))&&Math.abs(d-r)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(r))&&Math.abs(e-
w)<=k.EPSILON*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(m-z)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(h-x)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(f-u)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(n-D)<=k.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(q-ca)<=k.EPSILON*Math.max(1,Math.abs(q),Math.abs(ca))&&Math.abs(t-J)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(J))};var k=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=e;c.sub=m},function(a,c,d){function e(){var a=new y.ARRAY_TYPE(2);return y.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0),a}function m(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function k(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a}function l(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a}function g(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)}function b(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d}function p(a){var b=a[0];a=a[1];
return Math.sqrt(b*b+a*a)}function r(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(c,"__esModule",{value:!0});c.forEach=c.sqrLen=c.sqrDist=c.dist=c.div=c.mul=c.sub=c.len=void 0;c.create=e;c.clone=function(a){var b=new y.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b};c.fromValues=function(a,b){var c=new y.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c};c.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a};c.set=function(a,b,c){return a[0]=b,a[1]=c,a};c.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+
c[1],a};c.subtract=m;c.multiply=k;c.divide=l;c.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a};c.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a};c.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a};c.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};c.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a};c.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};c.scaleAndAdd=
function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a};c.distance=g;c.squaredDistance=b;c.length=p;c.squaredLength=r;c.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};c.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a};c.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};c.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=b,a};c.lerp=function(a,b,c,d){var g=
b[0];b=b[1];return a[0]=g+d*(c[0]-g),a[1]=b+d*(c[1]-b),a};c.random=function(a,b){b=b||1;var c=2*y.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};c.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a};c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*b+c[5],a};c.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a};c.transformMat4=function(a,
b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a};c.rotate=function(a,b,c,d){var g=b[0]-c[0];b=b[1]-c[1];var e=Math.sin(d);d=Math.cos(d);return a[0]=g*d-b*e+c[0],a[1]=g*e+b*d+c[1],a};c.angle=function(a,b){var c=a[0],d=a[1],g=b[0],e=b[1],l=c*c+d*d;0<l&&(l=1/Math.sqrt(l));var k=g*g+e*e;0<k&&(k=1/Math.sqrt(k));c=(c*g+d*e)*l*k;return 1<c?0:-1>c?Math.PI:Math.acos(c)};c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===
b[1]};c.equals=function(a,b){var c=a[0],d=a[1],g=b[0],e=b[1];return Math.abs(c-g)<=y.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(d-e)<=y.EPSILON*Math.max(1,Math.abs(d),Math.abs(e))};var y=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(d(0));c.len=p;c.sub=m;c.mul=k;c.div=l;c.dist=g;c.sqrDist=b;c.sqrLen=r;c.forEach=function(){var a=e();return function(b,c,d,g,e,l){var k=void 0,m=void 0;
c||(c=2);d||(d=0);m=g?Math.min(g*c+d,b.length):b.length;for(k=d;k<m;k+=c)a[0]=b[k],a[1]=b[k+1],e(a,a,l),b[k]=a[0],b[k+1]=a[1];return b}}()},function(a,c,d){function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function m(a,b,c){var d=.5*c[0],g=.5*c[1];c=.5*c[2];var e=b[0],l=b[1],k=b[2];b=b[3];return a[0]=e,a[1]=l,a[2]=k,a[3]=b,a[4]=d*b+g*k-c*l,a[5]=g*b+c*e-d*k,a[6]=c*b+d*l-g*e,a[7]=-d*e-g*l-c*k,a}
function k(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a}function l(a,b,c){var d=b[0],g=b[1],e=b[2],l=b[3],k=c[4],m=c[5],p=c[6],u=c[7],r=b[4],z=b[5],y=b[6];b=b[7];var D=c[0],A=c[1],H=c[2];c=c[3];return a[0]=d*c+l*D+g*H-e*A,a[1]=g*c+l*A+e*D-d*H,a[2]=e*c+l*H+d*A-g*D,a[3]=l*c-d*D-g*A-e*H,a[4]=d*u+l*k+g*p-e*m+r*c+b*D+z*H-y*A,a[5]=g*u+l*m+e*k-d*p+z*c+b*A+y*D-r*H,a[6]=e*u+l*p+d*m-g*k+y*c+b*H+r*A-z*D,a[7]=l*u-d*k-g*m-e*p+b*c-r*D-z*A-y*H,a}Object.defineProperty(c,
"__esModule",{value:!0});c.sqrLen=c.squaredLength=c.len=c.length=c.dot=c.mul=c.setReal=c.getReal=void 0;c.create=function(){var a=new g.ARRAY_TYPE(8);g.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);return a[3]=1,a};c.clone=function(a){var b=new g.ARRAY_TYPE(8);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b};c.fromValues=function(a,b,c,d,e,l,k,m){var p=new g.ARRAY_TYPE(8);return p[0]=a,p[1]=b,p[2]=c,p[3]=d,p[4]=e,p[5]=l,p[6]=
k,p[7]=m,p};c.fromRotationTranslationValues=function(a,b,c,d,e,l,k){var m=new g.ARRAY_TYPE(8);m[0]=a;m[1]=b;m[2]=c;m[3]=d;e*=.5;l*=.5;k*=.5;return m[4]=e*d+l*c-k*b,m[5]=l*d+k*a-e*c,m[6]=k*d+e*b-l*a,m[7]=-e*a-l*b-k*c,m};c.fromRotationTranslation=m;c.fromTranslation=function(a,b){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=.5*b[0],a[5]=.5*b[1],a[6]=.5*b[2],a[7]=0,a};c.fromRotation=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};c.fromMat4=function(a,c){var d=
b.create();p.getRotation(d,c);var e=new g.ARRAY_TYPE(3);return p.getTranslation(e,c),m(a,d,e),a};c.copy=k;c.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};c.set=function(a,b,c,d,g,e,l,k,m){return a[0]=b,a[1]=c,a[2]=d,a[3]=g,a[4]=e,a[5]=l,a[6]=k,a[7]=m,a};c.getDual=function(a,b){return a[0]=b[4],a[1]=b[5],a[2]=b[6],a[3]=b[7],a};c.setDual=function(a,b){return a[4]=b[0],a[5]=b[1],a[6]=b[2],a[7]=b[3],a};c.getTranslation=function(a,b){var c=b[4],d=b[5],g=b[6],e=
b[7],l=-b[0],k=-b[1],m=-b[2],p=b[3];return a[0]=2*(c*p+e*l+d*m-g*k),a[1]=2*(d*p+e*k+g*l-c*m),a[2]=2*(g*p+e*m+c*k-d*l),a};c.translate=function(a,b,c){var d=b[0],g=b[1],e=b[2],l=b[3],k=.5*c[0],m=.5*c[1];c=.5*c[2];var p=b[4],u=b[5],r=b[6];b=b[7];return a[0]=d,a[1]=g,a[2]=e,a[3]=l,a[4]=l*k+g*c-e*m+p,a[5]=l*m+e*k-d*c+u,a[6]=l*c+d*m-g*k+r,a[7]=-d*k-g*m-e*c+b,a};c.rotateX=function(a,c,d){var g=-c[0],e=-c[1],l=-c[2],k=c[3],m=c[4],p=c[5],r=c[6],u=c[7],z=m*k+u*g+p*l-r*e,y=p*k+u*e+r*g-m*l,D=r*k+u*l+m*e-p*g,
m=u*k-m*g-p*e-r*l;return b.rotateX(a,c,d),g=a[0],e=a[1],l=a[2],k=a[3],a[4]=z*k+m*g+y*l-D*e,a[5]=y*k+m*e+D*g-z*l,a[6]=D*k+m*l+z*e-y*g,a[7]=m*k-z*g-y*e-D*l,a};c.rotateY=function(a,c,d){var g=-c[0],e=-c[1],l=-c[2],k=c[3],m=c[4],p=c[5],r=c[6],u=c[7],z=m*k+u*g+p*l-r*e,y=p*k+u*e+r*g-m*l,D=r*k+u*l+m*e-p*g,m=u*k-m*g-p*e-r*l;return b.rotateY(a,c,d),g=a[0],e=a[1],l=a[2],k=a[3],a[4]=z*k+m*g+y*l-D*e,a[5]=y*k+m*e+D*g-z*l,a[6]=D*k+m*l+z*e-y*g,a[7]=m*k-z*g-y*e-D*l,a};c.rotateZ=function(a,c,d){var g=-c[0],e=-c[1],
l=-c[2],k=c[3],m=c[4],p=c[5],r=c[6],u=c[7],z=m*k+u*g+p*l-r*e,y=p*k+u*e+r*g-m*l,D=r*k+u*l+m*e-p*g,m=u*k-m*g-p*e-r*l;return b.rotateZ(a,c,d),g=a[0],e=a[1],l=a[2],k=a[3],a[4]=z*k+m*g+y*l-D*e,a[5]=y*k+m*e+D*g-z*l,a[6]=D*k+m*l+z*e-y*g,a[7]=m*k-z*g-y*e-D*l,a};c.rotateByQuatAppend=function(a,b,c){var d=c[0],g=c[1],e=c[2];c=c[3];var l=b[0],k=b[1],m=b[2],p=b[3];return a[0]=l*c+p*d+k*e-m*g,a[1]=k*c+p*g+m*d-l*e,a[2]=m*c+p*e+l*g-k*d,a[3]=p*c-l*d-k*g-m*e,l=b[4],k=b[5],m=b[6],p=b[7],a[4]=l*c+p*d+k*e-m*g,a[5]=k*
c+p*g+m*d-l*e,a[6]=m*c+p*e+l*g-k*d,a[7]=p*c-l*d-k*g-m*e,a};c.rotateByQuatPrepend=function(a,b,c){var d=b[0],g=b[1],e=b[2];b=b[3];var l=c[0],k=c[1],m=c[2],p=c[3];return a[0]=d*p+b*l+g*m-e*k,a[1]=g*p+b*k+e*l-d*m,a[2]=e*p+b*m+d*k-g*l,a[3]=b*p-d*l-g*k-e*m,l=c[4],k=c[5],m=c[6],p=c[7],a[4]=d*p+b*l+g*m-e*k,a[5]=g*p+b*k+e*l-d*m,a[6]=e*p+b*m+d*k-g*l,a[7]=b*p-d*l-g*k-e*m,a};c.rotateAroundAxis=function(a,b,c,d){if(Math.abs(d)<g.EPSILON)return k(a,b);var e=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);d*=.5;var l=
Math.sin(d),m=l*c[0]/e,p=l*c[1]/e;c=l*c[2]/e;d=Math.cos(d);var e=b[0],l=b[1],r=b[2],x=b[3];a[0]=e*d+x*m+l*c-r*p;a[1]=l*d+x*p+r*m-e*c;a[2]=r*d+x*c+e*p-l*m;a[3]=x*d-e*m-l*p-r*c;e=b[4];l=b[5];r=b[6];b=b[7];return a[4]=e*d+b*m+l*c-r*p,a[5]=l*d+b*p+r*m-e*c,a[6]=r*d+b*c+e*p-l*m,a[7]=b*d-e*m-l*p-r*c,a};c.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a};c.multiply=l;c.scale=function(a,b,c){return a[0]=b[0]*
c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a};c.lerp=function(a,b,c,d){var g=1-d;0>r(b,c)&&(d=-d);return a[0]=b[0]*g+c[0]*d,a[1]=b[1]*g+c[1]*d,a[2]=b[2]*g+c[2]*d,a[3]=b[3]*g+c[3]*d,a[4]=b[4]*g+c[4]*d,a[5]=b[5]*g+c[5]*d,a[6]=b[6]*g+c[6]*d,a[7]=b[7]*g+c[7]*d,a};c.invert=function(a,b){var c=y(b);return a[0]=-b[0]/c,a[1]=-b[1]/c,a[2]=-b[2]/c,a[3]=b[3]/c,a[4]=-b[4]/c,a[5]=-b[5]/c,a[6]=-b[6]/c,a[7]=b[7]/c,a};c.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],
a[2]=-b[2],a[3]=b[3],a[4]=-b[4],a[5]=-b[5],a[6]=-b[6],a[7]=b[7],a};c.normalize=function(a,b){var c=y(b);if(0<c){var c=Math.sqrt(c),d=b[0]/c,g=b[1]/c,e=b[2]/c,l=b[3]/c,k=b[4],m=b[5],p=b[6],u=b[7],r=d*k+g*m+e*p+l*u;a[0]=d;a[1]=g;a[2]=e;a[3]=l;a[4]=(k-d*r)/c;a[5]=(m-g*r)/c;a[6]=(p-e*r)/c;a[7]=(u-l*r)/c}return a};c.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===
b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};c.equals=function(a,b){var c=a[0],d=a[1],e=a[2],l=a[3],k=a[4],m=a[5],p=a[6],r=a[7],u=b[0],z=b[1],y=b[2],D=b[3],H=b[4],A=b[5],aa=b[6],I=b[7];return Math.abs(c-u)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(u))&&Math.abs(d-z)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(e-y)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(l-D)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(k-H)<=g.EPSILON*Math.max(1,Math.abs(k),
Math.abs(H))&&Math.abs(m-A)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(p-aa)<=g.EPSILON*Math.max(1,Math.abs(p),Math.abs(aa))&&Math.abs(r-I)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(I))};var g=e(d(0)),b=e(d(3)),p=e(d(4));c.getReal=b.copy;c.setReal=b.copy;c.mul=l;var r=c.dot=b.dot;a=c.length=b.length;var y=(c.len=a,c.squaredLength=b.squaredLength);c.sqrLen=y},function(a,c,d){function e(a,c,b){var d=c[0],k=c[1],m=c[2],h=c[3],f=c[4];c=c[5];var n=b[0],q=b[1],t=b[2],r=b[3],z=b[4];b=b[5];
return a[0]=d*n+m*q,a[1]=k*n+h*q,a[2]=d*t+m*r,a[3]=k*t+h*r,a[4]=d*z+m*b+f,a[5]=k*z+h*b+c,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a[4]=c[4]-b[4],a[5]=c[5]-b[5],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new k.ARRAY_TYPE(6);k.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=new k.ARRAY_TYPE(6);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=
a[4],c[5]=a[5],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};c.fromValues=function(a,c,b,d,e,m){var h=new k.ARRAY_TYPE(6);return h[0]=a,h[1]=c,h[2]=b,h[3]=d,h[4]=e,h[5]=m,h};c.set=function(a,c,b,d,e,k,h){return a[0]=c,a[1]=b,a[2]=d,a[3]=e,a[4]=k,a[5]=h,a};c.invert=function(a,c){var b=c[0],d=c[1],e=c[2],k=c[3],h=c[4],f=c[5],m=b*k-d*e;return m?(m=1/m,a[0]=k*m,a[1]=-d*m,a[2]=-e*
m,a[3]=b*m,a[4]=(e*f-k*h)*m,a[5]=(d*h-b*f)*m,a):null};c.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};c.multiply=e;c.rotate=function(a,c,b){var d=c[0],e=c[1],k=c[2],h=c[3],f=c[4];c=c[5];var m=Math.sin(b);b=Math.cos(b);return a[0]=d*b+k*m,a[1]=e*b+h*m,a[2]=d*-m+k*b,a[3]=e*-m+h*b,a[4]=f,a[5]=c,a};c.scale=function(a,c,b){var d=c[1],e=c[2],k=c[3],h=c[4],f=c[5],m=b[0];b=b[1];return a[0]=c[0]*m,a[1]=d*m,a[2]=e*b,a[3]=k*b,a[4]=h,a[5]=f,a};c.translate=function(a,c,b){var d=c[0],e=c[1],k=c[2],h=c[3],
f=c[4];c=c[5];var m=b[0];b=b[1];return a[0]=d,a[1]=e,a[2]=k,a[3]=h,a[4]=d*m+k*b+f,a[5]=e*m+h*b+c,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a[4]=0,a[5]=0,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=c[1],a[4]=0,a[5]=0,a};c.fromTranslation=function(a,c){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=c[0],a[5]=c[1],a};c.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a[4]=c[4]+b[4],a[5]=c[5]+b[5],a};c.subtract=m;c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a[4]=c[4]*b,a[5]=c[5]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a[4]=c[4]+b[4]*d,a[5]=c[5]+b[5]*d,a};c.exactEquals=
function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]};c.equals=function(a,c){var b=a[0],d=a[1],e=a[2],m=a[3],h=a[4],f=a[5],n=c[0],q=c[1],t=c[2],r=c[3],z=c[4],w=c[5];return Math.abs(b-n)<=k.EPSILON*Math.max(1,Math.abs(b),Math.abs(n))&&Math.abs(d-q)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(e-t)<=k.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(m-r)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(r))&&Math.abs(h-z)<=k.EPSILON*Math.max(1,
Math.abs(h),Math.abs(z))&&Math.abs(f-w)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))};var k=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=e;c.sub=m},function(a,c,d){function e(a,c,b){var d=c[0],k=c[1],m=c[2];c=c[3];var h=b[0],f=b[1],n=b[2];b=b[3];return a[0]=d*h+m*f,a[1]=k*h+c*f,a[2]=d*n+m*b,a[3]=k*n+c*b,a}function m(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],
a[3]=c[3]-b[3],a}Object.defineProperty(c,"__esModule",{value:!0});c.sub=c.mul=void 0;c.create=function(){var a=new k.ARRAY_TYPE(4);k.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};c.clone=function(a){var c=new k.ARRAY_TYPE(4);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};c.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};c.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a};c.fromValues=function(a,c,b,d){var e=new k.ARRAY_TYPE(4);return e[0]=a,e[1]=
c,e[2]=b,e[3]=d,e};c.set=function(a,c,b,d,e){return a[0]=c,a[1]=b,a[2]=d,a[3]=e,a};c.transpose=function(a,c){if(a===c){var b=c[1];a[1]=c[2];a[2]=b}else a[0]=c[0],a[1]=c[2],a[2]=c[1],a[3]=c[3];return a};c.invert=function(a,c){var b=c[0],d=c[1],e=c[2],k=c[3],h=b*k-e*d;return h?(h=1/h,a[0]=k*h,a[1]=-d*h,a[2]=-e*h,a[3]=b*h,a):null};c.adjoint=function(a,c){var b=c[0];return a[0]=c[3],a[1]=-c[1],a[2]=-c[2],a[3]=b,a};c.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};c.multiply=e;c.rotate=function(a,
c,b){var d=c[0],e=c[1],k=c[2];c=c[3];var h=Math.sin(b);b=Math.cos(b);return a[0]=d*b+k*h,a[1]=e*b+c*h,a[2]=d*-h+k*b,a[3]=e*-h+c*b,a};c.scale=function(a,c,b){var d=c[1],e=c[2],k=c[3],h=b[0];b=b[1];return a[0]=c[0]*h,a[1]=d*h,a[2]=e*b,a[3]=k*b,a};c.fromRotation=function(a,c){var b=Math.sin(c),d=Math.cos(c);return a[0]=d,a[1]=b,a[2]=-b,a[3]=d,a};c.fromScaling=function(a,c){return a[0]=c[0],a[1]=0,a[2]=0,a[3]=c[1],a};c.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};c.LDU=function(a,c,b,d){return a[2]=d[2]/d[0],b[0]=d[0],b[1]=d[1],b[3]=d[3]-a[2]*b[1],[a,c,b]};c.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a};c.subtract=m;c.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};c.equals=function(a,c){var b=a[0],d=a[1],e=a[2],m=a[3],h=c[0],f=c[1],n=c[2],q=c[3];return Math.abs(b-h)<=k.EPSILON*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(d-
f)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(e-n)<=k.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(m-q)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(q))};c.multiplyScalar=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a};c.multiplyScalarAndAdd=function(a,c,b,d){return a[0]=c[0]+b[0]*d,a[1]=c[1]+b[1]*d,a[2]=c[2]+b[2]*d,a[3]=c[3]+b[3]*d,a};var k=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(c[b]=a[b]);return c["default"]=a,c}(d(0));c.mul=e;c.sub=m},function(a,c,d){function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(c,"__esModule",{value:!0});c.vec4=c.vec3=c.vec2=c.quat2=c.quat=c.mat4=c.mat3=c.mat2d=c.mat2=c.glMatrix=void 0;a=e(d(0));var m=e(d(9)),k=e(d(8)),l=e(d(5)),g=e(d(4)),b=e(d(3)),p=e(d(7)),r=e(d(6)),y=e(d(2));d=e(d(1));c.glMatrix=a;c.mat2=m;c.mat2d=
k;c.mat3=l;c.mat4=g;c.quat=b;c.quat2=p;c.vec2=r;c.vec3=y;c.vec4=d}])})},{}],75:[function(d,e,r){e.exports=function(a,c,d){a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a}},{}],76:[function(d,e,r){e.exports=function(d,e){var k=a(d[0],d[1],d[2]),l=a(e[0],e[1],e[2]);c(k,k);c(l,l);k=z(k,l);return 1<k?0:Math.acos(k)};var a=d("./fromValues"),c=d("./normalize"),z=d("./dot")},{"./dot":86,"./fromValues":92,"./normalize":103}],77:[function(d,e,r){e.exports=function(a,c){a[0]=Math.ceil(c[0]);a[1]=Math.ceil(c[1]);
a[2]=Math.ceil(c[2]);return a}},{}],78:[function(d,e,r){e.exports=function(a){var c=new Float32Array(3);c[0]=a[0];c[1]=a[1];c[2]=a[2];return c}},{}],79:[function(d,e,r){e.exports=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a}},{}],80:[function(d,e,r){e.exports=function(){var a=new Float32Array(3);a[0]=0;a[1]=0;a[2]=0;return a}},{}],81:[function(d,e,r){e.exports=function(a,c,d){var e=c[0],m=c[1];c=c[2];var k=d[0],l=d[1];d=d[2];a[0]=m*d-c*l;a[1]=c*k-e*d;a[2]=e*l-m*k;return a}},{}],82:[function(d,
e,r){e.exports=d("./distance")},{"./distance":83}],83:[function(d,e,r){e.exports=function(a,c){var d=c[0]-a[0],e=c[1]-a[1],m=c[2]-a[2];return Math.sqrt(d*d+e*e+m*m)}},{}],84:[function(d,e,r){e.exports=d("./divide")},{"./divide":85}],85:[function(d,e,r){e.exports=function(a,c,d){a[0]=c[0]/d[0];a[1]=c[1]/d[1];a[2]=c[2]/d[2];return a}},{}],86:[function(d,e,r){e.exports=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}},{}],87:[function(d,e,r){e.exports=1E-6},{}],88:[function(d,e,r){e.exports=function(c,
d){var e=c[0],m=c[1],k=c[2],l=d[0],g=d[1],b=d[2];return Math.abs(e-l)<=a*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(m-g)<=a*Math.max(1,Math.abs(m),Math.abs(g))&&Math.abs(k-b)<=a*Math.max(1,Math.abs(k),Math.abs(b))};var a=d("./epsilon")},{"./epsilon":87}],89:[function(d,e,r){e.exports=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]}},{}],90:[function(d,e,r){e.exports=function(a,c){a[0]=Math.floor(c[0]);a[1]=Math.floor(c[1]);a[2]=Math.floor(c[2]);return a}},{}],91:[function(d,e,r){e.exports=
function(c,d,e,m,k,l){d||(d=3);e||(e=0);for(m=m?Math.min(m*d+e,c.length):c.length;e<m;e+=d)a[0]=c[e],a[1]=c[e+1],a[2]=c[e+2],k(a,a,l),c[e]=a[0],c[e+1]=a[1],c[e+2]=a[2];return c};var a=d("./create")()},{"./create":80}],92:[function(d,e,r){e.exports=function(a,c,d){var e=new Float32Array(3);e[0]=a;e[1]=c;e[2]=d;return e}},{}],93:[function(d,e,r){e.exports={EPSILON:d("./epsilon"),create:d("./create"),clone:d("./clone"),angle:d("./angle"),fromValues:d("./fromValues"),copy:d("./copy"),set:d("./set"),equals:d("./equals"),
exactEquals:d("./exactEquals"),add:d("./add"),subtract:d("./subtract"),sub:d("./sub"),multiply:d("./multiply"),mul:d("./mul"),divide:d("./divide"),div:d("./div"),min:d("./min"),max:d("./max"),floor:d("./floor"),ceil:d("./ceil"),round:d("./round"),scale:d("./scale"),scaleAndAdd:d("./scaleAndAdd"),distance:d("./distance"),dist:d("./dist"),squaredDistance:d("./squaredDistance"),sqrDist:d("./sqrDist"),length:d("./length"),len:d("./len"),squaredLength:d("./squaredLength"),sqrLen:d("./sqrLen"),negate:d("./negate"),
inverse:d("./inverse"),normalize:d("./normalize"),dot:d("./dot"),cross:d("./cross"),lerp:d("./lerp"),random:d("./random"),transformMat4:d("./transformMat4"),transformMat3:d("./transformMat3"),transformQuat:d("./transformQuat"),rotateX:d("./rotateX"),rotateY:d("./rotateY"),rotateZ:d("./rotateZ"),forEach:d("./forEach")}},{"./add":75,"./angle":76,"./ceil":77,"./clone":78,"./copy":79,"./create":80,"./cross":81,"./dist":82,"./distance":83,"./div":84,"./divide":85,"./dot":86,"./epsilon":87,"./equals":88,
"./exactEquals":89,"./floor":90,"./forEach":91,"./fromValues":92,"./inverse":94,"./len":95,"./length":96,"./lerp":97,"./max":98,"./min":99,"./mul":100,"./multiply":101,"./negate":102,"./normalize":103,"./random":104,"./rotateX":105,"./rotateY":106,"./rotateZ":107,"./round":108,"./scale":109,"./scaleAndAdd":110,"./set":111,"./sqrDist":112,"./sqrLen":113,"./squaredDistance":114,"./squaredLength":115,"./sub":116,"./subtract":117,"./transformMat3":118,"./transformMat4":119,"./transformQuat":120}],94:[function(d,
e,r){e.exports=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a}},{}],95:[function(d,e,r){e.exports=d("./length")},{"./length":96}],96:[function(d,e,r){e.exports=function(a){var c=a[0],d=a[1];a=a[2];return Math.sqrt(c*c+d*d+a*a)}},{}],97:[function(d,e,r){e.exports=function(a,c,d,e){var m=c[0],k=c[1];c=c[2];a[0]=m+e*(d[0]-m);a[1]=k+e*(d[1]-k);a[2]=c+e*(d[2]-c);return a}},{}],98:[function(d,e,r){e.exports=function(a,c,d){a[0]=Math.max(c[0],d[0]);a[1]=Math.max(c[1],d[1]);a[2]=Math.max(c[2],
d[2]);return a}},{}],99:[function(d,e,r){e.exports=function(a,c,d){a[0]=Math.min(c[0],d[0]);a[1]=Math.min(c[1],d[1]);a[2]=Math.min(c[2],d[2]);return a}},{}],100:[function(d,e,r){e.exports=d("./multiply")},{"./multiply":101}],101:[function(d,e,r){e.exports=function(a,c,d){a[0]=c[0]*d[0];a[1]=c[1]*d[1];a[2]=c[2]*d[2];return a}},{}],102:[function(d,e,r){e.exports=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a}},{}],103:[function(d,e,r){e.exports=function(a,c){var d=c[0],e=c[1],m=c[2],d=d*d+
e*e+m*m;0<d&&(d=1/Math.sqrt(d),a[0]=c[0]*d,a[1]=c[1]*d,a[2]=c[2]*d);return a}},{}],104:[function(d,e,r){e.exports=function(a,c){c=c||1;var d=2*Math.random()*Math.PI,e=2*Math.random()-1,m=Math.sqrt(1-e*e)*c;a[0]=Math.cos(d)*m;a[1]=Math.sin(d)*m;a[2]=e*c;return a}},{}],105:[function(d,e,r){e.exports=function(a,c,d,e){var m=d[1];d=d[2];var k=c[1]-m,l=c[2]-d,g=Math.sin(e);e=Math.cos(e);a[0]=c[0];a[1]=m+k*e-l*g;a[2]=d+k*g+l*e;return a}},{}],106:[function(d,e,r){e.exports=function(a,c,d,e){var m=d[0];d=
d[2];var k=c[0]-m,l=c[2]-d,g=Math.sin(e);e=Math.cos(e);a[0]=m+l*g+k*e;a[1]=c[1];a[2]=d+l*e-k*g;return a}},{}],107:[function(d,e,r){e.exports=function(a,c,d,e){var m=d[0];d=d[1];var k=c[0]-m,l=c[1]-d,g=Math.sin(e);e=Math.cos(e);a[0]=m+k*e-l*g;a[1]=d+k*g+l*e;a[2]=c[2];return a}},{}],108:[function(d,e,r){e.exports=function(a,c){a[0]=Math.round(c[0]);a[1]=Math.round(c[1]);a[2]=Math.round(c[2]);return a}},{}],109:[function(d,e,r){e.exports=function(a,c,d){a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;return a}},
{}],110:[function(d,e,r){e.exports=function(a,c,d,e){a[0]=c[0]+d[0]*e;a[1]=c[1]+d[1]*e;a[2]=c[2]+d[2]*e;return a}},{}],111:[function(d,e,r){e.exports=function(a,c,d,e){a[0]=c;a[1]=d;a[2]=e;return a}},{}],112:[function(d,e,r){e.exports=d("./squaredDistance")},{"./squaredDistance":114}],113:[function(d,e,r){e.exports=d("./squaredLength")},{"./squaredLength":115}],114:[function(d,e,r){e.exports=function(a,c){var d=c[0]-a[0],e=c[1]-a[1],m=c[2]-a[2];return d*d+e*e+m*m}},{}],115:[function(d,e,r){e.exports=
function(a){var c=a[0],d=a[1];a=a[2];return c*c+d*d+a*a}},{}],116:[function(d,e,r){e.exports=d("./subtract")},{"./subtract":117}],117:[function(d,e,r){e.exports=function(a,c,d){a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];return a}},{}],118:[function(d,e,r){e.exports=function(a,c,d){var e=c[0],m=c[1];c=c[2];a[0]=e*d[0]+m*d[3]+c*d[6];a[1]=e*d[1]+m*d[4]+c*d[7];a[2]=e*d[2]+m*d[5]+c*d[8];return a}},{}],119:[function(d,e,r){e.exports=function(a,c,d){var e=c[0],m=c[1];c=c[2];var k=d[3]*e+d[7]*m+d[11]*c+
d[15],k=k||1;a[0]=(d[0]*e+d[4]*m+d[8]*c+d[12])/k;a[1]=(d[1]*e+d[5]*m+d[9]*c+d[13])/k;a[2]=(d[2]*e+d[6]*m+d[10]*c+d[14])/k;return a}},{}],120:[function(d,e,r){e.exports=function(a,c,d){var e=c[0],m=c[1],k=c[2];c=d[0];var l=d[1],g=d[2];d=d[3];var b=d*e+l*k-g*m,p=d*m+g*e-c*k,r=d*k+c*m-l*e,e=-c*e-l*m-g*k;a[0]=b*d+e*-c+p*-g-r*-l;a[1]=p*d+e*-l+r*-c-b*-g;a[2]=r*d+e*-g+b*-l-p*-c;return a}},{}],121:[function(d,e,r){(function(a){function c(){k.forEach(function(a){l[m[a]]=!1})}function r(a){l[m[a.keyCode]]=
!1}function D(a){l[m[a.keyCode]]=!0}var m=d("vkey"),k=Object.keys(m),l={};c();e.exports=function(a){return a?l[a]:l};a.browser&&(window.addEventListener("keydown",D,!1),window.addEventListener("keyup",r,!1),window.addEventListener("blur",c,!1))}).call(this,d("_process"))},{_process:123,vkey:126}],122:[function(d,e,r){function a(a,c,d){this.rotation=a;this.center=c;this.distance=d}function c(a,c){var d=c[0],e=c[1],d=d*d+e*e;1<d&&(d=1);a[0]=-c[0];a[1]=c[1];a[2]=c[2]||Math.sqrt(1-d);a[3]=0}d=d("gl-matrix");
var z=d.vec3,D=d.mat3,m=d.mat4,k=d.quat,l=new Float32Array(16),g=new Float32Array(16);d=a.prototype;d.view=function(a){a||(a=m.create());g[0]=g[1]=0;g[2]=-this.distance;m.fromRotationTranslation(a,k.conjugate(l,this.rotation),g);m.translate(a,a,z.negate(l,this.center));return a};d.lookAt=function(a,c,d){m.lookAt(l,a,c,d);D.fromMat4(l,l);k.fromMat3(this.rotation,l);z.copy(this.center,c);this.distance=z.distance(a,c)};d.pan=function(a){var c=this.distance;l[0]=-c*(a[0]||0);l[1]=c*(a[1]||0);l[2]=c*(a[2]||
0);z.transformQuat(l,l,this.rotation);z.add(this.center,this.center,l)};d.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};d.rotate=function(a,d){c(l,a);c(g,d);k.invert(g,g);k.multiply(l,l,g);1E-6>k.length(l)||(k.multiply(this.rotation,this.rotation,l),k.normalize(this.rotation,this.rotation))};e.exports=function(b,c,d){b=b||[0,0,-1];c=c||[0,0,0];d=d||[0,1,0];var e=new a(k.create(),z.create(),1);e.lookAt(b,c,d);return e}},{"gl-matrix":74}],123:[function(d,e,r){function a(){throw Error("setTimeout has not been defined");
}function c(){throw Error("clearTimeout has not been defined");}function z(c){if(b===setTimeout)return setTimeout(c,0);if((b===a||!b)&&setTimeout)return b=setTimeout,setTimeout(c,0);try{return b(c,0)}catch(d){try{return b.call(null,c,0)}catch(e){return b.call(this,c,0)}}}function D(a){if(p===clearTimeout)return clearTimeout(a);if((p===c||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(a);try{return p(a)}catch(b){try{return p.call(null,a)}catch(d){return p.call(this,a)}}}function m(){y&&h&&(y=
!1,h.length?H=h.concat(H):f=-1,H.length&&k())}function k(){if(!y){var a=z(m);y=!0;for(var b=H.length;b;){h=H;for(H=[];++f<b;)h&&h[f].run();f=-1;b=H.length}h=null;y=!1;D(a)}}function l(a,b){this.fun=a;this.array=b}function g(){}d=e.exports={};var b,p;try{b="function"===typeof setTimeout?setTimeout:a}catch(n){b=a}try{p="function"===typeof clearTimeout?clearTimeout:c}catch(n){p=c}var H=[],y=!1,h,f=-1;d.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-
1]=arguments[c];H.push(new l(a,b));1!==H.length||y||z(k)};l.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};d.on=g;d.addListener=g;d.once=g;d.off=g;d.removeListener=g;d.removeAllListeners=g;d.emit=g;d.prependListener=g;d.prependOnceListener=g;d.listeners=function(a){return[]};d.binding=function(a){throw Error("process.binding is not supported");};d.cwd=function(){return"/"};d.chdir=function(a){throw Error("process.chdir is not supported");
};d.umask=function(){return 0}},{}],124:[function(d,e,r){function a(a){throw Error("resl: "+a);}function c(c,d,b){Object.keys(c).forEach(function(c){0>d.indexOf(c)&&a('invalid parameter "'+c+'" in '+b)})}function z(a,c){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=c}var D=["manifest","onDone","onProgress","onError"],m=["type","src","stream","credentials","parser"],k=["onData","onDone"];e.exports=function(d){function e(b,c){if(b in d){var f=d[b];"function"!==typeof f&&a('invalid callback "'+
b+'"');return f}return null}function b(a){function b(){if(!(2>g.readyState||1===k.state||-1===k.state)){if(200!==g.status)return r('error loading resource "'+a.name+'"');if(2<g.readyState&&0===k.state){var d;d="binary"===a.type?g.response:g.responseText;if(f.data)try{h=f.data(d)}catch(e){return r(e)}else h=d}if(3<g.readyState&&0===k.state){if(f.done)try{h=f.done()}catch(e){return r(e)}k.state=1}t[c]=h;k.progress=.75*k.progress+.25;k.ready=a.stream&&!!h||1===k.state;y()}}var c=a.name,d=a.stream,e=
"binary"===a.type,f=a.parser,g=new XMLHttpRequest,h=null,k=new z(c,function(){1!==k.state&&-1!==k.state&&(g.onreadystatechange=null,g.abort(),k.state=-1)});g.onreadystatechange=d?b:function(){4===g.readyState&&b()};e&&(g.responseType="arraybuffer");a.credentials&&(g.withCredentials=!0);g.open("GET",a.src,!0);g.send();return k}function p(a,b){function c(){if(0===l.state)if(k.data)try{m=k.data(b)}catch(a){return r(a)}else m=b}function d(a){c();t[h]=m;l.progress=a.lengthComputable?Math.max(l.progress,
a.loaded/a.total):.75*l.progress+.25;y(h)}function e(){c();if(0===l.state){if(k.done)try{m=k.done()}catch(a){return r(a)}l.state=1}l.progress=1;l.ready=!0;t[h]=m;g();y("finish "+h)}function f(){r('error loading asset "'+h+'"')}function g(){a.stream&&b.removeEventListener("progress",d);"image"===a.type?b.addEventListener("load",e):b.addEventListener("canplay",e);b.removeEventListener("error",f)}var h=a.name,k=a.parser,l=new z(h,function(){1!==l.state&&-1!==l.state&&(l.state=-1,g(),b.src="")}),m=b;
a.stream&&b.addEventListener("progress",d);if("image"===a.type)b.addEventListener("load",e);else{var n=!1,p=!1;b.addEventListener("loadedmetadata",function(){p=!0;n&&e()});b.addEventListener("canplay",function(){n=!0;p&&e()})}b.addEventListener("error",f);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return l}function r(a){-1!==v&&1!==v&&(v=-1,w.forEach(function(a){a.cancel()}),q?"string"===typeof a?q(Error("resl: "+a)):q(a):console.error("resl error:",a))}function y(a){if(-1!==
v&&1!==v){var b=0,c=0;w.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===w.length?(v=1,f(t)):n&&n(b/w.length,a)}}"object"===typeof d&&d||a("invalid or missing configuration");c(d,D,"config");var h=d.manifest;"object"===typeof h&&h||a("missing manifest");var f=e("onDone");f||a("missing onDone() callback");var n=e("onProgress"),q=e("onError"),t={},v=0,G={text:b,binary:function(a){return b(a)},image:function(a){return p(a,document.createElement("img"))},video:function(a){return p(a,document.createElement("video"))},
audio:function(a){return p(a,document.createElement("audio"))}},w=Object.keys(h).map(function(b){function d(b,c){if(b in e.parser){var f=e.parser[b];"function"!==typeof f&&a("invalid parser callback "+b+' for asset "'+b+'"');return f}return c}var e=h[b];"string"===typeof e?e={src:e}:"object"===typeof e&&e||a('invalid asset definition "'+b+'"');c(e,m,'asset "'+b+'"');var f={};"parser"in e&&("function"===typeof e.parser?f={data:e.parser}:"object"===typeof e.parser&&e.parser?(c(f,k,'parser for asset "'+
b+'"'),"onData"in f||a('missing onData callback for parser in asset "'+b+'"'),f={data:d("onData"),done:d("onDone")}):a('invalid parser for asset "'+b+'"'));return{name:b,type:function(c,d,f){c in e&&(f=e[c]);0>d.indexOf(f)&&a("invalid "+c+' "'+f+'" for asset "'+b+'", possible values: '+d);return f}("type",Object.keys(G),"text"),stream:!!e.stream,credentials:!!e.credentials,src:function(c,d,f){c in e?f=e[c]:d&&a("missing "+c+' for asset "'+b+'"');"string"!==typeof f&&a("invalid "+c+' for asset "'+
b+'", must be a string');return f}("src",!0,""),parser:f}}).map(function(a){return G[a.type](a)});0===w.length&&setTimeout(function(){y("done")},1)}},{}],125:[function(d,e,r){var a=d("events/"),c=d("wheel");e.exports=function(d,e){function m(){k[0]=k[1]=k[2]=0}var k=new a;k.flush=m;m();if("undefined"===typeof window)return k;d=d||window;c(d,function(a){var c=1===a.deltaMode?12:1;k[0]+=c*(a.deltaX||0);k[1]+=c*(a.deltaY||0);k[2]+=c*(a.deltaZ||0);k.emit("scroll",k);e&&a.preventDefault&&(a.preventDefault(),
a.stopPropagation&&a.stopPropagation())},!1);return k}},{"events/":43,wheel:127}],126:[function(d,e,r){var a="undefined"!==typeof window?window.navigator.userAgent:"";d=/OS X/.test(a);r=/Opera/.test(a);a=!/like Gecko/.test(a)&&!r;d=e.exports={0:d?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",
24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:d?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",
144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:d&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",
183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:r?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(e=58;65>e;++e)d[e]=String.fromCharCode(e);for(e=48;58>e;++e)d[e]=e-48+"";for(e=65;91>e;++e)d[e]=String.fromCharCode(e);for(e=96;106>e;++e)d[e]="<num-"+(e-96)+">";for(e=112;136>
e;++e)d[e]="F"+(e-111)},{}],127:[function(d,e,r){function a(a,d,e,g){a[z](c+d,"wheel"==D?e:function(a){!a&&(a=window.event);var c={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==D?(c.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(c.deltaX=-.025*a.wheelDeltaX)):c.deltaY=a.detail;return e(c)},g||!1)}e.exports=function(c,d,e){a(c,D,d,e);"DOMMouseScroll"==
D&&a(c,"MozMousePixelScroll",d,e)};var c="",z,D;window.addEventListener?z="addEventListener":(z="attachEvent",c="on");D="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},{}],128:[function(d,e,r){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var c=d("./lib/util/check"),z=d("./lib/util/extend"),D=d("./lib/dynamic"),m=d("./lib/util/raf"),k=d("./lib/util/clock"),l=d("./lib/strings"),g=d("./lib/webgl"),b=d("./lib/extension"),
p=d("./lib/limits"),H=d("./lib/buffer"),y=d("./lib/elements"),h=d("./lib/texture"),f=d("./lib/renderbuffer"),n=d("./lib/framebuffer"),q=d("./lib/attribute"),t=d("./lib/shader"),v=d("./lib/read"),G=d("./lib/core"),w=d("./lib/stats"),Ia=d("./lib/timer");e.exports=function(d){function e(){if(0===mb.length)P&&P.update(),sc=null;else{sc=m.next(e);K();for(var a=mb.length-1;0<=a;--a){var b=mb[a];b&&b(Q,null,0)}ka.flush();P&&P.update()}}function r(){!sc&&0<mb.length&&(sc=m.next(e))}function ca(){sc&&(m.cancel(e),
sc=null)}function J(a){a.preventDefault();Sa=!0;ca();ga.forEach(function(a){a()})}function R(a){ka.getError();Sa=!1;Cb.restore();ma.restore();$a.restore();da.restore();Ba.restore();Ea.restore();B.restore();P&&P.restore();yb.procs.refresh();r();qa.forEach(function(a){a()})}function A(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(D.isDynamic(f))e[b]=D.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(D.isDynamic(f[g])){e[b]=D.unbox(f,b);return}d[b]=
f}});return{dynamic:e,"static":d}}function d(a){for(;p.length<a;)p.push(null);return p}c(!!a,"invalid args to regl({...})");c.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=z({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=
c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=yb.compile(a,g,f,e,h),l=k.draw,m=k.batch,n=k.scope,p=[];return z(function(a,b){var e;Sa&&c.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)n.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)n.call(this,
a[e],b,e);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function aa(a,b){var d=0;yb.procs.poll();var e=b.color;e&&(ka.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),d|=16384);"depth"in b&&(ka.clearDepth(+b.depth),d|=256);"stencil"in b&&(ka.clearStencil(b.stencil|0),d|=1024);c(!!d,"called regl.clear with no buffer specified");
ka.clear(d)}function I(b){c.type(b,"function","regl.frame() callback must be a function");mb.push(b);r();return{cancel:function(){function d(){var b=a(mb,d);mb[b]=mb[mb.length-1];--mb.length;0>=mb.length&&ca()}var e=a(mb,b);c(0<=e,"cannot cancel a frame twice");mb[e]=d}}}function U(){var a=Ka.viewport,b=Ka.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=ka.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=ka.drawingBufferHeight}
function K(){Q.tick+=1;Q.time=W();U();yb.procs.poll()}function ja(){da.refresh();U();yb.procs.refresh();P&&P.update()}function W(){return(k()-O)/1E3}console.log("REGL args are:",d);d=g(d);if(!d)return null;var ka=d.gl,la=ka.getContextAttributes(),Sa=ka.isContextLost(),Cb=b(ka,d);if(!Cb)return null;var ea=l(),Na=w(),V=Cb.extensions,P=Ia(ka,V),O=k(),T=ka.drawingBufferWidth,na=ka.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:T,viewportHeight:na,framebufferWidth:T,framebufferHeight:na,drawingBufferWidth:T,
drawingBufferHeight:na,pixelRatio:d.pixelRatio},T={elements:null,primitive:4,count:-1,offset:0,instances:-1},Gb=p(ka,V),$a=H(ka,Na,d,function(a){return B.destroyBuffer(a)}),S=y(ka,V,$a,Na),B=q(ka,V,Gb,Na,$a,S,T),ma=t(ka,ea,Na,d),da=h(ka,V,Gb,function(){yb.procs.poll()},Q,Na,d),Ba=f(ka,V,Gb,Na,d),Ea=n(ka,V,Gb,da,Ba,Na),yb=G(ka,ea,V,Gb,$a,S,da,Ea,{},B,ma,T,Q,P,d),ea=v(ka,Ea,yb.procs.poll,Q,la,V,Gb),Ka=yb.next,Y=ka.canvas,mb=[],ga=[],qa=[],$b=[d.onDestroy],sc=null;Y&&(Y.addEventListener("webglcontextlost",
J,!1),Y.addEventListener("webglcontextrestored",R,!1));var ic=Ea.setFBO=A({framebuffer:D.define.call(null,1,"framebuffer")});ja();la=z(A,{clear:function(a){c("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ic(z({framebuffer:a.framebuffer.faces[b]},a),aa);else ic(a,aa);else aa(null,a)},prop:D.define.bind(null,1),context:D.define.bind(null,2),"this":D.define.bind(null,3),draw:A({}),
buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return S.create(a,!1)},texture:da.create2D,cube:da.createCube,renderbuffer:Ba.create,framebuffer:Ea.create,framebufferCube:Ea.createCube,vao:B.createVAO,attributes:la,frame:I,on:function(a,b){c.type(b,"function","listener callback must be a function");var d;switch(a){case "frame":return I(b);case "lost":d=ga;break;case "restore":d=qa;break;case "destroy":d=$b;break;default:c.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(b);
return{cancel:function(){for(var a=0;a<d.length;++a)if(d[a]===b){d[a]=d[d.length-1];d.pop();break}}}},limits:Gb,hasExtension:function(a){return 0<=Gb.extensions.indexOf(a.toLowerCase())},read:ea,destroy:function(){mb.length=0;ca();Y&&(Y.removeEventListener("webglcontextlost",J),Y.removeEventListener("webglcontextrestored",R));ma.clear();Ea.clear();Ba.clear();B.clear();da.clear();S.clear();$a.clear();P&&P.clear();$b.forEach(function(a){a()})},_gl:ka,_refresh:ja,poll:function(){K();P&&P.update()},now:W,
stats:Na});d.onDone(null,la);return la}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

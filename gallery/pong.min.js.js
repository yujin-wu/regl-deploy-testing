(function(){function m(t,M,a){function d(f,b){if(!M[f]){if(!t[f]){var sa="function"==typeof require&&require;if(!b&&sa)return sa(f,!0);if(k)return k(f,!0);sa=Error("Cannot find module '"+f+"'");throw sa.code="MODULE_NOT_FOUND",sa;}sa=M[f]={exports:{}};t[f][0].call(sa.exports,function(c){return d(t[f][1][c]||c)},sa,sa.exports,m,t,M,a)}return M[f].exports}for(var k="function"==typeof require&&require,w=0;w<a.length;w++)d(a[w]);return d}return m})()({1:[function(m,t,M){function a(c,b){this.c=jc.fromValues(c[0],
c[1]);this.r=jc.fromValues(b[0],b[1])}function d(c,b,a){return b<a?c<b?b:c>a?a:c:c<a?a:c>b?b:c}function k(c,b,a){var d=+(c.c[0]-b.c[0])-(c.r[0]+b.r[0]),f=-(c.c[0]-b.c[0])-(c.r[0]+b.r[0]);if(0<d||0<f)return!1;var n=+(c.c[1]-b.c[1])-a*(c.r[1]+b.r[1]);c=-(c.c[1]-b.c[1])-a*(c.r[1]+b.r[1]);if(0<n||0<c)return!1;if(d>f&&d>n&&d>c)return jc.fromValues(-1,0);if(f>d&&f>n&&f>c)return jc.fromValues(1,0);if(n>d&&n>f&&n>c)return jc.fromValues(0,-1);if(c>d&&c>f&&c>n)return jc.fromValues(0,1)}function w(c,b){return Math.random()*
(b-c)+c}function f(c){A.c=[0,0];A.r=[.02,.02];var b=w(.3,.4);c=c?w(Math.PI-1.2,Math.PI+1.2):w(-1.2,1.2);C=[b*Math.cos(c),b*Math.sin(c)]}function b(c,b){for(var a=B.sampleRate*c,d=B.createBuffer(2,a,B.sampleRate),f=0;2>f;f++){var n=d.getChannelData(f);b(n,a)}return d}function sa(c){var b=B.createBufferSource();b.buffer=c;b.connect(B.destination);b.start()}function c(c,b){sa(J[Zb]);Zb=(Zb+1)%2;return jc.subtract(c,c,jc.scale([0,0],b,2.1*jc.dot(c,b)))}var x=m("../regl")(),jc=m("gl-vec2"),ea=null;m("mouse-change")(function(c,
b,a){ea=a});var H=new a([-.9,0],[.03,.15]),I=new a([.9,0],[.03,.15]),y=new a([0,0],[.005,1]),A=new a([0,0],[0,0]),C=jc.fromValues(0,0),B=new AudioContext,J=[];J[0]=b(.15,function(c,b){for(var a=.1,d=0;d<b;d++)0===d%100&&(a*=-1),c[d]=a*(1-d/b)});J[1]=b(.15,function(c,b){for(var a=.1,d=0;d<b;d++)0===d%150&&(a*=-1),c[d]=a*(1-d/b)});var z=b(.4,function(c,b){for(var a=.1,d=50,f=0;f<b;f++)0===f%d&&(a*=-1),0===f%600&&(d-=2),c[f]=a*(1-f/b)}),O=b(.5,function(c,b){for(var a=w(-.1,.1),d=0;d<b;d++)0===d%150&&
(a=w(-.1,.1)),c[d]=a*(1-d/b)}),Zb=0,p=x({frag:"\n    precision mediump float;\n    void main() {\n      gl_FragColor = vec4(1.0);\n    }",vert:"\n  precision mediump float;\n\n  attribute vec2 position;\n\n  uniform vec2 offset;\n  uniform vec2 scale;\n\n  uniform float viewportWidth;\n  uniform float viewportHeight;\n\n  void main() {\n    // windows ratio scaling factor.\n    float r = (viewportWidth) / (viewportHeight);\n    gl_Position = vec4(position.xy * scale * vec2(1.0, r) + offset, 0, 1);\n  }",
attributes:{position:[[-1,-1],[1,1],[-1,1],[-1,-1],[1,-1],[1,1]]},uniforms:{offset:function(c,b){return b.aabb.c},scale:function(c,b){return b.aabb.r},viewportWidth:x.context("viewportWidth"),viewportHeight:x.context("viewportHeight")},depth:{enable:!1},cull:{enable:!0},count:6});f(!0);x.frame(function(b){var a=b.viewportWidth,w=b.viewportHeight;b=b.pixelRatio;x.clear({color:[0,0,0,1]});var a=a/w,B=-1+H.r[1]*a,U=1-H.r[1]*a;null!==ea&&(H.c[1]=d(-1+2*(1-ea*b/w),B,U));I.c[1]=d(I.c[1]+.0323*(A.c[1]-I.c[1]),
B,U);jc.scaleAndAdd(A.c,A.c,C,.017);1<=A.c[1]+a*A.r[1]&&(C=c(C,jc.fromValues(0,-1)));1<=A.c[0]+A.r[0]&&(sa(z),f(!0));-1>=A.c[1]-a*A.r[1]&&(C=c(C,jc.fromValues(0,1)));-1>=A.c[0]-A.r[0]&&(sa(O),f(!1));w=k(I,A,a);!1!==w&&(C=c(C,w));w=k(H,A,a);!1!==w&&(C=c(C,w));p([{aabb:H},{aabb:I},{aabb:y},{aabb:A}])})},{"../regl":85,"gl-vec2":55,"mouse-change":83}],2:[function(m,t,M){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=
this.offset=0}var d=m("./util/sorted-object-keys"),k=m("./util/check"),w=m("./util/values"),f=m("./constants/dtypes.json"),b=m("./util/is-typed-array"),sa=m("./util/is-ndarray"),c=m("./constants/primitives.json"),x="attributes elements offset count primitive instances".split(" ");t.exports=function(m,ea,H,I,y,A,C){function B(b){if(b!==X.currentVAO){var c=ea.oes_vertex_array_object;b?c.bindVertexArrayOES(b.vao):c.bindVertexArrayOES(null);X.currentVAO=b}}function J(b){if(b!==X.currentVAO){if(b)b.bindAttrs();
else{for(var c=ea.angle_instanced_arrays,a=0;a<g.length;++a){var d=g[a];d.buffer?(m.enableVertexAttribArray(a),d.buffer.bind(),m.vertexAttribPointer(a,d.size,d.type,d.normalized,d.stride,d.offfset),c&&d.divisor&&c.vertexAttribDivisorANGLE(a,d.divisor)):(m.disableVertexAttribArray(a),m.vertexAttrib4f(a,d.x,d.y,d.z,d.w))}C.elements?m.bindBuffer(34963,C.elements.buffer.buffer):m.bindBuffer(34963,null)}X.currentVAO=b}}function z(){w(S).forEach(function(b){b.destroy()})}function O(){this.id=++q;this.attributes=
[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var b=ea.oes_vertex_array_object;this.vao=b?b.createVertexArrayOES():null;S[this.id]=this;this.buffers=[]}function t(){ea.oes_vertex_array_object&&w(S).forEach(function(b){b.refresh()})}var p=H.maxAttributes,g=Array(p);for(H=0;H<p;++H)g[H]=new a;var q=0,S={},X={Record:a,scope:{},state:g,currentVAO:null,targetVAO:null,restore:ea.oes_vertex_array_object?t:function(){},createVAO:function(q){function n(q){var w;
if(Array.isArray(q))w=q,g.elements&&g.ownsElements&&g.elements.destroy(),g.elements=null,g.ownsElements=!1,g.offset=0,g.count=0,g.instances=-1,g.primitive=4;else{k("object"===typeof q,"invalid arguments for create vao");k("attributes"in q,"must specify attributes for vao");if(q.elements){var e=q.elements;g.ownsElements?("function"===typeof e&&"elements"===e._reglType?g.elements.destroy():g.elements(e),g.ownsElements=!1):A.getElements(q.elements)?(g.elements=q.elements,g.ownsElements=!1):(g.elements=
A.create(q.elements),g.ownsElements=!0)}else g.elements=null,g.ownsElements=!1;w=q.attributes;g.offset=0;g.count=-1;g.instances=-1;g.primitive=4;g.elements&&(g.count=g.elements._elements.vertCount,g.primitive=g.elements._elements.primType);"offset"in q&&(g.offset=q.offset|0);"count"in q&&(g.count=q.count|0);"instances"in q&&(g.instances=q.instances|0);"primitive"in q&&(k(q.primitive in c,"bad primitive type: "+q.primitive),g.primitive=c[q.primitive]);k.optional(function(){for(var b=d(q),c=0;c<b.length;++c)k(0<=
x.indexOf(b[c]),'invalid option for vao: "'+b[c]+'" valid options are '+x)});k(Array.isArray(w),"attributes must be an array")}k(w.length<p,"too many attributes");k(0<w.length,"must specify at least one attribute");var e={},h=g.attributes;h.length=w.length;for(var Y=0;Y<w.length;++Y){var U=w[Y],z=h[Y]=new a,C=U.data||U;if(Array.isArray(C)||b(C)||sa(C)){var S;g.buffers[Y]&&(S=g.buffers[Y],b(C)&&S._buffer.byteLength>=C.byteLength?S.subdata(C):(S.destroy(),g.buffers[Y]=null));g.buffers[Y]||(S=g.buffers[Y]=
y.create(U,34962,!1,!0));z.buffer=y.getBuffer(S);z.size=z.buffer.dimension|0;z.normalized=!1;z.type=z.buffer.dtype;z.offset=0;z.stride=0;z.divisor=0;z.state=1;e[Y]=1}else y.getBuffer(U)?(z.buffer=y.getBuffer(U),z.size=z.buffer.dimension|0,z.normalized=!1,z.type=z.buffer.dtype,z.offset=0,z.stride=0,z.divisor=0,z.state=1):y.getBuffer(U.buffer)?(z.buffer=y.getBuffer(U.buffer),z.size=(+U.size||z.buffer.dimension)|0,z.normalized=!!U.normalized||!1,"type"in U?(k.parameter(U.type,f,"invalid buffer type"),
z.type=f[U.type]):z.type=z.buffer.dtype,z.offset=(U.offset||0)|0,z.stride=(U.stride||0)|0,z.divisor=(U.divisor||0)|0,z.state=1,k(1<=z.size&&4>=z.size,"size must be between 1 and 4"),k(0<=z.offset,"invalid offset"),k(0<=z.stride&&255>=z.stride,"stride must be between 0 and 255"),k(0<=z.divisor,"divisor must be positive"),k(!z.divisor||!!ea.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in U?(k(0<Y,"first attribute must not be a constant"),z.x=+U.x||0,z.y=+U.y||
0,z.z=+U.z||0,z.w=+U.w||0,z.state=2):k(!1,"invalid attribute spec for location "+Y)}for(S=0;S<g.buffers.length;++S)!e[S]&&g.buffers[S]&&(g.buffers[S].destroy(),g.buffers[S]=null);g.refresh();return n}var g=new O;I.vaoCount+=1;n.destroy=function(){for(var b=0;b<g.buffers.length;++b)g.buffers[b]&&g.buffers[b].destroy();g.buffers.length=0;g.ownsElements&&(g.elements.destroy(),g.elements=null,g.ownsElements=!1);g.destroy()};n._vao=g;n._reglType="vao";return n(q)},getVAO:function(b){return"function"===
typeof b&&b._vao?b._vao:null},destroyBuffer:function(b){for(var c=0;c<g.length;++c){var a=g[c];a.buffer===b&&(m.disableVertexAttribArray(c),a.buffer=null)}},setVAO:ea.oes_vertex_array_object?B:J,clear:ea.oes_vertex_array_object?z:function(){}};O.prototype.bindAttrs=function(){for(var b=ea.angle_instanced_arrays,c=this.attributes,a=0;a<c.length;++a){var d=c[a];d.buffer?(m.enableVertexAttribArray(a),m.bindBuffer(34962,d.buffer.buffer),m.vertexAttribPointer(a,d.size,d.type,d.normalized,d.stride,d.offset),
b&&d.divisor&&b.vertexAttribDivisorANGLE(a,d.divisor)):(m.disableVertexAttribArray(a),m.vertexAttrib4f(a,d.x,d.y,d.z,d.w))}for(b=c.length;b<p;++b)m.disableVertexAttribArray(b);(b=A.getElements(this.elements))?m.bindBuffer(34963,b.buffer.buffer):m.bindBuffer(34963,null)};O.prototype.refresh=function(){var b=ea.oes_vertex_array_object;b&&(b.bindVertexArrayOES(this.vao),this.bindAttrs(),X.currentVAO=null,b.bindVertexArrayOES(null))};O.prototype.destroy=function(){if(this.vao){var b=ea.oes_vertex_array_object;
this===X.currentVAO&&(X.currentVAO=null,b.bindVertexArrayOES(null));b.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);S[this.id]&&(delete S[this.id],--I.vaoCount)};return X}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(m,t,M){function a(b){return H[Object.prototype.toString.call(b)]|
0}function d(b,c){for(var a=0;a<c.length;++a)b[a]=c[a]}function k(b,c,a,d,f,k,p){for(var g=0,q=0;q<a;++q)for(var w=0;w<d;++w)b[g++]=c[f*q+k*w+p]}var w=m("./util/sorted-object-keys"),f=m("./util/check"),b=m("./util/is-typed-array"),sa=m("./util/is-ndarray"),c=m("./util/values"),x=m("./util/pool");M=m("./util/flatten");var jc=M.flatten,ea=M.shape,H=m("./constants/arraytypes.json"),I=m("./constants/dtypes.json"),y=m("./constants/usage.json"),A=[];A[5120]=1;A[5122]=2;A[5124]=4;A[5121]=1;A[5123]=2;A[5125]=
4;A[5126]=4;t.exports=function(C,B,H,z){function O(b){this.id=q++;this.buffer=C.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;H.profile&&(this.stats={size:0})}function m(b,c,a){b.byteLength=c.byteLength;C.bufferData(b.type,c,a)}function p(c,n,q,g,p,e){c.usage=q;if(Array.isArray(n)){if(c.dtype=g||5126,0<n.length)if(Array.isArray(n[0])){p=ea(n);for(var h=g=1;h<p.length;++h)g*=p[h];c.dimension=g;n=jc(n,p,c.dtype);m(c,n,q);e?c.persistentData=
n:x.freeType(n)}else"number"===typeof n[0]?(c.dimension=p,p=x.allocType(c.dtype,n.length),d(p,n),m(c,p,q),e?c.persistentData=p:x.freeType(p)):b(n[0])?(c.dimension=n[0].length,c.dtype=g||a(n[0])||5126,n=jc(n,[n.length,n[0].length],c.dtype),m(c,n,q),e?c.persistentData=n:x.freeType(n)):f.raise("invalid buffer data")}else if(b(n))c.dtype=g||a(n),c.dimension=p,m(c,n,q),e&&(c.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(sa(n)){p=n.shape;var Y=n.stride,h=n.offset,z=0,w=0,y=0,S=0;1===
p.length?(z=p[0],w=1,y=Y[0],S=0):2===p.length?(z=p[0],w=p[1],y=Y[0],S=Y[1]):f.raise("invalid shape");c.dtype=g||a(n.data)||5126;c.dimension=w;p=x.allocType(c.dtype,z*w);k(p,n.data,z,w,y,S,h);m(c,p,q);e?c.persistentData=p:x.freeType(p)}else n instanceof ArrayBuffer?(c.dtype=5121,c.dimension=p,m(c,n,q),e&&(c.persistentData=new Uint8Array(new Uint8Array(n)))):f.raise("invalid buffer data")}function g(b){B.bufferCount--;z(b);var c=b.buffer;f(c,"buffer must not be deleted already");C.deleteBuffer(c);b.buffer=
null;delete S[b.id]}var q=0,S={};O.prototype.bind=function(){C.bindBuffer(this.type,this.buffer)};O.prototype.destroy=function(){g(this)};var X=[];H.profile&&(B.getTotalBufferSize=function(){var b=0;w(S).forEach(function(c){b+=S[c].stats.size});return b});return{create:function(c,q,z,w){function m(c){var a=35044,e=null,d=0,q=0,n=1;Array.isArray(c)||b(c)||sa(c)||c instanceof ArrayBuffer?e=c:"number"===typeof c?d=c|0:c&&(f.type(c,"object","buffer arguments must be an object, a number or an array"),
"data"in c&&(f(null===e||Array.isArray(e)||b(e)||sa(e),"invalid data for buffer"),e=c.data),"usage"in c&&(f.parameter(c.usage,y,"invalid buffer usage"),a=y[c.usage]),"type"in c&&(f.parameter(c.type,I,"invalid buffer type"),q=I[c.type]),"dimension"in c&&(f.type(c.dimension,"number","invalid dimension"),n=c.dimension|0),"length"in c&&(f.nni(d,"buffer length must be a nonnegative integer"),d=c.length|0));h.bind();e?p(h,e,a,q,n,w):(d&&C.bufferData(h.type,d,a),h.dtype=q||5121,h.usage=a,h.dimension=n,h.byteLength=
d);H.profile&&(h.stats.size=h.byteLength*A[h.dtype]);return m}function e(c,b){f(b+c.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+c.byteLength+" starting from offset "+b+" to a buffer of size "+h.byteLength);C.bufferSubData(h.type,b,c)}B.bufferCount++;var h=new O(q);S[h.id]=h;z||m(c);m._reglType="buffer";m._buffer=h;m.subdata=function(c,q){var n=(q||0)|0,g;h.bind();if(b(c)||c instanceof ArrayBuffer)e(c,n);else if(Array.isArray(c)){if(0<c.length)if("number"===
typeof c[0]){var p=x.allocType(h.dtype,c.length);d(p,c);e(p,n);x.freeType(p)}else Array.isArray(c[0])||b(c[0])?(g=ea(c),p=jc(c,g,h.dtype),e(p,n),x.freeType(p)):f.raise("invalid buffer data")}else if(sa(c)){g=c.shape;var z=c.stride,w=p=0,y=0,S=0;1===g.length?(p=g[0],w=1,y=z[0],S=0):2===g.length?(p=g[0],w=g[1],y=z[0],S=z[1]):f.raise("invalid shape");g=Array.isArray(c.data)?h.dtype:a(c.data);g=x.allocType(g,p*w);k(g,c.data,p,w,y,S,c.offset);e(g,n);x.freeType(g)}else f.raise("invalid data for buffer subdata");
return m};H.profile&&(m.stats=h.stats);m.destroy=function(){g(h)};return m},createStream:function(c,b){var a=X.pop();a||(a=new O(c));a.bind();p(a,b,35040,0,1,!1);return a},destroyStream:function(c){X.push(c)},clear:function(){c(S).forEach(g);X.forEach(g)},getBuffer:function(c){return c&&c._buffer instanceof O?c._buffer:null},restore:function(){c(S).forEach(function(c){c.buffer=C.createBuffer();C.bindBuffer(c.type,c.buffer);C.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:p}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(m,t,M){t.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(m,t,M){t.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(m,t,M){t.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(m,t,M){t.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(m,t,M){function a(c){return Array.isArray(c)||H(c)||I(c)}function d(c){return c.sort(function(c,
b){return"viewport"===c?-1:"viewport"===b?1:c<b?-1:1})}function k(c,b,a,d){this.thisDep=c;this.contextDep=b;this.propDep=a;this.append=d}function w(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function f(c){return new k(!1,!1,!1,c)}function b(c,b){var a=c.type;if(0===a)return a=c.data.length,new k(!0,1<=a,2<=a,b);if(4===a)return a=c.data,new k(a.thisDep,a.contextDep,a.propDep,b);if(5===a)return new k(!1,!1,!1,b);if(6===a){for(var d=a=!1,f=!1,e=0;e<c.data.length;++e){var q=c.data[e];1===q.type?
f=!0:2===q.type?d=!0:3===q.type?a=!0:0===q.type?(a=!0,q=q.data,1<=q&&(d=!0),2<=q&&(f=!0)):4===q.type&&(a=a||q.data.thisDep,d=d||q.data.contextDep,f=f||q.data.propDep)}return new k(a,d,f,b)}return new k(3===a,2===a,1===a,b)}var sa=m("./util/sorted-object-keys"),c=m("./util/check"),x=m("./util/extend"),jc=m("./util/codegen"),ea=m("./util/loop"),H=m("./util/is-typed-array"),I=m("./util/is-ndarray"),y=m("./util/is-array-like"),A=m("./dynamic"),C=m("./constants/primitives.json"),B=m("./constants/dtypes.json"),
J=["x","y","z","w"],z="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),O={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zb="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
p={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},g={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},q={frag:35632,vert:35633},S={cw:2304,ccw:2305},X=new k(!1,!1,!1,function(){});t.exports=function(m,n,H,I,da,e,h,Y,qa,t,gb,Rb,ta,Aa,Z){function K(c){return c.replace(".","_")}function N(c,b,a){var e=K(c);ca.push(c);
u[e]=F[e]=!!a;D[e]=b}function R(c,b,a){var e=K(c);ca.push(c);Array.isArray(a)?(F[e]=a.slice(),u[e]=a.slice()):F[e]=u[e]=a;xa[e]=b}function oa(){var b=jc(),a=b.link,e=b.global;b.id=kc++;b.batchId="0";var d=a(ka),f=b.shared={props:"a0"};sa(ka).forEach(function(c){f[c]=e.def(d,".",c)});c.optional(function(){b.CHECK=a(c);b.commandStr=c.guessCommand();b.command=a(b.commandStr);b.assert=function(c,b,e){c("if(!(",b,"))",this.CHECK,".commandRaise(",a(e),",",this.command,");")};l.invalidBlendCombinations=
Zb});var D=b.next={},q=b.current={};sa(xa).forEach(function(c){Array.isArray(F[c])&&(D[c]=e.def(f.next,".",c),q[c]=e.def(f.current,".",c))});var g=b.constants={};sa(l).forEach(function(c){g[c]=e.def(JSON.stringify(l[c]))});b.invoke=function(c,e){switch(e.type){case 0:var d=["this",f.context,f.props,b.batchId];return c.def(a(e.data),".call(",d.slice(0,Math.max(e.data.length+1,4)),")");case 1:return c.def(f.props,e.data);case 2:return c.def(f.context,e.data);case 3:return c.def("this",e.data);case 4:return e.data.append(b,
c),e.data.ref;case 5:return e.data.toString();case 6:return e.data.map(function(a){return b.invoke(c,a)})}};b.attribCache={};var Kd={};b.scopeAttrib=function(c){c=n.id(c);if(c in Kd)return Kd[c];var b=t.scope[c];b||(b=t.scope[c]=new ha);return Kd[c]=a(b)};return b}function P(c){var a=c["static"];c=c.dynamic;var e;if("profile"in a){var d=!!a.profile;e=f(function(c,b){return d});e.enable=d}else if("profile"in c){var l=c.profile;e=b(l,function(c,b){return c.invoke(b,l)})}return e}function Jb(a,e){var d=
a["static"],l=a.dynamic;if("framebuffer"in d){var D=d.framebuffer;return D?(D=Y.getFramebuffer(D),c.command(D,"invalid framebuffer object"),f(function(c,b){var a=c.link(D),e=c.shared;b.set(e.framebuffer,".next",a);e=e.context;b.set(e,".framebufferWidth",a+".width");b.set(e,".framebufferHeight",a+".height");return a})):f(function(c,b){var a=c.shared;b.set(a.framebuffer,".next","null");a=a.context;b.set(a,".framebufferWidth",a+".drawingBufferWidth");b.set(a,".framebufferHeight",a+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var q=l.framebuffer;return b(q,function(b,a){var e=b.invoke(a,q),G=b.shared,d=G.framebuffer,l=a.def(d,".getFramebuffer(",e,")");c.optional(function(){b.assert(a,"!"+e+"||"+l,"invalid framebuffer object")});a.set(d,".next",l);G=G.context;a.set(G,".framebufferWidth",l+"?"+l+".width:"+G+".drawingBufferWidth");a.set(G,".framebufferHeight",l+"?"+l+".height:"+G+".drawingBufferHeight");return l})}return null}function Za(a,e,d){function l(a){if(a in f){var ma=f[a];c.commandType(ma,
"object","invalid "+a,d.commandStr);var q=!0,td=ma.x|0,g=ma.y|0,h,n;"width"in ma?(h=ma.width|0,c.command(0<=h,"invalid "+a,d.commandStr)):q=!1;"height"in ma?(n=ma.height|0,c.command(0<=n,"invalid "+a,d.commandStr)):q=!1;return new k(!q&&e&&e.thisDep,!q&&e&&e.contextDep,!q&&e&&e.propDep,function(c,b){var a=c.shared.context,e=h;"width"in ma||(e=b.def(a,".","framebufferWidth","-",td));var G=n;"height"in ma||(G=b.def(a,".","framebufferHeight","-",g));return[td,g,e,G]})}if(a in D){var p=D[a],q=b(p,function(b,
e){var G=b.invoke(e,p);c.optional(function(){b.assert(e,G+"&&typeof "+G+'==="object"',"invalid "+a)});var d=b.shared.context,l=e.def(G,".x|0"),f=e.def(G,".y|0"),ma=e.def('"width" in ',G,"?",G,".width|0:","(",d,".","framebufferWidth","-",l,")"),D=e.def('"height" in ',G,"?",G,".height|0:","(",d,".","framebufferHeight","-",f,")");c.optional(function(){b.assert(e,ma+">=0&&"+D+">=0","invalid "+a)});return[l,f,ma,D]});e&&(q.thisDep=q.thisDep||e.thisDep,q.contextDep=q.contextDep||e.contextDep,q.propDep=
q.propDep||e.propDep);return q}return e?new k(e.thisDep,e.contextDep,e.propDep,function(c,b){var a=c.shared.context;return[0,0,b.def(a,".","framebufferWidth"),b.def(a,".","framebufferHeight")]}):null}var f=a["static"],D=a.dynamic;if(a=l("viewport")){var q=a;a=new k(a.thisDep,a.contextDep,a.propDep,function(c,b){var a=q.append(c,b),e=c.shared.context;b.set(e,".viewportWidth",a[2]);b.set(e,".viewportHeight",a[3]);return a})}return{viewport:a,scissor_box:l("scissor.box")}}function T(b,a){var e=b["static"];
if("string"===typeof e.frag&&"string"===typeof e.vert){if(0<sa(a.dynamic).length)return null;var e=a["static"],d=sa(e);if(0<d.length&&"number"===typeof e[d[0]]){for(var l=[],f=0;f<d.length;++f)c("number"===typeof e[d[f]],"must specify all vertex attribute locations when using vaos"),l.push([e[d[f]]|0,d[f]]);return l}}return null}function r(a,e,d){function l(a){if(a in D){var e=n.id(D[a]);c.optional(function(){gb.shader(q[a],e,c.guessCommand())});var G=f(function(){return e});G.id=e;return G}if(a in
g){var d=g[a];return b(d,function(b,e){var G=b.invoke(e,d),l=e.def(b.shared.strings,".id(",G,")");c.optional(function(){e(b.shared.shader,".shader(",q[a],",",l,",",b.command,");")});return l})}return null}var D=a["static"],g=a.dynamic,h=l("frag"),p=l("vert"),Kd=null;w(h)&&w(p)?(Kd=gb.program(p.id,h.id,null,d),a=f(function(c,b){return c.link(Kd)})):a=new k(h&&h.thisDep||p&&p.thisDep,h&&h.contextDep||p&&p.contextDep,h&&h.propDep||p&&p.propDep,function(b,a){var e=b.shared.shader,G;G=h?h.append(b,a):
a.def(e,".","frag");var d;d=p?p.append(b,a):a.def(e,".","vert");var l=e+".program("+d+","+G;c.optional(function(){l+=","+b.command});return a.def(l+")")});return{frag:h,vert:p,progVar:a,program:Kd}}function ja(d,G){function l(a,e){if(a in D){var d=D[a]|0;e?h.offset=d:h.instances=d;c.command(!e||0<=d,"invalid "+a,G.commandStr);return f(function(c,b){e&&(c.OFFSET=d);return d})}if(a in q){var ma=q[a];return b(ma,function(b,G){var d=b.invoke(G,ma);e&&(b.OFFSET=d,c.optional(function(){b.assert(G,d+">=0",
"invalid "+a)}));return d})}if(e){if(Kd)return f(function(c,b){return c.OFFSET=0});if(g)return new k(n.thisDep,n.contextDep,n.propDep,function(c,b){return b.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.offset:0")})}else if(g)return new k(n.thisDep,n.contextDep,n.propDep,function(c,b){return b.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.instances:-1")});return null}var D=d["static"],q=d.dynamic,h={},g=!1,n=function(){if("vao"in D){var c=D.vao;null!==c&&null===t.getVAO(c)&&
(c=t.createVAO(c));g=!0;h.vao=c;return f(function(b){var a=t.getVAO(c);return a?b.link(a):"null"})}if("vao"in q){g=!0;var a=q.vao;return b(a,function(c,b){var e=c.invoke(b,a);return b.def(c.shared.vao+".getVAO("+e+")")})}return null}(),Kd=!1,p=function(){if("elements"in D){var d=D.elements;h.elements=d;if(a(d)){var l=h.elements=e.create(d,!0),d=e.getElements(l);Kd=!0}else d&&(d=e.getElements(d),Kd=!0,c.command(d,"invalid elements",G.commandStr));l=f(function(c,b){if(d){var a=c.link(d);return c.ELEMENTS=
a}return c.ELEMENTS=null});l.value=d;return l}if("elements"in q){Kd=!0;var ma=q.elements;return b(ma,function(b,a){var e=b.shared,d=e.isBufferArgs,e=e.elements,G=b.invoke(a,ma),l=a.def("null"),d=a.def(d,"(",G,")"),f=b.cond(d).then(l,"=",e,".createStream(",G,");")["else"](l,"=",e,".getElements(",G,");");c.optional(function(){b.assert(f["else"],"!"+G+"||"+l,"invalid elements")});a.entry(f);a.exit(b.cond(d).then(e,".destroyStream(",l,");"));return b.ELEMENTS=l})}return g?new k(n.thisDep,n.contextDep,
n.propDep,function(c,b){return b.def(c.shared.vao+".currentVAO?"+c.shared.elements+".getElements("+c.shared.vao+".currentVAO.elements):null")}):null}(),td=l("offset",!0),u=function(){if("primitive"in D){var a=D.primitive;h.primitive=a;c.commandParameter(a,C,"invalid primitve",G.commandStr);return f(function(c,b){return C[a]})}if("primitive"in q){var e=q.primitive;return b(e,function(b,a){var d=b.constants.primTypes,G=b.invoke(a,e);c.optional(function(){b.assert(a,G+" in "+d,"invalid primitive, must be one of "+
sa(C))});return a.def(d,"[",G,"]")})}return Kd?w(p)?p.value?f(function(c,b){return b.def(c.ELEMENTS,".primType")}):f(function(){return 4}):new k(p.thisDep,p.contextDep,p.propDep,function(c,b){var a=c.ELEMENTS;return b.def(a,"?",a,".primType:",4)}):g?new k(n.thisDep,n.contextDep,n.propDep,function(c,b){return b.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.primitive:4")}):null}(),r=function(){if("count"in D){var a=D.count|0;h.count=a;c.command("number"===typeof a&&0<=a,"invalid vertex count",
G.commandStr);return f(function(){return a})}if("count"in q){var e=q.count;return b(e,function(b,a){var d=b.invoke(a,e);c.optional(function(){b.assert(a,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(Kd){if(w(p)){if(p)return td?new k(td.thisDep,td.contextDep,td.propDep,function(b,a){var e=a.def(b.ELEMENTS,".vertCount-",b.OFFSET);c.optional(function(){b.assert(a,e+">=0","invalid vertex offset/element buffer too small")});return e}):f(function(c,b){return b.def(c.ELEMENTS,
".vertCount")});var d=f(function(){return-1});c.optional(function(){d.MISSING=!0});return d}var l=new k(p.thisDep||td.thisDep,p.contextDep||td.contextDep,p.propDep||td.propDep,function(c,b){var a=c.ELEMENTS;return c.OFFSET?b.def(a,"?",a,".vertCount-",c.OFFSET,":-1"):b.def(a,"?",a,".vertCount:-1")});c.optional(function(){l.DYNAMIC=!0});return l}return g?new k(n.thisDep,n.contextDep,n.propDep,function(c,b){return b.def(c.shared.vao,".currentVAO?",c.shared.vao,".currentVAO.count:-1")}):null}(),z=l("instances",
!1);return{elements:p,primitive:u,count:r,instances:z,offset:td,vao:n,vaoActive:g,elementsActive:Kd,"static":h}}function ba(a,e){var d=a["static"],l=a.dynamic,D={};ca.forEach(function(a){function q(c,e){if(a in d){var G=c(d[a]);D[ma]=f(function(){return G})}else if(a in l){var h=l[a];D[ma]=b(h,function(c,a){return e(c,a,c.invoke(a,h))})}}var ma=K(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return q(function(b){c.commandType(b,
"boolean",a,e.commandStr);return b},function(b,e,d){c.optional(function(){b.assert(e,"typeof "+d+'==="boolean"',"invalid flag "+a,b.commandStr)});return d});case "depth.func":return q(function(b){c.commandParameter(b,p,"invalid "+a,e.commandStr);return p[b]},function(b,e,d){var G=b.constants.compareFuncs;c.optional(function(){b.assert(e,d+" in "+G,"invalid "+a+", must be one of "+sa(p))});return e.def(G,"[",d,"]")});case "depth.range":return q(function(a){c.command(y(a)&&2===a.length&&"number"===
typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",e.commandStr);return a},function(a,b,e){c.optional(function(){a.assert(b,a.shared.isArrayLike+"("+e+")&&"+e+".length===2&&typeof "+e+'[0]==="number"&&typeof '+e+'[1]==="number"&&'+e+"[0]<="+e+"[1]","depth range must be a 2d array")});var d=b.def("+",e,"[0]"),G=b.def("+",e,"[1]");return[d,G]});case "blend.func":return q(function(a){c.commandType(a,"object","blend.func",e.commandStr);var b="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in
a?a.srcAlpha:a.src,l="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;c.commandParameter(b,O,ma+".srcRGB",e.commandStr);c.commandParameter(d,O,ma+".srcAlpha",e.commandStr);c.commandParameter(l,O,ma+".dstRGB",e.commandStr);c.commandParameter(a,O,ma+".dstAlpha",e.commandStr);c.command(-1===Zb.indexOf(b+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+l+")",e.commandStr);return[O[b],O[l],O[d],O[a]]},function(b,e,d){function G(q,D){var f=e.def('"',q,D,'" in ',d,"?",d,
".",q,D,":",d,".",q);c.optional(function(){b.assert(e,f+" in "+l,"invalid "+a+"."+q+D+", must be one of "+sa(O))});return f}var l=b.constants.blendFuncs;c.optional(function(){b.assert(e,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var q=G("src","RGB"),D=G("dst","RGB");c.optional(function(){b.assert(e,b.constants.invalidBlendCombinations+".indexOf("+q+'+", "+'+D+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=e.def(l,"[",q,"]"),ma=e.def(l,"[",
G("src","Alpha"),"]"),h=e.def(l,"[",D,"]"),n=e.def(l,"[",G("dst","Alpha"),"]");return[f,h,ma,n]});case "blend.equation":return q(function(b){if("string"===typeof b)return c.commandParameter(b,ua,"invalid "+a,e.commandStr),[ua[b],ua[b]];if("object"===typeof b)return c.commandParameter(b.rgb,ua,a+".rgb",e.commandStr),c.commandParameter(b.alpha,ua,a+".alpha",e.commandStr),[ua[b.rgb],ua[b.alpha]];c.commandRaise("invalid blend.equation",e.commandStr)},function(b,e,d){var G=b.constants.blendEquations,l=
e.def(),q=e.def(),D=b.cond("typeof ",d,'==="string"');c.optional(function(){function c(a,e,d){b.assert(a,d+" in "+G,"invalid "+e+", must be one of "+sa(ua))}c(D.then,a,d);b.assert(D["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);c(D["else"],a+".rgb",d+".rgb");c(D["else"],a+".alpha",d+".alpha")});D.then(l,"=",q,"=",G,"[",d,"];");D["else"](l,"=",G,"[",d,".rgb];",q,"=",G,"[",d,".alpha];");e(D);return[l,q]});case "blend.color":return q(function(a){c.command(y(a)&&4===a.length,"blend.color must be a 4d array",
e.commandStr);return ea(4,function(c){return+a[c]})},function(a,b,e){c.optional(function(){a.assert(b,a.shared.isArrayLike+"("+e+")&&"+e+".length===4","blend.color must be a 4d array")});return ea(4,function(c){return b.def("+",e,"[",c,"]")})});case "stencil.mask":return q(function(a){c.commandType(a,"number",ma,e.commandStr);return a|0},function(a,b,e){c.optional(function(){a.assert(b,"typeof "+e+'==="number"',"invalid stencil.mask")});return b.def(e,"|0")});case "stencil.func":return q(function(b){c.commandType(b,
"object",ma,e.commandStr);var d=b.cmp||"keep",l=b.ref||0;b="mask"in b?b.mask:-1;c.commandParameter(d,p,a+".cmp",e.commandStr);c.commandType(l,"number",a+".ref",e.commandStr);c.commandType(b,"number",a+".mask",e.commandStr);return[p[d],l,b]},function(b,a,e){var d=b.constants.compareFuncs;c.optional(function(){function c(){b.assert(a,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(e+"&&typeof ",e,'==="object"');c('!("cmp" in ',e,")||(",e,".cmp in ",d,")")});var G=a.def('"cmp" in ',
e,"?",d,"[",e,".cmp]",":",7680),l=a.def(e,".ref|0"),D=a.def('"mask" in ',e,"?",e,".mask|0:-1");return[G,l,D]});case "stencil.opFront":case "stencil.opBack":return q(function(b){c.commandType(b,"object",ma,e.commandStr);var d=b.fail||"keep",l=b.zfail||"keep";b=b.zpass||"keep";c.commandParameter(d,g,a+".fail",e.commandStr);c.commandParameter(l,g,a+".zfail",e.commandStr);c.commandParameter(b,g,a+".zpass",e.commandStr);return["stencil.opBack"===a?1029:1028,g[d],g[l],g[b]]},function(b,e,d){function G(D){c.optional(function(){b.assert(e,
'!("'+D+'" in '+d+")||("+d+"."+D+" in "+l+")","invalid "+a+"."+D+", must be one of "+sa(g))});return e.def('"',D,'" in ',d,"?",l,"[",d,".",D,"]:",7680)}var l=b.constants.stencilOps;c.optional(function(){b.assert(e,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,G("fail"),G("zfail"),G("zpass")]});case "polygonOffset.offset":return q(function(b){c.commandType(b,"object",ma,e.commandStr);var a=b.factor|0;b=b.units|0;c.commandType(a,"number",ma+".factor",e.commandStr);
c.commandType(b,"number",ma+".units",e.commandStr);return[a,b]},function(b,e,d){c.optional(function(){b.assert(e,d+"&&typeof "+d+'==="object"',"invalid "+a)});var G=e.def(d,".factor|0"),l=e.def(d,".units|0");return[G,l]});case "cull.face":return q(function(b){var a=0;"front"===b?a=1028:"back"===b&&(a=1029);c.command(!!a,ma,e.commandStr);return a},function(b,a,e){c.optional(function(){b.assert(a,e+'==="front"||'+e+'==="back"',"invalid cull.face")});return a.def(e,'==="front"?',1028,":",1029)});case "lineWidth":return q(function(b){c.command("number"===
typeof b&&b>=I.lineWidthDims[0]&&b<=I.lineWidthDims[1],"invalid line width, must be a positive number between "+I.lineWidthDims[0]+" and "+I.lineWidthDims[1],e.commandStr);return b},function(b,a,e){c.optional(function(){b.assert(a,"typeof "+e+'==="number"&&'+e+">="+I.lineWidthDims[0]+"&&"+e+"<="+I.lineWidthDims[1],"invalid line width")});return e});case "frontFace":return q(function(b){c.commandParameter(b,S,ma,e.commandStr);return S[b]},function(b,a,e){c.optional(function(){b.assert(a,e+'==="cw"||'+
e+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return a.def(e+'==="cw"?2304:2305')});case "colorMask":return q(function(b){c.command(y(b)&&4===b.length,"color.mask must be length 4 array",e.commandStr);return b.map(function(b){return!!b})},function(b,a,e){c.optional(function(){b.assert(a,b.shared.isArrayLike+"("+e+")&&"+e+".length===4","invalid color.mask")});return ea(4,function(b){return"!!"+e+"["+b+"]"})});case "sample.coverage":return q(function(b){c.command("object"===typeof b&&b,
ma,e.commandStr);var a="value"in b?b.value:1;b=!!b.invert;c.command("number"===typeof a&&0<=a&&1>=a,"sample.coverage.value must be a number between 0 and 1",e.commandStr);return[a,b]},function(b,a,e){c.optional(function(){b.assert(a,e+"&&typeof "+e+'==="object"',"invalid sample.coverage")});var d=a.def('"value" in ',e,"?+",e,".value:1"),G=a.def("!!",e,".invert");return[d,G]})}});return D}function Ha(a,e){var d=a["static"],l=a.dynamic,D={};sa(d).forEach(function(b){var a=d[b],l;if("number"===typeof a||
"boolean"===typeof a)l=f(function(){return a});else if("function"===typeof a){var q=a._reglType;"texture2d"===q||"textureCube"===q?l=f(function(b){return b.link(a)}):"framebuffer"===q||"framebufferCube"===q?(c.command(0<a.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',e.commandStr),l=f(function(b){return b.link(a.color[0])})):c.commandRaise('invalid data for uniform "'+b+'"',e.commandStr)}else y(a)?l=f(function(e){return e.global.def("[",ea(a.length,function(d){c.command("number"===
typeof a[d]||"boolean"===typeof a[d],"invalid uniform "+b,e.commandStr);return a[d]}),"]")}):c.commandRaise('invalid or missing data for uniform "'+b+'"',e.commandStr);l.value=a;D[b]=l});sa(l).forEach(function(a){var c=l[a];D[a]=b(c,function(b,a){return b.invoke(a,c)})});return D}function Ja(e,d){var l=e["static"],D=e.dynamic,q={};sa(l).forEach(function(b){var e=l[b],D=n.id(b),ma=new ha;if(a(e))ma.state=1,ma.buffer=da.getBuffer(da.create(e,34962,!1,!0)),ma.type=0;else{var h=da.getBuffer(e);if(h)ma.state=
1,ma.buffer=h,ma.type=0;else if(c.command("object"===typeof e&&e,"invalid data for attribute "+b,d.commandStr),"constant"in e){var g=e.constant;ma.buffer="null";ma.state=2;"number"===typeof g?ma.x=g:(c.command(y(g)&&0<g.length&&4>=g.length,"invalid constant for attribute "+b,d.commandStr),J.forEach(function(b,a){a<g.length&&(ma[b]=g[a])}))}else{h=a(e.buffer)?da.getBuffer(da.create(e.buffer,34962,!1,!0)):da.getBuffer(e.buffer);c.command(!!h,'missing buffer for attribute "'+b+'"',d.commandStr);var p=
e.offset|0;c.command(0<=p,'invalid offset for attribute "'+b+'"',d.commandStr);var k=e.stride|0;c.command(0<=k&&256>k,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',d.commandStr);var u=e.size|0;c.command(!("size"in e)||0<u&&4>=u,'invalid size for attribute "'+b+'", must be 1,2,3,4',d.commandStr);var r=!!e.normalized,z=0;"type"in e&&(c.commandParameter(e.type,B,"invalid type for attribute "+b,d.commandStr),z=B[e.type]);var w=e.divisor|0;c.optional(function(){"divisor"in e&&
(c.command(0===w||V,'cannot specify divisor for attribute "'+b+'", instancing not supported',d.commandStr),c.command(0<=w,'invalid divisor for attribute "'+b+'"',d.commandStr));var a=d.commandStr,l="buffer offset divisor normalized type size stride".split(" ");sa(e).forEach(function(e){c.command(0<=l.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+b+'" (valid parameters are '+l+")",a)})});ma.buffer=h;ma.state=1;ma.size=u;ma.normalized=r;ma.type=z||h.dtype;ma.offset=p;ma.stride=k;ma.divisor=
w}}q[b]=f(function(b,a){var c=b.attribCache;if(D in c)return c[D];var e={isStream:!1};sa(ma).forEach(function(b){e[b]=ma[b]});ma.buffer&&(e.buffer=b.link(ma.buffer),e.type=e.type||e.buffer+".dtype");return c[D]=e})});sa(D).forEach(function(a){var e=D[a];q[a]=b(e,function(b,d){function l(b){d(h[b],"=",G,".",b,"|0;")}var G=b.invoke(d,e),D=b.shared,q=b.constants,ma=D.isBufferArgs,f=D.buffer;c.optional(function(){b.assert(d,G+"&&(typeof "+G+'==="object"||typeof '+G+'==="function")&&('+ma+"("+G+")||"+
f+".getBuffer("+G+")||"+f+".getBuffer("+G+".buffer)||"+ma+"("+G+'.buffer)||("constant" in '+G+"&&(typeof "+G+'.constant==="number"||'+D.isArrayLike+"("+G+".constant))))",'invalid dynamic attribute "'+a+'"')});var h={isStream:d.def(!1)},g=new ha;g.state=1;sa(g).forEach(function(b){h[b]=d.def(""+g[b])});var n=h.buffer,p=h.type;d("if(",ma,"(",G,")){",h.isStream,"=true;",n,"=",f,".createStream(",34962,",",G,");",p,"=",n,".dtype;","}else{",n,"=",f,".getBuffer(",G,");","if(",n,"){",p,"=",n,".dtype;",'}else if("constant" in ',
G,"){",h.state,"=",2,";","if(typeof "+G+'.constant === "number"){',h[J[0]],"=",G,".constant;",J.slice(1).map(function(b){return h[b]}).join("="),"=0;","}else{",J.map(function(b,a){return h[b]+"="+G+".constant.length>"+a+"?"+G+".constant["+a+"]:0;"}).join(""),"}}else{","if(",ma,"(",G,".buffer)){",n,"=",f,".createStream(",34962,",",G,".buffer);","}else{",n,"=",f,".getBuffer(",G,".buffer);","}",p,'="type" in ',G,"?",q.glTypes,"[",G,".type]:",n,".dtype;",h.normalized,"=!!",G,".normalized;");l("size");
l("offset");l("stride");l("divisor");d("}}");d.exit("if(",h.isStream,"){",f,".destroyStream(",n,");","}");return h})});return q}function M(a){var c=a["static"],e=a.dynamic,d={};sa(c).forEach(function(b){var a=c[b];d[b]=f(function(b,c){return"number"===typeof a||"boolean"===typeof a?""+a:b.link(a)})});sa(e).forEach(function(a){var c=e[a];d[a]=b(c,function(b,a){return b.invoke(a,c)})});return d}function Xa(b,a,e,d,l){function D(b){var a=g[b];a&&(u[b]=a)}var q=b["static"],f=b.dynamic;c.optional(function(){function b(e){sa(e).forEach(function(b){c.command(0<=
a.indexOf(b),'unknown parameter "'+b+'"',l.commandStr)})}var a="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ca);b(q);b(f)});var h=T(b,a),n=Jb(b,l),g=Za(b,n,l),p=ja(b,l),u=ba(b,l),z=r(b,l,h);D("viewport");D(K("scissor.box"));var w=0<sa(u).length,n={framebuffer:n,draw:p,shader:z,state:u,dirty:w,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};n.profile=P(b,l);n.uniforms=Ha(e,l);n.drawVAO=n.scopeVAO=p.vao;if(!n.drawVAO&&z.program&&!h&&H.angle_instanced_arrays&&
p["static"].elements){var ka=!0;b=z.program.attributes.map(function(b){b=a["static"][b];ka=ka&&!!b;return b});if(ka&&0<b.length){var v=t.getVAO(t.createVAO({attributes:b,elements:p["static"].elements}));n.drawVAO=new k(null,null,null,function(b,a){return b.link(v)});n.useVAO=!0}}h?n.useVAO=!0:n.attributes=Ja(a,l);n.context=M(d,l);return n}function W(b,a,c){var e=b.shared.context,d=b.scope();sa(c).forEach(function(l){a.save(e,"."+l);var D=c[l].append(b,a);Array.isArray(D)?d(e,".",l,"=[",D.join(),"];"):
d(e,".",l,"=",D,";")});a(d)}function sb(b,a,c,e){var d=b.shared,l=d.gl,D=d.framebuffer,q;fa&&(q=a.def(d.extensions,".webgl_draw_buffers"));var f=b.constants,d=f.drawBuffer,f=f.backBuffer;b=c?c.append(b,a):a.def(D,".next");e||a("if(",b,"!==",D,".cur){");a("if(",b,"){",l,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&a(q,".drawBuffersWEBGL(",d,"[",b,".colorAttachments.length]);");a("}else{",l,".bindFramebuffer(",36160,",null);");fa&&a(q,".drawBuffersWEBGL(",f,");");a("}",D,".cur=",b,";");e||
a("}")}function ga(b,a,c){var e=b.shared,d=e.gl,l=b.current,q=b.next,f=e.current,h=e.next,n=b.cond(f,".dirty");ca.forEach(function(a){a=K(a);if(!(a in c.state)){var e,G;if(a in q){e=q[a];G=l[a];var g=ea(F[a].length,function(b){return n.def(e,"[",b,"]")});n(b.cond(g.map(function(b,a){return b+"!=="+G+"["+a+"]"}).join("||")).then(d,".",xa[a],"(",g,");",g.map(function(b,a){return G+"["+a+"]="+b}).join(";"),";"))}else e=n.def(h,".",a),g=b.cond(e,"!==",f,".",a),n(g),a in D?g(b.cond(e).then(d,".enable(",
D[a],");")["else"](d,".disable(",D[a],");"),f,".",a,"=",e,";"):g(d,".",xa[a],"(",e,");",f,".",a,"=",e,";")}});0===sa(c.state).length&&n(f,".dirty=false;");a(n)}function va(b,a,e,c){var l=b.shared,q=b.current,f=l.current,h=l.gl;d(sa(e)).forEach(function(d){var l=e[d];if(!c||c(l)){var n=l.append(b,a);if(D[d]){var g=D[d];w(l)?n?a(h,".enable(",g,");"):a(h,".disable(",g,");"):a(b.cond(n).then(h,".enable(",g,");")["else"](h,".disable(",g,");"));a(f,".",d,"=",n,";")}else if(y(n)){var p=q[d];a(h,".",xa[d],
"(",n,");",n.map(function(b,a){return p+"["+a+"]="+b}).join(";"),";")}else a(h,".",xa[d],"(",n,");",f,".",d,"=",n,";")}})}function Xb(b,a){V&&(b.instancing=a.def(b.shared.extensions,".angle_instanced_arrays"))}function qc(b,a,e,c,d){function l(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function D(b){k=a.def();b(k,"=",l(),";");"string"===typeof d?b(h,".count+=",d,";"):b(h,".count++;");Aa&&(c?(u=a.def(),b(u,"=",p,".getNumPendingQueries();")):b(p,".beginQuery(",h,");"))}
function q(b){b(h,".cpuTime+=",l(),"-",k,";");Aa&&(c?b(p,".pushScopeStats(",u,",",p,".getNumPendingQueries(),",h,");"):b(p,".endQuery();"))}function f(b){var e=a.def(g,".profile");a(g,".profile=",b,";");a.exit(g,".profile=",e,";")}var n=b.shared,h=b.stats,g=n.current,p=n.timer;e=e.profile;var k,u;if(e){if(w(e)){e.enable?(D(a),q(a.exit),f("true")):f("false");return}e=e.append(b,a);f(e)}else e=a.def(g,".profile");n=b.block();D(n);a("if(",e,"){",n,"}");b=b.block();q(b);a.exit("if(",e,"){",b,"}")}function sc(b,
a,e,d,l){function D(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function q(e,c,d){function l(){a("if(!",g,".buffer){",n,".enableVertexAttribArray(",h,");}");var e=d.type,D;D=d.size?a.def(d.size,"||",c):c;a("if(",g,".type!==",e,"||",g,".size!==",D,"||",u.map(function(b){return g+"."+b+"!=="+d[b]}).join("||"),"){",n,".bindBuffer(",34962,",",p,".buffer);",n,".vertexAttribPointer(",[h,D,e,
d.normalized,d.stride,d.offset],");",g,".type=",e,";",g,".size=",D,";",u.map(function(b){return g+"."+b+"="+d[b]+";"}).join(""),"}");V&&(e=d.divisor,a("if(",g,".divisor!==",e,"){",b.instancing,".vertexAttribDivisorANGLE(",[h,e],");",g,".divisor=",e,";}"))}function D(){a("if(",g,".buffer){",n,".disableVertexAttribArray(",h,");",g,".buffer=null;","}if(",J.map(function(b,a){return g+"."+b+"!=="+k[a]}).join("||"),"){",n,".vertexAttrib4f(",h,",",k,");",J.map(function(b,a){return g+"."+b+"="+k[a]+";"}).join(""),
"}")}var n=f.gl,h=a.def(e,".location"),g=a.def(f.attributes,"[",h,"]");e=d.state;var p=d.buffer,k=[d.x,d.y,d.z,d.w],u=["buffer","normalized","offset","stride"];1===e?l():2===e?D():(a("if(",e,"===",1,"){"),l(),a("}else{"),D(),a("}"))}var f=b.shared;d.forEach(function(d){var f=d.name,h=e.attributes[f],n;if(h){if(!l(h))return;n=h.append(b,a)}else{if(!l(X))return;var g=b.scopeAttrib(f);c.optional(function(){b.assert(a,g+".state","missing attribute "+f)});n={};sa(new ha).forEach(function(b){n[b]=a.def(g,
".",b)})}q(b.link(d),D(d.info.type),n)})}function ud(b,a,e,d,l,D){for(var f=b.shared,q=f.gl,h,g=0;g<d.length;++g){var p=d[g],k=p.name,u=p.info.type,z=e.uniforms[k],p=b.link(p)+".location",r;if(z){if(!l(z))continue;if(w(z)){var ka=z.value;c.command(null!==ka&&"undefined"!==typeof ka,'missing uniform "'+k+'"',b.commandStr);if(35678===u||35680===u)c.command("function"===typeof ka&&(35678===u&&("texture2d"===ka._reglType||"framebuffer"===ka._reglType)||35680===u&&("textureCube"===ka._reglType||"framebufferCube"===
ka._reglType)),"invalid texture for uniform "+k,b.commandStr),z=b.link(ka._texture||ka.color[0]._texture),a(q,".uniform1i(",p,",",z+".bind());"),a.exit(z,".unbind();");else if(35674===u||35675===u||35676===u){c.optional(function(){c.command(y(ka),"invalid matrix for uniform "+k,b.commandStr);c.command(35674===u&&4===ka.length||35675===u&&9===ka.length||35676===u&&16===ka.length,"invalid length for matrix uniform "+k,b.commandStr)});var z=b.global.def("new Float32Array(["+Array.prototype.slice.call(ka)+
"])"),v=2;35675===u?v=3:35676===u&&(v=4);a(q,".uniformMatrix",v,"fv(",p,",false,",z,");")}else{switch(u){case 5126:c.commandType(ka,"number","uniform "+k,b.commandStr);h="1f";break;case 35664:c.command(y(ka)&&2===ka.length,"uniform "+k,b.commandStr);h="2f";break;case 35665:c.command(y(ka)&&3===ka.length,"uniform "+k,b.commandStr);h="3f";break;case 35666:c.command(y(ka)&&4===ka.length,"uniform "+k,b.commandStr);h="4f";break;case 35670:c.commandType(ka,"boolean","uniform "+k,b.commandStr);h="1i";break;
case 5124:c.commandType(ka,"number","uniform "+k,b.commandStr);h="1i";break;case 35671:c.command(y(ka)&&2===ka.length,"uniform "+k,b.commandStr);h="2i";break;case 35667:c.command(y(ka)&&2===ka.length,"uniform "+k,b.commandStr);h="2i";break;case 35672:c.command(y(ka)&&3===ka.length,"uniform "+k,b.commandStr);h="3i";break;case 35668:c.command(y(ka)&&3===ka.length,"uniform "+k,b.commandStr);h="3i";break;case 35673:c.command(y(ka)&&4===ka.length,"uniform "+k,b.commandStr);h="4i";break;case 35669:c.command(y(ka)&&
4===ka.length,"uniform "+k,b.commandStr),h="4i"}a(q,".uniform",h,"(",p,",",y(ka)?Array.prototype.slice.call(ka):ka,");")}continue}else r=z.append(b,a)}else{if(!l(X))continue;r=a.def(f.uniforms,"[",n.id(k),"]")}35678===u?(c(!Array.isArray(r),"must specify a scalar prop for textures"),a("if(",r,"&&",r,'._reglType==="framebuffer"){',r,"=",r,".color[0];","}")):35680===u&&(c(!Array.isArray(r),"must specify a scalar prop for cube maps"),a("if(",r,"&&",r,'._reglType==="framebufferCube"){',r,"=",r,".color[0];",
"}"));c.optional(function(){function e(c,d){b.assert(a,c,'bad data or missing for uniform "'+k+'".  '+d)}function d(b){c(!Array.isArray(r),"must not specify an array type for uniform");e("typeof "+r+'==="'+b+'"',"invalid type, expected "+b)}function l(a,d){Array.isArray(r)?c(r.length===a,"must have length "+a):e(f.isArrayLike+"("+r+")&&"+r+".length==="+a,"invalid vector, should have length "+a,b.commandStr)}function D(a){c(!Array.isArray(r),"must not specify a value type");e("typeof "+r+'==="function"&&'+
r+'._reglType==="texture'+(3553===a?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(u){case 5124:d("number");break;case 35667:l(2,"number");break;case 35668:l(3,"number");break;case 35669:l(4,"number");break;case 5126:d("number");break;case 35664:l(2,"number");break;case 35665:l(3,"number");break;case 35666:l(4,"number");break;case 35670:d("boolean");break;case 35671:l(2,"boolean");break;case 35672:l(3,"boolean");break;case 35673:l(4,"boolean");break;case 35674:l(4,"number");break;case 35675:l(9,
"number");break;case 35676:l(16,"number");break;case 35678:D(3553);break;case 35680:D(34067)}});z=1;switch(u){case 35678:case 35680:z=a.def(r,"._texture");a(q,".uniform1i(",p,",",z,".bind());");a.exit(z,".unbind();");continue;case 5124:case 35670:h="1i";break;case 35667:case 35671:h="2i";z=2;break;case 35668:case 35672:h="3i";z=3;break;case 35669:case 35673:h="4i";z=4;break;case 5126:h="1f";break;case 35664:h="2f";z=2;break;case 35665:h="3f";z=3;break;case 35666:h="4f";z=4;break;case 35674:h="Matrix2fv";
break;case 35675:h="Matrix3fv";break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){a(q,".uniform",h,"(",p,",");var p=Math.pow(u-35674+2,2),sa=b.global.def("new Float32Array(",p,")");Array.isArray(r)?a("false,(",ea(p,function(b){return sa+"["+b+"]="+r[b]}),",",sa,")"):a("false,(Array.isArray(",r,")||",r," instanceof Float32Array)?",r,":(",ea(p,function(b){return sa+"["+b+"]="+r+"["+b+"]"}),",",sa,")");a(");")}else{if(1<z){for(var v=[],xa=[],L=0;L<z;++L)Array.isArray(r)?xa.push(r[L]):xa.push(a.def(r+
"["+L+"]")),D&&v.push(a.def());D&&a("if(!",b.batchId,"||",v.map(function(b,a){return b+"!=="+xa[a]}).join("||"),"){",v.map(function(b,a){return b+"="+xa[a]+";"}).join(""));a(q,".uniform",h,"(",p,",",xa.join(","),");")}else c(!Array.isArray(r),"uniform value must not be an array"),D&&(z=a.def(),a("if(!",b.batchId,"||",z,"!==",r,"){",z,"=",r,";")),a(q,".uniform",h,"(",p,",",r,");");D&&a("}")}}}function xc(b,a,e,d){function l(c){var D=g[c];return D?D.contextDep&&d.contextDynamic||D.propDep?D.append(b,
e):D.append(b,a):a.def(n,".",c)}function D(){function b(){e(z,".drawElementsInstancedANGLE(",[k,u,v,r+"<<(("+v+"-5121)>>1)",ka],");")}function a(){e(z,".drawArraysInstancedANGLE(",[k,r,u,ka],");")}p&&"null"!==p?sa?b():(e("if(",p,"){"),b(),e("}else{"),a(),e("}")):a()}function q(){function b(){e(h+".drawElements("+[k,u,v,r+"<<(("+v+"-5121)>>1)"]+");")}function a(){e(h+".drawArrays("+[k,r,u]+");")}p&&"null"!==p?sa?b():(e("if(",p,"){"),b(),e("}else{"),a(),e("}")):a()}var f=b.shared,h=f.gl,n=f.draw,g=
d.draw,p=function(){var c=g.elements,l=a;if(c){if(c.contextDep&&d.contextDynamic||c.propDep)l=e;c=c.append(b,l);g.elementsActive&&l("if("+c+")"+h+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=l.def(),l(c,"=",n,".","elements",";","if(",c,"){",h,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",f.vao,".currentVAO){",c,"=",b.shared.elements+".getElements("+f.vao,".currentVAO.elements);",na?"":"if("+c+")"+h+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),k=l("primitive"),r=l("offset"),
u=function(){var l=g.count,D,q=a;if(l){if(l.contextDep&&d.contextDynamic||l.propDep)q=e;D=l.append(b,q);c.optional(function(){l.MISSING&&b.assert(a,"false","missing vertex count");l.DYNAMIC&&b.assert(q,D+">=0","missing vertex count")})}else D=q.def(n,".","count"),c.optional(function(){b.assert(q,D+">=0","missing vertex count")});return D}();if("number"===typeof u){if(0===u)return}else e("if(",u,"){"),e.exit("}");var ka,z;V&&(ka=l("instances"),z=b.instancing);var v=p+".type",sa=g.elements&&w(g.elements)&&
!g.vaoActive;V&&("number"!==typeof ka||0<=ka)?"string"===typeof ka?(e("if(",ka,">0){"),D(),e("}else if(",ka,"<0){"),q(),e("}")):D():q()}function aa(b,a,e,d,l){var D=oa();l=D.proc("body",l);c.optional(function(){D.commandStr=a.commandStr;D.command=D.link(a.commandStr)});V&&(D.instancing=l.def(D.shared.extensions,".angle_instanced_arrays"));b(D,l,e,d);return D.compile().body}function L(b,a,e,c){Xb(b,a);e.useVAO?e.drawVAO?a(b.shared.vao,".setVAO(",e.drawVAO.append(b,a),");"):a(b.shared.vao,".setVAO(",
b.shared.vao,".targetVAO);"):(a(b.shared.vao,".setVAO(null);"),sc(b,a,e,c.attributes,function(){return!0}));ud(b,a,e,c.uniforms,function(){return!0},!1);xc(b,a,a,e)}function ia(b,a){var e=b.proc("draw",1);Xb(b,e);W(b,e,a.context);sb(b,e,a.framebuffer);ga(b,e,a);va(b,e,a.state);qc(b,e,a,!1,!0);var c=a.shader.progVar.append(b,e);e(b.shared.gl,".useProgram(",c,".program);");if(a.shader.program)L(b,e,a,a.shader.program);else{e(b.shared.vao,".setVAO(null);");var d=b.global.def("{}"),l=e.def(c,".id"),D=
e.def(d,"[",l,"]");e(b.cond(D).then(D,".call(this,a0);")["else"](D,"=",d,"[",l,"]=",b.link(function(e){return aa(L,b,a,e,1)}),"(",c,");",D,".call(this,a0);"))}0<sa(a.state).length&&e(b.shared.current,".dirty=true;");b.shared.vao&&e(b.shared.vao,".setVAO(null);")}function Da(b,a,e,c){function d(){return!0}b.batchId="a1";Xb(b,a);sc(b,a,e,c.attributes,d);ud(b,a,e,c.uniforms,d,!1);xc(b,a,a,e)}function tb(b,a,e,c){function d(b){return b.contextDep&&D||b.propDep}function l(b){return!d(b)}Xb(b,a);var D=
e.contextDep,q=a.def(),f=a.def();b.shared.props=f;b.batchId=q;var h=b.scope(),n=b.scope();a(h.entry,"for(",q,"=0;",q,"<","a1",";++",q,"){",f,"=","a0","[",q,"];",n,"}",h.exit);e.needsContext&&W(b,n,e.context);e.needsFramebuffer&&sb(b,n,e.framebuffer);va(b,n,e.state,d);e.profile&&d(e.profile)&&qc(b,n,e,!1,!0);c?(e.useVAO?e.drawVAO?d(e.drawVAO)?n(b.shared.vao,".setVAO(",e.drawVAO.append(b,n),");"):h(b.shared.vao,".setVAO(",e.drawVAO.append(b,h),");"):h(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):
(h(b.shared.vao,".setVAO(null);"),sc(b,h,e,c.attributes,l),sc(b,n,e,c.attributes,d)),ud(b,h,e,c.uniforms,l,!1),ud(b,n,e,c.uniforms,d,!0),xc(b,h,n,e)):(a=b.global.def("{}"),c=e.shader.progVar.append(b,n),f=n.def(c,".id"),h=n.def(a,"[",f,"]"),n(b.shared.gl,".useProgram(",c,".program);","if(!",h,"){",h,"=",a,"[",f,"]=",b.link(function(a){return aa(Da,b,e,a,2)}),"(",c,");}",h,".call(this,a0[",q,"],",q,");"))}function $c(b,a){function e(b){return b.contextDep&&d||b.propDep}var c=b.proc("batch",2);b.batchId=
"0";Xb(b,c);var d=!1,l=!0;sa(a.context).forEach(function(b){d=d||a.context[b].propDep});d||(W(b,c,a.context),l=!1);var D=a.framebuffer,q=!1;D?(D.propDep?d=q=!0:D.contextDep&&d&&(q=!0),q||sb(b,c,D)):sb(b,c,null);a.state.viewport&&a.state.viewport.propDep&&(d=!0);ga(b,c,a);va(b,c,a.state,function(b){return!e(b)});a.profile&&e(a.profile)||qc(b,c,a,!1,"a1");a.contextDep=d;a.needsContext=l;a.needsFramebuffer=q;l=a.shader.progVar;if(l.contextDep&&d||l.propDep)tb(b,c,a,null);else if(l=l.append(b,c),c(b.shared.gl,
".useProgram(",l,".program);"),a.shader.program)tb(b,c,a,a.shader.program);else{c(b.shared.vao,".setVAO(null);");var D=b.global.def("{}"),q=c.def(l,".id"),f=c.def(D,"[",q,"]");c(b.cond(f).then(f,".call(this,a0,a1);")["else"](f,"=",D,"[",q,"]=",b.link(function(e){return aa(tb,b,a,e,2)}),"(",l,");",f,".call(this,a0,a1);"))}0<sa(a.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}function ad(b,a){function e(d){var D=a.shader[d];D&&c.set(l.shader,"."+d,D.append(b,
c))}var c=b.proc("scope",3);b.batchId="a2";var l=b.shared,D=l.current;W(b,c,a.context);a.framebuffer&&a.framebuffer.append(b,c);d(sa(a.state)).forEach(function(e){var d=a.state[e].append(b,c);y(d)?d.forEach(function(a,d){c.set(b.next[e],"["+d+"]",a)}):c.set(l.next,"."+e,d)});qc(b,c,a,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(e){var d=a.draw[e];d&&c.set(l.draw,"."+e,""+d.append(b,c))});sa(a.uniforms).forEach(function(e){var d=a.uniforms[e].append(b,c);Array.isArray(d)&&
(d="["+d.join()+"]");c.set(l.uniforms,"["+n.id(e)+"]",d)});sa(a.attributes).forEach(function(e){var d=a.attributes[e].append(b,c),l=b.scopeAttrib(e);sa(new ha).forEach(function(b){c.set(l,"."+b,d[b])})});a.scopeVAO&&c.set(l.vao,".targetVAO",a.scopeVAO.append(b,c));e("vert");e("frag");0<sa(a.state).length&&(c(D,".dirty=true;"),c.exit(D,".dirty=true;"));c("a1(",b.shared.context,",a0,",b.batchId,");")}function E(b){if("object"===typeof b&&!y(b)){for(var a=sa(b),e=0;e<a.length;++e)if(A.isDynamic(b[a[e]]))return!0;
return!1}}function v(a,e,c){function d(b,a){q.forEach(function(e){var c=l[e];A.isDynamic(c)&&(c=b.invoke(a,c),a(g,".",e,"=",c,";"))})}var l=e["static"][c];if(l&&E(l)){var D=a.global,q=sa(l),f=!1,h=!1,n=!1,g=a.global.def("{}");q.forEach(function(e){var c=l[e];if(A.isDynamic(c))"function"===typeof c&&(c=l[e]=A.unbox(c)),e=b(c,null),f=f||e.thisDep,n=n||e.propDep,h=h||e.contextDep;else{D(g,".",e,"=");switch(typeof c){case "number":D(c);break;case "string":D('"',c,'"');break;case "object":Array.isArray(c)&&
D("[",c.join(),"]");break;default:D(a.link(c))}D(";")}});e.dynamic[c]=new A.DynamicVariable(4,{thisDep:f,contextDep:h,propDep:n,ref:g,append:d});delete e["static"][c]}}var ha=t.Record,ua={add:32774,subtract:32778,"reverse subtract":32779};H.ext_blend_minmax&&(ua.min=32775,ua.max=32776);var V=H.angle_instanced_arrays,fa=H.webgl_draw_buffers,na=H.oes_vertex_array_object,F={dirty:!0,profile:Z.profile},u={},ca=[],D={},xa={};N("dither",3024);N("blend.enable",3042);R("blend.color","blendColor",[0,0,0,0]);
R("blend.equation","blendEquationSeparate",[32774,32774]);R("blend.func","blendFuncSeparate",[1,0,1,0]);N("depth.enable",2929,!0);R("depth.func","depthFunc",513);R("depth.range","depthRange",[0,1]);R("depth.mask","depthMask",!0);R("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);R("cull.face","cullFace",1029);R("frontFace","frontFace",2305);R("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);R("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",
32928);R("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);R("stencil.mask","stencilMask",-1);R("stencil.func","stencilFunc",[519,0,-1]);R("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);R("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);R("scissor.box","scissor",[0,0,m.drawingBufferWidth,m.drawingBufferHeight]);R("viewport","viewport",[0,0,m.drawingBufferWidth,m.drawingBufferHeight]);var ka={gl:m,context:ta,strings:n,next:u,current:F,
draw:Rb,elements:e,buffer:da,shader:gb,attributes:t.state,vao:t,uniforms:qa,framebuffer:Y,extensions:H,timer:Aa,isBufferArgs:a},l={primTypes:C,compareFuncs:p,blendFuncs:O,blendEquations:ua,stencilOps:g,glTypes:B,orientationType:S};c.optional(function(){ka.isArrayLike=y});fa&&(l.backBuffer=[1029],l.drawBuffer=ea(I.maxDrawbuffers,function(b){return 0===b?[0]:ea(b,function(b){return 36064+b})}));var kc=0;return{next:u,current:F,procs:function(){var b=oa(),a=b.proc("poll"),e=b.proc("refresh"),c=b.block();
a(c);e(c);var d=b.shared,l=d.gl,q=d.next,f=d.current;c(f,".dirty=false;");sb(b,a);sb(b,e,null,!0);var h;V&&(h=b.link(V));H.oes_vertex_array_object&&e(b.link(H.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<I.maxAttributes;++n){var g=e.def(d.attributes,"[",n,"]"),p=b.cond(g,".buffer");p.then(l,".enableVertexAttribArray(",n,");",l,".bindBuffer(",34962,",",g,".buffer.buffer);",l,".vertexAttribPointer(",n,",",g,".size,",g,".type,",g,".normalized,",g,".stride,",g,".offset);")["else"](l,
".disableVertexAttribArray(",n,");",l,".vertexAttrib4f(",n,",",g,".x,",g,".y,",g,".z,",g,".w);",g,".buffer=null;");e(p);V&&e(h,".vertexAttribDivisorANGLE(",n,",",g,".divisor);")}e(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");sa(D).forEach(function(d){var h=D[d],n=c.def(q,".",d),g=b.block();g("if(",n,"){",l,".enable(",h,")}else{",l,".disable(",h,")}",f,".",d,"=",n,";");e(g);a("if(",n,"!==",f,".",d,"){",g,"}")});sa(xa).forEach(function(d){var D=xa[d],h=F[d],
n,g,p=b.block();p(l,".",D,"(");y(h)?(D=h.length,n=b.global.def(q,".",d),g=b.global.def(f,".",d),p(ea(D,function(b){return n+"["+b+"]"}),");",ea(D,function(b){return g+"["+b+"]="+n+"["+b+"];"}).join("")),a("if(",ea(D,function(b){return n+"["+b+"]!=="+g+"["+b+"]"}).join("||"),"){",p,"}")):(n=c.def(q,".",d),g=c.def(f,".",d),p(n,");",f,".",d,"=",n,";"),a("if(",n,"!==",g,"){",p,"}"));e(p)});return b.compile()}(),compile:function(b,a,e,c,d){var l=oa();l.stats=l.link(d);sa(a["static"]).forEach(function(b){v(l,
a,b)});z.forEach(function(a){v(l,b,a)});var D=Xa(b,a,e,c,l);ia(l,D);ad(l,D);$c(l,D);return x(l.compile(),{destroy:function(){D.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(m,t,M){function a(a,c){this.id=b++;this.type=a;this.data=c}function d(b){if(0===
b.length)return[];var a=b.charAt(0),f=b.charAt(b.length-1);if(1<b.length&&a===f&&('"'===a||"'"===a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return d(b.substr(0,a.index)).concat(d(a[1])).concat(d(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(f=0;f<a.length;++f)b=b.concat(d(a[f]));return b}function k(b){return"["+d(b).join("][")+
"]"}function w(b,c){if("function"===typeof b)return new a(0,b);if("number"===typeof b||"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(b,a){return w(b,c+"["+a+"]")}));if(b instanceof a)return b;f(!1,"invalid option type in uniform "+c)}var f=m("./util/check"),b=0;t.exports={DynamicVariable:a,define:function(b,c){return new a(b,k(c+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:w,accessor:k}},{"./util/check":21}],
10:[function(m,t,M){var a=m("./util/check"),d=m("./util/is-typed-array"),k=m("./util/is-ndarray"),w=m("./util/values"),f=m("./constants/primitives.json"),b=m("./constants/usage.json");t.exports=function(sa,c,x,m){function ea(b){this.id=A++;y[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function H(b,f,w,y,p,g,q){b.buffer.bind();var S;f?((S=q)||d(f)&&(!k(f)||d(f.data))||(S=c.oes_element_index_uint?5125:5123),x._initBuffer(b.buffer,f,w,S,3)):(sa.bufferData(34963,g,w),b.buffer.dtype=
S||5121,b.buffer.usage=w,b.buffer.dimension=3,b.buffer.byteLength=g);S=q;if(!q){switch(b.buffer.dtype){case 5121:case 5120:S=5121;break;case 5123:case 5122:S=5123;break;case 5125:case 5124:S=5125;break;default:a.raise("unsupported type for element array")}b.buffer.dtype=S}b.type=S;a(5125!==S||!!c.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");f=p;0>f&&(f=b.buffer.byteLength,5123===S?f>>=1:5125===S&&(f>>=2));b.vertCount=f;f=y;0>y&&(f=4,y=b.buffer.dimension,
1===y&&(f=0),2===y&&(f=1),3===y&&(f=4));b.primType=f}function I(b){m.elementsCount--;a(null!==b.buffer,"must not double destroy elements");delete y[b.id];b.buffer.destroy();b.buffer=null}var y={},A=0,C={uint8:5121,uint16:5123};c.oes_element_index_uint&&(C.uint32=5125);ea.prototype.bind=function(){this.buffer.bind()};var B=[];return{create:function(c,z){function w(c){if(c)if("number"===typeof c)y(c),p.primType=4,p.vertCount=c|0,p.type=5121;else{var q=null,z=35044,x=-1,sa=-1,n=0,m=0;if(Array.isArray(c)||
d(c)||k(c))q=c;else if(a.type(c,"object","invalid arguments for elements"),"data"in c&&(q=c.data,a(Array.isArray(q)||d(q)||k(q),"invalid data for element buffer")),"usage"in c&&(a.parameter(c.usage,b,"invalid element buffer usage"),z=b[c.usage]),"primitive"in c&&(a.parameter(c.primitive,f,"invalid element buffer primitive"),x=f[c.primitive]),"count"in c&&(a("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),sa=c.count|0),"type"in c&&(a.parameter(c.type,C,"invalid buffer type"),
m=C[c.type]),"length"in c)n=c.length|0;else if(n=sa,5123===m||5122===m)n*=2;else if(5125===m||5124===m)n*=4;H(p,q,z,x,sa,n,m)}else y(),p.primType=4,p.vertCount=0,p.type=5121;return w}var y=x.create(null,34963,!0),p=new ea(y._buffer);m.elementsCount++;w(c);w._reglType="elements";w._elements=p;w.subdata=function(b,a){y.subdata(b,a);return w};w.destroy=function(){I(p)};return w},createStream:function(b){var a=B.pop();a||(a=new ea(x.create(null,34963,!0,!1)._buffer));H(a,b,35040,-1,-1,0,0);return a},
destroyStream:function(b){B.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof ea?b._elements:null},clear:function(){w(y).forEach(I)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(m,t,M){var a=m("./util/sorted-object-keys"),d=m("./util/check");t.exports=function(k,w){function f(a){d.type(a,"string","extension name must be string");a=a.toLowerCase();
var c;try{c=b[a]=k.getExtension(a)}catch(f){}return!!c}for(var b={},sa=0;sa<w.extensions.length;++sa){var c=w.extensions[sa];if(!f(c))return w.onDestroy(),w.onDone('"'+c+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}w.optionalExtensions.forEach(f);return{extensions:b,restore:function(){a(b).forEach(function(a){if(b[a]&&!f(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],
12:[function(m,t,M){var a=m("./util/check"),d=m("./util/values"),k=m("./util/extend"),w=[6407,6408],f=[];f[6408]=4;f[6407]=3;var b=[];b[5121]=1;b[5126]=4;b[36193]=2;var sa=[32854,32855,36194,35907,34842,34843,34836],c={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};t.exports=function(x,m,ea,H,I,y){function A(b,a,e){this.target=b;this.texture=a;this.renderbuffer=e;var c=b=0;a?(b=a.width,c=a.height):e&&(b=e.width,
c=e.height);this.width=b;this.height=c}function C(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function B(b,e,c){if(b){if(b.texture){b=b.texture._texture;var d=Math.max(1,b.height);a(Math.max(1,b.width)===e&&d===c,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,a(b.width===e&&b.height===c,"inconsistent width/height for renderbuffer");b.refCount+=1}}function J(b,a){a&&(a.texture?x.framebufferTexture2D(36160,
b,a.target,a.texture._texture.texture,0):x.framebufferRenderbuffer(36160,b,36161,a.renderbuffer._renderbuffer.renderbuffer))}function z(b){var e=3553,c=null,d=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(e=b.target|0));a.type(f,"function","invalid attachment data");b=f._reglType;"texture2d"===b?(c=f,a(3553===e)):"textureCube"===b?(c=f,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===b?(d=f,e=36161):a.raise("invalid regl object for attachment");return new A(e,c,d)}function O(b,
a,e,c,d){if(e)return b=H.create2D({width:b,height:a,format:c,type:d}),b._texture.refCount=0,new A(3553,b,null);b=I.create({width:b,height:a,format:c});b._renderbuffer.refCount=0;return new A(36161,null,b)}function t(b){return b&&(b.texture||b.renderbuffer)}function p(b,a,e){b&&(b.texture?b.texture.resize(a,e):b.renderbuffer&&b.renderbuffer.resize(a,e),b.width=a,b.height=e)}function g(){this.id=e++;h[this.id]=this;this.framebuffer=x.createFramebuffer();this.height=this.width=0;this.colorAttachments=
[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function q(b){b.colorAttachments.forEach(C);C(b.depthAttachment);C(b.stencilAttachment);C(b.depthStencilAttachment)}function S(b){var e=b.framebuffer;a(e,"must not double destroy framebuffer");x.deleteFramebuffer(e);b.framebuffer=null;y.framebufferCount--;delete h[b.id]}function X(b){var e;x.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(e=0;e<d.length;++e)J(36064+e,d[e]);for(e=d.length;e<ea.maxColorAttachments;++e)x.framebufferTexture2D(36160,
36064+e,3553,null,0);x.framebufferTexture2D(36160,33306,3553,null,0);x.framebufferTexture2D(36160,36096,3553,null,0);x.framebufferTexture2D(36160,36128,3553,null,0);J(36096,b.depthAttachment);J(36128,b.stencilAttachment);J(33306,b.depthStencilAttachment);b=x.checkFramebufferStatus(36160);x.isContextLost()||36053===b||a.raise("framebuffer configuration not supported, status = "+c[b]);x.bindFramebuffer(36160,n.next?n.next.framebuffer:null);n.cur=n.next;x.getError()}function U(e,c){function d(e,c){var g;
a(n.next!==h,"can not update framebuffer which is currently in use");var p=0,k=0,y=!0,S=!0;g=null;var x=!0,C="rgba",A="uint8",H=1,I=null,r=null,Y=null,J=!1;if("number"===typeof e)p=e|0,k=c|0||p;else if(e){a.type(e,"object","invalid arguments for framebuffer");"shape"in e?(k=e.shape,a(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),p=k[0],k=k[1]):("radius"in e&&(p=k=e.radius),"width"in e&&(p=e.width),"height"in e&&(k=e.height));if("color"in e||"colors"in e)g=e.color||e.colors,Array.isArray(g)&&
a(1===g.length||m.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in e&&(H=e.colorCount|0,a(0<H,"invalid color buffer count"));"colorTexture"in e&&(x=!!e.colorTexture,C="rgba4");if("colorType"in e){A=e.colorType;if(x)a(m.oes_texture_float||!("float"===A||"float32"===A),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(m.oes_texture_half_float||!("half float"===A||"float16"===A),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");
else if("half float"===A||"float16"===A)a(m.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),C="rgba16f";else if("float"===A||"float32"===A)a(m.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),C="rgba32f";a.oneOf(A,da,"invalid color type")}"colorFormat"in e&&(C=e.colorFormat,0<=la.indexOf(C)?x=!0:0<=Q.indexOf(C)?x=!1:a.optional(function(){if(x)a.oneOf(e.colorFormat,la,"invalid color format for texture");
else a.oneOf(e.colorFormat,Q,"invalid color format for renderbuffer")}))}if("depthTexture"in e||"depthStencilTexture"in e)J=!(!e.depthTexture&&!e.depthStencilTexture),a(!J||m.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in e&&("boolean"===typeof e.depth?y=e.depth:(I=e.depth,S=!1));"stencil"in e&&("boolean"===typeof e.stencil?S=e.stencil:(r=e.stencil,y=!1));"depthStencil"in e&&("boolean"===typeof e.depthStencil?y=S=e.depthStencil:(Y=e.depthStencil,S=y=!1))}else p=k=1;var U=
null,qa=null,M=null,Xa=null;if(Array.isArray(g))U=g.map(z);else if(g)U=[z(g)];else for(U=Array(H),g=0;g<H;++g)U[g]=O(p,k,x,C,A);a(m.webgl_draw_buffers||1>=U.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(U.length<=ea.maxColorAttachments,"too many color attachments, not supported");p=p||U[0].width;k=k||U[0].height;I?qa=z(I):y&&!S&&(qa=O(p,k,J,"depth","uint32"));r?M=z(r):S&&!y&&(M=O(p,k,!1,"stencil","uint8"));Y?Xa=z(Y):!I&&!r&&S&&y&&(Xa=O(p,k,J,
"depth stencil","depth stencil"));a(1>=!!I+!!r+!!Y,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");y=null;for(g=0;g<U.length;++g)B(U[g],p,k),a(!U[g]||U[g].texture&&0<=w.indexOf(U[g].texture._texture.format)||U[g].renderbuffer&&0<=sa.indexOf(U[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+g+" is invalid"),U[g]&&U[g].texture&&(S=f[U[g].texture._texture.format]*b[U[g].texture._texture.type],null===y?y=S:a(y===S,"all color attachments much have the same number of bits per pixel."));
B(qa,p,k);a(!qa||qa.texture&&6402===qa.texture._texture.format||qa.renderbuffer&&33189===qa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");B(M,p,k);a(!M||M.renderbuffer&&36168===M.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");B(Xa,p,k);a(!Xa||Xa.texture&&34041===Xa.texture._texture.format||Xa.renderbuffer&&34041===Xa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");q(h);h.width=
p;h.height=k;h.colorAttachments=U;h.depthAttachment=qa;h.stencilAttachment=M;h.depthStencilAttachment=Xa;d.color=U.map(t);d.depth=t(qa);d.stencil=t(M);d.depthStencil=t(Xa);d.width=h.width;d.height=h.height;X(h);return d}var h=new g;y.framebufferCount++;d(e,c);return k(d,{resize:function(b,e){a(n.next!==h,"can not resize a framebuffer which is currently in use");var c=Math.max(b|0,1),f=Math.max(e|0||c,1);if(c===h.width&&f===h.height)return d;for(var q=h.colorAttachments,g=0;g<q.length;++g)p(q[g],c,
f);p(h.depthAttachment,c,f);p(h.stencilAttachment,c,f);p(h.depthStencilAttachment,c,f);h.width=d.width=c;h.height=d.height=f;X(h);return d},_reglType:"framebuffer",_framebuffer:h,destroy:function(){S(h);q(h)},use:function(b){n.setFBO({framebuffer:d},b)}})}var n={cur:null,next:null,dirty:!1,setFBO:null},la=["rgba"],Q=["rgba4","rgb565","rgb5 a1"];m.ext_srgb&&Q.push("srgba");m.ext_color_buffer_half_float&&Q.push("rgba16f","rgb16f");m.webgl_color_buffer_float&&Q.push("rgba32f");var da=["uint8"];m.oes_texture_half_float&&
da.push("half float","float16");m.oes_texture_float&&da.push("float","float32");var e=0,h={};return k(n,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof g)?b:null},create:U,createCube:function(b){function e(b){var d;a(0>c.indexOf(n.next),"can not update framebuffer which is currently in use");var f={color:null},h=0,q=null;d="rgba";var g="uint8",p=1;if("number"===typeof b)h=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");
"shape"in b?(h=b.shape,a(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),a(h[0]===h[1],"cube framebuffer must be square"),h=h[0]):("radius"in b&&(h=b.radius|0),"width"in b?(h=b.width|0,"height"in b&&a(b.height===h,"must be square")):"height"in b&&(h=b.height|0));if("color"in b||"colors"in b)q=b.color||b.colors,Array.isArray(q)&&a(1===q.length||m.webgl_draw_buffers,"multiple render targets not supported");q||("colorCount"in b&&(p=b.colorCount|0,a(0<p,"invalid color buffer count")),"colorType"in
b&&(a.oneOf(b.colorType,da,"invalid color type"),g=b.colorType),"colorFormat"in b&&(d=b.colorFormat,a.oneOf(b.colorFormat,la,"invalid color format for texture")));"depth"in b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=b.depthStencil)}else h=1;if(q)if(Array.isArray(q))for(b=[],d=0;d<q.length;++d)b[d]=q[d];else b=[q];else for(b=Array(p),q={radius:h,format:d,type:g},d=0;d<p;++d)b[d]=H.createCube(q);f.color=Array(b.length);for(d=0;d<b.length;++d)p=b[d],
a("function"===typeof p&&"textureCube"===p._reglType,"invalid cube map"),h=h||p.width,a(p.width===h&&p.height===h,"invalid cube map shape"),f.color[d]={target:34069,data:b[d]};for(d=0;6>d;++d){for(p=0;p<b.length;++p)f.color[p].target=34069+d;0<d&&(f.depth=c[0].depth,f.stencil=c[0].stencil,f.depthStencil=c[0].depthStencil);if(c[d])c[d](f);else c[d]=U(f)}return k(e,{width:h,height:h,color:b})}var c=Array(6);e(b);return k(e,{faces:c,resize:function(b){var d=b|0;a(0<d&&d<=ea.maxCubeMapSize,"invalid radius for cube fbo");
if(d===e.width)return e;var f=e.color;for(b=0;b<f.length;++b)f[b].resize(d);for(b=0;6>b;++b)c[b].resize(d);e.width=e.height=d;return e},_reglType:"framebufferCube",destroy:function(){c.forEach(function(b){b.destroy()})}})},clear:function(){d(h).forEach(S)},restore:function(){n.cur=null;n.next=null;n.dirty=!0;d(h).forEach(function(b){b.framebuffer=x.createFramebuffer();X(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(m,t,M){var a=m("./util/sorted-object-keys"),d=
m("./util/pool");t.exports=function(k,w){var f=1;w.ext_texture_filter_anisotropic&&(f=k.getParameter(34047));var b=1,m=1;w.webgl_draw_buffers&&(b=k.getParameter(34852),m=k.getParameter(36063));var c=!!w.oes_texture_float;if(c){c=k.createTexture();k.bindTexture(3553,c);k.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var x=k.createFramebuffer();k.bindFramebuffer(36160,x);k.framebufferTexture2D(36160,36064,3553,c,0);k.bindTexture(3553,null);if(36053!==k.checkFramebufferStatus(36160))c=!1;else{k.viewport(0,
0,1,1);k.clearColor(1,0,0,1);k.clear(16384);var t=d.allocType(5126,4);k.readPixels(0,0,1,1,6408,5126,t);k.getError()?c=!1:(k.deleteFramebuffer(x),k.deleteTexture(c),c=1===t[0]);d.freeType(t)}}t=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(t=k.createTexture(),x=d.allocType(5121,36),k.activeTexture(33984),k.bindTexture(34067,t),k.texImage2D(34069,0,6408,3,3,0,6408,5121,x),d.freeType(x),k.bindTexture(34067,
null),k.deleteTexture(t),t=!k.getError());return{colorBits:[k.getParameter(3410),k.getParameter(3411),k.getParameter(3412),k.getParameter(3413)],depthBits:k.getParameter(3414),stencilBits:k.getParameter(3415),subpixelBits:k.getParameter(3408),extensions:a(w).filter(function(b){return!!w[b]}),maxAnisotropic:f,maxDrawbuffers:b,maxColorAttachments:m,pointSizeDims:k.getParameter(33901),lineWidthDims:k.getParameter(33902),maxViewportDims:k.getParameter(3386),maxCombinedTextureUnits:k.getParameter(35661),
maxCubeMapSize:k.getParameter(34076),maxRenderbufferSize:k.getParameter(34024),maxTextureUnits:k.getParameter(34930),maxTextureSize:k.getParameter(3379),maxAttributes:k.getParameter(34921),maxVertexUniforms:k.getParameter(36347),maxVertexTextureUnits:k.getParameter(35660),maxVaryingVectors:k.getParameter(36348),maxFragmentUniforms:k.getParameter(36349),glsl:k.getParameter(35724),renderer:k.getParameter(7937),vendor:k.getParameter(7936),version:k.getParameter(7938),readFloat:c,npotTextureCube:t}}},
{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(m,t,M){var a=m("./util/check"),d=m("./util/is-typed-array");t.exports=function(k,w,f,b,m,c,x){function t(H){var I;null===w.next?(a(m.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),I=5121):(a(null!==w.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),I=w.next.colorAttachments[0].texture._texture.type,a.optional(function(){c.oes_texture_float?
(a(5121===I||5126===I,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===I&&a(x.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===I,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var y=0,A=0,C=b.framebufferWidth,B=b.framebufferHeight,J=null;d(H)?J=H:H&&(a.type(H,"object","invalid arguments to regl.read()"),y=H.x|0,A=H.y|0,a(0<=y&&y<b.framebufferWidth,
"invalid x offset for regl.read"),a(0<=A&&A<b.framebufferHeight,"invalid y offset for regl.read"),C=(H.width||b.framebufferWidth-y)|0,B=(H.height||b.framebufferHeight-A)|0,J=H.data||null);J&&(5121===I?a(J instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===I&&a(J instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<C&&C+y<=b.framebufferWidth,"invalid width for read pixels");a(0<B&&B+A<=
b.framebufferHeight,"invalid height for read pixels");f();H=C*B*4;J||(5121===I?J=new Uint8Array(H):5126===I&&(J=J||new Float32Array(H)));a.isTypedArray(J,"data buffer for regl.read() must be a typedarray");a(J.byteLength>=H,"data buffer for regl.read() too small");k.pixelStorei(3333,4);k.readPixels(y,A,C,B,6408,I,J);return J}function ea(b){var a;w.setFBO({framebuffer:b.framebuffer},function(){a=t(b)});return a}return function(b){return b&&"framebuffer"in b?ea(b):t(b)}}},{"./util/check":21,"./util/is-typed-array":30}],
15:[function(m,t,M){var a=m("./util/sorted-object-keys"),d=m("./util/check"),k=m("./util/values"),w=[];w[32854]=2;w[32855]=2;w[36194]=2;w[33189]=2;w[36168]=1;w[34041]=4;w[35907]=4;w[34836]=16;w[34842]=8;w[34843]=6;t.exports=function(f,b,m,c,x){function t(b){this.id=y++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;x.profile&&(this.stats={size:0})}function ea(b){var a=b.renderbuffer;d(a,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(a);
b.renderbuffer=null;b.refCount=0;delete A[b.id];c.renderbufferCount--}var H={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(H.srgba=35907);b.ext_color_buffer_half_float&&(H.rgba16f=34842,H.rgb16f=34843);b.webgl_color_buffer_float&&(H.rgba32f=34836);var I=[];a(H).forEach(function(b){I[H[b]]=b});var y=0,A={};t.prototype.decRef=function(){0>=--this.refCount&&ea(this)};x.profile&&(c.getTotalRenderbufferSize=function(){var b=0;a(A).forEach(function(a){b+=
A[a].stats.size});return b});return{create:function(b,a){function k(b,a){var c=0,g=0,q=32854;"object"===typeof b&&b?("shape"in b?(g=b.shape,d(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),c=g[0]|0,g=g[1]|0):("radius"in b&&(c=g=b.radius|0),"width"in b&&(c=b.width|0),"height"in b&&(g=b.height|0)),"format"in b&&(d.parameter(b.format,H,"invalid renderbuffer format"),q=H[b.format])):"number"===typeof b?(c=b|0,g="number"===typeof a?a|0:c):b?d.raise("invalid arguments to renderbuffer constructor"):
c=g=1;d(0<c&&0<g&&c<=m.maxRenderbufferSize&&g<=m.maxRenderbufferSize,"invalid renderbuffer size");if(c!==z.width||g!==z.height||q!==z.format)return k.width=z.width=c,k.height=z.height=g,z.format=q,f.bindRenderbuffer(36161,z.renderbuffer),f.renderbufferStorage(36161,q,c,g),d(0===f.getError(),"invalid render buffer format"),x.profile&&(z.stats.size=w[z.format]*z.width*z.height),k.format=I[z.format],k}var z=new t(f.createRenderbuffer());A[z.id]=z;c.renderbufferCount++;k(b,a);k.resize=function(b,a){var c=
b|0,g=a|0||c;if(c===z.width&&g===z.height)return k;d(0<c&&0<g&&c<=m.maxRenderbufferSize&&g<=m.maxRenderbufferSize,"invalid renderbuffer size");k.width=z.width=c;k.height=z.height=g;f.bindRenderbuffer(36161,z.renderbuffer);f.renderbufferStorage(36161,z.format,c,g);d(0===f.getError(),"invalid render buffer format");x.profile&&(z.stats.size=w[z.format]*z.width*z.height);return k};k._reglType="renderbuffer";k._renderbuffer=z;x.profile&&(k.stats=z.stats);k.destroy=function(){z.decRef()};return k},clear:function(){k(A).forEach(ea)},
restore:function(){k(A).forEach(function(b){b.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,b.renderbuffer);f.renderbufferStorage(36161,b.format,b.width,b.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(m,t,M){var a=m("./util/sorted-object-keys"),d=m("./util/check"),k=m("./util/extend"),w=m("./util/values");t.exports=function(f,b,m,c){function x(b,a,c,d){this.name=b;this.id=a;this.location=c;this.info=
d}function t(b,a){for(var c=0;c<b.length;++c)if(b[c].id===a.id){b[c].location=a.location;return}b.push(a)}function ea(a,c,k){var p=35632===a?y:A,g=p[c];if(!g){var q=b.str(c),g=f.createShader(a);f.shaderSource(g,q);f.compileShader(g);d.shaderError(f,g,q,a,k);p[c]=g}return g}function H(b,a){this.id=J++;this.fragId=b;this.vertId=a;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;c.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function I(a,k,w){var p;p=ea(35632,a.fragId);
var g=ea(35633,a.vertId),q=a.program=f.createProgram();f.attachShader(q,p);f.attachShader(q,g);if(w)for(p=0;p<w.length;++p)g=w[p],f.bindAttribLocation(q,g[0],g[1]);f.linkProgram(q);d.linkError(f,q,b.str(a.fragId),b.str(a.vertId),k);w=f.getProgramParameter(q,35718);c.profile&&(a.stats.uniformsCount=w);g=a.uniforms;for(p=0;p<w;++p)if(k=f.getActiveUniform(q,p))if(1<k.size)for(var y=0;y<k.size;++y){var m=k.name.replace("[0]","["+y+"]");t(g,new x(m,b.id(m),f.getUniformLocation(q,m),k))}else t(g,new x(k.name,
b.id(k.name),f.getUniformLocation(q,k.name),k));w=f.getProgramParameter(q,35721);c.profile&&(a.stats.attributesCount=w);a=a.attributes;for(p=0;p<w;++p)(k=f.getActiveAttrib(q,p))&&t(a,new x(k.name,b.id(k.name),f.getAttribLocation(q,k.name),k))}var y={},A={},C={},B=[],J=0;c.profile&&(m.getMaxUniformsCount=function(){var b=0;B.forEach(function(a){a.stats.uniformsCount>b&&(b=a.stats.uniformsCount)});return b},m.getMaxAttributesCount=function(){var b=0;B.forEach(function(a){a.stats.attributesCount>b&&
(b=a.stats.attributesCount)});return b});return{clear:function(){var b=f.deleteShader.bind(f);w(y).forEach(b);y={};w(A).forEach(b);A={};B.forEach(function(b){f.deleteProgram(b.program)});B.length=0;C={};m.shaderCount=0},program:function(b,c,w,p){d.command(0<=b,"missing vertex shader",w);d.command(0<=c,"missing fragment shader",w);var g=C[c];g||(g=C[c]={});var q=g[b];if(q&&(q.refCount++,!p))return q;var S=new H(c,b);m.shaderCount++;I(S,w,p);q||(g[b]=S);B.push(S);return k(S,{destroy:function(){S.refCount--;
if(0>=S.refCount){f.deleteProgram(S.program);var b=B.indexOf(S);B.splice(b,1);m.shaderCount--}0>=g[S.vertId].refCount&&(f.deleteShader(A[S.vertId]),delete A[S.vertId],delete C[S.fragId][S.vertId]);a(C[S.fragId]).length||(f.deleteShader(y[S.fragId]),delete y[S.fragId],delete C[S.fragId])}})},restore:function(){y={};A={};for(var b=0;b<B.length;++b)I(B[b],null,B[b].attributes.map(function(b){return[b.location,b.name]}))},shader:ea,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,
"./util/values":36}],17:[function(m,t,M){t.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(m,t,M){t.exports=function(){var a={"":0},d=[""];return{id:function(k){var w=a[k];if(w)return w;w=a[k]=d.length;d.push(k);return w},str:function(a){return d[a]}}}},{}],19:[function(m,t,M){function a(b){return"[object "+b+"]"}function d(b){return Array.isArray(b)&&(0===b.length||
"number"===typeof b[0])}function k(b){return Array.isArray(b)&&0!==b.length&&C(b[0])?!0:!1}function w(b){return Object.prototype.toString.call(b)}function f(b){if(!b)return!1;var a=w(b);return 0<=la.indexOf(a)?!0:d(b)||k(b)||I(b)}function b(b,a){36193===b.type?(b.data=A(a),y.freeType(a)):b.data=a}function sa(b,a,c,d,f,q){b="undefined"!==typeof da[b]?da[b]:p[b]*Q[a];q&&(b*=6);if(f){for(d=0;1<=c;)d+=b*c*c,c/=2;return d}return b*c*d}var c=m("./util/sorted-object-keys"),x=m("./util/check"),jc=m("./util/extend"),
ea=m("./util/values"),H=m("./util/is-typed-array"),I=m("./util/is-ndarray"),y=m("./util/pool"),A=m("./util/to-half-float"),C=m("./util/is-array-like"),B=m("./util/flatten"),J=m("./util/is-pow2");M=m("./constants/arraytypes.json");var z=m("./constants/arraytypes.json"),O=[9984,9986,9985,9987],Zb=[0,6409,6410,6407,6408],p={};p[6409]=p[6406]=p[6402]=1;p[34041]=p[6410]=2;p[6407]=p[35904]=3;p[6408]=p[35906]=4;var g=a("HTMLCanvasElement"),q=a("OffscreenCanvas"),S=a("CanvasRenderingContext2D"),X=a("ImageBitmap"),
U=a("HTMLImageElement"),n=a("HTMLVideoElement"),la=c(M).concat([g,q,S,X,U,n]),Q=[];Q[5121]=1;Q[5126]=4;Q[36193]=2;Q[5123]=2;Q[5125]=4;var da=[];da[32854]=2;da[32855]=2;da[36194]=2;da[34041]=4;da[33776]=.5;da[33777]=.5;da[33778]=1;da[33779]=1;da[35986]=.5;da[35987]=1;da[34798]=1;da[35840]=.5;da[35841]=.25;da[35842]=.5;da[35843]=.25;da[36196]=.5;t.exports=function(a,h,m,Q,t,da,la){function ta(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=
1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Aa(b,a){b.internalformat=a.internalformat;b.format=a.format;b.type=a.type;b.compressed=a.compressed;b.premultiplyAlpha=a.premultiplyAlpha;b.flipY=a.flipY;b.unpackAlignment=a.unpackAlignment;b.colorSpace=a.colorSpace;b.width=a.width;b.height=a.height;b.channels=a.channels}function Z(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(x.type(a.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=a.premultiplyAlpha);
"flipY"in a&&(x.type(a.flipY,"boolean","invalid texture flip"),b.flipY=a.flipY);"alignment"in a&&(x.oneOf(a.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=a.alignment);"colorSpace"in a&&(x.parameter(a.colorSpace,xc,"invalid colorSpace"),b.colorSpace=xc[a.colorSpace]);if("type"in a){var c=a.type;x(h.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");x(h.oes_texture_half_float||!("half float"===
c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");x(h.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");x.parameter(c,aa,"invalid texture type");b.type=aa[c]}var e=b.width,d=b.height,f=b.channels,c=!1;"shape"in a?(x(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),e=a.shape[0],d=a.shape[1],3===
a.shape.length&&(f=a.shape[2],x(0<f&&4>=f,"invalid number of channels"),c=!0),x(0<=e&&e<=m.maxTextureSize,"invalid width"),x(0<=d&&d<=m.maxTextureSize,"invalid height")):("radius"in a&&(e=d=a.radius,x(0<=e&&e<=m.maxTextureSize,"invalid radius")),"width"in a&&(e=a.width,x(0<=e&&e<=m.maxTextureSize,"invalid width")),"height"in a&&(d=a.height,x(0<=d&&d<=m.maxTextureSize,"invalid height")),"channels"in a&&(f=a.channels,x(0<f&&4>=f,"invalid number of channels"),c=!0));b.width=e|0;b.height=d|0;b.channels=
f|0;e=!1;"format"in a&&(e=a.format,x(h.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(e,L,"invalid texture format"),d=b.internalformat=L[e],b.format=ua[d],e in aa&&!("type"in a)&&(b.type=aa[e]),e in ia&&(b.compressed=!0),e=!0);!c&&e?b.channels=p[b.format]:c&&!e?b.channels!==Zb[b.format]&&(b.format=b.internalformat=Zb[b.channels]):e&&c&&x(b.channels===p[b.format],"number of channels inconsistent with specified format")}}
function K(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function N(){ta.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function R(a,c){var e=null;f(c)?e=c:c&&(x.type(c,"object","invalid pixel data type"),Z(a,c),"x"in c&&(a.xOffset=c.x|0),"y"in c&&(a.yOffset=c.y|0),f(c.data)&&(e=c.data));x(!a.compressed||e instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(c.copy){x(!e,"can not specify copy and data field for the same texture");var l=t.viewportWidth,h=t.viewportHeight;a.width=a.width||l-a.xOffset;a.height=a.height||h-a.yOffset;a.needsCopy=!0;x(0<=a.xOffset&&a.xOffset<l&&0<=a.yOffset&&a.yOffset<h&&0<a.width&&a.width<=l&&0<a.height&&a.height<=h,"copy texture read out of bounds")}else if(!e)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(H(e))a.channels=a.channels||4,a.data=e,"type"in c||5121!==a.type||(a.type=z[Object.prototype.toString.call(e)]|
0);else if(d(e)){a.channels=a.channels||4;l=e;h=l.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:h=y.allocType(a.type,h);h.set(l);a.data=h;break;case 36193:a.data=A(l);break;default:x.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(I(e)){l=e.data;Array.isArray(l)||5121!==a.type||(a.type=z[Object.prototype.toString.call(l)]|0);var h=e.shape,p=e.stride,G,u,r,v;3===h.length?(r=h[2],v=p[2]):(x(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),
v=r=1);G=h[0];u=h[1];h=p[0];p=p[1];a.alignment=1;a.width=G;a.height=u;a.channels=r;a.format=a.internalformat=Zb[r];a.needsFree=!0;G=v;e=e.offset;r=a.width;v=a.height;u=a.channels;for(var L=y.allocType(36193===a.type?5126:a.type,r*v*u),F=0,ca=0;ca<v;++ca)for(var E=0;E<r;++E)for(var sa=0;sa<u;++sa)L[F++]=l[h*E+p*ca+G*sa+e];b(a,L)}else if(w(e)===g||w(e)===q||w(e)===S)w(e)===g||w(e)===q?a.element=e:a.element=e.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(w(e)===X)a.element=
e,a.width=e.width,a.height=e.height,a.channels=4;else if(w(e)===U)a.element=e,a.width=e.naturalWidth,a.height=e.naturalHeight,a.channels=4;else if(w(e)===n)a.element=e,a.width=e.videoWidth,a.height=e.videoHeight,a.channels=4;else if(k(e)){l=a.width||e[0].length;h=a.height||e.length;p=a.channels;p=C(e[0][0])?p||e[0][0].length:p||1;G=B.shape(e);r=1;for(v=0;v<G.length;++v)r*=G[v];r=y.allocType(36193===a.type?5126:a.type,r);B.flatten(e,G,"",r);b(a,r);a.alignment=1;a.width=l;a.height=h;a.channels=p;a.format=
a.internalformat=Zb[p];a.needsFree=!0}5126===a.type?x(0<=m.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&x(0<=m.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function oa(b,c,d,l,f){var h=b.element,q=b.data,n=b.internalformat,g=b.format,p=b.type,k=b.width,r=b.height;K(b);h?a.texSubImage2D(c,f,d,l,g,p,h):b.compressed?a.compressedTexSubImage2D(c,f,d,l,n,k,r,q):b.needsCopy?(Q(),a.copyTexSubImage2D(c,f,
d,l,b.xOffset,b.yOffset,k,r)):a.texSubImage2D(c,f,d,l,k,r,g,p,q)}function P(){return V.pop()||new N}function M(b){b.needsFree&&y.freeType(b.data);N.call(b);V.push(b)}function Za(){ta.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function T(b,a,e){var c=b.images[0]=P();b.mipmask=1;c.width=b.width=a;c.height=b.height=e;c.channels=b.channels=4}function r(b,a){var c=null;if(f(a))c=b.images[0]=P(),Aa(c,b),R(c,a),b.mipmask=1;else if(Z(b,a),Array.isArray(a.mipmap))for(var e=
a.mipmap,d=0;d<e.length;++d)c=b.images[d]=P(),Aa(c,b),c.width>>=d,c.height>>=d,R(c,e[d]),b.mipmask|=1<<d;else c=b.images[0]=P(),Aa(c,b),R(c,a),b.mipmask=1;Aa(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==b.internalformat&&33779!==b.internalformat||x(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ja(b,c){for(var d=b.images,l=0;l<d.length&&d[l];++l){var f=d[l],h=
c,q=l,n=f.element,g=f.data,p=f.internalformat,k=f.format,r=f.type,u=f.width,w=f.height;K(f);n?a.texImage2D(h,q,k,k,r,n):f.compressed?a.compressedTexImage2D(h,q,p,u,w,0,g):f.needsCopy?(Q(),a.copyTexImage2D(h,q,k,f.xOffset,f.yOffset,u,w,0)):a.texImage2D(h,q,k,u,w,0,k,r,g||null)}}function ba(){var b=fa.pop()||new Za;ta.call(b);for(var a=b.mipmask=0;16>a;++a)b.images[a]=null;return b}function Ha(b){for(var a=b.images,c=0;c<a.length;++c)a[c]&&M(a[c]),a[c]=null;fa.push(b)}function Ja(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function dc(b,a){if("min"in a){var c=a.min;x.parameter(c,ud);b.minFilter=ud[c];0<=O.indexOf(b.minFilter)&&!("faces"in a)&&(b.genMipmaps=!0)}"mag"in a&&(c=a.mag,x.parameter(c,sc),b.magFilter=sc[c]);var c=b.wrapS,e=b.wrapT;if("wrap"in a){var d=a.wrap;"string"===typeof d?(x.parameter(d,qc),c=e=qc[d]):Array.isArray(d)&&(x.parameter(d[0],qc),x.parameter(d[1],qc),c=qc[d[0]],e=qc[d[1]])}else"wrapS"in a&&(c=a.wrapS,
x.parameter(c,qc),c=qc[c]),"wrapT"in a&&(e=a.wrapT,x.parameter(e,qc),e=qc[e]);b.wrapS=c;b.wrapT=e;"anisotropic"in a&&(c=a.anisotropic,x("number"===typeof c&&1<=c&&c<=m.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=a.anisotropic);if("mipmap"in a){c=!1;switch(typeof a.mipmap){case "string":x.parameter(a.mipmap,Xb,"invalid mipmap hint");b.mipmapHint=Xb[a.mipmap];c=b.genMipmaps=!0;break;case "boolean":c=b.genMipmaps=a.mipmap;break;case "object":x(Array.isArray(a.mipmap),"invalid mipmap type");
b.genMipmaps=!1;c=!0;break;default:x.raise("invalid mipmap type")}!c||"min"in a||(b.minFilter=9984)}}function Xa(b,c){a.texParameteri(c,10241,b.minFilter);a.texParameteri(c,10240,b.magFilter);a.texParameteri(c,10242,b.wrapS);a.texParameteri(c,10243,b.wrapT);h.ext_texture_filter_anisotropic&&a.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(c))}function W(b){ta.call(this);this.mipmask=0;this.internalformat=6408;this.id=na++;this.refCount=1;this.target=
b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ja;la.profile&&(this.stats={size:0})}function sb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ga(){var b=ca[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function va(b){var c=b.texture;x(c,"must not double destroy texture");var d=b.unit,l=b.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(l,null),ca[d]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=
0;delete F[b.id];da.textureCount--}var Xb={"don't care":4352,"dont care":4352,nice:4354,fast:4353},qc={repeat:10497,clamp:33071,mirror:33648},sc={nearest:9728,linear:9729},ud=jc({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},sc),xc={none:0,browser:37444},aa={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},L={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},
ia={};h.ext_srgb&&(L.srgb=35904,L.srgba=35906);h.oes_texture_float&&(aa.float32=aa["float"]=5126);h.oes_texture_half_float&&(aa.float16=aa["half float"]=36193);h.webgl_depth_texture&&(jc(L,{depth:6402,"depth stencil":34041}),jc(aa,{uint16:5123,uint32:5125,"depth stencil":34042}));h.webgl_compressed_texture_s3tc&&jc(ia,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&jc(ia,{"rgb atc":35986,"rgba atc explicit alpha":35987,
"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&jc(ia,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&(ia["rgb etc1"]=36196);var Da=Array.prototype.slice.call(a.getParameter(34467));c(ia).forEach(function(b){var a=ia[b];0<=Da.indexOf(a)&&(L[b]=a)});var tb=c(L);m.textureFormats=tb;var $c=[];c(L).forEach(function(b){$c[L[b]]=b});var ad=[];c(aa).forEach(function(b){ad[aa[b]]=b});var E=[];
c(sc).forEach(function(b){E[sc[b]]=b});var v=[];c(ud).forEach(function(b){v[ud[b]]=b});var ha=[];c(qc).forEach(function(b){ha[qc[b]]=b});var ua=tb.reduce(function(b,a){var c=L[a];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||h.ext_srgb&&(35904===c||35906===c)?b[c]=c:32855===c||0<=a.indexOf("rgba")?b[c]=6408:b[c]=6407;return b},{}),V=[],fa=[],na=0,F={},u=m.maxTextureUnits,ca=Array(u).map(function(){return null});jc(W.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>
b){for(var c=0;c<u;++c){var d=ca[c];if(d){if(0<d.bindCount)continue;d.unit=-1}ca[c]=this;b=c;break}b>=u&&x.raise("insufficient number of texture units");la.profile&&da.maxTextureUnits<b+1&&(da.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&va(this)}});la.profile&&(da.getTotalTextureSize=function(){var b=0;c(F).forEach(function(a){b+=F[a].stats.size});return b});return{create2D:function(b,
c){function d(b,a){var c=l.texInfo;Ja.call(c);var e=ba();"number"===typeof b?"number"===typeof a?T(e,b|0,a|0):T(e,b|0,b|0):b?(x.type(b,"object","invalid arguments to regl.texture"),dc(c,b),r(e,b)):T(e,1,1);c.genMipmaps&&(e.mipmask=(e.width<<1)-1);l.mipmask=e.mipmask;Aa(l,e);x.texture2D(c,e,m);l.internalformat=e.internalformat;d.width=e.width;d.height=e.height;sb(l);ja(e,3553);Xa(c,3553);ga();Ha(e);la.profile&&(l.stats.size=sa(l.internalformat,l.type,e.width,e.height,c.genMipmaps,!1));d.format=$c[l.internalformat];
d.type=ad[l.type];d.mag=E[c.magFilter];d.min=v[c.minFilter];d.wrapS=ha[c.wrapS];d.wrapT=ha[c.wrapT];return d}var l=new W(3553);F[l.id]=l;da.textureCount++;d(b,c);d.subimage=function(b,a,c,e){x(!!b,"must specify image data");a|=0;c|=0;e|=0;var f=P();Aa(f,l);f.width=0;f.height=0;R(f,b);f.width=f.width||(l.width>>e)-a;f.height=f.height||(l.height>>e)-c;x(l.type===f.type&&l.format===f.format&&l.internalformat===f.internalformat,"incompatible format for texture.subimage");x(0<=a&&0<=c&&a+f.width<=l.width&&
c+f.height<=l.height,"texture.subimage write out of bounds");x(l.mipmask&1<<e,"missing mipmap data");x(f.data||f.element||f.needsCopy,"missing image data");sb(l);oa(f,3553,a,c,e);ga();M(f);return d};d.resize=function(b,c){var f=b|0,h=c|0||f;if(f===l.width&&h===l.height)return d;d.width=l.width=f;d.height=l.height=h;sb(l);for(var q=0;l.mipmask>>q;++q){var n=f>>q,g=h>>q;if(!n||!g)break;a.texImage2D(3553,q,l.format,n,g,0,l.format,l.type,null)}ga();la.profile&&(l.stats.size=sa(l.internalformat,l.type,
f,h,!1,!1));return d};d._reglType="texture2d";d._texture=l;la.profile&&(d.stats=l.stats);d.destroy=function(){l.decRef()};return d},createCube:function(b,c,d,l,f,h){function q(b,a,c,e,d,l){var f,h=n.texInfo;Ja.call(h);for(f=0;6>f;++f)g[f]=ba();if("number"!==typeof b&&b)if("object"===typeof b)if(a)r(g[0],b),r(g[1],a),r(g[2],c),r(g[3],e),r(g[4],d),r(g[5],l);else if(dc(h,b),Z(n,b),"faces"in b)for(b=b.faces,x(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),f=0;6>f;++f)x("object"===
typeof b[f]&&!!b[f],"invalid input for cube map face"),Aa(g[f],n),r(g[f],b[f]);else for(f=0;6>f;++f)r(g[f],b);else x.raise("invalid arguments to cube map");else for(b=b|0||1,f=0;6>f;++f)T(g[f],b,b);Aa(n,g[0]);x.optional(function(){m.npotTextureCube||x(J(n.width)&&J(n.height),"your browser does not support non power or two texture dimensions")});n.mipmask=h.genMipmaps?(g[0].width<<1)-1:g[0].mipmask;x.textureCube(n,h,g,m);n.internalformat=g[0].internalformat;q.width=g[0].width;q.height=g[0].height;
sb(n);for(f=0;6>f;++f)ja(g[f],34069+f);Xa(h,34067);ga();la.profile&&(n.stats.size=sa(n.internalformat,n.type,q.width,q.height,h.genMipmaps,!0));q.format=$c[n.internalformat];q.type=ad[n.type];q.mag=E[h.magFilter];q.min=v[h.minFilter];q.wrapS=ha[h.wrapS];q.wrapT=ha[h.wrapT];for(f=0;6>f;++f)Ha(g[f]);return q}var n=new W(34067);F[n.id]=n;da.cubeCount++;var g=Array(6);q(b,c,d,l,f,h);q.subimage=function(b,a,c,e,d){x(!!a,"must specify image data");x("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");
c|=0;e|=0;d|=0;var f=P();Aa(f,n);f.width=0;f.height=0;R(f,a);f.width=f.width||(n.width>>d)-c;f.height=f.height||(n.height>>d)-e;x(n.type===f.type&&n.format===f.format&&n.internalformat===f.internalformat,"incompatible format for texture.subimage");x(0<=c&&0<=e&&c+f.width<=n.width&&e+f.height<=n.height,"texture.subimage write out of bounds");x(n.mipmask&1<<d,"missing mipmap data");x(f.data||f.element||f.needsCopy,"missing image data");sb(n);oa(f,34069+b,c,e,d);ga();M(f);return q};q.resize=function(b){b|=
0;if(b!==n.width){q.width=n.width=b;q.height=n.height=b;sb(n);for(var c=0;6>c;++c)for(var d=0;n.mipmask>>d;++d)a.texImage2D(34069+c,d,n.format,b>>d,b>>d,0,n.format,n.type,null);ga();la.profile&&(n.stats.size=sa(n.internalformat,n.type,q.width,q.height,!1,!0));return q}};q._reglType="textureCube";q._texture=n;la.profile&&(q.stats=n.stats);q.destroy=function(){n.decRef()};return q},clear:function(){for(var b=0;b<u;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ca[b]=null;ea(F).forEach(va);da.cubeCount=
0;da.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<u;++b){var c=ca[b];c&&(c.bindCount=0,c.unit=-1,ca[b]=null)}ea(F).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,
null);Xa(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<u;++b){var c=ca[b];c&&(c.bindCount=0,c.unit=-1,ca[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(m,
t,M){t.exports=function(a,d){function k(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function w(b,a,d){var f=m.pop()||new k;f.startQueryIndex=b;f.endQueryIndex=a;f.sum=0;f.stats=d;c.push(f)}if(!d.ext_disjoint_timer_query)return null;var f=[],b=[],m=[],c=[],x=[],t=[];return{beginQuery:function(a){var c=f.pop()||d.ext_disjoint_timer_query.createQueryEXT();d.ext_disjoint_timer_query.beginQueryEXT(35007,c);b.push(c);w(b.length-1,b.length,a)},endQuery:function(){d.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:w,update:function(){var a,k;a=b.length;if(0!==a){t.length=Math.max(t.length,a+1);x.length=Math.max(x.length,a+1);x[0]=0;var w=t[0]=0;for(k=a=0;k<b.length;++k){var y=b[k];d.ext_disjoint_timer_query.getQueryObjectEXT(y,34919)?(w+=d.ext_disjoint_timer_query.getQueryObjectEXT(y,34918),f.push(y)):b[a++]=y;x[k+1]=w;t[k+1]=a}b.length=a;for(k=a=0;k<c.length;++k){var w=c[k],A=w.startQueryIndex,y=w.endQueryIndex;w.sum+=x[y]-x[A];A=t[A];y=t[y];y===A?(w.stats.gpuTime+=w.sum/1E6,m.push(w)):(w.startQueryIndex=
A,w.endQueryIndex=y,c[a++]=w)}c.length=a}},getNumPendingQueries:function(){return b.length},clear:function(){f.push.apply(f,b);for(var a=0;a<f.length;a++)d.ext_disjoint_timer_query.deleteQueryEXT(f[a]);b.length=0;f.length=0},restore:function(){b.length=0;f.length=0}}}},{}],21:[function(m,t,M){function a(b){return"undefined"!==typeof atob?atob(b):"base64:"+b}function d(b){b=Error("(regl) "+b);console.error(b);throw b;}function k(b,a){b||d(a)}function w(b){return b?": "+b:""}function f(b,a){switch(a){case "number":return"number"===
typeof b;case "object":return"object"===typeof b;case "string":return"string"===typeof b;case "boolean":return"boolean"===typeof b;case "function":return"function"===typeof b;case "undefined":return"undefined"===typeof b;case "symbol":return"symbol"===typeof b}}function b(b,a,c){0>a.indexOf(b)&&d("invalid value"+w(c)+". must be one of: "+a)}function sa(b,a){for(b+="";b.length<a;)b=" "+b;return b}function c(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function x(b,a){this.number=
b;this.line=a;this.errors=[]}function jc(b,a,c){this.file=b;this.line=a;this.message=c}function ea(){var b=Error(),b=(b.stack||b).toString(),a=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(b);return a?a[1]:(b=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(b))?b[1]:"unknown"}function H(){var b=Error(),b=(b.stack||b).toString(),a=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(b);return a?a[1]:(b=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(b))?b[1]:"unknown"}function I(b,d){var f=b.split("\n"),g=1,n=0,k={unknown:new c,
0:new c};k.unknown.name=k[0].name=d||ea();k.unknown.lines.push(new x(0,""));for(var p=0;p<f.length;++p){var w=f[p],e=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(w);if(e)switch(e[1]){case "line":if(e=/(\d+)(\s+\d+)?/.exec(e[2]))g=e[1]|0,e[2]&&(n=e[2]|0,n in k||(k[n]=new c));break;case "define":if(e=/SHADER_NAME(_B64)?\s+(.*)$/.exec(e[2]))k[n].name=e[1]?a(e[2]):e[2]}k[n].lines.push(new x(g++,w))}O(k).forEach(function(b){var a=k[b];a.lines.forEach(function(b){a.index[b.number]=b})});return k}function y(b){var a=
[];b.split("\n").forEach(function(b){if(!(5>b.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(b);c?a.push(new jc(c[1]|0,c[2]|0,c[3].trim())):0<b.length&&a.push(new jc("unknown",0,b))}});return a}function A(b,a){a.forEach(function(a){var c=b[a.file];if(c){var d=c.index[a.line];if(d){d.errors.push(a);c.hasErrors=!0;return}}b.unknown.hasErrors=!0;b.unknown.lines[0].errors.push(a)})}function C(b){b._commandRef=ea()}function B(b,a){var c=H();d(b+" in command "+(a||ea())+("unknown"===c?"":" called from "+
c))}function J(b,a,c,d){f(b,a)||B("invalid parameter type"+w(c)+". expected "+a+", got "+typeof b,d||ea())}function z(b,a){return 32820===b||32819===b||33635===b?2:34042===b?4:g[b]*a}var O=m("./sorted-object-keys"),Zb=m("./is-typed-array");m=m("./extend");var p="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),g={};g[5120]=g[5121]=1;g[5122]=g[5123]=g[36193]=g[33635]=g[32819]=g[32820]=2;g[5124]=g[5125]=g[5126]=g[34042]=4;t.exports=m(k,{optional:function(b){b()},
raise:d,commandRaise:B,command:function(b,a,c){b||B(a,c||ea())},parameter:function(b,a,c){b in a||d("unknown parameter ("+b+")"+w(c)+". possible values: "+O(a).join())},commandParameter:function(b,a,c,d){b in a||B("unknown parameter ("+b+")"+w(c)+". possible values: "+O(a).join(),d||ea())},constructor:function(b){O(b).forEach(function(b){0>p.indexOf(b)&&d('invalid regl constructor argument "'+b+'". must be one of '+p)})},type:function(b,a,c){f(b,a)||d("invalid parameter type"+w(c)+". expected "+a+
", got "+typeof b)},commandType:J,isTypedArray:function(b,a){Zb(b)||d("invalid parameter type"+w(a)+". must be a typed array")},nni:function(b,a){0<=b&&(b|0)===b||d("invalid parameter type, ("+b+")"+w(a)+". must be a nonnegative integer")},oneOf:b,shaderError:function(b,a,c,d,f){if(!b.getShaderParameter(a,b.COMPILE_STATUS)){a=b.getShaderInfoLog(a);b=d===b.FRAGMENT_SHADER?"fragment":"vertex";J(c,"string",b+" shader source must be a string",f);var g=I(c,f);c=y(a);A(g,c);O(g).forEach(function(b){function a(b,
c){d.push(b);f.push(c||"")}var c=g[b];if(c.hasErrors){var d=[""],f=[""];a("file number "+b+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(b){if(0<b.errors.length){a(sa(b.number,4)+"|  ","background-color:yellow; font-weight:bold");a(b.line+"\n","color:red; background-color:yellow; font-weight:bold");var c=0;b.errors.forEach(function(e){e=e.message;var d=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);if(d){var f=d[1];e=d[2];switch(f){case "assign":f="="}c=Math.max(b.line.indexOf(f,
c),0)}else c=0;a(sa("| ",6));a(sa("^^^",c+3)+"\n","font-weight:bold");a(sa("| ",6));a(e+"\n","font-weight:bold")});a(sa("| ",6)+"\n")}else a(sa(b.number,4)+"|  "),a(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(f[0]=d.join("%c"),console.log.apply(console,f))}});k.raise("Error compiling "+b+" shader, "+g[0].name)}},linkError:function(b,a,c,d,f){b.getProgramParameter(a,b.LINK_STATUS)||(b=b.getProgramInfoLog(a),c=I(c,f),d='Error linking program with vertex shader, "'+
I(d,f)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+d+"\n%c"+b,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(d+"\n"+b),k.raise(d))},callSite:H,saveCommandRef:C,saveDrawInfo:function(b,a,c,d){function f(b){return b?d.id(b):0}function g(b,a){O(a).forEach(function(a){b[d.id(a)]=!0})}C(b);b._fragId=f(b["static"].frag);b._vertId=f(b["static"].vert);var k=b._uniformSet={};g(k,a["static"]);g(k,a.dynamic);a=b._attributeSet=
{};g(a,c["static"]);g(a,c.dynamic);b._hasCount="count"in b["static"]||"count"in b.dynamic||"elements"in b["static"]||"elements"in b.dynamic},framebufferFormat:function(a,c,d){a.texture?b(a.texture._texture.internalformat,c,"unsupported texture format for attachment"):b(a.renderbuffer._renderbuffer.format,d,"unsupported renderbuffer format for attachment")},guessCommand:ea,texture2D:function(b,a,c){var d=a.width,f=a.height,g=a.channels;k(0<d&&d<=c.maxTextureSize&&0<f&&f<=c.maxTextureSize,"invalid texture shape");
33071===b.wrapS&&33071===b.wrapT||k(!(d&d-1)&&!!d&&!(f&f-1)&&!!f,"incompatible wrap mode for texture, both width and height must be power of 2");1===a.mipmask?1!==d&&1!==f&&k(9984!==b.minFilter&&9986!==b.minFilter&&9985!==b.minFilter&&9987!==b.minFilter,"min filter requires mipmap"):(k(!(d&d-1)&&!!d&&!(f&f-1)&&!!f,"texture must be a square power of 2 to support mipmapping"),k(a.mipmask===(d<<1)-1,"missing or incomplete mipmap data"));5126===a.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&
k(9728===b.minFilter&&9728===b.magFilter,"filter not supported, must enable oes_texture_float_linear"),k(!b.genMipmaps,"mipmap generation not supported with float textures"));var p=a.images;for(c=0;16>c;++c)if(p[c]){var w=d>>c,e=f>>c;k(a.mipmask&1<<c,"missing mipmap data");var h=p[c];k(h.width===w&&h.height===e,"invalid shape for mip images");k(h.format===a.format&&h.internalformat===a.internalformat&&h.type===a.type,"incompatible type for mip image");!h.compressed&&h.data&&(w=Math.ceil(z(h.type,
g)*w/h.unpackAlignment)*h.unpackAlignment,k(h.data.byteLength===w*e,"invalid data for image, buffer size is inconsistent with image format"))}else b.genMipmaps||k(0===(a.mipmask&1<<c),"extra mipmap data");a.compressed&&k(!b.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(b,a,c,d){var f=b.width,g=b.height,p=b.channels;k(0<f&&f<=d.maxTextureSize&&0<g&&g<=d.maxTextureSize,"invalid texture shape");k(f===g,"cube map must be square");k(33071===a.wrapS&&33071===
a.wrapT,"wrap mode not supported by cube map");for(d=0;d<c.length;++d){var w=c[d];k(w.width===f&&w.height===g,"inconsistent cube map face shape");a.genMipmaps&&(k(!w.compressed,"can not generate mipmap for compressed textures"),k(1===w.mipmask,"can not specify mipmaps and generate mipmaps"));for(var e=w.images,h=0;16>h;++h){var m=e[h];if(m){var y=f>>h,x=g>>h;k(w.mipmask&1<<h,"missing mipmap data");k(m.width===y&&m.height===x,"invalid shape for mip images");k(m.format===b.format&&m.internalformat===
b.internalformat&&m.type===b.type,"incompatible type for mip image");m.compressed||m.data&&k(m.data.byteLength===y*x*Math.max(z(m.type,p),m.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(m,t,M){t.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(m,t,M){function a(a){return Array.prototype.slice.call(a)}
var d=m("./extend"),k=m("./compiled-fns");t.exports=function(){function w(){var b=[],c=[];return d(function(){b.push.apply(b,a(arguments))},{def:function(){var d="v"+m;m++;c.push(d);0<arguments.length&&(b.push(d,"="),b.push.apply(b,a(arguments)),b.push(";"));return d},toString:function(){return a([0<c.length?"var "+c.join(",")+";":"",a(b).join("")]).join("")}})}function f(){function b(a,d){f(a,d,"=",c.def(a,d),";")}var c=w(),f=w(),k=c.toString,m=f.toString;return d(function(){c.apply(c,a(arguments))},
{def:c.def,entry:c,exit:f,save:b,set:function(a,d,f){b(a,d);c(a,d,"=",f,";")},toString:function(){return k()+m()}})}var b=0,m=0,c={},x={};return{global:w(),link:function(a){var d="$"+b,f=!1;"object"===typeof a&&a.name&&(d=a.name.replace(/ /g,"_"),f=!0);if(d in c)return d;c[d]=a;f||b++;return d},block:w,proc:function(b,c){function k(){var b="a"+w.length;w.push(b);return b}var w=[];c=c||0;for(var m=0;m<c;++m)k();var m=f(),A=m.toString;return x[b]=d(m,{arg:k,toString:function(){return a(["function(",
w.join(),"){",A(),"}"]).join("")}})},scope:f,cond:function(){var b=a(arguments).join(""),c=f(),k=f(),w=c.toString,m=k.toString;return d(c,{then:function(){c.apply(c,a(arguments));return this},"else":function(){k.apply(k,a(arguments));return this},toString:function(){var c=m();c&&(c="else{"+c+"}");return a(["if(",b,"){",w(),"}",c]).join("")}})},compile:function(){var b=[],a=[];Object.keys(c).sort(function(b,a){var c="$"===b.charAt(0),d="$"===a.charAt(0);return c||d?c&&d?+b.slice(1)<+a.slice(1)?-1:
1:c&&!d?-1:1:b.localeCompare(a)}).forEach(function(d){var f=c[d];b.push(d);a.push(f)});for(var d=0,f=b.length-1;-1<f;f--)if("$"===b[f].charAt(0)){d=f;break}d=b.slice(d).join();f=k[d];if(!f)throw Error("missing precompiled function with key: "+d);return f.apply(null,a)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(m,t,M){t.exports={$0:function(a){var d,k,w,f,b,m,c,x,t,ea,H,I,y,A,C,B,J,z,O,M,p,g,q,S,X,U,n,la,Q,da;d=a.attributes;k=a.current;w=a.framebuffer;f=a.gl;b=a.next;m=a.vao;c=b.blend_color;
x=k.blend_color;t=b.blend_equation;ea=k.blend_equation;H=b.blend_func;I=k.blend_func;y=b.colorMask;A=k.colorMask;C=b.depth_range;B=k.depth_range;J=b.polygonOffset_offset;z=k.polygonOffset_offset;O=b.sample_coverage;M=k.sample_coverage;p=b.scissor_box;g=k.scissor_box;q=b.stencil_func;S=k.stencil_func;X=b.stencil_opBack;U=k.stencil_opBack;n=b.stencil_opFront;la=k.stencil_opFront;Q=b.viewport;da=k.viewport;return{poll:function(){var a,d,m,sa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha;k.dirty=!1;
d=b.blend_enable;m=b.cull_enable;sa=b.depth_enable;fb=b.dither;gb=b.polygonOffset_enable;Rb=b.sample_alpha;ta=b.sample_enable;Aa=b.scissor_enable;Z=b.stencil_enable;K=b.cull_face;N=k.cull_face;R=b.depth_func;oa=k.depth_func;P=b.depth_mask;Jb=k.depth_mask;Za=b.frontFace;T=k.frontFace;r=b.lineWidth;ja=k.lineWidth;ba=b.stencil_mask;Ha=k.stencil_mask;a=w.next;a!==w.cur&&(a?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null),w.cur=a);d!==k.blend_enable&&(d?f.enable(3042):f.disable(3042),
k.blend_enable=d);m!==k.cull_enable&&(m?f.enable(2884):f.disable(2884),k.cull_enable=m);sa!==k.depth_enable&&(sa?f.enable(2929):f.disable(2929),k.depth_enable=sa);fb!==k.dither&&(fb?f.enable(3024):f.disable(3024),k.dither=fb);gb!==k.polygonOffset_enable&&(gb?f.enable(32823):f.disable(32823),k.polygonOffset_enable=gb);Rb!==k.sample_alpha&&(Rb?f.enable(32926):f.disable(32926),k.sample_alpha=Rb);ta!==k.sample_enable&&(ta?f.enable(32928):f.disable(32928),k.sample_enable=ta);Aa!==k.scissor_enable&&(Aa?
f.enable(3089):f.disable(3089),k.scissor_enable=Aa);Z!==k.stencil_enable&&(Z?f.enable(2960):f.disable(2960),k.stencil_enable=Z);if(c[0]!==x[0]||c[1]!==x[1]||c[2]!==x[2]||c[3]!==x[3])f.blendColor(c[0],c[1],c[2],c[3]),x[0]=c[0],x[1]=c[1],x[2]=c[2],x[3]=c[3];if(t[0]!==ea[0]||t[1]!==ea[1])f.blendEquationSeparate(t[0],t[1]),ea[0]=t[0],ea[1]=t[1];if(H[0]!==I[0]||H[1]!==I[1]||H[2]!==I[2]||H[3]!==I[3])f.blendFuncSeparate(H[0],H[1],H[2],H[3]),I[0]=H[0],I[1]=H[1],I[2]=H[2],I[3]=H[3];if(y[0]!==A[0]||y[1]!==
A[1]||y[2]!==A[2]||y[3]!==A[3])f.colorMask(y[0],y[1],y[2],y[3]),A[0]=y[0],A[1]=y[1],A[2]=y[2],A[3]=y[3];K!==N&&(f.cullFace(K),k.cull_face=K);R!==oa&&(f.depthFunc(R),k.depth_func=R);P!==Jb&&(f.depthMask(P),k.depth_mask=P);if(C[0]!==B[0]||C[1]!==B[1])f.depthRange(C[0],C[1]),B[0]=C[0],B[1]=C[1];Za!==T&&(f.frontFace(Za),k.frontFace=Za);r!==ja&&(f.lineWidth(r),k.lineWidth=r);if(J[0]!==z[0]||J[1]!==z[1])f.polygonOffset(J[0],J[1]),z[0]=J[0],z[1]=J[1];if(O[0]!==M[0]||O[1]!==M[1])f.sampleCoverage(O[0],O[1]),
M[0]=O[0],M[1]=O[1];if(p[0]!==g[0]||p[1]!==g[1]||p[2]!==g[2]||p[3]!==g[3])f.scissor(p[0],p[1],p[2],p[3]),g[0]=p[0],g[1]=p[1],g[2]=p[2],g[3]=p[3];if(q[0]!==S[0]||q[1]!==S[1]||q[2]!==S[2])f.stencilFunc(q[0],q[1],q[2]),S[0]=q[0],S[1]=q[1],S[2]=q[2];ba!==Ha&&(f.stencilMask(ba),k.stencil_mask=ba);if(X[0]!==U[0]||X[1]!==U[1]||X[2]!==U[2]||X[3]!==U[3])f.stencilOpSeparate(X[0],X[1],X[2],X[3]),U[0]=X[0],U[1]=X[1],U[2]=X[2],U[3]=X[3];if(n[0]!==la[0]||n[1]!==la[1]||n[2]!==la[2]||n[3]!==la[3])f.stencilOpSeparate(n[0],
n[1],n[2],n[3]),la[0]=n[0],la[1]=n[1],la[2]=n[2],la[3]=n[3];if(Q[0]!==da[0]||Q[1]!==da[1]||Q[2]!==da[2]||Q[3]!==da[3])f.viewport(Q[0],Q[1],Q[2],Q[3]),da[0]=Q[0],da[1]=Q[1],da[2]=Q[2],da[3]=Q[3]},refresh:function(){var a,h,Y,qa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb;k.dirty=!1;h=b.blend_enable;Y=b.cull_enable;qa=b.depth_enable;fb=b.dither;gb=b.polygonOffset_enable;Rb=b.sample_alpha;ta=b.sample_enable;Aa=b.scissor_enable;Z=b.stencil_enable;K=b.cull_face;N=b.depth_func;R=b.depth_mask;oa=b.frontFace;P=b.lineWidth;
Jb=b.stencil_mask;(a=w.next)?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);w.cur=a;a=d[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=d[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),
f.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=d[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=d[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,
a.w),a.buffer=null);a=d[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=d[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=d[6];a.buffer?
(f.enableVertexAttribArray(6),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=d[7];a.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=d[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,
a.buffer.buffer),f.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=d[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=d[10];a.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=d[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=d[12];a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,
a.stride,a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=d[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=d[14];a.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),
f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=d[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);m.currentVAO=null;m.setVAO(m.targetVAO);h?f.enable(3042):f.disable(3042);k.blend_enable=h;Y?f.enable(2884):f.disable(2884);k.cull_enable=Y;qa?f.enable(2929):f.disable(2929);k.depth_enable=qa;fb?f.enable(3024):
f.disable(3024);k.dither=fb;gb?f.enable(32823):f.disable(32823);k.polygonOffset_enable=gb;Rb?f.enable(32926):f.disable(32926);k.sample_alpha=Rb;ta?f.enable(32928):f.disable(32928);k.sample_enable=ta;Aa?f.enable(3089):f.disable(3089);k.scissor_enable=Aa;Z?f.enable(2960):f.disable(2960);k.stencil_enable=Z;f.blendColor(c[0],c[1],c[2],c[3]);x[0]=c[0];x[1]=c[1];x[2]=c[2];x[3]=c[3];f.blendEquationSeparate(t[0],t[1]);ea[0]=t[0];ea[1]=t[1];f.blendFuncSeparate(H[0],H[1],H[2],H[3]);I[0]=H[0];I[1]=H[1];I[2]=
H[2];I[3]=H[3];f.colorMask(y[0],y[1],y[2],y[3]);A[0]=y[0];A[1]=y[1];A[2]=y[2];A[3]=y[3];f.cullFace(K);k.cull_face=K;f.depthFunc(N);k.depth_func=N;f.depthMask(R);k.depth_mask=R;f.depthRange(C[0],C[1]);B[0]=C[0];B[1]=C[1];f.frontFace(oa);k.frontFace=oa;f.lineWidth(P);k.lineWidth=P;f.polygonOffset(J[0],J[1]);z[0]=J[0];z[1]=J[1];f.sampleCoverage(O[0],O[1]);M[0]=O[0];M[1]=O[1];f.scissor(p[0],p[1],p[2],p[3]);g[0]=p[0];g[1]=p[1];g[2]=p[2];g[3]=p[3];f.stencilFunc(q[0],q[1],q[2]);S[0]=q[0];S[1]=q[1];S[2]=
q[2];f.stencilMask(Jb);k.stencil_mask=Jb;f.stencilOpSeparate(X[0],X[1],X[2],X[3]);U[0]=X[0];U[1]=X[1];U[2]=X[2];U[3]=X[3];f.stencilOpSeparate(n[0],n[1],n[2],n[3]);la[0]=n[0];la[1]=n[1];la[2]=n[2];la[3]=n[3];f.viewport(Q[0],Q[1],Q[2],Q[3]);da[0]=Q[0];da[1]=Q[1];da[2]=Q[2];da[3]=Q[3]}}},$3:function(a,d,k,w){var f,b,m,c,x,t,ea,H,I,y,A,C,B,J,z,O,M,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb;f=a.context;b=a.current;m=a.framebuffer;c=a.gl;x=a.next;t=a.shader;ea=a.vao;H=x.blend_color;I=b.blend_color;y=x.blend_equation;
A=b.blend_equation;C=x.blend_func;B=b.blend_func;J=x.colorMask;z=b.colorMask;O=x.depth_range;M=b.depth_range;p=x.polygonOffset_offset;g=b.polygonOffset_offset;q=x.sample_coverage;S=b.sample_coverage;X=x.scissor_box;U=b.scissor_box;n=x.stencil_func;la=b.stencil_func;Q=x.stencil_opBack;da=b.stencil_opBack;e=x.stencil_opFront;h=b.stencil_opFront;Y=x.viewport;qa=b.viewport;fb={};gb={};return{batch:function(a,f){var k,Z,K,N,R;k=m.next;k!==m.cur&&(k?c.bindFramebuffer(36160,k.framebuffer):c.bindFramebuffer(36160,
null),m.cur=k);if(b.dirty){k=x.dither;k!==b.dither&&(k?c.enable(3024):c.disable(3024),b.dither=k);k=x.blend_enable;k!==b.blend_enable&&(k?c.enable(3042):c.disable(3042),b.blend_enable=k);k=H[0];K=H[1];N=H[2];R=H[3];if(k!==I[0]||K!==I[1]||N!==I[2]||R!==I[3])c.blendColor(k,K,N,R),I[0]=k,I[1]=K,I[2]=N,I[3]=R;k=y[0];K=y[1];if(k!==A[0]||K!==A[1])c.blendEquationSeparate(k,K),A[0]=k,A[1]=K;k=C[0];K=C[1];N=C[2];R=C[3];if(k!==B[0]||K!==B[1]||N!==B[2]||R!==B[3])c.blendFuncSeparate(k,K,N,R),B[0]=k,B[1]=K,B[2]=
N,B[3]=R;k=x.depth_enable;k!==b.depth_enable&&(k?c.enable(2929):c.disable(2929),b.depth_enable=k);k=x.depth_func;k!==b.depth_func&&(c.depthFunc(k),b.depth_func=k);k=O[0];K=O[1];if(k!==M[0]||K!==M[1])c.depthRange(k,K),M[0]=k,M[1]=K;k=x.depth_mask;k!==b.depth_mask&&(c.depthMask(k),b.depth_mask=k);k=J[0];K=J[1];N=J[2];R=J[3];if(k!==z[0]||K!==z[1]||N!==z[2]||R!==z[3])c.colorMask(k,K,N,R),z[0]=k,z[1]=K,z[2]=N,z[3]=R;k=x.cull_enable;k!==b.cull_enable&&(k?c.enable(2884):c.disable(2884),b.cull_enable=k);
k=x.cull_face;k!==b.cull_face&&(c.cullFace(k),b.cull_face=k);k=x.frontFace;k!==b.frontFace&&(c.frontFace(k),b.frontFace=k);k=x.lineWidth;k!==b.lineWidth&&(c.lineWidth(k),b.lineWidth=k);k=x.polygonOffset_enable;k!==b.polygonOffset_enable&&(k?c.enable(32823):c.disable(32823),b.polygonOffset_enable=k);k=p[0];K=p[1];if(k!==g[0]||K!==g[1])c.polygonOffset(k,K),g[0]=k,g[1]=K;k=x.sample_alpha;k!==b.sample_alpha&&(k?c.enable(32926):c.disable(32926),b.sample_alpha=k);k=x.sample_enable;k!==b.sample_enable&&
(k?c.enable(32928):c.disable(32928),b.sample_enable=k);k=q[0];K=q[1];if(k!==S[0]||K!==S[1])c.sampleCoverage(k,K),S[0]=k,S[1]=K;k=x.stencil_enable;k!==b.stencil_enable&&(k?c.enable(2960):c.disable(2960),b.stencil_enable=k);k=x.stencil_mask;k!==b.stencil_mask&&(c.stencilMask(k),b.stencil_mask=k);k=n[0];K=n[1];N=n[2];if(k!==la[0]||K!==la[1]||N!==la[2])c.stencilFunc(k,K,N),la[0]=k,la[1]=K,la[2]=N;k=e[0];K=e[1];N=e[2];R=e[3];if(k!==h[0]||K!==h[1]||N!==h[2]||R!==h[3])c.stencilOpSeparate(k,K,N,R),h[0]=k,
h[1]=K,h[2]=N,h[3]=R;k=Q[0];K=Q[1];N=Q[2];R=Q[3];if(k!==da[0]||K!==da[1]||N!==da[2]||R!==da[3])c.stencilOpSeparate(k,K,N,R),da[0]=k,da[1]=K,da[2]=N,da[3]=R;k=x.scissor_enable;k!==b.scissor_enable&&(k?c.enable(3089):c.disable(3089),b.scissor_enable=k);k=X[0];K=X[1];N=X[2];R=X[3];if(k!==U[0]||K!==U[1]||N!==U[2]||R!==U[3])c.scissor(k,K,N,R),U[0]=k,U[1]=K,U[2]=N,U[3]=R;k=Y[0];K=Y[1];N=Y[2];R=Y[3];if(k!==qa[0]||K!==qa[1]||N!==qa[2]||R!==qa[3])c.viewport(k,K,N,R),qa[0]=k,qa[1]=K,qa[2]=N,qa[3]=R;b.dirty=
!1}if(k=b.profile)Z=performance.now(),d.count+=f;K=t.program(t.vert,t.frag);c.useProgram(K.program);ea.setVAO(null);N=K.id;(R=gb[N])||(R=gb[N]=w(K));R.call(this,a,f);ea.setVAO(null);k&&(d.cpuTime+=performance.now()-Z)},draw:function(a){var f,w,Z,K,N;f=m.next;f!==m.cur&&(f?c.bindFramebuffer(36160,f.framebuffer):c.bindFramebuffer(36160,null),m.cur=f);if(b.dirty){f=x.dither;f!==b.dither&&(f?c.enable(3024):c.disable(3024),b.dither=f);f=x.blend_enable;f!==b.blend_enable&&(f?c.enable(3042):c.disable(3042),
b.blend_enable=f);f=H[0];Z=H[1];K=H[2];N=H[3];if(f!==I[0]||Z!==I[1]||K!==I[2]||N!==I[3])c.blendColor(f,Z,K,N),I[0]=f,I[1]=Z,I[2]=K,I[3]=N;f=y[0];Z=y[1];if(f!==A[0]||Z!==A[1])c.blendEquationSeparate(f,Z),A[0]=f,A[1]=Z;f=C[0];Z=C[1];K=C[2];N=C[3];if(f!==B[0]||Z!==B[1]||K!==B[2]||N!==B[3])c.blendFuncSeparate(f,Z,K,N),B[0]=f,B[1]=Z,B[2]=K,B[3]=N;f=x.depth_enable;f!==b.depth_enable&&(f?c.enable(2929):c.disable(2929),b.depth_enable=f);f=x.depth_func;f!==b.depth_func&&(c.depthFunc(f),b.depth_func=f);f=O[0];
Z=O[1];if(f!==M[0]||Z!==M[1])c.depthRange(f,Z),M[0]=f,M[1]=Z;f=x.depth_mask;f!==b.depth_mask&&(c.depthMask(f),b.depth_mask=f);f=J[0];Z=J[1];K=J[2];N=J[3];if(f!==z[0]||Z!==z[1]||K!==z[2]||N!==z[3])c.colorMask(f,Z,K,N),z[0]=f,z[1]=Z,z[2]=K,z[3]=N;f=x.cull_enable;f!==b.cull_enable&&(f?c.enable(2884):c.disable(2884),b.cull_enable=f);f=x.cull_face;f!==b.cull_face&&(c.cullFace(f),b.cull_face=f);f=x.frontFace;f!==b.frontFace&&(c.frontFace(f),b.frontFace=f);f=x.lineWidth;f!==b.lineWidth&&(c.lineWidth(f),
b.lineWidth=f);f=x.polygonOffset_enable;f!==b.polygonOffset_enable&&(f?c.enable(32823):c.disable(32823),b.polygonOffset_enable=f);f=p[0];Z=p[1];if(f!==g[0]||Z!==g[1])c.polygonOffset(f,Z),g[0]=f,g[1]=Z;f=x.sample_alpha;f!==b.sample_alpha&&(f?c.enable(32926):c.disable(32926),b.sample_alpha=f);f=x.sample_enable;f!==b.sample_enable&&(f?c.enable(32928):c.disable(32928),b.sample_enable=f);f=q[0];Z=q[1];if(f!==S[0]||Z!==S[1])c.sampleCoverage(f,Z),S[0]=f,S[1]=Z;f=x.stencil_enable;f!==b.stencil_enable&&(f?
c.enable(2960):c.disable(2960),b.stencil_enable=f);f=x.stencil_mask;f!==b.stencil_mask&&(c.stencilMask(f),b.stencil_mask=f);f=n[0];Z=n[1];K=n[2];if(f!==la[0]||Z!==la[1]||K!==la[2])c.stencilFunc(f,Z,K),la[0]=f,la[1]=Z,la[2]=K;f=e[0];Z=e[1];K=e[2];N=e[3];if(f!==h[0]||Z!==h[1]||K!==h[2]||N!==h[3])c.stencilOpSeparate(f,Z,K,N),h[0]=f,h[1]=Z,h[2]=K,h[3]=N;f=Q[0];Z=Q[1];K=Q[2];N=Q[3];if(f!==da[0]||Z!==da[1]||K!==da[2]||N!==da[3])c.stencilOpSeparate(f,Z,K,N),da[0]=f,da[1]=Z,da[2]=K,da[3]=N;f=x.scissor_enable;
f!==b.scissor_enable&&(f?c.enable(3089):c.disable(3089),b.scissor_enable=f);f=X[0];Z=X[1];K=X[2];N=X[3];if(f!==U[0]||Z!==U[1]||K!==U[2]||N!==U[3])c.scissor(f,Z,K,N),U[0]=f,U[1]=Z,U[2]=K,U[3]=N;f=Y[0];Z=Y[1];K=Y[2];N=Y[3];if(f!==qa[0]||Z!==qa[1]||K!==qa[2]||N!==qa[3])c.viewport(f,Z,K,N),qa[0]=f,qa[1]=Z,qa[2]=K,qa[3]=N;b.dirty=!1}if(f=b.profile)w=performance.now(),d.count++;Z=t.program(t.vert,t.frag);c.useProgram(Z.program);ea.setVAO(null);K=Z.id;(N=fb[K])||(N=fb[K]=k(Z));N.call(this,a);ea.setVAO(null);
f&&(d.cpuTime+=performance.now()-w)},scope:function(a,c,e){var k,h;if(k=b.profile)h=performance.now(),d.count++;c(f,a,e);k&&(d.cpuTime+=performance.now()-h)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,d,k,w,f,b,m,c,x,t,ea,H,I,y,A,C,B,J,z,O,M,p,g,
q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va,Xb,qc,sc,ud,xc,aa,L,ia,Da,tb,$c,ad,E,v,ha,ua,V,fa,na){var F,u,ca,D,xa,ka,l,kc,ma,G,Ib,zb,Ue,se,te,ke,Kd,re,td,fe,we,Gd,kd,$d,Nd,Se,kf,Ve,Cd,De,Ud,Vd,Ld,Yd,rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb;F=a.attributes;u=a.context;ca=a.current;D=a.draw;xa=a.elements;ka=a.framebuffer;l=a.gl;kc=a.next;ma=a.shader;G=a.uniforms;Ib=a.vao;zb=kc.blend_color;
Ue=ca.blend_color;se=kc.blend_equation;te=ca.blend_equation;ke=kc.blend_func;Kd=ca.blend_func;re=kc.colorMask;td=ca.colorMask;fe=kc.depth_range;we=ca.depth_range;Gd=kc.polygonOffset_offset;kd=ca.polygonOffset_offset;$d=kc.sample_coverage;Nd=ca.sample_coverage;Se=kc.scissor_box;kf=ca.scissor_box;Ve=kc.stencil_func;Cd=ca.stencil_func;De=kc.stencil_opBack;Ud=ca.stencil_opBack;Vd=kc.stencil_opFront;Ld=ca.stencil_opFront;Yd=kc.viewport;rd=ca.viewport;ld={};xd={};qd=new Float32Array(16);ed=new Float32Array(16);
zc=new Float32Array(16);sd=new Float32Array(16);gd=new Float32Array(16);Lc=new Float32Array(16);tc=new Float32Array(16);$a=new Float32Array(16);lc=new Float32Array(16);Fb=new Float32Array(16);rc=new Float32Array(16);Ra=new Float32Array(16);Ic=new Float32Array(16);bc=new Float32Array(16);Yc=new Float32Array(16);Sd=new Float32Array(16);md=new Float32Array(16);Ac=new Float32Array(16);ec=new Float32Array(16);Fc=new Float32Array(16);Ab=new Float32Array(16);La=new Float32Array(16);ub=new Float32Array(16);
Ua=new Float32Array(16);pa=new Float32Array(16);vd=new Float32Array(16);Cb=new Float32Array(16);Qa=new Float32Array(16);Hb=new Float32Array(16);bb=new Float32Array(16);Qc=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(a,d){var e,k,h,g;e=ka.next;e!==ka.cur&&(e?l.bindFramebuffer(36160,e.framebuffer):l.bindFramebuffer(36160,null),ka.cur=e);if(ca.dirty){var n,p,q,G,Q,S,ma,O,U,X,Y,$a,Ra,ra,da,wa,zb,Fb,Ba,bc,Ia,la,Lc,Pa,gd;n=re[0];p=re[1];q=re[2];G=re[3];if(n!==td[0]||p!==td[1]||q!==
td[2]||G!==td[3])l.colorMask(n,p,q,G),td[0]=n,td[1]=p,td[2]=q,td[3]=G;Q=kc.frontFace;Q!==ca.frontFace&&(l.frontFace(Q),ca.frontFace=Q);S=kc.polygonOffset_enable;S!==ca.polygonOffset_enable&&(S?l.enable(32823):l.disable(32823),ca.polygonOffset_enable=S);ma=Gd[0];O=Gd[1];if(ma!==kd[0]||O!==kd[1])l.polygonOffset(ma,O),kd[0]=ma,kd[1]=O;U=kc.sample_alpha;U!==ca.sample_alpha&&(U?l.enable(32926):l.disable(32926),ca.sample_alpha=U);X=kc.sample_enable;X!==ca.sample_enable&&(X?l.enable(32928):l.disable(32928),
ca.sample_enable=X);Y=$d[0];$a=$d[1];if(Y!==Nd[0]||$a!==Nd[1])l.sampleCoverage(Y,$a),Nd[0]=Y,Nd[1]=$a;Ra=kc.stencil_enable;Ra!==ca.stencil_enable&&(Ra?l.enable(2960):l.disable(2960),ca.stencil_enable=Ra);ra=kc.stencil_mask;ra!==ca.stencil_mask&&(l.stencilMask(ra),ca.stencil_mask=ra);da=Ve[0];wa=Ve[1];zb=Ve[2];if(da!==Cd[0]||wa!==Cd[1]||zb!==Cd[2])l.stencilFunc(da,wa,zb),Cd[0]=da,Cd[1]=wa,Cd[2]=zb;Fb=Vd[0];Ba=Vd[1];bc=Vd[2];Ia=Vd[3];if(Fb!==Ld[0]||Ba!==Ld[1]||bc!==Ld[2]||Ia!==Ld[3])l.stencilOpSeparate(Fb,
Ba,bc,Ia),Ld[0]=Fb,Ld[1]=Ba,Ld[2]=bc,Ld[3]=Ia;la=De[0];Lc=De[1];Pa=De[2];gd=De[3];if(la!==Ud[0]||Lc!==Ud[1]||Pa!==Ud[2]||gd!==Ud[3])l.stencilOpSeparate(la,Lc,Pa,gd),Ud[0]=la,Ud[1]=Lc,Ud[2]=Pa,Ud[3]=gd}l.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;l.disable(3042);ca.blend_enable=!1;l.blendEquationSeparate(32774,32774);te[0]=32774;te[1]=32774;l.blendFuncSeparate(770,771,1,1);Kd[0]=770;Kd[1]=771;Kd[2]=1;Kd[3]=1;l.enable(2884);ca.cull_enable=!0;l.cullFace(1029);ca.cull_face=1029;l.enable(2929);
ca.depth_enable=!0;l.depthFunc(513);ca.depth_func=513;l.depthMask(!0);ca.depth_mask=!0;l.depthRange(0,1);we[0]=0;we[1]=1;l.disable(3024);ca.dither=!1;l.lineWidth(2);ca.lineWidth=2;l.enable(3089);ca.scissor_enable=!0;k=ca.profile;ca.profile=!1;l.useProgram(Rb.program);var M,Ya,qa,ya,tc,Ka,Se,eb,ib,za,zc,Ea,pb,qb,Va,Wa,Ic,lc,Yc,Ta,Mb,ed,Fa,rc,Oa,Ca,lb,wb,Eb,rb,qd,xb,sd;Ib.setVAO(null);M=Xb.location;Ya=F[M];Ya.buffer||l.enableVertexAttribArray(M);if(Ya.type!==w.dtype||4!==Ya.size||Ya.buffer!==w||!1!==
Ya.normalized||0!==Ya.offset||0!==Ya.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(M,4,w.dtype,!1,0,0),Ya.type=w.dtype,Ya.size=4,Ya.buffer=w,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;qa=qc.location;ya=F[qa];ya.buffer||l.enableVertexAttribArray(qa);if(ya.type!==f.dtype||4!==ya.size||ya.buffer!==f||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,f.buffer),l.vertexAttribPointer(qa,4,f.dtype,!1,0,0),ya.type=f.dtype,ya.size=4,ya.buffer=f,ya.normalized=!1,ya.offset=0,ya.stride=
0;tc=sc.location;Ka=F[tc];Ka.buffer||l.enableVertexAttribArray(tc);if(Ka.type!==b.dtype||4!==Ka.size||Ka.buffer!==b||!1!==Ka.normalized||0!==Ka.offset||0!==Ka.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(tc,4,b.dtype,!1,0,0),Ka.type=b.dtype,Ka.size=4,Ka.buffer=b,Ka.normalized=!1,Ka.offset=0,Ka.stride=0;Se=ud.location;eb=F[Se];eb.buffer||l.enableVertexAttribArray(Se);if(eb.type!==m.dtype||4!==eb.size||eb.buffer!==m||!1!==eb.normalized||0!==eb.offset||0!==eb.stride)l.bindBuffer(34962,m.buffer),
l.vertexAttribPointer(Se,4,m.dtype,!1,0,0),eb.type=m.dtype,eb.size=4,eb.buffer=m,eb.normalized=!1,eb.offset=0,eb.stride=0;ib=xc.location;za=F[ib];za.buffer||l.enableVertexAttribArray(ib);if(za.type!==c.dtype||4!==za.size||za.buffer!==c||!1!==za.normalized||0!==za.offset||0!==za.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(ib,4,c.dtype,!1,0,0),za.type=c.dtype,za.size=4,za.buffer=c,za.normalized=!1,za.offset=0,za.stride=0;zc=aa.location;Ea=F[zc];Ea.buffer||l.enableVertexAttribArray(zc);
if(Ea.type!==x.dtype||4!==Ea.size||Ea.buffer!==x||!1!==Ea.normalized||0!==Ea.offset||0!==Ea.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(zc,4,x.dtype,!1,0,0),Ea.type=x.dtype,Ea.size=4,Ea.buffer=x,Ea.normalized=!1,Ea.offset=0,Ea.stride=0;pb=L.location;qb=F[pb];qb.buffer||l.enableVertexAttribArray(pb);if(qb.type!==t.dtype||4!==qb.size||qb.buffer!==t||!1!==qb.normalized||0!==qb.offset||0!==qb.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(pb,4,t.dtype,!1,0,0),qb.type=t.dtype,
qb.size=4,qb.buffer=t,qb.normalized=!1,qb.offset=0,qb.stride=0;Va=ia.location;Wa=F[Va];Wa.buffer||l.enableVertexAttribArray(Va);if(Wa.type!==ea.dtype||4!==Wa.size||Wa.buffer!==ea||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)l.bindBuffer(34962,ea.buffer),l.vertexAttribPointer(Va,4,ea.dtype,!1,0,0),Wa.type=ea.dtype,Wa.size=4,Wa.buffer=ea,Wa.normalized=!1,Wa.offset=0,Wa.stride=0;Ic=Da.location;lc=F[Ic];lc.buffer||l.enableVertexAttribArray(Ic);if(lc.type!==H.dtype||4!==lc.size||lc.buffer!==H||!1!==
lc.normalized||0!==lc.offset||0!==lc.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(Ic,4,H.dtype,!1,0,0),lc.type=H.dtype,lc.size=4,lc.buffer=H,lc.normalized=!1,lc.offset=0,lc.stride=0;Yc=tb.location;Ta=F[Yc];Ta.buffer||l.enableVertexAttribArray(Yc);if(Ta.type!==I.dtype||4!==Ta.size||Ta.buffer!==I||!1!==Ta.normalized||0!==Ta.offset||0!==Ta.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(Yc,4,I.dtype,!1,0,0),Ta.type=I.dtype,Ta.size=4,Ta.buffer=I,Ta.normalized=!1,Ta.offset=0,Ta.stride=
0;Mb=$c.location;ed=F[Mb];ed.buffer||l.enableVertexAttribArray(Mb);if(ed.type!==y.dtype||4!==ed.size||ed.buffer!==y||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(Mb,4,y.dtype,!1,0,0),ed.type=y.dtype,ed.size=4,ed.buffer=y,ed.normalized=!1,ed.offset=0,ed.stride=0;Fa=ad.location;rc=F[Fa];rc.buffer||l.enableVertexAttribArray(Fa);if(rc.type!==A.dtype||4!==rc.size||rc.buffer!==A||!1!==rc.normalized||0!==rc.offset||0!==rc.stride)l.bindBuffer(34962,A.buffer),
l.vertexAttribPointer(Fa,4,A.dtype,!1,0,0),rc.type=A.dtype,rc.size=4,rc.buffer=A,rc.normalized=!1,rc.offset=0,rc.stride=0;Oa=E.location;Ca=F[Oa];Ca.buffer||l.enableVertexAttribArray(Oa);if(Ca.type!==C.dtype||4!==Ca.size||Ca.buffer!==C||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(Oa,4,C.dtype,!1,0,0),Ca.type=C.dtype,Ca.size=4,Ca.buffer=C,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;lb=v.location;wb=F[lb];wb.buffer||l.enableVertexAttribArray(lb);if(wb.type!==
B.dtype||4!==wb.size||wb.buffer!==B||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(lb,4,B.dtype,!1,0,0),wb.type=B.dtype,wb.size=4,wb.buffer=B,wb.normalized=!1,wb.offset=0,wb.stride=0;Eb=ha.location;rb=F[Eb];rb.buffer||l.enableVertexAttribArray(Eb);if(rb.type!==J.dtype||4!==rb.size||rb.buffer!==J||!1!==rb.normalized||0!==rb.offset||0!==rb.stride)l.bindBuffer(34962,J.buffer),l.vertexAttribPointer(Eb,4,J.dtype,!1,0,0),rb.type=J.dtype,rb.size=4,rb.buffer=
J,rb.normalized=!1,rb.offset=0,rb.stride=0;qd=Aa.location;xb=F[qd];xb.buffer||l.enableVertexAttribArray(qd);if(xb.type!==z.dtype||4!==xb.size||xb.buffer!==z||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(qd,4,z.dtype,!1,0,0),xb.type=z.dtype,xb.size=4,xb.buffer=z,xb.normalized=!1,xb.offset=0,xb.stride=0;l.uniform1i(ua.location,ta.bind());(sd=D.elements)?l.bindBuffer(34963,sd.buffer.buffer):Ib.currentVAO&&(sd=xa.getElements(Ib.currentVAO.elements))&&
l.bindBuffer(34963,sd.buffer.buffer);for(h=0;h<d;++h){g=a[h];var ke,fe,Yd,Sd,se,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,fb,gb,id,Xc,Zb,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae;ld.height=g.viewportHeight;ld.width=g.viewportWidth;ld.x=g.viewportX;ld.y=g.viewportY;ke=ld.x|0;fe=ld.y|0;Yd="width"in ld?ld.width|0:u.framebufferWidth-ke;Sd="height"in ld?ld.height|0:u.framebufferHeight-fe;se=u.viewportWidth;u.viewportWidth=Yd;Yb=u.viewportHeight;
u.viewportHeight=Sd;l.viewport(ke,fe,Yd,Sd);rd[0]=ke;rd[1]=fe;rd[2]=Yd;rd[3]=Sd;xd.height=g.scissorHeight;xd.width=g.scissorWidth;xd.x=g.scissorX;xd.y=g.scissorY;cc=xd.x|0;Pb=xd.y|0;Ga="width"in xd?xd.width|0:u.framebufferWidth-cc;$b="height"in xd?xd.height|0:u.framebufferHeight-Pb;l.scissor(cc,Pb,Ga,$b);kf[0]=cc;kf[1]=Pb;kf[2]=Ga;kf[3]=$b;mb=g.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(mb)||mb instanceof Float32Array?mb:(md[0]=mb[0],md[1]=mb[1],md[2]=mb[2],md[3]=mb[3],md[4]=mb[4],md[5]=
mb[5],md[6]=mb[6],md[7]=mb[7],md[8]=mb[8],md[9]=mb[9],md[10]=mb[10],md[11]=mb[11],md[12]=mb[12],md[13]=mb[13],md[14]=mb[14],md[15]=mb[15],md));yb=g.dim1A;l.uniformMatrix4fv(P.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(Ac[0]=yb[0],Ac[1]=yb[1],Ac[2]=yb[2],Ac[3]=yb[3],Ac[4]=yb[4],Ac[5]=yb[5],Ac[6]=yb[6],Ac[7]=yb[7],Ac[8]=yb[8],Ac[9]=yb[9],Ac[10]=yb[10],Ac[11]=yb[11],Ac[12]=yb[12],Ac[13]=yb[13],Ac[14]=yb[14],Ac[15]=yb[15],Ac));Nb=g.dim0B;l.uniformMatrix4fv(N.location,!1,Array.isArray(Nb)||
Nb instanceof Float32Array?Nb:(ec[0]=Nb[0],ec[1]=Nb[1],ec[2]=Nb[2],ec[3]=Nb[3],ec[4]=Nb[4],ec[5]=Nb[5],ec[6]=Nb[6],ec[7]=Nb[7],ec[8]=Nb[8],ec[9]=Nb[9],ec[10]=Nb[10],ec[11]=Nb[11],ec[12]=Nb[12],ec[13]=Nb[13],ec[14]=Nb[14],ec[15]=Nb[15],ec));Qb=g.dim1B;l.uniformMatrix4fv(Jb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Fc[0]=Qb[0],Fc[1]=Qb[1],Fc[2]=Qb[2],Fc[3]=Qb[3],Fc[4]=Qb[4],Fc[5]=Qb[5],Fc[6]=Qb[6],Fc[7]=Qb[7],Fc[8]=Qb[8],Fc[9]=Qb[9],Fc[10]=Qb[10],Fc[11]=Qb[11],Fc[12]=Qb[12],Fc[13]=
Qb[13],Fc[14]=Qb[14],Fc[15]=Qb[15],Fc));gc=g.dim0C;l.uniformMatrix4fv(R.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Ab[0]=gc[0],Ab[1]=gc[1],Ab[2]=gc[2],Ab[3]=gc[3],Ab[4]=gc[4],Ab[5]=gc[5],Ab[6]=gc[6],Ab[7]=gc[7],Ab[8]=gc[8],Ab[9]=gc[9],Ab[10]=gc[10],Ab[11]=gc[11],Ab[12]=gc[12],Ab[13]=gc[13],Ab[14]=gc[14],Ab[15]=gc[15],Ab));ic=g.dim1C;l.uniformMatrix4fv(Za.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(La[0]=ic[0],La[1]=ic[1],La[2]=ic[2],La[3]=ic[3],La[4]=ic[4],La[5]=
ic[5],La[6]=ic[6],La[7]=ic[7],La[8]=ic[8],La[9]=ic[9],La[10]=ic[10],La[11]=ic[11],La[12]=ic[12],La[13]=ic[13],La[14]=ic[14],La[15]=ic[15],La));Rc=g.dim0D;l.uniformMatrix4fv(oa.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(ub[0]=Rc[0],ub[1]=Rc[1],ub[2]=Rc[2],ub[3]=Rc[3],ub[4]=Rc[4],ub[5]=Rc[5],ub[6]=Rc[6],ub[7]=Rc[7],ub[8]=Rc[8],ub[9]=Rc[9],ub[10]=Rc[10],ub[11]=Rc[11],ub[12]=Rc[12],ub[13]=Rc[13],ub[14]=Rc[14],ub[15]=Rc[15],ub));Bc=g.dim1D;l.uniformMatrix4fv(T.location,!1,Array.isArray(Bc)||
Bc instanceof Float32Array?Bc:(Ua[0]=Bc[0],Ua[1]=Bc[1],Ua[2]=Bc[2],Ua[3]=Bc[3],Ua[4]=Bc[4],Ua[5]=Bc[5],Ua[6]=Bc[6],Ua[7]=Bc[7],Ua[8]=Bc[8],Ua[9]=Bc[9],Ua[10]=Bc[10],Ua[11]=Bc[11],Ua[12]=Bc[12],Ua[13]=Bc[13],Ua[14]=Bc[14],Ua[15]=Bc[15],Ua));Cc=g.loA;l.uniformMatrix4fv(dc.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(pa[0]=Cc[0],pa[1]=Cc[1],pa[2]=Cc[2],pa[3]=Cc[3],pa[4]=Cc[4],pa[5]=Cc[5],pa[6]=Cc[6],pa[7]=Cc[7],pa[8]=Cc[8],pa[9]=Cc[9],pa[10]=Cc[10],pa[11]=Cc[11],pa[12]=Cc[12],pa[13]=
Cc[13],pa[14]=Cc[14],pa[15]=Cc[15],pa));Dc=g.hiA;l.uniformMatrix4fv(ja.location,!1,Array.isArray(Dc)||Dc instanceof Float32Array?Dc:(vd[0]=Dc[0],vd[1]=Dc[1],vd[2]=Dc[2],vd[3]=Dc[3],vd[4]=Dc[4],vd[5]=Dc[5],vd[6]=Dc[6],vd[7]=Dc[7],vd[8]=Dc[8],vd[9]=Dc[9],vd[10]=Dc[10],vd[11]=Dc[11],vd[12]=Dc[12],vd[13]=Dc[13],vd[14]=Dc[14],vd[15]=Dc[15],vd));Nc=g.loB;l.uniformMatrix4fv(Xa.location,!1,Array.isArray(Nc)||Nc instanceof Float32Array?Nc:(Cb[0]=Nc[0],Cb[1]=Nc[1],Cb[2]=Nc[2],Cb[3]=Nc[3],Cb[4]=Nc[4],Cb[5]=
Nc[5],Cb[6]=Nc[6],Cb[7]=Nc[7],Cb[8]=Nc[8],Cb[9]=Nc[9],Cb[10]=Nc[10],Cb[11]=Nc[11],Cb[12]=Nc[12],Cb[13]=Nc[13],Cb[14]=Nc[14],Cb[15]=Nc[15],Cb));Zc=g.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Qa[0]=Zc[0],Qa[1]=Zc[1],Qa[2]=Zc[2],Qa[3]=Zc[3],Qa[4]=Zc[4],Qa[5]=Zc[5],Qa[6]=Zc[6],Qa[7]=Zc[7],Qa[8]=Zc[8],Qa[9]=Zc[9],Qa[10]=Zc[10],Qa[11]=Zc[11],Qa[12]=Zc[12],Qa[13]=Zc[13],Qa[14]=Zc[14],Qa[15]=Zc[15],Qa));Sc=g.loC;l.uniformMatrix4fv(W.location,!1,Array.isArray(Sc)||
Sc instanceof Float32Array?Sc:(Hb[0]=Sc[0],Hb[1]=Sc[1],Hb[2]=Sc[2],Hb[3]=Sc[3],Hb[4]=Sc[4],Hb[5]=Sc[5],Hb[6]=Sc[6],Hb[7]=Sc[7],Hb[8]=Sc[8],Hb[9]=Sc[9],Hb[10]=Sc[10],Hb[11]=Sc[11],Hb[12]=Sc[12],Hb[13]=Sc[13],Hb[14]=Sc[14],Hb[15]=Sc[15],Hb));Oc=g.hiC;l.uniformMatrix4fv(Ha.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(bb[0]=Oc[0],bb[1]=Oc[1],bb[2]=Oc[2],bb[3]=Oc[3],bb[4]=Oc[4],bb[5]=Oc[5],bb[6]=Oc[6],bb[7]=Oc[7],bb[8]=Oc[8],bb[9]=Oc[9],bb[10]=Oc[10],bb[11]=Oc[11],bb[12]=Oc[12],bb[13]=
Oc[13],bb[14]=Oc[14],bb[15]=Oc[15],bb));Lb=g.loD;l.uniformMatrix4fv(sb.location,!1,Array.isArray(Lb)||Lb instanceof Float32Array?Lb:(Qc[0]=Lb[0],Qc[1]=Lb[1],Qc[2]=Lb[2],Qc[3]=Lb[3],Qc[4]=Lb[4],Qc[5]=Lb[5],Qc[6]=Lb[6],Qc[7]=Lb[7],Qc[8]=Lb[8],Qc[9]=Lb[9],Qc[10]=Lb[10],Qc[11]=Lb[11],Qc[12]=Lb[12],Qc[13]=Lb[13],Qc[14]=Lb[14],Qc[15]=Lb[15],Qc));Gb=g.hiD;l.uniformMatrix4fv(Ja.location,!1,Array.isArray(Gb)||Gb instanceof Float32Array?Gb:(Sb[0]=Gb[0],Sb[1]=Gb[1],Sb[2]=Gb[2],Sb[3]=Gb[3],Sb[4]=Gb[4],Sb[5]=
Gb[5],Sb[6]=Gb[6],Sb[7]=Gb[7],Sb[8]=Gb[8],Sb[9]=Gb[9],Sb[10]=Gb[10],Sb[11]=Gb[11],Sb[12]=Gb[12],Sb[13]=Gb[13],Sb[14]=Gb[14],Sb[15]=Gb[15],Sb));Pc=g.resolution;Hc=Pc[0];hc=Pc[1];h&&Tc===Hc&&Wc===hc||(Tc=Hc,Wc=hc,l.uniform2f(V.location,Hc,hc));fb=g.viewBoxPos;gb=fb[0];Xc=fb[1];h&&id===gb&&Zb===Xc||(id=gb,Zb=Xc,l.uniform2f(fa.location,gb,Xc));wd=g.viewBoxSize;ie=wd[0];le=wd[1];h&&ue===ie&&Hd===le||(ue=ie,Hd=le,l.uniform2f(na.location,ie,le));Ed=g.maskHeight;h&&fd===Ed||(fd=Ed,l.uniform1f(ga.location,
Ed));Ec=g.drwLayer;h&&pd===Ec||(pd=Ec,l.uniform1f(r.location,Ec));hd=g.contextColor;bd=hd[0];zd=hd[1];ve=hd[2];xe=hd[3];h&&jd===bd&&Bd===zd&&me===ve&&ee===xe||(jd=bd,Bd=zd,me=ve,ee=xe,l.uniform4f(Z.location,bd,zd,ve,xe));(de=g.maskTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);ce=de._texture;l.uniform1i(va.location,ce.bind());oe=g.offset;if(ae=g.count)sd?l.drawElements(1,ae,sd.type,oe<<(sd.type-5121>>1)):l.drawArrays(1,oe,ae),u.viewportWidth=se,u.viewportHeight=Yb,ce.unbind()}ta.unbind();
ca.dirty=!0;Ib.setVAO(null);ca.profile=k},draw:function(a){var d,e,h,g,n,p;d=ka.next;d!==ka.cur&&(d?l.bindFramebuffer(36160,d.framebuffer):l.bindFramebuffer(36160,null),ka.cur=d);if(ca.dirty){d=re[0];p=re[1];e=re[2];h=re[3];if(d!==td[0]||p!==td[1]||e!==td[2]||h!==td[3])l.colorMask(d,p,e,h),td[0]=d,td[1]=p,td[2]=e,td[3]=h;d=kc.frontFace;d!==ca.frontFace&&(l.frontFace(d),ca.frontFace=d);d=kc.polygonOffset_enable;d!==ca.polygonOffset_enable&&(d?l.enable(32823):l.disable(32823),ca.polygonOffset_enable=
d);d=Gd[0];p=Gd[1];if(d!==kd[0]||p!==kd[1])l.polygonOffset(d,p),kd[0]=d,kd[1]=p;d=kc.sample_alpha;d!==ca.sample_alpha&&(d?l.enable(32926):l.disable(32926),ca.sample_alpha=d);d=kc.sample_enable;d!==ca.sample_enable&&(d?l.enable(32928):l.disable(32928),ca.sample_enable=d);d=$d[0];p=$d[1];if(d!==Nd[0]||p!==Nd[1])l.sampleCoverage(d,p),Nd[0]=d,Nd[1]=p;d=kc.stencil_enable;d!==ca.stencil_enable&&(d?l.enable(2960):l.disable(2960),ca.stencil_enable=d);d=kc.stencil_mask;d!==ca.stencil_mask&&(l.stencilMask(d),
ca.stencil_mask=d);d=Ve[0];p=Ve[1];e=Ve[2];if(d!==Cd[0]||p!==Cd[1]||e!==Cd[2])l.stencilFunc(d,p,e),Cd[0]=d,Cd[1]=p,Cd[2]=e;d=Vd[0];p=Vd[1];e=Vd[2];h=Vd[3];if(d!==Ld[0]||p!==Ld[1]||e!==Ld[2]||h!==Ld[3])l.stencilOpSeparate(d,p,e,h),Ld[0]=d,Ld[1]=p,Ld[2]=e,Ld[3]=h;d=De[0];p=De[1];e=De[2];h=De[3];if(d!==Ud[0]||p!==Ud[1]||e!==Ud[2]||h!==Ud[3])l.stencilOpSeparate(d,p,e,h),Ud[0]=d,Ud[1]=p,Ud[2]=e,Ud[3]=h}ld.height=a.viewportHeight;ld.width=a.viewportWidth;ld.x=a.viewportX;ld.y=a.viewportY;e=ld.x|0;h=ld.y|
0;g="width"in ld?ld.width|0:u.framebufferWidth-e;n="height"in ld?ld.height|0:u.framebufferHeight-h;d=u.viewportWidth;u.viewportWidth=g;p=u.viewportHeight;u.viewportHeight=n;l.viewport(e,h,g,n);rd[0]=e;rd[1]=h;rd[2]=g;rd[3]=n;l.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;l.disable(3042);ca.blend_enable=!1;l.blendEquationSeparate(32774,32774);te[0]=32774;te[1]=32774;l.blendFuncSeparate(770,771,1,1);Kd[0]=770;Kd[1]=771;Kd[2]=1;Kd[3]=1;l.enable(2884);ca.cull_enable=!0;l.cullFace(1029);ca.cull_face=
1029;l.enable(2929);ca.depth_enable=!0;l.depthFunc(513);ca.depth_func=513;l.depthMask(!0);ca.depth_mask=!0;l.depthRange(0,1);we[0]=0;we[1]=1;l.disable(3024);ca.dither=!1;l.lineWidth(2);ca.lineWidth=2;xd.height=a.scissorHeight;xd.width=a.scissorWidth;xd.x=a.scissorX;xd.y=a.scissorY;e=xd.x|0;h=xd.y|0;g="width"in xd?xd.width|0:u.framebufferWidth-e;n="height"in xd?xd.height|0:u.framebufferHeight-h;l.scissor(e,h,g,n);kf[0]=e;kf[1]=h;kf[2]=g;kf[3]=n;l.enable(3089);ca.scissor_enable=!0;e=ca.profile;ca.profile=
!1;l.useProgram(k.program);Ib.setVAO(null);h=Xb.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==w.dtype||4!==g.size||g.buffer!==w||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,w.buffer),l.vertexAttribPointer(h,4,w.dtype,!1,0,0),g.type=w.dtype,g.size=4,g.buffer=w,g.normalized=!1,g.offset=0,g.stride=0;h=qc.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==f.dtype||4!==g.size||g.buffer!==f||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,
f.buffer),l.vertexAttribPointer(h,4,f.dtype,!1,0,0),g.type=f.dtype,g.size=4,g.buffer=f,g.normalized=!1,g.offset=0,g.stride=0;h=sc.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==b.dtype||4!==g.size||g.buffer!==b||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,b.buffer),l.vertexAttribPointer(h,4,b.dtype,!1,0,0),g.type=b.dtype,g.size=4,g.buffer=b,g.normalized=!1,g.offset=0,g.stride=0;h=ud.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==m.dtype||
4!==g.size||g.buffer!==m||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,m.buffer),l.vertexAttribPointer(h,4,m.dtype,!1,0,0),g.type=m.dtype,g.size=4,g.buffer=m,g.normalized=!1,g.offset=0,g.stride=0;h=xc.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==c.dtype||4!==g.size||g.buffer!==c||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,c.buffer),l.vertexAttribPointer(h,4,c.dtype,!1,0,0),g.type=c.dtype,g.size=4,g.buffer=c,g.normalized=!1,g.offset=0,
g.stride=0;h=aa.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==x.dtype||4!==g.size||g.buffer!==x||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,x.buffer),l.vertexAttribPointer(h,4,x.dtype,!1,0,0),g.type=x.dtype,g.size=4,g.buffer=x,g.normalized=!1,g.offset=0,g.stride=0;h=L.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==t.dtype||4!==g.size||g.buffer!==t||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,t.buffer),l.vertexAttribPointer(h,
4,t.dtype,!1,0,0),g.type=t.dtype,g.size=4,g.buffer=t,g.normalized=!1,g.offset=0,g.stride=0;h=ia.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==ea.dtype||4!==g.size||g.buffer!==ea||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,ea.buffer),l.vertexAttribPointer(h,4,ea.dtype,!1,0,0),g.type=ea.dtype,g.size=4,g.buffer=ea,g.normalized=!1,g.offset=0,g.stride=0;h=Da.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==H.dtype||4!==g.size||g.buffer!==H||
!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,H.buffer),l.vertexAttribPointer(h,4,H.dtype,!1,0,0),g.type=H.dtype,g.size=4,g.buffer=H,g.normalized=!1,g.offset=0,g.stride=0;h=tb.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==I.dtype||4!==g.size||g.buffer!==I||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(h,4,I.dtype,!1,0,0),g.type=I.dtype,g.size=4,g.buffer=I,g.normalized=!1,g.offset=0,g.stride=0;h=$c.location;
g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==y.dtype||4!==g.size||g.buffer!==y||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(h,4,y.dtype,!1,0,0),g.type=y.dtype,g.size=4,g.buffer=y,g.normalized=!1,g.offset=0,g.stride=0;h=ad.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==A.dtype||4!==g.size||g.buffer!==A||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,A.buffer),l.vertexAttribPointer(h,4,A.dtype,!1,
0,0),g.type=A.dtype,g.size=4,g.buffer=A,g.normalized=!1,g.offset=0,g.stride=0;h=E.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==C.dtype||4!==g.size||g.buffer!==C||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(h,4,C.dtype,!1,0,0),g.type=C.dtype,g.size=4,g.buffer=C,g.normalized=!1,g.offset=0,g.stride=0;h=v.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==B.dtype||4!==g.size||g.buffer!==B||!1!==g.normalized||0!==
g.offset||0!==g.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(h,4,B.dtype,!1,0,0),g.type=B.dtype,g.size=4,g.buffer=B,g.normalized=!1,g.offset=0,g.stride=0;h=ha.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);if(g.type!==J.dtype||4!==g.size||g.buffer!==J||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,J.buffer),l.vertexAttribPointer(h,4,J.dtype,!1,0,0),g.type=J.dtype,g.size=4,g.buffer=J,g.normalized=!1,g.offset=0,g.stride=0;h=Aa.location;g=F[h];g.buffer||l.enableVertexAttribArray(h);
if(g.type!==z.dtype||4!==g.size||g.buffer!==z||!1!==g.normalized||0!==g.offset||0!==g.stride)l.bindBuffer(34962,z.buffer),l.vertexAttribPointer(h,4,z.dtype,!1,0,0),g.type=z.dtype,g.size=4,g.buffer=z,g.normalized=!1,g.offset=0,g.stride=0;h=a.dim0A;l.uniformMatrix4fv(K.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(qd[0]=h[0],qd[1]=h[1],qd[2]=h[2],qd[3]=h[3],qd[4]=h[4],qd[5]=h[5],qd[6]=h[6],qd[7]=h[7],qd[8]=h[8],qd[9]=h[9],qd[10]=h[10],qd[11]=h[11],qd[12]=h[12],qd[13]=h[13],qd[14]=h[14],
qd[15]=h[15],qd));h=a.dim1A;l.uniformMatrix4fv(P.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(ed[0]=h[0],ed[1]=h[1],ed[2]=h[2],ed[3]=h[3],ed[4]=h[4],ed[5]=h[5],ed[6]=h[6],ed[7]=h[7],ed[8]=h[8],ed[9]=h[9],ed[10]=h[10],ed[11]=h[11],ed[12]=h[12],ed[13]=h[13],ed[14]=h[14],ed[15]=h[15],ed));h=a.dim0B;l.uniformMatrix4fv(N.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(zc[0]=h[0],zc[1]=h[1],zc[2]=h[2],zc[3]=h[3],zc[4]=h[4],zc[5]=h[5],zc[6]=h[6],zc[7]=h[7],zc[8]=h[8],zc[9]=h[9],
zc[10]=h[10],zc[11]=h[11],zc[12]=h[12],zc[13]=h[13],zc[14]=h[14],zc[15]=h[15],zc));h=a.dim1B;l.uniformMatrix4fv(Jb.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(sd[0]=h[0],sd[1]=h[1],sd[2]=h[2],sd[3]=h[3],sd[4]=h[4],sd[5]=h[5],sd[6]=h[6],sd[7]=h[7],sd[8]=h[8],sd[9]=h[9],sd[10]=h[10],sd[11]=h[11],sd[12]=h[12],sd[13]=h[13],sd[14]=h[14],sd[15]=h[15],sd));h=a.dim0C;l.uniformMatrix4fv(R.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(gd[0]=h[0],gd[1]=h[1],gd[2]=h[2],gd[3]=h[3],
gd[4]=h[4],gd[5]=h[5],gd[6]=h[6],gd[7]=h[7],gd[8]=h[8],gd[9]=h[9],gd[10]=h[10],gd[11]=h[11],gd[12]=h[12],gd[13]=h[13],gd[14]=h[14],gd[15]=h[15],gd));h=a.dim1C;l.uniformMatrix4fv(Za.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Lc[0]=h[0],Lc[1]=h[1],Lc[2]=h[2],Lc[3]=h[3],Lc[4]=h[4],Lc[5]=h[5],Lc[6]=h[6],Lc[7]=h[7],Lc[8]=h[8],Lc[9]=h[9],Lc[10]=h[10],Lc[11]=h[11],Lc[12]=h[12],Lc[13]=h[13],Lc[14]=h[14],Lc[15]=h[15],Lc));h=a.dim0D;l.uniformMatrix4fv(oa.location,!1,Array.isArray(h)||h instanceof
Float32Array?h:(tc[0]=h[0],tc[1]=h[1],tc[2]=h[2],tc[3]=h[3],tc[4]=h[4],tc[5]=h[5],tc[6]=h[6],tc[7]=h[7],tc[8]=h[8],tc[9]=h[9],tc[10]=h[10],tc[11]=h[11],tc[12]=h[12],tc[13]=h[13],tc[14]=h[14],tc[15]=h[15],tc));h=a.dim1D;l.uniformMatrix4fv(T.location,!1,Array.isArray(h)||h instanceof Float32Array?h:($a[0]=h[0],$a[1]=h[1],$a[2]=h[2],$a[3]=h[3],$a[4]=h[4],$a[5]=h[5],$a[6]=h[6],$a[7]=h[7],$a[8]=h[8],$a[9]=h[9],$a[10]=h[10],$a[11]=h[11],$a[12]=h[12],$a[13]=h[13],$a[14]=h[14],$a[15]=h[15],$a));h=a.loA;l.uniformMatrix4fv(dc.location,
!1,Array.isArray(h)||h instanceof Float32Array?h:(lc[0]=h[0],lc[1]=h[1],lc[2]=h[2],lc[3]=h[3],lc[4]=h[4],lc[5]=h[5],lc[6]=h[6],lc[7]=h[7],lc[8]=h[8],lc[9]=h[9],lc[10]=h[10],lc[11]=h[11],lc[12]=h[12],lc[13]=h[13],lc[14]=h[14],lc[15]=h[15],lc));h=a.hiA;l.uniformMatrix4fv(ja.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Fb[0]=h[0],Fb[1]=h[1],Fb[2]=h[2],Fb[3]=h[3],Fb[4]=h[4],Fb[5]=h[5],Fb[6]=h[6],Fb[7]=h[7],Fb[8]=h[8],Fb[9]=h[9],Fb[10]=h[10],Fb[11]=h[11],Fb[12]=h[12],Fb[13]=h[13],Fb[14]=
h[14],Fb[15]=h[15],Fb));h=a.loB;l.uniformMatrix4fv(Xa.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(rc[0]=h[0],rc[1]=h[1],rc[2]=h[2],rc[3]=h[3],rc[4]=h[4],rc[5]=h[5],rc[6]=h[6],rc[7]=h[7],rc[8]=h[8],rc[9]=h[9],rc[10]=h[10],rc[11]=h[11],rc[12]=h[12],rc[13]=h[13],rc[14]=h[14],rc[15]=h[15],rc));h=a.hiB;l.uniformMatrix4fv(ba.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ra[0]=h[0],Ra[1]=h[1],Ra[2]=h[2],Ra[3]=h[3],Ra[4]=h[4],Ra[5]=h[5],Ra[6]=h[6],Ra[7]=h[7],Ra[8]=h[8],Ra[9]=h[9],
Ra[10]=h[10],Ra[11]=h[11],Ra[12]=h[12],Ra[13]=h[13],Ra[14]=h[14],Ra[15]=h[15],Ra));h=a.loC;l.uniformMatrix4fv(W.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ic[0]=h[0],Ic[1]=h[1],Ic[2]=h[2],Ic[3]=h[3],Ic[4]=h[4],Ic[5]=h[5],Ic[6]=h[6],Ic[7]=h[7],Ic[8]=h[8],Ic[9]=h[9],Ic[10]=h[10],Ic[11]=h[11],Ic[12]=h[12],Ic[13]=h[13],Ic[14]=h[14],Ic[15]=h[15],Ic));h=a.hiC;l.uniformMatrix4fv(Ha.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(bc[0]=h[0],bc[1]=h[1],bc[2]=h[2],bc[3]=h[3],bc[4]=
h[4],bc[5]=h[5],bc[6]=h[6],bc[7]=h[7],bc[8]=h[8],bc[9]=h[9],bc[10]=h[10],bc[11]=h[11],bc[12]=h[12],bc[13]=h[13],bc[14]=h[14],bc[15]=h[15],bc));h=a.loD;l.uniformMatrix4fv(sb.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Yc[0]=h[0],Yc[1]=h[1],Yc[2]=h[2],Yc[3]=h[3],Yc[4]=h[4],Yc[5]=h[5],Yc[6]=h[6],Yc[7]=h[7],Yc[8]=h[8],Yc[9]=h[9],Yc[10]=h[10],Yc[11]=h[11],Yc[12]=h[12],Yc[13]=h[13],Yc[14]=h[14],Yc[15]=h[15],Yc));h=a.hiD;l.uniformMatrix4fv(Ja.location,!1,Array.isArray(h)||h instanceof Float32Array?
h:(Sd[0]=h[0],Sd[1]=h[1],Sd[2]=h[2],Sd[3]=h[3],Sd[4]=h[4],Sd[5]=h[5],Sd[6]=h[6],Sd[7]=h[7],Sd[8]=h[8],Sd[9]=h[9],Sd[10]=h[10],Sd[11]=h[11],Sd[12]=h[12],Sd[13]=h[13],Sd[14]=h[14],Sd[15]=h[15],Sd));h=a.resolution;l.uniform2f(V.location,h[0],h[1]);h=a.viewBoxPos;l.uniform2f(fa.location,h[0],h[1]);h=a.viewBoxSize;l.uniform2f(na.location,h[0],h[1]);l.uniform1f(ga.location,a.maskHeight);l.uniform1f(r.location,a.drwLayer);h=a.contextColor;l.uniform4f(Z.location,h[0],h[1],h[2],h[3]);(h=a.maskTexture)&&"framebuffer"===
h._reglType&&(h=h.color[0]);h=h._texture;l.uniform1i(va.location,h.bind());l.uniform1i(ua.location,O.bind());(g=D.elements)?l.bindBuffer(34963,g.buffer.buffer):Ib.currentVAO&&(g=xa.getElements(Ib.currentVAO.elements))&&l.bindBuffer(34963,g.buffer.buffer);n=a.offset;if(a=a.count)g?l.drawElements(1,a,g.type,n<<(g.type-5121>>1)):l.drawArrays(1,n,a),ca.dirty=!0,Ib.setVAO(null),u.viewportWidth=d,u.viewportHeight=p,ca.profile=e,h.unbind(),O.unbind()},scope:function(a,d,l){var k,r,v,L,F,E,aa,N,K,P,R,ka,
T,W,O,V,fa,ia,Z,ha,ba,xa,ga,ja,ua,pa,qc,$a,na,Ra,Da,ya,La,Nd,Fb,Ib,Ua,za,Vd,Ea,bc,Fc,Lc,oa,gd,ec,lc,Qa,ub,tc,Fa,Ab,Oa,Ca,ud,va,ed,Cb,bb,ta,zc,rc,Cd,td,Ud,Ic,Ac,Yc,Hb,Ga,tb,mb,yb,rd,sd,Ld,$c,Sb,qd,xc,vd,Qc,Ha,md,Ue,Lb,Gb,te,Kd,Gd,kf,De,Sd,Xb,Ve,Za,Aa,sc,$d,re,Ja,sb,kd,we,Ec,Jb,Xa,ad,jd,dc,Rb,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf,qf,mf,rf,Af,Bf,Me,Ae,nf,of,Cf,Ff,zf,Df,Ef,
vf,wf,uf,xf,yf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,qg,cf,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,df,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ld.height=a.viewportHeight;ld.width=a.viewportWidth;ld.x=a.viewportX;ld.y=a.viewportY;k=ld.x|0;r=ld.y|0;v="width"in ld?ld.width|0:u.framebufferWidth-k;L="height"in ld?ld.height|0:u.framebufferHeight-
r;F=u.viewportWidth;u.viewportWidth=v;E=u.viewportHeight;u.viewportHeight=L;aa=Yd[0];Yd[0]=k;N=Yd[1];Yd[1]=r;K=Yd[2];Yd[2]=v;P=Yd[3];Yd[3]=L;R=zb[0];zb[0]=0;ka=zb[1];zb[1]=0;T=zb[2];zb[2]=0;W=zb[3];zb[3]=0;O=kc.blend_enable;kc.blend_enable=!1;V=se[0];se[0]=32774;fa=se[1];se[1]=32774;ia=ke[0];ke[0]=770;Z=ke[1];ke[1]=771;ha=ke[2];ke[2]=1;ba=ke[3];ke[3]=1;xa=kc.cull_enable;kc.cull_enable=!0;ga=kc.cull_face;kc.cull_face=1029;ja=kc.depth_enable;kc.depth_enable=!0;ua=kc.depth_func;kc.depth_func=513;pa=
kc.depth_mask;kc.depth_mask=!0;qc=fe[0];fe[0]=0;$a=fe[1];fe[1]=1;na=kc.dither;kc.dither=!1;Ra=kc.lineWidth;kc.lineWidth=2;xd.height=a.scissorHeight;xd.width=a.scissorWidth;xd.x=a.scissorX;xd.y=a.scissorY;Da=xd.x|0;ya=xd.y|0;La="width"in xd?xd.width|0:u.framebufferWidth-Da;Nd="height"in xd?xd.height|0:u.framebufferHeight-ya;Fb=Se[0];Se[0]=Da;Ib=Se[1];Se[1]=ya;Ua=Se[2];Se[2]=La;za=Se[3];Se[3]=Nd;Vd=kc.scissor_enable;kc.scissor_enable=!0;Ea=ca.profile;ca.profile=!1;bc=a.offset;Fc=D.offset;D.offset=bc;
Lc=a.count;oa=D.count;D.count=Lc;gd=D.primitive;D.primitive=1;ec=a.contextColor;lc=G[24];G[24]=ec;Qa=a.dim0A;ub=G[3];G[3]=Qa;tc=a.dim0B;Fa=G[5];G[5]=tc;Ab=a.dim0C;Oa=G[7];G[7]=Ab;Ca=a.dim0D;ud=G[9];G[9]=Ca;va=a.dim1A;ed=G[4];G[4]=va;Cb=a.dim1B;bb=G[6];G[6]=Cb;ta=a.dim1C;zc=G[8];G[8]=ta;rc=a.dim1D;Cd=G[10];G[10]=rc;td=a.drwLayer;Ud=G[23];G[23]=td;Ic=a.hiA;Ac=G[12];G[12]=Ic;Yc=a.hiB;Hb=G[14];G[14]=Yc;Ga=a.hiC;tb=G[16];G[16]=Ga;mb=a.hiD;yb=G[18];G[18]=mb;rd=a.loA;sd=G[11];G[11]=rd;Ld=a.loB;$c=G[13];
G[13]=Ld;Sb=a.loC;qd=G[15];G[15]=Sb;xc=a.loD;vd=G[17];G[17]=xc;Qc=a.maskHeight;Ha=G[22];G[22]=Qc;md=a.maskTexture;Ue=G[25];G[25]=md;Lb=G[26];G[26]=M;Gb=a.resolution;te=G[19];G[19]=Gb;Kd=a.viewBoxPos;Gd=G[20];G[20]=Kd;kf=a.viewBoxSize;De=G[21];G[21]=kf;Sd=p.buffer;p.buffer=z;Xb=p.divisor;p.divisor=0;Ve=p.normalized;p.normalized=!1;Za=p.offset;p.offset=0;Aa=p.size;p.size=0;sc=p.state;p.state=1;$d=p.stride;p.stride=0;re=p.type;p.type=z.dtype;Ja=p.w;p.w=0;sb=p.x;p.x=0;kd=p.y;p.y=0;we=p.z;p.z=0;Ec=g.buffer;
g.buffer=w;Jb=g.divisor;g.divisor=0;Xa=g.normalized;g.normalized=!1;ad=g.offset;g.offset=0;jd=g.size;g.size=0;dc=g.state;g.state=1;Rb=g.stride;g.stride=0;ve=g.type;g.type=w.dtype;me=g.w;g.w=0;xe=g.x;g.x=0;ee=g.y;g.y=0;de=g.z;g.z=0;ce=q.buffer;q.buffer=f;oe=q.divisor;q.divisor=0;ae=q.normalized;q.normalized=!1;ge=q.offset;q.offset=0;yc=q.size;q.size=0;Vc=q.state;q.state=1;pe=q.stride;q.stride=0;je=q.type;q.type=f.dtype;Fd=q.w;q.w=0;Md=q.x;q.x=0;Od=q.y;q.y=0;Pd=q.z;q.z=0;he=S.buffer;S.buffer=b;Ee=S.divisor;
S.divisor=0;ye=S.normalized;S.normalized=!1;ne=S.offset;S.offset=0;Ze=S.size;S.size=0;Ne=S.state;S.state=1;Ke=S.stride;S.stride=0;qe=S.type;S.type=b.dtype;Be=S.w;S.w=0;Fe=S.x;S.x=0;Ge=S.y;S.y=0;He=S.z;S.z=0;Ce=X.buffer;X.buffer=m;Id=X.divisor;X.divisor=0;Td=X.normalized;X.normalized=!1;Zd=X.offset;X.offset=0;be=X.size;X.size=0;Ie=X.state;X.state=1;yd=X.stride;X.stride=0;Qd=X.type;X.type=m.dtype;ze=X.w;X.w=0;Je=X.x;X.x=0;ef=X.y;X.y=0;Ye=X.z;X.z=0;Oe=U.buffer;U.buffer=c;Le=U.divisor;U.divisor=0;Xe=
U.normalized;U.normalized=!1;Te=U.offset;U.offset=0;Pe=U.size;U.size=0;Qe=U.state;U.state=1;Rd=U.stride;U.stride=0;Xd=U.type;U.type=c.dtype;Re=U.w;U.w=0;ff=U.x;U.x=0;lf=U.y;U.y=0;bf=U.z;U.z=0;gf=n.buffer;n.buffer=x;hf=n.divisor;n.divisor=0;jf=n.normalized;n.normalized=!1;qf=n.offset;n.offset=0;mf=n.size;n.size=0;rf=n.state;n.state=1;Af=n.stride;n.stride=0;Bf=n.type;n.type=x.dtype;Me=n.w;n.w=0;Ae=n.x;n.x=0;nf=n.y;n.y=0;of=n.z;n.z=0;Cf=la.buffer;la.buffer=t;Ff=la.divisor;la.divisor=0;zf=la.normalized;
la.normalized=!1;Df=la.offset;la.offset=0;Ef=la.size;la.size=0;vf=la.state;la.state=1;wf=la.stride;la.stride=0;uf=la.type;la.type=t.dtype;xf=la.w;la.w=0;yf=la.x;la.x=0;If=la.y;la.y=0;Jf=la.z;la.z=0;Kf=Q.buffer;Q.buffer=ea;Lf=Q.divisor;Q.divisor=0;sf=Q.normalized;Q.normalized=!1;Qf=Q.offset;Q.offset=0;Hf=Q.size;Q.size=0;tf=Q.state;Q.state=1;cg=Q.stride;Q.stride=0;Rf=Q.type;Q.type=ea.dtype;Sf=Q.w;Q.w=0;qg=Q.x;Q.x=0;cf=Q.y;Q.y=0;$e=Q.z;Q.z=0;Mf=da.buffer;da.buffer=H;Nf=da.divisor;da.divisor=0;dg=da.normalized;
da.normalized=!1;eg=da.offset;da.offset=0;fg=da.size;da.size=0;gg=da.state;da.state=1;hg=da.stride;da.stride=0;Vf=da.type;da.type=H.dtype;Tf=da.w;da.w=0;Wf=da.x;da.x=0;Xf=da.y;da.y=0;Yf=da.z;da.z=0;ig=e.buffer;e.buffer=I;rg=e.divisor;e.divisor=0;sg=e.normalized;e.normalized=!1;tg=e.offset;e.offset=0;ug=e.size;e.size=0;vg=e.state;e.state=1;wg=e.stride;e.stride=0;xg=e.type;e.type=I.dtype;yg=e.w;e.w=0;zg=e.x;e.x=0;Ag=e.y;e.y=0;Bg=e.z;e.z=0;df=h.buffer;h.buffer=y;af=h.divisor;h.divisor=0;Of=h.normalized;
h.normalized=!1;Pf=h.offset;h.offset=0;jg=h.size;h.size=0;kg=h.state;h.state=1;lg=h.stride;h.stride=0;mg=h.type;h.type=y.dtype;ng=h.w;h.w=0;Zf=h.x;h.x=0;Uf=h.y;h.y=0;$f=h.z;h.z=0;ag=Y.buffer;Y.buffer=A;bg=Y.divisor;Y.divisor=0;og=Y.normalized;Y.normalized=!1;Cg=Y.offset;Y.offset=0;Dg=Y.size;Y.size=0;Eg=Y.state;Y.state=1;Fg=Y.stride;Y.stride=0;Gg=Y.type;Y.type=A.dtype;Hg=Y.w;Y.w=0;Ig=Y.x;Y.x=0;Jg=Y.y;Y.y=0;Kg=Y.z;Y.z=0;Lg=qa.buffer;qa.buffer=C;Mg=qa.divisor;qa.divisor=0;Ng=qa.normalized;qa.normalized=
!1;Og=qa.offset;qa.offset=0;Pg=qa.size;qa.size=0;Qg=qa.state;qa.state=1;Rg=qa.stride;qa.stride=0;Sg=qa.type;qa.type=C.dtype;Tg=qa.w;qa.w=0;Ug=qa.x;qa.x=0;Vg=qa.y;qa.y=0;Wg=qa.z;qa.z=0;Xg=fb.buffer;fb.buffer=B;Yg=fb.divisor;fb.divisor=0;Zg=fb.normalized;fb.normalized=!1;$g=fb.offset;fb.offset=0;ah=fb.size;fb.size=0;bh=fb.state;fb.state=1;ch=fb.stride;fb.stride=0;dh=fb.type;fb.type=B.dtype;eh=fb.w;fb.w=0;fh=fb.x;fb.x=0;gh=fb.y;fb.y=0;hh=fb.z;fb.z=0;ih=gb.buffer;gb.buffer=J;jh=gb.divisor;gb.divisor=
0;kh=gb.normalized;gb.normalized=!1;lh=gb.offset;gb.offset=0;mh=gb.size;gb.size=0;nh=gb.state;gb.state=1;oh=gb.stride;gb.stride=0;ph=gb.type;gb.type=J.dtype;qh=gb.w;gb.w=0;rh=gb.x;gb.x=0;sh=gb.y;gb.y=0;th=gb.z;gb.z=0;uh=ma.vert;ma.vert=2;vh=ma.frag;ma.frag=1;ca.dirty=!0;d(u,a,l);u.viewportWidth=F;u.viewportHeight=E;Yd[0]=aa;Yd[1]=N;Yd[2]=K;Yd[3]=P;zb[0]=R;zb[1]=ka;zb[2]=T;zb[3]=W;kc.blend_enable=O;se[0]=V;se[1]=fa;ke[0]=ia;ke[1]=Z;ke[2]=ha;ke[3]=ba;kc.cull_enable=xa;kc.cull_face=ga;kc.depth_enable=
ja;kc.depth_func=ua;kc.depth_mask=pa;fe[0]=qc;fe[1]=$a;kc.dither=na;kc.lineWidth=Ra;Se[0]=Fb;Se[1]=Ib;Se[2]=Ua;Se[3]=za;kc.scissor_enable=Vd;ca.profile=Ea;D.offset=Fc;D.count=oa;D.primitive=gd;G[24]=lc;G[3]=ub;G[5]=Fa;G[7]=Oa;G[9]=ud;G[4]=ed;G[6]=bb;G[8]=zc;G[10]=Cd;G[23]=Ud;G[12]=Ac;G[14]=Hb;G[16]=tb;G[18]=yb;G[11]=sd;G[13]=$c;G[15]=qd;G[17]=vd;G[22]=Ha;G[25]=Ue;G[26]=Lb;G[19]=te;G[20]=Gd;G[21]=De;p.buffer=Sd;p.divisor=Xb;p.normalized=Ve;p.offset=Za;p.size=Aa;p.state=sc;p.stride=$d;p.type=re;p.w=
Ja;p.x=sb;p.y=kd;p.z=we;g.buffer=Ec;g.divisor=Jb;g.normalized=Xa;g.offset=ad;g.size=jd;g.state=dc;g.stride=Rb;g.type=ve;g.w=me;g.x=xe;g.y=ee;g.z=de;q.buffer=ce;q.divisor=oe;q.normalized=ae;q.offset=ge;q.size=yc;q.state=Vc;q.stride=pe;q.type=je;q.w=Fd;q.x=Md;q.y=Od;q.z=Pd;S.buffer=he;S.divisor=Ee;S.normalized=ye;S.offset=ne;S.size=Ze;S.state=Ne;S.stride=Ke;S.type=qe;S.w=Be;S.x=Fe;S.y=Ge;S.z=He;X.buffer=Ce;X.divisor=Id;X.normalized=Td;X.offset=Zd;X.size=be;X.state=Ie;X.stride=yd;X.type=Qd;X.w=ze;X.x=
Je;X.y=ef;X.z=Ye;U.buffer=Oe;U.divisor=Le;U.normalized=Xe;U.offset=Te;U.size=Pe;U.state=Qe;U.stride=Rd;U.type=Xd;U.w=Re;U.x=ff;U.y=lf;U.z=bf;n.buffer=gf;n.divisor=hf;n.normalized=jf;n.offset=qf;n.size=mf;n.state=rf;n.stride=Af;n.type=Bf;n.w=Me;n.x=Ae;n.y=nf;n.z=of;la.buffer=Cf;la.divisor=Ff;la.normalized=zf;la.offset=Df;la.size=Ef;la.state=vf;la.stride=wf;la.type=uf;la.w=xf;la.x=yf;la.y=If;la.z=Jf;Q.buffer=Kf;Q.divisor=Lf;Q.normalized=sf;Q.offset=Qf;Q.size=Hf;Q.state=tf;Q.stride=cg;Q.type=Rf;Q.w=
Sf;Q.x=qg;Q.y=cf;Q.z=$e;da.buffer=Mf;da.divisor=Nf;da.normalized=dg;da.offset=eg;da.size=fg;da.state=gg;da.stride=hg;da.type=Vf;da.w=Tf;da.x=Wf;da.y=Xf;da.z=Yf;e.buffer=ig;e.divisor=rg;e.normalized=sg;e.offset=tg;e.size=ug;e.state=vg;e.stride=wg;e.type=xg;e.w=yg;e.x=zg;e.y=Ag;e.z=Bg;h.buffer=df;h.divisor=af;h.normalized=Of;h.offset=Pf;h.size=jg;h.state=kg;h.stride=lg;h.type=mg;h.w=ng;h.x=Zf;h.y=Uf;h.z=$f;Y.buffer=ag;Y.divisor=bg;Y.normalized=og;Y.offset=Cg;Y.size=Dg;Y.state=Eg;Y.stride=Fg;Y.type=
Gg;Y.w=Hg;Y.x=Ig;Y.y=Jg;Y.z=Kg;qa.buffer=Lg;qa.divisor=Mg;qa.normalized=Ng;qa.offset=Og;qa.size=Pg;qa.state=Qg;qa.stride=Rg;qa.type=Sg;qa.w=Tg;qa.x=Ug;qa.y=Vg;qa.z=Wg;fb.buffer=Xg;fb.divisor=Yg;fb.normalized=Zg;fb.offset=$g;fb.size=ah;fb.state=bh;fb.stride=ch;fb.type=dh;fb.w=eh;fb.x=fh;fb.y=gh;fb.z=hh;gb.buffer=ih;gb.divisor=jh;gb.normalized=kh;gb.offset=lh;gb.size=mh;gb.state=nh;gb.stride=oh;gb.type=ph;gb.w=qh;gb.x=rh;gb.y=sh;gb.z=th;ma.vert=uh;ma.frag=vh;ca.dirty=!0}}},$1:function(a,d){var k,w,
f,b,m,c,x,t,ea,H,I,y,A,C,B,J,z,O,M,p,g,q,S,X,U,n,la,Q,da,e;k=a.attributes;w=a.current;f=a.framebuffer;b=a.gl;m=a.next;c=a.vao;x=m.blend_color;t=w.blend_color;ea=m.blend_equation;H=w.blend_equation;I=m.blend_func;y=w.blend_func;A=m.colorMask;C=w.colorMask;B=m.depth_range;J=w.depth_range;z=m.polygonOffset_offset;O=w.polygonOffset_offset;M=m.sample_coverage;p=w.sample_coverage;g=m.scissor_box;q=w.scissor_box;S=m.stencil_func;X=w.stencil_func;U=m.stencil_opBack;n=w.stencil_opBack;la=m.stencil_opFront;
Q=w.stencil_opFront;da=m.viewport;e=w.viewport;return{poll:function(){var a,c,d,k,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha,Ja;w.dirty=!1;c=m.blend_enable;d=m.cull_enable;k=m.depth_enable;gb=m.dither;Rb=m.polygonOffset_enable;ta=m.sample_alpha;Aa=m.sample_enable;Z=m.scissor_enable;K=m.stencil_enable;N=m.cull_face;R=w.cull_face;oa=m.depth_func;P=w.depth_func;Jb=m.depth_mask;Za=w.depth_mask;T=m.frontFace;r=w.frontFace;ja=m.lineWidth;ba=w.lineWidth;Ha=m.stencil_mask;Ja=w.stencil_mask;a=f.next;a!==
f.cur&&(a?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null),f.cur=a);c!==w.blend_enable&&(c?b.enable(3042):b.disable(3042),w.blend_enable=c);d!==w.cull_enable&&(d?b.enable(2884):b.disable(2884),w.cull_enable=d);k!==w.depth_enable&&(k?b.enable(2929):b.disable(2929),w.depth_enable=k);gb!==w.dither&&(gb?b.enable(3024):b.disable(3024),w.dither=gb);Rb!==w.polygonOffset_enable&&(Rb?b.enable(32823):b.disable(32823),w.polygonOffset_enable=Rb);ta!==w.sample_alpha&&(ta?b.enable(32926):b.disable(32926),
w.sample_alpha=ta);Aa!==w.sample_enable&&(Aa?b.enable(32928):b.disable(32928),w.sample_enable=Aa);Z!==w.scissor_enable&&(Z?b.enable(3089):b.disable(3089),w.scissor_enable=Z);K!==w.stencil_enable&&(K?b.enable(2960):b.disable(2960),w.stencil_enable=K);if(x[0]!==t[0]||x[1]!==t[1]||x[2]!==t[2]||x[3]!==t[3])b.blendColor(x[0],x[1],x[2],x[3]),t[0]=x[0],t[1]=x[1],t[2]=x[2],t[3]=x[3];if(ea[0]!==H[0]||ea[1]!==H[1])b.blendEquationSeparate(ea[0],ea[1]),H[0]=ea[0],H[1]=ea[1];if(I[0]!==y[0]||I[1]!==y[1]||I[2]!==
y[2]||I[3]!==y[3])b.blendFuncSeparate(I[0],I[1],I[2],I[3]),y[0]=I[0],y[1]=I[1],y[2]=I[2],y[3]=I[3];if(A[0]!==C[0]||A[1]!==C[1]||A[2]!==C[2]||A[3]!==C[3])b.colorMask(A[0],A[1],A[2],A[3]),C[0]=A[0],C[1]=A[1],C[2]=A[2],C[3]=A[3];N!==R&&(b.cullFace(N),w.cull_face=N);oa!==P&&(b.depthFunc(oa),w.depth_func=oa);Jb!==Za&&(b.depthMask(Jb),w.depth_mask=Jb);if(B[0]!==J[0]||B[1]!==J[1])b.depthRange(B[0],B[1]),J[0]=B[0],J[1]=B[1];T!==r&&(b.frontFace(T),w.frontFace=T);ja!==ba&&(b.lineWidth(ja),w.lineWidth=ja);if(z[0]!==
O[0]||z[1]!==O[1])b.polygonOffset(z[0],z[1]),O[0]=z[0],O[1]=z[1];if(M[0]!==p[0]||M[1]!==p[1])b.sampleCoverage(M[0],M[1]),p[0]=M[0],p[1]=M[1];if(g[0]!==q[0]||g[1]!==q[1]||g[2]!==q[2]||g[3]!==q[3])b.scissor(g[0],g[1],g[2],g[3]),q[0]=g[0],q[1]=g[1],q[2]=g[2],q[3]=g[3];if(S[0]!==X[0]||S[1]!==X[1]||S[2]!==X[2])b.stencilFunc(S[0],S[1],S[2]),X[0]=S[0],X[1]=S[1],X[2]=S[2];Ha!==Ja&&(b.stencilMask(Ha),w.stencil_mask=Ha);if(U[0]!==n[0]||U[1]!==n[1]||U[2]!==n[2]||U[3]!==n[3])b.stencilOpSeparate(U[0],U[1],U[2],
U[3]),n[0]=U[0],n[1]=U[1],n[2]=U[2],n[3]=U[3];if(la[0]!==Q[0]||la[1]!==Q[1]||la[2]!==Q[2]||la[3]!==Q[3])b.stencilOpSeparate(la[0],la[1],la[2],la[3]),Q[0]=la[0],Q[1]=la[1],Q[2]=la[2],Q[3]=la[3];if(da[0]!==e[0]||da[1]!==e[1]||da[2]!==e[2]||da[3]!==e[3])b.viewport(da[0],da[1],da[2],da[3]),e[0]=da[0],e[1]=da[1],e[2]=da[2],e[3]=da[3]},refresh:function(){var a,Y,qa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za;w.dirty=!1;Y=m.blend_enable;qa=m.cull_enable;fb=m.depth_enable;gb=m.dither;Rb=m.polygonOffset_enable;ta=m.sample_alpha;
Aa=m.sample_enable;Z=m.scissor_enable;K=m.stencil_enable;N=m.cull_face;R=m.depth_func;oa=m.depth_mask;P=m.frontFace;Jb=m.lineWidth;Za=m.stencil_mask;(a=f.next)?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null);f.cur=a;a=k[0];a.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(0,
a.divisor);a=k[1];a.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(1,a.divisor);a=k[2];a.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(2),b.vertexAttrib4f(2,a.x,a.y,a.z,
a.w),a.buffer=null);d.vertexAttribDivisorANGLE(2,a.divisor);a=k[3];a.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(3,a.divisor);a=k[4];a.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(4),
b.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(4,a.divisor);a=k[5];a.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(5,a.divisor);a=k[6];a.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,
a.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(6,a.divisor);a=k[7];a.buffer?(b.enableVertexAttribArray(7),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(7,a.divisor);a=k[8];a.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(8,
a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(8,a.divisor);a=k[9];a.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(9,a.divisor);a=k[10];a.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,
a.buffer.buffer),b.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(10,a.divisor);a=k[11];a.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(11,a.divisor);a=k[12];
a.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(12,a.divisor);a=k[13];a.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=
null);d.vertexAttribDivisorANGLE(13,a.divisor);a=k[14];a.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(14,a.divisor);a=k[15];a.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(15),
b.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(15,a.divisor);c.currentVAO=null;c.setVAO(c.targetVAO);Y?b.enable(3042):b.disable(3042);w.blend_enable=Y;qa?b.enable(2884):b.disable(2884);w.cull_enable=qa;fb?b.enable(2929):b.disable(2929);w.depth_enable=fb;gb?b.enable(3024):b.disable(3024);w.dither=gb;Rb?b.enable(32823):b.disable(32823);w.polygonOffset_enable=Rb;ta?b.enable(32926):b.disable(32926);w.sample_alpha=ta;Aa?b.enable(32928):b.disable(32928);w.sample_enable=Aa;
Z?b.enable(3089):b.disable(3089);w.scissor_enable=Z;K?b.enable(2960):b.disable(2960);w.stencil_enable=K;b.blendColor(x[0],x[1],x[2],x[3]);t[0]=x[0];t[1]=x[1];t[2]=x[2];t[3]=x[3];b.blendEquationSeparate(ea[0],ea[1]);H[0]=ea[0];H[1]=ea[1];b.blendFuncSeparate(I[0],I[1],I[2],I[3]);y[0]=I[0];y[1]=I[1];y[2]=I[2];y[3]=I[3];b.colorMask(A[0],A[1],A[2],A[3]);C[0]=A[0];C[1]=A[1];C[2]=A[2];C[3]=A[3];b.cullFace(N);w.cull_face=N;b.depthFunc(R);w.depth_func=R;b.depthMask(oa);w.depth_mask=oa;b.depthRange(B[0],B[1]);
J[0]=B[0];J[1]=B[1];b.frontFace(P);w.frontFace=P;b.lineWidth(Jb);w.lineWidth=Jb;b.polygonOffset(z[0],z[1]);O[0]=z[0];O[1]=z[1];b.sampleCoverage(M[0],M[1]);p[0]=M[0];p[1]=M[1];b.scissor(g[0],g[1],g[2],g[3]);q[0]=g[0];q[1]=g[1];q[2]=g[2];q[3]=g[3];b.stencilFunc(S[0],S[1],S[2]);X[0]=S[0];X[1]=S[1];X[2]=S[2];b.stencilMask(Za);w.stencil_mask=Za;b.stencilOpSeparate(U[0],U[1],U[2],U[3]);n[0]=U[0];n[1]=U[1];n[2]=U[2];n[3]=U[3];b.stencilOpSeparate(la[0],la[1],la[2],la[3]);Q[0]=la[0];Q[1]=la[1];Q[2]=la[2];
Q[3]=la[3];b.viewport(da[0],da[1],da[2],da[3]);e[0]=da[0];e[1]=da[1];e[2]=da[2];e[3]=da[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,d,k,m,f,b,t,c,x,M,ea,H,I,y,A,C,B,J,z,O,Zb,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za){var T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va,Xb,qc,sc,ud,xc,aa,L,ia,Da,tb,$c,ad,E,v,ha,ua,V,fa,na,F,u,ca,D,xa,ka,l,kc,ma,G,Ib,zb;T=a.attributes;r=a.buffer;
ja=a.context;ba=a.current;Ha=a.draw;Ja=a.elements;dc=a.extensions;Xa=a.framebuffer;W=a.gl;sb=a.isBufferArgs;ga=a.next;va=a.shader;Xb=a.uniforms;qc=a.vao;sc=ga.blend_color;ud=ba.blend_color;xc=ga.blend_equation;aa=ba.blend_equation;L=ga.blend_func;ia=ba.blend_func;Da=ga.colorMask;tb=ba.colorMask;$c=ga.depth_range;ad=ba.depth_range;E=ga.polygonOffset_offset;v=ba.polygonOffset_offset;ha=ga.sample_coverage;ua=ba.sample_coverage;V=ga.scissor_box;fa=ba.scissor_box;na=ga.stencil_func;F=ba.stencil_func;u=
ga.stencil_opBack;ca=ba.stencil_opBack;D=ga.stencil_opFront;xa=ba.stencil_opFront;ka=ga.viewport;l=ba.viewport;kc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ma={};ma.buffer=k;ma.divisor=1;G={};G.buffer=m;G.divisor=1;Ib={};Ib.buffer=f;Ib.divisor=1;zb={};zb.buffer=b;zb.divisor=1;return{batch:function(a,b){var c,f,g,k,p,q;c=Xa.next;c!==Xa.cur&&(c?W.bindFramebuffer(36160,c.framebuffer):W.bindFramebuffer(36160,null),Xa.cur=c);if(ba.dirty){var m,w,L,z,
x,A,B,t,C,S,ka,J,sa,O,V,U,X,ea,M,va,sd,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,xc;m=ga.dither;m!==ba.dither&&(m?W.enable(3024):W.disable(3024),ba.dither=m);w=ga.depth_func;w!==ba.depth_func&&(W.depthFunc(w),ba.depth_func=w);L=$c[0];z=$c[1];if(L!==ad[0]||z!==ad[1])W.depthRange(L,z),ad[0]=L,ad[1]=z;x=ga.depth_mask;x!==ba.depth_mask&&(W.depthMask(x),ba.depth_mask=x);A=Da[0];B=Da[1];t=Da[2];C=Da[3];if(A!==tb[0]||B!==tb[1]||t!==tb[2]||C!==tb[3])W.colorMask(A,B,t,C),tb[0]=A,tb[1]=B,tb[2]=t,tb[3]=C;S=ga.cull_enable;
S!==ba.cull_enable&&(S?W.enable(2884):W.disable(2884),ba.cull_enable=S);ka=ga.cull_face;ka!==ba.cull_face&&(W.cullFace(ka),ba.cull_face=ka);J=ga.frontFace;J!==ba.frontFace&&(W.frontFace(J),ba.frontFace=J);sa=ga.lineWidth;sa!==ba.lineWidth&&(W.lineWidth(sa),ba.lineWidth=sa);O=ga.polygonOffset_enable;O!==ba.polygonOffset_enable&&(O?W.enable(32823):W.disable(32823),ba.polygonOffset_enable=O);V=E[0];U=E[1];if(V!==v[0]||U!==v[1])W.polygonOffset(V,U),v[0]=V,v[1]=U;X=ga.sample_alpha;X!==ba.sample_alpha&&
(X?W.enable(32926):W.disable(32926),ba.sample_alpha=X);ea=ga.sample_enable;ea!==ba.sample_enable&&(ea?W.enable(32928):W.disable(32928),ba.sample_enable=ea);M=ha[0];va=ha[1];if(M!==ua[0]||va!==ua[1])W.sampleCoverage(M,va),ua[0]=M,ua[1]=va;sd=ga.stencil_enable;sd!==ba.stencil_enable&&(sd?W.enable(2960):W.disable(2960),ba.stencil_enable=sd);gd=ga.stencil_mask;gd!==ba.stencil_mask&&(W.stencilMask(gd),ba.stencil_mask=gd);Lc=na[0];tc=na[1];$a=na[2];if(Lc!==F[0]||tc!==F[1]||$a!==F[2])W.stencilFunc(Lc,tc,
$a),F[0]=Lc,F[1]=tc,F[2]=$a;lc=D[0];Fb=D[1];rc=D[2];Ra=D[3];if(lc!==xa[0]||Fb!==xa[1]||rc!==xa[2]||Ra!==xa[3])W.stencilOpSeparate(lc,Fb,rc,Ra),xa[0]=lc,xa[1]=Fb,xa[2]=rc,xa[3]=Ra;Ic=u[0];bc=u[1];Yc=u[2];xc=u[3];if(Ic!==ca[0]||bc!==ca[1]||Yc!==ca[2]||xc!==ca[3])W.stencilOpSeparate(Ic,bc,Yc,xc),ca[0]=Ic,ca[1]=bc,ca[2]=Yc,ca[3]=xc}W.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;W.enable(3042);ba.blend_enable=!0;W.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;W.blendFuncSeparate(770,
771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;W.disable(2929);ba.depth_enable=!1;W.enable(3089);ba.scissor_enable=!0;if(f=ba.profile)g=performance.now(),d.count+=b;W.useProgram(n.program);k=dc.angle_instanced_arrays;var md,Ac,ec,Fc,Ab,La,ub,Ua;qc.setVAO(null);md=gb.location;Ac=T[md];Ac.buffer||W.enableVertexAttribArray(md);if(5126!==Ac.type||2!==Ac.size||Ac.buffer!==H||!1!==Ac.normalized||0!==Ac.offset||24!==Ac.stride)W.bindBuffer(34962,H.buffer),W.vertexAttribPointer(md,2,5126,!1,24,0),Ac.type=
5126,Ac.size=2,Ac.buffer=H,Ac.normalized=!1,Ac.offset=0,Ac.stride=24;0!==Ac.divisor&&(k.vertexAttribDivisorANGLE(md,0),Ac.divisor=0);ec=ta.location;Fc=T[ec];Fc.buffer||W.enableVertexAttribArray(ec);if(5126!==Fc.type||2!==Fc.size||Fc.buffer!==I||!1!==Fc.normalized||8!==Fc.offset||24!==Fc.stride)W.bindBuffer(34962,I.buffer),W.vertexAttribPointer(ec,2,5126,!1,24,8),Fc.type=5126,Fc.size=2,Fc.buffer=I,Fc.normalized=!1,Fc.offset=8,Fc.stride=24;0!==Fc.divisor&&(k.vertexAttribDivisorANGLE(ec,0),Fc.divisor=
0);Ab=Y.location;La=T[Ab];La.buffer||W.enableVertexAttribArray(Ab);if(5126!==La.type||2!==La.size||La.buffer!==y||!1!==La.normalized||16!==La.offset||24!==La.stride)W.bindBuffer(34962,y.buffer),W.vertexAttribPointer(Ab,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=y,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(k.vertexAttribDivisorANGLE(Ab,0),La.divisor=0);(ub=Ha.elements)?W.bindBuffer(34963,ub.buffer.buffer):qc.currentVAO&&(ub=Ja.getElements(qc.currentVAO.elements))&&W.bindBuffer(34963,
ub.buffer.buffer);Ua=Ha.offset;for(p=0;p<b;++p){q=a[p];var pa,vd,Cb,Qa,Hb,bb,Qc,Sb,Xb,ac,Tb,sc,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,We,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd,jc,id,Xc,Zb,wd,ie,ue,le,Hd,Ed,fd,Ec;pa=q.viewport;vd=pa.x|0;Cb=pa.y|0;Qa="width"in pa?pa.width|0:ja.framebufferWidth-vd;Hb="height"in
pa?pa.height|0:ja.framebufferHeight-Cb;bb=ja.viewportWidth;ja.viewportWidth=Qa;Qc=ja.viewportHeight;ja.viewportHeight=Hb;W.viewport(vd,Cb,Qa,Hb);l[0]=vd;l[1]=Cb;l[2]=Qa;l[3]=Hb;Sb=q.viewport;Xb=Sb.x|0;ac=Sb.y|0;Tb="width"in Sb?Sb.width|0:ja.framebufferWidth-Xb;sc="height"in Sb?Sb.height|0:ja.framebufferHeight-ac;W.scissor(Xb,ac,Tb,sc);fa[0]=Xb;fa[1]=ac;fa[2]=Tb;fa[3]=sc;Ub=la.call(this,ja,q,p);Ib.offset=Ub;Ma=!1;nb=null;vb=0;hb=!1;pc=Na=0;Vb=1;Uc=0;cb=5126;jb=oc=Gc=mc=0;sb(Ib)?(Ma=!0,nb=r.createStream(34962,
Ib),cb=nb.dtype):(nb=r.getBuffer(Ib))?cb=nb.dtype:"constant"in Ib?(Vb=2,"number"===typeof Ib.constant?(Gc=Ib.constant,oc=jb=mc=0):(Gc=0<Ib.constant.length?Ib.constant[0]:0,oc=1<Ib.constant.length?Ib.constant[1]:0,jb=2<Ib.constant.length?Ib.constant[2]:0,mc=3<Ib.constant.length?Ib.constant[3]:0)):(nb=sb(Ib.buffer)?r.createStream(34962,Ib.buffer):r.getBuffer(Ib.buffer),cb="type"in Ib?kc[Ib.type]:nb.dtype,hb=!!Ib.normalized,pc=Ib.size|0,Na=Ib.offset|0,Uc=Ib.stride|0,vb=Ib.divisor|0);kb=K.location;ra=
T[kb];if(1===Vb){ra.buffer||W.enableVertexAttribArray(kb);ob=pc||2;if(ra.type!==cb||ra.size!==ob||ra.buffer!==nb||ra.normalized!==hb||ra.offset!==Na||ra.stride!==Uc)W.bindBuffer(34962,nb.buffer),W.vertexAttribPointer(kb,ob,cb,hb,Uc,Na),ra.type=cb,ra.size=ob,ra.buffer=nb,ra.normalized=hb,ra.offset=Na,ra.stride=Uc;ra.divisor!==vb&&(k.vertexAttribDivisorANGLE(kb,vb),ra.divisor=vb)}else if(ra.buffer&&(W.disableVertexAttribArray(kb),ra.buffer=null),ra.x!==Gc||ra.y!==oc||ra.z!==jb||ra.w!==mc)W.vertexAttrib4f(kb,
Gc,oc,jb,mc),ra.x=Gc,ra.y=oc,ra.z=jb,ra.w=mc;wa=Q.call(this,ja,q,p);zb.offset=wa;Sa=!1;ab=null;Ba=0;db=!1;Db=Ia=0;Bb=1;Pa=0;Jc=5126;ya=Wb=Ya=Kb=0;sb(zb)?(Sa=!0,ab=r.createStream(34962,zb),Jc=ab.dtype):(ab=r.getBuffer(zb))?Jc=ab.dtype:"constant"in zb?(Bb=2,"number"===typeof zb.constant?(Ya=zb.constant,Wb=ya=Kb=0):(Ya=0<zb.constant.length?zb.constant[0]:0,Wb=1<zb.constant.length?zb.constant[1]:0,ya=2<zb.constant.length?zb.constant[2]:0,Kb=3<zb.constant.length?zb.constant[3]:0)):(ab=sb(zb.buffer)?r.createStream(34962,
zb.buffer):r.getBuffer(zb.buffer),Jc="type"in zb?kc[zb.type]:ab.dtype,db=!!zb.normalized,Db=zb.size|0,Ia=zb.offset|0,Pa=zb.stride|0,Ba=zb.divisor|0);We=N.location;Ka=T[We];if(1===Bb){Ka.buffer||W.enableVertexAttribArray(We);Ob=Db||2;if(Ka.type!==Jc||Ka.size!==Ob||Ka.buffer!==ab||Ka.normalized!==db||Ka.offset!==Ia||Ka.stride!==Pa)W.bindBuffer(34962,ab.buffer),W.vertexAttribPointer(We,Ob,Jc,db,Pa,Ia),Ka.type=Jc,Ka.size=Ob,Ka.buffer=ab,Ka.normalized=db,Ka.offset=Ia,Ka.stride=Pa;Ka.divisor!==Ba&&(k.vertexAttribDivisorANGLE(We,
Ba),Ka.divisor=Ba)}else if(Ka.buffer&&(W.disableVertexAttribArray(We),Ka.buffer=null),Ka.x!==Ya||Ka.y!==Wb||Ka.z!==ya||Ka.w!==Kb)W.vertexAttrib4f(We,Ya,Wb,ya,Kb),Ka.x=Ya,Ka.y=Wb,Ka.z=ya,Ka.w=Kb;eb=da.call(this,ja,q,p);G.offset=eb;ib=!1;za=null;fc=0;Ea=!1;qb=pb=0;Va=1;Wa=0;nc=5126;Mb=Ta=vc=cd=0;sb(G)?(ib=!0,za=r.createStream(34962,G),nc=za.dtype):(za=r.getBuffer(G))?nc=za.dtype:"constant"in G?(Va=2,"number"===typeof G.constant?(vc=G.constant,Ta=Mb=cd=0):(vc=0<G.constant.length?G.constant[0]:0,Ta=1<
G.constant.length?G.constant[1]:0,Mb=2<G.constant.length?G.constant[2]:0,cd=3<G.constant.length?G.constant[3]:0)):(za=sb(G.buffer)?r.createStream(34962,G.buffer):r.getBuffer(G.buffer),nc="type"in G?kc[G.type]:za.dtype,Ea=!!G.normalized,qb=G.size|0,pb=G.offset|0,Wa=G.stride|0,fc=G.divisor|0);dd=Rb.location;Fa=T[dd];if(1===Va){Fa.buffer||W.enableVertexAttribArray(dd);Kc=qb||4;if(Fa.type!==nc||Fa.size!==Kc||Fa.buffer!==za||Fa.normalized!==Ea||Fa.offset!==pb||Fa.stride!==Wa)W.bindBuffer(34962,za.buffer),
W.vertexAttribPointer(dd,Kc,nc,Ea,Wa,pb),Fa.type=nc,Fa.size=Kc,Fa.buffer=za,Fa.normalized=Ea,Fa.offset=pb,Fa.stride=Wa;Fa.divisor!==fc&&(k.vertexAttribDivisorANGLE(dd,fc),Fa.divisor=fc)}else if(Fa.buffer&&(W.disableVertexAttribArray(dd),Fa.buffer=null),Fa.x!==vc||Fa.y!==Ta||Fa.z!==Mb||Fa.w!==cd)W.vertexAttrib4f(dd,vc,Ta,Mb,cd),Fa.x=vc,Fa.y=Ta,Fa.z=Mb,Fa.w=cd;Oa=e.call(this,ja,q,p);ma.offset=Oa;Ca=!1;lb=null;wb=0;Eb=!1;wc=rb=0;xb=1;Dd=0;uc=5126;od=nd=Mc=Wd=0;sb(ma)?(Ca=!0,lb=r.createStream(34962,ma),
uc=lb.dtype):(lb=r.getBuffer(ma))?uc=lb.dtype:"constant"in ma?(xb=2,"number"===typeof ma.constant?(Mc=ma.constant,nd=od=Wd=0):(Mc=0<ma.constant.length?ma.constant[0]:0,nd=1<ma.constant.length?ma.constant[1]:0,od=2<ma.constant.length?ma.constant[2]:0,Wd=3<ma.constant.length?ma.constant[3]:0)):(lb=sb(ma.buffer)?r.createStream(34962,ma.buffer):r.getBuffer(ma.buffer),uc="type"in ma?kc[ma.type]:lb.dtype,Eb=!!ma.normalized,wc=ma.size|0,rb=ma.offset|0,Dd=ma.stride|0,wb=ma.divisor|0);Yb=fb.location;cc=T[Yb];
if(1===xb){cc.buffer||W.enableVertexAttribArray(Yb);Pb=wc||4;if(cc.type!==uc||cc.size!==Pb||cc.buffer!==lb||cc.normalized!==Eb||cc.offset!==rb||cc.stride!==Dd)W.bindBuffer(34962,lb.buffer),W.vertexAttribPointer(Yb,Pb,uc,Eb,Dd,rb),cc.type=uc,cc.size=Pb,cc.buffer=lb,cc.normalized=Eb,cc.offset=rb,cc.stride=Dd;cc.divisor!==wb&&(k.vertexAttribDivisorANGLE(Yb,wb),cc.divisor=wb)}else if(cc.buffer&&(W.disableVertexAttribArray(Yb),cc.buffer=null),cc.x!==Mc||cc.y!==nd||cc.z!==od||cc.w!==Wd)W.vertexAttrib4f(Yb,
Mc,nd,od,Wd),cc.x=Mc,cc.y=nd,cc.z=od,cc.w=Wd;Ga=h.call(this,ja,q,p);$b=Ga[0];yb=Ga[1];Qb=Ga[2];ic=Ga[3];p&&mb===$b&&Nb===yb&&gc===Qb&&Rc===ic||(mb=$b,Nb=yb,gc=Qb,Rc=ic,W.uniform4f(Za.location,$b,yb,Qb,ic));Bc=q.lineWidth;p&&Cc===Bc||(Cc=Bc,W.uniform1f(Aa.location,Bc));Dc=q.capSize;p&&Nc===Dc||(Nc=Dc,W.uniform1f(qa.location,Dc));Zc=q.scale;Sc=Zc[0];Lb=Zc[1];p&&Oc===Sc&&Gb===Lb||(Oc=Sc,Gb=Lb,W.uniform2f(R.location,Sc,Lb));Pc=q.scaleFract;Hc=Pc[0];hc=Pc[1];p&&Tc===Hc&&Wc===hc||(Tc=Hc,Wc=hc,W.uniform2f(oa.location,
Hc,hc));Jd=q.translate;jc=Jd[0];Xc=Jd[1];p&&id===jc&&Zb===Xc||(id=jc,Zb=Xc,W.uniform2f(P.location,jc,Xc));wd=q.translateFract;ie=wd[0];le=wd[1];p&&ue===ie&&Hd===le||(ue=ie,Hd=le,W.uniform2f(Jb.location,ie,le));Ed=q.opacity;p&&fd===Ed||(fd=Ed,W.uniform1f(Z.location,Ed));Ec=q.count;0<Ec?ub?k.drawElementsInstancedANGLE(4,36,ub.type,Ua<<(ub.type-5121>>1),Ec):k.drawArraysInstancedANGLE(4,Ua,36,Ec):0>Ec&&(ub?W.drawElements(4,36,ub.type,Ua<<(ub.type-5121>>1)):W.drawArrays(4,Ua,36));ja.viewportWidth=bb;ja.viewportHeight=
Qc;Ma&&r.destroyStream(nb);Sa&&r.destroyStream(ab);ib&&r.destroyStream(za);Ca&&r.destroyStream(lb)}ba.dirty=!0;qc.setVAO(null);f&&(d.cpuTime+=performance.now()-g)},draw:function(a){var b,e,f,g,h,k,n,p,q,m,w,L,z,B,C,Q,S,ka,J,O,V,U,X,da,la,va,zc,xc,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,Xb,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,sc,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,We,Ka,Ob,eb,ib,za,fc;b=Xa.next;b!==Xa.cur&&(b?W.bindFramebuffer(36160,
b.framebuffer):W.bindFramebuffer(36160,null),Xa.cur=b);if(ba.dirty){var Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb;Ea=ga.dither;Ea!==ba.dither&&(Ea?W.enable(3024):W.disable(3024),ba.dither=Ea);pb=ga.depth_func;pb!==ba.depth_func&&(W.depthFunc(pb),ba.depth_func=pb);qb=$c[0];Va=$c[1];if(qb!==ad[0]||Va!==ad[1])W.depthRange(qb,Va),ad[0]=qb,ad[1]=Va;Wa=ga.depth_mask;Wa!==ba.depth_mask&&(W.depthMask(Wa),ba.depth_mask=Wa);nc=Da[0];cd=Da[1];vc=Da[2];
Ta=Da[3];if(nc!==tb[0]||cd!==tb[1]||vc!==tb[2]||Ta!==tb[3])W.colorMask(nc,cd,vc,Ta),tb[0]=nc,tb[1]=cd,tb[2]=vc,tb[3]=Ta;Mb=ga.cull_enable;Mb!==ba.cull_enable&&(Mb?W.enable(2884):W.disable(2884),ba.cull_enable=Mb);dd=ga.cull_face;dd!==ba.cull_face&&(W.cullFace(dd),ba.cull_face=dd);Fa=ga.frontFace;Fa!==ba.frontFace&&(W.frontFace(Fa),ba.frontFace=Fa);Kc=ga.lineWidth;Kc!==ba.lineWidth&&(W.lineWidth(Kc),ba.lineWidth=Kc);Oa=ga.polygonOffset_enable;Oa!==ba.polygonOffset_enable&&(Oa?W.enable(32823):W.disable(32823),
ba.polygonOffset_enable=Oa);Ca=E[0];lb=E[1];if(Ca!==v[0]||lb!==v[1])W.polygonOffset(Ca,lb),v[0]=Ca,v[1]=lb;wb=ga.sample_alpha;wb!==ba.sample_alpha&&(wb?W.enable(32926):W.disable(32926),ba.sample_alpha=wb);Eb=ga.sample_enable;Eb!==ba.sample_enable&&(Eb?W.enable(32928):W.disable(32928),ba.sample_enable=Eb);rb=ha[0];wc=ha[1];if(rb!==ua[0]||wc!==ua[1])W.sampleCoverage(rb,wc),ua[0]=rb,ua[1]=wc;xb=ga.stencil_enable;xb!==ba.stencil_enable&&(xb?W.enable(2960):W.disable(2960),ba.stencil_enable=xb);Dd=ga.stencil_mask;
Dd!==ba.stencil_mask&&(W.stencilMask(Dd),ba.stencil_mask=Dd);uc=na[0];Wd=na[1];Mc=na[2];if(uc!==F[0]||Wd!==F[1]||Mc!==F[2])W.stencilFunc(uc,Wd,Mc),F[0]=uc,F[1]=Wd,F[2]=Mc;nd=D[0];od=D[1];Yb=D[2];cc=D[3];if(nd!==xa[0]||od!==xa[1]||Yb!==xa[2]||cc!==xa[3])W.stencilOpSeparate(nd,od,Yb,cc),xa[0]=nd,xa[1]=od,xa[2]=Yb,xa[3]=cc;Pb=u[0];Ga=u[1];$b=u[2];mb=u[3];if(Pb!==ca[0]||Ga!==ca[1]||$b!==ca[2]||mb!==ca[3])W.stencilOpSeparate(Pb,Ga,$b,mb),ca[0]=Pb,ca[1]=Ga,ca[2]=$b,ca[3]=mb}e=a.viewport;f=e.x|0;g=e.y|0;
h="width"in e?e.width|0:ja.framebufferWidth-f;k="height"in e?e.height|0:ja.framebufferHeight-g;n=ja.viewportWidth;ja.viewportWidth=h;p=ja.viewportHeight;ja.viewportHeight=k;W.viewport(f,g,h,k);l[0]=f;l[1]=g;l[2]=h;l[3]=k;W.blendColor(0,0,0,0);ud[0]=0;ud[1]=0;ud[2]=0;ud[3]=0;W.enable(3042);ba.blend_enable=!0;W.blendEquationSeparate(32774,32774);aa[0]=32774;aa[1]=32774;W.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;W.disable(2929);ba.depth_enable=!1;q=a.viewport;m=q.x|0;w=
q.y|0;L="width"in q?q.width|0:ja.framebufferWidth-m;z="height"in q?q.height|0:ja.framebufferHeight-w;W.scissor(m,w,L,z);fa[0]=m;fa[1]=w;fa[2]=L;fa[3]=z;W.enable(3089);ba.scissor_enable=!0;if(B=ba.profile)C=performance.now(),d.count++;W.useProgram(t.program);Q=dc.angle_instanced_arrays;qc.setVAO(null);S=c.call(this,ja,a,0);Ib.offset=S;ka=!1;J=null;O=0;V=!1;X=U=0;da=1;la=0;va=5126;Lc=gd=xc=zc=0;sb(Ib)?(ka=!0,J=r.createStream(34962,Ib),va=J.dtype):(J=r.getBuffer(Ib))?va=J.dtype:"constant"in Ib?(da=2,
"number"===typeof Ib.constant?(xc=Ib.constant,gd=Lc=zc=0):(xc=0<Ib.constant.length?Ib.constant[0]:0,gd=1<Ib.constant.length?Ib.constant[1]:0,Lc=2<Ib.constant.length?Ib.constant[2]:0,zc=3<Ib.constant.length?Ib.constant[3]:0)):(J=sb(Ib.buffer)?r.createStream(34962,Ib.buffer):r.getBuffer(Ib.buffer),va="type"in Ib?kc[Ib.type]:J.dtype,V=!!Ib.normalized,X=Ib.size|0,U=Ib.offset|0,la=Ib.stride|0,O=Ib.divisor|0);tc=K.location;$a=T[tc];if(1===da){$a.buffer||W.enableVertexAttribArray(tc);lc=X||2;if($a.type!==
va||$a.size!==lc||$a.buffer!==J||$a.normalized!==V||$a.offset!==U||$a.stride!==la)W.bindBuffer(34962,J.buffer),W.vertexAttribPointer(tc,lc,va,V,la,U),$a.type=va,$a.size=lc,$a.buffer=J,$a.normalized=V,$a.offset=U,$a.stride=la;$a.divisor!==O&&(Q.vertexAttribDivisorANGLE(tc,O),$a.divisor=O)}else if($a.buffer&&(W.disableVertexAttribArray(tc),$a.buffer=null),$a.x!==xc||$a.y!==gd||$a.z!==Lc||$a.w!==zc)W.vertexAttrib4f(tc,xc,gd,Lc,zc),$a.x=xc,$a.y=gd,$a.z=Lc,$a.w=zc;Fb=x.call(this,ja,a,0);zb.offset=Fb;rc=
!1;Ra=null;Ic=0;bc=!1;Xb=Yc=0;md=1;Ac=0;ec=5126;ub=La=Ab=Fc=0;sb(zb)?(rc=!0,Ra=r.createStream(34962,zb),ec=Ra.dtype):(Ra=r.getBuffer(zb))?ec=Ra.dtype:"constant"in zb?(md=2,"number"===typeof zb.constant?(Ab=zb.constant,La=ub=Fc=0):(Ab=0<zb.constant.length?zb.constant[0]:0,La=1<zb.constant.length?zb.constant[1]:0,ub=2<zb.constant.length?zb.constant[2]:0,Fc=3<zb.constant.length?zb.constant[3]:0)):(Ra=sb(zb.buffer)?r.createStream(34962,zb.buffer):r.getBuffer(zb.buffer),ec="type"in zb?kc[zb.type]:Ra.dtype,
bc=!!zb.normalized,Xb=zb.size|0,Yc=zb.offset|0,Ac=zb.stride|0,Ic=zb.divisor|0);Ua=N.location;pa=T[Ua];if(1===md){pa.buffer||W.enableVertexAttribArray(Ua);vd=Xb||2;if(pa.type!==ec||pa.size!==vd||pa.buffer!==Ra||pa.normalized!==bc||pa.offset!==Yc||pa.stride!==Ac)W.bindBuffer(34962,Ra.buffer),W.vertexAttribPointer(Ua,vd,ec,bc,Ac,Yc),pa.type=ec,pa.size=vd,pa.buffer=Ra,pa.normalized=bc,pa.offset=Yc,pa.stride=Ac;pa.divisor!==Ic&&(Q.vertexAttribDivisorANGLE(Ua,Ic),pa.divisor=Ic)}else if(pa.buffer&&(W.disableVertexAttribArray(Ua),
pa.buffer=null),pa.x!==Ab||pa.y!==La||pa.z!==ub||pa.w!==Fc)W.vertexAttrib4f(Ua,Ab,La,ub,Fc),pa.x=Ab,pa.y=La,pa.z=ub,pa.w=Fc;Cb=M.call(this,ja,a,0);G.offset=Cb;Qa=!1;Hb=null;bb=0;Qc=!1;sc=Sb=0;ac=1;Tb=0;Ad=5126;vb=nb=Ma=Ub=0;sb(G)?(Qa=!0,Hb=r.createStream(34962,G),Ad=Hb.dtype):(Hb=r.getBuffer(G))?Ad=Hb.dtype:"constant"in G?(ac=2,"number"===typeof G.constant?(Ma=G.constant,nb=vb=Ub=0):(Ma=0<G.constant.length?G.constant[0]:0,nb=1<G.constant.length?G.constant[1]:0,vb=2<G.constant.length?G.constant[2]:
0,Ub=3<G.constant.length?G.constant[3]:0)):(Hb=sb(G.buffer)?r.createStream(34962,G.buffer):r.getBuffer(G.buffer),Ad="type"in G?kc[G.type]:Hb.dtype,Qc=!!G.normalized,sc=G.size|0,Sb=G.offset|0,Tb=G.stride|0,bb=G.divisor|0);hb=Rb.location;Na=T[hb];if(1===ac){Na.buffer||W.enableVertexAttribArray(hb);pc=sc||4;if(Na.type!==Ad||Na.size!==pc||Na.buffer!==Hb||Na.normalized!==Qc||Na.offset!==Sb||Na.stride!==Tb)W.bindBuffer(34962,Hb.buffer),W.vertexAttribPointer(hb,pc,Ad,Qc,Tb,Sb),Na.type=Ad,Na.size=pc,Na.buffer=
Hb,Na.normalized=Qc,Na.offset=Sb,Na.stride=Tb;Na.divisor!==bb&&(Q.vertexAttribDivisorANGLE(hb,bb),Na.divisor=bb)}else if(Na.buffer&&(W.disableVertexAttribArray(hb),Na.buffer=null),Na.x!==Ma||Na.y!==nb||Na.z!==vb||Na.w!==Ub)W.vertexAttrib4f(hb,Ma,nb,vb,Ub),Na.x=Ma,Na.y=nb,Na.z=vb,Na.w=Ub;Vb=ea.call(this,ja,a,0);ma.offset=Vb;Uc=!1;cb=null;mc=0;Gc=!1;jb=oc=0;kb=1;ra=0;ob=5126;Ba=ab=Sa=wa=0;sb(ma)?(Uc=!0,cb=r.createStream(34962,ma),ob=cb.dtype):(cb=r.getBuffer(ma))?ob=cb.dtype:"constant"in ma?(kb=2,"number"===
typeof ma.constant?(Sa=ma.constant,ab=Ba=wa=0):(Sa=0<ma.constant.length?ma.constant[0]:0,ab=1<ma.constant.length?ma.constant[1]:0,Ba=2<ma.constant.length?ma.constant[2]:0,wa=3<ma.constant.length?ma.constant[3]:0)):(cb=sb(ma.buffer)?r.createStream(34962,ma.buffer):r.getBuffer(ma.buffer),ob="type"in ma?kc[ma.type]:cb.dtype,Gc=!!ma.normalized,jb=ma.size|0,oc=ma.offset|0,ra=ma.stride|0,mc=ma.divisor|0);db=fb.location;Ia=T[db];if(1===kb){Ia.buffer||W.enableVertexAttribArray(db);Db=jb||4;if(Ia.type!==ob||
Ia.size!==Db||Ia.buffer!==cb||Ia.normalized!==Gc||Ia.offset!==oc||Ia.stride!==ra)W.bindBuffer(34962,cb.buffer),W.vertexAttribPointer(db,Db,ob,Gc,ra,oc),Ia.type=ob,Ia.size=Db,Ia.buffer=cb,Ia.normalized=Gc,Ia.offset=oc,Ia.stride=ra;Ia.divisor!==mc&&(Q.vertexAttribDivisorANGLE(db,mc),Ia.divisor=mc)}else if(Ia.buffer&&(W.disableVertexAttribArray(db),Ia.buffer=null),Ia.x!==Sa||Ia.y!==ab||Ia.z!==Ba||Ia.w!==wa)W.vertexAttrib4f(db,Sa,ab,Ba,wa),Ia.x=Sa,Ia.y=ab,Ia.z=Ba,Ia.w=wa;Bb=gb.location;Pa=T[Bb];Pa.buffer||
W.enableVertexAttribArray(Bb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==H||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)W.bindBuffer(34962,H.buffer),W.vertexAttribPointer(Bb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=H,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(Q.vertexAttribDivisorANGLE(Bb,0),Pa.divisor=0);Jc=ta.location;Kb=T[Jc];Kb.buffer||W.enableVertexAttribArray(Jc);if(5126!==Kb.type||2!==Kb.size||Kb.buffer!==I||!1!==Kb.normalized||8!==Kb.offset||24!==Kb.stride)W.bindBuffer(34962,
I.buffer),W.vertexAttribPointer(Jc,2,5126,!1,24,8),Kb.type=5126,Kb.size=2,Kb.buffer=I,Kb.normalized=!1,Kb.offset=8,Kb.stride=24;0!==Kb.divisor&&(Q.vertexAttribDivisorANGLE(Jc,0),Kb.divisor=0);Ya=Y.location;Wb=T[Ya];Wb.buffer||W.enableVertexAttribArray(Ya);if(5126!==Wb.type||2!==Wb.size||Wb.buffer!==y||!1!==Wb.normalized||16!==Wb.offset||24!==Wb.stride)W.bindBuffer(34962,y.buffer),W.vertexAttribPointer(Ya,2,5126,!1,24,16),Wb.type=5126,Wb.size=2,Wb.buffer=y,Wb.normalized=!1,Wb.offset=16,Wb.stride=24;
0!==Wb.divisor&&(Q.vertexAttribDivisorANGLE(Ya,0),Wb.divisor=0);ya=A.call(this,ja,a,0);W.uniform4f(Za.location,ya[0],ya[1],ya[2],ya[3]);W.uniform1f(Aa.location,a.lineWidth);W.uniform1f(qa.location,a.capSize);We=a.scale;W.uniform2f(R.location,We[0],We[1]);Ka=a.scaleFract;W.uniform2f(oa.location,Ka[0],Ka[1]);Ob=a.translate;W.uniform2f(P.location,Ob[0],Ob[1]);eb=a.translateFract;W.uniform2f(Jb.location,eb[0],eb[1]);W.uniform1f(Z.location,a.opacity);(ib=Ha.elements)?W.bindBuffer(34963,ib.buffer.buffer):
qc.currentVAO&&(ib=Ja.getElements(qc.currentVAO.elements))&&W.bindBuffer(34963,ib.buffer.buffer);za=Ha.offset;fc=a.count;0<fc?ib?Q.drawElementsInstancedANGLE(4,36,ib.type,za<<(ib.type-5121>>1),fc):Q.drawArraysInstancedANGLE(4,za,36,fc):0>fc&&(ib?W.drawElements(4,36,ib.type,za<<(ib.type-5121>>1)):W.drawArrays(4,za,36));ba.dirty=!0;qc.setVAO(null);ja.viewportWidth=n;ja.viewportHeight=p;B&&(d.cpuTime+=performance.now()-C);ka&&r.destroyStream(J);rc&&r.destroyStream(Ra);Qa&&r.destroyStream(Hb);Uc&&r.destroyStream(cb)},
scope:function(a,b,c){var e,f,h,l,k,n,m,w,u,v,D,x,F,E,ca,A,t,aa,N,Q,K,P,sa,R,T,W,fa,ia,Z,ha,ea,xa,Y,ua,qc,na,da,Da,M,la,oa,Fc,Ab,La,ub,Ua,pa,ud,Cb,Qa,ta,bb,qa,tb,$c,ac,Tb,Za,Ub,Ma,nb,vb,hb,Na,Aa,Vb,Ja,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,gb,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Jb,uc,Xa,Mc,ad,fb,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,jc,dc,id,Xc,Rb,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,
Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id;e=a.viewport;f=e.x|0;h=e.y|0;l="width"in e?e.width|0:ja.framebufferWidth-f;k="height"in e?e.height|0:ja.framebufferHeight-h;n=ja.viewportWidth;ja.viewportWidth=l;m=ja.viewportHeight;ja.viewportHeight=k;w=ka[0];ka[0]=f;u=ka[1];ka[1]=h;v=ka[2];ka[2]=l;D=ka[3];ka[3]=k;x=sc[0];sc[0]=0;F=sc[1];sc[1]=0;E=sc[2];sc[2]=0;ca=sc[3];sc[3]=0;A=ga.blend_enable;ga.blend_enable=!0;t=xc[0];xc[0]=32774;aa=xc[1];xc[1]=32774;
N=L[0];L[0]=770;Q=L[1];L[1]=771;K=L[2];L[2]=773;P=L[3];L[3]=1;sa=ga.depth_enable;ga.depth_enable=!1;R=a.viewport;T=R.x|0;W=R.y|0;fa="width"in R?R.width|0:ja.framebufferWidth-T;ia="height"in R?R.height|0:ja.framebufferHeight-W;Z=V[0];V[0]=T;ha=V[1];V[1]=W;ea=V[2];V[2]=fa;xa=V[3];V[3]=ia;Y=ga.scissor_enable;ga.scissor_enable=!0;if(ua=ba.profile)qc=performance.now(),d.count++;na=Ha.count;Ha.count=36;da=a.count;Da=Ha.instances;Ha.instances=da;M=Ha.primitive;Ha.primitive=4;la=a.capSize;oa=Xb[5];Xb[5]=
la;Fc=a.lineWidth;Ab=Xb[4];Xb[4]=Fc;La=a.opacity;ub=Xb[10];Xb[10]=La;Ua=a.range;pa=Xb[18];Xb[18]=Ua;ud=a.scale;Cb=Xb[6];Xb[6]=ud;Qa=a.scaleFract;ta=Xb[7];Xb[7]=Qa;bb=a.translate;qa=Xb[8];Xb[8]=bb;tb=a.translateFract;$c=Xb[9];Xb[9]=tb;ac=C.call(this,ja,a,c);Tb=Xb[3];Xb[3]=ac;Za=B.buffer;B.buffer=y;Ub=B.divisor;B.divisor=0;Ma=B.normalized;B.normalized=!1;nb=B.offset;B.offset=16;vb=B.size;B.size=0;hb=B.state;B.state=1;Na=B.stride;B.stride=24;Aa=B.type;B.type=5126;Vb=B.w;B.w=0;Ja=B.x;B.x=0;cb=B.y;B.y=
0;mc=B.z;B.z=0;Gc=J.call(this,ja,a,c);ma.offset=Gc;oc=!1;jb=null;kb=0;ra=!1;wa=ob=0;Sa=1;ab=0;Ba=5126;Bb=Db=Ia=db=0;sb(ma)?(oc=!0,jb=r.createStream(34962,ma),Ba=jb.dtype):(jb=r.getBuffer(ma))?Ba=jb.dtype:"constant"in ma?(Sa=2,"number"===typeof ma.constant?(Ia=ma.constant,Db=Bb=db=0):(Ia=0<ma.constant.length?ma.constant[0]:0,Db=1<ma.constant.length?ma.constant[1]:0,Bb=2<ma.constant.length?ma.constant[2]:0,db=3<ma.constant.length?ma.constant[3]:0)):(jb=sb(ma.buffer)?r.createStream(34962,ma.buffer):
r.getBuffer(ma.buffer),Ba="type"in ma?kc[ma.type]:jb.dtype,ra=!!ma.normalized,wa=ma.size|0,ob=ma.offset|0,ab=ma.stride|0,kb=ma.divisor|0);Pa=z.buffer;z.buffer=jb;Jc=z.divisor;z.divisor=kb;Kb=z.normalized;z.normalized=ra;Ya=z.offset;z.offset=ob;Wb=z.size;z.size=wa;ya=z.state;z.state=Sa;gb=z.stride;z.stride=ab;Ka=z.type;z.type=Ba;Ob=z.w;z.w=db;eb=z.x;z.x=Ia;ib=z.y;z.y=Db;za=z.z;z.z=Bb;fc=O.buffer;O.buffer=H;Ea=O.divisor;O.divisor=0;pb=O.normalized;O.normalized=!1;qb=O.offset;O.offset=0;Va=O.size;O.size=
0;Wa=O.state;O.state=1;nc=O.stride;O.stride=24;cd=O.type;O.type=5126;vc=O.w;O.w=0;Ta=O.x;O.x=0;Mb=O.y;O.y=0;dd=O.z;O.z=0;Fa=Zb.call(this,ja,a,c);G.offset=Fa;Kc=!1;Oa=null;Ca=0;lb=!1;Eb=wb=0;rb=1;wc=0;xb=5126;Mc=Xa=uc=Jb=0;sb(G)?(Kc=!0,Oa=r.createStream(34962,G),xb=Oa.dtype):(Oa=r.getBuffer(G))?xb=Oa.dtype:"constant"in G?(rb=2,"number"===typeof G.constant?(uc=G.constant,Xa=Mc=Jb=0):(uc=0<G.constant.length?G.constant[0]:0,Xa=1<G.constant.length?G.constant[1]:0,Mc=2<G.constant.length?G.constant[2]:0,
Jb=3<G.constant.length?G.constant[3]:0)):(Oa=sb(G.buffer)?r.createStream(34962,G.buffer):r.getBuffer(G.buffer),xb="type"in G?kc[G.type]:Oa.dtype,lb=!!G.normalized,Eb=G.size|0,wb=G.offset|0,wc=G.stride|0,Ca=G.divisor|0);ad=p.buffer;p.buffer=Oa;fb=p.divisor;p.divisor=Ca;Yb=p.normalized;p.normalized=lb;cc=p.offset;p.offset=wb;Pb=p.size;p.size=Eb;Ga=p.state;p.state=rb;$b=p.stride;p.stride=wc;mb=p.type;p.type=xb;yb=p.w;p.w=Jb;Nb=p.x;p.x=uc;Qb=p.y;p.y=Xa;gc=p.z;p.z=Mc;ic=g.buffer;g.buffer=I;Rc=g.divisor;
g.divisor=0;Bc=g.normalized;g.normalized=!1;Cc=g.offset;g.offset=8;Dc=g.size;g.size=0;Nc=g.state;g.state=1;Zc=g.stride;g.stride=24;Sc=g.type;g.type=5126;Oc=g.w;g.w=0;Lb=g.x;g.x=0;Gb=g.y;g.y=0;Pc=g.z;g.z=0;Hc=q.call(this,ja,a,c);Ib.offset=Hc;Tc=!1;hc=null;Wc=0;jc=!1;id=dc=0;Xc=1;Rb=0;wd=5126;Hd=le=ue=ie=0;sb(Ib)?(Tc=!0,hc=r.createStream(34962,Ib),wd=hc.dtype):(hc=r.getBuffer(Ib))?wd=hc.dtype:"constant"in Ib?(Xc=2,"number"===typeof Ib.constant?(ue=Ib.constant,le=Hd=ie=0):(ue=0<Ib.constant.length?Ib.constant[0]:
0,le=1<Ib.constant.length?Ib.constant[1]:0,Hd=2<Ib.constant.length?Ib.constant[2]:0,ie=3<Ib.constant.length?Ib.constant[3]:0)):(hc=sb(Ib.buffer)?r.createStream(34962,Ib.buffer):r.getBuffer(Ib.buffer),wd="type"in Ib?kc[Ib.type]:hc.dtype,jc=!!Ib.normalized,id=Ib.size|0,dc=Ib.offset|0,Rb=Ib.stride|0,Wc=Ib.divisor|0);Ed=S.buffer;S.buffer=hc;fd=S.divisor;S.divisor=Wc;Ec=S.normalized;S.normalized=jc;pd=S.offset;S.offset=dc;hd=S.size;S.size=id;bd=S.state;S.state=Xc;jd=S.stride;S.stride=Rb;zd=S.type;S.type=
wd;Bd=S.w;S.w=ie;ve=S.x;S.x=ue;me=S.y;S.y=le;xe=S.z;S.z=Hd;ee=X.call(this,ja,a,c);zb.offset=ee;de=!1;ce=null;oe=0;ae=!1;yc=ge=0;Vc=1;pe=0;je=5126;Pd=Od=Md=Fd=0;sb(zb)?(de=!0,ce=r.createStream(34962,zb),je=ce.dtype):(ce=r.getBuffer(zb))?je=ce.dtype:"constant"in zb?(Vc=2,"number"===typeof zb.constant?(Md=zb.constant,Od=Pd=Fd=0):(Md=0<zb.constant.length?zb.constant[0]:0,Od=1<zb.constant.length?zb.constant[1]:0,Pd=2<zb.constant.length?zb.constant[2]:0,Fd=3<zb.constant.length?zb.constant[3]:0)):(ce=sb(zb.buffer)?
r.createStream(34962,zb.buffer):r.getBuffer(zb.buffer),je="type"in zb?kc[zb.type]:ce.dtype,ae=!!zb.normalized,yc=zb.size|0,ge=zb.offset|0,pe=zb.stride|0,oe=zb.divisor|0);he=U.buffer;U.buffer=ce;Ee=U.divisor;U.divisor=oe;ye=U.normalized;U.normalized=ae;ne=U.offset;U.offset=ge;Ze=U.size;U.size=yc;Ne=U.state;U.state=Vc;Ke=U.stride;U.stride=pe;qe=U.type;U.type=je;Be=U.w;U.w=Fd;Fe=U.x;U.x=Md;Ge=U.y;U.y=Od;He=U.z;U.z=Pd;Ce=va.vert;va.vert=2;Id=va.frag;va.frag=1;ba.dirty=!0;b(ja,a,c);ja.viewportWidth=n;
ja.viewportHeight=m;ka[0]=w;ka[1]=u;ka[2]=v;ka[3]=D;sc[0]=x;sc[1]=F;sc[2]=E;sc[3]=ca;ga.blend_enable=A;xc[0]=t;xc[1]=aa;L[0]=N;L[1]=Q;L[2]=K;L[3]=P;ga.depth_enable=sa;V[0]=Z;V[1]=ha;V[2]=ea;V[3]=xa;ga.scissor_enable=Y;ua&&(d.cpuTime+=performance.now()-qc);Ha.count=na;Ha.instances=Da;Ha.primitive=M;Xb[5]=oa;Xb[4]=Ab;Xb[10]=ub;Xb[18]=pa;Xb[6]=Cb;Xb[7]=ta;Xb[8]=qa;Xb[9]=$c;Xb[3]=Tb;B.buffer=Za;B.divisor=Ub;B.normalized=Ma;B.offset=nb;B.size=vb;B.state=hb;B.stride=Na;B.type=Aa;B.w=Vb;B.x=Ja;B.y=cb;B.z=
mc;oc&&r.destroyStream(jb);z.buffer=Pa;z.divisor=Jc;z.normalized=Kb;z.offset=Ya;z.size=Wb;z.state=ya;z.stride=gb;z.type=Ka;z.w=Ob;z.x=eb;z.y=ib;z.z=za;O.buffer=fc;O.divisor=Ea;O.normalized=pb;O.offset=qb;O.size=Va;O.state=Wa;O.stride=nc;O.type=cd;O.w=vc;O.x=Ta;O.y=Mb;O.z=dd;Kc&&r.destroyStream(Oa);p.buffer=ad;p.divisor=fb;p.normalized=Yb;p.offset=cc;p.size=Pb;p.state=Ga;p.stride=$b;p.type=mb;p.w=yb;p.x=Nb;p.y=Qb;p.z=gc;g.buffer=ic;g.divisor=Rc;g.normalized=Bc;g.offset=Cc;g.size=Dc;g.state=Nc;g.stride=
Zc;g.type=Sc;g.w=Oc;g.x=Lb;g.y=Gb;g.z=Pc;Tc&&r.destroyStream(hc);S.buffer=Ed;S.divisor=fd;S.normalized=Ec;S.offset=pd;S.size=hd;S.state=bd;S.stride=jd;S.type=zd;S.w=Bd;S.x=ve;S.y=me;S.z=xe;de&&r.destroyStream(ce);U.buffer=he;U.divisor=Ee;U.normalized=ye;U.offset=ne;U.size=Ze;U.state=Ne;U.stride=Ke;U.type=qe;U.w=Be;U.x=Fe;U.y=Ge;U.z=He;va.vert=Ce;va.frag=Id;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
d,k,m,f,b,t,c,x,M,ea,H,I,y,A,C,B,J,z,O,Zb,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb){var Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va,Xb,qc,sc,ud,xc,aa,L,ia,Da,tb,$c,ad,E,v,ha,ua,V,fa,na,F,u;Rb=a.attributes;ta=a.buffer;Aa=a.context;Z=a.current;K=a.draw;N=a.elements;R=a.extensions;oa=a.framebuffer;P=a.gl;Jb=a.isBufferArgs;Za=a.next;T=a.shader;r=a.uniforms;ja=a.vao;ba=Za.blend_color;Ha=Z.blend_color;Ja=Za.blend_equation;dc=Z.blend_equation;Xa=Za.blend_func;W=Z.blend_func;sb=Za.colorMask;
ga=Z.colorMask;va=Za.depth_range;Xb=Z.depth_range;qc=Za.polygonOffset_offset;sc=Z.polygonOffset_offset;ud=Za.sample_coverage;xc=Z.sample_coverage;aa=Za.scissor_box;L=Z.scissor_box;ia=Za.stencil_func;Da=Z.stencil_func;tb=Za.stencil_opBack;$c=Z.stencil_opBack;ad=Za.stencil_opFront;E=Z.stencil_opFront;v=Za.viewport;ha=Z.viewport;ua={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};na={divisor:1,
offset:16,stride:8};F={divisor:1,offset:16,stride:8};u={divisor:1,offset:0,stride:4};return{batch:function(a,c){var k,m,l,w,r,v;k=oa.next;k!==oa.cur&&(k?P.bindFramebuffer(36160,k.framebuffer):P.bindFramebuffer(36160,null),oa.cur=k);if(Z.dirty){var y,x,A,t,B,aa,C,I,H,T,sa,ea,ba,M,Nd,Se,Ja,Ve,Cd,De,Ud,Vd,Ld,Yd,rd,ld,xd,qd,ed,zc,sd,gd;y=Za.dither;y!==Z.dither&&(y?P.enable(3024):P.disable(3024),Z.dither=y);x=Za.depth_func;x!==Z.depth_func&&(P.depthFunc(x),Z.depth_func=x);A=va[0];t=va[1];if(A!==Xb[0]||
t!==Xb[1])P.depthRange(A,t),Xb[0]=A,Xb[1]=t;B=Za.depth_mask;B!==Z.depth_mask&&(P.depthMask(B),Z.depth_mask=B);aa=sb[0];C=sb[1];I=sb[2];H=sb[3];if(aa!==ga[0]||C!==ga[1]||I!==ga[2]||H!==ga[3])P.colorMask(aa,C,I,H),ga[0]=aa,ga[1]=C,ga[2]=I,ga[3]=H;T=Za.cull_enable;T!==Z.cull_enable&&(T?P.enable(2884):P.disable(2884),Z.cull_enable=T);sa=Za.cull_face;sa!==Z.cull_face&&(P.cullFace(sa),Z.cull_face=sa);ea=Za.frontFace;ea!==Z.frontFace&&(P.frontFace(ea),Z.frontFace=ea);ba=Za.lineWidth;ba!==Z.lineWidth&&(P.lineWidth(ba),
Z.lineWidth=ba);M=Za.polygonOffset_enable;M!==Z.polygonOffset_enable&&(M?P.enable(32823):P.disable(32823),Z.polygonOffset_enable=M);Nd=qc[0];Se=qc[1];if(Nd!==sc[0]||Se!==sc[1])P.polygonOffset(Nd,Se),sc[0]=Nd,sc[1]=Se;Ja=Za.sample_alpha;Ja!==Z.sample_alpha&&(Ja?P.enable(32926):P.disable(32926),Z.sample_alpha=Ja);Ve=Za.sample_enable;Ve!==Z.sample_enable&&(Ve?P.enable(32928):P.disable(32928),Z.sample_enable=Ve);Cd=ud[0];De=ud[1];if(Cd!==xc[0]||De!==xc[1])P.sampleCoverage(Cd,De),xc[0]=Cd,xc[1]=De;Ud=
Za.stencil_mask;Ud!==Z.stencil_mask&&(P.stencilMask(Ud),Z.stencil_mask=Ud);Vd=ia[0];Ld=ia[1];Yd=ia[2];if(Vd!==Da[0]||Ld!==Da[1]||Yd!==Da[2])P.stencilFunc(Vd,Ld,Yd),Da[0]=Vd,Da[1]=Ld,Da[2]=Yd;rd=ad[0];ld=ad[1];xd=ad[2];qd=ad[3];if(rd!==E[0]||ld!==E[1]||xd!==E[2]||qd!==E[3])P.stencilOpSeparate(rd,ld,xd,qd),E[0]=rd,E[1]=ld,E[2]=xd,E[3]=qd;ed=tb[0];zc=tb[1];sd=tb[2];gd=tb[3];if(ed!==$c[0]||zc!==$c[1]||sd!==$c[2]||gd!==$c[3])P.stencilOpSeparate(ed,zc,sd,gd),$c[0]=ed,$c[1]=zc,$c[2]=sd,$c[3]=gd}P.blendColor(0,
0,0,0);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=0;P.enable(3042);Z.blend_enable=!0;P.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;P.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;P.enable(3089);Z.scissor_enable=!0;P.disable(2960);Z.stencil_enable=!1;if(m=Z.profile)l=performance.now(),d.count+=c;P.useProgram(J.program);w=R.angle_instanced_arrays;var Lc,tc,$a,lc,Fb;ja.setVAO(null);Lc=la.location;tc=Rb[Lc];tc.buffer||P.enableVertexAttribArray(Lc);if(5126!==tc.type||1!==tc.size||
tc.buffer!==f||!1!==tc.normalized||0!==tc.offset||8!==tc.stride)P.bindBuffer(34962,f.buffer),P.vertexAttribPointer(Lc,1,5126,!1,8,0),tc.type=5126,tc.size=1,tc.buffer=f,tc.normalized=!1,tc.offset=0,tc.stride=8;0!==tc.divisor&&(w.vertexAttribDivisorANGLE(Lc,0),tc.divisor=0);$a=Q.location;lc=Rb[$a];lc.buffer||P.enableVertexAttribArray($a);if(5126!==lc.type||1!==lc.size||lc.buffer!==b||!1!==lc.normalized||4!==lc.offset||8!==lc.stride)P.bindBuffer(34962,b.buffer),P.vertexAttribPointer($a,1,5126,!1,8,4),
lc.type=5126,lc.size=1,lc.buffer=b,lc.normalized=!1,lc.offset=4,lc.stride=8;0!==lc.divisor&&(w.vertexAttribDivisorANGLE($a,0),lc.divisor=0);(Fb=K.elements)?P.bindBuffer(34963,Fb.buffer.buffer):ja.currentVAO&&(Fb=N.getElements(ja.currentVAO.elements))&&P.bindBuffer(34963,Fb.buffer.buffer);for(r=0;r<c;++r){v=a[r];var rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,Xa,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,jc,Ka,Ob,eb,ib,
za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd,pg,id,Xc,pf,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd;rc=v.viewport;Ra=rc.x|0;Ic=rc.y|0;bc="width"in rc?rc.width|0:Aa.framebufferWidth-Ra;Yc="height"in rc?rc.height|0:Aa.framebufferHeight-Ic;Sd=Aa.viewportWidth;Aa.viewportWidth=bc;md=Aa.viewportHeight;Aa.viewportHeight=Yc;P.viewport(Ra,Ic,bc,Yc);ha[0]=Ra;ha[1]=Ic;ha[2]=bc;ha[3]=Yc;(Ac=z.call(this,
Aa,v,r))?P.enable(2929):P.disable(2929);Z.depth_enable=Ac;ec=v.viewport;Fc=ec.x|0;Ab=ec.y|0;La="width"in ec?ec.width|0:Aa.framebufferWidth-Fc;ub="height"in ec?ec.height|0:Aa.framebufferHeight-Ab;P.scissor(Fc,Ab,La,ub);L[0]=Fc;L[1]=Ab;L[2]=La;L[3]=ub;V.buffer=v.positionBuffer;Ua=!1;pa=null;vd=0;Cb=!1;Hb=Qa=0;bb=1;Qc=0;Sb=5126;Ad=Tb=ac=Xa=0;Jb(V)?(Ua=!0,pa=ta.createStream(34962,V),Sb=pa.dtype):(pa=ta.getBuffer(V))?Sb=pa.dtype:"constant"in V?(bb=2,"number"===typeof V.constant?(ac=V.constant,Tb=Ad=Xa=
0):(ac=0<V.constant.length?V.constant[0]:0,Tb=1<V.constant.length?V.constant[1]:0,Ad=2<V.constant.length?V.constant[2]:0,Xa=3<V.constant.length?V.constant[3]:0)):(pa=Jb(V.buffer)?ta.createStream(34962,V.buffer):ta.getBuffer(V.buffer),Sb="type"in V?ua[V.type]:pa.dtype,Cb=!!V.normalized,Hb=V.size|0,Qa=V.offset|0,Qc=V.stride|0,vd=V.divisor|0);Ub=Zb.location;Ma=Rb[Ub];if(1===bb){Ma.buffer||P.enableVertexAttribArray(Ub);nb=Hb||2;if(Ma.type!==Sb||Ma.size!==nb||Ma.buffer!==pa||Ma.normalized!==Cb||Ma.offset!==
Qa||Ma.stride!==Qc)P.bindBuffer(34962,pa.buffer),P.vertexAttribPointer(Ub,nb,Sb,Cb,Qc,Qa),Ma.type=Sb,Ma.size=nb,Ma.buffer=pa,Ma.normalized=Cb,Ma.offset=Qa,Ma.stride=Qc;Ma.divisor!==vd&&(w.vertexAttribDivisorANGLE(Ub,vd),Ma.divisor=vd)}else if(Ma.buffer&&(P.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==ac||Ma.y!==Tb||Ma.z!==Ad||Ma.w!==Xa)P.vertexAttrib4f(Ub,ac,Tb,Ad,Xa),Ma.x=ac,Ma.y=Tb,Ma.z=Ad,Ma.w=Xa;na.buffer=v.positionBuffer;vb=!1;hb=null;Na=0;pc=!1;Uc=Vb=0;cb=1;mc=0;Gc=5126;ra=kb=jb=oc=0;
Jb(na)?(vb=!0,hb=ta.createStream(34962,na),Gc=hb.dtype):(hb=ta.getBuffer(na))?Gc=hb.dtype:"constant"in na?(cb=2,"number"===typeof na.constant?(jb=na.constant,kb=ra=oc=0):(jb=0<na.constant.length?na.constant[0]:0,kb=1<na.constant.length?na.constant[1]:0,ra=2<na.constant.length?na.constant[2]:0,oc=3<na.constant.length?na.constant[3]:0)):(hb=Jb(na.buffer)?ta.createStream(34962,na.buffer):ta.getBuffer(na.buffer),Gc="type"in na?ua[na.type]:hb.dtype,pc=!!na.normalized,Uc=na.size|0,Vb=na.offset|0,mc=na.stride|
0,Na=na.divisor|0);ob=g.location;wa=Rb[ob];if(1===cb){wa.buffer||P.enableVertexAttribArray(ob);Sa=Uc||2;if(wa.type!==Gc||wa.size!==Sa||wa.buffer!==hb||wa.normalized!==pc||wa.offset!==Vb||wa.stride!==mc)P.bindBuffer(34962,hb.buffer),P.vertexAttribPointer(ob,Sa,Gc,pc,mc,Vb),wa.type=Gc,wa.size=Sa,wa.buffer=hb,wa.normalized=pc,wa.offset=Vb,wa.stride=mc;wa.divisor!==Na&&(w.vertexAttribDivisorANGLE(ob,Na),wa.divisor=Na)}else if(wa.buffer&&(P.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==
kb||wa.z!==ra||wa.w!==oc)P.vertexAttrib4f(ob,jb,kb,ra,oc),wa.x=jb,wa.y=kb,wa.z=ra,wa.w=oc;fa.buffer=v.positionFractBuffer;ab=!1;Ba=null;db=0;Ia=!1;Bb=Db=0;Pa=1;Jc=0;Kb=5126;jc=ya=Wb=Ya=0;Jb(fa)?(ab=!0,Ba=ta.createStream(34962,fa),Kb=Ba.dtype):(Ba=ta.getBuffer(fa))?Kb=Ba.dtype:"constant"in fa?(Pa=2,"number"===typeof fa.constant?(Wb=fa.constant,ya=jc=Ya=0):(Wb=0<fa.constant.length?fa.constant[0]:0,ya=1<fa.constant.length?fa.constant[1]:0,jc=2<fa.constant.length?fa.constant[2]:0,Ya=3<fa.constant.length?
fa.constant[3]:0)):(Ba=Jb(fa.buffer)?ta.createStream(34962,fa.buffer):ta.getBuffer(fa.buffer),Kb="type"in fa?ua[fa.type]:Ba.dtype,Ia=!!fa.normalized,Bb=fa.size|0,Db=fa.offset|0,Jc=fa.stride|0,db=fa.divisor|0);Ka=p.location;Ob=Rb[Ka];if(1===Pa){Ob.buffer||P.enableVertexAttribArray(Ka);eb=Bb||2;if(Ob.type!==Kb||Ob.size!==eb||Ob.buffer!==Ba||Ob.normalized!==Ia||Ob.offset!==Db||Ob.stride!==Jc)P.bindBuffer(34962,Ba.buffer),P.vertexAttribPointer(Ka,eb,Kb,Ia,Jc,Db),Ob.type=Kb,Ob.size=eb,Ob.buffer=Ba,Ob.normalized=
Ia,Ob.offset=Db,Ob.stride=Jc;Ob.divisor!==db&&(w.vertexAttribDivisorANGLE(Ka,db),Ob.divisor=db)}else if(Ob.buffer&&(P.disableVertexAttribArray(Ka),Ob.buffer=null),Ob.x!==Wb||Ob.y!==ya||Ob.z!==jc||Ob.w!==Ya)P.vertexAttrib4f(Ka,Wb,ya,jc,Ya),Ob.x=Wb,Ob.y=ya,Ob.z=jc,Ob.w=Ya;F.buffer=v.positionFractBuffer;ib=!1;za=null;fc=0;Ea=!1;qb=pb=0;Va=1;Wa=0;nc=5126;Mb=Ta=vc=cd=0;Jb(F)?(ib=!0,za=ta.createStream(34962,F),nc=za.dtype):(za=ta.getBuffer(F))?nc=za.dtype:"constant"in F?(Va=2,"number"===typeof F.constant?
(vc=F.constant,Ta=Mb=cd=0):(vc=0<F.constant.length?F.constant[0]:0,Ta=1<F.constant.length?F.constant[1]:0,Mb=2<F.constant.length?F.constant[2]:0,cd=3<F.constant.length?F.constant[3]:0)):(za=Jb(F.buffer)?ta.createStream(34962,F.buffer):ta.getBuffer(F.buffer),nc="type"in F?ua[F.type]:za.dtype,Ea=!!F.normalized,qb=F.size|0,pb=F.offset|0,Wa=F.stride|0,fc=F.divisor|0);dd=q.location;Fa=Rb[dd];if(1===Va){Fa.buffer||P.enableVertexAttribArray(dd);Kc=qb||2;if(Fa.type!==nc||Fa.size!==Kc||Fa.buffer!==za||Fa.normalized!==
Ea||Fa.offset!==pb||Fa.stride!==Wa)P.bindBuffer(34962,za.buffer),P.vertexAttribPointer(dd,Kc,nc,Ea,Wa,pb),Fa.type=nc,Fa.size=Kc,Fa.buffer=za,Fa.normalized=Ea,Fa.offset=pb,Fa.stride=Wa;Fa.divisor!==fc&&(w.vertexAttribDivisorANGLE(dd,fc),Fa.divisor=fc)}else if(Fa.buffer&&(P.disableVertexAttribArray(dd),Fa.buffer=null),Fa.x!==vc||Fa.y!==Ta||Fa.z!==Mb||Fa.w!==cd)P.vertexAttrib4f(dd,vc,Ta,Mb,cd),Fa.x=vc,Fa.y=Ta,Fa.z=Mb,Fa.w=cd;u.buffer=v.colorBuffer;Oa=!1;Ca=null;lb=0;wb=!1;rb=Eb=0;wc=1;xb=0;Dd=5126;nd=
Mc=Wd=uc=0;Jb(u)?(Oa=!0,Ca=ta.createStream(34962,u),Dd=Ca.dtype):(Ca=ta.getBuffer(u))?Dd=Ca.dtype:"constant"in u?(wc=2,"number"===typeof u.constant?(Wd=u.constant,Mc=nd=uc=0):(Wd=0<u.constant.length?u.constant[0]:0,Mc=1<u.constant.length?u.constant[1]:0,nd=2<u.constant.length?u.constant[2]:0,uc=3<u.constant.length?u.constant[3]:0)):(Ca=Jb(u.buffer)?ta.createStream(34962,u.buffer):ta.getBuffer(u.buffer),Dd="type"in u?ua[u.type]:Ca.dtype,wb=!!u.normalized,rb=u.size|0,Eb=u.offset|0,xb=u.stride|0,lb=
u.divisor|0);od=S.location;Yb=Rb[od];if(1===wc){Yb.buffer||P.enableVertexAttribArray(od);cc=rb||4;if(Yb.type!==Dd||Yb.size!==cc||Yb.buffer!==Ca||Yb.normalized!==wb||Yb.offset!==Eb||Yb.stride!==xb)P.bindBuffer(34962,Ca.buffer),P.vertexAttribPointer(od,cc,Dd,wb,xb,Eb),Yb.type=Dd,Yb.size=cc,Yb.buffer=Ca,Yb.normalized=wb,Yb.offset=Eb,Yb.stride=xb;Yb.divisor!==lb&&(w.vertexAttribDivisorANGLE(od,lb),Yb.divisor=lb)}else if(Yb.buffer&&(P.disableVertexAttribArray(od),Yb.buffer=null),Yb.x!==Wd||Yb.y!==Mc||
Yb.z!==nd||Yb.w!==uc)P.vertexAttrib4f(od,Wd,Mc,nd,uc),Yb.x=Wd,Yb.y=Mc,Yb.z=nd,Yb.w=uc;Pb=v.scale;Ga=Pb[0];mb=Pb[1];r&&$b===Ga&&yb===mb||($b=Ga,yb=mb,P.uniform2f(e.location,Ga,mb));Nb=v.scaleFract;Qb=Nb[0];ic=Nb[1];r&&gc===Qb&&Rc===ic||(gc=Qb,Rc=ic,P.uniform2f(h.location,Qb,ic));Bc=v.translate;Cc=Bc[0];Nc=Bc[1];r&&Dc===Cc&&Zc===Nc||(Dc=Cc,Zc=Nc,P.uniform2f(qa.location,Cc,Nc));Sc=v.translateFract;Oc=Sc[0];Gb=Sc[1];r&&Lb===Oc&&Pc===Gb||(Lb=Oc,Pc=Gb,P.uniform2f(fb.location,Oc,Gb));Hc=v.thickness;r&&Tc===
Hc||(Tc=Hc,P.uniform1f(Y.location,Hc));hc=v.depth;r&&Wc===hc||(Wc=hc,P.uniform1f(n.location,hc));Jd=O.call(this,Aa,v,r);pg=Jd[0];Xc=Jd[1];wd=Jd[2];ue=Jd[3];r&&id===pg&&pf===Xc&&ie===wd&&le===ue||(id=pg,pf=Xc,ie=wd,le=ue,P.uniform4f(gb.location,pg,Xc,wd,ue));Hd=v.dashLength;r&&Ed===Hd||(Ed=Hd,P.uniform1f(X.location,Hd));fd=v.opacity;r&&Ec===fd||(Ec=fd,P.uniform1f(da.location,fd));(pd=v.dashTexture)&&"framebuffer"===pd._reglType&&(pd=pd.color[0]);hd=pd._texture;P.uniform1i(U.location,hd.bind());bd=
v.count;0<bd?Fb?w.drawElementsInstancedANGLE(5,4,Fb.type,0<<(Fb.type-5121>>1),bd):w.drawArraysInstancedANGLE(5,0,4,bd):0>bd&&(Fb?P.drawElements(5,4,Fb.type,0<<(Fb.type-5121>>1)):P.drawArrays(5,0,4));Aa.viewportWidth=Sd;Aa.viewportHeight=md;Ua&&ta.destroyStream(pa);vb&&ta.destroyStream(hb);ab&&ta.destroyStream(Ba);ib&&ta.destroyStream(za);Oa&&ta.destroyStream(Ca);hd.unbind()}Z.dirty=!0;ja.setVAO(null);m&&(d.cpuTime+=performance.now()-l)},draw:function(a){var c,r,v,l,z,y,G,x,A,B,aa,C,I,H,J,T,O,ea,ba,
M,Ja,Nd,Se,Xa,Ve,Cd,De,Ud,Vd,Ld,Yd,rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,jc,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,We,Ka,Ob,eb,ib,za,fc,Ea,pb;c=oa.next;c!==oa.cur&&(c?P.bindFramebuffer(36160,c.framebuffer):P.bindFramebuffer(36160,null),oa.cur=c);if(Z.dirty){var qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb;qb=Za.dither;
qb!==Z.dither&&(qb?P.enable(3024):P.disable(3024),Z.dither=qb);Va=Za.depth_func;Va!==Z.depth_func&&(P.depthFunc(Va),Z.depth_func=Va);Wa=va[0];nc=va[1];if(Wa!==Xb[0]||nc!==Xb[1])P.depthRange(Wa,nc),Xb[0]=Wa,Xb[1]=nc;cd=Za.depth_mask;cd!==Z.depth_mask&&(P.depthMask(cd),Z.depth_mask=cd);vc=sb[0];Ta=sb[1];Mb=sb[2];dd=sb[3];if(vc!==ga[0]||Ta!==ga[1]||Mb!==ga[2]||dd!==ga[3])P.colorMask(vc,Ta,Mb,dd),ga[0]=vc,ga[1]=Ta,ga[2]=Mb,ga[3]=dd;Fa=Za.cull_enable;Fa!==Z.cull_enable&&(Fa?P.enable(2884):P.disable(2884),
Z.cull_enable=Fa);Kc=Za.cull_face;Kc!==Z.cull_face&&(P.cullFace(Kc),Z.cull_face=Kc);Oa=Za.frontFace;Oa!==Z.frontFace&&(P.frontFace(Oa),Z.frontFace=Oa);Ca=Za.lineWidth;Ca!==Z.lineWidth&&(P.lineWidth(Ca),Z.lineWidth=Ca);lb=Za.polygonOffset_enable;lb!==Z.polygonOffset_enable&&(lb?P.enable(32823):P.disable(32823),Z.polygonOffset_enable=lb);wb=qc[0];Eb=qc[1];if(wb!==sc[0]||Eb!==sc[1])P.polygonOffset(wb,Eb),sc[0]=wb,sc[1]=Eb;rb=Za.sample_alpha;rb!==Z.sample_alpha&&(rb?P.enable(32926):P.disable(32926),Z.sample_alpha=
rb);wc=Za.sample_enable;wc!==Z.sample_enable&&(wc?P.enable(32928):P.disable(32928),Z.sample_enable=wc);xb=ud[0];Dd=ud[1];if(xb!==xc[0]||Dd!==xc[1])P.sampleCoverage(xb,Dd),xc[0]=xb,xc[1]=Dd;uc=Za.stencil_mask;uc!==Z.stencil_mask&&(P.stencilMask(uc),Z.stencil_mask=uc);Wd=ia[0];Mc=ia[1];nd=ia[2];if(Wd!==Da[0]||Mc!==Da[1]||nd!==Da[2])P.stencilFunc(Wd,Mc,nd),Da[0]=Wd,Da[1]=Mc,Da[2]=nd;od=ad[0];Yb=ad[1];cc=ad[2];Pb=ad[3];if(od!==E[0]||Yb!==E[1]||cc!==E[2]||Pb!==E[3])P.stencilOpSeparate(od,Yb,cc,Pb),E[0]=
od,E[1]=Yb,E[2]=cc,E[3]=Pb;Ga=tb[0];$b=tb[1];mb=tb[2];yb=tb[3];if(Ga!==$c[0]||$b!==$c[1]||mb!==$c[2]||yb!==$c[3])P.stencilOpSeparate(Ga,$b,mb,yb),$c[0]=Ga,$c[1]=$b,$c[2]=mb,$c[3]=yb}r=a.viewport;v=r.x|0;l=r.y|0;z="width"in r?r.width|0:Aa.framebufferWidth-v;y="height"in r?r.height|0:Aa.framebufferHeight-l;G=Aa.viewportWidth;Aa.viewportWidth=z;x=Aa.viewportHeight;Aa.viewportHeight=y;P.viewport(v,l,z,y);ha[0]=v;ha[1]=l;ha[2]=z;ha[3]=y;P.blendColor(0,0,0,0);Ha[0]=0;Ha[1]=0;Ha[2]=0;Ha[3]=0;P.enable(3042);
Z.blend_enable=!0;P.blendEquationSeparate(32774,32774);dc[0]=32774;dc[1]=32774;P.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;(A=k.call(this,Aa,a,0))?P.enable(2929):P.disable(2929);Z.depth_enable=A;B=a.viewport;aa=B.x|0;C=B.y|0;I="width"in B?B.width|0:Aa.framebufferWidth-aa;H="height"in B?B.height|0:Aa.framebufferHeight-C;P.scissor(aa,C,I,H);L[0]=aa;L[1]=C;L[2]=I;L[3]=H;P.enable(3089);Z.scissor_enable=!0;P.disable(2960);Z.stencil_enable=!1;if(J=Z.profile)T=performance.now(),
d.count++;P.useProgram(m.program);O=R.angle_instanced_arrays;ja.setVAO(null);V.buffer=a.positionBuffer;ea=!1;ba=null;M=0;Ja=!1;Se=Nd=0;Xa=1;Ve=0;Cd=5126;Ld=Vd=Ud=De=0;Jb(V)?(ea=!0,ba=ta.createStream(34962,V),Cd=ba.dtype):(ba=ta.getBuffer(V))?Cd=ba.dtype:"constant"in V?(Xa=2,"number"===typeof V.constant?(Ud=V.constant,Vd=Ld=De=0):(Ud=0<V.constant.length?V.constant[0]:0,Vd=1<V.constant.length?V.constant[1]:0,Ld=2<V.constant.length?V.constant[2]:0,De=3<V.constant.length?V.constant[3]:0)):(ba=Jb(V.buffer)?
ta.createStream(34962,V.buffer):ta.getBuffer(V.buffer),Cd="type"in V?ua[V.type]:ba.dtype,Ja=!!V.normalized,Se=V.size|0,Nd=V.offset|0,Ve=V.stride|0,M=V.divisor|0);Yd=Zb.location;rd=Rb[Yd];if(1===Xa){rd.buffer||P.enableVertexAttribArray(Yd);ld=Se||2;if(rd.type!==Cd||rd.size!==ld||rd.buffer!==ba||rd.normalized!==Ja||rd.offset!==Nd||rd.stride!==Ve)P.bindBuffer(34962,ba.buffer),P.vertexAttribPointer(Yd,ld,Cd,Ja,Ve,Nd),rd.type=Cd,rd.size=ld,rd.buffer=ba,rd.normalized=Ja,rd.offset=Nd,rd.stride=Ve;rd.divisor!==
M&&(O.vertexAttribDivisorANGLE(Yd,M),rd.divisor=M)}else if(rd.buffer&&(P.disableVertexAttribArray(Yd),rd.buffer=null),rd.x!==Ud||rd.y!==Vd||rd.z!==Ld||rd.w!==De)P.vertexAttrib4f(Yd,Ud,Vd,Ld,De),rd.x=Ud,rd.y=Vd,rd.z=Ld,rd.w=De;na.buffer=a.positionBuffer;xd=!1;qd=null;ed=0;zc=!1;gd=sd=0;Lc=1;tc=0;$a=5126;Ra=rc=Fb=lc=0;Jb(na)?(xd=!0,qd=ta.createStream(34962,na),$a=qd.dtype):(qd=ta.getBuffer(na))?$a=qd.dtype:"constant"in na?(Lc=2,"number"===typeof na.constant?(Fb=na.constant,rc=Ra=lc=0):(Fb=0<na.constant.length?
na.constant[0]:0,rc=1<na.constant.length?na.constant[1]:0,Ra=2<na.constant.length?na.constant[2]:0,lc=3<na.constant.length?na.constant[3]:0)):(qd=Jb(na.buffer)?ta.createStream(34962,na.buffer):ta.getBuffer(na.buffer),$a="type"in na?ua[na.type]:qd.dtype,zc=!!na.normalized,gd=na.size|0,sd=na.offset|0,tc=na.stride|0,ed=na.divisor|0);Ic=g.location;bc=Rb[Ic];if(1===Lc){bc.buffer||P.enableVertexAttribArray(Ic);Yc=gd||2;if(bc.type!==$a||bc.size!==Yc||bc.buffer!==qd||bc.normalized!==zc||bc.offset!==sd||bc.stride!==
tc)P.bindBuffer(34962,qd.buffer),P.vertexAttribPointer(Ic,Yc,$a,zc,tc,sd),bc.type=$a,bc.size=Yc,bc.buffer=qd,bc.normalized=zc,bc.offset=sd,bc.stride=tc;bc.divisor!==ed&&(O.vertexAttribDivisorANGLE(Ic,ed),bc.divisor=ed)}else if(bc.buffer&&(P.disableVertexAttribArray(Ic),bc.buffer=null),bc.x!==Fb||bc.y!==rc||bc.z!==Ra||bc.w!==lc)P.vertexAttrib4f(Ic,Fb,rc,Ra,lc),bc.x=Fb,bc.y=rc,bc.z=Ra,bc.w=lc;fa.buffer=a.positionFractBuffer;Sd=!1;md=null;Ac=0;ec=!1;Ab=Fc=0;La=1;ub=0;Ua=5126;Qa=Cb=vd=pa=0;Jb(fa)?(Sd=
!0,md=ta.createStream(34962,fa),Ua=md.dtype):(md=ta.getBuffer(fa))?Ua=md.dtype:"constant"in fa?(La=2,"number"===typeof fa.constant?(vd=fa.constant,Cb=Qa=pa=0):(vd=0<fa.constant.length?fa.constant[0]:0,Cb=1<fa.constant.length?fa.constant[1]:0,Qa=2<fa.constant.length?fa.constant[2]:0,pa=3<fa.constant.length?fa.constant[3]:0)):(md=Jb(fa.buffer)?ta.createStream(34962,fa.buffer):ta.getBuffer(fa.buffer),Ua="type"in fa?ua[fa.type]:md.dtype,ec=!!fa.normalized,Ab=fa.size|0,Fc=fa.offset|0,ub=fa.stride|0,Ac=
fa.divisor|0);Hb=p.location;bb=Rb[Hb];if(1===La){bb.buffer||P.enableVertexAttribArray(Hb);Qc=Ab||2;if(bb.type!==Ua||bb.size!==Qc||bb.buffer!==md||bb.normalized!==ec||bb.offset!==Fc||bb.stride!==ub)P.bindBuffer(34962,md.buffer),P.vertexAttribPointer(Hb,Qc,Ua,ec,ub,Fc),bb.type=Ua,bb.size=Qc,bb.buffer=md,bb.normalized=ec,bb.offset=Fc,bb.stride=ub;bb.divisor!==Ac&&(O.vertexAttribDivisorANGLE(Hb,Ac),bb.divisor=Ac)}else if(bb.buffer&&(P.disableVertexAttribArray(Hb),bb.buffer=null),bb.x!==vd||bb.y!==Cb||
bb.z!==Qa||bb.w!==pa)P.vertexAttrib4f(Hb,vd,Cb,Qa,pa),bb.x=vd,bb.y=Cb,bb.z=Qa,bb.w=pa;F.buffer=a.positionFractBuffer;Sb=!1;jc=null;ac=0;Tb=!1;Ub=Ad=0;Ma=1;nb=0;vb=5126;Vb=pc=Na=hb=0;Jb(F)?(Sb=!0,jc=ta.createStream(34962,F),vb=jc.dtype):(jc=ta.getBuffer(F))?vb=jc.dtype:"constant"in F?(Ma=2,"number"===typeof F.constant?(Na=F.constant,pc=Vb=hb=0):(Na=0<F.constant.length?F.constant[0]:0,pc=1<F.constant.length?F.constant[1]:0,Vb=2<F.constant.length?F.constant[2]:0,hb=3<F.constant.length?F.constant[3]:
0)):(jc=Jb(F.buffer)?ta.createStream(34962,F.buffer):ta.getBuffer(F.buffer),vb="type"in F?ua[F.type]:jc.dtype,Tb=!!F.normalized,Ub=F.size|0,Ad=F.offset|0,nb=F.stride|0,ac=F.divisor|0);Uc=q.location;cb=Rb[Uc];if(1===Ma){cb.buffer||P.enableVertexAttribArray(Uc);mc=Ub||2;if(cb.type!==vb||cb.size!==mc||cb.buffer!==jc||cb.normalized!==Tb||cb.offset!==Ad||cb.stride!==nb)P.bindBuffer(34962,jc.buffer),P.vertexAttribPointer(Uc,mc,vb,Tb,nb,Ad),cb.type=vb,cb.size=mc,cb.buffer=jc,cb.normalized=Tb,cb.offset=Ad,
cb.stride=nb;cb.divisor!==ac&&(O.vertexAttribDivisorANGLE(Uc,ac),cb.divisor=ac)}else if(cb.buffer&&(P.disableVertexAttribArray(Uc),cb.buffer=null),cb.x!==Na||cb.y!==pc||cb.z!==Vb||cb.w!==hb)P.vertexAttrib4f(Uc,Na,pc,Vb,hb),cb.x=Na,cb.y=pc,cb.z=Vb,cb.w=hb;u.buffer=a.colorBuffer;Gc=!1;oc=null;jb=0;kb=!1;ob=ra=0;wa=1;Sa=0;ab=5126;Db=Ia=db=Ba=0;Jb(u)?(Gc=!0,oc=ta.createStream(34962,u),ab=oc.dtype):(oc=ta.getBuffer(u))?ab=oc.dtype:"constant"in u?(wa=2,"number"===typeof u.constant?(db=u.constant,Ia=Db=
Ba=0):(db=0<u.constant.length?u.constant[0]:0,Ia=1<u.constant.length?u.constant[1]:0,Db=2<u.constant.length?u.constant[2]:0,Ba=3<u.constant.length?u.constant[3]:0)):(oc=Jb(u.buffer)?ta.createStream(34962,u.buffer):ta.getBuffer(u.buffer),ab="type"in u?ua[u.type]:oc.dtype,kb=!!u.normalized,ob=u.size|0,ra=u.offset|0,Sa=u.stride|0,jb=u.divisor|0);Bb=S.location;Pa=Rb[Bb];if(1===wa){Pa.buffer||P.enableVertexAttribArray(Bb);Jc=ob||4;if(Pa.type!==ab||Pa.size!==Jc||Pa.buffer!==oc||Pa.normalized!==kb||Pa.offset!==
ra||Pa.stride!==Sa)P.bindBuffer(34962,oc.buffer),P.vertexAttribPointer(Bb,Jc,ab,kb,Sa,ra),Pa.type=ab,Pa.size=Jc,Pa.buffer=oc,Pa.normalized=kb,Pa.offset=ra,Pa.stride=Sa;Pa.divisor!==jb&&(O.vertexAttribDivisorANGLE(Bb,jb),Pa.divisor=jb)}else if(Pa.buffer&&(P.disableVertexAttribArray(Bb),Pa.buffer=null),Pa.x!==db||Pa.y!==Ia||Pa.z!==Db||Pa.w!==Ba)P.vertexAttrib4f(Bb,db,Ia,Db,Ba),Pa.x=db,Pa.y=Ia,Pa.z=Db,Pa.w=Ba;Kb=la.location;Ya=Rb[Kb];Ya.buffer||P.enableVertexAttribArray(Kb);if(5126!==Ya.type||1!==Ya.size||
Ya.buffer!==f||!1!==Ya.normalized||0!==Ya.offset||8!==Ya.stride)P.bindBuffer(34962,f.buffer),P.vertexAttribPointer(Kb,1,5126,!1,8,0),Ya.type=5126,Ya.size=1,Ya.buffer=f,Ya.normalized=!1,Ya.offset=0,Ya.stride=8;0!==Ya.divisor&&(O.vertexAttribDivisorANGLE(Kb,0),Ya.divisor=0);Wb=Q.location;ya=Rb[Wb];ya.buffer||P.enableVertexAttribArray(Wb);if(5126!==ya.type||1!==ya.size||ya.buffer!==b||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)P.bindBuffer(34962,b.buffer),P.vertexAttribPointer(Wb,1,5126,!1,8,4),
ya.type=5126,ya.size=1,ya.buffer=b,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&(O.vertexAttribDivisorANGLE(Wb,0),ya.divisor=0);We=a.scale;P.uniform2f(e.location,We[0],We[1]);Ka=a.scaleFract;P.uniform2f(h.location,Ka[0],Ka[1]);Ob=a.translate;P.uniform2f(qa.location,Ob[0],Ob[1]);eb=a.translateFract;P.uniform2f(fb.location,eb[0],eb[1]);P.uniform1f(Y.location,a.thickness);P.uniform1f(n.location,a.depth);ib=t.call(this,Aa,a,0);P.uniform4f(gb.location,ib[0],ib[1],ib[2],ib[3]);P.uniform1f(X.location,
a.dashLength);P.uniform1f(da.location,a.opacity);(za=a.dashTexture)&&"framebuffer"===za._reglType&&(za=za.color[0]);fc=za._texture;P.uniform1i(U.location,fc.bind());(Ea=K.elements)?P.bindBuffer(34963,Ea.buffer.buffer):ja.currentVAO&&(Ea=N.getElements(ja.currentVAO.elements))&&P.bindBuffer(34963,Ea.buffer.buffer);pb=a.count;0<pb?Ea?O.drawElementsInstancedANGLE(5,4,Ea.type,0<<(Ea.type-5121>>1),pb):O.drawArraysInstancedANGLE(5,0,4,pb):0>pb&&(Ea?P.drawElements(5,4,Ea.type,0<<(Ea.type-5121>>1)):P.drawArrays(5,
0,4));Z.dirty=!0;ja.setVAO(null);Aa.viewportWidth=G;Aa.viewportHeight=x;J&&(d.cpuTime+=performance.now()-T);ea&&ta.destroyStream(ba);xd&&ta.destroyStream(qd);Sd&&ta.destroyStream(md);Sb&&ta.destroyStream(jc);Gc&&ta.destroyStream(oc);fc.unbind()},scope:function(a,e,g){var h,k,n,p,q,m,w,L,z,E,t,N,Q,P,S,J,O,R,sa,W,U,ia,X,ha,Y,ga,ja,qc,da,Da,la,va,oa,ud,qa,xc,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,tb,$c,Xb,Ac,ec,Fc,Ab,La,ub,Ua,pa,Ha,Cb,Qa,Hb,bb,Qc,Sb,sc,ac,Tb,sb,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,
ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,gb,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,ad,uc,fb,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,dc,Rb,id,Xc,Zb,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le;h=a.viewport;k=h.x|0;n=h.y|0;p="width"in h?h.width|0:Aa.framebufferWidth-k;q="height"in h?
h.height|0:Aa.framebufferHeight-n;m=Aa.viewportWidth;Aa.viewportWidth=p;w=Aa.viewportHeight;Aa.viewportHeight=q;L=v[0];v[0]=k;z=v[1];v[1]=n;E=v[2];v[2]=p;t=v[3];v[3]=q;N=ba[0];ba[0]=0;Q=ba[1];ba[1]=0;P=ba[2];ba[2]=0;S=ba[3];ba[3]=0;J=Za.blend_enable;Za.blend_enable=!0;O=Ja[0];Ja[0]=32774;R=Ja[1];Ja[1]=32774;sa=Xa[0];Xa[0]=770;W=Xa[1];Xa[1]=771;U=Xa[2];Xa[2]=773;ia=Xa[3];Xa[3]=1;X=c.call(this,Aa,a,g);ha=Za.depth_enable;Za.depth_enable=X;Y=a.viewport;ga=Y.x|0;ja=Y.y|0;qc="width"in Y?Y.width|0:Aa.framebufferWidth-
ga;da="height"in Y?Y.height|0:Aa.framebufferHeight-ja;Da=aa[0];aa[0]=ga;la=aa[1];aa[1]=ja;va=aa[2];aa[2]=qc;oa=aa[3];aa[3]=da;ud=Za.scissor_enable;Za.scissor_enable=!0;qa=Za.stencil_enable;Za.stencil_enable=!1;if(xc=Z.profile)gd=performance.now(),d.count++;Lc=K.offset;K.offset=0;tc=K.count;K.count=4;$a=a.count;lc=K.instances;K.instances=$a;Fb=K.primitive;K.primitive=5;rc=a.dashLength;Ra=r[23];r[23]=rc;Ic=a.dashTexture;bc=r[24];r[24]=Ic;tb=a.depth;$c=r[22];r[22]=tb;Xb=a.id;Ac=r[31];r[31]=Xb;ec=a.miterLimit;
Fc=r[32];r[32]=ec;Ab=x.call(this,Aa,a,g);La=r[33];r[33]=Ab;ub=a.opacity;Ua=r[10];r[10]=ub;pa=Aa.pixelRatio;Ha=r[34];r[34]=pa;Cb=a.scale;Qa=r[6];r[6]=Cb;Hb=a.scaleFract;bb=r[7];r[7]=Hb;Qc=a.thickness;Sb=r[21];r[21]=Qc;sc=a.translate;ac=r[8];r[8]=sc;Tb=a.translateFract;sb=r[9];r[9]=Tb;Ub=M.call(this,Aa,a,g);Ma=r[3];r[3]=Ub;V.buffer=a.positionBuffer;nb=!1;vb=null;hb=0;Na=!1;Vb=pc=0;Uc=1;cb=0;mc=5126;kb=jb=oc=Gc=0;Jb(V)?(nb=!0,vb=ta.createStream(34962,V),mc=vb.dtype):(vb=ta.getBuffer(V))?mc=vb.dtype:
"constant"in V?(Uc=2,"number"===typeof V.constant?(oc=V.constant,jb=kb=Gc=0):(oc=0<V.constant.length?V.constant[0]:0,jb=1<V.constant.length?V.constant[1]:0,kb=2<V.constant.length?V.constant[2]:0,Gc=3<V.constant.length?V.constant[3]:0)):(vb=Jb(V.buffer)?ta.createStream(34962,V.buffer):ta.getBuffer(V.buffer),mc="type"in V?ua[V.type]:vb.dtype,Na=!!V.normalized,Vb=V.size|0,pc=V.offset|0,cb=V.stride|0,hb=V.divisor|0);ra=ea.buffer;ea.buffer=vb;ob=ea.divisor;ea.divisor=hb;wa=ea.normalized;ea.normalized=
Na;Sa=ea.offset;ea.offset=pc;ab=ea.size;ea.size=Vb;Ba=ea.state;ea.state=Uc;db=ea.stride;ea.stride=cb;Ia=ea.type;ea.type=mc;Db=ea.w;ea.w=Gc;Bb=ea.x;ea.x=oc;Pa=ea.y;ea.y=jb;Jc=ea.z;ea.z=kb;fa.buffer=a.positionFractBuffer;Kb=!1;Ya=null;Wb=0;ya=!1;Ka=gb=0;Ob=1;eb=0;ib=5126;pb=Ea=fc=za=0;Jb(fa)?(Kb=!0,Ya=ta.createStream(34962,fa),ib=Ya.dtype):(Ya=ta.getBuffer(fa))?ib=Ya.dtype:"constant"in fa?(Ob=2,"number"===typeof fa.constant?(fc=fa.constant,Ea=pb=za=0):(fc=0<fa.constant.length?fa.constant[0]:0,Ea=1<
fa.constant.length?fa.constant[1]:0,pb=2<fa.constant.length?fa.constant[2]:0,za=3<fa.constant.length?fa.constant[3]:0)):(Ya=Jb(fa.buffer)?ta.createStream(34962,fa.buffer):ta.getBuffer(fa.buffer),ib="type"in fa?ua[fa.type]:Ya.dtype,ya=!!fa.normalized,Ka=fa.size|0,gb=fa.offset|0,eb=fa.stride|0,Wb=fa.divisor|0);qb=H.buffer;H.buffer=Ya;Va=H.divisor;H.divisor=Wb;Wa=H.normalized;H.normalized=ya;nc=H.offset;H.offset=gb;cd=H.size;H.size=Ka;vc=H.state;H.state=Ob;Ta=H.stride;H.stride=eb;Mb=H.type;H.type=ib;
dd=H.w;H.w=za;Fa=H.x;H.x=fc;Kc=H.y;H.y=Ea;Oa=H.z;H.z=pb;na.buffer=a.positionBuffer;Ca=!1;lb=null;wb=0;Eb=!1;wc=rb=0;xb=1;ad=0;uc=5126;od=nd=Mc=fb=0;Jb(na)?(Ca=!0,lb=ta.createStream(34962,na),uc=lb.dtype):(lb=ta.getBuffer(na))?uc=lb.dtype:"constant"in na?(xb=2,"number"===typeof na.constant?(Mc=na.constant,nd=od=fb=0):(Mc=0<na.constant.length?na.constant[0]:0,nd=1<na.constant.length?na.constant[1]:0,od=2<na.constant.length?na.constant[2]:0,fb=3<na.constant.length?na.constant[3]:0)):(lb=Jb(na.buffer)?
ta.createStream(34962,na.buffer):ta.getBuffer(na.buffer),uc="type"in na?ua[na.type]:lb.dtype,Eb=!!na.normalized,wc=na.size|0,rb=na.offset|0,ad=na.stride|0,wb=na.divisor|0);Yb=I.buffer;I.buffer=lb;cc=I.divisor;I.divisor=wb;Pb=I.normalized;I.normalized=Eb;Ga=I.offset;I.offset=rb;$b=I.size;I.size=wc;mb=I.state;I.state=xb;yb=I.stride;I.stride=ad;Nb=I.type;I.type=uc;Qb=I.w;I.w=fb;gc=I.x;I.x=Mc;ic=I.y;I.y=nd;Rc=I.z;I.z=od;F.buffer=a.positionFractBuffer;Bc=!1;Cc=null;Dc=0;Nc=!1;Sc=Zc=0;Oc=1;Lb=0;Gb=5126;
hc=Tc=Hc=Pc=0;Jb(F)?(Bc=!0,Cc=ta.createStream(34962,F),Gb=Cc.dtype):(Cc=ta.getBuffer(F))?Gb=Cc.dtype:"constant"in F?(Oc=2,"number"===typeof F.constant?(Hc=F.constant,Tc=hc=Pc=0):(Hc=0<F.constant.length?F.constant[0]:0,Tc=1<F.constant.length?F.constant[1]:0,hc=2<F.constant.length?F.constant[2]:0,Pc=3<F.constant.length?F.constant[3]:0)):(Cc=Jb(F.buffer)?ta.createStream(34962,F.buffer):ta.getBuffer(F.buffer),Gb="type"in F?ua[F.type]:Cc.dtype,Nc=!!F.normalized,Sc=F.size|0,Zc=F.offset|0,Lb=F.stride|0,
Dc=F.divisor|0);Wc=y.buffer;y.buffer=Cc;dc=y.divisor;y.divisor=Dc;Rb=y.normalized;y.normalized=Nc;id=y.offset;y.offset=Zc;Xc=y.size;y.size=Sc;Zb=y.state;y.state=Oc;wd=y.stride;y.stride=Lb;ie=y.type;y.type=Gb;ue=y.w;y.w=Pc;le=y.x;y.x=Hc;Hd=y.y;y.y=Tc;Ed=y.z;y.z=hc;u.buffer=a.colorBuffer;fd=!1;Ec=null;pd=0;hd=!1;jd=bd=0;zd=1;Bd=0;ve=5126;de=ee=xe=me=0;Jb(u)?(fd=!0,Ec=ta.createStream(34962,u),ve=Ec.dtype):(Ec=ta.getBuffer(u))?ve=Ec.dtype:"constant"in u?(zd=2,"number"===typeof u.constant?(xe=u.constant,
ee=de=me=0):(xe=0<u.constant.length?u.constant[0]:0,ee=1<u.constant.length?u.constant[1]:0,de=2<u.constant.length?u.constant[2]:0,me=3<u.constant.length?u.constant[3]:0)):(Ec=Jb(u.buffer)?ta.createStream(34962,u.buffer):ta.getBuffer(u.buffer),ve="type"in u?ua[u.type]:Ec.dtype,hd=!!u.normalized,jd=u.size|0,bd=u.offset|0,Bd=u.stride|0,pd=u.divisor|0);ce=A.buffer;A.buffer=Ec;oe=A.divisor;A.divisor=pd;ae=A.normalized;A.normalized=hd;ge=A.offset;A.offset=bd;yc=A.size;A.size=jd;Vc=A.state;A.state=zd;pe=
A.stride;A.stride=Bd;je=A.type;A.type=ve;Fd=A.w;A.w=me;Md=A.x;A.x=xe;Od=A.y;A.y=ee;Pd=A.z;A.z=de;he=C.buffer;C.buffer=f;Ee=C.divisor;C.divisor=0;ye=C.normalized;C.normalized=!1;ne=C.offset;C.offset=0;Ze=C.size;C.size=0;Ne=C.state;C.state=1;Ke=C.stride;C.stride=8;qe=C.type;C.type=5126;Be=C.w;C.w=0;Fe=C.x;C.x=0;Ge=C.y;C.y=0;He=C.z;C.z=0;Ce=B.buffer;B.buffer=b;Id=B.divisor;B.divisor=0;Td=B.normalized;B.normalized=!1;Zd=B.offset;B.offset=4;be=B.size;B.size=0;Ie=B.state;B.state=1;yd=B.stride;B.stride=
8;Qd=B.type;B.type=5126;ze=B.w;B.w=0;Je=B.x;B.x=0;ef=B.y;B.y=0;Ye=B.z;B.z=0;Oe=T.vert;T.vert=20;Le=T.frag;T.frag=19;Z.dirty=!0;e(Aa,a,g);Aa.viewportWidth=m;Aa.viewportHeight=w;v[0]=L;v[1]=z;v[2]=E;v[3]=t;ba[0]=N;ba[1]=Q;ba[2]=P;ba[3]=S;Za.blend_enable=J;Ja[0]=O;Ja[1]=R;Xa[0]=sa;Xa[1]=W;Xa[2]=U;Xa[3]=ia;Za.depth_enable=ha;aa[0]=Da;aa[1]=la;aa[2]=va;aa[3]=oa;Za.scissor_enable=ud;Za.stencil_enable=qa;xc&&(d.cpuTime+=performance.now()-gd);K.offset=Lc;K.count=tc;K.instances=lc;K.primitive=Fb;r[23]=Ra;
r[24]=bc;r[22]=$c;r[31]=Ac;r[32]=Fc;r[33]=La;r[10]=Ua;r[34]=Ha;r[6]=Qa;r[7]=bb;r[21]=Sb;r[8]=ac;r[9]=sb;r[3]=Ma;nb&&ta.destroyStream(vb);ea.buffer=ra;ea.divisor=ob;ea.normalized=wa;ea.offset=Sa;ea.size=ab;ea.state=Ba;ea.stride=db;ea.type=Ia;ea.w=Db;ea.x=Bb;ea.y=Pa;ea.z=Jc;Kb&&ta.destroyStream(Ya);H.buffer=qb;H.divisor=Va;H.normalized=Wa;H.offset=nc;H.size=cd;H.state=vc;H.stride=Ta;H.type=Mb;H.w=dd;H.x=Fa;H.y=Kc;H.z=Oa;Ca&&ta.destroyStream(lb);I.buffer=Yb;I.divisor=cc;I.normalized=Pb;I.offset=Ga;I.size=
$b;I.state=mb;I.stride=yb;I.type=Nb;I.w=Qb;I.x=gc;I.y=ic;I.z=Rc;Bc&&ta.destroyStream(Cc);y.buffer=Wc;y.divisor=dc;y.normalized=Rb;y.offset=id;y.size=Xc;y.state=Zb;y.stride=wd;y.type=ie;y.w=ue;y.x=le;y.y=Hd;y.z=Ed;fd&&ta.destroyStream(Ec);A.buffer=ce;A.divisor=oe;A.normalized=ae;A.offset=ge;A.size=yc;A.state=Vc;A.stride=pe;A.type=je;A.w=Fd;A.x=Md;A.y=Od;A.z=Pd;C.buffer=he;C.divisor=Ee;C.normalized=ye;C.offset=ne;C.size=Ze;C.state=Ne;C.stride=Ke;C.type=qe;C.w=Be;C.x=Fe;C.y=Ge;C.z=He;B.buffer=Ce;B.divisor=
Id;B.normalized=Td;B.offset=Zd;B.size=be;B.state=Ie;B.stride=yd;B.type=Qd;B.w=ze;B.x=Je;B.y=ef;B.z=Ye;T.vert=Oe;T.frag=Le;Z.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,d,k,m,f,b,t,c,x,M,ea,H,I,y,A,C,B,J,z,O,Zb,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb,Rb,ta,Aa,Z){var K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va,Xb,qc,sc,ud,xc,aa,L,ia,Da,tb,$c,ad,E,v,ha,ua,V,
fa,na,F,u,ca,D,xa,ka,l;K=a.attributes;N=a.buffer;R=a.context;oa=a.current;P=a.draw;Jb=a.elements;Za=a.extensions;T=a.framebuffer;r=a.gl;ja=a.isBufferArgs;ba=a.next;Ha=a.shader;Ja=a.uniforms;dc=a.vao;Xa=ba.blend_color;W=oa.blend_color;sb=ba.blend_equation;ga=oa.blend_equation;va=ba.blend_func;Xb=oa.blend_func;qc=ba.colorMask;sc=oa.colorMask;ud=ba.depth_range;xc=oa.depth_range;aa=ba.polygonOffset_offset;L=oa.polygonOffset_offset;ia=ba.sample_coverage;Da=oa.sample_coverage;tb=ba.scissor_box;$c=oa.scissor_box;
ad=ba.stencil_func;E=oa.stencil_func;v=ba.stencil_opBack;ha=oa.stencil_opBack;ua=ba.stencil_opFront;V=oa.stencil_opFront;fa=ba.viewport;na=oa.viewport;F={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};u={divisor:1,offset:0,stride:4};ca={divisor:1,offset:8,stride:8};D={divisor:1,offset:4,stride:4};xa={divisor:1,offset:16,stride:8};ka={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(a,c){var k,m,w,z,y,x;k=T.next;k!==
T.cur&&(k?r.bindFramebuffer(36160,k.framebuffer):r.bindFramebuffer(36160,null),T.cur=k);if(oa.dirty){var A,B,t,C,I,H,J,sa,fa,ea,M,va,tb,Ha,Ja,Ud,Vd,Ld,Xa,rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a;A=ba.dither;A!==oa.dither&&(A?r.enable(3024):r.disable(3024),oa.dither=A);B=ba.depth_func;B!==oa.depth_func&&(r.depthFunc(B),oa.depth_func=B);t=ud[0];C=ud[1];if(t!==xc[0]||C!==xc[1])r.depthRange(t,C),xc[0]=t,xc[1]=C;I=ba.depth_mask;I!==oa.depth_mask&&(r.depthMask(I),oa.depth_mask=I);H=qc[0];J=qc[1];sa=qc[2];fa=qc[3];
if(H!==sc[0]||J!==sc[1]||sa!==sc[2]||fa!==sc[3])r.colorMask(H,J,sa,fa),sc[0]=H,sc[1]=J,sc[2]=sa,sc[3]=fa;ea=ba.frontFace;ea!==oa.frontFace&&(r.frontFace(ea),oa.frontFace=ea);M=ba.lineWidth;M!==oa.lineWidth&&(r.lineWidth(M),oa.lineWidth=M);va=ba.polygonOffset_enable;va!==oa.polygonOffset_enable&&(va?r.enable(32823):r.disable(32823),oa.polygonOffset_enable=va);tb=aa[0];Ha=aa[1];if(tb!==L[0]||Ha!==L[1])r.polygonOffset(tb,Ha),L[0]=tb,L[1]=Ha;Ja=ba.sample_alpha;Ja!==oa.sample_alpha&&(Ja?r.enable(32926):
r.disable(32926),oa.sample_alpha=Ja);Ud=ba.sample_enable;Ud!==oa.sample_enable&&(Ud?r.enable(32928):r.disable(32928),oa.sample_enable=Ud);Vd=ia[0];Ld=ia[1];if(Vd!==Da[0]||Ld!==Da[1])r.sampleCoverage(Vd,Ld),Da[0]=Vd,Da[1]=Ld;Xa=ba.stencil_mask;Xa!==oa.stencil_mask&&(r.stencilMask(Xa),oa.stencil_mask=Xa);rd=ad[0];ld=ad[1];xd=ad[2];if(rd!==E[0]||ld!==E[1]||xd!==E[2])r.stencilFunc(rd,ld,xd),E[0]=rd,E[1]=ld,E[2]=xd;qd=ua[0];ed=ua[1];zc=ua[2];sd=ua[3];if(qd!==V[0]||ed!==V[1]||zc!==V[2]||sd!==V[3])r.stencilOpSeparate(qd,
ed,zc,sd),V[0]=qd,V[1]=ed,V[2]=zc,V[3]=sd;gd=v[0];Lc=v[1];tc=v[2];$a=v[3];if(gd!==ha[0]||Lc!==ha[1]||tc!==ha[2]||$a!==ha[3])r.stencilOpSeparate(gd,Lc,tc,$a),ha[0]=gd,ha[1]=Lc,ha[2]=tc,ha[3]=$a}r.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;r.enable(3042);oa.blend_enable=!0;r.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;r.blendFuncSeparate(770,771,773,1);Xb[0]=770;Xb[1]=771;Xb[2]=773;Xb[3]=1;r.enable(2884);oa.cull_enable=!0;r.cullFace(1029);oa.cull_face=1029;r.enable(3089);oa.scissor_enable=
!0;r.disable(2960);oa.stencil_enable=!1;if(m=oa.profile)w=performance.now(),d.count+=c;r.useProgram(O.program);z=Za.angle_instanced_arrays;var lc,Fb,rc,Ra,Ic;dc.setVAO(null);lc=da.location;Fb=K[lc];Fb.buffer||r.enableVertexAttribArray(lc);if(5126!==Fb.type||1!==Fb.size||Fb.buffer!==f||!1!==Fb.normalized||0!==Fb.offset||8!==Fb.stride)r.bindBuffer(34962,f.buffer),r.vertexAttribPointer(lc,1,5126,!1,8,0),Fb.type=5126,Fb.size=1,Fb.buffer=f,Fb.normalized=!1,Fb.offset=0,Fb.stride=8;0!==Fb.divisor&&(z.vertexAttribDivisorANGLE(lc,
0),Fb.divisor=0);rc=e.location;Ra=K[rc];Ra.buffer||r.enableVertexAttribArray(rc);if(5126!==Ra.type||1!==Ra.size||Ra.buffer!==b||!1!==Ra.normalized||4!==Ra.offset||8!==Ra.stride)r.bindBuffer(34962,b.buffer),r.vertexAttribPointer(rc,1,5126,!1,8,4),Ra.type=5126,Ra.size=1,Ra.buffer=b,Ra.normalized=!1,Ra.offset=4,Ra.stride=8;0!==Ra.divisor&&(z.vertexAttribDivisorANGLE(rc,0),Ra.divisor=0);(Ic=P.elements)?r.bindBuffer(34963,Ic.buffer.buffer):dc.currentVAO&&(Ic=Jb.getElements(dc.currentVAO.elements))&&r.bindBuffer(34963,
Ic.buffer.buffer);for(y=0;y<c;++y){x=a[y];var bc,Yc,sb,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,jc,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,We,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd,pg,id,Xc,pf,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc;bc=x.viewport;Yc=bc.x|0;sb=
bc.y|0;md="width"in bc?bc.width|0:R.framebufferWidth-Yc;Ac="height"in bc?bc.height|0:R.framebufferHeight-sb;ec=R.viewportWidth;R.viewportWidth=md;Fc=R.viewportHeight;R.viewportHeight=Ac;r.viewport(Yc,sb,md,Ac);na[0]=Yc;na[1]=sb;na[2]=md;na[3]=Ac;(Ab=Zb.call(this,R,x,y))?r.enable(2929):r.disable(2929);oa.depth_enable=Ab;La=x.viewport;ub=La.x|0;Ua=La.y|0;pa="width"in La?La.width|0:R.framebufferWidth-ub;vd="height"in La?La.height|0:R.framebufferHeight-Ua;r.scissor(ub,Ua,pa,vd);$c[0]=ub;$c[1]=Ua;$c[2]=
pa;$c[3]=vd;ca.buffer=x.positionBuffer;Cb=!1;Qa=null;Hb=0;bb=!1;Sb=Qc=0;jc=1;ac=0;Tb=5126;nb=Ma=Ub=Ad=0;ja(ca)?(Cb=!0,Qa=N.createStream(34962,ca),Tb=Qa.dtype):(Qa=N.getBuffer(ca))?Tb=Qa.dtype:"constant"in ca?(jc=2,"number"===typeof ca.constant?(Ub=ca.constant,Ma=nb=Ad=0):(Ub=0<ca.constant.length?ca.constant[0]:0,Ma=1<ca.constant.length?ca.constant[1]:0,nb=2<ca.constant.length?ca.constant[2]:0,Ad=3<ca.constant.length?ca.constant[3]:0)):(Qa=ja(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),
Tb="type"in ca?F[ca.type]:Qa.dtype,bb=!!ca.normalized,Sb=ca.size|0,Qc=ca.offset|0,ac=ca.stride|0,Hb=ca.divisor|0);vb=S.location;hb=K[vb];if(1===jc){hb.buffer||r.enableVertexAttribArray(vb);Na=Sb||2;if(hb.type!==Tb||hb.size!==Na||hb.buffer!==Qa||hb.normalized!==bb||hb.offset!==Qc||hb.stride!==ac)r.bindBuffer(34962,Qa.buffer),r.vertexAttribPointer(vb,Na,Tb,bb,ac,Qc),hb.type=Tb,hb.size=Na,hb.buffer=Qa,hb.normalized=bb,hb.offset=Qc,hb.stride=ac;hb.divisor!==Hb&&(z.vertexAttribDivisorANGLE(vb,Hb),hb.divisor=
Hb)}else if(hb.buffer&&(r.disableVertexAttribArray(vb),hb.buffer=null),hb.x!==Ub||hb.y!==Ma||hb.z!==nb||hb.w!==Ad)r.vertexAttrib4f(vb,Ub,Ma,nb,Ad),hb.x=Ub,hb.y=Ma,hb.z=nb,hb.w=Ad;xa.buffer=x.positionBuffer;pc=!1;Vb=null;Uc=0;cb=!1;Gc=mc=0;oc=1;jb=0;kb=5126;Sa=wa=ob=ra=0;ja(xa)?(pc=!0,Vb=N.createStream(34962,xa),kb=Vb.dtype):(Vb=N.getBuffer(xa))?kb=Vb.dtype:"constant"in xa?(oc=2,"number"===typeof xa.constant?(ob=xa.constant,wa=Sa=ra=0):(ob=0<xa.constant.length?xa.constant[0]:0,wa=1<xa.constant.length?
xa.constant[1]:0,Sa=2<xa.constant.length?xa.constant[2]:0,ra=3<xa.constant.length?xa.constant[3]:0)):(Vb=ja(xa.buffer)?N.createStream(34962,xa.buffer):N.getBuffer(xa.buffer),kb="type"in xa?F[xa.type]:Vb.dtype,cb=!!xa.normalized,Gc=xa.size|0,mc=xa.offset|0,jb=xa.stride|0,Uc=xa.divisor|0);ab=U.location;Ba=K[ab];if(1===oc){Ba.buffer||r.enableVertexAttribArray(ab);db=Gc||2;if(Ba.type!==kb||Ba.size!==db||Ba.buffer!==Vb||Ba.normalized!==cb||Ba.offset!==mc||Ba.stride!==jb)r.bindBuffer(34962,Vb.buffer),r.vertexAttribPointer(ab,
db,kb,cb,jb,mc),Ba.type=kb,Ba.size=db,Ba.buffer=Vb,Ba.normalized=cb,Ba.offset=mc,Ba.stride=jb;Ba.divisor!==Uc&&(z.vertexAttribDivisorANGLE(ab,Uc),Ba.divisor=Uc)}else if(Ba.buffer&&(r.disableVertexAttribArray(ab),Ba.buffer=null),Ba.x!==ob||Ba.y!==wa||Ba.z!==Sa||Ba.w!==ra)r.vertexAttrib4f(ab,ob,wa,Sa,ra),Ba.x=ob,Ba.y=wa,Ba.z=Sa,Ba.w=ra;ka.buffer=x.positionBuffer;Ia=!1;Db=null;Bb=0;Pa=!1;Kb=Jc=0;Ya=1;Wb=0;ya=5126;eb=Ob=Ka=We=0;ja(ka)?(Ia=!0,Db=N.createStream(34962,ka),ya=Db.dtype):(Db=N.getBuffer(ka))?
ya=Db.dtype:"constant"in ka?(Ya=2,"number"===typeof ka.constant?(Ka=ka.constant,Ob=eb=We=0):(Ka=0<ka.constant.length?ka.constant[0]:0,Ob=1<ka.constant.length?ka.constant[1]:0,eb=2<ka.constant.length?ka.constant[2]:0,We=3<ka.constant.length?ka.constant[3]:0)):(Db=ja(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),ya="type"in ka?F[ka.type]:Db.dtype,Pa=!!ka.normalized,Kb=ka.size|0,Jc=ka.offset|0,Wb=ka.stride|0,Bb=ka.divisor|0);ib=qa.location;za=K[ib];if(1===Ya){za.buffer||r.enableVertexAttribArray(ib);
fc=Kb||2;if(za.type!==ya||za.size!==fc||za.buffer!==Db||za.normalized!==Pa||za.offset!==Jc||za.stride!==Wb)r.bindBuffer(34962,Db.buffer),r.vertexAttribPointer(ib,fc,ya,Pa,Wb,Jc),za.type=ya,za.size=fc,za.buffer=Db,za.normalized=Pa,za.offset=Jc,za.stride=Wb;za.divisor!==Bb&&(z.vertexAttribDivisorANGLE(ib,Bb),za.divisor=Bb)}else if(za.buffer&&(r.disableVertexAttribArray(ib),za.buffer=null),za.x!==Ka||za.y!==Ob||za.z!==eb||za.w!==We)r.vertexAttrib4f(ib,Ka,Ob,eb,We),za.x=Ka,za.y=Ob,za.z=eb,za.w=We;l.buffer=
x.positionBuffer;Ea=!1;pb=null;qb=0;Va=!1;nc=Wa=0;cd=1;vc=0;Ta=5126;Kc=Fa=dd=Mb=0;ja(l)?(Ea=!0,pb=N.createStream(34962,l),Ta=pb.dtype):(pb=N.getBuffer(l))?Ta=pb.dtype:"constant"in l?(cd=2,"number"===typeof l.constant?(dd=l.constant,Fa=Kc=Mb=0):(dd=0<l.constant.length?l.constant[0]:0,Fa=1<l.constant.length?l.constant[1]:0,Kc=2<l.constant.length?l.constant[2]:0,Mb=3<l.constant.length?l.constant[3]:0)):(pb=ja(l.buffer)?N.createStream(34962,l.buffer):N.getBuffer(l.buffer),Ta="type"in l?F[l.type]:pb.dtype,
Va=!!l.normalized,nc=l.size|0,Wa=l.offset|0,vc=l.stride|0,qb=l.divisor|0);Oa=gb.location;Ca=K[Oa];if(1===cd){Ca.buffer||r.enableVertexAttribArray(Oa);lb=nc||2;if(Ca.type!==Ta||Ca.size!==lb||Ca.buffer!==pb||Ca.normalized!==Va||Ca.offset!==Wa||Ca.stride!==vc)r.bindBuffer(34962,pb.buffer),r.vertexAttribPointer(Oa,lb,Ta,Va,vc,Wa),Ca.type=Ta,Ca.size=lb,Ca.buffer=pb,Ca.normalized=Va,Ca.offset=Wa,Ca.stride=vc;Ca.divisor!==qb&&(z.vertexAttribDivisorANGLE(Oa,qb),Ca.divisor=qb)}else if(Ca.buffer&&(r.disableVertexAttribArray(Oa),
Ca.buffer=null),Ca.x!==dd||Ca.y!==Fa||Ca.z!==Kc||Ca.w!==Mb)r.vertexAttrib4f(Oa,dd,Fa,Kc,Mb),Ca.x=dd,Ca.y=Fa,Ca.z=Kc,Ca.w=Mb;u.buffer=x.colorBuffer;wb=!1;Eb=null;rb=0;wc=!1;Dd=xb=0;uc=1;Wd=0;Mc=5126;cc=Yb=od=nd=0;ja(u)?(wb=!0,Eb=N.createStream(34962,u),Mc=Eb.dtype):(Eb=N.getBuffer(u))?Mc=Eb.dtype:"constant"in u?(uc=2,"number"===typeof u.constant?(od=u.constant,Yb=cc=nd=0):(od=0<u.constant.length?u.constant[0]:0,Yb=1<u.constant.length?u.constant[1]:0,cc=2<u.constant.length?u.constant[2]:0,nd=3<u.constant.length?
u.constant[3]:0)):(Eb=ja(u.buffer)?N.createStream(34962,u.buffer):N.getBuffer(u.buffer),Mc="type"in u?F[u.type]:Eb.dtype,wc=!!u.normalized,Dd=u.size|0,xb=u.offset|0,Wd=u.stride|0,rb=u.divisor|0);Pb=q.location;Ga=K[Pb];if(1===uc){Ga.buffer||r.enableVertexAttribArray(Pb);$b=Dd||4;if(Ga.type!==Mc||Ga.size!==$b||Ga.buffer!==Eb||Ga.normalized!==wc||Ga.offset!==xb||Ga.stride!==Wd)r.bindBuffer(34962,Eb.buffer),r.vertexAttribPointer(Pb,$b,Mc,wc,Wd,xb),Ga.type=Mc,Ga.size=$b,Ga.buffer=Eb,Ga.normalized=wc,Ga.offset=
xb,Ga.stride=Wd;Ga.divisor!==rb&&(z.vertexAttribDivisorANGLE(Pb,rb),Ga.divisor=rb)}else if(Ga.buffer&&(r.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==od||Ga.y!==Yb||Ga.z!==cc||Ga.w!==nd)r.vertexAttrib4f(Pb,od,Yb,cc,nd),Ga.x=od,Ga.y=Yb,Ga.z=cc,Ga.w=nd;D.buffer=x.colorBuffer;mb=!1;yb=null;Nb=0;Qb=!1;ic=gc=0;Rc=1;Bc=0;Cc=5126;Sc=Zc=Nc=Dc=0;ja(D)?(mb=!0,yb=N.createStream(34962,D),Cc=yb.dtype):(yb=N.getBuffer(D))?Cc=yb.dtype:"constant"in D?(Rc=2,"number"===typeof D.constant?(Nc=D.constant,Zc=Sc=
Dc=0):(Nc=0<D.constant.length?D.constant[0]:0,Zc=1<D.constant.length?D.constant[1]:0,Sc=2<D.constant.length?D.constant[2]:0,Dc=3<D.constant.length?D.constant[3]:0)):(yb=ja(D.buffer)?N.createStream(34962,D.buffer):N.getBuffer(D.buffer),Cc="type"in D?F[D.type]:yb.dtype,Qb=!!D.normalized,ic=D.size|0,gc=D.offset|0,Bc=D.stride|0,Nb=D.divisor|0);Oc=X.location;Lb=K[Oc];if(1===Rc){Lb.buffer||r.enableVertexAttribArray(Oc);Gb=ic||4;if(Lb.type!==Cc||Lb.size!==Gb||Lb.buffer!==yb||Lb.normalized!==Qb||Lb.offset!==
gc||Lb.stride!==Bc)r.bindBuffer(34962,yb.buffer),r.vertexAttribPointer(Oc,Gb,Cc,Qb,Bc,gc),Lb.type=Cc,Lb.size=Gb,Lb.buffer=yb,Lb.normalized=Qb,Lb.offset=gc,Lb.stride=Bc;Lb.divisor!==Nb&&(z.vertexAttribDivisorANGLE(Oc,Nb),Lb.divisor=Nb)}else if(Lb.buffer&&(r.disableVertexAttribArray(Oc),Lb.buffer=null),Lb.x!==Nc||Lb.y!==Zc||Lb.z!==Sc||Lb.w!==Dc)r.vertexAttrib4f(Oc,Nc,Zc,Sc,Dc),Lb.x=Nc,Lb.y=Zc,Lb.z=Sc,Lb.w=Dc;Pc=x.scale;Hc=Pc[0];hc=Pc[1];y&&Tc===Hc&&Wc===hc||(Tc=Hc,Wc=hc,r.uniform2f(Rb.location,Hc,hc));
Jd=x.translate;pg=Jd[0];Xc=Jd[1];y&&id===pg&&pf===Xc||(id=pg,pf=Xc,r.uniform2f(Aa.location,pg,Xc));wd=x.thickness;y&&ie===wd||(ie=wd,r.uniform1f(ta.location,wd));ue=x.depth;y&&le===ue||(le=ue,r.uniform1f(Q.location,ue));Hd=p.call(this,R,x,y);Ed=Hd[0];Ec=Hd[1];hd=Hd[2];jd=Hd[3];y&&fd===Ed&&pd===Ec&&bd===hd&&zd===jd||(fd=Ed,pd=Ec,bd=hd,zd=jd,r.uniform4f(Z.location,Ed,Ec,hd,jd));Bd=x.miterLimit;y&&ve===Bd||(ve=Bd,r.uniform1f(h.location,Bd));me=g.call(this,R,x,y);y&&xe===me||(xe=me,r.uniform1f(Y.location,
me));ee=x.dashLength;y&&de===ee||(de=ee,r.uniform1f(n.location,ee));ce=x.opacity;y&&oe===ce||(oe=ce,r.uniform1f(fb.location,ce));(ae=x.dashTexture)&&"framebuffer"===ae._reglType&&(ae=ae.color[0]);ge=ae._texture;r.uniform1i(la.location,ge.bind());yc=x.count;0<yc?Ic?z.drawElementsInstancedANGLE(5,4,Ic.type,0<<(Ic.type-5121>>1),yc):z.drawArraysInstancedANGLE(5,0,4,yc):0>yc&&(Ic?r.drawElements(5,4,Ic.type,0<<(Ic.type-5121>>1)):r.drawArrays(5,0,4));R.viewportWidth=ec;R.viewportHeight=Fc;Cb&&N.destroyStream(Qa);
pc&&N.destroyStream(Vb);Ia&&N.destroyStream(Db);Ea&&N.destroyStream(pb);wb&&N.destroyStream(Eb);mb&&N.destroyStream(yb);ge.unbind()}oa.dirty=!0;dc.setVAO(null);m&&(d.cpuTime+=performance.now()-w)},draw:function(a){var g,p,y,z,x,A,B,C,I,H,J,O,fa,ea,M,va,tb,Ha,Ja,Xa,sb,jc,Ud,Vd,Ld,Yd,rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,Zb,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,We,Ka,Ob,
eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd;g=T.next;g!==T.cur&&(g?r.bindFramebuffer(36160,g.framebuffer):r.bindFramebuffer(36160,null),T.cur=g);if(oa.dirty){var uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc;uc=ba.dither;uc!==oa.dither&&(uc?r.enable(3024):r.disable(3024),oa.dither=uc);Wd=ba.depth_func;Wd!==oa.depth_func&&(r.depthFunc(Wd),oa.depth_func=Wd);Mc=ud[0];nd=ud[1];if(Mc!==xc[0]||nd!==xc[1])r.depthRange(Mc,nd),xc[0]=
Mc,xc[1]=nd;od=ba.depth_mask;od!==oa.depth_mask&&(r.depthMask(od),oa.depth_mask=od);Yb=qc[0];cc=qc[1];Pb=qc[2];Ga=qc[3];if(Yb!==sc[0]||cc!==sc[1]||Pb!==sc[2]||Ga!==sc[3])r.colorMask(Yb,cc,Pb,Ga),sc[0]=Yb,sc[1]=cc,sc[2]=Pb,sc[3]=Ga;$b=ba.frontFace;$b!==oa.frontFace&&(r.frontFace($b),oa.frontFace=$b);mb=ba.lineWidth;mb!==oa.lineWidth&&(r.lineWidth(mb),oa.lineWidth=mb);yb=ba.polygonOffset_enable;yb!==oa.polygonOffset_enable&&(yb?r.enable(32823):r.disable(32823),oa.polygonOffset_enable=yb);Nb=aa[0];Qb=
aa[1];if(Nb!==L[0]||Qb!==L[1])r.polygonOffset(Nb,Qb),L[0]=Nb,L[1]=Qb;gc=ba.sample_alpha;gc!==oa.sample_alpha&&(gc?r.enable(32926):r.disable(32926),oa.sample_alpha=gc);ic=ba.sample_enable;ic!==oa.sample_enable&&(ic?r.enable(32928):r.disable(32928),oa.sample_enable=ic);Rc=ia[0];Bc=ia[1];if(Rc!==Da[0]||Bc!==Da[1])r.sampleCoverage(Rc,Bc),Da[0]=Rc,Da[1]=Bc;Cc=ba.stencil_mask;Cc!==oa.stencil_mask&&(r.stencilMask(Cc),oa.stencil_mask=Cc);Dc=ad[0];Nc=ad[1];Zc=ad[2];if(Dc!==E[0]||Nc!==E[1]||Zc!==E[2])r.stencilFunc(Dc,
Nc,Zc),E[0]=Dc,E[1]=Nc,E[2]=Zc;Sc=ua[0];Oc=ua[1];Lb=ua[2];Gb=ua[3];if(Sc!==V[0]||Oc!==V[1]||Lb!==V[2]||Gb!==V[3])r.stencilOpSeparate(Sc,Oc,Lb,Gb),V[0]=Sc,V[1]=Oc,V[2]=Lb,V[3]=Gb;Pc=v[0];Hc=v[1];Tc=v[2];hc=v[3];if(Pc!==ha[0]||Hc!==ha[1]||Tc!==ha[2]||hc!==ha[3])r.stencilOpSeparate(Pc,Hc,Tc,hc),ha[0]=Pc,ha[1]=Hc,ha[2]=Tc,ha[3]=hc}p=a.viewport;y=p.x|0;z=p.y|0;x="width"in p?p.width|0:R.framebufferWidth-y;A="height"in p?p.height|0:R.framebufferHeight-z;B=R.viewportWidth;R.viewportWidth=x;C=R.viewportHeight;
R.viewportHeight=A;r.viewport(y,z,x,A);na[0]=y;na[1]=z;na[2]=x;na[3]=A;r.blendColor(0,0,0,0);W[0]=0;W[1]=0;W[2]=0;W[3]=0;r.enable(3042);oa.blend_enable=!0;r.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;r.blendFuncSeparate(770,771,773,1);Xb[0]=770;Xb[1]=771;Xb[2]=773;Xb[3]=1;r.enable(2884);oa.cull_enable=!0;r.cullFace(1029);oa.cull_face=1029;(I=k.call(this,R,a,0))?r.enable(2929):r.disable(2929);oa.depth_enable=I;H=a.viewport;J=H.x|0;O=H.y|0;fa="width"in H?H.width|0:R.framebufferWidth-
J;ea="height"in H?H.height|0:R.framebufferHeight-O;r.scissor(J,O,fa,ea);$c[0]=J;$c[1]=O;$c[2]=fa;$c[3]=ea;r.enable(3089);oa.scissor_enable=!0;r.disable(2960);oa.stencil_enable=!1;if(M=oa.profile)va=performance.now(),d.count++;r.useProgram(m.program);tb=Za.angle_instanced_arrays;dc.setVAO(null);ca.buffer=a.positionBuffer;Ha=!1;Ja=null;Xa=0;sb=!1;Ud=jc=0;Vd=1;Ld=0;Yd=5126;qd=xd=ld=rd=0;ja(ca)?(Ha=!0,Ja=N.createStream(34962,ca),Yd=Ja.dtype):(Ja=N.getBuffer(ca))?Yd=Ja.dtype:"constant"in ca?(Vd=2,"number"===
typeof ca.constant?(ld=ca.constant,xd=qd=rd=0):(ld=0<ca.constant.length?ca.constant[0]:0,xd=1<ca.constant.length?ca.constant[1]:0,qd=2<ca.constant.length?ca.constant[2]:0,rd=3<ca.constant.length?ca.constant[3]:0)):(Ja=ja(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),Yd="type"in ca?F[ca.type]:Ja.dtype,sb=!!ca.normalized,Ud=ca.size|0,jc=ca.offset|0,Ld=ca.stride|0,Xa=ca.divisor|0);ed=S.location;zc=K[ed];if(1===Vd){zc.buffer||r.enableVertexAttribArray(ed);sd=Ud||2;if(zc.type!==Yd||
zc.size!==sd||zc.buffer!==Ja||zc.normalized!==sb||zc.offset!==jc||zc.stride!==Ld)r.bindBuffer(34962,Ja.buffer),r.vertexAttribPointer(ed,sd,Yd,sb,Ld,jc),zc.type=Yd,zc.size=sd,zc.buffer=Ja,zc.normalized=sb,zc.offset=jc,zc.stride=Ld;zc.divisor!==Xa&&(tb.vertexAttribDivisorANGLE(ed,Xa),zc.divisor=Xa)}else if(zc.buffer&&(r.disableVertexAttribArray(ed),zc.buffer=null),zc.x!==ld||zc.y!==xd||zc.z!==qd||zc.w!==rd)r.vertexAttrib4f(ed,ld,xd,qd,rd),zc.x=ld,zc.y=xd,zc.z=qd,zc.w=rd;xa.buffer=a.positionBuffer;gd=
!1;Lc=null;tc=0;$a=!1;Fb=lc=0;rc=1;Ra=0;Ic=5126;md=Sd=Yc=bc=0;ja(xa)?(gd=!0,Lc=N.createStream(34962,xa),Ic=Lc.dtype):(Lc=N.getBuffer(xa))?Ic=Lc.dtype:"constant"in xa?(rc=2,"number"===typeof xa.constant?(Yc=xa.constant,Sd=md=bc=0):(Yc=0<xa.constant.length?xa.constant[0]:0,Sd=1<xa.constant.length?xa.constant[1]:0,md=2<xa.constant.length?xa.constant[2]:0,bc=3<xa.constant.length?xa.constant[3]:0)):(Lc=ja(xa.buffer)?N.createStream(34962,xa.buffer):N.getBuffer(xa.buffer),Ic="type"in xa?F[xa.type]:Lc.dtype,
$a=!!xa.normalized,Fb=xa.size|0,lc=xa.offset|0,Ra=xa.stride|0,tc=xa.divisor|0);Ac=U.location;ec=K[Ac];if(1===rc){ec.buffer||r.enableVertexAttribArray(Ac);Fc=Fb||2;if(ec.type!==Ic||ec.size!==Fc||ec.buffer!==Lc||ec.normalized!==$a||ec.offset!==lc||ec.stride!==Ra)r.bindBuffer(34962,Lc.buffer),r.vertexAttribPointer(Ac,Fc,Ic,$a,Ra,lc),ec.type=Ic,ec.size=Fc,ec.buffer=Lc,ec.normalized=$a,ec.offset=lc,ec.stride=Ra;ec.divisor!==tc&&(tb.vertexAttribDivisorANGLE(Ac,tc),ec.divisor=tc)}else if(ec.buffer&&(r.disableVertexAttribArray(Ac),
ec.buffer=null),ec.x!==Yc||ec.y!==Sd||ec.z!==md||ec.w!==bc)r.vertexAttrib4f(Ac,Yc,Sd,md,bc),ec.x=Yc,ec.y=Sd,ec.z=md,ec.w=bc;ka.buffer=a.positionBuffer;Ab=!1;La=null;ub=0;Ua=!1;vd=pa=0;Cb=1;Qa=0;Hb=5126;Zb=Sb=Qc=bb=0;ja(ka)?(Ab=!0,La=N.createStream(34962,ka),Hb=La.dtype):(La=N.getBuffer(ka))?Hb=La.dtype:"constant"in ka?(Cb=2,"number"===typeof ka.constant?(Qc=ka.constant,Sb=Zb=bb=0):(Qc=0<ka.constant.length?ka.constant[0]:0,Sb=1<ka.constant.length?ka.constant[1]:0,Zb=2<ka.constant.length?ka.constant[2]:
0,bb=3<ka.constant.length?ka.constant[3]:0)):(La=ja(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),Hb="type"in ka?F[ka.type]:La.dtype,Ua=!!ka.normalized,vd=ka.size|0,pa=ka.offset|0,Qa=ka.stride|0,ub=ka.divisor|0);ac=qa.location;Tb=K[ac];if(1===Cb){Tb.buffer||r.enableVertexAttribArray(ac);Ad=vd||2;if(Tb.type!==Hb||Tb.size!==Ad||Tb.buffer!==La||Tb.normalized!==Ua||Tb.offset!==pa||Tb.stride!==Qa)r.bindBuffer(34962,La.buffer),r.vertexAttribPointer(ac,Ad,Hb,Ua,Qa,pa),Tb.type=Hb,Tb.size=
Ad,Tb.buffer=La,Tb.normalized=Ua,Tb.offset=pa,Tb.stride=Qa;Tb.divisor!==ub&&(tb.vertexAttribDivisorANGLE(ac,ub),Tb.divisor=ub)}else if(Tb.buffer&&(r.disableVertexAttribArray(ac),Tb.buffer=null),Tb.x!==Qc||Tb.y!==Sb||Tb.z!==Zb||Tb.w!==bb)r.vertexAttrib4f(ac,Qc,Sb,Zb,bb),Tb.x=Qc,Tb.y=Sb,Tb.z=Zb,Tb.w=bb;l.buffer=a.positionBuffer;Ub=!1;Ma=null;nb=0;vb=!1;Na=hb=0;pc=1;Vb=0;Uc=5126;oc=Gc=mc=cb=0;ja(l)?(Ub=!0,Ma=N.createStream(34962,l),Uc=Ma.dtype):(Ma=N.getBuffer(l))?Uc=Ma.dtype:"constant"in l?(pc=2,"number"===
typeof l.constant?(mc=l.constant,Gc=oc=cb=0):(mc=0<l.constant.length?l.constant[0]:0,Gc=1<l.constant.length?l.constant[1]:0,oc=2<l.constant.length?l.constant[2]:0,cb=3<l.constant.length?l.constant[3]:0)):(Ma=ja(l.buffer)?N.createStream(34962,l.buffer):N.getBuffer(l.buffer),Uc="type"in l?F[l.type]:Ma.dtype,vb=!!l.normalized,Na=l.size|0,hb=l.offset|0,Vb=l.stride|0,nb=l.divisor|0);jb=gb.location;kb=K[jb];if(1===pc){kb.buffer||r.enableVertexAttribArray(jb);ra=Na||2;if(kb.type!==Uc||kb.size!==ra||kb.buffer!==
Ma||kb.normalized!==vb||kb.offset!==hb||kb.stride!==Vb)r.bindBuffer(34962,Ma.buffer),r.vertexAttribPointer(jb,ra,Uc,vb,Vb,hb),kb.type=Uc,kb.size=ra,kb.buffer=Ma,kb.normalized=vb,kb.offset=hb,kb.stride=Vb;kb.divisor!==nb&&(tb.vertexAttribDivisorANGLE(jb,nb),kb.divisor=nb)}else if(kb.buffer&&(r.disableVertexAttribArray(jb),kb.buffer=null),kb.x!==mc||kb.y!==Gc||kb.z!==oc||kb.w!==cb)r.vertexAttrib4f(jb,mc,Gc,oc,cb),kb.x=mc,kb.y=Gc,kb.z=oc,kb.w=cb;u.buffer=a.colorBuffer;ob=!1;wa=null;Sa=0;ab=!1;db=Ba=
0;Ia=1;Db=0;Bb=5126;Ya=Kb=Jc=Pa=0;ja(u)?(ob=!0,wa=N.createStream(34962,u),Bb=wa.dtype):(wa=N.getBuffer(u))?Bb=wa.dtype:"constant"in u?(Ia=2,"number"===typeof u.constant?(Jc=u.constant,Kb=Ya=Pa=0):(Jc=0<u.constant.length?u.constant[0]:0,Kb=1<u.constant.length?u.constant[1]:0,Ya=2<u.constant.length?u.constant[2]:0,Pa=3<u.constant.length?u.constant[3]:0)):(wa=ja(u.buffer)?N.createStream(34962,u.buffer):N.getBuffer(u.buffer),Bb="type"in u?F[u.type]:wa.dtype,ab=!!u.normalized,db=u.size|0,Ba=u.offset|0,
Db=u.stride|0,Sa=u.divisor|0);Wb=q.location;ya=K[Wb];if(1===Ia){ya.buffer||r.enableVertexAttribArray(Wb);We=db||4;if(ya.type!==Bb||ya.size!==We||ya.buffer!==wa||ya.normalized!==ab||ya.offset!==Ba||ya.stride!==Db)r.bindBuffer(34962,wa.buffer),r.vertexAttribPointer(Wb,We,Bb,ab,Db,Ba),ya.type=Bb,ya.size=We,ya.buffer=wa,ya.normalized=ab,ya.offset=Ba,ya.stride=Db;ya.divisor!==Sa&&(tb.vertexAttribDivisorANGLE(Wb,Sa),ya.divisor=Sa)}else if(ya.buffer&&(r.disableVertexAttribArray(Wb),ya.buffer=null),ya.x!==
Jc||ya.y!==Kb||ya.z!==Ya||ya.w!==Pa)r.vertexAttrib4f(Wb,Jc,Kb,Ya,Pa),ya.x=Jc,ya.y=Kb,ya.z=Ya,ya.w=Pa;D.buffer=a.colorBuffer;Ka=!1;Ob=null;eb=0;ib=!1;fc=za=0;Ea=1;pb=0;qb=5126;cd=nc=Wa=Va=0;ja(D)?(Ka=!0,Ob=N.createStream(34962,D),qb=Ob.dtype):(Ob=N.getBuffer(D))?qb=Ob.dtype:"constant"in D?(Ea=2,"number"===typeof D.constant?(Wa=D.constant,nc=cd=Va=0):(Wa=0<D.constant.length?D.constant[0]:0,nc=1<D.constant.length?D.constant[1]:0,cd=2<D.constant.length?D.constant[2]:0,Va=3<D.constant.length?D.constant[3]:
0)):(Ob=ja(D.buffer)?N.createStream(34962,D.buffer):N.getBuffer(D.buffer),qb="type"in D?F[D.type]:Ob.dtype,ib=!!D.normalized,fc=D.size|0,za=D.offset|0,pb=D.stride|0,eb=D.divisor|0);vc=X.location;Ta=K[vc];if(1===Ea){Ta.buffer||r.enableVertexAttribArray(vc);Mb=fc||4;if(Ta.type!==qb||Ta.size!==Mb||Ta.buffer!==Ob||Ta.normalized!==ib||Ta.offset!==za||Ta.stride!==pb)r.bindBuffer(34962,Ob.buffer),r.vertexAttribPointer(vc,Mb,qb,ib,pb,za),Ta.type=qb,Ta.size=Mb,Ta.buffer=Ob,Ta.normalized=ib,Ta.offset=za,Ta.stride=
pb;Ta.divisor!==eb&&(tb.vertexAttribDivisorANGLE(vc,eb),Ta.divisor=eb)}else if(Ta.buffer&&(r.disableVertexAttribArray(vc),Ta.buffer=null),Ta.x!==Wa||Ta.y!==nc||Ta.z!==cd||Ta.w!==Va)r.vertexAttrib4f(vc,Wa,nc,cd,Va),Ta.x=Wa,Ta.y=nc,Ta.z=cd,Ta.w=Va;dd=da.location;Fa=K[dd];Fa.buffer||r.enableVertexAttribArray(dd);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==f||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)r.bindBuffer(34962,f.buffer),r.vertexAttribPointer(dd,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=
f,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(tb.vertexAttribDivisorANGLE(dd,0),Fa.divisor=0);Kc=e.location;Oa=K[Kc];Oa.buffer||r.enableVertexAttribArray(Kc);if(5126!==Oa.type||1!==Oa.size||Oa.buffer!==b||!1!==Oa.normalized||4!==Oa.offset||8!==Oa.stride)r.bindBuffer(34962,b.buffer),r.vertexAttribPointer(Kc,1,5126,!1,8,4),Oa.type=5126,Oa.size=1,Oa.buffer=b,Oa.normalized=!1,Oa.offset=4,Oa.stride=8;0!==Oa.divisor&&(tb.vertexAttribDivisorANGLE(Kc,0),Oa.divisor=0);Ca=a.scale;r.uniform2f(Rb.location,
Ca[0],Ca[1]);lb=a.translate;r.uniform2f(Aa.location,lb[0],lb[1]);r.uniform1f(ta.location,a.thickness);r.uniform1f(Q.location,a.depth);wb=t.call(this,R,a,0);r.uniform4f(Z.location,wb[0],wb[1],wb[2],wb[3]);r.uniform1f(h.location,a.miterLimit);Eb=c.call(this,R,a,0);r.uniform1f(Y.location,Eb);r.uniform1f(n.location,a.dashLength);r.uniform1f(fb.location,a.opacity);(rb=a.dashTexture)&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);wc=rb._texture;r.uniform1i(la.location,wc.bind());(xb=P.elements)?r.bindBuffer(34963,
xb.buffer.buffer):dc.currentVAO&&(xb=Jb.getElements(dc.currentVAO.elements))&&r.bindBuffer(34963,xb.buffer.buffer);Dd=a.count;0<Dd?xb?tb.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),Dd):tb.drawArraysInstancedANGLE(5,0,4,Dd):0>Dd&&(xb?r.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):r.drawArrays(5,0,4));oa.dirty=!0;dc.setVAO(null);R.viewportWidth=B;R.viewportHeight=C;M&&(d.cpuTime+=performance.now()-va);Ha&&N.destroyStream(Ja);gd&&N.destroyStream(Lc);Ab&&N.destroyStream(La);Ub&&N.destroyStream(Ma);
ob&&N.destroyStream(wa);Ka&&N.destroyStream(Ob);wc.unbind()},scope:function(a,c,e){var g,h,k,n,p,q,m,r,w,v,L,E,t,aa,Q,K,O,S,sa,T,W,V,U,ia,X,Z,ha,Y,ga,ua,qc,da,na,Da,$a,la,Fb,ud,Ra,qa,bc,ta,xc,$c,Ac,ec,Fc,Ab,La,ub,Ua,pa,Xb,Cb,Qa,Hb,bb,sc,Sb,Za,ac,Tb,Aa,Ub,Ma,nb,vb,hb,Na,pc,Vb,gb,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,ad,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,Jb,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,fb,uc,dc,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,
Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Zb,Rb,id,Xc,pf,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf,qf,mf,rf,Af,Bf,Me,Ae,nf,of,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf;g=a.viewport;h=g.x|0;k=g.y|0;n="width"in g?g.width|0:R.framebufferWidth-h;p="height"in g?g.height|0:R.framebufferHeight-k;q=R.viewportWidth;R.viewportWidth=n;m=R.viewportHeight;R.viewportHeight=p;
r=fa[0];fa[0]=h;w=fa[1];fa[1]=k;v=fa[2];fa[2]=n;L=fa[3];fa[3]=p;E=Xa[0];Xa[0]=0;t=Xa[1];Xa[1]=0;aa=Xa[2];Xa[2]=0;Q=Xa[3];Xa[3]=0;K=ba.blend_enable;ba.blend_enable=!0;O=sb[0];sb[0]=32774;S=sb[1];sb[1]=32774;sa=va[0];va[0]=770;T=va[1];va[1]=771;W=va[2];va[2]=773;V=va[3];va[3]=1;U=ba.cull_enable;ba.cull_enable=!0;ia=ba.cull_face;ba.cull_face=1029;X=x.call(this,R,a,e);Z=ba.depth_enable;ba.depth_enable=X;ha=a.viewport;Y=ha.x|0;ga=ha.y|0;ua="width"in ha?ha.width|0:R.framebufferWidth-Y;qc="height"in ha?
ha.height|0:R.framebufferHeight-ga;da=tb[0];tb[0]=Y;na=tb[1];tb[1]=ga;Da=tb[2];tb[2]=ua;$a=tb[3];tb[3]=qc;la=ba.scissor_enable;ba.scissor_enable=!0;Fb=ba.stencil_enable;ba.stencil_enable=!1;if(ud=oa.profile)Ra=performance.now(),d.count++;qa=P.offset;P.offset=0;bc=P.count;P.count=4;ta=a.count;xc=P.instances;P.instances=ta;$c=P.primitive;P.primitive=5;Ac=a.dashLength;ec=Ja[23];Ja[23]=Ac;Fc=a.dashTexture;Ab=Ja[24];Ja[24]=Fc;La=a.depth;ub=Ja[22];Ja[22]=La;Ua=a.id;pa=Ja[31];Ja[31]=Ua;Xb=a.miterLimit;Cb=
Ja[32];Ja[32]=Xb;Qa=M.call(this,R,a,e);Hb=Ja[33];Ja[33]=Qa;bb=a.opacity;sc=Ja[10];Ja[10]=bb;Sb=R.pixelRatio;Za=Ja[34];Ja[34]=Sb;ac=a.scale;Tb=Ja[6];Ja[6]=ac;Aa=a.scaleFract;Ub=Ja[7];Ja[7]=Aa;Ma=a.thickness;nb=Ja[21];Ja[21]=Ma;vb=a.translate;hb=Ja[8];Ja[8]=vb;Na=a.translateFract;pc=Ja[9];Ja[9]=Na;Vb=ea.call(this,R,a,e);gb=Ja[3];Ja[3]=Vb;u.buffer=a.colorBuffer;cb=!1;mc=null;Gc=0;oc=!1;kb=jb=0;ra=1;ob=0;wa=5126;db=Ba=ab=Sa=0;ja(u)?(cb=!0,mc=N.createStream(34962,u),wa=mc.dtype):(mc=N.getBuffer(u))?wa=
mc.dtype:"constant"in u?(ra=2,"number"===typeof u.constant?(ab=u.constant,Ba=db=Sa=0):(ab=0<u.constant.length?u.constant[0]:0,Ba=1<u.constant.length?u.constant[1]:0,db=2<u.constant.length?u.constant[2]:0,Sa=3<u.constant.length?u.constant[3]:0)):(mc=ja(u.buffer)?N.createStream(34962,u.buffer):N.getBuffer(u.buffer),wa="type"in u?F[u.type]:mc.dtype,oc=!!u.normalized,kb=u.size|0,jb=u.offset|0,ob=u.stride|0,Gc=u.divisor|0);Ia=H.buffer;H.buffer=mc;Db=H.divisor;H.divisor=Gc;Bb=H.normalized;H.normalized=
oc;Pa=H.offset;H.offset=jb;Jc=H.size;H.size=kb;Kb=H.state;H.state=ra;Ya=H.stride;H.stride=ob;Wb=H.type;H.type=wa;ya=H.w;H.w=Sa;ad=H.x;H.x=ab;Ka=H.y;H.y=Ba;Ob=H.z;H.z=db;ca.buffer=a.positionBuffer;eb=!1;ib=null;za=0;fc=!1;pb=Ea=0;qb=1;Va=0;Wa=5126;Ta=vc=cd=nc=0;ja(ca)?(eb=!0,ib=N.createStream(34962,ca),Wa=ib.dtype):(ib=N.getBuffer(ca))?Wa=ib.dtype:"constant"in ca?(qb=2,"number"===typeof ca.constant?(cd=ca.constant,vc=Ta=nc=0):(cd=0<ca.constant.length?ca.constant[0]:0,vc=1<ca.constant.length?ca.constant[1]:
0,Ta=2<ca.constant.length?ca.constant[2]:0,nc=3<ca.constant.length?ca.constant[3]:0)):(ib=ja(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),Wa="type"in ca?F[ca.type]:ib.dtype,fc=!!ca.normalized,pb=ca.size|0,Ea=ca.offset|0,Va=ca.stride|0,za=ca.divisor|0);Mb=I.buffer;I.buffer=ib;Jb=I.divisor;I.divisor=za;Fa=I.normalized;I.normalized=fc;Kc=I.offset;I.offset=Ea;Oa=I.size;I.size=pb;Ca=I.state;I.state=qb;lb=I.stride;I.stride=Va;wb=I.type;I.type=Wa;Eb=I.w;I.w=nc;rb=I.x;I.x=cd;wc=I.y;I.y=
vc;xb=I.z;I.z=Ta;D.buffer=a.colorBuffer;fb=!1;uc=null;dc=0;Mc=!1;od=nd=0;Yb=1;cc=0;Pb=5126;yb=mb=$b=Ga=0;ja(D)?(fb=!0,uc=N.createStream(34962,D),Pb=uc.dtype):(uc=N.getBuffer(D))?Pb=uc.dtype:"constant"in D?(Yb=2,"number"===typeof D.constant?($b=D.constant,mb=yb=Ga=0):($b=0<D.constant.length?D.constant[0]:0,mb=1<D.constant.length?D.constant[1]:0,yb=2<D.constant.length?D.constant[2]:0,Ga=3<D.constant.length?D.constant[3]:0)):(uc=ja(D.buffer)?N.createStream(34962,D.buffer):N.getBuffer(D.buffer),Pb="type"in
D?F[D.type]:uc.dtype,Mc=!!D.normalized,od=D.size|0,nd=D.offset|0,cc=D.stride|0,dc=D.divisor|0);Nb=y.buffer;y.buffer=uc;Qb=y.divisor;y.divisor=dc;gc=y.normalized;y.normalized=Mc;ic=y.offset;y.offset=nd;Rc=y.size;y.size=od;Bc=y.state;y.state=Yb;Cc=y.stride;y.stride=cc;Dc=y.type;y.type=Pb;Nc=y.w;y.w=Ga;Zc=y.x;y.x=$b;Sc=y.y;y.y=mb;Oc=y.z;y.z=yb;xa.buffer=a.positionBuffer;Lb=!1;Gb=null;Pc=0;Hc=!1;hc=Tc=0;Wc=1;Zb=0;Rb=5126;wd=pf=Xc=id=0;ja(xa)?(Lb=!0,Gb=N.createStream(34962,xa),Rb=Gb.dtype):(Gb=N.getBuffer(xa))?
Rb=Gb.dtype:"constant"in xa?(Wc=2,"number"===typeof xa.constant?(Xc=xa.constant,pf=wd=id=0):(Xc=0<xa.constant.length?xa.constant[0]:0,pf=1<xa.constant.length?xa.constant[1]:0,wd=2<xa.constant.length?xa.constant[2]:0,id=3<xa.constant.length?xa.constant[3]:0)):(Gb=ja(xa.buffer)?N.createStream(34962,xa.buffer):N.getBuffer(xa.buffer),Rb="type"in xa?F[xa.type]:Gb.dtype,Hc=!!xa.normalized,hc=xa.size|0,Tc=xa.offset|0,Zb=xa.stride|0,Pc=xa.divisor|0);ie=A.buffer;A.buffer=Gb;ue=A.divisor;A.divisor=Pc;le=A.normalized;
A.normalized=Hc;Hd=A.offset;A.offset=Tc;Ed=A.size;A.size=hc;fd=A.state;A.state=Wc;Ec=A.stride;A.stride=Zb;pd=A.type;A.type=Rb;hd=A.w;A.w=id;bd=A.x;A.x=Xc;jd=A.y;A.y=pf;zd=A.z;A.z=wd;Bd=C.buffer;C.buffer=f;ve=C.divisor;C.divisor=0;me=C.normalized;C.normalized=!1;xe=C.offset;C.offset=0;ee=C.size;C.size=0;de=C.state;C.state=1;ce=C.stride;C.stride=8;oe=C.type;C.type=5126;ae=C.w;C.w=0;ge=C.x;C.x=0;yc=C.y;C.y=0;Vc=C.z;C.z=0;pe=B.buffer;B.buffer=b;je=B.divisor;B.divisor=0;Fd=B.normalized;B.normalized=!1;
Md=B.offset;B.offset=4;Od=B.size;B.size=0;Pd=B.state;B.state=1;he=B.stride;B.stride=8;Ee=B.type;B.type=5126;ye=B.w;B.w=0;ne=B.x;B.x=0;Ze=B.y;B.y=0;Ne=B.z;B.z=0;ka.buffer=a.positionBuffer;Ke=!1;qe=null;Be=0;Fe=!1;He=Ge=0;Ce=1;Id=0;Td=5126;yd=Ie=be=Zd=0;ja(ka)?(Ke=!0,qe=N.createStream(34962,ka),Td=qe.dtype):(qe=N.getBuffer(ka))?Td=qe.dtype:"constant"in ka?(Ce=2,"number"===typeof ka.constant?(be=ka.constant,Ie=yd=Zd=0):(be=0<ka.constant.length?ka.constant[0]:0,Ie=1<ka.constant.length?ka.constant[1]:
0,yd=2<ka.constant.length?ka.constant[2]:0,Zd=3<ka.constant.length?ka.constant[3]:0)):(qe=ja(ka.buffer)?N.createStream(34962,ka.buffer):N.getBuffer(ka.buffer),Td="type"in ka?F[ka.type]:qe.dtype,Fe=!!ka.normalized,He=ka.size|0,Ge=ka.offset|0,Id=ka.stride|0,Be=ka.divisor|0);Qd=J.buffer;J.buffer=qe;ze=J.divisor;J.divisor=Be;Je=J.normalized;J.normalized=Fe;ef=J.offset;J.offset=Ge;Ye=J.size;J.size=He;Oe=J.state;J.state=Ce;Le=J.stride;J.stride=Id;Xe=J.type;J.type=Td;Te=J.w;J.w=Zd;Pe=J.x;J.x=be;Qe=J.y;J.y=
Ie;Rd=J.z;J.z=yd;l.buffer=a.positionBuffer;Xd=!1;Re=null;ff=0;lf=!1;gf=bf=0;hf=1;jf=0;qf=5126;Bf=Af=rf=mf=0;ja(l)?(Xd=!0,Re=N.createStream(34962,l),qf=Re.dtype):(Re=N.getBuffer(l))?qf=Re.dtype:"constant"in l?(hf=2,"number"===typeof l.constant?(rf=l.constant,Af=Bf=mf=0):(rf=0<l.constant.length?l.constant[0]:0,Af=1<l.constant.length?l.constant[1]:0,Bf=2<l.constant.length?l.constant[2]:0,mf=3<l.constant.length?l.constant[3]:0)):(Re=ja(l.buffer)?N.createStream(34962,l.buffer):N.getBuffer(l.buffer),qf=
"type"in l?F[l.type]:Re.dtype,lf=!!l.normalized,gf=l.size|0,bf=l.offset|0,jf=l.stride|0,ff=l.divisor|0);Me=z.buffer;z.buffer=Re;Ae=z.divisor;z.divisor=ff;nf=z.normalized;z.normalized=lf;of=z.offset;z.offset=bf;Cf=z.size;z.size=gf;Ff=z.state;z.state=hf;zf=z.stride;z.stride=jf;Df=z.type;z.type=qf;Ef=z.w;z.w=mf;vf=z.x;z.x=rf;wf=z.y;z.y=Af;uf=z.z;z.z=Bf;xf=Ha.vert;Ha.vert=36;yf=Ha.frag;Ha.frag=35;oa.dirty=!0;c(R,a,e);R.viewportWidth=q;R.viewportHeight=m;fa[0]=r;fa[1]=w;fa[2]=v;fa[3]=L;Xa[0]=E;Xa[1]=t;
Xa[2]=aa;Xa[3]=Q;ba.blend_enable=K;sb[0]=O;sb[1]=S;va[0]=sa;va[1]=T;va[2]=W;va[3]=V;ba.cull_enable=U;ba.cull_face=ia;ba.depth_enable=Z;tb[0]=da;tb[1]=na;tb[2]=Da;tb[3]=$a;ba.scissor_enable=la;ba.stencil_enable=Fb;ud&&(d.cpuTime+=performance.now()-Ra);P.offset=qa;P.count=bc;P.instances=xc;P.primitive=$c;Ja[23]=ec;Ja[24]=Ab;Ja[22]=ub;Ja[31]=pa;Ja[32]=Cb;Ja[33]=Hb;Ja[10]=sc;Ja[34]=Za;Ja[6]=Tb;Ja[7]=Ub;Ja[21]=nb;Ja[8]=hb;Ja[9]=pc;Ja[3]=gb;cb&&N.destroyStream(mc);H.buffer=Ia;H.divisor=Db;H.normalized=
Bb;H.offset=Pa;H.size=Jc;H.state=Kb;H.stride=Ya;H.type=Wb;H.w=ya;H.x=ad;H.y=Ka;H.z=Ob;eb&&N.destroyStream(ib);I.buffer=Mb;I.divisor=Jb;I.normalized=Fa;I.offset=Kc;I.size=Oa;I.state=Ca;I.stride=lb;I.type=wb;I.w=Eb;I.x=rb;I.y=wc;I.z=xb;fb&&N.destroyStream(uc);y.buffer=Nb;y.divisor=Qb;y.normalized=gc;y.offset=ic;y.size=Rc;y.state=Bc;y.stride=Cc;y.type=Dc;y.w=Nc;y.x=Zc;y.y=Sc;y.z=Oc;Lb&&N.destroyStream(Gb);A.buffer=ie;A.divisor=ue;A.normalized=le;A.offset=Hd;A.size=Ed;A.state=fd;A.stride=Ec;A.type=pd;
A.w=hd;A.x=bd;A.y=jd;A.z=zd;C.buffer=Bd;C.divisor=ve;C.normalized=me;C.offset=xe;C.size=ee;C.state=de;C.stride=ce;C.type=oe;C.w=ae;C.x=ge;C.y=yc;C.z=Vc;B.buffer=pe;B.divisor=je;B.normalized=Fd;B.offset=Md;B.size=Od;B.state=Pd;B.stride=he;B.type=Ee;B.w=ye;B.x=ne;B.y=Ze;B.z=Ne;Ke&&N.destroyStream(qe);J.buffer=Qd;J.divisor=ze;J.normalized=Je;J.offset=ef;J.size=Ye;J.state=Oe;J.stride=Le;J.type=Xe;J.w=Te;J.x=Pe;J.y=Qe;J.z=Rd;Xd&&N.destroyStream(Re);z.buffer=Me;z.divisor=Ae;z.normalized=nf;z.offset=of;
z.size=Cf;z.state=Ff;z.stride=zf;z.type=Df;z.w=Ef;z.x=vf;z.y=wf;z.z=uf;Ha.vert=xf;Ha.frag=yf;oa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,d,k,m,f,b,t,c,x,M,ea,H,I,y,A,C,B,J,z){var O,Zb,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va;O=a.attributes;Zb=a.buffer;p=a.context;g=a.current;q=a.draw;S=a.elements;X=a.extensions;U=a.framebuffer;n=a.gl;la=a.isBufferArgs;Q=a.next;da=a.shader;
e=a.uniforms;h=a.vao;Y=Q.blend_color;qa=g.blend_color;fb=Q.blend_equation;gb=g.blend_equation;Rb=Q.blend_func;ta=g.blend_func;Aa=Q.colorMask;Z=g.colorMask;K=Q.depth_range;N=g.depth_range;R=Q.polygonOffset_offset;oa=g.polygonOffset_offset;P=Q.sample_coverage;Jb=g.sample_coverage;Za=Q.scissor_box;T=g.scissor_box;r=Q.stencil_func;ja=g.stencil_func;ba=Q.stencil_opBack;Ha=g.stencil_opBack;Ja=Q.stencil_opFront;dc=g.stencil_opFront;Xa=Q.viewport;W=g.viewport;sb={int8:5120,int16:5122,int32:5124,uint8:5121,
uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:8,stride:8};va={offset:8,stride:8};return{batch:function(a,b){var c,e,f,k,m,w;c=U.next;c!==U.cur&&(c?n.bindFramebuffer(36160,c.framebuffer):n.bindFramebuffer(36160,null),U.cur=c);if(g.dirty){var t,Y,sa,da,E,v,ha,ua,V,fa,na,F,u,ca,D,xa,ka,l,kc,ma,G,Ib,zb,Xa,Za,fb,Rb,Kd,re,td,fe,we;t=Q.dither;t!==g.dither&&(t?n.enable(3024):n.disable(3024),g.dither=t);Y=Q.depth_func;Y!==g.depth_func&&(n.depthFunc(Y),g.depth_func=Y);sa=K[0];da=K[1];if(sa!==
N[0]||da!==N[1])n.depthRange(sa,da),N[0]=sa,N[1]=da;E=Q.depth_mask;E!==g.depth_mask&&(n.depthMask(E),g.depth_mask=E);v=Aa[0];ha=Aa[1];ua=Aa[2];V=Aa[3];if(v!==Z[0]||ha!==Z[1]||ua!==Z[2]||V!==Z[3])n.colorMask(v,ha,ua,V),Z[0]=v,Z[1]=ha,Z[2]=ua,Z[3]=V;fa=Q.cull_enable;fa!==g.cull_enable&&(fa?n.enable(2884):n.disable(2884),g.cull_enable=fa);na=Q.cull_face;na!==g.cull_face&&(n.cullFace(na),g.cull_face=na);F=Q.frontFace;F!==g.frontFace&&(n.frontFace(F),g.frontFace=F);u=Q.lineWidth;u!==g.lineWidth&&(n.lineWidth(u),
g.lineWidth=u);ca=Q.polygonOffset_enable;ca!==g.polygonOffset_enable&&(ca?n.enable(32823):n.disable(32823),g.polygonOffset_enable=ca);D=R[0];xa=R[1];if(D!==oa[0]||xa!==oa[1])n.polygonOffset(D,xa),oa[0]=D,oa[1]=xa;ka=Q.sample_alpha;ka!==g.sample_alpha&&(ka?n.enable(32926):n.disable(32926),g.sample_alpha=ka);l=Q.sample_enable;l!==g.sample_enable&&(l?n.enable(32928):n.disable(32928),g.sample_enable=l);kc=P[0];ma=P[1];if(kc!==Jb[0]||ma!==Jb[1])n.sampleCoverage(kc,ma),Jb[0]=kc,Jb[1]=ma;G=Q.stencil_mask;
G!==g.stencil_mask&&(n.stencilMask(G),g.stencil_mask=G);Ib=r[0];zb=r[1];Xa=r[2];if(Ib!==ja[0]||zb!==ja[1]||Xa!==ja[2])n.stencilFunc(Ib,zb,Xa),ja[0]=Ib,ja[1]=zb,ja[2]=Xa;Za=Ja[0];fb=Ja[1];Rb=Ja[2];Kd=Ja[3];if(Za!==dc[0]||fb!==dc[1]||Rb!==dc[2]||Kd!==dc[3])n.stencilOpSeparate(Za,fb,Rb,Kd),dc[0]=Za,dc[1]=fb,dc[2]=Rb,dc[3]=Kd;re=ba[0];td=ba[1];fe=ba[2];we=ba[3];if(re!==Ha[0]||td!==Ha[1]||fe!==Ha[2]||we!==Ha[3])n.stencilOpSeparate(re,td,fe,we),Ha[0]=re,Ha[1]=td,Ha[2]=fe,Ha[3]=we}n.blendColor(0,0,0,0);
qa[0]=0;qa[1]=0;qa[2]=0;qa[3]=0;n.enable(3042);g.blend_enable=!0;n.blendEquationSeparate(32774,32774);gb[0]=32774;gb[1]=32774;n.blendFuncSeparate(770,771,773,1);ta[0]=770;ta[1]=771;ta[2]=773;ta[3]=1;n.disable(2929);g.depth_enable=!1;n.enable(3089);g.scissor_enable=!0;n.disable(2960);g.stencil_enable=!1;if(e=g.profile)f=performance.now(),d.count+=b;n.useProgram(x.program);k=X.angle_instanced_arrays;var Gd;h.setVAO(null);Gd=q.instances;for(m=0;m<b;++m){w=a[m];var kd,$d,Nd,Se,kf,Ve,Cd,De,Ud,Vd,Ld,Yd,
rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,Gf,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb;kd=w.viewport;$d=kd.x|0;Nd=kd.y|0;Se="width"in kd?kd.width|0:p.framebufferWidth-$d;kf="height"in kd?kd.height|0:p.framebufferHeight-Nd;Ve=p.viewportWidth;p.viewportWidth=Se;Cd=p.viewportHeight;p.viewportHeight=kf;n.viewport($d,Nd,Se,kf);W[0]=$d;W[1]=Nd;W[2]=Se;W[3]=kf;De=w.viewport;Ud=De.x|0;Vd=
De.y|0;Ld="width"in De?De.width|0:p.framebufferWidth-Ud;Yd="height"in De?De.height|0:p.framebufferHeight-Vd;n.scissor(Ud,Vd,Ld,Yd);T[0]=Ud;T[1]=Vd;T[2]=Ld;T[3]=Yd;ga.buffer=w.positionBuffer;rd=!1;ld=null;xd=0;qd=!1;zc=ed=0;sd=1;gd=0;Lc=5126;Fb=lc=$a=tc=0;la(ga)?(rd=!0,ld=Zb.createStream(34962,ga),Lc=ld.dtype):(ld=Zb.getBuffer(ga))?Lc=ld.dtype:"constant"in ga?(sd=2,"number"===typeof ga.constant?($a=ga.constant,lc=Fb=tc=0):($a=0<ga.constant.length?ga.constant[0]:0,lc=1<ga.constant.length?ga.constant[1]:
0,Fb=2<ga.constant.length?ga.constant[2]:0,tc=3<ga.constant.length?ga.constant[3]:0)):(ld=la(ga.buffer)?Zb.createStream(34962,ga.buffer):Zb.getBuffer(ga.buffer),Lc="type"in ga?sb[ga.type]:ld.dtype,qd=!!ga.normalized,zc=ga.size|0,ed=ga.offset|0,gd=ga.stride|0,xd=ga.divisor|0);rc=y.location;Ra=O[rc];if(1===sd){Ra.buffer||n.enableVertexAttribArray(rc);Ic=zc||2;if(Ra.type!==Lc||Ra.size!==Ic||Ra.buffer!==ld||Ra.normalized!==qd||Ra.offset!==ed||Ra.stride!==gd)n.bindBuffer(34962,ld.buffer),n.vertexAttribPointer(rc,
Ic,Lc,qd,gd,ed),Ra.type=Lc,Ra.size=Ic,Ra.buffer=ld,Ra.normalized=qd,Ra.offset=ed,Ra.stride=gd;Ra.divisor!==xd&&(k.vertexAttribDivisorANGLE(rc,xd),Ra.divisor=xd)}else if(Ra.buffer&&(n.disableVertexAttribArray(rc),Ra.buffer=null),Ra.x!==$a||Ra.y!==lc||Ra.z!==Fb||Ra.w!==tc)n.vertexAttrib4f(rc,$a,lc,Fb,tc),Ra.x=$a,Ra.y=lc,Ra.z=Fb,Ra.w=tc;va.buffer=w.positionFractBuffer;bc=!1;Yc=null;Sd=0;md=!1;ec=Ac=0;Fc=1;Ab=0;La=5126;vd=pa=Ua=ub=0;la(va)?(bc=!0,Yc=Zb.createStream(34962,va),La=Yc.dtype):(Yc=Zb.getBuffer(va))?
La=Yc.dtype:"constant"in va?(Fc=2,"number"===typeof va.constant?(Ua=va.constant,pa=vd=ub=0):(Ua=0<va.constant.length?va.constant[0]:0,pa=1<va.constant.length?va.constant[1]:0,vd=2<va.constant.length?va.constant[2]:0,ub=3<va.constant.length?va.constant[3]:0)):(Yc=la(va.buffer)?Zb.createStream(34962,va.buffer):Zb.getBuffer(va.buffer),La="type"in va?sb[va.type]:Yc.dtype,md=!!va.normalized,ec=va.size|0,Ac=va.offset|0,Ab=va.stride|0,Sd=va.divisor|0);Cb=A.location;Qa=O[Cb];if(1===Fc){Qa.buffer||n.enableVertexAttribArray(Cb);
Hb=ec||2;if(Qa.type!==La||Qa.size!==Hb||Qa.buffer!==Yc||Qa.normalized!==md||Qa.offset!==Ac||Qa.stride!==Ab)n.bindBuffer(34962,Yc.buffer),n.vertexAttribPointer(Cb,Hb,La,md,Ab,Ac),Qa.type=La,Qa.size=Hb,Qa.buffer=Yc,Qa.normalized=md,Qa.offset=Ac,Qa.stride=Ab;Qa.divisor!==Sd&&(k.vertexAttribDivisorANGLE(Cb,Sd),Qa.divisor=Sd)}else if(Qa.buffer&&(n.disableVertexAttribArray(Cb),Qa.buffer=null),Qa.x!==Ua||Qa.y!==pa||Qa.z!==vd||Qa.w!==ub)n.vertexAttrib4f(Cb,Ua,pa,vd,ub),Qa.x=Ua,Qa.y=pa,Qa.z=vd,Qa.w=ub;bb=
w.fill;Qc=bb[0];Gf=bb[1];Tb=bb[2];Ub=bb[3];m&&Sb===Qc&&ac===Gf&&Ad===Tb&&Ma===Ub||(Sb=Qc,ac=Gf,Ad=Tb,Ma=Ub,n.uniform4f(ea.location,Qc,Gf,Tb,Ub));nb=w.scale;vb=nb[0];Na=nb[1];m&&hb===vb&&pc===Na||(hb=vb,pc=Na,n.uniform2f(C.location,vb,Na));Vb=w.scaleFract;Uc=Vb[0];mc=Vb[1];m&&cb===Uc&&Gc===mc||(cb=Uc,Gc=mc,n.uniform2f(B.location,Uc,mc));oc=w.translate;jb=oc[0];ra=oc[1];m&&kb===jb&&ob===ra||(kb=jb,ob=ra,n.uniform2f(J.location,jb,ra));wa=w.translateFract;Sa=wa[0];Ba=wa[1];m&&ab===Sa&&db===Ba||(ab=Sa,
db=Ba,n.uniform2f(z.location,Sa,Ba));Ia=w.id;m&&Db===Ia||(Db=Ia,n.uniform1f(H.location,Ia));Bb=w.opacity;m&&Pa===Bb||(Pa=Bb,n.uniform1f(I.location,Bb));Jc=M.call(this,p,w,m);Kb=null;(Kb=(Ya=la(Jc))?S.createStream(Jc):S.getElements(Jc))&&n.bindBuffer(34963,Kb.buffer.buffer);if(Wb=Kb?Kb.vertCount:-1)0<Gd?Kb?k.drawElementsInstancedANGLE(4,Wb,Kb.type,0<<(Kb.type-5121>>1),Gd):k.drawArraysInstancedANGLE(4,0,Wb,Gd):0>Gd&&(Kb?n.drawElements(4,Wb,Kb.type,0<<(Kb.type-5121>>1)):n.drawArrays(4,0,Wb)),p.viewportWidth=
Ve,p.viewportHeight=Cd,rd&&Zb.destroyStream(ld),bc&&Zb.destroyStream(Yc),Ya&&S.destroyStream(Kb)}g.dirty=!0;h.setVAO(null);e&&(d.cpuTime+=performance.now()-f)},draw:function(a){var b,c,e,f,x,t,ia,Y,sa,M,da,E,v,ha,ua,V,fa,na,F,u,ca,D;b=U.next;b!==U.cur&&(b?n.bindFramebuffer(36160,b.framebuffer):n.bindFramebuffer(36160,null),U.cur=b);if(g.dirty){b=Q.dither;b!==g.dither&&(b?n.enable(3024):n.disable(3024),g.dither=b);b=Q.depth_func;b!==g.depth_func&&(n.depthFunc(b),g.depth_func=b);b=K[0];t=K[1];if(b!==
N[0]||t!==N[1])n.depthRange(b,t),N[0]=b,N[1]=t;b=Q.depth_mask;b!==g.depth_mask&&(n.depthMask(b),g.depth_mask=b);b=Aa[0];t=Aa[1];c=Aa[2];e=Aa[3];if(b!==Z[0]||t!==Z[1]||c!==Z[2]||e!==Z[3])n.colorMask(b,t,c,e),Z[0]=b,Z[1]=t,Z[2]=c,Z[3]=e;b=Q.cull_enable;b!==g.cull_enable&&(b?n.enable(2884):n.disable(2884),g.cull_enable=b);b=Q.cull_face;b!==g.cull_face&&(n.cullFace(b),g.cull_face=b);b=Q.frontFace;b!==g.frontFace&&(n.frontFace(b),g.frontFace=b);b=Q.lineWidth;b!==g.lineWidth&&(n.lineWidth(b),g.lineWidth=
b);b=Q.polygonOffset_enable;b!==g.polygonOffset_enable&&(b?n.enable(32823):n.disable(32823),g.polygonOffset_enable=b);b=R[0];t=R[1];if(b!==oa[0]||t!==oa[1])n.polygonOffset(b,t),oa[0]=b,oa[1]=t;b=Q.sample_alpha;b!==g.sample_alpha&&(b?n.enable(32926):n.disable(32926),g.sample_alpha=b);b=Q.sample_enable;b!==g.sample_enable&&(b?n.enable(32928):n.disable(32928),g.sample_enable=b);b=P[0];t=P[1];if(b!==Jb[0]||t!==Jb[1])n.sampleCoverage(b,t),Jb[0]=b,Jb[1]=t;b=Q.stencil_mask;b!==g.stencil_mask&&(n.stencilMask(b),
g.stencil_mask=b);b=r[0];t=r[1];c=r[2];if(b!==ja[0]||t!==ja[1]||c!==ja[2])n.stencilFunc(b,t,c),ja[0]=b,ja[1]=t,ja[2]=c;b=Ja[0];t=Ja[1];c=Ja[2];e=Ja[3];if(b!==dc[0]||t!==dc[1]||c!==dc[2]||e!==dc[3])n.stencilOpSeparate(b,t,c,e),dc[0]=b,dc[1]=t,dc[2]=c,dc[3]=e;b=ba[0];t=ba[1];c=ba[2];e=ba[3];if(b!==Ha[0]||t!==Ha[1]||c!==Ha[2]||e!==Ha[3])n.stencilOpSeparate(b,t,c,e),Ha[0]=b,Ha[1]=t,Ha[2]=c,Ha[3]=e}b=a.viewport;c=b.x|0;e=b.y|0;f="width"in b?b.width|0:p.framebufferWidth-c;x="height"in b?b.height|0:p.framebufferHeight-
e;b=p.viewportWidth;p.viewportWidth=f;t=p.viewportHeight;p.viewportHeight=x;n.viewport(c,e,f,x);W[0]=c;W[1]=e;W[2]=f;W[3]=x;n.blendColor(0,0,0,0);qa[0]=0;qa[1]=0;qa[2]=0;qa[3]=0;n.enable(3042);g.blend_enable=!0;n.blendEquationSeparate(32774,32774);gb[0]=32774;gb[1]=32774;n.blendFuncSeparate(770,771,773,1);ta[0]=770;ta[1]=771;ta[2]=773;ta[3]=1;n.disable(2929);g.depth_enable=!1;x=a.viewport;c=x.x|0;e=x.y|0;f="width"in x?x.width|0:p.framebufferWidth-c;x="height"in x?x.height|0:p.framebufferHeight-e;
n.scissor(c,e,f,x);T[0]=c;T[1]=e;T[2]=f;T[3]=x;n.enable(3089);g.scissor_enable=!0;n.disable(2960);g.stencil_enable=!1;if(c=g.profile)ia=performance.now(),d.count++;n.useProgram(k.program);e=X.angle_instanced_arrays;h.setVAO(null);ga.buffer=a.positionBuffer;f=!1;Y=0;sa=!1;da=M=0;E=1;v=0;ha=5126;na=fa=V=ua=0;la(ga)?(f=!0,x=Zb.createStream(34962,ga),ha=x.dtype):(x=Zb.getBuffer(ga))?ha=x.dtype:"constant"in ga?(E=2,"number"===typeof ga.constant?(V=ga.constant,fa=na=ua=0):(V=0<ga.constant.length?ga.constant[0]:
0,fa=1<ga.constant.length?ga.constant[1]:0,na=2<ga.constant.length?ga.constant[2]:0,ua=3<ga.constant.length?ga.constant[3]:0)):(x=la(ga.buffer)?Zb.createStream(34962,ga.buffer):Zb.getBuffer(ga.buffer),ha="type"in ga?sb[ga.type]:x.dtype,sa=!!ga.normalized,da=ga.size|0,M=ga.offset|0,v=ga.stride|0,Y=ga.divisor|0);F=y.location;u=O[F];if(1===E){u.buffer||n.enableVertexAttribArray(F);da=da||2;if(u.type!==ha||u.size!==da||u.buffer!==x||u.normalized!==sa||u.offset!==M||u.stride!==v)n.bindBuffer(34962,x.buffer),
n.vertexAttribPointer(F,da,ha,sa,v,M),u.type=ha,u.size=da,u.buffer=x,u.normalized=sa,u.offset=M,u.stride=v;u.divisor!==Y&&(e.vertexAttribDivisorANGLE(F,Y),u.divisor=Y)}else if(u.buffer&&(n.disableVertexAttribArray(F),u.buffer=null),u.x!==V||u.y!==fa||u.z!==na||u.w!==ua)n.vertexAttrib4f(F,V,fa,na,ua),u.x=V,u.y=fa,u.z=na,u.w=ua;va.buffer=a.positionFractBuffer;Y=!1;M=0;v=!1;ua=ha=0;V=1;F=0;u=5126;D=ca=na=fa=0;la(va)?(Y=!0,sa=Zb.createStream(34962,va),u=sa.dtype):(sa=Zb.getBuffer(va))?u=sa.dtype:"constant"in
va?(V=2,"number"===typeof va.constant?(na=va.constant,ca=D=fa=0):(na=0<va.constant.length?va.constant[0]:0,ca=1<va.constant.length?va.constant[1]:0,D=2<va.constant.length?va.constant[2]:0,fa=3<va.constant.length?va.constant[3]:0)):(sa=la(va.buffer)?Zb.createStream(34962,va.buffer):Zb.getBuffer(va.buffer),u="type"in va?sb[va.type]:sa.dtype,v=!!va.normalized,ua=va.size|0,ha=va.offset|0,F=va.stride|0,M=va.divisor|0);da=A.location;E=O[da];if(1===V){E.buffer||n.enableVertexAttribArray(da);ua=ua||2;if(E.type!==
u||E.size!==ua||E.buffer!==sa||E.normalized!==v||E.offset!==ha||E.stride!==F)n.bindBuffer(34962,sa.buffer),n.vertexAttribPointer(da,ua,u,v,F,ha),E.type=u,E.size=ua,E.buffer=sa,E.normalized=v,E.offset=ha,E.stride=F;E.divisor!==M&&(e.vertexAttribDivisorANGLE(da,M),E.divisor=M)}else if(E.buffer&&(n.disableVertexAttribArray(da),E.buffer=null),E.x!==na||E.y!==ca||E.z!==D||E.w!==fa)n.vertexAttrib4f(da,na,ca,D,fa),E.x=na,E.y=ca,E.z=D,E.w=fa;M=a.fill;n.uniform4f(ea.location,M[0],M[1],M[2],M[3]);M=a.scale;
n.uniform2f(C.location,M[0],M[1]);M=a.scaleFract;n.uniform2f(B.location,M[0],M[1]);M=a.translate;n.uniform2f(J.location,M[0],M[1]);M=a.translateFract;n.uniform2f(z.location,M[0],M[1]);n.uniform1f(H.location,a.id);n.uniform1f(I.location,a.opacity);M=m.call(this,p,a,0);(M=(a=la(M))?S.createStream(M):S.getElements(M))&&n.bindBuffer(34963,M.buffer.buffer);if(v=M?M.vertCount:-1)ha=q.instances,0<ha?M?e.drawElementsInstancedANGLE(4,v,M.type,0<<(M.type-5121>>1),ha):e.drawArraysInstancedANGLE(4,0,v,ha):0>
ha&&(M?n.drawElements(4,v,M.type,0<<(M.type-5121>>1)):n.drawArrays(4,0,v)),g.dirty=!0,h.setVAO(null),p.viewportWidth=b,p.viewportHeight=t,c&&(d.cpuTime+=performance.now()-ia),f&&Zb.destroyStream(x),Y&&Zb.destroyStream(sa),a&&S.destroyStream(M)},scope:function(a,h,k){var n,m,w,r,x,y,z,A,B,E,v,C,N,H,I,J,F,u,ca,D,K,O,l,P,T,G,R,W,M,U,X,Z,ea,ba,ja,oa,qa,ta,Ja,Ha,Nd,Aa,jc,gb,Jb,dc,Ud,Vd,Ld,Yd,rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,Gf,ac,
Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb;n=a.viewport;m=n.x|0;w=n.y|0;r="width"in n?n.width|0:p.framebufferWidth-m;x="height"in n?n.height|0:p.framebufferHeight-w;y=p.viewportWidth;p.viewportWidth=r;z=p.viewportHeight;p.viewportHeight=x;A=Xa[0];Xa[0]=m;B=Xa[1];Xa[1]=w;E=Xa[2];Xa[2]=r;v=Xa[3];Xa[3]=x;C=Y[0];Y[0]=0;N=Y[1];Y[1]=0;H=Y[2];Y[2]=0;I=Y[3];Y[3]=0;J=Q.blend_enable;Q.blend_enable=!0;F=fb[0];fb[0]=32774;u=fb[1];fb[1]=32774;ca=Rb[0];Rb[0]=770;D=Rb[1];Rb[1]=
771;K=Rb[2];Rb[2]=773;O=Rb[3];Rb[3]=1;l=Q.depth_enable;Q.depth_enable=!1;P=a.viewport;T=P.x|0;G=P.y|0;R="width"in P?P.width|0:p.framebufferWidth-T;W="height"in P?P.height|0:p.framebufferHeight-G;M=Za[0];Za[0]=T;U=Za[1];Za[1]=G;X=Za[2];Za[2]=R;Z=Za[3];Za[3]=W;ea=Q.scissor_enable;Q.scissor_enable=!0;ba=Q.stencil_enable;Q.stencil_enable=!1;if(ja=g.profile)oa=performance.now(),d.count++;qa=f.call(this,p,a,k);ta=null;ta=(Ja=la(qa))?S.createStream(qa):S.getElements(qa);Ha=q.elements;q.elements=ta;Nd=q.offset;
q.offset=0;Aa=ta?ta.vertCount:-1;jc=q.count;q.count=Aa;gb=q.primitive;q.primitive=4;Jb=a.fill;dc=e[14];e[14]=Jb;Ud=a.id;Vd=e[31];e[31]=Ud;Ld=a.opacity;Yd=e[10];e[10]=Ld;rd=p.pixelRatio;ld=e[34];e[34]=rd;xd=a.scale;qd=e[6];e[6]=xd;ed=a.scaleFract;zc=e[7];e[7]=ed;sd=a.translate;gd=e[8];e[8]=sd;Lc=a.translateFract;tc=e[9];e[9]=Lc;$a=b.call(this,p,a,k);lc=e[3];e[3]=$a;ga.buffer=a.positionBuffer;Fb=!1;rc=null;Ra=0;Ic=!1;Yc=bc=0;Sd=1;md=0;Ac=5126;La=Ab=Fc=ec=0;la(ga)?(Fb=!0,rc=Zb.createStream(34962,ga),
Ac=rc.dtype):(rc=Zb.getBuffer(ga))?Ac=rc.dtype:"constant"in ga?(Sd=2,"number"===typeof ga.constant?(Fc=ga.constant,Ab=La=ec=0):(Fc=0<ga.constant.length?ga.constant[0]:0,Ab=1<ga.constant.length?ga.constant[1]:0,La=2<ga.constant.length?ga.constant[2]:0,ec=3<ga.constant.length?ga.constant[3]:0)):(rc=la(ga.buffer)?Zb.createStream(34962,ga.buffer):Zb.getBuffer(ga.buffer),Ac="type"in ga?sb[ga.type]:rc.dtype,Ic=!!ga.normalized,Yc=ga.size|0,bc=ga.offset|0,md=ga.stride|0,Ra=ga.divisor|0);ub=t.buffer;t.buffer=
rc;Ua=t.divisor;t.divisor=Ra;pa=t.normalized;t.normalized=Ic;vd=t.offset;t.offset=bc;Cb=t.size;t.size=Yc;Qa=t.state;t.state=Sd;Hb=t.stride;t.stride=md;bb=t.type;t.type=Ac;Qc=t.w;t.w=ec;Sb=t.x;t.x=Fc;Gf=t.y;t.y=Ab;ac=t.z;t.z=La;va.buffer=a.positionFractBuffer;Tb=!1;Ad=null;Ub=0;Ma=!1;vb=nb=0;hb=1;Na=0;pc=5126;mc=cb=Uc=Vb=0;la(va)?(Tb=!0,Ad=Zb.createStream(34962,va),pc=Ad.dtype):(Ad=Zb.getBuffer(va))?pc=Ad.dtype:"constant"in va?(hb=2,"number"===typeof va.constant?(Uc=va.constant,cb=mc=Vb=0):(Uc=0<va.constant.length?
va.constant[0]:0,cb=1<va.constant.length?va.constant[1]:0,mc=2<va.constant.length?va.constant[2]:0,Vb=3<va.constant.length?va.constant[3]:0)):(Ad=la(va.buffer)?Zb.createStream(34962,va.buffer):Zb.getBuffer(va.buffer),pc="type"in va?sb[va.type]:Ad.dtype,Ma=!!va.normalized,vb=va.size|0,nb=va.offset|0,Na=va.stride|0,Ub=va.divisor|0);Gc=c.buffer;c.buffer=Ad;oc=c.divisor;c.divisor=Ub;jb=c.normalized;c.normalized=Ma;kb=c.offset;c.offset=nb;ra=c.size;c.size=vb;ob=c.state;c.state=hb;wa=c.stride;c.stride=
Na;Sa=c.type;c.type=pc;ab=c.w;c.w=Vb;Ba=c.x;c.x=Uc;db=c.y;c.y=cb;Ia=c.z;c.z=mc;Db=da.vert;da.vert=42;Bb=da.frag;da.frag=41;g.dirty=!0;h(p,a,k);p.viewportWidth=y;p.viewportHeight=z;Xa[0]=A;Xa[1]=B;Xa[2]=E;Xa[3]=v;Y[0]=C;Y[1]=N;Y[2]=H;Y[3]=I;Q.blend_enable=J;fb[0]=F;fb[1]=u;Rb[0]=ca;Rb[1]=D;Rb[2]=K;Rb[3]=O;Q.depth_enable=l;Za[0]=M;Za[1]=U;Za[2]=X;Za[3]=Z;Q.scissor_enable=ea;Q.stencil_enable=ba;ja&&(d.cpuTime+=performance.now()-oa);Ja&&S.destroyStream(ta);q.elements=Ha;q.offset=Nd;q.count=jc;q.primitive=
gb;e[14]=dc;e[31]=Vd;e[10]=Yd;e[34]=ld;e[6]=qd;e[7]=zc;e[8]=gd;e[9]=tc;e[3]=lc;Fb&&Zb.destroyStream(rc);t.buffer=ub;t.divisor=Ua;t.normalized=pa;t.offset=vd;t.size=Cb;t.state=Qa;t.stride=Hb;t.type=bb;t.w=Qc;t.x=Sb;t.y=Gf;t.z=ac;Tb&&Zb.destroyStream(Ad);c.buffer=Gc;c.divisor=oc;c.normalized=jb;c.offset=kb;c.size=ra;c.state=ob;c.stride=wa;c.type=Sa;c.w=ab;c.x=Ba;c.y=db;c.z=Ia;da.vert=Db;da.frag=Bb;g.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
d,k,m,f,b,t,c,x,M,ea,H,I,y,A,C,B,J,z,O,Zb,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va,Xb,qc,sc,ud,xc){var aa,L,ia,Da,tb,$c,ad,E,v,ha,ua,V,fa,na,F,u,ca,D,xa,ka,l,kc,ma,G,Ib,zb,Ue,se,te,ke,Kd,re,td,fe,we,Gd,kd,$d,Nd;aa=a.attributes;L=a.buffer;ia=a.context;Da=a.current;tb=a.draw;$c=a.elements;ad=a.extensions;E=a.framebuffer;v=a.gl;ha=a.isBufferArgs;ua=a.next;V=a.shader;fa=a.uniforms;na=a.vao;F=ua.blend_color;u=Da.blend_color;ca=ua.blend_equation;
D=Da.blend_equation;xa=ua.blend_func;ka=Da.blend_func;l=ua.colorMask;kc=Da.colorMask;ma=ua.depth_range;G=Da.depth_range;Ib=ua.polygonOffset_offset;zb=Da.polygonOffset_offset;Ue=ua.sample_coverage;se=Da.sample_coverage;te=ua.scissor_box;ke=Da.scissor_box;Kd=ua.stencil_func;re=Da.stencil_func;td=ua.stencil_opBack;fe=Da.stencil_opBack;we=ua.stencil_opFront;Gd=Da.stencil_opFront;kd=ua.viewport;$d=Da.viewport;Nd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};
return{batch:function(a,b){var c,e,f,g,h,k;c=E.next;c!==E.cur&&(c?v.bindFramebuffer(36160,c.framebuffer):v.bindFramebuffer(36160,null),E.cur=c);if(Da.dirty){var n,p,q,m,w,x,t,y,z,A,B,F,C,H,I,Q,J,O,S,M,U,V,fa,sa,X,Y,ea,da,pa,xa,la,Qa,Hb,bb;n=ua.dither;n!==Da.dither&&(n?v.enable(3024):v.disable(3024),Da.dither=n);p=ca[0];q=ca[1];if(p!==D[0]||q!==D[1])v.blendEquationSeparate(p,q),D[0]=p,D[1]=q;m=ua.depth_func;m!==Da.depth_func&&(v.depthFunc(m),Da.depth_func=m);w=ma[0];x=ma[1];if(w!==G[0]||x!==G[1])v.depthRange(w,
x),G[0]=w,G[1]=x;t=ua.depth_mask;t!==Da.depth_mask&&(v.depthMask(t),Da.depth_mask=t);y=l[0];z=l[1];A=l[2];B=l[3];if(y!==kc[0]||z!==kc[1]||A!==kc[2]||B!==kc[3])v.colorMask(y,z,A,B),kc[0]=y,kc[1]=z,kc[2]=A,kc[3]=B;F=ua.cull_enable;F!==Da.cull_enable&&(F?v.enable(2884):v.disable(2884),Da.cull_enable=F);C=ua.cull_face;C!==Da.cull_face&&(v.cullFace(C),Da.cull_face=C);H=ua.frontFace;H!==Da.frontFace&&(v.frontFace(H),Da.frontFace=H);I=ua.lineWidth;I!==Da.lineWidth&&(v.lineWidth(I),Da.lineWidth=I);Q=ua.polygonOffset_enable;
Q!==Da.polygonOffset_enable&&(Q?v.enable(32823):v.disable(32823),Da.polygonOffset_enable=Q);J=Ib[0];O=Ib[1];if(J!==zb[0]||O!==zb[1])v.polygonOffset(J,O),zb[0]=J,zb[1]=O;S=ua.sample_alpha;S!==Da.sample_alpha&&(S?v.enable(32926):v.disable(32926),Da.sample_alpha=S);M=ua.sample_enable;M!==Da.sample_enable&&(M?v.enable(32928):v.disable(32928),Da.sample_enable=M);U=Ue[0];V=Ue[1];if(U!==se[0]||V!==se[1])v.sampleCoverage(U,V),se[0]=U,se[1]=V;fa=ua.stencil_mask;fa!==Da.stencil_mask&&(v.stencilMask(fa),Da.stencil_mask=
fa);sa=Kd[0];X=Kd[1];Y=Kd[2];if(sa!==re[0]||X!==re[1]||Y!==re[2])v.stencilFunc(sa,X,Y),re[0]=sa,re[1]=X,re[2]=Y;ea=we[0];da=we[1];pa=we[2];xa=we[3];if(ea!==Gd[0]||da!==Gd[1]||pa!==Gd[2]||xa!==Gd[3])v.stencilOpSeparate(ea,da,pa,xa),Gd[0]=ea,Gd[1]=da,Gd[2]=pa,Gd[3]=xa;la=td[0];Qa=td[1];Hb=td[2];bb=td[3];if(la!==fe[0]||Qa!==fe[1]||Hb!==fe[2]||bb!==fe[3])v.stencilOpSeparate(la,Qa,Hb,bb),fe[0]=la,fe[1]=Qa,fe[2]=Hb,fe[3]=bb}v.blendColor(0,0,0,1);u[0]=0;u[1]=0;u[2]=0;u[3]=1;v.enable(3042);Da.blend_enable=
!0;v.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;v.disable(2929);Da.depth_enable=!1;v.enable(3089);Da.scissor_enable=!0;v.disable(2960);Da.stencil_enable=!1;if(e=Da.profile)f=performance.now(),d.count+=b;v.useProgram(qa.program);g=ad.angle_instanced_arrays;var Qc;na.setVAO(null);v.uniform1i(r.location,!1);v.uniform1i(dc.location,oa.bind());Qc=tb.instances;for(h=0;h<b;++h){k=a[h];var Sb,jc,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,
Pa,Jc,Kb,Ya,Wb,ya,Zb,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd,kd,id,Xc,te,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf,qf,mf,rf,Af,Bf,Me,Ae,nf,of,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Jf,Kf,Lf,sf,Qf,Hf,
tf,cg,Rf,Sf;Sb=k.viewport;jc=Sb.x|0;ac=Sb.y|0;Tb="width"in Sb?Sb.width|0:ia.framebufferWidth-jc;Ad="height"in Sb?Sb.height|0:ia.framebufferHeight-ac;Ub=ia.viewportWidth;ia.viewportWidth=Tb;Ma=ia.viewportHeight;ia.viewportHeight=Ad;v.viewport(jc,ac,Tb,Ad);$d[0]=jc;$d[1]=ac;$d[2]=Tb;$d[3]=Ad;nb=k.viewport;vb=nb.x|0;hb=nb.y|0;Na="width"in nb?nb.width|0:ia.framebufferWidth-vb;pc="height"in nb?nb.height|0:ia.framebufferHeight-hb;v.scissor(vb,hb,Na,pc);ke[0]=vb;ke[1]=hb;ke[2]=Na;ke[3]=pc;Vb=fb.call(this,
ia,k,h);Uc=!1;cb=null;mc=0;Gc=!1;jb=oc=0;kb=1;ra=0;ob=5126;Ba=ab=Sa=wa=0;ha(Vb)?(Uc=!0,cb=L.createStream(34962,Vb),ob=cb.dtype):(cb=L.getBuffer(Vb))?ob=cb.dtype:"constant"in Vb?(kb=2,"number"===typeof Vb.constant?(Sa=Vb.constant,ab=Ba=wa=0):(Sa=0<Vb.constant.length?Vb.constant[0]:0,ab=1<Vb.constant.length?Vb.constant[1]:0,Ba=2<Vb.constant.length?Vb.constant[2]:0,wa=3<Vb.constant.length?Vb.constant[3]:0)):(cb=ha(Vb.buffer)?L.createStream(34962,Vb.buffer):L.getBuffer(Vb.buffer),ob="type"in Vb?Nd[Vb.type]:
cb.dtype,Gc=!!Vb.normalized,jb=Vb.size|0,oc=Vb.offset|0,ra=Vb.stride|0,mc=Vb.divisor|0);db=qc.location;Ia=aa[db];if(1===kb){Ia.buffer||v.enableVertexAttribArray(db);Db=jb||1;if(Ia.type!==ob||Ia.size!==Db||Ia.buffer!==cb||Ia.normalized!==Gc||Ia.offset!==oc||Ia.stride!==ra)v.bindBuffer(34962,cb.buffer),v.vertexAttribPointer(db,Db,ob,Gc,ra,oc),Ia.type=ob,Ia.size=Db,Ia.buffer=cb,Ia.normalized=Gc,Ia.offset=oc,Ia.stride=ra;Ia.divisor!==mc&&(g.vertexAttribDivisorANGLE(db,mc),Ia.divisor=mc)}else if(Ia.buffer&&
(v.disableVertexAttribArray(db),Ia.buffer=null),Ia.x!==Sa||Ia.y!==ab||Ia.z!==Ba||Ia.w!==wa)v.vertexAttrib4f(db,Sa,ab,Ba,wa),Ia.x=Sa,Ia.y=ab,Ia.z=Ba,Ia.w=wa;Bb=gb.call(this,ia,k,h);Pa=!1;Jc=null;Kb=0;Ya=!1;ya=Wb=0;Zb=1;Ka=0;Ob=5126;fc=za=ib=eb=0;ha(Bb)?(Pa=!0,Jc=L.createStream(34962,Bb),Ob=Jc.dtype):(Jc=L.getBuffer(Bb))?Ob=Jc.dtype:"constant"in Bb?(Zb=2,"number"===typeof Bb.constant?(ib=Bb.constant,za=fc=eb=0):(ib=0<Bb.constant.length?Bb.constant[0]:0,za=1<Bb.constant.length?Bb.constant[1]:0,fc=2<
Bb.constant.length?Bb.constant[2]:0,eb=3<Bb.constant.length?Bb.constant[3]:0)):(Jc=ha(Bb.buffer)?L.createStream(34962,Bb.buffer):L.getBuffer(Bb.buffer),Ob="type"in Bb?Nd[Bb.type]:Jc.dtype,Ya=!!Bb.normalized,ya=Bb.size|0,Wb=Bb.offset|0,Ka=Bb.stride|0,Kb=Bb.divisor|0);Ea=ud.location;pb=aa[Ea];if(1===Zb){pb.buffer||v.enableVertexAttribArray(Ea);qb=ya||1;if(pb.type!==Ob||pb.size!==qb||pb.buffer!==Jc||pb.normalized!==Ya||pb.offset!==Wb||pb.stride!==Ka)v.bindBuffer(34962,Jc.buffer),v.vertexAttribPointer(Ea,
qb,Ob,Ya,Ka,Wb),pb.type=Ob,pb.size=qb,pb.buffer=Jc,pb.normalized=Ya,pb.offset=Wb,pb.stride=Ka;pb.divisor!==Kb&&(g.vertexAttribDivisorANGLE(Ea,Kb),pb.divisor=Kb)}else if(pb.buffer&&(v.disableVertexAttribArray(Ea),pb.buffer=null),pb.x!==ib||pb.y!==za||pb.z!==fc||pb.w!==eb)v.vertexAttrib4f(Ea,ib,za,fc,eb),pb.x=ib,pb.y=za,pb.z=fc,pb.w=eb;Va=Rb.call(this,ia,k,h);Wa=!1;nc=null;cd=0;vc=!1;Mb=Ta=0;dd=1;Fa=0;Kc=5126;wb=lb=Ca=Oa=0;ha(Va)?(Wa=!0,nc=L.createStream(34962,Va),Kc=nc.dtype):(nc=L.getBuffer(Va))?
Kc=nc.dtype:"constant"in Va?(dd=2,"number"===typeof Va.constant?(Ca=Va.constant,lb=wb=Oa=0):(Ca=0<Va.constant.length?Va.constant[0]:0,lb=1<Va.constant.length?Va.constant[1]:0,wb=2<Va.constant.length?Va.constant[2]:0,Oa=3<Va.constant.length?Va.constant[3]:0)):(nc=ha(Va.buffer)?L.createStream(34962,Va.buffer):L.getBuffer(Va.buffer),Kc="type"in Va?Nd[Va.type]:nc.dtype,vc=!!Va.normalized,Mb=Va.size|0,Ta=Va.offset|0,Fa=Va.stride|0,cd=Va.divisor|0);Eb=sc.location;rb=aa[Eb];if(1===dd){rb.buffer||v.enableVertexAttribArray(Eb);
wc=Mb||1;if(rb.type!==Kc||rb.size!==wc||rb.buffer!==nc||rb.normalized!==vc||rb.offset!==Ta||rb.stride!==Fa)v.bindBuffer(34962,nc.buffer),v.vertexAttribPointer(Eb,wc,Kc,vc,Fa,Ta),rb.type=Kc,rb.size=wc,rb.buffer=nc,rb.normalized=vc,rb.offset=Ta,rb.stride=Fa;rb.divisor!==cd&&(g.vertexAttribDivisorANGLE(Eb,cd),rb.divisor=cd)}else if(rb.buffer&&(v.disableVertexAttribArray(Eb),rb.buffer=null),rb.x!==Ca||rb.y!==lb||rb.z!==wb||rb.w!==Oa)v.vertexAttrib4f(Eb,Ca,lb,wb,Oa),rb.x=Ca,rb.y=lb,rb.z=wb,rb.w=Oa;xb=
ta.call(this,ia,k,h);Dd=!1;uc=null;Wd=0;Mc=!1;od=nd=0;Yb=1;cc=0;Pb=5126;yb=mb=$b=Ga=0;ha(xb)?(Dd=!0,uc=L.createStream(34962,xb),Pb=uc.dtype):(uc=L.getBuffer(xb))?Pb=uc.dtype:"constant"in xb?(Yb=2,"number"===typeof xb.constant?($b=xb.constant,mb=yb=Ga=0):($b=0<xb.constant.length?xb.constant[0]:0,mb=1<xb.constant.length?xb.constant[1]:0,yb=2<xb.constant.length?xb.constant[2]:0,Ga=3<xb.constant.length?xb.constant[3]:0)):(uc=ha(xb.buffer)?L.createStream(34962,xb.buffer):L.getBuffer(xb.buffer),Pb="type"in
xb?Nd[xb.type]:uc.dtype,Mc=!!xb.normalized,od=xb.size|0,nd=xb.offset|0,cc=xb.stride|0,Wd=xb.divisor|0);Nb=xc.location;Qb=aa[Nb];if(1===Yb){Qb.buffer||v.enableVertexAttribArray(Nb);gc=od||1;if(Qb.type!==Pb||Qb.size!==gc||Qb.buffer!==uc||Qb.normalized!==Mc||Qb.offset!==nd||Qb.stride!==cc)v.bindBuffer(34962,uc.buffer),v.vertexAttribPointer(Nb,gc,Pb,Mc,cc,nd),Qb.type=Pb,Qb.size=gc,Qb.buffer=uc,Qb.normalized=Mc,Qb.offset=nd,Qb.stride=cc;Qb.divisor!==Wd&&(g.vertexAttribDivisorANGLE(Nb,Wd),Qb.divisor=Wd)}else if(Qb.buffer&&
(v.disableVertexAttribArray(Nb),Qb.buffer=null),Qb.x!==$b||Qb.y!==mb||Qb.z!==yb||Qb.w!==Ga)v.vertexAttrib4f(Nb,$b,mb,yb,Ga),Qb.x=$b,Qb.y=mb,Qb.z=yb,Qb.w=Ga;ic=Aa.call(this,ia,k,h);Rc=!1;Bc=null;Cc=0;Dc=!1;Zc=Nc=0;Sc=1;Oc=0;Lb=5126;Tc=Hc=Pc=Gb=0;ha(ic)?(Rc=!0,Bc=L.createStream(34962,ic),Lb=Bc.dtype):(Bc=L.getBuffer(ic))?Lb=Bc.dtype:"constant"in ic?(Sc=2,"number"===typeof ic.constant?(Pc=ic.constant,Hc=Tc=Gb=0):(Pc=0<ic.constant.length?ic.constant[0]:0,Hc=1<ic.constant.length?ic.constant[1]:0,Tc=2<
ic.constant.length?ic.constant[2]:0,Gb=3<ic.constant.length?ic.constant[3]:0)):(Bc=ha(ic.buffer)?L.createStream(34962,ic.buffer):L.getBuffer(ic.buffer),Lb="type"in ic?Nd[ic.type]:Bc.dtype,Dc=!!ic.normalized,Zc=ic.size|0,Nc=ic.offset|0,Oc=ic.stride|0,Cc=ic.divisor|0);hc=ga.location;Wc=aa[hc];if(1===Sc){Wc.buffer||v.enableVertexAttribArray(hc);Jd=Zc||1;if(Wc.type!==Lb||Wc.size!==Jd||Wc.buffer!==Bc||Wc.normalized!==Dc||Wc.offset!==Nc||Wc.stride!==Oc)v.bindBuffer(34962,Bc.buffer),v.vertexAttribPointer(hc,
Jd,Lb,Dc,Oc,Nc),Wc.type=Lb,Wc.size=Jd,Wc.buffer=Bc,Wc.normalized=Dc,Wc.offset=Nc,Wc.stride=Oc;Wc.divisor!==Cc&&(g.vertexAttribDivisorANGLE(hc,Cc),Wc.divisor=Cc)}else if(Wc.buffer&&(v.disableVertexAttribArray(hc),Wc.buffer=null),Wc.x!==Pc||Wc.y!==Hc||Wc.z!==Tc||Wc.w!==Gb)v.vertexAttrib4f(hc,Pc,Hc,Tc,Gb),Wc.x=Pc,Wc.y=Hc,Wc.z=Tc,Wc.w=Gb;kd=Z.call(this,ia,k,h);id=!1;Xc=null;te=0;wd=!1;ue=ie=0;le=1;Hd=0;Ed=5126;hd=pd=Ec=fd=0;ha(kd)?(id=!0,Xc=L.createStream(34962,kd),Ed=Xc.dtype):(Xc=L.getBuffer(kd))?Ed=
Xc.dtype:"constant"in kd?(le=2,"number"===typeof kd.constant?(Ec=kd.constant,pd=hd=fd=0):(Ec=0<kd.constant.length?kd.constant[0]:0,pd=1<kd.constant.length?kd.constant[1]:0,hd=2<kd.constant.length?kd.constant[2]:0,fd=3<kd.constant.length?kd.constant[3]:0)):(Xc=ha(kd.buffer)?L.createStream(34962,kd.buffer):L.getBuffer(kd.buffer),Ed="type"in kd?Nd[kd.type]:Xc.dtype,wd=!!kd.normalized,ue=kd.size|0,ie=kd.offset|0,Hd=kd.stride|0,te=kd.divisor|0);bd=Za.location;jd=aa[bd];if(1===le){jd.buffer||v.enableVertexAttribArray(bd);
zd=ue||1;if(jd.type!==Ed||jd.size!==zd||jd.buffer!==Xc||jd.normalized!==wd||jd.offset!==ie||jd.stride!==Hd)v.bindBuffer(34962,Xc.buffer),v.vertexAttribPointer(bd,zd,Ed,wd,Hd,ie),jd.type=Ed,jd.size=zd,jd.buffer=Xc,jd.normalized=wd,jd.offset=ie,jd.stride=Hd;jd.divisor!==te&&(g.vertexAttribDivisorANGLE(bd,te),jd.divisor=te)}else if(jd.buffer&&(v.disableVertexAttribArray(bd),jd.buffer=null),jd.x!==Ec||jd.y!==pd||jd.z!==hd||jd.w!==fd)v.vertexAttrib4f(bd,Ec,pd,hd,fd),jd.x=Ec,jd.y=pd,jd.z=hd,jd.w=fd;Bd=
K.call(this,ia,k,h);ve=!1;me=null;xe=0;ee=!1;ce=de=0;oe=1;ae=0;ge=5126;je=pe=Vc=yc=0;ha(Bd)?(ve=!0,me=L.createStream(34962,Bd),ge=me.dtype):(me=L.getBuffer(Bd))?ge=me.dtype:"constant"in Bd?(oe=2,"number"===typeof Bd.constant?(Vc=Bd.constant,pe=je=yc=0):(Vc=0<Bd.constant.length?Bd.constant[0]:0,pe=1<Bd.constant.length?Bd.constant[1]:0,je=2<Bd.constant.length?Bd.constant[2]:0,yc=3<Bd.constant.length?Bd.constant[3]:0)):(me=ha(Bd.buffer)?L.createStream(34962,Bd.buffer):L.getBuffer(Bd.buffer),ge="type"in
Bd?Nd[Bd.type]:me.dtype,ee=!!Bd.normalized,ce=Bd.size|0,de=Bd.offset|0,ae=Bd.stride|0,xe=Bd.divisor|0);Fd=T.location;Md=aa[Fd];if(1===oe){Md.buffer||v.enableVertexAttribArray(Fd);Od=ce||4;if(Md.type!==ge||Md.size!==Od||Md.buffer!==me||Md.normalized!==ee||Md.offset!==de||Md.stride!==ae)v.bindBuffer(34962,me.buffer),v.vertexAttribPointer(Fd,Od,ge,ee,ae,de),Md.type=ge,Md.size=Od,Md.buffer=me,Md.normalized=ee,Md.offset=de,Md.stride=ae;Md.divisor!==xe&&(g.vertexAttribDivisorANGLE(Fd,xe),Md.divisor=xe)}else if(Md.buffer&&
(v.disableVertexAttribArray(Fd),Md.buffer=null),Md.x!==Vc||Md.y!==pe||Md.z!==je||Md.w!==yc)v.vertexAttrib4f(Fd,Vc,pe,je,yc),Md.x=Vc,Md.y=pe,Md.z=je,Md.w=yc;Pd=N.call(this,ia,k,h);he=!1;Ee=null;ye=0;ne=!1;Ne=Ze=0;Ke=1;qe=0;Be=5126;Ce=He=Ge=Fe=0;ha(Pd)?(he=!0,Ee=L.createStream(34962,Pd),Be=Ee.dtype):(Ee=L.getBuffer(Pd))?Be=Ee.dtype:"constant"in Pd?(Ke=2,"number"===typeof Pd.constant?(Ge=Pd.constant,He=Ce=Fe=0):(Ge=0<Pd.constant.length?Pd.constant[0]:0,He=1<Pd.constant.length?Pd.constant[1]:0,Ce=2<Pd.constant.length?
Pd.constant[2]:0,Fe=3<Pd.constant.length?Pd.constant[3]:0)):(Ee=ha(Pd.buffer)?L.createStream(34962,Pd.buffer):L.getBuffer(Pd.buffer),Be="type"in Pd?Nd[Pd.type]:Ee.dtype,ne=!!Pd.normalized,Ne=Pd.size|0,Ze=Pd.offset|0,qe=Pd.stride|0,ye=Pd.divisor|0);Id=Jb.location;Td=aa[Id];if(1===Ke){Td.buffer||v.enableVertexAttribArray(Id);Zd=Ne||4;if(Td.type!==Be||Td.size!==Zd||Td.buffer!==Ee||Td.normalized!==ne||Td.offset!==Ze||Td.stride!==qe)v.bindBuffer(34962,Ee.buffer),v.vertexAttribPointer(Id,Zd,Be,ne,qe,Ze),
Td.type=Be,Td.size=Zd,Td.buffer=Ee,Td.normalized=ne,Td.offset=Ze,Td.stride=qe;Td.divisor!==ye&&(g.vertexAttribDivisorANGLE(Id,ye),Td.divisor=ye)}else if(Td.buffer&&(v.disableVertexAttribArray(Id),Td.buffer=null),Td.x!==Ge||Td.y!==He||Td.z!==Ce||Td.w!==Fe)v.vertexAttrib4f(Id,Ge,He,Ce,Fe),Td.x=Ge,Td.y=He,Td.z=Ce,Td.w=Fe;be=R.call(this,ia,k,h);Ie=!1;yd=null;Qd=0;ze=!1;ef=Je=0;Ye=1;Oe=0;Le=5126;Qe=Pe=Te=Xe=0;ha(be)?(Ie=!0,yd=L.createStream(34962,be),Le=yd.dtype):(yd=L.getBuffer(be))?Le=yd.dtype:"constant"in
be?(Ye=2,"number"===typeof be.constant?(Te=be.constant,Pe=Qe=Xe=0):(Te=0<be.constant.length?be.constant[0]:0,Pe=1<be.constant.length?be.constant[1]:0,Qe=2<be.constant.length?be.constant[2]:0,Xe=3<be.constant.length?be.constant[3]:0)):(yd=ha(be.buffer)?L.createStream(34962,be.buffer):L.getBuffer(be.buffer),Le="type"in be?Nd[be.type]:yd.dtype,ze=!!be.normalized,ef=be.size|0,Je=be.offset|0,Oe=be.stride|0,Qd=be.divisor|0);Rd=ja.location;Xd=aa[Rd];if(1===Ye){Xd.buffer||v.enableVertexAttribArray(Rd);Re=
ef||1;if(Xd.type!==Le||Xd.size!==Re||Xd.buffer!==yd||Xd.normalized!==ze||Xd.offset!==Je||Xd.stride!==Oe)v.bindBuffer(34962,yd.buffer),v.vertexAttribPointer(Rd,Re,Le,ze,Oe,Je),Xd.type=Le,Xd.size=Re,Xd.buffer=yd,Xd.normalized=ze,Xd.offset=Je,Xd.stride=Oe;Xd.divisor!==Qd&&(g.vertexAttribDivisorANGLE(Rd,Qd),Xd.divisor=Qd)}else if(Xd.buffer&&(v.disableVertexAttribArray(Rd),Xd.buffer=null),Xd.x!==Te||Xd.y!==Pe||Xd.z!==Qe||Xd.w!==Xe)v.vertexAttrib4f(Rd,Te,Pe,Qe,Xe),Xd.x=Te,Xd.y=Pe,Xd.z=Qe,Xd.w=Xe;ff=ia.pixelRatio;
h&&lf===ff||(lf=ff,v.uniform1f(Xa.location,ff));bf=k.scale;gf=bf[0];jf=bf[1];h&&hf===gf&&qf===jf||(hf=gf,qf=jf,v.uniform2f(W.location,gf,jf));mf=k.scaleFract;rf=mf[0];Bf=mf[1];h&&Af===rf&&Me===Bf||(Af=rf,Me=Bf,v.uniform2f(sb.location,rf,Bf));Ae=k.translate;nf=Ae[0];Cf=Ae[1];h&&of===nf&&Ff===Cf||(of=nf,Ff=Cf,v.uniform2f(va.location,nf,Cf));zf=k.translateFract;Df=zf[0];vf=zf[1];h&&Ef===Df&&wf===vf||(Ef=Df,wf=vf,v.uniform2f(Xb.location,Df,vf));uf=P.call(this,ia,k,h);xf=uf[0];If=uf[1];h&&yf===xf&&Jf===
If||(yf=xf,Jf=If,v.uniform2f(Ja.location,xf,If));Kf=k.opacity;h&&Lf===Kf||(Lf=Kf,v.uniform1f(Ha.location,Kf));(sf=k.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Qf=sf._texture;v.uniform1i(ba.location,Qf.bind());Hf=k.elements;tf=null;(tf=(cg=ha(Hf))?$c.createStream(Hf):$c.getElements(Hf))&&v.bindBuffer(34963,tf.buffer.buffer);Rf=k.offset;if(Sf=k.count)0<Qc?tf?g.drawElementsInstancedANGLE(0,Sf,tf.type,Rf<<(tf.type-5121>>1),Qc):g.drawArraysInstancedANGLE(0,Rf,Sf,Qc):0>Qc&&(tf?v.drawElements(0,
Sf,tf.type,Rf<<(tf.type-5121>>1)):v.drawArrays(0,Rf,Sf)),ia.viewportWidth=Ub,ia.viewportHeight=Ma,Uc&&L.destroyStream(cb),Pa&&L.destroyStream(Jc),Wa&&L.destroyStream(nc),Dd&&L.destroyStream(uc),Rc&&L.destroyStream(Bc),id&&L.destroyStream(Xc),ve&&L.destroyStream(me),he&&L.destroyStream(Ee),Ie&&L.destroyStream(yd),Qf.unbind(),cg&&$c.destroyStream(tf)}oa.unbind();Da.dirty=!0;na.setVAO(null);e&&(d.cpuTime+=performance.now()-f)},draw:function(a){var e,g,h,n,p,q,z,A,B,F,C,N,Q,J,O,P,K,S,R,U,V,fa,X,Y,Z,da,
xa,la,oa,ta,qa,Ab,La,ub,Ua,pa,Aa,Cb,Qa,Hb,bb,Qc,Sb,gb,ac,Tb,fb,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,Rb,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Zb,uc,kd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd,te,id,Xc,pf,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze,Ne,Ke,qe;e=E.next;e!==E.cur&&(e?v.bindFramebuffer(36160,
e.framebuffer):v.bindFramebuffer(36160,null),E.cur=e);if(Da.dirty){var Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf,qf,mf,rf;Be=ua.dither;Be!==Da.dither&&(Be?v.enable(3024):v.disable(3024),Da.dither=Be);Fe=ca[0];Ge=ca[1];if(Fe!==D[0]||Ge!==D[1])v.blendEquationSeparate(Fe,Ge),D[0]=Fe,D[1]=Ge;He=ua.depth_func;He!==Da.depth_func&&(v.depthFunc(He),Da.depth_func=He);Ce=ma[0];Id=ma[1];if(Ce!==G[0]||Id!==G[1])v.depthRange(Ce,Id),G[0]=Ce,G[1]=Id;Td=ua.depth_mask;
Td!==Da.depth_mask&&(v.depthMask(Td),Da.depth_mask=Td);Zd=l[0];be=l[1];Ie=l[2];yd=l[3];if(Zd!==kc[0]||be!==kc[1]||Ie!==kc[2]||yd!==kc[3])v.colorMask(Zd,be,Ie,yd),kc[0]=Zd,kc[1]=be,kc[2]=Ie,kc[3]=yd;Qd=ua.cull_enable;Qd!==Da.cull_enable&&(Qd?v.enable(2884):v.disable(2884),Da.cull_enable=Qd);ze=ua.cull_face;ze!==Da.cull_face&&(v.cullFace(ze),Da.cull_face=ze);Je=ua.frontFace;Je!==Da.frontFace&&(v.frontFace(Je),Da.frontFace=Je);ef=ua.lineWidth;ef!==Da.lineWidth&&(v.lineWidth(ef),Da.lineWidth=ef);Ye=ua.polygonOffset_enable;
Ye!==Da.polygonOffset_enable&&(Ye?v.enable(32823):v.disable(32823),Da.polygonOffset_enable=Ye);Oe=Ib[0];Le=Ib[1];if(Oe!==zb[0]||Le!==zb[1])v.polygonOffset(Oe,Le),zb[0]=Oe,zb[1]=Le;Xe=ua.sample_alpha;Xe!==Da.sample_alpha&&(Xe?v.enable(32926):v.disable(32926),Da.sample_alpha=Xe);Te=ua.sample_enable;Te!==Da.sample_enable&&(Te?v.enable(32928):v.disable(32928),Da.sample_enable=Te);Pe=Ue[0];Qe=Ue[1];if(Pe!==se[0]||Qe!==se[1])v.sampleCoverage(Pe,Qe),se[0]=Pe,se[1]=Qe;Rd=ua.stencil_mask;Rd!==Da.stencil_mask&&
(v.stencilMask(Rd),Da.stencil_mask=Rd);Xd=Kd[0];Re=Kd[1];ff=Kd[2];if(Xd!==re[0]||Re!==re[1]||ff!==re[2])v.stencilFunc(Xd,Re,ff),re[0]=Xd,re[1]=Re,re[2]=ff;lf=we[0];bf=we[1];gf=we[2];hf=we[3];if(lf!==Gd[0]||bf!==Gd[1]||gf!==Gd[2]||hf!==Gd[3])v.stencilOpSeparate(lf,bf,gf,hf),Gd[0]=lf,Gd[1]=bf,Gd[2]=gf,Gd[3]=hf;jf=td[0];qf=td[1];mf=td[2];rf=td[3];if(jf!==fe[0]||qf!==fe[1]||mf!==fe[2]||rf!==fe[3])v.stencilOpSeparate(jf,qf,mf,rf),fe[0]=jf,fe[1]=qf,fe[2]=mf,fe[3]=rf}g=a.viewport;h=g.x|0;n=g.y|0;p="width"in
g?g.width|0:ia.framebufferWidth-h;q="height"in g?g.height|0:ia.framebufferHeight-n;z=ia.viewportWidth;ia.viewportWidth=p;A=ia.viewportHeight;ia.viewportHeight=q;v.viewport(h,n,p,q);$d[0]=h;$d[1]=n;$d[2]=p;$d[3]=q;v.blendColor(0,0,0,1);u[0]=0;u[1]=0;u[2]=0;u[3]=1;v.enable(3042);Da.blend_enable=!0;v.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;v.disable(2929);Da.depth_enable=!1;B=a.viewport;F=B.x|0;C=B.y|0;N="width"in B?B.width|0:ia.framebufferWidth-F;Q="height"in B?B.height|
0:ia.framebufferHeight-C;v.scissor(F,C,N,Q);ke[0]=F;ke[1]=C;ke[2]=N;ke[3]=Q;v.enable(3089);Da.scissor_enable=!0;v.disable(2960);Da.stencil_enable=!1;if(J=Da.profile)O=performance.now(),d.count++;v.useProgram(k.program);P=ad.angle_instanced_arrays;na.setVAO(null);K=m.call(this,ia,a,0);S=!1;R=null;U=0;V=!1;X=fa=0;Y=1;Z=0;da=5126;ta=oa=la=xa=0;ha(K)?(S=!0,R=L.createStream(34962,K),da=R.dtype):(R=L.getBuffer(K))?da=R.dtype:"constant"in K?(Y=2,"number"===typeof K.constant?(la=K.constant,oa=ta=xa=0):(la=
0<K.constant.length?K.constant[0]:0,oa=1<K.constant.length?K.constant[1]:0,ta=2<K.constant.length?K.constant[2]:0,xa=3<K.constant.length?K.constant[3]:0)):(R=ha(K.buffer)?L.createStream(34962,K.buffer):L.getBuffer(K.buffer),da="type"in K?Nd[K.type]:R.dtype,V=!!K.normalized,X=K.size|0,fa=K.offset|0,Z=K.stride|0,U=K.divisor|0);qa=qc.location;Ab=aa[qa];if(1===Y){Ab.buffer||v.enableVertexAttribArray(qa);La=X||1;if(Ab.type!==da||Ab.size!==La||Ab.buffer!==R||Ab.normalized!==V||Ab.offset!==fa||Ab.stride!==
Z)v.bindBuffer(34962,R.buffer),v.vertexAttribPointer(qa,La,da,V,Z,fa),Ab.type=da,Ab.size=La,Ab.buffer=R,Ab.normalized=V,Ab.offset=fa,Ab.stride=Z;Ab.divisor!==U&&(P.vertexAttribDivisorANGLE(qa,U),Ab.divisor=U)}else if(Ab.buffer&&(v.disableVertexAttribArray(qa),Ab.buffer=null),Ab.x!==la||Ab.y!==oa||Ab.z!==ta||Ab.w!==xa)v.vertexAttrib4f(qa,la,oa,ta,xa),Ab.x=la,Ab.y=oa,Ab.z=ta,Ab.w=xa;ub=f.call(this,ia,a,0);Ua=!1;pa=null;Aa=0;Cb=!1;Hb=Qa=0;bb=1;Qc=0;Sb=5126;fb=Tb=ac=gb=0;ha(ub)?(Ua=!0,pa=L.createStream(34962,
ub),Sb=pa.dtype):(pa=L.getBuffer(ub))?Sb=pa.dtype:"constant"in ub?(bb=2,"number"===typeof ub.constant?(ac=ub.constant,Tb=fb=gb=0):(ac=0<ub.constant.length?ub.constant[0]:0,Tb=1<ub.constant.length?ub.constant[1]:0,fb=2<ub.constant.length?ub.constant[2]:0,gb=3<ub.constant.length?ub.constant[3]:0)):(pa=ha(ub.buffer)?L.createStream(34962,ub.buffer):L.getBuffer(ub.buffer),Sb="type"in ub?Nd[ub.type]:pa.dtype,Cb=!!ub.normalized,Hb=ub.size|0,Qa=ub.offset|0,Qc=ub.stride|0,Aa=ub.divisor|0);Ub=ud.location;Ma=
aa[Ub];if(1===bb){Ma.buffer||v.enableVertexAttribArray(Ub);nb=Hb||1;if(Ma.type!==Sb||Ma.size!==nb||Ma.buffer!==pa||Ma.normalized!==Cb||Ma.offset!==Qa||Ma.stride!==Qc)v.bindBuffer(34962,pa.buffer),v.vertexAttribPointer(Ub,nb,Sb,Cb,Qc,Qa),Ma.type=Sb,Ma.size=nb,Ma.buffer=pa,Ma.normalized=Cb,Ma.offset=Qa,Ma.stride=Qc;Ma.divisor!==Aa&&(P.vertexAttribDivisorANGLE(Ub,Aa),Ma.divisor=Aa)}else if(Ma.buffer&&(v.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==ac||Ma.y!==Tb||Ma.z!==fb||Ma.w!==gb)v.vertexAttrib4f(Ub,
ac,Tb,fb,gb),Ma.x=ac,Ma.y=Tb,Ma.z=fb,Ma.w=gb;vb=b.call(this,ia,a,0);hb=!1;Na=null;pc=0;Vb=!1;cb=Uc=0;mc=1;Gc=0;oc=5126;ob=ra=kb=jb=0;ha(vb)?(hb=!0,Na=L.createStream(34962,vb),oc=Na.dtype):(Na=L.getBuffer(vb))?oc=Na.dtype:"constant"in vb?(mc=2,"number"===typeof vb.constant?(kb=vb.constant,ra=ob=jb=0):(kb=0<vb.constant.length?vb.constant[0]:0,ra=1<vb.constant.length?vb.constant[1]:0,ob=2<vb.constant.length?vb.constant[2]:0,jb=3<vb.constant.length?vb.constant[3]:0)):(Na=ha(vb.buffer)?L.createStream(34962,
vb.buffer):L.getBuffer(vb.buffer),oc="type"in vb?Nd[vb.type]:Na.dtype,Vb=!!vb.normalized,cb=vb.size|0,Uc=vb.offset|0,Gc=vb.stride|0,pc=vb.divisor|0);wa=sc.location;Sa=aa[wa];if(1===mc){Sa.buffer||v.enableVertexAttribArray(wa);ab=cb||1;if(Sa.type!==oc||Sa.size!==ab||Sa.buffer!==Na||Sa.normalized!==Vb||Sa.offset!==Uc||Sa.stride!==Gc)v.bindBuffer(34962,Na.buffer),v.vertexAttribPointer(wa,ab,oc,Vb,Gc,Uc),Sa.type=oc,Sa.size=ab,Sa.buffer=Na,Sa.normalized=Vb,Sa.offset=Uc,Sa.stride=Gc;Sa.divisor!==pc&&(P.vertexAttribDivisorANGLE(wa,
pc),Sa.divisor=pc)}else if(Sa.buffer&&(v.disableVertexAttribArray(wa),Sa.buffer=null),Sa.x!==kb||Sa.y!==ra||Sa.z!==ob||Sa.w!==jb)v.vertexAttrib4f(wa,kb,ra,ob,jb),Sa.x=kb,Sa.y=ra,Sa.z=ob,Sa.w=jb;Ba=t.call(this,ia,a,0);db=!1;Ia=null;Db=0;Bb=!1;Jc=Pa=0;Kb=1;Ya=0;Wb=5126;Ob=Ka=Rb=ya=0;ha(Ba)?(db=!0,Ia=L.createStream(34962,Ba),Wb=Ia.dtype):(Ia=L.getBuffer(Ba))?Wb=Ia.dtype:"constant"in Ba?(Kb=2,"number"===typeof Ba.constant?(Rb=Ba.constant,Ka=Ob=ya=0):(Rb=0<Ba.constant.length?Ba.constant[0]:0,Ka=1<Ba.constant.length?
Ba.constant[1]:0,Ob=2<Ba.constant.length?Ba.constant[2]:0,ya=3<Ba.constant.length?Ba.constant[3]:0)):(Ia=ha(Ba.buffer)?L.createStream(34962,Ba.buffer):L.getBuffer(Ba.buffer),Wb="type"in Ba?Nd[Ba.type]:Ia.dtype,Bb=!!Ba.normalized,Jc=Ba.size|0,Pa=Ba.offset|0,Ya=Ba.stride|0,Db=Ba.divisor|0);eb=xc.location;ib=aa[eb];if(1===Kb){ib.buffer||v.enableVertexAttribArray(eb);za=Jc||1;if(ib.type!==Wb||ib.size!==za||ib.buffer!==Ia||ib.normalized!==Bb||ib.offset!==Pa||ib.stride!==Ya)v.bindBuffer(34962,Ia.buffer),
v.vertexAttribPointer(eb,za,Wb,Bb,Ya,Pa),ib.type=Wb,ib.size=za,ib.buffer=Ia,ib.normalized=Bb,ib.offset=Pa,ib.stride=Ya;ib.divisor!==Db&&(P.vertexAttribDivisorANGLE(eb,Db),ib.divisor=Db)}else if(ib.buffer&&(v.disableVertexAttribArray(eb),ib.buffer=null),ib.x!==Rb||ib.y!==Ka||ib.z!==Ob||ib.w!==ya)v.vertexAttrib4f(eb,Rb,Ka,Ob,ya),ib.x=Rb,ib.y=Ka,ib.z=Ob,ib.w=ya;fc=c.call(this,ia,a,0);Ea=!1;pb=null;qb=0;Va=!1;nc=Wa=0;cd=1;vc=0;Ta=5126;Kc=Fa=dd=Mb=0;ha(fc)?(Ea=!0,pb=L.createStream(34962,fc),Ta=pb.dtype):
(pb=L.getBuffer(fc))?Ta=pb.dtype:"constant"in fc?(cd=2,"number"===typeof fc.constant?(dd=fc.constant,Fa=Kc=Mb=0):(dd=0<fc.constant.length?fc.constant[0]:0,Fa=1<fc.constant.length?fc.constant[1]:0,Kc=2<fc.constant.length?fc.constant[2]:0,Mb=3<fc.constant.length?fc.constant[3]:0)):(pb=ha(fc.buffer)?L.createStream(34962,fc.buffer):L.getBuffer(fc.buffer),Ta="type"in fc?Nd[fc.type]:pb.dtype,Va=!!fc.normalized,nc=fc.size|0,Wa=fc.offset|0,vc=fc.stride|0,qb=fc.divisor|0);Oa=ga.location;Ca=aa[Oa];if(1===cd){Ca.buffer||
v.enableVertexAttribArray(Oa);lb=nc||1;if(Ca.type!==Ta||Ca.size!==lb||Ca.buffer!==pb||Ca.normalized!==Va||Ca.offset!==Wa||Ca.stride!==vc)v.bindBuffer(34962,pb.buffer),v.vertexAttribPointer(Oa,lb,Ta,Va,vc,Wa),Ca.type=Ta,Ca.size=lb,Ca.buffer=pb,Ca.normalized=Va,Ca.offset=Wa,Ca.stride=vc;Ca.divisor!==qb&&(P.vertexAttribDivisorANGLE(Oa,qb),Ca.divisor=qb)}else if(Ca.buffer&&(v.disableVertexAttribArray(Oa),Ca.buffer=null),Ca.x!==dd||Ca.y!==Fa||Ca.z!==Kc||Ca.w!==Mb)v.vertexAttrib4f(Oa,dd,Fa,Kc,Mb),Ca.x=
dd,Ca.y=Fa,Ca.z=Kc,Ca.w=Mb;wb=x.call(this,ia,a,0);Eb=!1;rb=null;wc=0;xb=!1;uc=Zb=0;kd=1;Mc=0;nd=5126;Pb=cc=Yb=od=0;ha(wb)?(Eb=!0,rb=L.createStream(34962,wb),nd=rb.dtype):(rb=L.getBuffer(wb))?nd=rb.dtype:"constant"in wb?(kd=2,"number"===typeof wb.constant?(Yb=wb.constant,cc=Pb=od=0):(Yb=0<wb.constant.length?wb.constant[0]:0,cc=1<wb.constant.length?wb.constant[1]:0,Pb=2<wb.constant.length?wb.constant[2]:0,od=3<wb.constant.length?wb.constant[3]:0)):(rb=ha(wb.buffer)?L.createStream(34962,wb.buffer):L.getBuffer(wb.buffer),
nd="type"in wb?Nd[wb.type]:rb.dtype,xb=!!wb.normalized,uc=wb.size|0,Zb=wb.offset|0,Mc=wb.stride|0,wc=wb.divisor|0);Ga=Za.location;$b=aa[Ga];if(1===kd){$b.buffer||v.enableVertexAttribArray(Ga);mb=uc||1;if($b.type!==nd||$b.size!==mb||$b.buffer!==rb||$b.normalized!==xb||$b.offset!==Zb||$b.stride!==Mc)v.bindBuffer(34962,rb.buffer),v.vertexAttribPointer(Ga,mb,nd,xb,Mc,Zb),$b.type=nd,$b.size=mb,$b.buffer=rb,$b.normalized=xb,$b.offset=Zb,$b.stride=Mc;$b.divisor!==wc&&(P.vertexAttribDivisorANGLE(Ga,wc),$b.divisor=
wc)}else if($b.buffer&&(v.disableVertexAttribArray(Ga),$b.buffer=null),$b.x!==Yb||$b.y!==cc||$b.z!==Pb||$b.w!==od)v.vertexAttrib4f(Ga,Yb,cc,Pb,od),$b.x=Yb,$b.y=cc,$b.z=Pb,$b.w=od;yb=M.call(this,ia,a,0);Nb=!1;Qb=null;gc=0;ic=!1;Bc=Rc=0;Cc=1;Dc=0;Nc=5126;Lb=Oc=Sc=Zc=0;ha(yb)?(Nb=!0,Qb=L.createStream(34962,yb),Nc=Qb.dtype):(Qb=L.getBuffer(yb))?Nc=Qb.dtype:"constant"in yb?(Cc=2,"number"===typeof yb.constant?(Sc=yb.constant,Oc=Lb=Zc=0):(Sc=0<yb.constant.length?yb.constant[0]:0,Oc=1<yb.constant.length?
yb.constant[1]:0,Lb=2<yb.constant.length?yb.constant[2]:0,Zc=3<yb.constant.length?yb.constant[3]:0)):(Qb=ha(yb.buffer)?L.createStream(34962,yb.buffer):L.getBuffer(yb.buffer),Nc="type"in yb?Nd[yb.type]:Qb.dtype,ic=!!yb.normalized,Bc=yb.size|0,Rc=yb.offset|0,Dc=yb.stride|0,gc=yb.divisor|0);Gb=T.location;Pc=aa[Gb];if(1===Cc){Pc.buffer||v.enableVertexAttribArray(Gb);Hc=Bc||4;if(Pc.type!==Nc||Pc.size!==Hc||Pc.buffer!==Qb||Pc.normalized!==ic||Pc.offset!==Rc||Pc.stride!==Dc)v.bindBuffer(34962,Qb.buffer),
v.vertexAttribPointer(Gb,Hc,Nc,ic,Dc,Rc),Pc.type=Nc,Pc.size=Hc,Pc.buffer=Qb,Pc.normalized=ic,Pc.offset=Rc,Pc.stride=Dc;Pc.divisor!==gc&&(P.vertexAttribDivisorANGLE(Gb,gc),Pc.divisor=gc)}else if(Pc.buffer&&(v.disableVertexAttribArray(Gb),Pc.buffer=null),Pc.x!==Sc||Pc.y!==Oc||Pc.z!==Lb||Pc.w!==Zc)v.vertexAttrib4f(Gb,Sc,Oc,Lb,Zc),Pc.x=Sc,Pc.y=Oc,Pc.z=Lb,Pc.w=Zc;Tc=ea.call(this,ia,a,0);hc=!1;Wc=null;Jd=0;te=!1;Xc=id=0;pf=1;wd=0;ie=5126;Ed=Hd=le=ue=0;ha(Tc)?(hc=!0,Wc=L.createStream(34962,Tc),ie=Wc.dtype):
(Wc=L.getBuffer(Tc))?ie=Wc.dtype:"constant"in Tc?(pf=2,"number"===typeof Tc.constant?(le=Tc.constant,Hd=Ed=ue=0):(le=0<Tc.constant.length?Tc.constant[0]:0,Hd=1<Tc.constant.length?Tc.constant[1]:0,Ed=2<Tc.constant.length?Tc.constant[2]:0,ue=3<Tc.constant.length?Tc.constant[3]:0)):(Wc=ha(Tc.buffer)?L.createStream(34962,Tc.buffer):L.getBuffer(Tc.buffer),ie="type"in Tc?Nd[Tc.type]:Wc.dtype,te=!!Tc.normalized,Xc=Tc.size|0,id=Tc.offset|0,wd=Tc.stride|0,Jd=Tc.divisor|0);fd=Jb.location;Ec=aa[fd];if(1===pf){Ec.buffer||
v.enableVertexAttribArray(fd);pd=Xc||4;if(Ec.type!==ie||Ec.size!==pd||Ec.buffer!==Wc||Ec.normalized!==te||Ec.offset!==id||Ec.stride!==wd)v.bindBuffer(34962,Wc.buffer),v.vertexAttribPointer(fd,pd,ie,te,wd,id),Ec.type=ie,Ec.size=pd,Ec.buffer=Wc,Ec.normalized=te,Ec.offset=id,Ec.stride=wd;Ec.divisor!==Jd&&(P.vertexAttribDivisorANGLE(fd,Jd),Ec.divisor=Jd)}else if(Ec.buffer&&(v.disableVertexAttribArray(fd),Ec.buffer=null),Ec.x!==le||Ec.y!==Hd||Ec.z!==Ed||Ec.w!==ue)v.vertexAttrib4f(fd,le,Hd,Ed,ue),Ec.x=
le,Ec.y=Hd,Ec.z=Ed,Ec.w=ue;hd=H.call(this,ia,a,0);bd=!1;jd=null;zd=0;Bd=!1;me=ve=0;xe=1;ee=0;de=5126;ge=ae=oe=ce=0;ha(hd)?(bd=!0,jd=L.createStream(34962,hd),de=jd.dtype):(jd=L.getBuffer(hd))?de=jd.dtype:"constant"in hd?(xe=2,"number"===typeof hd.constant?(oe=hd.constant,ae=ge=ce=0):(oe=0<hd.constant.length?hd.constant[0]:0,ae=1<hd.constant.length?hd.constant[1]:0,ge=2<hd.constant.length?hd.constant[2]:0,ce=3<hd.constant.length?hd.constant[3]:0)):(jd=ha(hd.buffer)?L.createStream(34962,hd.buffer):L.getBuffer(hd.buffer),
de="type"in hd?Nd[hd.type]:jd.dtype,Bd=!!hd.normalized,me=hd.size|0,ve=hd.offset|0,ee=hd.stride|0,zd=hd.divisor|0);yc=ja.location;Vc=aa[yc];if(1===xe){Vc.buffer||v.enableVertexAttribArray(yc);pe=me||1;if(Vc.type!==de||Vc.size!==pe||Vc.buffer!==jd||Vc.normalized!==Bd||Vc.offset!==ve||Vc.stride!==ee)v.bindBuffer(34962,jd.buffer),v.vertexAttribPointer(yc,pe,de,Bd,ee,ve),Vc.type=de,Vc.size=pe,Vc.buffer=jd,Vc.normalized=Bd,Vc.offset=ve,Vc.stride=ee;Vc.divisor!==zd&&(P.vertexAttribDivisorANGLE(yc,zd),Vc.divisor=
zd)}else if(Vc.buffer&&(v.disableVertexAttribArray(yc),Vc.buffer=null),Vc.x!==oe||Vc.y!==ae||Vc.z!==ge||Vc.w!==ce)v.vertexAttrib4f(yc,oe,ae,ge,ce),Vc.x=oe,Vc.y=ae,Vc.z=ge,Vc.w=ce;v.uniform1i(r.location,!1);v.uniform1f(Xa.location,ia.pixelRatio);je=a.scale;v.uniform2f(W.location,je[0],je[1]);Fd=a.scaleFract;v.uniform2f(sb.location,Fd[0],Fd[1]);Md=a.translate;v.uniform2f(va.location,Md[0],Md[1]);Od=a.translateFract;v.uniform2f(Xb.location,Od[0],Od[1]);Pd=I.call(this,ia,a,0);v.uniform2f(Ja.location,
Pd[0],Pd[1]);v.uniform1f(Ha.location,a.opacity);v.uniform1i(dc.location,y.bind());(he=a.markerTexture)&&"framebuffer"===he._reglType&&(he=he.color[0]);Ee=he._texture;v.uniform1i(ba.location,Ee.bind());ye=a.elements;ne=null;(ne=(Ze=ha(ye))?$c.createStream(ye):$c.getElements(ye))&&v.bindBuffer(34963,ne.buffer.buffer);Ne=a.offset;if(Ke=a.count)qe=tb.instances,0<qe?ne?P.drawElementsInstancedANGLE(0,Ke,ne.type,Ne<<(ne.type-5121>>1),qe):P.drawArraysInstancedANGLE(0,Ne,Ke,qe):0>qe&&(ne?v.drawElements(0,
Ke,ne.type,Ne<<(ne.type-5121>>1)):v.drawArrays(0,Ne,Ke)),Da.dirty=!0,na.setVAO(null),ia.viewportWidth=z,ia.viewportHeight=A,J&&(d.cpuTime+=performance.now()-O),S&&L.destroyStream(R),Ua&&L.destroyStream(pa),hb&&L.destroyStream(Na),db&&L.destroyStream(Ia),Ea&&L.destroyStream(pb),Eb&&L.destroyStream(rb),Nb&&L.destroyStream(Qb),hc&&L.destroyStream(Wc),bd&&L.destroyStream(jd),y.unbind(),Ee.unbind(),Ze&&$c.destroyStream(ne)},scope:function(a,b,c){var f,k,l,m,w,r,u,v,x,t,y,D,G,E,K,N,H,P,I,aa,ca,R,T,M,W,
sa,Z,ea,ka,ba,ga,ja,ma,pa,na,oa,va,ta,qa,Ja,Ha,zb,Aa,Xa,Za,xc,Ma,nb,vb,hb,Na,Ib,Vb,sb,cb,jc,gb,fb,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,kc,Kb,Ya,Wb,ya,ud,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,Jb,vc,Ta,Mb,Xb,Fa,Rb,Oa,Ca,lb,wb,Eb,rb,wc,xb,dc,uc,qc,Mc,sc,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,td,Kd,id,Xc,ad,wd,ke,$d,Gd,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,fe,re,we,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,se,ye,ne,Ze,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,
Je,Ue,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf,qf,mf,rf,Af,Bf,Me,Ae,nf,of,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,qg,cf,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,df,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;f=a.viewport;k=f.x|0;l=f.y|0;m="width"in f?f.width|0:ia.framebufferWidth-k;w="height"in f?f.height|0:ia.framebufferHeight-l;r=ia.viewportWidth;ia.viewportWidth=m;u=ia.viewportHeight;ia.viewportHeight=
w;v=kd[0];kd[0]=k;x=kd[1];kd[1]=l;t=kd[2];kd[2]=m;y=kd[3];kd[3]=w;D=F[0];F[0]=0;G=F[1];F[1]=0;E=F[2];F[2]=0;K=F[3];F[3]=1;N=ua.blend_enable;ua.blend_enable=!0;H=xa[0];xa[0]=770;P=xa[1];xa[1]=771;I=xa[2];xa[2]=773;aa=xa[3];xa[3]=1;ca=ua.depth_enable;ua.depth_enable=!1;R=a.viewport;T=R.x|0;M=R.y|0;W="width"in R?R.width|0:ia.framebufferWidth-T;sa="height"in R?R.height|0:ia.framebufferHeight-M;Z=te[0];te[0]=T;ea=te[1];te[1]=M;ka=te[2];te[2]=W;ba=te[3];te[3]=sa;ga=ua.scissor_enable;ua.scissor_enable=!0;
ja=ua.stencil_enable;ua.stencil_enable=!1;if(ma=Da.profile)pa=performance.now(),d.count++;na=a.elements;oa=null;oa=(va=ha(na))?$c.createStream(na):$c.getElements(na);ta=tb.elements;tb.elements=oa;qa=a.offset;Ja=tb.offset;tb.offset=qa;Ha=a.count;zb=tb.count;tb.count=Ha;Aa=tb.primitive;tb.primitive=0;Xa=fa[45];fa[45]=!1;Za=a.markerTexture;xc=fa[48];fa[48]=Za;Ma=a.opacity;nb=fa[10];fa[10]=Ma;vb=A.call(this,ia,a,c);hb=fa[46];fa[46]=vb;Na=fa[47];fa[47]=C;Ib=ia.pixelRatio;Vb=fa[34];fa[34]=Ib;sb=a.scale;
cb=fa[6];fa[6]=sb;jc=a.scaleFract;gb=fa[7];fa[7]=jc;fb=a.translate;jb=fa[8];fa[8]=fb;kb=a.translateFract;ra=fa[9];fa[9]=kb;ob=B.call(this,ia,a,c);wa=!1;Sa=null;ab=0;Ba=!1;Ia=db=0;Db=1;Bb=0;Pa=5126;Wb=Ya=Kb=kc=0;ha(ob)?(wa=!0,Sa=L.createStream(34962,ob),Pa=Sa.dtype):(Sa=L.getBuffer(ob))?Pa=Sa.dtype:"constant"in ob?(Db=2,"number"===typeof ob.constant?(Kb=ob.constant,Ya=Wb=kc=0):(Kb=0<ob.constant.length?ob.constant[0]:0,Ya=1<ob.constant.length?ob.constant[1]:0,Wb=2<ob.constant.length?ob.constant[2]:
0,kc=3<ob.constant.length?ob.constant[3]:0)):(Sa=ha(ob.buffer)?L.createStream(34962,ob.buffer):L.getBuffer(ob.buffer),Pa="type"in ob?Nd[ob.type]:Sa.dtype,Ba=!!ob.normalized,Ia=ob.size|0,db=ob.offset|0,Bb=ob.stride|0,ab=ob.divisor|0);ya=J.buffer;J.buffer=Sa;ud=J.divisor;J.divisor=ab;Ka=J.normalized;J.normalized=Ba;Ob=J.offset;J.offset=db;eb=J.size;J.size=Ia;ib=J.state;J.state=Db;za=J.stride;J.stride=Bb;fc=J.type;J.type=Pa;Ea=J.w;J.w=kc;pb=J.x;J.x=Kb;qb=J.y;J.y=Ya;Va=J.z;J.z=Wb;Wa=z.call(this,ia,a,
c);nc=!1;Jb=null;vc=0;Ta=!1;Xb=Mb=0;Fa=1;Rb=0;Oa=5126;Eb=wb=lb=Ca=0;ha(Wa)?(nc=!0,Jb=L.createStream(34962,Wa),Oa=Jb.dtype):(Jb=L.getBuffer(Wa))?Oa=Jb.dtype:"constant"in Wa?(Fa=2,"number"===typeof Wa.constant?(lb=Wa.constant,wb=Eb=Ca=0):(lb=0<Wa.constant.length?Wa.constant[0]:0,wb=1<Wa.constant.length?Wa.constant[1]:0,Eb=2<Wa.constant.length?Wa.constant[2]:0,Ca=3<Wa.constant.length?Wa.constant[3]:0)):(Jb=ha(Wa.buffer)?L.createStream(34962,Wa.buffer):L.getBuffer(Wa.buffer),Oa="type"in Wa?Nd[Wa.type]:
Jb.dtype,Ta=!!Wa.normalized,Xb=Wa.size|0,Mb=Wa.offset|0,Rb=Wa.stride|0,vc=Wa.divisor|0);rb=O.buffer;O.buffer=Jb;wc=O.divisor;O.divisor=vc;xb=O.normalized;O.normalized=Ta;dc=O.offset;O.offset=Mb;uc=O.size;O.size=Xb;qc=O.state;O.state=Fa;Mc=O.stride;O.stride=Rb;sc=O.type;O.type=Oa;od=O.w;O.w=Ca;Yb=O.x;O.x=lb;cc=O.y;O.y=wb;Pb=O.z;O.z=Eb;Ga=Zb.call(this,ia,a,c);$b=!1;mb=null;yb=0;Nb=!1;gc=Qb=0;ic=1;Rc=0;Bc=5126;Zc=Nc=Dc=Cc=0;ha(Ga)?($b=!0,mb=L.createStream(34962,Ga),Bc=mb.dtype):(mb=L.getBuffer(Ga))?
Bc=mb.dtype:"constant"in Ga?(ic=2,"number"===typeof Ga.constant?(Dc=Ga.constant,Nc=Zc=Cc=0):(Dc=0<Ga.constant.length?Ga.constant[0]:0,Nc=1<Ga.constant.length?Ga.constant[1]:0,Zc=2<Ga.constant.length?Ga.constant[2]:0,Cc=3<Ga.constant.length?Ga.constant[3]:0)):(mb=ha(Ga.buffer)?L.createStream(34962,Ga.buffer):L.getBuffer(Ga.buffer),Bc="type"in Ga?Nd[Ga.type]:mb.dtype,Nb=!!Ga.normalized,gc=Ga.size|0,Qb=Ga.offset|0,Rc=Ga.stride|0,yb=Ga.divisor|0);Sc=p.buffer;p.buffer=mb;Oc=p.divisor;p.divisor=yb;Lb=p.normalized;
p.normalized=Nb;Gb=p.offset;p.offset=Qb;Pc=p.size;p.size=gc;Hc=p.state;p.state=ic;Tc=p.stride;p.stride=Rc;hc=p.type;p.type=Bc;Wc=p.w;p.w=Cc;td=p.x;p.x=Dc;Kd=p.y;p.y=Nc;id=p.z;p.z=Zc;Xc=g.call(this,ia,a,c);ad=!1;wd=null;ke=0;$d=!1;Hd=Gd=0;Ed=1;fd=0;Ec=5126;jd=bd=hd=pd=0;ha(Xc)?(ad=!0,wd=L.createStream(34962,Xc),Ec=wd.dtype):(wd=L.getBuffer(Xc))?Ec=wd.dtype:"constant"in Xc?(Ed=2,"number"===typeof Xc.constant?(hd=Xc.constant,bd=jd=pd=0):(hd=0<Xc.constant.length?Xc.constant[0]:0,bd=1<Xc.constant.length?
Xc.constant[1]:0,jd=2<Xc.constant.length?Xc.constant[2]:0,pd=3<Xc.constant.length?Xc.constant[3]:0)):(wd=ha(Xc.buffer)?L.createStream(34962,Xc.buffer):L.getBuffer(Xc.buffer),Ec="type"in Xc?Nd[Xc.type]:wd.dtype,$d=!!Xc.normalized,Hd=Xc.size|0,Gd=Xc.offset|0,fd=Xc.stride|0,ke=Xc.divisor|0);zd=q.buffer;q.buffer=wd;Bd=q.divisor;q.divisor=ke;fe=q.normalized;q.normalized=$d;re=q.offset;q.offset=Gd;we=q.size;q.size=Hd;ee=q.state;q.state=Ed;de=q.stride;q.stride=fd;ce=q.type;q.type=Ec;oe=q.w;q.w=pd;ae=q.x;
q.x=hd;ge=q.y;q.y=bd;yc=q.z;q.z=jd;Vc=S.call(this,ia,a,c);pe=!1;je=null;Fd=0;Md=!1;Pd=Od=0;he=1;se=0;ye=5126;Ke=Ne=Ze=ne=0;ha(Vc)?(pe=!0,je=L.createStream(34962,Vc),ye=je.dtype):(je=L.getBuffer(Vc))?ye=je.dtype:"constant"in Vc?(he=2,"number"===typeof Vc.constant?(Ze=Vc.constant,Ne=Ke=ne=0):(Ze=0<Vc.constant.length?Vc.constant[0]:0,Ne=1<Vc.constant.length?Vc.constant[1]:0,Ke=2<Vc.constant.length?Vc.constant[2]:0,ne=3<Vc.constant.length?Vc.constant[3]:0)):(je=ha(Vc.buffer)?L.createStream(34962,Vc.buffer):
L.getBuffer(Vc.buffer),ye="type"in Vc?Nd[Vc.type]:je.dtype,Md=!!Vc.normalized,Pd=Vc.size|0,Od=Vc.offset|0,se=Vc.stride|0,Fd=Vc.divisor|0);qe=X.buffer;X.buffer=je;Be=X.divisor;X.divisor=Fd;Fe=X.normalized;X.normalized=Md;Ge=X.offset;X.offset=Od;He=X.size;X.size=Pd;Ce=X.state;X.state=he;Id=X.stride;X.stride=se;Td=X.type;X.type=ye;Zd=X.w;X.w=ne;be=X.x;X.x=Ze;Ie=X.y;X.y=Ne;yd=X.z;X.z=Ke;Qd=U.call(this,ia,a,c);ze=!1;Je=null;Ue=0;Ye=!1;Le=Oe=0;Xe=1;Te=0;Pe=5126;Re=Xd=Rd=Qe=0;ha(Qd)?(ze=!0,Je=L.createStream(34962,
Qd),Pe=Je.dtype):(Je=L.getBuffer(Qd))?Pe=Je.dtype:"constant"in Qd?(Xe=2,"number"===typeof Qd.constant?(Rd=Qd.constant,Xd=Re=Qe=0):(Rd=0<Qd.constant.length?Qd.constant[0]:0,Xd=1<Qd.constant.length?Qd.constant[1]:0,Re=2<Qd.constant.length?Qd.constant[2]:0,Qe=3<Qd.constant.length?Qd.constant[3]:0)):(Je=ha(Qd.buffer)?L.createStream(34962,Qd.buffer):L.getBuffer(Qd.buffer),Pe="type"in Qd?Nd[Qd.type]:Je.dtype,Ye=!!Qd.normalized,Le=Qd.size|0,Oe=Qd.offset|0,Te=Qd.stride|0,Ue=Qd.divisor|0);ff=n.buffer;n.buffer=
Je;lf=n.divisor;n.divisor=Ue;bf=n.normalized;n.normalized=Ye;gf=n.offset;n.offset=Oe;hf=n.size;n.size=Le;jf=n.state;n.state=Xe;qf=n.stride;n.stride=Te;mf=n.type;n.type=Pe;rf=n.w;n.w=Qe;Af=n.x;n.x=Rd;Bf=n.y;n.y=Xd;Me=n.z;n.z=Re;Ae=la.call(this,ia,a,c);nf=!1;of=null;Cf=0;Ff=!1;Df=zf=0;Ef=1;vf=0;wf=5126;If=yf=xf=uf=0;ha(Ae)?(nf=!0,of=L.createStream(34962,Ae),wf=of.dtype):(of=L.getBuffer(Ae))?wf=of.dtype:"constant"in Ae?(Ef=2,"number"===typeof Ae.constant?(xf=Ae.constant,yf=If=uf=0):(xf=0<Ae.constant.length?
Ae.constant[0]:0,yf=1<Ae.constant.length?Ae.constant[1]:0,If=2<Ae.constant.length?Ae.constant[2]:0,uf=3<Ae.constant.length?Ae.constant[3]:0)):(of=ha(Ae.buffer)?L.createStream(34962,Ae.buffer):L.getBuffer(Ae.buffer),wf="type"in Ae?Nd[Ae.type]:of.dtype,Ff=!!Ae.normalized,Df=Ae.size|0,zf=Ae.offset|0,vf=Ae.stride|0,Cf=Ae.divisor|0);Jf=Q.buffer;Q.buffer=of;Kf=Q.divisor;Q.divisor=Cf;Lf=Q.normalized;Q.normalized=Ff;sf=Q.offset;Q.offset=zf;Qf=Q.size;Q.size=Df;Hf=Q.state;Q.state=Ef;tf=Q.stride;Q.stride=vf;
cg=Q.type;Q.type=wf;Rf=Q.w;Q.w=uf;Sf=Q.x;Q.x=xf;qg=Q.y;Q.y=yf;cf=Q.z;Q.z=If;$e=da.call(this,ia,a,c);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;ha($e)?(Mf=!0,Nf=L.createStream(34962,$e),Tf=Nf.dtype):(Nf=L.getBuffer($e))?Tf=Nf.dtype:"constant"in $e?(hg=2,"number"===typeof $e.constant?(Xf=$e.constant,Yf=ig=Wf=0):(Xf=0<$e.constant.length?$e.constant[0]:0,Yf=1<$e.constant.length?$e.constant[1]:0,ig=2<$e.constant.length?$e.constant[2]:0,Wf=3<$e.constant.length?$e.constant[3]:0)):(Nf=
ha($e.buffer)?L.createStream(34962,$e.buffer):L.getBuffer($e.buffer),Tf="type"in $e?Nd[$e.type]:Nf.dtype,eg=!!$e.normalized,gg=$e.size|0,fg=$e.offset|0,Vf=$e.stride|0,dg=$e.divisor|0);rg=e.buffer;e.buffer=Nf;sg=e.divisor;e.divisor=dg;tg=e.normalized;e.normalized=eg;ug=e.offset;e.offset=fg;vg=e.size;e.size=gg;wg=e.state;e.state=hg;xg=e.stride;e.stride=Vf;yg=e.type;e.type=Tf;zg=e.w;e.w=Wf;Ag=e.x;e.x=Xf;Bg=e.y;e.y=Yf;df=e.z;e.z=ig;af=h.call(this,ia,a,c);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=
5126;og=bg=ag=$f=0;ha(af)?(Of=!0,Pf=L.createStream(34962,af),Uf=Pf.dtype):(Pf=L.getBuffer(af))?Uf=Pf.dtype:"constant"in af?(ng=2,"number"===typeof af.constant?(ag=af.constant,bg=og=$f=0):(ag=0<af.constant.length?af.constant[0]:0,bg=1<af.constant.length?af.constant[1]:0,og=2<af.constant.length?af.constant[2]:0,$f=3<af.constant.length?af.constant[3]:0)):(Pf=ha(af.buffer)?L.createStream(34962,af.buffer):L.getBuffer(af.buffer),Uf="type"in af?Nd[af.type]:Pf.dtype,kg=!!af.normalized,mg=af.size|0,lg=af.offset|
0,Zf=af.stride|0,jg=af.divisor|0);Cg=Y.buffer;Y.buffer=Pf;Dg=Y.divisor;Y.divisor=jg;Eg=Y.normalized;Y.normalized=kg;Fg=Y.offset;Y.offset=lg;Gg=Y.size;Y.size=mg;Hg=Y.state;Y.state=ng;Ig=Y.stride;Y.stride=Zf;Jg=Y.type;Y.type=Uf;Kg=Y.w;Y.w=$f;Lg=Y.x;Y.x=ag;Mg=Y.y;Y.y=bg;Ng=Y.z;Y.z=og;Og=V.vert;V.vert=44;Pg=V.frag;V.frag=43;Da.dirty=!0;b(ia,a,c);ia.viewportWidth=r;ia.viewportHeight=u;kd[0]=v;kd[1]=x;kd[2]=t;kd[3]=y;F[0]=D;F[1]=G;F[2]=E;F[3]=K;ua.blend_enable=N;xa[0]=H;xa[1]=P;xa[2]=I;xa[3]=aa;ua.depth_enable=
ca;te[0]=Z;te[1]=ea;te[2]=ka;te[3]=ba;ua.scissor_enable=ga;ua.stencil_enable=ja;ma&&(d.cpuTime+=performance.now()-pa);va&&$c.destroyStream(oa);tb.elements=ta;tb.offset=Ja;tb.count=zb;tb.primitive=Aa;fa[45]=Xa;fa[48]=xc;fa[10]=nb;fa[46]=hb;fa[47]=Na;fa[34]=Vb;fa[6]=cb;fa[7]=gb;fa[8]=jb;fa[9]=ra;wa&&L.destroyStream(Sa);J.buffer=ya;J.divisor=ud;J.normalized=Ka;J.offset=Ob;J.size=eb;J.state=ib;J.stride=za;J.type=fc;J.w=Ea;J.x=pb;J.y=qb;J.z=Va;nc&&L.destroyStream(Jb);O.buffer=rb;O.divisor=wc;O.normalized=
xb;O.offset=dc;O.size=uc;O.state=qc;O.stride=Mc;O.type=sc;O.w=od;O.x=Yb;O.y=cc;O.z=Pb;$b&&L.destroyStream(mb);p.buffer=Sc;p.divisor=Oc;p.normalized=Lb;p.offset=Gb;p.size=Pc;p.state=Hc;p.stride=Tc;p.type=hc;p.w=Wc;p.x=td;p.y=Kd;p.z=id;ad&&L.destroyStream(wd);q.buffer=zd;q.divisor=Bd;q.normalized=fe;q.offset=re;q.size=we;q.state=ee;q.stride=de;q.type=ce;q.w=oe;q.x=ae;q.y=ge;q.z=yc;pe&&L.destroyStream(je);X.buffer=qe;X.divisor=Be;X.normalized=Fe;X.offset=Ge;X.size=He;X.state=Ce;X.stride=Id;X.type=Td;
X.w=Zd;X.x=be;X.y=Ie;X.z=yd;ze&&L.destroyStream(Je);n.buffer=ff;n.divisor=lf;n.normalized=bf;n.offset=gf;n.size=hf;n.state=jf;n.stride=qf;n.type=mf;n.w=rf;n.x=Af;n.y=Bf;n.z=Me;nf&&L.destroyStream(of);Q.buffer=Jf;Q.divisor=Kf;Q.normalized=Lf;Q.offset=sf;Q.size=Qf;Q.state=Hf;Q.stride=tf;Q.type=cg;Q.w=Rf;Q.x=Sf;Q.y=qg;Q.z=cf;Mf&&L.destroyStream(Nf);e.buffer=rg;e.divisor=sg;e.normalized=tg;e.offset=ug;e.size=vg;e.state=wg;e.stride=xg;e.type=yg;e.w=zg;e.x=Ag;e.y=Bg;e.z=df;Of&&L.destroyStream(Pf);Y.buffer=
Cg;Y.divisor=Dg;Y.normalized=Eg;Y.offset=Fg;Y.size=Gg;Y.state=Hg;Y.stride=Ig;Y.type=Jg;Y.w=Kg;Y.x=Lg;Y.y=Mg;Y.z=Ng;V.vert=Og;V.frag=Pg;Da.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,d,k,m,f,b,t,c,x,M,ea,H,I,y,A,C,B,J,z,O,Zb,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb,Rb,ta,Aa,Z,K,N,R,oa,P,Jb,Za,T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va,Xb,qc,sc,ud){var xc,aa,L,ia,
Da,tb,$c,ad,E,v,ha,ua,V,fa,na,F,u,ca,D,xa,ka,l,kc,ma,G,Ib,zb,Ue,se,te,ke,Kd,re,td,fe,we,Gd,kd,$d;xc=a.attributes;aa=a.buffer;L=a.context;ia=a.current;Da=a.draw;tb=a.elements;$c=a.extensions;ad=a.framebuffer;E=a.gl;v=a.isBufferArgs;ha=a.next;ua=a.shader;V=a.uniforms;fa=a.vao;na=ha.blend_color;F=ia.blend_color;u=ha.blend_equation;ca=ia.blend_equation;D=ha.blend_func;xa=ia.blend_func;ka=ha.colorMask;l=ia.colorMask;kc=ha.depth_range;ma=ia.depth_range;G=ha.polygonOffset_offset;Ib=ia.polygonOffset_offset;
zb=ha.sample_coverage;Ue=ia.sample_coverage;se=ha.scissor_box;te=ia.scissor_box;ke=ha.stencil_func;Kd=ia.stencil_func;re=ha.stencil_opBack;td=ia.stencil_opBack;fe=ha.stencil_opFront;we=ia.stencil_opFront;Gd=ha.viewport;kd=ia.viewport;$d={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,e,f,g,h,k;c=ad.next;c!==ad.cur&&(c?E.bindFramebuffer(36160,c.framebuffer):E.bindFramebuffer(36160,null),ad.cur=c);if(ia.dirty){var n,p,q,
m,w,x,t,y,z,D,A,B,C,H,I,Q,J,O,S,M,U,V,X,sa,Y,ea,da,ua,na,pa,la,Cb,Qa,Hb;n=ha.dither;n!==ia.dither&&(n?E.enable(3024):E.disable(3024),ia.dither=n);p=u[0];q=u[1];if(p!==ca[0]||q!==ca[1])E.blendEquationSeparate(p,q),ca[0]=p,ca[1]=q;m=ha.depth_func;m!==ia.depth_func&&(E.depthFunc(m),ia.depth_func=m);w=kc[0];x=kc[1];if(w!==ma[0]||x!==ma[1])E.depthRange(w,x),ma[0]=w,ma[1]=x;t=ha.depth_mask;t!==ia.depth_mask&&(E.depthMask(t),ia.depth_mask=t);y=ka[0];z=ka[1];D=ka[2];A=ka[3];if(y!==l[0]||z!==l[1]||D!==l[2]||
A!==l[3])E.colorMask(y,z,D,A),l[0]=y,l[1]=z,l[2]=D,l[3]=A;B=ha.cull_enable;B!==ia.cull_enable&&(B?E.enable(2884):E.disable(2884),ia.cull_enable=B);C=ha.cull_face;C!==ia.cull_face&&(E.cullFace(C),ia.cull_face=C);H=ha.frontFace;H!==ia.frontFace&&(E.frontFace(H),ia.frontFace=H);I=ha.lineWidth;I!==ia.lineWidth&&(E.lineWidth(I),ia.lineWidth=I);Q=ha.polygonOffset_enable;Q!==ia.polygonOffset_enable&&(Q?E.enable(32823):E.disable(32823),ia.polygonOffset_enable=Q);J=G[0];O=G[1];if(J!==Ib[0]||O!==Ib[1])E.polygonOffset(J,
O),Ib[0]=J,Ib[1]=O;S=ha.sample_alpha;S!==ia.sample_alpha&&(S?E.enable(32926):E.disable(32926),ia.sample_alpha=S);M=ha.sample_enable;M!==ia.sample_enable&&(M?E.enable(32928):E.disable(32928),ia.sample_enable=M);U=zb[0];V=zb[1];if(U!==Ue[0]||V!==Ue[1])E.sampleCoverage(U,V),Ue[0]=U,Ue[1]=V;X=ha.stencil_mask;X!==ia.stencil_mask&&(E.stencilMask(X),ia.stencil_mask=X);sa=ke[0];Y=ke[1];ea=ke[2];if(sa!==Kd[0]||Y!==Kd[1]||ea!==Kd[2])E.stencilFunc(sa,Y,ea),Kd[0]=sa,Kd[1]=Y,Kd[2]=ea;da=fe[0];ua=fe[1];na=fe[2];
pa=fe[3];if(da!==we[0]||ua!==we[1]||na!==we[2]||pa!==we[3])E.stencilOpSeparate(da,ua,na,pa),we[0]=da,we[1]=ua,we[2]=na,we[3]=pa;la=re[0];Cb=re[1];Qa=re[2];Hb=re[3];if(la!==td[0]||Cb!==td[1]||Qa!==td[2]||Hb!==td[3])E.stencilOpSeparate(la,Cb,Qa,Hb),td[0]=la,td[1]=Cb,td[2]=Qa,td[3]=Hb}E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);ia.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;E.disable(2929);ia.depth_enable=!1;E.enable(3089);ia.scissor_enable=
!0;E.disable(2960);ia.stencil_enable=!1;if(e=ia.profile)f=performance.now(),d.count+=b;E.useProgram(qa.program);g=$c.angle_instanced_arrays;var bb;fa.setVAO(null);E.uniform1i(r.location,!1);E.uniform1i(Ja.location,oa.bind());bb=Da.instances;for(h=0;h<b;++h){k=a[h];var jc,Sb,Zb,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,Gd,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,
Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd,se,id,Xc,pf,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf,qf,mf,rf,Af,Bf,Me,Ae,nf,of,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Jf,Kf,Lf,sf,Qf,Hf,tf;jc=k.viewport;Sb=jc.x|0;Zb=jc.y|0;ac="width"in jc?jc.width|0:L.framebufferWidth-Sb;Tb="height"in jc?jc.height|0:L.framebufferHeight-Zb;Ad=
L.viewportWidth;L.viewportWidth=ac;Ub=L.viewportHeight;L.viewportHeight=Tb;E.viewport(Sb,Zb,ac,Tb);kd[0]=Sb;kd[1]=Zb;kd[2]=ac;kd[3]=Tb;Ma=k.viewport;nb=Ma.x|0;vb=Ma.y|0;hb="width"in Ma?Ma.width|0:L.framebufferWidth-nb;Na="height"in Ma?Ma.height|0:L.framebufferHeight-vb;E.scissor(nb,vb,hb,Na);te[0]=nb;te[1]=vb;te[2]=hb;te[3]=Na;pc=fb.call(this,L,k,h);Vb=!1;Uc=null;cb=0;mc=!1;oc=Gc=0;jb=1;kb=0;ra=5126;ab=Sa=wa=ob=0;v(pc)?(Vb=!0,Uc=aa.createStream(34962,pc),ra=Uc.dtype):(Uc=aa.getBuffer(pc))?ra=Uc.dtype:
"constant"in pc?(jb=2,"number"===typeof pc.constant?(wa=pc.constant,Sa=ab=ob=0):(wa=0<pc.constant.length?pc.constant[0]:0,Sa=1<pc.constant.length?pc.constant[1]:0,ab=2<pc.constant.length?pc.constant[2]:0,ob=3<pc.constant.length?pc.constant[3]:0)):(Uc=v(pc.buffer)?aa.createStream(34962,pc.buffer):aa.getBuffer(pc.buffer),ra="type"in pc?$d[pc.type]:Uc.dtype,mc=!!pc.normalized,oc=pc.size|0,Gc=pc.offset|0,kb=pc.stride|0,cb=pc.divisor|0);Ba=Xb.location;db=xc[Ba];if(1===jb){db.buffer||E.enableVertexAttribArray(Ba);
Ia=oc||1;if(db.type!==ra||db.size!==Ia||db.buffer!==Uc||db.normalized!==mc||db.offset!==Gc||db.stride!==kb)E.bindBuffer(34962,Uc.buffer),E.vertexAttribPointer(Ba,Ia,ra,mc,kb,Gc),db.type=ra,db.size=Ia,db.buffer=Uc,db.normalized=mc,db.offset=Gc,db.stride=kb;db.divisor!==cb&&(g.vertexAttribDivisorANGLE(Ba,cb),db.divisor=cb)}else if(db.buffer&&(E.disableVertexAttribArray(Ba),db.buffer=null),db.x!==wa||db.y!==Sa||db.z!==ab||db.w!==ob)E.vertexAttrib4f(Ba,wa,Sa,ab,ob),db.x=wa,db.y=Sa,db.z=ab,db.w=ob;Db=
gb.call(this,L,k,h);Bb=!1;Pa=null;Jc=0;Kb=!1;Wb=Ya=0;ya=1;Gd=0;Ka=5126;za=ib=eb=Ob=0;v(Db)?(Bb=!0,Pa=aa.createStream(34962,Db),Ka=Pa.dtype):(Pa=aa.getBuffer(Db))?Ka=Pa.dtype:"constant"in Db?(ya=2,"number"===typeof Db.constant?(eb=Db.constant,ib=za=Ob=0):(eb=0<Db.constant.length?Db.constant[0]:0,ib=1<Db.constant.length?Db.constant[1]:0,za=2<Db.constant.length?Db.constant[2]:0,Ob=3<Db.constant.length?Db.constant[3]:0)):(Pa=v(Db.buffer)?aa.createStream(34962,Db.buffer):aa.getBuffer(Db.buffer),Ka="type"in
Db?$d[Db.type]:Pa.dtype,Kb=!!Db.normalized,Wb=Db.size|0,Ya=Db.offset|0,Gd=Db.stride|0,Jc=Db.divisor|0);fc=sc.location;Ea=xc[fc];if(1===ya){Ea.buffer||E.enableVertexAttribArray(fc);pb=Wb||1;if(Ea.type!==Ka||Ea.size!==pb||Ea.buffer!==Pa||Ea.normalized!==Kb||Ea.offset!==Ya||Ea.stride!==Gd)E.bindBuffer(34962,Pa.buffer),E.vertexAttribPointer(fc,pb,Ka,Kb,Gd,Ya),Ea.type=Ka,Ea.size=pb,Ea.buffer=Pa,Ea.normalized=Kb,Ea.offset=Ya,Ea.stride=Gd;Ea.divisor!==Jc&&(g.vertexAttribDivisorANGLE(fc,Jc),Ea.divisor=Jc)}else if(Ea.buffer&&
(E.disableVertexAttribArray(fc),Ea.buffer=null),Ea.x!==eb||Ea.y!==ib||Ea.z!==za||Ea.w!==Ob)E.vertexAttrib4f(fc,eb,ib,za,Ob),Ea.x=eb,Ea.y=ib,Ea.z=za,Ea.w=Ob;qb=Rb.call(this,L,k,h);Va=!1;Wa=null;nc=0;cd=!1;Ta=vc=0;Mb=1;dd=0;Fa=5126;lb=Ca=Oa=Kc=0;v(qb)?(Va=!0,Wa=aa.createStream(34962,qb),Fa=Wa.dtype):(Wa=aa.getBuffer(qb))?Fa=Wa.dtype:"constant"in qb?(Mb=2,"number"===typeof qb.constant?(Oa=qb.constant,Ca=lb=Kc=0):(Oa=0<qb.constant.length?qb.constant[0]:0,Ca=1<qb.constant.length?qb.constant[1]:0,lb=2<
qb.constant.length?qb.constant[2]:0,Kc=3<qb.constant.length?qb.constant[3]:0)):(Wa=v(qb.buffer)?aa.createStream(34962,qb.buffer):aa.getBuffer(qb.buffer),Fa="type"in qb?$d[qb.type]:Wa.dtype,cd=!!qb.normalized,Ta=qb.size|0,vc=qb.offset|0,dd=qb.stride|0,nc=qb.divisor|0);wb=qc.location;Eb=xc[wb];if(1===Mb){Eb.buffer||E.enableVertexAttribArray(wb);rb=Ta||1;if(Eb.type!==Fa||Eb.size!==rb||Eb.buffer!==Wa||Eb.normalized!==cd||Eb.offset!==vc||Eb.stride!==dd)E.bindBuffer(34962,Wa.buffer),E.vertexAttribPointer(wb,
rb,Fa,cd,dd,vc),Eb.type=Fa,Eb.size=rb,Eb.buffer=Wa,Eb.normalized=cd,Eb.offset=vc,Eb.stride=dd;Eb.divisor!==nc&&(g.vertexAttribDivisorANGLE(wb,nc),Eb.divisor=nc)}else if(Eb.buffer&&(E.disableVertexAttribArray(wb),Eb.buffer=null),Eb.x!==Oa||Eb.y!==Ca||Eb.z!==lb||Eb.w!==Kc)E.vertexAttrib4f(wb,Oa,Ca,lb,Kc),Eb.x=Oa,Eb.y=Ca,Eb.z=lb,Eb.w=Kc;wc=ta.call(this,L,k,h);xb=!1;Dd=null;uc=0;Wd=!1;nd=Mc=0;od=1;Yb=0;cc=5126;mb=$b=Ga=Pb=0;v(wc)?(xb=!0,Dd=aa.createStream(34962,wc),cc=Dd.dtype):(Dd=aa.getBuffer(wc))?
cc=Dd.dtype:"constant"in wc?(od=2,"number"===typeof wc.constant?(Ga=wc.constant,$b=mb=Pb=0):(Ga=0<wc.constant.length?wc.constant[0]:0,$b=1<wc.constant.length?wc.constant[1]:0,mb=2<wc.constant.length?wc.constant[2]:0,Pb=3<wc.constant.length?wc.constant[3]:0)):(Dd=v(wc.buffer)?aa.createStream(34962,wc.buffer):aa.getBuffer(wc.buffer),cc="type"in wc?$d[wc.type]:Dd.dtype,Wd=!!wc.normalized,nd=wc.size|0,Mc=wc.offset|0,Yb=wc.stride|0,uc=wc.divisor|0);yb=ud.location;Nb=xc[yb];if(1===od){Nb.buffer||E.enableVertexAttribArray(yb);
Qb=nd||1;if(Nb.type!==cc||Nb.size!==Qb||Nb.buffer!==Dd||Nb.normalized!==Wd||Nb.offset!==Mc||Nb.stride!==Yb)E.bindBuffer(34962,Dd.buffer),E.vertexAttribPointer(yb,Qb,cc,Wd,Yb,Mc),Nb.type=cc,Nb.size=Qb,Nb.buffer=Dd,Nb.normalized=Wd,Nb.offset=Mc,Nb.stride=Yb;Nb.divisor!==uc&&(g.vertexAttribDivisorANGLE(yb,uc),Nb.divisor=uc)}else if(Nb.buffer&&(E.disableVertexAttribArray(yb),Nb.buffer=null),Nb.x!==Ga||Nb.y!==$b||Nb.z!==mb||Nb.w!==Pb)E.vertexAttrib4f(yb,Ga,$b,mb,Pb),Nb.x=Ga,Nb.y=$b,Nb.z=mb,Nb.w=Pb;gc=
Aa.call(this,L,k,h);ic=!1;Rc=null;Bc=0;Cc=!1;Nc=Dc=0;Zc=1;Sc=0;Oc=5126;Hc=Pc=Gb=Lb=0;v(gc)?(ic=!0,Rc=aa.createStream(34962,gc),Oc=Rc.dtype):(Rc=aa.getBuffer(gc))?Oc=Rc.dtype:"constant"in gc?(Zc=2,"number"===typeof gc.constant?(Gb=gc.constant,Pc=Hc=Lb=0):(Gb=0<gc.constant.length?gc.constant[0]:0,Pc=1<gc.constant.length?gc.constant[1]:0,Hc=2<gc.constant.length?gc.constant[2]:0,Lb=3<gc.constant.length?gc.constant[3]:0)):(Rc=v(gc.buffer)?aa.createStream(34962,gc.buffer):aa.getBuffer(gc.buffer),Oc="type"in
gc?$d[gc.type]:Rc.dtype,Cc=!!gc.normalized,Nc=gc.size|0,Dc=gc.offset|0,Sc=gc.stride|0,Bc=gc.divisor|0);Tc=sb.location;hc=xc[Tc];if(1===Zc){hc.buffer||E.enableVertexAttribArray(Tc);Wc=Nc||1;if(hc.type!==Oc||hc.size!==Wc||hc.buffer!==Rc||hc.normalized!==Cc||hc.offset!==Dc||hc.stride!==Sc)E.bindBuffer(34962,Rc.buffer),E.vertexAttribPointer(Tc,Wc,Oc,Cc,Sc,Dc),hc.type=Oc,hc.size=Wc,hc.buffer=Rc,hc.normalized=Cc,hc.offset=Dc,hc.stride=Sc;hc.divisor!==Bc&&(g.vertexAttribDivisorANGLE(Tc,Bc),hc.divisor=Bc)}else if(hc.buffer&&
(E.disableVertexAttribArray(Tc),hc.buffer=null),hc.x!==Gb||hc.y!==Pc||hc.z!==Hc||hc.w!==Lb)E.vertexAttrib4f(Tc,Gb,Pc,Hc,Lb),hc.x=Gb,hc.y=Pc,hc.z=Hc,hc.w=Lb;Jd=Z.call(this,L,k,h);se=!1;id=null;Xc=0;pf=!1;ie=wd=0;ue=1;le=0;Hd=5126;pd=Ec=fd=Ed=0;v(Jd)?(se=!0,id=aa.createStream(34962,Jd),Hd=id.dtype):(id=aa.getBuffer(Jd))?Hd=id.dtype:"constant"in Jd?(ue=2,"number"===typeof Jd.constant?(fd=Jd.constant,Ec=pd=Ed=0):(fd=0<Jd.constant.length?Jd.constant[0]:0,Ec=1<Jd.constant.length?Jd.constant[1]:0,pd=2<Jd.constant.length?
Jd.constant[2]:0,Ed=3<Jd.constant.length?Jd.constant[3]:0)):(id=v(Jd.buffer)?aa.createStream(34962,Jd.buffer):aa.getBuffer(Jd.buffer),Hd="type"in Jd?$d[Jd.type]:id.dtype,pf=!!Jd.normalized,ie=Jd.size|0,wd=Jd.offset|0,le=Jd.stride|0,Xc=Jd.divisor|0);hd=Za.location;bd=xc[hd];if(1===ue){bd.buffer||E.enableVertexAttribArray(hd);jd=ie||1;if(bd.type!==Hd||bd.size!==jd||bd.buffer!==id||bd.normalized!==pf||bd.offset!==wd||bd.stride!==le)E.bindBuffer(34962,id.buffer),E.vertexAttribPointer(hd,jd,Hd,pf,le,wd),
bd.type=Hd,bd.size=jd,bd.buffer=id,bd.normalized=pf,bd.offset=wd,bd.stride=le;bd.divisor!==Xc&&(g.vertexAttribDivisorANGLE(hd,Xc),bd.divisor=Xc)}else if(bd.buffer&&(E.disableVertexAttribArray(hd),bd.buffer=null),bd.x!==fd||bd.y!==Ec||bd.z!==pd||bd.w!==Ed)E.vertexAttrib4f(hd,fd,Ec,pd,Ed),bd.x=fd,bd.y=Ec,bd.z=pd,bd.w=Ed;zd=K.call(this,L,k,h);Bd=!1;ve=null;me=0;xe=!1;de=ee=0;ce=1;oe=0;ae=5126;pe=Vc=yc=ge=0;v(zd)?(Bd=!0,ve=aa.createStream(34962,zd),ae=ve.dtype):(ve=aa.getBuffer(zd))?ae=ve.dtype:"constant"in
zd?(ce=2,"number"===typeof zd.constant?(yc=zd.constant,Vc=pe=ge=0):(yc=0<zd.constant.length?zd.constant[0]:0,Vc=1<zd.constant.length?zd.constant[1]:0,pe=2<zd.constant.length?zd.constant[2]:0,ge=3<zd.constant.length?zd.constant[3]:0)):(ve=v(zd.buffer)?aa.createStream(34962,zd.buffer):aa.getBuffer(zd.buffer),ae="type"in zd?$d[zd.type]:ve.dtype,xe=!!zd.normalized,de=zd.size|0,ee=zd.offset|0,oe=zd.stride|0,me=zd.divisor|0);je=T.location;Fd=xc[je];if(1===ce){Fd.buffer||E.enableVertexAttribArray(je);Md=
de||4;if(Fd.type!==ae||Fd.size!==Md||Fd.buffer!==ve||Fd.normalized!==xe||Fd.offset!==ee||Fd.stride!==oe)E.bindBuffer(34962,ve.buffer),E.vertexAttribPointer(je,Md,ae,xe,oe,ee),Fd.type=ae,Fd.size=Md,Fd.buffer=ve,Fd.normalized=xe,Fd.offset=ee,Fd.stride=oe;Fd.divisor!==me&&(g.vertexAttribDivisorANGLE(je,me),Fd.divisor=me)}else if(Fd.buffer&&(E.disableVertexAttribArray(je),Fd.buffer=null),Fd.x!==yc||Fd.y!==Vc||Fd.z!==pe||Fd.w!==ge)E.vertexAttrib4f(je,yc,Vc,pe,ge),Fd.x=yc,Fd.y=Vc,Fd.z=pe,Fd.w=ge;Od=N.call(this,
L,k,h);Pd=!1;he=null;Ee=0;ye=!1;Ze=ne=0;Ne=1;Ke=0;qe=5126;He=Ge=Fe=Be=0;v(Od)?(Pd=!0,he=aa.createStream(34962,Od),qe=he.dtype):(he=aa.getBuffer(Od))?qe=he.dtype:"constant"in Od?(Ne=2,"number"===typeof Od.constant?(Fe=Od.constant,Ge=He=Be=0):(Fe=0<Od.constant.length?Od.constant[0]:0,Ge=1<Od.constant.length?Od.constant[1]:0,He=2<Od.constant.length?Od.constant[2]:0,Be=3<Od.constant.length?Od.constant[3]:0)):(he=v(Od.buffer)?aa.createStream(34962,Od.buffer):aa.getBuffer(Od.buffer),qe="type"in Od?$d[Od.type]:
he.dtype,ye=!!Od.normalized,Ze=Od.size|0,ne=Od.offset|0,Ke=Od.stride|0,Ee=Od.divisor|0);Ce=Jb.location;Id=xc[Ce];if(1===Ne){Id.buffer||E.enableVertexAttribArray(Ce);Td=Ze||4;if(Id.type!==qe||Id.size!==Td||Id.buffer!==he||Id.normalized!==ye||Id.offset!==ne||Id.stride!==Ke)E.bindBuffer(34962,he.buffer),E.vertexAttribPointer(Ce,Td,qe,ye,Ke,ne),Id.type=qe,Id.size=Td,Id.buffer=he,Id.normalized=ye,Id.offset=ne,Id.stride=Ke;Id.divisor!==Ee&&(g.vertexAttribDivisorANGLE(Ce,Ee),Id.divisor=Ee)}else if(Id.buffer&&
(E.disableVertexAttribArray(Ce),Id.buffer=null),Id.x!==Fe||Id.y!==Ge||Id.z!==He||Id.w!==Be)E.vertexAttrib4f(Ce,Fe,Ge,He,Be),Id.x=Fe,Id.y=Ge,Id.z=He,Id.w=Be;Zd=R.call(this,L,k,h);be=!1;Ie=null;yd=0;Qd=!1;Je=ze=0;ef=1;Ye=0;Oe=5126;Pe=Te=Xe=Le=0;v(Zd)?(be=!0,Ie=aa.createStream(34962,Zd),Oe=Ie.dtype):(Ie=aa.getBuffer(Zd))?Oe=Ie.dtype:"constant"in Zd?(ef=2,"number"===typeof Zd.constant?(Xe=Zd.constant,Te=Pe=Le=0):(Xe=0<Zd.constant.length?Zd.constant[0]:0,Te=1<Zd.constant.length?Zd.constant[1]:0,Pe=2<Zd.constant.length?
Zd.constant[2]:0,Le=3<Zd.constant.length?Zd.constant[3]:0)):(Ie=v(Zd.buffer)?aa.createStream(34962,Zd.buffer):aa.getBuffer(Zd.buffer),Oe="type"in Zd?$d[Zd.type]:Ie.dtype,Qd=!!Zd.normalized,Je=Zd.size|0,ze=Zd.offset|0,Ye=Zd.stride|0,yd=Zd.divisor|0);Qe=ja.location;Rd=xc[Qe];if(1===ef){Rd.buffer||E.enableVertexAttribArray(Qe);Xd=Je||1;if(Rd.type!==Oe||Rd.size!==Xd||Rd.buffer!==Ie||Rd.normalized!==Qd||Rd.offset!==ze||Rd.stride!==Ye)E.bindBuffer(34962,Ie.buffer),E.vertexAttribPointer(Qe,Xd,Oe,Qd,Ye,ze),
Rd.type=Oe,Rd.size=Xd,Rd.buffer=Ie,Rd.normalized=Qd,Rd.offset=ze,Rd.stride=Ye;Rd.divisor!==yd&&(g.vertexAttribDivisorANGLE(Qe,yd),Rd.divisor=yd)}else if(Rd.buffer&&(E.disableVertexAttribArray(Qe),Rd.buffer=null),Rd.x!==Xe||Rd.y!==Te||Rd.z!==Pe||Rd.w!==Le)E.vertexAttrib4f(Qe,Xe,Te,Pe,Le),Rd.x=Xe,Rd.y=Te,Rd.z=Pe,Rd.w=Le;Re=L.pixelRatio;h&&ff===Re||(ff=Re,E.uniform1f(dc.location,Re));lf=P.call(this,L,k,h);bf=lf[0];hf=lf[1];h&&gf===bf&&jf===hf||(gf=bf,jf=hf,E.uniform2f(Ha.location,bf,hf));qf=k.scale;
mf=qf[0];Af=qf[1];h&&rf===mf&&Bf===Af||(rf=mf,Bf=Af,E.uniform2f(Xa.location,mf,Af));Me=k.scaleFract;Ae=Me[0];of=Me[1];h&&nf===Ae&&Cf===of||(nf=Ae,Cf=of,E.uniform2f(W.location,Ae,of));Ff=k.translate;zf=Ff[0];Ef=Ff[1];h&&Df===zf&&vf===Ef||(Df=zf,vf=Ef,E.uniform2f(ga.location,zf,Ef));wf=k.translateFract;uf=wf[0];yf=wf[1];h&&xf===uf&&If===yf||(xf=uf,If=yf,E.uniform2f(va.location,uf,yf));Jf=k.opacity;h&&Kf===Jf||(Kf=Jf,E.uniform1f(ba.location,Jf));Lf=k.elements;sf=null;(sf=(Qf=v(Lf))?tb.createStream(Lf):
tb.getElements(Lf))&&E.bindBuffer(34963,sf.buffer.buffer);Hf=k.offset;if(tf=k.count)0<bb?sf?g.drawElementsInstancedANGLE(0,tf,sf.type,Hf<<(sf.type-5121>>1),bb):g.drawArraysInstancedANGLE(0,Hf,tf,bb):0>bb&&(sf?E.drawElements(0,tf,sf.type,Hf<<(sf.type-5121>>1)):E.drawArrays(0,Hf,tf)),L.viewportWidth=Ad,L.viewportHeight=Ub,Vb&&aa.destroyStream(Uc),Bb&&aa.destroyStream(Pa),Va&&aa.destroyStream(Wa),xb&&aa.destroyStream(Dd),ic&&aa.destroyStream(Rc),se&&aa.destroyStream(id),Bd&&aa.destroyStream(ve),Pd&&
aa.destroyStream(he),be&&aa.destroyStream(Ie),Qf&&tb.destroyStream(sf)}oa.unbind();ia.dirty=!0;fa.setVAO(null);e&&(d.cpuTime+=performance.now()-f)},draw:function(a){var e,g,h,n,p,q,z,D,A,B,C,K,N,Q,P,J,O,S,R,U,V,X,Y,Z,da,ua,na,la,oa,ta,qa,Aa,Ab,La,ub,Ua,pa,gb,Cb,Qa,Hb,bb,fb,Sb,Rb,ac,Tb,Zb,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,Gd,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,
yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd,se,id,Xc,pf,wd,ie,ue,le,Hd,Ed,fd,Ec,pd,hd,bd,jd,zd,Bd,ve,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ze;e=ad.next;e!==ad.cur&&(e?E.bindFramebuffer(36160,e.framebuffer):E.bindFramebuffer(36160,null),ad.cur=e);if(ia.dirty){var Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf;Ne=ha.dither;Ne!==ia.dither&&(Ne?E.enable(3024):E.disable(3024),ia.dither=Ne);Ke=u[0];qe=u[1];if(Ke!==
ca[0]||qe!==ca[1])E.blendEquationSeparate(Ke,qe),ca[0]=Ke,ca[1]=qe;Be=ha.depth_func;Be!==ia.depth_func&&(E.depthFunc(Be),ia.depth_func=Be);Fe=kc[0];Ge=kc[1];if(Fe!==ma[0]||Ge!==ma[1])E.depthRange(Fe,Ge),ma[0]=Fe,ma[1]=Ge;He=ha.depth_mask;He!==ia.depth_mask&&(E.depthMask(He),ia.depth_mask=He);Ce=ka[0];Id=ka[1];Td=ka[2];Zd=ka[3];if(Ce!==l[0]||Id!==l[1]||Td!==l[2]||Zd!==l[3])E.colorMask(Ce,Id,Td,Zd),l[0]=Ce,l[1]=Id,l[2]=Td,l[3]=Zd;be=ha.cull_enable;be!==ia.cull_enable&&(be?E.enable(2884):E.disable(2884),
ia.cull_enable=be);Ie=ha.cull_face;Ie!==ia.cull_face&&(E.cullFace(Ie),ia.cull_face=Ie);yd=ha.frontFace;yd!==ia.frontFace&&(E.frontFace(yd),ia.frontFace=yd);Qd=ha.lineWidth;Qd!==ia.lineWidth&&(E.lineWidth(Qd),ia.lineWidth=Qd);ze=ha.polygonOffset_enable;ze!==ia.polygonOffset_enable&&(ze?E.enable(32823):E.disable(32823),ia.polygonOffset_enable=ze);Je=G[0];ef=G[1];if(Je!==Ib[0]||ef!==Ib[1])E.polygonOffset(Je,ef),Ib[0]=Je,Ib[1]=ef;Ye=ha.sample_alpha;Ye!==ia.sample_alpha&&(Ye?E.enable(32926):E.disable(32926),
ia.sample_alpha=Ye);Oe=ha.sample_enable;Oe!==ia.sample_enable&&(Oe?E.enable(32928):E.disable(32928),ia.sample_enable=Oe);Le=zb[0];Xe=zb[1];if(Le!==Ue[0]||Xe!==Ue[1])E.sampleCoverage(Le,Xe),Ue[0]=Le,Ue[1]=Xe;Te=ha.stencil_mask;Te!==ia.stencil_mask&&(E.stencilMask(Te),ia.stencil_mask=Te);Pe=ke[0];Qe=ke[1];Rd=ke[2];if(Pe!==Kd[0]||Qe!==Kd[1]||Rd!==Kd[2])E.stencilFunc(Pe,Qe,Rd),Kd[0]=Pe,Kd[1]=Qe,Kd[2]=Rd;Xd=fe[0];Re=fe[1];ff=fe[2];lf=fe[3];if(Xd!==we[0]||Re!==we[1]||ff!==we[2]||lf!==we[3])E.stencilOpSeparate(Xd,
Re,ff,lf),we[0]=Xd,we[1]=Re,we[2]=ff,we[3]=lf;bf=re[0];gf=re[1];hf=re[2];jf=re[3];if(bf!==td[0]||gf!==td[1]||hf!==td[2]||jf!==td[3])E.stencilOpSeparate(bf,gf,hf,jf),td[0]=bf,td[1]=gf,td[2]=hf,td[3]=jf}g=a.viewport;h=g.x|0;n=g.y|0;p="width"in g?g.width|0:L.framebufferWidth-h;q="height"in g?g.height|0:L.framebufferHeight-n;z=L.viewportWidth;L.viewportWidth=p;D=L.viewportHeight;L.viewportHeight=q;E.viewport(h,n,p,q);kd[0]=h;kd[1]=n;kd[2]=p;kd[3]=q;E.blendColor(0,0,0,1);F[0]=0;F[1]=0;F[2]=0;F[3]=1;E.enable(3042);
ia.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;E.disable(2929);ia.depth_enable=!1;A=a.viewport;B=A.x|0;C=A.y|0;K="width"in A?A.width|0:L.framebufferWidth-B;N="height"in A?A.height|0:L.framebufferHeight-C;E.scissor(B,C,K,N);te[0]=B;te[1]=C;te[2]=K;te[3]=N;E.enable(3089);ia.scissor_enable=!0;E.disable(2960);ia.stencil_enable=!1;if(Q=ia.profile)P=performance.now(),d.count++;E.useProgram(k.program);J=$c.angle_instanced_arrays;fa.setVAO(null);O=m.call(this,
L,a,0);S=!1;R=null;U=0;V=!1;Y=X=0;Z=1;da=0;ua=5126;ta=oa=la=na=0;v(O)?(S=!0,R=aa.createStream(34962,O),ua=R.dtype):(R=aa.getBuffer(O))?ua=R.dtype:"constant"in O?(Z=2,"number"===typeof O.constant?(la=O.constant,oa=ta=na=0):(la=0<O.constant.length?O.constant[0]:0,oa=1<O.constant.length?O.constant[1]:0,ta=2<O.constant.length?O.constant[2]:0,na=3<O.constant.length?O.constant[3]:0)):(R=v(O.buffer)?aa.createStream(34962,O.buffer):aa.getBuffer(O.buffer),ua="type"in O?$d[O.type]:R.dtype,V=!!O.normalized,
Y=O.size|0,X=O.offset|0,da=O.stride|0,U=O.divisor|0);qa=Xb.location;Aa=xc[qa];if(1===Z){Aa.buffer||E.enableVertexAttribArray(qa);Ab=Y||1;if(Aa.type!==ua||Aa.size!==Ab||Aa.buffer!==R||Aa.normalized!==V||Aa.offset!==X||Aa.stride!==da)E.bindBuffer(34962,R.buffer),E.vertexAttribPointer(qa,Ab,ua,V,da,X),Aa.type=ua,Aa.size=Ab,Aa.buffer=R,Aa.normalized=V,Aa.offset=X,Aa.stride=da;Aa.divisor!==U&&(J.vertexAttribDivisorANGLE(qa,U),Aa.divisor=U)}else if(Aa.buffer&&(E.disableVertexAttribArray(qa),Aa.buffer=null),
Aa.x!==la||Aa.y!==oa||Aa.z!==ta||Aa.w!==na)E.vertexAttrib4f(qa,la,oa,ta,na),Aa.x=la,Aa.y=oa,Aa.z=ta,Aa.w=na;La=f.call(this,L,a,0);ub=!1;Ua=null;pa=0;gb=!1;Qa=Cb=0;Hb=1;bb=0;fb=5126;Tb=ac=Rb=Sb=0;v(La)?(ub=!0,Ua=aa.createStream(34962,La),fb=Ua.dtype):(Ua=aa.getBuffer(La))?fb=Ua.dtype:"constant"in La?(Hb=2,"number"===typeof La.constant?(Rb=La.constant,ac=Tb=Sb=0):(Rb=0<La.constant.length?La.constant[0]:0,ac=1<La.constant.length?La.constant[1]:0,Tb=2<La.constant.length?La.constant[2]:0,Sb=3<La.constant.length?
La.constant[3]:0)):(Ua=v(La.buffer)?aa.createStream(34962,La.buffer):aa.getBuffer(La.buffer),fb="type"in La?$d[La.type]:Ua.dtype,gb=!!La.normalized,Qa=La.size|0,Cb=La.offset|0,bb=La.stride|0,pa=La.divisor|0);Zb=sc.location;Ub=xc[Zb];if(1===Hb){Ub.buffer||E.enableVertexAttribArray(Zb);Ma=Qa||1;if(Ub.type!==fb||Ub.size!==Ma||Ub.buffer!==Ua||Ub.normalized!==gb||Ub.offset!==Cb||Ub.stride!==bb)E.bindBuffer(34962,Ua.buffer),E.vertexAttribPointer(Zb,Ma,fb,gb,bb,Cb),Ub.type=fb,Ub.size=Ma,Ub.buffer=Ua,Ub.normalized=
gb,Ub.offset=Cb,Ub.stride=bb;Ub.divisor!==pa&&(J.vertexAttribDivisorANGLE(Zb,pa),Ub.divisor=pa)}else if(Ub.buffer&&(E.disableVertexAttribArray(Zb),Ub.buffer=null),Ub.x!==Rb||Ub.y!==ac||Ub.z!==Tb||Ub.w!==Sb)E.vertexAttrib4f(Zb,Rb,ac,Tb,Sb),Ub.x=Rb,Ub.y=ac,Ub.z=Tb,Ub.w=Sb;nb=b.call(this,L,a,0);vb=!1;hb=null;Na=0;pc=!1;Uc=Vb=0;cb=1;mc=0;Gc=5126;ra=kb=jb=oc=0;v(nb)?(vb=!0,hb=aa.createStream(34962,nb),Gc=hb.dtype):(hb=aa.getBuffer(nb))?Gc=hb.dtype:"constant"in nb?(cb=2,"number"===typeof nb.constant?(jb=
nb.constant,kb=ra=oc=0):(jb=0<nb.constant.length?nb.constant[0]:0,kb=1<nb.constant.length?nb.constant[1]:0,ra=2<nb.constant.length?nb.constant[2]:0,oc=3<nb.constant.length?nb.constant[3]:0)):(hb=v(nb.buffer)?aa.createStream(34962,nb.buffer):aa.getBuffer(nb.buffer),Gc="type"in nb?$d[nb.type]:hb.dtype,pc=!!nb.normalized,Uc=nb.size|0,Vb=nb.offset|0,mc=nb.stride|0,Na=nb.divisor|0);ob=qc.location;wa=xc[ob];if(1===cb){wa.buffer||E.enableVertexAttribArray(ob);Sa=Uc||1;if(wa.type!==Gc||wa.size!==Sa||wa.buffer!==
hb||wa.normalized!==pc||wa.offset!==Vb||wa.stride!==mc)E.bindBuffer(34962,hb.buffer),E.vertexAttribPointer(ob,Sa,Gc,pc,mc,Vb),wa.type=Gc,wa.size=Sa,wa.buffer=hb,wa.normalized=pc,wa.offset=Vb,wa.stride=mc;wa.divisor!==Na&&(J.vertexAttribDivisorANGLE(ob,Na),wa.divisor=Na)}else if(wa.buffer&&(E.disableVertexAttribArray(ob),wa.buffer=null),wa.x!==jb||wa.y!==kb||wa.z!==ra||wa.w!==oc)E.vertexAttrib4f(ob,jb,kb,ra,oc),wa.x=jb,wa.y=kb,wa.z=ra,wa.w=oc;ab=t.call(this,L,a,0);Ba=!1;db=null;Ia=0;Db=!1;Pa=Bb=0;
Jc=1;Kb=0;Ya=5126;Ka=Gd=ya=Wb=0;v(ab)?(Ba=!0,db=aa.createStream(34962,ab),Ya=db.dtype):(db=aa.getBuffer(ab))?Ya=db.dtype:"constant"in ab?(Jc=2,"number"===typeof ab.constant?(ya=ab.constant,Gd=Ka=Wb=0):(ya=0<ab.constant.length?ab.constant[0]:0,Gd=1<ab.constant.length?ab.constant[1]:0,Ka=2<ab.constant.length?ab.constant[2]:0,Wb=3<ab.constant.length?ab.constant[3]:0)):(db=v(ab.buffer)?aa.createStream(34962,ab.buffer):aa.getBuffer(ab.buffer),Ya="type"in ab?$d[ab.type]:db.dtype,Db=!!ab.normalized,Pa=ab.size|
0,Bb=ab.offset|0,Kb=ab.stride|0,Ia=ab.divisor|0);Ob=ud.location;eb=xc[Ob];if(1===Jc){eb.buffer||E.enableVertexAttribArray(Ob);ib=Pa||1;if(eb.type!==Ya||eb.size!==ib||eb.buffer!==db||eb.normalized!==Db||eb.offset!==Bb||eb.stride!==Kb)E.bindBuffer(34962,db.buffer),E.vertexAttribPointer(Ob,ib,Ya,Db,Kb,Bb),eb.type=Ya,eb.size=ib,eb.buffer=db,eb.normalized=Db,eb.offset=Bb,eb.stride=Kb;eb.divisor!==Ia&&(J.vertexAttribDivisorANGLE(Ob,Ia),eb.divisor=Ia)}else if(eb.buffer&&(E.disableVertexAttribArray(Ob),eb.buffer=
null),eb.x!==ya||eb.y!==Gd||eb.z!==Ka||eb.w!==Wb)E.vertexAttrib4f(Ob,ya,Gd,Ka,Wb),eb.x=ya,eb.y=Gd,eb.z=Ka,eb.w=Wb;za=c.call(this,L,a,0);fc=!1;Ea=null;pb=0;qb=!1;Wa=Va=0;nc=1;cd=0;vc=5126;Fa=dd=Mb=Ta=0;v(za)?(fc=!0,Ea=aa.createStream(34962,za),vc=Ea.dtype):(Ea=aa.getBuffer(za))?vc=Ea.dtype:"constant"in za?(nc=2,"number"===typeof za.constant?(Mb=za.constant,dd=Fa=Ta=0):(Mb=0<za.constant.length?za.constant[0]:0,dd=1<za.constant.length?za.constant[1]:0,Fa=2<za.constant.length?za.constant[2]:0,Ta=3<za.constant.length?
za.constant[3]:0)):(Ea=v(za.buffer)?aa.createStream(34962,za.buffer):aa.getBuffer(za.buffer),vc="type"in za?$d[za.type]:Ea.dtype,qb=!!za.normalized,Wa=za.size|0,Va=za.offset|0,cd=za.stride|0,pb=za.divisor|0);Kc=sb.location;Oa=xc[Kc];if(1===nc){Oa.buffer||E.enableVertexAttribArray(Kc);Ca=Wa||1;if(Oa.type!==vc||Oa.size!==Ca||Oa.buffer!==Ea||Oa.normalized!==qb||Oa.offset!==Va||Oa.stride!==cd)E.bindBuffer(34962,Ea.buffer),E.vertexAttribPointer(Kc,Ca,vc,qb,cd,Va),Oa.type=vc,Oa.size=Ca,Oa.buffer=Ea,Oa.normalized=
qb,Oa.offset=Va,Oa.stride=cd;Oa.divisor!==pb&&(J.vertexAttribDivisorANGLE(Kc,pb),Oa.divisor=pb)}else if(Oa.buffer&&(E.disableVertexAttribArray(Kc),Oa.buffer=null),Oa.x!==Mb||Oa.y!==dd||Oa.z!==Fa||Oa.w!==Ta)E.vertexAttrib4f(Kc,Mb,dd,Fa,Ta),Oa.x=Mb,Oa.y=dd,Oa.z=Fa,Oa.w=Ta;lb=x.call(this,L,a,0);wb=!1;Eb=null;rb=0;wc=!1;Dd=xb=0;uc=1;Wd=0;Mc=5126;cc=Yb=od=nd=0;v(lb)?(wb=!0,Eb=aa.createStream(34962,lb),Mc=Eb.dtype):(Eb=aa.getBuffer(lb))?Mc=Eb.dtype:"constant"in lb?(uc=2,"number"===typeof lb.constant?(od=
lb.constant,Yb=cc=nd=0):(od=0<lb.constant.length?lb.constant[0]:0,Yb=1<lb.constant.length?lb.constant[1]:0,cc=2<lb.constant.length?lb.constant[2]:0,nd=3<lb.constant.length?lb.constant[3]:0)):(Eb=v(lb.buffer)?aa.createStream(34962,lb.buffer):aa.getBuffer(lb.buffer),Mc="type"in lb?$d[lb.type]:Eb.dtype,wc=!!lb.normalized,Dd=lb.size|0,xb=lb.offset|0,Wd=lb.stride|0,rb=lb.divisor|0);Pb=Za.location;Ga=xc[Pb];if(1===uc){Ga.buffer||E.enableVertexAttribArray(Pb);$b=Dd||1;if(Ga.type!==Mc||Ga.size!==$b||Ga.buffer!==
Eb||Ga.normalized!==wc||Ga.offset!==xb||Ga.stride!==Wd)E.bindBuffer(34962,Eb.buffer),E.vertexAttribPointer(Pb,$b,Mc,wc,Wd,xb),Ga.type=Mc,Ga.size=$b,Ga.buffer=Eb,Ga.normalized=wc,Ga.offset=xb,Ga.stride=Wd;Ga.divisor!==rb&&(J.vertexAttribDivisorANGLE(Pb,rb),Ga.divisor=rb)}else if(Ga.buffer&&(E.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==od||Ga.y!==Yb||Ga.z!==cc||Ga.w!==nd)E.vertexAttrib4f(Pb,od,Yb,cc,nd),Ga.x=od,Ga.y=Yb,Ga.z=cc,Ga.w=nd;mb=M.call(this,L,a,0);yb=!1;Nb=null;Qb=0;gc=!1;Rc=ic=0;
Bc=1;Cc=0;Dc=5126;Oc=Sc=Zc=Nc=0;v(mb)?(yb=!0,Nb=aa.createStream(34962,mb),Dc=Nb.dtype):(Nb=aa.getBuffer(mb))?Dc=Nb.dtype:"constant"in mb?(Bc=2,"number"===typeof mb.constant?(Zc=mb.constant,Sc=Oc=Nc=0):(Zc=0<mb.constant.length?mb.constant[0]:0,Sc=1<mb.constant.length?mb.constant[1]:0,Oc=2<mb.constant.length?mb.constant[2]:0,Nc=3<mb.constant.length?mb.constant[3]:0)):(Nb=v(mb.buffer)?aa.createStream(34962,mb.buffer):aa.getBuffer(mb.buffer),Dc="type"in mb?$d[mb.type]:Nb.dtype,gc=!!mb.normalized,Rc=mb.size|
0,ic=mb.offset|0,Cc=mb.stride|0,Qb=mb.divisor|0);Lb=T.location;Gb=xc[Lb];if(1===Bc){Gb.buffer||E.enableVertexAttribArray(Lb);Pc=Rc||4;if(Gb.type!==Dc||Gb.size!==Pc||Gb.buffer!==Nb||Gb.normalized!==gc||Gb.offset!==ic||Gb.stride!==Cc)E.bindBuffer(34962,Nb.buffer),E.vertexAttribPointer(Lb,Pc,Dc,gc,Cc,ic),Gb.type=Dc,Gb.size=Pc,Gb.buffer=Nb,Gb.normalized=gc,Gb.offset=ic,Gb.stride=Cc;Gb.divisor!==Qb&&(J.vertexAttribDivisorANGLE(Lb,Qb),Gb.divisor=Qb)}else if(Gb.buffer&&(E.disableVertexAttribArray(Lb),Gb.buffer=
null),Gb.x!==Zc||Gb.y!==Sc||Gb.z!==Oc||Gb.w!==Nc)E.vertexAttrib4f(Lb,Zc,Sc,Oc,Nc),Gb.x=Zc,Gb.y=Sc,Gb.z=Oc,Gb.w=Nc;Hc=ea.call(this,L,a,0);Tc=!1;hc=null;Wc=0;Jd=!1;id=se=0;Xc=1;pf=0;wd=5126;Hd=le=ue=ie=0;v(Hc)?(Tc=!0,hc=aa.createStream(34962,Hc),wd=hc.dtype):(hc=aa.getBuffer(Hc))?wd=hc.dtype:"constant"in Hc?(Xc=2,"number"===typeof Hc.constant?(ue=Hc.constant,le=Hd=ie=0):(ue=0<Hc.constant.length?Hc.constant[0]:0,le=1<Hc.constant.length?Hc.constant[1]:0,Hd=2<Hc.constant.length?Hc.constant[2]:0,ie=3<Hc.constant.length?
Hc.constant[3]:0)):(hc=v(Hc.buffer)?aa.createStream(34962,Hc.buffer):aa.getBuffer(Hc.buffer),wd="type"in Hc?$d[Hc.type]:hc.dtype,Jd=!!Hc.normalized,id=Hc.size|0,se=Hc.offset|0,pf=Hc.stride|0,Wc=Hc.divisor|0);Ed=Jb.location;fd=xc[Ed];if(1===Xc){fd.buffer||E.enableVertexAttribArray(Ed);Ec=id||4;if(fd.type!==wd||fd.size!==Ec||fd.buffer!==hc||fd.normalized!==Jd||fd.offset!==se||fd.stride!==pf)E.bindBuffer(34962,hc.buffer),E.vertexAttribPointer(Ed,Ec,wd,Jd,pf,se),fd.type=wd,fd.size=Ec,fd.buffer=hc,fd.normalized=
Jd,fd.offset=se,fd.stride=pf;fd.divisor!==Wc&&(J.vertexAttribDivisorANGLE(Ed,Wc),fd.divisor=Wc)}else if(fd.buffer&&(E.disableVertexAttribArray(Ed),fd.buffer=null),fd.x!==ue||fd.y!==le||fd.z!==Hd||fd.w!==ie)E.vertexAttrib4f(Ed,ue,le,Hd,ie),fd.x=ue,fd.y=le,fd.z=Hd,fd.w=ie;pd=H.call(this,L,a,0);hd=!1;bd=null;jd=0;zd=!1;ve=Bd=0;me=1;xe=0;ee=5126;ae=oe=ce=de=0;v(pd)?(hd=!0,bd=aa.createStream(34962,pd),ee=bd.dtype):(bd=aa.getBuffer(pd))?ee=bd.dtype:"constant"in pd?(me=2,"number"===typeof pd.constant?(ce=
pd.constant,oe=ae=de=0):(ce=0<pd.constant.length?pd.constant[0]:0,oe=1<pd.constant.length?pd.constant[1]:0,ae=2<pd.constant.length?pd.constant[2]:0,de=3<pd.constant.length?pd.constant[3]:0)):(bd=v(pd.buffer)?aa.createStream(34962,pd.buffer):aa.getBuffer(pd.buffer),ee="type"in pd?$d[pd.type]:bd.dtype,zd=!!pd.normalized,ve=pd.size|0,Bd=pd.offset|0,xe=pd.stride|0,jd=pd.divisor|0);ge=ja.location;yc=xc[ge];if(1===me){yc.buffer||E.enableVertexAttribArray(ge);Vc=ve||1;if(yc.type!==ee||yc.size!==Vc||yc.buffer!==
bd||yc.normalized!==zd||yc.offset!==Bd||yc.stride!==xe)E.bindBuffer(34962,bd.buffer),E.vertexAttribPointer(ge,Vc,ee,zd,xe,Bd),yc.type=ee,yc.size=Vc,yc.buffer=bd,yc.normalized=zd,yc.offset=Bd,yc.stride=xe;yc.divisor!==jd&&(J.vertexAttribDivisorANGLE(ge,jd),yc.divisor=jd)}else if(yc.buffer&&(E.disableVertexAttribArray(ge),yc.buffer=null),yc.x!==ce||yc.y!==oe||yc.z!==ae||yc.w!==de)E.vertexAttrib4f(ge,ce,oe,ae,de),yc.x=ce,yc.y=oe,yc.z=ae,yc.w=de;E.uniform1i(r.location,!1);E.uniform1f(dc.location,L.pixelRatio);
pe=I.call(this,L,a,0);E.uniform2f(Ha.location,pe[0],pe[1]);je=a.scale;E.uniform2f(Xa.location,je[0],je[1]);Fd=a.scaleFract;E.uniform2f(W.location,Fd[0],Fd[1]);Md=a.translate;E.uniform2f(ga.location,Md[0],Md[1]);Od=a.translateFract;E.uniform2f(va.location,Od[0],Od[1]);E.uniform1f(ba.location,a.opacity);E.uniform1i(Ja.location,y.bind());Pd=a.elements;he=null;(he=(Ee=v(Pd))?tb.createStream(Pd):tb.getElements(Pd))&&E.bindBuffer(34963,he.buffer.buffer);ye=a.offset;if(ne=a.count)Ze=Da.instances,0<Ze?he?
J.drawElementsInstancedANGLE(0,ne,he.type,ye<<(he.type-5121>>1),Ze):J.drawArraysInstancedANGLE(0,ye,ne,Ze):0>Ze&&(he?E.drawElements(0,ne,he.type,ye<<(he.type-5121>>1)):E.drawArrays(0,ye,ne)),ia.dirty=!0,fa.setVAO(null),L.viewportWidth=z,L.viewportHeight=D,Q&&(d.cpuTime+=performance.now()-P),S&&aa.destroyStream(R),ub&&aa.destroyStream(Ua),vb&&aa.destroyStream(hb),Ba&&aa.destroyStream(db),fc&&aa.destroyStream(Ea),wb&&aa.destroyStream(Eb),yb&&aa.destroyStream(Nb),Tc&&aa.destroyStream(hc),hd&&aa.destroyStream(bd),
y.unbind(),Ee&&tb.destroyStream(he)},scope:function(a,b,c){var f,k,l,m,w,r,u,x,t,y,F,G,E,K,N,H,I,P,R,ca,M,T,W,fa,sa,Z,ea,ka,ba,ga,ja,ma,xa,oa,pa,qa,ta,va,Aa,Ja,Ha,zb,Xa,Za,xc,jc,Ib,Ma,nb,vb,hb,Na,fb,gb,sb,cb,kc,ud,Jb,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Rb,Kb,Ya,Wb,ya,Xb,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,dc,vc,Ta,Mb,qc,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,kd,uc,sc,Mc,td,$c,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Kd,ad,id,Xc,ke,wd,fe,te,re,Hd,Ed,fd,Ec,pd,hd,bd,jd,
zd,Bd,we,me,xe,ee,de,ce,oe,ae,ge,yc,Vc,pe,je,Fd,Md,Od,Pd,he,Ee,ye,ne,Ue,Ne,Ke,qe,Be,Fe,Ge,He,Ce,Id,Td,Zd,be,Ie,yd,Qd,ze,Je,ef,Ye,Oe,Le,Xe,Te,Pe,Qe,Rd,Xd,Re,ff,lf,bf,gf,hf,jf,qf,mf,rf,Af,Bf,Me,Ae,nf,of,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Jf,Kf,Lf,sf,Qf,Hf,tf,cg,Rf,Sf,qg,cf,$e,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,df,af,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;f=a.viewport;k=f.x|0;l=f.y|0;m="width"in f?f.width|0:L.framebufferWidth-
k;w="height"in f?f.height|0:L.framebufferHeight-l;r=L.viewportWidth;L.viewportWidth=m;u=L.viewportHeight;L.viewportHeight=w;x=Gd[0];Gd[0]=k;t=Gd[1];Gd[1]=l;y=Gd[2];Gd[2]=m;F=Gd[3];Gd[3]=w;G=na[0];na[0]=0;E=na[1];na[1]=0;K=na[2];na[2]=0;N=na[3];na[3]=1;H=ha.blend_enable;ha.blend_enable=!0;I=D[0];D[0]=770;P=D[1];D[1]=771;R=D[2];D[2]=773;ca=D[3];D[3]=1;M=ha.depth_enable;ha.depth_enable=!1;T=a.viewport;W=T.x|0;fa=T.y|0;sa="width"in T?T.width|0:L.framebufferWidth-W;Z="height"in T?T.height|0:L.framebufferHeight-
fa;ea=se[0];se[0]=W;ka=se[1];se[1]=fa;ba=se[2];se[2]=sa;ga=se[3];se[3]=Z;ja=ha.scissor_enable;ha.scissor_enable=!0;ma=ha.stencil_enable;ha.stencil_enable=!1;if(xa=ia.profile)oa=performance.now(),d.count++;pa=a.elements;qa=null;qa=(ta=v(pa))?tb.createStream(pa):tb.getElements(pa);va=Da.elements;Da.elements=qa;Aa=a.offset;Ja=Da.offset;Da.offset=Aa;Ha=a.count;zb=Da.count;Da.count=Ha;Xa=Da.primitive;Da.primitive=0;Za=V[45];V[45]=!1;xc=a.markerTexture;jc=V[48];V[48]=xc;Ib=a.opacity;Ma=V[10];V[10]=Ib;nb=
A.call(this,L,a,c);vb=V[46];V[46]=nb;hb=V[47];V[47]=C;Na=L.pixelRatio;fb=V[34];V[34]=Na;gb=a.scale;sb=V[6];V[6]=gb;cb=a.scaleFract;kc=V[7];V[7]=cb;ud=a.translate;Jb=V[8];V[8]=ud;jb=a.translateFract;kb=V[9];V[9]=jb;ra=B.call(this,L,a,c);ob=!1;wa=null;Sa=0;ab=!1;db=Ba=0;Ia=1;Db=0;Bb=5126;Ya=Kb=Rb=Pa=0;v(ra)?(ob=!0,wa=aa.createStream(34962,ra),Bb=wa.dtype):(wa=aa.getBuffer(ra))?Bb=wa.dtype:"constant"in ra?(Ia=2,"number"===typeof ra.constant?(Rb=ra.constant,Kb=Ya=Pa=0):(Rb=0<ra.constant.length?ra.constant[0]:
0,Kb=1<ra.constant.length?ra.constant[1]:0,Ya=2<ra.constant.length?ra.constant[2]:0,Pa=3<ra.constant.length?ra.constant[3]:0)):(wa=v(ra.buffer)?aa.createStream(34962,ra.buffer):aa.getBuffer(ra.buffer),Bb="type"in ra?$d[ra.type]:wa.dtype,ab=!!ra.normalized,db=ra.size|0,Ba=ra.offset|0,Db=ra.stride|0,Sa=ra.divisor|0);Wb=J.buffer;J.buffer=wa;ya=J.divisor;J.divisor=Sa;Xb=J.normalized;J.normalized=ab;Ka=J.offset;J.offset=Ba;Ob=J.size;J.size=db;eb=J.state;J.state=Ia;ib=J.stride;J.stride=Db;za=J.type;J.type=
Bb;fc=J.w;J.w=Pa;Ea=J.x;J.x=Rb;pb=J.y;J.y=Kb;qb=J.z;J.z=Ya;Va=z.call(this,L,a,c);Wa=!1;nc=null;dc=0;vc=!1;Mb=Ta=0;qc=1;Fa=0;Kc=5126;wb=lb=Ca=Oa=0;v(Va)?(Wa=!0,nc=aa.createStream(34962,Va),Kc=nc.dtype):(nc=aa.getBuffer(Va))?Kc=nc.dtype:"constant"in Va?(qc=2,"number"===typeof Va.constant?(Ca=Va.constant,lb=wb=Oa=0):(Ca=0<Va.constant.length?Va.constant[0]:0,lb=1<Va.constant.length?Va.constant[1]:0,wb=2<Va.constant.length?Va.constant[2]:0,Oa=3<Va.constant.length?Va.constant[3]:0)):(nc=v(Va.buffer)?aa.createStream(34962,
Va.buffer):aa.getBuffer(Va.buffer),Kc="type"in Va?$d[Va.type]:nc.dtype,vc=!!Va.normalized,Mb=Va.size|0,Ta=Va.offset|0,Fa=Va.stride|0,dc=Va.divisor|0);Eb=O.buffer;O.buffer=nc;rb=O.divisor;O.divisor=dc;wc=O.normalized;O.normalized=vc;xb=O.offset;O.offset=Ta;kd=O.size;O.size=Mb;uc=O.state;O.state=qc;sc=O.stride;O.stride=Fa;Mc=O.type;O.type=Kc;td=O.w;O.w=Oa;$c=O.x;O.x=Ca;Yb=O.y;O.y=lb;cc=O.z;O.z=wb;Pb=Zb.call(this,L,a,c);Ga=!1;$b=null;mb=0;yb=!1;Qb=Nb=0;gc=1;ic=0;Rc=5126;Nc=Dc=Cc=Bc=0;v(Pb)?(Ga=!0,$b=
aa.createStream(34962,Pb),Rc=$b.dtype):($b=aa.getBuffer(Pb))?Rc=$b.dtype:"constant"in Pb?(gc=2,"number"===typeof Pb.constant?(Cc=Pb.constant,Dc=Nc=Bc=0):(Cc=0<Pb.constant.length?Pb.constant[0]:0,Dc=1<Pb.constant.length?Pb.constant[1]:0,Nc=2<Pb.constant.length?Pb.constant[2]:0,Bc=3<Pb.constant.length?Pb.constant[3]:0)):($b=v(Pb.buffer)?aa.createStream(34962,Pb.buffer):aa.getBuffer(Pb.buffer),Rc="type"in Pb?$d[Pb.type]:$b.dtype,yb=!!Pb.normalized,Qb=Pb.size|0,Nb=Pb.offset|0,ic=Pb.stride|0,mb=Pb.divisor|
0);Zc=p.buffer;p.buffer=$b;Sc=p.divisor;p.divisor=mb;Oc=p.normalized;p.normalized=yb;Lb=p.offset;p.offset=Nb;Gb=p.size;p.size=Qb;Pc=p.state;p.state=gc;Hc=p.stride;p.stride=ic;Tc=p.type;p.type=Rc;hc=p.w;p.w=Bc;Wc=p.x;p.x=Cc;Kd=p.y;p.y=Dc;ad=p.z;p.z=Nc;id=g.call(this,L,a,c);Xc=!1;ke=null;wd=0;fe=!1;re=te=0;Hd=1;Ed=0;fd=5126;bd=hd=pd=Ec=0;v(id)?(Xc=!0,ke=aa.createStream(34962,id),fd=ke.dtype):(ke=aa.getBuffer(id))?fd=ke.dtype:"constant"in id?(Hd=2,"number"===typeof id.constant?(pd=id.constant,hd=bd=
Ec=0):(pd=0<id.constant.length?id.constant[0]:0,hd=1<id.constant.length?id.constant[1]:0,bd=2<id.constant.length?id.constant[2]:0,Ec=3<id.constant.length?id.constant[3]:0)):(ke=v(id.buffer)?aa.createStream(34962,id.buffer):aa.getBuffer(id.buffer),fd="type"in id?$d[id.type]:ke.dtype,fe=!!id.normalized,re=id.size|0,te=id.offset|0,Ed=id.stride|0,wd=id.divisor|0);jd=q.buffer;q.buffer=ke;zd=q.divisor;q.divisor=wd;Bd=q.normalized;q.normalized=fe;we=q.offset;q.offset=te;me=q.size;q.size=re;xe=q.state;q.state=
Hd;ee=q.stride;q.stride=Ed;de=q.type;q.type=fd;ce=q.w;q.w=Ec;oe=q.x;q.x=pd;ae=q.y;q.y=hd;ge=q.z;q.z=bd;yc=S.call(this,L,a,c);Vc=!1;pe=null;je=0;Fd=!1;Od=Md=0;Pd=1;he=0;Ee=5126;Ne=Ue=ne=ye=0;v(yc)?(Vc=!0,pe=aa.createStream(34962,yc),Ee=pe.dtype):(pe=aa.getBuffer(yc))?Ee=pe.dtype:"constant"in yc?(Pd=2,"number"===typeof yc.constant?(ne=yc.constant,Ue=Ne=ye=0):(ne=0<yc.constant.length?yc.constant[0]:0,Ue=1<yc.constant.length?yc.constant[1]:0,Ne=2<yc.constant.length?yc.constant[2]:0,ye=3<yc.constant.length?
yc.constant[3]:0)):(pe=v(yc.buffer)?aa.createStream(34962,yc.buffer):aa.getBuffer(yc.buffer),Ee="type"in yc?$d[yc.type]:pe.dtype,Fd=!!yc.normalized,Od=yc.size|0,Md=yc.offset|0,he=yc.stride|0,je=yc.divisor|0);Ke=X.buffer;X.buffer=pe;qe=X.divisor;X.divisor=je;Be=X.normalized;X.normalized=Fd;Fe=X.offset;X.offset=Md;Ge=X.size;X.size=Od;He=X.state;X.state=Pd;Ce=X.stride;X.stride=he;Id=X.type;X.type=Ee;Td=X.w;X.w=ye;Zd=X.x;X.x=ne;be=X.y;X.y=Ue;Ie=X.z;X.z=Ne;yd=U.call(this,L,a,c);Qd=!1;ze=null;Je=0;ef=!1;
Oe=Ye=0;Le=1;Xe=0;Te=5126;Xd=Rd=Qe=Pe=0;v(yd)?(Qd=!0,ze=aa.createStream(34962,yd),Te=ze.dtype):(ze=aa.getBuffer(yd))?Te=ze.dtype:"constant"in yd?(Le=2,"number"===typeof yd.constant?(Qe=yd.constant,Rd=Xd=Pe=0):(Qe=0<yd.constant.length?yd.constant[0]:0,Rd=1<yd.constant.length?yd.constant[1]:0,Xd=2<yd.constant.length?yd.constant[2]:0,Pe=3<yd.constant.length?yd.constant[3]:0)):(ze=v(yd.buffer)?aa.createStream(34962,yd.buffer):aa.getBuffer(yd.buffer),Te="type"in yd?$d[yd.type]:ze.dtype,ef=!!yd.normalized,
Oe=yd.size|0,Ye=yd.offset|0,Xe=yd.stride|0,Je=yd.divisor|0);Re=n.buffer;n.buffer=ze;ff=n.divisor;n.divisor=Je;lf=n.normalized;n.normalized=ef;bf=n.offset;n.offset=Ye;gf=n.size;n.size=Oe;hf=n.state;n.state=Le;jf=n.stride;n.stride=Xe;qf=n.type;n.type=Te;mf=n.w;n.w=Pe;rf=n.x;n.x=Qe;Af=n.y;n.y=Rd;Bf=n.z;n.z=Xd;Me=la.call(this,L,a,c);Ae=!1;nf=null;of=0;Cf=!1;zf=Ff=0;Df=1;Ef=0;vf=5126;yf=xf=uf=wf=0;v(Me)?(Ae=!0,nf=aa.createStream(34962,Me),vf=nf.dtype):(nf=aa.getBuffer(Me))?vf=nf.dtype:"constant"in Me?
(Df=2,"number"===typeof Me.constant?(uf=Me.constant,xf=yf=wf=0):(uf=0<Me.constant.length?Me.constant[0]:0,xf=1<Me.constant.length?Me.constant[1]:0,yf=2<Me.constant.length?Me.constant[2]:0,wf=3<Me.constant.length?Me.constant[3]:0)):(nf=v(Me.buffer)?aa.createStream(34962,Me.buffer):aa.getBuffer(Me.buffer),vf="type"in Me?$d[Me.type]:nf.dtype,Cf=!!Me.normalized,zf=Me.size|0,Ff=Me.offset|0,Ef=Me.stride|0,of=Me.divisor|0);If=Q.buffer;Q.buffer=nf;Jf=Q.divisor;Q.divisor=of;Kf=Q.normalized;Q.normalized=Cf;
Lf=Q.offset;Q.offset=Ff;sf=Q.size;Q.size=zf;Qf=Q.state;Q.state=Df;Hf=Q.stride;Q.stride=Ef;tf=Q.type;Q.type=vf;cg=Q.w;Q.w=wf;Rf=Q.x;Q.x=uf;Sf=Q.y;Q.y=xf;qg=Q.z;Q.z=yf;cf=da.call(this,L,a,c);$e=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;Yf=Xf=Wf=Tf=0;v(cf)?($e=!0,Mf=aa.createStream(34962,cf),Vf=Mf.dtype):(Mf=aa.getBuffer(cf))?Vf=Mf.dtype:"constant"in cf?(gg=2,"number"===typeof cf.constant?(Wf=cf.constant,Xf=Yf=Tf=0):(Wf=0<cf.constant.length?cf.constant[0]:0,Xf=1<cf.constant.length?cf.constant[1]:
0,Yf=2<cf.constant.length?cf.constant[2]:0,Tf=3<cf.constant.length?cf.constant[3]:0)):(Mf=v(cf.buffer)?aa.createStream(34962,cf.buffer):aa.getBuffer(cf.buffer),Vf="type"in cf?$d[cf.type]:Mf.dtype,dg=!!cf.normalized,fg=cf.size|0,eg=cf.offset|0,hg=cf.stride|0,Nf=cf.divisor|0);ig=e.buffer;e.buffer=Mf;rg=e.divisor;e.divisor=Nf;sg=e.normalized;e.normalized=dg;tg=e.offset;e.offset=eg;ug=e.size;e.size=fg;vg=e.state;e.state=gg;wg=e.stride;e.stride=hg;xg=e.type;e.type=Vf;yg=e.w;e.w=Tf;zg=e.x;e.x=Wf;Ag=e.y;
e.y=Xf;Bg=e.z;e.z=Yf;df=h.call(this,L,a,c);af=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;v(df)?(af=!0,Of=aa.createStream(34962,df),Zf=Of.dtype):(Of=aa.getBuffer(df))?Zf=Of.dtype:"constant"in df?(mg=2,"number"===typeof df.constant?($f=df.constant,ag=bg=Uf=0):($f=0<df.constant.length?df.constant[0]:0,ag=1<df.constant.length?df.constant[1]:0,bg=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Of=v(df.buffer)?aa.createStream(34962,df.buffer):aa.getBuffer(df.buffer),
Zf="type"in df?$d[df.type]:Of.dtype,jg=!!df.normalized,lg=df.size|0,kg=df.offset|0,ng=df.stride|0,Pf=df.divisor|0);og=Y.buffer;Y.buffer=Of;Cg=Y.divisor;Y.divisor=Pf;Dg=Y.normalized;Y.normalized=jg;Eg=Y.offset;Y.offset=kg;Fg=Y.size;Y.size=lg;Gg=Y.state;Y.state=mg;Hg=Y.stride;Y.stride=ng;Ig=Y.type;Y.type=Zf;Jg=Y.w;Y.w=Uf;Kg=Y.x;Y.x=$f;Lg=Y.y;Y.y=ag;Mg=Y.z;Y.z=bg;Ng=ua.vert;ua.vert=59;Og=ua.frag;ua.frag=58;ia.dirty=!0;b(L,a,c);L.viewportWidth=r;L.viewportHeight=u;Gd[0]=x;Gd[1]=t;Gd[2]=y;Gd[3]=F;na[0]=
G;na[1]=E;na[2]=K;na[3]=N;ha.blend_enable=H;D[0]=I;D[1]=P;D[2]=R;D[3]=ca;ha.depth_enable=M;se[0]=ea;se[1]=ka;se[2]=ba;se[3]=ga;ha.scissor_enable=ja;ha.stencil_enable=ma;xa&&(d.cpuTime+=performance.now()-oa);ta&&tb.destroyStream(qa);Da.elements=va;Da.offset=Ja;Da.count=zb;Da.primitive=Xa;V[45]=Za;V[48]=jc;V[10]=Ma;V[46]=vb;V[47]=hb;V[34]=fb;V[6]=sb;V[7]=kc;V[8]=Jb;V[9]=kb;ob&&aa.destroyStream(wa);J.buffer=Wb;J.divisor=ya;J.normalized=Xb;J.offset=Ka;J.size=Ob;J.state=eb;J.stride=ib;J.type=za;J.w=fc;
J.x=Ea;J.y=pb;J.z=qb;Wa&&aa.destroyStream(nc);O.buffer=Eb;O.divisor=rb;O.normalized=wc;O.offset=xb;O.size=kd;O.state=uc;O.stride=sc;O.type=Mc;O.w=td;O.x=$c;O.y=Yb;O.z=cc;Ga&&aa.destroyStream($b);p.buffer=Zc;p.divisor=Sc;p.normalized=Oc;p.offset=Lb;p.size=Gb;p.state=Pc;p.stride=Hc;p.type=Tc;p.w=hc;p.x=Wc;p.y=Kd;p.z=ad;Xc&&aa.destroyStream(ke);q.buffer=jd;q.divisor=zd;q.normalized=Bd;q.offset=we;q.size=me;q.state=xe;q.stride=ee;q.type=de;q.w=ce;q.x=oe;q.y=ae;q.z=ge;Vc&&aa.destroyStream(pe);X.buffer=
Ke;X.divisor=qe;X.normalized=Be;X.offset=Fe;X.size=Ge;X.state=He;X.stride=Ce;X.type=Id;X.w=Td;X.x=Zd;X.y=be;X.z=Ie;Qd&&aa.destroyStream(ze);n.buffer=Re;n.divisor=ff;n.normalized=lf;n.offset=bf;n.size=gf;n.state=hf;n.stride=jf;n.type=qf;n.w=mf;n.x=rf;n.y=Af;n.z=Bf;Ae&&aa.destroyStream(nf);Q.buffer=If;Q.divisor=Jf;Q.normalized=Kf;Q.offset=Lf;Q.size=sf;Q.state=Qf;Q.stride=Hf;Q.type=tf;Q.w=cg;Q.x=Rf;Q.y=Sf;Q.z=qg;$e&&aa.destroyStream(Mf);e.buffer=ig;e.divisor=rg;e.normalized=sg;e.offset=tg;e.size=ug;
e.state=vg;e.stride=wg;e.type=xg;e.w=yg;e.x=zg;e.y=Ag;e.z=Bg;af&&aa.destroyStream(Of);Y.buffer=og;Y.divisor=Cg;Y.normalized=Dg;Y.offset=Eg;Y.size=Fg;Y.state=Gg;Y.stride=Hg;Y.type=Ig;Y.w=Jg;Y.x=Kg;Y.y=Lg;Y.z=Mg;ua.vert=Ng;ua.frag=Og;ia.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,d,k,m,f,b,t,c,x,M,ea,H,I,y,A,C,B,J,z,O,Zb,p,g,q,S,X,U,n,la,Q,da,e,h,Y,qa,fb,gb,Rb,ta,Aa){var Z,K,N,R,
oa,P,Jb,Za,T,r,ja,ba,Ha,Ja,dc,Xa,W,sb,ga,va,Xb,qc,sc,ud,xc,aa,L,ia,Da,tb,$c,ad,E,v,ha,ua,V,fa,na,F,u;Z=a.attributes;K=a.buffer;N=a.context;R=a.current;oa=a.draw;P=a.elements;Jb=a.extensions;Za=a.framebuffer;T=a.gl;r=a.isBufferArgs;ja=a.next;ba=a.shader;Ha=a.uniforms;Ja=a.vao;dc=ja.blend_color;Xa=R.blend_color;W=ja.blend_equation;sb=R.blend_equation;ga=ja.blend_func;va=R.blend_func;Xb=ja.colorMask;qc=R.colorMask;sc=ja.depth_range;ud=R.depth_range;xc=ja.polygonOffset_offset;aa=R.polygonOffset_offset;
L=ja.sample_coverage;ia=R.sample_coverage;Da=ja.scissor_box;tb=R.scissor_box;$c=ja.stencil_func;ad=R.stencil_func;E=ja.stencil_opBack;v=R.stencil_opBack;ha=ja.stencil_opFront;ua=R.stencil_opFront;V=ja.viewport;fa=R.viewport;na={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};F={offset:4,stride:8};u={offset:0,stride:8};return{batch:function(a,b){var c,f,k,m,w,x,t,y,A,B,C,H,I;c=Za.next;c!==Za.cur&&(c?T.bindFramebuffer(36160,c.framebuffer):T.bindFramebuffer(36160,
null),Za.cur=c);if(R.dirty){var M,V,sa,ea,ba,ga,Ha,jc,dc,kf,Ve,Cd,De,Ud,Vd,Ld,Yd,rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a,lc,Fb,rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec;M=ja.dither;M!==R.dither&&(M?T.enable(3024):T.disable(3024),R.dither=M);V=W[0];sa=W[1];if(V!==sb[0]||sa!==sb[1])T.blendEquationSeparate(V,sa),sb[0]=V,sb[1]=sa;ea=ja.depth_func;ea!==R.depth_func&&(T.depthFunc(ea),R.depth_func=ea);ba=sc[0];ga=sc[1];if(ba!==ud[0]||ga!==ud[1])T.depthRange(ba,ga),ud[0]=ba,ud[1]=ga;Ha=ja.depth_mask;Ha!==R.depth_mask&&(T.depthMask(Ha),
R.depth_mask=Ha);jc=Xb[0];dc=Xb[1];kf=Xb[2];Ve=Xb[3];if(jc!==qc[0]||dc!==qc[1]||kf!==qc[2]||Ve!==qc[3])T.colorMask(jc,dc,kf,Ve),qc[0]=jc,qc[1]=dc,qc[2]=kf,qc[3]=Ve;Cd=ja.cull_enable;Cd!==R.cull_enable&&(Cd?T.enable(2884):T.disable(2884),R.cull_enable=Cd);De=ja.cull_face;De!==R.cull_face&&(T.cullFace(De),R.cull_face=De);Ud=ja.frontFace;Ud!==R.frontFace&&(T.frontFace(Ud),R.frontFace=Ud);Vd=ja.lineWidth;Vd!==R.lineWidth&&(T.lineWidth(Vd),R.lineWidth=Vd);Ld=ja.polygonOffset_enable;Ld!==R.polygonOffset_enable&&
(Ld?T.enable(32823):T.disable(32823),R.polygonOffset_enable=Ld);Yd=xc[0];rd=xc[1];if(Yd!==aa[0]||rd!==aa[1])T.polygonOffset(Yd,rd),aa[0]=Yd,aa[1]=rd;ld=ja.sample_alpha;ld!==R.sample_alpha&&(ld?T.enable(32926):T.disable(32926),R.sample_alpha=ld);xd=ja.sample_enable;xd!==R.sample_enable&&(xd?T.enable(32928):T.disable(32928),R.sample_enable=xd);qd=L[0];ed=L[1];if(qd!==ia[0]||ed!==ia[1])T.sampleCoverage(qd,ed),ia[0]=qd,ia[1]=ed;zc=ja.stencil_mask;zc!==R.stencil_mask&&(T.stencilMask(zc),R.stencil_mask=
zc);sd=$c[0];gd=$c[1];Lc=$c[2];if(sd!==ad[0]||gd!==ad[1]||Lc!==ad[2])T.stencilFunc(sd,gd,Lc),ad[0]=sd,ad[1]=gd,ad[2]=Lc;tc=ha[0];$a=ha[1];lc=ha[2];Fb=ha[3];if(tc!==ua[0]||$a!==ua[1]||lc!==ua[2]||Fb!==ua[3])T.stencilOpSeparate(tc,$a,lc,Fb),ua[0]=tc,ua[1]=$a,ua[2]=lc,ua[3]=Fb;rc=E[0];Ra=E[1];Ic=E[2];bc=E[3];if(rc!==v[0]||Ra!==v[1]||Ic!==v[2]||bc!==v[3])T.stencilOpSeparate(rc,Ra,Ic,bc),v[0]=rc,v[1]=Ra,v[2]=Ic,v[3]=bc;Yc=ja.scissor_enable;Yc!==R.scissor_enable&&(Yc?T.enable(3089):T.disable(3089),R.scissor_enable=
Yc);Sd=Da[0];md=Da[1];Ac=Da[2];ec=Da[3];if(Sd!==tb[0]||md!==tb[1]||Ac!==tb[2]||ec!==tb[3])T.scissor(Sd,md,Ac,ec),tb[0]=Sd,tb[1]=md,tb[2]=Ac,tb[3]=ec}f=this.viewport;k=f.x|0;m=f.y|0;w="width"in f?f.width|0:N.framebufferWidth-k;x="height"in f?f.height|0:N.framebufferHeight-m;t=N.viewportWidth;N.viewportWidth=w;y=N.viewportHeight;N.viewportHeight=x;T.viewport(k,m,w,x);fa[0]=k;fa[1]=m;fa[2]=w;fa[3]=x;T.blendColor(0,0,0,1);Xa[0]=0;Xa[1]=0;Xa[2]=0;Xa[3]=1;T.enable(3042);R.blend_enable=!0;T.blendFuncSeparate(770,
771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;T.disable(2929);R.depth_enable=!1;T.disable(2960);R.stencil_enable=!1;if(A=R.profile)B=performance.now(),d.count+=b;T.useProgram(J.program);C=Jb.angle_instanced_arrays;var Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,Gf,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,We,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb;Ja.setVAO(null);u.buffer=this.sizeBuffer;Fc=!1;Ab=null;La=0;ub=!1;pa=
Ua=0;vd=1;Cb=0;Qa=5126;Sb=Qc=bb=Hb=0;r(u)?(Fc=!0,Ab=K.createStream(34962,u),Qa=Ab.dtype):(Ab=K.getBuffer(u))?Qa=Ab.dtype:"constant"in u?(vd=2,"number"===typeof u.constant?(bb=u.constant,Qc=Sb=Hb=0):(bb=0<u.constant.length?u.constant[0]:0,Qc=1<u.constant.length?u.constant[1]:0,Sb=2<u.constant.length?u.constant[2]:0,Hb=3<u.constant.length?u.constant[3]:0)):(Ab=r(u.buffer)?K.createStream(34962,u.buffer):K.getBuffer(u.buffer),Qa="type"in u?na[u.type]:Ab.dtype,ub=!!u.normalized,pa=u.size|0,Ua=u.offset|
0,Cb=u.stride|0,La=u.divisor|0);Gf=Aa.location;ac=Z[Gf];if(1===vd){ac.buffer||T.enableVertexAttribArray(Gf);Tb=pa||1;if(ac.type!==Qa||ac.size!==Tb||ac.buffer!==Ab||ac.normalized!==ub||ac.offset!==Ua||ac.stride!==Cb)T.bindBuffer(34962,Ab.buffer),T.vertexAttribPointer(Gf,Tb,Qa,ub,Cb,Ua),ac.type=Qa,ac.size=Tb,ac.buffer=Ab,ac.normalized=ub,ac.offset=Ua,ac.stride=Cb;ac.divisor!==La&&(C.vertexAttribDivisorANGLE(Gf,La),ac.divisor=La)}else if(ac.buffer&&(T.disableVertexAttribArray(Gf),ac.buffer=null),ac.x!==
bb||ac.y!==Qc||ac.z!==Sb||ac.w!==Hb)T.vertexAttrib4f(Gf,bb,Qc,Sb,Hb),ac.x=bb,ac.y=Qc,ac.z=Sb,ac.w=Hb;F.buffer=this.sizeBuffer;Ad=!1;Ub=null;Ma=0;nb=!1;hb=vb=0;Na=1;pc=0;Vb=5126;Gc=mc=cb=Uc=0;r(F)?(Ad=!0,Ub=K.createStream(34962,F),Vb=Ub.dtype):(Ub=K.getBuffer(F))?Vb=Ub.dtype:"constant"in F?(Na=2,"number"===typeof F.constant?(cb=F.constant,mc=Gc=Uc=0):(cb=0<F.constant.length?F.constant[0]:0,mc=1<F.constant.length?F.constant[1]:0,Gc=2<F.constant.length?F.constant[2]:0,Uc=3<F.constant.length?F.constant[3]:
0)):(Ub=r(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),Vb="type"in F?na[F.type]:Ub.dtype,nb=!!F.normalized,hb=F.size|0,vb=F.offset|0,pc=F.stride|0,Ma=F.divisor|0);oc=Q.location;jb=Z[oc];if(1===Na){jb.buffer||T.enableVertexAttribArray(oc);kb=hb||1;if(jb.type!==Vb||jb.size!==kb||jb.buffer!==Ub||jb.normalized!==nb||jb.offset!==vb||jb.stride!==pc)T.bindBuffer(34962,Ub.buffer),T.vertexAttribPointer(oc,kb,Vb,nb,pc,vb),jb.type=Vb,jb.size=kb,jb.buffer=Ub,jb.normalized=nb,jb.offset=vb,jb.stride=
pc;jb.divisor!==Ma&&(C.vertexAttribDivisorANGLE(oc,Ma),jb.divisor=Ma)}else if(jb.buffer&&(T.disableVertexAttribArray(oc),jb.buffer=null),jb.x!==cb||jb.y!==mc||jb.z!==Gc||jb.w!==Uc)T.vertexAttrib4f(oc,cb,mc,Gc,Uc),jb.x=cb,jb.y=mc,jb.z=Gc,jb.w=Uc;ra=this.charBuffer;ob=!1;wa=null;Sa=0;ab=!1;db=Ba=0;Ia=1;Db=0;Bb=5126;Ya=Kb=Jc=Pa=0;r(ra)?(ob=!0,wa=K.createStream(34962,ra),Bb=wa.dtype):(wa=K.getBuffer(ra))?Bb=wa.dtype:"constant"in ra?(Ia=2,"number"===typeof ra.constant?(Jc=ra.constant,Kb=Ya=Pa=0):(Jc=0<
ra.constant.length?ra.constant[0]:0,Kb=1<ra.constant.length?ra.constant[1]:0,Ya=2<ra.constant.length?ra.constant[2]:0,Pa=3<ra.constant.length?ra.constant[3]:0)):(wa=r(ra.buffer)?K.createStream(34962,ra.buffer):K.getBuffer(ra.buffer),Bb="type"in ra?na[ra.type]:wa.dtype,ab=!!ra.normalized,db=ra.size|0,Ba=ra.offset|0,Db=ra.stride|0,Sa=ra.divisor|0);Wb=la.location;ya=Z[Wb];if(1===Ia){ya.buffer||T.enableVertexAttribArray(Wb);We=db||1;if(ya.type!==Bb||ya.size!==We||ya.buffer!==wa||ya.normalized!==ab||ya.offset!==
Ba||ya.stride!==Db)T.bindBuffer(34962,wa.buffer),T.vertexAttribPointer(Wb,We,Bb,ab,Db,Ba),ya.type=Bb,ya.size=We,ya.buffer=wa,ya.normalized=ab,ya.offset=Ba,ya.stride=Db;ya.divisor!==Sa&&(C.vertexAttribDivisorANGLE(Wb,Sa),ya.divisor=Sa)}else if(ya.buffer&&(T.disableVertexAttribArray(Wb),ya.buffer=null),ya.x!==Jc||ya.y!==Kb||ya.z!==Ya||ya.w!==Pa)T.vertexAttrib4f(Wb,Jc,Kb,Ya,Pa),ya.x=Jc,ya.y=Kb,ya.z=Ya,ya.w=Pa;Ka=this.position;Ob=!1;eb=null;ib=0;za=!1;Ea=fc=0;pb=1;qb=0;Va=5126;vc=cd=nc=Wa=0;r(Ka)?(Ob=
!0,eb=K.createStream(34962,Ka),Va=eb.dtype):(eb=K.getBuffer(Ka))?Va=eb.dtype:"constant"in Ka?(pb=2,"number"===typeof Ka.constant?(nc=Ka.constant,cd=vc=Wa=0):(nc=0<Ka.constant.length?Ka.constant[0]:0,cd=1<Ka.constant.length?Ka.constant[1]:0,vc=2<Ka.constant.length?Ka.constant[2]:0,Wa=3<Ka.constant.length?Ka.constant[3]:0)):(eb=r(Ka.buffer)?K.createStream(34962,Ka.buffer):K.getBuffer(Ka.buffer),Va="type"in Ka?na[Ka.type]:eb.dtype,za=!!Ka.normalized,Ea=Ka.size|0,fc=Ka.offset|0,qb=Ka.stride|0,ib=Ka.divisor|
0);Ta=qa.location;Mb=Z[Ta];if(1===pb){Mb.buffer||T.enableVertexAttribArray(Ta);dd=Ea||2;if(Mb.type!==Va||Mb.size!==dd||Mb.buffer!==eb||Mb.normalized!==za||Mb.offset!==fc||Mb.stride!==qb)T.bindBuffer(34962,eb.buffer),T.vertexAttribPointer(Ta,dd,Va,za,qb,fc),Mb.type=Va,Mb.size=dd,Mb.buffer=eb,Mb.normalized=za,Mb.offset=fc,Mb.stride=qb;Mb.divisor!==ib&&(C.vertexAttribDivisorANGLE(Ta,ib),Mb.divisor=ib)}else if(Mb.buffer&&(T.disableVertexAttribArray(Ta),Mb.buffer=null),Mb.x!==nc||Mb.y!==cd||Mb.z!==vc||
Mb.w!==Wa)T.vertexAttrib4f(Ta,nc,cd,vc,Wa),Mb.x=nc,Mb.y=cd,Mb.z=vc,Mb.w=Wa;Fa=this.viewportArray;T.uniform4f(ta.location,Fa[0],Fa[1],Fa[2],Fa[3]);Kc=this.scale;T.uniform2f(gb.location,Kc[0],Kc[1]);Oa=this.translate;T.uniform2f(Rb.location,Oa[0],Oa[1]);(Ca=oa.elements)?T.bindBuffer(34963,Ca.buffer.buffer):Ja.currentVAO&&(Ca=P.getElements(Ja.currentVAO.elements))&&T.bindBuffer(34963,Ca.buffer.buffer);lb=oa.instances;for(H=0;H<b;++H){I=a[H];var wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,
Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc,Jd;wb=z.call(this,N,I,H);H&&Eb===wb||(Eb=wb,T.uniform1f(da.location,wb));rb=O.call(this,N,I,H);H&&wc===rb||(wc=rb,T.uniform1f(h.location,rb));xb=I.align;H&&Dd===xb||(Dd=xb,T.uniform1f(q.location,xb));uc=I.baseline;H&&Wd===uc||(Wd=uc,T.uniform1f(n.location,uc));Mc=I.color;nd=Mc[0];Yb=Mc[1];Pb=Mc[2];$b=Mc[3];H&&od===nd&&cc===Yb&&Ga===Pb&&mb===$b||(od=nd,cc=Yb,Ga=Pb,mb=$b,T.uniform4f(e.location,nd,Yb,Pb,$b));yb=Zb.call(this,N,I,H);Nb=yb[0];gc=yb[1];
H&&Qb===Nb&&ic===gc||(Qb=Nb,ic=gc,T.uniform2f(U.location,Nb,gc));Rc=p.call(this,N,I,H);Bc=Rc[0];Dc=Rc[1];H&&Cc===Bc&&Nc===Dc||(Cc=Bc,Nc=Dc,T.uniform2f(X.location,Bc,Dc));Zc=I.positionOffset;Sc=Zc[0];Lb=Zc[1];H&&Oc===Sc&&Gb===Lb||(Oc=Sc,Gb=Lb,T.uniform2f(fb.location,Sc,Lb));Pc=I.opacity;H&&Hc===Pc||(Hc=Pc,T.uniform1f(Y.location,Pc));(Tc=g.call(this,N,I,H))&&"framebuffer"===Tc._reglType&&(Tc=Tc.color[0]);hc=Tc._texture;T.uniform1i(S.location,hc.bind());Wc=I.offset;if(Jd=I.count)0<lb?Ca?C.drawElementsInstancedANGLE(0,
Jd,Ca.type,Wc<<(Ca.type-5121>>1),lb):C.drawArraysInstancedANGLE(0,Wc,Jd,lb):0>lb&&(Ca?T.drawElements(0,Jd,Ca.type,Wc<<(Ca.type-5121>>1)):T.drawArrays(0,Wc,Jd)),hc.unbind()}Fc&&K.destroyStream(Ab);Ad&&K.destroyStream(Ub);ob&&K.destroyStream(wa);Ob&&K.destroyStream(eb);R.dirty=!0;Ja.setVAO(null);N.viewportWidth=t;N.viewportHeight=y;A&&(d.cpuTime+=performance.now()-B)},draw:function(a){var g,p,x,l,y,z,A,B,C,H,I,O,J,M,V,ea,ba,ga,Ha,jc,Zb,dc,Se,kf,Ve,Cd,De,Ud,Vd,Ld,Yd,rd,ld,xd,qd,ed,zc,sd,gd,Lc,tc,$a,
lc,Fb,rc,Ra,Ic,bc,Yc,Sd,md,Ac,ec,Fc,Ab,La,ub,Ua,pa,vd,Cb,Qa,Hb,bb,Qc,Sb,Gf,ac,Tb,Ad,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db;g=Za.next;g!==Za.cur&&(g?T.bindFramebuffer(36160,g.framebuffer):T.bindFramebuffer(36160,null),Za.cur=g);if(R.dirty){var Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,We,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc;Ia=ja.dither;Ia!==R.dither&&(Ia?T.enable(3024):T.disable(3024),R.dither=Ia);Db=W[0];Bb=W[1];if(Db!==sb[0]||Bb!==sb[1])T.blendEquationSeparate(Db,
Bb),sb[0]=Db,sb[1]=Bb;Pa=ja.depth_func;Pa!==R.depth_func&&(T.depthFunc(Pa),R.depth_func=Pa);Jc=sc[0];Kb=sc[1];if(Jc!==ud[0]||Kb!==ud[1])T.depthRange(Jc,Kb),ud[0]=Jc,ud[1]=Kb;Ya=ja.depth_mask;Ya!==R.depth_mask&&(T.depthMask(Ya),R.depth_mask=Ya);Wb=Xb[0];ya=Xb[1];We=Xb[2];Ka=Xb[3];if(Wb!==qc[0]||ya!==qc[1]||We!==qc[2]||Ka!==qc[3])T.colorMask(Wb,ya,We,Ka),qc[0]=Wb,qc[1]=ya,qc[2]=We,qc[3]=Ka;Ob=ja.cull_enable;Ob!==R.cull_enable&&(Ob?T.enable(2884):T.disable(2884),R.cull_enable=Ob);eb=ja.cull_face;eb!==
R.cull_face&&(T.cullFace(eb),R.cull_face=eb);ib=ja.frontFace;ib!==R.frontFace&&(T.frontFace(ib),R.frontFace=ib);za=ja.lineWidth;za!==R.lineWidth&&(T.lineWidth(za),R.lineWidth=za);fc=ja.polygonOffset_enable;fc!==R.polygonOffset_enable&&(fc?T.enable(32823):T.disable(32823),R.polygonOffset_enable=fc);Ea=xc[0];pb=xc[1];if(Ea!==aa[0]||pb!==aa[1])T.polygonOffset(Ea,pb),aa[0]=Ea,aa[1]=pb;qb=ja.sample_alpha;qb!==R.sample_alpha&&(qb?T.enable(32926):T.disable(32926),R.sample_alpha=qb);Va=ja.sample_enable;Va!==
R.sample_enable&&(Va?T.enable(32928):T.disable(32928),R.sample_enable=Va);Wa=L[0];nc=L[1];if(Wa!==ia[0]||nc!==ia[1])T.sampleCoverage(Wa,nc),ia[0]=Wa,ia[1]=nc;cd=ja.stencil_mask;cd!==R.stencil_mask&&(T.stencilMask(cd),R.stencil_mask=cd);vc=$c[0];Ta=$c[1];Mb=$c[2];if(vc!==ad[0]||Ta!==ad[1]||Mb!==ad[2])T.stencilFunc(vc,Ta,Mb),ad[0]=vc,ad[1]=Ta,ad[2]=Mb;dd=ha[0];Fa=ha[1];Kc=ha[2];Oa=ha[3];if(dd!==ua[0]||Fa!==ua[1]||Kc!==ua[2]||Oa!==ua[3])T.stencilOpSeparate(dd,Fa,Kc,Oa),ua[0]=dd,ua[1]=Fa,ua[2]=Kc,ua[3]=
Oa;Ca=E[0];lb=E[1];wb=E[2];Eb=E[3];if(Ca!==v[0]||lb!==v[1]||wb!==v[2]||Eb!==v[3])T.stencilOpSeparate(Ca,lb,wb,Eb),v[0]=Ca,v[1]=lb,v[2]=wb,v[3]=Eb;rb=ja.scissor_enable;rb!==R.scissor_enable&&(rb?T.enable(3089):T.disable(3089),R.scissor_enable=rb);wc=Da[0];xb=Da[1];Dd=Da[2];uc=Da[3];if(wc!==tb[0]||xb!==tb[1]||Dd!==tb[2]||uc!==tb[3])T.scissor(wc,xb,Dd,uc),tb[0]=wc,tb[1]=xb,tb[2]=Dd,tb[3]=uc}p=this.viewport;x=p.x|0;l=p.y|0;y="width"in p?p.width|0:N.framebufferWidth-x;z="height"in p?p.height|0:N.framebufferHeight-
l;A=N.viewportWidth;N.viewportWidth=y;B=N.viewportHeight;N.viewportHeight=z;T.viewport(x,l,y,z);fa[0]=x;fa[1]=l;fa[2]=y;fa[3]=z;T.blendColor(0,0,0,1);Xa[0]=0;Xa[1]=0;Xa[2]=0;Xa[3]=1;T.enable(3042);R.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);va[0]=770;va[1]=771;va[2]=773;va[3]=1;T.disable(2929);R.depth_enable=!1;T.disable(2960);R.stencil_enable=!1;if(C=R.profile)H=performance.now(),d.count++;T.useProgram(k.program);I=Jb.angle_instanced_arrays;Ja.setVAO(null);u.buffer=this.sizeBuffer;O=!1;
J=null;M=0;V=!1;ba=ea=0;ga=1;Ha=0;jc=5126;kf=Se=dc=Zb=0;r(u)?(O=!0,J=K.createStream(34962,u),jc=J.dtype):(J=K.getBuffer(u))?jc=J.dtype:"constant"in u?(ga=2,"number"===typeof u.constant?(dc=u.constant,Se=kf=Zb=0):(dc=0<u.constant.length?u.constant[0]:0,Se=1<u.constant.length?u.constant[1]:0,kf=2<u.constant.length?u.constant[2]:0,Zb=3<u.constant.length?u.constant[3]:0)):(J=r(u.buffer)?K.createStream(34962,u.buffer):K.getBuffer(u.buffer),jc="type"in u?na[u.type]:J.dtype,V=!!u.normalized,ba=u.size|0,
ea=u.offset|0,Ha=u.stride|0,M=u.divisor|0);Ve=Aa.location;Cd=Z[Ve];if(1===ga){Cd.buffer||T.enableVertexAttribArray(Ve);De=ba||1;if(Cd.type!==jc||Cd.size!==De||Cd.buffer!==J||Cd.normalized!==V||Cd.offset!==ea||Cd.stride!==Ha)T.bindBuffer(34962,J.buffer),T.vertexAttribPointer(Ve,De,jc,V,Ha,ea),Cd.type=jc,Cd.size=De,Cd.buffer=J,Cd.normalized=V,Cd.offset=ea,Cd.stride=Ha;Cd.divisor!==M&&(I.vertexAttribDivisorANGLE(Ve,M),Cd.divisor=M)}else if(Cd.buffer&&(T.disableVertexAttribArray(Ve),Cd.buffer=null),Cd.x!==
dc||Cd.y!==Se||Cd.z!==kf||Cd.w!==Zb)T.vertexAttrib4f(Ve,dc,Se,kf,Zb),Cd.x=dc,Cd.y=Se,Cd.z=kf,Cd.w=Zb;F.buffer=this.sizeBuffer;Ud=!1;Vd=null;Ld=0;Yd=!1;ld=rd=0;xd=1;qd=0;ed=5126;Lc=gd=sd=zc=0;r(F)?(Ud=!0,Vd=K.createStream(34962,F),ed=Vd.dtype):(Vd=K.getBuffer(F))?ed=Vd.dtype:"constant"in F?(xd=2,"number"===typeof F.constant?(sd=F.constant,gd=Lc=zc=0):(sd=0<F.constant.length?F.constant[0]:0,gd=1<F.constant.length?F.constant[1]:0,Lc=2<F.constant.length?F.constant[2]:0,zc=3<F.constant.length?F.constant[3]:
0)):(Vd=r(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),ed="type"in F?na[F.type]:Vd.dtype,Yd=!!F.normalized,ld=F.size|0,rd=F.offset|0,qd=F.stride|0,Ld=F.divisor|0);tc=Q.location;$a=Z[tc];if(1===xd){$a.buffer||T.enableVertexAttribArray(tc);lc=ld||1;if($a.type!==ed||$a.size!==lc||$a.buffer!==Vd||$a.normalized!==Yd||$a.offset!==rd||$a.stride!==qd)T.bindBuffer(34962,Vd.buffer),T.vertexAttribPointer(tc,lc,ed,Yd,qd,rd),$a.type=ed,$a.size=lc,$a.buffer=Vd,$a.normalized=Yd,$a.offset=rd,$a.stride=
qd;$a.divisor!==Ld&&(I.vertexAttribDivisorANGLE(tc,Ld),$a.divisor=Ld)}else if($a.buffer&&(T.disableVertexAttribArray(tc),$a.buffer=null),$a.x!==sd||$a.y!==gd||$a.z!==Lc||$a.w!==zc)T.vertexAttrib4f(tc,sd,gd,Lc,zc),$a.x=sd,$a.y=gd,$a.z=Lc,$a.w=zc;Fb=this.charBuffer;rc=!1;Ra=null;Ic=0;bc=!1;Sd=Yc=0;md=1;Ac=0;ec=5126;ub=La=Ab=Fc=0;r(Fb)?(rc=!0,Ra=K.createStream(34962,Fb),ec=Ra.dtype):(Ra=K.getBuffer(Fb))?ec=Ra.dtype:"constant"in Fb?(md=2,"number"===typeof Fb.constant?(Ab=Fb.constant,La=ub=Fc=0):(Ab=0<
Fb.constant.length?Fb.constant[0]:0,La=1<Fb.constant.length?Fb.constant[1]:0,ub=2<Fb.constant.length?Fb.constant[2]:0,Fc=3<Fb.constant.length?Fb.constant[3]:0)):(Ra=r(Fb.buffer)?K.createStream(34962,Fb.buffer):K.getBuffer(Fb.buffer),ec="type"in Fb?na[Fb.type]:Ra.dtype,bc=!!Fb.normalized,Sd=Fb.size|0,Yc=Fb.offset|0,Ac=Fb.stride|0,Ic=Fb.divisor|0);Ua=la.location;pa=Z[Ua];if(1===md){pa.buffer||T.enableVertexAttribArray(Ua);vd=Sd||1;if(pa.type!==ec||pa.size!==vd||pa.buffer!==Ra||pa.normalized!==bc||pa.offset!==
Yc||pa.stride!==Ac)T.bindBuffer(34962,Ra.buffer),T.vertexAttribPointer(Ua,vd,ec,bc,Ac,Yc),pa.type=ec,pa.size=vd,pa.buffer=Ra,pa.normalized=bc,pa.offset=Yc,pa.stride=Ac;pa.divisor!==Ic&&(I.vertexAttribDivisorANGLE(Ua,Ic),pa.divisor=Ic)}else if(pa.buffer&&(T.disableVertexAttribArray(Ua),pa.buffer=null),pa.x!==Ab||pa.y!==La||pa.z!==ub||pa.w!==Fc)T.vertexAttrib4f(Ua,Ab,La,ub,Fc),pa.x=Ab,pa.y=La,pa.z=ub,pa.w=Fc;Cb=this.position;Qa=!1;Hb=null;bb=0;Qc=!1;Gf=Sb=0;ac=1;Tb=0;Ad=5126;vb=nb=Ma=Ub=0;r(Cb)?(Qa=
!0,Hb=K.createStream(34962,Cb),Ad=Hb.dtype):(Hb=K.getBuffer(Cb))?Ad=Hb.dtype:"constant"in Cb?(ac=2,"number"===typeof Cb.constant?(Ma=Cb.constant,nb=vb=Ub=0):(Ma=0<Cb.constant.length?Cb.constant[0]:0,nb=1<Cb.constant.length?Cb.constant[1]:0,vb=2<Cb.constant.length?Cb.constant[2]:0,Ub=3<Cb.constant.length?Cb.constant[3]:0)):(Hb=r(Cb.buffer)?K.createStream(34962,Cb.buffer):K.getBuffer(Cb.buffer),Ad="type"in Cb?na[Cb.type]:Hb.dtype,Qc=!!Cb.normalized,Gf=Cb.size|0,Sb=Cb.offset|0,Tb=Cb.stride|0,bb=Cb.divisor|
0);hb=qa.location;Na=Z[hb];if(1===ac){Na.buffer||T.enableVertexAttribArray(hb);pc=Gf||2;if(Na.type!==Ad||Na.size!==pc||Na.buffer!==Hb||Na.normalized!==Qc||Na.offset!==Sb||Na.stride!==Tb)T.bindBuffer(34962,Hb.buffer),T.vertexAttribPointer(hb,pc,Ad,Qc,Tb,Sb),Na.type=Ad,Na.size=pc,Na.buffer=Hb,Na.normalized=Qc,Na.offset=Sb,Na.stride=Tb;Na.divisor!==bb&&(I.vertexAttribDivisorANGLE(hb,bb),Na.divisor=bb)}else if(Na.buffer&&(T.disableVertexAttribArray(hb),Na.buffer=null),Na.x!==Ma||Na.y!==nb||Na.z!==vb||
Na.w!==Ub)T.vertexAttrib4f(hb,Ma,nb,vb,Ub),Na.x=Ma,Na.y=nb,Na.z=vb,Na.w=Ub;Vb=m.call(this,N,a,0);T.uniform1f(da.location,Vb);Uc=f.call(this,N,a,0);T.uniform1f(h.location,Uc);T.uniform1f(q.location,a.align);T.uniform1f(n.location,a.baseline);cb=this.viewportArray;T.uniform4f(ta.location,cb[0],cb[1],cb[2],cb[3]);mc=a.color;T.uniform4f(e.location,mc[0],mc[1],mc[2],mc[3]);Gc=b.call(this,N,a,0);T.uniform2f(U.location,Gc[0],Gc[1]);oc=t.call(this,N,a,0);T.uniform2f(X.location,oc[0],oc[1]);jb=this.scale;
T.uniform2f(gb.location,jb[0],jb[1]);kb=this.translate;T.uniform2f(Rb.location,kb[0],kb[1]);ra=a.positionOffset;T.uniform2f(fb.location,ra[0],ra[1]);T.uniform1f(Y.location,a.opacity);(ob=c.call(this,N,a,0))&&"framebuffer"===ob._reglType&&(ob=ob.color[0]);wa=ob._texture;T.uniform1i(S.location,wa.bind());(Sa=oa.elements)?T.bindBuffer(34963,Sa.buffer.buffer):Ja.currentVAO&&(Sa=P.getElements(Ja.currentVAO.elements))&&T.bindBuffer(34963,Sa.buffer.buffer);ab=a.offset;if(Ba=a.count)db=oa.instances,0<db?
Sa?I.drawElementsInstancedANGLE(0,Ba,Sa.type,ab<<(Sa.type-5121>>1),db):I.drawArraysInstancedANGLE(0,ab,Ba,db):0>db&&(Sa?T.drawElements(0,Ba,Sa.type,ab<<(Sa.type-5121>>1)):T.drawArrays(0,ab,Ba)),R.dirty=!0,Ja.setVAO(null),N.viewportWidth=A,N.viewportHeight=B,C&&(d.cpuTime+=performance.now()-H),O&&K.destroyStream(J),Ud&&K.destroyStream(Vd),rc&&K.destroyStream(Ra),Qa&&K.destroyStream(Hb),wa.unbind()},scope:function(a,b,c){var e,f,g,h,k,n,p,q,m,w,v,t,z,E,L,O,J,P,Q,S,aa,T,U,W,X,fa,sa,Y,Z,da,ha,ia,ua,la,
qa,ta,va,Aa,Da,Ja,Xa,Za,xc,Ra,fb,gb,tb,sb,ud,Jb,Zb,Rb,Ab,La,ub,Ua,pa,Xb,Cb,Qa,Hb,bb,qc,Sb,sc,ac,Tb,$c,Ub,Ma,nb,vb,hb,Na,pc,Vb,Uc,cb,mc,Gc,oc,jb,kb,ra,ob,wa,Sa,ab,Ba,db,Ia,Db,Bb,Pa,Jc,Kb,Ya,Wb,ya,ad,Ka,Ob,eb,ib,za,fc,Ea,pb,qb,Va,Wa,nc,cd,vc,Ta,Mb,dd,Fa,Kc,Oa,Ca,lb,wb,Eb,rb,wc,xb,Dd,uc,Wd,Mc,nd,od,Yb,cc,Pb,Ga,$b,mb,yb,Nb,Qb,gc,ic,Rc,Bc,Cc,Dc,Nc,Zc,Sc,Oc,Lb,Gb,Pc,Hc,Tc,hc,Wc;e=this.viewport;f=e.x|0;g=e.y|0;h="width"in e?e.width|0:N.framebufferWidth-f;k="height"in e?e.height|0:N.framebufferHeight-g;n=
N.viewportWidth;N.viewportWidth=h;p=N.viewportHeight;N.viewportHeight=k;q=V[0];V[0]=f;m=V[1];V[1]=g;w=V[2];V[2]=h;v=V[3];V[3]=k;t=dc[0];dc[0]=0;z=dc[1];dc[1]=0;E=dc[2];dc[2]=0;L=dc[3];dc[3]=1;O=ja.blend_enable;ja.blend_enable=!0;J=ga[0];ga[0]=770;P=ga[1];ga[1]=771;Q=ga[2];ga[2]=773;S=ga[3];ga[3]=1;aa=ja.depth_enable;ja.depth_enable=!1;T=ja.stencil_enable;ja.stencil_enable=!1;if(U=R.profile)W=performance.now(),d.count++;X=a.offset;fa=oa.offset;oa.offset=X;sa=a.count;Y=oa.count;oa.count=sa;Z=oa.primitive;
oa.primitive=0;da=a.align;ha=Ha[64];Ha[64]=da;ia=x.call(this,N,a,c);ua=Ha[69];Ha[69]=ia;la=M.call(this,N,a,c);qa=Ha[67];Ha[67]=la;ta=ea.call(this,N,a,c);va=Ha[66];Ha[66]=ta;Aa=a.baseline;Da=Ha[65];Ha[65]=Aa;Ja=H.call(this,N,a,c);Xa=Ha[62];Ha[62]=Ja;Za=a.color;xc=Ha[14];Ha[14]=Za;Ra=I.call(this,N,a,c);fb=Ha[63];Ha[63]=Ra;gb=a.opacity;tb=Ha[10];Ha[10]=gb;sb=a.positionOffset;ud=Ha[68];Ha[68]=sb;Jb=this.scale;Zb=Ha[6];Ha[6]=Jb;Rb=this.translate;Ab=Ha[8];Ha[8]=Rb;La=this.viewportArray;ub=Ha[3];Ha[3]=La;
Ua=this.charBuffer;pa=!1;Xb=null;Cb=0;Qa=!1;bb=Hb=0;qc=1;Sb=0;sc=5126;Ub=$c=Tb=ac=0;r(Ua)?(pa=!0,Xb=K.createStream(34962,Ua),sc=Xb.dtype):(Xb=K.getBuffer(Ua))?sc=Xb.dtype:"constant"in Ua?(qc=2,"number"===typeof Ua.constant?(Tb=Ua.constant,$c=Ub=ac=0):(Tb=0<Ua.constant.length?Ua.constant[0]:0,$c=1<Ua.constant.length?Ua.constant[1]:0,Ub=2<Ua.constant.length?Ua.constant[2]:0,ac=3<Ua.constant.length?Ua.constant[3]:0)):(Xb=r(Ua.buffer)?K.createStream(34962,Ua.buffer):K.getBuffer(Ua.buffer),sc="type"in
Ua?na[Ua.type]:Xb.dtype,Qa=!!Ua.normalized,bb=Ua.size|0,Hb=Ua.offset|0,Sb=Ua.stride|0,Cb=Ua.divisor|0);Ma=y.buffer;y.buffer=Xb;nb=y.divisor;y.divisor=Cb;vb=y.normalized;y.normalized=Qa;hb=y.offset;y.offset=Hb;Na=y.size;y.size=bb;pc=y.state;y.state=qc;Vb=y.stride;y.stride=Sb;Uc=y.type;y.type=sc;cb=y.w;y.w=ac;mc=y.x;y.x=Tb;Gc=y.y;y.y=$c;oc=y.z;y.z=Ub;F.buffer=this.sizeBuffer;jb=!1;kb=null;ra=0;ob=!1;Sa=wa=0;ab=1;Ba=0;db=5126;Pa=Bb=Db=Ia=0;r(F)?(jb=!0,kb=K.createStream(34962,F),db=kb.dtype):(kb=K.getBuffer(F))?
db=kb.dtype:"constant"in F?(ab=2,"number"===typeof F.constant?(Db=F.constant,Bb=Pa=Ia=0):(Db=0<F.constant.length?F.constant[0]:0,Bb=1<F.constant.length?F.constant[1]:0,Pa=2<F.constant.length?F.constant[2]:0,Ia=3<F.constant.length?F.constant[3]:0)):(kb=r(F.buffer)?K.createStream(34962,F.buffer):K.getBuffer(F.buffer),db="type"in F?na[F.type]:kb.dtype,ob=!!F.normalized,Sa=F.size|0,wa=F.offset|0,Ba=F.stride|0,ra=F.divisor|0);Jc=A.buffer;A.buffer=kb;Kb=A.divisor;A.divisor=ra;Ya=A.normalized;A.normalized=
ob;Wb=A.offset;A.offset=wa;ya=A.size;A.size=Sa;ad=A.state;A.state=ab;Ka=A.stride;A.stride=Ba;Ob=A.type;A.type=db;eb=A.w;A.w=Ia;ib=A.x;A.x=Db;za=A.y;A.y=Bb;fc=A.z;A.z=Pa;Ea=this.position;pb=!1;qb=null;Va=0;Wa=!1;cd=nc=0;vc=1;Ta=0;Mb=5126;Oa=Kc=Fa=dd=0;r(Ea)?(pb=!0,qb=K.createStream(34962,Ea),Mb=qb.dtype):(qb=K.getBuffer(Ea))?Mb=qb.dtype:"constant"in Ea?(vc=2,"number"===typeof Ea.constant?(Fa=Ea.constant,Kc=Oa=dd=0):(Fa=0<Ea.constant.length?Ea.constant[0]:0,Kc=1<Ea.constant.length?Ea.constant[1]:0,
Oa=2<Ea.constant.length?Ea.constant[2]:0,dd=3<Ea.constant.length?Ea.constant[3]:0)):(qb=r(Ea.buffer)?K.createStream(34962,Ea.buffer):K.getBuffer(Ea.buffer),Mb="type"in Ea?na[Ea.type]:qb.dtype,Wa=!!Ea.normalized,cd=Ea.size|0,nc=Ea.offset|0,Ta=Ea.stride|0,Va=Ea.divisor|0);Ca=C.buffer;C.buffer=qb;lb=C.divisor;C.divisor=Va;wb=C.normalized;C.normalized=Wa;Eb=C.offset;C.offset=nc;rb=C.size;C.size=cd;wc=C.state;C.state=vc;xb=C.stride;C.stride=Ta;Dd=C.type;C.type=Mb;uc=C.w;C.w=dd;Wd=C.x;C.x=Fa;Mc=C.y;C.y=
Kc;nd=C.z;C.z=Oa;u.buffer=this.sizeBuffer;od=!1;Yb=null;cc=0;Pb=!1;$b=Ga=0;mb=1;yb=0;Nb=5126;Rc=ic=gc=Qb=0;r(u)?(od=!0,Yb=K.createStream(34962,u),Nb=Yb.dtype):(Yb=K.getBuffer(u))?Nb=Yb.dtype:"constant"in u?(mb=2,"number"===typeof u.constant?(gc=u.constant,ic=Rc=Qb=0):(gc=0<u.constant.length?u.constant[0]:0,ic=1<u.constant.length?u.constant[1]:0,Rc=2<u.constant.length?u.constant[2]:0,Qb=3<u.constant.length?u.constant[3]:0)):(Yb=r(u.buffer)?K.createStream(34962,u.buffer):K.getBuffer(u.buffer),Nb="type"in
u?na[u.type]:Yb.dtype,Pb=!!u.normalized,$b=u.size|0,Ga=u.offset|0,yb=u.stride|0,cc=u.divisor|0);Bc=B.buffer;B.buffer=Yb;Cc=B.divisor;B.divisor=cc;Dc=B.normalized;B.normalized=Pb;Nc=B.offset;B.offset=Ga;Zc=B.size;B.size=$b;Sc=B.state;B.state=mb;Oc=B.stride;B.stride=yb;Lb=B.type;B.type=Nb;Gb=B.w;B.w=Qb;Pc=B.x;B.x=gc;Hc=B.y;B.y=ic;Tc=B.z;B.z=Rc;hc=ba.vert;ba.vert=61;Wc=ba.frag;ba.frag=60;R.dirty=!0;b(N,a,c);N.viewportWidth=n;N.viewportHeight=p;V[0]=q;V[1]=m;V[2]=w;V[3]=v;dc[0]=t;dc[1]=z;dc[2]=E;dc[3]=
L;ja.blend_enable=O;ga[0]=J;ga[1]=P;ga[2]=Q;ga[3]=S;ja.depth_enable=aa;ja.stencil_enable=T;U&&(d.cpuTime+=performance.now()-W);oa.offset=fa;oa.count=Y;oa.primitive=Z;Ha[64]=ha;Ha[69]=ua;Ha[67]=qa;Ha[66]=va;Ha[65]=Da;Ha[62]=Xa;Ha[14]=xc;Ha[63]=fb;Ha[10]=tb;Ha[68]=ud;Ha[6]=Zb;Ha[8]=Ab;Ha[3]=ub;pa&&K.destroyStream(Xb);y.buffer=Ma;y.divisor=nb;y.normalized=vb;y.offset=hb;y.size=Na;y.state=pc;y.stride=Vb;y.type=Uc;y.w=cb;y.x=mc;y.y=Gc;y.z=oc;jb&&K.destroyStream(kb);A.buffer=Jc;A.divisor=Kb;A.normalized=
Ya;A.offset=Wb;A.size=ya;A.state=ad;A.stride=Ka;A.type=Ob;A.w=eb;A.x=ib;A.y=za;A.z=fc;pb&&K.destroyStream(qb);C.buffer=Ca;C.divisor=lb;C.normalized=wb;C.offset=Eb;C.size=rb;C.state=wc;C.stride=xb;C.type=Dd;C.w=uc;C.x=Wd;C.y=Mc;C.z=nd;od&&K.destroyStream(Yb);B.buffer=Bc;B.divisor=Cc;B.normalized=Dc;B.offset=Nc;B.size=Zc;B.state=Sc;B.stride=Oc;B.type=Lb;B.w=Gb;B.x=Pc;B.y=Hc;B.z=Tc;ba.vert=hc;ba.frag=Wc;R.dirty=!0}}}}},{}],25:[function(m,t,M){var a=m("./sorted-object-keys");t.exports=function(d,k){for(var m=
a(k),f=0;f<m.length;++f)d[m[f]]=k[m[f]];return d}},{"./sorted-object-keys":34}],26:[function(m,t,M){function a(a,d,b,k,c,m){for(var t=0;t<d;++t)for(var M=a[t],H=0;H<b;++H)for(var I=M[H],y=0;y<k;++y)c[m++]=I[y]}function d(k,f,b,m,c){for(var x=1,t=b+1;t<f.length;++t)x*=f[t];var M=f[b];if(4===f.length-b){var H=f[b+1],I=f[b+2];f=f[b+3];for(t=0;t<M;++t)a(k[t],H,I,f,m,c),c+=x}else for(t=0;t<M;++t)d(k[t],f,b+1,m,c),c+=x}var k=m("./pool");t.exports={shape:function(a){for(var d=[];a.length;a=a[0])d.push(a.length);
return d},flatten:function(m,f,b,t){var c=1;if(f.length)for(var x=0;x<f.length;++x)c*=f[x];else c=0;b=t||k.allocType(b,c);switch(f.length){case 0:break;case 1:t=f[0];for(f=0;f<t;++f)b[f]=m[f];break;case 2:t=f[0];f=f[1];for(x=c=0;x<t;++x)for(var M=m[x],ea=0;ea<f;++ea)b[c++]=M[ea];break;case 3:a(m,f[0],f[1],f[2],b,0);break;default:d(m,f,0,b,0)}return b}}},{"./pool":32}],27:[function(m,t,M){var a=m("./is-typed-array");t.exports=function(d){return Array.isArray(d)||a(d)}},{"./is-typed-array":30}],28:[function(m,
t,M){var a=m("./is-typed-array");t.exports=function(d){return!!d&&"object"===typeof d&&Array.isArray(d.shape)&&Array.isArray(d.stride)&&"number"===typeof d.offset&&d.shape.length===d.stride.length&&(Array.isArray(d.data)||a(d.data))}},{"./is-typed-array":30}],29:[function(m,t,M){t.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(m,t,M){t.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||
a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(m,t,M){t.exports=function(a,d){for(var k=Array(a),m=0;m<a;++m)k[m]=d(m);return k}},{}],32:[function(m,t,M){function a(a){var d,b;d=(65535<a)<<4;a>>>=d;b=(255<a)<<3;a>>>=b;d|=b;b=(15<a)<<2;a>>>=b;d|=b;b=(3<a)<<1;return d|b|a>>>b>>1}function d(){function d(f){a:{for(var c=16;268435456>=c;c*=16)if(f<=c){f=c;break a}f=0}c=b[a(f)>>2];return 0<c.length?c.pop():new ArrayBuffer(f)}
function f(d){b[a(d.byteLength)>>2].push(d)}var b=k(8,function(){return[]});return{alloc:d,free:f,allocType:function(a,b){var f=null;switch(a){case 5120:f=new Int8Array(d(b),0,b);break;case 5121:f=new Uint8Array(d(b),0,b);break;case 5122:f=new Int16Array(d(2*b),0,b);break;case 5123:f=new Uint16Array(d(2*b),0,b);break;case 5124:f=new Int32Array(d(4*b),0,b);break;case 5125:f=new Uint32Array(d(4*b),0,b);break;case 5126:f=new Float32Array(d(4*b),0,b);break;default:return null}return f.length!==b?f.subarray(0,
b):f},freeType:function(a){f(a.buffer)}}}var k=m("./loop");m=d();m.zero=d();t.exports=m},{"./loop":31}],33:[function(m,t,M){t.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(m,t,M){t.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(m,t,M){var a=m("./pool"),d=new Float32Array(1),
k=new Uint32Array(d.buffer);t.exports=function(m){for(var f=a.allocType(5123,m.length),b=0;b<m.length;++b)if(isNaN(m[b]))f[b]=65535;else if(Infinity===m[b])f[b]=31744;else if(-Infinity===m[b])f[b]=64512;else{d[0]=m[b];var t=k[0],c=t>>>31<<15,x=(t<<1>>>24)-127,t=t>>13&1023;f[b]=-24>x?c:-14>x?c+(t+1024>>-14-x):15<x?c+31744:c+(x+15<<10)+t}return f}},{"./pool":32}],36:[function(m,t,M){var a=m("./sorted-object-keys");t.exports=function(d){return a(d).map(function(a){return d[a]})}},{"./sorted-object-keys":34}],
37:[function(m,t,M){function a(a,c,d){function f(){var b=window.innerWidth,c=window.innerHeight;a!==document.body&&(c=k.getBoundingClientRect(),b=c.right-c.left,c=c.bottom-c.top);k.width=d*b;k.height=d*c}var k=document.createElement("canvas");b(k.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(k);a===document.body&&(k.style.position="absolute",b(a.style,{margin:0,padding:0}));var m;a!==document.body&&"function"===typeof ResizeObserver?(m=new ResizeObserver(function(){setTimeout(f)}),
m.observe(a)):window.addEventListener("resize",f,!1);f();return{canvas:k,onDestroy:function(){m?m.disconnect():window.removeEventListener("resize",f);a.removeChild(k)}}}function d(a,b){function d(f){try{return a.getContext(f,b)}catch(k){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function k(a){if("string"===typeof a)return a.split();f(Array.isArray(a),"invalid extension array");return a}function w(a){return"string"===typeof a?(f("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(a)):a}var f=m("./util/check"),b=m("./util/extend");t.exports=function(b){var c=b||{},m,t,M,H;b={};var I=[],y=[],A="undefined"===typeof window?1:window.devicePixelRatio,C=!1,B=function(a){a&&f.raise(a)},J=function(){};"string"===typeof c?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),m=document.querySelector(c),f(m,"invalid query string for element")):"object"===typeof c?"string"===typeof c.nodeName&&"function"===typeof c.appendChild&&
"function"===typeof c.getBoundingClientRect?m=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(H=c,M=H.canvas):(f.constructor(c),"gl"in c?H=c.gl:"canvas"in c?M=w(c.canvas):"container"in c&&(t=w(c.container)),"attributes"in c&&(b=c.attributes,f.type(b,"object","invalid context attributes")),"extensions"in c&&(I=k(c.extensions)),"optionalExtensions"in c&&(y=k(c.optionalExtensions)),"onDone"in c&&(f.type(c.onDone,"function","invalid or missing onDone callback"),B=c.onDone),"profile"in
c&&(C=!!c.profile),"pixelRatio"in c&&(A=+c.pixelRatio,f(0<A,"invalid pixel ratio"))):f.raise("invalid arguments to regl");m&&("canvas"===m.nodeName.toLowerCase()?M=m:t=m);if(!H){if(!M){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");m=a(t||document.body,B,A);if(!m)return null;M=m.canvas;J=m.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);H=d(M,b)}return H?{gl:H,canvas:M,container:t,extensions:I,optionalExtensions:y,pixelRatio:A,
profile:C,onDone:B,onDestroy:J}:(J(),B("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(m,t,M){t.exports=function(a,d,k){a[0]=d[0]+k[0];a[1]=d[1]+k[1];return a}},{}],39:[function(m,t,M){t.exports=function(a,d){a[0]=Math.ceil(d[0]);a[1]=Math.ceil(d[1]);return a}},{}],40:[function(m,t,M){t.exports=function(a){var d=new Float32Array(2);d[0]=a[0];d[1]=a[1];return d}},{}],41:[function(m,t,M){t.exports=
function(a,d){a[0]=d[0];a[1]=d[1];return a}},{}],42:[function(m,t,M){t.exports=function(){var a=new Float32Array(2);a[0]=0;a[1]=0;return a}},{}],43:[function(m,t,M){t.exports=function(a,d,k){d=d[0]*k[1]-d[1]*k[0];a[0]=a[1]=0;a[2]=d;return a}},{}],44:[function(m,t,M){t.exports=m("./distance")},{"./distance":45}],45:[function(m,t,M){t.exports=function(a,d){var k=d[0]-a[0],m=d[1]-a[1];return Math.sqrt(k*k+m*m)}},{}],46:[function(m,t,M){t.exports=m("./divide")},{"./divide":47}],47:[function(m,t,M){t.exports=
function(a,d,k){a[0]=d[0]/k[0];a[1]=d[1]/k[1];return a}},{}],48:[function(m,t,M){t.exports=function(a,d){return a[0]*d[0]+a[1]*d[1]}},{}],49:[function(m,t,M){t.exports=1E-6},{}],50:[function(m,t,M){t.exports=function(d,k){var m=d[0],f=d[1],b=k[0],t=k[1];return Math.abs(m-b)<=a*Math.max(1,Math.abs(m),Math.abs(b))&&Math.abs(f-t)<=a*Math.max(1,Math.abs(f),Math.abs(t))};var a=m("./epsilon")},{"./epsilon":49}],51:[function(m,t,M){t.exports=function(a,d){return a[0]===d[0]&&a[1]===d[1]}},{}],52:[function(m,
t,M){t.exports=function(a,d){a[0]=Math.floor(d[0]);a[1]=Math.floor(d[1]);return a}},{}],53:[function(m,t,M){t.exports=function(d,k,m,f,b,t){k||(k=2);m||(m=0);for(f=f?Math.min(f*k+m,d.length):d.length;m<f;m+=k)a[0]=d[m],a[1]=d[m+1],b(a,a,t),d[m]=a[0],d[m+1]=a[1];return d};var a=m("./create")()},{"./create":42}],54:[function(m,t,M){t.exports=function(a,d){var k=new Float32Array(2);k[0]=a;k[1]=d;return k}},{}],55:[function(m,t,M){t.exports={EPSILON:m("./epsilon"),create:m("./create"),clone:m("./clone"),
fromValues:m("./fromValues"),copy:m("./copy"),set:m("./set"),equals:m("./equals"),exactEquals:m("./exactEquals"),add:m("./add"),subtract:m("./subtract"),sub:m("./sub"),multiply:m("./multiply"),mul:m("./mul"),divide:m("./divide"),div:m("./div"),inverse:m("./inverse"),min:m("./min"),max:m("./max"),rotate:m("./rotate"),floor:m("./floor"),ceil:m("./ceil"),round:m("./round"),scale:m("./scale"),scaleAndAdd:m("./scaleAndAdd"),distance:m("./distance"),dist:m("./dist"),squaredDistance:m("./squaredDistance"),
sqrDist:m("./sqrDist"),length:m("./length"),len:m("./len"),squaredLength:m("./squaredLength"),sqrLen:m("./sqrLen"),negate:m("./negate"),normalize:m("./normalize"),dot:m("./dot"),cross:m("./cross"),lerp:m("./lerp"),random:m("./random"),transformMat2:m("./transformMat2"),transformMat2d:m("./transformMat2d"),transformMat3:m("./transformMat3"),transformMat4:m("./transformMat4"),forEach:m("./forEach"),limit:m("./limit")}},{"./add":38,"./ceil":39,"./clone":40,"./copy":41,"./create":42,"./cross":43,"./dist":44,
"./distance":45,"./div":46,"./divide":47,"./dot":48,"./epsilon":49,"./equals":50,"./exactEquals":51,"./floor":52,"./forEach":53,"./fromValues":54,"./inverse":56,"./len":57,"./length":58,"./lerp":59,"./limit":60,"./max":61,"./min":62,"./mul":63,"./multiply":64,"./negate":65,"./normalize":66,"./random":67,"./rotate":68,"./round":69,"./scale":70,"./scaleAndAdd":71,"./set":72,"./sqrDist":73,"./sqrLen":74,"./squaredDistance":75,"./squaredLength":76,"./sub":77,"./subtract":78,"./transformMat2":79,"./transformMat2d":80,
"./transformMat3":81,"./transformMat4":82}],56:[function(m,t,M){t.exports=function(a,d){a[0]=1/d[0];a[1]=1/d[1];return a}},{}],57:[function(m,t,M){t.exports=m("./length")},{"./length":58}],58:[function(m,t,M){t.exports=function(a){var d=a[0];a=a[1];return Math.sqrt(d*d+a*a)}},{}],59:[function(m,t,M){t.exports=function(a,d,k,m){var f=d[0];d=d[1];a[0]=f+m*(k[0]-f);a[1]=d+m*(k[1]-d);return a}},{}],60:[function(m,t,M){t.exports=function(a,d,k){var m=d[0]*d[0]+d[1]*d[1];m>k*k?(m=Math.sqrt(m),a[0]=d[0]/
m*k,a[1]=d[1]/m*k):(a[0]=d[0],a[1]=d[1]);return a}},{}],61:[function(m,t,M){t.exports=function(a,d,k){a[0]=Math.max(d[0],k[0]);a[1]=Math.max(d[1],k[1]);return a}},{}],62:[function(m,t,M){t.exports=function(a,d,k){a[0]=Math.min(d[0],k[0]);a[1]=Math.min(d[1],k[1]);return a}},{}],63:[function(m,t,M){t.exports=m("./multiply")},{"./multiply":64}],64:[function(m,t,M){t.exports=function(a,d,k){a[0]=d[0]*k[0];a[1]=d[1]*k[1];return a}},{}],65:[function(m,t,M){t.exports=function(a,d){a[0]=-d[0];a[1]=-d[1];
return a}},{}],66:[function(m,t,M){t.exports=function(a,d){var k=d[0],m=d[1],k=k*k+m*m;0<k&&(k=1/Math.sqrt(k),a[0]=d[0]*k,a[1]=d[1]*k);return a}},{}],67:[function(m,t,M){t.exports=function(a,d){d=d||1;var k=2*Math.random()*Math.PI;a[0]=Math.cos(k)*d;a[1]=Math.sin(k)*d;return a}},{}],68:[function(m,t,M){t.exports=function(a,d,k){var m=Math.cos(k);k=Math.sin(k);var f=d[0];d=d[1];a[0]=f*m-d*k;a[1]=f*k+d*m;return a}},{}],69:[function(m,t,M){t.exports=function(a,d){a[0]=Math.round(d[0]);a[1]=Math.round(d[1]);
return a}},{}],70:[function(m,t,M){t.exports=function(a,d,k){a[0]=d[0]*k;a[1]=d[1]*k;return a}},{}],71:[function(m,t,M){t.exports=function(a,d,k,m){a[0]=d[0]+k[0]*m;a[1]=d[1]+k[1]*m;return a}},{}],72:[function(m,t,M){t.exports=function(a,d,k){a[0]=d;a[1]=k;return a}},{}],73:[function(m,t,M){t.exports=m("./squaredDistance")},{"./squaredDistance":75}],74:[function(m,t,M){t.exports=m("./squaredLength")},{"./squaredLength":76}],75:[function(m,t,M){t.exports=function(a,d){var k=d[0]-a[0],m=d[1]-a[1];return k*
k+m*m}},{}],76:[function(m,t,M){t.exports=function(a){var d=a[0];a=a[1];return d*d+a*a}},{}],77:[function(m,t,M){t.exports=m("./subtract")},{"./subtract":78}],78:[function(m,t,M){t.exports=function(a,d,k){a[0]=d[0]-k[0];a[1]=d[1]-k[1];return a}},{}],79:[function(m,t,M){t.exports=function(a,d,k){var m=d[0];d=d[1];a[0]=k[0]*m+k[2]*d;a[1]=k[1]*m+k[3]*d;return a}},{}],80:[function(m,t,M){t.exports=function(a,d,k){var m=d[0];d=d[1];a[0]=k[0]*m+k[2]*d+k[4];a[1]=k[1]*m+k[3]*d+k[5];return a}},{}],81:[function(m,
t,M){t.exports=function(a,d,k){var m=d[0];d=d[1];a[0]=k[0]*m+k[3]*d+k[6];a[1]=k[1]*m+k[4]*d+k[7];return a}},{}],82:[function(m,t,M){t.exports=function(a,d,k){var m=d[0];d=d[1];a[0]=k[0]*m+k[4]*d+k[12];a[1]=k[1]*m+k[5]*d+k[13];return a}},{}],83:[function(m,t,M){t.exports=function(d,k){function m(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==C.alt,C.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==C.shift,C.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==C.control,C.control=!!a.ctrlKey);"metaKey"in
a&&(b=b||a.metaKey!==C.meta,C.meta=!!a.metaKey);return b}function f(b,c){var d=a.x(c),f=a.y(c);"buttons"in c&&(b=c.buttons|0);if(b!==I||d!==y||f!==A||m(c))I=b|0,y=d||0,A=f||0,k&&k(I,y,A,C)}function b(a){f(0,a)}function t(){if(I||y||A||C.shift||C.alt||C.meta||C.control)I=y=A=0,C.shift=C.alt=C.control=C.meta=!1,k&&k(0,0,0,C)}function c(a){m(a)&&k&&k(I,y,A,C)}function x(b){0===a.buttons(b)?f(0,b):f(I,b)}function M(b){f(I|a.buttons(b),b)}function ea(b){f(I&~a.buttons(b),b)}function H(){B||(B=!0,d.addEventListener("mousemove",
x),d.addEventListener("mousedown",M),d.addEventListener("mouseup",ea),d.addEventListener("mouseleave",b),d.addEventListener("mouseenter",b),d.addEventListener("mouseout",b),d.addEventListener("mouseover",b),d.addEventListener("blur",t),d.addEventListener("keyup",c),d.addEventListener("keydown",c),d.addEventListener("keypress",c),d!==window&&(window.addEventListener("blur",t),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}k||(k=d,d=window);
var I=0,y=0,A=0,C={shift:!1,alt:!1,control:!1,meta:!1},B=!1;H();var J={element:d};Object.defineProperties(J,{enabled:{get:function(){return B},set:function(a){a?H():B&&(B=!1,d.removeEventListener("mousemove",x),d.removeEventListener("mousedown",M),d.removeEventListener("mouseup",ea),d.removeEventListener("mouseleave",b),d.removeEventListener("mouseenter",b),d.removeEventListener("mouseout",b),d.removeEventListener("mouseover",b),d.removeEventListener("blur",t),d.removeEventListener("keyup",c),d.removeEventListener("keydown",
c),d.removeEventListener("keypress",c),d!==window&&(window.removeEventListener("blur",t),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))},enumerable:!0},buttons:{get:function(){return I},enumerable:!0},x:{get:function(){return y},enumerable:!0},y:{get:function(){return A},enumerable:!0},mods:{get:function(){return C},enumerable:!0}});return J};var a=m("mouse-event")},{"mouse-event":84}],84:[function(m,t,M){function a(a){return a.target||
a.srcElement||window}M.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};M.element=a;M.x=function(d){if("object"===typeof d){if("offsetX"in d)return d.offsetX;var k=a(d).getBoundingClientRect();return d.clientX-k.left}return 0};M.y=function(d){if("object"===typeof d){if("offsetY"in d)return d.offsetY;
var k=a(d).getBoundingClientRect();return d.clientY-k.top}return 0}},{}],85:[function(m,t,M){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var d=m("./lib/util/check"),k=m("./lib/util/extend"),w=m("./lib/dynamic"),f=m("./lib/util/raf"),b=m("./lib/util/clock"),sa=m("./lib/strings"),c=m("./lib/webgl"),x=m("./lib/extension"),jc=m("./lib/limits"),ea=m("./lib/buffer"),H=m("./lib/elements"),I=m("./lib/texture"),y=m("./lib/renderbuffer"),A=m("./lib/framebuffer"),C=m("./lib/attribute"),
B=m("./lib/shader"),J=m("./lib/read"),z=m("./lib/core"),O=m("./lib/stats"),Zb=m("./lib/timer");t.exports=function(m){function g(){if(0===sb.length)K&&K.update(),qc=null;else{qc=f.next(g);e();for(var a=sb.length-1;0<=a;--a){var b=sb[a];b&&b(P,null,0)}qa.flush();K&&K.update()}}function q(){!qc&&0<sb.length&&(qc=f.next(g))}function t(){qc&&(f.cancel(g),qc=null)}function M(a){a.preventDefault();gb=!0;t();ga.forEach(function(a){a()})}function U(a){qa.getError();gb=!1;Rb.restore();ja.restore();Za.restore();
ba.restore();Ha.restore();Ja.restore();r.restore();K&&K.restore();dc.procs.refresh();q();va.forEach(function(a){a()})}function n(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(w.isDynamic(f))e[b]=w.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(w.isDynamic(f[g])){e[b]=w.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}d(!!a,"invalid args to regl({...})");d.type(a,"object","invalid args to regl({...})");
var e=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=k({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);
var h={gpuTime:0,cpuTime:0,count:0},m=dc.compile(a,g,f,e,h),n=m.draw,p=m.batch,q=m.scope,r=[];return k(function(a,b){var e;gb&&d.raise("context lost");if("function"===typeof a)return q.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)q.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)q.call(this,a[e],b,e);else return q.call(this,a,b,0);else if("number"===typeof a){if(0<a)return p.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return p.call(this,
a,a.length)}else return n.call(this,a)},{stats:h,destroy:function(){m.destroy()}})}function la(a,b){var c=0;dc.procs.poll();var e=b.color;e&&(qa.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),c|=16384);"depth"in b&&(qa.clearDepth(+b.depth),c|=256);"stencil"in b&&(qa.clearStencil(b.stencil|0),c|=1024);d(!!c,"called regl.clear with no buffer specified");qa.clear(c)}function Q(b){d.type(b,"function","regl.frame() callback must be a function");sb.push(b);q();return{cancel:function(){function c(){var b=
a(sb,c);sb[b]=sb[sb.length-1];--sb.length;0>=sb.length&&t()}var e=a(sb,b);d(0<=e,"cannot cancel a frame twice");sb[e]=c}}}function da(){var a=Xa.viewport,b=Xa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;P.viewportWidth=P.framebufferWidth=P.drawingBufferWidth=a[2]=b[2]=qa.drawingBufferWidth;P.viewportHeight=P.framebufferHeight=P.drawingBufferHeight=a[3]=b[3]=qa.drawingBufferHeight}function e(){P.tick+=1;P.time=Y();da();dc.procs.poll()}function h(){ba.refresh();da();dc.procs.refresh();K&&K.update()}function Y(){return(b()-
N)/1E3}console.log("REGL args are:",m);m=c(m);if(!m)return null;var qa=m.gl,fb=qa.getContextAttributes(),gb=qa.isContextLost(),Rb=x(qa,m);if(!Rb)return null;var ta=sa(),Aa=O(),Z=Rb.extensions,K=Zb(qa,Z),N=b(),R=qa.drawingBufferWidth,oa=qa.drawingBufferHeight,P={tick:0,time:0,viewportWidth:R,viewportHeight:oa,framebufferWidth:R,framebufferHeight:oa,drawingBufferWidth:R,drawingBufferHeight:oa,pixelRatio:m.pixelRatio},R={elements:null,primitive:4,count:-1,offset:0,instances:-1},Jb=jc(qa,Z),Za=ea(qa,
Aa,m,function(a){return r.destroyBuffer(a)}),T=H(qa,Z,Za,Aa),r=C(qa,Z,Jb,Aa,Za,T,R),ja=B(qa,ta,Aa,m),ba=I(qa,Z,Jb,function(){dc.procs.poll()},P,Aa,m),Ha=y(qa,Z,Jb,Aa,m),Ja=A(qa,Z,Jb,ba,Ha,Aa),dc=z(qa,ta,Z,Jb,Za,T,ba,Ja,{},r,ja,R,P,K,m),ta=J(qa,Ja,dc.procs.poll,P,fb,Z,Jb),Xa=dc.next,W=qa.canvas,sb=[],ga=[],va=[],Xb=[m.onDestroy],qc=null;W&&(W.addEventListener("webglcontextlost",M,!1),W.addEventListener("webglcontextrestored",U,!1));var sc=Ja.setFBO=n({framebuffer:w.define.call(null,1,"framebuffer")});
h();fb=k(n,{clear:function(a){d("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)sc(k({framebuffer:a.framebuffer.faces[b]},a),la);else sc(a,la);else la(null,a)},prop:w.define.bind(null,1),context:w.define.bind(null,2),"this":w.define.bind(null,3),draw:n({}),buffer:function(a){return Za.create(a,34962,!1,!1)},elements:function(a){return T.create(a,!1)},texture:ba.create2D,cube:ba.createCube,
renderbuffer:Ha.create,framebuffer:Ja.create,framebufferCube:Ja.createCube,vao:r.createVAO,attributes:fb,frame:Q,on:function(a,b){d.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return Q(b);case "lost":c=ga;break;case "restore":c=va;break;case "destroy":c=Xb;break;default:d.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Jb,
hasExtension:function(a){return 0<=Jb.extensions.indexOf(a.toLowerCase())},read:ta,destroy:function(){sb.length=0;t();W&&(W.removeEventListener("webglcontextlost",M),W.removeEventListener("webglcontextrestored",U));ja.clear();Ja.clear();Ha.clear();r.clear();ba.clear();T.clear();Za.clear();K&&K.clear();Xb.forEach(function(a){a()})},_gl:qa,_refresh:h,poll:function(){e();K&&K.update()},now:Y,stats:Aa});m.onDone(null,fb);return fb}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,
"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);
